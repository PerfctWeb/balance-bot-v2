const _0x5ec28a=_0x9a8b;(function(_0x1a63f2,_0x5ae6ee){const _0x3cd02d=_0x9a8b,_0x9cf305=_0x1a63f2();while(!![]){try{const _0x157efe=-parseInt(_0x3cd02d(0x35b))/0x1+-parseInt(_0x3cd02d(0x2cc))/0x2*(parseInt(_0x3cd02d(0x23b))/0x3)+-parseInt(_0x3cd02d(0x24b))/0x4+-parseInt(_0x3cd02d(0x1a5))/0x5+-parseInt(_0x3cd02d(0x290))/0x6*(-parseInt(_0x3cd02d(0x185))/0x7)+-parseInt(_0x3cd02d(0x35d))/0x8+parseInt(_0x3cd02d(0x31b))/0x9;if(_0x157efe===_0x5ae6ee)break;else _0x9cf305['push'](_0x9cf305['shift']());}catch(_0x7ee18c){_0x9cf305['push'](_0x9cf305['shift']());}}}(_0x4469,0x9204f));const _0x56a650=function(){let _0x1b61bc=!![];return function(_0x2243e4,_0x3a3f03){const _0x20cf76=_0x1b61bc?function(){const _0x5d84b6=_0x9a8b;if(_0x3a3f03){const _0x3102d1=_0x3a3f03[_0x5d84b6(0x368)](_0x2243e4,arguments);return _0x3a3f03=null,_0x3102d1;}}:function(){};return _0x1b61bc=![],_0x20cf76;};}(),_0x3559a0=_0x56a650(this,function(){const _0x3ca699=_0x9a8b;return _0x3559a0['toString']()[_0x3ca699(0x257)](_0x3ca699(0x342))[_0x3ca699(0x197)]()[_0x3ca699(0x1b1)](_0x3559a0)[_0x3ca699(0x257)](_0x3ca699(0x342));});_0x3559a0();'use strict';process['env'][_0x5ec28a(0x341)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x5ec28a(0x198)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x5ec28a(0x1a9)),crypto=require(_0x5ec28a(0x1d8)),Crypt=require('hybrid-crypto-js')[_0x5ec28a(0x2b4)],RSA=require(_0x5ec28a(0x188))[_0x5ec28a(0x19b)],bcrypt=require(_0x5ec28a(0x32c)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x5ec28a(0x208)][_0x5ec28a(0x2c7)](0x2))[_0x5ec28a(0x208)],uuidRandom=require(_0x5ec28a(0x1f2)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x5ec28a(0x281)),axios=require(_0x5ec28a(0x181)),{GraphQLClient,gql}=require(_0x5ec28a(0x1d6)),util=require(_0x5ec28a(0x2d1)),fileUpload=require(_0x5ec28a(0x32b)),{networkInterfaces}=require('os'),PORT=argv[_0x5ec28a(0x253)]||_0x5ec28a(0x2a6),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x5ec28a(0x1e1)](_0x5ec28a(0x2e7)+PORT+_0x5ec28a(0x179)),process[_0x5ec28a(0x304)](0x1));const HOST=argv['host']||null,userID=argv[_0x5ec28a(0x1e4)]||'',debugging=argv['d']||![],nodeversion=process['versions']['node'];let bbpath=_0x5ec28a(0x1ac),bbpath2='';const botfile=_0x5ec28a(0x224),configfile=_0x5ec28a(0x334),settingsfile=_0x5ec28a(0x21c),securefile=_0x5ec28a(0x1ab),environment=require('./'+bbpath2+_0x5ec28a(0x286))[_0x5ec28a(0x228)]||_0x5ec28a(0x365),maxBackups=0xa;let validInstallation=!![];!fs[_0x5ec28a(0x1d9)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5ec28a(0x255)),configpath=userID?bbpath+_0x5ec28a(0x2b1)+userID+'/':bbpath+_0x5ec28a(0x2b1),configbackuppath=configpath+_0x5ec28a(0x23a),logspath=userID?bbpath+_0x5ec28a(0x247)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x5ec28a(0x2a7)+userID+'/':bbpath+_0x5ec28a(0x2a7),loggerfile=fs[_0x5ec28a(0x1c3)](logspath+_0x5ec28a(0x25e),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x5ec28a(0x218);!fs[_0x5ec28a(0x1d9)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x5ec28a(0x1db)](configbackuppath);!fs[_0x5ec28a(0x1d9)](logspath)&&fs[_0x5ec28a(0x1db)](logspath);!fs['existsSync'](zippath)&&fs[_0x5ec28a(0x1db)](zippath);!fs[_0x5ec28a(0x1d9)](temppath)&&fs[_0x5ec28a(0x1db)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5ec28a(0x293)]({'bots':[]})[_0x5ec28a(0x1ec)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5ec28a(0x293)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5ec28a(0x1e0),'onepagemode':![]}})[_0x5ec28a(0x1ec)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x5ec28a(0x1ec)]();let crypt=new Crypt({'md':_0x5ec28a(0x311),'rsaStandard':_0x5ec28a(0x1fc)});const saltRounds=0xa,mixpanel=Mixpanel[_0x5ec28a(0x331)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x5ec28a(0x29a)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x5ec28a(0x357)]!=''&&settings['telegramToken']!='***')&&settings[_0x5ec28a(0x205)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0xe281f1,_0x335f69)=>{const _0x48cb61=_0x5ec28a,_0x32e2c4=/#[A-Z]{3}#/g;if(typeof _0xe281f1==_0x48cb61(0x2bc)){!_0x335f69?_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](_0x32e2c4,''):(_0xe281f1=_0xe281f1['replace'](/#BLU#/g,_0x48cb61(0x16e)),_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](/#RED#/g,_0x48cb61(0x250)),_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](/#YEL#/g,_0x48cb61(0x2dd)),_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](/#MAG#/g,_0x48cb61(0x345)),_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](/#CYA#/g,_0x48cb61(0x2d6)),_0xe281f1=_0xe281f1[_0x48cb61(0x1c7)](/#RES#/g,_0x48cb61(0x258)));;}return _0xe281f1;},logger={'screen':_0x4fd76b=>{console['log'](parseColor(_0x4fd76b,!![]));},'simple':_0x5856e3=>{const _0x3aca87=_0x5ec28a;console['log'](parseColor(_0x5856e3,!![])),loggerfile[_0x3aca87(0x1ec)](util[_0x3aca87(0x173)](parseColor(_0x5856e3,![]))+'\x0a');},'full':async _0x47dadf=>{const _0x126791=_0x5ec28a,_0x2b252a=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x47dadf;console[_0x126791(0x1e1)](parseColor(_0x2b252a,!![])),loggerfile[_0x126791(0x1ec)](util[_0x126791(0x173)](parseColor(_0x2b252a,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x126791(0x2ff)]!='orders')await sendTelegram(settings['telegramChatId'],_0x126791(0x1da)+parseColor(_0x47dadf,![]));},'debug':async(_0x53021c,_0x4ee090='')=>{const _0x2fd207=_0x5ec28a,_0x28b7aa=getTimeStamp()+_0x2fd207(0x1f9)+_0x53021c;if(debugging)console[_0x2fd207(0x1e1)](parseColor(_0x28b7aa,!![]));loggerfile[_0x2fd207(0x1ec)](util['format'](parseColor(_0x28b7aa,![]))+'\x0a');if(_0x4ee090){if(debugging)console[_0x2fd207(0x1e1)](_0x4ee090);loggerfile['write'](util[_0x2fd207(0x173)](_0x4ee090)+'\x0a');}}};process['on'](_0x5ec28a(0x28a),function(_0x165c28){logger['simple'](_0x165c28);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5ec28a(0x286))[_0x5ec28a(0x1b5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5ec28a(0x1fd)),app=express(),http=require('http')['createServer'](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x5ec28a(0x366),async(_0x481ef3,_0x6fb05b)=>{const _0x7e25fd=_0x5ec28a,_0xf38edf=_0x481ef3[_0x7e25fd(0x361)][_0x7e25fd(0x251)],_0x40e1e6=getClientsWithBotID(_0x7e25fd(0x2de)),_0x436f9d=_0x481ef3[_0x7e25fd(0x320)][_0x7e25fd(0x1cd)],_0xdfeff4=timelyDecrypt(_0x436f9d,![]),_0x3063fc=_0x40e1e6[_0x7e25fd(0x248)](_0x34b173=>_0x34b173['uuid']==_0xdfeff4);if(_0x3063fc){const _0x4af0d0=normalizeIP(_0x481ef3[_0x7e25fd(0x1e2)]['remoteAddress'])[_0x7e25fd(0x1ca)],_0x3e5faf=_0x481ef3[_0x7e25fd(0x320)][_0x7e25fd(0x2fb)];if(validateAccess(_0x3e5faf,_0xdfeff4,_0x4af0d0)['allow'])_0xf38edf==_0x7e25fd(0x233)&&await backupConfigFiles(),await zipFiles(_0xf38edf),_0x6fb05b[_0x7e25fd(0x330)](zippath+(_0xf38edf+_0x7e25fd(0x190)),_0x2733ea=>{const _0xd65e60=_0x7e25fd;_0x2733ea&&(logger[_0xd65e60(0x1cb)]('Failed\x20to\x20download\x20'+_0xf38edf),logger[_0xd65e60(0x1d1)](_0x2733ea));});else logger[_0x7e25fd(0x1cb)](_0x7e25fd(0x337)+_0xf38edf+_0x7e25fd(0x16c));}else logger[_0x7e25fd(0x1cb)](_0x7e25fd(0x337)+_0xf38edf+_0x7e25fd(0x2f1));}),app['post'](_0x5ec28a(0x317),async(_0x425c0a,_0x4547fa)=>{const _0x10d286=_0x5ec28a,_0x105ba1=getClientsWithBotID(_0x10d286(0x2de)),_0x113393=_0x425c0a[_0x10d286(0x320)]['uuid'],_0x2826dc=timelyDecrypt(_0x113393,![]),_0x40b71e=_0x105ba1[_0x10d286(0x248)](_0x17115d=>_0x17115d[_0x10d286(0x1cd)]==_0x2826dc);logger[_0x10d286(0x2f4)]('Backup\x20file\x20uploaded');if(_0x40b71e){const _0x4c14e5=normalizeIP(_0x425c0a[_0x10d286(0x1e2)][_0x10d286(0x347)])[_0x10d286(0x1ca)],_0x394a02=_0x425c0a[_0x10d286(0x320)]['tkn'];if(validateAccess(_0x394a02,_0x2826dc,_0x4c14e5)['allow']){if(_0x425c0a[_0x10d286(0x1fa)]){const _0x503c32=_0x425c0a[_0x10d286(0x1fa)][_0x10d286(0x2b3)];await _0x503c32['mv'](temppath+_0x503c32['name']),_0x4547fa[_0x10d286(0x2ab)]({'status':!![],'message':'File\x20uploaded'});const _0x23db52=getBotsWithMode();_0x23db52[_0x10d286(0x186)]>0x0?confirmRestore(temppath,_0x503c32[_0x10d286(0x1bf)]):unzipFile(temppath,_0x503c32[_0x10d286(0x1bf)]);}}else logger['full'](_0x10d286(0x2b8));}else logger[_0x10d286(0x1cb)](_0x10d286(0x22a));}),app[_0x5ec28a(0x31f)](express[_0x5ec28a(0x175)](path[_0x5ec28a(0x1a4)](__dirname,bbpath2,_0x5ec28a(0x1fe)))),app[_0x5ec28a(0x31f)](express[_0x5ec28a(0x175)](path['join'](__dirname,bbpath2,_0x5ec28a(0x26a)))),app['get']('/',function(_0x89feaa,_0x4d72cb){const _0x5814bc=_0x5ec28a;_0x4d72cb['sendFile'](path[_0x5814bc(0x1a4)](__dirname,bbpath2,_0x5814bc(0x1fe),'index.html'));}),app[_0x5ec28a(0x25a)](_0x5ec28a(0x22d),function(_0x22c8ff,_0x1e2175){const _0x4966a1=_0x5ec28a;_0x1e2175[_0x4966a1(0x2bf)](path[_0x4966a1(0x1a4)](__dirname,bbpath2,_0x4966a1(0x26a),_0x4966a1(0x238)));}),app[_0x5ec28a(0x25a)](_0x5ec28a(0x25b),(_0x35b582,_0x1db108)=>{const _0x4bfed8=_0x5ec28a;_0x1db108[_0x4bfed8(0x2bf)](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x5ec28a(0x25a)](_0x5ec28a(0x30c),(_0x4ff729,_0x2b41ab)=>{const _0x1d3250=_0x5ec28a;_0x2b41ab[_0x1d3250(0x2bf)](path[_0x1d3250(0x1a4)](__dirname,bbpath2,_0x1d3250(0x26a),_0x1d3250(0x238)));}),app[_0x5ec28a(0x25a)](_0x5ec28a(0x26e),(_0x538d71,_0x1996e2)=>{const _0x1869b4=_0x5ec28a;_0x1996e2[_0x1869b4(0x2bf)](path[_0x1869b4(0x1a4)](__dirname,bbpath2,_0x1869b4(0x26a),_0x1869b4(0x238)));}),app['get']('/:bot/history',(_0x1c6211,_0x5bf08f)=>{const _0xd23d48=_0x5ec28a;_0x5bf08f[_0xd23d48(0x2bf)](path[_0xd23d48(0x1a4)](__dirname,bbpath2,_0xd23d48(0x26a),_0xd23d48(0x238)));}),app['get'](_0x5ec28a(0x21b),(_0x1edd8a,_0x2ff8c5)=>{_0x2ff8c5['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x5ec28a(0x25a)]('/:bot/support',(_0x443035,_0x2960b5)=>{const _0x1ded45=_0x5ec28a;_0x2960b5[_0x1ded45(0x2bf)](path[_0x1ded45(0x1a4)](__dirname,bbpath2,_0x1ded45(0x26a),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x5ec28a(0x314)](PORT);const io=require(_0x5ec28a(0x29c))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x119f1c=_0x5ec28a;let _0x2bde9d=_0x119f1c(0x172);const _0xb25812=networkInterfaces(),_0x497db7={};for(const _0x2c322d of Object[_0x119f1c(0x299)](_0xb25812)){for(const _0x516788 of _0xb25812[_0x2c322d]){if((_0x516788['family']==_0x119f1c(0x2fa)||_0x516788[_0x119f1c(0x236)]==0x4)&&!_0x516788[_0x119f1c(0x17b)]){const _0x42d925=ipaddr[_0x119f1c(0x266)](_0x516788['address'])[_0x119f1c(0x1c5)]();_0x42d925!=_0x119f1c(0x26b)&&(!_0x497db7[_0x2c322d]&&(_0x497db7[_0x2c322d]=[]),_0x497db7[_0x2c322d][_0x119f1c(0x297)](_0x516788[_0x119f1c(0x29e)]),_0x2bde9d=_0x516788['address']);}}}return{'serverip':_0x2bde9d,'netinterfaces':_0x497db7};}async function startServer(){const _0x26aa5f=_0x5ec28a,{serverip:_0x155f53,netinterfaces:_0x3276e2}=getServerIP();logger[_0x26aa5f(0x1d1)](''),logger['simple'](_0x26aa5f(0x33a)),await logger[_0x26aa5f(0x1cb)](_0x26aa5f(0x20f)+serverversion+'#RES#\x20'+(environment==_0x26aa5f(0x305)?_0x26aa5f(0x287):'')+'\x0a'+(_0x26aa5f(0x1c2)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x26aa5f(0x28e)+_0x155f53+':'+PORT+_0x26aa5f(0x24a))),logger[_0x26aa5f(0x1d1)](_0x26aa5f(0x33a));if(config[_0x26aa5f(0x186)]!=0x0)for(const _0x334051 of config){const _0x28e982=_0x334051[_0x26aa5f(0x358)]=='auto'?'a':'m';if(_0x334051[_0x26aa5f(0x31e)]==_0x26aa5f(0x2a2)||_0x334051[_0x26aa5f(0x31e)]==_0x26aa5f(0x199))await logger['full']('Starting\x20('+_0x28e982+')\x20|\x20Bot\x20'+_0x334051[_0x26aa5f(0x1aa)]+'\x20|\x20'+_0x334051[_0x26aa5f(0x202)]),startBot([_0x334051[_0x26aa5f(0x1aa)],userID],{'cwd':bbpath},function(_0x232f50){const _0x11eb1e=_0x26aa5f;if(_0x232f50)logger[_0x11eb1e(0x1cb)](_0x232f50);});else(_0x334051[_0x26aa5f(0x31e)]==_0x26aa5f(0x193)||_0x334051[_0x26aa5f(0x31e)]==_0x26aa5f(0x315))&&await logger[_0x26aa5f(0x1cb)](_0x26aa5f(0x2b5)+_0x28e982+_0x26aa5f(0x2b2)+_0x334051[_0x26aa5f(0x1aa)]+_0x26aa5f(0x280)+_0x334051[_0x26aa5f(0x202)]);}else!newBot&&logger[_0x26aa5f(0x1d1)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x26aa5f(0x1d1)]('-----------------------------------------------------------------------------------'),logger[_0x26aa5f(0x1d1)](''),await logger[_0x26aa5f(0x2f4)]('Node.js\x20v'+nodeversion),await logger[_0x26aa5f(0x2f4)](_0x26aa5f(0x2e4),_0x3276e2);}function startSocket(){const _0x48d991=_0x5ec28a;io['on'](_0x48d991(0x1f1),_0x3826dd=>{const _0xf1fb88=_0x48d991;let _0x2b6b08,_0x46d775,_0x3ab691,_0x419c3e,_0x5e772d;const _0x51124f=_0x3826dd[_0xf1fb88(0x2cd)]['headers']['referer'];_0x46d775=_0x51124f[_0xf1fb88(0x252)](/bot[0-9]{3}/);if(_0x46d775)_0x3ab691=_0x46d775[0x0][_0xf1fb88(0x252)](/[0-9]{3}/);if(_0x3ab691)_0x2b6b08=_0x3ab691[0x0];else _0x2b6b08='botmanager';const _0x46eead=_0x3826dd[_0xf1fb88(0x2cd)][_0xf1fb88(0x235)][_0xf1fb88(0x177)];if(!_0x46eead)_0x3826dd[_0xf1fb88(0x1b2)]('status',{'publicKey':secure[_0xf1fb88(0x24d)]});else{_0x419c3e=timelyDecrypt(_0x46eead,![]);if(!_0x419c3e)_0x3826dd[_0xf1fb88(0x1b2)](_0xf1fb88(0x31e),{'publicKey':secure[_0xf1fb88(0x24d)]});else{_0x5e772d=normalizeIP(_0x3826dd[_0xf1fb88(0x2ba)][_0xf1fb88(0x347)])[_0xf1fb88(0x1ca)];if(!devices[_0x419c3e])devices[_0x419c3e]={'uuid':_0x419c3e,'access':{'token':null}};devices[_0x419c3e]['ip']=_0x5e772d;const _0x39723b=addClient(_0x3826dd['id'],_0x419c3e,_0x2b6b08);setAccess(_0x39723b),emitMessages(),_0x3826dd['on'](_0xf1fb88(0x27d),_0x248a6e=>{const _0x1fe9e7=_0xf1fb88,_0x16c80d=timelyDecrypt(_0x248a6e[_0x1fe9e7(0x195)]);if(_0x16c80d){_0x248a6e={'username':_0x248a6e[_0x1fe9e7(0x232)],'password':_0x16c80d},devices[_0x419c3e][_0x1fe9e7(0x279)]=validateCredentials(_0x248a6e,_0x419c3e);if(devices[_0x419c3e][_0x1fe9e7(0x279)]['allow']==![]&&devices[_0x419c3e][_0x1fe9e7(0x279)][_0x1fe9e7(0x1ee)]==_0x1fe9e7(0x2ec))_0x3826dd['emit'](_0x1fe9e7(0x31e),{'access':devices[_0x419c3e]['access']}),loginAccess2FA(_0x419c3e,_0x5e772d);else{if(devices[_0x419c3e]['access'][_0x1fe9e7(0x33f)]==![]&&devices[_0x419c3e][_0x1fe9e7(0x279)][_0x1fe9e7(0x1ee)]==_0x1fe9e7(0x243))_0x3826dd[_0x1fe9e7(0x1b2)](_0x1fe9e7(0x31e),{'access':devices[_0x419c3e][_0x1fe9e7(0x279)]});else devices[_0x419c3e][_0x1fe9e7(0x279)][_0x1fe9e7(0x33f)]&&devices[_0x419c3e][_0x1fe9e7(0x279)][_0x1fe9e7(0x1ee)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x419c3e)[_0x1fe9e7(0x16d)](_0x47544b=>{setAccess(_0x47544b);}),logger[_0x1fe9e7(0x2f4)](_0x1fe9e7(0x1ce)+_0x419c3e[_0x1fe9e7(0x2c7)](-0x8)),setTokenRefresh(_0x419c3e),setSessionTimeout(_0x1fe9e7(0x27d),_0x419c3e));}}else logger[_0x1fe9e7(0x1cb)](_0x1fe9e7(0x26f));}),_0x3826dd['on'](_0xf1fb88(0x363),()=>{resetPassword();}),_0x3826dd['on'](_0xf1fb88(0x328),_0x2af94c=>{removeClient(_0x3826dd['id']);}),_0x2b6b08==_0xf1fb88(0x2de)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3af265){const _0x348209=_0x5ec28a;if(_0x3af265!=_0x348209(0x2de)&&config[_0x348209(0x27e)]!=''){if(pid[_0x3af265])pid[_0x3af265]['send']({'function':_0x348209(0x29f),'args':null});}_0x3af265!='botmanager'&&broadcastToBots('bots',JSON[_0x348209(0x219)](config));}function reloadBotManager(){const _0x46996b=_0x5ec28a;getClientsWithBotID('botmanager')[_0x46996b(0x16d)](_0x4c4402=>{const _0x3f0efb=_0x46996b;getSocket(_0x4c4402['id'])['emit']('status',{'access':{'allow':![],'reason':_0x3f0efb(0x16a),'token':null}});});}function getSocket(_0x3eefaf){const _0x25bff1=_0x5ec28a;return io[_0x25bff1(0x2eb)]['sockets']['get'](_0x3eefaf);}function setAccess(_0x55eeaa){const _0x3af0a3=_0x5ec28a,_0x25cac6=getSocket(_0x55eeaa['id']),_0x16aa04=_0x55eeaa[_0x3af0a3(0x1cd)],_0x30ee0b=_0x55eeaa[_0x3af0a3(0x2d9)];devices[_0x16aa04]['access']=validateAccess(devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x1bb)],_0x16aa04),logger[_0x3af0a3(0x2f4)](_0x3af0a3(0x288)+devices[_0x16aa04]['access'][_0x3af0a3(0x1ee)]+_0x3af0a3(0x28c)+_0x55eeaa['id'][_0x3af0a3(0x2c7)](-0x8)+_0x3af0a3(0x1d5)+_0x16aa04[_0x3af0a3(0x2c7)](-0x8)),_0x25cac6[_0x3af0a3(0x1a4)](_0x16aa04);if(devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x33f)]){_0x25cac6['join'](_0x30ee0b);if(_0x30ee0b=='botmanager')initializeSocketBotManager(_0x25cac6);else initializeSocketBot(_0x25cac6);initClient(_0x30ee0b);}devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x1bb)]&&devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x1ee)]==_0x3af0a3(0x284)&&setSessionTimeout(_0x3af0a3(0x2ae),_0x16aa04),devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x1bb)]&&devices[_0x16aa04][_0x3af0a3(0x279)]['reason']==_0x3af0a3(0x189)&&setSessionTimeout(_0x3af0a3(0x27d),_0x16aa04),_0x25cac6['emit']('status',{'status':_0x55eeaa[_0x3af0a3(0x241)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x16aa04][_0x3af0a3(0x279)],'externalip':devices[_0x16aa04]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x3af0a3(0x1e3)],'validInstallation':validInstallation}),devices[_0x16aa04][_0x3af0a3(0x279)][_0x3af0a3(0x33f)]==![]&&devices[_0x16aa04]['access'][_0x3af0a3(0x1ee)]==_0x3af0a3(0x2d0)&&temporaryAccess2FA(_0x16aa04,devices[_0x16aa04]['ip']);}function setSessionTimeout(_0xf918d9,_0x2942e9){const _0x443e5f=_0x5ec28a;let _0x326e1c;if(_0xf918d9=='login')_0x326e1c=loginExpiry*0x3c*0x3e8;else _0x326e1c=devices[_0x2942e9][_0x443e5f(0x18d)][_0x443e5f(0x277)]*0x3c*0x3e8-(new Date()[_0x443e5f(0x24c)]()-devices[_0x2942e9][_0x443e5f(0x18d)][_0x443e5f(0x2e1)]);if(devices[_0x2942e9][_0x443e5f(0x1b3)])clearTimeout(devices[_0x2942e9][_0x443e5f(0x1b3)]);devices[_0x2942e9][_0x443e5f(0x1b3)]=setTimeout(()=>{const _0x24d6c2=_0x443e5f;if(devices[_0x2942e9][_0x24d6c2(0x22e)])clearTimeout(devices[_0x2942e9][_0x24d6c2(0x22e)]);removeSocketListeners(_0x2942e9),addBlacklist(_0x2942e9),devices[_0x2942e9][_0x24d6c2(0x18d)]=null,devices[_0x2942e9]['telegram2FaApproval']=null,devices[_0x2942e9][_0x24d6c2(0x279)][_0x24d6c2(0x1bb)]=null,logger[_0x24d6c2(0x2f4)](_0x24d6c2(0x2a0)+_0x2942e9['slice'](-0x8)),devices[_0x2942e9][_0x24d6c2(0x279)]=validateAccess(devices[_0x2942e9]['access'][_0x24d6c2(0x1bb)],_0x2942e9),!(devices[_0x2942e9][_0x24d6c2(0x279)][_0x24d6c2(0x33f)]&&devices[_0x2942e9]['access'][_0x24d6c2(0x1ee)]==_0x24d6c2(0x33e))&&(_0xf918d9=='login'?io['to'](_0x2942e9)[_0x24d6c2(0x1b2)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2942e9)[_0x24d6c2(0x1b2)]('status',{'access':{'allow':![],'reason':_0x24d6c2(0x1f4),'token':null}})),devices[_0x2942e9]['access'][_0x24d6c2(0x1bb)]=null;},_0x326e1c);}function setTokenRefresh(_0x454654){const _0x1a5246=_0x5ec28a;if(devices[_0x454654][_0x1a5246(0x22e)])clearTimeout(devices[_0x454654][_0x1a5246(0x22e)]);devices[_0x454654][_0x1a5246(0x22e)]=setTimeout(()=>{const _0x39e5bd=_0x1a5246;getClientsWithUuid(_0x454654)[_0x39e5bd(0x186)]!=0x0?(devices[_0x454654][_0x39e5bd(0x279)]=refreshToken(_0x454654),io['to'](_0x454654)[_0x39e5bd(0x1b2)](_0x39e5bd(0x31e),{'status':_0x39e5bd(0x1ef),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x454654]['access'],'externalip':devices[_0x454654]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x454654)):clearTimeout(devices[_0x454654][_0x39e5bd(0x22e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3d0d7d){const _0x1323ed=_0x5ec28a,_0x4377ca=getClient(_0x3d0d7d['id'])[_0x1323ed(0x1cd)];_0x3d0d7d[_0x1323ed(0x1b2)](_0x1323ed(0x1ba),config),_0x3d0d7d['emit'](_0x1323ed(0x22b),cleanSettings()),_0x3d0d7d['on']('add-bot',_0x59fd0c=>{const _0x3d7422=_0x1323ed;if(validateAccess(_0x59fd0c,_0x4377ca)[_0x3d7422(0x33f)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x3d0d7d['on'](_0x1323ed(0x319),(_0x54de48,_0x109229)=>{const _0x1f3f00=_0x1323ed;if(validateAccess(_0x109229,_0x4377ca)[_0x1f3f00(0x33f)])toggleBot(_0x54de48[_0x1f3f00(0x1aa)],_0x54de48['status'],_0x54de48['live']);else logger['full'](_0x1f3f00(0x17c));}),_0x3d0d7d['on'](_0x1323ed(0x359),(_0x1e6ca0,_0x46a4de)=>{const _0x5d4f71=_0x1323ed;if(validateAccess(_0x46a4de,_0x4377ca)[_0x5d4f71(0x33f)])toggleBotMode(_0x1e6ca0);else logger[_0x5d4f71(0x1cb)](_0x5d4f71(0x17c));}),_0x3d0d7d['on']('delete-bot',(_0x4ad265,_0x27a9a0)=>{const _0x3f87d0=_0x1323ed;if(validateAccess(_0x27a9a0,_0x4377ca)[_0x3f87d0(0x33f)])deleteBot(_0x4ad265);else logger[_0x3f87d0(0x1cb)](_0x3f87d0(0x183));}),_0x3d0d7d['on']('store-settings',(_0x176256,_0x4f6d77)=>{const _0x156538=_0x1323ed;if(validateAccess(_0x4f6d77,_0x4377ca)['allow'])storeSettings(_0x176256,!![]);else logger[_0x156538(0x1cb)](_0x156538(0x21a));}),_0x3d0d7d['on'](_0x1323ed(0x19d),_0x500285=>{const _0x53f0eb=_0x1323ed;if(validateAccess(_0x500285,_0x4377ca)[_0x53f0eb(0x33f)])updateBB(_0x53f0eb(0x312));else logger[_0x53f0eb(0x1cb)](_0x53f0eb(0x191));}),_0x3d0d7d['on'](_0x1323ed(0x2b9),_0x30f6dd=>{const _0x37d73e=_0x1323ed;if(validateAccess(_0x30f6dd,_0x4377ca)[_0x37d73e(0x33f)])updateBB(_0x37d73e(0x340));else logger[_0x37d73e(0x1cb)](_0x37d73e(0x22c));}),_0x3d0d7d['on'](_0x1323ed(0x30f),_0xeb6b92=>{const _0x1cef0b=_0x1323ed;if(validateAccess(_0xeb6b92,_0x4377ca)['allow']){const _0x52ac25=getClient(_0x3d0d7d['id']);if(_0x52ac25)getBackupFiles(_0x52ac25[_0x1cef0b(0x1cd)]);else logger[_0x1cef0b(0x1cb)](_0x1cef0b(0x353));}else logger[_0x1cef0b(0x1cb)](_0x1cef0b(0x1bd));}),_0x3d0d7d['on']('restore-backup-file',(_0x500e7d,_0x5b3f7d)=>{const _0x5e1a92=_0x1323ed;if(validateAccess(_0x5b3f7d,_0x4377ca)[_0x5e1a92(0x33f)])restoreBackupFile(_0x500e7d);else logger[_0x5e1a92(0x1cb)](_0x5e1a92(0x1de));}),_0x3d0d7d['on'](_0x1323ed(0x194),_0x2ca634=>{const _0x405709=_0x1323ed;if(validateAccess(_0x2ca634,_0x4377ca)[_0x405709(0x33f)])getMessages();else logger[_0x405709(0x1cb)](_0x405709(0x364));}),_0x3d0d7d['on'](_0x1323ed(0x1ea),(_0x43646e,_0x258ada)=>{const _0x134066=_0x1323ed;if(validateAccess(_0x258ada,_0x4377ca)['allow'])confirmMessage(_0x43646e);else logger[_0x134066(0x1cb)](_0x134066(0x2e8));}),_0x3d0d7d['on'](_0x1323ed(0x1a6),_0x5c4f10=>{const _0x56b311=_0x1323ed;if(validateAccess(_0x5c4f10,_0x4377ca)['allow']){if(devices[_0x4377ca][_0x56b311(0x22e)])clearTimeout(devices[_0x4377ca]['pidRefreshToken']);if(devices[_0x4377ca][_0x56b311(0x1b3)])clearTimeout(devices[_0x4377ca]['pidExpireLogin']);removeSocketListeners(getClient(_0x3d0d7d['id'])['uuid']),addBlacklist(_0x4377ca),devices[_0x4377ca][_0x56b311(0x18d)]=null,devices[_0x4377ca][_0x56b311(0x1b8)]=null,devices[_0x4377ca][_0x56b311(0x279)][_0x56b311(0x1bb)]=null,logger[_0x56b311(0x2f4)](_0x56b311(0x1b4)+_0x4377ca['slice'](-0x8)),io['to'](getClient(_0x3d0d7d['id'])[_0x56b311(0x1cd)])[_0x56b311(0x1b2)](_0x56b311(0x31e),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x56b311(0x1cb)](_0x56b311(0x2c6));});}function initializeSocketBot(_0xef6ab8){const _0x2b275d=_0x5ec28a,_0x489b5f=getClient(_0xef6ab8['id'])[_0x2b275d(0x2d9)],_0x25ac6e=getClient(_0xef6ab8['id'])[_0x2b275d(0x1cd)];_0xef6ab8['on'](_0x2b275d(0x329),(_0x1049cf,_0x4781f5)=>{const _0x5b52b8=_0x2b275d;if(validateAccess(_0x4781f5,_0x25ac6e)[_0x5b52b8(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f][_0x5b52b8(0x2ab)]({'function':_0x5b52b8(0x269),'args':_0x1049cf});}else logger[_0x5b52b8(0x1cb)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0xef6ab8['on'](_0x2b275d(0x17e),(_0x4ee7a2,_0x1f5fe9)=>{const _0x303901=_0x2b275d;if(validateAccess(_0x1f5fe9,_0x25ac6e)[_0x303901(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f]['send']({'function':_0x303901(0x27b),'args':_0x4ee7a2});}else logger[_0x303901(0x1cb)](_0x303901(0x1bc));}),_0xef6ab8['on']('get-portfolio',(_0x4c50c6,_0x10c7d5)=>{const _0x49e4c5=_0x2b275d;if(validateAccess(_0x10c7d5,_0x25ac6e)[_0x49e4c5(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f][_0x49e4c5(0x2ab)]({'function':_0x49e4c5(0x2f9),'args':_0x4c50c6});}else logger[_0x49e4c5(0x1cb)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0xef6ab8['on'](_0x2b275d(0x325),(_0x2fa652,_0x2e1fef)=>{const _0x456216=_0x2b275d;if(validateAccess(_0x2e1fef,_0x25ac6e)['allow']){if(pid[_0x489b5f])pid[_0x489b5f][_0x456216(0x2ab)]({'function':_0x456216(0x348),'args':_0x2fa652});}else logger[_0x456216(0x1cb)](_0x456216(0x19a));}),_0xef6ab8['on'](_0x2b275d(0x192),(_0x5e52f1,_0x1287f2)=>{const _0x3374ab=_0x2b275d;if(validateAccess(_0x1287f2,_0x25ac6e)['allow']){if(pid[_0x489b5f])pid[_0x489b5f][_0x3374ab(0x2ab)]({'function':_0x3374ab(0x31c),'args':_0x5e52f1});}else logger[_0x3374ab(0x1cb)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0xef6ab8['on'](_0x2b275d(0x35e),(_0x53e3d9,_0x47d117)=>{const _0x4ce179=_0x2b275d;if(validateAccess(_0x47d117,_0x25ac6e)[_0x4ce179(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f][_0x4ce179(0x2ab)]({'function':'storeFiat','args':_0x53e3d9});}else logger['full'](_0x4ce179(0x16b));}),_0xef6ab8['on'](_0x2b275d(0x17d),_0x1f2bab=>{const _0x2bc0c0=_0x2b275d;if(validateAccess(_0x1f2bab,_0x25ac6e)[_0x2bc0c0(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f][_0x2bc0c0(0x2ab)]({'function':'resetHistory','args':null});}else logger[_0x2bc0c0(0x1cb)](_0x2bc0c0(0x221));}),_0xef6ab8['on'](_0x2b275d(0x216),_0xa8d42b=>{const _0x467b2b=_0x2b275d;if(validateAccess(_0xa8d42b,_0x25ac6e)['allow']){if(pid[_0x489b5f])pid[_0x489b5f][_0x467b2b(0x2ab)]({'function':_0x467b2b(0x355),'args':null});}else logger[_0x467b2b(0x1cb)](_0x467b2b(0x295));}),_0xef6ab8['on'](_0x2b275d(0x2a4),(_0x551196,_0x97dc89)=>{const _0x4643aa=_0x2b275d;if(validateAccess(_0x97dc89,_0x25ac6e)['allow']){if(pid[_0x489b5f])pid[_0x489b5f]['send']({'function':'placeOrder','args':_0x551196});}else logger[_0x4643aa(0x1cb)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0xef6ab8['on'](_0x2b275d(0x367),_0x1eb7db=>{const _0xb55b5c=_0x2b275d;if(validateAccess(_0x1eb7db,_0x25ac6e)[_0xb55b5c(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f]['send']({'function':_0xb55b5c(0x1d3),'args':null});}else logger[_0xb55b5c(0x1cb)](_0xb55b5c(0x240));}),_0xef6ab8['on']('show-config',_0x532bbc=>{const _0x2e4fd7=_0x2b275d;if(validateAccess(_0x532bbc,_0x25ac6e)[_0x2e4fd7(0x33f)]){if(pid[_0x489b5f])pid[_0x489b5f][_0x2e4fd7(0x2ab)]({'function':'showConfig','args':null});}else logger[_0x2e4fd7(0x1cb)](_0x2e4fd7(0x256));}),_0xef6ab8['on'](_0x2b275d(0x19d),_0x3aea3c=>{const _0x17eea5=_0x2b275d;if(validateAccess(_0x3aea3c,_0x25ac6e)[_0x17eea5(0x33f)])updateBB(_0x17eea5(0x312));else logger[_0x17eea5(0x1cb)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0xef6ab8['on'](_0x2b275d(0x194),_0x58d076=>{const _0x5e4e86=_0x2b275d;if(validateAccess(_0x58d076,_0x25ac6e)[_0x5e4e86(0x33f)])getMessages();else logger[_0x5e4e86(0x1cb)](_0x5e4e86(0x364));}),_0xef6ab8['on']('confirm-message',(_0x451c90,_0xd6ba17)=>{const _0x1a271c=_0x2b275d;if(validateAccess(_0xd6ba17,_0x25ac6e)[_0x1a271c(0x33f)])confirmMessage(_0x451c90);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0xef6ab8['on']('logout',_0x462c61=>{const _0xd72289=_0x2b275d;if(validateAccess(_0x462c61,_0x25ac6e)['allow']){if(devices[_0x25ac6e][_0xd72289(0x22e)])clearTimeout(devices[_0x25ac6e][_0xd72289(0x22e)]);if(devices[_0x25ac6e]['pidExpireLogin'])clearTimeout(devices[_0x25ac6e][_0xd72289(0x1b3)]);removeSocketListeners(getClient(_0xef6ab8['id'])[_0xd72289(0x1cd)]),addBlacklist(_0x25ac6e),devices[_0x25ac6e][_0xd72289(0x18d)]=null,devices[_0x25ac6e]['telegram2FaApproval']=null,devices[_0x25ac6e][_0xd72289(0x279)][_0xd72289(0x1bb)]=null,logger[_0xd72289(0x2f4)](_0xd72289(0x1b4)+_0x25ac6e[_0xd72289(0x2c7)](-0x8)),io['to'](getClient(_0xef6ab8['id'])[_0xd72289(0x1cd)])[_0xd72289(0x1b2)](_0xd72289(0x31e),{'access':{'allow':![],'reason':_0xd72289(0x2ce),'token':null}});}else logger['full'](_0xd72289(0x2c6));});}function removeSocketListeners(_0x384b6f){const _0x2fb792=_0x5ec28a;getClientsWithUuid(_0x384b6f)[_0x2fb792(0x16d)](_0x236836=>{getSocket(_0x236836['id'])['removeAllListeners']();});}function cleanSettings(){const _0x3fd37d=_0x5ec28a;let _0x218edd=settings;return settings[_0x3fd37d(0x357)]&&settings[_0x3fd37d(0x357)]!=''&&(_0x218edd={..._0x218edd,'telegramToken':'************'}),settings[_0x3fd37d(0x32a)]&&settings[_0x3fd37d(0x32a)]!=''&&(_0x218edd={..._0x218edd,'bbPassword':_0x3fd37d(0x322)}),(settings[_0x3fd37d(0x32a)]&&settings[_0x3fd37d(0x32a)]=='***'||settings[_0x3fd37d(0x357)]&&settings[_0x3fd37d(0x357)]==_0x3fd37d(0x2db))&&(_0x218edd={..._0x218edd,'restored':{'password':settings[_0x3fd37d(0x32a)]=='***','telegram':settings[_0x3fd37d(0x357)]==_0x3fd37d(0x2db)}}),_0x218edd;}async function updateBB(_0xcd5008){const _0x7cd7f6=_0x5ec28a;await backupConfigFiles(),installingUpdate=!![],config[_0x7cd7f6(0x16d)](_0x13d7a1=>{restartBot(_0x13d7a1['botID']);});if(_0xcd5008=='update')process[_0x7cd7f6(0x2ab)]({'update':!![],'environment':environment},_0x46fb68=>{});else _0xcd5008=='reinstall'&&process['send']({'reinstall':!![],'environment':environment},_0x19056b=>{});}function startBot(_0x23b955,_0x4b90dc,_0x5bc8d3){const _0x57c007=_0x5ec28a;if(debugging)_0x23b955['push']('-d');let _0x172c87=![];const _0x1700b4=_0x23b955[0x0];_0x4b90dc={..._0x4b90dc,'stdio':[_0x57c007(0x28d),_0x57c007(0x28d),'inherit',_0x57c007(0x2e3)]},pid[_0x1700b4]=childProcess[_0x57c007(0x217)](botfile,_0x23b955,_0x4b90dc),pid[_0x1700b4]['on'](_0x57c007(0x201),_0xee1a91=>{const _0x24552c=_0x57c007;switch(Object['keys'](_0xee1a91)[0x0]){case _0x24552c(0x202):updateBotName(_0x1700b4,_0xee1a91[_0x24552c(0x202)]);break;case _0x24552c(0x237):updateBotManager();break;case _0x24552c(0x31e):updateStatus(_0x1700b4,_0xee1a91[_0x24552c(0x31e)]);break;case _0x24552c(0x1f3):updateLive(_0x1700b4,_0xee1a91['live']);break;case _0x24552c(0x2ca):updateLive(_0x1700b4,_0xee1a91[_0x24552c(0x2ca)]),io['to'](_0x1700b4)[_0x24552c(0x1b2)](_0x24552c(0x31e),{'access':{'allow':![],'reason':_0x24552c(0x16a),'token':null}});break;case _0x24552c(0x2f0):_0xee1a91[_0x24552c(0x2f0)]==_0x24552c(0x1a8)&&restartBot(_0x1700b4);_0xee1a91[_0x24552c(0x2f0)]==_0x24552c(0x298)&&toggleBot(_0x1700b4,'disabled',_0x24552c(0x302));break;case _0x24552c(0x335):sendTelegramBot(_0x1700b4,_0xee1a91['telegram']);break;case _0x24552c(0x34e):sendTelegramMsg(_0xee1a91['telegrammsg']);break;case _0x24552c(0x1a0):io['to'](_0x1700b4)['emit'](_0xee1a91[_0x24552c(0x1a0)],_0xee1a91[_0x24552c(0x2cf)]);break;}}),pid[_0x1700b4]['on'](_0x57c007(0x2bd),function(_0x1350d6){if(_0x172c87)return;_0x172c87=!![],_0x5bc8d3(_0x1350d6);}),pid[_0x1700b4]['on']('exit',async function(_0x5902d5){const _0x548e4b=_0x57c007;if(installingUpdate){logger[_0x548e4b(0x2f4)](_0x548e4b(0x259)),io[_0x548e4b(0x2d7)]();return;}if(_0x172c87)return;_0x172c87=!![],_0x5bc8d3(null);const _0x35f375=dbConfig[_0x548e4b(0x25a)](_0x548e4b(0x1ba))['find']({'botID':_0x1700b4})['value']();_0x35f375&&(_0x35f375['status']=='enabled'||_0x35f375['status']==_0x548e4b(0x199))&&(await sleep(0x3e8),updateLive(_0x1700b4,_0x548e4b(0x302)),logger[_0x548e4b(0x1cb)](_0x548e4b(0x29d)+_0x1700b4),startBot([_0x1700b4,userID],{'cwd':bbpath},function(_0x3f9044){const _0x52737f=_0x548e4b;if(_0x3f9044)logger[_0x52737f(0x1cb)](_0x3f9044);}));});}function stopBot(_0x16f532){const _0x13e46c=_0x5ec28a;getClientsWithBotID(_0x16f532)[_0x13e46c(0x16d)](_0x3b485a=>{const _0x4dc759=_0x13e46c;getSocket(_0x3b485a['id'])[_0x4dc759(0x328)](!![]),removeClient(_0x3b485a['id']);}),pid[_0x16f532]&&(pid[_0x16f532][_0x13e46c(0x298)](),pid[_0x16f532]=null);}function restartBot(_0x5eecef){const _0x54eda8=_0x5ec28a;if(pid[_0x5eecef])pid[_0x5eecef][_0x54eda8(0x298)]();}function addBot(){const _0x34aae0=_0x5ec28a;let _0x2abb0c;for(let _0x54e576=0x1;_0x54e576<0x3e9;_0x54e576++){_0x2abb0c=_0x54e576[_0x34aae0(0x197)]()[_0x34aae0(0x1fb)](0x3,'0');let _0x251f38=config[_0x34aae0(0x248)](_0x42e473=>_0x42e473[_0x34aae0(0x1aa)]==_0x2abb0c);if(!_0x251f38)break;}if(_0x2abb0c===_0x34aae0(0x2b7)){logger[_0x34aae0(0x1cb)](_0x34aae0(0x31d));return;}logger[_0x34aae0(0x1cb)](_0x34aae0(0x344)+_0x2abb0c),dbConfig[_0x34aae0(0x25a)](_0x34aae0(0x1ba))[_0x34aae0(0x297)]({'botID':_0x2abb0c,'botname':_0x34aae0(0x230)+_0x2abb0c,'status':'new','live':''})[_0x34aae0(0x1ec)](),startBot([_0x2abb0c,userID],{'cwd':bbpath},function(_0x3d1c33){const _0x522283=_0x34aae0;if(_0x3d1c33)logger[_0x522283(0x1cb)](_0x3d1c33);}),config=getConfiguration(),io['to']('botmanager')[_0x34aae0(0x1b2)](_0x34aae0(0x1ba),config),broadcastToBots(_0x34aae0(0x1ba),JSON[_0x34aae0(0x219)](config));}function deleteBot(_0x398ef4){const _0x1430d8=_0x5ec28a;getClientsWithBotID(_0x398ef4)['forEach'](_0x29d86c=>{const _0x1ab963=_0x9a8b;getSocket(_0x29d86c['id'])[_0x1ab963(0x328)](!![]),removeClient(_0x29d86c['id']);}),dbConfig[_0x1430d8(0x25a)](_0x1430d8(0x1ba))[_0x1430d8(0x234)]({'botID':_0x398ef4})['write'](),logger[_0x1430d8(0x1cb)]('Deleted\x20Bot\x20'+_0x398ef4),stopBot(_0x398ef4);try{if(fs[_0x1430d8(0x1d9)](path['join'](configpath,_0x1430d8(0x32f)+_0x398ef4+_0x1430d8(0x32e))))fs[_0x1430d8(0x2c2)](path[_0x1430d8(0x1a4)](configpath,'bot-'+_0x398ef4+_0x1430d8(0x32e)));if(fs[_0x1430d8(0x1d9)](path[_0x1430d8(0x1a4)](configpath,_0x1430d8(0x32f)+_0x398ef4+_0x1430d8(0x1b7))))fs[_0x1430d8(0x2c2)](path[_0x1430d8(0x1a4)](configpath,'bot-'+_0x398ef4+_0x1430d8(0x1b7)));if(fs['existsSync'](path[_0x1430d8(0x1a4)](configpath,_0x1430d8(0x32f)+_0x398ef4+'-performance.json')))fs['unlinkSync'](path[_0x1430d8(0x1a4)](configpath,'bot-'+_0x398ef4+_0x1430d8(0x296)));if(fs[_0x1430d8(0x1d9)](path['join'](configpath,_0x1430d8(0x32f)+_0x398ef4+_0x1430d8(0x18f))))fs[_0x1430d8(0x2c2)](path[_0x1430d8(0x1a4)](configpath,_0x1430d8(0x32f)+_0x398ef4+_0x1430d8(0x18f)));}catch(_0x1099db){if(_0x1099db)logger['full'](_0x1430d8(0x215),_0x1099db);}config=getConfiguration(),io['to']('botmanager')[_0x1430d8(0x1b2)]('bots',config),broadcastToBots(_0x1430d8(0x1ba),JSON[_0x1430d8(0x219)](config));}function toggleBot(_0x4d11fb,_0x7faa35,_0x4f1b10){const _0x22d797=_0x5ec28a;dbConfig[_0x22d797(0x25a)](_0x22d797(0x1ba))[_0x22d797(0x248)]({'botID':_0x4d11fb})['assign']({'status':_0x7faa35})['assign']({'live':_0x4f1b10})[_0x22d797(0x1ec)]();if(_0x7faa35==_0x22d797(0x2a2)||_0x7faa35==_0x22d797(0x199))logger['full'](_0x22d797(0x209)+_0x4d11fb),startBot([_0x4d11fb,userID],{'cwd':bbpath},function(_0x301b62){if(_0x301b62)logger['full'](_0x301b62);});else(_0x7faa35==_0x22d797(0x193)||_0x7faa35==_0x22d797(0x315))&&(logger[_0x22d797(0x1cb)](_0x22d797(0x19f)+_0x4d11fb),stopBot(_0x4d11fb));config=getConfiguration(),io['to'](_0x22d797(0x2de))[_0x22d797(0x1b2)](_0x22d797(0x1ba),config),broadcastToBots(_0x22d797(0x1ba),JSON[_0x22d797(0x219)](config));}function toggleStatus(_0x1c7fd9){const _0x44cf56=_0x5ec28a;let _0x1340b9=dbConfig[_0x44cf56(0x25a)](_0x44cf56(0x1ba))[_0x44cf56(0x248)]({'botID':_0x1c7fd9})[_0x44cf56(0x1d0)](),_0x550d63;if(_0x1340b9[_0x44cf56(0x31e)]===_0x44cf56(0x2a2))_0x550d63='disabled';else{if(_0x1340b9[_0x44cf56(0x31e)]===_0x44cf56(0x199))_0x550d63='new-disabled';else{if(_0x1340b9[_0x44cf56(0x31e)]===_0x44cf56(0x315))_0x550d63='new';else{if(_0x1340b9[_0x44cf56(0x31e)]===_0x44cf56(0x193))_0x550d63=_0x44cf56(0x2a2);}}}return _0x550d63;}function updateStatus(_0x3ccbdf,_0x35154c){const _0x212bba=_0x5ec28a;dbConfig[_0x212bba(0x25a)](_0x212bba(0x1ba))[_0x212bba(0x248)]({'botID':_0x3ccbdf})[_0x212bba(0x1c8)]({'status':_0x35154c})[_0x212bba(0x1ec)](),config=getConfiguration(),io['to'](_0x212bba(0x2de))['emit'](_0x212bba(0x1ba),config),broadcastToBots(_0x212bba(0x1ba),JSON[_0x212bba(0x219)](config));}function updateLive(_0x4fa63c,_0x293a41){const _0x9b72b6=_0x5ec28a;dbConfig['get']('bots')[_0x9b72b6(0x248)]({'botID':_0x4fa63c})[_0x9b72b6(0x1c8)]({'live':_0x293a41})[_0x9b72b6(0x1ec)](),config=getConfiguration(),io['to'](_0x9b72b6(0x2de))[_0x9b72b6(0x1b2)](_0x9b72b6(0x1ba),config),broadcastToBots(_0x9b72b6(0x1ba),JSON[_0x9b72b6(0x219)](config));}function updateBotName(_0x1a6752,_0x5261fa){const _0x478dd9=_0x5ec28a;dbConfig['get']('bots')[_0x478dd9(0x248)]({'botID':_0x1a6752})[_0x478dd9(0x1c8)]({'botname':_0x5261fa})[_0x478dd9(0x1ec)](),config=getConfiguration(),io['to']('botmanager')[_0x478dd9(0x1b2)](_0x478dd9(0x1ba),config),broadcastToBots(_0x478dd9(0x1ba),JSON[_0x478dd9(0x219)](config));}function updateBotManager(){const _0x4adf12=_0x5ec28a;config=getConfiguration(),io['to'](_0x4adf12(0x2de))[_0x4adf12(0x1b2)](_0x4adf12(0x1ba),config),broadcastToBots(_0x4adf12(0x1ba),JSON[_0x4adf12(0x219)](config));}function toggleBotMode(_0x3a9631){const _0x213ae1=_0x5ec28a;if(pid[_0x3a9631])pid[_0x3a9631][_0x213ae1(0x2ab)]({'function':_0x213ae1(0x273),'args':null});else{const _0x261427=configpath+_0x213ae1(0x32f)+_0x3a9631+'-config.json',_0x1aca57=fs['readFileSync'](_0x261427),_0x246cf7=JSON[_0x213ae1(0x266)](_0x1aca57),_0x1850d0=_0x246cf7[_0x213ae1(0x2d9)][0x0][_0x213ae1(0x210)];_0x246cf7[_0x213ae1(0x2d9)][0x0][_0x213ae1(0x210)]=!_0x1850d0;const _0x24498b=JSON['stringify'](_0x246cf7,null,0x2);fs['writeFileSync'](_0x261427,_0x24498b),config=getConfiguration(),io['to'](_0x213ae1(0x2de))[_0x213ae1(0x1b2)]('bots',config),broadcastToBots('bots',JSON[_0x213ae1(0x219)](config));}}function validateTelegram(_0xd18ce3){const _0x3f09be=_0x5ec28a;if(_0xd18ce3[_0x3f09be(0x2f3)][_0x3f09be(0x232)]!=settings['telegramUsername']&&'@'+_0xd18ce3[_0x3f09be(0x2f3)]['username']!=settings[_0x3f09be(0x205)]||_0xd18ce3[_0x3f09be(0x211)]['id']!=settings[_0x3f09be(0x1c0)])return sendTelegram(_0xd18ce3['chat']['id'],_0x3f09be(0x2d4),{'parse_mode':_0x3f09be(0x227)}),![];return!![];}async function initTelegram(){const _0x363cf8=_0x5ec28a;if(tgBot)tgBot[_0x363cf8(0x2f0)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x363cf8(0x357)]);let _0x1fb16b=_0x363cf8(0x332);_0x1fb16b+='\x0a',_0x1fb16b+='/enable\x20-\x20enable\x20notifications\x0a',_0x1fb16b+=_0x363cf8(0x264),_0x1fb16b+=_0x363cf8(0x2f2),_0x1fb16b+=_0x363cf8(0x239),_0x1fb16b+='/on\x20-\x20start\x20bot(s)\x0a',_0x1fb16b+=_0x363cf8(0x174),_0x1fb16b+=_0x363cf8(0x343),_0x1fb16b+=_0x363cf8(0x2ef),_0x1fb16b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x1fb16b+=_0x363cf8(0x2dc),_0x1fb16b+=_0x363cf8(0x171),_0x1fb16b+=_0x363cf8(0x226),_0x1fb16b+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x1fb16b+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x5b2e8e='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5b2e8e+='\x0a',_0x5b2e8e+=_0x1fb16b,tgBot[_0x363cf8(0x17a)]((_0x157c12,_0x538866)=>{const _0x19b6a3=_0x363cf8;logger[_0x19b6a3(0x1d1)](getTimeStamp()+_0x19b6a3(0x206)),logger[_0x19b6a3(0x2f4)](_0x19b6a3(0x212),_0x157c12);}),tgBot[_0x363cf8(0x31f)](async(_0x5b8193,_0x3f47cc)=>{const _0x48feae=_0x363cf8;if(!(!settings['telegramChatId']&&_0x5b8193['update'][_0x48feae(0x201)][_0x48feae(0x1dd)]==_0x48feae(0x2e2))){if(!validateTelegram(_0x5b8193))return;}_0x3f47cc();}),tgBot[_0x363cf8(0x176)]('start',async _0x5031e4=>{const _0xed5ac9=_0x363cf8;if(!settings[_0xed5ac9(0x1c0)])updateSetting(_0xed5ac9(0x1c0),_0x5031e4[_0xed5ac9(0x211)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x5031e4))return;await sendTelegram(_0x5031e4[_0xed5ac9(0x211)]['id'],_0x5b2e8e);}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x2f6),async _0x5254bd=>{const _0x2dbf70=_0x363cf8;updateSetting(_0x2dbf70(0x1a7),!![]),await sendTelegram(_0x5254bd[_0x2dbf70(0x211)]['id'],_0x2dbf70(0x20a));}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x2c0),async _0x3b5507=>{const _0x310048=_0x363cf8;await sendTelegram(_0x3b5507[_0x310048(0x211)]['id'],'Notifications\x20disabled'),updateSetting(_0x310048(0x1a7),![]);}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x1a1),async _0x4eef74=>{const _0x1e7fd0=_0x363cf8,_0x1e18a9=Markup[_0x1e7fd0(0x2f5)]([Markup['button'][_0x1e7fd0(0x265)](_0x1e7fd0(0x1ad),_0x1e7fd0(0x2d3)),Markup[_0x1e7fd0(0x271)]['callback'](_0x1e7fd0(0x35f),_0x1e7fd0(0x261)),Markup[_0x1e7fd0(0x271)][_0x1e7fd0(0x265)](_0x1e7fd0(0x184),_0x1e7fd0(0x16f))]);_0x4eef74[_0x1e7fd0(0x268)](_0x1e7fd0(0x267),_0x1e18a9);}),tgBot[_0x363cf8(0x262)]('config_orders',async _0x4c7605=>{const _0x2ba765=_0x363cf8;_0x4c7605[_0x2ba765(0x323)](),updateSetting(_0x2ba765(0x2ff),_0x2ba765(0x2e5)),updateSetting(_0x2ba765(0x1a7),!![]),await sendTelegram(_0x4c7605[_0x2ba765(0x211)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x363cf8(0x262)]('config_alerts',async _0x4cb2e2=>{const _0x3a8879=_0x363cf8;_0x4cb2e2[_0x3a8879(0x323)](),updateSetting(_0x3a8879(0x2ff),'alerts'),updateSetting(_0x3a8879(0x1a7),!![]),await sendTelegram(_0x4cb2e2[_0x3a8879(0x211)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x363cf8(0x262)](_0x363cf8(0x16f),async _0x5f2973=>{const _0x122232=_0x363cf8;_0x5f2973[_0x122232(0x323)](),updateSetting('telegramEvents',_0x122232(0x2e0)),updateSetting(_0x122232(0x1a7),!![]),await sendTelegram(_0x5f2973['chat']['id'],_0x122232(0x23e));}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x31e),async _0x2e8e48=>{const _0x10eae7=_0x363cf8,_0x3eb0bc=getBotsWithMode();let _0x338e75=_0x10eae7(0x310);config[_0x10eae7(0x16d)](_0x3fce1d=>{const _0x5137ff=_0x10eae7,_0x4f95b2=_0x3eb0bc[_0x5137ff(0x248)](_0xcad948=>_0xcad948[_0x5137ff(0x1aa)]==_0x3fce1d[_0x5137ff(0x1aa)])['mode'];_0x338e75+='Bot\x20'+_0x3fce1d[_0x5137ff(0x1aa)]+':\x20'+_0x3fce1d['status']+_0x5137ff(0x280)+_0x4f95b2+'\x20|\x20'+_0x3fce1d[_0x5137ff(0x1f3)]+'\x0a';}),_0x338e75+='\x0a',_0x338e75+=_0x10eae7(0x1cc),_0x338e75+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x10eae7(0x2ad),_0x338e75+=settings[_0x10eae7(0x1a7)]?settings[_0x10eae7(0x2ff)]==_0x10eae7(0x2e0)?_0x10eae7(0x18e):'Notifications\x20types:\x20'+settings[_0x10eae7(0x2ff)]+_0x10eae7(0x242):'',await sendTelegram(_0x2e8e48[_0x10eae7(0x211)]['id'],_0x338e75,{'parse_mode':_0x10eae7(0x227)});}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x1a8),async _0x2fa586=>{const _0x2be395=_0x363cf8,_0x3d7f85=getEnabledBots();if(_0x3d7f85[_0x2be395(0x186)]==0x0)await sendTelegram(_0x2fa586[_0x2be395(0x211)]['id'],_0x2be395(0x23f));else{if(_0x3d7f85['length']>0x1)_0x3d7f85[_0x2be395(0x297)]({'botID':_0x2be395(0x2e0)});let _0x48ce17=[],_0x334e14=[];const _0x393268=_0x3d7f85['length']%0x4==0x0||_0x3d7f85[_0x2be395(0x186)]%0x4==0x3||_0x3d7f85[_0x2be395(0x186)]%0x3==0x1?0x4:0x3;let _0x1f3a60=0x0;_0x3d7f85[_0x2be395(0x16d)]((_0x78c81b,_0x3227a9)=>{const _0x1a3f40=_0x2be395;if(_0x3227a9%_0x393268==0x0)_0x334e14=[];_0x334e14['push'](Markup[_0x1a3f40(0x271)]['callback'](_0x78c81b[_0x1a3f40(0x1aa)]==_0x1a3f40(0x2e0)?_0x1a3f40(0x25f):_0x1a3f40(0x230)+_0x78c81b[_0x1a3f40(0x1aa)],_0x1a3f40(0x2ee)+_0x78c81b[_0x1a3f40(0x1aa)])),_0x3227a9%_0x393268==0x0&&(_0x48ce17[_0x1f3a60]=_0x334e14,_0x1f3a60++);});const _0x126e82=Markup[_0x2be395(0x2f5)](_0x48ce17);_0x2fa586['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x126e82);}}),tgBot[_0x363cf8(0x262)](/restart_(.+)/,async _0x4116f9=>{const _0x145ef9=_0x363cf8,_0x25750e=_0x4116f9[_0x145ef9(0x252)][0x1];_0x4116f9[_0x145ef9(0x323)](),_0x25750e==_0x145ef9(0x2e0)?config['forEach'](_0x7cc12=>{restartBot(_0x7cc12['botID']);}):restartBot(_0x25750e);}),tgBot[_0x363cf8(0x176)]('on',async _0x4f2412=>{const _0x538a5e=_0x363cf8,_0x13de08=getDisabledBots();if(_0x13de08[_0x538a5e(0x186)]==0x0)await sendTelegram(_0x4f2412[_0x538a5e(0x211)]['id'],_0x538a5e(0x1f5));else{if(_0x13de08['length']>0x1)_0x13de08['push']({'botID':_0x538a5e(0x2e0)});let _0x2d3a3b=[],_0x19fff9=[];const _0x344a70=_0x13de08[_0x538a5e(0x186)]%0x4==0x0||_0x13de08[_0x538a5e(0x186)]%0x4==0x3||_0x13de08[_0x538a5e(0x186)]%0x3==0x1?0x4:0x3;let _0x6ca882=0x0;_0x13de08['forEach']((_0x41450f,_0x5a3457)=>{const _0x14f43e=_0x538a5e;if(_0x5a3457%_0x344a70==0x0)_0x19fff9=[];_0x19fff9[_0x14f43e(0x297)](Markup[_0x14f43e(0x271)][_0x14f43e(0x265)](_0x41450f[_0x14f43e(0x1aa)]==_0x14f43e(0x2e0)?_0x14f43e(0x25f):'Bot\x20'+_0x41450f[_0x14f43e(0x1aa)],'on_'+_0x41450f[_0x14f43e(0x1aa)])),_0x5a3457%_0x344a70==0x0&&(_0x2d3a3b[_0x6ca882]=_0x19fff9,_0x6ca882++);});const _0xbd1c29=Markup[_0x538a5e(0x2f5)](_0x2d3a3b);_0x4f2412[_0x538a5e(0x268)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0xbd1c29);}}),tgBot['action'](/on_(.+)/,async _0x242d4d=>{const _0x31218b=_0x363cf8,_0x32cf76=_0x242d4d[_0x31218b(0x252)][0x1];_0x242d4d['editMessageReplyMarkup']();if(_0x32cf76==_0x31218b(0x2e0)){const _0x408f21=getDisabledBots();await sendTelegram(_0x242d4d[_0x31218b(0x211)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x408f21[_0x31218b(0x16d)](_0x45b6ca=>{const _0x467ce8=_0x31218b;if(_0x45b6ca['botID']!=_0x467ce8(0x2e0))toggleBot(_0x45b6ca[_0x467ce8(0x1aa)],toggleStatus(_0x45b6ca['botID']),_0x467ce8(0x302));});}else await sendTelegram(_0x242d4d[_0x31218b(0x211)]['id'],_0x31218b(0x200)+_0x32cf76),toggleBot(_0x32cf76,toggleStatus(_0x32cf76),_0x31218b(0x302));}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x27c),async _0x2fc5f2=>{const _0x4e5f94=_0x363cf8,_0x2face3=getEnabledBots();if(_0x2face3['length']==0x0)await sendTelegram(_0x2fc5f2[_0x4e5f94(0x211)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2face3['length']>0x1)_0x2face3[_0x4e5f94(0x297)]({'botID':_0x4e5f94(0x2e0)});let _0x3adfba=[],_0x21aae9=[];const _0x306eb6=_0x2face3['length']%0x4==0x0||_0x2face3[_0x4e5f94(0x186)]%0x4==0x3||_0x2face3['length']%0x3==0x1?0x4:0x3;let _0x967e96=0x0;_0x2face3['forEach']((_0xc88956,_0x375ffc)=>{const _0x54126f=_0x4e5f94;if(_0x375ffc%_0x306eb6==0x0)_0x21aae9=[];_0x21aae9[_0x54126f(0x297)](Markup[_0x54126f(0x271)][_0x54126f(0x265)](_0xc88956['botID']==_0x54126f(0x2e0)?_0x54126f(0x25f):_0x54126f(0x230)+_0xc88956[_0x54126f(0x1aa)],_0x54126f(0x313)+_0xc88956[_0x54126f(0x1aa)])),_0x375ffc%_0x306eb6==0x0&&(_0x3adfba[_0x967e96]=_0x21aae9,_0x967e96++);});const _0x7a37e2=Markup[_0x4e5f94(0x2f5)](_0x3adfba);_0x2fc5f2[_0x4e5f94(0x268)](_0x4e5f94(0x2be),_0x7a37e2);}}),tgBot[_0x363cf8(0x262)](/off_(.+)/,async _0x31d079=>{const _0x46d971=_0x363cf8,_0x413461=_0x31d079[_0x46d971(0x252)][0x1];_0x31d079['editMessageReplyMarkup']();if(_0x413461=='all'){const _0x3d4e6b=getEnabledBots();await sendTelegram(_0x31d079[_0x46d971(0x211)]['id'],_0x46d971(0x245)),_0x3d4e6b['forEach'](_0x22c54c=>{const _0x1926c8=_0x46d971;if(_0x22c54c[_0x1926c8(0x1aa)]!=_0x1926c8(0x2e0))toggleBot(_0x22c54c['botID'],toggleStatus(_0x22c54c[_0x1926c8(0x1aa)]),_0x1926c8(0x302));});}else await sendTelegram(_0x31d079[_0x46d971(0x211)]['id'],_0x46d971(0x326)+_0x413461),toggleBot(_0x413461,toggleStatus(_0x413461),_0x46d971(0x302));}),tgBot[_0x363cf8(0x176)]('metrics',async _0x58e3de=>{const _0x169880=_0x363cf8,_0x2f12b2=getEnabledBots();if(_0x2f12b2[_0x169880(0x186)]==0x0)await sendTelegram(_0x58e3de['chat']['id'],_0x169880(0x23f));else{if(_0x2f12b2['length']>0x1){let _0x59d6e4=[],_0x18b612=[];const _0xce3f5b=_0x2f12b2['length']%0x4==0x0||_0x2f12b2[_0x169880(0x186)]%0x4==0x3||_0x2f12b2[_0x169880(0x186)]%0x3==0x1?0x4:0x3;let _0x4dfc12=0x0;_0x2f12b2[_0x169880(0x16d)]((_0x355d05,_0x272913)=>{const _0x10e54b=_0x169880;if(_0x272913%_0xce3f5b==0x0)_0x18b612=[];_0x18b612[_0x10e54b(0x297)](Markup[_0x10e54b(0x271)][_0x10e54b(0x265)](_0x10e54b(0x230)+_0x355d05[_0x10e54b(0x1aa)],'metrics_'+_0x355d05['botID'])),_0x272913%_0xce3f5b==0x0&&(_0x59d6e4[_0x4dfc12]=_0x18b612,_0x4dfc12++);});const _0x30fe52=Markup[_0x169880(0x2f5)](_0x59d6e4);_0x58e3de[_0x169880(0x268)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x30fe52);}else{const _0x3bd6cf=_0x2f12b2[0x0]['botID'];if(pid[_0x3bd6cf])pid[_0x3bd6cf][_0x169880(0x2ab)]({'function':_0x169880(0x350),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x48d745=>{const _0x54febc=_0x363cf8,_0x3aa8b7=_0x48d745[_0x54febc(0x252)][0x1];_0x48d745[_0x54febc(0x323)]();if(pid[_0x3aa8b7])pid[_0x3aa8b7]['send']({'function':_0x54febc(0x350),'args':null});}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x2b0),async _0x5bd08b=>{const _0x1faa57=_0x363cf8,_0x2cd4fc=getEnabledBots();if(_0x2cd4fc[_0x1faa57(0x186)]==0x0)await sendTelegram(_0x5bd08b['chat']['id'],_0x1faa57(0x23f));else{if(_0x2cd4fc['length']>0x1){let _0x51506a=[],_0x434e8f=[];const _0x449e90=_0x2cd4fc[_0x1faa57(0x186)]%0x4==0x0||_0x2cd4fc['length']%0x4==0x3||_0x2cd4fc[_0x1faa57(0x186)]%0x3==0x1?0x4:0x3;let _0x5a4944=0x0;_0x2cd4fc[_0x1faa57(0x16d)]((_0x3cbf08,_0x2f0ca8)=>{const _0x59f220=_0x1faa57;if(_0x2f0ca8%_0x449e90==0x0)_0x434e8f=[];_0x434e8f[_0x59f220(0x297)](Markup[_0x59f220(0x271)][_0x59f220(0x265)]('Bot\x20'+_0x3cbf08[_0x59f220(0x1aa)],_0x59f220(0x2f8)+_0x3cbf08[_0x59f220(0x1aa)])),_0x2f0ca8%_0x449e90==0x0&&(_0x51506a[_0x5a4944]=_0x434e8f,_0x5a4944++);});const _0x56448a=Markup['inlineKeyboard'](_0x51506a);_0x5bd08b[_0x1faa57(0x268)](_0x1faa57(0x1b9),_0x56448a);}else{const _0xd78fda=_0x2cd4fc[0x0]['botID'];if(pid[_0xd78fda])pid[_0xd78fda][_0x1faa57(0x2ab)]({'function':_0x1faa57(0x249),'args':null});}}}),tgBot[_0x363cf8(0x262)](/portfolio_(.+)/,async _0xaf6600=>{const _0x58893f=_0x363cf8,_0x5375eb=_0xaf6600[_0x58893f(0x252)][0x1];_0xaf6600[_0x58893f(0x323)]();if(pid[_0x5375eb])pid[_0x5375eb][_0x58893f(0x2ab)]({'function':_0x58893f(0x249),'args':null});}),tgBot['command']('update',async _0xb067f0=>{const _0x39dd93=_0x363cf8;await getMessages();if(!updateAvailable)await sendTelegram(_0xb067f0['chat']['id'],_0x39dd93(0x2cb));else{if(!validInstallation)await sendTelegram(_0xb067f0[_0x39dd93(0x211)]['id'],_0x39dd93(0x349));else{const _0x3a738b=Markup[_0x39dd93(0x2f5)]([Markup[_0x39dd93(0x271)][_0x39dd93(0x265)](_0x39dd93(0x2fd),_0x39dd93(0x362)),Markup[_0x39dd93(0x271)][_0x39dd93(0x265)]('No','update_no')]);_0xb067f0[_0x39dd93(0x268)](_0x39dd93(0x2c9),_0x3a738b);}}}),tgBot['action'](/update_(.+)/,async _0x4206bb=>{const _0x4d5aed=_0x363cf8,_0x2bd3e3=_0x4206bb[_0x4d5aed(0x252)][0x1];_0x4206bb[_0x4d5aed(0x323)](),_0x2bd3e3==_0x4d5aed(0x35c)&&(await sendTelegram(_0x4206bb[_0x4d5aed(0x211)]['id'],_0x4d5aed(0x2c5)),updateBB('update')),_0x2bd3e3=='no'&&await sendTelegram(_0x4206bb[_0x4d5aed(0x211)]['id'],_0x4d5aed(0x244));}),tgBot[_0x363cf8(0x176)]('reinstall',async _0x402ed5=>{const _0x2da448=_0x363cf8;if(!validInstallation)await sendTelegram(_0x402ed5[_0x2da448(0x211)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x564df=Markup['inlineKeyboard']([Markup[_0x2da448(0x271)][_0x2da448(0x265)]('Yes',_0x2da448(0x180)),Markup['button'][_0x2da448(0x265)]('No',_0x2da448(0x272))]);_0x402ed5[_0x2da448(0x268)](_0x2da448(0x291),_0x564df);}}),tgBot[_0x363cf8(0x262)](/reinstall_(.+)/,async _0x2b9408=>{const _0x45a803=_0x363cf8,_0x3806ef=_0x2b9408[_0x45a803(0x252)][0x1];_0x2b9408[_0x45a803(0x323)](),_0x3806ef=='yes'&&(await sendTelegram(_0x2b9408[_0x45a803(0x211)]['id'],_0x45a803(0x22f)),updateBB(_0x45a803(0x340))),_0x3806ef=='no'&&await sendTelegram(_0x2b9408[_0x45a803(0x211)]['id'],_0x45a803(0x229));}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x1c1),async _0x49ed2f=>{const _0x53e833=_0x363cf8,_0x511bdd=getBotsWithMode();if(_0x511bdd[_0x53e833(0x186)]==0x0)await sendTelegram(_0x49ed2f[_0x53e833(0x211)]['id'],_0x53e833(0x23f));else{let _0x3c2900=[],_0x53c93b=[];const _0x2f4c49=0x2;let _0x59962d=0x0;_0x511bdd['forEach']((_0x485b9d,_0x3e4fd1)=>{const _0x3e612d=_0x53e833;if(_0x3e4fd1%_0x2f4c49==0x0)_0x53c93b=[];_0x53c93b[_0x3e612d(0x297)](Markup[_0x3e612d(0x271)]['callback'](_0x3e612d(0x230)+_0x485b9d[_0x3e612d(0x1aa)]+'\x20('+_0x485b9d[_0x3e612d(0x358)]+')',_0x3e612d(0x2f7)+_0x485b9d[_0x3e612d(0x1aa)])),_0x3e4fd1%_0x2f4c49==0x0&&(_0x3c2900[_0x59962d]=_0x53c93b,_0x59962d++);});const _0x530338=Markup[_0x53e833(0x2f5)](_0x3c2900);_0x49ed2f[_0x53e833(0x268)](_0x53e833(0x24f),_0x530338);}}),tgBot[_0x363cf8(0x262)](/toggle_(.+)/,async _0x444777=>{const _0x1152cd=_0x363cf8,_0x5f10b8=_0x444777[_0x1152cd(0x252)][0x1];_0x444777[_0x1152cd(0x323)]();const _0x260df0=getBotsWithMode(),_0x152dd7=_0x260df0['find'](_0x59abfe=>_0x59abfe[_0x1152cd(0x1aa)]==_0x5f10b8),_0x1452bd=_0x152dd7[_0x1152cd(0x358)]==_0x1152cd(0x321)?_0x1152cd(0x33d):_0x1152cd(0x321);await sendTelegram(_0x444777['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x5f10b8+_0x1152cd(0x1eb)+_0x1452bd+'\x20mode'),toggleBotMode(_0x5f10b8);}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x34a),async _0xd69fe=>{const _0x325436=_0x363cf8;let _0x326995='';config[_0x325436(0x16d)](_0x3ee5da=>{const _0x577683=_0x325436;_0x326995+='Bot\x20'+_0x3ee5da['botID']+':\x20'+_0x3ee5da[_0x577683(0x202)]+'\x0a';}),await sendTelegram(_0xd69fe[_0x325436(0x211)]['id'],_0x326995,{'parse_mode':_0x325436(0x227)});}),tgBot[_0x363cf8(0x176)](_0x363cf8(0x222),async _0x149611=>{const _0x4a3c67=_0x363cf8;await sendTelegram(_0x149611[_0x4a3c67(0x211)]['id'],_0x1fb16b);}),process[_0x363cf8(0x318)](_0x363cf8(0x289),()=>tgBot[_0x363cf8(0x2f0)](_0x363cf8(0x289))),process['once'](_0x363cf8(0x1c4),()=>tgBot[_0x363cf8(0x2f0)](_0x363cf8(0x1c4))),tgBot[_0x363cf8(0x1e6)]();}}function disableTelegram(){const _0x37d651=_0x5ec28a;tgBot&&tgBot[_0x37d651(0x2f0)]();}async function sendTelegram(_0x3e0358,_0x301beb,_0x991870){const _0x4b1887=_0x5ec28a;try{await tgBot['telegram']['sendMessage'](_0x3e0358,_0x301beb,_0x991870);}catch(_0x9e42a4){console[_0x4b1887(0x1e1)](_0x4b1887(0x351),_0x9e42a4);}}async function sendTelegramBot(_0x11e3bc,_0x207359){const _0x2d552c=_0x5ec28a;if(settings[_0x2d552c(0x1a7)]){if(settings[_0x2d552c(0x2ff)]==_0x2d552c(0x2e0)||(_0x207359[_0x2d552c(0x251)]==_0x2d552c(0x2bd)||_0x207359['type']==_0x2d552c(0x170)||_0x207359[_0x2d552c(0x251)]==_0x2d552c(0x18b))&&settings[_0x2d552c(0x2ff)]==_0x2d552c(0x1ed)||_0x207359[_0x2d552c(0x251)]=='order'&&settings[_0x2d552c(0x2ff)]=='orders'){if(tgBot&&settings[_0x2d552c(0x1c0)]){if(_0x207359[_0x2d552c(0x263)])await sendTelegram(settings[_0x2d552c(0x1c0)],_0x207359[_0x2d552c(0x202)]+_0x2d552c(0x276)+_0x207359[_0x2d552c(0x178)]);else await sendTelegram(settings[_0x2d552c(0x1c0)],_0x2d552c(0x230)+_0x11e3bc+'\x20>\x20'+_0x207359[_0x2d552c(0x178)]);}}}}async function sendTelegramMsg(_0x55719a,_0x4bbedc=_0x5ec28a(0x227)){const _0x2af00e=_0x5ec28a;return settings['telegramEnabled']&&tgBot&&settings[_0x2af00e(0x1c0)]?(await sendTelegram(settings[_0x2af00e(0x1c0)],_0x55719a,{'parse_mode':_0x4bbedc}),!![]):![];}function getDeviceWithIp(_0x245f4b){return devices['find'](_0x489609=>_0x489609['ip']===_0x245f4b);}async function temporaryAccess2FA(_0x4a3667,_0x5b2df8){const _0x236e7c=_0x5ec28a;let _0x192d95=new Date(),_0x18885e=![];if(lastIpApproval){if(_0x192d95-lastIpApproval<0x1388)_0x18885e=!![];}lastIpApproval=new Date();if(_0x18885e)return;if(tgBot&&settings[_0x236e7c(0x1c0)]){const _0x115486=Markup[_0x236e7c(0x2f5)]([Markup['button'][_0x236e7c(0x265)]('5\x20min',_0x236e7c(0x30e)),Markup[_0x236e7c(0x271)][_0x236e7c(0x265)](_0x236e7c(0x354),_0x236e7c(0x333)),Markup['button'][_0x236e7c(0x265)]('30\x20min','tempaccess_30'),Markup[_0x236e7c(0x271)][_0x236e7c(0x265)](_0x236e7c(0x187),_0x236e7c(0x33c))]);await sendTelegram(settings['telegramChatId'],_0x236e7c(0x24e)+normalizeIP(_0x5b2df8)['show']+'\x20?',_0x115486),tgBot[_0x236e7c(0x262)](/tempaccess_(.+)/,async _0x4b85cc=>{const _0x1b94a7=_0x236e7c,_0x2e9fdd=_0x4b85cc['match'][0x1];_0x4b85cc[_0x1b94a7(0x323)](),devices[_0x4a3667][_0x1b94a7(0x18d)]={'clientip':_0x5b2df8,'timestamp':new Date()[_0x1b94a7(0x24c)](),'expiry':_0x2e9fdd},_0x2e9fdd!=_0x1b94a7(0x187)?(await sendTelegram(_0x4b85cc['chat']['id'],'Access\x20enabled\x20for\x20'+_0x2e9fdd+'\x20minutes',{'parse_mode':'HTML'}),io['to'](_0x4a3667)[_0x1b94a7(0x1b2)](_0x1b94a7(0x31e),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x4b85cc[_0x1b94a7(0x211)]['id'],_0x1b94a7(0x25c)),io['to'](_0x4a3667)[_0x1b94a7(0x1b2)]('status',{'access':{'allow':![],'reason':_0x1b94a7(0x2a9),'token':null}}));});}}async function loginAccess2FA(_0x57fc05,_0x1afd9f){const _0x4a8ff9=_0x5ec28a;if(tgBot&&settings[_0x4a8ff9(0x1c0)]){const _0x4ff2b5=Markup[_0x4a8ff9(0x2f5)]([Markup[_0x4a8ff9(0x271)][_0x4a8ff9(0x265)](_0x4a8ff9(0x283),'login2fa_'+loginExpiry),Markup['button'][_0x4a8ff9(0x265)](_0x4a8ff9(0x187),_0x4a8ff9(0x2df))]);await sendTelegram(settings[_0x4a8ff9(0x1c0)],_0x4a8ff9(0x1d4)+normalizeIP(_0x1afd9f)[_0x4a8ff9(0x2ac)]+'\x20?',_0x4ff2b5),tgBot['action'](/login2fa_(.+)/,async _0x280218=>{const _0x21029c=_0x4a8ff9,_0x8fd7b2=_0x280218[_0x21029c(0x252)][0x1];_0x280218[_0x21029c(0x323)](),devices[_0x57fc05]['telegram2FaApproval']={'clientip':_0x1afd9f,'timestamp':new Date()['getTime'](),'expiry':_0x8fd7b2},_0x8fd7b2!=_0x21029c(0x187)?(await sendTelegram(_0x280218[_0x21029c(0x211)]['id'],_0x21029c(0x285),{'parse_mode':_0x21029c(0x227)}),io['to'](_0x57fc05)[_0x21029c(0x1b2)](_0x21029c(0x31e),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x280218[_0x21029c(0x211)]['id'],_0x21029c(0x18c)),io['to'](_0x57fc05)[_0x21029c(0x1b2)](_0x21029c(0x31e),{'access':{'allow':![],'reason':_0x21029c(0x2b6),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x7c1cc6=_0x5ec28a;return dbConfig[_0x7c1cc6(0x25a)](_0x7c1cc6(0x1ba))['sortBy'](_0x7c1cc6(0x1aa))['filter']({'status':'enabled'})[_0x7c1cc6(0x1d0)]()||[];}function getDisabledBots(){const _0x2d23c8=_0x5ec28a;return dbConfig[_0x2d23c8(0x25a)](_0x2d23c8(0x1ba))[_0x2d23c8(0x34b)](_0x2d23c8(0x1aa))['filter']({'status':_0x2d23c8(0x193)})['value']()||[];}function getBotAttributes(_0x264b56){const _0x536f7b=_0x5ec28a;let _0x89ef5a={};const _0x2554bd=configpath+_0x536f7b(0x32f)+_0x264b56+_0x536f7b(0x32e),_0x3cd5f2=fs[_0x536f7b(0x1d9)](_0x2554bd);if(_0x3cd5f2){const _0x38c9ed=fs[_0x536f7b(0x225)](_0x2554bd);try{const _0x25d0f7=JSON[_0x536f7b(0x266)](_0x38c9ed),_0x583fb8=_0x25d0f7?_0x25d0f7['bot'][0x0]['headless']:![];_0x89ef5a[_0x536f7b(0x358)]=_0x583fb8?_0x536f7b(0x321):'manual',_0x89ef5a['botname']=_0x25d0f7?_0x25d0f7[_0x536f7b(0x2d9)][0x0][_0x536f7b(0x202)]:_0x536f7b(0x230)+_0x264b56;}catch(_0x4c1ec1){_0x89ef5a[_0x536f7b(0x358)]=_0x536f7b(0x33d),_0x89ef5a[_0x536f7b(0x202)]='Bot\x20'+_0x264b56;}}else _0x89ef5a[_0x536f7b(0x358)]=_0x536f7b(0x33d),_0x89ef5a[_0x536f7b(0x202)]=_0x536f7b(0x230)+_0x264b56;return _0x89ef5a;}function getBotsWithMode(){const _0x47cfb3=_0x5ec28a,_0x9d6e66=dbConfig['get'](_0x47cfb3(0x1ba))[_0x47cfb3(0x34b)](_0x47cfb3(0x1aa))[_0x47cfb3(0x1d0)]()||[];return _0x9d6e66[_0x47cfb3(0x16d)](_0x323d1a=>{const _0x4b389e=_0x47cfb3;let _0x14e40e=getBotAttributes(_0x323d1a[_0x4b389e(0x1aa)]);_0x323d1a[_0x4b389e(0x358)]=_0x14e40e[_0x4b389e(0x358)];}),_0x9d6e66;}function getBotExchanges(){const _0x4ad769=_0x5ec28a;let _0x22fe06=[];const _0x4b510c=dbConfig[_0x4ad769(0x25a)](_0x4ad769(0x1ba))[_0x4ad769(0x34b)](_0x4ad769(0x1aa))[_0x4ad769(0x1d0)]()||[];_0x4b510c['forEach'](_0x589746=>{const _0x5227f7=_0x4ad769;if(_0x589746['status']==_0x5227f7(0x2a2)){const _0x5013d0=configpath+'bot-'+_0x589746['botID']+_0x5227f7(0x32e),_0x2feeb8=fs['existsSync'](_0x5013d0);let _0x22b520;if(_0x2feeb8){const _0x532352=fs[_0x5227f7(0x225)](_0x5013d0);try{const _0x249ff0=JSON[_0x5227f7(0x266)](_0x532352);_0x22b520=_0x249ff0?_0x249ff0[_0x5227f7(0x2d9)][0x0][_0x5227f7(0x223)]:null;}catch(_0x958000){}}if(_0x22b520)_0x22fe06['push'](_0x22b520);}});const _0x2c6aba=[...new Set(_0x22fe06)]['sort']();return _0x2c6aba;}async function initUser(){const _0x4383ae=_0x5ec28a;if(!settings[_0x4383ae(0x1e3)]){const _0x25ddea=uuidRandom();mixpanel['alias'](_0x25ddea),updateSetting(_0x4383ae(0x1e3),_0x25ddea);}}async function initSecure(){const _0xbfb8bc=_0x5ec28a;let _0x5c93f8=getSecure();if(!_0x5c93f8[_0xbfb8bc(0x1b0)](_0xbfb8bc(0x207))){let _0x4c7dc6=await generateKeys();_0x5c93f8[_0xbfb8bc(0x24d)]=_0x4c7dc6[_0xbfb8bc(0x24d)],_0x5c93f8[_0xbfb8bc(0x352)]=_0x4c7dc6[_0xbfb8bc(0x352)],_0x5c93f8[_0xbfb8bc(0x207)]=crypto[_0xbfb8bc(0x1a3)](0x20)[_0xbfb8bc(0x197)](_0xbfb8bc(0x336));;storeSecure(_0x5c93f8);}}function getSettings(){const _0x48dade=_0x5ec28a;return dbSettings[_0x48dade(0x25a)]('settings')[_0x48dade(0x1d0)]()||{};}function getSecure(){const _0x157606=_0x5ec28a;return dbSecure[_0x157606(0x25a)](_0x157606(0x1be))[_0x157606(0x1d0)]()||{};}function getBlacklist(){const _0x4e2d28=_0x5ec28a;return dbSecure[_0x4e2d28(0x25a)](_0x4e2d28(0x231))[_0x4e2d28(0x1d0)]()||[];}function broadcastToBots(_0x49ce97,_0x38bf4){const _0x43a9a9=_0x5ec28a;config[_0x43a9a9(0x16d)](_0x2e7a76=>{const _0x234c66=_0x43a9a9;if(_0x2e7a76['status']==_0x234c66(0x2a2)&&_0x2e7a76['live']=='running'||_0x2e7a76['status']==_0x234c66(0x199)&&_0x2e7a76[_0x234c66(0x1f3)]=='running'){if(pid[_0x2e7a76[_0x234c66(0x1aa)]])pid[_0x2e7a76[_0x234c66(0x1aa)]][_0x234c66(0x2ab)]({[_0x49ce97]:_0x38bf4});}});}function storeSettings(_0x1ded33,_0x1934f2=![]){const _0x26e35b=_0x5ec28a;_0x1ded33={...settings,..._0x1ded33};if(_0x1934f2&&_0x1ded33[_0x26e35b(0x32a)]!='************'&&_0x1ded33[_0x26e35b(0x32a)]!=_0x26e35b(0x2db)&&_0x1ded33[_0x26e35b(0x32a)]!=''){const _0x2f5794=crypt[_0x26e35b(0x356)](secure[_0x26e35b(0x352)],_0x1ded33[_0x26e35b(0x32a)])['message'][_0x26e35b(0x34f)]('@')[0x0],_0x27d2ef=bcrypt[_0x26e35b(0x339)](_0x2f5794,saltRounds);_0x1ded33={..._0x1ded33,'bbPassword':_0x27d2ef};}if(_0x1934f2&&_0x1ded33[_0x26e35b(0x357)]!=_0x26e35b(0x322)&&_0x1ded33[_0x26e35b(0x357)]!=_0x26e35b(0x2db)&&_0x1ded33[_0x26e35b(0x357)]!=''){const _0x3daf3e=crypt[_0x26e35b(0x356)](secure[_0x26e35b(0x352)],_0x1ded33[_0x26e35b(0x357)])['message'][_0x26e35b(0x34f)]('@')[0x0];_0x1ded33={..._0x1ded33,'telegramToken':_0x3daf3e};}const _0x21be7d=_0x1ded33[_0x26e35b(0x357)]!=_0x26e35b(0x322)&&_0x1ded33['telegramToken']!=settings[_0x26e35b(0x357)]||_0x1ded33[_0x26e35b(0x205)]!=settings['telegramUsername'],_0x3f2ed4=_0x1ded33[_0x26e35b(0x357)]==''||_0x1ded33[_0x26e35b(0x205)]=='';_0x21be7d&&(_0x1ded33[_0x26e35b(0x1c0)]=null,_0x1ded33[_0x26e35b(0x2ff)]=_0x26e35b(0x2e0));for(const [_0x3daf62,_0x3ac182]of Object[_0x26e35b(0x28b)](_0x1ded33)){if(_0x3daf62==_0x26e35b(0x357)&&_0x3ac182=='************'){_0x1ded33[_0x26e35b(0x357)]=settings[_0x26e35b(0x357)];continue;};if(_0x3daf62==_0x26e35b(0x32a)&&_0x3ac182==_0x26e35b(0x322)){_0x1ded33[_0x26e35b(0x32a)]=settings[_0x26e35b(0x32a)];continue;};dbSettings[_0x26e35b(0x20c)](_0x26e35b(0x19c)+_0x3daf62,_0x3ac182)[_0x26e35b(0x1ec)]();}settings=_0x1ded33,io['to'](_0x26e35b(0x2de))[_0x26e35b(0x1b2)](_0x26e35b(0x22b),cleanSettings()),broadcastToBots(_0x26e35b(0x1ae),settings[_0x26e35b(0x1ae)]),broadcastToBots(_0x26e35b(0x26c),settings[_0x26e35b(0x26c)]);if(_0x21be7d&&!_0x3f2ed4)initTelegram();if(_0x21be7d&&_0x3f2ed4)disableTelegram();getAllClients()['forEach'](_0x1bf4d8=>{const _0x19967c=_0x26e35b;getSocket(_0x1bf4d8['id'])['emit']('status',{'access':{'allow':![],'reason':_0x19967c(0x16a),'token':null}});});}function updateSetting(_0x258058,_0x529f18){const _0x25b476=_0x5ec28a;dbSettings[_0x25b476(0x20c)](_0x25b476(0x19c)+_0x258058,_0x529f18)[_0x25b476(0x1ec)](),settings=getSettings(),io['to'](_0x25b476(0x2de))[_0x25b476(0x1b2)](_0x25b476(0x22b),cleanSettings());}function storeSecure(_0xf1453b){const _0x25643b=_0x5ec28a;dbSecure[_0x25643b(0x25a)](_0x25643b(0x1be))[_0x25643b(0x297)](_0xf1453b)['write'](),secure=_0xf1453b;}function addBlacklist(_0x3540cb){const _0x306d6d=_0x5ec28a;cleanBlacklist();let _0x6ee12d;devices[_0x3540cb]['telegramIpApproval']?_0x6ee12d=Math[_0x306d6d(0x346)](devices[_0x3540cb][_0x306d6d(0x18d)][_0x306d6d(0x277)],loginExpiry):_0x6ee12d=loginExpiry,dbSecure[_0x306d6d(0x25a)](_0x306d6d(0x231))[_0x306d6d(0x297)]({'expiry':new Date()[_0x306d6d(0x24c)]()+_0x6ee12d*0x3c*0x3e8,'token':devices[_0x3540cb][_0x306d6d(0x279)][_0x306d6d(0x1bb)]})['write'](),blacklist=dbSecure[_0x306d6d(0x25a)]('blacklist')[_0x306d6d(0x1d0)]();}function cleanBlacklist(){const _0x2a5e3e=_0x5ec28a;let _0x44e58e=dbSecure[_0x2a5e3e(0x25a)](_0x2a5e3e(0x231))['cloneDeep']()[_0x2a5e3e(0x1d0)](),_0x4efa4c=new Date()['getTime']();_0x44e58e[_0x2a5e3e(0x16d)](_0xe11ccf=>{const _0x4697e8=_0x2a5e3e;_0xe11ccf[_0x4697e8(0x277)]<_0x4efa4c&&dbSecure['get'](_0x4697e8(0x231))['remove']({'expiry':_0xe11ccf[_0x4697e8(0x277)]})[_0x4697e8(0x1ec)]();});}function _0x9a8b(_0xf9aaf,_0x1fa051){const _0xd0dd0e=_0x4469();return _0x9a8b=function(_0x3559a0,_0x56a650){_0x3559a0=_0x3559a0-0x16a;let _0x4469af=_0xd0dd0e[_0x3559a0];return _0x4469af;},_0x9a8b(_0xf9aaf,_0x1fa051);}function initStates(){const _0x4eaed2=_0x5ec28a;let _0x50aaf2=getConfiguration();_0x50aaf2[_0x4eaed2(0x16d)](_0x5d74d7=>{const _0x2c7d95=_0x4eaed2;_0x5d74d7[_0x2c7d95(0x1f3)]='stopped';}),storeConfiguration(_0x50aaf2);}function onKeys(){const _0x224d58=new RSA();return new Promise(_0x2908ca=>{const _0x33fac4=_0x9a8b;_0x224d58[_0x33fac4(0x303)]()['then'](_0x4940da=>{_0x2908ca(_0x4940da);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1d5ab0=_0x5ec28a;let _0xb1de88=getSettings(),_0xd19dc6=![];!_0xb1de88[_0x1d5ab0(0x1b0)](_0x1d5ab0(0x1e7))&&(_0xb1de88['lastmsgtelegram']=0x0,_0xd19dc6=!![]);!_0xb1de88[_0x1d5ab0(0x1b0)]('lastmsgemitted')&&(_0xb1de88[_0x1d5ab0(0x1cf)]=0x0,_0xd19dc6=!![]);!_0xb1de88['hasOwnProperty'](_0x1d5ab0(0x1a2))&&(_0xb1de88[_0x1d5ab0(0x1a2)]='0.0.0',_0xd19dc6=!![]);!_0xb1de88[_0x1d5ab0(0x1b0)](_0x1d5ab0(0x26c))&&(_0xb1de88[_0x1d5ab0(0x26c)]=![],_0xd19dc6=!![]);if(_0xd19dc6)storeSettings(_0xb1de88);try{fs[_0x1d5ab0(0x21d)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x35e601=>{const _0x22c965=_0x1d5ab0;if(!_0x35e601[_0x22c965(0x369)]()){if(!_0x35e601[_0x22c965(0x1bf)][_0x22c965(0x327)](_0x22c965(0x2c4)))fs[_0x22c965(0x2c2)](configbackuppath+_0x35e601[_0x22c965(0x1bf)]);}else fs['rmSync'](configbackuppath+_0x35e601[_0x22c965(0x1bf)],{'recursive':!![]});});}catch(_0x275f1e){logger[_0x1d5ab0(0x2f4)](_0x1d5ab0(0x18a),_0x275f1e);}}function storeConfiguration(_0x1e3c18){const _0x1e1d16=_0x5ec28a;dbConfig[_0x1e1d16(0x25a)]('bots')['remove']()[_0x1e1d16(0x1ec)](),dbConfig[_0x1e1d16(0x25a)](_0x1e1d16(0x1ba))['push'](..._0x1e3c18)[_0x1e1d16(0x1ec)](),config=_0x1e3c18;}async function resetPassword(){const _0x32de64=_0x5ec28a;if(tgBot&&settings[_0x32de64(0x1c0)]){const _0x5cc879=Markup[_0x32de64(0x2f5)]([Markup[_0x32de64(0x271)][_0x32de64(0x265)](_0x32de64(0x35c),_0x32de64(0x338)),Markup['button'][_0x32de64(0x265)]('no',_0x32de64(0x1f8))]);await sendTelegram(settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x5cc879),tgBot[_0x32de64(0x262)](/resetpw_(.+)/,async _0x4f233b=>{const _0x3417ff=_0x32de64,_0x16e1fb=_0x4f233b[_0x3417ff(0x252)][0x1];_0x4f233b['editMessageReplyMarkup']();if(_0x16e1fb!='no'){const _0x5689cc=0xf,_0x1cb2c3=_0x3417ff(0x1f6),_0x345fc4=Array['from'](crypto[_0x3417ff(0x20b)](new Uint32Array(_0x5689cc)))[_0x3417ff(0x2aa)](_0x46c15e=>_0x1cb2c3[_0x46c15e%_0x1cb2c3['length']])[_0x3417ff(0x1a4)](''),_0x3df559=bcrypt[_0x3417ff(0x339)](_0x345fc4,saltRounds);storeSettings({'bbPassword':_0x3df559}),await sendTelegram(_0x4f233b['chat']['id'],_0x3417ff(0x30b)+_0x345fc4,{'parse_mode':_0x3417ff(0x227)});}else await sendTelegram(_0x4f233b[_0x3417ff(0x211)]['id'],_0x3417ff(0x34d));});}}async function confirmRestore(_0x9d08a5,_0x32a21c){const _0x99e44d=_0x5ec28a;io['to'](_0x99e44d(0x2de))['emit'](_0x99e44d(0x1e9),_0x99e44d(0x2fc),_0x99e44d(0x18b));if(tgBot&&settings[_0x99e44d(0x1c0)]){const _0x46fd41=Markup[_0x99e44d(0x2f5)]([Markup[_0x99e44d(0x271)][_0x99e44d(0x265)](_0x99e44d(0x35c),_0x99e44d(0x274)),Markup[_0x99e44d(0x271)]['callback']('no',_0x99e44d(0x213))]);await sendTelegram(settings[_0x99e44d(0x1c0)],_0x99e44d(0x30a),_0x46fd41),tgBot['action'](/restore_(.+)/,async _0x30b7ac=>{const _0x3aec35=_0x99e44d,_0x1c0ecb=_0x30b7ac[_0x3aec35(0x252)][0x1];_0x30b7ac[_0x3aec35(0x323)](),_0x1c0ecb==_0x3aec35(0x35c)?(logger['debug'](_0x3aec35(0x1d2)),await sendTelegram(_0x30b7ac[_0x3aec35(0x211)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x3aec35(0x227)}),unzipFile(_0x9d08a5,_0x32a21c)):(logger['debug'](_0x3aec35(0x17f)),await sendTelegram(_0x30b7ac[_0x3aec35(0x211)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x581619=_0x5ec28a,_0x1f3d84=new Date();return _0x1f3d84[_0x581619(0x307)]()+'/'+(_0x1f3d84['getMonth']()+0x1)[_0x581619(0x197)]()[_0x581619(0x1fb)](0x2,'0')+'/'+_0x1f3d84[_0x581619(0x25d)]()['toString']()[_0x581619(0x1fb)](0x2,'0')+'\x20'+_0x1f3d84[_0x581619(0x27f)]()[_0x581619(0x197)]()[_0x581619(0x1fb)](0x2,'0')+':'+_0x1f3d84[_0x581619(0x306)]()[_0x581619(0x197)]()[_0x581619(0x1fb)](0x2,'0')+':'+_0x1f3d84['getSeconds']()[_0x581619(0x197)]()[_0x581619(0x1fb)](0x2,'0');}function getTimeStamp(){const _0x339f24=_0x5ec28a,_0x4b3bef=shiftedTime();return _0x4b3bef[_0x339f24(0x307)]()+'/'+(_0x4b3bef[_0x339f24(0x1af)]()+0x1)[_0x339f24(0x197)]()[_0x339f24(0x1fb)](0x2,'0')+'/'+_0x4b3bef[_0x339f24(0x25d)]()[_0x339f24(0x197)]()[_0x339f24(0x1fb)](0x2,'0')+'\x20'+_0x4b3bef[_0x339f24(0x27f)]()[_0x339f24(0x197)]()['padStart'](0x2,'0')+':'+_0x4b3bef[_0x339f24(0x306)]()[_0x339f24(0x197)]()[_0x339f24(0x1fb)](0x2,'0')+':'+_0x4b3bef['getSeconds']()[_0x339f24(0x197)]()[_0x339f24(0x1fb)](0x2,'0');}function getCleanTimeStamp(){const _0x6f9f79=_0x5ec28a,_0x278e81=shiftedTime();return _0x278e81[_0x6f9f79(0x307)]()+(_0x278e81[_0x6f9f79(0x1af)]()+0x1)[_0x6f9f79(0x197)]()['padStart'](0x2,'0')+_0x278e81['getDate']()[_0x6f9f79(0x197)]()[_0x6f9f79(0x1fb)](0x2,'0')+'-'+_0x278e81['getHours']()[_0x6f9f79(0x197)]()[_0x6f9f79(0x1fb)](0x2,'0')+_0x278e81['getMinutes']()['toString']()['padStart'](0x2,'0')+_0x278e81[_0x6f9f79(0x20e)]()[_0x6f9f79(0x197)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x407931=_0x5ec28a,_0x3fa5a0=new Date();let _0x14ca70=_0x3fa5a0;if(settings[_0x407931(0x1ae)]&&settings['timeshift']!==0x0)_0x14ca70=fns[_0x407931(0x2e9)](_0x3fa5a0,{'hours':settings[_0x407931(0x1ae)]});return _0x14ca70;}function startScheduler(){const _0x39ebf6=_0x5ec28a,_0x3979ed=new Date()['getUTCHours'](),_0x5bdda9=shiftedTime()[_0x39ebf6(0x27f)]();_0x5bdda9==0x4&&backupConfigFiles();_0x5bdda9==0x0&&rotateLogFiles();_0x3979ed%0x6==0x0&&triggerAnalytics();_0x3979ed%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x5d9796){const _0x4de2bf=_0x5ec28a;logger[_0x4de2bf(0x2f4)](_0x4de2bf(0x34c)+_0x5d9796);const _0x10c695=getBotsWithMode();_0x10c695[_0x4de2bf(0x186)]>0x0?confirmRestore(configbackuppath,_0x5d9796):unzipFile(configbackuppath,_0x5d9796);}async function getBackupFiles(_0x4fa8f9=null){const _0x36aa2a=_0x5ec28a;let _0x513cd9=[],_0x6049a=fs[_0x36aa2a(0x21d)](configbackuppath,{'withFileTypes':!![]});_0x6049a[_0x36aa2a(0x32d)]((_0x4c8948,_0x19393)=>_0x4c8948[_0x36aa2a(0x1bf)]<_0x19393[_0x36aa2a(0x1bf)]?0x1:_0x19393[_0x36aa2a(0x1bf)]<_0x4c8948['name']?-0x1:0x0),_0x6049a[_0x36aa2a(0x16d)](_0x344560=>{const _0x2c48df=_0x36aa2a;if(!_0x344560[_0x2c48df(0x369)]()&&_0x344560['name'][_0x2c48df(0x327)](_0x2c48df(0x2c4))&&_0x344560[_0x2c48df(0x1bf)][_0x2c48df(0x2ea)](_0x2c48df(0x190))){const _0x4c2b82=formatDate(fs[_0x2c48df(0x292)](configbackuppath+_0x344560[_0x2c48df(0x1bf)])['mtime']);_0x513cd9[_0x2c48df(0x297)]({'name':_0x344560[_0x2c48df(0x1bf)],'mtime':_0x4c2b82});}});if(_0x4fa8f9)io['to'](_0x4fa8f9)[_0x36aa2a(0x1b2)]('backup-files',_0x513cd9);else return _0x513cd9;}async function backupConfigFiles(){const _0xa4d592=_0x5ec28a;await zipFiles('backup-full');const _0x274d45=getCleanTimeStamp();fs[_0xa4d592(0x1dc)](zippath+_0xa4d592(0x260),configbackuppath+(_0xa4d592(0x2c4)+_0x274d45+'.zip'));let _0x3ae9cf=fs[_0xa4d592(0x21d)](configbackuppath,{'withFileTypes':!![]});_0x3ae9cf[_0xa4d592(0x32d)]((_0x5af43c,_0x273abd)=>_0x5af43c[_0xa4d592(0x1bf)]<_0x273abd[_0xa4d592(0x1bf)]?0x1:_0x273abd[_0xa4d592(0x1bf)]<_0x5af43c[_0xa4d592(0x1bf)]?-0x1:0x0),_0x3ae9cf[_0xa4d592(0x186)]>maxBackups&&fs[_0xa4d592(0x2c2)](configbackuppath+_0x3ae9cf[_0x3ae9cf['length']-0x1]['name']);}function rotateLogFiles(){const _0x1851a6=_0x5ec28a,_0x273eb9=fs[_0x1851a6(0x292)](logspath+_0x1851a6(0x30d)),_0x2ed8d1=_0x273eb9[_0x1851a6(0x2ed)]/0x400;if(_0x2ed8d1>0x64){let _0xb5e366=fs[_0x1851a6(0x21d)](logspath,{'withFileTypes':!![]});_0xb5e366[_0x1851a6(0x32d)]((_0x69c137,_0x387f24)=>_0x69c137[_0x1851a6(0x1bf)]<_0x387f24[_0x1851a6(0x1bf)]?0x1:_0x387f24['name']<_0x69c137['name']?-0x1:0x0),_0xb5e366[_0x1851a6(0x16d)](_0x1cae83=>{const _0x490b86=_0x1851a6;if(_0x1cae83['name']=='output-002.log')fs['copyFileSync'](logspath+_0x1cae83[_0x490b86(0x1bf)],logspath+_0x490b86(0x2bb));if(_0x1cae83[_0x490b86(0x1bf)]==_0x490b86(0x182))fs[_0x490b86(0x1dc)](logspath+_0x1cae83[_0x490b86(0x1bf)],logspath+'output-002.log');_0x1cae83[_0x490b86(0x1bf)]==_0x490b86(0x30d)&&(fs[_0x490b86(0x1dc)](logspath+_0x1cae83['name'],logspath+'output-001.log'),fs[_0x490b86(0x35a)](logspath+_0x1cae83[_0x490b86(0x1bf)],''));});}}async function zipFiles(_0x5dcea5){const _0xc3df64=_0x5ec28a;let _0x2e61b0;if(_0x5dcea5==_0xc3df64(0x1df))_0x2e61b0=logspath;if(_0x5dcea5==_0xc3df64(0x233))_0x2e61b0=configpath;if(_0x5dcea5==_0xc3df64(0x1e5))_0x2e61b0=configpath;let _0x330685=fs[_0xc3df64(0x21d)](_0x2e61b0,{'withFileTypes':!![]});const _0x1ff8a8=new require('node-zip')();_0x330685['forEach'](_0x5e68c2=>{const _0xcb082e=_0xc3df64;if(!_0x5e68c2[_0xcb082e(0x369)]()){let _0x1ca4ab=fs['readFileSync'](_0x2e61b0+_0x5e68c2['name']);if(_0x5dcea5=='backup'){const _0x3e3235=/^bot-[0-9]{3}-config.json$/,_0x31b49e=_0x3e3235[_0xcb082e(0x1f0)](_0x5e68c2[_0xcb082e(0x1bf)]);if(_0x31b49e){const _0x1874d2=JSON[_0xcb082e(0x266)](_0x1ca4ab);if(_0x1874d2[_0xcb082e(0x2d9)][0x0]){_0x1874d2['bot'][0x0][_0xcb082e(0x27e)]=_0xcb082e(0x2db),_0x1874d2[_0xcb082e(0x2d9)][0x0]['apiSecret']=_0xcb082e(0x2db);if(_0x1874d2[_0xcb082e(0x2d9)][0x0][_0xcb082e(0x19e)])_0x1874d2['bot'][0x0][_0xcb082e(0x19e)]=_0xcb082e(0x2db);}_0x1ca4ab=JSON[_0xcb082e(0x219)](_0x1874d2,null,0x2);}if(_0x5e68c2[_0xcb082e(0x1bf)]=='bb-settings.json'){const _0x266455=JSON[_0xcb082e(0x266)](_0x1ca4ab);if(_0x266455[_0xcb082e(0x22b)]['loginRequired'])_0x266455['settings'][_0xcb082e(0x275)]=![];if(_0x266455[_0xcb082e(0x22b)]['bbPassword'])_0x266455[_0xcb082e(0x22b)][_0xcb082e(0x32a)]=_0xcb082e(0x2db);if(_0x266455['settings'][_0xcb082e(0x357)])_0x266455['settings']['telegramToken']=_0xcb082e(0x2db);if(_0x266455['settings'][_0xcb082e(0x1c0)])_0x266455[_0xcb082e(0x22b)][_0xcb082e(0x1c0)]=null;_0x1ca4ab=JSON[_0xcb082e(0x219)](_0x266455,null,0x2);}if(_0x5e68c2[_0xcb082e(0x1bf)]!=_0xcb082e(0x1ab))_0x1ff8a8[_0xcb082e(0x214)](_0x5e68c2['name'],_0x1ca4ab);}else _0x1ff8a8[_0xcb082e(0x214)](_0x5e68c2['name'],_0x1ca4ab);}});const _0x5e0be7=_0x1ff8a8[_0xc3df64(0x23d)]({'base64':![],'compression':_0xc3df64(0x2a1)});fs[_0xc3df64(0x35a)](zippath+(_0x5dcea5+_0xc3df64(0x190)),_0x5e0be7,_0xc3df64(0x309));}async function unzipFile(_0x5d648b,_0x2eea46){const _0x5d1584=_0x5ec28a;fs[_0x5d1584(0x21d)](configpath,{'withFileTypes':!![]})['forEach'](_0x45b505=>{const _0x8000ce=_0x5d1584;if(!_0x45b505[_0x8000ce(0x369)]())fs[_0x8000ce(0x301)](configpath+_0x45b505[_0x8000ce(0x1bf)]);});const _0x20737a=fs[_0x5d1584(0x225)](_0x5d648b+_0x2eea46,_0x5d1584(0x309)),_0x4f2fd0=new require(_0x5d1584(0x204))(_0x20737a,{'base64':![],'checkCRC32':!![]});Object[_0x5d1584(0x299)](_0x4f2fd0[_0x5d1584(0x1fa)])[_0x5d1584(0x16d)](_0x21e272=>{const _0x59b3e6=_0x5d1584,_0x39ea2c=_0x4f2fd0[_0x59b3e6(0x1fa)][_0x21e272];fs['writeFileSync'](configpath+_0x39ea2c[_0x59b3e6(0x1bf)],_0x39ea2c[_0x59b3e6(0x2a5)]);}),fs[_0x5d1584(0x21d)](temppath,{'withFileTypes':!![]})[_0x5d1584(0x16d)](_0x3d1ffd=>{const _0x113481=_0x5d1584;if(!_0x3d1ffd['isDirectory']())fs[_0x113481(0x301)](temppath+_0x3d1ffd[_0x113481(0x1bf)]);}),logger[_0x5d1584(0x2f4)](_0x5d1584(0x282)),process[_0x5d1584(0x2ab)]({'restore':!![]},_0x2a7b04=>{});}async function getPublicIp(){const _0x3be251=_0x5ec28a;try{const _0x166903=await axios['get'](_0x3be251(0x324));publicip=_0x166903['data']['ip'];}catch(_0x4e6b3c){}}async function triggerAnalytics(){const _0x53a118=_0x5ec28a;if(!publicip)await getPublicIp();const _0x3f2e45=getBotsWithMode();let _0x4c564b=0x0;_0x3f2e45[_0x53a118(0x16d)](_0x447808=>{const _0x3d6c7e=_0x53a118;if(_0x447808[_0x3d6c7e(0x31e)]===_0x3d6c7e(0x2a2))_0x4c564b++;});const _0x172869=getBotExchanges();mixpanel[_0x53a118(0x1f7)]('Server',{'distinct_id':settings[_0x53a118(0x1e3)],'ip':publicip,'version':serverversion,'numbots':_0x3f2e45[_0x53a118(0x186)],'numbotsenabled':_0x4c564b,'exchanges':_0x172869,'environment':environment});}async function getMessages(){const _0x9c0732=_0x5ec28a,_0x1282bd=_0x9c0732(0x2d5),_0x1657cf=new GraphQLClient(_0x1282bd),_0x4bb8ab={'authorization':_0x9c0732(0x31a)},_0x4aa838=serverversion[_0x9c0732(0x34f)]('.'),_0x46b3ab=_0x4aa838[0x0]+'.'+_0x4aa838[0x1],_0x39835e=Math['min'](settings[_0x9c0732(0x1e7)],settings[_0x9c0732(0x1cf)]),_0x5b313f={'last':parseInt(_0x39835e),'bbm':_0x46b3ab},_0x33220e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x143b74;try{_0x143b74=await _0x1657cf[_0x9c0732(0x2d8)](_0x33220e,_0x5b313f,_0x4bb8ab);}catch(_0x41b85d){}if(_0x143b74&&_0x143b74['messages']){let _0x47ea50=settings['lastmsgtelegram'];newMessages=[];for(const _0x48c7b7 of _0x143b74[_0x9c0732(0x360)]){newMessages[_0x9c0732(0x297)](_0x48c7b7);let _0x35f4b4=![];_0x48c7b7[_0x9c0732(0x308)]&&(updateSetting(_0x9c0732(0x1a2),_0x48c7b7[_0x9c0732(0x308)]),_0x35f4b4=isNewerVersion(serverversion,_0x48c7b7[_0x9c0732(0x308)])||serverversion==_0x48c7b7['bbvNew']);if(!_0x35f4b4&&_0x48c7b7[_0x9c0732(0x300)]>_0x47ea50){if(_0x48c7b7[_0x9c0732(0x29b)]===_0x9c0732(0x2fe)||serverversion[_0x9c0732(0x327)](_0x48c7b7[_0x9c0732(0x29b)])){let _0x4ddb00=''+_0x48c7b7['title']+'\x0a\x0a'+_0x48c7b7[_0x9c0732(0x201)];const _0xedbb76=await sendTelegramMsg(toTelegramMarkdown(_0x4ddb00),_0x9c0732(0x1c9));if(_0xedbb76)_0x47ea50=_0x48c7b7['number'];}}}updateAvailable=isNewerVersion(settings[_0x9c0732(0x1a2)],serverversion),updateSetting('lastmsgtelegram',_0x47ea50),emitMessages();}}function emitMessages(){const _0x4a74fe=_0x5ec28a,_0x3b85d6=settings[_0x4a74fe(0x1cf)];let _0x1f7d44=[];newMessages['forEach'](_0x1eb7b9=>{const _0x1fd578=_0x4a74fe;_0x1eb7b9[_0x1fd578(0x300)]>_0x3b85d6&&_0x1f7d44[_0x1fd578(0x297)](_0x1eb7b9);}),_0x1f7d44[_0x4a74fe(0x186)]>0x0&&getAllClients()[_0x4a74fe(0x16d)](_0x280a1c=>{const _0x11d012=_0x4a74fe;getSocket(_0x280a1c['id'])[_0x11d012(0x1b2)](_0x11d012(0x201),_0x1f7d44);});}function confirmMessage(_0x257cd4){updateSetting('lastmsgemitted',Number(_0x257cd4));}function isNewerVersion(_0x43dccd,_0x1392af){const _0x3c7d2d=_0x5ec28a,_0x46e1d6=_0x1392af[_0x3c7d2d(0x34f)]('.'),_0x52dd92=_0x43dccd[_0x3c7d2d(0x34f)]('.');for(var _0x5bb4f4=0x0;_0x5bb4f4<_0x52dd92[_0x3c7d2d(0x186)];_0x5bb4f4++){const _0x4c6422=~~_0x52dd92[_0x5bb4f4],_0x4b5fbd=~~_0x46e1d6[_0x5bb4f4];if(_0x4c6422>_0x4b5fbd)return!![];if(_0x4c6422<_0x4b5fbd)return![];}return![];}function toTelegramMarkdown(_0x22b7c6){const _0x3c96c8=_0x5ec28a,_0x38d956=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3ebd8f=/\*{2}(.+?)\*{2}/gim;return _0x22b7c6=_0x22b7c6[_0x3c96c8(0x1c7)](_0x38d956,_0x3c96c8(0x203))[_0x3c96c8(0x1c7)](_0x3ebd8f,_0x3c96c8(0x21f)),_0x22b7c6;}async function validateConfigFile(){const _0x3028a0=_0x5ec28a,_0xec3615=dbConfig['get'](_0x3028a0(0x1ba))[_0x3028a0(0x34b)](_0x3028a0(0x1aa))[_0x3028a0(0x1d0)]()||[];if(_0xec3615['length']==0x0){let _0x2dc77c=0x0,_0x4251ee=[];const _0x4da821=/^bot-([0-9]{3})-config.json$/,_0x5ae545=fs[_0x3028a0(0x21d)](configpath);_0x5ae545[_0x3028a0(0x16d)](_0x56ce13=>{const _0x39f3df=_0x3028a0,_0x3428bb=_0x4da821[_0x39f3df(0x270)](_0x56ce13);if(_0x3428bb){const _0x3bd50b=_0x3428bb[0x1];let _0x51dcdb=getBotAttributes(_0x3bd50b);_0x4251ee['push']({'botID':_0x3bd50b,'botname':_0x51dcdb[_0x39f3df(0x202)],'status':_0x39f3df(0x193),'live':_0x39f3df(0x302)}),_0x2dc77c++;}}),_0x2dc77c!=0x0&&(dbConfig['get'](_0x3028a0(0x1ba))[_0x3028a0(0x1c8)](_0x4251ee)[_0x3028a0(0x1ec)](),config=_0x4251ee,restoredConfigFile=_0x2dc77c);}}async function restoreConfigNotify(_0x391e20){const _0x52dba9=_0x5ec28a;let _0x5d5e7c;if(restoredConfigFile==0x1)_0x5d5e7c=_0x52dba9(0x20d);else _0x5d5e7c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x391e20)io['to']('botmanager')[_0x52dba9(0x1b2)](_0x52dba9(0x1e9),_0x5d5e7c);else{logger[_0x52dba9(0x1d1)](_0x52dba9(0x33a)),logger[_0x52dba9(0x1d1)](_0x5d5e7c),logger[_0x52dba9(0x1d1)](_0x52dba9(0x33a)),logger['simple']('');if(tgBot&&settings[_0x52dba9(0x1c0)]&&settings[_0x52dba9(0x2ff)]!='orders')await sendTelegram(settings[_0x52dba9(0x1c0)],_0x52dba9(0x1da)+_0x5d5e7c);}}function validateCredentials(_0x9d7256,_0x18e928){const _0xdb9984=_0x5ec28a;if(_0x9d7256[_0xdb9984(0x232)]==settings[_0xdb9984(0x254)]&&bcrypt[_0xdb9984(0x2c3)](_0x9d7256[_0xdb9984(0x195)],settings[_0xdb9984(0x32a)])){if(settings[_0xdb9984(0x26d)])return{'allow':![],'reason':_0xdb9984(0x2ec),'token':null};else{const _0x5419b8=generateLoginToken(_0x18e928);return{'allow':!![],'reason':_0xdb9984(0x294),'token':_0x5419b8};}}else return{'allow':![],'reason':_0xdb9984(0x243),'token':null};}function refreshToken(_0x3b41eb){const _0xea98b=generateLoginToken(_0x3b41eb);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xea98b};}function validateAccess(_0x433ab9,_0x22911c,_0x5dac63){const _0x9b5436=_0x5ec28a,_0x235e60=_0x5dac63?_0x5dac63:devices[_0x22911c]['ip'];let _0x3f0ab7;const _0x379a5d=_0x38d36a=>{const _0x286158=_0x9a8b;if(settings[_0x286158(0x275)]){if(settings[_0x286158(0x26d)]){if(telegram2FaApproved(_0x22911c)){const _0x455d55=generateLoginToken(_0x22911c);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x455d55};}else return{'allow':![],'reason':_0x286158(0x2af),'token':null};}else return _0x3f0ab7=validToken(_0x38d36a,_0x22911c),_0x3f0ab7['hasOwnProperty'](_0x286158(0x18b))?{'allow':!![],'reason':_0x286158(0x2a8),'token':_0x38d36a}:{'allow':![],'reason':_0x286158(0x2af),'token':null};}else return{'allow':!![],'reason':_0x286158(0x33e),'token':null};};if(settings[_0x9b5436(0x220)]){let _0x4fad4a=[...settings['whitelist'],'::1',_0x9b5436(0x33b),_0x9b5436(0x2e6)];if(_0x4fad4a[_0x9b5436(0x1d7)](_0x235e60))return _0x379a5d(_0x433ab9);else{_0x3f0ab7=validToken(_0x433ab9,_0x22911c);if(_0x3f0ab7['hasOwnProperty'](_0x9b5436(0x18b)))return _0x379a5d(_0x433ab9);else{if(telegramIpApproved(_0x22911c)){const _0x51d760=generateToken(_0x22911c);return _0x3f0ab7=_0x379a5d(_0x433ab9),_0x3f0ab7[_0x9b5436(0x33f)]?{'allow':!![],'reason':_0x9b5436(0x284),'token':_0x51d760}:_0x3f0ab7;}else return settings[_0x9b5436(0x196)]?{'allow':![],'reason':_0x9b5436(0x2d0),'token':null}:{'allow':![],'reason':_0x9b5436(0x2da),'token':null};}}}else return _0x379a5d(_0x433ab9);}function timelyDecrypt(_0x2eb286,_0x575458=!![]){const _0x5a9f3b=_0x5ec28a;if(_0x2eb286)try{const _0x2e8c02=crypt['decrypt'](secure['privateKey'],_0x2eb286)['message'],_0x54e1f2=_0x2e8c02[_0x5a9f3b(0x34f)]('@')[0x0],_0x21f0b2=_0x2e8c02['split']('@')[0x1],_0x344049=new Date()[_0x5a9f3b(0x24c)]();if(_0x575458){if(_0x344049-_0x21f0b2<maxSecretAge*0x3e8)return _0x54e1f2;else return![];}else return _0x54e1f2;}catch(_0x1b6095){return![];}else return![];}const validToken=(_0x1e8cb6,_0x64a27d)=>{const _0x498dc3=_0x5ec28a,_0x5000ec=devices[_0x64a27d]['ip'];if(!_0x1e8cb6)return{'error':_0x498dc3(0x1c6)};for(let _0x5568a6 of blacklist){if(_0x5568a6[_0x498dc3(0x1bb)]==_0x1e8cb6)return{'error':_0x498dc3(0x28f)};}let _0x172f90;try{_0x172f90=jwt[_0x498dc3(0x1b6)](_0x1e8cb6,secure[_0x498dc3(0x207)]+_0x64a27d);}catch{return{'error':_0x498dc3(0x2c8)};}if(!_0x172f90[_0x498dc3(0x1b0)](_0x498dc3(0x246))&&!_0x172f90[_0x498dc3(0x1b0)](_0x498dc3(0x232))||!_0x172f90[_0x498dc3(0x1b0)]('exp'))return{'error':_0x498dc3(0x27a)};if(!_0x172f90['hasOwnProperty'](_0x498dc3(0x232))&&_0x172f90[_0x498dc3(0x1b0)](_0x498dc3(0x246))){const {clientip:_0x53e07c}=_0x172f90;return _0x5000ec==_0x53e07c?{'success':_0x498dc3(0x2a3)}:{'error':_0x498dc3(0x1ff)};}else{if(_0x172f90[_0x498dc3(0x1b0)]('username')&&_0x172f90['hasOwnProperty'](_0x498dc3(0x246))){const {username:_0x100903,clientip:_0x20312d}=_0x172f90;return settings[_0x498dc3(0x254)]==_0x100903&&_0x5000ec==_0x20312d?{'success':_0x498dc3(0x2a3)}:{'error':_0x498dc3(0x316)};}}},generateLoginToken=_0x12539e=>{const _0x2abce6=_0x5ec28a;if(_0x12539e){const _0xd61d42=devices[_0x12539e]['ip'];return jwt[_0x2abce6(0x1e8)]({'username':settings[_0x2abce6(0x254)],'clientip':_0xd61d42},secure[_0x2abce6(0x207)]+_0x12539e,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x464f3e=>{const _0x2a2e5b=_0x5ec28a;if(_0x464f3e){const _0x1d767e=devices[_0x464f3e]['ip'];return jwt[_0x2a2e5b(0x1e8)]({'clientip':_0x1d767e},secure[_0x2a2e5b(0x207)]+_0x464f3e,{'expiresIn':devices[_0x464f3e][_0x2a2e5b(0x18d)][_0x2a2e5b(0x277)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x410043=>{const _0x266be5=_0x5ec28a;let _0x5546db=![];return devices[_0x410043]['telegramIpApproval']&&devices[_0x410043][_0x266be5(0x18d)][_0x266be5(0x277)]!='reject'&&(_0x5546db=devices[_0x410043][_0x266be5(0x18d)][_0x266be5(0x246)]==devices[_0x410043]['ip']&&new Date()[_0x266be5(0x24c)]()-devices[_0x410043]['telegramIpApproval'][_0x266be5(0x2e1)]<devices[_0x410043][_0x266be5(0x18d)][_0x266be5(0x277)]*0x3c*0x3e8),_0x5546db;},telegram2FaApproved=_0x245a1b=>{const _0x22aaae=_0x5ec28a;let _0x2e5934=![];return devices[_0x245a1b][_0x22aaae(0x1b8)]&&devices[_0x245a1b][_0x22aaae(0x1b8)]['expiry']!=_0x22aaae(0x187)&&(_0x2e5934=devices[_0x245a1b][_0x22aaae(0x1b8)]['clientip']==devices[_0x245a1b]['ip']&&new Date()[_0x22aaae(0x24c)]()-devices[_0x245a1b][_0x22aaae(0x1b8)][_0x22aaae(0x2e1)]<devices[_0x245a1b][_0x22aaae(0x1b8)][_0x22aaae(0x277)]*0x3c*0x3e8),_0x2e5934;},normalizeIP=_0x381f6a=>{const _0x15b793=_0x5ec28a;let _0x172d32=null,_0xe6554d=null;if(ipaddr[_0x15b793(0x2c1)](_0x381f6a)){const _0x490a9c=ipaddr[_0x15b793(0x266)](_0x381f6a);_0x490a9c['kind']()===_0x15b793(0x21e)?(_0x490a9c[_0x15b793(0x23c)]()&&(_0x172d32=_0x490a9c[_0x15b793(0x2d2)]()['toString']()),_0xe6554d=_0x490a9c[_0x15b793(0x197)]()):(_0x172d32=_0x490a9c['toString'](),_0xe6554d=_0x490a9c[_0x15b793(0x278)]()[_0x15b793(0x197)]());}return{'show':_0x172d32?_0x172d32:_0xe6554d,'store':_0xe6554d};};function _0x4469(){const _0x2d7b3e=['socket.io','Restarting\x20Bot\x20','address','initclient','Session\x20expired\x20for\x20user\x20...','DEFLATE','enabled','User\x20has\x20been\x20validated','place-order','_data','3000','zip/','login\x20token\x20valid','temporary\x20access\x20rejected','map','send','show','Notifications\x20enabled\x0a','2FA','login\x20required','portfolio','config/',')\x20\x20\x20|\x20Bot\x20','backupfile','Crypt','Idling\x20(','2FA\x20login\x20rejected','1000','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','reinstall-bb','conn','output-003.log','string','error','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','sendFile','disable','isValid','unlinkSync','compareSync','backup-full@','Starting\x20Balance\x20Bot\x20update','Unauthorized\x20attempt\x20to\x20log\x20out','slice','Invalid\x20authentication\x20token\x20(1)','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','started','Your\x20installation\x20is\x20already\x20up\x20to\x20date','3386BkwcyB','handshake','logged\x20out','args','2FA\x20required','util','toIPv4Address','config_orders','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','\x1b[36m','close','request','bot','temporary\x20access\x20not\x20allowed','***','/metrics\x20-\x20show\x20bot\x20performance\x0a','\x1b[33m','botmanager','login2fa_reject','all','timestamp','/start','ipc','Network\x20Interfaces:','orders','127.0.0.1','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20confirm\x20message','add','endsWith','sockets','2FA\x20login\x20required','size','restart_','/names\x20-\x20show\x20bot\x20names\x0a','stop','\x20(2)','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','from','debug','inlineKeyboard','enable','toggle_','portfolio_','getPortfolio','IPv4','tkn','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Yes','any','telegramEvents','number','rmSync','stopped','generateKeyPairAsync','exit','staging','getMinutes','getFullYear','bbvNew','binary','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Password\x20has\x20been\x20reset\x20to:\x20','/:bot/performance','output-000.log','tempaccess_5','get-backup-files','<b>Balance\x20Bot\x20Status:</b>\x0a','sha256','update','off_','listen','new-disabled','Invalid\x20username\x20or\x20IP\x20address','/upload-backup','once','update-bot','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','27925461hqrcrK','storeHeadless','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','status','use','headers','auto','************','editMessageReplyMarkup','https://api.ipify.org?format=json','store-configuration','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','startsWith','disconnect','get-logs','bbPassword','express-fileupload','bcryptjs','sort','-config.json','bot-','download','init','You\x20can\x20use\x20the\x20following\x20commands:\x0a','tempaccess_15','bb-config.json','telegram','hex','Unauthorized\x20attempt\x20to\x20download\x20','resetpw_yes','hashSync','-----------------------------------------------------------------------------------','::ffff:127.0.0.1','tempaccess_reject','manual','login\x20not\x20required','allow','reinstall','NTBA_FIX_319','(((.+)+)+)+$','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Starting\x20new\x20bot\x20|\x20Bot\x20','\x1b[35m','max','remoteAddress','storeConfiguration','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','names','sortBy','Restore\x20backup\x20file\x20','Password\x20reset\x20rejected','telegrammsg','split','sendMetricsTelegram','Telegram\x20error:','privateKey','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','15\x20min','getStartingBalances','decrypt','telegramToken','mode','toggle-bot-mode','writeFileSync','676905JcLDHC','yes','5857912Ozuqae','store-fiat','Alerts','messages','params','update_yes','reset-password','Unauthorized\x20attempt\x20to\x20get\x20messages','production','/download/:type','cancel-loading','apply','isDirectory','reload','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','\x20(1)','forEach','\x1b[34m','config_all','warning','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','[ip-address]','format','/off\x20-\x20stop\x20bot(s)\x0a','static','command','encryptedUuid','event',',\x20must\x20be\x20a\x204\x20digit\x20number','catch','internal','Unauthorized\x20attempt\x20to\x20update\x20bot','reset-history','delete-alerts','Restore\x20process\x20aborted','reinstall_yes','axios','output-001.log','Unauthorized\x20attempt\x20to\x20delete\x20bot','All','4326476ffWffN','length','reject','hybrid-crypto-js','2FA\x20login\x20token\x20generated','Error\x20removing\x20old\x20backup\x20files:','success','Login\x20rejected','telegramIpApproval','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','-results.json','.zip','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','store-headless','disabled','get-messages','password','temporaryAccessAllowed','toString','date-fns','new','Unauthorized\x20attempt\x20to\x20store\x20configuration','RSA','settings.','update-bb','apiPassword','Disabled\x20Bot\x20','function','config','latestversion','randomBytes','join','111490FfHRKQ','logout','telegramEnabled','restart','path','botID','bb-secure.json','bb/','Orders','timeshift','getMonth','hasOwnProperty','constructor','emit','pidExpireLogin','Logged\x20out\x20user\x20...','version','verify','-events.json','telegram2FaApproval','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','bots','token','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','secure','name','telegramChatId','toggle','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','createWriteStream','SIGTERM','range','No\x20authentication\x20token','replace','assign','Markdown','store','full','<b>Telegram\x20Bot\x20Status:</b>\x0a','uuid','Logged\x20in\x20user\x20...','lastmsgemitted','value','simple','Restore\x20process\x20confirmed','cancelLoading','Allow\x20login\x20from\x20IP\x20address\x20','\x20|\x20user:\x20...','graphql-request','includes','crypto','existsSync','Bot\x20Mgr\x20>\x20','mkdirSync','copyFileSync','text','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','logs','0.0.0','log','socket','userid','user','backup-full','launch','lastmsgtelegram','sign','notification','confirm-message','\x20to\x20','write','alerts','reason','connected','test','connection','uuid-random','live','temporary\x20access\x20timeout','All\x20bots\x20running\x20right\x20now','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','track','resetpw_no',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','files','padStart','RSA-OAEP','express','build2','Invalid\x20IP\x20address','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','message','botname','$1_$2_$3','node-zip','telegramUsername',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','secret','argv','Enabled\x20Bot\x20','Notifications\x20enabled','randomFillSync','set','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','getSeconds','Starting\x20#RED#Balance\x20Bot\x20v','headless','chat','Telegraf\x20error:','restore_no','file','Error\x20while\x20deleting\x20config\x20files:\x20','get-starting-balances','fork','temp/','stringify','Unauthorized\x20attempt\x20to\x20update\x20settings','/:bot/configuration','bb-settings.json','readdirSync','ipv6','*$1*','whitelistEnabled','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','help','exchange','bot.js','readFileSync','/update\x20-\x20update\x20Balance\x20Bot\x0a','HTML','environment','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','settings','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','/:bot','pidRefreshToken','Starting\x20Balance\x20Bot\x20reinstallation','Bot\x20','blacklist','username','backup','remove','auth','family','updatebotmanager','index.html','/restart\x20-\x20restart\x20bot(s)\x0a','backup/','906YHatVj','isIPv4MappedAddress','generate','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','server','\x20only\x0a','invalid\x20credentials','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','clientip','logs/','find','sendPortfolioTelegram','#RES#\x20if\x20running\x20on\x20server','4720296AwRXXD','getTime','publicKey','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','\x1b[31m','type','match','port','bbUsername','clients','Unauthorized\x20attempt\x20to\x20show\x20configuration','search','\x1b[0m','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','get','/:bot/portfolio','Temporary\x20access\x20rejected','getDate','/output-000.log','All\x20bots','backup-full.zip','config_alerts','action','showname','/disable\x20-\x20disable\x20notifications\x0a','callback','parse','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','reply','emitHistory','build','private','onepagemode','f2aRequired','/:bot/coins','Unauthorized\x20login\x20attempt\x20(timeout)','exec','button','reinstall_no','toggleBotMode','restore_yes','loginRequired','\x20>\x20','expiry','toIPv4MappedAddress','access','Invalid\x20authentication\x20token\x20(2)','deleteHistoryAlerts','off','login','apiKey','getHours','\x20|\x20','mixpanel','Backup\x20file\x20unzipped\x20and\x20stored','accept','temporary\x20token\x20generated','Login\x20accepted','version.json','(staging)','Setting\x20access:\x20','SIGINT','uncaughtException','entries','\x20|\x20client:\x20...','inherit','=>\x20Go\x20to\x20#CYA#http://','Token\x20blacklisted','6cRpLiv','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','statSync','defaults','login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','-performance.json','push','kill','keys','api-eu.mixpanel.com','bbvReceive'];_0x4469=function(){return _0x2d7b3e;};return _0x4469();}function formatDate(_0x3612e9){const _0x9a047d=_0x5ec28a;return _0x3612e9['getFullYear']()+'/'+(_0x3612e9[_0x9a047d(0x1af)]()+0x1)['toString']()[_0x9a047d(0x1fb)](0x2,'0')+'/'+_0x3612e9['getDate']()[_0x9a047d(0x197)]()[_0x9a047d(0x1fb)](0x2,'0')+'\x20'+_0x3612e9[_0x9a047d(0x27f)]()[_0x9a047d(0x197)]()[_0x9a047d(0x1fb)](0x2,'0')+':'+_0x3612e9['getMinutes']()[_0x9a047d(0x197)]()[_0x9a047d(0x1fb)](0x2,'0')+':'+_0x3612e9['getSeconds']()['toString']()['padStart'](0x2,'0');}function sleep(_0x55742b){return new Promise(_0x46e600=>setTimeout(_0x46e600,_0x55742b));}