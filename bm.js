const _0x430866=_0x5c25;(function(_0x357426,_0x2104b2){const _0xd2c066=_0x5c25,_0x25a069=_0x357426();while(!![]){try{const _0x982bca=-parseInt(_0xd2c066(0x255))/0x1+parseInt(_0xd2c066(0x173))/0x2*(-parseInt(_0xd2c066(0x244))/0x3)+-parseInt(_0xd2c066(0x1fe))/0x4*(-parseInt(_0xd2c066(0x240))/0x5)+parseInt(_0xd2c066(0x267))/0x6*(parseInt(_0xd2c066(0x13a))/0x7)+-parseInt(_0xd2c066(0xe0))/0x8+-parseInt(_0xd2c066(0x27a))/0x9+parseInt(_0xd2c066(0x1c4))/0xa;if(_0x982bca===_0x2104b2)break;else _0x25a069['push'](_0x25a069['shift']());}catch(_0x6921d2){_0x25a069['push'](_0x25a069['shift']());}}}(_0x32b2,0x1b4f5));const _0x1212c3=function(){let _0xd02239=!![];return function(_0x4c9112,_0x362530){const _0x3f7c2e=_0xd02239?function(){const _0x40558f=_0x5c25;if(_0x362530){const _0x26cd6d=_0x362530[_0x40558f(0x1b1)](_0x4c9112,arguments);return _0x362530=null,_0x26cd6d;}}:function(){};return _0xd02239=![],_0x3f7c2e;};}(),_0x1738ac=_0x1212c3(this,function(){const _0x9aefeb=_0x5c25;return _0x1738ac[_0x9aefeb(0x20e)]()[_0x9aefeb(0x223)]('(((.+)+)+)+$')[_0x9aefeb(0x20e)]()['constructor'](_0x1738ac)[_0x9aefeb(0x223)]('(((.+)+)+)+$');});_0x1738ac();'use strict';process[_0x430866(0x197)][_0x430866(0x15b)]=0x1;const childProcess=require(_0x430866(0x144)),fs=require('fs'),fns=require(_0x430866(0x259)),low=require('lowdb'),FileSync=require(_0x430866(0x21f)),path=require(_0x430866(0x177)),crypto=require(_0x430866(0x262)),Crypt=require(_0x430866(0x160))[_0x430866(0x1d3)],RSA=require('hybrid-crypto-js')[_0x430866(0x14e)],bcrypt=require(_0x430866(0x111)),jwt=require(_0x430866(0x228)),ipaddr=require(_0x430866(0x277)),argv=require(_0x430866(0x20a))(process[_0x430866(0x208)][_0x430866(0x1f5)](0x2))[_0x430866(0x208)],uuidRandom=require(_0x430866(0xc8)),TelegramBot=require(_0x430866(0x192)),Mixpanel=require(_0x430866(0x1f1)),axios=require(_0x430866(0x180)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x430866(0x101)),fileUpload=require(_0x430866(0x166)),{networkInterfaces}=require('os'),PORT=argv[_0x430866(0x15d)]||_0x430866(0x14a),pattern=/^[0-9]{2,4}$/;!pattern[_0x430866(0x225)](PORT)&&(console[_0x430866(0x108)](_0x430866(0x23a)+PORT+_0x430866(0x1d6)),process[_0x430866(0x129)](0x1));const HOST=argv[_0x430866(0x263)]||null,userID=argv[_0x430866(0x200)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x430866(0x10d)],environment=require(_0x430866(0x282))['environment']||_0x430866(0xe9);let bbpath=_0x430866(0xee),bbpath2='';const botfile='bot.js',configfile=_0x430866(0x213),settingsfile=_0x430866(0x1c1),securefile=_0x430866(0x10c),maxBackups=0xa;let validInstallation=!![];!fs[_0x430866(0x22e)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x430866(0x193)),configpath=userID?bbpath+_0x430866(0x104)+userID+'/':bbpath+_0x430866(0x104),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x430866(0x22a)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x430866(0x139)+userID+'/':bbpath+_0x430866(0x139),loggerfile=fs[_0x430866(0x1ad)](logspath+_0x430866(0x283),{'flags':'a'}),temppath=userID?bbpath+_0x430866(0xe3)+userID+'/':bbpath+_0x430866(0xe3);!fs['existsSync'](configpath)&&fs[_0x430866(0xb8)](configpath);!fs[_0x430866(0x22e)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x430866(0x22e)](zippath)&&fs[_0x430866(0xb8)](zippath);!fs[_0x430866(0x22e)](temppath)&&fs[_0x430866(0xb8)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x430866(0x140),'onepagemode':![]}})[_0x430866(0x115)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x430866(0x206)]({'secure':{},'blacklist':[]})[_0x430866(0x115)]();let crypt=new Crypt({'md':_0x430866(0x124),'rsaStandard':_0x430866(0x1b5)});const saltRounds=0xa,mixpanel=Mixpanel[_0x430866(0x11b)](_0x430866(0xea),{'host':_0x430866(0x1f9)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x430866(0xec)]&&settings[_0x430866(0xec)]!=''&&settings[_0x430866(0x293)]&&settings[_0x430866(0x293)]!='')initTelegram();const parseColor=(_0x1d044d,_0x1cea4a)=>{const _0x3bb510=_0x430866,_0x5974f0=/#[A-Z]{3}#/g;if(typeof _0x1d044d==_0x3bb510(0x1c2)){!_0x1cea4a?_0x1d044d=_0x1d044d[_0x3bb510(0x20f)](_0x5974f0,''):(_0x1d044d=_0x1d044d[_0x3bb510(0x20f)](/#BLU#/g,'\x1b[34m'),_0x1d044d=_0x1d044d['replace'](/#RED#/g,_0x3bb510(0x164)),_0x1d044d=_0x1d044d[_0x3bb510(0x20f)](/#YEL#/g,'\x1b[33m'),_0x1d044d=_0x1d044d['replace'](/#MAG#/g,_0x3bb510(0x276)),_0x1d044d=_0x1d044d['replace'](/#CYA#/g,_0x3bb510(0xcb)),_0x1d044d=_0x1d044d['replace'](/#RES#/g,_0x3bb510(0x210)));;}return _0x1d044d;},logger={'screen':_0xb98f90=>{console['log'](parseColor(_0xb98f90,!![]));},'simple':_0x30eb92=>{const _0xdcf827=_0x430866;console[_0xdcf827(0x108)](parseColor(_0x30eb92,!![])),loggerfile[_0xdcf827(0x115)](util[_0xdcf827(0x1c8)](parseColor(_0x30eb92,![]))+'\x0a');},'full':async _0x304934=>{const _0x697000=_0x430866,_0x5cce51=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x304934;console['log'](parseColor(_0x5cce51,!![])),loggerfile[_0x697000(0x115)](util[_0x697000(0x1c8)](parseColor(_0x5cce51,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x697000(0x182)]!=_0x697000(0x16f))await tgBot[_0x697000(0x1e0)](settings[_0x697000(0x158)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x304934,![]))['catch'](_0x5ba9ed=>{telegramError(_0x5ba9ed);});},'debug':async(_0x2e864d,_0x339254='')=>{const _0x3c7983=_0x430866,_0x4fa92f=getTimeStamp()+_0x3c7983(0xce)+_0x2e864d;if(debugging)console[_0x3c7983(0x108)](parseColor(_0x4fa92f,!![]));loggerfile['write'](util[_0x3c7983(0x1c8)](parseColor(_0x4fa92f,![]))+'\x0a');if(_0x339254){if(debugging)console[_0x3c7983(0x108)](_0x339254);loggerfile[_0x3c7983(0x115)](util[_0x3c7983(0x1c8)](_0x339254)+'\x0a');}}};process['on'](_0x430866(0x28d),function(_0x2dca39){const _0x9bbc9d=_0x430866;logger[_0x9bbc9d(0x27b)](_0x2dca39);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x430866(0x1c5))[_0x430866(0x1b3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x430866(0x149)),app=express(),http=require(_0x430866(0x21e))['createServer'](app);app[_0x430866(0x20c)](fileUpload({'useTempFiles':!![]})),app[_0x430866(0x246)]('/download/:type',async(_0x5ec86e,_0x49a6fc)=>{const _0x57e046=_0x430866,_0x8a5ce9=_0x5ec86e[_0x57e046(0x28c)][_0x57e046(0x128)],_0x3f5f97=getClientsWithBotID(_0x57e046(0x11e)),_0x5c3bcf=_0x5ec86e['headers'][_0x57e046(0x1ec)],_0x5b4046=timelyDecrypt(_0x5c3bcf,![]),_0x2db958=_0x3f5f97[_0x57e046(0xda)](_0x2cf0e0=>_0x2cf0e0['uuid']==_0x5b4046);if(_0x2db958){const _0x3ca480=normalizeIP(_0x5ec86e['socket'][_0x57e046(0x218)])[_0x57e046(0x243)],_0x3412ed=_0x5ec86e['headers']['tkn'];if(validateAccess(_0x3412ed,_0x5b4046,_0x3ca480)['allow'])_0x8a5ce9==_0x57e046(0x1f0)&&await backupConfigFiles(),await zipFiles(_0x8a5ce9),_0x49a6fc['download'](zippath+(_0x8a5ce9+_0x57e046(0xc4)),_0x4d3f47=>{const _0x3800e1=_0x57e046;_0x4d3f47&&(logger[_0x3800e1(0x1a2)]('Failed\x20to\x20download\x20'+_0x8a5ce9),logger[_0x3800e1(0x27b)](_0x4d3f47));});else logger[_0x57e046(0x1a2)](_0x57e046(0x181)+_0x8a5ce9+_0x57e046(0x19e));}else logger['full'](_0x57e046(0x181)+_0x8a5ce9+_0x57e046(0x157));}),app['post']('/upload-backup',async(_0x40d867,_0x29ab51)=>{const _0x2a2075=_0x430866,_0x867f11=getClientsWithBotID(_0x2a2075(0x11e)),_0x5721ed=_0x40d867[_0x2a2075(0xf4)][_0x2a2075(0x1ec)],_0x4988a6=timelyDecrypt(_0x5721ed,![]),_0x3bf39f=_0x867f11[_0x2a2075(0xda)](_0x143232=>_0x143232[_0x2a2075(0x1ec)]==_0x4988a6);logger[_0x2a2075(0x288)](_0x2a2075(0x190));if(_0x3bf39f){const _0x451a7a=normalizeIP(_0x40d867[_0x2a2075(0x18d)][_0x2a2075(0x218)])[_0x2a2075(0x243)],_0x5a640f=_0x40d867[_0x2a2075(0xf4)][_0x2a2075(0x2a1)];if(validateAccess(_0x5a640f,_0x4988a6,_0x451a7a)[_0x2a2075(0x12e)]){if(_0x40d867[_0x2a2075(0x150)]){const _0x1d1e54=_0x40d867[_0x2a2075(0x150)][_0x2a2075(0x222)];await _0x1d1e54['mv'](temppath+_0x1d1e54[_0x2a2075(0x162)]),_0x29ab51[_0x2a2075(0x151)]({'status':!![],'message':_0x2a2075(0x22b)});const _0x16fae5=getBotsWithMode();_0x16fae5[_0x2a2075(0x185)]>0x0?confirmRestore(temppath,_0x1d1e54[_0x2a2075(0x162)]):unzipFile(temppath,_0x1d1e54[_0x2a2075(0x162)]);}}else logger[_0x2a2075(0x1a2)](_0x2a2075(0x17c));}else logger[_0x2a2075(0x1a2)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x430866(0x20c)](express[_0x430866(0xfd)](path['join'](__dirname,bbpath2,'build2'))),app[_0x430866(0x20c)](express[_0x430866(0xfd)](path[_0x430866(0x12a)](__dirname,bbpath2,_0x430866(0x2a0)))),app[_0x430866(0x246)]('/',function(_0x5ec8ed,_0x39c335){const _0x15b7a9=_0x430866;_0x39c335[_0x15b7a9(0x24a)](path[_0x15b7a9(0x12a)](__dirname,bbpath2,_0x15b7a9(0x1d1),'index.html'));}),app[_0x430866(0x246)](_0x430866(0x1ed),function(_0x2a04df,_0x3198b0){const _0x2c63c6=_0x430866;_0x3198b0['sendFile'](path['join'](__dirname,bbpath2,_0x2c63c6(0x2a0),'index.html'));}),app['get'](_0x430866(0x125),(_0x39b894,_0x31d95f)=>{const _0x5a218f=_0x430866;_0x31d95f[_0x5a218f(0x24a)](path[_0x5a218f(0x12a)](__dirname,bbpath2,_0x5a218f(0x2a0),_0x5a218f(0x1e8)));}),app[_0x430866(0x246)](_0x430866(0x205),(_0x18caee,_0x8351bc)=>{const _0x53f79a=_0x430866;_0x8351bc['sendFile'](path[_0x53f79a(0x12a)](__dirname,bbpath2,_0x53f79a(0x2a0),_0x53f79a(0x1e8)));}),app[_0x430866(0x246)](_0x430866(0x11c),(_0x4d42a3,_0x52d3e3)=>{const _0x39ada7=_0x430866;_0x52d3e3[_0x39ada7(0x24a)](path[_0x39ada7(0x12a)](__dirname,bbpath2,_0x39ada7(0x2a0),_0x39ada7(0x1e8)));}),app[_0x430866(0x246)]('/:bot/history',(_0x4b1705,_0x2210fd)=>{const _0x1c4e11=_0x430866;_0x2210fd[_0x1c4e11(0x24a)](path['join'](__dirname,bbpath2,_0x1c4e11(0x2a0),'index.html'));}),app[_0x430866(0x246)]('/:bot/configuration',(_0x246589,_0x1ebf01)=>{const _0x70778=_0x430866;_0x1ebf01['sendFile'](path[_0x70778(0x12a)](__dirname,bbpath2,_0x70778(0x2a0),_0x70778(0x1e8)));}),app['get'](_0x430866(0x11a),(_0x186805,_0x5abf83)=>{const _0x1d3417=_0x430866;_0x5abf83['sendFile'](path[_0x1d3417(0x12a)](__dirname,bbpath2,_0x1d3417(0x2a0),_0x1d3417(0x1e8)));});if(HOST)http[_0x430866(0xdc)](PORT,HOST);else http['listen'](PORT);const io=require(_0x430866(0x254))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x3c5f9b=_0x430866;let _0x1e6db6=_0x3c5f9b(0x220);const _0x55857b=networkInterfaces(),_0x1b1456={};for(const _0x462ea5 of Object[_0x3c5f9b(0x195)](_0x55857b)){for(const _0x3b3a03 of _0x55857b[_0x462ea5]){if((_0x3b3a03[_0x3c5f9b(0xd2)]==_0x3c5f9b(0x28e)||_0x3b3a03[_0x3c5f9b(0xd2)]==0x4)&&!_0x3b3a03[_0x3c5f9b(0x1e7)]){const _0x20a58c=ipaddr[_0x3c5f9b(0x169)](_0x3b3a03[_0x3c5f9b(0x219)])[_0x3c5f9b(0x20d)]();_0x20a58c!='private'&&(!_0x1b1456[_0x462ea5]&&(_0x1b1456[_0x462ea5]=[]),_0x1b1456[_0x462ea5][_0x3c5f9b(0x269)](_0x3b3a03[_0x3c5f9b(0x219)]),_0x1e6db6=_0x3b3a03[_0x3c5f9b(0x219)]);}}}return{'serverip':_0x1e6db6,'netinterfaces':_0x1b1456};}async function startServer(){const _0x81de97=_0x430866,{serverip:_0x247266,netinterfaces:_0x23e9b6}=getServerIP();logger['simple'](''),logger[_0x81de97(0x27b)]('-----------------------------------------------------------------------------------'),await logger[_0x81de97(0x1a2)](_0x81de97(0xc7)+serverversion+_0x81de97(0x202)+(environment==_0x81de97(0x281)?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x81de97(0x251))+(_0x81de97(0x10f)+_0x247266+':'+PORT+_0x81de97(0x272))),logger[_0x81de97(0x27b)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x4d1d33 of config){if(_0x4d1d33[_0x81de97(0x1bc)]==_0x81de97(0x1ae)||_0x4d1d33['status']=='new')await logger[_0x81de97(0x1a2)](_0x81de97(0x188)+_0x4d1d33[_0x81de97(0x27e)]+'\x20|\x20'+_0x4d1d33[_0x81de97(0xcc)]),startBot([_0x4d1d33[_0x81de97(0x27e)],userID],{'cwd':bbpath},function(_0x5d5050){const _0x481de6=_0x81de97;if(_0x5d5050)logger[_0x481de6(0x1a2)](_0x5d5050);});else(_0x4d1d33[_0x81de97(0x1bc)]=='disabled'||_0x4d1d33[_0x81de97(0x1bc)]==_0x81de97(0x10b))&&await logger['full']('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x4d1d33[_0x81de97(0x27e)]+_0x81de97(0x1ca)+_0x4d1d33['botname']);}else!newBot&&logger[_0x81de97(0x27b)](_0x81de97(0x179));if(newBot)addBot();logger[_0x81de97(0x27b)](_0x81de97(0x239)),logger[_0x81de97(0x27b)](''),await logger[_0x81de97(0x288)]('Node.js\x20v'+nodeversion),await logger['debug']('Network\x20Interfaces:',_0x23e9b6);}function startSocket(){const _0x2e815d=_0x430866;io['on'](_0x2e815d(0x199),_0x4af4ef=>{const _0x14ea6c=_0x2e815d;let _0x517ddf,_0x549405,_0x42a94e,_0x5897e1,_0x8ad5bf;const _0xb6d93c=_0x4af4ef['handshake'][_0x14ea6c(0xf4)][_0x14ea6c(0x26f)];_0x549405=_0xb6d93c[_0x14ea6c(0x14d)](/bot[0-9]{3}/);if(_0x549405)_0x42a94e=_0x549405[0x0]['match'](/[0-9]{3}/);if(_0x42a94e)_0x517ddf=_0x42a94e[0x0];else _0x517ddf='botmanager';const _0x4f0e2e=_0x4af4ef[_0x14ea6c(0x16b)]['auth'][_0x14ea6c(0x16e)];if(!_0x4f0e2e)_0x4af4ef[_0x14ea6c(0x12f)](_0x14ea6c(0x1bc),{'publicKey':secure[_0x14ea6c(0x226)]});else{_0x5897e1=timelyDecrypt(_0x4f0e2e,![]);if(!_0x5897e1)_0x4af4ef[_0x14ea6c(0x12f)](_0x14ea6c(0x1bc),{'publicKey':secure[_0x14ea6c(0x226)]});else{_0x8ad5bf=normalizeIP(_0x4af4ef[_0x14ea6c(0x1cd)][_0x14ea6c(0x218)])[_0x14ea6c(0x243)];if(!devices[_0x5897e1])devices[_0x5897e1]={'uuid':_0x5897e1,'access':{'token':null}};devices[_0x5897e1]['ip']=_0x8ad5bf;const _0x527dc1=addClient(_0x4af4ef['id'],_0x5897e1,_0x517ddf);setAccess(_0x527dc1),emitMessages(),_0x4af4ef['on'](_0x14ea6c(0x203),_0x2e3e07=>{const _0x57badf=_0x14ea6c,_0x582eac=timelyDecrypt(_0x2e3e07[_0x57badf(0x1bd)]);if(_0x582eac){_0x2e3e07={'username':_0x2e3e07['username'],'password':_0x582eac},devices[_0x5897e1][_0x57badf(0xdb)]=validateCredentials(_0x2e3e07,_0x5897e1);if(devices[_0x5897e1][_0x57badf(0xdb)]['allow']==![]&&devices[_0x5897e1][_0x57badf(0xdb)]['reason']=='2FA\x20login\x20required')_0x4af4ef['emit'](_0x57badf(0x1bc),{'access':devices[_0x5897e1][_0x57badf(0xdb)]}),loginAccess2FA(_0x5897e1,_0x8ad5bf);else{if(devices[_0x5897e1][_0x57badf(0xdb)][_0x57badf(0x12e)]==![]&&devices[_0x5897e1][_0x57badf(0xdb)][_0x57badf(0x1e6)]==_0x57badf(0x24b))_0x4af4ef['emit']('status',{'access':devices[_0x5897e1][_0x57badf(0xdb)]});else devices[_0x5897e1][_0x57badf(0xdb)][_0x57badf(0x12e)]&&devices[_0x5897e1][_0x57badf(0xdb)][_0x57badf(0x1e6)]==_0x57badf(0x1cc)&&(getClientsWithUuid(_0x5897e1)['forEach'](_0x22e992=>{setAccess(_0x22e992);}),logger[_0x57badf(0x288)](_0x57badf(0xe6)+_0x5897e1[_0x57badf(0x1f5)](-0x8)),setTokenRefresh(_0x5897e1),setSessionTimeout(_0x57badf(0x203),_0x5897e1));}}else logger[_0x57badf(0x1a2)](_0x57badf(0x261));}),_0x4af4ef['on'](_0x14ea6c(0x15f),()=>{resetPassword();}),_0x4af4ef['on'](_0x14ea6c(0x14b),_0x28a109=>{removeClient(_0x4af4ef['id']);}),_0x517ddf=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x350e57){const _0x5eefc6=_0x430866;if(_0x350e57!=_0x5eefc6(0x11e)&&config['apiKey']!=''){if(pid[_0x350e57])pid[_0x350e57]['send']({'function':_0x5eefc6(0x132),'args':null});}_0x350e57!='botmanager'&&broadcastToBots('bots',JSON[_0x5eefc6(0x186)](config));}function reloadBotManager(){const _0x3ae67f=_0x430866;getClientsWithBotID(_0x3ae67f(0x11e))['forEach'](_0x289700=>{const _0x4759be=_0x3ae67f;getSocket(_0x289700['id'])['emit'](_0x4759be(0x1bc),{'access':{'allow':![],'reason':_0x4759be(0x1ce),'token':null}});});}function getSocket(_0x291f21){const _0x225148=_0x430866;return io['sockets'][_0x225148(0x159)][_0x225148(0x246)](_0x291f21);}function setAccess(_0x3e9d96){const _0xaa100=_0x430866,_0x5d8496=getSocket(_0x3e9d96['id']),_0x26d2d6=_0x3e9d96[_0xaa100(0x1ec)],_0x3f84f5=_0x3e9d96[_0xaa100(0x25f)];devices[_0x26d2d6][_0xaa100(0xdb)]=validateAccess(devices[_0x26d2d6][_0xaa100(0xdb)][_0xaa100(0x237)],_0x26d2d6),logger[_0xaa100(0x288)](_0xaa100(0xfe)+devices[_0x26d2d6][_0xaa100(0xdb)]['reason']+_0xaa100(0x16d)+_0x3e9d96['id'][_0xaa100(0x1f5)](-0x8)+'\x20|\x20user:\x20...'+_0x26d2d6[_0xaa100(0x1f5)](-0x8)),_0x5d8496[_0xaa100(0x12a)](_0x26d2d6);if(devices[_0x26d2d6][_0xaa100(0xdb)][_0xaa100(0x12e)]){_0x5d8496[_0xaa100(0x12a)](_0x3f84f5);if(_0x3f84f5==_0xaa100(0x11e))initializeSocketBotManager(_0x5d8496);else initializeSocketBot(_0x5d8496);initClient(_0x3f84f5);}devices[_0x26d2d6][_0xaa100(0xdb)]['token']&&devices[_0x26d2d6][_0xaa100(0xdb)][_0xaa100(0x1e6)]==_0xaa100(0x121)&&setSessionTimeout(_0xaa100(0xf9),_0x26d2d6),devices[_0x26d2d6]['access'][_0xaa100(0x237)]&&devices[_0x26d2d6][_0xaa100(0xdb)][_0xaa100(0x1e6)]==_0xaa100(0x1b9)&&setSessionTimeout('login',_0x26d2d6),_0x5d8496[_0xaa100(0x12f)]('status',{'status':_0x3e9d96['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x26d2d6]['access'],'externalip':devices[_0x26d2d6]['ip'],'publicKey':secure[_0xaa100(0x226)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x26d2d6][_0xaa100(0xdb)]['allow']==![]&&devices[_0x26d2d6][_0xaa100(0xdb)][_0xaa100(0x1e6)]=='2FA\x20required'&&temporaryAccess2FA(_0x26d2d6,devices[_0x26d2d6]['ip']);}function setSessionTimeout(_0x577dcf,_0x767faa){const _0x454772=_0x430866;let _0x5ec0e3;if(_0x577dcf==_0x454772(0x203))_0x5ec0e3=loginExpiry*0x3c*0x3e8;else _0x5ec0e3=devices[_0x767faa][_0x454772(0x294)][_0x454772(0x1dd)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x767faa][_0x454772(0x294)][_0x454772(0xc5)]);if(devices[_0x767faa][_0x454772(0x120)])clearTimeout(devices[_0x767faa]['pidExpireLogin']);devices[_0x767faa][_0x454772(0x120)]=setTimeout(()=>{const _0x1ca05d=_0x454772;if(devices[_0x767faa]['pidRefreshToken'])clearTimeout(devices[_0x767faa][_0x1ca05d(0x25b)]);removeSocketListeners(_0x767faa),addBlacklist(_0x767faa),devices[_0x767faa][_0x1ca05d(0x294)]=null,devices[_0x767faa]['telegram2FaApproval']=null,devices[_0x767faa][_0x1ca05d(0xdb)][_0x1ca05d(0x237)]=null,logger['debug'](_0x1ca05d(0xde)+_0x767faa[_0x1ca05d(0x1f5)](-0x8)),devices[_0x767faa][_0x1ca05d(0xdb)]=validateAccess(devices[_0x767faa]['access'][_0x1ca05d(0x237)],_0x767faa),!(devices[_0x767faa][_0x1ca05d(0xdb)]['allow']&&devices[_0x767faa]['access'][_0x1ca05d(0x1e6)]=='login\x20not\x20required')&&(_0x577dcf==_0x1ca05d(0x203)?io['to'](_0x767faa)[_0x1ca05d(0x12f)]('status',{'access':{'allow':![],'reason':_0x1ca05d(0xbd),'token':null}}):io['to'](_0x767faa)[_0x1ca05d(0x12f)](_0x1ca05d(0x1bc),{'access':{'allow':![],'reason':_0x1ca05d(0x146),'token':null}})),devices[_0x767faa][_0x1ca05d(0xdb)]['token']=null;},_0x5ec0e3);}function _0x5c25(_0x48949e,_0x57108d){const _0x2e9fba=_0x32b2();return _0x5c25=function(_0x1738ac,_0x1212c3){_0x1738ac=_0x1738ac-0xb7;let _0x32b2c5=_0x2e9fba[_0x1738ac];return _0x32b2c5;},_0x5c25(_0x48949e,_0x57108d);}function setTokenRefresh(_0xf6ee9c){const _0x471adf=_0x430866;if(devices[_0xf6ee9c]['pidRefreshToken'])clearTimeout(devices[_0xf6ee9c][_0x471adf(0x25b)]);devices[_0xf6ee9c][_0x471adf(0x25b)]=setTimeout(()=>{const _0x3e0c15=_0x471adf;getClientsWithUuid(_0xf6ee9c)[_0x3e0c15(0x185)]!=0x0?(devices[_0xf6ee9c]['access']=refreshToken(_0xf6ee9c),io['to'](_0xf6ee9c)[_0x3e0c15(0x12f)]('status',{'status':_0x3e0c15(0xbb),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xf6ee9c][_0x3e0c15(0xdb)],'externalip':devices[_0xf6ee9c]['ip'],'publicKey':secure[_0x3e0c15(0x226)],'validInstallation':validInstallation}),setTokenRefresh(_0xf6ee9c)):clearTimeout(devices[_0xf6ee9c][_0x3e0c15(0x25b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4deee5){const _0x446c1a=_0x430866,_0x4a375f=getClient(_0x4deee5['id'])['uuid'];_0x4deee5[_0x446c1a(0x12f)](_0x446c1a(0x1cf),config),_0x4deee5[_0x446c1a(0x12f)](_0x446c1a(0x1a9),cleanSettings()),_0x4deee5['on'](_0x446c1a(0xc1),_0x40afdf=>{const _0x2e1059=_0x446c1a;if(validateAccess(_0x40afdf,_0x4a375f)[_0x2e1059(0x12e)])addBot();else logger[_0x2e1059(0x1a2)](_0x2e1059(0x102));}),_0x4deee5['on'](_0x446c1a(0xe4),(_0x33628b,_0x5178a9)=>{const _0x442a84=_0x446c1a;if(validateAccess(_0x5178a9,_0x4a375f)[_0x442a84(0x12e)])toggleBot(_0x33628b['botID'],_0x33628b[_0x442a84(0x1bc)],_0x33628b[_0x442a84(0xe2)]);else logger[_0x442a84(0x1a2)](_0x442a84(0x230));}),_0x4deee5['on']('toggle-bot-mode',(_0x30b416,_0x1c4d5e)=>{const _0x40749b=_0x446c1a;if(validateAccess(_0x1c4d5e,_0x4a375f)['allow'])toggleBotMode(_0x30b416);else logger['full'](_0x40749b(0x230));}),_0x4deee5['on'](_0x446c1a(0x17a),(_0x517b99,_0xc3bbd3)=>{const _0x5c4a87=_0x446c1a;if(validateAccess(_0xc3bbd3,_0x4a375f)[_0x5c4a87(0x12e)])deleteBot(_0x517b99);else logger['full'](_0x5c4a87(0xfc));}),_0x4deee5['on'](_0x446c1a(0x247),(_0x54b917,_0x50bb5d)=>{const _0x4ba05b=_0x446c1a;if(validateAccess(_0x50bb5d,_0x4a375f)['allow'])storeSettings(_0x54b917,!![]);else logger['full'](_0x4ba05b(0x249));}),_0x4deee5['on'](_0x446c1a(0xc9),_0x6124fd=>{const _0x2a911a=_0x446c1a;if(validateAccess(_0x6124fd,_0x4a375f)[_0x2a911a(0x12e)])updateBB('update');else logger[_0x2a911a(0x1a2)](_0x2a911a(0x12d));}),_0x4deee5['on']('reinstall-bb',_0x3d6be9=>{const _0x3b074f=_0x446c1a;if(validateAccess(_0x3d6be9,_0x4a375f)[_0x3b074f(0x12e)])updateBB(_0x3b074f(0x1b7));else logger[_0x3b074f(0x1a2)](_0x3b074f(0xd9));}),_0x4deee5['on'](_0x446c1a(0x17f),_0x58a247=>{const _0x1c3bb7=_0x446c1a;if(validateAccess(_0x58a247,_0x4a375f)[_0x1c3bb7(0x12e)]){const _0x3a63e4=getClient(_0x4deee5['id']);if(_0x3a63e4)getBackupFiles(_0x3a63e4[_0x1c3bb7(0x1ec)]);else logger[_0x1c3bb7(0x1a2)](_0x1c3bb7(0xc3));}else logger[_0x1c3bb7(0x1a2)](_0x1c3bb7(0x1ff));}),_0x4deee5['on']('restore-backup-file',(_0x57467c,_0xb37571)=>{const _0x21f1fb=_0x446c1a;if(validateAccess(_0xb37571,_0x4a375f)[_0x21f1fb(0x12e)])restoreBackupFile(_0x57467c);else logger[_0x21f1fb(0x1a2)](_0x21f1fb(0x1ea));}),_0x4deee5['on'](_0x446c1a(0x1d8),_0x3bba13=>{if(validateAccess(_0x3bba13,_0x4a375f)['allow'])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4deee5['on'](_0x446c1a(0x271),(_0x595487,_0xcba451)=>{const _0x562b7a=_0x446c1a;if(validateAccess(_0xcba451,_0x4a375f)[_0x562b7a(0x12e)])confirmMessage(_0x595487);else logger['full'](_0x562b7a(0xc6));}),_0x4deee5['on'](_0x446c1a(0x174),_0x22dcdc=>{const _0x2fa63b=_0x446c1a;if(validateAccess(_0x22dcdc,_0x4a375f)[_0x2fa63b(0x12e)]){if(devices[_0x4a375f][_0x2fa63b(0x25b)])clearTimeout(devices[_0x4a375f][_0x2fa63b(0x25b)]);if(devices[_0x4a375f][_0x2fa63b(0x120)])clearTimeout(devices[_0x4a375f][_0x2fa63b(0x120)]);removeSocketListeners(getClient(_0x4deee5['id'])[_0x2fa63b(0x1ec)]),addBlacklist(_0x4a375f),devices[_0x4a375f]['telegramIpApproval']=null,devices[_0x4a375f][_0x2fa63b(0x109)]=null,devices[_0x4a375f]['access']['token']=null,logger[_0x2fa63b(0x288)](_0x2fa63b(0x116)+_0x4a375f[_0x2fa63b(0x1f5)](-0x8)),io['to'](getClient(_0x4deee5['id'])[_0x2fa63b(0x1ec)])['emit'](_0x2fa63b(0x1bc),{'access':{'allow':![],'reason':_0x2fa63b(0xd6),'token':null}});}else logger[_0x2fa63b(0x1a2)](_0x2fa63b(0x286));});}function initializeSocketBot(_0x1f4a5d){const _0x3a9d07=_0x430866,_0x31f25d=getClient(_0x1f4a5d['id'])[_0x3a9d07(0x25f)],_0x43d40f=getClient(_0x1f4a5d['id'])['uuid'];_0x1f4a5d['on'](_0x3a9d07(0x229),(_0x3e1671,_0x15eb60)=>{const _0xb097ed=_0x3a9d07;if(validateAccess(_0x15eb60,_0x43d40f)[_0xb097ed(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0xb097ed(0x151)]({'function':_0xb097ed(0x1eb),'args':_0x3e1671});}else logger[_0xb097ed(0x1a2)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x1f4a5d['on'](_0x3a9d07(0x13d),(_0x36a03a,_0x1342f5)=>{const _0x2b6078=_0x3a9d07;if(validateAccess(_0x1342f5,_0x43d40f)[_0x2b6078(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d]['send']({'function':_0x2b6078(0x1fb),'args':_0x36a03a});}else logger[_0x2b6078(0x1a2)](_0x2b6078(0xf3));}),_0x1f4a5d['on'](_0x3a9d07(0x105),(_0x571668,_0x2b5231)=>{const _0x5b1d75=_0x3a9d07;if(validateAccess(_0x2b5231,_0x43d40f)[_0x5b1d75(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x5b1d75(0x151)]({'function':_0x5b1d75(0x18f),'args':_0x571668});}else logger['full'](_0x5b1d75(0x168));}),_0x1f4a5d['on'](_0x3a9d07(0x245),(_0x13c883,_0x1f7df4)=>{const _0x5d7f9c=_0x3a9d07;if(validateAccess(_0x1f7df4,_0x43d40f)[_0x5d7f9c(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d]['send']({'function':'storeConfiguration','args':_0x13c883});}else logger['full'](_0x5d7f9c(0x257));}),_0x1f4a5d['on'](_0x3a9d07(0x268),(_0x5652f1,_0x7d11bc)=>{const _0x4a5628=_0x3a9d07;if(validateAccess(_0x7d11bc,_0x43d40f)[_0x4a5628(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x4a5628(0x151)]({'function':'storeHeadless','args':_0x5652f1});}else logger['full'](_0x4a5628(0x11d));}),_0x1f4a5d['on'](_0x3a9d07(0x298),(_0x499da4,_0x2c6596)=>{const _0x32f4d4=_0x3a9d07;if(validateAccess(_0x2c6596,_0x43d40f)[_0x32f4d4(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d]['send']({'function':'storeFiat','args':_0x499da4});}else logger[_0x32f4d4(0x1a2)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x1f4a5d['on'](_0x3a9d07(0x1db),_0x492746=>{const _0x1453f8=_0x3a9d07;if(validateAccess(_0x492746,_0x43d40f)[_0x1453f8(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x1453f8(0x151)]({'function':_0x1453f8(0x17e),'args':null});}else logger['full'](_0x1453f8(0x1df));}),_0x1f4a5d['on'](_0x3a9d07(0x290),_0x514881=>{const _0x513cdc=_0x3a9d07;if(validateAccess(_0x514881,_0x43d40f)[_0x513cdc(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x513cdc(0x151)]({'function':_0x513cdc(0xc2),'args':null});}else logger[_0x513cdc(0x1a2)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x1f4a5d['on'](_0x3a9d07(0x14c),(_0x13d3b2,_0x365752)=>{const _0xbf5886=_0x3a9d07;if(validateAccess(_0x365752,_0x43d40f)[_0xbf5886(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0xbf5886(0x151)]({'function':_0xbf5886(0x1de),'args':_0x13d3b2});}else logger['full'](_0xbf5886(0x274));}),_0x1f4a5d['on'](_0x3a9d07(0x13b),_0x33dedc=>{const _0x28b95d=_0x3a9d07;if(validateAccess(_0x33dedc,_0x43d40f)[_0x28b95d(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x28b95d(0x151)]({'function':'cancelLoading','args':null});}else logger[_0x28b95d(0x1a2)](_0x28b95d(0x131));}),_0x1f4a5d['on'](_0x3a9d07(0x273),_0x21a185=>{const _0x33c9b7=_0x3a9d07;if(validateAccess(_0x21a185,_0x43d40f)[_0x33c9b7(0x12e)]){if(pid[_0x31f25d])pid[_0x31f25d][_0x33c9b7(0x151)]({'function':_0x33c9b7(0x1f3),'args':null});}else logger[_0x33c9b7(0x1a2)](_0x33c9b7(0xf2));}),_0x1f4a5d['on'](_0x3a9d07(0xc9),_0x21b0cf=>{const _0xee1221=_0x3a9d07;if(validateAccess(_0x21b0cf,_0x43d40f)[_0xee1221(0x12e)])updateBB(_0xee1221(0x29b));else logger[_0xee1221(0x1a2)](_0xee1221(0x12d));}),_0x1f4a5d['on'](_0x3a9d07(0x1d8),_0x34c074=>{const _0x1b71f1=_0x3a9d07;if(validateAccess(_0x34c074,_0x43d40f)['allow'])getMessages();else logger[_0x1b71f1(0x1a2)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1f4a5d['on'](_0x3a9d07(0x271),(_0x16c786,_0x5b6b28)=>{const _0x3825bd=_0x3a9d07;if(validateAccess(_0x5b6b28,_0x43d40f)[_0x3825bd(0x12e)])confirmMessage(_0x16c786);else logger[_0x3825bd(0x1a2)](_0x3825bd(0xc6));}),_0x1f4a5d['on'](_0x3a9d07(0x174),_0x298d0b=>{const _0x387af1=_0x3a9d07;if(validateAccess(_0x298d0b,_0x43d40f)[_0x387af1(0x12e)]){if(devices[_0x43d40f][_0x387af1(0x25b)])clearTimeout(devices[_0x43d40f][_0x387af1(0x25b)]);if(devices[_0x43d40f]['pidExpireLogin'])clearTimeout(devices[_0x43d40f][_0x387af1(0x120)]);removeSocketListeners(getClient(_0x1f4a5d['id'])[_0x387af1(0x1ec)]),addBlacklist(_0x43d40f),devices[_0x43d40f][_0x387af1(0x294)]=null,devices[_0x43d40f][_0x387af1(0x109)]=null,devices[_0x43d40f][_0x387af1(0xdb)][_0x387af1(0x237)]=null,logger[_0x387af1(0x288)](_0x387af1(0x116)+_0x43d40f[_0x387af1(0x1f5)](-0x8)),io['to'](getClient(_0x1f4a5d['id'])[_0x387af1(0x1ec)])['emit'](_0x387af1(0x1bc),{'access':{'allow':![],'reason':_0x387af1(0xd6),'token':null}});}else logger[_0x387af1(0x1a2)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x174a8a){const _0x346145=_0x430866;getClientsWithUuid(_0x174a8a)[_0x346145(0x25d)](_0x57ecec=>{const _0x175348=_0x346145;getSocket(_0x57ecec['id'])[_0x175348(0x23f)]();});}function cleanSettings(){const _0x53e03c=_0x430866;let _0x3c06a0=settings;return settings['telegramToken']&&settings[_0x53e03c(0xec)]!=''&&(_0x3c06a0={..._0x3c06a0,'telegramToken':_0x53e03c(0x29a)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x3c06a0={..._0x3c06a0,'bbPassword':_0x53e03c(0x29a)}),(settings['bbPassword']&&settings[_0x53e03c(0x1a3)]==_0x53e03c(0x29d)||settings['telegramToken']&&settings['telegramToken']==_0x53e03c(0x29d))&&(_0x3c06a0={..._0x3c06a0,'restored':{'password':settings['bbPassword']==_0x53e03c(0x29d),'telegram':settings['telegramToken']=='***'}}),_0x3c06a0;}async function updateBB(_0x2ff17b){const _0x1109b9=_0x430866;await backupConfigFiles(),installingUpdate=!![],config[_0x1109b9(0x25d)](_0x42bb91=>{restartBot(_0x42bb91['botID']);});if(_0x2ff17b==_0x1109b9(0x29b))process['send']({'update':!![],'environment':environment},_0x8947aa=>{});else _0x2ff17b==_0x1109b9(0x1b7)&&process[_0x1109b9(0x151)]({'reinstall':!![],'environment':environment},_0x2cdc6e=>{});}function startBot(_0x336808,_0x231bd9,_0x1b3698){const _0x12b693=_0x430866;if(debugging)_0x336808[_0x12b693(0x269)]('-d');let _0x315e41=![];const _0x1a9e7b=_0x336808[0x0];_0x231bd9={..._0x231bd9,'stdio':[_0x12b693(0x1ac),_0x12b693(0x1ac),_0x12b693(0x1ac),_0x12b693(0x154)]},pid[_0x1a9e7b]=childProcess['fork'](botfile,_0x336808,_0x231bd9),pid[_0x1a9e7b]['on'](_0x12b693(0x284),_0x3b32c1=>{const _0x1b6516=_0x12b693;switch(Object[_0x1b6516(0x195)](_0x3b32c1)[0x0]){case'botname':updateBotName(_0x1a9e7b,_0x3b32c1[_0x1b6516(0xcc)]);break;case _0x1b6516(0x19b):updateBotManager();break;case _0x1b6516(0x1bc):updateStatus(_0x1a9e7b,_0x3b32c1[_0x1b6516(0x1bc)]);break;case _0x1b6516(0xe2):updateLive(_0x1a9e7b,_0x3b32c1[_0x1b6516(0xe2)]);break;case'started':updateLive(_0x1a9e7b,_0x3b32c1[_0x1b6516(0xdd)]),io['to'](_0x1a9e7b)['emit'](_0x1b6516(0x1bc),{'access':{'allow':![],'reason':_0x1b6516(0x1ce),'token':null}});break;case'stop':_0x3b32c1['stop']=='restart'&&restartBot(_0x1a9e7b);_0x3b32c1[_0x1b6516(0x1be)]==_0x1b6516(0xcd)&&toggleBot(_0x1a9e7b,_0x1b6516(0xfb),'stopped');break;case _0x1b6516(0x138):sendTelegram(_0x1a9e7b,_0x3b32c1['telegram']);break;case _0x1b6516(0x23e):sendTelegramMsg(_0x3b32c1[_0x1b6516(0x23e)]);break;case'function':io['to'](_0x1a9e7b)[_0x1b6516(0x12f)](_0x3b32c1[_0x1b6516(0x198)],_0x3b32c1[_0x1b6516(0x209)]);break;}}),pid[_0x1a9e7b]['on'](_0x12b693(0x22f),function(_0x1cdb9a){if(_0x315e41)return;_0x315e41=!![],_0x1b3698(_0x1cdb9a);}),pid[_0x1a9e7b]['on'](_0x12b693(0x129),async function(_0x5ef997){const _0x51fabc=_0x12b693;if(installingUpdate)return;if(_0x315e41)return;_0x315e41=!![],_0x1b3698(null);const _0x27268d=dbConfig[_0x51fabc(0x246)](_0x51fabc(0x1cf))[_0x51fabc(0xda)]({'botID':_0x1a9e7b})['value']();_0x27268d&&(_0x27268d[_0x51fabc(0x1bc)]==_0x51fabc(0x1ae)||_0x27268d[_0x51fabc(0x1bc)]==_0x51fabc(0xf7))&&(await sleep(0x3e8),updateLive(_0x1a9e7b,_0x51fabc(0x1b0)),logger[_0x51fabc(0x1a2)](_0x51fabc(0xb9)+_0x1a9e7b),startBot([_0x1a9e7b,userID],{'cwd':bbpath},function(_0x330647){const _0x35a717=_0x51fabc;if(_0x330647)logger[_0x35a717(0x1a2)](_0x330647);}));});}function stopBot(_0xcb9024){const _0x3d70d1=_0x430866;getClientsWithBotID(_0xcb9024)['forEach'](_0x514dc9=>{const _0x25c4d5=_0x5c25;getSocket(_0x514dc9['id'])[_0x25c4d5(0x14b)](!![]),removeClient(_0x514dc9['id']);}),pid[_0xcb9024]&&(pid[_0xcb9024][_0x3d70d1(0xcd)](),pid[_0xcb9024]=null);}function restartBot(_0x1030e1){const _0x458fe3=_0x430866;if(pid[_0x1030e1])pid[_0x1030e1][_0x458fe3(0xcd)]();}function addBot(){const _0x43ab07=_0x430866;let _0x188255;for(let _0x4aca6c=0x1;_0x4aca6c<0x3e9;_0x4aca6c++){_0x188255=_0x4aca6c[_0x43ab07(0x20e)]()['padStart'](0x3,'0');let _0x11e4ef=config[_0x43ab07(0xda)](_0x5233f1=>_0x5233f1[_0x43ab07(0x27e)]==_0x188255);if(!_0x11e4ef)break;}if(_0x188255==='1000'){logger[_0x43ab07(0x1a2)](_0x43ab07(0x1da));return;}logger[_0x43ab07(0x1a2)](_0x43ab07(0x1a7)+_0x188255),dbConfig[_0x43ab07(0x246)](_0x43ab07(0x1cf))[_0x43ab07(0x269)]({'botID':_0x188255,'botname':'Bot\x20'+_0x188255,'status':_0x43ab07(0xf7),'live':''})[_0x43ab07(0x115)](),startBot([_0x188255,userID],{'cwd':bbpath},function(_0x437e82){if(_0x437e82)logger['full'](_0x437e82);}),config=getConfiguration(),io['to'](_0x43ab07(0x11e))['emit']('bots',config),broadcastToBots(_0x43ab07(0x1cf),JSON['stringify'](config));}function _0x32b2(){const _0x4e2835=['static','Setting\x20access:\x20','bbvReceive','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','util','Unauthorized\x20attempt\x20to\x20add\x20bot','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','config/','get-portfolio','apiSecret','Starting\x20Balance\x20Bot\x20update','log','telegram2FaApproval','Bot\x20','new-disabled','bb-secure.json','node','\x20mode','=>\x20Go\x20to\x20#CYA#http://','Enabled\x20Bot\x20','bcryptjs','SIGINT','auto','generate','write','Logged\x20out\x20user\x20...','hashSync','login\x20token\x20valid','-config.json','/:bot/support','init','/:bot/coins','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','botmanager','/disable\x20-\x20disable\x20notifications\x0a','pidExpireLogin','temporary\x20token\x20generated','::ffff:127.0.0.1','event','sha256','/:bot/portfolio','Backup\x20file\x20unzipped\x20and\x20stored','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','type','exit','join','clientip','-results.json','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','allow','emit','Yes','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','initclient','mode','notification','Notifications\x20disabled\x0a','30\x20min','stopPolling','telegram','zip/','7fqZyhF','cancel-loading','filter','delete-alerts','No\x20authentication\x20token','Error\x20while\x20deleting\x20config\x20files:\x20','0.0.0','max','binary','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','child_process','-performance.json','temporary\x20access\x20timeout','mtime','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','express','3000','disconnect','place-order','match','RSA','https://api.ipify.org?format=json','files','send','getSeconds','from','ipc','loginRequired','Login\x20rejected','\x20(2)','telegramChatId','sockets',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','NTBA_FIX_319','map','port','\x20minutes','reset-password','hybrid-crypto-js','then','name','username','\x1b[31m','rmSync','express-fileupload','secret','Unauthorized\x20attempt\x20to\x20get\x20portfolio','parse','catch','handshake','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','\x20|\x20client:\x20...','encryptedUuid','orders','Ok,\x20will\x20send\x20order\x20notifications\x20only','2FA\x20login\x20required','Restore\x20backup\x20file\x20','1818zQfVqS','logout','sortBy','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','path','answerCallbackQuery','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','delete-bot','entries','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','\x20to\x20','resetHistory','get-backup-files','axios','Unauthorized\x20attempt\x20to\x20download\x20','telegramEvents','accept','onepagemode','length','stringify','\x20>\x20','Starting\x20bot\x20|\x20Bot\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','output-001.log','startsWith','messages','socket','node-zip','getPortfolio','Backup\x20file\x20uploaded','/status\x20-\x20show\x20bot(s)\x20status\x0a','node-telegram-bot-api','clients','apiPassword','keys','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','env','function','connection','getDate','updatebotmanager','split','Invalid\x20authentication\x20token\x20(2)','\x20(1)','getHours','login\x20required','show','full','bbPassword','exec','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','includes','Starting\x20new\x20bot\x20|\x20Bot\x20','Access\x20enabled\x20for\x20','settings','User\x20has\x20been\x20validated','Alerts','inherit','createWriteStream','enabled','alerts','stopped','apply','all','version','remove','RSA-OAEP','output-003.log','reinstall','getFullYear','2FA\x20login\x20token\x20generated','Server','</b>\x20?','status','password','stop','once','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','bb-settings.json','string','2FA\x20required','1748080iyttKC','version.json','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','format','hex','\x20|\x20','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','login\x20token\x20generated','conn','reload','bots','/on\x20-\x20start\x20bot(s)\x0a','build2','sendPortfolioTelegram','Crypt','telegramEnabled','removeListener',',\x20must\x20be\x20a\x204\x20digit\x20number','getUTCHours','get-messages','ipv6','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','reset-history','Your\x20installation\x20is\x20already\x20up\x20to\x20date','expiry','placeOrder','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','sendMessage','Invalid\x20authentication\x20token\x20(1)','lastmsgemitted','Error\x20removing\x20old\x20backup\x20files:','getMinutes','sign','reason','internal','index.html','file','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','emitHistory','uuid','/:bot','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','writeFileSync','backup','mixpanel','/enable\x20-\x20enable\x20notifications\x0a','showConfig','polling_error','slice','SIGTERM','order','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','api-eu.mixpanel.com','headless','deleteHistoryAlerts','onText','HTML','1772rlPmny','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','user','running','#RES#\x20','login','compareSync','/:bot/performance','defaults','sendMetricsTelegram','argv','args','yargs/yargs','readFileSync','use','range','toString','replace','\x1b[0m','All\x20bots','5\x20min','bb-config.json','Invalid\x20username\x20or\x20IP\x20address','404\x20Not\x20Found','exchange','chat','remoteAddress','address','number','size','hasOwnProperty','Token\x20blacklisted','http','lowdb/adapters/FileSync','[ip-address]','Ok,\x20will\x20send\x20alert\x20notifications\x20only','backupfile','search','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','test','publicKey','userid','jsonwebtoken','get-logs','logs/','File\x20uploaded','Invalid\x20IP\x20address','getTime','existsSync','error','Unauthorized\x20attempt\x20to\x20update\x20bot','backup-full','Deleted\x20Bot\x20','value','/off\x20-\x20stop\x20bot(s)\x0a','output-000.log','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','token','Temporary\x20access\x20rejected','-----------------------------------------------------------------------------------','Error:\x20Invalid\x20argument\x20','output-002.log','Disabled\x20Bot\x20','DEFLATE','telegrammsg','removeAllListeners','1275kDuDwn','yes','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','store','45wvXCXy','store-configuration','get','store-settings','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','sendFile','invalid\x20credentials','randomFillSync','showname','toIPv4MappedAddress','Starting\x20Balance\x20Bot\x20reinstallation','randomBytes','#RES#\x20if\x20running\x20locally\x0a','isDirectory','bot-','socket.io','114838QMBgxb','warning','Unauthorized\x20attempt\x20to\x20store\x20configuration','<b>Balance\x20Bot\x20Status:</b>\x0a','date-fns','/update\x20-\x20update\x20Balance\x20Bot\x0a','pidRefreshToken','min','forEach','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bot','success','Unauthorized\x20login\x20attempt\x20(timeout)','crypto','host','padStart','Markdown','copyFileSync','191898bOAQjc','store-headless','push','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','*$1*','Allow\x20login\x20from\x20IP\x20address\x20<b>','temporary\x20access\x20not\x20allowed','bbUsername','referer','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','confirm-message','#RES#\x20if\x20running\x20on\x20server','show-config','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','f2aRequired','\x1b[35m','ipaddr.js','latestversion','Notifications\x20enabled','566757AhTNcq','simple','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','getMonth','botID','verify','Bot\x20Mgr\x20>\x20','staging','./version.json','/output-000.log','message','reject','Unauthorized\x20attempt\x20to\x20log\x20out','apiKey','debug','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','title','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','params','uncaughtException','IPv4','Orders','get-starting-balances','callback_query','toggleBotMode','telegramUsername','telegramIpApproval','All','Invalid\x20Telegram\x20token','data','store-fiat','sort','************','update','bbvNew','***','Password\x20reset\x20rejected','Notifications\x20disabled','build','tkn','isIPv4MappedAddress','mkdirSync','Restarting\x20Bot\x20','privateKey','connected','readdirSync','access\x20timeout','decrypt','Restore\x20process\x20aborted','unlinkSync','add-bot','getStartingBalances','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','.zip','timestamp','Unauthorized\x20attempt\x20to\x20confirm\x20message','Starting\x20#RED#Balance\x20Bot\x20v','uuid-random','update-bb','lastmsgtelegram','\x1b[36m','botname','kill',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','All\x20bots\x20running\x20right\x20now','manual','backup-full@','family','blacklist','set','request','logged\x20out','backup-full.zip','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','find','access','listen','started','Session\x20expired\x20for\x20user\x20...','assign','131592vuWWaS','any','live','temp/','update-bot','whitelist','Logged\x20in\x20user\x20...','127.0.0.1','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','production','6b67f3d61ee94b8f5c80b4affef4c4d9','Notifications\x20types:\x20','telegramToken','toIPv4Address','bb/','timeshift','No\x20bots\x20running\x20right\x20now','exp','Unauthorized\x20attempt\x20to\x20show\x20configuration','Unauthorized\x20attempt\x20to\x20delete\x20alerts','headers','::1','whitelistEnabled','new','statSync','2FA','secure','disabled','Unauthorized\x20attempt\x20to\x20delete\x20bot'];_0x32b2=function(){return _0x4e2835;};return _0x32b2();}function deleteBot(_0x35dc83){const _0x13e640=_0x430866;getClientsWithBotID(_0x35dc83)[_0x13e640(0x25d)](_0x21df8f=>{const _0x2f0291=_0x13e640;getSocket(_0x21df8f['id'])[_0x2f0291(0x14b)](!![]),removeClient(_0x21df8f['id']);}),dbConfig[_0x13e640(0x246)]('bots')['remove']({'botID':_0x35dc83})['write'](),logger[_0x13e640(0x1a2)](_0x13e640(0x232)+_0x35dc83),stopBot(_0x35dc83);try{if(fs[_0x13e640(0x22e)](path[_0x13e640(0x12a)](configpath,_0x13e640(0x253)+_0x35dc83+_0x13e640(0x119))))fs[_0x13e640(0xc0)](path[_0x13e640(0x12a)](configpath,'bot-'+_0x35dc83+_0x13e640(0x119)));if(fs[_0x13e640(0x22e)](path[_0x13e640(0x12a)](configpath,_0x13e640(0x253)+_0x35dc83+'-events.json')))fs[_0x13e640(0xc0)](path[_0x13e640(0x12a)](configpath,_0x13e640(0x253)+_0x35dc83+'-events.json'));if(fs['existsSync'](path[_0x13e640(0x12a)](configpath,'bot-'+_0x35dc83+_0x13e640(0x145))))fs[_0x13e640(0xc0)](path['join'](configpath,_0x13e640(0x253)+_0x35dc83+_0x13e640(0x145)));if(fs['existsSync'](path['join'](configpath,_0x13e640(0x253)+_0x35dc83+_0x13e640(0x12c))))fs['unlinkSync'](path['join'](configpath,_0x13e640(0x253)+_0x35dc83+_0x13e640(0x12c)));}catch(_0x3d8d05){if(_0x3d8d05)logger[_0x13e640(0x1a2)](_0x13e640(0x13f),_0x3d8d05);}config=getConfiguration(),io['to'](_0x13e640(0x11e))[_0x13e640(0x12f)](_0x13e640(0x1cf),config),broadcastToBots(_0x13e640(0x1cf),JSON['stringify'](config));}function toggleBot(_0x55538c,_0x8ce7e9,_0x46689a){const _0x416eca=_0x430866;dbConfig[_0x416eca(0x246)]('bots')[_0x416eca(0xda)]({'botID':_0x55538c})[_0x416eca(0xdf)]({'status':_0x8ce7e9})['assign']({'live':_0x46689a})[_0x416eca(0x115)]();if(_0x8ce7e9==_0x416eca(0x1ae)||_0x8ce7e9==_0x416eca(0xf7))logger['full'](_0x416eca(0x110)+_0x55538c),startBot([_0x55538c,userID],{'cwd':bbpath},function(_0xff516d){const _0x1e2d69=_0x416eca;if(_0xff516d)logger[_0x1e2d69(0x1a2)](_0xff516d);});else(_0x8ce7e9==_0x416eca(0xfb)||_0x8ce7e9==_0x416eca(0x10b))&&(logger[_0x416eca(0x1a2)](_0x416eca(0x23c)+_0x55538c),stopBot(_0x55538c));config=getConfiguration(),io['to'](_0x416eca(0x11e))['emit'](_0x416eca(0x1cf),config),broadcastToBots(_0x416eca(0x1cf),JSON[_0x416eca(0x186)](config));}function toggleStatus(_0x3c04af){const _0x10d78a=_0x430866;let _0x3192ef=dbConfig[_0x10d78a(0x246)](_0x10d78a(0x1cf))[_0x10d78a(0xda)]({'botID':_0x3c04af})[_0x10d78a(0x233)](),_0x188114;if(_0x3192ef[_0x10d78a(0x1bc)]===_0x10d78a(0x1ae))_0x188114=_0x10d78a(0xfb);else{if(_0x3192ef['status']===_0x10d78a(0xf7))_0x188114='new-disabled';else{if(_0x3192ef['status']===_0x10d78a(0x10b))_0x188114=_0x10d78a(0xf7);else{if(_0x3192ef['status']==='disabled')_0x188114=_0x10d78a(0x1ae);}}}return _0x188114;}function updateStatus(_0x1a8801,_0x373b5c){const _0x3a5989=_0x430866;dbConfig[_0x3a5989(0x246)](_0x3a5989(0x1cf))[_0x3a5989(0xda)]({'botID':_0x1a8801})[_0x3a5989(0xdf)]({'status':_0x373b5c})[_0x3a5989(0x115)](),config=getConfiguration(),io['to'](_0x3a5989(0x11e))[_0x3a5989(0x12f)](_0x3a5989(0x1cf),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x42cd68,_0x65811b){const _0x393070=_0x430866;dbConfig[_0x393070(0x246)](_0x393070(0x1cf))['find']({'botID':_0x42cd68})['assign']({'live':_0x65811b})[_0x393070(0x115)](),config=getConfiguration(),io['to'](_0x393070(0x11e))['emit'](_0x393070(0x1cf),config),broadcastToBots(_0x393070(0x1cf),JSON[_0x393070(0x186)](config));}function updateBotName(_0x400e32,_0x7eacd){const _0x572fd9=_0x430866;dbConfig[_0x572fd9(0x246)]('bots')['find']({'botID':_0x400e32})[_0x572fd9(0xdf)]({'botname':_0x7eacd})[_0x572fd9(0x115)](),config=getConfiguration(),io['to'](_0x572fd9(0x11e))[_0x572fd9(0x12f)](_0x572fd9(0x1cf),config),broadcastToBots(_0x572fd9(0x1cf),JSON[_0x572fd9(0x186)](config));}function updateBotManager(){const _0x14fbde=_0x430866;config=getConfiguration(),io['to'](_0x14fbde(0x11e))[_0x14fbde(0x12f)](_0x14fbde(0x1cf),config),broadcastToBots('bots',JSON[_0x14fbde(0x186)](config));}function toggleBotMode(_0x3389f2){const _0x2dd698=_0x430866;if(pid[_0x3389f2])pid[_0x3389f2][_0x2dd698(0x151)]({'function':_0x2dd698(0x292),'args':null});else{const _0x513a6a=configpath+_0x2dd698(0x253)+_0x3389f2+'-config.json',_0xc6812c=fs[_0x2dd698(0x20b)](_0x513a6a),_0x37c889=JSON['parse'](_0xc6812c),_0x3bbeca=_0x37c889['bot'][0x0][_0x2dd698(0x1fa)];_0x37c889[_0x2dd698(0x25f)][0x0][_0x2dd698(0x1fa)]=!_0x3bbeca;const _0x1da12d=JSON[_0x2dd698(0x186)](_0x37c889,null,0x2);fs[_0x2dd698(0x1ef)](_0x513a6a,_0x1da12d),config=getConfiguration(),io['to']('botmanager')[_0x2dd698(0x12f)](_0x2dd698(0x1cf),config),broadcastToBots(_0x2dd698(0x1cf),JSON['stringify'](config));}}function telegramError(_0x319ac7){const _0x1a010c=_0x430866;logger['simple'](getTimeStamp()+_0x1a010c(0x15a));}function validateTelegram(_0x2475dd){const _0x71365=_0x430866;if(_0x2475dd[_0x71365(0x153)][_0x71365(0x163)]!=settings[_0x71365(0x293)]&&'@'+_0x2475dd[_0x71365(0x153)][_0x71365(0x163)]!=settings[_0x71365(0x293)])return tgBot[_0x71365(0x1e0)](_0x2475dd[_0x71365(0x217)]['id'],_0x71365(0x289),{'parse_mode':_0x71365(0x1fd)})[_0x71365(0x16a)](_0x165b66=>{telegramError(_0x165b66);}),![];return!![];}async function initTelegram(){const _0x4f63c0=_0x430866;if(tgBot)tgBot[_0x4f63c0(0x137)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x36d6cd='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x36d6cd+='\x0a',_0x36d6cd+=_0x4f63c0(0x1f2),_0x36d6cd+=_0x4f63c0(0x11f),_0x36d6cd+=_0x4f63c0(0xd8),_0x36d6cd+=_0x4f63c0(0x248),_0x36d6cd+=_0x4f63c0(0x1d0),_0x36d6cd+=_0x4f63c0(0x234),_0x36d6cd+=_0x4f63c0(0x224),_0x36d6cd+='/names\x20-\x20show\x20bot\x20names\x0a',_0x36d6cd+=_0x4f63c0(0x191),_0x36d6cd+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x36d6cd+=_0x4f63c0(0x1f8),_0x36d6cd+=_0x4f63c0(0x25a),_0x36d6cd+=_0x4f63c0(0x27c),_0x36d6cd+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3edbfa=_0x4f63c0(0x242);_0x3edbfa+='\x0a',_0x3edbfa+=_0x36d6cd,tgBot[_0x4f63c0(0x1fc)](/\/start/,_0x443140=>{const _0xf825d9=_0x4f63c0;if(!validateTelegram(_0x443140))return;if(settings[_0xf825d9(0x158)]!=_0x443140[_0xf825d9(0x217)]['id'])updateSetting(_0xf825d9(0x158),_0x443140[_0xf825d9(0x217)]['id']);updateSetting(_0xf825d9(0x1d4),!![]),tgBot[_0xf825d9(0x1e0)](_0x443140[_0xf825d9(0x217)]['id'],_0x3edbfa)[_0xf825d9(0x16a)](_0x3659c7=>{telegramError(_0x3659c7);});}),tgBot['onText'](/\/enable/,_0x59c910=>{const _0x197d26=_0x4f63c0;if(!validateTelegram(_0x59c910))return;if(settings[_0x197d26(0x158)]!=_0x59c910['chat']['id'])updateSetting(_0x197d26(0x158),_0x59c910[_0x197d26(0x217)]['id']);updateSetting(_0x197d26(0x1d4),!![]),tgBot['sendMessage'](_0x59c910['chat']['id'],_0x197d26(0x279))[_0x197d26(0x16a)](_0x13933f=>{telegramError(_0x13933f);});}),tgBot[_0x4f63c0(0x1fc)](/\/config/,async _0x35806a=>{const _0x199a1d=_0x4f63c0;if(!validateTelegram(_0x35806a))return;tgBot[_0x199a1d(0x1d5)](_0x199a1d(0x291)),tgBot[_0x199a1d(0x1e0)](_0x35806a['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x199a1d(0x28f),'callback_data':'orders'},{'text':_0x199a1d(0x1ab),'callback_data':_0x199a1d(0x1af)},{'text':_0x199a1d(0x295),'callback_data':_0x199a1d(0x1b2)}]]}})[_0x199a1d(0x16a)](_0x588eff=>{telegramError(_0x588eff);}),tgBot['on'](_0x199a1d(0x291),async _0x49dc86=>{const _0x29f042=_0x199a1d,_0x5567c6=_0x49dc86[_0x29f042(0x297)],_0x41723a=_0x49dc86[_0x29f042(0x284)];tgBot['answerCallbackQuery'](_0x49dc86['id'])[_0x29f042(0x161)](async()=>{const _0x15f4eb=_0x29f042;_0x5567c6==_0x15f4eb(0x16f)&&(updateSetting('telegramEvents',_0x15f4eb(0x16f)),updateSetting('telegramEnabled',!![]),await tgBot[_0x15f4eb(0x1e0)](_0x41723a['chat']['id'],_0x15f4eb(0x170))[_0x15f4eb(0x16a)](_0x435d21=>{telegramError(_0x435d21);}));_0x5567c6==_0x15f4eb(0x1af)&&(updateSetting(_0x15f4eb(0x182),_0x15f4eb(0x1af)),updateSetting(_0x15f4eb(0x1d4),!![]),await tgBot[_0x15f4eb(0x1e0)](_0x41723a['chat']['id'],_0x15f4eb(0x221))[_0x15f4eb(0x16a)](_0x2f053a=>{telegramError(_0x2f053a);}));_0x5567c6==_0x15f4eb(0x1b2)&&(updateSetting(_0x15f4eb(0x182),_0x15f4eb(0x1b2)),updateSetting(_0x15f4eb(0x1d4),!![]),await tgBot[_0x15f4eb(0x1e0)](_0x41723a[_0x15f4eb(0x217)]['id'],_0x15f4eb(0x25e))[_0x15f4eb(0x16a)](_0x227694=>{telegramError(_0x227694);}));if(!settings[_0x15f4eb(0x158)])tgBot[_0x15f4eb(0x1e0)](_0x41723a[_0x15f4eb(0x217)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x15f4eb(0x16a)](_0x258a51=>{telegramError(_0x258a51);});}),tgBot[_0x29f042(0x1d5)](_0x29f042(0x291));});}),tgBot['onText'](/\/status/,_0x32eeca=>{const _0x1e9740=_0x4f63c0;if(!validateTelegram(_0x32eeca))return;const _0x15ee2e=getBotsWithMode();let _0x349d30=_0x1e9740(0x258);config['forEach'](_0x4154a0=>{const _0x30bf95=_0x1e9740,_0x2cb6e3=_0x15ee2e[_0x30bf95(0xda)](_0x4250f3=>_0x4250f3[_0x30bf95(0x27e)]==_0x4154a0[_0x30bf95(0x27e)])['mode'];_0x349d30+=_0x30bf95(0x10a)+_0x4154a0[_0x30bf95(0x27e)]+':\x20'+_0x4154a0['status']+_0x30bf95(0x1ca)+_0x2cb6e3+'\x20|\x20'+_0x4154a0[_0x30bf95(0xe2)]+'\x0a';}),_0x349d30+='\x0a',_0x349d30+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x349d30+=!settings['telegramEnabled']?_0x1e9740(0x135):'Notifications\x20enabled\x0a',_0x349d30+=settings[_0x1e9740(0x1d4)]?settings[_0x1e9740(0x182)]==_0x1e9740(0x1b2)?_0x1e9740(0x189):_0x1e9740(0xeb)+settings[_0x1e9740(0x182)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x32eeca[_0x1e9740(0x217)]['id'],_0x349d30,{'parse_mode':_0x1e9740(0x1fd)})[_0x1e9740(0x16a)](_0xf75334=>{telegramError(_0xf75334);});}),tgBot[_0x4f63c0(0x1fc)](/\/restart/,_0x137d4a=>{const _0x4aa6a4=_0x4f63c0;if(!validateTelegram(_0x137d4a))return;tgBot['removeListener'](_0x4aa6a4(0x291));const _0x147490=getEnabledBots();if(_0x147490[_0x4aa6a4(0x185)]==0x0)tgBot[_0x4aa6a4(0x1e0)](_0x137d4a['chat']['id'],_0x4aa6a4(0xf0))[_0x4aa6a4(0x16a)](_0x16ac53=>{telegramError(_0x16ac53);});else{if(_0x147490[_0x4aa6a4(0x185)]>0x1)_0x147490['push']({'botID':_0x4aa6a4(0x1b2)});let _0x5b5f47=[],_0x5e691c=[];const _0x36cf5e=_0x147490[_0x4aa6a4(0x185)]%0x4==0x0||_0x147490[_0x4aa6a4(0x185)]%0x4==0x3||_0x147490[_0x4aa6a4(0x185)]%0x3==0x1?0x4:0x3;let _0x5dca59=0x0;_0x147490[_0x4aa6a4(0x25d)]((_0x4bb1f4,_0x1979cc)=>{const _0x12f0a7=_0x4aa6a4;if(_0x1979cc%_0x36cf5e==0x0)_0x5e691c=[];_0x5e691c[_0x12f0a7(0x269)]({'text':_0x4bb1f4[_0x12f0a7(0x27e)]==_0x12f0a7(0x1b2)?_0x12f0a7(0x211):_0x12f0a7(0x10a)+_0x4bb1f4[_0x12f0a7(0x27e)],'callback_data':_0x4bb1f4['botID']}),_0x1979cc%_0x36cf5e==0x0&&(_0x5b5f47[_0x5dca59]=_0x5e691c,_0x5dca59++);}),tgBot[_0x4aa6a4(0x1e0)](_0x137d4a[_0x4aa6a4(0x217)]['id'],_0x4aa6a4(0x196),{'reply_markup':{'inline_keyboard':_0x5b5f47}})[_0x4aa6a4(0x16a)](_0x49914f=>{telegramError(_0x49914f);}),tgBot['on'](_0x4aa6a4(0x291),async _0x3ca239=>{const _0x3f5e9a=_0x4aa6a4,_0x5f9157=_0x3ca239[_0x3f5e9a(0x297)],_0x502ad4=_0x3ca239[_0x3f5e9a(0x284)];tgBot[_0x3f5e9a(0x178)](_0x3ca239['id'])[_0x3f5e9a(0x161)](async()=>{const _0x280cd2=_0x3f5e9a;_0x5f9157==_0x280cd2(0x1b2)?config['forEach'](_0x589e3a=>{restartBot(_0x589e3a['botID']);}):restartBot(_0x5f9157);}),tgBot[_0x3f5e9a(0x1d5)](_0x3f5e9a(0x291));});}}),tgBot[_0x4f63c0(0x1fc)](/\/on/,_0x5c37ce=>{const _0x2a23b9=_0x4f63c0;if(!validateTelegram(_0x5c37ce))return;tgBot['removeListener'](_0x2a23b9(0x291));const _0x46866c=getDisabledBots();if(_0x46866c[_0x2a23b9(0x185)]==0x0)tgBot[_0x2a23b9(0x1e0)](_0x5c37ce[_0x2a23b9(0x217)]['id'],_0x2a23b9(0xcf))[_0x2a23b9(0x16a)](_0x49778d=>{telegramError(_0x49778d);});else{if(_0x46866c[_0x2a23b9(0x185)]>0x1)_0x46866c[_0x2a23b9(0x269)]({'botID':_0x2a23b9(0x1b2)});let _0x3d998b=[],_0x32062d=[];const _0x3cfdd8=_0x46866c[_0x2a23b9(0x185)]%0x4==0x0||_0x46866c[_0x2a23b9(0x185)]%0x4==0x3||_0x46866c[_0x2a23b9(0x185)]%0x3==0x1?0x4:0x3;let _0x4157ce=0x0;_0x46866c['forEach']((_0x17ed36,_0x514973)=>{const _0x8914ad=_0x2a23b9;if(_0x514973%_0x3cfdd8==0x0)_0x32062d=[];_0x32062d['push']({'text':_0x17ed36[_0x8914ad(0x27e)]==_0x8914ad(0x1b2)?_0x8914ad(0x211):_0x8914ad(0x10a)+_0x17ed36['botID'],'callback_data':_0x17ed36[_0x8914ad(0x27e)]}),_0x514973%_0x3cfdd8==0x0&&(_0x3d998b[_0x4157ce]=_0x32062d,_0x4157ce++);}),tgBot['sendMessage'](_0x5c37ce[_0x2a23b9(0x217)]['id'],_0x2a23b9(0x1a5),{'reply_markup':{'inline_keyboard':_0x3d998b}})[_0x2a23b9(0x16a)](_0x54bd78=>{telegramError(_0x54bd78);}),tgBot['on'](_0x2a23b9(0x291),async _0x333cf9=>{const _0x3edb4c=_0x2a23b9,_0x2ba6be=_0x333cf9[_0x3edb4c(0x297)],_0xaf00b2=_0x333cf9[_0x3edb4c(0x284)];tgBot[_0x3edb4c(0x178)](_0x333cf9['id'])[_0x3edb4c(0x161)](async()=>{const _0x55a060=_0x3edb4c;_0x2ba6be==_0x55a060(0x1b2)?(tgBot[_0x55a060(0x1e0)](_0xaf00b2['chat']['id'],_0x55a060(0x26a))[_0x55a060(0x16a)](_0xa31922=>{telegramError(_0xa31922);}),_0x46866c[_0x55a060(0x25d)](_0x42bf6e=>{const _0xfe7724=_0x55a060;if(_0x42bf6e[_0xfe7724(0x27e)]!=_0xfe7724(0x1b2))toggleBot(_0x42bf6e['botID'],toggleStatus(_0x42bf6e[_0xfe7724(0x27e)]),'stopped');})):(tgBot['sendMessage'](_0xaf00b2[_0x55a060(0x217)]['id'],_0x55a060(0x236)+_0x2ba6be)[_0x55a060(0x16a)](_0x4c98cf=>{telegramError(_0x4c98cf);}),toggleBot(_0x2ba6be,toggleStatus(_0x2ba6be),_0x55a060(0x1b0)));}),tgBot[_0x3edb4c(0x1d5)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x4e6ca4=>{const _0xdf52da=_0x4f63c0;if(!validateTelegram(_0x4e6ca4))return;tgBot[_0xdf52da(0x1d5)](_0xdf52da(0x291));const _0x40a442=getEnabledBots();if(_0x40a442[_0xdf52da(0x185)]==0x0)tgBot[_0xdf52da(0x1e0)](_0x4e6ca4['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0xdf52da(0x16a)](_0x378896=>{telegramError(_0x378896);});else{if(_0x40a442[_0xdf52da(0x185)]>0x1)_0x40a442[_0xdf52da(0x269)]({'botID':'all'});let _0x27cce4=[],_0x4c34b2=[];const _0x593bd2=_0x40a442['length']%0x4==0x0||_0x40a442[_0xdf52da(0x185)]%0x4==0x3||_0x40a442[_0xdf52da(0x185)]%0x3==0x1?0x4:0x3;let _0x27e773=0x0;_0x40a442['forEach']((_0xde0ea2,_0x194455)=>{const _0x353507=_0xdf52da;if(_0x194455%_0x593bd2==0x0)_0x4c34b2=[];_0x4c34b2[_0x353507(0x269)]({'text':_0xde0ea2['botID']==_0x353507(0x1b2)?'All\x20bots':'Bot\x20'+_0xde0ea2[_0x353507(0x27e)],'callback_data':_0xde0ea2[_0x353507(0x27e)]}),_0x194455%_0x593bd2==0x0&&(_0x27cce4[_0x27e773]=_0x4c34b2,_0x27e773++);}),tgBot[_0xdf52da(0x1e0)](_0x4e6ca4['chat']['id'],_0xdf52da(0x270),{'reply_markup':{'inline_keyboard':_0x27cce4}})['catch'](_0x34bee9=>{telegramError(_0x34bee9);}),tgBot['on'](_0xdf52da(0x291),async _0x36db77=>{const _0x168e5b=_0xdf52da,_0x4b4343=_0x36db77[_0x168e5b(0x297)],_0x51a42e=_0x36db77[_0x168e5b(0x284)];tgBot[_0x168e5b(0x178)](_0x36db77['id'])['then'](async()=>{const _0x26bcd6=_0x168e5b;_0x4b4343==_0x26bcd6(0x1b2)?(tgBot['sendMessage'](_0x51a42e['chat']['id'],_0x26bcd6(0x1ee))['catch'](_0x7e1b40=>{telegramError(_0x7e1b40);}),_0x40a442[_0x26bcd6(0x25d)](_0x111624=>{const _0x2fec63=_0x26bcd6;if(_0x111624['botID']!=_0x2fec63(0x1b2))toggleBot(_0x111624[_0x2fec63(0x27e)],toggleStatus(_0x111624[_0x2fec63(0x27e)]),_0x2fec63(0x1b0));})):(tgBot[_0x26bcd6(0x1e0)](_0x51a42e[_0x26bcd6(0x217)]['id'],_0x26bcd6(0x176)+_0x4b4343)[_0x26bcd6(0x16a)](_0x468647=>{telegramError(_0x468647);}),toggleBot(_0x4b4343,toggleStatus(_0x4b4343),_0x26bcd6(0x1b0)));}),tgBot[_0x168e5b(0x1d5)](_0x168e5b(0x291));});}}),tgBot[_0x4f63c0(0x1fc)](/\/metrics/,_0x2a42c8=>{const _0x3f5d0f=_0x4f63c0;if(!validateTelegram(_0x2a42c8))return;tgBot['removeListener'](_0x3f5d0f(0x291));const _0x563891=getEnabledBots();if(_0x563891[_0x3f5d0f(0x185)]==0x0)tgBot[_0x3f5d0f(0x1e0)](_0x2a42c8[_0x3f5d0f(0x217)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x3f5d0f(0x16a)](_0x522a46=>{telegramError(_0x522a46);});else{if(_0x563891[_0x3f5d0f(0x185)]>0x1){let _0x5bf8cc=[],_0x1c8661=[];const _0x3e364f=_0x563891[_0x3f5d0f(0x185)]%0x4==0x0||_0x563891['length']%0x4==0x3||_0x563891[_0x3f5d0f(0x185)]%0x3==0x1?0x4:0x3;let _0x4af690=0x0;_0x563891[_0x3f5d0f(0x25d)]((_0x213c59,_0x5b0364)=>{const _0x1dba9a=_0x3f5d0f;if(_0x5b0364%_0x3e364f==0x0)_0x1c8661=[];_0x1c8661['push']({'text':'Bot\x20'+_0x213c59[_0x1dba9a(0x27e)],'callback_data':_0x213c59[_0x1dba9a(0x27e)]}),_0x5b0364%_0x3e364f==0x0&&(_0x5bf8cc[_0x4af690]=_0x1c8661,_0x4af690++);}),tgBot[_0x3f5d0f(0x1e0)](_0x2a42c8[_0x3f5d0f(0x217)]['id'],_0x3f5d0f(0x16c),{'reply_markup':{'inline_keyboard':_0x5bf8cc}})['catch'](_0x5e53a8=>{telegramError(_0x5e53a8);}),tgBot['on']('callback_query',async _0x599959=>{const _0x172f75=_0x3f5d0f,_0x3aa22=_0x599959[_0x172f75(0x297)],_0x5af06c=_0x599959['message'];tgBot[_0x172f75(0x178)](_0x599959['id'])[_0x172f75(0x161)](async()=>{const _0x1a3ccd=_0x172f75;if(pid[_0x3aa22])pid[_0x3aa22][_0x1a3ccd(0x151)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x172f75(0x1d5)](_0x172f75(0x291));});}else{const _0x4d787d=_0x563891[0x0]['botID'];if(pid[_0x4d787d])pid[_0x4d787d]['send']({'function':_0x3f5d0f(0x207),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x1c1974=>{const _0x1ba936=_0x4f63c0;if(!validateTelegram(_0x1c1974))return;tgBot[_0x1ba936(0x1d5)]('callback_query');const _0x7149dd=getEnabledBots();if(_0x7149dd['length']==0x0)tgBot['sendMessage'](_0x1c1974['chat']['id'],_0x1ba936(0xf0))[_0x1ba936(0x16a)](_0xf45915=>{telegramError(_0xf45915);});else{if(_0x7149dd[_0x1ba936(0x185)]>0x1){let _0x46778e=[],_0x4e4c2b=[];const _0x1cd75f=_0x7149dd[_0x1ba936(0x185)]%0x4==0x0||_0x7149dd['length']%0x4==0x3||_0x7149dd[_0x1ba936(0x185)]%0x3==0x1?0x4:0x3;let _0x5dda56=0x0;_0x7149dd[_0x1ba936(0x25d)]((_0x508775,_0x3375f1)=>{const _0x314697=_0x1ba936;if(_0x3375f1%_0x1cd75f==0x0)_0x4e4c2b=[];_0x4e4c2b['push']({'text':'Bot\x20'+_0x508775[_0x314697(0x27e)],'callback_data':_0x508775[_0x314697(0x27e)]}),_0x3375f1%_0x1cd75f==0x0&&(_0x46778e[_0x5dda56]=_0x4e4c2b,_0x5dda56++);}),tgBot['sendMessage'](_0x1c1974['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x46778e}})[_0x1ba936(0x16a)](_0x432b08=>{telegramError(_0x432b08);}),tgBot['on'](_0x1ba936(0x291),async _0x2071c1=>{const _0x1e0b19=_0x1ba936,_0x13ae80=_0x2071c1[_0x1e0b19(0x297)],_0x61b54e=_0x2071c1[_0x1e0b19(0x284)];tgBot[_0x1e0b19(0x178)](_0x2071c1['id'])[_0x1e0b19(0x161)](async()=>{const _0x139a89=_0x1e0b19;if(pid[_0x13ae80])pid[_0x13ae80][_0x139a89(0x151)]({'function':_0x139a89(0x1d2),'args':null});}),tgBot[_0x1e0b19(0x1d5)](_0x1e0b19(0x291));});}else{const _0x48d3a4=_0x7149dd[0x0][_0x1ba936(0x27e)];if(pid[_0x48d3a4])pid[_0x48d3a4][_0x1ba936(0x151)]({'function':_0x1ba936(0x1d2),'args':null});}}}),tgBot[_0x4f63c0(0x1fc)](/\/update/,async _0x158300=>{const _0x4dcb6c=_0x4f63c0;if(!validateTelegram(_0x158300))return;tgBot[_0x4dcb6c(0x1d5)](_0x4dcb6c(0x291)),await getMessages();if(!updateAvailable)tgBot[_0x4dcb6c(0x1e0)](_0x158300[_0x4dcb6c(0x217)]['id'],_0x4dcb6c(0x1dc))[_0x4dcb6c(0x16a)](_0x3e0803=>{telegramError(_0x3e0803);});else!validInstallation?tgBot['sendMessage'](_0x158300[_0x4dcb6c(0x217)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x4dcb6c(0x16a)](_0x5d6dc4=>{telegramError(_0x5d6dc4);}):(tgBot['sendMessage'](_0x158300[_0x4dcb6c(0x217)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x4dcb6c(0x130),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x28ed56=>{telegramError(_0x28ed56);}),tgBot['on'](_0x4dcb6c(0x291),async _0x181ed5=>{const _0x4713eb=_0x4dcb6c,_0x925e04=_0x181ed5[_0x4713eb(0x297)],_0x57fb80=_0x181ed5[_0x4713eb(0x284)];tgBot[_0x4713eb(0x178)](_0x181ed5['id'])[_0x4713eb(0x161)](async()=>{const _0x328d1c=_0x4713eb;_0x925e04=='yes'&&(await tgBot[_0x328d1c(0x1e0)](_0x57fb80[_0x328d1c(0x217)]['id'],_0x328d1c(0x107))[_0x328d1c(0x16a)](_0x33c14c=>{telegramError(_0x33c14c);}),updateBB('update')),_0x925e04=='no'&&await tgBot['sendMessage'](_0x57fb80[_0x328d1c(0x217)]['id'],_0x328d1c(0xe8))[_0x328d1c(0x16a)](_0x104136=>{telegramError(_0x104136);});}),tgBot[_0x4713eb(0x1d5)](_0x4713eb(0x291));}));}),tgBot['onText'](/\/reinstall/,async _0x379ec0=>{const _0x4e3858=_0x4f63c0;if(!validateTelegram(_0x379ec0))return;tgBot['removeListener'](_0x4e3858(0x291)),!validInstallation?tgBot[_0x4e3858(0x1e0)](_0x379ec0[_0x4e3858(0x217)]['id'],_0x4e3858(0x1c6))[_0x4e3858(0x16a)](_0x1ca473=>{telegramError(_0x1ca473);}):(tgBot['sendMessage'](_0x379ec0[_0x4e3858(0x217)]['id'],_0x4e3858(0x1c0),{'reply_markup':{'inline_keyboard':[[{'text':_0x4e3858(0x130),'callback_data':_0x4e3858(0x241)},{'text':'No','callback_data':'no'}]]}})[_0x4e3858(0x16a)](_0x28c3fd=>{telegramError(_0x28c3fd);}),tgBot['on'](_0x4e3858(0x291),async _0x9e9f88=>{const _0x178c80=_0x4e3858,_0x2edfed=_0x9e9f88[_0x178c80(0x297)],_0x1ddd37=_0x9e9f88[_0x178c80(0x284)];tgBot[_0x178c80(0x178)](_0x9e9f88['id'])[_0x178c80(0x161)](async()=>{const _0x3cc294=_0x178c80;_0x2edfed==_0x3cc294(0x241)&&(await tgBot[_0x3cc294(0x1e0)](_0x1ddd37[_0x3cc294(0x217)]['id'],_0x3cc294(0x24f))['catch'](_0xce63d0=>{telegramError(_0xce63d0);}),updateBB(_0x3cc294(0x1b7))),_0x2edfed=='no'&&await tgBot[_0x3cc294(0x1e0)](_0x1ddd37[_0x3cc294(0x217)]['id'],_0x3cc294(0x28b))[_0x3cc294(0x16a)](_0x2883a3=>{telegramError(_0x2883a3);});}),tgBot[_0x178c80(0x1d5)](_0x178c80(0x291));}));}),tgBot['onText'](/\/toggle/,_0x4b1a27=>{const _0x36821a=_0x4f63c0;if(!validateTelegram(_0x4b1a27))return;tgBot[_0x36821a(0x1d5)](_0x36821a(0x291));const _0x2a12b8=getBotsWithMode();if(_0x2a12b8[_0x36821a(0x185)]==0x0)tgBot[_0x36821a(0x1e0)](_0x4b1a27[_0x36821a(0x217)]['id'],_0x36821a(0xf0))[_0x36821a(0x16a)](_0x2608b5=>{telegramError(_0x2608b5);});else{let _0x3a7781=[],_0x15fdf3=[];const _0x4478db=0x2;let _0x3d6330=0x0;_0x2a12b8[_0x36821a(0x25d)]((_0x4054c2,_0x2014d1)=>{const _0x32b99b=_0x36821a;if(_0x2014d1%_0x4478db==0x0)_0x15fdf3=[];_0x15fdf3['push']({'text':_0x32b99b(0x10a)+_0x4054c2[_0x32b99b(0x27e)]+'\x20('+_0x4054c2['mode']+')','callback_data':_0x4054c2[_0x32b99b(0x27e)]}),_0x2014d1%_0x4478db==0x0&&(_0x3a7781[_0x3d6330]=_0x15fdf3,_0x3d6330++);}),tgBot[_0x36821a(0x1e0)](_0x4b1a27['chat']['id'],_0x36821a(0x148),{'reply_markup':{'inline_keyboard':_0x3a7781}})['catch'](_0x4eb1a8=>{telegramError(_0x4eb1a8);}),tgBot['on'](_0x36821a(0x291),async _0x513793=>{const _0x131a5d=_0x36821a,_0x328b49=_0x513793[_0x131a5d(0x297)],_0x38eddc=_0x513793[_0x131a5d(0x284)];tgBot[_0x131a5d(0x178)](_0x513793['id'])['then'](async()=>{const _0x10d1e9=_0x131a5d,_0x48db08=_0x2a12b8[_0x10d1e9(0xda)](_0x3709d0=>_0x3709d0[_0x10d1e9(0x27e)]==_0x328b49),_0x1c89a5=_0x48db08[_0x10d1e9(0x133)]=='auto'?'manual':_0x10d1e9(0x113);tgBot['sendMessage'](_0x38eddc[_0x10d1e9(0x217)]['id'],_0x10d1e9(0x103)+_0x328b49+_0x10d1e9(0x17d)+_0x1c89a5+_0x10d1e9(0x10e))[_0x10d1e9(0x16a)](_0x5c20c9=>{telegramError(_0x5c20c9);}),toggleBotMode(_0x328b49);}),tgBot[_0x131a5d(0x1d5)](_0x131a5d(0x291));});}}),tgBot[_0x4f63c0(0x1fc)](/\/names/,_0x2a1ca9=>{const _0x3c7b04=_0x4f63c0;if(!validateTelegram(_0x2a1ca9))return;let _0x4aee38='';config[_0x3c7b04(0x25d)](_0x389e82=>{const _0x458a5e=_0x3c7b04;_0x4aee38+=_0x458a5e(0x10a)+_0x389e82['botID']+':\x20'+_0x389e82[_0x458a5e(0xcc)]+'\x0a';}),tgBot[_0x3c7b04(0x1e0)](_0x2a1ca9[_0x3c7b04(0x217)]['id'],_0x4aee38,{'parse_mode':_0x3c7b04(0x1fd)})[_0x3c7b04(0x16a)](_0x3aa05f=>{telegramError(_0x3aa05f);});}),tgBot['onText'](/\/disable/,_0x54db71=>{const _0x185f51=_0x4f63c0;if(!validateTelegram(_0x54db71))return;tgBot[_0x185f51(0x1e0)](_0x54db71[_0x185f51(0x217)]['id'],_0x185f51(0x29f))[_0x185f51(0x16a)](_0x566ead=>{telegramError(_0x566ead);}),updateSetting(_0x185f51(0x1d4),![]);}),tgBot[_0x4f63c0(0x1fc)](/\/help/,_0xf9f2b4=>{const _0x4d60e7=_0x4f63c0;if(!validateTelegram(_0xf9f2b4))return;tgBot[_0x4d60e7(0x1e0)](_0xf9f2b4[_0x4d60e7(0x217)]['id'],_0x36d6cd)['catch'](_0x5668d0=>{telegramError(_0x5668d0);});}),tgBot['on'](_0x4f63c0(0x1f4),_0x46e2c4=>{const _0x584a22=_0x4f63c0;_0x46e2c4[_0x584a22(0x20e)]()[_0x584a22(0x1a6)](_0x584a22(0x215))&&(logger[_0x584a22(0x1a2)](_0x584a22(0x296)),tgBot[_0x584a22(0x137)](),tgBot=null,io['to']('botmanager')[_0x584a22(0x12f)](_0x584a22(0x134),_0x584a22(0x296)));}),process[_0x4f63c0(0x1bf)](_0x4f63c0(0x112),()=>{const _0x874694=_0x4f63c0;if(tgBot)tgBot[_0x874694(0x137)]();process[_0x874694(0x129)](0x1);}),process['once'](_0x4f63c0(0x1f6),()=>{const _0x21ec41=_0x4f63c0;if(tgBot)tgBot['stopPolling']();process[_0x21ec41(0x129)](0x1);});}}function disableTelegram(){const _0x1ef56b=_0x430866;tgBot&&(tgBot[_0x1ef56b(0x137)](),tgBot=null);}function sendTelegram(_0x1e5341,_0x467d68){const _0xdf69b9=_0x430866;if(settings[_0xdf69b9(0x1d4)]){if(settings[_0xdf69b9(0x182)]==_0xdf69b9(0x1b2)||(_0x467d68[_0xdf69b9(0x128)]=='error'||_0x467d68['type']==_0xdf69b9(0x256)||_0x467d68[_0xdf69b9(0x128)]==_0xdf69b9(0x260))&&settings[_0xdf69b9(0x182)]==_0xdf69b9(0x1af)||_0x467d68[_0xdf69b9(0x128)]==_0xdf69b9(0x1f7)&&settings[_0xdf69b9(0x182)]==_0xdf69b9(0x16f)){if(tgBot&&settings[_0xdf69b9(0x158)]){if(_0x467d68[_0xdf69b9(0x24d)])tgBot[_0xdf69b9(0x1e0)](settings['telegramChatId'],_0x467d68[_0xdf69b9(0xcc)]+_0xdf69b9(0x187)+_0x467d68[_0xdf69b9(0x123)])[_0xdf69b9(0x16a)](_0x53e54d=>{telegramError(_0x53e54d);});else tgBot['sendMessage'](settings[_0xdf69b9(0x158)],_0xdf69b9(0x10a)+_0x1e5341+'\x20>\x20'+_0x467d68[_0xdf69b9(0x123)])['catch'](_0x3d9045=>{telegramError(_0x3d9045);});}}}}async function sendTelegramMsg(_0x69f536,_0x186483=_0x430866(0x1fd)){const _0x4c55e8=_0x430866;return settings[_0x4c55e8(0x1d4)]&&tgBot&&settings[_0x4c55e8(0x158)]?(await tgBot[_0x4c55e8(0x1e0)](settings[_0x4c55e8(0x158)],_0x69f536,{'parse_mode':_0x186483})[_0x4c55e8(0x16a)](_0x4f8ba9=>{telegramError(_0x4f8ba9);}),!![]):![];}function getDeviceWithIp(_0x5e0ee4){const _0x3ac571=_0x430866;return devices[_0x3ac571(0xda)](_0x58d7dd=>_0x58d7dd['ip']===_0x5e0ee4);}function temporaryAccess2FA(_0x4cddea,_0x2fe880){const _0x157369=_0x430866;let _0x1bc24e=new Date(),_0x5ca2ef=![];if(lastIpApproval){if(_0x1bc24e-lastIpApproval<0x1388)_0x5ca2ef=!![];}lastIpApproval=new Date();if(_0x5ca2ef)return;tgBot&&settings[_0x157369(0x158)]&&(tgBot[_0x157369(0x1d5)]('callback_query'),tgBot[_0x157369(0x1e0)](settings['telegramChatId'],_0x157369(0x143)+normalizeIP(_0x2fe880)[_0x157369(0x1a1)]+_0x157369(0x1bb),{'parse_mode':_0x157369(0x1fd),'reply_markup':{'inline_keyboard':[[{'text':_0x157369(0x212),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x157369(0x136),'callback_data':'30'},{'text':_0x157369(0x285),'callback_data':_0x157369(0x285)}]]}})['catch'](_0xfff3e9=>{telegramError(_0xfff3e9);}),tgBot['on'](_0x157369(0x291),async _0x5d188c=>{const _0x588c47=_0x157369,_0x1c532f=_0x5d188c[_0x588c47(0x297)],_0x19ec6f=_0x5d188c[_0x588c47(0x284)];tgBot['answerCallbackQuery'](_0x5d188c['id'])[_0x588c47(0x161)](async()=>{const _0x2db3b6=_0x588c47;devices[_0x4cddea]['telegramIpApproval']={'clientip':_0x2fe880,'timestamp':new Date()[_0x2db3b6(0x22d)](),'expiry':_0x1c532f},_0x1c532f!='reject'?(await tgBot[_0x2db3b6(0x1e0)](_0x19ec6f[_0x2db3b6(0x217)]['id'],_0x2db3b6(0x1a8)+_0x1c532f+_0x2db3b6(0x15e),{'parse_mode':_0x2db3b6(0x1fd)})[_0x2db3b6(0x16a)](_0x3998d7=>{telegramError(_0x3998d7);}),io['to'](_0x4cddea)[_0x2db3b6(0x12f)](_0x2db3b6(0x1bc),{'access':{'allow':![],'reason':_0x2db3b6(0x1ce),'token':null}})):(await tgBot['sendMessage'](_0x19ec6f[_0x2db3b6(0x217)]['id'],_0x2db3b6(0x238))[_0x2db3b6(0x16a)](_0x733290=>{telegramError(_0x733290);}),io['to'](_0x4cddea)['emit'](_0x2db3b6(0x1bc),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x588c47(0x1d5)](_0x588c47(0x291));}));}function loginAccess2FA(_0x3f355e,_0x151c7b){const _0x522296=_0x430866;tgBot&&settings[_0x522296(0x158)]&&(tgBot[_0x522296(0x1d5)](_0x522296(0x291)),tgBot[_0x522296(0x1e0)](settings[_0x522296(0x158)],_0x522296(0x26c)+normalizeIP(_0x151c7b)[_0x522296(0x1a1)]+_0x522296(0x1bb),{'parse_mode':_0x522296(0x1fd),'reply_markup':{'inline_keyboard':[[{'text':_0x522296(0x183),'callback_data':loginExpiry},{'text':_0x522296(0x285),'callback_data':_0x522296(0x285)}]]}})[_0x522296(0x16a)](_0xd787d9=>{telegramError(_0xd787d9);}),tgBot['on'](_0x522296(0x291),async _0x287257=>{const _0x5e15ab=_0x522296,_0x21f62c=_0x287257['data'],_0x3c24bf=_0x287257[_0x5e15ab(0x284)];tgBot[_0x5e15ab(0x178)](_0x287257['id'])[_0x5e15ab(0x161)](async()=>{const _0x48881a=_0x5e15ab;devices[_0x3f355e][_0x48881a(0x109)]={'clientip':_0x151c7b,'timestamp':new Date()[_0x48881a(0x22d)](),'expiry':_0x21f62c},_0x21f62c!=_0x48881a(0x285)?(await tgBot[_0x48881a(0x1e0)](_0x3c24bf[_0x48881a(0x217)]['id'],'Login\x20accepted',{'parse_mode':_0x48881a(0x1fd)})[_0x48881a(0x16a)](_0x11a543=>{telegramError(_0x11a543);}),io['to'](_0x3f355e)[_0x48881a(0x12f)]('status',{'access':{'allow':![],'reason':_0x48881a(0x1ce),'token':null}})):(await tgBot[_0x48881a(0x1e0)](_0x3c24bf[_0x48881a(0x217)]['id'],_0x48881a(0x156))['catch'](_0x2c4403=>{telegramError(_0x2c4403);}),io['to'](_0x3f355e)[_0x48881a(0x12f)](_0x48881a(0x1bc),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x5e15ab(0x1d5)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4116ad=_0x430866;return dbConfig[_0x4116ad(0x246)]('bots')[_0x4116ad(0x175)](_0x4116ad(0x27e))[_0x4116ad(0x13c)]({'status':_0x4116ad(0x1ae)})[_0x4116ad(0x233)]()||[];}function getDisabledBots(){const _0x32d545=_0x430866;return dbConfig[_0x32d545(0x246)](_0x32d545(0x1cf))['sortBy'](_0x32d545(0x27e))[_0x32d545(0x13c)]({'status':_0x32d545(0xfb)})[_0x32d545(0x233)]()||[];}function getBotAttributes(_0x51ee92){const _0x4bd612=_0x430866;let _0x352e5b={};const _0x4a4fde=configpath+_0x4bd612(0x253)+_0x51ee92+'-config.json',_0x3adbeb=fs[_0x4bd612(0x22e)](_0x4a4fde);if(_0x3adbeb){const _0x3049d0=fs[_0x4bd612(0x20b)](_0x4a4fde);try{const _0x14ef6e=JSON['parse'](_0x3049d0),_0x15fe8c=_0x14ef6e?_0x14ef6e[_0x4bd612(0x25f)][0x0][_0x4bd612(0x1fa)]:![];_0x352e5b[_0x4bd612(0x133)]=_0x15fe8c?_0x4bd612(0x113):'manual',_0x352e5b[_0x4bd612(0xcc)]=_0x14ef6e?_0x14ef6e[_0x4bd612(0x25f)][0x0][_0x4bd612(0xcc)]:_0x4bd612(0x10a)+_0x51ee92;}catch(_0x127dec){_0x352e5b[_0x4bd612(0x133)]=_0x4bd612(0xd0),_0x352e5b['botname']=_0x4bd612(0x10a)+_0x51ee92;}}else _0x352e5b[_0x4bd612(0x133)]=_0x4bd612(0xd0),_0x352e5b['botname']=_0x4bd612(0x10a)+_0x51ee92;return _0x352e5b;}function getBotsWithMode(){const _0xa26133=_0x430866,_0x5069b6=dbConfig[_0xa26133(0x246)](_0xa26133(0x1cf))[_0xa26133(0x175)](_0xa26133(0x27e))[_0xa26133(0x233)]()||[];return _0x5069b6['forEach'](_0x592c4a=>{const _0x58d30f=_0xa26133;let _0x407804=getBotAttributes(_0x592c4a[_0x58d30f(0x27e)]);_0x592c4a[_0x58d30f(0x133)]=_0x407804[_0x58d30f(0x133)];}),_0x5069b6;}function getBotExchanges(){const _0x44c12a=_0x430866;let _0x3e31ec=[];const _0x585fc1=dbConfig['get'](_0x44c12a(0x1cf))[_0x44c12a(0x175)](_0x44c12a(0x27e))[_0x44c12a(0x233)]()||[];_0x585fc1['forEach'](_0x107f45=>{const _0x3e0b4f=_0x44c12a;if(_0x107f45[_0x3e0b4f(0x1bc)]=='enabled'){const _0x255965=configpath+_0x3e0b4f(0x253)+_0x107f45[_0x3e0b4f(0x27e)]+'-config.json',_0x20526c=fs['existsSync'](_0x255965);let _0x2b07bf;if(_0x20526c){const _0x5c4a74=fs['readFileSync'](_0x255965);try{const _0x53cdbf=JSON[_0x3e0b4f(0x169)](_0x5c4a74);_0x2b07bf=_0x53cdbf?_0x53cdbf[_0x3e0b4f(0x25f)][0x0][_0x3e0b4f(0x216)]:null;}catch(_0x3dbab7){}}if(_0x2b07bf)_0x3e31ec[_0x3e0b4f(0x269)](_0x2b07bf);}});const _0x54e0b7=[...new Set(_0x3e31ec)][_0x44c12a(0x299)]();return _0x54e0b7;}async function initUser(){const _0x4b9ba7=_0x430866;if(!settings[_0x4b9ba7(0x227)]){const _0xcbc71a=uuidRandom();mixpanel['alias'](_0xcbc71a),updateSetting(_0x4b9ba7(0x227),_0xcbc71a);}}async function initSecure(){const _0x49cf1d=_0x430866;let _0xbfa4c5=getSecure();if(!_0xbfa4c5[_0x49cf1d(0x21c)](_0x49cf1d(0x167))){let _0x455941=await generateKeys();_0xbfa4c5[_0x49cf1d(0x226)]=_0x455941[_0x49cf1d(0x226)],_0xbfa4c5[_0x49cf1d(0xba)]=_0x455941[_0x49cf1d(0xba)],_0xbfa4c5[_0x49cf1d(0x167)]=crypto[_0x49cf1d(0x250)](0x20)[_0x49cf1d(0x20e)](_0x49cf1d(0x1c9));;storeSecure(_0xbfa4c5);}}function getSettings(){const _0x955bd5=_0x430866;return dbSettings[_0x955bd5(0x246)](_0x955bd5(0x1a9))[_0x955bd5(0x233)]()||{};}function getSecure(){const _0x2d44df=_0x430866;return dbSecure[_0x2d44df(0x246)](_0x2d44df(0xfa))[_0x2d44df(0x233)]()||{};}function getBlacklist(){const _0x3fe898=_0x430866;return dbSecure[_0x3fe898(0x246)](_0x3fe898(0xd3))[_0x3fe898(0x233)]()||[];}function broadcastToBots(_0x476221,_0x32029a){config['forEach'](_0x255596=>{const _0x582637=_0x5c25;if(_0x255596[_0x582637(0x1bc)]==_0x582637(0x1ae)&&_0x255596[_0x582637(0xe2)]==_0x582637(0x201)||_0x255596[_0x582637(0x1bc)]==_0x582637(0xf7)&&_0x255596[_0x582637(0xe2)]==_0x582637(0x201)){if(pid[_0x255596[_0x582637(0x27e)]])pid[_0x255596['botID']][_0x582637(0x151)]({[_0x476221]:_0x32029a});}});}function storeSettings(_0x3b4a2f,_0x46cb90=![]){const _0x35a4ba=_0x430866;_0x3b4a2f={...settings,..._0x3b4a2f};if(_0x46cb90&&_0x3b4a2f['bbPassword']!=_0x35a4ba(0x29a)&&_0x3b4a2f[_0x35a4ba(0x1a3)]!='***'&&_0x3b4a2f[_0x35a4ba(0x1a3)]!=''){const _0x2b7481=crypt['decrypt'](secure['privateKey'],_0x3b4a2f[_0x35a4ba(0x1a3)])[_0x35a4ba(0x284)][_0x35a4ba(0x19c)]('@')[0x0],_0x1037ba=bcrypt[_0x35a4ba(0x117)](_0x2b7481,saltRounds);_0x3b4a2f={..._0x3b4a2f,'bbPassword':_0x1037ba};}if(_0x46cb90&&_0x3b4a2f[_0x35a4ba(0xec)]!='************'&&_0x3b4a2f[_0x35a4ba(0xec)]!='***'&&_0x3b4a2f[_0x35a4ba(0xec)]!=''){const _0xcdec7=crypt[_0x35a4ba(0xbe)](secure[_0x35a4ba(0xba)],_0x3b4a2f['telegramToken'])[_0x35a4ba(0x284)]['split']('@')[0x0];_0x3b4a2f={..._0x3b4a2f,'telegramToken':_0xcdec7};}const _0x224188=_0x3b4a2f[_0x35a4ba(0xec)]!='************'&&_0x3b4a2f[_0x35a4ba(0xec)]!=settings[_0x35a4ba(0xec)]||_0x3b4a2f['telegramUsername']!=settings[_0x35a4ba(0x293)],_0x17b5b5=_0x3b4a2f[_0x35a4ba(0xec)]==''||_0x3b4a2f[_0x35a4ba(0x293)]=='';if(_0x224188)_0x3b4a2f[_0x35a4ba(0x182)]='all';for(const [_0x94acc2,_0x41b0d6]of Object[_0x35a4ba(0x17b)](_0x3b4a2f)){if(_0x94acc2==_0x35a4ba(0xec)&&_0x41b0d6==_0x35a4ba(0x29a)){_0x3b4a2f[_0x35a4ba(0xec)]=settings[_0x35a4ba(0xec)];continue;};if(_0x94acc2==_0x35a4ba(0x1a3)&&_0x41b0d6==_0x35a4ba(0x29a)){_0x3b4a2f[_0x35a4ba(0x1a3)]=settings['bbPassword'];continue;};dbSettings[_0x35a4ba(0xd4)]('settings.'+_0x94acc2,_0x41b0d6)[_0x35a4ba(0x115)]();}settings=_0x3b4a2f,io['to'](_0x35a4ba(0x11e))[_0x35a4ba(0x12f)]('settings',cleanSettings()),broadcastToBots(_0x35a4ba(0xef),settings[_0x35a4ba(0xef)]),broadcastToBots(_0x35a4ba(0x184),settings['onepagemode']);if(_0x224188&&!_0x17b5b5)initTelegram();if(_0x224188&&_0x17b5b5)disableTelegram();getAllClients()[_0x35a4ba(0x25d)](_0x3e5a60=>{const _0x2de23d=_0x35a4ba;getSocket(_0x3e5a60['id'])['emit'](_0x2de23d(0x1bc),{'access':{'allow':![],'reason':_0x2de23d(0x1ce),'token':null}});});}function updateSetting(_0x18b6c0,_0x5b87cc){const _0x2d3f95=_0x430866;dbSettings[_0x2d3f95(0xd4)]('settings.'+_0x18b6c0,_0x5b87cc)['write'](),settings=getSettings(),io['to'](_0x2d3f95(0x11e))['emit']('settings',cleanSettings());}function storeSecure(_0x5135b9){const _0x5b12e0=_0x430866;dbSecure[_0x5b12e0(0x246)]('secure')[_0x5b12e0(0x269)](_0x5135b9)[_0x5b12e0(0x115)](),secure=_0x5135b9;}function addBlacklist(_0x234755){const _0x47d6d2=_0x430866;cleanBlacklist();let _0x3e66c5;devices[_0x234755]['telegramIpApproval']?_0x3e66c5=Math[_0x47d6d2(0x141)](devices[_0x234755][_0x47d6d2(0x294)][_0x47d6d2(0x1dd)],loginExpiry):_0x3e66c5=loginExpiry,dbSecure[_0x47d6d2(0x246)](_0x47d6d2(0xd3))[_0x47d6d2(0x269)]({'expiry':new Date()['getTime']()+_0x3e66c5*0x3c*0x3e8,'token':devices[_0x234755][_0x47d6d2(0xdb)][_0x47d6d2(0x237)]})[_0x47d6d2(0x115)](),blacklist=dbSecure[_0x47d6d2(0x246)](_0x47d6d2(0xd3))[_0x47d6d2(0x233)]();}function cleanBlacklist(){const _0x24327c=_0x430866;let _0x7f16ee=dbSecure[_0x24327c(0x246)]('blacklist')['cloneDeep']()[_0x24327c(0x233)](),_0x42e6b4=new Date()['getTime']();_0x7f16ee['forEach'](_0x5fa024=>{const _0x3e53fe=_0x24327c;_0x5fa024['expiry']<_0x42e6b4&&dbSecure[_0x3e53fe(0x246)]('blacklist')['remove']({'expiry':_0x5fa024[_0x3e53fe(0x1dd)]})[_0x3e53fe(0x115)]();});}function initStates(){const _0xf07de4=_0x430866;let _0x25d4b8=getConfiguration();_0x25d4b8[_0xf07de4(0x25d)](_0x3b5257=>{const _0x3d1444=_0xf07de4;_0x3b5257['live']=_0x3d1444(0x1b0);}),storeConfiguration(_0x25d4b8);}function onKeys(){const _0x604a9c=new RSA();return new Promise(_0xd646ff=>{const _0x1d1394=_0x5c25;_0x604a9c['generateKeyPairAsync']()[_0x1d1394(0x161)](_0x50fbe4=>{_0xd646ff(_0x50fbe4);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x36161f=_0x430866;let _0x38f0da=getSettings(),_0x10ab88=![];!_0x38f0da[_0x36161f(0x21c)](_0x36161f(0xca))&&(_0x38f0da[_0x36161f(0xca)]=0x0,_0x10ab88=!![]);!_0x38f0da[_0x36161f(0x21c)](_0x36161f(0x1e2))&&(_0x38f0da[_0x36161f(0x1e2)]=0x0,_0x10ab88=!![]);!_0x38f0da[_0x36161f(0x21c)]('latestversion')&&(_0x38f0da['latestversion']='0.0.0',_0x10ab88=!![]);!_0x38f0da[_0x36161f(0x21c)](_0x36161f(0x184))&&(_0x38f0da[_0x36161f(0x184)]=![],_0x10ab88=!![]);if(_0x10ab88)storeSettings(_0x38f0da);try{fs[_0x36161f(0xbc)](configbackuppath,{'withFileTypes':!![]})[_0x36161f(0x25d)](_0x5405ce=>{const _0x47e9e1=_0x36161f;if(!_0x5405ce[_0x47e9e1(0x252)]()){if(!_0x5405ce[_0x47e9e1(0x162)]['startsWith']('backup-full@'))fs[_0x47e9e1(0xc0)](configbackuppath+_0x5405ce['name']);}else fs[_0x47e9e1(0x165)](configbackuppath+_0x5405ce[_0x47e9e1(0x162)],{'recursive':!![]});});}catch(_0x1d3386){logger[_0x36161f(0x288)](_0x36161f(0x1e3),_0x1d3386);}}function storeConfiguration(_0x36b9c6){const _0x3a87e2=_0x430866;dbConfig[_0x3a87e2(0x246)](_0x3a87e2(0x1cf))[_0x3a87e2(0x1b4)]()[_0x3a87e2(0x115)](),_0x36b9c6[_0x3a87e2(0x25d)](_0x1401ab=>{delete _0x1401ab['mode'];}),dbConfig[_0x3a87e2(0x246)](_0x3a87e2(0x1cf))['push'](..._0x36b9c6)['write'](),config=_0x36b9c6;}function resetPassword(){const _0x1844ed=_0x430866;tgBot&&settings['telegramChatId']&&(tgBot[_0x1844ed(0x1d5)](_0x1844ed(0x291)),tgBot['sendMessage'](settings[_0x1844ed(0x158)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x1844ed(0x1fd),'reply_markup':{'inline_keyboard':[[{'text':_0x1844ed(0x241),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1844ed(0x16a)](_0x15b7f1=>{telegramError(_0x15b7f1);}),tgBot['on'](_0x1844ed(0x291),async _0x297532=>{const _0x335981=_0x1844ed,_0x4b58b5=_0x297532[_0x335981(0x297)],_0x143426=_0x297532['message'];tgBot[_0x335981(0x178)](_0x297532['id'])[_0x335981(0x161)](async()=>{const _0x4d4b45=_0x335981;if(_0x4b58b5!='no'){const _0xa7a13b=0xf,_0x191d09=_0x4d4b45(0x127),_0x27b978=Array['from'](crypto[_0x4d4b45(0x24c)](new Uint32Array(_0xa7a13b)))[_0x4d4b45(0x15c)](_0x4470df=>_0x191d09[_0x4470df%_0x191d09['length']])[_0x4d4b45(0x12a)](''),_0x386d7b=bcrypt[_0x4d4b45(0x117)](_0x27b978,saltRounds);storeSettings({'bbPassword':_0x386d7b}),await tgBot[_0x4d4b45(0x1e0)](_0x143426[_0x4d4b45(0x217)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x27b978,{'parse_mode':_0x4d4b45(0x1fd)})['catch'](_0x5868f2=>{telegramError(_0x5868f2);});}else await tgBot['sendMessage'](_0x143426[_0x4d4b45(0x217)]['id'],_0x4d4b45(0x29e))['catch'](_0x1ad64a=>{telegramError(_0x1ad64a);});}),tgBot[_0x335981(0x1d5)](_0x335981(0x291));}));}async function confirmRestore(_0x51f19c,_0x45445a){const _0x244024=_0x430866;io['to'](_0x244024(0x11e))[_0x244024(0x12f)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x244024(0x260)),tgBot&&settings['telegramChatId']&&(tgBot[_0x244024(0x1d5)]('callback_query'),await tgBot[_0x244024(0x1e0)](settings[_0x244024(0x158)],_0x244024(0x1cb),{'parse_mode':_0x244024(0x1fd),'reply_markup':{'inline_keyboard':[[{'text':_0x244024(0x241),'callback_data':_0x244024(0x241)},{'text':'no','callback_data':'no'}]]}})[_0x244024(0x16a)](_0x2895d8=>{telegramError(_0x2895d8);}),tgBot['on'](_0x244024(0x291),async _0x59165c=>{const _0x332c41=_0x244024,_0x16b16e=_0x59165c[_0x332c41(0x297)],_0x1c2da7=_0x59165c[_0x332c41(0x284)];tgBot[_0x332c41(0x178)](_0x59165c['id'])[_0x332c41(0x161)](async()=>{const _0x6de967=_0x332c41;_0x16b16e==_0x6de967(0x241)?(await tgBot[_0x6de967(0x1e0)](_0x1c2da7[_0x6de967(0x217)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x6de967(0x1fd)})[_0x6de967(0x16a)](_0x313937=>{telegramError(_0x313937);}),unzipFile(_0x51f19c,_0x45445a)):(logger[_0x6de967(0x288)](_0x6de967(0xbf)),await tgBot[_0x6de967(0x1e0)](_0x1c2da7[_0x6de967(0x217)]['id'],_0x6de967(0xbf))[_0x6de967(0x16a)](_0x477a15=>{telegramError(_0x477a15);}));}),tgBot[_0x332c41(0x1d5)]('callback_query');}));}function getServerTime(){const _0x290c13=_0x430866,_0x4ba8fc=new Date();return _0x4ba8fc['getFullYear']()+'/'+(_0x4ba8fc['getMonth']()+0x1)[_0x290c13(0x20e)]()[_0x290c13(0x264)](0x2,'0')+'/'+_0x4ba8fc[_0x290c13(0x19a)]()[_0x290c13(0x20e)]()[_0x290c13(0x264)](0x2,'0')+'\x20'+_0x4ba8fc[_0x290c13(0x19f)]()[_0x290c13(0x20e)]()[_0x290c13(0x264)](0x2,'0')+':'+_0x4ba8fc['getMinutes']()[_0x290c13(0x20e)]()['padStart'](0x2,'0')+':'+_0x4ba8fc['getSeconds']()[_0x290c13(0x20e)]()[_0x290c13(0x264)](0x2,'0');}function getTimeStamp(){const _0x30398a=_0x430866,_0x103e01=shiftedTime();return _0x103e01[_0x30398a(0x1b8)]()+'/'+(_0x103e01['getMonth']()+0x1)[_0x30398a(0x20e)]()['padStart'](0x2,'0')+'/'+_0x103e01[_0x30398a(0x19a)]()['toString']()[_0x30398a(0x264)](0x2,'0')+'\x20'+_0x103e01[_0x30398a(0x19f)]()[_0x30398a(0x20e)]()['padStart'](0x2,'0')+':'+_0x103e01['getMinutes']()['toString']()[_0x30398a(0x264)](0x2,'0')+':'+_0x103e01[_0x30398a(0x152)]()[_0x30398a(0x20e)]()[_0x30398a(0x264)](0x2,'0');}function getCleanTimeStamp(){const _0x31fc53=_0x430866,_0xaf3897=shiftedTime();return _0xaf3897[_0x31fc53(0x1b8)]()+(_0xaf3897[_0x31fc53(0x27d)]()+0x1)[_0x31fc53(0x20e)]()[_0x31fc53(0x264)](0x2,'0')+_0xaf3897[_0x31fc53(0x19a)]()[_0x31fc53(0x20e)]()[_0x31fc53(0x264)](0x2,'0')+'-'+_0xaf3897['getHours']()['toString']()[_0x31fc53(0x264)](0x2,'0')+_0xaf3897[_0x31fc53(0x1e4)]()[_0x31fc53(0x20e)]()[_0x31fc53(0x264)](0x2,'0')+_0xaf3897[_0x31fc53(0x152)]()[_0x31fc53(0x20e)]()[_0x31fc53(0x264)](0x2,'0');}function shiftedTime(){const _0x36391d=_0x430866,_0x1b51d9=new Date();let _0xa1d5b5=_0x1b51d9;if(settings[_0x36391d(0xef)]&&settings[_0x36391d(0xef)]!==0x0)_0xa1d5b5=fns['add'](_0x1b51d9,{'hours':settings['timeshift']});return _0xa1d5b5;}function startScheduler(){const _0x11a795=_0x430866,_0x35166e=new Date()[_0x11a795(0x1d7)](),_0x13bba8=shiftedTime()[_0x11a795(0x19f)]();_0x13bba8==0x4&&backupConfigFiles();_0x13bba8==0x0&&rotateLogFiles();_0x35166e%0x6==0x0&&triggerAnalytics();_0x35166e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3023ee){const _0x3202de=_0x430866;logger[_0x3202de(0x288)](_0x3202de(0x172)+_0x3023ee);const _0x1f9a93=getBotsWithMode();_0x1f9a93['length']>0x0?confirmRestore(configbackuppath,_0x3023ee):unzipFile(configbackuppath,_0x3023ee);}async function getBackupFiles(_0x3b5b46=null){const _0x4e0e0b=_0x430866;let _0x172638=[],_0x13b7f2=fs[_0x4e0e0b(0xbc)](configbackuppath,{'withFileTypes':!![]});_0x13b7f2[_0x4e0e0b(0x299)]((_0xf30107,_0x32f4c8)=>_0xf30107[_0x4e0e0b(0x162)]<_0x32f4c8[_0x4e0e0b(0x162)]?0x1:_0x32f4c8[_0x4e0e0b(0x162)]<_0xf30107['name']?-0x1:0x0),_0x13b7f2['forEach'](_0x4694c0=>{const _0x3bd4bc=_0x4e0e0b;if(!_0x4694c0[_0x3bd4bc(0x252)]()&&_0x4694c0['name'][_0x3bd4bc(0x18b)]('backup-full@')&&_0x4694c0[_0x3bd4bc(0x162)]['endsWith']('.zip')){const _0x3dd5d6=formatDate(fs[_0x3bd4bc(0xf8)](configbackuppath+_0x4694c0[_0x3bd4bc(0x162)])[_0x3bd4bc(0x147)]);_0x172638[_0x3bd4bc(0x269)]({'name':_0x4694c0['name'],'mtime':_0x3dd5d6});}});if(_0x3b5b46)io['to'](_0x3b5b46)['emit']('backup-files',_0x172638);else return _0x172638;}async function backupConfigFiles(){const _0x39cf15=_0x430866;await zipFiles(_0x39cf15(0x231));const _0x28a5d8=getCleanTimeStamp();fs[_0x39cf15(0x266)](zippath+_0x39cf15(0xd7),configbackuppath+(_0x39cf15(0xd1)+_0x28a5d8+_0x39cf15(0xc4)));let _0x283f9e=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x283f9e[_0x39cf15(0x299)]((_0xaa57c7,_0x4d5d37)=>_0xaa57c7['name']<_0x4d5d37[_0x39cf15(0x162)]?0x1:_0x4d5d37[_0x39cf15(0x162)]<_0xaa57c7[_0x39cf15(0x162)]?-0x1:0x0),_0x283f9e['length']>maxBackups&&fs[_0x39cf15(0xc0)](configbackuppath+_0x283f9e[_0x283f9e['length']-0x1]['name']);}function rotateLogFiles(){const _0x39c6e5=_0x430866,_0x523794=fs[_0x39c6e5(0xf8)](logspath+_0x39c6e5(0x235)),_0x2cc12d=_0x523794[_0x39c6e5(0x21b)]/0x400;if(_0x2cc12d>0x64){let _0x5a16b8=fs[_0x39c6e5(0xbc)](logspath,{'withFileTypes':!![]});_0x5a16b8[_0x39c6e5(0x299)]((_0x3db163,_0x4a918e)=>_0x3db163[_0x39c6e5(0x162)]<_0x4a918e[_0x39c6e5(0x162)]?0x1:_0x4a918e['name']<_0x3db163[_0x39c6e5(0x162)]?-0x1:0x0),_0x5a16b8[_0x39c6e5(0x25d)](_0x5c9e83=>{const _0x50beae=_0x39c6e5;if(_0x5c9e83['name']==_0x50beae(0x23b))fs['copyFileSync'](logspath+_0x5c9e83[_0x50beae(0x162)],logspath+_0x50beae(0x1b6));if(_0x5c9e83[_0x50beae(0x162)]==_0x50beae(0x18a))fs[_0x50beae(0x266)](logspath+_0x5c9e83[_0x50beae(0x162)],logspath+_0x50beae(0x23b));_0x5c9e83['name']==_0x50beae(0x235)&&(fs[_0x50beae(0x266)](logspath+_0x5c9e83[_0x50beae(0x162)],logspath+_0x50beae(0x18a)),fs[_0x50beae(0x1ef)](logspath+_0x5c9e83['name'],''));});}}async function zipFiles(_0x2cfaea){const _0x113e1e=_0x430866;let _0x3a4fb6;if(_0x2cfaea=='logs')_0x3a4fb6=logspath;if(_0x2cfaea==_0x113e1e(0x1f0))_0x3a4fb6=configpath;if(_0x2cfaea=='backup-full')_0x3a4fb6=configpath;let _0x2e6d8c=fs['readdirSync'](_0x3a4fb6,{'withFileTypes':!![]});const _0x330e9e=new require(_0x113e1e(0x18e))();_0x2e6d8c[_0x113e1e(0x25d)](_0x2ccda5=>{const _0x3f5252=_0x113e1e;if(!_0x2ccda5['isDirectory']()){let _0x329d14=fs[_0x3f5252(0x20b)](_0x3a4fb6+_0x2ccda5['name']);if(_0x2cfaea=='backup'){const _0x3d54fb=/^bot-[0-9]{3}-config.json$/,_0x18a4ad=_0x3d54fb['test'](_0x2ccda5[_0x3f5252(0x162)]);if(_0x18a4ad){const _0x2db354=JSON[_0x3f5252(0x169)](_0x329d14);if(_0x2db354[_0x3f5252(0x25f)][0x0]){_0x2db354[_0x3f5252(0x25f)][0x0][_0x3f5252(0x287)]=_0x3f5252(0x29d),_0x2db354[_0x3f5252(0x25f)][0x0][_0x3f5252(0x106)]=_0x3f5252(0x29d);if(_0x2db354[_0x3f5252(0x25f)][0x0][_0x3f5252(0x194)])_0x2db354[_0x3f5252(0x25f)][0x0][_0x3f5252(0x194)]=_0x3f5252(0x29d);}_0x329d14=JSON[_0x3f5252(0x186)](_0x2db354,null,0x2);}if(_0x2ccda5[_0x3f5252(0x162)]==_0x3f5252(0x1c1)){const _0x563e83=JSON[_0x3f5252(0x169)](_0x329d14);if(_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0x155)])_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0x155)]=![];if(_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0x1a3)])_0x563e83[_0x3f5252(0x1a9)]['bbPassword']=_0x3f5252(0x29d);if(_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0xec)])_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0xec)]=_0x3f5252(0x29d);if(_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0x158)])_0x563e83[_0x3f5252(0x1a9)][_0x3f5252(0x158)]=null;_0x329d14=JSON[_0x3f5252(0x186)](_0x563e83,null,0x2);}if(_0x2ccda5['name']!=_0x3f5252(0x10c))_0x330e9e[_0x3f5252(0x1e9)](_0x2ccda5[_0x3f5252(0x162)],_0x329d14);}else _0x330e9e[_0x3f5252(0x1e9)](_0x2ccda5['name'],_0x329d14);}});const _0x380e33=_0x330e9e[_0x113e1e(0x114)]({'base64':![],'compression':_0x113e1e(0x23d)});fs[_0x113e1e(0x1ef)](zippath+(_0x2cfaea+_0x113e1e(0xc4)),_0x380e33,_0x113e1e(0x142));}async function unzipFile(_0x9360b6,_0xf10ff4){const _0x3bab73=_0x430866;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3bab73(0x25d)](_0x4a643a=>{const _0x21ff5a=_0x3bab73;if(!_0x4a643a[_0x21ff5a(0x252)]())fs['rmSync'](configpath+_0x4a643a['name']);});const _0x3d26f0=fs['readFileSync'](_0x9360b6+_0xf10ff4,_0x3bab73(0x142)),_0x44e385=new require(_0x3bab73(0x18e))(_0x3d26f0,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x44e385[_0x3bab73(0x150)])[_0x3bab73(0x25d)](_0x57f6a5=>{const _0x5ba3a2=_0x3bab73,_0x293f76=_0x44e385[_0x5ba3a2(0x150)][_0x57f6a5];fs['writeFileSync'](configpath+_0x293f76['name'],_0x293f76['_data']);}),fs[_0x3bab73(0xbc)](temppath,{'withFileTypes':!![]})[_0x3bab73(0x25d)](_0xce3078=>{const _0x3991c9=_0x3bab73;if(!_0xce3078[_0x3991c9(0x252)]())fs['rmSync'](temppath+_0xce3078[_0x3991c9(0x162)]);}),logger[_0x3bab73(0x288)](_0x3bab73(0x126)),process['send']({'restore':!![]},_0x180280=>{});}async function getPublicIp(){const _0x5183da=_0x430866;try{const _0x5367c8=await axios[_0x5183da(0x246)](_0x5183da(0x14f));publicip=_0x5367c8[_0x5183da(0x297)]['ip'];}catch(_0x5a0fd7){}}async function triggerAnalytics(){const _0x4680e0=_0x430866;if(!publicip)await getPublicIp();const _0x5c36a4=getBotsWithMode();let _0x227071=0x0;_0x5c36a4[_0x4680e0(0x25d)](_0x514586=>{const _0x29cc54=_0x4680e0;if(_0x514586[_0x29cc54(0x1bc)]===_0x29cc54(0x1ae))_0x227071++;});const _0x2504ca=getBotExchanges();mixpanel['track'](_0x4680e0(0x1ba),{'distinct_id':settings[_0x4680e0(0x227)],'ip':publicip,'version':serverversion,'numbots':_0x5c36a4[_0x4680e0(0x185)],'numbotsenabled':_0x227071,'exchanges':_0x2504ca});}async function getMessages(){const _0x52923e=_0x430866,_0x5c7091=_0x52923e(0x100),_0x592aeb=new GraphQLClient(_0x5c7091),_0x4091b0={'authorization':_0x52923e(0x1c7)},_0x465d8a=serverversion[_0x52923e(0x19c)]('.'),_0x4fd2c6=_0x465d8a[0x0]+'.'+_0x465d8a[0x1],_0x534216=Math[_0x52923e(0x25c)](settings['lastmsgtelegram'],settings[_0x52923e(0x1e2)]),_0x710ea8={'last':parseInt(_0x534216),'bbm':_0x4fd2c6},_0x1fd886=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2e1b61;try{_0x2e1b61=await _0x592aeb[_0x52923e(0xd5)](_0x1fd886,_0x710ea8,_0x4091b0);}catch(_0xf5f7ba){}if(_0x2e1b61&&_0x2e1b61[_0x52923e(0x18c)]){let _0x21da3b=settings[_0x52923e(0xca)];newMessages=[];for(const _0x2c0df5 of _0x2e1b61[_0x52923e(0x18c)]){newMessages[_0x52923e(0x269)](_0x2c0df5);if(_0x2c0df5[_0x52923e(0x29c)])updateSetting(_0x52923e(0x278),_0x2c0df5[_0x52923e(0x29c)]);let _0x25cec2=_0x2c0df5[_0x52923e(0x29c)]?serverversion>=_0x2c0df5[_0x52923e(0x29c)]:![];if(!_0x25cec2&&_0x2c0df5[_0x52923e(0x21a)]>_0x21da3b){if(_0x2c0df5[_0x52923e(0xff)]===_0x52923e(0xe1)||serverversion['startsWith'](_0x2c0df5['bbvReceive'])){let _0x395f83=''+_0x2c0df5[_0x52923e(0x28a)]+'\x0a\x0a'+_0x2c0df5[_0x52923e(0x284)];const _0x595382=await sendTelegramMsg(toTelegramMarkdown(_0x395f83),_0x52923e(0x265));if(_0x595382)_0x21da3b=_0x2c0df5['number'];}}}updateAvailable=isNewerVersion(settings[_0x52923e(0x278)],serverversion),updateSetting(_0x52923e(0xca),_0x21da3b),emitMessages();}}function emitMessages(){const _0x225a76=_0x430866,_0x2b3b37=settings['lastmsgemitted'];let _0x27acb7=[];newMessages[_0x225a76(0x25d)](_0x4fed77=>{const _0x4b74de=_0x225a76;_0x4fed77['number']>_0x2b3b37&&_0x27acb7[_0x4b74de(0x269)](_0x4fed77);}),_0x27acb7[_0x225a76(0x185)]>0x0&&getAllClients()['forEach'](_0x1c58cf=>{const _0x64534a=_0x225a76;getSocket(_0x1c58cf['id'])[_0x64534a(0x12f)](_0x64534a(0x284),_0x27acb7);});}function confirmMessage(_0x5d3ca1){const _0x1eb11a=_0x430866;updateSetting(_0x1eb11a(0x1e2),Number(_0x5d3ca1));}function isNewerVersion(_0x3220c4,_0x2d0e7f){const _0x9917fc=_0x430866,_0x54008f=_0x2d0e7f[_0x9917fc(0x19c)]('.'),_0x77f2fa=_0x3220c4[_0x9917fc(0x19c)]('.');for(var _0x2a6f4c=0x0;_0x2a6f4c<_0x77f2fa['length'];_0x2a6f4c++){const _0x18670e=~~_0x77f2fa[_0x2a6f4c],_0x46d18a=~~_0x54008f[_0x2a6f4c];if(_0x18670e>_0x46d18a)return!![];if(_0x18670e<_0x46d18a)return![];}return![];}function toTelegramMarkdown(_0x1d95a3){const _0x32e355=_0x430866,_0x5942e4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4c0d39=/\*{2}(.+?)\*{2}/gim;return _0x1d95a3=_0x1d95a3[_0x32e355(0x20f)](_0x5942e4,'$1_$2_$3')[_0x32e355(0x20f)](_0x4c0d39,_0x32e355(0x26b)),_0x1d95a3;}async function validateConfigFile(){const _0x1c0639=_0x430866,_0x3c46ed=dbConfig[_0x1c0639(0x246)](_0x1c0639(0x1cf))[_0x1c0639(0x175)]('botID')[_0x1c0639(0x233)]()||[];if(_0x3c46ed['length']==0x0){let _0x48c64b=0x0,_0x21810d=[];const _0x487dd9=/^bot-([0-9]{3})-config.json$/,_0x1d7f89=fs[_0x1c0639(0xbc)](configpath);_0x1d7f89[_0x1c0639(0x25d)](_0x21f259=>{const _0x50d4ae=_0x1c0639,_0x291ced=_0x487dd9[_0x50d4ae(0x1a4)](_0x21f259);if(_0x291ced){const _0x273abc=_0x291ced[0x1];let _0x4d4c8f=getBotAttributes(_0x273abc);_0x21810d['push']({'botID':_0x273abc,'botname':_0x4d4c8f[_0x50d4ae(0xcc)],'status':_0x50d4ae(0xfb),'live':_0x50d4ae(0x1b0)}),_0x48c64b++;}}),_0x48c64b!=0x0&&(dbConfig[_0x1c0639(0x246)](_0x1c0639(0x1cf))[_0x1c0639(0xdf)](_0x21810d)[_0x1c0639(0x115)](),config=_0x21810d,restoredConfigFile=_0x48c64b);}}async function restoreConfigNotify(_0x1604c6){const _0x1b54a4=_0x430866;let _0x1803e;if(restoredConfigFile==0x1)_0x1803e='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1803e='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x1604c6)io['to'](_0x1b54a4(0x11e))[_0x1b54a4(0x12f)](_0x1b54a4(0x134),_0x1803e);else{logger[_0x1b54a4(0x27b)](_0x1b54a4(0x239)),logger[_0x1b54a4(0x27b)](_0x1803e),logger[_0x1b54a4(0x27b)](_0x1b54a4(0x239)),logger['simple']('');if(tgBot&&settings[_0x1b54a4(0x158)]&&settings['telegramEvents']!=_0x1b54a4(0x16f))tgBot[_0x1b54a4(0x1e0)](settings['telegramChatId'],_0x1b54a4(0x280)+_0x1803e)[_0x1b54a4(0x16a)](_0x1ec8be=>{telegramError(_0x1ec8be);});}}function validateCredentials(_0x468e18,_0x172477){const _0x210fc4=_0x430866;if(_0x468e18[_0x210fc4(0x163)]==settings[_0x210fc4(0x26e)]&&bcrypt[_0x210fc4(0x204)](_0x468e18[_0x210fc4(0x1bd)],settings['bbPassword'])){if(settings[_0x210fc4(0x275)])return{'allow':![],'reason':_0x210fc4(0x171),'token':null};else{const _0x856300=generateLoginToken(_0x172477);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x856300};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1998d4){const _0x3da60d=_0x430866,_0x227eb8=generateLoginToken(_0x1998d4);return{'allow':!![],'reason':_0x3da60d(0x1cc),'token':_0x227eb8};}function validateAccess(_0x336f62,_0xa926d1,_0x1d40ab){const _0x220733=_0x430866,_0x205aba=_0x1d40ab?_0x1d40ab:devices[_0xa926d1]['ip'];let _0x21a3ad;const _0x4c1d26=_0xf22bc8=>{const _0x2c0813=_0x5c25;if(settings[_0x2c0813(0x155)]){if(settings[_0x2c0813(0x275)]){if(telegram2FaApproved(_0xa926d1)){const _0x4174d8=generateLoginToken(_0xa926d1);return{'allow':!![],'reason':_0x2c0813(0x1b9),'token':_0x4174d8};}else return{'allow':![],'reason':_0x2c0813(0x1a0),'token':null};}else return _0x21a3ad=validToken(_0xf22bc8,_0xa926d1),_0x21a3ad[_0x2c0813(0x21c)](_0x2c0813(0x260))?{'allow':!![],'reason':_0x2c0813(0x118),'token':_0xf22bc8}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x220733(0xf6)]){let _0x1d0dd9=[...settings[_0x220733(0xe5)],_0x220733(0xf5),_0x220733(0x122),_0x220733(0xe7)];if(_0x1d0dd9[_0x220733(0x1a6)](_0x205aba))return _0x4c1d26(_0x336f62);else{_0x21a3ad=validToken(_0x336f62,_0xa926d1);if(_0x21a3ad[_0x220733(0x21c)](_0x220733(0x260)))return _0x4c1d26(_0x336f62);else{if(telegramIpApproved(_0xa926d1)){const _0x10604f=generateToken(_0xa926d1);return _0x21a3ad=_0x4c1d26(_0x336f62),_0x21a3ad['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x10604f}:_0x21a3ad;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x220733(0x1c3),'token':null}:{'allow':![],'reason':_0x220733(0x26d),'token':null};}}}else return _0x4c1d26(_0x336f62);}function timelyDecrypt(_0x40f22d,_0xd55dd6=!![]){const _0x27fdd9=_0x430866;if(_0x40f22d)try{const _0x3cfe68=crypt[_0x27fdd9(0xbe)](secure[_0x27fdd9(0xba)],_0x40f22d)[_0x27fdd9(0x284)],_0x206fb7=_0x3cfe68[_0x27fdd9(0x19c)]('@')[0x0],_0x4f4aea=_0x3cfe68[_0x27fdd9(0x19c)]('@')[0x1],_0x258047=new Date()[_0x27fdd9(0x22d)]();if(_0xd55dd6){if(_0x258047-_0x4f4aea<maxSecretAge*0x3e8)return _0x206fb7;else return![];}else return _0x206fb7;}catch(_0x55762f){return![];}else return![];}const validToken=(_0x2d6d90,_0x57013c)=>{const _0xd6fe06=_0x430866,_0x2c9f43=devices[_0x57013c]['ip'];if(!_0x2d6d90)return{'error':_0xd6fe06(0x13e)};for(let _0x37e5d2 of blacklist){if(_0x37e5d2[_0xd6fe06(0x237)]==_0x2d6d90)return{'error':_0xd6fe06(0x21d)};}let _0x11a61f;try{_0x11a61f=jwt[_0xd6fe06(0x27f)](_0x2d6d90,secure[_0xd6fe06(0x167)]+_0x57013c);}catch{return{'error':_0xd6fe06(0x1e1)};}if(!_0x11a61f[_0xd6fe06(0x21c)](_0xd6fe06(0x12b))&&!_0x11a61f['hasOwnProperty'](_0xd6fe06(0x163))||!_0x11a61f['hasOwnProperty'](_0xd6fe06(0xf1)))return{'error':_0xd6fe06(0x19d)};if(!_0x11a61f['hasOwnProperty']('username')&&_0x11a61f[_0xd6fe06(0x21c)](_0xd6fe06(0x12b))){const {clientip:_0x4d0a70}=_0x11a61f;return _0x2c9f43==_0x4d0a70?{'success':_0xd6fe06(0x1aa)}:{'error':_0xd6fe06(0x22c)};}else{if(_0x11a61f[_0xd6fe06(0x21c)](_0xd6fe06(0x163))&&_0x11a61f[_0xd6fe06(0x21c)]('clientip')){const {username:_0x55a96b,clientip:_0x2f676e}=_0x11a61f;return settings['bbUsername']==_0x55a96b&&_0x2c9f43==_0x2f676e?{'success':_0xd6fe06(0x1aa)}:{'error':_0xd6fe06(0x214)};}}},generateLoginToken=_0x383a99=>{const _0x26a504=_0x430866;if(_0x383a99){const _0x149bf0=devices[_0x383a99]['ip'];return jwt['sign']({'username':settings[_0x26a504(0x26e)],'clientip':_0x149bf0},secure[_0x26a504(0x167)]+_0x383a99,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4fc5a2=>{const _0x280e10=_0x430866;if(_0x4fc5a2){const _0xbef726=devices[_0x4fc5a2]['ip'];return jwt[_0x280e10(0x1e5)]({'clientip':_0xbef726},secure[_0x280e10(0x167)]+_0x4fc5a2,{'expiresIn':devices[_0x4fc5a2][_0x280e10(0x294)][_0x280e10(0x1dd)]*0x3c});}else return![];},telegramIpApproved=_0x32f6ed=>{const _0x2bf363=_0x430866;let _0x565ce6=![];return devices[_0x32f6ed][_0x2bf363(0x294)]&&devices[_0x32f6ed][_0x2bf363(0x294)][_0x2bf363(0x1dd)]!='reject'&&(_0x565ce6=devices[_0x32f6ed][_0x2bf363(0x294)][_0x2bf363(0x12b)]==devices[_0x32f6ed]['ip']&&new Date()[_0x2bf363(0x22d)]()-devices[_0x32f6ed]['telegramIpApproval']['timestamp']<devices[_0x32f6ed]['telegramIpApproval'][_0x2bf363(0x1dd)]*0x3c*0x3e8),_0x565ce6;},telegram2FaApproved=_0x17088e=>{const _0x4607c9=_0x430866;let _0x1bbf8f=![];return devices[_0x17088e][_0x4607c9(0x109)]&&devices[_0x17088e]['telegram2FaApproval']['expiry']!=_0x4607c9(0x285)&&(_0x1bbf8f=devices[_0x17088e][_0x4607c9(0x109)][_0x4607c9(0x12b)]==devices[_0x17088e]['ip']&&new Date()['getTime']()-devices[_0x17088e][_0x4607c9(0x109)][_0x4607c9(0xc5)]<devices[_0x17088e][_0x4607c9(0x109)][_0x4607c9(0x1dd)]*0x3c*0x3e8),_0x1bbf8f;},normalizeIP=_0x2c431c=>{const _0x378ca3=_0x430866;let _0x12bee0=null,_0xbe8a03=null;if(ipaddr['isValid'](_0x2c431c)){const _0x4321ff=ipaddr['parse'](_0x2c431c);_0x4321ff['kind']()===_0x378ca3(0x1d9)?(_0x4321ff[_0x378ca3(0xb7)]()&&(_0x12bee0=_0x4321ff[_0x378ca3(0xed)]()['toString']()),_0xbe8a03=_0x4321ff[_0x378ca3(0x20e)]()):(_0x12bee0=_0x4321ff[_0x378ca3(0x20e)](),_0xbe8a03=_0x4321ff[_0x378ca3(0x24e)]()[_0x378ca3(0x20e)]());}return{'show':_0x12bee0?_0x12bee0:_0xbe8a03,'store':_0xbe8a03};};function formatDate(_0x5e9ab1){const _0x2262e4=_0x430866;return _0x5e9ab1['getFullYear']()+'/'+(_0x5e9ab1['getMonth']()+0x1)[_0x2262e4(0x20e)]()['padStart'](0x2,'0')+'/'+_0x5e9ab1[_0x2262e4(0x19a)]()[_0x2262e4(0x20e)]()[_0x2262e4(0x264)](0x2,'0')+'\x20'+_0x5e9ab1['getHours']()[_0x2262e4(0x20e)]()[_0x2262e4(0x264)](0x2,'0')+':'+_0x5e9ab1['getMinutes']()[_0x2262e4(0x20e)]()[_0x2262e4(0x264)](0x2,'0')+':'+_0x5e9ab1[_0x2262e4(0x152)]()[_0x2262e4(0x20e)]()[_0x2262e4(0x264)](0x2,'0');}function sleep(_0x3e69fa){return new Promise(_0x39f00e=>setTimeout(_0x39f00e,_0x3e69fa));}