const _0x529c9e=_0x24ad;(function(_0x1c0fe9,_0x6447d){const _0x32412=_0x24ad,_0x1f33c5=_0x1c0fe9();while(!![]){try{const _0x44b259=-parseInt(_0x32412(0x1e1))/0x1*(parseInt(_0x32412(0x1c2))/0x2)+parseInt(_0x32412(0x2c5))/0x3+-parseInt(_0x32412(0x224))/0x4+parseInt(_0x32412(0x27e))/0x5+parseInt(_0x32412(0x114))/0x6*(parseInt(_0x32412(0x16c))/0x7)+-parseInt(_0x32412(0x208))/0x8+parseInt(_0x32412(0x13d))/0x9*(parseInt(_0x32412(0x132))/0xa);if(_0x44b259===_0x6447d)break;else _0x1f33c5['push'](_0x1f33c5['shift']());}catch(_0x4f209b){_0x1f33c5['push'](_0x1f33c5['shift']());}}}(_0x1291,0xba755));const _0x50644a=function(){let _0x4da660=!![];return function(_0x1e6a6b,_0x2cc19){const _0x1e5c5c=_0x4da660?function(){const _0x5aa7af=_0x24ad;if(_0x2cc19){const _0x3b3abc=_0x2cc19[_0x5aa7af(0x1fb)](_0x1e6a6b,arguments);return _0x2cc19=null,_0x3b3abc;}}:function(){};return _0x4da660=![],_0x1e5c5c;};}(),_0x3ffaba=_0x50644a(this,function(){const _0x10e896=_0x24ad;return _0x3ffaba[_0x10e896(0x2c7)]()[_0x10e896(0x290)]('(((.+)+)+)+$')[_0x10e896(0x2c7)]()['constructor'](_0x3ffaba)[_0x10e896(0x290)](_0x10e896(0x283));});_0x3ffaba();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x529c9e(0x2d8)),fs=require('fs'),fns=require(_0x529c9e(0x26c)),low=require(_0x529c9e(0x144)),FileSync=require(_0x529c9e(0x150)),path=require(_0x529c9e(0x20d)),crypto=require(_0x529c9e(0x2e5)),Crypt=require(_0x529c9e(0x2d1))[_0x529c9e(0x106)],RSA=require('hybrid-crypto-js')[_0x529c9e(0x2b5)],bcrypt=require(_0x529c9e(0xed)),jwt=require(_0x529c9e(0x271)),ipaddr=require(_0x529c9e(0x140)),argv=require(_0x529c9e(0x21e))(process[_0x529c9e(0x194)][_0x529c9e(0x127)](0x2))[_0x529c9e(0x194)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x529c9e(0xf8)),axios=require(_0x529c9e(0x205)),{GraphQLClient,gql}=require(_0x529c9e(0x2ea)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x529c9e(0x17c)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x529c9e(0x125)](PORT)&&(console[_0x529c9e(0x1f0)](_0x529c9e(0x18d)+PORT+_0x529c9e(0x1ad)),process[_0x529c9e(0x28d)](0x1));const HOST=argv[_0x529c9e(0x11e)]||null,userID=argv[_0x529c9e(0x131)]||'',debugging=argv['d']||![],nodeversion=process[_0x529c9e(0x253)]['node'];let bbpath=_0x529c9e(0x277),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x529c9e(0x20e),securefile=_0x529c9e(0x2dc),environment=require('./'+bbpath2+'version.json')[_0x529c9e(0x15b)]||_0x529c9e(0x1e8),maxBackups=0xa;let validInstallation=!![];!fs[_0x529c9e(0xe8)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x529c9e(0x266)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x529c9e(0x17e),configbackuppath=configpath+_0x529c9e(0x2a2),logspath=userID?bbpath+_0x529c9e(0x153)+userID+'/':bbpath+_0x529c9e(0x153),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x529c9e(0x2a6),loggerfile=fs[_0x529c9e(0x25e)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x529c9e(0x2d2)+userID+'/':bbpath+_0x529c9e(0x2d2);!fs[_0x529c9e(0xe8)](configpath)&&fs[_0x529c9e(0x2ae)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x529c9e(0x2ae)](configbackuppath);!fs[_0x529c9e(0xe8)](logspath)&&fs[_0x529c9e(0x2ae)](logspath);!fs[_0x529c9e(0xe8)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x529c9e(0xe8)](temppath)&&fs[_0x529c9e(0x2ae)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x529c9e(0x29c)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x529c9e(0x29c)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x529c9e(0x193),'onepagemode':![],'marketcapApi':''}})[_0x529c9e(0x256)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x529c9e(0x29c)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x529c9e(0x1d5),'rsaStandard':_0x529c9e(0x158)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x529c9e(0x108),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings['telegramToken']!=''&&settings[_0x529c9e(0x232)]!=_0x529c9e(0x272))&&settings[_0x529c9e(0x126)]&&settings[_0x529c9e(0x126)]!='')initTelegram();const parseColor=(_0x56811f,_0x5837f8)=>{const _0x5c7418=_0x529c9e,_0x21fe70=/#[A-Z]{3}#/g;if(typeof _0x56811f=='string'){!_0x5837f8?_0x56811f=_0x56811f[_0x5c7418(0x10d)](_0x21fe70,''):(_0x56811f=_0x56811f['replace'](/#BLU#/g,_0x5c7418(0x1ab)),_0x56811f=_0x56811f[_0x5c7418(0x10d)](/#RED#/g,_0x5c7418(0x230)),_0x56811f=_0x56811f[_0x5c7418(0x10d)](/#YEL#/g,_0x5c7418(0x119)),_0x56811f=_0x56811f['replace'](/#MAG#/g,_0x5c7418(0x245)),_0x56811f=_0x56811f[_0x5c7418(0x10d)](/#CYA#/g,_0x5c7418(0x2ce)),_0x56811f=_0x56811f[_0x5c7418(0x10d)](/#RES#/g,'\x1b[0m'));;}return _0x56811f;},logger={'screen':_0x4c38aa=>{const _0x564e90=_0x529c9e;console[_0x564e90(0x1f0)](parseColor(_0x4c38aa,!![]));},'simple':_0xf98f0c=>{const _0xef9a75=_0x529c9e;console['log'](parseColor(_0xf98f0c,!![])),loggerfile[_0xef9a75(0x256)](util[_0xef9a75(0x1a9)](parseColor(_0xf98f0c,![]))+'\x0a');},'full':async _0x280454=>{const _0x1015ae=_0x529c9e,_0x6774bc=getTimeStamp()+_0x1015ae(0x20c)+_0x280454;console[_0x1015ae(0x1f0)](parseColor(_0x6774bc,!![])),loggerfile[_0x1015ae(0x256)](util[_0x1015ae(0x1a9)](parseColor(_0x6774bc,![]))+'\x0a');if(tgBot&&settings[_0x1015ae(0x26f)]&&settings[_0x1015ae(0x11c)]!='orders')await sendTelegram(settings[_0x1015ae(0x26f)],_0x1015ae(0x239)+parseColor(_0x280454,![]));},'debug':async(_0x1777d6,_0x3825f0='')=>{const _0x9754=_0x529c9e,_0x401486=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x1777d6;if(debugging)console[_0x9754(0x1f0)](parseColor(_0x401486,!![]));loggerfile[_0x9754(0x256)](util[_0x9754(0x1a9)](parseColor(_0x401486,![]))+'\x0a');if(_0x3825f0){if(debugging)console[_0x9754(0x1f0)](_0x3825f0);loggerfile[_0x9754(0x256)](util[_0x9754(0x1a9)](_0x3825f0)+'\x0a');}}};let terminating=![];process['on'](_0x529c9e(0xf7),function(_0x1da267){const _0x52ae7b=_0x529c9e;_0x1da267['toString']()[_0x52ae7b(0x130)](_0x52ae7b(0x279))?(logger['simple'](_0x52ae7b(0x170)+_0x1da267[_0x52ae7b(0x17c)]+_0x52ae7b(0x243)),process[_0x52ae7b(0x175)]({'terminate':!![]},_0x558893=>{})):logger[_0x52ae7b(0x234)](_0x1da267);}),process['on'](_0x529c9e(0x28d),()=>{const _0x35b377=_0x529c9e;stopAllBots(),process[_0x35b377(0x28d)](0x0);}),process['on'](_0x529c9e(0x223),()=>{stopAllBots(),process['exit'](0x0);}),process['on']('SIGINT',()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x529c9e(0x1af))[_0x529c9e(0x2cc)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];function _0x24ad(_0x5c7df4,_0x2fa3df){const _0x47aa4b=_0x1291();return _0x24ad=function(_0x3ffaba,_0x50644a){_0x3ffaba=_0x3ffaba-0xe2;let _0x12917f=_0x47aa4b[_0x3ffaba];return _0x12917f;},_0x24ad(_0x5c7df4,_0x2fa3df);}const express=require(_0x529c9e(0x14b)),app=express(),http=require(_0x529c9e(0x1e5))[_0x529c9e(0x1fc)](app);app[_0x529c9e(0x1b0)](fileUpload({'useTempFiles':!![]})),app[_0x529c9e(0xf1)]('/download/:type',async(_0x6183e5,_0x567510)=>{const _0x39cbbc=_0x529c9e,_0xf6e1c8=_0x6183e5['params']['type'],_0x5339b6=getClientsWithBotID(_0x39cbbc(0x2e3)),_0x3e201e=_0x6183e5['headers'][_0x39cbbc(0x110)],_0x423e89=timelyDecrypt(_0x3e201e,![]),_0x2bd209=_0x5339b6[_0x39cbbc(0x236)](_0x3dd779=>_0x3dd779[_0x39cbbc(0x110)]==_0x423e89);if(_0x2bd209){const _0x3f24d8=normalizeIP(_0x6183e5[_0x39cbbc(0x225)]['remoteAddress'])[_0x39cbbc(0x227)],_0x2ba0b2=_0x6183e5[_0x39cbbc(0x214)]['tkn'];if(validateAccess(_0x2ba0b2,_0x423e89,_0x3f24d8)[_0x39cbbc(0x1cb)])_0xf6e1c8==_0x39cbbc(0x14e)&&await backupConfigFiles(),await zipFiles(_0xf6e1c8),_0x567510[_0x39cbbc(0x218)](zippath+(_0xf6e1c8+_0x39cbbc(0x199)),_0x27cdea=>{const _0x1e4077=_0x39cbbc;_0x27cdea&&(logger['full'](_0x1e4077(0x2a0)+_0xf6e1c8),logger['simple'](_0x27cdea));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0xf6e1c8+_0x39cbbc(0x160));}else logger[_0x39cbbc(0x18f)](_0x39cbbc(0x1a6)+_0xf6e1c8+'\x20(2)');}),app[_0x529c9e(0x273)](_0x529c9e(0x115),async(_0x1dfa52,_0x32c0c8)=>{const _0x40ad76=_0x529c9e,_0x439a81=getClientsWithBotID(_0x40ad76(0x2e3)),_0xbd3d75=_0x1dfa52[_0x40ad76(0x214)]['uuid'],_0x451098=timelyDecrypt(_0xbd3d75,![]),_0x188436=_0x439a81['find'](_0x4cb93a=>_0x4cb93a['uuid']==_0x451098);logger[_0x40ad76(0x1a7)]('Backup\x20file\x20uploaded');if(_0x188436){const _0x429237=normalizeIP(_0x1dfa52[_0x40ad76(0x225)][_0x40ad76(0x1e0)])[_0x40ad76(0x227)],_0xd3003c=_0x1dfa52[_0x40ad76(0x214)]['tkn'];if(validateAccess(_0xd3003c,_0x451098,_0x429237)['allow']){if(_0x1dfa52[_0x40ad76(0x147)]){const _0x471409=_0x1dfa52[_0x40ad76(0x147)][_0x40ad76(0x2ad)];await _0x471409['mv'](temppath+_0x471409[_0x40ad76(0x268)]),_0x32c0c8['send']({'status':!![],'message':_0x40ad76(0x2e4)});const _0x7c3b0e=getBotsWithMode();_0x7c3b0e[_0x40ad76(0x2ca)]>0x0?confirmRestore(temppath,_0x471409[_0x40ad76(0x268)]):unzipFile(temppath,_0x471409[_0x40ad76(0x268)]);}}else logger[_0x40ad76(0x18f)](_0x40ad76(0xf2));}else logger[_0x40ad76(0x18f)](_0x40ad76(0x195));}),app['use'](express[_0x529c9e(0x2c1)](path[_0x529c9e(0x1eb)](__dirname,bbpath2,'build2'))),app['use'](express[_0x529c9e(0x2c1)](path[_0x529c9e(0x1eb)](__dirname,bbpath2,_0x529c9e(0x171)))),app[_0x529c9e(0xf1)]('/',function(_0x543f1a,_0x1ce916){const _0x40e0b2=_0x529c9e;_0x1ce916['sendFile'](path[_0x40e0b2(0x1eb)](__dirname,bbpath2,_0x40e0b2(0x252),_0x40e0b2(0x1f1)));}),app[_0x529c9e(0xf1)](_0x529c9e(0x25b),function(_0x19f3ec,_0x1993bc){const _0x261f99=_0x529c9e;_0x1993bc['sendFile'](path[_0x261f99(0x1eb)](__dirname,bbpath2,_0x261f99(0x171),_0x261f99(0x1f1)));}),app['get']('/:bot/portfolio',(_0x462d71,_0x41e310)=>{const _0x265bb7=_0x529c9e;_0x41e310[_0x265bb7(0x1cf)](path['join'](__dirname,bbpath2,_0x265bb7(0x171),'index.html'));}),app[_0x529c9e(0xf1)](_0x529c9e(0x14c),(_0x41c6f0,_0x1e26df)=>{const _0x24f5c1=_0x529c9e;_0x1e26df[_0x24f5c1(0x1cf)](path['join'](__dirname,bbpath2,_0x24f5c1(0x171),_0x24f5c1(0x1f1)));}),app[_0x529c9e(0xf1)](_0x529c9e(0x163),(_0x18bd85,_0x46a460)=>{const _0x342444=_0x529c9e;_0x46a460['sendFile'](path[_0x342444(0x1eb)](__dirname,bbpath2,_0x342444(0x171),_0x342444(0x1f1)));}),app[_0x529c9e(0xf1)](_0x529c9e(0x124),(_0x455ea9,_0x4fac8c)=>{const _0x15f4c1=_0x529c9e;_0x4fac8c[_0x15f4c1(0x1cf)](path['join'](__dirname,bbpath2,_0x15f4c1(0x171),_0x15f4c1(0x1f1)));}),app[_0x529c9e(0xf1)](_0x529c9e(0x1ea),(_0xe81837,_0x19d838)=>{const _0x368a78=_0x529c9e;_0x19d838[_0x368a78(0x1cf)](path[_0x368a78(0x1eb)](__dirname,bbpath2,_0x368a78(0x171),'index.html'));}),app[_0x529c9e(0xf1)](_0x529c9e(0x2af),(_0x2677cb,_0x115a89)=>{const _0x3350ae=_0x529c9e;_0x115a89['sendFile'](path[_0x3350ae(0x1eb)](__dirname,bbpath2,_0x3350ae(0x171),_0x3350ae(0x1f1)));});if(HOST)http[_0x529c9e(0x291)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2912c9=_0x529c9e;let _0xde4525=_0x2912c9(0x1a1);const _0x574c33=networkInterfaces(),_0x535e9a={};for(const _0x40e9ab of Object[_0x2912c9(0x2a8)](_0x574c33)){for(const _0x11ee6f of _0x574c33[_0x40e9ab]){if((_0x11ee6f[_0x2912c9(0x2da)]==_0x2912c9(0x293)||_0x11ee6f[_0x2912c9(0x2da)]==0x4)&&!_0x11ee6f[_0x2912c9(0xff)]){const _0x3a96e4=ipaddr[_0x2912c9(0x251)](_0x11ee6f[_0x2912c9(0x1ec)])[_0x2912c9(0x29d)]();_0x3a96e4!=_0x2912c9(0x113)&&(!_0x535e9a[_0x40e9ab]&&(_0x535e9a[_0x40e9ab]=[]),_0x535e9a[_0x40e9ab]['push'](_0x11ee6f[_0x2912c9(0x1ec)]),_0xde4525=_0x11ee6f['address']);}}}return{'serverip':_0xde4525,'netinterfaces':_0x535e9a};}async function startServer(){const _0x3dafd3=_0x529c9e,{serverip:_0x4bf7fc,netinterfaces:_0x190937}=getServerIP();logger['simple'](''),logger[_0x3dafd3(0x234)](_0x3dafd3(0x137)),await logger[_0x3dafd3(0x18f)](_0x3dafd3(0x169)+serverversion+_0x3dafd3(0xe9)+(environment==_0x3dafd3(0x2d3)?'(staging)':'')+'\x0a'+(_0x3dafd3(0x2c8)+PORT+_0x3dafd3(0x103))+('=>\x20Go\x20to\x20#CYA#http://'+_0x4bf7fc+':'+PORT+_0x3dafd3(0x295))),logger['simple'](_0x3dafd3(0x137));if(config['length']!=0x0)for(const _0x5c18cf of config){const _0x99f4d4=_0x5c18cf['mode']==_0x3dafd3(0x275)?'a':'m';if(_0x5c18cf[_0x3dafd3(0x246)]==_0x3dafd3(0x220)||_0x5c18cf[_0x3dafd3(0x246)]=='new')await logger[_0x3dafd3(0x18f)](_0x3dafd3(0x111)+_0x99f4d4+_0x3dafd3(0x1fe)+_0x5c18cf[_0x3dafd3(0x1c4)]+_0x3dafd3(0x2a4)+_0x5c18cf['botname']),startBot([_0x5c18cf[_0x3dafd3(0x1c4)],userID],{'cwd':bbpath},function(_0x5bb78c){const _0x5042ee=_0x3dafd3;if(_0x5bb78c)logger[_0x5042ee(0x18f)](_0x5bb78c);});else(_0x5c18cf[_0x3dafd3(0x246)]==_0x3dafd3(0x255)||_0x5c18cf[_0x3dafd3(0x246)]=='new-disabled')&&await logger[_0x3dafd3(0x18f)](_0x3dafd3(0x2a3)+_0x99f4d4+_0x3dafd3(0x1d3)+_0x5c18cf[_0x3dafd3(0x1c4)]+'\x20|\x20'+_0x5c18cf[_0x3dafd3(0x28e)]);}else!newBot&&logger[_0x3dafd3(0x234)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x3dafd3(0x137)),logger[_0x3dafd3(0x234)](''),await logger['debug'](_0x3dafd3(0x120)+nodeversion),await logger[_0x3dafd3(0x1a7)]('Network\x20Interfaces:',_0x190937);}function startSocket(){io['on']('connection',_0x5e5a48=>{const _0x15e325=_0x24ad;let _0x460f1c,_0x41564f,_0x2b0b53,_0x51bc88,_0xe4c020;const _0x10adf4=_0x5e5a48[_0x15e325(0x1b3)][_0x15e325(0x214)]['referer'];_0x41564f=_0x10adf4[_0x15e325(0x102)](/bot[0-9]{3}/);if(_0x41564f)_0x2b0b53=_0x41564f[0x0][_0x15e325(0x102)](/[0-9]{3}/);if(_0x2b0b53)_0x460f1c=_0x2b0b53[0x0];else _0x460f1c=_0x15e325(0x2e3);const _0x19b5cd=_0x5e5a48[_0x15e325(0x1b3)][_0x15e325(0xe5)][_0x15e325(0x287)];if(!_0x19b5cd)_0x5e5a48[_0x15e325(0x100)]('status',{'publicKey':secure['publicKey']});else{_0x51bc88=timelyDecrypt(_0x19b5cd,![]);if(!_0x51bc88)_0x5e5a48[_0x15e325(0x100)](_0x15e325(0x246),{'publicKey':secure['publicKey']});else{_0xe4c020=normalizeIP(_0x5e5a48['conn'][_0x15e325(0x1e0)])[_0x15e325(0x227)];if(!devices[_0x51bc88])devices[_0x51bc88]={'uuid':_0x51bc88,'access':{'token':null}};devices[_0x51bc88]['ip']=_0xe4c020;const _0x34b594=addClient(_0x5e5a48['id'],_0x51bc88,_0x460f1c);setAccess(_0x34b594),emitMessages(),_0x5e5a48['on'](_0x15e325(0x2e7),_0x2b6881=>{const _0xfa24fa=_0x15e325,_0x1f7c44=timelyDecrypt(_0x2b6881['password'],!![],'|@|');if(_0x1f7c44){_0x2b6881={'username':_0x2b6881[_0xfa24fa(0x2e0)],'password':_0x1f7c44},devices[_0x51bc88][_0xfa24fa(0x20f)]=validateCredentials(_0x2b6881,_0x51bc88);if(devices[_0x51bc88][_0xfa24fa(0x20f)][_0xfa24fa(0x1cb)]==![]&&devices[_0x51bc88]['access']['reason']==_0xfa24fa(0x122))_0x5e5a48[_0xfa24fa(0x100)](_0xfa24fa(0x246),{'access':devices[_0x51bc88]['access']}),loginAccess2FA(_0x51bc88,_0xe4c020);else{if(devices[_0x51bc88][_0xfa24fa(0x20f)][_0xfa24fa(0x1cb)]==![]&&devices[_0x51bc88][_0xfa24fa(0x20f)]['reason']==_0xfa24fa(0x2bd))_0x5e5a48[_0xfa24fa(0x100)](_0xfa24fa(0x246),{'access':devices[_0x51bc88][_0xfa24fa(0x20f)]});else devices[_0x51bc88][_0xfa24fa(0x20f)][_0xfa24fa(0x1cb)]&&devices[_0x51bc88][_0xfa24fa(0x20f)][_0xfa24fa(0x261)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x51bc88)[_0xfa24fa(0x203)](_0x2682a5=>{setAccess(_0x2682a5);}),logger[_0xfa24fa(0x1a7)](_0xfa24fa(0x13f)+_0x51bc88[_0xfa24fa(0x127)](-0x8)),setTokenRefresh(_0x51bc88),setSessionTimeout('login',_0x51bc88));}}else logger[_0xfa24fa(0x18f)](_0xfa24fa(0x18a));}),_0x5e5a48['on']('reset-password',()=>{resetPassword();}),_0x5e5a48['on']('disconnect',_0x3e79c0=>{removeClient(_0x5e5a48['id']);}),_0x460f1c==_0x15e325(0x2e3)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x6b64f1){const _0xc67381=_0x529c9e;if(_0x6b64f1!='botmanager'&&config[_0xc67381(0x117)]!=''){if(pid[_0x6b64f1])pid[_0x6b64f1][_0xc67381(0x175)]({'function':_0xc67381(0x1c8),'args':null});}_0x6b64f1!=_0xc67381(0x2e3)&&broadcastToBots('bots',JSON[_0xc67381(0x16e)](config));}function reloadBotManager(){const _0x386cb3=_0x529c9e;getClientsWithBotID(_0x386cb3(0x2e3))['forEach'](_0x1f9184=>{const _0x3a7287=_0x386cb3;getSocket(_0x1f9184['id'])[_0x3a7287(0x100)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x377600){const _0x18806f=_0x529c9e;return io[_0x18806f(0x1f4)][_0x18806f(0x1f4)]['get'](_0x377600);}function setAccess(_0x588487){const _0x443b15=_0x529c9e,_0x148d41=getSocket(_0x588487['id']),_0x4da9c3=_0x588487[_0x443b15(0x110)],_0x4e49b9=_0x588487[_0x443b15(0x118)];devices[_0x4da9c3]['access']=validateAccess(devices[_0x4da9c3][_0x443b15(0x20f)]['token'],_0x4da9c3),logger[_0x443b15(0x1a7)](_0x443b15(0x29b)+devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x261)]+_0x443b15(0x174)+_0x588487['id']['slice'](-0x8)+_0x443b15(0x2db)+_0x4da9c3[_0x443b15(0x127)](-0x8)),_0x148d41[_0x443b15(0x1eb)](_0x4da9c3);if(devices[_0x4da9c3]['access']['allow']){_0x148d41[_0x443b15(0x1eb)](_0x4e49b9);if(_0x4e49b9==_0x443b15(0x2e3))initializeSocketBotManager(_0x148d41);else initializeSocketBot(_0x148d41);initClient(_0x4e49b9);}devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x164)]&&devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x261)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x4da9c3),devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x164)]&&devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x261)]==_0x443b15(0xe2)&&setSessionTimeout(_0x443b15(0x2e7),_0x4da9c3),_0x148d41[_0x443b15(0x100)](_0x443b15(0x246),{'status':_0x588487[_0x443b15(0x23c)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4da9c3]['access'],'externalip':devices[_0x4da9c3]['ip'],'publicKey':secure[_0x443b15(0x136)],'userid':settings[_0x443b15(0x1d2)],'validInstallation':validInstallation}),devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x1cb)]==![]&&devices[_0x4da9c3][_0x443b15(0x20f)][_0x443b15(0x261)]==_0x443b15(0x2b0)&&temporaryAccess2FA(_0x4da9c3,devices[_0x4da9c3]['ip']);}function setSessionTimeout(_0x3685e5,_0x2cef48){const _0x30d99b=_0x529c9e;let _0x47c3ce;if(_0x3685e5==_0x30d99b(0x2e7))_0x47c3ce=loginExpiry*0x3c*0x3e8;else _0x47c3ce=devices[_0x2cef48][_0x30d99b(0x25f)][_0x30d99b(0x235)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x2cef48]['telegramIpApproval'][_0x30d99b(0x26b)]);if(devices[_0x2cef48][_0x30d99b(0xf4)])clearTimeout(devices[_0x2cef48][_0x30d99b(0xf4)]);devices[_0x2cef48]['pidExpireLogin']=setTimeout(()=>{const _0x2ac1d6=_0x30d99b;if(devices[_0x2cef48][_0x2ac1d6(0x15e)])clearTimeout(devices[_0x2cef48]['pidRefreshToken']);removeSocketListeners(_0x2cef48),addBlacklist(_0x2cef48),devices[_0x2cef48][_0x2ac1d6(0x25f)]=null,devices[_0x2cef48][_0x2ac1d6(0x159)]=null,devices[_0x2cef48]['access'][_0x2ac1d6(0x164)]=null,logger['debug'](_0x2ac1d6(0x104)+_0x2cef48['slice'](-0x8)),devices[_0x2cef48][_0x2ac1d6(0x20f)]=validateAccess(devices[_0x2cef48][_0x2ac1d6(0x20f)][_0x2ac1d6(0x164)],_0x2cef48),!(devices[_0x2cef48][_0x2ac1d6(0x20f)][_0x2ac1d6(0x1cb)]&&devices[_0x2cef48][_0x2ac1d6(0x20f)][_0x2ac1d6(0x261)]=='login\x20not\x20required')&&(_0x3685e5==_0x2ac1d6(0x2e7)?io['to'](_0x2cef48)[_0x2ac1d6(0x100)](_0x2ac1d6(0x246),{'access':{'allow':![],'reason':_0x2ac1d6(0x21f),'token':null}}):io['to'](_0x2cef48)[_0x2ac1d6(0x100)](_0x2ac1d6(0x246),{'access':{'allow':![],'reason':_0x2ac1d6(0x2bf),'token':null}})),devices[_0x2cef48][_0x2ac1d6(0x20f)][_0x2ac1d6(0x164)]=null;},_0x47c3ce);}function setTokenRefresh(_0x2ca417){const _0x12ce2b=_0x529c9e;if(devices[_0x2ca417][_0x12ce2b(0x15e)])clearTimeout(devices[_0x2ca417][_0x12ce2b(0x15e)]);devices[_0x2ca417][_0x12ce2b(0x15e)]=setTimeout(()=>{const _0x5ef640=_0x12ce2b;getClientsWithUuid(_0x2ca417)[_0x5ef640(0x2ca)]!=0x0?(devices[_0x2ca417][_0x5ef640(0x20f)]=refreshToken(_0x2ca417),io['to'](_0x2ca417)[_0x5ef640(0x100)](_0x5ef640(0x246),{'status':_0x5ef640(0x24b),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2ca417]['access'],'externalip':devices[_0x2ca417]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x2ca417)):clearTimeout(devices[_0x2ca417][_0x5ef640(0x15e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3c3925){const _0x7cca25=_0x529c9e,_0x10b9e3=getClient(_0x3c3925['id'])[_0x7cca25(0x110)];_0x3c3925[_0x7cca25(0x100)]('bots',config),_0x3c3925['emit'](_0x7cca25(0x29a),cleanSettings()),_0x3c3925['on'](_0x7cca25(0x274),_0x35e5eb=>{const _0x32fbe9=_0x7cca25;if(validateAccess(_0x35e5eb,_0x10b9e3)[_0x32fbe9(0x1cb)])addBot();else logger[_0x32fbe9(0x18f)](_0x32fbe9(0x12d));}),_0x3c3925['on'](_0x7cca25(0x1a4),(_0x16cd41,_0x51b04a)=>{const _0x4c6663=_0x7cca25;if(validateAccess(_0x51b04a,_0x10b9e3)['allow'])toggleBot(_0x16cd41[_0x4c6663(0x1c4)],_0x16cd41['status'],_0x16cd41[_0x4c6663(0x1c5)]);else logger['full'](_0x4c6663(0x226));}),_0x3c3925['on'](_0x7cca25(0x191),(_0x47ecc1,_0x447689)=>{const _0x3862eb=_0x7cca25;if(validateAccess(_0x447689,_0x10b9e3)[_0x3862eb(0x1cb)])toggleBotMode(_0x47ecc1);else logger[_0x3862eb(0x18f)](_0x3862eb(0x226));}),_0x3c3925['on'](_0x7cca25(0x1b9),(_0x1fc136,_0x333f27)=>{const _0x4487bb=_0x7cca25;if(validateAccess(_0x333f27,_0x10b9e3)[_0x4487bb(0x1cb)])deleteBot(_0x1fc136);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x3c3925['on'](_0x7cca25(0x1fd),(_0x31af43,_0x467e08)=>{const _0x1edd1e=_0x7cca25;if(validateAccess(_0x467e08,_0x10b9e3)['allow'])storeSettings(_0x31af43,!![]);else logger[_0x1edd1e(0x18f)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x3c3925['on'](_0x7cca25(0x13e),_0x118c2b=>{const _0x18eeaa=_0x7cca25;if(validateAccess(_0x118c2b,_0x10b9e3)[_0x18eeaa(0x1cb)])updateBB(_0x18eeaa(0x129));else logger[_0x18eeaa(0x18f)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3c3925['on']('reinstall-bb',_0x1bc5de=>{const _0x2677ae=_0x7cca25;if(validateAccess(_0x1bc5de,_0x10b9e3)[_0x2677ae(0x1cb)])updateBB('reinstall');else logger[_0x2677ae(0x18f)](_0x2677ae(0xfe));}),_0x3c3925['on'](_0x7cca25(0x278),_0x22ab7f=>{const _0x3ec690=_0x7cca25;if(validateAccess(_0x22ab7f,_0x10b9e3)['allow']){const _0x371645=getClient(_0x3c3925['id']);if(_0x371645)getBackupFiles(_0x371645[_0x3ec690(0x110)]);else logger[_0x3ec690(0x18f)](_0x3ec690(0x139));}else logger[_0x3ec690(0x18f)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x3c3925['on'](_0x7cca25(0x14a),(_0x2e1e16,_0xddb8e3)=>{const _0x3b151b=_0x7cca25;if(validateAccess(_0xddb8e3,_0x10b9e3)[_0x3b151b(0x1cb)])restoreBackupFile(_0x2e1e16);else logger[_0x3b151b(0x18f)](_0x3b151b(0x23a));}),_0x3c3925['on'](_0x7cca25(0x24a),_0x3183e7=>{const _0x3c838e=_0x7cca25;if(validateAccess(_0x3183e7,_0x10b9e3)[_0x3c838e(0x1cb)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x3c3925['on'](_0x7cca25(0x15d),(_0x3b4fd2,_0x557059)=>{const _0x1973b1=_0x7cca25;if(validateAccess(_0x557059,_0x10b9e3)['allow'])confirmMessage(_0x3b4fd2);else logger[_0x1973b1(0x18f)](_0x1973b1(0x161));}),_0x3c3925['on'](_0x7cca25(0x29e),_0x5c5afc=>{const _0x41014a=_0x7cca25;if(validateAccess(_0x5c5afc,_0x10b9e3)[_0x41014a(0x1cb)]){if(devices[_0x10b9e3][_0x41014a(0x15e)])clearTimeout(devices[_0x10b9e3]['pidRefreshToken']);if(devices[_0x10b9e3]['pidExpireLogin'])clearTimeout(devices[_0x10b9e3][_0x41014a(0xf4)]);removeSocketListeners(getClient(_0x3c3925['id'])[_0x41014a(0x110)]),addBlacklist(_0x10b9e3),devices[_0x10b9e3]['telegramIpApproval']=null,devices[_0x10b9e3][_0x41014a(0x159)]=null,devices[_0x10b9e3][_0x41014a(0x20f)][_0x41014a(0x164)]=null,logger[_0x41014a(0x1a7)](_0x41014a(0x1e9)+_0x10b9e3['slice'](-0x8)),io['to'](getClient(_0x3c3925['id'])[_0x41014a(0x110)])[_0x41014a(0x100)]('status',{'access':{'allow':![],'reason':_0x41014a(0x1e2),'token':null}});}else logger[_0x41014a(0x18f)](_0x41014a(0x2b1));});}function initializeSocketBot(_0x3139ad){const _0x282233=_0x529c9e,_0x4b271b=getClient(_0x3139ad['id'])[_0x282233(0x118)],_0x2cbc47=getClient(_0x3139ad['id'])[_0x282233(0x110)];_0x3139ad['on']('get-logs',(_0x20ee35,_0x9b80e4)=>{const _0x170937=_0x282233;if(validateAccess(_0x9b80e4,_0x2cbc47)[_0x170937(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b][_0x170937(0x175)]({'function':_0x170937(0x143),'args':_0x20ee35});}else logger[_0x170937(0x18f)](_0x170937(0x25d));}),_0x3139ad['on']('delete-alerts',(_0x251b17,_0x2fe3ae)=>{const _0x23525f=_0x282233;if(validateAccess(_0x2fe3ae,_0x2cbc47)['allow']){if(pid[_0x4b271b])pid[_0x4b271b]['send']({'function':_0x23525f(0x1b6),'args':_0x251b17});}else logger[_0x23525f(0x18f)](_0x23525f(0x133));}),_0x3139ad['on'](_0x282233(0x19a),(_0x124de3,_0x2e6737)=>{const _0x549ddb=_0x282233;if(validateAccess(_0x2e6737,_0x2cbc47)[_0x549ddb(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b][_0x549ddb(0x175)]({'function':'getPortfolio','args':_0x124de3});}else logger[_0x549ddb(0x18f)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3139ad['on'](_0x282233(0x200),(_0x39a8d3,_0x5819c7)=>{const _0x36408f=_0x282233;if(validateAccess(_0x5819c7,_0x2cbc47)['allow']){if(pid[_0x4b271b])pid[_0x4b271b][_0x36408f(0x175)]({'function':_0x36408f(0x2ab),'args':_0x39a8d3});}else logger[_0x36408f(0x18f)](_0x36408f(0xee));}),_0x3139ad['on'](_0x282233(0x1cd),(_0x4fbf44,_0x29de43)=>{const _0x244edb=_0x282233;if(validateAccess(_0x29de43,_0x2cbc47)[_0x244edb(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b]['send']({'function':_0x244edb(0x10e),'args':_0x4fbf44});}else logger[_0x244edb(0x18f)](_0x244edb(0x276));}),_0x3139ad['on'](_0x282233(0x1aa),(_0x545e52,_0x6f47da)=>{const _0x255bc4=_0x282233;if(validateAccess(_0x6f47da,_0x2cbc47)[_0x255bc4(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b][_0x255bc4(0x175)]({'function':_0x255bc4(0x23f),'args':_0x545e52});}else logger[_0x255bc4(0x18f)](_0x255bc4(0x222));}),_0x3139ad['on'](_0x282233(0x1ae),_0xc1e117=>{const _0x279dfd=_0x282233;if(validateAccess(_0xc1e117,_0x2cbc47)['allow']){if(pid[_0x4b271b])pid[_0x4b271b][_0x279dfd(0x175)]({'function':_0x279dfd(0x138),'args':null});}else logger[_0x279dfd(0x18f)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x3139ad['on'](_0x282233(0xf0),_0x5e791c=>{const _0x52d1d7=_0x282233;if(validateAccess(_0x5e791c,_0x2cbc47)[_0x52d1d7(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b]['send']({'function':'getStartingBalances','args':null});}else logger[_0x52d1d7(0x18f)](_0x52d1d7(0xf5));}),_0x3139ad['on'](_0x282233(0x242),(_0x2ae58d,_0x3cdb8c)=>{const _0x595950=_0x282233;if(validateAccess(_0x3cdb8c,_0x2cbc47)[_0x595950(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b][_0x595950(0x175)]({'function':'placeOrder','args':_0x2ae58d});}else logger[_0x595950(0x18f)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x3139ad['on'](_0x282233(0x1c3),_0x375f6e=>{const _0x4f323b=_0x282233;if(validateAccess(_0x375f6e,_0x2cbc47)[_0x4f323b(0x1cb)]){if(pid[_0x4b271b])pid[_0x4b271b][_0x4f323b(0x175)]({'function':_0x4f323b(0x1d6),'args':null});}else logger[_0x4f323b(0x18f)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3139ad['on'](_0x282233(0x21a),_0x2df1e3=>{const _0x3cac71=_0x282233;if(validateAccess(_0x2df1e3,_0x2cbc47)['allow']){if(pid[_0x4b271b])pid[_0x4b271b][_0x3cac71(0x175)]({'function':_0x3cac71(0x2c9),'args':null});}else logger[_0x3cac71(0x18f)](_0x3cac71(0x12f));}),_0x3139ad['on'](_0x282233(0x13e),_0xed3a5d=>{const _0x1a2b30=_0x282233;if(validateAccess(_0xed3a5d,_0x2cbc47)[_0x1a2b30(0x1cb)])updateBB('update');else logger[_0x1a2b30(0x18f)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3139ad['on']('get-messages',_0x5c977a=>{const _0xbbe0a4=_0x282233;if(validateAccess(_0x5c977a,_0x2cbc47)[_0xbbe0a4(0x1cb)])getMessages();else logger[_0xbbe0a4(0x18f)](_0xbbe0a4(0x152));}),_0x3139ad['on'](_0x282233(0x15d),(_0x1a2cd8,_0x1eabbf)=>{const _0x279939=_0x282233;if(validateAccess(_0x1eabbf,_0x2cbc47)[_0x279939(0x1cb)])confirmMessage(_0x1a2cd8);else logger[_0x279939(0x18f)](_0x279939(0x161));}),_0x3139ad['on'](_0x282233(0x29e),_0x22210b=>{const _0x1e7298=_0x282233;if(validateAccess(_0x22210b,_0x2cbc47)['allow']){if(devices[_0x2cbc47][_0x1e7298(0x15e)])clearTimeout(devices[_0x2cbc47][_0x1e7298(0x15e)]);if(devices[_0x2cbc47][_0x1e7298(0xf4)])clearTimeout(devices[_0x2cbc47][_0x1e7298(0xf4)]);removeSocketListeners(getClient(_0x3139ad['id'])[_0x1e7298(0x110)]),addBlacklist(_0x2cbc47),devices[_0x2cbc47][_0x1e7298(0x25f)]=null,devices[_0x2cbc47][_0x1e7298(0x159)]=null,devices[_0x2cbc47]['access'][_0x1e7298(0x164)]=null,logger[_0x1e7298(0x1a7)](_0x1e7298(0x1e9)+_0x2cbc47[_0x1e7298(0x127)](-0x8)),io['to'](getClient(_0x3139ad['id'])[_0x1e7298(0x110)])[_0x1e7298(0x100)](_0x1e7298(0x246),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1e7298(0x18f)](_0x1e7298(0x2b1));});}function removeSocketListeners(_0x14755e){getClientsWithUuid(_0x14755e)['forEach'](_0x3b7c54=>{const _0x33d342=_0x24ad;getSocket(_0x3b7c54['id'])[_0x33d342(0x260)]();});}function _0x1291(){const _0x57784b=['No\x20authentication\x20token','production','Logged\x20out\x20user\x20...','/:bot/configuration','join','address','on_','HTML','new-disabled','log','index.html','bbvNew','Restarting\x20Bot\x20','sockets','login2fa_','-config.json','toggleBotMode','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','portfolio_','sendMetricsTelegram','apply','createServer','store-settings',')\x20|\x20Bot\x20','apiPassword','store-configuration','telegrammsg','number','forEach','temporary\x20access\x20rejected','axios','compareSync','lastmsgemitted','12216072QjevxT','sendPortfolioTelegram','getSeconds','backup-full',':\x20Bot\x20Mgr\x20>\x20','path','bb-settings.json','access','off','bot-','headless','resetpw_no','headers','Restore\x20process\x20aborted','lastmsgtelegram','help','download','backup-full.zip','show-config','Deleted\x20Bot\x20','order','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','yargs/yargs','access\x20timeout','enabled','set','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','SIGTERM','1833884RcItEg','socket','Unauthorized\x20attempt\x20to\x20update\x20bot','store','Orders','Ok,\x20will\x20send\x20alert\x20notifications\x20only','update_no','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','config_orders','5\x20min','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','button','\x1b[31m','secret','telegramToken','accept','simple','expiry','find','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','-performance.json','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','server','from','randomFillSync','storeFiat','any','Restore\x20backup\x20file\x20','place-order','#RES#','message','\x1b[35m','status','kill','Invalid\x20authentication\x20token\x20(1)','-results.json','get-messages','connected','You\x20can\x20use\x20the\x20following\x20commands:\x0a','backup-files','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','127.0.0.1','messages','parse','build2','versions','BCT','disabled','write','isValid','generateKeyPairAsync','alias','orders','/:bot','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Unauthorized\x20attempt\x20to\x20get\x20events','createWriteStream','telegramIpApproval','removeAllListeners','reason','hasOwnProperty','Notifications\x20enabled\x0a','login\x20token\x20generated','Bot\x20','clients','new','name','ipc','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','timestamp','date-fns','2FA\x20login\x20rejected','track','telegramChatId','type','jsonwebtoken','***','post','add-bot','auto','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','bb/','get-backup-files','address\x20already\x20in\x20use','loginRequired','sort','exec','reply','887690OOrOwP','isDirectory','Notifications\x20disabled\x0a','binary','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','(((.+)+)+)+$','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Error\x20while\x20deleting\x20config\x20files:\x20','showname','encryptedUuid','entries','map','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','startsWith','padStart','exit','botname','::ffff:127.0.0.1','search','listen','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','IPv4','getTime','#RES#\x20if\x20running\x20on\x20server','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','output-002.log','exp','secure','settings','Setting\x20access:\x20','defaults','range','logout','-events.json','Failed\x20to\x20download\x20','getFullYear','backup/','Idling\x20(','\x20|\x20','Telegraf\x20error:','zip/','privateKey','keys','push','/restart\x20-\x20restart\x20bot(s)\x0a','storeConfiguration','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','backupfile','mkdirSync','/:bot/support','2FA\x20required','Unauthorized\x20attempt\x20to\x20log\x20out','Password\x20has\x20been\x20reset\x20to:\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','************','RSA','manual','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','then','all','backup-full@','action','Restoring\x20bot(s)\x20from\x20backup','invalid\x20credentials','output-000.log','temporary\x20access\x20timeout','verify','static','f2aRequired','remove','hex','4557642NyyjoM','clientip','toString','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','showConfig','length','password','version','tempaccess_30_','\x1b[36m','output-003.log','ipv6','hybrid-crypto-js','temp/','staging','running','Error\x20details:','Alerts','bots','child_process','size','family','\x20|\x20user:\x20...','bb-secure.json','30\x20min','yes','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','username','add','getDate','botmanager','File\x20uploaded','crypto','kind','login','temporaryAccessAllowed','copyFileSync','graphql-request','2FA\x20login\x20token\x20generated','request','disconnect','auth','chat','SIGINT','existsSync','#RES#\x20','Invalid\x20IP\x20address','/disable\x20-\x20disable\x20notifications\x0a','Restore\x20process\x20confirmed','bcryptjs','Unauthorized\x20attempt\x20to\x20store\x20configuration','Server','get-starting-balances','get','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','getMonth','pidExpireLogin','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/off\x20-\x20stop\x20bot(s)\x0a','uncaughtException','mixpanel','args','Starting\x20Balance\x20Bot\x20reinstallation','temporary\x20token\x20generated','start','settings.','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','internal','emit','Invalid\x20username\x20or\x20IP\x20address','match','#RES#\x20if\x20running\x20locally\x0a','Session\x20expired\x20for\x20user\x20...','sortBy','Crypt','fork','6b67f3d61ee94b8f5c80b4affef4c4d9','min','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','close','Telegram\x20error:','replace','storeHeadless','max','uuid','Starting\x20(','All\x20bots','private','30FGqOMI','/upload-backup','readFileSync','apiKey','bot','\x1b[33m','started','text','telegramEvents','editMessageReplyMarkup','host','inlineKeyboard','Node.js\x20v','alerts','2FA\x20login\x20required','reload','/:bot/history','test','telegramUsername','slice','mode','update','restart','/metrics\x20-\x20show\x20bot\x20performance\x0a','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20add\x20bot','marketcapApi','Unauthorized\x20attempt\x20to\x20show\x20configuration','includes','user','1780GMEXJe','Unauthorized\x20attempt\x20to\x20delete\x20alerts','/status\x20-\x20show\x20bot(s)\x20status\x0a','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','publicKey','-----------------------------------------------------------------------------------','resetHistory','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','onepagemode','launch','/update\x20-\x20update\x20Balance\x20Bot\x0a','29979GxEKYq','update-bb','Logged\x20in\x20user\x20...','ipaddr.js','telegramEnabled','restart_','emitHistory','lowdb',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','config','files','error','generate','restore-backup-file','express','/:bot/performance','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','backup','sign','lowdb/adapters/FileSync','rmSync','Unauthorized\x20attempt\x20to\x20get\x20messages','logs/','Markdown','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','DEFLATE','metrics_','RSA-OAEP','telegram2FaApproval','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','environment','login\x20token\x20valid','confirm-message','pidRefreshToken','Login\x20rejected','\x20(1)','Unauthorized\x20attempt\x20to\x20confirm\x20message','No\x20bots\x20running\x20right\x20now','/:bot/coins','token','assign','function','Disabled\x20Bot\x20','User\x20has\x20been\x20validated','Starting\x20#RED#Balance\x20Bot\x20v','getHours','/on\x20-\x20start\x20bot(s)\x0a','1276807HGnRuT','reinstall','stringify','restore_yes_','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','build','stop','blacklist','\x20|\x20client:\x20...','send','mtime','getMinutes','filter','|@|','config_alerts','notification','port','callback','config/','reinstall_no','\x20-\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','exchange','node-zip','latestversion','Yes','disable','Notifications\x20disabled','unlinkSync','off_','Unauthorized\x20login\x20attempt\x20(timeout)','show','code','Error:\x20Invalid\x20argument\x20','inherit','full','value','toggle-bot-mode','\x20mode','0.0.0','argv','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Login\x20accepted','tempaccess_15_','resetpw_yes','.zip','get-portfolio','Invalid\x20authentication\x20token\x20(2)','updatebotmanager','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','*$1*','file','randomBytes','[ip-address]','/names\x20-\x20show\x20bot\x20names\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','update-bot','title','Unauthorized\x20attempt\x20to\x20download\x20','debug','config_all','format','store-fiat','\x1b[34m','login\x20not\x20required',',\x20must\x20be\x20a\x204\x20digit\x20number','reset-history','version.json','use','statSync','15\x20min','handshake','split','1000','deleteHistoryAlerts','success','command','delete-bot','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','timeshift','All\x20bots\x20running\x20right\x20now','stopped','/start','$1_$2_$3','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','reject','2HRBcKx','cancel-loading','botID','live','decrypt','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','initclient','readdirSync','writeFileSync','allow','bbPassword','store-headless','bbUsername','sendFile','output-001.log','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','userid',')\x20\x20\x20|\x20Bot\x20','Error\x20removing\x20old\x20backup\x20files:','sha256','cancelLoading','whitelist','\x20only\x0a','temporary\x20access\x20not\x20allowed','\x20minutes','All','event','<b>Telegram\x20Bot\x20Status:</b>\x0a','Starting\x20new\x20bot\x20|\x20Bot\x20','metrics','remoteAddress','452462KIvAWP','logged\x20out','catch','update_yes','http','telegram'];_0x1291=function(){return _0x57784b;};return _0x1291();}function cleanSettings(){const _0xbaa7e2=_0x529c9e;let _0x56d773=settings;return settings[_0xbaa7e2(0x232)]&&settings['telegramToken']!=''&&(_0x56d773={..._0x56d773,'telegramToken':_0xbaa7e2(0x2b4)}),settings[_0xbaa7e2(0x1cc)]&&settings['bbPassword']!=''&&(_0x56d773={..._0x56d773,'bbPassword':_0xbaa7e2(0x2b4)}),settings[_0xbaa7e2(0x12e)]&&settings[_0xbaa7e2(0x12e)]!=''&&(_0x56d773={..._0x56d773,'marketcapApi':'************'}),(settings['bbPassword']&&settings[_0xbaa7e2(0x1cc)]==_0xbaa7e2(0x272)||settings[_0xbaa7e2(0x232)]&&settings[_0xbaa7e2(0x232)]==_0xbaa7e2(0x272)||settings[_0xbaa7e2(0x12e)]&&settings[_0xbaa7e2(0x12e)]=='***')&&(_0x56d773={..._0x56d773,'restored':{'password':settings[_0xbaa7e2(0x1cc)]==_0xbaa7e2(0x272),'telegram':settings['telegramToken']==_0xbaa7e2(0x272),'marketcap':settings[_0xbaa7e2(0x12e)]=='***'}}),_0x56d773;}async function updateBB(_0x10bbd){const _0x12fec7=_0x529c9e;await backupConfigFiles(),installingUpdate=!![],config[_0x12fec7(0x203)](_0x19395d=>{const _0x5b7dda=_0x12fec7;restartBot(_0x19395d[_0x5b7dda(0x1c4)]);});if(_0x10bbd==_0x12fec7(0x129))process[_0x12fec7(0x175)]({'update':!![],'environment':environment},_0x14f223=>{});else _0x10bbd==_0x12fec7(0x16d)&&process['send']({'reinstall':!![],'environment':environment},_0x34e314=>{});}function startBot(_0x4b8584,_0x4f8744,_0xca2bad){const _0x2351e6=_0x529c9e;if(debugging)_0x4b8584[_0x2351e6(0x2a9)]('-d');let _0x1537b7=![];const _0x5c3fc7=_0x4b8584[0x0];_0x4f8744={..._0x4f8744,'stdio':[_0x2351e6(0x18e),_0x2351e6(0x18e),_0x2351e6(0x18e),_0x2351e6(0x269)]},pid[_0x5c3fc7]=childProcess[_0x2351e6(0x107)](botfile,_0x4b8584,_0x4f8744),pid[_0x5c3fc7]['on'](_0x2351e6(0x244),_0x2666df=>{const _0x211e2b=_0x2351e6;switch(Object['keys'](_0x2666df)[0x0]){case _0x211e2b(0x28e):updateBotName(_0x5c3fc7,_0x2666df[_0x211e2b(0x28e)]);break;case _0x211e2b(0x19c):updateBotManager();break;case _0x211e2b(0x246):updateStatus(_0x5c3fc7,_0x2666df[_0x211e2b(0x246)]);break;case'live':updateLive(_0x5c3fc7,_0x2666df['live']);break;case _0x211e2b(0x11a):updateLive(_0x5c3fc7,_0x2666df[_0x211e2b(0x11a)]),io['to'](_0x5c3fc7)[_0x211e2b(0x100)](_0x211e2b(0x246),{'access':{'allow':![],'reason':_0x211e2b(0x123),'token':null}});break;case'stop':_0x2666df[_0x211e2b(0x172)]=='restart'&&restartBot(_0x5c3fc7);_0x2666df[_0x211e2b(0x172)]==_0x211e2b(0x247)&&toggleBot(_0x5c3fc7,_0x211e2b(0x255),_0x211e2b(0x1bd));break;case _0x211e2b(0x1e6):sendTelegramBot(_0x5c3fc7,_0x2666df[_0x211e2b(0x1e6)]);break;case'telegrammsg':sendTelegramMsg(_0x2666df[_0x211e2b(0x201)]);break;case _0x211e2b(0x166):io['to'](_0x5c3fc7)[_0x211e2b(0x100)](_0x2666df[_0x211e2b(0x166)],_0x2666df[_0x211e2b(0xf9)]);break;}}),pid[_0x5c3fc7]['on'](_0x2351e6(0x148),function(_0x18ea16){if(_0x1537b7)return;_0x1537b7=!![],_0xca2bad(_0x18ea16);}),pid[_0x5c3fc7]['on']('exit',async function(_0x153819){const _0x2f01f9=_0x2351e6;if(terminating)return;if(installingUpdate){logger[_0x2f01f9(0x1a7)](_0x2f01f9(0x2b7)),io[_0x2f01f9(0x10b)]();return;}if(_0x1537b7)return;_0x1537b7=!![],_0xca2bad(null);const _0x5e1120=dbConfig[_0x2f01f9(0xf1)]('bots')[_0x2f01f9(0x236)]({'botID':_0x5c3fc7})[_0x2f01f9(0x190)]();_0x5e1120&&(_0x5e1120[_0x2f01f9(0x246)]=='enabled'||_0x5e1120[_0x2f01f9(0x246)]==_0x2f01f9(0x267))&&(await sleep(0x3e8),updateLive(_0x5c3fc7,_0x2f01f9(0x1bd)),logger[_0x2f01f9(0x18f)](_0x2f01f9(0x1f3)+_0x5c3fc7),startBot([_0x5c3fc7,userID],{'cwd':bbpath},function(_0x314ec8){const _0x5ee17f=_0x2f01f9;if(_0x314ec8)logger[_0x5ee17f(0x18f)](_0x314ec8);}));});}function stopBot(_0x27ac09){const _0xe77ae9=_0x529c9e;getClientsWithBotID(_0x27ac09)[_0xe77ae9(0x203)](_0x2995ab=>{const _0x3814a8=_0xe77ae9;getSocket(_0x2995ab['id'])[_0x3814a8(0xe4)](!![]),removeClient(_0x2995ab['id']);}),pid[_0x27ac09]&&(pid[_0x27ac09][_0xe77ae9(0x247)](),pid[_0x27ac09]=null);}function stopAllBots(){const _0x1eb1cc=_0x529c9e;terminating=!![];const _0x4251db=getEnabledBots();_0x4251db[_0x1eb1cc(0x203)](_0x53c105=>{stopBot(_0x53c105['botID']);});}function restartBot(_0x4962ae){const _0x5549ed=_0x529c9e;if(pid[_0x4962ae])pid[_0x4962ae][_0x5549ed(0x247)]();}function addBot(){const _0xd491de=_0x529c9e;let _0x1e94b5;for(let _0x595ab5=0x1;_0x595ab5<0x3e9;_0x595ab5++){_0x1e94b5=_0x595ab5[_0xd491de(0x2c7)]()[_0xd491de(0x28c)](0x3,'0');let _0x4d2837=config['find'](_0x242c23=>_0x242c23[_0xd491de(0x1c4)]==_0x1e94b5);if(!_0x4d2837)break;}if(_0x1e94b5===_0xd491de(0x1b5)){logger[_0xd491de(0x18f)](_0xd491de(0x25c));return;}logger[_0xd491de(0x18f)](_0xd491de(0x1de)+_0x1e94b5),dbConfig['get'](_0xd491de(0x2d7))['push']({'botID':_0x1e94b5,'botname':'Bot\x20'+_0x1e94b5,'status':'new','live':''})[_0xd491de(0x256)](),startBot([_0x1e94b5,userID],{'cwd':bbpath},function(_0xd68f48){if(_0xd68f48)logger['full'](_0xd68f48);}),config=getConfiguration(),io['to'](_0xd491de(0x2e3))['emit'](_0xd491de(0x2d7),config),broadcastToBots(_0xd491de(0x2d7),JSON[_0xd491de(0x16e)](config));}function deleteBot(_0x3a858e){const _0x5e05db=_0x529c9e;getClientsWithBotID(_0x3a858e)[_0x5e05db(0x203)](_0xb90eed=>{const _0x186967=_0x5e05db;getSocket(_0xb90eed['id'])[_0x186967(0xe4)](!![]),removeClient(_0xb90eed['id']);}),dbConfig[_0x5e05db(0xf1)]('bots')['remove']({'botID':_0x3a858e})[_0x5e05db(0x256)](),logger[_0x5e05db(0x18f)](_0x5e05db(0x21b)+_0x3a858e),stopBot(_0x3a858e);try{if(fs[_0x5e05db(0xe8)](path[_0x5e05db(0x1eb)](configpath,'bot-'+_0x3a858e+'-config.json')))fs[_0x5e05db(0x188)](path[_0x5e05db(0x1eb)](configpath,'bot-'+_0x3a858e+_0x5e05db(0x1f6)));if(fs[_0x5e05db(0xe8)](path['join'](configpath,_0x5e05db(0x211)+_0x3a858e+_0x5e05db(0x29f))))fs[_0x5e05db(0x188)](path[_0x5e05db(0x1eb)](configpath,'bot-'+_0x3a858e+_0x5e05db(0x29f)));if(fs['existsSync'](path[_0x5e05db(0x1eb)](configpath,'bot-'+_0x3a858e+'-performance.json')))fs['unlinkSync'](path[_0x5e05db(0x1eb)](configpath,_0x5e05db(0x211)+_0x3a858e+_0x5e05db(0x238)));if(fs['existsSync'](path[_0x5e05db(0x1eb)](configpath,_0x5e05db(0x211)+_0x3a858e+_0x5e05db(0x249))))fs[_0x5e05db(0x188)](path[_0x5e05db(0x1eb)](configpath,_0x5e05db(0x211)+_0x3a858e+_0x5e05db(0x249)));}catch(_0x612dd0){if(_0x612dd0)logger['full'](_0x5e05db(0x285),_0x612dd0);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x5e05db(0x2d7),config),broadcastToBots(_0x5e05db(0x2d7),JSON[_0x5e05db(0x16e)](config));}function toggleBot(_0x1e11d8,_0x14be7a,_0x446852){const _0x500c8b=_0x529c9e;dbConfig[_0x500c8b(0xf1)](_0x500c8b(0x2d7))[_0x500c8b(0x236)]({'botID':_0x1e11d8})[_0x500c8b(0x165)]({'status':_0x14be7a})[_0x500c8b(0x165)]({'live':_0x446852})['write']();if(_0x14be7a=='enabled'||_0x14be7a==_0x500c8b(0x267))logger[_0x500c8b(0x18f)]('Enabled\x20Bot\x20'+_0x1e11d8),startBot([_0x1e11d8,userID],{'cwd':bbpath},function(_0x50c592){const _0x11cb4b=_0x500c8b;if(_0x50c592)logger[_0x11cb4b(0x18f)](_0x50c592);});else(_0x14be7a==_0x500c8b(0x255)||_0x14be7a=='new-disabled')&&(logger[_0x500c8b(0x18f)](_0x500c8b(0x167)+_0x1e11d8),stopBot(_0x1e11d8));config=getConfiguration(),io['to'](_0x500c8b(0x2e3))[_0x500c8b(0x100)](_0x500c8b(0x2d7),config),broadcastToBots(_0x500c8b(0x2d7),JSON[_0x500c8b(0x16e)](config));}function toggleStatus(_0x4930ec){const _0x4e72a9=_0x529c9e;let _0x1cbabd=dbConfig['get'](_0x4e72a9(0x2d7))[_0x4e72a9(0x236)]({'botID':_0x4930ec})['value'](),_0x53c777;if(_0x1cbabd[_0x4e72a9(0x246)]===_0x4e72a9(0x220))_0x53c777=_0x4e72a9(0x255);else{if(_0x1cbabd['status']===_0x4e72a9(0x267))_0x53c777=_0x4e72a9(0x1ef);else{if(_0x1cbabd[_0x4e72a9(0x246)]===_0x4e72a9(0x1ef))_0x53c777=_0x4e72a9(0x267);else{if(_0x1cbabd[_0x4e72a9(0x246)]===_0x4e72a9(0x255))_0x53c777=_0x4e72a9(0x220);}}}return _0x53c777;}function updateStatus(_0x2d4bec,_0x2fa002){const _0x3896d5=_0x529c9e;dbConfig[_0x3896d5(0xf1)](_0x3896d5(0x2d7))[_0x3896d5(0x236)]({'botID':_0x2d4bec})[_0x3896d5(0x165)]({'status':_0x2fa002})[_0x3896d5(0x256)](),config=getConfiguration(),io['to'](_0x3896d5(0x2e3))[_0x3896d5(0x100)](_0x3896d5(0x2d7),config),broadcastToBots('bots',JSON[_0x3896d5(0x16e)](config));}function updateLive(_0x291105,_0x18d3d3){const _0x2d26b3=_0x529c9e;dbConfig[_0x2d26b3(0xf1)](_0x2d26b3(0x2d7))[_0x2d26b3(0x236)]({'botID':_0x291105})['assign']({'live':_0x18d3d3})['write'](),config=getConfiguration(),io['to'](_0x2d26b3(0x2e3))[_0x2d26b3(0x100)](_0x2d26b3(0x2d7),config),broadcastToBots(_0x2d26b3(0x2d7),JSON[_0x2d26b3(0x16e)](config));}function updateBotName(_0x19ba8e,_0x5eb4c9){const _0x17e16c=_0x529c9e;dbConfig[_0x17e16c(0xf1)](_0x17e16c(0x2d7))[_0x17e16c(0x236)]({'botID':_0x19ba8e})[_0x17e16c(0x165)]({'botname':_0x5eb4c9})[_0x17e16c(0x256)](),config=getConfiguration(),io['to'](_0x17e16c(0x2e3))[_0x17e16c(0x100)]('bots',config),broadcastToBots(_0x17e16c(0x2d7),JSON[_0x17e16c(0x16e)](config));}function updateBotManager(){const _0x264a8b=_0x529c9e;config=getConfiguration(),io['to'](_0x264a8b(0x2e3))['emit'](_0x264a8b(0x2d7),config),broadcastToBots(_0x264a8b(0x2d7),JSON[_0x264a8b(0x16e)](config));}function toggleBotMode(_0x11f8b3){const _0x494ea6=_0x529c9e;if(pid[_0x11f8b3])pid[_0x11f8b3][_0x494ea6(0x175)]({'function':_0x494ea6(0x1f7),'args':null});else{const _0x10dc08=configpath+'bot-'+_0x11f8b3+_0x494ea6(0x1f6),_0x3644f6=fs['readFileSync'](_0x10dc08),_0x50939e=JSON[_0x494ea6(0x251)](_0x3644f6),_0x2001f7=_0x50939e[_0x494ea6(0x118)][0x0][_0x494ea6(0x212)];_0x50939e[_0x494ea6(0x118)][0x0][_0x494ea6(0x212)]=!_0x2001f7;const _0x10a317=JSON[_0x494ea6(0x16e)](_0x50939e,null,0x2);fs[_0x494ea6(0x1ca)](_0x10dc08,_0x10a317),config=getConfiguration(),io['to'](_0x494ea6(0x2e3))['emit']('bots',config),broadcastToBots(_0x494ea6(0x2d7),JSON[_0x494ea6(0x16e)](config));}}function validateTelegram(_0x28e2ba){const _0x5bdf7f=_0x529c9e;if(_0x28e2ba[_0x5bdf7f(0x23d)][_0x5bdf7f(0x2e0)]!=settings[_0x5bdf7f(0x126)]&&'@'+_0x28e2ba[_0x5bdf7f(0x23d)]['username']!=settings[_0x5bdf7f(0x126)]||_0x28e2ba[_0x5bdf7f(0xe6)]['id']!=settings[_0x5bdf7f(0x26f)])return sendTelegram(_0x28e2ba[_0x5bdf7f(0xe6)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x5bdf7f(0x1ee)}),![];return!![];}async function initTelegram(){const _0x4ad8d0=_0x529c9e;if(tgBot)tgBot[_0x4ad8d0(0x172)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x4ad8d0(0x232)]);let _0x5bd9bf=_0x4ad8d0(0x24c);_0x5bd9bf+='\x0a',_0x5bd9bf+='/enable\x20-\x20enable\x20notifications\x0a',_0x5bd9bf+=_0x4ad8d0(0xeb),_0x5bd9bf+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5bd9bf+=_0x4ad8d0(0x2aa),_0x5bd9bf+=_0x4ad8d0(0x16b),_0x5bd9bf+=_0x4ad8d0(0xf6),_0x5bd9bf+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x5bd9bf+=_0x4ad8d0(0x1a2),_0x5bd9bf+=_0x4ad8d0(0x134),_0x5bd9bf+=_0x4ad8d0(0x12b),_0x5bd9bf+=_0x4ad8d0(0x1ba),_0x5bd9bf+=_0x4ad8d0(0x13c),_0x5bd9bf+=_0x4ad8d0(0x12c),_0x5bd9bf+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x4b9739=_0x4ad8d0(0x2ac);_0x4b9739+='\x0a',_0x4b9739+=_0x5bd9bf,tgBot[_0x4ad8d0(0x1e3)]((_0x5ae916,_0x5588ee)=>{const _0x23613c=_0x4ad8d0;logger[_0x23613c(0x234)](getTimeStamp()+_0x23613c(0x145)),logger[_0x23613c(0x1a7)](_0x23613c(0x2a5),_0x5ae916);}),tgBot[_0x4ad8d0(0x1b0)](async(_0x2c3d0b,_0x287406)=>{const _0x44d5fa=_0x4ad8d0;if(!(!settings[_0x44d5fa(0x26f)]&&_0x2c3d0b[_0x44d5fa(0x129)][_0x44d5fa(0x244)][_0x44d5fa(0x11b)]==_0x44d5fa(0x1be))){if(!validateTelegram(_0x2c3d0b))return;}_0x287406();}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0xfc),async _0x382015=>{const _0x3b03c2=_0x4ad8d0;if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x382015[_0x3b03c2(0xe6)]['id']);updateSetting(_0x3b03c2(0x141),!![]);if(!validateTelegram(_0x382015))return;await sendTelegram(_0x382015[_0x3b03c2(0xe6)]['id'],_0x4b9739);}),tgBot[_0x4ad8d0(0x1b8)]('enable',async _0xc21a75=>{const _0xaa3bc6=_0x4ad8d0;updateSetting(_0xaa3bc6(0x141),!![]),await sendTelegram(_0xc21a75[_0xaa3bc6(0xe6)]['id'],'Notifications\x20enabled');}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0x186),async _0x47d976=>{const _0x599517=_0x4ad8d0;await sendTelegram(_0x47d976['chat']['id'],_0x599517(0x187)),updateSetting(_0x599517(0x141),![]);}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0x146),async _0x28814e=>{const _0x3213ad=_0x4ad8d0,_0x2fac38=Markup['inlineKeyboard']([Markup[_0x3213ad(0x22f)]['callback'](_0x3213ad(0x228),_0x3213ad(0x22c)),Markup[_0x3213ad(0x22f)][_0x3213ad(0x17d)](_0x3213ad(0x2d6),_0x3213ad(0x17a)),Markup[_0x3213ad(0x22f)]['callback'](_0x3213ad(0x1db),_0x3213ad(0x1a8))]);_0x28814e[_0x3213ad(0x27d)](_0x3213ad(0x296),_0x2fac38);}),tgBot['action'](_0x4ad8d0(0x22c),async _0x2f5813=>{const _0x2ce934=_0x4ad8d0;_0x2f5813['editMessageReplyMarkup'](),updateSetting(_0x2ce934(0x11c),_0x2ce934(0x25a)),updateSetting(_0x2ce934(0x141),!![]),await sendTelegram(_0x2f5813[_0x2ce934(0xe6)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x4ad8d0(0x2bb)](_0x4ad8d0(0x17a),async _0x412b11=>{const _0x24c421=_0x4ad8d0;_0x412b11[_0x24c421(0x11d)](),updateSetting(_0x24c421(0x11c),'alerts'),updateSetting(_0x24c421(0x141),!![]),await sendTelegram(_0x412b11[_0x24c421(0xe6)]['id'],_0x24c421(0x229));}),tgBot[_0x4ad8d0(0x2bb)](_0x4ad8d0(0x1a8),async _0x37ca69=>{const _0x310ada=_0x4ad8d0;_0x37ca69['editMessageReplyMarkup'](),updateSetting(_0x310ada(0x11c),_0x310ada(0x2b9)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x37ca69['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x4ad8d0(0x1b8)]('status',async _0x61be93=>{const _0xba81a9=_0x4ad8d0,_0x25f2d8=getBotsWithMode();let _0x36ad4f=_0xba81a9(0x1a3);config[_0xba81a9(0x203)](_0x1369ac=>{const _0x5c98bd=_0xba81a9,_0x2bd8dd=_0x25f2d8[_0x5c98bd(0x236)](_0x35117b=>_0x35117b[_0x5c98bd(0x1c4)]==_0x1369ac[_0x5c98bd(0x1c4)])[_0x5c98bd(0x128)];_0x36ad4f+=_0x5c98bd(0x265)+_0x1369ac[_0x5c98bd(0x1c4)]+':\x20'+_0x1369ac[_0x5c98bd(0x246)]+_0x5c98bd(0x2a4)+_0x2bd8dd+_0x5c98bd(0x2a4)+_0x1369ac[_0x5c98bd(0x1c5)]+'\x0a';}),_0x36ad4f+='\x0a',_0x36ad4f+=_0xba81a9(0x1dd),_0x36ad4f+=!settings[_0xba81a9(0x141)]?_0xba81a9(0x280):_0xba81a9(0x263),_0x36ad4f+=settings[_0xba81a9(0x141)]?settings[_0xba81a9(0x11c)]==_0xba81a9(0x2b9)?_0xba81a9(0x1c0):'Notifications\x20types:\x20'+settings[_0xba81a9(0x11c)]+_0xba81a9(0x1d8):'',await sendTelegram(_0x61be93[_0xba81a9(0xe6)]['id'],_0x36ad4f,{'parse_mode':_0xba81a9(0x1ee)});}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0x12a),async _0x449b78=>{const _0x37b11c=_0x4ad8d0,_0x21c1e4=getEnabledBots();if(_0x21c1e4['length']==0x0)await sendTelegram(_0x449b78[_0x37b11c(0xe6)]['id'],_0x37b11c(0x162));else{if(_0x21c1e4['length']>0x1)_0x21c1e4['push']({'botID':'all'});let _0xaf9719=[],_0x4f8430=[];const _0x3835b7=_0x21c1e4['length']%0x4==0x0||_0x21c1e4[_0x37b11c(0x2ca)]%0x4==0x3||_0x21c1e4[_0x37b11c(0x2ca)]%0x3==0x1?0x4:0x3;let _0x504eec=0x0;_0x21c1e4[_0x37b11c(0x203)]((_0x51e1eb,_0x2bc7de)=>{const _0x382158=_0x37b11c;if(_0x2bc7de%_0x3835b7==0x0)_0x4f8430=[];_0x4f8430['push'](Markup[_0x382158(0x22f)][_0x382158(0x17d)](_0x51e1eb['botID']=='all'?_0x382158(0x112):_0x382158(0x265)+_0x51e1eb[_0x382158(0x1c4)],_0x382158(0x142)+_0x51e1eb[_0x382158(0x1c4)])),_0x2bc7de%_0x3835b7==0x0&&(_0xaf9719[_0x504eec]=_0x4f8430,_0x504eec++);});const _0xb309f2=Markup[_0x37b11c(0x11f)](_0xaf9719);_0x449b78[_0x37b11c(0x27d)](_0x37b11c(0x14d),_0xb309f2);}}),tgBot[_0x4ad8d0(0x2bb)](/restart_(.+)/,async _0x46dc1d=>{const _0x4db488=_0x4ad8d0,_0xd2cc96=_0x46dc1d[_0x4db488(0x102)][0x1];_0x46dc1d['editMessageReplyMarkup'](),_0xd2cc96==_0x4db488(0x2b9)?config[_0x4db488(0x203)](_0x41b781=>{const _0x32743f=_0x4db488;restartBot(_0x41b781[_0x32743f(0x1c4)]);}):restartBot(_0xd2cc96);}),tgBot[_0x4ad8d0(0x1b8)]('on',async _0x145d41=>{const _0x1e8e26=_0x4ad8d0,_0x5aaa2e=getDisabledBots();if(_0x5aaa2e[_0x1e8e26(0x2ca)]==0x0)await sendTelegram(_0x145d41[_0x1e8e26(0xe6)]['id'],_0x1e8e26(0x1bc));else{if(_0x5aaa2e[_0x1e8e26(0x2ca)]>0x1)_0x5aaa2e['push']({'botID':'all'});let _0x20106c=[],_0x4f0410=[];const _0x37e8da=_0x5aaa2e[_0x1e8e26(0x2ca)]%0x4==0x0||_0x5aaa2e['length']%0x4==0x3||_0x5aaa2e[_0x1e8e26(0x2ca)]%0x3==0x1?0x4:0x3;let _0x1c76a5=0x0;_0x5aaa2e['forEach']((_0x5a16c8,_0x38e9ca)=>{const _0x128595=_0x1e8e26;if(_0x38e9ca%_0x37e8da==0x0)_0x4f0410=[];_0x4f0410[_0x128595(0x2a9)](Markup[_0x128595(0x22f)][_0x128595(0x17d)](_0x5a16c8[_0x128595(0x1c4)]=='all'?_0x128595(0x112):_0x128595(0x265)+_0x5a16c8[_0x128595(0x1c4)],_0x128595(0x1ed)+_0x5a16c8['botID'])),_0x38e9ca%_0x37e8da==0x0&&(_0x20106c[_0x1c76a5]=_0x4f0410,_0x1c76a5++);});const _0x560c74=Markup[_0x1e8e26(0x11f)](_0x20106c);_0x145d41[_0x1e8e26(0x27d)](_0x1e8e26(0x2b3),_0x560c74);}}),tgBot['action'](/on_(.+)/,async _0x3750ef=>{const _0x1dc964=_0x4ad8d0,_0x102e6d=_0x3750ef['match'][0x1];_0x3750ef[_0x1dc964(0x11d)]();if(_0x102e6d==_0x1dc964(0x2b9)){const _0xbe6765=getDisabledBots();await sendTelegram(_0x3750ef['chat']['id'],_0x1dc964(0x28a)),_0xbe6765[_0x1dc964(0x203)](_0x29da6a=>{const _0x2c34e7=_0x1dc964;if(_0x29da6a['botID']!=_0x2c34e7(0x2b9))toggleBot(_0x29da6a[_0x2c34e7(0x1c4)],toggleStatus(_0x29da6a[_0x2c34e7(0x1c4)]),_0x2c34e7(0x1bd));});}else await sendTelegram(_0x3750ef[_0x1dc964(0xe6)]['id'],_0x1dc964(0x10a)+_0x102e6d),toggleBot(_0x102e6d,toggleStatus(_0x102e6d),_0x1dc964(0x1bd));}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0x210),async _0x4f738c=>{const _0x57a624=_0x4ad8d0,_0x36620d=getEnabledBots();if(_0x36620d[_0x57a624(0x2ca)]==0x0)await sendTelegram(_0x4f738c[_0x57a624(0xe6)]['id'],_0x57a624(0x162));else{if(_0x36620d['length']>0x1)_0x36620d[_0x57a624(0x2a9)]({'botID':_0x57a624(0x2b9)});let _0x40de73=[],_0x39ea85=[];const _0x1ba26c=_0x36620d[_0x57a624(0x2ca)]%0x4==0x0||_0x36620d[_0x57a624(0x2ca)]%0x4==0x3||_0x36620d['length']%0x3==0x1?0x4:0x3;let _0x3e3f1e=0x0;_0x36620d[_0x57a624(0x203)]((_0x5aef5a,_0x51d6c6)=>{const _0x1e90cd=_0x57a624;if(_0x51d6c6%_0x1ba26c==0x0)_0x39ea85=[];_0x39ea85[_0x1e90cd(0x2a9)](Markup['button'][_0x1e90cd(0x17d)](_0x5aef5a[_0x1e90cd(0x1c4)]=='all'?_0x1e90cd(0x112):_0x1e90cd(0x265)+_0x5aef5a['botID'],_0x1e90cd(0x189)+_0x5aef5a[_0x1e90cd(0x1c4)])),_0x51d6c6%_0x1ba26c==0x0&&(_0x40de73[_0x3e3f1e]=_0x39ea85,_0x3e3f1e++);});const _0x2b64b7=Markup[_0x57a624(0x11f)](_0x40de73);_0x4f738c[_0x57a624(0x27d)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x2b64b7);}}),tgBot[_0x4ad8d0(0x2bb)](/off_(.+)/,async _0xcb8b44=>{const _0x571780=_0x4ad8d0,_0x524f6e=_0xcb8b44[_0x571780(0x102)][0x1];_0xcb8b44[_0x571780(0x11d)]();if(_0x524f6e=='all'){const _0x13f199=getEnabledBots();await sendTelegram(_0xcb8b44[_0x571780(0xe6)]['id'],_0x571780(0x26a)),_0x13f199[_0x571780(0x203)](_0x377fe2=>{const _0x168217=_0x571780;if(_0x377fe2[_0x168217(0x1c4)]!=_0x168217(0x2b9))toggleBot(_0x377fe2[_0x168217(0x1c4)],toggleStatus(_0x377fe2[_0x168217(0x1c4)]),_0x168217(0x1bd));});}else await sendTelegram(_0xcb8b44[_0x571780(0xe6)]['id'],_0x571780(0x22b)+_0x524f6e),toggleBot(_0x524f6e,toggleStatus(_0x524f6e),_0x571780(0x1bd));}),tgBot[_0x4ad8d0(0x1b8)](_0x4ad8d0(0x1df),async _0x3a45b0=>{const _0x1f9304=_0x4ad8d0,_0xd1027f=getEnabledBots();if(_0xd1027f[_0x1f9304(0x2ca)]==0x0)await sendTelegram(_0x3a45b0[_0x1f9304(0xe6)]['id'],_0x1f9304(0x162));else{if(_0xd1027f[_0x1f9304(0x2ca)]>0x1){let _0x59c3cb=[],_0x407fc6=[];const _0x5b00f2=_0xd1027f[_0x1f9304(0x2ca)]%0x4==0x0||_0xd1027f['length']%0x4==0x3||_0xd1027f[_0x1f9304(0x2ca)]%0x3==0x1?0x4:0x3;let _0x5df954=0x0;_0xd1027f[_0x1f9304(0x203)]((_0x5ae098,_0x1185db)=>{const _0x10afbe=_0x1f9304;if(_0x1185db%_0x5b00f2==0x0)_0x407fc6=[];_0x407fc6['push'](Markup[_0x10afbe(0x22f)][_0x10afbe(0x17d)]('Bot\x20'+_0x5ae098[_0x10afbe(0x1c4)],_0x10afbe(0x157)+_0x5ae098[_0x10afbe(0x1c4)])),_0x1185db%_0x5b00f2==0x0&&(_0x59c3cb[_0x5df954]=_0x407fc6,_0x5df954++);});const _0x5e4a25=Markup[_0x1f9304(0x11f)](_0x59c3cb);_0x3a45b0['reply'](_0x1f9304(0x292),_0x5e4a25);}else{const _0x45360a=_0xd1027f[0x0]['botID'];if(pid[_0x45360a])pid[_0x45360a][_0x1f9304(0x175)]({'function':_0x1f9304(0x1fa),'args':null});}}}),tgBot[_0x4ad8d0(0x2bb)](/metrics_(.+)/,async _0x473a51=>{const _0x206dfd=_0x4ad8d0,_0x39b353=_0x473a51[_0x206dfd(0x102)][0x1];_0x473a51[_0x206dfd(0x11d)]();if(pid[_0x39b353])pid[_0x39b353][_0x206dfd(0x175)]({'function':_0x206dfd(0x1fa),'args':null});}),tgBot[_0x4ad8d0(0x1b8)]('portfolio',async _0x5a34f3=>{const _0x3da15d=_0x4ad8d0,_0x1450b6=getEnabledBots();if(_0x1450b6[_0x3da15d(0x2ca)]==0x0)await sendTelegram(_0x5a34f3['chat']['id'],_0x3da15d(0x162));else{if(_0x1450b6[_0x3da15d(0x2ca)]>0x1){let _0x5b97ca=[],_0x190e92=[];const _0x1e5fde=_0x1450b6[_0x3da15d(0x2ca)]%0x4==0x0||_0x1450b6[_0x3da15d(0x2ca)]%0x4==0x3||_0x1450b6[_0x3da15d(0x2ca)]%0x3==0x1?0x4:0x3;let _0x357d6e=0x0;_0x1450b6[_0x3da15d(0x203)]((_0x35f60b,_0x401d0b)=>{const _0x107f3d=_0x3da15d;if(_0x401d0b%_0x1e5fde==0x0)_0x190e92=[];_0x190e92[_0x107f3d(0x2a9)](Markup['button'][_0x107f3d(0x17d)](_0x107f3d(0x265)+_0x35f60b[_0x107f3d(0x1c4)],_0x107f3d(0x1f9)+_0x35f60b[_0x107f3d(0x1c4)])),_0x401d0b%_0x1e5fde==0x0&&(_0x5b97ca[_0x357d6e]=_0x190e92,_0x357d6e++);});const _0x56c354=Markup[_0x3da15d(0x11f)](_0x5b97ca);_0x5a34f3['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x56c354);}else{const _0x6ff3bc=_0x1450b6[0x0][_0x3da15d(0x1c4)];if(pid[_0x6ff3bc])pid[_0x6ff3bc][_0x3da15d(0x175)]({'function':_0x3da15d(0x209),'args':null});}}}),tgBot[_0x4ad8d0(0x2bb)](/portfolio_(.+)/,async _0x5c11ab=>{const _0x38b2b3=_0x4ad8d0,_0x152773=_0x5c11ab[_0x38b2b3(0x102)][0x1];_0x5c11ab['editMessageReplyMarkup']();if(pid[_0x152773])pid[_0x152773]['send']({'function':_0x38b2b3(0x209),'args':null});}),tgBot[_0x4ad8d0(0x1b8)]('update',async _0x1f6c5b=>{const _0x45c0fc=_0x4ad8d0;await getMessages();if(!updateAvailable)await sendTelegram(_0x1f6c5b[_0x45c0fc(0xe6)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x1f6c5b[_0x45c0fc(0xe6)]['id'],_0x45c0fc(0x22e));else{const _0xaed139=Markup[_0x45c0fc(0x11f)]([Markup[_0x45c0fc(0x22f)][_0x45c0fc(0x17d)](_0x45c0fc(0x185),_0x45c0fc(0x1e4)),Markup[_0x45c0fc(0x22f)][_0x45c0fc(0x17d)]('No',_0x45c0fc(0x22a))]);_0x1f6c5b[_0x45c0fc(0x27d)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0xaed139);}}}),tgBot['action'](/update_(.+)/,async _0x5383c3=>{const _0x294865=_0x4ad8d0,_0xefb43c=_0x5383c3[_0x294865(0x102)][0x1];_0x5383c3[_0x294865(0x11d)](),_0xefb43c=='yes'&&(await sendTelegram(_0x5383c3[_0x294865(0xe6)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x294865(0x129))),_0xefb43c=='no'&&await sendTelegram(_0x5383c3['chat']['id'],_0x294865(0x2df));}),tgBot[_0x4ad8d0(0x1b8)]('reinstall',async _0x4861f9=>{const _0x2614f4=_0x4ad8d0;if(!validInstallation)await sendTelegram(_0x4861f9[_0x2614f4(0xe6)]['id'],_0x2614f4(0x1f8));else{const _0x5eb5e2=Markup[_0x2614f4(0x11f)]([Markup[_0x2614f4(0x22f)][_0x2614f4(0x17d)](_0x2614f4(0x185),'reinstall_yes'),Markup[_0x2614f4(0x22f)][_0x2614f4(0x17d)]('No',_0x2614f4(0x17f))]);_0x4861f9[_0x2614f4(0x27d)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x5eb5e2);}}),tgBot[_0x4ad8d0(0x2bb)](/reinstall_(.+)/,async _0x54acc2=>{const _0x2b2c3b=_0x4ad8d0,_0x59a669=_0x54acc2[_0x2b2c3b(0x102)][0x1];_0x54acc2[_0x2b2c3b(0x11d)](),_0x59a669==_0x2b2c3b(0x2de)&&(await sendTelegram(_0x54acc2[_0x2b2c3b(0xe6)]['id'],_0x2b2c3b(0xfa)),updateBB('reinstall')),_0x59a669=='no'&&await sendTelegram(_0x54acc2['chat']['id'],_0x2b2c3b(0x19d));}),tgBot[_0x4ad8d0(0x1b8)]('toggle',async _0xa1dda8=>{const _0x1998c9=_0x4ad8d0,_0x10fc48=getBotsWithMode();if(_0x10fc48[_0x1998c9(0x2ca)]==0x0)await sendTelegram(_0xa1dda8[_0x1998c9(0xe6)]['id'],_0x1998c9(0x162));else{let _0x18d9ba=[],_0x42c648=[];const _0x423162=0x2;let _0x42cfd9=0x0;_0x10fc48[_0x1998c9(0x203)]((_0x57e6a6,_0x343c4e)=>{const _0x29dea8=_0x1998c9;if(_0x343c4e%_0x423162==0x0)_0x42c648=[];_0x42c648[_0x29dea8(0x2a9)](Markup[_0x29dea8(0x22f)][_0x29dea8(0x17d)]('Bot\x20'+_0x57e6a6[_0x29dea8(0x1c4)]+'\x20('+_0x57e6a6[_0x29dea8(0x128)]+')','toggle_'+_0x57e6a6[_0x29dea8(0x1c4)])),_0x343c4e%_0x423162==0x0&&(_0x18d9ba[_0x42cfd9]=_0x42c648,_0x42cfd9++);});const _0x4b2454=Markup['inlineKeyboard'](_0x18d9ba);_0xa1dda8['reply'](_0x1998c9(0x282),_0x4b2454);}}),tgBot[_0x4ad8d0(0x2bb)](/toggle_(.+)/,async _0x3e7d91=>{const _0x49981d=_0x4ad8d0,_0x1ffbf6=_0x3e7d91[_0x49981d(0x102)][0x1];_0x3e7d91['editMessageReplyMarkup']();const _0xd6e131=getBotsWithMode(),_0x2bb8f1=_0xd6e131[_0x49981d(0x236)](_0x8942f0=>_0x8942f0[_0x49981d(0x1c4)]==_0x1ffbf6),_0x1e0bf3=_0x2bb8f1['mode']==_0x49981d(0x275)?'manual':_0x49981d(0x275);await sendTelegram(_0x3e7d91[_0x49981d(0xe6)]['id'],_0x49981d(0x284)+_0x1ffbf6+'\x20to\x20'+_0x1e0bf3+_0x49981d(0x192)),toggleBotMode(_0x1ffbf6);}),tgBot[_0x4ad8d0(0x1b8)]('names',async _0xfc2047=>{const _0x14b103=_0x4ad8d0;let _0x477393='';config[_0x14b103(0x203)](_0x32260d=>{const _0x2ac7cd=_0x14b103;_0x477393+=_0x2ac7cd(0x265)+_0x32260d[_0x2ac7cd(0x1c4)]+':\x20'+_0x32260d[_0x2ac7cd(0x28e)]+'\x0a';}),await sendTelegram(_0xfc2047[_0x14b103(0xe6)]['id'],_0x477393,{'parse_mode':_0x14b103(0x1ee)});}),tgBot['command'](_0x4ad8d0(0x217),async _0x28e429=>{const _0x30b239=_0x4ad8d0;await sendTelegram(_0x28e429[_0x30b239(0xe6)]['id'],_0x5bd9bf);}),process['once']('SIGINT',()=>tgBot[_0x4ad8d0(0x172)](_0x4ad8d0(0xe7))),process['once'](_0x4ad8d0(0x223),()=>tgBot[_0x4ad8d0(0x172)]('SIGTERM')),tgBot[_0x4ad8d0(0x13b)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x56c95e,_0x2cb68e,_0x324cf1){const _0x493982=_0x529c9e;_0x324cf1={..._0x324cf1,'disable_web_page_preview':!![]};try{await tgBot[_0x493982(0x1e6)]['sendMessage'](_0x56c95e,_0x2cb68e,_0x324cf1);}catch(_0x3ce8c8){console[_0x493982(0x1f0)](_0x493982(0x10c),_0x3ce8c8);}}async function sendTelegramBot(_0x526196,_0x582ad7){const _0x473977=_0x529c9e;if(settings[_0x473977(0x141)]){if(settings[_0x473977(0x11c)]==_0x473977(0x2b9)||(_0x582ad7[_0x473977(0x270)]==_0x473977(0x148)||_0x582ad7[_0x473977(0x270)]=='warning'||_0x582ad7['type']==_0x473977(0x1b7))&&settings[_0x473977(0x11c)]==_0x473977(0x121)||_0x582ad7[_0x473977(0x270)]==_0x473977(0x21c)&&settings['telegramEvents']==_0x473977(0x25a)){if(tgBot&&settings[_0x473977(0x26f)]){if(_0x582ad7[_0x473977(0x286)])await sendTelegram(settings['telegramChatId'],_0x582ad7[_0x473977(0x28e)]+'\x20>\x20'+_0x582ad7[_0x473977(0x1dc)]);else await sendTelegram(settings['telegramChatId'],_0x473977(0x265)+_0x526196+'\x20>\x20'+_0x582ad7[_0x473977(0x1dc)]);}}}}async function sendTelegramMsg(_0x3e7700,_0x55eee6=_0x529c9e(0x1ee)){const _0x25d8e3=_0x529c9e;return settings[_0x25d8e3(0x141)]&&tgBot&&settings[_0x25d8e3(0x26f)]?(await sendTelegram(settings[_0x25d8e3(0x26f)],_0x3e7700,{'parse_mode':_0x55eee6}),!![]):![];}function getDeviceWithIp(_0x487392){return devices['find'](_0xdca5be=>_0xdca5be['ip']===_0x487392);}async function temporaryAccess2FA(_0x562636,_0x56a1fc){const _0x4f1580=_0x529c9e;let _0x2b77af=new Date(),_0x1fd9c5=![];if(lastIpApproval){if(_0x2b77af-lastIpApproval<0x1388)_0x1fd9c5=!![];}lastIpApproval=new Date();if(_0x1fd9c5)return;if(tgBot&&settings[_0x4f1580(0x26f)]){const _0x34f6ce=uuidRandom();tmpStorage[_0x34f6ce]={'uuid':_0x562636,'externalip':_0x56a1fc};const _0x5bb725=Markup[_0x4f1580(0x11f)]([Markup['button'][_0x4f1580(0x17d)](_0x4f1580(0x22d),'tempaccess_5_'+_0x34f6ce),Markup[_0x4f1580(0x22f)][_0x4f1580(0x17d)](_0x4f1580(0x1b2),_0x4f1580(0x197)+_0x34f6ce),Markup['button'][_0x4f1580(0x17d)](_0x4f1580(0x2dd),_0x4f1580(0x2cd)+_0x34f6ce),Markup[_0x4f1580(0x22f)]['callback'](_0x4f1580(0x1c1),'tempaccess_reject_'+_0x34f6ce)]);await sendTelegram(settings[_0x4f1580(0x26f)],_0x4f1580(0x237)+normalizeIP(_0x56a1fc)[_0x4f1580(0x18b)]+'\x20?',_0x5bb725),tgBot[_0x4f1580(0x2bb)](/tempaccess_(.+)_(.+)/,async _0x1dc291=>{const _0x59830d=_0x4f1580,_0x496ce4=_0x1dc291[_0x59830d(0x102)][0x1],_0x431acb=_0x1dc291[_0x59830d(0x102)][0x2],{uuid:_0xa4aa67,externalip:_0x459c3}=tmpStorage[_0x431acb];delete tmpStorage[_0x431acb],_0x1dc291['editMessageReplyMarkup'](),devices[_0xa4aa67]['telegramIpApproval']={'clientip':_0x459c3,'timestamp':new Date()[_0x59830d(0x294)](),'expiry':_0x496ce4},_0x496ce4!='reject'?(await sendTelegram(_0x1dc291['chat']['id'],'Access\x20enabled\x20for\x20'+_0x496ce4+_0x59830d(0x1da),{'parse_mode':_0x59830d(0x1ee)}),io['to'](_0xa4aa67)['emit'](_0x59830d(0x246),{'access':{'allow':![],'reason':_0x59830d(0x123),'token':null}})):(await sendTelegram(_0x1dc291['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0xa4aa67)[_0x59830d(0x100)](_0x59830d(0x246),{'access':{'allow':![],'reason':_0x59830d(0x204),'token':null}}));});}}async function loginAccess2FA(_0x3ab45c,_0x31d127){const _0x2f1676=_0x529c9e;if(tgBot&&settings[_0x2f1676(0x26f)]){const _0x2fc98a=uuidRandom();tmpStorage[_0x2fc98a]={'uuid':_0x3ab45c,'externalip':_0x31d127};const _0x4ee638=Markup[_0x2f1676(0x11f)]([Markup[_0x2f1676(0x22f)]['callback'](_0x2f1676(0x233),_0x2f1676(0x1f5)+loginExpiry+'_'+_0x2fc98a),Markup[_0x2f1676(0x22f)][_0x2f1676(0x17d)](_0x2f1676(0x1c1),'login2fa_reject_'+_0x2fc98a)]);await sendTelegram(settings[_0x2f1676(0x26f)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x31d127)['show']+'\x20?',_0x4ee638),tgBot[_0x2f1676(0x2bb)](/login2fa_(.+)_(.+)/,async _0x4f02a5=>{const _0x5b918=_0x2f1676,_0x4fa860=_0x4f02a5[_0x5b918(0x102)][0x1],_0x384c4c=_0x4f02a5[_0x5b918(0x102)][0x2],{uuid:_0x2b8878,externalip:_0x3d6fff}=tmpStorage[_0x384c4c];delete tmpStorage[_0x384c4c],_0x4f02a5[_0x5b918(0x11d)](),devices[_0x2b8878][_0x5b918(0x159)]={'clientip':_0x3d6fff,'timestamp':new Date()['getTime'](),'expiry':_0x4fa860},_0x4fa860!=_0x5b918(0x1c1)?(await sendTelegram(_0x4f02a5['chat']['id'],_0x5b918(0x196),{'parse_mode':_0x5b918(0x1ee)}),io['to'](_0x2b8878)[_0x5b918(0x100)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x4f02a5[_0x5b918(0xe6)]['id'],_0x5b918(0x15f)),io['to'](_0x2b8878)['emit'](_0x5b918(0x246),{'access':{'allow':![],'reason':_0x5b918(0x26d),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x241126=_0x529c9e;return dbConfig['get']('bots')[_0x241126(0x105)](_0x241126(0x1c4))[_0x241126(0x178)]({'status':_0x241126(0x220)})[_0x241126(0x190)]()||[];}function getDisabledBots(){const _0x3dc1a0=_0x529c9e;return dbConfig[_0x3dc1a0(0xf1)](_0x3dc1a0(0x2d7))[_0x3dc1a0(0x105)](_0x3dc1a0(0x1c4))[_0x3dc1a0(0x178)]({'status':_0x3dc1a0(0x255)})[_0x3dc1a0(0x190)]()||[];}function getBotAttributes(_0x2fcc83){const _0x8aa5df=_0x529c9e;let _0xfe3fd2={};const _0x54779c=configpath+'bot-'+_0x2fcc83+'-config.json',_0x1188d1=fs['existsSync'](_0x54779c);if(_0x1188d1){const _0x2d7455=fs[_0x8aa5df(0x116)](_0x54779c);try{const _0x3f8b9e=JSON[_0x8aa5df(0x251)](_0x2d7455),_0x2bbb22=_0x3f8b9e?_0x3f8b9e['bot'][0x0][_0x8aa5df(0x212)]:![];_0xfe3fd2[_0x8aa5df(0x128)]=_0x2bbb22?'auto':_0x8aa5df(0x2b6),_0xfe3fd2[_0x8aa5df(0x28e)]=_0x3f8b9e?_0x3f8b9e[_0x8aa5df(0x118)][0x0]['botname']:'Bot\x20'+_0x2fcc83;}catch(_0x20d055){_0xfe3fd2[_0x8aa5df(0x128)]=_0x8aa5df(0x2b6),_0xfe3fd2['botname']='Bot\x20'+_0x2fcc83;}}else _0xfe3fd2[_0x8aa5df(0x128)]=_0x8aa5df(0x2b6),_0xfe3fd2['botname']=_0x8aa5df(0x265)+_0x2fcc83;return _0xfe3fd2;}function getBotsWithMode(){const _0x230c70=_0x529c9e,_0x4ecfe4=dbConfig['get'](_0x230c70(0x2d7))['sortBy'](_0x230c70(0x1c4))[_0x230c70(0x190)]()||[];return _0x4ecfe4['forEach'](_0x18078d=>{const _0x843321=_0x230c70;let _0x5c1561=getBotAttributes(_0x18078d[_0x843321(0x1c4)]);_0x18078d[_0x843321(0x128)]=_0x5c1561[_0x843321(0x128)];}),_0x4ecfe4;}function getBotExchanges(){const _0x14187c=_0x529c9e;let _0x2a7f23=[];const _0x2729da=dbConfig[_0x14187c(0xf1)](_0x14187c(0x2d7))[_0x14187c(0x105)]('botID')['value']()||[];_0x2729da['forEach'](_0x2b9d1f=>{const _0x3cd596=_0x14187c;if(_0x2b9d1f[_0x3cd596(0x246)]=='enabled'){const _0x5739dc=configpath+'bot-'+_0x2b9d1f[_0x3cd596(0x1c4)]+_0x3cd596(0x1f6),_0x339afc=fs[_0x3cd596(0xe8)](_0x5739dc);let _0x140fc4;if(_0x339afc){const _0x36881d=fs[_0x3cd596(0x116)](_0x5739dc);try{const _0x1f7455=JSON['parse'](_0x36881d);_0x140fc4=_0x1f7455?_0x1f7455['bot'][0x0][_0x3cd596(0x182)]:null;}catch(_0xe90a8b){}}if(_0x140fc4)_0x2a7f23[_0x3cd596(0x2a9)](_0x140fc4);}});const _0x3e29f4=[...new Set(_0x2a7f23)][_0x14187c(0x27b)]();return _0x3e29f4;}async function initUser(){const _0x57e6ef=_0x529c9e;if(!settings[_0x57e6ef(0x1d2)]){const _0x1bb1ef=uuidRandom();mixpanel[_0x57e6ef(0x259)](_0x1bb1ef),updateSetting(_0x57e6ef(0x1d2),_0x1bb1ef);}}async function initSecure(){const _0x4ff520=_0x529c9e;let _0x18842b=getSecure();if(!_0x18842b['hasOwnProperty'](_0x4ff520(0x231))){let _0x2877c8=await generateKeys();_0x18842b[_0x4ff520(0x136)]=_0x2877c8[_0x4ff520(0x136)],_0x18842b[_0x4ff520(0x2a7)]=_0x2877c8[_0x4ff520(0x2a7)],_0x18842b[_0x4ff520(0x231)]=crypto[_0x4ff520(0x1a0)](0x20)['toString'](_0x4ff520(0x2c4));;storeSecure(_0x18842b);}}function getSettings(){const _0x4d98bb=_0x529c9e;return dbSettings[_0x4d98bb(0xf1)](_0x4d98bb(0x29a))['value']()||{};}function getSecure(){const _0x82634a=_0x529c9e;return dbSecure[_0x82634a(0xf1)](_0x82634a(0x299))[_0x82634a(0x190)]()||{};}function getBlacklist(){const _0x2e29f4=_0x529c9e;return dbSecure[_0x2e29f4(0xf1)]('blacklist')['value']()||[];}function broadcastToBots(_0x6fc931,_0x545b6e){config['forEach'](_0x2c2ebd=>{const _0x5a9fa8=_0x24ad;if(_0x2c2ebd[_0x5a9fa8(0x246)]==_0x5a9fa8(0x220)&&_0x2c2ebd[_0x5a9fa8(0x1c5)]==_0x5a9fa8(0x2d4)||_0x2c2ebd[_0x5a9fa8(0x246)]=='new'&&_0x2c2ebd[_0x5a9fa8(0x1c5)]==_0x5a9fa8(0x2d4)){if(pid[_0x2c2ebd[_0x5a9fa8(0x1c4)]])pid[_0x2c2ebd[_0x5a9fa8(0x1c4)]][_0x5a9fa8(0x175)]({[_0x6fc931]:_0x545b6e});}});}async function storeSettings(_0x2fad17,_0x274053=![]){const _0x5e58ac=_0x529c9e;_0x2fad17={...settings,..._0x2fad17};if(_0x274053&&_0x2fad17['bbPassword']!=_0x5e58ac(0x2b4)&&_0x2fad17[_0x5e58ac(0x1cc)]!=_0x5e58ac(0x272)&&_0x2fad17['bbPassword']!=''){const _0x5b11e6=crypt['decrypt'](secure['privateKey'],_0x2fad17[_0x5e58ac(0x1cc)])['message'][_0x5e58ac(0x1b4)](_0x5e58ac(0x179))[0x0],_0x46c091=bcrypt['hashSync'](_0x5b11e6,saltRounds);_0x2fad17={..._0x2fad17,'bbPassword':_0x46c091};}if(_0x274053&&_0x2fad17[_0x5e58ac(0x232)]!=_0x5e58ac(0x2b4)&&_0x2fad17[_0x5e58ac(0x232)]!='***'&&_0x2fad17[_0x5e58ac(0x232)]!=''){const _0x26b24c=crypt[_0x5e58ac(0x1c6)](secure['privateKey'],_0x2fad17['telegramToken'])['message'][_0x5e58ac(0x1b4)](_0x5e58ac(0x179))[0x0];_0x2fad17={..._0x2fad17,'telegramToken':_0x26b24c};}if(_0x274053&&_0x2fad17[_0x5e58ac(0x12e)]!=_0x5e58ac(0x2b4)&&_0x2fad17[_0x5e58ac(0x12e)]!='***'&&_0x2fad17[_0x5e58ac(0x12e)]!=''){const _0x4c0fbb=crypt[_0x5e58ac(0x1c6)](secure[_0x5e58ac(0x2a7)],_0x2fad17[_0x5e58ac(0x12e)])[_0x5e58ac(0x244)]['split'](_0x5e58ac(0x179))[0x0];_0x2fad17={..._0x2fad17,'marketcapApi':_0x4c0fbb};}const _0x46dc76=_0x2fad17[_0x5e58ac(0x232)]!=_0x5e58ac(0x2b4)&&_0x2fad17[_0x5e58ac(0x232)]!=settings['telegramToken']||_0x2fad17[_0x5e58ac(0x126)]!=settings['telegramUsername'],_0x5edd40=_0x2fad17[_0x5e58ac(0x232)]==''||_0x2fad17[_0x5e58ac(0x126)]=='',_0x2804cd=_0x2fad17[_0x5e58ac(0x12e)]&&_0x2fad17[_0x5e58ac(0x12e)]!=_0x5e58ac(0x2b4)&&_0x2fad17['marketcapApi']!=settings['telegramToken'];_0x46dc76&&(_0x2fad17[_0x5e58ac(0x26f)]=null,_0x2fad17[_0x5e58ac(0x11c)]=_0x5e58ac(0x2b9));for(const [_0x463742,_0x17191b]of Object[_0x5e58ac(0x288)](_0x2fad17)){if(_0x463742==_0x5e58ac(0x232)&&_0x17191b==_0x5e58ac(0x2b4)){_0x2fad17['telegramToken']=settings[_0x5e58ac(0x232)];continue;};if(_0x463742==_0x5e58ac(0x1cc)&&_0x17191b==_0x5e58ac(0x2b4)){_0x2fad17[_0x5e58ac(0x1cc)]=settings[_0x5e58ac(0x1cc)];continue;};if(_0x463742==_0x5e58ac(0x12e)&&_0x17191b==_0x5e58ac(0x2b4)){_0x2fad17[_0x5e58ac(0x12e)]=settings['marketcapApi'];continue;};dbSettings['set'](_0x5e58ac(0xfd)+_0x463742,_0x17191b)[_0x5e58ac(0x256)]();}settings=_0x2fad17,io['to'](_0x5e58ac(0x2e3))[_0x5e58ac(0x100)](_0x5e58ac(0x29a),cleanSettings()),broadcastToBots(_0x5e58ac(0x1bb),settings[_0x5e58ac(0x1bb)]),broadcastToBots('onepagemode',settings[_0x5e58ac(0x13a)]),broadcastToBots(_0x5e58ac(0x12e),settings[_0x5e58ac(0x12e)]);if(_0x46dc76&&!_0x5edd40)initTelegram();if(_0x46dc76&&_0x5edd40)disableTelegram();getAllClients()['forEach'](_0x4af373=>{const _0x5549eb=_0x5e58ac;getSocket(_0x4af373['id'])[_0x5549eb(0x100)](_0x5549eb(0x246),{'access':{'allow':![],'reason':_0x5549eb(0x123),'token':null}});}),_0x2804cd&&(await sleep(0xbb8),testMarketcapApi(_0x2fad17[_0x5e58ac(0x12e)]));}async function testMarketcapApi(_0x526904){const _0x2347d8=_0x529c9e,_0x1a2db6=[_0x2347d8(0x254),'ETH'];try{await axios['get'](_0x2347d8(0x135),{'headers':{'X-CMC_PRO_API_KEY':_0x526904},'params':{'symbol':_0x1a2db6[_0x2347d8(0x2c7)]()}});}catch(_0x3a79fd){_0x3a79fd['toString']()[_0x2347d8(0x130)]('status\x20code\x20401')?(io['to']('botmanager')[_0x2347d8(0x100)](_0x2347d8(0x17b),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x2347d8(0x18f)](_0x2347d8(0x15a))):(io['to'](_0x2347d8(0x2e3))[_0x2347d8(0x100)](_0x2347d8(0x17b),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x2347d8(0x18f)](_0x2347d8(0x24e)),logger[_0x2347d8(0x1a7)](_0x2347d8(0x2d5),_0x3a79fd['toString']()+_0x2347d8(0x180)+_0x3a79fd[_0x2347d8(0x18c)]));return;}logger['debug']('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x18f17c,_0x5282ee){const _0x5abac0=_0x529c9e;dbSettings[_0x5abac0(0x221)](_0x5abac0(0xfd)+_0x18f17c,_0x5282ee)[_0x5abac0(0x256)](),settings=getSettings(),io['to'](_0x5abac0(0x2e3))[_0x5abac0(0x100)](_0x5abac0(0x29a),cleanSettings());}function storeSecure(_0x2c62f9){const _0x2a10e8=_0x529c9e;dbSecure[_0x2a10e8(0xf1)](_0x2a10e8(0x299))[_0x2a10e8(0x2a9)](_0x2c62f9)[_0x2a10e8(0x256)](),secure=_0x2c62f9;}function addBlacklist(_0x36d282){const _0x4946dc=_0x529c9e;cleanBlacklist();let _0x556c32;devices[_0x36d282][_0x4946dc(0x25f)]?_0x556c32=Math[_0x4946dc(0x10f)](devices[_0x36d282][_0x4946dc(0x25f)][_0x4946dc(0x235)],loginExpiry):_0x556c32=loginExpiry,dbSecure['get'](_0x4946dc(0x173))[_0x4946dc(0x2a9)]({'expiry':new Date()[_0x4946dc(0x294)]()+_0x556c32*0x3c*0x3e8,'token':devices[_0x36d282][_0x4946dc(0x20f)][_0x4946dc(0x164)]})[_0x4946dc(0x256)](),blacklist=dbSecure[_0x4946dc(0xf1)](_0x4946dc(0x173))[_0x4946dc(0x190)]();}function cleanBlacklist(){const _0xebe0c2=_0x529c9e;let _0x4ab05e=dbSecure[_0xebe0c2(0xf1)](_0xebe0c2(0x173))['cloneDeep']()[_0xebe0c2(0x190)](),_0x4b6ca8=new Date()[_0xebe0c2(0x294)]();_0x4ab05e[_0xebe0c2(0x203)](_0x34f679=>{const _0x33db57=_0xebe0c2;_0x34f679[_0x33db57(0x235)]<_0x4b6ca8&&dbSecure[_0x33db57(0xf1)](_0x33db57(0x173))[_0x33db57(0x2c3)]({'expiry':_0x34f679['expiry']})[_0x33db57(0x256)]();});}function initStates(){const _0x4f2364=_0x529c9e;let _0x44e67c=getConfiguration();_0x44e67c[_0x4f2364(0x203)](_0x556cb0=>{const _0x34c71e=_0x4f2364;_0x556cb0[_0x34c71e(0x1c5)]=_0x34c71e(0x1bd);}),storeConfiguration(_0x44e67c);}function onKeys(){const _0x341349=new RSA();return new Promise(_0xe8a1d0=>{const _0x44831b=_0x24ad;_0x341349[_0x44831b(0x258)]()[_0x44831b(0x2b8)](_0x2c14a7=>{_0xe8a1d0(_0x2c14a7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1cc16c=_0x529c9e;let _0x2aa27a=getSettings(),_0x4907c2=![];!_0x2aa27a[_0x1cc16c(0x262)](_0x1cc16c(0x216))&&(_0x2aa27a['lastmsgtelegram']=0x0,_0x4907c2=!![]);!_0x2aa27a['hasOwnProperty'](_0x1cc16c(0x207))&&(_0x2aa27a[_0x1cc16c(0x207)]=0x0,_0x4907c2=!![]);!_0x2aa27a[_0x1cc16c(0x262)](_0x1cc16c(0x184))&&(_0x2aa27a['latestversion']='0.0.0',_0x4907c2=!![]);!_0x2aa27a[_0x1cc16c(0x262)]('onepagemode')&&(_0x2aa27a['onepagemode']=![],_0x4907c2=!![]);!_0x2aa27a[_0x1cc16c(0x262)]('marketcapApi')&&(_0x2aa27a[_0x1cc16c(0x12e)]='',_0x4907c2=!![]);if(_0x4907c2)storeSettings(_0x2aa27a);try{fs[_0x1cc16c(0x1c9)](configbackuppath,{'withFileTypes':!![]})[_0x1cc16c(0x203)](_0x24a5c1=>{const _0x268d39=_0x1cc16c;if(!_0x24a5c1[_0x268d39(0x27f)]()){if(!_0x24a5c1[_0x268d39(0x268)]['startsWith'](_0x268d39(0x2ba)))fs[_0x268d39(0x188)](configbackuppath+_0x24a5c1[_0x268d39(0x268)]);}else fs[_0x268d39(0x151)](configbackuppath+_0x24a5c1[_0x268d39(0x268)],{'recursive':!![]});});}catch(_0x542cb4){logger['debug'](_0x1cc16c(0x1d4),_0x542cb4);}}function storeConfiguration(_0x219dcd){const _0x4b362a=_0x529c9e;dbConfig['get'](_0x4b362a(0x2d7))[_0x4b362a(0x2c3)]()[_0x4b362a(0x256)](),dbConfig[_0x4b362a(0xf1)](_0x4b362a(0x2d7))['push'](..._0x219dcd)[_0x4b362a(0x256)](),config=_0x219dcd;}async function resetPassword(){const _0x2bfeeb=_0x529c9e;if(tgBot&&settings['telegramChatId']){const _0x4bce2a=Markup[_0x2bfeeb(0x11f)]([Markup['button']['callback'](_0x2bfeeb(0x2de),_0x2bfeeb(0x198)),Markup['button']['callback']('no',_0x2bfeeb(0x213))]);await sendTelegram(settings[_0x2bfeeb(0x26f)],_0x2bfeeb(0x1d1),_0x4bce2a),tgBot[_0x2bfeeb(0x2bb)](/resetpw_(.+)/,async _0x15cc4d=>{const _0x4bd4c3=_0x2bfeeb,_0xaa0936=_0x15cc4d[_0x4bd4c3(0x102)][0x1];_0x15cc4d[_0x4bd4c3(0x11d)]();if(_0xaa0936!='no'){const _0x232a7d=0xf,_0x2d97c2=_0x4bd4c3(0x1c7),_0x5bda72=Array[_0x4bd4c3(0x23d)](crypto[_0x4bd4c3(0x23e)](new Uint32Array(_0x232a7d)))[_0x4bd4c3(0x289)](_0x41ef55=>_0x2d97c2[_0x41ef55%_0x2d97c2[_0x4bd4c3(0x2ca)]])[_0x4bd4c3(0x1eb)](''),_0x39d5b4=bcrypt['hashSync'](_0x5bda72,saltRounds);storeSettings({'bbPassword':_0x39d5b4}),await sendTelegram(_0x15cc4d[_0x4bd4c3(0xe6)]['id'],_0x4bd4c3(0x2b2)+_0x5bda72,{'parse_mode':'HTML'});}else await sendTelegram(_0x15cc4d[_0x4bd4c3(0xe6)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x3f5da5,_0x1598d4){const _0x242631=_0x529c9e;io['to']('botmanager')[_0x242631(0x100)](_0x242631(0x17b),_0x242631(0x21d),'success');if(tgBot&&settings[_0x242631(0x26f)]){const _0x322fd4=uuidRandom();tmpStorage[_0x322fd4]={'path':_0x3f5da5,'filename':_0x1598d4};const _0x5209af=Markup[_0x242631(0x11f)]([Markup['button'][_0x242631(0x17d)]('yes',_0x242631(0x16f)+_0x322fd4),Markup['button'][_0x242631(0x17d)]('no','restore_no_'+_0x322fd4)]);await sendTelegram(settings[_0x242631(0x26f)],_0x242631(0x23b),_0x5209af),tgBot[_0x242631(0x2bb)](/restore_(.+)_(.+)/,async _0x3cdad6=>{const _0x2e6560=_0x242631,_0x269d60=_0x3cdad6[_0x2e6560(0x102)][0x1],_0x3d072c=_0x3cdad6['match'][0x2],{path:_0x295fb2,filename:_0x470113}=tmpStorage[_0x3d072c];delete tmpStorage[_0x3d072c],_0x3cdad6[_0x2e6560(0x11d)](),_0x269d60==_0x2e6560(0x2de)?(logger[_0x2e6560(0x1a7)](_0x2e6560(0xec)),await sendTelegram(_0x3cdad6[_0x2e6560(0xe6)]['id'],_0x2e6560(0x2bc),{'parse_mode':_0x2e6560(0x1ee)}),unzipFile(_0x295fb2,_0x470113)):(logger[_0x2e6560(0x1a7)](_0x2e6560(0x215)),await sendTelegram(_0x3cdad6[_0x2e6560(0xe6)]['id'],_0x2e6560(0x215)));});}}function getServerTime(){const _0x275679=_0x529c9e,_0x3f8854=new Date();return _0x3f8854[_0x275679(0x2a1)]()+'/'+(_0x3f8854[_0x275679(0xf3)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x3f8854[_0x275679(0x2e2)]()[_0x275679(0x2c7)]()[_0x275679(0x28c)](0x2,'0')+'\x20'+_0x3f8854[_0x275679(0x16a)]()[_0x275679(0x2c7)]()[_0x275679(0x28c)](0x2,'0')+':'+_0x3f8854['getMinutes']()['toString']()[_0x275679(0x28c)](0x2,'0')+':'+_0x3f8854[_0x275679(0x20a)]()[_0x275679(0x2c7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x34b219=_0x529c9e,_0x56c5e4=shiftedTime();return _0x56c5e4[_0x34b219(0x2a1)]()+'/'+(_0x56c5e4[_0x34b219(0xf3)]()+0x1)[_0x34b219(0x2c7)]()[_0x34b219(0x28c)](0x2,'0')+'/'+_0x56c5e4[_0x34b219(0x2e2)]()[_0x34b219(0x2c7)]()[_0x34b219(0x28c)](0x2,'0')+'\x20'+_0x56c5e4[_0x34b219(0x16a)]()[_0x34b219(0x2c7)]()[_0x34b219(0x28c)](0x2,'0')+':'+_0x56c5e4[_0x34b219(0x177)]()[_0x34b219(0x2c7)]()[_0x34b219(0x28c)](0x2,'0')+':'+_0x56c5e4[_0x34b219(0x20a)]()[_0x34b219(0x2c7)]()[_0x34b219(0x28c)](0x2,'0');}function getCleanTimeStamp(){const _0x5aa799=_0x529c9e,_0x110abe=shiftedTime();return _0x110abe[_0x5aa799(0x2a1)]()+(_0x110abe['getMonth']()+0x1)[_0x5aa799(0x2c7)]()[_0x5aa799(0x28c)](0x2,'0')+_0x110abe[_0x5aa799(0x2e2)]()[_0x5aa799(0x2c7)]()['padStart'](0x2,'0')+'-'+_0x110abe['getHours']()[_0x5aa799(0x2c7)]()[_0x5aa799(0x28c)](0x2,'0')+_0x110abe['getMinutes']()[_0x5aa799(0x2c7)]()[_0x5aa799(0x28c)](0x2,'0')+_0x110abe[_0x5aa799(0x20a)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x1929d9=_0x529c9e,_0x5e23f7=new Date();let _0x326471=_0x5e23f7;if(settings[_0x1929d9(0x1bb)]&&settings['timeshift']!==0x0)_0x326471=fns[_0x1929d9(0x2e1)](_0x5e23f7,{'hours':settings[_0x1929d9(0x1bb)]});return _0x326471;}function startScheduler(){const _0x2b7296=_0x529c9e,_0x3223a7=new Date()['getUTCHours'](),_0x2d5d33=shiftedTime()[_0x2b7296(0x16a)]();_0x2d5d33==0x4&&backupConfigFiles();_0x2d5d33==0x0&&rotateLogFiles();_0x3223a7%0x6==0x0&&triggerAnalytics();_0x3223a7%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x1b27fc){const _0x5b89d7=_0x529c9e;logger[_0x5b89d7(0x1a7)](_0x5b89d7(0x241)+_0x1b27fc);const _0x194634=getBotsWithMode();_0x194634[_0x5b89d7(0x2ca)]>0x0?confirmRestore(configbackuppath,_0x1b27fc):unzipFile(configbackuppath,_0x1b27fc);}async function getBackupFiles(_0x58bda3=null){const _0x4b4285=_0x529c9e;let _0x5ec0ca=[],_0x5ccd8f=fs[_0x4b4285(0x1c9)](configbackuppath,{'withFileTypes':!![]});_0x5ccd8f[_0x4b4285(0x27b)]((_0x546657,_0xa01d18)=>_0x546657[_0x4b4285(0x268)]<_0xa01d18[_0x4b4285(0x268)]?0x1:_0xa01d18[_0x4b4285(0x268)]<_0x546657[_0x4b4285(0x268)]?-0x1:0x0),_0x5ccd8f[_0x4b4285(0x203)](_0x2e8397=>{const _0x121994=_0x4b4285;if(!_0x2e8397[_0x121994(0x27f)]()&&_0x2e8397['name'][_0x121994(0x28b)](_0x121994(0x2ba))&&_0x2e8397[_0x121994(0x268)]['endsWith'](_0x121994(0x199))){const _0x37a799=formatDate(fs[_0x121994(0x1b1)](configbackuppath+_0x2e8397[_0x121994(0x268)])[_0x121994(0x176)]);_0x5ec0ca['push']({'name':_0x2e8397[_0x121994(0x268)],'mtime':_0x37a799});}});if(_0x58bda3)io['to'](_0x58bda3)[_0x4b4285(0x100)](_0x4b4285(0x24d),_0x5ec0ca);else return _0x5ec0ca;}async function backupConfigFiles(){const _0x15f155=_0x529c9e;await zipFiles(_0x15f155(0x20b));const _0x3e2d90=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x15f155(0x219),configbackuppath+('backup-full@'+_0x3e2d90+_0x15f155(0x199)));let _0xb7bd80=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0xb7bd80['sort']((_0x13f77f,_0x1e48eb)=>_0x13f77f[_0x15f155(0x268)]<_0x1e48eb[_0x15f155(0x268)]?0x1:_0x1e48eb['name']<_0x13f77f['name']?-0x1:0x0),_0xb7bd80[_0x15f155(0x2ca)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0xb7bd80[_0xb7bd80['length']-0x1][_0x15f155(0x268)]);}function rotateLogFiles(){const _0x5e3bd4=_0x529c9e,_0x3f251f=fs[_0x5e3bd4(0x1b1)](logspath+_0x5e3bd4(0x2be)),_0x5675f6=_0x3f251f[_0x5e3bd4(0x2d9)]/0x400;if(_0x5675f6>0x64){let _0x182b7b=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x182b7b[_0x5e3bd4(0x27b)]((_0x35f602,_0x3c928e)=>_0x35f602[_0x5e3bd4(0x268)]<_0x3c928e[_0x5e3bd4(0x268)]?0x1:_0x3c928e[_0x5e3bd4(0x268)]<_0x35f602[_0x5e3bd4(0x268)]?-0x1:0x0),_0x182b7b['forEach'](_0x1b4870=>{const _0x1d3e64=_0x5e3bd4;if(_0x1b4870['name']==_0x1d3e64(0x297))fs[_0x1d3e64(0x2e9)](logspath+_0x1b4870['name'],logspath+_0x1d3e64(0x2cf));if(_0x1b4870[_0x1d3e64(0x268)]==_0x1d3e64(0x1d0))fs[_0x1d3e64(0x2e9)](logspath+_0x1b4870['name'],logspath+'output-002.log');_0x1b4870[_0x1d3e64(0x268)]==_0x1d3e64(0x2be)&&(fs[_0x1d3e64(0x2e9)](logspath+_0x1b4870[_0x1d3e64(0x268)],logspath+_0x1d3e64(0x1d0)),fs[_0x1d3e64(0x1ca)](logspath+_0x1b4870[_0x1d3e64(0x268)],''));});}}async function zipFiles(_0x4bd207){const _0x213c56=_0x529c9e;let _0x293fc7;if(_0x4bd207=='logs')_0x293fc7=logspath;if(_0x4bd207=='backup')_0x293fc7=configpath;if(_0x4bd207==_0x213c56(0x20b))_0x293fc7=configpath;let _0x54122d=fs[_0x213c56(0x1c9)](_0x293fc7,{'withFileTypes':!![]});const _0x2d58a6=new require(_0x213c56(0x183))();_0x54122d['forEach'](_0x31dd60=>{const _0x69182=_0x213c56;if(!_0x31dd60[_0x69182(0x27f)]()){let _0x1afdb5=fs[_0x69182(0x116)](_0x293fc7+_0x31dd60[_0x69182(0x268)]);if(_0x4bd207=='backup'){const _0x41fc83=/^bot-[0-9]{3}-config.json$/,_0x516826=_0x41fc83['test'](_0x31dd60[_0x69182(0x268)]);if(_0x516826){const _0x10a4e2=JSON[_0x69182(0x251)](_0x1afdb5);if(_0x10a4e2['bot'][0x0]){_0x10a4e2[_0x69182(0x118)][0x0][_0x69182(0x117)]=_0x69182(0x272),_0x10a4e2[_0x69182(0x118)][0x0]['apiSecret']=_0x69182(0x272);if(_0x10a4e2[_0x69182(0x118)][0x0][_0x69182(0x1ff)])_0x10a4e2[_0x69182(0x118)][0x0][_0x69182(0x1ff)]=_0x69182(0x272);}_0x1afdb5=JSON[_0x69182(0x16e)](_0x10a4e2,null,0x2);}if(_0x31dd60[_0x69182(0x268)]==_0x69182(0x20e)){const _0x1554d2=JSON['parse'](_0x1afdb5);if(_0x1554d2['settings'][_0x69182(0x27a)])_0x1554d2[_0x69182(0x29a)][_0x69182(0x27a)]=![];if(_0x1554d2[_0x69182(0x29a)][_0x69182(0x1cc)])_0x1554d2['settings'][_0x69182(0x1cc)]=_0x69182(0x272);if(_0x1554d2[_0x69182(0x29a)][_0x69182(0x232)])_0x1554d2[_0x69182(0x29a)][_0x69182(0x232)]=_0x69182(0x272);if(_0x1554d2['settings'][_0x69182(0x26f)])_0x1554d2[_0x69182(0x29a)]['telegramChatId']=null;if(_0x1554d2[_0x69182(0x29a)][_0x69182(0x12e)])_0x1554d2[_0x69182(0x29a)][_0x69182(0x12e)]='***';_0x1afdb5=JSON[_0x69182(0x16e)](_0x1554d2,null,0x2);}if(_0x31dd60[_0x69182(0x268)]!=_0x69182(0x2dc))_0x2d58a6[_0x69182(0x19f)](_0x31dd60[_0x69182(0x268)],_0x1afdb5);}else _0x2d58a6[_0x69182(0x19f)](_0x31dd60[_0x69182(0x268)],_0x1afdb5);}});const _0x19cdd6=_0x2d58a6[_0x213c56(0x149)]({'base64':![],'compression':_0x213c56(0x156)});fs[_0x213c56(0x1ca)](zippath+(_0x4bd207+_0x213c56(0x199)),_0x19cdd6,_0x213c56(0x281));}async function unzipFile(_0x12a4d6,_0x15d39d){const _0x36cee9=_0x529c9e;fs[_0x36cee9(0x1c9)](configpath,{'withFileTypes':!![]})[_0x36cee9(0x203)](_0x29647c=>{const _0x2fccf0=_0x36cee9;if(!_0x29647c[_0x2fccf0(0x27f)]())fs[_0x2fccf0(0x151)](configpath+_0x29647c[_0x2fccf0(0x268)]);});const _0xf2200b=fs[_0x36cee9(0x116)](_0x12a4d6+_0x15d39d,'binary'),_0xb4356a=new require(_0x36cee9(0x183))(_0xf2200b,{'base64':![],'checkCRC32':!![]});Object[_0x36cee9(0x2a8)](_0xb4356a[_0x36cee9(0x147)])['forEach'](_0x3a242b=>{const _0x203974=_0x36cee9,_0xc465d1=_0xb4356a['files'][_0x3a242b];fs[_0x203974(0x1ca)](configpath+_0xc465d1[_0x203974(0x268)],_0xc465d1['_data']);}),fs[_0x36cee9(0x1c9)](temppath,{'withFileTypes':!![]})[_0x36cee9(0x203)](_0x2dd33c=>{const _0xd9d6f0=_0x36cee9;if(!_0x2dd33c[_0xd9d6f0(0x27f)]())fs[_0xd9d6f0(0x151)](temppath+_0x2dd33c[_0xd9d6f0(0x268)]);}),logger[_0x36cee9(0x1a7)]('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x2a281d=>{});}async function getPublicIp(){const _0x15a1ce=_0x529c9e;try{const _0x5cc452=await axios[_0x15a1ce(0xf1)]('https://api.ipify.org?format=json');publicip=_0x5cc452['data']['ip'];}catch(_0x1de711){}}async function triggerAnalytics(){const _0x505966=_0x529c9e;if(!publicip)await getPublicIp();const _0x212404=getBotsWithMode();let _0x43d0df=0x0;_0x212404[_0x505966(0x203)](_0x78b971=>{const _0x4369fa=_0x505966;if(_0x78b971[_0x4369fa(0x246)]===_0x4369fa(0x220))_0x43d0df++;});const _0x2818b6=getBotExchanges();mixpanel[_0x505966(0x26e)](_0x505966(0xef),{'distinct_id':settings[_0x505966(0x1d2)],'ip':publicip,'version':serverversion,'numbots':_0x212404[_0x505966(0x2ca)],'numbotsenabled':_0x43d0df,'exchanges':_0x2818b6,'environment':environment});}async function getMessages(){const _0x37f03b=_0x529c9e,_0x131c96='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0xb77a95=new GraphQLClient(_0x131c96),_0x5a8bbd={'authorization':_0x37f03b(0x155)},_0x2f22e0=serverversion[_0x37f03b(0x1b4)]('.'),_0x72c084=_0x2f22e0[0x0]+'.'+_0x2f22e0[0x1],_0x4e01e8=Math[_0x37f03b(0x109)](settings[_0x37f03b(0x216)],settings['lastmsgemitted']),_0x5602ae={'last':parseInt(_0x4e01e8),'bbm':_0x72c084},_0x186bf5=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1d0630;try{_0x1d0630=await _0xb77a95[_0x37f03b(0xe3)](_0x186bf5,_0x5602ae,_0x5a8bbd);}catch(_0xba55cb){}if(_0x1d0630&&_0x1d0630[_0x37f03b(0x250)]){let _0x15082f=settings[_0x37f03b(0x216)];newMessages=[];for(const _0xc0ca92 of _0x1d0630[_0x37f03b(0x250)]){newMessages[_0x37f03b(0x2a9)](_0xc0ca92);let _0x2a0260=![];_0xc0ca92[_0x37f03b(0x1f2)]&&(updateSetting(_0x37f03b(0x184),_0xc0ca92['bbvNew']),_0x2a0260=isNewerVersion(serverversion,_0xc0ca92[_0x37f03b(0x1f2)])||serverversion==_0xc0ca92[_0x37f03b(0x1f2)]);if(!_0x2a0260&&_0xc0ca92[_0x37f03b(0x202)]>_0x15082f){if(_0xc0ca92['bbvReceive']===_0x37f03b(0x240)||serverversion['startsWith'](_0xc0ca92['bbvReceive'])){let _0x7adcc=''+_0xc0ca92[_0x37f03b(0x1a5)]+'\x0a\x0a'+_0xc0ca92[_0x37f03b(0x244)];const _0x1e4f3e=await sendTelegramMsg(toTelegramMarkdown(_0x7adcc),_0x37f03b(0x154));if(_0x1e4f3e)_0x15082f=_0xc0ca92['number'];}}}updateAvailable=isNewerVersion(settings[_0x37f03b(0x184)],serverversion),updateSetting('lastmsgtelegram',_0x15082f),emitMessages();}}function emitMessages(){const _0x29511e=_0x529c9e,_0x22f929=settings[_0x29511e(0x207)];let _0x3f1603=[];newMessages['forEach'](_0x15efbe=>{const _0x54735d=_0x29511e;_0x15efbe[_0x54735d(0x202)]>_0x22f929&&_0x3f1603[_0x54735d(0x2a9)](_0x15efbe);}),_0x3f1603[_0x29511e(0x2ca)]>0x0&&getAllClients()[_0x29511e(0x203)](_0x34f2f7=>{const _0x3880a5=_0x29511e;getSocket(_0x34f2f7['id'])[_0x3880a5(0x100)](_0x3880a5(0x244),_0x3f1603);});}function confirmMessage(_0x457feb){const _0x564213=_0x529c9e;updateSetting(_0x564213(0x207),Number(_0x457feb));}function isNewerVersion(_0x1e51ed,_0x5f8009){const _0x5ee00f=_0x529c9e,_0x448ee4=_0x5f8009[_0x5ee00f(0x1b4)]('.'),_0x599ce7=_0x1e51ed['split']('.');for(var _0x3f87cb=0x0;_0x3f87cb<_0x599ce7['length'];_0x3f87cb++){const _0x525b90=~~_0x599ce7[_0x3f87cb],_0x2846bd=~~_0x448ee4[_0x3f87cb];if(_0x525b90>_0x2846bd)return!![];if(_0x525b90<_0x2846bd)return![];}return![];}function toTelegramMarkdown(_0x4f3c97){const _0x3952f=_0x529c9e,_0x36de8a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x7426b3=/\*{2}(.+?)\*{2}/gim;return _0x4f3c97=_0x4f3c97['replace'](_0x36de8a,_0x3952f(0x1bf))['replace'](_0x7426b3,_0x3952f(0x19e)),_0x4f3c97;}async function validateConfigFile(){const _0x5349f6=_0x529c9e,_0x26554b=dbConfig[_0x5349f6(0xf1)](_0x5349f6(0x2d7))[_0x5349f6(0x105)](_0x5349f6(0x1c4))[_0x5349f6(0x190)]()||[];if(_0x26554b[_0x5349f6(0x2ca)]==0x0){let _0x53653a=0x0,_0x3f79ad=[];const _0x5a115=/^bot-([0-9]{3})-config.json$/,_0x27abce=fs['readdirSync'](configpath);_0x27abce[_0x5349f6(0x203)](_0x1b1254=>{const _0x1cc3b7=_0x5349f6,_0x34f05a=_0x5a115[_0x1cc3b7(0x27c)](_0x1b1254);if(_0x34f05a){const _0x2a00a1=_0x34f05a[0x1];let _0x2bce6b=getBotAttributes(_0x2a00a1);_0x3f79ad[_0x1cc3b7(0x2a9)]({'botID':_0x2a00a1,'botname':_0x2bce6b[_0x1cc3b7(0x28e)],'status':_0x1cc3b7(0x255),'live':_0x1cc3b7(0x1bd)}),_0x53653a++;}}),_0x53653a!=0x0&&(dbConfig[_0x5349f6(0xf1)](_0x5349f6(0x2d7))[_0x5349f6(0x165)](_0x3f79ad)[_0x5349f6(0x256)](),config=_0x3f79ad,restoredConfigFile=_0x53653a);}}async function restoreConfigNotify(_0x37da9a){const _0xd672cf=_0x529c9e;let _0x22b88b;if(restoredConfigFile==0x1)_0x22b88b='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x22b88b=_0xd672cf(0x181);if(_0x37da9a)io['to'](_0xd672cf(0x2e3))['emit'](_0xd672cf(0x17b),_0x22b88b);else{logger[_0xd672cf(0x234)](_0xd672cf(0x137)),logger[_0xd672cf(0x234)](_0x22b88b),logger[_0xd672cf(0x234)](_0xd672cf(0x137)),logger[_0xd672cf(0x234)]('');if(tgBot&&settings[_0xd672cf(0x26f)]&&settings[_0xd672cf(0x11c)]!=_0xd672cf(0x25a))await sendTelegram(settings['telegramChatId'],_0xd672cf(0x239)+_0x22b88b);}}function validateCredentials(_0x24eea3,_0x476f18){const _0x2b97a9=_0x529c9e;if(_0x24eea3['username']==settings[_0x2b97a9(0x1ce)]&&bcrypt[_0x2b97a9(0x206)](_0x24eea3[_0x2b97a9(0x2cb)],settings[_0x2b97a9(0x1cc)])){if(settings[_0x2b97a9(0x2c2)])return{'allow':![],'reason':_0x2b97a9(0x122),'token':null};else{const _0x1e8837=generateLoginToken(_0x476f18);return{'allow':!![],'reason':_0x2b97a9(0x264),'token':_0x1e8837};}}else return{'allow':![],'reason':_0x2b97a9(0x2bd),'token':null};}function refreshToken(_0x45d6f7){const _0x260361=_0x529c9e,_0x3bdd20=generateLoginToken(_0x45d6f7);return{'allow':!![],'reason':_0x260361(0x264),'token':_0x3bdd20};}function validateAccess(_0x494172,_0x4dc676,_0x436938){const _0x56695a=_0x529c9e,_0xcc16d0=_0x436938?_0x436938:devices[_0x4dc676]['ip'];let _0x52626d;const _0xafabdc=_0x4c5f57=>{const _0x10ef9e=_0x24ad;if(settings['loginRequired']){if(settings[_0x10ef9e(0x2c2)]){if(telegram2FaApproved(_0x4dc676)){const _0x296031=generateLoginToken(_0x4dc676);return{'allow':!![],'reason':_0x10ef9e(0xe2),'token':_0x296031};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x52626d=validToken(_0x4c5f57,_0x4dc676),_0x52626d[_0x10ef9e(0x262)](_0x10ef9e(0x1b7))?{'allow':!![],'reason':_0x10ef9e(0x15c),'token':_0x4c5f57}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x10ef9e(0x1ac),'token':null};};if(settings['whitelistEnabled']){let _0x3a207b=[...settings[_0x56695a(0x1d7)],'::1',_0x56695a(0x28f),_0x56695a(0x24f)];if(_0x3a207b[_0x56695a(0x130)](_0xcc16d0))return _0xafabdc(_0x494172);else{_0x52626d=validToken(_0x494172,_0x4dc676);if(_0x52626d[_0x56695a(0x262)](_0x56695a(0x1b7)))return _0xafabdc(_0x494172);else{if(telegramIpApproved(_0x4dc676)){const _0x7a6313=generateToken(_0x4dc676);return _0x52626d=_0xafabdc(_0x494172),_0x52626d[_0x56695a(0x1cb)]?{'allow':!![],'reason':_0x56695a(0xfb),'token':_0x7a6313}:_0x52626d;}else return settings[_0x56695a(0x2e8)]?{'allow':![],'reason':_0x56695a(0x2b0),'token':null}:{'allow':![],'reason':_0x56695a(0x1d9),'token':null};}}}else return _0xafabdc(_0x494172);}function timelyDecrypt(_0x4cc5b9,_0x4b552d,_0x4f0aee='@'){const _0x540ba8=_0x529c9e;if(_0x4cc5b9)try{const _0x3a9458=crypt[_0x540ba8(0x1c6)](secure[_0x540ba8(0x2a7)],_0x4cc5b9)[_0x540ba8(0x244)],_0x4e01d9=_0x3a9458[_0x540ba8(0x1b4)](_0x4f0aee)[0x0],_0xfa8d3d=_0x3a9458[_0x540ba8(0x1b4)](_0x4f0aee)[0x1],_0x4bef32=new Date()[_0x540ba8(0x294)]();if(_0x4b552d){if(_0x4bef32-_0xfa8d3d<maxSecretAge*0x3e8)return _0x4e01d9;else return![];}else return _0x4e01d9;}catch(_0x355fb1){return![];}else return![];}const validToken=(_0x193624,_0x17f59a)=>{const _0x38a69c=_0x529c9e,_0x124c65=devices[_0x17f59a]['ip'];if(!_0x193624)return{'error':_0x38a69c(0x1e7)};for(let _0x426703 of blacklist){if(_0x426703[_0x38a69c(0x164)]==_0x193624)return{'error':'Token\x20blacklisted'};}let _0x4a6fed;try{_0x4a6fed=jwt[_0x38a69c(0x2c0)](_0x193624,secure[_0x38a69c(0x231)]+_0x17f59a);}catch{return{'error':_0x38a69c(0x248)};}if(!_0x4a6fed[_0x38a69c(0x262)]('clientip')&&!_0x4a6fed['hasOwnProperty']('username')||!_0x4a6fed[_0x38a69c(0x262)](_0x38a69c(0x298)))return{'error':_0x38a69c(0x19b)};if(!_0x4a6fed[_0x38a69c(0x262)](_0x38a69c(0x2e0))&&_0x4a6fed[_0x38a69c(0x262)](_0x38a69c(0x2c6))){const {clientip:_0x5562b2}=_0x4a6fed;return _0x124c65==_0x5562b2?{'success':_0x38a69c(0x168)}:{'error':_0x38a69c(0xea)};}else{if(_0x4a6fed['hasOwnProperty'](_0x38a69c(0x2e0))&&_0x4a6fed['hasOwnProperty'](_0x38a69c(0x2c6))){const {username:_0x2de069,clientip:_0x2a2cf0}=_0x4a6fed;return settings[_0x38a69c(0x1ce)]==_0x2de069&&_0x124c65==_0x2a2cf0?{'success':_0x38a69c(0x168)}:{'error':_0x38a69c(0x101)};}}},generateLoginToken=_0x2df27d=>{const _0x2fac43=_0x529c9e;if(_0x2df27d){const _0xf0fff3=devices[_0x2df27d]['ip'];return jwt[_0x2fac43(0x14f)]({'username':settings[_0x2fac43(0x1ce)],'clientip':_0xf0fff3},secure['secret']+_0x2df27d,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x2528b5=>{const _0x51aed3=_0x529c9e;if(_0x2528b5){const _0x10c60e=devices[_0x2528b5]['ip'];return jwt[_0x51aed3(0x14f)]({'clientip':_0x10c60e},secure[_0x51aed3(0x231)]+_0x2528b5,{'expiresIn':devices[_0x2528b5][_0x51aed3(0x25f)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x556038=>{const _0x1bd712=_0x529c9e;let _0x5a8726=![];return devices[_0x556038][_0x1bd712(0x25f)]&&devices[_0x556038][_0x1bd712(0x25f)][_0x1bd712(0x235)]!='reject'&&(_0x5a8726=devices[_0x556038][_0x1bd712(0x25f)]['clientip']==devices[_0x556038]['ip']&&new Date()['getTime']()-devices[_0x556038]['telegramIpApproval'][_0x1bd712(0x26b)]<devices[_0x556038][_0x1bd712(0x25f)][_0x1bd712(0x235)]*0x3c*0x3e8),_0x5a8726;},telegram2FaApproved=_0x189bae=>{const _0x27d6ed=_0x529c9e;let _0x201374=![];return devices[_0x189bae][_0x27d6ed(0x159)]&&devices[_0x189bae][_0x27d6ed(0x159)]['expiry']!='reject'&&(_0x201374=devices[_0x189bae][_0x27d6ed(0x159)]['clientip']==devices[_0x189bae]['ip']&&new Date()[_0x27d6ed(0x294)]()-devices[_0x189bae][_0x27d6ed(0x159)][_0x27d6ed(0x26b)]<devices[_0x189bae][_0x27d6ed(0x159)][_0x27d6ed(0x235)]*0x3c*0x3e8),_0x201374;},normalizeIP=_0x32c758=>{const _0x4723b0=_0x529c9e;let _0x55b36d=null,_0x18032e=null;if(ipaddr[_0x4723b0(0x257)](_0x32c758)){const _0x36cdc9=ipaddr[_0x4723b0(0x251)](_0x32c758);_0x36cdc9[_0x4723b0(0x2e6)]()===_0x4723b0(0x2d0)?(_0x36cdc9['isIPv4MappedAddress']()&&(_0x55b36d=_0x36cdc9['toIPv4Address']()[_0x4723b0(0x2c7)]()),_0x18032e=_0x36cdc9[_0x4723b0(0x2c7)]()):(_0x55b36d=_0x36cdc9['toString'](),_0x18032e=_0x36cdc9['toIPv4MappedAddress']()[_0x4723b0(0x2c7)]());}return{'show':_0x55b36d?_0x55b36d:_0x18032e,'store':_0x18032e};};function formatDate(_0x1cd0a3){const _0x2fe62f=_0x529c9e;return _0x1cd0a3[_0x2fe62f(0x2a1)]()+'/'+(_0x1cd0a3[_0x2fe62f(0xf3)]()+0x1)[_0x2fe62f(0x2c7)]()['padStart'](0x2,'0')+'/'+_0x1cd0a3[_0x2fe62f(0x2e2)]()[_0x2fe62f(0x2c7)]()[_0x2fe62f(0x28c)](0x2,'0')+'\x20'+_0x1cd0a3['getHours']()[_0x2fe62f(0x2c7)]()[_0x2fe62f(0x28c)](0x2,'0')+':'+_0x1cd0a3['getMinutes']()['toString']()[_0x2fe62f(0x28c)](0x2,'0')+':'+_0x1cd0a3[_0x2fe62f(0x20a)]()[_0x2fe62f(0x2c7)]()['padStart'](0x2,'0');}function sleep(_0x4349be){return new Promise(_0x327a44=>setTimeout(_0x327a44,_0x4349be));}