const _0x2dc777=_0x4934;(function(_0x53b715,_0x4c0f47){const _0x249089=_0x4934,_0x5958f8=_0x53b715();while(!![]){try{const _0x44c282=-parseInt(_0x249089(0x205))/0x1*(-parseInt(_0x249089(0x23b))/0x2)+-parseInt(_0x249089(0x149))/0x3*(-parseInt(_0x249089(0x228))/0x4)+-parseInt(_0x249089(0x174))/0x5*(-parseInt(_0x249089(0xde))/0x6)+-parseInt(_0x249089(0x1e6))/0x7*(-parseInt(_0x249089(0x1d8))/0x8)+-parseInt(_0x249089(0xbc))/0x9+-parseInt(_0x249089(0x1d5))/0xa*(parseInt(_0x249089(0xc6))/0xb)+parseInt(_0x249089(0xe7))/0xc*(parseInt(_0x249089(0x15f))/0xd);if(_0x44c282===_0x4c0f47)break;else _0x5958f8['push'](_0x5958f8['shift']());}catch(_0x2d748f){_0x5958f8['push'](_0x5958f8['shift']());}}}(_0x1bf2,0x8a01f));const _0x5ce0ad=function(){let _0x6f8fc3=!![];return function(_0x362f6b,_0x412ae2){const _0x395b3a=_0x6f8fc3?function(){const _0x1e47d0=_0x4934;if(_0x412ae2){const _0x74b02a=_0x412ae2[_0x1e47d0(0xce)](_0x362f6b,arguments);return _0x412ae2=null,_0x74b02a;}}:function(){};return _0x6f8fc3=![],_0x395b3a;};}(),_0xeedab6=_0x5ce0ad(this,function(){const _0xf651c3=_0x4934;return _0xeedab6[_0xf651c3(0x139)]()[_0xf651c3(0x247)](_0xf651c3(0x207))['toString']()['constructor'](_0xeedab6)[_0xf651c3(0x247)](_0xf651c3(0x207));});_0xeedab6();'use strict';process[_0x2dc777(0x1c6)][_0x2dc777(0x17f)]=0x1;const childProcess=require(_0x2dc777(0x1d3)),fs=require('fs'),fns=require(_0x2dc777(0x109)),low=require('lowdb'),FileSync=require(_0x2dc777(0x14f)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x2dc777(0x225))[_0x2dc777(0x219)],RSA=require(_0x2dc777(0x225))[_0x2dc777(0x1ee)],bcrypt=require('bcryptjs'),jwt=require(_0x2dc777(0xb9)),ipaddr=require('ipaddr.js'),argv=require(_0x2dc777(0x201))(process[_0x2dc777(0x1f6)]['slice'](0x2))['argv'],uuidRandom=require(_0x2dc777(0x214)),TelegramBot=require(_0x2dc777(0x14b)),Mixpanel=require(_0x2dc777(0x21e)),axios=require('axios'),{GraphQLClient,gql}=require(_0x2dc777(0x121)),util=require(_0x2dc777(0x23e)),zip=new require(_0x2dc777(0x1f1))(),PORT=argv[_0x2dc777(0x1a5)]||_0x2dc777(0x10d),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x2dc777(0x15b)](_0x2dc777(0xfb)+PORT+_0x2dc777(0xc9)),process[_0x2dc777(0x15a)](0x1));const HOST=argv[_0x2dc777(0x154)]||null,userID=argv[_0x2dc777(0x15c)]||'';let bbpath=_0x2dc777(0xcb),bbpath2='';const botfile=_0x2dc777(0x1e1),configfile=_0x2dc777(0x170),settingsfile=_0x2dc777(0x1a1),securefile=_0x2dc777(0x17d);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2dc777(0x1b0)),configpath=userID?bbpath+_0x2dc777(0x157)+userID+'/':bbpath+_0x2dc777(0x157),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x2dc777(0xd7)+userID+'/':bbpath+_0x2dc777(0xd7),loggerfile=fs[_0x2dc777(0x20b)](logspath+_0x2dc777(0x108),{'flags':'a'});!fs[_0x2dc777(0x217)](configpath)&&fs[_0x2dc777(0x178)](configpath);!fs[_0x2dc777(0x217)](configbackuppath)&&fs[_0x2dc777(0x178)](configbackuppath);!fs[_0x2dc777(0x217)](logspath)&&fs[_0x2dc777(0x178)](logspath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2dc777(0x20a)]({'bots':[]})[_0x2dc777(0x17e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2dc777(0x20a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2dc777(0x232)}})[_0x2dc777(0x17e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2dc777(0x20a)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x2dc777(0x1b7)});const saltRounds=0xa,mixpanel=Mixpanel[_0x2dc777(0xfc)](_0x2dc777(0x211),{'host':_0x2dc777(0x1ed)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2dc777(0x106)]&&settings['telegramToken']!=''&&settings[_0x2dc777(0x197)]&&settings[_0x2dc777(0x197)]!='')initTelegram();const logger={'screen':_0x195a37=>{const _0x4c7a57=_0x2dc777;console[_0x4c7a57(0x15b)](_0x195a37);},'simple':_0x33be76=>{const _0x55312d=_0x2dc777;console['log'](_0x33be76),loggerfile[_0x55312d(0x17e)](util['format'](_0x33be76)+'\x0a');},'full':async _0x40bdc2=>{const _0x1f4fbe=_0x2dc777,_0x31892d=getTimeStamp()+_0x1f4fbe(0x155)+_0x40bdc2;console['log'](_0x31892d),loggerfile[_0x1f4fbe(0x17e)](util[_0x1f4fbe(0x160)](_0x31892d)+'\x0a');if(tgBot&&settings[_0x1f4fbe(0xe3)]&&settings[_0x1f4fbe(0x1ce)]!='orders')await tgBot['sendMessage'](settings[_0x1f4fbe(0xe3)],'Bot\x20Mgr\x20>\x20'+_0x40bdc2)[_0x1f4fbe(0x239)](_0x237c61=>{telegramError(_0x237c61);});}};process['on'](_0x2dc777(0x151),function(_0x411aca){const _0x2e388c=_0x2dc777;logger[_0x2e388c(0x145)](_0x411aca);});function _0x4934(_0x11cfaa,_0x131b54){const _0x12c716=_0x1bf2();return _0x4934=function(_0xeedab6,_0x5ce0ad){_0xeedab6=_0xeedab6-0xb6;let _0x1bf2ed=_0x12c716[_0xeedab6];return _0x1bf2ed;},_0x4934(_0x11cfaa,_0x131b54);}let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2dc777(0x1c3)),app=express(),http=require(_0x2dc777(0x1bc))['createServer'](app);app[_0x2dc777(0x1c7)](express['static'](path['join'](__dirname,bbpath2,_0x2dc777(0x12c)))),app[_0x2dc777(0x1c7)](express[_0x2dc777(0x1da)](path['join'](__dirname,bbpath2,_0x2dc777(0x1ec)))),app['get']('/',function(_0x24fd13,_0x5a8306){const _0x5a3c8f=_0x2dc777;_0x5a8306[_0x5a3c8f(0x12e)](path['join'](__dirname,bbpath2,_0x5a3c8f(0x12c),_0x5a3c8f(0x184)));}),app[_0x2dc777(0x1b9)](_0x2dc777(0x142),function(_0x551add,_0x120ec7){const _0x647610=_0x2dc777;_0x120ec7['sendFile'](path['join'](__dirname,bbpath2,_0x647610(0x1ec),_0x647610(0x184)));}),app[_0x2dc777(0x1b9)](_0x2dc777(0xeb),(_0x47b9c8,_0x36b663)=>{const _0xdda4c6=_0x2dc777;_0x36b663[_0xdda4c6(0x12e)](path[_0xdda4c6(0xc4)](__dirname,bbpath2,'build',_0xdda4c6(0x184)));}),app[_0x2dc777(0x1b9)](_0x2dc777(0x1fa),(_0x597976,_0x33bc90)=>{const _0x451d5c=_0x2dc777;_0x33bc90[_0x451d5c(0x12e)](path['join'](__dirname,bbpath2,_0x451d5c(0x1ec),_0x451d5c(0x184)));}),app['get']('/:bot/coins',(_0x1b4f8d,_0x5bf5cc)=>{const _0x219270=_0x2dc777;_0x5bf5cc[_0x219270(0x12e)](path['join'](__dirname,bbpath2,'build',_0x219270(0x184)));}),app[_0x2dc777(0x1b9)]('/:bot/history',(_0x42961f,_0x14bded)=>{const _0x5cf059=_0x2dc777;_0x14bded['sendFile'](path['join'](__dirname,bbpath2,_0x5cf059(0x1ec),_0x5cf059(0x184)));}),app['get'](_0x2dc777(0x215),(_0xacae6c,_0x511056)=>{const _0x259f31=_0x2dc777;_0x511056[_0x259f31(0x12e)](path[_0x259f31(0xc4)](__dirname,bbpath2,_0x259f31(0x1ec),_0x259f31(0x184)));}),app[_0x2dc777(0x1b9)](_0x2dc777(0x16b),(_0x417940,_0x29e0b8)=>{const _0x1f3703=_0x2dc777;_0x29e0b8[_0x1f3703(0x12e)](path[_0x1f3703(0xc4)](__dirname,bbpath2,_0x1f3703(0x1ec),_0x1f3703(0x184)));});if(HOST)http[_0x2dc777(0xfa)](PORT,HOST);else http[_0x2dc777(0xfa)](PORT);const io=require(_0x2dc777(0x1cf))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x5b5e59=_0x2dc777;logger[_0x5b5e59(0x145)](''),logger[_0x5b5e59(0x145)](_0x5b5e59(0x158)),await logger[_0x5b5e59(0x1eb)](_0x5b5e59(0x18e)+PORT),logger[_0x5b5e59(0x145)](_0x5b5e59(0x158));if(config[_0x5b5e59(0x18b)]!=0x0)for(const _0x100e83 of config){if(_0x100e83[_0x5b5e59(0xe9)]=='enabled'||_0x100e83[_0x5b5e59(0xe9)]==_0x5b5e59(0x21f))await logger['full'](_0x5b5e59(0x23a)+_0x100e83[_0x5b5e59(0xd8)]+_0x5b5e59(0x185)+_0x100e83[_0x5b5e59(0x11c)]),startBot([_0x100e83[_0x5b5e59(0xd8)],userID],{'cwd':bbpath},function(_0x3236f8){const _0x4ebb15=_0x5b5e59;if(_0x3236f8)logger[_0x4ebb15(0x1eb)](_0x3236f8);});else(_0x100e83[_0x5b5e59(0xe9)]==_0x5b5e59(0x1cb)||_0x100e83[_0x5b5e59(0xe9)]=='new-disabled')&&await logger['full']('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x100e83['botID']+_0x5b5e59(0x185)+_0x100e83[_0x5b5e59(0x11c)]);}else!newBot&&logger[_0x5b5e59(0x145)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x5b5e59(0x158)),logger[_0x5b5e59(0x145)]('');}function startSocket(){const _0x838841=_0x2dc777;io['on'](_0x838841(0x1ac),_0x12d602=>{const _0x337f69=_0x838841;let _0x3a334f,_0x437d76,_0x8ae968,_0x13469f,_0x3e2497;const _0x4cb4cb=_0x12d602[_0x337f69(0x1b6)][_0x337f69(0x21d)]['referer'];_0x437d76=_0x4cb4cb[_0x337f69(0xc0)](/bot[0-9]{3}/);if(_0x437d76)_0x8ae968=_0x437d76[0x0][_0x337f69(0xc0)](/[0-9]{3}/);if(_0x8ae968)_0x3a334f=_0x8ae968[0x0];else _0x3a334f='botmanager';const _0x255fbd=_0x12d602[_0x337f69(0x1b6)]['auth'][_0x337f69(0x1c8)];if(!_0x255fbd)_0x12d602[_0x337f69(0x15e)]('status',{'publicKey':secure[_0x337f69(0x122)]});else{_0x13469f=timelyDecrypt(_0x255fbd,![]);if(!_0x13469f)_0x12d602[_0x337f69(0x15e)]('status',{'publicKey':secure[_0x337f69(0x122)]});else{_0x3e2497=normalizeIP(_0x12d602['conn'][_0x337f69(0x227)])['store'];if(!devices[_0x13469f])devices[_0x13469f]={'uuid':_0x13469f,'access':{'token':null}};devices[_0x13469f]['ip']=_0x3e2497;const _0x287704=addClient(_0x12d602['id'],_0x13469f,_0x3a334f);setAccess(_0x287704),emitMessages(),_0x12d602['on'](_0x337f69(0x116),_0x859149=>{const _0x2b4c2e=_0x337f69,_0x2c601=timelyDecrypt(_0x859149[_0x2b4c2e(0x1d9)]);if(_0x2c601){_0x859149={'username':_0x859149['username'],'password':_0x2c601},devices[_0x13469f][_0x2b4c2e(0x1fd)]=validateCredentials(_0x859149,_0x13469f);if(devices[_0x13469f]['access'][_0x2b4c2e(0x1db)]==![]&&devices[_0x13469f][_0x2b4c2e(0x1fd)][_0x2b4c2e(0x1f8)]==_0x2b4c2e(0x1f3))_0x12d602['emit'](_0x2b4c2e(0xe9),{'access':devices[_0x13469f][_0x2b4c2e(0x1fd)]}),loginAccess2FA(_0x13469f,_0x3e2497);else{if(devices[_0x13469f][_0x2b4c2e(0x1fd)]['allow']==![]&&devices[_0x13469f]['access'][_0x2b4c2e(0x1f8)]==_0x2b4c2e(0x177))_0x12d602[_0x2b4c2e(0x15e)]('status',{'access':devices[_0x13469f]['access']});else devices[_0x13469f][_0x2b4c2e(0x1fd)]['allow']&&devices[_0x13469f][_0x2b4c2e(0x1fd)][_0x2b4c2e(0x1f8)]==_0x2b4c2e(0x1d1)&&(getClientsWithUuid(_0x13469f)[_0x2b4c2e(0x173)](_0x3802cd=>{setAccess(_0x3802cd);}),setTokenRefresh(_0x13469f),setSessionTimeout(_0x2b4c2e(0x116),_0x13469f));}}else logger[_0x2b4c2e(0x1eb)](_0x2b4c2e(0x12d));}),_0x12d602['on'](_0x337f69(0x234),()=>{resetPassword();}),_0x12d602['on'](_0x337f69(0x1e4),_0x239bfa=>{removeClient(_0x12d602['id']);}),_0x3a334f==_0x337f69(0x16d)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1f1c96){const _0x8fa8e2=_0x2dc777;if(_0x1f1c96!=_0x8fa8e2(0x16d)&&config[_0x8fa8e2(0x19f)]!=''){if(pid[_0x1f1c96])pid[_0x1f1c96]['send']({'function':_0x8fa8e2(0x13f),'args':null});}}function getSocket(_0x3db64e){const _0x219b45=_0x2dc777;return io[_0x219b45(0x21b)][_0x219b45(0x21b)][_0x219b45(0x1b9)](_0x3db64e);}function setAccess(_0x4ccc87){const _0x47b6d6=_0x2dc777,_0x558f2d=getSocket(_0x4ccc87['id']),_0x54aeb3=_0x4ccc87[_0x47b6d6(0x20c)],_0x46fae3=_0x4ccc87['bot'];devices[_0x54aeb3][_0x47b6d6(0x1fd)]=validateAccess(devices[_0x54aeb3]['access'][_0x47b6d6(0x14c)],_0x54aeb3),_0x558f2d['join'](_0x54aeb3);if(devices[_0x54aeb3]['access'][_0x47b6d6(0x1db)]){_0x558f2d[_0x47b6d6(0xc4)](_0x46fae3);if(_0x46fae3==_0x47b6d6(0x16d))initializeSocketBotManager(_0x558f2d);else initializeSocketBot(_0x558f2d);initClient(_0x46fae3);}devices[_0x54aeb3]['access'][_0x47b6d6(0x14c)]&&devices[_0x54aeb3][_0x47b6d6(0x1fd)][_0x47b6d6(0x1f8)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x54aeb3),devices[_0x54aeb3][_0x47b6d6(0x1fd)][_0x47b6d6(0x14c)]&&devices[_0x54aeb3]['access'][_0x47b6d6(0x1f8)]==_0x47b6d6(0x13e)&&setSessionTimeout(_0x47b6d6(0x116),_0x54aeb3),_0x558f2d[_0x47b6d6(0x15e)](_0x47b6d6(0xe9),{'status':_0x4ccc87[_0x47b6d6(0x20d)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54aeb3][_0x47b6d6(0x1fd)],'externalip':devices[_0x54aeb3]['ip'],'publicKey':secure[_0x47b6d6(0x122)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x54aeb3][_0x47b6d6(0x1fd)]['allow']==![]&&devices[_0x54aeb3]['access'][_0x47b6d6(0x1f8)]==_0x47b6d6(0x187)&&temporaryAccess2FA(_0x54aeb3,devices[_0x54aeb3]['ip']);}function setSessionTimeout(_0x17bdeb,_0x4150e6){const _0x48b9dd=_0x2dc777;let _0x57bac2;if(_0x17bdeb==_0x48b9dd(0x116))_0x57bac2=loginExpiry*0x3c*0x3e8;else _0x57bac2=devices[_0x4150e6][_0x48b9dd(0x236)][_0x48b9dd(0x1cc)]*0x3c*0x3e8-(new Date()[_0x48b9dd(0x127)]()-devices[_0x4150e6][_0x48b9dd(0x236)][_0x48b9dd(0x1c0)]);if(devices[_0x4150e6]['pidExpireLogin'])clearTimeout(devices[_0x4150e6][_0x48b9dd(0x1ba)]);devices[_0x4150e6][_0x48b9dd(0x1ba)]=setTimeout(()=>{const _0x1d0b20=_0x48b9dd;if(devices[_0x4150e6][_0x1d0b20(0x1f0)])clearTimeout(devices[_0x4150e6][_0x1d0b20(0x1f0)]);removeSocketListeners(_0x4150e6),addBlacklist(_0x4150e6),devices[_0x4150e6][_0x1d0b20(0x236)]=null,devices[_0x4150e6][_0x1d0b20(0x23d)]=null,devices[_0x4150e6]['access']['token']=null,devices[_0x4150e6]['access']=validateAccess(devices[_0x4150e6][_0x1d0b20(0x1fd)][_0x1d0b20(0x14c)],_0x4150e6),!(devices[_0x4150e6][_0x1d0b20(0x1fd)]['allow']&&devices[_0x4150e6][_0x1d0b20(0x1fd)]['reason']==_0x1d0b20(0x1e9))&&(_0x17bdeb==_0x1d0b20(0x116)?io['to'](_0x4150e6)[_0x1d0b20(0x15e)](_0x1d0b20(0xe9),{'access':{'allow':![],'reason':_0x1d0b20(0xcf),'token':null}}):io['to'](_0x4150e6)[_0x1d0b20(0x15e)]('status',{'access':{'allow':![],'reason':_0x1d0b20(0xdd),'token':null}})),devices[_0x4150e6]['access'][_0x1d0b20(0x14c)]=null;},_0x57bac2);}function setTokenRefresh(_0x2400a0){const _0x3bde98=_0x2dc777;if(devices[_0x2400a0]['pidRefreshToken'])clearTimeout(devices[_0x2400a0][_0x3bde98(0x1f0)]);devices[_0x2400a0][_0x3bde98(0x1f0)]=setTimeout(()=>{const _0x48e45e=_0x3bde98;getClientsWithUuid(_0x2400a0)['length']!=0x0?(devices[_0x2400a0][_0x48e45e(0x1fd)]=refreshToken(_0x2400a0),io['to'](_0x2400a0)[_0x48e45e(0x15e)](_0x48e45e(0xe9),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2400a0][_0x48e45e(0x1fd)],'externalip':devices[_0x2400a0]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x2400a0)):clearTimeout(devices[_0x2400a0][_0x48e45e(0x1f0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x871f80){const _0x451e41=_0x2dc777,_0x54f77b=getClient(_0x871f80['id'])[_0x451e41(0x20c)];_0x871f80[_0x451e41(0x15e)]('bots',config),_0x871f80['emit'](_0x451e41(0x1e5),cleanSettings()),_0x871f80['on'](_0x451e41(0x1b1),_0x2cc07d=>{const _0x30cf13=_0x451e41;if(validateAccess(_0x2cc07d,_0x54f77b)['allow'])addBot();else logger[_0x30cf13(0x1eb)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x871f80['on'](_0x451e41(0x224),(_0x19ebd0,_0x307925)=>{const _0x5c171e=_0x451e41;if(validateAccess(_0x307925,_0x54f77b)['allow'])toggleBot(_0x19ebd0[_0x5c171e(0xd8)],_0x19ebd0[_0x5c171e(0xe9)],_0x19ebd0['live']);else logger[_0x5c171e(0x1eb)](_0x5c171e(0x241));}),_0x871f80['on'](_0x451e41(0xb6),(_0x186342,_0x347be2)=>{const _0xbabfea=_0x451e41;if(validateAccess(_0x347be2,_0x54f77b)[_0xbabfea(0x1db)])toggleBotMode(_0x186342);else logger[_0xbabfea(0x1eb)](_0xbabfea(0x241));}),_0x871f80['on'](_0x451e41(0xc7),(_0x42f427,_0x36c322)=>{const _0x407b88=_0x451e41;if(validateAccess(_0x36c322,_0x54f77b)['allow'])deleteBot(_0x42f427);else logger[_0x407b88(0x1eb)](_0x407b88(0xf5));}),_0x871f80['on'](_0x451e41(0x1f7),(_0x31c5d5,_0x35f7a8)=>{const _0x5ac35a=_0x451e41;if(validateAccess(_0x35f7a8,_0x54f77b)[_0x5ac35a(0x1db)])storeSettings(_0x31c5d5,!![]);else logger[_0x5ac35a(0x1eb)](_0x5ac35a(0x1f4));}),_0x871f80['on'](_0x451e41(0xf9),_0x1b2cde=>{const _0x39c45a=_0x451e41;if(validateAccess(_0x1b2cde,_0x54f77b)[_0x39c45a(0x1db)])updateBB();else logger[_0x39c45a(0x1eb)](_0x39c45a(0x21a));}),_0x871f80['on']('get-messages',_0x5afe34=>{const _0xda3213=_0x451e41;if(validateAccess(_0x5afe34,_0x54f77b)[_0xda3213(0x1db)])getMessages();else logger[_0xda3213(0x1eb)](_0xda3213(0x1b3));}),_0x871f80['on'](_0x451e41(0x107),(_0x1da1a9,_0x27261c)=>{const _0x1d4ab9=_0x451e41;if(validateAccess(_0x27261c,_0x54f77b)['allow'])confirmMessage(_0x1da1a9);else logger[_0x1d4ab9(0x1eb)](_0x1d4ab9(0x161));}),_0x871f80['on'](_0x451e41(0x169),_0x2d542b=>{const _0x143b26=_0x451e41;if(validateAccess(_0x2d542b,_0x54f77b)['allow']){if(devices[_0x54f77b]['pidRefreshToken'])clearTimeout(devices[_0x54f77b][_0x143b26(0x1f0)]);if(devices[_0x54f77b]['pidExpireLogin'])clearTimeout(devices[_0x54f77b]['pidExpireLogin']);removeSocketListeners(getClient(_0x871f80['id'])[_0x143b26(0x20c)]),addBlacklist(_0x54f77b),devices[_0x54f77b]['telegramIpApproval']=null,devices[_0x54f77b][_0x143b26(0x23d)]=null,devices[_0x54f77b][_0x143b26(0x1fd)][_0x143b26(0x14c)]=null,io['to'](getClient(_0x871f80['id'])[_0x143b26(0x20c)])['emit']('status',{'access':{'allow':![],'reason':_0x143b26(0x13c),'token':null}});}else logger[_0x143b26(0x1eb)](_0x143b26(0x105));});}function initializeSocketBot(_0x5dc25f){const _0x54f7b8=_0x2dc777,_0x3ec916=getClient(_0x5dc25f['id'])[_0x54f7b8(0x221)],_0x36119c=getClient(_0x5dc25f['id'])[_0x54f7b8(0x20c)];_0x5dc25f['on'](_0x54f7b8(0x134),(_0x46c940,_0x4e7f09)=>{const _0x3e098a=_0x54f7b8;if(validateAccess(_0x4e7f09,_0x36119c)[_0x3e098a(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916][_0x3e098a(0xee)]({'function':_0x3e098a(0x1e0),'args':_0x46c940});}else logger['full'](_0x3e098a(0x1a3));}),_0x5dc25f['on'](_0x54f7b8(0x1ad),(_0x4ef74c,_0x41ce12)=>{const _0x4f89cf=_0x54f7b8;if(validateAccess(_0x41ce12,_0x36119c)[_0x4f89cf(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916][_0x4f89cf(0xee)]({'function':_0x4f89cf(0x1e2),'args':_0x4ef74c});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5dc25f['on'](_0x54f7b8(0xf0),(_0x421b78,_0x18429d)=>{const _0x262236=_0x54f7b8;if(validateAccess(_0x18429d,_0x36119c)[_0x262236(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916]['send']({'function':_0x262236(0x1ff),'args':_0x421b78});}else logger[_0x262236(0x1eb)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5dc25f['on'](_0x54f7b8(0x125),(_0x3855f8,_0x507d05)=>{const _0x4f3640=_0x54f7b8;if(validateAccess(_0x507d05,_0x36119c)[_0x4f3640(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916]['send']({'function':_0x4f3640(0xdb),'args':_0x3855f8});}else logger[_0x4f3640(0x1eb)](_0x4f3640(0x23c));}),_0x5dc25f['on'](_0x54f7b8(0x168),(_0x736951,_0x54ea89)=>{const _0x251683=_0x54f7b8;if(validateAccess(_0x54ea89,_0x36119c)[_0x251683(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916]['send']({'function':_0x251683(0xd9),'args':_0x736951});}else logger[_0x251683(0x1eb)](_0x251683(0x128));}),_0x5dc25f['on']('get-starting-balances',_0x1c3920=>{const _0x2b8089=_0x54f7b8;if(validateAccess(_0x1c3920,_0x36119c)['allow']){if(pid[_0x3ec916])pid[_0x3ec916][_0x2b8089(0xee)]({'function':_0x2b8089(0x1d0),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5dc25f['on'](_0x54f7b8(0xc1),(_0x1157c4,_0x11e803)=>{const _0x3d6bf1=_0x54f7b8;if(validateAccess(_0x11e803,_0x36119c)[_0x3d6bf1(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916][_0x3d6bf1(0xee)]({'function':_0x3d6bf1(0x202),'args':_0x1157c4});}else logger[_0x3d6bf1(0x1eb)](_0x3d6bf1(0x16c));}),_0x5dc25f['on'](_0x54f7b8(0x111),_0x139761=>{const _0x147eec=_0x54f7b8;if(validateAccess(_0x139761,_0x36119c)[_0x147eec(0x1db)]){if(pid[_0x3ec916])pid[_0x3ec916][_0x147eec(0xee)]({'function':_0x147eec(0x152),'args':null});}else logger[_0x147eec(0x1eb)](_0x147eec(0x19b));}),_0x5dc25f['on'](_0x54f7b8(0xf9),_0xf3a2b5=>{const _0x5b0b7f=_0x54f7b8;if(validateAccess(_0xf3a2b5,_0x36119c)[_0x5b0b7f(0x1db)])updateBB();else logger[_0x5b0b7f(0x1eb)](_0x5b0b7f(0x21a));}),_0x5dc25f['on']('get-messages',_0x1685db=>{const _0x311683=_0x54f7b8;if(validateAccess(_0x1685db,_0x36119c)['allow'])getMessages();else logger[_0x311683(0x1eb)](_0x311683(0x1b3));}),_0x5dc25f['on']('confirm-message',(_0x4e095d,_0x39cc80)=>{const _0x3d329a=_0x54f7b8;if(validateAccess(_0x39cc80,_0x36119c)['allow'])confirmMessage(_0x4e095d);else logger['full'](_0x3d329a(0x161));}),_0x5dc25f['on']('logout',_0xfc14e0=>{const _0x1d5123=_0x54f7b8;if(validateAccess(_0xfc14e0,_0x36119c)['allow']){if(devices[_0x36119c][_0x1d5123(0x1f0)])clearTimeout(devices[_0x36119c][_0x1d5123(0x1f0)]);if(devices[_0x36119c][_0x1d5123(0x1ba)])clearTimeout(devices[_0x36119c][_0x1d5123(0x1ba)]);removeSocketListeners(getClient(_0x5dc25f['id'])[_0x1d5123(0x20c)]),addBlacklist(_0x36119c),devices[_0x36119c][_0x1d5123(0x236)]=null,devices[_0x36119c][_0x1d5123(0x23d)]=null,devices[_0x36119c]['access'][_0x1d5123(0x14c)]=null,io['to'](getClient(_0x5dc25f['id'])[_0x1d5123(0x20c)])['emit'](_0x1d5123(0xe9),{'access':{'allow':![],'reason':_0x1d5123(0x13c),'token':null}});}else logger[_0x1d5123(0x1eb)](_0x1d5123(0x105));});}function removeSocketListeners(_0x5876d1){const _0x26328f=_0x2dc777;getClientsWithUuid(_0x5876d1)[_0x26328f(0x173)](_0x217ff1=>{const _0x1b122e=_0x26328f;getSocket(_0x217ff1['id'])[_0x1b122e(0x22f)]();});}function cleanSettings(){const _0x4faf14=_0x2dc777;let _0x5e0db2=settings;return settings[_0x4faf14(0x106)]&&settings[_0x4faf14(0x106)]!=''&&(_0x5e0db2={..._0x5e0db2,'telegramToken':_0x4faf14(0x19d)}),settings[_0x4faf14(0x12b)]&&settings[_0x4faf14(0x12b)]!=''&&(_0x5e0db2={..._0x5e0db2,'bbPassword':_0x4faf14(0x19d)}),_0x5e0db2;}function updateBB(){const _0xda7d64=_0x2dc777;installingUpdate=!![],config[_0xda7d64(0x173)](_0x196566=>{restartBot(_0x196566['botID']);}),process['send']({'update':!![]},_0x3f3b85=>{});}function startBot(_0x17d4b5,_0x502929,_0x32eb99){const _0x5ad6e3=_0x2dc777;let _0xf57804=![];const _0x33f49b=_0x17d4b5[0x0];_0x502929={..._0x502929,'stdio':[_0x5ad6e3(0xb7),'inherit',_0x5ad6e3(0xb7),_0x5ad6e3(0xdc)]},pid[_0x33f49b]=childProcess[_0x5ad6e3(0x1d6)](botfile,_0x17d4b5,_0x502929),pid[_0x33f49b]['on'](_0x5ad6e3(0x1df),_0x3d6c99=>{const _0x37de69=_0x5ad6e3;switch(Object[_0x37de69(0xc3)](_0x3d6c99)[0x0]){case _0x37de69(0x11c):updateBotName(_0x33f49b,_0x3d6c99[_0x37de69(0x11c)]);break;case _0x37de69(0x1e7):updateBotManager();break;case _0x37de69(0xe9):updateStatus(_0x33f49b,_0x3d6c99[_0x37de69(0xe9)]);break;case _0x37de69(0x103):updateLive(_0x33f49b,_0x3d6c99[_0x37de69(0x103)]);break;case'started':updateLive(_0x33f49b,_0x3d6c99['started']),io['to'](_0x33f49b)[_0x37de69(0x15e)](_0x37de69(0xe9),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x37de69(0x164):_0x3d6c99[_0x37de69(0x164)]==_0x37de69(0x233)&&restartBot(_0x33f49b);_0x3d6c99[_0x37de69(0x164)]==_0x37de69(0x133)&&toggleBot(_0x33f49b,_0x37de69(0x1cb),_0x37de69(0x22c));break;case _0x37de69(0xcc):sendTelegram(_0x33f49b,_0x3d6c99[_0x37de69(0xcc)]);break;case'telegrammsg':sendTelegramMsg(_0x3d6c99['telegrammsg']);break;case'function':io['to'](_0x33f49b)[_0x37de69(0x15e)](_0x3d6c99[_0x37de69(0x13d)],_0x3d6c99[_0x37de69(0x1dd)]);break;}}),pid[_0x33f49b]['on'](_0x5ad6e3(0x220),function(_0x4d4790){if(_0xf57804)return;_0xf57804=!![],_0x32eb99(_0x4d4790);}),pid[_0x33f49b]['on'](_0x5ad6e3(0x15a),async function(_0xa404c2){const _0x2b08cd=_0x5ad6e3;if(installingUpdate)return;if(_0xf57804)return;_0xf57804=!![],_0x32eb99(null);const _0x5c73cb=dbConfig[_0x2b08cd(0x1b9)]('bots')[_0x2b08cd(0x209)]({'botID':_0x33f49b})['value']();_0x5c73cb&&(_0x5c73cb[_0x2b08cd(0xe9)]==_0x2b08cd(0x18f)||_0x5c73cb[_0x2b08cd(0xe9)]==_0x2b08cd(0x21f))&&(await sleep(0x3e8),updateLive(_0x33f49b,_0x2b08cd(0x22c)),logger[_0x2b08cd(0x1eb)](_0x2b08cd(0x213)+_0x33f49b),startBot([_0x33f49b,userID],{'cwd':bbpath},function(_0x141e68){if(_0x141e68)logger['full'](_0x141e68);}));});}function stopBot(_0x1d1e94){const _0x36df7b=_0x2dc777;getClientsWithBotID(_0x1d1e94)[_0x36df7b(0x173)](_0x521a19=>{const _0x17ee61=_0x36df7b;getSocket(_0x521a19['id'])[_0x17ee61(0x1e4)](!![]),removeClient(_0x521a19['id']);}),pid[_0x1d1e94]&&(pid[_0x1d1e94][_0x36df7b(0x133)](),pid[_0x1d1e94]=null);}function restartBot(_0x4f67db){const _0x211ee8=_0x2dc777;if(pid[_0x4f67db])pid[_0x4f67db][_0x211ee8(0x133)]();}function addBot(){const _0x6fe5ef=_0x2dc777;let _0x141e22;for(let _0x145547=0x1;_0x145547<0x3e9;_0x145547++){_0x141e22=_0x145547[_0x6fe5ef(0x139)]()[_0x6fe5ef(0x162)](0x3,'0');let _0x4af576=config[_0x6fe5ef(0x209)](_0x6e4539=>_0x6e4539[_0x6fe5ef(0xd8)]==_0x141e22);if(!_0x4af576)break;}if(_0x141e22===_0x6fe5ef(0xe4)){logger[_0x6fe5ef(0x1eb)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full'](_0x6fe5ef(0x100)+_0x141e22),dbConfig[_0x6fe5ef(0x1b9)](_0x6fe5ef(0x113))[_0x6fe5ef(0x216)]({'botID':_0x141e22,'botname':_0x6fe5ef(0xf7)+_0x141e22,'status':'new','live':''})[_0x6fe5ef(0x17e)](),startBot([_0x141e22,userID],{'cwd':bbpath},function(_0x28e90f){const _0x526cce=_0x6fe5ef;if(_0x28e90f)logger[_0x526cce(0x1eb)](_0x28e90f);}),config=getConfiguration(),io['to'](_0x6fe5ef(0x16d))[_0x6fe5ef(0x15e)](_0x6fe5ef(0x113),config);}function deleteBot(_0x3342b3){const _0x37f099=_0x2dc777;getClientsWithBotID(_0x3342b3)['forEach'](_0x1edf56=>{const _0x4106d8=_0x4934;getSocket(_0x1edf56['id'])[_0x4106d8(0x1e4)](!![]),removeClient(_0x1edf56['id']);}),dbConfig[_0x37f099(0x1b9)](_0x37f099(0x113))[_0x37f099(0x18d)]({'botID':_0x3342b3})[_0x37f099(0x17e)](),logger[_0x37f099(0x1eb)](_0x37f099(0x123)+_0x3342b3),stopBot(_0x3342b3);try{fs[_0x37f099(0x110)](path[_0x37f099(0xc4)](configpath,_0x37f099(0x1b2)+_0x3342b3+_0x37f099(0xc5))),fs[_0x37f099(0x110)](path['join'](configpath,_0x37f099(0x1b2)+_0x3342b3+_0x37f099(0x198))),fs[_0x37f099(0x110)](path[_0x37f099(0xc4)](configpath,'bot-'+_0x3342b3+_0x37f099(0x21c))),fs['unlinkSync'](path[_0x37f099(0xc4)](configpath,'bot-'+_0x3342b3+_0x37f099(0xfd)));}catch(_0x19cdda){if(_0x19cdda)logger[_0x37f099(0x1eb)](_0x37f099(0x1cd),_0x19cdda);}config=getConfiguration(),io['to'](_0x37f099(0x16d))[_0x37f099(0x15e)](_0x37f099(0x113),config);}function toggleBot(_0x698123,_0x322e58,_0x65f70){const _0x2d6eb=_0x2dc777;dbConfig[_0x2d6eb(0x1b9)](_0x2d6eb(0x113))['find']({'botID':_0x698123})[_0x2d6eb(0x1d7)]({'status':_0x322e58})[_0x2d6eb(0x1d7)]({'live':_0x65f70})[_0x2d6eb(0x17e)]();if(_0x322e58==_0x2d6eb(0x18f)||_0x322e58==_0x2d6eb(0x21f))logger[_0x2d6eb(0x1eb)](_0x2d6eb(0x1b8)+_0x698123),startBot([_0x698123,userID],{'cwd':bbpath},function(_0x5377b8){const _0x11c844=_0x2d6eb;if(_0x5377b8)logger[_0x11c844(0x1eb)](_0x5377b8);});else(_0x322e58=='disabled'||_0x322e58==_0x2d6eb(0x14d))&&(logger['full'](_0x2d6eb(0x1fe)+_0x698123),stopBot(_0x698123));config=getConfiguration(),io['to'](_0x2d6eb(0x16d))[_0x2d6eb(0x15e)](_0x2d6eb(0x113),config);}function toggleStatus(_0x3297d6){const _0x4d6b44=_0x2dc777;let _0x7da13=dbConfig[_0x4d6b44(0x1b9)](_0x4d6b44(0x113))['find']({'botID':_0x3297d6})['value'](),_0xb87b6;if(_0x7da13[_0x4d6b44(0xe9)]===_0x4d6b44(0x18f))_0xb87b6='disabled';else{if(_0x7da13[_0x4d6b44(0xe9)]===_0x4d6b44(0x21f))_0xb87b6=_0x4d6b44(0x14d);else{if(_0x7da13[_0x4d6b44(0xe9)]===_0x4d6b44(0x14d))_0xb87b6=_0x4d6b44(0x21f);else{if(_0x7da13['status']===_0x4d6b44(0x1cb))_0xb87b6='enabled';}}}return _0xb87b6;}function updateStatus(_0x403326,_0x3f7e91){const _0x456c54=_0x2dc777;dbConfig['get'](_0x456c54(0x113))[_0x456c54(0x209)]({'botID':_0x403326})[_0x456c54(0x1d7)]({'status':_0x3f7e91})[_0x456c54(0x17e)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x456c54(0x113),config);}function updateLive(_0x4173db,_0x516195){const _0x34377b=_0x2dc777;dbConfig[_0x34377b(0x1b9)](_0x34377b(0x113))[_0x34377b(0x209)]({'botID':_0x4173db})['assign']({'live':_0x516195})['write'](),config=getConfiguration(),io['to'](_0x34377b(0x16d))[_0x34377b(0x15e)](_0x34377b(0x113),config);}function updateBotName(_0x550628,_0x2b984a){const _0x29b458=_0x2dc777;dbConfig[_0x29b458(0x1b9)](_0x29b458(0x113))[_0x29b458(0x209)]({'botID':_0x550628})['assign']({'botname':_0x2b984a})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x29b458(0x15e)](_0x29b458(0x113),config);}function updateBotManager(){const _0x47e0fe=_0x2dc777;config=getConfiguration(),io['to']('botmanager')[_0x47e0fe(0x15e)](_0x47e0fe(0x113),config);}function toggleBotMode(_0x3c85d2){const _0x37514e=_0x2dc777;if(pid[_0x3c85d2])pid[_0x3c85d2][_0x37514e(0xee)]({'function':_0x37514e(0x11d),'args':null});else{const _0x42269e=configpath+_0x37514e(0x1b2)+_0x3c85d2+_0x37514e(0xc5),_0x5edce3=fs[_0x37514e(0x1e8)](_0x42269e),_0x47fad4=JSON[_0x37514e(0x208)](_0x5edce3),_0x28ebfb=_0x47fad4['bot'][0x0][_0x37514e(0x147)];_0x47fad4[_0x37514e(0x221)][0x0][_0x37514e(0x147)]=!_0x28ebfb;const _0x3a499b=JSON[_0x37514e(0xe6)](_0x47fad4,null,0x2);fs[_0x37514e(0x102)](_0x42269e,_0x3a499b),config=getConfiguration(),io['to'](_0x37514e(0x16d))[_0x37514e(0x15e)](_0x37514e(0x113),config);}}function telegramError(_0x38dd1d){const _0x12fbd4=_0x2dc777;logger[_0x12fbd4(0x145)](getTimeStamp()+_0x12fbd4(0xef));}function validateTelegram(_0x5c532d){const _0x4bc6d1=_0x2dc777;if(_0x5c532d['from']['username']!=settings[_0x4bc6d1(0x197)]&&'@'+_0x5c532d[_0x4bc6d1(0x10f)][_0x4bc6d1(0xba)]!=settings['telegramUsername'])return tgBot[_0x4bc6d1(0x22b)](_0x5c532d[_0x4bc6d1(0x223)]['id'],_0x4bc6d1(0x144),{'parse_mode':'HTML'})[_0x4bc6d1(0x239)](_0x3fe085=>{telegramError(_0x3fe085);}),![];return!![];}async function initTelegram(){const _0x261f11=_0x2dc777;if(tgBot)tgBot[_0x261f11(0x156)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x261f11(0x106)],{'polling':!![]});let _0x4816fa=_0x261f11(0x138);_0x4816fa+='\x0a',_0x4816fa+=_0x261f11(0x235),_0x4816fa+='/disable\x20-\x20disable\x20notifications\x0a',_0x4816fa+=_0x261f11(0x188),_0x4816fa+=_0x261f11(0x117),_0x4816fa+=_0x261f11(0x129),_0x4816fa+=_0x261f11(0x1bb),_0x4816fa+=_0x261f11(0x226),_0x4816fa+=_0x261f11(0x246),_0x4816fa+=_0x261f11(0x101),_0x4816fa+=_0x261f11(0x18a),_0x4816fa+=_0x261f11(0xbd),_0x4816fa+=_0x261f11(0x19c);let _0x219c9c=_0x261f11(0x242);_0x219c9c+='\x0a',_0x219c9c+=_0x4816fa,tgBot[_0x261f11(0x124)](/\/start/,_0x1ceac0=>{const _0x4587d7=_0x261f11;if(!validateTelegram(_0x1ceac0))return;if(settings[_0x4587d7(0xe3)]!=_0x1ceac0[_0x4587d7(0x223)]['id'])updateSetting(_0x4587d7(0xe3),_0x1ceac0[_0x4587d7(0x223)]['id']);updateSetting(_0x4587d7(0x20e),!![]),tgBot[_0x4587d7(0x22b)](_0x1ceac0[_0x4587d7(0x223)]['id'],_0x219c9c)[_0x4587d7(0x239)](_0x2f2f18=>{telegramError(_0x2f2f18);});}),tgBot[_0x261f11(0x124)](/\/enable/,_0x55b167=>{const _0x706268=_0x261f11;if(!validateTelegram(_0x55b167))return;if(settings[_0x706268(0xe3)]!=_0x55b167[_0x706268(0x223)]['id'])updateSetting(_0x706268(0xe3),_0x55b167[_0x706268(0x223)]['id']);updateSetting(_0x706268(0x20e),!![]),tgBot[_0x706268(0x22b)](_0x55b167[_0x706268(0x223)]['id'],_0x706268(0xf6))['catch'](_0x463599=>{telegramError(_0x463599);});}),tgBot[_0x261f11(0x124)](/\/config/,async _0x1215fb=>{const _0x13e6ee=_0x261f11;if(!validateTelegram(_0x1215fb))return;tgBot['removeListener'](_0x13e6ee(0x165)),tgBot['sendMessage'](_0x1215fb[_0x13e6ee(0x223)]['id'],_0x13e6ee(0xe8),{'reply_markup':{'inline_keyboard':[[{'text':_0x13e6ee(0x12f),'callback_data':'orders'},{'text':_0x13e6ee(0x1c9),'callback_data':_0x13e6ee(0x148)},{'text':_0x13e6ee(0x1bd),'callback_data':_0x13e6ee(0x114)}]]}})[_0x13e6ee(0x239)](_0x110383=>{telegramError(_0x110383);}),tgBot['on'](_0x13e6ee(0x165),async _0x5a5e6f=>{const _0x5e7654=_0x13e6ee,_0x134903=_0x5a5e6f[_0x5e7654(0xf1)],_0x4b92e3=_0x5a5e6f[_0x5e7654(0x1df)];tgBot[_0x5e7654(0x12a)](_0x5a5e6f['id'])[_0x5e7654(0x175)](async()=>{const _0x5a7a07=_0x5e7654;_0x134903==_0x5a7a07(0xcd)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x5a7a07(0x20e),!![]),await tgBot[_0x5a7a07(0x22b)](_0x4b92e3['chat']['id'],_0x5a7a07(0x245))['catch'](_0xb15fb6=>{telegramError(_0xb15fb6);}));_0x134903==_0x5a7a07(0x148)&&(updateSetting(_0x5a7a07(0x1ce),_0x5a7a07(0x148)),updateSetting(_0x5a7a07(0x20e),!![]),await tgBot[_0x5a7a07(0x22b)](_0x4b92e3['chat']['id'],_0x5a7a07(0x1f5))[_0x5a7a07(0x239)](_0x4b8fd2=>{telegramError(_0x4b8fd2);}));_0x134903==_0x5a7a07(0x114)&&(updateSetting('telegramEvents',_0x5a7a07(0x114)),updateSetting(_0x5a7a07(0x20e),!![]),await tgBot[_0x5a7a07(0x22b)](_0x4b92e3[_0x5a7a07(0x223)]['id'],_0x5a7a07(0xec))[_0x5a7a07(0x239)](_0x1dc139=>{telegramError(_0x1dc139);}));if(!settings[_0x5a7a07(0xe3)])tgBot[_0x5a7a07(0x22b)](_0x4b92e3[_0x5a7a07(0x223)]['id'],_0x5a7a07(0x135))[_0x5a7a07(0x239)](_0x2e16c5=>{telegramError(_0x2e16c5);});}),tgBot['removeListener'](_0x5e7654(0x165));});}),tgBot[_0x261f11(0x124)](/\/status/,_0x195927=>{const _0x1eb3a8=_0x261f11;if(!validateTelegram(_0x195927))return;const _0x3a1f0f=getBotsWithMode();let _0x5b5c7f=_0x1eb3a8(0x186);config[_0x1eb3a8(0x173)](_0x3a5d97=>{const _0x5df89d=_0x1eb3a8,_0x59f226=_0x3a1f0f[_0x5df89d(0x209)](_0x3ee77e=>_0x3ee77e[_0x5df89d(0xd8)]==_0x3a5d97[_0x5df89d(0xd8)])[_0x5df89d(0xdf)];_0x5b5c7f+=_0x5df89d(0xf7)+_0x3a5d97[_0x5df89d(0xd8)]+':\x20'+_0x3a5d97[_0x5df89d(0xe9)]+_0x5df89d(0x185)+_0x59f226+_0x5df89d(0x185)+_0x3a5d97[_0x5df89d(0x103)]+'\x0a';}),_0x5b5c7f+='\x0a',_0x5b5c7f+=_0x1eb3a8(0x210),_0x5b5c7f+=!settings[_0x1eb3a8(0x20e)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x5b5c7f+=settings['telegramEnabled']?settings[_0x1eb3a8(0x1ce)]==_0x1eb3a8(0x114)?_0x1eb3a8(0x112):_0x1eb3a8(0x1f9)+settings[_0x1eb3a8(0x1ce)]+'\x20only\x0a':'',tgBot[_0x1eb3a8(0x22b)](_0x195927[_0x1eb3a8(0x223)]['id'],_0x5b5c7f,{'parse_mode':_0x1eb3a8(0x120)})[_0x1eb3a8(0x239)](_0x3c3fc1=>{telegramError(_0x3c3fc1);});}),tgBot[_0x261f11(0x124)](/\/restart/,_0x46ce40=>{const _0x47d1fd=_0x261f11;if(!validateTelegram(_0x46ce40))return;tgBot[_0x47d1fd(0xd4)](_0x47d1fd(0x165));const _0x1c8fc3=getEnabledBots();if(_0x1c8fc3[_0x47d1fd(0x18b)]==0x0)tgBot[_0x47d1fd(0x22b)](_0x46ce40[_0x47d1fd(0x223)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x47d1fd(0x239)](_0x482521=>{telegramError(_0x482521);});else{if(_0x1c8fc3[_0x47d1fd(0x18b)]>0x1)_0x1c8fc3[_0x47d1fd(0x216)]({'botID':'all'});let _0x427981=[],_0x3bc242=[];const _0x187363=_0x1c8fc3[_0x47d1fd(0x18b)]%0x4==0x0||_0x1c8fc3['length']%0x4==0x3||_0x1c8fc3[_0x47d1fd(0x18b)]%0x3==0x1?0x4:0x3;let _0x44e16e=0x0;_0x1c8fc3[_0x47d1fd(0x173)]((_0x1e7056,_0x1a28d3)=>{const _0x33d618=_0x47d1fd;if(_0x1a28d3%_0x187363==0x0)_0x3bc242=[];_0x3bc242[_0x33d618(0x216)]({'text':_0x1e7056['botID']==_0x33d618(0x114)?_0x33d618(0x1c5):_0x33d618(0xf7)+_0x1e7056[_0x33d618(0xd8)],'callback_data':_0x1e7056[_0x33d618(0xd8)]}),_0x1a28d3%_0x187363==0x0&&(_0x427981[_0x44e16e]=_0x3bc242,_0x44e16e++);}),tgBot[_0x47d1fd(0x22b)](_0x46ce40[_0x47d1fd(0x223)]['id'],_0x47d1fd(0x23f),{'reply_markup':{'inline_keyboard':_0x427981}})[_0x47d1fd(0x239)](_0x358bb3=>{telegramError(_0x358bb3);}),tgBot['on'](_0x47d1fd(0x165),async _0x2b664e=>{const _0x4f4bb2=_0x47d1fd,_0xa867b1=_0x2b664e['data'],_0xb0e5f4=_0x2b664e[_0x4f4bb2(0x1df)];tgBot['answerCallbackQuery'](_0x2b664e['id'])[_0x4f4bb2(0x175)](async()=>{const _0x4d3cf3=_0x4f4bb2;_0xa867b1==_0x4d3cf3(0x114)?config[_0x4d3cf3(0x173)](_0x51fd9f=>{const _0x8afaa2=_0x4d3cf3;restartBot(_0x51fd9f[_0x8afaa2(0xd8)]);}):restartBot(_0xa867b1);}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x261f11(0x124)](/\/on/,_0x3708b2=>{const _0x51a81e=_0x261f11;if(!validateTelegram(_0x3708b2))return;tgBot[_0x51a81e(0xd4)](_0x51a81e(0x165));const _0x5d96d1=getDisabledBots();if(_0x5d96d1['length']==0x0)tgBot['sendMessage'](_0x3708b2[_0x51a81e(0x223)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x51a81e(0x239)](_0x4a73da=>{telegramError(_0x4a73da);});else{if(_0x5d96d1[_0x51a81e(0x18b)]>0x1)_0x5d96d1[_0x51a81e(0x216)]({'botID':_0x51a81e(0x114)});let _0x5c6ce2=[],_0x259b1=[];const _0x104a74=_0x5d96d1[_0x51a81e(0x18b)]%0x4==0x0||_0x5d96d1[_0x51a81e(0x18b)]%0x4==0x3||_0x5d96d1[_0x51a81e(0x18b)]%0x3==0x1?0x4:0x3;let _0x1d98a9=0x0;_0x5d96d1['forEach']((_0x347f7a,_0x2fd5fb)=>{const _0x50e230=_0x51a81e;if(_0x2fd5fb%_0x104a74==0x0)_0x259b1=[];_0x259b1[_0x50e230(0x216)]({'text':_0x347f7a[_0x50e230(0xd8)]==_0x50e230(0x114)?_0x50e230(0x1c5):_0x50e230(0xf7)+_0x347f7a[_0x50e230(0xd8)],'callback_data':_0x347f7a['botID']}),_0x2fd5fb%_0x104a74==0x0&&(_0x5c6ce2[_0x1d98a9]=_0x259b1,_0x1d98a9++);}),tgBot[_0x51a81e(0x22b)](_0x3708b2[_0x51a81e(0x223)]['id'],_0x51a81e(0x115),{'reply_markup':{'inline_keyboard':_0x5c6ce2}})['catch'](_0x2fa565=>{telegramError(_0x2fa565);}),tgBot['on'](_0x51a81e(0x165),async _0x557305=>{const _0x3eb898=_0x51a81e,_0x42a033=_0x557305[_0x3eb898(0xf1)],_0xa639bc=_0x557305[_0x3eb898(0x1df)];tgBot[_0x3eb898(0x12a)](_0x557305['id'])['then'](async()=>{const _0x34fc2c=_0x3eb898;_0x42a033==_0x34fc2c(0x114)?(tgBot[_0x34fc2c(0x22b)](_0xa639bc['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')['catch'](_0x3dacbd=>{telegramError(_0x3dacbd);}),_0x5d96d1[_0x34fc2c(0x173)](_0xf03bc3=>{const _0x11923c=_0x34fc2c;if(_0xf03bc3['botID']!=_0x11923c(0x114))toggleBot(_0xf03bc3[_0x11923c(0xd8)],toggleStatus(_0xf03bc3[_0x11923c(0xd8)]),_0x11923c(0x22c));})):(tgBot[_0x34fc2c(0x22b)](_0xa639bc[_0x34fc2c(0x223)]['id'],_0x34fc2c(0x159)+_0x42a033)['catch'](_0x21f493=>{telegramError(_0x21f493);}),toggleBot(_0x42a033,toggleStatus(_0x42a033),_0x34fc2c(0x22c)));}),tgBot[_0x3eb898(0xd4)]('callback_query');});}}),tgBot[_0x261f11(0x124)](/\/off/,_0x2f93d5=>{const _0x2b1f58=_0x261f11;if(!validateTelegram(_0x2f93d5))return;tgBot[_0x2b1f58(0xd4)](_0x2b1f58(0x165));const _0x44f06b=getEnabledBots();if(_0x44f06b[_0x2b1f58(0x18b)]==0x0)tgBot[_0x2b1f58(0x22b)](_0x2f93d5[_0x2b1f58(0x223)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2b1f58(0x239)](_0x27157d=>{telegramError(_0x27157d);});else{if(_0x44f06b[_0x2b1f58(0x18b)]>0x1)_0x44f06b['push']({'botID':_0x2b1f58(0x114)});let _0x462a7c=[],_0x4305fe=[];const _0x1213f9=_0x44f06b[_0x2b1f58(0x18b)]%0x4==0x0||_0x44f06b[_0x2b1f58(0x18b)]%0x4==0x3||_0x44f06b['length']%0x3==0x1?0x4:0x3;let _0x37c02a=0x0;_0x44f06b[_0x2b1f58(0x173)]((_0x2ff5c3,_0x139c32)=>{const _0x49482=_0x2b1f58;if(_0x139c32%_0x1213f9==0x0)_0x4305fe=[];_0x4305fe['push']({'text':_0x2ff5c3[_0x49482(0xd8)]==_0x49482(0x114)?_0x49482(0x1c5):_0x49482(0xf7)+_0x2ff5c3['botID'],'callback_data':_0x2ff5c3[_0x49482(0xd8)]}),_0x139c32%_0x1213f9==0x0&&(_0x462a7c[_0x37c02a]=_0x4305fe,_0x37c02a++);}),tgBot['sendMessage'](_0x2f93d5[_0x2b1f58(0x223)]['id'],_0x2b1f58(0x15d),{'reply_markup':{'inline_keyboard':_0x462a7c}})[_0x2b1f58(0x239)](_0x197f1=>{telegramError(_0x197f1);}),tgBot['on'](_0x2b1f58(0x165),async _0x4f2464=>{const _0x47f8ae=_0x2b1f58,_0x16b993=_0x4f2464[_0x47f8ae(0xf1)],_0x20f737=_0x4f2464[_0x47f8ae(0x1df)];tgBot[_0x47f8ae(0x12a)](_0x4f2464['id'])[_0x47f8ae(0x175)](async()=>{const _0x3827f4=_0x47f8ae;_0x16b993==_0x3827f4(0x114)?(tgBot[_0x3827f4(0x22b)](_0x20f737['chat']['id'],_0x3827f4(0x136))[_0x3827f4(0x239)](_0x4066c6=>{telegramError(_0x4066c6);}),_0x44f06b['forEach'](_0x499100=>{const _0x48618d=_0x3827f4;if(_0x499100[_0x48618d(0xd8)]!='all')toggleBot(_0x499100[_0x48618d(0xd8)],toggleStatus(_0x499100[_0x48618d(0xd8)]),'stopped');})):(tgBot[_0x3827f4(0x22b)](_0x20f737[_0x3827f4(0x223)]['id'],_0x3827f4(0x1bf)+_0x16b993)['catch'](_0x4fde42=>{telegramError(_0x4fde42);}),toggleBot(_0x16b993,toggleStatus(_0x16b993),_0x3827f4(0x22c)));}),tgBot[_0x47f8ae(0xd4)]('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0x49be7f=>{const _0x4e2dee=_0x261f11;if(!validateTelegram(_0x49be7f))return;tgBot[_0x4e2dee(0xd4)](_0x4e2dee(0x165));const _0x4d5689=getEnabledBots();if(_0x4d5689[_0x4e2dee(0x18b)]==0x0)tgBot[_0x4e2dee(0x22b)](_0x49be7f[_0x4e2dee(0x223)]['id'],_0x4e2dee(0x16a))[_0x4e2dee(0x239)](_0x47803a=>{telegramError(_0x47803a);});else{if(_0x4d5689[_0x4e2dee(0x18b)]>0x1){let _0x3205d2=[],_0x42a45c=[];const _0x972065=_0x4d5689[_0x4e2dee(0x18b)]%0x4==0x0||_0x4d5689[_0x4e2dee(0x18b)]%0x4==0x3||_0x4d5689[_0x4e2dee(0x18b)]%0x3==0x1?0x4:0x3;let _0x358790=0x0;_0x4d5689[_0x4e2dee(0x173)]((_0xbd5fc4,_0x2a3793)=>{const _0x439925=_0x4e2dee;if(_0x2a3793%_0x972065==0x0)_0x42a45c=[];_0x42a45c[_0x439925(0x216)]({'text':'Bot\x20'+_0xbd5fc4[_0x439925(0xd8)],'callback_data':_0xbd5fc4[_0x439925(0xd8)]}),_0x2a3793%_0x972065==0x0&&(_0x3205d2[_0x358790]=_0x42a45c,_0x358790++);}),tgBot[_0x4e2dee(0x22b)](_0x49be7f[_0x4e2dee(0x223)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x3205d2}})['catch'](_0x28e9ca=>{telegramError(_0x28e9ca);}),tgBot['on'](_0x4e2dee(0x165),async _0x3b84b3=>{const _0x4b3a63=_0x4e2dee,_0x589d35=_0x3b84b3[_0x4b3a63(0xf1)],_0x19253a=_0x3b84b3[_0x4b3a63(0x1df)];tgBot[_0x4b3a63(0x12a)](_0x3b84b3['id'])[_0x4b3a63(0x175)](async()=>{const _0x5cb229=_0x4b3a63;if(pid[_0x589d35])pid[_0x589d35]['send']({'function':_0x5cb229(0x176),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x4bd532=_0x4d5689[0x0][_0x4e2dee(0xd8)];if(pid[_0x4bd532])pid[_0x4bd532][_0x4e2dee(0xee)]({'function':_0x4e2dee(0x176),'args':null});}}}),tgBot[_0x261f11(0x124)](/\/update/,async _0x45d588=>{const _0x50d288=_0x261f11;if(!validateTelegram(_0x45d588))return;tgBot[_0x50d288(0xd4)]('callback_query'),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x45d588['chat']['id'],_0x50d288(0x218))[_0x50d288(0x239)](_0x50a6ae=>{telegramError(_0x50a6ae);});else!validInstallation?tgBot[_0x50d288(0x22b)](_0x45d588[_0x50d288(0x223)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x21d2a7=>{telegramError(_0x21d2a7);}):(tgBot[_0x50d288(0x22b)](_0x45d588[_0x50d288(0x223)]['id'],_0x50d288(0x14a),{'reply_markup':{'inline_keyboard':[[{'text':_0x50d288(0x137),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x50d288(0x239)](_0x282d3d=>{telegramError(_0x282d3d);}),tgBot['on'](_0x50d288(0x165),async _0xfbed88=>{const _0x2ef8b6=_0x50d288,_0xedbb4a=_0xfbed88[_0x2ef8b6(0xf1)],_0x3e0f11=_0xfbed88[_0x2ef8b6(0x1df)];tgBot[_0x2ef8b6(0x12a)](_0xfbed88['id'])[_0x2ef8b6(0x175)](async()=>{const _0x353197=_0x2ef8b6;_0xedbb4a==_0x353197(0xed)&&(await tgBot[_0x353197(0x22b)](_0x3e0f11['chat']['id'],_0x353197(0xbe))[_0x353197(0x239)](_0x5850ab=>{telegramError(_0x5850ab);}),updateBB());_0xedbb4a=='no'&&await tgBot[_0x353197(0x22b)](_0x3e0f11[_0x353197(0x223)]['id'],_0x353197(0x199))['catch'](_0x383236=>{telegramError(_0x383236);});if(!settings[_0x353197(0xe3)])tgBot[_0x353197(0x22b)](_0x3e0f11['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x353197(0x239)](_0x25c98d=>{telegramError(_0x25c98d);});}),tgBot[_0x2ef8b6(0xd4)]('callback_query');}));}),tgBot[_0x261f11(0x124)](/\/toggle/,_0x313b30=>{const _0x20009d=_0x261f11;if(!validateTelegram(_0x313b30))return;tgBot[_0x20009d(0xd4)](_0x20009d(0x165));const _0x14a27e=getBotsWithMode();if(_0x14a27e[_0x20009d(0x18b)]==0x0)tgBot['sendMessage'](_0x313b30[_0x20009d(0x223)]['id'],_0x20009d(0x16a))[_0x20009d(0x239)](_0x1cc9f0=>{telegramError(_0x1cc9f0);});else{let _0x133202=[],_0x59aff9=[];const _0x523822=0x2;let _0xb937b2=0x0;_0x14a27e['forEach']((_0x3d04ec,_0x79a93d)=>{const _0x26af26=_0x20009d;if(_0x79a93d%_0x523822==0x0)_0x59aff9=[];_0x59aff9['push']({'text':_0x26af26(0xf7)+_0x3d04ec[_0x26af26(0xd8)]+'\x20('+_0x3d04ec[_0x26af26(0xdf)]+')','callback_data':_0x3d04ec['botID']}),_0x79a93d%_0x523822==0x0&&(_0x133202[_0xb937b2]=_0x59aff9,_0xb937b2++);}),tgBot[_0x20009d(0x22b)](_0x313b30[_0x20009d(0x223)]['id'],_0x20009d(0x16f),{'reply_markup':{'inline_keyboard':_0x133202}})['catch'](_0x1f46ab=>{telegramError(_0x1f46ab);}),tgBot['on'](_0x20009d(0x165),async _0x4fc8f3=>{const _0x5d7ce3=_0x20009d,_0x2e5545=_0x4fc8f3[_0x5d7ce3(0xf1)],_0x5c3fff=_0x4fc8f3['message'];tgBot[_0x5d7ce3(0x12a)](_0x4fc8f3['id'])['then'](async()=>{const _0x24fb58=_0x5d7ce3,_0x102237=_0x14a27e[_0x24fb58(0x209)](_0x5c333a=>_0x5c333a[_0x24fb58(0xd8)]==_0x2e5545),_0x2c6fed=_0x102237[_0x24fb58(0xdf)]==_0x24fb58(0x20f)?'manual':_0x24fb58(0x20f);tgBot[_0x24fb58(0x22b)](_0x5c3fff[_0x24fb58(0x223)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x2e5545+_0x24fb58(0x1b5)+_0x2c6fed+'\x20mode')[_0x24fb58(0x239)](_0x11d606=>{telegramError(_0x11d606);}),toggleBotMode(_0x2e5545);}),tgBot[_0x5d7ce3(0xd4)](_0x5d7ce3(0x165));});}}),tgBot[_0x261f11(0x124)](/\/names/,_0x455691=>{const _0x167eee=_0x261f11;if(!validateTelegram(_0x455691))return;let _0x4cfd0f='';config['forEach'](_0x17e491=>{const _0x103855=_0x4934;_0x4cfd0f+=_0x103855(0xf7)+_0x17e491[_0x103855(0xd8)]+':\x20'+_0x17e491[_0x103855(0x11c)]+'\x0a';}),tgBot['sendMessage'](_0x455691['chat']['id'],_0x4cfd0f,{'parse_mode':'HTML'})[_0x167eee(0x239)](_0x1b7cdf=>{telegramError(_0x1b7cdf);});}),tgBot[_0x261f11(0x124)](/\/disable/,_0x17b9c6=>{const _0x39f05b=_0x261f11;if(!validateTelegram(_0x17b9c6))return;tgBot[_0x39f05b(0x22b)](_0x17b9c6[_0x39f05b(0x223)]['id'],_0x39f05b(0x222))[_0x39f05b(0x239)](_0x14c7c7=>{telegramError(_0x14c7c7);}),updateSetting(_0x39f05b(0x20e),![]);}),tgBot[_0x261f11(0x124)](/\/help/,_0x423a64=>{const _0x3c1108=_0x261f11;if(!validateTelegram(_0x423a64))return;tgBot['sendMessage'](_0x423a64[_0x3c1108(0x223)]['id'],_0x4816fa)[_0x3c1108(0x239)](_0x417450=>{telegramError(_0x417450);});}),tgBot['on'](_0x261f11(0x1c1),_0x423809=>{const _0x5df14b=_0x261f11;_0x423809[_0x5df14b(0x139)]()[_0x5df14b(0xe5)]('404\x20Not\x20Found')&&(logger[_0x5df14b(0x1eb)](_0x5df14b(0x194)),tgBot[_0x5df14b(0x156)](),tgBot=null,io['to'](_0x5df14b(0x16d))[_0x5df14b(0x15e)](_0x5df14b(0x1f2),'Invalid\x20Telegram\x20token'));}),process[_0x261f11(0x1a7)](_0x261f11(0x189),()=>{const _0x3a3244=_0x261f11;if(tgBot)tgBot['stopPolling']();process[_0x3a3244(0x15a)](0x1);}),process[_0x261f11(0x1a7)](_0x261f11(0x19e),()=>{const _0x34f6ac=_0x261f11;if(tgBot)tgBot['stopPolling']();process[_0x34f6ac(0x15a)](0x1);});}}function disableTelegram(){const _0x30acc6=_0x2dc777;tgBot&&(tgBot[_0x30acc6(0x156)](),tgBot=null);}function sendTelegram(_0x1c88d7,_0x4a63db){const _0x10218c=_0x2dc777;if(settings[_0x10218c(0x20e)]){if(settings[_0x10218c(0x1ce)]==_0x10218c(0x114)||(_0x4a63db[_0x10218c(0x1ea)]==_0x10218c(0x220)||_0x4a63db[_0x10218c(0x1ea)]==_0x10218c(0x11f))&&settings[_0x10218c(0x1ce)]==_0x10218c(0x148)||_0x4a63db[_0x10218c(0x1ea)]==_0x10218c(0x150)&&settings[_0x10218c(0x1ce)]=='orders'){if(tgBot&&settings[_0x10218c(0xe3)]){if(_0x4a63db['showname'])tgBot[_0x10218c(0x22b)](settings[_0x10218c(0xe3)],_0x4a63db[_0x10218c(0x11c)]+'\x20>\x20'+_0x4a63db[_0x10218c(0x238)])[_0x10218c(0x239)](_0x14f3cf=>{telegramError(_0x14f3cf);});else tgBot[_0x10218c(0x22b)](settings[_0x10218c(0xe3)],'Bot\x20'+_0x1c88d7+_0x10218c(0x1fb)+_0x4a63db[_0x10218c(0x238)])[_0x10218c(0x239)](_0x505b6b=>{telegramError(_0x505b6b);});}}}}async function sendTelegramMsg(_0x4f8444,_0x1e6954=_0x2dc777(0x120)){const _0x1dead4=_0x2dc777;return settings['telegramEnabled']&&tgBot&&settings[_0x1dead4(0xe3)]?(await tgBot[_0x1dead4(0x22b)](settings[_0x1dead4(0xe3)],_0x4f8444,{'parse_mode':_0x1e6954})[_0x1dead4(0x239)](_0x516e91=>{telegramError(_0x516e91);}),!![]):![];}function getDeviceWithIp(_0x38ec3a){const _0x4aa62e=_0x2dc777;return devices[_0x4aa62e(0x209)](_0x5af95f=>_0x5af95f['ip']===_0x38ec3a);}function temporaryAccess2FA(_0x351e17,_0x403c61){const _0x11f0f8=_0x2dc777;let _0xfa20ce=new Date(),_0x4f4f9f=![];if(lastIpApproval){if(_0xfa20ce-lastIpApproval<0x1388)_0x4f4f9f=!![];}lastIpApproval=new Date();if(_0x4f4f9f)return;tgBot&&settings[_0x11f0f8(0xe3)]&&(tgBot[_0x11f0f8(0xd4)]('callback_query'),tgBot['sendMessage'](settings[_0x11f0f8(0xe3)],_0x11f0f8(0xd3)+normalizeIP(_0x403c61)[_0x11f0f8(0xe1)]+_0x11f0f8(0x1ae),{'parse_mode':_0x11f0f8(0x120),'reply_markup':{'inline_keyboard':[[{'text':_0x11f0f8(0x19a),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x11f0f8(0x22e),'callback_data':'30'},{'text':'reject','callback_data':_0x11f0f8(0x17c)}]]}})[_0x11f0f8(0x239)](_0xde5014=>{telegramError(_0xde5014);}),tgBot['on'](_0x11f0f8(0x165),async _0x1d9190=>{const _0x5da968=_0x11f0f8,_0x13edf8=_0x1d9190[_0x5da968(0xf1)],_0x23203f=_0x1d9190[_0x5da968(0x1df)];tgBot['answerCallbackQuery'](_0x1d9190['id'])[_0x5da968(0x175)](async()=>{const _0x3282c8=_0x5da968;devices[_0x351e17][_0x3282c8(0x236)]={'clientip':_0x403c61,'timestamp':new Date()[_0x3282c8(0x127)](),'expiry':_0x13edf8},_0x13edf8!=_0x3282c8(0x17c)?(await tgBot['sendMessage'](_0x23203f['chat']['id'],'Access\x20enabled\x20for\x20'+_0x13edf8+_0x3282c8(0x1ca),{'parse_mode':_0x3282c8(0x120)})[_0x3282c8(0x239)](_0x480101=>{telegramError(_0x480101);}),io['to'](_0x351e17)[_0x3282c8(0x15e)]('status',{'access':{'allow':![],'reason':_0x3282c8(0x22d),'token':null}})):(await tgBot[_0x3282c8(0x22b)](_0x23203f['chat']['id'],_0x3282c8(0x167))['catch'](_0x4faa73=>{telegramError(_0x4faa73);}),io['to'](_0x351e17)[_0x3282c8(0x15e)]('status',{'access':{'allow':![],'reason':_0x3282c8(0x171),'token':null}}));}),tgBot[_0x5da968(0xd4)](_0x5da968(0x165));}));}function loginAccess2FA(_0x56dd32,_0x355e7b){const _0x470d2f=_0x2dc777;tgBot&&settings['telegramChatId']&&(tgBot[_0x470d2f(0xd4)](_0x470d2f(0x165)),tgBot['sendMessage'](settings[_0x470d2f(0xe3)],_0x470d2f(0x16e)+normalizeIP(_0x355e7b)['show']+'</b>\x20?',{'parse_mode':_0x470d2f(0x120),'reply_markup':{'inline_keyboard':[[{'text':_0x470d2f(0x10e),'callback_data':loginExpiry},{'text':_0x470d2f(0x17c),'callback_data':_0x470d2f(0x17c)}]]}})[_0x470d2f(0x239)](_0x1d81f9=>{telegramError(_0x1d81f9);}),tgBot['on'](_0x470d2f(0x165),async _0x684372=>{const _0x508344=_0x470d2f,_0x2b8df8=_0x684372[_0x508344(0xf1)],_0x1d4a17=_0x684372[_0x508344(0x1df)];tgBot[_0x508344(0x12a)](_0x684372['id'])[_0x508344(0x175)](async()=>{const _0x3792ea=_0x508344;devices[_0x56dd32][_0x3792ea(0x23d)]={'clientip':_0x355e7b,'timestamp':new Date()[_0x3792ea(0x127)](),'expiry':_0x2b8df8},_0x2b8df8!='reject'?(await tgBot[_0x3792ea(0x22b)](_0x1d4a17['chat']['id'],_0x3792ea(0xda),{'parse_mode':'HTML'})[_0x3792ea(0x239)](_0x461d5a=>{telegramError(_0x461d5a);}),io['to'](_0x56dd32)[_0x3792ea(0x15e)]('status',{'access':{'allow':![],'reason':_0x3792ea(0x22d),'token':null}})):(await tgBot[_0x3792ea(0x22b)](_0x1d4a17[_0x3792ea(0x223)]['id'],'Login\x20rejected')[_0x3792ea(0x239)](_0xd4c74e=>{telegramError(_0xd4c74e);}),io['to'](_0x56dd32)[_0x3792ea(0x15e)](_0x3792ea(0xe9),{'access':{'allow':![],'reason':_0x3792ea(0x230),'token':null}}));}),tgBot['removeListener'](_0x508344(0x165));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4604f8=_0x2dc777;return dbConfig[_0x4604f8(0x1b9)]('bots')[_0x4604f8(0x10b)](_0x4604f8(0xd8))[_0x4604f8(0x18c)]({'status':_0x4604f8(0x18f)})[_0x4604f8(0x132)]()||[];}function getDisabledBots(){const _0x5679dd=_0x2dc777;return dbConfig[_0x5679dd(0x1b9)](_0x5679dd(0x113))[_0x5679dd(0x10b)](_0x5679dd(0xd8))[_0x5679dd(0x18c)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x4ad334){const _0x4cedca=_0x2dc777;let _0x1cfd21={};const _0x226b62=configpath+_0x4cedca(0x1b2)+_0x4ad334+_0x4cedca(0xc5),_0x4948b6=fs[_0x4cedca(0x217)](_0x226b62);if(_0x4948b6){const _0x2b662a=fs[_0x4cedca(0x1e8)](_0x226b62);try{const _0x34d713=JSON[_0x4cedca(0x208)](_0x2b662a),_0x5196cf=_0x34d713?_0x34d713['bot'][0x0][_0x4cedca(0x147)]:![];_0x1cfd21['mode']=_0x5196cf?'auto':'manual',_0x1cfd21['botname']=_0x34d713?_0x34d713[_0x4cedca(0x221)][0x0][_0x4cedca(0x11c)]:_0x4cedca(0xf7)+_0x4ad334;}catch(_0x42a13e){_0x1cfd21[_0x4cedca(0xdf)]=_0x4cedca(0xd1),_0x1cfd21['botname']='Bot\x20'+_0x4ad334;}}else _0x1cfd21[_0x4cedca(0xdf)]=_0x4cedca(0xd1),_0x1cfd21['botname']=_0x4cedca(0xf7)+_0x4ad334;return _0x1cfd21;}function getBotsWithMode(){const _0xa9dfab=_0x2dc777,_0x339a8d=dbConfig[_0xa9dfab(0x1b9)](_0xa9dfab(0x113))[_0xa9dfab(0x10b)](_0xa9dfab(0xd8))[_0xa9dfab(0x132)]()||[];return _0x339a8d[_0xa9dfab(0x173)](_0x3bc7ad=>{const _0x53c25c=_0xa9dfab;let _0x429579=getBotAttributes(_0x3bc7ad[_0x53c25c(0xd8)]);_0x3bc7ad[_0x53c25c(0xdf)]=_0x429579[_0x53c25c(0xdf)];}),_0x339a8d;}async function initUser(){const _0x1dada5=_0x2dc777;if(!settings[_0x1dada5(0x1fc)]){const _0x4e3c28=uuidRandom();mixpanel[_0x1dada5(0x203)](_0x4e3c28),updateSetting('userid',_0x4e3c28);}}async function initSecure(){const _0xfcd79f=_0x2dc777;let _0x2fda27=getSecure();if(!_0x2fda27[_0xfcd79f(0xfe)](_0xfcd79f(0x1de))){let _0x278cca=await generateKeys();_0x2fda27[_0xfcd79f(0x122)]=_0x278cca[_0xfcd79f(0x122)],_0x2fda27[_0xfcd79f(0xd6)]=_0x278cca['privateKey'],_0x2fda27[_0xfcd79f(0x1de)]=crypto[_0xfcd79f(0x17a)](0x20)[_0xfcd79f(0x139)](_0xfcd79f(0x204));;storeSecure(_0x2fda27);}}function getSettings(){const _0x429676=_0x2dc777;return dbSettings['get'](_0x429676(0x1e5))['value']()||{};}function getSecure(){const _0x928dc3=_0x2dc777;return dbSecure[_0x928dc3(0x1b9)]('secure')[_0x928dc3(0x132)]()||{};}function getBlacklist(){const _0x24b2ed=_0x2dc777;return dbSecure[_0x24b2ed(0x1b9)]('blacklist')[_0x24b2ed(0x132)]()||[];}function broadcastToBots(_0x440cb7,_0x320077){const _0x4f85aa=_0x2dc777;config[_0x4f85aa(0x173)](_0x116293=>{const _0xe05b4f=_0x4f85aa;if(_0x116293[_0xe05b4f(0xe9)]==_0xe05b4f(0x18f)&&_0x116293['live']==_0xe05b4f(0x10a)){if(pid[_0x116293[_0xe05b4f(0xd8)]])pid[_0x116293[_0xe05b4f(0xd8)]]['send']({[_0x440cb7]:_0x320077});}});}function storeSettings(_0x3e4ca6,_0x2c178c=![]){const _0xa318d2=_0x2dc777;_0x3e4ca6={...settings,..._0x3e4ca6};if(_0x2c178c&&_0x3e4ca6[_0xa318d2(0x12b)]!=_0xa318d2(0x19d)&&_0x3e4ca6['bbPassword']!=''){const _0x165a3f=crypt[_0xa318d2(0x1c4)](secure[_0xa318d2(0xd6)],_0x3e4ca6[_0xa318d2(0x12b)])[_0xa318d2(0x1df)][_0xa318d2(0x200)]('@')[0x0],_0x54a8ac=bcrypt[_0xa318d2(0x243)](_0x165a3f,saltRounds);_0x3e4ca6={..._0x3e4ca6,'bbPassword':_0x54a8ac};}if(_0x2c178c&&_0x3e4ca6[_0xa318d2(0x106)]!=_0xa318d2(0x19d)&&_0x3e4ca6[_0xa318d2(0x106)]!=''){const _0x4fb3c9=crypt[_0xa318d2(0x1c4)](secure[_0xa318d2(0xd6)],_0x3e4ca6[_0xa318d2(0x106)])[_0xa318d2(0x1df)]['split']('@')[0x0];_0x3e4ca6={..._0x3e4ca6,'telegramToken':_0x4fb3c9};}const _0x739d16=_0x3e4ca6[_0xa318d2(0x106)]!=_0xa318d2(0x19d)&&_0x3e4ca6[_0xa318d2(0x106)]!=settings[_0xa318d2(0x106)]||_0x3e4ca6[_0xa318d2(0x197)]!=settings[_0xa318d2(0x197)],_0x239b6d=_0x3e4ca6[_0xa318d2(0x106)]==''||_0x3e4ca6['telegramUsername']=='';if(_0x739d16)_0x3e4ca6[_0xa318d2(0x1ce)]=_0xa318d2(0x114);for(const [_0x501fb4,_0xa7b562]of Object[_0xa318d2(0x172)](_0x3e4ca6)){if(_0x501fb4==_0xa318d2(0x106)&&_0xa7b562==_0xa318d2(0x19d)){_0x3e4ca6['telegramToken']=settings['telegramToken'];continue;};if(_0x501fb4=='bbPassword'&&_0xa7b562==_0xa318d2(0x19d)){_0x3e4ca6['bbPassword']=settings[_0xa318d2(0x12b)];continue;};dbSettings[_0xa318d2(0x1ef)](_0xa318d2(0x22a)+_0x501fb4,_0xa7b562)['write']();}settings=_0x3e4ca6,io['to'](_0xa318d2(0x16d))[_0xa318d2(0x15e)]('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0xa318d2(0x10c)]);if(_0x739d16&&!_0x239b6d)initTelegram();if(_0x739d16&&_0x239b6d)disableTelegram();getAllClients()[_0xa318d2(0x173)](_0x15b053=>{const _0x63562c=_0xa318d2;getSocket(_0x15b053['id'])[_0x63562c(0x15e)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x385154,_0x4cfe48){const _0x2a3009=_0x2dc777;dbSettings[_0x2a3009(0x1ef)]('settings.'+_0x385154,_0x4cfe48)[_0x2a3009(0x17e)](),settings=getSettings(),io['to'](_0x2a3009(0x16d))['emit']('settings',cleanSettings());}function storeSecure(_0x5325c1){const _0x1083e7=_0x2dc777;dbSecure['get'](_0x1083e7(0x1d2))['push'](_0x5325c1)[_0x1083e7(0x17e)](),secure=_0x5325c1;}function addBlacklist(_0x1b6eee){const _0x1fe5f9=_0x2dc777;cleanBlacklist();let _0x57bc7f;devices[_0x1b6eee][_0x1fe5f9(0x236)]?_0x57bc7f=Math[_0x1fe5f9(0x163)](devices[_0x1b6eee][_0x1fe5f9(0x236)][_0x1fe5f9(0x1cc)],loginExpiry):_0x57bc7f=loginExpiry,dbSecure[_0x1fe5f9(0x1b9)](_0x1fe5f9(0x11b))[_0x1fe5f9(0x216)]({'expiry':new Date()[_0x1fe5f9(0x127)]()+_0x57bc7f*0x3c*0x3e8,'token':devices[_0x1b6eee][_0x1fe5f9(0x1fd)][_0x1fe5f9(0x14c)]})[_0x1fe5f9(0x17e)](),blacklist=dbSecure[_0x1fe5f9(0x1b9)](_0x1fe5f9(0x11b))[_0x1fe5f9(0x132)]();}function cleanBlacklist(){const _0x12b7f6=_0x2dc777;let _0x449c8b=dbSecure[_0x12b7f6(0x1b9)](_0x12b7f6(0x11b))[_0x12b7f6(0x1a9)]()[_0x12b7f6(0x132)](),_0x45c67e=new Date()[_0x12b7f6(0x127)]();_0x449c8b[_0x12b7f6(0x173)](_0x5b404e=>{const _0x4285f8=_0x12b7f6;_0x5b404e[_0x4285f8(0x1cc)]<_0x45c67e&&dbSecure[_0x4285f8(0x1b9)]('blacklist')['remove']({'expiry':_0x5b404e[_0x4285f8(0x1cc)]})['write']();});}function initStates(){const _0x4c794d=_0x2dc777;let _0x475b9e=getConfiguration();_0x475b9e[_0x4c794d(0x173)](_0x391ed7=>{const _0x1d054b=_0x4c794d;_0x391ed7[_0x1d054b(0x103)]='stopped';}),storeConfiguration(_0x475b9e);}function onKeys(){const _0x2ac26d=new RSA();return new Promise(_0x54fe9b=>{_0x2ac26d['generateKeyPairAsync']()['then'](_0x4f4897=>{_0x54fe9b(_0x4f4897);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1552d7=_0x2dc777;let _0x1be429=getSettings(),_0x1c645c=![];!_0x1be429['hasOwnProperty'](_0x1552d7(0x195))&&(_0x1be429['lastmsgtelegram']=0x0,_0x1c645c=!![]);!_0x1be429[_0x1552d7(0xfe)](_0x1552d7(0x143))&&(_0x1be429[_0x1552d7(0x143)]=0x0,_0x1c645c=!![]);!_0x1be429[_0x1552d7(0xfe)](_0x1552d7(0xf3))&&(_0x1be429[_0x1552d7(0xf3)]=_0x1552d7(0x232),_0x1c645c=!![]);if(_0x1c645c)storeSettings(_0x1be429);}function storeConfiguration(_0x4ed3c7){const _0x46573b=_0x2dc777;dbConfig[_0x46573b(0x1b9)](_0x46573b(0x113))['remove']()[_0x46573b(0x17e)](),_0x4ed3c7[_0x46573b(0x173)](_0x1305b9=>{const _0xb75b77=_0x46573b;delete _0x1305b9[_0xb75b77(0xdf)];}),dbConfig[_0x46573b(0x1b9)](_0x46573b(0x113))[_0x46573b(0x216)](..._0x4ed3c7)[_0x46573b(0x17e)](),config=_0x4ed3c7;}function resetPassword(){const _0x27aa9c=_0x2dc777;tgBot&&settings['telegramChatId']&&(tgBot[_0x27aa9c(0xd4)](_0x27aa9c(0x165)),tgBot[_0x27aa9c(0x22b)](settings[_0x27aa9c(0xe3)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x27aa9c(0x120),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x27aa9c(0x239)](_0x19124b=>{telegramError(_0x19124b);}),tgBot['on'](_0x27aa9c(0x165),async _0x31ba90=>{const _0xc1c580=_0x27aa9c,_0x37ed3d=_0x31ba90['data'],_0x390df2=_0x31ba90[_0xc1c580(0x1df)];tgBot[_0xc1c580(0x12a)](_0x31ba90['id'])[_0xc1c580(0x175)](async()=>{const _0x506355=_0xc1c580;if(_0x37ed3d!='no'){const _0x348ea3=0xf,_0x3fceb3='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x26ed9c=Array[_0x506355(0x10f)](crypto[_0x506355(0xf4)](new Uint32Array(_0x348ea3)))[_0x506355(0x131)](_0x48d781=>_0x3fceb3[_0x48d781%_0x3fceb3[_0x506355(0x18b)]])['join'](''),_0x35bb27=bcrypt['hashSync'](_0x26ed9c,saltRounds);storeSettings({'bbPassword':_0x35bb27}),await tgBot[_0x506355(0x22b)](_0x390df2[_0x506355(0x223)]['id'],_0x506355(0xe2)+_0x26ed9c,{'parse_mode':'HTML'})[_0x506355(0x239)](_0x139927=>{telegramError(_0x139927);});}else await tgBot['sendMessage'](_0x390df2['chat']['id'],_0x506355(0xe0))[_0x506355(0x239)](_0x5c4f80=>{telegramError(_0x5c4f80);});}),tgBot[_0xc1c580(0xd4)](_0xc1c580(0x165));}));}function getServerTime(){const _0x1fc38e=_0x2dc777,_0x5ca946=new Date();return _0x5ca946[_0x1fc38e(0x1dc)]()+'/'+(_0x5ca946['getMonth']()+0x1)[_0x1fc38e(0x139)]()['padStart'](0x2,'0')+'/'+_0x5ca946[_0x1fc38e(0x14e)]()[_0x1fc38e(0x139)]()[_0x1fc38e(0x162)](0x2,'0')+'\x20'+_0x5ca946[_0x1fc38e(0x181)]()[_0x1fc38e(0x139)]()['padStart'](0x2,'0')+':'+_0x5ca946[_0x1fc38e(0x13b)]()['toString']()[_0x1fc38e(0x162)](0x2,'0')+':'+_0x5ca946[_0x1fc38e(0xd5)]()[_0x1fc38e(0x139)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x152ada=_0x2dc777,_0x5aa1b5=shiftedTime();return _0x5aa1b5['getFullYear']()+'/'+(_0x5aa1b5['getMonth']()+0x1)[_0x152ada(0x139)]()['padStart'](0x2,'0')+'/'+_0x5aa1b5[_0x152ada(0x14e)]()[_0x152ada(0x139)]()[_0x152ada(0x162)](0x2,'0')+'\x20'+_0x5aa1b5[_0x152ada(0x181)]()[_0x152ada(0x139)]()['padStart'](0x2,'0')+':'+_0x5aa1b5['getMinutes']()[_0x152ada(0x139)]()[_0x152ada(0x162)](0x2,'0')+':'+_0x5aa1b5[_0x152ada(0xd5)]()[_0x152ada(0x139)]()[_0x152ada(0x162)](0x2,'0');}function shiftedTime(){const _0x132b03=_0x2dc777,_0x2d22d6=new Date();let _0x509fe=_0x2d22d6;if(settings[_0x132b03(0x10c)]&&settings[_0x132b03(0x10c)]!==0x0)_0x509fe=fns['add'](_0x2d22d6,{'hours':settings[_0x132b03(0x10c)]});return _0x509fe;}function startScheduler(){const _0x4bef99=_0x2dc777,_0x6a6fc9=new Date()[_0x4bef99(0x1c2)](),_0x14b468=new Date()[_0x4bef99(0x181)]()+settings[_0x4bef99(0x10c)];_0x14b468==0x4&&backupConfigFiles();_0x14b468==0x0&&rotateLogFiles();_0x6a6fc9%0x6==0x0&&triggerAnalytics();_0x6a6fc9%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x55b604=_0x2dc777;fs[_0x55b604(0x141)](configpath,{'withFileTypes':!![]})[_0x55b604(0x173)](_0x2f3984=>{const _0x5d06b3=_0x55b604;if(!_0x2f3984['isDirectory']())fs[_0x5d06b3(0xd2)](configpath+_0x2f3984[_0x5d06b3(0x229)],configbackuppath+_0x2f3984[_0x5d06b3(0x229)]);});}function rotateLogFiles(){const _0x4b773c=_0x2dc777;let _0x240dcd=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x240dcd[_0x4b773c(0x146)]((_0x54f172,_0x2fd068)=>_0x54f172[_0x4b773c(0x229)]<_0x2fd068['name']?0x1:_0x2fd068[_0x4b773c(0x229)]<_0x54f172[_0x4b773c(0x229)]?-0x1:0x0),_0x240dcd[_0x4b773c(0x173)](_0x1c5ebe=>{const _0x585fee=_0x4b773c;if(_0x1c5ebe[_0x585fee(0x229)]=='output-002.log')fs[_0x585fee(0xd2)](logspath+_0x1c5ebe['name'],logspath+_0x585fee(0x206));if(_0x1c5ebe[_0x585fee(0x229)]==_0x585fee(0x1a6))fs[_0x585fee(0xd2)](logspath+_0x1c5ebe[_0x585fee(0x229)],logspath+_0x585fee(0x196));_0x1c5ebe[_0x585fee(0x229)]==_0x585fee(0x1e3)&&(fs['copyFileSync'](logspath+_0x1c5ebe[_0x585fee(0x229)],logspath+_0x585fee(0x1a6)),fs[_0x585fee(0x102)](logspath+_0x1c5ebe[_0x585fee(0x229)],''));});}function zipFiles(_0x126d22){const _0x5d0628=_0x2dc777;let _0x2e60d8=fs[_0x5d0628(0x141)](_0x126d22,{'withFileTypes':!![]});_0x2e60d8[_0x5d0628(0x173)](_0x49cebf=>{const _0x4e36f5=_0x5d0628;if(!_0x49cebf[_0x4e36f5(0x104)]())zip['file'](_0x49cebf[_0x4e36f5(0x229)],fs[_0x4e36f5(0x1e8)](_0x126d22+_0x49cebf['name']));});const _0x48d998=zip[_0x5d0628(0x140)]({'base64':![],'compression':_0x5d0628(0x179)});fs[_0x5d0628(0x102)](_0x5d0628(0xd0),_0x48d998,_0x5d0628(0x1af));}async function getPublicIp(){const _0x4278e4=_0x2dc777;try{const _0x5608dc=await axios[_0x4278e4(0x1b9)](_0x4278e4(0x191));publicip=_0x5608dc[_0x4278e4(0xf1)]['ip'];}catch(_0x251018){}}async function triggerAnalytics(){const _0x3068fd=_0x2dc777;if(!publicip)await getPublicIp();const _0x21992f=getBotsWithMode();let _0x94301=0x0;_0x21992f['forEach'](_0x287e5f=>{const _0x34d867=_0x4934;if(_0x287e5f['status']===_0x34d867(0x18f))_0x94301++;}),mixpanel['track'](_0x3068fd(0x166),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x21992f['length'],'numbotsenabled':_0x94301});}async function getMessages(){const _0xd843fa=_0x2dc777,_0x5dbfb8=_0xd843fa(0xbf),_0x51ed97=new GraphQLClient(_0x5dbfb8),_0x47fa71={'authorization':_0xd843fa(0x1a8)},_0x36e602=serverversion[_0xd843fa(0x200)]('.'),_0x186d9a=_0x36e602[0x0]+'.'+_0x36e602[0x1],_0x2bb62b=Math[_0xd843fa(0x13a)](settings[_0xd843fa(0x195)],settings['lastmsgemitted']),_0x4f593a={'last':parseInt(_0x2bb62b),'bbm':_0x186d9a},_0x4395ea=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3f0f04;try{_0x3f0f04=await _0x51ed97['request'](_0x4395ea,_0x4f593a,_0x47fa71);}catch(_0x54b17c){}if(_0x3f0f04&&_0x3f0f04['messages']){let _0x991c35=settings[_0xd843fa(0x195)];newMessages=[];for(const _0x2804be of _0x3f0f04[_0xd843fa(0xf2)]){newMessages['push'](_0x2804be);if(_0x2804be[_0xd843fa(0xea)])updateSetting(_0xd843fa(0xf3),_0x2804be[_0xd843fa(0xea)]);let _0x345444=_0x2804be[_0xd843fa(0xea)]?serverversion>=_0x2804be[_0xd843fa(0xea)]:![];if(!_0x345444&&_0x2804be[_0xd843fa(0x153)]>_0x991c35){if(_0x2804be[_0xd843fa(0x240)]===_0xd843fa(0x17b)||serverversion[_0xd843fa(0xc2)](_0x2804be[_0xd843fa(0x240)])){let _0xbf33d6=''+_0x2804be['title']+'\x0a\x0a'+_0x2804be[_0xd843fa(0x1df)];const _0x1f068b=await sendTelegramMsg(toTelegramMarkdown(_0xbf33d6),'Markdown');if(_0x1f068b)_0x991c35=_0x2804be[_0xd843fa(0x153)];}}}updateAvailable=isNewerVersion(settings[_0xd843fa(0xf3)],serverversion),updateSetting('lastmsgtelegram',_0x991c35),emitMessages();}}function emitMessages(){const _0x1d39a4=_0x2dc777,_0x4d4e11=settings[_0x1d39a4(0x143)];let _0x5ec953=[];newMessages[_0x1d39a4(0x173)](_0x3c306a=>{const _0x39b806=_0x1d39a4;_0x3c306a[_0x39b806(0x153)]>_0x4d4e11&&_0x5ec953['push'](_0x3c306a);}),_0x5ec953[_0x1d39a4(0x18b)]>0x0&&getAllClients()[_0x1d39a4(0x173)](_0x1b6219=>{const _0x4b0cb0=_0x1d39a4;getSocket(_0x1b6219['id'])[_0x4b0cb0(0x15e)]('message',_0x5ec953);});}function confirmMessage(_0x369ab7){const _0x596747=_0x2dc777;updateSetting(_0x596747(0x143),Number(_0x369ab7));}function isNewerVersion(_0x2fb86f,_0xc4f940){const _0x101ad3=_0x2dc777,_0x49d503=_0xc4f940[_0x101ad3(0x200)]('.'),_0xaeed47=_0x2fb86f[_0x101ad3(0x200)]('.');for(var _0x48d56c=0x0;_0x48d56c<_0xaeed47[_0x101ad3(0x18b)];_0x48d56c++){const _0x2826ed=~~_0xaeed47[_0x48d56c],_0x4aefb6=~~_0x49d503[_0x48d56c];if(_0x2826ed>_0x4aefb6)return!![];if(_0x2826ed<_0x4aefb6)return![];}return![];}function toTelegramMarkdown(_0xe0f3cc){const _0x3ae615=_0x2dc777,_0x5b2c7a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x139416=/\*{2}(.+?)\*{2}/gim;return _0xe0f3cc=_0xe0f3cc[_0x3ae615(0xc8)](_0x5b2c7a,_0x3ae615(0x1be))[_0x3ae615(0xc8)](_0x139416,_0x3ae615(0x237)),_0xe0f3cc;}async function validateConfigFile(){const _0x3131b8=_0x2dc777,_0x17cf68=dbConfig[_0x3131b8(0x1b9)](_0x3131b8(0x113))[_0x3131b8(0x10b)](_0x3131b8(0xd8))[_0x3131b8(0x132)]()||[];if(_0x17cf68['length']==0x0){let _0x5cbab7=0x0,_0x18d837=[];const _0x294d52=/^bot-([0-9]{3})-config.json$/,_0x5731e1=fs[_0x3131b8(0x141)](configpath);_0x5731e1[_0x3131b8(0x173)](_0x581950=>{const _0x171c63=_0x3131b8,_0x1be24e=_0x294d52[_0x171c63(0xff)](_0x581950);if(_0x1be24e){const _0x5d9070=_0x1be24e[0x1];let _0x563c0c=getBotAttributes(_0x5d9070);_0x18d837[_0x171c63(0x216)]({'botID':_0x5d9070,'botname':_0x563c0c[_0x171c63(0x11c)],'status':_0x171c63(0x1cb),'live':_0x171c63(0x22c)}),_0x5cbab7++;}}),_0x5cbab7!=0x0&&(dbConfig[_0x3131b8(0x1b9)](_0x3131b8(0x113))[_0x3131b8(0x1d7)](_0x18d837)[_0x3131b8(0x17e)](),config=_0x18d837,restoredConfigFile=_0x5cbab7);}}async function restoreConfigNotify(_0x555df0){const _0x7c93cc=_0x2dc777;let _0xd90738;if(restoredConfigFile==0x1)_0xd90738=_0x7c93cc(0x119);else _0xd90738=_0x7c93cc(0x212);if(_0x555df0)io['to'](_0x7c93cc(0x16d))[_0x7c93cc(0x15e)](_0x7c93cc(0x1f2),_0xd90738);else{logger['simple'](_0x7c93cc(0x158)),logger[_0x7c93cc(0x145)](_0xd90738),logger[_0x7c93cc(0x145)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings[_0x7c93cc(0x1ce)]!=_0x7c93cc(0xcd))tgBot[_0x7c93cc(0x22b)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0xd90738)[_0x7c93cc(0x239)](_0x3dfce6=>{telegramError(_0x3dfce6);});}}function validateCredentials(_0x2f5652,_0x24f451){const _0x213a7e=_0x2dc777;if(_0x2f5652[_0x213a7e(0xba)]==settings[_0x213a7e(0x118)]&&bcrypt['compareSync'](_0x2f5652[_0x213a7e(0x1d9)],settings['bbPassword'])){if(settings[_0x213a7e(0x130)])return{'allow':![],'reason':_0x213a7e(0x1f3),'token':null};else{const _0x259c04=generateLoginToken(_0x24f451);return{'allow':!![],'reason':_0x213a7e(0x1d1),'token':_0x259c04};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x4029ee){const _0x25d28f=generateLoginToken(_0x4029ee);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x25d28f};}function _0x1bf2(){const _0x4559c0=['<b>Telegram\x20Bot\x20Status:</b>\x0a','6b67f3d61ee94b8f5c80b4affef4c4d9','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','restarting\x20Bot\x20','uuid-random','/:bot/configuration','push','existsSync','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Crypt','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','sockets','-performance.json','headers','mixpanel','new','error','bot','Notifications\x20disabled','chat','update-bot','hybrid-crypto-js','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','remoteAddress','436OjBISl','name','settings.','sendMessage','stopped','reload','30\x20min','removeAllListeners','2FA\x20login\x20rejected','login\x20token\x20valid','0.0.0','restart','reset-password','/enable\x20-\x20enable\x20notifications\x0a','telegramIpApproval','*$1*','event','catch','starting\x20bot\x20|\x20Bot\x20','11434SaoEYd','Unauthorized\x20attempt\x20to\x20store\x20configuration','telegram2FaApproval','util','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bbvReceive','Unauthorized\x20attempt\x20to\x20update\x20bot','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','hashSync','kind','Ok,\x20will\x20send\x20order\x20notifications\x20only','/names\x20-\x20show\x20bot\x20names\x0a','search','toggle-bot-mode','inherit','login\x20required','jsonwebtoken','username','ipv6','1647117ZWSqGQ','/update\x20-\x20update\x20Balance\x20Bot\x0a','Starting\x20Balance\x20Bot\x20update','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','match','place-order','startsWith','keys','join','-config.json','11yXWQoD','delete-bot','replace',',\x20must\x20be\x20a\x204\x20digit\x20number','temporary\x20token\x20generated','bb/','telegram','orders','apply','access\x20timeout','test.zip','manual','copyFileSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','removeListener','getSeconds','privateKey','logs/','botID','storeHeadless','Login\x20accepted','storeConfiguration','ipc','temporary\x20access\x20timeout','6Sjrpue','mode','Password\x20reset\x20rejected','show','Password\x20has\x20been\x20reset\x20to:\x20','telegramChatId','1000','includes','stringify','961320PJonsn','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','status','bbvNew','/:bot/portfolio','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','yes','send',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','get-portfolio','data','messages','latestversion','randomFillSync','Unauthorized\x20attempt\x20to\x20delete\x20bot','Notifications\x20enabled','Bot\x20','whitelist','update-bb','listen','Error:\x20Invalid\x20argument\x20','init','-results.json','hasOwnProperty','exec','starting\x20new\x20bot\x20|\x20Bot\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','writeFileSync','live','isDirectory','Unauthorized\x20attempt\x20to\x20log\x20out','telegramToken','confirm-message','/output-000.log','date-fns','running','sortBy','timeshift','3000','accept','from','unlinkSync','cancel-loading','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bots','all','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','login','/restart\x20-\x20restart\x20bot(s)\x0a','bbUsername','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','toIPv4MappedAddress','blacklist','botname','toggleBotMode','temporaryAccessAllowed','success','HTML','graphql-request','publicKey','deleted\x20Bot\x20','onText','store-configuration','::ffff:127.0.0.1','getTime','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/on\x20-\x20start\x20bot(s)\x0a','answerCallbackQuery','bbPassword','build2','Unauthorized\x20login\x20attempt\x20(timeout)','sendFile','Orders','f2aRequired','map','value','kill','get-logs','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Yes','You\x20can\x20use\x20the\x20following\x20commands:\x0a','toString','min','getMinutes','logged\x20out','function','2FA\x20login\x20token\x20generated','initclient','generate','readdirSync','/:bot','lastmsgemitted','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','simple','sort','headless','alerts','1329vzVisO','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','node-telegram-bot-api','token','new-disabled','getDate','lowdb/adapters/FileSync','order','uncaughtException','cancelLoading','number','host',':\x20Bot\x20Mgr\x20>\x20','stopPolling','config/','-----------------------------------------------------------------------------------','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','exit','log','user','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','emit','26zcfmYJ','format','Unauthorized\x20attempt\x20to\x20confirm\x20message','padStart','max','stop','callback_query','Server','Temporary\x20access\x20rejected','store-headless','logout','No\x20bots\x20running\x20right\x20now','/:bot/support','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','botmanager','Allow\x20login\x20from\x20IP\x20address\x20<b>','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','bb-config.json','temporary\x20access\x20rejected','entries','forEach','1502065BjEZYi','then','sendPortfolioTelegram','invalid\x20credentials','mkdirSync','DEFLATE','randomBytes','any','reject','bb-secure.json','write','NTBA_FIX_319','::1','getHours','Invalid\x20username\x20or\x20IP\x20address','Token\x20blacklisted','index.html','\x20|\x20','<b>Balance\x20Bot\x20Status:</b>\x0a','2FA\x20required','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','SIGINT','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','length','filter','remove','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','enabled','temporary\x20access\x20not\x20allowed','https://api.ipify.org?format=json','127.0.0.1','Invalid\x20IP\x20address','Invalid\x20Telegram\x20token','lastmsgtelegram','output-002.log','telegramUsername','-events.json','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','5\x20min','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/help\x20-\x20show\x20available\x20commands\x0a','************','SIGTERM','apiKey','loginRequired','bb-settings.json','exp','Unauthorized\x20attempt\x20to\x20get\x20logs','clientip','port','output-001.log','once','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','cloneDeep','whitelistEnabled','sign','connection','delete-alerts','</b>\x20?','binary','clients','add-bot','bot-','Unauthorized\x20attempt\x20to\x20get\x20messages','verify','\x20to\x20','handshake','RSA-OAEP','enabled\x20Bot\x20','get','pidExpireLogin','/off\x20-\x20stop\x20bot(s)\x0a','http','All','$1_$2_$3','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','timestamp','polling_error','getUTCHours','express','decrypt','All\x20bots','env','use','encryptedUuid','Alerts','\x20minutes','disabled','expiry','error\x20while\x20deleting\x20config\x20files:\x20','telegramEvents','socket.io','getStartingBalances','login\x20token\x20generated','secure','child_process','User\x20has\x20been\x20validated','10423390TTGWZt','fork','assign','516736wCCodE','password','static','allow','getFullYear','args','secret','message','emitHistory','bot.js','deleteHistoryAlerts','output-000.log','disconnect','settings','28wHfdSa','updatebotmanager','readFileSync','login\x20not\x20required','type','full','build','api-eu.mixpanel.com','RSA','set','pidRefreshToken','node-zip','notification','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20update\x20settings','Ok,\x20will\x20send\x20alert\x20notifications\x20only','argv','store-settings','reason','Notifications\x20types:\x20','/:bot/performance','\x20>\x20','userid','access','disabled\x20Bot\x20','getPortfolio','split','yargs/yargs','placeOrder','alias','hex','179rEHyKh','output-003.log','(((.+)+)+)+$','parse','find','defaults','createWriteStream','uuid','server','telegramEnabled','auto'];_0x1bf2=function(){return _0x4559c0;};return _0x1bf2();}function validateAccess(_0x431c9c,_0x2625bf){const _0x389748=_0x2dc777;let _0x101c35=devices[_0x2625bf]['ip'],_0x25c850;const _0x5c3d20=_0x2f28e1=>{const _0x12b918=_0x4934;if(settings[_0x12b918(0x1a0)]){if(settings[_0x12b918(0x130)]){if(telegram2FaApproved(_0x2625bf)){const _0x1ad806=generateLoginToken(_0x2625bf);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x1ad806};}else return{'allow':![],'reason':_0x12b918(0xb8),'token':null};}else return _0x25c850=validToken(_0x2f28e1,_0x2625bf),_0x25c850['hasOwnProperty']('success')?{'allow':!![],'reason':_0x12b918(0x231),'token':_0x2f28e1}:{'allow':![],'reason':_0x12b918(0xb8),'token':null};}else return{'allow':!![],'reason':_0x12b918(0x1e9),'token':null};};if(settings[_0x389748(0x1aa)]){let _0x2433ad=[...settings[_0x389748(0xf8)],_0x389748(0x180),_0x389748(0x126),_0x389748(0x192)];if(_0x2433ad[_0x389748(0xe5)](_0x101c35))return _0x5c3d20(_0x431c9c);else{_0x25c850=validToken(_0x431c9c,_0x2625bf);if(_0x25c850[_0x389748(0xfe)](_0x389748(0x11f)))return _0x5c3d20(_0x431c9c);else{if(telegramIpApproved(_0x2625bf)){const _0x5950c5=generateToken(_0x2625bf);return _0x25c850=_0x5c3d20(_0x431c9c),_0x25c850[_0x389748(0x1db)]?{'allow':!![],'reason':_0x389748(0xca),'token':_0x5950c5}:_0x25c850;}else return settings[_0x389748(0x11e)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x389748(0x190),'token':null};}}}else return _0x5c3d20(_0x431c9c);}function timelyDecrypt(_0x2e50c9,_0x1ce489=!![]){const _0x3451ec=_0x2dc777;if(_0x2e50c9)try{const _0xc7cfa0=crypt['decrypt'](secure['privateKey'],_0x2e50c9)[_0x3451ec(0x1df)],_0x32bf98=_0xc7cfa0[_0x3451ec(0x200)]('@')[0x0],_0x5d2372=_0xc7cfa0[_0x3451ec(0x200)]('@')[0x1],_0x441c40=new Date()[_0x3451ec(0x127)]();if(_0x1ce489){if(_0x441c40-_0x5d2372<maxSecretAge*0x3e8)return _0x32bf98;else return![];}else return _0x32bf98;}catch(_0x292443){return![];}else return![];}const validToken=(_0x482738,_0x2b2eb8)=>{const _0x4b1ac9=_0x2dc777,_0x525b0b=devices[_0x2b2eb8]['ip'];if(!_0x482738)return{'error':'No\x20authentication\x20token'};for(let _0x49b6e9 of blacklist){if(_0x49b6e9['token']==_0x482738)return{'error':_0x4b1ac9(0x183)};}let _0x45150b;try{_0x45150b=jwt[_0x4b1ac9(0x1b4)](_0x482738,secure[_0x4b1ac9(0x1de)]+_0x2b2eb8);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x45150b['hasOwnProperty'](_0x4b1ac9(0x1a4))&&!_0x45150b['hasOwnProperty']('username')||!_0x45150b[_0x4b1ac9(0xfe)](_0x4b1ac9(0x1a2)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x45150b['hasOwnProperty'](_0x4b1ac9(0xba))&&_0x45150b[_0x4b1ac9(0xfe)](_0x4b1ac9(0x1a4))){const {clientip:_0x1dfa29}=_0x45150b;return _0x525b0b==_0x1dfa29?{'success':_0x4b1ac9(0x1d4)}:{'error':_0x4b1ac9(0x193)};}else{if(_0x45150b[_0x4b1ac9(0xfe)](_0x4b1ac9(0xba))&&_0x45150b[_0x4b1ac9(0xfe)]('clientip')){const {username:_0x4bef39,clientip:_0x4e8271}=_0x45150b;return settings[_0x4b1ac9(0x118)]==_0x4bef39&&_0x525b0b==_0x4e8271?{'success':_0x4b1ac9(0x1d4)}:{'error':_0x4b1ac9(0x182)};}}},generateLoginToken=_0x5023e6=>{const _0x590b6b=_0x2dc777;if(_0x5023e6){const _0x4e8c7d=devices[_0x5023e6]['ip'];return jwt[_0x590b6b(0x1ab)]({'username':settings[_0x590b6b(0x118)],'clientip':_0x4e8c7d},secure['secret']+_0x5023e6,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x15f963=>{const _0x2ed495=_0x2dc777;if(_0x15f963){const _0x1aa928=devices[_0x15f963]['ip'];return jwt[_0x2ed495(0x1ab)]({'clientip':_0x1aa928},secure[_0x2ed495(0x1de)]+_0x15f963,{'expiresIn':devices[_0x15f963][_0x2ed495(0x236)][_0x2ed495(0x1cc)]*0x3c});}else return![];},telegramIpApproved=_0x264a22=>{const _0x1ab9e1=_0x2dc777;let _0x99e002=![];return devices[_0x264a22]['telegramIpApproval']&&devices[_0x264a22]['telegramIpApproval'][_0x1ab9e1(0x1cc)]!=_0x1ab9e1(0x17c)&&(_0x99e002=devices[_0x264a22]['telegramIpApproval']['clientip']==devices[_0x264a22]['ip']&&new Date()['getTime']()-devices[_0x264a22][_0x1ab9e1(0x236)][_0x1ab9e1(0x1c0)]<devices[_0x264a22]['telegramIpApproval'][_0x1ab9e1(0x1cc)]*0x3c*0x3e8),_0x99e002;},telegram2FaApproved=_0x5e6776=>{const _0x4fec8f=_0x2dc777;let _0x1c83ca=![];return devices[_0x5e6776][_0x4fec8f(0x23d)]&&devices[_0x5e6776]['telegram2FaApproval'][_0x4fec8f(0x1cc)]!=_0x4fec8f(0x17c)&&(_0x1c83ca=devices[_0x5e6776][_0x4fec8f(0x23d)][_0x4fec8f(0x1a4)]==devices[_0x5e6776]['ip']&&new Date()[_0x4fec8f(0x127)]()-devices[_0x5e6776][_0x4fec8f(0x23d)]['timestamp']<devices[_0x5e6776][_0x4fec8f(0x23d)]['expiry']*0x3c*0x3e8),_0x1c83ca;},normalizeIP=_0x1f97e8=>{const _0xa2aedd=_0x2dc777;let _0x1a4496=null,_0x4f8249=null;if(ipaddr['isValid'](_0x1f97e8)){const _0x4c4876=ipaddr[_0xa2aedd(0x208)](_0x1f97e8);_0x4c4876[_0xa2aedd(0x244)]()===_0xa2aedd(0xbb)?(_0x4c4876['isIPv4MappedAddress']()&&(_0x1a4496=_0x4c4876['toIPv4Address']()[_0xa2aedd(0x139)]()),_0x4f8249=_0x4c4876[_0xa2aedd(0x139)]()):(_0x1a4496=_0x4c4876['toString'](),_0x4f8249=_0x4c4876[_0xa2aedd(0x11a)]()[_0xa2aedd(0x139)]());}return{'show':_0x1a4496?_0x1a4496:_0x4f8249,'store':_0x4f8249};};function sleep(_0x1044ab){return new Promise(_0x2d936d=>setTimeout(_0x2d936d,_0x1044ab));}