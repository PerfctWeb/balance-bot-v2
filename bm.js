const _0x446078=_0xc48b;(function(_0x1fee89,_0x4a2a2d){const _0x5840d2=_0xc48b,_0x2d97e4=_0x1fee89();while(!![]){try{const _0x5a9f49=-parseInt(_0x5840d2(0x1d6))/0x1+-parseInt(_0x5840d2(0x250))/0x2+-parseInt(_0x5840d2(0x1b9))/0x3+parseInt(_0x5840d2(0x208))/0x4*(parseInt(_0x5840d2(0x11c))/0x5)+parseInt(_0x5840d2(0x22e))/0x6+parseInt(_0x5840d2(0x159))/0x7*(-parseInt(_0x5840d2(0x272))/0x8)+parseInt(_0x5840d2(0x1bb))/0x9*(parseInt(_0x5840d2(0x108))/0xa);if(_0x5a9f49===_0x4a2a2d)break;else _0x2d97e4['push'](_0x2d97e4['shift']());}catch(_0x25e165){_0x2d97e4['push'](_0x2d97e4['shift']());}}}(_0x1946,0x7cfaa));const _0x37df55=function(){let _0xd9fb0=!![];return function(_0x5bc6b2,_0x2ae1d4){const _0x358edb=_0xd9fb0?function(){if(_0x2ae1d4){const _0x52a80d=_0x2ae1d4['apply'](_0x5bc6b2,arguments);return _0x2ae1d4=null,_0x52a80d;}}:function(){};return _0xd9fb0=![],_0x358edb;};}(),_0x1c34d0=_0x37df55(this,function(){const _0x1b14cc=_0xc48b;return _0x1c34d0[_0x1b14cc(0x17e)]()[_0x1b14cc(0x1a5)](_0x1b14cc(0xcd))[_0x1b14cc(0x17e)]()['constructor'](_0x1c34d0)[_0x1b14cc(0x1a5)](_0x1b14cc(0xcd));});_0x1c34d0();'use strict';process['env'][_0x446078(0x209)]=0x1;const childProcess=require(_0x446078(0xe4)),fs=require('fs'),fns=require('date-fns'),low=require(_0x446078(0x25b)),FileSync=require(_0x446078(0x213)),path=require(_0x446078(0x155)),crypto=require(_0x446078(0x241)),Crypt=require(_0x446078(0x1df))[_0x446078(0x14e)],RSA=require(_0x446078(0x1df))[_0x446078(0x1a0)],bcrypt=require(_0x446078(0x1d9)),jwt=require('jsonwebtoken'),ipaddr=require(_0x446078(0x215)),argv=require(_0x446078(0x230))(process[_0x446078(0x220)][_0x446078(0x1a3)](0x2))[_0x446078(0x220)],uuidRandom=require(_0x446078(0x10a)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x446078(0x1f3)),axios=require(_0x446078(0x1a8)),{GraphQLClient,gql}=require(_0x446078(0x27b)),util=require(_0x446078(0x211)),fileUpload=require(_0x446078(0x1cc)),{networkInterfaces}=require('os'),PORT=argv[_0x446078(0x133)]||_0x446078(0x267),pattern=/^[0-9]{2,4}$/;!pattern[_0x446078(0x187)](PORT)&&(console['log'](_0x446078(0x1e2)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x446078(0x15d)](0x1));const HOST=argv[_0x446078(0xba)]||null,userID=argv[_0x446078(0x210)]||'',debugging=argv['d']||![],nodeversion=process['versions']['node'],environment=require(_0x446078(0x12a))[_0x446078(0x1d1)]||_0x446078(0x121);let bbpath='bb/',bbpath2='';const botfile=_0x446078(0xc3),configfile=_0x446078(0x19c),settingsfile=_0x446078(0x252),securefile='bb-secure.json',maxBackups=0xa;let validInstallation=!![];!fs[_0x446078(0xd0)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x446078(0x25e)),configpath=userID?bbpath+_0x446078(0x100)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x446078(0xe3)+userID+'/':bbpath+_0x446078(0xe3),zippath=userID?bbpath+_0x446078(0x281)+userID+'/':bbpath+_0x446078(0x281),loggerfile=fs[_0x446078(0x144)](logspath+_0x446078(0xb7),{'flags':'a'}),temppath=userID?bbpath+_0x446078(0x236)+userID+'/':bbpath+_0x446078(0x236);!fs[_0x446078(0xd0)](configpath)&&fs[_0x446078(0x22f)](configpath);!fs[_0x446078(0xd0)](configbackuppath)&&fs[_0x446078(0x22f)](configbackuppath);!fs[_0x446078(0xd0)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x446078(0xd0)](zippath)&&fs[_0x446078(0x22f)](zippath);!fs[_0x446078(0xd0)](temppath)&&fs[_0x446078(0x22f)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x446078(0x12f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x446078(0x12f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x446078(0x12f)]();let crypt=new Crypt({'md':_0x446078(0x1ec),'rsaStandard':_0x446078(0x130)});const saltRounds=0xa,mixpanel=Mixpanel[_0x446078(0x19e)](_0x446078(0x1ee),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x446078(0x154)]&&settings[_0x446078(0x154)]!=''&&settings[_0x446078(0x1e9)]&&settings[_0x446078(0x1e9)]!='')initTelegram();const parseColor=(_0x4bda9a,_0x54625f)=>{const _0xac3a18=_0x446078,_0x28b0f0=/#[A-Z]{3}#/g;if(typeof _0x4bda9a==_0xac3a18(0xa8)){!_0x54625f?_0x4bda9a=_0x4bda9a[_0xac3a18(0x19b)](_0x28b0f0,''):(_0x4bda9a=_0x4bda9a['replace'](/#BLU#/g,_0xac3a18(0x270)),_0x4bda9a=_0x4bda9a[_0xac3a18(0x19b)](/#RED#/g,_0xac3a18(0x286)),_0x4bda9a=_0x4bda9a[_0xac3a18(0x19b)](/#YEL#/g,_0xac3a18(0xd6)),_0x4bda9a=_0x4bda9a['replace'](/#MAG#/g,_0xac3a18(0x114)),_0x4bda9a=_0x4bda9a[_0xac3a18(0x19b)](/#CYA#/g,_0xac3a18(0xd7)),_0x4bda9a=_0x4bda9a[_0xac3a18(0x19b)](/#RES#/g,_0xac3a18(0x142)));;}return _0x4bda9a;},logger={'screen':_0x2dc944=>{const _0x2f3cf4=_0x446078;console[_0x2f3cf4(0x107)](parseColor(_0x2dc944,!![]));},'simple':_0x43fdbd=>{const _0x197404=_0x446078;console[_0x197404(0x107)](parseColor(_0x43fdbd,!![])),loggerfile[_0x197404(0x12f)](util[_0x197404(0x21f)](parseColor(_0x43fdbd,![]))+'\x0a');},'full':async _0x4040e0=>{const _0x4ee916=_0x446078,_0x17d2a2=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4040e0;console['log'](parseColor(_0x17d2a2,!![])),loggerfile[_0x4ee916(0x12f)](util[_0x4ee916(0x21f)](parseColor(_0x17d2a2,![]))+'\x0a');if(tgBot&&settings[_0x4ee916(0x285)]&&settings['telegramEvents']!=_0x4ee916(0x1ce))await tgBot[_0x4ee916(0x120)](settings[_0x4ee916(0x285)],_0x4ee916(0x24c)+parseColor(_0x4040e0,![]))[_0x4ee916(0xa5)](_0x160734=>{telegramError(_0x160734);});},'debug':async(_0x12cf16,_0x52b205='')=>{const _0x19664a=_0x446078,_0x445088=getTimeStamp()+_0x19664a(0x25d)+_0x12cf16;if(debugging)console['log'](parseColor(_0x445088,!![]));loggerfile[_0x19664a(0x12f)](util[_0x19664a(0x21f)](parseColor(_0x445088,![]))+'\x0a');if(_0x52b205){if(debugging)console[_0x19664a(0x107)](_0x52b205);loggerfile[_0x19664a(0x12f)](util[_0x19664a(0x21f)](_0x52b205)+'\x0a');}}};process['on'](_0x446078(0x17d),function(_0x23bcd8){const _0x1e890f=_0x446078;logger[_0x1e890f(0x112)](_0x23bcd8);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x446078(0x1e5))[_0x446078(0x1a1)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x446078(0x13e)),app=express(),http=require('http')[_0x446078(0xb2)](app);app[_0x446078(0x168)](fileUpload({'useTempFiles':!![]})),app['get'](_0x446078(0xe2),async(_0xe8ef8e,_0x2aa079)=>{const _0x285592=_0x446078,_0x213189=_0xe8ef8e[_0x285592(0x20f)]['type'],_0x5a8fb2=getClientsWithBotID('botmanager'),_0x316889=_0xe8ef8e[_0x285592(0x279)][_0x285592(0x13c)],_0xbb6866=timelyDecrypt(_0x316889,![]),_0xf9d34=_0x5a8fb2[_0x285592(0x280)](_0x7f6cdf=>_0x7f6cdf[_0x285592(0x13c)]==_0xbb6866);if(_0xf9d34){const _0x243ef7=normalizeIP(_0xe8ef8e['socket'][_0x285592(0x14a)])[_0x285592(0x246)],_0x595379=_0xe8ef8e[_0x285592(0x279)]['tkn'];if(validateAccess(_0x595379,_0xbb6866,_0x243ef7)[_0x285592(0x243)])_0x213189==_0x285592(0x21c)&&await backupConfigFiles(),await zipFiles(_0x213189),_0x2aa079['download'](zippath+(_0x213189+_0x285592(0x103)),_0xfd1de9=>{const _0x351aad=_0x285592;_0xfd1de9&&(logger[_0x351aad(0x109)]('Failed\x20to\x20download\x20'+_0x213189),logger[_0x351aad(0x112)](_0xfd1de9));});else logger[_0x285592(0x109)](_0x285592(0x1c8)+_0x213189+'\x20(1)');}else logger[_0x285592(0x109)](_0x285592(0x1c8)+_0x213189+_0x285592(0xb8));}),app[_0x446078(0x22c)]('/upload-backup',async(_0x1e9a24,_0x3253d8)=>{const _0x3b6001=_0x446078,_0x13cd29=getClientsWithBotID(_0x3b6001(0xf4)),_0xd5cbb7=_0x1e9a24['headers'][_0x3b6001(0x13c)],_0xadfa3=timelyDecrypt(_0xd5cbb7,![]),_0x445022=_0x13cd29['find'](_0x1dc78b=>_0x1dc78b['uuid']==_0xadfa3);logger[_0x3b6001(0x26c)]('Backup\x20file\x20uploaded');if(_0x445022){const _0xc31b47=normalizeIP(_0x1e9a24['socket'][_0x3b6001(0x14a)])['store'],_0x2fc3be=_0x1e9a24['headers'][_0x3b6001(0x1e4)];if(validateAccess(_0x2fc3be,_0xadfa3,_0xc31b47)[_0x3b6001(0x243)]){if(_0x1e9a24[_0x3b6001(0x198)]){const _0x5c8613=_0x1e9a24[_0x3b6001(0x198)][_0x3b6001(0xca)];await _0x5c8613['mv'](temppath+_0x5c8613['name']),_0x3253d8[_0x3b6001(0xa6)]({'status':!![],'message':_0x3b6001(0xc5)});const _0x4274fc=getBotsWithMode();_0x4274fc[_0x3b6001(0x1ae)]>0x0?confirmRestore(temppath,_0x5c8613[_0x3b6001(0x21b)]):unzipFile(temppath,_0x5c8613[_0x3b6001(0x21b)]);}}else logger['full'](_0x3b6001(0xf6));}else logger[_0x3b6001(0x109)](_0x3b6001(0x1f1));}),app[_0x446078(0x168)](express[_0x446078(0x1d0)](path[_0x446078(0xc0)](__dirname,bbpath2,_0x446078(0x233)))),app['use'](express[_0x446078(0x1d0)](path['join'](__dirname,bbpath2,_0x446078(0xb0)))),app[_0x446078(0x21a)]('/',function(_0x500453,_0x3c16d0){const _0x1164f4=_0x446078;_0x3c16d0[_0x1164f4(0xf2)](path['join'](__dirname,bbpath2,_0x1164f4(0x233),_0x1164f4(0xb1)));}),app['get'](_0x446078(0xdb),function(_0x52e7bc,_0x1c8b97){const _0xfc9341=_0x446078;_0x1c8b97[_0xfc9341(0xf2)](path['join'](__dirname,bbpath2,_0xfc9341(0xb0),_0xfc9341(0xb1)));}),app[_0x446078(0x21a)](_0x446078(0x249),(_0x13e6e0,_0x53c560)=>{const _0x41c49a=_0x446078;_0x53c560[_0x41c49a(0xf2)](path[_0x41c49a(0xc0)](__dirname,bbpath2,_0x41c49a(0xb0),_0x41c49a(0xb1)));}),app[_0x446078(0x21a)]('/:bot/performance',(_0x1e7357,_0xdf9391)=>{const _0x5d8090=_0x446078;_0xdf9391[_0x5d8090(0xf2)](path[_0x5d8090(0xc0)](__dirname,bbpath2,'build',_0x5d8090(0xb1)));}),app[_0x446078(0x21a)](_0x446078(0x25a),(_0x36a210,_0x49ebe8)=>{const _0x251a37=_0x446078;_0x49ebe8[_0x251a37(0xf2)](path[_0x251a37(0xc0)](__dirname,bbpath2,_0x251a37(0xb0),'index.html'));}),app[_0x446078(0x21a)](_0x446078(0x1c6),(_0x5305f3,_0x1f2296)=>{const _0x18cc02=_0x446078;_0x1f2296[_0x18cc02(0xf2)](path[_0x18cc02(0xc0)](__dirname,bbpath2,_0x18cc02(0xb0),'index.html'));}),app[_0x446078(0x21a)](_0x446078(0x11e),(_0x296418,_0x265ff3)=>{const _0x46e68d=_0x446078;_0x265ff3['sendFile'](path[_0x46e68d(0xc0)](__dirname,bbpath2,_0x46e68d(0xb0),_0x46e68d(0xb1)));}),app['get']('/:bot/support',(_0x58590e,_0x2cc217)=>{const _0x13cd55=_0x446078;_0x2cc217[_0x13cd55(0xf2)](path[_0x13cd55(0xc0)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x446078(0x245)](PORT,HOST);else http[_0x446078(0x245)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x250621=_0x446078;let _0xc3a22e='[ip-address]';const _0x55d3d2=networkInterfaces(),_0xc6d01={};for(const _0x28ce63 of Object[_0x250621(0x265)](_0x55d3d2)){for(const _0x43c499 of _0x55d3d2[_0x28ce63]){if((_0x43c499[_0x250621(0x1b5)]=='IPv4'||_0x43c499[_0x250621(0x1b5)]==0x4)&&!_0x43c499[_0x250621(0xd1)]){const _0x2c24f3=ipaddr['parse'](_0x43c499['address'])[_0x250621(0x149)]();_0x2c24f3!=_0x250621(0x17b)&&(!_0xc6d01[_0x28ce63]&&(_0xc6d01[_0x28ce63]=[]),_0xc6d01[_0x28ce63][_0x250621(0x140)](_0x43c499[_0x250621(0xbe)]),_0xc3a22e=_0x43c499[_0x250621(0xbe)]);}}}return{'serverip':_0xc3a22e,'netinterfaces':_0xc6d01};}async function startServer(){const _0x4770db=_0x446078,{serverip:_0x12d537,netinterfaces:_0x3f6e31}=getServerIP();logger['simple'](''),logger[_0x4770db(0x112)](_0x4770db(0x1ea)),await logger[_0x4770db(0x109)](_0x4770db(0x259)+serverversion+'#RES#\x20'+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x4770db(0xbb)+PORT+_0x4770db(0x19d))+(_0x4770db(0x1f4)+_0x12d537+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x4770db(0x112)](_0x4770db(0x1ea));if(config[_0x4770db(0x1ae)]!=0x0)for(const _0x22d37f of config){if(_0x22d37f[_0x4770db(0x1d4)]==_0x4770db(0x283)||_0x22d37f[_0x4770db(0x1d4)]==_0x4770db(0x26f))await logger[_0x4770db(0x109)](_0x4770db(0xd4)+_0x22d37f[_0x4770db(0x27a)]+'\x20|\x20'+_0x22d37f[_0x4770db(0x1e8)]),startBot([_0x22d37f[_0x4770db(0x27a)],userID],{'cwd':bbpath},function(_0x22dfdd){const _0x2dd247=_0x4770db;if(_0x22dfdd)logger[_0x2dd247(0x109)](_0x22dfdd);});else(_0x22d37f[_0x4770db(0x1d4)]==_0x4770db(0x278)||_0x22d37f[_0x4770db(0x1d4)]==_0x4770db(0xf0))&&await logger[_0x4770db(0x109)](_0x4770db(0x177)+_0x22d37f['botID']+_0x4770db(0x1f6)+_0x22d37f[_0x4770db(0x1e8)]);}else!newBot&&logger['simple'](_0x4770db(0x11d));if(newBot)addBot();logger[_0x4770db(0x112)](_0x4770db(0x1ea)),logger[_0x4770db(0x112)](''),await logger[_0x4770db(0x26c)](_0x4770db(0x1fb)+nodeversion),await logger[_0x4770db(0x26c)]('Network\x20Interfaces:',_0x3f6e31);}function startSocket(){io['on']('connection',_0x12740a=>{const _0x41ed6c=_0xc48b;let _0x1a9433,_0x44ac34,_0x19c72b,_0x112313,_0x5e22b5;const _0x27c9ba=_0x12740a['handshake'][_0x41ed6c(0x279)][_0x41ed6c(0x10e)];_0x44ac34=_0x27c9ba[_0x41ed6c(0x102)](/bot[0-9]{3}/);if(_0x44ac34)_0x19c72b=_0x44ac34[0x0][_0x41ed6c(0x102)](/[0-9]{3}/);if(_0x19c72b)_0x1a9433=_0x19c72b[0x0];else _0x1a9433='botmanager';const _0xc7d5fc=_0x12740a[_0x41ed6c(0x201)]['auth']['encryptedUuid'];if(!_0xc7d5fc)_0x12740a[_0x41ed6c(0x173)](_0x41ed6c(0x1d4),{'publicKey':secure[_0x41ed6c(0x195)]});else{_0x112313=timelyDecrypt(_0xc7d5fc,![]);if(!_0x112313)_0x12740a[_0x41ed6c(0x173)](_0x41ed6c(0x1d4),{'publicKey':secure[_0x41ed6c(0x195)]});else{_0x5e22b5=normalizeIP(_0x12740a[_0x41ed6c(0x143)][_0x41ed6c(0x14a)])[_0x41ed6c(0x246)];if(!devices[_0x112313])devices[_0x112313]={'uuid':_0x112313,'access':{'token':null}};devices[_0x112313]['ip']=_0x5e22b5;const _0x5a48ea=addClient(_0x12740a['id'],_0x112313,_0x1a9433);setAccess(_0x5a48ea),emitMessages(),_0x12740a['on']('login',_0xd9fa20=>{const _0x961517=_0x41ed6c,_0x21e076=timelyDecrypt(_0xd9fa20[_0x961517(0xd8)]);if(_0x21e076){_0xd9fa20={'username':_0xd9fa20[_0x961517(0x1c7)],'password':_0x21e076},devices[_0x112313]['access']=validateCredentials(_0xd9fa20,_0x112313);if(devices[_0x112313][_0x961517(0x18b)][_0x961517(0x243)]==![]&&devices[_0x112313][_0x961517(0x18b)]['reason']==_0x961517(0x206))_0x12740a[_0x961517(0x173)](_0x961517(0x1d4),{'access':devices[_0x112313][_0x961517(0x18b)]}),loginAccess2FA(_0x112313,_0x5e22b5);else{if(devices[_0x112313]['access'][_0x961517(0x243)]==![]&&devices[_0x112313][_0x961517(0x18b)]['reason']==_0x961517(0x221))_0x12740a[_0x961517(0x173)](_0x961517(0x1d4),{'access':devices[_0x112313][_0x961517(0x18b)]});else devices[_0x112313][_0x961517(0x18b)][_0x961517(0x243)]&&devices[_0x112313][_0x961517(0x18b)][_0x961517(0x1c2)]==_0x961517(0x1b2)&&(getClientsWithUuid(_0x112313)[_0x961517(0x26e)](_0x227c15=>{setAccess(_0x227c15);}),logger[_0x961517(0x26c)](_0x961517(0x176)+_0x112313['slice'](-0x8)),setTokenRefresh(_0x112313),setSessionTimeout(_0x961517(0x1aa),_0x112313));}}else logger[_0x961517(0x109)](_0x961517(0x24a));}),_0x12740a['on'](_0x41ed6c(0xab),()=>{resetPassword();}),_0x12740a['on'](_0x41ed6c(0x19a),_0x35b73d=>{removeClient(_0x12740a['id']);}),_0x1a9433==_0x41ed6c(0xf4)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2b8eee){const _0x49754d=_0x446078;if(_0x2b8eee!=_0x49754d(0xf4)&&config['apiKey']!=''){if(pid[_0x2b8eee])pid[_0x2b8eee][_0x49754d(0xa6)]({'function':_0x49754d(0x22d),'args':null});}_0x2b8eee!=_0x49754d(0xf4)&&broadcastToBots('bots',JSON[_0x49754d(0x224)](config));}function reloadBotManager(){const _0x35e0fd=_0x446078;getClientsWithBotID(_0x35e0fd(0xf4))['forEach'](_0x147d52=>{const _0xe8bdcb=_0x35e0fd;getSocket(_0x147d52['id'])['emit']('status',{'access':{'allow':![],'reason':_0xe8bdcb(0xc6),'token':null}});});}function getSocket(_0x5d3219){const _0x466527=_0x446078;return io[_0x466527(0x212)]['sockets'][_0x466527(0x21a)](_0x5d3219);}function setAccess(_0x526325){const _0x4fd98e=_0x446078,_0x265d61=getSocket(_0x526325['id']),_0x205d6e=_0x526325['uuid'],_0x5426ec=_0x526325[_0x4fd98e(0xe9)];devices[_0x205d6e][_0x4fd98e(0x18b)]=validateAccess(devices[_0x205d6e][_0x4fd98e(0x18b)][_0x4fd98e(0x104)],_0x205d6e),logger[_0x4fd98e(0x26c)](_0x4fd98e(0x15e)+devices[_0x205d6e][_0x4fd98e(0x18b)][_0x4fd98e(0x1c2)]+_0x4fd98e(0x21d)+_0x526325['id'][_0x4fd98e(0x1a3)](-0x8)+_0x4fd98e(0xcf)+_0x205d6e[_0x4fd98e(0x1a3)](-0x8)),_0x265d61[_0x4fd98e(0xc0)](_0x205d6e);if(devices[_0x205d6e][_0x4fd98e(0x18b)]['allow']){_0x265d61['join'](_0x5426ec);if(_0x5426ec==_0x4fd98e(0xf4))initializeSocketBotManager(_0x265d61);else initializeSocketBot(_0x265d61);initClient(_0x5426ec);}devices[_0x205d6e][_0x4fd98e(0x18b)]['token']&&devices[_0x205d6e][_0x4fd98e(0x18b)]['reason']==_0x4fd98e(0x175)&&setSessionTimeout(_0x4fd98e(0xc9),_0x205d6e),devices[_0x205d6e]['access'][_0x4fd98e(0x104)]&&devices[_0x205d6e][_0x4fd98e(0x18b)][_0x4fd98e(0x1c2)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x4fd98e(0x1aa),_0x205d6e),_0x265d61[_0x4fd98e(0x173)](_0x4fd98e(0x1d4),{'status':_0x526325[_0x4fd98e(0x227)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x205d6e]['access'],'externalip':devices[_0x205d6e]['ip'],'publicKey':secure[_0x4fd98e(0x195)],'userid':settings[_0x4fd98e(0x194)],'validInstallation':validInstallation}),devices[_0x205d6e]['access'][_0x4fd98e(0x243)]==![]&&devices[_0x205d6e][_0x4fd98e(0x18b)][_0x4fd98e(0x1c2)]=='2FA\x20required'&&temporaryAccess2FA(_0x205d6e,devices[_0x205d6e]['ip']);}function setSessionTimeout(_0x13c230,_0x332099){const _0x30b28b=_0x446078;let _0x2a4eb3;if(_0x13c230==_0x30b28b(0x1aa))_0x2a4eb3=loginExpiry*0x3c*0x3e8;else _0x2a4eb3=devices[_0x332099][_0x30b28b(0x180)]['expiry']*0x3c*0x3e8-(new Date()[_0x30b28b(0x1c0)]()-devices[_0x332099]['telegramIpApproval'][_0x30b28b(0x12e)]);if(devices[_0x332099][_0x30b28b(0xe1)])clearTimeout(devices[_0x332099]['pidExpireLogin']);devices[_0x332099][_0x30b28b(0xe1)]=setTimeout(()=>{const _0x43e753=_0x30b28b;if(devices[_0x332099]['pidRefreshToken'])clearTimeout(devices[_0x332099][_0x43e753(0x1cf)]);removeSocketListeners(_0x332099),addBlacklist(_0x332099),devices[_0x332099][_0x43e753(0x180)]=null,devices[_0x332099][_0x43e753(0x23f)]=null,devices[_0x332099][_0x43e753(0x18b)][_0x43e753(0x104)]=null,logger[_0x43e753(0x26c)]('Session\x20expired\x20for\x20user\x20...'+_0x332099[_0x43e753(0x1a3)](-0x8)),devices[_0x332099][_0x43e753(0x18b)]=validateAccess(devices[_0x332099][_0x43e753(0x18b)][_0x43e753(0x104)],_0x332099),!(devices[_0x332099][_0x43e753(0x18b)][_0x43e753(0x243)]&&devices[_0x332099]['access'][_0x43e753(0x1c2)]==_0x43e753(0x20c))&&(_0x13c230==_0x43e753(0x1aa)?io['to'](_0x332099)['emit'](_0x43e753(0x1d4),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x332099)[_0x43e753(0x173)](_0x43e753(0x1d4),{'access':{'allow':![],'reason':_0x43e753(0xfd),'token':null}})),devices[_0x332099]['access'][_0x43e753(0x104)]=null;},_0x2a4eb3);}function setTokenRefresh(_0xf2d873){const _0x2a7b7b=_0x446078;if(devices[_0xf2d873][_0x2a7b7b(0x1cf)])clearTimeout(devices[_0xf2d873][_0x2a7b7b(0x1cf)]);devices[_0xf2d873]['pidRefreshToken']=setTimeout(()=>{const _0x35b545=_0x2a7b7b;getClientsWithUuid(_0xf2d873)[_0x35b545(0x1ae)]!=0x0?(devices[_0xf2d873][_0x35b545(0x18b)]=refreshToken(_0xf2d873),io['to'](_0xf2d873)[_0x35b545(0x173)](_0x35b545(0x1d4),{'status':_0x35b545(0x262),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xf2d873][_0x35b545(0x18b)],'externalip':devices[_0xf2d873]['ip'],'publicKey':secure[_0x35b545(0x195)],'validInstallation':validInstallation}),setTokenRefresh(_0xf2d873)):clearTimeout(devices[_0xf2d873][_0x35b545(0x1cf)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5d7bb4){const _0x2e0fbf=_0x446078,_0x314355=getClient(_0x5d7bb4['id'])[_0x2e0fbf(0x13c)];_0x5d7bb4[_0x2e0fbf(0x173)](_0x2e0fbf(0x20b),config),_0x5d7bb4[_0x2e0fbf(0x173)](_0x2e0fbf(0x214),cleanSettings()),_0x5d7bb4['on'](_0x2e0fbf(0x10b),_0x34d552=>{const _0x2d9152=_0x2e0fbf;if(validateAccess(_0x34d552,_0x314355)[_0x2d9152(0x243)])addBot();else logger[_0x2d9152(0x109)](_0x2d9152(0x110));}),_0x5d7bb4['on'](_0x2e0fbf(0x18e),(_0x16d195,_0xf77347)=>{const _0x3dd402=_0x2e0fbf;if(validateAccess(_0xf77347,_0x314355)[_0x3dd402(0x243)])toggleBot(_0x16d195['botID'],_0x16d195[_0x3dd402(0x1d4)],_0x16d195[_0x3dd402(0x199)]);else logger[_0x3dd402(0x109)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5d7bb4['on'](_0x2e0fbf(0xf8),(_0x1205a7,_0x3dc080)=>{const _0xe4eead=_0x2e0fbf;if(validateAccess(_0x3dc080,_0x314355)[_0xe4eead(0x243)])toggleBotMode(_0x1205a7);else logger['full'](_0xe4eead(0x223));}),_0x5d7bb4['on'](_0x2e0fbf(0x1fa),(_0x12c17b,_0x592507)=>{if(validateAccess(_0x592507,_0x314355)['allow'])deleteBot(_0x12c17b);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5d7bb4['on'](_0x2e0fbf(0x1ed),(_0x529914,_0x353643)=>{const _0x4a0ca9=_0x2e0fbf;if(validateAccess(_0x353643,_0x314355)['allow'])storeSettings(_0x529914,!![]);else logger[_0x4a0ca9(0x109)](_0x4a0ca9(0x151));}),_0x5d7bb4['on']('update-bb',_0x170a9d=>{const _0x1fc300=_0x2e0fbf;if(validateAccess(_0x170a9d,_0x314355)[_0x1fc300(0x243)])updateBB('update');else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x5d7bb4['on']('reinstall-bb',_0x3ace4d=>{const _0x2d0c9e=_0x2e0fbf;if(validateAccess(_0x3ace4d,_0x314355)[_0x2d0c9e(0x243)])updateBB(_0x2d0c9e(0x14f));else logger[_0x2d0c9e(0x109)](_0x2d0c9e(0x15b));}),_0x5d7bb4['on'](_0x2e0fbf(0x135),_0xf84ae0=>{const _0xedfdb2=_0x2e0fbf;if(validateAccess(_0xf84ae0,_0x314355)[_0xedfdb2(0x243)]){const _0x4603c0=getClient(_0x5d7bb4['id']);if(_0x4603c0)getBackupFiles(_0x4603c0[_0xedfdb2(0x13c)]);else logger['full'](_0xedfdb2(0xda));}else logger[_0xedfdb2(0x109)](_0xedfdb2(0x150));}),_0x5d7bb4['on'](_0x2e0fbf(0x27d),(_0x2dbd39,_0x451e53)=>{const _0x665319=_0x2e0fbf;if(validateAccess(_0x451e53,_0x314355)[_0x665319(0x243)])restoreBackupFile(_0x2dbd39);else logger[_0x665319(0x109)](_0x665319(0x200));}),_0x5d7bb4['on'](_0x2e0fbf(0x263),_0x12673d=>{const _0x3276c4=_0x2e0fbf;if(validateAccess(_0x12673d,_0x314355)['allow'])getMessages();else logger[_0x3276c4(0x109)](_0x3276c4(0x160));}),_0x5d7bb4['on'](_0x2e0fbf(0x237),(_0x1f3a12,_0x59595b)=>{const _0x1d4e75=_0x2e0fbf;if(validateAccess(_0x59595b,_0x314355)[_0x1d4e75(0x243)])confirmMessage(_0x1f3a12);else logger[_0x1d4e75(0x109)](_0x1d4e75(0x284));}),_0x5d7bb4['on'](_0x2e0fbf(0x1d7),_0x5ab382=>{const _0x113d8c=_0x2e0fbf;if(validateAccess(_0x5ab382,_0x314355)['allow']){if(devices[_0x314355][_0x113d8c(0x1cf)])clearTimeout(devices[_0x314355][_0x113d8c(0x1cf)]);if(devices[_0x314355][_0x113d8c(0xe1)])clearTimeout(devices[_0x314355][_0x113d8c(0xe1)]);removeSocketListeners(getClient(_0x5d7bb4['id'])[_0x113d8c(0x13c)]),addBlacklist(_0x314355),devices[_0x314355][_0x113d8c(0x180)]=null,devices[_0x314355][_0x113d8c(0x23f)]=null,devices[_0x314355][_0x113d8c(0x18b)][_0x113d8c(0x104)]=null,logger[_0x113d8c(0x26c)](_0x113d8c(0x13d)+_0x314355[_0x113d8c(0x1a3)](-0x8)),io['to'](getClient(_0x5d7bb4['id'])[_0x113d8c(0x13c)])['emit'](_0x113d8c(0x1d4),{'access':{'allow':![],'reason':_0x113d8c(0x26d),'token':null}});}else logger[_0x113d8c(0x109)](_0x113d8c(0x1fe));});}function initializeSocketBot(_0x5c23c4){const _0x4b6aa9=_0x446078,_0x28ff3e=getClient(_0x5c23c4['id'])[_0x4b6aa9(0xe9)],_0x30002f=getClient(_0x5c23c4['id'])[_0x4b6aa9(0x13c)];_0x5c23c4['on'](_0x4b6aa9(0x1ca),(_0x2e14d9,_0x5d5d41)=>{const _0x4e6b92=_0x4b6aa9;if(validateAccess(_0x5d5d41,_0x30002f)['allow']){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x4e6b92(0xa6)]({'function':_0x4e6b92(0x113),'args':_0x2e14d9});}else logger[_0x4e6b92(0x109)](_0x4e6b92(0xf1));}),_0x5c23c4['on'](_0x4b6aa9(0x11a),(_0x5ac30a,_0x6fc8f0)=>{const _0xd4e74e=_0x4b6aa9;if(validateAccess(_0x6fc8f0,_0x30002f)['allow']){if(pid[_0x28ff3e])pid[_0x28ff3e][_0xd4e74e(0xa6)]({'function':_0xd4e74e(0x222),'args':_0x5ac30a});}else logger[_0xd4e74e(0x109)](_0xd4e74e(0x1b4));}),_0x5c23c4['on'](_0x4b6aa9(0xb6),(_0x17f845,_0x5b8c20)=>{const _0x5528cd=_0x4b6aa9;if(validateAccess(_0x5b8c20,_0x30002f)[_0x5528cd(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x5528cd(0xa6)]({'function':_0x5528cd(0x23c),'args':_0x17f845});}else logger[_0x5528cd(0x109)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5c23c4['on'](_0x4b6aa9(0x216),(_0x268fc9,_0x4f1a2c)=>{const _0xd9f50e=_0x4b6aa9;if(validateAccess(_0x4f1a2c,_0x30002f)[_0xd9f50e(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0xd9f50e(0xa6)]({'function':_0xd9f50e(0x207),'args':_0x268fc9});}else logger[_0xd9f50e(0x109)](_0xd9f50e(0x1c3));}),_0x5c23c4['on']('store-headless',(_0x2293a4,_0x5c8c0e)=>{const _0x3024d2=_0x4b6aa9;if(validateAccess(_0x5c8c0e,_0x30002f)[_0x3024d2(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x3024d2(0xa6)]({'function':_0x3024d2(0x1f9),'args':_0x2293a4});}else logger[_0x3024d2(0x109)](_0x3024d2(0x128));}),_0x5c23c4['on'](_0x4b6aa9(0x23e),(_0x51310f,_0x3fb637)=>{const _0x50a8be=_0x4b6aa9;if(validateAccess(_0x3fb637,_0x30002f)['allow']){if(pid[_0x28ff3e])pid[_0x28ff3e]['send']({'function':'storeFiat','args':_0x51310f});}else logger[_0x50a8be(0x109)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x5c23c4['on'](_0x4b6aa9(0x1b6),_0x50c623=>{const _0x2a515f=_0x4b6aa9;if(validateAccess(_0x50c623,_0x30002f)[_0x2a515f(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x2a515f(0xa6)]({'function':_0x2a515f(0x191),'args':null});}else logger['full'](_0x2a515f(0xb5));}),_0x5c23c4['on'](_0x4b6aa9(0x256),_0x232015=>{const _0x27c7e5=_0x4b6aa9;if(validateAccess(_0x232015,_0x30002f)[_0x27c7e5(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x27c7e5(0xa6)]({'function':_0x27c7e5(0x138),'args':null});}else logger[_0x27c7e5(0x109)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5c23c4['on'](_0x4b6aa9(0x106),(_0x8d1f02,_0x38d526)=>{const _0x4c4ff9=_0x4b6aa9;if(validateAccess(_0x38d526,_0x30002f)[_0x4c4ff9(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x4c4ff9(0xa6)]({'function':_0x4c4ff9(0x124),'args':_0x8d1f02});}else logger[_0x4c4ff9(0x109)](_0x4c4ff9(0x156));}),_0x5c23c4['on']('cancel-loading',_0xf5c1fb=>{const _0x510800=_0x4b6aa9;if(validateAccess(_0xf5c1fb,_0x30002f)[_0x510800(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x510800(0xa6)]({'function':_0x510800(0x139),'args':null});}else logger[_0x510800(0x109)](_0x510800(0xe5));}),_0x5c23c4['on'](_0x4b6aa9(0x1ab),_0xf412d4=>{const _0x14e6c1=_0x4b6aa9;if(validateAccess(_0xf412d4,_0x30002f)[_0x14e6c1(0x243)]){if(pid[_0x28ff3e])pid[_0x28ff3e][_0x14e6c1(0xa6)]({'function':_0x14e6c1(0x232),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x5c23c4['on']('update-bb',_0x44dc53=>{const _0x69ddc4=_0x4b6aa9;if(validateAccess(_0x44dc53,_0x30002f)[_0x69ddc4(0x243)])updateBB(_0x69ddc4(0x148));else logger['full'](_0x69ddc4(0x238));}),_0x5c23c4['on'](_0x4b6aa9(0x263),_0x8213e2=>{const _0x3ddc4f=_0x4b6aa9;if(validateAccess(_0x8213e2,_0x30002f)['allow'])getMessages();else logger['full'](_0x3ddc4f(0x160));}),_0x5c23c4['on'](_0x4b6aa9(0x237),(_0x3e4415,_0x369fbc)=>{const _0x2eb117=_0x4b6aa9;if(validateAccess(_0x369fbc,_0x30002f)[_0x2eb117(0x243)])confirmMessage(_0x3e4415);else logger[_0x2eb117(0x109)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5c23c4['on'](_0x4b6aa9(0x1d7),_0x53ad27=>{const _0x4e1fe8=_0x4b6aa9;if(validateAccess(_0x53ad27,_0x30002f)['allow']){if(devices[_0x30002f][_0x4e1fe8(0x1cf)])clearTimeout(devices[_0x30002f][_0x4e1fe8(0x1cf)]);if(devices[_0x30002f]['pidExpireLogin'])clearTimeout(devices[_0x30002f][_0x4e1fe8(0xe1)]);removeSocketListeners(getClient(_0x5c23c4['id'])['uuid']),addBlacklist(_0x30002f),devices[_0x30002f]['telegramIpApproval']=null,devices[_0x30002f][_0x4e1fe8(0x23f)]=null,devices[_0x30002f][_0x4e1fe8(0x18b)][_0x4e1fe8(0x104)]=null,logger[_0x4e1fe8(0x26c)](_0x4e1fe8(0x13d)+_0x30002f[_0x4e1fe8(0x1a3)](-0x8)),io['to'](getClient(_0x5c23c4['id'])[_0x4e1fe8(0x13c)])[_0x4e1fe8(0x173)]('status',{'access':{'allow':![],'reason':_0x4e1fe8(0x26d),'token':null}});}else logger[_0x4e1fe8(0x109)](_0x4e1fe8(0x1fe));});}function removeSocketListeners(_0x5e4f3a){getClientsWithUuid(_0x5e4f3a)['forEach'](_0x38f566=>{const _0x3845dc=_0xc48b;getSocket(_0x38f566['id'])[_0x3845dc(0x1b3)]();});}function cleanSettings(){const _0x295244=_0x446078;let _0x1450f2=settings;return settings[_0x295244(0x154)]&&settings['telegramToken']!=''&&(_0x1450f2={..._0x1450f2,'telegramToken':_0x295244(0x115)}),settings[_0x295244(0x219)]&&settings[_0x295244(0x219)]!=''&&(_0x1450f2={..._0x1450f2,'bbPassword':_0x295244(0x115)}),(settings['bbPassword']&&settings[_0x295244(0x219)]=='***'||settings[_0x295244(0x154)]&&settings['telegramToken']==_0x295244(0x1f5))&&(_0x1450f2={..._0x1450f2,'restored':{'password':settings[_0x295244(0x219)]==_0x295244(0x1f5),'telegram':settings[_0x295244(0x154)]==_0x295244(0x1f5)}}),_0x1450f2;}async function updateBB(_0x4780e5){const _0x2fc056=_0x446078;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x1932ef=>{const _0x599d2f=_0xc48b;restartBot(_0x1932ef[_0x599d2f(0x27a)]);});if(_0x4780e5==_0x2fc056(0x148))process[_0x2fc056(0xa6)]({'update':!![],'environment':environment},_0x5ec2db=>{});else _0x4780e5==_0x2fc056(0x14f)&&process[_0x2fc056(0xa6)]({'reinstall':!![],'environment':environment},_0x4e6b25=>{});}function startBot(_0xe2e330,_0x4d57cd,_0xbafa28){const _0x6b703=_0x446078;if(debugging)_0xe2e330[_0x6b703(0x140)]('-d');let _0x587d93=![];const _0x5fad43=_0xe2e330[0x0];_0x4d57cd={..._0x4d57cd,'stdio':[_0x6b703(0x257),_0x6b703(0x257),_0x6b703(0x257),_0x6b703(0xcb)]},pid[_0x5fad43]=childProcess[_0x6b703(0x119)](botfile,_0xe2e330,_0x4d57cd),pid[_0x5fad43]['on']('message',_0x152f93=>{const _0xc0fb29=_0x6b703;switch(Object['keys'](_0x152f93)[0x0]){case _0xc0fb29(0x1e8):updateBotName(_0x5fad43,_0x152f93[_0xc0fb29(0x1e8)]);break;case _0xc0fb29(0x202):updateBotManager();break;case _0xc0fb29(0x1d4):updateStatus(_0x5fad43,_0x152f93[_0xc0fb29(0x1d4)]);break;case _0xc0fb29(0x199):updateLive(_0x5fad43,_0x152f93[_0xc0fb29(0x199)]);break;case'started':updateLive(_0x5fad43,_0x152f93[_0xc0fb29(0x273)]),io['to'](_0x5fad43)[_0xc0fb29(0x173)](_0xc0fb29(0x1d4),{'access':{'allow':![],'reason':_0xc0fb29(0xc6),'token':null}});break;case _0xc0fb29(0xbf):_0x152f93[_0xc0fb29(0xbf)]==_0xc0fb29(0xac)&&restartBot(_0x5fad43);_0x152f93['stop']==_0xc0fb29(0x1a7)&&toggleBot(_0x5fad43,_0xc0fb29(0x278),_0xc0fb29(0x1e3));break;case'telegram':sendTelegram(_0x5fad43,_0x152f93[_0xc0fb29(0xc8)]);break;case _0xc0fb29(0x136):sendTelegramMsg(_0x152f93[_0xc0fb29(0x136)]);break;case _0xc0fb29(0x20a):io['to'](_0x5fad43)[_0xc0fb29(0x173)](_0x152f93[_0xc0fb29(0x20a)],_0x152f93[_0xc0fb29(0xce)]);break;}}),pid[_0x5fad43]['on'](_0x6b703(0x179),function(_0x5eb5cf){if(_0x587d93)return;_0x587d93=!![],_0xbafa28(_0x5eb5cf);}),pid[_0x5fad43]['on'](_0x6b703(0x15d),async function(_0x3ffdcc){const _0x1d36df=_0x6b703;if(installingUpdate)return;if(_0x587d93)return;_0x587d93=!![],_0xbafa28(null);const _0x2ca935=dbConfig[_0x1d36df(0x21a)](_0x1d36df(0x20b))[_0x1d36df(0x280)]({'botID':_0x5fad43})[_0x1d36df(0x137)]();_0x2ca935&&(_0x2ca935[_0x1d36df(0x1d4)]==_0x1d36df(0x283)||_0x2ca935[_0x1d36df(0x1d4)]==_0x1d36df(0x26f))&&(await sleep(0x3e8),updateLive(_0x5fad43,'stopped'),logger[_0x1d36df(0x109)](_0x1d36df(0x239)+_0x5fad43),startBot([_0x5fad43,userID],{'cwd':bbpath},function(_0x285e0f){const _0x283278=_0x1d36df;if(_0x285e0f)logger[_0x283278(0x109)](_0x285e0f);}));});}function stopBot(_0x1bc7cb){const _0x284ec8=_0x446078;getClientsWithBotID(_0x1bc7cb)['forEach'](_0x39e8ed=>{const _0x5d6cd1=_0xc48b;getSocket(_0x39e8ed['id'])[_0x5d6cd1(0x19a)](!![]),removeClient(_0x39e8ed['id']);}),pid[_0x1bc7cb]&&(pid[_0x1bc7cb][_0x284ec8(0x1a7)](),pid[_0x1bc7cb]=null);}function restartBot(_0x3a73c2){const _0x5779ae=_0x446078;if(pid[_0x3a73c2])pid[_0x3a73c2][_0x5779ae(0x1a7)]();}function addBot(){const _0x2e140f=_0x446078;let _0x47793a;for(let _0x5c08ec=0x1;_0x5c08ec<0x3e9;_0x5c08ec++){_0x47793a=_0x5c08ec[_0x2e140f(0x17e)]()[_0x2e140f(0x1bd)](0x3,'0');let _0x5be5c8=config[_0x2e140f(0x280)](_0x15384b=>_0x15384b[_0x2e140f(0x27a)]==_0x47793a);if(!_0x5be5c8)break;}if(_0x47793a==='1000'){logger[_0x2e140f(0x109)](_0x2e140f(0xc4));return;}logger[_0x2e140f(0x109)](_0x2e140f(0x122)+_0x47793a),dbConfig['get'](_0x2e140f(0x20b))[_0x2e140f(0x140)]({'botID':_0x47793a,'botname':'Bot\x20'+_0x47793a,'status':_0x2e140f(0x26f),'live':''})[_0x2e140f(0x12f)](),startBot([_0x47793a,userID],{'cwd':bbpath},function(_0x3b0d17){const _0x1dbe3b=_0x2e140f;if(_0x3b0d17)logger[_0x1dbe3b(0x109)](_0x3b0d17);}),config=getConfiguration(),io['to'](_0x2e140f(0xf4))[_0x2e140f(0x173)](_0x2e140f(0x20b),config),broadcastToBots(_0x2e140f(0x20b),JSON[_0x2e140f(0x224)](config));}function deleteBot(_0x21ee86){const _0x1366e4=_0x446078;getClientsWithBotID(_0x21ee86)[_0x1366e4(0x26e)](_0x4fc7db=>{const _0x461020=_0x1366e4;getSocket(_0x4fc7db['id'])[_0x461020(0x19a)](!![]),removeClient(_0x4fc7db['id']);}),dbConfig[_0x1366e4(0x21a)](_0x1366e4(0x20b))[_0x1366e4(0x132)]({'botID':_0x21ee86})[_0x1366e4(0x12f)](),logger[_0x1366e4(0x109)](_0x1366e4(0x20e)+_0x21ee86),stopBot(_0x21ee86);try{if(fs[_0x1366e4(0xd0)](path['join'](configpath,_0x1366e4(0x131)+_0x21ee86+'-config.json')))fs[_0x1366e4(0x1fd)](path[_0x1366e4(0xc0)](configpath,'bot-'+_0x21ee86+'-config.json'));if(fs['existsSync'](path[_0x1366e4(0xc0)](configpath,_0x1366e4(0x131)+_0x21ee86+_0x1366e4(0x18c))))fs['unlinkSync'](path[_0x1366e4(0xc0)](configpath,_0x1366e4(0x131)+_0x21ee86+_0x1366e4(0x18c)));if(fs[_0x1366e4(0xd0)](path[_0x1366e4(0xc0)](configpath,'bot-'+_0x21ee86+_0x1366e4(0x1f2))))fs['unlinkSync'](path['join'](configpath,_0x1366e4(0x131)+_0x21ee86+_0x1366e4(0x1f2)));if(fs['existsSync'](path[_0x1366e4(0xc0)](configpath,'bot-'+_0x21ee86+_0x1366e4(0x105))))fs[_0x1366e4(0x1fd)](path[_0x1366e4(0xc0)](configpath,_0x1366e4(0x131)+_0x21ee86+_0x1366e4(0x105)));}catch(_0x2fb5cf){if(_0x2fb5cf)logger[_0x1366e4(0x109)](_0x1366e4(0x171),_0x2fb5cf);}config=getConfiguration(),io['to'](_0x1366e4(0xf4))[_0x1366e4(0x173)](_0x1366e4(0x20b),config),broadcastToBots(_0x1366e4(0x20b),JSON[_0x1366e4(0x224)](config));}function toggleBot(_0x41e5ab,_0x274340,_0x5b2e43){const _0x4e2320=_0x446078;dbConfig[_0x4e2320(0x21a)]('bots')[_0x4e2320(0x280)]({'botID':_0x41e5ab})[_0x4e2320(0x261)]({'status':_0x274340})[_0x4e2320(0x261)]({'live':_0x5b2e43})[_0x4e2320(0x12f)]();if(_0x274340==_0x4e2320(0x283)||_0x274340==_0x4e2320(0x26f))logger['full']('Enabled\x20Bot\x20'+_0x41e5ab),startBot([_0x41e5ab,userID],{'cwd':bbpath},function(_0x3ada5d){const _0x3d9750=_0x4e2320;if(_0x3ada5d)logger[_0x3d9750(0x109)](_0x3ada5d);});else(_0x274340==_0x4e2320(0x278)||_0x274340=='new-disabled')&&(logger[_0x4e2320(0x109)]('Disabled\x20Bot\x20'+_0x41e5ab),stopBot(_0x41e5ab));config=getConfiguration(),io['to'](_0x4e2320(0xf4))[_0x4e2320(0x173)](_0x4e2320(0x20b),config),broadcastToBots('bots',JSON[_0x4e2320(0x224)](config));}function toggleStatus(_0x408345){const _0x1f9cd6=_0x446078;let _0x20b9f=dbConfig['get']('bots')[_0x1f9cd6(0x280)]({'botID':_0x408345})[_0x1f9cd6(0x137)](),_0x594230;if(_0x20b9f['status']===_0x1f9cd6(0x283))_0x594230=_0x1f9cd6(0x278);else{if(_0x20b9f[_0x1f9cd6(0x1d4)]===_0x1f9cd6(0x26f))_0x594230=_0x1f9cd6(0xf0);else{if(_0x20b9f['status']==='new-disabled')_0x594230=_0x1f9cd6(0x26f);else{if(_0x20b9f[_0x1f9cd6(0x1d4)]==='disabled')_0x594230='enabled';}}}return _0x594230;}function updateStatus(_0x53a525,_0x7ef131){const _0x31e047=_0x446078;dbConfig[_0x31e047(0x21a)]('bots')['find']({'botID':_0x53a525})[_0x31e047(0x261)]({'status':_0x7ef131})[_0x31e047(0x12f)](),config=getConfiguration(),io['to'](_0x31e047(0xf4))[_0x31e047(0x173)](_0x31e047(0x20b),config),broadcastToBots('bots',JSON['stringify'](config));}function _0xc48b(_0x9db5,_0x5cdd78){const _0x1ebcad=_0x1946();return _0xc48b=function(_0x1c34d0,_0x37df55){_0x1c34d0=_0x1c34d0-0xa5;let _0x1946c2=_0x1ebcad[_0x1c34d0];return _0x1946c2;},_0xc48b(_0x9db5,_0x5cdd78);}function updateLive(_0x4d7b7e,_0x509a48){const _0x3d9f32=_0x446078;dbConfig[_0x3d9f32(0x21a)](_0x3d9f32(0x20b))[_0x3d9f32(0x280)]({'botID':_0x4d7b7e})[_0x3d9f32(0x261)]({'live':_0x509a48})[_0x3d9f32(0x12f)](),config=getConfiguration(),io['to'](_0x3d9f32(0xf4))[_0x3d9f32(0x173)]('bots',config),broadcastToBots('bots',JSON[_0x3d9f32(0x224)](config));}function updateBotName(_0x3adde3,_0x38376b){const _0x1df0e2=_0x446078;dbConfig['get'](_0x1df0e2(0x20b))['find']({'botID':_0x3adde3})['assign']({'botname':_0x38376b})[_0x1df0e2(0x12f)](),config=getConfiguration(),io['to'](_0x1df0e2(0xf4))[_0x1df0e2(0x173)](_0x1df0e2(0x20b),config),broadcastToBots(_0x1df0e2(0x20b),JSON['stringify'](config));}function updateBotManager(){const _0x225843=_0x446078;config=getConfiguration(),io['to'](_0x225843(0xf4))['emit'](_0x225843(0x20b),config),broadcastToBots(_0x225843(0x20b),JSON[_0x225843(0x224)](config));}function toggleBotMode(_0x10ab9c){const _0x56d420=_0x446078;if(pid[_0x10ab9c])pid[_0x10ab9c][_0x56d420(0xa6)]({'function':'toggleBotMode','args':null});else{const _0x3d6a1a=configpath+_0x56d420(0x131)+_0x10ab9c+_0x56d420(0x116),_0x25bfe8=fs[_0x56d420(0x10d)](_0x3d6a1a),_0x16ffce=JSON['parse'](_0x25bfe8),_0x3fd80b=_0x16ffce[_0x56d420(0xe9)][0x0][_0x56d420(0xeb)];_0x16ffce[_0x56d420(0xe9)][0x0][_0x56d420(0xeb)]=!_0x3fd80b;const _0x5ea306=JSON['stringify'](_0x16ffce,null,0x2);fs['writeFileSync'](_0x3d6a1a,_0x5ea306),config=getConfiguration(),io['to']('botmanager')[_0x56d420(0x173)]('bots',config),broadcastToBots(_0x56d420(0x20b),JSON[_0x56d420(0x224)](config));}}function telegramError(_0xc1dbe2){const _0x5715c2=_0x446078;logger['simple'](getTimeStamp()+_0x5715c2(0x1e6));}function validateTelegram(_0x225de6){const _0xd6bd7f=_0x446078;if(_0x225de6[_0xd6bd7f(0x12b)][_0xd6bd7f(0x1c7)]!=settings[_0xd6bd7f(0x1e9)]&&'@'+_0x225de6['from'][_0xd6bd7f(0x1c7)]!=settings[_0xd6bd7f(0x1e9)])return tgBot[_0xd6bd7f(0x120)](_0x225de6[_0xd6bd7f(0xa7)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0xd6bd7f(0x1ff)})[_0xd6bd7f(0xa5)](_0x245777=>{telegramError(_0x245777);}),![];return!![];}async function initTelegram(){const _0x542e9f=_0x446078;if(tgBot)tgBot[_0x542e9f(0xae)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x542e9f(0x154)],{'polling':!![]});let _0x132a18=_0x542e9f(0x218);_0x132a18+='\x0a',_0x132a18+='/enable\x20-\x20enable\x20notifications\x0a',_0x132a18+=_0x542e9f(0x27e),_0x132a18+=_0x542e9f(0x21e),_0x132a18+=_0x542e9f(0x165),_0x132a18+=_0x542e9f(0x193),_0x132a18+=_0x542e9f(0x14d),_0x132a18+=_0x542e9f(0x190),_0x132a18+=_0x542e9f(0x1e0),_0x132a18+=_0x542e9f(0x1c1),_0x132a18+=_0x542e9f(0x1bf),_0x132a18+=_0x542e9f(0xbc),_0x132a18+=_0x542e9f(0x269),_0x132a18+=_0x542e9f(0x248),_0x132a18+=_0x542e9f(0x1e7);let _0x39e24e='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x39e24e+='\x0a',_0x39e24e+=_0x132a18,tgBot[_0x542e9f(0x20d)](/\/start/,_0x23687d=>{const _0x2c99ac=_0x542e9f;if(!validateTelegram(_0x23687d))return;if(settings[_0x2c99ac(0x285)]!=_0x23687d[_0x2c99ac(0xa7)]['id'])updateSetting(_0x2c99ac(0x285),_0x23687d[_0x2c99ac(0xa7)]['id']);updateSetting(_0x2c99ac(0x1cd),!![]),tgBot[_0x2c99ac(0x120)](_0x23687d['chat']['id'],_0x39e24e)[_0x2c99ac(0xa5)](_0x328640=>{telegramError(_0x328640);});}),tgBot['onText'](/\/enable/,_0x161918=>{const _0x138ceb=_0x542e9f;if(!validateTelegram(_0x161918))return;if(settings['telegramChatId']!=_0x161918[_0x138ceb(0xa7)]['id'])updateSetting(_0x138ceb(0x285),_0x161918[_0x138ceb(0xa7)]['id']);updateSetting(_0x138ceb(0x1cd),!![]),tgBot[_0x138ceb(0x120)](_0x161918[_0x138ceb(0xa7)]['id'],_0x138ceb(0x1f8))[_0x138ceb(0xa5)](_0x37a896=>{telegramError(_0x37a896);});}),tgBot[_0x542e9f(0x20d)](/\/config/,async _0x50891c=>{const _0x12a517=_0x542e9f;if(!validateTelegram(_0x50891c))return;tgBot[_0x12a517(0x169)](_0x12a517(0x231)),tgBot[_0x12a517(0x120)](_0x50891c['chat']['id'],_0x12a517(0x15a),{'reply_markup':{'inline_keyboard':[[{'text':_0x12a517(0x23b),'callback_data':_0x12a517(0x1ce)},{'text':_0x12a517(0x18d),'callback_data':_0x12a517(0x276)},{'text':_0x12a517(0x247),'callback_data':_0x12a517(0x226)}]]}})[_0x12a517(0xa5)](_0x42f301=>{telegramError(_0x42f301);}),tgBot['on'](_0x12a517(0x231),async _0xad15ea=>{const _0x4ac7e9=_0x12a517,_0x1eb8a5=_0xad15ea['data'],_0x3f7b13=_0xad15ea[_0x4ac7e9(0x271)];tgBot['answerCallbackQuery'](_0xad15ea['id'])[_0x4ac7e9(0x225)](async()=>{const _0x2cf029=_0x4ac7e9;_0x1eb8a5==_0x2cf029(0x1ce)&&(updateSetting('telegramEvents',_0x2cf029(0x1ce)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2cf029(0x120)](_0x3f7b13[_0x2cf029(0xa7)]['id'],_0x2cf029(0x127))[_0x2cf029(0xa5)](_0x2d353e=>{telegramError(_0x2d353e);}));_0x1eb8a5=='alerts'&&(updateSetting('telegramEvents',_0x2cf029(0x276)),updateSetting(_0x2cf029(0x1cd),!![]),await tgBot[_0x2cf029(0x120)](_0x3f7b13[_0x2cf029(0xa7)]['id'],_0x2cf029(0x1eb))['catch'](_0x16cd95=>{telegramError(_0x16cd95);}));_0x1eb8a5==_0x2cf029(0x226)&&(updateSetting(_0x2cf029(0x277),'all'),updateSetting(_0x2cf029(0x1cd),!![]),await tgBot[_0x2cf029(0x120)](_0x3f7b13[_0x2cf029(0xa7)]['id'],_0x2cf029(0x1ef))['catch'](_0x79c679=>{telegramError(_0x79c679);}));if(!settings[_0x2cf029(0x285)])tgBot['sendMessage'](_0x3f7b13['chat']['id'],_0x2cf029(0x152))[_0x2cf029(0xa5)](_0x623ae3=>{telegramError(_0x623ae3);});}),tgBot[_0x4ac7e9(0x169)]('callback_query');});}),tgBot[_0x542e9f(0x20d)](/\/status/,_0x54560a=>{const _0x1027a3=_0x542e9f;if(!validateTelegram(_0x54560a))return;const _0x49899d=getBotsWithMode();let _0x1fcefc=_0x1027a3(0xd2);config[_0x1027a3(0x26e)](_0x572904=>{const _0x4bda5f=_0x1027a3,_0x48093d=_0x49899d[_0x4bda5f(0x280)](_0x49f534=>_0x49f534[_0x4bda5f(0x27a)]==_0x572904[_0x4bda5f(0x27a)])[_0x4bda5f(0x172)];_0x1fcefc+=_0x4bda5f(0x1af)+_0x572904[_0x4bda5f(0x27a)]+':\x20'+_0x572904[_0x4bda5f(0x1d4)]+_0x4bda5f(0x1f6)+_0x48093d+_0x4bda5f(0x1f6)+_0x572904['live']+'\x0a';}),_0x1fcefc+='\x0a',_0x1fcefc+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x1fcefc+=!settings['telegramEnabled']?_0x1027a3(0x1f7):_0x1027a3(0x1da),_0x1fcefc+=settings[_0x1027a3(0x1cd)]?settings[_0x1027a3(0x277)]==_0x1027a3(0x226)?_0x1027a3(0x234):_0x1027a3(0xd5)+settings[_0x1027a3(0x277)]+_0x1027a3(0xff):'',tgBot['sendMessage'](_0x54560a['chat']['id'],_0x1fcefc,{'parse_mode':_0x1027a3(0x1ff)})['catch'](_0x2c60f7=>{telegramError(_0x2c60f7);});}),tgBot[_0x542e9f(0x20d)](/\/restart/,_0x536a6e=>{const _0x2620c0=_0x542e9f;if(!validateTelegram(_0x536a6e))return;tgBot[_0x2620c0(0x169)](_0x2620c0(0x231));const _0x1dd66a=getEnabledBots();if(_0x1dd66a['length']==0x0)tgBot[_0x2620c0(0x120)](_0x536a6e['chat']['id'],_0x2620c0(0x27c))[_0x2620c0(0xa5)](_0x593f91=>{telegramError(_0x593f91);});else{if(_0x1dd66a['length']>0x1)_0x1dd66a[_0x2620c0(0x140)]({'botID':_0x2620c0(0x226)});let _0x503117=[],_0x4186aa=[];const _0x5ef279=_0x1dd66a[_0x2620c0(0x1ae)]%0x4==0x0||_0x1dd66a[_0x2620c0(0x1ae)]%0x4==0x3||_0x1dd66a[_0x2620c0(0x1ae)]%0x3==0x1?0x4:0x3;let _0x15ec53=0x0;_0x1dd66a[_0x2620c0(0x26e)]((_0x4cffcb,_0x43bc8e)=>{const _0xae221a=_0x2620c0;if(_0x43bc8e%_0x5ef279==0x0)_0x4186aa=[];_0x4186aa[_0xae221a(0x140)]({'text':_0x4cffcb['botID']==_0xae221a(0x226)?_0xae221a(0x153):'Bot\x20'+_0x4cffcb[_0xae221a(0x27a)],'callback_data':_0x4cffcb['botID']}),_0x43bc8e%_0x5ef279==0x0&&(_0x503117[_0x15ec53]=_0x4186aa,_0x15ec53++);}),tgBot['sendMessage'](_0x536a6e[_0x2620c0(0xa7)]['id'],_0x2620c0(0x228),{'reply_markup':{'inline_keyboard':_0x503117}})[_0x2620c0(0xa5)](_0x961a98=>{telegramError(_0x961a98);}),tgBot['on']('callback_query',async _0x50cab1=>{const _0x2c43ca=_0x2620c0,_0x1897c9=_0x50cab1['data'],_0x23dcb3=_0x50cab1['message'];tgBot[_0x2c43ca(0x141)](_0x50cab1['id'])[_0x2c43ca(0x225)](async()=>{const _0x32c6a9=_0x2c43ca;_0x1897c9==_0x32c6a9(0x226)?config[_0x32c6a9(0x26e)](_0x3a02f7=>{const _0x49a87a=_0x32c6a9;restartBot(_0x3a02f7[_0x49a87a(0x27a)]);}):restartBot(_0x1897c9);}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/on/,_0x37c6f6=>{const _0x4a5f79=_0x542e9f;if(!validateTelegram(_0x37c6f6))return;tgBot[_0x4a5f79(0x169)](_0x4a5f79(0x231));const _0x54a010=getDisabledBots();if(_0x54a010['length']==0x0)tgBot[_0x4a5f79(0x120)](_0x37c6f6['chat']['id'],_0x4a5f79(0xfb))['catch'](_0x559f66=>{telegramError(_0x559f66);});else{if(_0x54a010[_0x4a5f79(0x1ae)]>0x1)_0x54a010['push']({'botID':_0x4a5f79(0x226)});let _0x2f4048=[],_0x14848b=[];const _0x396476=_0x54a010[_0x4a5f79(0x1ae)]%0x4==0x0||_0x54a010[_0x4a5f79(0x1ae)]%0x4==0x3||_0x54a010[_0x4a5f79(0x1ae)]%0x3==0x1?0x4:0x3;let _0x5547c5=0x0;_0x54a010[_0x4a5f79(0x26e)]((_0x504740,_0x3722e2)=>{const _0x68219d=_0x4a5f79;if(_0x3722e2%_0x396476==0x0)_0x14848b=[];_0x14848b[_0x68219d(0x140)]({'text':_0x504740[_0x68219d(0x27a)]=='all'?'All\x20bots':'Bot\x20'+_0x504740[_0x68219d(0x27a)],'callback_data':_0x504740[_0x68219d(0x27a)]}),_0x3722e2%_0x396476==0x0&&(_0x2f4048[_0x5547c5]=_0x14848b,_0x5547c5++);}),tgBot[_0x4a5f79(0x120)](_0x37c6f6['chat']['id'],_0x4a5f79(0x287),{'reply_markup':{'inline_keyboard':_0x2f4048}})['catch'](_0xfc6c07=>{telegramError(_0xfc6c07);}),tgBot['on'](_0x4a5f79(0x231),async _0x3bc7c7=>{const _0x426f94=_0x4a5f79,_0x18ee02=_0x3bc7c7[_0x426f94(0x244)],_0x62dc6a=_0x3bc7c7[_0x426f94(0x271)];tgBot[_0x426f94(0x141)](_0x3bc7c7['id'])[_0x426f94(0x225)](async()=>{const _0x4a4ae9=_0x426f94;_0x18ee02==_0x4a4ae9(0x226)?(tgBot[_0x4a4ae9(0x120)](_0x62dc6a[_0x4a4ae9(0xa7)]['id'],_0x4a4ae9(0x260))[_0x4a4ae9(0xa5)](_0x186f93=>{telegramError(_0x186f93);}),_0x54a010[_0x4a4ae9(0x26e)](_0x59e387=>{const _0x1f9f4a=_0x4a4ae9;if(_0x59e387[_0x1f9f4a(0x27a)]!=_0x1f9f4a(0x226))toggleBot(_0x59e387[_0x1f9f4a(0x27a)],toggleStatus(_0x59e387['botID']),_0x1f9f4a(0x1e3));})):(tgBot[_0x4a4ae9(0x120)](_0x62dc6a[_0x4a4ae9(0xa7)]['id'],_0x4a4ae9(0x235)+_0x18ee02)['catch'](_0x6bf59a=>{telegramError(_0x6bf59a);}),toggleBot(_0x18ee02,toggleStatus(_0x18ee02),_0x4a4ae9(0x1e3)));}),tgBot[_0x426f94(0x169)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x2a6c2e=>{const _0x18ac52=_0x542e9f;if(!validateTelegram(_0x2a6c2e))return;tgBot['removeListener']('callback_query');const _0x1982df=getEnabledBots();if(_0x1982df['length']==0x0)tgBot['sendMessage'](_0x2a6c2e['chat']['id'],_0x18ac52(0x27c))[_0x18ac52(0xa5)](_0x3d2fd4=>{telegramError(_0x3d2fd4);});else{if(_0x1982df[_0x18ac52(0x1ae)]>0x1)_0x1982df[_0x18ac52(0x140)]({'botID':_0x18ac52(0x226)});let _0x4738ba=[],_0x35b9c1=[];const _0x55cfb8=_0x1982df[_0x18ac52(0x1ae)]%0x4==0x0||_0x1982df[_0x18ac52(0x1ae)]%0x4==0x3||_0x1982df[_0x18ac52(0x1ae)]%0x3==0x1?0x4:0x3;let _0x2b2ffb=0x0;_0x1982df[_0x18ac52(0x26e)]((_0x1c1e67,_0x507c66)=>{const _0x6ffb93=_0x18ac52;if(_0x507c66%_0x55cfb8==0x0)_0x35b9c1=[];_0x35b9c1['push']({'text':_0x1c1e67[_0x6ffb93(0x27a)]==_0x6ffb93(0x226)?_0x6ffb93(0x153):_0x6ffb93(0x1af)+_0x1c1e67[_0x6ffb93(0x27a)],'callback_data':_0x1c1e67['botID']}),_0x507c66%_0x55cfb8==0x0&&(_0x4738ba[_0x2b2ffb]=_0x35b9c1,_0x2b2ffb++);}),tgBot[_0x18ac52(0x120)](_0x2a6c2e['chat']['id'],_0x18ac52(0xe8),{'reply_markup':{'inline_keyboard':_0x4738ba}})[_0x18ac52(0xa5)](_0x56ed49=>{telegramError(_0x56ed49);}),tgBot['on'](_0x18ac52(0x231),async _0x12064e=>{const _0x112208=_0x18ac52,_0x4edfe2=_0x12064e[_0x112208(0x244)],_0x32f748=_0x12064e['message'];tgBot[_0x112208(0x141)](_0x12064e['id'])[_0x112208(0x225)](async()=>{const _0x253694=_0x112208;_0x4edfe2==_0x253694(0x226)?(tgBot[_0x253694(0x120)](_0x32f748['chat']['id'],_0x253694(0x123))['catch'](_0x50d932=>{telegramError(_0x50d932);}),_0x1982df['forEach'](_0x2ceb0a=>{const _0x256b2a=_0x253694;if(_0x2ceb0a['botID']!='all')toggleBot(_0x2ceb0a[_0x256b2a(0x27a)],toggleStatus(_0x2ceb0a[_0x256b2a(0x27a)]),'stopped');})):(tgBot[_0x253694(0x120)](_0x32f748['chat']['id'],_0x253694(0x181)+_0x4edfe2)[_0x253694(0xa5)](_0x2f73cd=>{telegramError(_0x2f73cd);}),toggleBot(_0x4edfe2,toggleStatus(_0x4edfe2),_0x253694(0x1e3)));}),tgBot[_0x112208(0x169)](_0x112208(0x231));});}}),tgBot[_0x542e9f(0x20d)](/\/metrics/,_0x4c0780=>{const _0x1b021e=_0x542e9f;if(!validateTelegram(_0x4c0780))return;tgBot['removeListener'](_0x1b021e(0x231));const _0xe3c70b=getEnabledBots();if(_0xe3c70b[_0x1b021e(0x1ae)]==0x0)tgBot[_0x1b021e(0x120)](_0x4c0780[_0x1b021e(0xa7)]['id'],_0x1b021e(0x27c))[_0x1b021e(0xa5)](_0x212c3f=>{telegramError(_0x212c3f);});else{if(_0xe3c70b['length']>0x1){let _0x1ad84e=[],_0x27cb37=[];const _0x41f43f=_0xe3c70b[_0x1b021e(0x1ae)]%0x4==0x0||_0xe3c70b[_0x1b021e(0x1ae)]%0x4==0x3||_0xe3c70b['length']%0x3==0x1?0x4:0x3;let _0x487134=0x0;_0xe3c70b[_0x1b021e(0x26e)]((_0x25a815,_0x3b2e5c)=>{const _0x3ec8d5=_0x1b021e;if(_0x3b2e5c%_0x41f43f==0x0)_0x27cb37=[];_0x27cb37[_0x3ec8d5(0x140)]({'text':_0x3ec8d5(0x1af)+_0x25a815[_0x3ec8d5(0x27a)],'callback_data':_0x25a815[_0x3ec8d5(0x27a)]}),_0x3b2e5c%_0x41f43f==0x0&&(_0x1ad84e[_0x487134]=_0x27cb37,_0x487134++);}),tgBot[_0x1b021e(0x120)](_0x4c0780[_0x1b021e(0xa7)]['id'],_0x1b021e(0x196),{'reply_markup':{'inline_keyboard':_0x1ad84e}})[_0x1b021e(0xa5)](_0x1f3957=>{telegramError(_0x1f3957);}),tgBot['on'](_0x1b021e(0x231),async _0x1227fd=>{const _0xd0f88=_0x1b021e,_0x371a3a=_0x1227fd[_0xd0f88(0x244)],_0x1c5cc5=_0x1227fd[_0xd0f88(0x271)];tgBot[_0xd0f88(0x141)](_0x1227fd['id'])[_0xd0f88(0x225)](async()=>{const _0x42d1aa=_0xd0f88;if(pid[_0x371a3a])pid[_0x371a3a][_0x42d1aa(0xa6)]({'function':_0x42d1aa(0xaa),'args':null});}),tgBot[_0xd0f88(0x169)](_0xd0f88(0x231));});}else{const _0x55f4d4=_0xe3c70b[0x0][_0x1b021e(0x27a)];if(pid[_0x55f4d4])pid[_0x55f4d4][_0x1b021e(0xa6)]({'function':_0x1b021e(0xaa),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x1fa328=>{const _0x430db8=_0x542e9f;if(!validateTelegram(_0x1fa328))return;tgBot[_0x430db8(0x169)](_0x430db8(0x231));const _0x475fc1=getEnabledBots();if(_0x475fc1[_0x430db8(0x1ae)]==0x0)tgBot[_0x430db8(0x120)](_0x1fa328[_0x430db8(0xa7)]['id'],_0x430db8(0x27c))[_0x430db8(0xa5)](_0x1f3854=>{telegramError(_0x1f3854);});else{if(_0x475fc1['length']>0x1){let _0x344cb9=[],_0x292808=[];const _0x238bf0=_0x475fc1[_0x430db8(0x1ae)]%0x4==0x0||_0x475fc1[_0x430db8(0x1ae)]%0x4==0x3||_0x475fc1[_0x430db8(0x1ae)]%0x3==0x1?0x4:0x3;let _0xe4b07e=0x0;_0x475fc1[_0x430db8(0x26e)]((_0xe3bbbd,_0x19962c)=>{const _0x4a18c8=_0x430db8;if(_0x19962c%_0x238bf0==0x0)_0x292808=[];_0x292808[_0x4a18c8(0x140)]({'text':_0x4a18c8(0x1af)+_0xe3bbbd[_0x4a18c8(0x27a)],'callback_data':_0xe3bbbd['botID']}),_0x19962c%_0x238bf0==0x0&&(_0x344cb9[_0xe4b07e]=_0x292808,_0xe4b07e++);}),tgBot[_0x430db8(0x120)](_0x1fa328['chat']['id'],_0x430db8(0x23a),{'reply_markup':{'inline_keyboard':_0x344cb9}})[_0x430db8(0xa5)](_0x2dc43a=>{telegramError(_0x2dc43a);}),tgBot['on'](_0x430db8(0x231),async _0x18c3c3=>{const _0xa498e3=_0x430db8,_0x389cea=_0x18c3c3[_0xa498e3(0x244)],_0xe115ec=_0x18c3c3[_0xa498e3(0x271)];tgBot[_0xa498e3(0x141)](_0x18c3c3['id'])[_0xa498e3(0x225)](async()=>{const _0x3797a9=_0xa498e3;if(pid[_0x389cea])pid[_0x389cea][_0x3797a9(0xa6)]({'function':_0x3797a9(0x26b),'args':null});}),tgBot[_0xa498e3(0x169)](_0xa498e3(0x231));});}else{const _0x56d866=_0x475fc1[0x0][_0x430db8(0x27a)];if(pid[_0x56d866])pid[_0x56d866]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x3cda5f=>{const _0x1dbbec=_0x542e9f;if(!validateTelegram(_0x3cda5f))return;tgBot[_0x1dbbec(0x169)](_0x1dbbec(0x231)),await getMessages();if(!updateAvailable)tgBot[_0x1dbbec(0x120)](_0x3cda5f['chat']['id'],_0x1dbbec(0x1d8))[_0x1dbbec(0xa5)](_0x33aeff=>{telegramError(_0x33aeff);});else!validInstallation?tgBot[_0x1dbbec(0x120)](_0x3cda5f[_0x1dbbec(0xa7)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x1dbbec(0xa5)](_0xf8d2b3=>{telegramError(_0xf8d2b3);}):(tgBot[_0x1dbbec(0x120)](_0x3cda5f['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1dbbec(0x1b1),'callback_data':_0x1dbbec(0x1b8)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x3855a1=>{telegramError(_0x3855a1);}),tgBot['on'](_0x1dbbec(0x231),async _0x55327d=>{const _0x3a5e98=_0x1dbbec,_0x48a570=_0x55327d[_0x3a5e98(0x244)],_0x70ed90=_0x55327d['message'];tgBot[_0x3a5e98(0x141)](_0x55327d['id'])['then'](async()=>{const _0x485690=_0x3a5e98;_0x48a570==_0x485690(0x1b8)&&(await tgBot[_0x485690(0x120)](_0x70ed90[_0x485690(0xa7)]['id'],_0x485690(0x111))['catch'](_0x49e7f0=>{telegramError(_0x49e7f0);}),updateBB('update')),_0x48a570=='no'&&await tgBot['sendMessage'](_0x70ed90['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')['catch'](_0x1cdda0=>{telegramError(_0x1cdda0);});}),tgBot[_0x3a5e98(0x169)](_0x3a5e98(0x231));}));}),tgBot[_0x542e9f(0x20d)](/\/reinstall/,async _0x2a62ac=>{const _0x12ee77=_0x542e9f;if(!validateTelegram(_0x2a62ac))return;tgBot[_0x12ee77(0x169)](_0x12ee77(0x231)),!validInstallation?tgBot[_0x12ee77(0x120)](_0x2a62ac[_0x12ee77(0xa7)]['id'],_0x12ee77(0xb4))[_0x12ee77(0xa5)](_0x25c42e=>{telegramError(_0x25c42e);}):(tgBot[_0x12ee77(0x120)](_0x2a62ac[_0x12ee77(0xa7)]['id'],_0x12ee77(0x10c),{'reply_markup':{'inline_keyboard':[[{'text':_0x12ee77(0x1b1),'callback_data':_0x12ee77(0x1b8)},{'text':'No','callback_data':'no'}]]}})[_0x12ee77(0xa5)](_0xe2e832=>{telegramError(_0xe2e832);}),tgBot['on'](_0x12ee77(0x231),async _0x59d9a8=>{const _0x4cd414=_0x12ee77,_0x768485=_0x59d9a8[_0x4cd414(0x244)],_0x72ee76=_0x59d9a8['message'];tgBot['answerCallbackQuery'](_0x59d9a8['id'])[_0x4cd414(0x225)](async()=>{const _0x27373f=_0x4cd414;_0x768485==_0x27373f(0x1b8)&&(await tgBot[_0x27373f(0x120)](_0x72ee76['chat']['id'],_0x27373f(0x13a))[_0x27373f(0xa5)](_0x1d9284=>{telegramError(_0x1d9284);}),updateBB(_0x27373f(0x14f))),_0x768485=='no'&&await tgBot[_0x27373f(0x120)](_0x72ee76[_0x27373f(0xa7)]['id'],_0x27373f(0x145))['catch'](_0x549769=>{telegramError(_0x549769);});}),tgBot[_0x4cd414(0x169)]('callback_query');}));}),tgBot[_0x542e9f(0x20d)](/\/toggle/,_0x27325e=>{const _0x9099bc=_0x542e9f;if(!validateTelegram(_0x27325e))return;tgBot[_0x9099bc(0x169)]('callback_query');const _0x54a7bb=getBotsWithMode();if(_0x54a7bb[_0x9099bc(0x1ae)]==0x0)tgBot['sendMessage'](_0x27325e['chat']['id'],_0x9099bc(0x27c))[_0x9099bc(0xa5)](_0xc19088=>{telegramError(_0xc19088);});else{let _0x498e18=[],_0x4c2d26=[];const _0xf4aa63=0x2;let _0x19abc2=0x0;_0x54a7bb['forEach']((_0x5035a2,_0x4b8340)=>{const _0x544a18=_0x9099bc;if(_0x4b8340%_0xf4aa63==0x0)_0x4c2d26=[];_0x4c2d26[_0x544a18(0x140)]({'text':'Bot\x20'+_0x5035a2[_0x544a18(0x27a)]+'\x20('+_0x5035a2[_0x544a18(0x172)]+')','callback_data':_0x5035a2[_0x544a18(0x27a)]}),_0x4b8340%_0xf4aa63==0x0&&(_0x498e18[_0x19abc2]=_0x4c2d26,_0x19abc2++);}),tgBot[_0x9099bc(0x120)](_0x27325e['chat']['id'],_0x9099bc(0x22b),{'reply_markup':{'inline_keyboard':_0x498e18}})[_0x9099bc(0xa5)](_0x5201ae=>{telegramError(_0x5201ae);}),tgBot['on'](_0x9099bc(0x231),async _0x3b3aa1=>{const _0x576e26=_0x9099bc,_0x207a2d=_0x3b3aa1[_0x576e26(0x244)],_0x1be2a7=_0x3b3aa1[_0x576e26(0x271)];tgBot['answerCallbackQuery'](_0x3b3aa1['id'])[_0x576e26(0x225)](async()=>{const _0x2f263f=_0x576e26,_0x15a9a4=_0x54a7bb[_0x2f263f(0x280)](_0x34aaca=>_0x34aaca['botID']==_0x207a2d),_0x2cae00=_0x15a9a4[_0x2f263f(0x172)]==_0x2f263f(0x203)?_0x2f263f(0x1b0):_0x2f263f(0x203);tgBot[_0x2f263f(0x120)](_0x1be2a7['chat']['id'],_0x2f263f(0x1ba)+_0x207a2d+_0x2f263f(0x24b)+_0x2cae00+_0x2f263f(0x16e))[_0x2f263f(0xa5)](_0x44b12c=>{telegramError(_0x44b12c);}),toggleBotMode(_0x207a2d);}),tgBot[_0x576e26(0x169)](_0x576e26(0x231));});}}),tgBot['onText'](/\/names/,_0x20ed86=>{const _0x7d7bdb=_0x542e9f;if(!validateTelegram(_0x20ed86))return;let _0x2ef5e4='';config[_0x7d7bdb(0x26e)](_0x23cbec=>{const _0xa5aceb=_0x7d7bdb;_0x2ef5e4+=_0xa5aceb(0x1af)+_0x23cbec['botID']+':\x20'+_0x23cbec[_0xa5aceb(0x1e8)]+'\x0a';}),tgBot[_0x7d7bdb(0x120)](_0x20ed86[_0x7d7bdb(0xa7)]['id'],_0x2ef5e4,{'parse_mode':_0x7d7bdb(0x1ff)})[_0x7d7bdb(0xa5)](_0x9c09f2=>{telegramError(_0x9c09f2);});}),tgBot[_0x542e9f(0x20d)](/\/disable/,_0x33bdc4=>{const _0x12a915=_0x542e9f;if(!validateTelegram(_0x33bdc4))return;tgBot['sendMessage'](_0x33bdc4[_0x12a915(0xa7)]['id'],_0x12a915(0x16c))[_0x12a915(0xa5)](_0x1c1fe2=>{telegramError(_0x1c1fe2);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x4c1981=>{const _0x3a54c2=_0x542e9f;if(!validateTelegram(_0x4c1981))return;tgBot[_0x3a54c2(0x120)](_0x4c1981[_0x3a54c2(0xa7)]['id'],_0x132a18)[_0x3a54c2(0xa5)](_0x5ddbdd=>{telegramError(_0x5ddbdd);});}),tgBot['on'](_0x542e9f(0x178),_0x6748a5=>{const _0x21c189=_0x542e9f;_0x6748a5[_0x21c189(0x17e)]()[_0x21c189(0x18f)]('404\x20Not\x20Found')&&(logger['full'](_0x21c189(0xf9)),tgBot[_0x21c189(0xae)](),tgBot=null,io['to'](_0x21c189(0xf4))[_0x21c189(0x173)](_0x21c189(0x1c5),_0x21c189(0xf9)));}),process[_0x542e9f(0x16b)](_0x542e9f(0x255),()=>{const _0x4283c0=_0x542e9f;if(tgBot)tgBot['stopPolling']();process[_0x4283c0(0x15d)](0x1);}),process['once'](_0x542e9f(0x163),()=>{const _0x2b233b=_0x542e9f;if(tgBot)tgBot[_0x2b233b(0xae)]();process[_0x2b233b(0x15d)](0x1);});}}function disableTelegram(){const _0x40ce09=_0x446078;tgBot&&(tgBot[_0x40ce09(0xae)](),tgBot=null);}function sendTelegram(_0x289226,_0x2b92ae){const _0x28acbc=_0x446078;if(settings[_0x28acbc(0x1cd)]){if(settings[_0x28acbc(0x277)]=='all'||(_0x2b92ae[_0x28acbc(0x264)]==_0x28acbc(0x179)||_0x2b92ae[_0x28acbc(0x264)]==_0x28acbc(0x27f)||_0x2b92ae[_0x28acbc(0x264)]==_0x28acbc(0x1ad))&&settings['telegramEvents']==_0x28acbc(0x276)||_0x2b92ae[_0x28acbc(0x264)]==_0x28acbc(0x1a6)&&settings[_0x28acbc(0x277)]=='orders'){if(tgBot&&settings[_0x28acbc(0x285)]){if(_0x2b92ae[_0x28acbc(0x23d)])tgBot[_0x28acbc(0x120)](settings[_0x28acbc(0x285)],_0x2b92ae[_0x28acbc(0x1e8)]+_0x28acbc(0x157)+_0x2b92ae[_0x28acbc(0x1be)])['catch'](_0x31527c=>{telegramError(_0x31527c);});else tgBot[_0x28acbc(0x120)](settings[_0x28acbc(0x285)],_0x28acbc(0x1af)+_0x289226+_0x28acbc(0x157)+_0x2b92ae[_0x28acbc(0x1be)])[_0x28acbc(0xa5)](_0x288f10=>{telegramError(_0x288f10);});}}}}async function sendTelegramMsg(_0x482b3e,_0x4897da=_0x446078(0x1ff)){const _0x1dadd0=_0x446078;return settings[_0x1dadd0(0x1cd)]&&tgBot&&settings[_0x1dadd0(0x285)]?(await tgBot[_0x1dadd0(0x120)](settings[_0x1dadd0(0x285)],_0x482b3e,{'parse_mode':_0x4897da})[_0x1dadd0(0xa5)](_0x45aa99=>{telegramError(_0x45aa99);}),!![]):![];}function getDeviceWithIp(_0x42cd74){const _0x54fa60=_0x446078;return devices[_0x54fa60(0x280)](_0x3552da=>_0x3552da['ip']===_0x42cd74);}function temporaryAccess2FA(_0x17d318,_0x3458a4){const _0x1d3e70=_0x446078;let _0x5ce3d7=new Date(),_0x11586d=![];if(lastIpApproval){if(_0x5ce3d7-lastIpApproval<0x1388)_0x11586d=!![];}lastIpApproval=new Date();if(_0x11586d)return;tgBot&&settings[_0x1d3e70(0x285)]&&(tgBot[_0x1d3e70(0x169)](_0x1d3e70(0x231)),tgBot[_0x1d3e70(0x120)](settings[_0x1d3e70(0x285)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3458a4)[_0x1d3e70(0x17f)]+_0x1d3e70(0xdf),{'parse_mode':_0x1d3e70(0x1ff),'reply_markup':{'inline_keyboard':[[{'text':_0x1d3e70(0x11b),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x1d3e70(0x1fc),'callback_data':'reject'}]]}})[_0x1d3e70(0xa5)](_0x236757=>{telegramError(_0x236757);}),tgBot['on'](_0x1d3e70(0x231),async _0x42f990=>{const _0x47581e=_0x1d3e70,_0x38305b=_0x42f990['data'],_0x472046=_0x42f990[_0x47581e(0x271)];tgBot[_0x47581e(0x141)](_0x42f990['id'])['then'](async()=>{const _0x283f71=_0x47581e;devices[_0x17d318][_0x283f71(0x180)]={'clientip':_0x3458a4,'timestamp':new Date()[_0x283f71(0x1c0)](),'expiry':_0x38305b},_0x38305b!='reject'?(await tgBot[_0x283f71(0x120)](_0x472046['chat']['id'],_0x283f71(0xa9)+_0x38305b+_0x283f71(0x1bc),{'parse_mode':'HTML'})['catch'](_0x5d29ac=>{telegramError(_0x5d29ac);}),io['to'](_0x17d318)[_0x283f71(0x173)](_0x283f71(0x1d4),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x283f71(0x120)](_0x472046[_0x283f71(0xa7)]['id'],'Temporary\x20access\x20rejected')[_0x283f71(0xa5)](_0x74b42c=>{telegramError(_0x74b42c);}),io['to'](_0x17d318)[_0x283f71(0x173)](_0x283f71(0x1d4),{'access':{'allow':![],'reason':_0x283f71(0x1a9),'token':null}}));}),tgBot[_0x47581e(0x169)](_0x47581e(0x231));}));}function loginAccess2FA(_0x11c8e1,_0x1cb018){const _0x50c59f=_0x446078;tgBot&&settings['telegramChatId']&&(tgBot[_0x50c59f(0x169)]('callback_query'),tgBot[_0x50c59f(0x120)](settings[_0x50c59f(0x285)],_0x50c59f(0x1e1)+normalizeIP(_0x1cb018)[_0x50c59f(0x17f)]+_0x50c59f(0xdf),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x50c59f(0x16f),'callback_data':loginExpiry},{'text':_0x50c59f(0x1fc),'callback_data':_0x50c59f(0x1fc)}]]}})['catch'](_0x1e2b20=>{telegramError(_0x1e2b20);}),tgBot['on'](_0x50c59f(0x231),async _0x1c7ecc=>{const _0x27f117=_0x50c59f,_0x1609dc=_0x1c7ecc[_0x27f117(0x244)],_0x1d8e2a=_0x1c7ecc['message'];tgBot[_0x27f117(0x141)](_0x1c7ecc['id'])[_0x27f117(0x225)](async()=>{const _0x3ac361=_0x27f117;devices[_0x11c8e1]['telegram2FaApproval']={'clientip':_0x1cb018,'timestamp':new Date()['getTime'](),'expiry':_0x1609dc},_0x1609dc!=_0x3ac361(0x1fc)?(await tgBot[_0x3ac361(0x120)](_0x1d8e2a['chat']['id'],_0x3ac361(0x17a),{'parse_mode':_0x3ac361(0x1ff)})['catch'](_0x3031b9=>{telegramError(_0x3031b9);}),io['to'](_0x11c8e1)[_0x3ac361(0x173)](_0x3ac361(0x1d4),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3ac361(0x120)](_0x1d8e2a['chat']['id'],_0x3ac361(0x167))[_0x3ac361(0xa5)](_0x2eaa5a=>{telegramError(_0x2eaa5a);}),io['to'](_0x11c8e1)[_0x3ac361(0x173)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x54d8b0=_0x446078;return dbConfig[_0x54d8b0(0x21a)](_0x54d8b0(0x20b))[_0x54d8b0(0x12c)](_0x54d8b0(0x27a))[_0x54d8b0(0x1d5)]({'status':_0x54d8b0(0x283)})[_0x54d8b0(0x137)]()||[];}function getDisabledBots(){const _0x488e85=_0x446078;return dbConfig[_0x488e85(0x21a)](_0x488e85(0x20b))[_0x488e85(0x12c)]('botID')[_0x488e85(0x1d5)]({'status':'disabled'})[_0x488e85(0x137)]()||[];}function getBotAttributes(_0x5dd27a){const _0x3c3f7b=_0x446078;let _0x651207={};const _0x26592f=configpath+_0x3c3f7b(0x131)+_0x5dd27a+_0x3c3f7b(0x116),_0x18dabe=fs[_0x3c3f7b(0xd0)](_0x26592f);if(_0x18dabe){const _0x122998=fs['readFileSync'](_0x26592f);try{const _0x579a2d=JSON['parse'](_0x122998),_0x198a6a=_0x579a2d?_0x579a2d['bot'][0x0][_0x3c3f7b(0xeb)]:![];_0x651207[_0x3c3f7b(0x172)]=_0x198a6a?_0x3c3f7b(0x203):_0x3c3f7b(0x1b0),_0x651207[_0x3c3f7b(0x1e8)]=_0x579a2d?_0x579a2d[_0x3c3f7b(0xe9)][0x0][_0x3c3f7b(0x1e8)]:'Bot\x20'+_0x5dd27a;}catch(_0x4c84cb){_0x651207['mode']=_0x3c3f7b(0x1b0),_0x651207[_0x3c3f7b(0x1e8)]=_0x3c3f7b(0x1af)+_0x5dd27a;}}else _0x651207[_0x3c3f7b(0x172)]=_0x3c3f7b(0x1b0),_0x651207['botname']=_0x3c3f7b(0x1af)+_0x5dd27a;return _0x651207;}function getBotsWithMode(){const _0x2ff6ec=_0x446078,_0x5511cb=dbConfig['get'](_0x2ff6ec(0x20b))[_0x2ff6ec(0x12c)]('botID')['value']()||[];return _0x5511cb['forEach'](_0x33756a=>{const _0x4b69c4=_0x2ff6ec;let _0x166005=getBotAttributes(_0x33756a[_0x4b69c4(0x27a)]);_0x33756a[_0x4b69c4(0x172)]=_0x166005[_0x4b69c4(0x172)];}),_0x5511cb;}function getBotExchanges(){const _0x9c1526=_0x446078;let _0x3f41b3=[];const _0x7f3c37=dbConfig[_0x9c1526(0x21a)]('bots')[_0x9c1526(0x12c)](_0x9c1526(0x27a))[_0x9c1526(0x137)]()||[];_0x7f3c37['forEach'](_0x1d9da2=>{const _0x35aa0c=_0x9c1526;if(_0x1d9da2[_0x35aa0c(0x1d4)]==_0x35aa0c(0x283)){const _0x6b6f0e=configpath+_0x35aa0c(0x131)+_0x1d9da2[_0x35aa0c(0x27a)]+_0x35aa0c(0x116),_0x31a8be=fs[_0x35aa0c(0xd0)](_0x6b6f0e);let _0x2af9b6;if(_0x31a8be){const _0x1c560c=fs[_0x35aa0c(0x10d)](_0x6b6f0e);try{const _0x517868=JSON['parse'](_0x1c560c);_0x2af9b6=_0x517868?_0x517868[_0x35aa0c(0xe9)][0x0]['exchange']:null;}catch(_0x1dcb69){}}if(_0x2af9b6)_0x3f41b3[_0x35aa0c(0x140)](_0x2af9b6);}});const _0xc3c886=[...new Set(_0x3f41b3)][_0x9c1526(0x266)]();return _0xc3c886;}async function initUser(){const _0x52cf59=_0x446078;if(!settings[_0x52cf59(0x194)]){const _0x286ba4=uuidRandom();mixpanel['alias'](_0x286ba4),updateSetting(_0x52cf59(0x194),_0x286ba4);}}async function initSecure(){const _0x2a5fa4=_0x446078;let _0x213675=getSecure();if(!_0x213675['hasOwnProperty']('secret')){let _0x2ed4ca=await generateKeys();_0x213675['publicKey']=_0x2ed4ca[_0x2a5fa4(0x195)],_0x213675[_0x2a5fa4(0x10f)]=_0x2ed4ca[_0x2a5fa4(0x10f)],_0x213675[_0x2a5fa4(0x197)]=crypto[_0x2a5fa4(0x1cb)](0x20)['toString'](_0x2a5fa4(0x1dc));;storeSecure(_0x213675);}}function getSettings(){const _0x6c2b20=_0x446078;return dbSettings['get']('settings')[_0x6c2b20(0x137)]()||{};}function getSecure(){const _0x39f923=_0x446078;return dbSecure['get']('secure')[_0x39f923(0x137)]()||{};}function getBlacklist(){const _0x6036d6=_0x446078;return dbSecure[_0x6036d6(0x21a)](_0x6036d6(0x1dd))[_0x6036d6(0x137)]()||[];}function broadcastToBots(_0x399b4e,_0x400e8c){const _0x400c8b=_0x446078;config[_0x400c8b(0x26e)](_0x452bb0=>{const _0x523016=_0x400c8b;if(_0x452bb0[_0x523016(0x1d4)]==_0x523016(0x283)&&_0x452bb0[_0x523016(0x199)]==_0x523016(0x126)||_0x452bb0[_0x523016(0x1d4)]=='new'&&_0x452bb0[_0x523016(0x199)]==_0x523016(0x126)){if(pid[_0x452bb0[_0x523016(0x27a)]])pid[_0x452bb0['botID']][_0x523016(0xa6)]({[_0x399b4e]:_0x400e8c});}});}function storeSettings(_0x23cb5f,_0x3aa1e3=![]){const _0x38550b=_0x446078;_0x23cb5f={...settings,..._0x23cb5f};if(_0x3aa1e3&&_0x23cb5f[_0x38550b(0x219)]!='************'&&_0x23cb5f[_0x38550b(0x219)]!=_0x38550b(0x1f5)&&_0x23cb5f[_0x38550b(0x219)]!=''){const _0x2e4166=crypt[_0x38550b(0xc2)](secure[_0x38550b(0x10f)],_0x23cb5f['bbPassword'])['message'][_0x38550b(0x1a4)]('@')[0x0],_0x24f221=bcrypt['hashSync'](_0x2e4166,saltRounds);_0x23cb5f={..._0x23cb5f,'bbPassword':_0x24f221};}if(_0x3aa1e3&&_0x23cb5f['telegramToken']!=_0x38550b(0x115)&&_0x23cb5f[_0x38550b(0x154)]!=_0x38550b(0x1f5)&&_0x23cb5f['telegramToken']!=''){const _0x39830d=crypt[_0x38550b(0xc2)](secure[_0x38550b(0x10f)],_0x23cb5f[_0x38550b(0x154)])[_0x38550b(0x271)][_0x38550b(0x1a4)]('@')[0x0];_0x23cb5f={..._0x23cb5f,'telegramToken':_0x39830d};}const _0x337ed8=_0x23cb5f['telegramToken']!=_0x38550b(0x115)&&_0x23cb5f[_0x38550b(0x154)]!=settings[_0x38550b(0x154)]||_0x23cb5f[_0x38550b(0x1e9)]!=settings['telegramUsername'],_0x1ea1b6=_0x23cb5f[_0x38550b(0x154)]==''||_0x23cb5f[_0x38550b(0x1e9)]=='';if(_0x337ed8)_0x23cb5f[_0x38550b(0x277)]='all';for(const [_0x74d4cd,_0x5ab152]of Object[_0x38550b(0xe7)](_0x23cb5f)){if(_0x74d4cd==_0x38550b(0x154)&&_0x5ab152==_0x38550b(0x115)){_0x23cb5f[_0x38550b(0x154)]=settings['telegramToken'];continue;};if(_0x74d4cd==_0x38550b(0x219)&&_0x5ab152==_0x38550b(0x115)){_0x23cb5f[_0x38550b(0x219)]=settings['bbPassword'];continue;};dbSettings['set']('settings.'+_0x74d4cd,_0x5ab152)[_0x38550b(0x12f)]();}settings=_0x23cb5f,io['to'](_0x38550b(0xf4))[_0x38550b(0x173)]('settings',cleanSettings()),broadcastToBots(_0x38550b(0x162),settings[_0x38550b(0x162)]),broadcastToBots(_0x38550b(0x17c),settings[_0x38550b(0x17c)]);if(_0x337ed8&&!_0x1ea1b6)initTelegram();if(_0x337ed8&&_0x1ea1b6)disableTelegram();getAllClients()['forEach'](_0x1c49dd=>{const _0x4cb7ab=_0x38550b;getSocket(_0x1c49dd['id'])['emit'](_0x4cb7ab(0x1d4),{'access':{'allow':![],'reason':_0x4cb7ab(0xc6),'token':null}});});}function updateSetting(_0x2ba34b,_0x2a1db6){const _0x69b41=_0x446078;dbSettings[_0x69b41(0x14b)](_0x69b41(0x13f)+_0x2ba34b,_0x2a1db6)[_0x69b41(0x12f)](),settings=getSettings(),io['to']('botmanager')[_0x69b41(0x173)](_0x69b41(0x214),cleanSettings());}function storeSecure(_0x1deb04){const _0x287bf3=_0x446078;dbSecure[_0x287bf3(0x21a)](_0x287bf3(0x158))['push'](_0x1deb04)[_0x287bf3(0x12f)](),secure=_0x1deb04;}function addBlacklist(_0x415aa8){const _0x5f15c3=_0x446078;cleanBlacklist();let _0x48fe59;devices[_0x415aa8][_0x5f15c3(0x180)]?_0x48fe59=Math[_0x5f15c3(0xb3)](devices[_0x415aa8][_0x5f15c3(0x180)]['expiry'],loginExpiry):_0x48fe59=loginExpiry,dbSecure['get'](_0x5f15c3(0x1dd))[_0x5f15c3(0x140)]({'expiry':new Date()[_0x5f15c3(0x1c0)]()+_0x48fe59*0x3c*0x3e8,'token':devices[_0x415aa8][_0x5f15c3(0x18b)][_0x5f15c3(0x104)]})[_0x5f15c3(0x12f)](),blacklist=dbSecure[_0x5f15c3(0x21a)](_0x5f15c3(0x1dd))[_0x5f15c3(0x137)]();}function cleanBlacklist(){const _0x34e3ef=_0x446078;let _0x1694b8=dbSecure['get']('blacklist')[_0x34e3ef(0xfc)]()[_0x34e3ef(0x137)](),_0x192b7a=new Date()[_0x34e3ef(0x1c0)]();_0x1694b8[_0x34e3ef(0x26e)](_0xb97e77=>{const _0x49e653=_0x34e3ef;_0xb97e77[_0x49e653(0xea)]<_0x192b7a&&dbSecure[_0x49e653(0x21a)]('blacklist')[_0x49e653(0x132)]({'expiry':_0xb97e77[_0x49e653(0xea)]})[_0x49e653(0x12f)]();});}function initStates(){let _0x1de081=getConfiguration();_0x1de081['forEach'](_0x47b1dd=>{const _0x97964d=_0xc48b;_0x47b1dd[_0x97964d(0x199)]=_0x97964d(0x1e3);}),storeConfiguration(_0x1de081);}function onKeys(){const _0x2f1efb=new RSA();return new Promise(_0x5d9c18=>{const _0x261e0e=_0xc48b;_0x2f1efb['generateKeyPairAsync']()[_0x261e0e(0x225)](_0x44b61c=>{_0x5d9c18(_0x44b61c);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3db9db=_0x446078;let _0x39ff24=getSettings(),_0x5d4e03=![];!_0x39ff24[_0x3db9db(0x25c)](_0x3db9db(0x274))&&(_0x39ff24[_0x3db9db(0x274)]=0x0,_0x5d4e03=!![]);!_0x39ff24['hasOwnProperty']('lastmsgemitted')&&(_0x39ff24[_0x3db9db(0x204)]=0x0,_0x5d4e03=!![]);!_0x39ff24['hasOwnProperty'](_0x3db9db(0x12d))&&(_0x39ff24[_0x3db9db(0x12d)]='0.0.0',_0x5d4e03=!![]);!_0x39ff24['hasOwnProperty'](_0x3db9db(0x17c))&&(_0x39ff24[_0x3db9db(0x17c)]=![],_0x5d4e03=!![]);if(_0x5d4e03)storeSettings(_0x39ff24);try{fs[_0x3db9db(0x26a)](configbackuppath,{'withFileTypes':!![]})[_0x3db9db(0x26e)](_0x6c5eea=>{const _0x33b08e=_0x3db9db;if(!_0x6c5eea[_0x33b08e(0x24f)]()){if(!_0x6c5eea[_0x33b08e(0x21b)][_0x33b08e(0x22a)]('backup-full@'))fs[_0x33b08e(0x1fd)](configbackuppath+_0x6c5eea[_0x33b08e(0x21b)]);}else fs[_0x33b08e(0x268)](configbackuppath+_0x6c5eea[_0x33b08e(0x21b)],{'recursive':!![]});});}catch(_0x404a9e){logger['debug'](_0x3db9db(0x25f),_0x404a9e);}}function storeConfiguration(_0x51cc90){const _0x2c3c69=_0x446078;dbConfig[_0x2c3c69(0x21a)]('bots')['remove']()['write'](),_0x51cc90[_0x2c3c69(0x26e)](_0x5db7b2=>{const _0x411d7b=_0x2c3c69;delete _0x5db7b2[_0x411d7b(0x172)];}),dbConfig[_0x2c3c69(0x21a)]('bots')[_0x2c3c69(0x140)](..._0x51cc90)[_0x2c3c69(0x12f)](),config=_0x51cc90;}function resetPassword(){const _0x2670f2=_0x446078;tgBot&&settings[_0x2670f2(0x285)]&&(tgBot[_0x2670f2(0x169)]('callback_query'),tgBot['sendMessage'](settings[_0x2670f2(0x285)],_0x2670f2(0xad),{'parse_mode':_0x2670f2(0x1ff),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2670f2(0x1b8)},{'text':'no','callback_data':'no'}]]}})[_0x2670f2(0xa5)](_0x2c7d14=>{telegramError(_0x2c7d14);}),tgBot['on']('callback_query',async _0x74b01a=>{const _0x532f5b=_0x2670f2,_0x6e9626=_0x74b01a[_0x532f5b(0x244)],_0x1f5358=_0x74b01a[_0x532f5b(0x271)];tgBot[_0x532f5b(0x141)](_0x74b01a['id'])[_0x532f5b(0x225)](async()=>{const _0x23c29d=_0x532f5b;if(_0x6e9626!='no'){const _0x781685=0xf,_0x32cda5='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x1874db=Array[_0x23c29d(0x12b)](crypto[_0x23c29d(0x15c)](new Uint32Array(_0x781685)))['map'](_0xd3d957=>_0x32cda5[_0xd3d957%_0x32cda5[_0x23c29d(0x1ae)]])[_0x23c29d(0xc0)](''),_0x1b4e6c=bcrypt[_0x23c29d(0x240)](_0x1874db,saltRounds);storeSettings({'bbPassword':_0x1b4e6c}),await tgBot[_0x23c29d(0x120)](_0x1f5358[_0x23c29d(0xa7)]['id'],_0x23c29d(0x242)+_0x1874db,{'parse_mode':'HTML'})['catch'](_0x3f8d50=>{telegramError(_0x3f8d50);});}else await tgBot[_0x23c29d(0x120)](_0x1f5358[_0x23c29d(0xa7)]['id'],'Password\x20reset\x20rejected')[_0x23c29d(0xa5)](_0x3fa1b9=>{telegramError(_0x3fa1b9);});}),tgBot[_0x532f5b(0x169)]('callback_query');}));}async function confirmRestore(_0x4102eb,_0x48a3de){const _0x24abeb=_0x446078;io['to']('botmanager')[_0x24abeb(0x173)](_0x24abeb(0x1c5),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x24abeb(0x1ad)),tgBot&&settings[_0x24abeb(0x285)]&&(tgBot[_0x24abeb(0x169)](_0x24abeb(0x231)),await tgBot[_0x24abeb(0x120)](settings[_0x24abeb(0x285)],_0x24abeb(0x14c),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x24abeb(0x1b8),'callback_data':_0x24abeb(0x1b8)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x759871=>{telegramError(_0x759871);}),tgBot['on'](_0x24abeb(0x231),async _0x48695b=>{const _0x194096=_0x24abeb,_0x519bc5=_0x48695b[_0x194096(0x244)],_0x4696da=_0x48695b[_0x194096(0x271)];tgBot[_0x194096(0x141)](_0x48695b['id'])[_0x194096(0x225)](async()=>{const _0x14dada=_0x194096;_0x519bc5==_0x14dada(0x1b8)?(await tgBot[_0x14dada(0x120)](_0x4696da[_0x14dada(0xa7)]['id'],_0x14dada(0x1c9),{'parse_mode':_0x14dada(0x1ff)})[_0x14dada(0xa5)](_0x188dcf=>{telegramError(_0x188dcf);}),unzipFile(_0x4102eb,_0x48a3de)):(logger[_0x14dada(0x26c)](_0x14dada(0x251)),await tgBot[_0x14dada(0x120)](_0x4696da[_0x14dada(0xa7)]['id'],_0x14dada(0x251))[_0x14dada(0xa5)](_0x5b25ed=>{telegramError(_0x5b25ed);}));}),tgBot['removeListener'](_0x194096(0x231));}));}function getServerTime(){const _0x1506fd=_0x446078,_0x517ced=new Date();return _0x517ced[_0x1506fd(0x1a2)]()+'/'+(_0x517ced['getMonth']()+0x1)[_0x1506fd(0x17e)]()[_0x1506fd(0x1bd)](0x2,'0')+'/'+_0x517ced[_0x1506fd(0x11f)]()[_0x1506fd(0x17e)]()[_0x1506fd(0x1bd)](0x2,'0')+'\x20'+_0x517ced[_0x1506fd(0xb9)]()[_0x1506fd(0x17e)]()[_0x1506fd(0x1bd)](0x2,'0')+':'+_0x517ced[_0x1506fd(0xe0)]()[_0x1506fd(0x17e)]()[_0x1506fd(0x1bd)](0x2,'0')+':'+_0x517ced['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x293d0b=_0x446078,_0x4a69b1=shiftedTime();return _0x4a69b1[_0x293d0b(0x1a2)]()+'/'+(_0x4a69b1[_0x293d0b(0x134)]()+0x1)[_0x293d0b(0x17e)]()['padStart'](0x2,'0')+'/'+_0x4a69b1[_0x293d0b(0x11f)]()[_0x293d0b(0x17e)]()[_0x293d0b(0x1bd)](0x2,'0')+'\x20'+_0x4a69b1['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x4a69b1[_0x293d0b(0xe0)]()[_0x293d0b(0x17e)]()[_0x293d0b(0x1bd)](0x2,'0')+':'+_0x4a69b1[_0x293d0b(0x161)]()[_0x293d0b(0x17e)]()[_0x293d0b(0x1bd)](0x2,'0');}function getCleanTimeStamp(){const _0xa55d3=_0x446078,_0x48db03=shiftedTime();return _0x48db03[_0xa55d3(0x1a2)]()+(_0x48db03[_0xa55d3(0x134)]()+0x1)[_0xa55d3(0x17e)]()[_0xa55d3(0x1bd)](0x2,'0')+_0x48db03[_0xa55d3(0x11f)]()[_0xa55d3(0x17e)]()[_0xa55d3(0x1bd)](0x2,'0')+'-'+_0x48db03[_0xa55d3(0xb9)]()['toString']()['padStart'](0x2,'0')+_0x48db03[_0xa55d3(0xe0)]()[_0xa55d3(0x17e)]()[_0xa55d3(0x1bd)](0x2,'0')+_0x48db03[_0xa55d3(0x161)]()[_0xa55d3(0x17e)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2bd4ab=_0x446078,_0x22096d=new Date();let _0x1b2961=_0x22096d;if(settings[_0x2bd4ab(0x162)]&&settings[_0x2bd4ab(0x162)]!==0x0)_0x1b2961=fns['add'](_0x22096d,{'hours':settings[_0x2bd4ab(0x162)]});return _0x1b2961;}function startScheduler(){const _0x35d402=_0x446078,_0x398625=new Date()[_0x35d402(0x205)](),_0x104e3e=shiftedTime()[_0x35d402(0xb9)]();_0x104e3e==0x4&&backupConfigFiles();_0x104e3e==0x0&&rotateLogFiles();_0x398625%0x6==0x0&&triggerAnalytics();_0x398625%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x45eac5){const _0x4ef42d=_0x446078;logger[_0x4ef42d(0x26c)](_0x4ef42d(0x184)+_0x45eac5);const _0x27077b=getBotsWithMode();_0x27077b[_0x4ef42d(0x1ae)]>0x0?confirmRestore(configbackuppath,_0x45eac5):unzipFile(configbackuppath,_0x45eac5);}function _0x1946(){const _0x40175c=['backup-files','</b>\x20?','getMinutes','pidExpireLogin','/download/:type','logs/','child_process','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','output-003.log','entries','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','bot','expiry','headless','Markdown','copyFileSync','127.0.0.1','bbvReceive','new-disabled','Unauthorized\x20attempt\x20to\x20get\x20events','sendFile','exec','botmanager','size','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','2FA\x20login\x20token\x20generated','toggle-bot-mode','Invalid\x20Telegram\x20token','Invalid\x20authentication\x20token\x20(2)','All\x20bots\x20running\x20right\x20now','cloneDeep','temporary\x20access\x20timeout','compareSync','\x20only\x0a','config/','output-000.log','match','.zip','token','-results.json','place-order','log','2630PeazkA','full','uuid-random','add-bot','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','readFileSync','referer','privateKey','Unauthorized\x20attempt\x20to\x20add\x20bot','Starting\x20Balance\x20Bot\x20update','simple','emitHistory','\x1b[35m','************','-config.json','Invalid\x20IP\x20address','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','fork','delete-alerts','5\x20min','44815TauqVs','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/:bot/configuration','getDate','sendMessage','production','Starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','placeOrder','Invalid\x20authentication\x20token\x20(1)','running','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','clientip','./version.json','from','sortBy','latestversion','timestamp','write','RSA-OAEP','bot-','remove','port','getMonth','get-backup-files','telegrammsg','value','getStartingBalances','cancelLoading','Starting\x20Balance\x20Bot\x20reinstallation','parse','uuid','Logged\x20out\x20user\x20...','express','settings.','push','answerCallbackQuery','\x1b[0m','conn','createWriteStream','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','apiPassword','Backup\x20file\x20unzipped\x20and\x20stored','update','range','remoteAddress','set','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','/off\x20-\x20stop\x20bot(s)\x0a','Crypt','reinstall','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20update\x20settings','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','All\x20bots','telegramToken','path','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','\x20>\x20','secure','238bNYjrU','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','randomFillSync','exit','Setting\x20access:\x20','binary','Unauthorized\x20attempt\x20to\x20get\x20messages','getSeconds','timeshift','SIGTERM','isValid','/restart\x20-\x20restart\x20bot(s)\x0a','f2aRequired','Login\x20rejected','use','removeListener','bbvNew','once','Notifications\x20disabled','Token\x20blacklisted','\x20mode','accept','writeFileSync','Error\x20while\x20deleting\x20config\x20files:\x20','mode','emit','verify','temporary\x20token\x20generated','Logged\x20in\x20user\x20...','Idling\x20bot\x20\x20\x20|\x20Bot\x20','polling_error','error','Login\x20accepted','private','onepagemode','uncaughtException','toString','show','telegramIpApproval','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','whitelistEnabled','min','Restore\x20backup\x20file\x20','login\x20token\x20valid','backup-full.zip','test','messages','file','isIPv4MappedAddress','access','-events.json','Alerts','update-bot','includes','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','resetHistory','::1','/on\x20-\x20start\x20bot(s)\x0a','userid','publicKey','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','secret','files','live','disconnect','replace','bb-config.json','#RES#\x20if\x20running\x20locally\x0a','init','Invalid\x20username\x20or\x20IP\x20address','RSA','version','getFullYear','slice','split','search','order','kill','axios','temporary\x20access\x20rejected','login','show-config','temporary\x20access\x20not\x20allowed','success','length','Bot\x20','manual','Yes','login\x20token\x20generated','removeAllListeners','Unauthorized\x20attempt\x20to\x20delete\x20alerts','family','reset-history','backup-full@','yes','1544952eBsEOQ','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','69714YhqjCG','\x20minutes','padStart','event','/metrics\x20-\x20show\x20bot\x20performance\x0a','getTime','/status\x20-\x20show\x20bot(s)\x20status\x0a','reason','Unauthorized\x20attempt\x20to\x20store\x20configuration','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','notification','/:bot/history','username','Unauthorized\x20attempt\x20to\x20download\x20','Restoring\x20bot(s)\x20from\x20backup','get-logs','randomBytes','express-fileupload','telegramEnabled','orders','pidRefreshToken','static','environment','login\x20required','toIPv4Address','status','filter','983728PMXZLv','logout','Your\x20installation\x20is\x20already\x20up\x20to\x20date','bcryptjs','Notifications\x20enabled\x0a','any','hex','blacklist','Server','hybrid-crypto-js','/names\x20-\x20show\x20bot\x20names\x0a','Allow\x20login\x20from\x20IP\x20address\x20<b>','Error:\x20Invalid\x20argument\x20','stopped','tkn','version.json',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/help\x20-\x20show\x20available\x20commands\x0a','botname','telegramUsername','-----------------------------------------------------------------------------------','Ok,\x20will\x20send\x20alert\x20notifications\x20only','sha256','store-settings','6b67f3d61ee94b8f5c80b4affef4c4d9','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','User\x20has\x20been\x20validated','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','-performance.json','mixpanel','=>\x20Go\x20to\x20#CYA#http://','***','\x20|\x20','Notifications\x20disabled\x0a','Notifications\x20enabled','storeHeadless','delete-bot','Node.js\x20v','reject','unlinkSync','Unauthorized\x20attempt\x20to\x20log\x20out','HTML','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','handshake','updatebotmanager','auto','lastmsgemitted','getUTCHours','2FA\x20login\x20required','storeConfiguration','24Xszbed','NTBA_FIX_319','function','bots','login\x20not\x20required','onText','Deleted\x20Bot\x20','params','user','util','sockets','lowdb/adapters/FileSync','settings','ipaddr.js','store-configuration','number','You\x20can\x20use\x20the\x20following\x20commands:\x0a','bbPassword','get','name','backup','\x20|\x20client:\x20...','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','format','argv','invalid\x20credentials','deleteHistoryAlerts','Unauthorized\x20attempt\x20to\x20update\x20bot','stringify','then','all','server','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bb-secure.json','startsWith','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','post','initclient','4304736UAliic','mkdirSync','yargs/yargs','callback_query','showConfig','build2','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','temp/','confirm-message','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Restarting\x20Bot\x20','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Orders','getPortfolio','showname','store-fiat','telegram2FaApproval','hashSync','crypto','Password\x20has\x20been\x20reset\x20to:\x20','allow','data','listen','store','All','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','/:bot/portfolio','Unauthorized\x20login\x20attempt\x20(timeout)','\x20to\x20','Bot\x20Mgr\x20>\x20','sign','backup-full','isDirectory','77920YPtqKO','Restore\x20process\x20aborted','bb-settings.json','output-002.log','kind','SIGINT','get-starting-balances','inherit','request','Starting\x20#RED#Balance\x20Bot\x20v','/:bot/coins','lowdb','hasOwnProperty',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','clients','Error\x20removing\x20old\x20backup\x20files:','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','assign','connected','get-messages','type','keys','sort','3000','rmSync','/update\x20-\x20update\x20Balance\x20Bot\x0a','readdirSync','sendPortfolioTelegram','debug','logged\x20out','forEach','new','\x1b[34m','message','178552eUlbXT','started','lastmsgtelegram','$1_$2_$3','alerts','telegramEvents','disabled','headers','botID','graphql-request','No\x20bots\x20running\x20right\x20now','restore-backup-file','/disable\x20-\x20disable\x20notifications\x0a','warning','find','zip/','apiKey','enabled','Unauthorized\x20attempt\x20to\x20confirm\x20message','telegramChatId','\x1b[31m','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','catch','send','chat','string','Access\x20enabled\x20for\x20','sendMetricsTelegram','reset-password','restart','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','stopPolling','loginRequired','build','index.html','createServer','max','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','get-portfolio','/output-000.log','\x20(2)','getHours','host','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','bbUsername','address','stop','join','logs','decrypt','bot.js','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','File\x20uploaded','reload','DEFLATE','telegram','2FA','backupfile','ipc','node-zip','(((.+)+)+)+$','args','\x20|\x20user:\x20...','existsSync','internal','<b>Balance\x20Bot\x20Status:</b>\x0a','apiSecret','Starting\x20bot\x20|\x20Bot\x20','Notifications\x20types:\x20','\x1b[33m','\x1b[36m','password','output-001.log','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','/:bot','generate','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run'];_0x1946=function(){return _0x40175c;};return _0x1946();}async function getBackupFiles(_0x5b140e=null){const _0xdd86b=_0x446078;let _0x409b99=[],_0x4d23a4=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x4d23a4[_0xdd86b(0x266)]((_0xaaae75,_0x4763fc)=>_0xaaae75[_0xdd86b(0x21b)]<_0x4763fc['name']?0x1:_0x4763fc[_0xdd86b(0x21b)]<_0xaaae75[_0xdd86b(0x21b)]?-0x1:0x0),_0x4d23a4[_0xdd86b(0x26e)](_0x3e8a69=>{const _0x3452e5=_0xdd86b;if(!_0x3e8a69['isDirectory']()&&_0x3e8a69[_0x3452e5(0x21b)][_0x3452e5(0x22a)](_0x3452e5(0x1b7))&&_0x3e8a69['name']['endsWith'](_0x3452e5(0x103))){const _0x27e87c=formatDate(fs['statSync'](configbackuppath+_0x3e8a69['name'])['mtime']);_0x409b99[_0x3452e5(0x140)]({'name':_0x3e8a69[_0x3452e5(0x21b)],'mtime':_0x27e87c});}});if(_0x5b140e)io['to'](_0x5b140e)[_0xdd86b(0x173)](_0xdd86b(0xde),_0x409b99);else return _0x409b99;}async function backupConfigFiles(){const _0x2543f6=_0x446078;await zipFiles(_0x2543f6(0x24e));const _0x7d5ef4=getCleanTimeStamp();fs[_0x2543f6(0xed)](zippath+_0x2543f6(0x186),configbackuppath+('backup-full@'+_0x7d5ef4+_0x2543f6(0x103)));let _0x342e45=fs[_0x2543f6(0x26a)](configbackuppath,{'withFileTypes':!![]});_0x342e45['sort']((_0x3f06c7,_0x36e297)=>_0x3f06c7[_0x2543f6(0x21b)]<_0x36e297[_0x2543f6(0x21b)]?0x1:_0x36e297[_0x2543f6(0x21b)]<_0x3f06c7['name']?-0x1:0x0),_0x342e45[_0x2543f6(0x1ae)]>maxBackups&&fs[_0x2543f6(0x1fd)](configbackuppath+_0x342e45[_0x342e45[_0x2543f6(0x1ae)]-0x1][_0x2543f6(0x21b)]);}function rotateLogFiles(){const _0x882624=_0x446078,_0x37d7b0=fs['statSync'](logspath+_0x882624(0x101)),_0x4c139f=_0x37d7b0[_0x882624(0xf5)]/0x400;if(_0x4c139f>0x64){let _0x432254=fs[_0x882624(0x26a)](logspath,{'withFileTypes':!![]});_0x432254['sort']((_0x3518f2,_0x5b36d7)=>_0x3518f2[_0x882624(0x21b)]<_0x5b36d7[_0x882624(0x21b)]?0x1:_0x5b36d7[_0x882624(0x21b)]<_0x3518f2['name']?-0x1:0x0),_0x432254[_0x882624(0x26e)](_0x44fa60=>{const _0x2653d2=_0x882624;if(_0x44fa60[_0x2653d2(0x21b)]=='output-002.log')fs[_0x2653d2(0xed)](logspath+_0x44fa60[_0x2653d2(0x21b)],logspath+_0x2653d2(0xe6));if(_0x44fa60[_0x2653d2(0x21b)]=='output-001.log')fs[_0x2653d2(0xed)](logspath+_0x44fa60[_0x2653d2(0x21b)],logspath+_0x2653d2(0x253));_0x44fa60['name']==_0x2653d2(0x101)&&(fs[_0x2653d2(0xed)](logspath+_0x44fa60['name'],logspath+_0x2653d2(0xd9)),fs[_0x2653d2(0x170)](logspath+_0x44fa60[_0x2653d2(0x21b)],''));});}}async function zipFiles(_0x32cdeb){const _0x56aeaa=_0x446078;let _0x58409c;if(_0x32cdeb==_0x56aeaa(0xc1))_0x58409c=logspath;if(_0x32cdeb==_0x56aeaa(0x21c))_0x58409c=configpath;if(_0x32cdeb==_0x56aeaa(0x24e))_0x58409c=configpath;let _0x43eee2=fs['readdirSync'](_0x58409c,{'withFileTypes':!![]});const _0x3782c6=new require(_0x56aeaa(0xcc))();_0x43eee2[_0x56aeaa(0x26e)](_0x333ec5=>{const _0x29d2f2=_0x56aeaa;if(!_0x333ec5[_0x29d2f2(0x24f)]()){let _0x5bee0e=fs[_0x29d2f2(0x10d)](_0x58409c+_0x333ec5[_0x29d2f2(0x21b)]);if(_0x32cdeb==_0x29d2f2(0x21c)){const _0x48d628=/^bot-[0-9]{3}-config.json$/,_0x18e3ba=_0x48d628[_0x29d2f2(0x187)](_0x333ec5[_0x29d2f2(0x21b)]);if(_0x18e3ba){const _0x37cee1=JSON['parse'](_0x5bee0e);if(_0x37cee1['bot'][0x0]){_0x37cee1['bot'][0x0][_0x29d2f2(0x282)]=_0x29d2f2(0x1f5),_0x37cee1[_0x29d2f2(0xe9)][0x0][_0x29d2f2(0xd3)]=_0x29d2f2(0x1f5);if(_0x37cee1[_0x29d2f2(0xe9)][0x0][_0x29d2f2(0x146)])_0x37cee1['bot'][0x0]['apiPassword']=_0x29d2f2(0x1f5);}_0x5bee0e=JSON[_0x29d2f2(0x224)](_0x37cee1,null,0x2);}if(_0x333ec5[_0x29d2f2(0x21b)]==_0x29d2f2(0x252)){const _0x3a4ed6=JSON[_0x29d2f2(0x13b)](_0x5bee0e);if(_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0xaf)])_0x3a4ed6['settings'][_0x29d2f2(0xaf)]=![];if(_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0x219)])_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0x219)]='***';if(_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0x154)])_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0x154)]=_0x29d2f2(0x1f5);if(_0x3a4ed6['settings'][_0x29d2f2(0x285)])_0x3a4ed6[_0x29d2f2(0x214)][_0x29d2f2(0x285)]=null;_0x5bee0e=JSON[_0x29d2f2(0x224)](_0x3a4ed6,null,0x2);}if(_0x333ec5['name']!=_0x29d2f2(0x229))_0x3782c6['file'](_0x333ec5['name'],_0x5bee0e);}else _0x3782c6[_0x29d2f2(0x189)](_0x333ec5[_0x29d2f2(0x21b)],_0x5bee0e);}});const _0x374e51=_0x3782c6[_0x56aeaa(0xdc)]({'base64':![],'compression':_0x56aeaa(0xc7)});fs[_0x56aeaa(0x170)](zippath+(_0x32cdeb+'.zip'),_0x374e51,_0x56aeaa(0x15f));}async function unzipFile(_0x52ebfc,_0x248514){const _0xe6c392=_0x446078;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0xe6c392(0x26e)](_0x4af8da=>{const _0x380cc9=_0xe6c392;if(!_0x4af8da[_0x380cc9(0x24f)]())fs[_0x380cc9(0x268)](configpath+_0x4af8da[_0x380cc9(0x21b)]);});const _0xab0aa5=fs[_0xe6c392(0x10d)](_0x52ebfc+_0x248514,_0xe6c392(0x15f)),_0x111626=new require(_0xe6c392(0xcc))(_0xab0aa5,{'base64':![],'checkCRC32':!![]});Object[_0xe6c392(0x265)](_0x111626['files'])['forEach'](_0x2880d9=>{const _0xde53e9=_0xe6c392,_0x14b06b=_0x111626[_0xde53e9(0x198)][_0x2880d9];fs[_0xde53e9(0x170)](configpath+_0x14b06b['name'],_0x14b06b['_data']);}),fs[_0xe6c392(0x26a)](temppath,{'withFileTypes':!![]})[_0xe6c392(0x26e)](_0x112a0e=>{const _0x519bd9=_0xe6c392;if(!_0x112a0e[_0x519bd9(0x24f)]())fs[_0x519bd9(0x268)](temppath+_0x112a0e['name']);}),logger['debug'](_0xe6c392(0x147)),process['send']({'restore':!![]},_0x470d0f=>{});}async function getPublicIp(){const _0x492589=_0x446078;try{const _0x23da52=await axios['get']('https://api.ipify.org?format=json');publicip=_0x23da52[_0x492589(0x244)]['ip'];}catch(_0x1ff639){}}async function triggerAnalytics(){const _0x401279=_0x446078;if(!publicip)await getPublicIp();const _0x11ec52=getBotsWithMode();let _0x42ec1e=0x0;_0x11ec52[_0x401279(0x26e)](_0x51e0d7=>{const _0x218ef7=_0x401279;if(_0x51e0d7['status']===_0x218ef7(0x283))_0x42ec1e++;});const _0x40818f=getBotExchanges();mixpanel['track'](_0x401279(0x1de),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x11ec52[_0x401279(0x1ae)],'numbotsenabled':_0x42ec1e,'exchanges':_0x40818f});}async function getMessages(){const _0x24891e=_0x446078,_0x1b7e9b=_0x24891e(0x118),_0x501fca=new GraphQLClient(_0x1b7e9b),_0x17cc02={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x4bac6d=serverversion[_0x24891e(0x1a4)]('.'),_0x2763d8=_0x4bac6d[0x0]+'.'+_0x4bac6d[0x1],_0x18d520=Math[_0x24891e(0x183)](settings[_0x24891e(0x274)],settings[_0x24891e(0x204)]),_0x37e063={'last':parseInt(_0x18d520),'bbm':_0x2763d8},_0x1e0295=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5049bf;try{_0x5049bf=await _0x501fca[_0x24891e(0x258)](_0x1e0295,_0x37e063,_0x17cc02);}catch(_0x4a2276){}if(_0x5049bf&&_0x5049bf[_0x24891e(0x188)]){let _0x340cec=settings[_0x24891e(0x274)];newMessages=[];for(const _0x1092ca of _0x5049bf['messages']){newMessages['push'](_0x1092ca);if(_0x1092ca[_0x24891e(0x16a)])updateSetting('latestversion',_0x1092ca[_0x24891e(0x16a)]);let _0x614e1=_0x1092ca['bbvNew']?serverversion>=_0x1092ca['bbvNew']:![];if(!_0x614e1&&_0x1092ca['number']>_0x340cec){if(_0x1092ca['bbvReceive']===_0x24891e(0x1db)||serverversion[_0x24891e(0x22a)](_0x1092ca[_0x24891e(0xef)])){let _0x21fff9=''+_0x1092ca['title']+'\x0a\x0a'+_0x1092ca[_0x24891e(0x271)];const _0x3c6ece=await sendTelegramMsg(toTelegramMarkdown(_0x21fff9),_0x24891e(0xec));if(_0x3c6ece)_0x340cec=_0x1092ca[_0x24891e(0x217)];}}}updateAvailable=isNewerVersion(settings[_0x24891e(0x12d)],serverversion),updateSetting(_0x24891e(0x274),_0x340cec),emitMessages();}}function emitMessages(){const _0x192001=_0x446078,_0x13354e=settings['lastmsgemitted'];let _0x5668cf=[];newMessages['forEach'](_0x599f80=>{_0x599f80['number']>_0x13354e&&_0x5668cf['push'](_0x599f80);}),_0x5668cf[_0x192001(0x1ae)]>0x0&&getAllClients()[_0x192001(0x26e)](_0x1cf43f=>{const _0x5d233a=_0x192001;getSocket(_0x1cf43f['id'])[_0x5d233a(0x173)](_0x5d233a(0x271),_0x5668cf);});}function confirmMessage(_0x195936){const _0x49b86f=_0x446078;updateSetting(_0x49b86f(0x204),Number(_0x195936));}function isNewerVersion(_0x4f77fd,_0x3e207a){const _0x53ea77=_0x446078,_0x46d497=_0x3e207a['split']('.'),_0x1c7dea=_0x4f77fd[_0x53ea77(0x1a4)]('.');for(var _0x520118=0x0;_0x520118<_0x1c7dea[_0x53ea77(0x1ae)];_0x520118++){const _0x5ae9f3=~~_0x1c7dea[_0x520118],_0x4f06fa=~~_0x46d497[_0x520118];if(_0x5ae9f3>_0x4f06fa)return!![];if(_0x5ae9f3<_0x4f06fa)return![];}return![];}function toTelegramMarkdown(_0x2df334){const _0x3c6f3f=_0x446078,_0x2eed03=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x91f8cd=/\*{2}(.+?)\*{2}/gim;return _0x2df334=_0x2df334[_0x3c6f3f(0x19b)](_0x2eed03,_0x3c6f3f(0x275))[_0x3c6f3f(0x19b)](_0x91f8cd,'*$1*'),_0x2df334;}async function validateConfigFile(){const _0x355d20=_0x446078,_0x54909a=dbConfig['get']('bots')[_0x355d20(0x12c)](_0x355d20(0x27a))[_0x355d20(0x137)]()||[];if(_0x54909a[_0x355d20(0x1ae)]==0x0){let _0x420e46=0x0,_0x6332ba=[];const _0x46eacf=/^bot-([0-9]{3})-config.json$/,_0x53cf88=fs['readdirSync'](configpath);_0x53cf88['forEach'](_0x43f015=>{const _0x11ec7b=_0x355d20,_0x16df84=_0x46eacf[_0x11ec7b(0xf3)](_0x43f015);if(_0x16df84){const _0x1bcb44=_0x16df84[0x1];let _0x4e3a4e=getBotAttributes(_0x1bcb44);_0x6332ba[_0x11ec7b(0x140)]({'botID':_0x1bcb44,'botname':_0x4e3a4e[_0x11ec7b(0x1e8)],'status':'disabled','live':_0x11ec7b(0x1e3)}),_0x420e46++;}}),_0x420e46!=0x0&&(dbConfig['get'](_0x355d20(0x20b))['assign'](_0x6332ba)['write'](),config=_0x6332ba,restoredConfigFile=_0x420e46);}}async function restoreConfigNotify(_0x4bf11e){const _0x28b71b=_0x446078;let _0x555a49;if(restoredConfigFile==0x1)_0x555a49=_0x28b71b(0x1c4);else _0x555a49=_0x28b71b(0xdd);if(_0x4bf11e)io['to'](_0x28b71b(0xf4))[_0x28b71b(0x173)](_0x28b71b(0x1c5),_0x555a49);else{logger[_0x28b71b(0x112)](_0x28b71b(0x1ea)),logger['simple'](_0x555a49),logger[_0x28b71b(0x112)](_0x28b71b(0x1ea)),logger[_0x28b71b(0x112)]('');if(tgBot&&settings[_0x28b71b(0x285)]&&settings[_0x28b71b(0x277)]!=_0x28b71b(0x1ce))tgBot[_0x28b71b(0x120)](settings[_0x28b71b(0x285)],'Bot\x20Mgr\x20>\x20'+_0x555a49)['catch'](_0x25fc04=>{telegramError(_0x25fc04);});}}function validateCredentials(_0x205cd7,_0xc0af21){const _0x173424=_0x446078;if(_0x205cd7['username']==settings['bbUsername']&&bcrypt[_0x173424(0xfe)](_0x205cd7[_0x173424(0xd8)],settings[_0x173424(0x219)])){if(settings[_0x173424(0x166)])return{'allow':![],'reason':_0x173424(0x206),'token':null};else{const _0x162bc0=generateLoginToken(_0xc0af21);return{'allow':!![],'reason':_0x173424(0x1b2),'token':_0x162bc0};}}else return{'allow':![],'reason':_0x173424(0x221),'token':null};}function refreshToken(_0x5219e2){const _0xd6937c=_0x446078,_0x324477=generateLoginToken(_0x5219e2);return{'allow':!![],'reason':_0xd6937c(0x1b2),'token':_0x324477};}function validateAccess(_0x369543,_0x4abcc0,_0x59ec5c){const _0x45e57b=_0x446078,_0x13fe5b=_0x59ec5c?_0x59ec5c:devices[_0x4abcc0]['ip'];let _0x5abfe3;const _0x17a375=_0x138f72=>{const _0x4cefec=_0xc48b;if(settings['loginRequired']){if(settings[_0x4cefec(0x166)]){if(telegram2FaApproved(_0x4abcc0)){const _0x420251=generateLoginToken(_0x4abcc0);return{'allow':!![],'reason':_0x4cefec(0xf7),'token':_0x420251};}else return{'allow':![],'reason':_0x4cefec(0x1d2),'token':null};}else return _0x5abfe3=validToken(_0x138f72,_0x4abcc0),_0x5abfe3['hasOwnProperty'](_0x4cefec(0x1ad))?{'allow':!![],'reason':_0x4cefec(0x185),'token':_0x138f72}:{'allow':![],'reason':_0x4cefec(0x1d2),'token':null};}else return{'allow':!![],'reason':_0x4cefec(0x20c),'token':null};};if(settings[_0x45e57b(0x182)]){let _0x1ce0f6=[...settings['whitelist'],_0x45e57b(0x192),'::ffff:127.0.0.1',_0x45e57b(0xee)];if(_0x1ce0f6['includes'](_0x13fe5b))return _0x17a375(_0x369543);else{_0x5abfe3=validToken(_0x369543,_0x4abcc0);if(_0x5abfe3[_0x45e57b(0x25c)](_0x45e57b(0x1ad)))return _0x17a375(_0x369543);else{if(telegramIpApproved(_0x4abcc0)){const _0x5df97a=generateToken(_0x4abcc0);return _0x5abfe3=_0x17a375(_0x369543),_0x5abfe3[_0x45e57b(0x243)]?{'allow':!![],'reason':_0x45e57b(0x175),'token':_0x5df97a}:_0x5abfe3;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x45e57b(0x1ac),'token':null};}}}else return _0x17a375(_0x369543);}function timelyDecrypt(_0x996bde,_0x26df3b=!![]){const _0x28149b=_0x446078;if(_0x996bde)try{const _0x12595d=crypt[_0x28149b(0xc2)](secure[_0x28149b(0x10f)],_0x996bde)[_0x28149b(0x271)],_0x1c1049=_0x12595d[_0x28149b(0x1a4)]('@')[0x0],_0x359438=_0x12595d[_0x28149b(0x1a4)]('@')[0x1],_0x256772=new Date()[_0x28149b(0x1c0)]();if(_0x26df3b){if(_0x256772-_0x359438<maxSecretAge*0x3e8)return _0x1c1049;else return![];}else return _0x1c1049;}catch(_0x30325a){return![];}else return![];}const validToken=(_0x4b3706,_0x26b299)=>{const _0x1082db=_0x446078,_0x45ed0f=devices[_0x26b299]['ip'];if(!_0x4b3706)return{'error':'No\x20authentication\x20token'};for(let _0x22d01e of blacklist){if(_0x22d01e[_0x1082db(0x104)]==_0x4b3706)return{'error':_0x1082db(0x16d)};}let _0xd2eb57;try{_0xd2eb57=jwt[_0x1082db(0x174)](_0x4b3706,secure[_0x1082db(0x197)]+_0x26b299);}catch{return{'error':_0x1082db(0x125)};}if(!_0xd2eb57[_0x1082db(0x25c)](_0x1082db(0x129))&&!_0xd2eb57[_0x1082db(0x25c)](_0x1082db(0x1c7))||!_0xd2eb57[_0x1082db(0x25c)]('exp'))return{'error':_0x1082db(0xfa)};if(!_0xd2eb57['hasOwnProperty'](_0x1082db(0x1c7))&&_0xd2eb57[_0x1082db(0x25c)](_0x1082db(0x129))){const {clientip:_0x5fa251}=_0xd2eb57;return _0x45ed0f==_0x5fa251?{'success':_0x1082db(0x1f0)}:{'error':_0x1082db(0x117)};}else{if(_0xd2eb57['hasOwnProperty'](_0x1082db(0x1c7))&&_0xd2eb57[_0x1082db(0x25c)](_0x1082db(0x129))){const {username:_0x43010a,clientip:_0x3b9929}=_0xd2eb57;return settings[_0x1082db(0xbd)]==_0x43010a&&_0x45ed0f==_0x3b9929?{'success':_0x1082db(0x1f0)}:{'error':_0x1082db(0x19f)};}}},generateLoginToken=_0x17d5e3=>{const _0x3da57b=_0x446078;if(_0x17d5e3){const _0x32953b=devices[_0x17d5e3]['ip'];return jwt[_0x3da57b(0x24d)]({'username':settings[_0x3da57b(0xbd)],'clientip':_0x32953b},secure[_0x3da57b(0x197)]+_0x17d5e3,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x446e8e=>{const _0x4b6b6b=_0x446078;if(_0x446e8e){const _0x54666b=devices[_0x446e8e]['ip'];return jwt[_0x4b6b6b(0x24d)]({'clientip':_0x54666b},secure[_0x4b6b6b(0x197)]+_0x446e8e,{'expiresIn':devices[_0x446e8e][_0x4b6b6b(0x180)][_0x4b6b6b(0xea)]*0x3c});}else return![];},telegramIpApproved=_0x3728a9=>{const _0x8ba383=_0x446078;let _0x301b1a=![];return devices[_0x3728a9]['telegramIpApproval']&&devices[_0x3728a9][_0x8ba383(0x180)][_0x8ba383(0xea)]!='reject'&&(_0x301b1a=devices[_0x3728a9]['telegramIpApproval'][_0x8ba383(0x129)]==devices[_0x3728a9]['ip']&&new Date()['getTime']()-devices[_0x3728a9][_0x8ba383(0x180)]['timestamp']<devices[_0x3728a9][_0x8ba383(0x180)][_0x8ba383(0xea)]*0x3c*0x3e8),_0x301b1a;},telegram2FaApproved=_0x580003=>{const _0x25de44=_0x446078;let _0x389bb1=![];return devices[_0x580003][_0x25de44(0x23f)]&&devices[_0x580003]['telegram2FaApproval']['expiry']!=_0x25de44(0x1fc)&&(_0x389bb1=devices[_0x580003][_0x25de44(0x23f)][_0x25de44(0x129)]==devices[_0x580003]['ip']&&new Date()['getTime']()-devices[_0x580003][_0x25de44(0x23f)][_0x25de44(0x12e)]<devices[_0x580003][_0x25de44(0x23f)][_0x25de44(0xea)]*0x3c*0x3e8),_0x389bb1;},normalizeIP=_0x44d759=>{const _0xcf6d70=_0x446078;let _0x3539eb=null,_0x5139b8=null;if(ipaddr[_0xcf6d70(0x164)](_0x44d759)){const _0x1f1c7b=ipaddr[_0xcf6d70(0x13b)](_0x44d759);_0x1f1c7b[_0xcf6d70(0x254)]()==='ipv6'?(_0x1f1c7b[_0xcf6d70(0x18a)]()&&(_0x3539eb=_0x1f1c7b[_0xcf6d70(0x1d3)]()[_0xcf6d70(0x17e)]()),_0x5139b8=_0x1f1c7b['toString']()):(_0x3539eb=_0x1f1c7b[_0xcf6d70(0x17e)](),_0x5139b8=_0x1f1c7b['toIPv4MappedAddress']()[_0xcf6d70(0x17e)]());}return{'show':_0x3539eb?_0x3539eb:_0x5139b8,'store':_0x5139b8};};function formatDate(_0x220f06){const _0x178aa0=_0x446078;return _0x220f06[_0x178aa0(0x1a2)]()+'/'+(_0x220f06[_0x178aa0(0x134)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x220f06[_0x178aa0(0x11f)]()[_0x178aa0(0x17e)]()[_0x178aa0(0x1bd)](0x2,'0')+'\x20'+_0x220f06[_0x178aa0(0xb9)]()[_0x178aa0(0x17e)]()[_0x178aa0(0x1bd)](0x2,'0')+':'+_0x220f06['getMinutes']()['toString']()[_0x178aa0(0x1bd)](0x2,'0')+':'+_0x220f06[_0x178aa0(0x161)]()[_0x178aa0(0x17e)]()['padStart'](0x2,'0');}function sleep(_0x34e9fe){return new Promise(_0x3ce5cc=>setTimeout(_0x3ce5cc,_0x34e9fe));}