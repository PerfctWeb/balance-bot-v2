const _0x45927e=_0x5d95;(function(_0x1394ed,_0x233f88){const _0x2074f2=_0x5d95,_0x446313=_0x1394ed();while(!![]){try{const _0x37be14=parseInt(_0x2074f2(0x237))/0x1+parseInt(_0x2074f2(0x242))/0x2+-parseInt(_0x2074f2(0x19f))/0x3*(parseInt(_0x2074f2(0x225))/0x4)+-parseInt(_0x2074f2(0x1ce))/0x5+parseInt(_0x2074f2(0x228))/0x6*(parseInt(_0x2074f2(0x15b))/0x7)+-parseInt(_0x2074f2(0x157))/0x8+-parseInt(_0x2074f2(0x280))/0x9;if(_0x37be14===_0x233f88)break;else _0x446313['push'](_0x446313['shift']());}catch(_0x7817d0){_0x446313['push'](_0x446313['shift']());}}}(_0x2229,0x55f77));const _0x1a2f84=function(){let _0x22e7d5=!![];return function(_0x1a7df9,_0x14ee74){const _0x2ef8fd=_0x22e7d5?function(){const _0x1d26cb=_0x5d95;if(_0x14ee74){const _0x557c7c=_0x14ee74[_0x1d26cb(0x18c)](_0x1a7df9,arguments);return _0x14ee74=null,_0x557c7c;}}:function(){};return _0x22e7d5=![],_0x2ef8fd;};}(),_0x3c5015=_0x1a2f84(this,function(){const _0x2323aa=_0x5d95;return _0x3c5015['toString']()[_0x2323aa(0x20b)](_0x2323aa(0x1ab))['toString']()['constructor'](_0x3c5015)['search'](_0x2323aa(0x1ab));});_0x3c5015();'use strict';process[_0x45927e(0x27d)][_0x45927e(0x183)]=0x1;const childProcess=require(_0x45927e(0x251)),FileSync=require(_0x45927e(0x165)),fs=require('fs'),fns=require('date-fns'),low=require(_0x45927e(0x21d)),path=require(_0x45927e(0x244)),crypto=require(_0x45927e(0x255)),Crypt=require(_0x45927e(0x292))['Crypt'],RSA=require('hybrid-crypto-js')[_0x45927e(0x1a3)],bcrypt=require(_0x45927e(0x1ec)),jwt=require(_0x45927e(0x25b)),analyticsLib=require('analytics')[_0x45927e(0x196)],googleAnalytics=require(_0x45927e(0x1e2))[_0x45927e(0x196)],ipaddr=require(_0x45927e(0x1a5)),argv=require(_0x45927e(0x195))(process['argv'][_0x45927e(0x20a)](0x2))[_0x45927e(0x239)],PORT=argv['port']||_0x45927e(0x25e),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x45927e(0x179)](_0x45927e(0x1da)+PORT+_0x45927e(0x163)),process['exit'](0x1);const HOST=argv['host']||null,userID=argv[_0x45927e(0x17f)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x45927e(0x27f),configfile=_0x45927e(0x201),settingsfile=_0x45927e(0x160),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x45927e(0x14d)+userID+'/':bbpath+_0x45927e(0x14d),configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x45927e(0x16c)](configbackuppath)&&fs[_0x45927e(0x1cf)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x45927e(0x19d)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x45927e(0x19d)]({'settings':{'timeshift':0x0}})[_0x45927e(0x229)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x45927e(0x19d)]({'secure':{},'blacklist':[]})[_0x45927e(0x229)]();let crypt=new Crypt({'md':_0x45927e(0x227),'rsaStandard':_0x45927e(0x20e)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x45927e(0x270))[_0x45927e(0x16d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x45927e(0x19b))['createServer'](app);app['use'](express[_0x45927e(0x272)](path[_0x45927e(0x286)](__dirname,bbpath2,_0x45927e(0x1a0)))),app[_0x45927e(0x1c1)](express[_0x45927e(0x272)](path[_0x45927e(0x286)](__dirname,bbpath2,_0x45927e(0x1aa)))),app[_0x45927e(0x1ed)]('/',function(_0x3922e9,_0x3f4702){const _0x27ef92=_0x45927e;_0x3f4702[_0x27ef92(0x168)](path[_0x27ef92(0x286)](__dirname,bbpath2,_0x27ef92(0x1a0),'index.html'));}),app[_0x45927e(0x1ed)](_0x45927e(0x249),function(_0x89ca0a,_0x3014b7){const _0x2a297e=_0x45927e;_0x3014b7['sendFile'](path[_0x2a297e(0x286)](__dirname,bbpath2,_0x2a297e(0x1aa),'index.html'));}),app['get'](_0x45927e(0x260),(_0x3bf529,_0x250d0e)=>{const _0x54bdac=_0x45927e;_0x250d0e[_0x54bdac(0x168)](path[_0x54bdac(0x286)](__dirname,bbpath2,_0x54bdac(0x1aa),_0x54bdac(0x219)));}),app[_0x45927e(0x1ed)](_0x45927e(0x294),(_0x2793bf,_0x40353c)=>{const _0x3a29aa=_0x45927e;_0x40353c['sendFile'](path['join'](__dirname,bbpath2,_0x3a29aa(0x1aa),_0x3a29aa(0x219)));}),app[_0x45927e(0x1ed)]('/:bot/coins',(_0x52f4ea,_0x18eb72)=>{const _0x3ea321=_0x45927e;_0x18eb72[_0x3ea321(0x168)](path[_0x3ea321(0x286)](__dirname,bbpath2,_0x3ea321(0x1aa),_0x3ea321(0x219)));}),app[_0x45927e(0x1ed)](_0x45927e(0x22a),(_0x5366c6,_0x5acb2d)=>{const _0x4c6c5a=_0x45927e;_0x5acb2d[_0x4c6c5a(0x168)](path[_0x4c6c5a(0x286)](__dirname,bbpath2,_0x4c6c5a(0x1aa),_0x4c6c5a(0x219)));}),app['get'](_0x45927e(0x1cb),(_0x1f110c,_0x32ec25)=>{const _0x30b2a1=_0x45927e;_0x32ec25['sendFile'](path[_0x30b2a1(0x286)](__dirname,bbpath2,_0x30b2a1(0x1aa),_0x30b2a1(0x219)));}),app[_0x45927e(0x1ed)](_0x45927e(0x26d),(_0x43c116,_0x2e91f0)=>{const _0x24d609=_0x45927e;_0x2e91f0[_0x24d609(0x168)](path[_0x24d609(0x286)](__dirname,bbpath2,_0x24d609(0x1aa),_0x24d609(0x219)));});if(HOST)http[_0x45927e(0x190)](PORT,HOST);else http[_0x45927e(0x190)](PORT);const io=require(_0x45927e(0x1cc))(http,{}),analytics=analyticsLib({'app':_0x45927e(0x23b),'plugins':[googleAnalytics({'trackingId':_0x45927e(0x1f8)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings[_0x45927e(0x185)]!=''&&settings[_0x45927e(0x1a2)]&&settings[_0x45927e(0x1a2)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x38b9e9=_0x45927e;console[_0x38b9e9(0x179)](''),console[_0x38b9e9(0x179)](_0x38b9e9(0x23f)),logging(_0x38b9e9(0x14a)+PORT),console[_0x38b9e9(0x179)](_0x38b9e9(0x23f));if(config[_0x38b9e9(0x204)]!=0x0)config[_0x38b9e9(0x20d)](_0x5d630b=>{const _0xaf6fbf=_0x38b9e9;if(_0x5d630b['status']=='enabled'||_0x5d630b[_0xaf6fbf(0x243)]==_0xaf6fbf(0x1a1))logging('starting\x20bot\x20|\x20Bot\x20'+_0x5d630b[_0xaf6fbf(0x1bf)]+_0xaf6fbf(0x1b0)+_0x5d630b[_0xaf6fbf(0x194)]),startBot([_0x5d630b['botID'],userID],{'cwd':bbpath},function(_0x5e9172){if(_0x5e9172)logging(_0x5e9172);});else(_0x5d630b[_0xaf6fbf(0x243)]==_0xaf6fbf(0x150)||_0x5d630b[_0xaf6fbf(0x243)]==_0xaf6fbf(0x17e))&&logging(_0xaf6fbf(0x1d9)+_0x5d630b[_0xaf6fbf(0x1bf)]+_0xaf6fbf(0x1b0)+_0x5d630b[_0xaf6fbf(0x194)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x38b9e9(0x179)](_0x38b9e9(0x23f)),console['log']('');}function startSocket(){const _0x5a87b3=_0x45927e;io['on'](_0x5a87b3(0x1bc),_0x5e2eb4=>{const _0x2a2a07=_0x5a87b3;let _0x2fd431,_0x1f2081,_0x287d88,_0x3f4dc1,_0x1d5d38;const _0x16002c=_0x5e2eb4['handshake'][_0x2a2a07(0x1a4)][_0x2a2a07(0x14e)];_0x1f2081=_0x16002c[_0x2a2a07(0x203)](/bot[0-9]{3}/);if(_0x1f2081)_0x287d88=_0x1f2081[0x0]['match'](/[0-9]{3}/);if(_0x287d88)_0x2fd431=_0x287d88[0x0];else _0x2fd431='botmanager';const _0x18fc6e=_0x5e2eb4[_0x2a2a07(0x18f)][_0x2a2a07(0x24f)][_0x2a2a07(0x252)];if(!_0x18fc6e)_0x5e2eb4[_0x2a2a07(0x156)](_0x2a2a07(0x243),{'publicKey':secure[_0x2a2a07(0x1b6)]});else{_0x3f4dc1=timelyDecrypt(_0x18fc6e,![]);if(!_0x3f4dc1)_0x5e2eb4['emit'](_0x2a2a07(0x243),{'publicKey':secure[_0x2a2a07(0x1b6)]});else{_0x1d5d38=normalizeIP(_0x5e2eb4[_0x2a2a07(0x24c)][_0x2a2a07(0x231)])['store'];if(!devices[_0x3f4dc1])devices[_0x3f4dc1]={'uuid':_0x3f4dc1,'access':{'token':null}};devices[_0x3f4dc1]['ip']=_0x1d5d38;const _0x454929=addClient(_0x5e2eb4['id'],_0x3f4dc1,_0x2fd431);setAccess(_0x454929),_0x5e2eb4['on'](_0x2a2a07(0x258),_0x2de905=>{const _0x10bc83=_0x2a2a07,_0x533f7e=timelyDecrypt(_0x2de905[_0x10bc83(0x273)]);if(_0x533f7e){_0x2de905={'username':_0x2de905[_0x10bc83(0x1d3)],'password':_0x533f7e},devices[_0x3f4dc1][_0x10bc83(0x288)]=validateCredentials(_0x2de905,_0x3f4dc1);if(devices[_0x3f4dc1][_0x10bc83(0x288)][_0x10bc83(0x221)]==![]&&devices[_0x3f4dc1]['access'][_0x10bc83(0x155)]==_0x10bc83(0x223))_0x5e2eb4[_0x10bc83(0x156)]('status',{'access':devices[_0x3f4dc1][_0x10bc83(0x288)]}),loginAccess2FA(_0x3f4dc1,_0x1d5d38);else{if(devices[_0x3f4dc1][_0x10bc83(0x288)][_0x10bc83(0x221)]==![]&&devices[_0x3f4dc1]['access']['reason']==_0x10bc83(0x278))_0x5e2eb4[_0x10bc83(0x156)](_0x10bc83(0x243),{'access':devices[_0x3f4dc1][_0x10bc83(0x288)]});else devices[_0x3f4dc1]['access']['allow']&&devices[_0x3f4dc1][_0x10bc83(0x288)][_0x10bc83(0x155)]==_0x10bc83(0x174)&&(getClientsWithUuid(_0x3f4dc1)[_0x10bc83(0x20d)](_0xf4922b=>{setAccess(_0xf4922b);}),setTokenRefresh(_0x3f4dc1),setSessionTimeout(_0x10bc83(0x258),_0x3f4dc1));}}else logging(_0x10bc83(0x285));}),_0x5e2eb4['on']('reset-password',()=>{resetPassword();}),_0x5e2eb4['on']('disconnect',_0x4af589=>{removeClient(_0x5e2eb4['id']);});}}});}function initClient(_0x352a10){const _0x4d60f1=_0x45927e;if(_0x352a10!=_0x4d60f1(0x1f0)&&config[_0x4d60f1(0x15a)]!=''){if(pid[_0x352a10])pid[_0x352a10][_0x4d60f1(0x1c6)]({'function':_0x4d60f1(0x1e1),'args':null});}}function getSocket(_0x1db10f){const _0x1a540f=_0x45927e;return io[_0x1a540f(0x238)][_0x1a540f(0x238)][_0x1a540f(0x1ed)](_0x1db10f);}function setAccess(_0x5ac2d7){const _0x4ef41a=_0x45927e,_0x495909=getSocket(_0x5ac2d7['id']),_0x52385a=_0x5ac2d7[_0x4ef41a(0x22d)],_0x591fb8=_0x5ac2d7[_0x4ef41a(0x16b)];devices[_0x52385a][_0x4ef41a(0x288)]=validateAccess(devices[_0x52385a][_0x4ef41a(0x288)][_0x4ef41a(0x151)],_0x52385a),_0x495909['join'](_0x52385a);if(devices[_0x52385a][_0x4ef41a(0x288)][_0x4ef41a(0x221)]){_0x495909[_0x4ef41a(0x286)](_0x591fb8);if(_0x591fb8==_0x4ef41a(0x1f0))initializeSocketBotManager(_0x495909);else initializeSocketBot(_0x495909);initClient(_0x591fb8);}devices[_0x52385a]['access']['token']&&devices[_0x52385a][_0x4ef41a(0x288)][_0x4ef41a(0x155)]==_0x4ef41a(0x15c)&&setSessionTimeout(_0x4ef41a(0x246),_0x52385a),devices[_0x52385a][_0x4ef41a(0x288)]['token']&&devices[_0x52385a][_0x4ef41a(0x288)][_0x4ef41a(0x155)]==_0x4ef41a(0x193)&&setSessionTimeout('login',_0x52385a),_0x495909['emit']('status',{'status':_0x5ac2d7[_0x4ef41a(0x234)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x52385a]['access'],'externalip':devices[_0x52385a]['ip'],'publicKey':secure[_0x4ef41a(0x1b6)],'validInstallation':validInstallation}),devices[_0x52385a][_0x4ef41a(0x288)][_0x4ef41a(0x221)]==![]&&devices[_0x52385a]['access'][_0x4ef41a(0x155)]==_0x4ef41a(0x215)&&temporaryAccess2FA(_0x52385a,devices[_0x52385a]['ip']);}function setSessionTimeout(_0x3ced78,_0x36f743){const _0x477d18=_0x45927e;let _0x4a886a;if(_0x3ced78==_0x477d18(0x258))_0x4a886a=loginExpiry*0x3c*0x3e8;else _0x4a886a=devices[_0x36f743][_0x477d18(0x22e)]['expiry']*0x3c*0x3e8-(new Date()[_0x477d18(0x25c)]()-devices[_0x36f743][_0x477d18(0x22e)][_0x477d18(0x21a)]);if(devices[_0x36f743][_0x477d18(0x199)])clearTimeout(devices[_0x36f743][_0x477d18(0x199)]);devices[_0x36f743]['pidExpireLogin']=setTimeout(()=>{const _0x38c053=_0x477d18;if(devices[_0x36f743]['pidRefreshToken'])clearTimeout(devices[_0x36f743]['pidRefreshToken']);removeSocketListeners(_0x36f743),addBlacklist(_0x36f743),devices[_0x36f743][_0x38c053(0x22e)]=null,devices[_0x36f743]['telegram2FaApproval']=null,devices[_0x36f743][_0x38c053(0x288)]['token']=null,devices[_0x36f743]['access']=validateAccess(devices[_0x36f743][_0x38c053(0x288)][_0x38c053(0x151)],_0x36f743),!(devices[_0x36f743][_0x38c053(0x288)][_0x38c053(0x221)]&&devices[_0x36f743]['access'][_0x38c053(0x155)]==_0x38c053(0x224))&&(_0x3ced78==_0x38c053(0x258)?io['to'](_0x36f743)[_0x38c053(0x156)](_0x38c053(0x243),{'access':{'allow':![],'reason':_0x38c053(0x1e6),'token':null}}):io['to'](_0x36f743)[_0x38c053(0x156)](_0x38c053(0x243),{'access':{'allow':![],'reason':_0x38c053(0x1c5),'token':null}})),devices[_0x36f743][_0x38c053(0x288)][_0x38c053(0x151)]=null;},_0x4a886a);}function _0x5d95(_0x5578fc,_0x17c221){const _0x14aabe=_0x2229();return _0x5d95=function(_0x3c5015,_0x1a2f84){_0x3c5015=_0x3c5015-0x14a;let _0x2229e2=_0x14aabe[_0x3c5015];return _0x2229e2;},_0x5d95(_0x5578fc,_0x17c221);}function setTokenRefresh(_0x4006c6){const _0x593a9d=_0x45927e;if(devices[_0x4006c6][_0x593a9d(0x22b)])clearTimeout(devices[_0x4006c6][_0x593a9d(0x22b)]);devices[_0x4006c6][_0x593a9d(0x22b)]=setTimeout(()=>{const _0x3ed0b6=_0x593a9d;getClientsWithUuid(_0x4006c6)[_0x3ed0b6(0x204)]!=0x0?(devices[_0x4006c6][_0x3ed0b6(0x288)]=refreshToken(_0x4006c6),io['to'](_0x4006c6)[_0x3ed0b6(0x156)](_0x3ed0b6(0x243),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4006c6]['access'],'externalip':devices[_0x4006c6]['ip'],'publicKey':secure[_0x3ed0b6(0x1b6)],'validInstallation':validInstallation}),setTokenRefresh(_0x4006c6)):clearTimeout(devices[_0x4006c6][_0x3ed0b6(0x22b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x40db90){const _0x344a43=_0x45927e,_0x35b41a=getClient(_0x40db90['id'])['uuid'];_0x40db90[_0x344a43(0x156)]('bots',config),_0x40db90['emit'](_0x344a43(0x27b),cleanSettings()),_0x40db90['on']('add-bot',_0x2e3dde=>{if(validateAccess(_0x2e3dde,_0x35b41a)['allow'])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x40db90['on'](_0x344a43(0x28b),(_0x54d1d3,_0x4bc4be)=>{const _0x6ab6ac=_0x344a43;if(validateAccess(_0x4bc4be,_0x35b41a)[_0x6ab6ac(0x221)])toggleBot(_0x54d1d3[_0x6ab6ac(0x1bf)],_0x54d1d3[_0x6ab6ac(0x243)],_0x54d1d3[_0x6ab6ac(0x222)]);else logging(_0x6ab6ac(0x205));}),_0x40db90['on'](_0x344a43(0x22c),(_0x2a8e51,_0x3d11d7)=>{const _0x556d3b=_0x344a43;if(validateAccess(_0x3d11d7,_0x35b41a)['allow'])deleteBot(_0x2a8e51);else logging(_0x556d3b(0x1f6));}),_0x40db90['on'](_0x344a43(0x1d2),(_0x379079,_0x329780)=>{const _0xd7c97a=_0x344a43;if(validateAccess(_0x329780,_0x35b41a)[_0xd7c97a(0x221)])storeSettings(_0x379079,!![]);else logging(_0xd7c97a(0x236));}),_0x40db90['on'](_0x344a43(0x1e0),(_0x2dad6f,_0x4f0db6)=>{const _0x4306fd=_0x344a43;if(validateAccess(_0x4f0db6,_0x35b41a)['allow'])updateBB();else logging(_0x4306fd(0x236));}),_0x40db90['on'](_0x344a43(0x1a9),_0x33916e=>{const _0x2e482a=_0x344a43;if(validateAccess(_0x33916e,_0x35b41a)[_0x2e482a(0x221)]){if(devices[_0x35b41a][_0x2e482a(0x22b)])clearTimeout(devices[_0x35b41a]['pidRefreshToken']);if(devices[_0x35b41a][_0x2e482a(0x199)])clearTimeout(devices[_0x35b41a][_0x2e482a(0x199)]);removeSocketListeners(getClient(_0x40db90['id'])[_0x2e482a(0x22d)]),addBlacklist(_0x35b41a),devices[_0x35b41a][_0x2e482a(0x22e)]=null,devices[_0x35b41a][_0x2e482a(0x1e8)]=null,devices[_0x35b41a][_0x2e482a(0x288)]['token']=null,io['to'](getClient(_0x40db90['id'])[_0x2e482a(0x22d)])['emit'](_0x2e482a(0x243),{'access':{'allow':![],'reason':_0x2e482a(0x1de),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function _0x2229(){const _0x125a6b=['Alerts','User\x20has\x20been\x20validated','reject','2FA\x20required','Notifications\x20disabled\x0a','catch','set','index.html','timestamp','All\x20bots','yes','lowdb','bbUsername','Allow\x20login\x20from\x20IP\x20address\x20<b>','notification','allow','live','2FA\x20login\x20required','login\x20not\x20required','4paQHFR','Notifications\x20types:\x20','sha256','1804566skROnb','write','/:bot/history','pidRefreshToken','delete-bot','uuid','telegramIpApproval','\x20>\x20','kill','remoteAddress','store-headless','readdirSync','server','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','611808Ckwmvp','sockets','argv','disconnect','Balance\x20Bot','temporaryAccessAllowed','\x20minutes','alerts','-----------------------------------------------------------------------------------','-events.json','Notifications\x20enabled','840580ADZmAQ','status','path','get-logs','2FA','\x20/\x20','cancelLoading','/:bot','isDirectory','parse','conn','SIGTERM','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','auth','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','child_process','encryptedUuid','store-configuration','exit','crypto','Invalid\x20username\x20or\x20IP\x20address','deleteHistoryAlerts','login',':\x20Bot\x20Mgr\x20>\x20','remove','jsonwebtoken','getTime','starting\x20new\x20bot\x20|\x20Bot\x20','3000','decrypt','/:bot/portfolio','15\x20min','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','************','storeConfiguration','Invalid\x20authentication\x20token\x20(1)','from','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','chat','login\x20token\x20valid','stop','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','/:bot/support','getMonth','ipc','version.json','orders','static','password','30\x20min','started','cloneDeep','::1','invalid\x20credentials','loginRequired','exp','settings','onText','env','find','bot.js','4164831ffemqa','404\x20Not\x20Found','telegramEnabled','Invalid\x20IP\x20address','once','Unauthorized\x20login\x20attempt\x20(timeout)','join','ipv6','access','showname','toString','update-bot','blacklist','/help\x20-\x20show\x20available\x20commands\x0a','deleted\x20Bot\x20','stopPolling','getUTCHours','getSeconds','hybrid-crypto-js','Invalid\x20Telegram\x20token','/:bot/performance','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','compareSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','config/','referer','error','disabled','token','inherit','bot-','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','reason','emit','2140768uaGkRj','Unauthorized\x20attempt\x20to\x20get\x20portfolio','includes','apiKey','7twGnUD','temporary\x20token\x20generated','restart','getHours','<b>Telegram\x20bot\x20status:</b>\x0a','bb-settings.json','getDate','randomFillSync',',\x20must\x20be\x20a\x204\x20digit\x20number','callback_query','lowdb/adapters/FileSync','1000','polling_error','sendFile','success','data','bot','existsSync','version','placeOrder','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/off\x20-\x20stop\x20bot(s)\x0a','Password\x20has\x20been\x20reset\x20to:\x20','isValid','function','login\x20token\x20generated','Bot\x20','telegram','type','then','log','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','::ffff:127.0.0.1','sortBy','getMinutes','new-disabled','user','Access\x20enabled\x20for\x20','all','order','NTBA_FIX_319','args','telegramToken','</b>\x20?','fork','hasOwnProperty','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','removeListener','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','apply','copyFileSync','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','handshake','listen','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','unlinkSync','2FA\x20login\x20token\x20generated','botname','yargs/yargs','default','Bot\x20Mgr\x20>\x20starting\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','pidExpireLogin','telegramEvents','http','split','defaults','name','604077Fqhcqx','build2','new','telegramUsername','RSA','headers','ipaddr.js','5\x20min','place-order','-performance.json','logout','build','(((.+)+)+)+$','Login\x20accepted','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','enabled','f2aRequired','\x20|\x20','toIPv4Address','emitHistory','sign','generateKeyPairAsync','hashSync','publicKey','-results.json','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','storeHeadless','No\x20bots\x20running\x20right\x20now','get-starting-balances','connection','add','delete-alerts','botID','hex','use','login\x20required','temporary\x20access\x20rejected','push','temporary\x20access\x20timeout','send','show','Login\x20rejected','assign','Invalid\x20authentication\x20token\x20(2)','/:bot/configuration','socket.io','/on\x20-\x20start\x20bot(s)\x0a','245130ZsEMjR','mkdirSync','randomBytes','settings.','store-settings','username','answerCallbackQuery','accept','SIGINT','whitelistEnabled','Password\x20reset\x20rejected','idling\x20bot\x20\x20\x20|\x20Bot\x20','Error:\x20Invalid\x20argument\x20','Temporary\x20access\x20rejected','bbPassword','running','logged\x20out','disabled\x20Bot\x20','update-bb','initclient','@analytics/google-analytics','telegramChatId','verify','127.0.0.1','access\x20timeout','message','telegram2FaApproval','sendMessage','Unauthorized\x20attempt\x20to\x20store\x20configuration','All\x20bots\x20running\x20right\x20now','bcryptjs','get','filter','stopped','botmanager','privateKey','Bot\x20Mgr\x20>\x20','restarting\x20Bot\x20','removeAllListeners','HTML','Unauthorized\x20attempt\x20to\x20delete\x20bot','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','UA-192771731-1','timeshift','bots','value','reload','expiry','temporary\x20access\x20not\x20allowed','clientip','secret','bb-config.json','padStart','match','length','Unauthorized\x20attempt\x20to\x20update\x20bot','page','/restart\x20-\x20restart\x20bot(s)\x0a','Token\x20blacklisted','get-portfolio','slice','search','map','forEach','RSA-OAEP','event','<b>Balance\x20Bot\x20status:</b>\x0a','getFullYear'];_0x2229=function(){return _0x125a6b;};return _0x2229();}function initializeSocketBot(_0x190c50){const _0x4c39e0=_0x45927e,_0x1f83d7=getClient(_0x190c50['id'])[_0x4c39e0(0x16b)],_0x147940=getClient(_0x190c50['id'])['uuid'];_0x190c50['on'](_0x4c39e0(0x245),(_0x16480d,_0xba7680)=>{const _0x50df0f=_0x4c39e0;if(validateAccess(_0xba7680,_0x147940)[_0x50df0f(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x50df0f(0x1c6)]({'function':_0x50df0f(0x1b2),'args':_0x16480d});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x190c50['on'](_0x4c39e0(0x1be),(_0x2f21a2,_0xd51bfc)=>{const _0x147e95=_0x4c39e0;if(validateAccess(_0xd51bfc,_0x147940)[_0x147e95(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x147e95(0x1c6)]({'function':_0x147e95(0x257),'args':_0x2f21a2});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x190c50['on'](_0x4c39e0(0x209),(_0x32412d,_0x558a2b)=>{const _0x4ab70d=_0x4c39e0;if(validateAccess(_0x558a2b,_0x147940)[_0x4ab70d(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x4ab70d(0x1c6)]({'function':'getPortfolio','args':_0x32412d});}else logging(_0x4ab70d(0x158));}),_0x190c50['on'](_0x4c39e0(0x253),(_0x2f8642,_0x4a7e83)=>{const _0x5004d0=_0x4c39e0;if(validateAccess(_0x4a7e83,_0x147940)[_0x5004d0(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x5004d0(0x1c6)]({'function':_0x5004d0(0x264),'args':_0x2f8642});}else logging(_0x5004d0(0x1ea));}),_0x190c50['on'](_0x4c39e0(0x232),(_0x2bbebf,_0x2ac40b)=>{const _0x52c8c5=_0x4c39e0;if(validateAccess(_0x2ac40b,_0x147940)[_0x52c8c5(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x52c8c5(0x1c6)]({'function':_0x52c8c5(0x1b9),'args':_0x2bbebf});}else logging(_0x52c8c5(0x191));}),_0x190c50['on'](_0x4c39e0(0x1bb),_0x12a0b2=>{const _0x1e7341=_0x4c39e0;if(validateAccess(_0x12a0b2,_0x147940)[_0x1e7341(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7]['send']({'function':'getStartingBalances','args':null});}else logging(_0x1e7341(0x1b8));}),_0x190c50['on'](_0x4c39e0(0x1a7),(_0x1061ee,_0x2e7417)=>{const _0x1db418=_0x4c39e0;if(validateAccess(_0x2e7417,_0x147940)[_0x1db418(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0x1db418(0x1c6)]({'function':_0x1db418(0x16e),'args':_0x1061ee});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x190c50['on']('cancel-loading',_0x5f3084=>{const _0xf1cbf=_0x4c39e0;if(validateAccess(_0x5f3084,_0x147940)[_0xf1cbf(0x221)]){if(pid[_0x1f83d7])pid[_0x1f83d7][_0xf1cbf(0x1c6)]({'function':_0xf1cbf(0x248),'args':null});}else logging(_0xf1cbf(0x17a));}),_0x190c50['on'](_0x4c39e0(0x1a9),_0x13de80=>{const _0x3c8270=_0x4c39e0;if(validateAccess(_0x13de80,_0x147940)[_0x3c8270(0x221)]){if(devices[_0x147940][_0x3c8270(0x22b)])clearTimeout(devices[_0x147940][_0x3c8270(0x22b)]);if(devices[_0x147940]['pidExpireLogin'])clearTimeout(devices[_0x147940]['pidExpireLogin']);removeSocketListeners(getClient(_0x190c50['id'])['uuid']),addBlacklist(_0x147940),devices[_0x147940]['telegramIpApproval']=null,devices[_0x147940][_0x3c8270(0x1e8)]=null,devices[_0x147940][_0x3c8270(0x288)][_0x3c8270(0x151)]=null,io['to'](getClient(_0x190c50['id'])[_0x3c8270(0x22d)])[_0x3c8270(0x156)]('status',{'access':{'allow':![],'reason':_0x3c8270(0x1de),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x5594ea){const _0x103153=_0x45927e;getClientsWithUuid(_0x5594ea)[_0x103153(0x20d)](_0x319611=>{const _0x9e07ef=_0x103153;getSocket(_0x319611['id'])[_0x9e07ef(0x1f4)]();});}function cleanSettings(){const _0x502eb9=_0x45927e;let _0x1b5dd6=settings;return settings[_0x502eb9(0x185)]&&settings[_0x502eb9(0x185)]!=''&&(_0x1b5dd6={..._0x1b5dd6,'telegramToken':_0x502eb9(0x263)}),settings[_0x502eb9(0x1dc)]&&settings[_0x502eb9(0x1dc)]!=''&&(_0x1b5dd6={..._0x1b5dd6,'bbPassword':_0x502eb9(0x263)}),_0x1b5dd6;}function updateBB(){const _0x1db50a=_0x45927e;installingUpdate=!![],config[_0x1db50a(0x20d)](_0x29f751=>{const _0xdf28fb=_0x1db50a;restartBot(_0x29f751[_0xdf28fb(0x1bf)]);}),process[_0x1db50a(0x1c6)]({'update':!![]},_0x564384=>{});}function startBot(_0x1fc737,_0x566554,_0x42bb23){const _0x58a995=_0x45927e;let _0x5d4fa3=![];const _0x6e7328=_0x1fc737[0x0];_0x566554={..._0x566554,'stdio':[_0x58a995(0x152),_0x58a995(0x152),_0x58a995(0x152),_0x58a995(0x26f)]},pid[_0x6e7328]=childProcess[_0x58a995(0x187)](botfile,_0x1fc737,_0x566554),pid[_0x6e7328]['on'](_0x58a995(0x1e7),_0x4f7c32=>{const _0x187fb3=_0x58a995;switch(Object['keys'](_0x4f7c32)[0x0]){case _0x187fb3(0x194):updateBotName(_0x6e7328,_0x4f7c32[_0x187fb3(0x194)]);break;case _0x187fb3(0x243):updateStatus(_0x6e7328,_0x4f7c32['status']);break;case'live':updateLive(_0x6e7328,_0x4f7c32['live']);break;case _0x187fb3(0x275):updateLive(_0x6e7328,_0x4f7c32[_0x187fb3(0x275)]),io['to'](_0x6e7328)[_0x187fb3(0x156)](_0x187fb3(0x243),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x187fb3(0x26b):_0x4f7c32[_0x187fb3(0x26b)]==_0x187fb3(0x15d)&&restartBot(_0x6e7328);_0x4f7c32[_0x187fb3(0x26b)]==_0x187fb3(0x230)&&toggleBot(_0x6e7328,'disabled',_0x187fb3(0x1ef));break;case'telegram':sendTelegram(_0x6e7328,_0x4f7c32[_0x187fb3(0x176)]);break;case _0x187fb3(0x173):io['to'](_0x6e7328)[_0x187fb3(0x156)](_0x4f7c32['function'],_0x4f7c32[_0x187fb3(0x184)]);break;}}),pid[_0x6e7328]['on'](_0x58a995(0x14f),function(_0x5c114d){if(_0x5d4fa3)return;_0x5d4fa3=!![],_0x42bb23(_0x5c114d);}),pid[_0x6e7328]['on'](_0x58a995(0x254),function(_0x4a4913){const _0x2f91b2=_0x58a995;if(installingUpdate)return;if(_0x5d4fa3)return;_0x5d4fa3=!![],_0x42bb23(null);const _0x49da82=dbConfig[_0x2f91b2(0x1ed)](_0x2f91b2(0x1fa))[_0x2f91b2(0x27e)]({'botID':_0x6e7328})[_0x2f91b2(0x1fb)]();_0x49da82&&(_0x49da82['status']==_0x2f91b2(0x1ae)||_0x49da82[_0x2f91b2(0x243)]==_0x2f91b2(0x1a1))&&(updateLive(_0x6e7328,_0x2f91b2(0x1ef)),logging(_0x2f91b2(0x1f3)+_0x6e7328),startBot([_0x6e7328,userID],{'cwd':bbpath},function(_0x4bb669){if(_0x4bb669)logging(_0x4bb669);}));});}function stopBot(_0x1066c5){const _0x3767a3=_0x45927e;getClientsWithBotID(_0x1066c5)[_0x3767a3(0x20d)](_0x8ad7a9=>{const _0x5b56d1=_0x3767a3;getSocket(_0x8ad7a9['id'])[_0x5b56d1(0x23a)](!![]),removeClient(_0x8ad7a9['id']);});if(pid[_0x1066c5])pid[_0x1066c5]['kill']();}function restartBot(_0x4d1742){if(pid[_0x4d1742])pid[_0x4d1742]['kill']();}function addBot(){const _0x5010b5=_0x45927e;let _0x107beb;for(let _0x457d0c=0x1;_0x457d0c<0x3e9;_0x457d0c++){_0x107beb=_0x457d0c[_0x5010b5(0x28a)]()[_0x5010b5(0x202)](0x3,'0');let _0x3e01a0=config['find'](_0x4f65e2=>_0x4f65e2[_0x5010b5(0x1bf)]==_0x107beb);if(!_0x3e01a0)break;}if(_0x107beb===_0x5010b5(0x166)){logging(_0x5010b5(0x24e));return;}logging(_0x5010b5(0x25d)+_0x107beb),dbConfig[_0x5010b5(0x1ed)](_0x5010b5(0x1fa))['push']({'botID':_0x107beb,'botname':_0x5010b5(0x175)+_0x107beb,'status':'new','live':''})[_0x5010b5(0x229)](),startBot([_0x107beb,userID],{'cwd':bbpath},function(_0x18f027){if(_0x18f027)logging(_0x18f027);}),config=getConfiguration(),io['to'](_0x5010b5(0x1f0))[_0x5010b5(0x156)]('bots',config);}function deleteBot(_0x108823){const _0x3175d2=_0x45927e;getClientsWithBotID(_0x108823)['forEach'](_0xf74137=>{const _0x11f74f=_0x5d95;getSocket(_0xf74137['id'])[_0x11f74f(0x23a)](!![]),removeClient(_0xf74137['id']);}),dbConfig[_0x3175d2(0x1ed)](_0x3175d2(0x1fa))['remove']({'botID':_0x108823})[_0x3175d2(0x229)](),logging(_0x3175d2(0x28e)+_0x108823),stopBot(_0x108823);try{fs[_0x3175d2(0x192)](path['join'](configpath,_0x3175d2(0x153)+_0x108823+'-config.json')),fs[_0x3175d2(0x192)](path[_0x3175d2(0x286)](configpath,'bot-'+_0x108823+_0x3175d2(0x240))),fs['unlinkSync'](path['join'](configpath,'bot-'+_0x108823+_0x3175d2(0x1a8))),fs['unlinkSync'](path['join'](configpath,_0x3175d2(0x153)+_0x108823+_0x3175d2(0x1b7)));}catch(_0x2c460e){if(_0x2c460e)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x2c460e);}config=getConfiguration(),io['to'](_0x3175d2(0x1f0))[_0x3175d2(0x156)](_0x3175d2(0x1fa),config);}function toggleBot(_0x3f4c61,_0x1cca52,_0x39a6c4){const _0x1607c9=_0x45927e;dbConfig[_0x1607c9(0x1ed)](_0x1607c9(0x1fa))[_0x1607c9(0x27e)]({'botID':_0x3f4c61})[_0x1607c9(0x1c9)]({'status':_0x1cca52})[_0x1607c9(0x1c9)]({'live':_0x39a6c4})['write']();if(_0x1cca52==_0x1607c9(0x1ae)||_0x1cca52==_0x1607c9(0x1a1))logging('enabled\x20Bot\x20'+_0x3f4c61),startBot([_0x3f4c61,userID],{'cwd':bbpath},function(_0x5b6640){if(_0x5b6640)logging(_0x5b6640);});else(_0x1cca52==_0x1607c9(0x150)||_0x1cca52==_0x1607c9(0x17e))&&(logging(_0x1607c9(0x1df)+_0x3f4c61),stopBot(_0x3f4c61));config=getConfiguration(),io['to']('botmanager')[_0x1607c9(0x156)](_0x1607c9(0x1fa),config);}function toggleStatus(_0x17d55d){const _0x2b46fc=_0x45927e;let _0x15a548=dbConfig[_0x2b46fc(0x1ed)](_0x2b46fc(0x1fa))[_0x2b46fc(0x27e)]({'botID':_0x17d55d})['value'](),_0x4d58df;if(_0x15a548[_0x2b46fc(0x243)]===_0x2b46fc(0x1ae))_0x4d58df='disabled';else{if(_0x15a548[_0x2b46fc(0x243)]==='new')_0x4d58df='new-disabled';else{if(_0x15a548['status']===_0x2b46fc(0x17e))_0x4d58df=_0x2b46fc(0x1a1);else{if(_0x15a548['status']===_0x2b46fc(0x150))_0x4d58df=_0x2b46fc(0x1ae);}}}return _0x4d58df;}function updateStatus(_0x218969,_0x1b4ef4){const _0x30a404=_0x45927e;dbConfig[_0x30a404(0x1ed)](_0x30a404(0x1fa))[_0x30a404(0x27e)]({'botID':_0x218969})[_0x30a404(0x1c9)]({'status':_0x1b4ef4})[_0x30a404(0x229)](),config=getConfiguration(),io['to']('botmanager')[_0x30a404(0x156)](_0x30a404(0x1fa),config);}function updateLive(_0x2fe7d6,_0x47a691){const _0xdf7745=_0x45927e;dbConfig['get'](_0xdf7745(0x1fa))[_0xdf7745(0x27e)]({'botID':_0x2fe7d6})['assign']({'live':_0x47a691})[_0xdf7745(0x229)](),config=getConfiguration(),io['to'](_0xdf7745(0x1f0))[_0xdf7745(0x156)](_0xdf7745(0x1fa),config);}function updateBotName(_0x1c585f,_0x3458ed){const _0x209664=_0x45927e;dbConfig[_0x209664(0x1ed)](_0x209664(0x1fa))[_0x209664(0x27e)]({'botID':_0x1c585f})[_0x209664(0x1c9)]({'botname':_0x3458ed})['write'](),config=getConfiguration(),io['to'](_0x209664(0x1f0))['emit'](_0x209664(0x1fa),config);}function telegramError(_0x41e900){const _0x7f1df4=_0x45927e;console[_0x7f1df4(0x179)](getTimeStamp()+_0x7f1df4(0x198));}function validateTelegram(_0x48d08f){const _0x5353aa=_0x45927e;if(_0x48d08f[_0x5353aa(0x266)][_0x5353aa(0x1d3)]!=settings[_0x5353aa(0x1a2)]&&'@'+_0x48d08f['from']['username']!=settings['telegramUsername'])return tgBot[_0x5353aa(0x1e9)](_0x48d08f[_0x5353aa(0x269)]['id'],_0x5353aa(0x189),{'parse_mode':'HTML'})[_0x5353aa(0x217)](_0x345d58=>{telegramError(_0x345d58);}),![];return!![];}async function initTelegram(){const _0x21ec71=_0x45927e;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x21ec71(0x185)],{'polling':!![]});let _0x306898=_0x21ec71(0x267);_0x306898+='\x0a',_0x306898+='/enable\x20-\x20enable\x20notifications\x0a',_0x306898+='/disable\x20-\x20disable\x20notifications\x0a',_0x306898+=_0x21ec71(0x18b),_0x306898+=_0x21ec71(0x207),_0x306898+=_0x21ec71(0x1cd),_0x306898+=_0x21ec71(0x170),_0x306898+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x306898+=_0x21ec71(0x28d);let _0x4e0733=_0x21ec71(0x268);_0x4e0733+='\x0a',_0x4e0733+=_0x306898,tgBot[_0x21ec71(0x27c)](/\/start/,_0x55d6ae=>{const _0x1bde0b=_0x21ec71;if(!validateTelegram(_0x55d6ae))return;if(settings['telegramChatId']!=_0x55d6ae[_0x1bde0b(0x269)]['id'])updateSetting(_0x1bde0b(0x1e3),_0x55d6ae[_0x1bde0b(0x269)]['id']);updateSetting(_0x1bde0b(0x282),!![]),tgBot[_0x1bde0b(0x1e9)](_0x55d6ae[_0x1bde0b(0x269)]['id'],_0x4e0733)[_0x1bde0b(0x217)](_0x97d093=>{telegramError(_0x97d093);});}),tgBot['onText'](/\/enable/,_0x400277=>{const _0x1d1ba8=_0x21ec71;if(!validateTelegram(_0x400277))return;if(settings[_0x1d1ba8(0x1e3)]!=_0x400277[_0x1d1ba8(0x269)]['id'])updateSetting(_0x1d1ba8(0x1e3),_0x400277[_0x1d1ba8(0x269)]['id']);updateSetting(_0x1d1ba8(0x282),!![]),tgBot[_0x1d1ba8(0x1e9)](_0x400277[_0x1d1ba8(0x269)]['id'],_0x1d1ba8(0x241))[_0x1d1ba8(0x217)](_0xec4245=>{telegramError(_0xec4245);});}),tgBot['onText'](/\/config/,async _0x2b76e3=>{const _0x53d1e1=_0x21ec71;if(!validateTelegram(_0x2b76e3))return;tgBot[_0x53d1e1(0x18a)]('callback_query'),tgBot[_0x53d1e1(0x1e9)](_0x2b76e3[_0x53d1e1(0x269)]['id'],_0x53d1e1(0x262),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x53d1e1(0x271)},{'text':_0x53d1e1(0x212),'callback_data':_0x53d1e1(0x23e)},{'text':'All','callback_data':'all'}]]}})['catch'](_0xbfaf35=>{telegramError(_0xbfaf35);}),tgBot['on']('callback_query',async _0x9a7081=>{const _0x3f4f3e=_0x53d1e1,_0xedb77f=_0x9a7081[_0x3f4f3e(0x16a)],_0x24d550=_0x9a7081[_0x3f4f3e(0x1e7)];tgBot[_0x3f4f3e(0x1d4)](_0x9a7081['id'])[_0x3f4f3e(0x178)](async()=>{const _0xd3f60a=_0x3f4f3e;_0xedb77f==_0xd3f60a(0x271)&&(updateSetting(_0xd3f60a(0x19a),'orders'),updateSetting(_0xd3f60a(0x282),!![]),await tgBot[_0xd3f60a(0x1e9)](_0x24d550['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0xd3f60a(0x217)](_0x5d83c0=>{telegramError(_0x5d83c0);}));_0xedb77f=='alerts'&&(updateSetting(_0xd3f60a(0x19a),_0xd3f60a(0x23e)),updateSetting('telegramEnabled',!![]),await tgBot[_0xd3f60a(0x1e9)](_0x24d550['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0xd3f60a(0x217)](_0x345062=>{telegramError(_0x345062);}));_0xedb77f==_0xd3f60a(0x181)&&(updateSetting(_0xd3f60a(0x19a),_0xd3f60a(0x181)),updateSetting(_0xd3f60a(0x282),!![]),await tgBot[_0xd3f60a(0x1e9)](_0x24d550[_0xd3f60a(0x269)]['id'],_0xd3f60a(0x14c))[_0xd3f60a(0x217)](_0x221d05=>{telegramError(_0x221d05);}));if(!settings[_0xd3f60a(0x1e3)])tgBot[_0xd3f60a(0x1e9)](_0x24d550[_0xd3f60a(0x269)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0xd3f60a(0x217)](_0x1e0809=>{telegramError(_0x1e0809);});}),tgBot[_0x3f4f3e(0x18a)]('callback_query');});}),tgBot['onText'](/\/status/,_0x53eb61=>{const _0x58b18f=_0x21ec71;if(!validateTelegram(_0x53eb61))return;let _0xe0dad6=_0x58b18f(0x210);config['forEach'](_0x406efe=>{const _0x202f8c=_0x58b18f;_0xe0dad6+=_0x202f8c(0x175)+_0x406efe['botID']+'\x20|\x20'+_0x406efe[_0x202f8c(0x194)]+':\x20'+_0x406efe['status']+_0x202f8c(0x247)+_0x406efe[_0x202f8c(0x222)]+'\x0a';}),_0xe0dad6+='\x0a',_0xe0dad6+=_0x58b18f(0x15f),_0xe0dad6+=!settings[_0x58b18f(0x282)]?_0x58b18f(0x216):'Notifications\x20enabled\x0a',_0xe0dad6+=settings[_0x58b18f(0x282)]?settings[_0x58b18f(0x19a)]==_0x58b18f(0x181)?_0x58b18f(0x154):_0x58b18f(0x226)+settings[_0x58b18f(0x19a)]+'\x20only\x0a':'',tgBot[_0x58b18f(0x1e9)](_0x53eb61[_0x58b18f(0x269)]['id'],_0xe0dad6,{'parse_mode':_0x58b18f(0x1f5)})[_0x58b18f(0x217)](_0x347205=>{telegramError(_0x347205);});}),tgBot[_0x21ec71(0x27c)](/\/restart/,_0x3d2d4f=>{const _0xd054b9=_0x21ec71;if(!validateTelegram(_0x3d2d4f))return;tgBot[_0xd054b9(0x18a)]('callback_query');const _0xdee76d=getEnabledBots();if(_0xdee76d[_0xd054b9(0x204)]==0x0)tgBot['sendMessage'](_0x3d2d4f['chat']['id'],_0xd054b9(0x1ba))[_0xd054b9(0x217)](_0x505235=>{telegramError(_0x505235);});else{if(_0xdee76d[_0xd054b9(0x204)]>0x1)_0xdee76d[_0xd054b9(0x1c4)]({'botID':_0xd054b9(0x181)});let _0x3a35b2=[],_0x4b96c4=[];const _0x29fc93=_0xdee76d[_0xd054b9(0x204)]%0x4==0x0||_0xdee76d[_0xd054b9(0x204)]%0x4==0x3||_0xdee76d[_0xd054b9(0x204)]%0x3==0x1?0x4:0x3;let _0x365189=0x0;_0xdee76d[_0xd054b9(0x20d)]((_0x5bb59d,_0x42840a)=>{const _0x1126fb=_0xd054b9;if(_0x42840a%_0x29fc93==0x0)_0x4b96c4=[];_0x4b96c4['push']({'text':_0x5bb59d[_0x1126fb(0x1bf)]=='all'?_0x1126fb(0x21b):_0x1126fb(0x175)+_0x5bb59d[_0x1126fb(0x1bf)],'callback_data':_0x5bb59d[_0x1126fb(0x1bf)]}),_0x42840a%_0x29fc93==0x0&&(_0x3a35b2[_0x365189]=_0x4b96c4,_0x365189++);}),tgBot['sendMessage'](_0x3d2d4f['chat']['id'],_0xd054b9(0x18e),{'reply_markup':{'inline_keyboard':_0x3a35b2}})[_0xd054b9(0x217)](_0x3b6ce3=>{telegramError(_0x3b6ce3);}),tgBot['on'](_0xd054b9(0x164),async _0x589bf3=>{const _0x22ce47=_0xd054b9,_0x52372f=_0x589bf3[_0x22ce47(0x16a)],_0x3ac844=_0x589bf3[_0x22ce47(0x1e7)];tgBot['answerCallbackQuery'](_0x589bf3['id'])['then'](async()=>{const _0x1d77b7=_0x22ce47;if(_0x52372f==_0x1d77b7(0x181)){if(settings[_0x1d77b7(0x19a)]==_0x1d77b7(0x271))tgBot[_0x1d77b7(0x1e9)](_0x3ac844[_0x1d77b7(0x269)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x1d77b7(0x217)](_0x3cd4f1=>{telegramError(_0x3cd4f1);});config['forEach'](_0x37a3a4=>{const _0x1b223d=_0x1d77b7;restartBot(_0x37a3a4[_0x1b223d(0x1bf)]);});}else{if(settings[_0x1d77b7(0x19a)]=='orders')tgBot[_0x1d77b7(0x1e9)](_0x3ac844[_0x1d77b7(0x269)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x52372f)['catch'](_0x26943f=>{telegramError(_0x26943f);});restartBot(_0x52372f);}}),tgBot[_0x22ce47(0x18a)]('callback_query');});}}),tgBot[_0x21ec71(0x27c)](/\/on/,_0x5cb51b=>{const _0x56648a=_0x21ec71;if(!validateTelegram(_0x5cb51b))return;tgBot['removeListener'](_0x56648a(0x164));const _0x5cf9e3=getDisabledBots();if(_0x5cf9e3[_0x56648a(0x204)]==0x0)tgBot[_0x56648a(0x1e9)](_0x5cb51b[_0x56648a(0x269)]['id'],_0x56648a(0x1eb))['catch'](_0x197573=>{telegramError(_0x197573);});else{if(_0x5cf9e3[_0x56648a(0x204)]>0x1)_0x5cf9e3[_0x56648a(0x1c4)]({'botID':_0x56648a(0x181)});let _0x202caa=[],_0x71bafa=[];const _0x4b9e85=_0x5cf9e3[_0x56648a(0x204)]%0x4==0x0||_0x5cf9e3['length']%0x4==0x3||_0x5cf9e3['length']%0x3==0x1?0x4:0x3;let _0x727820=0x0;_0x5cf9e3[_0x56648a(0x20d)]((_0x5d5a75,_0xa780c6)=>{const _0x208aef=_0x56648a;if(_0xa780c6%_0x4b9e85==0x0)_0x71bafa=[];_0x71bafa[_0x208aef(0x1c4)]({'text':_0x5d5a75[_0x208aef(0x1bf)]=='all'?'All\x20bots':'Bot\x20'+_0x5d5a75[_0x208aef(0x1bf)],'callback_data':_0x5d5a75[_0x208aef(0x1bf)]}),_0xa780c6%_0x4b9e85==0x0&&(_0x202caa[_0x727820]=_0x71bafa,_0x727820++);}),tgBot['sendMessage'](_0x5cb51b[_0x56648a(0x269)]['id'],_0x56648a(0x16f),{'reply_markup':{'inline_keyboard':_0x202caa}})[_0x56648a(0x217)](_0x527ac0=>{telegramError(_0x527ac0);}),tgBot['on'](_0x56648a(0x164),async _0x32e378=>{const _0x533288=_0x56648a,_0x205c7b=_0x32e378[_0x533288(0x16a)],_0x3a1161=_0x32e378[_0x533288(0x1e7)];tgBot['answerCallbackQuery'](_0x32e378['id'])['then'](async()=>{const _0x474a51=_0x533288;if(_0x205c7b==_0x474a51(0x181)){if(settings[_0x474a51(0x19a)]==_0x474a51(0x271))tgBot[_0x474a51(0x1e9)](_0x3a1161[_0x474a51(0x269)]['id'],_0x474a51(0x250))['catch'](_0x58a340=>{telegramError(_0x58a340);});_0x5cf9e3['forEach'](_0x26da49=>{const _0x2480a2=_0x474a51;if(_0x26da49[_0x2480a2(0x1bf)]!='all')toggleBot(_0x26da49[_0x2480a2(0x1bf)],toggleStatus(_0x26da49[_0x2480a2(0x1bf)]),_0x2480a2(0x1ef));});}else{if(settings[_0x474a51(0x19a)]==_0x474a51(0x271))tgBot[_0x474a51(0x1e9)](_0x3a1161[_0x474a51(0x269)]['id'],_0x474a51(0x197)+_0x205c7b)[_0x474a51(0x217)](_0x1ee103=>{telegramError(_0x1ee103);});toggleBot(_0x205c7b,toggleStatus(_0x205c7b),_0x474a51(0x1ef));}}),tgBot['removeListener'](_0x533288(0x164));});}}),tgBot[_0x21ec71(0x27c)](/\/off/,_0x1382ca=>{const _0x143318=_0x21ec71;if(!validateTelegram(_0x1382ca))return;tgBot['removeListener']('callback_query');const _0x1bb502=getEnabledBots();if(_0x1bb502[_0x143318(0x204)]==0x0)tgBot[_0x143318(0x1e9)](_0x1382ca[_0x143318(0x269)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x143318(0x217)](_0x269626=>{telegramError(_0x269626);});else{if(_0x1bb502[_0x143318(0x204)]>0x1)_0x1bb502[_0x143318(0x1c4)]({'botID':_0x143318(0x181)});let _0x28d206=[],_0x563015=[];const _0xb3c20a=_0x1bb502[_0x143318(0x204)]%0x4==0x0||_0x1bb502['length']%0x4==0x3||_0x1bb502[_0x143318(0x204)]%0x3==0x1?0x4:0x3;let _0x3845ce=0x0;_0x1bb502['forEach']((_0x577765,_0x531c5c)=>{const _0x13146a=_0x143318;if(_0x531c5c%_0xb3c20a==0x0)_0x563015=[];_0x563015[_0x13146a(0x1c4)]({'text':_0x577765[_0x13146a(0x1bf)]=='all'?_0x13146a(0x21b):_0x13146a(0x175)+_0x577765[_0x13146a(0x1bf)],'callback_data':_0x577765['botID']}),_0x531c5c%_0xb3c20a==0x0&&(_0x28d206[_0x3845ce]=_0x563015,_0x3845ce++);}),tgBot[_0x143318(0x1e9)](_0x1382ca[_0x143318(0x269)]['id'],_0x143318(0x1f7),{'reply_markup':{'inline_keyboard':_0x28d206}})[_0x143318(0x217)](_0xfa607c=>{telegramError(_0xfa607c);}),tgBot['on']('callback_query',async _0x204f65=>{const _0x265ce1=_0x143318,_0x2bee19=_0x204f65['data'],_0x36f7ea=_0x204f65[_0x265ce1(0x1e7)];tgBot[_0x265ce1(0x1d4)](_0x204f65['id'])[_0x265ce1(0x178)](async()=>{const _0x328333=_0x265ce1;if(_0x2bee19==_0x328333(0x181)){if(settings[_0x328333(0x19a)]==_0x328333(0x271))tgBot['sendMessage'](_0x36f7ea[_0x328333(0x269)]['id'],_0x328333(0x1ad))['catch'](_0xbd11fa=>{telegramError(_0xbd11fa);});_0x1bb502[_0x328333(0x20d)](_0x21148f=>{const _0x5a4c3c=_0x328333;if(_0x21148f[_0x5a4c3c(0x1bf)]!=_0x5a4c3c(0x181))toggleBot(_0x21148f[_0x5a4c3c(0x1bf)],toggleStatus(_0x21148f[_0x5a4c3c(0x1bf)]),'stopped');});}else{if(settings['telegramEvents']==_0x328333(0x271))tgBot[_0x328333(0x1e9)](_0x36f7ea[_0x328333(0x269)]['id'],_0x328333(0x235)+_0x2bee19)['catch'](_0x3e1656=>{telegramError(_0x3e1656);});toggleBot(_0x2bee19,toggleStatus(_0x2bee19),_0x328333(0x1ef));}}),tgBot[_0x265ce1(0x18a)](_0x265ce1(0x164));});}}),tgBot[_0x21ec71(0x27c)](/\/disable/,_0x314d3e=>{const _0x4c141f=_0x21ec71;if(!validateTelegram(_0x314d3e))return;tgBot[_0x4c141f(0x1e9)](_0x314d3e['chat']['id'],'Notifications\x20disabled')[_0x4c141f(0x217)](_0xdd4c7f=>{telegramError(_0xdd4c7f);}),updateSetting(_0x4c141f(0x282),![]);}),tgBot[_0x21ec71(0x27c)](/\/help/,_0x3d51e5=>{const _0x7520fb=_0x21ec71;if(!validateTelegram(_0x3d51e5))return;tgBot[_0x7520fb(0x1e9)](_0x3d51e5[_0x7520fb(0x269)]['id'],_0x306898)[_0x7520fb(0x217)](_0x1d70e0=>{telegramError(_0x1d70e0);});}),tgBot['on'](_0x21ec71(0x167),_0x5613a8=>{const _0x45d240=_0x21ec71;_0x5613a8[_0x45d240(0x28a)]()[_0x45d240(0x159)](_0x45d240(0x281))&&(logging(_0x45d240(0x293)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x45d240(0x1f0))['emit'](_0x45d240(0x220),_0x45d240(0x293)));}),process[_0x21ec71(0x284)](_0x21ec71(0x1d6),()=>{const _0x14d313=_0x21ec71;if(tgBot)tgBot[_0x14d313(0x28f)]();process[_0x14d313(0x254)](0x1);}),process['once'](_0x21ec71(0x24d),()=>{const _0x8530ae=_0x21ec71;if(tgBot)tgBot[_0x8530ae(0x28f)]();process[_0x8530ae(0x254)](0x1);});}}function disableTelegram(){const _0x4d9799=_0x45927e;tgBot&&(tgBot[_0x4d9799(0x28f)](),tgBot=null);}function sendTelegram(_0x54d0ae,_0x4a2bae){const _0x320c06=_0x45927e;if(settings['telegramEnabled']){if(settings[_0x320c06(0x19a)]==_0x320c06(0x181)||(_0x4a2bae['type']=='error'||_0x4a2bae[_0x320c06(0x177)]==_0x320c06(0x169))&&settings['telegramEvents']==_0x320c06(0x23e)||_0x4a2bae['type']==_0x320c06(0x182)&&settings['telegramEvents']==_0x320c06(0x271)){if(tgBot&&settings[_0x320c06(0x1e3)]){if(_0x4a2bae[_0x320c06(0x289)])tgBot[_0x320c06(0x1e9)](settings['telegramChatId'],_0x4a2bae[_0x320c06(0x194)]+_0x320c06(0x22f)+_0x4a2bae['event'])[_0x320c06(0x217)](_0x7d993a=>{telegramError(_0x7d993a);});else tgBot[_0x320c06(0x1e9)](settings[_0x320c06(0x1e3)],_0x320c06(0x175)+_0x54d0ae+'\x20>\x20'+_0x4a2bae[_0x320c06(0x20f)])[_0x320c06(0x217)](_0x207be3=>{telegramError(_0x207be3);});}}}}function getDeviceWithIp(_0x480914){const _0x15d2fa=_0x45927e;return devices[_0x15d2fa(0x27e)](_0x2f5687=>_0x2f5687['ip']===_0x480914);}function temporaryAccess2FA(_0x1c72ba,_0x343636){const _0x10105c=_0x45927e;let _0x22634a=new Date(),_0x5708bc=![];if(lastIpApproval){if(_0x22634a-lastIpApproval<0x1388)_0x5708bc=!![];}lastIpApproval=new Date();if(_0x5708bc)return;tgBot&&settings[_0x10105c(0x1e3)]&&(tgBot[_0x10105c(0x18a)](_0x10105c(0x164)),tgBot['sendMessage'](settings[_0x10105c(0x1e3)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x343636)['show']+_0x10105c(0x186),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x10105c(0x1a6),'callback_data':'5'},{'text':_0x10105c(0x261),'callback_data':'15'},{'text':_0x10105c(0x274),'callback_data':'30'},{'text':_0x10105c(0x214),'callback_data':_0x10105c(0x214)}]]}})[_0x10105c(0x217)](_0x5f28f1=>{telegramError(_0x5f28f1);}),tgBot['on'](_0x10105c(0x164),async _0x121121=>{const _0x4f40c3=_0x10105c,_0x2ff946=_0x121121[_0x4f40c3(0x16a)],_0x8c8f65=_0x121121['message'];tgBot[_0x4f40c3(0x1d4)](_0x121121['id'])[_0x4f40c3(0x178)](async()=>{const _0x4c697d=_0x4f40c3;devices[_0x1c72ba][_0x4c697d(0x22e)]={'clientip':_0x343636,'timestamp':new Date()[_0x4c697d(0x25c)](),'expiry':_0x2ff946},_0x2ff946!=_0x4c697d(0x214)?(await tgBot[_0x4c697d(0x1e9)](_0x8c8f65[_0x4c697d(0x269)]['id'],_0x4c697d(0x180)+_0x2ff946+_0x4c697d(0x23d),{'parse_mode':_0x4c697d(0x1f5)})[_0x4c697d(0x217)](_0x376abd=>{telegramError(_0x376abd);}),io['to'](_0x1c72ba)[_0x4c697d(0x156)](_0x4c697d(0x243),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4c697d(0x1e9)](_0x8c8f65['chat']['id'],_0x4c697d(0x1db))[_0x4c697d(0x217)](_0x592908=>{telegramError(_0x592908);}),io['to'](_0x1c72ba)[_0x4c697d(0x156)](_0x4c697d(0x243),{'access':{'allow':![],'reason':_0x4c697d(0x1c3),'token':null}}));}),tgBot['removeListener'](_0x4f40c3(0x164));}));}function loginAccess2FA(_0x4c7021,_0x24b451){const _0x2a42b6=_0x45927e;tgBot&&settings[_0x2a42b6(0x1e3)]&&(tgBot[_0x2a42b6(0x18a)]('callback_query'),tgBot[_0x2a42b6(0x1e9)](settings['telegramChatId'],_0x2a42b6(0x21f)+normalizeIP(_0x24b451)[_0x2a42b6(0x1c7)]+_0x2a42b6(0x186),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2a42b6(0x1d5),'callback_data':loginExpiry},{'text':_0x2a42b6(0x214),'callback_data':_0x2a42b6(0x214)}]]}})['catch'](_0x523208=>{telegramError(_0x523208);}),tgBot['on'](_0x2a42b6(0x164),async _0x476320=>{const _0x3924fc=_0x2a42b6,_0x4fd383=_0x476320['data'],_0x45a331=_0x476320[_0x3924fc(0x1e7)];tgBot[_0x3924fc(0x1d4)](_0x476320['id'])[_0x3924fc(0x178)](async()=>{const _0xfb7988=_0x3924fc;devices[_0x4c7021][_0xfb7988(0x1e8)]={'clientip':_0x24b451,'timestamp':new Date()[_0xfb7988(0x25c)](),'expiry':_0x4fd383},_0x4fd383!='reject'?(await tgBot['sendMessage'](_0x45a331['chat']['id'],_0xfb7988(0x1ac),{'parse_mode':_0xfb7988(0x1f5)})['catch'](_0x236f71=>{telegramError(_0x236f71);}),io['to'](_0x4c7021)[_0xfb7988(0x156)]('status',{'access':{'allow':![],'reason':_0xfb7988(0x1fc),'token':null}})):(await tgBot[_0xfb7988(0x1e9)](_0x45a331[_0xfb7988(0x269)]['id'],_0xfb7988(0x1c8))['catch'](_0x32e665=>{telegramError(_0x32e665);}),io['to'](_0x4c7021)['emit'](_0xfb7988(0x243),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x3924fc(0x18a)](_0x3924fc(0x164));}));}function getConfiguration(){const _0x1cfae8=_0x45927e;return dbConfig['get']('bots')[_0x1cfae8(0x17c)](_0x1cfae8(0x1bf))[_0x1cfae8(0x1fb)]()||[];}function getEnabledBots(){const _0x40c742=_0x45927e;return dbConfig['get'](_0x40c742(0x1fa))['sortBy'](_0x40c742(0x1bf))[_0x40c742(0x1ee)]({'status':_0x40c742(0x1ae)})['value']()||[];}function getDisabledBots(){const _0x5f074f=_0x45927e;return dbConfig[_0x5f074f(0x1ed)]('bots')['sortBy'](_0x5f074f(0x1bf))[_0x5f074f(0x1ee)]({'status':'disabled'})['value']()||[];}function getSettings(){const _0x3d7123=_0x45927e;return dbSettings[_0x3d7123(0x1ed)](_0x3d7123(0x27b))[_0x3d7123(0x1fb)]()||{'timeshift':0x0};}function getSecure(){const _0x5bbce2=_0x45927e;return dbSecure[_0x5bbce2(0x1ed)]('secure')[_0x5bbce2(0x1fb)]()||{};}function getBlacklist(){const _0x51d210=_0x45927e;return dbSecure[_0x51d210(0x1ed)](_0x51d210(0x28c))[_0x51d210(0x1fb)]()||[];}function broadcastToBots(_0x17f086,_0x1a75cb){const _0x118968=_0x45927e;config[_0x118968(0x20d)](_0x202ffe=>{const _0x31cc02=_0x118968;if(_0x202ffe[_0x31cc02(0x243)]==_0x31cc02(0x1ae)&&_0x202ffe[_0x31cc02(0x222)]==_0x31cc02(0x1dd)){if(pid[_0x202ffe[_0x31cc02(0x1bf)]])pid[_0x202ffe[_0x31cc02(0x1bf)]]['send']({[_0x17f086]:_0x1a75cb});}});}function storeSettings(_0x2593f5,_0x22c09f=![]){const _0x3cfd54=_0x45927e;_0x2593f5={...settings,..._0x2593f5};if(_0x22c09f&&_0x2593f5[_0x3cfd54(0x1dc)]!=_0x3cfd54(0x263)&&_0x2593f5[_0x3cfd54(0x1dc)]!=''){const _0x428f0a=crypt[_0x3cfd54(0x25f)](secure['privateKey'],_0x2593f5['bbPassword'])[_0x3cfd54(0x1e7)][_0x3cfd54(0x19c)]('@')[0x0],_0x52c4e7=bcrypt[_0x3cfd54(0x1b5)](_0x428f0a,saltRounds);_0x2593f5={..._0x2593f5,'bbPassword':_0x52c4e7};}if(_0x22c09f&&_0x2593f5[_0x3cfd54(0x185)]!=_0x3cfd54(0x263)&&_0x2593f5['telegramToken']!=''){const _0x2a2a6d=crypt[_0x3cfd54(0x25f)](secure[_0x3cfd54(0x1f1)],_0x2593f5[_0x3cfd54(0x185)])['message']['split']('@')[0x0];_0x2593f5={..._0x2593f5,'telegramToken':_0x2a2a6d};}const _0x3a3ea1=_0x2593f5[_0x3cfd54(0x185)]!=_0x3cfd54(0x263)&&_0x2593f5[_0x3cfd54(0x185)]!=settings[_0x3cfd54(0x185)]||_0x2593f5[_0x3cfd54(0x1a2)]!=settings[_0x3cfd54(0x1a2)],_0x304858=_0x2593f5[_0x3cfd54(0x185)]==''||_0x2593f5['telegramUsername']=='';if(_0x3a3ea1)_0x2593f5['telegramEvents']=_0x3cfd54(0x181);for(const [_0x5f4eff,_0x180d73]of Object['entries'](_0x2593f5)){if(_0x5f4eff=='telegramToken'&&_0x180d73==_0x3cfd54(0x263)){_0x2593f5[_0x3cfd54(0x185)]=settings['telegramToken'];continue;};if(_0x5f4eff==_0x3cfd54(0x1dc)&&_0x180d73=='************'){_0x2593f5[_0x3cfd54(0x1dc)]=settings[_0x3cfd54(0x1dc)];continue;};dbSettings[_0x3cfd54(0x218)]('settings.'+_0x5f4eff,_0x180d73)[_0x3cfd54(0x229)]();}settings=_0x2593f5,io['to'](_0x3cfd54(0x1f0))[_0x3cfd54(0x156)](_0x3cfd54(0x27b),cleanSettings()),broadcastToBots('timeshift',settings[_0x3cfd54(0x1f9)]);if(_0x3a3ea1&&!_0x304858)initTelegram();if(_0x3a3ea1&&_0x304858)disableTelegram();getAllClients()[_0x3cfd54(0x20d)](_0x55f8f9=>{const _0x413253=_0x3cfd54;getSocket(_0x55f8f9['id'])[_0x413253(0x156)](_0x413253(0x243),{'access':{'allow':![],'reason':_0x413253(0x1fc),'token':null}});});}function updateSetting(_0x3acf34,_0x2919e8){const _0x52af70=_0x45927e;dbSettings[_0x52af70(0x218)](_0x52af70(0x1d1)+_0x3acf34,_0x2919e8)[_0x52af70(0x229)](),settings=getSettings(),io['to'](_0x52af70(0x1f0))[_0x52af70(0x156)](_0x52af70(0x27b),cleanSettings());}function storeSecure(_0x114a07){const _0x59590f=_0x45927e;dbSecure[_0x59590f(0x1ed)]('secure')[_0x59590f(0x1c4)](_0x114a07)[_0x59590f(0x229)](),secure=_0x114a07;}function addBlacklist(_0x7a6b1b){const _0x12dd0e=_0x45927e;cleanBlacklist();let _0x54b3b2;devices[_0x7a6b1b]['telegramIpApproval']?_0x54b3b2=Math['max'](devices[_0x7a6b1b][_0x12dd0e(0x22e)]['expiry'],loginExpiry):_0x54b3b2=loginExpiry,dbSecure[_0x12dd0e(0x1ed)]('blacklist')[_0x12dd0e(0x1c4)]({'expiry':new Date()[_0x12dd0e(0x25c)]()+_0x54b3b2*0x3c*0x3e8,'token':devices[_0x7a6b1b][_0x12dd0e(0x288)][_0x12dd0e(0x151)]})['write'](),blacklist=dbSecure[_0x12dd0e(0x1ed)](_0x12dd0e(0x28c))[_0x12dd0e(0x1fb)]();}function cleanBlacklist(){const _0x3e5b1f=_0x45927e;let _0xd18e31=dbSecure['get'](_0x3e5b1f(0x28c))[_0x3e5b1f(0x276)]()[_0x3e5b1f(0x1fb)](),_0x24bd89=new Date()[_0x3e5b1f(0x25c)]();_0xd18e31['forEach'](_0x3dc3a2=>{const _0xe2bcdf=_0x3e5b1f;_0x3dc3a2['expiry']<_0x24bd89&&dbSecure[_0xe2bcdf(0x1ed)](_0xe2bcdf(0x28c))[_0xe2bcdf(0x25a)]({'expiry':_0x3dc3a2['expiry']})[_0xe2bcdf(0x229)]();});}function initStates(){let _0x2cfc77=getConfiguration();_0x2cfc77['forEach'](_0x39b73b=>{const _0xd202f3=_0x5d95;_0x39b73b[_0xd202f3(0x222)]=_0xd202f3(0x1ef);}),storeConfiguration(_0x2cfc77);}function onKeys(){const _0x5aa2cb=new RSA();return new Promise(_0x2cfb2f=>{const _0x485be5=_0x5d95;_0x5aa2cb[_0x485be5(0x1b4)]()[_0x485be5(0x178)](_0x5c430b=>{_0x2cfb2f(_0x5c430b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x19581f=_0x45927e;let _0x26ddf9=getConfiguration(),_0x4e0cc6=![];_0x26ddf9[_0x19581f(0x20d)](_0x5bb613=>{const _0xa057=_0x19581f;if(_0x5bb613[_0xa057(0x243)]=='running')_0x5bb613[_0xa057(0x243)]=_0xa057(0x1ae),_0x4e0cc6=!![];else _0x5bb613['status']==_0xa057(0x1ef)&&(_0x5bb613[_0xa057(0x243)]='disabled',_0x4e0cc6=!![]);});if(_0x4e0cc6)storeConfiguration(_0x26ddf9);let _0x3173d8=getSecure();if(!_0x3173d8[_0x19581f(0x188)]('secret')){let _0x17c20e=await generateKeys();_0x3173d8[_0x19581f(0x1b6)]=_0x17c20e[_0x19581f(0x1b6)],_0x3173d8[_0x19581f(0x1f1)]=_0x17c20e[_0x19581f(0x1f1)],_0x3173d8[_0x19581f(0x200)]=crypto[_0x19581f(0x1d0)](0x20)[_0x19581f(0x28a)](_0x19581f(0x1c0));;storeSecure(_0x3173d8);}let _0x59ea7f=getSettings();_0x4e0cc6=![];!_0x59ea7f[_0x19581f(0x188)](_0x19581f(0x279))&&(_0x59ea7f['loginRequired']=![],_0x59ea7f[_0x19581f(0x21e)]='',_0x59ea7f['bbPassword']='',_0x59ea7f[_0x19581f(0x1af)]=![],_0x4e0cc6=!![]);!_0x59ea7f[_0x19581f(0x188)]('whitelistEnabled')&&(_0x59ea7f[_0x19581f(0x1d7)]=![],_0x59ea7f['whitelist']=[],_0x59ea7f[_0x19581f(0x23c)]=![],_0x4e0cc6=!![]);if(!_0x59ea7f[_0x19581f(0x188)](_0x19581f(0x282))){if(_0x59ea7f['telegramChatId'])_0x59ea7f[_0x19581f(0x282)]=!![];else _0x59ea7f[_0x19581f(0x282)]=![];_0x4e0cc6=!![];}if(_0x4e0cc6)storeSettings(_0x59ea7f);}function storeConfiguration(_0x528d84){const _0x149e32=_0x45927e;dbConfig[_0x149e32(0x1ed)](_0x149e32(0x1fa))[_0x149e32(0x25a)]()['write'](),dbConfig[_0x149e32(0x1ed)](_0x149e32(0x1fa))[_0x149e32(0x1c4)](..._0x528d84)['write'](),config=_0x528d84;}function resetPassword(){const _0x3913b7=_0x45927e;tgBot&&settings[_0x3913b7(0x1e3)]&&(tgBot['removeListener'](_0x3913b7(0x164)),tgBot[_0x3913b7(0x1e9)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x3913b7(0x1f5),'reply_markup':{'inline_keyboard':[[{'text':_0x3913b7(0x21c),'callback_data':_0x3913b7(0x21c)},{'text':'no','callback_data':'no'}]]}})[_0x3913b7(0x217)](_0x51684b=>{telegramError(_0x51684b);}),tgBot['on']('callback_query',async _0x1b5c57=>{const _0x254e8c=_0x3913b7,_0x5b2109=_0x1b5c57['data'],_0x3ad35d=_0x1b5c57[_0x254e8c(0x1e7)];tgBot['answerCallbackQuery'](_0x1b5c57['id'])['then'](async()=>{const _0x547550=_0x254e8c;if(_0x5b2109!='no'){const _0x1ff005=0xf,_0x590810=_0x547550(0x26c),_0x3581c7=Array[_0x547550(0x266)](crypto[_0x547550(0x162)](new Uint32Array(_0x1ff005)))[_0x547550(0x20c)](_0x15fd38=>_0x590810[_0x15fd38%_0x590810[_0x547550(0x204)]])[_0x547550(0x286)](''),_0x4be1dc=bcrypt[_0x547550(0x1b5)](_0x3581c7,saltRounds);storeSettings({'bbPassword':_0x4be1dc}),await tgBot['sendMessage'](_0x3ad35d[_0x547550(0x269)]['id'],_0x547550(0x171)+_0x3581c7,{'parse_mode':'HTML'})[_0x547550(0x217)](_0x21d2ec=>{telegramError(_0x21d2ec);});}else await tgBot[_0x547550(0x1e9)](_0x3ad35d[_0x547550(0x269)]['id'],_0x547550(0x1d8))[_0x547550(0x217)](_0x1b066f=>{telegramError(_0x1b066f);});}),tgBot[_0x254e8c(0x18a)](_0x254e8c(0x164));}));}function logging(_0x2329d6){const _0xa4c95c=_0x45927e;console[_0xa4c95c(0x179)](getTimeStamp()+_0xa4c95c(0x259)+_0x2329d6);if(tgBot&&settings[_0xa4c95c(0x1e3)]&&settings[_0xa4c95c(0x19a)]!='orders')tgBot[_0xa4c95c(0x1e9)](settings['telegramChatId'],_0xa4c95c(0x1f2)+_0x2329d6)[_0xa4c95c(0x217)](_0x3ff8ea=>{telegramError(_0x3ff8ea);});}function getServerTime(){const _0x166b90=_0x45927e,_0x28302d=new Date();return _0x28302d[_0x166b90(0x211)]()+'/'+(_0x28302d[_0x166b90(0x26e)]()+0x1)[_0x166b90(0x28a)]()[_0x166b90(0x202)](0x2,'0')+'/'+_0x28302d[_0x166b90(0x161)]()[_0x166b90(0x28a)]()['padStart'](0x2,'0')+'\x20'+_0x28302d[_0x166b90(0x15e)]()[_0x166b90(0x28a)]()[_0x166b90(0x202)](0x2,'0')+':'+_0x28302d['getMinutes']()[_0x166b90(0x28a)]()[_0x166b90(0x202)](0x2,'0')+':'+_0x28302d[_0x166b90(0x291)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5bfce2=_0x45927e,_0x7c9188=shiftedTime();return _0x7c9188[_0x5bfce2(0x211)]()+'/'+(_0x7c9188[_0x5bfce2(0x26e)]()+0x1)[_0x5bfce2(0x28a)]()[_0x5bfce2(0x202)](0x2,'0')+'/'+_0x7c9188[_0x5bfce2(0x161)]()[_0x5bfce2(0x28a)]()[_0x5bfce2(0x202)](0x2,'0')+'\x20'+_0x7c9188[_0x5bfce2(0x15e)]()[_0x5bfce2(0x28a)]()[_0x5bfce2(0x202)](0x2,'0')+':'+_0x7c9188[_0x5bfce2(0x17d)]()['toString']()['padStart'](0x2,'0')+':'+_0x7c9188[_0x5bfce2(0x291)]()[_0x5bfce2(0x28a)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x41fe7c=_0x45927e,_0x39cea4=new Date();let _0x3da746=_0x39cea4;if(settings['timeshift']&&settings[_0x41fe7c(0x1f9)]!==0x0)_0x3da746=fns[_0x41fe7c(0x1bd)](_0x39cea4,{'hours':settings['timeshift']});return _0x3da746;}function startScheduler(){const _0x50a22f=_0x45927e;let _0x214f42=new Date()[_0x50a22f(0x290)]();_0x214f42==0x1&&backupConfigFiles();_0x214f42==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x969407=_0x45927e;fs[_0x969407(0x233)](configpath,{'withFileTypes':!![]})[_0x969407(0x20d)](_0x260fb0=>{const _0x18265e=_0x969407;if(!_0x260fb0[_0x18265e(0x24a)]())fs[_0x18265e(0x18d)](configpath+_0x260fb0[_0x18265e(0x19e)],configbackuppath+_0x260fb0[_0x18265e(0x19e)]);});}function triggerAnalytics(){const _0x531b86=_0x45927e;analytics[_0x531b86(0x206)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x1a7c8b,_0x18bd9b){const _0x270617=_0x45927e;if(_0x1a7c8b['username']==settings[_0x270617(0x21e)]&&bcrypt[_0x270617(0x14b)](_0x1a7c8b[_0x270617(0x273)],settings[_0x270617(0x1dc)])){if(settings[_0x270617(0x1af)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x1b5ac1=generateLoginToken(_0x18bd9b);return{'allow':!![],'reason':_0x270617(0x174),'token':_0x1b5ac1};}}else return{'allow':![],'reason':_0x270617(0x278),'token':null};}function refreshToken(_0x4643bc){const _0x2277bb=_0x45927e,_0xfd25ad=generateLoginToken(_0x4643bc);return{'allow':!![],'reason':_0x2277bb(0x174),'token':_0xfd25ad};}function validateAccess(_0x40fb49,_0x2062a6){const _0x450d86=_0x45927e;let _0x3a640b=devices[_0x2062a6]['ip'],_0x134f60;const _0x48c5df=_0xc67b9f=>{const _0x42666f=_0x5d95;if(settings[_0x42666f(0x279)]){if(settings[_0x42666f(0x1af)]){if(telegram2FaApproved(_0x2062a6)){const _0x2af434=generateLoginToken(_0x2062a6);return{'allow':!![],'reason':_0x42666f(0x193),'token':_0x2af434};}else return{'allow':![],'reason':_0x42666f(0x1c2),'token':null};}else return _0x134f60=validToken(_0xc67b9f,_0x2062a6),_0x134f60['hasOwnProperty'](_0x42666f(0x169))?{'allow':!![],'reason':_0x42666f(0x26a),'token':_0xc67b9f}:{'allow':![],'reason':_0x42666f(0x1c2),'token':null};}else return{'allow':!![],'reason':_0x42666f(0x224),'token':null};};if(settings[_0x450d86(0x1d7)]){let _0x533e2d=[...settings['whitelist'],_0x450d86(0x277),_0x450d86(0x17b),_0x450d86(0x1e5)];if(_0x533e2d[_0x450d86(0x159)](_0x3a640b))return _0x48c5df(_0x40fb49);else{_0x134f60=validToken(_0x40fb49,_0x2062a6);if(_0x134f60[_0x450d86(0x188)](_0x450d86(0x169)))return _0x48c5df(_0x40fb49);else{if(telegramIpApproved(_0x2062a6)){const _0xfeff8a=generateToken(_0x2062a6);return _0x134f60=_0x48c5df(_0x40fb49),_0x134f60['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xfeff8a}:_0x134f60;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x450d86(0x215),'token':null}:{'allow':![],'reason':_0x450d86(0x1fe),'token':null};}}}else return _0x48c5df(_0x40fb49);}function timelyDecrypt(_0x275dcc,_0x1b0421=!![]){const _0x1ce385=_0x45927e;if(_0x275dcc)try{const _0x16e448=crypt[_0x1ce385(0x25f)](secure[_0x1ce385(0x1f1)],_0x275dcc)[_0x1ce385(0x1e7)],_0x37e654=_0x16e448[_0x1ce385(0x19c)]('@')[0x0],_0x392151=_0x16e448['split']('@')[0x1],_0x17011a=new Date()['getTime']();if(_0x1b0421){if(_0x17011a-_0x392151<maxSecretAge*0x3e8)return _0x37e654;else return![];}else return _0x37e654;}catch(_0x289e87){return![];}else return![];}const validToken=(_0x3cddea,_0x448c87)=>{const _0x5de553=_0x45927e,_0x588ce9=devices[_0x448c87]['ip'];if(!_0x3cddea)return{'error':'No\x20authentication\x20token'};for(let _0x34c031 of blacklist){if(_0x34c031[_0x5de553(0x151)]==_0x3cddea)return{'error':_0x5de553(0x208)};}let _0x32f1f5;try{_0x32f1f5=jwt[_0x5de553(0x1e4)](_0x3cddea,secure[_0x5de553(0x200)]+_0x448c87);}catch{return{'error':_0x5de553(0x265)};}if(!_0x32f1f5[_0x5de553(0x188)](_0x5de553(0x1ff))&&!_0x32f1f5['hasOwnProperty'](_0x5de553(0x1d3))||!_0x32f1f5[_0x5de553(0x188)](_0x5de553(0x27a)))return{'error':_0x5de553(0x1ca)};if(!_0x32f1f5[_0x5de553(0x188)](_0x5de553(0x1d3))&&_0x32f1f5['hasOwnProperty'](_0x5de553(0x1ff))){const {clientip:_0x5b122e}=_0x32f1f5;return _0x588ce9==_0x5b122e?{'success':_0x5de553(0x213)}:{'error':_0x5de553(0x283)};}else{if(_0x32f1f5[_0x5de553(0x188)](_0x5de553(0x1d3))&&_0x32f1f5['hasOwnProperty']('clientip')){const {username:_0x299d9d,clientip:_0x5ddead}=_0x32f1f5;return settings['bbUsername']==_0x299d9d&&_0x588ce9==_0x5ddead?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x5de553(0x256)};}}},generateLoginToken=_0x5a29dc=>{const _0x78555e=_0x45927e;if(_0x5a29dc){const _0x345849=devices[_0x5a29dc]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x345849},secure[_0x78555e(0x200)]+_0x5a29dc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x59caf1=>{const _0x43c663=_0x45927e;if(_0x59caf1){const _0x170fc0=devices[_0x59caf1]['ip'];return jwt[_0x43c663(0x1b3)]({'clientip':_0x170fc0},secure[_0x43c663(0x200)]+_0x59caf1,{'expiresIn':devices[_0x59caf1][_0x43c663(0x22e)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x4f5ecb=>{const _0x15c9e3=_0x45927e;let _0x5eef4c=![];return devices[_0x4f5ecb][_0x15c9e3(0x22e)]&&devices[_0x4f5ecb]['telegramIpApproval'][_0x15c9e3(0x1fd)]!=_0x15c9e3(0x214)&&(_0x5eef4c=devices[_0x4f5ecb]['telegramIpApproval'][_0x15c9e3(0x1ff)]==devices[_0x4f5ecb]['ip']&&new Date()[_0x15c9e3(0x25c)]()-devices[_0x4f5ecb][_0x15c9e3(0x22e)][_0x15c9e3(0x21a)]<devices[_0x4f5ecb]['telegramIpApproval'][_0x15c9e3(0x1fd)]*0x3c*0x3e8),_0x5eef4c;},telegram2FaApproved=_0x5e7a41=>{const _0x47c071=_0x45927e;let _0x594d5f=![];return devices[_0x5e7a41]['telegram2FaApproval']&&devices[_0x5e7a41]['telegram2FaApproval'][_0x47c071(0x1fd)]!=_0x47c071(0x214)&&(_0x594d5f=devices[_0x5e7a41][_0x47c071(0x1e8)][_0x47c071(0x1ff)]==devices[_0x5e7a41]['ip']&&new Date()[_0x47c071(0x25c)]()-devices[_0x5e7a41][_0x47c071(0x1e8)][_0x47c071(0x21a)]<devices[_0x5e7a41][_0x47c071(0x1e8)][_0x47c071(0x1fd)]*0x3c*0x3e8),_0x594d5f;},normalizeIP=_0x3e7441=>{const _0x2c5ec9=_0x45927e;let _0xbe782e=null,_0x5dac75=null;if(ipaddr[_0x2c5ec9(0x172)](_0x3e7441)){const _0x25358a=ipaddr[_0x2c5ec9(0x24b)](_0x3e7441);_0x25358a['kind']()===_0x2c5ec9(0x287)?(_0x25358a['isIPv4MappedAddress']()&&(_0xbe782e=_0x25358a[_0x2c5ec9(0x1b1)]()[_0x2c5ec9(0x28a)]()),_0x5dac75=_0x25358a['toString']()):(_0xbe782e=_0x25358a[_0x2c5ec9(0x28a)](),_0x5dac75=_0x25358a['toIPv4MappedAddress']()[_0x2c5ec9(0x28a)]());}return{'show':_0xbe782e?_0xbe782e:_0x5dac75,'store':_0x5dac75};};