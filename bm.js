const _0x563d5d=_0x35d4;(function(_0x3d3951,_0x4b3afe){const _0x432ed1=_0x35d4,_0x5935fb=_0x3d3951();while(!![]){try{const _0x5222ce=-parseInt(_0x432ed1(0x258))/0x1+-parseInt(_0x432ed1(0x303))/0x2+parseInt(_0x432ed1(0x30c))/0x3+-parseInt(_0x432ed1(0x339))/0x4*(parseInt(_0x432ed1(0x224))/0x5)+parseInt(_0x432ed1(0x284))/0x6+parseInt(_0x432ed1(0x1e4))/0x7+parseInt(_0x432ed1(0x250))/0x8;if(_0x5222ce===_0x4b3afe)break;else _0x5935fb['push'](_0x5935fb['shift']());}catch(_0x40fe77){_0x5935fb['push'](_0x5935fb['shift']());}}}(_0xfe74,0x86d46));const _0x30b3f2=function(){let _0x1470a2=!![];return function(_0x2fc937,_0xb4d180){const _0x3280a5=_0x1470a2?function(){if(_0xb4d180){const _0x4ca401=_0xb4d180['apply'](_0x2fc937,arguments);return _0xb4d180=null,_0x4ca401;}}:function(){};return _0x1470a2=![],_0x3280a5;};}(),_0x37b795=_0x30b3f2(this,function(){const _0x2cd4a9=_0x35d4;return _0x37b795['toString']()[_0x2cd4a9(0x29d)](_0x2cd4a9(0x2b0))[_0x2cd4a9(0x337)]()['constructor'](_0x37b795)[_0x2cd4a9(0x29d)](_0x2cd4a9(0x2b0));});_0x37b795();'use strict';process[_0x563d5d(0x2ef)][_0x563d5d(0x342)]=0x1;const childProcess=require(_0x563d5d(0x340)),fs=require('fs'),fns=require(_0x563d5d(0x270)),low=require(_0x563d5d(0x355)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x563d5d(0x23e)),crypto=require(_0x563d5d(0x1f7)),Crypt=require(_0x563d5d(0x1ef))[_0x563d5d(0x3d0)],RSA=require(_0x563d5d(0x1ef))[_0x563d5d(0x1ed)],bcrypt=require(_0x563d5d(0x33f)),jwt=require(_0x563d5d(0x354)),ipaddr=require(_0x563d5d(0x39c)),argv=require('yargs/yargs')(process['argv']['slice'](0x2))[_0x563d5d(0x325)],uuidRandom=require(_0x563d5d(0x1d8)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x563d5d(0x20a)),axios=require('axios'),{GraphQLClient,gql}=require(_0x563d5d(0x308)),util=require('util'),fileUpload=require(_0x563d5d(0x26b)),{networkInterfaces}=require('os'),PORT=argv[_0x563d5d(0x332)]||_0x563d5d(0x1ea),pattern=/^[0-9]{2,4}$/;!pattern[_0x563d5d(0x34a)](PORT)&&(console[_0x563d5d(0x21f)](_0x563d5d(0x1e5)+PORT+_0x563d5d(0x235)),process[_0x563d5d(0x2af)](0x1));const HOST=argv[_0x563d5d(0x395)]||null,userID=argv[_0x563d5d(0x391)]||'',debugging=argv['d']||![],nodeversion=process[_0x563d5d(0x2bc)][_0x563d5d(0x36f)];let bbpath=_0x563d5d(0x2c7),bbpath2='';const botfile=_0x563d5d(0x37c),configfile=_0x563d5d(0x2e3),settingsfile=_0x563d5d(0x31a),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x563d5d(0x338))[_0x563d5d(0x2f6)]||_0x563d5d(0x3d1),maxBackups=0xa;let validInstallation=!![];!fs[_0x563d5d(0x203)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x563d5d(0x3ca)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x563d5d(0x305),logspath=userID?bbpath+_0x563d5d(0x1ff)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x563d5d(0x317)+userID+'/':bbpath+_0x563d5d(0x317),loggerfile=fs[_0x563d5d(0x3d7)](logspath+_0x563d5d(0x1e8),{'flags':'a'}),temppath=userID?bbpath+_0x563d5d(0x28c)+userID+'/':bbpath+_0x563d5d(0x28c);!fs[_0x563d5d(0x203)](configpath)&&fs[_0x563d5d(0x32e)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x563d5d(0x32e)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x563d5d(0x32e)](logspath);!fs[_0x563d5d(0x203)](zippath)&&fs[_0x563d5d(0x32e)](zippath);!fs[_0x563d5d(0x203)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x563d5d(0x2de)]({'bots':[]})[_0x563d5d(0x343)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x563d5d(0x2a4),'onepagemode':![],'marketcapApi':''}})[_0x563d5d(0x343)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x563d5d(0x2de)]({'secure':{},'blacklist':[]})[_0x563d5d(0x343)]();let crypt=new Crypt({'md':_0x563d5d(0x364),'rsaStandard':_0x563d5d(0x2c8)});const saltRounds=0xa,mixpanel=Mixpanel[_0x563d5d(0x1f1)](_0x563d5d(0x3ac),{'host':_0x563d5d(0x223)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x563d5d(0x2c6)]&&(settings['telegramToken']!=''&&settings[_0x563d5d(0x2c6)]!=_0x563d5d(0x341))&&settings['telegramUsername']&&settings[_0x563d5d(0x218)]!='')initTelegram();const parseColor=(_0x190634,_0x5a2b93)=>{const _0x336010=_0x563d5d,_0x456423=/#[A-Z]{3}#/g;if(typeof _0x190634=='string'){!_0x5a2b93?_0x190634=_0x190634[_0x336010(0x2d7)](_0x456423,''):(_0x190634=_0x190634['replace'](/#BLU#/g,_0x336010(0x301)),_0x190634=_0x190634[_0x336010(0x2d7)](/#RED#/g,_0x336010(0x217)),_0x190634=_0x190634[_0x336010(0x2d7)](/#YEL#/g,'\x1b[33m'),_0x190634=_0x190634['replace'](/#MAG#/g,'\x1b[35m'),_0x190634=_0x190634[_0x336010(0x2d7)](/#CYA#/g,_0x336010(0x360)),_0x190634=_0x190634[_0x336010(0x2d7)](/#RES#/g,_0x336010(0x271)));;}return _0x190634;},logger={'screen':_0x3f08e2=>{console['log'](parseColor(_0x3f08e2,!![]));},'simple':_0x6413ff=>{const _0x53c3f6=_0x563d5d;console['log'](parseColor(_0x6413ff,!![])),loggerfile[_0x53c3f6(0x343)](util[_0x53c3f6(0x389)](parseColor(_0x6413ff,![]))+'\x0a');},'full':async _0x212d5a=>{const _0x139596=_0x563d5d,_0x3483d3=getTimeStamp()+_0x139596(0x36b)+_0x212d5a;console[_0x139596(0x21f)](parseColor(_0x3483d3,!![])),loggerfile['write'](util['format'](parseColor(_0x3483d3,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x139596(0x313))await sendTelegram(settings['telegramChatId'],_0x139596(0x35c)+parseColor(_0x212d5a,![]));},'debug':async(_0x138bbe,_0x5f1091='')=>{const _0x30dacf=_0x563d5d,_0x3adef8=getTimeStamp()+_0x30dacf(0x38e)+_0x138bbe;if(debugging)console[_0x30dacf(0x21f)](parseColor(_0x3adef8,!![]));loggerfile['write'](util[_0x30dacf(0x389)](parseColor(_0x3adef8,![]))+'\x0a');if(_0x5f1091){if(debugging)console[_0x30dacf(0x21f)](_0x5f1091);loggerfile[_0x30dacf(0x343)](util['format'](_0x5f1091)+'\x0a');}}};let terminating=![];process['on'](_0x563d5d(0x3cb),function(_0x22739b){const _0x291d94=_0x563d5d;_0x22739b[_0x291d94(0x337)]()[_0x291d94(0x276)]('address\x20already\x20in\x20use')?(logger[_0x291d94(0x212)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x22739b['port']+'#RES#'),process['send']({'terminate':!![]},_0x1910d2=>{})):logger[_0x291d94(0x212)](_0x22739b);}),process['on']('exit',()=>{const _0x2e000d=_0x563d5d;stopAllBots(),process[_0x2e000d(0x2af)](0x0);}),process['on'](_0x563d5d(0x315),()=>{const _0x373df0=_0x563d5d;stopAllBots(),process[_0x373df0(0x2af)](0x0);}),process['on']('SIGINT',()=>{const _0xb7ef89=_0x563d5d;stopAllBots(),process[_0xb7ef89(0x2af)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x563d5d(0x338))[_0x563d5d(0x2fa)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x563d5d(0x3a3)),app=express(),http=require(_0x563d5d(0x2b6))['createServer'](app);app[_0x563d5d(0x227)](fileUpload({'useTempFiles':!![]})),app[_0x563d5d(0x2fc)]('/download/:type',async(_0x181939,_0x2d794b)=>{const _0x52e694=_0x563d5d,_0x3913ec=_0x181939[_0x52e694(0x2d3)][_0x52e694(0x2e4)],_0x2850dc=getClientsWithBotID(_0x52e694(0x2d4)),_0x56d67d=_0x181939['headers']['uuid'],_0xca80c8=timelyDecrypt(_0x56d67d,![]),_0x15b2dc=_0x2850dc[_0x52e694(0x318)](_0x46c776=>_0x46c776[_0x52e694(0x283)]==_0xca80c8);if(_0x15b2dc){const _0x277414=normalizeIP(_0x181939[_0x52e694(0x24f)][_0x52e694(0x306)])[_0x52e694(0x2a6)],_0x637423=_0x181939['headers'][_0x52e694(0x1f3)];if(validateAccess(_0x637423,_0xca80c8,_0x277414)[_0x52e694(0x350)])_0x3913ec==_0x52e694(0x2ae)&&await backupConfigFiles(),await zipFiles(_0x3913ec),_0x2d794b[_0x52e694(0x37a)](zippath+(_0x3913ec+_0x52e694(0x312)),_0x27731d=>{const _0x563cf0=_0x52e694;_0x27731d&&(logger[_0x563cf0(0x282)](_0x563cf0(0x3d6)+_0x3913ec),logger[_0x563cf0(0x212)](_0x27731d));});else logger[_0x52e694(0x282)](_0x52e694(0x1fb)+_0x3913ec+'\x20(1)');}else logger['full'](_0x52e694(0x1fb)+_0x3913ec+'\x20(2)');}),app[_0x563d5d(0x33c)](_0x563d5d(0x2fb),async(_0x5e898a,_0x13a6a3)=>{const _0x404661=_0x563d5d,_0x4954b9=getClientsWithBotID(_0x404661(0x2d4)),_0xba8083=_0x5e898a[_0x404661(0x331)]['uuid'],_0x60eabd=timelyDecrypt(_0xba8083,![]),_0x347f20=_0x4954b9['find'](_0x4fb9bd=>_0x4fb9bd['uuid']==_0x60eabd);logger[_0x404661(0x31e)]('Backup\x20file\x20uploaded');if(_0x347f20){const _0x3619f3=normalizeIP(_0x5e898a[_0x404661(0x24f)][_0x404661(0x306)])[_0x404661(0x2a6)],_0x2752ed=_0x5e898a[_0x404661(0x331)][_0x404661(0x1f3)];if(validateAccess(_0x2752ed,_0x60eabd,_0x3619f3)[_0x404661(0x350)]){if(_0x5e898a[_0x404661(0x3ad)]){const _0x5acfbb=_0x5e898a['files'][_0x404661(0x32b)];await _0x5acfbb['mv'](temppath+_0x5acfbb[_0x404661(0x206)]),_0x13a6a3[_0x404661(0x2a7)]({'status':!![],'message':_0x404661(0x38f)});const _0x55067c=getBotsWithMode();_0x55067c['length']>0x0?confirmRestore(temppath,_0x5acfbb[_0x404661(0x206)]):unzipFile(temppath,_0x5acfbb[_0x404661(0x206)]);}}else logger[_0x404661(0x282)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x404661(0x32d));}),app[_0x563d5d(0x227)](express[_0x563d5d(0x297)](path[_0x563d5d(0x380)](__dirname,bbpath2,'build2'))),app['use'](express['static'](path[_0x563d5d(0x380)](__dirname,bbpath2,_0x563d5d(0x3b8)))),app[_0x563d5d(0x2fc)]('/',function(_0xfa0a08,_0x147633){const _0x22085e=_0x563d5d;_0x147633[_0x22085e(0x259)](path[_0x22085e(0x380)](__dirname,bbpath2,'build2',_0x22085e(0x38c)));}),app['get'](_0x563d5d(0x329),function(_0x54170d,_0x442a80){const _0x130d09=_0x563d5d;_0x442a80[_0x130d09(0x259)](path['join'](__dirname,bbpath2,_0x130d09(0x3b8),_0x130d09(0x38c)));}),app['get']('/:bot/portfolio',(_0x25e397,_0x3249cd)=>{const _0x5e9ef0=_0x563d5d;_0x3249cd['sendFile'](path['join'](__dirname,bbpath2,_0x5e9ef0(0x3b8),_0x5e9ef0(0x38c)));}),app[_0x563d5d(0x2fc)](_0x563d5d(0x34d),(_0x336837,_0x246732)=>{const _0x1ffce8=_0x563d5d;_0x246732['sendFile'](path['join'](__dirname,bbpath2,_0x1ffce8(0x3b8),_0x1ffce8(0x38c)));}),app[_0x563d5d(0x2fc)](_0x563d5d(0x3a5),(_0xd454f9,_0x246240)=>{const _0x55aa99=_0x563d5d;_0x246240[_0x55aa99(0x259)](path[_0x55aa99(0x380)](__dirname,bbpath2,_0x55aa99(0x3b8),_0x55aa99(0x38c)));}),app[_0x563d5d(0x2fc)]('/:bot/history',(_0x274c0f,_0x1dbde8)=>{const _0x1bf7ab=_0x563d5d;_0x1dbde8[_0x1bf7ab(0x259)](path[_0x1bf7ab(0x380)](__dirname,bbpath2,_0x1bf7ab(0x3b8),_0x1bf7ab(0x38c)));}),app[_0x563d5d(0x2fc)](_0x563d5d(0x2b7),(_0x319ff5,_0xb89b30)=>{const _0x2001d0=_0x563d5d;_0xb89b30['sendFile'](path[_0x2001d0(0x380)](__dirname,bbpath2,_0x2001d0(0x3b8),_0x2001d0(0x38c)));}),app[_0x563d5d(0x2fc)](_0x563d5d(0x241),(_0x3bf925,_0x3b9ce0)=>{const _0x10f402=_0x563d5d;_0x3b9ce0[_0x10f402(0x259)](path[_0x10f402(0x380)](__dirname,bbpath2,_0x10f402(0x3b8),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x563d5d(0x2aa)](PORT);const io=require(_0x563d5d(0x1fa))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4aa08e=_0x563d5d;let _0x23a573=_0x4aa08e(0x34b);const _0x11ee91=networkInterfaces(),_0x45df96={};for(const _0x4bba32 of Object[_0x4aa08e(0x21e)](_0x11ee91)){for(const _0x41a64a of _0x11ee91[_0x4bba32]){if((_0x41a64a[_0x4aa08e(0x267)]==_0x4aa08e(0x2f4)||_0x41a64a['family']==0x4)&&!_0x41a64a[_0x4aa08e(0x39f)]){const _0x3c24fd=ipaddr[_0x4aa08e(0x392)](_0x41a64a[_0x4aa08e(0x33b)])[_0x4aa08e(0x27a)]();_0x3c24fd!=_0x4aa08e(0x2d9)&&(!_0x45df96[_0x4bba32]&&(_0x45df96[_0x4bba32]=[]),_0x45df96[_0x4bba32][_0x4aa08e(0x2a3)](_0x41a64a[_0x4aa08e(0x33b)]),_0x23a573=_0x41a64a['address']);}}}return{'serverip':_0x23a573,'netinterfaces':_0x45df96};}async function startServer(){const _0x250f14=_0x563d5d,{serverip:_0x3ba90d,netinterfaces:_0x15e980}=getServerIP();logger[_0x250f14(0x212)](''),logger['simple'](_0x250f14(0x2ca)),await logger['full'](_0x250f14(0x2e8)+serverversion+'#RES#\x20'+(environment=='staging'?_0x250f14(0x201):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x250f14(0x246))+('=>\x20Go\x20to\x20#CYA#http://'+_0x3ba90d+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x250f14(0x212)](_0x250f14(0x2ca));if(config[_0x250f14(0x226)]!=0x0)for(const _0x4ae927 of config){const _0x5879e8=_0x4ae927[_0x250f14(0x2e6)]==_0x250f14(0x1d9)?'a':'m';if(_0x4ae927['status']==_0x250f14(0x24c)||_0x4ae927[_0x250f14(0x24e)]=='new')await logger[_0x250f14(0x282)](_0x250f14(0x28b)+_0x5879e8+')\x20|\x20Bot\x20'+_0x4ae927[_0x250f14(0x34c)]+_0x250f14(0x1e2)+_0x4ae927['botname']),startBot([_0x4ae927[_0x250f14(0x34c)],userID],{'cwd':bbpath},function(_0x3d2c6d){if(_0x3d2c6d)logger['full'](_0x3d2c6d);});else(_0x4ae927[_0x250f14(0x24e)]=='disabled'||_0x4ae927[_0x250f14(0x24e)]=='new-disabled')&&await logger[_0x250f14(0x282)](_0x250f14(0x26d)+_0x5879e8+_0x250f14(0x39e)+_0x4ae927[_0x250f14(0x34c)]+_0x250f14(0x1e2)+_0x4ae927[_0x250f14(0x28a)]);}else!newBot&&logger[_0x250f14(0x212)](_0x250f14(0x291));if(newBot)addBot();logger['simple'](_0x250f14(0x2ca)),logger['simple'](''),await logger['debug'](_0x250f14(0x358)+nodeversion),await logger[_0x250f14(0x31e)](_0x250f14(0x2a8),_0x15e980);}function startSocket(){const _0x3e02fd=_0x563d5d;io['on'](_0x3e02fd(0x1e3),_0x30beb8=>{const _0x213a0f=_0x3e02fd;let _0xbf3b2c,_0x2976a1,_0x39cf1,_0x417571,_0x40018b;const _0x1793e2=_0x30beb8['handshake'][_0x213a0f(0x331)]['referer'];_0x2976a1=_0x1793e2[_0x213a0f(0x1e6)](/bot[0-9]{3}/);if(_0x2976a1)_0x39cf1=_0x2976a1[0x0][_0x213a0f(0x1e6)](/[0-9]{3}/);if(_0x39cf1)_0xbf3b2c=_0x39cf1[0x0];else _0xbf3b2c='botmanager';const _0x29fc45=_0x30beb8['handshake'][_0x213a0f(0x353)]['encryptedUuid'];if(!_0x29fc45)_0x30beb8['emit'](_0x213a0f(0x24e),{'publicKey':secure['publicKey']});else{_0x417571=timelyDecrypt(_0x29fc45,![]);if(!_0x417571)_0x30beb8[_0x213a0f(0x1ec)](_0x213a0f(0x24e),{'publicKey':secure[_0x213a0f(0x3c7)]});else{_0x40018b=normalizeIP(_0x30beb8[_0x213a0f(0x261)][_0x213a0f(0x306)])['store'];if(!devices[_0x417571])devices[_0x417571]={'uuid':_0x417571,'access':{'token':null}};devices[_0x417571]['ip']=_0x40018b;const _0x38a715=addClient(_0x30beb8['id'],_0x417571,_0xbf3b2c);setAccess(_0x38a715),emitMessages(),_0x30beb8['on'](_0x213a0f(0x2d1),_0x3369f8=>{const _0x1a94b0=_0x213a0f,_0x48e75f=timelyDecrypt(_0x3369f8[_0x1a94b0(0x382)],!![],_0x1a94b0(0x2bb));if(_0x48e75f){_0x3369f8={'username':_0x3369f8[_0x1a94b0(0x27e)],'password':_0x48e75f},devices[_0x417571]['access']=validateCredentials(_0x3369f8,_0x417571);if(devices[_0x417571][_0x1a94b0(0x376)]['allow']==![]&&devices[_0x417571][_0x1a94b0(0x376)][_0x1a94b0(0x3b4)]==_0x1a94b0(0x1fd))_0x30beb8[_0x1a94b0(0x1ec)]('status',{'access':devices[_0x417571][_0x1a94b0(0x376)]}),loginAccess2FA(_0x417571,_0x40018b);else{if(devices[_0x417571][_0x1a94b0(0x376)][_0x1a94b0(0x350)]==![]&&devices[_0x417571][_0x1a94b0(0x376)]['reason']=='invalid\x20credentials')_0x30beb8[_0x1a94b0(0x1ec)](_0x1a94b0(0x24e),{'access':devices[_0x417571][_0x1a94b0(0x376)]});else devices[_0x417571][_0x1a94b0(0x376)][_0x1a94b0(0x350)]&&devices[_0x417571][_0x1a94b0(0x376)][_0x1a94b0(0x3b4)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x417571)[_0x1a94b0(0x209)](_0x5cfd85=>{setAccess(_0x5cfd85);}),logger[_0x1a94b0(0x31e)](_0x1a94b0(0x239)+_0x417571[_0x1a94b0(0x2e0)](-0x8)),setTokenRefresh(_0x417571),setSessionTimeout(_0x1a94b0(0x2d1),_0x417571));}}else logger[_0x1a94b0(0x282)](_0x1a94b0(0x1f4));}),_0x30beb8['on'](_0x213a0f(0x3b2),()=>{resetPassword();}),_0x30beb8['on'](_0x213a0f(0x1de),_0x18f21c=>{removeClient(_0x30beb8['id']);}),_0xbf3b2c=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x22f899){const _0xdd1b8a=_0x563d5d;if(_0x22f899!=_0xdd1b8a(0x2d4)&&config[_0xdd1b8a(0x36d)]!=''){if(pid[_0x22f899])pid[_0x22f899][_0xdd1b8a(0x2a7)]({'function':_0xdd1b8a(0x29a),'args':null});}_0x22f899!='botmanager'&&broadcastToBots(_0xdd1b8a(0x36e),JSON[_0xdd1b8a(0x280)](config));}function reloadBotManager(){const _0x4b52e4=_0x563d5d;getClientsWithBotID(_0x4b52e4(0x2d4))[_0x4b52e4(0x209)](_0x3ae659=>{const _0x274d47=_0x4b52e4;getSocket(_0x3ae659['id'])[_0x274d47(0x1ec)](_0x274d47(0x24e),{'access':{'allow':![],'reason':_0x274d47(0x299),'token':null}});});}function getSocket(_0x6b11e2){const _0x3676f5=_0x563d5d;return io['sockets'][_0x3676f5(0x2df)]['get'](_0x6b11e2);}function setAccess(_0x2ee557){const _0x4ec5ac=_0x563d5d,_0x233adc=getSocket(_0x2ee557['id']),_0x80f3cd=_0x2ee557['uuid'],_0x18a462=_0x2ee557['bot'];devices[_0x80f3cd][_0x4ec5ac(0x376)]=validateAccess(devices[_0x80f3cd]['access']['token'],_0x80f3cd),logger['debug'](_0x4ec5ac(0x247)+devices[_0x80f3cd][_0x4ec5ac(0x376)]['reason']+_0x4ec5ac(0x37e)+_0x2ee557['id'][_0x4ec5ac(0x2e0)](-0x8)+_0x4ec5ac(0x363)+_0x80f3cd[_0x4ec5ac(0x2e0)](-0x8)),_0x233adc[_0x4ec5ac(0x380)](_0x80f3cd);if(devices[_0x80f3cd][_0x4ec5ac(0x376)]['allow']){_0x233adc[_0x4ec5ac(0x380)](_0x18a462);if(_0x18a462=='botmanager')initializeSocketBotManager(_0x233adc);else initializeSocketBot(_0x233adc);initClient(_0x18a462);}devices[_0x80f3cd]['access']['token']&&devices[_0x80f3cd][_0x4ec5ac(0x376)][_0x4ec5ac(0x3b4)]==_0x4ec5ac(0x1eb)&&setSessionTimeout('2FA',_0x80f3cd),devices[_0x80f3cd][_0x4ec5ac(0x376)][_0x4ec5ac(0x35d)]&&devices[_0x80f3cd]['access'][_0x4ec5ac(0x3b4)]==_0x4ec5ac(0x302)&&setSessionTimeout(_0x4ec5ac(0x2d1),_0x80f3cd),_0x233adc[_0x4ec5ac(0x1ec)](_0x4ec5ac(0x24e),{'status':_0x2ee557[_0x4ec5ac(0x3a1)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x80f3cd][_0x4ec5ac(0x376)],'externalip':devices[_0x80f3cd]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x4ec5ac(0x29c)],'validInstallation':validInstallation}),devices[_0x80f3cd]['access'][_0x4ec5ac(0x350)]==![]&&devices[_0x80f3cd][_0x4ec5ac(0x376)]['reason']==_0x4ec5ac(0x384)&&temporaryAccess2FA(_0x80f3cd,devices[_0x80f3cd]['ip']);}function setSessionTimeout(_0x1a0089,_0x29f5e9){const _0x421fd8=_0x563d5d;let _0x16e2a5;if(_0x1a0089==_0x421fd8(0x2d1))_0x16e2a5=loginExpiry*0x3c*0x3e8;else _0x16e2a5=devices[_0x29f5e9][_0x421fd8(0x1e7)][_0x421fd8(0x2f3)]*0x3c*0x3e8-(new Date()[_0x421fd8(0x292)]()-devices[_0x29f5e9]['telegramIpApproval']['timestamp']);if(devices[_0x29f5e9][_0x421fd8(0x365)])clearTimeout(devices[_0x29f5e9][_0x421fd8(0x365)]);devices[_0x29f5e9][_0x421fd8(0x365)]=setTimeout(()=>{const _0x150e3a=_0x421fd8;if(devices[_0x29f5e9][_0x150e3a(0x383)])clearTimeout(devices[_0x29f5e9][_0x150e3a(0x383)]);removeSocketListeners(_0x29f5e9),addBlacklist(_0x29f5e9),devices[_0x29f5e9][_0x150e3a(0x1e7)]=null,devices[_0x29f5e9][_0x150e3a(0x33e)]=null,devices[_0x29f5e9][_0x150e3a(0x376)]['token']=null,logger[_0x150e3a(0x31e)]('Session\x20expired\x20for\x20user\x20...'+_0x29f5e9[_0x150e3a(0x2e0)](-0x8)),devices[_0x29f5e9][_0x150e3a(0x376)]=validateAccess(devices[_0x29f5e9][_0x150e3a(0x376)][_0x150e3a(0x35d)],_0x29f5e9),!(devices[_0x29f5e9][_0x150e3a(0x376)][_0x150e3a(0x350)]&&devices[_0x29f5e9][_0x150e3a(0x376)][_0x150e3a(0x3b4)]=='login\x20not\x20required')&&(_0x1a0089==_0x150e3a(0x2d1)?io['to'](_0x29f5e9)[_0x150e3a(0x1ec)](_0x150e3a(0x24e),{'access':{'allow':![],'reason':_0x150e3a(0x23b),'token':null}}):io['to'](_0x29f5e9)[_0x150e3a(0x1ec)](_0x150e3a(0x24e),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x29f5e9][_0x150e3a(0x376)][_0x150e3a(0x35d)]=null;},_0x16e2a5);}function setTokenRefresh(_0x1062a5){const _0x44a723=_0x563d5d;if(devices[_0x1062a5][_0x44a723(0x383)])clearTimeout(devices[_0x1062a5]['pidRefreshToken']);devices[_0x1062a5][_0x44a723(0x383)]=setTimeout(()=>{const _0xc00e7c=_0x44a723;getClientsWithUuid(_0x1062a5)[_0xc00e7c(0x226)]!=0x0?(devices[_0x1062a5]['access']=refreshToken(_0x1062a5),io['to'](_0x1062a5)['emit'](_0xc00e7c(0x24e),{'status':_0xc00e7c(0x2b2),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1062a5]['access'],'externalip':devices[_0x1062a5]['ip'],'publicKey':secure[_0xc00e7c(0x3c7)],'validInstallation':validInstallation}),setTokenRefresh(_0x1062a5)):clearTimeout(devices[_0x1062a5]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x307e68){const _0x26eaff=_0x563d5d,_0x23b9ec=getClient(_0x307e68['id'])[_0x26eaff(0x283)];_0x307e68[_0x26eaff(0x1ec)](_0x26eaff(0x36e),config),_0x307e68[_0x26eaff(0x1ec)](_0x26eaff(0x2b5),cleanSettings()),_0x307e68['on'](_0x26eaff(0x2fd),_0x39912c=>{const _0x42e0b2=_0x26eaff;if(validateAccess(_0x39912c,_0x23b9ec)[_0x42e0b2(0x350)])addBot();else logger[_0x42e0b2(0x282)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x307e68['on']('update-bot',(_0x5d2597,_0x397280)=>{const _0x3c9975=_0x26eaff;if(validateAccess(_0x397280,_0x23b9ec)[_0x3c9975(0x350)])toggleBot(_0x5d2597[_0x3c9975(0x34c)],_0x5d2597['status'],_0x5d2597[_0x3c9975(0x368)]);else logger[_0x3c9975(0x282)](_0x3c9975(0x290));}),_0x307e68['on'](_0x26eaff(0x322),(_0x5edaa2,_0x2d6812)=>{const _0x4037bf=_0x26eaff;if(validateAccess(_0x2d6812,_0x23b9ec)[_0x4037bf(0x350)])toggleBotMode(_0x5edaa2);else logger['full'](_0x4037bf(0x290));}),_0x307e68['on'](_0x26eaff(0x221),(_0x273389,_0x2a6c03)=>{const _0x13bdbb=_0x26eaff;if(validateAccess(_0x2a6c03,_0x23b9ec)['allow'])deleteBot(_0x273389);else logger[_0x13bdbb(0x282)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x307e68['on'](_0x26eaff(0x357),(_0x37ecd6,_0x1856fa)=>{const _0x1a5ff7=_0x26eaff;if(validateAccess(_0x1856fa,_0x23b9ec)[_0x1a5ff7(0x350)])storeSettings(_0x37ecd6,!![]);else logger[_0x1a5ff7(0x282)](_0x1a5ff7(0x22a));}),_0x307e68['on'](_0x26eaff(0x220),_0x3d565e=>{const _0x20ee5b=_0x26eaff;if(validateAccess(_0x3d565e,_0x23b9ec)[_0x20ee5b(0x350)])updateBB(_0x20ee5b(0x2a5));else logger[_0x20ee5b(0x282)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x307e68['on'](_0x26eaff(0x3c0),_0x1a2a23=>{const _0x224994=_0x26eaff;if(validateAccess(_0x1a2a23,_0x23b9ec)[_0x224994(0x350)])updateBB('reinstall');else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x307e68['on']('get-backup-files',_0x46ea16=>{const _0x2eeab8=_0x26eaff;if(validateAccess(_0x46ea16,_0x23b9ec)[_0x2eeab8(0x350)]){const _0x14da8a=getClient(_0x307e68['id']);if(_0x14da8a)getBackupFiles(_0x14da8a[_0x2eeab8(0x283)]);else logger[_0x2eeab8(0x282)](_0x2eeab8(0x349));}else logger[_0x2eeab8(0x282)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x307e68['on'](_0x26eaff(0x232),(_0x472a03,_0x3a1af5)=>{const _0xc8709e=_0x26eaff;if(validateAccess(_0x3a1af5,_0x23b9ec)[_0xc8709e(0x350)])restoreBackupFile(_0x472a03);else logger[_0xc8709e(0x282)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x307e68['on'](_0x26eaff(0x3a8),_0x55a19d=>{const _0x214d3e=_0x26eaff;if(validateAccess(_0x55a19d,_0x23b9ec)['allow'])getMessages();else logger[_0x214d3e(0x282)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x307e68['on'](_0x26eaff(0x324),(_0x4b721d,_0x4b59b4)=>{const _0x2f58a8=_0x26eaff;if(validateAccess(_0x4b59b4,_0x23b9ec)[_0x2f58a8(0x350)])confirmMessage(_0x4b721d);else logger[_0x2f58a8(0x282)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x307e68['on']('logout',_0x269ed5=>{const _0x53e5c6=_0x26eaff;if(validateAccess(_0x269ed5,_0x23b9ec)[_0x53e5c6(0x350)]){if(devices[_0x23b9ec][_0x53e5c6(0x383)])clearTimeout(devices[_0x23b9ec]['pidRefreshToken']);if(devices[_0x23b9ec][_0x53e5c6(0x365)])clearTimeout(devices[_0x23b9ec][_0x53e5c6(0x365)]);removeSocketListeners(getClient(_0x307e68['id'])[_0x53e5c6(0x283)]),addBlacklist(_0x23b9ec),devices[_0x23b9ec][_0x53e5c6(0x1e7)]=null,devices[_0x23b9ec]['telegram2FaApproval']=null,devices[_0x23b9ec][_0x53e5c6(0x376)][_0x53e5c6(0x35d)]=null,logger['debug'](_0x53e5c6(0x30e)+_0x23b9ec[_0x53e5c6(0x2e0)](-0x8)),io['to'](getClient(_0x307e68['id'])[_0x53e5c6(0x283)])[_0x53e5c6(0x1ec)](_0x53e5c6(0x24e),{'access':{'allow':![],'reason':_0x53e5c6(0x2d6),'token':null}});}else logger[_0x53e5c6(0x282)](_0x53e5c6(0x31c));});}function initializeSocketBot(_0x246dae){const _0x66a89a=_0x563d5d,_0x22929b=getClient(_0x246dae['id'])['bot'],_0x653790=getClient(_0x246dae['id'])[_0x66a89a(0x283)];_0x246dae['on']('get-logs',(_0x3c5e7a,_0x105934)=>{const _0x196304=_0x66a89a;if(validateAccess(_0x105934,_0x653790)[_0x196304(0x350)]){if(pid[_0x22929b])pid[_0x22929b][_0x196304(0x2a7)]({'function':_0x196304(0x3b6),'args':_0x3c5e7a});}else logger['full'](_0x196304(0x2f2));}),_0x246dae['on'](_0x66a89a(0x3ba),(_0x91a23,_0x1397c7)=>{const _0x1a287d=_0x66a89a;if(validateAccess(_0x1397c7,_0x653790)['allow']){if(pid[_0x22929b])pid[_0x22929b][_0x1a287d(0x2a7)]({'function':_0x1a287d(0x257),'args':_0x91a23});}else logger[_0x1a287d(0x282)](_0x1a287d(0x2ee));}),_0x246dae['on'](_0x66a89a(0x300),(_0x4957fc,_0xa0c69b)=>{const _0x5be3e5=_0x66a89a;if(validateAccess(_0xa0c69b,_0x653790)[_0x5be3e5(0x350)]){if(pid[_0x22929b])pid[_0x22929b]['send']({'function':_0x5be3e5(0x228),'args':_0x4957fc});}else logger['full'](_0x5be3e5(0x2ce));}),_0x246dae['on'](_0x66a89a(0x255),(_0x546404,_0x29ebcf)=>{const _0xa444f7=_0x66a89a;if(validateAccess(_0x29ebcf,_0x653790)[_0xa444f7(0x350)]){if(pid[_0x22929b])pid[_0x22929b][_0xa444f7(0x2a7)]({'function':_0xa444f7(0x2cc),'args':_0x546404});}else logger['full'](_0xa444f7(0x216));}),_0x246dae['on']('store-headless',(_0x1bf151,_0x1fe7d6)=>{const _0x367c1f=_0x66a89a;if(validateAccess(_0x1fe7d6,_0x653790)['allow']){if(pid[_0x22929b])pid[_0x22929b][_0x367c1f(0x2a7)]({'function':_0x367c1f(0x21a),'args':_0x1bf151});}else logger[_0x367c1f(0x282)](_0x367c1f(0x2ab));}),_0x246dae['on'](_0x66a89a(0x23f),(_0x3cd5af,_0x53f464)=>{const _0x5e60ff=_0x66a89a;if(validateAccess(_0x53f464,_0x653790)['allow']){if(pid[_0x22929b])pid[_0x22929b]['send']({'function':_0x5e60ff(0x3c5),'args':_0x3cd5af});}else logger[_0x5e60ff(0x282)](_0x5e60ff(0x24d));}),_0x246dae['on'](_0x66a89a(0x285),_0x480228=>{const _0x54c31f=_0x66a89a;if(validateAccess(_0x480228,_0x653790)[_0x54c31f(0x350)]){if(pid[_0x22929b])pid[_0x22929b][_0x54c31f(0x2a7)]({'function':_0x54c31f(0x32a),'args':null});}else logger[_0x54c31f(0x282)](_0x54c31f(0x3a9));}),_0x246dae['on'](_0x66a89a(0x1e9),_0x274dca=>{const _0x5038cc=_0x66a89a;if(validateAccess(_0x274dca,_0x653790)[_0x5038cc(0x350)]){if(pid[_0x22929b])pid[_0x22929b]['send']({'function':_0x5038cc(0x33a),'args':null});}else logger['full'](_0x5038cc(0x316));}),_0x246dae['on'](_0x66a89a(0x320),(_0x4837ac,_0x5952da)=>{const _0x5b0b06=_0x66a89a;if(validateAccess(_0x5952da,_0x653790)[_0x5b0b06(0x350)]){if(pid[_0x22929b])pid[_0x22929b][_0x5b0b06(0x2a7)]({'function':_0x5b0b06(0x367),'args':_0x4837ac});}else logger[_0x5b0b06(0x282)](_0x5b0b06(0x359));}),_0x246dae['on']('cancel-loading',_0x31e60e=>{const _0x2d48fd=_0x66a89a;if(validateAccess(_0x31e60e,_0x653790)[_0x2d48fd(0x350)]){if(pid[_0x22929b])pid[_0x22929b]['send']({'function':_0x2d48fd(0x2ff),'args':null});}else logger[_0x2d48fd(0x282)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x246dae['on'](_0x66a89a(0x23a),_0xbf3c1d=>{const _0x5a3eec=_0x66a89a;if(validateAccess(_0xbf3c1d,_0x653790)['allow']){if(pid[_0x22929b])pid[_0x22929b][_0x5a3eec(0x2a7)]({'function':'showConfig','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x246dae['on'](_0x66a89a(0x220),_0xaebc75=>{const _0x4a139b=_0x66a89a;if(validateAccess(_0xaebc75,_0x653790)[_0x4a139b(0x350)])updateBB(_0x4a139b(0x2a5));else logger[_0x4a139b(0x282)](_0x4a139b(0x204));}),_0x246dae['on'](_0x66a89a(0x3a8),_0x38f1ce=>{const _0xd49205=_0x66a89a;if(validateAccess(_0x38f1ce,_0x653790)[_0xd49205(0x350)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x246dae['on'](_0x66a89a(0x324),(_0x4c958e,_0x578591)=>{const _0x5b571a=_0x66a89a;if(validateAccess(_0x578591,_0x653790)['allow'])confirmMessage(_0x4c958e);else logger[_0x5b571a(0x282)](_0x5b571a(0x3bb));}),_0x246dae['on'](_0x66a89a(0x3b5),_0x35bcb5=>{const _0x24aa50=_0x66a89a;if(validateAccess(_0x35bcb5,_0x653790)['allow']){if(devices[_0x653790][_0x24aa50(0x383)])clearTimeout(devices[_0x653790][_0x24aa50(0x383)]);if(devices[_0x653790][_0x24aa50(0x365)])clearTimeout(devices[_0x653790]['pidExpireLogin']);removeSocketListeners(getClient(_0x246dae['id'])['uuid']),addBlacklist(_0x653790),devices[_0x653790][_0x24aa50(0x1e7)]=null,devices[_0x653790][_0x24aa50(0x33e)]=null,devices[_0x653790]['access']['token']=null,logger['debug'](_0x24aa50(0x30e)+_0x653790[_0x24aa50(0x2e0)](-0x8)),io['to'](getClient(_0x246dae['id'])['uuid'])[_0x24aa50(0x1ec)](_0x24aa50(0x24e),{'access':{'allow':![],'reason':_0x24aa50(0x2d6),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1cb3f7){const _0x7643e1=_0x563d5d;getClientsWithUuid(_0x1cb3f7)[_0x7643e1(0x209)](_0x1fe7a0=>{getSocket(_0x1fe7a0['id'])['removeAllListeners']();});}function cleanSettings(){const _0xc278d9=_0x563d5d;let _0x1ea8be=settings;return settings[_0xc278d9(0x2c6)]&&settings[_0xc278d9(0x2c6)]!=''&&(_0x1ea8be={..._0x1ea8be,'telegramToken':_0xc278d9(0x28d)}),settings[_0xc278d9(0x390)]&&settings[_0xc278d9(0x390)]!=''&&(_0x1ea8be={..._0x1ea8be,'bbPassword':'************'}),settings[_0xc278d9(0x20d)]&&settings[_0xc278d9(0x20d)]!=''&&(_0x1ea8be={..._0x1ea8be,'marketcapApi':_0xc278d9(0x28d)}),(settings['bbPassword']&&settings[_0xc278d9(0x390)]=='***'||settings[_0xc278d9(0x2c6)]&&settings[_0xc278d9(0x2c6)]==_0xc278d9(0x341)||settings[_0xc278d9(0x20d)]&&settings[_0xc278d9(0x20d)]==_0xc278d9(0x341))&&(_0x1ea8be={..._0x1ea8be,'restored':{'password':settings['bbPassword']==_0xc278d9(0x341),'telegram':settings[_0xc278d9(0x2c6)]==_0xc278d9(0x341),'marketcap':settings['marketcapApi']==_0xc278d9(0x341)}}),_0x1ea8be;}async function updateBB(_0x19ab5a){const _0x2f1d64=_0x563d5d;await backupConfigFiles(),installingUpdate=!![],config[_0x2f1d64(0x209)](_0x4d0ec5=>{const _0x1f869a=_0x2f1d64;restartBot(_0x4d0ec5[_0x1f869a(0x34c)]);});if(_0x19ab5a=='update')process[_0x2f1d64(0x2a7)]({'update':!![],'environment':environment},_0x34ff07=>{});else _0x19ab5a==_0x2f1d64(0x31d)&&process[_0x2f1d64(0x2a7)]({'reinstall':!![],'environment':environment},_0x19c458=>{});}function startBot(_0xc003b5,_0x3a14ba,_0x5a1a1b){const _0x75fb28=_0x563d5d;if(debugging)_0xc003b5['push']('-d');let _0x5c4447=![];const _0x1dd1f8=_0xc003b5[0x0];_0x3a14ba={..._0x3a14ba,'stdio':[_0x75fb28(0x2cd),_0x75fb28(0x2cd),_0x75fb28(0x2cd),_0x75fb28(0x35f)]},pid[_0x1dd1f8]=childProcess['fork'](botfile,_0xc003b5,_0x3a14ba),pid[_0x1dd1f8]['on']('message',_0x37a4d5=>{const _0x5295ee=_0x75fb28;switch(Object['keys'](_0x37a4d5)[0x0]){case _0x5295ee(0x28a):updateBotName(_0x1dd1f8,_0x37a4d5[_0x5295ee(0x28a)]);break;case _0x5295ee(0x244):updateBotManager();break;case _0x5295ee(0x24e):updateStatus(_0x1dd1f8,_0x37a4d5[_0x5295ee(0x24e)]);break;case'live':updateLive(_0x1dd1f8,_0x37a4d5[_0x5295ee(0x368)]);break;case _0x5295ee(0x210):updateLive(_0x1dd1f8,_0x37a4d5[_0x5295ee(0x210)]),io['to'](_0x1dd1f8)[_0x5295ee(0x1ec)](_0x5295ee(0x24e),{'access':{'allow':![],'reason':_0x5295ee(0x299),'token':null}});break;case'stop':_0x37a4d5[_0x5295ee(0x265)]==_0x5295ee(0x219)&&restartBot(_0x1dd1f8);_0x37a4d5[_0x5295ee(0x265)]==_0x5295ee(0x2b4)&&toggleBot(_0x1dd1f8,_0x5295ee(0x26c),'stopped');break;case _0x5295ee(0x27c):sendTelegramBot(_0x1dd1f8,_0x37a4d5[_0x5295ee(0x27c)]);break;case _0x5295ee(0x268):sendTelegramMsg(_0x37a4d5['telegrammsg']);break;case _0x5295ee(0x278):io['to'](_0x1dd1f8)[_0x5295ee(0x1ec)](_0x37a4d5['function'],_0x37a4d5[_0x5295ee(0x311)]);break;}}),pid[_0x1dd1f8]['on'](_0x75fb28(0x2ba),function(_0x4067db){if(_0x5c4447)return;_0x5c4447=!![],_0x5a1a1b(_0x4067db);}),pid[_0x1dd1f8]['on'](_0x75fb28(0x2af),async function(_0x398824){const _0x432118=_0x75fb28;if(terminating)return;if(installingUpdate){logger['debug'](_0x432118(0x3a6)),io[_0x432118(0x2c1)]();return;}if(_0x5c4447)return;_0x5c4447=!![],_0x5a1a1b(null);const _0x4382b9=dbConfig[_0x432118(0x2fc)](_0x432118(0x36e))[_0x432118(0x318)]({'botID':_0x1dd1f8})['value']();_0x4382b9&&(_0x4382b9['status']==_0x432118(0x24c)||_0x4382b9[_0x432118(0x24e)]=='new')&&(await sleep(0x3e8),updateLive(_0x1dd1f8,'stopped'),logger['full'](_0x432118(0x334)+_0x1dd1f8),startBot([_0x1dd1f8,userID],{'cwd':bbpath},function(_0x29fd36){const _0x2644fa=_0x432118;if(_0x29fd36)logger[_0x2644fa(0x282)](_0x29fd36);}));});}function stopBot(_0x3bcb60){const _0x4c7be4=_0x563d5d;getClientsWithBotID(_0x3bcb60)[_0x4c7be4(0x209)](_0x4a0d73=>{getSocket(_0x4a0d73['id'])['disconnect'](!![]),removeClient(_0x4a0d73['id']);}),pid[_0x3bcb60]&&(pid[_0x3bcb60][_0x4c7be4(0x2b4)](),pid[_0x3bcb60]=null);}function stopAllBots(){const _0xc98d17=_0x563d5d;terminating=!![];const _0x104101=getEnabledBots();_0x104101[_0xc98d17(0x209)](_0x42382f=>{const _0x9c8950=_0xc98d17;stopBot(_0x42382f[_0x9c8950(0x34c)]);});}function _0x35d4(_0x123f45,_0x54d372){const _0x4b69a4=_0xfe74();return _0x35d4=function(_0x37b795,_0x30b3f2){_0x37b795=_0x37b795-0x1d8;let _0xfe7460=_0x4b69a4[_0x37b795];return _0xfe7460;},_0x35d4(_0x123f45,_0x54d372);}function restartBot(_0x3095fc){const _0x2163ed=_0x563d5d;if(pid[_0x3095fc])pid[_0x3095fc][_0x2163ed(0x2b4)]();}function addBot(){const _0x5b42e0=_0x563d5d;let _0x57da5c;for(let _0x3e9d00=0x1;_0x3e9d00<0x3e9;_0x3e9d00++){_0x57da5c=_0x3e9d00[_0x5b42e0(0x337)]()['padStart'](0x3,'0');let _0x521018=config[_0x5b42e0(0x318)](_0x4f13e1=>_0x4f13e1[_0x5b42e0(0x34c)]==_0x57da5c);if(!_0x521018)break;}if(_0x57da5c===_0x5b42e0(0x3b9)){logger[_0x5b42e0(0x282)](_0x5b42e0(0x256));return;}logger['full'](_0x5b42e0(0x29b)+_0x57da5c),dbConfig[_0x5b42e0(0x2fc)]('bots')[_0x5b42e0(0x2a3)]({'botID':_0x57da5c,'botname':_0x5b42e0(0x2fe)+_0x57da5c,'status':_0x5b42e0(0x38a),'live':''})[_0x5b42e0(0x343)](),startBot([_0x57da5c,userID],{'cwd':bbpath},function(_0x37b666){const _0x47c82b=_0x5b42e0;if(_0x37b666)logger[_0x47c82b(0x282)](_0x37b666);}),config=getConfiguration(),io['to'](_0x5b42e0(0x2d4))[_0x5b42e0(0x1ec)](_0x5b42e0(0x36e),config),broadcastToBots(_0x5b42e0(0x36e),JSON[_0x5b42e0(0x280)](config));}function deleteBot(_0x1fe581){const _0x3ef39c=_0x563d5d;getClientsWithBotID(_0x1fe581)[_0x3ef39c(0x209)](_0x166a66=>{const _0x389e40=_0x3ef39c;getSocket(_0x166a66['id'])[_0x389e40(0x1de)](!![]),removeClient(_0x166a66['id']);}),dbConfig['get']('bots')[_0x3ef39c(0x286)]({'botID':_0x1fe581})['write'](),logger['full'](_0x3ef39c(0x399)+_0x1fe581),stopBot(_0x1fe581);try{if(fs['existsSync'](path['join'](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x2f8))))fs[_0x3ef39c(0x381)](path[_0x3ef39c(0x380)](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x2f8)));if(fs['existsSync'](path[_0x3ef39c(0x380)](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x26f))))fs[_0x3ef39c(0x381)](path[_0x3ef39c(0x380)](configpath,'bot-'+_0x1fe581+_0x3ef39c(0x26f)));if(fs['existsSync'](path[_0x3ef39c(0x380)](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x29e))))fs[_0x3ef39c(0x381)](path['join'](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x29e)));if(fs[_0x3ef39c(0x203)](path['join'](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x298))))fs[_0x3ef39c(0x381)](path['join'](configpath,_0x3ef39c(0x2a1)+_0x1fe581+_0x3ef39c(0x298)));}catch(_0x1674d7){if(_0x1674d7)logger[_0x3ef39c(0x282)](_0x3ef39c(0x1e0),_0x1674d7);}config=getConfiguration(),io['to'](_0x3ef39c(0x2d4))['emit'](_0x3ef39c(0x36e),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x2a941c,_0x1ae95b,_0x53195f){const _0x174f48=_0x563d5d;dbConfig['get'](_0x174f48(0x36e))[_0x174f48(0x318)]({'botID':_0x2a941c})[_0x174f48(0x22f)]({'status':_0x1ae95b})[_0x174f48(0x22f)]({'live':_0x53195f})[_0x174f48(0x343)]();if(_0x1ae95b==_0x174f48(0x24c)||_0x1ae95b==_0x174f48(0x38a))logger[_0x174f48(0x282)](_0x174f48(0x3d2)+_0x2a941c),startBot([_0x2a941c,userID],{'cwd':bbpath},function(_0x3954f5){const _0x43702f=_0x174f48;if(_0x3954f5)logger[_0x43702f(0x282)](_0x3954f5);});else(_0x1ae95b==_0x174f48(0x26c)||_0x1ae95b==_0x174f48(0x396))&&(logger['full'](_0x174f48(0x25e)+_0x2a941c),stopBot(_0x2a941c));config=getConfiguration(),io['to'](_0x174f48(0x2d4))['emit'](_0x174f48(0x36e),config),broadcastToBots(_0x174f48(0x36e),JSON[_0x174f48(0x280)](config));}function toggleStatus(_0xaf9e26){const _0x112ee1=_0x563d5d;let _0x32f554=dbConfig[_0x112ee1(0x2fc)](_0x112ee1(0x36e))[_0x112ee1(0x318)]({'botID':_0xaf9e26})[_0x112ee1(0x24a)](),_0x111bc5;if(_0x32f554[_0x112ee1(0x24e)]==='enabled')_0x111bc5=_0x112ee1(0x26c);else{if(_0x32f554['status']===_0x112ee1(0x38a))_0x111bc5='new-disabled';else{if(_0x32f554[_0x112ee1(0x24e)]===_0x112ee1(0x396))_0x111bc5=_0x112ee1(0x38a);else{if(_0x32f554['status']===_0x112ee1(0x26c))_0x111bc5=_0x112ee1(0x24c);}}}return _0x111bc5;}function updateStatus(_0x540574,_0x535157){const _0x5d534f=_0x563d5d;dbConfig[_0x5d534f(0x2fc)](_0x5d534f(0x36e))[_0x5d534f(0x318)]({'botID':_0x540574})[_0x5d534f(0x22f)]({'status':_0x535157})[_0x5d534f(0x343)](),config=getConfiguration(),io['to'](_0x5d534f(0x2d4))[_0x5d534f(0x1ec)](_0x5d534f(0x36e),config),broadcastToBots(_0x5d534f(0x36e),JSON['stringify'](config));}function updateLive(_0x1a437b,_0x3a278e){const _0x1a423c=_0x563d5d;dbConfig[_0x1a423c(0x2fc)](_0x1a423c(0x36e))[_0x1a423c(0x318)]({'botID':_0x1a437b})[_0x1a423c(0x22f)]({'live':_0x3a278e})[_0x1a423c(0x343)](),config=getConfiguration(),io['to'](_0x1a423c(0x2d4))[_0x1a423c(0x1ec)](_0x1a423c(0x36e),config),broadcastToBots(_0x1a423c(0x36e),JSON[_0x1a423c(0x280)](config));}function _0xfe74(){const _0x4dd5db=['Unauthorized\x20attempt\x20to\x20store\x20configuration','\x1b[31m','telegramUsername','restart','storeHeadless','startsWith','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','lastmsgemitted','keys','log','update-bb','delete-bot','toggle','api-eu.mixpanel.com','15TMPCmD','writeFileSync','length','use','getPortfolio','data','Unauthorized\x20attempt\x20to\x20update\x20settings','HTML','Telegram\x20error:','getHours','cloneDeep','assign','status\x20code\x20401','compareSync','restore-backup-file','number','Backup\x20file\x20unzipped\x20and\x20stored',',\x20must\x20be\x20a\x204\x20digit\x20number','toIPv4MappedAddress','privateKey','accept','Logged\x20in\x20user\x20...','show-config','access\x20timeout','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','path','store-fiat','from','/:bot/support','::ffff:127.0.0.1','backup-files','updatebotmanager','5\x20min','#RES#\x20if\x20running\x20locally\x0a','Setting\x20access:\x20','disable','User\x20has\x20been\x20validated','value','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','enabled','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','status','socket','12776032GXzlDw','verify','sendMessage','Error\x20details:','metrics_','store-configuration','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','deleteHistoryAlerts','500887tJlBaX','sendFile','endsWith','once','order','blacklist','Disabled\x20Bot\x20','rmSync','backup-full@','conn','code','map','mtime','stop','isIPv4MappedAddress','family','telegrammsg','message','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','express-fileupload','disabled','Idling\x20(','decrypt','-events.json','date-fns','\x1b[0m','all','metrics','Access\x20enabled\x20for\x20','Login\x20rejected','includes','Notifications\x20enabled','function','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','range','telegramEnabled','telegram','tempaccess_reject_','username','Password\x20reset\x20rejected','stringify','getSeconds','full','uuid','116358RhHpsn','reset-history','remove','temporary\x20access\x20rejected','login\x20token\x20generated','callback','botname','Starting\x20(','temp/','************','https://api.ipify.org?format=json','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20update\x20bot','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','getTime','logs','apiPassword','getUTCHours','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','static','-results.json','reload','initclient','Starting\x20new\x20bot\x20|\x20Bot\x20','userid','search','-performance.json','\x20>\x20','statSync','bot-','resetpw_yes','push','0.0.0','update','store','send','Network\x20Interfaces:','\x20-\x20','listen','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','min','output-002.log','backup','exit','(((.+)+)+)+$','sortBy','connected','getFullYear','kill','settings','http','/:bot/configuration','request','reply','error','|@|','versions','Temporary\x20access\x20rejected','kind','track','2FA\x20login\x20rejected','close','catch','Restore\x20process\x20aborted','node-zip','Invalid\x20IP\x20address','telegramToken','bb/','RSA-OAEP','randomFillSync','-----------------------------------------------------------------------------------','bbUsername','storeConfiguration','inherit','Unauthorized\x20attempt\x20to\x20get\x20portfolio','update_yes','padStart','login','telegramEvents','params','botmanager','filter','logged\x20out','replace','output-003.log','private','reinstall_no','/disable\x20-\x20disable\x20notifications\x0a','clientip','\x20mode','defaults','sockets','slice','/start','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','bb-config.json','type','SIGINT','mode','Notifications\x20enabled\x0a','Starting\x20#RED#Balance\x20Bot\x20v','Starting\x20Balance\x20Bot\x20reinstallation','\x20only\x0a','split','DEFLATE','latestversion','Unauthorized\x20attempt\x20to\x20delete\x20alerts','env','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','binary','Unauthorized\x20attempt\x20to\x20get\x20events','expiry','IPv4','hasOwnProperty','environment','button','-config.json','getMinutes','version','/upload-backup','get','add-bot','Bot\x20','cancelLoading','get-portfolio','\x1b[34m','2FA\x20login\x20token\x20generated','1153436JzSvux','off','backup/','remoteAddress','You\x20can\x20use\x20the\x20following\x20commands:\x0a','graphql-request','getMonth','add','bbvReceive','1930983jlRCWa','toggleBotMode','Logged\x20out\x20user\x20...','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','ETH','args','.zip','orders','isDirectory','SIGTERM','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','zip/','find','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bb-settings.json','show','Unauthorized\x20attempt\x20to\x20log\x20out','reinstall','debug','hex','place-order','file','toggle-bot-mode','No\x20authentication\x20token','confirm-message','argv','notification','reject','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/:bot','resetHistory','backupfile','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','mkdirSync','Allow\x20login\x20from\x20IP\x20address\x20','off_','headers','port','config_orders','Restarting\x20Bot\x20','warning','onepagemode','toString','version.json','1349920YPqBBx','getStartingBalances','address','post','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','telegram2FaApproval','bcryptjs','child_process','***','NTBA_FIX_319','write','generateKeyPairAsync','isValid','tempaccess_5_','30\x20min','Markdown','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','test','[ip-address]','botID','/:bot/performance','whitelist','Orders','allow','Restore\x20process\x20confirmed','title','auth','jsonwebtoken','lowdb','Telegraf\x20error:','store-settings','Node.js\x20v','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','headless','success','Bot\x20Mgr\x20>\x20','token','Restore\x20backup\x20file\x20','ipc','\x1b[36m','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','backup-full.zip','\x20|\x20user:\x20...','sha256','pidExpireLogin','sendMetricsTelegram','placeOrder','live','Password\x20has\x20been\x20reset\x20to:\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',':\x20Bot\x20Mgr\x20>\x20','stopped','apiKey','bots','node','randomBytes','sort','telegramChatId','temporary\x20access\x20not\x20allowed','whitelistEnabled','any','access','login\x20required','All','command','download','secure','bot.js','*$1*','\x20|\x20client:\x20...','reinstall_yes','join','unlinkSync','password','pidRefreshToken','2FA\x20required','Starting\x20Balance\x20Bot\x20update','backup-full','Ok,\x20will\x20send\x20order\x20notifications\x20only','tempaccess_30_','format','new','hashSync','index.html','Yes',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','File\x20uploaded','bbPassword','user','parse','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','output-001.log','host','new-disabled','copyFileSync','messages','Deleted\x20Bot\x20','bot','login2fa_','ipaddr.js','entries',')\x20\x20\x20|\x20Bot\x20','internal','$1_$2_$3','server','config_all','express','127.0.0.1','/:bot/coins','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','<b>Telegram\x20Bot\x20Status:</b>\x0a','get-messages','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','inlineKeyboard','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','6b67f3d61ee94b8f5c80b4affef4c4d9','files','sign','toIPv4Address','apiSecret','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','reset-password','bb-secure.json','reason','logout','emitHistory','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','build','1000','delete-alerts','Unauthorized\x20attempt\x20to\x20confirm\x20message','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','editMessageReplyMarkup','exec','invalid\x20credentials','reinstall-bb','manual','toggle_','loginRequired','<b>Balance\x20Bot\x20Status:</b>\x0a','storeFiat','/on\x20-\x20start\x20bot(s)\x0a','publicKey','timeshift','showname','clients','uncaughtException','/enable\x20-\x20enable\x20notifications\x0a','Your\x20installation\x20is\x20already\x20up\x20to\x20date','15\x20min','All\x20bots','Crypt','production','Enabled\x20Bot\x20','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','settings.','Failed\x20to\x20download\x20','createWriteStream','text','event','uuid-random','auto','running','f2aRequired','readdirSync','timestamp','disconnect','set','Error\x20while\x20deleting\x20config\x20files:\x20','chat','\x20|\x20','connection','2675743oRjhMI','Error:\x20Invalid\x20argument\x20','match','telegramIpApproval','/output-000.log','get-starting-balances','3000','temporary\x20token\x20generated','emit','RSA','yes','hybrid-crypto-js','login\x20not\x20required','init','action','tkn','Unauthorized\x20login\x20attempt\x20(timeout)','Restoring\x20bot(s)\x20from\x20backup','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','crypto','restart_','temporaryAccessAllowed','socket.io','Unauthorized\x20attempt\x20to\x20download\x20','Notifications\x20disabled\x0a','2FA\x20login\x20required','\x20minutes','logs/',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','(staging)','getDate','existsSync','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','secret','name','config_alerts','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','forEach','mixpanel','bbvNew','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','marketcapApi','alias','Server','started','restore_yes_','simple','alerts','Token\x20blacklisted','readFileSync'];_0xfe74=function(){return _0x4dd5db;};return _0xfe74();}function updateBotName(_0x3f63ae,_0x9f508d){const _0x2d2958=_0x563d5d;dbConfig['get']('bots')[_0x2d2958(0x318)]({'botID':_0x3f63ae})[_0x2d2958(0x22f)]({'botname':_0x9f508d})['write'](),config=getConfiguration(),io['to'](_0x2d2958(0x2d4))[_0x2d2958(0x1ec)]('bots',config),broadcastToBots(_0x2d2958(0x36e),JSON[_0x2d2958(0x280)](config));}function updateBotManager(){const _0x466ed1=_0x563d5d;config=getConfiguration(),io['to'](_0x466ed1(0x2d4))[_0x466ed1(0x1ec)](_0x466ed1(0x36e),config),broadcastToBots(_0x466ed1(0x36e),JSON[_0x466ed1(0x280)](config));}function toggleBotMode(_0x509696){const _0x2ac2e4=_0x563d5d;if(pid[_0x509696])pid[_0x509696][_0x2ac2e4(0x2a7)]({'function':_0x2ac2e4(0x30d),'args':null});else{const _0x5c6164=configpath+_0x2ac2e4(0x2a1)+_0x509696+_0x2ac2e4(0x2f8),_0x4d2a68=fs[_0x2ac2e4(0x215)](_0x5c6164),_0x3daf19=JSON[_0x2ac2e4(0x392)](_0x4d2a68),_0x33de20=_0x3daf19[_0x2ac2e4(0x39a)][0x0][_0x2ac2e4(0x35a)];_0x3daf19['bot'][0x0]['headless']=!_0x33de20;const _0x2c17b7=JSON[_0x2ac2e4(0x280)](_0x3daf19,null,0x2);fs[_0x2ac2e4(0x225)](_0x5c6164,_0x2c17b7),config=getConfiguration(),io['to'](_0x2ac2e4(0x2d4))[_0x2ac2e4(0x1ec)](_0x2ac2e4(0x36e),config),broadcastToBots(_0x2ac2e4(0x36e),JSON[_0x2ac2e4(0x280)](config));}}function validateTelegram(_0x2f511d){const _0x2fdf2d=_0x563d5d;if(_0x2f511d[_0x2fdf2d(0x240)][_0x2fdf2d(0x27e)]!=settings[_0x2fdf2d(0x218)]&&'@'+_0x2f511d['from'][_0x2fdf2d(0x27e)]!=settings['telegramUsername']||_0x2f511d[_0x2fdf2d(0x1e1)]['id']!=settings[_0x2fdf2d(0x372)])return sendTelegram(_0x2f511d[_0x2fdf2d(0x1e1)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2fdf2d(0x22b)}),![];return!![];}async function initTelegram(){const _0x3bcad3=_0x563d5d;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x3bcad3(0x2c6)]);let _0x563186=_0x3bcad3(0x307);_0x563186+='\x0a',_0x563186+=_0x3bcad3(0x3cc),_0x563186+=_0x3bcad3(0x2db),_0x563186+=_0x3bcad3(0x30f),_0x563186+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x563186+=_0x3bcad3(0x3c6),_0x563186+='/off\x20-\x20stop\x20bot(s)\x0a',_0x563186+=_0x3bcad3(0x279),_0x563186+='/names\x20-\x20show\x20bot\x20names\x0a',_0x563186+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x563186+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x563186+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x563186+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x563186+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x563186+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x299cde='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x299cde+='\x0a',_0x299cde+=_0x563186,tgBot[_0x3bcad3(0x2c2)]((_0xfc55bf,_0x100162)=>{const _0x16a3ec=_0x3bcad3;logger[_0x16a3ec(0x212)](getTimeStamp()+_0x16a3ec(0x200)),logger[_0x16a3ec(0x31e)](_0x16a3ec(0x356),_0xfc55bf);}),tgBot[_0x3bcad3(0x227)](async(_0x596245,_0x3938c7)=>{const _0x5684a8=_0x3bcad3;if(!(!settings[_0x5684a8(0x372)]&&_0x596245[_0x5684a8(0x2a5)]['message'][_0x5684a8(0x3d8)]==_0x5684a8(0x2e1))){if(!validateTelegram(_0x596245))return;}_0x3938c7();}),tgBot[_0x3bcad3(0x379)]('start',async _0x2f0f62=>{const _0x26bbbf=_0x3bcad3;if(!settings[_0x26bbbf(0x372)])updateSetting(_0x26bbbf(0x372),_0x2f0f62[_0x26bbbf(0x1e1)]['id']);updateSetting(_0x26bbbf(0x27b),!![]);if(!validateTelegram(_0x2f0f62))return;await sendTelegram(_0x2f0f62[_0x26bbbf(0x1e1)]['id'],_0x299cde);}),tgBot[_0x3bcad3(0x379)]('enable',async _0x5754a7=>{const _0x53d354=_0x3bcad3;updateSetting(_0x53d354(0x27b),!![]),await sendTelegram(_0x5754a7['chat']['id'],_0x53d354(0x277));}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x248),async _0x217299=>{const _0x1dbf02=_0x3bcad3;await sendTelegram(_0x217299[_0x1dbf02(0x1e1)]['id'],'Notifications\x20disabled'),updateSetting(_0x1dbf02(0x27b),![]);}),tgBot['command']('config',async _0x42ca52=>{const _0x208fd1=_0x3bcad3,_0xf36e25=Markup['inlineKeyboard']([Markup[_0x208fd1(0x2f7)][_0x208fd1(0x289)](_0x208fd1(0x34f),_0x208fd1(0x333)),Markup[_0x208fd1(0x2f7)]['callback']('Alerts',_0x208fd1(0x207)),Markup[_0x208fd1(0x2f7)][_0x208fd1(0x289)](_0x208fd1(0x378),'config_all')]);_0x42ca52[_0x208fd1(0x2b9)](_0x208fd1(0x328),_0xf36e25);}),tgBot[_0x3bcad3(0x1f2)](_0x3bcad3(0x333),async _0x51fd84=>{const _0x1a3579=_0x3bcad3;_0x51fd84['editMessageReplyMarkup'](),updateSetting(_0x1a3579(0x2d2),'orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x51fd84[_0x1a3579(0x1e1)]['id'],_0x1a3579(0x387));}),tgBot['action']('config_alerts',async _0x4f6533=>{const _0x330032=_0x3bcad3;_0x4f6533[_0x330032(0x3bd)](),updateSetting(_0x330032(0x2d2),_0x330032(0x213)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4f6533[_0x330032(0x1e1)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x3bcad3(0x1f2)](_0x3bcad3(0x3a2),async _0x410b52=>{const _0x267886=_0x3bcad3;_0x410b52[_0x267886(0x3bd)](),updateSetting(_0x267886(0x2d2),_0x267886(0x272)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x410b52[_0x267886(0x1e1)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x24e),async _0x2f8333=>{const _0x5155b5=_0x3bcad3,_0xfad5a4=getBotsWithMode();let _0x719a19=_0x5155b5(0x3c4);config['forEach'](_0x5f813=>{const _0x3fe892=_0x5155b5,_0x293f83=_0xfad5a4['find'](_0x17f58d=>_0x17f58d[_0x3fe892(0x34c)]==_0x5f813['botID'])[_0x3fe892(0x2e6)];_0x719a19+='Bot\x20'+_0x5f813[_0x3fe892(0x34c)]+':\x20'+_0x5f813[_0x3fe892(0x24e)]+_0x3fe892(0x1e2)+_0x293f83+'\x20|\x20'+_0x5f813[_0x3fe892(0x368)]+'\x0a';}),_0x719a19+='\x0a',_0x719a19+=_0x5155b5(0x3a7),_0x719a19+=!settings[_0x5155b5(0x27b)]?_0x5155b5(0x1fc):_0x5155b5(0x2e7),_0x719a19+=settings[_0x5155b5(0x27b)]?settings[_0x5155b5(0x2d2)]==_0x5155b5(0x272)?_0x5155b5(0x319):'Notifications\x20types:\x20'+settings[_0x5155b5(0x2d2)]+_0x5155b5(0x2ea):'',await sendTelegram(_0x2f8333[_0x5155b5(0x1e1)]['id'],_0x719a19,{'parse_mode':_0x5155b5(0x22b)});}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x219),async _0x203a1e=>{const _0x5f279c=_0x3bcad3,_0x110b17=getEnabledBots();if(_0x110b17[_0x5f279c(0x226)]==0x0)await sendTelegram(_0x203a1e[_0x5f279c(0x1e1)]['id'],_0x5f279c(0x3d3));else{if(_0x110b17[_0x5f279c(0x226)]>0x1)_0x110b17[_0x5f279c(0x2a3)]({'botID':_0x5f279c(0x272)});let _0x1ea7a8=[],_0x569a63=[];const _0x36eeaf=_0x110b17[_0x5f279c(0x226)]%0x4==0x0||_0x110b17[_0x5f279c(0x226)]%0x4==0x3||_0x110b17[_0x5f279c(0x226)]%0x3==0x1?0x4:0x3;let _0x13697e=0x0;_0x110b17[_0x5f279c(0x209)]((_0x589e6e,_0x5821c6)=>{const _0x2f29dc=_0x5f279c;if(_0x5821c6%_0x36eeaf==0x0)_0x569a63=[];_0x569a63[_0x2f29dc(0x2a3)](Markup['button'][_0x2f29dc(0x289)](_0x589e6e[_0x2f29dc(0x34c)]=='all'?_0x2f29dc(0x3cf):_0x2f29dc(0x2fe)+_0x589e6e['botID'],_0x2f29dc(0x1f8)+_0x589e6e[_0x2f29dc(0x34c)])),_0x5821c6%_0x36eeaf==0x0&&(_0x1ea7a8[_0x13697e]=_0x569a63,_0x13697e++);});const _0x3bebe9=Markup[_0x5f279c(0x3aa)](_0x1ea7a8);_0x203a1e['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x3bebe9);}}),tgBot[_0x3bcad3(0x1f2)](/restart_(.+)/,async _0x5655b8=>{const _0x4754f8=_0x3bcad3,_0x206c5f=_0x5655b8['match'][0x1];_0x5655b8[_0x4754f8(0x3bd)](),_0x206c5f=='all'?config['forEach'](_0x3fc1e1=>{const _0x3daaf3=_0x4754f8;restartBot(_0x3fc1e1[_0x3daaf3(0x34c)]);}):restartBot(_0x206c5f);}),tgBot[_0x3bcad3(0x379)]('on',async _0x26644e=>{const _0x1754ac=_0x3bcad3,_0x570754=getDisabledBots();if(_0x570754['length']==0x0)await sendTelegram(_0x26644e['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x570754[_0x1754ac(0x226)]>0x1)_0x570754[_0x1754ac(0x2a3)]({'botID':_0x1754ac(0x272)});let _0x10932b=[],_0x20cf34=[];const _0x3959b8=_0x570754[_0x1754ac(0x226)]%0x4==0x0||_0x570754['length']%0x4==0x3||_0x570754[_0x1754ac(0x226)]%0x3==0x1?0x4:0x3;let _0x2cb2df=0x0;_0x570754[_0x1754ac(0x209)]((_0x403feb,_0x2fbd0e)=>{const _0x19abef=_0x1754ac;if(_0x2fbd0e%_0x3959b8==0x0)_0x20cf34=[];_0x20cf34[_0x19abef(0x2a3)](Markup[_0x19abef(0x2f7)]['callback'](_0x403feb[_0x19abef(0x34c)]==_0x19abef(0x272)?_0x19abef(0x3cf):'Bot\x20'+_0x403feb[_0x19abef(0x34c)],'on_'+_0x403feb[_0x19abef(0x34c)])),_0x2fbd0e%_0x3959b8==0x0&&(_0x10932b[_0x2cb2df]=_0x20cf34,_0x2cb2df++);});const _0x1d0016=Markup[_0x1754ac(0x3aa)](_0x10932b);_0x26644e[_0x1754ac(0x2b9)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x1d0016);}}),tgBot['action'](/on_(.+)/,async _0x45e31f=>{const _0x2a622c=_0x3bcad3,_0x25e64d=_0x45e31f[_0x2a622c(0x1e6)][0x1];_0x45e31f[_0x2a622c(0x3bd)]();if(_0x25e64d=='all'){const _0x454aaf=getDisabledBots();await sendTelegram(_0x45e31f[_0x2a622c(0x1e1)]['id'],_0x2a622c(0x1f6)),_0x454aaf[_0x2a622c(0x209)](_0x38187d=>{const _0x931929=_0x2a622c;if(_0x38187d[_0x931929(0x34c)]!=_0x931929(0x272))toggleBot(_0x38187d[_0x931929(0x34c)],toggleStatus(_0x38187d[_0x931929(0x34c)]),_0x931929(0x36c));});}else await sendTelegram(_0x45e31f[_0x2a622c(0x1e1)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x25e64d),toggleBot(_0x25e64d,toggleStatus(_0x25e64d),_0x2a622c(0x36c));}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x304),async _0x35238b=>{const _0x396ce7=_0x3bcad3,_0x1482ab=getEnabledBots();if(_0x1482ab['length']==0x0)await sendTelegram(_0x35238b[_0x396ce7(0x1e1)]['id'],_0x396ce7(0x3d3));else{if(_0x1482ab[_0x396ce7(0x226)]>0x1)_0x1482ab[_0x396ce7(0x2a3)]({'botID':'all'});let _0x3d7f7a=[],_0x572c66=[];const _0x584bd3=_0x1482ab[_0x396ce7(0x226)]%0x4==0x0||_0x1482ab[_0x396ce7(0x226)]%0x4==0x3||_0x1482ab['length']%0x3==0x1?0x4:0x3;let _0x3372d4=0x0;_0x1482ab[_0x396ce7(0x209)]((_0x45a1cb,_0x4b0b66)=>{const _0x1fd59c=_0x396ce7;if(_0x4b0b66%_0x584bd3==0x0)_0x572c66=[];_0x572c66[_0x1fd59c(0x2a3)](Markup[_0x1fd59c(0x2f7)][_0x1fd59c(0x289)](_0x45a1cb[_0x1fd59c(0x34c)]==_0x1fd59c(0x272)?_0x1fd59c(0x3cf):_0x1fd59c(0x2fe)+_0x45a1cb[_0x1fd59c(0x34c)],_0x1fd59c(0x330)+_0x45a1cb[_0x1fd59c(0x34c)])),_0x4b0b66%_0x584bd3==0x0&&(_0x3d7f7a[_0x3372d4]=_0x572c66,_0x3372d4++);});const _0x410d4c=Markup[_0x396ce7(0x3aa)](_0x3d7f7a);_0x35238b[_0x396ce7(0x2b9)](_0x396ce7(0x361),_0x410d4c);}}),tgBot['action'](/off_(.+)/,async _0x259d6d=>{const _0xf7f7a3=_0x3bcad3,_0x4a1251=_0x259d6d['match'][0x1];_0x259d6d['editMessageReplyMarkup']();if(_0x4a1251==_0xf7f7a3(0x272)){const _0x1be4b7=getEnabledBots();await sendTelegram(_0x259d6d['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x1be4b7['forEach'](_0x32ebed=>{const _0x123707=_0xf7f7a3;if(_0x32ebed['botID']!='all')toggleBot(_0x32ebed[_0x123707(0x34c)],toggleStatus(_0x32ebed[_0x123707(0x34c)]),_0x123707(0x36c));});}else await sendTelegram(_0x259d6d[_0xf7f7a3(0x1e1)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x4a1251),toggleBot(_0x4a1251,toggleStatus(_0x4a1251),_0xf7f7a3(0x36c));}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x273),async _0x2bbc2d=>{const _0x5c5cea=_0x3bcad3,_0x11ee6d=getEnabledBots();if(_0x11ee6d[_0x5c5cea(0x226)]==0x0)await sendTelegram(_0x2bbc2d[_0x5c5cea(0x1e1)]['id'],_0x5c5cea(0x3d3));else{if(_0x11ee6d[_0x5c5cea(0x226)]>0x1){let _0x538cc0=[],_0x556321=[];const _0x42e40d=_0x11ee6d['length']%0x4==0x0||_0x11ee6d[_0x5c5cea(0x226)]%0x4==0x3||_0x11ee6d[_0x5c5cea(0x226)]%0x3==0x1?0x4:0x3;let _0x3895a3=0x0;_0x11ee6d['forEach']((_0x4024a9,_0x4a01d1)=>{const _0x37e81a=_0x5c5cea;if(_0x4a01d1%_0x42e40d==0x0)_0x556321=[];_0x556321[_0x37e81a(0x2a3)](Markup[_0x37e81a(0x2f7)][_0x37e81a(0x289)](_0x37e81a(0x2fe)+_0x4024a9[_0x37e81a(0x34c)],_0x37e81a(0x254)+_0x4024a9[_0x37e81a(0x34c)])),_0x4a01d1%_0x42e40d==0x0&&(_0x538cc0[_0x3895a3]=_0x556321,_0x3895a3++);});const _0x5635db=Markup[_0x5c5cea(0x3aa)](_0x538cc0);_0x2bbc2d['reply'](_0x5c5cea(0x23d),_0x5635db);}else{const _0x3419cd=_0x11ee6d[0x0][_0x5c5cea(0x34c)];if(pid[_0x3419cd])pid[_0x3419cd][_0x5c5cea(0x2a7)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x3bd983=>{const _0x4cd864=_0x3bcad3,_0x2c79b9=_0x3bd983[_0x4cd864(0x1e6)][0x1];_0x3bd983['editMessageReplyMarkup']();if(pid[_0x2c79b9])pid[_0x2c79b9][_0x4cd864(0x2a7)]({'function':_0x4cd864(0x366),'args':null});}),tgBot['command']('portfolio',async _0x531c22=>{const _0x45e899=_0x3bcad3,_0x19d045=getEnabledBots();if(_0x19d045[_0x45e899(0x226)]==0x0)await sendTelegram(_0x531c22[_0x45e899(0x1e1)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x19d045[_0x45e899(0x226)]>0x1){let _0x484718=[],_0x5ca781=[];const _0x167bf8=_0x19d045[_0x45e899(0x226)]%0x4==0x0||_0x19d045[_0x45e899(0x226)]%0x4==0x3||_0x19d045[_0x45e899(0x226)]%0x3==0x1?0x4:0x3;let _0x13b631=0x0;_0x19d045['forEach']((_0x140efc,_0x3bf358)=>{const _0x401f7e=_0x45e899;if(_0x3bf358%_0x167bf8==0x0)_0x5ca781=[];_0x5ca781['push'](Markup[_0x401f7e(0x2f7)][_0x401f7e(0x289)]('Bot\x20'+_0x140efc[_0x401f7e(0x34c)],'portfolio_'+_0x140efc[_0x401f7e(0x34c)])),_0x3bf358%_0x167bf8==0x0&&(_0x484718[_0x13b631]=_0x5ca781,_0x13b631++);});const _0x549c05=Markup[_0x45e899(0x3aa)](_0x484718);_0x531c22[_0x45e899(0x2b9)](_0x45e899(0x2f0),_0x549c05);}else{const _0xe82398=_0x19d045[0x0]['botID'];if(pid[_0xe82398])pid[_0xe82398][_0x45e899(0x2a7)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x3bcad3(0x1f2)](/portfolio_(.+)/,async _0x416f5b=>{const _0x172d5b=_0x3bcad3,_0x3c7048=_0x416f5b['match'][0x1];_0x416f5b[_0x172d5b(0x3bd)]();if(pid[_0x3c7048])pid[_0x3c7048][_0x172d5b(0x2a7)]({'function':'sendPortfolioTelegram','args':null});}),tgBot['command'](_0x3bcad3(0x2a5),async _0x509224=>{const _0x47ebb6=_0x3bcad3;await getMessages();if(!updateAvailable)await sendTelegram(_0x509224[_0x47ebb6(0x1e1)]['id'],_0x47ebb6(0x3cd));else{if(!validInstallation)await sendTelegram(_0x509224[_0x47ebb6(0x1e1)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x89ed1=Markup['inlineKeyboard']([Markup[_0x47ebb6(0x2f7)]['callback'](_0x47ebb6(0x38d),_0x47ebb6(0x2cf)),Markup[_0x47ebb6(0x2f7)][_0x47ebb6(0x289)]('No','update_no')]);_0x509224[_0x47ebb6(0x2b9)](_0x47ebb6(0x23c),_0x89ed1);}}}),tgBot[_0x3bcad3(0x1f2)](/update_(.+)/,async _0x4b8dc4=>{const _0x2ab01e=_0x3bcad3,_0x5906f6=_0x4b8dc4[_0x2ab01e(0x1e6)][0x1];_0x4b8dc4[_0x2ab01e(0x3bd)](),_0x5906f6==_0x2ab01e(0x1ee)&&(await sendTelegram(_0x4b8dc4[_0x2ab01e(0x1e1)]['id'],_0x2ab01e(0x385)),updateBB(_0x2ab01e(0x2a5))),_0x5906f6=='no'&&await sendTelegram(_0x4b8dc4[_0x2ab01e(0x1e1)]['id'],_0x2ab01e(0x33d));}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x31d),async _0x59d99d=>{const _0x49b171=_0x3bcad3;if(!validInstallation)await sendTelegram(_0x59d99d[_0x49b171(0x1e1)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x44a9c4=Markup[_0x49b171(0x3aa)]([Markup['button'][_0x49b171(0x289)]('Yes',_0x49b171(0x37f)),Markup['button'][_0x49b171(0x289)]('No',_0x49b171(0x2da))]);_0x59d99d[_0x49b171(0x2b9)](_0x49b171(0x393),_0x44a9c4);}}),tgBot['action'](/reinstall_(.+)/,async _0x10b01a=>{const _0x1a46d4=_0x3bcad3,_0x36865e=_0x10b01a[_0x1a46d4(0x1e6)][0x1];_0x10b01a[_0x1a46d4(0x3bd)](),_0x36865e==_0x1a46d4(0x1ee)&&(await sendTelegram(_0x10b01a['chat']['id'],_0x1a46d4(0x2e9)),updateBB(_0x1a46d4(0x31d))),_0x36865e=='no'&&await sendTelegram(_0x10b01a[_0x1a46d4(0x1e1)]['id'],_0x1a46d4(0x24b));}),tgBot[_0x3bcad3(0x379)](_0x3bcad3(0x222),async _0x557b1c=>{const _0x4b73b7=_0x3bcad3,_0x4f8550=getBotsWithMode();if(_0x4f8550[_0x4b73b7(0x226)]==0x0)await sendTelegram(_0x557b1c['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x48e006=[],_0x1fc21a=[];const _0x6e8f9d=0x2;let _0x1f9057=0x0;_0x4f8550[_0x4b73b7(0x209)]((_0x4a48ef,_0x1a3e4c)=>{const _0x2a233a=_0x4b73b7;if(_0x1a3e4c%_0x6e8f9d==0x0)_0x1fc21a=[];_0x1fc21a['push'](Markup[_0x2a233a(0x2f7)][_0x2a233a(0x289)](_0x2a233a(0x2fe)+_0x4a48ef['botID']+'\x20('+_0x4a48ef[_0x2a233a(0x2e6)]+')',_0x2a233a(0x3c2)+_0x4a48ef[_0x2a233a(0x34c)])),_0x1a3e4c%_0x6e8f9d==0x0&&(_0x48e006[_0x1f9057]=_0x1fc21a,_0x1f9057++);});const _0x4c9cd6=Markup[_0x4b73b7(0x3aa)](_0x48e006);_0x557b1c[_0x4b73b7(0x2b9)](_0x4b73b7(0x3b7),_0x4c9cd6);}}),tgBot[_0x3bcad3(0x1f2)](/toggle_(.+)/,async _0x4766ac=>{const _0xdfacd5=_0x3bcad3,_0x458838=_0x4766ac[_0xdfacd5(0x1e6)][0x1];_0x4766ac['editMessageReplyMarkup']();const _0x3da159=getBotsWithMode(),_0xa0f9a1=_0x3da159[_0xdfacd5(0x318)](_0x19ad65=>_0x19ad65['botID']==_0x458838),_0x117c7b=_0xa0f9a1[_0xdfacd5(0x2e6)]=='auto'?_0xdfacd5(0x3c1):'auto';await sendTelegram(_0x4766ac['chat']['id'],_0xdfacd5(0x3d4)+_0x458838+'\x20to\x20'+_0x117c7b+_0xdfacd5(0x2dd)),toggleBotMode(_0x458838);}),tgBot[_0x3bcad3(0x379)]('names',async _0xcfea6e=>{const _0xfe4130=_0x3bcad3;let _0x4cc1ee='';config['forEach'](_0x322f90=>{const _0x5200c4=_0x35d4;_0x4cc1ee+=_0x5200c4(0x2fe)+_0x322f90['botID']+':\x20'+_0x322f90[_0x5200c4(0x28a)]+'\x0a';}),await sendTelegram(_0xcfea6e[_0xfe4130(0x1e1)]['id'],_0x4cc1ee,{'parse_mode':_0xfe4130(0x22b)});}),tgBot['command']('help',async _0x59a230=>{await sendTelegram(_0x59a230['chat']['id'],_0x563186);}),process[_0x3bcad3(0x25b)](_0x3bcad3(0x2e5),()=>tgBot[_0x3bcad3(0x265)]('SIGINT')),process['once'](_0x3bcad3(0x315),()=>tgBot[_0x3bcad3(0x265)](_0x3bcad3(0x315))),tgBot['launch']();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x262fa8,_0x3bcd81,_0x2a0849){const _0x503148=_0x563d5d;_0x2a0849={..._0x2a0849,'disable_web_page_preview':!![]};try{await tgBot[_0x503148(0x27c)][_0x503148(0x252)](_0x262fa8,_0x3bcd81,_0x2a0849);}catch(_0x4bb632){console['log'](_0x503148(0x22c),_0x4bb632);}}async function sendTelegramBot(_0x430a5c,_0x580521){const _0x33ea35=_0x563d5d;if(settings['telegramEnabled']){if(settings[_0x33ea35(0x2d2)]==_0x33ea35(0x272)||(_0x580521[_0x33ea35(0x2e4)]==_0x33ea35(0x2ba)||_0x580521['type']==_0x33ea35(0x335)||_0x580521[_0x33ea35(0x2e4)]==_0x33ea35(0x35b))&&settings[_0x33ea35(0x2d2)]==_0x33ea35(0x213)||_0x580521[_0x33ea35(0x2e4)]==_0x33ea35(0x25c)&&settings[_0x33ea35(0x2d2)]==_0x33ea35(0x313)){if(tgBot&&settings[_0x33ea35(0x372)]){if(_0x580521[_0x33ea35(0x3c9)])await sendTelegram(settings[_0x33ea35(0x372)],_0x580521['botname']+_0x33ea35(0x29f)+_0x580521[_0x33ea35(0x3d9)]);else await sendTelegram(settings[_0x33ea35(0x372)],_0x33ea35(0x2fe)+_0x430a5c+_0x33ea35(0x29f)+_0x580521[_0x33ea35(0x3d9)]);}}}}async function sendTelegramMsg(_0x534f71,_0x162b4e=_0x563d5d(0x22b)){const _0x4146e8=_0x563d5d;return settings['telegramEnabled']&&tgBot&&settings[_0x4146e8(0x372)]?(await sendTelegram(settings[_0x4146e8(0x372)],_0x534f71,{'parse_mode':_0x162b4e}),!![]):![];}function getDeviceWithIp(_0x3fc24f){const _0x3063e1=_0x563d5d;return devices[_0x3063e1(0x318)](_0x51410c=>_0x51410c['ip']===_0x3fc24f);}async function temporaryAccess2FA(_0x24b05e,_0x541607){const _0xf29610=_0x563d5d;let _0x9c02bd=new Date(),_0x3d2b3d=![];if(lastIpApproval){if(_0x9c02bd-lastIpApproval<0x1388)_0x3d2b3d=!![];}lastIpApproval=new Date();if(_0x3d2b3d)return;if(tgBot&&settings[_0xf29610(0x372)]){const _0x377f05=uuidRandom();tmpStorage[_0x377f05]={'uuid':_0x24b05e,'externalip':_0x541607};const _0x584fb1=Markup[_0xf29610(0x3aa)]([Markup[_0xf29610(0x2f7)][_0xf29610(0x289)](_0xf29610(0x245),_0xf29610(0x346)+_0x377f05),Markup[_0xf29610(0x2f7)][_0xf29610(0x289)](_0xf29610(0x3ce),'tempaccess_15_'+_0x377f05),Markup['button'][_0xf29610(0x289)](_0xf29610(0x347),_0xf29610(0x388)+_0x377f05),Markup[_0xf29610(0x2f7)][_0xf29610(0x289)](_0xf29610(0x327),_0xf29610(0x27d)+_0x377f05)]);await sendTelegram(settings[_0xf29610(0x372)],_0xf29610(0x21c)+normalizeIP(_0x541607)[_0xf29610(0x31b)]+'\x20?',_0x584fb1),tgBot[_0xf29610(0x1f2)](/tempaccess_(.+)_(.+)/,async _0x18c72a=>{const _0x231832=_0xf29610,_0xae7fd7=_0x18c72a['match'][0x1],_0x58bb03=_0x18c72a[_0x231832(0x1e6)][0x2],{uuid:_0xd5ddf1,externalip:_0x42d545}=tmpStorage[_0x58bb03];delete tmpStorage[_0x58bb03],_0x18c72a[_0x231832(0x3bd)](),devices[_0xd5ddf1]['telegramIpApproval']={'clientip':_0x42d545,'timestamp':new Date()[_0x231832(0x292)](),'expiry':_0xae7fd7},_0xae7fd7!=_0x231832(0x327)?(await sendTelegram(_0x18c72a['chat']['id'],_0x231832(0x274)+_0xae7fd7+_0x231832(0x1fe),{'parse_mode':_0x231832(0x22b)}),io['to'](_0xd5ddf1)['emit'](_0x231832(0x24e),{'access':{'allow':![],'reason':_0x231832(0x299),'token':null}})):(await sendTelegram(_0x18c72a[_0x231832(0x1e1)]['id'],_0x231832(0x2bd)),io['to'](_0xd5ddf1)[_0x231832(0x1ec)](_0x231832(0x24e),{'access':{'allow':![],'reason':_0x231832(0x287),'token':null}}));});}}async function loginAccess2FA(_0x594f19,_0x276d1c){const _0x370d20=_0x563d5d;if(tgBot&&settings[_0x370d20(0x372)]){const _0x31cf22=uuidRandom();tmpStorage[_0x31cf22]={'uuid':_0x594f19,'externalip':_0x276d1c};const _0x1ac618=Markup[_0x370d20(0x3aa)]([Markup['button'][_0x370d20(0x289)](_0x370d20(0x238),_0x370d20(0x39b)+loginExpiry+'_'+_0x31cf22),Markup[_0x370d20(0x2f7)][_0x370d20(0x289)](_0x370d20(0x327),'login2fa_reject_'+_0x31cf22)]);await sendTelegram(settings[_0x370d20(0x372)],_0x370d20(0x32f)+normalizeIP(_0x276d1c)[_0x370d20(0x31b)]+'\x20?',_0x1ac618),tgBot[_0x370d20(0x1f2)](/login2fa_(.+)_(.+)/,async _0x11c4af=>{const _0x35e682=_0x370d20,_0x419c4b=_0x11c4af['match'][0x1],_0x1423a4=_0x11c4af['match'][0x2],{uuid:_0x3f1add,externalip:_0x141888}=tmpStorage[_0x1423a4];delete tmpStorage[_0x1423a4],_0x11c4af[_0x35e682(0x3bd)](),devices[_0x3f1add][_0x35e682(0x33e)]={'clientip':_0x141888,'timestamp':new Date()[_0x35e682(0x292)](),'expiry':_0x419c4b},_0x419c4b!=_0x35e682(0x327)?(await sendTelegram(_0x11c4af[_0x35e682(0x1e1)]['id'],'Login\x20accepted',{'parse_mode':_0x35e682(0x22b)}),io['to'](_0x3f1add)[_0x35e682(0x1ec)](_0x35e682(0x24e),{'access':{'allow':![],'reason':_0x35e682(0x299),'token':null}})):(await sendTelegram(_0x11c4af[_0x35e682(0x1e1)]['id'],_0x35e682(0x275)),io['to'](_0x3f1add)[_0x35e682(0x1ec)](_0x35e682(0x24e),{'access':{'allow':![],'reason':_0x35e682(0x2c0),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xf734a2=_0x563d5d;return dbConfig['get'](_0xf734a2(0x36e))['sortBy'](_0xf734a2(0x34c))[_0xf734a2(0x2d5)]({'status':'enabled'})[_0xf734a2(0x24a)]()||[];}function getDisabledBots(){const _0x213f00=_0x563d5d;return dbConfig[_0x213f00(0x2fc)]('bots')[_0x213f00(0x2b1)](_0x213f00(0x34c))['filter']({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x896ae6){const _0x1ab7b6=_0x563d5d;let _0x11c705={};const _0x1e4356=configpath+'bot-'+_0x896ae6+_0x1ab7b6(0x2f8),_0x15ca15=fs['existsSync'](_0x1e4356);if(_0x15ca15){const _0x184561=fs[_0x1ab7b6(0x215)](_0x1e4356);try{const _0x552808=JSON[_0x1ab7b6(0x392)](_0x184561),_0x30f880=_0x552808?_0x552808[_0x1ab7b6(0x39a)][0x0][_0x1ab7b6(0x35a)]:![];_0x11c705[_0x1ab7b6(0x2e6)]=_0x30f880?_0x1ab7b6(0x1d9):_0x1ab7b6(0x3c1),_0x11c705[_0x1ab7b6(0x28a)]=_0x552808?_0x552808[_0x1ab7b6(0x39a)][0x0][_0x1ab7b6(0x28a)]:_0x1ab7b6(0x2fe)+_0x896ae6;}catch(_0x5ba70c){_0x11c705['mode']=_0x1ab7b6(0x3c1),_0x11c705[_0x1ab7b6(0x28a)]=_0x1ab7b6(0x2fe)+_0x896ae6;}}else _0x11c705['mode']=_0x1ab7b6(0x3c1),_0x11c705['botname']='Bot\x20'+_0x896ae6;return _0x11c705;}function getBotsWithMode(){const _0x1357fb=_0x563d5d,_0x48755a=dbConfig[_0x1357fb(0x2fc)](_0x1357fb(0x36e))[_0x1357fb(0x2b1)]('botID')[_0x1357fb(0x24a)]()||[];return _0x48755a[_0x1357fb(0x209)](_0x9af28b=>{const _0x5b0828=_0x1357fb;let _0x27334a=getBotAttributes(_0x9af28b['botID']);_0x9af28b[_0x5b0828(0x2e6)]=_0x27334a[_0x5b0828(0x2e6)];}),_0x48755a;}function getBotExchanges(){const _0x200a75=_0x563d5d;let _0x316b90=[];const _0x34e612=dbConfig[_0x200a75(0x2fc)]('bots')[_0x200a75(0x2b1)](_0x200a75(0x34c))['value']()||[];_0x34e612[_0x200a75(0x209)](_0x5c6dce=>{const _0x32c4ef=_0x200a75;if(_0x5c6dce[_0x32c4ef(0x24e)]=='enabled'){const _0x2be543=configpath+_0x32c4ef(0x2a1)+_0x5c6dce[_0x32c4ef(0x34c)]+_0x32c4ef(0x2f8),_0x13b30c=fs[_0x32c4ef(0x203)](_0x2be543);let _0x58989d;if(_0x13b30c){const _0x51f0d2=fs[_0x32c4ef(0x215)](_0x2be543);try{const _0x4b5dc7=JSON['parse'](_0x51f0d2);_0x58989d=_0x4b5dc7?_0x4b5dc7['bot'][0x0]['exchange']:null;}catch(_0x19633d){}}if(_0x58989d)_0x316b90[_0x32c4ef(0x2a3)](_0x58989d);}});const _0x18bf30=[...new Set(_0x316b90)][_0x200a75(0x371)]();return _0x18bf30;}async function initUser(){const _0x53da3d=_0x563d5d;if(!settings[_0x53da3d(0x29c)]){const _0x4fbdea=uuidRandom();mixpanel[_0x53da3d(0x20e)](_0x4fbdea),updateSetting(_0x53da3d(0x29c),_0x4fbdea);}}async function initSecure(){const _0x1e6385=_0x563d5d;let _0x51877d=getSecure();if(!_0x51877d[_0x1e6385(0x2f5)](_0x1e6385(0x205))){let _0x198a46=await generateKeys();_0x51877d[_0x1e6385(0x3c7)]=_0x198a46[_0x1e6385(0x3c7)],_0x51877d[_0x1e6385(0x237)]=_0x198a46[_0x1e6385(0x237)],_0x51877d[_0x1e6385(0x205)]=crypto[_0x1e6385(0x370)](0x20)['toString'](_0x1e6385(0x31f));;storeSecure(_0x51877d);}}function getSettings(){const _0x41e266=_0x563d5d;return dbSettings[_0x41e266(0x2fc)](_0x41e266(0x2b5))[_0x41e266(0x24a)]()||{};}function getSecure(){const _0x2db5c9=_0x563d5d;return dbSecure[_0x2db5c9(0x2fc)](_0x2db5c9(0x37b))[_0x2db5c9(0x24a)]()||{};}function getBlacklist(){const _0xf29e9c=_0x563d5d;return dbSecure[_0xf29e9c(0x2fc)](_0xf29e9c(0x25d))[_0xf29e9c(0x24a)]()||[];}function broadcastToBots(_0x547ef3,_0x1611e3){const _0x1b1e3f=_0x563d5d;config[_0x1b1e3f(0x209)](_0x2086d9=>{const _0x52e849=_0x1b1e3f;if(_0x2086d9['status']==_0x52e849(0x24c)&&_0x2086d9['live']==_0x52e849(0x1da)||_0x2086d9['status']==_0x52e849(0x38a)&&_0x2086d9[_0x52e849(0x368)]==_0x52e849(0x1da)){if(pid[_0x2086d9['botID']])pid[_0x2086d9[_0x52e849(0x34c)]][_0x52e849(0x2a7)]({[_0x547ef3]:_0x1611e3});}});}async function storeSettings(_0xb925f4,_0x4c82ee=![]){const _0x44e742=_0x563d5d;_0xb925f4={...settings,..._0xb925f4};if(_0x4c82ee&&_0xb925f4[_0x44e742(0x390)]!='************'&&_0xb925f4[_0x44e742(0x390)]!=_0x44e742(0x341)&&_0xb925f4[_0x44e742(0x390)]!=''){const _0x3a15f8=crypt['decrypt'](secure['privateKey'],_0xb925f4[_0x44e742(0x390)])[_0x44e742(0x269)][_0x44e742(0x2eb)](_0x44e742(0x2bb))[0x0],_0x28db51=bcrypt[_0x44e742(0x38b)](_0x3a15f8,saltRounds);_0xb925f4={..._0xb925f4,'bbPassword':_0x28db51};}if(_0x4c82ee&&_0xb925f4[_0x44e742(0x2c6)]!=_0x44e742(0x28d)&&_0xb925f4[_0x44e742(0x2c6)]!='***'&&_0xb925f4[_0x44e742(0x2c6)]!=''){const _0x1c45de=crypt['decrypt'](secure[_0x44e742(0x237)],_0xb925f4['telegramToken'])['message']['split'](_0x44e742(0x2bb))[0x0];_0xb925f4={..._0xb925f4,'telegramToken':_0x1c45de};}if(_0x4c82ee&&_0xb925f4['marketcapApi']!=_0x44e742(0x28d)&&_0xb925f4['marketcapApi']!=_0x44e742(0x341)&&_0xb925f4[_0x44e742(0x20d)]!=''){const _0x5dfeff=crypt['decrypt'](secure[_0x44e742(0x237)],_0xb925f4[_0x44e742(0x20d)])[_0x44e742(0x269)][_0x44e742(0x2eb)](_0x44e742(0x2bb))[0x0];_0xb925f4={..._0xb925f4,'marketcapApi':_0x5dfeff};}const _0x19f856=_0xb925f4[_0x44e742(0x2c6)]!=_0x44e742(0x28d)&&_0xb925f4['telegramToken']!=settings['telegramToken']||_0xb925f4[_0x44e742(0x218)]!=settings[_0x44e742(0x218)],_0x237d77=_0xb925f4['telegramToken']==''||_0xb925f4['telegramUsername']=='',_0x22702e=_0xb925f4[_0x44e742(0x20d)]&&_0xb925f4[_0x44e742(0x20d)]!=_0x44e742(0x28d)&&_0xb925f4[_0x44e742(0x20d)]!=settings[_0x44e742(0x2c6)];_0x19f856&&(_0xb925f4[_0x44e742(0x372)]=null,_0xb925f4['telegramEvents']=_0x44e742(0x272));for(const [_0x58a30a,_0x234f60]of Object[_0x44e742(0x39d)](_0xb925f4)){if(_0x58a30a==_0x44e742(0x2c6)&&_0x234f60==_0x44e742(0x28d)){_0xb925f4[_0x44e742(0x2c6)]=settings['telegramToken'];continue;};if(_0x58a30a==_0x44e742(0x390)&&_0x234f60=='************'){_0xb925f4[_0x44e742(0x390)]=settings[_0x44e742(0x390)];continue;};if(_0x58a30a==_0x44e742(0x20d)&&_0x234f60==_0x44e742(0x28d)){_0xb925f4['marketcapApi']=settings[_0x44e742(0x20d)];continue;};dbSettings[_0x44e742(0x1df)](_0x44e742(0x3d5)+_0x58a30a,_0x234f60)[_0x44e742(0x343)]();}settings=_0xb925f4,io['to']('botmanager')[_0x44e742(0x1ec)](_0x44e742(0x2b5),cleanSettings()),broadcastToBots(_0x44e742(0x3c8),settings['timeshift']),broadcastToBots(_0x44e742(0x336),settings[_0x44e742(0x336)]),broadcastToBots(_0x44e742(0x20d),settings[_0x44e742(0x20d)]);if(_0x19f856&&!_0x237d77)initTelegram();if(_0x19f856&&_0x237d77)disableTelegram();getAllClients()[_0x44e742(0x209)](_0x248f34=>{const _0x5308e7=_0x44e742;getSocket(_0x248f34['id'])[_0x5308e7(0x1ec)](_0x5308e7(0x24e),{'access':{'allow':![],'reason':_0x5308e7(0x299),'token':null}});}),_0x22702e&&(await sleep(0xbb8),testMarketcapApi(_0xb925f4['marketcapApi']));}async function testMarketcapApi(_0x13ad7f){const _0x2ac748=_0x563d5d,_0x25ac7a=['BCT',_0x2ac748(0x310)];try{await axios[_0x2ac748(0x2fc)](_0x2ac748(0x36a),{'headers':{'X-CMC_PRO_API_KEY':_0x13ad7f},'params':{'symbol':_0x25ac7a[_0x2ac748(0x337)]()}});}catch(_0x17df79){_0x17df79[_0x2ac748(0x337)]()[_0x2ac748(0x276)](_0x2ac748(0x230))?(io['to'](_0x2ac748(0x2d4))[_0x2ac748(0x1ec)](_0x2ac748(0x326),_0x2ac748(0x3b1)),logger['full'](_0x2ac748(0x3b1))):(io['to'](_0x2ac748(0x2d4))[_0x2ac748(0x1ec)](_0x2ac748(0x326),_0x2ac748(0x296)),logger[_0x2ac748(0x282)](_0x2ac748(0x296)),logger[_0x2ac748(0x31e)](_0x2ac748(0x253),_0x17df79[_0x2ac748(0x337)]()+_0x2ac748(0x2a9)+_0x17df79[_0x2ac748(0x262)]));return;}logger[_0x2ac748(0x31e)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x55b5cd,_0x50e1b7){const _0x1e19f6=_0x563d5d;dbSettings[_0x1e19f6(0x1df)]('settings.'+_0x55b5cd,_0x50e1b7)[_0x1e19f6(0x343)](),settings=getSettings(),io['to'](_0x1e19f6(0x2d4))[_0x1e19f6(0x1ec)](_0x1e19f6(0x2b5),cleanSettings());}function storeSecure(_0x1cca5d){const _0x451005=_0x563d5d;dbSecure[_0x451005(0x2fc)]('secure')[_0x451005(0x2a3)](_0x1cca5d)[_0x451005(0x343)](),secure=_0x1cca5d;}function addBlacklist(_0x3ff484){const _0x3e7da6=_0x563d5d;cleanBlacklist();let _0xe48ce7;devices[_0x3ff484][_0x3e7da6(0x1e7)]?_0xe48ce7=Math['max'](devices[_0x3ff484][_0x3e7da6(0x1e7)]['expiry'],loginExpiry):_0xe48ce7=loginExpiry,dbSecure[_0x3e7da6(0x2fc)](_0x3e7da6(0x25d))['push']({'expiry':new Date()[_0x3e7da6(0x292)]()+_0xe48ce7*0x3c*0x3e8,'token':devices[_0x3ff484]['access'][_0x3e7da6(0x35d)]})[_0x3e7da6(0x343)](),blacklist=dbSecure['get']('blacklist')[_0x3e7da6(0x24a)]();}function cleanBlacklist(){const _0x5c48b1=_0x563d5d;let _0x1c3466=dbSecure[_0x5c48b1(0x2fc)](_0x5c48b1(0x25d))[_0x5c48b1(0x22e)]()['value'](),_0x227f74=new Date()[_0x5c48b1(0x292)]();_0x1c3466['forEach'](_0x4f7ea2=>{const _0x38b808=_0x5c48b1;_0x4f7ea2[_0x38b808(0x2f3)]<_0x227f74&&dbSecure[_0x38b808(0x2fc)](_0x38b808(0x25d))['remove']({'expiry':_0x4f7ea2[_0x38b808(0x2f3)]})[_0x38b808(0x343)]();});}function initStates(){const _0x1cbd9=_0x563d5d;let _0x1f252e=getConfiguration();_0x1f252e[_0x1cbd9(0x209)](_0x2ca1ef=>{const _0xc17fcd=_0x1cbd9;_0x2ca1ef[_0xc17fcd(0x368)]=_0xc17fcd(0x36c);}),storeConfiguration(_0x1f252e);}function onKeys(){const _0x49d014=new RSA();return new Promise(_0x40cb6a=>{const _0x385a22=_0x35d4;_0x49d014[_0x385a22(0x344)]()['then'](_0xc8a525=>{_0x40cb6a(_0xc8a525);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2f6a38=_0x563d5d;let _0x5bac94=getSettings(),_0x2cf108=![];!_0x5bac94[_0x2f6a38(0x2f5)]('lastmsgtelegram')&&(_0x5bac94['lastmsgtelegram']=0x0,_0x2cf108=!![]);!_0x5bac94[_0x2f6a38(0x2f5)](_0x2f6a38(0x21d))&&(_0x5bac94[_0x2f6a38(0x21d)]=0x0,_0x2cf108=!![]);!_0x5bac94[_0x2f6a38(0x2f5)](_0x2f6a38(0x2ed))&&(_0x5bac94[_0x2f6a38(0x2ed)]=_0x2f6a38(0x2a4),_0x2cf108=!![]);!_0x5bac94['hasOwnProperty'](_0x2f6a38(0x336))&&(_0x5bac94[_0x2f6a38(0x336)]=![],_0x2cf108=!![]);!_0x5bac94['hasOwnProperty'](_0x2f6a38(0x20d))&&(_0x5bac94['marketcapApi']='',_0x2cf108=!![]);if(_0x2cf108)storeSettings(_0x5bac94);try{fs[_0x2f6a38(0x1dc)](configbackuppath,{'withFileTypes':!![]})[_0x2f6a38(0x209)](_0x210aaa=>{const _0x9ab3d8=_0x2f6a38;if(!_0x210aaa[_0x9ab3d8(0x314)]()){if(!_0x210aaa[_0x9ab3d8(0x206)][_0x9ab3d8(0x21b)](_0x9ab3d8(0x260)))fs[_0x9ab3d8(0x381)](configbackuppath+_0x210aaa[_0x9ab3d8(0x206)]);}else fs['rmSync'](configbackuppath+_0x210aaa[_0x9ab3d8(0x206)],{'recursive':!![]});});}catch(_0x28a1c0){logger[_0x2f6a38(0x31e)]('Error\x20removing\x20old\x20backup\x20files:',_0x28a1c0);}}function storeConfiguration(_0xb02b47){const _0x9de94b=_0x563d5d;dbConfig['get'](_0x9de94b(0x36e))['remove']()[_0x9de94b(0x343)](),dbConfig[_0x9de94b(0x2fc)]('bots')['push'](..._0xb02b47)[_0x9de94b(0x343)](),config=_0xb02b47;}async function resetPassword(){const _0x6ac84a=_0x563d5d;if(tgBot&&settings[_0x6ac84a(0x372)]){const _0x254c59=Markup['inlineKeyboard']([Markup[_0x6ac84a(0x2f7)]['callback'](_0x6ac84a(0x1ee),_0x6ac84a(0x2a2)),Markup[_0x6ac84a(0x2f7)][_0x6ac84a(0x289)]('no','resetpw_no')]);await sendTelegram(settings[_0x6ac84a(0x372)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x254c59),tgBot['action'](/resetpw_(.+)/,async _0x34f118=>{const _0xad164e=_0x6ac84a,_0x42d1cc=_0x34f118[_0xad164e(0x1e6)][0x1];_0x34f118['editMessageReplyMarkup']();if(_0x42d1cc!='no'){const _0x30db09=0xf,_0x451199=_0xad164e(0x26a),_0x34d7ab=Array[_0xad164e(0x240)](crypto[_0xad164e(0x2c9)](new Uint32Array(_0x30db09)))[_0xad164e(0x263)](_0x253f60=>_0x451199[_0x253f60%_0x451199[_0xad164e(0x226)]])['join'](''),_0x475ccb=bcrypt['hashSync'](_0x34d7ab,saltRounds);storeSettings({'bbPassword':_0x475ccb}),await sendTelegram(_0x34f118[_0xad164e(0x1e1)]['id'],_0xad164e(0x369)+_0x34d7ab,{'parse_mode':_0xad164e(0x22b)});}else await sendTelegram(_0x34f118['chat']['id'],_0xad164e(0x27f));});}}async function confirmRestore(_0x429af4,_0x338521){const _0x59bca8=_0x563d5d;io['to'](_0x59bca8(0x2d4))[_0x59bca8(0x1ec)](_0x59bca8(0x326),_0x59bca8(0x32c),_0x59bca8(0x35b));if(tgBot&&settings[_0x59bca8(0x372)]){const _0x38a2cb=uuidRandom();tmpStorage[_0x38a2cb]={'path':_0x429af4,'filename':_0x338521};const _0x13089b=Markup['inlineKeyboard']([Markup[_0x59bca8(0x2f7)][_0x59bca8(0x289)]('yes',_0x59bca8(0x211)+_0x38a2cb),Markup[_0x59bca8(0x2f7)][_0x59bca8(0x289)]('no','restore_no_'+_0x38a2cb)]);await sendTelegram(settings[_0x59bca8(0x372)],_0x59bca8(0x208),_0x13089b),tgBot[_0x59bca8(0x1f2)](/restore_(.+)_(.+)/,async _0x55a3f9=>{const _0x498ea9=_0x59bca8,_0x1ba369=_0x55a3f9['match'][0x1],_0x1b3aa2=_0x55a3f9[_0x498ea9(0x1e6)][0x2],{path:_0x147f6f,filename:_0x1d27d2}=tmpStorage[_0x1b3aa2];delete tmpStorage[_0x1b3aa2],_0x55a3f9[_0x498ea9(0x3bd)](),_0x1ba369==_0x498ea9(0x1ee)?(logger[_0x498ea9(0x31e)](_0x498ea9(0x351)),await sendTelegram(_0x55a3f9[_0x498ea9(0x1e1)]['id'],_0x498ea9(0x1f5),{'parse_mode':'HTML'}),unzipFile(_0x147f6f,_0x1d27d2)):(logger[_0x498ea9(0x31e)](_0x498ea9(0x2c3)),await sendTelegram(_0x55a3f9[_0x498ea9(0x1e1)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x2beae8=_0x563d5d,_0x574a89=new Date();return _0x574a89['getFullYear']()+'/'+(_0x574a89[_0x2beae8(0x309)]()+0x1)[_0x2beae8(0x337)]()[_0x2beae8(0x2d0)](0x2,'0')+'/'+_0x574a89[_0x2beae8(0x202)]()[_0x2beae8(0x337)]()[_0x2beae8(0x2d0)](0x2,'0')+'\x20'+_0x574a89[_0x2beae8(0x22d)]()[_0x2beae8(0x337)]()[_0x2beae8(0x2d0)](0x2,'0')+':'+_0x574a89[_0x2beae8(0x2f9)]()[_0x2beae8(0x337)]()[_0x2beae8(0x2d0)](0x2,'0')+':'+_0x574a89['getSeconds']()[_0x2beae8(0x337)]()[_0x2beae8(0x2d0)](0x2,'0');}function getTimeStamp(){const _0x37e811=_0x563d5d,_0x55560e=shiftedTime();return _0x55560e[_0x37e811(0x2b3)]()+'/'+(_0x55560e[_0x37e811(0x309)]()+0x1)[_0x37e811(0x337)]()[_0x37e811(0x2d0)](0x2,'0')+'/'+_0x55560e[_0x37e811(0x202)]()[_0x37e811(0x337)]()['padStart'](0x2,'0')+'\x20'+_0x55560e[_0x37e811(0x22d)]()[_0x37e811(0x337)]()[_0x37e811(0x2d0)](0x2,'0')+':'+_0x55560e[_0x37e811(0x2f9)]()[_0x37e811(0x337)]()[_0x37e811(0x2d0)](0x2,'0')+':'+_0x55560e[_0x37e811(0x281)]()['toString']()[_0x37e811(0x2d0)](0x2,'0');}function getCleanTimeStamp(){const _0x2175b2=_0x563d5d,_0x264a86=shiftedTime();return _0x264a86[_0x2175b2(0x2b3)]()+(_0x264a86['getMonth']()+0x1)[_0x2175b2(0x337)]()['padStart'](0x2,'0')+_0x264a86[_0x2175b2(0x202)]()[_0x2175b2(0x337)]()[_0x2175b2(0x2d0)](0x2,'0')+'-'+_0x264a86[_0x2175b2(0x22d)]()[_0x2175b2(0x337)]()['padStart'](0x2,'0')+_0x264a86[_0x2175b2(0x2f9)]()[_0x2175b2(0x337)]()['padStart'](0x2,'0')+_0x264a86[_0x2175b2(0x281)]()[_0x2175b2(0x337)]()[_0x2175b2(0x2d0)](0x2,'0');}function shiftedTime(){const _0x4373de=_0x563d5d,_0x4b065f=new Date();let _0x52ab3e=_0x4b065f;if(settings[_0x4373de(0x3c8)]&&settings[_0x4373de(0x3c8)]!==0x0)_0x52ab3e=fns[_0x4373de(0x30a)](_0x4b065f,{'hours':settings[_0x4373de(0x3c8)]});return _0x52ab3e;}function startScheduler(){const _0x54a8fb=_0x563d5d,_0x36c350=new Date()[_0x54a8fb(0x295)](),_0x3278f4=shiftedTime()[_0x54a8fb(0x22d)]();_0x3278f4==0x4&&backupConfigFiles();_0x3278f4==0x0&&rotateLogFiles();_0x36c350%0x6==0x0&&triggerAnalytics();_0x36c350%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x42ffdc){const _0x4e4600=_0x563d5d;logger['debug'](_0x4e4600(0x35e)+_0x42ffdc);const _0x136bde=getBotsWithMode();_0x136bde[_0x4e4600(0x226)]>0x0?confirmRestore(configbackuppath,_0x42ffdc):unzipFile(configbackuppath,_0x42ffdc);}async function getBackupFiles(_0x1ab9e9=null){const _0x19fdaf=_0x563d5d;let _0x33e79c=[],_0x48197f=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x48197f[_0x19fdaf(0x371)]((_0x51c612,_0x2114cd)=>_0x51c612['name']<_0x2114cd['name']?0x1:_0x2114cd['name']<_0x51c612[_0x19fdaf(0x206)]?-0x1:0x0),_0x48197f[_0x19fdaf(0x209)](_0x549749=>{const _0x4efe2e=_0x19fdaf;if(!_0x549749[_0x4efe2e(0x314)]()&&_0x549749['name'][_0x4efe2e(0x21b)](_0x4efe2e(0x260))&&_0x549749[_0x4efe2e(0x206)][_0x4efe2e(0x25a)](_0x4efe2e(0x312))){const _0x4d4af9=formatDate(fs[_0x4efe2e(0x2a0)](configbackuppath+_0x549749[_0x4efe2e(0x206)])[_0x4efe2e(0x264)]);_0x33e79c['push']({'name':_0x549749[_0x4efe2e(0x206)],'mtime':_0x4d4af9});}});if(_0x1ab9e9)io['to'](_0x1ab9e9)[_0x19fdaf(0x1ec)](_0x19fdaf(0x243),_0x33e79c);else return _0x33e79c;}async function backupConfigFiles(){const _0x43130e=_0x563d5d;await zipFiles(_0x43130e(0x386));const _0xde80b=getCleanTimeStamp();fs[_0x43130e(0x397)](zippath+_0x43130e(0x362),configbackuppath+('backup-full@'+_0xde80b+'.zip'));let _0x5d4153=fs[_0x43130e(0x1dc)](configbackuppath,{'withFileTypes':!![]});_0x5d4153['sort']((_0x393604,_0xb9070c)=>_0x393604['name']<_0xb9070c[_0x43130e(0x206)]?0x1:_0xb9070c['name']<_0x393604[_0x43130e(0x206)]?-0x1:0x0),_0x5d4153[_0x43130e(0x226)]>maxBackups&&fs[_0x43130e(0x381)](configbackuppath+_0x5d4153[_0x5d4153[_0x43130e(0x226)]-0x1]['name']);}function rotateLogFiles(){const _0xf0758e=_0x563d5d,_0x27fa51=fs[_0xf0758e(0x2a0)](logspath+'output-000.log'),_0x3573e8=_0x27fa51['size']/0x400;if(_0x3573e8>0x64){let _0x3f0e8d=fs[_0xf0758e(0x1dc)](logspath,{'withFileTypes':!![]});_0x3f0e8d[_0xf0758e(0x371)]((_0x3e4e4d,_0x537c54)=>_0x3e4e4d['name']<_0x537c54[_0xf0758e(0x206)]?0x1:_0x537c54[_0xf0758e(0x206)]<_0x3e4e4d[_0xf0758e(0x206)]?-0x1:0x0),_0x3f0e8d['forEach'](_0x4d235f=>{const _0x4f4ca6=_0xf0758e;if(_0x4d235f[_0x4f4ca6(0x206)]==_0x4f4ca6(0x2ad))fs[_0x4f4ca6(0x397)](logspath+_0x4d235f[_0x4f4ca6(0x206)],logspath+_0x4f4ca6(0x2d8));if(_0x4d235f[_0x4f4ca6(0x206)]==_0x4f4ca6(0x394))fs[_0x4f4ca6(0x397)](logspath+_0x4d235f[_0x4f4ca6(0x206)],logspath+'output-002.log');_0x4d235f[_0x4f4ca6(0x206)]=='output-000.log'&&(fs[_0x4f4ca6(0x397)](logspath+_0x4d235f[_0x4f4ca6(0x206)],logspath+_0x4f4ca6(0x394)),fs['writeFileSync'](logspath+_0x4d235f[_0x4f4ca6(0x206)],''));});}}async function zipFiles(_0x3df965){const _0x115db6=_0x563d5d;let _0x6ba38;if(_0x3df965==_0x115db6(0x293))_0x6ba38=logspath;if(_0x3df965==_0x115db6(0x2ae))_0x6ba38=configpath;if(_0x3df965==_0x115db6(0x386))_0x6ba38=configpath;let _0x486c78=fs[_0x115db6(0x1dc)](_0x6ba38,{'withFileTypes':!![]});const _0x31dc9a=new require(_0x115db6(0x2c4))();_0x486c78[_0x115db6(0x209)](_0x859356=>{const _0x2b0bd9=_0x115db6;if(!_0x859356['isDirectory']()){let _0x40b2c2=fs['readFileSync'](_0x6ba38+_0x859356[_0x2b0bd9(0x206)]);if(_0x3df965=='backup'){const _0x5c63a4=/^bot-[0-9]{3}-config.json$/,_0x5f1591=_0x5c63a4['test'](_0x859356[_0x2b0bd9(0x206)]);if(_0x5f1591){const _0x75eff6=JSON[_0x2b0bd9(0x392)](_0x40b2c2);if(_0x75eff6[_0x2b0bd9(0x39a)][0x0]){_0x75eff6[_0x2b0bd9(0x39a)][0x0][_0x2b0bd9(0x36d)]=_0x2b0bd9(0x341),_0x75eff6['bot'][0x0][_0x2b0bd9(0x3b0)]=_0x2b0bd9(0x341);if(_0x75eff6['bot'][0x0][_0x2b0bd9(0x294)])_0x75eff6['bot'][0x0][_0x2b0bd9(0x294)]='***';}_0x40b2c2=JSON['stringify'](_0x75eff6,null,0x2);}if(_0x859356['name']==_0x2b0bd9(0x31a)){const _0x591df1=JSON[_0x2b0bd9(0x392)](_0x40b2c2);if(_0x591df1[_0x2b0bd9(0x2b5)]['loginRequired'])_0x591df1[_0x2b0bd9(0x2b5)][_0x2b0bd9(0x3c3)]=![];if(_0x591df1[_0x2b0bd9(0x2b5)][_0x2b0bd9(0x390)])_0x591df1['settings']['bbPassword']='***';if(_0x591df1['settings'][_0x2b0bd9(0x2c6)])_0x591df1[_0x2b0bd9(0x2b5)][_0x2b0bd9(0x2c6)]=_0x2b0bd9(0x341);if(_0x591df1[_0x2b0bd9(0x2b5)]['telegramChatId'])_0x591df1['settings']['telegramChatId']=null;if(_0x591df1[_0x2b0bd9(0x2b5)][_0x2b0bd9(0x20d)])_0x591df1['settings']['marketcapApi']='***';_0x40b2c2=JSON[_0x2b0bd9(0x280)](_0x591df1,null,0x2);}if(_0x859356[_0x2b0bd9(0x206)]!=_0x2b0bd9(0x3b3))_0x31dc9a['file'](_0x859356[_0x2b0bd9(0x206)],_0x40b2c2);}else _0x31dc9a[_0x2b0bd9(0x321)](_0x859356[_0x2b0bd9(0x206)],_0x40b2c2);}});const _0x40d318=_0x31dc9a['generate']({'base64':![],'compression':_0x115db6(0x2ec)});fs['writeFileSync'](zippath+(_0x3df965+_0x115db6(0x312)),_0x40d318,_0x115db6(0x2f1));}async function unzipFile(_0x4e706e,_0x13c138){const _0x3b5281=_0x563d5d;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3b5281(0x209)](_0x3733be=>{const _0x114fdd=_0x3b5281;if(!_0x3733be[_0x114fdd(0x314)]())fs[_0x114fdd(0x25f)](configpath+_0x3733be[_0x114fdd(0x206)]);});const _0x54a19b=fs[_0x3b5281(0x215)](_0x4e706e+_0x13c138,_0x3b5281(0x2f1)),_0x2fec84=new require(_0x3b5281(0x2c4))(_0x54a19b,{'base64':![],'checkCRC32':!![]});Object[_0x3b5281(0x21e)](_0x2fec84['files'])[_0x3b5281(0x209)](_0x5f15ba=>{const _0x415437=_0x3b5281,_0x434acc=_0x2fec84['files'][_0x5f15ba];fs[_0x415437(0x225)](configpath+_0x434acc[_0x415437(0x206)],_0x434acc['_data']);}),fs[_0x3b5281(0x1dc)](temppath,{'withFileTypes':!![]})[_0x3b5281(0x209)](_0x1699c6=>{const _0x31c903=_0x3b5281;if(!_0x1699c6[_0x31c903(0x314)]())fs[_0x31c903(0x25f)](temppath+_0x1699c6['name']);}),logger['debug'](_0x3b5281(0x234)),process[_0x3b5281(0x2a7)]({'restore':!![]},_0x5ec428=>{});}async function getPublicIp(){const _0x4222da=_0x563d5d;try{const _0x5bfb7d=await axios[_0x4222da(0x2fc)](_0x4222da(0x28e));publicip=_0x5bfb7d[_0x4222da(0x229)]['ip'];}catch(_0x306cb9){}}async function triggerAnalytics(){const _0x41707b=_0x563d5d;if(!publicip)await getPublicIp();const _0x2da843=getBotsWithMode();let _0x157db3=0x0;_0x2da843[_0x41707b(0x209)](_0x218376=>{const _0x60250a=_0x41707b;if(_0x218376[_0x60250a(0x24e)]===_0x60250a(0x24c))_0x157db3++;});const _0x466ed4=getBotExchanges();mixpanel[_0x41707b(0x2bf)](_0x41707b(0x20f),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x2da843[_0x41707b(0x226)],'numbotsenabled':_0x157db3,'exchanges':_0x466ed4,'environment':environment});}async function getMessages(){const _0x11ee5a=_0x563d5d,_0x5976c5=_0x11ee5a(0x3ab),_0x5bdbfd=new GraphQLClient(_0x5976c5),_0x5b3733={'authorization':_0x11ee5a(0x2e2)},_0x3f5586=serverversion[_0x11ee5a(0x2eb)]('.'),_0x738583=_0x3f5586[0x0]+'.'+_0x3f5586[0x1],_0x162fe6=Math[_0x11ee5a(0x2ac)](settings[_0x11ee5a(0x28f)],settings[_0x11ee5a(0x21d)]),_0xe09ded={'last':parseInt(_0x162fe6),'bbm':_0x738583},_0xdefb3e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3a51d2;try{_0x3a51d2=await _0x5bdbfd[_0x11ee5a(0x2b8)](_0xdefb3e,_0xe09ded,_0x5b3733);}catch(_0x39243d){}if(_0x3a51d2&&_0x3a51d2[_0x11ee5a(0x398)]){let _0x54974e=settings[_0x11ee5a(0x28f)];newMessages=[];for(const _0x3f615a of _0x3a51d2[_0x11ee5a(0x398)]){newMessages[_0x11ee5a(0x2a3)](_0x3f615a);let _0x5ec944=![];_0x3f615a['bbvNew']&&(updateSetting(_0x11ee5a(0x2ed),_0x3f615a[_0x11ee5a(0x20b)]),_0x5ec944=isNewerVersion(serverversion,_0x3f615a[_0x11ee5a(0x20b)])||serverversion==_0x3f615a[_0x11ee5a(0x20b)]);if(!_0x5ec944&&_0x3f615a[_0x11ee5a(0x233)]>_0x54974e){if(_0x3f615a[_0x11ee5a(0x30b)]===_0x11ee5a(0x375)||serverversion['startsWith'](_0x3f615a[_0x11ee5a(0x30b)])){let _0x28c71f=''+_0x3f615a[_0x11ee5a(0x352)]+'\x0a\x0a'+_0x3f615a[_0x11ee5a(0x269)];const _0x4b5f75=await sendTelegramMsg(toTelegramMarkdown(_0x28c71f),_0x11ee5a(0x348));if(_0x4b5f75)_0x54974e=_0x3f615a[_0x11ee5a(0x233)];}}}updateAvailable=isNewerVersion(settings[_0x11ee5a(0x2ed)],serverversion),updateSetting(_0x11ee5a(0x28f),_0x54974e),emitMessages();}}function emitMessages(){const _0x2f5620=_0x563d5d,_0x9b27d4=settings[_0x2f5620(0x21d)];let _0x5a9fac=[];newMessages[_0x2f5620(0x209)](_0x1a4ebd=>{_0x1a4ebd['number']>_0x9b27d4&&_0x5a9fac['push'](_0x1a4ebd);}),_0x5a9fac[_0x2f5620(0x226)]>0x0&&getAllClients()[_0x2f5620(0x209)](_0x1453bc=>{const _0x7baabe=_0x2f5620;getSocket(_0x1453bc['id'])[_0x7baabe(0x1ec)](_0x7baabe(0x269),_0x5a9fac);});}function confirmMessage(_0x1086d0){const _0x249e3d=_0x563d5d;updateSetting(_0x249e3d(0x21d),Number(_0x1086d0));}function isNewerVersion(_0x1020fe,_0x5702db){const _0x3c9848=_0x563d5d,_0x551e23=_0x5702db[_0x3c9848(0x2eb)]('.'),_0x33dc7a=_0x1020fe[_0x3c9848(0x2eb)]('.');for(var _0x17e7b8=0x0;_0x17e7b8<_0x33dc7a[_0x3c9848(0x226)];_0x17e7b8++){const _0x5f182a=~~_0x33dc7a[_0x17e7b8],_0x3cd2a1=~~_0x551e23[_0x17e7b8];if(_0x5f182a>_0x3cd2a1)return!![];if(_0x5f182a<_0x3cd2a1)return![];}return![];}function toTelegramMarkdown(_0x3b8350){const _0x2f42c4=_0x563d5d,_0x4c75ce=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3accad=/\*{2}(.+?)\*{2}/gim;return _0x3b8350=_0x3b8350['replace'](_0x4c75ce,_0x2f42c4(0x3a0))[_0x2f42c4(0x2d7)](_0x3accad,_0x2f42c4(0x37d)),_0x3b8350;}async function validateConfigFile(){const _0x332d47=_0x563d5d,_0x51c582=dbConfig[_0x332d47(0x2fc)](_0x332d47(0x36e))['sortBy'](_0x332d47(0x34c))['value']()||[];if(_0x51c582[_0x332d47(0x226)]==0x0){let _0x3af08b=0x0,_0x36988b=[];const _0x433063=/^bot-([0-9]{3})-config.json$/,_0x2d6128=fs['readdirSync'](configpath);_0x2d6128[_0x332d47(0x209)](_0x602517=>{const _0x349c72=_0x332d47,_0x347bed=_0x433063[_0x349c72(0x3be)](_0x602517);if(_0x347bed){const _0x2f3444=_0x347bed[0x1];let _0x318217=getBotAttributes(_0x2f3444);_0x36988b['push']({'botID':_0x2f3444,'botname':_0x318217['botname'],'status':_0x349c72(0x26c),'live':_0x349c72(0x36c)}),_0x3af08b++;}}),_0x3af08b!=0x0&&(dbConfig[_0x332d47(0x2fc)]('bots')[_0x332d47(0x22f)](_0x36988b)[_0x332d47(0x343)](),config=_0x36988b,restoredConfigFile=_0x3af08b);}}async function restoreConfigNotify(_0x546783){const _0x340482=_0x563d5d;let _0x442876;if(restoredConfigFile==0x1)_0x442876=_0x340482(0x20c);else _0x442876=_0x340482(0x3bc);if(_0x546783)io['to'](_0x340482(0x2d4))[_0x340482(0x1ec)]('notification',_0x442876);else{logger['simple'](_0x340482(0x2ca)),logger[_0x340482(0x212)](_0x442876),logger['simple'](_0x340482(0x2ca)),logger['simple']('');if(tgBot&&settings[_0x340482(0x372)]&&settings[_0x340482(0x2d2)]!=_0x340482(0x313))await sendTelegram(settings[_0x340482(0x372)],_0x340482(0x35c)+_0x442876);}}function validateCredentials(_0x35839b,_0x1778dd){const _0x189829=_0x563d5d;if(_0x35839b[_0x189829(0x27e)]==settings[_0x189829(0x2cb)]&&bcrypt[_0x189829(0x231)](_0x35839b[_0x189829(0x382)],settings[_0x189829(0x390)])){if(settings[_0x189829(0x1db)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x4bf7cf=generateLoginToken(_0x1778dd);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x4bf7cf};}}else return{'allow':![],'reason':_0x189829(0x3bf),'token':null};}function refreshToken(_0x31634e){const _0x420dad=_0x563d5d,_0x7faa04=generateLoginToken(_0x31634e);return{'allow':!![],'reason':_0x420dad(0x288),'token':_0x7faa04};}function validateAccess(_0x1bae1a,_0x6ea583,_0x42aa17){const _0x227392=_0x563d5d,_0x3dbf3e=_0x42aa17?_0x42aa17:devices[_0x6ea583]['ip'];let _0x1254b5;const _0x3fadc3=_0x15bb13=>{const _0x2ba3c5=_0x35d4;if(settings[_0x2ba3c5(0x3c3)]){if(settings[_0x2ba3c5(0x1db)]){if(telegram2FaApproved(_0x6ea583)){const _0x2c2f7e=generateLoginToken(_0x6ea583);return{'allow':!![],'reason':_0x2ba3c5(0x302),'token':_0x2c2f7e};}else return{'allow':![],'reason':_0x2ba3c5(0x377),'token':null};}else return _0x1254b5=validToken(_0x15bb13,_0x6ea583),_0x1254b5[_0x2ba3c5(0x2f5)](_0x2ba3c5(0x35b))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x15bb13}:{'allow':![],'reason':_0x2ba3c5(0x377),'token':null};}else return{'allow':!![],'reason':_0x2ba3c5(0x1f0),'token':null};};if(settings[_0x227392(0x374)]){let _0x4ad47f=[...settings[_0x227392(0x34e)],'::1',_0x227392(0x242),_0x227392(0x3a4)];if(_0x4ad47f['includes'](_0x3dbf3e))return _0x3fadc3(_0x1bae1a);else{_0x1254b5=validToken(_0x1bae1a,_0x6ea583);if(_0x1254b5['hasOwnProperty'](_0x227392(0x35b)))return _0x3fadc3(_0x1bae1a);else{if(telegramIpApproved(_0x6ea583)){const _0x173e44=generateToken(_0x6ea583);return _0x1254b5=_0x3fadc3(_0x1bae1a),_0x1254b5[_0x227392(0x350)]?{'allow':!![],'reason':_0x227392(0x1eb),'token':_0x173e44}:_0x1254b5;}else return settings[_0x227392(0x1f9)]?{'allow':![],'reason':_0x227392(0x384),'token':null}:{'allow':![],'reason':_0x227392(0x373),'token':null};}}}else return _0x3fadc3(_0x1bae1a);}function timelyDecrypt(_0x3ad18e,_0x7c5b23,_0x2630e4='@'){const _0x19350a=_0x563d5d;if(_0x3ad18e)try{const _0x44a34b=crypt[_0x19350a(0x26e)](secure[_0x19350a(0x237)],_0x3ad18e)['message'],_0x57c364=_0x44a34b['split'](_0x2630e4)[0x0],_0x14e9eb=_0x44a34b[_0x19350a(0x2eb)](_0x2630e4)[0x1],_0x5bd3ff=new Date()[_0x19350a(0x292)]();if(_0x7c5b23){if(_0x5bd3ff-_0x14e9eb<maxSecretAge*0x3e8)return _0x57c364;else return![];}else return _0x57c364;}catch(_0x5b77f9){return![];}else return![];}const validToken=(_0x578e98,_0x5444b9)=>{const _0x532f41=_0x563d5d,_0x193a42=devices[_0x5444b9]['ip'];if(!_0x578e98)return{'error':_0x532f41(0x323)};for(let _0x40f9b2 of blacklist){if(_0x40f9b2[_0x532f41(0x35d)]==_0x578e98)return{'error':_0x532f41(0x214)};}let _0x19a6c3;try{_0x19a6c3=jwt[_0x532f41(0x251)](_0x578e98,secure['secret']+_0x5444b9);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x19a6c3[_0x532f41(0x2f5)](_0x532f41(0x2dc))&&!_0x19a6c3[_0x532f41(0x2f5)](_0x532f41(0x27e))||!_0x19a6c3[_0x532f41(0x2f5)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x19a6c3[_0x532f41(0x2f5)](_0x532f41(0x27e))&&_0x19a6c3[_0x532f41(0x2f5)]('clientip')){const {clientip:_0x480498}=_0x19a6c3;return _0x193a42==_0x480498?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x532f41(0x2c5)};}else{if(_0x19a6c3[_0x532f41(0x2f5)](_0x532f41(0x27e))&&_0x19a6c3[_0x532f41(0x2f5)](_0x532f41(0x2dc))){const {username:_0x37af8f,clientip:_0xe0e0f4}=_0x19a6c3;return settings[_0x532f41(0x2cb)]==_0x37af8f&&_0x193a42==_0xe0e0f4?{'success':_0x532f41(0x249)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x56509a=>{const _0x388096=_0x563d5d;if(_0x56509a){const _0x3d9dee=devices[_0x56509a]['ip'];return jwt['sign']({'username':settings[_0x388096(0x2cb)],'clientip':_0x3d9dee},secure['secret']+_0x56509a,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x4243f3=>{const _0x3d23b4=_0x563d5d;if(_0x4243f3){const _0xc56b6e=devices[_0x4243f3]['ip'];return jwt[_0x3d23b4(0x3ae)]({'clientip':_0xc56b6e},secure[_0x3d23b4(0x205)]+_0x4243f3,{'expiresIn':devices[_0x4243f3]['telegramIpApproval']['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x587e19=>{const _0x412db7=_0x563d5d;let _0x593c9f=![];return devices[_0x587e19][_0x412db7(0x1e7)]&&devices[_0x587e19][_0x412db7(0x1e7)]['expiry']!=_0x412db7(0x327)&&(_0x593c9f=devices[_0x587e19][_0x412db7(0x1e7)][_0x412db7(0x2dc)]==devices[_0x587e19]['ip']&&new Date()[_0x412db7(0x292)]()-devices[_0x587e19][_0x412db7(0x1e7)][_0x412db7(0x1dd)]<devices[_0x587e19][_0x412db7(0x1e7)][_0x412db7(0x2f3)]*0x3c*0x3e8),_0x593c9f;},telegram2FaApproved=_0x3f351f=>{const _0x6f9476=_0x563d5d;let _0x4d1cdf=![];return devices[_0x3f351f][_0x6f9476(0x33e)]&&devices[_0x3f351f]['telegram2FaApproval']['expiry']!=_0x6f9476(0x327)&&(_0x4d1cdf=devices[_0x3f351f][_0x6f9476(0x33e)]['clientip']==devices[_0x3f351f]['ip']&&new Date()['getTime']()-devices[_0x3f351f][_0x6f9476(0x33e)][_0x6f9476(0x1dd)]<devices[_0x3f351f]['telegram2FaApproval'][_0x6f9476(0x2f3)]*0x3c*0x3e8),_0x4d1cdf;},normalizeIP=_0x406b0a=>{const _0x4963c7=_0x563d5d;let _0x286235=null,_0x292743=null;if(ipaddr[_0x4963c7(0x345)](_0x406b0a)){const _0x5a256d=ipaddr[_0x4963c7(0x392)](_0x406b0a);_0x5a256d[_0x4963c7(0x2be)]()==='ipv6'?(_0x5a256d[_0x4963c7(0x266)]()&&(_0x286235=_0x5a256d[_0x4963c7(0x3af)]()[_0x4963c7(0x337)]()),_0x292743=_0x5a256d[_0x4963c7(0x337)]()):(_0x286235=_0x5a256d['toString'](),_0x292743=_0x5a256d[_0x4963c7(0x236)]()[_0x4963c7(0x337)]());}return{'show':_0x286235?_0x286235:_0x292743,'store':_0x292743};};function formatDate(_0xc1f86e){const _0x4c1bdf=_0x563d5d;return _0xc1f86e['getFullYear']()+'/'+(_0xc1f86e[_0x4c1bdf(0x309)]()+0x1)['toString']()[_0x4c1bdf(0x2d0)](0x2,'0')+'/'+_0xc1f86e[_0x4c1bdf(0x202)]()[_0x4c1bdf(0x337)]()['padStart'](0x2,'0')+'\x20'+_0xc1f86e[_0x4c1bdf(0x22d)]()[_0x4c1bdf(0x337)]()[_0x4c1bdf(0x2d0)](0x2,'0')+':'+_0xc1f86e[_0x4c1bdf(0x2f9)]()[_0x4c1bdf(0x337)]()[_0x4c1bdf(0x2d0)](0x2,'0')+':'+_0xc1f86e[_0x4c1bdf(0x281)]()[_0x4c1bdf(0x337)]()['padStart'](0x2,'0');}function sleep(_0x309ce0){return new Promise(_0x2f7ad9=>setTimeout(_0x2f7ad9,_0x309ce0));}