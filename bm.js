const _0x575907=_0x215f;(function(_0x3d68fb,_0x5c50c1){const _0x163412=_0x215f,_0x26ec7d=_0x3d68fb();while(!![]){try{const _0x1675d0=parseInt(_0x163412(0x1e1))/0x1+-parseInt(_0x163412(0x9d))/0x2+-parseInt(_0x163412(0xe4))/0x3*(parseInt(_0x163412(0x229))/0x4)+-parseInt(_0x163412(0x187))/0x5+-parseInt(_0x163412(0x22d))/0x6+parseInt(_0x163412(0x1d0))/0x7*(parseInt(_0x163412(0xc2))/0x8)+-parseInt(_0x163412(0x208))/0x9*(-parseInt(_0x163412(0x1d8))/0xa);if(_0x1675d0===_0x5c50c1)break;else _0x26ec7d['push'](_0x26ec7d['shift']());}catch(_0x1695e0){_0x26ec7d['push'](_0x26ec7d['shift']());}}}(_0x2935,0x83475));const _0x4f9e49=function(){let _0x365eeb=!![];return function(_0x35e1af,_0x362757){const _0x53db64=_0x365eeb?function(){const _0x476de5=_0x215f;if(_0x362757){const _0x25b516=_0x362757[_0x476de5(0x1df)](_0x35e1af,arguments);return _0x362757=null,_0x25b516;}}:function(){};return _0x365eeb=![],_0x53db64;};}(),_0x3d10aa=_0x4f9e49(this,function(){const _0x381435=_0x215f;return _0x3d10aa['toString']()[_0x381435(0x172)](_0x381435(0x140))[_0x381435(0x1c5)]()['constructor'](_0x3d10aa)['search'](_0x381435(0x140));});_0x3d10aa();'use strict';process[_0x575907(0x122)][_0x575907(0x196)]=0x1;const childProcess=require(_0x575907(0x124)),fs=require('fs'),fns=require(_0x575907(0xdd)),low=require(_0x575907(0x15d)),FileSync=require(_0x575907(0x1a6)),path=require(_0x575907(0xc6)),crypto=require(_0x575907(0x1a4)),Crypt=require('hybrid-crypto-js')[_0x575907(0xad)],RSA=require(_0x575907(0x1de))[_0x575907(0x224)],bcrypt=require(_0x575907(0xb9)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x575907(0x181))(process[_0x575907(0x1d5)][_0x575907(0xb6)](0x2))['argv'],uuidRandom=require('uuid-random'),TelegramBot=require(_0x575907(0x206)),Mixpanel=require(_0x575907(0x1cf)),axios=require(_0x575907(0x1e8)),{GraphQLClient,gql}=require(_0x575907(0xba)),util=require(_0x575907(0xed)),PORT=argv[_0x575907(0x218)]||_0x575907(0x11a),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x575907(0x161)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x575907(0x1be)](0x1));const HOST=argv[_0x575907(0x197)]||null,userID=argv[_0x575907(0x10c)]||'';let bbpath=_0x575907(0x120),bbpath2='';const botfile='bot.js',configfile=_0x575907(0xf6),settingsfile='bb-settings.json',securefile=_0x575907(0x109);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x575907(0x168)),configpath=userID?bbpath+_0x575907(0x225)+userID+'/':bbpath+_0x575907(0x225),configbackuppath=configpath+_0x575907(0x15e),logspath=userID?bbpath+_0x575907(0x1c6)+userID+'/':bbpath+_0x575907(0x1c6),zippath=userID?bbpath+_0x575907(0x156)+userID+'/':bbpath+_0x575907(0x156),loggerfile=fs[_0x575907(0x134)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x575907(0x20e)](configpath);!fs[_0x575907(0x17a)](configbackuppath)&&fs[_0x575907(0x20e)](configbackuppath);!fs[_0x575907(0x17a)](logspath)&&fs[_0x575907(0x20e)](logspath);!fs[_0x575907(0x17a)](zippath)&&fs[_0x575907(0x20e)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x575907(0x107)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x575907(0x107)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x575907(0x1a1)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x575907(0x107)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x575907(0xa9),'rsaStandard':_0x575907(0x192)});const saltRounds=0xa,mixpanel=Mixpanel[_0x575907(0x1c7)](_0x575907(0xb0),{'host':_0x575907(0x123)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x575907(0xa4)]!=''&&settings[_0x575907(0x113)]&&settings[_0x575907(0x113)]!='')initTelegram();const logger={'screen':_0x42adea=>{const _0x5e7ade=_0x575907;console[_0x5e7ade(0xb3)](_0x42adea);},'simple':_0x435080=>{console['log'](_0x435080),loggerfile['write'](util['format'](_0x435080)+'\x0a');},'full':async _0xdead3d=>{const _0xa33ea7=_0x575907,_0x1221f0=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0xdead3d;console[_0xa33ea7(0xb3)](_0x1221f0),loggerfile[_0xa33ea7(0xaf)](util[_0xa33ea7(0x1e7)](_0x1221f0)+'\x0a');if(tgBot&&settings[_0xa33ea7(0x139)]&&settings[_0xa33ea7(0x9f)]!=_0xa33ea7(0x1e0))await tgBot['sendMessage'](settings[_0xa33ea7(0x139)],_0xa33ea7(0x18f)+_0xdead3d)[_0xa33ea7(0x14f)](_0x1bfea0=>{telegramError(_0x1bfea0);});}};process['on'](_0x575907(0xd6),function(_0x503790){const _0x2bf9fa=_0x575907;logger[_0x2bf9fa(0x1b2)](_0x503790);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x575907(0x110))[_0x575907(0xc5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x575907(0xe0))['createServer'](app);app[_0x575907(0x12c)](_0x575907(0x1d4),async(_0x4a1d58,_0x43c8f0)=>{const _0x9dfc68=_0x575907,_0x3d50fd=_0x4a1d58['params'][_0x9dfc68(0xe5)],_0x2c573a=getClientsWithBotID(_0x9dfc68(0x1cb)),_0x4f9622=_0x4a1d58[_0x9dfc68(0x141)][_0x9dfc68(0x1fb)],_0x303ac6=timelyDecrypt(_0x4f9622,![]),_0x113f5a=_0x2c573a['find'](_0x378605=>_0x378605['uuid']==_0x303ac6);if(_0x113f5a){const _0x2bf349=normalizeIP(_0x4a1d58[_0x9dfc68(0x14e)]['remoteAddress'])[_0x9dfc68(0x216)],_0x3fdb3a=_0x4a1d58[_0x9dfc68(0x141)][_0x9dfc68(0x1bb)];if(validateAccess(_0x3fdb3a,_0x303ac6,_0x2bf349)['allow'])await zipFiles(_0x3d50fd),_0x43c8f0['download'](zippath+(_0x3d50fd+_0x9dfc68(0x133)),_0xcae565=>{const _0x505ce7=_0x9dfc68;_0xcae565&&(logger[_0x505ce7(0x114)](_0x505ce7(0x137)+_0x3d50fd),logger[_0x505ce7(0x1b2)](_0xcae565));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3d50fd+'\x20(1)');}else logger[_0x9dfc68(0x114)](_0x9dfc68(0x1a5)+_0x3d50fd+_0x9dfc68(0x128));}),app[_0x575907(0xde)](express[_0x575907(0x121)](path[_0x575907(0x1ca)](__dirname,bbpath2,_0x575907(0x20a)))),app[_0x575907(0xde)](express['static'](path[_0x575907(0x1ca)](__dirname,bbpath2,_0x575907(0x1bd)))),app[_0x575907(0x12c)]('/',function(_0x16cb47,_0x4574b1){const _0x2c4e52=_0x575907;_0x4574b1[_0x2c4e52(0x180)](path['join'](__dirname,bbpath2,_0x2c4e52(0x20a),_0x2c4e52(0xd7)));}),app['get'](_0x575907(0x17d),function(_0x57766b,_0x22ec8e){const _0x4474a7=_0x575907;_0x22ec8e[_0x4474a7(0x180)](path[_0x4474a7(0x1ca)](__dirname,bbpath2,_0x4474a7(0x1bd),_0x4474a7(0xd7)));}),app['get'](_0x575907(0x16c),(_0x1ed4ea,_0x2eeaaa)=>{const _0x131d6c=_0x575907;_0x2eeaaa[_0x131d6c(0x180)](path[_0x131d6c(0x1ca)](__dirname,bbpath2,'build',_0x131d6c(0xd7)));}),app[_0x575907(0x12c)](_0x575907(0xc1),(_0x4284f1,_0x2f223b)=>{const _0x2e5b14=_0x575907;_0x2f223b[_0x2e5b14(0x180)](path[_0x2e5b14(0x1ca)](__dirname,bbpath2,'build',_0x2e5b14(0xd7)));}),app['get'](_0x575907(0x1b0),(_0x29b77f,_0x1c2e00)=>{const _0x52605d=_0x575907;_0x1c2e00[_0x52605d(0x180)](path[_0x52605d(0x1ca)](__dirname,bbpath2,_0x52605d(0x1bd),_0x52605d(0xd7)));}),app[_0x575907(0x12c)](_0x575907(0xc9),(_0x4e766c,_0x4b076c)=>{const _0x25fe1b=_0x575907;_0x4b076c[_0x25fe1b(0x180)](path[_0x25fe1b(0x1ca)](__dirname,bbpath2,'build','index.html'));}),app[_0x575907(0x12c)](_0x575907(0x1ef),(_0x751284,_0x33baa8)=>{const _0x1b5a25=_0x575907;_0x33baa8[_0x1b5a25(0x180)](path[_0x1b5a25(0x1ca)](__dirname,bbpath2,_0x1b5a25(0x1bd),_0x1b5a25(0xd7)));}),app['get']('/:bot/support',(_0x58151d,_0xa88a5f)=>{const _0xa9d0bc=_0x575907;_0xa88a5f[_0xa9d0bc(0x180)](path[_0xa9d0bc(0x1ca)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x575907(0x108)](PORT,HOST);else http[_0x575907(0x108)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0xa75a7c=_0x575907;logger[_0xa75a7c(0x1b2)](''),logger[_0xa75a7c(0x1b2)](_0xa75a7c(0x14c)),await logger[_0xa75a7c(0x114)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0xa75a7c(0x1b2)](_0xa75a7c(0x14c));if(config['length']!=0x0)for(const _0x15a9a0 of config){if(_0x15a9a0['status']==_0xa75a7c(0x212)||_0x15a9a0['status']==_0xa75a7c(0xbf))await logger[_0xa75a7c(0x114)](_0xa75a7c(0x13a)+_0x15a9a0[_0xa75a7c(0xb8)]+_0xa75a7c(0x1c3)+_0x15a9a0[_0xa75a7c(0x101)]),startBot([_0x15a9a0[_0xa75a7c(0xb8)],userID],{'cwd':bbpath},function(_0x1e0719){const _0x45ef57=_0xa75a7c;if(_0x1e0719)logger[_0x45ef57(0x114)](_0x1e0719);});else(_0x15a9a0['status']=='disabled'||_0x15a9a0[_0xa75a7c(0x17f)]==_0xa75a7c(0x12f))&&await logger[_0xa75a7c(0x114)](_0xa75a7c(0x12d)+_0x15a9a0['botID']+_0xa75a7c(0x1c3)+_0x15a9a0[_0xa75a7c(0x101)]);}else!newBot&&logger[_0xa75a7c(0x1b2)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0xa75a7c(0x1b2)]('-----------------------------------------------------------------------------------'),logger[_0xa75a7c(0x1b2)]('');}function startSocket(){const _0x8198d2=_0x575907;io['on'](_0x8198d2(0x22f),_0x415bf6=>{const _0x8b08a7=_0x8198d2;let _0x29267c,_0x492f1c,_0x462011,_0x6f0c75,_0x35fa83;const _0x48d750=_0x415bf6[_0x8b08a7(0x1dd)][_0x8b08a7(0x141)][_0x8b08a7(0x1d7)];_0x492f1c=_0x48d750[_0x8b08a7(0xfb)](/bot[0-9]{3}/);if(_0x492f1c)_0x462011=_0x492f1c[0x0][_0x8b08a7(0xfb)](/[0-9]{3}/);if(_0x462011)_0x29267c=_0x462011[0x0];else _0x29267c='botmanager';const _0x5ef766=_0x415bf6['handshake'][_0x8b08a7(0x1f5)]['encryptedUuid'];if(!_0x5ef766)_0x415bf6[_0x8b08a7(0xf3)](_0x8b08a7(0x17f),{'publicKey':secure[_0x8b08a7(0xcc)]});else{_0x6f0c75=timelyDecrypt(_0x5ef766,![]);if(!_0x6f0c75)_0x415bf6[_0x8b08a7(0xf3)](_0x8b08a7(0x17f),{'publicKey':secure[_0x8b08a7(0xcc)]});else{_0x35fa83=normalizeIP(_0x415bf6[_0x8b08a7(0xb2)][_0x8b08a7(0x158)])['store'];if(!devices[_0x6f0c75])devices[_0x6f0c75]={'uuid':_0x6f0c75,'access':{'token':null}};devices[_0x6f0c75]['ip']=_0x35fa83;const _0x460168=addClient(_0x415bf6['id'],_0x6f0c75,_0x29267c);setAccess(_0x460168),emitMessages(),_0x415bf6['on']('login',_0x131c86=>{const _0x5e9e55=_0x8b08a7,_0x3f0c17=timelyDecrypt(_0x131c86[_0x5e9e55(0x1ae)]);if(_0x3f0c17){_0x131c86={'username':_0x131c86[_0x5e9e55(0x1a2)],'password':_0x3f0c17},devices[_0x6f0c75][_0x5e9e55(0xf7)]=validateCredentials(_0x131c86,_0x6f0c75);if(devices[_0x6f0c75][_0x5e9e55(0xf7)][_0x5e9e55(0xd0)]==![]&&devices[_0x6f0c75][_0x5e9e55(0xf7)][_0x5e9e55(0xb1)]==_0x5e9e55(0x165))_0x415bf6[_0x5e9e55(0xf3)](_0x5e9e55(0x17f),{'access':devices[_0x6f0c75]['access']}),loginAccess2FA(_0x6f0c75,_0x35fa83);else{if(devices[_0x6f0c75][_0x5e9e55(0xf7)][_0x5e9e55(0xd0)]==![]&&devices[_0x6f0c75][_0x5e9e55(0xf7)][_0x5e9e55(0xb1)]=='invalid\x20credentials')_0x415bf6[_0x5e9e55(0xf3)]('status',{'access':devices[_0x6f0c75][_0x5e9e55(0xf7)]});else devices[_0x6f0c75]['access']['allow']&&devices[_0x6f0c75][_0x5e9e55(0xf7)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x6f0c75)['forEach'](_0x28f86d=>{setAccess(_0x28f86d);}),setTokenRefresh(_0x6f0c75),setSessionTimeout(_0x5e9e55(0x1c4),_0x6f0c75));}}else logger[_0x5e9e55(0x114)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x415bf6['on']('reset-password',()=>{resetPassword();}),_0x415bf6['on']('disconnect',_0xac4e67=>{removeClient(_0x415bf6['id']);}),_0x29267c==_0x8b08a7(0x1cb)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x245bd6){const _0x343be6=_0x575907;if(_0x245bd6!='botmanager'&&config['apiKey']!=''){if(pid[_0x245bd6])pid[_0x245bd6][_0x343be6(0x11b)]({'function':'initclient','args':null});}}function getSocket(_0x56dc2a){const _0x565536=_0x575907;return io['sockets']['sockets'][_0x565536(0x12c)](_0x56dc2a);}function setAccess(_0xbe583b){const _0x22efaa=_0x575907,_0x607d23=getSocket(_0xbe583b['id']),_0x1dd10f=_0xbe583b[_0x22efaa(0x1fb)],_0x3358f7=_0xbe583b[_0x22efaa(0x118)];devices[_0x1dd10f][_0x22efaa(0xf7)]=validateAccess(devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0x21d)],_0x1dd10f),_0x607d23[_0x22efaa(0x1ca)](_0x1dd10f);if(devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0xd0)]){_0x607d23[_0x22efaa(0x1ca)](_0x3358f7);if(_0x3358f7=='botmanager')initializeSocketBotManager(_0x607d23);else initializeSocketBot(_0x607d23);initClient(_0x3358f7);}devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0x21d)]&&devices[_0x1dd10f][_0x22efaa(0xf7)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0x22efaa(0x199),_0x1dd10f),devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0x21d)]&&devices[_0x1dd10f][_0x22efaa(0xf7)]['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x1dd10f),_0x607d23[_0x22efaa(0xf3)](_0x22efaa(0x17f),{'status':_0xbe583b[_0x22efaa(0xcf)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1dd10f][_0x22efaa(0xf7)],'externalip':devices[_0x1dd10f]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x22efaa(0xbb)],'validInstallation':validInstallation}),devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0xd0)]==![]&&devices[_0x1dd10f][_0x22efaa(0xf7)][_0x22efaa(0xb1)]==_0x22efaa(0x163)&&temporaryAccess2FA(_0x1dd10f,devices[_0x1dd10f]['ip']);}function setSessionTimeout(_0x2125ff,_0x5a74ec){const _0x4ba137=_0x575907;let _0x3106ee;if(_0x2125ff==_0x4ba137(0x1c4))_0x3106ee=loginExpiry*0x3c*0x3e8;else _0x3106ee=devices[_0x5a74ec][_0x4ba137(0x1b7)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x5a74ec][_0x4ba137(0x1b7)][_0x4ba137(0x184)]);if(devices[_0x5a74ec][_0x4ba137(0xac)])clearTimeout(devices[_0x5a74ec][_0x4ba137(0xac)]);devices[_0x5a74ec]['pidExpireLogin']=setTimeout(()=>{const _0xef57f5=_0x4ba137;if(devices[_0x5a74ec][_0xef57f5(0x159)])clearTimeout(devices[_0x5a74ec][_0xef57f5(0x159)]);removeSocketListeners(_0x5a74ec),addBlacklist(_0x5a74ec),devices[_0x5a74ec][_0xef57f5(0x1b7)]=null,devices[_0x5a74ec][_0xef57f5(0x203)]=null,devices[_0x5a74ec][_0xef57f5(0xf7)][_0xef57f5(0x21d)]=null,devices[_0x5a74ec][_0xef57f5(0xf7)]=validateAccess(devices[_0x5a74ec][_0xef57f5(0xf7)][_0xef57f5(0x21d)],_0x5a74ec),!(devices[_0x5a74ec][_0xef57f5(0xf7)][_0xef57f5(0xd0)]&&devices[_0x5a74ec][_0xef57f5(0xf7)][_0xef57f5(0xb1)]==_0xef57f5(0x11e))&&(_0x2125ff==_0xef57f5(0x1c4)?io['to'](_0x5a74ec)[_0xef57f5(0xf3)](_0xef57f5(0x17f),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x5a74ec)[_0xef57f5(0xf3)](_0xef57f5(0x17f),{'access':{'allow':![],'reason':_0xef57f5(0x1fa),'token':null}})),devices[_0x5a74ec][_0xef57f5(0xf7)][_0xef57f5(0x21d)]=null;},_0x3106ee);}function setTokenRefresh(_0xe57d4b){const _0x1f9308=_0x575907;if(devices[_0xe57d4b]['pidRefreshToken'])clearTimeout(devices[_0xe57d4b][_0x1f9308(0x159)]);devices[_0xe57d4b][_0x1f9308(0x159)]=setTimeout(()=>{const _0xcfccb1=_0x1f9308;getClientsWithUuid(_0xe57d4b)[_0xcfccb1(0x9a)]!=0x0?(devices[_0xe57d4b][_0xcfccb1(0xf7)]=refreshToken(_0xe57d4b),io['to'](_0xe57d4b)[_0xcfccb1(0xf3)](_0xcfccb1(0x17f),{'status':_0xcfccb1(0x191),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xe57d4b][_0xcfccb1(0xf7)],'externalip':devices[_0xe57d4b]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xe57d4b)):clearTimeout(devices[_0xe57d4b][_0xcfccb1(0x159)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2254d5){const _0x2b9db4=_0x575907,_0x2a28b0=getClient(_0x2254d5['id'])[_0x2b9db4(0x1fb)];_0x2254d5['emit'](_0x2b9db4(0x220),config),_0x2254d5[_0x2b9db4(0xf3)](_0x2b9db4(0x221),cleanSettings()),_0x2254d5['on'](_0x2b9db4(0x1a7),_0x50093f=>{const _0x238fc9=_0x2b9db4;if(validateAccess(_0x50093f,_0x2a28b0)[_0x238fc9(0xd0)])addBot();else logger[_0x238fc9(0x114)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x2254d5['on'](_0x2b9db4(0x12b),(_0x2dc362,_0x2728e5)=>{const _0x363035=_0x2b9db4;if(validateAccess(_0x2728e5,_0x2a28b0)[_0x363035(0xd0)])toggleBot(_0x2dc362[_0x363035(0xb8)],_0x2dc362[_0x363035(0x17f)],_0x2dc362[_0x363035(0xdc)]);else logger[_0x363035(0x114)](_0x363035(0x1f3));}),_0x2254d5['on'](_0x2b9db4(0x207),(_0x368734,_0xd8f0a0)=>{const _0x5bd5eb=_0x2b9db4;if(validateAccess(_0xd8f0a0,_0x2a28b0)[_0x5bd5eb(0xd0)])toggleBotMode(_0x368734);else logger[_0x5bd5eb(0x114)](_0x5bd5eb(0x1f3));}),_0x2254d5['on'](_0x2b9db4(0xc7),(_0x3033fe,_0x4b5a3d)=>{const _0x15d0ca=_0x2b9db4;if(validateAccess(_0x4b5a3d,_0x2a28b0)[_0x15d0ca(0xd0)])deleteBot(_0x3033fe);else logger[_0x15d0ca(0x114)](_0x15d0ca(0x1c0));}),_0x2254d5['on'](_0x2b9db4(0xf8),(_0x58dcf6,_0x497026)=>{const _0x2f3c0c=_0x2b9db4;if(validateAccess(_0x497026,_0x2a28b0)['allow'])storeSettings(_0x58dcf6,!![]);else logger[_0x2f3c0c(0x114)](_0x2f3c0c(0xa2));}),_0x2254d5['on']('update-bb',_0x4a68b7=>{const _0xf16d00=_0x2b9db4;if(validateAccess(_0x4a68b7,_0x2a28b0)['allow'])updateBB();else logger[_0xf16d00(0x114)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x2254d5['on'](_0x2b9db4(0x177),_0x1f96cb=>{const _0x52fd8e=_0x2b9db4;if(validateAccess(_0x1f96cb,_0x2a28b0)['allow'])getMessages();else logger[_0x52fd8e(0x114)](_0x52fd8e(0x1ec));}),_0x2254d5['on'](_0x2b9db4(0xe2),(_0x30117b,_0x5f4e73)=>{const _0x2e23d4=_0x2b9db4;if(validateAccess(_0x5f4e73,_0x2a28b0)['allow'])confirmMessage(_0x30117b);else logger[_0x2e23d4(0x114)](_0x2e23d4(0x1e5));}),_0x2254d5['on'](_0x2b9db4(0x1b9),_0x3f9036=>{const _0x3ba51d=_0x2b9db4;if(validateAccess(_0x3f9036,_0x2a28b0)[_0x3ba51d(0xd0)]){if(devices[_0x2a28b0][_0x3ba51d(0x159)])clearTimeout(devices[_0x2a28b0]['pidRefreshToken']);if(devices[_0x2a28b0][_0x3ba51d(0xac)])clearTimeout(devices[_0x2a28b0][_0x3ba51d(0xac)]);removeSocketListeners(getClient(_0x2254d5['id'])[_0x3ba51d(0x1fb)]),addBlacklist(_0x2a28b0),devices[_0x2a28b0][_0x3ba51d(0x1b7)]=null,devices[_0x2a28b0]['telegram2FaApproval']=null,devices[_0x2a28b0][_0x3ba51d(0xf7)][_0x3ba51d(0x21d)]=null,io['to'](getClient(_0x2254d5['id'])[_0x3ba51d(0x1fb)])['emit'](_0x3ba51d(0x17f),{'access':{'allow':![],'reason':_0x3ba51d(0x230),'token':null}});}else logger['full'](_0x3ba51d(0x18b));});}function initializeSocketBot(_0x5de5aa){const _0x11b66e=_0x575907,_0x30b9a9=getClient(_0x5de5aa['id'])['bot'],_0x52d3a3=getClient(_0x5de5aa['id'])[_0x11b66e(0x1fb)];_0x5de5aa['on'](_0x11b66e(0x152),(_0x185a65,_0x4c43f9)=>{const _0x284352=_0x11b66e;if(validateAccess(_0x4c43f9,_0x52d3a3)[_0x284352(0xd0)]){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x284352(0x11b)]({'function':'emitHistory','args':_0x185a65});}else logger['full'](_0x284352(0x116));}),_0x5de5aa['on'](_0x11b66e(0x219),(_0x178203,_0x10914d)=>{const _0x418de8=_0x11b66e;if(validateAccess(_0x10914d,_0x52d3a3)[_0x418de8(0xd0)]){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x418de8(0x11b)]({'function':'deleteHistoryAlerts','args':_0x178203});}else logger[_0x418de8(0x114)](_0x418de8(0xc3));}),_0x5de5aa['on'](_0x11b66e(0x12a),(_0x3a763b,_0x5e833c)=>{const _0x38f737=_0x11b66e;if(validateAccess(_0x5e833c,_0x52d3a3)['allow']){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x38f737(0x11b)]({'function':_0x38f737(0xe7),'args':_0x3a763b});}else logger[_0x38f737(0x114)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5de5aa['on'](_0x11b66e(0xbd),(_0x3edb0b,_0x4fb164)=>{const _0x4774f6=_0x11b66e;if(validateAccess(_0x4fb164,_0x52d3a3)['allow']){if(pid[_0x30b9a9])pid[_0x30b9a9]['send']({'function':'storeConfiguration','args':_0x3edb0b});}else logger[_0x4774f6(0x114)](_0x4774f6(0xc0));}),_0x5de5aa['on'](_0x11b66e(0x19a),(_0x78d20d,_0x501a30)=>{const _0x4759dd=_0x11b66e;if(validateAccess(_0x501a30,_0x52d3a3)['allow']){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x4759dd(0x11b)]({'function':_0x4759dd(0x1b6),'args':_0x78d20d});}else logger[_0x4759dd(0x114)](_0x4759dd(0x142));}),_0x5de5aa['on'](_0x11b66e(0xa0),_0x400ccd=>{const _0x2a7f54=_0x11b66e;if(validateAccess(_0x400ccd,_0x52d3a3)[_0x2a7f54(0xd0)]){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x2a7f54(0x11b)]({'function':_0x2a7f54(0x20b),'args':null});}else logger['full'](_0x2a7f54(0x10d));}),_0x5de5aa['on']('place-order',(_0xe53984,_0xd3fff4)=>{const _0x158f3f=_0x11b66e;if(validateAccess(_0xd3fff4,_0x52d3a3)['allow']){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x158f3f(0x11b)]({'function':_0x158f3f(0x13d),'args':_0xe53984});}else logger[_0x158f3f(0x114)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x5de5aa['on'](_0x11b66e(0x1aa),_0x38067e=>{const _0x174cfe=_0x11b66e;if(validateAccess(_0x38067e,_0x52d3a3)[_0x174cfe(0xd0)]){if(pid[_0x30b9a9])pid[_0x30b9a9][_0x174cfe(0x11b)]({'function':_0x174cfe(0xf0),'args':null});}else logger[_0x174cfe(0x114)](_0x174cfe(0x117));}),_0x5de5aa['on']('update-bb',_0x3b5fc5=>{const _0x5093c3=_0x11b66e;if(validateAccess(_0x3b5fc5,_0x52d3a3)[_0x5093c3(0xd0)])updateBB();else logger[_0x5093c3(0x114)](_0x5093c3(0x1eb));}),_0x5de5aa['on'](_0x11b66e(0x177),_0x7f2c60=>{const _0x588935=_0x11b66e;if(validateAccess(_0x7f2c60,_0x52d3a3)[_0x588935(0xd0)])getMessages();else logger[_0x588935(0x114)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5de5aa['on']('confirm-message',(_0x33c995,_0x11f5d6)=>{const _0x3100c1=_0x11b66e;if(validateAccess(_0x11f5d6,_0x52d3a3)[_0x3100c1(0xd0)])confirmMessage(_0x33c995);else logger[_0x3100c1(0x114)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5de5aa['on']('logout',_0x238a2d=>{const _0x58021e=_0x11b66e;if(validateAccess(_0x238a2d,_0x52d3a3)[_0x58021e(0xd0)]){if(devices[_0x52d3a3][_0x58021e(0x159)])clearTimeout(devices[_0x52d3a3][_0x58021e(0x159)]);if(devices[_0x52d3a3]['pidExpireLogin'])clearTimeout(devices[_0x52d3a3][_0x58021e(0xac)]);removeSocketListeners(getClient(_0x5de5aa['id'])[_0x58021e(0x1fb)]),addBlacklist(_0x52d3a3),devices[_0x52d3a3][_0x58021e(0x1b7)]=null,devices[_0x52d3a3][_0x58021e(0x203)]=null,devices[_0x52d3a3][_0x58021e(0xf7)][_0x58021e(0x21d)]=null,io['to'](getClient(_0x5de5aa['id'])[_0x58021e(0x1fb)])[_0x58021e(0xf3)](_0x58021e(0x17f),{'access':{'allow':![],'reason':_0x58021e(0x230),'token':null}});}else logger[_0x58021e(0x114)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x14d557){getClientsWithUuid(_0x14d557)['forEach'](_0x20fd1b=>{const _0x3e6fb5=_0x215f;getSocket(_0x20fd1b['id'])[_0x3e6fb5(0x19d)]();});}function cleanSettings(){const _0x1fce08=_0x575907;let _0x3f0707=settings;return settings[_0x1fce08(0xa4)]&&settings[_0x1fce08(0xa4)]!=''&&(_0x3f0707={..._0x3f0707,'telegramToken':_0x1fce08(0x103)}),settings[_0x1fce08(0x202)]&&settings[_0x1fce08(0x202)]!=''&&(_0x3f0707={..._0x3f0707,'bbPassword':_0x1fce08(0x103)}),(settings[_0x1fce08(0x202)]&&settings['bbPassword']==_0x1fce08(0x1a3)||settings[_0x1fce08(0xa4)]&&settings['telegramToken']==_0x1fce08(0x1a3))&&(_0x3f0707={..._0x3f0707,'restored':{'password':settings[_0x1fce08(0x202)]=='***','telegram':settings[_0x1fce08(0xa4)]=='***'}}),_0x3f0707;}function updateBB(){const _0x47e6a0=_0x575907;installingUpdate=!![],config[_0x47e6a0(0x10f)](_0x51fd23=>{const _0x9c0df7=_0x47e6a0;restartBot(_0x51fd23[_0x9c0df7(0xb8)]);}),process['send']({'update':!![]},_0xbdfd2e=>{});}function startBot(_0x7108b5,_0x317e2c,_0x5ef96f){const _0x199624=_0x575907;let _0x2bf18e=![];const _0x1757bd=_0x7108b5[0x0];_0x317e2c={..._0x317e2c,'stdio':['inherit',_0x199624(0x178),_0x199624(0x178),_0x199624(0x150)]},pid[_0x1757bd]=childProcess[_0x199624(0xfe)](botfile,_0x7108b5,_0x317e2c),pid[_0x1757bd]['on'](_0x199624(0x205),_0x1ad4c5=>{const _0x242034=_0x199624;switch(Object[_0x242034(0x146)](_0x1ad4c5)[0x0]){case _0x242034(0x101):updateBotName(_0x1757bd,_0x1ad4c5[_0x242034(0x101)]);break;case _0x242034(0x14b):updateBotManager();break;case _0x242034(0x17f):updateStatus(_0x1757bd,_0x1ad4c5[_0x242034(0x17f)]);break;case _0x242034(0xdc):updateLive(_0x1757bd,_0x1ad4c5[_0x242034(0xdc)]);break;case _0x242034(0x1f4):updateLive(_0x1757bd,_0x1ad4c5[_0x242034(0x1f4)]),io['to'](_0x1757bd)[_0x242034(0xf3)](_0x242034(0x17f),{'access':{'allow':![],'reason':_0x242034(0xa5),'token':null}});break;case _0x242034(0x100):_0x1ad4c5['stop']=='restart'&&restartBot(_0x1757bd);_0x1ad4c5[_0x242034(0x100)]=='kill'&&toggleBot(_0x1757bd,_0x242034(0xe3),_0x242034(0x13e));break;case _0x242034(0x18a):sendTelegram(_0x1757bd,_0x1ad4c5['telegram']);break;case _0x242034(0xa3):sendTelegramMsg(_0x1ad4c5[_0x242034(0xa3)]);break;case _0x242034(0xb5):io['to'](_0x1757bd)[_0x242034(0xf3)](_0x1ad4c5['function'],_0x1ad4c5[_0x242034(0x188)]);break;}}),pid[_0x1757bd]['on'](_0x199624(0xdf),function(_0x4f3742){if(_0x2bf18e)return;_0x2bf18e=!![],_0x5ef96f(_0x4f3742);}),pid[_0x1757bd]['on'](_0x199624(0x1be),async function(_0x28d8d4){const _0x575aeb=_0x199624;if(installingUpdate)return;if(_0x2bf18e)return;_0x2bf18e=!![],_0x5ef96f(null);const _0x3140d=dbConfig[_0x575aeb(0x12c)]('bots')[_0x575aeb(0x1a9)]({'botID':_0x1757bd})[_0x575aeb(0x130)]();_0x3140d&&(_0x3140d['status']==_0x575aeb(0x212)||_0x3140d[_0x575aeb(0x17f)]==_0x575aeb(0xbf))&&(await sleep(0x3e8),updateLive(_0x1757bd,_0x575aeb(0x13e)),logger['full'](_0x575aeb(0xfa)+_0x1757bd),startBot([_0x1757bd,userID],{'cwd':bbpath},function(_0x248f07){const _0x39793c=_0x575aeb;if(_0x248f07)logger[_0x39793c(0x114)](_0x248f07);}));});}function stopBot(_0xa78d05){const _0x328f91=_0x575907;getClientsWithBotID(_0xa78d05)['forEach'](_0xa5f8ce=>{const _0x274d36=_0x215f;getSocket(_0xa5f8ce['id'])[_0x274d36(0x162)](!![]),removeClient(_0xa5f8ce['id']);}),pid[_0xa78d05]&&(pid[_0xa78d05][_0x328f91(0x1da)](),pid[_0xa78d05]=null);}function restartBot(_0x479f1c){const _0x59810e=_0x575907;if(pid[_0x479f1c])pid[_0x479f1c][_0x59810e(0x1da)]();}function addBot(){const _0x2097fd=_0x575907;let _0x4a27df;for(let _0x55a628=0x1;_0x55a628<0x3e9;_0x55a628++){_0x4a27df=_0x55a628[_0x2097fd(0x1c5)]()[_0x2097fd(0x127)](0x3,'0');let _0x208502=config[_0x2097fd(0x1a9)](_0x49f192=>_0x49f192[_0x2097fd(0xb8)]==_0x4a27df);if(!_0x208502)break;}if(_0x4a27df==='1000'){logger['full'](_0x2097fd(0x10e));return;}logger[_0x2097fd(0x114)](_0x2097fd(0x145)+_0x4a27df),dbConfig[_0x2097fd(0x12c)](_0x2097fd(0x220))[_0x2097fd(0xae)]({'botID':_0x4a27df,'botname':'Bot\x20'+_0x4a27df,'status':_0x2097fd(0xbf),'live':''})['write'](),startBot([_0x4a27df,userID],{'cwd':bbpath},function(_0x2dcc46){if(_0x2dcc46)logger['full'](_0x2dcc46);}),config=getConfiguration(),io['to'](_0x2097fd(0x1cb))[_0x2097fd(0xf3)](_0x2097fd(0x220),config);}function deleteBot(_0x43662a){const _0x298268=_0x575907;getClientsWithBotID(_0x43662a)[_0x298268(0x10f)](_0x35617c=>{getSocket(_0x35617c['id'])['disconnect'](!![]),removeClient(_0x35617c['id']);}),dbConfig[_0x298268(0x12c)](_0x298268(0x220))[_0x298268(0x1d6)]({'botID':_0x43662a})['write'](),logger[_0x298268(0x114)]('deleted\x20Bot\x20'+_0x43662a),stopBot(_0x43662a);try{fs['unlinkSync'](path['join'](configpath,_0x298268(0x189)+_0x43662a+_0x298268(0x112))),fs['unlinkSync'](path[_0x298268(0x1ca)](configpath,'bot-'+_0x43662a+_0x298268(0xe8))),fs['unlinkSync'](path[_0x298268(0x1ca)](configpath,_0x298268(0x189)+_0x43662a+_0x298268(0x211))),fs['unlinkSync'](path[_0x298268(0x1ca)](configpath,_0x298268(0x189)+_0x43662a+_0x298268(0x200)));}catch(_0x24ea76){if(_0x24ea76)logger[_0x298268(0x114)]('error\x20while\x20deleting\x20config\x20files:\x20',_0x24ea76);}config=getConfiguration(),io['to'](_0x298268(0x1cb))[_0x298268(0xf3)](_0x298268(0x220),config);}function toggleBot(_0x4d8a68,_0x2527fb,_0x1a44d6){const _0x4aa719=_0x575907;dbConfig[_0x4aa719(0x12c)](_0x4aa719(0x220))[_0x4aa719(0x1a9)]({'botID':_0x4d8a68})['assign']({'status':_0x2527fb})[_0x4aa719(0x129)]({'live':_0x1a44d6})['write']();if(_0x2527fb==_0x4aa719(0x212)||_0x2527fb==_0x4aa719(0xbf))logger[_0x4aa719(0x114)](_0x4aa719(0xfc)+_0x4d8a68),startBot([_0x4d8a68,userID],{'cwd':bbpath},function(_0x56722e){const _0x254182=_0x4aa719;if(_0x56722e)logger[_0x254182(0x114)](_0x56722e);});else(_0x2527fb==_0x4aa719(0xe3)||_0x2527fb=='new-disabled')&&(logger[_0x4aa719(0x114)](_0x4aa719(0x18d)+_0x4d8a68),stopBot(_0x4d8a68));config=getConfiguration(),io['to'](_0x4aa719(0x1cb))[_0x4aa719(0xf3)](_0x4aa719(0x220),config);}function toggleStatus(_0x1db3a5){const _0x59d497=_0x575907;let _0x4c8ce2=dbConfig[_0x59d497(0x12c)]('bots')[_0x59d497(0x1a9)]({'botID':_0x1db3a5})[_0x59d497(0x130)](),_0x107cc6;if(_0x4c8ce2[_0x59d497(0x17f)]==='enabled')_0x107cc6=_0x59d497(0xe3);else{if(_0x4c8ce2[_0x59d497(0x17f)]==='new')_0x107cc6=_0x59d497(0x12f);else{if(_0x4c8ce2[_0x59d497(0x17f)]===_0x59d497(0x12f))_0x107cc6=_0x59d497(0xbf);else{if(_0x4c8ce2['status']==='disabled')_0x107cc6=_0x59d497(0x212);}}}return _0x107cc6;}function updateStatus(_0x5cef61,_0x436c37){const _0x54ff93=_0x575907;dbConfig[_0x54ff93(0x12c)]('bots')[_0x54ff93(0x1a9)]({'botID':_0x5cef61})[_0x54ff93(0x129)]({'status':_0x436c37})['write'](),config=getConfiguration(),io['to'](_0x54ff93(0x1cb))['emit'](_0x54ff93(0x220),config);}function updateLive(_0xf090da,_0x597807){const _0x3dd02a=_0x575907;dbConfig[_0x3dd02a(0x12c)](_0x3dd02a(0x220))['find']({'botID':_0xf090da})[_0x3dd02a(0x129)]({'live':_0x597807})[_0x3dd02a(0xaf)](),config=getConfiguration(),io['to']('botmanager')[_0x3dd02a(0xf3)]('bots',config);}function updateBotName(_0x21bc9f,_0x3af263){const _0x5297ad=_0x575907;dbConfig[_0x5297ad(0x12c)](_0x5297ad(0x220))[_0x5297ad(0x1a9)]({'botID':_0x21bc9f})[_0x5297ad(0x129)]({'botname':_0x3af263})['write'](),config=getConfiguration(),io['to'](_0x5297ad(0x1cb))['emit']('bots',config);}function updateBotManager(){const _0x4f09bf=_0x575907;config=getConfiguration(),io['to'](_0x4f09bf(0x1cb))[_0x4f09bf(0xf3)](_0x4f09bf(0x220),config);}function toggleBotMode(_0x21eec8){const _0x54eb03=_0x575907;if(pid[_0x21eec8])pid[_0x21eec8][_0x54eb03(0x11b)]({'function':_0x54eb03(0x164),'args':null});else{const _0xf6c15c=configpath+_0x54eb03(0x189)+_0x21eec8+_0x54eb03(0x112),_0x4301aa=fs[_0x54eb03(0xb7)](_0xf6c15c),_0x4d926f=JSON[_0x54eb03(0x20c)](_0x4301aa),_0x696ad4=_0x4d926f[_0x54eb03(0x118)][0x0]['headless'];_0x4d926f[_0x54eb03(0x118)][0x0][_0x54eb03(0x149)]=!_0x696ad4;const _0x145092=JSON[_0x54eb03(0x213)](_0x4d926f,null,0x2);fs[_0x54eb03(0x20f)](_0xf6c15c,_0x145092),config=getConfiguration(),io['to'](_0x54eb03(0x1cb))[_0x54eb03(0xf3)](_0x54eb03(0x220),config);}}function telegramError(_0x48e790){const _0x17db26=_0x575907;logger[_0x17db26(0x1b2)](getTimeStamp()+_0x17db26(0xdb));}function validateTelegram(_0x38c9ef){const _0x1dd37d=_0x575907;if(_0x38c9ef['from'][_0x1dd37d(0x1a2)]!=settings[_0x1dd37d(0x113)]&&'@'+_0x38c9ef[_0x1dd37d(0xea)][_0x1dd37d(0x1a2)]!=settings[_0x1dd37d(0x113)])return tgBot[_0x1dd37d(0x19b)](_0x38c9ef[_0x1dd37d(0xe1)]['id'],_0x1dd37d(0xaa),{'parse_mode':_0x1dd37d(0x153)})[_0x1dd37d(0x14f)](_0xd0152b=>{telegramError(_0xd0152b);}),![];return!![];}async function initTelegram(){const _0x2b8f89=_0x575907;if(tgBot)tgBot[_0x2b8f89(0x111)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2b8f89(0xa4)],{'polling':!![]});let _0xed3899='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0xed3899+='\x0a',_0xed3899+=_0x2b8f89(0x1bf),_0xed3899+=_0x2b8f89(0xbe),_0xed3899+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0xed3899+=_0x2b8f89(0x1ac),_0xed3899+=_0x2b8f89(0x10a),_0xed3899+='/off\x20-\x20stop\x20bot(s)\x0a',_0xed3899+=_0x2b8f89(0xce),_0xed3899+=_0x2b8f89(0x9e),_0xed3899+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0xed3899+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0xed3899+=_0x2b8f89(0x1af),_0xed3899+=_0x2b8f89(0x16d);let _0x1bea2a=_0x2b8f89(0x19e);_0x1bea2a+='\x0a',_0x1bea2a+=_0xed3899,tgBot['onText'](/\/start/,_0x357f57=>{const _0x3eadbc=_0x2b8f89;if(!validateTelegram(_0x357f57))return;if(settings['telegramChatId']!=_0x357f57['chat']['id'])updateSetting(_0x3eadbc(0x139),_0x357f57['chat']['id']);updateSetting(_0x3eadbc(0x222),!![]),tgBot[_0x3eadbc(0x19b)](_0x357f57[_0x3eadbc(0xe1)]['id'],_0x1bea2a)[_0x3eadbc(0x14f)](_0x2d47a8=>{telegramError(_0x2d47a8);});}),tgBot[_0x2b8f89(0xee)](/\/enable/,_0x30dfbd=>{const _0x5cffd2=_0x2b8f89;if(!validateTelegram(_0x30dfbd))return;if(settings[_0x5cffd2(0x139)]!=_0x30dfbd['chat']['id'])updateSetting(_0x5cffd2(0x139),_0x30dfbd[_0x5cffd2(0xe1)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x5cffd2(0x19b)](_0x30dfbd[_0x5cffd2(0xe1)]['id'],_0x5cffd2(0x17e))[_0x5cffd2(0x14f)](_0x3044a1=>{telegramError(_0x3044a1);});}),tgBot['onText'](/\/config/,async _0x12de32=>{const _0x4b4fe5=_0x2b8f89;if(!validateTelegram(_0x12de32))return;tgBot[_0x4b4fe5(0xc4)](_0x4b4fe5(0x215)),tgBot[_0x4b4fe5(0x19b)](_0x12de32[_0x4b4fe5(0xe1)]['id'],_0x4b4fe5(0x1ff),{'reply_markup':{'inline_keyboard':[[{'text':_0x4b4fe5(0xeb),'callback_data':'orders'},{'text':_0x4b4fe5(0x19c),'callback_data':_0x4b4fe5(0x182)},{'text':_0x4b4fe5(0xf9),'callback_data':_0x4b4fe5(0x13c)}]]}})[_0x4b4fe5(0x14f)](_0x1963ef=>{telegramError(_0x1963ef);}),tgBot['on'](_0x4b4fe5(0x215),async _0x3847cf=>{const _0x136709=_0x4b4fe5,_0x184ff0=_0x3847cf[_0x136709(0x12e)],_0x39254b=_0x3847cf['message'];tgBot[_0x136709(0x1f1)](_0x3847cf['id'])['then'](async()=>{const _0x4c99e3=_0x136709;_0x184ff0==_0x4c99e3(0x1e0)&&(updateSetting(_0x4c99e3(0x9f),_0x4c99e3(0x1e0)),updateSetting(_0x4c99e3(0x222),!![]),await tgBot[_0x4c99e3(0x19b)](_0x39254b[_0x4c99e3(0xe1)]['id'],_0x4c99e3(0x1f6))['catch'](_0x4fc65a=>{telegramError(_0x4fc65a);}));_0x184ff0==_0x4c99e3(0x182)&&(updateSetting(_0x4c99e3(0x9f),_0x4c99e3(0x182)),updateSetting(_0x4c99e3(0x222),!![]),await tgBot[_0x4c99e3(0x19b)](_0x39254b['chat']['id'],_0x4c99e3(0xcd))[_0x4c99e3(0x14f)](_0x32e3c7=>{telegramError(_0x32e3c7);}));_0x184ff0==_0x4c99e3(0x13c)&&(updateSetting(_0x4c99e3(0x9f),'all'),updateSetting(_0x4c99e3(0x222),!![]),await tgBot['sendMessage'](_0x39254b[_0x4c99e3(0xe1)]['id'],_0x4c99e3(0x132))[_0x4c99e3(0x14f)](_0x32119c=>{telegramError(_0x32119c);}));if(!settings[_0x4c99e3(0x139)])tgBot[_0x4c99e3(0x19b)](_0x39254b[_0x4c99e3(0xe1)]['id'],_0x4c99e3(0x21c))[_0x4c99e3(0x14f)](_0x227a6e=>{telegramError(_0x227a6e);});}),tgBot[_0x136709(0xc4)](_0x136709(0x215));});}),tgBot[_0x2b8f89(0xee)](/\/status/,_0x5ad960=>{const _0x44b01d=_0x2b8f89;if(!validateTelegram(_0x5ad960))return;const _0x168ed1=getBotsWithMode();let _0x18f64a=_0x44b01d(0xca);config[_0x44b01d(0x10f)](_0x2a6223=>{const _0x384505=_0x44b01d,_0x3dd74b=_0x168ed1[_0x384505(0x1a9)](_0x13422d=>_0x13422d[_0x384505(0xb8)]==_0x2a6223['botID'])['mode'];_0x18f64a+=_0x384505(0x193)+_0x2a6223[_0x384505(0xb8)]+':\x20'+_0x2a6223[_0x384505(0x17f)]+_0x384505(0x1c3)+_0x3dd74b+_0x384505(0x1c3)+_0x2a6223[_0x384505(0xdc)]+'\x0a';}),_0x18f64a+='\x0a',_0x18f64a+=_0x44b01d(0x198),_0x18f64a+=!settings[_0x44b01d(0x222)]?_0x44b01d(0x17c):_0x44b01d(0x195),_0x18f64a+=settings[_0x44b01d(0x222)]?settings[_0x44b01d(0x9f)]==_0x44b01d(0x13c)?_0x44b01d(0x1ea):_0x44b01d(0x106)+settings[_0x44b01d(0x9f)]+_0x44b01d(0x1f9):'',tgBot['sendMessage'](_0x5ad960[_0x44b01d(0xe1)]['id'],_0x18f64a,{'parse_mode':_0x44b01d(0x153)})[_0x44b01d(0x14f)](_0xd071b1=>{telegramError(_0xd071b1);});}),tgBot['onText'](/\/restart/,_0x59034d=>{const _0x1eec64=_0x2b8f89;if(!validateTelegram(_0x59034d))return;tgBot['removeListener'](_0x1eec64(0x215));const _0x4bddda=getEnabledBots();if(_0x4bddda[_0x1eec64(0x9a)]==0x0)tgBot[_0x1eec64(0x19b)](_0x59034d[_0x1eec64(0xe1)]['id'],_0x1eec64(0x228))[_0x1eec64(0x14f)](_0x3943bc=>{telegramError(_0x3943bc);});else{if(_0x4bddda[_0x1eec64(0x9a)]>0x1)_0x4bddda[_0x1eec64(0xae)]({'botID':_0x1eec64(0x13c)});let _0x1e6aad=[],_0x5b0919=[];const _0x439f96=_0x4bddda['length']%0x4==0x0||_0x4bddda[_0x1eec64(0x9a)]%0x4==0x3||_0x4bddda[_0x1eec64(0x9a)]%0x3==0x1?0x4:0x3;let _0x26f3cf=0x0;_0x4bddda[_0x1eec64(0x10f)]((_0x34e866,_0x423bff)=>{const _0x49f89b=_0x1eec64;if(_0x423bff%_0x439f96==0x0)_0x5b0919=[];_0x5b0919[_0x49f89b(0xae)]({'text':_0x34e866[_0x49f89b(0xb8)]==_0x49f89b(0x13c)?_0x49f89b(0x1c8):_0x49f89b(0x193)+_0x34e866[_0x49f89b(0xb8)],'callback_data':_0x34e866['botID']}),_0x423bff%_0x439f96==0x0&&(_0x1e6aad[_0x26f3cf]=_0x5b0919,_0x26f3cf++);}),tgBot[_0x1eec64(0x19b)](_0x59034d[_0x1eec64(0xe1)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x1e6aad}})[_0x1eec64(0x14f)](_0x3b56dd=>{telegramError(_0x3b56dd);}),tgBot['on'](_0x1eec64(0x215),async _0x196212=>{const _0x1a0a35=_0x1eec64,_0x4daa27=_0x196212['data'],_0x45d7f0=_0x196212[_0x1a0a35(0x205)];tgBot[_0x1a0a35(0x1f1)](_0x196212['id'])[_0x1a0a35(0x126)](async()=>{_0x4daa27=='all'?config['forEach'](_0xb1844b=>{const _0x2e7e35=_0x215f;restartBot(_0xb1844b[_0x2e7e35(0xb8)]);}):restartBot(_0x4daa27);}),tgBot[_0x1a0a35(0xc4)](_0x1a0a35(0x215));});}}),tgBot[_0x2b8f89(0xee)](/\/on/,_0x2257b9=>{const _0x3906b3=_0x2b8f89;if(!validateTelegram(_0x2257b9))return;tgBot[_0x3906b3(0xc4)](_0x3906b3(0x215));const _0x175081=getDisabledBots();if(_0x175081['length']==0x0)tgBot[_0x3906b3(0x19b)](_0x2257b9['chat']['id'],_0x3906b3(0xd9))[_0x3906b3(0x14f)](_0x3e9262=>{telegramError(_0x3e9262);});else{if(_0x175081[_0x3906b3(0x9a)]>0x1)_0x175081['push']({'botID':_0x3906b3(0x13c)});let _0x44b442=[],_0x16c4a0=[];const _0x2c6681=_0x175081['length']%0x4==0x0||_0x175081[_0x3906b3(0x9a)]%0x4==0x3||_0x175081[_0x3906b3(0x9a)]%0x3==0x1?0x4:0x3;let _0x30610e=0x0;_0x175081[_0x3906b3(0x10f)]((_0x11a53f,_0x1080ba)=>{const _0x26dfa3=_0x3906b3;if(_0x1080ba%_0x2c6681==0x0)_0x16c4a0=[];_0x16c4a0[_0x26dfa3(0xae)]({'text':_0x11a53f['botID']==_0x26dfa3(0x13c)?_0x26dfa3(0x1c8):_0x26dfa3(0x193)+_0x11a53f[_0x26dfa3(0xb8)],'callback_data':_0x11a53f[_0x26dfa3(0xb8)]}),_0x1080ba%_0x2c6681==0x0&&(_0x44b442[_0x30610e]=_0x16c4a0,_0x30610e++);}),tgBot[_0x3906b3(0x19b)](_0x2257b9[_0x3906b3(0xe1)]['id'],_0x3906b3(0x14d),{'reply_markup':{'inline_keyboard':_0x44b442}})[_0x3906b3(0x14f)](_0x20fd82=>{telegramError(_0x20fd82);}),tgBot['on'](_0x3906b3(0x215),async _0x14131b=>{const _0x2f3d3f=_0x3906b3,_0x2c14da=_0x14131b[_0x2f3d3f(0x12e)],_0x55d7e9=_0x14131b[_0x2f3d3f(0x205)];tgBot[_0x2f3d3f(0x1f1)](_0x14131b['id'])[_0x2f3d3f(0x126)](async()=>{const _0xfc8abe=_0x2f3d3f;_0x2c14da==_0xfc8abe(0x13c)?(tgBot['sendMessage'](_0x55d7e9[_0xfc8abe(0xe1)]['id'],_0xfc8abe(0x183))['catch'](_0x167b5b=>{telegramError(_0x167b5b);}),_0x175081[_0xfc8abe(0x10f)](_0x30b862=>{const _0x924c2f=_0xfc8abe;if(_0x30b862[_0x924c2f(0xb8)]!='all')toggleBot(_0x30b862[_0x924c2f(0xb8)],toggleStatus(_0x30b862['botID']),_0x924c2f(0x13e));})):(tgBot[_0xfc8abe(0x19b)](_0x55d7e9['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x2c14da)['catch'](_0x51d04b=>{telegramError(_0x51d04b);}),toggleBot(_0x2c14da,toggleStatus(_0x2c14da),_0xfc8abe(0x13e)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x2b8f89(0xee)](/\/off/,_0xca1258=>{const _0x5bfe6d=_0x2b8f89;if(!validateTelegram(_0xca1258))return;tgBot[_0x5bfe6d(0xc4)](_0x5bfe6d(0x215));const _0x5e0af9=getEnabledBots();if(_0x5e0af9[_0x5bfe6d(0x9a)]==0x0)tgBot[_0x5bfe6d(0x19b)](_0xca1258[_0x5bfe6d(0xe1)]['id'],_0x5bfe6d(0x228))[_0x5bfe6d(0x14f)](_0xe53400=>{telegramError(_0xe53400);});else{if(_0x5e0af9['length']>0x1)_0x5e0af9[_0x5bfe6d(0xae)]({'botID':_0x5bfe6d(0x13c)});let _0x1416b5=[],_0x2a3810=[];const _0x53c725=_0x5e0af9[_0x5bfe6d(0x9a)]%0x4==0x0||_0x5e0af9['length']%0x4==0x3||_0x5e0af9[_0x5bfe6d(0x9a)]%0x3==0x1?0x4:0x3;let _0x1798b7=0x0;_0x5e0af9['forEach']((_0x14d8af,_0x33ba1e)=>{const _0x31c36e=_0x5bfe6d;if(_0x33ba1e%_0x53c725==0x0)_0x2a3810=[];_0x2a3810[_0x31c36e(0xae)]({'text':_0x14d8af[_0x31c36e(0xb8)]=='all'?'All\x20bots':_0x31c36e(0x193)+_0x14d8af[_0x31c36e(0xb8)],'callback_data':_0x14d8af[_0x31c36e(0xb8)]}),_0x33ba1e%_0x53c725==0x0&&(_0x1416b5[_0x1798b7]=_0x2a3810,_0x1798b7++);}),tgBot[_0x5bfe6d(0x19b)](_0xca1258[_0x5bfe6d(0xe1)]['id'],_0x5bfe6d(0xa8),{'reply_markup':{'inline_keyboard':_0x1416b5}})[_0x5bfe6d(0x14f)](_0x1293d8=>{telegramError(_0x1293d8);}),tgBot['on'](_0x5bfe6d(0x215),async _0x248650=>{const _0x31d758=_0x5bfe6d,_0x5b58e4=_0x248650[_0x31d758(0x12e)],_0x328501=_0x248650['message'];tgBot[_0x31d758(0x1f1)](_0x248650['id'])[_0x31d758(0x126)](async()=>{const _0x43225e=_0x31d758;_0x5b58e4==_0x43225e(0x13c)?(tgBot[_0x43225e(0x19b)](_0x328501[_0x43225e(0xe1)]['id'],_0x43225e(0xd2))[_0x43225e(0x14f)](_0xd2ec1c=>{telegramError(_0xd2ec1c);}),_0x5e0af9[_0x43225e(0x10f)](_0x2d62df=>{const _0x42d895=_0x43225e;if(_0x2d62df[_0x42d895(0xb8)]!='all')toggleBot(_0x2d62df[_0x42d895(0xb8)],toggleStatus(_0x2d62df[_0x42d895(0xb8)]),_0x42d895(0x13e));})):(tgBot[_0x43225e(0x19b)](_0x328501['chat']['id'],_0x43225e(0x1d1)+_0x5b58e4)[_0x43225e(0x14f)](_0x4c8313=>{telegramError(_0x4c8313);}),toggleBot(_0x5b58e4,toggleStatus(_0x5b58e4),'stopped'));}),tgBot[_0x31d758(0xc4)](_0x31d758(0x215));});}}),tgBot[_0x2b8f89(0xee)](/\/portfolio/,_0x2ab61d=>{const _0x3606db=_0x2b8f89;if(!validateTelegram(_0x2ab61d))return;tgBot[_0x3606db(0xc4)](_0x3606db(0x215));const _0x183537=getEnabledBots();if(_0x183537[_0x3606db(0x9a)]==0x0)tgBot[_0x3606db(0x19b)](_0x2ab61d[_0x3606db(0xe1)]['id'],_0x3606db(0x228))['catch'](_0x1e6d36=>{telegramError(_0x1e6d36);});else{if(_0x183537[_0x3606db(0x9a)]>0x1){let _0x2989bf=[],_0x1f67a3=[];const _0x22d8e2=_0x183537['length']%0x4==0x0||_0x183537[_0x3606db(0x9a)]%0x4==0x3||_0x183537[_0x3606db(0x9a)]%0x3==0x1?0x4:0x3;let _0x2c6ece=0x0;_0x183537[_0x3606db(0x10f)]((_0x3193ea,_0x3e3a91)=>{const _0x6960e9=_0x3606db;if(_0x3e3a91%_0x22d8e2==0x0)_0x1f67a3=[];_0x1f67a3[_0x6960e9(0xae)]({'text':_0x6960e9(0x193)+_0x3193ea[_0x6960e9(0xb8)],'callback_data':_0x3193ea[_0x6960e9(0xb8)]}),_0x3e3a91%_0x22d8e2==0x0&&(_0x2989bf[_0x2c6ece]=_0x1f67a3,_0x2c6ece++);}),tgBot[_0x3606db(0x19b)](_0x2ab61d[_0x3606db(0xe1)]['id'],_0x3606db(0x16f),{'reply_markup':{'inline_keyboard':_0x2989bf}})[_0x3606db(0x14f)](_0xabc5a8=>{telegramError(_0xabc5a8);}),tgBot['on'](_0x3606db(0x215),async _0x532fbc=>{const _0x32702d=_0x3606db,_0x83572f=_0x532fbc['data'],_0x5251cf=_0x532fbc[_0x32702d(0x205)];tgBot[_0x32702d(0x1f1)](_0x532fbc['id'])['then'](async()=>{const _0x266daf=_0x32702d;if(pid[_0x83572f])pid[_0x83572f][_0x266daf(0x11b)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x32702d(0xc4)]('callback_query');});}else{const _0x3efc18=_0x183537[0x0]['botID'];if(pid[_0x3efc18])pid[_0x3efc18][_0x3606db(0x11b)]({'function':_0x3606db(0x167),'args':null});}}}),tgBot['onText'](/\/update/,async _0x41d0d7=>{const _0x5cb1a7=_0x2b8f89;if(!validateTelegram(_0x41d0d7))return;tgBot[_0x5cb1a7(0xc4)]('callback_query'),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x41d0d7[_0x5cb1a7(0xe1)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x5cb1a7(0x14f)](_0x3079fd=>{telegramError(_0x3079fd);});else!validInstallation?tgBot['sendMessage'](_0x41d0d7['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x26f351=>{telegramError(_0x26f351);}):(tgBot['sendMessage'](_0x41d0d7[_0x5cb1a7(0xe1)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x5cb1a7(0x22c),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x5cb1a7(0x14f)](_0x439334=>{telegramError(_0x439334);}),tgBot['on'](_0x5cb1a7(0x215),async _0x3d3ebf=>{const _0x884eda=_0x5cb1a7,_0x5a620e=_0x3d3ebf[_0x884eda(0x12e)],_0x47d87f=_0x3d3ebf[_0x884eda(0x205)];tgBot[_0x884eda(0x1f1)](_0x3d3ebf['id'])[_0x884eda(0x126)](async()=>{const _0x46373e=_0x884eda;_0x5a620e==_0x46373e(0x1bc)&&(await tgBot[_0x46373e(0x19b)](_0x47d87f[_0x46373e(0xe1)]['id'],_0x46373e(0x102))[_0x46373e(0x14f)](_0x2e4cf3=>{telegramError(_0x2e4cf3);}),updateBB());_0x5a620e=='no'&&await tgBot['sendMessage'](_0x47d87f[_0x46373e(0xe1)]['id'],_0x46373e(0xd5))['catch'](_0x17e0a0=>{telegramError(_0x17e0a0);});if(!settings['telegramChatId'])tgBot[_0x46373e(0x19b)](_0x47d87f[_0x46373e(0xe1)]['id'],_0x46373e(0x21c))[_0x46373e(0x14f)](_0x4505e4=>{telegramError(_0x4505e4);});}),tgBot[_0x884eda(0xc4)](_0x884eda(0x215));}));}),tgBot[_0x2b8f89(0xee)](/\/toggle/,_0x2872f1=>{const _0x155c6a=_0x2b8f89;if(!validateTelegram(_0x2872f1))return;tgBot[_0x155c6a(0xc4)](_0x155c6a(0x215));const _0x4d9cb7=getBotsWithMode();if(_0x4d9cb7[_0x155c6a(0x9a)]==0x0)tgBot[_0x155c6a(0x19b)](_0x2872f1[_0x155c6a(0xe1)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x155c6a(0x14f)](_0x1f50a6=>{telegramError(_0x1f50a6);});else{let _0x2c68a0=[],_0x49fa10=[];const _0xae3df9=0x2;let _0x36900f=0x0;_0x4d9cb7[_0x155c6a(0x10f)]((_0x162d66,_0x16b309)=>{const _0x51872f=_0x155c6a;if(_0x16b309%_0xae3df9==0x0)_0x49fa10=[];_0x49fa10[_0x51872f(0xae)]({'text':'Bot\x20'+_0x162d66[_0x51872f(0xb8)]+'\x20('+_0x162d66[_0x51872f(0x171)]+')','callback_data':_0x162d66[_0x51872f(0xb8)]}),_0x16b309%_0xae3df9==0x0&&(_0x2c68a0[_0x36900f]=_0x49fa10,_0x36900f++);}),tgBot[_0x155c6a(0x19b)](_0x2872f1[_0x155c6a(0xe1)]['id'],_0x155c6a(0x18e),{'reply_markup':{'inline_keyboard':_0x2c68a0}})[_0x155c6a(0x14f)](_0x12c1f4=>{telegramError(_0x12c1f4);}),tgBot['on'](_0x155c6a(0x215),async _0xe913f4=>{const _0x33a7dd=_0x155c6a,_0x27662b=_0xe913f4[_0x33a7dd(0x12e)],_0x16b527=_0xe913f4['message'];tgBot[_0x33a7dd(0x1f1)](_0xe913f4['id'])['then'](async()=>{const _0x149411=_0x33a7dd,_0x2e541b=_0x4d9cb7[_0x149411(0x1a9)](_0x439c66=>_0x439c66[_0x149411(0xb8)]==_0x27662b),_0x5cc64b=_0x2e541b['mode']=='auto'?'manual':'auto';tgBot['sendMessage'](_0x16b527['chat']['id'],_0x149411(0x16a)+_0x27662b+'\x20to\x20'+_0x5cc64b+_0x149411(0x115))[_0x149411(0x14f)](_0xd6cd3e=>{telegramError(_0xd6cd3e);}),toggleBotMode(_0x27662b);}),tgBot[_0x33a7dd(0xc4)](_0x33a7dd(0x215));});}}),tgBot['onText'](/\/names/,_0x3612b2=>{const _0x4e2639=_0x2b8f89;if(!validateTelegram(_0x3612b2))return;let _0x4a97d='';config[_0x4e2639(0x10f)](_0x33cfb6=>{const _0x108cd4=_0x4e2639;_0x4a97d+=_0x108cd4(0x193)+_0x33cfb6[_0x108cd4(0xb8)]+':\x20'+_0x33cfb6[_0x108cd4(0x101)]+'\x0a';}),tgBot[_0x4e2639(0x19b)](_0x3612b2[_0x4e2639(0xe1)]['id'],_0x4a97d,{'parse_mode':_0x4e2639(0x153)})['catch'](_0xd298e9=>{telegramError(_0xd298e9);});}),tgBot[_0x2b8f89(0xee)](/\/disable/,_0x5e3edc=>{const _0x132554=_0x2b8f89;if(!validateTelegram(_0x5e3edc))return;tgBot['sendMessage'](_0x5e3edc[_0x132554(0xe1)]['id'],'Notifications\x20disabled')[_0x132554(0x14f)](_0x40af83=>{telegramError(_0x40af83);}),updateSetting(_0x132554(0x222),![]);}),tgBot[_0x2b8f89(0xee)](/\/help/,_0x1178fe=>{if(!validateTelegram(_0x1178fe))return;tgBot['sendMessage'](_0x1178fe['chat']['id'],_0xed3899)['catch'](_0x5b8061=>{telegramError(_0x5b8061);});}),tgBot['on'](_0x2b8f89(0x160),_0x2d842e=>{const _0x4c7beb=_0x2b8f89;_0x2d842e[_0x4c7beb(0x1c5)]()[_0x4c7beb(0x144)](_0x4c7beb(0x147))&&(logger[_0x4c7beb(0x114)](_0x4c7beb(0x1ab)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x4c7beb(0x1cb))[_0x4c7beb(0xf3)](_0x4c7beb(0x1f8),'Invalid\x20Telegram\x20token'));}),process[_0x2b8f89(0x1dc)](_0x2b8f89(0x204),()=>{const _0xb66169=_0x2b8f89;if(tgBot)tgBot[_0xb66169(0x111)]();process[_0xb66169(0x1be)](0x1);}),process['once']('SIGTERM',()=>{const _0x1522e4=_0x2b8f89;if(tgBot)tgBot[_0x1522e4(0x111)]();process[_0x1522e4(0x1be)](0x1);});}}function disableTelegram(){const _0x272f49=_0x575907;tgBot&&(tgBot[_0x272f49(0x111)](),tgBot=null);}function _0x2935(){const _0x4517ab=['2FA\x20login\x20rejected','password','/update\x20-\x20update\x20Balance\x20Bot\x0a','/:bot/coins','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','simple','kind','alias','track','storeHeadless','telegramIpApproval','Invalid\x20authentication\x20token\x20(2)','logout','success','tkn','yes','build','exit','/enable\x20-\x20enable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','decrypt','User\x20has\x20been\x20validated','\x20|\x20','login','toString','logs/','init','All\x20bots','isIPv4MappedAddress','join','botmanager','$1_$2_$3','lastmsgemitted','Allow\x20login\x20from\x20IP\x20address\x20<b>','mixpanel','70eWFxNy','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','isDirectory','DEFLATE','/download/:type','argv','remove','referer','11158880eAZNfm','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','kill','15\x20min','once','handshake','hybrid-crypto-js','apply','orders','911083NBGrai','event','Access\x20enabled\x20for\x20','test','Unauthorized\x20attempt\x20to\x20confirm\x20message','reject','format','axios','sort','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20get\x20messages','127.0.0.1','https://api.ipify.org?format=json','/:bot/configuration','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','answerCallbackQuery','hex','Unauthorized\x20attempt\x20to\x20update\x20bot','started','auth','Ok,\x20will\x20send\x20order\x20notifications\x20only','Server','notification','\x20only\x0a','temporary\x20access\x20timeout','uuid','getFullYear','ipv6','\x20>\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','-results.json','sortBy','bbPassword','telegram2FaApproval','SIGINT','message','node-telegram-bot-api','toggle-bot-mode','9LCnMfW','verify','build2','getStartingBalances','parse','apiKey','mkdirSync','writeFileSync','secret','-performance.json','enabled','stringify','\x20minutes','callback_query','store','login\x20token\x20generated','port','delete-alerts','generate','statSync','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','token','startsWith','copyFileSync','bots','settings','telegramEnabled','showname','RSA','config/','expiry','any','No\x20bots\x20running\x20right\x20now','724752UpwTme','show','getTime','Yes','484686GescFr','isValid','connection','logged\x20out','length','Login\x20accepted','Password\x20has\x20been\x20reset\x20to:\x20','1907818yQQbtb','/names\x20-\x20show\x20bot\x20names\x0a','telegramEvents','get-starting-balances','output-000.log','Unauthorized\x20attempt\x20to\x20update\x20settings','telegrammsg','telegramToken','reload','f2aRequired','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','sha256','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Markdown','pidExpireLogin','Crypt','push','write','6b67f3d61ee94b8f5c80b4affef4c4d9','reason','conn','log','request','function','slice','readFileSync','botID','bcryptjs','graphql-request','userid','Invalid\x20authentication\x20token\x20(1)','store-configuration','/disable\x20-\x20disable\x20notifications\x0a','new','Unauthorized\x20attempt\x20to\x20store\x20configuration','/:bot/performance','683104zPJajC','Unauthorized\x20attempt\x20to\x20delete\x20alerts','removeListener','version','path','delete-bot','bbvNew','/:bot/history','<b>Balance\x20Bot\x20Status:</b>\x0a','getHours','publicKey','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','server','allow','hasOwnProperty','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Temporary\x20access\x20rejected','temporaryAccessAllowed','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','uncaughtException','index.html','temporary\x20access\x20not\x20allowed','All\x20bots\x20running\x20right\x20now','bbvReceive',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','live','date-fns','use','error','http','chat','confirm-message','disabled','9RbITVp','type','title','getPortfolio','-events.json','Invalid\x20username\x20or\x20IP\x20address','from','Orders','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','util','onText','temporary\x20access\x20rejected','cancelLoading','output-002.log','messages','emit','privateKey','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','bb-config.json','access','store-settings','All','restarting\x20Bot\x20','match','enabled\x20Bot\x20','warning','fork','map','stop','botname','Starting\x20Balance\x20Bot\x20update','************','Token\x20blacklisted','auto','Notifications\x20types:\x20','defaults','listen','bb-secure.json','/on\x20-\x20start\x20bot(s)\x0a','filter','user','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','forEach','version.json','stopPolling','-config.json','telegramUsername','full','\x20mode','Unauthorized\x20attempt\x20to\x20get\x20logs','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','bot','getMonth','3000','send','apiSecret','timeshift','login\x20not\x20required','replace','bb/','static','env','api-eu.mixpanel.com','child_process','bbUsername','then','padStart','\x20(2)','assign','get-portfolio','update-bot','get','idling\x20bot\x20\x20\x20|\x20Bot\x20','data','new-disabled','value','*$1*','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','.zip','createWriteStream','getDate','</b>\x20?','Failed\x20to\x20download\x20','invalid\x20credentials','telegramChatId','starting\x20bot\x20|\x20Bot\x20','manual','all','placeOrder','stopped','5\x20min','(((.+)+)+)+$','headers','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','randomFillSync','includes','starting\x20new\x20bot\x20|\x20Bot\x20','keys','404\x20Not\x20Found','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','headless','output-001.log','updatebotmanager','-----------------------------------------------------------------------------------','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','socket','catch','ipc','name','get-logs','HTML','No\x20authentication\x20token','order','zip/','bb-settings.json','remoteAddress','pidRefreshToken','set','readdirSync','max','lowdb','backup/','whitelistEnabled','polling_error','Error:\x20Invalid\x20argument\x20','disconnect','2FA\x20required','toggleBotMode','2FA\x20login\x20required','sign','sendPortfolioTelegram','clients','clientip','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','loginRequired','/:bot/portfolio','/help\x20-\x20show\x20available\x20commands\x0a','split','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','latestversion','mode','search','blacklist','output-003.log','getSeconds','backup','get-messages','inherit','randomBytes','existsSync','secure','Notifications\x20disabled\x0a','/:bot','Notifications\x20enabled','status','sendFile','yargs/yargs','alerts','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','timestamp','add','cloneDeep','3824400jRayiE','args','bot-','telegram','Unauthorized\x20attempt\x20to\x20log\x20out','lastmsgtelegram','disabled\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Bot\x20Mgr\x20>\x20','settings.','connected','RSA-OAEP','Bot\x20','number','Notifications\x20enabled\x0a','NTBA_FIX_319','host','<b>Telegram\x20Bot\x20Status:</b>\x0a','2FA','store-headless','sendMessage','Alerts','removeAllListeners','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','getMinutes','login\x20required','0.0.0','username','***','crypto','Unauthorized\x20attempt\x20to\x20download\x20','lowdb/adapters/FileSync','add-bot','hashSync','find','cancel-loading','Invalid\x20Telegram\x20token','/restart\x20-\x20restart\x20bot(s)\x0a'];_0x2935=function(){return _0x4517ab;};return _0x2935();}function sendTelegram(_0x4ca9fc,_0x5edd64){const _0x2ba4ad=_0x575907;if(settings[_0x2ba4ad(0x222)]){if(settings[_0x2ba4ad(0x9f)]==_0x2ba4ad(0x13c)||(_0x5edd64[_0x2ba4ad(0xe5)]=='error'||_0x5edd64[_0x2ba4ad(0xe5)]==_0x2ba4ad(0xfd)||_0x5edd64[_0x2ba4ad(0xe5)]==_0x2ba4ad(0x1ba))&&settings[_0x2ba4ad(0x9f)]==_0x2ba4ad(0x182)||_0x5edd64[_0x2ba4ad(0xe5)]==_0x2ba4ad(0x155)&&settings[_0x2ba4ad(0x9f)]=='orders'){if(tgBot&&settings[_0x2ba4ad(0x139)]){if(_0x5edd64[_0x2ba4ad(0x223)])tgBot[_0x2ba4ad(0x19b)](settings[_0x2ba4ad(0x139)],_0x5edd64['botname']+_0x2ba4ad(0x1fe)+_0x5edd64[_0x2ba4ad(0x1e2)])[_0x2ba4ad(0x14f)](_0x439f4e=>{telegramError(_0x439f4e);});else tgBot[_0x2ba4ad(0x19b)](settings[_0x2ba4ad(0x139)],_0x2ba4ad(0x193)+_0x4ca9fc+_0x2ba4ad(0x1fe)+_0x5edd64[_0x2ba4ad(0x1e2)])[_0x2ba4ad(0x14f)](_0x31e373=>{telegramError(_0x31e373);});}}}}async function sendTelegramMsg(_0x37bc07,_0x3ebf3d='HTML'){const _0x13a481=_0x575907;return settings['telegramEnabled']&&tgBot&&settings[_0x13a481(0x139)]?(await tgBot[_0x13a481(0x19b)](settings['telegramChatId'],_0x37bc07,{'parse_mode':_0x3ebf3d})[_0x13a481(0x14f)](_0x228521=>{telegramError(_0x228521);}),!![]):![];}function getDeviceWithIp(_0x2a6ea4){const _0x59943c=_0x575907;return devices[_0x59943c(0x1a9)](_0x1a362c=>_0x1a362c['ip']===_0x2a6ea4);}function temporaryAccess2FA(_0x22ee94,_0x5514dd){const _0x53e642=_0x575907;let _0x22fa0a=new Date(),_0x123c16=![];if(lastIpApproval){if(_0x22fa0a-lastIpApproval<0x1388)_0x123c16=!![];}lastIpApproval=new Date();if(_0x123c16)return;tgBot&&settings[_0x53e642(0x139)]&&(tgBot[_0x53e642(0xc4)](_0x53e642(0x215)),tgBot['sendMessage'](settings['telegramChatId'],_0x53e642(0x1b1)+normalizeIP(_0x5514dd)[_0x53e642(0x22a)]+'</b>\x20?',{'parse_mode':_0x53e642(0x153),'reply_markup':{'inline_keyboard':[[{'text':_0x53e642(0x13f),'callback_data':'5'},{'text':_0x53e642(0x1db),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x53e642(0x1e6)}]]}})[_0x53e642(0x14f)](_0x1fb9d0=>{telegramError(_0x1fb9d0);}),tgBot['on'](_0x53e642(0x215),async _0x4505d2=>{const _0x5c6f5c=_0x53e642,_0x5ab1cf=_0x4505d2['data'],_0x284a15=_0x4505d2[_0x5c6f5c(0x205)];tgBot[_0x5c6f5c(0x1f1)](_0x4505d2['id'])[_0x5c6f5c(0x126)](async()=>{const _0x2464cd=_0x5c6f5c;devices[_0x22ee94][_0x2464cd(0x1b7)]={'clientip':_0x5514dd,'timestamp':new Date()['getTime'](),'expiry':_0x5ab1cf},_0x5ab1cf!=_0x2464cd(0x1e6)?(await tgBot[_0x2464cd(0x19b)](_0x284a15['chat']['id'],_0x2464cd(0x1e3)+_0x5ab1cf+_0x2464cd(0x214),{'parse_mode':_0x2464cd(0x153)})[_0x2464cd(0x14f)](_0x471893=>{telegramError(_0x471893);}),io['to'](_0x22ee94)[_0x2464cd(0xf3)](_0x2464cd(0x17f),{'access':{'allow':![],'reason':_0x2464cd(0xa5),'token':null}})):(await tgBot[_0x2464cd(0x19b)](_0x284a15[_0x2464cd(0xe1)]['id'],_0x2464cd(0xd3))[_0x2464cd(0x14f)](_0x29b5cb=>{telegramError(_0x29b5cb);}),io['to'](_0x22ee94)['emit'](_0x2464cd(0x17f),{'access':{'allow':![],'reason':_0x2464cd(0xef),'token':null}}));}),tgBot[_0x5c6f5c(0xc4)]('callback_query');}));}function loginAccess2FA(_0xa1fac,_0x430498){const _0x3c2e5b=_0x575907;tgBot&&settings['telegramChatId']&&(tgBot[_0x3c2e5b(0xc4)](_0x3c2e5b(0x215)),tgBot[_0x3c2e5b(0x19b)](settings[_0x3c2e5b(0x139)],_0x3c2e5b(0x1ce)+normalizeIP(_0x430498)[_0x3c2e5b(0x22a)]+_0x3c2e5b(0x136),{'parse_mode':_0x3c2e5b(0x153),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3c2e5b(0x1e6),'callback_data':'reject'}]]}})[_0x3c2e5b(0x14f)](_0x4957f1=>{telegramError(_0x4957f1);}),tgBot['on'](_0x3c2e5b(0x215),async _0x37c531=>{const _0x45dc6f=_0x3c2e5b,_0x1d21ee=_0x37c531[_0x45dc6f(0x12e)],_0x5cd4e5=_0x37c531[_0x45dc6f(0x205)];tgBot['answerCallbackQuery'](_0x37c531['id'])[_0x45dc6f(0x126)](async()=>{const _0x557615=_0x45dc6f;devices[_0xa1fac][_0x557615(0x203)]={'clientip':_0x430498,'timestamp':new Date()[_0x557615(0x22b)](),'expiry':_0x1d21ee},_0x1d21ee!='reject'?(await tgBot['sendMessage'](_0x5cd4e5[_0x557615(0xe1)]['id'],_0x557615(0x9b),{'parse_mode':_0x557615(0x153)})[_0x557615(0x14f)](_0x36b07f=>{telegramError(_0x36b07f);}),io['to'](_0xa1fac)[_0x557615(0xf3)](_0x557615(0x17f),{'access':{'allow':![],'reason':_0x557615(0xa5),'token':null}})):(await tgBot[_0x557615(0x19b)](_0x5cd4e5['chat']['id'],'Login\x20rejected')[_0x557615(0x14f)](_0x379182=>{telegramError(_0x379182);}),io['to'](_0xa1fac)[_0x557615(0xf3)](_0x557615(0x17f),{'access':{'allow':![],'reason':_0x557615(0x1ad),'token':null}}));}),tgBot['removeListener'](_0x45dc6f(0x215));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x337012=_0x575907;return dbConfig[_0x337012(0x12c)](_0x337012(0x220))[_0x337012(0x201)]('botID')[_0x337012(0x10b)]({'status':_0x337012(0x212)})[_0x337012(0x130)]()||[];}function getDisabledBots(){const _0x1c64d6=_0x575907;return dbConfig[_0x1c64d6(0x12c)]('bots')['sortBy']('botID')[_0x1c64d6(0x10b)]({'status':_0x1c64d6(0xe3)})[_0x1c64d6(0x130)]()||[];}function getBotAttributes(_0x2a66d6){const _0x4e41bb=_0x575907;let _0x1896e4={};const _0x591c5f=configpath+_0x4e41bb(0x189)+_0x2a66d6+_0x4e41bb(0x112),_0x38ad83=fs['existsSync'](_0x591c5f);if(_0x38ad83){const _0x35c15e=fs['readFileSync'](_0x591c5f);try{const _0x576f85=JSON[_0x4e41bb(0x20c)](_0x35c15e),_0x3fb361=_0x576f85?_0x576f85['bot'][0x0][_0x4e41bb(0x149)]:![];_0x1896e4[_0x4e41bb(0x171)]=_0x3fb361?_0x4e41bb(0x105):_0x4e41bb(0x13b),_0x1896e4[_0x4e41bb(0x101)]=_0x576f85?_0x576f85[_0x4e41bb(0x118)][0x0][_0x4e41bb(0x101)]:_0x4e41bb(0x193)+_0x2a66d6;}catch(_0x5d08c9){_0x1896e4['mode']=_0x4e41bb(0x13b),_0x1896e4['botname']=_0x4e41bb(0x193)+_0x2a66d6;}}else _0x1896e4[_0x4e41bb(0x171)]=_0x4e41bb(0x13b),_0x1896e4[_0x4e41bb(0x101)]=_0x4e41bb(0x193)+_0x2a66d6;return _0x1896e4;}function getBotsWithMode(){const _0x1b9cd3=_0x575907,_0x3c27b0=dbConfig['get']('bots')[_0x1b9cd3(0x201)](_0x1b9cd3(0xb8))[_0x1b9cd3(0x130)]()||[];return _0x3c27b0[_0x1b9cd3(0x10f)](_0x9a259=>{const _0x22b477=_0x1b9cd3;let _0x2ab59b=getBotAttributes(_0x9a259[_0x22b477(0xb8)]);_0x9a259[_0x22b477(0x171)]=_0x2ab59b[_0x22b477(0x171)];}),_0x3c27b0;}async function initUser(){const _0x95af95=_0x575907;if(!settings[_0x95af95(0xbb)]){const _0x1b33a4=uuidRandom();mixpanel[_0x95af95(0x1b4)](_0x1b33a4),updateSetting(_0x95af95(0xbb),_0x1b33a4);}}async function initSecure(){const _0x46809b=_0x575907;let _0x49aa79=getSecure();if(!_0x49aa79['hasOwnProperty'](_0x46809b(0x210))){let _0xf865b=await generateKeys();_0x49aa79[_0x46809b(0xcc)]=_0xf865b['publicKey'],_0x49aa79[_0x46809b(0xf4)]=_0xf865b[_0x46809b(0xf4)],_0x49aa79[_0x46809b(0x210)]=crypto[_0x46809b(0x179)](0x20)[_0x46809b(0x1c5)](_0x46809b(0x1f2));;storeSecure(_0x49aa79);}}function getSettings(){const _0x5853d1=_0x575907;return dbSettings[_0x5853d1(0x12c)]('settings')[_0x5853d1(0x130)]()||{};}function getSecure(){const _0x2661d9=_0x575907;return dbSecure['get'](_0x2661d9(0x17b))[_0x2661d9(0x130)]()||{};}function getBlacklist(){const _0x34fb74=_0x575907;return dbSecure['get']('blacklist')[_0x34fb74(0x130)]()||[];}function broadcastToBots(_0x574ce9,_0x386dc1){const _0x5c58a2=_0x575907;config[_0x5c58a2(0x10f)](_0x252799=>{const _0x20265d=_0x5c58a2;if(_0x252799[_0x20265d(0x17f)]=='enabled'&&_0x252799['live']=='running'){if(pid[_0x252799[_0x20265d(0xb8)]])pid[_0x252799[_0x20265d(0xb8)]][_0x20265d(0x11b)]({[_0x574ce9]:_0x386dc1});}});}function storeSettings(_0x57a6ef,_0x4926a5=![]){const _0x3afc6a=_0x575907;_0x57a6ef={...settings,..._0x57a6ef};if(_0x4926a5&&_0x57a6ef['bbPassword']!='************'&&_0x57a6ef[_0x3afc6a(0x202)]!=_0x3afc6a(0x1a3)&&_0x57a6ef[_0x3afc6a(0x202)]!=''){const _0x5d3f88=crypt[_0x3afc6a(0x1c1)](secure[_0x3afc6a(0xf4)],_0x57a6ef[_0x3afc6a(0x202)])[_0x3afc6a(0x205)][_0x3afc6a(0x16e)]('@')[0x0],_0x1c2a08=bcrypt['hashSync'](_0x5d3f88,saltRounds);_0x57a6ef={..._0x57a6ef,'bbPassword':_0x1c2a08};}if(_0x4926a5&&_0x57a6ef['telegramToken']!=_0x3afc6a(0x103)&&_0x57a6ef[_0x3afc6a(0xa4)]!=_0x3afc6a(0x1a3)&&_0x57a6ef[_0x3afc6a(0xa4)]!=''){const _0x360cf0=crypt[_0x3afc6a(0x1c1)](secure[_0x3afc6a(0xf4)],_0x57a6ef[_0x3afc6a(0xa4)])[_0x3afc6a(0x205)][_0x3afc6a(0x16e)]('@')[0x0];_0x57a6ef={..._0x57a6ef,'telegramToken':_0x360cf0};}const _0x51adcf=_0x57a6ef['telegramToken']!=_0x3afc6a(0x103)&&_0x57a6ef[_0x3afc6a(0xa4)]!=settings[_0x3afc6a(0xa4)]||_0x57a6ef[_0x3afc6a(0x113)]!=settings[_0x3afc6a(0x113)],_0x157347=_0x57a6ef[_0x3afc6a(0xa4)]==''||_0x57a6ef['telegramUsername']=='';if(_0x51adcf)_0x57a6ef[_0x3afc6a(0x9f)]=_0x3afc6a(0x13c);for(const [_0x47ab5d,_0x10f8d6]of Object['entries'](_0x57a6ef)){if(_0x47ab5d==_0x3afc6a(0xa4)&&_0x10f8d6==_0x3afc6a(0x103)){_0x57a6ef['telegramToken']=settings[_0x3afc6a(0xa4)];continue;};if(_0x47ab5d==_0x3afc6a(0x202)&&_0x10f8d6==_0x3afc6a(0x103)){_0x57a6ef[_0x3afc6a(0x202)]=settings['bbPassword'];continue;};dbSettings[_0x3afc6a(0x15a)](_0x3afc6a(0x190)+_0x47ab5d,_0x10f8d6)[_0x3afc6a(0xaf)]();}settings=_0x57a6ef,io['to']('botmanager')[_0x3afc6a(0xf3)](_0x3afc6a(0x221),cleanSettings()),broadcastToBots(_0x3afc6a(0x11d),settings[_0x3afc6a(0x11d)]);if(_0x51adcf&&!_0x157347)initTelegram();if(_0x51adcf&&_0x157347)disableTelegram();getAllClients()[_0x3afc6a(0x10f)](_0xaedf8e=>{const _0x3deab6=_0x3afc6a;getSocket(_0xaedf8e['id'])[_0x3deab6(0xf3)](_0x3deab6(0x17f),{'access':{'allow':![],'reason':'reload','token':null}});});}function _0x215f(_0xf09cd0,_0x33b9f3){const _0x16a3d7=_0x2935();return _0x215f=function(_0x3d10aa,_0x4f9e49){_0x3d10aa=_0x3d10aa-0x9a;let _0x2935b5=_0x16a3d7[_0x3d10aa];return _0x2935b5;},_0x215f(_0xf09cd0,_0x33b9f3);}function updateSetting(_0x4350fd,_0x1bcd67){const _0x37aafb=_0x575907;dbSettings['set'](_0x37aafb(0x190)+_0x4350fd,_0x1bcd67)[_0x37aafb(0xaf)](),settings=getSettings(),io['to'](_0x37aafb(0x1cb))['emit'](_0x37aafb(0x221),cleanSettings());}function storeSecure(_0x2102bd){const _0x27d04d=_0x575907;dbSecure[_0x27d04d(0x12c)](_0x27d04d(0x17b))[_0x27d04d(0xae)](_0x2102bd)[_0x27d04d(0xaf)](),secure=_0x2102bd;}function addBlacklist(_0x13d179){const _0x543c22=_0x575907;cleanBlacklist();let _0x1adc1d;devices[_0x13d179]['telegramIpApproval']?_0x1adc1d=Math[_0x543c22(0x15c)](devices[_0x13d179]['telegramIpApproval'][_0x543c22(0x226)],loginExpiry):_0x1adc1d=loginExpiry,dbSecure[_0x543c22(0x12c)](_0x543c22(0x173))['push']({'expiry':new Date()['getTime']()+_0x1adc1d*0x3c*0x3e8,'token':devices[_0x13d179][_0x543c22(0xf7)][_0x543c22(0x21d)]})[_0x543c22(0xaf)](),blacklist=dbSecure[_0x543c22(0x12c)](_0x543c22(0x173))[_0x543c22(0x130)]();}function cleanBlacklist(){const _0xcb0ef3=_0x575907;let _0xc95bef=dbSecure['get'](_0xcb0ef3(0x173))[_0xcb0ef3(0x186)]()[_0xcb0ef3(0x130)](),_0x135fbb=new Date()[_0xcb0ef3(0x22b)]();_0xc95bef[_0xcb0ef3(0x10f)](_0x23e253=>{const _0x21d225=_0xcb0ef3;_0x23e253[_0x21d225(0x226)]<_0x135fbb&&dbSecure['get'](_0x21d225(0x173))[_0x21d225(0x1d6)]({'expiry':_0x23e253[_0x21d225(0x226)]})[_0x21d225(0xaf)]();});}function initStates(){let _0x2e37d5=getConfiguration();_0x2e37d5['forEach'](_0x188f41=>{const _0x58e9f7=_0x215f;_0x188f41['live']=_0x58e9f7(0x13e);}),storeConfiguration(_0x2e37d5);}function onKeys(){const _0x1f925d=new RSA();return new Promise(_0x156786=>{_0x1f925d['generateKeyPairAsync']()['then'](_0x33aaee=>{_0x156786(_0x33aaee);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5c5bf6=_0x575907;let _0x4cc0d3=getSettings(),_0x2d19ad=![];!_0x4cc0d3[_0x5c5bf6(0xd1)](_0x5c5bf6(0x18c))&&(_0x4cc0d3[_0x5c5bf6(0x18c)]=0x0,_0x2d19ad=!![]);!_0x4cc0d3[_0x5c5bf6(0xd1)](_0x5c5bf6(0x1cd))&&(_0x4cc0d3[_0x5c5bf6(0x1cd)]=0x0,_0x2d19ad=!![]);!_0x4cc0d3[_0x5c5bf6(0xd1)]('latestversion')&&(_0x4cc0d3[_0x5c5bf6(0x170)]=_0x5c5bf6(0x1a1),_0x2d19ad=!![]);if(_0x2d19ad)storeSettings(_0x4cc0d3);}function storeConfiguration(_0x15eb98){const _0x5ab9ce=_0x575907;dbConfig[_0x5ab9ce(0x12c)](_0x5ab9ce(0x220))[_0x5ab9ce(0x1d6)]()[_0x5ab9ce(0xaf)](),_0x15eb98[_0x5ab9ce(0x10f)](_0x31f411=>{const _0x1da580=_0x5ab9ce;delete _0x31f411[_0x1da580(0x171)];}),dbConfig['get'](_0x5ab9ce(0x220))[_0x5ab9ce(0xae)](..._0x15eb98)['write'](),config=_0x15eb98;}function resetPassword(){const _0x2ed34f=_0x575907;tgBot&&settings['telegramChatId']&&(tgBot[_0x2ed34f(0xc4)]('callback_query'),tgBot[_0x2ed34f(0x19b)](settings['telegramChatId'],_0x2ed34f(0x148),{'parse_mode':_0x2ed34f(0x153),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2ed34f(0x1bc)},{'text':'no','callback_data':'no'}]]}})[_0x2ed34f(0x14f)](_0x474734=>{telegramError(_0x474734);}),tgBot['on'](_0x2ed34f(0x215),async _0x1e528c=>{const _0x163378=_0x2ed34f,_0x11fd74=_0x1e528c[_0x163378(0x12e)],_0x40507c=_0x1e528c[_0x163378(0x205)];tgBot[_0x163378(0x1f1)](_0x1e528c['id'])[_0x163378(0x126)](async()=>{const _0x246144=_0x163378;if(_0x11fd74!='no'){const _0x30014c=0xf,_0x185707=_0x246144(0x1f0),_0x390087=Array[_0x246144(0xea)](crypto[_0x246144(0x143)](new Uint32Array(_0x30014c)))[_0x246144(0xff)](_0x4bf255=>_0x185707[_0x4bf255%_0x185707['length']])[_0x246144(0x1ca)](''),_0x269426=bcrypt[_0x246144(0x1a8)](_0x390087,saltRounds);storeSettings({'bbPassword':_0x269426}),await tgBot[_0x246144(0x19b)](_0x40507c[_0x246144(0xe1)]['id'],_0x246144(0x9c)+_0x390087,{'parse_mode':_0x246144(0x153)})['catch'](_0x512bb0=>{telegramError(_0x512bb0);});}else await tgBot[_0x246144(0x19b)](_0x40507c[_0x246144(0xe1)]['id'],'Password\x20reset\x20rejected')['catch'](_0x58b458=>{telegramError(_0x58b458);});}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x335459=_0x575907,_0x1d3920=new Date();return _0x1d3920[_0x335459(0x1fc)]()+'/'+(_0x1d3920[_0x335459(0x119)]()+0x1)[_0x335459(0x1c5)]()[_0x335459(0x127)](0x2,'0')+'/'+_0x1d3920[_0x335459(0x135)]()[_0x335459(0x1c5)]()[_0x335459(0x127)](0x2,'0')+'\x20'+_0x1d3920[_0x335459(0xcb)]()['toString']()['padStart'](0x2,'0')+':'+_0x1d3920[_0x335459(0x19f)]()['toString']()[_0x335459(0x127)](0x2,'0')+':'+_0x1d3920[_0x335459(0x175)]()[_0x335459(0x1c5)]()[_0x335459(0x127)](0x2,'0');}function getTimeStamp(){const _0x189329=_0x575907,_0x4b4d68=shiftedTime();return _0x4b4d68['getFullYear']()+'/'+(_0x4b4d68[_0x189329(0x119)]()+0x1)[_0x189329(0x1c5)]()[_0x189329(0x127)](0x2,'0')+'/'+_0x4b4d68[_0x189329(0x135)]()[_0x189329(0x1c5)]()[_0x189329(0x127)](0x2,'0')+'\x20'+_0x4b4d68[_0x189329(0xcb)]()[_0x189329(0x1c5)]()[_0x189329(0x127)](0x2,'0')+':'+_0x4b4d68[_0x189329(0x19f)]()[_0x189329(0x1c5)]()[_0x189329(0x127)](0x2,'0')+':'+_0x4b4d68[_0x189329(0x175)]()[_0x189329(0x1c5)]()[_0x189329(0x127)](0x2,'0');}function shiftedTime(){const _0x4e45d9=_0x575907,_0x376b85=new Date();let _0xe166c0=_0x376b85;if(settings[_0x4e45d9(0x11d)]&&settings[_0x4e45d9(0x11d)]!==0x0)_0xe166c0=fns[_0x4e45d9(0x185)](_0x376b85,{'hours':settings[_0x4e45d9(0x11d)]});return _0xe166c0;}function startScheduler(){const _0x26682a=_0x575907,_0x5e3fc1=new Date()['getUTCHours'](),_0x411940=shiftedTime()[_0x26682a(0xcb)]();_0x411940==0x4&&backupConfigFiles();_0x411940==0x0&&rotateLogFiles();_0x5e3fc1%0x6==0x0&&triggerAnalytics();_0x5e3fc1%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1f4e88=_0x575907;fs[_0x1f4e88(0x15b)](configpath,{'withFileTypes':!![]})[_0x1f4e88(0x10f)](_0x40c383=>{const _0x4c6b87=_0x1f4e88;if(!_0x40c383[_0x4c6b87(0x1d2)]())fs[_0x4c6b87(0x21f)](configpath+_0x40c383[_0x4c6b87(0x151)],configbackuppath+_0x40c383['name']);});}function rotateLogFiles(){const _0x39fd86=_0x575907,_0x5b34ef=fs[_0x39fd86(0x21b)](logspath+_0x39fd86(0xa1)),_0x4ed229=_0x5b34ef['size']/0x400;if(_0x4ed229>0x32){let _0x43a056=fs[_0x39fd86(0x15b)](logspath,{'withFileTypes':!![]});_0x43a056[_0x39fd86(0x1e9)]((_0x5d06e3,_0x5a32a4)=>_0x5d06e3['name']<_0x5a32a4[_0x39fd86(0x151)]?0x1:_0x5a32a4['name']<_0x5d06e3[_0x39fd86(0x151)]?-0x1:0x0),_0x43a056[_0x39fd86(0x10f)](_0x1ed45d=>{const _0x36d1e2=_0x39fd86;if(_0x1ed45d[_0x36d1e2(0x151)]==_0x36d1e2(0xf1))fs[_0x36d1e2(0x21f)](logspath+_0x1ed45d[_0x36d1e2(0x151)],logspath+_0x36d1e2(0x174));if(_0x1ed45d[_0x36d1e2(0x151)]==_0x36d1e2(0x14a))fs[_0x36d1e2(0x21f)](logspath+_0x1ed45d['name'],logspath+_0x36d1e2(0xf1));_0x1ed45d['name']==_0x36d1e2(0xa1)&&(fs[_0x36d1e2(0x21f)](logspath+_0x1ed45d[_0x36d1e2(0x151)],logspath+_0x36d1e2(0x14a)),fs[_0x36d1e2(0x20f)](logspath+_0x1ed45d[_0x36d1e2(0x151)],''));});}}async function zipFiles(_0x57b902){const _0x3e98ef=_0x575907;let _0x59716b;if(_0x57b902=='logs')_0x59716b=logspath;if(_0x57b902==_0x3e98ef(0x176))_0x59716b=configpath;let _0x3b0348=fs[_0x3e98ef(0x15b)](_0x59716b,{'withFileTypes':!![]});const _0x1d1857=new require('node-zip')();_0x3b0348['forEach'](_0xfac1c5=>{const _0x5325c7=_0x3e98ef;if(!_0xfac1c5[_0x5325c7(0x1d2)]()){let _0x557f11=fs['readFileSync'](_0x59716b+_0xfac1c5[_0x5325c7(0x151)]);const _0x970f82=/^bot-[0-9]{3}-config.json$/,_0x5482a4=_0x970f82[_0x5325c7(0x1e4)](_0xfac1c5[_0x5325c7(0x151)]);if(_0x5482a4){const _0x55deaa=JSON[_0x5325c7(0x20c)](_0x557f11);_0x55deaa['bot'][0x0][_0x5325c7(0x20d)]='***',_0x55deaa[_0x5325c7(0x118)][0x0][_0x5325c7(0x11c)]='***',_0x557f11=JSON[_0x5325c7(0x213)](_0x55deaa,null,0x2);}if(_0xfac1c5[_0x5325c7(0x151)]==_0x5325c7(0x157)){const _0x33dacd=JSON['parse'](_0x557f11);if(_0x33dacd[_0x5325c7(0x221)][_0x5325c7(0x16b)])_0x33dacd[_0x5325c7(0x221)][_0x5325c7(0x16b)]=![];if(_0x33dacd[_0x5325c7(0x221)]['bbPassword'])_0x33dacd[_0x5325c7(0x221)]['bbPassword']=_0x5325c7(0x1a3);if(_0x33dacd[_0x5325c7(0x221)][_0x5325c7(0xa4)])_0x33dacd[_0x5325c7(0x221)][_0x5325c7(0xa4)]='***';if(_0x33dacd[_0x5325c7(0x221)][_0x5325c7(0x139)])_0x33dacd['settings'][_0x5325c7(0x139)]=null;_0x557f11=JSON['stringify'](_0x33dacd,null,0x2);}if(_0xfac1c5[_0x5325c7(0x151)]!=_0x5325c7(0x109))_0x1d1857['file'](_0xfac1c5['name'],_0x557f11);}});const _0x4b40c7=_0x1d1857[_0x3e98ef(0x21a)]({'base64':![],'compression':_0x3e98ef(0x1d3)});fs['writeFileSync'](zippath+(_0x57b902+_0x3e98ef(0x133)),_0x4b40c7,'binary');}async function getPublicIp(){const _0x456007=_0x575907;try{const _0x502ecd=await axios[_0x456007(0x12c)](_0x456007(0x1ee));publicip=_0x502ecd[_0x456007(0x12e)]['ip'];}catch(_0x4e8e5c){}}async function triggerAnalytics(){const _0xdb78c=_0x575907;if(!publicip)await getPublicIp();const _0x439a4f=getBotsWithMode();let _0x34e613=0x0;_0x439a4f['forEach'](_0x2a6ae5=>{const _0x2b0a95=_0x215f;if(_0x2a6ae5[_0x2b0a95(0x17f)]===_0x2b0a95(0x212))_0x34e613++;}),mixpanel[_0xdb78c(0x1b5)](_0xdb78c(0x1f7),{'distinct_id':settings[_0xdb78c(0xbb)],'ip':publicip,'version':serverversion,'numbots':_0x439a4f[_0xdb78c(0x9a)],'numbotsenabled':_0x34e613});}async function getMessages(){const _0x4253c5=_0x575907,_0x52e54e=_0x4253c5(0xa7),_0x278773=new GraphQLClient(_0x52e54e),_0x5d29a0={'authorization':_0x4253c5(0x1d9)},_0x4dbce4=serverversion[_0x4253c5(0x16e)]('.'),_0x331f62=_0x4dbce4[0x0]+'.'+_0x4dbce4[0x1],_0x101f6d=Math['min'](settings[_0x4253c5(0x18c)],settings[_0x4253c5(0x1cd)]),_0x364ab6={'last':parseInt(_0x101f6d),'bbm':_0x331f62},_0x1de2fe=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x6d1350;try{_0x6d1350=await _0x278773[_0x4253c5(0xb4)](_0x1de2fe,_0x364ab6,_0x5d29a0);}catch(_0x12a909){}if(_0x6d1350&&_0x6d1350[_0x4253c5(0xf2)]){let _0x5b3ac8=settings[_0x4253c5(0x18c)];newMessages=[];for(const _0x13ebf7 of _0x6d1350[_0x4253c5(0xf2)]){newMessages[_0x4253c5(0xae)](_0x13ebf7);if(_0x13ebf7[_0x4253c5(0xc8)])updateSetting(_0x4253c5(0x170),_0x13ebf7[_0x4253c5(0xc8)]);let _0xcb63b2=_0x13ebf7['bbvNew']?serverversion>=_0x13ebf7[_0x4253c5(0xc8)]:![];if(!_0xcb63b2&&_0x13ebf7[_0x4253c5(0x194)]>_0x5b3ac8){if(_0x13ebf7[_0x4253c5(0xda)]===_0x4253c5(0x227)||serverversion[_0x4253c5(0x21e)](_0x13ebf7['bbvReceive'])){let _0x14be2e=''+_0x13ebf7[_0x4253c5(0xe6)]+'\x0a\x0a'+_0x13ebf7[_0x4253c5(0x205)];const _0x543349=await sendTelegramMsg(toTelegramMarkdown(_0x14be2e),_0x4253c5(0xab));if(_0x543349)_0x5b3ac8=_0x13ebf7[_0x4253c5(0x194)];}}}updateAvailable=isNewerVersion(settings[_0x4253c5(0x170)],serverversion),updateSetting(_0x4253c5(0x18c),_0x5b3ac8),emitMessages();}}function emitMessages(){const _0x55177b=_0x575907,_0x237898=settings[_0x55177b(0x1cd)];let _0x15a692=[];newMessages[_0x55177b(0x10f)](_0x581d17=>{const _0x598efd=_0x55177b;_0x581d17[_0x598efd(0x194)]>_0x237898&&_0x15a692['push'](_0x581d17);}),_0x15a692[_0x55177b(0x9a)]>0x0&&getAllClients()[_0x55177b(0x10f)](_0x227ccb=>{getSocket(_0x227ccb['id'])['emit']('message',_0x15a692);});}function confirmMessage(_0x44b591){const _0x527fbf=_0x575907;updateSetting(_0x527fbf(0x1cd),Number(_0x44b591));}function isNewerVersion(_0x29d15c,_0xc05d){const _0x5863bc=_0x575907,_0xe9a982=_0xc05d[_0x5863bc(0x16e)]('.'),_0x514200=_0x29d15c[_0x5863bc(0x16e)]('.');for(var _0x1d112b=0x0;_0x1d112b<_0x514200[_0x5863bc(0x9a)];_0x1d112b++){const _0x799612=~~_0x514200[_0x1d112b],_0x1eff0b=~~_0xe9a982[_0x1d112b];if(_0x799612>_0x1eff0b)return!![];if(_0x799612<_0x1eff0b)return![];}return![];}function toTelegramMarkdown(_0x63cc90){const _0x2d141c=_0x575907,_0x80e95a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x557293=/\*{2}(.+?)\*{2}/gim;return _0x63cc90=_0x63cc90[_0x2d141c(0x11f)](_0x80e95a,_0x2d141c(0x1cc))[_0x2d141c(0x11f)](_0x557293,_0x2d141c(0x131)),_0x63cc90;}async function validateConfigFile(){const _0x1552d2=_0x575907,_0x292936=dbConfig[_0x1552d2(0x12c)](_0x1552d2(0x220))[_0x1552d2(0x201)](_0x1552d2(0xb8))[_0x1552d2(0x130)]()||[];if(_0x292936[_0x1552d2(0x9a)]==0x0){let _0x110322=0x0,_0x2d54d8=[];const _0x4c44eb=/^bot-([0-9]{3})-config.json$/,_0x22d8ec=fs[_0x1552d2(0x15b)](configpath);_0x22d8ec['forEach'](_0x499e81=>{const _0x52f358=_0x1552d2,_0x237250=_0x4c44eb['exec'](_0x499e81);if(_0x237250){const _0x2cc447=_0x237250[0x1];let _0x597252=getBotAttributes(_0x2cc447);_0x2d54d8[_0x52f358(0xae)]({'botID':_0x2cc447,'botname':_0x597252['botname'],'status':_0x52f358(0xe3),'live':_0x52f358(0x13e)}),_0x110322++;}}),_0x110322!=0x0&&(dbConfig[_0x1552d2(0x12c)](_0x1552d2(0x220))[_0x1552d2(0x129)](_0x2d54d8)['write'](),config=_0x2d54d8,restoredConfigFile=_0x110322);}}async function restoreConfigNotify(_0x4378a7){const _0xf3c9b3=_0x575907;let _0x34961d;if(restoredConfigFile==0x1)_0x34961d=_0xf3c9b3(0xec);else _0x34961d=_0xf3c9b3(0xf5);if(_0x4378a7)io['to'](_0xf3c9b3(0x1cb))[_0xf3c9b3(0xf3)](_0xf3c9b3(0x1f8),_0x34961d);else{logger[_0xf3c9b3(0x1b2)](_0xf3c9b3(0x14c)),logger[_0xf3c9b3(0x1b2)](_0x34961d),logger[_0xf3c9b3(0x1b2)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0xf3c9b3(0x139)]&&settings[_0xf3c9b3(0x9f)]!='orders')tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x34961d)[_0xf3c9b3(0x14f)](_0x7d20f7=>{telegramError(_0x7d20f7);});}}function validateCredentials(_0x419ec3,_0x3f63a9){const _0x7fa735=_0x575907;if(_0x419ec3['username']==settings[_0x7fa735(0x125)]&&bcrypt['compareSync'](_0x419ec3['password'],settings['bbPassword'])){if(settings[_0x7fa735(0xa6)])return{'allow':![],'reason':_0x7fa735(0x165),'token':null};else{const _0x1856e6=generateLoginToken(_0x3f63a9);return{'allow':!![],'reason':_0x7fa735(0x217),'token':_0x1856e6};}}else return{'allow':![],'reason':_0x7fa735(0x138),'token':null};}function refreshToken(_0x2dbe8f){const _0xfe9426=_0x575907,_0x24d836=generateLoginToken(_0x2dbe8f);return{'allow':!![],'reason':_0xfe9426(0x217),'token':_0x24d836};}function validateAccess(_0x178836,_0x1d22ce,_0xb89655){const _0x2cdd2a=_0x575907,_0x51270a=_0xb89655?_0xb89655:devices[_0x1d22ce]['ip'];let _0x39f30e;const _0x1de4ca=_0x38dac0=>{const _0x515d95=_0x215f;if(settings[_0x515d95(0x16b)]){if(settings[_0x515d95(0xa6)]){if(telegram2FaApproved(_0x1d22ce)){const _0x29205a=generateLoginToken(_0x1d22ce);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x29205a};}else return{'allow':![],'reason':_0x515d95(0x1a0),'token':null};}else return _0x39f30e=validToken(_0x38dac0,_0x1d22ce),_0x39f30e[_0x515d95(0xd1)](_0x515d95(0x1ba))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x38dac0}:{'allow':![],'reason':_0x515d95(0x1a0),'token':null};}else return{'allow':!![],'reason':_0x515d95(0x11e),'token':null};};if(settings[_0x2cdd2a(0x15f)]){let _0x1a2528=[...settings['whitelist'],'::1','::ffff:127.0.0.1',_0x2cdd2a(0x1ed)];if(_0x1a2528[_0x2cdd2a(0x144)](_0x51270a))return _0x1de4ca(_0x178836);else{_0x39f30e=validToken(_0x178836,_0x1d22ce);if(_0x39f30e[_0x2cdd2a(0xd1)](_0x2cdd2a(0x1ba)))return _0x1de4ca(_0x178836);else{if(telegramIpApproved(_0x1d22ce)){const _0xbe1e22=generateToken(_0x1d22ce);return _0x39f30e=_0x1de4ca(_0x178836),_0x39f30e[_0x2cdd2a(0xd0)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xbe1e22}:_0x39f30e;}else return settings[_0x2cdd2a(0xd4)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2cdd2a(0xd8),'token':null};}}}else return _0x1de4ca(_0x178836);}function timelyDecrypt(_0xaa8ef3,_0x599cf7=!![]){const _0x4ae6e1=_0x575907;if(_0xaa8ef3)try{const _0x40d89b=crypt['decrypt'](secure[_0x4ae6e1(0xf4)],_0xaa8ef3)['message'],_0x3ae6b3=_0x40d89b[_0x4ae6e1(0x16e)]('@')[0x0],_0x1eb727=_0x40d89b[_0x4ae6e1(0x16e)]('@')[0x1],_0x49f050=new Date()[_0x4ae6e1(0x22b)]();if(_0x599cf7){if(_0x49f050-_0x1eb727<maxSecretAge*0x3e8)return _0x3ae6b3;else return![];}else return _0x3ae6b3;}catch(_0x234121){return![];}else return![];}const validToken=(_0x9f4db5,_0x9f3f86)=>{const _0x2706f4=_0x575907,_0x57a229=devices[_0x9f3f86]['ip'];if(!_0x9f4db5)return{'error':_0x2706f4(0x154)};for(let _0x51b2f4 of blacklist){if(_0x51b2f4['token']==_0x9f4db5)return{'error':_0x2706f4(0x104)};}let _0x270987;try{_0x270987=jwt[_0x2706f4(0x209)](_0x9f4db5,secure['secret']+_0x9f3f86);}catch{return{'error':_0x2706f4(0xbc)};}if(!_0x270987['hasOwnProperty'](_0x2706f4(0x169))&&!_0x270987['hasOwnProperty']('username')||!_0x270987[_0x2706f4(0xd1)]('exp'))return{'error':_0x2706f4(0x1b8)};if(!_0x270987['hasOwnProperty'](_0x2706f4(0x1a2))&&_0x270987[_0x2706f4(0xd1)](_0x2706f4(0x169))){const {clientip:_0x3851f1}=_0x270987;return _0x57a229==_0x3851f1?{'success':_0x2706f4(0x1c2)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x270987[_0x2706f4(0xd1)](_0x2706f4(0x1a2))&&_0x270987[_0x2706f4(0xd1)](_0x2706f4(0x169))){const {username:_0x2349fd,clientip:_0x3cf6a3}=_0x270987;return settings[_0x2706f4(0x125)]==_0x2349fd&&_0x57a229==_0x3cf6a3?{'success':_0x2706f4(0x1c2)}:{'error':_0x2706f4(0xe9)};}}},generateLoginToken=_0x5a3e99=>{const _0x28efaf=_0x575907;if(_0x5a3e99){const _0x4db9c2=devices[_0x5a3e99]['ip'];return jwt[_0x28efaf(0x166)]({'username':settings[_0x28efaf(0x125)],'clientip':_0x4db9c2},secure[_0x28efaf(0x210)]+_0x5a3e99,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1bfcd3=>{const _0x371c22=_0x575907;if(_0x1bfcd3){const _0x3e3fd6=devices[_0x1bfcd3]['ip'];return jwt[_0x371c22(0x166)]({'clientip':_0x3e3fd6},secure[_0x371c22(0x210)]+_0x1bfcd3,{'expiresIn':devices[_0x1bfcd3]['telegramIpApproval'][_0x371c22(0x226)]*0x3c});}else return![];},telegramIpApproved=_0x58f09d=>{const _0x60d948=_0x575907;let _0x567a66=![];return devices[_0x58f09d][_0x60d948(0x1b7)]&&devices[_0x58f09d]['telegramIpApproval'][_0x60d948(0x226)]!=_0x60d948(0x1e6)&&(_0x567a66=devices[_0x58f09d][_0x60d948(0x1b7)][_0x60d948(0x169)]==devices[_0x58f09d]['ip']&&new Date()[_0x60d948(0x22b)]()-devices[_0x58f09d][_0x60d948(0x1b7)][_0x60d948(0x184)]<devices[_0x58f09d][_0x60d948(0x1b7)][_0x60d948(0x226)]*0x3c*0x3e8),_0x567a66;},telegram2FaApproved=_0x2e4f16=>{const _0xc5ae53=_0x575907;let _0x18dda3=![];return devices[_0x2e4f16][_0xc5ae53(0x203)]&&devices[_0x2e4f16]['telegram2FaApproval'][_0xc5ae53(0x226)]!=_0xc5ae53(0x1e6)&&(_0x18dda3=devices[_0x2e4f16][_0xc5ae53(0x203)][_0xc5ae53(0x169)]==devices[_0x2e4f16]['ip']&&new Date()['getTime']()-devices[_0x2e4f16]['telegram2FaApproval'][_0xc5ae53(0x184)]<devices[_0x2e4f16][_0xc5ae53(0x203)][_0xc5ae53(0x226)]*0x3c*0x3e8),_0x18dda3;},normalizeIP=_0x4c5d07=>{const _0x2367e1=_0x575907;let _0x420f88=null,_0xe03d47=null;if(ipaddr[_0x2367e1(0x22e)](_0x4c5d07)){const _0x3289c4=ipaddr['parse'](_0x4c5d07);_0x3289c4[_0x2367e1(0x1b3)]()===_0x2367e1(0x1fd)?(_0x3289c4[_0x2367e1(0x1c9)]()&&(_0x420f88=_0x3289c4['toIPv4Address']()[_0x2367e1(0x1c5)]()),_0xe03d47=_0x3289c4[_0x2367e1(0x1c5)]()):(_0x420f88=_0x3289c4[_0x2367e1(0x1c5)](),_0xe03d47=_0x3289c4['toIPv4MappedAddress']()['toString']());}return{'show':_0x420f88?_0x420f88:_0xe03d47,'store':_0xe03d47};};function sleep(_0x57ce3f){return new Promise(_0x517645=>setTimeout(_0x517645,_0x57ce3f));}