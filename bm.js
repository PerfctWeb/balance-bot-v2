const _0x5df3f6=_0xf9f9;(function(_0xc91e90,_0x563812){const _0x1a4e1f=_0xf9f9,_0x55b92e=_0xc91e90();while(!![]){try{const _0x2c1f43=parseInt(_0x1a4e1f(0x185))/0x1+parseInt(_0x1a4e1f(0x175))/0x2*(-parseInt(_0x1a4e1f(0x1d4))/0x3)+-parseInt(_0x1a4e1f(0x27b))/0x4*(parseInt(_0x1a4e1f(0x1cb))/0x5)+-parseInt(_0x1a4e1f(0x1a5))/0x6+parseInt(_0x1a4e1f(0x17c))/0x7+-parseInt(_0x1a4e1f(0x1d7))/0x8+parseInt(_0x1a4e1f(0x178))/0x9;if(_0x2c1f43===_0x563812)break;else _0x55b92e['push'](_0x55b92e['shift']());}catch(_0x5bd566){_0x55b92e['push'](_0x55b92e['shift']());}}}(_0x58a6,0xf2637));const _0x17859d=function(){let _0x338fb0=!![];return function(_0x44ea42,_0x2f7676){const _0x5b5c0a=_0x338fb0?function(){const _0x2e3bab=_0xf9f9;if(_0x2f7676){const _0x58b738=_0x2f7676[_0x2e3bab(0x168)](_0x44ea42,arguments);return _0x2f7676=null,_0x58b738;}}:function(){};return _0x338fb0=![],_0x5b5c0a;};}(),_0x5e2b1c=_0x17859d(this,function(){const _0x1ba20a=_0xf9f9;return _0x5e2b1c[_0x1ba20a(0x148)]()['search'](_0x1ba20a(0x1b5))[_0x1ba20a(0x148)]()[_0x1ba20a(0x234)](_0x5e2b1c)[_0x1ba20a(0x1cf)]('(((.+)+)+)+$');});_0x5e2b1c();'use strict';process[_0x5df3f6(0x24a)][_0x5df3f6(0x242)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x5df3f6(0x229)),fs=require('fs'),fns=require(_0x5df3f6(0x1f9)),low=require('lowdb'),path=require(_0x5df3f6(0x1b6)),crypto=require(_0x5df3f6(0x232)),Crypt=require(_0x5df3f6(0x17e))[_0x5df3f6(0x1c8)],RSA=require(_0x5df3f6(0x17e))['RSA'],bcrypt=require(_0x5df3f6(0x23c)),jwt=require('jsonwebtoken'),analyticsLib=require('analytics')[_0x5df3f6(0x20e)],googleAnalytics=require(_0x5df3f6(0x1c9))[_0x5df3f6(0x20e)],ipaddr=require(_0x5df3f6(0x1d1)),argv=require(_0x5df3f6(0x19d))(process[_0x5df3f6(0x164)][_0x5df3f6(0x1f6)](0x2))[_0x5df3f6(0x164)],PORT=argv[_0x5df3f6(0x1ae)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x5df3f6(0x249)](PORT))return console['log'](_0x5df3f6(0x1fd)+PORT+_0x5df3f6(0x15f)),process[_0x5df3f6(0x206)](0x1);const HOST=argv[_0x5df3f6(0x278)]||null,userID=argv['user']||'';let bbpath='bb/',bbpath2='';const botfile=_0x5df3f6(0x1f0),configfile=_0x5df3f6(0x27d),settingsfile=_0x5df3f6(0x18c),securefile=_0x5df3f6(0x24e);let validInstallation=!![];!fs[_0x5df3f6(0x1bf)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5df3f6(0x25e)),configpath=userID?bbpath+_0x5df3f6(0x1c7)+userID+'/':bbpath+_0x5df3f6(0x1c7),configbackuppath=configpath+_0x5df3f6(0x151);!fs[_0x5df3f6(0x1bf)](configpath)&&fs[_0x5df3f6(0x146)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x5df3f6(0x146)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5df3f6(0x16b)]({'bots':[]})[_0x5df3f6(0x259)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x5df3f6(0x1f1),'rsaStandard':_0x5df3f6(0x149)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();function _0xf9f9(_0x4a49e0,_0x2d5f18){const _0x4a79c6=_0x58a6();return _0xf9f9=function(_0x5e2b1c,_0x17859d){_0x5e2b1c=_0x5e2b1c-0x13f;let _0x58a66d=_0x4a79c6[_0x5e2b1c];return _0x58a66d;},_0xf9f9(_0x4a49e0,_0x2d5f18);}const express=require(_0x5df3f6(0x22c)),app=express(),http=require(_0x5df3f6(0x1c3))['createServer'](app);app[_0x5df3f6(0x222)](express['static'](path[_0x5df3f6(0x215)](__dirname,bbpath2,_0x5df3f6(0x218)))),app[_0x5df3f6(0x222)](express[_0x5df3f6(0x145)](path[_0x5df3f6(0x215)](__dirname,bbpath2,_0x5df3f6(0x220)))),app[_0x5df3f6(0x257)]('/',function(_0x2801c8,_0x6a79e9){const _0x10b632=_0x5df3f6;_0x6a79e9[_0x10b632(0x288)](path[_0x10b632(0x215)](__dirname,bbpath2,_0x10b632(0x218),'index.html'));}),app[_0x5df3f6(0x257)](_0x5df3f6(0x1e6),function(_0x585259,_0x6af72c){const _0x19ff99=_0x5df3f6;_0x6af72c[_0x19ff99(0x288)](path[_0x19ff99(0x215)](__dirname,bbpath2,_0x19ff99(0x220),_0x19ff99(0x17b)));}),app[_0x5df3f6(0x257)](_0x5df3f6(0x285),(_0x564d4c,_0x537dda)=>{const _0x585686=_0x5df3f6;_0x537dda[_0x585686(0x288)](path[_0x585686(0x215)](__dirname,bbpath2,_0x585686(0x220),_0x585686(0x17b)));}),app['get'](_0x5df3f6(0x17f),(_0x3bd3ea,_0x233a39)=>{const _0x389d3c=_0x5df3f6;_0x233a39[_0x389d3c(0x288)](path[_0x389d3c(0x215)](__dirname,bbpath2,'build','index.html'));}),app[_0x5df3f6(0x257)](_0x5df3f6(0x152),(_0x34f74c,_0x408ebb)=>{const _0x2eac45=_0x5df3f6;_0x408ebb[_0x2eac45(0x288)](path[_0x2eac45(0x215)](__dirname,bbpath2,'build',_0x2eac45(0x17b)));}),app[_0x5df3f6(0x257)](_0x5df3f6(0x1a6),(_0x49167b,_0x5db4b9)=>{const _0x3af5ae=_0x5df3f6;_0x5db4b9['sendFile'](path['join'](__dirname,bbpath2,_0x3af5ae(0x220),_0x3af5ae(0x17b)));}),app[_0x5df3f6(0x257)](_0x5df3f6(0x1ed),(_0xdd2e3e,_0x322c72)=>{const _0x5bf4df=_0x5df3f6;_0x322c72[_0x5bf4df(0x288)](path['join'](__dirname,bbpath2,_0x5bf4df(0x220),'index.html'));}),app[_0x5df3f6(0x257)]('/:bot/support',(_0x57c450,_0x17fb70)=>{const _0x115856=_0x5df3f6;_0x17fb70[_0x115856(0x288)](path['join'](__dirname,bbpath2,'build',_0x115856(0x17b)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x5df3f6(0x1c4))(http,{}),analytics=analyticsLib({'app':_0x5df3f6(0x174),'plugins':[googleAnalytics({'trackingId':_0x5df3f6(0x25b)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings[_0x5df3f6(0x15d)]!=''&&settings[_0x5df3f6(0x1e0)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x56c27a=_0x5df3f6;console[_0x56c27a(0x1ad)](''),console[_0x56c27a(0x1ad)](_0x56c27a(0x1ef)),logging(_0x56c27a(0x277)+PORT),console[_0x56c27a(0x1ad)]('-----------------------------------------------------------------------------------');if(config[_0x56c27a(0x248)]!=0x0)config[_0x56c27a(0x26d)](_0x97bf54=>{const _0x1b236c=_0x56c27a;if(_0x97bf54[_0x1b236c(0x188)]==_0x1b236c(0x1c2)||_0x97bf54[_0x1b236c(0x188)]==_0x1b236c(0x260))logging(_0x1b236c(0x213)+_0x97bf54[_0x1b236c(0x1ba)]+_0x1b236c(0x247)+_0x97bf54[_0x1b236c(0x1a1)]),startBot([_0x97bf54[_0x1b236c(0x1ba)],userID],{'cwd':bbpath},function(_0x4efc19){if(_0x4efc19)logging(_0x4efc19);});else(_0x97bf54[_0x1b236c(0x188)]==_0x1b236c(0x22f)||_0x97bf54[_0x1b236c(0x188)]==_0x1b236c(0x216))&&logging(_0x1b236c(0x228)+_0x97bf54[_0x1b236c(0x1ba)]+_0x1b236c(0x247)+_0x97bf54[_0x1b236c(0x1a1)]);});else!newBot&&console['log'](_0x56c27a(0x23b));if(newBot)addBot();console[_0x56c27a(0x1ad)](_0x56c27a(0x1ef)),console[_0x56c27a(0x1ad)]('');}function startSocket(){const _0x371316=_0x5df3f6;io['on'](_0x371316(0x198),_0x436c95=>{const _0x1bf1ba=_0x371316;let _0x81091d,_0x11117e,_0xca1711,_0x4ca40a,_0x3e5d3c;const _0x1ac173=_0x436c95['handshake'][_0x1bf1ba(0x274)][_0x1bf1ba(0x1e7)];_0x11117e=_0x1ac173['match'](/bot[0-9]{3}/);if(_0x11117e)_0xca1711=_0x11117e[0x0][_0x1bf1ba(0x15c)](/[0-9]{3}/);if(_0xca1711)_0x81091d=_0xca1711[0x0];else _0x81091d=_0x1bf1ba(0x19c);const _0x5b53e2=_0x436c95['handshake'][_0x1bf1ba(0x24b)]['encryptedUuid'];if(!_0x5b53e2)_0x436c95[_0x1bf1ba(0x167)]('status',{'publicKey':secure[_0x1bf1ba(0x255)]});else{_0x4ca40a=timelyDecrypt(_0x5b53e2,![]);if(!_0x4ca40a)_0x436c95[_0x1bf1ba(0x167)]('status',{'publicKey':secure[_0x1bf1ba(0x255)]});else{_0x3e5d3c=normalizeIP(_0x436c95[_0x1bf1ba(0x1d9)][_0x1bf1ba(0x20d)])[_0x1bf1ba(0x21d)];if(!devices[_0x4ca40a])devices[_0x4ca40a]={'uuid':_0x4ca40a,'access':{'token':null}};devices[_0x4ca40a]['ip']=_0x3e5d3c;const _0x24d87b=addClient(_0x436c95['id'],_0x4ca40a,_0x81091d);setAccess(_0x24d87b),_0x436c95['on'](_0x1bf1ba(0x1ff),_0x2bf317=>{const _0x2a84cb=_0x1bf1ba,_0x3c7e8e=timelyDecrypt(_0x2bf317['password']);if(_0x3c7e8e){_0x2bf317={'username':_0x2bf317[_0x2a84cb(0x239)],'password':_0x3c7e8e},devices[_0x4ca40a]['access']=validateCredentials(_0x2bf317,_0x4ca40a);if(devices[_0x4ca40a]['access'][_0x2a84cb(0x226)]==![]&&devices[_0x4ca40a]['access']['reason']==_0x2a84cb(0x235))_0x436c95['emit'](_0x2a84cb(0x188),{'access':devices[_0x4ca40a][_0x2a84cb(0x1bc)]}),loginAccess2FA(_0x4ca40a,_0x3e5d3c);else{if(devices[_0x4ca40a]['access'][_0x2a84cb(0x226)]==![]&&devices[_0x4ca40a][_0x2a84cb(0x1bc)][_0x2a84cb(0x18b)]==_0x2a84cb(0x25c))_0x436c95[_0x2a84cb(0x167)](_0x2a84cb(0x188),{'access':devices[_0x4ca40a][_0x2a84cb(0x1bc)]});else devices[_0x4ca40a]['access'][_0x2a84cb(0x226)]&&devices[_0x4ca40a][_0x2a84cb(0x1bc)][_0x2a84cb(0x18b)]==_0x2a84cb(0x1ab)&&(getClientsWithUuid(_0x4ca40a)[_0x2a84cb(0x26d)](_0x1a4ea5=>{setAccess(_0x1a4ea5);}),setTokenRefresh(_0x4ca40a),setSessionTimeout('login',_0x4ca40a));}}else logging(_0x2a84cb(0x14a));}),_0x436c95['on'](_0x1bf1ba(0x289),()=>{resetPassword();}),_0x436c95['on']('disconnect',_0x1720c7=>{removeClient(_0x436c95['id']);});}}});}function initClient(_0x2c0e96){const _0x10baf4=_0x5df3f6;if(_0x2c0e96!=_0x10baf4(0x19c)&&config[_0x10baf4(0x254)]!=''){if(pid[_0x2c0e96])pid[_0x2c0e96][_0x10baf4(0x201)]({'function':'initclient','args':null});}}function getSocket(_0x5ea86a){const _0x43ba92=_0x5df3f6;return io[_0x43ba92(0x208)][_0x43ba92(0x208)]['get'](_0x5ea86a);}function setAccess(_0x2ee0ae){const _0x23207f=_0x5df3f6,_0x1f3ac6=getSocket(_0x2ee0ae['id']),_0x22a793=_0x2ee0ae[_0x23207f(0x1b3)],_0x2f18e1=_0x2ee0ae[_0x23207f(0x26e)];devices[_0x22a793][_0x23207f(0x1bc)]=validateAccess(devices[_0x22a793][_0x23207f(0x1bc)][_0x23207f(0x28a)],_0x22a793),_0x1f3ac6[_0x23207f(0x215)](_0x22a793);if(devices[_0x22a793]['access'][_0x23207f(0x226)]){_0x1f3ac6[_0x23207f(0x215)](_0x2f18e1);if(_0x2f18e1==_0x23207f(0x19c))initializeSocketBotManager(_0x1f3ac6);else initializeSocketBot(_0x1f3ac6);initClient(_0x2f18e1);}devices[_0x22a793][_0x23207f(0x1bc)][_0x23207f(0x28a)]&&devices[_0x22a793][_0x23207f(0x1bc)][_0x23207f(0x18b)]==_0x23207f(0x16d)&&setSessionTimeout('2FA',_0x22a793),devices[_0x22a793][_0x23207f(0x1bc)][_0x23207f(0x28a)]&&devices[_0x22a793][_0x23207f(0x1bc)][_0x23207f(0x18b)]==_0x23207f(0x1df)&&setSessionTimeout(_0x23207f(0x1ff),_0x22a793),_0x1f3ac6[_0x23207f(0x167)](_0x23207f(0x188),{'status':_0x2ee0ae[_0x23207f(0x24f)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x22a793]['access'],'externalip':devices[_0x22a793]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x22a793][_0x23207f(0x1bc)]['allow']==![]&&devices[_0x22a793][_0x23207f(0x1bc)]['reason']==_0x23207f(0x1ea)&&temporaryAccess2FA(_0x22a793,devices[_0x22a793]['ip']);}function setSessionTimeout(_0x2bb692,_0x3281c9){const _0x53b972=_0x5df3f6;let _0x525a62;if(_0x2bb692=='login')_0x525a62=loginExpiry*0x3c*0x3e8;else _0x525a62=devices[_0x3281c9][_0x53b972(0x209)][_0x53b972(0x1e3)]*0x3c*0x3e8-(new Date()[_0x53b972(0x21f)]()-devices[_0x3281c9][_0x53b972(0x209)]['timestamp']);if(devices[_0x3281c9]['pidExpireLogin'])clearTimeout(devices[_0x3281c9][_0x53b972(0x16a)]);devices[_0x3281c9][_0x53b972(0x16a)]=setTimeout(()=>{const _0x9ec381=_0x53b972;if(devices[_0x3281c9][_0x9ec381(0x263)])clearTimeout(devices[_0x3281c9][_0x9ec381(0x263)]);removeSocketListeners(_0x3281c9),addBlacklist(_0x3281c9),devices[_0x3281c9][_0x9ec381(0x209)]=null,devices[_0x3281c9][_0x9ec381(0x1eb)]=null,devices[_0x3281c9][_0x9ec381(0x1bc)][_0x9ec381(0x28a)]=null,devices[_0x3281c9]['access']=validateAccess(devices[_0x3281c9][_0x9ec381(0x1bc)][_0x9ec381(0x28a)],_0x3281c9),!(devices[_0x3281c9][_0x9ec381(0x1bc)][_0x9ec381(0x226)]&&devices[_0x3281c9][_0x9ec381(0x1bc)][_0x9ec381(0x18b)]==_0x9ec381(0x275))&&(_0x2bb692==_0x9ec381(0x1ff)?io['to'](_0x3281c9)[_0x9ec381(0x167)]('status',{'access':{'allow':![],'reason':_0x9ec381(0x22a),'token':null}}):io['to'](_0x3281c9)[_0x9ec381(0x167)](_0x9ec381(0x188),{'access':{'allow':![],'reason':_0x9ec381(0x241),'token':null}})),devices[_0x3281c9][_0x9ec381(0x1bc)][_0x9ec381(0x28a)]=null;},_0x525a62);}function setTokenRefresh(_0x12524b){const _0x41ac54=_0x5df3f6;if(devices[_0x12524b][_0x41ac54(0x263)])clearTimeout(devices[_0x12524b][_0x41ac54(0x263)]);devices[_0x12524b]['pidRefreshToken']=setTimeout(()=>{const _0x40157e=_0x41ac54;getClientsWithUuid(_0x12524b)[_0x40157e(0x248)]!=0x0?(devices[_0x12524b]['access']=refreshToken(_0x12524b),io['to'](_0x12524b)['emit'](_0x40157e(0x188),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x12524b][_0x40157e(0x1bc)],'externalip':devices[_0x12524b]['ip'],'publicKey':secure[_0x40157e(0x255)],'validInstallation':validInstallation}),setTokenRefresh(_0x12524b)):clearTimeout(devices[_0x12524b][_0x40157e(0x263)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xcba8de){const _0x46f4e3=_0x5df3f6,_0x245af8=getClient(_0xcba8de['id'])['uuid'];_0xcba8de[_0x46f4e3(0x167)](_0x46f4e3(0x1d8),config),_0xcba8de[_0x46f4e3(0x167)](_0x46f4e3(0x1c5),cleanSettings()),_0xcba8de['on'](_0x46f4e3(0x23e),_0x29a5a0=>{const _0xba31ec=_0x46f4e3;if(validateAccess(_0x29a5a0,_0x245af8)[_0xba31ec(0x226)])addBot();else logging(_0xba31ec(0x205));}),_0xcba8de['on']('update-bot',(_0x50bfec,_0x33c6ae)=>{const _0x340cef=_0x46f4e3;if(validateAccess(_0x33c6ae,_0x245af8)[_0x340cef(0x226)])toggleBot(_0x50bfec[_0x340cef(0x1ba)],_0x50bfec[_0x340cef(0x188)],_0x50bfec[_0x340cef(0x1d2)]);else logging(_0x340cef(0x14c));}),_0xcba8de['on'](_0x46f4e3(0x1d6),(_0xfc01a4,_0x54330b)=>{const _0x10cd38=_0x46f4e3;if(validateAccess(_0x54330b,_0x245af8)[_0x10cd38(0x226)])deleteBot(_0xfc01a4);else logging(_0x10cd38(0x184));}),_0xcba8de['on'](_0x46f4e3(0x240),(_0x596e9f,_0x2c0e8e)=>{const _0x206366=_0x46f4e3;if(validateAccess(_0x2c0e8e,_0x245af8)[_0x206366(0x226)])storeSettings(_0x596e9f,!![]);else logging(_0x206366(0x1e4));}),_0xcba8de['on']('update-bb',_0xce0dfa=>{const _0x58e689=_0x46f4e3;if(validateAccess(_0xce0dfa,_0x245af8)['allow'])updateBB();else logging(_0x58e689(0x1ac));}),_0xcba8de['on'](_0x46f4e3(0x1f5),_0x56aaeb=>{const _0x11702b=_0x46f4e3;if(validateAccess(_0x56aaeb,_0x245af8)[_0x11702b(0x226)]){if(devices[_0x245af8][_0x11702b(0x263)])clearTimeout(devices[_0x245af8][_0x11702b(0x263)]);if(devices[_0x245af8]['pidExpireLogin'])clearTimeout(devices[_0x245af8][_0x11702b(0x16a)]);removeSocketListeners(getClient(_0xcba8de['id'])[_0x11702b(0x1b3)]),addBlacklist(_0x245af8),devices[_0x245af8][_0x11702b(0x209)]=null,devices[_0x245af8][_0x11702b(0x1eb)]=null,devices[_0x245af8][_0x11702b(0x1bc)][_0x11702b(0x28a)]=null,io['to'](getClient(_0xcba8de['id'])['uuid'])['emit'](_0x11702b(0x188),{'access':{'allow':![],'reason':_0x11702b(0x227),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x2f4f9c){const _0x2de51a=_0x5df3f6,_0x452dea=getClient(_0x2f4f9c['id'])[_0x2de51a(0x26e)],_0x30df25=getClient(_0x2f4f9c['id'])[_0x2de51a(0x1b3)];_0x2f4f9c['on'](_0x2de51a(0x204),(_0xc79e,_0x34a267)=>{const _0x79601f=_0x2de51a;if(validateAccess(_0x34a267,_0x30df25)[_0x79601f(0x226)]){if(pid[_0x452dea])pid[_0x452dea]['send']({'function':_0x79601f(0x225),'args':_0xc79e});}else logging(_0x79601f(0x186));}),_0x2f4f9c['on'](_0x2de51a(0x245),(_0x53b18d,_0x2504d9)=>{const _0x2d4824=_0x2de51a;if(validateAccess(_0x2504d9,_0x30df25)[_0x2d4824(0x226)]){if(pid[_0x452dea])pid[_0x452dea][_0x2d4824(0x201)]({'function':_0x2d4824(0x19e),'args':_0x53b18d});}else logging(_0x2d4824(0x230));}),_0x2f4f9c['on'](_0x2de51a(0x21b),(_0x45c980,_0x507c83)=>{const _0x51b291=_0x2de51a;if(validateAccess(_0x507c83,_0x30df25)[_0x51b291(0x226)]){if(pid[_0x452dea])pid[_0x452dea][_0x51b291(0x201)]({'function':'getPortfolio','args':_0x45c980});}else logging(_0x51b291(0x1e9));}),_0x2f4f9c['on']('store-configuration',(_0x48377f,_0x44d879)=>{const _0x35ed65=_0x2de51a;if(validateAccess(_0x44d879,_0x30df25)[_0x35ed65(0x226)]){if(pid[_0x452dea])pid[_0x452dea][_0x35ed65(0x201)]({'function':'storeConfiguration','args':_0x48377f});}else logging(_0x35ed65(0x211));}),_0x2f4f9c['on'](_0x2de51a(0x17d),(_0x54fa87,_0x38a6b2)=>{const _0x3646d2=_0x2de51a;if(validateAccess(_0x38a6b2,_0x30df25)['allow']){if(pid[_0x452dea])pid[_0x452dea]['send']({'function':_0x3646d2(0x156),'args':_0x54fa87});}else logging(_0x3646d2(0x196));}),_0x2f4f9c['on'](_0x2de51a(0x207),_0x5c2d1f=>{const _0x4d9c30=_0x2de51a;if(validateAccess(_0x5c2d1f,_0x30df25)[_0x4d9c30(0x226)]){if(pid[_0x452dea])pid[_0x452dea][_0x4d9c30(0x201)]({'function':_0x4d9c30(0x286),'args':null});}else logging(_0x4d9c30(0x154));}),_0x2f4f9c['on'](_0x2de51a(0x284),(_0x26da4a,_0x39398d)=>{const _0x5b7730=_0x2de51a;if(validateAccess(_0x39398d,_0x30df25)['allow']){if(pid[_0x452dea])pid[_0x452dea][_0x5b7730(0x201)]({'function':_0x5b7730(0x236),'args':_0x26da4a});}else logging(_0x5b7730(0x1d5));}),_0x2f4f9c['on'](_0x2de51a(0x189),_0x422048=>{const _0x2d71bf=_0x2de51a;if(validateAccess(_0x422048,_0x30df25)[_0x2d71bf(0x226)]){if(pid[_0x452dea])pid[_0x452dea][_0x2d71bf(0x201)]({'function':'cancelLoading','args':null});}else logging(_0x2d71bf(0x1af));}),_0x2f4f9c['on'](_0x2de51a(0x1f5),_0x2a33fc=>{const _0x32a122=_0x2de51a;if(validateAccess(_0x2a33fc,_0x30df25)[_0x32a122(0x226)]){if(devices[_0x30df25][_0x32a122(0x263)])clearTimeout(devices[_0x30df25][_0x32a122(0x263)]);if(devices[_0x30df25][_0x32a122(0x16a)])clearTimeout(devices[_0x30df25]['pidExpireLogin']);removeSocketListeners(getClient(_0x2f4f9c['id'])[_0x32a122(0x1b3)]),addBlacklist(_0x30df25),devices[_0x30df25][_0x32a122(0x209)]=null,devices[_0x30df25][_0x32a122(0x1eb)]=null,devices[_0x30df25][_0x32a122(0x1bc)][_0x32a122(0x28a)]=null,io['to'](getClient(_0x2f4f9c['id'])[_0x32a122(0x1b3)])['emit'](_0x32a122(0x188),{'access':{'allow':![],'reason':_0x32a122(0x227),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x2d99b8){const _0x43e9e1=_0x5df3f6;getClientsWithUuid(_0x2d99b8)[_0x43e9e1(0x26d)](_0x3cc4bd=>{const _0x1d5ff9=_0x43e9e1;getSocket(_0x3cc4bd['id'])[_0x1d5ff9(0x14e)]();});}function cleanSettings(){const _0x9b443e=_0x5df3f6;let _0x495267=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x495267={..._0x495267,'telegramToken':_0x9b443e(0x210)}),settings[_0x9b443e(0x16c)]&&settings[_0x9b443e(0x16c)]!=''&&(_0x495267={..._0x495267,'bbPassword':'************'}),_0x495267;}function updateBB(){const _0x2ec36e=_0x5df3f6;installingUpdate=!![],config[_0x2ec36e(0x26d)](_0x1ce5f1=>{const _0x2c7833=_0x2ec36e;restartBot(_0x1ce5f1[_0x2c7833(0x1ba)]);}),process[_0x2ec36e(0x201)]({'update':!![]},_0xedf949=>{});}function startBot(_0x2b7ed7,_0x172b1d,_0x23495e){const _0x4d14d1=_0x5df3f6;let _0x24ad5a=![];const _0xc31d5b=_0x2b7ed7[0x0];_0x172b1d={..._0x172b1d,'stdio':['inherit',_0x4d14d1(0x1a8),'inherit',_0x4d14d1(0x153)]},pid[_0xc31d5b]=childProcess[_0x4d14d1(0x21e)](botfile,_0x2b7ed7,_0x172b1d),pid[_0xc31d5b]['on'](_0x4d14d1(0x16e),_0x1846e2=>{const _0x45e69f=_0x4d14d1;switch(Object[_0x45e69f(0x276)](_0x1846e2)[0x0]){case _0x45e69f(0x1a1):updateBotName(_0xc31d5b,_0x1846e2[_0x45e69f(0x1a1)]);break;case _0x45e69f(0x188):updateStatus(_0xc31d5b,_0x1846e2[_0x45e69f(0x188)]);break;case'live':updateLive(_0xc31d5b,_0x1846e2[_0x45e69f(0x1d2)]);break;case _0x45e69f(0x20c):updateLive(_0xc31d5b,_0x1846e2['started']),io['to'](_0xc31d5b)['emit']('status',{'access':{'allow':![],'reason':_0x45e69f(0x24d),'token':null}});break;case _0x45e69f(0x157):_0x1846e2[_0x45e69f(0x157)]==_0x45e69f(0x1a7)&&restartBot(_0xc31d5b);_0x1846e2[_0x45e69f(0x157)]=='kill'&&toggleBot(_0xc31d5b,_0x45e69f(0x22f),_0x45e69f(0x172));break;case'telegram':sendTelegram(_0xc31d5b,_0x1846e2[_0x45e69f(0x1b0)]);break;case _0x45e69f(0x194):io['to'](_0xc31d5b)[_0x45e69f(0x167)](_0x1846e2[_0x45e69f(0x194)],_0x1846e2[_0x45e69f(0x253)]);break;}}),pid[_0xc31d5b]['on'](_0x4d14d1(0x221),function(_0x6068f2){if(_0x24ad5a)return;_0x24ad5a=!![],_0x23495e(_0x6068f2);}),pid[_0xc31d5b]['on']('exit',function(_0x3ee5e7){const _0x4c29ab=_0x4d14d1;if(installingUpdate)return;if(_0x24ad5a)return;_0x24ad5a=!![],_0x23495e(null);const _0x2001ca=dbConfig[_0x4c29ab(0x257)](_0x4c29ab(0x1d8))[_0x4c29ab(0x1aa)]({'botID':_0xc31d5b})[_0x4c29ab(0x18d)]();_0x2001ca&&(_0x2001ca[_0x4c29ab(0x188)]==_0x4c29ab(0x1c2)||_0x2001ca[_0x4c29ab(0x188)]==_0x4c29ab(0x260))&&(updateLive(_0xc31d5b,_0x4c29ab(0x172)),logging('restarting\x20Bot\x20'+_0xc31d5b),startBot([_0xc31d5b,userID],{'cwd':bbpath},function(_0x215c0c){if(_0x215c0c)logging(_0x215c0c);}));});}function stopBot(_0x1adec0){const _0x3ef7de=_0x5df3f6;getClientsWithBotID(_0x1adec0)['forEach'](_0x77fdd7=>{const _0x330153=_0xf9f9;getSocket(_0x77fdd7['id'])[_0x330153(0x256)](!![]),removeClient(_0x77fdd7['id']);});if(pid[_0x1adec0])pid[_0x1adec0][_0x3ef7de(0x1da)]();}function restartBot(_0x549cff){const _0x515bfd=_0x5df3f6;if(pid[_0x549cff])pid[_0x549cff][_0x515bfd(0x1da)]();}function addBot(){const _0x4c5c47=_0x5df3f6;let _0x5c207f;for(let _0x3c5c5f=0x1;_0x3c5c5f<0x3e9;_0x3c5c5f++){_0x5c207f=_0x3c5c5f['toString']()[_0x4c5c47(0x200)](0x3,'0');let _0x1628af=config[_0x4c5c47(0x1aa)](_0x5d5e4d=>_0x5d5e4d['botID']==_0x5c207f);if(!_0x1628af)break;}if(_0x5c207f===_0x4c5c47(0x159)){logging(_0x4c5c47(0x1f3));return;}logging(_0x4c5c47(0x1ee)+_0x5c207f),dbConfig[_0x4c5c47(0x257)](_0x4c5c47(0x1d8))['push']({'botID':_0x5c207f,'botname':_0x4c5c47(0x165)+_0x5c207f,'status':_0x4c5c47(0x260),'live':''})[_0x4c5c47(0x259)](),startBot([_0x5c207f,userID],{'cwd':bbpath},function(_0xbd8312){if(_0xbd8312)logging(_0xbd8312);}),config=getConfiguration(),io['to'](_0x4c5c47(0x19c))[_0x4c5c47(0x167)]('bots',config);}function deleteBot(_0x348034){const _0x1f8d72=_0x5df3f6;getClientsWithBotID(_0x348034)['forEach'](_0x399975=>{const _0x3e3a91=_0xf9f9;getSocket(_0x399975['id'])[_0x3e3a91(0x256)](!![]),removeClient(_0x399975['id']);}),dbConfig[_0x1f8d72(0x257)](_0x1f8d72(0x1d8))['remove']({'botID':_0x348034})[_0x1f8d72(0x259)](),logging(_0x1f8d72(0x147)+_0x348034),stopBot(_0x348034);try{fs[_0x1f8d72(0x1cd)](path[_0x1f8d72(0x215)](configpath,_0x1f8d72(0x243)+_0x348034+_0x1f8d72(0x17a))),fs['unlinkSync'](path[_0x1f8d72(0x215)](configpath,_0x1f8d72(0x243)+_0x348034+'-events.json')),fs[_0x1f8d72(0x1cd)](path[_0x1f8d72(0x215)](configpath,'bot-'+_0x348034+_0x1f8d72(0x267))),fs[_0x1f8d72(0x1cd)](path[_0x1f8d72(0x215)](configpath,_0x1f8d72(0x243)+_0x348034+'-results.json'));}catch(_0x5cdde1){if(_0x5cdde1)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x5cdde1);}config=getConfiguration(),io['to'](_0x1f8d72(0x19c))[_0x1f8d72(0x167)](_0x1f8d72(0x1d8),config);}function toggleBot(_0x60319,_0x124a67,_0x3e34a1){const _0x323918=_0x5df3f6;dbConfig[_0x323918(0x257)]('bots')[_0x323918(0x1aa)]({'botID':_0x60319})['assign']({'status':_0x124a67})['assign']({'live':_0x3e34a1})[_0x323918(0x259)]();if(_0x124a67==_0x323918(0x1c2)||_0x124a67==_0x323918(0x260))logging('enabled\x20Bot\x20'+_0x60319),startBot([_0x60319,userID],{'cwd':bbpath},function(_0x15eb13){if(_0x15eb13)logging(_0x15eb13);});else(_0x124a67==_0x323918(0x22f)||_0x124a67=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x60319),stopBot(_0x60319));config=getConfiguration(),io['to'](_0x323918(0x19c))[_0x323918(0x167)](_0x323918(0x1d8),config);}function toggleStatus(_0x26b290){const _0x1543df=_0x5df3f6;let _0x1b9438=dbConfig['get'](_0x1543df(0x1d8))[_0x1543df(0x1aa)]({'botID':_0x26b290})[_0x1543df(0x18d)](),_0x1cecdb;if(_0x1b9438[_0x1543df(0x188)]===_0x1543df(0x1c2))_0x1cecdb='disabled';else{if(_0x1b9438[_0x1543df(0x188)]===_0x1543df(0x260))_0x1cecdb='new-disabled';else{if(_0x1b9438[_0x1543df(0x188)]===_0x1543df(0x216))_0x1cecdb=_0x1543df(0x260);else{if(_0x1b9438['status']===_0x1543df(0x22f))_0x1cecdb='enabled';}}}return _0x1cecdb;}function updateStatus(_0x42818e,_0x3d802d){const _0x5390dc=_0x5df3f6;dbConfig['get'](_0x5390dc(0x1d8))['find']({'botID':_0x42818e})['assign']({'status':_0x3d802d})[_0x5390dc(0x259)](),config=getConfiguration(),io['to'](_0x5390dc(0x19c))['emit']('bots',config);}function updateLive(_0x24d28d,_0x1cd5a6){const _0x2f0fbb=_0x5df3f6;dbConfig['get']('bots')[_0x2f0fbb(0x1aa)]({'botID':_0x24d28d})['assign']({'live':_0x1cd5a6})[_0x2f0fbb(0x259)](),config=getConfiguration(),io['to'](_0x2f0fbb(0x19c))[_0x2f0fbb(0x167)](_0x2f0fbb(0x1d8),config);}function updateBotName(_0x5c40b1,_0x896eac){const _0x3d2c9c=_0x5df3f6;dbConfig['get']('bots')[_0x3d2c9c(0x1aa)]({'botID':_0x5c40b1})[_0x3d2c9c(0x224)]({'botname':_0x896eac})[_0x3d2c9c(0x259)](),config=getConfiguration(),io['to'](_0x3d2c9c(0x19c))[_0x3d2c9c(0x167)]('bots',config);}function telegramError(_0xa8b836){const _0x350789=_0x5df3f6;console[_0x350789(0x1ad)](getTimeStamp()+_0x350789(0x179));}function validateTelegram(_0x334f4b){const _0x6e7496=_0x5df3f6;if(_0x334f4b['from']['username']!=settings[_0x6e7496(0x1e0)]&&'@'+_0x334f4b[_0x6e7496(0x195)]['username']!=settings[_0x6e7496(0x1e0)])return tgBot['sendMessage'](_0x334f4b['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'})[_0x6e7496(0x1e1)](_0x249337=>{telegramError(_0x249337);}),![];return!![];}async function initTelegram(){const _0x3b46bf=_0x5df3f6;if(tgBot)tgBot[_0x3b46bf(0x25d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3b46bf(0x15d)],{'polling':!![]});let _0xbf8792=_0x3b46bf(0x23f);_0xbf8792+='\x0a',_0xbf8792+=_0x3b46bf(0x264),_0xbf8792+=_0x3b46bf(0x19b),_0xbf8792+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0xbf8792+='/restart\x20-\x20restart\x20bot(s)\x0a',_0xbf8792+=_0x3b46bf(0x21c),_0xbf8792+=_0x3b46bf(0x21a),_0xbf8792+=_0x3b46bf(0x1f7),_0xbf8792+=_0x3b46bf(0x1f4);let _0x308731=_0x3b46bf(0x279);_0x308731+='\x0a',_0x308731+=_0xbf8792,tgBot['onText'](/\/start/,_0x1daa9f=>{const _0x54f8b8=_0x3b46bf;if(!validateTelegram(_0x1daa9f))return;if(settings['telegramChatId']!=_0x1daa9f[_0x54f8b8(0x268)]['id'])updateSetting(_0x54f8b8(0x1b1),_0x1daa9f[_0x54f8b8(0x268)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x54f8b8(0x14b)](_0x1daa9f[_0x54f8b8(0x268)]['id'],_0x308731)[_0x54f8b8(0x1e1)](_0x4b42a5=>{telegramError(_0x4b42a5);});}),tgBot[_0x3b46bf(0x177)](/\/enable/,_0x376a55=>{const _0xc74d1b=_0x3b46bf;if(!validateTelegram(_0x376a55))return;if(settings[_0xc74d1b(0x1b1)]!=_0x376a55[_0xc74d1b(0x268)]['id'])updateSetting(_0xc74d1b(0x1b1),_0x376a55[_0xc74d1b(0x268)]['id']);updateSetting(_0xc74d1b(0x237),!![]),tgBot[_0xc74d1b(0x14b)](_0x376a55[_0xc74d1b(0x268)]['id'],'Notifications\x20enabled')['catch'](_0x3d2caf=>{telegramError(_0x3d2caf);});}),tgBot['onText'](/\/config/,async _0x52e27c=>{const _0x315c6c=_0x3b46bf;if(!validateTelegram(_0x52e27c))return;tgBot[_0x315c6c(0x199)](_0x315c6c(0x155)),tgBot['sendMessage'](_0x52e27c[_0x315c6c(0x268)]['id'],_0x315c6c(0x27e),{'reply_markup':{'inline_keyboard':[[{'text':_0x315c6c(0x13f),'callback_data':_0x315c6c(0x1b7)},{'text':_0x315c6c(0x193),'callback_data':_0x315c6c(0x202)},{'text':_0x315c6c(0x231),'callback_data':'all'}]]}})[_0x315c6c(0x1e1)](_0x497dbc=>{telegramError(_0x497dbc);}),tgBot['on'](_0x315c6c(0x155),async _0x22d741=>{const _0x3d8132=_0x315c6c,_0x1bcd71=_0x22d741[_0x3d8132(0x1e5)],_0x143e9b=_0x22d741[_0x3d8132(0x16e)];tgBot['answerCallbackQuery'](_0x22d741['id'])[_0x3d8132(0x280)](async()=>{const _0x64991a=_0x3d8132;_0x1bcd71==_0x64991a(0x1b7)&&(updateSetting(_0x64991a(0x140),'orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0x64991a(0x14b)](_0x143e9b[_0x64991a(0x268)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x170e49=>{telegramError(_0x170e49);}));_0x1bcd71==_0x64991a(0x202)&&(updateSetting(_0x64991a(0x140),_0x64991a(0x202)),updateSetting(_0x64991a(0x237),!![]),await tgBot[_0x64991a(0x14b)](_0x143e9b[_0x64991a(0x268)]['id'],_0x64991a(0x190))[_0x64991a(0x1e1)](_0x47aaab=>{telegramError(_0x47aaab);}));_0x1bcd71==_0x64991a(0x283)&&(updateSetting(_0x64991a(0x140),_0x64991a(0x283)),updateSetting(_0x64991a(0x237),!![]),await tgBot['sendMessage'](_0x143e9b['chat']['id'],_0x64991a(0x1d3))['catch'](_0x415c2c=>{telegramError(_0x415c2c);}));if(!settings['telegramChatId'])tgBot[_0x64991a(0x14b)](_0x143e9b[_0x64991a(0x268)]['id'],_0x64991a(0x170))['catch'](_0x53488e=>{telegramError(_0x53488e);});}),tgBot['removeListener'](_0x3d8132(0x155));});}),tgBot['onText'](/\/status/,_0x42f951=>{const _0x454e8f=_0x3b46bf;if(!validateTelegram(_0x42f951))return;let _0x51603a=_0x454e8f(0x261);config[_0x454e8f(0x26d)](_0x561a17=>{const _0x3dd1d8=_0x454e8f;_0x51603a+='Bot\x20'+_0x561a17[_0x3dd1d8(0x1ba)]+_0x3dd1d8(0x247)+_0x561a17[_0x3dd1d8(0x1a1)]+':\x20'+_0x561a17['status']+_0x3dd1d8(0x19a)+_0x561a17['live']+'\x0a';}),_0x51603a+='\x0a',_0x51603a+=_0x454e8f(0x14f),_0x51603a+=!settings[_0x454e8f(0x237)]?_0x454e8f(0x14d):_0x454e8f(0x1c0),_0x51603a+=settings[_0x454e8f(0x237)]?settings['telegramEvents']==_0x454e8f(0x283)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x454e8f(0x1e2)+settings[_0x454e8f(0x140)]+_0x454e8f(0x25f):'',tgBot[_0x454e8f(0x14b)](_0x42f951[_0x454e8f(0x268)]['id'],_0x51603a,{'parse_mode':_0x454e8f(0x1fa)})[_0x454e8f(0x1e1)](_0x396c6a=>{telegramError(_0x396c6a);});}),tgBot['onText'](/\/restart/,_0x594518=>{const _0x249fe3=_0x3b46bf;if(!validateTelegram(_0x594518))return;tgBot[_0x249fe3(0x199)]('callback_query');const _0x42a36e=getEnabledBots();if(_0x42a36e[_0x249fe3(0x248)]==0x0)tgBot[_0x249fe3(0x14b)](_0x594518[_0x249fe3(0x268)]['id'],_0x249fe3(0x1b8))[_0x249fe3(0x1e1)](_0x5c2033=>{telegramError(_0x5c2033);});else{if(_0x42a36e[_0x249fe3(0x248)]>0x1)_0x42a36e[_0x249fe3(0x22d)]({'botID':_0x249fe3(0x283)});let _0x434904=[],_0x459b1a=[];const _0x21c3f6=_0x42a36e[_0x249fe3(0x248)]%0x4==0x0||_0x42a36e[_0x249fe3(0x248)]%0x4==0x3||_0x42a36e[_0x249fe3(0x248)]%0x3==0x1?0x4:0x3;let _0x6084a5=0x0;_0x42a36e['forEach']((_0x4dcb62,_0x39f9cb)=>{const _0x3a7c7f=_0x249fe3;if(_0x39f9cb%_0x21c3f6==0x0)_0x459b1a=[];_0x459b1a[_0x3a7c7f(0x22d)]({'text':_0x4dcb62[_0x3a7c7f(0x1ba)]==_0x3a7c7f(0x283)?_0x3a7c7f(0x183):_0x3a7c7f(0x165)+_0x4dcb62['botID'],'callback_data':_0x4dcb62['botID']}),_0x39f9cb%_0x21c3f6==0x0&&(_0x434904[_0x6084a5]=_0x459b1a,_0x6084a5++);}),tgBot['sendMessage'](_0x594518[_0x249fe3(0x268)]['id'],_0x249fe3(0x1ca),{'reply_markup':{'inline_keyboard':_0x434904}})[_0x249fe3(0x1e1)](_0x4ec2f3=>{telegramError(_0x4ec2f3);}),tgBot['on']('callback_query',async _0x1557b7=>{const _0x1ed4e6=_0x249fe3,_0x3d5cef=_0x1557b7[_0x1ed4e6(0x1e5)],_0x4a09ed=_0x1557b7[_0x1ed4e6(0x16e)];tgBot[_0x1ed4e6(0x250)](_0x1557b7['id'])[_0x1ed4e6(0x280)](async()=>{const _0x532085=_0x1ed4e6;if(_0x3d5cef==_0x532085(0x283)){if(settings[_0x532085(0x140)]=='orders')tgBot[_0x532085(0x14b)](_0x4a09ed['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x532085(0x1e1)](_0x11c223=>{telegramError(_0x11c223);});config[_0x532085(0x26d)](_0x283676=>{const _0x299336=_0x532085;restartBot(_0x283676[_0x299336(0x1ba)]);});}else{if(settings[_0x532085(0x140)]==_0x532085(0x1b7))tgBot[_0x532085(0x14b)](_0x4a09ed[_0x532085(0x268)]['id'],_0x532085(0x22e)+_0x3d5cef)[_0x532085(0x1e1)](_0x1ad855=>{telegramError(_0x1ad855);});restartBot(_0x3d5cef);}}),tgBot[_0x1ed4e6(0x199)]('callback_query');});}}),tgBot[_0x3b46bf(0x177)](/\/on/,_0x5ef0e8=>{const _0x42bcb8=_0x3b46bf;if(!validateTelegram(_0x5ef0e8))return;tgBot[_0x42bcb8(0x199)](_0x42bcb8(0x155));const _0x1645af=getDisabledBots();if(_0x1645af[_0x42bcb8(0x248)]==0x0)tgBot[_0x42bcb8(0x14b)](_0x5ef0e8[_0x42bcb8(0x268)]['id'],_0x42bcb8(0x1b4))[_0x42bcb8(0x1e1)](_0x501d52=>{telegramError(_0x501d52);});else{if(_0x1645af[_0x42bcb8(0x248)]>0x1)_0x1645af[_0x42bcb8(0x22d)]({'botID':'all'});let _0x1eb148=[],_0x15350a=[];const _0x25fbcc=_0x1645af[_0x42bcb8(0x248)]%0x4==0x0||_0x1645af['length']%0x4==0x3||_0x1645af[_0x42bcb8(0x248)]%0x3==0x1?0x4:0x3;let _0x4ecb3e=0x0;_0x1645af[_0x42bcb8(0x26d)]((_0x3ebc7d,_0x207fa4)=>{const _0xe65c4e=_0x42bcb8;if(_0x207fa4%_0x25fbcc==0x0)_0x15350a=[];_0x15350a[_0xe65c4e(0x22d)]({'text':_0x3ebc7d['botID']=='all'?'All\x20bots':'Bot\x20'+_0x3ebc7d[_0xe65c4e(0x1ba)],'callback_data':_0x3ebc7d[_0xe65c4e(0x1ba)]}),_0x207fa4%_0x25fbcc==0x0&&(_0x1eb148[_0x4ecb3e]=_0x15350a,_0x4ecb3e++);}),tgBot[_0x42bcb8(0x14b)](_0x5ef0e8[_0x42bcb8(0x268)]['id'],_0x42bcb8(0x287),{'reply_markup':{'inline_keyboard':_0x1eb148}})[_0x42bcb8(0x1e1)](_0x570b99=>{telegramError(_0x570b99);}),tgBot['on']('callback_query',async _0x3a8c6c=>{const _0x2defd4=_0x42bcb8,_0x2fef20=_0x3a8c6c[_0x2defd4(0x1e5)],_0x4f9064=_0x3a8c6c['message'];tgBot[_0x2defd4(0x250)](_0x3a8c6c['id'])[_0x2defd4(0x280)](async()=>{const _0x63ac88=_0x2defd4;if(_0x2fef20==_0x63ac88(0x283)){if(settings['telegramEvents']=='orders')tgBot[_0x63ac88(0x14b)](_0x4f9064[_0x63ac88(0x268)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x63ac88(0x1e1)](_0x500813=>{telegramError(_0x500813);});_0x1645af['forEach'](_0x24e64e=>{const _0x2165f8=_0x63ac88;if(_0x24e64e['botID']!='all')toggleBot(_0x24e64e['botID'],toggleStatus(_0x24e64e[_0x2165f8(0x1ba)]),_0x2165f8(0x172));});}else{if(settings[_0x63ac88(0x140)]==_0x63ac88(0x1b7))tgBot[_0x63ac88(0x14b)](_0x4f9064[_0x63ac88(0x268)]['id'],_0x63ac88(0x1b9)+_0x2fef20)[_0x63ac88(0x1e1)](_0x489eb1=>{telegramError(_0x489eb1);});toggleBot(_0x2fef20,toggleStatus(_0x2fef20),_0x63ac88(0x172));}}),tgBot[_0x2defd4(0x199)](_0x2defd4(0x155));});}}),tgBot['onText'](/\/off/,_0x2668c4=>{const _0x344c01=_0x3b46bf;if(!validateTelegram(_0x2668c4))return;tgBot['removeListener']('callback_query');const _0x3e6d7=getEnabledBots();if(_0x3e6d7[_0x344c01(0x248)]==0x0)tgBot['sendMessage'](_0x2668c4[_0x344c01(0x268)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x344c01(0x1e1)](_0x5c987e=>{telegramError(_0x5c987e);});else{if(_0x3e6d7[_0x344c01(0x248)]>0x1)_0x3e6d7[_0x344c01(0x22d)]({'botID':_0x344c01(0x283)});let _0x5b7a6e=[],_0x2a69e8=[];const _0x345d8e=_0x3e6d7['length']%0x4==0x0||_0x3e6d7[_0x344c01(0x248)]%0x4==0x3||_0x3e6d7[_0x344c01(0x248)]%0x3==0x1?0x4:0x3;let _0x4705a3=0x0;_0x3e6d7[_0x344c01(0x26d)]((_0x510342,_0x3d5524)=>{const _0x232439=_0x344c01;if(_0x3d5524%_0x345d8e==0x0)_0x2a69e8=[];_0x2a69e8[_0x232439(0x22d)]({'text':_0x510342[_0x232439(0x1ba)]==_0x232439(0x283)?_0x232439(0x183):'Bot\x20'+_0x510342[_0x232439(0x1ba)],'callback_data':_0x510342['botID']}),_0x3d5524%_0x345d8e==0x0&&(_0x5b7a6e[_0x4705a3]=_0x2a69e8,_0x4705a3++);}),tgBot[_0x344c01(0x14b)](_0x2668c4[_0x344c01(0x268)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5b7a6e}})[_0x344c01(0x1e1)](_0x2f02aa=>{telegramError(_0x2f02aa);}),tgBot['on'](_0x344c01(0x155),async _0x3502fc=>{const _0x42d733=_0x344c01,_0x36d031=_0x3502fc[_0x42d733(0x1e5)],_0x9047a=_0x3502fc[_0x42d733(0x16e)];tgBot[_0x42d733(0x250)](_0x3502fc['id'])[_0x42d733(0x280)](async()=>{const _0x21f092=_0x42d733;if(_0x36d031==_0x21f092(0x283)){if(settings[_0x21f092(0x140)]==_0x21f092(0x1b7))tgBot[_0x21f092(0x14b)](_0x9047a[_0x21f092(0x268)]['id'],_0x21f092(0x233))[_0x21f092(0x1e1)](_0x3873f9=>{telegramError(_0x3873f9);});_0x3e6d7[_0x21f092(0x26d)](_0x3f87cf=>{const _0x878aae=_0x21f092;if(_0x3f87cf[_0x878aae(0x1ba)]!=_0x878aae(0x283))toggleBot(_0x3f87cf['botID'],toggleStatus(_0x3f87cf[_0x878aae(0x1ba)]),_0x878aae(0x172));});}else{if(settings['telegramEvents']=='orders')tgBot[_0x21f092(0x14b)](_0x9047a['chat']['id'],_0x21f092(0x1f8)+_0x36d031)[_0x21f092(0x1e1)](_0x3aa7a6=>{telegramError(_0x3aa7a6);});toggleBot(_0x36d031,toggleStatus(_0x36d031),'stopped');}}),tgBot[_0x42d733(0x199)](_0x42d733(0x155));});}}),tgBot[_0x3b46bf(0x177)](/\/disable/,_0xb6efa7=>{const _0x4babe4=_0x3b46bf;if(!validateTelegram(_0xb6efa7))return;tgBot[_0x4babe4(0x14b)](_0xb6efa7[_0x4babe4(0x268)]['id'],'Notifications\x20disabled')[_0x4babe4(0x1e1)](_0x4b5f99=>{telegramError(_0x4b5f99);}),updateSetting(_0x4babe4(0x237),![]);}),tgBot['onText'](/\/help/,_0x58022a=>{const _0x55a630=_0x3b46bf;if(!validateTelegram(_0x58022a))return;tgBot[_0x55a630(0x14b)](_0x58022a[_0x55a630(0x268)]['id'],_0xbf8792)[_0x55a630(0x1e1)](_0x5942a9=>{telegramError(_0x5942a9);});}),tgBot['on'](_0x3b46bf(0x18a),_0x2c31a2=>{const _0x411b48=_0x3b46bf;_0x2c31a2[_0x411b48(0x148)]()[_0x411b48(0x166)](_0x411b48(0x1f2))&&(logging(_0x411b48(0x246)),tgBot[_0x411b48(0x25d)](),tgBot=null,io['to']('botmanager')[_0x411b48(0x167)](_0x411b48(0x252),_0x411b48(0x246)));}),process[_0x3b46bf(0x26c)](_0x3b46bf(0x22b),()=>{const _0x2d788d=_0x3b46bf;if(tgBot)tgBot['stopPolling']();process[_0x2d788d(0x206)](0x1);}),process[_0x3b46bf(0x26c)](_0x3b46bf(0x27f),()=>{const _0x3decb4=_0x3b46bf;if(tgBot)tgBot[_0x3decb4(0x25d)]();process[_0x3decb4(0x206)](0x1);});}}function disableTelegram(){const _0x50fa49=_0x5df3f6;tgBot&&(tgBot[_0x50fa49(0x25d)](),tgBot=null);}function sendTelegram(_0x41d6bc,_0x4d9698){const _0x4f5b00=_0x5df3f6;if(settings[_0x4f5b00(0x237)]){if(settings[_0x4f5b00(0x140)]==_0x4f5b00(0x283)||(_0x4d9698[_0x4f5b00(0x18e)]==_0x4f5b00(0x221)||_0x4d9698[_0x4f5b00(0x18e)]=='success')&&settings['telegramEvents']==_0x4f5b00(0x202)||_0x4d9698['type']=='order'&&settings[_0x4f5b00(0x140)]==_0x4f5b00(0x1b7)){if(tgBot&&settings[_0x4f5b00(0x1b1)]){if(_0x4d9698['showname'])tgBot[_0x4f5b00(0x14b)](settings[_0x4f5b00(0x1b1)],_0x4d9698[_0x4f5b00(0x1a1)]+'\x20>\x20'+_0x4d9698['event'])[_0x4f5b00(0x1e1)](_0x2a582b=>{telegramError(_0x2a582b);});else tgBot[_0x4f5b00(0x14b)](settings['telegramChatId'],_0x4f5b00(0x165)+_0x41d6bc+_0x4f5b00(0x161)+_0x4d9698['event'])['catch'](_0x157aac=>{telegramError(_0x157aac);});}}}}function getDeviceWithIp(_0x277d77){const _0x1d5aba=_0x5df3f6;return devices[_0x1d5aba(0x1aa)](_0x4e8b1e=>_0x4e8b1e['ip']===_0x277d77);}function temporaryAccess2FA(_0x12c078,_0x2cfde0){const _0x46ed37=_0x5df3f6;let _0x4cba80=new Date(),_0x3f6eb6=![];if(lastIpApproval){if(_0x4cba80-lastIpApproval<0x1388)_0x3f6eb6=!![];}lastIpApproval=new Date();if(_0x3f6eb6)return;tgBot&&settings[_0x46ed37(0x1b1)]&&(tgBot[_0x46ed37(0x199)](_0x46ed37(0x155)),tgBot[_0x46ed37(0x14b)](settings[_0x46ed37(0x1b1)],_0x46ed37(0x219)+normalizeIP(_0x2cfde0)[_0x46ed37(0x282)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x46ed37(0x176),'callback_data':'5'},{'text':_0x46ed37(0x1be),'callback_data':'15'},{'text':_0x46ed37(0x262),'callback_data':'30'},{'text':_0x46ed37(0x18f),'callback_data':_0x46ed37(0x18f)}]]}})[_0x46ed37(0x1e1)](_0x1f5ac2=>{telegramError(_0x1f5ac2);}),tgBot['on'](_0x46ed37(0x155),async _0x3f8c60=>{const _0xec22b8=_0x46ed37,_0x198b85=_0x3f8c60[_0xec22b8(0x1e5)],_0x1f8e9d=_0x3f8c60[_0xec22b8(0x16e)];tgBot['answerCallbackQuery'](_0x3f8c60['id'])['then'](async()=>{const _0x4c5b0e=_0xec22b8;devices[_0x12c078][_0x4c5b0e(0x209)]={'clientip':_0x2cfde0,'timestamp':new Date()[_0x4c5b0e(0x21f)](),'expiry':_0x198b85},_0x198b85!=_0x4c5b0e(0x18f)?(await tgBot['sendMessage'](_0x1f8e9d[_0x4c5b0e(0x268)]['id'],_0x4c5b0e(0x223)+_0x198b85+_0x4c5b0e(0x23a),{'parse_mode':_0x4c5b0e(0x1fa)})[_0x4c5b0e(0x1e1)](_0x2c6554=>{telegramError(_0x2c6554);}),io['to'](_0x12c078)[_0x4c5b0e(0x167)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x1f8e9d[_0x4c5b0e(0x268)]['id'],_0x4c5b0e(0x1e8))['catch'](_0x5eab6c=>{telegramError(_0x5eab6c);}),io['to'](_0x12c078)['emit'](_0x4c5b0e(0x188),{'access':{'allow':![],'reason':_0x4c5b0e(0x1bd),'token':null}}));}),tgBot['removeListener'](_0xec22b8(0x155));}));}function loginAccess2FA(_0x38c985,_0x1976ae){const _0x5a120f=_0x5df3f6;tgBot&&settings['telegramChatId']&&(tgBot[_0x5a120f(0x199)](_0x5a120f(0x155)),tgBot[_0x5a120f(0x14b)](settings[_0x5a120f(0x1b1)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1976ae)[_0x5a120f(0x282)]+_0x5a120f(0x20b),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x5a120f(0x18f),'callback_data':_0x5a120f(0x18f)}]]}})[_0x5a120f(0x1e1)](_0x187d8c=>{telegramError(_0x187d8c);}),tgBot['on'](_0x5a120f(0x155),async _0x179535=>{const _0x4a89bb=_0x5a120f,_0x4fff93=_0x179535['data'],_0x2238ab=_0x179535[_0x4a89bb(0x16e)];tgBot[_0x4a89bb(0x250)](_0x179535['id'])[_0x4a89bb(0x280)](async()=>{const _0x18acc5=_0x4a89bb;devices[_0x38c985]['telegram2FaApproval']={'clientip':_0x1976ae,'timestamp':new Date()[_0x18acc5(0x21f)](),'expiry':_0x4fff93},_0x4fff93!=_0x18acc5(0x18f)?(await tgBot[_0x18acc5(0x14b)](_0x2238ab[_0x18acc5(0x268)]['id'],_0x18acc5(0x238),{'parse_mode':'HTML'})[_0x18acc5(0x1e1)](_0x5195ab=>{telegramError(_0x5195ab);}),io['to'](_0x38c985)[_0x18acc5(0x167)]('status',{'access':{'allow':![],'reason':_0x18acc5(0x24d),'token':null}})):(await tgBot['sendMessage'](_0x2238ab[_0x18acc5(0x268)]['id'],_0x18acc5(0x273))[_0x18acc5(0x1e1)](_0x57bba1=>{telegramError(_0x57bba1);}),io['to'](_0x38c985)['emit'](_0x18acc5(0x188),{'access':{'allow':![],'reason':_0x18acc5(0x144),'token':null}}));}),tgBot[_0x4a89bb(0x199)]('callback_query');}));}function getConfiguration(){const _0x5f3caf=_0x5df3f6;return dbConfig['get'](_0x5f3caf(0x1d8))[_0x5f3caf(0x27a)](_0x5f3caf(0x1ba))['value']()||[];}function getEnabledBots(){const _0x5953f0=_0x5df3f6;return dbConfig[_0x5953f0(0x257)](_0x5953f0(0x1d8))[_0x5953f0(0x27a)](_0x5953f0(0x1ba))[_0x5953f0(0x1c6)]({'status':_0x5953f0(0x1c2)})[_0x5953f0(0x18d)]()||[];}function getDisabledBots(){const _0x5f37c9=_0x5df3f6;return dbConfig[_0x5f37c9(0x257)](_0x5f37c9(0x1d8))[_0x5f37c9(0x27a)]('botID')[_0x5f37c9(0x1c6)]({'status':'disabled'})[_0x5f37c9(0x18d)]()||[];}function getSettings(){const _0x46d9bb=_0x5df3f6;return dbSettings['get'](_0x46d9bb(0x1c5))[_0x46d9bb(0x18d)]()||{'timeshift':0x0};}function getSecure(){const _0x390a4d=_0x5df3f6;return dbSecure[_0x390a4d(0x257)](_0x390a4d(0x25a))[_0x390a4d(0x18d)]()||{};}function getBlacklist(){const _0x576e87=_0x5df3f6;return dbSecure['get'](_0x576e87(0x266))['value']()||[];}function broadcastToBots(_0x19e0bd,_0x198be4){const _0x310ebf=_0x5df3f6;config[_0x310ebf(0x26d)](_0xc576ac=>{const _0x255014=_0x310ebf;if(_0xc576ac[_0x255014(0x188)]=='enabled'&&_0xc576ac[_0x255014(0x1d2)]==_0x255014(0x171)){if(pid[_0xc576ac[_0x255014(0x1ba)]])pid[_0xc576ac[_0x255014(0x1ba)]][_0x255014(0x201)]({[_0x19e0bd]:_0x198be4});}});}function storeSettings(_0x277a57,_0x825c65=![]){const _0x3c3e73=_0x5df3f6;_0x277a57={...settings,..._0x277a57};if(_0x825c65&&_0x277a57[_0x3c3e73(0x16c)]!=_0x3c3e73(0x210)&&_0x277a57[_0x3c3e73(0x16c)]!=''){const _0x2ce3bd=crypt['decrypt'](secure[_0x3c3e73(0x16f)],_0x277a57['bbPassword'])[_0x3c3e73(0x16e)][_0x3c3e73(0x269)]('@')[0x0],_0x16be4d=bcrypt[_0x3c3e73(0x150)](_0x2ce3bd,saltRounds);_0x277a57={..._0x277a57,'bbPassword':_0x16be4d};}if(_0x825c65&&_0x277a57[_0x3c3e73(0x15d)]!=_0x3c3e73(0x210)&&_0x277a57[_0x3c3e73(0x15d)]!=''){const _0x140179=crypt[_0x3c3e73(0x272)](secure[_0x3c3e73(0x16f)],_0x277a57[_0x3c3e73(0x15d)])['message'][_0x3c3e73(0x269)]('@')[0x0];_0x277a57={..._0x277a57,'telegramToken':_0x140179};}const _0x68ad4d=_0x277a57[_0x3c3e73(0x15d)]!='************'&&_0x277a57[_0x3c3e73(0x15d)]!=settings['telegramToken']||_0x277a57[_0x3c3e73(0x1e0)]!=settings[_0x3c3e73(0x1e0)],_0x4a7191=_0x277a57[_0x3c3e73(0x15d)]==''||_0x277a57['telegramUsername']=='';if(_0x68ad4d)_0x277a57[_0x3c3e73(0x140)]=_0x3c3e73(0x283);for(const [_0x18c119,_0x3ad135]of Object[_0x3c3e73(0x24c)](_0x277a57)){if(_0x18c119==_0x3c3e73(0x15d)&&_0x3ad135==_0x3c3e73(0x210)){_0x277a57[_0x3c3e73(0x15d)]=settings['telegramToken'];continue;};if(_0x18c119==_0x3c3e73(0x16c)&&_0x3ad135==_0x3c3e73(0x210)){_0x277a57['bbPassword']=settings[_0x3c3e73(0x16c)];continue;};dbSettings[_0x3c3e73(0x1dd)](_0x3c3e73(0x197)+_0x18c119,_0x3ad135)[_0x3c3e73(0x259)]();}settings=_0x277a57,io['to']('botmanager')[_0x3c3e73(0x167)](_0x3c3e73(0x1c5),cleanSettings()),broadcastToBots(_0x3c3e73(0x1a0),settings[_0x3c3e73(0x1a0)]);if(_0x68ad4d&&!_0x4a7191)initTelegram();if(_0x68ad4d&&_0x4a7191)disableTelegram();getAllClients()['forEach'](_0x19b3fb=>{const _0x3139b5=_0x3c3e73;getSocket(_0x19b3fb['id'])['emit'](_0x3139b5(0x188),{'access':{'allow':![],'reason':_0x3139b5(0x24d),'token':null}});});}function updateSetting(_0x17a550,_0x441900){const _0x281a58=_0x5df3f6;dbSettings['set'](_0x281a58(0x197)+_0x17a550,_0x441900)['write'](),settings=getSettings(),io['to'](_0x281a58(0x19c))[_0x281a58(0x167)](_0x281a58(0x1c5),cleanSettings());}function storeSecure(_0x9bf1df){const _0x52a256=_0x5df3f6;dbSecure[_0x52a256(0x257)](_0x52a256(0x25a))[_0x52a256(0x22d)](_0x9bf1df)[_0x52a256(0x259)](),secure=_0x9bf1df;}function addBlacklist(_0x41db25){const _0x1fc1df=_0x5df3f6;cleanBlacklist();let _0x2759d0;devices[_0x41db25][_0x1fc1df(0x209)]?_0x2759d0=Math[_0x1fc1df(0x20f)](devices[_0x41db25][_0x1fc1df(0x209)][_0x1fc1df(0x1e3)],loginExpiry):_0x2759d0=loginExpiry,dbSecure[_0x1fc1df(0x257)](_0x1fc1df(0x266))[_0x1fc1df(0x22d)]({'expiry':new Date()[_0x1fc1df(0x21f)]()+_0x2759d0*0x3c*0x3e8,'token':devices[_0x41db25][_0x1fc1df(0x1bc)][_0x1fc1df(0x28a)]})['write'](),blacklist=dbSecure[_0x1fc1df(0x257)](_0x1fc1df(0x266))[_0x1fc1df(0x18d)]();}function cleanBlacklist(){const _0x4e6502=_0x5df3f6;let _0x5dd102=dbSecure[_0x4e6502(0x257)]('blacklist')[_0x4e6502(0x20a)]()[_0x4e6502(0x18d)](),_0x3603a5=new Date()[_0x4e6502(0x21f)]();_0x5dd102['forEach'](_0x2bd05d=>{const _0x4459dc=_0x4e6502;_0x2bd05d[_0x4459dc(0x1e3)]<_0x3603a5&&dbSecure['get'](_0x4459dc(0x266))[_0x4459dc(0x1db)]({'expiry':_0x2bd05d[_0x4459dc(0x1e3)]})[_0x4459dc(0x259)]();});}function initStates(){const _0x1e999c=_0x5df3f6;let _0xff59d1=getConfiguration();_0xff59d1[_0x1e999c(0x26d)](_0x4cf89a=>{const _0x3da0de=_0x1e999c;_0x4cf89a[_0x3da0de(0x1d2)]='stopped';}),storeConfiguration(_0xff59d1);}function onKeys(){const _0x5eabab=new RSA();return new Promise(_0x2229cf=>{const _0x50823b=_0xf9f9;_0x5eabab[_0x50823b(0x181)]()[_0x50823b(0x280)](_0x1c6f20=>{_0x2229cf(_0x1c6f20);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3f94d4=_0x5df3f6;let _0x193c62=getConfiguration(),_0x4fb3cb=![];_0x193c62[_0x3f94d4(0x26d)](_0xbd9f61=>{const _0x2be4ea=_0x3f94d4;if(_0xbd9f61[_0x2be4ea(0x188)]=='running')_0xbd9f61[_0x2be4ea(0x188)]=_0x2be4ea(0x1c2),_0x4fb3cb=!![];else _0xbd9f61['status']==_0x2be4ea(0x172)&&(_0xbd9f61['status']=_0x2be4ea(0x22f),_0x4fb3cb=!![]);});if(_0x4fb3cb)storeConfiguration(_0x193c62);let _0x3d714d=getSecure();if(!_0x3d714d[_0x3f94d4(0x203)]('secret')){let _0x3da28f=await generateKeys();_0x3d714d[_0x3f94d4(0x255)]=_0x3da28f[_0x3f94d4(0x255)],_0x3d714d['privateKey']=_0x3da28f[_0x3f94d4(0x16f)],_0x3d714d['secret']=crypto[_0x3f94d4(0x1b2)](0x20)['toString']('hex');;storeSecure(_0x3d714d);}let _0x4eec4a=getSettings();_0x4fb3cb=![];!_0x4eec4a[_0x3f94d4(0x203)](_0x3f94d4(0x1fc))&&(_0x4eec4a[_0x3f94d4(0x1fc)]=![],_0x4eec4a['bbUsername']='',_0x4eec4a[_0x3f94d4(0x16c)]='',_0x4eec4a[_0x3f94d4(0x1fb)]=![],_0x4fb3cb=!![]);!_0x4eec4a[_0x3f94d4(0x203)]('whitelistEnabled')&&(_0x4eec4a['whitelistEnabled']=![],_0x4eec4a[_0x3f94d4(0x26a)]=[],_0x4eec4a[_0x3f94d4(0x23d)]=![],_0x4fb3cb=!![]);if(!_0x4eec4a['hasOwnProperty'](_0x3f94d4(0x237))){if(_0x4eec4a['telegramChatId'])_0x4eec4a[_0x3f94d4(0x237)]=!![];else _0x4eec4a[_0x3f94d4(0x237)]=![];_0x4fb3cb=!![];}if(_0x4fb3cb)storeSettings(_0x4eec4a);}function storeConfiguration(_0x159f88){const _0x1023ec=_0x5df3f6;dbConfig[_0x1023ec(0x257)](_0x1023ec(0x1d8))['remove']()['write'](),dbConfig[_0x1023ec(0x257)]('bots')[_0x1023ec(0x22d)](..._0x159f88)['write'](),config=_0x159f88;}function _0x58a6(){const _0x88314b=['Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','disabled','Unauthorized\x20attempt\x20to\x20delete\x20alerts','All','crypto','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','constructor','2FA\x20login\x20required','placeOrder','telegramEnabled','Login\x20accepted','username','\x20minutes','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bcryptjs','temporaryAccessAllowed','add-bot','You\x20can\x20use\x20the\x20following\x20commands:\x0a','store-settings','temporary\x20access\x20timeout','NTBA_FIX_319','bot-','login\x20required','delete-alerts','Invalid\x20Telegram\x20token','\x20|\x20','length','test','env','auth','entries','reload','bb-secure.json','server','answerCallbackQuery',':\x20Bot\x20Mgr\x20>\x20','notification','args','apiKey','publicKey','disconnect','get','getMinutes','write','secure','UA-192771731-1','invalid\x20credentials','stopPolling','clients','\x20only\x0a','new','<b>Balance\x20Bot\x20status:</b>\x0a','30\x20min','pidRefreshToken','/enable\x20-\x20enable\x20notifications\x0a','Password\x20has\x20been\x20reset\x20to:\x20','blacklist','-performance.json','chat','split','whitelist','yes','once','forEach','bot','getMonth','copyFileSync','Invalid\x20username\x20or\x20IP\x20address','decrypt','Login\x20rejected','headers','login\x20not\x20required','keys','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','host','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','sortBy','3530200BGGTls','add','bb-config.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','SIGTERM','then','name','show','all','place-order','/:bot/portfolio','getStartingBalances','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','sendFile','reset-password','token','Orders','telegramEvents','bbUsername','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','timestamp','2FA\x20login\x20rejected','static','mkdirSync','deleted\x20Bot\x20','toString','RSA-OAEP','Unauthorized\x20login\x20attempt\x20(timeout)','sendMessage','Unauthorized\x20attempt\x20to\x20update\x20bot','Notifications\x20disabled\x0a','removeAllListeners','<b>Telegram\x20bot\x20status:</b>\x0a','hashSync','backup/','/:bot/coins','ipc','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','callback_query','storeHeadless','stop','whitelistEnabled','1000','page','getSeconds','match','telegramToken','verify',',\x20must\x20be\x20a\x204\x20digit\x20number','temporary\x20access\x20not\x20allowed','\x20>\x20','127.0.0.1','clientip','argv','Bot\x20','includes','emit','apply','getHours','pidExpireLogin','defaults','bbPassword','temporary\x20token\x20generated','message','privateKey','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','running','stopped','User\x20has\x20been\x20validated','Balance\x20Bot','1666888iZxZTt','5\x20min','onText','26954217BFfntf',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','-config.json','index.html','7850878EADQDf','store-headless','hybrid-crypto-js','/:bot/performance','ipv6','generateKeyPairAsync','Invalid\x20IP\x20address','All\x20bots','Unauthorized\x20attempt\x20to\x20delete\x20bot','1335857jfygJE','Unauthorized\x20attempt\x20to\x20get\x20logs','sign','status','cancel-loading','polling_error','reason','bb-settings.json','value','type','reject','Ok,\x20will\x20send\x20alert\x20notifications\x20only','::1','secret','Alerts','function','from','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','settings.','connection','removeListener','\x20/\x20','/disable\x20-\x20disable\x20notifications\x0a','botmanager','yargs/yargs','deleteHistoryAlerts','kind','timeshift','botname','toIPv4Address','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Token\x20blacklisted','7337370SPdarT','/:bot/history','restart','inherit','map','find','login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','log','port','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','telegram','telegramChatId','randomBytes','uuid','All\x20bots\x20running\x20right\x20now','(((.+)+)+)+$','path','orders','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','botID','Balance\x20Bot\x20Server','access','temporary\x20access\x20rejected','15\x20min','existsSync','Notifications\x20enabled\x0a','Password\x20reset\x20rejected','enabled','http','socket.io','settings','filter','config/','Crypt','@analytics/google-analytics','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','5vPMQqR','https://hodlerhacks.com','unlinkSync','Invalid\x20authentication\x20token\x20(2)','search','No\x20authentication\x20token','ipaddr.js','live','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','3aNkYPs','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','delete-bot','12164896kYUwSb','bots','conn','kill','remove','toIPv4MappedAddress','set','login\x20token\x20valid','2FA\x20login\x20token\x20generated','telegramUsername','catch','Notifications\x20types:\x20','expiry','Unauthorized\x20attempt\x20to\x20update\x20settings','data','/:bot','referer','Temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20get\x20portfolio','2FA\x20required','telegram2FaApproval','Bot\x20Mgr\x20>\x20','/:bot/configuration','starting\x20new\x20bot\x20|\x20Bot\x20','-----------------------------------------------------------------------------------','bot.js','sha256','404\x20Not\x20Found','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/help\x20-\x20show\x20available\x20commands\x0a','logout','slice','/status\x20-\x20show\x20bot(s)\x20status\x0a','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','date-fns','HTML','f2aRequired','loginRequired','Error:\x20Invalid\x20argument\x20','parse','login','padStart','send','alerts','hasOwnProperty','get-logs','Unauthorized\x20attempt\x20to\x20add\x20bot','exit','get-starting-balances','sockets','telegramIpApproval','cloneDeep','</b>\x20?','started','remoteAddress','default','max','************','Unauthorized\x20attempt\x20to\x20store\x20configuration','getFullYear','starting\x20bot\x20|\x20Bot\x20','readdirSync','join','new-disabled','success','build2','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','/off\x20-\x20stop\x20bot(s)\x0a','get-portfolio','/on\x20-\x20start\x20bot(s)\x0a','store','fork','getTime','build','error','use','Access\x20enabled\x20for\x20','assign','emitHistory','allow','logged\x20out','idling\x20bot\x20\x20\x20|\x20Bot\x20','lowdb/adapters/FileSync','access\x20timeout','SIGINT','express','push'];_0x58a6=function(){return _0x88314b;};return _0x58a6();}function resetPassword(){const _0x7843dc=_0x5df3f6;tgBot&&settings[_0x7843dc(0x1b1)]&&(tgBot[_0x7843dc(0x199)]('callback_query'),tgBot[_0x7843dc(0x14b)](settings[_0x7843dc(0x1b1)],_0x7843dc(0x142),{'parse_mode':_0x7843dc(0x1fa),'reply_markup':{'inline_keyboard':[[{'text':_0x7843dc(0x26b),'callback_data':_0x7843dc(0x26b)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x59ab73=>{telegramError(_0x59ab73);}),tgBot['on'](_0x7843dc(0x155),async _0x3e51b9=>{const _0x2eca11=_0x7843dc,_0xf8158f=_0x3e51b9[_0x2eca11(0x1e5)],_0x1c014c=_0x3e51b9[_0x2eca11(0x16e)];tgBot[_0x2eca11(0x250)](_0x3e51b9['id'])[_0x2eca11(0x280)](async()=>{const _0x3052f8=_0x2eca11;if(_0xf8158f!='no'){const _0x4bb54a=0xf,_0x23d9b3=_0x3052f8(0x1a3),_0x26f20e=Array[_0x3052f8(0x195)](crypto['randomFillSync'](new Uint32Array(_0x4bb54a)))[_0x3052f8(0x1a9)](_0x5dd39e=>_0x23d9b3[_0x5dd39e%_0x23d9b3[_0x3052f8(0x248)]])['join'](''),_0x1f750b=bcrypt[_0x3052f8(0x150)](_0x26f20e,saltRounds);storeSettings({'bbPassword':_0x1f750b}),await tgBot[_0x3052f8(0x14b)](_0x1c014c[_0x3052f8(0x268)]['id'],_0x3052f8(0x265)+_0x26f20e,{'parse_mode':_0x3052f8(0x1fa)})['catch'](_0x33097f=>{telegramError(_0x33097f);});}else await tgBot['sendMessage'](_0x1c014c[_0x3052f8(0x268)]['id'],_0x3052f8(0x1c1))[_0x3052f8(0x1e1)](_0x597576=>{telegramError(_0x597576);});}),tgBot[_0x2eca11(0x199)](_0x2eca11(0x155));}));}function logging(_0x3d758f){const _0x59c672=_0x5df3f6;console[_0x59c672(0x1ad)](getTimeStamp()+_0x59c672(0x251)+_0x3d758f);if(tgBot&&settings[_0x59c672(0x1b1)]&&settings['telegramEvents']!='orders')tgBot['sendMessage'](settings['telegramChatId'],_0x59c672(0x1ec)+_0x3d758f)[_0x59c672(0x1e1)](_0x5acd60=>{telegramError(_0x5acd60);});}function getServerTime(){const _0x4b9976=_0x5df3f6,_0x306e09=new Date();return _0x306e09[_0x4b9976(0x212)]()+'/'+(_0x306e09[_0x4b9976(0x26f)]()+0x1)[_0x4b9976(0x148)]()[_0x4b9976(0x200)](0x2,'0')+'/'+_0x306e09['getDate']()[_0x4b9976(0x148)]()['padStart'](0x2,'0')+'\x20'+_0x306e09['getHours']()[_0x4b9976(0x148)]()[_0x4b9976(0x200)](0x2,'0')+':'+_0x306e09['getMinutes']()['toString']()[_0x4b9976(0x200)](0x2,'0')+':'+_0x306e09[_0x4b9976(0x15b)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0xedf7d4=_0x5df3f6,_0x234a13=shiftedTime();return _0x234a13[_0xedf7d4(0x212)]()+'/'+(_0x234a13[_0xedf7d4(0x26f)]()+0x1)[_0xedf7d4(0x148)]()[_0xedf7d4(0x200)](0x2,'0')+'/'+_0x234a13['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x234a13[_0xedf7d4(0x169)]()[_0xedf7d4(0x148)]()[_0xedf7d4(0x200)](0x2,'0')+':'+_0x234a13[_0xedf7d4(0x258)]()[_0xedf7d4(0x148)]()[_0xedf7d4(0x200)](0x2,'0')+':'+_0x234a13['getSeconds']()[_0xedf7d4(0x148)]()[_0xedf7d4(0x200)](0x2,'0');}function shiftedTime(){const _0x44f840=_0x5df3f6,_0x3a85ca=new Date();let _0x2051d5=_0x3a85ca;if(settings[_0x44f840(0x1a0)]&&settings[_0x44f840(0x1a0)]!==0x0)_0x2051d5=fns[_0x44f840(0x27c)](_0x3a85ca,{'hours':settings[_0x44f840(0x1a0)]});return _0x2051d5;}function startScheduler(){let _0x3609df=new Date()['getUTCHours']();_0x3609df==0x1&&backupConfigFiles();_0x3609df==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x584a34=_0x5df3f6;fs[_0x584a34(0x214)](configpath,{'withFileTypes':!![]})[_0x584a34(0x26d)](_0x3bc020=>{const _0x3ff227=_0x584a34;if(!_0x3bc020['isDirectory']())fs[_0x3ff227(0x270)](configpath+_0x3bc020[_0x3ff227(0x281)],configbackuppath+_0x3bc020[_0x3ff227(0x281)]);});}function triggerAnalytics(){const _0x2735f9=_0x5df3f6;analytics[_0x2735f9(0x15a)]({'title':_0x2735f9(0x1bb),'href':_0x2735f9(0x1cc),'path':'/v'+serverversion});}function validateCredentials(_0x2c1039,_0x53cb85){const _0xf68531=_0x5df3f6;if(_0x2c1039[_0xf68531(0x239)]==settings[_0xf68531(0x141)]&&bcrypt['compareSync'](_0x2c1039['password'],settings[_0xf68531(0x16c)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0xf68531(0x235),'token':null};else{const _0x4989ed=generateLoginToken(_0x53cb85);return{'allow':!![],'reason':_0xf68531(0x1ab),'token':_0x4989ed};}}else return{'allow':![],'reason':_0xf68531(0x25c),'token':null};}function refreshToken(_0x4a7435){const _0xef42d8=_0x5df3f6,_0xff4b5b=generateLoginToken(_0x4a7435);return{'allow':!![],'reason':_0xef42d8(0x1ab),'token':_0xff4b5b};}function validateAccess(_0x3e12c6,_0x151dc0){const _0x1defe8=_0x5df3f6;let _0x184cab=devices[_0x151dc0]['ip'],_0x493f25;const _0x3fd73d=_0x53c645=>{const _0x3582b3=_0xf9f9;if(settings[_0x3582b3(0x1fc)]){if(settings[_0x3582b3(0x1fb)]){if(telegram2FaApproved(_0x151dc0)){const _0x4e347b=generateLoginToken(_0x151dc0);return{'allow':!![],'reason':_0x3582b3(0x1df),'token':_0x4e347b};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x493f25=validToken(_0x53c645,_0x151dc0),_0x493f25[_0x3582b3(0x203)](_0x3582b3(0x217))?{'allow':!![],'reason':_0x3582b3(0x1de),'token':_0x53c645}:{'allow':![],'reason':_0x3582b3(0x244),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x1defe8(0x158)]){let _0x145962=[...settings[_0x1defe8(0x26a)],_0x1defe8(0x191),'::ffff:127.0.0.1',_0x1defe8(0x162)];if(_0x145962['includes'](_0x184cab))return _0x3fd73d(_0x3e12c6);else{_0x493f25=validToken(_0x3e12c6,_0x151dc0);if(_0x493f25[_0x1defe8(0x203)](_0x1defe8(0x217)))return _0x3fd73d(_0x3e12c6);else{if(telegramIpApproved(_0x151dc0)){const _0x493b1a=generateToken(_0x151dc0);return _0x493f25=_0x3fd73d(_0x3e12c6),_0x493f25[_0x1defe8(0x226)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x493b1a}:_0x493f25;}else return settings[_0x1defe8(0x23d)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x1defe8(0x160),'token':null};}}}else return _0x3fd73d(_0x3e12c6);}function timelyDecrypt(_0x1da3bc,_0x199faa=!![]){const _0x6fe201=_0x5df3f6;if(_0x1da3bc)try{const _0x48d364=crypt[_0x6fe201(0x272)](secure['privateKey'],_0x1da3bc)['message'],_0x267bae=_0x48d364[_0x6fe201(0x269)]('@')[0x0],_0x2e68a4=_0x48d364['split']('@')[0x1],_0x27837d=new Date()['getTime']();if(_0x199faa){if(_0x27837d-_0x2e68a4<maxSecretAge*0x3e8)return _0x267bae;else return![];}else return _0x267bae;}catch(_0xb0b031){return![];}else return![];}const validToken=(_0x514f82,_0x49cd06)=>{const _0x20ccfa=_0x5df3f6,_0x58f9ec=devices[_0x49cd06]['ip'];if(!_0x514f82)return{'error':_0x20ccfa(0x1d0)};for(let _0x6c7d0a of blacklist){if(_0x6c7d0a[_0x20ccfa(0x28a)]==_0x514f82)return{'error':_0x20ccfa(0x1a4)};}let _0x1999cc;try{_0x1999cc=jwt[_0x20ccfa(0x15e)](_0x514f82,secure[_0x20ccfa(0x192)]+_0x49cd06);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x1999cc[_0x20ccfa(0x203)](_0x20ccfa(0x163))&&!_0x1999cc[_0x20ccfa(0x203)](_0x20ccfa(0x239))||!_0x1999cc['hasOwnProperty']('exp'))return{'error':_0x20ccfa(0x1ce)};if(!_0x1999cc['hasOwnProperty'](_0x20ccfa(0x239))&&_0x1999cc[_0x20ccfa(0x203)](_0x20ccfa(0x163))){const {clientip:_0x184f4a}=_0x1999cc;return _0x58f9ec==_0x184f4a?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x20ccfa(0x182)};}else{if(_0x1999cc[_0x20ccfa(0x203)]('username')&&_0x1999cc[_0x20ccfa(0x203)](_0x20ccfa(0x163))){const {username:_0x1c264f,clientip:_0x21cd98}=_0x1999cc;return settings[_0x20ccfa(0x141)]==_0x1c264f&&_0x58f9ec==_0x21cd98?{'success':_0x20ccfa(0x173)}:{'error':_0x20ccfa(0x271)};}}},generateLoginToken=_0x2fd7ce=>{const _0x30930b=_0x5df3f6;if(_0x2fd7ce){const _0x5116e2=devices[_0x2fd7ce]['ip'];return jwt[_0x30930b(0x187)]({'username':settings['bbUsername'],'clientip':_0x5116e2},secure[_0x30930b(0x192)]+_0x2fd7ce,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x25b1d2=>{const _0x3177f1=_0x5df3f6;if(_0x25b1d2){const _0x27566a=devices[_0x25b1d2]['ip'];return jwt[_0x3177f1(0x187)]({'clientip':_0x27566a},secure[_0x3177f1(0x192)]+_0x25b1d2,{'expiresIn':devices[_0x25b1d2]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x307356=>{const _0x55a006=_0x5df3f6;let _0x57e803=![];return devices[_0x307356]['telegramIpApproval']&&devices[_0x307356][_0x55a006(0x209)]['expiry']!=_0x55a006(0x18f)&&(_0x57e803=devices[_0x307356][_0x55a006(0x209)][_0x55a006(0x163)]==devices[_0x307356]['ip']&&new Date()['getTime']()-devices[_0x307356][_0x55a006(0x209)][_0x55a006(0x143)]<devices[_0x307356][_0x55a006(0x209)][_0x55a006(0x1e3)]*0x3c*0x3e8),_0x57e803;},telegram2FaApproved=_0x145373=>{const _0x7b55fb=_0x5df3f6;let _0x5e04e7=![];return devices[_0x145373]['telegram2FaApproval']&&devices[_0x145373][_0x7b55fb(0x1eb)][_0x7b55fb(0x1e3)]!=_0x7b55fb(0x18f)&&(_0x5e04e7=devices[_0x145373][_0x7b55fb(0x1eb)]['clientip']==devices[_0x145373]['ip']&&new Date()[_0x7b55fb(0x21f)]()-devices[_0x145373][_0x7b55fb(0x1eb)][_0x7b55fb(0x143)]<devices[_0x145373][_0x7b55fb(0x1eb)][_0x7b55fb(0x1e3)]*0x3c*0x3e8),_0x5e04e7;},normalizeIP=_0x42d555=>{const _0x2b2cb2=_0x5df3f6;let _0x4f7072=null,_0x921bf1=null;if(ipaddr['isValid'](_0x42d555)){const _0xc6ceb4=ipaddr[_0x2b2cb2(0x1fe)](_0x42d555);_0xc6ceb4[_0x2b2cb2(0x19f)]()===_0x2b2cb2(0x180)?(_0xc6ceb4['isIPv4MappedAddress']()&&(_0x4f7072=_0xc6ceb4[_0x2b2cb2(0x1a2)]()[_0x2b2cb2(0x148)]()),_0x921bf1=_0xc6ceb4[_0x2b2cb2(0x148)]()):(_0x4f7072=_0xc6ceb4[_0x2b2cb2(0x148)](),_0x921bf1=_0xc6ceb4[_0x2b2cb2(0x1dc)]()[_0x2b2cb2(0x148)]());}return{'show':_0x4f7072?_0x4f7072:_0x921bf1,'store':_0x921bf1};};