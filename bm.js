const _0x52bd53=_0x40a9;(function(_0xed6f36,_0x11d3ec){const _0x4dee21=_0x40a9,_0x36e701=_0xed6f36();while(!![]){try{const _0x485e4b=parseInt(_0x4dee21(0x9b))/0x1*(parseInt(_0x4dee21(0x1ed))/0x2)+-parseInt(_0x4dee21(0x128))/0x3*(parseInt(_0x4dee21(0x129))/0x4)+-parseInt(_0x4dee21(0x95))/0x5*(-parseInt(_0x4dee21(0xc6))/0x6)+-parseInt(_0x4dee21(0x166))/0x7*(-parseInt(_0x4dee21(0x28d))/0x8)+parseInt(_0x4dee21(0x16c))/0x9+parseInt(_0x4dee21(0x11f))/0xa*(parseInt(_0x4dee21(0x1c5))/0xb)+-parseInt(_0x4dee21(0x18c))/0xc*(parseInt(_0x4dee21(0x24b))/0xd);if(_0x485e4b===_0x11d3ec)break;else _0x36e701['push'](_0x36e701['shift']());}catch(_0x46e4c0){_0x36e701['push'](_0x36e701['shift']());}}}(_0x3a2a,0xd6b2c));const _0x51c465=function(){let _0x1f9204=!![];return function(_0x3d50e4,_0x951736){const _0xcb50c0=_0x1f9204?function(){const _0x55c4da=_0x40a9;if(_0x951736){const _0x2ecb31=_0x951736[_0x55c4da(0x1d3)](_0x3d50e4,arguments);return _0x951736=null,_0x2ecb31;}}:function(){};return _0x1f9204=![],_0xcb50c0;};}(),_0x31c65c=_0x51c465(this,function(){const _0x209bd0=_0x40a9;return _0x31c65c['toString']()[_0x209bd0(0xab)]('(((.+)+)+)+$')[_0x209bd0(0xf8)]()['constructor'](_0x31c65c)[_0x209bd0(0xab)](_0x209bd0(0x1e8));});_0x31c65c();'use strict';process[_0x52bd53(0x106)][_0x52bd53(0x17b)]=0x1;const childProcess=require(_0x52bd53(0xc5)),fs=require('fs'),fns=require(_0x52bd53(0x283)),low=require(_0x52bd53(0x1eb)),FileSync=require(_0x52bd53(0x1a8)),path=require('path'),crypto=require(_0x52bd53(0x21c)),forge=require(_0x52bd53(0x8c)),bcrypt=require('bcryptjs'),jwt=require(_0x52bd53(0xb2)),ipaddr=require(_0x52bd53(0x1fc)),argv=require('yargs/yargs')(process[_0x52bd53(0x132)][_0x52bd53(0x25e)](0x2))['argv'],uuidRandom=require(_0x52bd53(0x23d)),{Telegraf,Markup}=require(_0x52bd53(0x1bf)),Mixpanel=require(_0x52bd53(0xd2)),axios=require('axios'),{GraphQLClient,gql}=require(_0x52bd53(0x279)),util=require('util'),fileUpload=require(_0x52bd53(0x9f)),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x52bd53(0xc2)]||_0x52bd53(0x109),pattern=/^[0-9]{2,4}$/;!pattern[_0x52bd53(0x196)](PORT)&&(console['log'](_0x52bd53(0xc1)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x52bd53(0x13c)](0x1));const HOST=argv['host']||null,userID=argv[_0x52bd53(0x1fd)]||'',debugging=argv['d']||![],nodeversion=process[_0x52bd53(0xfd)][_0x52bd53(0x172)];let bbpath=_0x52bd53(0x14b),bbpath2='';const botfile=_0x52bd53(0xfe),configfile=_0x52bd53(0x282),settingsfile=_0x52bd53(0x26b),securefile=_0x52bd53(0x271),environment=require('./'+bbpath2+'version.json')['environment']||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x52bd53(0x1ab));let configpath=userID?bbpath+_0x52bd53(0xbc)+userID+'/':bbpath+_0x52bd53(0xbc);const configbackuppath=configpath+_0x52bd53(0x211),logspath=userID?bbpath+_0x52bd53(0xa0)+userID+'/':bbpath+_0x52bd53(0xa0),zippath=userID?bbpath+_0x52bd53(0x175)+userID+'/':bbpath+_0x52bd53(0x175),loggerfile=fs[_0x52bd53(0x1f5)](logspath+_0x52bd53(0xa5),{'flags':'a'}),temppath=userID?bbpath+_0x52bd53(0xce)+userID+'/':bbpath+'temp/';!fs[_0x52bd53(0xda)](configpath)&&fs[_0x52bd53(0x136)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x52bd53(0x136)](configbackuppath);!fs[_0x52bd53(0xda)](logspath)&&fs[_0x52bd53(0x136)](logspath);!fs[_0x52bd53(0xda)](zippath)&&fs[_0x52bd53(0x136)](zippath);!fs[_0x52bd53(0xda)](temppath)&&fs[_0x52bd53(0x136)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x52bd53(0x199)]({'bots':[]})[_0x52bd53(0x104)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x52bd53(0x199)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x52bd53(0x112),'onepagemode':![],'marketcapApi':''}})[_0x52bd53(0x104)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x52bd53(0x199)]({'secure':{},'blacklist':[]})[_0x52bd53(0x104)]();const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x52bd53(0x1d8),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x52bd53(0x27b)]&&(settings[_0x52bd53(0x27b)]!=''&&settings[_0x52bd53(0x27b)]!=_0x52bd53(0x291))&&settings[_0x52bd53(0xc3)]&&settings[_0x52bd53(0xc3)]!='')initTelegram();const parseColor=(_0x2997c2,_0x61bf97)=>{const _0x5793ed=_0x52bd53,_0x456890=/#[A-Z]{3}#/g;if(typeof _0x2997c2==_0x5793ed(0x97)){!_0x61bf97?_0x2997c2=_0x2997c2['replace'](_0x456890,''):(_0x2997c2=_0x2997c2[_0x5793ed(0x1c0)](/#BLU#/g,_0x5793ed(0x12c)),_0x2997c2=_0x2997c2['replace'](/#RED#/g,_0x5793ed(0x12e)),_0x2997c2=_0x2997c2[_0x5793ed(0x1c0)](/#YEL#/g,_0x5793ed(0x23b)),_0x2997c2=_0x2997c2[_0x5793ed(0x1c0)](/#MAG#/g,_0x5793ed(0x259)),_0x2997c2=_0x2997c2[_0x5793ed(0x1c0)](/#CYA#/g,'\x1b[36m'),_0x2997c2=_0x2997c2[_0x5793ed(0x1c0)](/#RES#/g,_0x5793ed(0xc9)));;}return _0x2997c2;},logger={'screen':_0x1d0418=>{const _0x401397=_0x52bd53;console[_0x401397(0x19a)](parseColor(_0x1d0418,!![]));},'simple':_0xf43048=>{const _0xcec05b=_0x52bd53;console[_0xcec05b(0x19a)](parseColor(_0xf43048,!![])),loggerfile[_0xcec05b(0x104)](util[_0xcec05b(0x293)](parseColor(_0xf43048,![]))+'\x0a');},'full':async _0x59f357=>{const _0x2658b8=_0x52bd53,_0x44238b=getTimeStamp()+_0x2658b8(0xff)+_0x59f357;console[_0x2658b8(0x19a)](parseColor(_0x44238b,!![])),loggerfile[_0x2658b8(0x104)](util[_0x2658b8(0x293)](parseColor(_0x44238b,![]))+'\x0a');if(tgBot&&settings[_0x2658b8(0x1cc)]&&settings[_0x2658b8(0xb8)]!=_0x2658b8(0x8e))await sendTelegram(settings[_0x2658b8(0x1cc)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x59f357,![]));},'debug':async(_0x56f033,_0x3d6337='')=>{const _0x484b48=_0x52bd53,_0x48142a=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x56f033;if(debugging)console[_0x484b48(0x19a)](parseColor(_0x48142a,!![]));loggerfile[_0x484b48(0x104)](util[_0x484b48(0x293)](parseColor(_0x48142a,![]))+'\x0a');if(_0x3d6337){if(debugging)console[_0x484b48(0x19a)](_0x3d6337);loggerfile[_0x484b48(0x104)](util[_0x484b48(0x293)](_0x3d6337)+'\x0a');}}};let terminating=![];process['on'](_0x52bd53(0x1d6),function(_0x347515){const _0x4226ae=_0x52bd53;_0x347515[_0x4226ae(0xf8)]()[_0x4226ae(0xb9)](_0x4226ae(0x247))?(logger[_0x4226ae(0x236)](_0x4226ae(0x137)+_0x347515[_0x4226ae(0xc2)]+'#RES#'),process[_0x4226ae(0x121)]({'terminate':!![]},_0xda409=>{})):logger[_0x4226ae(0x236)](_0x347515);}),process['on'](_0x52bd53(0x13c),()=>{const _0x2ee21b=_0x52bd53;stopAllBots(),process[_0x2ee21b(0x13c)](0x0);}),process['on'](_0x52bd53(0x219),()=>{const _0x349f55=_0x52bd53;stopAllBots(),process[_0x349f55(0x13c)](0x0);}),process['on'](_0x52bd53(0x1e5),()=>{const _0x30d829=_0x52bd53;stopAllBots(),process[_0x30d829(0x13c)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x52bd53(0x16e))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x52bd53(0x245))[_0x52bd53(0x168)](app);app[_0x52bd53(0x15a)](fileUpload({'useTempFiles':!![]})),app['get'](_0x52bd53(0xdd),async(_0x57e5c0,_0x260e5c)=>{const _0x318bd3=_0x52bd53,_0x5811ef=_0x57e5c0[_0x318bd3(0x1a7)][_0x318bd3(0x1b2)],_0x341102=getClientsWithBotID('botmanager'),_0x4cc78f=_0x57e5c0['headers'][_0x318bd3(0x125)],_0x22db07=timelyDecrypt(_0x4cc78f,![]),_0x3a4a16=_0x341102[_0x318bd3(0x126)](_0x18e9ff=>_0x18e9ff['uuid']==_0x22db07);if(_0x3a4a16){const _0x398cba=normalizeIP(_0x57e5c0[_0x318bd3(0xf9)][_0x318bd3(0x250)])[_0x318bd3(0x1f7)],_0xda087b=_0x57e5c0[_0x318bd3(0x10e)][_0x318bd3(0x17d)];if(validateAccess(_0xda087b,_0x22db07,_0x398cba)[_0x318bd3(0x21b)])_0x5811ef==_0x318bd3(0x1dd)&&await backupConfigFiles(),await zipFiles(_0x5811ef),_0x260e5c[_0x318bd3(0x17f)](zippath+(_0x5811ef+_0x318bd3(0x99)),_0x473b24=>{const _0x5f54bf=_0x318bd3;_0x473b24&&(logger[_0x5f54bf(0x133)](_0x5f54bf(0x182)+_0x5811ef),logger[_0x5f54bf(0x236)](_0x473b24));});else logger[_0x318bd3(0x133)](_0x318bd3(0x1e6)+_0x5811ef+_0x318bd3(0x103));}else logger['full'](_0x318bd3(0x1e6)+_0x5811ef+'\x20(2)');}),app[_0x52bd53(0x1c7)]('/upload-backup',async(_0x25dd8a,_0x1616bd)=>{const _0x2c39a6=_0x52bd53,_0x1cb5cd=getClientsWithBotID(_0x2c39a6(0xea)),_0x12005b=_0x25dd8a[_0x2c39a6(0x10e)][_0x2c39a6(0x125)],_0x19d65c=timelyDecrypt(_0x12005b,![]),_0x57c6df=_0x1cb5cd['find'](_0xbd2d9a=>_0xbd2d9a[_0x2c39a6(0x125)]==_0x19d65c);logger[_0x2c39a6(0x20b)]('Backup\x20file\x20uploaded');if(_0x57c6df){const _0x51b463=normalizeIP(_0x25dd8a['socket'][_0x2c39a6(0x250)])[_0x2c39a6(0x1f7)],_0x40ce53=_0x25dd8a['headers'][_0x2c39a6(0x17d)];if(validateAccess(_0x40ce53,_0x19d65c,_0x51b463)[_0x2c39a6(0x21b)]){if(_0x25dd8a[_0x2c39a6(0x110)]){const _0x223ba4=_0x25dd8a[_0x2c39a6(0x110)][_0x2c39a6(0x28f)];await _0x223ba4['mv'](temppath+_0x223ba4[_0x2c39a6(0x25b)]),_0x1616bd[_0x2c39a6(0x121)]({'status':!![],'message':_0x2c39a6(0x286)});const _0x486fcc=getBotsWithMode();_0x486fcc[_0x2c39a6(0x1ad)]>0x0?confirmRestore(temppath,_0x223ba4['name']):unzipFile(temppath,_0x223ba4[_0x2c39a6(0x25b)]);}}else logger[_0x2c39a6(0x133)](_0x2c39a6(0x184));}else logger[_0x2c39a6(0x133)](_0x2c39a6(0x272));}),app[_0x52bd53(0x15a)](express[_0x52bd53(0x269)](path[_0x52bd53(0x220)](__dirname,bbpath2,'build2'))),app[_0x52bd53(0x15a)](express['static'](path[_0x52bd53(0x220)](__dirname,bbpath2,'build'))),app[_0x52bd53(0x203)]('/',function(_0x37057d,_0x6697f){const _0x161992=_0x52bd53;_0x6697f[_0x161992(0x22d)](path['join'](__dirname,bbpath2,_0x161992(0x10b),_0x161992(0x223)));}),app[_0x52bd53(0x203)](_0x52bd53(0x1a2),function(_0x4ef885,_0x50b27f){const _0x43824b=_0x52bd53;_0x50b27f[_0x43824b(0x22d)](path[_0x43824b(0x220)](__dirname,bbpath2,_0x43824b(0x8f),_0x43824b(0x223)));}),app[_0x52bd53(0x203)](_0x52bd53(0xad),(_0x3c46c8,_0x17d961)=>{const _0xffe1ff=_0x52bd53;_0x17d961[_0xffe1ff(0x22d)](path[_0xffe1ff(0x220)](__dirname,bbpath2,'build',_0xffe1ff(0x223)));}),app[_0x52bd53(0x203)](_0x52bd53(0x111),(_0x5abd9c,_0x442681)=>{const _0x5ed690=_0x52bd53;_0x442681['sendFile'](path[_0x5ed690(0x220)](__dirname,bbpath2,_0x5ed690(0x8f),'index.html'));}),app['get']('/:bot/coins',(_0x43cddc,_0x2354f0)=>{const _0x10191f=_0x52bd53;_0x2354f0[_0x10191f(0x22d)](path[_0x10191f(0x220)](__dirname,bbpath2,_0x10191f(0x8f),_0x10191f(0x223)));}),app[_0x52bd53(0x203)](_0x52bd53(0x16f),(_0x44269e,_0x255c94)=>{const _0x23b89a=_0x52bd53;_0x255c94[_0x23b89a(0x22d)](path[_0x23b89a(0x220)](__dirname,bbpath2,'build',_0x23b89a(0x223)));}),app[_0x52bd53(0x203)]('/:bot/configuration',(_0x2dd480,_0x51dcb6)=>{const _0x56ddf9=_0x52bd53;_0x51dcb6[_0x56ddf9(0x22d)](path[_0x56ddf9(0x220)](__dirname,bbpath2,_0x56ddf9(0x8f),_0x56ddf9(0x223)));}),app[_0x52bd53(0x203)](_0x52bd53(0xe4),(_0x2610ef,_0x3c0f88)=>{const _0x4ef1ea=_0x52bd53;_0x3c0f88[_0x4ef1ea(0x22d)](path[_0x4ef1ea(0x220)](__dirname,bbpath2,_0x4ef1ea(0x8f),_0x4ef1ea(0x223)));});if(HOST)http[_0x52bd53(0x131)](PORT,HOST);else http['listen'](PORT);const io=require(_0x52bd53(0xc0))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x26028d=_0x52bd53;let _0x2b4f57=_0x26028d(0xa1);const _0x55921b=networkInterfaces(),_0xf18d96={};for(const _0x123fde of Object[_0x26028d(0x14a)](_0x55921b)){for(const _0x26c094 of _0x55921b[_0x123fde]){if((_0x26c094[_0x26028d(0x92)]==_0x26028d(0xf1)||_0x26c094[_0x26028d(0x92)]==0x4)&&!_0x26c094[_0x26028d(0xe8)]){const _0x1f9b4f=ipaddr['parse'](_0x26c094[_0x26028d(0xcc)])[_0x26028d(0xaa)]();_0x1f9b4f!=_0x26028d(0x159)&&(!_0xf18d96[_0x123fde]&&(_0xf18d96[_0x123fde]=[]),_0xf18d96[_0x123fde][_0x26028d(0xdc)](_0x26c094[_0x26028d(0xcc)]),_0x2b4f57=_0x26c094[_0x26028d(0xcc)]);}}}return{'serverip':_0x2b4f57,'netinterfaces':_0xf18d96};}async function startServer(){const _0x5cd9cf=_0x52bd53,{serverip:_0x4873a1,netinterfaces:_0x54a9e8}=getServerIP();logger[_0x5cd9cf(0x236)](''),logger['simple'](_0x5cd9cf(0xd7)),await logger[_0x5cd9cf(0x133)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x20'+(environment==_0x5cd9cf(0xf0)?_0x5cd9cf(0x234):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x5cd9cf(0x18e))+(_0x5cd9cf(0x266)+_0x4873a1+':'+PORT+_0x5cd9cf(0x10d))),logger[_0x5cd9cf(0x236)](_0x5cd9cf(0xd7));if(config[_0x5cd9cf(0x1ad)]!=0x0)for(const _0x515967 of config){const _0x494af2=_0x515967['mode']=='auto'?'a':'m';if(_0x515967[_0x5cd9cf(0x277)]==_0x5cd9cf(0x268)||_0x515967[_0x5cd9cf(0x277)]==_0x5cd9cf(0x173))await logger['full'](_0x5cd9cf(0x20e)+_0x494af2+_0x5cd9cf(0x215)+_0x515967['botID']+'\x20|\x20'+_0x515967[_0x5cd9cf(0x171)]),startBot([_0x515967[_0x5cd9cf(0x139)],userID],{'cwd':bbpath},function(_0x5cd7bc){const _0x3a6463=_0x5cd9cf;if(_0x5cd7bc)logger[_0x3a6463(0x133)](_0x5cd7bc);});else(_0x515967[_0x5cd9cf(0x277)]==_0x5cd9cf(0x1d1)||_0x515967[_0x5cd9cf(0x277)]==_0x5cd9cf(0x224))&&await logger['full'](_0x5cd9cf(0x122)+_0x494af2+_0x5cd9cf(0x18b)+_0x515967[_0x5cd9cf(0x139)]+_0x5cd9cf(0x148)+_0x515967[_0x5cd9cf(0x171)]);}else!newBot&&logger[_0x5cd9cf(0x236)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x5cd9cf(0x236)](_0x5cd9cf(0xd7)),logger[_0x5cd9cf(0x236)](''),await logger[_0x5cd9cf(0x20b)](_0x5cd9cf(0x114)+nodeversion),await logger[_0x5cd9cf(0x20b)](_0x5cd9cf(0x183),_0x54a9e8);}function startSocket(){const _0x3dacb7=_0x52bd53;io['on'](_0x3dacb7(0x120),_0xb5f2b7=>{const _0x53bee8=_0x3dacb7;let _0x3187d0,_0x53c45f,_0x1dc04c,_0x4fddd2,_0x87f77e;const _0x17c48f=_0xb5f2b7['handshake']['headers'][_0x53bee8(0x187)];_0x53c45f=_0x17c48f['match'](/bot[0-9]{3}/);if(_0x53c45f)_0x1dc04c=_0x53c45f[0x0][_0x53bee8(0x1dc)](/[0-9]{3}/);if(_0x1dc04c)_0x3187d0=_0x1dc04c[0x0];else _0x3187d0=_0x53bee8(0xea);const _0x442edb=_0xb5f2b7[_0x53bee8(0x1a6)][_0x53bee8(0x152)][_0x53bee8(0x23a)];if(!_0x442edb)_0xb5f2b7['emit'](_0x53bee8(0x277),{'publicKey':secure['publicKey']});else{_0x4fddd2=timelyDecrypt(_0x442edb,![]);if(!_0x4fddd2)_0xb5f2b7[_0x53bee8(0x18f)]('status',{'publicKey':secure[_0x53bee8(0x127)]});else{_0x87f77e=normalizeIP(_0xb5f2b7[_0x53bee8(0x1d7)]['remoteAddress'])[_0x53bee8(0x1f7)];if(!devices[_0x4fddd2])devices[_0x4fddd2]={'uuid':_0x4fddd2,'access':{'token':null}};devices[_0x4fddd2]['ip']=_0x87f77e;const _0x5a80be=addClient(_0xb5f2b7['id'],_0x4fddd2,_0x3187d0);setAccess(_0x5a80be),emitMessages(),_0xb5f2b7['on'](_0x53bee8(0x10a),_0x5e823f=>{const _0x5ed2d0=_0x53bee8,_0x5d8614=timelyDecrypt(_0x5e823f[_0x5ed2d0(0x22a)],!![],'|@|');if(_0x5d8614){_0x5e823f={'username':_0x5e823f[_0x5ed2d0(0x1f6)],'password':_0x5d8614},devices[_0x4fddd2]['access']=validateCredentials(_0x5e823f,_0x4fddd2);if(devices[_0x4fddd2][_0x5ed2d0(0x228)][_0x5ed2d0(0x21b)]==![]&&devices[_0x4fddd2]['access']['reason']==_0x5ed2d0(0x98))_0xb5f2b7[_0x5ed2d0(0x18f)](_0x5ed2d0(0x277),{'access':devices[_0x4fddd2][_0x5ed2d0(0x228)]}),loginAccess2FA(_0x4fddd2,_0x87f77e);else{if(devices[_0x4fddd2][_0x5ed2d0(0x228)][_0x5ed2d0(0x21b)]==![]&&devices[_0x4fddd2][_0x5ed2d0(0x228)][_0x5ed2d0(0xac)]=='invalid\x20credentials')_0xb5f2b7['emit'](_0x5ed2d0(0x277),{'access':devices[_0x4fddd2][_0x5ed2d0(0x228)]});else devices[_0x4fddd2][_0x5ed2d0(0x228)]['allow']&&devices[_0x4fddd2][_0x5ed2d0(0x228)][_0x5ed2d0(0xac)]==_0x5ed2d0(0x13b)&&(getClientsWithUuid(_0x4fddd2)[_0x5ed2d0(0x1b0)](_0xe87cce=>{setAccess(_0xe87cce);}),logger[_0x5ed2d0(0x20b)](_0x5ed2d0(0xe3)+_0x4fddd2[_0x5ed2d0(0x25e)](-0x8)),setTokenRefresh(_0x4fddd2),setSessionTimeout(_0x5ed2d0(0x10a),_0x4fddd2));}}else logger['full'](_0x5ed2d0(0x9c));}),_0xb5f2b7['on']('reset-password',()=>{resetPassword();}),_0xb5f2b7['on'](_0x53bee8(0x258),_0x568e21=>{removeClient(_0xb5f2b7['id']);}),_0x3187d0==_0x53bee8(0xea)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1280ba){const _0x49fb99=_0x52bd53;if(_0x1280ba!=_0x49fb99(0xea)&&config[_0x49fb99(0x198)]!=''){if(pid[_0x1280ba])pid[_0x1280ba]['send']({'function':_0x49fb99(0x1c9),'args':null});}_0x1280ba!=_0x49fb99(0xea)&&broadcastToBots(_0x49fb99(0x161),JSON['stringify'](config));}function reloadBotManager(){const _0x57c8a9=_0x52bd53;getClientsWithBotID(_0x57c8a9(0xea))[_0x57c8a9(0x1b0)](_0x3cffb1=>{const _0x222e0d=_0x57c8a9;getSocket(_0x3cffb1['id'])[_0x222e0d(0x18f)](_0x222e0d(0x277),{'access':{'allow':![],'reason':_0x222e0d(0x221),'token':null}});});}function getSocket(_0x3f406b){const _0x4784db=_0x52bd53,_0x192d89=io[_0x4784db(0x25d)][_0x4784db(0x203)]('/');return _0x192d89[_0x4784db(0x261)][_0x4784db(0x203)](_0x3f406b);}function setAccess(_0x2ef73d){const _0x922c51=_0x52bd53,_0x24ebaf=getSocket(_0x2ef73d['id']),_0x44cc05=_0x2ef73d[_0x922c51(0x125)],_0x5a3a67=_0x2ef73d[_0x922c51(0x26f)];devices[_0x44cc05][_0x922c51(0x228)]=validateAccess(devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0x124)],_0x44cc05),logger[_0x922c51(0x20b)](_0x922c51(0x1ce)+devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0xac)]+'\x20|\x20client:\x20...'+_0x2ef73d['id'][_0x922c51(0x25e)](-0x8)+_0x922c51(0x1b1)+_0x44cc05[_0x922c51(0x25e)](-0x8)),_0x24ebaf['join'](_0x44cc05);if(devices[_0x44cc05][_0x922c51(0x228)]['allow']){_0x24ebaf[_0x922c51(0x220)](_0x5a3a67);if(_0x5a3a67==_0x922c51(0xea))initializeSocketBotManager(_0x24ebaf);else initializeSocketBot(_0x24ebaf);initClient(_0x5a3a67);}devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0x124)]&&devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0xac)]==_0x922c51(0x157)&&setSessionTimeout(_0x922c51(0x248),_0x44cc05),devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0x124)]&&devices[_0x44cc05][_0x922c51(0x228)]['reason']==_0x922c51(0x88)&&setSessionTimeout(_0x922c51(0x10a),_0x44cc05),_0x24ebaf['emit'](_0x922c51(0x277),{'status':_0x2ef73d[_0x922c51(0x11b)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x44cc05][_0x922c51(0x228)],'externalip':devices[_0x44cc05]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x922c51(0x188)],'validInstallation':validInstallation}),devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0x21b)]==![]&&devices[_0x44cc05][_0x922c51(0x228)][_0x922c51(0xac)]==_0x922c51(0x149)&&temporaryAccess2FA(_0x44cc05,devices[_0x44cc05]['ip']);}function setSessionTimeout(_0x22ae52,_0x2bb704){const _0x30318c=_0x52bd53;let _0x36e792;if(_0x22ae52=='login')_0x36e792=loginExpiry*0x3c*0x3e8;else _0x36e792=devices[_0x2bb704][_0x30318c(0x143)][_0x30318c(0xae)]*0x3c*0x3e8-(new Date()[_0x30318c(0x208)]()-devices[_0x2bb704][_0x30318c(0x143)][_0x30318c(0xd4)]);if(devices[_0x2bb704]['pidExpireLogin'])clearTimeout(devices[_0x2bb704]['pidExpireLogin']);devices[_0x2bb704][_0x30318c(0xd0)]=setTimeout(()=>{const _0x585452=_0x30318c;if(devices[_0x2bb704][_0x585452(0x8a)])clearTimeout(devices[_0x2bb704][_0x585452(0x8a)]);removeSocketListeners(_0x2bb704),addBlacklist(_0x2bb704),devices[_0x2bb704][_0x585452(0x143)]=null,devices[_0x2bb704]['telegram2FaApproval']=null,devices[_0x2bb704][_0x585452(0x228)][_0x585452(0x124)]=null,logger[_0x585452(0x20b)](_0x585452(0xb6)+_0x2bb704[_0x585452(0x25e)](-0x8)),devices[_0x2bb704][_0x585452(0x228)]=validateAccess(devices[_0x2bb704][_0x585452(0x228)][_0x585452(0x124)],_0x2bb704),!(devices[_0x2bb704][_0x585452(0x228)]['allow']&&devices[_0x2bb704]['access'][_0x585452(0xac)]==_0x585452(0xe6))&&(_0x22ae52==_0x585452(0x10a)?io['to'](_0x2bb704)['emit'](_0x585452(0x277),{'access':{'allow':![],'reason':_0x585452(0x1a5),'token':null}}):io['to'](_0x2bb704)[_0x585452(0x18f)]('status',{'access':{'allow':![],'reason':_0x585452(0xe7),'token':null}})),devices[_0x2bb704]['access']['token']=null;},_0x36e792);}function setTokenRefresh(_0x5701d7){const _0x1b131f=_0x52bd53;if(devices[_0x5701d7][_0x1b131f(0x8a)])clearTimeout(devices[_0x5701d7]['pidRefreshToken']);devices[_0x5701d7][_0x1b131f(0x8a)]=setTimeout(()=>{const _0x5d0c15=_0x1b131f;getClientsWithUuid(_0x5701d7)[_0x5d0c15(0x1ad)]!=0x0?(devices[_0x5701d7][_0x5d0c15(0x228)]=refreshToken(_0x5701d7),io['to'](_0x5701d7)[_0x5d0c15(0x18f)]('status',{'status':_0x5d0c15(0x101),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5701d7][_0x5d0c15(0x228)],'externalip':devices[_0x5701d7]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x5701d7)):clearTimeout(devices[_0x5701d7][_0x5d0c15(0x8a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1e1041){const _0x152d07=_0x52bd53,_0x476240=getClient(_0x1e1041['id'])[_0x152d07(0x125)];_0x1e1041[_0x152d07(0x18f)](_0x152d07(0x161),config),_0x1e1041[_0x152d07(0x18f)](_0x152d07(0x1b3),cleanSettings()),_0x1e1041['on']('add-bot',_0x1ecad4=>{const _0x52dafc=_0x152d07;if(validateAccess(_0x1ecad4,_0x476240)[_0x52dafc(0x21b)])addBot();else logger[_0x52dafc(0x133)](_0x52dafc(0xa4));}),_0x1e1041['on'](_0x152d07(0x130),(_0x13b5a6,_0x4d3164)=>{const _0x22ecf7=_0x152d07;if(validateAccess(_0x4d3164,_0x476240)[_0x22ecf7(0x21b)])toggleBot(_0x13b5a6['botID'],_0x13b5a6['status'],_0x13b5a6[_0x22ecf7(0x20f)]);else logger['full'](_0x22ecf7(0xd3));}),_0x1e1041['on'](_0x152d07(0x252),(_0xea1f16,_0x2371ec)=>{const _0x5e7eb4=_0x152d07;if(validateAccess(_0x2371ec,_0x476240)[_0x5e7eb4(0x21b)])toggleBotMode(_0xea1f16);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1e1041['on']('delete-bot',(_0x4f612a,_0x1651e9)=>{const _0x3e06b7=_0x152d07;if(validateAccess(_0x1651e9,_0x476240)[_0x3e06b7(0x21b)])deleteBot(_0x4f612a);else logger[_0x3e06b7(0x133)](_0x3e06b7(0x93));}),_0x1e1041['on'](_0x152d07(0x22e),(_0x50ec03,_0x49d2d4)=>{const _0x3115c4=_0x152d07;if(validateAccess(_0x49d2d4,_0x476240)[_0x3115c4(0x21b)])storeSettings(_0x50ec03,!![]);else logger[_0x3115c4(0x133)](_0x3115c4(0xfa));}),_0x1e1041['on'](_0x152d07(0x243),_0x467598=>{const _0x105fff=_0x152d07;if(validateAccess(_0x467598,_0x476240)['allow'])updateBB(_0x105fff(0x285));else logger[_0x105fff(0x133)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1e1041['on'](_0x152d07(0x1db),_0x320480=>{const _0x7e4689=_0x152d07;if(validateAccess(_0x320480,_0x476240)[_0x7e4689(0x21b)])updateBB('reinstall');else logger[_0x7e4689(0x133)](_0x7e4689(0x230));}),_0x1e1041['on']('get-backup-files',_0x4f4862=>{const _0x4846af=_0x152d07;if(validateAccess(_0x4f4862,_0x476240)[_0x4846af(0x21b)]){const _0x84225d=getClient(_0x1e1041['id']);if(_0x84225d)getBackupFiles(_0x84225d['uuid']);else logger[_0x4846af(0x133)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x4846af(0x133)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x1e1041['on'](_0x152d07(0x195),(_0x4227c3,_0x43cd78)=>{const _0x5d9814=_0x152d07;if(validateAccess(_0x43cd78,_0x476240)['allow'])restoreBackupFile(_0x4227c3);else logger[_0x5d9814(0x133)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x1e1041['on'](_0x152d07(0x181),_0x4cda17=>{const _0x58da40=_0x152d07;if(validateAccess(_0x4cda17,_0x476240)[_0x58da40(0x21b)])getMessages();else logger[_0x58da40(0x133)](_0x58da40(0x290));}),_0x1e1041['on'](_0x152d07(0x19b),(_0x5cefaa,_0x1bb800)=>{const _0x1e4761=_0x152d07;if(validateAccess(_0x1bb800,_0x476240)[_0x1e4761(0x21b)])confirmMessage(_0x5cefaa);else logger[_0x1e4761(0x133)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1e1041['on']('logout',_0x439aeb=>{const _0x68f48c=_0x152d07;if(validateAccess(_0x439aeb,_0x476240)[_0x68f48c(0x21b)]){if(devices[_0x476240][_0x68f48c(0x8a)])clearTimeout(devices[_0x476240][_0x68f48c(0x8a)]);if(devices[_0x476240][_0x68f48c(0xd0)])clearTimeout(devices[_0x476240][_0x68f48c(0xd0)]);removeSocketListeners(getClient(_0x1e1041['id'])[_0x68f48c(0x125)]),addBlacklist(_0x476240),devices[_0x476240][_0x68f48c(0x143)]=null,devices[_0x476240][_0x68f48c(0x91)]=null,devices[_0x476240]['access'][_0x68f48c(0x124)]=null,logger[_0x68f48c(0x20b)](_0x68f48c(0x1b7)+_0x476240[_0x68f48c(0x25e)](-0x8)),io['to'](getClient(_0x1e1041['id'])[_0x68f48c(0x125)])[_0x68f48c(0x18f)](_0x68f48c(0x277),{'access':{'allow':![],'reason':_0x68f48c(0x264),'token':null}});}else logger['full'](_0x68f48c(0xa2));});}function initializeSocketBot(_0x199324){const _0x217002=_0x52bd53,_0x18b9f6=getClient(_0x199324['id'])[_0x217002(0x26f)],_0x4a01ef=getClient(_0x199324['id'])[_0x217002(0x125)];_0x199324['on']('get-logs',(_0x1ace83,_0x7a6b85)=>{const _0x136c08=_0x217002;if(validateAccess(_0x7a6b85,_0x4a01ef)['allow']){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x136c08(0x121)]({'function':_0x136c08(0x1e0),'args':_0x1ace83});}else logger[_0x136c08(0x133)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x199324['on'](_0x217002(0x86),(_0x1924df,_0x53f4da)=>{const _0x180fad=_0x217002;if(validateAccess(_0x53f4da,_0x4a01ef)[_0x180fad(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6]['send']({'function':_0x180fad(0x165),'args':_0x1924df});}else logger[_0x180fad(0x133)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x199324['on'](_0x217002(0x144),(_0xdfbe28,_0x37c800)=>{const _0x30c649=_0x217002;if(validateAccess(_0x37c800,_0x4a01ef)['allow']){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x30c649(0x121)]({'function':_0x30c649(0x190),'args':_0xdfbe28});}else logger[_0x30c649(0x133)](_0x30c649(0x1f1));}),_0x199324['on'](_0x217002(0x1ca),(_0x3d634b,_0x397abb)=>{const _0x18ee7e=_0x217002;if(validateAccess(_0x397abb,_0x4a01ef)[_0x18ee7e(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6]['send']({'function':_0x18ee7e(0x9e),'args':_0x3d634b});}else logger[_0x18ee7e(0x133)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x199324['on'](_0x217002(0x22c),(_0x2bd808,_0x552a7)=>{const _0x1afbaa=_0x217002;if(validateAccess(_0x552a7,_0x4a01ef)[_0x1afbaa(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x1afbaa(0x121)]({'function':_0x1afbaa(0xd6),'args':_0x2bd808});}else logger['full'](_0x1afbaa(0x189));}),_0x199324['on'](_0x217002(0x15d),(_0x382795,_0x50beed)=>{const _0x44414a=_0x217002;if(validateAccess(_0x50beed,_0x4a01ef)[_0x44414a(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6]['send']({'function':_0x44414a(0xa9),'args':_0x382795});}else logger[_0x44414a(0x133)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x199324['on']('reset-history',_0x332bd5=>{const _0x59ef1a=_0x217002;if(validateAccess(_0x332bd5,_0x4a01ef)[_0x59ef1a(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6]['send']({'function':_0x59ef1a(0x14d),'args':null});}else logger[_0x59ef1a(0x133)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x199324['on'](_0x217002(0x1ea),_0x46936d=>{const _0x1a4907=_0x217002;if(validateAccess(_0x46936d,_0x4a01ef)[_0x1a4907(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x1a4907(0x121)]({'function':_0x1a4907(0x23f),'args':null});}else logger['full'](_0x1a4907(0x25f));}),_0x199324['on']('place-order',(_0x50e7ed,_0x2316a7)=>{const _0xee4c29=_0x217002;if(validateAccess(_0x2316a7,_0x4a01ef)[_0xee4c29(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6][_0xee4c29(0x121)]({'function':_0xee4c29(0x21f),'args':_0x50e7ed});}else logger['full'](_0xee4c29(0x24d));}),_0x199324['on'](_0x217002(0x289),_0xac11a2=>{const _0x4bd6c1=_0x217002;if(validateAccess(_0xac11a2,_0x4a01ef)[_0x4bd6c1(0x21b)]){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x4bd6c1(0x121)]({'function':_0x4bd6c1(0x1bb),'args':null});}else logger[_0x4bd6c1(0x133)](_0x4bd6c1(0x1d0));}),_0x199324['on'](_0x217002(0x241),_0x2d0439=>{const _0x4a1e21=_0x217002;if(validateAccess(_0x2d0439,_0x4a01ef)['allow']){if(pid[_0x18b9f6])pid[_0x18b9f6][_0x4a1e21(0x121)]({'function':_0x4a1e21(0x1bc),'args':null});}else logger[_0x4a1e21(0x133)](_0x4a1e21(0x11e));}),_0x199324['on'](_0x217002(0x243),_0x432c4b=>{const _0x78145b=_0x217002;if(validateAccess(_0x432c4b,_0x4a01ef)[_0x78145b(0x21b)])updateBB(_0x78145b(0x285));else logger[_0x78145b(0x133)](_0x78145b(0x167));}),_0x199324['on'](_0x217002(0x181),_0x1a9651=>{const _0x4d7e21=_0x217002;if(validateAccess(_0x1a9651,_0x4a01ef)[_0x4d7e21(0x21b)])getMessages();else logger[_0x4d7e21(0x133)](_0x4d7e21(0x290));}),_0x199324['on']('confirm-message',(_0x425dbd,_0x4b2351)=>{const _0x1272c0=_0x217002;if(validateAccess(_0x4b2351,_0x4a01ef)[_0x1272c0(0x21b)])confirmMessage(_0x425dbd);else logger[_0x1272c0(0x133)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x199324['on'](_0x217002(0x1b5),_0x11a364=>{const _0x51a3be=_0x217002;if(validateAccess(_0x11a364,_0x4a01ef)['allow']){if(devices[_0x4a01ef][_0x51a3be(0x8a)])clearTimeout(devices[_0x4a01ef]['pidRefreshToken']);if(devices[_0x4a01ef][_0x51a3be(0xd0)])clearTimeout(devices[_0x4a01ef][_0x51a3be(0xd0)]);removeSocketListeners(getClient(_0x199324['id'])['uuid']),addBlacklist(_0x4a01ef),devices[_0x4a01ef]['telegramIpApproval']=null,devices[_0x4a01ef][_0x51a3be(0x91)]=null,devices[_0x4a01ef][_0x51a3be(0x228)][_0x51a3be(0x124)]=null,logger[_0x51a3be(0x20b)]('Logged\x20out\x20user\x20...'+_0x4a01ef['slice'](-0x8)),io['to'](getClient(_0x199324['id'])['uuid'])[_0x51a3be(0x18f)](_0x51a3be(0x277),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x51a3be(0x133)](_0x51a3be(0xa2));});}function removeSocketListeners(_0x314e32){const _0xe24722=_0x52bd53;getClientsWithUuid(_0x314e32)[_0xe24722(0x1b0)](_0x501ed2=>{const _0x2581fe=_0xe24722;getSocket(_0x501ed2['id'])[_0x2581fe(0x1f9)]();});}function cleanSettings(){const _0x1bc7de=_0x52bd53;let _0x418a11=settings;return settings['telegramToken']&&settings[_0x1bc7de(0x27b)]!=''&&(_0x418a11={..._0x418a11,'telegramToken':'************'}),settings[_0x1bc7de(0x87)]&&settings[_0x1bc7de(0x87)]!=''&&(_0x418a11={..._0x418a11,'bbPassword':_0x1bc7de(0xf5)}),settings[_0x1bc7de(0x96)]&&settings['marketcapApi']!=''&&(_0x418a11={..._0x418a11,'marketcapApi':_0x1bc7de(0xf5)}),(settings[_0x1bc7de(0x87)]&&settings[_0x1bc7de(0x87)]==_0x1bc7de(0x291)||settings[_0x1bc7de(0x27b)]&&settings['telegramToken']==_0x1bc7de(0x291)||settings[_0x1bc7de(0x96)]&&settings[_0x1bc7de(0x96)]=='***')&&(_0x418a11={..._0x418a11,'restored':{'password':settings[_0x1bc7de(0x87)]==_0x1bc7de(0x291),'telegram':settings[_0x1bc7de(0x27b)]==_0x1bc7de(0x291),'marketcap':settings[_0x1bc7de(0x96)]==_0x1bc7de(0x291)}}),_0x418a11;}async function updateBB(_0x48abd2){const _0x510c00=_0x52bd53;await backupConfigFiles(),installingUpdate=!![],config[_0x510c00(0x1b0)](_0x2f54d2=>{const _0x1242bd=_0x510c00;restartBot(_0x2f54d2[_0x1242bd(0x139)]);});if(_0x48abd2==_0x510c00(0x285))process['send']({'update':!![],'environment':environment},_0x577f0a=>{});else _0x48abd2==_0x510c00(0xf2)&&process[_0x510c00(0x121)]({'reinstall':!![],'environment':environment},_0x1bac3e=>{});}function startBot(_0x2d6fc4,_0x37b182,_0x4c6204){const _0x27b883=_0x52bd53;if(debugging)_0x2d6fc4[_0x27b883(0xdc)]('-d');let _0x25b21a=![];const _0x41bbb3=_0x2d6fc4[0x0];_0x37b182={..._0x37b182,'stdio':[_0x27b883(0x162),_0x27b883(0x162),_0x27b883(0x162),_0x27b883(0x13e)]},pid[_0x41bbb3]=childProcess['fork'](botfile,_0x2d6fc4,_0x37b182),pid[_0x41bbb3]['on']('message',_0x4303cc=>{const _0x4c6700=_0x27b883;switch(Object['keys'](_0x4303cc)[0x0]){case _0x4c6700(0x171):updateBotName(_0x41bbb3,_0x4303cc[_0x4c6700(0x171)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x41bbb3,_0x4303cc[_0x4c6700(0x277)]);break;case _0x4c6700(0x20f):updateLive(_0x41bbb3,_0x4303cc[_0x4c6700(0x20f)]);break;case _0x4c6700(0x156):updateLive(_0x41bbb3,_0x4303cc[_0x4c6700(0x156)]),io['to'](_0x41bbb3)[_0x4c6700(0x18f)](_0x4c6700(0x277),{'access':{'allow':![],'reason':_0x4c6700(0x221),'token':null}});break;case _0x4c6700(0x26e):_0x4303cc[_0x4c6700(0x26e)]==_0x4c6700(0x18a)&&restartBot(_0x41bbb3);_0x4303cc['stop']==_0x4c6700(0xd1)&&toggleBot(_0x41bbb3,'disabled',_0x4c6700(0x15c));break;case _0x4c6700(0x8d):sendTelegramBot(_0x41bbb3,_0x4303cc[_0x4c6700(0x8d)]);break;case _0x4c6700(0x20d):sendTelegramMsg(_0x4303cc[_0x4c6700(0x20d)]);break;case'function':io['to'](_0x41bbb3)[_0x4c6700(0x18f)](_0x4303cc['function'],_0x4303cc['args']);break;}}),pid[_0x41bbb3]['on']('error',function(_0x4ef73b){if(_0x25b21a)return;_0x25b21a=!![],_0x4c6204(_0x4ef73b);}),pid[_0x41bbb3]['on'](_0x27b883(0x13c),async function(_0x2f1557){const _0x383096=_0x27b883;if(terminating)return;if(installingUpdate){logger['debug']('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io['close']();return;}if(_0x25b21a)return;_0x25b21a=!![],_0x4c6204(null);const _0x4b5b96=dbConfig[_0x383096(0x203)](_0x383096(0x161))[_0x383096(0x126)]({'botID':_0x41bbb3})[_0x383096(0x115)]();_0x4b5b96&&(_0x4b5b96[_0x383096(0x277)]=='enabled'||_0x4b5b96[_0x383096(0x277)]==_0x383096(0x173))&&(await sleep(0x3e8),updateLive(_0x41bbb3,_0x383096(0x15c)),logger['full']('Restarting\x20Bot\x20'+_0x41bbb3),startBot([_0x41bbb3,userID],{'cwd':bbpath},function(_0x5e5f4f){const _0x4ecbe9=_0x383096;if(_0x5e5f4f)logger[_0x4ecbe9(0x133)](_0x5e5f4f);}));});}function stopBot(_0x543887){const _0x2c7cd7=_0x52bd53;getClientsWithBotID(_0x543887)[_0x2c7cd7(0x1b0)](_0xc09995=>{const _0x2421b5=_0x2c7cd7;getSocket(_0xc09995['id'])[_0x2421b5(0x258)](!![]),removeClient(_0xc09995['id']);}),pid[_0x543887]&&(pid[_0x543887]['kill'](),pid[_0x543887]=null);}function stopAllBots(){terminating=!![];const _0x444b7a=getEnabledBots();_0x444b7a['forEach'](_0x5c4bec=>{const _0x15b2fe=_0x40a9;stopBot(_0x5c4bec[_0x15b2fe(0x139)]);});}function restartBot(_0x22b10b){const _0x5c8f71=_0x52bd53;if(pid[_0x22b10b])pid[_0x22b10b][_0x5c8f71(0xd1)]();}function addBot(){const _0x1026d9=_0x52bd53;let _0x3080f4;for(let _0x44079d=0x1;_0x44079d<0x3e9;_0x44079d++){_0x3080f4=_0x44079d[_0x1026d9(0xf8)]()[_0x1026d9(0xf7)](0x3,'0');let _0x31556a=config[_0x1026d9(0x126)](_0x24ae90=>_0x24ae90[_0x1026d9(0x139)]==_0x3080f4);if(!_0x31556a)break;}if(_0x3080f4===_0x1026d9(0x207)){logger[_0x1026d9(0x133)](_0x1026d9(0x179));return;}logger[_0x1026d9(0x133)](_0x1026d9(0x284)+_0x3080f4),dbConfig[_0x1026d9(0x203)](_0x1026d9(0x161))[_0x1026d9(0xdc)]({'botID':_0x3080f4,'botname':'Bot\x20'+_0x3080f4,'status':_0x1026d9(0x173),'live':''})[_0x1026d9(0x104)](),startBot([_0x3080f4,userID],{'cwd':bbpath},function(_0x1ad1df){const _0x3ff855=_0x1026d9;if(_0x1ad1df)logger[_0x3ff855(0x133)](_0x1ad1df);}),config=getConfiguration(),io['to'](_0x1026d9(0xea))[_0x1026d9(0x18f)]('bots',config),broadcastToBots(_0x1026d9(0x161),JSON[_0x1026d9(0x1f0)](config));}function deleteBot(_0x1bf546){const _0x597951=_0x52bd53;getClientsWithBotID(_0x1bf546)[_0x597951(0x1b0)](_0x3eae3c=>{getSocket(_0x3eae3c['id'])['disconnect'](!![]),removeClient(_0x3eae3c['id']);}),dbConfig[_0x597951(0x203)](_0x597951(0x161))['remove']({'botID':_0x1bf546})[_0x597951(0x104)](),logger[_0x597951(0x133)]('Deleted\x20Bot\x20'+_0x1bf546),stopBot(_0x1bf546);try{if(fs[_0x597951(0xda)](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+_0x597951(0x14e))))fs[_0x597951(0xc4)](path['join'](configpath,'bot-'+_0x1bf546+_0x597951(0x14e)));if(fs[_0x597951(0xda)](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+'-events.json')))fs[_0x597951(0xc4)](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+_0x597951(0x147)));if(fs[_0x597951(0xda)](path['join'](configpath,_0x597951(0x19d)+_0x1bf546+_0x597951(0x212))))fs[_0x597951(0xc4)](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+'-performance.json'));if(fs['existsSync'](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+'-results.json')))fs[_0x597951(0xc4)](path[_0x597951(0x220)](configpath,_0x597951(0x19d)+_0x1bf546+_0x597951(0x249)));}catch(_0x1904f3){if(_0x1904f3)logger[_0x597951(0x133)](_0x597951(0x197),_0x1904f3);}config=getConfiguration(),io['to'](_0x597951(0xea))[_0x597951(0x18f)](_0x597951(0x161),config),broadcastToBots(_0x597951(0x161),JSON[_0x597951(0x1f0)](config));}function toggleBot(_0x593cd0,_0x75a460,_0x1e6947){const _0x4d565f=_0x52bd53;dbConfig[_0x4d565f(0x203)](_0x4d565f(0x161))[_0x4d565f(0x126)]({'botID':_0x593cd0})['assign']({'status':_0x75a460})[_0x4d565f(0x26a)]({'live':_0x1e6947})[_0x4d565f(0x104)]();if(_0x75a460=='enabled'||_0x75a460==_0x4d565f(0x173))logger['full'](_0x4d565f(0x253)+_0x593cd0),startBot([_0x593cd0,userID],{'cwd':bbpath},function(_0x59c958){const _0x4ce670=_0x4d565f;if(_0x59c958)logger[_0x4ce670(0x133)](_0x59c958);});else(_0x75a460==_0x4d565f(0x1d1)||_0x75a460==_0x4d565f(0x224))&&(logger[_0x4d565f(0x133)](_0x4d565f(0xe1)+_0x593cd0),stopBot(_0x593cd0));config=getConfiguration(),io['to'](_0x4d565f(0xea))[_0x4d565f(0x18f)](_0x4d565f(0x161),config),broadcastToBots(_0x4d565f(0x161),JSON[_0x4d565f(0x1f0)](config));}function toggleStatus(_0x583db6){const _0x1d82a4=_0x52bd53;let _0x351555=dbConfig[_0x1d82a4(0x203)](_0x1d82a4(0x161))['find']({'botID':_0x583db6})[_0x1d82a4(0x115)](),_0x56470f;if(_0x351555[_0x1d82a4(0x277)]===_0x1d82a4(0x268))_0x56470f=_0x1d82a4(0x1d1);else{if(_0x351555['status']===_0x1d82a4(0x173))_0x56470f=_0x1d82a4(0x224);else{if(_0x351555[_0x1d82a4(0x277)]==='new-disabled')_0x56470f='new';else{if(_0x351555[_0x1d82a4(0x277)]===_0x1d82a4(0x1d1))_0x56470f=_0x1d82a4(0x268);}}}return _0x56470f;}function updateStatus(_0x98df7,_0x1bbf46){const _0x53e5b1=_0x52bd53;dbConfig[_0x53e5b1(0x203)]('bots')['find']({'botID':_0x98df7})[_0x53e5b1(0x26a)]({'status':_0x1bbf46})[_0x53e5b1(0x104)](),config=getConfiguration(),io['to'](_0x53e5b1(0xea))[_0x53e5b1(0x18f)](_0x53e5b1(0x161),config),broadcastToBots(_0x53e5b1(0x161),JSON[_0x53e5b1(0x1f0)](config));}function updateLive(_0x268d51,_0x5c1138){const _0xceaf4=_0x52bd53;dbConfig['get']('bots')[_0xceaf4(0x126)]({'botID':_0x268d51})[_0xceaf4(0x26a)]({'live':_0x5c1138})[_0xceaf4(0x104)](),config=getConfiguration(),io['to'](_0xceaf4(0xea))[_0xceaf4(0x18f)](_0xceaf4(0x161),config),broadcastToBots('bots',JSON[_0xceaf4(0x1f0)](config));}function updateBotName(_0x228687,_0x48bcd2){const _0x152cbe=_0x52bd53;dbConfig[_0x152cbe(0x203)](_0x152cbe(0x161))[_0x152cbe(0x126)]({'botID':_0x228687})['assign']({'botname':_0x48bcd2})[_0x152cbe(0x104)](),config=getConfiguration(),io['to'](_0x152cbe(0xea))[_0x152cbe(0x18f)]('bots',config),broadcastToBots(_0x152cbe(0x161),JSON[_0x152cbe(0x1f0)](config));}function updateBotManager(){const _0x4d132b=_0x52bd53;config=getConfiguration(),io['to'](_0x4d132b(0xea))[_0x4d132b(0x18f)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x308d07){const _0x384b20=_0x52bd53;if(pid[_0x308d07])pid[_0x308d07][_0x384b20(0x121)]({'function':_0x384b20(0x280),'args':null});else{const _0x3dacd4=configpath+_0x384b20(0x19d)+_0x308d07+'-config.json',_0x4aa901=fs['readFileSync'](_0x3dacd4),_0x1256eb=JSON['parse'](_0x4aa901),_0x13cedf=_0x1256eb['bot'][0x0]['headless'];_0x1256eb['bot'][0x0][_0x384b20(0x233)]=!_0x13cedf;const _0x4e8e3d=JSON[_0x384b20(0x1f0)](_0x1256eb,null,0x2);fs[_0x384b20(0x1af)](_0x3dacd4,_0x4e8e3d),config=getConfiguration(),io['to'](_0x384b20(0xea))[_0x384b20(0x18f)](_0x384b20(0x161),config),broadcastToBots(_0x384b20(0x161),JSON[_0x384b20(0x1f0)](config));}}function _0x3a2a(){const _0x3dea6f=['login\x20not\x20required','temporary\x20access\x20timeout','internal','isDirectory','botmanager','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','sendMetricsTelegram','output-000.log','verify','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','staging','IPv4','reinstall','Ok,\x20will\x20send\x20order\x20notifications\x20only','reply','************','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','padStart','toString','socket','Unauthorized\x20attempt\x20to\x20update\x20settings','Invalid\x20authentication\x20token\x20(1)','manual','versions','bot.js',':\x20Bot\x20Mgr\x20>\x20','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','connected',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','\x20(1)','write','status\x20code\x20401','env','RSA-OAEP','blacklist','3000','login','build2','No\x20authentication\x20token','#RES#\x20if\x20running\x20on\x20server','headers','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','files','/:bot/performance','0.0.0','login\x20token\x20valid','Node.js\x20v','value','from','size','Invalid\x20username\x20or\x20IP\x20address','/names\x20-\x20show\x20bot\x20names\x0a','pki','server','All\x20bots\x20running\x20right\x20now','config_alerts','Unauthorized\x20attempt\x20to\x20show\x20configuration','5490PRPMOp','connection','send','Idling\x20(','readFileSync','token','uuid','find','publicKey','33ipoVzN','225716SfMxLu','Backup\x20file\x20unzipped\x20and\x20stored','/start','\x1b[34m','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','\x1b[31m','resetpw_yes','update-bot','listen','argv','full','DEFLATE','lastmsgtelegram','mkdirSync','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','startsWith','botID','restore_yes_','login\x20token\x20generated','exit','number','ipc','all','set','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','reject','telegramIpApproval','get-portfolio','action','min','-events.json','\x20|\x20','2FA\x20required','keys','bb/','timeshift','resetHistory','-config.json','Access\x20enabled\x20for\x20','code','exp','auth','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Error\x20details:','binary','started','temporary\x20token\x20generated','::1','private','use','filter','stopped','store-fiat','running','event','Restoring\x20bot(s)\x20from\x20backup','bots','inherit','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','async','deleteHistoryAlerts','644077jBSsJV','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','createServer','off','No\x20bots\x20running\x20right\x20now','publicKeyToPem','6561567AAklnq','backup-full@','version.json','/:bot/history','notification','botname','node','new','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','zip/','showname','lastmsgemitted','readdirSync','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','login2fa_reject_','NTBA_FIX_319','mode','tkn','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','download','Your\x20installation\x20is\x20already\x20up\x20to\x20date','get-messages','Failed\x20to\x20download\x20','Network\x20Interfaces:','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','parse','latestversion','referer','userid','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','restart',')\x20\x20\x20|\x20Bot\x20','48113136zgQRDz','sign','#RES#\x20if\x20running\x20locally\x0a','emit','getPortfolio','Orders','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','any','on_','restore-backup-file','test','Error\x20while\x20deleting\x20config\x20files:\x20','apiKey','defaults','log','confirm-message','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','bot-','launch','CoinMarketCap\x20API\x20key\x20validated','*$1*','<b>Telegram\x20Bot\x20Status:</b>\x0a','/:bot','hasOwnProperty','All\x20bots','access\x20timeout','handshake','params','lowdb/adapters/FileSync','getFullYear','tempaccess_5_','clients','exec','length','randomBytes','writeFileSync','forEach','\x20|\x20user:\x20...','type','settings','toggle_','logout','User\x20has\x20been\x20validated','Logged\x20out\x20user\x20...','auto','config_orders','Starting\x20Balance\x20Bot\x20reinstallation','cancelLoading','showConfig','kind','clientip','telegraf','replace','statSync','output-002.log','Bot\x20','tempaccess_30_','13354hlhngH','sort','post','/disable\x20-\x20disable\x20notifications\x0a','initclient','store-configuration','compareSync','telegramChatId','max','Setting\x20access:\x20','reinstall_yes','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','disabled','messages','apply','disable','yes','uncaughtException','conn','6b67f3d61ee94b8f5c80b4affef4c4d9','chat','request','reinstall-bb','match','backup','/off\x20-\x20stop\x20bot(s)\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','emitHistory','editMessageReplyMarkup','invalid\x20credentials','create','https://api.ipify.org?format=json','SIGINT','Unauthorized\x20attempt\x20to\x20download\x20','apiSecret','(((.+)+)+)+$','bbvReceive','get-starting-balances','lowdb','backup-files','26260blTlpp','logs','backup-full.zip','stringify','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','endsWith','getDate','createWriteStream','username','store','tempaccess_15_','removeAllListeners','127.0.0.1','bbvNew','ipaddr.js','user','Telegraf\x20error:','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','isIPv4MappedAddress','metrics_','sendMessage','get','privateKeyToPem','order','sha256','1000','getTime','ETH','success','debug','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','telegrammsg','Starting\x20(','live','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','backup/','-performance.json','callback','restore_no_',')\x20|\x20Bot\x20','hex','rmSync','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','SIGTERM','command','allow','crypto','sendPortfolioTelegram','remove','placeOrder','join','reload','inlineKeyboard','index.html','new-disabled','once','getMonth','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','access','|@|','password','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','store-headless','sendFile','store-settings','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','generateKeyPair','whitelistEnabled','headless','(staging)','sortBy','simple','Starting\x20Balance\x20Bot\x20update','add','Invalid\x20authentication\x20token\x20(2)','encryptedUuid','\x1b[33m','portfolio_','uuid-random','alerts','getStartingBalances','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','show-config','f2aRequired','update-bb','telegramEnabled','http','settings.','address\x20already\x20in\x20use','2FA','-results.json','config','13rKGRcl','enable','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','secure','rsa','remoteAddress','You\x20can\x20use\x20the\x20following\x20commands:\x0a','toggle-bot-mode','Enabled\x20Bot\x20','track','Server','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','HTML','disconnect','\x1b[35m','Token\x20blacklisted','name','map','_nsps','slice','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Error\x20removing\x20old\x20backup\x20files:','sockets','off_','Yes','logged\x20out','getMinutes','=>\x20Go\x20to\x20#CYA#http://','message','enabled','static','assign','bb-settings.json','$1_$2_$3','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','stop','bot','title','bb-secure.json','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','privateKeyFromPem','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','portfolio','getSeconds','status','Telegram\x20error:','graphql-request','names','telegramToken','resetpw_no','hashSync','show','Markdown','toggleBotMode','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','bb-config.json','date-fns','Starting\x20new\x20bot\x20|\x20Bot\x20','update','File\x20uploaded','apiPassword','toIPv4MappedAddress','cancel-loading','Allow\x20login\x20from\x20IP\x20address\x20','login\x20required','/enable\x20-\x20enable\x20notifications\x0a','136cMWJLz','getHours','backupfile','Unauthorized\x20attempt\x20to\x20get\x20messages','***','Restore\x20backup\x20file\x20','format','output-001.log','delete-alerts','bbPassword','2FA\x20login\x20token\x20generated','file','pidRefreshToken','split','node-forge','telegram','orders','build','text','telegram2FaApproval','family','Unauthorized\x20attempt\x20to\x20delete\x20bot','toIPv4Address','5aDVLHy','marketcapApi','string','2FA\x20login\x20required','.zip','whitelist','130DmEqjD','Unauthorized\x20login\x20attempt\x20(timeout)','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','storeConfiguration','express-fileupload','logs/','[ip-address]','Unauthorized\x20attempt\x20to\x20log\x20out','button','Unauthorized\x20attempt\x20to\x20add\x20bot','/output-000.log','secret','Restore\x20process\x20aborted','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','storeFiat','range','search','reason','/:bot/portfolio','expiry','\x20only\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','\x20mode','jsonwebtoken','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/help\x20-\x20show\x20available\x20commands\x0a','privateKey','Session\x20expired\x20for\x20user\x20...','/metrics\x20-\x20show\x20bot\x20performance\x0a','telegramEvents','includes','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Login\x20accepted','config/','backup-full','loadAsync','temporaryAccessAllowed','socket.io','Error:\x20Invalid\x20argument\x20','port','telegramUsername','unlinkSync','child_process','5057490OVMlRJ','generateAsync','\x20-\x20','\x1b[0m','decrypt','onepagemode','address','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','temp/','/update\x20-\x20update\x20Balance\x20Bot\x0a','pidExpireLogin','kill','mixpanel','Unauthorized\x20attempt\x20to\x20update\x20bot','timestamp','exchange','storeHeadless','-----------------------------------------------------------------------------------','start','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','existsSync','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','push','/download/:type','catch','copyFileSync','loginRequired','Disabled\x20Bot\x20','decode64','Logged\x20in\x20user\x20...','/:bot/support','bbUsername'];_0x3a2a=function(){return _0x3dea6f;};return _0x3a2a();}function validateTelegram(_0x5a6d24){const _0x54be24=_0x52bd53;if(_0x5a6d24['from'][_0x54be24(0x1f6)]!=settings[_0x54be24(0xc3)]&&'@'+_0x5a6d24[_0x54be24(0x116)]['username']!=settings[_0x54be24(0xc3)]||_0x5a6d24[_0x54be24(0x1d9)]['id']!=settings[_0x54be24(0x1cc)])return sendTelegram(_0x5a6d24[_0x54be24(0x1d9)]['id'],_0x54be24(0x281),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x5d0d01=_0x52bd53;if(tgBot)tgBot[_0x5d0d01(0x26e)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x1784f5=_0x5d0d01(0x251);_0x1784f5+='\x0a',_0x1784f5+=_0x5d0d01(0x28c),_0x1784f5+=_0x5d0d01(0x1c8),_0x1784f5+=_0x5d0d01(0xcd),_0x1784f5+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x1784f5+='/on\x20-\x20start\x20bot(s)\x0a',_0x1784f5+=_0x5d0d01(0x1de),_0x1784f5+=_0x5d0d01(0xa8),_0x1784f5+=_0x5d0d01(0x119),_0x1784f5+=_0x5d0d01(0xb0),_0x1784f5+=_0x5d0d01(0xb7),_0x1784f5+=_0x5d0d01(0x163),_0x1784f5+=_0x5d0d01(0xcf),_0x1784f5+=_0x5d0d01(0x153),_0x1784f5+=_0x5d0d01(0xb4);let _0x59f6df=_0x5d0d01(0x19c);_0x59f6df+='\x0a',_0x59f6df+=_0x1784f5,tgBot[_0x5d0d01(0xde)]((_0x5835bc,_0x285293)=>{const _0xf025d9=_0x5d0d01;logger[_0xf025d9(0x236)](getTimeStamp()+_0xf025d9(0x102)),logger[_0xf025d9(0x20b)](_0xf025d9(0x1fe),_0x5835bc);}),tgBot['use'](async(_0xd60ebd,_0x30af04)=>{const _0x238523=_0x5d0d01;if(!(!settings['telegramChatId']&&_0xd60ebd[_0x238523(0x285)]['message'][_0x238523(0x90)]==_0x238523(0x12b))){if(!validateTelegram(_0xd60ebd))return;}_0x30af04();}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0xd8),async _0x2f33e8=>{const _0x4fc031=_0x5d0d01;if(!settings[_0x4fc031(0x1cc)])updateSetting(_0x4fc031(0x1cc),_0x2f33e8['chat']['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x2f33e8))return;await sendTelegram(_0x2f33e8[_0x4fc031(0x1d9)]['id'],_0x59f6df);}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x24c),async _0x5beb40=>{const _0x4acdf0=_0x5d0d01;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5beb40[_0x4acdf0(0x1d9)]['id'],'Notifications\x20enabled');}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x1d4),async _0x37042c=>{const _0x69077e=_0x5d0d01;await sendTelegram(_0x37042c['chat']['id'],'Notifications\x20disabled'),updateSetting(_0x69077e(0x244),![]);}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x24a),async _0x40381e=>{const _0x2fa79e=_0x5d0d01,_0x2ba7d9=Markup[_0x2fa79e(0x222)]([Markup['button'][_0x2fa79e(0x213)](_0x2fa79e(0x191),_0x2fa79e(0x1b9)),Markup[_0x2fa79e(0xa3)][_0x2fa79e(0x213)]('Alerts','config_alerts'),Markup[_0x2fa79e(0xa3)][_0x2fa79e(0x213)]('All','config_all')]);_0x40381e[_0x2fa79e(0xf4)](_0x2fa79e(0x218),_0x2ba7d9);}),tgBot['action']('config_orders',async _0x1a7c07=>{const _0x1d3a69=_0x5d0d01;_0x1a7c07[_0x1d3a69(0x1e1)](),updateSetting(_0x1d3a69(0xb8),'orders'),updateSetting(_0x1d3a69(0x244),!![]),await sendTelegram(_0x1a7c07[_0x1d3a69(0x1d9)]['id'],_0x1d3a69(0xf3));}),tgBot[_0x5d0d01(0x145)](_0x5d0d01(0x11d),async _0x2f3231=>{const _0xcc056b=_0x5d0d01;_0x2f3231[_0xcc056b(0x1e1)](),updateSetting(_0xcc056b(0xb8),_0xcc056b(0x23e)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2f3231['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x5d0d01(0x145)]('config_all',async _0x2e5e1=>{const _0x308eac=_0x5d0d01;_0x2e5e1['editMessageReplyMarkup'](),updateSetting(_0x308eac(0xb8),_0x308eac(0x13f)),updateSetting(_0x308eac(0x244),!![]),await sendTelegram(_0x2e5e1[_0x308eac(0x1d9)]['id'],_0x308eac(0x240));}),tgBot['command'](_0x5d0d01(0x277),async _0x2defb9=>{const _0x1759d9=_0x5d0d01,_0x2f3721=getBotsWithMode();let _0x2d52d5='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x1759d9(0x1b0)](_0x432507=>{const _0x4b6220=_0x1759d9,_0x72ea88=_0x2f3721[_0x4b6220(0x126)](_0x5e18a3=>_0x5e18a3['botID']==_0x432507['botID'])[_0x4b6220(0x17c)];_0x2d52d5+=_0x4b6220(0x1c3)+_0x432507[_0x4b6220(0x139)]+':\x20'+_0x432507[_0x4b6220(0x277)]+_0x4b6220(0x148)+_0x72ea88+_0x4b6220(0x148)+_0x432507['live']+'\x0a';}),_0x2d52d5+='\x0a',_0x2d52d5+=_0x1759d9(0x1a1),_0x2d52d5+=!settings[_0x1759d9(0x244)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x2d52d5+=settings['telegramEnabled']?settings[_0x1759d9(0xb8)]==_0x1759d9(0x13f)?_0x1759d9(0x1ff):'Notifications\x20types:\x20'+settings[_0x1759d9(0xb8)]+_0x1759d9(0xaf):'',await sendTelegram(_0x2defb9[_0x1759d9(0x1d9)]['id'],_0x2d52d5,{'parse_mode':'HTML'});}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x18a),async _0x55d331=>{const _0x14ffab=_0x5d0d01,_0xce6fc0=getEnabledBots();if(_0xce6fc0[_0x14ffab(0x1ad)]==0x0)await sendTelegram(_0x55d331['chat']['id'],_0x14ffab(0x16a));else{if(_0xce6fc0['length']>0x1)_0xce6fc0[_0x14ffab(0xdc)]({'botID':'all'});let _0x1aa3cd=[],_0x1f09f5=[];const _0x764c4c=_0xce6fc0[_0x14ffab(0x1ad)]%0x4==0x0||_0xce6fc0[_0x14ffab(0x1ad)]%0x4==0x3||_0xce6fc0[_0x14ffab(0x1ad)]%0x3==0x1?0x4:0x3;let _0xb50eb6=0x0;_0xce6fc0[_0x14ffab(0x1b0)]((_0x499d97,_0x37005c)=>{const _0x4ea90b=_0x14ffab;if(_0x37005c%_0x764c4c==0x0)_0x1f09f5=[];_0x1f09f5[_0x4ea90b(0xdc)](Markup[_0x4ea90b(0xa3)]['callback'](_0x499d97[_0x4ea90b(0x139)]=='all'?_0x4ea90b(0x1a4):_0x4ea90b(0x1c3)+_0x499d97['botID'],'restart_'+_0x499d97[_0x4ea90b(0x139)])),_0x37005c%_0x764c4c==0x0&&(_0x1aa3cd[_0xb50eb6]=_0x1f09f5,_0xb50eb6++);});const _0xf0ec53=Markup[_0x14ffab(0x222)](_0x1aa3cd);_0x55d331[_0x14ffab(0xf4)](_0x14ffab(0xb3),_0xf0ec53);}}),tgBot[_0x5d0d01(0x145)](/restart_(.+)/,async _0x27d6d4=>{const _0x413f1a=_0x5d0d01,_0x5489c2=_0x27d6d4[_0x413f1a(0x1dc)][0x1];_0x27d6d4['editMessageReplyMarkup'](),_0x5489c2==_0x413f1a(0x13f)?config['forEach'](_0x4fa368=>{restartBot(_0x4fa368['botID']);}):restartBot(_0x5489c2);}),tgBot[_0x5d0d01(0x21a)]('on',async _0x116ae4=>{const _0x40eace=_0x5d0d01,_0x5b2240=getDisabledBots();if(_0x5b2240[_0x40eace(0x1ad)]==0x0)await sendTelegram(_0x116ae4[_0x40eace(0x1d9)]['id'],_0x40eace(0x11c));else{if(_0x5b2240[_0x40eace(0x1ad)]>0x1)_0x5b2240[_0x40eace(0xdc)]({'botID':_0x40eace(0x13f)});let _0x595d54=[],_0x43d5b5=[];const _0xa4a54f=_0x5b2240['length']%0x4==0x0||_0x5b2240[_0x40eace(0x1ad)]%0x4==0x3||_0x5b2240[_0x40eace(0x1ad)]%0x3==0x1?0x4:0x3;let _0x49ca26=0x0;_0x5b2240['forEach']((_0x2a72d0,_0x28271e)=>{const _0x53fda6=_0x40eace;if(_0x28271e%_0xa4a54f==0x0)_0x43d5b5=[];_0x43d5b5[_0x53fda6(0xdc)](Markup[_0x53fda6(0xa3)][_0x53fda6(0x213)](_0x2a72d0['botID']=='all'?'All\x20bots':_0x53fda6(0x1c3)+_0x2a72d0[_0x53fda6(0x139)],_0x53fda6(0x194)+_0x2a72d0[_0x53fda6(0x139)])),_0x28271e%_0xa4a54f==0x0&&(_0x595d54[_0x49ca26]=_0x43d5b5,_0x49ca26++);});const _0x40bc15=Markup['inlineKeyboard'](_0x595d54);_0x116ae4[_0x40eace(0xf4)](_0x40eace(0x20c),_0x40bc15);}}),tgBot[_0x5d0d01(0x145)](/on_(.+)/,async _0x32c811=>{const _0x21ab43=_0x5d0d01,_0x5ae0ef=_0x32c811[_0x21ab43(0x1dc)][0x1];_0x32c811[_0x21ab43(0x1e1)]();if(_0x5ae0ef==_0x21ab43(0x13f)){const _0x30866c=getDisabledBots();await sendTelegram(_0x32c811[_0x21ab43(0x1d9)]['id'],_0x21ab43(0x10f)),_0x30866c[_0x21ab43(0x1b0)](_0x379ac4=>{const _0x3876f0=_0x21ab43;if(_0x379ac4[_0x3876f0(0x139)]!=_0x3876f0(0x13f))toggleBot(_0x379ac4[_0x3876f0(0x139)],toggleStatus(_0x379ac4[_0x3876f0(0x139)]),_0x3876f0(0x15c));});}else await sendTelegram(_0x32c811[_0x21ab43(0x1d9)]['id'],_0x21ab43(0xf6)+_0x5ae0ef),toggleBot(_0x5ae0ef,toggleStatus(_0x5ae0ef),_0x21ab43(0x15c));}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x169),async _0x41187b=>{const _0x417b9f=_0x5d0d01,_0x22d9d5=getEnabledBots();if(_0x22d9d5['length']==0x0)await sendTelegram(_0x41187b[_0x417b9f(0x1d9)]['id'],_0x417b9f(0x16a));else{if(_0x22d9d5[_0x417b9f(0x1ad)]>0x1)_0x22d9d5['push']({'botID':'all'});let _0x13595f=[],_0x814aaa=[];const _0x27c9fb=_0x22d9d5[_0x417b9f(0x1ad)]%0x4==0x0||_0x22d9d5[_0x417b9f(0x1ad)]%0x4==0x3||_0x22d9d5[_0x417b9f(0x1ad)]%0x3==0x1?0x4:0x3;let _0x5651e1=0x0;_0x22d9d5[_0x417b9f(0x1b0)]((_0x196878,_0x4b74d6)=>{const _0x4cf419=_0x417b9f;if(_0x4b74d6%_0x27c9fb==0x0)_0x814aaa=[];_0x814aaa[_0x4cf419(0xdc)](Markup[_0x4cf419(0xa3)][_0x4cf419(0x213)](_0x196878[_0x4cf419(0x139)]==_0x4cf419(0x13f)?_0x4cf419(0x1a4):_0x4cf419(0x1c3)+_0x196878['botID'],_0x4cf419(0x262)+_0x196878['botID'])),_0x4b74d6%_0x27c9fb==0x0&&(_0x13595f[_0x5651e1]=_0x814aaa,_0x5651e1++);});const _0x796456=Markup['inlineKeyboard'](_0x13595f);_0x41187b[_0x417b9f(0xf4)](_0x417b9f(0xdb),_0x796456);}}),tgBot['action'](/off_(.+)/,async _0xa752c2=>{const _0x3e4ad1=_0x5d0d01,_0x32b16a=_0xa752c2[_0x3e4ad1(0x1dc)][0x1];_0xa752c2[_0x3e4ad1(0x1e1)]();if(_0x32b16a==_0x3e4ad1(0x13f)){const _0x29eec8=getEnabledBots();await sendTelegram(_0xa752c2[_0x3e4ad1(0x1d9)]['id'],_0x3e4ad1(0x141)),_0x29eec8[_0x3e4ad1(0x1b0)](_0x482d88=>{const _0x204f34=_0x3e4ad1;if(_0x482d88['botID']!='all')toggleBot(_0x482d88[_0x204f34(0x139)],toggleStatus(_0x482d88[_0x204f34(0x139)]),'stopped');});}else await sendTelegram(_0xa752c2[_0x3e4ad1(0x1d9)]['id'],_0x3e4ad1(0x22b)+_0x32b16a),toggleBot(_0x32b16a,toggleStatus(_0x32b16a),_0x3e4ad1(0x15c));}),tgBot[_0x5d0d01(0x21a)]('metrics',async _0x2fbede=>{const _0x541048=_0x5d0d01,_0x212b9b=getEnabledBots();if(_0x212b9b['length']==0x0)await sendTelegram(_0x2fbede[_0x541048(0x1d9)]['id'],_0x541048(0x16a));else{if(_0x212b9b[_0x541048(0x1ad)]>0x1){let _0x50b837=[],_0x355564=[];const _0x5a57dd=_0x212b9b['length']%0x4==0x0||_0x212b9b[_0x541048(0x1ad)]%0x4==0x3||_0x212b9b['length']%0x3==0x1?0x4:0x3;let _0x2316e6=0x0;_0x212b9b[_0x541048(0x1b0)]((_0x41e893,_0x1bc4f1)=>{const _0x507add=_0x541048;if(_0x1bc4f1%_0x5a57dd==0x0)_0x355564=[];_0x355564[_0x507add(0xdc)](Markup[_0x507add(0xa3)][_0x507add(0x213)](_0x507add(0x1c3)+_0x41e893[_0x507add(0x139)],_0x507add(0x201)+_0x41e893[_0x507add(0x139)])),_0x1bc4f1%_0x5a57dd==0x0&&(_0x50b837[_0x2316e6]=_0x355564,_0x2316e6++);});const _0x436c40=Markup[_0x541048(0x222)](_0x50b837);_0x2fbede[_0x541048(0xf4)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x436c40);}else{const _0x2461e0=_0x212b9b[0x0][_0x541048(0x139)];if(pid[_0x2461e0])pid[_0x2461e0][_0x541048(0x121)]({'function':_0x541048(0xec),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x922f2a=>{const _0x538832=_0x5d0d01,_0x17f966=_0x922f2a['match'][0x1];_0x922f2a[_0x538832(0x1e1)]();if(pid[_0x17f966])pid[_0x17f966][_0x538832(0x121)]({'function':_0x538832(0xec),'args':null});}),tgBot['command'](_0x5d0d01(0x275),async _0x201143=>{const _0x5ea4e3=_0x5d0d01,_0x7b1513=getEnabledBots();if(_0x7b1513[_0x5ea4e3(0x1ad)]==0x0)await sendTelegram(_0x201143[_0x5ea4e3(0x1d9)]['id'],_0x5ea4e3(0x16a));else{if(_0x7b1513[_0x5ea4e3(0x1ad)]>0x1){let _0x4b9588=[],_0x68de92=[];const _0x5b4a98=_0x7b1513[_0x5ea4e3(0x1ad)]%0x4==0x0||_0x7b1513[_0x5ea4e3(0x1ad)]%0x4==0x3||_0x7b1513[_0x5ea4e3(0x1ad)]%0x3==0x1?0x4:0x3;let _0x1ea3fe=0x0;_0x7b1513[_0x5ea4e3(0x1b0)]((_0x583df4,_0x374fc5)=>{const _0x40aaa8=_0x5ea4e3;if(_0x374fc5%_0x5b4a98==0x0)_0x68de92=[];_0x68de92[_0x40aaa8(0xdc)](Markup[_0x40aaa8(0xa3)]['callback'](_0x40aaa8(0x1c3)+_0x583df4[_0x40aaa8(0x139)],_0x40aaa8(0x23c)+_0x583df4[_0x40aaa8(0x139)])),_0x374fc5%_0x5b4a98==0x0&&(_0x4b9588[_0x1ea3fe]=_0x68de92,_0x1ea3fe++);});const _0x14169b=Markup[_0x5ea4e3(0x222)](_0x4b9588);_0x201143[_0x5ea4e3(0xf4)](_0x5ea4e3(0x274),_0x14169b);}else{const _0x58fc56=_0x7b1513[0x0][_0x5ea4e3(0x139)];if(pid[_0x58fc56])pid[_0x58fc56][_0x5ea4e3(0x121)]({'function':_0x5ea4e3(0x21d),'args':null});}}}),tgBot[_0x5d0d01(0x145)](/portfolio_(.+)/,async _0x619b24=>{const _0x513d5c=_0x5d0d01,_0x2a5396=_0x619b24['match'][0x1];_0x619b24[_0x513d5c(0x1e1)]();if(pid[_0x2a5396])pid[_0x2a5396]['send']({'function':_0x513d5c(0x21d),'args':null});}),tgBot['command'](_0x5d0d01(0x285),async _0x4f6e9d=>{const _0x5986bf=_0x5d0d01;await getMessages();if(!updateAvailable)await sendTelegram(_0x4f6e9d[_0x5986bf(0x1d9)]['id'],_0x5986bf(0x180));else{if(!validInstallation)await sendTelegram(_0x4f6e9d[_0x5986bf(0x1d9)]['id'],_0x5986bf(0x100));else{const _0xa25ef9=Markup[_0x5986bf(0x222)]([Markup['button']['callback']('Yes','update_yes'),Markup[_0x5986bf(0xa3)][_0x5986bf(0x213)]('No','update_no')]);_0x4f6e9d['reply'](_0x5986bf(0x227),_0xa25ef9);}}}),tgBot[_0x5d0d01(0x145)](/update_(.+)/,async _0x2d271c=>{const _0x162fce=_0x5d0d01,_0x970238=_0x2d271c['match'][0x1];_0x2d271c['editMessageReplyMarkup'](),_0x970238==_0x162fce(0x1d5)&&(await sendTelegram(_0x2d271c[_0x162fce(0x1d9)]['id'],_0x162fce(0x237)),updateBB(_0x162fce(0x285))),_0x970238=='no'&&await sendTelegram(_0x2d271c['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0xf2),async _0x3e3ca9=>{const _0x391199=_0x5d0d01;if(!validInstallation)await sendTelegram(_0x3e3ca9['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x6dbd08=Markup[_0x391199(0x222)]([Markup[_0x391199(0xa3)][_0x391199(0x213)](_0x391199(0x263),_0x391199(0x1cf)),Markup[_0x391199(0xa3)][_0x391199(0x213)]('No','reinstall_no')]);_0x3e3ca9[_0x391199(0xf4)](_0x391199(0x1f2),_0x6dbd08);}}),tgBot[_0x5d0d01(0x145)](/reinstall_(.+)/,async _0x5dda6f=>{const _0x2e039a=_0x5d0d01,_0x2af049=_0x5dda6f[_0x2e039a(0x1dc)][0x1];_0x5dda6f[_0x2e039a(0x1e1)](),_0x2af049==_0x2e039a(0x1d5)&&(await sendTelegram(_0x5dda6f[_0x2e039a(0x1d9)]['id'],_0x2e039a(0x1ba)),updateBB(_0x2e039a(0xf2))),_0x2af049=='no'&&await sendTelegram(_0x5dda6f[_0x2e039a(0x1d9)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command']('toggle',async _0xede76d=>{const _0x33bb54=_0x5d0d01,_0x885de6=getBotsWithMode();if(_0x885de6[_0x33bb54(0x1ad)]==0x0)await sendTelegram(_0xede76d['chat']['id'],_0x33bb54(0x16a));else{let _0xb38566=[],_0x5952f9=[];const _0x4b8838=0x2;let _0x3f0961=0x0;_0x885de6[_0x33bb54(0x1b0)]((_0x37ba4d,_0x37dbd4)=>{const _0x5dda58=_0x33bb54;if(_0x37dbd4%_0x4b8838==0x0)_0x5952f9=[];_0x5952f9[_0x5dda58(0xdc)](Markup[_0x5dda58(0xa3)][_0x5dda58(0x213)](_0x5dda58(0x1c3)+_0x37ba4d[_0x5dda58(0x139)]+'\x20('+_0x37ba4d['mode']+')',_0x5dda58(0x1b4)+_0x37ba4d[_0x5dda58(0x139)])),_0x37dbd4%_0x4b8838==0x0&&(_0xb38566[_0x3f0961]=_0x5952f9,_0x3f0961++);});const _0x4b8937=Markup[_0x33bb54(0x222)](_0xb38566);_0xede76d['reply'](_0x33bb54(0xef),_0x4b8937);}}),tgBot[_0x5d0d01(0x145)](/toggle_(.+)/,async _0x796b43=>{const _0x11c180=_0x5d0d01,_0x244225=_0x796b43['match'][0x1];_0x796b43['editMessageReplyMarkup']();const _0x4ae17f=getBotsWithMode(),_0x3bcc36=_0x4ae17f['find'](_0x36df10=>_0x36df10['botID']==_0x244225),_0x3ffe33=_0x3bcc36[_0x11c180(0x17c)]==_0x11c180(0x1b8)?_0x11c180(0xfc):_0x11c180(0x1b8);await sendTelegram(_0x796b43[_0x11c180(0x1d9)]['id'],_0x11c180(0x210)+_0x244225+'\x20to\x20'+_0x3ffe33+_0x11c180(0xb1)),toggleBotMode(_0x244225);}),tgBot[_0x5d0d01(0x21a)](_0x5d0d01(0x27a),async _0x514b35=>{const _0x463924=_0x5d0d01;let _0x461697='';config[_0x463924(0x1b0)](_0x4009fb=>{const _0x23cbdd=_0x463924;_0x461697+=_0x23cbdd(0x1c3)+_0x4009fb[_0x23cbdd(0x139)]+':\x20'+_0x4009fb[_0x23cbdd(0x171)]+'\x0a';}),await sendTelegram(_0x514b35[_0x463924(0x1d9)]['id'],_0x461697,{'parse_mode':'HTML'});}),tgBot['command']('help',async _0x417416=>{const _0x3dc072=_0x5d0d01;await sendTelegram(_0x417416[_0x3dc072(0x1d9)]['id'],_0x1784f5);}),process[_0x5d0d01(0x225)](_0x5d0d01(0x1e5),()=>tgBot[_0x5d0d01(0x26e)](_0x5d0d01(0x1e5))),process[_0x5d0d01(0x225)](_0x5d0d01(0x219),()=>tgBot[_0x5d0d01(0x26e)](_0x5d0d01(0x219))),tgBot[_0x5d0d01(0x19e)]();}}function disableTelegram(){const _0x2b84b7=_0x52bd53;tgBot&&tgBot[_0x2b84b7(0x26e)]();}async function sendTelegram(_0x21c6a1,_0x3ed038,_0x26fec5){const _0x5a9842=_0x52bd53;_0x26fec5={..._0x26fec5,'disable_web_page_preview':!![]};try{await tgBot[_0x5a9842(0x8d)][_0x5a9842(0x202)](_0x21c6a1,_0x3ed038,_0x26fec5);}catch(_0x2c97e4){console[_0x5a9842(0x19a)](_0x5a9842(0x278),_0x2c97e4);}}async function sendTelegramBot(_0x310dc1,_0x479fb3){const _0x437d43=_0x52bd53;if(settings[_0x437d43(0x244)]){if(settings['telegramEvents']==_0x437d43(0x13f)||(_0x479fb3[_0x437d43(0x1b2)]=='error'||_0x479fb3['type']=='warning'||_0x479fb3[_0x437d43(0x1b2)]==_0x437d43(0x20a))&&settings['telegramEvents']==_0x437d43(0x23e)||_0x479fb3[_0x437d43(0x1b2)]==_0x437d43(0x205)&&settings['telegramEvents']==_0x437d43(0x8e)){if(tgBot&&settings[_0x437d43(0x1cc)]){if(_0x479fb3[_0x437d43(0x176)])await sendTelegram(settings[_0x437d43(0x1cc)],_0x479fb3['botname']+'\x20>\x20'+_0x479fb3[_0x437d43(0x15f)]);else await sendTelegram(settings[_0x437d43(0x1cc)],_0x437d43(0x1c3)+_0x310dc1+'\x20>\x20'+_0x479fb3[_0x437d43(0x15f)]);}}}}async function sendTelegramMsg(_0x50d4c2,_0x1b53b2=_0x52bd53(0x257)){const _0x2a78bb=_0x52bd53;return settings[_0x2a78bb(0x244)]&&tgBot&&settings[_0x2a78bb(0x1cc)]?(await sendTelegram(settings[_0x2a78bb(0x1cc)],_0x50d4c2,{'parse_mode':_0x1b53b2}),!![]):![];}function getDeviceWithIp(_0x26db95){const _0x174416=_0x52bd53;return devices[_0x174416(0x126)](_0x22e76e=>_0x22e76e['ip']===_0x26db95);}async function temporaryAccess2FA(_0x526189,_0xc93e0e){const _0x10c288=_0x52bd53;let _0x32c01f=new Date(),_0x3656bb=![];if(lastIpApproval){if(_0x32c01f-lastIpApproval<0x1388)_0x3656bb=!![];}lastIpApproval=new Date();if(_0x3656bb)return;if(tgBot&&settings[_0x10c288(0x1cc)]){const _0x4adc0a=uuidRandom();tmpStorage[_0x4adc0a]={'uuid':_0x526189,'externalip':_0xc93e0e};const _0x2b4c2f=Markup[_0x10c288(0x222)]([Markup[_0x10c288(0xa3)]['callback']('5\x20min',_0x10c288(0x1aa)+_0x4adc0a),Markup[_0x10c288(0xa3)][_0x10c288(0x213)]('15\x20min',_0x10c288(0x1f8)+_0x4adc0a),Markup['button'][_0x10c288(0x213)]('30\x20min',_0x10c288(0x1c4)+_0x4adc0a),Markup[_0x10c288(0xa3)][_0x10c288(0x213)](_0x10c288(0x142),'tempaccess_reject_'+_0x4adc0a)]);await sendTelegram(settings[_0x10c288(0x1cc)],_0x10c288(0xd9)+normalizeIP(_0xc93e0e)[_0x10c288(0x27e)]+'\x20?',_0x2b4c2f),tgBot[_0x10c288(0x145)](/tempaccess_(.+)_(.+)/,async _0x2ee912=>{const _0x4b948b=_0x10c288,_0x282d98=_0x2ee912['match'][0x1],_0x57a755=_0x2ee912[_0x4b948b(0x1dc)][0x2],{uuid:_0x2f7b07,externalip:_0x45884f}=tmpStorage[_0x57a755];delete tmpStorage[_0x57a755],_0x2ee912[_0x4b948b(0x1e1)](),devices[_0x2f7b07][_0x4b948b(0x143)]={'clientip':_0x45884f,'timestamp':new Date()[_0x4b948b(0x208)](),'expiry':_0x282d98},_0x282d98!=_0x4b948b(0x142)?(await sendTelegram(_0x2ee912['chat']['id'],_0x4b948b(0x14f)+_0x282d98+'\x20minutes',{'parse_mode':'HTML'}),io['to'](_0x2f7b07)[_0x4b948b(0x18f)](_0x4b948b(0x277),{'access':{'allow':![],'reason':_0x4b948b(0x221),'token':null}})):(await sendTelegram(_0x2ee912['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0x2f7b07)[_0x4b948b(0x18f)](_0x4b948b(0x277),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x364b7c,_0x296af9){const _0x3439de=_0x52bd53;if(tgBot&&settings[_0x3439de(0x1cc)]){const _0x3e0872=uuidRandom();tmpStorage[_0x3e0872]={'uuid':_0x364b7c,'externalip':_0x296af9};const _0xeeb1af=Markup[_0x3439de(0x222)]([Markup[_0x3439de(0xa3)][_0x3439de(0x213)]('accept','login2fa_'+loginExpiry+'_'+_0x3e0872),Markup[_0x3439de(0xa3)][_0x3439de(0x213)](_0x3439de(0x142),_0x3439de(0x17a)+_0x3e0872)]);await sendTelegram(settings[_0x3439de(0x1cc)],_0x3439de(0x28a)+normalizeIP(_0x296af9)[_0x3439de(0x27e)]+'\x20?',_0xeeb1af),tgBot[_0x3439de(0x145)](/login2fa_(.+)_(.+)/,async _0x2269d1=>{const _0x296551=_0x3439de,_0x158962=_0x2269d1['match'][0x1],_0x29e570=_0x2269d1[_0x296551(0x1dc)][0x2],{uuid:_0x377ce9,externalip:_0x14bf8e}=tmpStorage[_0x29e570];delete tmpStorage[_0x29e570],_0x2269d1[_0x296551(0x1e1)](),devices[_0x377ce9]['telegram2FaApproval']={'clientip':_0x14bf8e,'timestamp':new Date()[_0x296551(0x208)](),'expiry':_0x158962},_0x158962!=_0x296551(0x142)?(await sendTelegram(_0x2269d1['chat']['id'],_0x296551(0xbb),{'parse_mode':'HTML'}),io['to'](_0x377ce9)[_0x296551(0x18f)]('status',{'access':{'allow':![],'reason':_0x296551(0x221),'token':null}})):(await sendTelegram(_0x2269d1[_0x296551(0x1d9)]['id'],'Login\x20rejected'),io['to'](_0x377ce9)[_0x296551(0x18f)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x53ced0=_0x52bd53;return dbConfig[_0x53ced0(0x203)](_0x53ced0(0x161))[_0x53ced0(0x235)]('botID')[_0x53ced0(0x15b)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x27213e=_0x52bd53;return dbConfig['get'](_0x27213e(0x161))[_0x27213e(0x235)](_0x27213e(0x139))[_0x27213e(0x15b)]({'status':_0x27213e(0x1d1)})[_0x27213e(0x115)]()||[];}function getBotAttributes(_0x44a50c){const _0x1e7ce6=_0x52bd53;let _0x1e9b14={};const _0x153c59=configpath+'bot-'+_0x44a50c+_0x1e7ce6(0x14e),_0x9cb589=fs[_0x1e7ce6(0xda)](_0x153c59);if(_0x9cb589){const _0x52fa01=fs[_0x1e7ce6(0x123)](_0x153c59);try{const _0x4f8aca=JSON[_0x1e7ce6(0x185)](_0x52fa01),_0x391a6f=_0x4f8aca?_0x4f8aca[_0x1e7ce6(0x26f)][0x0][_0x1e7ce6(0x233)]:![];_0x1e9b14[_0x1e7ce6(0x17c)]=_0x391a6f?_0x1e7ce6(0x1b8):'manual',_0x1e9b14['botname']=_0x4f8aca?_0x4f8aca[_0x1e7ce6(0x26f)][0x0][_0x1e7ce6(0x171)]:_0x1e7ce6(0x1c3)+_0x44a50c;}catch(_0x2bc7fd){_0x1e9b14[_0x1e7ce6(0x17c)]='manual',_0x1e9b14['botname']=_0x1e7ce6(0x1c3)+_0x44a50c;}}else _0x1e9b14[_0x1e7ce6(0x17c)]='manual',_0x1e9b14[_0x1e7ce6(0x171)]=_0x1e7ce6(0x1c3)+_0x44a50c;return _0x1e9b14;}function getBotsWithMode(){const _0x15be42=_0x52bd53,_0x45db3f=dbConfig[_0x15be42(0x203)](_0x15be42(0x161))[_0x15be42(0x235)](_0x15be42(0x139))['value']()||[];return _0x45db3f['forEach'](_0x39b428=>{const _0x3e0994=_0x15be42;let _0x416af7=getBotAttributes(_0x39b428['botID']);_0x39b428['mode']=_0x416af7[_0x3e0994(0x17c)];}),_0x45db3f;}function getBotExchanges(){const _0x379040=_0x52bd53;let _0x1b5325=[];const _0x42ef24=dbConfig[_0x379040(0x203)](_0x379040(0x161))[_0x379040(0x235)](_0x379040(0x139))[_0x379040(0x115)]()||[];_0x42ef24[_0x379040(0x1b0)](_0x5755a9=>{const _0x292b9f=_0x379040;if(_0x5755a9[_0x292b9f(0x277)]=='enabled'){const _0x1f1a07=configpath+_0x292b9f(0x19d)+_0x5755a9[_0x292b9f(0x139)]+_0x292b9f(0x14e),_0x2c8042=fs[_0x292b9f(0xda)](_0x1f1a07);let _0x1daec4;if(_0x2c8042){const _0x4af94c=fs[_0x292b9f(0x123)](_0x1f1a07);try{const _0x4ebd51=JSON['parse'](_0x4af94c);_0x1daec4=_0x4ebd51?_0x4ebd51[_0x292b9f(0x26f)][0x0][_0x292b9f(0xd5)]:null;}catch(_0x497d66){}}if(_0x1daec4)_0x1b5325['push'](_0x1daec4);}});const _0x1fea12=[...new Set(_0x1b5325)][_0x379040(0x1c6)]();return _0x1fea12;}async function initUser(){const _0x20fd85=_0x52bd53;if(!settings['userid']){const _0x1a28d5=uuidRandom();mixpanel['alias'](_0x1a28d5),updateSetting(_0x20fd85(0x188),_0x1a28d5);}}async function initSecure(){const _0x5ae21a=_0x52bd53;let _0x3e67d3=getSecure();if(!_0x3e67d3[_0x5ae21a(0x1a3)]('secret')){let _0x49c52e=await generateKeys();_0x3e67d3[_0x5ae21a(0x127)]=_0x49c52e[_0x5ae21a(0x127)],_0x3e67d3['privateKey']=_0x49c52e['privateKey'],_0x3e67d3[_0x5ae21a(0xa6)]=crypto[_0x5ae21a(0x1ae)](0x20)['toString'](_0x5ae21a(0x216));;storeSecure(_0x3e67d3);}}function getSettings(){const _0x4561eb=_0x52bd53;return dbSettings[_0x4561eb(0x203)](_0x4561eb(0x1b3))[_0x4561eb(0x115)]()||{};}function getSecure(){const _0x31cfd7=_0x52bd53;return dbSecure[_0x31cfd7(0x203)]('secure')[_0x31cfd7(0x115)]()||{};}function getBlacklist(){const _0x3e6d06=_0x52bd53;return dbSecure[_0x3e6d06(0x203)]('blacklist')[_0x3e6d06(0x115)]()||[];}function broadcastToBots(_0x1da57e,_0x271909){config['forEach'](_0x5c1a79=>{const _0x4f8232=_0x40a9;if(_0x5c1a79['status']==_0x4f8232(0x268)&&_0x5c1a79[_0x4f8232(0x20f)]=='running'||_0x5c1a79[_0x4f8232(0x277)]==_0x4f8232(0x173)&&_0x5c1a79[_0x4f8232(0x20f)]==_0x4f8232(0x15e)){if(pid[_0x5c1a79[_0x4f8232(0x139)]])pid[_0x5c1a79[_0x4f8232(0x139)]][_0x4f8232(0x121)]({[_0x1da57e]:_0x271909});}});}async function storeSettings(_0x1496ca,_0x3586b5=![]){const _0x432e3b=_0x52bd53;_0x1496ca={...settings,..._0x1496ca};if(_0x3586b5&&_0x1496ca['bbPassword']!='************'&&_0x1496ca[_0x432e3b(0x87)]!=_0x432e3b(0x291)&&_0x1496ca[_0x432e3b(0x87)]!=''){const _0x12a59e=decryptRSA(secure[_0x432e3b(0xb5)],_0x1496ca[_0x432e3b(0x87)])['split'](_0x432e3b(0x229))[0x0],_0x5e8233=bcrypt[_0x432e3b(0x27d)](_0x12a59e,saltRounds);_0x1496ca={..._0x1496ca,'bbPassword':_0x5e8233};}if(_0x3586b5&&_0x1496ca['telegramToken']!='************'&&_0x1496ca[_0x432e3b(0x27b)]!=_0x432e3b(0x291)&&_0x1496ca[_0x432e3b(0x27b)]!=''){const _0x5b21fd=decryptRSA(secure[_0x432e3b(0xb5)],_0x1496ca[_0x432e3b(0x27b)])[_0x432e3b(0x8b)](_0x432e3b(0x229))[0x0];_0x1496ca={..._0x1496ca,'telegramToken':_0x5b21fd};}if(_0x3586b5&&_0x1496ca[_0x432e3b(0x96)]!=_0x432e3b(0xf5)&&_0x1496ca[_0x432e3b(0x96)]!=_0x432e3b(0x291)&&_0x1496ca['marketcapApi']!=''){const _0x1acf6d=decryptRSA(secure[_0x432e3b(0xb5)],_0x1496ca[_0x432e3b(0x96)])[_0x432e3b(0x8b)](_0x432e3b(0x229))[0x0];_0x1496ca={..._0x1496ca,'marketcapApi':_0x1acf6d};}const _0x29f797=_0x1496ca[_0x432e3b(0x27b)]!=_0x432e3b(0xf5)&&_0x1496ca[_0x432e3b(0x27b)]!=settings['telegramToken']||_0x1496ca[_0x432e3b(0xc3)]!=settings[_0x432e3b(0xc3)],_0x382307=_0x1496ca['telegramToken']==''||_0x1496ca[_0x432e3b(0xc3)]=='',_0x5bec0d=_0x1496ca['marketcapApi']&&_0x1496ca[_0x432e3b(0x96)]!=_0x432e3b(0xf5)&&_0x1496ca[_0x432e3b(0x96)]!=settings['telegramToken'];_0x29f797&&(_0x1496ca[_0x432e3b(0x1cc)]=null,_0x1496ca[_0x432e3b(0xb8)]=_0x432e3b(0x13f));for(const [_0x51deae,_0xb27931]of Object['entries'](_0x1496ca)){if(_0x51deae==_0x432e3b(0x27b)&&_0xb27931==_0x432e3b(0xf5)){_0x1496ca[_0x432e3b(0x27b)]=settings['telegramToken'];continue;};if(_0x51deae==_0x432e3b(0x87)&&_0xb27931==_0x432e3b(0xf5)){_0x1496ca[_0x432e3b(0x87)]=settings[_0x432e3b(0x87)];continue;};if(_0x51deae==_0x432e3b(0x96)&&_0xb27931==_0x432e3b(0xf5)){_0x1496ca[_0x432e3b(0x96)]=settings[_0x432e3b(0x96)];continue;};dbSettings[_0x432e3b(0x140)](_0x432e3b(0x246)+_0x51deae,_0xb27931)[_0x432e3b(0x104)]();}settings=_0x1496ca,io['to'](_0x432e3b(0xea))['emit'](_0x432e3b(0x1b3),cleanSettings()),broadcastToBots(_0x432e3b(0x14c),settings['timeshift']),broadcastToBots(_0x432e3b(0xcb),settings[_0x432e3b(0xcb)]),broadcastToBots('marketcapApi',settings[_0x432e3b(0x96)]);if(_0x29f797&&!_0x382307)initTelegram();if(_0x29f797&&_0x382307)disableTelegram();getAllClients()[_0x432e3b(0x1b0)](_0x290f85=>{const _0x19cd74=_0x432e3b;getSocket(_0x290f85['id'])['emit'](_0x19cd74(0x277),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x5bec0d&&(await sleep(0xbb8),testMarketcapApi(_0x1496ca['marketcapApi']));}async function testMarketcapApi(_0x5f1360){const _0x5d1393=_0x52bd53,_0x30156b=['BCT',_0x5d1393(0x209)];try{await axios[_0x5d1393(0x203)](_0x5d1393(0xeb),{'headers':{'X-CMC_PRO_API_KEY':_0x5f1360},'params':{'symbol':_0x30156b['toString']()}});}catch(_0x4ae906){_0x4ae906['toString']()['includes'](_0x5d1393(0x105))?(io['to'](_0x5d1393(0xea))['emit'](_0x5d1393(0x170),_0x5d1393(0x9d)),logger[_0x5d1393(0x133)](_0x5d1393(0x9d))):(io['to']('botmanager')[_0x5d1393(0x18f)](_0x5d1393(0x170),_0x5d1393(0x174)),logger[_0x5d1393(0x133)](_0x5d1393(0x174)),logger[_0x5d1393(0x20b)](_0x5d1393(0x154),_0x4ae906['toString']()+_0x5d1393(0xc8)+_0x4ae906[_0x5d1393(0x150)]));return;}logger[_0x5d1393(0x20b)](_0x5d1393(0x19f));}function updateSetting(_0x352e27,_0x365d03){const _0x4e1e0b=_0x52bd53;dbSettings['set']('settings.'+_0x352e27,_0x365d03)[_0x4e1e0b(0x104)](),settings=getSettings(),io['to'](_0x4e1e0b(0xea))[_0x4e1e0b(0x18f)](_0x4e1e0b(0x1b3),cleanSettings());}function storeSecure(_0x377b29){const _0x536451=_0x52bd53;dbSecure[_0x536451(0x203)](_0x536451(0x24e))[_0x536451(0xdc)](_0x377b29)['write'](),secure=_0x377b29;}function _0x40a9(_0x1b4c78,_0x162ae8){const _0x11426f=_0x3a2a();return _0x40a9=function(_0x31c65c,_0x51c465){_0x31c65c=_0x31c65c-0x85;let _0x3a2a1a=_0x11426f[_0x31c65c];return _0x3a2a1a;},_0x40a9(_0x1b4c78,_0x162ae8);}function addBlacklist(_0x478a69){const _0x807997=_0x52bd53;cleanBlacklist();let _0x4c4cdc;devices[_0x478a69][_0x807997(0x143)]?_0x4c4cdc=Math[_0x807997(0x1cd)](devices[_0x478a69][_0x807997(0x143)][_0x807997(0xae)],loginExpiry):_0x4c4cdc=loginExpiry,dbSecure[_0x807997(0x203)](_0x807997(0x108))[_0x807997(0xdc)]({'expiry':new Date()[_0x807997(0x208)]()+_0x4c4cdc*0x3c*0x3e8,'token':devices[_0x478a69][_0x807997(0x228)][_0x807997(0x124)]})[_0x807997(0x104)](),blacklist=dbSecure[_0x807997(0x203)]('blacklist')[_0x807997(0x115)]();}function cleanBlacklist(){const _0x1dae10=_0x52bd53;let _0x6f9eb4=dbSecure[_0x1dae10(0x203)](_0x1dae10(0x108))['cloneDeep']()[_0x1dae10(0x115)](),_0x30f865=new Date()[_0x1dae10(0x208)]();_0x6f9eb4[_0x1dae10(0x1b0)](_0x2ad0fd=>{const _0x483fd3=_0x1dae10;_0x2ad0fd[_0x483fd3(0xae)]<_0x30f865&&dbSecure['get'](_0x483fd3(0x108))[_0x483fd3(0x21e)]({'expiry':_0x2ad0fd[_0x483fd3(0xae)]})[_0x483fd3(0x104)]();});}function initStates(){const _0x1a52e7=_0x52bd53;let _0x485a10=getConfiguration();_0x485a10[_0x1a52e7(0x1b0)](_0x4d72bb=>{const _0x569924=_0x1a52e7;_0x4d72bb[_0x569924(0x20f)]=_0x569924(0x15c);}),storeConfiguration(_0x485a10);}async function generateKeys(){const _0x4b506d=_0x52bd53,_0x324c3e=forge[_0x4b506d(0x11a)][_0x4b506d(0x24f)][_0x4b506d(0x231)]({'bits':0x1000,'e':0x10001}),_0x4439fb=forge[_0x4b506d(0x11a)][_0x4b506d(0x204)](_0x324c3e['privateKey']),_0x5e3260=forge['pki'][_0x4b506d(0x16b)](_0x324c3e[_0x4b506d(0x127)]);return{'privateKey':_0x4439fb,'publicKey':_0x5e3260};}async function oneTimeMigration(){const _0x467748=_0x52bd53;let _0x178367=getSettings(),_0x15802a=![];!_0x178367[_0x467748(0x1a3)](_0x467748(0x135))&&(_0x178367[_0x467748(0x135)]=0x0,_0x15802a=!![]);!_0x178367[_0x467748(0x1a3)](_0x467748(0x177))&&(_0x178367[_0x467748(0x177)]=0x0,_0x15802a=!![]);!_0x178367[_0x467748(0x1a3)]('latestversion')&&(_0x178367['latestversion']=_0x467748(0x112),_0x15802a=!![]);!_0x178367[_0x467748(0x1a3)]('onepagemode')&&(_0x178367['onepagemode']=![],_0x15802a=!![]);!_0x178367[_0x467748(0x1a3)](_0x467748(0x96))&&(_0x178367[_0x467748(0x96)]='',_0x15802a=!![]);if(_0x15802a)storeSettings(_0x178367);try{fs[_0x467748(0x178)](configbackuppath,{'withFileTypes':!![]})[_0x467748(0x1b0)](_0x2500ff=>{const _0xb32ac5=_0x467748;if(!_0x2500ff[_0xb32ac5(0xe9)]()){if(!_0x2500ff['name'][_0xb32ac5(0x138)](_0xb32ac5(0x16d)))fs[_0xb32ac5(0xc4)](configbackuppath+_0x2500ff[_0xb32ac5(0x25b)]);}else fs[_0xb32ac5(0x217)](configbackuppath+_0x2500ff['name'],{'recursive':!![]});});}catch(_0x117d1a){logger[_0x467748(0x20b)](_0x467748(0x260),_0x117d1a);}}function storeConfiguration(_0x22eaca){const _0x80ac90=_0x52bd53;dbConfig[_0x80ac90(0x203)](_0x80ac90(0x161))['remove']()[_0x80ac90(0x104)](),dbConfig['get']('bots')['push'](..._0x22eaca)[_0x80ac90(0x104)](),config=_0x22eaca;}async function resetPassword(){const _0x306e93=_0x52bd53;if(tgBot&&settings[_0x306e93(0x1cc)]){const _0x12d67a=Markup['inlineKeyboard']([Markup[_0x306e93(0xa3)][_0x306e93(0x213)](_0x306e93(0x1d5),_0x306e93(0x12f)),Markup[_0x306e93(0xa3)]['callback']('no',_0x306e93(0x27c))]);await sendTelegram(settings['telegramChatId'],_0x306e93(0x256),_0x12d67a),tgBot[_0x306e93(0x145)](/resetpw_(.+)/,async _0x1d88fb=>{const _0xb6fa18=_0x306e93,_0x259a32=_0x1d88fb[_0xb6fa18(0x1dc)][0x1];_0x1d88fb[_0xb6fa18(0x1e1)]();if(_0x259a32!='no'){const _0x522e09=0xf,_0x2f5b06=_0xb6fa18(0x1df),_0x2a0fde=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x522e09)))[_0xb6fa18(0x25c)](_0x43039c=>_0x2f5b06[_0x43039c%_0x2f5b06['length']])['join'](''),_0x59295e=bcrypt['hashSync'](_0x2a0fde,saltRounds);storeSettings({'bbPassword':_0x59295e}),await sendTelegram(_0x1d88fb['chat']['id'],_0xb6fa18(0x22f)+_0x2a0fde,{'parse_mode':_0xb6fa18(0x257)});}else await sendTelegram(_0x1d88fb[_0xb6fa18(0x1d9)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x1c613c,_0x1393ab){const _0x164550=_0x52bd53;io['to']('botmanager')['emit'](_0x164550(0x170),_0x164550(0xba),'success');if(tgBot&&settings[_0x164550(0x1cc)]){const _0x58b0ec=uuidRandom();tmpStorage[_0x58b0ec]={'path':_0x1c613c,'filename':_0x1393ab};const _0x3825c0=Markup[_0x164550(0x222)]([Markup[_0x164550(0xa3)]['callback'](_0x164550(0x1d5),_0x164550(0x13a)+_0x58b0ec),Markup[_0x164550(0xa3)]['callback']('no',_0x164550(0x214)+_0x58b0ec)]);await sendTelegram(settings[_0x164550(0x1cc)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x3825c0),tgBot[_0x164550(0x145)](/restore_(.+)_(.+)/,async _0x14658a=>{const _0x1f304a=_0x164550,_0x558934=_0x14658a[_0x1f304a(0x1dc)][0x1],_0x1f986d=_0x14658a[_0x1f304a(0x1dc)][0x2],{path:_0x5d0423,filename:_0x7c68b5}=tmpStorage[_0x1f986d];delete tmpStorage[_0x1f986d],_0x14658a[_0x1f304a(0x1e1)](),_0x558934=='yes'?(logger[_0x1f304a(0x20b)]('Restore\x20process\x20confirmed'),await sendTelegram(_0x14658a[_0x1f304a(0x1d9)]['id'],_0x1f304a(0x160),{'parse_mode':_0x1f304a(0x257)}),unzipFile(_0x5d0423,_0x7c68b5)):(logger[_0x1f304a(0x20b)]('Restore\x20process\x20aborted'),await sendTelegram(_0x14658a[_0x1f304a(0x1d9)]['id'],_0x1f304a(0xa7)));});}}function getServerTime(){const _0x295063=_0x52bd53,_0x162c49=new Date();return _0x162c49[_0x295063(0x1a9)]()+'/'+(_0x162c49[_0x295063(0x226)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x162c49[_0x295063(0x1f4)]()[_0x295063(0xf8)]()[_0x295063(0xf7)](0x2,'0')+'\x20'+_0x162c49['getHours']()[_0x295063(0xf8)]()[_0x295063(0xf7)](0x2,'0')+':'+_0x162c49['getMinutes']()[_0x295063(0xf8)]()[_0x295063(0xf7)](0x2,'0')+':'+_0x162c49[_0x295063(0x276)]()[_0x295063(0xf8)]()[_0x295063(0xf7)](0x2,'0');}function getTimeStamp(){const _0x470727=_0x52bd53,_0x10ba72=shiftedTime();return _0x10ba72[_0x470727(0x1a9)]()+'/'+(_0x10ba72[_0x470727(0x226)]()+0x1)['toString']()[_0x470727(0xf7)](0x2,'0')+'/'+_0x10ba72['getDate']()['toString']()[_0x470727(0xf7)](0x2,'0')+'\x20'+_0x10ba72[_0x470727(0x28e)]()[_0x470727(0xf8)]()[_0x470727(0xf7)](0x2,'0')+':'+_0x10ba72[_0x470727(0x265)]()[_0x470727(0xf8)]()[_0x470727(0xf7)](0x2,'0')+':'+_0x10ba72[_0x470727(0x276)]()[_0x470727(0xf8)]()[_0x470727(0xf7)](0x2,'0');}function getCleanTimeStamp(){const _0x3064ca=_0x52bd53,_0x1d5dc7=shiftedTime();return _0x1d5dc7[_0x3064ca(0x1a9)]()+(_0x1d5dc7['getMonth']()+0x1)[_0x3064ca(0xf8)]()[_0x3064ca(0xf7)](0x2,'0')+_0x1d5dc7[_0x3064ca(0x1f4)]()[_0x3064ca(0xf8)]()[_0x3064ca(0xf7)](0x2,'0')+'-'+_0x1d5dc7['getHours']()[_0x3064ca(0xf8)]()[_0x3064ca(0xf7)](0x2,'0')+_0x1d5dc7[_0x3064ca(0x265)]()[_0x3064ca(0xf8)]()[_0x3064ca(0xf7)](0x2,'0')+_0x1d5dc7[_0x3064ca(0x276)]()[_0x3064ca(0xf8)]()[_0x3064ca(0xf7)](0x2,'0');}function shiftedTime(){const _0x54fffb=_0x52bd53,_0x576e00=new Date();let _0x389092=_0x576e00;if(settings[_0x54fffb(0x14c)]&&settings[_0x54fffb(0x14c)]!==0x0)_0x389092=fns[_0x54fffb(0x238)](_0x576e00,{'hours':settings['timeshift']});return _0x389092;}async function startScheduler(){const _0x22f945=_0x52bd53,_0x3bd336=new Date()['getUTCHours'](),_0x481cd5=shiftedTime()[_0x22f945(0x28e)]();_0x481cd5==0x4&&backupConfigFiles(),_0x481cd5==0x0&&rotateLogFiles(),_0x3bd336%0x6==0x0&&triggerAnalytics(),_0x3bd336%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x32d5da){const _0x2dc8a5=_0x52bd53;logger[_0x2dc8a5(0x20b)](_0x2dc8a5(0x292)+_0x32d5da);const _0x563311=getBotsWithMode();_0x563311['length']>0x0?confirmRestore(configbackuppath,_0x32d5da):unzipFile(configbackuppath,_0x32d5da);}async function getBackupFiles(_0x5a8eb9=null){const _0x77db84=_0x52bd53;let _0xa2cae3=[],_0x36a057=fs[_0x77db84(0x178)](configbackuppath,{'withFileTypes':!![]});_0x36a057[_0x77db84(0x1c6)]((_0x4abda7,_0x2b83e3)=>_0x4abda7['name']<_0x2b83e3[_0x77db84(0x25b)]?0x1:_0x2b83e3[_0x77db84(0x25b)]<_0x4abda7[_0x77db84(0x25b)]?-0x1:0x0),_0x36a057[_0x77db84(0x1b0)](_0x2d49ef=>{const _0x10aa66=_0x77db84;if(!_0x2d49ef[_0x10aa66(0xe9)]()&&_0x2d49ef['name'][_0x10aa66(0x138)](_0x10aa66(0x16d))&&_0x2d49ef[_0x10aa66(0x25b)][_0x10aa66(0x1f3)](_0x10aa66(0x99))){const _0x4a87a7=formatDate(fs['statSync'](configbackuppath+_0x2d49ef[_0x10aa66(0x25b)])['mtime']);_0xa2cae3[_0x10aa66(0xdc)]({'name':_0x2d49ef['name'],'mtime':_0x4a87a7});}});if(_0x5a8eb9)io['to'](_0x5a8eb9)[_0x77db84(0x18f)](_0x77db84(0x1ec),_0xa2cae3);else return _0xa2cae3;}async function backupConfigFiles(){const _0x41664c=_0x52bd53;await zipFiles(_0x41664c(0xbd));const _0x451c11=getCleanTimeStamp();fs[_0x41664c(0xdf)](zippath+_0x41664c(0x1ef),configbackuppath+('backup-full@'+_0x451c11+_0x41664c(0x99)));let _0x3dcced=fs[_0x41664c(0x178)](configbackuppath,{'withFileTypes':!![]});_0x3dcced[_0x41664c(0x1c6)]((_0x37b2bc,_0x3b4920)=>_0x37b2bc[_0x41664c(0x25b)]<_0x3b4920[_0x41664c(0x25b)]?0x1:_0x3b4920[_0x41664c(0x25b)]<_0x37b2bc[_0x41664c(0x25b)]?-0x1:0x0),_0x3dcced[_0x41664c(0x1ad)]>maxBackups&&fs[_0x41664c(0xc4)](configbackuppath+_0x3dcced[_0x3dcced[_0x41664c(0x1ad)]-0x1][_0x41664c(0x25b)]);}function rotateLogFiles(){const _0x94b20c=_0x52bd53,_0x3f8f92=fs[_0x94b20c(0x1c1)](logspath+_0x94b20c(0xed)),_0x1d965e=_0x3f8f92[_0x94b20c(0x117)]/0x400;if(_0x1d965e>0x64){let _0x210c1b=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x210c1b['sort']((_0x17ae60,_0x215be7)=>_0x17ae60[_0x94b20c(0x25b)]<_0x215be7['name']?0x1:_0x215be7[_0x94b20c(0x25b)]<_0x17ae60[_0x94b20c(0x25b)]?-0x1:0x0),_0x210c1b[_0x94b20c(0x1b0)](_0x213c85=>{const _0x3f049d=_0x94b20c;if(_0x213c85['name']=='output-002.log')fs['copyFileSync'](logspath+_0x213c85[_0x3f049d(0x25b)],logspath+'output-003.log');if(_0x213c85[_0x3f049d(0x25b)]==_0x3f049d(0x85))fs[_0x3f049d(0xdf)](logspath+_0x213c85[_0x3f049d(0x25b)],logspath+_0x3f049d(0x1c2));_0x213c85[_0x3f049d(0x25b)]==_0x3f049d(0xed)&&(fs['copyFileSync'](logspath+_0x213c85[_0x3f049d(0x25b)],logspath+_0x3f049d(0x85)),fs[_0x3f049d(0x1af)](logspath+_0x213c85['name'],''));});}}async function zipFiles(_0x77a084){const _0x4bbb70=_0x52bd53;let _0x5accbf;if(_0x77a084==_0x4bbb70(0x1ee))_0x5accbf=logspath;if(_0x77a084=='backup')_0x5accbf=configpath;if(_0x77a084==_0x4bbb70(0xbd))_0x5accbf=configpath;let _0x40f741=fs[_0x4bbb70(0x178)](_0x5accbf,{'withFileTypes':!![]});const _0x237916=new JSZip();_0x40f741[_0x4bbb70(0x1b0)](_0x489757=>{const _0x43dc7f=_0x4bbb70;if(!_0x489757['isDirectory']()){let _0xe90854=fs[_0x43dc7f(0x123)](_0x5accbf+_0x489757[_0x43dc7f(0x25b)]);if(_0x77a084==_0x43dc7f(0x1dd)){const _0x31bd5e=/^bot-[0-9]{3}-config.json$/,_0x176285=_0x31bd5e['test'](_0x489757['name']);if(_0x176285){const _0x1da9e0=JSON[_0x43dc7f(0x185)](_0xe90854);if(_0x1da9e0['bot'][0x0]){_0x1da9e0['bot'][0x0][_0x43dc7f(0x198)]=_0x43dc7f(0x291),_0x1da9e0[_0x43dc7f(0x26f)][0x0][_0x43dc7f(0x1e7)]=_0x43dc7f(0x291);if(_0x1da9e0['bot'][0x0][_0x43dc7f(0x287)])_0x1da9e0[_0x43dc7f(0x26f)][0x0][_0x43dc7f(0x287)]=_0x43dc7f(0x291);}_0xe90854=JSON['stringify'](_0x1da9e0,null,0x2);}if(_0x489757[_0x43dc7f(0x25b)]==_0x43dc7f(0x26b)){const _0x19869b=JSON[_0x43dc7f(0x185)](_0xe90854);if(_0x19869b['settings'][_0x43dc7f(0xe0)])_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0xe0)]=![];if(_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0x87)])_0x19869b['settings'][_0x43dc7f(0x87)]=_0x43dc7f(0x291);if(_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0x27b)])_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0x27b)]=_0x43dc7f(0x291);if(_0x19869b['settings']['telegramChatId'])_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0x1cc)]=null;if(_0x19869b[_0x43dc7f(0x1b3)][_0x43dc7f(0x96)])_0x19869b[_0x43dc7f(0x1b3)]['marketcapApi']=_0x43dc7f(0x291);_0xe90854=JSON[_0x43dc7f(0x1f0)](_0x19869b,null,0x2);}if(_0x489757[_0x43dc7f(0x25b)]!=_0x43dc7f(0x271))_0x237916[_0x43dc7f(0x89)](_0x489757[_0x43dc7f(0x25b)],_0xe90854);}else _0x237916[_0x43dc7f(0x89)](_0x489757[_0x43dc7f(0x25b)],_0xe90854);}});const _0xefbd4c=await _0x237916[_0x4bbb70(0xc7)]({'type':_0x4bbb70(0x97),'base64':![],'compression':_0x4bbb70(0x134)});fs['writeFileSync'](zippath+(_0x77a084+_0x4bbb70(0x99)),_0xefbd4c,'binary');}async function unzipFile(_0x235c8b,_0x570b73){const _0x3274dc=_0x52bd53;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3274dc(0x1b0)](_0xec6f0b=>{const _0x4c0f3e=_0x3274dc;if(!_0xec6f0b['isDirectory']())fs[_0x4c0f3e(0x217)](configpath+_0xec6f0b['name']);});const _0xbcd112=fs['readFileSync'](_0x235c8b+_0x570b73,_0x3274dc(0x155)),_0x220584=await JSZip[_0x3274dc(0xbe)](_0xbcd112,{'base64':![],'checkCRC32':!![]});for(const _0x2574a9 of Object[_0x3274dc(0x14a)](_0x220584['files'])){const _0x3d322a=_0x220584['files'][_0x2574a9],_0x9341a6=await _0x3d322a[_0x3274dc(0x164)](_0x3274dc(0x97));fs['writeFileSync'](configpath+_0x3d322a['name'],_0x9341a6);}fs[_0x3274dc(0x178)](temppath,{'withFileTypes':!![]})[_0x3274dc(0x1b0)](_0x173f17=>{const _0x42e44d=_0x3274dc;if(!_0x173f17[_0x42e44d(0xe9)]())fs[_0x42e44d(0x217)](temppath+_0x173f17[_0x42e44d(0x25b)]);}),logger[_0x3274dc(0x20b)](_0x3274dc(0x12a)),process[_0x3274dc(0x121)]({'restore':!![]},_0x431b82=>{});}async function getPublicIp(){const _0x420b45=_0x52bd53;try{const _0x20c1c2=await axios[_0x420b45(0x203)](_0x420b45(0x1e4));publicip=_0x20c1c2['data']['ip'];}catch(_0x163923){}}async function triggerAnalytics(){const _0x24530a=_0x52bd53;if(!publicip)await getPublicIp();const _0x4232a2=getBotsWithMode();let _0x1c2fe6=0x0;_0x4232a2[_0x24530a(0x1b0)](_0x491006=>{const _0x501add=_0x24530a;if(_0x491006[_0x501add(0x277)]===_0x501add(0x268))_0x1c2fe6++;});const _0x250ad7=getBotExchanges();mixpanel[_0x24530a(0x254)](_0x24530a(0x255),{'distinct_id':settings[_0x24530a(0x188)],'ip':publicip,'version':serverversion,'numbots':_0x4232a2[_0x24530a(0x1ad)],'numbotsenabled':_0x1c2fe6,'exchanges':_0x250ad7,'environment':environment});}async function getMessages(){const _0xabc031=_0x52bd53,_0x29f1a8=_0xabc031(0x12d),_0x11f9ae=new GraphQLClient(_0x29f1a8),_0x55001c={'authorization':_0xabc031(0x192)},_0x2c1cc1=serverversion[_0xabc031(0x8b)]('.'),_0x2b1883=_0x2c1cc1[0x0]+'.'+_0x2c1cc1[0x1],_0x1308da=Math[_0xabc031(0x146)](settings['lastmsgtelegram'],settings[_0xabc031(0x177)]),_0xc35db={'last':parseInt(_0x1308da),'bbm':_0x2b1883},_0x4bd929=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x32beca;try{_0x32beca=await _0x11f9ae[_0xabc031(0x1da)](_0x4bd929,_0xc35db,_0x55001c);}catch(_0xdfd1af){}if(_0x32beca&&_0x32beca[_0xabc031(0x1d2)]){let _0x2a3e35=settings[_0xabc031(0x135)];newMessages=[];for(const _0x1bdd47 of _0x32beca[_0xabc031(0x1d2)]){newMessages['push'](_0x1bdd47);let _0x3a29a3=![];_0x1bdd47['bbvNew']&&(updateSetting(_0xabc031(0x186),_0x1bdd47['bbvNew']),_0x3a29a3=isNewerVersion(serverversion,_0x1bdd47['bbvNew'])||serverversion==_0x1bdd47[_0xabc031(0x1fb)]);if(!_0x3a29a3&&_0x1bdd47[_0xabc031(0x13d)]>_0x2a3e35){if(_0x1bdd47[_0xabc031(0x1e9)]===_0xabc031(0x193)||serverversion['startsWith'](_0x1bdd47[_0xabc031(0x1e9)])){let _0x1479e1=''+_0x1bdd47[_0xabc031(0x270)]+'\x0a\x0a'+_0x1bdd47[_0xabc031(0x267)];const _0x148848=await sendTelegramMsg(toTelegramMarkdown(_0x1479e1),_0xabc031(0x27f));if(_0x148848)_0x2a3e35=_0x1bdd47[_0xabc031(0x13d)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x2a3e35),emitMessages();}}function emitMessages(){const _0x1cf11f=_0x52bd53,_0x3e805d=settings[_0x1cf11f(0x177)];let _0x6df8fd=[];newMessages[_0x1cf11f(0x1b0)](_0x2b908f=>{const _0x279e42=_0x1cf11f;_0x2b908f[_0x279e42(0x13d)]>_0x3e805d&&_0x6df8fd[_0x279e42(0xdc)](_0x2b908f);}),_0x6df8fd[_0x1cf11f(0x1ad)]>0x0&&getAllClients()[_0x1cf11f(0x1b0)](_0xd568d6=>{const _0x486add=_0x1cf11f;getSocket(_0xd568d6['id'])[_0x486add(0x18f)](_0x486add(0x267),_0x6df8fd);});}function confirmMessage(_0x2cba0d){const _0x5822c5=_0x52bd53;updateSetting(_0x5822c5(0x177),Number(_0x2cba0d));}function isNewerVersion(_0x4c5ee1,_0x4c2203){const _0xe719f=_0x52bd53,_0x56e20d=_0x4c2203[_0xe719f(0x8b)]('.'),_0x3525d2=_0x4c5ee1[_0xe719f(0x8b)]('.');for(var _0x556793=0x0;_0x556793<_0x3525d2['length'];_0x556793++){const _0x18d342=~~_0x3525d2[_0x556793],_0x2de8f5=~~_0x56e20d[_0x556793];if(_0x18d342>_0x2de8f5)return!![];if(_0x18d342<_0x2de8f5)return![];}return![];}function toTelegramMarkdown(_0x3ed4a9){const _0x5003c7=_0x52bd53,_0x125710=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4138db=/\*{2}(.+?)\*{2}/gim;return _0x3ed4a9=_0x3ed4a9['replace'](_0x125710,_0x5003c7(0x26c))[_0x5003c7(0x1c0)](_0x4138db,_0x5003c7(0x1a0)),_0x3ed4a9;}async function validateConfigFile(){const _0xd98a95=_0x52bd53,_0x5323ed=dbConfig[_0xd98a95(0x203)](_0xd98a95(0x161))[_0xd98a95(0x235)]('botID')[_0xd98a95(0x115)]()||[];if(_0x5323ed['length']==0x0){let _0xc02b74=0x0,_0x137b09=[];const _0x107a63=/^bot-([0-9]{3})-config.json$/,_0x2d368b=fs[_0xd98a95(0x178)](configpath);_0x2d368b[_0xd98a95(0x1b0)](_0x44d563=>{const _0x4fd847=_0xd98a95,_0x274a8e=_0x107a63[_0x4fd847(0x1ac)](_0x44d563);if(_0x274a8e){const _0x26e960=_0x274a8e[0x1];let _0x43a37d=getBotAttributes(_0x26e960);_0x137b09[_0x4fd847(0xdc)]({'botID':_0x26e960,'botname':_0x43a37d[_0x4fd847(0x171)],'status':_0x4fd847(0x1d1),'live':_0x4fd847(0x15c)}),_0xc02b74++;}}),_0xc02b74!=0x0&&(dbConfig[_0xd98a95(0x203)](_0xd98a95(0x161))[_0xd98a95(0x26a)](_0x137b09)[_0xd98a95(0x104)](),config=_0x137b09,restoredConfigFile=_0xc02b74);}}async function restoreConfigNotify(_0x582858){const _0xfa3c49=_0x52bd53;let _0x397a60;if(restoredConfigFile==0x1)_0x397a60=_0xfa3c49(0x17e);else _0x397a60=_0xfa3c49(0x26d);if(_0x582858)io['to']('botmanager')[_0xfa3c49(0x18f)]('notification',_0x397a60);else{logger[_0xfa3c49(0x236)](_0xfa3c49(0xd7)),logger['simple'](_0x397a60),logger['simple'](_0xfa3c49(0xd7)),logger[_0xfa3c49(0x236)]('');if(tgBot&&settings['telegramChatId']&&settings[_0xfa3c49(0xb8)]!=_0xfa3c49(0x8e))await sendTelegram(settings[_0xfa3c49(0x1cc)],'Bot\x20Mgr\x20>\x20'+_0x397a60);}}function decryptRSA(_0x54edaf,_0x4ad725){const _0xbd46bf=_0x52bd53,_0x2314c6=forge[_0xbd46bf(0x11a)][_0xbd46bf(0x273)](_0x54edaf),_0x39fb5a=_0x2314c6[_0xbd46bf(0xca)](forge['util'][_0xbd46bf(0xe2)](_0x4ad725),_0xbd46bf(0x107),{'md':forge['md'][_0xbd46bf(0x206)][_0xbd46bf(0x1e3)](),'mgf1':{'md':forge['md'][_0xbd46bf(0x206)][_0xbd46bf(0x1e3)]()}});return _0x39fb5a;}function validateCredentials(_0x3f6cb8,_0x46a4d6){const _0x52f83b=_0x52bd53;if(_0x3f6cb8['username']==settings[_0x52f83b(0xe5)]&&bcrypt[_0x52f83b(0x1cb)](_0x3f6cb8[_0x52f83b(0x22a)],settings['bbPassword'])){if(settings[_0x52f83b(0x242)])return{'allow':![],'reason':_0x52f83b(0x98),'token':null};else{const _0x1b478b=generateLoginToken(_0x46a4d6);return{'allow':!![],'reason':_0x52f83b(0x13b),'token':_0x1b478b};}}else return{'allow':![],'reason':_0x52f83b(0x1e2),'token':null};}function refreshToken(_0x3ac021){const _0x52a9dd=generateLoginToken(_0x3ac021);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x52a9dd};}function validateAccess(_0x248c40,_0x2fe617,_0x114203){const _0x30ac28=_0x52bd53,_0x510455=_0x114203?_0x114203:devices[_0x2fe617]['ip'];let _0x4d0c3c;const _0x167bc8=_0x4522db=>{const _0x39e7fb=_0x40a9;if(settings[_0x39e7fb(0xe0)]){if(settings[_0x39e7fb(0x242)]){if(telegram2FaApproved(_0x2fe617)){const _0x450081=generateLoginToken(_0x2fe617);return{'allow':!![],'reason':_0x39e7fb(0x88),'token':_0x450081};}else return{'allow':![],'reason':_0x39e7fb(0x28b),'token':null};}else return _0x4d0c3c=validToken(_0x4522db,_0x2fe617),_0x4d0c3c[_0x39e7fb(0x1a3)]('success')?{'allow':!![],'reason':_0x39e7fb(0x113),'token':_0x4522db}:{'allow':![],'reason':_0x39e7fb(0x28b),'token':null};}else return{'allow':!![],'reason':_0x39e7fb(0xe6),'token':null};};if(settings[_0x30ac28(0x232)]){let _0x1d8f4b=[...settings[_0x30ac28(0x9a)],_0x30ac28(0x158),'::ffff:127.0.0.1',_0x30ac28(0x1fa)];if(_0x1d8f4b[_0x30ac28(0xb9)](_0x510455))return _0x167bc8(_0x248c40);else{_0x4d0c3c=validToken(_0x248c40,_0x2fe617);if(_0x4d0c3c[_0x30ac28(0x1a3)](_0x30ac28(0x20a)))return _0x167bc8(_0x248c40);else{if(telegramIpApproved(_0x2fe617)){const _0x3629aa=generateToken(_0x2fe617);return _0x4d0c3c=_0x167bc8(_0x248c40),_0x4d0c3c[_0x30ac28(0x21b)]?{'allow':!![],'reason':_0x30ac28(0x157),'token':_0x3629aa}:_0x4d0c3c;}else return settings[_0x30ac28(0xbf)]?{'allow':![],'reason':_0x30ac28(0x149),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x167bc8(_0x248c40);}function timelyDecrypt(_0xa88afb,_0x150bf1,_0xdd9d1e='@'){const _0x5a3a50=_0x52bd53;if(_0xa88afb)try{const _0xf19188=decryptRSA(secure['privateKey'],_0xa88afb),_0x3400=_0xf19188[_0x5a3a50(0x8b)](_0xdd9d1e)[0x0],_0xa72903=_0xf19188[_0x5a3a50(0x8b)](_0xdd9d1e)[0x1],_0x6e7f55=new Date()['getTime']();if(_0x150bf1){if(_0x6e7f55-_0xa72903<maxSecretAge*0x3e8)return _0x3400;else return![];}else return _0x3400;}catch(_0x57ef94){return![];}else return![];}const validToken=(_0x2e5380,_0x1328a6)=>{const _0x3b18a4=_0x52bd53,_0x2d536e=devices[_0x1328a6]['ip'];if(!_0x2e5380)return{'error':_0x3b18a4(0x10c)};for(let _0x4d1a20 of blacklist){if(_0x4d1a20['token']==_0x2e5380)return{'error':_0x3b18a4(0x25a)};}let _0x19829c;try{_0x19829c=jwt[_0x3b18a4(0xee)](_0x2e5380,secure[_0x3b18a4(0xa6)]+_0x1328a6);}catch{return{'error':_0x3b18a4(0xfb)};}if(!_0x19829c[_0x3b18a4(0x1a3)]('clientip')&&!_0x19829c[_0x3b18a4(0x1a3)](_0x3b18a4(0x1f6))||!_0x19829c['hasOwnProperty'](_0x3b18a4(0x151)))return{'error':_0x3b18a4(0x239)};if(!_0x19829c[_0x3b18a4(0x1a3)]('username')&&_0x19829c['hasOwnProperty']('clientip')){const {clientip:_0xb81ff8}=_0x19829c;return _0x2d536e==_0xb81ff8?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x19829c[_0x3b18a4(0x1a3)]('username')&&_0x19829c['hasOwnProperty']('clientip')){const {username:_0x1eaf5b,clientip:_0x34879a}=_0x19829c;return settings['bbUsername']==_0x1eaf5b&&_0x2d536e==_0x34879a?{'success':_0x3b18a4(0x1b6)}:{'error':_0x3b18a4(0x118)};}}},generateLoginToken=_0x1eb7f1=>{const _0x3df0eb=_0x52bd53;if(_0x1eb7f1){const _0x1a82e1=devices[_0x1eb7f1]['ip'];return jwt[_0x3df0eb(0x18d)]({'username':settings['bbUsername'],'clientip':_0x1a82e1},secure['secret']+_0x1eb7f1,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x321d6e=>{const _0x3f4dc3=_0x52bd53;if(_0x321d6e){const _0xb1dca1=devices[_0x321d6e]['ip'];return jwt[_0x3f4dc3(0x18d)]({'clientip':_0xb1dca1},secure[_0x3f4dc3(0xa6)]+_0x321d6e,{'expiresIn':devices[_0x321d6e][_0x3f4dc3(0x143)][_0x3f4dc3(0xae)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xdc5f75=>{const _0x58a526=_0x52bd53;let _0x8cac02=![];return devices[_0xdc5f75][_0x58a526(0x143)]&&devices[_0xdc5f75][_0x58a526(0x143)][_0x58a526(0xae)]!=_0x58a526(0x142)&&(_0x8cac02=devices[_0xdc5f75][_0x58a526(0x143)][_0x58a526(0x1be)]==devices[_0xdc5f75]['ip']&&new Date()['getTime']()-devices[_0xdc5f75]['telegramIpApproval'][_0x58a526(0xd4)]<devices[_0xdc5f75][_0x58a526(0x143)][_0x58a526(0xae)]*0x3c*0x3e8),_0x8cac02;},telegram2FaApproved=_0x5b3489=>{const _0x55972b=_0x52bd53;let _0x18cab3=![];return devices[_0x5b3489][_0x55972b(0x91)]&&devices[_0x5b3489][_0x55972b(0x91)][_0x55972b(0xae)]!=_0x55972b(0x142)&&(_0x18cab3=devices[_0x5b3489]['telegram2FaApproval'][_0x55972b(0x1be)]==devices[_0x5b3489]['ip']&&new Date()[_0x55972b(0x208)]()-devices[_0x5b3489][_0x55972b(0x91)][_0x55972b(0xd4)]<devices[_0x5b3489][_0x55972b(0x91)][_0x55972b(0xae)]*0x3c*0x3e8),_0x18cab3;},normalizeIP=_0x3d493c=>{const _0x2aa433=_0x52bd53;let _0x3ad146=null,_0x38bf9b=null;if(ipaddr['isValid'](_0x3d493c)){const _0x173520=ipaddr[_0x2aa433(0x185)](_0x3d493c);_0x173520[_0x2aa433(0x1bd)]()==='ipv6'?(_0x173520[_0x2aa433(0x200)]()&&(_0x3ad146=_0x173520[_0x2aa433(0x94)]()[_0x2aa433(0xf8)]()),_0x38bf9b=_0x173520[_0x2aa433(0xf8)]()):(_0x3ad146=_0x173520['toString'](),_0x38bf9b=_0x173520[_0x2aa433(0x288)]()[_0x2aa433(0xf8)]());}return{'show':_0x3ad146?_0x3ad146:_0x38bf9b,'store':_0x38bf9b};};function formatDate(_0x475820){const _0x6c6c7e=_0x52bd53;return _0x475820[_0x6c6c7e(0x1a9)]()+'/'+(_0x475820['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x475820['getDate']()[_0x6c6c7e(0xf8)]()[_0x6c6c7e(0xf7)](0x2,'0')+'\x20'+_0x475820['getHours']()[_0x6c6c7e(0xf8)]()[_0x6c6c7e(0xf7)](0x2,'0')+':'+_0x475820[_0x6c6c7e(0x265)]()['toString']()[_0x6c6c7e(0xf7)](0x2,'0')+':'+_0x475820[_0x6c6c7e(0x276)]()[_0x6c6c7e(0xf8)]()[_0x6c6c7e(0xf7)](0x2,'0');}function sleep(_0x4015f8){return new Promise(_0x46ce55=>setTimeout(_0x46ce55,_0x4015f8));}