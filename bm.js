const _0x226ca6=_0x543c;(function(_0x268b4d,_0x1376d0){const _0x3f6271=_0x543c,_0x5acb9f=_0x268b4d();while(!![]){try{const _0x1975b8=-parseInt(_0x3f6271(0x2e1))/0x1*(parseInt(_0x3f6271(0x202))/0x2)+-parseInt(_0x3f6271(0x1fa))/0x3*(parseInt(_0x3f6271(0x2c7))/0x4)+parseInt(_0x3f6271(0x2a3))/0x5+parseInt(_0x3f6271(0x2fd))/0x6+-parseInt(_0x3f6271(0x28e))/0x7+parseInt(_0x3f6271(0x2b8))/0x8*(parseInt(_0x3f6271(0x338))/0x9)+-parseInt(_0x3f6271(0x2e6))/0xa;if(_0x1975b8===_0x1376d0)break;else _0x5acb9f['push'](_0x5acb9f['shift']());}catch(_0x2fc7e3){_0x5acb9f['push'](_0x5acb9f['shift']());}}}(_0x1716,0xc7096));const _0x214e02=function(){let _0x4ac520=!![];return function(_0x26e1d7,_0x18bc14){const _0x2b1fc3=_0x4ac520?function(){const _0x35431c=_0x543c;if(_0x18bc14){const _0x3ff9a9=_0x18bc14[_0x35431c(0x2ad)](_0x26e1d7,arguments);return _0x18bc14=null,_0x3ff9a9;}}:function(){};return _0x4ac520=![],_0x2b1fc3;};}(),_0x22e7ef=_0x214e02(this,function(){const _0x2779ee=_0x543c;return _0x22e7ef[_0x2779ee(0x314)]()[_0x2779ee(0x2ae)](_0x2779ee(0x29a))[_0x2779ee(0x314)]()[_0x2779ee(0x2bb)](_0x22e7ef)[_0x2779ee(0x2ae)](_0x2779ee(0x29a));});_0x22e7ef();'use strict';process[_0x226ca6(0x2b1)][_0x226ca6(0x21e)]=0x1;const childProcess=require(_0x226ca6(0x1f7)),FileSync=require(_0x226ca6(0x2cf)),fs=require('fs'),fns=require(_0x226ca6(0x21f)),low=require(_0x226ca6(0x2b4)),path=require(_0x226ca6(0x22b)),crypto=require(_0x226ca6(0x2d8)),Crypt=require(_0x226ca6(0x268))[_0x226ca6(0x213)],RSA=require('hybrid-crypto-js')[_0x226ca6(0x20d)],bcrypt=require(_0x226ca6(0x309)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x226ca6(0x2b9))[_0x226ca6(0x256)],googleAnalytics=require('@analytics/google-analytics')[_0x226ca6(0x256)],ipaddr=require(_0x226ca6(0x29f)),argv=require(_0x226ca6(0x237))(process[_0x226ca6(0x26a)][_0x226ca6(0x224)](0x2))[_0x226ca6(0x26a)],PORT=argv[_0x226ca6(0x2a1)]||_0x226ca6(0x273),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x226ca6(0x201)](PORT))return console['log'](_0x226ca6(0x2a7)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x226ca6(0x28a)](0x1);const HOST=argv['host']||null,userID=argv[_0x226ca6(0x251)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x226ca6(0x265),configfile=_0x226ca6(0x259),settingsfile=_0x226ca6(0x23f),securefile=_0x226ca6(0x28d);!fs[_0x226ca6(0x252)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x226ca6(0x205)),configpath=userID?bbpath+_0x226ca6(0x266)+userID+'/':bbpath+_0x226ca6(0x266),configbackuppath=configpath+_0x226ca6(0x285);!fs[_0x226ca6(0x252)](configpath)&&fs[_0x226ca6(0x330)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x226ca6(0x330)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x226ca6(0x31d)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x226ca6(0x24d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x226ca6(0x31d)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x226ca6(0x319),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x226ca6(0x277))[_0x226ca6(0x22c)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x226ca6(0x283)),app=express(),http=require(_0x226ca6(0x1f4))['createServer'](app);app[_0x226ca6(0x2be)](express[_0x226ca6(0x30e)](path[_0x226ca6(0x272)](__dirname,bbpath2,_0x226ca6(0x231)))),app[_0x226ca6(0x2be)](express[_0x226ca6(0x30e)](path['join'](__dirname,bbpath2,_0x226ca6(0x303)))),app['get']('/',function(_0x2e6207,_0x117a64){const _0x441f00=_0x226ca6;_0x117a64['sendFile'](path['join'](__dirname,bbpath2,_0x441f00(0x231),_0x441f00(0x248)));}),app[_0x226ca6(0x2f5)](_0x226ca6(0x2ec),function(_0x4aa0b3,_0x5dc08a){const _0x207656=_0x226ca6;_0x5dc08a[_0x207656(0x20f)](path[_0x207656(0x272)](__dirname,bbpath2,_0x207656(0x303),'index.html'));}),app[_0x226ca6(0x2f5)](_0x226ca6(0x274),(_0xc3657e,_0x489e12)=>{const _0x28fd21=_0x226ca6;_0x489e12[_0x28fd21(0x20f)](path['join'](__dirname,bbpath2,_0x28fd21(0x303),_0x28fd21(0x248)));}),app[_0x226ca6(0x2f5)](_0x226ca6(0x2e3),(_0x3d76d7,_0x1a5c3b)=>{const _0x59d8ec=_0x226ca6;_0x1a5c3b[_0x59d8ec(0x20f)](path[_0x59d8ec(0x272)](__dirname,bbpath2,'build',_0x59d8ec(0x248)));}),app[_0x226ca6(0x2f5)]('/:bot/coins',(_0x4c8b52,_0x599d14)=>{const _0x4d435e=_0x226ca6;_0x599d14[_0x4d435e(0x20f)](path['join'](__dirname,bbpath2,_0x4d435e(0x303),_0x4d435e(0x248)));}),app[_0x226ca6(0x2f5)]('/:bot/history',(_0x3e5e5d,_0x50a9fc)=>{const _0x578d5c=_0x226ca6;_0x50a9fc['sendFile'](path[_0x578d5c(0x272)](__dirname,bbpath2,_0x578d5c(0x303),_0x578d5c(0x248)));}),app[_0x226ca6(0x2f5)](_0x226ca6(0x284),(_0xee18a7,_0x14f6ff)=>{const _0x5d562e=_0x226ca6;_0x14f6ff['sendFile'](path[_0x5d562e(0x272)](__dirname,bbpath2,_0x5d562e(0x303),_0x5d562e(0x248)));}),app['get']('/:bot/support',(_0x1455be,_0x1e9e5d)=>{const _0x5dd3de=_0x226ca6;_0x1e9e5d[_0x5dd3de(0x20f)](path['join'](__dirname,bbpath2,_0x5dd3de(0x303),_0x5dd3de(0x248)));});if(HOST)http[_0x226ca6(0x2c8)](PORT,HOST);else http[_0x226ca6(0x2c8)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x226ca6(0x2c2),'plugins':[googleAnalytics({'trackingId':_0x226ca6(0x2fe)})]}),TelegramBot=require(_0x226ca6(0x27a));let tgBot;if(settings[_0x226ca6(0x318)]&&settings[_0x226ca6(0x318)]!=''&&settings[_0x226ca6(0x32e)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2ee702=_0x226ca6;console[_0x2ee702(0x320)](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x2ee702(0x207)+PORT),console['log'](_0x2ee702(0x29c));if(config[_0x2ee702(0x26b)]!=0x0)config[_0x2ee702(0x26d)](_0x50e9e1=>{const _0x4c1330=_0x2ee702;if(_0x50e9e1['status']=='enabled'||_0x50e9e1[_0x4c1330(0x24c)]==_0x4c1330(0x2a0))logging('starting\x20bot\x20|\x20Bot\x20'+_0x50e9e1[_0x4c1330(0x24e)]+_0x4c1330(0x307)+_0x50e9e1[_0x4c1330(0x29e)]),startBot([_0x50e9e1[_0x4c1330(0x24e)],userID],{'cwd':bbpath},function(_0x511fd3){if(_0x511fd3)logging(_0x511fd3);});else(_0x50e9e1[_0x4c1330(0x24c)]==_0x4c1330(0x28f)||_0x50e9e1[_0x4c1330(0x24c)]=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x50e9e1[_0x4c1330(0x24e)]+'\x20|\x20'+_0x50e9e1[_0x4c1330(0x29e)]);});else!newBot&&console[_0x2ee702(0x320)](_0x2ee702(0x25b));if(newBot)addBot();console[_0x2ee702(0x320)](_0x2ee702(0x29c)),console[_0x2ee702(0x320)]('');}function startSocket(){const _0x219731=_0x226ca6;io['on'](_0x219731(0x238),_0xfded7d=>{const _0xd2058c=_0x219731;let _0x3a1cba,_0x1e53e7,_0x161243,_0x3b56be,_0x3f03e9;const _0x5ec7d1=_0xfded7d['handshake'][_0xd2058c(0x2e0)][_0xd2058c(0x288)];_0x1e53e7=_0x5ec7d1[_0xd2058c(0x2c3)](/bot[0-9]{3}/);if(_0x1e53e7)_0x161243=_0x1e53e7[0x0][_0xd2058c(0x2c3)](/[0-9]{3}/);if(_0x161243)_0x3a1cba=_0x161243[0x0];else _0x3a1cba=_0xd2058c(0x2f4);const _0x195589=_0xfded7d[_0xd2058c(0x287)][_0xd2058c(0x2db)][_0xd2058c(0x2c0)];if(!_0x195589)_0xfded7d[_0xd2058c(0x2e9)](_0xd2058c(0x24c),{'publicKey':secure['publicKey']});else{_0x3b56be=timelyDecrypt(_0x195589,![]);if(!_0x3b56be)logging(_0xd2058c(0x242));else{_0x3f03e9=normalizeIP(_0xfded7d[_0xd2058c(0x1f0)][_0xd2058c(0x336)])[_0xd2058c(0x321)];if(!devices[_0x3b56be])devices[_0x3b56be]={'uuid':_0x3b56be,'access':{'token':null}};devices[_0x3b56be]['ip']=_0x3f03e9;const _0x1cf96e=addClient(_0xfded7d['id'],_0x3b56be,_0x3a1cba);setAccess(_0x1cf96e),_0xfded7d['on']('login',_0x36c42c=>{const _0x1c11d2=_0xd2058c,_0x199390=timelyDecrypt(_0x36c42c[_0x1c11d2(0x1f5)]);if(_0x199390){_0x36c42c={'username':_0x36c42c[_0x1c11d2(0x306)],'password':_0x199390},devices[_0x3b56be][_0x1c11d2(0x2ef)]=validateCredentials(_0x36c42c,_0x3b56be);if(devices[_0x3b56be][_0x1c11d2(0x2ef)][_0x1c11d2(0x27c)]==![]&&devices[_0x3b56be][_0x1c11d2(0x2ef)]['reason']==_0x1c11d2(0x234))_0xfded7d[_0x1c11d2(0x2e9)](_0x1c11d2(0x24c),{'access':devices[_0x3b56be]['access']}),loginAccess2FA(_0x3b56be,_0x3f03e9);else{if(devices[_0x3b56be][_0x1c11d2(0x2ef)][_0x1c11d2(0x27c)]==![]&&devices[_0x3b56be][_0x1c11d2(0x2ef)][_0x1c11d2(0x328)]==_0x1c11d2(0x2b0))_0xfded7d['emit']('status',{'access':devices[_0x3b56be][_0x1c11d2(0x2ef)]});else devices[_0x3b56be][_0x1c11d2(0x2ef)][_0x1c11d2(0x27c)]&&devices[_0x3b56be]['access'][_0x1c11d2(0x328)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x3b56be)[_0x1c11d2(0x26d)](_0x43c785=>{setAccess(_0x43c785);}),setTokenRefresh(_0x3b56be),setSessionTimeout('login',_0x3b56be));}}else logging(_0x1c11d2(0x20a));}),_0xfded7d['on']('reset-password',()=>{resetPassword();}),_0xfded7d['on'](_0xd2058c(0x295),_0x1b3361=>{removeClient(_0xfded7d['id']);});}}});}function initClient(_0x5dd98b){const _0x33bb31=_0x226ca6;if(_0x5dd98b!=_0x33bb31(0x2f4)&&config[_0x33bb31(0x236)]!=''){if(pid[_0x5dd98b])pid[_0x5dd98b][_0x33bb31(0x2f9)]({'function':_0x33bb31(0x2d7),'args':null});}}function getSocket(_0x58b36){const _0x24bffb=_0x226ca6;return io[_0x24bffb(0x27f)][_0x24bffb(0x27f)][_0x24bffb(0x2f5)](_0x58b36);}function setAccess(_0x1e32ee){const _0x4d4195=_0x226ca6,_0x20d1d6=getSocket(_0x1e32ee['id']),_0x43e06e=_0x1e32ee[_0x4d4195(0x32a)],_0x21cee4=_0x1e32ee[_0x4d4195(0x235)];devices[_0x43e06e][_0x4d4195(0x2ef)]=validateAccess(devices[_0x43e06e][_0x4d4195(0x2ef)][_0x4d4195(0x32d)],_0x43e06e),_0x20d1d6[_0x4d4195(0x272)](_0x43e06e);if(devices[_0x43e06e][_0x4d4195(0x2ef)][_0x4d4195(0x27c)]){_0x20d1d6[_0x4d4195(0x272)](_0x21cee4);if(_0x21cee4==_0x4d4195(0x2f4))initializeSocketBotManager(_0x20d1d6);else initializeSocketBot(_0x20d1d6);initClient(_0x21cee4);}devices[_0x43e06e][_0x4d4195(0x2ef)][_0x4d4195(0x32d)]&&devices[_0x43e06e][_0x4d4195(0x2ef)]['reason']==_0x4d4195(0x29d)&&setSessionTimeout('2FA',_0x43e06e),devices[_0x43e06e][_0x4d4195(0x2ef)][_0x4d4195(0x32d)]&&devices[_0x43e06e]['access'][_0x4d4195(0x328)]==_0x4d4195(0x2a6)&&setSessionTimeout(_0x4d4195(0x25c),_0x43e06e),_0x20d1d6[_0x4d4195(0x2e9)](_0x4d4195(0x24c),{'status':_0x1e32ee['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x43e06e][_0x4d4195(0x2ef)],'externalip':devices[_0x43e06e]['ip'],'publicKey':secure['publicKey']}),devices[_0x43e06e][_0x4d4195(0x2ef)]['allow']==![]&&devices[_0x43e06e][_0x4d4195(0x2ef)][_0x4d4195(0x328)]==_0x4d4195(0x1fc)&&temporaryAccess2FA(_0x43e06e,devices[_0x43e06e]['ip']);}function setSessionTimeout(_0x38b4fa,_0x435842){const _0x2d2852=_0x226ca6;let _0x4e08f5;if(_0x38b4fa=='login')_0x4e08f5=loginExpiry*0x3c*0x3e8;else _0x4e08f5=devices[_0x435842]['telegramIpApproval'][_0x2d2852(0x2d9)]*0x3c*0x3e8-(new Date()[_0x2d2852(0x20e)]()-devices[_0x435842][_0x2d2852(0x220)][_0x2d2852(0x22a)]);if(devices[_0x435842][_0x2d2852(0x26c)])clearTimeout(devices[_0x435842]['pidExpireLogin']);devices[_0x435842][_0x2d2852(0x26c)]=setTimeout(()=>{const _0x11e9b6=_0x2d2852;if(devices[_0x435842]['pidRefreshToken'])clearTimeout(devices[_0x435842][_0x11e9b6(0x301)]);removeSocketListeners(_0x435842),addBlacklist(_0x435842),devices[_0x435842][_0x11e9b6(0x220)]=null,devices[_0x435842][_0x11e9b6(0x2c5)]=null,devices[_0x435842]['access'][_0x11e9b6(0x32d)]=null,devices[_0x435842][_0x11e9b6(0x2ef)]=validateAccess(devices[_0x435842][_0x11e9b6(0x2ef)]['token'],_0x435842),!(devices[_0x435842]['access'][_0x11e9b6(0x27c)]&&devices[_0x435842][_0x11e9b6(0x2ef)][_0x11e9b6(0x328)]==_0x11e9b6(0x20c))&&(_0x38b4fa==_0x11e9b6(0x25c)?io['to'](_0x435842)[_0x11e9b6(0x2e9)]('status',{'access':{'allow':![],'reason':_0x11e9b6(0x2ab),'token':null}}):io['to'](_0x435842)[_0x11e9b6(0x2e9)](_0x11e9b6(0x24c),{'access':{'allow':![],'reason':_0x11e9b6(0x22e),'token':null}})),devices[_0x435842][_0x11e9b6(0x2ef)][_0x11e9b6(0x32d)]=null;},_0x4e08f5);}function setTokenRefresh(_0x2b0842){const _0x18176e=_0x226ca6;if(devices[_0x2b0842]['pidRefreshToken'])clearTimeout(devices[_0x2b0842][_0x18176e(0x301)]);devices[_0x2b0842][_0x18176e(0x301)]=setTimeout(()=>{const _0x3ed6bd=_0x18176e;getClientsWithUuid(_0x2b0842)[_0x3ed6bd(0x26b)]!=0x0?(devices[_0x2b0842][_0x3ed6bd(0x2ef)]=refreshToken(_0x2b0842),io['to'](_0x2b0842)[_0x3ed6bd(0x2e9)](_0x3ed6bd(0x24c),{'status':_0x3ed6bd(0x315),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2b0842][_0x3ed6bd(0x2ef)],'externalip':devices[_0x2b0842]['ip'],'publicKey':secure[_0x3ed6bd(0x261)]}),setTokenRefresh(_0x2b0842)):clearTimeout(devices[_0x2b0842][_0x3ed6bd(0x301)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1c55a9){const _0x113b6a=_0x226ca6,_0x162f94=getClient(_0x1c55a9['id'])[_0x113b6a(0x32a)];_0x1c55a9[_0x113b6a(0x2e9)]('bots',config),_0x1c55a9['emit'](_0x113b6a(0x322),cleanSettings()),_0x1c55a9['on'](_0x113b6a(0x1fb),_0x3ec2fe=>{const _0x8a16db=_0x113b6a;if(validateAccess(_0x3ec2fe,_0x162f94)[_0x8a16db(0x27c)])addBot();else logging(_0x8a16db(0x279));}),_0x1c55a9['on'](_0x113b6a(0x276),(_0x3eab45,_0x4da821)=>{const _0x4dee65=_0x113b6a;if(validateAccess(_0x4da821,_0x162f94)['allow'])toggleBot(_0x3eab45[_0x4dee65(0x24e)],_0x3eab45[_0x4dee65(0x24c)],_0x3eab45['live']);else logging(_0x4dee65(0x2d1));}),_0x1c55a9['on']('delete-bot',(_0x16c8ec,_0x24345d)=>{const _0x2a4902=_0x113b6a;if(validateAccess(_0x24345d,_0x162f94)[_0x2a4902(0x27c)])deleteBot(_0x16c8ec);else logging(_0x2a4902(0x2d2));}),_0x1c55a9['on'](_0x113b6a(0x226),(_0x3759ee,_0x3db897)=>{const _0x50c310=_0x113b6a;if(validateAccess(_0x3db897,_0x162f94)['allow'])storeSettings(_0x3759ee,!![]);else logging(_0x50c310(0x23e));}),_0x1c55a9['on'](_0x113b6a(0x325),(_0x2efc70,_0x50b4de)=>{const _0x28a940=_0x113b6a;if(validateAccess(_0x50b4de,_0x162f94)['allow'])updateBB();else logging(_0x28a940(0x23e));}),_0x1c55a9['on']('logout',_0x172e4e=>{const _0xbe0d80=_0x113b6a;if(validateAccess(_0x172e4e,_0x162f94)[_0xbe0d80(0x27c)]){if(devices[_0x162f94][_0xbe0d80(0x301)])clearTimeout(devices[_0x162f94]['pidRefreshToken']);if(devices[_0x162f94]['pidExpireLogin'])clearTimeout(devices[_0x162f94]['pidExpireLogin']);removeSocketListeners(getClient(_0x1c55a9['id'])[_0xbe0d80(0x32a)]),addBlacklist(_0x162f94),devices[_0x162f94][_0xbe0d80(0x220)]=null,devices[_0x162f94][_0xbe0d80(0x2c5)]=null,devices[_0x162f94]['access'][_0xbe0d80(0x32d)]=null,io['to'](getClient(_0x1c55a9['id'])[_0xbe0d80(0x32a)])[_0xbe0d80(0x2e9)](_0xbe0d80(0x24c),{'access':{'allow':![],'reason':_0xbe0d80(0x2a9),'token':null}});}else logging(_0xbe0d80(0x31a));});}function initializeSocketBot(_0x447bdf){const _0x2b6c7d=_0x226ca6,_0x4af529=getClient(_0x447bdf['id'])[_0x2b6c7d(0x235)],_0x50fc5b=getClient(_0x447bdf['id'])['uuid'];_0x447bdf['on']('get-logs',(_0x525b61,_0x427d9c)=>{const _0x3fd164=_0x2b6c7d;if(validateAccess(_0x427d9c,_0x50fc5b)[_0x3fd164(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x3fd164(0x2f9)]({'function':_0x3fd164(0x2b3),'args':_0x525b61});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x447bdf['on'](_0x2b6c7d(0x218),(_0x2a07f0,_0x5c433e)=>{const _0x4051f8=_0x2b6c7d;if(validateAccess(_0x5c433e,_0x50fc5b)[_0x4051f8(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x4051f8(0x2f9)]({'function':_0x4051f8(0x1f3),'args':_0x2a07f0});}else logging(_0x4051f8(0x250));}),_0x447bdf['on'](_0x2b6c7d(0x25a),(_0x2a66e1,_0x1b4fbc)=>{const _0x24b1ad=_0x2b6c7d;if(validateAccess(_0x1b4fbc,_0x50fc5b)['allow']){if(pid[_0x4af529])pid[_0x4af529][_0x24b1ad(0x2f9)]({'function':_0x24b1ad(0x2f0),'args':_0x2a66e1});}else logging(_0x24b1ad(0x300));}),_0x447bdf['on'](_0x2b6c7d(0x23c),(_0x1fb7b6,_0x76da5e)=>{const _0x33e36e=_0x2b6c7d;if(validateAccess(_0x76da5e,_0x50fc5b)[_0x33e36e(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x33e36e(0x2f9)]({'function':'storeHeadless','args':_0x1fb7b6});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x447bdf['on']('get-starting-balances',_0x103000=>{const _0x58b803=_0x2b6c7d;if(validateAccess(_0x103000,_0x50fc5b)[_0x58b803(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x58b803(0x2f9)]({'function':_0x58b803(0x27d),'args':null});}else logging(_0x58b803(0x2a8));}),_0x447bdf['on']('place-order',(_0x59e8f9,_0x57d15b)=>{const _0x130cca=_0x2b6c7d;if(validateAccess(_0x57d15b,_0x50fc5b)[_0x130cca(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x130cca(0x2f9)]({'function':_0x130cca(0x247),'args':_0x59e8f9});}else logging(_0x130cca(0x280));}),_0x447bdf['on']('cancel-loading',_0x5c03b1=>{const _0x32f5c9=_0x2b6c7d;if(validateAccess(_0x5c03b1,_0x50fc5b)[_0x32f5c9(0x27c)]){if(pid[_0x4af529])pid[_0x4af529][_0x32f5c9(0x2f9)]({'function':'cancelLoading','args':null});}else logging(_0x32f5c9(0x222));}),_0x447bdf['on'](_0x2b6c7d(0x1f9),_0x4042c4=>{const _0x2463b5=_0x2b6c7d;if(validateAccess(_0x4042c4,_0x50fc5b)['allow']){if(devices[_0x50fc5b][_0x2463b5(0x301)])clearTimeout(devices[_0x50fc5b]['pidRefreshToken']);if(devices[_0x50fc5b]['pidExpireLogin'])clearTimeout(devices[_0x50fc5b][_0x2463b5(0x26c)]);removeSocketListeners(getClient(_0x447bdf['id'])['uuid']),addBlacklist(_0x50fc5b),devices[_0x50fc5b][_0x2463b5(0x220)]=null,devices[_0x50fc5b][_0x2463b5(0x2c5)]=null,devices[_0x50fc5b]['access']['token']=null,io['to'](getClient(_0x447bdf['id'])[_0x2463b5(0x32a)])[_0x2463b5(0x2e9)](_0x2463b5(0x24c),{'access':{'allow':![],'reason':_0x2463b5(0x2a9),'token':null}});}else logging(_0x2463b5(0x31a));});}function removeSocketListeners(_0x1aa913){getClientsWithUuid(_0x1aa913)['forEach'](_0x4bc882=>{const _0x417d44=_0x543c;getSocket(_0x4bc882['id'])[_0x417d44(0x2fb)]();});}function cleanSettings(){const _0x30c70f=_0x226ca6;let _0xd22caf=settings;return settings[_0x30c70f(0x318)]&&settings['telegramToken']!=''&&(_0xd22caf={..._0xd22caf,'telegramToken':_0x30c70f(0x219)}),settings[_0x30c70f(0x28c)]&&settings[_0x30c70f(0x28c)]!=''&&(_0xd22caf={..._0xd22caf,'bbPassword':'************'}),_0xd22caf;}function updateBB(){const _0x38163d=_0x226ca6;process[_0x38163d(0x2f9)]({'update':!![]});}function startBot(_0x3435e9,_0x3e83b4,_0x3e8d41){const _0x68735d=_0x226ca6;let _0x12ffb9=![];const _0x3a7822=_0x3435e9[0x0];_0x3e83b4={..._0x3e83b4,'stdio':[_0x68735d(0x2bd),_0x68735d(0x2bd),'inherit',_0x68735d(0x255)]},pid[_0x3a7822]=childProcess[_0x68735d(0x323)](botfile,_0x3435e9,_0x3e83b4),pid[_0x3a7822]['on'](_0x68735d(0x240),_0x1d878b=>{const _0x216adc=_0x68735d;switch(Object['keys'](_0x1d878b)[0x0]){case _0x216adc(0x29e):updateBotName(_0x3a7822,_0x1d878b[_0x216adc(0x29e)]);break;case _0x216adc(0x24c):updateStatus(_0x3a7822,_0x1d878b[_0x216adc(0x24c)]);break;case _0x216adc(0x249):updateLive(_0x3a7822,_0x1d878b[_0x216adc(0x249)]);break;case _0x216adc(0x2cd):updateLive(_0x3a7822,_0x1d878b[_0x216adc(0x2cd)]),io['to'](_0x3a7822)[_0x216adc(0x2e9)]('status',{'access':{'allow':![],'reason':_0x216adc(0x216),'token':null}});break;case'stop':_0x1d878b['stop']==_0x216adc(0x1f6)&&stopBot(_0x3a7822);_0x1d878b['stop']=='kill'&&toggleBot(_0x3a7822,_0x216adc(0x28f),_0x216adc(0x333));break;case _0x216adc(0x200):sendTelegram(_0x3a7822,_0x1d878b[_0x216adc(0x200)]);break;case _0x216adc(0x2c4):io['to'](_0x3a7822)['emit'](_0x1d878b[_0x216adc(0x2c4)],_0x1d878b[_0x216adc(0x260)]);break;}}),pid[_0x3a7822]['on']('error',function(_0x52cabd){if(_0x12ffb9)return;_0x12ffb9=!![],_0x3e8d41(_0x52cabd);}),pid[_0x3a7822]['on']('exit',function(_0x19b891){const _0x44a34d=_0x68735d;if(_0x12ffb9)return;_0x12ffb9=!![],_0x3e8d41(null);const _0x2b84c6=dbConfig['get'](_0x44a34d(0x2fc))[_0x44a34d(0x2dc)]({'botID':_0x3a7822})['value']();_0x2b84c6&&(_0x2b84c6[_0x44a34d(0x24c)]==_0x44a34d(0x298)||_0x2b84c6[_0x44a34d(0x24c)]==_0x44a34d(0x2a0))&&(updateLive(_0x3a7822,'stopped'),logging(_0x44a34d(0x2f8)+_0x3a7822),startBot([_0x3a7822,userID],{'cwd':bbpath},function(_0xc79c8d){if(_0xc79c8d)logging(_0xc79c8d);}));});}function stopBot(_0x58892e){const _0x56a6d2=_0x226ca6;getClientsWithBotID(_0x58892e)[_0x56a6d2(0x26d)](_0x31de48=>{const _0x1a793f=_0x56a6d2;getSocket(_0x31de48['id'])[_0x1a793f(0x295)](!![]),removeClient(_0x31de48['id']);});if(pid[_0x58892e])pid[_0x58892e]['kill']();}function addBot(){const _0x48930a=_0x226ca6;let _0x56789d;for(let _0x10d306=0x1;_0x10d306<0x3e9;_0x10d306++){_0x56789d=_0x10d306[_0x48930a(0x314)]()[_0x48930a(0x316)](0x3,'0');let _0xb8ac38=config[_0x48930a(0x2dc)](_0x4012d8=>_0x4012d8[_0x48930a(0x24e)]==_0x56789d);if(!_0xb8ac38)break;}if(_0x56789d===_0x48930a(0x23b)){logging(_0x48930a(0x206));return;}logging(_0x48930a(0x263)+_0x56789d),dbConfig[_0x48930a(0x2f5)](_0x48930a(0x2fc))[_0x48930a(0x209)]({'botID':_0x56789d,'botname':_0x48930a(0x28b)+_0x56789d,'status':_0x48930a(0x2a0),'live':''})[_0x48930a(0x24d)](),startBot([_0x56789d,userID],{'cwd':bbpath},function(_0x53668a){if(_0x53668a)logging(_0x53668a);}),config=getConfiguration(),io['to']('botmanager')[_0x48930a(0x2e9)]('bots',config);}function deleteBot(_0x33885){const _0xeafb5f=_0x226ca6;getClientsWithBotID(_0x33885)[_0xeafb5f(0x26d)](_0x2e810c=>{const _0x2ca1f3=_0xeafb5f;getSocket(_0x2e810c['id'])[_0x2ca1f3(0x295)](!![]),removeClient(_0x2e810c['id']);}),dbConfig[_0xeafb5f(0x2f5)](_0xeafb5f(0x2fc))['remove']({'botID':_0x33885})[_0xeafb5f(0x24d)](),logging('deleted\x20Bot\x20'+_0x33885),stopBot(_0x33885);try{fs['unlinkSync'](path[_0xeafb5f(0x272)](configpath,'bot-'+_0x33885+_0xeafb5f(0x291))),fs[_0xeafb5f(0x31f)](path[_0xeafb5f(0x272)](configpath,'bot-'+_0x33885+_0xeafb5f(0x2b5))),fs[_0xeafb5f(0x31f)](path['join'](configpath,'bot-'+_0x33885+_0xeafb5f(0x2d6))),fs[_0xeafb5f(0x31f)](path[_0xeafb5f(0x272)](configpath,_0xeafb5f(0x2ed)+_0x33885+_0xeafb5f(0x2af)));}catch(_0x1e2dfd){if(_0x1e2dfd)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x1e2dfd);}config=getConfiguration(),io['to'](_0xeafb5f(0x2f4))[_0xeafb5f(0x2e9)](_0xeafb5f(0x2fc),config);}function toggleBot(_0x560017,_0x4bd142,_0x3ac6cd){const _0x506af4=_0x226ca6;dbConfig[_0x506af4(0x2f5)](_0x506af4(0x2fc))[_0x506af4(0x2dc)]({'botID':_0x560017})[_0x506af4(0x212)]({'status':_0x4bd142})[_0x506af4(0x212)]({'live':_0x3ac6cd})[_0x506af4(0x24d)]();if(_0x4bd142==_0x506af4(0x298)||_0x4bd142==_0x506af4(0x2a0))logging(_0x506af4(0x271)+_0x560017),startBot([_0x560017,userID],{'cwd':bbpath},function(_0x373dd0){if(_0x373dd0)logging(_0x373dd0);});else(_0x4bd142==_0x506af4(0x28f)||_0x4bd142==_0x506af4(0x243))&&(logging('disabled\x20Bot\x20'+_0x560017),stopBot(_0x560017));config=getConfiguration(),io['to'](_0x506af4(0x2f4))[_0x506af4(0x2e9)](_0x506af4(0x2fc),config);}function toggleStatus(_0x4fe21a){const _0x2a9796=_0x226ca6;let _0x433607=dbConfig[_0x2a9796(0x2f5)](_0x2a9796(0x2fc))[_0x2a9796(0x2dc)]({'botID':_0x4fe21a})[_0x2a9796(0x23d)](),_0x263b28;if(_0x433607['status']===_0x2a9796(0x298))_0x263b28='disabled';else{if(_0x433607[_0x2a9796(0x24c)]===_0x2a9796(0x2a0))_0x263b28=_0x2a9796(0x243);else{if(_0x433607[_0x2a9796(0x24c)]==='new-disabled')_0x263b28=_0x2a9796(0x2a0);else{if(_0x433607[_0x2a9796(0x24c)]==='disabled')_0x263b28=_0x2a9796(0x298);}}}return _0x263b28;}function updateStatus(_0x45e61b,_0x22623f){const _0x1c4f06=_0x226ca6;dbConfig['get'](_0x1c4f06(0x2fc))['find']({'botID':_0x45e61b})[_0x1c4f06(0x212)]({'status':_0x22623f})[_0x1c4f06(0x24d)](),config=getConfiguration(),io['to'](_0x1c4f06(0x2f4))[_0x1c4f06(0x2e9)](_0x1c4f06(0x2fc),config);}function updateLive(_0x5ef3cd,_0x37c2b3){const _0x55c487=_0x226ca6;dbConfig[_0x55c487(0x2f5)](_0x55c487(0x2fc))['find']({'botID':_0x5ef3cd})[_0x55c487(0x212)]({'live':_0x37c2b3})[_0x55c487(0x24d)](),config=getConfiguration(),io['to']('botmanager')[_0x55c487(0x2e9)]('bots',config);}function updateBotName(_0x533572,_0x456679){const _0x18c313=_0x226ca6;dbConfig[_0x18c313(0x2f5)]('bots')['find']({'botID':_0x533572})[_0x18c313(0x212)]({'botname':_0x456679})[_0x18c313(0x24d)](),config=getConfiguration(),io['to'](_0x18c313(0x2f4))[_0x18c313(0x2e9)]('bots',config);}function telegramError(_0x22d69a){const _0x44139c=_0x226ca6;console[_0x44139c(0x320)](getTimeStamp()+_0x44139c(0x30a));}function validateTelegram(_0x316a8c){const _0x3e0fe7=_0x226ca6;if(_0x316a8c[_0x3e0fe7(0x2a4)][_0x3e0fe7(0x306)]!=settings[_0x3e0fe7(0x32e)]&&'@'+_0x316a8c[_0x3e0fe7(0x2a4)][_0x3e0fe7(0x306)]!=settings[_0x3e0fe7(0x32e)])return tgBot[_0x3e0fe7(0x27e)](_0x316a8c[_0x3e0fe7(0x21b)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x3e0fe7(0x233)})[_0x3e0fe7(0x232)](_0x48d4e6=>{telegramError(_0x48d4e6);}),![];return!![];}function _0x543c(_0x5ca994,_0xfceb71){const _0x5d1a7f=_0x1716();return _0x543c=function(_0x22e7ef,_0x214e02){_0x22e7ef=_0x22e7ef-0x1f0;let _0x1716e0=_0x5d1a7f[_0x22e7ef];return _0x1716e0;},_0x543c(_0x5ca994,_0xfceb71);}async function initTelegram(){const _0x331747=_0x226ca6;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x331747(0x318)],{'polling':!![]});let _0x4eba28=_0x331747(0x32f);_0x4eba28+='\x0a',_0x4eba28+=_0x331747(0x297),_0x4eba28+=_0x331747(0x2e5),_0x4eba28+=_0x331747(0x334),_0x4eba28+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x4eba28+=_0x331747(0x20b),_0x4eba28+=_0x331747(0x2ea),_0x4eba28+=_0x331747(0x290),_0x4eba28+=_0x331747(0x2f7);let _0x16314b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x16314b+='\x0a',_0x16314b+=_0x4eba28,tgBot[_0x331747(0x2d0)](/\/start/,_0x55522b=>{const _0x58f8f8=_0x331747;if(!validateTelegram(_0x55522b))return;if(settings['telegramChatId']!=_0x55522b['chat']['id'])updateSetting(_0x58f8f8(0x2ff),_0x55522b[_0x58f8f8(0x21b)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x55522b[_0x58f8f8(0x21b)]['id'],_0x16314b)[_0x58f8f8(0x232)](_0x2bed02=>{telegramError(_0x2bed02);});}),tgBot[_0x331747(0x2d0)](/\/enable/,_0x712fc4=>{const _0x2d6df7=_0x331747;if(!validateTelegram(_0x712fc4))return;if(settings['telegramChatId']!=_0x712fc4[_0x2d6df7(0x21b)]['id'])updateSetting(_0x2d6df7(0x2ff),_0x712fc4[_0x2d6df7(0x21b)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x712fc4['chat']['id'],_0x2d6df7(0x2b7))[_0x2d6df7(0x232)](_0x3944dc=>{telegramError(_0x3944dc);});}),tgBot[_0x331747(0x2d0)](/\/config/,async _0x36e75b=>{const _0x516208=_0x331747;if(!validateTelegram(_0x36e75b))return;tgBot['removeListener'](_0x516208(0x262)),tgBot['sendMessage'](_0x36e75b[_0x516208(0x21b)]['id'],_0x516208(0x257),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x516208(0x2d5),'callback_data':_0x516208(0x241)},{'text':_0x516208(0x1f2),'callback_data':_0x516208(0x24f)}]]}})[_0x516208(0x232)](_0x5c72a0=>{telegramError(_0x5c72a0);}),tgBot['on'](_0x516208(0x262),async _0xf76910=>{const _0x56945d=_0x516208,_0x169724=_0xf76910[_0x56945d(0x204)],_0x992f92=_0xf76910[_0x56945d(0x240)];tgBot[_0x56945d(0x2c1)](_0xf76910['id'])[_0x56945d(0x2d3)](async()=>{const _0x219eda=_0x56945d;_0x169724==_0x219eda(0x229)&&(updateSetting('telegramEvents',_0x219eda(0x229)),updateSetting('telegramEnabled',!![]),await tgBot[_0x219eda(0x27e)](_0x992f92[_0x219eda(0x21b)]['id'],_0x219eda(0x2df))[_0x219eda(0x232)](_0x2af5e0=>{telegramError(_0x2af5e0);}));_0x169724==_0x219eda(0x241)&&(updateSetting(_0x219eda(0x2f6),_0x219eda(0x241)),updateSetting(_0x219eda(0x25e),!![]),await tgBot[_0x219eda(0x27e)](_0x992f92[_0x219eda(0x21b)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x4a0dde=>{telegramError(_0x4a0dde);}));_0x169724=='all'&&(updateSetting(_0x219eda(0x2f6),_0x219eda(0x24f)),updateSetting('telegramEnabled',!![]),await tgBot[_0x219eda(0x27e)](_0x992f92['chat']['id'],_0x219eda(0x253))[_0x219eda(0x232)](_0x1c2309=>{telegramError(_0x1c2309);}));if(!settings[_0x219eda(0x2ff)])tgBot[_0x219eda(0x27e)](_0x992f92[_0x219eda(0x21b)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x219eda(0x232)](_0x308906=>{telegramError(_0x308906);});}),tgBot[_0x56945d(0x22d)](_0x56945d(0x262));});}),tgBot[_0x331747(0x2d0)](/\/status/,_0xab759b=>{const _0x4fac67=_0x331747;if(!validateTelegram(_0xab759b))return;let _0x2be5ad=_0x4fac67(0x2a2);config[_0x4fac67(0x26d)](_0x3d537a=>{const _0x36ae40=_0x4fac67;_0x2be5ad+='Bot\x20'+_0x3d537a['botID']+_0x36ae40(0x307)+_0x3d537a[_0x36ae40(0x29e)]+':\x20'+_0x3d537a[_0x36ae40(0x24c)]+_0x36ae40(0x258)+_0x3d537a['live']+'\x0a';}),_0x2be5ad+='\x0a',_0x2be5ad+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x2be5ad+=!settings[_0x4fac67(0x25e)]?_0x4fac67(0x2cc):_0x4fac67(0x210),_0x2be5ad+=settings[_0x4fac67(0x25e)]?settings[_0x4fac67(0x2f6)]==_0x4fac67(0x24f)?_0x4fac67(0x30b):_0x4fac67(0x324)+settings[_0x4fac67(0x2f6)]+'\x20only\x0a':'',tgBot['sendMessage'](_0xab759b['chat']['id'],_0x2be5ad,{'parse_mode':_0x4fac67(0x233)})['catch'](_0xb3d873=>{telegramError(_0xb3d873);});}),tgBot[_0x331747(0x2d0)](/\/restart/,_0x579a41=>{const _0x47b92a=_0x331747;if(!validateTelegram(_0x579a41))return;tgBot[_0x47b92a(0x22d)](_0x47b92a(0x262));const _0x3e7158=getEnabledBots();if(_0x3e7158[_0x47b92a(0x26b)]==0x0)tgBot[_0x47b92a(0x27e)](_0x579a41[_0x47b92a(0x21b)]['id'],_0x47b92a(0x289))[_0x47b92a(0x232)](_0x4f7330=>{telegramError(_0x4f7330);});else{if(_0x3e7158[_0x47b92a(0x26b)]>0x1)_0x3e7158[_0x47b92a(0x209)]({'botID':_0x47b92a(0x24f)});let _0x427883=[],_0x4bdbc1=[];const _0x295e7a=_0x3e7158[_0x47b92a(0x26b)]%0x4==0x0||_0x3e7158[_0x47b92a(0x26b)]%0x4==0x3||_0x3e7158[_0x47b92a(0x26b)]%0x3==0x1?0x4:0x3;let _0x2bc608=0x0;_0x3e7158[_0x47b92a(0x26d)]((_0x308b9d,_0x58e36c)=>{const _0x20790e=_0x47b92a;if(_0x58e36c%_0x295e7a==0x0)_0x4bdbc1=[];_0x4bdbc1[_0x20790e(0x209)]({'text':_0x308b9d[_0x20790e(0x24e)]=='all'?_0x20790e(0x1fd):_0x20790e(0x28b)+_0x308b9d['botID'],'callback_data':_0x308b9d[_0x20790e(0x24e)]}),_0x58e36c%_0x295e7a==0x0&&(_0x427883[_0x2bc608]=_0x4bdbc1,_0x2bc608++);}),tgBot['sendMessage'](_0x579a41['chat']['id'],_0x47b92a(0x22f),{'reply_markup':{'inline_keyboard':_0x427883}})[_0x47b92a(0x232)](_0x598858=>{telegramError(_0x598858);}),tgBot['on'](_0x47b92a(0x262),async _0x52ff88=>{const _0x8134e2=_0x47b92a,_0x2eb872=_0x52ff88[_0x8134e2(0x204)],_0x32ded5=_0x52ff88[_0x8134e2(0x240)];tgBot[_0x8134e2(0x2c1)](_0x52ff88['id'])[_0x8134e2(0x2d3)](async()=>{const _0x3950c4=_0x8134e2;if(_0x2eb872=='all'){if(settings['telegramEvents']==_0x3950c4(0x229))tgBot[_0x3950c4(0x27e)](_0x32ded5[_0x3950c4(0x21b)]['id'],_0x3950c4(0x329))['catch'](_0x1ad991=>{telegramError(_0x1ad991);});config[_0x3950c4(0x26d)](_0x4b0a4a=>{const _0x4a0ad2=_0x3950c4;stopBot(_0x4b0a4a[_0x4a0ad2(0x24e)]);});}else{if(settings['telegramEvents']=='orders')tgBot[_0x3950c4(0x27e)](_0x32ded5['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x2eb872)['catch'](_0x583b42=>{telegramError(_0x583b42);});stopBot(_0x2eb872);}}),tgBot[_0x8134e2(0x22d)](_0x8134e2(0x262));});}}),tgBot[_0x331747(0x2d0)](/\/on/,_0x44c060=>{const _0x5cc53a=_0x331747;if(!validateTelegram(_0x44c060))return;tgBot[_0x5cc53a(0x22d)](_0x5cc53a(0x262));const _0x510670=getDisabledBots();if(_0x510670['length']==0x0)tgBot[_0x5cc53a(0x27e)](_0x44c060[_0x5cc53a(0x21b)]['id'],_0x5cc53a(0x311))['catch'](_0xfd0c84=>{telegramError(_0xfd0c84);});else{if(_0x510670[_0x5cc53a(0x26b)]>0x1)_0x510670['push']({'botID':_0x5cc53a(0x24f)});let _0x25c822=[],_0x398e1b=[];const _0x1524bf=_0x510670['length']%0x4==0x0||_0x510670[_0x5cc53a(0x26b)]%0x4==0x3||_0x510670[_0x5cc53a(0x26b)]%0x3==0x1?0x4:0x3;let _0x5975e3=0x0;_0x510670[_0x5cc53a(0x26d)]((_0x3ce081,_0x3b0cf6)=>{const _0x5b841c=_0x5cc53a;if(_0x3b0cf6%_0x1524bf==0x0)_0x398e1b=[];_0x398e1b['push']({'text':_0x3ce081[_0x5b841c(0x24e)]==_0x5b841c(0x24f)?'All\x20bots':_0x5b841c(0x28b)+_0x3ce081[_0x5b841c(0x24e)],'callback_data':_0x3ce081[_0x5b841c(0x24e)]}),_0x3b0cf6%_0x1524bf==0x0&&(_0x25c822[_0x5975e3]=_0x398e1b,_0x5975e3++);}),tgBot[_0x5cc53a(0x27e)](_0x44c060[_0x5cc53a(0x21b)]['id'],_0x5cc53a(0x2ca),{'reply_markup':{'inline_keyboard':_0x25c822}})[_0x5cc53a(0x232)](_0x3efb55=>{telegramError(_0x3efb55);}),tgBot['on']('callback_query',async _0x2ea38c=>{const _0x17b4bf=_0x5cc53a,_0x43cc75=_0x2ea38c[_0x17b4bf(0x204)],_0x59d8dc=_0x2ea38c['message'];tgBot['answerCallbackQuery'](_0x2ea38c['id'])[_0x17b4bf(0x2d3)](async()=>{const _0x1f6c9c=_0x17b4bf;if(_0x43cc75=='all'){if(settings['telegramEvents']==_0x1f6c9c(0x229))tgBot[_0x1f6c9c(0x27e)](_0x59d8dc['chat']['id'],_0x1f6c9c(0x239))['catch'](_0x593592=>{telegramError(_0x593592);});_0x510670[_0x1f6c9c(0x26d)](_0xe5ab3b=>{const _0x2d1d14=_0x1f6c9c;if(_0xe5ab3b[_0x2d1d14(0x24e)]!=_0x2d1d14(0x24f))toggleBot(_0xe5ab3b[_0x2d1d14(0x24e)],toggleStatus(_0xe5ab3b[_0x2d1d14(0x24e)]),_0x2d1d14(0x333));});}else{if(settings[_0x1f6c9c(0x2f6)]==_0x1f6c9c(0x229))tgBot[_0x1f6c9c(0x27e)](_0x59d8dc[_0x1f6c9c(0x21b)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x43cc75)['catch'](_0xe76415=>{telegramError(_0xe76415);});toggleBot(_0x43cc75,toggleStatus(_0x43cc75),_0x1f6c9c(0x333));}}),tgBot[_0x17b4bf(0x22d)](_0x17b4bf(0x262));});}}),tgBot[_0x331747(0x2d0)](/\/off/,_0x88bbab=>{const _0x335151=_0x331747;if(!validateTelegram(_0x88bbab))return;tgBot[_0x335151(0x22d)](_0x335151(0x262));const _0x53a4dc=getEnabledBots();if(_0x53a4dc[_0x335151(0x26b)]==0x0)tgBot[_0x335151(0x27e)](_0x88bbab[_0x335151(0x21b)]['id'],_0x335151(0x289))[_0x335151(0x232)](_0x297d4b=>{telegramError(_0x297d4b);});else{if(_0x53a4dc[_0x335151(0x26b)]>0x1)_0x53a4dc[_0x335151(0x209)]({'botID':'all'});let _0xb2b7fe=[],_0x238c49=[];const _0x4a28e9=_0x53a4dc[_0x335151(0x26b)]%0x4==0x0||_0x53a4dc['length']%0x4==0x3||_0x53a4dc['length']%0x3==0x1?0x4:0x3;let _0x580cdb=0x0;_0x53a4dc[_0x335151(0x26d)]((_0x57f374,_0x3b209b)=>{const _0x55510c=_0x335151;if(_0x3b209b%_0x4a28e9==0x0)_0x238c49=[];_0x238c49['push']({'text':_0x57f374[_0x55510c(0x24e)]=='all'?'All\x20bots':'Bot\x20'+_0x57f374[_0x55510c(0x24e)],'callback_data':_0x57f374[_0x55510c(0x24e)]}),_0x3b209b%_0x4a28e9==0x0&&(_0xb2b7fe[_0x580cdb]=_0x238c49,_0x580cdb++);}),tgBot[_0x335151(0x27e)](_0x88bbab[_0x335151(0x21b)]['id'],_0x335151(0x31b),{'reply_markup':{'inline_keyboard':_0xb2b7fe}})[_0x335151(0x232)](_0x546091=>{telegramError(_0x546091);}),tgBot['on']('callback_query',async _0x17b925=>{const _0x263f13=_0x335151,_0x476c9b=_0x17b925['data'],_0x58f674=_0x17b925[_0x263f13(0x240)];tgBot[_0x263f13(0x2c1)](_0x17b925['id'])[_0x263f13(0x2d3)](async()=>{const _0x4a6b90=_0x263f13;if(_0x476c9b=='all'){if(settings[_0x4a6b90(0x2f6)]==_0x4a6b90(0x229))tgBot[_0x4a6b90(0x27e)](_0x58f674['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4a6b90(0x232)](_0x184652=>{telegramError(_0x184652);});_0x53a4dc[_0x4a6b90(0x26d)](_0x111fb2=>{const _0x5340dd=_0x4a6b90;if(_0x111fb2[_0x5340dd(0x24e)]!=_0x5340dd(0x24f))toggleBot(_0x111fb2[_0x5340dd(0x24e)],toggleStatus(_0x111fb2['botID']),_0x5340dd(0x333));});}else{if(settings[_0x4a6b90(0x2f6)]==_0x4a6b90(0x229))tgBot[_0x4a6b90(0x27e)](_0x58f674[_0x4a6b90(0x21b)]['id'],_0x4a6b90(0x215)+_0x476c9b)['catch'](_0xac5fdc=>{telegramError(_0xac5fdc);});toggleBot(_0x476c9b,toggleStatus(_0x476c9b),_0x4a6b90(0x333));}}),tgBot['removeListener'](_0x263f13(0x262));});}}),tgBot[_0x331747(0x2d0)](/\/disable/,_0x1a721a=>{const _0x406d23=_0x331747;if(!validateTelegram(_0x1a721a))return;tgBot[_0x406d23(0x27e)](_0x1a721a[_0x406d23(0x21b)]['id'],_0x406d23(0x221))['catch'](_0x527d9e=>{telegramError(_0x527d9e);}),updateSetting(_0x406d23(0x25e),![]);}),tgBot['onText'](/\/help/,_0x809342=>{const _0x4bbb09=_0x331747;if(!validateTelegram(_0x809342))return;tgBot['sendMessage'](_0x809342[_0x4bbb09(0x21b)]['id'],_0x4eba28)['catch'](_0x6567b6=>{telegramError(_0x6567b6);});}),tgBot['on'](_0x331747(0x278),_0x1c208d=>{const _0x155233=_0x331747;_0x1c208d[_0x155233(0x314)]()[_0x155233(0x270)]('404\x20Not\x20Found')&&(logging(_0x155233(0x2b6)),tgBot[_0x155233(0x29b)](),tgBot=null,io['to']('botmanager')[_0x155233(0x2e9)]('notification',_0x155233(0x2b6)));}),process[_0x331747(0x2f1)](_0x331747(0x230),()=>{const _0x1b57d4=_0x331747;if(tgBot)tgBot[_0x1b57d4(0x29b)]();process[_0x1b57d4(0x28a)](0x1);}),process[_0x331747(0x2f1)]('SIGTERM',()=>{const _0x224d5d=_0x331747;if(tgBot)tgBot[_0x224d5d(0x29b)]();process['exit'](0x1);});}}function disableTelegram(){const _0x3ab6c0=_0x226ca6;tgBot&&(tgBot[_0x3ab6c0(0x29b)](),tgBot=null);}function sendTelegram(_0x3c40c4,_0x1bdffe){const _0x2faccd=_0x226ca6;if(settings[_0x2faccd(0x25e)]){if(settings['telegramEvents']==_0x2faccd(0x24f)||(_0x1bdffe[_0x2faccd(0x32c)]==_0x2faccd(0x1f1)||_0x1bdffe['type']==_0x2faccd(0x228))&&settings[_0x2faccd(0x2f6)]=='alerts'||_0x1bdffe[_0x2faccd(0x32c)]==_0x2faccd(0x214)&&settings[_0x2faccd(0x2f6)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x1bdffe['showname'])tgBot['sendMessage'](settings[_0x2faccd(0x2ff)],_0x1bdffe['botname']+_0x2faccd(0x305)+_0x1bdffe[_0x2faccd(0x332)])[_0x2faccd(0x232)](_0x40076f=>{telegramError(_0x40076f);});else tgBot[_0x2faccd(0x27e)](settings[_0x2faccd(0x2ff)],'Bot\x20'+_0x3c40c4+'\x20>\x20'+_0x1bdffe['event'])[_0x2faccd(0x232)](_0x211a98=>{telegramError(_0x211a98);});}}}}function getDeviceWithIp(_0x537961){const _0x3daadd=_0x226ca6;return devices[_0x3daadd(0x2dc)](_0x7d660=>_0x7d660['ip']===_0x537961);}function temporaryAccess2FA(_0x45eef1,_0x30bba6){const _0xa7bb3=_0x226ca6;let _0x366261=new Date(),_0x4a7992=![];if(lastIpApproval){if(_0x366261-lastIpApproval<0x1388)_0x4a7992=!![];}lastIpApproval=new Date();if(_0x4a7992)return;tgBot&&settings['telegramChatId']&&(tgBot[_0xa7bb3(0x22d)](_0xa7bb3(0x262)),tgBot[_0xa7bb3(0x27e)](settings[_0xa7bb3(0x2ff)],_0xa7bb3(0x312)+normalizeIP(_0x30bba6)[_0xa7bb3(0x299)]+_0xa7bb3(0x2aa),{'parse_mode':_0xa7bb3(0x233),'reply_markup':{'inline_keyboard':[[{'text':_0xa7bb3(0x1ff),'callback_data':'5'},{'text':_0xa7bb3(0x269),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})['catch'](_0x367b81=>{telegramError(_0x367b81);}),tgBot['on'](_0xa7bb3(0x262),async _0x39eacd=>{const _0x46e37c=_0xa7bb3,_0x249486=_0x39eacd[_0x46e37c(0x204)],_0x4e41b2=_0x39eacd[_0x46e37c(0x240)];tgBot[_0x46e37c(0x2c1)](_0x39eacd['id'])[_0x46e37c(0x2d3)](async()=>{const _0x37856e=_0x46e37c;devices[_0x45eef1]['telegramIpApproval']={'clientip':_0x30bba6,'timestamp':new Date()['getTime'](),'expiry':_0x249486},_0x249486!='reject'?(await tgBot[_0x37856e(0x27e)](_0x4e41b2[_0x37856e(0x21b)]['id'],_0x37856e(0x313)+_0x249486+'\x20minutes',{'parse_mode':_0x37856e(0x233)})[_0x37856e(0x232)](_0x89d5c0=>{telegramError(_0x89d5c0);}),io['to'](_0x45eef1)[_0x37856e(0x2e9)](_0x37856e(0x24c),{'access':{'allow':![],'reason':_0x37856e(0x216),'token':null}})):(await tgBot[_0x37856e(0x27e)](_0x4e41b2[_0x37856e(0x21b)]['id'],_0x37856e(0x335))['catch'](_0x41398a=>{telegramError(_0x41398a);}),io['to'](_0x45eef1)[_0x37856e(0x2e9)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x46e37c(0x22d)](_0x46e37c(0x262));}));}function loginAccess2FA(_0x448b49,_0x464663){const _0x1ec7b5=_0x226ca6;tgBot&&settings[_0x1ec7b5(0x2ff)]&&(tgBot[_0x1ec7b5(0x22d)](_0x1ec7b5(0x262)),tgBot['sendMessage'](settings[_0x1ec7b5(0x2ff)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x464663)['show']+_0x1ec7b5(0x2aa),{'parse_mode':_0x1ec7b5(0x233),'reply_markup':{'inline_keyboard':[[{'text':_0x1ec7b5(0x245),'callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x1ec7b5(0x232)](_0x428eb8=>{telegramError(_0x428eb8);}),tgBot['on'](_0x1ec7b5(0x262),async _0x482bb4=>{const _0x13f0e1=_0x1ec7b5,_0x50bb24=_0x482bb4['data'],_0x1d5915=_0x482bb4[_0x13f0e1(0x240)];tgBot[_0x13f0e1(0x2c1)](_0x482bb4['id'])[_0x13f0e1(0x2d3)](async()=>{const _0x56f180=_0x13f0e1;devices[_0x448b49][_0x56f180(0x2c5)]={'clientip':_0x464663,'timestamp':new Date()[_0x56f180(0x20e)](),'expiry':_0x50bb24},_0x50bb24!=_0x56f180(0x267)?(await tgBot['sendMessage'](_0x1d5915[_0x56f180(0x21b)]['id'],_0x56f180(0x302),{'parse_mode':_0x56f180(0x233)})[_0x56f180(0x232)](_0x832900=>{telegramError(_0x832900);}),io['to'](_0x448b49)[_0x56f180(0x2e9)]('status',{'access':{'allow':![],'reason':_0x56f180(0x216),'token':null}})):(await tgBot[_0x56f180(0x27e)](_0x1d5915['chat']['id'],_0x56f180(0x286))[_0x56f180(0x232)](_0x44ae92=>{telegramError(_0x44ae92);}),io['to'](_0x448b49)['emit'](_0x56f180(0x24c),{'access':{'allow':![],'reason':_0x56f180(0x317),'token':null}}));}),tgBot[_0x13f0e1(0x22d)](_0x13f0e1(0x262));}));}function getConfiguration(){const _0x1e3ffe=_0x226ca6;return dbConfig[_0x1e3ffe(0x2f5)](_0x1e3ffe(0x2fc))['sortBy']('botID')['value']()||[];}function getEnabledBots(){const _0xd92e26=_0x226ca6;return dbConfig[_0xd92e26(0x2f5)]('bots')[_0xd92e26(0x24b)]('botID')['filter']({'status':_0xd92e26(0x298)})[_0xd92e26(0x23d)]()||[];}function getDisabledBots(){const _0x155a1d=_0x226ca6;return dbConfig[_0x155a1d(0x2f5)](_0x155a1d(0x2fc))[_0x155a1d(0x24b)]('botID')[_0x155a1d(0x211)]({'status':'disabled'})[_0x155a1d(0x23d)]()||[];}function getSettings(){const _0x10b194=_0x226ca6;return dbSettings[_0x10b194(0x2f5)]('settings')[_0x10b194(0x23d)]()||{'timeshift':0x0};}function getSecure(){const _0x3b9048=_0x226ca6;return dbSecure[_0x3b9048(0x2f5)](_0x3b9048(0x327))[_0x3b9048(0x23d)]()||{};}function getBlacklist(){const _0x7e491=_0x226ca6;return dbSecure['get'](_0x7e491(0x27b))['value']()||[];}function broadcastToBots(_0x17c100,_0x48e555){const _0x219e91=_0x226ca6;config[_0x219e91(0x26d)](_0x286ba5=>{const _0x5b259e=_0x219e91;if(_0x286ba5[_0x5b259e(0x24c)]=='enabled'&&_0x286ba5[_0x5b259e(0x249)]==_0x5b259e(0x2d4)){if(pid[_0x286ba5[_0x5b259e(0x24e)]])pid[_0x286ba5[_0x5b259e(0x24e)]][_0x5b259e(0x2f9)]({[_0x17c100]:_0x48e555});}});}function storeSettings(_0x35d5ba,_0x4e8bdf=![]){const _0x2dc6d1=_0x226ca6;_0x35d5ba={...settings,..._0x35d5ba};if(_0x4e8bdf&&_0x35d5ba[_0x2dc6d1(0x28c)]!='************'&&_0x35d5ba[_0x2dc6d1(0x28c)]!=''){const _0x34b52d=crypt[_0x2dc6d1(0x223)](secure[_0x2dc6d1(0x2cb)],_0x35d5ba[_0x2dc6d1(0x28c)])[_0x2dc6d1(0x240)][_0x2dc6d1(0x2e8)]('@')[0x0],_0x184e22=bcrypt[_0x2dc6d1(0x293)](_0x34b52d,saltRounds);_0x35d5ba={..._0x35d5ba,'bbPassword':_0x184e22};}if(_0x4e8bdf&&_0x35d5ba[_0x2dc6d1(0x318)]!=_0x2dc6d1(0x219)&&_0x35d5ba[_0x2dc6d1(0x318)]!=''){const _0x51e3af=crypt[_0x2dc6d1(0x223)](secure[_0x2dc6d1(0x2cb)],_0x35d5ba[_0x2dc6d1(0x318)])['message'][_0x2dc6d1(0x2e8)]('@')[0x0];_0x35d5ba={..._0x35d5ba,'telegramToken':_0x51e3af};}const _0x3e8a80=_0x35d5ba[_0x2dc6d1(0x318)]!='************'&&_0x35d5ba[_0x2dc6d1(0x318)]!=settings[_0x2dc6d1(0x318)]||_0x35d5ba[_0x2dc6d1(0x32e)]!=settings[_0x2dc6d1(0x32e)],_0x119f60=_0x35d5ba[_0x2dc6d1(0x318)]==''||_0x35d5ba['telegramUsername']=='';if(_0x3e8a80)_0x35d5ba['telegramEvents']='all';for(const [_0x2ed673,_0x2e1bb8]of Object[_0x2dc6d1(0x2e7)](_0x35d5ba)){if(_0x2ed673==_0x2dc6d1(0x318)&&_0x2e1bb8==_0x2dc6d1(0x219)){_0x35d5ba[_0x2dc6d1(0x318)]=settings[_0x2dc6d1(0x318)];continue;};if(_0x2ed673==_0x2dc6d1(0x28c)&&_0x2e1bb8==_0x2dc6d1(0x219)){_0x35d5ba[_0x2dc6d1(0x28c)]=settings['bbPassword'];continue;};dbSettings[_0x2dc6d1(0x2bc)]('settings.'+_0x2ed673,_0x2e1bb8)[_0x2dc6d1(0x24d)]();}settings=_0x35d5ba,io['to'](_0x2dc6d1(0x2f4))[_0x2dc6d1(0x2e9)](_0x2dc6d1(0x322),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x3e8a80&&!_0x119f60)initTelegram();if(_0x3e8a80&&_0x119f60)disableTelegram();getAllClients()['forEach'](_0x59a7e9=>{const _0x53816b=_0x2dc6d1;getSocket(_0x59a7e9['id'])[_0x53816b(0x2e9)](_0x53816b(0x24c),{'access':{'allow':![],'reason':_0x53816b(0x216),'token':null}});});}function updateSetting(_0x1d959e,_0x1878f0){const _0x56ed9d=_0x226ca6;dbSettings[_0x56ed9d(0x2bc)](_0x56ed9d(0x26e)+_0x1d959e,_0x1878f0)['write'](),settings=getSettings(),io['to'](_0x56ed9d(0x2f4))[_0x56ed9d(0x2e9)](_0x56ed9d(0x322),cleanSettings());}function storeSecure(_0x52243e){const _0xdb5f3f=_0x226ca6;dbSecure[_0xdb5f3f(0x2f5)](_0xdb5f3f(0x327))['push'](_0x52243e)[_0xdb5f3f(0x24d)](),secure=_0x52243e;}function addBlacklist(_0x1b929c){const _0x2187b8=_0x226ca6;cleanBlacklist();let _0x41b5ca;devices[_0x1b929c][_0x2187b8(0x220)]?_0x41b5ca=Math[_0x2187b8(0x217)](devices[_0x1b929c][_0x2187b8(0x220)][_0x2187b8(0x2d9)],loginExpiry):_0x41b5ca=loginExpiry,dbSecure[_0x2187b8(0x2f5)](_0x2187b8(0x27b))[_0x2187b8(0x209)]({'expiry':new Date()['getTime']()+_0x41b5ca*0x3c*0x3e8,'token':devices[_0x1b929c][_0x2187b8(0x2ef)][_0x2187b8(0x32d)]})[_0x2187b8(0x24d)](),blacklist=dbSecure[_0x2187b8(0x2f5)](_0x2187b8(0x27b))[_0x2187b8(0x23d)]();}function cleanBlacklist(){const _0x4a5ed2=_0x226ca6;let _0x2b0033=dbSecure[_0x4a5ed2(0x2f5)]('blacklist')['cloneDeep']()[_0x4a5ed2(0x23d)](),_0x4a80d3=new Date()['getTime']();_0x2b0033['forEach'](_0x141a97=>{const _0x350d79=_0x4a5ed2;_0x141a97[_0x350d79(0x2d9)]<_0x4a80d3&&dbSecure[_0x350d79(0x2f5)](_0x350d79(0x27b))[_0x350d79(0x203)]({'expiry':_0x141a97[_0x350d79(0x2d9)]})[_0x350d79(0x24d)]();});}function initStates(){const _0x3d45da=_0x226ca6;let _0x2bb75d=getConfiguration();_0x2bb75d[_0x3d45da(0x26d)](_0xa4557c=>{const _0xd0c36f=_0x3d45da;_0xa4557c['live']=_0xd0c36f(0x333);}),storeConfiguration(_0x2bb75d);}function onKeys(){const _0x269ac1=new RSA();return new Promise(_0x275e60=>{const _0x150ed7=_0x543c;_0x269ac1[_0x150ed7(0x24a)]()[_0x150ed7(0x2d3)](_0x5877b2=>{_0x275e60(_0x5877b2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1b5d9c=_0x226ca6;let _0x376ede=getConfiguration(),_0xac8408=![];_0x376ede[_0x1b5d9c(0x26d)](_0x3414c5=>{const _0x49c753=_0x1b5d9c;if(_0x3414c5['status']==_0x49c753(0x2d4))_0x3414c5[_0x49c753(0x24c)]='enabled',_0xac8408=!![];else _0x3414c5[_0x49c753(0x24c)]==_0x49c753(0x333)&&(_0x3414c5[_0x49c753(0x24c)]=_0x49c753(0x28f),_0xac8408=!![]);});if(_0xac8408)storeConfiguration(_0x376ede);let _0x208fb4=getSecure();if(!_0x208fb4['hasOwnProperty'](_0x1b5d9c(0x244))){let _0x1109cf=await generateKeys();_0x208fb4[_0x1b5d9c(0x261)]=_0x1109cf[_0x1b5d9c(0x261)],_0x208fb4[_0x1b5d9c(0x2cb)]=_0x1109cf[_0x1b5d9c(0x2cb)],_0x208fb4[_0x1b5d9c(0x244)]=crypto[_0x1b5d9c(0x2dd)](0x20)[_0x1b5d9c(0x314)](_0x1b5d9c(0x2fa));;storeSecure(_0x208fb4);}let _0x4bad39=getSettings();_0xac8408=![];!_0x4bad39[_0x1b5d9c(0x26f)](_0x1b5d9c(0x2e2))&&(_0x4bad39['loginRequired']=![],_0x4bad39[_0x1b5d9c(0x23a)]='',_0x4bad39[_0x1b5d9c(0x28c)]='',_0x4bad39[_0x1b5d9c(0x30d)]=![],_0xac8408=!![]);!_0x4bad39['hasOwnProperty'](_0x1b5d9c(0x2f2))&&(_0x4bad39[_0x1b5d9c(0x2f2)]=![],_0x4bad39[_0x1b5d9c(0x2a5)]=[],_0x4bad39[_0x1b5d9c(0x2ce)]=![],_0xac8408=!![]);if(!_0x4bad39[_0x1b5d9c(0x26f)](_0x1b5d9c(0x25e))){if(_0x4bad39['telegramChatId'])_0x4bad39[_0x1b5d9c(0x25e)]=!![];else _0x4bad39[_0x1b5d9c(0x25e)]=![];_0xac8408=!![];}if(_0xac8408)storeSettings(_0x4bad39);}function storeConfiguration(_0xa72d60){const _0x3b8cf0=_0x226ca6;dbConfig[_0x3b8cf0(0x2f5)](_0x3b8cf0(0x2fc))[_0x3b8cf0(0x203)]()[_0x3b8cf0(0x24d)](),dbConfig[_0x3b8cf0(0x2f5)](_0x3b8cf0(0x2fc))[_0x3b8cf0(0x209)](..._0xa72d60)['write'](),config=_0xa72d60;}function resetPassword(){const _0x2bc9c6=_0x226ca6;tgBot&&settings['telegramChatId']&&(tgBot[_0x2bc9c6(0x22d)](_0x2bc9c6(0x262)),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2bc9c6(0x233),'reply_markup':{'inline_keyboard':[[{'text':_0x2bc9c6(0x331),'callback_data':_0x2bc9c6(0x331)},{'text':'no','callback_data':'no'}]]}})[_0x2bc9c6(0x232)](_0x3a25de=>{telegramError(_0x3a25de);}),tgBot['on'](_0x2bc9c6(0x262),async _0x461844=>{const _0x15005e=_0x2bc9c6,_0xc72edc=_0x461844[_0x15005e(0x204)],_0x3a5fbf=_0x461844[_0x15005e(0x240)];tgBot[_0x15005e(0x2c1)](_0x461844['id'])[_0x15005e(0x2d3)](async()=>{const _0x2f9a0e=_0x15005e;if(_0xc72edc!='no'){const _0x1c860e=0xf,_0x47694b=_0x2f9a0e(0x275),_0x197032=Array[_0x2f9a0e(0x2a4)](crypto[_0x2f9a0e(0x296)](new Uint32Array(_0x1c860e)))['map'](_0x5e4b89=>_0x47694b[_0x5e4b89%_0x47694b[_0x2f9a0e(0x26b)]])[_0x2f9a0e(0x272)](''),_0x2ac911=bcrypt[_0x2f9a0e(0x293)](_0x197032,saltRounds);storeSettings({'bbPassword':_0x2ac911}),await tgBot['sendMessage'](_0x3a5fbf[_0x2f9a0e(0x21b)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x197032,{'parse_mode':_0x2f9a0e(0x233)})[_0x2f9a0e(0x232)](_0xde8ccd=>{telegramError(_0xde8ccd);});}else await tgBot[_0x2f9a0e(0x27e)](_0x3a5fbf[_0x2f9a0e(0x21b)]['id'],_0x2f9a0e(0x32b))[_0x2f9a0e(0x232)](_0x3e2347=>{telegramError(_0x3e2347);});}),tgBot['removeListener'](_0x15005e(0x262));}));}function logging(_0x5f087a){const _0x2f5ee7=_0x226ca6;console['log'](getTimeStamp()+_0x2f5ee7(0x310)+_0x5f087a);if(tgBot&&settings[_0x2f5ee7(0x2ff)]&&settings[_0x2f5ee7(0x2f6)]!=_0x2f5ee7(0x229))tgBot['sendMessage'](settings['telegramChatId'],_0x2f5ee7(0x2ba)+_0x5f087a)[_0x2f5ee7(0x232)](_0x18e7f6=>{telegramError(_0x18e7f6);});}function getServerTime(){const _0x7404ee=_0x226ca6,_0x2814d4=new Date();return _0x2814d4[_0x7404ee(0x337)]()+'/'+(_0x2814d4[_0x7404ee(0x294)]()+0x1)[_0x7404ee(0x314)]()[_0x7404ee(0x316)](0x2,'0')+'/'+_0x2814d4['getDate']()[_0x7404ee(0x314)]()[_0x7404ee(0x316)](0x2,'0')+'\x20'+_0x2814d4[_0x7404ee(0x225)]()['toString']()[_0x7404ee(0x316)](0x2,'0')+':'+_0x2814d4[_0x7404ee(0x254)]()[_0x7404ee(0x314)]()[_0x7404ee(0x316)](0x2,'0')+':'+_0x2814d4[_0x7404ee(0x308)]()[_0x7404ee(0x314)]()[_0x7404ee(0x316)](0x2,'0');}function _0x1716(){const _0x137496=['-performance.json','initclient','crypto','expiry','127.0.0.1','auth','find','randomBytes','isDirectory','Ok,\x20will\x20send\x20order\x20notifications\x20only','headers','1330ZFpaTX','loginRequired','/:bot/performance','copyFileSync','/disable\x20-\x20disable\x20notifications\x0a','2640990BMcdCg','entries','split','emit','/off\x20-\x20stop\x20bot(s)\x0a','temporary\x20access\x20not\x20allowed','/:bot','bot-','login\x20token\x20generated','access','storeConfiguration','once','whitelistEnabled','login\x20token\x20valid','botmanager','get','telegramEvents','/help\x20-\x20show\x20available\x20commands\x0a','restarting\x20Bot\x20','send','hex','removeAllListeners','bots','4077138ZudzfM','UA-192771731-1','telegramChatId','Unauthorized\x20attempt\x20to\x20store\x20configuration','pidRefreshToken','Login\x20accepted','build','compareSync','\x20>\x20','username','\x20|\x20','getSeconds','bcryptjs',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','page','f2aRequired','static','https://hodlerhacks.com',':\x20Bot\x20Mgr\x20>\x20','All\x20bots\x20running\x20right\x20now','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Access\x20enabled\x20for\x20','toString','connected','padStart','2FA\x20login\x20rejected','telegramToken','sha256','Unauthorized\x20attempt\x20to\x20log\x20out','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','toIPv4MappedAddress','defaults','getUTCHours','unlinkSync','log','store','settings','fork','Notifications\x20types:\x20','update-bb','verify','secure','reason','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','uuid','Password\x20reset\x20rejected','type','token','telegramUsername','You\x20can\x20use\x20the\x20following\x20commands:\x0a','mkdirSync','yes','event','stopped','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Temporary\x20access\x20rejected','remoteAddress','getFullYear','46764PKXCbP','conn','error','All','getPortfolio','http','password','restart','child_process','::ffff:127.0.0.1','logout','27GZIkvq','add-bot','2FA\x20required','All\x20bots','toIPv4Address','5\x20min','telegram','test','1636ITRncw','remove','data','clients','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Balance\x20Bot\x20Server','push','Unauthorized\x20login\x20attempt\x20(timeout)','/on\x20-\x20start\x20bot(s)\x0a','login\x20not\x20required','RSA','getTime','sendFile','Notifications\x20enabled\x0a','filter','assign','Crypt','order','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','reload','max','get-portfolio','************','name','chat','exp','Token\x20blacklisted','NTBA_FIX_319','date-fns','telegramIpApproval','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','decrypt','slice','getHours','store-settings','getDate','success','orders','timestamp','path','version','removeListener','temporary\x20access\x20timeout','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','SIGINT','build2','catch','HTML','2FA\x20login\x20required','bot','apiKey','yargs/yargs','connection','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','bbUsername','1000','store-headless','value','Unauthorized\x20attempt\x20to\x20update\x20settings','bb-settings.json','message','alerts','Unauthorized\x20login\x20attempt\x20(public\x20key)','new-disabled','secret','accept','User\x20has\x20been\x20validated','placeOrder','index.html','live','generateKeyPairAsync','sortBy','status','write','botID','all','Unauthorized\x20attempt\x20to\x20get\x20portfolio','user','existsSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','getMinutes','ipc','default','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','\x20/\x20','bb-config.json','store-configuration','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','login','sign','telegramEnabled','parse','args','publicKey','callback_query','starting\x20new\x20bot\x20|\x20Bot\x20','::1','bot.js','config/','reject','hybrid-crypto-js','15\x20min','argv','length','pidExpireLogin','forEach','settings.','hasOwnProperty','includes','enabled\x20Bot\x20','join','3000','/:bot/portfolio','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','update-bot','version.json','polling_error','Unauthorized\x20attempt\x20to\x20add\x20bot','node-telegram-bot-api','blacklist','allow','getStartingBalances','sendMessage','sockets','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','isValid','login\x20required','express','/:bot/configuration','backup/','Login\x20rejected','handshake','referer','No\x20bots\x20running\x20right\x20now','exit','Bot\x20','bbPassword','bb-secure.json','4155557wXuNSn','disabled','/status\x20-\x20show\x20bot(s)\x20status\x0a','-config.json','Invalid\x20IP\x20address','hashSync','getMonth','disconnect','randomFillSync','/enable\x20-\x20enable\x20notifications\x0a','enabled','show','(((.+)+)+)+$','stopPolling','-----------------------------------------------------------------------------------','temporary\x20token\x20generated','botname','ipaddr.js','new','port','<b>Balance\x20Bot\x20status:</b>\x0a','5026650kmauQJ','from','whitelist','2FA\x20login\x20token\x20generated','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','logged\x20out','</b>\x20?','access\x20timeout','clientip','apply','search','-results.json','invalid\x20credentials','env','No\x20authentication\x20token','emitHistory','lowdb','-events.json','Invalid\x20Telegram\x20token','Notifications\x20enabled','2152ungskG','analytics','Bot\x20Mgr\x20>\x20','constructor','set','inherit','use','timeshift','encryptedUuid','answerCallbackQuery','Balance\x20Bot','match','function','telegram2FaApproval','Invalid\x20authentication\x20token\x20(1)','142948minrez','listen','kind','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','privateKey','Notifications\x20disabled\x0a','started','temporaryAccessAllowed','lowdb/adapters/FileSync','onText','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20delete\x20bot','then','running','Alerts'];_0x1716=function(){return _0x137496;};return _0x1716();}function getTimeStamp(){const _0x225e6f=_0x226ca6,_0x462adf=shiftedTime();return _0x462adf['getFullYear']()+'/'+(_0x462adf[_0x225e6f(0x294)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x462adf[_0x225e6f(0x227)]()[_0x225e6f(0x314)]()[_0x225e6f(0x316)](0x2,'0')+'\x20'+_0x462adf[_0x225e6f(0x225)]()['toString']()['padStart'](0x2,'0')+':'+_0x462adf[_0x225e6f(0x254)]()[_0x225e6f(0x314)]()[_0x225e6f(0x316)](0x2,'0')+':'+_0x462adf['getSeconds']()[_0x225e6f(0x314)]()[_0x225e6f(0x316)](0x2,'0');}function shiftedTime(){const _0x17bbc2=_0x226ca6,_0x44aba6=new Date();let _0x4241d8=_0x44aba6;if(settings[_0x17bbc2(0x2bf)]&&settings[_0x17bbc2(0x2bf)]!==0x0)_0x4241d8=fns['add'](_0x44aba6,{'hours':settings[_0x17bbc2(0x2bf)]});return _0x4241d8;}function startScheduler(){const _0x25e1ad=_0x226ca6;let _0x533871=new Date()[_0x25e1ad(0x31e)]();_0x533871==0x1&&backupConfigFiles();_0x533871==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x43e52d=_0x226ca6;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x43e52d(0x26d)](_0x34fa01=>{const _0x3d733d=_0x43e52d;if(!_0x34fa01[_0x3d733d(0x2de)]())fs[_0x3d733d(0x2e4)](configpath+_0x34fa01[_0x3d733d(0x21a)],configbackuppath+_0x34fa01[_0x3d733d(0x21a)]);});}function triggerAnalytics(){const _0x286542=_0x226ca6;analytics[_0x286542(0x30c)]({'title':_0x286542(0x208),'href':_0x286542(0x30f),'path':'/v'+serverversion});}function validateCredentials(_0x20c9eb,_0x450908){const _0xc43e8e=_0x226ca6;if(_0x20c9eb['username']==settings[_0xc43e8e(0x23a)]&&bcrypt[_0xc43e8e(0x304)](_0x20c9eb['password'],settings[_0xc43e8e(0x28c)])){if(settings[_0xc43e8e(0x30d)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x460204=generateLoginToken(_0x450908);return{'allow':!![],'reason':_0xc43e8e(0x2ee),'token':_0x460204};}}else return{'allow':![],'reason':_0xc43e8e(0x2b0),'token':null};}function refreshToken(_0x4eca0e){const _0x3de029=_0x226ca6,_0x33eb72=generateLoginToken(_0x4eca0e);return{'allow':!![],'reason':_0x3de029(0x2ee),'token':_0x33eb72};}function validateAccess(_0x34786b,_0x29f83f){const _0x260ae8=_0x226ca6;let _0xc88413=devices[_0x29f83f]['ip'],_0x494287;const _0x5143e6=_0x1f13a4=>{const _0x23c090=_0x543c;if(settings[_0x23c090(0x2e2)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x29f83f)){const _0x252b3e=generateLoginToken(_0x29f83f);return{'allow':!![],'reason':_0x23c090(0x2a6),'token':_0x252b3e};}else return{'allow':![],'reason':_0x23c090(0x282),'token':null};}else return _0x494287=validToken(_0x1f13a4,_0x29f83f),_0x494287['hasOwnProperty'](_0x23c090(0x228))?{'allow':!![],'reason':_0x23c090(0x2f3),'token':_0x1f13a4}:{'allow':![],'reason':_0x23c090(0x282),'token':null};}else return{'allow':!![],'reason':_0x23c090(0x20c),'token':null};};if(settings[_0x260ae8(0x2f2)]){let _0xcb81e1=[...settings['whitelist'],_0x260ae8(0x264),_0x260ae8(0x1f8),_0x260ae8(0x2da)];if(_0xcb81e1[_0x260ae8(0x270)](_0xc88413))return _0x5143e6(_0x34786b);else{_0x494287=validToken(_0x34786b,_0x29f83f);if(_0x494287[_0x260ae8(0x26f)](_0x260ae8(0x228)))return _0x5143e6(_0x34786b);else{if(telegramIpApproved(_0x29f83f)){const _0x129de3=generateToken(_0x29f83f);return _0x494287=_0x5143e6(_0x34786b),_0x494287['allow']?{'allow':!![],'reason':_0x260ae8(0x29d),'token':_0x129de3}:_0x494287;}else return settings[_0x260ae8(0x2ce)]?{'allow':![],'reason':_0x260ae8(0x1fc),'token':null}:{'allow':![],'reason':_0x260ae8(0x2eb),'token':null};}}}else return _0x5143e6(_0x34786b);}function timelyDecrypt(_0x1b41aa,_0x119e96=!![]){const _0x363f9a=_0x226ca6;if(_0x1b41aa)try{const _0x39cdcb=crypt[_0x363f9a(0x223)](secure[_0x363f9a(0x2cb)],_0x1b41aa)[_0x363f9a(0x240)],_0x2c40f0=_0x39cdcb['split']('@')[0x0],_0x8c8d59=_0x39cdcb['split']('@')[0x1],_0x2d1455=new Date()[_0x363f9a(0x20e)]();if(_0x119e96){if(_0x2d1455-_0x8c8d59<maxSecretAge*0x3e8)return _0x2c40f0;else return![];}else return _0x2c40f0;}catch(_0x44e1bc){return![];}else return![];}const validToken=(_0x15fca9,_0x206a0f)=>{const _0x26bf34=_0x226ca6,_0x31cfea=devices[_0x206a0f]['ip'];if(!_0x15fca9)return{'error':_0x26bf34(0x2b2)};for(let _0x421c8a of blacklist){if(_0x421c8a['token']==_0x15fca9)return{'error':_0x26bf34(0x21d)};}let _0x22cd68;try{_0x22cd68=jwt[_0x26bf34(0x326)](_0x15fca9,secure['secret']+_0x206a0f);}catch{return{'error':_0x26bf34(0x2c6)};}if(!_0x22cd68['hasOwnProperty']('clientip')&&!_0x22cd68[_0x26bf34(0x26f)]('username')||!_0x22cd68[_0x26bf34(0x26f)](_0x26bf34(0x21c)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x22cd68['hasOwnProperty']('username')&&_0x22cd68[_0x26bf34(0x26f)](_0x26bf34(0x2ac))){const {clientip:_0x4e50ec}=_0x22cd68;return _0x31cfea==_0x4e50ec?{'success':_0x26bf34(0x246)}:{'error':_0x26bf34(0x292)};}else{if(_0x22cd68[_0x26bf34(0x26f)]('username')&&_0x22cd68[_0x26bf34(0x26f)]('clientip')){const {username:_0x5d1412,clientip:_0x519d2c}=_0x22cd68;return settings['bbUsername']==_0x5d1412&&_0x31cfea==_0x519d2c?{'success':_0x26bf34(0x246)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x37f4cc=>{const _0x357440=_0x226ca6;if(_0x37f4cc){const _0x3129fe=devices[_0x37f4cc]['ip'];return jwt['sign']({'username':settings[_0x357440(0x23a)],'clientip':_0x3129fe},secure[_0x357440(0x244)]+_0x37f4cc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xfa6c24=>{const _0x492d70=_0x226ca6;if(_0xfa6c24){const _0x2eedce=devices[_0xfa6c24]['ip'];return jwt[_0x492d70(0x25d)]({'clientip':_0x2eedce},secure['secret']+_0xfa6c24,{'expiresIn':devices[_0xfa6c24]['telegramIpApproval'][_0x492d70(0x2d9)]*0x3c});}else return![];},telegramIpApproved=_0x4af7a9=>{const _0x584b5f=_0x226ca6;let _0x30abd1=![];return devices[_0x4af7a9][_0x584b5f(0x220)]&&devices[_0x4af7a9]['telegramIpApproval'][_0x584b5f(0x2d9)]!=_0x584b5f(0x267)&&(_0x30abd1=devices[_0x4af7a9]['telegramIpApproval'][_0x584b5f(0x2ac)]==devices[_0x4af7a9]['ip']&&new Date()[_0x584b5f(0x20e)]()-devices[_0x4af7a9]['telegramIpApproval'][_0x584b5f(0x22a)]<devices[_0x4af7a9]['telegramIpApproval'][_0x584b5f(0x2d9)]*0x3c*0x3e8),_0x30abd1;},telegram2FaApproved=_0x1aa935=>{const _0x1c0c5b=_0x226ca6;let _0x223a95=![];return devices[_0x1aa935][_0x1c0c5b(0x2c5)]&&devices[_0x1aa935]['telegram2FaApproval'][_0x1c0c5b(0x2d9)]!=_0x1c0c5b(0x267)&&(_0x223a95=devices[_0x1aa935][_0x1c0c5b(0x2c5)]['clientip']==devices[_0x1aa935]['ip']&&new Date()[_0x1c0c5b(0x20e)]()-devices[_0x1aa935][_0x1c0c5b(0x2c5)][_0x1c0c5b(0x22a)]<devices[_0x1aa935][_0x1c0c5b(0x2c5)][_0x1c0c5b(0x2d9)]*0x3c*0x3e8),_0x223a95;},normalizeIP=_0x57771d=>{const _0x7e07ab=_0x226ca6;let _0x252a3b=null,_0x2ddbf8=null;if(ipaddr[_0x7e07ab(0x281)](_0x57771d)){const _0x6eec32=ipaddr[_0x7e07ab(0x25f)](_0x57771d);_0x6eec32[_0x7e07ab(0x2c9)]()==='ipv6'?(_0x6eec32['isIPv4MappedAddress']()&&(_0x252a3b=_0x6eec32[_0x7e07ab(0x1fe)]()[_0x7e07ab(0x314)]()),_0x2ddbf8=_0x6eec32[_0x7e07ab(0x314)]()):(_0x252a3b=_0x6eec32['toString'](),_0x2ddbf8=_0x6eec32[_0x7e07ab(0x31c)]()[_0x7e07ab(0x314)]());}return{'show':_0x252a3b?_0x252a3b:_0x2ddbf8,'store':_0x2ddbf8};};