const _0x1d79fc=_0x30d6;(function(_0x361bc7,_0x3366ad){const _0x777b32=_0x30d6,_0x448777=_0x361bc7();while(!![]){try{const _0x45a86d=-parseInt(_0x777b32(0x1a1))/0x1*(-parseInt(_0x777b32(0x107))/0x2)+parseInt(_0x777b32(0x233))/0x3*(-parseInt(_0x777b32(0x116))/0x4)+-parseInt(_0x777b32(0x157))/0x5*(parseInt(_0x777b32(0x1cd))/0x6)+parseInt(_0x777b32(0x119))/0x7+parseInt(_0x777b32(0x1b1))/0x8+parseInt(_0x777b32(0x218))/0x9+parseInt(_0x777b32(0x1c0))/0xa;if(_0x45a86d===_0x3366ad)break;else _0x448777['push'](_0x448777['shift']());}catch(_0xc34d5f){_0x448777['push'](_0x448777['shift']());}}}(_0x1125,0xc045b));const _0x4f1bed=function(){let _0x1b8854=!![];return function(_0x59eee4,_0x39df56){const _0x59f233=_0x1b8854?function(){const _0x250d34=_0x30d6;if(_0x39df56){const _0x3edcea=_0x39df56[_0x250d34(0x13e)](_0x59eee4,arguments);return _0x39df56=null,_0x3edcea;}}:function(){};return _0x1b8854=![],_0x59f233;};}(),_0x487179=_0x4f1bed(this,function(){const _0x243d1c=_0x30d6;return _0x487179[_0x243d1c(0x220)]()[_0x243d1c(0x109)]('(((.+)+)+)+$')[_0x243d1c(0x220)]()['constructor'](_0x487179)['search'](_0x243d1c(0x20e));});_0x487179();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x1d79fc(0x129)),FileSync=require(_0x1d79fc(0x16f)),fs=require('fs'),fns=require(_0x1d79fc(0x1eb)),low=require(_0x1d79fc(0x162)),path=require(_0x1d79fc(0x1b2)),crypto=require(_0x1d79fc(0x1a5)),Crypt=require('hybrid-crypto-js')[_0x1d79fc(0x1b9)],RSA=require('hybrid-crypto-js')[_0x1d79fc(0xf5)],bcrypt=require('bcryptjs'),jwt=require(_0x1d79fc(0x164)),analyticsLib=require(_0x1d79fc(0x189))['default'],googleAnalytics=require(_0x1d79fc(0x209))[_0x1d79fc(0x201)],ipaddr=require('ipaddr.js'),argv=require(_0x1d79fc(0x10e))(process[_0x1d79fc(0x1de)][_0x1d79fc(0x145)](0x2))['argv'],PORT=argv[_0x1d79fc(0x196)]||_0x1d79fc(0x205),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x1d79fc(0x110)](PORT))return console[_0x1d79fc(0x193)](_0x1d79fc(0x1e9)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1);const HOST=argv[_0x1d79fc(0x17e)]||null,userID=argv[_0x1d79fc(0x106)]||'';let bbpath=_0x1d79fc(0x15f),bbpath2='';const botfile=_0x1d79fc(0x1f8),configfile=_0x1d79fc(0x21f),settingsfile=_0x1d79fc(0x1ee),securefile=_0x1d79fc(0x1ad);!fs[_0x1d79fc(0x14f)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1d79fc(0x160)),configpath=userID?bbpath+_0x1d79fc(0x172)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs[_0x1d79fc(0x14f)](configpath)&&fs[_0x1d79fc(0x20d)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x1d79fc(0x20d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1d79fc(0x181)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1d79fc(0x181)]({'settings':{'timeshift':0x0}})[_0x1d79fc(0xfd)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x1d79fc(0x180)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1d79fc(0x195))[_0x1d79fc(0x1e3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x1d79fc(0x19b)),app=express(),http=require(_0x1d79fc(0x183))[_0x1d79fc(0x19f)](app);app[_0x1d79fc(0x19a)](express[_0x1d79fc(0x118)](path[_0x1d79fc(0x222)](__dirname,bbpath2,_0x1d79fc(0x13c)))),app[_0x1d79fc(0x19a)](express[_0x1d79fc(0x118)](path[_0x1d79fc(0x222)](__dirname,bbpath2,_0x1d79fc(0x1d2)))),app[_0x1d79fc(0x178)]('/',function(_0x41bfad,_0xfe2b3a){const _0x148da5=_0x1d79fc;_0xfe2b3a[_0x148da5(0x1a4)](path[_0x148da5(0x222)](__dirname,bbpath2,_0x148da5(0x13c),'index.html'));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x1a9),function(_0x5b158c,_0x4cca7a){const _0x25e2e6=_0x1d79fc;_0x4cca7a['sendFile'](path[_0x25e2e6(0x222)](__dirname,bbpath2,_0x25e2e6(0x1d2),_0x25e2e6(0x1dd)));}),app['get'](_0x1d79fc(0x108),(_0x1fdb07,_0x311ddf)=>{const _0x154875=_0x1d79fc;_0x311ddf['sendFile'](path[_0x154875(0x222)](__dirname,bbpath2,_0x154875(0x1d2),_0x154875(0x1dd)));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x1ff),(_0x3e4175,_0x3d5d13)=>{const _0x4db277=_0x1d79fc;_0x3d5d13[_0x4db277(0x1a4)](path[_0x4db277(0x222)](__dirname,bbpath2,_0x4db277(0x1d2),_0x4db277(0x1dd)));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x153),(_0x36743e,_0x5e5c5e)=>{const _0xf88532=_0x1d79fc;_0x5e5c5e[_0xf88532(0x1a4)](path['join'](__dirname,bbpath2,_0xf88532(0x1d2),_0xf88532(0x1dd)));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x214),(_0x51c827,_0x55d828)=>{const _0x4d1880=_0x1d79fc;_0x55d828[_0x4d1880(0x1a4)](path[_0x4d1880(0x222)](__dirname,bbpath2,_0x4d1880(0x1d2),_0x4d1880(0x1dd)));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x1e4),(_0x444851,_0x4d706d)=>{const _0x434bd0=_0x1d79fc;_0x4d706d['sendFile'](path[_0x434bd0(0x222)](__dirname,bbpath2,'build',_0x434bd0(0x1dd)));}),app[_0x1d79fc(0x178)](_0x1d79fc(0x13b),(_0x22fbd6,_0xbefbf9)=>{const _0x4950da=_0x1d79fc;_0xbefbf9[_0x4950da(0x1a4)](path[_0x4950da(0x222)](__dirname,bbpath2,_0x4950da(0x1d2),_0x4950da(0x1dd)));});if(HOST)http[_0x1d79fc(0x22f)](PORT,HOST);else http['listen'](PORT);const io=require(_0x1d79fc(0x229))(http,{}),analytics=analyticsLib({'app':_0x1d79fc(0x165),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x1d79fc(0x22d));let tgBot;if(settings[_0x1d79fc(0x15c)]&&settings[_0x1d79fc(0x15c)]!=''&&settings[_0x1d79fc(0x144)]&&settings[_0x1d79fc(0x144)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5e9fc4=_0x1d79fc;console[_0x5e9fc4(0x193)](''),console[_0x5e9fc4(0x193)](_0x5e9fc4(0x1d8)),logging(_0x5e9fc4(0x136)+PORT),console['log']('-----------------------------------------------------------------------------------');if(config[_0x5e9fc4(0x12a)]!=0x0)config[_0x5e9fc4(0x197)](_0xf726c7=>{const _0x1a761e=_0x5e9fc4;if(_0xf726c7['status']==_0x1a761e(0xfc)||_0xf726c7[_0x1a761e(0x1ea)]==_0x1a761e(0x1d6))logging('starting\x20bot\x20|\x20Bot\x20'+_0xf726c7['botID']+_0x1a761e(0x228)+_0xf726c7[_0x1a761e(0x198)]),startBot([_0xf726c7['botID'],userID],{'cwd':bbpath},function(_0x5a0203){if(_0x5a0203)logging(_0x5a0203);});else(_0xf726c7[_0x1a761e(0x1ea)]==_0x1a761e(0x17a)||_0xf726c7[_0x1a761e(0x1ea)]==_0x1a761e(0x123))&&logging(_0x1a761e(0x14a)+_0xf726c7[_0x1a761e(0x1e7)]+'\x20|\x20'+_0xf726c7['botname']);});else!newBot&&console[_0x5e9fc4(0x193)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0x5e9fc4(0x1d8)),console['log']('');}function startSocket(){const _0x376164=_0x1d79fc;io['on'](_0x376164(0x159),_0x44abc7=>{const _0x45b274=_0x376164;let _0x6b0d0,_0x596f73,_0x5cad1c,_0x1ae3e5,_0x4cb0f5;const _0x5b43ff=_0x44abc7[_0x45b274(0x105)]['headers']['referer'];_0x596f73=_0x5b43ff['match'](/bot[0-9]{3}/);if(_0x596f73)_0x5cad1c=_0x596f73[0x0]['match'](/[0-9]{3}/);if(_0x5cad1c)_0x6b0d0=_0x5cad1c[0x0];else _0x6b0d0=_0x45b274(0x12c);const _0x32c829=_0x44abc7[_0x45b274(0x105)][_0x45b274(0x133)][_0x45b274(0x1a3)];if(!_0x32c829)_0x44abc7['emit'](_0x45b274(0x1ea),{'publicKey':secure['publicKey']});else{_0x1ae3e5=timelyDecrypt(_0x32c829,![]);if(!_0x1ae3e5)logging(_0x45b274(0x117));else{_0x4cb0f5=normalizeIP(_0x44abc7[_0x45b274(0x151)]['remoteAddress'])[_0x45b274(0x150)];if(!devices[_0x1ae3e5])devices[_0x1ae3e5]={'uuid':_0x1ae3e5,'access':{'token':null}};devices[_0x1ae3e5]['ip']=_0x4cb0f5;const _0x338ee3=addClient(_0x44abc7['id'],_0x1ae3e5,_0x6b0d0);setAccess(_0x338ee3),_0x44abc7['on'](_0x45b274(0x21b),_0x5525fa=>{const _0x89f4e1=_0x45b274,_0x12fed5=timelyDecrypt(_0x5525fa[_0x89f4e1(0x15b)]);if(_0x12fed5){_0x5525fa={'username':_0x5525fa[_0x89f4e1(0x11d)],'password':_0x12fed5},devices[_0x1ae3e5][_0x89f4e1(0x199)]=validateCredentials(_0x5525fa,_0x1ae3e5);if(devices[_0x1ae3e5][_0x89f4e1(0x199)][_0x89f4e1(0x19e)]==![]&&devices[_0x1ae3e5]['access']['reason']==_0x89f4e1(0x202))_0x44abc7[_0x89f4e1(0x225)]('status',{'access':devices[_0x1ae3e5][_0x89f4e1(0x199)]}),loginAccess2FA(_0x1ae3e5,_0x4cb0f5);else{if(devices[_0x1ae3e5]['access'][_0x89f4e1(0x19e)]==![]&&devices[_0x1ae3e5][_0x89f4e1(0x199)][_0x89f4e1(0x1df)]==_0x89f4e1(0x18a))_0x44abc7[_0x89f4e1(0x225)](_0x89f4e1(0x1ea),{'access':devices[_0x1ae3e5][_0x89f4e1(0x199)]});else devices[_0x1ae3e5][_0x89f4e1(0x199)]['allow']&&devices[_0x1ae3e5][_0x89f4e1(0x199)][_0x89f4e1(0x1df)]==_0x89f4e1(0x20b)&&(getClientsWithUuid(_0x1ae3e5)[_0x89f4e1(0x197)](_0x1667c0=>{setAccess(_0x1667c0);}),setTokenRefresh(_0x1ae3e5),setSessionTimeout(_0x89f4e1(0x21b),_0x1ae3e5));}}else logging(_0x89f4e1(0x168));}),_0x44abc7['on'](_0x45b274(0x207),()=>{resetPassword();}),_0x44abc7['on']('disconnect',_0x34e74c=>{removeClient(_0x44abc7['id']);});}}});}function _0x1125(){const _0x25b895=['update-bot','Temporary\x20access\x20rejected','f2aRequired','unlinkSync','readdirSync','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','started','server','log','store-configuration','version.json','port','forEach','botname','access','use','express','kill','uuid','allow','createServer','getDate','2170yTerPp','getHours','encryptedUuid','sendFile','crypto','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','isValid','Login\x20rejected','/:bot','cloneDeep','<b>Telegram\x20bot\x20status:</b>\x0a','removeListener','bb-secure.json','pidRefreshToken','privateKey','SIGINT','1404192XegYUf','path','Notifications\x20disabled\x0a','temporary\x20access\x20timeout','ipv6','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','telegramIpApproval','-config.json','Crypt','entries','message','isDirectory','notification','bot-','getFullYear','7795020uhbauD','telegram','telegram2FaApproval','blacklist','once','Login\x20accepted','timeshift','Unauthorized\x20attempt\x20to\x20get\x20logs','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','fork','split','https://hodlerhacks.com','Notifications\x20enabled','174QwWjZb','hex','timestamp','catch','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','build','All','randomFillSync','token','new','data','-----------------------------------------------------------------------------------','running','polling_error','telegramEnabled','add','index.html','argv','reason','reload','SIGTERM','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','version','/:bot/configuration','/disable\x20-\x20disable\x20notifications\x0a','order','botID','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Error:\x20Invalid\x20argument\x20','status','date-fns','Allow\x20login\x20from\x20IP\x20address\x20<b>','padStart','bb-settings.json','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','2FA','max','set','add-bot','bbUsername','Invalid\x20Telegram\x20token','2FA\x20login\x20token\x20generated','function','bot.js','exit','bots','place-order','/help\x20-\x20show\x20available\x20commands\x0a','onText','get-logs','/:bot/performance','telegramChatId','default','2FA\x20login\x20required','value','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','3000','filter','reset-password','hashSync','@analytics/google-analytics','Invalid\x20authentication\x20token\x20(1)','login\x20token\x20generated','error','mkdirSync','(((.+)+)+)+$','whitelist','Bot\x20','decrypt','5\x20min','expiry','/:bot/history','Unauthorized\x20attempt\x20to\x20log\x20out','update-bb','secret','9235692GZXavX','Unauthorized\x20attempt\x20to\x20delete\x20bot','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','login','telegramEvents','initclient','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','bb-config.json','toString',':\x20Bot\x20Mgr\x20>\x20','join','remove','login\x20not\x20required','emit','Password\x20reset\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','\x20|\x20','socket.io','No\x20authentication\x20token','name','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','node-telegram-bot-api','alerts','listen','then','orders','event','1315878BfWPMl','keys','disabled\x20Bot\x20','page','Token\x20blacklisted','callback_query','Bot\x20Mgr\x20>\x20','sockets','Balance\x20Bot\x20Server','randomBytes','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','RSA','restarting\x20Bot\x20','chat','No\x20bots\x20running\x20right\x20now','type','isIPv4MappedAddress','Invalid\x20username\x20or\x20IP\x20address','enabled','write','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','::1','stop','disconnect','logout','temporary\x20token\x20generated','\x20/\x20','handshake','user','1068AJaTZM','/:bot/portfolio','search','All\x20bots','-results.json','30\x20min','User\x20has\x20been\x20validated','yargs/yargs','toIPv4Address','test','toIPv4MappedAddress','temporary\x20access\x20not\x20allowed','show','/status\x20-\x20show\x20bot(s)\x20status\x0a','assign','12LcOFdM','Unauthorized\x20login\x20attempt\x20(public\x20key)','static','725368cmwyaG','************','cancelLoading','apiKey','username','success','Ok,\x20will\x20send\x20alert\x20notifications\x20only','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','generateKeyPairAsync','hasOwnProperty','new-disabled','Ok,\x20will\x20send\x20order\x20notifications\x20only','/restart\x20-\x20restart\x20bot(s)\x0a','from','secure','bbPassword','child_process','length','<b>Balance\x20Bot\x20status:</b>\x0a','botmanager','Unauthorized\x20attempt\x20to\x20add\x20bot','getUTCHours','2FA\x20required','yes','error\x20while\x20deleting\x20config\x20files:\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','auth','cancel-loading','Invalid\x20IP\x20address','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','copyFileSync','live','You\x20can\x20use\x20the\x20following\x20commands:\x0a','reject','/:bot/support','build2','getMinutes','apply','login\x20required','storeConfiguration','\x20>\x20','temporaryAccessAllowed','sortBy','telegramUsername','slice','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','store-settings','whitelistEnabled','stopped','idling\x20bot\x20\x20\x20|\x20Bot\x20','publicKey','removeAllListeners','Notifications\x20enabled\x0a','emitHistory','existsSync','store','conn','includes','/:bot/coins','accept','127.0.0.1','enabled\x20Bot\x20','196585svEdPN','restart','connection','logged\x20out','password','telegramToken','Notifications\x20types:\x20','push','bb/','clients','answerCallbackQuery','lowdb','stopPolling','jsonwebtoken','Balance\x20Bot','Alerts','\x20minutes','Unauthorized\x20login\x20attempt\x20(timeout)','settings','Unauthorized\x20attempt\x20to\x20update\x20settings','Orders','find','sendMessage','loginRequired','lowdb/adapters/FileSync','pidExpireLogin','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','config/','/off\x20-\x20stop\x20bot(s)\x0a','clientip','getTime','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','send','get','HTML','disabled','get-starting-balances','showname','sign','host','all','RSA-OAEP','defaults','access\x20timeout','http','Unauthorized\x20attempt\x20to\x20store\x20configuration','getPortfolio','exp','inherit','Access\x20enabled\x20for\x20','analytics','invalid\x20credentials'];_0x1125=function(){return _0x25b895;};return _0x1125();}function initClient(_0x30c111){const _0x4fce63=_0x1d79fc;if(_0x30c111!=_0x4fce63(0x12c)&&config[_0x4fce63(0x11c)]!=''){if(pid[_0x30c111])pid[_0x30c111][_0x4fce63(0x177)]({'function':_0x4fce63(0x21d),'args':null});}}function getSocket(_0x5e446e){const _0x5c9b88=_0x1d79fc;return io[_0x5c9b88(0x23a)][_0x5c9b88(0x23a)][_0x5c9b88(0x178)](_0x5e446e);}function setAccess(_0x76f229){const _0x2ec50e=_0x1d79fc,_0x4a7598=getSocket(_0x76f229['id']),_0x265f05=_0x76f229[_0x2ec50e(0x19d)],_0x1334d8=_0x76f229['bot'];devices[_0x265f05][_0x2ec50e(0x199)]=validateAccess(devices[_0x265f05][_0x2ec50e(0x199)]['token'],_0x265f05),_0x4a7598[_0x2ec50e(0x222)](_0x265f05);if(devices[_0x265f05][_0x2ec50e(0x199)][_0x2ec50e(0x19e)]){_0x4a7598[_0x2ec50e(0x222)](_0x1334d8);if(_0x1334d8=='botmanager')initializeSocketBotManager(_0x4a7598);else initializeSocketBot(_0x4a7598);initClient(_0x1334d8);}devices[_0x265f05][_0x2ec50e(0x199)][_0x2ec50e(0x1d5)]&&devices[_0x265f05][_0x2ec50e(0x199)][_0x2ec50e(0x1df)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x2ec50e(0x1f0),_0x265f05),devices[_0x265f05]['access'][_0x2ec50e(0x1d5)]&&devices[_0x265f05][_0x2ec50e(0x199)][_0x2ec50e(0x1df)]==_0x2ec50e(0x1f6)&&setSessionTimeout('login',_0x265f05),_0x4a7598[_0x2ec50e(0x225)]('status',{'status':_0x76f229[_0x2ec50e(0x192)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x265f05]['access'],'externalip':devices[_0x265f05]['ip'],'publicKey':secure[_0x2ec50e(0x14b)]}),devices[_0x265f05][_0x2ec50e(0x199)]['allow']==![]&&devices[_0x265f05][_0x2ec50e(0x199)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x265f05,devices[_0x265f05]['ip']);}function setSessionTimeout(_0x105eb7,_0x145f8a){const _0x1f8fc4=_0x1d79fc;let _0x394de5;if(_0x105eb7==_0x1f8fc4(0x21b))_0x394de5=loginExpiry*0x3c*0x3e8;else _0x394de5=devices[_0x145f8a][_0x1f8fc4(0x1b7)][_0x1f8fc4(0x213)]*0x3c*0x3e8-(new Date()[_0x1f8fc4(0x175)]()-devices[_0x145f8a][_0x1f8fc4(0x1b7)][_0x1f8fc4(0x1cf)]);if(devices[_0x145f8a][_0x1f8fc4(0x170)])clearTimeout(devices[_0x145f8a][_0x1f8fc4(0x170)]);devices[_0x145f8a][_0x1f8fc4(0x170)]=setTimeout(()=>{const _0x9ea0ad=_0x1f8fc4;if(devices[_0x145f8a][_0x9ea0ad(0x1ae)])clearTimeout(devices[_0x145f8a]['pidRefreshToken']);removeSocketListeners(_0x145f8a),addBlacklist(_0x145f8a),devices[_0x145f8a]['telegramIpApproval']=null,devices[_0x145f8a][_0x9ea0ad(0x1c2)]=null,devices[_0x145f8a][_0x9ea0ad(0x199)][_0x9ea0ad(0x1d5)]=null,devices[_0x145f8a][_0x9ea0ad(0x199)]=validateAccess(devices[_0x145f8a][_0x9ea0ad(0x199)][_0x9ea0ad(0x1d5)],_0x145f8a),!(devices[_0x145f8a][_0x9ea0ad(0x199)][_0x9ea0ad(0x19e)]&&devices[_0x145f8a][_0x9ea0ad(0x199)][_0x9ea0ad(0x1df)]==_0x9ea0ad(0x224))&&(_0x105eb7==_0x9ea0ad(0x21b)?io['to'](_0x145f8a)['emit']('status',{'access':{'allow':![],'reason':_0x9ea0ad(0x182),'token':null}}):io['to'](_0x145f8a)[_0x9ea0ad(0x225)](_0x9ea0ad(0x1ea),{'access':{'allow':![],'reason':_0x9ea0ad(0x1b4),'token':null}})),devices[_0x145f8a][_0x9ea0ad(0x199)][_0x9ea0ad(0x1d5)]=null;},_0x394de5);}function setTokenRefresh(_0x2d94a1){const _0x3c043b=_0x1d79fc;if(devices[_0x2d94a1][_0x3c043b(0x1ae)])clearTimeout(devices[_0x2d94a1][_0x3c043b(0x1ae)]);devices[_0x2d94a1][_0x3c043b(0x1ae)]=setTimeout(()=>{const _0x5630d3=_0x3c043b;getClientsWithUuid(_0x2d94a1)[_0x5630d3(0x12a)]!=0x0?(devices[_0x2d94a1][_0x5630d3(0x199)]=refreshToken(_0x2d94a1),io['to'](_0x2d94a1)[_0x5630d3(0x225)](_0x5630d3(0x1ea),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2d94a1][_0x5630d3(0x199)],'externalip':devices[_0x2d94a1]['ip'],'publicKey':secure[_0x5630d3(0x14b)]}),setTokenRefresh(_0x2d94a1)):clearTimeout(devices[_0x2d94a1][_0x5630d3(0x1ae)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xf147c6){const _0x3d55b1=_0x1d79fc,_0x3fffb0=getClient(_0xf147c6['id'])[_0x3d55b1(0x19d)];_0xf147c6['emit'](_0x3d55b1(0x1fa),config),_0xf147c6[_0x3d55b1(0x225)](_0x3d55b1(0x169),cleanSettings()),_0xf147c6['on'](_0x3d55b1(0x1f3),_0x343f95=>{const _0x4f8586=_0x3d55b1;if(validateAccess(_0x343f95,_0x3fffb0)[_0x4f8586(0x19e)])addBot();else logging(_0x4f8586(0x12d));}),_0xf147c6['on'](_0x3d55b1(0x18b),(_0x5035d3,_0x1e9366)=>{const _0x92a170=_0x3d55b1;if(validateAccess(_0x1e9366,_0x3fffb0)[_0x92a170(0x19e)])toggleBot(_0x5035d3[_0x92a170(0x1e7)],_0x5035d3[_0x92a170(0x1ea)],_0x5035d3['live']);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0xf147c6['on']('delete-bot',(_0xc7883e,_0x239deb)=>{const _0x565cd4=_0x3d55b1;if(validateAccess(_0x239deb,_0x3fffb0)[_0x565cd4(0x19e)])deleteBot(_0xc7883e);else logging(_0x565cd4(0x219));}),_0xf147c6['on'](_0x3d55b1(0x147),(_0x30ffff,_0x32fa5a)=>{const _0x3b351e=_0x3d55b1;if(validateAccess(_0x32fa5a,_0x3fffb0)[_0x3b351e(0x19e)])storeSettings(_0x30ffff,!![]);else logging(_0x3b351e(0x16a));}),_0xf147c6['on'](_0x3d55b1(0x216),(_0x358f1f,_0x30f786)=>{const _0x4795cd=_0x3d55b1;if(validateAccess(_0x30f786,_0x3fffb0)['allow'])updateBB();else logging(_0x4795cd(0x16a));}),_0xf147c6['on'](_0x3d55b1(0x102),_0x5ab621=>{const _0x4d2cce=_0x3d55b1;if(validateAccess(_0x5ab621,_0x3fffb0)[_0x4d2cce(0x19e)]){if(devices[_0x3fffb0]['pidRefreshToken'])clearTimeout(devices[_0x3fffb0][_0x4d2cce(0x1ae)]);if(devices[_0x3fffb0][_0x4d2cce(0x170)])clearTimeout(devices[_0x3fffb0][_0x4d2cce(0x170)]);removeSocketListeners(getClient(_0xf147c6['id'])[_0x4d2cce(0x19d)]),addBlacklist(_0x3fffb0),devices[_0x3fffb0]['telegramIpApproval']=null,devices[_0x3fffb0]['telegram2FaApproval']=null,devices[_0x3fffb0][_0x4d2cce(0x199)]['token']=null,io['to'](getClient(_0xf147c6['id'])[_0x4d2cce(0x19d)])[_0x4d2cce(0x225)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4d2cce(0x215));});}function initializeSocketBot(_0x25e37f){const _0x2f6065=_0x1d79fc,_0x4d4f50=getClient(_0x25e37f['id'])['bot'],_0x16f15b=getClient(_0x25e37f['id'])[_0x2f6065(0x19d)];_0x25e37f['on'](_0x2f6065(0x1fe),(_0x5c3475,_0x1c75c8)=>{const _0x459d23=_0x2f6065;if(validateAccess(_0x1c75c8,_0x16f15b)[_0x459d23(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0x459d23(0x177)]({'function':_0x459d23(0x14e),'args':_0x5c3475});}else logging(_0x459d23(0x1c7));}),_0x25e37f['on']('get-portfolio',(_0x762f1,_0x4b37f3)=>{const _0x48ca50=_0x2f6065;if(validateAccess(_0x4b37f3,_0x16f15b)[_0x48ca50(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0x48ca50(0x177)]({'function':_0x48ca50(0x185),'args':_0x762f1});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x25e37f['on'](_0x2f6065(0x194),(_0x908f9a,_0x52abf5)=>{const _0x5ccc71=_0x2f6065;if(validateAccess(_0x52abf5,_0x16f15b)[_0x5ccc71(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0x5ccc71(0x177)]({'function':_0x5ccc71(0x140),'args':_0x908f9a});}else logging(_0x5ccc71(0x184));}),_0x25e37f['on']('store-headless',(_0xe41111,_0x36e14f)=>{const _0x3e28ee=_0x2f6065;if(validateAccess(_0x36e14f,_0x16f15b)['allow']){if(pid[_0x4d4f50])pid[_0x4d4f50]['send']({'function':'storeHeadless','args':_0xe41111});}else logging(_0x3e28ee(0x1b6));}),_0x25e37f['on'](_0x2f6065(0x17b),_0x3826a8=>{const _0xbc1db2=_0x2f6065;if(validateAccess(_0x3826a8,_0x16f15b)[_0xbc1db2(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0xbc1db2(0x177)]({'function':'getStartingBalances','args':null});}else logging(_0xbc1db2(0x146));}),_0x25e37f['on'](_0x2f6065(0x1fb),(_0x189f6c,_0x52f5f6)=>{const _0x58348d=_0x2f6065;if(validateAccess(_0x52f5f6,_0x16f15b)[_0x58348d(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0x58348d(0x177)]({'function':'placeOrder','args':_0x189f6c});}else logging(_0x58348d(0x204));}),_0x25e37f['on'](_0x2f6065(0x134),_0x45daca=>{const _0x4c7cea=_0x2f6065;if(validateAccess(_0x45daca,_0x16f15b)[_0x4c7cea(0x19e)]){if(pid[_0x4d4f50])pid[_0x4d4f50][_0x4c7cea(0x177)]({'function':_0x4c7cea(0x11b),'args':null});}else logging(_0x4c7cea(0x176));}),_0x25e37f['on'](_0x2f6065(0x102),_0xf13f66=>{const _0x137405=_0x2f6065;if(validateAccess(_0xf13f66,_0x16f15b)['allow']){if(devices[_0x16f15b][_0x137405(0x1ae)])clearTimeout(devices[_0x16f15b]['pidRefreshToken']);if(devices[_0x16f15b][_0x137405(0x170)])clearTimeout(devices[_0x16f15b][_0x137405(0x170)]);removeSocketListeners(getClient(_0x25e37f['id'])['uuid']),addBlacklist(_0x16f15b),devices[_0x16f15b][_0x137405(0x1b7)]=null,devices[_0x16f15b]['telegram2FaApproval']=null,devices[_0x16f15b][_0x137405(0x199)][_0x137405(0x1d5)]=null,io['to'](getClient(_0x25e37f['id'])['uuid'])[_0x137405(0x225)]('status',{'access':{'allow':![],'reason':_0x137405(0x15a),'token':null}});}else logging(_0x137405(0x215));});}function removeSocketListeners(_0x5069ed){getClientsWithUuid(_0x5069ed)['forEach'](_0x19c0b7=>{const _0x143496=_0x30d6;getSocket(_0x19c0b7['id'])[_0x143496(0x14c)]();});}function cleanSettings(){const _0x488550=_0x1d79fc;let _0x3c6085=settings;return settings[_0x488550(0x15c)]&&settings[_0x488550(0x15c)]!=''&&(_0x3c6085={..._0x3c6085,'telegramToken':_0x488550(0x11a)}),settings[_0x488550(0x128)]&&settings[_0x488550(0x128)]!=''&&(_0x3c6085={..._0x3c6085,'bbPassword':_0x488550(0x11a)}),_0x3c6085;}function updateBB(){const _0x28f9a9=_0x1d79fc;process[_0x28f9a9(0x177)]({'update':!![]},_0x200945=>{});}function startBot(_0x9e9311,_0x41c612,_0x240de8){const _0x3793fa=_0x1d79fc;let _0x5c34d7=![];const _0x3a66af=_0x9e9311[0x0];_0x41c612={..._0x41c612,'stdio':[_0x3793fa(0x187),_0x3793fa(0x187),_0x3793fa(0x187),'ipc']},pid[_0x3a66af]=childProcess[_0x3793fa(0x1c9)](botfile,_0x9e9311,_0x41c612),pid[_0x3a66af]['on'](_0x3793fa(0x1bb),_0xff454d=>{const _0x5d3af8=_0x3793fa;switch(Object[_0x5d3af8(0x234)](_0xff454d)[0x0]){case _0x5d3af8(0x198):updateBotName(_0x3a66af,_0xff454d[_0x5d3af8(0x198)]);break;case _0x5d3af8(0x1ea):updateStatus(_0x3a66af,_0xff454d[_0x5d3af8(0x1ea)]);break;case _0x5d3af8(0x138):updateLive(_0x3a66af,_0xff454d[_0x5d3af8(0x138)]);break;case'started':updateLive(_0x3a66af,_0xff454d[_0x5d3af8(0x191)]),io['to'](_0x3a66af)[_0x5d3af8(0x225)]('status',{'access':{'allow':![],'reason':_0x5d3af8(0x1e0),'token':null}});break;case'stop':_0xff454d[_0x5d3af8(0x100)]==_0x5d3af8(0x158)&&stopBot(_0x3a66af);_0xff454d[_0x5d3af8(0x100)]==_0x5d3af8(0x19c)&&toggleBot(_0x3a66af,_0x5d3af8(0x17a),_0x5d3af8(0x149));break;case _0x5d3af8(0x1c1):sendTelegram(_0x3a66af,_0xff454d[_0x5d3af8(0x1c1)]);break;case _0x5d3af8(0x1f7):io['to'](_0x3a66af)['emit'](_0xff454d[_0x5d3af8(0x1f7)],_0xff454d['args']);break;}}),pid[_0x3a66af]['on'](_0x3793fa(0x20c),function(_0x40e656){if(_0x5c34d7)return;_0x5c34d7=!![],_0x240de8(_0x40e656);}),pid[_0x3a66af]['on'](_0x3793fa(0x1f9),function(_0x3359ad){const _0x1c736c=_0x3793fa;if(_0x5c34d7)return;_0x5c34d7=!![],_0x240de8(null);const _0x33a31d=dbConfig[_0x1c736c(0x178)](_0x1c736c(0x1fa))[_0x1c736c(0x16c)]({'botID':_0x3a66af})['value']();_0x33a31d&&(_0x33a31d['status']==_0x1c736c(0xfc)||_0x33a31d[_0x1c736c(0x1ea)]==_0x1c736c(0x1d6))&&(updateLive(_0x3a66af,'stopped'),logging(_0x1c736c(0xf6)+_0x3a66af),startBot([_0x3a66af,userID],{'cwd':bbpath},function(_0x2de4ba){if(_0x2de4ba)logging(_0x2de4ba);}));});}function stopBot(_0x32a48c){getClientsWithBotID(_0x32a48c)['forEach'](_0x28e634=>{const _0x4a82c3=_0x30d6;getSocket(_0x28e634['id'])[_0x4a82c3(0x101)](!![]),removeClient(_0x28e634['id']);});if(pid[_0x32a48c])pid[_0x32a48c]['kill']();}function addBot(){const _0xd5a808=_0x1d79fc;let _0x3b7c4e;for(let _0x135506=0x1;_0x135506<0x3e9;_0x135506++){_0x3b7c4e=_0x135506[_0xd5a808(0x220)]()['padStart'](0x3,'0');let _0x17bda8=config['find'](_0x395525=>_0x395525['botID']==_0x3b7c4e);if(!_0x17bda8)break;}if(_0x3b7c4e==='1000'){logging(_0xd5a808(0x120));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x3b7c4e),dbConfig[_0xd5a808(0x178)](_0xd5a808(0x1fa))['push']({'botID':_0x3b7c4e,'botname':_0xd5a808(0x210)+_0x3b7c4e,'status':'new','live':''})[_0xd5a808(0xfd)](),startBot([_0x3b7c4e,userID],{'cwd':bbpath},function(_0x184818){if(_0x184818)logging(_0x184818);}),config=getConfiguration(),io['to'](_0xd5a808(0x12c))[_0xd5a808(0x225)](_0xd5a808(0x1fa),config);}function deleteBot(_0xc1befc){const _0x4570f6=_0x1d79fc;getClientsWithBotID(_0xc1befc)[_0x4570f6(0x197)](_0x56148f=>{getSocket(_0x56148f['id'])['disconnect'](!![]),removeClient(_0x56148f['id']);}),dbConfig['get'](_0x4570f6(0x1fa))[_0x4570f6(0x223)]({'botID':_0xc1befc})[_0x4570f6(0xfd)](),logging('deleted\x20Bot\x20'+_0xc1befc),stopBot(_0xc1befc);try{fs['unlinkSync'](path[_0x4570f6(0x222)](configpath,_0x4570f6(0x1be)+_0xc1befc+_0x4570f6(0x1b8))),fs[_0x4570f6(0x18e)](path[_0x4570f6(0x222)](configpath,_0x4570f6(0x1be)+_0xc1befc+'-events.json')),fs['unlinkSync'](path[_0x4570f6(0x222)](configpath,'bot-'+_0xc1befc+'-performance.json')),fs[_0x4570f6(0x18e)](path['join'](configpath,_0x4570f6(0x1be)+_0xc1befc+_0x4570f6(0x10b)));}catch(_0x28a9f1){if(_0x28a9f1)logging(_0x4570f6(0x131),_0x28a9f1);}config=getConfiguration(),io['to'](_0x4570f6(0x12c))[_0x4570f6(0x225)](_0x4570f6(0x1fa),config);}function toggleBot(_0x2432a9,_0x1bd082,_0x227793){const _0x14132f=_0x1d79fc;dbConfig['get'](_0x14132f(0x1fa))[_0x14132f(0x16c)]({'botID':_0x2432a9})[_0x14132f(0x115)]({'status':_0x1bd082})['assign']({'live':_0x227793})[_0x14132f(0xfd)]();if(_0x1bd082==_0x14132f(0xfc)||_0x1bd082==_0x14132f(0x1d6))logging(_0x14132f(0x156)+_0x2432a9),startBot([_0x2432a9,userID],{'cwd':bbpath},function(_0x195de0){if(_0x195de0)logging(_0x195de0);});else(_0x1bd082==_0x14132f(0x17a)||_0x1bd082==_0x14132f(0x123))&&(logging(_0x14132f(0x235)+_0x2432a9),stopBot(_0x2432a9));config=getConfiguration(),io['to'](_0x14132f(0x12c))[_0x14132f(0x225)]('bots',config);}function toggleStatus(_0x33133a){const _0x24b473=_0x1d79fc;let _0x549325=dbConfig['get'](_0x24b473(0x1fa))['find']({'botID':_0x33133a})['value'](),_0x43ef7c;if(_0x549325['status']===_0x24b473(0xfc))_0x43ef7c='disabled';else{if(_0x549325[_0x24b473(0x1ea)]===_0x24b473(0x1d6))_0x43ef7c=_0x24b473(0x123);else{if(_0x549325[_0x24b473(0x1ea)]===_0x24b473(0x123))_0x43ef7c=_0x24b473(0x1d6);else{if(_0x549325[_0x24b473(0x1ea)]===_0x24b473(0x17a))_0x43ef7c=_0x24b473(0xfc);}}}return _0x43ef7c;}function updateStatus(_0xad4d8f,_0x4e2855){const _0x568685=_0x1d79fc;dbConfig[_0x568685(0x178)](_0x568685(0x1fa))[_0x568685(0x16c)]({'botID':_0xad4d8f})[_0x568685(0x115)]({'status':_0x4e2855})[_0x568685(0xfd)](),config=getConfiguration(),io['to'](_0x568685(0x12c))['emit'](_0x568685(0x1fa),config);}function updateLive(_0x33f0b3,_0x33282e){const _0x5538de=_0x1d79fc;dbConfig[_0x5538de(0x178)](_0x5538de(0x1fa))['find']({'botID':_0x33f0b3})[_0x5538de(0x115)]({'live':_0x33282e})[_0x5538de(0xfd)](),config=getConfiguration(),io['to'](_0x5538de(0x12c))[_0x5538de(0x225)](_0x5538de(0x1fa),config);}function updateBotName(_0x481401,_0x52d24b){const _0x326338=_0x1d79fc;dbConfig['get'](_0x326338(0x1fa))[_0x326338(0x16c)]({'botID':_0x481401})[_0x326338(0x115)]({'botname':_0x52d24b})[_0x326338(0xfd)](),config=getConfiguration(),io['to'](_0x326338(0x12c))[_0x326338(0x225)](_0x326338(0x1fa),config);}function telegramError(_0x5e9656){const _0x14d771=_0x1d79fc;console['log'](getTimeStamp()+_0x14d771(0x132));}function validateTelegram(_0x503aad){const _0x10bc29=_0x1d79fc;if(_0x503aad['from']['username']!=settings[_0x10bc29(0x144)]&&'@'+_0x503aad['from'][_0x10bc29(0x11d)]!=settings[_0x10bc29(0x144)])return tgBot[_0x10bc29(0x16d)](_0x503aad[_0x10bc29(0xf7)]['id'],_0x10bc29(0x171),{'parse_mode':_0x10bc29(0x179)})[_0x10bc29(0x1d0)](_0x4f208a=>{telegramError(_0x4f208a);}),![];return!![];}async function initTelegram(){const _0x365b35=_0x1d79fc;if(tgBot)tgBot[_0x365b35(0x163)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x365b35(0x15c)],{'polling':!![]});let _0x411d91=_0x365b35(0x139);_0x411d91+='\x0a',_0x411d91+='/enable\x20-\x20enable\x20notifications\x0a',_0x411d91+=_0x365b35(0x1e5),_0x411d91+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x411d91+=_0x365b35(0x125),_0x411d91+='/on\x20-\x20start\x20bot(s)\x0a',_0x411d91+=_0x365b35(0x173),_0x411d91+=_0x365b35(0x114),_0x411d91+=_0x365b35(0x1fc);let _0x2e08e1=_0x365b35(0x1a6);_0x2e08e1+='\x0a',_0x2e08e1+=_0x411d91,tgBot['onText'](/\/start/,_0x32e64d=>{const _0x135f40=_0x365b35;if(!validateTelegram(_0x32e64d))return;if(settings[_0x135f40(0x200)]!=_0x32e64d[_0x135f40(0xf7)]['id'])updateSetting('telegramChatId',_0x32e64d[_0x135f40(0xf7)]['id']);updateSetting(_0x135f40(0x1db),!![]),tgBot['sendMessage'](_0x32e64d['chat']['id'],_0x2e08e1)[_0x135f40(0x1d0)](_0x4a5940=>{telegramError(_0x4a5940);});}),tgBot[_0x365b35(0x1fd)](/\/enable/,_0x5f46ac=>{const _0x1e8c66=_0x365b35;if(!validateTelegram(_0x5f46ac))return;if(settings[_0x1e8c66(0x200)]!=_0x5f46ac[_0x1e8c66(0xf7)]['id'])updateSetting(_0x1e8c66(0x200),_0x5f46ac['chat']['id']);updateSetting(_0x1e8c66(0x1db),!![]),tgBot[_0x1e8c66(0x16d)](_0x5f46ac['chat']['id'],_0x1e8c66(0x1cc))['catch'](_0x505507=>{telegramError(_0x505507);});}),tgBot[_0x365b35(0x1fd)](/\/config/,async _0x396e84=>{const _0x3457fe=_0x365b35;if(!validateTelegram(_0x396e84))return;tgBot['removeListener'](_0x3457fe(0x238)),tgBot[_0x3457fe(0x16d)](_0x396e84[_0x3457fe(0xf7)]['id'],_0x3457fe(0x1e2),{'reply_markup':{'inline_keyboard':[[{'text':_0x3457fe(0x16b),'callback_data':_0x3457fe(0x231)},{'text':_0x3457fe(0x166),'callback_data':'alerts'},{'text':_0x3457fe(0x1d3),'callback_data':'all'}]]}})['catch'](_0x41d4c8=>{telegramError(_0x41d4c8);}),tgBot['on'](_0x3457fe(0x238),async _0x157992=>{const _0x43ceb2=_0x3457fe,_0x1b002c=_0x157992[_0x43ceb2(0x1d7)],_0x3d497e=_0x157992['message'];tgBot[_0x43ceb2(0x161)](_0x157992['id'])[_0x43ceb2(0x230)](async()=>{const _0x57991c=_0x43ceb2;_0x1b002c==_0x57991c(0x231)&&(updateSetting(_0x57991c(0x21c),_0x57991c(0x231)),updateSetting(_0x57991c(0x1db),!![]),await tgBot[_0x57991c(0x16d)](_0x3d497e[_0x57991c(0xf7)]['id'],_0x57991c(0x124))['catch'](_0x11a1a9=>{telegramError(_0x11a1a9);}));_0x1b002c==_0x57991c(0x22e)&&(updateSetting(_0x57991c(0x21c),_0x57991c(0x22e)),updateSetting('telegramEnabled',!![]),await tgBot[_0x57991c(0x16d)](_0x3d497e['chat']['id'],_0x57991c(0x11f))['catch'](_0x2e2812=>{telegramError(_0x2e2812);}));_0x1b002c==_0x57991c(0x17f)&&(updateSetting('telegramEvents','all'),updateSetting(_0x57991c(0x1db),!![]),await tgBot['sendMessage'](_0x3d497e['chat']['id'],_0x57991c(0x1ef))[_0x57991c(0x1d0)](_0x3e8947=>{telegramError(_0x3e8947);}));if(!settings[_0x57991c(0x200)])tgBot[_0x57991c(0x16d)](_0x3d497e[_0x57991c(0xf7)]['id'],_0x57991c(0x21e))[_0x57991c(0x1d0)](_0x308f23=>{telegramError(_0x308f23);});}),tgBot[_0x43ceb2(0x1ac)](_0x43ceb2(0x238));});}),tgBot['onText'](/\/status/,_0x1a0b45=>{const _0x39cdf3=_0x365b35;if(!validateTelegram(_0x1a0b45))return;let _0x33e1bd=_0x39cdf3(0x12b);config[_0x39cdf3(0x197)](_0x4e5c0f=>{const _0x5de046=_0x39cdf3;_0x33e1bd+=_0x5de046(0x210)+_0x4e5c0f[_0x5de046(0x1e7)]+_0x5de046(0x228)+_0x4e5c0f[_0x5de046(0x198)]+':\x20'+_0x4e5c0f['status']+_0x5de046(0x104)+_0x4e5c0f[_0x5de046(0x138)]+'\x0a';}),_0x33e1bd+='\x0a',_0x33e1bd+=_0x39cdf3(0x1ab),_0x33e1bd+=!settings[_0x39cdf3(0x1db)]?_0x39cdf3(0x1b3):_0x39cdf3(0x14d),_0x33e1bd+=settings[_0x39cdf3(0x1db)]?settings[_0x39cdf3(0x21c)]==_0x39cdf3(0x17f)?_0x39cdf3(0xf4):_0x39cdf3(0x15d)+settings[_0x39cdf3(0x21c)]+'\x20only\x0a':'',tgBot[_0x39cdf3(0x16d)](_0x1a0b45['chat']['id'],_0x33e1bd,{'parse_mode':_0x39cdf3(0x179)})['catch'](_0xb8f39c=>{telegramError(_0xb8f39c);});}),tgBot['onText'](/\/restart/,_0x5e7ce8=>{const _0x2cebc1=_0x365b35;if(!validateTelegram(_0x5e7ce8))return;tgBot[_0x2cebc1(0x1ac)]('callback_query');const _0x5bf950=getEnabledBots();if(_0x5bf950['length']==0x0)tgBot[_0x2cebc1(0x16d)](_0x5e7ce8['chat']['id'],_0x2cebc1(0xf8))[_0x2cebc1(0x1d0)](_0x3de011=>{telegramError(_0x3de011);});else{if(_0x5bf950[_0x2cebc1(0x12a)]>0x1)_0x5bf950[_0x2cebc1(0x15e)]({'botID':_0x2cebc1(0x17f)});let _0xefb16=[],_0x59a8c4=[];const _0x164cf4=_0x5bf950[_0x2cebc1(0x12a)]%0x4==0x0||_0x5bf950[_0x2cebc1(0x12a)]%0x4==0x3||_0x5bf950[_0x2cebc1(0x12a)]%0x3==0x1?0x4:0x3;let _0x101d01=0x0;_0x5bf950[_0x2cebc1(0x197)]((_0x4f936,_0x426c66)=>{const _0x249ef7=_0x2cebc1;if(_0x426c66%_0x164cf4==0x0)_0x59a8c4=[];_0x59a8c4[_0x249ef7(0x15e)]({'text':_0x4f936[_0x249ef7(0x1e7)]==_0x249ef7(0x17f)?_0x249ef7(0x10a):_0x249ef7(0x210)+_0x4f936[_0x249ef7(0x1e7)],'callback_data':_0x4f936[_0x249ef7(0x1e7)]}),_0x426c66%_0x164cf4==0x0&&(_0xefb16[_0x101d01]=_0x59a8c4,_0x101d01++);}),tgBot['sendMessage'](_0x5e7ce8[_0x2cebc1(0xf7)]['id'],_0x2cebc1(0x190),{'reply_markup':{'inline_keyboard':_0xefb16}})[_0x2cebc1(0x1d0)](_0x4a95f9=>{telegramError(_0x4a95f9);}),tgBot['on'](_0x2cebc1(0x238),async _0xdefee1=>{const _0x742d0f=_0x2cebc1,_0xf3c22=_0xdefee1[_0x742d0f(0x1d7)],_0x43a338=_0xdefee1[_0x742d0f(0x1bb)];tgBot[_0x742d0f(0x161)](_0xdefee1['id'])[_0x742d0f(0x230)](async()=>{const _0xeda58e=_0x742d0f;if(_0xf3c22=='all'){if(settings[_0xeda58e(0x21c)]==_0xeda58e(0x231))tgBot[_0xeda58e(0x16d)](_0x43a338['chat']['id'],_0xeda58e(0x1c8))[_0xeda58e(0x1d0)](_0x586e78=>{telegramError(_0x586e78);});config[_0xeda58e(0x197)](_0x449c1c=>{stopBot(_0x449c1c['botID']);});}else{if(settings[_0xeda58e(0x21c)]=='orders')tgBot['sendMessage'](_0x43a338[_0xeda58e(0xf7)]['id'],_0xeda58e(0x1e8)+_0xf3c22)[_0xeda58e(0x1d0)](_0x8ee393=>{telegramError(_0x8ee393);});stopBot(_0xf3c22);}}),tgBot[_0x742d0f(0x1ac)]('callback_query');});}}),tgBot[_0x365b35(0x1fd)](/\/on/,_0x109bbd=>{const _0x51b673=_0x365b35;if(!validateTelegram(_0x109bbd))return;tgBot[_0x51b673(0x1ac)](_0x51b673(0x238));const _0x135d9e=getDisabledBots();if(_0x135d9e[_0x51b673(0x12a)]==0x0)tgBot[_0x51b673(0x16d)](_0x109bbd[_0x51b673(0xf7)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x3b4fc9=>{telegramError(_0x3b4fc9);});else{if(_0x135d9e[_0x51b673(0x12a)]>0x1)_0x135d9e[_0x51b673(0x15e)]({'botID':'all'});let _0x2ccd65=[],_0x379437=[];const _0x39965a=_0x135d9e[_0x51b673(0x12a)]%0x4==0x0||_0x135d9e[_0x51b673(0x12a)]%0x4==0x3||_0x135d9e[_0x51b673(0x12a)]%0x3==0x1?0x4:0x3;let _0x335684=0x0;_0x135d9e[_0x51b673(0x197)]((_0x5a3d28,_0x2df0bf)=>{const _0x28579e=_0x51b673;if(_0x2df0bf%_0x39965a==0x0)_0x379437=[];_0x379437[_0x28579e(0x15e)]({'text':_0x5a3d28[_0x28579e(0x1e7)]==_0x28579e(0x17f)?_0x28579e(0x10a):_0x28579e(0x210)+_0x5a3d28['botID'],'callback_data':_0x5a3d28['botID']}),_0x2df0bf%_0x39965a==0x0&&(_0x2ccd65[_0x335684]=_0x379437,_0x335684++);}),tgBot[_0x51b673(0x16d)](_0x109bbd[_0x51b673(0xf7)]['id'],_0x51b673(0x227),{'reply_markup':{'inline_keyboard':_0x2ccd65}})[_0x51b673(0x1d0)](_0x33869f=>{telegramError(_0x33869f);}),tgBot['on'](_0x51b673(0x238),async _0x5887b0=>{const _0x582223=_0x51b673,_0x46eafe=_0x5887b0[_0x582223(0x1d7)],_0x4b5491=_0x5887b0['message'];tgBot[_0x582223(0x161)](_0x5887b0['id'])[_0x582223(0x230)](async()=>{const _0x21be52=_0x582223;if(_0x46eafe=='all'){if(settings[_0x21be52(0x21c)]==_0x21be52(0x231))tgBot['sendMessage'](_0x4b5491[_0x21be52(0xf7)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x21be52(0x1d0)](_0x278089=>{telegramError(_0x278089);});_0x135d9e['forEach'](_0x5d776e=>{const _0x2a6871=_0x21be52;if(_0x5d776e[_0x2a6871(0x1e7)]!=_0x2a6871(0x17f))toggleBot(_0x5d776e['botID'],toggleStatus(_0x5d776e[_0x2a6871(0x1e7)]),_0x2a6871(0x149));});}else{if(settings[_0x21be52(0x21c)]==_0x21be52(0x231))tgBot[_0x21be52(0x16d)](_0x4b5491[_0x21be52(0xf7)]['id'],_0x21be52(0x22c)+_0x46eafe)[_0x21be52(0x1d0)](_0x256f0e=>{telegramError(_0x256f0e);});toggleBot(_0x46eafe,toggleStatus(_0x46eafe),_0x21be52(0x149));}}),tgBot[_0x582223(0x1ac)](_0x582223(0x238));});}}),tgBot[_0x365b35(0x1fd)](/\/off/,_0x1676e1=>{const _0xa8b9db=_0x365b35;if(!validateTelegram(_0x1676e1))return;tgBot['removeListener'](_0xa8b9db(0x238));const _0x281369=getEnabledBots();if(_0x281369[_0xa8b9db(0x12a)]==0x0)tgBot[_0xa8b9db(0x16d)](_0x1676e1[_0xa8b9db(0xf7)]['id'],_0xa8b9db(0xf8))['catch'](_0x5892a0=>{telegramError(_0x5892a0);});else{if(_0x281369['length']>0x1)_0x281369[_0xa8b9db(0x15e)]({'botID':_0xa8b9db(0x17f)});let _0x35e72f=[],_0x487dcc=[];const _0x274534=_0x281369[_0xa8b9db(0x12a)]%0x4==0x0||_0x281369[_0xa8b9db(0x12a)]%0x4==0x3||_0x281369['length']%0x3==0x1?0x4:0x3;let _0x495b5d=0x0;_0x281369['forEach']((_0x818ee3,_0x4cfc59)=>{const _0x2e97c8=_0xa8b9db;if(_0x4cfc59%_0x274534==0x0)_0x487dcc=[];_0x487dcc[_0x2e97c8(0x15e)]({'text':_0x818ee3['botID']==_0x2e97c8(0x17f)?_0x2e97c8(0x10a):_0x2e97c8(0x210)+_0x818ee3['botID'],'callback_data':_0x818ee3['botID']}),_0x4cfc59%_0x274534==0x0&&(_0x35e72f[_0x495b5d]=_0x487dcc,_0x495b5d++);}),tgBot['sendMessage'](_0x1676e1[_0xa8b9db(0xf7)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x35e72f}})[_0xa8b9db(0x1d0)](_0x14029b=>{telegramError(_0x14029b);}),tgBot['on']('callback_query',async _0x33e093=>{const _0x1fc2ae=_0xa8b9db,_0x58fb68=_0x33e093[_0x1fc2ae(0x1d7)],_0x550d4f=_0x33e093[_0x1fc2ae(0x1bb)];tgBot[_0x1fc2ae(0x161)](_0x33e093['id'])['then'](async()=>{const _0x47eef2=_0x1fc2ae;if(_0x58fb68==_0x47eef2(0x17f)){if(settings['telegramEvents']==_0x47eef2(0x231))tgBot[_0x47eef2(0x16d)](_0x550d4f[_0x47eef2(0xf7)]['id'],_0x47eef2(0x21a))[_0x47eef2(0x1d0)](_0x4ee34b=>{telegramError(_0x4ee34b);});_0x281369[_0x47eef2(0x197)](_0x350c6f=>{const _0x450f86=_0x47eef2;if(_0x350c6f[_0x450f86(0x1e7)]!=_0x450f86(0x17f))toggleBot(_0x350c6f[_0x450f86(0x1e7)],toggleStatus(_0x350c6f[_0x450f86(0x1e7)]),_0x450f86(0x149));});}else{if(settings[_0x47eef2(0x21c)]=='orders')tgBot[_0x47eef2(0x16d)](_0x550d4f[_0x47eef2(0xf7)]['id'],_0x47eef2(0xfe)+_0x58fb68)[_0x47eef2(0x1d0)](_0x1b0472=>{telegramError(_0x1b0472);});toggleBot(_0x58fb68,toggleStatus(_0x58fb68),_0x47eef2(0x149));}}),tgBot[_0x1fc2ae(0x1ac)](_0x1fc2ae(0x238));});}}),tgBot['onText'](/\/disable/,_0x273037=>{const _0x569864=_0x365b35;if(!validateTelegram(_0x273037))return;tgBot[_0x569864(0x16d)](_0x273037[_0x569864(0xf7)]['id'],'Notifications\x20disabled')[_0x569864(0x1d0)](_0x1cc347=>{telegramError(_0x1cc347);}),updateSetting(_0x569864(0x1db),![]);}),tgBot[_0x365b35(0x1fd)](/\/help/,_0x3ab66c=>{const _0x163a4a=_0x365b35;if(!validateTelegram(_0x3ab66c))return;tgBot[_0x163a4a(0x16d)](_0x3ab66c[_0x163a4a(0xf7)]['id'],_0x411d91)[_0x163a4a(0x1d0)](_0x47ffa9=>{telegramError(_0x47ffa9);});}),tgBot['on'](_0x365b35(0x1da),_0x3634d8=>{const _0xd43293=_0x365b35;_0x3634d8[_0xd43293(0x220)]()[_0xd43293(0x152)]('404\x20Not\x20Found')&&(logging(_0xd43293(0x1f5)),tgBot['stopPolling'](),tgBot=null,io['to'](_0xd43293(0x12c))[_0xd43293(0x225)](_0xd43293(0x1bd),'Invalid\x20Telegram\x20token'));}),process[_0x365b35(0x1c4)](_0x365b35(0x1b0),()=>{const _0x1b4a1f=_0x365b35;if(tgBot)tgBot[_0x1b4a1f(0x163)]();process['exit'](0x1);}),process[_0x365b35(0x1c4)](_0x365b35(0x1e1),()=>{const _0x4d3da5=_0x365b35;if(tgBot)tgBot['stopPolling']();process[_0x4d3da5(0x1f9)](0x1);});}}function disableTelegram(){const _0x523a75=_0x1d79fc;tgBot&&(tgBot[_0x523a75(0x163)](),tgBot=null);}function sendTelegram(_0x101778,_0x53e9a5){const _0x40c380=_0x1d79fc;if(settings[_0x40c380(0x1db)]){if(settings[_0x40c380(0x21c)]==_0x40c380(0x17f)||(_0x53e9a5[_0x40c380(0xf9)]==_0x40c380(0x20c)||_0x53e9a5[_0x40c380(0xf9)]==_0x40c380(0x11e))&&settings[_0x40c380(0x21c)]==_0x40c380(0x22e)||_0x53e9a5[_0x40c380(0xf9)]==_0x40c380(0x1e6)&&settings[_0x40c380(0x21c)]=='orders'){if(tgBot&&settings[_0x40c380(0x200)]){if(_0x53e9a5[_0x40c380(0x17c)])tgBot[_0x40c380(0x16d)](settings[_0x40c380(0x200)],_0x53e9a5[_0x40c380(0x198)]+_0x40c380(0x141)+_0x53e9a5[_0x40c380(0x232)])[_0x40c380(0x1d0)](_0x47189e=>{telegramError(_0x47189e);});else tgBot[_0x40c380(0x16d)](settings[_0x40c380(0x200)],_0x40c380(0x210)+_0x101778+'\x20>\x20'+_0x53e9a5['event'])['catch'](_0x135937=>{telegramError(_0x135937);});}}}}function getDeviceWithIp(_0x165152){const _0xfdf123=_0x1d79fc;return devices[_0xfdf123(0x16c)](_0x5618f9=>_0x5618f9['ip']===_0x165152);}function temporaryAccess2FA(_0x108037,_0x4b76c4){const _0x5549dd=_0x1d79fc;let _0x55fe6e=new Date(),_0x22f47c=![];if(lastIpApproval){if(_0x55fe6e-lastIpApproval<0x1388)_0x22f47c=!![];}lastIpApproval=new Date();if(_0x22f47c)return;tgBot&&settings[_0x5549dd(0x200)]&&(tgBot[_0x5549dd(0x1ac)](_0x5549dd(0x238)),tgBot[_0x5549dd(0x16d)](settings[_0x5549dd(0x200)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4b76c4)[_0x5549dd(0x113)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5549dd(0x212),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x5549dd(0x10c),'callback_data':'30'},{'text':_0x5549dd(0x13a),'callback_data':_0x5549dd(0x13a)}]]}})[_0x5549dd(0x1d0)](_0xe3d76=>{telegramError(_0xe3d76);}),tgBot['on']('callback_query',async _0x200d24=>{const _0x5a0edc=_0x5549dd,_0x49b05a=_0x200d24[_0x5a0edc(0x1d7)],_0x276dbb=_0x200d24['message'];tgBot[_0x5a0edc(0x161)](_0x200d24['id'])[_0x5a0edc(0x230)](async()=>{const _0x3d35e5=_0x5a0edc;devices[_0x108037][_0x3d35e5(0x1b7)]={'clientip':_0x4b76c4,'timestamp':new Date()[_0x3d35e5(0x175)](),'expiry':_0x49b05a},_0x49b05a!=_0x3d35e5(0x13a)?(await tgBot[_0x3d35e5(0x16d)](_0x276dbb[_0x3d35e5(0xf7)]['id'],_0x3d35e5(0x188)+_0x49b05a+_0x3d35e5(0x167),{'parse_mode':_0x3d35e5(0x179)})[_0x3d35e5(0x1d0)](_0x10758c=>{telegramError(_0x10758c);}),io['to'](_0x108037)[_0x3d35e5(0x225)]('status',{'access':{'allow':![],'reason':_0x3d35e5(0x1e0),'token':null}})):(await tgBot[_0x3d35e5(0x16d)](_0x276dbb[_0x3d35e5(0xf7)]['id'],_0x3d35e5(0x18c))[_0x3d35e5(0x1d0)](_0x61b52a=>{telegramError(_0x61b52a);}),io['to'](_0x108037)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x5a0edc(0x238));}));}function loginAccess2FA(_0x97a207,_0x44a5e8){const _0x56cdf1=_0x1d79fc;tgBot&&settings['telegramChatId']&&(tgBot[_0x56cdf1(0x1ac)](_0x56cdf1(0x238)),tgBot[_0x56cdf1(0x16d)](settings[_0x56cdf1(0x200)],_0x56cdf1(0x1ec)+normalizeIP(_0x44a5e8)['show']+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x56cdf1(0x154),'callback_data':loginExpiry},{'text':_0x56cdf1(0x13a),'callback_data':_0x56cdf1(0x13a)}]]}})[_0x56cdf1(0x1d0)](_0x3803e2=>{telegramError(_0x3803e2);}),tgBot['on'](_0x56cdf1(0x238),async _0x4c8755=>{const _0x2e1e1a=_0x56cdf1,_0x4f1af8=_0x4c8755[_0x2e1e1a(0x1d7)],_0xb86820=_0x4c8755[_0x2e1e1a(0x1bb)];tgBot[_0x2e1e1a(0x161)](_0x4c8755['id'])[_0x2e1e1a(0x230)](async()=>{const _0x126045=_0x2e1e1a;devices[_0x97a207][_0x126045(0x1c2)]={'clientip':_0x44a5e8,'timestamp':new Date()[_0x126045(0x175)](),'expiry':_0x4f1af8},_0x4f1af8!=_0x126045(0x13a)?(await tgBot['sendMessage'](_0xb86820[_0x126045(0xf7)]['id'],_0x126045(0x1c5),{'parse_mode':_0x126045(0x179)})['catch'](_0x43dd4c=>{telegramError(_0x43dd4c);}),io['to'](_0x97a207)[_0x126045(0x225)](_0x126045(0x1ea),{'access':{'allow':![],'reason':_0x126045(0x1e0),'token':null}})):(await tgBot[_0x126045(0x16d)](_0xb86820['chat']['id'],_0x126045(0x1a8))[_0x126045(0x1d0)](_0x111c30=>{telegramError(_0x111c30);}),io['to'](_0x97a207)[_0x126045(0x225)](_0x126045(0x1ea),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x2e1e1a(0x238));}));}function getConfiguration(){const _0x110c20=_0x1d79fc;return dbConfig['get'](_0x110c20(0x1fa))[_0x110c20(0x143)]('botID')[_0x110c20(0x203)]()||[];}function getEnabledBots(){const _0x26efdf=_0x1d79fc;return dbConfig['get'](_0x26efdf(0x1fa))[_0x26efdf(0x143)]('botID')['filter']({'status':_0x26efdf(0xfc)})[_0x26efdf(0x203)]()||[];}function getDisabledBots(){const _0x530441=_0x1d79fc;return dbConfig[_0x530441(0x178)](_0x530441(0x1fa))[_0x530441(0x143)]('botID')[_0x530441(0x206)]({'status':_0x530441(0x17a)})[_0x530441(0x203)]()||[];}function getSettings(){const _0x2f18b2=_0x1d79fc;return dbSettings[_0x2f18b2(0x178)](_0x2f18b2(0x169))[_0x2f18b2(0x203)]()||{'timeshift':0x0};}function getSecure(){const _0x4aa308=_0x1d79fc;return dbSecure[_0x4aa308(0x178)](_0x4aa308(0x127))['value']()||{};}function getBlacklist(){const _0x33ea8f=_0x1d79fc;return dbSecure[_0x33ea8f(0x178)](_0x33ea8f(0x1c3))['value']()||[];}function broadcastToBots(_0x43a61c,_0x415a78){config['forEach'](_0x45dcc0=>{const _0x142869=_0x30d6;if(_0x45dcc0[_0x142869(0x1ea)]==_0x142869(0xfc)&&_0x45dcc0[_0x142869(0x138)]==_0x142869(0x1d9)){if(pid[_0x45dcc0['botID']])pid[_0x45dcc0['botID']][_0x142869(0x177)]({[_0x43a61c]:_0x415a78});}});}function storeSettings(_0x159da3,_0x5842ce=![]){const _0xeb8d57=_0x1d79fc;_0x159da3={...settings,..._0x159da3};if(_0x5842ce&&_0x159da3[_0xeb8d57(0x128)]!=_0xeb8d57(0x11a)&&_0x159da3['bbPassword']!=''){const _0x237411=crypt['decrypt'](secure[_0xeb8d57(0x1af)],_0x159da3['bbPassword'])['message'][_0xeb8d57(0x1ca)]('@')[0x0],_0x1566ce=bcrypt[_0xeb8d57(0x208)](_0x237411,saltRounds);_0x159da3={..._0x159da3,'bbPassword':_0x1566ce};}if(_0x5842ce&&_0x159da3[_0xeb8d57(0x15c)]!=_0xeb8d57(0x11a)&&_0x159da3['telegramToken']!=''){const _0x5147b0=crypt[_0xeb8d57(0x211)](secure[_0xeb8d57(0x1af)],_0x159da3['telegramToken'])[_0xeb8d57(0x1bb)][_0xeb8d57(0x1ca)]('@')[0x0];_0x159da3={..._0x159da3,'telegramToken':_0x5147b0};}const _0x499782=_0x159da3[_0xeb8d57(0x15c)]!=_0xeb8d57(0x11a)&&_0x159da3[_0xeb8d57(0x15c)]!=settings['telegramToken']||_0x159da3['telegramUsername']!=settings[_0xeb8d57(0x144)],_0x4cd3f7=_0x159da3[_0xeb8d57(0x15c)]==''||_0x159da3[_0xeb8d57(0x144)]=='';if(_0x499782)_0x159da3[_0xeb8d57(0x21c)]=_0xeb8d57(0x17f);for(const [_0x40c0da,_0x2c7234]of Object[_0xeb8d57(0x1ba)](_0x159da3)){if(_0x40c0da==_0xeb8d57(0x15c)&&_0x2c7234==_0xeb8d57(0x11a)){_0x159da3[_0xeb8d57(0x15c)]=settings[_0xeb8d57(0x15c)];continue;};if(_0x40c0da==_0xeb8d57(0x128)&&_0x2c7234==_0xeb8d57(0x11a)){_0x159da3[_0xeb8d57(0x128)]=settings[_0xeb8d57(0x128)];continue;};dbSettings[_0xeb8d57(0x1f2)]('settings.'+_0x40c0da,_0x2c7234)[_0xeb8d57(0xfd)]();}settings=_0x159da3,io['to'](_0xeb8d57(0x12c))[_0xeb8d57(0x225)](_0xeb8d57(0x169),cleanSettings()),broadcastToBots(_0xeb8d57(0x1c6),settings[_0xeb8d57(0x1c6)]);if(_0x499782&&!_0x4cd3f7)initTelegram();if(_0x499782&&_0x4cd3f7)disableTelegram();getAllClients()[_0xeb8d57(0x197)](_0x52f86d=>{const _0x5373b4=_0xeb8d57;getSocket(_0x52f86d['id'])['emit'](_0x5373b4(0x1ea),{'access':{'allow':![],'reason':_0x5373b4(0x1e0),'token':null}});});}function updateSetting(_0x50c86e,_0x19aac5){const _0x439835=_0x1d79fc;dbSettings['set']('settings.'+_0x50c86e,_0x19aac5)['write'](),settings=getSettings(),io['to'](_0x439835(0x12c))[_0x439835(0x225)](_0x439835(0x169),cleanSettings());}function storeSecure(_0x4a0fe7){const _0x2414f4=_0x1d79fc;dbSecure['get'](_0x2414f4(0x127))[_0x2414f4(0x15e)](_0x4a0fe7)[_0x2414f4(0xfd)](),secure=_0x4a0fe7;}function addBlacklist(_0x58378b){const _0x1f3859=_0x1d79fc;cleanBlacklist();let _0x395629;devices[_0x58378b]['telegramIpApproval']?_0x395629=Math[_0x1f3859(0x1f1)](devices[_0x58378b][_0x1f3859(0x1b7)][_0x1f3859(0x213)],loginExpiry):_0x395629=loginExpiry,dbSecure[_0x1f3859(0x178)](_0x1f3859(0x1c3))['push']({'expiry':new Date()[_0x1f3859(0x175)]()+_0x395629*0x3c*0x3e8,'token':devices[_0x58378b][_0x1f3859(0x199)]['token']})['write'](),blacklist=dbSecure['get'](_0x1f3859(0x1c3))[_0x1f3859(0x203)]();}function cleanBlacklist(){const _0x32b6db=_0x1d79fc;let _0x37dd0f=dbSecure[_0x32b6db(0x178)]('blacklist')[_0x32b6db(0x1aa)]()['value'](),_0x5da6a7=new Date()[_0x32b6db(0x175)]();_0x37dd0f[_0x32b6db(0x197)](_0x8fcb6a=>{const _0x48a488=_0x32b6db;_0x8fcb6a[_0x48a488(0x213)]<_0x5da6a7&&dbSecure[_0x48a488(0x178)](_0x48a488(0x1c3))[_0x48a488(0x223)]({'expiry':_0x8fcb6a[_0x48a488(0x213)]})[_0x48a488(0xfd)]();});}function initStates(){const _0x39cb68=_0x1d79fc;let _0x39e228=getConfiguration();_0x39e228[_0x39cb68(0x197)](_0x5e5e75=>{const _0x9fd661=_0x39cb68;_0x5e5e75[_0x9fd661(0x138)]='stopped';}),storeConfiguration(_0x39e228);}function onKeys(){const _0x194d5a=new RSA();return new Promise(_0x2a47a9=>{const _0xce76ad=_0x30d6;_0x194d5a[_0xce76ad(0x121)]()[_0xce76ad(0x230)](_0x2081ee=>{_0x2a47a9(_0x2081ee);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x29f738=_0x1d79fc;let _0x3683e4=getConfiguration(),_0x4b2ff1=![];_0x3683e4[_0x29f738(0x197)](_0x2a56e7=>{const _0x3e51d7=_0x29f738;if(_0x2a56e7[_0x3e51d7(0x1ea)]=='running')_0x2a56e7[_0x3e51d7(0x1ea)]='enabled',_0x4b2ff1=!![];else _0x2a56e7['status']==_0x3e51d7(0x149)&&(_0x2a56e7[_0x3e51d7(0x1ea)]='disabled',_0x4b2ff1=!![]);});if(_0x4b2ff1)storeConfiguration(_0x3683e4);let _0x378e68=getSecure();if(!_0x378e68[_0x29f738(0x122)](_0x29f738(0x217))){let _0x2a567d=await generateKeys();_0x378e68[_0x29f738(0x14b)]=_0x2a567d['publicKey'],_0x378e68[_0x29f738(0x1af)]=_0x2a567d[_0x29f738(0x1af)],_0x378e68[_0x29f738(0x217)]=crypto[_0x29f738(0xf3)](0x20)[_0x29f738(0x220)](_0x29f738(0x1ce));;storeSecure(_0x378e68);}let _0x37fb10=getSettings();_0x4b2ff1=![];!_0x37fb10['hasOwnProperty'](_0x29f738(0x16e))&&(_0x37fb10[_0x29f738(0x16e)]=![],_0x37fb10[_0x29f738(0x1f4)]='',_0x37fb10[_0x29f738(0x128)]='',_0x37fb10[_0x29f738(0x18d)]=![],_0x4b2ff1=!![]);!_0x37fb10[_0x29f738(0x122)](_0x29f738(0x148))&&(_0x37fb10[_0x29f738(0x148)]=![],_0x37fb10[_0x29f738(0x20f)]=[],_0x37fb10[_0x29f738(0x142)]=![],_0x4b2ff1=!![]);if(!_0x37fb10[_0x29f738(0x122)](_0x29f738(0x1db))){if(_0x37fb10['telegramChatId'])_0x37fb10[_0x29f738(0x1db)]=!![];else _0x37fb10[_0x29f738(0x1db)]=![];_0x4b2ff1=!![];}if(_0x4b2ff1)storeSettings(_0x37fb10);}function storeConfiguration(_0x197796){const _0x451441=_0x1d79fc;dbConfig[_0x451441(0x178)](_0x451441(0x1fa))[_0x451441(0x223)]()[_0x451441(0xfd)](),dbConfig[_0x451441(0x178)](_0x451441(0x1fa))['push'](..._0x197796)[_0x451441(0xfd)](),config=_0x197796;}function resetPassword(){const _0xfd2b20=_0x1d79fc;tgBot&&settings[_0xfd2b20(0x200)]&&(tgBot[_0xfd2b20(0x1ac)](_0xfd2b20(0x238)),tgBot[_0xfd2b20(0x16d)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0xfd2b20(0x130),'callback_data':_0xfd2b20(0x130)},{'text':'no','callback_data':'no'}]]}})[_0xfd2b20(0x1d0)](_0x4add2c=>{telegramError(_0x4add2c);}),tgBot['on']('callback_query',async _0x512fe1=>{const _0x325496=_0xfd2b20,_0x1eb945=_0x512fe1['data'],_0x16866e=_0x512fe1[_0x325496(0x1bb)];tgBot[_0x325496(0x161)](_0x512fe1['id'])[_0x325496(0x230)](async()=>{const _0x3584c6=_0x325496;if(_0x1eb945!='no'){const _0x5551c3=0xf,_0x4608b6=_0x3584c6(0x1d1),_0xc4b301=Array[_0x3584c6(0x126)](crypto[_0x3584c6(0x1d4)](new Uint32Array(_0x5551c3)))['map'](_0x677e1c=>_0x4608b6[_0x677e1c%_0x4608b6[_0x3584c6(0x12a)]])[_0x3584c6(0x222)](''),_0x36e87d=bcrypt[_0x3584c6(0x208)](_0xc4b301,saltRounds);storeSettings({'bbPassword':_0x36e87d}),await tgBot[_0x3584c6(0x16d)](_0x16866e[_0x3584c6(0xf7)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0xc4b301,{'parse_mode':_0x3584c6(0x179)})[_0x3584c6(0x1d0)](_0x281805=>{telegramError(_0x281805);});}else await tgBot[_0x3584c6(0x16d)](_0x16866e['chat']['id'],_0x3584c6(0x226))[_0x3584c6(0x1d0)](_0x13bfe4=>{telegramError(_0x13bfe4);});}),tgBot[_0x325496(0x1ac)](_0x325496(0x238));}));}function logging(_0x20b5fd){const _0x172cf3=_0x1d79fc;console['log'](getTimeStamp()+_0x172cf3(0x221)+_0x20b5fd);if(tgBot&&settings[_0x172cf3(0x200)]&&settings[_0x172cf3(0x21c)]!='orders')tgBot[_0x172cf3(0x16d)](settings[_0x172cf3(0x200)],_0x172cf3(0x239)+_0x20b5fd)[_0x172cf3(0x1d0)](_0x314044=>{telegramError(_0x314044);});}function getServerTime(){const _0xae37ad=_0x1d79fc,_0x125679=new Date();return _0x125679[_0xae37ad(0x1bf)]()+'/'+(_0x125679['getMonth']()+0x1)[_0xae37ad(0x220)]()[_0xae37ad(0x1ed)](0x2,'0')+'/'+_0x125679[_0xae37ad(0x1a0)]()['toString']()[_0xae37ad(0x1ed)](0x2,'0')+'\x20'+_0x125679[_0xae37ad(0x1a2)]()[_0xae37ad(0x220)]()[_0xae37ad(0x1ed)](0x2,'0')+':'+_0x125679['getMinutes']()[_0xae37ad(0x220)]()[_0xae37ad(0x1ed)](0x2,'0')+':'+_0x125679['getSeconds']()[_0xae37ad(0x220)]()[_0xae37ad(0x1ed)](0x2,'0');}function _0x30d6(_0x413071,_0x27d2fc){const _0x2722db=_0x1125();return _0x30d6=function(_0x487179,_0x4f1bed){_0x487179=_0x487179-0xf2;let _0x11250c=_0x2722db[_0x487179];return _0x11250c;},_0x30d6(_0x413071,_0x27d2fc);}function getTimeStamp(){const _0x2d763d=_0x1d79fc,_0x43b64e=shiftedTime();return _0x43b64e[_0x2d763d(0x1bf)]()+'/'+(_0x43b64e['getMonth']()+0x1)[_0x2d763d(0x220)]()['padStart'](0x2,'0')+'/'+_0x43b64e[_0x2d763d(0x1a0)]()[_0x2d763d(0x220)]()[_0x2d763d(0x1ed)](0x2,'0')+'\x20'+_0x43b64e[_0x2d763d(0x1a2)]()[_0x2d763d(0x220)]()[_0x2d763d(0x1ed)](0x2,'0')+':'+_0x43b64e[_0x2d763d(0x13d)]()['toString']()[_0x2d763d(0x1ed)](0x2,'0')+':'+_0x43b64e['getSeconds']()[_0x2d763d(0x220)]()[_0x2d763d(0x1ed)](0x2,'0');}function shiftedTime(){const _0x54484f=_0x1d79fc,_0x54315d=new Date();let _0x1d24b7=_0x54315d;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x1d24b7=fns[_0x54484f(0x1dc)](_0x54315d,{'hours':settings[_0x54484f(0x1c6)]});return _0x1d24b7;}function startScheduler(){const _0x1a4d7b=_0x1d79fc;let _0x3f4a22=new Date()[_0x1a4d7b(0x12e)]();_0x3f4a22==0x1&&backupConfigFiles();_0x3f4a22==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x46a4a6=_0x1d79fc;fs[_0x46a4a6(0x18f)](configpath,{'withFileTypes':!![]})[_0x46a4a6(0x197)](_0x44f9cd=>{const _0x184f54=_0x46a4a6;if(!_0x44f9cd[_0x184f54(0x1bc)]())fs[_0x184f54(0x137)](configpath+_0x44f9cd['name'],configbackuppath+_0x44f9cd[_0x184f54(0x22b)]);});}function triggerAnalytics(){const _0x3d5582=_0x1d79fc;analytics[_0x3d5582(0x236)]({'title':_0x3d5582(0xf2),'href':_0x3d5582(0x1cb),'path':'/v'+serverversion});}function validateCredentials(_0x4ce68e,_0x18fe1d){const _0x4e1125=_0x1d79fc;if(_0x4ce68e[_0x4e1125(0x11d)]==settings[_0x4e1125(0x1f4)]&&bcrypt['compareSync'](_0x4ce68e[_0x4e1125(0x15b)],settings['bbPassword'])){if(settings[_0x4e1125(0x18d)])return{'allow':![],'reason':_0x4e1125(0x202),'token':null};else{const _0x2a7d5b=generateLoginToken(_0x18fe1d);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2a7d5b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x3cac2b){const _0xdfb01a=_0x1d79fc,_0x1f39df=generateLoginToken(_0x3cac2b);return{'allow':!![],'reason':_0xdfb01a(0x20b),'token':_0x1f39df};}function validateAccess(_0x1500d1,_0xe25102){const _0x5a3503=_0x1d79fc;let _0x10a4c5=devices[_0xe25102]['ip'],_0x1f3bcf;const _0x296bd0=_0x225d1c=>{const _0x101514=_0x30d6;if(settings[_0x101514(0x16e)]){if(settings[_0x101514(0x18d)]){if(telegram2FaApproved(_0xe25102)){const _0x216ced=generateLoginToken(_0xe25102);return{'allow':!![],'reason':_0x101514(0x1f6),'token':_0x216ced};}else return{'allow':![],'reason':_0x101514(0x13f),'token':null};}else return _0x1f3bcf=validToken(_0x225d1c,_0xe25102),_0x1f3bcf[_0x101514(0x122)](_0x101514(0x11e))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x225d1c}:{'allow':![],'reason':_0x101514(0x13f),'token':null};}else return{'allow':!![],'reason':_0x101514(0x224),'token':null};};if(settings[_0x5a3503(0x148)]){let _0x516c91=[...settings[_0x5a3503(0x20f)],_0x5a3503(0xff),'::ffff:127.0.0.1',_0x5a3503(0x155)];if(_0x516c91[_0x5a3503(0x152)](_0x10a4c5))return _0x296bd0(_0x1500d1);else{_0x1f3bcf=validToken(_0x1500d1,_0xe25102);if(_0x1f3bcf[_0x5a3503(0x122)]('success'))return _0x296bd0(_0x1500d1);else{if(telegramIpApproved(_0xe25102)){const _0x23723e=generateToken(_0xe25102);return _0x1f3bcf=_0x296bd0(_0x1500d1),_0x1f3bcf[_0x5a3503(0x19e)]?{'allow':!![],'reason':_0x5a3503(0x103),'token':_0x23723e}:_0x1f3bcf;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x5a3503(0x12f),'token':null}:{'allow':![],'reason':_0x5a3503(0x112),'token':null};}}}else return _0x296bd0(_0x1500d1);}function timelyDecrypt(_0xd284c5,_0x23552c=!![]){const _0x39dea7=_0x1d79fc;if(_0xd284c5)try{const _0x3ada25=crypt['decrypt'](secure[_0x39dea7(0x1af)],_0xd284c5)['message'],_0x453c45=_0x3ada25[_0x39dea7(0x1ca)]('@')[0x0],_0x191986=_0x3ada25[_0x39dea7(0x1ca)]('@')[0x1],_0x901148=new Date()[_0x39dea7(0x175)]();if(_0x23552c){if(_0x901148-_0x191986<maxSecretAge*0x3e8)return _0x453c45;else return![];}else return _0x453c45;}catch(_0x4e94eb){return![];}else return![];}const validToken=(_0x40cd57,_0x160470)=>{const _0xffccf0=_0x1d79fc,_0x48ae32=devices[_0x160470]['ip'];if(!_0x40cd57)return{'error':_0xffccf0(0x22a)};for(let _0x161649 of blacklist){if(_0x161649[_0xffccf0(0x1d5)]==_0x40cd57)return{'error':_0xffccf0(0x237)};}let _0x2c736a;try{_0x2c736a=jwt['verify'](_0x40cd57,secure[_0xffccf0(0x217)]+_0x160470);}catch{return{'error':_0xffccf0(0x20a)};}if(!_0x2c736a[_0xffccf0(0x122)]('clientip')&&!_0x2c736a[_0xffccf0(0x122)](_0xffccf0(0x11d))||!_0x2c736a[_0xffccf0(0x122)](_0xffccf0(0x186)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2c736a['hasOwnProperty'](_0xffccf0(0x11d))&&_0x2c736a[_0xffccf0(0x122)](_0xffccf0(0x174))){const {clientip:_0x12cab1}=_0x2c736a;return _0x48ae32==_0x12cab1?{'success':_0xffccf0(0x10d)}:{'error':_0xffccf0(0x135)};}else{if(_0x2c736a[_0xffccf0(0x122)]('username')&&_0x2c736a[_0xffccf0(0x122)](_0xffccf0(0x174))){const {username:_0x155552,clientip:_0x4d4c7f}=_0x2c736a;return settings[_0xffccf0(0x1f4)]==_0x155552&&_0x48ae32==_0x4d4c7f?{'success':_0xffccf0(0x10d)}:{'error':_0xffccf0(0xfb)};}}},generateLoginToken=_0x3fffaf=>{const _0x3ed5f6=_0x1d79fc;if(_0x3fffaf){const _0x34e5ae=devices[_0x3fffaf]['ip'];return jwt[_0x3ed5f6(0x17d)]({'username':settings[_0x3ed5f6(0x1f4)],'clientip':_0x34e5ae},secure[_0x3ed5f6(0x217)]+_0x3fffaf,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x44c2a7=>{const _0x51f4c8=_0x1d79fc;if(_0x44c2a7){const _0x3b6fef=devices[_0x44c2a7]['ip'];return jwt[_0x51f4c8(0x17d)]({'clientip':_0x3b6fef},secure[_0x51f4c8(0x217)]+_0x44c2a7,{'expiresIn':devices[_0x44c2a7][_0x51f4c8(0x1b7)][_0x51f4c8(0x213)]*0x3c});}else return![];},telegramIpApproved=_0x1b3abf=>{const _0x3a930a=_0x1d79fc;let _0x264939=![];return devices[_0x1b3abf]['telegramIpApproval']&&devices[_0x1b3abf][_0x3a930a(0x1b7)]['expiry']!='reject'&&(_0x264939=devices[_0x1b3abf]['telegramIpApproval'][_0x3a930a(0x174)]==devices[_0x1b3abf]['ip']&&new Date()[_0x3a930a(0x175)]()-devices[_0x1b3abf][_0x3a930a(0x1b7)][_0x3a930a(0x1cf)]<devices[_0x1b3abf][_0x3a930a(0x1b7)][_0x3a930a(0x213)]*0x3c*0x3e8),_0x264939;},telegram2FaApproved=_0x97f7d4=>{const _0x1279ef=_0x1d79fc;let _0xa2ee6b=![];return devices[_0x97f7d4][_0x1279ef(0x1c2)]&&devices[_0x97f7d4]['telegram2FaApproval'][_0x1279ef(0x213)]!=_0x1279ef(0x13a)&&(_0xa2ee6b=devices[_0x97f7d4][_0x1279ef(0x1c2)][_0x1279ef(0x174)]==devices[_0x97f7d4]['ip']&&new Date()[_0x1279ef(0x175)]()-devices[_0x97f7d4]['telegram2FaApproval']['timestamp']<devices[_0x97f7d4][_0x1279ef(0x1c2)][_0x1279ef(0x213)]*0x3c*0x3e8),_0xa2ee6b;},normalizeIP=_0x3d7c32=>{const _0x1bec52=_0x1d79fc;let _0x1a5953=null,_0x2b2168=null;if(ipaddr[_0x1bec52(0x1a7)](_0x3d7c32)){const _0x20182d=ipaddr['parse'](_0x3d7c32);_0x20182d['kind']()===_0x1bec52(0x1b5)?(_0x20182d[_0x1bec52(0xfa)]()&&(_0x1a5953=_0x20182d[_0x1bec52(0x10f)]()['toString']()),_0x2b2168=_0x20182d[_0x1bec52(0x220)]()):(_0x1a5953=_0x20182d['toString'](),_0x2b2168=_0x20182d[_0x1bec52(0x111)]()[_0x1bec52(0x220)]());}return{'show':_0x1a5953?_0x1a5953:_0x2b2168,'store':_0x2b2168};};