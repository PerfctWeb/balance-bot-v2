const _0x10741e=_0x4784;(function(_0x58bc07,_0x597fdb){const _0x11b106=_0x4784,_0x27c6fc=_0x58bc07();while(!![]){try{const _0x1577c5=-parseInt(_0x11b106(0x199))/0x1*(parseInt(_0x11b106(0x1ed))/0x2)+-parseInt(_0x11b106(0x24b))/0x3*(parseInt(_0x11b106(0x1d6))/0x4)+parseInt(_0x11b106(0x1f3))/0x5*(parseInt(_0x11b106(0x281))/0x6)+parseInt(_0x11b106(0x15d))/0x7+parseInt(_0x11b106(0x235))/0x8+parseInt(_0x11b106(0x1f4))/0x9+-parseInt(_0x11b106(0x1e5))/0xa*(parseInt(_0x11b106(0x263))/0xb);if(_0x1577c5===_0x597fdb)break;else _0x27c6fc['push'](_0x27c6fc['shift']());}catch(_0x249a18){_0x27c6fc['push'](_0x27c6fc['shift']());}}}(_0x2b40,0x54fa1));const _0x3ecc7b=function(){let _0x12bc5e=!![];return function(_0x472fb1,_0x1673ac){const _0xcd9de9=_0x12bc5e?function(){const _0x5965df=_0x4784;if(_0x1673ac){const _0x3cb382=_0x1673ac[_0x5965df(0x18b)](_0x472fb1,arguments);return _0x1673ac=null,_0x3cb382;}}:function(){};return _0x12bc5e=![],_0xcd9de9;};}(),_0x2ef8c4=_0x3ecc7b(this,function(){const _0x4eaf6e=_0x4784;return _0x2ef8c4['toString']()[_0x4eaf6e(0x19b)]('(((.+)+)+)+$')[_0x4eaf6e(0x210)]()[_0x4eaf6e(0x243)](_0x2ef8c4)[_0x4eaf6e(0x19b)](_0x4eaf6e(0x1c1));});_0x2ef8c4();'use strict';process['env'][_0x10741e(0x256)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x10741e(0x179)),fs=require('fs'),fns=require(_0x10741e(0x1ae)),low=require(_0x10741e(0x1f7)),path=require(_0x10741e(0x1aa)),crypto=require(_0x10741e(0x164)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x10741e(0x1cd))[_0x10741e(0x26a)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),analyticsLib=require(_0x10741e(0x25e))[_0x10741e(0x1cc)],googleAnalytics=require(_0x10741e(0x14c))['default'],ipaddr=require(_0x10741e(0x170)),argv=require(_0x10741e(0x1a1))(process[_0x10741e(0x1bd)]['slice'](0x2))['argv'],PORT=argv[_0x10741e(0x25b)]||_0x10741e(0x211),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x10741e(0x1a3)](PORT))return console[_0x10741e(0x1cb)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x10741e(0x222)](0x1);const HOST=argv['host']||null,userID=argv['user']||'';let bbpath=_0x10741e(0x1d8),bbpath2='';const botfile=_0x10741e(0x27d),configfile=_0x10741e(0x18a),settingsfile=_0x10741e(0x1fd),securefile=_0x10741e(0x1f2),validInstallation=fs['existsSync'](_0x10741e(0x15f));!fs[_0x10741e(0x20a)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x10741e(0x1fa)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs[_0x10741e(0x20a)](configpath)&&fs[_0x10741e(0x1ec)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x10741e(0x1ec)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x10741e(0x166)]({'bots':[]})[_0x10741e(0x21e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x10741e(0x21e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x10741e(0x166)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x10741e(0x25f),'rsaStandard':_0x10741e(0x284)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x10741e(0x1f1)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x10741e(0x188)](app);app['use'](express[_0x10741e(0x1b4)](path[_0x10741e(0x1ee)](__dirname,bbpath2,'build2'))),app[_0x10741e(0x213)](express[_0x10741e(0x1b4)](path['join'](__dirname,bbpath2,'build'))),app['get']('/',function(_0x48ee78,_0x12daa2){const _0x27e650=_0x10741e;_0x12daa2[_0x27e650(0x1c5)](path[_0x27e650(0x1ee)](__dirname,bbpath2,_0x27e650(0x1d9),'index.html'));}),app[_0x10741e(0x187)](_0x10741e(0x24c),function(_0x265339,_0x255b8b){const _0x91430b=_0x10741e;_0x255b8b[_0x91430b(0x1c5)](path[_0x91430b(0x1ee)](__dirname,bbpath2,_0x91430b(0x1c2),'index.html'));}),app[_0x10741e(0x187)](_0x10741e(0x225),(_0x17d118,_0x295001)=>{const _0x75477d=_0x10741e;_0x295001['sendFile'](path[_0x75477d(0x1ee)](__dirname,bbpath2,_0x75477d(0x1c2),_0x75477d(0x220)));}),app[_0x10741e(0x187)](_0x10741e(0x1f6),(_0x535fb3,_0x5932ca)=>{const _0x4769b5=_0x10741e;_0x5932ca[_0x4769b5(0x1c5)](path[_0x4769b5(0x1ee)](__dirname,bbpath2,_0x4769b5(0x1c2),_0x4769b5(0x220)));}),app[_0x10741e(0x187)](_0x10741e(0x25d),(_0x147e43,_0x4e39b3)=>{const _0x217256=_0x10741e;_0x4e39b3[_0x217256(0x1c5)](path[_0x217256(0x1ee)](__dirname,bbpath2,_0x217256(0x1c2),_0x217256(0x220)));}),app[_0x10741e(0x187)](_0x10741e(0x1f0),(_0x4583b2,_0x532387)=>{const _0x5cc3c4=_0x10741e;_0x532387['sendFile'](path['join'](__dirname,bbpath2,_0x5cc3c4(0x1c2),_0x5cc3c4(0x220)));}),app[_0x10741e(0x187)](_0x10741e(0x1bc),(_0x23beb0,_0xeccbdf)=>{const _0x5925bc=_0x10741e;_0xeccbdf['sendFile'](path[_0x5925bc(0x1ee)](__dirname,bbpath2,'build',_0x5925bc(0x220)));}),app[_0x10741e(0x187)](_0x10741e(0x203),(_0x918e26,_0x2c6840)=>{const _0x4099ad=_0x10741e;_0x2c6840[_0x4099ad(0x1c5)](path['join'](__dirname,bbpath2,_0x4099ad(0x1c2),_0x4099ad(0x220)));});if(HOST)http[_0x10741e(0x1e4)](PORT,HOST);else http['listen'](PORT);const io=require(_0x10741e(0x172))(http,{}),analytics=analyticsLib({'app':_0x10741e(0x18e),'plugins':[googleAnalytics({'trackingId':_0x10741e(0x23e)})]}),TelegramBot=require(_0x10741e(0x14d));let tgBot;if(settings[_0x10741e(0x242)]&&settings[_0x10741e(0x242)]!=''&&settings[_0x10741e(0x1e8)]&&settings[_0x10741e(0x1e8)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x217883=_0x10741e;console[_0x217883(0x1cb)](''),console[_0x217883(0x1cb)](_0x217883(0x26d)),logging(_0x217883(0x228)+PORT),console[_0x217883(0x1cb)](_0x217883(0x26d));if(config[_0x217883(0x177)]!=0x0)config['forEach'](_0x381650=>{const _0x1de856=_0x217883;if(_0x381650[_0x1de856(0x17a)]==_0x1de856(0x1d1)||_0x381650['status']=='new')logging(_0x1de856(0x1d7)+_0x381650[_0x1de856(0x155)]+_0x1de856(0x269)+_0x381650['botname']),startBot([_0x381650[_0x1de856(0x155)],userID],{'cwd':bbpath},function(_0x47b69c){if(_0x47b69c)logging(_0x47b69c);});else(_0x381650[_0x1de856(0x17a)]=='disabled'||_0x381650[_0x1de856(0x17a)]==_0x1de856(0x254))&&logging(_0x1de856(0x174)+_0x381650[_0x1de856(0x155)]+_0x1de856(0x269)+_0x381650[_0x1de856(0x287)]);});else!newBot&&console['log'](_0x217883(0x246));if(newBot)addBot();console['log'](_0x217883(0x26d)),console[_0x217883(0x1cb)]('');}function startSocket(){const _0x2f36d1=_0x10741e;io['on'](_0x2f36d1(0x20d),_0x493ef3=>{const _0x134dd3=_0x2f36d1;let _0x4d1787,_0x3a1dee,_0x4e3ec6,_0x51c2c9,_0x128f84;const _0x175772=_0x493ef3[_0x134dd3(0x15b)][_0x134dd3(0x1f8)][_0x134dd3(0x1fc)];_0x3a1dee=_0x175772[_0x134dd3(0x1bf)](/bot[0-9]{3}/);if(_0x3a1dee)_0x4e3ec6=_0x3a1dee[0x0]['match'](/[0-9]{3}/);if(_0x4e3ec6)_0x4d1787=_0x4e3ec6[0x0];else _0x4d1787='botmanager';const _0x41400e=_0x493ef3[_0x134dd3(0x15b)][_0x134dd3(0x1f5)][_0x134dd3(0x1c6)];if(!_0x41400e)_0x493ef3[_0x134dd3(0x143)](_0x134dd3(0x17a),{'publicKey':secure[_0x134dd3(0x169)]});else{_0x51c2c9=timelyDecrypt(_0x41400e,![]);if(!_0x51c2c9)_0x493ef3[_0x134dd3(0x143)](_0x134dd3(0x17a),{'publicKey':secure[_0x134dd3(0x169)]});else{_0x128f84=normalizeIP(_0x493ef3[_0x134dd3(0x149)][_0x134dd3(0x1d2)])[_0x134dd3(0x171)];if(!devices[_0x51c2c9])devices[_0x51c2c9]={'uuid':_0x51c2c9,'access':{'token':null}};devices[_0x51c2c9]['ip']=_0x128f84;const _0x5487eb=addClient(_0x493ef3['id'],_0x51c2c9,_0x4d1787);setAccess(_0x5487eb),_0x493ef3['on'](_0x134dd3(0x20c),_0x42e136=>{const _0x5d5a3d=_0x134dd3,_0x937b62=timelyDecrypt(_0x42e136[_0x5d5a3d(0x285)]);if(_0x937b62){_0x42e136={'username':_0x42e136[_0x5d5a3d(0x22e)],'password':_0x937b62},devices[_0x51c2c9]['access']=validateCredentials(_0x42e136,_0x51c2c9);if(devices[_0x51c2c9]['access'][_0x5d5a3d(0x260)]==![]&&devices[_0x51c2c9][_0x5d5a3d(0x232)][_0x5d5a3d(0x173)]==_0x5d5a3d(0x1a6))_0x493ef3[_0x5d5a3d(0x143)]('status',{'access':devices[_0x51c2c9][_0x5d5a3d(0x232)]}),loginAccess2FA(_0x51c2c9,_0x128f84);else{if(devices[_0x51c2c9]['access']['allow']==![]&&devices[_0x51c2c9]['access'][_0x5d5a3d(0x173)]==_0x5d5a3d(0x288))_0x493ef3['emit'](_0x5d5a3d(0x17a),{'access':devices[_0x51c2c9]['access']});else devices[_0x51c2c9][_0x5d5a3d(0x232)]['allow']&&devices[_0x51c2c9]['access'][_0x5d5a3d(0x173)]==_0x5d5a3d(0x22c)&&(getClientsWithUuid(_0x51c2c9)['forEach'](_0x4e3d44=>{setAccess(_0x4e3d44);}),setTokenRefresh(_0x51c2c9),setSessionTimeout(_0x5d5a3d(0x20c),_0x51c2c9));}}else logging(_0x5d5a3d(0x208));}),_0x493ef3['on'](_0x134dd3(0x162),()=>{resetPassword();}),_0x493ef3['on'](_0x134dd3(0x223),_0x4c1648=>{removeClient(_0x493ef3['id']);});}}});}function initClient(_0x223bc9){const _0x2a973f=_0x10741e;if(_0x223bc9!='botmanager'&&config[_0x2a973f(0x276)]!=''){if(pid[_0x223bc9])pid[_0x223bc9][_0x2a973f(0x1da)]({'function':_0x2a973f(0x217),'args':null});}}function getSocket(_0x148c92){const _0x112bfb=_0x10741e;return io[_0x112bfb(0x146)][_0x112bfb(0x146)][_0x112bfb(0x187)](_0x148c92);}function setAccess(_0x19cdca){const _0x272aab=_0x10741e,_0x172f01=getSocket(_0x19cdca['id']),_0x304d89=_0x19cdca[_0x272aab(0x1ef)],_0x37fc44=_0x19cdca['bot'];devices[_0x304d89][_0x272aab(0x232)]=validateAccess(devices[_0x304d89]['access'][_0x272aab(0x215)],_0x304d89),_0x172f01[_0x272aab(0x1ee)](_0x304d89);if(devices[_0x304d89][_0x272aab(0x232)]['allow']){_0x172f01['join'](_0x37fc44);if(_0x37fc44==_0x272aab(0x24d))initializeSocketBotManager(_0x172f01);else initializeSocketBot(_0x172f01);initClient(_0x37fc44);}devices[_0x304d89][_0x272aab(0x232)]['token']&&devices[_0x304d89]['access'][_0x272aab(0x173)]==_0x272aab(0x16a)&&setSessionTimeout('2FA',_0x304d89),devices[_0x304d89][_0x272aab(0x232)][_0x272aab(0x215)]&&devices[_0x304d89][_0x272aab(0x232)]['reason']==_0x272aab(0x212)&&setSessionTimeout(_0x272aab(0x20c),_0x304d89),_0x172f01['emit']('status',{'status':_0x19cdca[_0x272aab(0x23b)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x304d89]['access'],'externalip':devices[_0x304d89]['ip'],'publicKey':secure[_0x272aab(0x169)],'validInstallation':validInstallation}),devices[_0x304d89]['access'][_0x272aab(0x260)]==![]&&devices[_0x304d89][_0x272aab(0x232)][_0x272aab(0x173)]=='2FA\x20required'&&temporaryAccess2FA(_0x304d89,devices[_0x304d89]['ip']);}function setSessionTimeout(_0x5c909a,_0x45a17f){const _0x4b23b5=_0x10741e;let _0x49dbd2;if(_0x5c909a==_0x4b23b5(0x20c))_0x49dbd2=loginExpiry*0x3c*0x3e8;else _0x49dbd2=devices[_0x45a17f][_0x4b23b5(0x26b)][_0x4b23b5(0x16e)]*0x3c*0x3e8-(new Date()[_0x4b23b5(0x1ca)]()-devices[_0x45a17f]['telegramIpApproval']['timestamp']);if(devices[_0x45a17f]['pidExpireLogin'])clearTimeout(devices[_0x45a17f][_0x4b23b5(0x279)]);devices[_0x45a17f][_0x4b23b5(0x279)]=setTimeout(()=>{const _0x281184=_0x4b23b5;if(devices[_0x45a17f]['pidRefreshToken'])clearTimeout(devices[_0x45a17f][_0x281184(0x191)]);removeSocketListeners(_0x45a17f),addBlacklist(_0x45a17f),devices[_0x45a17f]['telegramIpApproval']=null,devices[_0x45a17f]['telegram2FaApproval']=null,devices[_0x45a17f]['access'][_0x281184(0x215)]=null,devices[_0x45a17f]['access']=validateAccess(devices[_0x45a17f][_0x281184(0x232)]['token'],_0x45a17f),!(devices[_0x45a17f][_0x281184(0x232)][_0x281184(0x260)]&&devices[_0x45a17f][_0x281184(0x232)]['reason']==_0x281184(0x1ad))&&(_0x5c909a=='login'?io['to'](_0x45a17f)[_0x281184(0x143)](_0x281184(0x17a),{'access':{'allow':![],'reason':_0x281184(0x195),'token':null}}):io['to'](_0x45a17f)[_0x281184(0x143)](_0x281184(0x17a),{'access':{'allow':![],'reason':_0x281184(0x1ce),'token':null}})),devices[_0x45a17f][_0x281184(0x232)][_0x281184(0x215)]=null;},_0x49dbd2);}function setTokenRefresh(_0x16368f){const _0x28dd97=_0x10741e;if(devices[_0x16368f][_0x28dd97(0x191)])clearTimeout(devices[_0x16368f][_0x28dd97(0x191)]);devices[_0x16368f][_0x28dd97(0x191)]=setTimeout(()=>{const _0x1cca97=_0x28dd97;getClientsWithUuid(_0x16368f)[_0x1cca97(0x177)]!=0x0?(devices[_0x16368f][_0x1cca97(0x232)]=refreshToken(_0x16368f),io['to'](_0x16368f)[_0x1cca97(0x143)](_0x1cca97(0x17a),{'status':_0x1cca97(0x206),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x16368f][_0x1cca97(0x232)],'externalip':devices[_0x16368f]['ip'],'publicKey':secure[_0x1cca97(0x169)],'validInstallation':validInstallation}),setTokenRefresh(_0x16368f)):clearTimeout(devices[_0x16368f][_0x1cca97(0x191)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x11386a){const _0x528963=_0x10741e,_0x34d347=getClient(_0x11386a['id'])[_0x528963(0x1ef)];_0x11386a['emit'](_0x528963(0x23d),config),_0x11386a['emit'](_0x528963(0x250),cleanSettings()),_0x11386a['on'](_0x528963(0x181),_0x587bc8=>{const _0x5240f3=_0x528963;if(validateAccess(_0x587bc8,_0x34d347)[_0x5240f3(0x260)])addBot();else logging(_0x5240f3(0x27c));}),_0x11386a['on'](_0x528963(0x14f),(_0x1fdba8,_0x29b903)=>{const _0x1f9851=_0x528963;if(validateAccess(_0x29b903,_0x34d347)[_0x1f9851(0x260)])toggleBot(_0x1fdba8[_0x1f9851(0x155)],_0x1fdba8['status'],_0x1fdba8[_0x1f9851(0x265)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x11386a['on']('delete-bot',(_0x4259a4,_0x341158)=>{const _0x13a183=_0x528963;if(validateAccess(_0x341158,_0x34d347)['allow'])deleteBot(_0x4259a4);else logging(_0x13a183(0x175));}),_0x11386a['on'](_0x528963(0x1d4),(_0x5cb4e6,_0x4f939d)=>{const _0x389851=_0x528963;if(validateAccess(_0x4f939d,_0x34d347)[_0x389851(0x260)])storeSettings(_0x5cb4e6,!![]);else logging(_0x389851(0x148));}),_0x11386a['on']('update-bb',(_0x4cf654,_0x42e5d9)=>{const _0x1b0900=_0x528963;if(validateAccess(_0x42e5d9,_0x34d347)['allow'])updateBB();else logging(_0x1b0900(0x148));}),_0x11386a['on']('logout',_0x1829a6=>{const _0x88f17f=_0x528963;if(validateAccess(_0x1829a6,_0x34d347)['allow']){if(devices[_0x34d347][_0x88f17f(0x191)])clearTimeout(devices[_0x34d347]['pidRefreshToken']);if(devices[_0x34d347][_0x88f17f(0x279)])clearTimeout(devices[_0x34d347]['pidExpireLogin']);removeSocketListeners(getClient(_0x11386a['id'])[_0x88f17f(0x1ef)]),addBlacklist(_0x34d347),devices[_0x34d347][_0x88f17f(0x26b)]=null,devices[_0x34d347][_0x88f17f(0x184)]=null,devices[_0x34d347][_0x88f17f(0x232)][_0x88f17f(0x215)]=null,io['to'](getClient(_0x11386a['id'])[_0x88f17f(0x1ef)])[_0x88f17f(0x143)](_0x88f17f(0x17a),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x88f17f(0x1ac));});}function initializeSocketBot(_0x28aeb7){const _0x119026=_0x10741e,_0x9d452c=getClient(_0x28aeb7['id'])['bot'],_0x19bea0=getClient(_0x28aeb7['id'])[_0x119026(0x1ef)];_0x28aeb7['on'](_0x119026(0x247),(_0x5270e9,_0x196acc)=>{const _0x2ef45e=_0x119026;if(validateAccess(_0x196acc,_0x19bea0)[_0x2ef45e(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c]['send']({'function':'emitHistory','args':_0x5270e9});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x28aeb7['on'](_0x119026(0x18f),(_0x3496c1,_0x2b8178)=>{const _0x51d7e0=_0x119026;if(validateAccess(_0x2b8178,_0x19bea0)[_0x51d7e0(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x51d7e0(0x1da)]({'function':'getPortfolio','args':_0x3496c1});}else logging(_0x51d7e0(0x272));}),_0x28aeb7['on'](_0x119026(0x1e3),(_0x4c25ca,_0x2263ff)=>{const _0x44d941=_0x119026;if(validateAccess(_0x2263ff,_0x19bea0)[_0x44d941(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x44d941(0x1da)]({'function':'storeConfiguration','args':_0x4c25ca});}else logging(_0x44d941(0x1b1));}),_0x28aeb7['on'](_0x119026(0x27e),(_0x2df2ed,_0x2a9ff2)=>{const _0x20e2b8=_0x119026;if(validateAccess(_0x2a9ff2,_0x19bea0)[_0x20e2b8(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x20e2b8(0x1da)]({'function':_0x20e2b8(0x28c),'args':_0x2df2ed});}else logging(_0x20e2b8(0x28d));}),_0x28aeb7['on'](_0x119026(0x21d),_0x15c106=>{const _0x45d0a3=_0x119026;if(validateAccess(_0x15c106,_0x19bea0)[_0x45d0a3(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x45d0a3(0x1da)]({'function':_0x45d0a3(0x21b),'args':null});}else logging(_0x45d0a3(0x271));}),_0x28aeb7['on'](_0x119026(0x161),(_0x4e4aec,_0x36710f)=>{const _0x2aba8d=_0x119026;if(validateAccess(_0x36710f,_0x19bea0)[_0x2aba8d(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x2aba8d(0x1da)]({'function':'placeOrder','args':_0x4e4aec});}else logging(_0x2aba8d(0x1b9));}),_0x28aeb7['on'](_0x119026(0x221),_0x25b257=>{const _0x167f83=_0x119026;if(validateAccess(_0x25b257,_0x19bea0)[_0x167f83(0x260)]){if(pid[_0x9d452c])pid[_0x9d452c][_0x167f83(0x1da)]({'function':_0x167f83(0x28e),'args':null});}else logging(_0x167f83(0x18c));}),_0x28aeb7['on'](_0x119026(0x27f),_0x532a4f=>{const _0x5b3f1b=_0x119026;if(validateAccess(_0x532a4f,_0x19bea0)[_0x5b3f1b(0x260)]){if(devices[_0x19bea0]['pidRefreshToken'])clearTimeout(devices[_0x19bea0][_0x5b3f1b(0x191)]);if(devices[_0x19bea0][_0x5b3f1b(0x279)])clearTimeout(devices[_0x19bea0][_0x5b3f1b(0x279)]);removeSocketListeners(getClient(_0x28aeb7['id'])[_0x5b3f1b(0x1ef)]),addBlacklist(_0x19bea0),devices[_0x19bea0]['telegramIpApproval']=null,devices[_0x19bea0][_0x5b3f1b(0x184)]=null,devices[_0x19bea0]['access'][_0x5b3f1b(0x215)]=null,io['to'](getClient(_0x28aeb7['id'])[_0x5b3f1b(0x1ef)])['emit'](_0x5b3f1b(0x17a),{'access':{'allow':![],'reason':_0x5b3f1b(0x261),'token':null}});}else logging(_0x5b3f1b(0x1ac));});}function removeSocketListeners(_0x5c1297){const _0x13ceff=_0x10741e;getClientsWithUuid(_0x5c1297)[_0x13ceff(0x24a)](_0x4fdbad=>{getSocket(_0x4fdbad['id'])['removeAllListeners']();});}function cleanSettings(){const _0x259454=_0x10741e;let _0x62ed12=settings;return settings[_0x259454(0x242)]&&settings[_0x259454(0x242)]!=''&&(_0x62ed12={..._0x62ed12,'telegramToken':'************'}),settings[_0x259454(0x270)]&&settings[_0x259454(0x270)]!=''&&(_0x62ed12={..._0x62ed12,'bbPassword':_0x259454(0x192)}),_0x62ed12;}function updateBB(){const _0x3844b6=_0x10741e;installingUpdate=!![],config[_0x3844b6(0x24a)](_0x10330a=>{const _0x1f11d0=_0x3844b6;restartBot(_0x10330a[_0x1f11d0(0x155)]);}),process['send']({'update':!![]},_0x1e4e67=>{});}function startBot(_0x6b7914,_0x2a1d0b,_0xfd1870){const _0x292068=_0x10741e;let _0x25f81d=![];const _0x7fb4fd=_0x6b7914[0x0];_0x2a1d0b={..._0x2a1d0b,'stdio':[_0x292068(0x278),_0x292068(0x278),_0x292068(0x278),_0x292068(0x1fe)]},pid[_0x7fb4fd]=childProcess[_0x292068(0x262)](botfile,_0x6b7914,_0x2a1d0b),pid[_0x7fb4fd]['on'](_0x292068(0x237),_0x33fead=>{const _0x3ec61c=_0x292068;switch(Object[_0x3ec61c(0x156)](_0x33fead)[0x0]){case'botname':updateBotName(_0x7fb4fd,_0x33fead[_0x3ec61c(0x287)]);break;case _0x3ec61c(0x17a):updateStatus(_0x7fb4fd,_0x33fead['status']);break;case _0x3ec61c(0x265):updateLive(_0x7fb4fd,_0x33fead[_0x3ec61c(0x265)]);break;case'started':updateLive(_0x7fb4fd,_0x33fead[_0x3ec61c(0x1b7)]),io['to'](_0x7fb4fd)[_0x3ec61c(0x143)](_0x3ec61c(0x17a),{'access':{'allow':![],'reason':_0x3ec61c(0x198),'token':null}});break;case _0x3ec61c(0x200):_0x33fead[_0x3ec61c(0x200)]==_0x3ec61c(0x214)&&restartBot(_0x7fb4fd);_0x33fead[_0x3ec61c(0x200)]==_0x3ec61c(0x16f)&&toggleBot(_0x7fb4fd,_0x3ec61c(0x241),_0x3ec61c(0x1b2));break;case'telegram':sendTelegram(_0x7fb4fd,_0x33fead[_0x3ec61c(0x1a2)]);break;case _0x3ec61c(0x236):io['to'](_0x7fb4fd)['emit'](_0x33fead[_0x3ec61c(0x236)],_0x33fead[_0x3ec61c(0x289)]);break;}}),pid[_0x7fb4fd]['on'](_0x292068(0x145),function(_0x4e6aaf){if(_0x25f81d)return;_0x25f81d=!![],_0xfd1870(_0x4e6aaf);}),pid[_0x7fb4fd]['on'](_0x292068(0x222),function(_0x55fea2){const _0x3fbad3=_0x292068;if(installingUpdate)return;if(_0x25f81d)return;_0x25f81d=!![],_0xfd1870(null);const _0x30670d=dbConfig[_0x3fbad3(0x187)]('bots')[_0x3fbad3(0x1c3)]({'botID':_0x7fb4fd})[_0x3fbad3(0x1e6)]();_0x30670d&&(_0x30670d['status']==_0x3fbad3(0x1d1)||_0x30670d[_0x3fbad3(0x17a)]==_0x3fbad3(0x194))&&(updateLive(_0x7fb4fd,_0x3fbad3(0x1b2)),logging(_0x3fbad3(0x193)+_0x7fb4fd),startBot([_0x7fb4fd,userID],{'cwd':bbpath},function(_0x351666){if(_0x351666)logging(_0x351666);}));});}function stopBot(_0x3c849a){const _0x52a4de=_0x10741e;getClientsWithBotID(_0x3c849a)['forEach'](_0x5796bf=>{const _0x2059ea=_0x4784;getSocket(_0x5796bf['id'])[_0x2059ea(0x223)](!![]),removeClient(_0x5796bf['id']);});if(pid[_0x3c849a])pid[_0x3c849a][_0x52a4de(0x16f)]();}function restartBot(_0x89dd5){if(pid[_0x89dd5])pid[_0x89dd5]['kill']();}function addBot(){const _0x154781=_0x10741e;let _0x5d3470;for(let _0x5cc54e=0x1;_0x5cc54e<0x3e9;_0x5cc54e++){_0x5d3470=_0x5cc54e[_0x154781(0x210)]()[_0x154781(0x27b)](0x3,'0');let _0x46f459=config['find'](_0x2b242c=>_0x2b242c[_0x154781(0x155)]==_0x5d3470);if(!_0x46f459)break;}if(_0x5d3470==='1000'){logging(_0x154781(0x22a));return;}logging(_0x154781(0x159)+_0x5d3470),dbConfig[_0x154781(0x187)](_0x154781(0x23d))[_0x154781(0x234)]({'botID':_0x5d3470,'botname':_0x154781(0x1dc)+_0x5d3470,'status':'new','live':''})['write'](),startBot([_0x5d3470,userID],{'cwd':bbpath},function(_0x2f31f7){if(_0x2f31f7)logging(_0x2f31f7);}),config=getConfiguration(),io['to'](_0x154781(0x24d))[_0x154781(0x143)](_0x154781(0x23d),config);}function deleteBot(_0x8e98b2){const _0xf33f44=_0x10741e;getClientsWithBotID(_0x8e98b2)[_0xf33f44(0x24a)](_0x2abf23=>{const _0x163058=_0xf33f44;getSocket(_0x2abf23['id'])[_0x163058(0x223)](!![]),removeClient(_0x2abf23['id']);}),dbConfig[_0xf33f44(0x187)](_0xf33f44(0x23d))[_0xf33f44(0x19c)]({'botID':_0x8e98b2})[_0xf33f44(0x21e)](),logging(_0xf33f44(0x273)+_0x8e98b2),stopBot(_0x8e98b2);try{fs[_0xf33f44(0x176)](path[_0xf33f44(0x1ee)](configpath,_0xf33f44(0x15e)+_0x8e98b2+_0xf33f44(0x267))),fs['unlinkSync'](path[_0xf33f44(0x1ee)](configpath,'bot-'+_0x8e98b2+_0xf33f44(0x1c0))),fs[_0xf33f44(0x176)](path[_0xf33f44(0x1ee)](configpath,_0xf33f44(0x15e)+_0x8e98b2+_0xf33f44(0x21f))),fs[_0xf33f44(0x176)](path[_0xf33f44(0x1ee)](configpath,_0xf33f44(0x15e)+_0x8e98b2+'-results.json'));}catch(_0x529fe6){if(_0x529fe6)logging(_0xf33f44(0x186),_0x529fe6);}config=getConfiguration(),io['to'](_0xf33f44(0x24d))['emit'](_0xf33f44(0x23d),config);}function toggleBot(_0x44f44e,_0x6bf90b,_0x329015){const _0x135e3c=_0x10741e;dbConfig[_0x135e3c(0x187)]('bots')[_0x135e3c(0x1c3)]({'botID':_0x44f44e})[_0x135e3c(0x1c9)]({'status':_0x6bf90b})['assign']({'live':_0x329015})[_0x135e3c(0x21e)]();if(_0x6bf90b==_0x135e3c(0x1d1)||_0x6bf90b==_0x135e3c(0x194))logging(_0x135e3c(0x14a)+_0x44f44e),startBot([_0x44f44e,userID],{'cwd':bbpath},function(_0x2c8762){if(_0x2c8762)logging(_0x2c8762);});else(_0x6bf90b=='disabled'||_0x6bf90b==_0x135e3c(0x254))&&(logging('disabled\x20Bot\x20'+_0x44f44e),stopBot(_0x44f44e));config=getConfiguration(),io['to'](_0x135e3c(0x24d))[_0x135e3c(0x143)](_0x135e3c(0x23d),config);}function toggleStatus(_0x4a0602){const _0x10ab96=_0x10741e;let _0x3f65d9=dbConfig['get'](_0x10ab96(0x23d))[_0x10ab96(0x1c3)]({'botID':_0x4a0602})[_0x10ab96(0x1e6)](),_0x481043;if(_0x3f65d9['status']===_0x10ab96(0x1d1))_0x481043=_0x10ab96(0x241);else{if(_0x3f65d9[_0x10ab96(0x17a)]===_0x10ab96(0x194))_0x481043=_0x10ab96(0x254);else{if(_0x3f65d9['status']===_0x10ab96(0x254))_0x481043=_0x10ab96(0x194);else{if(_0x3f65d9[_0x10ab96(0x17a)]===_0x10ab96(0x241))_0x481043='enabled';}}}return _0x481043;}function updateStatus(_0xd009a0,_0x20449c){const _0x551f16=_0x10741e;dbConfig[_0x551f16(0x187)](_0x551f16(0x23d))[_0x551f16(0x1c3)]({'botID':_0xd009a0})['assign']({'status':_0x20449c})[_0x551f16(0x21e)](),config=getConfiguration(),io['to'](_0x551f16(0x24d))[_0x551f16(0x143)](_0x551f16(0x23d),config);}function updateLive(_0x2196a3,_0x4bf9b4){const _0x561bf2=_0x10741e;dbConfig['get']('bots')[_0x561bf2(0x1c3)]({'botID':_0x2196a3})[_0x561bf2(0x1c9)]({'live':_0x4bf9b4})[_0x561bf2(0x21e)](),config=getConfiguration(),io['to'](_0x561bf2(0x24d))[_0x561bf2(0x143)](_0x561bf2(0x23d),config);}function updateBotName(_0x138e99,_0x539e99){const _0x16021b=_0x10741e;dbConfig[_0x16021b(0x187)](_0x16021b(0x23d))[_0x16021b(0x1c3)]({'botID':_0x138e99})[_0x16021b(0x1c9)]({'botname':_0x539e99})[_0x16021b(0x21e)](),config=getConfiguration(),io['to'](_0x16021b(0x24d))[_0x16021b(0x143)](_0x16021b(0x23d),config);}function telegramError(_0x3282c1){const _0x4c5b6c=_0x10741e;console[_0x4c5b6c(0x1cb)](getTimeStamp()+_0x4c5b6c(0x1f9));}function validateTelegram(_0x304b44){const _0x54da6c=_0x10741e;if(_0x304b44[_0x54da6c(0x1be)][_0x54da6c(0x22e)]!=settings[_0x54da6c(0x1e8)]&&'@'+_0x304b44[_0x54da6c(0x1be)]['username']!=settings['telegramUsername'])return tgBot[_0x54da6c(0x182)](_0x304b44['chat']['id'],_0x54da6c(0x196),{'parse_mode':_0x54da6c(0x268)})[_0x54da6c(0x26e)](_0x82506c=>{telegramError(_0x82506c);}),![];return!![];}async function initTelegram(){const _0xacdce=_0x10741e;if(tgBot)tgBot[_0xacdce(0x17f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xacdce(0x242)],{'polling':!![]});let _0x286aa8=_0xacdce(0x1a4);_0x286aa8+='\x0a',_0x286aa8+=_0xacdce(0x238),_0x286aa8+=_0xacdce(0x204),_0x286aa8+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x286aa8+=_0xacdce(0x1c4),_0x286aa8+=_0xacdce(0x252),_0x286aa8+=_0xacdce(0x160),_0x286aa8+=_0xacdce(0x231),_0x286aa8+=_0xacdce(0x1b3);let _0x420af9='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x420af9+='\x0a',_0x420af9+=_0x286aa8,tgBot[_0xacdce(0x1a9)](/\/start/,_0x4cbb74=>{const _0x44c2e8=_0xacdce;if(!validateTelegram(_0x4cbb74))return;if(settings[_0x44c2e8(0x183)]!=_0x4cbb74[_0x44c2e8(0x25c)]['id'])updateSetting(_0x44c2e8(0x183),_0x4cbb74[_0x44c2e8(0x25c)]['id']);updateSetting(_0x44c2e8(0x18d),!![]),tgBot['sendMessage'](_0x4cbb74[_0x44c2e8(0x25c)]['id'],_0x420af9)[_0x44c2e8(0x26e)](_0x182134=>{telegramError(_0x182134);});}),tgBot[_0xacdce(0x1a9)](/\/enable/,_0x20b05a=>{const _0x29e76f=_0xacdce;if(!validateTelegram(_0x20b05a))return;if(settings[_0x29e76f(0x183)]!=_0x20b05a[_0x29e76f(0x25c)]['id'])updateSetting(_0x29e76f(0x183),_0x20b05a['chat']['id']);updateSetting(_0x29e76f(0x18d),!![]),tgBot['sendMessage'](_0x20b05a['chat']['id'],'Notifications\x20enabled')['catch'](_0x3319e9=>{telegramError(_0x3319e9);});}),tgBot[_0xacdce(0x1a9)](/\/config/,async _0x53e65d=>{const _0x3f3e9f=_0xacdce;if(!validateTelegram(_0x53e65d))return;tgBot[_0x3f3e9f(0x23a)](_0x3f3e9f(0x154)),tgBot[_0x3f3e9f(0x182)](_0x53e65d['chat']['id'],_0x3f3e9f(0x28b),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x3f3e9f(0x226)},{'text':'Alerts','callback_data':_0x3f3e9f(0x1ab)},{'text':'All','callback_data':'all'}]]}})[_0x3f3e9f(0x26e)](_0xdf1ace=>{telegramError(_0xdf1ace);}),tgBot['on'](_0x3f3e9f(0x154),async _0x2479a9=>{const _0x5168fd=_0x3f3e9f,_0x74be10=_0x2479a9[_0x5168fd(0x201)],_0xebd3f=_0x2479a9[_0x5168fd(0x237)];tgBot[_0x5168fd(0x19d)](_0x2479a9['id'])[_0x5168fd(0x1b5)](async()=>{const _0x1d60d0=_0x5168fd;_0x74be10==_0x1d60d0(0x226)&&(updateSetting(_0x1d60d0(0x224),'orders'),updateSetting(_0x1d60d0(0x18d),!![]),await tgBot[_0x1d60d0(0x182)](_0xebd3f[_0x1d60d0(0x25c)]['id'],_0x1d60d0(0x24f))[_0x1d60d0(0x26e)](_0x4f6dae=>{telegramError(_0x4f6dae);}));_0x74be10==_0x1d60d0(0x1ab)&&(updateSetting(_0x1d60d0(0x224),'alerts'),updateSetting(_0x1d60d0(0x18d),!![]),await tgBot[_0x1d60d0(0x182)](_0xebd3f[_0x1d60d0(0x25c)]['id'],_0x1d60d0(0x251))[_0x1d60d0(0x26e)](_0x50b435=>{telegramError(_0x50b435);}));_0x74be10=='all'&&(updateSetting(_0x1d60d0(0x224),_0x1d60d0(0x1fb)),updateSetting(_0x1d60d0(0x18d),!![]),await tgBot[_0x1d60d0(0x182)](_0xebd3f[_0x1d60d0(0x25c)]['id'],_0x1d60d0(0x14e))[_0x1d60d0(0x26e)](_0x17d4ba=>{telegramError(_0x17d4ba);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0xebd3f['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x1f58bf=>{telegramError(_0x1f58bf);});}),tgBot[_0x5168fd(0x23a)](_0x5168fd(0x154));});}),tgBot[_0xacdce(0x1a9)](/\/status/,_0x508a3c=>{const _0x2048a8=_0xacdce;if(!validateTelegram(_0x508a3c))return;let _0x719548=_0x2048a8(0x1e9);config['forEach'](_0x44969f=>{const _0x4a85a1=_0x2048a8;_0x719548+=_0x4a85a1(0x1dc)+_0x44969f[_0x4a85a1(0x155)]+'\x20|\x20'+_0x44969f[_0x4a85a1(0x287)]+':\x20'+_0x44969f[_0x4a85a1(0x17a)]+_0x4a85a1(0x190)+_0x44969f[_0x4a85a1(0x265)]+'\x0a';}),_0x719548+='\x0a',_0x719548+=_0x2048a8(0x26c),_0x719548+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x2048a8(0x253),_0x719548+=settings[_0x2048a8(0x18d)]?settings[_0x2048a8(0x224)]==_0x2048a8(0x1fb)?_0x2048a8(0x1de):_0x2048a8(0x178)+settings[_0x2048a8(0x224)]+_0x2048a8(0x244):'',tgBot[_0x2048a8(0x182)](_0x508a3c['chat']['id'],_0x719548,{'parse_mode':'HTML'})[_0x2048a8(0x26e)](_0x24269e=>{telegramError(_0x24269e);});}),tgBot[_0xacdce(0x1a9)](/\/restart/,_0x3d132a=>{const _0x239af6=_0xacdce;if(!validateTelegram(_0x3d132a))return;tgBot[_0x239af6(0x23a)](_0x239af6(0x154));const _0x32dc59=getEnabledBots();if(_0x32dc59[_0x239af6(0x177)]==0x0)tgBot[_0x239af6(0x182)](_0x3d132a[_0x239af6(0x25c)]['id'],_0x239af6(0x17e))['catch'](_0x5416d8=>{telegramError(_0x5416d8);});else{if(_0x32dc59[_0x239af6(0x177)]>0x1)_0x32dc59[_0x239af6(0x234)]({'botID':_0x239af6(0x1fb)});let _0xf9b550=[],_0xd16ef8=[];const _0x44e3bb=_0x32dc59['length']%0x4==0x0||_0x32dc59[_0x239af6(0x177)]%0x4==0x3||_0x32dc59[_0x239af6(0x177)]%0x3==0x1?0x4:0x3;let _0x3abfbe=0x0;_0x32dc59[_0x239af6(0x24a)]((_0x40c127,_0x562c75)=>{const _0x41d4eb=_0x239af6;if(_0x562c75%_0x44e3bb==0x0)_0xd16ef8=[];_0xd16ef8[_0x41d4eb(0x234)]({'text':_0x40c127[_0x41d4eb(0x155)]==_0x41d4eb(0x1fb)?_0x41d4eb(0x1db):_0x41d4eb(0x1dc)+_0x40c127['botID'],'callback_data':_0x40c127[_0x41d4eb(0x155)]}),_0x562c75%_0x44e3bb==0x0&&(_0xf9b550[_0x3abfbe]=_0xd16ef8,_0x3abfbe++);}),tgBot[_0x239af6(0x182)](_0x3d132a['chat']['id'],_0x239af6(0x1e7),{'reply_markup':{'inline_keyboard':_0xf9b550}})[_0x239af6(0x26e)](_0x221a5c=>{telegramError(_0x221a5c);}),tgBot['on'](_0x239af6(0x154),async _0x50a58e=>{const _0x39c306=_0x239af6,_0x2bc2b3=_0x50a58e[_0x39c306(0x201)],_0x4137cc=_0x50a58e['message'];tgBot[_0x39c306(0x19d)](_0x50a58e['id'])['then'](async()=>{const _0x2235af=_0x39c306;if(_0x2bc2b3==_0x2235af(0x1fb)){if(settings[_0x2235af(0x224)]==_0x2235af(0x226))tgBot[_0x2235af(0x182)](_0x4137cc[_0x2235af(0x25c)]['id'],_0x2235af(0x1a7))[_0x2235af(0x26e)](_0x8b62e7=>{telegramError(_0x8b62e7);});config[_0x2235af(0x24a)](_0x1cd1c9=>{const _0x5d81e8=_0x2235af;restartBot(_0x1cd1c9[_0x5d81e8(0x155)]);});}else{if(settings[_0x2235af(0x224)]==_0x2235af(0x226))tgBot[_0x2235af(0x182)](_0x4137cc[_0x2235af(0x25c)]['id'],_0x2235af(0x21c)+_0x2bc2b3)[_0x2235af(0x26e)](_0x3e1244=>{telegramError(_0x3e1244);});restartBot(_0x2bc2b3);}}),tgBot[_0x39c306(0x23a)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x8c2a62=>{const _0x4025a3=_0xacdce;if(!validateTelegram(_0x8c2a62))return;tgBot[_0x4025a3(0x23a)](_0x4025a3(0x154));const _0x4c7b56=getDisabledBots();if(_0x4c7b56[_0x4025a3(0x177)]==0x0)tgBot['sendMessage'](_0x8c2a62[_0x4025a3(0x25c)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x2be111=>{telegramError(_0x2be111);});else{if(_0x4c7b56[_0x4025a3(0x177)]>0x1)_0x4c7b56[_0x4025a3(0x234)]({'botID':_0x4025a3(0x1fb)});let _0x41d6cd=[],_0x5683de=[];const _0x52b0ac=_0x4c7b56[_0x4025a3(0x177)]%0x4==0x0||_0x4c7b56[_0x4025a3(0x177)]%0x4==0x3||_0x4c7b56[_0x4025a3(0x177)]%0x3==0x1?0x4:0x3;let _0x2e8347=0x0;_0x4c7b56[_0x4025a3(0x24a)]((_0x5ed01d,_0x5ec96b)=>{const _0x5cb1d2=_0x4025a3;if(_0x5ec96b%_0x52b0ac==0x0)_0x5683de=[];_0x5683de[_0x5cb1d2(0x234)]({'text':_0x5ed01d[_0x5cb1d2(0x155)]==_0x5cb1d2(0x1fb)?'All\x20bots':_0x5cb1d2(0x1dc)+_0x5ed01d['botID'],'callback_data':_0x5ed01d['botID']}),_0x5ec96b%_0x52b0ac==0x0&&(_0x41d6cd[_0x2e8347]=_0x5683de,_0x2e8347++);}),tgBot[_0x4025a3(0x182)](_0x8c2a62[_0x4025a3(0x25c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x41d6cd}})[_0x4025a3(0x26e)](_0x41a3d3=>{telegramError(_0x41a3d3);}),tgBot['on'](_0x4025a3(0x154),async _0x1b52ab=>{const _0x231d96=_0x4025a3,_0x4fd6cc=_0x1b52ab[_0x231d96(0x201)],_0x3e205b=_0x1b52ab[_0x231d96(0x237)];tgBot['answerCallbackQuery'](_0x1b52ab['id'])[_0x231d96(0x1b5)](async()=>{const _0x3fbb7d=_0x231d96;if(_0x4fd6cc==_0x3fbb7d(0x1fb)){if(settings[_0x3fbb7d(0x224)]=='orders')tgBot['sendMessage'](_0x3e205b[_0x3fbb7d(0x25c)]['id'],_0x3fbb7d(0x19f))[_0x3fbb7d(0x26e)](_0x78a3af=>{telegramError(_0x78a3af);});_0x4c7b56['forEach'](_0x1c4a7b=>{const _0x4e4bc4=_0x3fbb7d;if(_0x1c4a7b[_0x4e4bc4(0x155)]!=_0x4e4bc4(0x1fb))toggleBot(_0x1c4a7b[_0x4e4bc4(0x155)],toggleStatus(_0x1c4a7b['botID']),_0x4e4bc4(0x1b2));});}else{if(settings[_0x3fbb7d(0x224)]=='orders')tgBot[_0x3fbb7d(0x182)](_0x3e205b[_0x3fbb7d(0x25c)]['id'],_0x3fbb7d(0x280)+_0x4fd6cc)['catch'](_0x3d5a0d=>{telegramError(_0x3d5a0d);});toggleBot(_0x4fd6cc,toggleStatus(_0x4fd6cc),_0x3fbb7d(0x1b2));}}),tgBot[_0x231d96(0x23a)](_0x231d96(0x154));});}}),tgBot['onText'](/\/off/,_0xc6c396=>{const _0xce6f1c=_0xacdce;if(!validateTelegram(_0xc6c396))return;tgBot[_0xce6f1c(0x23a)]('callback_query');const _0x4e387c=getEnabledBots();if(_0x4e387c['length']==0x0)tgBot[_0xce6f1c(0x182)](_0xc6c396[_0xce6f1c(0x25c)]['id'],_0xce6f1c(0x17e))[_0xce6f1c(0x26e)](_0x453b0f=>{telegramError(_0x453b0f);});else{if(_0x4e387c['length']>0x1)_0x4e387c[_0xce6f1c(0x234)]({'botID':_0xce6f1c(0x1fb)});let _0x199ba5=[],_0x5b5f9c=[];const _0x2f4dff=_0x4e387c[_0xce6f1c(0x177)]%0x4==0x0||_0x4e387c[_0xce6f1c(0x177)]%0x4==0x3||_0x4e387c[_0xce6f1c(0x177)]%0x3==0x1?0x4:0x3;let _0x4b9973=0x0;_0x4e387c[_0xce6f1c(0x24a)]((_0x2d3460,_0x1b9cc5)=>{const _0x2d0c6b=_0xce6f1c;if(_0x1b9cc5%_0x2f4dff==0x0)_0x5b5f9c=[];_0x5b5f9c['push']({'text':_0x2d3460[_0x2d0c6b(0x155)]==_0x2d0c6b(0x1fb)?_0x2d0c6b(0x1db):_0x2d0c6b(0x1dc)+_0x2d3460[_0x2d0c6b(0x155)],'callback_data':_0x2d3460[_0x2d0c6b(0x155)]}),_0x1b9cc5%_0x2f4dff==0x0&&(_0x199ba5[_0x4b9973]=_0x5b5f9c,_0x4b9973++);}),tgBot[_0xce6f1c(0x182)](_0xc6c396[_0xce6f1c(0x25c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x199ba5}})[_0xce6f1c(0x26e)](_0x4eec96=>{telegramError(_0x4eec96);}),tgBot['on'](_0xce6f1c(0x154),async _0x66a4a2=>{const _0x385706=_0xce6f1c,_0x94d055=_0x66a4a2[_0x385706(0x201)],_0x53673c=_0x66a4a2[_0x385706(0x237)];tgBot['answerCallbackQuery'](_0x66a4a2['id'])[_0x385706(0x1b5)](async()=>{const _0x23a500=_0x385706;if(_0x94d055==_0x23a500(0x1fb)){if(settings[_0x23a500(0x224)]==_0x23a500(0x226))tgBot['sendMessage'](_0x53673c[_0x23a500(0x25c)]['id'],_0x23a500(0x248))[_0x23a500(0x26e)](_0x21a6b7=>{telegramError(_0x21a6b7);});_0x4e387c[_0x23a500(0x24a)](_0x2fbf8d=>{const _0x651a09=_0x23a500;if(_0x2fbf8d[_0x651a09(0x155)]!='all')toggleBot(_0x2fbf8d['botID'],toggleStatus(_0x2fbf8d[_0x651a09(0x155)]),_0x651a09(0x1b2));});}else{if(settings['telegramEvents']==_0x23a500(0x226))tgBot[_0x23a500(0x182)](_0x53673c[_0x23a500(0x25c)]['id'],_0x23a500(0x24e)+_0x94d055)[_0x23a500(0x26e)](_0x149148=>{telegramError(_0x149148);});toggleBot(_0x94d055,toggleStatus(_0x94d055),_0x23a500(0x1b2));}}),tgBot[_0x385706(0x23a)]('callback_query');});}}),tgBot[_0xacdce(0x1a9)](/\/disable/,_0x5d91f8=>{const _0xc63495=_0xacdce;if(!validateTelegram(_0x5d91f8))return;tgBot[_0xc63495(0x182)](_0x5d91f8[_0xc63495(0x25c)]['id'],_0xc63495(0x151))[_0xc63495(0x26e)](_0x12fcc1=>{telegramError(_0x12fcc1);}),updateSetting('telegramEnabled',![]);}),tgBot[_0xacdce(0x1a9)](/\/help/,_0x32b657=>{const _0x1291e6=_0xacdce;if(!validateTelegram(_0x32b657))return;tgBot[_0x1291e6(0x182)](_0x32b657[_0x1291e6(0x25c)]['id'],_0x286aa8)[_0x1291e6(0x26e)](_0x400259=>{telegramError(_0x400259);});}),tgBot['on'](_0xacdce(0x180),_0x21c256=>{const _0x55b7a6=_0xacdce;_0x21c256[_0x55b7a6(0x210)]()[_0x55b7a6(0x150)](_0x55b7a6(0x16d))&&(logging(_0x55b7a6(0x230)),tgBot[_0x55b7a6(0x17f)](),tgBot=null,io['to'](_0x55b7a6(0x24d))[_0x55b7a6(0x143)](_0x55b7a6(0x207),_0x55b7a6(0x230)));}),process[_0xacdce(0x157)](_0xacdce(0x283),()=>{const _0x1d176d=_0xacdce;if(tgBot)tgBot['stopPolling']();process[_0x1d176d(0x222)](0x1);}),process[_0xacdce(0x157)](_0xacdce(0x19a),()=>{const _0x100a28=_0xacdce;if(tgBot)tgBot[_0x100a28(0x17f)]();process[_0x100a28(0x222)](0x1);});}}function disableTelegram(){const _0x3b43c1=_0x10741e;tgBot&&(tgBot[_0x3b43c1(0x17f)](),tgBot=null);}function sendTelegram(_0x5224e8,_0x16f02f){const _0x5475f8=_0x10741e;if(settings[_0x5475f8(0x18d)]){if(settings[_0x5475f8(0x224)]==_0x5475f8(0x1fb)||(_0x16f02f[_0x5475f8(0x1c7)]==_0x5475f8(0x145)||_0x16f02f[_0x5475f8(0x1c7)]=='success')&&settings[_0x5475f8(0x224)]==_0x5475f8(0x1ab)||_0x16f02f[_0x5475f8(0x1c7)]==_0x5475f8(0x1af)&&settings[_0x5475f8(0x224)]==_0x5475f8(0x226)){if(tgBot&&settings[_0x5475f8(0x183)]){if(_0x16f02f[_0x5475f8(0x14b)])tgBot[_0x5475f8(0x182)](settings[_0x5475f8(0x183)],_0x16f02f[_0x5475f8(0x287)]+_0x5475f8(0x1d0)+_0x16f02f['event'])[_0x5475f8(0x26e)](_0xe6a9a5=>{telegramError(_0xe6a9a5);});else tgBot['sendMessage'](settings[_0x5475f8(0x183)],_0x5475f8(0x1dc)+_0x5224e8+_0x5475f8(0x1d0)+_0x16f02f[_0x5475f8(0x1e1)])[_0x5475f8(0x26e)](_0x3f2fed=>{telegramError(_0x3f2fed);});}}}}function getDeviceWithIp(_0x333247){return devices['find'](_0x1204d8=>_0x1204d8['ip']===_0x333247);}function temporaryAccess2FA(_0x21d1cf,_0x60191){const _0x244d2d=_0x10741e;let _0x1ded65=new Date(),_0x3001d6=![];if(lastIpApproval){if(_0x1ded65-lastIpApproval<0x1388)_0x3001d6=!![];}lastIpApproval=new Date();if(_0x3001d6)return;tgBot&&settings[_0x244d2d(0x183)]&&(tgBot[_0x244d2d(0x23a)](_0x244d2d(0x154)),tgBot[_0x244d2d(0x182)](settings[_0x244d2d(0x183)],_0x244d2d(0x1e0)+normalizeIP(_0x60191)[_0x244d2d(0x16c)]+_0x244d2d(0x257),{'parse_mode':_0x244d2d(0x268),'reply_markup':{'inline_keyboard':[[{'text':_0x244d2d(0x1d3),'callback_data':'5'},{'text':_0x244d2d(0x20f),'callback_data':'15'},{'text':_0x244d2d(0x277),'callback_data':'30'},{'text':_0x244d2d(0x23f),'callback_data':_0x244d2d(0x23f)}]]}})[_0x244d2d(0x26e)](_0x2b5bb8=>{telegramError(_0x2b5bb8);}),tgBot['on'](_0x244d2d(0x154),async _0x58fc38=>{const _0x5569c1=_0x244d2d,_0x2d8a44=_0x58fc38[_0x5569c1(0x201)],_0x5e6173=_0x58fc38[_0x5569c1(0x237)];tgBot[_0x5569c1(0x19d)](_0x58fc38['id'])[_0x5569c1(0x1b5)](async()=>{const _0x20781c=_0x5569c1;devices[_0x21d1cf][_0x20781c(0x26b)]={'clientip':_0x60191,'timestamp':new Date()[_0x20781c(0x1ca)](),'expiry':_0x2d8a44},_0x2d8a44!='reject'?(await tgBot[_0x20781c(0x182)](_0x5e6173['chat']['id'],_0x20781c(0x219)+_0x2d8a44+'\x20minutes',{'parse_mode':_0x20781c(0x268)})[_0x20781c(0x26e)](_0x463f4f=>{telegramError(_0x463f4f);}),io['to'](_0x21d1cf)[_0x20781c(0x143)]('status',{'access':{'allow':![],'reason':_0x20781c(0x198),'token':null}})):(await tgBot[_0x20781c(0x182)](_0x5e6173[_0x20781c(0x25c)]['id'],_0x20781c(0x1dd))[_0x20781c(0x26e)](_0x55e067=>{telegramError(_0x55e067);}),io['to'](_0x21d1cf)[_0x20781c(0x143)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x5569c1(0x23a)](_0x5569c1(0x154));}));}function loginAccess2FA(_0x2c63f0,_0x484994){const _0x40a4e4=_0x10741e;tgBot&&settings[_0x40a4e4(0x183)]&&(tgBot[_0x40a4e4(0x23a)](_0x40a4e4(0x154)),tgBot['sendMessage'](settings[_0x40a4e4(0x183)],_0x40a4e4(0x1df)+normalizeIP(_0x484994)[_0x40a4e4(0x16c)]+'</b>\x20?',{'parse_mode':_0x40a4e4(0x268),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x40a4e4(0x23f),'callback_data':'reject'}]]}})[_0x40a4e4(0x26e)](_0x337b83=>{telegramError(_0x337b83);}),tgBot['on']('callback_query',async _0x522b1f=>{const _0x57ea15=_0x40a4e4,_0x321af5=_0x522b1f['data'],_0x3deb9f=_0x522b1f[_0x57ea15(0x237)];tgBot[_0x57ea15(0x19d)](_0x522b1f['id'])[_0x57ea15(0x1b5)](async()=>{const _0x2c4e67=_0x57ea15;devices[_0x2c63f0]['telegram2FaApproval']={'clientip':_0x484994,'timestamp':new Date()['getTime'](),'expiry':_0x321af5},_0x321af5!='reject'?(await tgBot[_0x2c4e67(0x182)](_0x3deb9f[_0x2c4e67(0x25c)]['id'],'Login\x20accepted',{'parse_mode':_0x2c4e67(0x268)})[_0x2c4e67(0x26e)](_0x3b0ac8=>{telegramError(_0x3b0ac8);}),io['to'](_0x2c63f0)[_0x2c4e67(0x143)](_0x2c4e67(0x17a),{'access':{'allow':![],'reason':_0x2c4e67(0x198),'token':null}})):(await tgBot[_0x2c4e67(0x182)](_0x3deb9f['chat']['id'],_0x2c4e67(0x1cf))[_0x2c4e67(0x26e)](_0x3e36db=>{telegramError(_0x3e36db);}),io['to'](_0x2c63f0)[_0x2c4e67(0x143)](_0x2c4e67(0x17a),{'access':{'allow':![],'reason':_0x2c4e67(0x26f),'token':null}}));}),tgBot[_0x57ea15(0x23a)](_0x57ea15(0x154));}));}function getConfiguration(){const _0x1bc94a=_0x10741e;return dbConfig[_0x1bc94a(0x187)]('bots')[_0x1bc94a(0x20e)](_0x1bc94a(0x155))[_0x1bc94a(0x1e6)]()||[];}function getEnabledBots(){const _0x5b8a10=_0x10741e;return dbConfig[_0x5b8a10(0x187)]('bots')[_0x5b8a10(0x20e)](_0x5b8a10(0x155))[_0x5b8a10(0x17b)]({'status':_0x5b8a10(0x1d1)})[_0x5b8a10(0x1e6)]()||[];}function getDisabledBots(){const _0x2774f1=_0x10741e;return dbConfig[_0x2774f1(0x187)](_0x2774f1(0x23d))['sortBy'](_0x2774f1(0x155))[_0x2774f1(0x17b)]({'status':_0x2774f1(0x241)})[_0x2774f1(0x1e6)]()||[];}function getSettings(){const _0x302b03=_0x10741e;return dbSettings[_0x302b03(0x187)]('settings')['value']()||{'timeshift':0x0};}function getSecure(){const _0x5b003d=_0x10741e;return dbSecure['get'](_0x5b003d(0x147))[_0x5b003d(0x1e6)]()||{};}function _0x4784(_0x30fec9,_0x3099e0){const _0x14e5e8=_0x2b40();return _0x4784=function(_0x2ef8c4,_0x3ecc7b){_0x2ef8c4=_0x2ef8c4-0x142;let _0x2b40e9=_0x14e5e8[_0x2ef8c4];return _0x2b40e9;},_0x4784(_0x30fec9,_0x3099e0);}function getBlacklist(){const _0x4c5c54=_0x10741e;return dbSecure['get']('blacklist')[_0x4c5c54(0x1e6)]()||[];}function broadcastToBots(_0x2470dc,_0x589e07){const _0x19448d=_0x10741e;config[_0x19448d(0x24a)](_0x218f33=>{const _0x16a962=_0x19448d;if(_0x218f33[_0x16a962(0x17a)]=='enabled'&&_0x218f33['live']==_0x16a962(0x1bb)){if(pid[_0x218f33['botID']])pid[_0x218f33['botID']][_0x16a962(0x1da)]({[_0x2470dc]:_0x589e07});}});}function storeSettings(_0x32d253,_0x11cd3f=![]){const _0x2a6c44=_0x10741e;_0x32d253={...settings,..._0x32d253};if(_0x11cd3f&&_0x32d253['bbPassword']!='************'&&_0x32d253[_0x2a6c44(0x270)]!=''){const _0x371d31=crypt[_0x2a6c44(0x152)](secure['privateKey'],_0x32d253[_0x2a6c44(0x270)])[_0x2a6c44(0x237)][_0x2a6c44(0x286)]('@')[0x0],_0xefba98=bcrypt[_0x2a6c44(0x153)](_0x371d31,saltRounds);_0x32d253={..._0x32d253,'bbPassword':_0xefba98};}if(_0x11cd3f&&_0x32d253[_0x2a6c44(0x242)]!=_0x2a6c44(0x192)&&_0x32d253[_0x2a6c44(0x242)]!=''){const _0x4e2025=crypt[_0x2a6c44(0x152)](secure[_0x2a6c44(0x266)],_0x32d253[_0x2a6c44(0x242)])['message'][_0x2a6c44(0x286)]('@')[0x0];_0x32d253={..._0x32d253,'telegramToken':_0x4e2025};}const _0x24dfc1=_0x32d253[_0x2a6c44(0x242)]!='************'&&_0x32d253[_0x2a6c44(0x242)]!=settings[_0x2a6c44(0x242)]||_0x32d253[_0x2a6c44(0x1e8)]!=settings[_0x2a6c44(0x1e8)],_0xc9800e=_0x32d253[_0x2a6c44(0x242)]==''||_0x32d253[_0x2a6c44(0x1e8)]=='';if(_0x24dfc1)_0x32d253[_0x2a6c44(0x224)]=_0x2a6c44(0x1fb);for(const [_0x5c7202,_0x1502dd]of Object[_0x2a6c44(0x158)](_0x32d253)){if(_0x5c7202=='telegramToken'&&_0x1502dd==_0x2a6c44(0x192)){_0x32d253[_0x2a6c44(0x242)]=settings[_0x2a6c44(0x242)];continue;};if(_0x5c7202==_0x2a6c44(0x270)&&_0x1502dd==_0x2a6c44(0x192)){_0x32d253[_0x2a6c44(0x270)]=settings[_0x2a6c44(0x270)];continue;};dbSettings['set'](_0x2a6c44(0x1c8)+_0x5c7202,_0x1502dd)[_0x2a6c44(0x21e)]();}settings=_0x32d253,io['to'](_0x2a6c44(0x24d))[_0x2a6c44(0x143)](_0x2a6c44(0x250),cleanSettings()),broadcastToBots(_0x2a6c44(0x21a),settings[_0x2a6c44(0x21a)]);if(_0x24dfc1&&!_0xc9800e)initTelegram();if(_0x24dfc1&&_0xc9800e)disableTelegram();getAllClients()[_0x2a6c44(0x24a)](_0x42e077=>{const _0x11207e=_0x2a6c44;getSocket(_0x42e077['id'])['emit'](_0x11207e(0x17a),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x36a1ca,_0x43a56b){const _0x3b8781=_0x10741e;dbSettings[_0x3b8781(0x282)](_0x3b8781(0x1c8)+_0x36a1ca,_0x43a56b)['write'](),settings=getSettings(),io['to'](_0x3b8781(0x24d))[_0x3b8781(0x143)](_0x3b8781(0x250),cleanSettings());}function storeSecure(_0x28d5a7){const _0x16ee13=_0x10741e;dbSecure['get'](_0x16ee13(0x147))[_0x16ee13(0x234)](_0x28d5a7)[_0x16ee13(0x21e)](),secure=_0x28d5a7;}function addBlacklist(_0x32be80){const _0x507740=_0x10741e;cleanBlacklist();let _0x19d52b;devices[_0x32be80]['telegramIpApproval']?_0x19d52b=Math[_0x507740(0x22d)](devices[_0x32be80][_0x507740(0x26b)][_0x507740(0x16e)],loginExpiry):_0x19d52b=loginExpiry,dbSecure['get']('blacklist')['push']({'expiry':new Date()['getTime']()+_0x19d52b*0x3c*0x3e8,'token':devices[_0x32be80][_0x507740(0x232)]['token']})[_0x507740(0x21e)](),blacklist=dbSecure[_0x507740(0x187)](_0x507740(0x22b))[_0x507740(0x1e6)]();}function cleanBlacklist(){const _0x4d7fab=_0x10741e;let _0x2da471=dbSecure[_0x4d7fab(0x187)](_0x4d7fab(0x22b))['cloneDeep']()[_0x4d7fab(0x1e6)](),_0x1b43b9=new Date()['getTime']();_0x2da471[_0x4d7fab(0x24a)](_0x5c7868=>{const _0x4e9e02=_0x4d7fab;_0x5c7868[_0x4e9e02(0x16e)]<_0x1b43b9&&dbSecure['get']('blacklist')[_0x4e9e02(0x19c)]({'expiry':_0x5c7868[_0x4e9e02(0x16e)]})[_0x4e9e02(0x21e)]();});}function initStates(){const _0x2a7e04=_0x10741e;let _0x31faf2=getConfiguration();_0x31faf2[_0x2a7e04(0x24a)](_0x159aee=>{const _0xd8fce=_0x2a7e04;_0x159aee[_0xd8fce(0x265)]=_0xd8fce(0x1b2);}),storeConfiguration(_0x31faf2);}function onKeys(){const _0x1de726=new RSA();return new Promise(_0x2def3c=>{const _0x292988=_0x4784;_0x1de726[_0x292988(0x240)]()[_0x292988(0x1b5)](_0x13aeec=>{_0x2def3c(_0x13aeec);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4dce61=_0x10741e;let _0x48d93c=getConfiguration(),_0x4495b7=![];_0x48d93c[_0x4dce61(0x24a)](_0x1c3008=>{const _0xe6826b=_0x4dce61;if(_0x1c3008[_0xe6826b(0x17a)]==_0xe6826b(0x1bb))_0x1c3008[_0xe6826b(0x17a)]='enabled',_0x4495b7=!![];else _0x1c3008['status']=='stopped'&&(_0x1c3008[_0xe6826b(0x17a)]=_0xe6826b(0x241),_0x4495b7=!![]);});if(_0x4495b7)storeConfiguration(_0x48d93c);let _0x5d33ea=getSecure();if(!_0x5d33ea[_0x4dce61(0x1ba)](_0x4dce61(0x19e))){let _0x3ab330=await generateKeys();_0x5d33ea[_0x4dce61(0x169)]=_0x3ab330['publicKey'],_0x5d33ea[_0x4dce61(0x266)]=_0x3ab330[_0x4dce61(0x266)],_0x5d33ea[_0x4dce61(0x19e)]=crypto[_0x4dce61(0x185)](0x20)[_0x4dce61(0x210)](_0x4dce61(0x17c));;storeSecure(_0x5d33ea);}let _0x3f76b6=getSettings();_0x4495b7=![];!_0x3f76b6[_0x4dce61(0x1ba)](_0x4dce61(0x233))&&(_0x3f76b6[_0x4dce61(0x233)]=![],_0x3f76b6[_0x4dce61(0x239)]='',_0x3f76b6[_0x4dce61(0x270)]='',_0x3f76b6[_0x4dce61(0x22f)]=![],_0x4495b7=!![]);!_0x3f76b6['hasOwnProperty']('whitelistEnabled')&&(_0x3f76b6['whitelistEnabled']=![],_0x3f76b6[_0x4dce61(0x258)]=[],_0x3f76b6[_0x4dce61(0x15a)]=![],_0x4495b7=!![]);if(!_0x3f76b6[_0x4dce61(0x1ba)](_0x4dce61(0x18d))){if(_0x3f76b6[_0x4dce61(0x183)])_0x3f76b6[_0x4dce61(0x18d)]=!![];else _0x3f76b6[_0x4dce61(0x18d)]=![];_0x4495b7=!![];}if(_0x4495b7)storeSettings(_0x3f76b6);}function storeConfiguration(_0x4c3704){const _0x1955e9=_0x10741e;dbConfig[_0x1955e9(0x187)]('bots')['remove']()[_0x1955e9(0x21e)](),dbConfig[_0x1955e9(0x187)]('bots')[_0x1955e9(0x234)](..._0x4c3704)[_0x1955e9(0x21e)](),config=_0x4c3704;}function resetPassword(){const _0x8a49c2=_0x10741e;tgBot&&settings[_0x8a49c2(0x183)]&&(tgBot[_0x8a49c2(0x23a)]('callback_query'),tgBot[_0x8a49c2(0x182)](settings[_0x8a49c2(0x183)],_0x8a49c2(0x274),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x8a49c2(0x259),'callback_data':_0x8a49c2(0x259)},{'text':'no','callback_data':'no'}]]}})[_0x8a49c2(0x26e)](_0x56273c=>{telegramError(_0x56273c);}),tgBot['on']('callback_query',async _0x3c7e2d=>{const _0x4cd0a0=_0x8a49c2,_0x2821f7=_0x3c7e2d[_0x4cd0a0(0x201)],_0x241d4d=_0x3c7e2d[_0x4cd0a0(0x237)];tgBot[_0x4cd0a0(0x19d)](_0x3c7e2d['id'])[_0x4cd0a0(0x1b5)](async()=>{const _0x400668=_0x4cd0a0;if(_0x2821f7!='no'){const _0x62df98=0xf,_0x69bb43=_0x400668(0x1e2),_0x3d185d=Array[_0x400668(0x1be)](crypto[_0x400668(0x165)](new Uint32Array(_0x62df98)))['map'](_0x2c63c4=>_0x69bb43[_0x2c63c4%_0x69bb43[_0x400668(0x177)]])[_0x400668(0x1ee)](''),_0x53cd1b=bcrypt[_0x400668(0x153)](_0x3d185d,saltRounds);storeSettings({'bbPassword':_0x53cd1b}),await tgBot[_0x400668(0x182)](_0x241d4d['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3d185d,{'parse_mode':_0x400668(0x268)})[_0x400668(0x26e)](_0x5ec2a5=>{telegramError(_0x5ec2a5);});}else await tgBot[_0x400668(0x182)](_0x241d4d[_0x400668(0x25c)]['id'],'Password\x20reset\x20rejected')[_0x400668(0x26e)](_0x3b6a02=>{telegramError(_0x3b6a02);});}),tgBot[_0x4cd0a0(0x23a)](_0x4cd0a0(0x154));}));}function _0x2b40(){const _0x591577=['reason','idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','unlinkSync','length','Notifications\x20types:\x20','lowdb/adapters/FileSync','status','filter','hex','isDirectory','No\x20bots\x20running\x20right\x20now','stopPolling','polling_error','add-bot','sendMessage','telegramChatId','telegram2FaApproval','randomBytes','error\x20while\x20deleting\x20config\x20files:\x20','get','createServer','2FA\x20required','bb-config.json','apply','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','telegramEnabled','Balance\x20Bot','get-portfolio','\x20/\x20','pidRefreshToken','************','restarting\x20Bot\x20','new','access\x20timeout','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','getFullYear','reload','126796iPtGDz','SIGTERM','search','remove','answerCallbackQuery','secret','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','kind','yargs/yargs','telegram','test','You\x20can\x20use\x20the\x20following\x20commands:\x0a','exp','2FA\x20login\x20required','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Token\x20blacklisted','onText','path','alerts','Unauthorized\x20attempt\x20to\x20log\x20out','login\x20not\x20required','date-fns','order','whitelistEnabled','Unauthorized\x20attempt\x20to\x20store\x20configuration','stopped','/help\x20-\x20show\x20available\x20commands\x0a','static','then','127.0.0.1','started','ipv6','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','hasOwnProperty','running','/:bot/configuration','argv','from','match','-events.json','(((.+)+)+)+$','build','find','/restart\x20-\x20restart\x20bot(s)\x0a','sendFile','encryptedUuid','type','settings.','assign','getTime','log','default','hybrid-crypto-js','temporary\x20access\x20timeout','Login\x20rejected','\x20>\x20','enabled','remoteAddress','5\x20min','store-settings','verify','948ZMpZoP','starting\x20bot\x20|\x20Bot\x20','bb/','build2','send','All\x20bots','Bot\x20','Temporary\x20access\x20rejected','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Allow\x20login\x20from\x20IP\x20address\x20<b>','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','event','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','store-configuration','listen','30OyjHyT','value','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','telegramUsername','<b>Balance\x20Bot\x20status:</b>\x0a','https://hodlerhacks.com','getUTCHours','mkdirSync','8RXXkTq','join','uuid','/:bot/history','version','bb-secure.json','295bToJij','1622916RBukdX','auth','/:bot/performance','lowdb','headers',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','config/','all','referer','bb-settings.json','ipc','clientip','stop','data','sign','/:bot/support','/disable\x20-\x20disable\x20notifications\x0a','temporary\x20access\x20not\x20allowed','connected','notification','Unauthorized\x20login\x20attempt\x20(timeout)','page','existsSync','getSeconds','login','connection','sortBy','15\x20min','toString','3000','2FA\x20login\x20token\x20generated','use','restart','token','parse','initclient','login\x20required','Access\x20enabled\x20for\x20','timeshift','getStartingBalances','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','get-starting-balances','write','-performance.json','index.html','cancel-loading','exit','disconnect','telegramEvents','/:bot/portfolio','orders','getDate','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','User\x20has\x20been\x20validated','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','blacklist','login\x20token\x20generated','max','username','f2aRequired','Invalid\x20Telegram\x20token','/status\x20-\x20show\x20bot(s)\x20status\x0a','access','loginRequired','push','2420280zqCWlB','function','message','/enable\x20-\x20enable\x20notifications\x0a','bbUsername','removeListener','server','copyFileSync','bots','UA-192771731-1','reject','generateKeyPairAsync','disabled','telegramToken','constructor','\x20only\x0a','::ffff:127.0.0.1','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','get-logs','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Bot\x20Mgr\x20>\x20','forEach','1335ggNKfO','/:bot','botmanager','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','settings','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/on\x20-\x20start\x20bot(s)\x0a','Notifications\x20enabled\x0a','new-disabled','compareSync','NTBA_FIX_319','</b>\x20?','whitelist','yes','Invalid\x20IP\x20address','port','chat','/:bot/coins','analytics','sha256','allow','logged\x20out','fork','650243SWHiuy','toIPv4MappedAddress','live','privateKey','-config.json','HTML','\x20|\x20','RSA','telegramIpApproval','<b>Telegram\x20bot\x20status:</b>\x0a','-----------------------------------------------------------------------------------','catch','2FA\x20login\x20rejected','bbPassword','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20get\x20portfolio','deleted\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','isIPv4MappedAddress','apiKey','30\x20min','inherit','pidExpireLogin','getMonth','padStart','Unauthorized\x20attempt\x20to\x20add\x20bot','bot.js','store-headless','logout','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','46482fmNDBV','set','SIGINT','RSA-OAEP','password','split','botname','invalid\x20credentials','args','add','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','storeHeadless','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','cancelLoading','getHours','emit','name','error','sockets','secure','Unauthorized\x20attempt\x20to\x20update\x20settings','conn','enabled\x20Bot\x20','showname','@analytics/google-analytics','node-telegram-bot-api','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','update-bot','includes','Notifications\x20disabled','decrypt','hashSync','callback_query','botID','keys','once','entries','starting\x20new\x20bot\x20|\x20Bot\x20','temporaryAccessAllowed','handshake','No\x20authentication\x20token','1386847uJoSgc','bot-','../install.js','/off\x20-\x20stop\x20bot(s)\x0a','place-order','reset-password','success','crypto','randomFillSync','defaults',':\x20Bot\x20Mgr\x20>\x20','Invalid\x20username\x20or\x20IP\x20address','publicKey','temporary\x20token\x20generated','getMinutes','show','404\x20Not\x20Found','expiry','kill','ipaddr.js','store','socket.io'];_0x2b40=function(){return _0x591577;};return _0x2b40();}function logging(_0x29a932){const _0x55813d=_0x10741e;console[_0x55813d(0x1cb)](getTimeStamp()+_0x55813d(0x167)+_0x29a932);if(tgBot&&settings[_0x55813d(0x183)]&&settings[_0x55813d(0x224)]!=_0x55813d(0x226))tgBot[_0x55813d(0x182)](settings['telegramChatId'],_0x55813d(0x249)+_0x29a932)[_0x55813d(0x26e)](_0x1c6d19=>{telegramError(_0x1c6d19);});}function getServerTime(){const _0x10371c=_0x10741e,_0x5b2109=new Date();return _0x5b2109['getFullYear']()+'/'+(_0x5b2109[_0x10371c(0x27a)]()+0x1)[_0x10371c(0x210)]()[_0x10371c(0x27b)](0x2,'0')+'/'+_0x5b2109[_0x10371c(0x227)]()[_0x10371c(0x210)]()[_0x10371c(0x27b)](0x2,'0')+'\x20'+_0x5b2109[_0x10371c(0x142)]()[_0x10371c(0x210)]()[_0x10371c(0x27b)](0x2,'0')+':'+_0x5b2109['getMinutes']()[_0x10371c(0x210)]()[_0x10371c(0x27b)](0x2,'0')+':'+_0x5b2109[_0x10371c(0x20b)]()['toString']()[_0x10371c(0x27b)](0x2,'0');}function getTimeStamp(){const _0x4f6a75=_0x10741e,_0x3d009f=shiftedTime();return _0x3d009f[_0x4f6a75(0x197)]()+'/'+(_0x3d009f[_0x4f6a75(0x27a)]()+0x1)[_0x4f6a75(0x210)]()['padStart'](0x2,'0')+'/'+_0x3d009f[_0x4f6a75(0x227)]()[_0x4f6a75(0x210)]()['padStart'](0x2,'0')+'\x20'+_0x3d009f[_0x4f6a75(0x142)]()[_0x4f6a75(0x210)]()['padStart'](0x2,'0')+':'+_0x3d009f[_0x4f6a75(0x16b)]()[_0x4f6a75(0x210)]()[_0x4f6a75(0x27b)](0x2,'0')+':'+_0x3d009f[_0x4f6a75(0x20b)]()[_0x4f6a75(0x210)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x4c2c44=_0x10741e,_0x1226d6=new Date();let _0x491ad4=_0x1226d6;if(settings[_0x4c2c44(0x21a)]&&settings[_0x4c2c44(0x21a)]!==0x0)_0x491ad4=fns[_0x4c2c44(0x28a)](_0x1226d6,{'hours':settings[_0x4c2c44(0x21a)]});return _0x491ad4;}function startScheduler(){const _0x55b9c7=_0x10741e;let _0x1b8dfb=new Date()[_0x55b9c7(0x1eb)]();_0x1b8dfb==0x1&&backupConfigFiles();_0x1b8dfb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3c295e=_0x10741e;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3c295e(0x24a)](_0x38ef04=>{const _0x3f98c5=_0x3c295e;if(!_0x38ef04[_0x3f98c5(0x17d)]())fs[_0x3f98c5(0x23c)](configpath+_0x38ef04[_0x3f98c5(0x144)],configbackuppath+_0x38ef04[_0x3f98c5(0x144)]);});}function triggerAnalytics(){const _0x17a704=_0x10741e;analytics[_0x17a704(0x209)]({'title':'Balance\x20Bot\x20Server','href':_0x17a704(0x1ea),'path':'/v'+serverversion});}function validateCredentials(_0x6169c1,_0x19a405){const _0x3e3450=_0x10741e;if(_0x6169c1['username']==settings['bbUsername']&&bcrypt[_0x3e3450(0x255)](_0x6169c1[_0x3e3450(0x285)],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x4df602=generateLoginToken(_0x19a405);return{'allow':!![],'reason':_0x3e3450(0x22c),'token':_0x4df602};}}else return{'allow':![],'reason':_0x3e3450(0x288),'token':null};}function refreshToken(_0x22399a){const _0xc0387e=_0x10741e,_0x745b8b=generateLoginToken(_0x22399a);return{'allow':!![],'reason':_0xc0387e(0x22c),'token':_0x745b8b};}function validateAccess(_0x305b79,_0x48b49d){const _0x3c7fad=_0x10741e;let _0xad2348=devices[_0x48b49d]['ip'],_0xc1deef;const _0x3c4e26=_0x5acabc=>{const _0x1a4cc4=_0x4784;if(settings[_0x1a4cc4(0x233)]){if(settings[_0x1a4cc4(0x22f)]){if(telegram2FaApproved(_0x48b49d)){const _0x5965ba=generateLoginToken(_0x48b49d);return{'allow':!![],'reason':_0x1a4cc4(0x212),'token':_0x5965ba};}else return{'allow':![],'reason':_0x1a4cc4(0x218),'token':null};}else return _0xc1deef=validToken(_0x5acabc,_0x48b49d),_0xc1deef[_0x1a4cc4(0x1ba)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5acabc}:{'allow':![],'reason':_0x1a4cc4(0x218),'token':null};}else return{'allow':!![],'reason':_0x1a4cc4(0x1ad),'token':null};};if(settings[_0x3c7fad(0x1b0)]){let _0x4f56ef=[...settings['whitelist'],'::1',_0x3c7fad(0x245),_0x3c7fad(0x1b6)];if(_0x4f56ef[_0x3c7fad(0x150)](_0xad2348))return _0x3c4e26(_0x305b79);else{_0xc1deef=validToken(_0x305b79,_0x48b49d);if(_0xc1deef[_0x3c7fad(0x1ba)](_0x3c7fad(0x163)))return _0x3c4e26(_0x305b79);else{if(telegramIpApproved(_0x48b49d)){const _0x31bb6f=generateToken(_0x48b49d);return _0xc1deef=_0x3c4e26(_0x305b79),_0xc1deef['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x31bb6f}:_0xc1deef;}else return settings[_0x3c7fad(0x15a)]?{'allow':![],'reason':_0x3c7fad(0x189),'token':null}:{'allow':![],'reason':_0x3c7fad(0x205),'token':null};}}}else return _0x3c4e26(_0x305b79);}function timelyDecrypt(_0x1550c2,_0x37c22a=!![]){const _0x4d7241=_0x10741e;if(_0x1550c2)try{const _0x2fec7a=crypt['decrypt'](secure[_0x4d7241(0x266)],_0x1550c2)[_0x4d7241(0x237)],_0xd60081=_0x2fec7a[_0x4d7241(0x286)]('@')[0x0],_0x33c40e=_0x2fec7a['split']('@')[0x1],_0x587733=new Date()[_0x4d7241(0x1ca)]();if(_0x37c22a){if(_0x587733-_0x33c40e<maxSecretAge*0x3e8)return _0xd60081;else return![];}else return _0xd60081;}catch(_0x2313d5){return![];}else return![];}const validToken=(_0xadc14a,_0x1ffa59)=>{const _0x133d6c=_0x10741e,_0x16fa58=devices[_0x1ffa59]['ip'];if(!_0xadc14a)return{'error':_0x133d6c(0x15c)};for(let _0x215b11 of blacklist){if(_0x215b11['token']==_0xadc14a)return{'error':_0x133d6c(0x1a8)};}let _0x2676ad;try{_0x2676ad=jwt[_0x133d6c(0x1d5)](_0xadc14a,secure[_0x133d6c(0x19e)]+_0x1ffa59);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x2676ad['hasOwnProperty']('clientip')&&!_0x2676ad['hasOwnProperty'](_0x133d6c(0x22e))||!_0x2676ad['hasOwnProperty'](_0x133d6c(0x1a5)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2676ad[_0x133d6c(0x1ba)](_0x133d6c(0x22e))&&_0x2676ad[_0x133d6c(0x1ba)]('clientip')){const {clientip:_0x5dcf74}=_0x2676ad;return _0x16fa58==_0x5dcf74?{'success':_0x133d6c(0x229)}:{'error':_0x133d6c(0x25a)};}else{if(_0x2676ad[_0x133d6c(0x1ba)](_0x133d6c(0x22e))&&_0x2676ad[_0x133d6c(0x1ba)](_0x133d6c(0x1ff))){const {username:_0x39a3f2,clientip:_0x374a6c}=_0x2676ad;return settings[_0x133d6c(0x239)]==_0x39a3f2&&_0x16fa58==_0x374a6c?{'success':_0x133d6c(0x229)}:{'error':_0x133d6c(0x168)};}}},generateLoginToken=_0x429b28=>{const _0x181b7e=_0x10741e;if(_0x429b28){const _0x164692=devices[_0x429b28]['ip'];return jwt['sign']({'username':settings[_0x181b7e(0x239)],'clientip':_0x164692},secure[_0x181b7e(0x19e)]+_0x429b28,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3bc51b=>{const _0x4163ab=_0x10741e;if(_0x3bc51b){const _0x4c6761=devices[_0x3bc51b]['ip'];return jwt[_0x4163ab(0x202)]({'clientip':_0x4c6761},secure[_0x4163ab(0x19e)]+_0x3bc51b,{'expiresIn':devices[_0x3bc51b][_0x4163ab(0x26b)][_0x4163ab(0x16e)]*0x3c});}else return![];},telegramIpApproved=_0x17a923=>{const _0x162bec=_0x10741e;let _0x47590b=![];return devices[_0x17a923][_0x162bec(0x26b)]&&devices[_0x17a923][_0x162bec(0x26b)][_0x162bec(0x16e)]!='reject'&&(_0x47590b=devices[_0x17a923][_0x162bec(0x26b)]['clientip']==devices[_0x17a923]['ip']&&new Date()[_0x162bec(0x1ca)]()-devices[_0x17a923][_0x162bec(0x26b)]['timestamp']<devices[_0x17a923][_0x162bec(0x26b)][_0x162bec(0x16e)]*0x3c*0x3e8),_0x47590b;},telegram2FaApproved=_0x49e118=>{const _0x449765=_0x10741e;let _0x3d2749=![];return devices[_0x49e118][_0x449765(0x184)]&&devices[_0x49e118][_0x449765(0x184)][_0x449765(0x16e)]!=_0x449765(0x23f)&&(_0x3d2749=devices[_0x49e118]['telegram2FaApproval'][_0x449765(0x1ff)]==devices[_0x49e118]['ip']&&new Date()[_0x449765(0x1ca)]()-devices[_0x49e118][_0x449765(0x184)]['timestamp']<devices[_0x49e118][_0x449765(0x184)][_0x449765(0x16e)]*0x3c*0x3e8),_0x3d2749;},normalizeIP=_0x406dd=>{const _0x18940e=_0x10741e;let _0x5ea40e=null,_0x2f4eaf=null;if(ipaddr['isValid'](_0x406dd)){const _0xf19ac2=ipaddr[_0x18940e(0x216)](_0x406dd);_0xf19ac2[_0x18940e(0x1a0)]()===_0x18940e(0x1b8)?(_0xf19ac2[_0x18940e(0x275)]()&&(_0x5ea40e=_0xf19ac2['toIPv4Address']()['toString']()),_0x2f4eaf=_0xf19ac2['toString']()):(_0x5ea40e=_0xf19ac2['toString'](),_0x2f4eaf=_0xf19ac2[_0x18940e(0x264)]()[_0x18940e(0x210)]());}return{'show':_0x5ea40e?_0x5ea40e:_0x2f4eaf,'store':_0x2f4eaf};};