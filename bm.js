const _0x1b412f=_0x3baf;(function(_0xe1f77f,_0x4e5f32){const _0x89a6c1=_0x3baf,_0x24db89=_0xe1f77f();while(!![]){try{const _0x16d71a=parseInt(_0x89a6c1(0x141))/0x1+parseInt(_0x89a6c1(0x134))/0x2*(parseInt(_0x89a6c1(0x1f1))/0x3)+-parseInt(_0x89a6c1(0x279))/0x4*(-parseInt(_0x89a6c1(0x168))/0x5)+-parseInt(_0x89a6c1(0x178))/0x6*(parseInt(_0x89a6c1(0x29c))/0x7)+-parseInt(_0x89a6c1(0x17c))/0x8*(parseInt(_0x89a6c1(0x2bf))/0x9)+-parseInt(_0x89a6c1(0x1ce))/0xa+parseInt(_0x89a6c1(0x125))/0xb*(parseInt(_0x89a6c1(0x1cd))/0xc);if(_0x16d71a===_0x4e5f32)break;else _0x24db89['push'](_0x24db89['shift']());}catch(_0x24114e){_0x24db89['push'](_0x24db89['shift']());}}}(_0x4dcf,0xa6781));const _0x2ba666=function(){let _0xb3fbde=!![];return function(_0x3de471,_0x556334){const _0x24323b=_0xb3fbde?function(){const _0x22aa72=_0x3baf;if(_0x556334){const _0x1fcfe8=_0x556334[_0x22aa72(0x1b4)](_0x3de471,arguments);return _0x556334=null,_0x1fcfe8;}}:function(){};return _0xb3fbde=![],_0x24323b;};}(),_0x3846dd=_0x2ba666(this,function(){const _0x271ac5=_0x3baf;return _0x3846dd[_0x271ac5(0x1dd)]()[_0x271ac5(0x149)](_0x271ac5(0x1c3))[_0x271ac5(0x1dd)]()[_0x271ac5(0x1cb)](_0x3846dd)[_0x271ac5(0x149)]('(((.+)+)+)+$');});_0x3846dd();'use strict';process[_0x1b412f(0x14b)][_0x1b412f(0x328)]=0x1;const childProcess=require(_0x1b412f(0x330)),fs=require('fs'),fns=require(_0x1b412f(0x293)),low=require(_0x1b412f(0x15a)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x1b412f(0x224)),crypto=require(_0x1b412f(0x2f7)),Crypt=require(_0x1b412f(0x1bb))[_0x1b412f(0x259)],RSA=require(_0x1b412f(0x1bb))[_0x1b412f(0x284)],bcrypt=require('bcryptjs'),jwt=require(_0x1b412f(0x20a)),ipaddr=require(_0x1b412f(0x16e)),argv=require(_0x1b412f(0x2c7))(process[_0x1b412f(0x194)][_0x1b412f(0x299)](0x2))[_0x1b412f(0x194)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x1b412f(0x204)),axios=require(_0x1b412f(0x25a)),{GraphQLClient,gql}=require(_0x1b412f(0x2c5)),util=require(_0x1b412f(0x14e)),fileUpload=require(_0x1b412f(0x313)),{networkInterfaces}=require('os'),PORT=argv['port']||_0x1b412f(0x146),pattern=/^[0-9]{2,4}$/;!pattern[_0x1b412f(0x233)](PORT)&&(console[_0x1b412f(0x1b8)](_0x1b412f(0x219)+PORT+_0x1b412f(0x236)),process[_0x1b412f(0x2c4)](0x1));const HOST=argv[_0x1b412f(0x16d)]||null,userID=argv[_0x1b412f(0x1e4)]||'',debugging=argv['d']||![],nodeversion=process[_0x1b412f(0x21c)][_0x1b412f(0x1db)];let bbpath=_0x1b412f(0x317),bbpath2='';const botfile=_0x1b412f(0x2a7),configfile='bb-config.json',settingsfile=_0x1b412f(0x215),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x1b412f(0x1d2))[_0x1b412f(0x2dd)]||_0x1b412f(0x285),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x1b412f(0x138)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1b412f(0x316)),configpath=userID?bbpath+_0x1b412f(0x2d3)+userID+'/':bbpath+_0x1b412f(0x2d3),configbackuppath=configpath+_0x1b412f(0x297),logspath=userID?bbpath+_0x1b412f(0x196)+userID+'/':bbpath+_0x1b412f(0x196),zippath=userID?bbpath+_0x1b412f(0x2fd)+userID+'/':bbpath+_0x1b412f(0x2fd),loggerfile=fs['createWriteStream'](logspath+_0x1b412f(0x143),{'flags':'a'}),temppath=userID?bbpath+_0x1b412f(0x1f6)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs[_0x1b412f(0x12c)](configpath);!fs[_0x1b412f(0x138)](configbackuppath)&&fs[_0x1b412f(0x12c)](configbackuppath);!fs[_0x1b412f(0x138)](logspath)&&fs[_0x1b412f(0x12c)](logspath);!fs[_0x1b412f(0x138)](zippath)&&fs[_0x1b412f(0x12c)](zippath);!fs[_0x1b412f(0x138)](temppath)&&fs[_0x1b412f(0x12c)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1b412f(0x2b3)]({'bots':[]})[_0x1b412f(0x14a)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1b412f(0x2b3)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x1b412f(0x14a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1b412f(0x2b3)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x1b412f(0x2ab),'rsaStandard':_0x1b412f(0x23f)});const saltRounds=0xa,mixpanel=Mixpanel[_0x1b412f(0x324)](_0x1b412f(0x228),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1b412f(0x1a2)]&&(settings['telegramToken']!=''&&settings[_0x1b412f(0x1a2)]!='***')&&settings[_0x1b412f(0x207)]&&settings[_0x1b412f(0x207)]!='')initTelegram();const parseColor=(_0x2f939a,_0x393855)=>{const _0x1a3e4c=_0x1b412f,_0x24b185=/#[A-Z]{3}#/g;if(typeof _0x2f939a==_0x1a3e4c(0x2c6)){!_0x393855?_0x2f939a=_0x2f939a[_0x1a3e4c(0x2f9)](_0x24b185,''):(_0x2f939a=_0x2f939a['replace'](/#BLU#/g,_0x1a3e4c(0x2b2)),_0x2f939a=_0x2f939a[_0x1a3e4c(0x2f9)](/#RED#/g,_0x1a3e4c(0x167)),_0x2f939a=_0x2f939a['replace'](/#YEL#/g,_0x1a3e4c(0x148)),_0x2f939a=_0x2f939a[_0x1a3e4c(0x2f9)](/#MAG#/g,_0x1a3e4c(0x266)),_0x2f939a=_0x2f939a[_0x1a3e4c(0x2f9)](/#CYA#/g,'\x1b[36m'),_0x2f939a=_0x2f939a[_0x1a3e4c(0x2f9)](/#RES#/g,_0x1a3e4c(0x153)));;}return _0x2f939a;},logger={'screen':_0x11366e=>{console['log'](parseColor(_0x11366e,!![]));},'simple':_0x48b286=>{const _0x4274f6=_0x1b412f;console[_0x4274f6(0x1b8)](parseColor(_0x48b286,!![])),loggerfile[_0x4274f6(0x14a)](util[_0x4274f6(0x24d)](parseColor(_0x48b286,![]))+'\x0a');},'full':async _0x37987e=>{const _0x3311a1=_0x1b412f,_0x4efb1f=getTimeStamp()+_0x3311a1(0x2ed)+_0x37987e;console[_0x3311a1(0x1b8)](parseColor(_0x4efb1f,!![])),loggerfile[_0x3311a1(0x14a)](util[_0x3311a1(0x24d)](parseColor(_0x4efb1f,![]))+'\x0a');if(tgBot&&settings[_0x3311a1(0x124)]&&settings[_0x3311a1(0x2df)]!='orders')await sendTelegram(settings['telegramChatId'],_0x3311a1(0x1a6)+parseColor(_0x37987e,![]));},'debug':async(_0x2979d7,_0x29eb44='')=>{const _0x448b2a=_0x1b412f,_0x210165=getTimeStamp()+_0x448b2a(0x231)+_0x2979d7;if(debugging)console[_0x448b2a(0x1b8)](parseColor(_0x210165,!![]));loggerfile['write'](util[_0x448b2a(0x24d)](parseColor(_0x210165,![]))+'\x0a');if(_0x29eb44){if(debugging)console[_0x448b2a(0x1b8)](_0x29eb44);loggerfile[_0x448b2a(0x14a)](util[_0x448b2a(0x24d)](_0x29eb44)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x30b406){const _0x27430c=_0x1b412f;_0x30b406[_0x27430c(0x1dd)]()[_0x27430c(0x150)](_0x27430c(0x253))?(logger[_0x27430c(0x14c)](_0x27430c(0x235)+_0x30b406[_0x27430c(0x1f5)]+_0x27430c(0x185)),process[_0x27430c(0x2ef)]({'terminate':!![]},_0x1c5b63=>{})):logger[_0x27430c(0x14c)](_0x30b406);}),process['on'](_0x1b412f(0x2c4),()=>{const _0xfcf160=_0x1b412f;stopAllBots(),process[_0xfcf160(0x2c4)](0x0);}),process['on'](_0x1b412f(0x133),()=>{const _0x414394=_0x1b412f;stopAllBots(),process[_0x414394(0x2c4)](0x0);}),process['on'](_0x1b412f(0x2db),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1b412f(0x1d2))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x1b412f(0x31f)](app);app[_0x1b412f(0x177)](fileUpload({'useTempFiles':!![]})),app[_0x1b412f(0x171)](_0x1b412f(0x175),async(_0x2b0c5e,_0x1aff89)=>{const _0x5c0f5d=_0x1b412f,_0x3f1f60=_0x2b0c5e[_0x5c0f5d(0x1b9)]['type'],_0x3acf4a=getClientsWithBotID(_0x5c0f5d(0x173)),_0x1a7f17=_0x2b0c5e['headers'][_0x5c0f5d(0x161)],_0x153178=timelyDecrypt(_0x1a7f17,![]),_0x5f10f9=_0x3acf4a[_0x5c0f5d(0x250)](_0x32cb22=>_0x32cb22[_0x5c0f5d(0x161)]==_0x153178);if(_0x5f10f9){const _0x2526df=normalizeIP(_0x2b0c5e['socket'][_0x5c0f5d(0x20f)])[_0x5c0f5d(0x22d)],_0x554a7e=_0x2b0c5e['headers'][_0x5c0f5d(0x239)];if(validateAccess(_0x554a7e,_0x153178,_0x2526df)[_0x5c0f5d(0x18a)])_0x3f1f60==_0x5c0f5d(0x2ba)&&await backupConfigFiles(),await zipFiles(_0x3f1f60),_0x1aff89[_0x5c0f5d(0x305)](zippath+(_0x3f1f60+_0x5c0f5d(0x2e0)),_0x422bd6=>{const _0x5101e3=_0x5c0f5d;_0x422bd6&&(logger[_0x5101e3(0x127)](_0x5101e3(0x1ab)+_0x3f1f60),logger[_0x5101e3(0x14c)](_0x422bd6));});else logger[_0x5c0f5d(0x127)](_0x5c0f5d(0x19f)+_0x3f1f60+_0x5c0f5d(0x283));}else logger[_0x5c0f5d(0x127)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3f1f60+_0x5c0f5d(0x1a8));}),app[_0x1b412f(0x13e)](_0x1b412f(0x169),async(_0x2ca106,_0x3c4eae)=>{const _0x474ad3=_0x1b412f,_0x3e5e9f=getClientsWithBotID(_0x474ad3(0x173)),_0x5aa26b=_0x2ca106[_0x474ad3(0x2c8)][_0x474ad3(0x161)],_0x200096=timelyDecrypt(_0x5aa26b,![]),_0x3bb359=_0x3e5e9f[_0x474ad3(0x250)](_0xc1f154=>_0xc1f154[_0x474ad3(0x161)]==_0x200096);logger['debug']('Backup\x20file\x20uploaded');if(_0x3bb359){const _0x2dc7d1=normalizeIP(_0x2ca106[_0x474ad3(0x318)][_0x474ad3(0x20f)])['store'],_0x11768f=_0x2ca106[_0x474ad3(0x2c8)]['tkn'];if(validateAccess(_0x11768f,_0x200096,_0x2dc7d1)['allow']){if(_0x2ca106[_0x474ad3(0x2e1)]){const _0x5d1090=_0x2ca106['files'][_0x474ad3(0x1c9)];await _0x5d1090['mv'](temppath+_0x5d1090[_0x474ad3(0x132)]),_0x3c4eae[_0x474ad3(0x2ef)]({'status':!![],'message':_0x474ad3(0x302)});const _0x4e1434=getBotsWithMode();_0x4e1434['length']>0x0?confirmRestore(temppath,_0x5d1090['name']):unzipFile(temppath,_0x5d1090[_0x474ad3(0x132)]);}}else logger[_0x474ad3(0x127)](_0x474ad3(0x331));}else logger[_0x474ad3(0x127)](_0x474ad3(0x1d7));}),app[_0x1b412f(0x177)](express[_0x1b412f(0x19b)](path['join'](__dirname,bbpath2,'build2'))),app['use'](express[_0x1b412f(0x19b)](path[_0x1b412f(0x130)](__dirname,bbpath2,'build'))),app[_0x1b412f(0x171)]('/',function(_0x5b9ec0,_0x33d96d){const _0x2a0d6d=_0x1b412f;_0x33d96d[_0x2a0d6d(0x30a)](path[_0x2a0d6d(0x130)](__dirname,bbpath2,_0x2a0d6d(0x2a6),_0x2a0d6d(0x157)));}),app[_0x1b412f(0x171)](_0x1b412f(0x2b6),function(_0xcb4970,_0xee47bb){const _0x2ae572=_0x1b412f;_0xee47bb[_0x2ae572(0x30a)](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x1b412f(0x171)](_0x1b412f(0x321),(_0x2c316c,_0x35f5b4)=>{const _0x38309f=_0x1b412f;_0x35f5b4['sendFile'](path[_0x38309f(0x130)](__dirname,bbpath2,_0x38309f(0x295),_0x38309f(0x157)));}),app[_0x1b412f(0x171)](_0x1b412f(0x1cc),(_0x567cf0,_0x3e2da8)=>{const _0x5ea047=_0x1b412f;_0x3e2da8[_0x5ea047(0x30a)](path['join'](__dirname,bbpath2,_0x5ea047(0x295),_0x5ea047(0x157)));}),app[_0x1b412f(0x171)](_0x1b412f(0x213),(_0x3ec752,_0x27cf30)=>{const _0x4da4fe=_0x1b412f;_0x27cf30[_0x4da4fe(0x30a)](path[_0x4da4fe(0x130)](__dirname,bbpath2,_0x4da4fe(0x295),_0x4da4fe(0x157)));}),app[_0x1b412f(0x171)](_0x1b412f(0x286),(_0x4931e7,_0x354199)=>{const _0x4ed523=_0x1b412f;_0x354199['sendFile'](path['join'](__dirname,bbpath2,_0x4ed523(0x295),_0x4ed523(0x157)));}),app[_0x1b412f(0x171)](_0x1b412f(0x312),(_0xded285,_0x300bc2)=>{const _0x447ddd=_0x1b412f;_0x300bc2[_0x447ddd(0x30a)](path[_0x447ddd(0x130)](__dirname,bbpath2,'build','index.html'));}),app[_0x1b412f(0x171)](_0x1b412f(0x1a3),(_0xd5246,_0x38b928)=>{const _0x436a4b=_0x1b412f;_0x38b928[_0x436a4b(0x30a)](path[_0x436a4b(0x130)](__dirname,bbpath2,'build',_0x436a4b(0x157)));});if(HOST)http[_0x1b412f(0x249)](PORT,HOST);else http[_0x1b412f(0x249)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x19ca3a=_0x1b412f;let _0x3e9d98=_0x19ca3a(0x18e);const _0x427901=networkInterfaces(),_0x4b174d={};for(const _0x4311ac of Object[_0x19ca3a(0x2be)](_0x427901)){for(const _0x5de523 of _0x427901[_0x4311ac]){if((_0x5de523[_0x19ca3a(0x205)]==_0x19ca3a(0x139)||_0x5de523[_0x19ca3a(0x205)]==0x4)&&!_0x5de523[_0x19ca3a(0x2cf)]){const _0xc0916=ipaddr[_0x19ca3a(0x2d4)](_0x5de523[_0x19ca3a(0x170)])[_0x19ca3a(0x19a)]();_0xc0916!=_0x19ca3a(0x1e1)&&(!_0x4b174d[_0x4311ac]&&(_0x4b174d[_0x4311ac]=[]),_0x4b174d[_0x4311ac][_0x19ca3a(0x306)](_0x5de523[_0x19ca3a(0x170)]),_0x3e9d98=_0x5de523[_0x19ca3a(0x170)]);}}}return{'serverip':_0x3e9d98,'netinterfaces':_0x4b174d};}function _0x4dcf(){const _0x5c7312=['privateKey','add-bot','Login\x20rejected','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','allow','alerts','/names\x20-\x20show\x20bot\x20names\x0a','orders','[ip-address]','reinstall','login\x20required','type','whitelist','Markdown','argv','restore-backup-file','logs/','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','from','debug','range','static','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','::ffff:127.0.0.1','connected','Unauthorized\x20attempt\x20to\x20download\x20','Unauthorized\x20attempt\x20to\x20get\x20events','bbPassword','telegramToken','/:bot/support','telegrammsg','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Bot\x20Mgr\x20>\x20','-----------------------------------------------------------------------------------','\x20(2)','on_','then','Failed\x20to\x20download\x20','status','Temporary\x20access\x20rejected','::1','/help\x20-\x20show\x20available\x20commands\x0a','telegram2FaApproval','Yes','getSeconds','started','apply','reset-password','action','live','log','params','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','hybrid-crypto-js','Unauthorized\x20login\x20attempt\x20(timeout)','apiSecret','randomBytes','-results.json','***','toggleBotMode','Restore\x20process\x20aborted','(((.+)+)+)+$','assign','cancel-loading','All','bots','Deleted\x20Bot\x20','backupfile','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','constructor','/:bot/performance','18012lUDJkw','12757500kvtGOc','notification','Starting\x20#RED#Balance\x20Bot\x20v','connection','version.json','output-003.log','sort','delete-alerts','Unauthorized\x20attempt\x20to\x20confirm\x20message','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','warning','Notifications\x20enabled\x0a','#RES#\x20','node','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','toString','launch','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','hasOwnProperty','private','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','bbvReceive','user','Invalid\x20authentication\x20token\x20(2)','forEach','manual','verify','Session\x20expired\x20for\x20user\x20...','<b>Balance\x20Bot\x20Status:</b>\x0a','\x20>\x20','Logged\x20in\x20user\x20...','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','code','#RES#\x20if\x20running\x20locally\x0a','token','9054wctPAJ','getMonth','Unauthorized\x20attempt\x20to\x20delete\x20bot','number','port','temp/','getUTCHours','access\x20timeout','Invalid\x20authentication\x20token\x20(1)','restore_yes_','function','All\x20bots\x20running\x20right\x20now','storeHeadless','sortBy','2FA\x20login\x20required','getFullYear','************','update-bb','Invalid\x20IP\x20address','mixpanel','family','Alerts','telegramUsername','match','Error\x20while\x20deleting\x20config\x20files:\x20','jsonwebtoken','1000','clientip','yes','emitHistory','remoteAddress','server','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','binary','/:bot/coins','initclient','bb-settings.json','f2aRequired','encryptedUuid','5\x20min','Error:\x20Invalid\x20argument\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','set','versions','whitelistEnabled','get-portfolio','status\x20code\x20401','staging','Backup\x20file\x20unzipped\x20and\x20stored','rmSync','copyFileSync','path','Logged\x20out\x20user\x20...','enabled','kind','6b67f3d61ee94b8f5c80b4affef4c4d9','lastmsgtelegram','reload','\x20minutes','inherit','store','getPortfolio','onepagemode','secure',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','cloneDeep','test','apiKey','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','Unauthorized\x20attempt\x20to\x20get\x20portfolio','args','tkn','loginRequired','temporary\x20access\x20not\x20allowed','stop','sendPortfolioTelegram','\x20only\x0a','RSA-OAEP','You\x20can\x20use\x20the\x20following\x20commands:\x0a','logout','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Bot\x20','\x20|\x20client:\x20...','temporary\x20token\x20generated','storeFiat','disconnect','getTime','listen','bb-secure.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','2FA\x20login\x20rejected','format','statSync','Error\x20details:','find','Invalid\x20username\x20or\x20IP\x20address','$1_$2_$3','address\x20already\x20in\x20use','reason','sign','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','hex','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Crypt','axios','Starting\x20(','login\x20not\x20required','Unauthorized\x20attempt\x20to\x20get\x20messages','getHours','new-disabled','Starting\x20Balance\x20Bot\x20update','telegramEnabled','Login\x20accepted','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Idling\x20(','text','\x1b[35m','https://api.ipify.org?format=json','login\x20token\x20valid','2FA\x20login\x20token\x20generated','padStart','split','restart_','disable','telegramIpApproval','readdirSync','timeshift','tempaccess_15_','toggle-bot-mode','new','kill','config_orders','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','<b>Telegram\x20Bot\x20Status:</b>\x0a','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','12KVlUWs','editMessageReplyMarkup','remove','length','tempaccess_5_','Telegram\x20error:','login','compareSync','Restore\x20process\x20confirmed','userid','\x20(1)','RSA','production','/:bot/history','-config.json','30\x20min','file','Unauthorized\x20attempt\x20to\x20update\x20bot','catch','reject','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','exchange','Access\x20enabled\x20for\x20','filter','output-001.log','Notifications\x20types:\x20','date-fns','message','build','latestversion','backup/','backup-full','slice','settings.','/metrics\x20-\x20show\x20bot\x20performance\x0a','7gtfhSj','Network\x20Interfaces:','isDirectory','Error\x20removing\x20old\x20backup\x20files:','logged\x20out','\x20-\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','storeConfiguration','map','endsWith','build2','bot.js','login\x20token\x20generated','\x20|\x20','\x20to\x20','sha256','sendMessage','password','botname','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Server','\x1b[34m','defaults','bot','update_no','/:bot','referer','HTML','User\x20has\x20been\x20validated','backup','entries','Node.js\x20v','place-order','keys','387amdluT','|@|','showConfig','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','exit','graphql-request','string','yargs/yargs','headers','/status\x20-\x20show\x20bot(s)\x20status\x0a','backup-full.zip','toggle_','show-config','getDate','login2fa_','internal','decrypt','backup-full@','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','config/','parse','ETH','config_all','temporary\x20access\x20timeout','bbUsername','pidRefreshToken','close','SIGINT','confirm-message','environment','get-logs','telegramEvents','.zip','files','auto','stringify','resetHistory','config_alerts','output-002.log','reply','All\x20bots','update_yes','store-configuration','marketcapApi','generate',':\x20Bot\x20Mgr\x20>\x20','exec','send','/enable\x20-\x20enable\x20notifications\x0a','startsWith','update','toggle','output-000.log','Token\x20blacklisted','/off\x20-\x20stop\x20bot(s)\x0a','crypto','data','replace','Password\x20reset\x20rejected','/start','reset-history','zip/','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','botID','Unauthorized\x20attempt\x20to\x20update\x20settings','emit','File\x20uploaded','readFileSync','/on\x20-\x20start\x20bot(s)\x0a','download','push','store-settings','delete-bot','mode','sendFile','invalid\x20credentials','getMinutes','writeFileSync','lastmsgemitted','inlineKeyboard','command','get-starting-balances','/:bot/configuration','express-fileupload','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','value','clients','bb/','socket','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Notifications\x20enabled','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','timestamp','generateKeyPairAsync','createServer','temporaryAccessAllowed','/:bot/portfolio','Disabled\x20Bot\x20','Orders','init','0.0.0','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','running','NTBA_FIX_319','Ok,\x20will\x20send\x20order\x20notifications\x20only','Starting\x20Balance\x20Bot\x20reinstallation','once','telegram','bot-','fork','messages','child_process','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','placeOrder','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','get-backup-files','node-zip','access','chat','Unauthorized\x20attempt\x20to\x20show\x20configuration','telegramChatId','7612dDFxAm','disabled','full','deleteHistoryAlerts','username','127.0.0.1','add','mkdirSync','15\x20min','headless','CoinMarketCap\x20API\x20key\x20validated','join','event','name','SIGTERM','578KbfDjI','button','stopped','sendMetricsTelegram','existsSync','IPv4','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','store-headless','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','request','post','start','Ok,\x20will\x20send\x20alert\x20notifications\x20only','671943RxFLzj','expiry','/output-000.log','toIPv4Address','backup-files','3000','accept','\x1b[33m','search','write','env','simple','callback','util','handshake','includes','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','success','\x1b[0m','secret','config','ipc','index.html','Password\x20has\x20been\x20reset\x20to:\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','lowdb','pidExpireLogin','2FA\x20required','error','conn','-performance.json','alias','uuid','No\x20bots\x20running\x20right\x20now','settings','restart','apiPassword','names','\x1b[31m','1887395uidRAW','/upload-backup','Notifications\x20disabled\x0a','enable','login2fa_reject_','host','ipaddr.js','get-messages','address','get','Allow\x20login\x20from\x20IP\x20address\x20','botmanager','reinstall_yes','/download/:type','all','use','5267838oUJRGX','publicKey',')\x20\x20\x20|\x20Bot\x20','unlinkSync','163664qNAkhf','-events.json','resetpw_yes','bbvNew','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','blacklist','showname','/restart\x20-\x20restart\x20bot(s)\x0a','track','#RES#'];_0x4dcf=function(){return _0x5c7312;};return _0x4dcf();}async function startServer(){const _0x58d4ca=_0x1b412f,{serverip:_0x358f63,netinterfaces:_0x59810e}=getServerIP();logger[_0x58d4ca(0x14c)](''),logger[_0x58d4ca(0x14c)](_0x58d4ca(0x1a7)),await logger['full'](_0x58d4ca(0x1d0)+serverversion+_0x58d4ca(0x1da)+(environment==_0x58d4ca(0x220)?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x58d4ca(0x1ef))+('=>\x20Go\x20to\x20#CYA#http://'+_0x358f63+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x58d4ca(0x14c)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x5d1593 of config){const _0x314a33=_0x5d1593[_0x58d4ca(0x309)]=='auto'?'a':'m';if(_0x5d1593['status']==_0x58d4ca(0x226)||_0x5d1593['status']==_0x58d4ca(0x273))await logger['full'](_0x58d4ca(0x25b)+_0x314a33+')\x20|\x20Bot\x20'+_0x5d1593[_0x58d4ca(0x2ff)]+_0x58d4ca(0x2a9)+_0x5d1593[_0x58d4ca(0x2ae)]),startBot([_0x5d1593[_0x58d4ca(0x2ff)],userID],{'cwd':bbpath},function(_0x3cdac8){const _0x163481=_0x58d4ca;if(_0x3cdac8)logger[_0x163481(0x127)](_0x3cdac8);});else(_0x5d1593[_0x58d4ca(0x1ac)]==_0x58d4ca(0x126)||_0x5d1593[_0x58d4ca(0x1ac)]==_0x58d4ca(0x25f))&&await logger[_0x58d4ca(0x127)](_0x58d4ca(0x264)+_0x314a33+_0x58d4ca(0x17a)+_0x5d1593[_0x58d4ca(0x2ff)]+_0x58d4ca(0x2a9)+_0x5d1593[_0x58d4ca(0x2ae)]);}else!newBot&&logger['simple'](_0x58d4ca(0x2c2));if(newBot)addBot();logger[_0x58d4ca(0x14c)]('-----------------------------------------------------------------------------------'),logger['simple'](''),await logger[_0x58d4ca(0x199)](_0x58d4ca(0x2bc)+nodeversion),await logger[_0x58d4ca(0x199)](_0x58d4ca(0x29d),_0x59810e);}function startSocket(){const _0x2215f1=_0x1b412f;io['on'](_0x2215f1(0x1d1),_0x152977=>{const _0x56a01b=_0x2215f1;let _0x5c8b3f,_0x1931fc,_0x1dd78f,_0x4d675e,_0x172992;const _0x40f9aa=_0x152977[_0x56a01b(0x14f)][_0x56a01b(0x2c8)][_0x56a01b(0x2b7)];_0x1931fc=_0x40f9aa['match'](/bot[0-9]{3}/);if(_0x1931fc)_0x1dd78f=_0x1931fc[0x0][_0x56a01b(0x208)](/[0-9]{3}/);if(_0x1dd78f)_0x5c8b3f=_0x1dd78f[0x0];else _0x5c8b3f=_0x56a01b(0x173);const _0x32e6a2=_0x152977[_0x56a01b(0x14f)]['auth'][_0x56a01b(0x217)];if(!_0x32e6a2)_0x152977[_0x56a01b(0x301)](_0x56a01b(0x1ac),{'publicKey':secure[_0x56a01b(0x179)]});else{_0x4d675e=timelyDecrypt(_0x32e6a2,![]);if(!_0x4d675e)_0x152977[_0x56a01b(0x301)](_0x56a01b(0x1ac),{'publicKey':secure['publicKey']});else{_0x172992=normalizeIP(_0x152977[_0x56a01b(0x15e)][_0x56a01b(0x20f)])['store'];if(!devices[_0x4d675e])devices[_0x4d675e]={'uuid':_0x4d675e,'access':{'token':null}};devices[_0x4d675e]['ip']=_0x172992;const _0x25a1d5=addClient(_0x152977['id'],_0x4d675e,_0x5c8b3f);setAccess(_0x25a1d5),emitMessages(),_0x152977['on'](_0x56a01b(0x27f),_0x47af5e=>{const _0x225f52=_0x56a01b,_0x38b77f=timelyDecrypt(_0x47af5e[_0x225f52(0x2ad)],!![],_0x225f52(0x2c0));if(_0x38b77f){_0x47af5e={'username':_0x47af5e[_0x225f52(0x129)],'password':_0x38b77f},devices[_0x4d675e][_0x225f52(0x121)]=validateCredentials(_0x47af5e,_0x4d675e);if(devices[_0x4d675e][_0x225f52(0x121)]['allow']==![]&&devices[_0x4d675e][_0x225f52(0x121)][_0x225f52(0x254)]==_0x225f52(0x1ff))_0x152977[_0x225f52(0x301)](_0x225f52(0x1ac),{'access':devices[_0x4d675e][_0x225f52(0x121)]}),loginAccess2FA(_0x4d675e,_0x172992);else{if(devices[_0x4d675e]['access'][_0x225f52(0x18a)]==![]&&devices[_0x4d675e]['access'][_0x225f52(0x254)]==_0x225f52(0x30b))_0x152977[_0x225f52(0x301)](_0x225f52(0x1ac),{'access':devices[_0x4d675e][_0x225f52(0x121)]});else devices[_0x4d675e][_0x225f52(0x121)][_0x225f52(0x18a)]&&devices[_0x4d675e]['access'][_0x225f52(0x254)]==_0x225f52(0x2a8)&&(getClientsWithUuid(_0x4d675e)[_0x225f52(0x1e6)](_0x3b9662=>{setAccess(_0x3b9662);}),logger['debug'](_0x225f52(0x1ec)+_0x4d675e['slice'](-0x8)),setTokenRefresh(_0x4d675e),setSessionTimeout(_0x225f52(0x27f),_0x4d675e));}}else logger['full'](_0x225f52(0x1bc));}),_0x152977['on'](_0x56a01b(0x1b5),()=>{resetPassword();}),_0x152977['on']('disconnect',_0x4ad4ec=>{removeClient(_0x152977['id']);}),_0x5c8b3f==_0x56a01b(0x173)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3d60d8){const _0x2fc197=_0x1b412f;if(_0x3d60d8!=_0x2fc197(0x173)&&config[_0x2fc197(0x234)]!=''){if(pid[_0x3d60d8])pid[_0x3d60d8][_0x2fc197(0x2ef)]({'function':_0x2fc197(0x214),'args':null});}_0x3d60d8!=_0x2fc197(0x173)&&broadcastToBots(_0x2fc197(0x1c7),JSON[_0x2fc197(0x2e3)](config));}function reloadBotManager(){const _0x56479c=_0x1b412f;getClientsWithBotID(_0x56479c(0x173))[_0x56479c(0x1e6)](_0x1b2f3c=>{const _0x476c59=_0x56479c;getSocket(_0x1b2f3c['id'])[_0x476c59(0x301)](_0x476c59(0x1ac),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x33730e){const _0x1a42fd=_0x1b412f;return io['sockets']['sockets'][_0x1a42fd(0x171)](_0x33730e);}function setAccess(_0x497e43){const _0x1be98e=_0x1b412f,_0x33316f=getSocket(_0x497e43['id']),_0x17fb42=_0x497e43[_0x1be98e(0x161)],_0x4238a3=_0x497e43[_0x1be98e(0x2b4)];devices[_0x17fb42]['access']=validateAccess(devices[_0x17fb42]['access']['token'],_0x17fb42),logger[_0x1be98e(0x199)]('Setting\x20access:\x20'+devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x254)]+_0x1be98e(0x244)+_0x497e43['id'][_0x1be98e(0x299)](-0x8)+'\x20|\x20user:\x20...'+_0x17fb42[_0x1be98e(0x299)](-0x8)),_0x33316f[_0x1be98e(0x130)](_0x17fb42);if(devices[_0x17fb42]['access'][_0x1be98e(0x18a)]){_0x33316f[_0x1be98e(0x130)](_0x4238a3);if(_0x4238a3==_0x1be98e(0x173))initializeSocketBotManager(_0x33316f);else initializeSocketBot(_0x33316f);initClient(_0x4238a3);}devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x1f0)]&&devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x254)]==_0x1be98e(0x245)&&setSessionTimeout('2FA',_0x17fb42),devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x1f0)]&&devices[_0x17fb42]['access']['reason']==_0x1be98e(0x269)&&setSessionTimeout(_0x1be98e(0x27f),_0x17fb42),_0x33316f[_0x1be98e(0x301)](_0x1be98e(0x1ac),{'status':_0x497e43[_0x1be98e(0x210)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x17fb42][_0x1be98e(0x121)],'externalip':devices[_0x17fb42]['ip'],'publicKey':secure[_0x1be98e(0x179)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x18a)]==![]&&devices[_0x17fb42][_0x1be98e(0x121)][_0x1be98e(0x254)]==_0x1be98e(0x15c)&&temporaryAccess2FA(_0x17fb42,devices[_0x17fb42]['ip']);}function setSessionTimeout(_0x3406b0,_0x275611){const _0x406854=_0x1b412f;let _0x322769;if(_0x3406b0==_0x406854(0x27f))_0x322769=loginExpiry*0x3c*0x3e8;else _0x322769=devices[_0x275611][_0x406854(0x26e)][_0x406854(0x142)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x275611]['telegramIpApproval'][_0x406854(0x31d)]);if(devices[_0x275611]['pidExpireLogin'])clearTimeout(devices[_0x275611][_0x406854(0x15b)]);devices[_0x275611][_0x406854(0x15b)]=setTimeout(()=>{const _0x93bffb=_0x406854;if(devices[_0x275611]['pidRefreshToken'])clearTimeout(devices[_0x275611][_0x93bffb(0x2d9)]);removeSocketListeners(_0x275611),addBlacklist(_0x275611),devices[_0x275611][_0x93bffb(0x26e)]=null,devices[_0x275611]['telegram2FaApproval']=null,devices[_0x275611][_0x93bffb(0x121)][_0x93bffb(0x1f0)]=null,logger[_0x93bffb(0x199)](_0x93bffb(0x1e9)+_0x275611['slice'](-0x8)),devices[_0x275611]['access']=validateAccess(devices[_0x275611]['access']['token'],_0x275611),!(devices[_0x275611]['access'][_0x93bffb(0x18a)]&&devices[_0x275611][_0x93bffb(0x121)]['reason']==_0x93bffb(0x25c))&&(_0x3406b0==_0x93bffb(0x27f)?io['to'](_0x275611)[_0x93bffb(0x301)](_0x93bffb(0x1ac),{'access':{'allow':![],'reason':_0x93bffb(0x1f8),'token':null}}):io['to'](_0x275611)[_0x93bffb(0x301)]('status',{'access':{'allow':![],'reason':_0x93bffb(0x2d7),'token':null}})),devices[_0x275611][_0x93bffb(0x121)][_0x93bffb(0x1f0)]=null;},_0x322769);}function setTokenRefresh(_0x173bde){const _0x521f12=_0x1b412f;if(devices[_0x173bde][_0x521f12(0x2d9)])clearTimeout(devices[_0x173bde]['pidRefreshToken']);devices[_0x173bde][_0x521f12(0x2d9)]=setTimeout(()=>{const _0x4b796c=_0x521f12;getClientsWithUuid(_0x173bde)[_0x4b796c(0x27c)]!=0x0?(devices[_0x173bde][_0x4b796c(0x121)]=refreshToken(_0x173bde),io['to'](_0x173bde)[_0x4b796c(0x301)](_0x4b796c(0x1ac),{'status':_0x4b796c(0x19e),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x173bde][_0x4b796c(0x121)],'externalip':devices[_0x173bde]['ip'],'publicKey':secure[_0x4b796c(0x179)],'validInstallation':validInstallation}),setTokenRefresh(_0x173bde)):clearTimeout(devices[_0x173bde][_0x4b796c(0x2d9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x20549b){const _0x3e4441=_0x1b412f,_0x2bea1f=getClient(_0x20549b['id'])[_0x3e4441(0x161)];_0x20549b[_0x3e4441(0x301)](_0x3e4441(0x1c7),config),_0x20549b[_0x3e4441(0x301)]('settings',cleanSettings()),_0x20549b['on'](_0x3e4441(0x187),_0x473c89=>{const _0x3b2af5=_0x3e4441;if(validateAccess(_0x473c89,_0x2bea1f)[_0x3b2af5(0x18a)])addBot();else logger[_0x3b2af5(0x127)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x20549b['on']('update-bot',(_0x38a09d,_0x2060a3)=>{const _0x14a1d5=_0x3e4441;if(validateAccess(_0x2060a3,_0x2bea1f)[_0x14a1d5(0x18a)])toggleBot(_0x38a09d[_0x14a1d5(0x2ff)],_0x38a09d[_0x14a1d5(0x1ac)],_0x38a09d[_0x14a1d5(0x1b7)]);else logger[_0x14a1d5(0x127)](_0x14a1d5(0x28a));}),_0x20549b['on'](_0x3e4441(0x272),(_0x1ced79,_0x297305)=>{const _0x3885fd=_0x3e4441;if(validateAccess(_0x297305,_0x2bea1f)[_0x3885fd(0x18a)])toggleBotMode(_0x1ced79);else logger[_0x3885fd(0x127)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x20549b['on'](_0x3e4441(0x308),(_0x16157a,_0x200a05)=>{const _0x509eae=_0x3e4441;if(validateAccess(_0x200a05,_0x2bea1f)[_0x509eae(0x18a)])deleteBot(_0x16157a);else logger[_0x509eae(0x127)](_0x509eae(0x1f3));}),_0x20549b['on'](_0x3e4441(0x307),(_0x25e626,_0x32d2e0)=>{const _0x263350=_0x3e4441;if(validateAccess(_0x32d2e0,_0x2bea1f)[_0x263350(0x18a)])storeSettings(_0x25e626,!![]);else logger[_0x263350(0x127)](_0x263350(0x300));}),_0x20549b['on'](_0x3e4441(0x202),_0x14c4e0=>{const _0x1a39d4=_0x3e4441;if(validateAccess(_0x14c4e0,_0x2bea1f)[_0x1a39d4(0x18a)])updateBB(_0x1a39d4(0x2f2));else logger['full'](_0x1a39d4(0x2b0));}),_0x20549b['on']('reinstall-bb',_0x269c3a=>{const _0x28c6a5=_0x3e4441;if(validateAccess(_0x269c3a,_0x2bea1f)[_0x28c6a5(0x18a)])updateBB(_0x28c6a5(0x18f));else logger[_0x28c6a5(0x127)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x20549b['on'](_0x3e4441(0x334),_0x288d6c=>{const _0x131cd4=_0x3e4441;if(validateAccess(_0x288d6c,_0x2bea1f)['allow']){const _0x1621c3=getClient(_0x20549b['id']);if(_0x1621c3)getBackupFiles(_0x1621c3['uuid']);else logger[_0x131cd4(0x127)](_0x131cd4(0x1a5));}else logger['full'](_0x131cd4(0x256));}),_0x20549b['on'](_0x3e4441(0x195),(_0x2c2f3c,_0x25503c)=>{const _0x1e3e8e=_0x3e4441;if(validateAccess(_0x25503c,_0x2bea1f)['allow'])restoreBackupFile(_0x2c2f3c);else logger[_0x1e3e8e(0x127)](_0x1e3e8e(0x1dc));}),_0x20549b['on']('get-messages',_0x4c3db2=>{const _0x1f7a9a=_0x3e4441;if(validateAccess(_0x4c3db2,_0x2bea1f)[_0x1f7a9a(0x18a)])getMessages();else logger[_0x1f7a9a(0x127)](_0x1f7a9a(0x25d));}),_0x20549b['on'](_0x3e4441(0x2dc),(_0x259be6,_0xe889cc)=>{const _0x1f9f55=_0x3e4441;if(validateAccess(_0xe889cc,_0x2bea1f)[_0x1f9f55(0x18a)])confirmMessage(_0x259be6);else logger[_0x1f9f55(0x127)](_0x1f9f55(0x1d6));}),_0x20549b['on'](_0x3e4441(0x241),_0x2e9b8a=>{const _0x5ad798=_0x3e4441;if(validateAccess(_0x2e9b8a,_0x2bea1f)['allow']){if(devices[_0x2bea1f][_0x5ad798(0x2d9)])clearTimeout(devices[_0x2bea1f][_0x5ad798(0x2d9)]);if(devices[_0x2bea1f][_0x5ad798(0x15b)])clearTimeout(devices[_0x2bea1f][_0x5ad798(0x15b)]);removeSocketListeners(getClient(_0x20549b['id'])[_0x5ad798(0x161)]),addBlacklist(_0x2bea1f),devices[_0x2bea1f][_0x5ad798(0x26e)]=null,devices[_0x2bea1f][_0x5ad798(0x1b0)]=null,devices[_0x2bea1f][_0x5ad798(0x121)][_0x5ad798(0x1f0)]=null,logger[_0x5ad798(0x199)]('Logged\x20out\x20user\x20...'+_0x2bea1f[_0x5ad798(0x299)](-0x8)),io['to'](getClient(_0x20549b['id'])[_0x5ad798(0x161)])[_0x5ad798(0x301)](_0x5ad798(0x1ac),{'access':{'allow':![],'reason':_0x5ad798(0x2a0),'token':null}});}else logger[_0x5ad798(0x127)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0xd8014e){const _0x51967d=_0x1b412f,_0x3091ba=getClient(_0xd8014e['id'])[_0x51967d(0x2b4)],_0x29738d=getClient(_0xd8014e['id'])['uuid'];_0xd8014e['on'](_0x51967d(0x2de),(_0x120fc3,_0xcfa10d)=>{const _0x264688=_0x51967d;if(validateAccess(_0xcfa10d,_0x29738d)[_0x264688(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x264688(0x2ef)]({'function':_0x264688(0x20e),'args':_0x120fc3});}else logger[_0x264688(0x127)](_0x264688(0x1a0));}),_0xd8014e['on'](_0x51967d(0x1d5),(_0x56ba84,_0x4f2571)=>{const _0x3b3220=_0x51967d;if(validateAccess(_0x4f2571,_0x29738d)[_0x3b3220(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x3b3220(0x2ef)]({'function':_0x3b3220(0x128),'args':_0x56ba84});}else logger[_0x3b3220(0x127)](_0x3b3220(0x319));}),_0xd8014e['on'](_0x51967d(0x21e),(_0xc89dfa,_0x2f01e8)=>{const _0x15e3c7=_0x51967d;if(validateAccess(_0x2f01e8,_0x29738d)['allow']){if(pid[_0x3091ba])pid[_0x3091ba][_0x15e3c7(0x2ef)]({'function':_0x15e3c7(0x22e),'args':_0xc89dfa});}else logger[_0x15e3c7(0x127)](_0x15e3c7(0x237));}),_0xd8014e['on'](_0x51967d(0x2ea),(_0x350f78,_0x148e87)=>{const _0x30b1b9=_0x51967d;if(validateAccess(_0x148e87,_0x29738d)[_0x30b1b9(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x30b1b9(0x2ef)]({'function':_0x30b1b9(0x2a3),'args':_0x350f78});}else logger[_0x30b1b9(0x127)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0xd8014e['on'](_0x51967d(0x13b),(_0x20b9aa,_0x3d9fea)=>{const _0x24138d=_0x51967d;if(validateAccess(_0x3d9fea,_0x29738d)[_0x24138d(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x24138d(0x2ef)]({'function':_0x24138d(0x1fd),'args':_0x20b9aa});}else logger[_0x24138d(0x127)](_0x24138d(0x242));}),_0xd8014e['on']('store-fiat',(_0x56cc94,_0x393efd)=>{const _0x31f65e=_0x51967d;if(validateAccess(_0x393efd,_0x29738d)['allow']){if(pid[_0x3091ba])pid[_0x3091ba][_0x31f65e(0x2ef)]({'function':_0x31f65e(0x246),'args':_0x56cc94});}else logger[_0x31f65e(0x127)](_0x31f65e(0x1e2));}),_0xd8014e['on'](_0x51967d(0x2fc),_0x17a478=>{const _0x53850d=_0x51967d;if(validateAccess(_0x17a478,_0x29738d)[_0x53850d(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x53850d(0x2ef)]({'function':_0x53850d(0x2e4),'args':null});}else logger[_0x53850d(0x127)](_0x53850d(0x31b));}),_0xd8014e['on'](_0x51967d(0x311),_0x5178e6=>{const _0x39fd32=_0x51967d;if(validateAccess(_0x5178e6,_0x29738d)[_0x39fd32(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x39fd32(0x2ef)]({'function':'getStartingBalances','args':null});}else logger[_0x39fd32(0x127)](_0x39fd32(0x2d2));}),_0xd8014e['on'](_0x51967d(0x2bd),(_0x18959b,_0x4c8097)=>{const _0x205a54=_0x51967d;if(validateAccess(_0x4c8097,_0x29738d)[_0x205a54(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba]['send']({'function':_0x205a54(0x332),'args':_0x18959b});}else logger['full'](_0x205a54(0x2af));}),_0xd8014e['on'](_0x51967d(0x1c5),_0x3ca9e0=>{const _0x38686c=_0x51967d;if(validateAccess(_0x3ca9e0,_0x29738d)[_0x38686c(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba][_0x38686c(0x2ef)]({'function':'cancelLoading','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0xd8014e['on'](_0x51967d(0x2cc),_0x6ec743=>{const _0xa30a05=_0x51967d;if(validateAccess(_0x6ec743,_0x29738d)[_0xa30a05(0x18a)]){if(pid[_0x3091ba])pid[_0x3091ba]['send']({'function':_0xa30a05(0x2c1),'args':null});}else logger[_0xa30a05(0x127)](_0xa30a05(0x123));}),_0xd8014e['on']('update-bb',_0x51de4c=>{const _0x595edb=_0x51967d;if(validateAccess(_0x51de4c,_0x29738d)[_0x595edb(0x18a)])updateBB(_0x595edb(0x2f2));else logger[_0x595edb(0x127)](_0x595edb(0x2b0));}),_0xd8014e['on'](_0x51967d(0x16f),_0x499cd7=>{const _0x118515=_0x51967d;if(validateAccess(_0x499cd7,_0x29738d)[_0x118515(0x18a)])getMessages();else logger['full'](_0x118515(0x25d));}),_0xd8014e['on'](_0x51967d(0x2dc),(_0x3f061a,_0x2cf90e)=>{const _0x1ae29b=_0x51967d;if(validateAccess(_0x2cf90e,_0x29738d)['allow'])confirmMessage(_0x3f061a);else logger[_0x1ae29b(0x127)](_0x1ae29b(0x1d6));}),_0xd8014e['on'](_0x51967d(0x241),_0x1f1712=>{const _0x3b661e=_0x51967d;if(validateAccess(_0x1f1712,_0x29738d)['allow']){if(devices[_0x29738d][_0x3b661e(0x2d9)])clearTimeout(devices[_0x29738d]['pidRefreshToken']);if(devices[_0x29738d][_0x3b661e(0x15b)])clearTimeout(devices[_0x29738d][_0x3b661e(0x15b)]);removeSocketListeners(getClient(_0xd8014e['id'])[_0x3b661e(0x161)]),addBlacklist(_0x29738d),devices[_0x29738d][_0x3b661e(0x26e)]=null,devices[_0x29738d]['telegram2FaApproval']=null,devices[_0x29738d]['access'][_0x3b661e(0x1f0)]=null,logger[_0x3b661e(0x199)](_0x3b661e(0x225)+_0x29738d[_0x3b661e(0x299)](-0x8)),io['to'](getClient(_0xd8014e['id'])[_0x3b661e(0x161)])['emit'](_0x3b661e(0x1ac),{'access':{'allow':![],'reason':_0x3b661e(0x2a0),'token':null}});}else logger[_0x3b661e(0x127)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x32efeb){getClientsWithUuid(_0x32efeb)['forEach'](_0x3c841d=>{getSocket(_0x3c841d['id'])['removeAllListeners']();});}function cleanSettings(){const _0x5e69c0=_0x1b412f;let _0x39b0ee=settings;return settings[_0x5e69c0(0x1a2)]&&settings['telegramToken']!=''&&(_0x39b0ee={..._0x39b0ee,'telegramToken':_0x5e69c0(0x201)}),settings[_0x5e69c0(0x1a1)]&&settings[_0x5e69c0(0x1a1)]!=''&&(_0x39b0ee={..._0x39b0ee,'bbPassword':_0x5e69c0(0x201)}),settings[_0x5e69c0(0x2eb)]&&settings[_0x5e69c0(0x2eb)]!=''&&(_0x39b0ee={..._0x39b0ee,'marketcapApi':'************'}),(settings[_0x5e69c0(0x1a1)]&&settings[_0x5e69c0(0x1a1)]==_0x5e69c0(0x1c0)||settings[_0x5e69c0(0x1a2)]&&settings[_0x5e69c0(0x1a2)]==_0x5e69c0(0x1c0)||settings[_0x5e69c0(0x2eb)]&&settings['marketcapApi']==_0x5e69c0(0x1c0))&&(_0x39b0ee={..._0x39b0ee,'restored':{'password':settings[_0x5e69c0(0x1a1)]=='***','telegram':settings[_0x5e69c0(0x1a2)]==_0x5e69c0(0x1c0),'marketcap':settings[_0x5e69c0(0x2eb)]==_0x5e69c0(0x1c0)}}),_0x39b0ee;}async function updateBB(_0x5a92c3){const _0x131741=_0x1b412f;await backupConfigFiles(),installingUpdate=!![],config[_0x131741(0x1e6)](_0x13226b=>{const _0x14bbb0=_0x131741;restartBot(_0x13226b[_0x14bbb0(0x2ff)]);});if(_0x5a92c3=='update')process[_0x131741(0x2ef)]({'update':!![],'environment':environment},_0x5d0cee=>{});else _0x5a92c3==_0x131741(0x18f)&&process[_0x131741(0x2ef)]({'reinstall':!![],'environment':environment},_0x4ba62c=>{});}function startBot(_0x87d8bd,_0xf53dd5,_0x10299d){const _0x1235ac=_0x1b412f;if(debugging)_0x87d8bd[_0x1235ac(0x306)]('-d');let _0x264d13=![];const _0x4dd247=_0x87d8bd[0x0];_0xf53dd5={..._0xf53dd5,'stdio':['inherit',_0x1235ac(0x22c),_0x1235ac(0x22c),_0x1235ac(0x156)]},pid[_0x4dd247]=childProcess[_0x1235ac(0x32e)](botfile,_0x87d8bd,_0xf53dd5),pid[_0x4dd247]['on'](_0x1235ac(0x294),_0xf8911=>{const _0x484308=_0x1235ac;switch(Object[_0x484308(0x2be)](_0xf8911)[0x0]){case _0x484308(0x2ae):updateBotName(_0x4dd247,_0xf8911['botname']);break;case'updatebotmanager':updateBotManager();break;case _0x484308(0x1ac):updateStatus(_0x4dd247,_0xf8911[_0x484308(0x1ac)]);break;case _0x484308(0x1b7):updateLive(_0x4dd247,_0xf8911['live']);break;case'started':updateLive(_0x4dd247,_0xf8911[_0x484308(0x1b3)]),io['to'](_0x4dd247)['emit'](_0x484308(0x1ac),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x484308(0x23c):_0xf8911[_0x484308(0x23c)]==_0x484308(0x164)&&restartBot(_0x4dd247);_0xf8911[_0x484308(0x23c)]==_0x484308(0x274)&&toggleBot(_0x4dd247,'disabled',_0x484308(0x136));break;case _0x484308(0x32c):sendTelegramBot(_0x4dd247,_0xf8911[_0x484308(0x32c)]);break;case _0x484308(0x1a4):sendTelegramMsg(_0xf8911[_0x484308(0x1a4)]);break;case _0x484308(0x1fb):io['to'](_0x4dd247)[_0x484308(0x301)](_0xf8911['function'],_0xf8911[_0x484308(0x238)]);break;}}),pid[_0x4dd247]['on'](_0x1235ac(0x15d),function(_0x1783a2){if(_0x264d13)return;_0x264d13=!![],_0x10299d(_0x1783a2);}),pid[_0x4dd247]['on'](_0x1235ac(0x2c4),async function(_0x562e79){const _0x2f9519=_0x1235ac;if(terminating)return;if(installingUpdate){logger['debug'](_0x2f9519(0x151)),io[_0x2f9519(0x2da)]();return;}if(_0x264d13)return;_0x264d13=!![],_0x10299d(null);const _0x8a9135=dbConfig[_0x2f9519(0x171)]('bots')[_0x2f9519(0x250)]({'botID':_0x4dd247})['value']();_0x8a9135&&(_0x8a9135[_0x2f9519(0x1ac)]==_0x2f9519(0x226)||_0x8a9135[_0x2f9519(0x1ac)]==_0x2f9519(0x273))&&(await sleep(0x3e8),updateLive(_0x4dd247,_0x2f9519(0x136)),logger['full']('Restarting\x20Bot\x20'+_0x4dd247),startBot([_0x4dd247,userID],{'cwd':bbpath},function(_0x4dbb11){const _0x55bdcc=_0x2f9519;if(_0x4dbb11)logger[_0x55bdcc(0x127)](_0x4dbb11);}));});}function stopBot(_0x854cf0){const _0x3675dc=_0x1b412f;getClientsWithBotID(_0x854cf0)['forEach'](_0x2fe2ed=>{const _0x2193ed=_0x3baf;getSocket(_0x2fe2ed['id'])[_0x2193ed(0x247)](!![]),removeClient(_0x2fe2ed['id']);}),pid[_0x854cf0]&&(pid[_0x854cf0][_0x3675dc(0x274)](),pid[_0x854cf0]=null);}function stopAllBots(){const _0x4b9059=_0x1b412f;terminating=!![];const _0x185241=getEnabledBots();_0x185241[_0x4b9059(0x1e6)](_0x567c56=>{const _0xd65fb7=_0x4b9059;stopBot(_0x567c56[_0xd65fb7(0x2ff)]);});}function restartBot(_0x2f1d79){const _0x10c8ea=_0x1b412f;if(pid[_0x2f1d79])pid[_0x2f1d79][_0x10c8ea(0x274)]();}function addBot(){const _0x1a1b7=_0x1b412f;let _0x41055a;for(let _0xa05f26=0x1;_0xa05f26<0x3e9;_0xa05f26++){_0x41055a=_0xa05f26[_0x1a1b7(0x1dd)]()['padStart'](0x3,'0');let _0x268d2e=config[_0x1a1b7(0x250)](_0x5a6243=>_0x5a6243[_0x1a1b7(0x2ff)]==_0x41055a);if(!_0x268d2e)break;}if(_0x41055a===_0x1a1b7(0x20b)){logger['full'](_0x1a1b7(0x1ca));return;}logger[_0x1a1b7(0x127)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x41055a),dbConfig[_0x1a1b7(0x171)](_0x1a1b7(0x1c7))[_0x1a1b7(0x306)]({'botID':_0x41055a,'botname':_0x1a1b7(0x243)+_0x41055a,'status':_0x1a1b7(0x273),'live':''})['write'](),startBot([_0x41055a,userID],{'cwd':bbpath},function(_0x51a397){const _0x9074b4=_0x1a1b7;if(_0x51a397)logger[_0x9074b4(0x127)](_0x51a397);}),config=getConfiguration(),io['to'](_0x1a1b7(0x173))[_0x1a1b7(0x301)](_0x1a1b7(0x1c7),config),broadcastToBots(_0x1a1b7(0x1c7),JSON['stringify'](config));}function _0x3baf(_0x4d0b1f,_0x44264d){const _0x5a66c7=_0x4dcf();return _0x3baf=function(_0x3846dd,_0x2ba666){_0x3846dd=_0x3846dd-0x120;let _0x4dcff0=_0x5a66c7[_0x3846dd];return _0x4dcff0;},_0x3baf(_0x4d0b1f,_0x44264d);}function deleteBot(_0x28d451){const _0x5177b9=_0x1b412f;getClientsWithBotID(_0x28d451)[_0x5177b9(0x1e6)](_0x5b98a3=>{const _0x3f5da9=_0x5177b9;getSocket(_0x5b98a3['id'])[_0x3f5da9(0x247)](!![]),removeClient(_0x5b98a3['id']);}),dbConfig[_0x5177b9(0x171)](_0x5177b9(0x1c7))[_0x5177b9(0x27b)]({'botID':_0x28d451})[_0x5177b9(0x14a)](),logger[_0x5177b9(0x127)](_0x5177b9(0x1c8)+_0x28d451),stopBot(_0x28d451);try{if(fs[_0x5177b9(0x138)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+'-config.json')))fs['unlinkSync'](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x287)));if(fs[_0x5177b9(0x138)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x17d))))fs[_0x5177b9(0x17b)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x17d)));if(fs[_0x5177b9(0x138)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x15f))))fs[_0x5177b9(0x17b)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x15f)));if(fs[_0x5177b9(0x138)](path[_0x5177b9(0x130)](configpath,_0x5177b9(0x32d)+_0x28d451+_0x5177b9(0x1bf))))fs[_0x5177b9(0x17b)](path[_0x5177b9(0x130)](configpath,'bot-'+_0x28d451+_0x5177b9(0x1bf)));}catch(_0x4b400c){if(_0x4b400c)logger[_0x5177b9(0x127)](_0x5177b9(0x209),_0x4b400c);}config=getConfiguration(),io['to'](_0x5177b9(0x173))[_0x5177b9(0x301)](_0x5177b9(0x1c7),config),broadcastToBots('bots',JSON[_0x5177b9(0x2e3)](config));}function toggleBot(_0x369334,_0xc58c7,_0x56b5a1){const _0x3bf434=_0x1b412f;dbConfig[_0x3bf434(0x171)](_0x3bf434(0x1c7))[_0x3bf434(0x250)]({'botID':_0x369334})['assign']({'status':_0xc58c7})['assign']({'live':_0x56b5a1})[_0x3bf434(0x14a)]();if(_0xc58c7=='enabled'||_0xc58c7==_0x3bf434(0x273))logger[_0x3bf434(0x127)]('Enabled\x20Bot\x20'+_0x369334),startBot([_0x369334,userID],{'cwd':bbpath},function(_0x4670fd){if(_0x4670fd)logger['full'](_0x4670fd);});else(_0xc58c7==_0x3bf434(0x126)||_0xc58c7=='new-disabled')&&(logger[_0x3bf434(0x127)](_0x3bf434(0x322)+_0x369334),stopBot(_0x369334));config=getConfiguration(),io['to'](_0x3bf434(0x173))[_0x3bf434(0x301)](_0x3bf434(0x1c7),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleStatus(_0x3d7de9){const _0xe7740f=_0x1b412f;let _0x49733c=dbConfig['get'](_0xe7740f(0x1c7))[_0xe7740f(0x250)]({'botID':_0x3d7de9})[_0xe7740f(0x315)](),_0x54dddd;if(_0x49733c[_0xe7740f(0x1ac)]===_0xe7740f(0x226))_0x54dddd=_0xe7740f(0x126);else{if(_0x49733c[_0xe7740f(0x1ac)]==='new')_0x54dddd=_0xe7740f(0x25f);else{if(_0x49733c['status']===_0xe7740f(0x25f))_0x54dddd=_0xe7740f(0x273);else{if(_0x49733c[_0xe7740f(0x1ac)]===_0xe7740f(0x126))_0x54dddd=_0xe7740f(0x226);}}}return _0x54dddd;}function updateStatus(_0x528bc7,_0x5b83a8){const _0x3e0a8b=_0x1b412f;dbConfig[_0x3e0a8b(0x171)](_0x3e0a8b(0x1c7))['find']({'botID':_0x528bc7})['assign']({'status':_0x5b83a8})[_0x3e0a8b(0x14a)](),config=getConfiguration(),io['to']('botmanager')[_0x3e0a8b(0x301)]('bots',config),broadcastToBots('bots',JSON[_0x3e0a8b(0x2e3)](config));}function updateLive(_0x1e29ce,_0x2a65ce){const _0x36ce2b=_0x1b412f;dbConfig[_0x36ce2b(0x171)](_0x36ce2b(0x1c7))[_0x36ce2b(0x250)]({'botID':_0x1e29ce})[_0x36ce2b(0x1c4)]({'live':_0x2a65ce})['write'](),config=getConfiguration(),io['to'](_0x36ce2b(0x173))[_0x36ce2b(0x301)](_0x36ce2b(0x1c7),config),broadcastToBots('bots',JSON[_0x36ce2b(0x2e3)](config));}function updateBotName(_0x68f2da,_0x288bf4){const _0x2eff4c=_0x1b412f;dbConfig[_0x2eff4c(0x171)](_0x2eff4c(0x1c7))[_0x2eff4c(0x250)]({'botID':_0x68f2da})['assign']({'botname':_0x288bf4})[_0x2eff4c(0x14a)](),config=getConfiguration(),io['to']('botmanager')[_0x2eff4c(0x301)](_0x2eff4c(0x1c7),config),broadcastToBots(_0x2eff4c(0x1c7),JSON[_0x2eff4c(0x2e3)](config));}function updateBotManager(){const _0x261cfa=_0x1b412f;config=getConfiguration(),io['to'](_0x261cfa(0x173))[_0x261cfa(0x301)](_0x261cfa(0x1c7),config),broadcastToBots(_0x261cfa(0x1c7),JSON['stringify'](config));}function toggleBotMode(_0x255085){const _0x245dd0=_0x1b412f;if(pid[_0x255085])pid[_0x255085][_0x245dd0(0x2ef)]({'function':_0x245dd0(0x1c1),'args':null});else{const _0x14c499=configpath+_0x245dd0(0x32d)+_0x255085+'-config.json',_0x3d5c51=fs[_0x245dd0(0x303)](_0x14c499),_0x107828=JSON[_0x245dd0(0x2d4)](_0x3d5c51),_0x415596=_0x107828[_0x245dd0(0x2b4)][0x0]['headless'];_0x107828[_0x245dd0(0x2b4)][0x0]['headless']=!_0x415596;const _0x54f135=JSON[_0x245dd0(0x2e3)](_0x107828,null,0x2);fs['writeFileSync'](_0x14c499,_0x54f135),config=getConfiguration(),io['to']('botmanager')[_0x245dd0(0x301)](_0x245dd0(0x1c7),config),broadcastToBots(_0x245dd0(0x1c7),JSON['stringify'](config));}}function validateTelegram(_0x43d650){const _0x5d151c=_0x1b412f;if(_0x43d650[_0x5d151c(0x198)][_0x5d151c(0x129)]!=settings['telegramUsername']&&'@'+_0x43d650['from'][_0x5d151c(0x129)]!=settings[_0x5d151c(0x207)]||_0x43d650['chat']['id']!=settings[_0x5d151c(0x124)])return sendTelegram(_0x43d650[_0x5d151c(0x122)]['id'],_0x5d151c(0x314),{'parse_mode':_0x5d151c(0x2b8)}),![];return!![];}async function initTelegram(){const _0x3c7dd0=_0x1b412f;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x3c7dd0(0x1a2)]);let _0x47d96f=_0x3c7dd0(0x240);_0x47d96f+='\x0a',_0x47d96f+=_0x3c7dd0(0x2f0),_0x47d96f+='/disable\x20-\x20disable\x20notifications\x0a',_0x47d96f+=_0x3c7dd0(0x1ba),_0x47d96f+=_0x3c7dd0(0x183),_0x47d96f+=_0x3c7dd0(0x304),_0x47d96f+=_0x3c7dd0(0x2f6),_0x47d96f+=_0x3c7dd0(0x276),_0x47d96f+=_0x3c7dd0(0x18c),_0x47d96f+=_0x3c7dd0(0x2c9),_0x47d96f+=_0x3c7dd0(0x29b),_0x47d96f+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x47d96f+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x47d96f+=_0x3c7dd0(0x326),_0x47d96f+=_0x3c7dd0(0x1af);let _0x1eec73='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x1eec73+='\x0a',_0x1eec73+=_0x47d96f,tgBot[_0x3c7dd0(0x28b)]((_0xb5c8be,_0x929ea6)=>{const _0x3578dd=_0x3c7dd0;logger[_0x3578dd(0x14c)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x3578dd(0x199)]('Telegraf\x20error:',_0xb5c8be);}),tgBot[_0x3c7dd0(0x177)](async(_0x1237f9,_0x5373fb)=>{const _0x33a0c8=_0x3c7dd0;if(!(!settings[_0x33a0c8(0x124)]&&_0x1237f9[_0x33a0c8(0x2f2)][_0x33a0c8(0x294)][_0x33a0c8(0x265)]==_0x33a0c8(0x2fb))){if(!validateTelegram(_0x1237f9))return;}_0x5373fb();}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x13f),async _0x24b832=>{const _0x310322=_0x3c7dd0;if(!settings[_0x310322(0x124)])updateSetting(_0x310322(0x124),_0x24b832[_0x310322(0x122)]['id']);updateSetting(_0x310322(0x261),!![]);if(!validateTelegram(_0x24b832))return;await sendTelegram(_0x24b832[_0x310322(0x122)]['id'],_0x1eec73);}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x16b),async _0x3aa343=>{const _0x5e7c71=_0x3c7dd0;updateSetting(_0x5e7c71(0x261),!![]),await sendTelegram(_0x3aa343['chat']['id'],_0x5e7c71(0x31a));}),tgBot['command'](_0x3c7dd0(0x26d),async _0x7e3b63=>{await sendTelegram(_0x7e3b63['chat']['id'],'Notifications\x20disabled'),updateSetting('telegramEnabled',![]);}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x155),async _0x3aca5b=>{const _0x1a865f=_0x3c7dd0,_0x10b746=Markup[_0x1a865f(0x30f)]([Markup[_0x1a865f(0x135)][_0x1a865f(0x14d)](_0x1a865f(0x323),_0x1a865f(0x275)),Markup[_0x1a865f(0x135)][_0x1a865f(0x14d)](_0x1a865f(0x206),_0x1a865f(0x2e5)),Markup[_0x1a865f(0x135)][_0x1a865f(0x14d)](_0x1a865f(0x1c6),_0x1a865f(0x2d6))]);_0x3aca5b[_0x1a865f(0x2e7)](_0x1a865f(0x24b),_0x10b746);}),tgBot[_0x3c7dd0(0x1b6)](_0x3c7dd0(0x275),async _0x3254fb=>{const _0x394250=_0x3c7dd0;_0x3254fb[_0x394250(0x27a)](),updateSetting(_0x394250(0x2df),_0x394250(0x18d)),updateSetting(_0x394250(0x261),!![]),await sendTelegram(_0x3254fb['chat']['id'],_0x394250(0x329));}),tgBot[_0x3c7dd0(0x1b6)]('config_alerts',async _0x2caa34=>{const _0x85fe7e=_0x3c7dd0;_0x2caa34[_0x85fe7e(0x27a)](),updateSetting(_0x85fe7e(0x2df),_0x85fe7e(0x18b)),updateSetting(_0x85fe7e(0x261),!![]),await sendTelegram(_0x2caa34['chat']['id'],_0x85fe7e(0x140));}),tgBot[_0x3c7dd0(0x1b6)](_0x3c7dd0(0x2d6),async _0x448a45=>{const _0x2d8d28=_0x3c7dd0;_0x448a45[_0x2d8d28(0x27a)](),updateSetting(_0x2d8d28(0x2df),'all'),updateSetting(_0x2d8d28(0x261),!![]),await sendTelegram(_0x448a45[_0x2d8d28(0x122)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x1ac),async _0x141a5c=>{const _0x3b3c27=_0x3c7dd0,_0x20ea87=getBotsWithMode();let _0x1afaef=_0x3b3c27(0x1ea);config['forEach'](_0x12970c=>{const _0x224f88=_0x3b3c27,_0x255576=_0x20ea87[_0x224f88(0x250)](_0x4002d8=>_0x4002d8['botID']==_0x12970c['botID'])[_0x224f88(0x309)];_0x1afaef+='Bot\x20'+_0x12970c[_0x224f88(0x2ff)]+':\x20'+_0x12970c[_0x224f88(0x1ac)]+'\x20|\x20'+_0x255576+_0x224f88(0x2a9)+_0x12970c['live']+'\x0a';}),_0x1afaef+='\x0a',_0x1afaef+=_0x3b3c27(0x277),_0x1afaef+=!settings['telegramEnabled']?_0x3b3c27(0x16a):_0x3b3c27(0x1d9),_0x1afaef+=settings[_0x3b3c27(0x261)]?settings[_0x3b3c27(0x2df)]==_0x3b3c27(0x176)?_0x3b3c27(0x159):_0x3b3c27(0x292)+settings[_0x3b3c27(0x2df)]+_0x3b3c27(0x23e):'',await sendTelegram(_0x141a5c['chat']['id'],_0x1afaef,{'parse_mode':_0x3b3c27(0x2b8)});}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x164),async _0x5cbd68=>{const _0x1cc130=_0x3c7dd0,_0x2463b9=getEnabledBots();if(_0x2463b9['length']==0x0)await sendTelegram(_0x5cbd68[_0x1cc130(0x122)]['id'],_0x1cc130(0x162));else{if(_0x2463b9['length']>0x1)_0x2463b9[_0x1cc130(0x306)]({'botID':_0x1cc130(0x176)});let _0x44569d=[],_0x52f5ce=[];const _0x2602e6=_0x2463b9['length']%0x4==0x0||_0x2463b9['length']%0x4==0x3||_0x2463b9[_0x1cc130(0x27c)]%0x3==0x1?0x4:0x3;let _0xb36ec8=0x0;_0x2463b9['forEach']((_0x13f87b,_0x70a3e4)=>{const _0x394890=_0x1cc130;if(_0x70a3e4%_0x2602e6==0x0)_0x52f5ce=[];_0x52f5ce[_0x394890(0x306)](Markup['button'][_0x394890(0x14d)](_0x13f87b[_0x394890(0x2ff)]==_0x394890(0x176)?_0x394890(0x2e8):_0x394890(0x243)+_0x13f87b[_0x394890(0x2ff)],_0x394890(0x26c)+_0x13f87b[_0x394890(0x2ff)])),_0x70a3e4%_0x2602e6==0x0&&(_0x44569d[_0xb36ec8]=_0x52f5ce,_0xb36ec8++);});const _0x2861e2=Markup['inlineKeyboard'](_0x44569d);_0x5cbd68[_0x1cc130(0x2e7)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x2861e2);}}),tgBot['action'](/restart_(.+)/,async _0x5701c7=>{const _0x36c331=_0x3c7dd0,_0x42044e=_0x5701c7['match'][0x1];_0x5701c7[_0x36c331(0x27a)](),_0x42044e==_0x36c331(0x176)?config['forEach'](_0x1c2d25=>{const _0x97c09=_0x36c331;restartBot(_0x1c2d25[_0x97c09(0x2ff)]);}):restartBot(_0x42044e);}),tgBot[_0x3c7dd0(0x310)]('on',async _0x471ea5=>{const _0x3b9269=_0x3c7dd0,_0x5c9caf=getDisabledBots();if(_0x5c9caf[_0x3b9269(0x27c)]==0x0)await sendTelegram(_0x471ea5['chat']['id'],_0x3b9269(0x1fc));else{if(_0x5c9caf[_0x3b9269(0x27c)]>0x1)_0x5c9caf[_0x3b9269(0x306)]({'botID':_0x3b9269(0x176)});let _0x4eb260=[],_0x50108c=[];const _0x2dc650=_0x5c9caf[_0x3b9269(0x27c)]%0x4==0x0||_0x5c9caf[_0x3b9269(0x27c)]%0x4==0x3||_0x5c9caf[_0x3b9269(0x27c)]%0x3==0x1?0x4:0x3;let _0x2b5055=0x0;_0x5c9caf[_0x3b9269(0x1e6)]((_0xa209b6,_0x221119)=>{const _0x1c8303=_0x3b9269;if(_0x221119%_0x2dc650==0x0)_0x50108c=[];_0x50108c[_0x1c8303(0x306)](Markup[_0x1c8303(0x135)][_0x1c8303(0x14d)](_0xa209b6[_0x1c8303(0x2ff)]==_0x1c8303(0x176)?'All\x20bots':_0x1c8303(0x243)+_0xa209b6[_0x1c8303(0x2ff)],_0x1c8303(0x1a9)+_0xa209b6[_0x1c8303(0x2ff)])),_0x221119%_0x2dc650==0x0&&(_0x4eb260[_0x2b5055]=_0x50108c,_0x2b5055++);});const _0x41fbee=Markup[_0x3b9269(0x30f)](_0x4eb260);_0x471ea5[_0x3b9269(0x2e7)](_0x3b9269(0x211),_0x41fbee);}}),tgBot['action'](/on_(.+)/,async _0x463e22=>{const _0x2a214e=_0x3c7dd0,_0x2de8d6=_0x463e22[_0x2a214e(0x208)][0x1];_0x463e22['editMessageReplyMarkup']();if(_0x2de8d6==_0x2a214e(0x176)){const _0x13dca5=getDisabledBots();await sendTelegram(_0x463e22[_0x2a214e(0x122)]['id'],_0x2a214e(0x2c3)),_0x13dca5[_0x2a214e(0x1e6)](_0x5daeac=>{const _0x5b3a0f=_0x2a214e;if(_0x5daeac['botID']!=_0x5b3a0f(0x176))toggleBot(_0x5daeac[_0x5b3a0f(0x2ff)],toggleStatus(_0x5daeac[_0x5b3a0f(0x2ff)]),_0x5b3a0f(0x136));});}else await sendTelegram(_0x463e22['chat']['id'],_0x2a214e(0x2fe)+_0x2de8d6),toggleBot(_0x2de8d6,toggleStatus(_0x2de8d6),_0x2a214e(0x136));}),tgBot['command']('off',async _0x29bacc=>{const _0x4f2946=_0x3c7dd0,_0x1b0c53=getEnabledBots();if(_0x1b0c53[_0x4f2946(0x27c)]==0x0)await sendTelegram(_0x29bacc[_0x4f2946(0x122)]['id'],_0x4f2946(0x162));else{if(_0x1b0c53[_0x4f2946(0x27c)]>0x1)_0x1b0c53[_0x4f2946(0x306)]({'botID':_0x4f2946(0x176)});let _0x4dd567=[],_0xbd11ec=[];const _0x4c93fc=_0x1b0c53[_0x4f2946(0x27c)]%0x4==0x0||_0x1b0c53['length']%0x4==0x3||_0x1b0c53[_0x4f2946(0x27c)]%0x3==0x1?0x4:0x3;let _0x39db00=0x0;_0x1b0c53[_0x4f2946(0x1e6)]((_0x1a60e2,_0x27d6ac)=>{const _0x293848=_0x4f2946;if(_0x27d6ac%_0x4c93fc==0x0)_0xbd11ec=[];_0xbd11ec['push'](Markup[_0x293848(0x135)][_0x293848(0x14d)](_0x1a60e2[_0x293848(0x2ff)]==_0x293848(0x176)?_0x293848(0x2e8):_0x293848(0x243)+_0x1a60e2[_0x293848(0x2ff)],'off_'+_0x1a60e2[_0x293848(0x2ff)])),_0x27d6ac%_0x4c93fc==0x0&&(_0x4dd567[_0x39db00]=_0xbd11ec,_0x39db00++);});const _0x24d2db=Markup['inlineKeyboard'](_0x4dd567);_0x29bacc[_0x4f2946(0x2e7)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x24d2db);}}),tgBot[_0x3c7dd0(0x1b6)](/off_(.+)/,async _0x47adb9=>{const _0x177b81=_0x3c7dd0,_0x3d7921=_0x47adb9['match'][0x1];_0x47adb9['editMessageReplyMarkup']();if(_0x3d7921==_0x177b81(0x176)){const _0x1cad18=getEnabledBots();await sendTelegram(_0x47adb9[_0x177b81(0x122)]['id'],_0x177b81(0x2a2)),_0x1cad18[_0x177b81(0x1e6)](_0x538ed6=>{const _0x563b5b=_0x177b81;if(_0x538ed6[_0x563b5b(0x2ff)]!='all')toggleBot(_0x538ed6[_0x563b5b(0x2ff)],toggleStatus(_0x538ed6['botID']),_0x563b5b(0x136));});}else await sendTelegram(_0x47adb9[_0x177b81(0x122)]['id'],_0x177b81(0x180)+_0x3d7921),toggleBot(_0x3d7921,toggleStatus(_0x3d7921),'stopped');}),tgBot['command']('metrics',async _0x352af4=>{const _0x4e867f=_0x3c7dd0,_0x58b048=getEnabledBots();if(_0x58b048['length']==0x0)await sendTelegram(_0x352af4[_0x4e867f(0x122)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x58b048[_0x4e867f(0x27c)]>0x1){let _0x4610c7=[],_0x22d5be=[];const _0x226e9a=_0x58b048['length']%0x4==0x0||_0x58b048[_0x4e867f(0x27c)]%0x4==0x3||_0x58b048[_0x4e867f(0x27c)]%0x3==0x1?0x4:0x3;let _0x42a924=0x0;_0x58b048['forEach']((_0x4f4a54,_0x12a4c8)=>{const _0x593e39=_0x4e867f;if(_0x12a4c8%_0x226e9a==0x0)_0x22d5be=[];_0x22d5be[_0x593e39(0x306)](Markup['button'][_0x593e39(0x14d)](_0x593e39(0x243)+_0x4f4a54[_0x593e39(0x2ff)],'metrics_'+_0x4f4a54[_0x593e39(0x2ff)])),_0x12a4c8%_0x226e9a==0x0&&(_0x4610c7[_0x42a924]=_0x22d5be,_0x42a924++);});const _0x4cc2fe=Markup[_0x4e867f(0x30f)](_0x4610c7);_0x352af4[_0x4e867f(0x2e7)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x4cc2fe);}else{const _0x8e6f5=_0x58b048[0x0]['botID'];if(pid[_0x8e6f5])pid[_0x8e6f5]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x3c7dd0(0x1b6)](/metrics_(.+)/,async _0x1809bf=>{const _0x1cf1cf=_0x3c7dd0,_0xbe94b9=_0x1809bf['match'][0x1];_0x1809bf[_0x1cf1cf(0x27a)]();if(pid[_0xbe94b9])pid[_0xbe94b9]['send']({'function':_0x1cf1cf(0x137),'args':null});}),tgBot[_0x3c7dd0(0x310)]('portfolio',async _0x2eb29d=>{const _0x5bbc08=_0x3c7dd0,_0x3876ac=getEnabledBots();if(_0x3876ac[_0x5bbc08(0x27c)]==0x0)await sendTelegram(_0x2eb29d['chat']['id'],_0x5bbc08(0x162));else{if(_0x3876ac[_0x5bbc08(0x27c)]>0x1){let _0x25536a=[],_0x20a6d4=[];const _0x4631a7=_0x3876ac[_0x5bbc08(0x27c)]%0x4==0x0||_0x3876ac[_0x5bbc08(0x27c)]%0x4==0x3||_0x3876ac[_0x5bbc08(0x27c)]%0x3==0x1?0x4:0x3;let _0x2da79a=0x0;_0x3876ac[_0x5bbc08(0x1e6)]((_0x583b66,_0xa97797)=>{const _0x180368=_0x5bbc08;if(_0xa97797%_0x4631a7==0x0)_0x20a6d4=[];_0x20a6d4[_0x180368(0x306)](Markup[_0x180368(0x135)][_0x180368(0x14d)](_0x180368(0x243)+_0x583b66[_0x180368(0x2ff)],'portfolio_'+_0x583b66[_0x180368(0x2ff)])),_0xa97797%_0x4631a7==0x0&&(_0x25536a[_0x2da79a]=_0x20a6d4,_0x2da79a++);});const _0x1467c1=Markup[_0x5bbc08(0x30f)](_0x25536a);_0x2eb29d[_0x5bbc08(0x2e7)](_0x5bbc08(0x28d),_0x1467c1);}else{const _0x447b9d=_0x3876ac[0x0]['botID'];if(pid[_0x447b9d])pid[_0x447b9d][_0x5bbc08(0x2ef)]({'function':_0x5bbc08(0x23d),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x4fa884=>{const _0x1b3fe7=_0x3c7dd0,_0x2fae16=_0x4fa884['match'][0x1];_0x4fa884['editMessageReplyMarkup']();if(pid[_0x2fae16])pid[_0x2fae16][_0x1b3fe7(0x2ef)]({'function':_0x1b3fe7(0x23d),'args':null});}),tgBot['command'](_0x3c7dd0(0x2f2),async _0x4cc39e=>{const _0x17663e=_0x3c7dd0;await getMessages();if(!updateAvailable)await sendTelegram(_0x4cc39e[_0x17663e(0x122)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x4cc39e[_0x17663e(0x122)]['id'],_0x17663e(0x13c));else{const _0x5d07e4=Markup[_0x17663e(0x30f)]([Markup['button'][_0x17663e(0x14d)](_0x17663e(0x1b1),_0x17663e(0x2e9)),Markup[_0x17663e(0x135)][_0x17663e(0x14d)]('No',_0x17663e(0x2b5))]);_0x4cc39e[_0x17663e(0x2e7)](_0x17663e(0x1df),_0x5d07e4);}}}),tgBot[_0x3c7dd0(0x1b6)](/update_(.+)/,async _0x4cda12=>{const _0x4eab1b=_0x3c7dd0,_0x5ba905=_0x4cda12[_0x4eab1b(0x208)][0x1];_0x4cda12[_0x4eab1b(0x27a)](),_0x5ba905==_0x4eab1b(0x20d)&&(await sendTelegram(_0x4cda12['chat']['id'],_0x4eab1b(0x260)),updateBB(_0x4eab1b(0x2f2))),_0x5ba905=='no'&&await sendTelegram(_0x4cda12[_0x4eab1b(0x122)]['id'],_0x4eab1b(0x263));}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x18f),async _0x4ddf6d=>{const _0x189749=_0x3c7dd0;if(!validInstallation)await sendTelegram(_0x4ddf6d[_0x189749(0x122)]['id'],_0x189749(0x189));else{const _0x4f768e=Markup[_0x189749(0x30f)]([Markup[_0x189749(0x135)]['callback'](_0x189749(0x1b1),_0x189749(0x174)),Markup[_0x189749(0x135)]['callback']('No','reinstall_no')]);_0x4ddf6d[_0x189749(0x2e7)](_0x189749(0x31c),_0x4f768e);}}),tgBot['action'](/reinstall_(.+)/,async _0x116d2c=>{const _0x1bd352=_0x3c7dd0,_0x17faf1=_0x116d2c[_0x1bd352(0x208)][0x1];_0x116d2c['editMessageReplyMarkup'](),_0x17faf1=='yes'&&(await sendTelegram(_0x116d2c[_0x1bd352(0x122)]['id'],_0x1bd352(0x32a)),updateBB(_0x1bd352(0x18f))),_0x17faf1=='no'&&await sendTelegram(_0x116d2c[_0x1bd352(0x122)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x2f3),async _0x16ffa9=>{const _0x1bd77e=_0x3c7dd0,_0x449c5e=getBotsWithMode();if(_0x449c5e[_0x1bd77e(0x27c)]==0x0)await sendTelegram(_0x16ffa9[_0x1bd77e(0x122)]['id'],_0x1bd77e(0x162));else{let _0x18e3ac=[],_0x360ca7=[];const _0x42a6e6=0x2;let _0x12b7cb=0x0;_0x449c5e[_0x1bd77e(0x1e6)]((_0x42a872,_0x251d24)=>{const _0x37fdb5=_0x1bd77e;if(_0x251d24%_0x42a6e6==0x0)_0x360ca7=[];_0x360ca7[_0x37fdb5(0x306)](Markup[_0x37fdb5(0x135)]['callback']('Bot\x20'+_0x42a872['botID']+'\x20('+_0x42a872[_0x37fdb5(0x309)]+')',_0x37fdb5(0x2cb)+_0x42a872[_0x37fdb5(0x2ff)])),_0x251d24%_0x42a6e6==0x0&&(_0x18e3ac[_0x12b7cb]=_0x360ca7,_0x12b7cb++);});const _0x548fac=Markup['inlineKeyboard'](_0x18e3ac);_0x16ffa9[_0x1bd77e(0x2e7)](_0x1bd77e(0x197),_0x548fac);}}),tgBot['action'](/toggle_(.+)/,async _0x246e26=>{const _0x3841b3=_0x3c7dd0,_0x1da6c3=_0x246e26[_0x3841b3(0x208)][0x1];_0x246e26[_0x3841b3(0x27a)]();const _0x3e10d1=getBotsWithMode(),_0x1026d=_0x3e10d1[_0x3841b3(0x250)](_0x47a1e9=>_0x47a1e9[_0x3841b3(0x2ff)]==_0x1da6c3),_0x2eb95d=_0x1026d[_0x3841b3(0x309)]==_0x3841b3(0x2e2)?_0x3841b3(0x1e7):_0x3841b3(0x2e2);await sendTelegram(_0x246e26[_0x3841b3(0x122)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x1da6c3+_0x3841b3(0x2aa)+_0x2eb95d+'\x20mode'),toggleBotMode(_0x1da6c3);}),tgBot[_0x3c7dd0(0x310)](_0x3c7dd0(0x166),async _0x150b39=>{const _0x2e77f7=_0x3c7dd0;let _0x7079a3='';config[_0x2e77f7(0x1e6)](_0x1925fd=>{const _0x36dbc8=_0x2e77f7;_0x7079a3+=_0x36dbc8(0x243)+_0x1925fd[_0x36dbc8(0x2ff)]+':\x20'+_0x1925fd[_0x36dbc8(0x2ae)]+'\x0a';}),await sendTelegram(_0x150b39[_0x2e77f7(0x122)]['id'],_0x7079a3,{'parse_mode':_0x2e77f7(0x2b8)});}),tgBot[_0x3c7dd0(0x310)]('help',async _0x27021e=>{const _0x5793f5=_0x3c7dd0;await sendTelegram(_0x27021e[_0x5793f5(0x122)]['id'],_0x47d96f);}),process['once']('SIGINT',()=>tgBot['stop']('SIGINT')),process[_0x3c7dd0(0x32b)](_0x3c7dd0(0x133),()=>tgBot[_0x3c7dd0(0x23c)](_0x3c7dd0(0x133))),tgBot[_0x3c7dd0(0x1de)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x34dd51,_0x2b5263,_0x46c876){const _0x1dcf32=_0x1b412f;_0x46c876={..._0x46c876,'disable_web_page_preview':!![]};try{await tgBot[_0x1dcf32(0x32c)][_0x1dcf32(0x2ac)](_0x34dd51,_0x2b5263,_0x46c876);}catch(_0x4d13c3){console[_0x1dcf32(0x1b8)](_0x1dcf32(0x27e),_0x4d13c3);}}async function sendTelegramBot(_0x4aa77e,_0x509cee){const _0x3cc9e3=_0x1b412f;if(settings[_0x3cc9e3(0x261)]){if(settings[_0x3cc9e3(0x2df)]==_0x3cc9e3(0x176)||(_0x509cee[_0x3cc9e3(0x191)]=='error'||_0x509cee[_0x3cc9e3(0x191)]==_0x3cc9e3(0x1d8)||_0x509cee[_0x3cc9e3(0x191)]==_0x3cc9e3(0x152))&&settings[_0x3cc9e3(0x2df)]==_0x3cc9e3(0x18b)||_0x509cee['type']=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x509cee[_0x3cc9e3(0x182)])await sendTelegram(settings[_0x3cc9e3(0x124)],_0x509cee['botname']+_0x3cc9e3(0x1eb)+_0x509cee[_0x3cc9e3(0x131)]);else await sendTelegram(settings['telegramChatId'],_0x3cc9e3(0x243)+_0x4aa77e+_0x3cc9e3(0x1eb)+_0x509cee[_0x3cc9e3(0x131)]);}}}}async function sendTelegramMsg(_0x206f67,_0x527f89=_0x1b412f(0x2b8)){return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings['telegramChatId'],_0x206f67,{'parse_mode':_0x527f89}),!![]):![];}function getDeviceWithIp(_0x8c1f5f){return devices['find'](_0x536d18=>_0x536d18['ip']===_0x8c1f5f);}async function temporaryAccess2FA(_0x35f99c,_0x2ef74f){const _0x3878cc=_0x1b412f;let _0x517bff=new Date(),_0x471859=![];if(lastIpApproval){if(_0x517bff-lastIpApproval<0x1388)_0x471859=!![];}lastIpApproval=new Date();if(_0x471859)return;if(tgBot&&settings[_0x3878cc(0x124)]){const _0x453063=uuidRandom();tmpStorage[_0x453063]={'uuid':_0x35f99c,'externalip':_0x2ef74f};const _0x4bd3d0=Markup[_0x3878cc(0x30f)]([Markup[_0x3878cc(0x135)][_0x3878cc(0x14d)](_0x3878cc(0x218),_0x3878cc(0x27d)+_0x453063),Markup[_0x3878cc(0x135)]['callback'](_0x3878cc(0x12d),_0x3878cc(0x271)+_0x453063),Markup[_0x3878cc(0x135)][_0x3878cc(0x14d)](_0x3878cc(0x288),'tempaccess_30_'+_0x453063),Markup[_0x3878cc(0x135)][_0x3878cc(0x14d)](_0x3878cc(0x28c),'tempaccess_reject_'+_0x453063)]);await sendTelegram(settings[_0x3878cc(0x124)],_0x3878cc(0x21a)+normalizeIP(_0x2ef74f)['show']+'\x20?',_0x4bd3d0),tgBot[_0x3878cc(0x1b6)](/tempaccess_(.+)_(.+)/,async _0x4152e6=>{const _0x534154=_0x3878cc,_0x4b109d=_0x4152e6[_0x534154(0x208)][0x1],_0x101423=_0x4152e6['match'][0x2],{uuid:_0x50b4be,externalip:_0x23c7b6}=tmpStorage[_0x101423];delete tmpStorage[_0x101423],_0x4152e6['editMessageReplyMarkup'](),devices[_0x50b4be][_0x534154(0x26e)]={'clientip':_0x23c7b6,'timestamp':new Date()[_0x534154(0x248)](),'expiry':_0x4b109d},_0x4b109d!=_0x534154(0x28c)?(await sendTelegram(_0x4152e6[_0x534154(0x122)]['id'],_0x534154(0x28f)+_0x4b109d+_0x534154(0x22b),{'parse_mode':'HTML'}),io['to'](_0x50b4be)[_0x534154(0x301)](_0x534154(0x1ac),{'access':{'allow':![],'reason':_0x534154(0x22a),'token':null}})):(await sendTelegram(_0x4152e6[_0x534154(0x122)]['id'],_0x534154(0x1ad)),io['to'](_0x50b4be)['emit'](_0x534154(0x1ac),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0xce6ab1,_0x385653){const _0x42d402=_0x1b412f;if(tgBot&&settings['telegramChatId']){const _0x157f6e=uuidRandom();tmpStorage[_0x157f6e]={'uuid':_0xce6ab1,'externalip':_0x385653};const _0x3e9435=Markup[_0x42d402(0x30f)]([Markup[_0x42d402(0x135)][_0x42d402(0x14d)](_0x42d402(0x147),_0x42d402(0x2ce)+loginExpiry+'_'+_0x157f6e),Markup['button'][_0x42d402(0x14d)](_0x42d402(0x28c),_0x42d402(0x16c)+_0x157f6e)]);await sendTelegram(settings['telegramChatId'],_0x42d402(0x172)+normalizeIP(_0x385653)['show']+'\x20?',_0x3e9435),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x52e0df=>{const _0x5c7f63=_0x42d402,_0x35aa6f=_0x52e0df['match'][0x1],_0x57f833=_0x52e0df['match'][0x2],{uuid:_0x366e78,externalip:_0x4b2463}=tmpStorage[_0x57f833];delete tmpStorage[_0x57f833],_0x52e0df[_0x5c7f63(0x27a)](),devices[_0x366e78][_0x5c7f63(0x1b0)]={'clientip':_0x4b2463,'timestamp':new Date()[_0x5c7f63(0x248)](),'expiry':_0x35aa6f},_0x35aa6f!=_0x5c7f63(0x28c)?(await sendTelegram(_0x52e0df[_0x5c7f63(0x122)]['id'],_0x5c7f63(0x262),{'parse_mode':_0x5c7f63(0x2b8)}),io['to'](_0x366e78)[_0x5c7f63(0x301)](_0x5c7f63(0x1ac),{'access':{'allow':![],'reason':_0x5c7f63(0x22a),'token':null}})):(await sendTelegram(_0x52e0df[_0x5c7f63(0x122)]['id'],_0x5c7f63(0x188)),io['to'](_0x366e78)[_0x5c7f63(0x301)](_0x5c7f63(0x1ac),{'access':{'allow':![],'reason':_0x5c7f63(0x24c),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4c367f=_0x1b412f;return dbConfig[_0x4c367f(0x171)](_0x4c367f(0x1c7))[_0x4c367f(0x1fe)](_0x4c367f(0x2ff))[_0x4c367f(0x290)]({'status':_0x4c367f(0x226)})['value']()||[];}function getDisabledBots(){const _0x47387a=_0x1b412f;return dbConfig[_0x47387a(0x171)](_0x47387a(0x1c7))['sortBy']('botID')[_0x47387a(0x290)]({'status':_0x47387a(0x126)})[_0x47387a(0x315)]()||[];}function getBotAttributes(_0x14c9cc){const _0x305ed3=_0x1b412f;let _0x2661c0={};const _0x489967=configpath+_0x305ed3(0x32d)+_0x14c9cc+'-config.json',_0x5b87f5=fs['existsSync'](_0x489967);if(_0x5b87f5){const _0x7a7066=fs[_0x305ed3(0x303)](_0x489967);try{const _0xd03d63=JSON[_0x305ed3(0x2d4)](_0x7a7066),_0x468e29=_0xd03d63?_0xd03d63[_0x305ed3(0x2b4)][0x0][_0x305ed3(0x12e)]:![];_0x2661c0[_0x305ed3(0x309)]=_0x468e29?_0x305ed3(0x2e2):'manual',_0x2661c0[_0x305ed3(0x2ae)]=_0xd03d63?_0xd03d63[_0x305ed3(0x2b4)][0x0][_0x305ed3(0x2ae)]:_0x305ed3(0x243)+_0x14c9cc;}catch(_0x534b41){_0x2661c0[_0x305ed3(0x309)]=_0x305ed3(0x1e7),_0x2661c0[_0x305ed3(0x2ae)]=_0x305ed3(0x243)+_0x14c9cc;}}else _0x2661c0[_0x305ed3(0x309)]=_0x305ed3(0x1e7),_0x2661c0['botname']=_0x305ed3(0x243)+_0x14c9cc;return _0x2661c0;}function getBotsWithMode(){const _0x15ce1c=_0x1b412f,_0x11c7b4=dbConfig[_0x15ce1c(0x171)](_0x15ce1c(0x1c7))['sortBy'](_0x15ce1c(0x2ff))[_0x15ce1c(0x315)]()||[];return _0x11c7b4['forEach'](_0x144b04=>{const _0x1aa5fa=_0x15ce1c;let _0x3e8881=getBotAttributes(_0x144b04[_0x1aa5fa(0x2ff)]);_0x144b04[_0x1aa5fa(0x309)]=_0x3e8881[_0x1aa5fa(0x309)];}),_0x11c7b4;}function getBotExchanges(){const _0x499f6e=_0x1b412f;let _0x44593a=[];const _0x3f4512=dbConfig[_0x499f6e(0x171)]('bots')[_0x499f6e(0x1fe)](_0x499f6e(0x2ff))[_0x499f6e(0x315)]()||[];_0x3f4512[_0x499f6e(0x1e6)](_0x50842c=>{const _0x1134c8=_0x499f6e;if(_0x50842c[_0x1134c8(0x1ac)]==_0x1134c8(0x226)){const _0x1bff55=configpath+'bot-'+_0x50842c['botID']+_0x1134c8(0x287),_0x146b49=fs['existsSync'](_0x1bff55);let _0x42b578;if(_0x146b49){const _0x1c8591=fs[_0x1134c8(0x303)](_0x1bff55);try{const _0x487ca4=JSON[_0x1134c8(0x2d4)](_0x1c8591);_0x42b578=_0x487ca4?_0x487ca4[_0x1134c8(0x2b4)][0x0][_0x1134c8(0x28e)]:null;}catch(_0x4dd77d){}}if(_0x42b578)_0x44593a[_0x1134c8(0x306)](_0x42b578);}});const _0x49ed40=[...new Set(_0x44593a)][_0x499f6e(0x1d4)]();return _0x49ed40;}async function initUser(){const _0x2b2463=_0x1b412f;if(!settings['userid']){const _0x27a848=uuidRandom();mixpanel[_0x2b2463(0x160)](_0x27a848),updateSetting(_0x2b2463(0x282),_0x27a848);}}async function initSecure(){const _0x43f8e4=_0x1b412f;let _0x300421=getSecure();if(!_0x300421['hasOwnProperty'](_0x43f8e4(0x154))){let _0x58f60f=await generateKeys();_0x300421[_0x43f8e4(0x179)]=_0x58f60f[_0x43f8e4(0x179)],_0x300421[_0x43f8e4(0x186)]=_0x58f60f['privateKey'],_0x300421['secret']=crypto[_0x43f8e4(0x1be)](0x20)[_0x43f8e4(0x1dd)](_0x43f8e4(0x257));;storeSecure(_0x300421);}}function getSettings(){const _0x363cbe=_0x1b412f;return dbSettings['get']('settings')[_0x363cbe(0x315)]()||{};}function getSecure(){const _0x390fb5=_0x1b412f;return dbSecure[_0x390fb5(0x171)](_0x390fb5(0x230))[_0x390fb5(0x315)]()||{};}function getBlacklist(){const _0x12debd=_0x1b412f;return dbSecure[_0x12debd(0x171)](_0x12debd(0x181))[_0x12debd(0x315)]()||[];}function broadcastToBots(_0x229973,_0x585739){const _0x2f5b9b=_0x1b412f;config[_0x2f5b9b(0x1e6)](_0xbbd694=>{const _0x1a0989=_0x2f5b9b;if(_0xbbd694[_0x1a0989(0x1ac)]==_0x1a0989(0x226)&&_0xbbd694[_0x1a0989(0x1b7)]==_0x1a0989(0x327)||_0xbbd694['status']==_0x1a0989(0x273)&&_0xbbd694[_0x1a0989(0x1b7)]==_0x1a0989(0x327)){if(pid[_0xbbd694['botID']])pid[_0xbbd694[_0x1a0989(0x2ff)]]['send']({[_0x229973]:_0x585739});}});}async function storeSettings(_0x508a80,_0x1164d8=![]){const _0xfc0d15=_0x1b412f;_0x508a80={...settings,..._0x508a80};if(_0x1164d8&&_0x508a80['bbPassword']!=_0xfc0d15(0x201)&&_0x508a80[_0xfc0d15(0x1a1)]!=_0xfc0d15(0x1c0)&&_0x508a80[_0xfc0d15(0x1a1)]!=''){const _0x42832a=crypt[_0xfc0d15(0x2d0)](secure['privateKey'],_0x508a80[_0xfc0d15(0x1a1)])[_0xfc0d15(0x294)][_0xfc0d15(0x26b)](_0xfc0d15(0x2c0))[0x0],_0x4267bc=bcrypt['hashSync'](_0x42832a,saltRounds);_0x508a80={..._0x508a80,'bbPassword':_0x4267bc};}if(_0x1164d8&&_0x508a80['telegramToken']!='************'&&_0x508a80[_0xfc0d15(0x1a2)]!=_0xfc0d15(0x1c0)&&_0x508a80[_0xfc0d15(0x1a2)]!=''){const _0x115ea7=crypt[_0xfc0d15(0x2d0)](secure[_0xfc0d15(0x186)],_0x508a80[_0xfc0d15(0x1a2)])[_0xfc0d15(0x294)][_0xfc0d15(0x26b)](_0xfc0d15(0x2c0))[0x0];_0x508a80={..._0x508a80,'telegramToken':_0x115ea7};}if(_0x1164d8&&_0x508a80[_0xfc0d15(0x2eb)]!='************'&&_0x508a80[_0xfc0d15(0x2eb)]!=_0xfc0d15(0x1c0)&&_0x508a80[_0xfc0d15(0x2eb)]!=''){const _0x2d72ff=crypt['decrypt'](secure[_0xfc0d15(0x186)],_0x508a80['marketcapApi'])[_0xfc0d15(0x294)][_0xfc0d15(0x26b)](_0xfc0d15(0x2c0))[0x0];_0x508a80={..._0x508a80,'marketcapApi':_0x2d72ff};}const _0x483c5f=_0x508a80[_0xfc0d15(0x1a2)]!=_0xfc0d15(0x201)&&_0x508a80[_0xfc0d15(0x1a2)]!=settings['telegramToken']||_0x508a80[_0xfc0d15(0x207)]!=settings[_0xfc0d15(0x207)],_0x4bab74=_0x508a80[_0xfc0d15(0x1a2)]==''||_0x508a80[_0xfc0d15(0x207)]=='',_0x4b25c2=_0x508a80[_0xfc0d15(0x2eb)]&&_0x508a80['marketcapApi']!=_0xfc0d15(0x201)&&_0x508a80[_0xfc0d15(0x2eb)]!=settings[_0xfc0d15(0x1a2)];_0x483c5f&&(_0x508a80['telegramChatId']=null,_0x508a80[_0xfc0d15(0x2df)]=_0xfc0d15(0x176));for(const [_0x48fa48,_0x492a0b]of Object[_0xfc0d15(0x2bb)](_0x508a80)){if(_0x48fa48==_0xfc0d15(0x1a2)&&_0x492a0b==_0xfc0d15(0x201)){_0x508a80['telegramToken']=settings['telegramToken'];continue;};if(_0x48fa48=='bbPassword'&&_0x492a0b==_0xfc0d15(0x201)){_0x508a80[_0xfc0d15(0x1a1)]=settings[_0xfc0d15(0x1a1)];continue;};if(_0x48fa48=='marketcapApi'&&_0x492a0b==_0xfc0d15(0x201)){_0x508a80['marketcapApi']=settings[_0xfc0d15(0x2eb)];continue;};dbSettings[_0xfc0d15(0x21b)](_0xfc0d15(0x29a)+_0x48fa48,_0x492a0b)[_0xfc0d15(0x14a)]();}settings=_0x508a80,io['to'](_0xfc0d15(0x173))['emit']('settings',cleanSettings()),broadcastToBots(_0xfc0d15(0x270),settings[_0xfc0d15(0x270)]),broadcastToBots(_0xfc0d15(0x22f),settings[_0xfc0d15(0x22f)]),broadcastToBots(_0xfc0d15(0x2eb),settings[_0xfc0d15(0x2eb)]);if(_0x483c5f&&!_0x4bab74)initTelegram();if(_0x483c5f&&_0x4bab74)disableTelegram();getAllClients()[_0xfc0d15(0x1e6)](_0x5eb445=>{const _0x20ef32=_0xfc0d15;getSocket(_0x5eb445['id'])[_0x20ef32(0x301)](_0x20ef32(0x1ac),{'access':{'allow':![],'reason':_0x20ef32(0x22a),'token':null}});}),_0x4b25c2&&(await sleep(0xbb8),testMarketcapApi(_0x508a80[_0xfc0d15(0x2eb)]));}async function testMarketcapApi(_0x53f807){const _0x1709df=_0x1b412f,_0x11bf42=['BCT',_0x1709df(0x2d5)];try{await axios[_0x1709df(0x171)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x53f807},'params':{'symbol':_0x11bf42[_0x1709df(0x1dd)]()}});}catch(_0x42baab){_0x42baab[_0x1709df(0x1dd)]()[_0x1709df(0x150)](_0x1709df(0x21f))?(io['to'](_0x1709df(0x173))['emit'](_0x1709df(0x1cf),_0x1709df(0x13a)),logger[_0x1709df(0x127)](_0x1709df(0x13a))):(io['to']('botmanager')[_0x1709df(0x301)]('notification',_0x1709df(0x1ed)),logger['full'](_0x1709df(0x1ed)),logger[_0x1709df(0x199)](_0x1709df(0x24f),_0x42baab[_0x1709df(0x1dd)]()+_0x1709df(0x2a1)+_0x42baab[_0x1709df(0x1ee)]));return;}logger[_0x1709df(0x199)](_0x1709df(0x12f));}function updateSetting(_0x3780d9,_0x4250ab){const _0x469ab3=_0x1b412f;dbSettings[_0x469ab3(0x21b)](_0x469ab3(0x29a)+_0x3780d9,_0x4250ab)[_0x469ab3(0x14a)](),settings=getSettings(),io['to'](_0x469ab3(0x173))['emit'](_0x469ab3(0x163),cleanSettings());}function storeSecure(_0x540df9){const _0x32a420=_0x1b412f;dbSecure[_0x32a420(0x171)](_0x32a420(0x230))[_0x32a420(0x306)](_0x540df9)['write'](),secure=_0x540df9;}function addBlacklist(_0x179e29){const _0x15d0c2=_0x1b412f;cleanBlacklist();let _0x5bb5dc;devices[_0x179e29][_0x15d0c2(0x26e)]?_0x5bb5dc=Math['max'](devices[_0x179e29][_0x15d0c2(0x26e)]['expiry'],loginExpiry):_0x5bb5dc=loginExpiry,dbSecure[_0x15d0c2(0x171)](_0x15d0c2(0x181))[_0x15d0c2(0x306)]({'expiry':new Date()[_0x15d0c2(0x248)]()+_0x5bb5dc*0x3c*0x3e8,'token':devices[_0x179e29][_0x15d0c2(0x121)][_0x15d0c2(0x1f0)]})[_0x15d0c2(0x14a)](),blacklist=dbSecure[_0x15d0c2(0x171)](_0x15d0c2(0x181))[_0x15d0c2(0x315)]();}function cleanBlacklist(){const _0x21f437=_0x1b412f;let _0x13b1b2=dbSecure[_0x21f437(0x171)](_0x21f437(0x181))[_0x21f437(0x232)]()['value'](),_0x1888ca=new Date()['getTime']();_0x13b1b2[_0x21f437(0x1e6)](_0x5690f4=>{const _0x1ebd4c=_0x21f437;_0x5690f4[_0x1ebd4c(0x142)]<_0x1888ca&&dbSecure['get']('blacklist')[_0x1ebd4c(0x27b)]({'expiry':_0x5690f4[_0x1ebd4c(0x142)]})['write']();});}function initStates(){const _0x18bc9e=_0x1b412f;let _0x319f5a=getConfiguration();_0x319f5a[_0x18bc9e(0x1e6)](_0x2704c9=>{const _0x1483a0=_0x18bc9e;_0x2704c9[_0x1483a0(0x1b7)]=_0x1483a0(0x136);}),storeConfiguration(_0x319f5a);}function onKeys(){const _0x445f09=new RSA();return new Promise(_0x5ce41a=>{const _0x2d6e69=_0x3baf;_0x445f09[_0x2d6e69(0x31e)]()[_0x2d6e69(0x1aa)](_0x19faa4=>{_0x5ce41a(_0x19faa4);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x221763=_0x1b412f;let _0x3f69c0=getSettings(),_0x57c8ba=![];!_0x3f69c0[_0x221763(0x1e0)](_0x221763(0x229))&&(_0x3f69c0['lastmsgtelegram']=0x0,_0x57c8ba=!![]);!_0x3f69c0['hasOwnProperty']('lastmsgemitted')&&(_0x3f69c0[_0x221763(0x30e)]=0x0,_0x57c8ba=!![]);!_0x3f69c0[_0x221763(0x1e0)](_0x221763(0x296))&&(_0x3f69c0['latestversion']=_0x221763(0x325),_0x57c8ba=!![]);!_0x3f69c0[_0x221763(0x1e0)](_0x221763(0x22f))&&(_0x3f69c0['onepagemode']=![],_0x57c8ba=!![]);!_0x3f69c0['hasOwnProperty'](_0x221763(0x2eb))&&(_0x3f69c0['marketcapApi']='',_0x57c8ba=!![]);if(_0x57c8ba)storeSettings(_0x3f69c0);try{fs[_0x221763(0x26f)](configbackuppath,{'withFileTypes':!![]})[_0x221763(0x1e6)](_0x3e78d9=>{const _0x267408=_0x221763;if(!_0x3e78d9[_0x267408(0x29e)]()){if(!_0x3e78d9[_0x267408(0x132)][_0x267408(0x2f1)]('backup-full@'))fs[_0x267408(0x17b)](configbackuppath+_0x3e78d9[_0x267408(0x132)]);}else fs[_0x267408(0x222)](configbackuppath+_0x3e78d9['name'],{'recursive':!![]});});}catch(_0x3b42e5){logger[_0x221763(0x199)](_0x221763(0x29f),_0x3b42e5);}}function storeConfiguration(_0x1e5afe){const _0x207914=_0x1b412f;dbConfig['get'](_0x207914(0x1c7))['remove']()[_0x207914(0x14a)](),dbConfig[_0x207914(0x171)](_0x207914(0x1c7))[_0x207914(0x306)](..._0x1e5afe)[_0x207914(0x14a)](),config=_0x1e5afe;}async function resetPassword(){const _0x15ab69=_0x1b412f;if(tgBot&&settings['telegramChatId']){const _0x4347fb=Markup[_0x15ab69(0x30f)]([Markup[_0x15ab69(0x135)][_0x15ab69(0x14d)](_0x15ab69(0x20d),_0x15ab69(0x17e)),Markup[_0x15ab69(0x135)][_0x15ab69(0x14d)]('no','resetpw_no')]);await sendTelegram(settings[_0x15ab69(0x124)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x4347fb),tgBot[_0x15ab69(0x1b6)](/resetpw_(.+)/,async _0x230c36=>{const _0x2a683f=_0x15ab69,_0x17ca08=_0x230c36[_0x2a683f(0x208)][0x1];_0x230c36['editMessageReplyMarkup']();if(_0x17ca08!='no'){const _0x7e16e=0xf,_0x4bce3e='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x36621c=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x7e16e)))[_0x2a683f(0x2a4)](_0x308fd6=>_0x4bce3e[_0x308fd6%_0x4bce3e[_0x2a683f(0x27c)]])[_0x2a683f(0x130)](''),_0x17e53e=bcrypt['hashSync'](_0x36621c,saltRounds);storeSettings({'bbPassword':_0x17e53e}),await sendTelegram(_0x230c36[_0x2a683f(0x122)]['id'],_0x2a683f(0x158)+_0x36621c,{'parse_mode':_0x2a683f(0x2b8)});}else await sendTelegram(_0x230c36['chat']['id'],_0x2a683f(0x2fa));});}}async function confirmRestore(_0x5c1ed4,_0x23ed68){const _0x5ec1e6=_0x1b412f;io['to'](_0x5ec1e6(0x173))[_0x5ec1e6(0x301)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x5ec1e6(0x152));if(tgBot&&settings[_0x5ec1e6(0x124)]){const _0x503c0f=uuidRandom();tmpStorage[_0x503c0f]={'path':_0x5c1ed4,'filename':_0x23ed68};const _0x971b69=Markup[_0x5ec1e6(0x30f)]([Markup[_0x5ec1e6(0x135)][_0x5ec1e6(0x14d)](_0x5ec1e6(0x20d),_0x5ec1e6(0x1fa)+_0x503c0f),Markup[_0x5ec1e6(0x135)]['callback']('no','restore_no_'+_0x503c0f)]);await sendTelegram(settings[_0x5ec1e6(0x124)],_0x5ec1e6(0x333),_0x971b69),tgBot[_0x5ec1e6(0x1b6)](/restore_(.+)_(.+)/,async _0x37ce3e=>{const _0x295a63=_0x5ec1e6,_0x4da619=_0x37ce3e[_0x295a63(0x208)][0x1],_0x55fd13=_0x37ce3e['match'][0x2],{path:_0xe5a09c,filename:_0x1d8a88}=tmpStorage[_0x55fd13];delete tmpStorage[_0x55fd13],_0x37ce3e[_0x295a63(0x27a)](),_0x4da619==_0x295a63(0x20d)?(logger[_0x295a63(0x199)](_0x295a63(0x281)),await sendTelegram(_0x37ce3e[_0x295a63(0x122)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'}),unzipFile(_0xe5a09c,_0x1d8a88)):(logger['debug']('Restore\x20process\x20aborted'),await sendTelegram(_0x37ce3e[_0x295a63(0x122)]['id'],_0x295a63(0x1c2)));});}}function getServerTime(){const _0x54e48c=_0x1b412f,_0x36b5b0=new Date();return _0x36b5b0['getFullYear']()+'/'+(_0x36b5b0['getMonth']()+0x1)[_0x54e48c(0x1dd)]()[_0x54e48c(0x26a)](0x2,'0')+'/'+_0x36b5b0[_0x54e48c(0x2cd)]()[_0x54e48c(0x1dd)]()[_0x54e48c(0x26a)](0x2,'0')+'\x20'+_0x36b5b0['getHours']()['toString']()[_0x54e48c(0x26a)](0x2,'0')+':'+_0x36b5b0[_0x54e48c(0x30c)]()[_0x54e48c(0x1dd)]()[_0x54e48c(0x26a)](0x2,'0')+':'+_0x36b5b0[_0x54e48c(0x1b2)]()[_0x54e48c(0x1dd)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2fa723=_0x1b412f,_0xf78a0c=shiftedTime();return _0xf78a0c[_0x2fa723(0x200)]()+'/'+(_0xf78a0c[_0x2fa723(0x1f2)]()+0x1)[_0x2fa723(0x1dd)]()[_0x2fa723(0x26a)](0x2,'0')+'/'+_0xf78a0c[_0x2fa723(0x2cd)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xf78a0c[_0x2fa723(0x25e)]()[_0x2fa723(0x1dd)]()[_0x2fa723(0x26a)](0x2,'0')+':'+_0xf78a0c[_0x2fa723(0x30c)]()[_0x2fa723(0x1dd)]()[_0x2fa723(0x26a)](0x2,'0')+':'+_0xf78a0c[_0x2fa723(0x1b2)]()['toString']()[_0x2fa723(0x26a)](0x2,'0');}function getCleanTimeStamp(){const _0x2b197f=_0x1b412f,_0xb201d4=shiftedTime();return _0xb201d4[_0x2b197f(0x200)]()+(_0xb201d4[_0x2b197f(0x1f2)]()+0x1)[_0x2b197f(0x1dd)]()['padStart'](0x2,'0')+_0xb201d4[_0x2b197f(0x2cd)]()[_0x2b197f(0x1dd)]()[_0x2b197f(0x26a)](0x2,'0')+'-'+_0xb201d4['getHours']()[_0x2b197f(0x1dd)]()[_0x2b197f(0x26a)](0x2,'0')+_0xb201d4['getMinutes']()[_0x2b197f(0x1dd)]()[_0x2b197f(0x26a)](0x2,'0')+_0xb201d4['getSeconds']()[_0x2b197f(0x1dd)]()[_0x2b197f(0x26a)](0x2,'0');}function shiftedTime(){const _0x348856=_0x1b412f,_0x4ddccc=new Date();let _0x25fa12=_0x4ddccc;if(settings[_0x348856(0x270)]&&settings[_0x348856(0x270)]!==0x0)_0x25fa12=fns[_0x348856(0x12b)](_0x4ddccc,{'hours':settings[_0x348856(0x270)]});return _0x25fa12;}async function startScheduler(){const _0x3b4044=_0x1b412f,_0x35bec9=new Date()[_0x3b4044(0x1f7)](),_0x4ee093=shiftedTime()['getHours']();_0x4ee093==0x4&&backupConfigFiles(),_0x4ee093==0x0&&rotateLogFiles(),_0x35bec9%0x6==0x0&&triggerAnalytics(),_0x35bec9%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x49d8c2){const _0x1812b7=_0x1b412f;logger[_0x1812b7(0x199)]('Restore\x20backup\x20file\x20'+_0x49d8c2);const _0x5abf3d=getBotsWithMode();_0x5abf3d['length']>0x0?confirmRestore(configbackuppath,_0x49d8c2):unzipFile(configbackuppath,_0x49d8c2);}async function getBackupFiles(_0x1d37de=null){const _0x43c0ea=_0x1b412f;let _0x26362b=[],_0x36f7b1=fs[_0x43c0ea(0x26f)](configbackuppath,{'withFileTypes':!![]});_0x36f7b1[_0x43c0ea(0x1d4)]((_0x330e67,_0x349f1b)=>_0x330e67[_0x43c0ea(0x132)]<_0x349f1b[_0x43c0ea(0x132)]?0x1:_0x349f1b['name']<_0x330e67[_0x43c0ea(0x132)]?-0x1:0x0),_0x36f7b1[_0x43c0ea(0x1e6)](_0x3ae6e3=>{const _0x5d4e25=_0x43c0ea;if(!_0x3ae6e3['isDirectory']()&&_0x3ae6e3[_0x5d4e25(0x132)]['startsWith'](_0x5d4e25(0x2d1))&&_0x3ae6e3[_0x5d4e25(0x132)][_0x5d4e25(0x2a5)]('.zip')){const _0x4a628f=formatDate(fs[_0x5d4e25(0x24e)](configbackuppath+_0x3ae6e3['name'])['mtime']);_0x26362b['push']({'name':_0x3ae6e3[_0x5d4e25(0x132)],'mtime':_0x4a628f});}});if(_0x1d37de)io['to'](_0x1d37de)['emit'](_0x43c0ea(0x145),_0x26362b);else return _0x26362b;}async function backupConfigFiles(){const _0xb56357=_0x1b412f;await zipFiles(_0xb56357(0x298));const _0x4bd9b3=getCleanTimeStamp();fs['copyFileSync'](zippath+_0xb56357(0x2ca),configbackuppath+('backup-full@'+_0x4bd9b3+_0xb56357(0x2e0)));let _0x252c7e=fs[_0xb56357(0x26f)](configbackuppath,{'withFileTypes':!![]});_0x252c7e[_0xb56357(0x1d4)]((_0xf7c305,_0x3daeb2)=>_0xf7c305[_0xb56357(0x132)]<_0x3daeb2[_0xb56357(0x132)]?0x1:_0x3daeb2['name']<_0xf7c305['name']?-0x1:0x0),_0x252c7e[_0xb56357(0x27c)]>maxBackups&&fs[_0xb56357(0x17b)](configbackuppath+_0x252c7e[_0x252c7e['length']-0x1][_0xb56357(0x132)]);}function rotateLogFiles(){const _0x22e638=_0x1b412f,_0x19b4bc=fs['statSync'](logspath+_0x22e638(0x2f4)),_0x160338=_0x19b4bc['size']/0x400;if(_0x160338>0x64){let _0x54177f=fs[_0x22e638(0x26f)](logspath,{'withFileTypes':!![]});_0x54177f['sort']((_0x3b6d09,_0xc83d17)=>_0x3b6d09[_0x22e638(0x132)]<_0xc83d17[_0x22e638(0x132)]?0x1:_0xc83d17[_0x22e638(0x132)]<_0x3b6d09['name']?-0x1:0x0),_0x54177f['forEach'](_0x331c97=>{const _0x2a0bc9=_0x22e638;if(_0x331c97['name']==_0x2a0bc9(0x2e6))fs[_0x2a0bc9(0x223)](logspath+_0x331c97['name'],logspath+_0x2a0bc9(0x1d3));if(_0x331c97[_0x2a0bc9(0x132)]==_0x2a0bc9(0x291))fs['copyFileSync'](logspath+_0x331c97[_0x2a0bc9(0x132)],logspath+'output-002.log');_0x331c97['name']==_0x2a0bc9(0x2f4)&&(fs['copyFileSync'](logspath+_0x331c97[_0x2a0bc9(0x132)],logspath+_0x2a0bc9(0x291)),fs[_0x2a0bc9(0x30d)](logspath+_0x331c97[_0x2a0bc9(0x132)],''));});}}async function zipFiles(_0x11b277){const _0x3817c6=_0x1b412f;let _0x53f575;if(_0x11b277=='logs')_0x53f575=logspath;if(_0x11b277==_0x3817c6(0x2ba))_0x53f575=configpath;if(_0x11b277=='backup-full')_0x53f575=configpath;let _0x58cef5=fs[_0x3817c6(0x26f)](_0x53f575,{'withFileTypes':!![]});const _0x10bed4=new require('node-zip')();_0x58cef5['forEach'](_0x470433=>{const _0x5a02d6=_0x3817c6;if(!_0x470433[_0x5a02d6(0x29e)]()){let _0x4fd9ed=fs[_0x5a02d6(0x303)](_0x53f575+_0x470433['name']);if(_0x11b277==_0x5a02d6(0x2ba)){const _0x4fa4f1=/^bot-[0-9]{3}-config.json$/,_0x547770=_0x4fa4f1['test'](_0x470433['name']);if(_0x547770){const _0x537aa8=JSON[_0x5a02d6(0x2d4)](_0x4fd9ed);if(_0x537aa8[_0x5a02d6(0x2b4)][0x0]){_0x537aa8[_0x5a02d6(0x2b4)][0x0][_0x5a02d6(0x234)]=_0x5a02d6(0x1c0),_0x537aa8[_0x5a02d6(0x2b4)][0x0][_0x5a02d6(0x1bd)]=_0x5a02d6(0x1c0);if(_0x537aa8[_0x5a02d6(0x2b4)][0x0]['apiPassword'])_0x537aa8[_0x5a02d6(0x2b4)][0x0][_0x5a02d6(0x165)]=_0x5a02d6(0x1c0);}_0x4fd9ed=JSON[_0x5a02d6(0x2e3)](_0x537aa8,null,0x2);}if(_0x470433[_0x5a02d6(0x132)]==_0x5a02d6(0x215)){const _0x41d1ce=JSON[_0x5a02d6(0x2d4)](_0x4fd9ed);if(_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x23a)])_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x23a)]=![];if(_0x41d1ce[_0x5a02d6(0x163)]['bbPassword'])_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x1a1)]=_0x5a02d6(0x1c0);if(_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x1a2)])_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x1a2)]=_0x5a02d6(0x1c0);if(_0x41d1ce['settings'][_0x5a02d6(0x124)])_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x124)]=null;if(_0x41d1ce[_0x5a02d6(0x163)]['marketcapApi'])_0x41d1ce[_0x5a02d6(0x163)][_0x5a02d6(0x2eb)]=_0x5a02d6(0x1c0);_0x4fd9ed=JSON['stringify'](_0x41d1ce,null,0x2);}if(_0x470433['name']!=_0x5a02d6(0x24a))_0x10bed4[_0x5a02d6(0x289)](_0x470433[_0x5a02d6(0x132)],_0x4fd9ed);}else _0x10bed4[_0x5a02d6(0x289)](_0x470433[_0x5a02d6(0x132)],_0x4fd9ed);}});const _0x386d2b=_0x10bed4[_0x3817c6(0x2ec)]({'base64':![],'compression':'DEFLATE'});fs[_0x3817c6(0x30d)](zippath+(_0x11b277+'.zip'),_0x386d2b,_0x3817c6(0x212));}async function unzipFile(_0x3a68b4,_0x5f47e4){const _0x55bae2=_0x1b412f;fs[_0x55bae2(0x26f)](configpath,{'withFileTypes':!![]})['forEach'](_0x1d2e1c=>{const _0x3ce4ee=_0x55bae2;if(!_0x1d2e1c[_0x3ce4ee(0x29e)]())fs[_0x3ce4ee(0x222)](configpath+_0x1d2e1c[_0x3ce4ee(0x132)]);});const _0x4584fb=fs[_0x55bae2(0x303)](_0x3a68b4+_0x5f47e4,_0x55bae2(0x212)),_0x1f3a3d=new require(_0x55bae2(0x120))(_0x4584fb,{'base64':![],'checkCRC32':!![]});Object[_0x55bae2(0x2be)](_0x1f3a3d[_0x55bae2(0x2e1)])[_0x55bae2(0x1e6)](_0x8e9685=>{const _0x20f130=_0x55bae2,_0xbcfad9=_0x1f3a3d['files'][_0x8e9685];fs['writeFileSync'](configpath+_0xbcfad9[_0x20f130(0x132)],_0xbcfad9['_data']);}),fs[_0x55bae2(0x26f)](temppath,{'withFileTypes':!![]})[_0x55bae2(0x1e6)](_0x264934=>{const _0x49dd4b=_0x55bae2;if(!_0x264934[_0x49dd4b(0x29e)]())fs[_0x49dd4b(0x222)](temppath+_0x264934[_0x49dd4b(0x132)]);}),logger['debug'](_0x55bae2(0x221)),process[_0x55bae2(0x2ef)]({'restore':!![]},_0x4b8a0f=>{});}async function getPublicIp(){const _0x683939=_0x1b412f;try{const _0x32d608=await axios[_0x683939(0x171)](_0x683939(0x267));publicip=_0x32d608[_0x683939(0x2f8)]['ip'];}catch(_0x7c6c7a){}}async function triggerAnalytics(){const _0x5b7ef=_0x1b412f;if(!publicip)await getPublicIp();const _0x13c26b=getBotsWithMode();let _0x167e1c=0x0;_0x13c26b[_0x5b7ef(0x1e6)](_0x1d9f65=>{const _0x48e2ec=_0x5b7ef;if(_0x1d9f65['status']===_0x48e2ec(0x226))_0x167e1c++;});const _0x3f432c=getBotExchanges();mixpanel[_0x5b7ef(0x184)](_0x5b7ef(0x2b1),{'distinct_id':settings[_0x5b7ef(0x282)],'ip':publicip,'version':serverversion,'numbots':_0x13c26b[_0x5b7ef(0x27c)],'numbotsenabled':_0x167e1c,'exchanges':_0x3f432c,'environment':environment});}async function getMessages(){const _0x32f142=_0x1b412f,_0x417203=_0x32f142(0x278),_0x31c360=new GraphQLClient(_0x417203),_0xaf8edc={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0xa376c9=serverversion[_0x32f142(0x26b)]('.'),_0x531031=_0xa376c9[0x0]+'.'+_0xa376c9[0x1],_0x3b6e0c=Math['min'](settings[_0x32f142(0x229)],settings[_0x32f142(0x30e)]),_0x169c25={'last':parseInt(_0x3b6e0c),'bbm':_0x531031},_0x671187=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5a3f91;try{_0x5a3f91=await _0x31c360[_0x32f142(0x13d)](_0x671187,_0x169c25,_0xaf8edc);}catch(_0x22d932){}if(_0x5a3f91&&_0x5a3f91[_0x32f142(0x32f)]){let _0x55a680=settings[_0x32f142(0x229)];newMessages=[];for(const _0x130f71 of _0x5a3f91[_0x32f142(0x32f)]){newMessages[_0x32f142(0x306)](_0x130f71);let _0x560c2e=![];_0x130f71[_0x32f142(0x17f)]&&(updateSetting(_0x32f142(0x296),_0x130f71[_0x32f142(0x17f)]),_0x560c2e=isNewerVersion(serverversion,_0x130f71['bbvNew'])||serverversion==_0x130f71[_0x32f142(0x17f)]);if(!_0x560c2e&&_0x130f71[_0x32f142(0x1f4)]>_0x55a680){if(_0x130f71['bbvReceive']==='any'||serverversion[_0x32f142(0x2f1)](_0x130f71[_0x32f142(0x1e3)])){let _0x10805c=''+_0x130f71['title']+'\x0a\x0a'+_0x130f71[_0x32f142(0x294)];const _0x3f1965=await sendTelegramMsg(toTelegramMarkdown(_0x10805c),_0x32f142(0x193));if(_0x3f1965)_0x55a680=_0x130f71[_0x32f142(0x1f4)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x32f142(0x229),_0x55a680),emitMessages();}}function emitMessages(){const _0xa114a0=_0x1b412f,_0xd7019f=settings[_0xa114a0(0x30e)];let _0x316bee=[];newMessages['forEach'](_0x3f6113=>{const _0x19197d=_0xa114a0;_0x3f6113[_0x19197d(0x1f4)]>_0xd7019f&&_0x316bee[_0x19197d(0x306)](_0x3f6113);}),_0x316bee[_0xa114a0(0x27c)]>0x0&&getAllClients()[_0xa114a0(0x1e6)](_0x149fac=>{const _0x366033=_0xa114a0;getSocket(_0x149fac['id'])[_0x366033(0x301)](_0x366033(0x294),_0x316bee);});}function confirmMessage(_0x5eadd8){const _0x115c0a=_0x1b412f;updateSetting(_0x115c0a(0x30e),Number(_0x5eadd8));}function isNewerVersion(_0x49af0d,_0x4d8ff2){const _0x22a442=_0x1b412f,_0x18b9f1=_0x4d8ff2[_0x22a442(0x26b)]('.'),_0x506bee=_0x49af0d[_0x22a442(0x26b)]('.');for(var _0xcb8082=0x0;_0xcb8082<_0x506bee[_0x22a442(0x27c)];_0xcb8082++){const _0x3b836c=~~_0x506bee[_0xcb8082],_0x57a91c=~~_0x18b9f1[_0xcb8082];if(_0x3b836c>_0x57a91c)return!![];if(_0x3b836c<_0x57a91c)return![];}return![];}function toTelegramMarkdown(_0x5c58d6){const _0x53a179=_0x1b412f,_0x486df3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3635f5=/\*{2}(.+?)\*{2}/gim;return _0x5c58d6=_0x5c58d6['replace'](_0x486df3,_0x53a179(0x252))[_0x53a179(0x2f9)](_0x3635f5,'*$1*'),_0x5c58d6;}async function validateConfigFile(){const _0x28ac0f=_0x1b412f,_0x2b1ed5=dbConfig[_0x28ac0f(0x171)](_0x28ac0f(0x1c7))[_0x28ac0f(0x1fe)](_0x28ac0f(0x2ff))['value']()||[];if(_0x2b1ed5[_0x28ac0f(0x27c)]==0x0){let _0x45d0af=0x0,_0x9fde6e=[];const _0x1adc14=/^bot-([0-9]{3})-config.json$/,_0x29adc8=fs['readdirSync'](configpath);_0x29adc8[_0x28ac0f(0x1e6)](_0xfb15be=>{const _0x32f9f9=_0x28ac0f,_0x7321f6=_0x1adc14[_0x32f9f9(0x2ee)](_0xfb15be);if(_0x7321f6){const _0x49491e=_0x7321f6[0x1];let _0x4bf24b=getBotAttributes(_0x49491e);_0x9fde6e['push']({'botID':_0x49491e,'botname':_0x4bf24b[_0x32f9f9(0x2ae)],'status':_0x32f9f9(0x126),'live':_0x32f9f9(0x136)}),_0x45d0af++;}}),_0x45d0af!=0x0&&(dbConfig['get'](_0x28ac0f(0x1c7))[_0x28ac0f(0x1c4)](_0x9fde6e)[_0x28ac0f(0x14a)](),config=_0x9fde6e,restoredConfigFile=_0x45d0af);}}async function restoreConfigNotify(_0x588ca3){const _0x40224e=_0x1b412f;let _0x300f20;if(restoredConfigFile==0x1)_0x300f20=_0x40224e(0x258);else _0x300f20=_0x40224e(0x19c);if(_0x588ca3)io['to'](_0x40224e(0x173))[_0x40224e(0x301)](_0x40224e(0x1cf),_0x300f20);else{logger['simple'](_0x40224e(0x1a7)),logger[_0x40224e(0x14c)](_0x300f20),logger[_0x40224e(0x14c)](_0x40224e(0x1a7)),logger[_0x40224e(0x14c)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x40224e(0x2df)]!='orders')await sendTelegram(settings[_0x40224e(0x124)],_0x40224e(0x1a6)+_0x300f20);}}function validateCredentials(_0x30551d,_0x26d2b0){const _0x52ab77=_0x1b412f;if(_0x30551d['username']==settings['bbUsername']&&bcrypt[_0x52ab77(0x280)](_0x30551d[_0x52ab77(0x2ad)],settings['bbPassword'])){if(settings[_0x52ab77(0x216)])return{'allow':![],'reason':_0x52ab77(0x1ff),'token':null};else{const _0x1d71b1=generateLoginToken(_0x26d2b0);return{'allow':!![],'reason':_0x52ab77(0x2a8),'token':_0x1d71b1};}}else return{'allow':![],'reason':_0x52ab77(0x30b),'token':null};}function refreshToken(_0x3e1e2a){const _0x17e87e=_0x1b412f,_0x1f96f5=generateLoginToken(_0x3e1e2a);return{'allow':!![],'reason':_0x17e87e(0x2a8),'token':_0x1f96f5};}function validateAccess(_0x596cb0,_0x544e40,_0x5d6123){const _0x5c5a41=_0x1b412f,_0x10a162=_0x5d6123?_0x5d6123:devices[_0x544e40]['ip'];let _0x5d5c5c;const _0x1a955b=_0x154f9e=>{const _0x3c1a1a=_0x3baf;if(settings[_0x3c1a1a(0x23a)]){if(settings[_0x3c1a1a(0x216)]){if(telegram2FaApproved(_0x544e40)){const _0x12d40f=generateLoginToken(_0x544e40);return{'allow':!![],'reason':_0x3c1a1a(0x269),'token':_0x12d40f};}else return{'allow':![],'reason':_0x3c1a1a(0x190),'token':null};}else return _0x5d5c5c=validToken(_0x154f9e,_0x544e40),_0x5d5c5c[_0x3c1a1a(0x1e0)](_0x3c1a1a(0x152))?{'allow':!![],'reason':_0x3c1a1a(0x268),'token':_0x154f9e}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x5c5a41(0x21d)]){let _0x483129=[...settings[_0x5c5a41(0x192)],_0x5c5a41(0x1ae),_0x5c5a41(0x19d),_0x5c5a41(0x12a)];if(_0x483129['includes'](_0x10a162))return _0x1a955b(_0x596cb0);else{_0x5d5c5c=validToken(_0x596cb0,_0x544e40);if(_0x5d5c5c['hasOwnProperty']('success'))return _0x1a955b(_0x596cb0);else{if(telegramIpApproved(_0x544e40)){const _0x1bea12=generateToken(_0x544e40);return _0x5d5c5c=_0x1a955b(_0x596cb0),_0x5d5c5c[_0x5c5a41(0x18a)]?{'allow':!![],'reason':_0x5c5a41(0x245),'token':_0x1bea12}:_0x5d5c5c;}else return settings[_0x5c5a41(0x320)]?{'allow':![],'reason':_0x5c5a41(0x15c),'token':null}:{'allow':![],'reason':_0x5c5a41(0x23b),'token':null};}}}else return _0x1a955b(_0x596cb0);}function timelyDecrypt(_0x5e2fee,_0x384693,_0x5474bd='@'){const _0x431e00=_0x1b412f;if(_0x5e2fee)try{const _0x4b64b2=crypt[_0x431e00(0x2d0)](secure['privateKey'],_0x5e2fee)[_0x431e00(0x294)],_0x20e5e8=_0x4b64b2[_0x431e00(0x26b)](_0x5474bd)[0x0],_0x25fdbc=_0x4b64b2[_0x431e00(0x26b)](_0x5474bd)[0x1],_0x2873c7=new Date()[_0x431e00(0x248)]();if(_0x384693){if(_0x2873c7-_0x25fdbc<maxSecretAge*0x3e8)return _0x20e5e8;else return![];}else return _0x20e5e8;}catch(_0x451f36){return![];}else return![];}const validToken=(_0x9e44ea,_0x5ae2a2)=>{const _0x341508=_0x1b412f,_0x29a425=devices[_0x5ae2a2]['ip'];if(!_0x9e44ea)return{'error':'No\x20authentication\x20token'};for(let _0x2a0422 of blacklist){if(_0x2a0422[_0x341508(0x1f0)]==_0x9e44ea)return{'error':_0x341508(0x2f5)};}let _0x5c70b9;try{_0x5c70b9=jwt[_0x341508(0x1e8)](_0x9e44ea,secure[_0x341508(0x154)]+_0x5ae2a2);}catch{return{'error':_0x341508(0x1f9)};}if(!_0x5c70b9[_0x341508(0x1e0)](_0x341508(0x20c))&&!_0x5c70b9[_0x341508(0x1e0)](_0x341508(0x129))||!_0x5c70b9[_0x341508(0x1e0)]('exp'))return{'error':_0x341508(0x1e5)};if(!_0x5c70b9[_0x341508(0x1e0)](_0x341508(0x129))&&_0x5c70b9[_0x341508(0x1e0)]('clientip')){const {clientip:_0x285ddb}=_0x5c70b9;return _0x29a425==_0x285ddb?{'success':_0x341508(0x2b9)}:{'error':_0x341508(0x203)};}else{if(_0x5c70b9[_0x341508(0x1e0)](_0x341508(0x129))&&_0x5c70b9['hasOwnProperty']('clientip')){const {username:_0x1fba0e,clientip:_0x12f50b}=_0x5c70b9;return settings['bbUsername']==_0x1fba0e&&_0x29a425==_0x12f50b?{'success':_0x341508(0x2b9)}:{'error':_0x341508(0x251)};}}},generateLoginToken=_0x436a66=>{const _0x8d65e=_0x1b412f;if(_0x436a66){const _0x495f4b=devices[_0x436a66]['ip'];return jwt[_0x8d65e(0x255)]({'username':settings[_0x8d65e(0x2d8)],'clientip':_0x495f4b},secure[_0x8d65e(0x154)]+_0x436a66,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3887a4=>{const _0x2aa570=_0x1b412f;if(_0x3887a4){const _0x5f49f0=devices[_0x3887a4]['ip'];return jwt[_0x2aa570(0x255)]({'clientip':_0x5f49f0},secure['secret']+_0x3887a4,{'expiresIn':devices[_0x3887a4][_0x2aa570(0x26e)][_0x2aa570(0x142)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x97b8d6=>{const _0x3058ca=_0x1b412f;let _0x5ac615=![];return devices[_0x97b8d6]['telegramIpApproval']&&devices[_0x97b8d6]['telegramIpApproval'][_0x3058ca(0x142)]!=_0x3058ca(0x28c)&&(_0x5ac615=devices[_0x97b8d6][_0x3058ca(0x26e)][_0x3058ca(0x20c)]==devices[_0x97b8d6]['ip']&&new Date()[_0x3058ca(0x248)]()-devices[_0x97b8d6][_0x3058ca(0x26e)][_0x3058ca(0x31d)]<devices[_0x97b8d6][_0x3058ca(0x26e)][_0x3058ca(0x142)]*0x3c*0x3e8),_0x5ac615;},telegram2FaApproved=_0xa1dd17=>{const _0x261b38=_0x1b412f;let _0xcee6e7=![];return devices[_0xa1dd17][_0x261b38(0x1b0)]&&devices[_0xa1dd17][_0x261b38(0x1b0)][_0x261b38(0x142)]!=_0x261b38(0x28c)&&(_0xcee6e7=devices[_0xa1dd17][_0x261b38(0x1b0)][_0x261b38(0x20c)]==devices[_0xa1dd17]['ip']&&new Date()[_0x261b38(0x248)]()-devices[_0xa1dd17][_0x261b38(0x1b0)][_0x261b38(0x31d)]<devices[_0xa1dd17]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0xcee6e7;},normalizeIP=_0x30bc70=>{const _0x30ecc7=_0x1b412f;let _0x160471=null,_0x1a8f85=null;if(ipaddr['isValid'](_0x30bc70)){const _0x2c4f08=ipaddr[_0x30ecc7(0x2d4)](_0x30bc70);_0x2c4f08[_0x30ecc7(0x227)]()==='ipv6'?(_0x2c4f08['isIPv4MappedAddress']()&&(_0x160471=_0x2c4f08[_0x30ecc7(0x144)]()[_0x30ecc7(0x1dd)]()),_0x1a8f85=_0x2c4f08['toString']()):(_0x160471=_0x2c4f08[_0x30ecc7(0x1dd)](),_0x1a8f85=_0x2c4f08['toIPv4MappedAddress']()[_0x30ecc7(0x1dd)]());}return{'show':_0x160471?_0x160471:_0x1a8f85,'store':_0x1a8f85};};function formatDate(_0x2fc61a){const _0x3975bf=_0x1b412f;return _0x2fc61a['getFullYear']()+'/'+(_0x2fc61a[_0x3975bf(0x1f2)]()+0x1)['toString']()[_0x3975bf(0x26a)](0x2,'0')+'/'+_0x2fc61a[_0x3975bf(0x2cd)]()[_0x3975bf(0x1dd)]()[_0x3975bf(0x26a)](0x2,'0')+'\x20'+_0x2fc61a[_0x3975bf(0x25e)]()['toString']()[_0x3975bf(0x26a)](0x2,'0')+':'+_0x2fc61a['getMinutes']()[_0x3975bf(0x1dd)]()[_0x3975bf(0x26a)](0x2,'0')+':'+_0x2fc61a[_0x3975bf(0x1b2)]()[_0x3975bf(0x1dd)]()[_0x3975bf(0x26a)](0x2,'0');}function sleep(_0x451056){return new Promise(_0x45e8a2=>setTimeout(_0x45e8a2,_0x451056));}