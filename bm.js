const _0x1f3356=_0x1af5;(function(_0x380124,_0x53f7db){const _0x3a431b=_0x1af5,_0x23f237=_0x380124();while(!![]){try{const _0x129ec2=-parseInt(_0x3a431b(0x1c6))/0x1*(parseInt(_0x3a431b(0x188))/0x2)+-parseInt(_0x3a431b(0x21f))/0x3+parseInt(_0x3a431b(0x206))/0x4+parseInt(_0x3a431b(0x21a))/0x5+parseInt(_0x3a431b(0x212))/0x6*(-parseInt(_0x3a431b(0x10e))/0x7)+parseInt(_0x3a431b(0x179))/0x8*(-parseInt(_0x3a431b(0x1e3))/0x9)+parseInt(_0x3a431b(0x153))/0xa;if(_0x129ec2===_0x53f7db)break;else _0x23f237['push'](_0x23f237['shift']());}catch(_0x1d4da1){_0x23f237['push'](_0x23f237['shift']());}}}(_0x26b1,0xea8d5));const _0x3c2738=function(){let _0x389cb2=!![];return function(_0x1e48e6,_0x154590){const _0x51f0a9=_0x389cb2?function(){if(_0x154590){const _0x3bc8fc=_0x154590['apply'](_0x1e48e6,arguments);return _0x154590=null,_0x3bc8fc;}}:function(){};return _0x389cb2=![],_0x51f0a9;};}(),_0x25eaa4=_0x3c2738(this,function(){const _0x31d4ce=_0x1af5;return _0x25eaa4[_0x31d4ce(0x1b1)]()[_0x31d4ce(0x21b)](_0x31d4ce(0x20a))[_0x31d4ce(0x1b1)]()[_0x31d4ce(0x18e)](_0x25eaa4)['search'](_0x31d4ce(0x20a));});_0x25eaa4();'use strict';process[_0x1f3356(0x16a)][_0x1f3356(0x229)]=0x1;const childProcess=require(_0x1f3356(0x22d)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1f3356(0x1a7)),low=require(_0x1f3356(0x1be)),path=require(_0x1f3356(0x127)),crypto=require(_0x1f3356(0x18b)),Crypt=require('hybrid-crypto-js')[_0x1f3356(0x202)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x1f3356(0x1d3)),jwt=require(_0x1f3356(0x121)),analyticsLib=require(_0x1f3356(0x1fd))[_0x1f3356(0x245)],googleAnalytics=require(_0x1f3356(0x1a0))[_0x1f3356(0x245)],ipaddr=require(_0x1f3356(0x1ad)),argv=require('yargs/yargs')(process[_0x1f3356(0x125)][_0x1f3356(0x1a1)](0x2))[_0x1f3356(0x125)],PORT=argv['port']||_0x1f3356(0x16d),pattern=/^[0-9]{2,4}$/;!pattern[_0x1f3356(0x1f5)](PORT)&&(console[_0x1f3356(0x220)](_0x1f3356(0x22e)+PORT+_0x1f3356(0x230)),process[_0x1f3356(0x231)](0x1));const HOST=argv[_0x1f3356(0x14f)]||null,userID=argv[_0x1f3356(0x239)]||'';let bbpath=_0x1f3356(0x1df),bbpath2='';const botfile=_0x1f3356(0x15d),configfile=_0x1f3356(0x196),settingsfile=_0x1f3356(0x100),securefile=_0x1f3356(0x19e);let validInstallation=!![];!fs[_0x1f3356(0x1cf)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1f3356(0x131)),configpath=userID?bbpath+_0x1f3356(0x180)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x1f3356(0x13e)](configpath);!fs[_0x1f3356(0x1cf)](configbackuppath)&&fs[_0x1f3356(0x13e)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1f3356(0x130)]({'settings':{'timeshift':0x0}})[_0x1f3356(0xf1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1f3356(0x130)]({'secure':{},'blacklist':[]})[_0x1f3356(0xf1)]();let crypt=new Crypt({'md':_0x1f3356(0x15a),'rsaStandard':_0x1f3356(0x142)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1f3356(0x162))[_0x1f3356(0x1f3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x1f3356(0x238)),app=express(),http=require(_0x1f3356(0x136))[_0x1f3356(0x181)](app);app[_0x1f3356(0x119)](express[_0x1f3356(0x23b)](path[_0x1f3356(0x12e)](__dirname,bbpath2,_0x1f3356(0xf8)))),app[_0x1f3356(0x119)](express[_0x1f3356(0x23b)](path['join'](__dirname,bbpath2,'build'))),app[_0x1f3356(0x1c3)]('/',function(_0x4b1772,_0x489b36){const _0x32178e=_0x1f3356;_0x489b36['sendFile'](path[_0x32178e(0x12e)](__dirname,bbpath2,_0x32178e(0xf8),_0x32178e(0x23f)));}),app['get']('/:bot',function(_0x177120,_0x388836){const _0x4eaa0f=_0x1f3356;_0x388836[_0x4eaa0f(0x152)](path[_0x4eaa0f(0x12e)](__dirname,bbpath2,_0x4eaa0f(0x17a),'index.html'));}),app[_0x1f3356(0x1c3)]('/:bot/portfolio',(_0x2060a2,_0x39f405)=>{const _0x5f2c78=_0x1f3356;_0x39f405[_0x5f2c78(0x152)](path[_0x5f2c78(0x12e)](__dirname,bbpath2,_0x5f2c78(0x17a),_0x5f2c78(0x23f)));}),app[_0x1f3356(0x1c3)](_0x1f3356(0x1ab),(_0xe46389,_0x1986e7)=>{const _0x582ba8=_0x1f3356;_0x1986e7[_0x582ba8(0x152)](path[_0x582ba8(0x12e)](__dirname,bbpath2,'build',_0x582ba8(0x23f)));}),app[_0x1f3356(0x1c3)]('/:bot/coins',(_0x3818c1,_0x2ee822)=>{const _0x4e7e82=_0x1f3356;_0x2ee822['sendFile'](path[_0x4e7e82(0x12e)](__dirname,bbpath2,_0x4e7e82(0x17a),_0x4e7e82(0x23f)));}),app['get'](_0x1f3356(0x10f),(_0x320906,_0x4c75ec)=>{const _0x35cff3=_0x1f3356;_0x4c75ec[_0x35cff3(0x152)](path['join'](__dirname,bbpath2,_0x35cff3(0x17a),_0x35cff3(0x23f)));}),app['get']('/:bot/configuration',(_0x23a420,_0x44115e)=>{const _0x29eade=_0x1f3356;_0x44115e[_0x29eade(0x152)](path[_0x29eade(0x12e)](__dirname,bbpath2,_0x29eade(0x17a),_0x29eade(0x23f)));}),app[_0x1f3356(0x1c3)](_0x1f3356(0x137),(_0x3e719f,_0x321c77)=>{const _0x3502de=_0x1f3356;_0x321c77[_0x3502de(0x152)](path[_0x3502de(0x12e)](__dirname,bbpath2,'build',_0x3502de(0x23f)));});if(HOST)http[_0x1f3356(0xf7)](PORT,HOST);else http[_0x1f3356(0xf7)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x1f3356(0x1f8),'plugins':[googleAnalytics({'trackingId':_0x1f3356(0x15e)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x1f3356(0x11f)]&&settings[_0x1f3356(0x11f)]!=''&&settings[_0x1f3356(0x16c)]&&settings[_0x1f3356(0x16c)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2e9314=_0x1f3356;console[_0x2e9314(0x220)](''),console['log'](_0x2e9314(0x173)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x2e9314(0x220)](_0x2e9314(0x173));if(config[_0x2e9314(0xf0)]!=0x0)config['forEach'](_0x44f30b=>{const _0x5a1a6a=_0x2e9314;if(_0x44f30b[_0x5a1a6a(0xff)]==_0x5a1a6a(0x185)||_0x44f30b['status']==_0x5a1a6a(0x124))logging('starting\x20bot\x20|\x20Bot\x20'+_0x44f30b[_0x5a1a6a(0x110)]+_0x5a1a6a(0x1ac)+_0x44f30b[_0x5a1a6a(0x12d)]),startBot([_0x44f30b[_0x5a1a6a(0x110)],userID],{'cwd':bbpath},function(_0x2db738){if(_0x2db738)logging(_0x2db738);});else(_0x44f30b[_0x5a1a6a(0xff)]=='disabled'||_0x44f30b['status']=='new-disabled')&&logging(_0x5a1a6a(0x12a)+_0x44f30b[_0x5a1a6a(0x110)]+_0x5a1a6a(0x1ac)+_0x44f30b[_0x5a1a6a(0x12d)]);});else!newBot&&console[_0x2e9314(0x220)](_0x2e9314(0x189));if(newBot)addBot();console[_0x2e9314(0x220)](_0x2e9314(0x173)),console['log']('');}function startSocket(){const _0x41afee=_0x1f3356;io['on'](_0x41afee(0x249),_0xa7691b=>{const _0x5a88fe=_0x41afee;let _0x258dc2,_0x34570b,_0x16ffd7,_0x5a17e5,_0xf28bd9;const _0x2c6f71=_0xa7691b[_0x5a88fe(0x159)][_0x5a88fe(0xf6)][_0x5a88fe(0x1ba)];_0x34570b=_0x2c6f71[_0x5a88fe(0x11b)](/bot[0-9]{3}/);if(_0x34570b)_0x16ffd7=_0x34570b[0x0]['match'](/[0-9]{3}/);if(_0x16ffd7)_0x258dc2=_0x16ffd7[0x0];else _0x258dc2='botmanager';const _0x2f9063=_0xa7691b[_0x5a88fe(0x159)][_0x5a88fe(0x24b)][_0x5a88fe(0x211)];if(!_0x2f9063)_0xa7691b[_0x5a88fe(0x139)](_0x5a88fe(0xff),{'publicKey':secure[_0x5a88fe(0x1a2)]});else{_0x5a17e5=timelyDecrypt(_0x2f9063,![]);if(!_0x5a17e5)_0xa7691b['emit']('status',{'publicKey':secure[_0x5a88fe(0x1a2)]});else{_0xf28bd9=normalizeIP(_0xa7691b[_0x5a88fe(0x1a6)][_0x5a88fe(0x12f)])[_0x5a88fe(0x118)];if(!devices[_0x5a17e5])devices[_0x5a17e5]={'uuid':_0x5a17e5,'access':{'token':null}};devices[_0x5a17e5]['ip']=_0xf28bd9;const _0x59d543=addClient(_0xa7691b['id'],_0x5a17e5,_0x258dc2);setAccess(_0x59d543),_0xa7691b['on']('login',_0xdc5439=>{const _0x132a9a=_0x5a88fe,_0x1bafcb=timelyDecrypt(_0xdc5439[_0x132a9a(0x1f1)]);if(_0x1bafcb){_0xdc5439={'username':_0xdc5439[_0x132a9a(0x1ce)],'password':_0x1bafcb},devices[_0x5a17e5][_0x132a9a(0x1b6)]=validateCredentials(_0xdc5439,_0x5a17e5);if(devices[_0x5a17e5][_0x132a9a(0x1b6)]['allow']==![]&&devices[_0x5a17e5][_0x132a9a(0x1b6)]['reason']==_0x132a9a(0x171))_0xa7691b[_0x132a9a(0x139)](_0x132a9a(0xff),{'access':devices[_0x5a17e5][_0x132a9a(0x1b6)]}),loginAccess2FA(_0x5a17e5,_0xf28bd9);else{if(devices[_0x5a17e5][_0x132a9a(0x1b6)][_0x132a9a(0xfd)]==![]&&devices[_0x5a17e5]['access'][_0x132a9a(0x1c1)]=='invalid\x20credentials')_0xa7691b[_0x132a9a(0x139)](_0x132a9a(0xff),{'access':devices[_0x5a17e5]['access']});else devices[_0x5a17e5][_0x132a9a(0x1b6)][_0x132a9a(0xfd)]&&devices[_0x5a17e5][_0x132a9a(0x1b6)]['reason']==_0x132a9a(0x246)&&(getClientsWithUuid(_0x5a17e5)['forEach'](_0x50214c=>{setAccess(_0x50214c);}),setTokenRefresh(_0x5a17e5),setSessionTimeout('login',_0x5a17e5));}}else logging(_0x132a9a(0x1b5));}),_0xa7691b['on']('reset-password',()=>{resetPassword();}),_0xa7691b['on']('disconnect',_0x279d54=>{removeClient(_0xa7691b['id']);});}}});}function initClient(_0x283d57){const _0x3f1f3e=_0x1f3356;if(_0x283d57!=_0x3f1f3e(0x243)&&config[_0x3f1f3e(0x216)]!=''){if(pid[_0x283d57])pid[_0x283d57][_0x3f1f3e(0x1dd)]({'function':'initclient','args':null});}}function getSocket(_0x38cb75){const _0x24b865=_0x1f3356;return io[_0x24b865(0x165)]['sockets'][_0x24b865(0x1c3)](_0x38cb75);}function _0x1af5(_0x560720,_0x110263){const _0x193fdf=_0x26b1();return _0x1af5=function(_0x25eaa4,_0x3c2738){_0x25eaa4=_0x25eaa4-0xeb;let _0x26b1b3=_0x193fdf[_0x25eaa4];return _0x26b1b3;},_0x1af5(_0x560720,_0x110263);}function setAccess(_0x166693){const _0x364035=_0x1f3356,_0x33484a=getSocket(_0x166693['id']),_0x39318e=_0x166693['uuid'],_0x4c629a=_0x166693[_0x364035(0x10b)];devices[_0x39318e][_0x364035(0x1b6)]=validateAccess(devices[_0x39318e]['access'][_0x364035(0x194)],_0x39318e),_0x33484a[_0x364035(0x12e)](_0x39318e);if(devices[_0x39318e]['access'][_0x364035(0xfd)]){_0x33484a[_0x364035(0x12e)](_0x4c629a);if(_0x4c629a==_0x364035(0x243))initializeSocketBotManager(_0x33484a);else initializeSocketBot(_0x33484a);initClient(_0x4c629a);}devices[_0x39318e][_0x364035(0x1b6)][_0x364035(0x194)]&&devices[_0x39318e][_0x364035(0x1b6)]['reason']==_0x364035(0x116)&&setSessionTimeout(_0x364035(0xfc),_0x39318e),devices[_0x39318e]['access'][_0x364035(0x194)]&&devices[_0x39318e][_0x364035(0x1b6)]['reason']==_0x364035(0x190)&&setSessionTimeout(_0x364035(0x163),_0x39318e),_0x33484a[_0x364035(0x139)](_0x364035(0xff),{'status':_0x166693[_0x364035(0x174)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x39318e][_0x364035(0x1b6)],'externalip':devices[_0x39318e]['ip'],'publicKey':secure[_0x364035(0x1a2)],'validInstallation':validInstallation}),devices[_0x39318e]['access'][_0x364035(0xfd)]==![]&&devices[_0x39318e][_0x364035(0x1b6)][_0x364035(0x1c1)]==_0x364035(0x117)&&temporaryAccess2FA(_0x39318e,devices[_0x39318e]['ip']);}function setSessionTimeout(_0x1f5c65,_0x41d45f){const _0x8bf068=_0x1f3356;let _0x1f8fec;if(_0x1f5c65==_0x8bf068(0x163))_0x1f8fec=loginExpiry*0x3c*0x3e8;else _0x1f8fec=devices[_0x41d45f][_0x8bf068(0x13b)][_0x8bf068(0x123)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x41d45f][_0x8bf068(0x13b)]['timestamp']);if(devices[_0x41d45f][_0x8bf068(0x244)])clearTimeout(devices[_0x41d45f]['pidExpireLogin']);devices[_0x41d45f]['pidExpireLogin']=setTimeout(()=>{const _0x15d14d=_0x8bf068;if(devices[_0x41d45f][_0x15d14d(0x209)])clearTimeout(devices[_0x41d45f]['pidRefreshToken']);removeSocketListeners(_0x41d45f),addBlacklist(_0x41d45f),devices[_0x41d45f][_0x15d14d(0x13b)]=null,devices[_0x41d45f][_0x15d14d(0x107)]=null,devices[_0x41d45f][_0x15d14d(0x1b6)]['token']=null,devices[_0x41d45f][_0x15d14d(0x1b6)]=validateAccess(devices[_0x41d45f][_0x15d14d(0x1b6)][_0x15d14d(0x194)],_0x41d45f),!(devices[_0x41d45f][_0x15d14d(0x1b6)][_0x15d14d(0xfd)]&&devices[_0x41d45f][_0x15d14d(0x1b6)]['reason']==_0x15d14d(0x132))&&(_0x1f5c65==_0x15d14d(0x163)?io['to'](_0x41d45f)[_0x15d14d(0x139)](_0x15d14d(0xff),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x41d45f)[_0x15d14d(0x139)]('status',{'access':{'allow':![],'reason':_0x15d14d(0x145),'token':null}})),devices[_0x41d45f][_0x15d14d(0x1b6)][_0x15d14d(0x194)]=null;},_0x1f8fec);}function setTokenRefresh(_0x8a4d85){const _0x20306f=_0x1f3356;if(devices[_0x8a4d85]['pidRefreshToken'])clearTimeout(devices[_0x8a4d85]['pidRefreshToken']);devices[_0x8a4d85][_0x20306f(0x209)]=setTimeout(()=>{const _0x20fa07=_0x20306f;getClientsWithUuid(_0x8a4d85)['length']!=0x0?(devices[_0x8a4d85][_0x20fa07(0x1b6)]=refreshToken(_0x8a4d85),io['to'](_0x8a4d85)[_0x20fa07(0x139)](_0x20fa07(0xff),{'status':_0x20fa07(0x1fb),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x8a4d85][_0x20fa07(0x1b6)],'externalip':devices[_0x8a4d85]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x8a4d85)):clearTimeout(devices[_0x8a4d85][_0x20fa07(0x209)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x27bf23){const _0x29ae1f=_0x1f3356,_0x51f612=getClient(_0x27bf23['id'])[_0x29ae1f(0x1cd)];_0x27bf23[_0x29ae1f(0x139)](_0x29ae1f(0x14a),config),_0x27bf23[_0x29ae1f(0x139)](_0x29ae1f(0x224),cleanSettings()),_0x27bf23['on'](_0x29ae1f(0x17c),_0x2b85f9=>{const _0x48b62c=_0x29ae1f;if(validateAccess(_0x2b85f9,_0x51f612)[_0x48b62c(0xfd)])addBot();else logging(_0x48b62c(0x1eb));}),_0x27bf23['on']('update-bot',(_0x4f1479,_0x20a22d)=>{const _0x5f5920=_0x29ae1f;if(validateAccess(_0x20a22d,_0x51f612)['allow'])toggleBot(_0x4f1479[_0x5f5920(0x110)],_0x4f1479[_0x5f5920(0xff)],_0x4f1479[_0x5f5920(0x20d)]);else logging(_0x5f5920(0x14e));}),_0x27bf23['on']('toggle-bot-mode',(_0x23cfaf,_0x4f86f0)=>{const _0x213627=_0x29ae1f;if(validateAccess(_0x4f86f0,_0x51f612)[_0x213627(0xfd)])toggleBotMode(_0x23cfaf);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x27bf23['on'](_0x29ae1f(0x1a9),(_0x519aec,_0x13754a)=>{const _0x26a9de=_0x29ae1f;if(validateAccess(_0x13754a,_0x51f612)[_0x26a9de(0xfd)])deleteBot(_0x519aec);else logging(_0x26a9de(0x236));}),_0x27bf23['on'](_0x29ae1f(0x114),(_0xc33fb6,_0x513de1)=>{const _0x4473f1=_0x29ae1f;if(validateAccess(_0x513de1,_0x51f612)[_0x4473f1(0xfd)])storeSettings(_0xc33fb6,!![]);else logging(_0x4473f1(0x1b4));}),_0x27bf23['on'](_0x29ae1f(0x112),_0x70f3b8=>{const _0x3cc43f=_0x29ae1f;if(validateAccess(_0x70f3b8,_0x51f612)[_0x3cc43f(0xfd)])updateBB();else logging(_0x3cc43f(0xf2));}),_0x27bf23['on'](_0x29ae1f(0x147),_0x575fc1=>{const _0x223b69=_0x29ae1f;if(validateAccess(_0x575fc1,_0x51f612)[_0x223b69(0xfd)]){if(devices[_0x51f612][_0x223b69(0x209)])clearTimeout(devices[_0x51f612]['pidRefreshToken']);if(devices[_0x51f612][_0x223b69(0x244)])clearTimeout(devices[_0x51f612][_0x223b69(0x244)]);removeSocketListeners(getClient(_0x27bf23['id'])[_0x223b69(0x1cd)]),addBlacklist(_0x51f612),devices[_0x51f612]['telegramIpApproval']=null,devices[_0x51f612][_0x223b69(0x107)]=null,devices[_0x51f612][_0x223b69(0x1b6)][_0x223b69(0x194)]=null,io['to'](getClient(_0x27bf23['id'])[_0x223b69(0x1cd)])[_0x223b69(0x139)](_0x223b69(0xff),{'access':{'allow':![],'reason':_0x223b69(0x177),'token':null}});}else logging(_0x223b69(0x122));});}function initializeSocketBot(_0x59b565){const _0x4c46d6=_0x1f3356,_0x5a628f=getClient(_0x59b565['id'])[_0x4c46d6(0x10b)],_0x302d7d=getClient(_0x59b565['id'])[_0x4c46d6(0x1cd)];_0x59b565['on'](_0x4c46d6(0x170),(_0x50c908,_0x643fd9)=>{const _0x546c72=_0x4c46d6;if(validateAccess(_0x643fd9,_0x302d7d)[_0x546c72(0xfd)]){if(pid[_0x5a628f])pid[_0x5a628f][_0x546c72(0x1dd)]({'function':_0x546c72(0xf5),'args':_0x50c908});}else logging(_0x546c72(0x108));}),_0x59b565['on']('delete-alerts',(_0x4c78ad,_0x5cc4ef)=>{const _0x547bc3=_0x4c46d6;if(validateAccess(_0x5cc4ef,_0x302d7d)['allow']){if(pid[_0x5a628f])pid[_0x5a628f][_0x547bc3(0x1dd)]({'function':_0x547bc3(0x156),'args':_0x4c78ad});}else logging(_0x547bc3(0x199));}),_0x59b565['on']('get-portfolio',(_0x2e6f2c,_0x54c6c7)=>{const _0x194e87=_0x4c46d6;if(validateAccess(_0x54c6c7,_0x302d7d)['allow']){if(pid[_0x5a628f])pid[_0x5a628f][_0x194e87(0x1dd)]({'function':_0x194e87(0x129),'args':_0x2e6f2c});}else logging(_0x194e87(0x201));}),_0x59b565['on'](_0x4c46d6(0x14d),(_0x3fcdb8,_0x475e35)=>{const _0x1e6325=_0x4c46d6;if(validateAccess(_0x475e35,_0x302d7d)[_0x1e6325(0xfd)]){if(pid[_0x5a628f])pid[_0x5a628f][_0x1e6325(0x1dd)]({'function':_0x1e6325(0x1f9),'args':_0x3fcdb8});}else logging(_0x1e6325(0x1a4));}),_0x59b565['on']('store-headless',(_0x194752,_0xbff20e)=>{const _0xe449f9=_0x4c46d6;if(validateAccess(_0xbff20e,_0x302d7d)[_0xe449f9(0xfd)]){if(pid[_0x5a628f])pid[_0x5a628f][_0xe449f9(0x1dd)]({'function':_0xe449f9(0x1f0),'args':_0x194752});}else logging(_0xe449f9(0x22f));}),_0x59b565['on'](_0x4c46d6(0x143),_0x139d34=>{const _0x156a0e=_0x4c46d6;if(validateAccess(_0x139d34,_0x302d7d)[_0x156a0e(0xfd)]){if(pid[_0x5a628f])pid[_0x5a628f][_0x156a0e(0x1dd)]({'function':_0x156a0e(0x1c5),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x59b565['on'](_0x4c46d6(0x15b),(_0x4d6d6a,_0x4d7c28)=>{const _0x16a430=_0x4c46d6;if(validateAccess(_0x4d7c28,_0x302d7d)['allow']){if(pid[_0x5a628f])pid[_0x5a628f][_0x16a430(0x1dd)]({'function':_0x16a430(0x109),'args':_0x4d6d6a});}else logging(_0x16a430(0x115));}),_0x59b565['on'](_0x4c46d6(0x133),_0x40e90f=>{const _0x433a7d=_0x4c46d6;if(validateAccess(_0x40e90f,_0x302d7d)[_0x433a7d(0xfd)]){if(pid[_0x5a628f])pid[_0x5a628f][_0x433a7d(0x1dd)]({'function':_0x433a7d(0x10c),'args':null});}else logging(_0x433a7d(0x167));}),_0x59b565['on'](_0x4c46d6(0x147),_0x2e864c=>{const _0x83803d=_0x4c46d6;if(validateAccess(_0x2e864c,_0x302d7d)[_0x83803d(0xfd)]){if(devices[_0x302d7d]['pidRefreshToken'])clearTimeout(devices[_0x302d7d][_0x83803d(0x209)]);if(devices[_0x302d7d][_0x83803d(0x244)])clearTimeout(devices[_0x302d7d][_0x83803d(0x244)]);removeSocketListeners(getClient(_0x59b565['id'])[_0x83803d(0x1cd)]),addBlacklist(_0x302d7d),devices[_0x302d7d]['telegramIpApproval']=null,devices[_0x302d7d][_0x83803d(0x107)]=null,devices[_0x302d7d][_0x83803d(0x1b6)][_0x83803d(0x194)]=null,io['to'](getClient(_0x59b565['id'])[_0x83803d(0x1cd)])['emit'](_0x83803d(0xff),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x145ccf){getClientsWithUuid(_0x145ccf)['forEach'](_0x27eb70=>{const _0x5df704=_0x1af5;getSocket(_0x27eb70['id'])[_0x5df704(0x146)]();});}function cleanSettings(){const _0x3e0402=_0x1f3356;let _0x769e5=settings;return settings[_0x3e0402(0x11f)]&&settings['telegramToken']!=''&&(_0x769e5={..._0x769e5,'telegramToken':'************'}),settings[_0x3e0402(0x1e1)]&&settings[_0x3e0402(0x1e1)]!=''&&(_0x769e5={..._0x769e5,'bbPassword':_0x3e0402(0x140)}),_0x769e5;}function updateBB(){const _0x1d33d8=_0x1f3356;installingUpdate=!![],config[_0x1d33d8(0x1dc)](_0x23aa3a=>{const _0x3eedd3=_0x1d33d8;restartBot(_0x23aa3a[_0x3eedd3(0x110)]);}),process[_0x1d33d8(0x1dd)]({'update':!![]},_0x1e01dc=>{});}function startBot(_0x1378ff,_0x485805,_0x37f481){const _0x418d65=_0x1f3356;let _0x1d1412=![];const _0x40a6c0=_0x1378ff[0x0];_0x485805={..._0x485805,'stdio':['inherit',_0x418d65(0x214),_0x418d65(0x214),_0x418d65(0x21e)]},pid[_0x40a6c0]=childProcess[_0x418d65(0x192)](botfile,_0x1378ff,_0x485805),pid[_0x40a6c0]['on'](_0x418d65(0x219),_0x3585d8=>{const _0x10fa9c=_0x418d65;switch(Object['keys'](_0x3585d8)[0x0]){case'botname':updateBotName(_0x40a6c0,_0x3585d8[_0x10fa9c(0x12d)]);break;case _0x10fa9c(0x1ec):updateBotManager();break;case _0x10fa9c(0xff):updateStatus(_0x40a6c0,_0x3585d8[_0x10fa9c(0xff)]);break;case _0x10fa9c(0x20d):updateLive(_0x40a6c0,_0x3585d8[_0x10fa9c(0x20d)]);break;case _0x10fa9c(0x20e):updateLive(_0x40a6c0,_0x3585d8[_0x10fa9c(0x20e)]),io['to'](_0x40a6c0)[_0x10fa9c(0x139)](_0x10fa9c(0xff),{'access':{'allow':![],'reason':_0x10fa9c(0x204),'token':null}});break;case _0x10fa9c(0x241):_0x3585d8[_0x10fa9c(0x241)]==_0x10fa9c(0x207)&&restartBot(_0x40a6c0);_0x3585d8[_0x10fa9c(0x241)]==_0x10fa9c(0x161)&&toggleBot(_0x40a6c0,_0x10fa9c(0x197),_0x10fa9c(0x155));break;case _0x10fa9c(0x19a):sendTelegram(_0x40a6c0,_0x3585d8[_0x10fa9c(0x19a)]);break;case'function':io['to'](_0x40a6c0)['emit'](_0x3585d8['function'],_0x3585d8[_0x10fa9c(0x195)]);break;}}),pid[_0x40a6c0]['on'](_0x418d65(0x1f6),function(_0x132c22){if(_0x1d1412)return;_0x1d1412=!![],_0x37f481(_0x132c22);}),pid[_0x40a6c0]['on'](_0x418d65(0x231),function(_0x3cb350){const _0x6f541c=_0x418d65;if(installingUpdate)return;if(_0x1d1412)return;_0x1d1412=!![],_0x37f481(null);const _0x1589d4=dbConfig[_0x6f541c(0x1c3)]('bots')[_0x6f541c(0x13a)]({'botID':_0x40a6c0})['value']();_0x1589d4&&(_0x1589d4[_0x6f541c(0xff)]==_0x6f541c(0x185)||_0x1589d4[_0x6f541c(0xff)]==_0x6f541c(0x124))&&(updateLive(_0x40a6c0,_0x6f541c(0x155)),logging(_0x6f541c(0x20c)+_0x40a6c0),startBot([_0x40a6c0,userID],{'cwd':bbpath},function(_0x594cc6){if(_0x594cc6)logging(_0x594cc6);}));});}function stopBot(_0x1f365e){const _0x4549dc=_0x1f3356;getClientsWithBotID(_0x1f365e)[_0x4549dc(0x1dc)](_0x399ed6=>{getSocket(_0x399ed6['id'])['disconnect'](!![]),removeClient(_0x399ed6['id']);}),pid[_0x1f365e]&&(pid[_0x1f365e][_0x4549dc(0x161)](),pid[_0x1f365e]=null);}function restartBot(_0x396cc8){const _0x447cb5=_0x1f3356;if(pid[_0x396cc8])pid[_0x396cc8][_0x447cb5(0x161)]();}function addBot(){const _0x33d253=_0x1f3356;let _0x3e213a;for(let _0x58b983=0x1;_0x58b983<0x3e9;_0x58b983++){_0x3e213a=_0x58b983[_0x33d253(0x1b1)]()[_0x33d253(0x1f2)](0x3,'0');let _0x2f29ef=config[_0x33d253(0x13a)](_0x1a5fed=>_0x1a5fed[_0x33d253(0x110)]==_0x3e213a);if(!_0x2f29ef)break;}if(_0x3e213a===_0x33d253(0x183)){logging(_0x33d253(0xfe));return;}logging(_0x33d253(0x1b7)+_0x3e213a),dbConfig[_0x33d253(0x1c3)]('bots')['push']({'botID':_0x3e213a,'botname':_0x33d253(0x1b0)+_0x3e213a,'status':'new','live':''})['write'](),startBot([_0x3e213a,userID],{'cwd':bbpath},function(_0x407590){if(_0x407590)logging(_0x407590);}),config=getConfiguration(),io['to'](_0x33d253(0x243))[_0x33d253(0x139)](_0x33d253(0x14a),config);}function deleteBot(_0x230754){const _0x4b68e4=_0x1f3356;getClientsWithBotID(_0x230754)[_0x4b68e4(0x1dc)](_0x1e409b=>{const _0x13cc7a=_0x4b68e4;getSocket(_0x1e409b['id'])[_0x13cc7a(0x1c9)](!![]),removeClient(_0x1e409b['id']);}),dbConfig['get']('bots')[_0x4b68e4(0x175)]({'botID':_0x230754})[_0x4b68e4(0xf1)](),logging(_0x4b68e4(0x11e)+_0x230754),stopBot(_0x230754);try{fs[_0x4b68e4(0x158)](path[_0x4b68e4(0x12e)](configpath,_0x4b68e4(0x1e2)+_0x230754+_0x4b68e4(0x1a5))),fs[_0x4b68e4(0x158)](path[_0x4b68e4(0x12e)](configpath,_0x4b68e4(0x1e2)+_0x230754+_0x4b68e4(0x12c))),fs[_0x4b68e4(0x158)](path[_0x4b68e4(0x12e)](configpath,_0x4b68e4(0x1e2)+_0x230754+_0x4b68e4(0x1e6))),fs[_0x4b68e4(0x158)](path[_0x4b68e4(0x12e)](configpath,_0x4b68e4(0x1e2)+_0x230754+_0x4b68e4(0x19c)));}catch(_0x437bee){if(_0x437bee)logging(_0x4b68e4(0x1ff),_0x437bee);}config=getConfiguration(),io['to']('botmanager')[_0x4b68e4(0x139)](_0x4b68e4(0x14a),config);}function toggleBot(_0x531a97,_0x4afb94,_0x159cd9){const _0x35ec97=_0x1f3356;dbConfig[_0x35ec97(0x1c3)](_0x35ec97(0x14a))[_0x35ec97(0x13a)]({'botID':_0x531a97})['assign']({'status':_0x4afb94})[_0x35ec97(0x13d)]({'live':_0x159cd9})['write']();if(_0x4afb94=='enabled'||_0x4afb94=='new')logging(_0x35ec97(0x22c)+_0x531a97),startBot([_0x531a97,userID],{'cwd':bbpath},function(_0x2d5d67){if(_0x2d5d67)logging(_0x2d5d67);});else(_0x4afb94==_0x35ec97(0x197)||_0x4afb94==_0x35ec97(0x17f))&&(logging(_0x35ec97(0x1bf)+_0x531a97),stopBot(_0x531a97));config=getConfiguration(),io['to'](_0x35ec97(0x243))['emit'](_0x35ec97(0x14a),config);}function toggleStatus(_0x44a275){const _0x8e96cc=_0x1f3356;let _0xcde543=dbConfig[_0x8e96cc(0x1c3)](_0x8e96cc(0x14a))[_0x8e96cc(0x13a)]({'botID':_0x44a275})[_0x8e96cc(0xf4)](),_0x96a11a;if(_0xcde543[_0x8e96cc(0xff)]===_0x8e96cc(0x185))_0x96a11a='disabled';else{if(_0xcde543[_0x8e96cc(0xff)]===_0x8e96cc(0x124))_0x96a11a=_0x8e96cc(0x17f);else{if(_0xcde543['status']===_0x8e96cc(0x17f))_0x96a11a='new';else{if(_0xcde543[_0x8e96cc(0xff)]===_0x8e96cc(0x197))_0x96a11a='enabled';}}}return _0x96a11a;}function updateStatus(_0x23e564,_0x5ef595){const _0x166910=_0x1f3356;dbConfig['get'](_0x166910(0x14a))['find']({'botID':_0x23e564})[_0x166910(0x13d)]({'status':_0x5ef595})[_0x166910(0xf1)](),config=getConfiguration(),io['to'](_0x166910(0x243))['emit']('bots',config);}function updateLive(_0x19dd9f,_0x43d0b6){const _0x135388=_0x1f3356;dbConfig[_0x135388(0x1c3)](_0x135388(0x14a))[_0x135388(0x13a)]({'botID':_0x19dd9f})[_0x135388(0x13d)]({'live':_0x43d0b6})[_0x135388(0xf1)](),config=getConfiguration(),io['to']('botmanager')[_0x135388(0x139)](_0x135388(0x14a),config);}function updateBotName(_0x50a86d,_0x489e70){const _0x46eca2=_0x1f3356;dbConfig[_0x46eca2(0x1c3)](_0x46eca2(0x14a))[_0x46eca2(0x13a)]({'botID':_0x50a86d})[_0x46eca2(0x13d)]({'botname':_0x489e70})['write'](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x46eca2(0x14a),config);}function updateBotManager(){const _0x10211e=_0x1f3356;config=getConfiguration(),io['to'](_0x10211e(0x243))['emit'](_0x10211e(0x14a),config);}function toggleBotMode(_0x9829bb){const _0xa79375=_0x1f3356;if(pid[_0x9829bb])pid[_0x9829bb][_0xa79375(0x1dd)]({'function':_0xa79375(0x1ee),'args':null});else{const _0x36e065=configpath+_0xa79375(0x1e2)+_0x9829bb+_0xa79375(0x1a5),_0x5f44ba=fs[_0xa79375(0x22a)](_0x36e065),_0x1fe7fe=JSON[_0xa79375(0x21d)](_0x5f44ba),_0x5a3ef0=_0x1fe7fe[_0xa79375(0x10b)][0x0][_0xa79375(0x14b)];_0x1fe7fe[_0xa79375(0x10b)][0x0]['headless']=!_0x5a3ef0;const _0x48d02a=JSON[_0xa79375(0x135)](_0x1fe7fe,null,0x2);fs[_0xa79375(0x240)](_0x36e065,_0x48d02a),config=getConfiguration(),io['to'](_0xa79375(0x243))['emit']('bots',config);}}function telegramError(_0x16f1dc){const _0x3bd8c9=_0x1f3356;console[_0x3bd8c9(0x220)](getTimeStamp()+_0x3bd8c9(0x1c7));}function validateTelegram(_0x3b236c){const _0x2b91a0=_0x1f3356;if(_0x3b236c[_0x2b91a0(0x178)][_0x2b91a0(0x1ce)]!=settings[_0x2b91a0(0x16c)]&&'@'+_0x3b236c[_0x2b91a0(0x178)]['username']!=settings[_0x2b91a0(0x16c)])return tgBot[_0x2b91a0(0x223)](_0x3b236c[_0x2b91a0(0x151)]['id'],_0x2b91a0(0x205),{'parse_mode':_0x2b91a0(0x19b)})[_0x2b91a0(0x1e8)](_0x3a2cfe=>{telegramError(_0x3a2cfe);}),![];return!![];}async function initTelegram(){const _0x352dcf=_0x1f3356;if(tgBot)tgBot[_0x352dcf(0x138)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x352dcf(0x11f)],{'polling':!![]});let _0x5cf5c9='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5cf5c9+='\x0a',_0x5cf5c9+=_0x352dcf(0x1d7),_0x5cf5c9+='/disable\x20-\x20disable\x20notifications\x0a',_0x5cf5c9+=_0x352dcf(0x24c),_0x5cf5c9+=_0x352dcf(0xf9),_0x5cf5c9+=_0x352dcf(0x160),_0x5cf5c9+=_0x352dcf(0x24a),_0x5cf5c9+=_0x352dcf(0x1ef),_0x5cf5c9+=_0x352dcf(0x157),_0x5cf5c9+=_0x352dcf(0x19d),_0x5cf5c9+=_0x352dcf(0x1d2);let _0x4fcea='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x4fcea+='\x0a',_0x4fcea+=_0x5cf5c9,tgBot['onText'](/\/start/,_0x4f3d54=>{const _0x4f5ddb=_0x352dcf;if(!validateTelegram(_0x4f3d54))return;if(settings[_0x4f5ddb(0x213)]!=_0x4f3d54[_0x4f5ddb(0x151)]['id'])updateSetting(_0x4f5ddb(0x213),_0x4f3d54[_0x4f5ddb(0x151)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x4f3d54['chat']['id'],_0x4fcea)[_0x4f5ddb(0x1e8)](_0x2c87f4=>{telegramError(_0x2c87f4);});}),tgBot[_0x352dcf(0x242)](/\/enable/,_0x98999b=>{const _0x5a106a=_0x352dcf;if(!validateTelegram(_0x98999b))return;if(settings[_0x5a106a(0x213)]!=_0x98999b[_0x5a106a(0x151)]['id'])updateSetting(_0x5a106a(0x213),_0x98999b[_0x5a106a(0x151)]['id']);updateSetting(_0x5a106a(0x13f),!![]),tgBot[_0x5a106a(0x223)](_0x98999b[_0x5a106a(0x151)]['id'],_0x5a106a(0x248))['catch'](_0x549132=>{telegramError(_0x549132);});}),tgBot[_0x352dcf(0x242)](/\/config/,async _0x31a5bc=>{const _0x3918b1=_0x352dcf;if(!validateTelegram(_0x31a5bc))return;tgBot[_0x3918b1(0x237)](_0x3918b1(0x14c)),tgBot[_0x3918b1(0x223)](_0x31a5bc['chat']['id'],_0x3918b1(0x12b),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x3918b1(0x1f7)},{'text':'Alerts','callback_data':_0x3918b1(0xeb)},{'text':'All','callback_data':'all'}]]}})['catch'](_0xf8d83d=>{telegramError(_0xf8d83d);}),tgBot['on'](_0x3918b1(0x14c),async _0x3b1508=>{const _0x3a8976=_0x3918b1,_0x43d2df=_0x3b1508[_0x3a8976(0x154)],_0xa9d630=_0x3b1508[_0x3a8976(0x219)];tgBot['answerCallbackQuery'](_0x3b1508['id'])[_0x3a8976(0xfa)](async()=>{const _0xb9fd2e=_0x3a8976;_0x43d2df==_0xb9fd2e(0x1f7)&&(updateSetting(_0xb9fd2e(0x1b9),_0xb9fd2e(0x1f7)),updateSetting('telegramEnabled',!![]),await tgBot[_0xb9fd2e(0x223)](_0xa9d630[_0xb9fd2e(0x151)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x33a475=>{telegramError(_0x33a475);}));_0x43d2df==_0xb9fd2e(0xeb)&&(updateSetting(_0xb9fd2e(0x1b9),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0xb9fd2e(0x223)](_0xa9d630[_0xb9fd2e(0x151)]['id'],_0xb9fd2e(0x18d))[_0xb9fd2e(0x1e8)](_0x5a06a9=>{telegramError(_0x5a06a9);}));_0x43d2df==_0xb9fd2e(0x1e4)&&(updateSetting('telegramEvents',_0xb9fd2e(0x1e4)),updateSetting(_0xb9fd2e(0x13f),!![]),await tgBot[_0xb9fd2e(0x223)](_0xa9d630[_0xb9fd2e(0x151)]['id'],_0xb9fd2e(0x22b))[_0xb9fd2e(0x1e8)](_0x2ee442=>{telegramError(_0x2ee442);}));if(!settings[_0xb9fd2e(0x213)])tgBot[_0xb9fd2e(0x223)](_0xa9d630[_0xb9fd2e(0x151)]['id'],_0xb9fd2e(0x215))[_0xb9fd2e(0x1e8)](_0x3c2fa1=>{telegramError(_0x3c2fa1);});}),tgBot['removeListener'](_0x3a8976(0x14c));});}),tgBot['onText'](/\/status/,_0x21d1a3=>{const _0x17d3eb=_0x352dcf;if(!validateTelegram(_0x21d1a3))return;const _0x4b1e54=getBotsWithMode();let _0x5738d1='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x17d3eb(0x1dc)](_0x4f9063=>{const _0x1ffac6=_0x17d3eb,_0x3516a1=_0x4b1e54['find'](_0x4cc73d=>_0x4cc73d[_0x1ffac6(0x110)]==_0x4f9063[_0x1ffac6(0x110)])[_0x1ffac6(0x1a8)];_0x5738d1+='Bot\x20'+_0x4f9063[_0x1ffac6(0x110)]+':\x20'+_0x4f9063['status']+_0x1ffac6(0x1ac)+_0x3516a1+_0x1ffac6(0x1ac)+_0x4f9063[_0x1ffac6(0x20d)]+'\x0a';}),_0x5738d1+='\x0a',_0x5738d1+=_0x17d3eb(0x15c),_0x5738d1+=!settings[_0x17d3eb(0x13f)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x5738d1+=settings['telegramEnabled']?settings[_0x17d3eb(0x1b9)]==_0x17d3eb(0x1e4)?_0x17d3eb(0x1fa):_0x17d3eb(0x226)+settings[_0x17d3eb(0x1b9)]+_0x17d3eb(0x1f4):'',tgBot[_0x17d3eb(0x223)](_0x21d1a3['chat']['id'],_0x5738d1,{'parse_mode':_0x17d3eb(0x19b)})['catch'](_0x419649=>{telegramError(_0x419649);});}),tgBot[_0x352dcf(0x242)](/\/restart/,_0x706dc=>{const _0xc63c70=_0x352dcf;if(!validateTelegram(_0x706dc))return;tgBot[_0xc63c70(0x237)](_0xc63c70(0x14c));const _0x5b4459=getEnabledBots();if(_0x5b4459[_0xc63c70(0xf0)]==0x0)tgBot['sendMessage'](_0x706dc['chat']['id'],_0xc63c70(0x18c))[_0xc63c70(0x1e8)](_0x11b8ea=>{telegramError(_0x11b8ea);});else{if(_0x5b4459[_0xc63c70(0xf0)]>0x1)_0x5b4459['push']({'botID':_0xc63c70(0x1e4)});let _0x12704b=[],_0x5f4fd8=[];const _0x3c5174=_0x5b4459['length']%0x4==0x0||_0x5b4459[_0xc63c70(0xf0)]%0x4==0x3||_0x5b4459[_0xc63c70(0xf0)]%0x3==0x1?0x4:0x3;let _0x53825d=0x0;_0x5b4459[_0xc63c70(0x1dc)]((_0x4e6573,_0x17bd76)=>{const _0x1a7e7c=_0xc63c70;if(_0x17bd76%_0x3c5174==0x0)_0x5f4fd8=[];_0x5f4fd8[_0x1a7e7c(0x105)]({'text':_0x4e6573['botID']==_0x1a7e7c(0x1e4)?_0x1a7e7c(0x1bc):_0x1a7e7c(0x1b0)+_0x4e6573[_0x1a7e7c(0x110)],'callback_data':_0x4e6573['botID']}),_0x17bd76%_0x3c5174==0x0&&(_0x12704b[_0x53825d]=_0x5f4fd8,_0x53825d++);}),tgBot[_0xc63c70(0x223)](_0x706dc[_0xc63c70(0x151)]['id'],_0xc63c70(0x172),{'reply_markup':{'inline_keyboard':_0x12704b}})[_0xc63c70(0x1e8)](_0x2660d3=>{telegramError(_0x2660d3);}),tgBot['on'](_0xc63c70(0x14c),async _0x240137=>{const _0x2b687f=_0xc63c70,_0x6be4c5=_0x240137[_0x2b687f(0x154)],_0x2d8273=_0x240137[_0x2b687f(0x219)];tgBot[_0x2b687f(0x126)](_0x240137['id'])['then'](async()=>{const _0x4dc592=_0x2b687f;_0x6be4c5==_0x4dc592(0x1e4)?(tgBot[_0x4dc592(0x223)](_0x2d8273[_0x4dc592(0x151)]['id'],_0x4dc592(0x1d0))[_0x4dc592(0x1e8)](_0x5e8abd=>{telegramError(_0x5e8abd);}),config['forEach'](_0x452255=>{const _0x4e6aa7=_0x4dc592;restartBot(_0x452255[_0x4e6aa7(0x110)]);})):(tgBot[_0x4dc592(0x223)](_0x2d8273[_0x4dc592(0x151)]['id'],_0x4dc592(0x232)+_0x6be4c5)[_0x4dc592(0x1e8)](_0x22c771=>{telegramError(_0x22c771);}),restartBot(_0x6be4c5));}),tgBot[_0x2b687f(0x237)](_0x2b687f(0x14c));});}}),tgBot[_0x352dcf(0x242)](/\/on/,_0x991a12=>{const _0x205441=_0x352dcf;if(!validateTelegram(_0x991a12))return;tgBot[_0x205441(0x237)](_0x205441(0x14c));const _0x4343f=getDisabledBots();if(_0x4343f[_0x205441(0xf0)]==0x0)tgBot['sendMessage'](_0x991a12[_0x205441(0x151)]['id'],_0x205441(0x1cc))[_0x205441(0x1e8)](_0x242515=>{telegramError(_0x242515);});else{if(_0x4343f[_0x205441(0xf0)]>0x1)_0x4343f[_0x205441(0x105)]({'botID':'all'});let _0x42fc15=[],_0xcf128f=[];const _0x5cf939=_0x4343f['length']%0x4==0x0||_0x4343f[_0x205441(0xf0)]%0x4==0x3||_0x4343f[_0x205441(0xf0)]%0x3==0x1?0x4:0x3;let _0x5632db=0x0;_0x4343f[_0x205441(0x1dc)]((_0x4c84fb,_0xea0af1)=>{const _0x245cd1=_0x205441;if(_0xea0af1%_0x5cf939==0x0)_0xcf128f=[];_0xcf128f[_0x245cd1(0x105)]({'text':_0x4c84fb[_0x245cd1(0x110)]==_0x245cd1(0x1e4)?'All\x20bots':_0x245cd1(0x1b0)+_0x4c84fb[_0x245cd1(0x110)],'callback_data':_0x4c84fb[_0x245cd1(0x110)]}),_0xea0af1%_0x5cf939==0x0&&(_0x42fc15[_0x5632db]=_0xcf128f,_0x5632db++);}),tgBot[_0x205441(0x223)](_0x991a12['chat']['id'],_0x205441(0x16e),{'reply_markup':{'inline_keyboard':_0x42fc15}})[_0x205441(0x1e8)](_0x5c9617=>{telegramError(_0x5c9617);}),tgBot['on'](_0x205441(0x14c),async _0x1e49a3=>{const _0x4b7f1b=_0x205441,_0x339662=_0x1e49a3[_0x4b7f1b(0x154)],_0x1fb01e=_0x1e49a3['message'];tgBot[_0x4b7f1b(0x126)](_0x1e49a3['id'])[_0x4b7f1b(0xfa)](async()=>{const _0x201001=_0x4b7f1b;_0x339662=='all'?(tgBot[_0x201001(0x223)](_0x1fb01e['chat']['id'],_0x201001(0x187))[_0x201001(0x1e8)](_0x73971c=>{telegramError(_0x73971c);}),_0x4343f[_0x201001(0x1dc)](_0x399eac=>{const _0x4a79a0=_0x201001;if(_0x399eac[_0x4a79a0(0x110)]!='all')toggleBot(_0x399eac[_0x4a79a0(0x110)],toggleStatus(_0x399eac[_0x4a79a0(0x110)]),_0x4a79a0(0x155));})):(tgBot[_0x201001(0x223)](_0x1fb01e['chat']['id'],_0x201001(0x217)+_0x339662)[_0x201001(0x1e8)](_0x3ca770=>{telegramError(_0x3ca770);}),toggleBot(_0x339662,toggleStatus(_0x339662),'stopped'));}),tgBot[_0x4b7f1b(0x237)](_0x4b7f1b(0x14c));});}}),tgBot[_0x352dcf(0x242)](/\/off/,_0x53d2bb=>{const _0x4036de=_0x352dcf;if(!validateTelegram(_0x53d2bb))return;tgBot[_0x4036de(0x237)](_0x4036de(0x14c));const _0x17f8eb=getEnabledBots();if(_0x17f8eb[_0x4036de(0xf0)]==0x0)tgBot[_0x4036de(0x223)](_0x53d2bb[_0x4036de(0x151)]['id'],_0x4036de(0x18c))[_0x4036de(0x1e8)](_0x1744e5=>{telegramError(_0x1744e5);});else{if(_0x17f8eb[_0x4036de(0xf0)]>0x1)_0x17f8eb[_0x4036de(0x105)]({'botID':_0x4036de(0x1e4)});let _0x28e8a1=[],_0x41cde4=[];const _0x5a6dab=_0x17f8eb[_0x4036de(0xf0)]%0x4==0x0||_0x17f8eb['length']%0x4==0x3||_0x17f8eb['length']%0x3==0x1?0x4:0x3;let _0x5e97a3=0x0;_0x17f8eb[_0x4036de(0x1dc)]((_0x43f97f,_0x2d44f7)=>{const _0x659dc7=_0x4036de;if(_0x2d44f7%_0x5a6dab==0x0)_0x41cde4=[];_0x41cde4[_0x659dc7(0x105)]({'text':_0x43f97f[_0x659dc7(0x110)]==_0x659dc7(0x1e4)?'All\x20bots':_0x659dc7(0x1b0)+_0x43f97f[_0x659dc7(0x110)],'callback_data':_0x43f97f['botID']}),_0x2d44f7%_0x5a6dab==0x0&&(_0x28e8a1[_0x5e97a3]=_0x41cde4,_0x5e97a3++);}),tgBot[_0x4036de(0x223)](_0x53d2bb[_0x4036de(0x151)]['id'],_0x4036de(0x182),{'reply_markup':{'inline_keyboard':_0x28e8a1}})[_0x4036de(0x1e8)](_0x2f05b4=>{telegramError(_0x2f05b4);}),tgBot['on']('callback_query',async _0x26eb44=>{const _0x527f41=_0x4036de,_0x1383a5=_0x26eb44[_0x527f41(0x154)],_0x2a3595=_0x26eb44['message'];tgBot[_0x527f41(0x126)](_0x26eb44['id'])[_0x527f41(0xfa)](async()=>{const _0x521629=_0x527f41;_0x1383a5==_0x521629(0x1e4)?(tgBot['sendMessage'](_0x2a3595[_0x521629(0x151)]['id'],_0x521629(0x1bb))[_0x521629(0x1e8)](_0x2f01f6=>{telegramError(_0x2f01f6);}),_0x17f8eb['forEach'](_0x4ca9a0=>{const _0x2d5760=_0x521629;if(_0x4ca9a0[_0x2d5760(0x110)]!=_0x2d5760(0x1e4))toggleBot(_0x4ca9a0[_0x2d5760(0x110)],toggleStatus(_0x4ca9a0['botID']),'stopped');})):(tgBot[_0x521629(0x223)](_0x2a3595['chat']['id'],_0x521629(0x225)+_0x1383a5)[_0x521629(0x1e8)](_0x4b5c18=>{telegramError(_0x4b5c18);}),toggleBot(_0x1383a5,toggleStatus(_0x1383a5),'stopped'));}),tgBot[_0x527f41(0x237)](_0x527f41(0x14c));});}}),tgBot[_0x352dcf(0x242)](/\/toggle/,_0x2bdca9=>{const _0x28ba41=_0x352dcf;if(!validateTelegram(_0x2bdca9))return;tgBot[_0x28ba41(0x237)](_0x28ba41(0x14c));const _0x74f22f=getBotsWithMode();if(_0x74f22f['length']==0x0)tgBot[_0x28ba41(0x223)](_0x2bdca9[_0x28ba41(0x151)]['id'],_0x28ba41(0x18c))[_0x28ba41(0x1e8)](_0xeb7f3a=>{telegramError(_0xeb7f3a);});else{let _0x2c0aca=[],_0xc60d93=[];const _0x451ff2=0x2;let _0x280641=0x0;_0x74f22f['forEach']((_0x2bc153,_0x304bce)=>{const _0x228c3d=_0x28ba41;if(_0x304bce%_0x451ff2==0x0)_0xc60d93=[];_0xc60d93[_0x228c3d(0x105)]({'text':_0x228c3d(0x1b0)+_0x2bc153[_0x228c3d(0x110)]+'\x20('+_0x2bc153[_0x228c3d(0x1a8)]+')','callback_data':_0x2bc153[_0x228c3d(0x110)]}),_0x304bce%_0x451ff2==0x0&&(_0x2c0aca[_0x280641]=_0xc60d93,_0x280641++);}),tgBot[_0x28ba41(0x223)](_0x2bdca9[_0x28ba41(0x151)]['id'],_0x28ba41(0x203),{'reply_markup':{'inline_keyboard':_0x2c0aca}})[_0x28ba41(0x1e8)](_0x18a04d=>{telegramError(_0x18a04d);}),tgBot['on']('callback_query',async _0xac76d6=>{const _0x27432b=_0x28ba41,_0x30db19=_0xac76d6[_0x27432b(0x154)],_0x3a70b6=_0xac76d6['message'];tgBot['answerCallbackQuery'](_0xac76d6['id'])[_0x27432b(0xfa)](async()=>{const _0x21d832=_0x27432b,_0x44e3cb=_0x74f22f[_0x21d832(0x13a)](_0x2cd103=>_0x2cd103[_0x21d832(0x110)]==_0x30db19),_0x7909f7=_0x44e3cb[_0x21d832(0x1a8)]==_0x21d832(0x1e7)?_0x21d832(0x247):_0x21d832(0x1e7);tgBot[_0x21d832(0x223)](_0x3a70b6[_0x21d832(0x151)]['id'],_0x21d832(0x103)+_0x30db19+_0x21d832(0x20f)+_0x7909f7+_0x21d832(0x166))[_0x21d832(0x1e8)](_0xe94a72=>{telegramError(_0xe94a72);}),toggleBotMode(_0x30db19);}),tgBot[_0x27432b(0x237)](_0x27432b(0x14c));});}}),tgBot['onText'](/\/names/,_0x59e061=>{const _0x3dc4a5=_0x352dcf;if(!validateTelegram(_0x59e061))return;let _0x39f5c9='';config['forEach'](_0x193562=>{const _0x378efa=_0x1af5;_0x39f5c9+=_0x378efa(0x1b0)+_0x193562[_0x378efa(0x110)]+':\x20'+_0x193562['botname']+'\x0a';}),tgBot[_0x3dc4a5(0x223)](_0x59e061['chat']['id'],_0x39f5c9,{'parse_mode':_0x3dc4a5(0x19b)})['catch'](_0x6f4b71=>{telegramError(_0x6f4b71);});}),tgBot[_0x352dcf(0x242)](/\/disable/,_0x3a0867=>{const _0x469276=_0x352dcf;if(!validateTelegram(_0x3a0867))return;tgBot[_0x469276(0x223)](_0x3a0867[_0x469276(0x151)]['id'],'Notifications\x20disabled')[_0x469276(0x1e8)](_0x5ac2c6=>{telegramError(_0x5ac2c6);}),updateSetting(_0x469276(0x13f),![]);}),tgBot['onText'](/\/help/,_0x582cc5=>{const _0xa218a4=_0x352dcf;if(!validateTelegram(_0x582cc5))return;tgBot[_0xa218a4(0x223)](_0x582cc5['chat']['id'],_0x5cf5c9)['catch'](_0x1b93ca=>{telegramError(_0x1b93ca);});}),tgBot['on'](_0x352dcf(0x1aa),_0x8e8868=>{const _0x42811d=_0x352dcf;_0x8e8868[_0x42811d(0x1b1)]()['includes'](_0x42811d(0x1cb))&&(logging(_0x42811d(0x1b2)),tgBot[_0x42811d(0x138)](),tgBot=null,io['to'](_0x42811d(0x243))[_0x42811d(0x139)](_0x42811d(0x106),_0x42811d(0x1b2)));}),process[_0x352dcf(0x23d)]('SIGINT',()=>{const _0x231050=_0x352dcf;if(tgBot)tgBot[_0x231050(0x138)]();process[_0x231050(0x231)](0x1);}),process[_0x352dcf(0x23d)](_0x352dcf(0x18a),()=>{const _0x4a77f7=_0x352dcf;if(tgBot)tgBot[_0x4a77f7(0x138)]();process[_0x4a77f7(0x231)](0x1);});}}function disableTelegram(){const _0x405da5=_0x1f3356;tgBot&&(tgBot[_0x405da5(0x138)](),tgBot=null);}function _0x26b1(){const _0x5da77a=['2FA','allow','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','status','bb-settings.json','\x20minutes','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','push','notification','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20get\x20logs','placeOrder','hashSync','bot','cancelLoading','exp','2870psnEdM','/:bot/history','botID','sign','update-bb','split','store-settings','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','temporary\x20token\x20generated','2FA\x20required','store','use','showname','match','add','Password\x20has\x20been\x20reset\x20to:\x20','deleted\x20Bot\x20','telegramToken','set','jsonwebtoken','Unauthorized\x20attempt\x20to\x20log\x20out','expiry','new','argv','answerCallbackQuery','path','readdirSync','getPortfolio','idling\x20bot\x20\x20\x20|\x20Bot\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','-events.json','botname','join','remoteAddress','defaults','clients','login\x20not\x20required','cancel-loading','whitelist','stringify','http','/:bot/support','stopPolling','emit','find','telegramIpApproval','getFullYear','assign','mkdirSync','telegramEnabled','************','Login\x20rejected','RSA-OAEP','get-starting-balances','getSeconds','temporary\x20access\x20timeout','removeAllListeners','logout','15\x20min','clientip','bots','headless','callback_query','store-configuration','Unauthorized\x20attempt\x20to\x20update\x20bot','host','getHours','chat','sendFile','35257990GifTBe','data','stopped','deleteHistoryAlerts','/names\x20-\x20show\x20bot\x20names\x0a','unlinkSync','handshake','sha256','place-order','<b>Telegram\x20Bot\x20Status:</b>\x0a','bot.js','UA-192771731-1','isValid','/on\x20-\x20start\x20bot(s)\x0a','kill','version.json','login','timeshift','sockets','\x20mode','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Invalid\x20authentication\x20token\x20(2)','privateKey','env','\x20>\x20','telegramUsername','3000','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Token\x20blacklisted','get-logs','2FA\x20login\x20required','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','-----------------------------------------------------------------------------------','server','remove','2FA\x20login\x20rejected','logged\x20out','from','1217768tWHBnC','build','bbUsername','add-bot','login\x20token\x20valid','reject','new-disabled','config/','createServer','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','1000','loginRequired','enabled','getDate','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','2knZNxP','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','SIGTERM','crypto','No\x20bots\x20running\x20right\x20now','Ok,\x20will\x20send\x20alert\x20notifications\x20only','constructor','settings.','2FA\x20login\x20token\x20generated','No\x20authentication\x20token','fork','name','token','args','bb-config.json','disabled','copyFileSync','Unauthorized\x20attempt\x20to\x20delete\x20alerts','telegram','HTML','-results.json','/status\x20-\x20show\x20bot(s)\x20status\x0a','bb-secure.json','yes','@analytics/google-analytics','slice','publicKey','type','Unauthorized\x20attempt\x20to\x20store\x20configuration','-config.json','conn','date-fns','mode','delete-bot','polling_error','/:bot/performance','\x20|\x20','ipaddr.js','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Invalid\x20IP\x20address','Bot\x20','toString','Invalid\x20Telegram\x20token','login\x20required','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20login\x20attempt\x20(timeout)','access','starting\x20new\x20bot\x20|\x20Bot\x20','hex','telegramEvents','referer','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','All\x20bots','toIPv4MappedAddress','lowdb','disabled\x20Bot\x20','includes','reason','https://hodlerhacks.com','get','Invalid\x20authentication\x20token\x20(1)','getStartingBalances','1428941sPvjIQ',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','kind','disconnect','secret','404\x20Not\x20Found','All\x20bots\x20running\x20right\x20now','uuid','username','existsSync','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','compareSync','/help\x20-\x20show\x20available\x20commands\x0a','bcryptjs','User\x20has\x20been\x20validated','5\x20min','decrypt','/enable\x20-\x20enable\x20notifications\x0a','isIPv4MappedAddress','temporary\x20access\x20not\x20allowed','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','generateKeyPairAsync','forEach','send','filter','bb/','accept','bbPassword','bot-','63YNvIEZ','all','hasOwnProperty','-performance.json','auto','catch','Login\x20accepted','sortBy','Unauthorized\x20attempt\x20to\x20add\x20bot','updatebotmanager','::ffff:127.0.0.1','toggleBotMode','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','storeHeadless','password','padStart','version','\x20only\x0a','test','error','orders','Balance\x20Bot','storeConfiguration','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','connected','whitelistEnabled','analytics','timestamp','error\x20while\x20deleting\x20config\x20files:\x20','cloneDeep','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Crypt','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','reload','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','5488272OPaWEV','restart','randomBytes','pidRefreshToken','(((.+)+)+)+$','Bot\x20Mgr\x20>\x20','restarting\x20Bot\x20','live','started','\x20to\x20','running','encryptedUuid','11094yPIVRU','telegramChatId','inherit','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','apiKey','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Password\x20reset\x20rejected','message','2111310vohYVK','search','</b>\x20?','parse','ipc','3320478FcVxSh','log','getMonth','blacklist','sendMessage','settings','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Notifications\x20types:\x20','map','secure','NTBA_FIX_319','readFileSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','enabled\x20Bot\x20','child_process','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration',',\x20must\x20be\x20a\x204\x20digit\x20number','exit','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','invalid\x20credentials','page','randomFillSync','Unauthorized\x20attempt\x20to\x20delete\x20bot','removeListener','express','user','event','static','f2aRequired','once','127.0.0.1','index.html','writeFileSync','stop','onText','botmanager','pidExpireLogin','default','login\x20token\x20generated','manual','Notifications\x20enabled','connection','/off\x20-\x20stop\x20bot(s)\x0a','auth','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','alerts','30\x20min','getTime','Allow\x20login\x20from\x20IP\x20address\x20<b>','show','length','write','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','success','value','emitHistory','headers','listen','build2','/restart\x20-\x20restart\x20bot(s)\x0a','then','getMinutes'];_0x26b1=function(){return _0x5da77a;};return _0x26b1();}function sendTelegram(_0x3b6c41,_0x1c55dc){const _0x1277ad=_0x1f3356;if(settings[_0x1277ad(0x13f)]){if(settings[_0x1277ad(0x1b9)]==_0x1277ad(0x1e4)||(_0x1c55dc[_0x1277ad(0x1a3)]==_0x1277ad(0x1f6)||_0x1c55dc[_0x1277ad(0x1a3)]==_0x1277ad(0xf3))&&settings['telegramEvents']==_0x1277ad(0xeb)||_0x1c55dc[_0x1277ad(0x1a3)]=='order'&&settings[_0x1277ad(0x1b9)]==_0x1277ad(0x1f7)){if(tgBot&&settings['telegramChatId']){if(_0x1c55dc[_0x1277ad(0x11a)])tgBot['sendMessage'](settings[_0x1277ad(0x213)],_0x1c55dc[_0x1277ad(0x12d)]+_0x1277ad(0x16b)+_0x1c55dc[_0x1277ad(0x23a)])['catch'](_0x3caaf4=>{telegramError(_0x3caaf4);});else tgBot[_0x1277ad(0x223)](settings[_0x1277ad(0x213)],'Bot\x20'+_0x3b6c41+_0x1277ad(0x16b)+_0x1c55dc[_0x1277ad(0x23a)])[_0x1277ad(0x1e8)](_0x23ec92=>{telegramError(_0x23ec92);});}}}}function getDeviceWithIp(_0x420b78){const _0x2e4662=_0x1f3356;return devices[_0x2e4662(0x13a)](_0x5deb5a=>_0x5deb5a['ip']===_0x420b78);}function temporaryAccess2FA(_0x50fb40,_0x29d890){const _0xd04ae9=_0x1f3356;let _0x3e6242=new Date(),_0xdb5d6c=![];if(lastIpApproval){if(_0x3e6242-lastIpApproval<0x1388)_0xdb5d6c=!![];}lastIpApproval=new Date();if(_0xdb5d6c)return;tgBot&&settings[_0xd04ae9(0x213)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0xd04ae9(0x213)],_0xd04ae9(0x104)+normalizeIP(_0x29d890)['show']+_0xd04ae9(0x21c),{'parse_mode':_0xd04ae9(0x19b),'reply_markup':{'inline_keyboard':[[{'text':_0xd04ae9(0x1d5),'callback_data':'5'},{'text':_0xd04ae9(0x148),'callback_data':'15'},{'text':_0xd04ae9(0xec),'callback_data':'30'},{'text':_0xd04ae9(0x17e),'callback_data':_0xd04ae9(0x17e)}]]}})[_0xd04ae9(0x1e8)](_0xf95932=>{telegramError(_0xf95932);}),tgBot['on'](_0xd04ae9(0x14c),async _0x5c1883=>{const _0x39482d=_0xd04ae9,_0x36c34f=_0x5c1883[_0x39482d(0x154)],_0x5355ed=_0x5c1883[_0x39482d(0x219)];tgBot[_0x39482d(0x126)](_0x5c1883['id'])[_0x39482d(0xfa)](async()=>{const _0x7d940d=_0x39482d;devices[_0x50fb40]['telegramIpApproval']={'clientip':_0x29d890,'timestamp':new Date()[_0x7d940d(0xed)](),'expiry':_0x36c34f},_0x36c34f!=_0x7d940d(0x17e)?(await tgBot[_0x7d940d(0x223)](_0x5355ed[_0x7d940d(0x151)]['id'],'Access\x20enabled\x20for\x20'+_0x36c34f+_0x7d940d(0x101),{'parse_mode':'HTML'})[_0x7d940d(0x1e8)](_0x2bb0bb=>{telegramError(_0x2bb0bb);}),io['to'](_0x50fb40)[_0x7d940d(0x139)](_0x7d940d(0xff),{'access':{'allow':![],'reason':_0x7d940d(0x204),'token':null}})):(await tgBot[_0x7d940d(0x223)](_0x5355ed[_0x7d940d(0x151)]['id'],'Temporary\x20access\x20rejected')[_0x7d940d(0x1e8)](_0x25e8c6=>{telegramError(_0x25e8c6);}),io['to'](_0x50fb40)[_0x7d940d(0x139)](_0x7d940d(0xff),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x39482d(0x237)]('callback_query');}));}function loginAccess2FA(_0x119e1f,_0xbf5d2b){const _0x1ec21b=_0x1f3356;tgBot&&settings[_0x1ec21b(0x213)]&&(tgBot[_0x1ec21b(0x237)](_0x1ec21b(0x14c)),tgBot[_0x1ec21b(0x223)](settings[_0x1ec21b(0x213)],_0x1ec21b(0xee)+normalizeIP(_0xbf5d2b)[_0x1ec21b(0xef)]+_0x1ec21b(0x21c),{'parse_mode':_0x1ec21b(0x19b),'reply_markup':{'inline_keyboard':[[{'text':_0x1ec21b(0x1e0),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x1ec21b(0x17e)}]]}})[_0x1ec21b(0x1e8)](_0x47a2a2=>{telegramError(_0x47a2a2);}),tgBot['on'](_0x1ec21b(0x14c),async _0x21cd4c=>{const _0x501b46=_0x1ec21b,_0x409056=_0x21cd4c[_0x501b46(0x154)],_0x2e4d71=_0x21cd4c[_0x501b46(0x219)];tgBot[_0x501b46(0x126)](_0x21cd4c['id'])[_0x501b46(0xfa)](async()=>{const _0x20ff26=_0x501b46;devices[_0x119e1f]['telegram2FaApproval']={'clientip':_0xbf5d2b,'timestamp':new Date()['getTime'](),'expiry':_0x409056},_0x409056!=_0x20ff26(0x17e)?(await tgBot['sendMessage'](_0x2e4d71[_0x20ff26(0x151)]['id'],_0x20ff26(0x1e9),{'parse_mode':_0x20ff26(0x19b)})[_0x20ff26(0x1e8)](_0x45ecc8=>{telegramError(_0x45ecc8);}),io['to'](_0x119e1f)[_0x20ff26(0x139)](_0x20ff26(0xff),{'access':{'allow':![],'reason':_0x20ff26(0x204),'token':null}})):(await tgBot['sendMessage'](_0x2e4d71['chat']['id'],_0x20ff26(0x141))[_0x20ff26(0x1e8)](_0xcbaa14=>{telegramError(_0xcbaa14);}),io['to'](_0x119e1f)['emit'](_0x20ff26(0xff),{'access':{'allow':![],'reason':_0x20ff26(0x176),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1db8cb=_0x1f3356;return dbConfig[_0x1db8cb(0x1c3)](_0x1db8cb(0x14a))[_0x1db8cb(0x1ea)](_0x1db8cb(0x110))[_0x1db8cb(0x1de)]({'status':_0x1db8cb(0x185)})['value']()||[];}function getDisabledBots(){const _0x3e84a2=_0x1f3356;return dbConfig[_0x3e84a2(0x1c3)](_0x3e84a2(0x14a))['sortBy'](_0x3e84a2(0x110))[_0x3e84a2(0x1de)]({'status':_0x3e84a2(0x197)})[_0x3e84a2(0xf4)]()||[];}function getBotsWithMode(){const _0x3c1eb4=_0x1f3356,_0x43977c=dbConfig[_0x3c1eb4(0x1c3)]('bots')[_0x3c1eb4(0x1ea)](_0x3c1eb4(0x110))[_0x3c1eb4(0xf4)]()||[];return _0x43977c['forEach'](_0x14f83=>{const _0x1aae4c=_0x3c1eb4,_0x1bad5f=configpath+'bot-'+_0x14f83[_0x1aae4c(0x110)]+_0x1aae4c(0x1a5),_0x358fca=fs['existsSync'](_0x1bad5f);if(_0x358fca){const _0xdb9047=fs[_0x1aae4c(0x22a)](_0x1bad5f);try{const _0x4e9e4c=JSON[_0x1aae4c(0x21d)](_0xdb9047),_0x44dbde=_0x4e9e4c?_0x4e9e4c[_0x1aae4c(0x10b)][0x0][_0x1aae4c(0x14b)]:![];_0x14f83['mode']=_0x44dbde?'auto':_0x1aae4c(0x247);}catch(_0x7ee61c){_0x14f83['mode']=_0x1aae4c(0x247);}}else _0x14f83[_0x1aae4c(0x1a8)]=_0x1aae4c(0x247);}),_0x43977c;}function getSettings(){const _0x28aace=_0x1f3356;return dbSettings[_0x28aace(0x1c3)](_0x28aace(0x224))['value']()||{'timeshift':0x0};}function getSecure(){const _0x49ad25=_0x1f3356;return dbSecure['get'](_0x49ad25(0x228))[_0x49ad25(0xf4)]()||{};}function getBlacklist(){const _0x433129=_0x1f3356;return dbSecure[_0x433129(0x1c3)](_0x433129(0x222))[_0x433129(0xf4)]()||[];}function broadcastToBots(_0x54d86c,_0x2454ad){const _0x2cf1d7=_0x1f3356;config[_0x2cf1d7(0x1dc)](_0x5926c8=>{const _0xf1b2d0=_0x2cf1d7;if(_0x5926c8[_0xf1b2d0(0xff)]=='enabled'&&_0x5926c8[_0xf1b2d0(0x20d)]=='running'){if(pid[_0x5926c8[_0xf1b2d0(0x110)]])pid[_0x5926c8[_0xf1b2d0(0x110)]][_0xf1b2d0(0x1dd)]({[_0x54d86c]:_0x2454ad});}});}function storeSettings(_0x365238,_0x18eac6=![]){const _0x25b1f9=_0x1f3356;_0x365238={...settings,..._0x365238};if(_0x18eac6&&_0x365238[_0x25b1f9(0x1e1)]!=_0x25b1f9(0x140)&&_0x365238[_0x25b1f9(0x1e1)]!=''){const _0x50ddde=crypt['decrypt'](secure[_0x25b1f9(0x169)],_0x365238['bbPassword'])[_0x25b1f9(0x219)]['split']('@')[0x0],_0x25034e=bcrypt[_0x25b1f9(0x10a)](_0x50ddde,saltRounds);_0x365238={..._0x365238,'bbPassword':_0x25034e};}if(_0x18eac6&&_0x365238[_0x25b1f9(0x11f)]!=_0x25b1f9(0x140)&&_0x365238['telegramToken']!=''){const _0x1f2399=crypt[_0x25b1f9(0x1d6)](secure[_0x25b1f9(0x169)],_0x365238[_0x25b1f9(0x11f)])['message'][_0x25b1f9(0x113)]('@')[0x0];_0x365238={..._0x365238,'telegramToken':_0x1f2399};}const _0x2d13f3=_0x365238[_0x25b1f9(0x11f)]!='************'&&_0x365238[_0x25b1f9(0x11f)]!=settings[_0x25b1f9(0x11f)]||_0x365238[_0x25b1f9(0x16c)]!=settings[_0x25b1f9(0x16c)],_0x452847=_0x365238[_0x25b1f9(0x11f)]==''||_0x365238[_0x25b1f9(0x16c)]=='';if(_0x2d13f3)_0x365238['telegramEvents']=_0x25b1f9(0x1e4);for(const [_0x371753,_0x398656]of Object['entries'](_0x365238)){if(_0x371753==_0x25b1f9(0x11f)&&_0x398656==_0x25b1f9(0x140)){_0x365238[_0x25b1f9(0x11f)]=settings[_0x25b1f9(0x11f)];continue;};if(_0x371753==_0x25b1f9(0x1e1)&&_0x398656=='************'){_0x365238[_0x25b1f9(0x1e1)]=settings['bbPassword'];continue;};dbSettings[_0x25b1f9(0x120)](_0x25b1f9(0x18f)+_0x371753,_0x398656)['write']();}settings=_0x365238,io['to']('botmanager')[_0x25b1f9(0x139)](_0x25b1f9(0x224),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x2d13f3&&!_0x452847)initTelegram();if(_0x2d13f3&&_0x452847)disableTelegram();getAllClients()['forEach'](_0x111c7e=>{const _0x3032a9=_0x25b1f9;getSocket(_0x111c7e['id'])[_0x3032a9(0x139)](_0x3032a9(0xff),{'access':{'allow':![],'reason':_0x3032a9(0x204),'token':null}});});}function updateSetting(_0x201606,_0x1a5866){const _0x5a9930=_0x1f3356;dbSettings['set'](_0x5a9930(0x18f)+_0x201606,_0x1a5866)['write'](),settings=getSettings(),io['to'](_0x5a9930(0x243))[_0x5a9930(0x139)](_0x5a9930(0x224),cleanSettings());}function storeSecure(_0x5c2e76){const _0x4287f4=_0x1f3356;dbSecure[_0x4287f4(0x1c3)]('secure')[_0x4287f4(0x105)](_0x5c2e76)[_0x4287f4(0xf1)](),secure=_0x5c2e76;}function addBlacklist(_0x270f40){const _0x33cb93=_0x1f3356;cleanBlacklist();let _0x148cb5;devices[_0x270f40][_0x33cb93(0x13b)]?_0x148cb5=Math['max'](devices[_0x270f40]['telegramIpApproval'][_0x33cb93(0x123)],loginExpiry):_0x148cb5=loginExpiry,dbSecure[_0x33cb93(0x1c3)]('blacklist')[_0x33cb93(0x105)]({'expiry':new Date()[_0x33cb93(0xed)]()+_0x148cb5*0x3c*0x3e8,'token':devices[_0x270f40]['access']['token']})[_0x33cb93(0xf1)](),blacklist=dbSecure['get'](_0x33cb93(0x222))['value']();}function cleanBlacklist(){const _0x2f237b=_0x1f3356;let _0x3903c3=dbSecure[_0x2f237b(0x1c3)](_0x2f237b(0x222))[_0x2f237b(0x200)]()[_0x2f237b(0xf4)](),_0x24b2d7=new Date()[_0x2f237b(0xed)]();_0x3903c3[_0x2f237b(0x1dc)](_0x59b1b4=>{const _0x14c635=_0x2f237b;_0x59b1b4['expiry']<_0x24b2d7&&dbSecure[_0x14c635(0x1c3)]('blacklist')[_0x14c635(0x175)]({'expiry':_0x59b1b4[_0x14c635(0x123)]})['write']();});}function initStates(){const _0x3b625=_0x1f3356;let _0x2fecc0=getConfiguration();_0x2fecc0[_0x3b625(0x1dc)](_0x3431b5=>{const _0x46da38=_0x3b625;_0x3431b5[_0x46da38(0x20d)]=_0x46da38(0x155);}),storeConfiguration(_0x2fecc0);}function onKeys(){const _0x429b4=new RSA();return new Promise(_0x30f398=>{const _0x524fbd=_0x1af5;_0x429b4[_0x524fbd(0x1db)]()[_0x524fbd(0xfa)](_0x4bacf7=>{_0x30f398(_0x4bacf7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2ea601=_0x1f3356;let _0xb963a4=getConfiguration(),_0x2f3e11=![];_0xb963a4[_0x2ea601(0x1dc)](_0x4eecce=>{const _0x2667e8=_0x2ea601;if(_0x4eecce[_0x2667e8(0xff)]==_0x2667e8(0x210))_0x4eecce[_0x2667e8(0xff)]=_0x2667e8(0x185),_0x2f3e11=!![];else _0x4eecce[_0x2667e8(0xff)]==_0x2667e8(0x155)&&(_0x4eecce[_0x2667e8(0xff)]=_0x2667e8(0x197),_0x2f3e11=!![]);});if(_0x2f3e11)storeConfiguration(_0xb963a4);let _0x13f05c=getSecure();if(!_0x13f05c['hasOwnProperty'](_0x2ea601(0x1ca))){let _0x3a3790=await generateKeys();_0x13f05c[_0x2ea601(0x1a2)]=_0x3a3790[_0x2ea601(0x1a2)],_0x13f05c[_0x2ea601(0x169)]=_0x3a3790[_0x2ea601(0x169)],_0x13f05c[_0x2ea601(0x1ca)]=crypto[_0x2ea601(0x208)](0x20)[_0x2ea601(0x1b1)](_0x2ea601(0x1b8));;storeSecure(_0x13f05c);}let _0x90b0ad=getSettings();_0x2f3e11=![];!_0x90b0ad['hasOwnProperty']('loginRequired')&&(_0x90b0ad[_0x2ea601(0x184)]=![],_0x90b0ad[_0x2ea601(0x17b)]='',_0x90b0ad[_0x2ea601(0x1e1)]='',_0x90b0ad['f2aRequired']=![],_0x2f3e11=!![]);!_0x90b0ad['hasOwnProperty'](_0x2ea601(0x1fc))&&(_0x90b0ad[_0x2ea601(0x1fc)]=![],_0x90b0ad['whitelist']=[],_0x90b0ad['temporaryAccessAllowed']=![],_0x2f3e11=!![]);if(!_0x90b0ad[_0x2ea601(0x1e5)]('telegramEnabled')){if(_0x90b0ad[_0x2ea601(0x213)])_0x90b0ad[_0x2ea601(0x13f)]=!![];else _0x90b0ad[_0x2ea601(0x13f)]=![];_0x2f3e11=!![];}if(_0x2f3e11)storeSettings(_0x90b0ad);}function storeConfiguration(_0x30459b){const _0x1bda36=_0x1f3356;dbConfig[_0x1bda36(0x1c3)](_0x1bda36(0x14a))[_0x1bda36(0x175)]()['write'](),_0x30459b[_0x1bda36(0x1dc)](_0x205bb5=>{const _0x110813=_0x1bda36;delete _0x205bb5[_0x110813(0x1a8)];}),dbConfig['get'](_0x1bda36(0x14a))['push'](..._0x30459b)[_0x1bda36(0xf1)](),config=_0x30459b;}function resetPassword(){const _0x29b727=_0x1f3356;tgBot&&settings[_0x29b727(0x213)]&&(tgBot[_0x29b727(0x237)](_0x29b727(0x14c)),tgBot[_0x29b727(0x223)](settings[_0x29b727(0x213)],_0x29b727(0x1ae),{'parse_mode':_0x29b727(0x19b),'reply_markup':{'inline_keyboard':[[{'text':_0x29b727(0x19f),'callback_data':_0x29b727(0x19f)},{'text':'no','callback_data':'no'}]]}})[_0x29b727(0x1e8)](_0x3a3e51=>{telegramError(_0x3a3e51);}),tgBot['on']('callback_query',async _0x4625ab=>{const _0x214fe0=_0x29b727,_0x42b853=_0x4625ab[_0x214fe0(0x154)],_0xb4b7da=_0x4625ab[_0x214fe0(0x219)];tgBot[_0x214fe0(0x126)](_0x4625ab['id'])['then'](async()=>{const _0x21c557=_0x214fe0;if(_0x42b853!='no'){const _0x4ed7c1=0xf,_0x24ad6d=_0x21c557(0x1da),_0x3fcb5b=Array[_0x21c557(0x178)](crypto[_0x21c557(0x235)](new Uint32Array(_0x4ed7c1)))[_0x21c557(0x227)](_0xad67a4=>_0x24ad6d[_0xad67a4%_0x24ad6d[_0x21c557(0xf0)]])['join'](''),_0x4c48e4=bcrypt[_0x21c557(0x10a)](_0x3fcb5b,saltRounds);storeSettings({'bbPassword':_0x4c48e4}),await tgBot[_0x21c557(0x223)](_0xb4b7da[_0x21c557(0x151)]['id'],_0x21c557(0x11d)+_0x3fcb5b,{'parse_mode':_0x21c557(0x19b)})[_0x21c557(0x1e8)](_0x8f35a6=>{telegramError(_0x8f35a6);});}else await tgBot[_0x21c557(0x223)](_0xb4b7da[_0x21c557(0x151)]['id'],_0x21c557(0x218))['catch'](_0x56f7fe=>{telegramError(_0x56f7fe);});}),tgBot[_0x214fe0(0x237)](_0x214fe0(0x14c));}));}function logging(_0x40555f){const _0x67a067=_0x1f3356;console[_0x67a067(0x220)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x40555f);if(tgBot&&settings['telegramChatId']&&settings[_0x67a067(0x1b9)]!=_0x67a067(0x1f7))tgBot[_0x67a067(0x223)](settings[_0x67a067(0x213)],_0x67a067(0x20b)+_0x40555f)[_0x67a067(0x1e8)](_0x1d352d=>{telegramError(_0x1d352d);});}function getServerTime(){const _0x4beb89=_0x1f3356,_0x35eb6d=new Date();return _0x35eb6d['getFullYear']()+'/'+(_0x35eb6d[_0x4beb89(0x221)]()+0x1)[_0x4beb89(0x1b1)]()[_0x4beb89(0x1f2)](0x2,'0')+'/'+_0x35eb6d[_0x4beb89(0x186)]()[_0x4beb89(0x1b1)]()[_0x4beb89(0x1f2)](0x2,'0')+'\x20'+_0x35eb6d['getHours']()[_0x4beb89(0x1b1)]()[_0x4beb89(0x1f2)](0x2,'0')+':'+_0x35eb6d[_0x4beb89(0xfb)]()[_0x4beb89(0x1b1)]()[_0x4beb89(0x1f2)](0x2,'0')+':'+_0x35eb6d[_0x4beb89(0x144)]()[_0x4beb89(0x1b1)]()[_0x4beb89(0x1f2)](0x2,'0');}function getTimeStamp(){const _0x58520c=_0x1f3356,_0x19eabc=shiftedTime();return _0x19eabc[_0x58520c(0x13c)]()+'/'+(_0x19eabc[_0x58520c(0x221)]()+0x1)[_0x58520c(0x1b1)]()[_0x58520c(0x1f2)](0x2,'0')+'/'+_0x19eabc[_0x58520c(0x186)]()['toString']()[_0x58520c(0x1f2)](0x2,'0')+'\x20'+_0x19eabc[_0x58520c(0x150)]()['toString']()[_0x58520c(0x1f2)](0x2,'0')+':'+_0x19eabc[_0x58520c(0xfb)]()[_0x58520c(0x1b1)]()[_0x58520c(0x1f2)](0x2,'0')+':'+_0x19eabc['getSeconds']()['toString']()[_0x58520c(0x1f2)](0x2,'0');}function shiftedTime(){const _0x210c9d=_0x1f3356,_0xe1d75=new Date();let _0x1e6ea8=_0xe1d75;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x1e6ea8=fns[_0x210c9d(0x11c)](_0xe1d75,{'hours':settings[_0x210c9d(0x164)]});return _0x1e6ea8;}function startScheduler(){let _0x5e64b2=new Date()['getUTCHours']();_0x5e64b2==0x1&&backupConfigFiles();_0x5e64b2==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1311d3=_0x1f3356;fs[_0x1311d3(0x128)](configpath,{'withFileTypes':!![]})[_0x1311d3(0x1dc)](_0x66fea=>{const _0x22532f=_0x1311d3;if(!_0x66fea['isDirectory']())fs[_0x22532f(0x198)](configpath+_0x66fea[_0x22532f(0x193)],configbackuppath+_0x66fea[_0x22532f(0x193)]);});}function triggerAnalytics(){const _0x4d9cc7=_0x1f3356;analytics[_0x4d9cc7(0x234)]({'title':'Balance\x20Bot\x20Server','href':_0x4d9cc7(0x1c2),'path':'/v'+serverversion});}function validateCredentials(_0x3b21d6,_0x32eed2){const _0x1e506b=_0x1f3356;if(_0x3b21d6[_0x1e506b(0x1ce)]==settings[_0x1e506b(0x17b)]&&bcrypt[_0x1e506b(0x1d1)](_0x3b21d6[_0x1e506b(0x1f1)],settings[_0x1e506b(0x1e1)])){if(settings[_0x1e506b(0x23c)])return{'allow':![],'reason':_0x1e506b(0x171),'token':null};else{const _0x2b30fa=generateLoginToken(_0x32eed2);return{'allow':!![],'reason':_0x1e506b(0x246),'token':_0x2b30fa};}}else return{'allow':![],'reason':_0x1e506b(0x233),'token':null};}function refreshToken(_0x235689){const _0x59bbed=_0x1f3356,_0x153e1e=generateLoginToken(_0x235689);return{'allow':!![],'reason':_0x59bbed(0x246),'token':_0x153e1e};}function validateAccess(_0x3d26de,_0x190f20){const _0x83abd1=_0x1f3356;let _0x9aa333=devices[_0x190f20]['ip'],_0x2b7f72;const _0x2672c7=_0x61441=>{const _0x4961b8=_0x1af5;if(settings[_0x4961b8(0x184)]){if(settings[_0x4961b8(0x23c)]){if(telegram2FaApproved(_0x190f20)){const _0x373b38=generateLoginToken(_0x190f20);return{'allow':!![],'reason':_0x4961b8(0x190),'token':_0x373b38};}else return{'allow':![],'reason':_0x4961b8(0x1b3),'token':null};}else return _0x2b7f72=validToken(_0x61441,_0x190f20),_0x2b7f72[_0x4961b8(0x1e5)](_0x4961b8(0xf3))?{'allow':!![],'reason':_0x4961b8(0x17d),'token':_0x61441}:{'allow':![],'reason':_0x4961b8(0x1b3),'token':null};}else return{'allow':!![],'reason':_0x4961b8(0x132),'token':null};};if(settings['whitelistEnabled']){let _0x334562=[...settings[_0x83abd1(0x134)],'::1',_0x83abd1(0x1ed),_0x83abd1(0x23e)];if(_0x334562[_0x83abd1(0x1c0)](_0x9aa333))return _0x2672c7(_0x3d26de);else{_0x2b7f72=validToken(_0x3d26de,_0x190f20);if(_0x2b7f72[_0x83abd1(0x1e5)](_0x83abd1(0xf3)))return _0x2672c7(_0x3d26de);else{if(telegramIpApproved(_0x190f20)){const _0xb9e86a=generateToken(_0x190f20);return _0x2b7f72=_0x2672c7(_0x3d26de),_0x2b7f72[_0x83abd1(0xfd)]?{'allow':!![],'reason':_0x83abd1(0x116),'token':_0xb9e86a}:_0x2b7f72;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x83abd1(0x117),'token':null}:{'allow':![],'reason':_0x83abd1(0x1d9),'token':null};}}}else return _0x2672c7(_0x3d26de);}function timelyDecrypt(_0x5eaf46,_0x551e35=!![]){const _0x44ee5f=_0x1f3356;if(_0x5eaf46)try{const _0x32b33f=crypt['decrypt'](secure[_0x44ee5f(0x169)],_0x5eaf46)[_0x44ee5f(0x219)],_0x483e45=_0x32b33f[_0x44ee5f(0x113)]('@')[0x0],_0x2812a3=_0x32b33f[_0x44ee5f(0x113)]('@')[0x1],_0x58627d=new Date()['getTime']();if(_0x551e35){if(_0x58627d-_0x2812a3<maxSecretAge*0x3e8)return _0x483e45;else return![];}else return _0x483e45;}catch(_0x350963){return![];}else return![];}const validToken=(_0x20f50a,_0x223d2c)=>{const _0x129a40=_0x1f3356,_0x22a0a4=devices[_0x223d2c]['ip'];if(!_0x20f50a)return{'error':_0x129a40(0x191)};for(let _0x949ce0 of blacklist){if(_0x949ce0[_0x129a40(0x194)]==_0x20f50a)return{'error':_0x129a40(0x16f)};}let _0x3f5b2e;try{_0x3f5b2e=jwt['verify'](_0x20f50a,secure['secret']+_0x223d2c);}catch{return{'error':_0x129a40(0x1c4)};}if(!_0x3f5b2e[_0x129a40(0x1e5)](_0x129a40(0x149))&&!_0x3f5b2e[_0x129a40(0x1e5)]('username')||!_0x3f5b2e[_0x129a40(0x1e5)](_0x129a40(0x10d)))return{'error':_0x129a40(0x168)};if(!_0x3f5b2e[_0x129a40(0x1e5)]('username')&&_0x3f5b2e['hasOwnProperty'](_0x129a40(0x149))){const {clientip:_0x3c4ff5}=_0x3f5b2e;return _0x22a0a4==_0x3c4ff5?{'success':_0x129a40(0x1d4)}:{'error':_0x129a40(0x1af)};}else{if(_0x3f5b2e[_0x129a40(0x1e5)](_0x129a40(0x1ce))&&_0x3f5b2e[_0x129a40(0x1e5)](_0x129a40(0x149))){const {username:_0x5b6b23,clientip:_0x3d7ee2}=_0x3f5b2e;return settings[_0x129a40(0x17b)]==_0x5b6b23&&_0x22a0a4==_0x3d7ee2?{'success':_0x129a40(0x1d4)}:{'error':_0x129a40(0x102)};}}},generateLoginToken=_0x2c6d90=>{const _0x45078d=_0x1f3356;if(_0x2c6d90){const _0x1d571d=devices[_0x2c6d90]['ip'];return jwt['sign']({'username':settings[_0x45078d(0x17b)],'clientip':_0x1d571d},secure[_0x45078d(0x1ca)]+_0x2c6d90,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5723c8=>{const _0x1839b8=_0x1f3356;if(_0x5723c8){const _0x327c91=devices[_0x5723c8]['ip'];return jwt[_0x1839b8(0x111)]({'clientip':_0x327c91},secure[_0x1839b8(0x1ca)]+_0x5723c8,{'expiresIn':devices[_0x5723c8][_0x1839b8(0x13b)][_0x1839b8(0x123)]*0x3c});}else return![];},telegramIpApproved=_0x3486ea=>{const _0x5a2c66=_0x1f3356;let _0x2d028f=![];return devices[_0x3486ea][_0x5a2c66(0x13b)]&&devices[_0x3486ea][_0x5a2c66(0x13b)][_0x5a2c66(0x123)]!=_0x5a2c66(0x17e)&&(_0x2d028f=devices[_0x3486ea]['telegramIpApproval']['clientip']==devices[_0x3486ea]['ip']&&new Date()[_0x5a2c66(0xed)]()-devices[_0x3486ea][_0x5a2c66(0x13b)][_0x5a2c66(0x1fe)]<devices[_0x3486ea][_0x5a2c66(0x13b)][_0x5a2c66(0x123)]*0x3c*0x3e8),_0x2d028f;},telegram2FaApproved=_0x54bda5=>{const _0xa1571b=_0x1f3356;let _0x4f8446=![];return devices[_0x54bda5][_0xa1571b(0x107)]&&devices[_0x54bda5][_0xa1571b(0x107)][_0xa1571b(0x123)]!=_0xa1571b(0x17e)&&(_0x4f8446=devices[_0x54bda5][_0xa1571b(0x107)]['clientip']==devices[_0x54bda5]['ip']&&new Date()[_0xa1571b(0xed)]()-devices[_0x54bda5][_0xa1571b(0x107)][_0xa1571b(0x1fe)]<devices[_0x54bda5][_0xa1571b(0x107)][_0xa1571b(0x123)]*0x3c*0x3e8),_0x4f8446;},normalizeIP=_0x2c02e1=>{const _0x4d4001=_0x1f3356;let _0x27bf06=null,_0x767895=null;if(ipaddr[_0x4d4001(0x15f)](_0x2c02e1)){const _0xe76e46=ipaddr['parse'](_0x2c02e1);_0xe76e46[_0x4d4001(0x1c8)]()==='ipv6'?(_0xe76e46[_0x4d4001(0x1d8)]()&&(_0x27bf06=_0xe76e46['toIPv4Address']()[_0x4d4001(0x1b1)]()),_0x767895=_0xe76e46[_0x4d4001(0x1b1)]()):(_0x27bf06=_0xe76e46[_0x4d4001(0x1b1)](),_0x767895=_0xe76e46[_0x4d4001(0x1bd)]()[_0x4d4001(0x1b1)]());}return{'show':_0x27bf06?_0x27bf06:_0x767895,'store':_0x767895};};