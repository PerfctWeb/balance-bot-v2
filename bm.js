function _0x12e4(_0x52fed9,_0x19553f){const _0x3f2e4e=_0x4da9();return _0x12e4=function(_0x3b2657,_0x3be630){_0x3b2657=_0x3b2657-0xd4;let _0x4da9a9=_0x3f2e4e[_0x3b2657];return _0x4da9a9;},_0x12e4(_0x52fed9,_0x19553f);}const _0x171ce5=_0x12e4;(function(_0x141f8a,_0x363a83){const _0x58bbd9=_0x12e4,_0x4838bd=_0x141f8a();while(!![]){try{const _0xe55d1f=-parseInt(_0x58bbd9(0x208))/0x1*(-parseInt(_0x58bbd9(0xd4))/0x2)+-parseInt(_0x58bbd9(0x148))/0x3*(parseInt(_0x58bbd9(0x274))/0x4)+parseInt(_0x58bbd9(0xf0))/0x5*(parseInt(_0x58bbd9(0x126))/0x6)+parseInt(_0x58bbd9(0x1ac))/0x7+-parseInt(_0x58bbd9(0xde))/0x8+-parseInt(_0x58bbd9(0x212))/0x9*(-parseInt(_0x58bbd9(0x1ef))/0xa)+-parseInt(_0x58bbd9(0xf7))/0xb*(parseInt(_0x58bbd9(0x26f))/0xc);if(_0xe55d1f===_0x363a83)break;else _0x4838bd['push'](_0x4838bd['shift']());}catch(_0x30bf64){_0x4838bd['push'](_0x4838bd['shift']());}}}(_0x4da9,0x6c382));const _0x3be630=function(){let _0x59d376=!![];return function(_0x3a4db4,_0x3e3a6c){const _0x50ba23=_0x59d376?function(){const _0x1bb91f=_0x12e4;if(_0x3e3a6c){const _0x4892c1=_0x3e3a6c[_0x1bb91f(0x131)](_0x3a4db4,arguments);return _0x3e3a6c=null,_0x4892c1;}}:function(){};return _0x59d376=![],_0x50ba23;};}(),_0x3b2657=_0x3be630(this,function(){const _0x57086d=_0x12e4;return _0x3b2657['toString']()[_0x57086d(0x144)]('(((.+)+)+)+$')[_0x57086d(0x129)]()[_0x57086d(0x100)](_0x3b2657)[_0x57086d(0x144)](_0x57086d(0x282));});_0x3b2657();'use strict';process['env'][_0x171ce5(0x275)]=0x1;const childProcess=require(_0x171ce5(0x1f2)),fs=require('fs'),fns=require(_0x171ce5(0x1e8)),low=require(_0x171ce5(0x186)),FileSync=require(_0x171ce5(0x203)),path=require(_0x171ce5(0x247)),crypto=require(_0x171ce5(0x24c)),Crypt=require(_0x171ce5(0x18e))[_0x171ce5(0x1c9)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x171ce5(0x27f)),jwt=require(_0x171ce5(0x1e3)),ipaddr=require(_0x171ce5(0xee)),argv=require(_0x171ce5(0x1a9))(process[_0x171ce5(0x1de)]['slice'](0x2))['argv'],uuidRandom=require(_0x171ce5(0x207)),TelegramBot=require(_0x171ce5(0x27e)),Mixpanel=require('mixpanel'),axios=require(_0x171ce5(0xdc)),{GraphQLClient,gql}=require(_0x171ce5(0x18b)),util=require(_0x171ce5(0x25a)),fileUpload=require(_0x171ce5(0x13d)),PORT=argv[_0x171ce5(0x1a1)]||_0x171ce5(0x1e5),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x171ce5(0x262)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x171ce5(0x133)),process[_0x171ce5(0x21e)](0x1));const HOST=argv['host']||null,userID=argv['user']||'';let bbpath=_0x171ce5(0x21b),bbpath2='';const botfile='bot.js',configfile=_0x171ce5(0x1eb),settingsfile=_0x171ce5(0x22a),securefile=_0x171ce5(0xf4);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x171ce5(0x23c)+userID+'/':bbpath+_0x171ce5(0x23c),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x171ce5(0x191)+userID+'/':bbpath+_0x171ce5(0x191),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x171ce5(0x179)](logspath+_0x171ce5(0x1a0),{'flags':'a'}),temppath=userID?bbpath+_0x171ce5(0x1c4)+userID+'/':bbpath+_0x171ce5(0x1c4);!fs[_0x171ce5(0x1a6)](configpath)&&fs[_0x171ce5(0x1e1)](configpath);!fs[_0x171ce5(0x1a6)](configbackuppath)&&fs[_0x171ce5(0x1e1)](configbackuppath);function _0x4da9(){const _0x54580a=['/upload-backup','stop','login\x20not\x20required','Unauthorized\x20login\x20attempt\x20(timeout)','bots','whitelistEnabled','stopPolling','notification','parse','restart','No\x20bots\x20running\x20right\x20now','lowdb','index.html','hashSync','0.0.0','<b>Balance\x20Bot\x20Status:</b>\x0a','graphql-request','1000','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','hybrid-crypto-js','/help\x20-\x20show\x20available\x20commands\x0a','telegramEvents','logs/','/:bot/support','accept','Unauthorized\x20attempt\x20to\x20store\x20configuration','latestversion',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','updatebotmanager','15\x20min','/:bot/history','loginRequired','userid','\x20mode','join','removeAllListeners','/output-000.log','port','Server','getDate','exp','answerCallbackQuery','existsSync','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','f2aRequired','yargs/yargs','generateKeyPairAsync','allow','5423439kUgmmK','express','Notifications\x20disabled\x0a','getHours','temporaryAccessAllowed','disabled','alias','2FA\x20login\x20token\x20generated','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','remoteAddress','readdirSync','number','readFileSync','get','token','*$1*','bbvNew','value','emitHistory','all','tkn','catch','compareSync','30\x20min','temp/','ipc','Notifications\x20enabled','inherit','-----------------------------------------------------------------------------------','Crypt','store','sendFile','simple','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','files','Ok,\x20will\x20send\x20order\x20notifications\x20only','</b>\x20?','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','confirm-message','/names\x20-\x20show\x20bot\x20names\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Orders','then','socket.io','\x20>\x20','No\x20authentication\x20token','telegram2FaApproval','idling\x20bot\x20\x20\x20|\x20Bot\x20','toggleBotMode','cloneDeep','argv','assign','socket','mkdirSync','telegram','jsonwebtoken','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','3000','Markdown','lastmsgtelegram','date-fns','temporary\x20token\x20generated','login\x20token\x20generated','bb-config.json','full','access','All\x20bots\x20running\x20right\x20now','20pJSavQ','map','add','child_process','stopped','binary','-performance.json','getStartingBalances','Bot\x20Mgr\x20>\x20','yes','temporary\x20access\x20timeout','starting\x20new\x20bot\x20|\x20Bot\x20','stringify','disabled\x20Bot\x20','/off\x20-\x20stop\x20bot(s)\x0a','sendPortfolioTelegram','add-bot','args','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','lowdb/adapters/FileSync','Bot\x20','find','/update\x20-\x20update\x20Balance\x20Bot\x0a','uuid-random','206808NDeqKw','Invalid\x20IP\x20address','output-000.log','output-003.log','Invalid\x20authentication\x20token\x20(1)','once','isDirectory','showConfig','randomFillSync','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','3448341fdfwaq','cancel-loading','data','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','store-configuration','Unauthorized\x20attempt\x20to\x20log\x20out','match','invalid\x20credentials','exec','bb/','timestamp','conn','exit','initclient','auto','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','filter','telegramIpApproval','node-zip','File\x20uploaded','temporary\x20access\x20rejected','ipv6','telegramUsername','::1','bb-settings.json','forEach','botID','decrypt','whitelist','version','show','Notifications\x20disabled','Yes','success','Failed\x20to\x20download\x20','title','format','isIPv4MappedAddress','sign','Unauthorized\x20attempt\x20to\x20delete\x20bot','kind','lastmsgemitted','config/','headers','includes','backupfile','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','clientip','hasOwnProperty','remove','5\x20min','Invalid\x20authentication\x20token\x20(2)','bbvReceive','path','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','-results.json','get-messages','bbPassword','crypto','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','callback_query','2FA\x20login\x20required','showname','apiKey','reload','randomBytes','publicKey','/restart\x20-\x20restart\x20bot(s)\x0a','Invalid\x20Telegram\x20token','alerts','copyFileSync','-events.json','util','Unauthorized\x20attempt\x20to\x20get\x20portfolio','/download/:type','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','orders','reason','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','min','log','\x20only\x0a','timeshift','2FA\x20login\x20rejected','starting\x20bot\x20|\x20Bot\x20','unlinkSync','2FA\x20required','toIPv4Address','max','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','status','output-001.log','update-bb','12aJhrfK','enabled','getTime','write','startsWith','16yFFkXB','NTBA_FIX_319','https://api.ipify.org?format=json','kill','Unauthorized\x20attempt\x20to\x20get\x20messages','/:bot','2FA','version.json','HTML',':\x20Bot\x20Mgr\x20>\x20','node-telegram-bot-api','bcryptjs','telegramToken','404\x20Not\x20Found','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20show\x20configuration','8XtoKmT','reject','build','DEFLATE','login','/status\x20-\x20show\x20bot(s)\x20status\x0a','User\x20has\x20been\x20validated','Invalid\x20username\x20or\x20IP\x20address','axios','getFullYear','1706224uIxgJh','sendMessage','6b67f3d61ee94b8f5c80b4affef4c4d9','storeConfiguration','-config.json','bot-','replace','logout','length','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','botname','event','set','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','ipaddr.js','/:bot/coins','185DthRDp','/disable\x20-\x20disable\x20notifications\x0a','botmanager','Allow\x20login\x20from\x20IP\x20address\x20<b>','bb-secure.json','push','file','12603503VZkhON','function','Notifications\x20types:\x20','\x20to\x20','delete-bot','padStart','sortBy','build2','Starting\x20Balance\x20Bot\x20update','constructor','login\x20required','blacklist','/enable\x20-\x20enable\x20notifications\x0a','deleted\x20Bot\x20','order','chat','message','hex','bot','any','messages','headless','expiry','get-portfolio','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','telegrammsg','Unauthorized\x20attempt\x20to\x20download\x20','auth','restarting\x20Bot\x20','started','mode','telegramEnabled','cancelLoading','getPortfolio','request','error','secret','All\x20bots','defaults','Unauthorized\x20attempt\x20to\x20confirm\x20message','Login\x20accepted','\x20(1)','emit','keys','Access\x20enabled\x20for\x20','/on\x20-\x20start\x20bot(s)\x0a','Alerts','34812uyKWWA','pidRefreshToken','Notifications\x20enabled\x0a','toString','handshake','Ok,\x20will\x20send\x20alert\x20notifications\x20only','.zip','store-settings','live','SIGINT','type','apply','server',',\x20must\x20be\x20a\x204\x20digit\x20number','privateKey','output-002.log','Restoring\x20bot(s)\x20from\x20backup','connected','$1_$2_$3','Your\x20installation\x20is\x20already\x20up\x20to\x20date','onText','127.0.0.1','secure','express-fileupload','manual','rmSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','bbUsername','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','************','search','update-bot','from','Unauthorized\x20attempt\x20to\x20delete\x20alerts','585498ndrxTx','test','\x20minutes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','username','_data','params','getMinutes','storeHeadless','running','Restore\x20process\x20aborted','toIPv4MappedAddress','show-config','writeFileSync','\x20|\x20','listen','Unauthorized\x20attempt\x20to\x20update\x20bot','getUTCHours','static','pidExpireLogin','warning','delete-alerts','toggle-bot-mode','sort','***','Unauthorized\x20attempt\x20to\x20add\x20bot','polling_error','settings','send','size','new','login\x20token\x20valid','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','disconnect','Temporary\x20access\x20rejected','getSeconds','new-disabled','reset-password','Login\x20rejected','SIGTERM','split','use','removeListener','uuid','access\x20timeout','telegramChatId','name','settings.','createWriteStream','/:bot/configuration'];_0x4da9=function(){return _0x54580a;};return _0x4da9();}!fs[_0x171ce5(0x1a6)](logspath)&&fs[_0x171ce5(0x1e1)](logspath);!fs[_0x171ce5(0x1a6)](zippath)&&fs[_0x171ce5(0x1e1)](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x171ce5(0x272)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x171ce5(0x11d)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x171ce5(0x189)}})[_0x171ce5(0x272)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x171ce5(0x11d)]({'secure':{},'blacklist':[]})[_0x171ce5(0x272)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x171ce5(0xe0),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x171ce5(0x280)]&&settings[_0x171ce5(0x280)]!=''&&settings[_0x171ce5(0x228)]&&settings[_0x171ce5(0x228)]!='')initTelegram();const logger={'screen':_0x43adb2=>{console['log'](_0x43adb2);},'simple':_0x5a1cd0=>{const _0x4d0aa7=_0x171ce5;console[_0x4d0aa7(0x262)](_0x5a1cd0),loggerfile['write'](util[_0x4d0aa7(0x236)](_0x5a1cd0)+'\x0a');},'full':async _0x6231=>{const _0x138710=_0x171ce5,_0x18c050=getTimeStamp()+_0x138710(0x27d)+_0x6231;console[_0x138710(0x262)](_0x18c050),loggerfile[_0x138710(0x272)](util[_0x138710(0x236)](_0x18c050)+'\x0a');if(tgBot&&settings[_0x138710(0x176)]&&settings[_0x138710(0x190)]!=_0x138710(0x25e))await tgBot[_0x138710(0xdf)](settings['telegramChatId'],_0x138710(0x1f7)+_0x6231)['catch'](_0x2e277c=>{telegramError(_0x2e277c);});}};process['on']('uncaughtException',function(_0xbd9fe9){const _0x2d5f35=_0x171ce5;logger[_0x2d5f35(0x1cc)](_0xbd9fe9);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x171ce5(0x27b))[_0x171ce5(0x22f)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x171ce5(0x1ad)),app=express(),http=require('http')['createServer'](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x171ce5(0x1b9)](_0x171ce5(0x25c),async(_0x315dfe,_0x36e48e)=>{const _0x457d4d=_0x171ce5,_0x51255d=_0x315dfe[_0x457d4d(0x14e)]['type'],_0x53c6e8=getClientsWithBotID(_0x457d4d(0xf2)),_0x16aa16=_0x315dfe[_0x457d4d(0x23d)][_0x457d4d(0x174)],_0x2efe8c=timelyDecrypt(_0x16aa16,![]),_0x18704b=_0x53c6e8[_0x457d4d(0x205)](_0x2a6e5d=>_0x2a6e5d[_0x457d4d(0x174)]==_0x2efe8c);if(_0x18704b){const _0x167177=normalizeIP(_0x315dfe[_0x457d4d(0x1e0)]['remoteAddress'])[_0x457d4d(0x1ca)],_0x165cd1=_0x315dfe[_0x457d4d(0x23d)]['tkn'];if(validateAccess(_0x165cd1,_0x2efe8c,_0x167177)['allow'])await zipFiles(_0x51255d),_0x36e48e['download'](zippath+(_0x51255d+'.zip'),_0x240859=>{const _0x33a9cf=_0x457d4d;_0x240859&&(logger[_0x33a9cf(0x1ec)](_0x33a9cf(0x234)+_0x51255d),logger[_0x33a9cf(0x1cc)](_0x240859));});else logger['full'](_0x457d4d(0x111)+_0x51255d+_0x457d4d(0x120));}else logger[_0x457d4d(0x1ec)](_0x457d4d(0x111)+_0x51255d+'\x20(2)');}),app['post'](_0x171ce5(0x17b),async(_0x4b8c4d,_0x2648f6)=>{const _0x25b3fd=_0x171ce5,_0x33903b=getClientsWithBotID(_0x25b3fd(0xf2)),_0x597470=_0x4b8c4d[_0x25b3fd(0x23d)][_0x25b3fd(0x174)],_0x1e2f48=timelyDecrypt(_0x597470,![]),_0x5bdf44=_0x33903b[_0x25b3fd(0x205)](_0x125be5=>_0x125be5['uuid']==_0x1e2f48);if(_0x5bdf44){const _0x3c4b21=normalizeIP(_0x4b8c4d[_0x25b3fd(0x1e0)][_0x25b3fd(0x1b5)])[_0x25b3fd(0x1ca)],_0x46307e=_0x4b8c4d[_0x25b3fd(0x23d)][_0x25b3fd(0x1c0)];if(validateAccess(_0x46307e,_0x1e2f48,_0x3c4b21)['allow']){if(_0x4b8c4d[_0x25b3fd(0x1ce)]){const _0x6ea941=_0x4b8c4d['files'][_0x25b3fd(0x23f)];await _0x6ea941['mv'](temppath+_0x6ea941[_0x25b3fd(0x177)]),_0x2648f6[_0x25b3fd(0x164)]({'status':!![],'message':_0x25b3fd(0x225)});const _0x39119b=getBotsWithMode();_0x39119b[_0x25b3fd(0xe6)]>0x0?confirmRestore(temppath,_0x6ea941[_0x25b3fd(0x177)]):unzipFile(temppath,_0x6ea941[_0x25b3fd(0x177)]);}}else logger[_0x25b3fd(0x1ec)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x25b3fd(0x1ec)](_0x25b3fd(0x211));}),app[_0x171ce5(0x172)](express[_0x171ce5(0x15a)](path[_0x171ce5(0x19e)](__dirname,bbpath2,_0x171ce5(0xfe)))),app[_0x171ce5(0x172)](express['static'](path[_0x171ce5(0x19e)](__dirname,bbpath2,_0x171ce5(0xd6)))),app['get']('/',function(_0x355392,_0x4928ac){const _0x4422da=_0x171ce5;_0x4928ac[_0x4422da(0x1cb)](path[_0x4422da(0x19e)](__dirname,bbpath2,_0x4422da(0xfe),_0x4422da(0x187)));}),app[_0x171ce5(0x1b9)](_0x171ce5(0x279),function(_0x3d102c,_0x2d3c82){const _0x4a21f4=_0x171ce5;_0x2d3c82[_0x4a21f4(0x1cb)](path[_0x4a21f4(0x19e)](__dirname,bbpath2,_0x4a21f4(0xd6),'index.html'));}),app[_0x171ce5(0x1b9)]('/:bot/portfolio',(_0x5bb5dc,_0x4eb1cd)=>{const _0xb140df=_0x171ce5;_0x4eb1cd[_0xb140df(0x1cb)](path['join'](__dirname,bbpath2,_0xb140df(0xd6),_0xb140df(0x187)));}),app[_0x171ce5(0x1b9)]('/:bot/performance',(_0x28923e,_0x55b288)=>{const _0x28fb55=_0x171ce5;_0x55b288[_0x28fb55(0x1cb)](path[_0x28fb55(0x19e)](__dirname,bbpath2,_0x28fb55(0xd6),_0x28fb55(0x187)));}),app['get'](_0x171ce5(0xef),(_0x168894,_0x21c0c5)=>{const _0x34dc4a=_0x171ce5;_0x21c0c5[_0x34dc4a(0x1cb)](path['join'](__dirname,bbpath2,_0x34dc4a(0xd6),'index.html'));}),app['get'](_0x171ce5(0x19a),(_0xce1525,_0x16bead)=>{const _0x1b0883=_0x171ce5;_0x16bead[_0x1b0883(0x1cb)](path[_0x1b0883(0x19e)](__dirname,bbpath2,_0x1b0883(0xd6),'index.html'));}),app[_0x171ce5(0x1b9)](_0x171ce5(0x17a),(_0x2d150c,_0x47aace)=>{const _0x26e45e=_0x171ce5;_0x47aace[_0x26e45e(0x1cb)](path['join'](__dirname,bbpath2,_0x26e45e(0xd6),_0x26e45e(0x187)));}),app[_0x171ce5(0x1b9)](_0x171ce5(0x192),(_0x317157,_0x2a0520)=>{const _0x2aa841=_0x171ce5;_0x2a0520[_0x2aa841(0x1cb)](path['join'](__dirname,bbpath2,_0x2aa841(0xd6),_0x2aa841(0x187)));});if(HOST)http[_0x171ce5(0x157)](PORT,HOST);else http[_0x171ce5(0x157)](PORT);const io=require(_0x171ce5(0x1d7))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x38c89a=_0x171ce5;logger[_0x38c89a(0x1cc)](''),logger[_0x38c89a(0x1cc)](_0x38c89a(0x1c8)),await logger[_0x38c89a(0x1ec)](_0x38c89a(0x25d)+PORT),logger[_0x38c89a(0x1cc)](_0x38c89a(0x1c8));if(config[_0x38c89a(0xe6)]!=0x0)for(const _0xacc0a5 of config){if(_0xacc0a5[_0x38c89a(0x26c)]==_0x38c89a(0x270)||_0xacc0a5[_0x38c89a(0x26c)]=='new')await logger[_0x38c89a(0x1ec)](_0x38c89a(0x266)+_0xacc0a5[_0x38c89a(0x22c)]+'\x20|\x20'+_0xacc0a5['botname']),startBot([_0xacc0a5[_0x38c89a(0x22c)],userID],{'cwd':bbpath},function(_0xa34226){const _0x527b5f=_0x38c89a;if(_0xa34226)logger[_0x527b5f(0x1ec)](_0xa34226);});else(_0xacc0a5[_0x38c89a(0x26c)]==_0x38c89a(0x1b1)||_0xacc0a5[_0x38c89a(0x26c)]==_0x38c89a(0x16d))&&await logger['full'](_0x38c89a(0x1db)+_0xacc0a5[_0x38c89a(0x22c)]+_0x38c89a(0x156)+_0xacc0a5[_0x38c89a(0xea)]);}else!newBot&&logger[_0x38c89a(0x1cc)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x38c89a(0x1cc)](_0x38c89a(0x1c8)),logger['simple']('');}function startSocket(){io['on']('connection',_0x54eba=>{const _0x1466fc=_0x12e4;let _0x4ab766,_0x3a6f1c,_0x459f8d,_0x2f1eb5,_0x1a1bb9;const _0x598d97=_0x54eba[_0x1466fc(0x12a)]['headers']['referer'];_0x3a6f1c=_0x598d97[_0x1466fc(0x218)](/bot[0-9]{3}/);if(_0x3a6f1c)_0x459f8d=_0x3a6f1c[0x0][_0x1466fc(0x218)](/[0-9]{3}/);if(_0x459f8d)_0x4ab766=_0x459f8d[0x0];else _0x4ab766=_0x1466fc(0xf2);const _0x2bfc38=_0x54eba['handshake'][_0x1466fc(0x112)]['encryptedUuid'];if(!_0x2bfc38)_0x54eba[_0x1466fc(0x121)](_0x1466fc(0x26c),{'publicKey':secure['publicKey']});else{_0x2f1eb5=timelyDecrypt(_0x2bfc38,![]);if(!_0x2f1eb5)_0x54eba['emit'](_0x1466fc(0x26c),{'publicKey':secure[_0x1466fc(0x254)]});else{_0x1a1bb9=normalizeIP(_0x54eba[_0x1466fc(0x21d)][_0x1466fc(0x1b5)])['store'];if(!devices[_0x2f1eb5])devices[_0x2f1eb5]={'uuid':_0x2f1eb5,'access':{'token':null}};devices[_0x2f1eb5]['ip']=_0x1a1bb9;const _0x4b4546=addClient(_0x54eba['id'],_0x2f1eb5,_0x4ab766);setAccess(_0x4b4546),emitMessages(),_0x54eba['on'](_0x1466fc(0xd8),_0x542dee=>{const _0x211138=_0x1466fc,_0x52d82f=timelyDecrypt(_0x542dee['password']);if(_0x52d82f){_0x542dee={'username':_0x542dee['username'],'password':_0x52d82f},devices[_0x2f1eb5][_0x211138(0x1ed)]=validateCredentials(_0x542dee,_0x2f1eb5);if(devices[_0x2f1eb5][_0x211138(0x1ed)][_0x211138(0x1ab)]==![]&&devices[_0x2f1eb5][_0x211138(0x1ed)]['reason']==_0x211138(0x24f))_0x54eba[_0x211138(0x121)](_0x211138(0x26c),{'access':devices[_0x2f1eb5][_0x211138(0x1ed)]}),loginAccess2FA(_0x2f1eb5,_0x1a1bb9);else{if(devices[_0x2f1eb5][_0x211138(0x1ed)][_0x211138(0x1ab)]==![]&&devices[_0x2f1eb5][_0x211138(0x1ed)][_0x211138(0x25f)]==_0x211138(0x219))_0x54eba[_0x211138(0x121)](_0x211138(0x26c),{'access':devices[_0x2f1eb5][_0x211138(0x1ed)]});else devices[_0x2f1eb5][_0x211138(0x1ed)][_0x211138(0x1ab)]&&devices[_0x2f1eb5][_0x211138(0x1ed)][_0x211138(0x25f)]==_0x211138(0x1ea)&&(getClientsWithUuid(_0x2f1eb5)[_0x211138(0x22b)](_0x2d14d5=>{setAccess(_0x2d14d5);}),setTokenRefresh(_0x2f1eb5),setSessionTimeout(_0x211138(0xd8),_0x2f1eb5));}}else logger[_0x211138(0x1ec)](_0x211138(0x17e));}),_0x54eba['on'](_0x1466fc(0x16e),()=>{resetPassword();}),_0x54eba['on'](_0x1466fc(0x16a),_0x2ac8fe=>{removeClient(_0x54eba['id']);}),_0x4ab766==_0x1466fc(0xf2)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x292f67){const _0x379399=_0x171ce5;if(_0x292f67!=_0x379399(0xf2)&&config['apiKey']!=''){if(pid[_0x292f67])pid[_0x292f67][_0x379399(0x164)]({'function':_0x379399(0x21f),'args':null});}}function reloadBotManager(){const _0x322d00=_0x171ce5;getClientsWithBotID('botmanager')[_0x322d00(0x22b)](_0x1e54b7=>{const _0x101e64=_0x322d00;getSocket(_0x1e54b7['id'])[_0x101e64(0x121)]('status',{'access':{'allow':![],'reason':_0x101e64(0x252),'token':null}});});}function getSocket(_0x36ca14){const _0x2347dd=_0x171ce5;return io['sockets']['sockets'][_0x2347dd(0x1b9)](_0x36ca14);}function setAccess(_0x17c58f){const _0x54b11a=_0x171ce5,_0x1bd08a=getSocket(_0x17c58f['id']),_0x366f9c=_0x17c58f[_0x54b11a(0x174)],_0x48151d=_0x17c58f[_0x54b11a(0x109)];devices[_0x366f9c]['access']=validateAccess(devices[_0x366f9c][_0x54b11a(0x1ed)][_0x54b11a(0x1ba)],_0x366f9c),_0x1bd08a[_0x54b11a(0x19e)](_0x366f9c);if(devices[_0x366f9c][_0x54b11a(0x1ed)]['allow']){_0x1bd08a[_0x54b11a(0x19e)](_0x48151d);if(_0x48151d==_0x54b11a(0xf2))initializeSocketBotManager(_0x1bd08a);else initializeSocketBot(_0x1bd08a);initClient(_0x48151d);}devices[_0x366f9c]['access'][_0x54b11a(0x1ba)]&&devices[_0x366f9c]['access'][_0x54b11a(0x25f)]==_0x54b11a(0x1e9)&&setSessionTimeout(_0x54b11a(0x27a),_0x366f9c),devices[_0x366f9c][_0x54b11a(0x1ed)][_0x54b11a(0x1ba)]&&devices[_0x366f9c][_0x54b11a(0x1ed)][_0x54b11a(0x25f)]==_0x54b11a(0x1b3)&&setSessionTimeout(_0x54b11a(0xd8),_0x366f9c),_0x1bd08a['emit'](_0x54b11a(0x26c),{'status':_0x17c58f[_0x54b11a(0x132)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x366f9c][_0x54b11a(0x1ed)],'externalip':devices[_0x366f9c]['ip'],'publicKey':secure[_0x54b11a(0x254)],'userid':settings[_0x54b11a(0x19c)],'validInstallation':validInstallation}),devices[_0x366f9c][_0x54b11a(0x1ed)][_0x54b11a(0x1ab)]==![]&&devices[_0x366f9c][_0x54b11a(0x1ed)]['reason']==_0x54b11a(0x268)&&temporaryAccess2FA(_0x366f9c,devices[_0x366f9c]['ip']);}function setSessionTimeout(_0x3ba777,_0x27df88){const _0xb1adc9=_0x171ce5;let _0x1be8f3;if(_0x3ba777==_0xb1adc9(0xd8))_0x1be8f3=loginExpiry*0x3c*0x3e8;else _0x1be8f3=devices[_0x27df88][_0xb1adc9(0x223)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x27df88][_0xb1adc9(0x223)]['timestamp']);if(devices[_0x27df88]['pidExpireLogin'])clearTimeout(devices[_0x27df88][_0xb1adc9(0x15b)]);devices[_0x27df88][_0xb1adc9(0x15b)]=setTimeout(()=>{const _0x153588=_0xb1adc9;if(devices[_0x27df88][_0x153588(0x127)])clearTimeout(devices[_0x27df88]['pidRefreshToken']);removeSocketListeners(_0x27df88),addBlacklist(_0x27df88),devices[_0x27df88][_0x153588(0x223)]=null,devices[_0x27df88][_0x153588(0x1da)]=null,devices[_0x27df88]['access']['token']=null,devices[_0x27df88]['access']=validateAccess(devices[_0x27df88][_0x153588(0x1ed)]['token'],_0x27df88),!(devices[_0x27df88][_0x153588(0x1ed)][_0x153588(0x1ab)]&&devices[_0x27df88][_0x153588(0x1ed)][_0x153588(0x25f)]==_0x153588(0x17d))&&(_0x3ba777==_0x153588(0xd8)?io['to'](_0x27df88)[_0x153588(0x121)](_0x153588(0x26c),{'access':{'allow':![],'reason':_0x153588(0x175),'token':null}}):io['to'](_0x27df88)['emit'](_0x153588(0x26c),{'access':{'allow':![],'reason':_0x153588(0x1f9),'token':null}})),devices[_0x27df88][_0x153588(0x1ed)][_0x153588(0x1ba)]=null;},_0x1be8f3);}function setTokenRefresh(_0xf471fc){const _0x16c922=_0x171ce5;if(devices[_0xf471fc][_0x16c922(0x127)])clearTimeout(devices[_0xf471fc]['pidRefreshToken']);devices[_0xf471fc][_0x16c922(0x127)]=setTimeout(()=>{const _0x3f531a=_0x16c922;getClientsWithUuid(_0xf471fc)[_0x3f531a(0xe6)]!=0x0?(devices[_0xf471fc][_0x3f531a(0x1ed)]=refreshToken(_0xf471fc),io['to'](_0xf471fc)[_0x3f531a(0x121)]('status',{'status':_0x3f531a(0x137),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xf471fc][_0x3f531a(0x1ed)],'externalip':devices[_0xf471fc]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xf471fc)):clearTimeout(devices[_0xf471fc]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1c8658){const _0x2eca38=_0x171ce5,_0x3e4b8c=getClient(_0x1c8658['id'])[_0x2eca38(0x174)];_0x1c8658[_0x2eca38(0x121)](_0x2eca38(0x17f),config),_0x1c8658[_0x2eca38(0x121)](_0x2eca38(0x163),cleanSettings()),_0x1c8658['on'](_0x2eca38(0x1ff),_0x2ff142=>{const _0x4aacd8=_0x2eca38;if(validateAccess(_0x2ff142,_0x3e4b8c)[_0x4aacd8(0x1ab)])addBot();else logger[_0x4aacd8(0x1ec)](_0x4aacd8(0x161));}),_0x1c8658['on'](_0x2eca38(0x145),(_0x13a0c9,_0x4afe1a)=>{const _0x5182b1=_0x2eca38;if(validateAccess(_0x4afe1a,_0x3e4b8c)[_0x5182b1(0x1ab)])toggleBot(_0x13a0c9['botID'],_0x13a0c9[_0x5182b1(0x26c)],_0x13a0c9[_0x5182b1(0x12e)]);else logger[_0x5182b1(0x1ec)](_0x5182b1(0x158));}),_0x1c8658['on'](_0x2eca38(0x15e),(_0x1b8e73,_0x16d39c)=>{const _0x36b235=_0x2eca38;if(validateAccess(_0x16d39c,_0x3e4b8c)['allow'])toggleBotMode(_0x1b8e73);else logger[_0x36b235(0x1ec)](_0x36b235(0x158));}),_0x1c8658['on'](_0x2eca38(0xfb),(_0x13ca04,_0x9807b5)=>{const _0x48b105=_0x2eca38;if(validateAccess(_0x9807b5,_0x3e4b8c)[_0x48b105(0x1ab)])deleteBot(_0x13ca04);else logger[_0x48b105(0x1ec)](_0x48b105(0x239));}),_0x1c8658['on'](_0x2eca38(0x12d),(_0x148085,_0x8b3d5a)=>{if(validateAccess(_0x8b3d5a,_0x3e4b8c)['allow'])storeSettings(_0x148085,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1c8658['on']('update-bb',_0x1c8de5=>{const _0x17899b=_0x2eca38;if(validateAccess(_0x1c8de5,_0x3e4b8c)[_0x17899b(0x1ab)])updateBB();else logger['full'](_0x17899b(0x202));}),_0x1c8658['on'](_0x2eca38(0x24a),_0x2df98b=>{const _0x6ab9f8=_0x2eca38;if(validateAccess(_0x2df98b,_0x3e4b8c)[_0x6ab9f8(0x1ab)])getMessages();else logger[_0x6ab9f8(0x1ec)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1c8658['on'](_0x2eca38(0x1d2),(_0x1faaf3,_0xe3f1c4)=>{const _0x46ad71=_0x2eca38;if(validateAccess(_0xe3f1c4,_0x3e4b8c)[_0x46ad71(0x1ab)])confirmMessage(_0x1faaf3);else logger[_0x46ad71(0x1ec)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1c8658['on'](_0x2eca38(0xe5),_0x309315=>{const _0x3435fa=_0x2eca38;if(validateAccess(_0x309315,_0x3e4b8c)[_0x3435fa(0x1ab)]){if(devices[_0x3e4b8c][_0x3435fa(0x127)])clearTimeout(devices[_0x3e4b8c][_0x3435fa(0x127)]);if(devices[_0x3e4b8c][_0x3435fa(0x15b)])clearTimeout(devices[_0x3e4b8c]['pidExpireLogin']);removeSocketListeners(getClient(_0x1c8658['id'])[_0x3435fa(0x174)]),addBlacklist(_0x3e4b8c),devices[_0x3e4b8c]['telegramIpApproval']=null,devices[_0x3e4b8c]['telegram2FaApproval']=null,devices[_0x3e4b8c][_0x3435fa(0x1ed)][_0x3435fa(0x1ba)]=null,io['to'](getClient(_0x1c8658['id'])[_0x3435fa(0x174)])['emit'](_0x3435fa(0x26c),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x3435fa(0x1ec)](_0x3435fa(0x217));});}function initializeSocketBot(_0x5ce518){const _0x4ff525=_0x171ce5,_0x409935=getClient(_0x5ce518['id'])[_0x4ff525(0x109)],_0x3cbf92=getClient(_0x5ce518['id'])[_0x4ff525(0x174)];_0x5ce518['on']('get-logs',(_0x40fbff,_0x2319aa)=>{const _0x43a0ea=_0x4ff525;if(validateAccess(_0x2319aa,_0x3cbf92)[_0x43a0ea(0x1ab)]){if(pid[_0x409935])pid[_0x409935]['send']({'function':_0x43a0ea(0x1be),'args':_0x40fbff});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x5ce518['on'](_0x4ff525(0x15d),(_0x297510,_0x570ccd)=>{const _0x58ab1d=_0x4ff525;if(validateAccess(_0x570ccd,_0x3cbf92)[_0x58ab1d(0x1ab)]){if(pid[_0x409935])pid[_0x409935][_0x58ab1d(0x164)]({'function':'deleteHistoryAlerts','args':_0x297510});}else logger[_0x58ab1d(0x1ec)](_0x58ab1d(0x147));}),_0x5ce518['on'](_0x4ff525(0x10e),(_0x1835fa,_0x1e8071)=>{const _0x4b8423=_0x4ff525;if(validateAccess(_0x1e8071,_0x3cbf92)['allow']){if(pid[_0x409935])pid[_0x409935][_0x4b8423(0x164)]({'function':_0x4b8423(0x118),'args':_0x1835fa});}else logger[_0x4b8423(0x1ec)](_0x4b8423(0x25b));}),_0x5ce518['on'](_0x4ff525(0x216),(_0x350303,_0x4d8bb4)=>{const _0x33a2aa=_0x4ff525;if(validateAccess(_0x4d8bb4,_0x3cbf92)[_0x33a2aa(0x1ab)]){if(pid[_0x409935])pid[_0x409935]['send']({'function':_0x33a2aa(0xe1),'args':_0x350303});}else logger[_0x33a2aa(0x1ec)](_0x33a2aa(0x194));}),_0x5ce518['on']('store-headless',(_0x79e073,_0x51ae31)=>{const _0x282dc1=_0x4ff525;if(validateAccess(_0x51ae31,_0x3cbf92)[_0x282dc1(0x1ab)]){if(pid[_0x409935])pid[_0x409935]['send']({'function':_0x282dc1(0x150),'args':_0x79e073});}else logger[_0x282dc1(0x1ec)](_0x282dc1(0xe9));}),_0x5ce518['on']('get-starting-balances',_0x52b1ef=>{const _0x37458f=_0x4ff525;if(validateAccess(_0x52b1ef,_0x3cbf92)[_0x37458f(0x1ab)]){if(pid[_0x409935])pid[_0x409935][_0x37458f(0x164)]({'function':_0x37458f(0x1f6),'args':null});}else logger[_0x37458f(0x1ec)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5ce518['on']('place-order',(_0xd728c4,_0x111791)=>{const _0x4410fb=_0x4ff525;if(validateAccess(_0x111791,_0x3cbf92)['allow']){if(pid[_0x409935])pid[_0x409935]['send']({'function':'placeOrder','args':_0xd728c4});}else logger[_0x4410fb(0x1ec)](_0x4410fb(0x1d4));}),_0x5ce518['on'](_0x4ff525(0x213),_0x28de8b=>{const _0x41a730=_0x4ff525;if(validateAccess(_0x28de8b,_0x3cbf92)[_0x41a730(0x1ab)]){if(pid[_0x409935])pid[_0x409935]['send']({'function':_0x41a730(0x117),'args':null});}else logger[_0x41a730(0x1ec)](_0x41a730(0x140));}),_0x5ce518['on'](_0x4ff525(0x154),_0x54fb46=>{const _0x3977a2=_0x4ff525;if(validateAccess(_0x54fb46,_0x3cbf92)[_0x3977a2(0x1ab)]){if(pid[_0x409935])pid[_0x409935][_0x3977a2(0x164)]({'function':_0x3977a2(0x20f),'args':null});}else logger['full'](_0x3977a2(0x283));}),_0x5ce518['on'](_0x4ff525(0x26e),_0x6f504c=>{const _0x35db9b=_0x4ff525;if(validateAccess(_0x6f504c,_0x3cbf92)['allow'])updateBB();else logger[_0x35db9b(0x1ec)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x5ce518['on'](_0x4ff525(0x24a),_0xf9df88=>{const _0x2d8155=_0x4ff525;if(validateAccess(_0xf9df88,_0x3cbf92)[_0x2d8155(0x1ab)])getMessages();else logger[_0x2d8155(0x1ec)](_0x2d8155(0x278));}),_0x5ce518['on'](_0x4ff525(0x1d2),(_0x8e605,_0x5f4ed1)=>{const _0x6fb874=_0x4ff525;if(validateAccess(_0x5f4ed1,_0x3cbf92)['allow'])confirmMessage(_0x8e605);else logger[_0x6fb874(0x1ec)](_0x6fb874(0x11e));}),_0x5ce518['on'](_0x4ff525(0xe5),_0x361760=>{const _0x202182=_0x4ff525;if(validateAccess(_0x361760,_0x3cbf92)['allow']){if(devices[_0x3cbf92][_0x202182(0x127)])clearTimeout(devices[_0x3cbf92][_0x202182(0x127)]);if(devices[_0x3cbf92][_0x202182(0x15b)])clearTimeout(devices[_0x3cbf92][_0x202182(0x15b)]);removeSocketListeners(getClient(_0x5ce518['id'])[_0x202182(0x174)]),addBlacklist(_0x3cbf92),devices[_0x3cbf92][_0x202182(0x223)]=null,devices[_0x3cbf92]['telegram2FaApproval']=null,devices[_0x3cbf92][_0x202182(0x1ed)][_0x202182(0x1ba)]=null,io['to'](getClient(_0x5ce518['id'])[_0x202182(0x174)])[_0x202182(0x121)](_0x202182(0x26c),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x202182(0x1ec)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x372923){const _0xf1e7a4=_0x171ce5;getClientsWithUuid(_0x372923)[_0xf1e7a4(0x22b)](_0x52709b=>{const _0xcec5ab=_0xf1e7a4;getSocket(_0x52709b['id'])[_0xcec5ab(0x19f)]();});}function cleanSettings(){const _0x227391=_0x171ce5;let _0x5df6d4=settings;return settings['telegramToken']&&settings[_0x227391(0x280)]!=''&&(_0x5df6d4={..._0x5df6d4,'telegramToken':_0x227391(0x143)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x5df6d4={..._0x5df6d4,'bbPassword':_0x227391(0x143)}),(settings[_0x227391(0x24b)]&&settings[_0x227391(0x24b)]=='***'||settings[_0x227391(0x280)]&&settings[_0x227391(0x280)]==_0x227391(0x160))&&(_0x5df6d4={..._0x5df6d4,'restored':{'password':settings[_0x227391(0x24b)]==_0x227391(0x160),'telegram':settings['telegramToken']==_0x227391(0x160)}}),_0x5df6d4;}function updateBB(){const _0x503f23=_0x171ce5;installingUpdate=!![],config['forEach'](_0x3cc996=>{restartBot(_0x3cc996['botID']);}),process[_0x503f23(0x164)]({'update':!![]},_0x2085a4=>{});}function startBot(_0x2b860f,_0x21aff0,_0x4a7a3e){const _0x59eecb=_0x171ce5;let _0xbf1444=![];const _0xc0a0e4=_0x2b860f[0x0];_0x21aff0={..._0x21aff0,'stdio':[_0x59eecb(0x1c7),_0x59eecb(0x1c7),_0x59eecb(0x1c7),_0x59eecb(0x1c5)]},pid[_0xc0a0e4]=childProcess['fork'](botfile,_0x2b860f,_0x21aff0),pid[_0xc0a0e4]['on']('message',_0x704313=>{const _0x1c6e4=_0x59eecb;switch(Object['keys'](_0x704313)[0x0]){case _0x1c6e4(0xea):updateBotName(_0xc0a0e4,_0x704313[_0x1c6e4(0xea)]);break;case _0x1c6e4(0x198):updateBotManager();break;case _0x1c6e4(0x26c):updateStatus(_0xc0a0e4,_0x704313['status']);break;case'live':updateLive(_0xc0a0e4,_0x704313[_0x1c6e4(0x12e)]);break;case _0x1c6e4(0x114):updateLive(_0xc0a0e4,_0x704313[_0x1c6e4(0x114)]),io['to'](_0xc0a0e4)[_0x1c6e4(0x121)](_0x1c6e4(0x26c),{'access':{'allow':![],'reason':_0x1c6e4(0x252),'token':null}});break;case _0x1c6e4(0x17c):_0x704313['stop']==_0x1c6e4(0x184)&&restartBot(_0xc0a0e4);_0x704313[_0x1c6e4(0x17c)]=='kill'&&toggleBot(_0xc0a0e4,_0x1c6e4(0x1b1),_0x1c6e4(0x1f3));break;case _0x1c6e4(0x1e2):sendTelegram(_0xc0a0e4,_0x704313[_0x1c6e4(0x1e2)]);break;case _0x1c6e4(0x110):sendTelegramMsg(_0x704313[_0x1c6e4(0x110)]);break;case _0x1c6e4(0xf8):io['to'](_0xc0a0e4)[_0x1c6e4(0x121)](_0x704313[_0x1c6e4(0xf8)],_0x704313[_0x1c6e4(0x200)]);break;}}),pid[_0xc0a0e4]['on']('error',function(_0x17a5af){if(_0xbf1444)return;_0xbf1444=!![],_0x4a7a3e(_0x17a5af);}),pid[_0xc0a0e4]['on'](_0x59eecb(0x21e),async function(_0x1dcc0f){const _0x1933d4=_0x59eecb;if(installingUpdate)return;if(_0xbf1444)return;_0xbf1444=!![],_0x4a7a3e(null);const _0x2af05d=dbConfig['get'](_0x1933d4(0x17f))[_0x1933d4(0x205)]({'botID':_0xc0a0e4})[_0x1933d4(0x1bd)]();_0x2af05d&&(_0x2af05d[_0x1933d4(0x26c)]==_0x1933d4(0x270)||_0x2af05d[_0x1933d4(0x26c)]==_0x1933d4(0x166))&&(await sleep(0x3e8),updateLive(_0xc0a0e4,'stopped'),logger[_0x1933d4(0x1ec)](_0x1933d4(0x113)+_0xc0a0e4),startBot([_0xc0a0e4,userID],{'cwd':bbpath},function(_0x3810b7){const _0xbbf956=_0x1933d4;if(_0x3810b7)logger[_0xbbf956(0x1ec)](_0x3810b7);}));});}function stopBot(_0x2f93a3){const _0x5dddf7=_0x171ce5;getClientsWithBotID(_0x2f93a3)['forEach'](_0x4ac0b2=>{const _0x2c3c57=_0x12e4;getSocket(_0x4ac0b2['id'])[_0x2c3c57(0x16a)](!![]),removeClient(_0x4ac0b2['id']);}),pid[_0x2f93a3]&&(pid[_0x2f93a3][_0x5dddf7(0x277)](),pid[_0x2f93a3]=null);}function restartBot(_0x4400e9){if(pid[_0x4400e9])pid[_0x4400e9]['kill']();}function addBot(){const _0x1d3c5a=_0x171ce5;let _0x12f262;for(let _0x1be553=0x1;_0x1be553<0x3e9;_0x1be553++){_0x12f262=_0x1be553['toString']()[_0x1d3c5a(0xfc)](0x3,'0');let _0x3b1761=config[_0x1d3c5a(0x205)](_0x2907d5=>_0x2907d5['botID']==_0x12f262);if(!_0x3b1761)break;}if(_0x12f262===_0x1d3c5a(0x18c)){logger[_0x1d3c5a(0x1ec)](_0x1d3c5a(0x240));return;}logger[_0x1d3c5a(0x1ec)](_0x1d3c5a(0x1fa)+_0x12f262),dbConfig[_0x1d3c5a(0x1b9)](_0x1d3c5a(0x17f))['push']({'botID':_0x12f262,'botname':_0x1d3c5a(0x204)+_0x12f262,'status':_0x1d3c5a(0x166),'live':''})[_0x1d3c5a(0x272)](),startBot([_0x12f262,userID],{'cwd':bbpath},function(_0x481b94){const _0x5dba7d=_0x1d3c5a;if(_0x481b94)logger[_0x5dba7d(0x1ec)](_0x481b94);}),config=getConfiguration(),io['to'](_0x1d3c5a(0xf2))['emit'](_0x1d3c5a(0x17f),config);}function deleteBot(_0x46f74c){const _0x32a144=_0x171ce5;getClientsWithBotID(_0x46f74c)[_0x32a144(0x22b)](_0x23dfe7=>{const _0x194c76=_0x32a144;getSocket(_0x23dfe7['id'])[_0x194c76(0x16a)](!![]),removeClient(_0x23dfe7['id']);}),dbConfig[_0x32a144(0x1b9)]('bots')[_0x32a144(0x243)]({'botID':_0x46f74c})['write'](),logger[_0x32a144(0x1ec)](_0x32a144(0x104)+_0x46f74c),stopBot(_0x46f74c);try{if(fs[_0x32a144(0x1a6)](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0xe2))))fs[_0x32a144(0x267)](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0xe2)));if(fs['existsSync'](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0x259))))fs[_0x32a144(0x267)](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0x259)));if(fs['existsSync'](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0x1f5))))fs['unlinkSync'](path[_0x32a144(0x19e)](configpath,'bot-'+_0x46f74c+'-performance.json'));if(fs[_0x32a144(0x1a6)](path[_0x32a144(0x19e)](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0x249))))fs['unlinkSync'](path['join'](configpath,_0x32a144(0xe3)+_0x46f74c+_0x32a144(0x249)));}catch(_0x3d4c1a){if(_0x3d4c1a)logger['full']('error\x20while\x20deleting\x20config\x20files:\x20',_0x3d4c1a);}config=getConfiguration(),io['to'](_0x32a144(0xf2))[_0x32a144(0x121)](_0x32a144(0x17f),config);}function toggleBot(_0x958a10,_0x4df768,_0x4ca0bb){const _0x45bf03=_0x171ce5;dbConfig[_0x45bf03(0x1b9)](_0x45bf03(0x17f))['find']({'botID':_0x958a10})[_0x45bf03(0x1df)]({'status':_0x4df768})[_0x45bf03(0x1df)]({'live':_0x4ca0bb})[_0x45bf03(0x272)]();if(_0x4df768==_0x45bf03(0x270)||_0x4df768==_0x45bf03(0x166))logger[_0x45bf03(0x1ec)]('enabled\x20Bot\x20'+_0x958a10),startBot([_0x958a10,userID],{'cwd':bbpath},function(_0x491545){const _0x535db6=_0x45bf03;if(_0x491545)logger[_0x535db6(0x1ec)](_0x491545);});else(_0x4df768==_0x45bf03(0x1b1)||_0x4df768==_0x45bf03(0x16d))&&(logger[_0x45bf03(0x1ec)](_0x45bf03(0x1fc)+_0x958a10),stopBot(_0x958a10));config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function toggleStatus(_0x53a0dd){const _0x5186e3=_0x171ce5;let _0x38095f=dbConfig[_0x5186e3(0x1b9)](_0x5186e3(0x17f))['find']({'botID':_0x53a0dd})[_0x5186e3(0x1bd)](),_0x4852ae;if(_0x38095f[_0x5186e3(0x26c)]===_0x5186e3(0x270))_0x4852ae=_0x5186e3(0x1b1);else{if(_0x38095f[_0x5186e3(0x26c)]===_0x5186e3(0x166))_0x4852ae=_0x5186e3(0x16d);else{if(_0x38095f[_0x5186e3(0x26c)]===_0x5186e3(0x16d))_0x4852ae=_0x5186e3(0x166);else{if(_0x38095f[_0x5186e3(0x26c)]===_0x5186e3(0x1b1))_0x4852ae='enabled';}}}return _0x4852ae;}function updateStatus(_0x13e723,_0x42639c){const _0x42000d=_0x171ce5;dbConfig[_0x42000d(0x1b9)]('bots')[_0x42000d(0x205)]({'botID':_0x13e723})[_0x42000d(0x1df)]({'status':_0x42639c})[_0x42000d(0x272)](),config=getConfiguration(),io['to']('botmanager')[_0x42000d(0x121)](_0x42000d(0x17f),config);}function updateLive(_0x4d43ce,_0x2acc10){const _0xbc7a5a=_0x171ce5;dbConfig[_0xbc7a5a(0x1b9)](_0xbc7a5a(0x17f))[_0xbc7a5a(0x205)]({'botID':_0x4d43ce})['assign']({'live':_0x2acc10})['write'](),config=getConfiguration(),io['to'](_0xbc7a5a(0xf2))[_0xbc7a5a(0x121)](_0xbc7a5a(0x17f),config);}function updateBotName(_0x228741,_0x52f97f){const _0x5e4667=_0x171ce5;dbConfig[_0x5e4667(0x1b9)](_0x5e4667(0x17f))[_0x5e4667(0x205)]({'botID':_0x228741})[_0x5e4667(0x1df)]({'botname':_0x52f97f})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x5e4667(0x121)](_0x5e4667(0x17f),config);}function updateBotManager(){const _0x177057=_0x171ce5;config=getConfiguration(),io['to'](_0x177057(0xf2))['emit'](_0x177057(0x17f),config);}function toggleBotMode(_0x3e9694){const _0x9ab654=_0x171ce5;if(pid[_0x3e9694])pid[_0x3e9694]['send']({'function':_0x9ab654(0x1dc),'args':null});else{const _0xa29318=configpath+_0x9ab654(0xe3)+_0x3e9694+_0x9ab654(0xe2),_0x3bf8b6=fs['readFileSync'](_0xa29318),_0x1e41eb=JSON[_0x9ab654(0x183)](_0x3bf8b6),_0x3c9dbb=_0x1e41eb['bot'][0x0][_0x9ab654(0x10c)];_0x1e41eb['bot'][0x0][_0x9ab654(0x10c)]=!_0x3c9dbb;const _0x3317de=JSON[_0x9ab654(0x1fb)](_0x1e41eb,null,0x2);fs[_0x9ab654(0x155)](_0xa29318,_0x3317de),config=getConfiguration(),io['to'](_0x9ab654(0xf2))[_0x9ab654(0x121)]('bots',config);}}function telegramError(_0x2e1b04){const _0x47abfd=_0x171ce5;logger[_0x47abfd(0x1cc)](getTimeStamp()+_0x47abfd(0x196));}function validateTelegram(_0x43c341){const _0x2125c4=_0x171ce5;if(_0x43c341['from'][_0x2125c4(0x14c)]!=settings['telegramUsername']&&'@'+_0x43c341[_0x2125c4(0x146)][_0x2125c4(0x14c)]!=settings[_0x2125c4(0x228)])return tgBot[_0x2125c4(0xdf)](_0x43c341[_0x2125c4(0x106)]['id'],_0x2125c4(0x221),{'parse_mode':_0x2125c4(0x27c)})[_0x2125c4(0x1c1)](_0x41e542=>{telegramError(_0x41e542);}),![];return!![];}async function initTelegram(){const _0x4db24d=_0x171ce5;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4db24d(0x280)],{'polling':!![]});let _0x5c5ac4='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5c5ac4+='\x0a',_0x5c5ac4+=_0x4db24d(0x103),_0x5c5ac4+=_0x4db24d(0xf1),_0x5c5ac4+=_0x4db24d(0x26b),_0x5c5ac4+=_0x4db24d(0x255),_0x5c5ac4+=_0x4db24d(0x124),_0x5c5ac4+=_0x4db24d(0x1fd),_0x5c5ac4+=_0x4db24d(0x1d1),_0x5c5ac4+=_0x4db24d(0x1d3),_0x5c5ac4+=_0x4db24d(0xd9),_0x5c5ac4+=_0x4db24d(0x18d),_0x5c5ac4+=_0x4db24d(0x206),_0x5c5ac4+=_0x4db24d(0x18f);let _0x1d0b36=_0x4db24d(0x10f);_0x1d0b36+='\x0a',_0x1d0b36+=_0x5c5ac4,tgBot[_0x4db24d(0x13a)](/\/start/,_0x1f824c=>{const _0x42fa69=_0x4db24d;if(!validateTelegram(_0x1f824c))return;if(settings[_0x42fa69(0x176)]!=_0x1f824c[_0x42fa69(0x106)]['id'])updateSetting('telegramChatId',_0x1f824c[_0x42fa69(0x106)]['id']);updateSetting(_0x42fa69(0x116),!![]),tgBot[_0x42fa69(0xdf)](_0x1f824c[_0x42fa69(0x106)]['id'],_0x1d0b36)[_0x42fa69(0x1c1)](_0x50c514=>{telegramError(_0x50c514);});}),tgBot[_0x4db24d(0x13a)](/\/enable/,_0x565473=>{const _0x559f01=_0x4db24d;if(!validateTelegram(_0x565473))return;if(settings[_0x559f01(0x176)]!=_0x565473[_0x559f01(0x106)]['id'])updateSetting('telegramChatId',_0x565473[_0x559f01(0x106)]['id']);updateSetting(_0x559f01(0x116),!![]),tgBot[_0x559f01(0xdf)](_0x565473['chat']['id'],_0x559f01(0x1c6))['catch'](_0x26f6aa=>{telegramError(_0x26f6aa);});}),tgBot[_0x4db24d(0x13a)](/\/config/,async _0x28d9e0=>{const _0x1b1294=_0x4db24d;if(!validateTelegram(_0x28d9e0))return;tgBot[_0x1b1294(0x173)](_0x1b1294(0x24e)),tgBot[_0x1b1294(0xdf)](_0x28d9e0['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1b1294(0x1d5),'callback_data':_0x1b1294(0x25e)},{'text':_0x1b1294(0x125),'callback_data':_0x1b1294(0x257)},{'text':'All','callback_data':_0x1b1294(0x1bf)}]]}})[_0x1b1294(0x1c1)](_0x2cc18f=>{telegramError(_0x2cc18f);}),tgBot['on'](_0x1b1294(0x24e),async _0x446572=>{const _0x2ed495=_0x1b1294,_0x31ac9e=_0x446572[_0x2ed495(0x214)],_0xcaf4fd=_0x446572['message'];tgBot[_0x2ed495(0x1a5)](_0x446572['id'])['then'](async()=>{const _0x5ae8af=_0x2ed495;_0x31ac9e=='orders'&&(updateSetting(_0x5ae8af(0x190),_0x5ae8af(0x25e)),updateSetting(_0x5ae8af(0x116),!![]),await tgBot[_0x5ae8af(0xdf)](_0xcaf4fd[_0x5ae8af(0x106)]['id'],_0x5ae8af(0x1cf))['catch'](_0x1200c9=>{telegramError(_0x1200c9);}));_0x31ac9e==_0x5ae8af(0x257)&&(updateSetting(_0x5ae8af(0x190),_0x5ae8af(0x257)),updateSetting('telegramEnabled',!![]),await tgBot[_0x5ae8af(0xdf)](_0xcaf4fd[_0x5ae8af(0x106)]['id'],_0x5ae8af(0x12b))['catch'](_0x87ff2c=>{telegramError(_0x87ff2c);}));_0x31ac9e=='all'&&(updateSetting('telegramEvents',_0x5ae8af(0x1bf)),updateSetting(_0x5ae8af(0x116),!![]),await tgBot[_0x5ae8af(0xdf)](_0xcaf4fd['chat']['id'],_0x5ae8af(0xe8))[_0x5ae8af(0x1c1)](_0x3a8982=>{telegramError(_0x3a8982);}));if(!settings['telegramChatId'])tgBot[_0x5ae8af(0xdf)](_0xcaf4fd[_0x5ae8af(0x106)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x5ae8af(0x1c1)](_0x40da59=>{telegramError(_0x40da59);});}),tgBot[_0x2ed495(0x173)](_0x2ed495(0x24e));});}),tgBot[_0x4db24d(0x13a)](/\/status/,_0x566ba2=>{const _0x5b05d6=_0x4db24d;if(!validateTelegram(_0x566ba2))return;const _0x3cbe9e=getBotsWithMode();let _0x36ae1a=_0x5b05d6(0x18a);config[_0x5b05d6(0x22b)](_0x281b97=>{const _0x291848=_0x5b05d6,_0x36cfcb=_0x3cbe9e['find'](_0x403868=>_0x403868[_0x291848(0x22c)]==_0x281b97[_0x291848(0x22c)])['mode'];_0x36ae1a+=_0x291848(0x204)+_0x281b97[_0x291848(0x22c)]+':\x20'+_0x281b97[_0x291848(0x26c)]+'\x20|\x20'+_0x36cfcb+_0x291848(0x156)+_0x281b97[_0x291848(0x12e)]+'\x0a';}),_0x36ae1a+='\x0a',_0x36ae1a+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x36ae1a+=!settings[_0x5b05d6(0x116)]?_0x5b05d6(0x1ae):_0x5b05d6(0x128),_0x36ae1a+=settings[_0x5b05d6(0x116)]?settings[_0x5b05d6(0x190)]==_0x5b05d6(0x1bf)?_0x5b05d6(0x168):_0x5b05d6(0xf9)+settings[_0x5b05d6(0x190)]+_0x5b05d6(0x263):'',tgBot[_0x5b05d6(0xdf)](_0x566ba2[_0x5b05d6(0x106)]['id'],_0x36ae1a,{'parse_mode':'HTML'})[_0x5b05d6(0x1c1)](_0x52ac47=>{telegramError(_0x52ac47);});}),tgBot['onText'](/\/restart/,_0x1f3c94=>{const _0x234222=_0x4db24d;if(!validateTelegram(_0x1f3c94))return;tgBot[_0x234222(0x173)](_0x234222(0x24e));const _0xf4fe5a=getEnabledBots();if(_0xf4fe5a['length']==0x0)tgBot[_0x234222(0xdf)](_0x1f3c94['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x52bac1=>{telegramError(_0x52bac1);});else{if(_0xf4fe5a[_0x234222(0xe6)]>0x1)_0xf4fe5a[_0x234222(0xf5)]({'botID':'all'});let _0x2b9905=[],_0x4e10c5=[];const _0x2eecb4=_0xf4fe5a[_0x234222(0xe6)]%0x4==0x0||_0xf4fe5a[_0x234222(0xe6)]%0x4==0x3||_0xf4fe5a[_0x234222(0xe6)]%0x3==0x1?0x4:0x3;let _0xaec610=0x0;_0xf4fe5a['forEach']((_0x5d3f70,_0x2709d3)=>{const _0x481df4=_0x234222;if(_0x2709d3%_0x2eecb4==0x0)_0x4e10c5=[];_0x4e10c5[_0x481df4(0xf5)]({'text':_0x5d3f70['botID']==_0x481df4(0x1bf)?_0x481df4(0x11c):_0x481df4(0x204)+_0x5d3f70['botID'],'callback_data':_0x5d3f70['botID']}),_0x2709d3%_0x2eecb4==0x0&&(_0x2b9905[_0xaec610]=_0x4e10c5,_0xaec610++);}),tgBot[_0x234222(0xdf)](_0x1f3c94[_0x234222(0x106)]['id'],_0x234222(0x248),{'reply_markup':{'inline_keyboard':_0x2b9905}})[_0x234222(0x1c1)](_0x3d6231=>{telegramError(_0x3d6231);}),tgBot['on'](_0x234222(0x24e),async _0xe832a5=>{const _0x59aeca=_0x234222,_0x505050=_0xe832a5['data'],_0x49fb8f=_0xe832a5[_0x59aeca(0x107)];tgBot[_0x59aeca(0x1a5)](_0xe832a5['id'])[_0x59aeca(0x1d6)](async()=>{const _0x16fce8=_0x59aeca;_0x505050==_0x16fce8(0x1bf)?config[_0x16fce8(0x22b)](_0xbc32fa=>{const _0x28c15c=_0x16fce8;restartBot(_0xbc32fa[_0x28c15c(0x22c)]);}):restartBot(_0x505050);}),tgBot[_0x59aeca(0x173)]('callback_query');});}}),tgBot[_0x4db24d(0x13a)](/\/on/,_0x4a47e9=>{const _0x3b86ac=_0x4db24d;if(!validateTelegram(_0x4a47e9))return;tgBot[_0x3b86ac(0x173)](_0x3b86ac(0x24e));const _0x11e860=getDisabledBots();if(_0x11e860[_0x3b86ac(0xe6)]==0x0)tgBot[_0x3b86ac(0xdf)](_0x4a47e9['chat']['id'],_0x3b86ac(0x1ee))['catch'](_0x140934=>{telegramError(_0x140934);});else{if(_0x11e860[_0x3b86ac(0xe6)]>0x1)_0x11e860[_0x3b86ac(0xf5)]({'botID':_0x3b86ac(0x1bf)});let _0x4c128c=[],_0x6f5d1a=[];const _0x5e7071=_0x11e860[_0x3b86ac(0xe6)]%0x4==0x0||_0x11e860['length']%0x4==0x3||_0x11e860[_0x3b86ac(0xe6)]%0x3==0x1?0x4:0x3;let _0x50ca4f=0x0;_0x11e860[_0x3b86ac(0x22b)]((_0x235336,_0x91c942)=>{const _0x401624=_0x3b86ac;if(_0x91c942%_0x5e7071==0x0)_0x6f5d1a=[];_0x6f5d1a['push']({'text':_0x235336[_0x401624(0x22c)]==_0x401624(0x1bf)?_0x401624(0x11c):_0x401624(0x204)+_0x235336[_0x401624(0x22c)],'callback_data':_0x235336[_0x401624(0x22c)]}),_0x91c942%_0x5e7071==0x0&&(_0x4c128c[_0x50ca4f]=_0x6f5d1a,_0x50ca4f++);}),tgBot[_0x3b86ac(0xdf)](_0x4a47e9[_0x3b86ac(0x106)]['id'],_0x3b86ac(0xe7),{'reply_markup':{'inline_keyboard':_0x4c128c}})[_0x3b86ac(0x1c1)](_0x1c2d47=>{telegramError(_0x1c2d47);}),tgBot['on']('callback_query',async _0x37da60=>{const _0x250ca3=_0x3b86ac,_0x12add7=_0x37da60[_0x250ca3(0x214)],_0x2972c1=_0x37da60[_0x250ca3(0x107)];tgBot[_0x250ca3(0x1a5)](_0x37da60['id'])[_0x250ca3(0x1d6)](async()=>{const _0x2f4433=_0x250ca3;_0x12add7==_0x2f4433(0x1bf)?(tgBot['sendMessage'](_0x2972c1[_0x2f4433(0x106)]['id'],_0x2f4433(0x14b))['catch'](_0x5059cc=>{telegramError(_0x5059cc);}),_0x11e860['forEach'](_0x5e257b=>{const _0x4981e4=_0x2f4433;if(_0x5e257b[_0x4981e4(0x22c)]!=_0x4981e4(0x1bf))toggleBot(_0x5e257b[_0x4981e4(0x22c)],toggleStatus(_0x5e257b['botID']),'stopped');})):(tgBot[_0x2f4433(0xdf)](_0x2972c1[_0x2f4433(0x106)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x12add7)[_0x2f4433(0x1c1)](_0x177f83=>{telegramError(_0x177f83);}),toggleBot(_0x12add7,toggleStatus(_0x12add7),'stopped'));}),tgBot[_0x250ca3(0x173)](_0x250ca3(0x24e));});}}),tgBot[_0x4db24d(0x13a)](/\/off/,_0x553f3a=>{const _0x1a64ee=_0x4db24d;if(!validateTelegram(_0x553f3a))return;tgBot[_0x1a64ee(0x173)]('callback_query');const _0x5bdaa3=getEnabledBots();if(_0x5bdaa3[_0x1a64ee(0xe6)]==0x0)tgBot[_0x1a64ee(0xdf)](_0x553f3a[_0x1a64ee(0x106)]['id'],_0x1a64ee(0x185))[_0x1a64ee(0x1c1)](_0x2f7d3c=>{telegramError(_0x2f7d3c);});else{if(_0x5bdaa3[_0x1a64ee(0xe6)]>0x1)_0x5bdaa3['push']({'botID':'all'});let _0x3f15fa=[],_0x5c7226=[];const _0x38dbf0=_0x5bdaa3[_0x1a64ee(0xe6)]%0x4==0x0||_0x5bdaa3[_0x1a64ee(0xe6)]%0x4==0x3||_0x5bdaa3['length']%0x3==0x1?0x4:0x3;let _0x7cfbca=0x0;_0x5bdaa3[_0x1a64ee(0x22b)]((_0x5c38b0,_0x795fb6)=>{const _0x470beb=_0x1a64ee;if(_0x795fb6%_0x38dbf0==0x0)_0x5c7226=[];_0x5c7226[_0x470beb(0xf5)]({'text':_0x5c38b0[_0x470beb(0x22c)]=='all'?'All\x20bots':'Bot\x20'+_0x5c38b0['botID'],'callback_data':_0x5c38b0['botID']}),_0x795fb6%_0x38dbf0==0x0&&(_0x3f15fa[_0x7cfbca]=_0x5c7226,_0x7cfbca++);}),tgBot['sendMessage'](_0x553f3a[_0x1a64ee(0x106)]['id'],_0x1a64ee(0x260),{'reply_markup':{'inline_keyboard':_0x3f15fa}})[_0x1a64ee(0x1c1)](_0x27370f=>{telegramError(_0x27370f);}),tgBot['on'](_0x1a64ee(0x24e),async _0x460184=>{const _0x228b83=_0x1a64ee,_0x20743e=_0x460184['data'],_0x277ede=_0x460184[_0x228b83(0x107)];tgBot['answerCallbackQuery'](_0x460184['id'])['then'](async()=>{const _0x44ab59=_0x228b83;_0x20743e==_0x44ab59(0x1bf)?(tgBot[_0x44ab59(0xdf)](_0x277ede[_0x44ab59(0x106)]['id'],_0x44ab59(0xed))['catch'](_0x1c8f1d=>{telegramError(_0x1c8f1d);}),_0x5bdaa3[_0x44ab59(0x22b)](_0x36168a=>{const _0xc5eedd=_0x44ab59;if(_0x36168a[_0xc5eedd(0x22c)]!=_0xc5eedd(0x1bf))toggleBot(_0x36168a[_0xc5eedd(0x22c)],toggleStatus(_0x36168a[_0xc5eedd(0x22c)]),_0xc5eedd(0x1f3));})):(tgBot[_0x44ab59(0xdf)](_0x277ede[_0x44ab59(0x106)]['id'],_0x44ab59(0x142)+_0x20743e)[_0x44ab59(0x1c1)](_0x19f387=>{telegramError(_0x19f387);}),toggleBot(_0x20743e,toggleStatus(_0x20743e),_0x44ab59(0x1f3)));}),tgBot[_0x228b83(0x173)]('callback_query');});}}),tgBot[_0x4db24d(0x13a)](/\/portfolio/,_0x10cd0b=>{const _0x4b1689=_0x4db24d;if(!validateTelegram(_0x10cd0b))return;tgBot[_0x4b1689(0x173)](_0x4b1689(0x24e));const _0x3cbb7f=getEnabledBots();if(_0x3cbb7f[_0x4b1689(0xe6)]==0x0)tgBot[_0x4b1689(0xdf)](_0x10cd0b[_0x4b1689(0x106)]['id'],_0x4b1689(0x185))['catch'](_0x269fff=>{telegramError(_0x269fff);});else{if(_0x3cbb7f[_0x4b1689(0xe6)]>0x1){let _0x3c8056=[],_0x1a1fbb=[];const _0x22cd71=_0x3cbb7f[_0x4b1689(0xe6)]%0x4==0x0||_0x3cbb7f[_0x4b1689(0xe6)]%0x4==0x3||_0x3cbb7f[_0x4b1689(0xe6)]%0x3==0x1?0x4:0x3;let _0x2775f8=0x0;_0x3cbb7f[_0x4b1689(0x22b)]((_0x63290a,_0x33a8b7)=>{const _0x208bf2=_0x4b1689;if(_0x33a8b7%_0x22cd71==0x0)_0x1a1fbb=[];_0x1a1fbb[_0x208bf2(0xf5)]({'text':_0x208bf2(0x204)+_0x63290a[_0x208bf2(0x22c)],'callback_data':_0x63290a[_0x208bf2(0x22c)]}),_0x33a8b7%_0x22cd71==0x0&&(_0x3c8056[_0x2775f8]=_0x1a1fbb,_0x2775f8++);}),tgBot[_0x4b1689(0xdf)](_0x10cd0b[_0x4b1689(0x106)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x3c8056}})['catch'](_0x22b8a2=>{telegramError(_0x22b8a2);}),tgBot['on'](_0x4b1689(0x24e),async _0x24bb3c=>{const _0x34cd2b=_0x4b1689,_0x53344a=_0x24bb3c['data'],_0x3e98ea=_0x24bb3c[_0x34cd2b(0x107)];tgBot[_0x34cd2b(0x1a5)](_0x24bb3c['id'])[_0x34cd2b(0x1d6)](async()=>{const _0x34f17d=_0x34cd2b;if(pid[_0x53344a])pid[_0x53344a][_0x34f17d(0x164)]({'function':_0x34f17d(0x1fe),'args':null});}),tgBot[_0x34cd2b(0x173)](_0x34cd2b(0x24e));});}else{const _0x164c05=_0x3cbb7f[0x0][_0x4b1689(0x22c)];if(pid[_0x164c05])pid[_0x164c05][_0x4b1689(0x164)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x3e9b1e=>{const _0xfd95f3=_0x4db24d;if(!validateTelegram(_0x3e9b1e))return;tgBot[_0xfd95f3(0x173)](_0xfd95f3(0x24e)),await getMessages();if(!updateAvailable)tgBot[_0xfd95f3(0xdf)](_0x3e9b1e['chat']['id'],_0xfd95f3(0x139))[_0xfd95f3(0x1c1)](_0x1c449b=>{telegramError(_0x1c449b);});else!validInstallation?tgBot['sendMessage'](_0x3e9b1e[_0xfd95f3(0x106)]['id'],_0xfd95f3(0x1e4))['catch'](_0x2a325a=>{telegramError(_0x2a325a);}):(tgBot[_0xfd95f3(0xdf)](_0x3e9b1e[_0xfd95f3(0x106)]['id'],_0xfd95f3(0x1b4),{'reply_markup':{'inline_keyboard':[[{'text':_0xfd95f3(0x232),'callback_data':_0xfd95f3(0x1f8)},{'text':'No','callback_data':'no'}]]}})[_0xfd95f3(0x1c1)](_0x231433=>{telegramError(_0x231433);}),tgBot['on'](_0xfd95f3(0x24e),async _0x128840=>{const _0x25c73b=_0xfd95f3,_0x4e9d9e=_0x128840[_0x25c73b(0x214)],_0x16dcf6=_0x128840[_0x25c73b(0x107)];tgBot['answerCallbackQuery'](_0x128840['id'])[_0x25c73b(0x1d6)](async()=>{const _0x2098a3=_0x25c73b;_0x4e9d9e==_0x2098a3(0x1f8)&&(await tgBot['sendMessage'](_0x16dcf6[_0x2098a3(0x106)]['id'],_0x2098a3(0xff))['catch'](_0x49c654=>{telegramError(_0x49c654);}),updateBB());_0x4e9d9e=='no'&&await tgBot[_0x2098a3(0xdf)](_0x16dcf6[_0x2098a3(0x106)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x2098a3(0x1c1)](_0x520a16=>{telegramError(_0x520a16);});if(!settings[_0x2098a3(0x176)])tgBot[_0x2098a3(0xdf)](_0x16dcf6[_0x2098a3(0x106)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2098a3(0x1c1)](_0x417046=>{telegramError(_0x417046);});}),tgBot[_0x25c73b(0x173)](_0x25c73b(0x24e));}));}),tgBot[_0x4db24d(0x13a)](/\/toggle/,_0x425d7c=>{const _0x1a3f67=_0x4db24d;if(!validateTelegram(_0x425d7c))return;tgBot[_0x1a3f67(0x173)](_0x1a3f67(0x24e));const _0x3e941e=getBotsWithMode();if(_0x3e941e[_0x1a3f67(0xe6)]==0x0)tgBot['sendMessage'](_0x425d7c['chat']['id'],_0x1a3f67(0x185))[_0x1a3f67(0x1c1)](_0x1e155c=>{telegramError(_0x1e155c);});else{let _0x4bb85d=[],_0x5b3be5=[];const _0x167fce=0x2;let _0x28c54c=0x0;_0x3e941e[_0x1a3f67(0x22b)]((_0x21bc70,_0x4df7fe)=>{const _0x93a434=_0x1a3f67;if(_0x4df7fe%_0x167fce==0x0)_0x5b3be5=[];_0x5b3be5[_0x93a434(0xf5)]({'text':_0x93a434(0x204)+_0x21bc70[_0x93a434(0x22c)]+'\x20('+_0x21bc70[_0x93a434(0x115)]+')','callback_data':_0x21bc70[_0x93a434(0x22c)]}),_0x4df7fe%_0x167fce==0x0&&(_0x4bb85d[_0x28c54c]=_0x5b3be5,_0x28c54c++);}),tgBot['sendMessage'](_0x425d7c[_0x1a3f67(0x106)]['id'],_0x1a3f67(0x215),{'reply_markup':{'inline_keyboard':_0x4bb85d}})['catch'](_0x16beb5=>{telegramError(_0x16beb5);}),tgBot['on'](_0x1a3f67(0x24e),async _0xb896ad=>{const _0x4a0861=_0x1a3f67,_0x1d406d=_0xb896ad[_0x4a0861(0x214)],_0x3d5a0f=_0xb896ad[_0x4a0861(0x107)];tgBot[_0x4a0861(0x1a5)](_0xb896ad['id'])[_0x4a0861(0x1d6)](async()=>{const _0x2632ff=_0x4a0861,_0x136fb2=_0x3e941e['find'](_0x23718b=>_0x23718b[_0x2632ff(0x22c)]==_0x1d406d),_0x3b33ec=_0x136fb2['mode']==_0x2632ff(0x220)?_0x2632ff(0x13e):_0x2632ff(0x220);tgBot[_0x2632ff(0xdf)](_0x3d5a0f[_0x2632ff(0x106)]['id'],_0x2632ff(0x1cd)+_0x1d406d+_0x2632ff(0xfa)+_0x3b33ec+_0x2632ff(0x19d))[_0x2632ff(0x1c1)](_0x4fd152=>{telegramError(_0x4fd152);}),toggleBotMode(_0x1d406d);}),tgBot[_0x4a0861(0x173)](_0x4a0861(0x24e));});}}),tgBot[_0x4db24d(0x13a)](/\/names/,_0x13a6bd=>{const _0x4b36b2=_0x4db24d;if(!validateTelegram(_0x13a6bd))return;let _0x348c67='';config[_0x4b36b2(0x22b)](_0x28b5ac=>{const _0x43f866=_0x4b36b2;_0x348c67+=_0x43f866(0x204)+_0x28b5ac[_0x43f866(0x22c)]+':\x20'+_0x28b5ac[_0x43f866(0xea)]+'\x0a';}),tgBot[_0x4b36b2(0xdf)](_0x13a6bd[_0x4b36b2(0x106)]['id'],_0x348c67,{'parse_mode':_0x4b36b2(0x27c)})[_0x4b36b2(0x1c1)](_0x52fb9f=>{telegramError(_0x52fb9f);});}),tgBot[_0x4db24d(0x13a)](/\/disable/,_0x1277a6=>{const _0x27d8e0=_0x4db24d;if(!validateTelegram(_0x1277a6))return;tgBot[_0x27d8e0(0xdf)](_0x1277a6[_0x27d8e0(0x106)]['id'],_0x27d8e0(0x231))[_0x27d8e0(0x1c1)](_0x390d5e=>{telegramError(_0x390d5e);}),updateSetting(_0x27d8e0(0x116),![]);}),tgBot[_0x4db24d(0x13a)](/\/help/,_0x1b287b=>{const _0x13790c=_0x4db24d;if(!validateTelegram(_0x1b287b))return;tgBot[_0x13790c(0xdf)](_0x1b287b[_0x13790c(0x106)]['id'],_0x5c5ac4)[_0x13790c(0x1c1)](_0x3d1cf4=>{telegramError(_0x3d1cf4);});}),tgBot['on'](_0x4db24d(0x162),_0x2f7e8a=>{const _0x10188a=_0x4db24d;_0x2f7e8a[_0x10188a(0x129)]()[_0x10188a(0x23e)](_0x10188a(0x281))&&(logger[_0x10188a(0x1ec)](_0x10188a(0x256)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')['emit'](_0x10188a(0x182),_0x10188a(0x256)));}),process[_0x4db24d(0x20d)](_0x4db24d(0x12f),()=>{const _0x4c6ebb=_0x4db24d;if(tgBot)tgBot[_0x4c6ebb(0x181)]();process[_0x4c6ebb(0x21e)](0x1);}),process[_0x4db24d(0x20d)](_0x4db24d(0x170),()=>{const _0x23b563=_0x4db24d;if(tgBot)tgBot[_0x23b563(0x181)]();process[_0x23b563(0x21e)](0x1);});}}function disableTelegram(){const _0x45e53f=_0x171ce5;tgBot&&(tgBot[_0x45e53f(0x181)](),tgBot=null);}function sendTelegram(_0x3817a9,_0x213911){const _0x52e642=_0x171ce5;if(settings[_0x52e642(0x116)]){if(settings[_0x52e642(0x190)]==_0x52e642(0x1bf)||(_0x213911[_0x52e642(0x130)]==_0x52e642(0x11a)||_0x213911['type']==_0x52e642(0x15c)||_0x213911[_0x52e642(0x130)]==_0x52e642(0x233))&&settings[_0x52e642(0x190)]=='alerts'||_0x213911[_0x52e642(0x130)]==_0x52e642(0x105)&&settings[_0x52e642(0x190)]==_0x52e642(0x25e)){if(tgBot&&settings[_0x52e642(0x176)]){if(_0x213911[_0x52e642(0x250)])tgBot['sendMessage'](settings[_0x52e642(0x176)],_0x213911['botname']+_0x52e642(0x1d8)+_0x213911[_0x52e642(0xeb)])[_0x52e642(0x1c1)](_0x513fd8=>{telegramError(_0x513fd8);});else tgBot['sendMessage'](settings[_0x52e642(0x176)],_0x52e642(0x204)+_0x3817a9+_0x52e642(0x1d8)+_0x213911[_0x52e642(0xeb)])[_0x52e642(0x1c1)](_0x52df5a=>{telegramError(_0x52df5a);});}}}}async function sendTelegramMsg(_0x5db138,_0x49030d=_0x171ce5(0x27c)){const _0x56d357=_0x171ce5;return settings['telegramEnabled']&&tgBot&&settings[_0x56d357(0x176)]?(await tgBot[_0x56d357(0xdf)](settings[_0x56d357(0x176)],_0x5db138,{'parse_mode':_0x49030d})[_0x56d357(0x1c1)](_0x4ccf3d=>{telegramError(_0x4ccf3d);}),!![]):![];}function getDeviceWithIp(_0x3eceec){const _0x52a541=_0x171ce5;return devices[_0x52a541(0x205)](_0x2f0a27=>_0x2f0a27['ip']===_0x3eceec);}function temporaryAccess2FA(_0x27a637,_0x5c3aa9){const _0x4e1cf2=_0x171ce5;let _0x5491fc=new Date(),_0x5e121b=![];if(lastIpApproval){if(_0x5491fc-lastIpApproval<0x1388)_0x5e121b=!![];}lastIpApproval=new Date();if(_0x5e121b)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x4e1cf2(0x24e)),tgBot[_0x4e1cf2(0xdf)](settings[_0x4e1cf2(0x176)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5c3aa9)[_0x4e1cf2(0x230)]+_0x4e1cf2(0x1d0),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4e1cf2(0x244),'callback_data':'5'},{'text':_0x4e1cf2(0x199),'callback_data':'15'},{'text':_0x4e1cf2(0x1c3),'callback_data':'30'},{'text':_0x4e1cf2(0xd5),'callback_data':_0x4e1cf2(0xd5)}]]}})[_0x4e1cf2(0x1c1)](_0x474582=>{telegramError(_0x474582);}),tgBot['on'](_0x4e1cf2(0x24e),async _0x4c80c7=>{const _0x3ba194=_0x4e1cf2,_0x15bcab=_0x4c80c7['data'],_0x340e57=_0x4c80c7[_0x3ba194(0x107)];tgBot[_0x3ba194(0x1a5)](_0x4c80c7['id'])[_0x3ba194(0x1d6)](async()=>{const _0x38bb17=_0x3ba194;devices[_0x27a637][_0x38bb17(0x223)]={'clientip':_0x5c3aa9,'timestamp':new Date()[_0x38bb17(0x271)](),'expiry':_0x15bcab},_0x15bcab!=_0x38bb17(0xd5)?(await tgBot['sendMessage'](_0x340e57['chat']['id'],_0x38bb17(0x123)+_0x15bcab+_0x38bb17(0x14a),{'parse_mode':'HTML'})[_0x38bb17(0x1c1)](_0x406a3f=>{telegramError(_0x406a3f);}),io['to'](_0x27a637)[_0x38bb17(0x121)]('status',{'access':{'allow':![],'reason':_0x38bb17(0x252),'token':null}})):(await tgBot['sendMessage'](_0x340e57['chat']['id'],_0x38bb17(0x16b))[_0x38bb17(0x1c1)](_0x289255=>{telegramError(_0x289255);}),io['to'](_0x27a637)[_0x38bb17(0x121)](_0x38bb17(0x26c),{'access':{'allow':![],'reason':_0x38bb17(0x226),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x2186c8,_0x29dce0){const _0x1947f3=_0x171ce5;tgBot&&settings[_0x1947f3(0x176)]&&(tgBot[_0x1947f3(0x173)]('callback_query'),tgBot[_0x1947f3(0xdf)](settings[_0x1947f3(0x176)],_0x1947f3(0xf3)+normalizeIP(_0x29dce0)[_0x1947f3(0x230)]+_0x1947f3(0x1d0),{'parse_mode':_0x1947f3(0x27c),'reply_markup':{'inline_keyboard':[[{'text':_0x1947f3(0x193),'callback_data':loginExpiry},{'text':_0x1947f3(0xd5),'callback_data':_0x1947f3(0xd5)}]]}})[_0x1947f3(0x1c1)](_0x4dd128=>{telegramError(_0x4dd128);}),tgBot['on'](_0x1947f3(0x24e),async _0x3e4aed=>{const _0x2bbdeb=_0x1947f3,_0x46337a=_0x3e4aed[_0x2bbdeb(0x214)],_0x1864d2=_0x3e4aed[_0x2bbdeb(0x107)];tgBot[_0x2bbdeb(0x1a5)](_0x3e4aed['id'])[_0x2bbdeb(0x1d6)](async()=>{const _0x436939=_0x2bbdeb;devices[_0x2186c8]['telegram2FaApproval']={'clientip':_0x29dce0,'timestamp':new Date()[_0x436939(0x271)](),'expiry':_0x46337a},_0x46337a!='reject'?(await tgBot[_0x436939(0xdf)](_0x1864d2['chat']['id'],_0x436939(0x11f),{'parse_mode':_0x436939(0x27c)})[_0x436939(0x1c1)](_0x54be2d=>{telegramError(_0x54be2d);}),io['to'](_0x2186c8)[_0x436939(0x121)]('status',{'access':{'allow':![],'reason':_0x436939(0x252),'token':null}})):(await tgBot['sendMessage'](_0x1864d2[_0x436939(0x106)]['id'],_0x436939(0x16f))[_0x436939(0x1c1)](_0x2e7a9f=>{telegramError(_0x2e7a9f);}),io['to'](_0x2186c8)['emit']('status',{'access':{'allow':![],'reason':_0x436939(0x265),'token':null}}));}),tgBot[_0x2bbdeb(0x173)](_0x2bbdeb(0x24e));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1e7822=_0x171ce5;return dbConfig['get'](_0x1e7822(0x17f))[_0x1e7822(0xfd)]('botID')['filter']({'status':_0x1e7822(0x270)})['value']()||[];}function getDisabledBots(){const _0x3315ce=_0x171ce5;return dbConfig[_0x3315ce(0x1b9)](_0x3315ce(0x17f))[_0x3315ce(0xfd)](_0x3315ce(0x22c))[_0x3315ce(0x222)]({'status':_0x3315ce(0x1b1)})[_0x3315ce(0x1bd)]()||[];}function getBotAttributes(_0x31a743){const _0x20f2ae=_0x171ce5;let _0x1d8bf9={};const _0x2b9920=configpath+_0x20f2ae(0xe3)+_0x31a743+'-config.json',_0x427020=fs['existsSync'](_0x2b9920);if(_0x427020){const _0x49bb25=fs[_0x20f2ae(0x1b8)](_0x2b9920);try{const _0x1194d8=JSON[_0x20f2ae(0x183)](_0x49bb25),_0x3d781e=_0x1194d8?_0x1194d8['bot'][0x0][_0x20f2ae(0x10c)]:![];_0x1d8bf9[_0x20f2ae(0x115)]=_0x3d781e?_0x20f2ae(0x220):_0x20f2ae(0x13e),_0x1d8bf9[_0x20f2ae(0xea)]=_0x1194d8?_0x1194d8['bot'][0x0][_0x20f2ae(0xea)]:_0x20f2ae(0x204)+_0x31a743;}catch(_0x4aa3e3){_0x1d8bf9[_0x20f2ae(0x115)]=_0x20f2ae(0x13e),_0x1d8bf9['botname']='Bot\x20'+_0x31a743;}}else _0x1d8bf9[_0x20f2ae(0x115)]=_0x20f2ae(0x13e),_0x1d8bf9[_0x20f2ae(0xea)]='Bot\x20'+_0x31a743;return _0x1d8bf9;}function getBotsWithMode(){const _0x37c714=_0x171ce5,_0x5e421a=dbConfig[_0x37c714(0x1b9)](_0x37c714(0x17f))[_0x37c714(0xfd)](_0x37c714(0x22c))[_0x37c714(0x1bd)]()||[];return _0x5e421a[_0x37c714(0x22b)](_0x19337b=>{const _0xd2bd1e=_0x37c714;let _0x1dbf22=getBotAttributes(_0x19337b['botID']);_0x19337b[_0xd2bd1e(0x115)]=_0x1dbf22[_0xd2bd1e(0x115)];}),_0x5e421a;}function getBotExchanges(){const _0x49a0a7=_0x171ce5;let _0x463c15=[];const _0x4d18a4=dbConfig[_0x49a0a7(0x1b9)](_0x49a0a7(0x17f))[_0x49a0a7(0xfd)](_0x49a0a7(0x22c))['value']()||[];_0x4d18a4[_0x49a0a7(0x22b)](_0x147e20=>{const _0x5ef0a=_0x49a0a7;if(_0x147e20[_0x5ef0a(0x26c)]==_0x5ef0a(0x270)){const _0x2e4358=configpath+_0x5ef0a(0xe3)+_0x147e20[_0x5ef0a(0x22c)]+_0x5ef0a(0xe2),_0x3d1970=fs[_0x5ef0a(0x1a6)](_0x2e4358);let _0x4a6a63;if(_0x3d1970){const _0xe923bd=fs[_0x5ef0a(0x1b8)](_0x2e4358);try{const _0x528299=JSON[_0x5ef0a(0x183)](_0xe923bd);_0x4a6a63=_0x528299?_0x528299[_0x5ef0a(0x109)][0x0]['exchange']:null;}catch(_0x56daff){}}if(_0x4a6a63)_0x463c15[_0x5ef0a(0xf5)](_0x4a6a63);}});const _0x5ac840=[...new Set(_0x463c15)][_0x49a0a7(0x15f)]();return _0x5ac840;}async function initUser(){const _0x424e93=_0x171ce5;if(!settings[_0x424e93(0x19c)]){const _0x46b4e2=uuidRandom();mixpanel[_0x424e93(0x1b2)](_0x46b4e2),updateSetting(_0x424e93(0x19c),_0x46b4e2);}}async function initSecure(){const _0x2415d1=_0x171ce5;let _0x1010dd=getSecure();if(!_0x1010dd[_0x2415d1(0x242)](_0x2415d1(0x11b))){let _0x4d405b=await generateKeys();_0x1010dd['publicKey']=_0x4d405b[_0x2415d1(0x254)],_0x1010dd[_0x2415d1(0x134)]=_0x4d405b['privateKey'],_0x1010dd['secret']=crypto[_0x2415d1(0x253)](0x20)['toString'](_0x2415d1(0x108));;storeSecure(_0x1010dd);}}function getSettings(){const _0x5b9625=_0x171ce5;return dbSettings[_0x5b9625(0x1b9)](_0x5b9625(0x163))[_0x5b9625(0x1bd)]()||{};}function getSecure(){const _0x3633a2=_0x171ce5;return dbSecure[_0x3633a2(0x1b9)](_0x3633a2(0x13c))[_0x3633a2(0x1bd)]()||{};}function getBlacklist(){const _0x5c4788=_0x171ce5;return dbSecure[_0x5c4788(0x1b9)]('blacklist')[_0x5c4788(0x1bd)]()||[];}function broadcastToBots(_0x165bc4,_0x303121){const _0x4fe841=_0x171ce5;config[_0x4fe841(0x22b)](_0xbbb2dd=>{const _0x416f7b=_0x4fe841;if(_0xbbb2dd[_0x416f7b(0x26c)]==_0x416f7b(0x270)&&_0xbbb2dd['live']==_0x416f7b(0x151)){if(pid[_0xbbb2dd[_0x416f7b(0x22c)]])pid[_0xbbb2dd[_0x416f7b(0x22c)]][_0x416f7b(0x164)]({[_0x165bc4]:_0x303121});}});}function storeSettings(_0x446dcb,_0x2ff392=![]){const _0x255fdc=_0x171ce5;_0x446dcb={...settings,..._0x446dcb};if(_0x2ff392&&_0x446dcb[_0x255fdc(0x24b)]!=_0x255fdc(0x143)&&_0x446dcb[_0x255fdc(0x24b)]!='***'&&_0x446dcb[_0x255fdc(0x24b)]!=''){const _0x50dcc9=crypt[_0x255fdc(0x22d)](secure[_0x255fdc(0x134)],_0x446dcb['bbPassword'])[_0x255fdc(0x107)][_0x255fdc(0x171)]('@')[0x0],_0x598822=bcrypt[_0x255fdc(0x188)](_0x50dcc9,saltRounds);_0x446dcb={..._0x446dcb,'bbPassword':_0x598822};}if(_0x2ff392&&_0x446dcb['telegramToken']!=_0x255fdc(0x143)&&_0x446dcb[_0x255fdc(0x280)]!='***'&&_0x446dcb[_0x255fdc(0x280)]!=''){const _0x4326a8=crypt['decrypt'](secure[_0x255fdc(0x134)],_0x446dcb['telegramToken'])[_0x255fdc(0x107)]['split']('@')[0x0];_0x446dcb={..._0x446dcb,'telegramToken':_0x4326a8};}const _0x5ba627=_0x446dcb[_0x255fdc(0x280)]!=_0x255fdc(0x143)&&_0x446dcb[_0x255fdc(0x280)]!=settings['telegramToken']||_0x446dcb[_0x255fdc(0x228)]!=settings[_0x255fdc(0x228)],_0x4d10da=_0x446dcb['telegramToken']==''||_0x446dcb[_0x255fdc(0x228)]=='';if(_0x5ba627)_0x446dcb[_0x255fdc(0x190)]=_0x255fdc(0x1bf);for(const [_0x29df2f,_0x1d5ba3]of Object['entries'](_0x446dcb)){if(_0x29df2f==_0x255fdc(0x280)&&_0x1d5ba3==_0x255fdc(0x143)){_0x446dcb[_0x255fdc(0x280)]=settings[_0x255fdc(0x280)];continue;};if(_0x29df2f==_0x255fdc(0x24b)&&_0x1d5ba3==_0x255fdc(0x143)){_0x446dcb['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x255fdc(0xec)]('settings.'+_0x29df2f,_0x1d5ba3)['write']();}settings=_0x446dcb,io['to'](_0x255fdc(0xf2))[_0x255fdc(0x121)](_0x255fdc(0x163),cleanSettings()),broadcastToBots(_0x255fdc(0x264),settings['timeshift']);if(_0x5ba627&&!_0x4d10da)initTelegram();if(_0x5ba627&&_0x4d10da)disableTelegram();getAllClients()[_0x255fdc(0x22b)](_0x34e475=>{const _0x19654c=_0x255fdc;getSocket(_0x34e475['id'])[_0x19654c(0x121)](_0x19654c(0x26c),{'access':{'allow':![],'reason':_0x19654c(0x252),'token':null}});});}function updateSetting(_0x141160,_0x3e50e5){const _0x3b8962=_0x171ce5;dbSettings[_0x3b8962(0xec)](_0x3b8962(0x178)+_0x141160,_0x3e50e5)[_0x3b8962(0x272)](),settings=getSettings(),io['to'](_0x3b8962(0xf2))[_0x3b8962(0x121)]('settings',cleanSettings());}function storeSecure(_0x3814c5){const _0x3be8f7=_0x171ce5;dbSecure['get'](_0x3be8f7(0x13c))[_0x3be8f7(0xf5)](_0x3814c5)[_0x3be8f7(0x272)](),secure=_0x3814c5;}function addBlacklist(_0x56d343){const _0x3c02f0=_0x171ce5;cleanBlacklist();let _0x47ca30;devices[_0x56d343][_0x3c02f0(0x223)]?_0x47ca30=Math[_0x3c02f0(0x26a)](devices[_0x56d343]['telegramIpApproval'][_0x3c02f0(0x10d)],loginExpiry):_0x47ca30=loginExpiry,dbSecure[_0x3c02f0(0x1b9)]('blacklist')[_0x3c02f0(0xf5)]({'expiry':new Date()[_0x3c02f0(0x271)]()+_0x47ca30*0x3c*0x3e8,'token':devices[_0x56d343]['access']['token']})['write'](),blacklist=dbSecure[_0x3c02f0(0x1b9)](_0x3c02f0(0x102))['value']();}function cleanBlacklist(){const _0x1dd50e=_0x171ce5;let _0x4d2aa3=dbSecure[_0x1dd50e(0x1b9)](_0x1dd50e(0x102))[_0x1dd50e(0x1dd)]()[_0x1dd50e(0x1bd)](),_0x48047c=new Date()[_0x1dd50e(0x271)]();_0x4d2aa3[_0x1dd50e(0x22b)](_0x5a1033=>{const _0x4341ee=_0x1dd50e;_0x5a1033[_0x4341ee(0x10d)]<_0x48047c&&dbSecure['get'](_0x4341ee(0x102))['remove']({'expiry':_0x5a1033['expiry']})[_0x4341ee(0x272)]();});}function initStates(){const _0x2d6edf=_0x171ce5;let _0x5f0e3f=getConfiguration();_0x5f0e3f[_0x2d6edf(0x22b)](_0x329b99=>{const _0x1a46a8=_0x2d6edf;_0x329b99[_0x1a46a8(0x12e)]=_0x1a46a8(0x1f3);}),storeConfiguration(_0x5f0e3f);}function onKeys(){const _0x205ef6=new RSA();return new Promise(_0xc29890=>{const _0x426765=_0x12e4;_0x205ef6[_0x426765(0x1aa)]()[_0x426765(0x1d6)](_0xcc91e3=>{_0xc29890(_0xcc91e3);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5ae535=_0x171ce5;let _0x5ec738=getSettings(),_0x3a04c3=![];!_0x5ec738[_0x5ae535(0x242)](_0x5ae535(0x1e7))&&(_0x5ec738['lastmsgtelegram']=0x0,_0x3a04c3=!![]);!_0x5ec738[_0x5ae535(0x242)](_0x5ae535(0x23b))&&(_0x5ec738[_0x5ae535(0x23b)]=0x0,_0x3a04c3=!![]);!_0x5ec738[_0x5ae535(0x242)]('latestversion')&&(_0x5ec738[_0x5ae535(0x195)]=_0x5ae535(0x189),_0x3a04c3=!![]);if(_0x3a04c3)storeSettings(_0x5ec738);}function storeConfiguration(_0xce1a22){const _0x3411cb=_0x171ce5;dbConfig[_0x3411cb(0x1b9)](_0x3411cb(0x17f))[_0x3411cb(0x243)]()[_0x3411cb(0x272)](),_0xce1a22['forEach'](_0x3e5c07=>{const _0x5525ef=_0x3411cb;delete _0x3e5c07[_0x5525ef(0x115)];}),dbConfig[_0x3411cb(0x1b9)](_0x3411cb(0x17f))[_0x3411cb(0xf5)](..._0xce1a22)[_0x3411cb(0x272)](),config=_0xce1a22;}function resetPassword(){const _0x271315=_0x171ce5;tgBot&&settings[_0x271315(0x176)]&&(tgBot['removeListener'](_0x271315(0x24e)),tgBot[_0x271315(0xdf)](settings[_0x271315(0x176)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x271315(0x27c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x271315(0x1f8)},{'text':'no','callback_data':'no'}]]}})[_0x271315(0x1c1)](_0x267186=>{telegramError(_0x267186);}),tgBot['on'](_0x271315(0x24e),async _0x25174d=>{const _0x48a1e9=_0x271315,_0xe0e888=_0x25174d[_0x48a1e9(0x214)],_0x242c30=_0x25174d[_0x48a1e9(0x107)];tgBot[_0x48a1e9(0x1a5)](_0x25174d['id'])[_0x48a1e9(0x1d6)](async()=>{const _0x149e40=_0x48a1e9;if(_0xe0e888!='no'){const _0x41c75e=0xf,_0x12fb78=_0x149e40(0x201),_0x3fb9eb=Array['from'](crypto[_0x149e40(0x210)](new Uint32Array(_0x41c75e)))[_0x149e40(0x1f0)](_0x532886=>_0x12fb78[_0x532886%_0x12fb78[_0x149e40(0xe6)]])[_0x149e40(0x19e)](''),_0x46c810=bcrypt[_0x149e40(0x188)](_0x3fb9eb,saltRounds);storeSettings({'bbPassword':_0x46c810}),await tgBot[_0x149e40(0xdf)](_0x242c30['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3fb9eb,{'parse_mode':_0x149e40(0x27c)})[_0x149e40(0x1c1)](_0x1a7c8b=>{telegramError(_0x1a7c8b);});}else await tgBot[_0x149e40(0xdf)](_0x242c30['chat']['id'],'Password\x20reset\x20rejected')[_0x149e40(0x1c1)](_0x1818e8=>{telegramError(_0x1818e8);});}),tgBot[_0x48a1e9(0x173)]('callback_query');}));}async function confirmRestore(_0x37ae51,_0x56db1b){const _0x4f06f6=_0x171ce5;tgBot&&settings[_0x4f06f6(0x176)]&&(tgBot[_0x4f06f6(0x173)]('callback_query'),await tgBot[_0x4f06f6(0xdf)](settings['telegramChatId'],_0x4f06f6(0x24d),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x4f06f6(0x1f8)},{'text':'no','callback_data':'no'}]]}})[_0x4f06f6(0x1c1)](_0x4883f5=>{telegramError(_0x4883f5);}),tgBot['on'](_0x4f06f6(0x24e),async _0x5b2e67=>{const _0x3af160=_0x4f06f6,_0x308fe7=_0x5b2e67[_0x3af160(0x214)],_0x4a9133=_0x5b2e67[_0x3af160(0x107)];tgBot[_0x3af160(0x1a5)](_0x5b2e67['id'])['then'](async()=>{const _0x1f3ce0=_0x3af160;_0x308fe7==_0x1f3ce0(0x1f8)?(await tgBot[_0x1f3ce0(0xdf)](_0x4a9133['chat']['id'],_0x1f3ce0(0x136),{'parse_mode':'HTML'})[_0x1f3ce0(0x1c1)](_0x84b373=>{telegramError(_0x84b373);}),unzipFile(_0x37ae51,_0x56db1b)):await tgBot['sendMessage'](_0x4a9133[_0x1f3ce0(0x106)]['id'],_0x1f3ce0(0x152))[_0x1f3ce0(0x1c1)](_0xddf37d=>{telegramError(_0xddf37d);});}),tgBot[_0x3af160(0x173)](_0x3af160(0x24e));}));}function getServerTime(){const _0x1536bd=_0x171ce5,_0x473dc6=new Date();return _0x473dc6[_0x1536bd(0xdd)]()+'/'+(_0x473dc6['getMonth']()+0x1)['toString']()[_0x1536bd(0xfc)](0x2,'0')+'/'+_0x473dc6['getDate']()[_0x1536bd(0x129)]()[_0x1536bd(0xfc)](0x2,'0')+'\x20'+_0x473dc6['getHours']()[_0x1536bd(0x129)]()[_0x1536bd(0xfc)](0x2,'0')+':'+_0x473dc6[_0x1536bd(0x14f)]()[_0x1536bd(0x129)]()[_0x1536bd(0xfc)](0x2,'0')+':'+_0x473dc6[_0x1536bd(0x16c)]()['toString']()[_0x1536bd(0xfc)](0x2,'0');}function getTimeStamp(){const _0x4827f1=_0x171ce5,_0x379a69=shiftedTime();return _0x379a69[_0x4827f1(0xdd)]()+'/'+(_0x379a69['getMonth']()+0x1)[_0x4827f1(0x129)]()[_0x4827f1(0xfc)](0x2,'0')+'/'+_0x379a69[_0x4827f1(0x1a3)]()[_0x4827f1(0x129)]()[_0x4827f1(0xfc)](0x2,'0')+'\x20'+_0x379a69[_0x4827f1(0x1af)]()[_0x4827f1(0x129)]()[_0x4827f1(0xfc)](0x2,'0')+':'+_0x379a69[_0x4827f1(0x14f)]()['toString']()['padStart'](0x2,'0')+':'+_0x379a69[_0x4827f1(0x16c)]()[_0x4827f1(0x129)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x1448f2=_0x171ce5,_0x14a0b=new Date();let _0x578874=_0x14a0b;if(settings[_0x1448f2(0x264)]&&settings[_0x1448f2(0x264)]!==0x0)_0x578874=fns[_0x1448f2(0x1f1)](_0x14a0b,{'hours':settings[_0x1448f2(0x264)]});return _0x578874;}function startScheduler(){const _0x3a8fe5=_0x171ce5,_0x55d8ab=new Date()[_0x3a8fe5(0x159)](),_0x39045d=shiftedTime()[_0x3a8fe5(0x1af)]();_0x39045d==0x4&&backupConfigFiles();_0x39045d==0x0&&rotateLogFiles();_0x55d8ab%0x6==0x0&&triggerAnalytics();_0x55d8ab%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x1792a3=_0x171ce5;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x1792a3(0x22b)](_0x38d468=>{const _0x36cd8e=_0x1792a3;if(!_0x38d468[_0x36cd8e(0x20e)]())fs[_0x36cd8e(0x258)](configpath+_0x38d468[_0x36cd8e(0x177)],configbackuppath+_0x38d468[_0x36cd8e(0x177)]);});}function rotateLogFiles(){const _0x3df45f=_0x171ce5,_0x34e186=fs['statSync'](logspath+_0x3df45f(0x20a)),_0x47f1a0=_0x34e186[_0x3df45f(0x165)]/0x400;if(_0x47f1a0>0x32){let _0x1bc4f3=fs[_0x3df45f(0x1b6)](logspath,{'withFileTypes':!![]});_0x1bc4f3[_0x3df45f(0x15f)]((_0x425c0a,_0x22b69b)=>_0x425c0a[_0x3df45f(0x177)]<_0x22b69b['name']?0x1:_0x22b69b[_0x3df45f(0x177)]<_0x425c0a[_0x3df45f(0x177)]?-0x1:0x0),_0x1bc4f3[_0x3df45f(0x22b)](_0x136a7f=>{const _0x1fb69f=_0x3df45f;if(_0x136a7f[_0x1fb69f(0x177)]=='output-002.log')fs[_0x1fb69f(0x258)](logspath+_0x136a7f['name'],logspath+_0x1fb69f(0x20b));if(_0x136a7f[_0x1fb69f(0x177)]==_0x1fb69f(0x26d))fs[_0x1fb69f(0x258)](logspath+_0x136a7f['name'],logspath+_0x1fb69f(0x135));_0x136a7f['name']==_0x1fb69f(0x20a)&&(fs[_0x1fb69f(0x258)](logspath+_0x136a7f[_0x1fb69f(0x177)],logspath+_0x1fb69f(0x26d)),fs[_0x1fb69f(0x155)](logspath+_0x136a7f[_0x1fb69f(0x177)],''));});}}async function zipFiles(_0x7a0805){const _0x29c404=_0x171ce5;let _0x539a61;if(_0x7a0805=='logs')_0x539a61=logspath;if(_0x7a0805=='backup')_0x539a61=configpath;let _0x179af1=fs['readdirSync'](_0x539a61,{'withFileTypes':!![]});const _0x29f062=new require(_0x29c404(0x224))();_0x179af1[_0x29c404(0x22b)](_0xa91d20=>{const _0x1ba3cd=_0x29c404;if(!_0xa91d20[_0x1ba3cd(0x20e)]()){let _0x22b657=fs[_0x1ba3cd(0x1b8)](_0x539a61+_0xa91d20[_0x1ba3cd(0x177)]);const _0x36f2fe=/^bot-[0-9]{3}-config.json$/,_0x197432=_0x36f2fe[_0x1ba3cd(0x149)](_0xa91d20[_0x1ba3cd(0x177)]);if(_0x197432){const _0x5c4fe3=JSON[_0x1ba3cd(0x183)](_0x22b657);_0x5c4fe3[_0x1ba3cd(0x109)][0x0][_0x1ba3cd(0x251)]=_0x1ba3cd(0x160),_0x5c4fe3['bot'][0x0]['apiSecret']=_0x1ba3cd(0x160),_0x22b657=JSON[_0x1ba3cd(0x1fb)](_0x5c4fe3,null,0x2);}if(_0xa91d20[_0x1ba3cd(0x177)]==_0x1ba3cd(0x22a)){const _0x4cb83e=JSON[_0x1ba3cd(0x183)](_0x22b657);if(_0x4cb83e[_0x1ba3cd(0x163)][_0x1ba3cd(0x19b)])_0x4cb83e['settings'][_0x1ba3cd(0x19b)]=![];if(_0x4cb83e[_0x1ba3cd(0x163)][_0x1ba3cd(0x24b)])_0x4cb83e[_0x1ba3cd(0x163)]['bbPassword']=_0x1ba3cd(0x160);if(_0x4cb83e[_0x1ba3cd(0x163)][_0x1ba3cd(0x280)])_0x4cb83e[_0x1ba3cd(0x163)]['telegramToken']=_0x1ba3cd(0x160);if(_0x4cb83e[_0x1ba3cd(0x163)]['telegramChatId'])_0x4cb83e[_0x1ba3cd(0x163)][_0x1ba3cd(0x176)]=null;_0x22b657=JSON[_0x1ba3cd(0x1fb)](_0x4cb83e,null,0x2);}if(_0xa91d20['name']!=_0x1ba3cd(0xf4))_0x29f062[_0x1ba3cd(0xf6)](_0xa91d20[_0x1ba3cd(0x177)],_0x22b657);}});const _0x1ddea=_0x29f062['generate']({'base64':![],'compression':_0x29c404(0xd7)});fs['writeFileSync'](zippath+(_0x7a0805+_0x29c404(0x12c)),_0x1ddea,_0x29c404(0x1f4));}async function unzipFile(_0x4634a9,_0x3e2ede){const _0x5d3f33=_0x171ce5;await backupConfigFiles(),fs[_0x5d3f33(0x1b6)](configpath,{'withFileTypes':!![]})[_0x5d3f33(0x22b)](_0x2bcb4c=>{const _0x24a331=_0x5d3f33;if(!_0x2bcb4c[_0x24a331(0x20e)]())fs[_0x24a331(0x13f)](configpath+_0x2bcb4c[_0x24a331(0x177)]);});const _0x2b86c5=fs[_0x5d3f33(0x1b8)](_0x4634a9+_0x3e2ede,_0x5d3f33(0x1f4)),_0x148e0a=new require('node-zip')(_0x2b86c5,{'base64':![],'checkCRC32':!![]});Object[_0x5d3f33(0x122)](_0x148e0a['files'])[_0x5d3f33(0x22b)](_0x3b11c7=>{const _0x2a30ec=_0x5d3f33,_0xa13f96=_0x148e0a[_0x2a30ec(0x1ce)][_0x3b11c7];fs[_0x2a30ec(0x155)](configpath+_0xa13f96[_0x2a30ec(0x177)],_0xa13f96[_0x2a30ec(0x14d)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x218394=>{const _0x3ea6ef=_0x5d3f33;if(!_0x218394['isDirectory']())fs[_0x3ea6ef(0x13f)](temppath+_0x218394[_0x3ea6ef(0x177)]);}),process[_0x5d3f33(0x164)]({'restore':!![]},_0x42e415=>{});}async function getPublicIp(){const _0x58ef59=_0x171ce5;try{const _0x4f20a3=await axios[_0x58ef59(0x1b9)](_0x58ef59(0x276));publicip=_0x4f20a3['data']['ip'];}catch(_0x372947){}}async function triggerAnalytics(){const _0x50b6cb=_0x171ce5;if(!publicip)await getPublicIp();const _0x55e28e=getBotsWithMode();let _0x4c299a=0x0;_0x55e28e['forEach'](_0xe7bb1e=>{const _0x39567d=_0x12e4;if(_0xe7bb1e[_0x39567d(0x26c)]===_0x39567d(0x270))_0x4c299a++;});const _0x1f67d4=getBotExchanges();mixpanel['track'](_0x50b6cb(0x1a2),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x55e28e['length'],'numbotsenabled':_0x4c299a,'exchanges':_0x1f67d4});}async function getMessages(){const _0x263c39=_0x171ce5,_0xeba238=_0x263c39(0x1a7),_0x1ffffe=new GraphQLClient(_0xeba238),_0x36178a={'authorization':_0x263c39(0x197)},_0x4614e5=serverversion[_0x263c39(0x171)]('.'),_0x50661=_0x4614e5[0x0]+'.'+_0x4614e5[0x1],_0xddca6e=Math[_0x263c39(0x261)](settings[_0x263c39(0x1e7)],settings[_0x263c39(0x23b)]),_0x13cf7c={'last':parseInt(_0xddca6e),'bbm':_0x50661},_0x1dec66=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0xc217a6;try{_0xc217a6=await _0x1ffffe[_0x263c39(0x119)](_0x1dec66,_0x13cf7c,_0x36178a);}catch(_0x1ff589){}if(_0xc217a6&&_0xc217a6[_0x263c39(0x10b)]){let _0x234184=settings[_0x263c39(0x1e7)];newMessages=[];for(const _0x591e14 of _0xc217a6['messages']){newMessages[_0x263c39(0xf5)](_0x591e14);if(_0x591e14['bbvNew'])updateSetting(_0x263c39(0x195),_0x591e14[_0x263c39(0x1bc)]);let _0x1d6865=_0x591e14[_0x263c39(0x1bc)]?serverversion>=_0x591e14['bbvNew']:![];if(!_0x1d6865&&_0x591e14[_0x263c39(0x1b7)]>_0x234184){if(_0x591e14['bbvReceive']===_0x263c39(0x10a)||serverversion[_0x263c39(0x273)](_0x591e14[_0x263c39(0x246)])){let _0x1734f1=''+_0x591e14[_0x263c39(0x235)]+'\x0a\x0a'+_0x591e14[_0x263c39(0x107)];const _0x10d467=await sendTelegramMsg(toTelegramMarkdown(_0x1734f1),_0x263c39(0x1e6));if(_0x10d467)_0x234184=_0x591e14['number'];}}}updateAvailable=isNewerVersion(settings[_0x263c39(0x195)],serverversion),updateSetting(_0x263c39(0x1e7),_0x234184),emitMessages();}}function emitMessages(){const _0x1f6da2=_0x171ce5,_0x45c461=settings[_0x1f6da2(0x23b)];let _0x25a5f6=[];newMessages['forEach'](_0x12093c=>{const _0x559435=_0x1f6da2;_0x12093c[_0x559435(0x1b7)]>_0x45c461&&_0x25a5f6[_0x559435(0xf5)](_0x12093c);}),_0x25a5f6[_0x1f6da2(0xe6)]>0x0&&getAllClients()[_0x1f6da2(0x22b)](_0x23b966=>{const _0x3f0599=_0x1f6da2;getSocket(_0x23b966['id'])[_0x3f0599(0x121)](_0x3f0599(0x107),_0x25a5f6);});}function confirmMessage(_0x1bf172){updateSetting('lastmsgemitted',Number(_0x1bf172));}function isNewerVersion(_0x556931,_0x1bed0d){const _0x2fb98c=_0x171ce5,_0x1d12dc=_0x1bed0d[_0x2fb98c(0x171)]('.'),_0x29f5cd=_0x556931[_0x2fb98c(0x171)]('.');for(var _0x300eec=0x0;_0x300eec<_0x29f5cd[_0x2fb98c(0xe6)];_0x300eec++){const _0x1a5256=~~_0x29f5cd[_0x300eec],_0x31fb5d=~~_0x1d12dc[_0x300eec];if(_0x1a5256>_0x31fb5d)return!![];if(_0x1a5256<_0x31fb5d)return![];}return![];}function toTelegramMarkdown(_0x428cf7){const _0x40f10b=_0x171ce5,_0x5dd53f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x50d3d8=/\*{2}(.+?)\*{2}/gim;return _0x428cf7=_0x428cf7[_0x40f10b(0xe4)](_0x5dd53f,_0x40f10b(0x138))[_0x40f10b(0xe4)](_0x50d3d8,_0x40f10b(0x1bb)),_0x428cf7;}async function validateConfigFile(){const _0x3cd6c6=_0x171ce5,_0x2273c9=dbConfig[_0x3cd6c6(0x1b9)](_0x3cd6c6(0x17f))[_0x3cd6c6(0xfd)](_0x3cd6c6(0x22c))[_0x3cd6c6(0x1bd)]()||[];if(_0x2273c9[_0x3cd6c6(0xe6)]==0x0){let _0x1867b8=0x0,_0x1cf931=[];const _0x53b76c=/^bot-([0-9]{3})-config.json$/,_0x47c702=fs[_0x3cd6c6(0x1b6)](configpath);_0x47c702[_0x3cd6c6(0x22b)](_0x636690=>{const _0x1591bb=_0x3cd6c6,_0x448762=_0x53b76c[_0x1591bb(0x21a)](_0x636690);if(_0x448762){const _0x4c875b=_0x448762[0x1];let _0x5649d3=getBotAttributes(_0x4c875b);_0x1cf931[_0x1591bb(0xf5)]({'botID':_0x4c875b,'botname':_0x5649d3[_0x1591bb(0xea)],'status':'disabled','live':_0x1591bb(0x1f3)}),_0x1867b8++;}}),_0x1867b8!=0x0&&(dbConfig[_0x3cd6c6(0x1b9)](_0x3cd6c6(0x17f))[_0x3cd6c6(0x1df)](_0x1cf931)['write'](),config=_0x1cf931,restoredConfigFile=_0x1867b8);}}async function restoreConfigNotify(_0x5c85f7){const _0x471cef=_0x171ce5;let _0x1cfce3;if(restoredConfigFile==0x1)_0x1cfce3='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1cfce3=_0x471cef(0x169);if(_0x5c85f7)io['to'](_0x471cef(0xf2))[_0x471cef(0x121)](_0x471cef(0x182),_0x1cfce3);else{logger[_0x471cef(0x1cc)](_0x471cef(0x1c8)),logger[_0x471cef(0x1cc)](_0x1cfce3),logger[_0x471cef(0x1cc)]('-----------------------------------------------------------------------------------'),logger[_0x471cef(0x1cc)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x471cef(0x25e))tgBot[_0x471cef(0xdf)](settings[_0x471cef(0x176)],'Bot\x20Mgr\x20>\x20'+_0x1cfce3)[_0x471cef(0x1c1)](_0x4ea9b6=>{telegramError(_0x4ea9b6);});}}function validateCredentials(_0xc781b7,_0x52b18a){const _0x590ea6=_0x171ce5;if(_0xc781b7[_0x590ea6(0x14c)]==settings['bbUsername']&&bcrypt[_0x590ea6(0x1c2)](_0xc781b7['password'],settings['bbPassword'])){if(settings[_0x590ea6(0x1a8)])return{'allow':![],'reason':_0x590ea6(0x24f),'token':null};else{const _0xc3f9c5=generateLoginToken(_0x52b18a);return{'allow':!![],'reason':_0x590ea6(0x1ea),'token':_0xc3f9c5};}}else return{'allow':![],'reason':_0x590ea6(0x219),'token':null};}function refreshToken(_0x1c3091){const _0x37147d=_0x171ce5,_0x1c6fde=generateLoginToken(_0x1c3091);return{'allow':!![],'reason':_0x37147d(0x1ea),'token':_0x1c6fde};}function validateAccess(_0x4890e2,_0x431135,_0x3f0491){const _0x18ca71=_0x171ce5,_0x47569c=_0x3f0491?_0x3f0491:devices[_0x431135]['ip'];let _0x258dcd;const _0x566039=_0x458b1d=>{const _0x5a14a2=_0x12e4;if(settings[_0x5a14a2(0x19b)]){if(settings[_0x5a14a2(0x1a8)]){if(telegram2FaApproved(_0x431135)){const _0x2868ad=generateLoginToken(_0x431135);return{'allow':!![],'reason':_0x5a14a2(0x1b3),'token':_0x2868ad};}else return{'allow':![],'reason':_0x5a14a2(0x101),'token':null};}else return _0x258dcd=validToken(_0x458b1d,_0x431135),_0x258dcd['hasOwnProperty'](_0x5a14a2(0x233))?{'allow':!![],'reason':_0x5a14a2(0x167),'token':_0x458b1d}:{'allow':![],'reason':_0x5a14a2(0x101),'token':null};}else return{'allow':!![],'reason':_0x5a14a2(0x17d),'token':null};};if(settings[_0x18ca71(0x180)]){let _0x497438=[...settings[_0x18ca71(0x22e)],_0x18ca71(0x229),'::ffff:127.0.0.1',_0x18ca71(0x13b)];if(_0x497438['includes'](_0x47569c))return _0x566039(_0x4890e2);else{_0x258dcd=validToken(_0x4890e2,_0x431135);if(_0x258dcd[_0x18ca71(0x242)](_0x18ca71(0x233)))return _0x566039(_0x4890e2);else{if(telegramIpApproved(_0x431135)){const _0x4479a1=generateToken(_0x431135);return _0x258dcd=_0x566039(_0x4890e2),_0x258dcd[_0x18ca71(0x1ab)]?{'allow':!![],'reason':_0x18ca71(0x1e9),'token':_0x4479a1}:_0x258dcd;}else return settings[_0x18ca71(0x1b0)]?{'allow':![],'reason':_0x18ca71(0x268),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x566039(_0x4890e2);}function timelyDecrypt(_0x3ff52a,_0x4200fa=!![]){const _0x44702c=_0x171ce5;if(_0x3ff52a)try{const _0xc13cd2=crypt[_0x44702c(0x22d)](secure[_0x44702c(0x134)],_0x3ff52a)[_0x44702c(0x107)],_0x3aaf53=_0xc13cd2['split']('@')[0x0],_0x4e805e=_0xc13cd2[_0x44702c(0x171)]('@')[0x1],_0x18bdfe=new Date()[_0x44702c(0x271)]();if(_0x4200fa){if(_0x18bdfe-_0x4e805e<maxSecretAge*0x3e8)return _0x3aaf53;else return![];}else return _0x3aaf53;}catch(_0x32b962){return![];}else return![];}const validToken=(_0x2094f5,_0x356dc0)=>{const _0x662880=_0x171ce5,_0x229153=devices[_0x356dc0]['ip'];if(!_0x2094f5)return{'error':_0x662880(0x1d9)};for(let _0x4f6c90 of blacklist){if(_0x4f6c90[_0x662880(0x1ba)]==_0x2094f5)return{'error':'Token\x20blacklisted'};}let _0x17f155;try{_0x17f155=jwt['verify'](_0x2094f5,secure[_0x662880(0x11b)]+_0x356dc0);}catch{return{'error':_0x662880(0x20c)};}if(!_0x17f155['hasOwnProperty']('clientip')&&!_0x17f155[_0x662880(0x242)](_0x662880(0x14c))||!_0x17f155[_0x662880(0x242)](_0x662880(0x1a4)))return{'error':_0x662880(0x245)};if(!_0x17f155[_0x662880(0x242)](_0x662880(0x14c))&&_0x17f155[_0x662880(0x242)]('clientip')){const {clientip:_0x393b20}=_0x17f155;return _0x229153==_0x393b20?{'success':_0x662880(0xda)}:{'error':_0x662880(0x209)};}else{if(_0x17f155[_0x662880(0x242)](_0x662880(0x14c))&&_0x17f155[_0x662880(0x242)](_0x662880(0x241))){const {username:_0xc0d1a2,clientip:_0x43a07a}=_0x17f155;return settings['bbUsername']==_0xc0d1a2&&_0x229153==_0x43a07a?{'success':_0x662880(0xda)}:{'error':_0x662880(0xdb)};}}},generateLoginToken=_0x1adc97=>{const _0xf20ae3=_0x171ce5;if(_0x1adc97){const _0x34a1a9=devices[_0x1adc97]['ip'];return jwt[_0xf20ae3(0x238)]({'username':settings[_0xf20ae3(0x141)],'clientip':_0x34a1a9},secure[_0xf20ae3(0x11b)]+_0x1adc97,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x495923=>{const _0x1203af=_0x171ce5;if(_0x495923){const _0x2bfb02=devices[_0x495923]['ip'];return jwt[_0x1203af(0x238)]({'clientip':_0x2bfb02},secure[_0x1203af(0x11b)]+_0x495923,{'expiresIn':devices[_0x495923][_0x1203af(0x223)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x327840=>{const _0x579d34=_0x171ce5;let _0x1393e5=![];return devices[_0x327840][_0x579d34(0x223)]&&devices[_0x327840][_0x579d34(0x223)][_0x579d34(0x10d)]!=_0x579d34(0xd5)&&(_0x1393e5=devices[_0x327840][_0x579d34(0x223)][_0x579d34(0x241)]==devices[_0x327840]['ip']&&new Date()[_0x579d34(0x271)]()-devices[_0x327840]['telegramIpApproval'][_0x579d34(0x21c)]<devices[_0x327840]['telegramIpApproval'][_0x579d34(0x10d)]*0x3c*0x3e8),_0x1393e5;},telegram2FaApproved=_0x14434c=>{const _0x313e96=_0x171ce5;let _0x445453=![];return devices[_0x14434c][_0x313e96(0x1da)]&&devices[_0x14434c][_0x313e96(0x1da)][_0x313e96(0x10d)]!=_0x313e96(0xd5)&&(_0x445453=devices[_0x14434c]['telegram2FaApproval']['clientip']==devices[_0x14434c]['ip']&&new Date()['getTime']()-devices[_0x14434c][_0x313e96(0x1da)][_0x313e96(0x21c)]<devices[_0x14434c][_0x313e96(0x1da)][_0x313e96(0x10d)]*0x3c*0x3e8),_0x445453;},normalizeIP=_0x230175=>{const _0x2d62da=_0x171ce5;let _0xb5c375=null,_0x1e54b5=null;if(ipaddr['isValid'](_0x230175)){const _0x1ba5be=ipaddr['parse'](_0x230175);_0x1ba5be[_0x2d62da(0x23a)]()===_0x2d62da(0x227)?(_0x1ba5be[_0x2d62da(0x237)]()&&(_0xb5c375=_0x1ba5be[_0x2d62da(0x269)]()[_0x2d62da(0x129)]()),_0x1e54b5=_0x1ba5be[_0x2d62da(0x129)]()):(_0xb5c375=_0x1ba5be[_0x2d62da(0x129)](),_0x1e54b5=_0x1ba5be[_0x2d62da(0x153)]()[_0x2d62da(0x129)]());}return{'show':_0xb5c375?_0xb5c375:_0x1e54b5,'store':_0x1e54b5};};function sleep(_0x38a985){return new Promise(_0x259187=>setTimeout(_0x259187,_0x38a985));}