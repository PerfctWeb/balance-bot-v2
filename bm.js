const _0x10960f=_0x56fe;(function(_0x352124,_0x1e56dc){const _0x127871=_0x56fe,_0x27c55f=_0x352124();while(!![]){try{const _0x5cd8d5=parseInt(_0x127871(0x1a7))/0x1*(-parseInt(_0x127871(0x133))/0x2)+-parseInt(_0x127871(0x174))/0x3+-parseInt(_0x127871(0x207))/0x4*(-parseInt(_0x127871(0x129))/0x5)+parseInt(_0x127871(0x108))/0x6*(-parseInt(_0x127871(0x12c))/0x7)+parseInt(_0x127871(0x1ca))/0x8*(-parseInt(_0x127871(0x113))/0x9)+-parseInt(_0x127871(0x162))/0xa*(-parseInt(_0x127871(0x1f0))/0xb)+-parseInt(_0x127871(0x140))/0xc*(-parseInt(_0x127871(0x227))/0xd);if(_0x5cd8d5===_0x1e56dc)break;else _0x27c55f['push'](_0x27c55f['shift']());}catch(_0x256cbf){_0x27c55f['push'](_0x27c55f['shift']());}}}(_0x2f7f,0xd727f));const _0xfa0c93=function(){let _0x4fc369=!![];return function(_0x5298ac,_0x2c915e){const _0x494780=_0x4fc369?function(){if(_0x2c915e){const _0x35c2aa=_0x2c915e['apply'](_0x5298ac,arguments);return _0x2c915e=null,_0x35c2aa;}}:function(){};return _0x4fc369=![],_0x494780;};}(),_0x230e58=_0xfa0c93(this,function(){const _0xf2bf9e=_0x56fe;return _0x230e58['toString']()[_0xf2bf9e(0x1f1)]('(((.+)+)+)+$')[_0xf2bf9e(0xf2)]()[_0xf2bf9e(0x1ed)](_0x230e58)[_0xf2bf9e(0x1f1)](_0xf2bf9e(0x19a));});_0x230e58();'use strict';process['env'][_0x10960f(0x195)]=0x1;const childProcess=require(_0x10960f(0x206)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),low=require(_0x10960f(0x189)),path=require(_0x10960f(0x1e0)),crypto=require(_0x10960f(0x167)),Crypt=require(_0x10960f(0x1c8))[_0x10960f(0x1e7)],RSA=require(_0x10960f(0x1c8))[_0x10960f(0x116)],bcrypt=require(_0x10960f(0x136)),jwt=require(_0x10960f(0x107)),analyticsLib=require('analytics')[_0x10960f(0x161)],googleAnalytics=require(_0x10960f(0x112))[_0x10960f(0x161)],ipaddr=require(_0x10960f(0xf5)),argv=require(_0x10960f(0x191))(process['argv']['slice'](0x2))[_0x10960f(0x1fc)],PORT=argv[_0x10960f(0x21a)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x10960f(0x1d4)](_0x10960f(0x172)+PORT+_0x10960f(0x168)),process['exit'](0x1);const HOST=argv[_0x10960f(0x20b)]||null,userID=argv[_0x10960f(0x18f)]||'';let bbpath=_0x10960f(0x211),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x10960f(0x1d6),securefile=_0x10960f(0x1b2);!fs[_0x10960f(0x123)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x10960f(0xee)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x10960f(0x1f8),configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x10960f(0x20d)](configpath);!fs[_0x10960f(0x123)](configbackuppath)&&fs[_0x10960f(0x20d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x10960f(0x1d5)]({'bots':[]})[_0x10960f(0x106)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x10960f(0x1d5)]({'settings':{'timeshift':0x0}})[_0x10960f(0x106)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x10960f(0x1d5)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x10960f(0xf3),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x10960f(0x1af)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x10960f(0x143)),app=express(),http=require('http')[_0x10960f(0xec)](app);app[_0x10960f(0x1cd)](express[_0x10960f(0x182)](path['join'](__dirname,bbpath2,_0x10960f(0x1d2)))),app[_0x10960f(0x1cd)](express[_0x10960f(0x182)](path[_0x10960f(0x10e)](__dirname,bbpath2,_0x10960f(0x178)))),app[_0x10960f(0xfb)]('/',function(_0x53b7b1,_0x2bead5){const _0x3227c6=_0x10960f;_0x2bead5[_0x3227c6(0x120)](path[_0x3227c6(0x10e)](__dirname,bbpath2,_0x3227c6(0x1d2),_0x3227c6(0x139)));}),app[_0x10960f(0xfb)](_0x10960f(0x196),function(_0x1f7270,_0x517f47){const _0x3cb1e5=_0x10960f;_0x517f47['sendFile'](path[_0x3cb1e5(0x10e)](__dirname,bbpath2,'build','index.html'));}),app[_0x10960f(0xfb)](_0x10960f(0x109),(_0x3107d1,_0x5bc787)=>{const _0x563c7a=_0x10960f;_0x5bc787[_0x563c7a(0x120)](path[_0x563c7a(0x10e)](__dirname,bbpath2,_0x563c7a(0x178),'index.html'));}),app[_0x10960f(0xfb)](_0x10960f(0x1c7),(_0x571c85,_0x14a642)=>{const _0x2cebc5=_0x10960f;_0x14a642[_0x2cebc5(0x120)](path[_0x2cebc5(0x10e)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x10960f(0x1ae),(_0x5eb9c8,_0x3255af)=>{const _0x4135b8=_0x10960f;_0x3255af['sendFile'](path[_0x4135b8(0x10e)](__dirname,bbpath2,_0x4135b8(0x178),_0x4135b8(0x139)));}),app[_0x10960f(0xfb)](_0x10960f(0x1cb),(_0x376694,_0x49f4ec)=>{const _0xb75bd1=_0x10960f;_0x49f4ec[_0xb75bd1(0x120)](path[_0xb75bd1(0x10e)](__dirname,bbpath2,'build',_0xb75bd1(0x139)));}),app['get']('/:bot/configuration',(_0x422122,_0x45e0f9)=>{const _0x3f3ea4=_0x10960f;_0x45e0f9[_0x3f3ea4(0x120)](path['join'](__dirname,bbpath2,_0x3f3ea4(0x178),_0x3f3ea4(0x139)));}),app[_0x10960f(0xfb)]('/:bot/support',(_0x4e934b,_0x52af77)=>{const _0x23ed94=_0x10960f;_0x52af77['sendFile'](path[_0x23ed94(0x10e)](__dirname,bbpath2,_0x23ed94(0x178),'index.html'));});if(HOST)http[_0x10960f(0x12b)](PORT,HOST);else http[_0x10960f(0x12b)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x10960f(0x1e2),'plugins':[googleAnalytics({'trackingId':_0x10960f(0x18b)})]}),TelegramBot=require(_0x10960f(0x13c));let tgBot;if(settings[_0x10960f(0x225)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x10960f(0x117)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x359ebe=_0x10960f;console[_0x359ebe(0x1d4)](''),console['log'](_0x359ebe(0x103)),logging(_0x359ebe(0x1ba)+PORT),console[_0x359ebe(0x1d4)](_0x359ebe(0x103));if(config[_0x359ebe(0xf8)]!=0x0)config[_0x359ebe(0x173)](_0x486864=>{const _0x4323b0=_0x359ebe;if(_0x486864['status']=='enabled'||_0x486864[_0x4323b0(0xeb)]==_0x4323b0(0x16e))logging(_0x4323b0(0x141)+_0x486864[_0x4323b0(0x1f6)]+_0x4323b0(0xf4)+_0x486864[_0x4323b0(0x19b)]),startBot([_0x486864[_0x4323b0(0x1f6)],userID],{'cwd':bbpath},function(_0x2c7141){if(_0x2c7141)logging(_0x2c7141);});else(_0x486864[_0x4323b0(0xeb)]==_0x4323b0(0x204)||_0x486864[_0x4323b0(0xeb)]==_0x4323b0(0x188))&&logging(_0x4323b0(0x126)+_0x486864[_0x4323b0(0x1f6)]+_0x4323b0(0xf4)+_0x486864[_0x4323b0(0x19b)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x359ebe(0x1d4)](_0x359ebe(0x103)),console[_0x359ebe(0x1d4)]('');}function startSocket(){const _0x152109=_0x10960f;io['on'](_0x152109(0x164),_0x5d485b=>{const _0x4f4dee=_0x152109;let _0x2cd9dc,_0x40f8e1,_0xb444f7,_0x3ce818,_0x29030c;const _0xf1d6c2=_0x5d485b['handshake'][_0x4f4dee(0x10f)][_0x4f4dee(0x11a)];_0x40f8e1=_0xf1d6c2[_0x4f4dee(0x1fb)](/bot[0-9]{3}/);if(_0x40f8e1)_0xb444f7=_0x40f8e1[0x0][_0x4f4dee(0x1fb)](/[0-9]{3}/);if(_0xb444f7)_0x2cd9dc=_0xb444f7[0x0];else _0x2cd9dc=_0x4f4dee(0x1c6);const _0x28f7f3=_0x5d485b[_0x4f4dee(0x1e8)][_0x4f4dee(0x21c)][_0x4f4dee(0x1a0)];if(!_0x28f7f3)_0x5d485b[_0x4f4dee(0x1b1)](_0x4f4dee(0xeb),{'publicKey':secure['publicKey']});else{_0x3ce818=timelyDecrypt(_0x28f7f3,![]);if(!_0x3ce818)_0x5d485b[_0x4f4dee(0x1b1)](_0x4f4dee(0xeb),{'publicKey':secure['publicKey']});else{_0x29030c=normalizeIP(_0x5d485b['conn'][_0x4f4dee(0x142)])['store'];if(!devices[_0x3ce818])devices[_0x3ce818]={'uuid':_0x3ce818,'access':{'token':null}};devices[_0x3ce818]['ip']=_0x29030c;const _0x12f792=addClient(_0x5d485b['id'],_0x3ce818,_0x2cd9dc);setAccess(_0x12f792),_0x5d485b['on']('login',_0x1d1f9a=>{const _0x3fbbdd=_0x4f4dee,_0x448ae8=timelyDecrypt(_0x1d1f9a['password']);if(_0x448ae8){_0x1d1f9a={'username':_0x1d1f9a[_0x3fbbdd(0xf0)],'password':_0x448ae8},devices[_0x3ce818]['access']=validateCredentials(_0x1d1f9a,_0x3ce818);if(devices[_0x3ce818][_0x3fbbdd(0x185)][_0x3fbbdd(0x1be)]==![]&&devices[_0x3ce818]['access'][_0x3fbbdd(0x15a)]==_0x3fbbdd(0x166))_0x5d485b['emit'](_0x3fbbdd(0xeb),{'access':devices[_0x3ce818][_0x3fbbdd(0x185)]}),loginAccess2FA(_0x3ce818,_0x29030c);else{if(devices[_0x3ce818][_0x3fbbdd(0x185)]['allow']==![]&&devices[_0x3ce818]['access'][_0x3fbbdd(0x15a)]==_0x3fbbdd(0x190))_0x5d485b[_0x3fbbdd(0x1b1)](_0x3fbbdd(0xeb),{'access':devices[_0x3ce818]['access']});else devices[_0x3ce818][_0x3fbbdd(0x185)][_0x3fbbdd(0x1be)]&&devices[_0x3ce818][_0x3fbbdd(0x185)][_0x3fbbdd(0x15a)]==_0x3fbbdd(0x169)&&(getClientsWithUuid(_0x3ce818)[_0x3fbbdd(0x173)](_0x33bcb8=>{setAccess(_0x33bcb8);}),setTokenRefresh(_0x3ce818),setSessionTimeout(_0x3fbbdd(0x156),_0x3ce818));}}else logging(_0x3fbbdd(0x1da));}),_0x5d485b['on']('reset-password',()=>{resetPassword();}),_0x5d485b['on'](_0x4f4dee(0xfd),_0x27c0e5=>{removeClient(_0x5d485b['id']);});}}});}function initClient(_0xfb1f68){const _0x3cdc28=_0x10960f;if(_0xfb1f68!=_0x3cdc28(0x1c6)&&config[_0x3cdc28(0x14d)]!=''){if(pid[_0xfb1f68])pid[_0xfb1f68]['send']({'function':_0x3cdc28(0x1bf),'args':null});}}function getSocket(_0x4cd242){const _0x2b3629=_0x10960f;return io[_0x2b3629(0x19e)]['sockets'][_0x2b3629(0xfb)](_0x4cd242);}function setAccess(_0x258003){const _0x30765a=_0x10960f,_0x416f5f=getSocket(_0x258003['id']),_0x35e413=_0x258003['uuid'],_0x3fb09d=_0x258003['bot'];devices[_0x35e413][_0x30765a(0x185)]=validateAccess(devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x1b8)],_0x35e413),_0x416f5f['join'](_0x35e413);if(devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x1be)]){_0x416f5f[_0x30765a(0x10e)](_0x3fb09d);if(_0x3fb09d==_0x30765a(0x1c6))initializeSocketBotManager(_0x416f5f);else initializeSocketBot(_0x416f5f);initClient(_0x3fb09d);}devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x1b8)]&&devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x15a)]==_0x30765a(0x1aa)&&setSessionTimeout(_0x30765a(0x15f),_0x35e413),devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x1b8)]&&devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x15a)]==_0x30765a(0x1b3)&&setSessionTimeout(_0x30765a(0x156),_0x35e413),_0x416f5f['emit']('status',{'status':_0x258003['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x35e413]['access'],'externalip':devices[_0x35e413]['ip'],'publicKey':secure[_0x30765a(0x1f7)]}),devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x1be)]==![]&&devices[_0x35e413][_0x30765a(0x185)][_0x30765a(0x15a)]==_0x30765a(0x144)&&temporaryAccess2FA(_0x35e413,devices[_0x35e413]['ip']);}function setSessionTimeout(_0x3699cf,_0x409fae){const _0x2ebeb9=_0x10960f;let _0x5eeece;if(_0x3699cf==_0x2ebeb9(0x156))_0x5eeece=loginExpiry*0x3c*0x3e8;else _0x5eeece=devices[_0x409fae]['telegramIpApproval'][_0x2ebeb9(0x21e)]*0x3c*0x3e8-(new Date()[_0x2ebeb9(0x1f2)]()-devices[_0x409fae][_0x2ebeb9(0x1ac)][_0x2ebeb9(0xe7)]);if(devices[_0x409fae][_0x2ebeb9(0x15b)])clearTimeout(devices[_0x409fae][_0x2ebeb9(0x15b)]);devices[_0x409fae][_0x2ebeb9(0x15b)]=setTimeout(()=>{const _0x1545c3=_0x2ebeb9;if(devices[_0x409fae][_0x1545c3(0x1b9)])clearTimeout(devices[_0x409fae][_0x1545c3(0x1b9)]);removeSocketListeners(_0x409fae),addBlacklist(_0x409fae),devices[_0x409fae][_0x1545c3(0x1ac)]=null,devices[_0x409fae][_0x1545c3(0x1e5)]=null,devices[_0x409fae][_0x1545c3(0x185)][_0x1545c3(0x1b8)]=null,devices[_0x409fae][_0x1545c3(0x185)]=validateAccess(devices[_0x409fae][_0x1545c3(0x185)][_0x1545c3(0x1b8)],_0x409fae),!(devices[_0x409fae]['access'][_0x1545c3(0x1be)]&&devices[_0x409fae][_0x1545c3(0x185)][_0x1545c3(0x15a)]==_0x1545c3(0x1cc))&&(_0x3699cf=='login'?io['to'](_0x409fae)[_0x1545c3(0x1b1)](_0x1545c3(0xeb),{'access':{'allow':![],'reason':_0x1545c3(0x13b),'token':null}}):io['to'](_0x409fae)[_0x1545c3(0x1b1)](_0x1545c3(0xeb),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x409fae][_0x1545c3(0x185)][_0x1545c3(0x1b8)]=null;},_0x5eeece);}function setTokenRefresh(_0x10deed){const _0x10fb60=_0x10960f;if(devices[_0x10deed]['pidRefreshToken'])clearTimeout(devices[_0x10deed][_0x10fb60(0x1b9)]);devices[_0x10deed][_0x10fb60(0x1b9)]=setTimeout(()=>{const _0x3c0a0d=_0x10fb60;getClientsWithUuid(_0x10deed)[_0x3c0a0d(0xf8)]!=0x0?(devices[_0x10deed][_0x3c0a0d(0x185)]=refreshToken(_0x10deed),io['to'](_0x10deed)[_0x3c0a0d(0x1b1)](_0x3c0a0d(0xeb),{'status':_0x3c0a0d(0x12a),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x10deed]['access'],'externalip':devices[_0x10deed]['ip'],'publicKey':secure[_0x3c0a0d(0x1f7)]}),setTokenRefresh(_0x10deed)):clearTimeout(devices[_0x10deed][_0x3c0a0d(0x1b9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x712868){const _0x25c310=_0x10960f,_0x302464=getClient(_0x712868['id'])['uuid'];_0x712868[_0x25c310(0x1b1)](_0x25c310(0x1de),config),_0x712868[_0x25c310(0x1b1)](_0x25c310(0x17e),cleanSettings()),_0x712868['on'](_0x25c310(0x200),_0x4fc4f8=>{const _0x1ede93=_0x25c310;if(validateAccess(_0x4fc4f8,_0x302464)['allow'])addBot();else logging(_0x1ede93(0x1b4));}),_0x712868['on']('update-bot',(_0x26df14,_0xe38d71)=>{const _0x3463a3=_0x25c310;if(validateAccess(_0xe38d71,_0x302464)[_0x3463a3(0x1be)])toggleBot(_0x26df14[_0x3463a3(0x1f6)],_0x26df14[_0x3463a3(0xeb)],_0x26df14['live']);else logging(_0x3463a3(0xed));}),_0x712868['on'](_0x25c310(0x13a),(_0x119963,_0x21b3c7)=>{const _0x165cd2=_0x25c310;if(validateAccess(_0x21b3c7,_0x302464)[_0x165cd2(0x1be)])deleteBot(_0x119963);else logging(_0x165cd2(0x15c));}),_0x712868['on'](_0x25c310(0x119),(_0x1a9618,_0x282d85)=>{const _0x171e30=_0x25c310;if(validateAccess(_0x282d85,_0x302464)[_0x171e30(0x1be)])storeSettings(_0x1a9618,!![]);else logging(_0x171e30(0x20f));}),_0x712868['on'](_0x25c310(0x180),(_0x34f9bf,_0x232ea9)=>{const _0x5c2838=_0x25c310;if(validateAccess(_0x232ea9,_0x302464)[_0x5c2838(0x1be)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x712868['on'](_0x25c310(0x1bc),_0x563c02=>{const _0x12a89e=_0x25c310;if(validateAccess(_0x563c02,_0x302464)[_0x12a89e(0x1be)]){if(devices[_0x302464][_0x12a89e(0x1b9)])clearTimeout(devices[_0x302464][_0x12a89e(0x1b9)]);if(devices[_0x302464][_0x12a89e(0x15b)])clearTimeout(devices[_0x302464][_0x12a89e(0x15b)]);removeSocketListeners(getClient(_0x712868['id'])['uuid']),addBlacklist(_0x302464),devices[_0x302464]['telegramIpApproval']=null,devices[_0x302464][_0x12a89e(0x1e5)]=null,devices[_0x302464][_0x12a89e(0x185)][_0x12a89e(0x1b8)]=null,io['to'](getClient(_0x712868['id'])[_0x12a89e(0x10a)])[_0x12a89e(0x1b1)]('status',{'access':{'allow':![],'reason':_0x12a89e(0x171),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x39dc21){const _0x3625d9=_0x10960f,_0x564ab3=getClient(_0x39dc21['id'])[_0x3625d9(0x131)],_0x40c687=getClient(_0x39dc21['id'])[_0x3625d9(0x10a)];_0x39dc21['on'](_0x3625d9(0x102),(_0x5ec5de,_0x56ee66)=>{const _0x5429c2=_0x3625d9;if(validateAccess(_0x56ee66,_0x40c687)[_0x5429c2(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3][_0x5429c2(0x10c)]({'function':_0x5429c2(0x110),'args':_0x5ec5de});}else logging(_0x5429c2(0x148));}),_0x39dc21['on']('get-portfolio',(_0x16d30b,_0x5114d4)=>{const _0xa37906=_0x3625d9;if(validateAccess(_0x5114d4,_0x40c687)[_0xa37906(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3][_0xa37906(0x10c)]({'function':_0xa37906(0x124),'args':_0x16d30b});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x39dc21['on'](_0x3625d9(0x1c1),(_0x1cffb8,_0x3d67ef)=>{const _0x14ed6=_0x3625d9;if(validateAccess(_0x3d67ef,_0x40c687)[_0x14ed6(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3][_0x14ed6(0x10c)]({'function':_0x14ed6(0x10d),'args':_0x1cffb8});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x39dc21['on']('store-headless',(_0x154549,_0x4f92fa)=>{const _0xc7954d=_0x3625d9;if(validateAccess(_0x4f92fa,_0x40c687)[_0xc7954d(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3][_0xc7954d(0x10c)]({'function':'storeHeadless','args':_0x154549});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x39dc21['on'](_0x3625d9(0x224),_0x5cd04c=>{const _0x273c96=_0x3625d9;if(validateAccess(_0x5cd04c,_0x40c687)[_0x273c96(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3]['send']({'function':_0x273c96(0x11f),'args':null});}else logging(_0x273c96(0x1e6));}),_0x39dc21['on'](_0x3625d9(0x17f),(_0x31b989,_0x2fc497)=>{const _0x94172e=_0x3625d9;if(validateAccess(_0x2fc497,_0x40c687)[_0x94172e(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3][_0x94172e(0x10c)]({'function':_0x94172e(0x15d),'args':_0x31b989});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x39dc21['on']('cancel-loading',_0x14775c=>{const _0x1a478e=_0x3625d9;if(validateAccess(_0x14775c,_0x40c687)[_0x1a478e(0x1be)]){if(pid[_0x564ab3])pid[_0x564ab3]['send']({'function':_0x1a478e(0x14e),'args':null});}else logging(_0x1a478e(0x149));}),_0x39dc21['on'](_0x3625d9(0x1bc),_0x1c703d=>{const _0x1c4222=_0x3625d9;if(validateAccess(_0x1c703d,_0x40c687)[_0x1c4222(0x1be)]){if(devices[_0x40c687][_0x1c4222(0x1b9)])clearTimeout(devices[_0x40c687][_0x1c4222(0x1b9)]);if(devices[_0x40c687][_0x1c4222(0x15b)])clearTimeout(devices[_0x40c687]['pidExpireLogin']);removeSocketListeners(getClient(_0x39dc21['id'])[_0x1c4222(0x10a)]),addBlacklist(_0x40c687),devices[_0x40c687][_0x1c4222(0x1ac)]=null,devices[_0x40c687][_0x1c4222(0x1e5)]=null,devices[_0x40c687]['access'][_0x1c4222(0x1b8)]=null,io['to'](getClient(_0x39dc21['id'])['uuid'])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x3e467a){getClientsWithUuid(_0x3e467a)['forEach'](_0x2d1ad9=>{const _0x25de7e=_0x56fe;getSocket(_0x2d1ad9['id'])[_0x25de7e(0x1a3)]();});}function cleanSettings(){const _0x390ec6=_0x10960f;let _0x739bd1=settings;return settings[_0x390ec6(0x225)]&&settings[_0x390ec6(0x225)]!=''&&(_0x739bd1={..._0x739bd1,'telegramToken':_0x390ec6(0x160)}),settings[_0x390ec6(0x1f3)]&&settings['bbPassword']!=''&&(_0x739bd1={..._0x739bd1,'bbPassword':'************'}),_0x739bd1;}function updateBB(){const _0x359441=_0x10960f;installingUpdate=!![],config[_0x359441(0x173)](_0x2cd934=>{restartBot(_0x2cd934['botID']);}),process[_0x359441(0x10c)]({'update':!![]},_0xb92216=>{});}function startBot(_0x1dd520,_0x43a263,_0x2af786){const _0x3681e7=_0x10960f;let _0x447530=![];const _0x1b92d6=_0x1dd520[0x0];_0x43a263={..._0x43a263,'stdio':[_0x3681e7(0x1ce),'inherit','inherit',_0x3681e7(0x20e)]},pid[_0x1b92d6]=childProcess[_0x3681e7(0x1c3)](botfile,_0x1dd520,_0x43a263),pid[_0x1b92d6]['on'](_0x3681e7(0x170),_0xb22e0f=>{const _0x2b68be=_0x3681e7;switch(Object[_0x2b68be(0x12d)](_0xb22e0f)[0x0]){case _0x2b68be(0x19b):updateBotName(_0x1b92d6,_0xb22e0f[_0x2b68be(0x19b)]);break;case'status':updateStatus(_0x1b92d6,_0xb22e0f['status']);break;case'live':updateLive(_0x1b92d6,_0xb22e0f[_0x2b68be(0x1c2)]);break;case _0x2b68be(0x12f):updateLive(_0x1b92d6,_0xb22e0f[_0x2b68be(0x12f)]),io['to'](_0x1b92d6)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x2b68be(0x121):_0xb22e0f['stop']=='restart'&&restartBot(_0x1b92d6);_0xb22e0f['stop']==_0x2b68be(0x10b)&&toggleBot(_0x1b92d6,_0x2b68be(0x204),'stopped');break;case _0x2b68be(0x105):sendTelegram(_0x1b92d6,_0xb22e0f[_0x2b68be(0x105)]);break;case _0x2b68be(0x198):io['to'](_0x1b92d6)[_0x2b68be(0x1b1)](_0xb22e0f['function'],_0xb22e0f[_0x2b68be(0x1bb)]);break;}}),pid[_0x1b92d6]['on'](_0x3681e7(0x111),function(_0x76491){if(_0x447530)return;_0x447530=!![],_0x2af786(_0x76491);}),pid[_0x1b92d6]['on'](_0x3681e7(0x17a),function(_0x587ba7){const _0x213b29=_0x3681e7;if(installingUpdate)return;if(_0x447530)return;_0x447530=!![],_0x2af786(null);const _0x2c6f78=dbConfig[_0x213b29(0xfb)]('bots')[_0x213b29(0x208)]({'botID':_0x1b92d6})['value']();_0x2c6f78&&(_0x2c6f78[_0x213b29(0xeb)]==_0x213b29(0x215)||_0x2c6f78[_0x213b29(0xeb)]==_0x213b29(0x16e))&&(updateLive(_0x1b92d6,_0x213b29(0x130)),logging(_0x213b29(0x165)+_0x1b92d6),startBot([_0x1b92d6,userID],{'cwd':bbpath},function(_0x3ae881){if(_0x3ae881)logging(_0x3ae881);}));});}function stopBot(_0x4cbd28){const _0x357da9=_0x10960f;getClientsWithBotID(_0x4cbd28)[_0x357da9(0x173)](_0x5383e8=>{const _0x2c872f=_0x357da9;getSocket(_0x5383e8['id'])[_0x2c872f(0xfd)](!![]),removeClient(_0x5383e8['id']);});if(pid[_0x4cbd28])pid[_0x4cbd28]['kill']();}function restartBot(_0x5a084b){const _0x1cfe50=_0x10960f;if(pid[_0x5a084b])pid[_0x5a084b][_0x1cfe50(0x10b)]();}function addBot(){const _0x46fa43=_0x10960f;let _0x202cff;for(let _0x10a4b9=0x1;_0x10a4b9<0x3e9;_0x10a4b9++){_0x202cff=_0x10a4b9['toString']()[_0x46fa43(0x19d)](0x3,'0');let _0x5ca295=config[_0x46fa43(0x208)](_0x2a21cc=>_0x2a21cc[_0x46fa43(0x1f6)]==_0x202cff);if(!_0x5ca295)break;}if(_0x202cff===_0x46fa43(0x137)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x46fa43(0x1b7)+_0x202cff),dbConfig['get']('bots')[_0x46fa43(0x176)]({'botID':_0x202cff,'botname':'Bot\x20'+_0x202cff,'status':_0x46fa43(0x16e),'live':''})[_0x46fa43(0x106)](),startBot([_0x202cff,userID],{'cwd':bbpath},function(_0x598868){if(_0x598868)logging(_0x598868);}),config=getConfiguration(),io['to']('botmanager')[_0x46fa43(0x1b1)](_0x46fa43(0x1de),config);}function deleteBot(_0x5657d5){const _0x4b3bed=_0x10960f;getClientsWithBotID(_0x5657d5)[_0x4b3bed(0x173)](_0x7f36b6=>{getSocket(_0x7f36b6['id'])['disconnect'](!![]),removeClient(_0x7f36b6['id']);}),dbConfig[_0x4b3bed(0xfb)](_0x4b3bed(0x1de))[_0x4b3bed(0x157)]({'botID':_0x5657d5})[_0x4b3bed(0x106)](),logging('deleted\x20Bot\x20'+_0x5657d5),stopBot(_0x5657d5);try{fs['unlinkSync'](path[_0x4b3bed(0x10e)](configpath,_0x4b3bed(0x14c)+_0x5657d5+'-config.json')),fs['unlinkSync'](path[_0x4b3bed(0x10e)](configpath,_0x4b3bed(0x14c)+_0x5657d5+_0x4b3bed(0x1d0))),fs[_0x4b3bed(0x11c)](path[_0x4b3bed(0x10e)](configpath,_0x4b3bed(0x14c)+_0x5657d5+_0x4b3bed(0x21d))),fs[_0x4b3bed(0x11c)](path[_0x4b3bed(0x10e)](configpath,'bot-'+_0x5657d5+_0x4b3bed(0x210)));}catch(_0xe12909){if(_0xe12909)logging(_0x4b3bed(0x1ff),_0xe12909);}config=getConfiguration(),io['to'](_0x4b3bed(0x1c6))[_0x4b3bed(0x1b1)](_0x4b3bed(0x1de),config);}function toggleBot(_0xf9aee6,_0x7a5896,_0x4735b4){const _0x5c6054=_0x10960f;dbConfig['get']('bots')['find']({'botID':_0xf9aee6})['assign']({'status':_0x7a5896})['assign']({'live':_0x4735b4})[_0x5c6054(0x106)]();if(_0x7a5896==_0x5c6054(0x215)||_0x7a5896==_0x5c6054(0x16e))logging('enabled\x20Bot\x20'+_0xf9aee6),startBot([_0xf9aee6,userID],{'cwd':bbpath},function(_0x19feed){if(_0x19feed)logging(_0x19feed);});else(_0x7a5896=='disabled'||_0x7a5896==_0x5c6054(0x188))&&(logging('disabled\x20Bot\x20'+_0xf9aee6),stopBot(_0xf9aee6));config=getConfiguration(),io['to'](_0x5c6054(0x1c6))[_0x5c6054(0x1b1)](_0x5c6054(0x1de),config);}function toggleStatus(_0x2f2ef7){const _0x350878=_0x10960f;let _0x15b7b3=dbConfig[_0x350878(0xfb)](_0x350878(0x1de))[_0x350878(0x208)]({'botID':_0x2f2ef7})[_0x350878(0x153)](),_0xd7a77f;if(_0x15b7b3[_0x350878(0xeb)]===_0x350878(0x215))_0xd7a77f='disabled';else{if(_0x15b7b3[_0x350878(0xeb)]===_0x350878(0x16e))_0xd7a77f=_0x350878(0x188);else{if(_0x15b7b3[_0x350878(0xeb)]==='new-disabled')_0xd7a77f=_0x350878(0x16e);else{if(_0x15b7b3[_0x350878(0xeb)]===_0x350878(0x204))_0xd7a77f=_0x350878(0x215);}}}return _0xd7a77f;}function updateStatus(_0xb65dda,_0x319557){const _0x90a5a8=_0x10960f;dbConfig['get'](_0x90a5a8(0x1de))[_0x90a5a8(0x208)]({'botID':_0xb65dda})[_0x90a5a8(0x212)]({'status':_0x319557})[_0x90a5a8(0x106)](),config=getConfiguration(),io['to'](_0x90a5a8(0x1c6))['emit']('bots',config);}function updateLive(_0x3e87ba,_0x28af36){const _0x4e3ae3=_0x10960f;dbConfig[_0x4e3ae3(0xfb)](_0x4e3ae3(0x1de))[_0x4e3ae3(0x208)]({'botID':_0x3e87ba})['assign']({'live':_0x28af36})[_0x4e3ae3(0x106)](),config=getConfiguration(),io['to'](_0x4e3ae3(0x1c6))[_0x4e3ae3(0x1b1)](_0x4e3ae3(0x1de),config);}function updateBotName(_0x198770,_0x176a66){const _0x2010a4=_0x10960f;dbConfig[_0x2010a4(0xfb)](_0x2010a4(0x1de))['find']({'botID':_0x198770})[_0x2010a4(0x212)]({'botname':_0x176a66})['write'](),config=getConfiguration(),io['to'](_0x2010a4(0x1c6))[_0x2010a4(0x1b1)](_0x2010a4(0x1de),config);}function _0x56fe(_0x4db6ec,_0x3e962f){const _0x1cc7c0=_0x2f7f();return _0x56fe=function(_0x230e58,_0xfa0c93){_0x230e58=_0x230e58-0xe7;let _0x2f7f52=_0x1cc7c0[_0x230e58];return _0x2f7f52;},_0x56fe(_0x4db6ec,_0x3e962f);}function telegramError(_0x144c70){const _0xef24ee=_0x10960f;console['log'](getTimeStamp()+_0xef24ee(0x20c));}function validateTelegram(_0x2cc71a){const _0x54b4e9=_0x10960f;if(_0x2cc71a[_0x54b4e9(0x1e3)][_0x54b4e9(0xf0)]!=settings[_0x54b4e9(0x117)]&&'@'+_0x2cc71a[_0x54b4e9(0x1e3)][_0x54b4e9(0xf0)]!=settings[_0x54b4e9(0x117)])return tgBot[_0x54b4e9(0x158)](_0x2cc71a['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x54b4e9(0x127)})[_0x54b4e9(0x186)](_0x437576=>{telegramError(_0x437576);}),![];return!![];}async function initTelegram(){const _0x25b840=_0x10960f;if(tgBot)tgBot[_0x25b840(0x177)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x25b840(0x225)],{'polling':!![]});let _0x278d3e='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x278d3e+='\x0a',_0x278d3e+=_0x25b840(0x1bd),_0x278d3e+=_0x25b840(0x134),_0x278d3e+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x278d3e+=_0x25b840(0x194),_0x278d3e+=_0x25b840(0x218),_0x278d3e+='/off\x20-\x20stop\x20bot(s)\x0a',_0x278d3e+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x278d3e+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3f9b6b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x3f9b6b+='\x0a',_0x3f9b6b+=_0x278d3e,tgBot['onText'](/\/start/,_0x2245c2=>{const _0xe09975=_0x25b840;if(!validateTelegram(_0x2245c2))return;if(settings[_0xe09975(0x1cf)]!=_0x2245c2[_0xe09975(0x11d)]['id'])updateSetting(_0xe09975(0x1cf),_0x2245c2['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x2245c2[_0xe09975(0x11d)]['id'],_0x3f9b6b)[_0xe09975(0x186)](_0x3bcaa2=>{telegramError(_0x3bcaa2);});}),tgBot['onText'](/\/enable/,_0x21268e=>{const _0x348c4c=_0x25b840;if(!validateTelegram(_0x21268e))return;if(settings[_0x348c4c(0x1cf)]!=_0x21268e[_0x348c4c(0x11d)]['id'])updateSetting('telegramChatId',_0x21268e[_0x348c4c(0x11d)]['id']);updateSetting(_0x348c4c(0x15e),!![]),tgBot[_0x348c4c(0x158)](_0x21268e['chat']['id'],_0x348c4c(0x1d7))[_0x348c4c(0x186)](_0x4a591e=>{telegramError(_0x4a591e);});}),tgBot[_0x25b840(0x221)](/\/config/,async _0x32268e=>{const _0x24e86e=_0x25b840;if(!validateTelegram(_0x32268e))return;tgBot['removeListener'](_0x24e86e(0x1d3)),tgBot[_0x24e86e(0x158)](_0x32268e[_0x24e86e(0x11d)]['id'],_0x24e86e(0xf9),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x24e86e(0x21b)},{'text':_0x24e86e(0x155),'callback_data':_0x24e86e(0x1b0)},{'text':_0x24e86e(0x101),'callback_data':'all'}]]}})[_0x24e86e(0x186)](_0x3b2fd8=>{telegramError(_0x3b2fd8);}),tgBot['on']('callback_query',async _0x2b99ea=>{const _0x2d858b=_0x24e86e,_0xd0879f=_0x2b99ea[_0x2d858b(0x1f4)],_0x49e50b=_0x2b99ea['message'];tgBot[_0x2d858b(0x19c)](_0x2b99ea['id'])[_0x2d858b(0x184)](async()=>{const _0x235b1f=_0x2d858b;_0xd0879f==_0x235b1f(0x21b)&&(updateSetting(_0x235b1f(0x16a),_0x235b1f(0x21b)),updateSetting(_0x235b1f(0x15e),!![]),await tgBot[_0x235b1f(0x158)](_0x49e50b[_0x235b1f(0x11d)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x235b1f(0x186)](_0x18cda8=>{telegramError(_0x18cda8);}));_0xd0879f==_0x235b1f(0x1b0)&&(updateSetting('telegramEvents',_0x235b1f(0x1b0)),updateSetting(_0x235b1f(0x15e),!![]),await tgBot[_0x235b1f(0x158)](_0x49e50b[_0x235b1f(0x11d)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x235b1f(0x186)](_0x22e270=>{telegramError(_0x22e270);}));_0xd0879f==_0x235b1f(0x209)&&(updateSetting('telegramEvents',_0x235b1f(0x209)),updateSetting(_0x235b1f(0x15e),!![]),await tgBot[_0x235b1f(0x158)](_0x49e50b[_0x235b1f(0x11d)]['id'],_0x235b1f(0x1a4))[_0x235b1f(0x186)](_0x34d180=>{telegramError(_0x34d180);}));if(!settings[_0x235b1f(0x1cf)])tgBot['sendMessage'](_0x49e50b['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x235b1f(0x186)](_0x189292=>{telegramError(_0x189292);});}),tgBot[_0x2d858b(0x1b5)](_0x2d858b(0x1d3));});}),tgBot[_0x25b840(0x221)](/\/status/,_0x8fcb48=>{const _0x53889d=_0x25b840;if(!validateTelegram(_0x8fcb48))return;let _0x56b105=_0x53889d(0x1a5);config[_0x53889d(0x173)](_0x536e5c=>{const _0x363a64=_0x53889d;_0x56b105+=_0x363a64(0x13e)+_0x536e5c['botID']+_0x363a64(0xf4)+_0x536e5c['botname']+':\x20'+_0x536e5c[_0x363a64(0xeb)]+_0x363a64(0x17d)+_0x536e5c[_0x363a64(0x1c2)]+'\x0a';}),_0x56b105+='\x0a',_0x56b105+=_0x53889d(0x18e),_0x56b105+=!settings['telegramEnabled']?_0x53889d(0x1dd):_0x53889d(0x125),_0x56b105+=settings[_0x53889d(0x15e)]?settings['telegramEvents']==_0x53889d(0x209)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x53889d(0x16a)]+_0x53889d(0x16f):'',tgBot[_0x53889d(0x158)](_0x8fcb48[_0x53889d(0x11d)]['id'],_0x56b105,{'parse_mode':_0x53889d(0x127)})['catch'](_0x4b6bad=>{telegramError(_0x4b6bad);});}),tgBot[_0x25b840(0x221)](/\/restart/,_0x21f296=>{const _0x78b1da=_0x25b840;if(!validateTelegram(_0x21f296))return;tgBot[_0x78b1da(0x1b5)](_0x78b1da(0x1d3));const _0x5af9f3=getEnabledBots();if(_0x5af9f3[_0x78b1da(0xf8)]==0x0)tgBot['sendMessage'](_0x21f296['chat']['id'],_0x78b1da(0x122))['catch'](_0x1daa4d=>{telegramError(_0x1daa4d);});else{if(_0x5af9f3[_0x78b1da(0xf8)]>0x1)_0x5af9f3[_0x78b1da(0x176)]({'botID':_0x78b1da(0x209)});let _0x20c84c=[],_0x72223a=[];const _0x1bf49b=_0x5af9f3['length']%0x4==0x0||_0x5af9f3[_0x78b1da(0xf8)]%0x4==0x3||_0x5af9f3[_0x78b1da(0xf8)]%0x3==0x1?0x4:0x3;let _0x44ba19=0x0;_0x5af9f3[_0x78b1da(0x173)]((_0x1a8e48,_0xd24818)=>{const _0x209777=_0x78b1da;if(_0xd24818%_0x1bf49b==0x0)_0x72223a=[];_0x72223a['push']({'text':_0x1a8e48[_0x209777(0x1f6)]==_0x209777(0x209)?_0x209777(0x1ef):'Bot\x20'+_0x1a8e48[_0x209777(0x1f6)],'callback_data':_0x1a8e48[_0x209777(0x1f6)]}),_0xd24818%_0x1bf49b==0x0&&(_0x20c84c[_0x44ba19]=_0x72223a,_0x44ba19++);}),tgBot[_0x78b1da(0x158)](_0x21f296['chat']['id'],_0x78b1da(0x1c0),{'reply_markup':{'inline_keyboard':_0x20c84c}})[_0x78b1da(0x186)](_0x23034f=>{telegramError(_0x23034f);}),tgBot['on'](_0x78b1da(0x1d3),async _0x2fd62a=>{const _0x470213=_0x78b1da,_0x15a074=_0x2fd62a[_0x470213(0x1f4)],_0x3c22ff=_0x2fd62a['message'];tgBot[_0x470213(0x19c)](_0x2fd62a['id'])['then'](async()=>{const _0x155ead=_0x470213;if(_0x15a074==_0x155ead(0x209)){if(settings['telegramEvents']=='orders')tgBot[_0x155ead(0x158)](_0x3c22ff[_0x155ead(0x11d)]['id'],_0x155ead(0x175))[_0x155ead(0x186)](_0x417b91=>{telegramError(_0x417b91);});config['forEach'](_0x5d69f9=>{const _0x15b494=_0x155ead;restartBot(_0x5d69f9[_0x15b494(0x1f6)]);});}else{if(settings[_0x155ead(0x16a)]==_0x155ead(0x21b))tgBot[_0x155ead(0x158)](_0x3c22ff[_0x155ead(0x11d)]['id'],_0x155ead(0x1dc)+_0x15a074)[_0x155ead(0x186)](_0x25f060=>{telegramError(_0x25f060);});restartBot(_0x15a074);}}),tgBot['removeListener'](_0x470213(0x1d3));});}}),tgBot[_0x25b840(0x221)](/\/on/,_0x242692=>{const _0x9beeb6=_0x25b840;if(!validateTelegram(_0x242692))return;tgBot[_0x9beeb6(0x1b5)]('callback_query');const _0x4c54ea=getDisabledBots();if(_0x4c54ea[_0x9beeb6(0xf8)]==0x0)tgBot[_0x9beeb6(0x158)](_0x242692[_0x9beeb6(0x11d)]['id'],_0x9beeb6(0x16b))[_0x9beeb6(0x186)](_0x44ba66=>{telegramError(_0x44ba66);});else{if(_0x4c54ea[_0x9beeb6(0xf8)]>0x1)_0x4c54ea[_0x9beeb6(0x176)]({'botID':'all'});let _0x341440=[],_0x51d3a2=[];const _0x566edf=_0x4c54ea[_0x9beeb6(0xf8)]%0x4==0x0||_0x4c54ea[_0x9beeb6(0xf8)]%0x4==0x3||_0x4c54ea[_0x9beeb6(0xf8)]%0x3==0x1?0x4:0x3;let _0x36b34f=0x0;_0x4c54ea[_0x9beeb6(0x173)]((_0x2cf63c,_0x410a53)=>{const _0x52f8be=_0x9beeb6;if(_0x410a53%_0x566edf==0x0)_0x51d3a2=[];_0x51d3a2['push']({'text':_0x2cf63c[_0x52f8be(0x1f6)]==_0x52f8be(0x209)?'All\x20bots':'Bot\x20'+_0x2cf63c[_0x52f8be(0x1f6)],'callback_data':_0x2cf63c[_0x52f8be(0x1f6)]}),_0x410a53%_0x566edf==0x0&&(_0x341440[_0x36b34f]=_0x51d3a2,_0x36b34f++);}),tgBot[_0x9beeb6(0x158)](_0x242692[_0x9beeb6(0x11d)]['id'],_0x9beeb6(0x202),{'reply_markup':{'inline_keyboard':_0x341440}})[_0x9beeb6(0x186)](_0x2e9661=>{telegramError(_0x2e9661);}),tgBot['on']('callback_query',async _0x41497f=>{const _0x108953=_0x9beeb6,_0x366bd1=_0x41497f[_0x108953(0x1f4)],_0x2313d5=_0x41497f[_0x108953(0x170)];tgBot[_0x108953(0x19c)](_0x41497f['id'])[_0x108953(0x184)](async()=>{const _0x1d04ec=_0x108953;if(_0x366bd1==_0x1d04ec(0x209)){if(settings[_0x1d04ec(0x16a)]==_0x1d04ec(0x21b))tgBot[_0x1d04ec(0x158)](_0x2313d5[_0x1d04ec(0x11d)]['id'],_0x1d04ec(0x1df))[_0x1d04ec(0x186)](_0x20d08d=>{telegramError(_0x20d08d);});_0x4c54ea[_0x1d04ec(0x173)](_0x166a6f=>{const _0x57f0ac=_0x1d04ec;if(_0x166a6f[_0x57f0ac(0x1f6)]!=_0x57f0ac(0x209))toggleBot(_0x166a6f['botID'],toggleStatus(_0x166a6f[_0x57f0ac(0x1f6)]),_0x57f0ac(0x130));});}else{if(settings[_0x1d04ec(0x16a)]==_0x1d04ec(0x21b))tgBot[_0x1d04ec(0x158)](_0x2313d5['chat']['id'],_0x1d04ec(0x213)+_0x366bd1)[_0x1d04ec(0x186)](_0x20ea44=>{telegramError(_0x20ea44);});toggleBot(_0x366bd1,toggleStatus(_0x366bd1),'stopped');}}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/off/,_0x489109=>{const _0x3c46c4=_0x25b840;if(!validateTelegram(_0x489109))return;tgBot['removeListener']('callback_query');const _0x1e6d8d=getEnabledBots();if(_0x1e6d8d[_0x3c46c4(0xf8)]==0x0)tgBot[_0x3c46c4(0x158)](_0x489109['chat']['id'],_0x3c46c4(0x122))[_0x3c46c4(0x186)](_0x26d130=>{telegramError(_0x26d130);});else{if(_0x1e6d8d[_0x3c46c4(0xf8)]>0x1)_0x1e6d8d['push']({'botID':_0x3c46c4(0x209)});let _0xf945e3=[],_0x1dac53=[];const _0x80b941=_0x1e6d8d['length']%0x4==0x0||_0x1e6d8d[_0x3c46c4(0xf8)]%0x4==0x3||_0x1e6d8d['length']%0x3==0x1?0x4:0x3;let _0x46eaee=0x0;_0x1e6d8d[_0x3c46c4(0x173)]((_0x2a6737,_0x4a4a05)=>{const _0x3c6854=_0x3c46c4;if(_0x4a4a05%_0x80b941==0x0)_0x1dac53=[];_0x1dac53['push']({'text':_0x2a6737[_0x3c6854(0x1f6)]==_0x3c6854(0x209)?_0x3c6854(0x1ef):_0x3c6854(0x13e)+_0x2a6737[_0x3c6854(0x1f6)],'callback_data':_0x2a6737[_0x3c6854(0x1f6)]}),_0x4a4a05%_0x80b941==0x0&&(_0xf945e3[_0x46eaee]=_0x1dac53,_0x46eaee++);}),tgBot[_0x3c46c4(0x158)](_0x489109['chat']['id'],_0x3c46c4(0xfc),{'reply_markup':{'inline_keyboard':_0xf945e3}})[_0x3c46c4(0x186)](_0x27ec70=>{telegramError(_0x27ec70);}),tgBot['on']('callback_query',async _0x4e3bfa=>{const _0x70905a=_0x3c46c4,_0x5808c4=_0x4e3bfa['data'],_0x4620c=_0x4e3bfa[_0x70905a(0x170)];tgBot[_0x70905a(0x19c)](_0x4e3bfa['id'])[_0x70905a(0x184)](async()=>{const _0x47ddeb=_0x70905a;if(_0x5808c4==_0x47ddeb(0x209)){if(settings[_0x47ddeb(0x16a)]==_0x47ddeb(0x21b))tgBot[_0x47ddeb(0x158)](_0x4620c[_0x47ddeb(0x11d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')['catch'](_0x1022fb=>{telegramError(_0x1022fb);});_0x1e6d8d['forEach'](_0x50fa45=>{const _0x65f071=_0x47ddeb;if(_0x50fa45[_0x65f071(0x1f6)]!='all')toggleBot(_0x50fa45[_0x65f071(0x1f6)],toggleStatus(_0x50fa45[_0x65f071(0x1f6)]),_0x65f071(0x130));});}else{if(settings[_0x47ddeb(0x16a)]==_0x47ddeb(0x21b))tgBot[_0x47ddeb(0x158)](_0x4620c['chat']['id'],_0x47ddeb(0x20a)+_0x5808c4)['catch'](_0x1436ff=>{telegramError(_0x1436ff);});toggleBot(_0x5808c4,toggleStatus(_0x5808c4),'stopped');}}),tgBot['removeListener'](_0x70905a(0x1d3));});}}),tgBot[_0x25b840(0x221)](/\/disable/,_0x38b174=>{const _0x3308f6=_0x25b840;if(!validateTelegram(_0x38b174))return;tgBot['sendMessage'](_0x38b174[_0x3308f6(0x11d)]['id'],'Notifications\x20disabled')[_0x3308f6(0x186)](_0xb5f7f9=>{telegramError(_0xb5f7f9);}),updateSetting(_0x3308f6(0x15e),![]);}),tgBot['onText'](/\/help/,_0x2a0739=>{const _0x1b29f6=_0x25b840;if(!validateTelegram(_0x2a0739))return;tgBot[_0x1b29f6(0x158)](_0x2a0739[_0x1b29f6(0x11d)]['id'],_0x278d3e)[_0x1b29f6(0x186)](_0x2d59e3=>{telegramError(_0x2d59e3);});}),tgBot['on'](_0x25b840(0x181),_0x24eeb3=>{const _0x3489b7=_0x25b840;_0x24eeb3[_0x3489b7(0xf2)]()['includes'](_0x3489b7(0x132))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x3489b7(0x177)](),tgBot=null,io['to'](_0x3489b7(0x1c6))['emit'](_0x3489b7(0x11e),_0x3489b7(0x1fa)));}),process[_0x25b840(0x1db)](_0x25b840(0x1f9),()=>{const _0x23805f=_0x25b840;if(tgBot)tgBot[_0x23805f(0x177)]();process[_0x23805f(0x17a)](0x1);}),process[_0x25b840(0x1db)](_0x25b840(0x152),()=>{const _0x273226=_0x25b840;if(tgBot)tgBot['stopPolling']();process[_0x273226(0x17a)](0x1);});}}function disableTelegram(){const _0x32045a=_0x10960f;tgBot&&(tgBot[_0x32045a(0x177)](),tgBot=null);}function sendTelegram(_0x129ef3,_0x47afd0){const _0x48258f=_0x10960f;if(settings[_0x48258f(0x15e)]){if(settings[_0x48258f(0x16a)]=='all'||(_0x47afd0[_0x48258f(0x135)]==_0x48258f(0x111)||_0x47afd0[_0x48258f(0x135)]==_0x48258f(0x128))&&settings[_0x48258f(0x16a)]==_0x48258f(0x1b0)||_0x47afd0['type']==_0x48258f(0x219)&&settings[_0x48258f(0x16a)]==_0x48258f(0x21b)){if(tgBot&&settings[_0x48258f(0x1cf)]){if(_0x47afd0[_0x48258f(0x1a9)])tgBot[_0x48258f(0x158)](settings[_0x48258f(0x1cf)],_0x47afd0[_0x48258f(0x19b)]+_0x48258f(0xff)+_0x47afd0[_0x48258f(0x1e9)])[_0x48258f(0x186)](_0x503e89=>{telegramError(_0x503e89);});else tgBot[_0x48258f(0x158)](settings[_0x48258f(0x1cf)],_0x48258f(0x13e)+_0x129ef3+_0x48258f(0xff)+_0x47afd0[_0x48258f(0x1e9)])['catch'](_0x42e7fa=>{telegramError(_0x42e7fa);});}}}}function getDeviceWithIp(_0x2aa7c8){const _0x33c47c=_0x10960f;return devices[_0x33c47c(0x208)](_0x37ab1b=>_0x37ab1b['ip']===_0x2aa7c8);}function temporaryAccess2FA(_0x2ea2a4,_0x54816c){const _0x3fc658=_0x10960f;let _0x392058=new Date(),_0x327711=![];if(lastIpApproval){if(_0x392058-lastIpApproval<0x1388)_0x327711=!![];}lastIpApproval=new Date();if(_0x327711)return;tgBot&&settings[_0x3fc658(0x1cf)]&&(tgBot['removeListener'](_0x3fc658(0x1d3)),tgBot['sendMessage'](settings[_0x3fc658(0x1cf)],_0x3fc658(0x226)+normalizeIP(_0x54816c)[_0x3fc658(0xf6)]+_0x3fc658(0x1d1),{'parse_mode':_0x3fc658(0x127),'reply_markup':{'inline_keyboard':[[{'text':_0x3fc658(0x1a1),'callback_data':'5'},{'text':_0x3fc658(0xf7),'callback_data':'15'},{'text':_0x3fc658(0x199),'callback_data':'30'},{'text':_0x3fc658(0x1eb),'callback_data':_0x3fc658(0x1eb)}]]}})[_0x3fc658(0x186)](_0x5a9ca2=>{telegramError(_0x5a9ca2);}),tgBot['on']('callback_query',async _0x3b32d6=>{const _0xcb9e0e=_0x3fc658,_0x9d39cc=_0x3b32d6[_0xcb9e0e(0x1f4)],_0x45a811=_0x3b32d6[_0xcb9e0e(0x170)];tgBot['answerCallbackQuery'](_0x3b32d6['id'])['then'](async()=>{const _0x5882d6=_0xcb9e0e;devices[_0x2ea2a4][_0x5882d6(0x1ac)]={'clientip':_0x54816c,'timestamp':new Date()[_0x5882d6(0x1f2)](),'expiry':_0x9d39cc},_0x9d39cc!=_0x5882d6(0x1eb)?(await tgBot[_0x5882d6(0x158)](_0x45a811['chat']['id'],_0x5882d6(0x1c9)+_0x9d39cc+'\x20minutes',{'parse_mode':_0x5882d6(0x127)})[_0x5882d6(0x186)](_0x51cd5a=>{telegramError(_0x51cd5a);}),io['to'](_0x2ea2a4)['emit'](_0x5882d6(0xeb),{'access':{'allow':![],'reason':_0x5882d6(0x13f),'token':null}})):(await tgBot[_0x5882d6(0x158)](_0x45a811[_0x5882d6(0x11d)]['id'],'Temporary\x20access\x20rejected')[_0x5882d6(0x186)](_0xdaebd1=>{telegramError(_0xdaebd1);}),io['to'](_0x2ea2a4)[_0x5882d6(0x1b1)](_0x5882d6(0xeb),{'access':{'allow':![],'reason':_0x5882d6(0x21f),'token':null}}));}),tgBot['removeListener'](_0xcb9e0e(0x1d3));}));}function loginAccess2FA(_0x4529cb,_0x31b987){const _0x137292=_0x10960f;tgBot&&settings[_0x137292(0x1cf)]&&(tgBot[_0x137292(0x1b5)]('callback_query'),tgBot[_0x137292(0x158)](settings[_0x137292(0x1cf)],_0x137292(0x163)+normalizeIP(_0x31b987)['show']+'</b>\x20?',{'parse_mode':_0x137292(0x127),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x137292(0x1eb),'callback_data':_0x137292(0x1eb)}]]}})[_0x137292(0x186)](_0x5879d9=>{telegramError(_0x5879d9);}),tgBot['on']('callback_query',async _0x4809d2=>{const _0x320fcc=_0x137292,_0x45cf8b=_0x4809d2['data'],_0x3d24cb=_0x4809d2[_0x320fcc(0x170)];tgBot[_0x320fcc(0x19c)](_0x4809d2['id'])[_0x320fcc(0x184)](async()=>{const _0x37be5e=_0x320fcc;devices[_0x4529cb][_0x37be5e(0x1e5)]={'clientip':_0x31b987,'timestamp':new Date()['getTime'](),'expiry':_0x45cf8b},_0x45cf8b!='reject'?(await tgBot[_0x37be5e(0x158)](_0x3d24cb[_0x37be5e(0x11d)]['id'],_0x37be5e(0x179),{'parse_mode':_0x37be5e(0x127)})[_0x37be5e(0x186)](_0x5e0060=>{telegramError(_0x5e0060);}),io['to'](_0x4529cb)['emit'](_0x37be5e(0xeb),{'access':{'allow':![],'reason':_0x37be5e(0x13f),'token':null}})):(await tgBot[_0x37be5e(0x158)](_0x3d24cb[_0x37be5e(0x11d)]['id'],_0x37be5e(0xea))[_0x37be5e(0x186)](_0x48f998=>{telegramError(_0x48f998);}),io['to'](_0x4529cb)[_0x37be5e(0x1b1)](_0x37be5e(0xeb),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x320fcc(0x1b5)](_0x320fcc(0x1d3));}));}function getConfiguration(){const _0x2ee6df=_0x10960f;return dbConfig[_0x2ee6df(0xfb)](_0x2ee6df(0x1de))[_0x2ee6df(0x151)](_0x2ee6df(0x1f6))['value']()||[];}function getEnabledBots(){const _0x2670fe=_0x10960f;return dbConfig['get'](_0x2670fe(0x1de))[_0x2670fe(0x151)](_0x2670fe(0x1f6))['filter']({'status':_0x2670fe(0x215)})[_0x2670fe(0x153)]()||[];}function getDisabledBots(){const _0x254be9=_0x10960f;return dbConfig[_0x254be9(0xfb)](_0x254be9(0x1de))[_0x254be9(0x151)](_0x254be9(0x1f6))[_0x254be9(0x118)]({'status':'disabled'})['value']()||[];}function getSettings(){const _0x294a2e=_0x10960f;return dbSettings[_0x294a2e(0xfb)]('settings')['value']()||{'timeshift':0x0};}function getSecure(){const _0x1edf25=_0x10960f;return dbSecure[_0x1edf25(0xfb)]('secure')['value']()||{};}function getBlacklist(){const _0x19b79a=_0x10960f;return dbSecure[_0x19b79a(0xfb)](_0x19b79a(0x14b))[_0x19b79a(0x153)]()||[];}function broadcastToBots(_0x387605,_0x328d87){const _0x921c63=_0x10960f;config[_0x921c63(0x173)](_0x2c41c0=>{const _0x2b1885=_0x921c63;if(_0x2c41c0[_0x2b1885(0xeb)]==_0x2b1885(0x215)&&_0x2c41c0['live']==_0x2b1885(0x220)){if(pid[_0x2c41c0['botID']])pid[_0x2c41c0['botID']]['send']({[_0x387605]:_0x328d87});}});}function storeSettings(_0x407ef8,_0x5d3fd5=![]){const _0x85088e=_0x10960f;_0x407ef8={...settings,..._0x407ef8};if(_0x5d3fd5&&_0x407ef8['bbPassword']!=_0x85088e(0x160)&&_0x407ef8[_0x85088e(0x1f3)]!=''){const _0x2c199f=crypt['decrypt'](secure[_0x85088e(0xe8)],_0x407ef8[_0x85088e(0x1f3)])['message'][_0x85088e(0x222)]('@')[0x0],_0x1ed854=bcrypt['hashSync'](_0x2c199f,saltRounds);_0x407ef8={..._0x407ef8,'bbPassword':_0x1ed854};}if(_0x5d3fd5&&_0x407ef8[_0x85088e(0x225)]!=_0x85088e(0x160)&&_0x407ef8[_0x85088e(0x225)]!=''){const _0x5b39f4=crypt['decrypt'](secure[_0x85088e(0xe8)],_0x407ef8[_0x85088e(0x225)])[_0x85088e(0x170)]['split']('@')[0x0];_0x407ef8={..._0x407ef8,'telegramToken':_0x5b39f4};}const _0x3b061e=_0x407ef8['telegramToken']!=_0x85088e(0x160)&&_0x407ef8['telegramToken']!=settings[_0x85088e(0x225)]||_0x407ef8[_0x85088e(0x117)]!=settings[_0x85088e(0x117)],_0x1a948d=_0x407ef8['telegramToken']==''||_0x407ef8['telegramUsername']=='';if(_0x3b061e)_0x407ef8['telegramEvents']=_0x85088e(0x209);for(const [_0x4258ba,_0x366ac2]of Object['entries'](_0x407ef8)){if(_0x4258ba==_0x85088e(0x225)&&_0x366ac2==_0x85088e(0x160)){_0x407ef8[_0x85088e(0x225)]=settings[_0x85088e(0x225)];continue;};if(_0x4258ba=='bbPassword'&&_0x366ac2=='************'){_0x407ef8[_0x85088e(0x1f3)]=settings[_0x85088e(0x1f3)];continue;};dbSettings[_0x85088e(0x17b)](_0x85088e(0x150)+_0x4258ba,_0x366ac2)[_0x85088e(0x106)]();}settings=_0x407ef8,io['to'](_0x85088e(0x1c6))[_0x85088e(0x1b1)](_0x85088e(0x17e),cleanSettings()),broadcastToBots(_0x85088e(0x193),settings[_0x85088e(0x193)]);if(_0x3b061e&&!_0x1a948d)initTelegram();if(_0x3b061e&&_0x1a948d)disableTelegram();getAllClients()['forEach'](_0x3589c4=>{const _0x48f141=_0x85088e;getSocket(_0x3589c4['id'])['emit'](_0x48f141(0xeb),{'access':{'allow':![],'reason':_0x48f141(0x13f),'token':null}});});}function updateSetting(_0x217661,_0x5942ca){const _0x18de9d=_0x10960f;dbSettings['set'](_0x18de9d(0x150)+_0x217661,_0x5942ca)[_0x18de9d(0x106)](),settings=getSettings(),io['to'](_0x18de9d(0x1c6))[_0x18de9d(0x1b1)]('settings',cleanSettings());}function storeSecure(_0x1ed744){const _0x3093a3=_0x10960f;dbSecure[_0x3093a3(0xfb)](_0x3093a3(0x138))['push'](_0x1ed744)[_0x3093a3(0x106)](),secure=_0x1ed744;}function addBlacklist(_0x3cf060){const _0x26f078=_0x10960f;cleanBlacklist();let _0x1c5557;devices[_0x3cf060][_0x26f078(0x1ac)]?_0x1c5557=Math['max'](devices[_0x3cf060]['telegramIpApproval']['expiry'],loginExpiry):_0x1c5557=loginExpiry,dbSecure[_0x26f078(0xfb)]('blacklist')[_0x26f078(0x176)]({'expiry':new Date()['getTime']()+_0x1c5557*0x3c*0x3e8,'token':devices[_0x3cf060][_0x26f078(0x185)]['token']})[_0x26f078(0x106)](),blacklist=dbSecure[_0x26f078(0xfb)]('blacklist')[_0x26f078(0x153)]();}function cleanBlacklist(){const _0x5ac392=_0x10960f;let _0x5bb3aa=dbSecure['get']('blacklist')[_0x5ac392(0x147)]()['value'](),_0x1fd072=new Date()[_0x5ac392(0x1f2)]();_0x5bb3aa['forEach'](_0x2b5eb8=>{const _0x37daa5=_0x5ac392;_0x2b5eb8[_0x37daa5(0x21e)]<_0x1fd072&&dbSecure[_0x37daa5(0xfb)](_0x37daa5(0x14b))[_0x37daa5(0x157)]({'expiry':_0x2b5eb8[_0x37daa5(0x21e)]})['write']();});}function initStates(){let _0x45f2ea=getConfiguration();_0x45f2ea['forEach'](_0x5055b1=>{const _0x3f4216=_0x56fe;_0x5055b1[_0x3f4216(0x1c2)]=_0x3f4216(0x130);}),storeConfiguration(_0x45f2ea);}function onKeys(){const _0x112929=new RSA();return new Promise(_0x27fb08=>{const _0x2c2f10=_0x56fe;_0x112929[_0x2c2f10(0x1c4)]()[_0x2c2f10(0x184)](_0xd1e213=>{_0x27fb08(_0xd1e213);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1900a7=_0x10960f;let _0x52dc59=getConfiguration(),_0x586c73=![];_0x52dc59['forEach'](_0x3ddf44=>{const _0x30e85f=_0x56fe;if(_0x3ddf44[_0x30e85f(0xeb)]==_0x30e85f(0x220))_0x3ddf44[_0x30e85f(0xeb)]=_0x30e85f(0x215),_0x586c73=!![];else _0x3ddf44['status']=='stopped'&&(_0x3ddf44[_0x30e85f(0xeb)]=_0x30e85f(0x204),_0x586c73=!![]);});if(_0x586c73)storeConfiguration(_0x52dc59);let _0x1c52c6=getSecure();if(!_0x1c52c6[_0x1900a7(0x223)](_0x1900a7(0x18d))){let _0x3a04af=await generateKeys();_0x1c52c6['publicKey']=_0x3a04af[_0x1900a7(0x1f7)],_0x1c52c6['privateKey']=_0x3a04af[_0x1900a7(0xe8)],_0x1c52c6[_0x1900a7(0x18d)]=crypto[_0x1900a7(0x1a6)](0x20)[_0x1900a7(0xf2)](_0x1900a7(0x205));;storeSecure(_0x1c52c6);}let _0x1819ff=getSettings();_0x586c73=![];!_0x1819ff[_0x1900a7(0x223)](_0x1900a7(0x1c5))&&(_0x1819ff[_0x1900a7(0x1c5)]=![],_0x1819ff[_0x1900a7(0x159)]='',_0x1819ff[_0x1900a7(0x1f3)]='',_0x1819ff[_0x1900a7(0x192)]=![],_0x586c73=!![]);!_0x1819ff[_0x1900a7(0x223)](_0x1900a7(0x1ec))&&(_0x1819ff['whitelistEnabled']=![],_0x1819ff['whitelist']=[],_0x1819ff['temporaryAccessAllowed']=![],_0x586c73=!![]);if(!_0x1819ff[_0x1900a7(0x223)](_0x1900a7(0x15e))){if(_0x1819ff[_0x1900a7(0x1cf)])_0x1819ff['telegramEnabled']=!![];else _0x1819ff[_0x1900a7(0x15e)]=![];_0x586c73=!![];}if(_0x586c73)storeSettings(_0x1819ff);}function storeConfiguration(_0x5574d9){const _0x4108ff=_0x10960f;dbConfig[_0x4108ff(0xfb)](_0x4108ff(0x1de))[_0x4108ff(0x157)]()[_0x4108ff(0x106)](),dbConfig[_0x4108ff(0xfb)]('bots')[_0x4108ff(0x176)](..._0x5574d9)[_0x4108ff(0x106)](),config=_0x5574d9;}function resetPassword(){const _0x414254=_0x10960f;tgBot&&settings[_0x414254(0x1cf)]&&(tgBot[_0x414254(0x1b5)](_0x414254(0x1d3)),tgBot[_0x414254(0x158)](settings[_0x414254(0x1cf)],_0x414254(0x12e),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x414254(0x100),'callback_data':_0x414254(0x100)},{'text':'no','callback_data':'no'}]]}})[_0x414254(0x186)](_0x1d44f2=>{telegramError(_0x1d44f2);}),tgBot['on'](_0x414254(0x1d3),async _0x5d5e79=>{const _0x4f5709=_0x414254,_0xad3501=_0x5d5e79[_0x4f5709(0x1f4)],_0x5f00c0=_0x5d5e79[_0x4f5709(0x170)];tgBot[_0x4f5709(0x19c)](_0x5d5e79['id'])[_0x4f5709(0x184)](async()=>{const _0x4340de=_0x4f5709;if(_0xad3501!='no'){const _0x1b774f=0xf,_0xa1a2d9=_0x4340de(0x14a),_0x153905=Array[_0x4340de(0x1e3)](crypto[_0x4340de(0x1d8)](new Uint32Array(_0x1b774f)))[_0x4340de(0x1b6)](_0x30767e=>_0xa1a2d9[_0x30767e%_0xa1a2d9[_0x4340de(0xf8)]])[_0x4340de(0x10e)](''),_0xa4b21b=bcrypt[_0x4340de(0x216)](_0x153905,saltRounds);storeSettings({'bbPassword':_0xa4b21b}),await tgBot[_0x4340de(0x158)](_0x5f00c0[_0x4340de(0x11d)]['id'],_0x4340de(0x1ad)+_0x153905,{'parse_mode':_0x4340de(0x127)})[_0x4340de(0x186)](_0x57f15e=>{telegramError(_0x57f15e);});}else await tgBot['sendMessage'](_0x5f00c0['chat']['id'],_0x4340de(0x1ee))[_0x4340de(0x186)](_0x318a9e=>{telegramError(_0x318a9e);});}),tgBot[_0x4f5709(0x1b5)]('callback_query');}));}function logging(_0x22daa5){const _0x47df83=_0x10960f;console[_0x47df83(0x1d4)](getTimeStamp()+_0x47df83(0xe9)+_0x22daa5);if(tgBot&&settings[_0x47df83(0x1cf)]&&settings['telegramEvents']!='orders')tgBot[_0x47df83(0x158)](settings[_0x47df83(0x1cf)],_0x47df83(0x1e4)+_0x22daa5)[_0x47df83(0x186)](_0x4300f1=>{telegramError(_0x4300f1);});}function _0x2f7f(){const _0x801498=['secret','<b>Telegram\x20bot\x20status:</b>\x0a','user','invalid\x20credentials','yargs/yargs','f2aRequired','timeshift','/restart\x20-\x20restart\x20bot(s)\x0a','NTBA_FIX_319','/:bot','getUTCHours','function','30\x20min','(((.+)+)+)+$','botname','answerCallbackQuery','padStart','sockets','password','encryptedUuid','5\x20min','login\x20token\x20valid','removeAllListeners','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','<b>Balance\x20Bot\x20status:</b>\x0a','randomBytes','87940IDgFUD','readdirSync','showname','temporary\x20token\x20generated','name','telegramIpApproval','Password\x20has\x20been\x20reset\x20to:\x20','/:bot/coins','version','alerts','emit','bb-secure.json','2FA\x20login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20add\x20bot','removeListener','map','starting\x20new\x20bot\x20|\x20Bot\x20','token','pidRefreshToken','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','args','logout','/enable\x20-\x20enable\x20notifications\x0a','allow','initclient','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','store-configuration','live','fork','generateKeyPairAsync','loginRequired','botmanager','/:bot/performance','hybrid-crypto-js','Access\x20enabled\x20for\x20','8374616hrPTrf','/:bot/history','login\x20not\x20required','use','inherit','telegramChatId','-events.json','</b>\x20?','build2','callback_query','log','defaults','bb-settings.json','Notifications\x20enabled','randomFillSync','::1','Unauthorized\x20login\x20attempt\x20(timeout)','once','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Notifications\x20disabled\x0a','bots','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','path','::ffff:127.0.0.1','Balance\x20Bot','from','Bot\x20Mgr\x20>\x20','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Crypt','handshake','event','getMonth','reject','whitelistEnabled','constructor','Password\x20reset\x20rejected','All\x20bots','11mVQQwD','search','getTime','bbPassword','data','ipv6','botID','publicKey','config/','SIGINT','Invalid\x20Telegram\x20token','match','argv','exp','temporary\x20access\x20not\x20allowed','error\x20while\x20deleting\x20config\x20files:\x20','add-bot','Invalid\x20username\x20or\x20IP\x20address','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','https://hodlerhacks.com','disabled','hex','child_process','2804zvCNTi','find','all','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','host',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','mkdirSync','ipc','Unauthorized\x20attempt\x20to\x20update\x20settings','-results.json','bb/','assign','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','includes','enabled','hashSync','No\x20authentication\x20token','/on\x20-\x20start\x20bot(s)\x0a','order','port','orders','auth','-performance.json','expiry','temporary\x20access\x20rejected','running','onText','split','hasOwnProperty','get-starting-balances','telegramToken','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','13ZQpPgg','timestamp','privateKey',':\x20Bot\x20Mgr\x20>\x20','Login\x20rejected','status','createServer','Unauthorized\x20attempt\x20to\x20update\x20bot','clients','isDirectory','username','Token\x20blacklisted','toString','sha256','\x20|\x20','ipaddr.js','show','15\x20min','length','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','getSeconds','get','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','disconnect','login\x20required','\x20>\x20','yes','All','get-logs','-----------------------------------------------------------------------------------','temporaryAccessAllowed','telegram','write','jsonwebtoken','539454LuGkNG','/:bot/portfolio','uuid','kill','send','storeConfiguration','join','headers','emitHistory','error','@analytics/google-analytics','9UfxnJw','sign','getMinutes','RSA','telegramUsername','filter','store-settings','referer','Invalid\x20authentication\x20token\x20(2)','unlinkSync','chat','notification','getStartingBalances','sendFile','stop','No\x20bots\x20running\x20right\x20now','existsSync','getPortfolio','Notifications\x20enabled\x0a','idling\x20bot\x20\x20\x20|\x20Bot\x20','HTML','success','555lLsCCx','connected','listen','133yBPysN','keys','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','started','stopped','bot','404\x20Not\x20Found','32uKXpKE','/disable\x20-\x20disable\x20notifications\x0a','type','bcryptjs','1000','secure','index.html','delete-bot','access\x20timeout','node-telegram-bot-api','Invalid\x20authentication\x20token\x20(1)','Bot\x20','reload','61531764oEMNmr','starting\x20bot\x20|\x20Bot\x20','remoteAddress','express','2FA\x20required','getDate','clientip','cloneDeep','Unauthorized\x20attempt\x20to\x20get\x20logs','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','blacklist','bot-','apiKey','cancelLoading','parse','settings.','sortBy','SIGTERM','value','getFullYear','Alerts','login','remove','sendMessage','bbUsername','reason','pidExpireLogin','Unauthorized\x20attempt\x20to\x20delete\x20bot','placeOrder','telegramEnabled','2FA','************','default','10938020xvWCix','Allow\x20login\x20from\x20IP\x20address\x20<b>','connection','restarting\x20Bot\x20','2FA\x20login\x20required','crypto',',\x20must\x20be\x20a\x204\x20digit\x20number','login\x20token\x20generated','telegramEvents','All\x20bots\x20running\x20right\x20now','getHours','toIPv4Address','new','\x20only\x0a','message','logged\x20out','Error:\x20Invalid\x20argument\x20','forEach','3767529wuZNsH','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','push','stopPolling','build','Login\x20accepted','exit','set','isIPv4MappedAddress','\x20/\x20','settings','place-order','update-bb','polling_error','static','page','then','access','catch','toIPv4MappedAddress','new-disabled','lowdb','User\x20has\x20been\x20validated','UA-192771731-1','kind'];_0x2f7f=function(){return _0x801498;};return _0x2f7f();}function getServerTime(){const _0x6037f7=_0x10960f,_0x3ffa08=new Date();return _0x3ffa08[_0x6037f7(0x154)]()+'/'+(_0x3ffa08[_0x6037f7(0x1ea)]()+0x1)[_0x6037f7(0xf2)]()[_0x6037f7(0x19d)](0x2,'0')+'/'+_0x3ffa08['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3ffa08[_0x6037f7(0x16c)]()[_0x6037f7(0xf2)]()[_0x6037f7(0x19d)](0x2,'0')+':'+_0x3ffa08[_0x6037f7(0x115)]()[_0x6037f7(0xf2)]()[_0x6037f7(0x19d)](0x2,'0')+':'+_0x3ffa08[_0x6037f7(0xfa)]()[_0x6037f7(0xf2)]()[_0x6037f7(0x19d)](0x2,'0');}function getTimeStamp(){const _0x42f1a7=_0x10960f,_0x39d064=shiftedTime();return _0x39d064[_0x42f1a7(0x154)]()+'/'+(_0x39d064['getMonth']()+0x1)[_0x42f1a7(0xf2)]()['padStart'](0x2,'0')+'/'+_0x39d064[_0x42f1a7(0x145)]()[_0x42f1a7(0xf2)]()[_0x42f1a7(0x19d)](0x2,'0')+'\x20'+_0x39d064['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x39d064[_0x42f1a7(0x115)]()['toString']()[_0x42f1a7(0x19d)](0x2,'0')+':'+_0x39d064['getSeconds']()[_0x42f1a7(0xf2)]()[_0x42f1a7(0x19d)](0x2,'0');}function shiftedTime(){const _0x1d9990=_0x10960f,_0x517599=new Date();let _0x20623f=_0x517599;if(settings[_0x1d9990(0x193)]&&settings[_0x1d9990(0x193)]!==0x0)_0x20623f=fns['add'](_0x517599,{'hours':settings[_0x1d9990(0x193)]});return _0x20623f;}function startScheduler(){const _0x1c37a7=_0x10960f;let _0xce7c22=new Date()[_0x1c37a7(0x197)]();_0xce7c22==0x1&&backupConfigFiles();_0xce7c22==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3ca0b5=_0x10960f;fs[_0x3ca0b5(0x1a8)](configpath,{'withFileTypes':!![]})[_0x3ca0b5(0x173)](_0x4bc0a3=>{const _0x42ee13=_0x3ca0b5;if(!_0x4bc0a3[_0x42ee13(0xef)]())fs['copyFileSync'](configpath+_0x4bc0a3[_0x42ee13(0x1ab)],configbackuppath+_0x4bc0a3['name']);});}function triggerAnalytics(){const _0x28c69c=_0x10960f;analytics[_0x28c69c(0x183)]({'title':'Balance\x20Bot\x20Server','href':_0x28c69c(0x203),'path':'/v'+serverversion});}function validateCredentials(_0x548bad,_0x1dcfe8){const _0x4e12a9=_0x10960f;if(_0x548bad[_0x4e12a9(0xf0)]==settings[_0x4e12a9(0x159)]&&bcrypt['compareSync'](_0x548bad[_0x4e12a9(0x19f)],settings[_0x4e12a9(0x1f3)])){if(settings[_0x4e12a9(0x192)])return{'allow':![],'reason':_0x4e12a9(0x166),'token':null};else{const _0x5b674c=generateLoginToken(_0x1dcfe8);return{'allow':!![],'reason':_0x4e12a9(0x169),'token':_0x5b674c};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x37d79c){const _0x5b391f=_0x10960f,_0x32dbaf=generateLoginToken(_0x37d79c);return{'allow':!![],'reason':_0x5b391f(0x169),'token':_0x32dbaf};}function validateAccess(_0x25a17d,_0x5b06d4){const _0x14e85c=_0x10960f;let _0x29f810=devices[_0x5b06d4]['ip'],_0x4b95c3;const _0x3e2be4=_0x100391=>{const _0x3208f3=_0x56fe;if(settings[_0x3208f3(0x1c5)]){if(settings[_0x3208f3(0x192)]){if(telegram2FaApproved(_0x5b06d4)){const _0x5599ad=generateLoginToken(_0x5b06d4);return{'allow':!![],'reason':_0x3208f3(0x1b3),'token':_0x5599ad};}else return{'allow':![],'reason':_0x3208f3(0xfe),'token':null};}else return _0x4b95c3=validToken(_0x100391,_0x5b06d4),_0x4b95c3[_0x3208f3(0x223)]('success')?{'allow':!![],'reason':_0x3208f3(0x1a2),'token':_0x100391}:{'allow':![],'reason':_0x3208f3(0xfe),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x14e85c(0x1ec)]){let _0x15fd7c=[...settings['whitelist'],_0x14e85c(0x1d9),_0x14e85c(0x1e1),'127.0.0.1'];if(_0x15fd7c[_0x14e85c(0x214)](_0x29f810))return _0x3e2be4(_0x25a17d);else{_0x4b95c3=validToken(_0x25a17d,_0x5b06d4);if(_0x4b95c3[_0x14e85c(0x223)](_0x14e85c(0x128)))return _0x3e2be4(_0x25a17d);else{if(telegramIpApproved(_0x5b06d4)){const _0x43f08c=generateToken(_0x5b06d4);return _0x4b95c3=_0x3e2be4(_0x25a17d),_0x4b95c3[_0x14e85c(0x1be)]?{'allow':!![],'reason':_0x14e85c(0x1aa),'token':_0x43f08c}:_0x4b95c3;}else return settings[_0x14e85c(0x104)]?{'allow':![],'reason':_0x14e85c(0x144),'token':null}:{'allow':![],'reason':_0x14e85c(0x1fe),'token':null};}}}else return _0x3e2be4(_0x25a17d);}function timelyDecrypt(_0x5e7b89,_0x12a4c1=!![]){const _0x30c19c=_0x10960f;if(_0x5e7b89)try{const _0x10da50=crypt['decrypt'](secure[_0x30c19c(0xe8)],_0x5e7b89)[_0x30c19c(0x170)],_0x311cc0=_0x10da50[_0x30c19c(0x222)]('@')[0x0],_0x33a313=_0x10da50[_0x30c19c(0x222)]('@')[0x1],_0x5cacd2=new Date()[_0x30c19c(0x1f2)]();if(_0x12a4c1){if(_0x5cacd2-_0x33a313<maxSecretAge*0x3e8)return _0x311cc0;else return![];}else return _0x311cc0;}catch(_0x3f5fe9){return![];}else return![];}const validToken=(_0x1655ec,_0xf9f119)=>{const _0x40ef7a=_0x10960f,_0x3e8b01=devices[_0xf9f119]['ip'];if(!_0x1655ec)return{'error':_0x40ef7a(0x217)};for(let _0xdb049c of blacklist){if(_0xdb049c['token']==_0x1655ec)return{'error':_0x40ef7a(0xf1)};}let _0x2331fc;try{_0x2331fc=jwt['verify'](_0x1655ec,secure[_0x40ef7a(0x18d)]+_0xf9f119);}catch{return{'error':_0x40ef7a(0x13d)};}if(!_0x2331fc[_0x40ef7a(0x223)](_0x40ef7a(0x146))&&!_0x2331fc[_0x40ef7a(0x223)](_0x40ef7a(0xf0))||!_0x2331fc[_0x40ef7a(0x223)](_0x40ef7a(0x1fd)))return{'error':_0x40ef7a(0x11b)};if(!_0x2331fc['hasOwnProperty'](_0x40ef7a(0xf0))&&_0x2331fc[_0x40ef7a(0x223)](_0x40ef7a(0x146))){const {clientip:_0x382f59}=_0x2331fc;return _0x3e8b01==_0x382f59?{'success':_0x40ef7a(0x18a)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x2331fc[_0x40ef7a(0x223)]('username')&&_0x2331fc[_0x40ef7a(0x223)](_0x40ef7a(0x146))){const {username:_0x5093ca,clientip:_0x1dfd64}=_0x2331fc;return settings[_0x40ef7a(0x159)]==_0x5093ca&&_0x3e8b01==_0x1dfd64?{'success':_0x40ef7a(0x18a)}:{'error':_0x40ef7a(0x201)};}}},generateLoginToken=_0x243dab=>{const _0x17393c=_0x10960f;if(_0x243dab){const _0x5a52f5=devices[_0x243dab]['ip'];return jwt['sign']({'username':settings[_0x17393c(0x159)],'clientip':_0x5a52f5},secure[_0x17393c(0x18d)]+_0x243dab,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x83572a=>{const _0x4995fe=_0x10960f;if(_0x83572a){const _0x4447d2=devices[_0x83572a]['ip'];return jwt[_0x4995fe(0x114)]({'clientip':_0x4447d2},secure[_0x4995fe(0x18d)]+_0x83572a,{'expiresIn':devices[_0x83572a][_0x4995fe(0x1ac)][_0x4995fe(0x21e)]*0x3c});}else return![];},telegramIpApproved=_0xff6c53=>{const _0x139876=_0x10960f;let _0xb1b90c=![];return devices[_0xff6c53][_0x139876(0x1ac)]&&devices[_0xff6c53][_0x139876(0x1ac)]['expiry']!=_0x139876(0x1eb)&&(_0xb1b90c=devices[_0xff6c53]['telegramIpApproval']['clientip']==devices[_0xff6c53]['ip']&&new Date()[_0x139876(0x1f2)]()-devices[_0xff6c53][_0x139876(0x1ac)]['timestamp']<devices[_0xff6c53][_0x139876(0x1ac)][_0x139876(0x21e)]*0x3c*0x3e8),_0xb1b90c;},telegram2FaApproved=_0x391292=>{const _0x576ce3=_0x10960f;let _0x5b45a6=![];return devices[_0x391292]['telegram2FaApproval']&&devices[_0x391292]['telegram2FaApproval'][_0x576ce3(0x21e)]!='reject'&&(_0x5b45a6=devices[_0x391292]['telegram2FaApproval'][_0x576ce3(0x146)]==devices[_0x391292]['ip']&&new Date()[_0x576ce3(0x1f2)]()-devices[_0x391292]['telegram2FaApproval'][_0x576ce3(0xe7)]<devices[_0x391292][_0x576ce3(0x1e5)][_0x576ce3(0x21e)]*0x3c*0x3e8),_0x5b45a6;},normalizeIP=_0xf4dbe5=>{const _0x211e9a=_0x10960f;let _0x396882=null,_0x461cc=null;if(ipaddr['isValid'](_0xf4dbe5)){const _0xea2fd6=ipaddr[_0x211e9a(0x14f)](_0xf4dbe5);_0xea2fd6[_0x211e9a(0x18c)]()===_0x211e9a(0x1f5)?(_0xea2fd6[_0x211e9a(0x17c)]()&&(_0x396882=_0xea2fd6[_0x211e9a(0x16d)]()[_0x211e9a(0xf2)]()),_0x461cc=_0xea2fd6['toString']()):(_0x396882=_0xea2fd6[_0x211e9a(0xf2)](),_0x461cc=_0xea2fd6[_0x211e9a(0x187)]()['toString']());}return{'show':_0x396882?_0x396882:_0x461cc,'store':_0x461cc};};