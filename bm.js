const _0x7850e0=_0x4a35;(function(_0x7066e6,_0xd5094b){const _0x7a6d9c=_0x4a35,_0xedde52=_0x7066e6();while(!![]){try{const _0x177ce3=-parseInt(_0x7a6d9c(0x366))/0x1*(parseInt(_0x7a6d9c(0x3b4))/0x2)+-parseInt(_0x7a6d9c(0x248))/0x3*(parseInt(_0x7a6d9c(0x21e))/0x4)+parseInt(_0x7a6d9c(0x388))/0x5+parseInt(_0x7a6d9c(0x1ff))/0x6+-parseInt(_0x7a6d9c(0x1d8))/0x7+-parseInt(_0x7a6d9c(0x3a1))/0x8*(-parseInt(_0x7a6d9c(0x2a8))/0x9)+parseInt(_0x7a6d9c(0x374))/0xa;if(_0x177ce3===_0xd5094b)break;else _0xedde52['push'](_0xedde52['shift']());}catch(_0x5692f1){_0xedde52['push'](_0xedde52['shift']());}}}(_0x18e5,0xcacfe));const _0x13a1e7=function(){let _0x259367=!![];return function(_0x980a0a,_0x3ac939){const _0x1642fb=_0x259367?function(){const _0x49515a=_0x4a35;if(_0x3ac939){const _0x20bb03=_0x3ac939[_0x49515a(0x267)](_0x980a0a,arguments);return _0x3ac939=null,_0x20bb03;}}:function(){};return _0x259367=![],_0x1642fb;};}(),_0x3c3de7=_0x13a1e7(this,function(){const _0x59cf69=_0x4a35;return _0x3c3de7[_0x59cf69(0x279)]()['search'](_0x59cf69(0x3ab))[_0x59cf69(0x279)]()[_0x59cf69(0x227)](_0x3c3de7)[_0x59cf69(0x26a)](_0x59cf69(0x3ab));});_0x3c3de7();'use strict';process[_0x7850e0(0x2eb)][_0x7850e0(0x36b)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x7850e0(0x23b)),low=require(_0x7850e0(0x36e)),FileSync=require(_0x7850e0(0x324)),path=require(_0x7850e0(0x2ee)),crypto=require(_0x7850e0(0x26b)),Crypt=require(_0x7850e0(0x276))[_0x7850e0(0x2fc)],RSA=require(_0x7850e0(0x276))[_0x7850e0(0x378)],bcrypt=require(_0x7850e0(0x20f)),jwt=require(_0x7850e0(0x2bd)),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x7850e0(0x2c6)]['slice'](0x2))[_0x7850e0(0x2c6)],uuidRandom=require(_0x7850e0(0x2ae)),TelegramBot=require(_0x7850e0(0x399)),Mixpanel=require(_0x7850e0(0x38d)),axios=require(_0x7850e0(0x20a)),{GraphQLClient,gql}=require(_0x7850e0(0x2cd)),util=require(_0x7850e0(0x1e0)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x7850e0(0x2aa)]||_0x7850e0(0x294),pattern=/^[0-9]{2,4}$/;!pattern[_0x7850e0(0x35b)](PORT)&&(console[_0x7850e0(0x1cb)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x7850e0(0x27e)),process['exit'](0x1));const HOST=argv[_0x7850e0(0x255)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions']['node'],environment=require(_0x7850e0(0x39a))['environment']||_0x7850e0(0x35e);let bbpath=_0x7850e0(0x20c),bbpath2='';const botfile=_0x7850e0(0x365),configfile=_0x7850e0(0x296),settingsfile=_0x7850e0(0x214),securefile=_0x7850e0(0x319),maxBackups=0xa;let validInstallation=!![];!fs[_0x7850e0(0x27b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x7850e0(0x281)+userID+'/':bbpath+_0x7850e0(0x281),configbackuppath=configpath+_0x7850e0(0x2dd),logspath=userID?bbpath+_0x7850e0(0x30d)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x7850e0(0x2e9)+userID+'/':bbpath+_0x7850e0(0x2e9),loggerfile=fs['createWriteStream'](logspath+_0x7850e0(0x308),{'flags':'a'}),temppath=userID?bbpath+_0x7850e0(0x258)+userID+'/':bbpath+_0x7850e0(0x258);!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x7850e0(0x27b)](configbackuppath)&&fs[_0x7850e0(0x2bf)](configbackuppath);!fs[_0x7850e0(0x27b)](logspath)&&fs[_0x7850e0(0x2bf)](logspath);!fs['existsSync'](zippath)&&fs[_0x7850e0(0x2bf)](zippath);!fs[_0x7850e0(0x27b)](temppath)&&fs[_0x7850e0(0x2bf)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x7850e0(0x1de)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x7850e0(0x38e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x7850e0(0x1de)]({'secure':{},'blacklist':[]})[_0x7850e0(0x38e)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x7850e0(0x39d)});const saltRounds=0xa,mixpanel=Mixpanel[_0x7850e0(0x3a9)](_0x7850e0(0x2f5),{'host':_0x7850e0(0x332)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x7850e0(0x22c)]&&settings[_0x7850e0(0x22c)]!=''&&settings[_0x7850e0(0x357)]&&settings[_0x7850e0(0x357)]!='')initTelegram();const parseColor=(_0x255c30,_0x5dfc84)=>{const _0x5b218d=_0x7850e0,_0x3ea858=/#[A-Z]{3}#/g;if(typeof _0x255c30==_0x5b218d(0x2c7)){!_0x5dfc84?_0x255c30=_0x255c30[_0x5b218d(0x207)](_0x3ea858,''):(_0x255c30=_0x255c30[_0x5b218d(0x207)](/#BLU#/g,_0x5b218d(0x2b3)),_0x255c30=_0x255c30[_0x5b218d(0x207)](/#RED#/g,_0x5b218d(0x240)),_0x255c30=_0x255c30[_0x5b218d(0x207)](/#YEL#/g,_0x5b218d(0x2e0)),_0x255c30=_0x255c30[_0x5b218d(0x207)](/#MAG#/g,_0x5b218d(0x2dc)),_0x255c30=_0x255c30[_0x5b218d(0x207)](/#CYA#/g,_0x5b218d(0x383)),_0x255c30=_0x255c30[_0x5b218d(0x207)](/#RES#/g,_0x5b218d(0x290)));;}return _0x255c30;},logger={'screen':_0x3a3376=>{const _0x126640=_0x7850e0;console[_0x126640(0x1cb)](parseColor(_0x3a3376,!![]));},'simple':_0x2e4f0a=>{const _0x2352d4=_0x7850e0;console[_0x2352d4(0x1cb)](parseColor(_0x2e4f0a,!![])),loggerfile[_0x2352d4(0x38e)](util[_0x2352d4(0x32a)](parseColor(_0x2e4f0a,![]))+'\x0a');},'full':async _0x32ccfe=>{const _0x307455=_0x7850e0,_0x40901b=getTimeStamp()+_0x307455(0x373)+_0x32ccfe;console['log'](parseColor(_0x40901b,!![])),loggerfile[_0x307455(0x38e)](util['format'](parseColor(_0x40901b,![]))+'\x0a');if(tgBot&&settings[_0x307455(0x30b)]&&settings[_0x307455(0x2de)]!=_0x307455(0x333))await tgBot['sendMessage'](settings[_0x307455(0x30b)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x32ccfe,![]))['catch'](_0x5572bc=>{telegramError(_0x5572bc);});},'debug':async(_0x2cc44e,_0x4998c2='')=>{const _0x54f1e2=_0x7850e0,_0x42775d=getTimeStamp()+_0x54f1e2(0x2f8)+_0x2cc44e;if(debugging)console[_0x54f1e2(0x1cb)](parseColor(_0x42775d,!![]));loggerfile[_0x54f1e2(0x38e)](util[_0x54f1e2(0x32a)](parseColor(_0x42775d,![]))+'\x0a');if(_0x4998c2){if(debugging)console[_0x54f1e2(0x1cb)](_0x4998c2);loggerfile[_0x54f1e2(0x38e)](util[_0x54f1e2(0x32a)](_0x4998c2)+'\x0a');}}};process['on'](_0x7850e0(0x235),function(_0x4deb5f){logger['simple'](_0x4deb5f);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x7850e0(0x318))[_0x7850e0(0x1d5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x7850e0(0x1d2)),app=express(),http=require(_0x7850e0(0x2e4))[_0x7850e0(0x2c0)](app);app[_0x7850e0(0x298)](fileUpload({'useTempFiles':!![]})),app[_0x7850e0(0x30a)](_0x7850e0(0x320),async(_0x2aad7f,_0x46f3c9)=>{const _0x3a1b02=_0x7850e0,_0x31eee0=_0x2aad7f[_0x3a1b02(0x2ea)][_0x3a1b02(0x30f)],_0x289c51=getClientsWithBotID(_0x3a1b02(0x293)),_0x3f3376=_0x2aad7f['headers'][_0x3a1b02(0x1d1)],_0x202407=timelyDecrypt(_0x3f3376,![]),_0x12e7b7=_0x289c51[_0x3a1b02(0x3a8)](_0x426f2b=>_0x426f2b['uuid']==_0x202407);if(_0x12e7b7){const _0x330b52=normalizeIP(_0x2aad7f[_0x3a1b02(0x2be)]['remoteAddress'])['store'],_0x11e8b5=_0x2aad7f[_0x3a1b02(0x347)][_0x3a1b02(0x2ac)];if(validateAccess(_0x11e8b5,_0x202407,_0x330b52)[_0x3a1b02(0x25c)])_0x31eee0==_0x3a1b02(0x31c)&&await backupConfigFiles(),await zipFiles(_0x31eee0),_0x46f3c9['download'](zippath+(_0x31eee0+'.zip'),_0x44ab43=>{const _0x3622a4=_0x3a1b02;_0x44ab43&&(logger[_0x3622a4(0x2da)](_0x3622a4(0x2f9)+_0x31eee0),logger['simple'](_0x44ab43));});else logger[_0x3a1b02(0x2da)](_0x3a1b02(0x300)+_0x31eee0+_0x3a1b02(0x212));}else logger[_0x3a1b02(0x2da)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x31eee0+_0x3a1b02(0x33f));}),app['post'](_0x7850e0(0x34f),async(_0x421f80,_0x591ded)=>{const _0x40c9f7=_0x7850e0,_0x26f328=getClientsWithBotID(_0x40c9f7(0x293)),_0x217ce1=_0x421f80[_0x40c9f7(0x347)]['uuid'],_0x5f3e9a=timelyDecrypt(_0x217ce1,![]),_0x516929=_0x26f328[_0x40c9f7(0x3a8)](_0x2b1c67=>_0x2b1c67['uuid']==_0x5f3e9a);logger['debug'](_0x40c9f7(0x343));if(_0x516929){const _0x2fbe9d=normalizeIP(_0x421f80[_0x40c9f7(0x2be)][_0x40c9f7(0x254)])[_0x40c9f7(0x1ce)],_0x3cbe04=_0x421f80['headers'][_0x40c9f7(0x2ac)];if(validateAccess(_0x3cbe04,_0x5f3e9a,_0x2fbe9d)[_0x40c9f7(0x25c)]){if(_0x421f80[_0x40c9f7(0x305)]){const _0x28bbb2=_0x421f80[_0x40c9f7(0x305)][_0x40c9f7(0x38a)];await _0x28bbb2['mv'](temppath+_0x28bbb2[_0x40c9f7(0x37a)]),_0x591ded['send']({'status':!![],'message':'File\x20uploaded'});const _0x3f2785=getBotsWithMode();_0x3f2785[_0x40c9f7(0x2a7)]>0x0?confirmRestore(temppath,_0x28bbb2[_0x40c9f7(0x37a)]):unzipFile(temppath,_0x28bbb2[_0x40c9f7(0x37a)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x40c9f7(0x2ca));}),app[_0x7850e0(0x298)](express[_0x7850e0(0x2f3)](path[_0x7850e0(0x1f7)](__dirname,bbpath2,_0x7850e0(0x249)))),app[_0x7850e0(0x298)](express[_0x7850e0(0x2f3)](path['join'](__dirname,bbpath2,'build'))),app[_0x7850e0(0x30a)]('/',function(_0x3cf7c4,_0x5f1bb5){const _0x32b79e=_0x7850e0;_0x5f1bb5['sendFile'](path['join'](__dirname,bbpath2,_0x32b79e(0x249),_0x32b79e(0x3b6)));}),app[_0x7850e0(0x30a)](_0x7850e0(0x328),function(_0x35a0b2,_0x599204){const _0x1c116a=_0x7850e0;_0x599204[_0x1c116a(0x282)](path[_0x1c116a(0x1f7)](__dirname,bbpath2,_0x1c116a(0x1e1),'index.html'));}),app[_0x7850e0(0x30a)](_0x7850e0(0x24b),(_0x2be528,_0x53a7a0)=>{const _0x203a2d=_0x7850e0;_0x53a7a0[_0x203a2d(0x282)](path[_0x203a2d(0x1f7)](__dirname,bbpath2,_0x203a2d(0x1e1),'index.html'));}),app[_0x7850e0(0x30a)](_0x7850e0(0x29f),(_0x5ac7,_0x1d14fa)=>{const _0x328a6c=_0x7850e0;_0x1d14fa[_0x328a6c(0x282)](path[_0x328a6c(0x1f7)](__dirname,bbpath2,'build',_0x328a6c(0x3b6)));}),app[_0x7850e0(0x30a)]('/:bot/coins',(_0x2ee53e,_0x1ae421)=>{const _0x2d30f9=_0x7850e0;_0x1ae421[_0x2d30f9(0x282)](path[_0x2d30f9(0x1f7)](__dirname,bbpath2,_0x2d30f9(0x1e1),_0x2d30f9(0x3b6)));}),app[_0x7850e0(0x30a)](_0x7850e0(0x2b0),(_0x33200a,_0x4f5f9f)=>{const _0xc6c7e7=_0x7850e0;_0x4f5f9f[_0xc6c7e7(0x282)](path[_0xc6c7e7(0x1f7)](__dirname,bbpath2,_0xc6c7e7(0x1e1),'index.html'));}),app[_0x7850e0(0x30a)](_0x7850e0(0x219),(_0x467a3b,_0x195bcc)=>{const _0x4d7f9a=_0x7850e0;_0x195bcc['sendFile'](path[_0x4d7f9a(0x1f7)](__dirname,bbpath2,_0x4d7f9a(0x1e1),_0x4d7f9a(0x3b6)));}),app[_0x7850e0(0x30a)](_0x7850e0(0x31e),(_0x58c506,_0x56e6c0)=>{const _0x5b3d37=_0x7850e0;_0x56e6c0['sendFile'](path[_0x5b3d37(0x1f7)](__dirname,bbpath2,_0x5b3d37(0x1e1),_0x5b3d37(0x3b6)));});if(HOST)http['listen'](PORT,HOST);else http[_0x7850e0(0x307)](PORT);const io=require(_0x7850e0(0x1d0))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x55c35b=_0x7850e0;let _0x2ae468='[ip-address]';const _0x21c332=networkInterfaces(),_0x10af51={};for(const _0x103a8a of Object[_0x55c35b(0x213)](_0x21c332)){for(const _0xb04d9b of _0x21c332[_0x103a8a]){if((_0xb04d9b[_0x55c35b(0x3b1)]==_0x55c35b(0x289)||_0xb04d9b[_0x55c35b(0x3b1)]==0x4)&&!_0xb04d9b[_0x55c35b(0x354)]){const _0x43a3e3=ipaddr[_0x55c35b(0x230)](_0xb04d9b[_0x55c35b(0x34e)])['range']();_0x43a3e3!=_0x55c35b(0x1e5)&&(!_0x10af51[_0x103a8a]&&(_0x10af51[_0x103a8a]=[]),_0x10af51[_0x103a8a][_0x55c35b(0x389)](_0xb04d9b[_0x55c35b(0x34e)]),_0x2ae468=_0xb04d9b[_0x55c35b(0x34e)]);}}}return{'serverip':_0x2ae468,'netinterfaces':_0x10af51};}async function startServer(){const _0x16461b=_0x7850e0,{serverip:_0x52c8fe,netinterfaces:_0x39aba5}=getServerIP();logger['simple'](''),logger[_0x16461b(0x36d)](_0x16461b(0x270)),await logger[_0x16461b(0x2da)](_0x16461b(0x370)+serverversion+_0x16461b(0x327)+(environment==_0x16461b(0x288)?_0x16461b(0x24c):'')+'\x0a'+(_0x16461b(0x23d)+PORT+_0x16461b(0x2d7))+(_0x16461b(0x22d)+_0x52c8fe+':'+PORT+_0x16461b(0x30e))),logger[_0x16461b(0x36d)](_0x16461b(0x270));if(config[_0x16461b(0x2a7)]!=0x0)for(const _0x3e5367 of config){if(_0x3e5367[_0x16461b(0x2cb)]==_0x16461b(0x3a5)||_0x3e5367[_0x16461b(0x2cb)]==_0x16461b(0x2ec))await logger[_0x16461b(0x2da)](_0x16461b(0x3af)+_0x3e5367['botID']+_0x16461b(0x303)+_0x3e5367['botname']),startBot([_0x3e5367[_0x16461b(0x315)],userID],{'cwd':bbpath},function(_0x26b71d){const _0x2b34e3=_0x16461b;if(_0x26b71d)logger[_0x2b34e3(0x2da)](_0x26b71d);});else(_0x3e5367[_0x16461b(0x2cb)]=='disabled'||_0x3e5367[_0x16461b(0x2cb)]==_0x16461b(0x384))&&await logger[_0x16461b(0x2da)](_0x16461b(0x22e)+_0x3e5367[_0x16461b(0x315)]+'\x20|\x20'+_0x3e5367[_0x16461b(0x314)]);}else!newBot&&logger[_0x16461b(0x36d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x16461b(0x36d)](_0x16461b(0x270)),logger[_0x16461b(0x36d)](''),await logger[_0x16461b(0x369)]('Node.js\x20v'+nodeversion),await logger['debug'](_0x16461b(0x28d),_0x39aba5);}function startSocket(){const _0x2caeaf=_0x7850e0;io['on'](_0x2caeaf(0x2b5),_0x4429b2=>{const _0x1d4885=_0x2caeaf;let _0x4b58f6,_0x1f0194,_0x2e507a,_0x15c36e,_0x118bdd;const _0x48d662=_0x4429b2['handshake']['headers']['referer'];_0x1f0194=_0x48d662[_0x1d4885(0x306)](/bot[0-9]{3}/);if(_0x1f0194)_0x2e507a=_0x1f0194[0x0][_0x1d4885(0x306)](/[0-9]{3}/);if(_0x2e507a)_0x4b58f6=_0x2e507a[0x0];else _0x4b58f6='botmanager';const _0x471873=_0x4429b2[_0x1d4885(0x23e)][_0x1d4885(0x263)][_0x1d4885(0x35a)];if(!_0x471873)_0x4429b2[_0x1d4885(0x352)](_0x1d4885(0x2cb),{'publicKey':secure[_0x1d4885(0x2a6)]});else{_0x15c36e=timelyDecrypt(_0x471873,![]);if(!_0x15c36e)_0x4429b2[_0x1d4885(0x352)]('status',{'publicKey':secure[_0x1d4885(0x2a6)]});else{_0x118bdd=normalizeIP(_0x4429b2[_0x1d4885(0x361)][_0x1d4885(0x254)])['store'];if(!devices[_0x15c36e])devices[_0x15c36e]={'uuid':_0x15c36e,'access':{'token':null}};devices[_0x15c36e]['ip']=_0x118bdd;const _0x36f321=addClient(_0x4429b2['id'],_0x15c36e,_0x4b58f6);setAccess(_0x36f321),emitMessages(),_0x4429b2['on']('login',_0x3fc6bc=>{const _0x189a1e=_0x1d4885,_0x53c72f=timelyDecrypt(_0x3fc6bc[_0x189a1e(0x341)]);if(_0x53c72f){_0x3fc6bc={'username':_0x3fc6bc[_0x189a1e(0x310)],'password':_0x53c72f},devices[_0x15c36e]['access']=validateCredentials(_0x3fc6bc,_0x15c36e);if(devices[_0x15c36e]['access'][_0x189a1e(0x25c)]==![]&&devices[_0x15c36e][_0x189a1e(0x1ed)]['reason']==_0x189a1e(0x220))_0x4429b2[_0x189a1e(0x352)](_0x189a1e(0x2cb),{'access':devices[_0x15c36e][_0x189a1e(0x1ed)]}),loginAccess2FA(_0x15c36e,_0x118bdd);else{if(devices[_0x15c36e]['access'][_0x189a1e(0x25c)]==![]&&devices[_0x15c36e][_0x189a1e(0x1ed)][_0x189a1e(0x297)]==_0x189a1e(0x29a))_0x4429b2['emit'](_0x189a1e(0x2cb),{'access':devices[_0x15c36e][_0x189a1e(0x1ed)]});else devices[_0x15c36e][_0x189a1e(0x1ed)]['allow']&&devices[_0x15c36e]['access']['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x15c36e)[_0x189a1e(0x26d)](_0x13e246=>{setAccess(_0x13e246);}),logger[_0x189a1e(0x369)](_0x189a1e(0x2fa)+_0x15c36e[_0x189a1e(0x351)](-0x8)),setTokenRefresh(_0x15c36e),setSessionTimeout('login',_0x15c36e));}}else logger['full'](_0x189a1e(0x2ce));}),_0x4429b2['on'](_0x1d4885(0x237),()=>{resetPassword();}),_0x4429b2['on'](_0x1d4885(0x32e),_0x34f5ed=>{removeClient(_0x4429b2['id']);}),_0x4b58f6==_0x1d4885(0x293)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x109fbc){const _0x27328d=_0x7850e0;if(_0x109fbc!=_0x27328d(0x293)&&config[_0x27328d(0x33b)]!=''){if(pid[_0x109fbc])pid[_0x109fbc]['send']({'function':_0x27328d(0x38b),'args':null});}_0x109fbc!='botmanager'&&broadcastToBots(_0x27328d(0x1fc),JSON[_0x27328d(0x386)](config));}function reloadBotManager(){const _0x1993be=_0x7850e0;getClientsWithBotID(_0x1993be(0x293))[_0x1993be(0x26d)](_0x2e0e7e=>{const _0x4cf78c=_0x1993be;getSocket(_0x2e0e7e['id'])[_0x4cf78c(0x352)](_0x4cf78c(0x2cb),{'access':{'allow':![],'reason':_0x4cf78c(0x1ee),'token':null}});});}function getSocket(_0x1d5ca4){const _0x531e56=_0x7850e0;return io['sockets'][_0x531e56(0x21b)][_0x531e56(0x30a)](_0x1d5ca4);}function setAccess(_0x49013e){const _0x14f6fe=_0x7850e0,_0x47cf3d=getSocket(_0x49013e['id']),_0x187a9c=_0x49013e[_0x14f6fe(0x1d1)],_0x30d80d=_0x49013e[_0x14f6fe(0x2d9)];devices[_0x187a9c][_0x14f6fe(0x1ed)]=validateAccess(devices[_0x187a9c][_0x14f6fe(0x1ed)][_0x14f6fe(0x302)],_0x187a9c),logger[_0x14f6fe(0x369)](_0x14f6fe(0x1e9)+devices[_0x187a9c][_0x14f6fe(0x1ed)][_0x14f6fe(0x297)]+_0x14f6fe(0x216)+_0x49013e['id'][_0x14f6fe(0x351)](-0x8)+_0x14f6fe(0x2df)+_0x187a9c['slice'](-0x8)),_0x47cf3d[_0x14f6fe(0x1f7)](_0x187a9c);if(devices[_0x187a9c]['access'][_0x14f6fe(0x25c)]){_0x47cf3d[_0x14f6fe(0x1f7)](_0x30d80d);if(_0x30d80d=='botmanager')initializeSocketBotManager(_0x47cf3d);else initializeSocketBot(_0x47cf3d);initClient(_0x30d80d);}devices[_0x187a9c][_0x14f6fe(0x1ed)][_0x14f6fe(0x302)]&&devices[_0x187a9c][_0x14f6fe(0x1ed)]['reason']==_0x14f6fe(0x1f9)&&setSessionTimeout(_0x14f6fe(0x334),_0x187a9c),devices[_0x187a9c]['access'][_0x14f6fe(0x302)]&&devices[_0x187a9c]['access'][_0x14f6fe(0x297)]==_0x14f6fe(0x27f)&&setSessionTimeout(_0x14f6fe(0x358),_0x187a9c),_0x47cf3d[_0x14f6fe(0x352)](_0x14f6fe(0x2cb),{'status':_0x49013e[_0x14f6fe(0x3b7)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x187a9c][_0x14f6fe(0x1ed)],'externalip':devices[_0x187a9c]['ip'],'publicKey':secure[_0x14f6fe(0x2a6)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x187a9c][_0x14f6fe(0x1ed)][_0x14f6fe(0x25c)]==![]&&devices[_0x187a9c][_0x14f6fe(0x1ed)][_0x14f6fe(0x297)]=='2FA\x20required'&&temporaryAccess2FA(_0x187a9c,devices[_0x187a9c]['ip']);}function setSessionTimeout(_0x9d417c,_0x25dabb){const _0x503118=_0x7850e0;let _0x8db101;if(_0x9d417c==_0x503118(0x358))_0x8db101=loginExpiry*0x3c*0x3e8;else _0x8db101=devices[_0x25dabb][_0x503118(0x2bc)][_0x503118(0x1db)]*0x3c*0x3e8-(new Date()[_0x503118(0x23f)]()-devices[_0x25dabb][_0x503118(0x2bc)][_0x503118(0x376)]);if(devices[_0x25dabb]['pidExpireLogin'])clearTimeout(devices[_0x25dabb][_0x503118(0x2a4)]);devices[_0x25dabb][_0x503118(0x2a4)]=setTimeout(()=>{const _0x10dd59=_0x503118;if(devices[_0x25dabb][_0x10dd59(0x2c9)])clearTimeout(devices[_0x25dabb][_0x10dd59(0x2c9)]);removeSocketListeners(_0x25dabb),addBlacklist(_0x25dabb),devices[_0x25dabb]['telegramIpApproval']=null,devices[_0x25dabb][_0x10dd59(0x312)]=null,devices[_0x25dabb][_0x10dd59(0x1ed)][_0x10dd59(0x302)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x25dabb[_0x10dd59(0x351)](-0x8)),devices[_0x25dabb][_0x10dd59(0x1ed)]=validateAccess(devices[_0x25dabb][_0x10dd59(0x1ed)]['token'],_0x25dabb),!(devices[_0x25dabb][_0x10dd59(0x1ed)][_0x10dd59(0x25c)]&&devices[_0x25dabb][_0x10dd59(0x1ed)]['reason']=='login\x20not\x20required')&&(_0x9d417c==_0x10dd59(0x358)?io['to'](_0x25dabb)['emit']('status',{'access':{'allow':![],'reason':_0x10dd59(0x257),'token':null}}):io['to'](_0x25dabb)[_0x10dd59(0x352)](_0x10dd59(0x2cb),{'access':{'allow':![],'reason':_0x10dd59(0x1f1),'token':null}})),devices[_0x25dabb][_0x10dd59(0x1ed)]['token']=null;},_0x8db101);}function setTokenRefresh(_0x1bcc7f){const _0x200818=_0x7850e0;if(devices[_0x1bcc7f]['pidRefreshToken'])clearTimeout(devices[_0x1bcc7f]['pidRefreshToken']);devices[_0x1bcc7f][_0x200818(0x2c9)]=setTimeout(()=>{const _0x110b72=_0x200818;getClientsWithUuid(_0x1bcc7f)[_0x110b72(0x2a7)]!=0x0?(devices[_0x1bcc7f][_0x110b72(0x1ed)]=refreshToken(_0x1bcc7f),io['to'](_0x1bcc7f)[_0x110b72(0x352)](_0x110b72(0x2cb),{'status':_0x110b72(0x2a1),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1bcc7f][_0x110b72(0x1ed)],'externalip':devices[_0x1bcc7f]['ip'],'publicKey':secure[_0x110b72(0x2a6)],'validInstallation':validInstallation}),setTokenRefresh(_0x1bcc7f)):clearTimeout(devices[_0x1bcc7f][_0x110b72(0x2c9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x498d7a){const _0x3feca6=_0x7850e0,_0x4c4681=getClient(_0x498d7a['id'])['uuid'];_0x498d7a[_0x3feca6(0x352)](_0x3feca6(0x1fc),config),_0x498d7a[_0x3feca6(0x352)]('settings',cleanSettings()),_0x498d7a['on'](_0x3feca6(0x264),_0x128415=>{const _0x2d85b4=_0x3feca6;if(validateAccess(_0x128415,_0x4c4681)[_0x2d85b4(0x25c)])addBot();else logger[_0x2d85b4(0x2da)](_0x2d85b4(0x1f4));}),_0x498d7a['on'](_0x3feca6(0x391),(_0x384eeb,_0x20f0c7)=>{const _0x2a1105=_0x3feca6;if(validateAccess(_0x20f0c7,_0x4c4681)['allow'])toggleBot(_0x384eeb[_0x2a1105(0x315)],_0x384eeb[_0x2a1105(0x2cb)],_0x384eeb[_0x2a1105(0x379)]);else logger[_0x2a1105(0x2da)](_0x2a1105(0x2e2));}),_0x498d7a['on'](_0x3feca6(0x344),(_0x4c0b13,_0x1d7b7f)=>{const _0x418ea3=_0x3feca6;if(validateAccess(_0x1d7b7f,_0x4c4681)[_0x418ea3(0x25c)])toggleBotMode(_0x4c0b13);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x498d7a['on'](_0x3feca6(0x1fb),(_0x407c8e,_0x52d33b)=>{const _0x5ba1b4=_0x3feca6;if(validateAccess(_0x52d33b,_0x4c4681)[_0x5ba1b4(0x25c)])deleteBot(_0x407c8e);else logger[_0x5ba1b4(0x2da)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x498d7a['on'](_0x3feca6(0x283),(_0x4bb9b0,_0x45c7ab)=>{const _0xa32a4a=_0x3feca6;if(validateAccess(_0x45c7ab,_0x4c4681)['allow'])storeSettings(_0x4bb9b0,!![]);else logger[_0xa32a4a(0x2da)](_0xa32a4a(0x33c));}),_0x498d7a['on'](_0x3feca6(0x286),_0x331094=>{const _0x2f8b35=_0x3feca6;if(validateAccess(_0x331094,_0x4c4681)[_0x2f8b35(0x25c)])updateBB(_0x2f8b35(0x24d));else logger[_0x2f8b35(0x2da)](_0x2f8b35(0x337));}),_0x498d7a['on'](_0x3feca6(0x339),_0x4c73e2=>{const _0x2457ac=_0x3feca6;if(validateAccess(_0x4c73e2,_0x4c4681)[_0x2457ac(0x25c)])updateBB(_0x2457ac(0x346));else logger[_0x2457ac(0x2da)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x498d7a['on'](_0x3feca6(0x3aa),_0x52b510=>{const _0x53cc4f=_0x3feca6;if(validateAccess(_0x52b510,_0x4c4681)[_0x53cc4f(0x25c)]){const _0x57755d=getClient(_0x498d7a['id']);if(_0x57755d)getBackupFiles(_0x57755d['uuid']);else logger[_0x53cc4f(0x2da)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger['full']('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x498d7a['on'](_0x3feca6(0x355),(_0x388e06,_0x3ceb6c)=>{const _0x3d08c5=_0x3feca6;if(validateAccess(_0x3ceb6c,_0x4c4681)[_0x3d08c5(0x25c)])restoreBackupFile(_0x388e06);else logger[_0x3d08c5(0x2da)](_0x3d08c5(0x221));}),_0x498d7a['on'](_0x3feca6(0x21a),_0x69477f=>{const _0xb255a6=_0x3feca6;if(validateAccess(_0x69477f,_0x4c4681)['allow'])getMessages();else logger[_0xb255a6(0x2da)](_0xb255a6(0x39b));}),_0x498d7a['on'](_0x3feca6(0x387),(_0x57ee0a,_0xe7a114)=>{const _0x465337=_0x3feca6;if(validateAccess(_0xe7a114,_0x4c4681)[_0x465337(0x25c)])confirmMessage(_0x57ee0a);else logger[_0x465337(0x2da)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x498d7a['on']('logout',_0xe80c1=>{const _0xca714a=_0x3feca6;if(validateAccess(_0xe80c1,_0x4c4681)[_0xca714a(0x25c)]){if(devices[_0x4c4681][_0xca714a(0x2c9)])clearTimeout(devices[_0x4c4681]['pidRefreshToken']);if(devices[_0x4c4681][_0xca714a(0x2a4)])clearTimeout(devices[_0x4c4681]['pidExpireLogin']);removeSocketListeners(getClient(_0x498d7a['id'])['uuid']),addBlacklist(_0x4c4681),devices[_0x4c4681]['telegramIpApproval']=null,devices[_0x4c4681]['telegram2FaApproval']=null,devices[_0x4c4681][_0xca714a(0x1ed)][_0xca714a(0x302)]=null,logger[_0xca714a(0x369)]('Logged\x20out\x20user\x20...'+_0x4c4681[_0xca714a(0x351)](-0x8)),io['to'](getClient(_0x498d7a['id'])[_0xca714a(0x1d1)])[_0xca714a(0x352)](_0xca714a(0x2cb),{'access':{'allow':![],'reason':_0xca714a(0x1ca),'token':null}});}else logger['full'](_0xca714a(0x277));});}function initializeSocketBot(_0x4c144e){const _0x37a296=_0x7850e0,_0x4fd0dc=getClient(_0x4c144e['id'])[_0x37a296(0x2d9)],_0x47662f=getClient(_0x4c144e['id'])[_0x37a296(0x1d1)];_0x4c144e['on'](_0x37a296(0x322),(_0x3259af,_0x4d04c9)=>{const _0x250e11=_0x37a296;if(validateAccess(_0x4d04c9,_0x47662f)[_0x250e11(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x250e11(0x251)]({'function':_0x250e11(0x309),'args':_0x3259af});}else logger['full'](_0x250e11(0x1e4));}),_0x4c144e['on'](_0x37a296(0x245),(_0x5598a6,_0x5c820c)=>{const _0x1198ee=_0x37a296;if(validateAccess(_0x5c820c,_0x47662f)['allow']){if(pid[_0x4fd0dc])pid[_0x4fd0dc]['send']({'function':_0x1198ee(0x231),'args':_0x5598a6});}else logger[_0x1198ee(0x2da)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x4c144e['on']('get-portfolio',(_0x178dab,_0x86ccbb)=>{const _0x5750c9=_0x37a296;if(validateAccess(_0x86ccbb,_0x47662f)[_0x5750c9(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x5750c9(0x251)]({'function':_0x5750c9(0x342),'args':_0x178dab});}else logger[_0x5750c9(0x2da)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x4c144e['on'](_0x37a296(0x1e2),(_0x247c74,_0x5eece1)=>{const _0x1becc4=_0x37a296;if(validateAccess(_0x5eece1,_0x47662f)['allow']){if(pid[_0x4fd0dc])pid[_0x4fd0dc]['send']({'function':_0x1becc4(0x35f),'args':_0x247c74});}else logger[_0x1becc4(0x2da)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x4c144e['on'](_0x37a296(0x2c4),(_0x47f194,_0x622211)=>{const _0x153fd4=_0x37a296;if(validateAccess(_0x622211,_0x47662f)['allow']){if(pid[_0x4fd0dc])pid[_0x4fd0dc]['send']({'function':'storeHeadless','args':_0x47f194});}else logger['full'](_0x153fd4(0x368));}),_0x4c144e['on'](_0x37a296(0x2e5),(_0xa1f812,_0xc2c784)=>{const _0x20e104=_0x37a296;if(validateAccess(_0xc2c784,_0x47662f)[_0x20e104(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x20e104(0x251)]({'function':_0x20e104(0x232),'args':_0xa1f812});}else logger[_0x20e104(0x2da)](_0x20e104(0x1ef));}),_0x4c144e['on'](_0x37a296(0x295),_0x164533=>{const _0x98f89=_0x37a296;if(validateAccess(_0x164533,_0x47662f)[_0x98f89(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x98f89(0x251)]({'function':'resetHistory','args':null});}else logger['full'](_0x98f89(0x229));}),_0x4c144e['on'](_0x37a296(0x356),_0x5476e4=>{const _0x5af724=_0x37a296;if(validateAccess(_0x5476e4,_0x47662f)[_0x5af724(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x5af724(0x251)]({'function':'getStartingBalances','args':null});}else logger['full'](_0x5af724(0x211));}),_0x4c144e['on'](_0x37a296(0x3b3),(_0x568a85,_0x5ae7bc)=>{const _0x4b339c=_0x37a296;if(validateAccess(_0x5ae7bc,_0x47662f)['allow']){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x4b339c(0x251)]({'function':_0x4b339c(0x218),'args':_0x568a85});}else logger[_0x4b339c(0x2da)](_0x4b339c(0x2f7));}),_0x4c144e['on'](_0x37a296(0x329),_0x537533=>{const _0x265ed9=_0x37a296;if(validateAccess(_0x537533,_0x47662f)[_0x265ed9(0x25c)]){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x265ed9(0x251)]({'function':_0x265ed9(0x396),'args':null});}else logger[_0x265ed9(0x2da)](_0x265ed9(0x29e));}),_0x4c144e['on'](_0x37a296(0x38c),_0x528ef8=>{const _0x14186c=_0x37a296;if(validateAccess(_0x528ef8,_0x47662f)['allow']){if(pid[_0x4fd0dc])pid[_0x4fd0dc][_0x14186c(0x251)]({'function':_0x14186c(0x381),'args':null});}else logger[_0x14186c(0x2da)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x4c144e['on'](_0x37a296(0x286),_0x3d85a5=>{const _0x526629=_0x37a296;if(validateAccess(_0x3d85a5,_0x47662f)['allow'])updateBB('update');else logger[_0x526629(0x2da)](_0x526629(0x337));}),_0x4c144e['on']('get-messages',_0x49d900=>{const _0x5d737a=_0x37a296;if(validateAccess(_0x49d900,_0x47662f)['allow'])getMessages();else logger['full'](_0x5d737a(0x39b));}),_0x4c144e['on'](_0x37a296(0x387),(_0x54d152,_0xde4bd5)=>{const _0x5e24c7=_0x37a296;if(validateAccess(_0xde4bd5,_0x47662f)['allow'])confirmMessage(_0x54d152);else logger['full'](_0x5e24c7(0x208));}),_0x4c144e['on'](_0x37a296(0x3a0),_0x2643bc=>{const _0x5c1d8f=_0x37a296;if(validateAccess(_0x2643bc,_0x47662f)[_0x5c1d8f(0x25c)]){if(devices[_0x47662f]['pidRefreshToken'])clearTimeout(devices[_0x47662f][_0x5c1d8f(0x2c9)]);if(devices[_0x47662f][_0x5c1d8f(0x2a4)])clearTimeout(devices[_0x47662f][_0x5c1d8f(0x2a4)]);removeSocketListeners(getClient(_0x4c144e['id'])['uuid']),addBlacklist(_0x47662f),devices[_0x47662f][_0x5c1d8f(0x2bc)]=null,devices[_0x47662f][_0x5c1d8f(0x312)]=null,devices[_0x47662f][_0x5c1d8f(0x1ed)]['token']=null,logger[_0x5c1d8f(0x369)]('Logged\x20out\x20user\x20...'+_0x47662f['slice'](-0x8)),io['to'](getClient(_0x4c144e['id'])[_0x5c1d8f(0x1d1)])[_0x5c1d8f(0x352)](_0x5c1d8f(0x2cb),{'access':{'allow':![],'reason':_0x5c1d8f(0x1ca),'token':null}});}else logger[_0x5c1d8f(0x2da)](_0x5c1d8f(0x277));});}function removeSocketListeners(_0x12be2a){const _0x5bb416=_0x7850e0;getClientsWithUuid(_0x12be2a)[_0x5bb416(0x26d)](_0x18697d=>{const _0xe0850=_0x5bb416;getSocket(_0x18697d['id'])[_0xe0850(0x372)]();});}function cleanSettings(){const _0x3104e9=_0x7850e0;let _0x1db917=settings;return settings[_0x3104e9(0x22c)]&&settings['telegramToken']!=''&&(_0x1db917={..._0x1db917,'telegramToken':'************'}),settings[_0x3104e9(0x3a3)]&&settings[_0x3104e9(0x3a3)]!=''&&(_0x1db917={..._0x1db917,'bbPassword':_0x3104e9(0x3a7)}),(settings[_0x3104e9(0x3a3)]&&settings['bbPassword']==_0x3104e9(0x250)||settings[_0x3104e9(0x22c)]&&settings[_0x3104e9(0x22c)]=='***')&&(_0x1db917={..._0x1db917,'restored':{'password':settings[_0x3104e9(0x3a3)]=='***','telegram':settings[_0x3104e9(0x22c)]==_0x3104e9(0x250)}}),_0x1db917;}async function updateBB(_0x4181ff){const _0x24e87e=_0x7850e0;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0xb2f132=>{const _0x490c87=_0x4a35;restartBot(_0xb2f132[_0x490c87(0x315)]);});if(_0x4181ff==_0x24e87e(0x24d))process[_0x24e87e(0x251)]({'update':!![],'environment':environment},_0x3ab4b6=>{});else _0x4181ff=='reinstall'&&process[_0x24e87e(0x251)]({'reinstall':!![],'environment':environment},_0x1dc416=>{});}function startBot(_0x1afcf9,_0x1e0032,_0x2c78d2){const _0x58ffe7=_0x7850e0;if(debugging)_0x1afcf9['push']('-d');let _0x177149=![];const _0x111918=_0x1afcf9[0x0];_0x1e0032={..._0x1e0032,'stdio':[_0x58ffe7(0x1d9),_0x58ffe7(0x1d9),_0x58ffe7(0x1d9),_0x58ffe7(0x39f)]},pid[_0x111918]=childProcess['fork'](botfile,_0x1afcf9,_0x1e0032),pid[_0x111918]['on']('message',_0x507382=>{const _0xc23c=_0x58ffe7;switch(Object[_0xc23c(0x213)](_0x507382)[0x0]){case _0xc23c(0x314):updateBotName(_0x111918,_0x507382[_0xc23c(0x314)]);break;case _0xc23c(0x2ff):updateBotManager();break;case _0xc23c(0x2cb):updateStatus(_0x111918,_0x507382[_0xc23c(0x2cb)]);break;case'live':updateLive(_0x111918,_0x507382[_0xc23c(0x379)]);break;case'started':updateLive(_0x111918,_0x507382[_0xc23c(0x1ec)]),io['to'](_0x111918)[_0xc23c(0x352)]('status',{'access':{'allow':![],'reason':_0xc23c(0x1ee),'token':null}});break;case _0xc23c(0x239):_0x507382[_0xc23c(0x239)]==_0xc23c(0x363)&&restartBot(_0x111918);_0x507382[_0xc23c(0x239)]==_0xc23c(0x265)&&toggleBot(_0x111918,_0xc23c(0x31a),_0xc23c(0x3ad));break;case'telegram':sendTelegram(_0x111918,_0x507382[_0xc23c(0x362)]);break;case _0xc23c(0x394):sendTelegramMsg(_0x507382[_0xc23c(0x394)]);break;case'function':io['to'](_0x111918)['emit'](_0x507382[_0xc23c(0x1e8)],_0x507382['args']);break;}}),pid[_0x111918]['on']('error',function(_0x1d8040){if(_0x177149)return;_0x177149=!![],_0x2c78d2(_0x1d8040);}),pid[_0x111918]['on']('exit',async function(_0x1b032a){const _0x59177b=_0x58ffe7;if(installingUpdate)return;if(_0x177149)return;_0x177149=!![],_0x2c78d2(null);const _0x92671b=dbConfig['get'](_0x59177b(0x1fc))[_0x59177b(0x3a8)]({'botID':_0x111918})['value']();_0x92671b&&(_0x92671b[_0x59177b(0x2cb)]=='enabled'||_0x92671b['status']=='new')&&(await sleep(0x3e8),updateLive(_0x111918,_0x59177b(0x3ad)),logger[_0x59177b(0x2da)]('Restarting\x20Bot\x20'+_0x111918),startBot([_0x111918,userID],{'cwd':bbpath},function(_0x222938){const _0x21b0d8=_0x59177b;if(_0x222938)logger[_0x21b0d8(0x2da)](_0x222938);}));});}function stopBot(_0x44c956){const _0x2d7d73=_0x7850e0;getClientsWithBotID(_0x44c956)[_0x2d7d73(0x26d)](_0xf720a1=>{const _0xc64cd=_0x2d7d73;getSocket(_0xf720a1['id'])[_0xc64cd(0x32e)](!![]),removeClient(_0xf720a1['id']);}),pid[_0x44c956]&&(pid[_0x44c956][_0x2d7d73(0x265)](),pid[_0x44c956]=null);}function restartBot(_0x1a1d01){if(pid[_0x1a1d01])pid[_0x1a1d01]['kill']();}function addBot(){const _0x4f1172=_0x7850e0;let _0xaa011;for(let _0x226aa4=0x1;_0x226aa4<0x3e9;_0x226aa4++){_0xaa011=_0x226aa4['toString']()[_0x4f1172(0x331)](0x3,'0');let _0x4dd41b=config['find'](_0x1861d2=>_0x1861d2[_0x4f1172(0x315)]==_0xaa011);if(!_0x4dd41b)break;}if(_0xaa011===_0x4f1172(0x260)){logger[_0x4f1172(0x2da)](_0x4f1172(0x1fe));return;}logger[_0x4f1172(0x2da)](_0x4f1172(0x274)+_0xaa011),dbConfig['get']('bots')[_0x4f1172(0x389)]({'botID':_0xaa011,'botname':_0x4f1172(0x24a)+_0xaa011,'status':'new','live':''})[_0x4f1172(0x38e)](),startBot([_0xaa011,userID],{'cwd':bbpath},function(_0x334ab4){if(_0x334ab4)logger['full'](_0x334ab4);}),config=getConfiguration(),io['to'](_0x4f1172(0x293))[_0x4f1172(0x352)](_0x4f1172(0x1fc),config),broadcastToBots(_0x4f1172(0x1fc),JSON[_0x4f1172(0x386)](config));}function deleteBot(_0x54d323){const _0x15a8c2=_0x7850e0;getClientsWithBotID(_0x54d323)['forEach'](_0x5c052a=>{const _0x1362fd=_0x4a35;getSocket(_0x5c052a['id'])[_0x1362fd(0x32e)](!![]),removeClient(_0x5c052a['id']);}),dbConfig[_0x15a8c2(0x30a)]('bots')[_0x15a8c2(0x340)]({'botID':_0x54d323})[_0x15a8c2(0x38e)](),logger['full'](_0x15a8c2(0x25e)+_0x54d323),stopBot(_0x54d323);try{if(fs['existsSync'](path[_0x15a8c2(0x1f7)](configpath,'bot-'+_0x54d323+_0x15a8c2(0x335))))fs[_0x15a8c2(0x2fb)](path[_0x15a8c2(0x1f7)](configpath,'bot-'+_0x54d323+'-config.json'));if(fs['existsSync'](path['join'](configpath,_0x15a8c2(0x2ba)+_0x54d323+_0x15a8c2(0x217))))fs['unlinkSync'](path['join'](configpath,_0x15a8c2(0x2ba)+_0x54d323+'-events.json'));if(fs[_0x15a8c2(0x27b)](path[_0x15a8c2(0x1f7)](configpath,_0x15a8c2(0x2ba)+_0x54d323+'-performance.json')))fs['unlinkSync'](path[_0x15a8c2(0x1f7)](configpath,_0x15a8c2(0x2ba)+_0x54d323+_0x15a8c2(0x2f4)));if(fs['existsSync'](path['join'](configpath,_0x15a8c2(0x2ba)+_0x54d323+_0x15a8c2(0x377))))fs['unlinkSync'](path[_0x15a8c2(0x1f7)](configpath,'bot-'+_0x54d323+'-results.json'));}catch(_0x30a9e2){if(_0x30a9e2)logger[_0x15a8c2(0x2da)](_0x15a8c2(0x275),_0x30a9e2);}config=getConfiguration(),io['to'](_0x15a8c2(0x293))[_0x15a8c2(0x352)](_0x15a8c2(0x1fc),config),broadcastToBots(_0x15a8c2(0x1fc),JSON[_0x15a8c2(0x386)](config));}function toggleBot(_0x2f8fe3,_0x46ea83,_0x52804a){const _0x26472f=_0x7850e0;dbConfig[_0x26472f(0x30a)](_0x26472f(0x1fc))[_0x26472f(0x3a8)]({'botID':_0x2f8fe3})['assign']({'status':_0x46ea83})['assign']({'live':_0x52804a})['write']();if(_0x46ea83=='enabled'||_0x46ea83==_0x26472f(0x2ec))logger[_0x26472f(0x2da)](_0x26472f(0x380)+_0x2f8fe3),startBot([_0x2f8fe3,userID],{'cwd':bbpath},function(_0x984663){const _0x408601=_0x26472f;if(_0x984663)logger[_0x408601(0x2da)](_0x984663);});else(_0x46ea83=='disabled'||_0x46ea83==_0x26472f(0x384))&&(logger[_0x26472f(0x2da)](_0x26472f(0x200)+_0x2f8fe3),stopBot(_0x2f8fe3));config=getConfiguration(),io['to'](_0x26472f(0x293))[_0x26472f(0x352)]('bots',config),broadcastToBots(_0x26472f(0x1fc),JSON[_0x26472f(0x386)](config));}function toggleStatus(_0x13b8d3){const _0x4d53a7=_0x7850e0;let _0x990685=dbConfig[_0x4d53a7(0x30a)](_0x4d53a7(0x1fc))[_0x4d53a7(0x3a8)]({'botID':_0x13b8d3})[_0x4d53a7(0x2d1)](),_0x3cb190;if(_0x990685[_0x4d53a7(0x2cb)]===_0x4d53a7(0x3a5))_0x3cb190=_0x4d53a7(0x31a);else{if(_0x990685[_0x4d53a7(0x2cb)]===_0x4d53a7(0x2ec))_0x3cb190=_0x4d53a7(0x384);else{if(_0x990685[_0x4d53a7(0x2cb)]==='new-disabled')_0x3cb190='new';else{if(_0x990685[_0x4d53a7(0x2cb)]==='disabled')_0x3cb190=_0x4d53a7(0x3a5);}}}return _0x3cb190;}function updateStatus(_0x2169db,_0x10e76a){const _0x2a43b7=_0x7850e0;dbConfig['get'](_0x2a43b7(0x1fc))[_0x2a43b7(0x3a8)]({'botID':_0x2169db})['assign']({'status':_0x10e76a})[_0x2a43b7(0x38e)](),config=getConfiguration(),io['to'](_0x2a43b7(0x293))['emit'](_0x2a43b7(0x1fc),config),broadcastToBots('bots',JSON[_0x2a43b7(0x386)](config));}function updateLive(_0x473de0,_0x54e8e9){const _0x51c615=_0x7850e0;dbConfig[_0x51c615(0x30a)](_0x51c615(0x1fc))[_0x51c615(0x3a8)]({'botID':_0x473de0})['assign']({'live':_0x54e8e9})[_0x51c615(0x38e)](),config=getConfiguration(),io['to'](_0x51c615(0x293))[_0x51c615(0x352)](_0x51c615(0x1fc),config),broadcastToBots(_0x51c615(0x1fc),JSON[_0x51c615(0x386)](config));}function updateBotName(_0x2dcbb3,_0x325241){const _0x2f4e9a=_0x7850e0;dbConfig[_0x2f4e9a(0x30a)](_0x2f4e9a(0x1fc))[_0x2f4e9a(0x3a8)]({'botID':_0x2dcbb3})[_0x2f4e9a(0x2ad)]({'botname':_0x325241})[_0x2f4e9a(0x38e)](),config=getConfiguration(),io['to']('botmanager')[_0x2f4e9a(0x352)](_0x2f4e9a(0x1fc),config),broadcastToBots('bots',JSON[_0x2f4e9a(0x386)](config));}function updateBotManager(){const _0x4ad049=_0x7850e0;config=getConfiguration(),io['to'](_0x4ad049(0x293))[_0x4ad049(0x352)]('bots',config),broadcastToBots(_0x4ad049(0x1fc),JSON[_0x4ad049(0x386)](config));}function toggleBotMode(_0x3bddcc){const _0x3adfbf=_0x7850e0;if(pid[_0x3bddcc])pid[_0x3bddcc][_0x3adfbf(0x251)]({'function':_0x3adfbf(0x22f),'args':null});else{const _0x4c67db=configpath+_0x3adfbf(0x2ba)+_0x3bddcc+_0x3adfbf(0x335),_0x111c89=fs[_0x3adfbf(0x395)](_0x4c67db),_0x30fe9d=JSON['parse'](_0x111c89),_0x2c4ea0=_0x30fe9d[_0x3adfbf(0x2d9)][0x0][_0x3adfbf(0x1cd)];_0x30fe9d[_0x3adfbf(0x2d9)][0x0][_0x3adfbf(0x1cd)]=!_0x2c4ea0;const _0x51815b=JSON[_0x3adfbf(0x386)](_0x30fe9d,null,0x2);fs[_0x3adfbf(0x26f)](_0x4c67db,_0x51815b),config=getConfiguration(),io['to'](_0x3adfbf(0x293))[_0x3adfbf(0x352)](_0x3adfbf(0x1fc),config),broadcastToBots('bots',JSON[_0x3adfbf(0x386)](config));}}function telegramError(_0x430272){const _0x442467=_0x7850e0;logger[_0x442467(0x36d)](getTimeStamp()+_0x442467(0x37f));}function validateTelegram(_0xe73431){const _0x2cd5d5=_0x7850e0;if(_0xe73431[_0x2cd5d5(0x3b8)][_0x2cd5d5(0x310)]!=settings['telegramUsername']&&'@'+_0xe73431[_0x2cd5d5(0x3b8)][_0x2cd5d5(0x310)]!=settings[_0x2cd5d5(0x357)])return tgBot[_0x2cd5d5(0x32f)](_0xe73431[_0x2cd5d5(0x2b8)]['id'],_0x2cd5d5(0x223),{'parse_mode':_0x2cd5d5(0x1f2)})['catch'](_0x1d949d=>{telegramError(_0x1d949d);}),![];return!![];}async function initTelegram(){const _0x1b5340=_0x7850e0;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1b5340(0x22c)],{'polling':!![]});let _0x58b2df=_0x1b5340(0x285);_0x58b2df+='\x0a',_0x58b2df+=_0x1b5340(0x209),_0x58b2df+='/disable\x20-\x20disable\x20notifications\x0a',_0x58b2df+=_0x1b5340(0x1dc),_0x58b2df+=_0x1b5340(0x37d),_0x58b2df+=_0x1b5340(0x3ae),_0x58b2df+=_0x1b5340(0x222),_0x58b2df+=_0x1b5340(0x2b1),_0x58b2df+=_0x1b5340(0x242),_0x58b2df+=_0x1b5340(0x28b),_0x58b2df+=_0x1b5340(0x2e6),_0x58b2df+=_0x1b5340(0x398),_0x58b2df+=_0x1b5340(0x2c2),_0x58b2df+=_0x1b5340(0x2e8),_0x58b2df+=_0x1b5340(0x273);let _0x3432f7=_0x1b5340(0x1f0);_0x3432f7+='\x0a',_0x3432f7+=_0x58b2df,tgBot[_0x1b5340(0x252)](/\/start/,_0x1a2edf=>{const _0x4b8752=_0x1b5340;if(!validateTelegram(_0x1a2edf))return;if(settings['telegramChatId']!=_0x1a2edf[_0x4b8752(0x2b8)]['id'])updateSetting(_0x4b8752(0x30b),_0x1a2edf[_0x4b8752(0x2b8)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4b8752(0x32f)](_0x1a2edf[_0x4b8752(0x2b8)]['id'],_0x3432f7)[_0x4b8752(0x35c)](_0x431c5f=>{telegramError(_0x431c5f);});}),tgBot[_0x1b5340(0x252)](/\/enable/,_0x3a5c7b=>{const _0x20ba59=_0x1b5340;if(!validateTelegram(_0x3a5c7b))return;if(settings[_0x20ba59(0x30b)]!=_0x3a5c7b[_0x20ba59(0x2b8)]['id'])updateSetting('telegramChatId',_0x3a5c7b[_0x20ba59(0x2b8)]['id']);updateSetting(_0x20ba59(0x3b0),!![]),tgBot[_0x20ba59(0x32f)](_0x3a5c7b[_0x20ba59(0x2b8)]['id'],_0x20ba59(0x349))[_0x20ba59(0x35c)](_0x33799e=>{telegramError(_0x33799e);});}),tgBot[_0x1b5340(0x252)](/\/config/,async _0x2957fb=>{const _0x4ec041=_0x1b5340;if(!validateTelegram(_0x2957fb))return;tgBot[_0x4ec041(0x3a6)](_0x4ec041(0x2f1)),tgBot[_0x4ec041(0x32f)](_0x2957fb[_0x4ec041(0x2b8)]['id'],_0x4ec041(0x367),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x4ec041(0x333)},{'text':_0x4ec041(0x35d),'callback_data':_0x4ec041(0x2b4)},{'text':_0x4ec041(0x238),'callback_data':_0x4ec041(0x32b)}]]}})['catch'](_0x510692=>{telegramError(_0x510692);}),tgBot['on'](_0x4ec041(0x2f1),async _0x3ec251=>{const _0x5117a5=_0x4ec041,_0x3d17b3=_0x3ec251[_0x5117a5(0x1ea)],_0x43eb68=_0x3ec251[_0x5117a5(0x33e)];tgBot[_0x5117a5(0x397)](_0x3ec251['id'])[_0x5117a5(0x359)](async()=>{const _0x4a39ea=_0x5117a5;_0x3d17b3==_0x4a39ea(0x333)&&(updateSetting(_0x4a39ea(0x2de),_0x4a39ea(0x333)),updateSetting(_0x4a39ea(0x3b0),!![]),await tgBot[_0x4a39ea(0x32f)](_0x43eb68[_0x4a39ea(0x2b8)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x15f7fc=>{telegramError(_0x15f7fc);}));_0x3d17b3==_0x4a39ea(0x2b4)&&(updateSetting(_0x4a39ea(0x2de),_0x4a39ea(0x2b4)),updateSetting(_0x4a39ea(0x3b0),!![]),await tgBot[_0x4a39ea(0x32f)](_0x43eb68['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x4a39ea(0x35c)](_0x3da8a0=>{telegramError(_0x3da8a0);}));_0x3d17b3==_0x4a39ea(0x32b)&&(updateSetting(_0x4a39ea(0x2de),_0x4a39ea(0x32b)),updateSetting(_0x4a39ea(0x3b0),!![]),await tgBot['sendMessage'](_0x43eb68[_0x4a39ea(0x2b8)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x22891=>{telegramError(_0x22891);}));if(!settings[_0x4a39ea(0x30b)])tgBot['sendMessage'](_0x43eb68['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x4a39ea(0x35c)](_0x22261a=>{telegramError(_0x22261a);});}),tgBot[_0x5117a5(0x3a6)](_0x5117a5(0x2f1));});}),tgBot[_0x1b5340(0x252)](/\/status/,_0x566e66=>{const _0x1ea410=_0x1b5340;if(!validateTelegram(_0x566e66))return;const _0xe27829=getBotsWithMode();let _0x3d8ed6=_0x1ea410(0x2a5);config['forEach'](_0x93734d=>{const _0xea0ab1=_0x1ea410,_0x5d23c9=_0xe27829[_0xea0ab1(0x3a8)](_0x11e67a=>_0x11e67a[_0xea0ab1(0x315)]==_0x93734d[_0xea0ab1(0x315)])[_0xea0ab1(0x34a)];_0x3d8ed6+=_0xea0ab1(0x24a)+_0x93734d[_0xea0ab1(0x315)]+':\x20'+_0x93734d[_0xea0ab1(0x2cb)]+_0xea0ab1(0x303)+_0x5d23c9+_0xea0ab1(0x303)+_0x93734d['live']+'\x0a';}),_0x3d8ed6+='\x0a',_0x3d8ed6+=_0x1ea410(0x1f3),_0x3d8ed6+=!settings[_0x1ea410(0x3b0)]?'Notifications\x20disabled\x0a':_0x1ea410(0x29d),_0x3d8ed6+=settings[_0x1ea410(0x3b0)]?settings[_0x1ea410(0x2de)]==_0x1ea410(0x32b)?_0x1ea410(0x25d):_0x1ea410(0x313)+settings[_0x1ea410(0x2de)]+'\x20only\x0a':'',tgBot[_0x1ea410(0x32f)](_0x566e66[_0x1ea410(0x2b8)]['id'],_0x3d8ed6,{'parse_mode':_0x1ea410(0x1f2)})[_0x1ea410(0x35c)](_0x2a83f6=>{telegramError(_0x2a83f6);});}),tgBot['onText'](/\/restart/,_0x2ec759=>{const _0x422755=_0x1b5340;if(!validateTelegram(_0x2ec759))return;tgBot[_0x422755(0x3a6)](_0x422755(0x2f1));const _0x329d52=getEnabledBots();if(_0x329d52[_0x422755(0x2a7)]==0x0)tgBot[_0x422755(0x32f)](_0x2ec759[_0x422755(0x2b8)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x422755(0x35c)](_0x333878=>{telegramError(_0x333878);});else{if(_0x329d52[_0x422755(0x2a7)]>0x1)_0x329d52[_0x422755(0x389)]({'botID':_0x422755(0x32b)});let _0xe3b981=[],_0x217b43=[];const _0x1679e4=_0x329d52[_0x422755(0x2a7)]%0x4==0x0||_0x329d52['length']%0x4==0x3||_0x329d52[_0x422755(0x2a7)]%0x3==0x1?0x4:0x3;let _0x5e5f19=0x0;_0x329d52[_0x422755(0x26d)]((_0x50c91,_0x1aec59)=>{const _0x1467ea=_0x422755;if(_0x1aec59%_0x1679e4==0x0)_0x217b43=[];_0x217b43['push']({'text':_0x50c91[_0x1467ea(0x315)]=='all'?'All\x20bots':_0x1467ea(0x24a)+_0x50c91['botID'],'callback_data':_0x50c91[_0x1467ea(0x315)]}),_0x1aec59%_0x1679e4==0x0&&(_0xe3b981[_0x5e5f19]=_0x217b43,_0x5e5f19++);}),tgBot[_0x422755(0x32f)](_0x2ec759['chat']['id'],_0x422755(0x385),{'reply_markup':{'inline_keyboard':_0xe3b981}})['catch'](_0x362742=>{telegramError(_0x362742);}),tgBot['on']('callback_query',async _0x5ae064=>{const _0x2725be=_0x422755,_0x104d84=_0x5ae064[_0x2725be(0x1ea)],_0x2e3cf4=_0x5ae064['message'];tgBot[_0x2725be(0x397)](_0x5ae064['id'])[_0x2725be(0x359)](async()=>{_0x104d84=='all'?config['forEach'](_0x1a2fc9=>{const _0xa92862=_0x4a35;restartBot(_0x1a2fc9[_0xa92862(0x315)]);}):restartBot(_0x104d84);}),tgBot[_0x2725be(0x3a6)](_0x2725be(0x2f1));});}}),tgBot[_0x1b5340(0x252)](/\/on/,_0x2e697c=>{const _0x30d022=_0x1b5340;if(!validateTelegram(_0x2e697c))return;tgBot[_0x30d022(0x3a6)](_0x30d022(0x2f1));const _0x3b4882=getDisabledBots();if(_0x3b4882[_0x30d022(0x2a7)]==0x0)tgBot['sendMessage'](_0x2e697c[_0x30d022(0x2b8)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x30d022(0x35c)](_0x15eabf=>{telegramError(_0x15eabf);});else{if(_0x3b4882[_0x30d022(0x2a7)]>0x1)_0x3b4882[_0x30d022(0x389)]({'botID':_0x30d022(0x32b)});let _0x4c633d=[],_0x581345=[];const _0x8c54a9=_0x3b4882[_0x30d022(0x2a7)]%0x4==0x0||_0x3b4882[_0x30d022(0x2a7)]%0x4==0x3||_0x3b4882[_0x30d022(0x2a7)]%0x3==0x1?0x4:0x3;let _0x4c2c5e=0x0;_0x3b4882[_0x30d022(0x26d)]((_0x432371,_0x4eda18)=>{const _0x1c2d28=_0x30d022;if(_0x4eda18%_0x8c54a9==0x0)_0x581345=[];_0x581345[_0x1c2d28(0x389)]({'text':_0x432371[_0x1c2d28(0x315)]=='all'?_0x1c2d28(0x21d):_0x1c2d28(0x24a)+_0x432371[_0x1c2d28(0x315)],'callback_data':_0x432371[_0x1c2d28(0x315)]}),_0x4eda18%_0x8c54a9==0x0&&(_0x4c633d[_0x4c2c5e]=_0x581345,_0x4c2c5e++);}),tgBot[_0x30d022(0x32f)](_0x2e697c[_0x30d022(0x2b8)]['id'],_0x30d022(0x29b),{'reply_markup':{'inline_keyboard':_0x4c633d}})[_0x30d022(0x35c)](_0x3d0d60=>{telegramError(_0x3d0d60);}),tgBot['on'](_0x30d022(0x2f1),async _0x1a69e5=>{const _0x2fe980=_0x30d022,_0x2517dd=_0x1a69e5[_0x2fe980(0x1ea)],_0x6c2d47=_0x1a69e5['message'];tgBot[_0x2fe980(0x397)](_0x1a69e5['id'])[_0x2fe980(0x359)](async()=>{const _0x2b5703=_0x2fe980;_0x2517dd=='all'?(tgBot[_0x2b5703(0x32f)](_0x6c2d47['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x2b5703(0x35c)](_0x76dbaa=>{telegramError(_0x76dbaa);}),_0x3b4882['forEach'](_0x5c6283=>{const _0x413c82=_0x2b5703;if(_0x5c6283[_0x413c82(0x315)]!=_0x413c82(0x32b))toggleBot(_0x5c6283[_0x413c82(0x315)],toggleStatus(_0x5c6283['botID']),'stopped');})):(tgBot['sendMessage'](_0x6c2d47[_0x2b5703(0x2b8)]['id'],_0x2b5703(0x3a2)+_0x2517dd)[_0x2b5703(0x35c)](_0x331224=>{telegramError(_0x331224);}),toggleBot(_0x2517dd,toggleStatus(_0x2517dd),_0x2b5703(0x3ad)));}),tgBot[_0x2fe980(0x3a6)](_0x2fe980(0x2f1));});}}),tgBot['onText'](/\/off/,_0x4f5c50=>{const _0x5e667c=_0x1b5340;if(!validateTelegram(_0x4f5c50))return;tgBot[_0x5e667c(0x3a6)]('callback_query');const _0x5776d5=getEnabledBots();if(_0x5776d5[_0x5e667c(0x2a7)]==0x0)tgBot[_0x5e667c(0x32f)](_0x4f5c50['chat']['id'],_0x5e667c(0x33a))[_0x5e667c(0x35c)](_0xe34a8a=>{telegramError(_0xe34a8a);});else{if(_0x5776d5[_0x5e667c(0x2a7)]>0x1)_0x5776d5[_0x5e667c(0x389)]({'botID':_0x5e667c(0x32b)});let _0x2f09da=[],_0x128f64=[];const _0x13e1ba=_0x5776d5[_0x5e667c(0x2a7)]%0x4==0x0||_0x5776d5[_0x5e667c(0x2a7)]%0x4==0x3||_0x5776d5[_0x5e667c(0x2a7)]%0x3==0x1?0x4:0x3;let _0x5556c3=0x0;_0x5776d5['forEach']((_0x52c4d4,_0x5b4ae4)=>{const _0x20f113=_0x5e667c;if(_0x5b4ae4%_0x13e1ba==0x0)_0x128f64=[];_0x128f64[_0x20f113(0x389)]({'text':_0x52c4d4[_0x20f113(0x315)]==_0x20f113(0x32b)?_0x20f113(0x21d):_0x20f113(0x24a)+_0x52c4d4['botID'],'callback_data':_0x52c4d4[_0x20f113(0x315)]}),_0x5b4ae4%_0x13e1ba==0x0&&(_0x2f09da[_0x5556c3]=_0x128f64,_0x5556c3++);}),tgBot[_0x5e667c(0x32f)](_0x4f5c50[_0x5e667c(0x2b8)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2f09da}})[_0x5e667c(0x35c)](_0x22a51f=>{telegramError(_0x22a51f);}),tgBot['on']('callback_query',async _0x31bb42=>{const _0x4b67de=_0x5e667c,_0xc78f0d=_0x31bb42[_0x4b67de(0x1ea)],_0x296786=_0x31bb42[_0x4b67de(0x33e)];tgBot[_0x4b67de(0x397)](_0x31bb42['id'])[_0x4b67de(0x359)](async()=>{const _0x54be37=_0x4b67de;_0xc78f0d==_0x54be37(0x32b)?(tgBot[_0x54be37(0x32f)](_0x296786[_0x54be37(0x2b8)]['id'],_0x54be37(0x37e))[_0x54be37(0x35c)](_0x3d3644=>{telegramError(_0x3d3644);}),_0x5776d5[_0x54be37(0x26d)](_0x3ae001=>{const _0x4c6661=_0x54be37;if(_0x3ae001['botID']!=_0x4c6661(0x32b))toggleBot(_0x3ae001[_0x4c6661(0x315)],toggleStatus(_0x3ae001['botID']),_0x4c6661(0x3ad));})):(tgBot[_0x54be37(0x32f)](_0x296786[_0x54be37(0x2b8)]['id'],_0x54be37(0x262)+_0xc78f0d)['catch'](_0x2c3bed=>{telegramError(_0x2c3bed);}),toggleBot(_0xc78f0d,toggleStatus(_0xc78f0d),'stopped'));}),tgBot[_0x4b67de(0x3a6)]('callback_query');});}}),tgBot[_0x1b5340(0x252)](/\/metrics/,_0x31355c=>{const _0x5752c5=_0x1b5340;if(!validateTelegram(_0x31355c))return;tgBot['removeListener'](_0x5752c5(0x2f1));const _0x4da1fd=getEnabledBots();if(_0x4da1fd[_0x5752c5(0x2a7)]==0x0)tgBot[_0x5752c5(0x32f)](_0x31355c[_0x5752c5(0x2b8)]['id'],_0x5752c5(0x33a))[_0x5752c5(0x35c)](_0x3869ce=>{telegramError(_0x3869ce);});else{if(_0x4da1fd[_0x5752c5(0x2a7)]>0x1){let _0x1afa63=[],_0x32f648=[];const _0x5ce810=_0x4da1fd['length']%0x4==0x0||_0x4da1fd[_0x5752c5(0x2a7)]%0x4==0x3||_0x4da1fd[_0x5752c5(0x2a7)]%0x3==0x1?0x4:0x3;let _0x1df7fe=0x0;_0x4da1fd[_0x5752c5(0x26d)]((_0x487f49,_0x5b8a28)=>{const _0x4a6c3e=_0x5752c5;if(_0x5b8a28%_0x5ce810==0x0)_0x32f648=[];_0x32f648['push']({'text':_0x4a6c3e(0x24a)+_0x487f49[_0x4a6c3e(0x315)],'callback_data':_0x487f49[_0x4a6c3e(0x315)]}),_0x5b8a28%_0x5ce810==0x0&&(_0x1afa63[_0x1df7fe]=_0x32f648,_0x1df7fe++);}),tgBot[_0x5752c5(0x32f)](_0x31355c['chat']['id'],_0x5752c5(0x215),{'reply_markup':{'inline_keyboard':_0x1afa63}})[_0x5752c5(0x35c)](_0x510465=>{telegramError(_0x510465);}),tgBot['on'](_0x5752c5(0x2f1),async _0x118632=>{const _0x1e9ac3=_0x5752c5,_0x3959b3=_0x118632[_0x1e9ac3(0x1ea)],_0x5189b5=_0x118632[_0x1e9ac3(0x33e)];tgBot[_0x1e9ac3(0x397)](_0x118632['id'])['then'](async()=>{const _0x1c7451=_0x1e9ac3;if(pid[_0x3959b3])pid[_0x3959b3][_0x1c7451(0x251)]({'function':_0x1c7451(0x271),'args':null});}),tgBot[_0x1e9ac3(0x3a6)](_0x1e9ac3(0x2f1));});}else{const _0x29bc4a=_0x4da1fd[0x0][_0x5752c5(0x315)];if(pid[_0x29bc4a])pid[_0x29bc4a][_0x5752c5(0x251)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x1b5340(0x252)](/\/portfolio/,_0x480f11=>{const _0x839a78=_0x1b5340;if(!validateTelegram(_0x480f11))return;tgBot[_0x839a78(0x3a6)](_0x839a78(0x2f1));const _0x5e1a1c=getEnabledBots();if(_0x5e1a1c[_0x839a78(0x2a7)]==0x0)tgBot[_0x839a78(0x32f)](_0x480f11['chat']['id'],_0x839a78(0x33a))[_0x839a78(0x35c)](_0x3697e6=>{telegramError(_0x3697e6);});else{if(_0x5e1a1c[_0x839a78(0x2a7)]>0x1){let _0x173a70=[],_0x311b40=[];const _0x1f98b2=_0x5e1a1c[_0x839a78(0x2a7)]%0x4==0x0||_0x5e1a1c['length']%0x4==0x3||_0x5e1a1c[_0x839a78(0x2a7)]%0x3==0x1?0x4:0x3;let _0x22e0de=0x0;_0x5e1a1c[_0x839a78(0x26d)]((_0x5e2b66,_0x456d10)=>{const _0x1c9c87=_0x839a78;if(_0x456d10%_0x1f98b2==0x0)_0x311b40=[];_0x311b40[_0x1c9c87(0x389)]({'text':_0x1c9c87(0x24a)+_0x5e2b66['botID'],'callback_data':_0x5e2b66[_0x1c9c87(0x315)]}),_0x456d10%_0x1f98b2==0x0&&(_0x173a70[_0x22e0de]=_0x311b40,_0x22e0de++);}),tgBot[_0x839a78(0x32f)](_0x480f11[_0x839a78(0x2b8)]['id'],_0x839a78(0x2b7),{'reply_markup':{'inline_keyboard':_0x173a70}})['catch'](_0x222a70=>{telegramError(_0x222a70);}),tgBot['on']('callback_query',async _0xd4dd85=>{const _0x39bf44=_0x839a78,_0x16ec86=_0xd4dd85[_0x39bf44(0x1ea)],_0x8c457d=_0xd4dd85[_0x39bf44(0x33e)];tgBot[_0x39bf44(0x397)](_0xd4dd85['id'])['then'](async()=>{const _0x75b5e0=_0x39bf44;if(pid[_0x16ec86])pid[_0x16ec86][_0x75b5e0(0x251)]({'function':_0x75b5e0(0x28a),'args':null});}),tgBot[_0x39bf44(0x3a6)]('callback_query');});}else{const _0x5e5d3f=_0x5e1a1c[0x0][_0x839a78(0x315)];if(pid[_0x5e5d3f])pid[_0x5e5d3f][_0x839a78(0x251)]({'function':_0x839a78(0x28a),'args':null});}}}),tgBot['onText'](/\/update/,async _0x356c37=>{const _0x537052=_0x1b5340;if(!validateTelegram(_0x356c37))return;tgBot[_0x537052(0x3a6)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x537052(0x32f)](_0x356c37[_0x537052(0x2b8)]['id'],_0x537052(0x392))[_0x537052(0x35c)](_0x5e21b4=>{telegramError(_0x5e21b4);});else!validInstallation?tgBot[_0x537052(0x32f)](_0x356c37[_0x537052(0x2b8)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x537052(0x35c)](_0x1bb168=>{telegramError(_0x1bb168);}):(tgBot['sendMessage'](_0x356c37['chat']['id'],_0x537052(0x253),{'reply_markup':{'inline_keyboard':[[{'text':_0x537052(0x36f),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x537052(0x35c)](_0x3d8c13=>{telegramError(_0x3d8c13);}),tgBot['on']('callback_query',async _0x14a569=>{const _0x106c1c=_0x537052,_0x23cacc=_0x14a569[_0x106c1c(0x1ea)],_0x340e59=_0x14a569[_0x106c1c(0x33e)];tgBot[_0x106c1c(0x397)](_0x14a569['id'])[_0x106c1c(0x359)](async()=>{const _0x4756ea=_0x106c1c;_0x23cacc==_0x4756ea(0x31b)&&(await tgBot[_0x4756ea(0x32f)](_0x340e59[_0x4756ea(0x2b8)]['id'],_0x4756ea(0x28c))[_0x4756ea(0x35c)](_0x2bbb53=>{telegramError(_0x2bbb53);}),updateBB(_0x4756ea(0x24d))),_0x23cacc=='no'&&await tgBot[_0x4756ea(0x32f)](_0x340e59[_0x4756ea(0x2b8)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x4756ea(0x35c)](_0x4229ef=>{telegramError(_0x4229ef);});}),tgBot[_0x106c1c(0x3a6)]('callback_query');}));}),tgBot[_0x1b5340(0x252)](/\/reinstall/,async _0x4e00b3=>{const _0x3c88f6=_0x1b5340;if(!validateTelegram(_0x4e00b3))return;tgBot[_0x3c88f6(0x3a6)]('callback_query'),!validInstallation?tgBot['sendMessage'](_0x4e00b3['chat']['id'],_0x3c88f6(0x228))[_0x3c88f6(0x35c)](_0x3ee2fd=>{telegramError(_0x3ee2fd);}):(tgBot[_0x3c88f6(0x32f)](_0x4e00b3[_0x3c88f6(0x2b8)]['id'],_0x3c88f6(0x1da),{'reply_markup':{'inline_keyboard':[[{'text':_0x3c88f6(0x36f),'callback_data':_0x3c88f6(0x31b)},{'text':'No','callback_data':'no'}]]}})[_0x3c88f6(0x35c)](_0x4547ce=>{telegramError(_0x4547ce);}),tgBot['on']('callback_query',async _0x36e5de=>{const _0x4c24df=_0x3c88f6,_0x7f240=_0x36e5de[_0x4c24df(0x1ea)],_0x10ca0=_0x36e5de[_0x4c24df(0x33e)];tgBot[_0x4c24df(0x397)](_0x36e5de['id'])[_0x4c24df(0x359)](async()=>{const _0x26d1bb=_0x4c24df;_0x7f240==_0x26d1bb(0x31b)&&(await tgBot[_0x26d1bb(0x32f)](_0x10ca0[_0x26d1bb(0x2b8)]['id'],_0x26d1bb(0x27a))['catch'](_0x3fb54c=>{telegramError(_0x3fb54c);}),updateBB(_0x26d1bb(0x346))),_0x7f240=='no'&&await tgBot[_0x26d1bb(0x32f)](_0x10ca0[_0x26d1bb(0x2b8)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x26d1bb(0x35c)](_0x3cbbe3=>{telegramError(_0x3cbbe3);});}),tgBot[_0x4c24df(0x3a6)](_0x4c24df(0x2f1));}));}),tgBot[_0x1b5340(0x252)](/\/toggle/,_0x43b272=>{const _0x584821=_0x1b5340;if(!validateTelegram(_0x43b272))return;tgBot[_0x584821(0x3a6)]('callback_query');const _0x2337d5=getBotsWithMode();if(_0x2337d5['length']==0x0)tgBot[_0x584821(0x32f)](_0x43b272[_0x584821(0x2b8)]['id'],_0x584821(0x33a))[_0x584821(0x35c)](_0x3fd1a3=>{telegramError(_0x3fd1a3);});else{let _0xc67e7a=[],_0x5224bf=[];const _0x59a27a=0x2;let _0x3c3a42=0x0;_0x2337d5[_0x584821(0x26d)]((_0x30a85b,_0x2b5ee1)=>{if(_0x2b5ee1%_0x59a27a==0x0)_0x5224bf=[];_0x5224bf['push']({'text':'Bot\x20'+_0x30a85b['botID']+'\x20('+_0x30a85b['mode']+')','callback_data':_0x30a85b['botID']}),_0x2b5ee1%_0x59a27a==0x0&&(_0xc67e7a[_0x3c3a42]=_0x5224bf,_0x3c3a42++);}),tgBot[_0x584821(0x32f)](_0x43b272[_0x584821(0x2b8)]['id'],_0x584821(0x2f6),{'reply_markup':{'inline_keyboard':_0xc67e7a}})[_0x584821(0x35c)](_0x34ec60=>{telegramError(_0x34ec60);}),tgBot['on'](_0x584821(0x2f1),async _0x4f603d=>{const _0x19c633=_0x584821,_0x1690f4=_0x4f603d[_0x19c633(0x1ea)],_0x1c6eb5=_0x4f603d['message'];tgBot[_0x19c633(0x397)](_0x4f603d['id'])[_0x19c633(0x359)](async()=>{const _0x3c053d=_0x19c633,_0x5d69f4=_0x2337d5['find'](_0x596338=>_0x596338[_0x3c053d(0x315)]==_0x1690f4),_0xef5ec9=_0x5d69f4['mode']==_0x3c053d(0x338)?_0x3c053d(0x382):_0x3c053d(0x338);tgBot[_0x3c053d(0x32f)](_0x1c6eb5[_0x3c053d(0x2b8)]['id'],_0x3c053d(0x25a)+_0x1690f4+_0x3c053d(0x301)+_0xef5ec9+'\x20mode')['catch'](_0xc739eb=>{telegramError(_0xc739eb);}),toggleBotMode(_0x1690f4);}),tgBot[_0x19c633(0x3a6)](_0x19c633(0x2f1));});}}),tgBot[_0x1b5340(0x252)](/\/names/,_0x215950=>{const _0x474b04=_0x1b5340;if(!validateTelegram(_0x215950))return;let _0x43d2be='';config['forEach'](_0x57e8ec=>{const _0x4746c3=_0x4a35;_0x43d2be+=_0x4746c3(0x24a)+_0x57e8ec[_0x4746c3(0x315)]+':\x20'+_0x57e8ec[_0x4746c3(0x314)]+'\x0a';}),tgBot['sendMessage'](_0x215950[_0x474b04(0x2b8)]['id'],_0x43d2be,{'parse_mode':_0x474b04(0x1f2)})[_0x474b04(0x35c)](_0x467cf7=>{telegramError(_0x467cf7);});}),tgBot['onText'](/\/disable/,_0x1929db=>{const _0x474216=_0x1b5340;if(!validateTelegram(_0x1929db))return;tgBot[_0x474216(0x32f)](_0x1929db['chat']['id'],_0x474216(0x2d5))[_0x474216(0x35c)](_0x12f459=>{telegramError(_0x12f459);}),updateSetting(_0x474216(0x3b0),![]);}),tgBot[_0x1b5340(0x252)](/\/help/,_0x555c7e=>{const _0x1c3e60=_0x1b5340;if(!validateTelegram(_0x555c7e))return;tgBot['sendMessage'](_0x555c7e['chat']['id'],_0x58b2df)[_0x1c3e60(0x35c)](_0x8f1502=>{telegramError(_0x8f1502);});}),tgBot['on']('polling_error',_0x2887ce=>{const _0x43bc23=_0x1b5340;_0x2887ce['toString']()[_0x43bc23(0x25f)](_0x43bc23(0x326))&&(logger[_0x43bc23(0x2da)]('Invalid\x20Telegram\x20token'),tgBot[_0x43bc23(0x311)](),tgBot=null,io['to']('botmanager')[_0x43bc23(0x352)]('notification','Invalid\x20Telegram\x20token'));}),process[_0x1b5340(0x34b)](_0x1b5340(0x336),()=>{const _0x555ffb=_0x1b5340;if(tgBot)tgBot[_0x555ffb(0x311)]();process[_0x555ffb(0x1cc)](0x1);}),process['once'](_0x1b5340(0x1fa),()=>{const _0xac300e=_0x1b5340;if(tgBot)tgBot['stopPolling']();process[_0xac300e(0x1cc)](0x1);});}}function disableTelegram(){const _0x503744=_0x7850e0;tgBot&&(tgBot[_0x503744(0x311)](),tgBot=null);}function sendTelegram(_0x4e4299,_0x47181e){const _0x4fd471=_0x7850e0;if(settings[_0x4fd471(0x3b0)]){if(settings[_0x4fd471(0x2de)]==_0x4fd471(0x32b)||(_0x47181e[_0x4fd471(0x30f)]==_0x4fd471(0x20d)||_0x47181e[_0x4fd471(0x30f)]=='warning'||_0x47181e['type']==_0x4fd471(0x2d3))&&settings[_0x4fd471(0x2de)]==_0x4fd471(0x2b4)||_0x47181e[_0x4fd471(0x30f)]==_0x4fd471(0x20e)&&settings[_0x4fd471(0x2de)]==_0x4fd471(0x333)){if(tgBot&&settings['telegramChatId']){if(_0x47181e[_0x4fd471(0x393)])tgBot[_0x4fd471(0x32f)](settings[_0x4fd471(0x30b)],_0x47181e[_0x4fd471(0x314)]+_0x4fd471(0x2b6)+_0x47181e['event'])['catch'](_0x41b9b7=>{telegramError(_0x41b9b7);});else tgBot[_0x4fd471(0x32f)](settings['telegramChatId'],_0x4fd471(0x24a)+_0x4e4299+_0x4fd471(0x2b6)+_0x47181e['event'])[_0x4fd471(0x35c)](_0x12f1cc=>{telegramError(_0x12f1cc);});}}}}async function sendTelegramMsg(_0x48561a,_0x54763e=_0x7850e0(0x1f2)){const _0x43430f=_0x7850e0;return settings[_0x43430f(0x3b0)]&&tgBot&&settings[_0x43430f(0x30b)]?(await tgBot[_0x43430f(0x32f)](settings[_0x43430f(0x30b)],_0x48561a,{'parse_mode':_0x54763e})['catch'](_0x59b0ea=>{telegramError(_0x59b0ea);}),!![]):![];}function getDeviceWithIp(_0x2e414a){return devices['find'](_0x3eefc0=>_0x3eefc0['ip']===_0x2e414a);}function temporaryAccess2FA(_0xfd028d,_0xd649bd){const _0x3a2484=_0x7850e0;let _0x1fa984=new Date(),_0xf31526=![];if(lastIpApproval){if(_0x1fa984-lastIpApproval<0x1388)_0xf31526=!![];}lastIpApproval=new Date();if(_0xf31526)return;tgBot&&settings[_0x3a2484(0x30b)]&&(tgBot[_0x3a2484(0x3a6)](_0x3a2484(0x2f1)),tgBot[_0x3a2484(0x32f)](settings[_0x3a2484(0x30b)],_0x3a2484(0x3a4)+normalizeIP(_0xd649bd)[_0x3a2484(0x292)]+_0x3a2484(0x204),{'parse_mode':_0x3a2484(0x1f2),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x3a2484(0x2ed),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x3a2484(0x360),'callback_data':_0x3a2484(0x360)}]]}})['catch'](_0x44a82a=>{telegramError(_0x44a82a);}),tgBot['on'](_0x3a2484(0x2f1),async _0x29f1db=>{const _0x43c6be=_0x3a2484,_0x4b88de=_0x29f1db[_0x43c6be(0x1ea)],_0x1ac09a=_0x29f1db[_0x43c6be(0x33e)];tgBot['answerCallbackQuery'](_0x29f1db['id'])[_0x43c6be(0x359)](async()=>{const _0x12788f=_0x43c6be;devices[_0xfd028d]['telegramIpApproval']={'clientip':_0xd649bd,'timestamp':new Date()[_0x12788f(0x23f)](),'expiry':_0x4b88de},_0x4b88de!=_0x12788f(0x360)?(await tgBot[_0x12788f(0x32f)](_0x1ac09a['chat']['id'],_0x12788f(0x291)+_0x4b88de+_0x12788f(0x1fd),{'parse_mode':_0x12788f(0x1f2)})[_0x12788f(0x35c)](_0x2dae2b=>{telegramError(_0x2dae2b);}),io['to'](_0xfd028d)[_0x12788f(0x352)](_0x12788f(0x2cb),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x1ac09a[_0x12788f(0x2b8)]['id'],_0x12788f(0x224))['catch'](_0x199451=>{telegramError(_0x199451);}),io['to'](_0xfd028d)[_0x12788f(0x352)](_0x12788f(0x2cb),{'access':{'allow':![],'reason':_0x12788f(0x2a9),'token':null}}));}),tgBot[_0x43c6be(0x3a6)]('callback_query');}));}function loginAccess2FA(_0x5640b5,_0x5f562a){const _0x52582e=_0x7850e0;tgBot&&settings[_0x52582e(0x30b)]&&(tgBot[_0x52582e(0x3a6)](_0x52582e(0x2f1)),tgBot[_0x52582e(0x32f)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5f562a)[_0x52582e(0x292)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x52582e(0x32d),'callback_data':loginExpiry},{'text':_0x52582e(0x360),'callback_data':'reject'}]]}})[_0x52582e(0x35c)](_0x1b80b4=>{telegramError(_0x1b80b4);}),tgBot['on'](_0x52582e(0x2f1),async _0x186b76=>{const _0x38be62=_0x52582e,_0x1b413d=_0x186b76[_0x38be62(0x1ea)],_0x4510ba=_0x186b76['message'];tgBot[_0x38be62(0x397)](_0x186b76['id'])[_0x38be62(0x359)](async()=>{const _0x11edfe=_0x38be62;devices[_0x5640b5][_0x11edfe(0x312)]={'clientip':_0x5f562a,'timestamp':new Date()[_0x11edfe(0x23f)](),'expiry':_0x1b413d},_0x1b413d!=_0x11edfe(0x360)?(await tgBot[_0x11edfe(0x32f)](_0x4510ba[_0x11edfe(0x2b8)]['id'],_0x11edfe(0x2d8),{'parse_mode':'HTML'})[_0x11edfe(0x35c)](_0x38e482=>{telegramError(_0x38e482);}),io['to'](_0x5640b5)['emit'](_0x11edfe(0x2cb),{'access':{'allow':![],'reason':_0x11edfe(0x1ee),'token':null}})):(await tgBot[_0x11edfe(0x32f)](_0x4510ba['chat']['id'],'Login\x20rejected')[_0x11edfe(0x35c)](_0x3b275b=>{telegramError(_0x3b275b);}),io['to'](_0x5640b5)[_0x11edfe(0x352)](_0x11edfe(0x2cb),{'access':{'allow':![],'reason':_0x11edfe(0x23c),'token':null}}));}),tgBot[_0x38be62(0x3a6)](_0x38be62(0x2f1));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5c1b3e=_0x7850e0;return dbConfig[_0x5c1b3e(0x30a)]('bots')['sortBy'](_0x5c1b3e(0x315))[_0x5c1b3e(0x26c)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x1d51f7=_0x7850e0;return dbConfig[_0x1d51f7(0x30a)](_0x1d51f7(0x1fc))[_0x1d51f7(0x27d)](_0x1d51f7(0x315))[_0x1d51f7(0x26c)]({'status':_0x1d51f7(0x31a)})[_0x1d51f7(0x2d1)]()||[];}function getBotAttributes(_0x3503d3){const _0x1fb4d7=_0x7850e0;let _0x2e841e={};const _0x194ddd=configpath+'bot-'+_0x3503d3+_0x1fb4d7(0x335),_0x185e61=fs[_0x1fb4d7(0x27b)](_0x194ddd);if(_0x185e61){const _0x193c1e=fs[_0x1fb4d7(0x395)](_0x194ddd);try{const _0x24bee1=JSON[_0x1fb4d7(0x230)](_0x193c1e),_0x35771e=_0x24bee1?_0x24bee1[_0x1fb4d7(0x2d9)][0x0]['headless']:![];_0x2e841e[_0x1fb4d7(0x34a)]=_0x35771e?'auto':_0x1fb4d7(0x382),_0x2e841e[_0x1fb4d7(0x314)]=_0x24bee1?_0x24bee1[_0x1fb4d7(0x2d9)][0x0][_0x1fb4d7(0x314)]:_0x1fb4d7(0x24a)+_0x3503d3;}catch(_0x365846){_0x2e841e[_0x1fb4d7(0x34a)]=_0x1fb4d7(0x382),_0x2e841e[_0x1fb4d7(0x314)]=_0x1fb4d7(0x24a)+_0x3503d3;}}else _0x2e841e[_0x1fb4d7(0x34a)]=_0x1fb4d7(0x382),_0x2e841e[_0x1fb4d7(0x314)]=_0x1fb4d7(0x24a)+_0x3503d3;return _0x2e841e;}function getBotsWithMode(){const _0xa99ac8=_0x7850e0,_0x3abd97=dbConfig[_0xa99ac8(0x30a)]('bots')[_0xa99ac8(0x27d)](_0xa99ac8(0x315))[_0xa99ac8(0x2d1)]()||[];return _0x3abd97[_0xa99ac8(0x26d)](_0x58911c=>{const _0x12f139=_0xa99ac8;let _0x1c440d=getBotAttributes(_0x58911c[_0x12f139(0x315)]);_0x58911c[_0x12f139(0x34a)]=_0x1c440d[_0x12f139(0x34a)];}),_0x3abd97;}function getBotExchanges(){const _0x35f6d3=_0x7850e0;let _0x5ca871=[];const _0x5699ab=dbConfig[_0x35f6d3(0x30a)](_0x35f6d3(0x1fc))[_0x35f6d3(0x27d)](_0x35f6d3(0x315))['value']()||[];_0x5699ab[_0x35f6d3(0x26d)](_0x47e8d5=>{const _0x2ee69e=_0x35f6d3;if(_0x47e8d5[_0x2ee69e(0x2cb)]==_0x2ee69e(0x3a5)){const _0x346521=configpath+'bot-'+_0x47e8d5['botID']+'-config.json',_0x348f32=fs[_0x2ee69e(0x27b)](_0x346521);let _0x28215a;if(_0x348f32){const _0x1d84a5=fs['readFileSync'](_0x346521);try{const _0xdc28be=JSON[_0x2ee69e(0x230)](_0x1d84a5);_0x28215a=_0xdc28be?_0xdc28be[_0x2ee69e(0x2d9)][0x0][_0x2ee69e(0x2e3)]:null;}catch(_0x207930){}}if(_0x28215a)_0x5ca871['push'](_0x28215a);}});const _0x50b2cf=[...new Set(_0x5ca871)][_0x35f6d3(0x3b5)]();return _0x50b2cf;}async function initUser(){const _0x2333c4=_0x7850e0;if(!settings[_0x2333c4(0x29c)]){const _0x5ec451=uuidRandom();mixpanel[_0x2333c4(0x246)](_0x5ec451),updateSetting(_0x2333c4(0x29c),_0x5ec451);}}function _0x4a35(_0x3d28f7,_0x58b1e1){const _0x4e79ad=_0x18e5();return _0x4a35=function(_0x3c3de7,_0x13a1e7){_0x3c3de7=_0x3c3de7-0x1ca;let _0x18e5f8=_0x4e79ad[_0x3c3de7];return _0x18e5f8;},_0x4a35(_0x3d28f7,_0x58b1e1);}async function initSecure(){const _0x36a61f=_0x7850e0;let _0x403ac1=getSecure();if(!_0x403ac1[_0x36a61f(0x1d6)](_0x36a61f(0x30c))){let _0x1b7832=await generateKeys();_0x403ac1[_0x36a61f(0x2a6)]=_0x1b7832[_0x36a61f(0x2a6)],_0x403ac1[_0x36a61f(0x3b2)]=_0x1b7832['privateKey'],_0x403ac1['secret']=crypto[_0x36a61f(0x244)](0x20)['toString'](_0x36a61f(0x278));;storeSecure(_0x403ac1);}}function getSettings(){const _0x201b81=_0x7850e0;return dbSettings[_0x201b81(0x30a)](_0x201b81(0x201))[_0x201b81(0x2d1)]()||{};}function getSecure(){const _0x32a6b8=_0x7850e0;return dbSecure[_0x32a6b8(0x30a)](_0x32a6b8(0x20b))[_0x32a6b8(0x2d1)]()||{};}function getBlacklist(){const _0x428c08=_0x7850e0;return dbSecure[_0x428c08(0x30a)](_0x428c08(0x2f0))['value']()||[];}function broadcastToBots(_0x3d0dbb,_0x97ce9f){const _0x505ec0=_0x7850e0;config[_0x505ec0(0x26d)](_0x11930c=>{const _0x1d4c0c=_0x505ec0;if(_0x11930c[_0x1d4c0c(0x2cb)]==_0x1d4c0c(0x3a5)&&_0x11930c[_0x1d4c0c(0x379)]==_0x1d4c0c(0x345)||_0x11930c[_0x1d4c0c(0x2cb)]==_0x1d4c0c(0x2ec)&&_0x11930c[_0x1d4c0c(0x379)]=='running'){if(pid[_0x11930c[_0x1d4c0c(0x315)]])pid[_0x11930c[_0x1d4c0c(0x315)]][_0x1d4c0c(0x251)]({[_0x3d0dbb]:_0x97ce9f});}});}function storeSettings(_0x558ff7,_0x173035=![]){const _0x2b28c0=_0x7850e0;_0x558ff7={...settings,..._0x558ff7};if(_0x173035&&_0x558ff7[_0x2b28c0(0x3a3)]!='************'&&_0x558ff7[_0x2b28c0(0x3a3)]!=_0x2b28c0(0x250)&&_0x558ff7['bbPassword']!=''){const _0x45a2ea=crypt[_0x2b28c0(0x269)](secure[_0x2b28c0(0x3b2)],_0x558ff7[_0x2b28c0(0x3a3)])['message'][_0x2b28c0(0x321)]('@')[0x0],_0x2c6835=bcrypt[_0x2b28c0(0x21c)](_0x45a2ea,saltRounds);_0x558ff7={..._0x558ff7,'bbPassword':_0x2c6835};}if(_0x173035&&_0x558ff7['telegramToken']!=_0x2b28c0(0x3a7)&&_0x558ff7['telegramToken']!='***'&&_0x558ff7[_0x2b28c0(0x22c)]!=''){const _0x321f61=crypt[_0x2b28c0(0x269)](secure[_0x2b28c0(0x3b2)],_0x558ff7[_0x2b28c0(0x22c)])[_0x2b28c0(0x33e)]['split']('@')[0x0];_0x558ff7={..._0x558ff7,'telegramToken':_0x321f61};}const _0x19b759=_0x558ff7['telegramToken']!=_0x2b28c0(0x3a7)&&_0x558ff7['telegramToken']!=settings[_0x2b28c0(0x22c)]||_0x558ff7['telegramUsername']!=settings['telegramUsername'],_0x434f5f=_0x558ff7['telegramToken']==''||_0x558ff7[_0x2b28c0(0x357)]=='';if(_0x19b759)_0x558ff7['telegramEvents']=_0x2b28c0(0x32b);for(const [_0x5d04c2,_0x504fd3]of Object[_0x2b28c0(0x299)](_0x558ff7)){if(_0x5d04c2==_0x2b28c0(0x22c)&&_0x504fd3==_0x2b28c0(0x3a7)){_0x558ff7[_0x2b28c0(0x22c)]=settings[_0x2b28c0(0x22c)];continue;};if(_0x5d04c2=='bbPassword'&&_0x504fd3==_0x2b28c0(0x3a7)){_0x558ff7[_0x2b28c0(0x3a3)]=settings['bbPassword'];continue;};dbSettings[_0x2b28c0(0x236)]('settings.'+_0x5d04c2,_0x504fd3)[_0x2b28c0(0x38e)]();}settings=_0x558ff7,io['to'](_0x2b28c0(0x293))[_0x2b28c0(0x352)](_0x2b28c0(0x201),cleanSettings()),broadcastToBots(_0x2b28c0(0x1eb),settings[_0x2b28c0(0x1eb)]),broadcastToBots(_0x2b28c0(0x2fd),settings[_0x2b28c0(0x2fd)]);if(_0x19b759&&!_0x434f5f)initTelegram();if(_0x19b759&&_0x434f5f)disableTelegram();getAllClients()[_0x2b28c0(0x26d)](_0x47f302=>{const _0x2e96f7=_0x2b28c0;getSocket(_0x47f302['id'])[_0x2e96f7(0x352)](_0x2e96f7(0x2cb),{'access':{'allow':![],'reason':_0x2e96f7(0x1ee),'token':null}});});}function updateSetting(_0x25633a,_0x2a3a8f){const _0x2da712=_0x7850e0;dbSettings[_0x2da712(0x236)](_0x2da712(0x325)+_0x25633a,_0x2a3a8f)[_0x2da712(0x38e)](),settings=getSettings(),io['to']('botmanager')[_0x2da712(0x352)](_0x2da712(0x201),cleanSettings());}function storeSecure(_0x4f8e8d){const _0x162a14=_0x7850e0;dbSecure[_0x162a14(0x30a)](_0x162a14(0x20b))[_0x162a14(0x389)](_0x4f8e8d)[_0x162a14(0x38e)](),secure=_0x4f8e8d;}function addBlacklist(_0x359fbc){const _0x35eca3=_0x7850e0;cleanBlacklist();let _0x30f6f0;devices[_0x359fbc]['telegramIpApproval']?_0x30f6f0=Math[_0x35eca3(0x1d7)](devices[_0x359fbc]['telegramIpApproval'][_0x35eca3(0x1db)],loginExpiry):_0x30f6f0=loginExpiry,dbSecure['get']('blacklist')['push']({'expiry':new Date()[_0x35eca3(0x23f)]()+_0x30f6f0*0x3c*0x3e8,'token':devices[_0x359fbc][_0x35eca3(0x1ed)]['token']})[_0x35eca3(0x38e)](),blacklist=dbSecure[_0x35eca3(0x30a)](_0x35eca3(0x2f0))[_0x35eca3(0x2d1)]();}function cleanBlacklist(){const _0x36f5f4=_0x7850e0;let _0x5e132d=dbSecure[_0x36f5f4(0x30a)](_0x36f5f4(0x2f0))[_0x36f5f4(0x2af)]()['value'](),_0x232863=new Date()[_0x36f5f4(0x23f)]();_0x5e132d[_0x36f5f4(0x26d)](_0x3d677e=>{const _0x3e9c26=_0x36f5f4;_0x3d677e[_0x3e9c26(0x1db)]<_0x232863&&dbSecure[_0x3e9c26(0x30a)](_0x3e9c26(0x2f0))[_0x3e9c26(0x340)]({'expiry':_0x3d677e[_0x3e9c26(0x1db)]})['write']();});}function initStates(){const _0x242977=_0x7850e0;let _0x2e5779=getConfiguration();_0x2e5779[_0x242977(0x26d)](_0x46ebc2=>{const _0x5d12e6=_0x242977;_0x46ebc2['live']=_0x5d12e6(0x3ad);}),storeConfiguration(_0x2e5779);}function onKeys(){const _0x1ac102=new RSA();return new Promise(_0x16defa=>{const _0x41a7dc=_0x4a35;_0x1ac102[_0x41a7dc(0x243)]()[_0x41a7dc(0x359)](_0x2b7d19=>{_0x16defa(_0x2b7d19);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x48734e=_0x7850e0;let _0x21a29a=getSettings(),_0x4a7f4e=![];!_0x21a29a[_0x48734e(0x1d6)](_0x48734e(0x233))&&(_0x21a29a[_0x48734e(0x233)]=0x0,_0x4a7f4e=!![]);!_0x21a29a[_0x48734e(0x1d6)](_0x48734e(0x1dd))&&(_0x21a29a[_0x48734e(0x1dd)]=0x0,_0x4a7f4e=!![]);!_0x21a29a[_0x48734e(0x1d6)](_0x48734e(0x2d4))&&(_0x21a29a['latestversion']=_0x48734e(0x226),_0x4a7f4e=!![]);!_0x21a29a['hasOwnProperty'](_0x48734e(0x2fd))&&(_0x21a29a[_0x48734e(0x2fd)]=![],_0x4a7f4e=!![]);if(_0x4a7f4e)storeSettings(_0x21a29a);try{fs[_0x48734e(0x37b)](configbackuppath,{'withFileTypes':!![]})[_0x48734e(0x26d)](_0x500457=>{const _0x4495a2=_0x48734e;if(!_0x500457[_0x4495a2(0x287)]()){if(!_0x500457[_0x4495a2(0x37a)][_0x4495a2(0x27c)](_0x4495a2(0x2bb)))fs['unlinkSync'](configbackuppath+_0x500457['name']);}else fs[_0x4495a2(0x1f5)](configbackuppath+_0x500457[_0x4495a2(0x37a)],{'recursive':!![]});});}catch(_0x34d560){logger[_0x48734e(0x369)](_0x48734e(0x1e3),_0x34d560);}}function storeConfiguration(_0x405df4){const _0x19f6d3=_0x7850e0;dbConfig[_0x19f6d3(0x30a)](_0x19f6d3(0x1fc))['remove']()[_0x19f6d3(0x38e)](),_0x405df4['forEach'](_0x1568be=>{const _0x3034ee=_0x19f6d3;delete _0x1568be[_0x3034ee(0x34a)];}),dbConfig[_0x19f6d3(0x30a)]('bots')[_0x19f6d3(0x389)](..._0x405df4)[_0x19f6d3(0x38e)](),config=_0x405df4;}function resetPassword(){const _0x586e0d=_0x7850e0;tgBot&&settings[_0x586e0d(0x30b)]&&(tgBot['removeListener'](_0x586e0d(0x2f1)),tgBot[_0x586e0d(0x32f)](settings[_0x586e0d(0x30b)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x586e0d(0x1f2),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x586e0d(0x35c)](_0x2345a6=>{telegramError(_0x2345a6);}),tgBot['on'](_0x586e0d(0x2f1),async _0x353a47=>{const _0x416911=_0x586e0d,_0x533f23=_0x353a47[_0x416911(0x1ea)],_0x272106=_0x353a47[_0x416911(0x33e)];tgBot[_0x416911(0x397)](_0x353a47['id'])['then'](async()=>{const _0x5c0de5=_0x416911;if(_0x533f23!='no'){const _0x3a96c3=0xf,_0x894fe1=_0x5c0de5(0x247),_0x11e473=Array[_0x5c0de5(0x3b8)](crypto[_0x5c0de5(0x316)](new Uint32Array(_0x3a96c3)))[_0x5c0de5(0x203)](_0x12f85a=>_0x894fe1[_0x12f85a%_0x894fe1[_0x5c0de5(0x2a7)]])[_0x5c0de5(0x1f7)](''),_0x1aaf96=bcrypt[_0x5c0de5(0x21c)](_0x11e473,saltRounds);storeSettings({'bbPassword':_0x1aaf96}),await tgBot[_0x5c0de5(0x32f)](_0x272106[_0x5c0de5(0x2b8)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x11e473,{'parse_mode':_0x5c0de5(0x1f2)})[_0x5c0de5(0x35c)](_0x1df08b=>{telegramError(_0x1df08b);});}else await tgBot[_0x5c0de5(0x32f)](_0x272106[_0x5c0de5(0x2b8)]['id'],'Password\x20reset\x20rejected')['catch'](_0x51f40a=>{telegramError(_0x51f40a);});}),tgBot[_0x416911(0x3a6)]('callback_query');}));}async function confirmRestore(_0x3accdd,_0x257e49){const _0x43205a=_0x7850e0;io['to'](_0x43205a(0x293))['emit'](_0x43205a(0x36a),_0x43205a(0x364),'success'),tgBot&&settings['telegramChatId']&&(tgBot[_0x43205a(0x3a6)](_0x43205a(0x2f1)),await tgBot[_0x43205a(0x32f)](settings['telegramChatId'],_0x43205a(0x225),{'parse_mode':_0x43205a(0x1f2),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x43205a(0x35c)](_0x480ad2=>{telegramError(_0x480ad2);}),tgBot['on']('callback_query',async _0x3c4ab4=>{const _0x6ee0c8=_0x43205a,_0x27e8da=_0x3c4ab4['data'],_0x428dc1=_0x3c4ab4['message'];tgBot['answerCallbackQuery'](_0x3c4ab4['id'])[_0x6ee0c8(0x359)](async()=>{const _0x390ed4=_0x6ee0c8;_0x27e8da=='yes'?(await tgBot[_0x390ed4(0x32f)](_0x428dc1[_0x390ed4(0x2b8)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x390ed4(0x1f2)})[_0x390ed4(0x35c)](_0x1c25e2=>{telegramError(_0x1c25e2);}),unzipFile(_0x3accdd,_0x257e49)):(logger['debug'](_0x390ed4(0x1f8)),await tgBot['sendMessage'](_0x428dc1[_0x390ed4(0x2b8)]['id'],_0x390ed4(0x1f8))[_0x390ed4(0x35c)](_0x2ade46=>{telegramError(_0x2ade46);}));}),tgBot[_0x6ee0c8(0x3a6)]('callback_query');}));}function getServerTime(){const _0x1cab0f=_0x7850e0,_0x32bf1e=new Date();return _0x32bf1e['getFullYear']()+'/'+(_0x32bf1e[_0x1cab0f(0x3b9)]()+0x1)[_0x1cab0f(0x279)]()['padStart'](0x2,'0')+'/'+_0x32bf1e[_0x1cab0f(0x2ef)]()[_0x1cab0f(0x279)]()[_0x1cab0f(0x331)](0x2,'0')+'\x20'+_0x32bf1e['getHours']()[_0x1cab0f(0x279)]()[_0x1cab0f(0x331)](0x2,'0')+':'+_0x32bf1e[_0x1cab0f(0x2d6)]()[_0x1cab0f(0x279)]()['padStart'](0x2,'0')+':'+_0x32bf1e[_0x1cab0f(0x2c3)]()[_0x1cab0f(0x279)]()[_0x1cab0f(0x331)](0x2,'0');}function getTimeStamp(){const _0x4e2431=_0x7850e0,_0x42cc86=shiftedTime();return _0x42cc86[_0x4e2431(0x22b)]()+'/'+(_0x42cc86[_0x4e2431(0x3b9)]()+0x1)['toString']()[_0x4e2431(0x331)](0x2,'0')+'/'+_0x42cc86[_0x4e2431(0x2ef)]()[_0x4e2431(0x279)]()[_0x4e2431(0x331)](0x2,'0')+'\x20'+_0x42cc86[_0x4e2431(0x317)]()[_0x4e2431(0x279)]()['padStart'](0x2,'0')+':'+_0x42cc86[_0x4e2431(0x2d6)]()[_0x4e2431(0x279)]()[_0x4e2431(0x331)](0x2,'0')+':'+_0x42cc86[_0x4e2431(0x2c3)]()[_0x4e2431(0x279)]()[_0x4e2431(0x331)](0x2,'0');}function getCleanTimeStamp(){const _0x4270f4=_0x7850e0,_0x3360b0=shiftedTime();return _0x3360b0[_0x4270f4(0x22b)]()+(_0x3360b0[_0x4270f4(0x3b9)]()+0x1)['toString']()[_0x4270f4(0x331)](0x2,'0')+_0x3360b0[_0x4270f4(0x2ef)]()[_0x4270f4(0x279)]()[_0x4270f4(0x331)](0x2,'0')+'-'+_0x3360b0[_0x4270f4(0x317)]()[_0x4270f4(0x279)]()[_0x4270f4(0x331)](0x2,'0')+_0x3360b0[_0x4270f4(0x2d6)]()[_0x4270f4(0x279)]()['padStart'](0x2,'0')+_0x3360b0[_0x4270f4(0x2c3)]()[_0x4270f4(0x279)]()[_0x4270f4(0x331)](0x2,'0');}function shiftedTime(){const _0x53305c=_0x7850e0,_0x51cb61=new Date();let _0xf7eb0e=_0x51cb61;if(settings[_0x53305c(0x1eb)]&&settings[_0x53305c(0x1eb)]!==0x0)_0xf7eb0e=fns['add'](_0x51cb61,{'hours':settings[_0x53305c(0x1eb)]});return _0xf7eb0e;}function startScheduler(){const _0x7210f1=_0x7850e0,_0xfde94=new Date()[_0x7210f1(0x22a)](),_0x1be25d=shiftedTime()[_0x7210f1(0x317)]();_0x1be25d==0x4&&backupConfigFiles();_0x1be25d==0x0&&rotateLogFiles();_0xfde94%0x6==0x0&&triggerAnalytics();_0xfde94%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x241b49){const _0xca13bb=_0x7850e0;logger[_0xca13bb(0x369)](_0xca13bb(0x31f)+_0x241b49);const _0x53257b=getBotsWithMode();_0x53257b['length']>0x0?confirmRestore(configbackuppath,_0x241b49):unzipFile(configbackuppath,_0x241b49);}async function getBackupFiles(_0x4da6ee=null){const _0x3e3665=_0x7850e0;let _0x49d442=[],_0x193b4d=fs[_0x3e3665(0x37b)](configbackuppath,{'withFileTypes':!![]});_0x193b4d[_0x3e3665(0x3b5)]((_0x446466,_0x5e75ab)=>_0x446466[_0x3e3665(0x37a)]<_0x5e75ab['name']?0x1:_0x5e75ab[_0x3e3665(0x37a)]<_0x446466[_0x3e3665(0x37a)]?-0x1:0x0),_0x193b4d['forEach'](_0x589bd2=>{const _0x4029d5=_0x3e3665;if(!_0x589bd2[_0x4029d5(0x287)]()&&_0x589bd2[_0x4029d5(0x37a)][_0x4029d5(0x27c)](_0x4029d5(0x2bb))&&_0x589bd2['name'][_0x4029d5(0x284)](_0x4029d5(0x37c))){const _0x37b082=formatDate(fs[_0x4029d5(0x2f2)](configbackuppath+_0x589bd2[_0x4029d5(0x37a)])[_0x4029d5(0x3ac)]);_0x49d442[_0x4029d5(0x389)]({'name':_0x589bd2[_0x4029d5(0x37a)],'mtime':_0x37b082});}});if(_0x4da6ee)io['to'](_0x4da6ee)[_0x3e3665(0x352)](_0x3e3665(0x206),_0x49d442);else return _0x49d442;}async function backupConfigFiles(){const _0x474f43=_0x7850e0;await zipFiles(_0x474f43(0x2a2));const _0x52818d=getCleanTimeStamp();fs[_0x474f43(0x202)](zippath+_0x474f43(0x371),configbackuppath+(_0x474f43(0x2bb)+_0x52818d+_0x474f43(0x37c)));let _0x178a89=fs[_0x474f43(0x37b)](configbackuppath,{'withFileTypes':!![]});_0x178a89[_0x474f43(0x3b5)]((_0x2be7f5,_0x4a5461)=>_0x2be7f5['name']<_0x4a5461[_0x474f43(0x37a)]?0x1:_0x4a5461[_0x474f43(0x37a)]<_0x2be7f5[_0x474f43(0x37a)]?-0x1:0x0),_0x178a89[_0x474f43(0x2a7)]>maxBackups&&fs[_0x474f43(0x2fb)](configbackuppath+_0x178a89[_0x178a89[_0x474f43(0x2a7)]-0x1][_0x474f43(0x37a)]);}function rotateLogFiles(){const _0x307cb6=_0x7850e0,_0x2ad5b2=fs[_0x307cb6(0x2f2)](logspath+_0x307cb6(0x39e)),_0x3b58d6=_0x2ad5b2[_0x307cb6(0x375)]/0x400;if(_0x3b58d6>0x64){let _0x136585=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x136585[_0x307cb6(0x3b5)]((_0xdcd5b4,_0x3ea7c0)=>_0xdcd5b4[_0x307cb6(0x37a)]<_0x3ea7c0['name']?0x1:_0x3ea7c0['name']<_0xdcd5b4[_0x307cb6(0x37a)]?-0x1:0x0),_0x136585[_0x307cb6(0x26d)](_0x42c709=>{const _0x498835=_0x307cb6;if(_0x42c709[_0x498835(0x37a)]==_0x498835(0x2e1))fs['copyFileSync'](logspath+_0x42c709[_0x498835(0x37a)],logspath+_0x498835(0x390));if(_0x42c709[_0x498835(0x37a)]==_0x498835(0x34d))fs[_0x498835(0x202)](logspath+_0x42c709[_0x498835(0x37a)],logspath+_0x498835(0x2e1));_0x42c709[_0x498835(0x37a)]==_0x498835(0x39e)&&(fs[_0x498835(0x202)](logspath+_0x42c709[_0x498835(0x37a)],logspath+_0x498835(0x34d)),fs[_0x498835(0x26f)](logspath+_0x42c709['name'],''));});}}async function zipFiles(_0x1a2356){const _0x396034=_0x7850e0;let _0x2b1029;if(_0x1a2356==_0x396034(0x2c8))_0x2b1029=logspath;if(_0x1a2356==_0x396034(0x31c))_0x2b1029=configpath;if(_0x1a2356==_0x396034(0x2a2))_0x2b1029=configpath;let _0x5aafb3=fs[_0x396034(0x37b)](_0x2b1029,{'withFileTypes':!![]});const _0x45353c=new require(_0x396034(0x2db))();_0x5aafb3[_0x396034(0x26d)](_0x52cf55=>{const _0x5b2d5c=_0x396034;if(!_0x52cf55[_0x5b2d5c(0x287)]()){let _0x2672c5=fs[_0x5b2d5c(0x395)](_0x2b1029+_0x52cf55[_0x5b2d5c(0x37a)]);if(_0x1a2356=='backup'){const _0x1c151f=/^bot-[0-9]{3}-config.json$/,_0x57410a=_0x1c151f[_0x5b2d5c(0x35b)](_0x52cf55[_0x5b2d5c(0x37a)]);if(_0x57410a){const _0x40da22=JSON[_0x5b2d5c(0x230)](_0x2672c5);if(_0x40da22[_0x5b2d5c(0x2d9)][0x0]){_0x40da22[_0x5b2d5c(0x2d9)][0x0][_0x5b2d5c(0x33b)]=_0x5b2d5c(0x250),_0x40da22[_0x5b2d5c(0x2d9)][0x0][_0x5b2d5c(0x2cf)]='***';if(_0x40da22['bot'][0x0][_0x5b2d5c(0x2c5)])_0x40da22[_0x5b2d5c(0x2d9)][0x0][_0x5b2d5c(0x2c5)]='***';}_0x2672c5=JSON['stringify'](_0x40da22,null,0x2);}if(_0x52cf55[_0x5b2d5c(0x37a)]==_0x5b2d5c(0x214)){const _0x2d5c46=JSON[_0x5b2d5c(0x230)](_0x2672c5);if(_0x2d5c46['settings'][_0x5b2d5c(0x28f)])_0x2d5c46[_0x5b2d5c(0x201)]['loginRequired']=![];if(_0x2d5c46[_0x5b2d5c(0x201)]['bbPassword'])_0x2d5c46[_0x5b2d5c(0x201)][_0x5b2d5c(0x3a3)]=_0x5b2d5c(0x250);if(_0x2d5c46['settings']['telegramToken'])_0x2d5c46[_0x5b2d5c(0x201)][_0x5b2d5c(0x22c)]=_0x5b2d5c(0x250);if(_0x2d5c46[_0x5b2d5c(0x201)]['telegramChatId'])_0x2d5c46[_0x5b2d5c(0x201)][_0x5b2d5c(0x30b)]=null;_0x2672c5=JSON['stringify'](_0x2d5c46,null,0x2);}if(_0x52cf55[_0x5b2d5c(0x37a)]!=_0x5b2d5c(0x319))_0x45353c[_0x5b2d5c(0x330)](_0x52cf55['name'],_0x2672c5);}else _0x45353c['file'](_0x52cf55['name'],_0x2672c5);}});const _0x4bd932=_0x45353c[_0x396034(0x234)]({'base64':![],'compression':_0x396034(0x1d3)});fs[_0x396034(0x26f)](zippath+(_0x1a2356+'.zip'),_0x4bd932,_0x396034(0x38f));}async function unzipFile(_0x5cf480,_0x166618){const _0x66787d=_0x7850e0;fs[_0x66787d(0x37b)](configpath,{'withFileTypes':!![]})[_0x66787d(0x26d)](_0x4ad927=>{const _0x28d69c=_0x66787d;if(!_0x4ad927[_0x28d69c(0x287)]())fs['rmSync'](configpath+_0x4ad927[_0x28d69c(0x37a)]);});const _0x449295=fs[_0x66787d(0x395)](_0x5cf480+_0x166618,_0x66787d(0x38f)),_0x3db255=new require(_0x66787d(0x2db))(_0x449295,{'base64':![],'checkCRC32':!![]});Object[_0x66787d(0x213)](_0x3db255['files'])[_0x66787d(0x26d)](_0x3718e1=>{const _0x320476=_0x66787d,_0x4d735e=_0x3db255[_0x320476(0x305)][_0x3718e1];fs[_0x320476(0x26f)](configpath+_0x4d735e['name'],_0x4d735e[_0x320476(0x1e7)]);}),fs[_0x66787d(0x37b)](temppath,{'withFileTypes':!![]})[_0x66787d(0x26d)](_0x20a8a6=>{const _0x215fd0=_0x66787d;if(!_0x20a8a6[_0x215fd0(0x287)]())fs[_0x215fd0(0x1f5)](temppath+_0x20a8a6[_0x215fd0(0x37a)]);}),logger[_0x66787d(0x369)](_0x66787d(0x2b2)),process[_0x66787d(0x251)]({'restore':!![]},_0x41e4a5=>{});}async function getPublicIp(){const _0xe1d12e=_0x7850e0;try{const _0x177af6=await axios['get'](_0xe1d12e(0x210));publicip=_0x177af6[_0xe1d12e(0x1ea)]['ip'];}catch(_0x53ae68){}}async function triggerAnalytics(){const _0x3b222f=_0x7850e0;if(!publicip)await getPublicIp();const _0x7dbcb0=getBotsWithMode();let _0x4e9653=0x0;_0x7dbcb0[_0x3b222f(0x26d)](_0x32c65c=>{const _0x456319=_0x3b222f;if(_0x32c65c[_0x456319(0x2cb)]===_0x456319(0x3a5))_0x4e9653++;});const _0x266e7e=getBotExchanges();mixpanel[_0x3b222f(0x2d2)](_0x3b222f(0x2a3),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x7dbcb0[_0x3b222f(0x2a7)],'numbotsenabled':_0x4e9653,'exchanges':_0x266e7e});}async function getMessages(){const _0x184aaf=_0x7850e0,_0x167c16='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x54e491=new GraphQLClient(_0x167c16),_0x158c2b={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x2f9cf7=serverversion[_0x184aaf(0x321)]('.'),_0x4a3a0c=_0x2f9cf7[0x0]+'.'+_0x2f9cf7[0x1],_0x2b7b7b=Math[_0x184aaf(0x280)](settings[_0x184aaf(0x233)],settings['lastmsgemitted']),_0x22d8f9={'last':parseInt(_0x2b7b7b),'bbm':_0x4a3a0c},_0x4a5ae3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3563d0;try{_0x3563d0=await _0x54e491[_0x184aaf(0x241)](_0x4a5ae3,_0x22d8f9,_0x158c2b);}catch(_0x58b1d2){}if(_0x3563d0&&_0x3563d0[_0x184aaf(0x2b9)]){let _0x2f3aa0=settings[_0x184aaf(0x233)];newMessages=[];for(const _0x4275ec of _0x3563d0['messages']){newMessages[_0x184aaf(0x389)](_0x4275ec);if(_0x4275ec[_0x184aaf(0x24e)])updateSetting(_0x184aaf(0x2d4),_0x4275ec[_0x184aaf(0x24e)]);let _0x2999f1=_0x4275ec[_0x184aaf(0x24e)]?serverversion>=_0x4275ec[_0x184aaf(0x24e)]:![];if(!_0x2999f1&&_0x4275ec['number']>_0x2f3aa0){if(_0x4275ec[_0x184aaf(0x1cf)]===_0x184aaf(0x259)||serverversion[_0x184aaf(0x27c)](_0x4275ec['bbvReceive'])){let _0x106764=''+_0x4275ec['title']+'\x0a\x0a'+_0x4275ec['message'];const _0x48337c=await sendTelegramMsg(toTelegramMarkdown(_0x106764),_0x184aaf(0x39c));if(_0x48337c)_0x2f3aa0=_0x4275ec[_0x184aaf(0x24f)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x184aaf(0x233),_0x2f3aa0),emitMessages();}}function emitMessages(){const _0x2fee18=_0x7850e0,_0x1eb2c2=settings[_0x2fee18(0x1dd)];let _0x27a277=[];newMessages['forEach'](_0x15c91d=>{const _0x64664f=_0x2fee18;_0x15c91d[_0x64664f(0x24f)]>_0x1eb2c2&&_0x27a277['push'](_0x15c91d);}),_0x27a277['length']>0x0&&getAllClients()['forEach'](_0x17574f=>{const _0x3ed45c=_0x2fee18;getSocket(_0x17574f['id'])[_0x3ed45c(0x352)](_0x3ed45c(0x33e),_0x27a277);});}function confirmMessage(_0xc8101f){updateSetting('lastmsgemitted',Number(_0xc8101f));}function isNewerVersion(_0x1b3b89,_0x3e242c){const _0xeeed73=_0x7850e0,_0x59c8df=_0x3e242c[_0xeeed73(0x321)]('.'),_0x336265=_0x1b3b89[_0xeeed73(0x321)]('.');for(var _0x190b53=0x0;_0x190b53<_0x336265['length'];_0x190b53++){const _0x1f0646=~~_0x336265[_0x190b53],_0x42ce79=~~_0x59c8df[_0x190b53];if(_0x1f0646>_0x42ce79)return!![];if(_0x1f0646<_0x42ce79)return![];}return![];}function toTelegramMarkdown(_0x2dd3e4){const _0x293ce9=_0x7850e0,_0x2fb2d5=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x42f2d4=/\*{2}(.+?)\*{2}/gim;return _0x2dd3e4=_0x2dd3e4['replace'](_0x2fb2d5,_0x293ce9(0x32c))[_0x293ce9(0x207)](_0x42f2d4,'*$1*'),_0x2dd3e4;}async function validateConfigFile(){const _0x3d0378=_0x7850e0,_0xc1c446=dbConfig['get'](_0x3d0378(0x1fc))[_0x3d0378(0x27d)](_0x3d0378(0x315))[_0x3d0378(0x2d1)]()||[];if(_0xc1c446[_0x3d0378(0x2a7)]==0x0){let _0x46ede6=0x0,_0x425cd5=[];const _0x32dedb=/^bot-([0-9]{3})-config.json$/,_0x1b103f=fs[_0x3d0378(0x37b)](configpath);_0x1b103f['forEach'](_0x218995=>{const _0x43cc76=_0x3d0378,_0x3e0052=_0x32dedb['exec'](_0x218995);if(_0x3e0052){const _0x1b3bc0=_0x3e0052[0x1];let _0x1c643b=getBotAttributes(_0x1b3bc0);_0x425cd5['push']({'botID':_0x1b3bc0,'botname':_0x1c643b[_0x43cc76(0x314)],'status':_0x43cc76(0x31a),'live':_0x43cc76(0x3ad)}),_0x46ede6++;}}),_0x46ede6!=0x0&&(dbConfig[_0x3d0378(0x30a)]('bots')[_0x3d0378(0x2ad)](_0x425cd5)['write'](),config=_0x425cd5,restoredConfigFile=_0x46ede6);}}function _0x18e5(){const _0x542a88=['generate','uncaughtException','set','reset-password','All','stop','Bot\x20Mgr\x20>\x20','date-fns','2FA\x20login\x20rejected','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','handshake','getTime','\x1b[31m','request','/names\x20-\x20show\x20bot\x20names\x0a','generateKeyPairAsync','randomBytes','delete-alerts','alias','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','57MvHbVC','build2','Bot\x20','/:bot/portfolio','(staging)','update','bbvNew','number','***','send','onText','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','remoteAddress','host','login\x20token\x20valid','access\x20timeout','temp/','any','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','temporary\x20access\x20not\x20allowed','allow','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Deleted\x20Bot\x20','includes','1000','kind','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','auth','add-bot','kill','ipv6','apply','Invalid\x20authentication\x20token\x20(1)','decrypt','search','crypto','filter','forEach','::1','writeFileSync','-----------------------------------------------------------------------------------','sendMetricsTelegram','::ffff:127.0.0.1','/help\x20-\x20show\x20available\x20commands\x0a','Starting\x20new\x20bot\x20|\x20Bot\x20','Error\x20while\x20deleting\x20config\x20files:\x20','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20log\x20out','hex','toString','Starting\x20Balance\x20Bot\x20reinstallation','existsSync','startsWith','sortBy',',\x20must\x20be\x20a\x204\x20digit\x20number','2FA\x20login\x20token\x20generated','min','config/','sendFile','store-settings','endsWith','You\x20can\x20use\x20the\x20following\x20commands:\x0a','update-bb','isDirectory','staging','IPv4','sendPortfolioTelegram','/status\x20-\x20show\x20bot(s)\x20status\x0a','Starting\x20Balance\x20Bot\x20update','Network\x20Interfaces:','isValid','loginRequired','\x1b[0m','Access\x20enabled\x20for\x20','show','botmanager','3000','reset-history','bb-config.json','reason','use','entries','invalid\x20credentials','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','userid','Notifications\x20enabled\x0a','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/:bot/performance','f2aRequired','connected','backup-full','Server','pidExpireLogin','<b>Balance\x20Bot\x20Status:</b>\x0a','publicKey','length','6887160VJwjFH','temporary\x20access\x20rejected','port','sign','tkn','assign','uuid-random','cloneDeep','/:bot/history','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Backup\x20file\x20unzipped\x20and\x20stored','\x1b[34m','alerts','connection','\x20>\x20','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','chat','messages','bot-','backup-full@','telegramIpApproval','jsonwebtoken','socket','mkdirSync','createServer','No\x20authentication\x20token','/update\x20-\x20update\x20Balance\x20Bot\x0a','getSeconds','store-headless','apiPassword','argv','string','logs','pidRefreshToken','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','status','compareSync','graphql-request','Unauthorized\x20login\x20attempt\x20(timeout)','apiSecret','toIPv4MappedAddress','value','track','success','latestversion','Notifications\x20disabled','getMinutes','#RES#\x20if\x20running\x20locally\x0a','Login\x20accepted','bot','full','node-zip','\x1b[35m','backup/','telegramEvents','\x20|\x20user:\x20...','\x1b[33m','output-002.log','Unauthorized\x20attempt\x20to\x20update\x20bot','exchange','http','store-fiat','/metrics\x20-\x20show\x20bot\x20performance\x0a','2FA\x20required','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','zip/','params','env','new','15\x20min','path','getDate','blacklist','callback_query','statSync','static','-performance.json','6b67f3d61ee94b8f5c80b4affef4c4d9','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20place\x20market\x20order',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Failed\x20to\x20download\x20','Logged\x20in\x20user\x20...','unlinkSync','Crypt','onepagemode','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','updatebotmanager','Unauthorized\x20attempt\x20to\x20download\x20','\x20to\x20','token','\x20|\x20','whitelist','files','match','listen','/output-000.log','emitHistory','get','telegramChatId','secret','logs/','#RES#\x20if\x20running\x20on\x20server','type','username','stopPolling','telegram2FaApproval','Notifications\x20types:\x20','botname','botID','randomFillSync','getHours','version.json','bb-secure.json','disabled','yes','backup','login\x20not\x20required','/:bot/support','Restore\x20backup\x20file\x20','/download/:type','split','get-logs','login\x20required','lowdb/adapters/FileSync','settings.','404\x20Not\x20Found','#RES#\x20','/:bot','cancel-loading','format','all','$1_$2_$3','accept','disconnect','sendMessage','file','padStart','api-eu.mixpanel.com','orders','2FA','-config.json','SIGINT','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','auto','reinstall-bb','No\x20bots\x20running\x20right\x20now','apiKey','Unauthorized\x20attempt\x20to\x20update\x20settings','exp','message','\x20(2)','remove','password','getPortfolio','Backup\x20file\x20uploaded','toggle-bot-mode','running','reinstall','headers','User\x20has\x20been\x20validated','Notifications\x20enabled','mode','once','verify','output-001.log','address','/upload-backup','Invalid\x20IP\x20address','slice','emit','clientip','internal','restore-backup-file','get-starting-balances','telegramUsername','login','then','encryptedUuid','test','catch','Alerts','production','storeConfiguration','reject','conn','telegram','restart','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','bot.js','2vmjzHI','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','debug','notification','NTBA_FIX_319','Invalid\x20authentication\x20token\x20(2)','simple','lowdb','Yes','Starting\x20#RED#Balance\x20Bot\x20v','backup-full.zip','removeAllListeners',':\x20Bot\x20Mgr\x20>\x20','32370fEHMVx','size','timestamp','-results.json','RSA','live','name','readdirSync','.zip','/restart\x20-\x20restart\x20bot(s)\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Enabled\x20Bot\x20','showConfig','manual','\x1b[36m','new-disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','stringify','confirm-message','7286480ZCSjfJ','push','backupfile','initclient','show-config','mixpanel','write','binary','output-003.log','update-bot','Your\x20installation\x20is\x20already\x20up\x20to\x20date','showname','telegrammsg','readFileSync','cancelLoading','answerCallbackQuery','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','node-telegram-bot-api','./version.json','Unauthorized\x20attempt\x20to\x20get\x20messages','Markdown','RSA-OAEP','output-000.log','ipc','logout','16uRjaOn','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','bbPassword','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','enabled','removeListener','************','find','init','get-backup-files','(((.+)+)+)+$','mtime','stopped','/on\x20-\x20start\x20bot(s)\x0a','Starting\x20bot\x20|\x20Bot\x20','telegramEnabled','family','privateKey','place-order','896502DpSGGg','sort','index.html','server','from','getMonth','logged\x20out','log','exit','headless','store','bbvReceive','socket.io','uuid','express','DEFLATE','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','version','hasOwnProperty','max','7493052YyNzWu','inherit','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','expiry','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','lastmsgemitted','defaults','Invalid\x20username\x20or\x20IP\x20address','util','build','store-configuration','Error\x20removing\x20old\x20backup\x20files:','Unauthorized\x20attempt\x20to\x20get\x20events','private','bbUsername','_data','function','Setting\x20access:\x20','data','timeshift','started','access','reload','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','temporary\x20access\x20timeout','HTML','<b>Telegram\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20add\x20bot','rmSync','login\x20token\x20generated','join','Restore\x20process\x20aborted','temporary\x20token\x20generated','SIGTERM','delete-bot','bots','\x20minutes','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','3753600TlxWQr','Disabled\x20Bot\x20','settings','copyFileSync','map','</b>\x20?','temporaryAccessAllowed','backup-files','replace','Unauthorized\x20attempt\x20to\x20confirm\x20message','/enable\x20-\x20enable\x20notifications\x0a','axios','secure','bb/','error','order','bcryptjs','https://api.ipify.org?format=json','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','\x20(1)','keys','bb-settings.json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','\x20|\x20client:\x20...','-events.json','placeOrder','/:bot/configuration','get-messages','sockets','hashSync','All\x20bots','172412AMNNEz','isIPv4MappedAddress','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','/off\x20-\x20stop\x20bot(s)\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Temporary\x20access\x20rejected','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','0.0.0','constructor','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','getUTCHours','getFullYear','telegramToken','=>\x20Go\x20to\x20#CYA#http://','Idling\x20bot\x20\x20\x20|\x20Bot\x20','toggleBotMode','parse','deleteHistoryAlerts','storeFiat','lastmsgtelegram'];_0x18e5=function(){return _0x542a88;};return _0x18e5();}async function restoreConfigNotify(_0x16a0b0){const _0x5d540b=_0x7850e0;let _0x477de6;if(restoredConfigFile==0x1)_0x477de6=_0x5d540b(0x2fe);else _0x477de6=_0x5d540b(0x1d4);if(_0x16a0b0)io['to'](_0x5d540b(0x293))[_0x5d540b(0x352)]('notification',_0x477de6);else{logger[_0x5d540b(0x36d)](_0x5d540b(0x270)),logger[_0x5d540b(0x36d)](_0x477de6),logger['simple'](_0x5d540b(0x270)),logger[_0x5d540b(0x36d)]('');if(tgBot&&settings[_0x5d540b(0x30b)]&&settings[_0x5d540b(0x2de)]!='orders')tgBot['sendMessage'](settings[_0x5d540b(0x30b)],_0x5d540b(0x23a)+_0x477de6)[_0x5d540b(0x35c)](_0x45fbfa=>{telegramError(_0x45fbfa);});}}function validateCredentials(_0x162ddd,_0x3d2f0b){const _0x227900=_0x7850e0;if(_0x162ddd[_0x227900(0x310)]==settings[_0x227900(0x1e6)]&&bcrypt[_0x227900(0x2cc)](_0x162ddd[_0x227900(0x341)],settings['bbPassword'])){if(settings[_0x227900(0x2a0)])return{'allow':![],'reason':_0x227900(0x220),'token':null};else{const _0x1aaf0a=generateLoginToken(_0x3d2f0b);return{'allow':!![],'reason':_0x227900(0x1f6),'token':_0x1aaf0a};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1b651d){const _0x1f7ae4=_0x7850e0,_0x29b1d8=generateLoginToken(_0x1b651d);return{'allow':!![],'reason':_0x1f7ae4(0x1f6),'token':_0x29b1d8};}function validateAccess(_0x34b9f1,_0x2fb25b,_0x20f45f){const _0x1ea333=_0x7850e0,_0x239f22=_0x20f45f?_0x20f45f:devices[_0x2fb25b]['ip'];let _0x1739f2;const _0x44d932=_0x578d83=>{const _0x479afa=_0x4a35;if(settings['loginRequired']){if(settings[_0x479afa(0x2a0)]){if(telegram2FaApproved(_0x2fb25b)){const _0x2d5922=generateLoginToken(_0x2fb25b);return{'allow':!![],'reason':_0x479afa(0x27f),'token':_0x2d5922};}else return{'allow':![],'reason':_0x479afa(0x323),'token':null};}else return _0x1739f2=validToken(_0x578d83,_0x2fb25b),_0x1739f2[_0x479afa(0x1d6)](_0x479afa(0x2d3))?{'allow':!![],'reason':_0x479afa(0x256),'token':_0x578d83}:{'allow':![],'reason':_0x479afa(0x323),'token':null};}else return{'allow':!![],'reason':_0x479afa(0x31d),'token':null};};if(settings['whitelistEnabled']){let _0x3f9f42=[...settings[_0x1ea333(0x304)],_0x1ea333(0x26e),_0x1ea333(0x272),'127.0.0.1'];if(_0x3f9f42[_0x1ea333(0x25f)](_0x239f22))return _0x44d932(_0x34b9f1);else{_0x1739f2=validToken(_0x34b9f1,_0x2fb25b);if(_0x1739f2[_0x1ea333(0x1d6)](_0x1ea333(0x2d3)))return _0x44d932(_0x34b9f1);else{if(telegramIpApproved(_0x2fb25b)){const _0x52850c=generateToken(_0x2fb25b);return _0x1739f2=_0x44d932(_0x34b9f1),_0x1739f2[_0x1ea333(0x25c)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x52850c}:_0x1739f2;}else return settings[_0x1ea333(0x205)]?{'allow':![],'reason':_0x1ea333(0x2e7),'token':null}:{'allow':![],'reason':_0x1ea333(0x25b),'token':null};}}}else return _0x44d932(_0x34b9f1);}function timelyDecrypt(_0x270a7f,_0x4023c4=!![]){const _0x38c593=_0x7850e0;if(_0x270a7f)try{const _0x53deef=crypt[_0x38c593(0x269)](secure['privateKey'],_0x270a7f)[_0x38c593(0x33e)],_0x362d20=_0x53deef[_0x38c593(0x321)]('@')[0x0],_0x405a66=_0x53deef['split']('@')[0x1],_0x58642a=new Date()[_0x38c593(0x23f)]();if(_0x4023c4){if(_0x58642a-_0x405a66<maxSecretAge*0x3e8)return _0x362d20;else return![];}else return _0x362d20;}catch(_0x3a7286){return![];}else return![];}const validToken=(_0x2aee07,_0x23c417)=>{const _0x3dcc96=_0x7850e0,_0x1ddcf4=devices[_0x23c417]['ip'];if(!_0x2aee07)return{'error':_0x3dcc96(0x2c1)};for(let _0x230454 of blacklist){if(_0x230454[_0x3dcc96(0x302)]==_0x2aee07)return{'error':'Token\x20blacklisted'};}let _0xaea1b;try{_0xaea1b=jwt[_0x3dcc96(0x34c)](_0x2aee07,secure[_0x3dcc96(0x30c)]+_0x23c417);}catch{return{'error':_0x3dcc96(0x268)};}if(!_0xaea1b['hasOwnProperty']('clientip')&&!_0xaea1b[_0x3dcc96(0x1d6)]('username')||!_0xaea1b[_0x3dcc96(0x1d6)](_0x3dcc96(0x33d)))return{'error':_0x3dcc96(0x36c)};if(!_0xaea1b['hasOwnProperty'](_0x3dcc96(0x310))&&_0xaea1b[_0x3dcc96(0x1d6)](_0x3dcc96(0x353))){const {clientip:_0xf7cf82}=_0xaea1b;return _0x1ddcf4==_0xf7cf82?{'success':_0x3dcc96(0x348)}:{'error':_0x3dcc96(0x350)};}else{if(_0xaea1b['hasOwnProperty'](_0x3dcc96(0x310))&&_0xaea1b['hasOwnProperty'](_0x3dcc96(0x353))){const {username:_0x57cd5d,clientip:_0x3e5aa0}=_0xaea1b;return settings[_0x3dcc96(0x1e6)]==_0x57cd5d&&_0x1ddcf4==_0x3e5aa0?{'success':_0x3dcc96(0x348)}:{'error':_0x3dcc96(0x1df)};}}},generateLoginToken=_0x1545a6=>{const _0x443ad8=_0x7850e0;if(_0x1545a6){const _0x190a1e=devices[_0x1545a6]['ip'];return jwt['sign']({'username':settings[_0x443ad8(0x1e6)],'clientip':_0x190a1e},secure[_0x443ad8(0x30c)]+_0x1545a6,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x410bd9=>{const _0x2ca1a6=_0x7850e0;if(_0x410bd9){const _0x1778dc=devices[_0x410bd9]['ip'];return jwt[_0x2ca1a6(0x2ab)]({'clientip':_0x1778dc},secure[_0x2ca1a6(0x30c)]+_0x410bd9,{'expiresIn':devices[_0x410bd9][_0x2ca1a6(0x2bc)][_0x2ca1a6(0x1db)]*0x3c});}else return![];},telegramIpApproved=_0x12f31e=>{const _0x8f361e=_0x7850e0;let _0x27ae44=![];return devices[_0x12f31e][_0x8f361e(0x2bc)]&&devices[_0x12f31e][_0x8f361e(0x2bc)][_0x8f361e(0x1db)]!=_0x8f361e(0x360)&&(_0x27ae44=devices[_0x12f31e][_0x8f361e(0x2bc)][_0x8f361e(0x353)]==devices[_0x12f31e]['ip']&&new Date()[_0x8f361e(0x23f)]()-devices[_0x12f31e][_0x8f361e(0x2bc)][_0x8f361e(0x376)]<devices[_0x12f31e][_0x8f361e(0x2bc)][_0x8f361e(0x1db)]*0x3c*0x3e8),_0x27ae44;},telegram2FaApproved=_0x52f8b7=>{const _0x5aefa8=_0x7850e0;let _0x457075=![];return devices[_0x52f8b7]['telegram2FaApproval']&&devices[_0x52f8b7]['telegram2FaApproval'][_0x5aefa8(0x1db)]!='reject'&&(_0x457075=devices[_0x52f8b7][_0x5aefa8(0x312)][_0x5aefa8(0x353)]==devices[_0x52f8b7]['ip']&&new Date()['getTime']()-devices[_0x52f8b7]['telegram2FaApproval'][_0x5aefa8(0x376)]<devices[_0x52f8b7][_0x5aefa8(0x312)]['expiry']*0x3c*0x3e8),_0x457075;},normalizeIP=_0x46d43c=>{const _0xcd5513=_0x7850e0;let _0x4b9f25=null,_0x58b3e2=null;if(ipaddr[_0xcd5513(0x28e)](_0x46d43c)){const _0x2e17d8=ipaddr[_0xcd5513(0x230)](_0x46d43c);_0x2e17d8[_0xcd5513(0x261)]()===_0xcd5513(0x266)?(_0x2e17d8[_0xcd5513(0x21f)]()&&(_0x4b9f25=_0x2e17d8['toIPv4Address']()[_0xcd5513(0x279)]()),_0x58b3e2=_0x2e17d8[_0xcd5513(0x279)]()):(_0x4b9f25=_0x2e17d8[_0xcd5513(0x279)](),_0x58b3e2=_0x2e17d8[_0xcd5513(0x2d0)]()[_0xcd5513(0x279)]());}return{'show':_0x4b9f25?_0x4b9f25:_0x58b3e2,'store':_0x58b3e2};};function formatDate(_0x2192f2){const _0x1403b5=_0x7850e0;return _0x2192f2['getFullYear']()+'/'+(_0x2192f2[_0x1403b5(0x3b9)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2192f2['getDate']()[_0x1403b5(0x279)]()[_0x1403b5(0x331)](0x2,'0')+'\x20'+_0x2192f2['getHours']()[_0x1403b5(0x279)]()[_0x1403b5(0x331)](0x2,'0')+':'+_0x2192f2[_0x1403b5(0x2d6)]()['toString']()[_0x1403b5(0x331)](0x2,'0')+':'+_0x2192f2['getSeconds']()['toString']()[_0x1403b5(0x331)](0x2,'0');}function sleep(_0x1b19b4){return new Promise(_0x15e8ec=>setTimeout(_0x15e8ec,_0x1b19b4));}