const _0x2b5e08=_0x6f38;(function(_0x95a146,_0x31ece3){const _0x1ac2d4=_0x6f38,_0x2e7c6c=_0x95a146();while(!![]){try{const _0x45536a=parseInt(_0x1ac2d4(0x24f))/0x1+parseInt(_0x1ac2d4(0x12b))/0x2*(-parseInt(_0x1ac2d4(0xd5))/0x3)+parseInt(_0x1ac2d4(0x25b))/0x4*(-parseInt(_0x1ac2d4(0x18e))/0x5)+-parseInt(_0x1ac2d4(0x231))/0x6+parseInt(_0x1ac2d4(0x146))/0x7+parseInt(_0x1ac2d4(0x272))/0x8*(-parseInt(_0x1ac2d4(0x25f))/0x9)+parseInt(_0x1ac2d4(0x1b7))/0xa;if(_0x45536a===_0x31ece3)break;else _0x2e7c6c['push'](_0x2e7c6c['shift']());}catch(_0xecf455){_0x2e7c6c['push'](_0x2e7c6c['shift']());}}}(_0x4cc2,0x63cec));const _0x43e0f6=function(){let _0x3c1ea2=!![];return function(_0xf76d5d,_0x5b4df3){const _0x257918=_0x3c1ea2?function(){const _0x51001f=_0x6f38;if(_0x5b4df3){const _0x2931a8=_0x5b4df3[_0x51001f(0x273)](_0xf76d5d,arguments);return _0x5b4df3=null,_0x2931a8;}}:function(){};return _0x3c1ea2=![],_0x257918;};}(),_0xbdf1b7=_0x43e0f6(this,function(){const _0x50e853=_0x6f38;return _0xbdf1b7['toString']()[_0x50e853(0x20b)](_0x50e853(0x181))['toString']()[_0x50e853(0x157)](_0xbdf1b7)[_0x50e853(0x20b)](_0x50e853(0x181));});_0xbdf1b7();'use strict';process[_0x2b5e08(0x217)][_0x2b5e08(0x1e0)]=0x1;const childProcess=require(_0x2b5e08(0x1ac)),fs=require('fs'),fns=require(_0x2b5e08(0x141)),low=require(_0x2b5e08(0x228)),FileSync=require(_0x2b5e08(0x189)),path=require(_0x2b5e08(0x108)),crypto=require(_0x2b5e08(0x23a)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x2b5e08(0x1ed)),jwt=require(_0x2b5e08(0x25c)),ipaddr=require(_0x2b5e08(0x1c5)),argv=require(_0x2b5e08(0xd7))(process[_0x2b5e08(0x139)][_0x2b5e08(0x112)](0x2))['argv'],uuidRandom=require('uuid-random'),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x2b5e08(0x1de)),axios=require(_0x2b5e08(0x226)),{GraphQLClient,gql}=require(_0x2b5e08(0xea)),util=require(_0x2b5e08(0xfc)),fileUpload=require('express-fileupload'),PORT=argv['port']||_0x2b5e08(0x1a3),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x2b5e08(0x1f3)](_0x2b5e08(0x161)+PORT+_0x2b5e08(0x1d9)),process[_0x2b5e08(0x215)](0x1));const HOST=argv[_0x2b5e08(0x242)]||null,userID=argv[_0x2b5e08(0x137)]||'';let bbpath=_0x2b5e08(0x100),bbpath2='';const botfile=_0x2b5e08(0x182),configfile=_0x2b5e08(0x234),settingsfile=_0x2b5e08(0x11c),securefile=_0x2b5e08(0x18d);let validInstallation=!![];!fs[_0x2b5e08(0x236)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x2b5e08(0x1f8)+userID+'/':bbpath+_0x2b5e08(0x1f8),configbackuppath=configpath+_0x2b5e08(0x191),logspath=userID?bbpath+_0x2b5e08(0xd0)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x2b5e08(0x22e),loggerfile=fs['createWriteStream'](logspath+_0x2b5e08(0x1fd),{'flags':'a'}),temppath=userID?bbpath+_0x2b5e08(0x22a)+userID+'/':bbpath+_0x2b5e08(0x22a);!fs[_0x2b5e08(0x236)](configpath)&&fs[_0x2b5e08(0x25e)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x2b5e08(0x25e)](configbackuppath);!fs[_0x2b5e08(0x236)](logspath)&&fs[_0x2b5e08(0x25e)](logspath);!fs[_0x2b5e08(0x236)](zippath)&&fs[_0x2b5e08(0x25e)](zippath);!fs[_0x2b5e08(0x236)](temppath)&&fs[_0x2b5e08(0x25e)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2b5e08(0x1a0)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2b5e08(0x15f)}})[_0x2b5e08(0x118)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2b5e08(0x1a0)]({'secure':{},'blacklist':[]})[_0x2b5e08(0x118)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x2b5e08(0x262)});const saltRounds=0xa,mixpanel=Mixpanel[_0x2b5e08(0x23c)](_0x2b5e08(0x224),{'host':_0x2b5e08(0x19d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2b5e08(0x166)]&&settings['telegramToken']!=''&&settings[_0x2b5e08(0x1ff)]&&settings[_0x2b5e08(0x1ff)]!='')initTelegram();const logger={'screen':_0x541d77=>{console['log'](_0x541d77);},'simple':_0x47f328=>{const _0x51aa76=_0x2b5e08;console[_0x51aa76(0x1f3)](_0x47f328),loggerfile[_0x51aa76(0x118)](util['format'](_0x47f328)+'\x0a');},'full':async _0x23fbba=>{const _0x110413=_0x2b5e08,_0x210289=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x23fbba;console[_0x110413(0x1f3)](_0x210289),loggerfile[_0x110413(0x118)](util[_0x110413(0x1c8)](_0x210289)+'\x0a');if(tgBot&&settings[_0x110413(0x1e7)]&&settings['telegramEvents']!=_0x110413(0x212))await tgBot[_0x110413(0x275)](settings[_0x110413(0x1e7)],_0x110413(0x1ad)+_0x23fbba)['catch'](_0x3ba9b4=>{telegramError(_0x3ba9b4);});}};process['on']('uncaughtException',function(_0x556700){logger['simple'](_0x556700);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x2b5e08(0xe0)](app);app[_0x2b5e08(0x1f0)](fileUpload({'useTempFiles':!![]})),app[_0x2b5e08(0x240)](_0x2b5e08(0x167),async(_0xb69135,_0x380f5a)=>{const _0x2d0a64=_0x2b5e08,_0x577931=_0xb69135[_0x2d0a64(0x101)]['type'],_0xe7aa6e=getClientsWithBotID(_0x2d0a64(0x156)),_0x159668=_0xb69135[_0x2d0a64(0x200)][_0x2d0a64(0x15e)],_0x3e1b15=timelyDecrypt(_0x159668,![]),_0x164f54=_0xe7aa6e[_0x2d0a64(0x107)](_0x32d563=>_0x32d563['uuid']==_0x3e1b15);if(_0x164f54){const _0x377bda=normalizeIP(_0xb69135[_0x2d0a64(0x232)][_0x2d0a64(0x1bd)])['store'],_0x4e6b72=_0xb69135[_0x2d0a64(0x200)][_0x2d0a64(0x269)];if(validateAccess(_0x4e6b72,_0x3e1b15,_0x377bda)[_0x2d0a64(0x257)])await zipFiles(_0x577931),_0x380f5a[_0x2d0a64(0xdb)](zippath+(_0x577931+_0x2d0a64(0xcd)),_0x4af89c=>{const _0x5e2526=_0x2d0a64;_0x4af89c&&(logger[_0x5e2526(0x17d)](_0x5e2526(0xd8)+_0x577931),logger[_0x5e2526(0x22c)](_0x4af89c));});else logger[_0x2d0a64(0x17d)](_0x2d0a64(0x21c)+_0x577931+'\x20(1)');}else logger[_0x2d0a64(0x17d)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x577931+_0x2d0a64(0xff));}),app['post'](_0x2b5e08(0x145),async(_0x48a107,_0x48f262)=>{const _0x92233e=_0x2b5e08,_0x5eef74=getClientsWithBotID('botmanager'),_0x4c27f9=_0x48a107[_0x92233e(0x200)]['uuid'],_0xd0f663=timelyDecrypt(_0x4c27f9,![]),_0x27a905=_0x5eef74['find'](_0x5a1f4d=>_0x5a1f4d[_0x92233e(0x15e)]==_0xd0f663);if(_0x27a905){const _0x5d8594=normalizeIP(_0x48a107['socket'][_0x92233e(0x1bd)])[_0x92233e(0x129)],_0x1d9d9f=_0x48a107['headers']['tkn'];if(validateAccess(_0x1d9d9f,_0xd0f663,_0x5d8594)[_0x92233e(0x257)]){if(_0x48a107[_0x92233e(0x169)]){const _0x2764d9=_0x48a107['files']['backupfile'];await _0x2764d9['mv'](temppath+_0x2764d9[_0x92233e(0x237)]),_0x48f262[_0x92233e(0x21b)]({'status':!![],'message':'File\x20uploaded'});const _0x571172=getBotsWithMode();_0x571172[_0x92233e(0x142)]>0x0?confirmRestore(temppath,_0x2764d9[_0x92233e(0x237)]):unzipFile(temppath,_0x2764d9['name']);}}else logger[_0x92233e(0x17d)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x92233e(0x17d)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x2b5e08(0x1f0)](express[_0x2b5e08(0x171)](path[_0x2b5e08(0x148)](__dirname,bbpath2,'build2'))),app[_0x2b5e08(0x1f0)](express['static'](path[_0x2b5e08(0x148)](__dirname,bbpath2,_0x2b5e08(0xdf)))),app[_0x2b5e08(0x240)]('/',function(_0x3994d6,_0x1b2606){const _0x25e156=_0x2b5e08;_0x1b2606[_0x25e156(0xf6)](path['join'](__dirname,bbpath2,'build2',_0x25e156(0x116)));}),app[_0x2b5e08(0x240)](_0x2b5e08(0xfe),function(_0x462947,_0x31c891){const _0x2148e5=_0x2b5e08;_0x31c891['sendFile'](path[_0x2148e5(0x148)](__dirname,bbpath2,_0x2148e5(0xdf),_0x2148e5(0x116)));}),app['get'](_0x2b5e08(0x1cd),(_0x2ac1f2,_0x3df138)=>{const _0x1646c7=_0x2b5e08;_0x3df138[_0x1646c7(0xf6)](path['join'](__dirname,bbpath2,_0x1646c7(0xdf),_0x1646c7(0x116)));}),app[_0x2b5e08(0x240)](_0x2b5e08(0x151),(_0x4e4d26,_0x14269b)=>{const _0x3d0cd3=_0x2b5e08;_0x14269b[_0x3d0cd3(0xf6)](path[_0x3d0cd3(0x148)](__dirname,bbpath2,'build',_0x3d0cd3(0x116)));}),app['get'](_0x2b5e08(0x10d),(_0xd00260,_0x2f3b29)=>{const _0x37bda8=_0x2b5e08;_0x2f3b29[_0x37bda8(0xf6)](path[_0x37bda8(0x148)](__dirname,bbpath2,'build',_0x37bda8(0x116)));}),app[_0x2b5e08(0x240)]('/:bot/history',(_0x3799da,_0x3f3364)=>{const _0x113c30=_0x2b5e08;_0x3f3364[_0x113c30(0xf6)](path['join'](__dirname,bbpath2,_0x113c30(0xdf),'index.html'));}),app['get'](_0x2b5e08(0x1ae),(_0x1ebb83,_0x2c931f)=>{const _0x1fefa2=_0x2b5e08;_0x2c931f['sendFile'](path[_0x1fefa2(0x148)](__dirname,bbpath2,'build',_0x1fefa2(0x116)));}),app[_0x2b5e08(0x240)](_0x2b5e08(0x17a),(_0x234004,_0x120f03)=>{const _0x4c5b92=_0x2b5e08;_0x120f03['sendFile'](path[_0x4c5b92(0x148)](__dirname,bbpath2,_0x4c5b92(0xdf),'index.html'));});if(HOST)http[_0x2b5e08(0x261)](PORT,HOST);else http[_0x2b5e08(0x261)](PORT);const io=require(_0x2b5e08(0x19f))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x4e87d5=_0x2b5e08;logger[_0x4e87d5(0x22c)](''),logger[_0x4e87d5(0x22c)](_0x4e87d5(0x219)),await logger[_0x4e87d5(0x17d)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x4e87d5(0x22c)](_0x4e87d5(0x219));if(config[_0x4e87d5(0x142)]!=0x0)for(const _0x1efef6 of config){if(_0x1efef6['status']==_0x4e87d5(0x10b)||_0x1efef6[_0x4e87d5(0x195)]=='new')await logger[_0x4e87d5(0x17d)](_0x4e87d5(0x1e3)+_0x1efef6['botID']+_0x4e87d5(0xd9)+_0x1efef6[_0x4e87d5(0xe7)]),startBot([_0x1efef6[_0x4e87d5(0x1b1)],userID],{'cwd':bbpath},function(_0x322fd6){const _0x28071c=_0x4e87d5;if(_0x322fd6)logger[_0x28071c(0x17d)](_0x322fd6);});else(_0x1efef6[_0x4e87d5(0x195)]==_0x4e87d5(0x1e9)||_0x1efef6['status']=='new-disabled')&&await logger[_0x4e87d5(0x17d)](_0x4e87d5(0x1a4)+_0x1efef6[_0x4e87d5(0x1b1)]+'\x20|\x20'+_0x1efef6['botname']);}else!newBot&&logger[_0x4e87d5(0x22c)](_0x4e87d5(0x11b));if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x4e87d5(0x22c)]('');}function startSocket(){io['on']('connection',_0x564bec=>{const _0x452e7e=_0x6f38;let _0xb03c09,_0x2666c8,_0xdf565f,_0x39e924,_0x1350ad;const _0xb33f0a=_0x564bec[_0x452e7e(0x13e)][_0x452e7e(0x200)]['referer'];_0x2666c8=_0xb33f0a[_0x452e7e(0x1dd)](/bot[0-9]{3}/);if(_0x2666c8)_0xdf565f=_0x2666c8[0x0][_0x452e7e(0x1dd)](/[0-9]{3}/);if(_0xdf565f)_0xb03c09=_0xdf565f[0x0];else _0xb03c09=_0x452e7e(0x156);const _0x557ebf=_0x564bec[_0x452e7e(0x13e)][_0x452e7e(0x122)]['encryptedUuid'];if(!_0x557ebf)_0x564bec[_0x452e7e(0x172)]('status',{'publicKey':secure[_0x452e7e(0x263)]});else{_0x39e924=timelyDecrypt(_0x557ebf,![]);if(!_0x39e924)_0x564bec[_0x452e7e(0x172)]('status',{'publicKey':secure[_0x452e7e(0x263)]});else{_0x1350ad=normalizeIP(_0x564bec[_0x452e7e(0x110)][_0x452e7e(0x1bd)])['store'];if(!devices[_0x39e924])devices[_0x39e924]={'uuid':_0x39e924,'access':{'token':null}};devices[_0x39e924]['ip']=_0x1350ad;const _0x3862b9=addClient(_0x564bec['id'],_0x39e924,_0xb03c09);setAccess(_0x3862b9),emitMessages(),_0x564bec['on'](_0x452e7e(0x197),_0x45b586=>{const _0x5659c7=_0x452e7e,_0x25226a=timelyDecrypt(_0x45b586[_0x5659c7(0x13d)]);if(_0x25226a){_0x45b586={'username':_0x45b586[_0x5659c7(0x24c)],'password':_0x25226a},devices[_0x39e924][_0x5659c7(0x115)]=validateCredentials(_0x45b586,_0x39e924);if(devices[_0x39e924][_0x5659c7(0x115)][_0x5659c7(0x257)]==![]&&devices[_0x39e924][_0x5659c7(0x115)][_0x5659c7(0x14d)]=='2FA\x20login\x20required')_0x564bec[_0x5659c7(0x172)](_0x5659c7(0x195),{'access':devices[_0x39e924]['access']}),loginAccess2FA(_0x39e924,_0x1350ad);else{if(devices[_0x39e924][_0x5659c7(0x115)][_0x5659c7(0x257)]==![]&&devices[_0x39e924]['access']['reason']==_0x5659c7(0x26e))_0x564bec[_0x5659c7(0x172)](_0x5659c7(0x195),{'access':devices[_0x39e924][_0x5659c7(0x115)]});else devices[_0x39e924][_0x5659c7(0x115)][_0x5659c7(0x257)]&&devices[_0x39e924][_0x5659c7(0x115)][_0x5659c7(0x14d)]==_0x5659c7(0x24e)&&(getClientsWithUuid(_0x39e924)['forEach'](_0x470d4b=>{setAccess(_0x470d4b);}),setTokenRefresh(_0x39e924),setSessionTimeout(_0x5659c7(0x197),_0x39e924));}}else logger[_0x5659c7(0x17d)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x564bec['on'](_0x452e7e(0x1df),()=>{resetPassword();}),_0x564bec['on'](_0x452e7e(0x123),_0x3dce1f=>{removeClient(_0x564bec['id']);}),_0xb03c09=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function _0x6f38(_0x4794a1,_0x244328){const _0x37510a=_0x4cc2();return _0x6f38=function(_0xbdf1b7,_0x43e0f6){_0xbdf1b7=_0xbdf1b7-0xcd;let _0x4cc2f6=_0x37510a[_0xbdf1b7];return _0x4cc2f6;},_0x6f38(_0x4794a1,_0x244328);}function initClient(_0x2ad2a2){const _0x5875bc=_0x2b5e08;if(_0x2ad2a2!=_0x5875bc(0x156)&&config[_0x5875bc(0x1b3)]!=''){if(pid[_0x2ad2a2])pid[_0x2ad2a2][_0x5875bc(0x21b)]({'function':_0x5875bc(0x124),'args':null});}}function reloadBotManager(){const _0x4c893c=_0x2b5e08;getClientsWithBotID('botmanager')[_0x4c893c(0x12c)](_0x3cb58d=>{const _0x36d36c=_0x4c893c;getSocket(_0x3cb58d['id'])['emit']('status',{'access':{'allow':![],'reason':_0x36d36c(0xde),'token':null}});});}function getSocket(_0x1a7ce5){const _0x220d24=_0x2b5e08;return io[_0x220d24(0x1b5)][_0x220d24(0x1b5)][_0x220d24(0x240)](_0x1a7ce5);}function setAccess(_0x16723a){const _0x191460=_0x2b5e08,_0x523490=getSocket(_0x16723a['id']),_0x3fe23c=_0x16723a[_0x191460(0x15e)],_0x18848e=_0x16723a[_0x191460(0x1ec)];devices[_0x3fe23c][_0x191460(0x115)]=validateAccess(devices[_0x3fe23c][_0x191460(0x115)]['token'],_0x3fe23c),_0x523490[_0x191460(0x148)](_0x3fe23c);if(devices[_0x3fe23c][_0x191460(0x115)][_0x191460(0x257)]){_0x523490['join'](_0x18848e);if(_0x18848e=='botmanager')initializeSocketBotManager(_0x523490);else initializeSocketBot(_0x523490);initClient(_0x18848e);}devices[_0x3fe23c][_0x191460(0x115)]['token']&&devices[_0x3fe23c]['access'][_0x191460(0x14d)]==_0x191460(0x159)&&setSessionTimeout('2FA',_0x3fe23c),devices[_0x3fe23c]['access'][_0x191460(0x119)]&&devices[_0x3fe23c][_0x191460(0x115)]['reason']==_0x191460(0xed)&&setSessionTimeout(_0x191460(0x197),_0x3fe23c),_0x523490[_0x191460(0x172)](_0x191460(0x195),{'status':_0x16723a[_0x191460(0x14b)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3fe23c][_0x191460(0x115)],'externalip':devices[_0x3fe23c]['ip'],'publicKey':secure[_0x191460(0x263)],'userid':settings[_0x191460(0x248)],'validInstallation':validInstallation}),devices[_0x3fe23c][_0x191460(0x115)][_0x191460(0x257)]==![]&&devices[_0x3fe23c][_0x191460(0x115)][_0x191460(0x14d)]==_0x191460(0x193)&&temporaryAccess2FA(_0x3fe23c,devices[_0x3fe23c]['ip']);}function setSessionTimeout(_0x36c8d4,_0x2c3f65){const _0x2c2627=_0x2b5e08;let _0x911ab6;if(_0x36c8d4==_0x2c2627(0x197))_0x911ab6=loginExpiry*0x3c*0x3e8;else _0x911ab6=devices[_0x2c3f65][_0x2c2627(0x18b)][_0x2c2627(0xd1)]*0x3c*0x3e8-(new Date()[_0x2c2627(0x19e)]()-devices[_0x2c3f65]['telegramIpApproval'][_0x2c2627(0xec)]);if(devices[_0x2c3f65][_0x2c2627(0x18f)])clearTimeout(devices[_0x2c3f65][_0x2c2627(0x18f)]);devices[_0x2c3f65][_0x2c2627(0x18f)]=setTimeout(()=>{const _0x2fcd31=_0x2c2627;if(devices[_0x2c3f65][_0x2fcd31(0x13a)])clearTimeout(devices[_0x2c3f65][_0x2fcd31(0x13a)]);removeSocketListeners(_0x2c3f65),addBlacklist(_0x2c3f65),devices[_0x2c3f65]['telegramIpApproval']=null,devices[_0x2c3f65][_0x2fcd31(0xdd)]=null,devices[_0x2c3f65][_0x2fcd31(0x115)][_0x2fcd31(0x119)]=null,devices[_0x2c3f65][_0x2fcd31(0x115)]=validateAccess(devices[_0x2c3f65]['access'][_0x2fcd31(0x119)],_0x2c3f65),!(devices[_0x2c3f65][_0x2fcd31(0x115)][_0x2fcd31(0x257)]&&devices[_0x2c3f65]['access'][_0x2fcd31(0x14d)]=='login\x20not\x20required')&&(_0x36c8d4==_0x2fcd31(0x197)?io['to'](_0x2c3f65)[_0x2fcd31(0x172)]('status',{'access':{'allow':![],'reason':_0x2fcd31(0x121),'token':null}}):io['to'](_0x2c3f65)[_0x2fcd31(0x172)](_0x2fcd31(0x195),{'access':{'allow':![],'reason':_0x2fcd31(0x1fc),'token':null}})),devices[_0x2c3f65][_0x2fcd31(0x115)][_0x2fcd31(0x119)]=null;},_0x911ab6);}function setTokenRefresh(_0x3d5dab){const _0x444168=_0x2b5e08;if(devices[_0x3d5dab]['pidRefreshToken'])clearTimeout(devices[_0x3d5dab][_0x444168(0x13a)]);devices[_0x3d5dab][_0x444168(0x13a)]=setTimeout(()=>{const _0x911ae1=_0x444168;getClientsWithUuid(_0x3d5dab)[_0x911ae1(0x142)]!=0x0?(devices[_0x3d5dab][_0x911ae1(0x115)]=refreshToken(_0x3d5dab),io['to'](_0x3d5dab)[_0x911ae1(0x172)](_0x911ae1(0x195),{'status':_0x911ae1(0x199),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3d5dab]['access'],'externalip':devices[_0x3d5dab]['ip'],'publicKey':secure[_0x911ae1(0x263)],'validInstallation':validInstallation}),setTokenRefresh(_0x3d5dab)):clearTimeout(devices[_0x3d5dab][_0x911ae1(0x13a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xeeada){const _0x401f82=_0x2b5e08,_0x23600b=getClient(_0xeeada['id'])['uuid'];_0xeeada[_0x401f82(0x172)](_0x401f82(0x225),config),_0xeeada[_0x401f82(0x172)](_0x401f82(0x1a6),cleanSettings()),_0xeeada['on'](_0x401f82(0x158),_0x1c1207=>{const _0x41729c=_0x401f82;if(validateAccess(_0x1c1207,_0x23600b)[_0x41729c(0x257)])addBot();else logger[_0x41729c(0x17d)](_0x41729c(0xda));}),_0xeeada['on'](_0x401f82(0x11e),(_0x33bf0c,_0x5783b4)=>{const _0x1ee5b3=_0x401f82;if(validateAccess(_0x5783b4,_0x23600b)[_0x1ee5b3(0x257)])toggleBot(_0x33bf0c[_0x1ee5b3(0x1b1)],_0x33bf0c['status'],_0x33bf0c[_0x1ee5b3(0xfa)]);else logger['full'](_0x1ee5b3(0x127));}),_0xeeada['on'](_0x401f82(0x183),(_0x1737a1,_0x519025)=>{const _0x52a69e=_0x401f82;if(validateAccess(_0x519025,_0x23600b)[_0x52a69e(0x257)])toggleBotMode(_0x1737a1);else logger[_0x52a69e(0x17d)](_0x52a69e(0x127));}),_0xeeada['on']('delete-bot',(_0x3ee5a6,_0x27c59c)=>{const _0x2af9e0=_0x401f82;if(validateAccess(_0x27c59c,_0x23600b)[_0x2af9e0(0x257)])deleteBot(_0x3ee5a6);else logger[_0x2af9e0(0x17d)](_0x2af9e0(0x244));}),_0xeeada['on'](_0x401f82(0x208),(_0x5eb288,_0x21d3ec)=>{const _0x3cab4d=_0x401f82;if(validateAccess(_0x21d3ec,_0x23600b)[_0x3cab4d(0x257)])storeSettings(_0x5eb288,!![]);else logger['full'](_0x3cab4d(0x1bb));}),_0xeeada['on']('update-bb',_0x255dd2=>{const _0x14aaf4=_0x401f82;if(validateAccess(_0x255dd2,_0x23600b)['allow'])updateBB();else logger[_0x14aaf4(0x17d)](_0x14aaf4(0xe1));}),_0xeeada['on']('get-messages',_0x1e461d=>{const _0x1bbec9=_0x401f82;if(validateAccess(_0x1e461d,_0x23600b)[_0x1bbec9(0x257)])getMessages();else logger[_0x1bbec9(0x17d)](_0x1bbec9(0x20d));}),_0xeeada['on']('confirm-message',(_0x3ce282,_0x267caf)=>{const _0x8ffab8=_0x401f82;if(validateAccess(_0x267caf,_0x23600b)[_0x8ffab8(0x257)])confirmMessage(_0x3ce282);else logger[_0x8ffab8(0x17d)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0xeeada['on'](_0x401f82(0xe9),_0x460aeb=>{const _0x41af50=_0x401f82;if(validateAccess(_0x460aeb,_0x23600b)[_0x41af50(0x257)]){if(devices[_0x23600b][_0x41af50(0x13a)])clearTimeout(devices[_0x23600b]['pidRefreshToken']);if(devices[_0x23600b][_0x41af50(0x18f)])clearTimeout(devices[_0x23600b]['pidExpireLogin']);removeSocketListeners(getClient(_0xeeada['id'])[_0x41af50(0x15e)]),addBlacklist(_0x23600b),devices[_0x23600b]['telegramIpApproval']=null,devices[_0x23600b][_0x41af50(0xdd)]=null,devices[_0x23600b][_0x41af50(0x115)][_0x41af50(0x119)]=null,io['to'](getClient(_0xeeada['id'])[_0x41af50(0x15e)])['emit'](_0x41af50(0x195),{'access':{'allow':![],'reason':_0x41af50(0x16b),'token':null}});}else logger['full'](_0x41af50(0x1b0));});}function initializeSocketBot(_0x29960e){const _0xaefe37=_0x2b5e08,_0x304511=getClient(_0x29960e['id'])[_0xaefe37(0x1ec)],_0x14b089=getClient(_0x29960e['id'])[_0xaefe37(0x15e)];_0x29960e['on'](_0xaefe37(0x1cf),(_0x2fc75c,_0x1d0cca)=>{const _0x1564eb=_0xaefe37;if(validateAccess(_0x1d0cca,_0x14b089)['allow']){if(pid[_0x304511])pid[_0x304511][_0x1564eb(0x21b)]({'function':'emitHistory','args':_0x2fc75c});}else logger[_0x1564eb(0x17d)]('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x29960e['on'](_0xaefe37(0x204),(_0x307c62,_0x397e53)=>{const _0x4dcedf=_0xaefe37;if(validateAccess(_0x397e53,_0x14b089)[_0x4dcedf(0x257)]){if(pid[_0x304511])pid[_0x304511][_0x4dcedf(0x21b)]({'function':_0x4dcedf(0x125),'args':_0x307c62});}else logger['full'](_0x4dcedf(0x1f2));}),_0x29960e['on']('get-portfolio',(_0x341b3f,_0x5a1946)=>{const _0x25586b=_0xaefe37;if(validateAccess(_0x5a1946,_0x14b089)[_0x25586b(0x257)]){if(pid[_0x304511])pid[_0x304511][_0x25586b(0x21b)]({'function':_0x25586b(0x23b),'args':_0x341b3f});}else logger[_0x25586b(0x17d)](_0x25586b(0x14a));}),_0x29960e['on'](_0xaefe37(0x16f),(_0x9a7e28,_0x10a325)=>{const _0x33d2d9=_0xaefe37;if(validateAccess(_0x10a325,_0x14b089)[_0x33d2d9(0x257)]){if(pid[_0x304511])pid[_0x304511]['send']({'function':_0x33d2d9(0x1fb),'args':_0x9a7e28});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x29960e['on'](_0xaefe37(0x1f9),(_0xf3a23b,_0x2c382c)=>{const _0x5c0099=_0xaefe37;if(validateAccess(_0x2c382c,_0x14b089)[_0x5c0099(0x257)]){if(pid[_0x304511])pid[_0x304511][_0x5c0099(0x21b)]({'function':_0x5c0099(0x1f1),'args':_0xf3a23b});}else logger[_0x5c0099(0x17d)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x29960e['on']('get-starting-balances',_0x2631bb=>{const _0xae7727=_0xaefe37;if(validateAccess(_0x2631bb,_0x14b089)['allow']){if(pid[_0x304511])pid[_0x304511][_0xae7727(0x21b)]({'function':_0xae7727(0x1f5),'args':null});}else logger['full'](_0xae7727(0x1a5));}),_0x29960e['on'](_0xaefe37(0x184),(_0x3e9227,_0x59faf7)=>{const _0x106ccb=_0xaefe37;if(validateAccess(_0x59faf7,_0x14b089)[_0x106ccb(0x257)]){if(pid[_0x304511])pid[_0x304511][_0x106ccb(0x21b)]({'function':_0x106ccb(0x1cc),'args':_0x3e9227});}else logger[_0x106ccb(0x17d)](_0x106ccb(0x1d0));}),_0x29960e['on'](_0xaefe37(0x26a),_0x399671=>{const _0xaed8cb=_0xaefe37;if(validateAccess(_0x399671,_0x14b089)[_0xaed8cb(0x257)]){if(pid[_0x304511])pid[_0x304511][_0xaed8cb(0x21b)]({'function':_0xaed8cb(0x1d1),'args':null});}else logger[_0xaed8cb(0x17d)](_0xaed8cb(0x12e));}),_0x29960e['on'](_0xaefe37(0x14e),_0x3eb10f=>{const _0x2482db=_0xaefe37;if(validateAccess(_0x3eb10f,_0x14b089)[_0x2482db(0x257)]){if(pid[_0x304511])pid[_0x304511][_0x2482db(0x21b)]({'function':_0x2482db(0x1a1),'args':null});}else logger[_0x2482db(0x17d)](_0x2482db(0x153));}),_0x29960e['on'](_0xaefe37(0x17f),_0x4cadd2=>{const _0x527aa3=_0xaefe37;if(validateAccess(_0x4cadd2,_0x14b089)[_0x527aa3(0x257)])updateBB();else logger[_0x527aa3(0x17d)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x29960e['on']('get-messages',_0x16755a=>{const _0x10b039=_0xaefe37;if(validateAccess(_0x16755a,_0x14b089)[_0x10b039(0x257)])getMessages();else logger[_0x10b039(0x17d)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x29960e['on'](_0xaefe37(0x1c9),(_0x47f0d4,_0x161a5a)=>{const _0x2a2e92=_0xaefe37;if(validateAccess(_0x161a5a,_0x14b089)[_0x2a2e92(0x257)])confirmMessage(_0x47f0d4);else logger[_0x2a2e92(0x17d)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x29960e['on'](_0xaefe37(0xe9),_0x58a78d=>{const _0x5980c1=_0xaefe37;if(validateAccess(_0x58a78d,_0x14b089)[_0x5980c1(0x257)]){if(devices[_0x14b089][_0x5980c1(0x13a)])clearTimeout(devices[_0x14b089][_0x5980c1(0x13a)]);if(devices[_0x14b089][_0x5980c1(0x18f)])clearTimeout(devices[_0x14b089][_0x5980c1(0x18f)]);removeSocketListeners(getClient(_0x29960e['id'])[_0x5980c1(0x15e)]),addBlacklist(_0x14b089),devices[_0x14b089][_0x5980c1(0x18b)]=null,devices[_0x14b089]['telegram2FaApproval']=null,devices[_0x14b089][_0x5980c1(0x115)]['token']=null,io['to'](getClient(_0x29960e['id'])[_0x5980c1(0x15e)])[_0x5980c1(0x172)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x5980c1(0x1b0));});}function removeSocketListeners(_0x5b70aa){const _0x2fc7de=_0x2b5e08;getClientsWithUuid(_0x5b70aa)[_0x2fc7de(0x12c)](_0x864f18=>{const _0xadf7d3=_0x2fc7de;getSocket(_0x864f18['id'])[_0xadf7d3(0x245)]();});}function cleanSettings(){const _0x3e808f=_0x2b5e08;let _0x57977a=settings;return settings[_0x3e808f(0x166)]&&settings['telegramToken']!=''&&(_0x57977a={..._0x57977a,'telegramToken':_0x3e808f(0x194)}),settings[_0x3e808f(0x165)]&&settings[_0x3e808f(0x165)]!=''&&(_0x57977a={..._0x57977a,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x3e808f(0x165)]==_0x3e808f(0x1e8)||settings[_0x3e808f(0x166)]&&settings['telegramToken']=='***')&&(_0x57977a={..._0x57977a,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x3e808f(0x166)]=='***'}}),_0x57977a;}function updateBB(){const _0xde6795=_0x2b5e08;installingUpdate=!![],config[_0xde6795(0x12c)](_0x1e2575=>{const _0x30beda=_0xde6795;restartBot(_0x1e2575[_0x30beda(0x1b1)]);}),process[_0xde6795(0x21b)]({'update':!![]},_0x70216c=>{});}function startBot(_0xabdd4b,_0x286145,_0x54d8ee){const _0x24fe7f=_0x2b5e08;let _0x305219=![];const _0x135de4=_0xabdd4b[0x0];_0x286145={..._0x286145,'stdio':[_0x24fe7f(0x12d),_0x24fe7f(0x12d),_0x24fe7f(0x12d),_0x24fe7f(0xf0)]},pid[_0x135de4]=childProcess[_0x24fe7f(0x196)](botfile,_0xabdd4b,_0x286145),pid[_0x135de4]['on'](_0x24fe7f(0x160),_0x120502=>{const _0xa4c7c9=_0x24fe7f;switch(Object[_0xa4c7c9(0x1e6)](_0x120502)[0x0]){case _0xa4c7c9(0xe7):updateBotName(_0x135de4,_0x120502['botname']);break;case _0xa4c7c9(0x258):updateBotManager();break;case'status':updateStatus(_0x135de4,_0x120502[_0xa4c7c9(0x195)]);break;case _0xa4c7c9(0xfa):updateLive(_0x135de4,_0x120502['live']);break;case'started':updateLive(_0x135de4,_0x120502['started']),io['to'](_0x135de4)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0xa4c7c9(0x1c7):_0x120502[_0xa4c7c9(0x1c7)]==_0xa4c7c9(0x136)&&restartBot(_0x135de4);_0x120502[_0xa4c7c9(0x1c7)]=='kill'&&toggleBot(_0x135de4,'disabled',_0xa4c7c9(0x249));break;case _0xa4c7c9(0x218):sendTelegram(_0x135de4,_0x120502[_0xa4c7c9(0x218)]);break;case _0xa4c7c9(0x1ee):sendTelegramMsg(_0x120502['telegrammsg']);break;case'function':io['to'](_0x135de4)['emit'](_0x120502[_0xa4c7c9(0x14c)],_0x120502[_0xa4c7c9(0x12f)]);break;}}),pid[_0x135de4]['on'](_0x24fe7f(0x185),function(_0x3e4015){if(_0x305219)return;_0x305219=!![],_0x54d8ee(_0x3e4015);}),pid[_0x135de4]['on']('exit',async function(_0x2a4713){const _0x4dcb2f=_0x24fe7f;if(installingUpdate)return;if(_0x305219)return;_0x305219=!![],_0x54d8ee(null);const _0xe7929=dbConfig[_0x4dcb2f(0x240)]('bots')['find']({'botID':_0x135de4})[_0x4dcb2f(0x267)]();_0xe7929&&(_0xe7929[_0x4dcb2f(0x195)]==_0x4dcb2f(0x10b)||_0xe7929[_0x4dcb2f(0x195)]=='new')&&(await sleep(0x3e8),updateLive(_0x135de4,_0x4dcb2f(0x249)),logger[_0x4dcb2f(0x17d)]('restarting\x20Bot\x20'+_0x135de4),startBot([_0x135de4,userID],{'cwd':bbpath},function(_0x5285ad){const _0x23f813=_0x4dcb2f;if(_0x5285ad)logger[_0x23f813(0x17d)](_0x5285ad);}));});}function stopBot(_0x39c50e){const _0x30335e=_0x2b5e08;getClientsWithBotID(_0x39c50e)[_0x30335e(0x12c)](_0x4f59d7=>{const _0x2d825d=_0x30335e;getSocket(_0x4f59d7['id'])[_0x2d825d(0x123)](!![]),removeClient(_0x4f59d7['id']);}),pid[_0x39c50e]&&(pid[_0x39c50e][_0x30335e(0x155)](),pid[_0x39c50e]=null);}function restartBot(_0x315205){const _0x4bf4ed=_0x2b5e08;if(pid[_0x315205])pid[_0x315205][_0x4bf4ed(0x155)]();}function addBot(){const _0x38f3a6=_0x2b5e08;let _0x2ba590;for(let _0x437ee9=0x1;_0x437ee9<0x3e9;_0x437ee9++){_0x2ba590=_0x437ee9[_0x38f3a6(0x11f)]()[_0x38f3a6(0x174)](0x3,'0');let _0x26feef=config[_0x38f3a6(0x107)](_0x3d43f9=>_0x3d43f9[_0x38f3a6(0x1b1)]==_0x2ba590);if(!_0x26feef)break;}if(_0x2ba590===_0x38f3a6(0x10e)){logger[_0x38f3a6(0x17d)](_0x38f3a6(0x259));return;}logger[_0x38f3a6(0x17d)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x2ba590),dbConfig[_0x38f3a6(0x240)](_0x38f3a6(0x225))[_0x38f3a6(0x25a)]({'botID':_0x2ba590,'botname':'Bot\x20'+_0x2ba590,'status':_0x38f3a6(0x168),'live':''})[_0x38f3a6(0x118)](),startBot([_0x2ba590,userID],{'cwd':bbpath},function(_0x133e3e){const _0x4c4977=_0x38f3a6;if(_0x133e3e)logger[_0x4c4977(0x17d)](_0x133e3e);}),config=getConfiguration(),io['to']('botmanager')[_0x38f3a6(0x172)](_0x38f3a6(0x225),config);}function _0x4cc2(){const _0x4a77ab=['config/','store-headless','binary','storeConfiguration','temporary\x20access\x20timeout','/output-000.log','HTML','telegramUsername','headers','size','f2aRequired','You\x20can\x20use\x20the\x20following\x20commands:\x0a','delete-alerts','privateKey','new-disabled','stringify','store-settings','-performance.json','/status\x20-\x20show\x20bot(s)\x20status\x0a','search','bbvReceive','Unauthorized\x20attempt\x20to\x20get\x20messages','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','startsWith','copyFileSync','Your\x20installation\x20is\x20already\x20up\x20to\x20date','orders','getFullYear','isIPv4MappedAddress','exit','isValid','env','telegram','-----------------------------------------------------------------------------------','accept','send','Unauthorized\x20attempt\x20to\x20download\x20','error\x20while\x20deleting\x20config\x20files:\x20','polling_error','logs','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','max','decrypt','Invalid\x20authentication\x20token\x20(2)','6b67f3d61ee94b8f5c80b4affef4c4d9','bots','axios','loginRequired','lowdb','_data','temp/','Login\x20accepted','simple','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','zip/','once','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','1751802mUJqAf','socket','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','bb-config.json','https://api.ipify.org?format=json','existsSync','name','all','Restore\x20process\x20aborted','crypto','getPortfolio','init','statSync','Token\x20blacklisted','\x20to\x20','get','cloneDeep','host','404\x20Not\x20Found','Unauthorized\x20attempt\x20to\x20delete\x20bot','removeAllListeners','getDate','alias','userid','stopped','readdirSync','Alerts','username','getMinutes','login\x20token\x20generated','322473jMehOu','lastmsgemitted','temporary\x20access\x20not\x20allowed','track','All\x20bots\x20running\x20right\x20now','\x20minutes','clientip','hashSync','allow','updatebotmanager','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','push','1287844MXIkkQ','jsonwebtoken','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','mkdirSync','36HvRAlJ','event','listen','RSA-OAEP','publicKey','Invalid\x20username\x20or\x20IP\x20address','apiSecret','hex','value','alerts','tkn','cancel-loading','/names\x20-\x20show\x20bot\x20names\x0a','show','onText','invalid\x20credentials','sort','Password\x20has\x20been\x20reset\x20to:\x20','secret','828456uVFNgS','apply','No\x20bots\x20running\x20right\x20now','sendMessage','includes','.zip','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','bbUsername','logs/','expiry','getMonth','verify','Notifications\x20disabled','3iTcVJQ','/restart\x20-\x20restart\x20bot(s)\x0a','yargs/yargs','Failed\x20to\x20download\x20','\x20|\x20','Unauthorized\x20attempt\x20to\x20add\x20bot','download','mode','telegram2FaApproval','reload','build','createServer','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','secure','writeFileSync','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','number','remove','botname','lastmsgtelegram','logout','graphql-request','randomFillSync','timestamp','2FA\x20login\x20token\x20generated','blacklist','toIPv4Address','ipc','unlinkSync','output-003.log','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/off\x20-\x20stop\x20bot(s)\x0a','isDirectory','sendFile','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','settings.','login\x20required','live','request','util','set','/:bot','\x20(2)','bb/','params','type','temporary\x20access\x20rejected','entries','Invalid\x20authentication\x20token\x20(1)','backup','find','path','output-001.log','Invalid\x20IP\x20address','enabled','5\x20min','/:bot/coins','1000','output-000.log','conn','success','slice','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','reject','access','index.html','compareSync','write','token','::ffff:127.0.0.1','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bb-settings.json','yes','update-bot','toString','getHours','access\x20timeout','auth','disconnect','initclient','deleteHistoryAlerts','*$1*','Unauthorized\x20attempt\x20to\x20update\x20bot','catch','store','generateKeyPairAsync','1479694UmVCmn','forEach','inherit','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','args','User\x20has\x20been\x20validated','Ok,\x20will\x20send\x20order\x20notifications\x20only','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','rmSync','answerCallbackQuery','warning','restart','user','bot-','argv','pidRefreshToken','replace','/help\x20-\x20show\x20available\x20commands\x0a','password','handshake','Markdown','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','date-fns','length','latestversion','ipv6','/upload-backup','234374gPTjvP','showname','join','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','server','function','reason','show-config','::1','login\x20token\x20valid','/:bot/performance','chat','Unauthorized\x20attempt\x20to\x20show\x20configuration','/on\x20-\x20start\x20bot(s)\x0a','kill','botmanager','constructor','add-bot','temporary\x20token\x20generated','hasOwnProperty','<b>Telegram\x20Bot\x20Status:</b>\x0a','then','telegramEvents','uuid','0.0.0','message','Error:\x20Invalid\x20argument\x20','No\x20authentication\x20token','exp','data','bbPassword','telegramToken','/download/:type','new','files','readFileSync','logged\x20out','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','$1_$2_$3','map','store-configuration','headless','static','emit','toggleBotMode','padStart','parse','whitelist','callback_query','Starting\x20Balance\x20Bot\x20update','removeListener','/:bot/support','min','assign','full','exec','update-bb','from','(((.+)+)+)+$','bot.js','toggle-bot-mode','place-order','error','bbvNew','any','30\x20min','lowdb/adapters/FileSync','-events.json','telegramIpApproval','stopPolling','bb-secure.json','5afMeag','pidExpireLogin','timeshift','backup/','SIGTERM','2FA\x20required','************','status','fork','login','notification','connected','messages','-results.json','15\x20min','api-eu.mixpanel.com','getTime','socket.io','defaults','showConfig','toIPv4MappedAddress','3000','idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','settings','\x20>\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','DEFLATE','randomBytes','getSeconds','child_process','Bot\x20Mgr\x20>\x20','/:bot/configuration','Notifications\x20enabled','Unauthorized\x20attempt\x20to\x20log\x20out','botID','deleted\x20Bot\x20','apiKey','manual','sockets','node-zip','18208600HAzRyc','Yes','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Unauthorized\x20attempt\x20to\x20update\x20settings','whitelistEnabled','remoteAddress','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','telegramEnabled','filter','auto','-config.json','Orders','Notifications\x20disabled\x0a','ipaddr.js','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','stop','format','confirm-message','Allow\x20login\x20from\x20IP\x20address\x20<b>','Ok,\x20will\x20send\x20alert\x20notifications\x20only','placeOrder','/:bot/portfolio','file','get-logs','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','cancelLoading','Invalid\x20Telegram\x20token','output-002.log','running','sign','/disable\x20-\x20disable\x20notifications\x0a','title','split',',\x20must\x20be\x20a\x204\x20digit\x20number','getUTCHours','</b>\x20?','Access\x20enabled\x20for\x20','match','mixpanel','reset-password','NTBA_FIX_319','sendPortfolioTelegram','sortBy','starting\x20bot\x20|\x20Bot\x20','/update\x20-\x20update\x20Balance\x20Bot\x0a','temporaryAccessAllowed','keys','telegramChatId','***','disabled','Bot\x20','Password\x20reset\x20rejected','bot','bcryptjs','telegrammsg','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','use','storeHeadless','Unauthorized\x20attempt\x20to\x20delete\x20alerts','log','\x20mode','getStartingBalances','Restoring\x20bot(s)\x20from\x20backup','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run'];_0x4cc2=function(){return _0x4a77ab;};return _0x4cc2();}function deleteBot(_0x1535a8){const _0x21b0c9=_0x2b5e08;getClientsWithBotID(_0x1535a8)[_0x21b0c9(0x12c)](_0x344a6a=>{getSocket(_0x344a6a['id'])['disconnect'](!![]),removeClient(_0x344a6a['id']);}),dbConfig[_0x21b0c9(0x240)](_0x21b0c9(0x225))[_0x21b0c9(0xe6)]({'botID':_0x1535a8})['write'](),logger['full'](_0x21b0c9(0x1b2)+_0x1535a8),stopBot(_0x1535a8);try{fs['unlinkSync'](path[_0x21b0c9(0x148)](configpath,_0x21b0c9(0x138)+_0x1535a8+'-config.json')),fs[_0x21b0c9(0xf1)](path[_0x21b0c9(0x148)](configpath,'bot-'+_0x1535a8+_0x21b0c9(0x18a))),fs['unlinkSync'](path['join'](configpath,_0x21b0c9(0x138)+_0x1535a8+_0x21b0c9(0x209))),fs['unlinkSync'](path[_0x21b0c9(0x148)](configpath,'bot-'+_0x1535a8+_0x21b0c9(0x19b)));}catch(_0x5f5550){if(_0x5f5550)logger[_0x21b0c9(0x17d)](_0x21b0c9(0x21d),_0x5f5550);}config=getConfiguration(),io['to'](_0x21b0c9(0x156))[_0x21b0c9(0x172)](_0x21b0c9(0x225),config);}function toggleBot(_0x1eecf2,_0x2b541c,_0x301c46){const _0x4a7d5b=_0x2b5e08;dbConfig[_0x4a7d5b(0x240)](_0x4a7d5b(0x225))[_0x4a7d5b(0x107)]({'botID':_0x1eecf2})['assign']({'status':_0x2b541c})['assign']({'live':_0x301c46})[_0x4a7d5b(0x118)]();if(_0x2b541c==_0x4a7d5b(0x10b)||_0x2b541c==_0x4a7d5b(0x168))logger['full']('enabled\x20Bot\x20'+_0x1eecf2),startBot([_0x1eecf2,userID],{'cwd':bbpath},function(_0x353a75){if(_0x353a75)logger['full'](_0x353a75);});else(_0x2b541c==_0x4a7d5b(0x1e9)||_0x2b541c=='new-disabled')&&(logger[_0x4a7d5b(0x17d)]('disabled\x20Bot\x20'+_0x1eecf2),stopBot(_0x1eecf2));config=getConfiguration(),io['to'](_0x4a7d5b(0x156))[_0x4a7d5b(0x172)](_0x4a7d5b(0x225),config);}function toggleStatus(_0x4e0bb9){const _0x26385f=_0x2b5e08;let _0x3f5ec4=dbConfig[_0x26385f(0x240)]('bots')[_0x26385f(0x107)]({'botID':_0x4e0bb9})[_0x26385f(0x267)](),_0x3fae0a;if(_0x3f5ec4[_0x26385f(0x195)]==='enabled')_0x3fae0a=_0x26385f(0x1e9);else{if(_0x3f5ec4[_0x26385f(0x195)]===_0x26385f(0x168))_0x3fae0a='new-disabled';else{if(_0x3f5ec4[_0x26385f(0x195)]===_0x26385f(0x206))_0x3fae0a=_0x26385f(0x168);else{if(_0x3f5ec4['status']==='disabled')_0x3fae0a=_0x26385f(0x10b);}}}return _0x3fae0a;}function updateStatus(_0xc4425c,_0x323a71){const _0x25e0cb=_0x2b5e08;dbConfig['get'](_0x25e0cb(0x225))[_0x25e0cb(0x107)]({'botID':_0xc4425c})[_0x25e0cb(0x17c)]({'status':_0x323a71})[_0x25e0cb(0x118)](),config=getConfiguration(),io['to'](_0x25e0cb(0x156))[_0x25e0cb(0x172)](_0x25e0cb(0x225),config);}function updateLive(_0x35c896,_0x202e07){const _0x2c1885=_0x2b5e08;dbConfig[_0x2c1885(0x240)](_0x2c1885(0x225))[_0x2c1885(0x107)]({'botID':_0x35c896})[_0x2c1885(0x17c)]({'live':_0x202e07})[_0x2c1885(0x118)](),config=getConfiguration(),io['to'](_0x2c1885(0x156))['emit'](_0x2c1885(0x225),config);}function updateBotName(_0x2a6c67,_0x31f850){const _0x1ba846=_0x2b5e08;dbConfig[_0x1ba846(0x240)](_0x1ba846(0x225))[_0x1ba846(0x107)]({'botID':_0x2a6c67})[_0x1ba846(0x17c)]({'botname':_0x31f850})[_0x1ba846(0x118)](),config=getConfiguration(),io['to'](_0x1ba846(0x156))[_0x1ba846(0x172)](_0x1ba846(0x225),config);}function updateBotManager(){const _0x23e02e=_0x2b5e08;config=getConfiguration(),io['to'](_0x23e02e(0x156))[_0x23e02e(0x172)]('bots',config);}function toggleBotMode(_0x24243f){const _0xab442b=_0x2b5e08;if(pid[_0x24243f])pid[_0x24243f][_0xab442b(0x21b)]({'function':_0xab442b(0x173),'args':null});else{const _0x3a2728=configpath+_0xab442b(0x138)+_0x24243f+_0xab442b(0x1c2),_0xd6419d=fs[_0xab442b(0x16a)](_0x3a2728),_0x13f233=JSON['parse'](_0xd6419d),_0x450fbf=_0x13f233[_0xab442b(0x1ec)][0x0][_0xab442b(0x170)];_0x13f233[_0xab442b(0x1ec)][0x0]['headless']=!_0x450fbf;const _0x38a5e3=JSON[_0xab442b(0x207)](_0x13f233,null,0x2);fs['writeFileSync'](_0x3a2728,_0x38a5e3),config=getConfiguration(),io['to'](_0xab442b(0x156))['emit'](_0xab442b(0x225),config);}}function telegramError(_0x1e342e){const _0x44bc85=_0x2b5e08;logger[_0x44bc85(0x22c)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x2ae03d){const _0xc3bc43=_0x2b5e08;if(_0x2ae03d[_0xc3bc43(0x180)]['username']!=settings[_0xc3bc43(0x1ff)]&&'@'+_0x2ae03d['from'][_0xc3bc43(0x24c)]!=settings[_0xc3bc43(0x1ff)])return tgBot['sendMessage'](_0x2ae03d[_0xc3bc43(0x152)]['id'],_0xc3bc43(0x22d),{'parse_mode':_0xc3bc43(0x1fe)})[_0xc3bc43(0x128)](_0x5c5b95=>{telegramError(_0x5c5b95);}),![];return!![];}async function initTelegram(){const _0x5a277c=_0x2b5e08;if(tgBot)tgBot[_0x5a277c(0x18c)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5a277c(0x166)],{'polling':!![]});let _0x41527e=_0x5a277c(0x203);_0x41527e+='\x0a',_0x41527e+='/enable\x20-\x20enable\x20notifications\x0a',_0x41527e+=_0x5a277c(0x1d6),_0x41527e+=_0x5a277c(0xf7),_0x41527e+=_0x5a277c(0xd6),_0x41527e+=_0x5a277c(0x154),_0x41527e+=_0x5a277c(0xf4),_0x41527e+=_0x5a277c(0x1c6),_0x41527e+=_0x5a277c(0x26b),_0x41527e+=_0x5a277c(0x20a),_0x41527e+=_0x5a277c(0x132),_0x41527e+=_0x5a277c(0x1e4),_0x41527e+=_0x5a277c(0x13c);let _0x4e06f3='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x4e06f3+='\x0a',_0x4e06f3+=_0x41527e,tgBot['onText'](/\/start/,_0x357916=>{const _0x18face=_0x5a277c;if(!validateTelegram(_0x357916))return;if(settings[_0x18face(0x1e7)]!=_0x357916[_0x18face(0x152)]['id'])updateSetting(_0x18face(0x1e7),_0x357916['chat']['id']);updateSetting(_0x18face(0x1bf),!![]),tgBot[_0x18face(0x275)](_0x357916[_0x18face(0x152)]['id'],_0x4e06f3)[_0x18face(0x128)](_0x5a6668=>{telegramError(_0x5a6668);});}),tgBot[_0x5a277c(0x26d)](/\/enable/,_0x39c032=>{const _0x2bf236=_0x5a277c;if(!validateTelegram(_0x39c032))return;if(settings['telegramChatId']!=_0x39c032[_0x2bf236(0x152)]['id'])updateSetting(_0x2bf236(0x1e7),_0x39c032[_0x2bf236(0x152)]['id']);updateSetting(_0x2bf236(0x1bf),!![]),tgBot[_0x2bf236(0x275)](_0x39c032[_0x2bf236(0x152)]['id'],_0x2bf236(0x1af))[_0x2bf236(0x128)](_0x3bce30=>{telegramError(_0x3bce30);});}),tgBot[_0x5a277c(0x26d)](/\/config/,async _0x500d47=>{const _0x3edb70=_0x5a277c;if(!validateTelegram(_0x500d47))return;tgBot['removeListener'](_0x3edb70(0x177)),tgBot['sendMessage'](_0x500d47[_0x3edb70(0x152)]['id'],_0x3edb70(0x140),{'reply_markup':{'inline_keyboard':[[{'text':_0x3edb70(0x1c3),'callback_data':_0x3edb70(0x212)},{'text':_0x3edb70(0x24b),'callback_data':'alerts'},{'text':'All','callback_data':_0x3edb70(0x238)}]]}})[_0x3edb70(0x128)](_0x5e29c3=>{telegramError(_0x5e29c3);}),tgBot['on']('callback_query',async _0x25cf51=>{const _0x318168=_0x3edb70,_0x4dea6d=_0x25cf51[_0x318168(0x164)],_0x531cb7=_0x25cf51[_0x318168(0x160)];tgBot[_0x318168(0x134)](_0x25cf51['id'])[_0x318168(0x15c)](async()=>{const _0x2586f9=_0x318168;_0x4dea6d==_0x2586f9(0x212)&&(updateSetting(_0x2586f9(0x15d),_0x2586f9(0x212)),updateSetting(_0x2586f9(0x1bf),!![]),await tgBot[_0x2586f9(0x275)](_0x531cb7[_0x2586f9(0x152)]['id'],_0x2586f9(0x131))[_0x2586f9(0x128)](_0x511342=>{telegramError(_0x511342);}));_0x4dea6d==_0x2586f9(0x268)&&(updateSetting(_0x2586f9(0x15d),_0x2586f9(0x268)),updateSetting(_0x2586f9(0x1bf),!![]),await tgBot[_0x2586f9(0x275)](_0x531cb7[_0x2586f9(0x152)]['id'],_0x2586f9(0x1cb))[_0x2586f9(0x128)](_0x51157e=>{telegramError(_0x51157e);}));_0x4dea6d==_0x2586f9(0x238)&&(updateSetting(_0x2586f9(0x15d),_0x2586f9(0x238)),updateSetting(_0x2586f9(0x1bf),!![]),await tgBot[_0x2586f9(0x275)](_0x531cb7[_0x2586f9(0x152)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x2586f9(0x128)](_0x28f50c=>{telegramError(_0x28f50c);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x531cb7['chat']['id'],_0x2586f9(0xe4))['catch'](_0x3cc665=>{telegramError(_0x3cc665);});}),tgBot[_0x318168(0x179)](_0x318168(0x177));});}),tgBot[_0x5a277c(0x26d)](/\/status/,_0x20600f=>{const _0x29d4c7=_0x5a277c;if(!validateTelegram(_0x20600f))return;const _0x193036=getBotsWithMode();let _0x19907d='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x29d4c7(0x12c)](_0x51ffcc=>{const _0x5368b2=_0x29d4c7,_0x4590c3=_0x193036[_0x5368b2(0x107)](_0x109484=>_0x109484['botID']==_0x51ffcc[_0x5368b2(0x1b1)])[_0x5368b2(0xdc)];_0x19907d+=_0x5368b2(0x1ea)+_0x51ffcc['botID']+':\x20'+_0x51ffcc[_0x5368b2(0x195)]+_0x5368b2(0xd9)+_0x4590c3+_0x5368b2(0xd9)+_0x51ffcc[_0x5368b2(0xfa)]+'\x0a';}),_0x19907d+='\x0a',_0x19907d+=_0x29d4c7(0x15b),_0x19907d+=!settings[_0x29d4c7(0x1bf)]?_0x29d4c7(0x1c4):'Notifications\x20enabled\x0a',_0x19907d+=settings[_0x29d4c7(0x1bf)]?settings[_0x29d4c7(0x15d)]==_0x29d4c7(0x238)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x29d4c7(0x149)+settings[_0x29d4c7(0x15d)]+'\x20only\x0a':'',tgBot[_0x29d4c7(0x275)](_0x20600f[_0x29d4c7(0x152)]['id'],_0x19907d,{'parse_mode':_0x29d4c7(0x1fe)})[_0x29d4c7(0x128)](_0x287850=>{telegramError(_0x287850);});}),tgBot[_0x5a277c(0x26d)](/\/restart/,_0x4d5452=>{const _0x63dd32=_0x5a277c;if(!validateTelegram(_0x4d5452))return;tgBot[_0x63dd32(0x179)](_0x63dd32(0x177));const _0x5421ac=getEnabledBots();if(_0x5421ac[_0x63dd32(0x142)]==0x0)tgBot[_0x63dd32(0x275)](_0x4d5452[_0x63dd32(0x152)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x63dd32(0x128)](_0x2ba596=>{telegramError(_0x2ba596);});else{if(_0x5421ac[_0x63dd32(0x142)]>0x1)_0x5421ac['push']({'botID':_0x63dd32(0x238)});let _0x59d7d1=[],_0xcf0922=[];const _0x3956e6=_0x5421ac[_0x63dd32(0x142)]%0x4==0x0||_0x5421ac[_0x63dd32(0x142)]%0x4==0x3||_0x5421ac['length']%0x3==0x1?0x4:0x3;let _0x5dedbb=0x0;_0x5421ac[_0x63dd32(0x12c)]((_0x369e64,_0x4fc580)=>{const _0x53e67c=_0x63dd32;if(_0x4fc580%_0x3956e6==0x0)_0xcf0922=[];_0xcf0922[_0x53e67c(0x25a)]({'text':_0x369e64['botID']==_0x53e67c(0x238)?'All\x20bots':'Bot\x20'+_0x369e64[_0x53e67c(0x1b1)],'callback_data':_0x369e64[_0x53e67c(0x1b1)]}),_0x4fc580%_0x3956e6==0x0&&(_0x59d7d1[_0x5dedbb]=_0xcf0922,_0x5dedbb++);}),tgBot[_0x63dd32(0x275)](_0x4d5452[_0x63dd32(0x152)]['id'],_0x63dd32(0x25d),{'reply_markup':{'inline_keyboard':_0x59d7d1}})[_0x63dd32(0x128)](_0x57128c=>{telegramError(_0x57128c);}),tgBot['on'](_0x63dd32(0x177),async _0x4d17ce=>{const _0x3261ea=_0x63dd32,_0x2bd2de=_0x4d17ce[_0x3261ea(0x164)],_0x1ec941=_0x4d17ce[_0x3261ea(0x160)];tgBot['answerCallbackQuery'](_0x4d17ce['id'])[_0x3261ea(0x15c)](async()=>{const _0x229b84=_0x3261ea;_0x2bd2de==_0x229b84(0x238)?config[_0x229b84(0x12c)](_0x2e1ffa=>{const _0x97f7a8=_0x229b84;restartBot(_0x2e1ffa[_0x97f7a8(0x1b1)]);}):restartBot(_0x2bd2de);}),tgBot['removeListener'](_0x3261ea(0x177));});}}),tgBot[_0x5a277c(0x26d)](/\/on/,_0x3930e7=>{const _0x1f162a=_0x5a277c;if(!validateTelegram(_0x3930e7))return;tgBot['removeListener'](_0x1f162a(0x177));const _0x15f821=getDisabledBots();if(_0x15f821[_0x1f162a(0x142)]==0x0)tgBot['sendMessage'](_0x3930e7['chat']['id'],_0x1f162a(0x253))[_0x1f162a(0x128)](_0x2ec9c4=>{telegramError(_0x2ec9c4);});else{if(_0x15f821[_0x1f162a(0x142)]>0x1)_0x15f821[_0x1f162a(0x25a)]({'botID':_0x1f162a(0x238)});let _0x52add0=[],_0xd9eaef=[];const _0x5725d1=_0x15f821[_0x1f162a(0x142)]%0x4==0x0||_0x15f821[_0x1f162a(0x142)]%0x4==0x3||_0x15f821[_0x1f162a(0x142)]%0x3==0x1?0x4:0x3;let _0x58210e=0x0;_0x15f821['forEach']((_0x9baf74,_0x20d7f6)=>{const _0x3193d0=_0x1f162a;if(_0x20d7f6%_0x5725d1==0x0)_0xd9eaef=[];_0xd9eaef[_0x3193d0(0x25a)]({'text':_0x9baf74[_0x3193d0(0x1b1)]==_0x3193d0(0x238)?'All\x20bots':_0x3193d0(0x1ea)+_0x9baf74[_0x3193d0(0x1b1)],'callback_data':_0x9baf74['botID']}),_0x20d7f6%_0x5725d1==0x0&&(_0x52add0[_0x58210e]=_0xd9eaef,_0x58210e++);}),tgBot[_0x1f162a(0x275)](_0x3930e7[_0x1f162a(0x152)]['id'],_0x1f162a(0xce),{'reply_markup':{'inline_keyboard':_0x52add0}})[_0x1f162a(0x128)](_0x15eb2f=>{telegramError(_0x15eb2f);}),tgBot['on'](_0x1f162a(0x177),async _0x1e1c78=>{const _0x5de199=_0x1f162a,_0x19d54e=_0x1e1c78['data'],_0x43cbda=_0x1e1c78[_0x5de199(0x160)];tgBot[_0x5de199(0x134)](_0x1e1c78['id'])['then'](async()=>{const _0x2d6924=_0x5de199;_0x19d54e==_0x2d6924(0x238)?(tgBot[_0x2d6924(0x275)](_0x43cbda[_0x2d6924(0x152)]['id'],_0x2d6924(0x1ba))[_0x2d6924(0x128)](_0x290fb6=>{telegramError(_0x290fb6);}),_0x15f821[_0x2d6924(0x12c)](_0x4b40d2=>{const _0x143c6d=_0x2d6924;if(_0x4b40d2[_0x143c6d(0x1b1)]!=_0x143c6d(0x238))toggleBot(_0x4b40d2[_0x143c6d(0x1b1)],toggleStatus(_0x4b40d2[_0x143c6d(0x1b1)]),_0x143c6d(0x249));})):(tgBot[_0x2d6924(0x275)](_0x43cbda[_0x2d6924(0x152)]['id'],_0x2d6924(0x113)+_0x19d54e)[_0x2d6924(0x128)](_0x404681=>{telegramError(_0x404681);}),toggleBot(_0x19d54e,toggleStatus(_0x19d54e),'stopped'));}),tgBot['removeListener'](_0x5de199(0x177));});}}),tgBot[_0x5a277c(0x26d)](/\/off/,_0x499cea=>{const _0x6ce823=_0x5a277c;if(!validateTelegram(_0x499cea))return;tgBot[_0x6ce823(0x179)](_0x6ce823(0x177));const _0x25ef48=getEnabledBots();if(_0x25ef48['length']==0x0)tgBot[_0x6ce823(0x275)](_0x499cea[_0x6ce823(0x152)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x6ce823(0x128)](_0xfd5b3c=>{telegramError(_0xfd5b3c);});else{if(_0x25ef48['length']>0x1)_0x25ef48[_0x6ce823(0x25a)]({'botID':_0x6ce823(0x238)});let _0x5c2498=[],_0x3cabac=[];const _0x44fbdd=_0x25ef48[_0x6ce823(0x142)]%0x4==0x0||_0x25ef48[_0x6ce823(0x142)]%0x4==0x3||_0x25ef48[_0x6ce823(0x142)]%0x3==0x1?0x4:0x3;let _0x3c73fc=0x0;_0x25ef48[_0x6ce823(0x12c)]((_0x4437c4,_0xca6a39)=>{const _0xc4f2e=_0x6ce823;if(_0xca6a39%_0x44fbdd==0x0)_0x3cabac=[];_0x3cabac['push']({'text':_0x4437c4[_0xc4f2e(0x1b1)]==_0xc4f2e(0x238)?'All\x20bots':'Bot\x20'+_0x4437c4['botID'],'callback_data':_0x4437c4[_0xc4f2e(0x1b1)]}),_0xca6a39%_0x44fbdd==0x0&&(_0x5c2498[_0x3c73fc]=_0x3cabac,_0x3c73fc++);}),tgBot[_0x6ce823(0x275)](_0x499cea['chat']['id'],_0x6ce823(0x233),{'reply_markup':{'inline_keyboard':_0x5c2498}})[_0x6ce823(0x128)](_0x44dd6f=>{telegramError(_0x44dd6f);}),tgBot['on']('callback_query',async _0x340536=>{const _0x168161=_0x6ce823,_0x1b9729=_0x340536[_0x168161(0x164)],_0xc3af32=_0x340536[_0x168161(0x160)];tgBot[_0x168161(0x134)](_0x340536['id'])[_0x168161(0x15c)](async()=>{const _0x1ec5cb=_0x168161;_0x1b9729=='all'?(tgBot[_0x1ec5cb(0x275)](_0xc3af32[_0x1ec5cb(0x152)]['id'],_0x1ec5cb(0x20e))[_0x1ec5cb(0x128)](_0x4fc5d7=>{telegramError(_0x4fc5d7);}),_0x25ef48[_0x1ec5cb(0x12c)](_0x2d30b4=>{const _0x505735=_0x1ec5cb;if(_0x2d30b4['botID']!=_0x505735(0x238))toggleBot(_0x2d30b4[_0x505735(0x1b1)],toggleStatus(_0x2d30b4[_0x505735(0x1b1)]),_0x505735(0x249));})):(tgBot['sendMessage'](_0xc3af32['chat']['id'],_0x1ec5cb(0xf3)+_0x1b9729)[_0x1ec5cb(0x128)](_0x307dd2=>{telegramError(_0x307dd2);}),toggleBot(_0x1b9729,toggleStatus(_0x1b9729),'stopped'));}),tgBot[_0x168161(0x179)]('callback_query');});}}),tgBot[_0x5a277c(0x26d)](/\/portfolio/,_0x330fe0=>{const _0xff5716=_0x5a277c;if(!validateTelegram(_0x330fe0))return;tgBot[_0xff5716(0x179)](_0xff5716(0x177));const _0x5961e3=getEnabledBots();if(_0x5961e3['length']==0x0)tgBot[_0xff5716(0x275)](_0x330fe0[_0xff5716(0x152)]['id'],_0xff5716(0x274))[_0xff5716(0x128)](_0x47dee2=>{telegramError(_0x47dee2);});else{if(_0x5961e3[_0xff5716(0x142)]>0x1){let _0x34f79b=[],_0x1a37df=[];const _0xfe6366=_0x5961e3[_0xff5716(0x142)]%0x4==0x0||_0x5961e3['length']%0x4==0x3||_0x5961e3[_0xff5716(0x142)]%0x3==0x1?0x4:0x3;let _0x24cfe5=0x0;_0x5961e3[_0xff5716(0x12c)]((_0x4680a8,_0x307ce6)=>{const _0xd92c9d=_0xff5716;if(_0x307ce6%_0xfe6366==0x0)_0x1a37df=[];_0x1a37df[_0xd92c9d(0x25a)]({'text':_0xd92c9d(0x1ea)+_0x4680a8['botID'],'callback_data':_0x4680a8['botID']}),_0x307ce6%_0xfe6366==0x0&&(_0x34f79b[_0x24cfe5]=_0x1a37df,_0x24cfe5++);}),tgBot['sendMessage'](_0x330fe0[_0xff5716(0x152)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x34f79b}})[_0xff5716(0x128)](_0x11de2e=>{telegramError(_0x11de2e);}),tgBot['on'](_0xff5716(0x177),async _0x282f38=>{const _0x58ef26=_0xff5716,_0x55759f=_0x282f38['data'],_0x527982=_0x282f38[_0x58ef26(0x160)];tgBot[_0x58ef26(0x134)](_0x282f38['id'])[_0x58ef26(0x15c)](async()=>{const _0x491153=_0x58ef26;if(pid[_0x55759f])pid[_0x55759f][_0x491153(0x21b)]({'function':_0x491153(0x1e1),'args':null});}),tgBot[_0x58ef26(0x179)](_0x58ef26(0x177));});}else{const _0x2b8d80=_0x5961e3[0x0]['botID'];if(pid[_0x2b8d80])pid[_0x2b8d80][_0xff5716(0x21b)]({'function':_0xff5716(0x1e1),'args':null});}}}),tgBot['onText'](/\/update/,async _0x25228f=>{const _0x54c0c0=_0x5a277c;if(!validateTelegram(_0x25228f))return;tgBot[_0x54c0c0(0x179)](_0x54c0c0(0x177)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x25228f[_0x54c0c0(0x152)]['id'],_0x54c0c0(0x211))[_0x54c0c0(0x128)](_0x5b9fe7=>{telegramError(_0x5b9fe7);});else!validInstallation?tgBot[_0x54c0c0(0x275)](_0x25228f[_0x54c0c0(0x152)]['id'],_0x54c0c0(0x1ef))[_0x54c0c0(0x128)](_0x18d372=>{telegramError(_0x18d372);}):(tgBot[_0x54c0c0(0x275)](_0x25228f[_0x54c0c0(0x152)]['id'],_0x54c0c0(0x16c),{'reply_markup':{'inline_keyboard':[[{'text':_0x54c0c0(0x1b8),'callback_data':_0x54c0c0(0x11d)},{'text':'No','callback_data':'no'}]]}})[_0x54c0c0(0x128)](_0x1d0529=>{telegramError(_0x1d0529);}),tgBot['on']('callback_query',async _0x1272b3=>{const _0x107969=_0x54c0c0,_0x166545=_0x1272b3[_0x107969(0x164)],_0x1b50fa=_0x1272b3[_0x107969(0x160)];tgBot['answerCallbackQuery'](_0x1272b3['id'])['then'](async()=>{const _0x5621d0=_0x107969;_0x166545=='yes'&&(await tgBot['sendMessage'](_0x1b50fa['chat']['id'],_0x5621d0(0x178))[_0x5621d0(0x128)](_0x180c65=>{telegramError(_0x180c65);}),updateBB());_0x166545=='no'&&await tgBot[_0x5621d0(0x275)](_0x1b50fa[_0x5621d0(0x152)]['id'],_0x5621d0(0x220))[_0x5621d0(0x128)](_0x39be0e=>{telegramError(_0x39be0e);});if(!settings['telegramChatId'])tgBot[_0x5621d0(0x275)](_0x1b50fa[_0x5621d0(0x152)]['id'],_0x5621d0(0xe4))[_0x5621d0(0x128)](_0x1591df=>{telegramError(_0x1591df);});}),tgBot[_0x107969(0x179)](_0x107969(0x177));}));}),tgBot[_0x5a277c(0x26d)](/\/toggle/,_0x9ce6d7=>{const _0x3685bf=_0x5a277c;if(!validateTelegram(_0x9ce6d7))return;tgBot[_0x3685bf(0x179)](_0x3685bf(0x177));const _0x3da7cf=getBotsWithMode();if(_0x3da7cf[_0x3685bf(0x142)]==0x0)tgBot['sendMessage'](_0x9ce6d7[_0x3685bf(0x152)]['id'],_0x3685bf(0x274))[_0x3685bf(0x128)](_0x4c168c=>{telegramError(_0x4c168c);});else{let _0x3e0653=[],_0x2ac1fb=[];const _0x37d563=0x2;let _0x2fb756=0x0;_0x3da7cf[_0x3685bf(0x12c)]((_0x2ef281,_0x29812a)=>{const _0x9fc1db=_0x3685bf;if(_0x29812a%_0x37d563==0x0)_0x2ac1fb=[];_0x2ac1fb[_0x9fc1db(0x25a)]({'text':_0x9fc1db(0x1ea)+_0x2ef281[_0x9fc1db(0x1b1)]+'\x20('+_0x2ef281['mode']+')','callback_data':_0x2ef281['botID']}),_0x29812a%_0x37d563==0x0&&(_0x3e0653[_0x2fb756]=_0x2ac1fb,_0x2fb756++);}),tgBot[_0x3685bf(0x275)](_0x9ce6d7[_0x3685bf(0x152)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x3e0653}})[_0x3685bf(0x128)](_0x42fc51=>{telegramError(_0x42fc51);}),tgBot['on'](_0x3685bf(0x177),async _0x1fe965=>{const _0x301da6=_0x3685bf,_0x43fd3a=_0x1fe965[_0x301da6(0x164)],_0x191f5a=_0x1fe965['message'];tgBot['answerCallbackQuery'](_0x1fe965['id'])['then'](async()=>{const _0x1e2671=_0x301da6,_0x4c9105=_0x3da7cf['find'](_0x4f1cd2=>_0x4f1cd2[_0x1e2671(0x1b1)]==_0x43fd3a),_0x3dfbc4=_0x4c9105[_0x1e2671(0xdc)]==_0x1e2671(0x1c1)?_0x1e2671(0x1b4):_0x1e2671(0x1c1);tgBot[_0x1e2671(0x275)](_0x191f5a[_0x1e2671(0x152)]['id'],_0x1e2671(0x230)+_0x43fd3a+_0x1e2671(0x23f)+_0x3dfbc4+_0x1e2671(0x1f4))[_0x1e2671(0x128)](_0x23455d=>{telegramError(_0x23455d);}),toggleBotMode(_0x43fd3a);}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x5a277c(0x26d)](/\/names/,_0x434bca=>{const _0x242250=_0x5a277c;if(!validateTelegram(_0x434bca))return;let _0x3847f5='';config[_0x242250(0x12c)](_0x393a40=>{const _0x166239=_0x242250;_0x3847f5+=_0x166239(0x1ea)+_0x393a40[_0x166239(0x1b1)]+':\x20'+_0x393a40[_0x166239(0xe7)]+'\x0a';}),tgBot['sendMessage'](_0x434bca['chat']['id'],_0x3847f5,{'parse_mode':'HTML'})[_0x242250(0x128)](_0x1844ab=>{telegramError(_0x1844ab);});}),tgBot['onText'](/\/disable/,_0x3fce33=>{const _0x4b0ee4=_0x5a277c;if(!validateTelegram(_0x3fce33))return;tgBot[_0x4b0ee4(0x275)](_0x3fce33[_0x4b0ee4(0x152)]['id'],_0x4b0ee4(0xd4))[_0x4b0ee4(0x128)](_0x5b871a=>{telegramError(_0x5b871a);}),updateSetting(_0x4b0ee4(0x1bf),![]);}),tgBot[_0x5a277c(0x26d)](/\/help/,_0x387ec3=>{const _0x1e291a=_0x5a277c;if(!validateTelegram(_0x387ec3))return;tgBot[_0x1e291a(0x275)](_0x387ec3['chat']['id'],_0x41527e)[_0x1e291a(0x128)](_0x143295=>{telegramError(_0x143295);});}),tgBot['on'](_0x5a277c(0x21e),_0x451e8b=>{const _0x748cba=_0x5a277c;_0x451e8b[_0x748cba(0x11f)]()[_0x748cba(0x276)](_0x748cba(0x243))&&(logger[_0x748cba(0x17d)](_0x748cba(0x1d2)),tgBot[_0x748cba(0x18c)](),tgBot=null,io['to'](_0x748cba(0x156))[_0x748cba(0x172)](_0x748cba(0x198),_0x748cba(0x1d2)));}),process[_0x5a277c(0x22f)]('SIGINT',()=>{const _0x20b7c3=_0x5a277c;if(tgBot)tgBot['stopPolling']();process[_0x20b7c3(0x215)](0x1);}),process[_0x5a277c(0x22f)](_0x5a277c(0x192),()=>{const _0x5711dc=_0x5a277c;if(tgBot)tgBot[_0x5711dc(0x18c)]();process['exit'](0x1);});}}function disableTelegram(){const _0x2c4ebf=_0x2b5e08;tgBot&&(tgBot[_0x2c4ebf(0x18c)](),tgBot=null);}function sendTelegram(_0x47f349,_0x283170){const _0x563597=_0x2b5e08;if(settings['telegramEnabled']){if(settings[_0x563597(0x15d)]==_0x563597(0x238)||(_0x283170[_0x563597(0x102)]=='error'||_0x283170['type']==_0x563597(0x135)||_0x283170[_0x563597(0x102)]==_0x563597(0x111))&&settings[_0x563597(0x15d)]==_0x563597(0x268)||_0x283170[_0x563597(0x102)]=='order'&&settings[_0x563597(0x15d)]=='orders'){if(tgBot&&settings[_0x563597(0x1e7)]){if(_0x283170[_0x563597(0x147)])tgBot[_0x563597(0x275)](settings['telegramChatId'],_0x283170[_0x563597(0xe7)]+_0x563597(0x1a7)+_0x283170[_0x563597(0x260)])[_0x563597(0x128)](_0x718140=>{telegramError(_0x718140);});else tgBot[_0x563597(0x275)](settings['telegramChatId'],'Bot\x20'+_0x47f349+'\x20>\x20'+_0x283170[_0x563597(0x260)])[_0x563597(0x128)](_0x5597e2=>{telegramError(_0x5597e2);});}}}}async function sendTelegramMsg(_0x115c52,_0x36fa0d='HTML'){const _0x50abe3=_0x2b5e08;return settings[_0x50abe3(0x1bf)]&&tgBot&&settings['telegramChatId']?(await tgBot['sendMessage'](settings[_0x50abe3(0x1e7)],_0x115c52,{'parse_mode':_0x36fa0d})[_0x50abe3(0x128)](_0x3e22f7=>{telegramError(_0x3e22f7);}),!![]):![];}function getDeviceWithIp(_0x1f0045){const _0x5ad46d=_0x2b5e08;return devices[_0x5ad46d(0x107)](_0x1a7a5f=>_0x1a7a5f['ip']===_0x1f0045);}function temporaryAccess2FA(_0x3fa4c6,_0x2949bc){const _0x48f2f8=_0x2b5e08;let _0x3cc7d1=new Date(),_0x341570=![];if(lastIpApproval){if(_0x3cc7d1-lastIpApproval<0x1388)_0x341570=!![];}lastIpApproval=new Date();if(_0x341570)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x48f2f8(0x179)]('callback_query'),tgBot[_0x48f2f8(0x275)](settings[_0x48f2f8(0x1e7)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x2949bc)[_0x48f2f8(0x26c)]+_0x48f2f8(0x1db),{'parse_mode':_0x48f2f8(0x1fe),'reply_markup':{'inline_keyboard':[[{'text':_0x48f2f8(0x10c),'callback_data':'5'},{'text':_0x48f2f8(0x19c),'callback_data':'15'},{'text':_0x48f2f8(0x188),'callback_data':'30'},{'text':'reject','callback_data':_0x48f2f8(0x114)}]]}})[_0x48f2f8(0x128)](_0x135003=>{telegramError(_0x135003);}),tgBot['on'](_0x48f2f8(0x177),async _0x341fa0=>{const _0x12ae4c=_0x48f2f8,_0x14ec50=_0x341fa0[_0x12ae4c(0x164)],_0x1f3d80=_0x341fa0['message'];tgBot['answerCallbackQuery'](_0x341fa0['id'])[_0x12ae4c(0x15c)](async()=>{const _0x5b05c0=_0x12ae4c;devices[_0x3fa4c6][_0x5b05c0(0x18b)]={'clientip':_0x2949bc,'timestamp':new Date()['getTime'](),'expiry':_0x14ec50},_0x14ec50!=_0x5b05c0(0x114)?(await tgBot[_0x5b05c0(0x275)](_0x1f3d80[_0x5b05c0(0x152)]['id'],_0x5b05c0(0x1dc)+_0x14ec50+_0x5b05c0(0x254),{'parse_mode':_0x5b05c0(0x1fe)})[_0x5b05c0(0x128)](_0x7f6c58=>{telegramError(_0x7f6c58);}),io['to'](_0x3fa4c6)[_0x5b05c0(0x172)](_0x5b05c0(0x195),{'access':{'allow':![],'reason':_0x5b05c0(0xde),'token':null}})):(await tgBot[_0x5b05c0(0x275)](_0x1f3d80[_0x5b05c0(0x152)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x55c24f=>{telegramError(_0x55c24f);}),io['to'](_0x3fa4c6)[_0x5b05c0(0x172)](_0x5b05c0(0x195),{'access':{'allow':![],'reason':_0x5b05c0(0x103),'token':null}}));}),tgBot[_0x12ae4c(0x179)](_0x12ae4c(0x177));}));}function loginAccess2FA(_0x533713,_0x690f50){const _0x2060d3=_0x2b5e08;tgBot&&settings[_0x2060d3(0x1e7)]&&(tgBot[_0x2060d3(0x179)](_0x2060d3(0x177)),tgBot[_0x2060d3(0x275)](settings['telegramChatId'],_0x2060d3(0x1ca)+normalizeIP(_0x690f50)[_0x2060d3(0x26c)]+_0x2060d3(0x1db),{'parse_mode':_0x2060d3(0x1fe),'reply_markup':{'inline_keyboard':[[{'text':_0x2060d3(0x21a),'callback_data':loginExpiry},{'text':_0x2060d3(0x114),'callback_data':'reject'}]]}})['catch'](_0x2a9d2e=>{telegramError(_0x2a9d2e);}),tgBot['on'](_0x2060d3(0x177),async _0x23ae2b=>{const _0x3bffe7=_0x2060d3,_0x1c438c=_0x23ae2b['data'],_0x581ede=_0x23ae2b[_0x3bffe7(0x160)];tgBot[_0x3bffe7(0x134)](_0x23ae2b['id'])[_0x3bffe7(0x15c)](async()=>{const _0x3c3e40=_0x3bffe7;devices[_0x533713][_0x3c3e40(0xdd)]={'clientip':_0x690f50,'timestamp':new Date()[_0x3c3e40(0x19e)](),'expiry':_0x1c438c},_0x1c438c!=_0x3c3e40(0x114)?(await tgBot['sendMessage'](_0x581ede[_0x3c3e40(0x152)]['id'],_0x3c3e40(0x22b),{'parse_mode':_0x3c3e40(0x1fe)})['catch'](_0x26caa3=>{telegramError(_0x26caa3);}),io['to'](_0x533713)['emit'](_0x3c3e40(0x195),{'access':{'allow':![],'reason':_0x3c3e40(0xde),'token':null}})):(await tgBot[_0x3c3e40(0x275)](_0x581ede[_0x3c3e40(0x152)]['id'],'Login\x20rejected')[_0x3c3e40(0x128)](_0x2d9fc7=>{telegramError(_0x2d9fc7);}),io['to'](_0x533713)[_0x3c3e40(0x172)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x3bffe7(0x177));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x482976=_0x2b5e08;return dbConfig[_0x482976(0x240)](_0x482976(0x225))['sortBy'](_0x482976(0x1b1))[_0x482976(0x1c0)]({'status':_0x482976(0x10b)})[_0x482976(0x267)]()||[];}function getDisabledBots(){const _0x131ef2=_0x2b5e08;return dbConfig[_0x131ef2(0x240)](_0x131ef2(0x225))[_0x131ef2(0x1e2)]('botID')[_0x131ef2(0x1c0)]({'status':_0x131ef2(0x1e9)})[_0x131ef2(0x267)]()||[];}function getBotAttributes(_0x243225){const _0x72ed1d=_0x2b5e08;let _0x4710e={};const _0x4a18f5=configpath+_0x72ed1d(0x138)+_0x243225+'-config.json',_0x3360b4=fs[_0x72ed1d(0x236)](_0x4a18f5);if(_0x3360b4){const _0x1304a1=fs['readFileSync'](_0x4a18f5);try{const _0x7ac68d=JSON[_0x72ed1d(0x175)](_0x1304a1),_0x381f68=_0x7ac68d?_0x7ac68d[_0x72ed1d(0x1ec)][0x0][_0x72ed1d(0x170)]:![];_0x4710e[_0x72ed1d(0xdc)]=_0x381f68?_0x72ed1d(0x1c1):_0x72ed1d(0x1b4),_0x4710e[_0x72ed1d(0xe7)]=_0x7ac68d?_0x7ac68d[_0x72ed1d(0x1ec)][0x0][_0x72ed1d(0xe7)]:_0x72ed1d(0x1ea)+_0x243225;}catch(_0x5975a2){_0x4710e['mode']='manual',_0x4710e['botname']=_0x72ed1d(0x1ea)+_0x243225;}}else _0x4710e[_0x72ed1d(0xdc)]=_0x72ed1d(0x1b4),_0x4710e[_0x72ed1d(0xe7)]=_0x72ed1d(0x1ea)+_0x243225;return _0x4710e;}function getBotsWithMode(){const _0x59347b=_0x2b5e08,_0xe46b6e=dbConfig[_0x59347b(0x240)]('bots')[_0x59347b(0x1e2)](_0x59347b(0x1b1))[_0x59347b(0x267)]()||[];return _0xe46b6e[_0x59347b(0x12c)](_0x5c559a=>{const _0x452ae0=_0x59347b;let _0x362650=getBotAttributes(_0x5c559a[_0x452ae0(0x1b1)]);_0x5c559a[_0x452ae0(0xdc)]=_0x362650['mode'];}),_0xe46b6e;}async function initUser(){const _0x2beaf8=_0x2b5e08;if(!settings['userid']){const _0x2e80f5=uuidRandom();mixpanel[_0x2beaf8(0x247)](_0x2e80f5),updateSetting(_0x2beaf8(0x248),_0x2e80f5);}}async function initSecure(){const _0x10b2e4=_0x2b5e08;let _0x28c4bb=getSecure();if(!_0x28c4bb['hasOwnProperty'](_0x10b2e4(0x271))){let _0x189769=await generateKeys();_0x28c4bb['publicKey']=_0x189769[_0x10b2e4(0x263)],_0x28c4bb[_0x10b2e4(0x205)]=_0x189769[_0x10b2e4(0x205)],_0x28c4bb[_0x10b2e4(0x271)]=crypto[_0x10b2e4(0x1aa)](0x20)[_0x10b2e4(0x11f)](_0x10b2e4(0x266));;storeSecure(_0x28c4bb);}}function getSettings(){const _0x22e4b7=_0x2b5e08;return dbSettings[_0x22e4b7(0x240)](_0x22e4b7(0x1a6))[_0x22e4b7(0x267)]()||{};}function getSecure(){const _0x5a5fd9=_0x2b5e08;return dbSecure['get'](_0x5a5fd9(0xe2))[_0x5a5fd9(0x267)]()||{};}function getBlacklist(){const _0x296f79=_0x2b5e08;return dbSecure[_0x296f79(0x240)](_0x296f79(0xee))[_0x296f79(0x267)]()||[];}function broadcastToBots(_0x3777bf,_0xc3f689){config['forEach'](_0xa7b954=>{const _0x5af202=_0x6f38;if(_0xa7b954[_0x5af202(0x195)]==_0x5af202(0x10b)&&_0xa7b954[_0x5af202(0xfa)]==_0x5af202(0x1d4)){if(pid[_0xa7b954[_0x5af202(0x1b1)]])pid[_0xa7b954['botID']][_0x5af202(0x21b)]({[_0x3777bf]:_0xc3f689});}});}function storeSettings(_0x5c1b57,_0x2e7410=![]){const _0x1db41d=_0x2b5e08;_0x5c1b57={...settings,..._0x5c1b57};if(_0x2e7410&&_0x5c1b57['bbPassword']!=_0x1db41d(0x194)&&_0x5c1b57['bbPassword']!='***'&&_0x5c1b57[_0x1db41d(0x165)]!=''){const _0x152e82=crypt['decrypt'](secure['privateKey'],_0x5c1b57['bbPassword'])[_0x1db41d(0x160)][_0x1db41d(0x1d8)]('@')[0x0],_0x214742=bcrypt[_0x1db41d(0x256)](_0x152e82,saltRounds);_0x5c1b57={..._0x5c1b57,'bbPassword':_0x214742};}if(_0x2e7410&&_0x5c1b57[_0x1db41d(0x166)]!=_0x1db41d(0x194)&&_0x5c1b57[_0x1db41d(0x166)]!='***'&&_0x5c1b57['telegramToken']!=''){const _0x530534=crypt[_0x1db41d(0x222)](secure[_0x1db41d(0x205)],_0x5c1b57[_0x1db41d(0x166)])[_0x1db41d(0x160)][_0x1db41d(0x1d8)]('@')[0x0];_0x5c1b57={..._0x5c1b57,'telegramToken':_0x530534};}const _0x37c7f7=_0x5c1b57[_0x1db41d(0x166)]!=_0x1db41d(0x194)&&_0x5c1b57[_0x1db41d(0x166)]!=settings['telegramToken']||_0x5c1b57[_0x1db41d(0x1ff)]!=settings[_0x1db41d(0x1ff)],_0x569b70=_0x5c1b57[_0x1db41d(0x166)]==''||_0x5c1b57[_0x1db41d(0x1ff)]=='';if(_0x37c7f7)_0x5c1b57[_0x1db41d(0x15d)]=_0x1db41d(0x238);for(const [_0x2884cd,_0x1e4457]of Object[_0x1db41d(0x104)](_0x5c1b57)){if(_0x2884cd==_0x1db41d(0x166)&&_0x1e4457==_0x1db41d(0x194)){_0x5c1b57['telegramToken']=settings[_0x1db41d(0x166)];continue;};if(_0x2884cd==_0x1db41d(0x165)&&_0x1e4457=='************'){_0x5c1b57[_0x1db41d(0x165)]=settings[_0x1db41d(0x165)];continue;};dbSettings[_0x1db41d(0xfd)](_0x1db41d(0xf8)+_0x2884cd,_0x1e4457)['write']();}settings=_0x5c1b57,io['to'](_0x1db41d(0x156))['emit'](_0x1db41d(0x1a6),cleanSettings()),broadcastToBots(_0x1db41d(0x190),settings[_0x1db41d(0x190)]);if(_0x37c7f7&&!_0x569b70)initTelegram();if(_0x37c7f7&&_0x569b70)disableTelegram();getAllClients()['forEach'](_0x161e17=>{const _0x559165=_0x1db41d;getSocket(_0x161e17['id'])['emit'](_0x559165(0x195),{'access':{'allow':![],'reason':_0x559165(0xde),'token':null}});});}function updateSetting(_0x31cc3b,_0x4eaba7){const _0x51d97b=_0x2b5e08;dbSettings[_0x51d97b(0xfd)]('settings.'+_0x31cc3b,_0x4eaba7)[_0x51d97b(0x118)](),settings=getSettings(),io['to'](_0x51d97b(0x156))[_0x51d97b(0x172)](_0x51d97b(0x1a6),cleanSettings());}function storeSecure(_0x40ae3a){const _0x74a0cd=_0x2b5e08;dbSecure[_0x74a0cd(0x240)](_0x74a0cd(0xe2))['push'](_0x40ae3a)[_0x74a0cd(0x118)](),secure=_0x40ae3a;}function addBlacklist(_0x28e7a4){const _0x333ad1=_0x2b5e08;cleanBlacklist();let _0x519629;devices[_0x28e7a4][_0x333ad1(0x18b)]?_0x519629=Math[_0x333ad1(0x221)](devices[_0x28e7a4][_0x333ad1(0x18b)][_0x333ad1(0xd1)],loginExpiry):_0x519629=loginExpiry,dbSecure['get'](_0x333ad1(0xee))['push']({'expiry':new Date()['getTime']()+_0x519629*0x3c*0x3e8,'token':devices[_0x28e7a4][_0x333ad1(0x115)][_0x333ad1(0x119)]})[_0x333ad1(0x118)](),blacklist=dbSecure[_0x333ad1(0x240)](_0x333ad1(0xee))['value']();}function cleanBlacklist(){const _0xb16704=_0x2b5e08;let _0x5e3be5=dbSecure['get']('blacklist')[_0xb16704(0x241)]()[_0xb16704(0x267)](),_0x354b78=new Date()[_0xb16704(0x19e)]();_0x5e3be5[_0xb16704(0x12c)](_0xc3b7b6=>{const _0x187a76=_0xb16704;_0xc3b7b6['expiry']<_0x354b78&&dbSecure[_0x187a76(0x240)](_0x187a76(0xee))[_0x187a76(0xe6)]({'expiry':_0xc3b7b6['expiry']})[_0x187a76(0x118)]();});}function initStates(){const _0x1da4ec=_0x2b5e08;let _0x44fe9c=getConfiguration();_0x44fe9c[_0x1da4ec(0x12c)](_0xe93f0b=>{const _0x7bb00b=_0x1da4ec;_0xe93f0b[_0x7bb00b(0xfa)]='stopped';}),storeConfiguration(_0x44fe9c);}function onKeys(){const _0x3bab7c=new RSA();return new Promise(_0x40ad7c=>{const _0x5e7b24=_0x6f38;_0x3bab7c[_0x5e7b24(0x12a)]()[_0x5e7b24(0x15c)](_0x522873=>{_0x40ad7c(_0x522873);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x32005d=_0x2b5e08;let _0x36522b=getSettings(),_0x594ddf=![];!_0x36522b['hasOwnProperty'](_0x32005d(0xe8))&&(_0x36522b[_0x32005d(0xe8)]=0x0,_0x594ddf=!![]);!_0x36522b['hasOwnProperty'](_0x32005d(0x250))&&(_0x36522b[_0x32005d(0x250)]=0x0,_0x594ddf=!![]);!_0x36522b['hasOwnProperty'](_0x32005d(0x143))&&(_0x36522b[_0x32005d(0x143)]=_0x32005d(0x15f),_0x594ddf=!![]);if(_0x594ddf)storeSettings(_0x36522b);}function storeConfiguration(_0x5ebdd0){const _0x403f4b=_0x2b5e08;dbConfig[_0x403f4b(0x240)]('bots')[_0x403f4b(0xe6)]()[_0x403f4b(0x118)](),_0x5ebdd0[_0x403f4b(0x12c)](_0x563136=>{delete _0x563136['mode'];}),dbConfig[_0x403f4b(0x240)]('bots')[_0x403f4b(0x25a)](..._0x5ebdd0)['write'](),config=_0x5ebdd0;}function resetPassword(){const _0x48ea38=_0x2b5e08;tgBot&&settings['telegramChatId']&&(tgBot[_0x48ea38(0x179)]('callback_query'),tgBot[_0x48ea38(0x275)](settings[_0x48ea38(0x1e7)],_0x48ea38(0x1a8),{'parse_mode':_0x48ea38(0x1fe),'reply_markup':{'inline_keyboard':[[{'text':_0x48ea38(0x11d),'callback_data':_0x48ea38(0x11d)},{'text':'no','callback_data':'no'}]]}})[_0x48ea38(0x128)](_0x317f26=>{telegramError(_0x317f26);}),tgBot['on'](_0x48ea38(0x177),async _0x4a631a=>{const _0x53b0ba=_0x48ea38,_0x54f303=_0x4a631a[_0x53b0ba(0x164)],_0x149b22=_0x4a631a[_0x53b0ba(0x160)];tgBot[_0x53b0ba(0x134)](_0x4a631a['id'])[_0x53b0ba(0x15c)](async()=>{const _0x39d3d8=_0x53b0ba;if(_0x54f303!='no'){const _0x5d3af7=0xf,_0x3b71a0=_0x39d3d8(0x1be),_0x370c41=Array[_0x39d3d8(0x180)](crypto[_0x39d3d8(0xeb)](new Uint32Array(_0x5d3af7)))[_0x39d3d8(0x16e)](_0x5e9669=>_0x3b71a0[_0x5e9669%_0x3b71a0[_0x39d3d8(0x142)]])['join'](''),_0x547df5=bcrypt[_0x39d3d8(0x256)](_0x370c41,saltRounds);storeSettings({'bbPassword':_0x547df5}),await tgBot[_0x39d3d8(0x275)](_0x149b22[_0x39d3d8(0x152)]['id'],_0x39d3d8(0x270)+_0x370c41,{'parse_mode':_0x39d3d8(0x1fe)})[_0x39d3d8(0x128)](_0xcc3826=>{telegramError(_0xcc3826);});}else await tgBot[_0x39d3d8(0x275)](_0x149b22[_0x39d3d8(0x152)]['id'],_0x39d3d8(0x1eb))['catch'](_0x128373=>{telegramError(_0x128373);});}),tgBot[_0x53b0ba(0x179)](_0x53b0ba(0x177));}));}async function confirmRestore(_0x27c151,_0x401c12){const _0x260f65=_0x2b5e08;tgBot&&settings[_0x260f65(0x1e7)]&&(tgBot[_0x260f65(0x179)](_0x260f65(0x177)),await tgBot[_0x260f65(0x275)](settings[_0x260f65(0x1e7)],_0x260f65(0x1b9),{'parse_mode':_0x260f65(0x1fe),'reply_markup':{'inline_keyboard':[[{'text':_0x260f65(0x11d),'callback_data':_0x260f65(0x11d)},{'text':'no','callback_data':'no'}]]}})[_0x260f65(0x128)](_0x13b8dc=>{telegramError(_0x13b8dc);}),tgBot['on']('callback_query',async _0x5805ad=>{const _0x527f2a=_0x260f65,_0x27ce54=_0x5805ad[_0x527f2a(0x164)],_0x5ff097=_0x5805ad[_0x527f2a(0x160)];tgBot['answerCallbackQuery'](_0x5805ad['id'])[_0x527f2a(0x15c)](async()=>{const _0x2c57d0=_0x527f2a;_0x27ce54==_0x2c57d0(0x11d)?(await tgBot[_0x2c57d0(0x275)](_0x5ff097[_0x2c57d0(0x152)]['id'],_0x2c57d0(0x1f6),{'parse_mode':_0x2c57d0(0x1fe)})[_0x2c57d0(0x128)](_0xef8b19=>{telegramError(_0xef8b19);}),unzipFile(_0x27c151,_0x401c12)):await tgBot[_0x2c57d0(0x275)](_0x5ff097[_0x2c57d0(0x152)]['id'],_0x2c57d0(0x239))['catch'](_0x1eb22e=>{telegramError(_0x1eb22e);});}),tgBot[_0x527f2a(0x179)](_0x527f2a(0x177));}));}function getServerTime(){const _0x581455=_0x2b5e08,_0x2687c9=new Date();return _0x2687c9[_0x581455(0x213)]()+'/'+(_0x2687c9[_0x581455(0xd2)]()+0x1)[_0x581455(0x11f)]()[_0x581455(0x174)](0x2,'0')+'/'+_0x2687c9[_0x581455(0x246)]()[_0x581455(0x11f)]()[_0x581455(0x174)](0x2,'0')+'\x20'+_0x2687c9[_0x581455(0x120)]()[_0x581455(0x11f)]()['padStart'](0x2,'0')+':'+_0x2687c9[_0x581455(0x24d)]()[_0x581455(0x11f)]()[_0x581455(0x174)](0x2,'0')+':'+_0x2687c9[_0x581455(0x1ab)]()[_0x581455(0x11f)]()[_0x581455(0x174)](0x2,'0');}function getTimeStamp(){const _0x1ee199=_0x2b5e08,_0x36bec9=shiftedTime();return _0x36bec9[_0x1ee199(0x213)]()+'/'+(_0x36bec9['getMonth']()+0x1)[_0x1ee199(0x11f)]()[_0x1ee199(0x174)](0x2,'0')+'/'+_0x36bec9[_0x1ee199(0x246)]()[_0x1ee199(0x11f)]()[_0x1ee199(0x174)](0x2,'0')+'\x20'+_0x36bec9['getHours']()[_0x1ee199(0x11f)]()[_0x1ee199(0x174)](0x2,'0')+':'+_0x36bec9['getMinutes']()['toString']()[_0x1ee199(0x174)](0x2,'0')+':'+_0x36bec9[_0x1ee199(0x1ab)]()[_0x1ee199(0x11f)]()[_0x1ee199(0x174)](0x2,'0');}function shiftedTime(){const _0x2cfe7c=_0x2b5e08,_0x1a35f9=new Date();let _0x581798=_0x1a35f9;if(settings[_0x2cfe7c(0x190)]&&settings[_0x2cfe7c(0x190)]!==0x0)_0x581798=fns['add'](_0x1a35f9,{'hours':settings['timeshift']});return _0x581798;}function startScheduler(){const _0x5d0742=_0x2b5e08,_0x18449d=new Date()[_0x5d0742(0x1da)](),_0x36583d=shiftedTime()['getHours']();_0x36583d==0x4&&backupConfigFiles();_0x36583d==0x0&&rotateLogFiles();_0x18449d%0x6==0x0&&triggerAnalytics();_0x18449d%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x2c8b42=_0x2b5e08;fs[_0x2c8b42(0x24a)](configpath,{'withFileTypes':!![]})[_0x2c8b42(0x12c)](_0x49f01c=>{const _0x361740=_0x2c8b42;if(!_0x49f01c[_0x361740(0xf5)]())fs[_0x361740(0x210)](configpath+_0x49f01c['name'],configbackuppath+_0x49f01c[_0x361740(0x237)]);});}function rotateLogFiles(){const _0x3b1a8c=_0x2b5e08,_0xbf9028=fs[_0x3b1a8c(0x23d)](logspath+_0x3b1a8c(0x10f)),_0x19910=_0xbf9028[_0x3b1a8c(0x201)]/0x400;if(_0x19910>0x32){let _0x163e6a=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x163e6a[_0x3b1a8c(0x26f)]((_0x3e5fcb,_0x616773)=>_0x3e5fcb['name']<_0x616773['name']?0x1:_0x616773['name']<_0x3e5fcb[_0x3b1a8c(0x237)]?-0x1:0x0),_0x163e6a['forEach'](_0x15d771=>{const _0x8e9569=_0x3b1a8c;if(_0x15d771[_0x8e9569(0x237)]==_0x8e9569(0x1d3))fs['copyFileSync'](logspath+_0x15d771[_0x8e9569(0x237)],logspath+_0x8e9569(0xf2));if(_0x15d771[_0x8e9569(0x237)]=='output-001.log')fs[_0x8e9569(0x210)](logspath+_0x15d771['name'],logspath+_0x8e9569(0x1d3));_0x15d771[_0x8e9569(0x237)]==_0x8e9569(0x10f)&&(fs['copyFileSync'](logspath+_0x15d771[_0x8e9569(0x237)],logspath+_0x8e9569(0x109)),fs[_0x8e9569(0xe3)](logspath+_0x15d771[_0x8e9569(0x237)],''));});}}async function zipFiles(_0x4f896d){const _0x2f0c91=_0x2b5e08;let _0x334ef8;if(_0x4f896d==_0x2f0c91(0x21f))_0x334ef8=logspath;if(_0x4f896d==_0x2f0c91(0x106))_0x334ef8=configpath;let _0x59ba13=fs[_0x2f0c91(0x24a)](_0x334ef8,{'withFileTypes':!![]});const _0x545278=new require(_0x2f0c91(0x1b6))();_0x59ba13[_0x2f0c91(0x12c)](_0x127a53=>{const _0xe71aca=_0x2f0c91;if(!_0x127a53[_0xe71aca(0xf5)]()){let _0x5bb2a9=fs[_0xe71aca(0x16a)](_0x334ef8+_0x127a53['name']);const _0x460dfb=/^bot-[0-9]{3}-config.json$/,_0x2cf39c=_0x460dfb['test'](_0x127a53[_0xe71aca(0x237)]);if(_0x2cf39c){const _0x187bf1=JSON[_0xe71aca(0x175)](_0x5bb2a9);_0x187bf1[_0xe71aca(0x1ec)][0x0]['apiKey']='***',_0x187bf1[_0xe71aca(0x1ec)][0x0][_0xe71aca(0x265)]='***',_0x5bb2a9=JSON['stringify'](_0x187bf1,null,0x2);}if(_0x127a53[_0xe71aca(0x237)]=='bb-settings.json'){const _0x135b98=JSON[_0xe71aca(0x175)](_0x5bb2a9);if(_0x135b98['settings']['loginRequired'])_0x135b98['settings']['loginRequired']=![];if(_0x135b98[_0xe71aca(0x1a6)][_0xe71aca(0x165)])_0x135b98[_0xe71aca(0x1a6)][_0xe71aca(0x165)]=_0xe71aca(0x1e8);if(_0x135b98[_0xe71aca(0x1a6)][_0xe71aca(0x166)])_0x135b98['settings'][_0xe71aca(0x166)]=_0xe71aca(0x1e8);if(_0x135b98[_0xe71aca(0x1a6)][_0xe71aca(0x1e7)])_0x135b98[_0xe71aca(0x1a6)][_0xe71aca(0x1e7)]=null;_0x5bb2a9=JSON[_0xe71aca(0x207)](_0x135b98,null,0x2);}if(_0x127a53[_0xe71aca(0x237)]!='bb-secure.json')_0x545278[_0xe71aca(0x1ce)](_0x127a53[_0xe71aca(0x237)],_0x5bb2a9);}});const _0x21d8c0=_0x545278['generate']({'base64':![],'compression':_0x2f0c91(0x1a9)});fs[_0x2f0c91(0xe3)](zippath+(_0x4f896d+_0x2f0c91(0xcd)),_0x21d8c0,_0x2f0c91(0x1fa));}async function unzipFile(_0x141857,_0x234960){const _0x2e26ba=_0x2b5e08;await backupConfigFiles(),fs[_0x2e26ba(0x24a)](configpath,{'withFileTypes':!![]})[_0x2e26ba(0x12c)](_0x33424c=>{const _0x40fdd1=_0x2e26ba;if(!_0x33424c[_0x40fdd1(0xf5)]())fs[_0x40fdd1(0x133)](configpath+_0x33424c['name']);});const _0x50ed9f=fs[_0x2e26ba(0x16a)](_0x141857+_0x234960,_0x2e26ba(0x1fa)),_0x296a17=new require('node-zip')(_0x50ed9f,{'base64':![],'checkCRC32':!![]});Object[_0x2e26ba(0x1e6)](_0x296a17[_0x2e26ba(0x169)])[_0x2e26ba(0x12c)](_0x466e57=>{const _0x40c1b5=_0x2e26ba,_0x4371e9=_0x296a17[_0x40c1b5(0x169)][_0x466e57];fs['writeFileSync'](configpath+_0x4371e9[_0x40c1b5(0x237)],_0x4371e9[_0x40c1b5(0x229)]);}),fs[_0x2e26ba(0x24a)](temppath,{'withFileTypes':!![]})[_0x2e26ba(0x12c)](_0x53dab9=>{const _0xd701e2=_0x2e26ba;if(!_0x53dab9[_0xd701e2(0xf5)]())fs['rmSync'](temppath+_0x53dab9[_0xd701e2(0x237)]);}),process[_0x2e26ba(0x21b)]({'restore':!![]},_0x2e5487=>{});}async function getPublicIp(){const _0x4e0bb6=_0x2b5e08;try{const _0x362467=await axios[_0x4e0bb6(0x240)](_0x4e0bb6(0x235));publicip=_0x362467['data']['ip'];}catch(_0x2bba6b){}}async function triggerAnalytics(){const _0x3acc5b=_0x2b5e08;if(!publicip)await getPublicIp();const _0x215a2a=getBotsWithMode();let _0x1eac9a=0x0;_0x215a2a[_0x3acc5b(0x12c)](_0xb04c06=>{const _0x464940=_0x3acc5b;if(_0xb04c06[_0x464940(0x195)]===_0x464940(0x10b))_0x1eac9a++;}),mixpanel[_0x3acc5b(0x252)]('Server',{'distinct_id':settings[_0x3acc5b(0x248)],'ip':publicip,'version':serverversion,'numbots':_0x215a2a[_0x3acc5b(0x142)],'numbotsenabled':_0x1eac9a});}async function getMessages(){const _0x492732=_0x2b5e08,_0x4d5f09='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x31654c=new GraphQLClient(_0x4d5f09),_0x161f40={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x584643=serverversion[_0x492732(0x1d8)]('.'),_0x4203c5=_0x584643[0x0]+'.'+_0x584643[0x1],_0x1b057c=Math[_0x492732(0x17b)](settings['lastmsgtelegram'],settings[_0x492732(0x250)]),_0x5c034d={'last':parseInt(_0x1b057c),'bbm':_0x4203c5},_0x48d39b=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x12e6e0;try{_0x12e6e0=await _0x31654c[_0x492732(0xfb)](_0x48d39b,_0x5c034d,_0x161f40);}catch(_0x3184b3){}if(_0x12e6e0&&_0x12e6e0[_0x492732(0x19a)]){let _0x11f9cc=settings[_0x492732(0xe8)];newMessages=[];for(const _0x5b7b1e of _0x12e6e0['messages']){newMessages[_0x492732(0x25a)](_0x5b7b1e);if(_0x5b7b1e[_0x492732(0x186)])updateSetting(_0x492732(0x143),_0x5b7b1e[_0x492732(0x186)]);let _0x2b138a=_0x5b7b1e[_0x492732(0x186)]?serverversion>=_0x5b7b1e[_0x492732(0x186)]:![];if(!_0x2b138a&&_0x5b7b1e['number']>_0x11f9cc){if(_0x5b7b1e[_0x492732(0x20c)]===_0x492732(0x187)||serverversion[_0x492732(0x20f)](_0x5b7b1e[_0x492732(0x20c)])){let _0x3ac040=''+_0x5b7b1e[_0x492732(0x1d7)]+'\x0a\x0a'+_0x5b7b1e['message'];const _0x3c0adc=await sendTelegramMsg(toTelegramMarkdown(_0x3ac040),_0x492732(0x13f));if(_0x3c0adc)_0x11f9cc=_0x5b7b1e[_0x492732(0xe5)];}}}updateAvailable=isNewerVersion(settings[_0x492732(0x143)],serverversion),updateSetting(_0x492732(0xe8),_0x11f9cc),emitMessages();}}function emitMessages(){const _0x4a3b6d=_0x2b5e08,_0x3e96aa=settings[_0x4a3b6d(0x250)];let _0x2efbd0=[];newMessages['forEach'](_0x1ca051=>{const _0xce8721=_0x4a3b6d;_0x1ca051[_0xce8721(0xe5)]>_0x3e96aa&&_0x2efbd0[_0xce8721(0x25a)](_0x1ca051);}),_0x2efbd0[_0x4a3b6d(0x142)]>0x0&&getAllClients()[_0x4a3b6d(0x12c)](_0x16b081=>{const _0x520f47=_0x4a3b6d;getSocket(_0x16b081['id'])['emit'](_0x520f47(0x160),_0x2efbd0);});}function confirmMessage(_0x1e9a66){const _0x32cc75=_0x2b5e08;updateSetting(_0x32cc75(0x250),Number(_0x1e9a66));}function isNewerVersion(_0x413ef7,_0x88be09){const _0xd546e1=_0x2b5e08,_0x459124=_0x88be09[_0xd546e1(0x1d8)]('.'),_0x574521=_0x413ef7['split']('.');for(var _0x1a74ea=0x0;_0x1a74ea<_0x574521[_0xd546e1(0x142)];_0x1a74ea++){const _0x3ea723=~~_0x574521[_0x1a74ea],_0x1bbb80=~~_0x459124[_0x1a74ea];if(_0x3ea723>_0x1bbb80)return!![];if(_0x3ea723<_0x1bbb80)return![];}return![];}function toTelegramMarkdown(_0x2d1c06){const _0x1c79e8=_0x2b5e08,_0x4a31e4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x341aab=/\*{2}(.+?)\*{2}/gim;return _0x2d1c06=_0x2d1c06['replace'](_0x4a31e4,_0x1c79e8(0x16d))[_0x1c79e8(0x13b)](_0x341aab,_0x1c79e8(0x126)),_0x2d1c06;}async function validateConfigFile(){const _0x4fef41=_0x2b5e08,_0x1af68e=dbConfig[_0x4fef41(0x240)](_0x4fef41(0x225))['sortBy'](_0x4fef41(0x1b1))[_0x4fef41(0x267)]()||[];if(_0x1af68e['length']==0x0){let _0x206bc4=0x0,_0x30407a=[];const _0x4b064b=/^bot-([0-9]{3})-config.json$/,_0x452ec3=fs['readdirSync'](configpath);_0x452ec3['forEach'](_0xa1a6aa=>{const _0x3ced65=_0x4fef41,_0x5c2766=_0x4b064b[_0x3ced65(0x17e)](_0xa1a6aa);if(_0x5c2766){const _0x1e8363=_0x5c2766[0x1];let _0x491695=getBotAttributes(_0x1e8363);_0x30407a['push']({'botID':_0x1e8363,'botname':_0x491695['botname'],'status':'disabled','live':'stopped'}),_0x206bc4++;}}),_0x206bc4!=0x0&&(dbConfig[_0x4fef41(0x240)](_0x4fef41(0x225))[_0x4fef41(0x17c)](_0x30407a)[_0x4fef41(0x118)](),config=_0x30407a,restoredConfigFile=_0x206bc4);}}async function restoreConfigNotify(_0xdac2b6){const _0x2c2ab4=_0x2b5e08;let _0x1b29bd;if(restoredConfigFile==0x1)_0x1b29bd=_0x2c2ab4(0x1f7);else _0x1b29bd='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0xdac2b6)io['to'](_0x2c2ab4(0x156))['emit'](_0x2c2ab4(0x198),_0x1b29bd);else{logger[_0x2c2ab4(0x22c)](_0x2c2ab4(0x219)),logger['simple'](_0x1b29bd),logger[_0x2c2ab4(0x22c)](_0x2c2ab4(0x219)),logger[_0x2c2ab4(0x22c)]('');if(tgBot&&settings[_0x2c2ab4(0x1e7)]&&settings[_0x2c2ab4(0x15d)]!=_0x2c2ab4(0x212))tgBot[_0x2c2ab4(0x275)](settings[_0x2c2ab4(0x1e7)],_0x2c2ab4(0x1ad)+_0x1b29bd)[_0x2c2ab4(0x128)](_0xddf903=>{telegramError(_0xddf903);});}}function validateCredentials(_0x1563e7,_0x135318){const _0x1162f0=_0x2b5e08;if(_0x1563e7['username']==settings[_0x1162f0(0xcf)]&&bcrypt[_0x1162f0(0x117)](_0x1563e7[_0x1162f0(0x13d)],settings[_0x1162f0(0x165)])){if(settings[_0x1162f0(0x202)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x256f7b=generateLoginToken(_0x135318);return{'allow':!![],'reason':_0x1162f0(0x24e),'token':_0x256f7b};}}else return{'allow':![],'reason':_0x1162f0(0x26e),'token':null};}function refreshToken(_0x5a3e1f){const _0x4a2e1a=_0x2b5e08,_0x508a16=generateLoginToken(_0x5a3e1f);return{'allow':!![],'reason':_0x4a2e1a(0x24e),'token':_0x508a16};}function validateAccess(_0x4e5791,_0x2175c9,_0x439082){const _0x42e786=_0x2b5e08,_0x5a6805=_0x439082?_0x439082:devices[_0x2175c9]['ip'];let _0x5e109e;const _0x3d2567=_0x22dece=>{const _0x14d820=_0x6f38;if(settings[_0x14d820(0x227)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2175c9)){const _0x104451=generateLoginToken(_0x2175c9);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x104451};}else return{'allow':![],'reason':_0x14d820(0xf9),'token':null};}else return _0x5e109e=validToken(_0x22dece,_0x2175c9),_0x5e109e[_0x14d820(0x15a)](_0x14d820(0x111))?{'allow':!![],'reason':_0x14d820(0x150),'token':_0x22dece}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x42e786(0x1bc)]){let _0x3ffc95=[...settings[_0x42e786(0x176)],_0x42e786(0x14f),_0x42e786(0x11a),'127.0.0.1'];if(_0x3ffc95[_0x42e786(0x276)](_0x5a6805))return _0x3d2567(_0x4e5791);else{_0x5e109e=validToken(_0x4e5791,_0x2175c9);if(_0x5e109e['hasOwnProperty'](_0x42e786(0x111)))return _0x3d2567(_0x4e5791);else{if(telegramIpApproved(_0x2175c9)){const _0x272567=generateToken(_0x2175c9);return _0x5e109e=_0x3d2567(_0x4e5791),_0x5e109e[_0x42e786(0x257)]?{'allow':!![],'reason':_0x42e786(0x159),'token':_0x272567}:_0x5e109e;}else return settings[_0x42e786(0x1e5)]?{'allow':![],'reason':_0x42e786(0x193),'token':null}:{'allow':![],'reason':_0x42e786(0x251),'token':null};}}}else return _0x3d2567(_0x4e5791);}function timelyDecrypt(_0x515ed4,_0x3a1230=!![]){const _0x556c03=_0x2b5e08;if(_0x515ed4)try{const _0x170c16=crypt['decrypt'](secure[_0x556c03(0x205)],_0x515ed4)['message'],_0x5b2969=_0x170c16[_0x556c03(0x1d8)]('@')[0x0],_0x5c882d=_0x170c16[_0x556c03(0x1d8)]('@')[0x1],_0x29e90b=new Date()[_0x556c03(0x19e)]();if(_0x3a1230){if(_0x29e90b-_0x5c882d<maxSecretAge*0x3e8)return _0x5b2969;else return![];}else return _0x5b2969;}catch(_0x59ccf2){return![];}else return![];}const validToken=(_0x2793b3,_0x1ed824)=>{const _0x2246ce=_0x2b5e08,_0x496204=devices[_0x1ed824]['ip'];if(!_0x2793b3)return{'error':_0x2246ce(0x162)};for(let _0x4afb81 of blacklist){if(_0x4afb81[_0x2246ce(0x119)]==_0x2793b3)return{'error':_0x2246ce(0x23e)};}let _0x3507d4;try{_0x3507d4=jwt[_0x2246ce(0xd3)](_0x2793b3,secure[_0x2246ce(0x271)]+_0x1ed824);}catch{return{'error':_0x2246ce(0x105)};}if(!_0x3507d4[_0x2246ce(0x15a)](_0x2246ce(0x255))&&!_0x3507d4[_0x2246ce(0x15a)](_0x2246ce(0x24c))||!_0x3507d4[_0x2246ce(0x15a)](_0x2246ce(0x163)))return{'error':_0x2246ce(0x223)};if(!_0x3507d4[_0x2246ce(0x15a)](_0x2246ce(0x24c))&&_0x3507d4['hasOwnProperty'](_0x2246ce(0x255))){const {clientip:_0x383971}=_0x3507d4;return _0x496204==_0x383971?{'success':_0x2246ce(0x130)}:{'error':_0x2246ce(0x10a)};}else{if(_0x3507d4['hasOwnProperty'](_0x2246ce(0x24c))&&_0x3507d4[_0x2246ce(0x15a)](_0x2246ce(0x255))){const {username:_0x198e05,clientip:_0x4615eb}=_0x3507d4;return settings[_0x2246ce(0xcf)]==_0x198e05&&_0x496204==_0x4615eb?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2246ce(0x264)};}}},generateLoginToken=_0x49dd55=>{const _0x3f6a20=_0x2b5e08;if(_0x49dd55){const _0x5221bb=devices[_0x49dd55]['ip'];return jwt[_0x3f6a20(0x1d5)]({'username':settings[_0x3f6a20(0xcf)],'clientip':_0x5221bb},secure[_0x3f6a20(0x271)]+_0x49dd55,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2ead94=>{const _0x3f576e=_0x2b5e08;if(_0x2ead94){const _0xf70547=devices[_0x2ead94]['ip'];return jwt[_0x3f576e(0x1d5)]({'clientip':_0xf70547},secure[_0x3f576e(0x271)]+_0x2ead94,{'expiresIn':devices[_0x2ead94][_0x3f576e(0x18b)][_0x3f576e(0xd1)]*0x3c});}else return![];},telegramIpApproved=_0x1f7488=>{const _0x2f9274=_0x2b5e08;let _0x10994a=![];return devices[_0x1f7488]['telegramIpApproval']&&devices[_0x1f7488][_0x2f9274(0x18b)][_0x2f9274(0xd1)]!=_0x2f9274(0x114)&&(_0x10994a=devices[_0x1f7488]['telegramIpApproval'][_0x2f9274(0x255)]==devices[_0x1f7488]['ip']&&new Date()[_0x2f9274(0x19e)]()-devices[_0x1f7488]['telegramIpApproval']['timestamp']<devices[_0x1f7488][_0x2f9274(0x18b)][_0x2f9274(0xd1)]*0x3c*0x3e8),_0x10994a;},telegram2FaApproved=_0x4f0f19=>{const _0x2ca5e8=_0x2b5e08;let _0x6becd5=![];return devices[_0x4f0f19][_0x2ca5e8(0xdd)]&&devices[_0x4f0f19][_0x2ca5e8(0xdd)]['expiry']!='reject'&&(_0x6becd5=devices[_0x4f0f19][_0x2ca5e8(0xdd)][_0x2ca5e8(0x255)]==devices[_0x4f0f19]['ip']&&new Date()[_0x2ca5e8(0x19e)]()-devices[_0x4f0f19][_0x2ca5e8(0xdd)][_0x2ca5e8(0xec)]<devices[_0x4f0f19][_0x2ca5e8(0xdd)]['expiry']*0x3c*0x3e8),_0x6becd5;},normalizeIP=_0x31c909=>{const _0x1bdffa=_0x2b5e08;let _0x4edf51=null,_0x49dcce=null;if(ipaddr[_0x1bdffa(0x216)](_0x31c909)){const _0x5dba68=ipaddr[_0x1bdffa(0x175)](_0x31c909);_0x5dba68['kind']()===_0x1bdffa(0x144)?(_0x5dba68[_0x1bdffa(0x214)]()&&(_0x4edf51=_0x5dba68[_0x1bdffa(0xef)]()[_0x1bdffa(0x11f)]()),_0x49dcce=_0x5dba68[_0x1bdffa(0x11f)]()):(_0x4edf51=_0x5dba68[_0x1bdffa(0x11f)](),_0x49dcce=_0x5dba68[_0x1bdffa(0x1a2)]()['toString']());}return{'show':_0x4edf51?_0x4edf51:_0x49dcce,'store':_0x49dcce};};function sleep(_0x42c996){return new Promise(_0xaf03ab=>setTimeout(_0xaf03ab,_0x42c996));}