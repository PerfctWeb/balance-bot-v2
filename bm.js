const _0x11d260=_0x5bdf;(function(_0xf13b56,_0x1ae2c3){const _0x21b491=_0x5bdf,_0x5df25c=_0xf13b56();while(!![]){try{const _0x384614=parseInt(_0x21b491(0x146))/0x1+-parseInt(_0x21b491(0x24f))/0x2+parseInt(_0x21b491(0x214))/0x3+parseInt(_0x21b491(0x1f8))/0x4*(-parseInt(_0x21b491(0x285))/0x5)+parseInt(_0x21b491(0x1a5))/0x6+parseInt(_0x21b491(0x1b3))/0x7*(-parseInt(_0x21b491(0x1b2))/0x8)+parseInt(_0x21b491(0x219))/0x9*(-parseInt(_0x21b491(0x107))/0xa);if(_0x384614===_0x1ae2c3)break;else _0x5df25c['push'](_0x5df25c['shift']());}catch(_0x377839){_0x5df25c['push'](_0x5df25c['shift']());}}}(_0x27bc,0x86114));const _0x599727=function(){let _0x4e13ef=!![];return function(_0x32e96f,_0x314d05){const _0x40bc05=_0x4e13ef?function(){const _0x3da24e=_0x5bdf;if(_0x314d05){const _0x4f3086=_0x314d05[_0x3da24e(0x190)](_0x32e96f,arguments);return _0x314d05=null,_0x4f3086;}}:function(){};return _0x4e13ef=![],_0x40bc05;};}(),_0x2312f5=_0x599727(this,function(){const _0x338615=_0x5bdf;return _0x2312f5[_0x338615(0x287)]()[_0x338615(0xbc)](_0x338615(0x136))[_0x338615(0x287)]()[_0x338615(0x1b4)](_0x2312f5)['search'](_0x338615(0x136));});_0x2312f5();'use strict';process[_0x11d260(0xdc)][_0x11d260(0xc6)]=0x1;const childProcess=require(_0x11d260(0x10d)),fs=require('fs'),fns=require(_0x11d260(0x231)),low=require(_0x11d260(0x262)),FileSync=require(_0x11d260(0xc5)),path=require('path'),crypto=require('crypto'),forge=require(_0x11d260(0x181)),bcrypt=require('bcryptjs'),jwt=require(_0x11d260(0x192)),ipaddr=require(_0x11d260(0x273)),argv=require(_0x11d260(0x1cc))(process[_0x11d260(0xec)][_0x11d260(0x246)](0x2))[_0x11d260(0xec)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x11d260(0x1c2)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0x11d260(0x89)),util=require('util'),fileUpload=require(_0x11d260(0x247)),{networkInterfaces}=require('os'),JSZip=require(_0x11d260(0x242)),PORT=argv[_0x11d260(0xb5)]||_0x11d260(0x110),pattern=/^[0-9]{2,4}$/;!pattern[_0x11d260(0x204)](PORT)&&(console['log'](_0x11d260(0xdd)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x11d260(0x141)](0x1));const HOST=argv[_0x11d260(0x163)]||null,userID=argv[_0x11d260(0x92)]||'',debugging=argv['d']||![],nodeversion=process[_0x11d260(0x173)][_0x11d260(0x133)];let bbpath='bb/',bbpath2='';const botfile=_0x11d260(0x230),configfile=_0x11d260(0x1d3),settingsfile=_0x11d260(0x145),securefile=_0x11d260(0xbf),environment=require('./'+bbpath2+_0x11d260(0x20b))['environment']||_0x11d260(0x85),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x11d260(0x19c)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x11d260(0x1f7)),configpath=userID?bbpath+_0x11d260(0xe1)+userID+'/':bbpath+_0x11d260(0xe1),configbackuppath=configpath+_0x11d260(0x12c),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x11d260(0x202),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x11d260(0x283),loggerfile=fs[_0x11d260(0x24b)](logspath+_0x11d260(0x1b8),{'flags':'a'}),temppath=userID?bbpath+_0x11d260(0x12a)+userID+'/':bbpath+_0x11d260(0x12a);!fs['existsSync'](configpath)&&fs[_0x11d260(0x149)](configpath);!fs[_0x11d260(0x19c)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x11d260(0x149)](logspath);!fs[_0x11d260(0x19c)](zippath)&&fs[_0x11d260(0x149)](zippath);!fs[_0x11d260(0x19c)](temppath)&&fs[_0x11d260(0x149)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x11d260(0x154)]({'bots':[]})[_0x11d260(0x27f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x11d260(0x154)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x11d260(0x27f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x11d260(0x255),{'host':_0x11d260(0x161)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x11d260(0xa6)]!=''&&settings[_0x11d260(0xa6)]!='***')&&settings[_0x11d260(0xf3)]&&settings[_0x11d260(0xf3)]!='')initTelegram();const parseColor=(_0x3e045b,_0x4384cd)=>{const _0x48d028=_0x11d260,_0x2abe76=/#[A-Z]{3}#/g;if(typeof _0x3e045b==_0x48d028(0x1e8)){!_0x4384cd?_0x3e045b=_0x3e045b[_0x48d028(0x27a)](_0x2abe76,''):(_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#BLU#/g,_0x48d028(0x188)),_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#RED#/g,_0x48d028(0x16e)),_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#YEL#/g,_0x48d028(0x26e)),_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#MAG#/g,_0x48d028(0x142)),_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#CYA#/g,'\x1b[36m'),_0x3e045b=_0x3e045b[_0x48d028(0x27a)](/#RES#/g,_0x48d028(0x12f)));;}return _0x3e045b;},logger={'screen':_0x106514=>{const _0x3e901e=_0x11d260;console[_0x3e901e(0x278)](parseColor(_0x106514,!![]));},'simple':_0x47a460=>{const _0x105eb3=_0x11d260;console['log'](parseColor(_0x47a460,!![])),loggerfile[_0x105eb3(0x27f)](util[_0x105eb3(0xfa)](parseColor(_0x47a460,![]))+'\x0a');},'full':async _0x598b7e=>{const _0x2095c3=_0x11d260,_0x2a15b9=getTimeStamp()+_0x2095c3(0xfb)+_0x598b7e;console[_0x2095c3(0x278)](parseColor(_0x2a15b9,!![])),loggerfile[_0x2095c3(0x27f)](util[_0x2095c3(0xfa)](parseColor(_0x2a15b9,![]))+'\x0a');if(tgBot&&settings[_0x2095c3(0x91)]&&settings[_0x2095c3(0xa0)]!=_0x2095c3(0xb2))await sendTelegram(settings[_0x2095c3(0x91)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x598b7e,![]));},'debug':async(_0xa92182,_0x5f1c40='')=>{const _0x3f8452=_0x11d260,_0x52a10e=getTimeStamp()+_0x3f8452(0x1aa)+_0xa92182;if(debugging)console['log'](parseColor(_0x52a10e,!![]));loggerfile['write'](util[_0x3f8452(0xfa)](parseColor(_0x52a10e,![]))+'\x0a');if(_0x5f1c40){if(debugging)console[_0x3f8452(0x278)](_0x5f1c40);loggerfile[_0x3f8452(0x27f)](util['format'](_0x5f1c40)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0xef7cdb){const _0x46ab5d=_0x11d260;_0xef7cdb[_0x46ab5d(0x287)]()[_0x46ab5d(0x274)](_0x46ab5d(0xc0))?(logger['simple'](_0x46ab5d(0x151)+_0xef7cdb[_0x46ab5d(0xb5)]+_0x46ab5d(0x234)),process[_0x46ab5d(0xb9)]({'terminate':!![]},_0x44734d=>{})):logger[_0x46ab5d(0x1fd)](_0xef7cdb);}),process['on']('exit',()=>{const _0x1fc8ff=_0x11d260;stopAllBots(),process[_0x1fc8ff(0x141)](0x0);}),process['on'](_0x11d260(0x8a),()=>{const _0x58b150=_0x11d260;stopAllBots(),process[_0x58b150(0x141)](0x0);}),process['on']('SIGINT',()=>{const _0x36c404=_0x11d260;stopAllBots(),process[_0x36c404(0x141)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x11d260(0xd5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x11d260(0x27e))[_0x11d260(0x13c)](app);app[_0x11d260(0x126)](fileUpload({'useTempFiles':!![]})),app[_0x11d260(0x111)](_0x11d260(0x1d7),async(_0x43d8f2,_0x36c6a5)=>{const _0x207219=_0x11d260,_0x49c7e4=_0x43d8f2[_0x207219(0x211)][_0x207219(0x118)],_0x263d12=getClientsWithBotID(_0x207219(0x10a)),_0x8ff954=_0x43d8f2['headers'][_0x207219(0x254)],_0x8a01e1=timelyDecrypt(_0x8ff954,![]),_0x2cac1d=_0x263d12['find'](_0x39d9e0=>_0x39d9e0['uuid']==_0x8a01e1);if(_0x2cac1d){const _0x328b91=normalizeIP(_0x43d8f2['socket'][_0x207219(0xe5)])[_0x207219(0x152)],_0x284a23=_0x43d8f2[_0x207219(0xd7)][_0x207219(0x1c6)];if(validateAccess(_0x284a23,_0x8a01e1,_0x328b91)[_0x207219(0x20d)])_0x49c7e4==_0x207219(0x25d)&&await backupConfigFiles(),await zipFiles(_0x49c7e4),_0x36c6a5[_0x207219(0x11b)](zippath+(_0x49c7e4+_0x207219(0x9d)),_0x236fa=>{const _0x5e63ef=_0x207219;_0x236fa&&(logger[_0x5e63ef(0x1da)](_0x5e63ef(0x17f)+_0x49c7e4),logger['simple'](_0x236fa));});else logger['full'](_0x207219(0x130)+_0x49c7e4+_0x207219(0x201));}else logger[_0x207219(0x1da)](_0x207219(0x130)+_0x49c7e4+_0x207219(0x100));}),app[_0x11d260(0x108)](_0x11d260(0x263),async(_0xf6ce3c,_0xf8b4f4)=>{const _0x4d739c=_0x11d260,_0x40bec4=getClientsWithBotID(_0x4d739c(0x10a)),_0x497c5f=_0xf6ce3c[_0x4d739c(0xd7)][_0x4d739c(0x254)],_0x5b6128=timelyDecrypt(_0x497c5f,![]),_0x565f5c=_0x40bec4[_0x4d739c(0x261)](_0x246931=>_0x246931[_0x4d739c(0x254)]==_0x5b6128);logger[_0x4d739c(0x13e)](_0x4d739c(0xc2));if(_0x565f5c){const _0x1660cb=normalizeIP(_0xf6ce3c['socket'][_0x4d739c(0xe5)])[_0x4d739c(0x152)],_0x4bdabf=_0xf6ce3c[_0x4d739c(0xd7)]['tkn'];if(validateAccess(_0x4bdabf,_0x5b6128,_0x1660cb)[_0x4d739c(0x20d)]){if(_0xf6ce3c[_0x4d739c(0xcd)]){const _0x12f3ce=_0xf6ce3c[_0x4d739c(0xcd)][_0x4d739c(0x28e)];await _0x12f3ce['mv'](temppath+_0x12f3ce[_0x4d739c(0xd4)]),_0xf8b4f4['send']({'status':!![],'message':'File\x20uploaded'});const _0x2633b4=getBotsWithMode();_0x2633b4['length']>0x0?confirmRestore(temppath,_0x12f3ce[_0x4d739c(0xd4)]):unzipFile(temppath,_0x12f3ce[_0x4d739c(0xd4)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x4d739c(0xf5));}),app[_0x11d260(0x126)](express[_0x11d260(0x134)](path[_0x11d260(0x103)](__dirname,bbpath2,_0x11d260(0x98)))),app[_0x11d260(0x126)](express[_0x11d260(0x134)](path[_0x11d260(0x103)](__dirname,bbpath2,_0x11d260(0x1b1)))),app['get']('/',function(_0x1dc30,_0x591866){const _0x378e69=_0x11d260;_0x591866[_0x378e69(0x1ae)](path[_0x378e69(0x103)](__dirname,bbpath2,_0x378e69(0x98),'index.html'));}),app[_0x11d260(0x111)]('/:bot',function(_0x7abddc,_0x19c012){const _0x42de7a=_0x11d260;_0x19c012[_0x42de7a(0x1ae)](path[_0x42de7a(0x103)](__dirname,bbpath2,_0x42de7a(0x1b1),_0x42de7a(0x251)));}),app[_0x11d260(0x111)]('/:bot/portfolio',(_0xc4673d,_0x2cc879)=>{const _0x18505c=_0x11d260;_0x2cc879[_0x18505c(0x1ae)](path[_0x18505c(0x103)](__dirname,bbpath2,_0x18505c(0x1b1),_0x18505c(0x251)));}),app[_0x11d260(0x111)](_0x11d260(0x21a),(_0x39445f,_0x4d3338)=>{const _0x1f0c2e=_0x11d260;_0x4d3338[_0x1f0c2e(0x1ae)](path[_0x1f0c2e(0x103)](__dirname,bbpath2,_0x1f0c2e(0x1b1),'index.html'));}),app[_0x11d260(0x111)](_0x11d260(0x82),(_0x33ce07,_0x4e1d81)=>{const _0x2ca448=_0x11d260;_0x4e1d81['sendFile'](path[_0x2ca448(0x103)](__dirname,bbpath2,_0x2ca448(0x1b1),'index.html'));}),app[_0x11d260(0x111)](_0x11d260(0xea),(_0x174969,_0x2ad164)=>{const _0x17ff39=_0x11d260;_0x2ad164[_0x17ff39(0x1ae)](path[_0x17ff39(0x103)](__dirname,bbpath2,_0x17ff39(0x1b1),_0x17ff39(0x251)));}),app[_0x11d260(0x111)](_0x11d260(0x1cd),(_0x30d43f,_0x5e49b7)=>{const _0x2d48c3=_0x11d260;_0x5e49b7[_0x2d48c3(0x1ae)](path['join'](__dirname,bbpath2,_0x2d48c3(0x1b1),_0x2d48c3(0x251)));}),app[_0x11d260(0x111)](_0x11d260(0x1b0),(_0x20ab28,_0x3e8825)=>{const _0x46f722=_0x11d260;_0x3e8825[_0x46f722(0x1ae)](path[_0x46f722(0x103)](__dirname,bbpath2,_0x46f722(0x1b1),'index.html'));});if(HOST)http[_0x11d260(0xd1)](PORT,HOST);else http[_0x11d260(0xd1)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5b2412=_0x11d260;let _0x102128=_0x5b2412(0x1d6);const _0x1897e6=networkInterfaces(),_0x43d54c={};for(const _0x581877 of Object[_0x5b2412(0x1f0)](_0x1897e6)){for(const _0x900f8b of _0x1897e6[_0x581877]){if((_0x900f8b['family']=='IPv4'||_0x900f8b['family']==0x4)&&!_0x900f8b[_0x5b2412(0x224)]){const _0x1c30e1=ipaddr['parse'](_0x900f8b[_0x5b2412(0x1db)])[_0x5b2412(0x139)]();_0x1c30e1!=_0x5b2412(0xb4)&&(!_0x43d54c[_0x581877]&&(_0x43d54c[_0x581877]=[]),_0x43d54c[_0x581877][_0x5b2412(0x180)](_0x900f8b[_0x5b2412(0x1db)]),_0x102128=_0x900f8b[_0x5b2412(0x1db)]);}}}return{'serverip':_0x102128,'netinterfaces':_0x43d54c};}async function startServer(){const _0x533565=_0x11d260,{serverip:_0x1e66f6,netinterfaces:_0x835428}=getServerIP();logger[_0x533565(0x1fd)](''),logger[_0x533565(0x1fd)](_0x533565(0x17a)),await logger['full']('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x533565(0x197)+(environment=='staging'?_0x533565(0x196):'')+'\x0a'+(_0x533565(0x25b)+PORT+_0x533565(0x1ef))+(_0x533565(0xdf)+_0x1e66f6+':'+PORT+_0x533565(0x22a))),logger[_0x533565(0x1fd)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x4f9880 of config){const _0x5e74f=_0x4f9880['mode']==_0x533565(0x15f)?'a':'m';if(_0x4f9880[_0x533565(0x297)]=='enabled'||_0x4f9880['status']=='new')await logger[_0x533565(0x1da)](_0x533565(0x14f)+_0x5e74f+_0x533565(0x1ee)+_0x4f9880[_0x533565(0xa4)]+_0x533565(0x10f)+_0x4f9880['botname']),startBot([_0x4f9880['botID'],userID],{'cwd':bbpath},function(_0x218e9d){const _0x235f59=_0x533565;if(_0x218e9d)logger[_0x235f59(0x1da)](_0x218e9d);});else(_0x4f9880[_0x533565(0x297)]=='disabled'||_0x4f9880['status']=='new-disabled')&&await logger[_0x533565(0x1da)](_0x533565(0x16b)+_0x5e74f+_0x533565(0xb6)+_0x4f9880['botID']+_0x533565(0x10f)+_0x4f9880[_0x533565(0x95)]);}else!newBot&&logger[_0x533565(0x1fd)](_0x533565(0x1a8));if(newBot)addBot();logger[_0x533565(0x1fd)](_0x533565(0x17a)),logger['simple'](''),await logger[_0x533565(0x13e)]('Node.js\x20v'+nodeversion),await logger[_0x533565(0x13e)](_0x533565(0x112),_0x835428);}function startSocket(){const _0x337268=_0x11d260;io['on'](_0x337268(0x1b9),_0x2cb40f=>{const _0x547d1d=_0x337268;let _0x1e7ab3,_0xe8ac63,_0x43c7c3,_0x5cc24b,_0x1f32a7;const _0x24c304=_0x2cb40f[_0x547d1d(0x248)]['headers'][_0x547d1d(0xd6)];_0xe8ac63=_0x24c304[_0x547d1d(0x13d)](/bot[0-9]{3}/);if(_0xe8ac63)_0x43c7c3=_0xe8ac63[0x0][_0x547d1d(0x13d)](/[0-9]{3}/);if(_0x43c7c3)_0x1e7ab3=_0x43c7c3[0x0];else _0x1e7ab3=_0x547d1d(0x10a);const _0x90bb64=_0x2cb40f[_0x547d1d(0x248)][_0x547d1d(0x1e3)][_0x547d1d(0x10e)];if(!_0x90bb64)_0x2cb40f[_0x547d1d(0x115)](_0x547d1d(0x297),{'publicKey':secure[_0x547d1d(0x265)]});else{_0x5cc24b=timelyDecrypt(_0x90bb64,![]);if(!_0x5cc24b)_0x2cb40f[_0x547d1d(0x115)](_0x547d1d(0x297),{'publicKey':secure[_0x547d1d(0x265)]});else{_0x1f32a7=normalizeIP(_0x2cb40f[_0x547d1d(0x20a)][_0x547d1d(0xe5)])['store'];if(!devices[_0x5cc24b])devices[_0x5cc24b]={'uuid':_0x5cc24b,'access':{'token':null}};devices[_0x5cc24b]['ip']=_0x1f32a7;const _0x58b95d=addClient(_0x2cb40f['id'],_0x5cc24b,_0x1e7ab3);setAccess(_0x58b95d),emitMessages(),_0x2cb40f['on']('login',_0x2a72bd=>{const _0x3e20b6=_0x547d1d,_0x260ecc=timelyDecrypt(_0x2a72bd[_0x3e20b6(0xf9)],!![],_0x3e20b6(0xb3));if(_0x260ecc){_0x2a72bd={'username':_0x2a72bd['username'],'password':_0x260ecc},devices[_0x5cc24b][_0x3e20b6(0x194)]=validateCredentials(_0x2a72bd,_0x5cc24b);if(devices[_0x5cc24b][_0x3e20b6(0x194)][_0x3e20b6(0x20d)]==![]&&devices[_0x5cc24b][_0x3e20b6(0x194)]['reason']=='2FA\x20login\x20required')_0x2cb40f[_0x3e20b6(0x115)](_0x3e20b6(0x297),{'access':devices[_0x5cc24b][_0x3e20b6(0x194)]}),loginAccess2FA(_0x5cc24b,_0x1f32a7);else{if(devices[_0x5cc24b][_0x3e20b6(0x194)][_0x3e20b6(0x20d)]==![]&&devices[_0x5cc24b][_0x3e20b6(0x194)][_0x3e20b6(0x210)]==_0x3e20b6(0xa9))_0x2cb40f['emit']('status',{'access':devices[_0x5cc24b][_0x3e20b6(0x194)]});else devices[_0x5cc24b][_0x3e20b6(0x194)]['allow']&&devices[_0x5cc24b][_0x3e20b6(0x194)][_0x3e20b6(0x210)]==_0x3e20b6(0xc3)&&(getClientsWithUuid(_0x5cc24b)[_0x3e20b6(0x200)](_0x528b7b=>{setAccess(_0x528b7b);}),logger['debug'](_0x3e20b6(0x87)+_0x5cc24b['slice'](-0x8)),setTokenRefresh(_0x5cc24b),setSessionTimeout('login',_0x5cc24b));}}else logger[_0x3e20b6(0x1da)](_0x3e20b6(0x213));}),_0x2cb40f['on'](_0x547d1d(0xc7),()=>{resetPassword();}),_0x2cb40f['on'](_0x547d1d(0x241),_0x4525ea=>{removeClient(_0x2cb40f['id']);}),_0x1e7ab3==_0x547d1d(0x10a)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x17e10a){const _0x4bccb6=_0x11d260;if(_0x17e10a!='botmanager'&&config[_0x4bccb6(0x15d)]!=''){if(pid[_0x17e10a])pid[_0x17e10a]['send']({'function':_0x4bccb6(0x15c),'args':null});}_0x17e10a!=_0x4bccb6(0x10a)&&broadcastToBots(_0x4bccb6(0x17e),JSON[_0x4bccb6(0x178)](config));}function reloadBotManager(){const _0x199235=_0x11d260;getClientsWithBotID(_0x199235(0x10a))[_0x199235(0x200)](_0x5f287d=>{const _0x1e887b=_0x199235;getSocket(_0x5f287d['id'])[_0x1e887b(0x115)]('status',{'access':{'allow':![],'reason':_0x1e887b(0x101),'token':null}});});}function getSocket(_0x1fdb30){const _0x215046=_0x11d260,_0x5bc32f=io[_0x215046(0x1d1)]['get']('/');return _0x5bc32f[_0x215046(0x15e)][_0x215046(0x111)](_0x1fdb30);}function setAccess(_0x14c2ff){const _0x47773c=_0x11d260,_0x3e4ba6=getSocket(_0x14c2ff['id']),_0x2afde6=_0x14c2ff[_0x47773c(0x254)],_0x1523bb=_0x14c2ff['bot'];devices[_0x2afde6][_0x47773c(0x194)]=validateAccess(devices[_0x2afde6][_0x47773c(0x194)][_0x47773c(0x1de)],_0x2afde6),logger['debug']('Setting\x20access:\x20'+devices[_0x2afde6]['access'][_0x47773c(0x210)]+'\x20|\x20client:\x20...'+_0x14c2ff['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x2afde6[_0x47773c(0x246)](-0x8)),_0x3e4ba6[_0x47773c(0x103)](_0x2afde6);if(devices[_0x2afde6]['access'][_0x47773c(0x20d)]){_0x3e4ba6[_0x47773c(0x103)](_0x1523bb);if(_0x1523bb==_0x47773c(0x10a))initializeSocketBotManager(_0x3e4ba6);else initializeSocketBot(_0x3e4ba6);initClient(_0x1523bb);}devices[_0x2afde6][_0x47773c(0x194)]['token']&&devices[_0x2afde6][_0x47773c(0x194)]['reason']==_0x47773c(0xd9)&&setSessionTimeout(_0x47773c(0x13a),_0x2afde6),devices[_0x2afde6][_0x47773c(0x194)][_0x47773c(0x1de)]&&devices[_0x2afde6]['access']['reason']==_0x47773c(0x12e)&&setSessionTimeout(_0x47773c(0x1c7),_0x2afde6),_0x3e4ba6[_0x47773c(0x115)](_0x47773c(0x297),{'status':_0x14c2ff['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2afde6][_0x47773c(0x194)],'externalip':devices[_0x2afde6]['ip'],'publicKey':secure[_0x47773c(0x265)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x2afde6][_0x47773c(0x194)][_0x47773c(0x20d)]==![]&&devices[_0x2afde6][_0x47773c(0x194)]['reason']==_0x47773c(0x237)&&temporaryAccess2FA(_0x2afde6,devices[_0x2afde6]['ip']);}function _0x5bdf(_0xc44116,_0x58f2f7){const _0x2d86bd=_0x27bc();return _0x5bdf=function(_0x2312f5,_0x599727){_0x2312f5=_0x2312f5-0x80;let _0x27bcbd=_0x2d86bd[_0x2312f5];return _0x27bcbd;},_0x5bdf(_0xc44116,_0x58f2f7);}function setSessionTimeout(_0x19a596,_0x2241c5){const _0x1807aa=_0x11d260;let _0x39adcf;if(_0x19a596==_0x1807aa(0x1c7))_0x39adcf=loginExpiry*0x3c*0x3e8;else _0x39adcf=devices[_0x2241c5]['telegramIpApproval'][_0x1807aa(0x256)]*0x3c*0x3e8-(new Date()[_0x1807aa(0x240)]()-devices[_0x2241c5][_0x1807aa(0x172)]['timestamp']);if(devices[_0x2241c5]['pidExpireLogin'])clearTimeout(devices[_0x2241c5][_0x1807aa(0x9a)]);devices[_0x2241c5][_0x1807aa(0x9a)]=setTimeout(()=>{const _0x2d1ecb=_0x1807aa;if(devices[_0x2241c5][_0x2d1ecb(0x1a2)])clearTimeout(devices[_0x2241c5]['pidRefreshToken']);removeSocketListeners(_0x2241c5),addBlacklist(_0x2241c5),devices[_0x2241c5][_0x2d1ecb(0x172)]=null,devices[_0x2241c5][_0x2d1ecb(0x1fb)]=null,devices[_0x2241c5][_0x2d1ecb(0x194)]['token']=null,logger[_0x2d1ecb(0x13e)](_0x2d1ecb(0x19d)+_0x2241c5['slice'](-0x8)),devices[_0x2241c5]['access']=validateAccess(devices[_0x2241c5][_0x2d1ecb(0x194)][_0x2d1ecb(0x1de)],_0x2241c5),!(devices[_0x2241c5][_0x2d1ecb(0x194)][_0x2d1ecb(0x20d)]&&devices[_0x2241c5][_0x2d1ecb(0x194)][_0x2d1ecb(0x210)]==_0x2d1ecb(0x18b))&&(_0x19a596==_0x2d1ecb(0x1c7)?io['to'](_0x2241c5)[_0x2d1ecb(0x115)](_0x2d1ecb(0x297),{'access':{'allow':![],'reason':_0x2d1ecb(0x24c),'token':null}}):io['to'](_0x2241c5)[_0x2d1ecb(0x115)](_0x2d1ecb(0x297),{'access':{'allow':![],'reason':_0x2d1ecb(0x14c),'token':null}})),devices[_0x2241c5][_0x2d1ecb(0x194)]['token']=null;},_0x39adcf);}function setTokenRefresh(_0x37a59b){const _0x117e31=_0x11d260;if(devices[_0x37a59b]['pidRefreshToken'])clearTimeout(devices[_0x37a59b][_0x117e31(0x1a2)]);devices[_0x37a59b]['pidRefreshToken']=setTimeout(()=>{const _0x24f982=_0x117e31;getClientsWithUuid(_0x37a59b)['length']!=0x0?(devices[_0x37a59b]['access']=refreshToken(_0x37a59b),io['to'](_0x37a59b)[_0x24f982(0x115)](_0x24f982(0x297),{'status':_0x24f982(0x19a),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x37a59b]['access'],'externalip':devices[_0x37a59b]['ip'],'publicKey':secure[_0x24f982(0x265)],'validInstallation':validInstallation}),setTokenRefresh(_0x37a59b)):clearTimeout(devices[_0x37a59b][_0x24f982(0x1a2)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x21d727){const _0x3b0d0b=_0x11d260,_0x4e1377=getClient(_0x21d727['id'])[_0x3b0d0b(0x254)];_0x21d727[_0x3b0d0b(0x115)]('bots',config),_0x21d727[_0x3b0d0b(0x115)](_0x3b0d0b(0x21c),cleanSettings()),_0x21d727['on']('add-bot',_0x5aa0c7=>{const _0x2cd33e=_0x3b0d0b;if(validateAccess(_0x5aa0c7,_0x4e1377)[_0x2cd33e(0x20d)])addBot();else logger[_0x2cd33e(0x1da)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x21d727['on'](_0x3b0d0b(0x191),(_0x25a469,_0x39e217)=>{const _0x40f10a=_0x3b0d0b;if(validateAccess(_0x39e217,_0x4e1377)[_0x40f10a(0x20d)])toggleBot(_0x25a469['botID'],_0x25a469[_0x40f10a(0x297)],_0x25a469[_0x40f10a(0x22b)]);else logger[_0x40f10a(0x1da)](_0x40f10a(0x14d));}),_0x21d727['on'](_0x3b0d0b(0x124),(_0x4423c6,_0x5cbf20)=>{const _0x283ebf=_0x3b0d0b;if(validateAccess(_0x5cbf20,_0x4e1377)[_0x283ebf(0x20d)])toggleBotMode(_0x4423c6);else logger[_0x283ebf(0x1da)](_0x283ebf(0x14d));}),_0x21d727['on'](_0x3b0d0b(0x20e),(_0x4bc1ee,_0x44f273)=>{const _0x403ad6=_0x3b0d0b;if(validateAccess(_0x44f273,_0x4e1377)[_0x403ad6(0x20d)])deleteBot(_0x4bc1ee);else logger[_0x403ad6(0x1da)](_0x403ad6(0x212));}),_0x21d727['on'](_0x3b0d0b(0x14a),(_0xbabe91,_0x14de12)=>{const _0x26cb08=_0x3b0d0b;if(validateAccess(_0x14de12,_0x4e1377)[_0x26cb08(0x20d)])storeSettings(_0xbabe91,!![]);else logger[_0x26cb08(0x1da)](_0x26cb08(0xfc));}),_0x21d727['on'](_0x3b0d0b(0xe4),_0x20ec55=>{const _0x1a2d5a=_0x3b0d0b;if(validateAccess(_0x20ec55,_0x4e1377)[_0x1a2d5a(0x20d)])updateBB(_0x1a2d5a(0x189));else logger[_0x1a2d5a(0x1da)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x21d727['on'](_0x3b0d0b(0x128),_0x23205c=>{const _0x31b6e8=_0x3b0d0b;if(validateAccess(_0x23205c,_0x4e1377)[_0x31b6e8(0x20d)])updateBB(_0x31b6e8(0xa3));else logger[_0x31b6e8(0x1da)](_0x31b6e8(0x1a1));}),_0x21d727['on'](_0x3b0d0b(0x220),_0x19d7b2=>{const _0x1aaf46=_0x3b0d0b;if(validateAccess(_0x19d7b2,_0x4e1377)[_0x1aaf46(0x20d)]){const _0x1d496c=getClient(_0x21d727['id']);if(_0x1d496c)getBackupFiles(_0x1d496c[_0x1aaf46(0x254)]);else logger[_0x1aaf46(0x1da)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x1aaf46(0x1da)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x21d727['on'](_0x3b0d0b(0x1a4),(_0x17d80a,_0x24f193)=>{const _0x592654=_0x3b0d0b;if(validateAccess(_0x24f193,_0x4e1377)['allow'])restoreBackupFile(_0x17d80a);else logger[_0x592654(0x1da)](_0x592654(0x1d8));}),_0x21d727['on'](_0x3b0d0b(0x1bc),_0x2cacff=>{const _0x363ba8=_0x3b0d0b;if(validateAccess(_0x2cacff,_0x4e1377)[_0x363ba8(0x20d)])getMessages();else logger[_0x363ba8(0x1da)](_0x363ba8(0x1ac));}),_0x21d727['on'](_0x3b0d0b(0x17c),(_0x4a0f13,_0x4ee3f1)=>{const _0x5fcd8d=_0x3b0d0b;if(validateAccess(_0x4ee3f1,_0x4e1377)[_0x5fcd8d(0x20d)])confirmMessage(_0x4a0f13);else logger[_0x5fcd8d(0x1da)](_0x5fcd8d(0x143));}),_0x21d727['on'](_0x3b0d0b(0x28b),_0x525f1a=>{const _0x329bbb=_0x3b0d0b;if(validateAccess(_0x525f1a,_0x4e1377)[_0x329bbb(0x20d)]){if(devices[_0x4e1377][_0x329bbb(0x1a2)])clearTimeout(devices[_0x4e1377]['pidRefreshToken']);if(devices[_0x4e1377][_0x329bbb(0x9a)])clearTimeout(devices[_0x4e1377][_0x329bbb(0x9a)]);removeSocketListeners(getClient(_0x21d727['id'])[_0x329bbb(0x254)]),addBlacklist(_0x4e1377),devices[_0x4e1377][_0x329bbb(0x172)]=null,devices[_0x4e1377][_0x329bbb(0x1fb)]=null,devices[_0x4e1377][_0x329bbb(0x194)][_0x329bbb(0x1de)]=null,logger[_0x329bbb(0x13e)]('Logged\x20out\x20user\x20...'+_0x4e1377['slice'](-0x8)),io['to'](getClient(_0x21d727['id'])[_0x329bbb(0x254)])[_0x329bbb(0x115)](_0x329bbb(0x297),{'access':{'allow':![],'reason':_0x329bbb(0x223),'token':null}});}else logger[_0x329bbb(0x1da)](_0x329bbb(0xd0));});}function initializeSocketBot(_0x33507a){const _0x7a3a34=_0x11d260,_0x51e7a6=getClient(_0x33507a['id'])[_0x7a3a34(0x12d)],_0x3ae797=getClient(_0x33507a['id'])[_0x7a3a34(0x254)];_0x33507a['on']('get-logs',(_0x5b52cf,_0x2450cf)=>{const _0x553a6c=_0x7a3a34;if(validateAccess(_0x2450cf,_0x3ae797)[_0x553a6c(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6]['send']({'function':_0x553a6c(0x20f),'args':_0x5b52cf});}else logger[_0x553a6c(0x1da)](_0x553a6c(0xfd));}),_0x33507a['on'](_0x7a3a34(0x23c),(_0x498f7c,_0x36ef86)=>{const _0x1cc165=_0x7a3a34;if(validateAccess(_0x36ef86,_0x3ae797)['allow']){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x1cc165(0xb9)]({'function':'deleteHistoryAlerts','args':_0x498f7c});}else logger[_0x1cc165(0x1da)](_0x1cc165(0xa5));}),_0x33507a['on'](_0x7a3a34(0x170),(_0x1ffa5f,_0x133ea8)=>{const _0x5e23ab=_0x7a3a34;if(validateAccess(_0x133ea8,_0x3ae797)[_0x5e23ab(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x5e23ab(0xb9)]({'function':'getPortfolio','args':_0x1ffa5f});}else logger[_0x5e23ab(0x1da)](_0x5e23ab(0x21f));}),_0x33507a['on'](_0x7a3a34(0x26d),(_0x531e27,_0x4a9bc1)=>{const _0x1088cc=_0x7a3a34;if(validateAccess(_0x4a9bc1,_0x3ae797)['allow']){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x1088cc(0xb9)]({'function':_0x1088cc(0x1be),'args':_0x531e27});}else logger[_0x1088cc(0x1da)](_0x1088cc(0x208));}),_0x33507a['on'](_0x7a3a34(0x23a),(_0xfbae3f,_0x5cb791)=>{const _0x2b0224=_0x7a3a34;if(validateAccess(_0x5cb791,_0x3ae797)['allow']){if(pid[_0x51e7a6])pid[_0x51e7a6]['send']({'function':_0x2b0224(0x167),'args':_0xfbae3f});}else logger[_0x2b0224(0x1da)](_0x2b0224(0xfe));}),_0x33507a['on']('store-fiat',(_0x19d266,_0x27433e)=>{const _0x24e0dc=_0x7a3a34;if(validateAccess(_0x27433e,_0x3ae797)[_0x24e0dc(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x24e0dc(0xb9)]({'function':_0x24e0dc(0x1ba),'args':_0x19d266});}else logger[_0x24e0dc(0x1da)](_0x24e0dc(0xd2));}),_0x33507a['on'](_0x7a3a34(0x1a6),_0x250b66=>{const _0x55bc97=_0x7a3a34;if(validateAccess(_0x250b66,_0x3ae797)[_0x55bc97(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x55bc97(0xb9)]({'function':_0x55bc97(0x290),'args':null});}else logger[_0x55bc97(0x1da)](_0x55bc97(0x12b));}),_0x33507a['on'](_0x7a3a34(0x227),_0x2d4770=>{const _0x2977ff=_0x7a3a34;if(validateAccess(_0x2d4770,_0x3ae797)['allow']){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x2977ff(0xb9)]({'function':_0x2977ff(0x195),'args':null});}else logger[_0x2977ff(0x1da)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x33507a['on'](_0x7a3a34(0x93),(_0x14929c,_0x4d3177)=>{const _0x1222d7=_0x7a3a34;if(validateAccess(_0x4d3177,_0x3ae797)[_0x1222d7(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x1222d7(0xb9)]({'function':_0x1222d7(0x18e),'args':_0x14929c});}else logger[_0x1222d7(0x1da)](_0x1222d7(0x1dd));}),_0x33507a['on'](_0x7a3a34(0x291),_0xd105f6=>{const _0x5c989f=_0x7a3a34;if(validateAccess(_0xd105f6,_0x3ae797)[_0x5c989f(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6][_0x5c989f(0xb9)]({'function':_0x5c989f(0x232),'args':null});}else logger['full'](_0x5c989f(0x162));}),_0x33507a['on']('show-config',_0x3afcf6=>{const _0x26f35f=_0x7a3a34;if(validateAccess(_0x3afcf6,_0x3ae797)[_0x26f35f(0x20d)]){if(pid[_0x51e7a6])pid[_0x51e7a6]['send']({'function':_0x26f35f(0x1af),'args':null});}else logger[_0x26f35f(0x1da)](_0x26f35f(0x226));}),_0x33507a['on']('update-bb',_0x105e8a=>{const _0x32bca1=_0x7a3a34;if(validateAccess(_0x105e8a,_0x3ae797)['allow'])updateBB(_0x32bca1(0x189));else logger[_0x32bca1(0x1da)](_0x32bca1(0x27c));}),_0x33507a['on'](_0x7a3a34(0x1bc),_0x1edeef=>{const _0x381bc6=_0x7a3a34;if(validateAccess(_0x1edeef,_0x3ae797)[_0x381bc6(0x20d)])getMessages();else logger[_0x381bc6(0x1da)](_0x381bc6(0x1ac));}),_0x33507a['on'](_0x7a3a34(0x17c),(_0x4db6dc,_0x510083)=>{const _0x57d55d=_0x7a3a34;if(validateAccess(_0x510083,_0x3ae797)[_0x57d55d(0x20d)])confirmMessage(_0x4db6dc);else logger['full'](_0x57d55d(0x143));}),_0x33507a['on'](_0x7a3a34(0x28b),_0xbbf30f=>{const _0x220579=_0x7a3a34;if(validateAccess(_0xbbf30f,_0x3ae797)[_0x220579(0x20d)]){if(devices[_0x3ae797][_0x220579(0x1a2)])clearTimeout(devices[_0x3ae797][_0x220579(0x1a2)]);if(devices[_0x3ae797][_0x220579(0x9a)])clearTimeout(devices[_0x3ae797][_0x220579(0x9a)]);removeSocketListeners(getClient(_0x33507a['id'])[_0x220579(0x254)]),addBlacklist(_0x3ae797),devices[_0x3ae797][_0x220579(0x172)]=null,devices[_0x3ae797]['telegram2FaApproval']=null,devices[_0x3ae797][_0x220579(0x194)][_0x220579(0x1de)]=null,logger[_0x220579(0x13e)](_0x220579(0x8e)+_0x3ae797[_0x220579(0x246)](-0x8)),io['to'](getClient(_0x33507a['id'])[_0x220579(0x254)])['emit'](_0x220579(0x297),{'access':{'allow':![],'reason':_0x220579(0x223),'token':null}});}else logger[_0x220579(0x1da)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0xf9b2c3){const _0x2edf7e=_0x11d260;getClientsWithUuid(_0xf9b2c3)[_0x2edf7e(0x200)](_0x772b69=>{getSocket(_0x772b69['id'])['removeAllListeners']();});}function cleanSettings(){const _0x59066f=_0x11d260;let _0x157684=settings;return settings['telegramToken']&&settings[_0x59066f(0xa6)]!=''&&(_0x157684={..._0x157684,'telegramToken':'************'}),settings[_0x59066f(0x21e)]&&settings['bbPassword']!=''&&(_0x157684={..._0x157684,'bbPassword':'************'}),settings[_0x59066f(0x286)]&&settings[_0x59066f(0x286)]!=''&&(_0x157684={..._0x157684,'marketcapApi':_0x59066f(0x16c)}),(settings['bbPassword']&&settings['bbPassword']==_0x59066f(0x114)||settings[_0x59066f(0xa6)]&&settings[_0x59066f(0xa6)]=='***'||settings[_0x59066f(0x286)]&&settings[_0x59066f(0x286)]=='***')&&(_0x157684={..._0x157684,'restored':{'password':settings[_0x59066f(0x21e)]==_0x59066f(0x114),'telegram':settings[_0x59066f(0xa6)]==_0x59066f(0x114),'marketcap':settings['marketcapApi']==_0x59066f(0x114)}}),_0x157684;}async function updateBB(_0x915b46){const _0x2ea2b3=_0x11d260;await backupConfigFiles(),installingUpdate=!![],config[_0x2ea2b3(0x200)](_0x47f864=>{const _0x1cb982=_0x2ea2b3;restartBot(_0x47f864[_0x1cb982(0xa4)]);});if(_0x915b46==_0x2ea2b3(0x189))process[_0x2ea2b3(0xb9)]({'update':!![],'environment':environment},_0x34cbb6=>{});else _0x915b46==_0x2ea2b3(0xa3)&&process['send']({'reinstall':!![],'environment':environment},_0xbe9e79=>{});}function startBot(_0x47bd16,_0x105fb0,_0x4bfac5){const _0x584dbf=_0x11d260;if(debugging)_0x47bd16[_0x584dbf(0x180)]('-d');let _0x5dea7a=![];const _0x1ece11=_0x47bd16[0x0];_0x105fb0={..._0x105fb0,'stdio':[_0x584dbf(0x229),_0x584dbf(0x229),_0x584dbf(0x229),_0x584dbf(0x207)]},pid[_0x1ece11]=childProcess['fork'](botfile,_0x47bd16,_0x105fb0),pid[_0x1ece11]['on'](_0x584dbf(0x216),_0xe9760c=>{const _0x3d7ca8=_0x584dbf;switch(Object[_0x3d7ca8(0x1f0)](_0xe9760c)[0x0]){case _0x3d7ca8(0x95):updateBotName(_0x1ece11,_0xe9760c['botname']);break;case _0x3d7ca8(0x25f):updateBotManager();break;case _0x3d7ca8(0x297):updateStatus(_0x1ece11,_0xe9760c['status']);break;case _0x3d7ca8(0x22b):updateLive(_0x1ece11,_0xe9760c[_0x3d7ca8(0x22b)]);break;case _0x3d7ca8(0x193):updateLive(_0x1ece11,_0xe9760c['started']),io['to'](_0x1ece11)[_0x3d7ca8(0x115)](_0x3d7ca8(0x297),{'access':{'allow':![],'reason':_0x3d7ca8(0x101),'token':null}});break;case _0x3d7ca8(0x17d):_0xe9760c[_0x3d7ca8(0x17d)]==_0x3d7ca8(0x21d)&&restartBot(_0x1ece11);_0xe9760c[_0x3d7ca8(0x17d)]=='kill'&&toggleBot(_0x1ece11,'disabled',_0x3d7ca8(0x96));break;case _0x3d7ca8(0x1ff):sendTelegramBot(_0x1ece11,_0xe9760c[_0x3d7ca8(0x1ff)]);break;case _0x3d7ca8(0x132):sendTelegramMsg(_0xe9760c[_0x3d7ca8(0x132)]);break;case _0x3d7ca8(0x1c0):io['to'](_0x1ece11)['emit'](_0xe9760c['function'],_0xe9760c['args']);break;}}),pid[_0x1ece11]['on'](_0x584dbf(0xe7),function(_0x25e28c){if(_0x5dea7a)return;_0x5dea7a=!![],_0x4bfac5(_0x25e28c);}),pid[_0x1ece11]['on'](_0x584dbf(0x141),async function(_0x28d239){const _0x19e70e=_0x584dbf;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0x5dea7a)return;_0x5dea7a=!![],_0x4bfac5(null);const _0x388a6f=dbConfig['get'](_0x19e70e(0x17e))[_0x19e70e(0x261)]({'botID':_0x1ece11})[_0x19e70e(0x165)]();_0x388a6f&&(_0x388a6f[_0x19e70e(0x297)]==_0x19e70e(0x1e6)||_0x388a6f[_0x19e70e(0x297)]=='new')&&(await sleep(0x3e8),updateLive(_0x1ece11,'stopped'),logger[_0x19e70e(0x1da)](_0x19e70e(0x228)+_0x1ece11),startBot([_0x1ece11,userID],{'cwd':bbpath},function(_0x2dab94){if(_0x2dab94)logger['full'](_0x2dab94);}));});}function stopBot(_0x3fc73d){const _0x273012=_0x11d260;getClientsWithBotID(_0x3fc73d)[_0x273012(0x200)](_0x4fada3=>{getSocket(_0x4fada3['id'])['disconnect'](!![]),removeClient(_0x4fada3['id']);}),pid[_0x3fc73d]&&(pid[_0x3fc73d][_0x273012(0x250)](),pid[_0x3fc73d]=null);}function stopAllBots(){const _0xad6573=_0x11d260;terminating=!![];const _0x1250e5=getEnabledBots();_0x1250e5[_0xad6573(0x200)](_0x3a1e21=>{stopBot(_0x3a1e21['botID']);});}function restartBot(_0x3a3193){if(pid[_0x3a3193])pid[_0x3a3193]['kill']();}function addBot(){const _0x1b185e=_0x11d260;let _0x29c9a2;for(let _0x4bbd7a=0x1;_0x4bbd7a<0x3e9;_0x4bbd7a++){_0x29c9a2=_0x4bbd7a[_0x1b185e(0x287)]()[_0x1b185e(0x160)](0x3,'0');let _0x1adcf5=config[_0x1b185e(0x261)](_0x51b19f=>_0x51b19f['botID']==_0x29c9a2);if(!_0x1adcf5)break;}if(_0x29c9a2===_0x1b185e(0x1fe)){logger[_0x1b185e(0x1da)](_0x1b185e(0x267));return;}logger['full'](_0x1b185e(0xaf)+_0x29c9a2),dbConfig[_0x1b185e(0x111)](_0x1b185e(0x17e))['push']({'botID':_0x29c9a2,'botname':'Bot\x20'+_0x29c9a2,'status':_0x1b185e(0xa8),'live':''})[_0x1b185e(0x27f)](),startBot([_0x29c9a2,userID],{'cwd':bbpath},function(_0x37792a){if(_0x37792a)logger['full'](_0x37792a);}),config=getConfiguration(),io['to'](_0x1b185e(0x10a))[_0x1b185e(0x115)](_0x1b185e(0x17e),config),broadcastToBots(_0x1b185e(0x17e),JSON[_0x1b185e(0x178)](config));}function deleteBot(_0x15d2bf){const _0x2f8d5a=_0x11d260;getClientsWithBotID(_0x15d2bf)[_0x2f8d5a(0x200)](_0x464f85=>{getSocket(_0x464f85['id'])['disconnect'](!![]),removeClient(_0x464f85['id']);}),dbConfig[_0x2f8d5a(0x111)](_0x2f8d5a(0x17e))['remove']({'botID':_0x15d2bf})[_0x2f8d5a(0x27f)](),logger[_0x2f8d5a(0x1da)]('Deleted\x20Bot\x20'+_0x15d2bf),stopBot(_0x15d2bf);try{if(fs['existsSync'](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+'-config.json')))fs[_0x2f8d5a(0x298)](path['join'](configpath,'bot-'+_0x15d2bf+'-config.json'));if(fs['existsSync'](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+_0x2f8d5a(0x25e))))fs[_0x2f8d5a(0x298)](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+'-events.json'));if(fs['existsSync'](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+_0x2f8d5a(0x171))))fs[_0x2f8d5a(0x298)](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+_0x2f8d5a(0x171)));if(fs['existsSync'](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+_0x2f8d5a(0x205))))fs[_0x2f8d5a(0x298)](path[_0x2f8d5a(0x103)](configpath,_0x2f8d5a(0xf6)+_0x15d2bf+'-results.json'));}catch(_0xc19cd4){if(_0xc19cd4)logger['full'](_0x2f8d5a(0xab),_0xc19cd4);}config=getConfiguration(),io['to']('botmanager')[_0x2f8d5a(0x115)]('bots',config),broadcastToBots(_0x2f8d5a(0x17e),JSON['stringify'](config));}function toggleBot(_0x2eb3a5,_0x2793ad,_0x5eb49b){const _0x3afc0f=_0x11d260;dbConfig[_0x3afc0f(0x111)](_0x3afc0f(0x17e))['find']({'botID':_0x2eb3a5})['assign']({'status':_0x2793ad})[_0x3afc0f(0x269)]({'live':_0x5eb49b})['write']();if(_0x2793ad==_0x3afc0f(0x1e6)||_0x2793ad==_0x3afc0f(0xa8))logger[_0x3afc0f(0x1da)](_0x3afc0f(0x1e9)+_0x2eb3a5),startBot([_0x2eb3a5,userID],{'cwd':bbpath},function(_0x5eb474){if(_0x5eb474)logger['full'](_0x5eb474);});else(_0x2793ad==_0x3afc0f(0x1fc)||_0x2793ad=='new-disabled')&&(logger[_0x3afc0f(0x1da)](_0x3afc0f(0x1ab)+_0x2eb3a5),stopBot(_0x2eb3a5));config=getConfiguration(),io['to']('botmanager')[_0x3afc0f(0x115)](_0x3afc0f(0x17e),config),broadcastToBots('bots',JSON[_0x3afc0f(0x178)](config));}function toggleStatus(_0x585fa8){const _0x49907b=_0x11d260;let _0x328657=dbConfig[_0x49907b(0x111)](_0x49907b(0x17e))['find']({'botID':_0x585fa8})[_0x49907b(0x165)](),_0x5d6727;if(_0x328657['status']===_0x49907b(0x1e6))_0x5d6727=_0x49907b(0x1fc);else{if(_0x328657['status']===_0x49907b(0xa8))_0x5d6727='new-disabled';else{if(_0x328657[_0x49907b(0x297)]===_0x49907b(0x1b7))_0x5d6727='new';else{if(_0x328657['status']===_0x49907b(0x1fc))_0x5d6727=_0x49907b(0x1e6);}}}return _0x5d6727;}function updateStatus(_0x4a68ed,_0x3269b1){const _0x20deb7=_0x11d260;dbConfig[_0x20deb7(0x111)](_0x20deb7(0x17e))[_0x20deb7(0x261)]({'botID':_0x4a68ed})['assign']({'status':_0x3269b1})[_0x20deb7(0x27f)](),config=getConfiguration(),io['to'](_0x20deb7(0x10a))[_0x20deb7(0x115)](_0x20deb7(0x17e),config),broadcastToBots(_0x20deb7(0x17e),JSON[_0x20deb7(0x178)](config));}function updateLive(_0x1c1e12,_0x22fb7e){const _0x210399=_0x11d260;dbConfig['get'](_0x210399(0x17e))[_0x210399(0x261)]({'botID':_0x1c1e12})[_0x210399(0x269)]({'live':_0x22fb7e})[_0x210399(0x27f)](),config=getConfiguration(),io['to'](_0x210399(0x10a))[_0x210399(0x115)](_0x210399(0x17e),config),broadcastToBots(_0x210399(0x17e),JSON[_0x210399(0x178)](config));}function updateBotName(_0x4e7e8c,_0x115825){const _0x428f69=_0x11d260;dbConfig[_0x428f69(0x111)](_0x428f69(0x17e))['find']({'botID':_0x4e7e8c})['assign']({'botname':_0x115825})[_0x428f69(0x27f)](),config=getConfiguration(),io['to'](_0x428f69(0x10a))[_0x428f69(0x115)](_0x428f69(0x17e),config),broadcastToBots(_0x428f69(0x17e),JSON[_0x428f69(0x178)](config));}function updateBotManager(){const _0x48ec08=_0x11d260;config=getConfiguration(),io['to']('botmanager')[_0x48ec08(0x115)](_0x48ec08(0x17e),config),broadcastToBots(_0x48ec08(0x17e),JSON[_0x48ec08(0x178)](config));}function toggleBotMode(_0x2070e){const _0x1d048f=_0x11d260;if(pid[_0x2070e])pid[_0x2070e][_0x1d048f(0xb9)]({'function':_0x1d048f(0xaa),'args':null});else{const _0x17cc3a=configpath+_0x1d048f(0xf6)+_0x2070e+_0x1d048f(0x1d2),_0x43f1af=fs[_0x1d048f(0x1f6)](_0x17cc3a),_0x39215b=JSON[_0x1d048f(0x25a)](_0x43f1af),_0x42a337=_0x39215b[_0x1d048f(0x12d)][0x0][_0x1d048f(0xcf)];_0x39215b[_0x1d048f(0x12d)][0x0][_0x1d048f(0xcf)]=!_0x42a337;const _0x2b9d60=JSON[_0x1d048f(0x178)](_0x39215b,null,0x2);fs[_0x1d048f(0x148)](_0x17cc3a,_0x2b9d60),config=getConfiguration(),io['to']('botmanager')[_0x1d048f(0x115)]('bots',config),broadcastToBots(_0x1d048f(0x17e),JSON[_0x1d048f(0x178)](config));}}function validateTelegram(_0x4adbc0){const _0x3aa639=_0x11d260;if(_0x4adbc0[_0x3aa639(0xce)]['username']!=settings[_0x3aa639(0xf3)]&&'@'+_0x4adbc0['from'][_0x3aa639(0x275)]!=settings[_0x3aa639(0xf3)]||_0x4adbc0[_0x3aa639(0x28d)]['id']!=settings[_0x3aa639(0x91)])return sendTelegram(_0x4adbc0[_0x3aa639(0x28d)]['id'],_0x3aa639(0x1df),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x29ee58=_0x11d260;tgBot&&(await tgBot[_0x29ee58(0x17d)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x3106d2=_0x29ee58(0x1d9);_0x3106d2+='\x0a',_0x3106d2+=_0x29ee58(0x153),_0x3106d2+=_0x29ee58(0x257),_0x3106d2+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x3106d2+=_0x29ee58(0x1c5),_0x3106d2+='/on\x20-\x20start\x20bot(s)\x0a',_0x3106d2+=_0x29ee58(0x1ea),_0x3106d2+=_0x29ee58(0x206),_0x3106d2+=_0x29ee58(0x27d),_0x3106d2+=_0x29ee58(0xb1),_0x3106d2+=_0x29ee58(0x9b),_0x3106d2+=_0x29ee58(0x121),_0x3106d2+='/logs\x20-\x20receive\x20log\x20files\x0a',_0x3106d2+=_0x29ee58(0x1d4),_0x3106d2+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3106d2+=_0x29ee58(0x84),_0x3106d2+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x17f15d=_0x29ee58(0xc1);_0x17f15d+='\x0a',_0x17f15d+=_0x3106d2,tgBot['catch']((_0x2c8b75,_0x4894c3)=>{const _0x21bdc8=_0x29ee58;logger[_0x21bdc8(0x1fd)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x21bdc8(0x13e)](_0x21bdc8(0x1d0),_0x2c8b75);}),tgBot['use'](async(_0x29ed41,_0x18678b)=>{const _0x1e50c5=_0x29ee58;if(!(!settings['telegramChatId']&&_0x29ed41['update'][_0x1e50c5(0x216)][_0x1e50c5(0x292)]==_0x1e50c5(0x1fa))){if(!validateTelegram(_0x29ed41))return;}_0x18678b();}),tgBot[_0x29ee58(0x97)](_0x29ee58(0x155),async _0x4fc523=>{const _0x3c8846=_0x29ee58;if(_0x4fc523[_0x3c8846(0xce)][_0x3c8846(0x275)]==settings[_0x3c8846(0xf3)]||'@'+_0x4fc523[_0x3c8846(0xce)][_0x3c8846(0x275)]==settings['telegramUsername']){if(!settings[_0x3c8846(0x91)])updateSetting(_0x3c8846(0x91),_0x4fc523[_0x3c8846(0x28d)]['id']);}if(!validateTelegram(_0x4fc523))return;updateSetting(_0x3c8846(0xd8),!![]),await sendTelegram(_0x4fc523[_0x3c8846(0x28d)]['id'],_0x17f15d);}),tgBot[_0x29ee58(0x97)](_0x29ee58(0x217),async _0x217375=>{const _0x3ad298=_0x29ee58;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x217375[_0x3ad298(0x28d)]['id'],_0x3ad298(0x81));}),tgBot[_0x29ee58(0x97)]('disable',async _0xa525d4=>{const _0x18fa12=_0x29ee58;await sendTelegram(_0xa525d4[_0x18fa12(0x28d)]['id'],_0x18fa12(0xe9)),updateSetting('telegramEnabled',![]);}),tgBot['command']('config',async _0x1a0cf5=>{const _0x1812d3=_0x29ee58,_0x38652a=Markup['inlineKeyboard']([Markup[_0x1812d3(0x21b)]['callback'](_0x1812d3(0x122),_0x1812d3(0x27b)),Markup[_0x1812d3(0x21b)][_0x1812d3(0x24d)](_0x1812d3(0x222),'config_alerts'),Markup[_0x1812d3(0x21b)][_0x1812d3(0x24d)](_0x1812d3(0xeb),'config_all')]);_0x1a0cf5[_0x1812d3(0x238)](_0x1812d3(0x1f5),_0x38652a);}),tgBot[_0x29ee58(0x1ec)](_0x29ee58(0x27b),async _0x3acbf5=>{const _0x78521b=_0x29ee58;_0x3acbf5[_0x78521b(0x1e7)](),updateSetting(_0x78521b(0xa0),_0x78521b(0xb2)),updateSetting(_0x78521b(0xd8),!![]),await sendTelegram(_0x3acbf5['chat']['id'],_0x78521b(0x1f1));}),tgBot['action'](_0x29ee58(0xae),async _0x370318=>{const _0x4d1482=_0x29ee58;_0x370318[_0x4d1482(0x1e7)](),updateSetting(_0x4d1482(0xa0),'alerts'),updateSetting(_0x4d1482(0xd8),!![]),await sendTelegram(_0x370318[_0x4d1482(0x28d)]['id'],_0x4d1482(0xc4));}),tgBot[_0x29ee58(0x1ec)]('config_all',async _0x249136=>{const _0x22ce21=_0x29ee58;_0x249136[_0x22ce21(0x1e7)](),updateSetting('telegramEvents',_0x22ce21(0x1e4)),updateSetting(_0x22ce21(0xd8),!![]),await sendTelegram(_0x249136[_0x22ce21(0x28d)]['id'],_0x22ce21(0x184));}),tgBot[_0x29ee58(0x97)]('status',async _0x5ef65b=>{const _0x2a297b=_0x29ee58,_0x7bb3b2=getBotsWithMode();let _0x3f007d=_0x2a297b(0x119);config[_0x2a297b(0x200)](_0x2c8282=>{const _0x4ae82a=_0x2a297b,_0x50155e=_0x7bb3b2[_0x4ae82a(0x261)](_0x275fcf=>_0x275fcf['botID']==_0x2c8282[_0x4ae82a(0xa4)])['mode'];_0x3f007d+='Bot\x20'+_0x2c8282[_0x4ae82a(0xa4)]+':\x20'+_0x2c8282[_0x4ae82a(0x297)]+_0x4ae82a(0x10f)+_0x50155e+_0x4ae82a(0x10f)+_0x2c8282['live']+'\x0a';}),_0x3f007d+='\x0a',_0x3f007d+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3f007d+=!settings[_0x2a297b(0xd8)]?_0x2a297b(0x1bb):_0x2a297b(0x147),_0x3f007d+=settings[_0x2a297b(0xd8)]?settings[_0x2a297b(0xa0)]==_0x2a297b(0x1e4)?_0x2a297b(0x185):_0x2a297b(0xc8)+settings[_0x2a297b(0xa0)]+'\x20only\x0a':'',await sendTelegram(_0x5ef65b['chat']['id'],_0x3f007d,{'parse_mode':'HTML'});}),tgBot[_0x29ee58(0x97)]('restart',async _0x444977=>{const _0x57faf3=_0x29ee58,_0x1572d9=getEnabledBots();if(_0x1572d9[_0x57faf3(0x18d)]==0x0)await sendTelegram(_0x444977[_0x57faf3(0x28d)]['id'],_0x57faf3(0x1c4));else{if(_0x1572d9[_0x57faf3(0x18d)]>0x1)_0x1572d9[_0x57faf3(0x180)]({'botID':'all'});let _0x311b49=[],_0x337974=[];const _0x453a4d=_0x1572d9[_0x57faf3(0x18d)]%0x4==0x0||_0x1572d9[_0x57faf3(0x18d)]%0x4==0x3||_0x1572d9[_0x57faf3(0x18d)]%0x3==0x1?0x4:0x3;let _0x496408=0x0;_0x1572d9[_0x57faf3(0x200)]((_0x45ad2b,_0x4db4e7)=>{const _0x29bc72=_0x57faf3;if(_0x4db4e7%_0x453a4d==0x0)_0x337974=[];_0x337974['push'](Markup[_0x29bc72(0x21b)][_0x29bc72(0x24d)](_0x45ad2b[_0x29bc72(0xa4)]==_0x29bc72(0x1e4)?'All\x20bots':_0x29bc72(0xbd)+_0x45ad2b[_0x29bc72(0xa4)],'restart_'+_0x45ad2b[_0x29bc72(0xa4)])),_0x4db4e7%_0x453a4d==0x0&&(_0x311b49[_0x496408]=_0x337974,_0x496408++);});const _0x1d8abd=Markup[_0x57faf3(0x1ce)](_0x311b49);_0x444977[_0x57faf3(0x238)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x1d8abd);}}),tgBot[_0x29ee58(0x1ec)](/restart_(.+)/,async _0x3ef506=>{const _0x3c7126=_0x29ee58,_0x362d30=_0x3ef506[_0x3c7126(0x13d)][0x1];_0x3ef506[_0x3c7126(0x1e7)](),_0x362d30=='all'?config['forEach'](_0x494d5d=>{const _0x7e19b7=_0x3c7126;restartBot(_0x494d5d[_0x7e19b7(0xa4)]);}):restartBot(_0x362d30);}),tgBot[_0x29ee58(0x97)]('on',async _0x32da2e=>{const _0x36489b=_0x29ee58,_0x247fd9=getDisabledBots();if(_0x247fd9['length']==0x0)await sendTelegram(_0x32da2e[_0x36489b(0x28d)]['id'],_0x36489b(0xff));else{if(_0x247fd9[_0x36489b(0x18d)]>0x1)_0x247fd9[_0x36489b(0x180)]({'botID':_0x36489b(0x1e4)});let _0x291ae8=[],_0x340826=[];const _0x33cb5c=_0x247fd9['length']%0x4==0x0||_0x247fd9[_0x36489b(0x18d)]%0x4==0x3||_0x247fd9['length']%0x3==0x1?0x4:0x3;let _0x4be5b8=0x0;_0x247fd9[_0x36489b(0x200)]((_0xb037db,_0x2e8c68)=>{const _0x244aae=_0x36489b;if(_0x2e8c68%_0x33cb5c==0x0)_0x340826=[];_0x340826[_0x244aae(0x180)](Markup['button'][_0x244aae(0x24d)](_0xb037db[_0x244aae(0xa4)]==_0x244aae(0x1e4)?_0x244aae(0x260):'Bot\x20'+_0xb037db[_0x244aae(0xa4)],_0x244aae(0x11a)+_0xb037db['botID'])),_0x2e8c68%_0x33cb5c==0x0&&(_0x291ae8[_0x4be5b8]=_0x340826,_0x4be5b8++);});const _0x4b12fe=Markup['inlineKeyboard'](_0x291ae8);_0x32da2e[_0x36489b(0x238)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x4b12fe);}}),tgBot[_0x29ee58(0x1ec)](/on_(.+)/,async _0x3e06f2=>{const _0x47fc75=_0x29ee58,_0x5d8638=_0x3e06f2['match'][0x1];_0x3e06f2['editMessageReplyMarkup']();if(_0x5d8638==_0x47fc75(0x1e4)){const _0x500433=getDisabledBots();await sendTelegram(_0x3e06f2['chat']['id'],_0x47fc75(0xde)),_0x500433['forEach'](_0x1a52fd=>{const _0x399f18=_0x47fc75;if(_0x1a52fd['botID']!=_0x399f18(0x1e4))toggleBot(_0x1a52fd[_0x399f18(0xa4)],toggleStatus(_0x1a52fd['botID']),_0x399f18(0x96));});}else await sendTelegram(_0x3e06f2['chat']['id'],_0x47fc75(0x253)+_0x5d8638),toggleBot(_0x5d8638,toggleStatus(_0x5d8638),_0x47fc75(0x96));}),tgBot['command'](_0x29ee58(0x14b),async _0x4a9f32=>{const _0xf4e2c9=_0x29ee58,_0x5ca683=getEnabledBots();if(_0x5ca683['length']==0x0)await sendTelegram(_0x4a9f32['chat']['id'],_0xf4e2c9(0x1c4));else{if(_0x5ca683['length']>0x1)_0x5ca683[_0xf4e2c9(0x180)]({'botID':'all'});let _0xd6dbe7=[],_0xdb5d3=[];const _0x498981=_0x5ca683[_0xf4e2c9(0x18d)]%0x4==0x0||_0x5ca683[_0xf4e2c9(0x18d)]%0x4==0x3||_0x5ca683[_0xf4e2c9(0x18d)]%0x3==0x1?0x4:0x3;let _0x19d72a=0x0;_0x5ca683[_0xf4e2c9(0x200)]((_0x333c6e,_0x27f0e7)=>{const _0x48995e=_0xf4e2c9;if(_0x27f0e7%_0x498981==0x0)_0xdb5d3=[];_0xdb5d3[_0x48995e(0x180)](Markup[_0x48995e(0x21b)]['callback'](_0x333c6e[_0x48995e(0xa4)]==_0x48995e(0x1e4)?_0x48995e(0x260):_0x48995e(0xbd)+_0x333c6e[_0x48995e(0xa4)],_0x48995e(0xad)+_0x333c6e[_0x48995e(0xa4)])),_0x27f0e7%_0x498981==0x0&&(_0xd6dbe7[_0x19d72a]=_0xdb5d3,_0x19d72a++);});const _0x2ca29b=Markup[_0xf4e2c9(0x1ce)](_0xd6dbe7);_0x4a9f32[_0xf4e2c9(0x238)](_0xf4e2c9(0x23e),_0x2ca29b);}}),tgBot[_0x29ee58(0x1ec)](/off_(.+)/,async _0x44ea9e=>{const _0x4a9237=_0x29ee58,_0x475c4a=_0x44ea9e[_0x4a9237(0x13d)][0x1];_0x44ea9e['editMessageReplyMarkup']();if(_0x475c4a==_0x4a9237(0x1e4)){const _0x463e21=getEnabledBots();await sendTelegram(_0x44ea9e[_0x4a9237(0x28d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x463e21[_0x4a9237(0x200)](_0x482790=>{const _0x267591=_0x4a9237;if(_0x482790[_0x267591(0xa4)]!=_0x267591(0x1e4))toggleBot(_0x482790['botID'],toggleStatus(_0x482790[_0x267591(0xa4)]),'stopped');});}else await sendTelegram(_0x44ea9e[_0x4a9237(0x28d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x475c4a),toggleBot(_0x475c4a,toggleStatus(_0x475c4a),_0x4a9237(0x96));}),tgBot[_0x29ee58(0x97)]('metrics',async _0x3e3490=>{const _0x5149ef=_0x29ee58,_0x15a421=getEnabledBots();if(_0x15a421[_0x5149ef(0x18d)]==0x0)await sendTelegram(_0x3e3490[_0x5149ef(0x28d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x15a421[_0x5149ef(0x18d)]>0x1){let _0x411c4e=[],_0x5de510=[];const _0x4ea575=_0x15a421[_0x5149ef(0x18d)]%0x4==0x0||_0x15a421[_0x5149ef(0x18d)]%0x4==0x3||_0x15a421[_0x5149ef(0x18d)]%0x3==0x1?0x4:0x3;let _0x1860f7=0x0;_0x15a421[_0x5149ef(0x200)]((_0x552b22,_0x15c5fd)=>{const _0x26d849=_0x5149ef;if(_0x15c5fd%_0x4ea575==0x0)_0x5de510=[];_0x5de510[_0x26d849(0x180)](Markup[_0x26d849(0x21b)][_0x26d849(0x24d)](_0x26d849(0xbd)+_0x552b22['botID'],_0x26d849(0x1e0)+_0x552b22[_0x26d849(0xa4)])),_0x15c5fd%_0x4ea575==0x0&&(_0x411c4e[_0x1860f7]=_0x5de510,_0x1860f7++);});const _0x525207=Markup[_0x5149ef(0x1ce)](_0x411c4e);_0x3e3490[_0x5149ef(0x238)](_0x5149ef(0x104),_0x525207);}else{const _0xf535bd=_0x15a421[0x0][_0x5149ef(0xa4)];if(pid[_0xf535bd])pid[_0xf535bd][_0x5149ef(0xb9)]({'function':_0x5149ef(0x164),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0xe4a9aa=>{const _0xa88a95=_0x29ee58,_0x393d2c=_0xe4a9aa[_0xa88a95(0x13d)][0x1];_0xe4a9aa[_0xa88a95(0x1e7)]();if(pid[_0x393d2c])pid[_0x393d2c]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x29ee58(0x97)](_0x29ee58(0xe3),async _0x24aebf=>{const _0x314fa9=_0x29ee58,_0x5a830a=getEnabledBots();if(_0x5a830a[_0x314fa9(0x18d)]==0x0)await sendTelegram(_0x24aebf[_0x314fa9(0x28d)]['id'],_0x314fa9(0x1c4));else{if(_0x5a830a['length']>0x1){let _0x19e129=[],_0x11e457=[];const _0xdc7b4d=_0x5a830a['length']%0x4==0x0||_0x5a830a[_0x314fa9(0x18d)]%0x4==0x3||_0x5a830a[_0x314fa9(0x18d)]%0x3==0x1?0x4:0x3;let _0x440d0a=0x0;_0x5a830a[_0x314fa9(0x200)]((_0x37c3e1,_0x3bec35)=>{const _0x5e1740=_0x314fa9;if(_0x3bec35%_0xdc7b4d==0x0)_0x11e457=[];_0x11e457[_0x5e1740(0x180)](Markup[_0x5e1740(0x21b)][_0x5e1740(0x24d)](_0x5e1740(0xbd)+_0x37c3e1[_0x5e1740(0xa4)],_0x5e1740(0x8d)+_0x37c3e1[_0x5e1740(0xa4)])),_0x3bec35%_0xdc7b4d==0x0&&(_0x19e129[_0x440d0a]=_0x11e457,_0x440d0a++);});const _0x5eb1bd=Markup['inlineKeyboard'](_0x19e129);_0x24aebf['reply'](_0x314fa9(0x1c3),_0x5eb1bd);}else{const _0x2cecbc=_0x5a830a[0x0]['botID'];if(pid[_0x2cecbc])pid[_0x2cecbc][_0x314fa9(0xb9)]({'function':_0x314fa9(0x28c),'args':null});}}}),tgBot[_0x29ee58(0x1ec)](/portfolio_(.+)/,async _0x2ae0be=>{const _0xea9057=_0x29ee58,_0x56df0c=_0x2ae0be['match'][0x1];_0x2ae0be['editMessageReplyMarkup']();if(pid[_0x56df0c])pid[_0x56df0c][_0xea9057(0xb9)]({'function':_0xea9057(0x28c),'args':null});}),tgBot[_0x29ee58(0x97)]('logs',async _0x400852=>{const _0x24fdb8=_0x29ee58,_0x4be902=_0x24fdb8(0x22e);await zipFiles(_0x4be902);const _0x3e0feb=zippath+(_0x4be902+_0x24fdb8(0x9d));_0x400852[_0x24fdb8(0xef)]({'source':_0x3e0feb})[_0x24fdb8(0x158)](()=>{})['catch'](_0x5c9c79=>logger['debug']('Error\x20sending\x20'+_0x4be902+_0x24fdb8(0xa1),_0x5c9c79));}),tgBot[_0x29ee58(0x97)](_0x29ee58(0x25d),async _0x249e83=>{const _0x2d3602=_0x29ee58,_0x5657fe=_0x2d3602(0x25d);await backupConfigFiles(),await zipFiles(_0x5657fe);const _0x202577=zippath+(_0x5657fe+'.zip');_0x249e83['replyWithDocument']({'source':_0x202577})[_0x2d3602(0x158)](()=>{})[_0x2d3602(0x1ca)](_0x1aeef9=>logger[_0x2d3602(0x13e)](_0x2d3602(0x26a)+_0x5657fe+_0x2d3602(0xa1),_0x1aeef9));}),tgBot[_0x29ee58(0x97)]('update',async _0x50ddb9=>{const _0x307e97=_0x29ee58;await getMessages();if(!updateAvailable)await sendTelegram(_0x50ddb9[_0x307e97(0x28d)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x50ddb9['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x165e6d=Markup['inlineKeyboard']([Markup[_0x307e97(0x21b)][_0x307e97(0x24d)](_0x307e97(0x209),_0x307e97(0x239)),Markup['button'][_0x307e97(0x24d)]('No',_0x307e97(0xf0))]);_0x50ddb9['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x165e6d);}}}),tgBot[_0x29ee58(0x1ec)](/update_(.+)/,async _0xf03491=>{const _0x1b8a7f=_0x29ee58,_0x260358=_0xf03491[_0x1b8a7f(0x13d)][0x1];_0xf03491[_0x1b8a7f(0x1e7)](),_0x260358==_0x1b8a7f(0xd3)&&(await sendTelegram(_0xf03491[_0x1b8a7f(0x28d)]['id'],_0x1b8a7f(0x174)),updateBB('update')),_0x260358=='no'&&await sendTelegram(_0xf03491[_0x1b8a7f(0x28d)]['id'],_0x1b8a7f(0x24e));}),tgBot[_0x29ee58(0x97)]('reinstall',async _0x466042=>{const _0x2381de=_0x29ee58;if(!validInstallation)await sendTelegram(_0x466042[_0x2381de(0x28d)]['id'],_0x2381de(0x125));else{const _0x192992=Markup[_0x2381de(0x1ce)]([Markup[_0x2381de(0x21b)][_0x2381de(0x24d)]('Yes',_0x2381de(0x236)),Markup[_0x2381de(0x21b)][_0x2381de(0x24d)]('No',_0x2381de(0xe8))]);_0x466042[_0x2381de(0x238)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x192992);}}),tgBot[_0x29ee58(0x1ec)](/reinstall_(.+)/,async _0x2c7a16=>{const _0x5906b2=_0x29ee58,_0x357730=_0x2c7a16[_0x5906b2(0x13d)][0x1];_0x2c7a16[_0x5906b2(0x1e7)](),_0x357730==_0x5906b2(0xd3)&&(await sendTelegram(_0x2c7a16[_0x5906b2(0x28d)]['id'],_0x5906b2(0x94)),updateBB(_0x5906b2(0xa3))),_0x357730=='no'&&await sendTelegram(_0x2c7a16[_0x5906b2(0x28d)]['id'],_0x5906b2(0x270));}),tgBot[_0x29ee58(0x97)](_0x29ee58(0x88),async _0x49d1af=>{const _0x993222=_0x29ee58,_0x4dcb2c=getBotsWithMode();if(_0x4dcb2c[_0x993222(0x18d)]==0x0)await sendTelegram(_0x49d1af[_0x993222(0x28d)]['id'],_0x993222(0x1c4));else{let _0x2b1cec=[],_0x3e90bb=[];const _0x1688ac=0x2;let _0xc863e5=0x0;_0x4dcb2c['forEach']((_0x5a7f44,_0x571487)=>{const _0x4c72a1=_0x993222;if(_0x571487%_0x1688ac==0x0)_0x3e90bb=[];_0x3e90bb[_0x4c72a1(0x180)](Markup[_0x4c72a1(0x21b)][_0x4c72a1(0x24d)](_0x4c72a1(0xbd)+_0x5a7f44[_0x4c72a1(0xa4)]+'\x20('+_0x5a7f44[_0x4c72a1(0x199)]+')',_0x4c72a1(0x16a)+_0x5a7f44[_0x4c72a1(0xa4)])),_0x571487%_0x1688ac==0x0&&(_0x2b1cec[_0xc863e5]=_0x3e90bb,_0xc863e5++);});const _0x30119e=Markup[_0x993222(0x1ce)](_0x2b1cec);_0x49d1af[_0x993222(0x238)](_0x993222(0x28f),_0x30119e);}}),tgBot[_0x29ee58(0x1ec)](/toggle_(.+)/,async _0x40c9e8=>{const _0x17421a=_0x29ee58,_0x1e6462=_0x40c9e8[_0x17421a(0x13d)][0x1];_0x40c9e8[_0x17421a(0x1e7)]();const _0x16808d=getBotsWithMode(),_0x256138=_0x16808d[_0x17421a(0x261)](_0x41d5f2=>_0x41d5f2[_0x17421a(0xa4)]==_0x1e6462),_0x3e7933=_0x256138[_0x17421a(0x199)]==_0x17421a(0x15f)?'manual':_0x17421a(0x15f);await sendTelegram(_0x40c9e8[_0x17421a(0x28d)]['id'],_0x17421a(0x186)+_0x1e6462+_0x17421a(0x16f)+_0x3e7933+'\x20mode'),toggleBotMode(_0x1e6462);}),tgBot['command'](_0x29ee58(0x266),async _0x264c25=>{const _0x1ccba8=_0x29ee58;let _0x2d4247='';config[_0x1ccba8(0x200)](_0x5b897a=>{const _0x47d557=_0x1ccba8;_0x2d4247+='Bot\x20'+_0x5b897a[_0x47d557(0xa4)]+':\x20'+_0x5b897a['botname']+'\x0a';}),await sendTelegram(_0x264c25[_0x1ccba8(0x28d)]['id'],_0x2d4247,{'parse_mode':_0x1ccba8(0xcc)});}),tgBot['command'](_0x29ee58(0x176),async _0x3655cf=>{const _0x45186a=_0x29ee58;await sendTelegram(_0x3655cf[_0x45186a(0x28d)]['id'],_0x3106d2);}),process[_0x29ee58(0x294)](_0x29ee58(0x271),()=>tgBot[_0x29ee58(0x17d)](_0x29ee58(0x271))),process[_0x29ee58(0x294)]('SIGTERM',()=>tgBot[_0x29ee58(0x17d)](_0x29ee58(0x8a))),tgBot['launch']();}function disableTelegram(){const _0x1be20b=_0x11d260;tgBot&&tgBot[_0x1be20b(0x17d)]();}async function sendTelegram(_0x2040b0,_0x1c8b6d,_0x55d707){const _0x185e67=_0x11d260;_0x55d707={..._0x55d707,'disable_web_page_preview':!![]};try{await tgBot[_0x185e67(0x1ff)][_0x185e67(0xac)](_0x2040b0,_0x1c8b6d,_0x55d707);}catch(_0x1b1804){console[_0x185e67(0x278)](_0x185e67(0x138),_0x1b1804);}}async function sendTelegramBot(_0x5b52db,_0x5389e7){const _0x4446ad=_0x11d260;if(settings[_0x4446ad(0xd8)]){if(settings[_0x4446ad(0xa0)]=='all'||(_0x5389e7[_0x4446ad(0x118)]=='error'||_0x5389e7[_0x4446ad(0x118)]==_0x4446ad(0x295)||_0x5389e7[_0x4446ad(0x118)]=='success')&&settings[_0x4446ad(0xa0)]==_0x4446ad(0x1e2)||_0x5389e7[_0x4446ad(0x118)]==_0x4446ad(0x11d)&&settings['telegramEvents']==_0x4446ad(0xb2)){if(tgBot&&settings[_0x4446ad(0x91)]){if(_0x5389e7['showname'])await sendTelegram(settings[_0x4446ad(0x91)],_0x5389e7[_0x4446ad(0x95)]+_0x4446ad(0x225)+_0x5389e7[_0x4446ad(0x279)]);else await sendTelegram(settings[_0x4446ad(0x91)],_0x4446ad(0xbd)+_0x5b52db+_0x4446ad(0x225)+_0x5389e7[_0x4446ad(0x279)]);}}}}async function sendTelegramMsg(_0x419e4a,_0x570d3d='HTML'){const _0x3e43d2=_0x11d260;return settings[_0x3e43d2(0xd8)]&&tgBot&&settings[_0x3e43d2(0x91)]?(await sendTelegram(settings['telegramChatId'],_0x419e4a,{'parse_mode':_0x570d3d}),!![]):![];}function getDeviceWithIp(_0x478547){const _0x22a2e9=_0x11d260;return devices[_0x22a2e9(0x261)](_0x34d3dd=>_0x34d3dd['ip']===_0x478547);}async function temporaryAccess2FA(_0x2f8b31,_0x4c5694){const _0x19eda5=_0x11d260;let _0x1a0b72=new Date(),_0x24dd36=![];if(lastIpApproval){if(_0x1a0b72-lastIpApproval<0x1388)_0x24dd36=!![];}lastIpApproval=new Date();if(_0x24dd36)return;if(tgBot&&settings['telegramChatId']){const _0x1dd80c=uuidRandom();tmpStorage[_0x1dd80c]={'uuid':_0x2f8b31,'externalip':_0x4c5694};const _0x5332fe=Markup['inlineKeyboard']([Markup[_0x19eda5(0x21b)][_0x19eda5(0x24d)](_0x19eda5(0x1b6),_0x19eda5(0x8f)+_0x1dd80c),Markup['button'][_0x19eda5(0x24d)](_0x19eda5(0x1eb),_0x19eda5(0xed)+_0x1dd80c),Markup['button'][_0x19eda5(0x24d)]('30\x20min',_0x19eda5(0x1cb)+_0x1dd80c),Markup['button'][_0x19eda5(0x24d)](_0x19eda5(0x276),_0x19eda5(0xdb)+_0x1dd80c)]);await sendTelegram(settings['telegramChatId'],_0x19eda5(0x24a)+normalizeIP(_0x4c5694)['show']+'\x20?',_0x5332fe),tgBot[_0x19eda5(0x1ec)](/tempaccess_(.+)_(.+)/,async _0x81803e=>{const _0x3dbadb=_0x19eda5,_0x52b544=_0x81803e[_0x3dbadb(0x13d)][0x1],_0x49bba5=_0x81803e[_0x3dbadb(0x13d)][0x2],{uuid:_0x589681,externalip:_0x287ce5}=tmpStorage[_0x49bba5];delete tmpStorage[_0x49bba5],_0x81803e['editMessageReplyMarkup'](),devices[_0x589681][_0x3dbadb(0x172)]={'clientip':_0x287ce5,'timestamp':new Date()[_0x3dbadb(0x240)](),'expiry':_0x52b544},_0x52b544!=_0x3dbadb(0x276)?(await sendTelegram(_0x81803e['chat']['id'],'Access\x20enabled\x20for\x20'+_0x52b544+_0x3dbadb(0x9c),{'parse_mode':_0x3dbadb(0xcc)}),io['to'](_0x589681)[_0x3dbadb(0x115)](_0x3dbadb(0x297),{'access':{'allow':![],'reason':_0x3dbadb(0x101),'token':null}})):(await sendTelegram(_0x81803e[_0x3dbadb(0x28d)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x589681)['emit'](_0x3dbadb(0x297),{'access':{'allow':![],'reason':_0x3dbadb(0x203),'token':null}}));});}}async function loginAccess2FA(_0xc84373,_0x1bfde4){const _0x4005b7=_0x11d260;if(tgBot&&settings[_0x4005b7(0x91)]){const _0x2fcf71=uuidRandom();tmpStorage[_0x2fcf71]={'uuid':_0xc84373,'externalip':_0x1bfde4};const _0x8251ee=Markup['inlineKeyboard']([Markup[_0x4005b7(0x21b)][_0x4005b7(0x24d)](_0x4005b7(0x1f2),'login2fa_'+loginExpiry+'_'+_0x2fcf71),Markup['button']['callback'](_0x4005b7(0x276),'login2fa_reject_'+_0x2fcf71)]);await sendTelegram(settings[_0x4005b7(0x91)],_0x4005b7(0xee)+normalizeIP(_0x1bfde4)[_0x4005b7(0x1ed)]+'\x20?',_0x8251ee),tgBot[_0x4005b7(0x1ec)](/login2fa_(.+)_(.+)/,async _0x2d9bbb=>{const _0x149a74=_0x4005b7,_0x586d61=_0x2d9bbb[_0x149a74(0x13d)][0x1],_0x3fdc61=_0x2d9bbb['match'][0x2],{uuid:_0x27c6ff,externalip:_0x1f5083}=tmpStorage[_0x3fdc61];delete tmpStorage[_0x3fdc61],_0x2d9bbb[_0x149a74(0x1e7)](),devices[_0x27c6ff][_0x149a74(0x1fb)]={'clientip':_0x1f5083,'timestamp':new Date()[_0x149a74(0x240)](),'expiry':_0x586d61},_0x586d61!=_0x149a74(0x276)?(await sendTelegram(_0x2d9bbb[_0x149a74(0x28d)]['id'],_0x149a74(0x102),{'parse_mode':_0x149a74(0xcc)}),io['to'](_0x27c6ff)['emit'](_0x149a74(0x297),{'access':{'allow':![],'reason':_0x149a74(0x101),'token':null}})):(await sendTelegram(_0x2d9bbb[_0x149a74(0x28d)]['id'],'Login\x20rejected'),io['to'](_0x27c6ff)[_0x149a74(0x115)](_0x149a74(0x297),{'access':{'allow':![],'reason':_0x149a74(0x86),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x54f8bc=_0x11d260;return dbConfig['get'](_0x54f8bc(0x17e))[_0x54f8bc(0x243)](_0x54f8bc(0xa4))[_0x54f8bc(0x13f)]({'status':_0x54f8bc(0x1e6)})[_0x54f8bc(0x165)]()||[];}function getDisabledBots(){const _0x4cf8f9=_0x11d260;return dbConfig[_0x4cf8f9(0x111)](_0x4cf8f9(0x17e))[_0x4cf8f9(0x243)]('botID')[_0x4cf8f9(0x13f)]({'status':_0x4cf8f9(0x1fc)})[_0x4cf8f9(0x165)]()||[];}function getBotAttributes(_0x331942){const _0x532310=_0x11d260;let _0x5c9b87={};const _0xbf3b4c=configpath+_0x532310(0xf6)+_0x331942+_0x532310(0x1d2),_0x11acfd=fs[_0x532310(0x19c)](_0xbf3b4c);if(_0x11acfd){const _0x23bd8d=fs[_0x532310(0x1f6)](_0xbf3b4c);try{const _0x421252=JSON[_0x532310(0x25a)](_0x23bd8d),_0x563164=_0x421252?_0x421252[_0x532310(0x12d)][0x0]['headless']:![];_0x5c9b87[_0x532310(0x199)]=_0x563164?_0x532310(0x15f):_0x532310(0x140),_0x5c9b87[_0x532310(0x95)]=_0x421252?_0x421252[_0x532310(0x12d)][0x0][_0x532310(0x95)]:_0x532310(0xbd)+_0x331942;}catch(_0x225743){_0x5c9b87['mode']=_0x532310(0x140),_0x5c9b87['botname']='Bot\x20'+_0x331942;}}else _0x5c9b87[_0x532310(0x199)]='manual',_0x5c9b87[_0x532310(0x95)]=_0x532310(0xbd)+_0x331942;return _0x5c9b87;}function getBotsWithMode(){const _0x20c013=_0x11d260,_0x5c5b87=dbConfig[_0x20c013(0x111)](_0x20c013(0x17e))[_0x20c013(0x243)](_0x20c013(0xa4))[_0x20c013(0x165)]()||[];return _0x5c5b87[_0x20c013(0x200)](_0x3741a6=>{const _0x2b6e28=_0x20c013;let _0x4c71cb=getBotAttributes(_0x3741a6['botID']);_0x3741a6['mode']=_0x4c71cb[_0x2b6e28(0x199)];}),_0x5c5b87;}function getBotExchanges(){const _0x47cec3=_0x11d260;let _0x329f7a=[];const _0x5aa86a=dbConfig[_0x47cec3(0x111)](_0x47cec3(0x17e))[_0x47cec3(0x243)](_0x47cec3(0xa4))[_0x47cec3(0x165)]()||[];_0x5aa86a[_0x47cec3(0x200)](_0x4eeee4=>{const _0x11f89d=_0x47cec3;if(_0x4eeee4['status']==_0x11f89d(0x1e6)){const _0x978622=configpath+_0x11f89d(0xf6)+_0x4eeee4[_0x11f89d(0xa4)]+_0x11f89d(0x1d2),_0x3d7a77=fs['existsSync'](_0x978622);let _0x2c72cc;if(_0x3d7a77){const _0x41591e=fs[_0x11f89d(0x1f6)](_0x978622);try{const _0x5d2a4b=JSON[_0x11f89d(0x25a)](_0x41591e);_0x2c72cc=_0x5d2a4b?_0x5d2a4b[_0x11f89d(0x12d)][0x0][_0x11f89d(0x23f)]:null;}catch(_0xe515dd){}}if(_0x2c72cc)_0x329f7a[_0x11f89d(0x180)](_0x2c72cc);}});const _0x4fb3fe=[...new Set(_0x329f7a)][_0x47cec3(0x245)]();return _0x4fb3fe;}async function initUser(){const _0x4c75a3=_0x11d260;if(!settings[_0x4c75a3(0x11c)]){const _0x39692a=uuidRandom();mixpanel[_0x4c75a3(0xbb)](_0x39692a),updateSetting(_0x4c75a3(0x11c),_0x39692a);}}async function initSecure(){const _0x289eb8=_0x11d260;let _0x32c998=getSecure();if(!_0x32c998['hasOwnProperty'](_0x289eb8(0x22c))){let _0x2aea5b=await generateKeys();_0x32c998[_0x289eb8(0x265)]=_0x2aea5b[_0x289eb8(0x265)],_0x32c998[_0x289eb8(0x18c)]=_0x2aea5b[_0x289eb8(0x18c)],_0x32c998['secret']=crypto['randomBytes'](0x20)[_0x289eb8(0x287)](_0x289eb8(0x25c));;storeSecure(_0x32c998);}}function getSettings(){const _0x989f6a=_0x11d260;return dbSettings['get'](_0x989f6a(0x21c))[_0x989f6a(0x165)]()||{};}function getSecure(){const _0x3e8d05=_0x11d260;return dbSecure[_0x3e8d05(0x111)]('secure')['value']()||{};}function getBlacklist(){const _0x578b87=_0x11d260;return dbSecure['get'](_0x578b87(0x1e5))[_0x578b87(0x165)]()||[];}function broadcastToBots(_0x465934,_0x406a08){const _0x1374b3=_0x11d260;config[_0x1374b3(0x200)](_0x128417=>{const _0x1c0ca5=_0x1374b3;if(_0x128417['status']==_0x1c0ca5(0x1e6)&&_0x128417[_0x1c0ca5(0x22b)]==_0x1c0ca5(0x19f)||_0x128417[_0x1c0ca5(0x297)]==_0x1c0ca5(0xa8)&&_0x128417[_0x1c0ca5(0x22b)]==_0x1c0ca5(0x19f)){if(pid[_0x128417['botID']])pid[_0x128417[_0x1c0ca5(0xa4)]][_0x1c0ca5(0xb9)]({[_0x465934]:_0x406a08});}});}async function storeSettings(_0x34d2d7,_0x3746ee=![]){const _0x10e03f=_0x11d260;_0x34d2d7={...settings,..._0x34d2d7};if(_0x3746ee&&_0x34d2d7[_0x10e03f(0x21e)]!=_0x10e03f(0x16c)&&_0x34d2d7[_0x10e03f(0x21e)]!=_0x10e03f(0x114)&&_0x34d2d7['bbPassword']!=''){const _0x4b8b25=decryptRSA(secure[_0x10e03f(0x18c)],_0x34d2d7[_0x10e03f(0x21e)])[_0x10e03f(0x11e)](_0x10e03f(0xb3))[0x0],_0x891188=bcrypt[_0x10e03f(0xb0)](_0x4b8b25,saltRounds);_0x34d2d7={..._0x34d2d7,'bbPassword':_0x891188};}if(_0x3746ee&&_0x34d2d7[_0x10e03f(0xa6)]!='************'&&_0x34d2d7[_0x10e03f(0xa6)]!=_0x10e03f(0x114)&&_0x34d2d7[_0x10e03f(0xa6)]!=''){const _0x423fa9=decryptRSA(secure[_0x10e03f(0x18c)],_0x34d2d7[_0x10e03f(0xa6)])['split']('|@|')[0x0];_0x34d2d7={..._0x34d2d7,'telegramToken':_0x423fa9};}if(_0x3746ee&&_0x34d2d7[_0x10e03f(0x286)]!=_0x10e03f(0x16c)&&_0x34d2d7[_0x10e03f(0x286)]!='***'&&_0x34d2d7[_0x10e03f(0x286)]!=''){const _0x775fa9=decryptRSA(secure[_0x10e03f(0x18c)],_0x34d2d7[_0x10e03f(0x286)])[_0x10e03f(0x11e)]('|@|')[0x0];_0x34d2d7={..._0x34d2d7,'marketcapApi':_0x775fa9};}const _0x10df5f=_0x34d2d7[_0x10e03f(0xa6)]!=_0x10e03f(0x16c)&&_0x34d2d7['telegramToken']!=settings[_0x10e03f(0xa6)]||_0x34d2d7['telegramUsername']!=settings[_0x10e03f(0xf3)],_0x5bd119=_0x34d2d7[_0x10e03f(0xa6)]==''||_0x34d2d7['telegramUsername']=='',_0x541fa0=_0x34d2d7[_0x10e03f(0x286)]&&_0x34d2d7[_0x10e03f(0x286)]!=_0x10e03f(0x16c)&&_0x34d2d7[_0x10e03f(0x286)]!=settings['telegramToken'];_0x10df5f&&(_0x34d2d7[_0x10e03f(0x91)]=null,_0x34d2d7['telegramEvents']=_0x10e03f(0x1e4));for(const [_0x3c7b88,_0x5f49d6]of Object[_0x10e03f(0xf7)](_0x34d2d7)){if(_0x3c7b88==_0x10e03f(0xa6)&&_0x5f49d6==_0x10e03f(0x16c)){_0x34d2d7['telegramToken']=settings[_0x10e03f(0xa6)];continue;};if(_0x3c7b88==_0x10e03f(0x21e)&&_0x5f49d6==_0x10e03f(0x16c)){_0x34d2d7[_0x10e03f(0x21e)]=settings[_0x10e03f(0x21e)];continue;};if(_0x3c7b88==_0x10e03f(0x286)&&_0x5f49d6==_0x10e03f(0x16c)){_0x34d2d7['marketcapApi']=settings['marketcapApi'];continue;};dbSettings[_0x10e03f(0x117)]('settings.'+_0x3c7b88,_0x5f49d6)[_0x10e03f(0x27f)]();}settings=_0x34d2d7,io['to'](_0x10e03f(0x10a))[_0x10e03f(0x115)]('settings',cleanSettings()),broadcastToBots(_0x10e03f(0x221),settings[_0x10e03f(0x221)]),broadcastToBots(_0x10e03f(0x1c1),settings[_0x10e03f(0x1c1)]),broadcastToBots(_0x10e03f(0x286),settings[_0x10e03f(0x286)]);if(_0x10df5f&&!_0x5bd119)initTelegram();if(_0x10df5f&&_0x5bd119)disableTelegram();getAllClients()[_0x10e03f(0x200)](_0x3009c7=>{const _0x2eb228=_0x10e03f;getSocket(_0x3009c7['id'])[_0x2eb228(0x115)]('status',{'access':{'allow':![],'reason':_0x2eb228(0x101),'token':null}});}),_0x541fa0&&(await sleep(0xbb8),testMarketcapApi(_0x34d2d7[_0x10e03f(0x286)]));}async function testMarketcapApi(_0x6aa232){const _0x3d4cc5=_0x11d260,_0x553766=['BCT',_0x3d4cc5(0x80)];try{await axios['get'](_0x3d4cc5(0x127),{'headers':{'X-CMC_PRO_API_KEY':_0x6aa232},'params':{'symbol':_0x553766[_0x3d4cc5(0x287)]()}});}catch(_0x1be151){_0x1be151[_0x3d4cc5(0x287)]()[_0x3d4cc5(0x274)](_0x3d4cc5(0x19e))?(io['to'](_0x3d4cc5(0x10a))[_0x3d4cc5(0x115)](_0x3d4cc5(0x15b),_0x3d4cc5(0xc9)),logger[_0x3d4cc5(0x1da)](_0x3d4cc5(0xc9))):(io['to'](_0x3d4cc5(0x10a))[_0x3d4cc5(0x115)](_0x3d4cc5(0x15b),_0x3d4cc5(0x1bf)),logger[_0x3d4cc5(0x1da)](_0x3d4cc5(0x1bf)),logger[_0x3d4cc5(0x13e)](_0x3d4cc5(0x8c),_0x1be151[_0x3d4cc5(0x287)]()+_0x3d4cc5(0x1e1)+_0x1be151['code']));return;}logger[_0x3d4cc5(0x13e)](_0x3d4cc5(0x284));}function updateSetting(_0x4af142,_0x13b66d){const _0x413abc=_0x11d260;dbSettings['set']('settings.'+_0x4af142,_0x13b66d)[_0x413abc(0x27f)](),settings=getSettings(),io['to'](_0x413abc(0x10a))[_0x413abc(0x115)](_0x413abc(0x21c),cleanSettings());}function storeSecure(_0xd1dbf3){const _0x4407a4=_0x11d260;dbSecure[_0x4407a4(0x111)]('secure')[_0x4407a4(0x180)](_0xd1dbf3)[_0x4407a4(0x27f)](),secure=_0xd1dbf3;}function addBlacklist(_0x3b9202){const _0xfad74e=_0x11d260;cleanBlacklist();let _0x1bd230;devices[_0x3b9202][_0xfad74e(0x172)]?_0x1bd230=Math['max'](devices[_0x3b9202][_0xfad74e(0x172)][_0xfad74e(0x256)],loginExpiry):_0x1bd230=loginExpiry,dbSecure[_0xfad74e(0x111)](_0xfad74e(0x1e5))[_0xfad74e(0x180)]({'expiry':new Date()[_0xfad74e(0x240)]()+_0x1bd230*0x3c*0x3e8,'token':devices[_0x3b9202][_0xfad74e(0x194)]['token']})[_0xfad74e(0x27f)](),blacklist=dbSecure[_0xfad74e(0x111)](_0xfad74e(0x1e5))['value']();}function cleanBlacklist(){const _0x2c9e2d=_0x11d260;let _0x56a962=dbSecure['get'](_0x2c9e2d(0x1e5))[_0x2c9e2d(0xe0)]()[_0x2c9e2d(0x165)](),_0x376012=new Date()[_0x2c9e2d(0x240)]();_0x56a962['forEach'](_0x56450e=>{const _0x54c194=_0x2c9e2d;_0x56450e[_0x54c194(0x256)]<_0x376012&&dbSecure[_0x54c194(0x111)](_0x54c194(0x1e5))['remove']({'expiry':_0x56450e[_0x54c194(0x256)]})[_0x54c194(0x27f)]();});}function initStates(){const _0x3859bd=_0x11d260;let _0x4ff27c=getConfiguration();_0x4ff27c[_0x3859bd(0x200)](_0x5b48a8=>{_0x5b48a8['live']='stopped';}),storeConfiguration(_0x4ff27c);}async function generateKeys(){const _0x25e2f4=_0x11d260,_0x4f303b=forge['pki'][_0x25e2f4(0xf4)][_0x25e2f4(0xf2)]({'bits':0x1000,'e':0x10001}),_0x2e0585=forge[_0x25e2f4(0x19b)][_0x25e2f4(0x277)](_0x4f303b[_0x25e2f4(0x18c)]),_0x22bba8=forge[_0x25e2f4(0x19b)][_0x25e2f4(0x1b5)](_0x4f303b[_0x25e2f4(0x265)]);return{'privateKey':_0x2e0585,'publicKey':_0x22bba8};}async function oneTimeMigration(){const _0x48392c=_0x11d260;let _0x2e56eb=getSettings(),_0x1ecff6=![];!_0x2e56eb[_0x48392c(0x159)](_0x48392c(0x235))&&(_0x2e56eb[_0x48392c(0x235)]=0x0,_0x1ecff6=!![]);!_0x2e56eb[_0x48392c(0x159)](_0x48392c(0x116))&&(_0x2e56eb[_0x48392c(0x116)]=0x0,_0x1ecff6=!![]);!_0x2e56eb[_0x48392c(0x159)](_0x48392c(0xcb))&&(_0x2e56eb[_0x48392c(0xcb)]=_0x48392c(0xe6),_0x1ecff6=!![]);!_0x2e56eb['hasOwnProperty']('onepagemode')&&(_0x2e56eb[_0x48392c(0x1c1)]=![],_0x1ecff6=!![]);!_0x2e56eb['hasOwnProperty']('marketcapApi')&&(_0x2e56eb['marketcapApi']='',_0x1ecff6=!![]);if(_0x1ecff6)storeSettings(_0x2e56eb);try{fs[_0x48392c(0x13b)](configbackuppath,{'withFileTypes':!![]})[_0x48392c(0x200)](_0x1ac4ad=>{const _0x39c4b4=_0x48392c;if(!_0x1ac4ad[_0x39c4b4(0x1ad)]()){if(!_0x1ac4ad[_0x39c4b4(0xd4)][_0x39c4b4(0xf8)]('backup-full@'))fs[_0x39c4b4(0x298)](configbackuppath+_0x1ac4ad[_0x39c4b4(0xd4)]);}else fs[_0x39c4b4(0x1f4)](configbackuppath+_0x1ac4ad[_0x39c4b4(0xd4)],{'recursive':!![]});});}catch(_0x23f9fa){logger[_0x48392c(0x13e)](_0x48392c(0x175),_0x23f9fa);}}function storeConfiguration(_0x8b9019){const _0x76e6c8=_0x11d260;dbConfig['get'](_0x76e6c8(0x17e))[_0x76e6c8(0x18f)]()[_0x76e6c8(0x27f)](),dbConfig[_0x76e6c8(0x111)](_0x76e6c8(0x17e))['push'](..._0x8b9019)[_0x76e6c8(0x27f)](),config=_0x8b9019;}async function resetPassword(){const _0x4144bb=_0x11d260;if(tgBot&&settings[_0x4144bb(0x91)]){const _0xf60458=Markup[_0x4144bb(0x1ce)]([Markup[_0x4144bb(0x21b)][_0x4144bb(0x24d)](_0x4144bb(0xd3),'resetpw_yes'),Markup['button'][_0x4144bb(0x24d)]('no',_0x4144bb(0x22f))]);await sendTelegram(settings['telegramChatId'],_0x4144bb(0x90),_0xf60458),tgBot[_0x4144bb(0x1ec)](/resetpw_(.+)/,async _0x3f7606=>{const _0x8cc013=_0x4144bb,_0x70f8a=_0x3f7606['match'][0x1];_0x3f7606['editMessageReplyMarkup']();if(_0x70f8a!='no'){const _0x35657a=0xf,_0x523610=_0x8cc013(0x252),_0x54bf12=Array[_0x8cc013(0xce)](crypto['randomFillSync'](new Uint32Array(_0x35657a)))[_0x8cc013(0x268)](_0x253961=>_0x523610[_0x253961%_0x523610['length']])[_0x8cc013(0x103)](''),_0x3f2232=bcrypt[_0x8cc013(0xb0)](_0x54bf12,saltRounds);storeSettings({'bbPassword':_0x3f2232}),await sendTelegram(_0x3f7606['chat']['id'],_0x8cc013(0x296)+_0x54bf12,{'parse_mode':'HTML'});}else await sendTelegram(_0x3f7606[_0x8cc013(0x28d)]['id'],_0x8cc013(0x1a3));});}}async function confirmRestore(_0x1760b8,_0x1d41ee){const _0x5b58e9=_0x11d260;io['to'](_0x5b58e9(0x10a))[_0x5b58e9(0x115)](_0x5b58e9(0x15b),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x5b58e9(0x123));if(tgBot&&settings[_0x5b58e9(0x91)]){const _0x3075dd=uuidRandom();tmpStorage[_0x3075dd]={'path':_0x1760b8,'filename':_0x1d41ee};const _0x55479e=Markup[_0x5b58e9(0x1ce)]([Markup[_0x5b58e9(0x21b)]['callback'](_0x5b58e9(0xd3),'restore_yes_'+_0x3075dd),Markup[_0x5b58e9(0x21b)][_0x5b58e9(0x24d)]('no',_0x5b58e9(0x150)+_0x3075dd)]);await sendTelegram(settings[_0x5b58e9(0x91)],_0x5b58e9(0x120),_0x55479e),tgBot['action'](/restore_(.+)_(.+)/,async _0xf613cb=>{const _0x3c95b6=_0x5b58e9,_0x271e19=_0xf613cb['match'][0x1],_0x9d43ee=_0xf613cb[_0x3c95b6(0x13d)][0x2],{path:_0x4de7e9,filename:_0x44675f}=tmpStorage[_0x9d43ee];delete tmpStorage[_0x9d43ee],_0xf613cb['editMessageReplyMarkup'](),_0x271e19==_0x3c95b6(0xd3)?(logger[_0x3c95b6(0x13e)]('Restore\x20process\x20confirmed'),await sendTelegram(_0xf613cb['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x3c95b6(0xcc)}),unzipFile(_0x4de7e9,_0x44675f)):(logger['debug']('Restore\x20process\x20aborted'),await sendTelegram(_0xf613cb[_0x3c95b6(0x28d)]['id'],'Restore\x20process\x20aborted'));});}}function _0x27bc(){const _0x542d3a=['/download/:type','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','You\x20can\x20use\x20the\x20following\x20commands:\x0a','full','address','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','token','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','metrics_','\x20-\x20','alerts','auth','all','blacklist','enabled','editMessageReplyMarkup','string','Enabled\x20Bot\x20','/off\x20-\x20stop\x20bot(s)\x0a','15\x20min','action','show',')\x20|\x20Bot\x20','#RES#\x20if\x20running\x20locally\x0a','keys','Ok,\x20will\x20send\x20order\x20notifications\x20only','accept','Invalid\x20IP\x20address','rmSync','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','readFileSync','clients','4pzbIaI','login\x20required','/start','telegram2FaApproval','disabled','simple','1000','telegram','forEach','\x20(1)','logs/','temporary\x20access\x20rejected','test','-results.json','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','ipc','Unauthorized\x20attempt\x20to\x20store\x20configuration','Yes','conn','version.json','Backup\x20file\x20unzipped\x20and\x20stored','allow','delete-bot','emitHistory','reason','params','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20login\x20attempt\x20(timeout)','2320455sTKBTC','apiSecret','message','enable','isIPv4MappedAddress','261rLWFHd','/:bot/performance','button','settings','restart','bbPassword','Unauthorized\x20attempt\x20to\x20get\x20portfolio','get-backup-files','timeshift','Alerts','logged\x20out','internal','\x20>\x20','Unauthorized\x20attempt\x20to\x20show\x20configuration','get-starting-balances','Restarting\x20Bot\x20','inherit','#RES#\x20if\x20running\x20on\x20server','live','secret','User\x20has\x20been\x20validated','logs','resetpw_no','bot.js','date-fns','cancelLoading','https://api.ipify.org?format=json','#RES#','lastmsgtelegram','reinstall_yes','2FA\x20required','reply','update_yes','store-headless','backup-full','delete-alerts','track','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','exchange','getTime','disconnect','jszip','sortBy','getHours','sort','slice','express-fileupload','handshake','output-002.log','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','createWriteStream','access\x20timeout','callback','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','9372glmzMI','kill','index.html','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','uuid','6b67f3d61ee94b8f5c80b4affef4c4d9','expiry','/disable\x20-\x20disable\x20notifications\x0a','add','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','parse','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','hex','backup','-events.json','updatebotmanager','All\x20bots','find','lowdb','/upload-backup','getSeconds','publicKey','names','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','map','assign','Error\x20sending\x20','data','output-001.log','store-configuration','\x1b[33m','sha256','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','SIGINT','clientip','ipaddr.js','includes','username','reject','privateKeyToPem','log','event','replace','config_orders','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/names\x20-\x20show\x20bot\x20names\x0a','http','write','Token\x20blacklisted','Bot\x20Mgr\x20>\x20','backup-files','zip/','CoinMarketCap\x20API\x20key\x20validated','2728685mdasUD','marketcapApi','toString','getMinutes','toIPv4Address','file','logout','sendPortfolioTelegram','chat','backupfile','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','resetHistory','cancel-loading','text','--------------------------------------','once','warning','Password\x20has\x20been\x20reset\x20to:\x20','status','unlinkSync','ETH','Notifications\x20enabled','/:bot/coins','exec','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','production','2FA\x20login\x20rejected','Logged\x20in\x20user\x20...','toggle','graphql-request','SIGTERM','output-003.log','Error\x20details:','portfolio_','Logged\x20out\x20user\x20...','tempaccess_5_','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegramChatId','user','place-order','Starting\x20Balance\x20Bot\x20reinstallation','botname','stopped','command','build2','messages','pidExpireLogin','/metrics\x20-\x20show\x20bot\x20performance\x0a','\x20minutes','.zip','create','copyFileSync','telegramEvents','\x20files\x20over\x20Telegram:','login\x20token\x20valid','reinstall','botID','Unauthorized\x20attempt\x20to\x20delete\x20alerts','telegramToken','title','new','invalid\x20credentials','toggleBotMode','Error\x20while\x20deleting\x20config\x20files:\x20','sendMessage','off_','config_alerts','Starting\x20new\x20bot\x20|\x20Bot\x20','hashSync','/status\x20-\x20show\x20bot(s)\x20status\x0a','orders','|@|','private','port',')\x20\x20\x20|\x20Bot\x20','async','Invalid\x20username\x20or\x20IP\x20address','send','Restore\x20backup\x20file\x20','alias','search','Bot\x20','127.0.0.1','bb-secure.json','address\x20already\x20in\x20use','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Backup\x20file\x20uploaded','login\x20token\x20generated','Ok,\x20will\x20send\x20alert\x20notifications\x20only','lowdb/adapters/FileSync','NTBA_FIX_319','reset-password','Notifications\x20types:\x20','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','bbUsername','latestversion','HTML','files','from','headless','Unauthorized\x20attempt\x20to\x20log\x20out','listen','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','yes','name','version','referer','headers','telegramEnabled','temporary\x20token\x20generated','temporary\x20access\x20not\x20allowed','tempaccess_reject_','env','Error:\x20Invalid\x20argument\x20','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','=>\x20Go\x20to\x20#CYA#http://','cloneDeep','config/','backup-full.zip','portfolio','update-bb','remoteAddress','0.0.0','error','reinstall_no','Notifications\x20disabled','/:bot/history','All','argv','tempaccess_15_','Allow\x20login\x20from\x20IP\x20address\x20','replyWithDocument','update_no','$1_$2_$3','generateKeyPair','telegramUsername','rsa','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','bot-','entries','startsWith','password','format',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20get\x20events','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','All\x20bots\x20running\x20right\x20now','\x20(2)','reload','Login\x20accepted','join','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Server','toIPv4MappedAddress','117310LCIFKN','post','getMonth','botmanager','any','backup-full@','child_process','encryptedUuid','\x20|\x20','3000','get','Network\x20Interfaces:','timestamp','***','emit','lastmsgemitted','set','type','<b>Balance\x20Bot\x20Status:</b>\x0a','on_','download','userid','order','split','verify','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Orders','success','toggle-bot-mode','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','use','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','reinstall-bb','*$1*','temp/','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','backup/','bot','2FA\x20login\x20token\x20generated','\x1b[0m','Unauthorized\x20attempt\x20to\x20download\x20','bbvNew','telegrammsg','node','static','statSync','(((.+)+)+)+$','Invalid\x20authentication\x20token\x20(1)','Telegram\x20error:','range','2FA','readdirSync','createServer','match','debug','filter','manual','exit','\x1b[35m','Unauthorized\x20attempt\x20to\x20confirm\x20message','binary','bb-settings.json','178655SeLwju','Notifications\x20enabled\x0a','writeFileSync','mkdirSync','store-settings','off','temporary\x20access\x20timeout','Unauthorized\x20attempt\x20to\x20update\x20bot','decode64','Starting\x20(','restore_no_','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','store','/enable\x20-\x20enable\x20notifications\x0a','defaults','start','apiPassword','getFullYear','then','hasOwnProperty','bbvReceive','notification','initclient','apiKey','sockets','auto','padStart','api-eu.mixpanel.com','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','host','sendMetricsTelegram','value','privateKeyFromPem','storeHeadless','temporaryAccessAllowed','getDate','toggle_','Idling\x20(','************','loginRequired','\x1b[31m','\x20to\x20','get-portfolio','-performance.json','telegramIpApproval','versions','Starting\x20Balance\x20Bot\x20update','Error\x20removing\x20old\x20backup\x20files:','help','sign','stringify','min','-----------------------------------------------------------------------------------','f2aRequired','confirm-message','stop','bots','Failed\x20to\x20download\x20','push','node-forge','Invalid\x20authentication\x20token\x20(2)','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','number','\x1b[34m','update','kind','login\x20not\x20required','privateKey','length','placeOrder','remove','apply','update-bot','jsonwebtoken','started','access','getStartingBalances','(staging)','#RES#\x20','generateAsync','mode','connected','pki','existsSync','Session\x20expired\x20for\x20user\x20...','status\x20code\x20401','running','size','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','pidRefreshToken','Password\x20reset\x20rejected','restore-backup-file','6113610pNwxbW','reset-history','loadAsync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','endsWith',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Disabled\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20messages','isDirectory','sendFile','showConfig','/:bot/support','build','8NIMkDc','3719191sNGtLM','constructor','publicKeyToPem','5\x20min','new-disabled','/output-000.log','connection','storeFiat','Notifications\x20disabled\x0a','get-messages','DEFLATE','storeConfiguration','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','function','onepagemode','telegraf','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','No\x20bots\x20running\x20right\x20now','/restart\x20-\x20restart\x20bot(s)\x0a','tkn','login','getUTCHours','compareSync','catch','tempaccess_30_','yargs/yargs','/:bot/configuration','inlineKeyboard','::ffff:127.0.0.1','Telegraf\x20error:','_nsps','-config.json','bb-config.json','/backup\x20-\x20receive\x20backup\x20files\x0a','Markdown','[ip-address]'];_0x27bc=function(){return _0x542d3a;};return _0x27bc();}function getServerTime(){const _0x2d278b=_0x11d260,_0x5c8c1b=new Date();return _0x5c8c1b['getFullYear']()+'/'+(_0x5c8c1b['getMonth']()+0x1)[_0x2d278b(0x287)]()['padStart'](0x2,'0')+'/'+_0x5c8c1b[_0x2d278b(0x169)]()['toString']()[_0x2d278b(0x160)](0x2,'0')+'\x20'+_0x5c8c1b[_0x2d278b(0x244)]()[_0x2d278b(0x287)]()[_0x2d278b(0x160)](0x2,'0')+':'+_0x5c8c1b[_0x2d278b(0x288)]()[_0x2d278b(0x287)]()[_0x2d278b(0x160)](0x2,'0')+':'+_0x5c8c1b[_0x2d278b(0x264)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x39fc96=_0x11d260,_0x22fa74=shiftedTime();return _0x22fa74[_0x39fc96(0x157)]()+'/'+(_0x22fa74['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x22fa74[_0x39fc96(0x169)]()[_0x39fc96(0x287)]()[_0x39fc96(0x160)](0x2,'0')+'\x20'+_0x22fa74[_0x39fc96(0x244)]()[_0x39fc96(0x287)]()[_0x39fc96(0x160)](0x2,'0')+':'+_0x22fa74[_0x39fc96(0x288)]()['toString']()[_0x39fc96(0x160)](0x2,'0')+':'+_0x22fa74[_0x39fc96(0x264)]()[_0x39fc96(0x287)]()[_0x39fc96(0x160)](0x2,'0');}function getCleanTimeStamp(){const _0x7ed24d=_0x11d260,_0x1fe6d7=shiftedTime();return _0x1fe6d7['getFullYear']()+(_0x1fe6d7[_0x7ed24d(0x109)]()+0x1)['toString']()[_0x7ed24d(0x160)](0x2,'0')+_0x1fe6d7[_0x7ed24d(0x169)]()[_0x7ed24d(0x287)]()[_0x7ed24d(0x160)](0x2,'0')+'-'+_0x1fe6d7[_0x7ed24d(0x244)]()['toString']()['padStart'](0x2,'0')+_0x1fe6d7[_0x7ed24d(0x288)]()['toString']()[_0x7ed24d(0x160)](0x2,'0')+_0x1fe6d7[_0x7ed24d(0x264)]()[_0x7ed24d(0x287)]()[_0x7ed24d(0x160)](0x2,'0');}function shiftedTime(){const _0x1dc4a0=_0x11d260,_0x717bd7=new Date();let _0x1106bf=_0x717bd7;if(settings[_0x1dc4a0(0x221)]&&settings[_0x1dc4a0(0x221)]!==0x0)_0x1106bf=fns[_0x1dc4a0(0x258)](_0x717bd7,{'hours':settings['timeshift']});return _0x1106bf;}async function startScheduler(){const _0x27f881=_0x11d260,_0x182ee3=new Date()[_0x27f881(0x1c8)](),_0xfa1f72=shiftedTime()['getHours']();_0xfa1f72==0x4&&backupConfigFiles(),_0xfa1f72==0x0&&(rotateLogFiles(),logger['debug'](_0x27f881(0x293)),logger[_0x27f881(0x13e)]('Running\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x27f881(0x197)+(environment=='staging'?_0x27f881(0x196):'')),logger[_0x27f881(0x13e)](_0x27f881(0x293))),_0x182ee3%0x6==0x0&&triggerAnalytics(),_0x182ee3%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x549659){const _0x1c9c45=_0x11d260;logger[_0x1c9c45(0x13e)](_0x1c9c45(0xba)+_0x549659);const _0x1d8281=getBotsWithMode();_0x1d8281['length']>0x0?confirmRestore(configbackuppath,_0x549659):unzipFile(configbackuppath,_0x549659);}async function getBackupFiles(_0x47c782=null){const _0x1ff2d3=_0x11d260;let _0x154f93=[],_0x2743b2=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2743b2[_0x1ff2d3(0x245)]((_0x5c19c5,_0x3e1589)=>_0x5c19c5[_0x1ff2d3(0xd4)]<_0x3e1589[_0x1ff2d3(0xd4)]?0x1:_0x3e1589[_0x1ff2d3(0xd4)]<_0x5c19c5['name']?-0x1:0x0),_0x2743b2[_0x1ff2d3(0x200)](_0x1a59f1=>{const _0xa7204c=_0x1ff2d3;if(!_0x1a59f1['isDirectory']()&&_0x1a59f1['name'][_0xa7204c(0xf8)](_0xa7204c(0x10c))&&_0x1a59f1[_0xa7204c(0xd4)][_0xa7204c(0x1a9)]('.zip')){const _0x2102a2=formatDate(fs[_0xa7204c(0x135)](configbackuppath+_0x1a59f1[_0xa7204c(0xd4)])['mtime']);_0x154f93[_0xa7204c(0x180)]({'name':_0x1a59f1['name'],'mtime':_0x2102a2});}});if(_0x47c782)io['to'](_0x47c782)[_0x1ff2d3(0x115)](_0x1ff2d3(0x282),_0x154f93);else return _0x154f93;}async function backupConfigFiles(){const _0xfb0d26=_0x11d260;await zipFiles(_0xfb0d26(0x23b));const _0x204540=getCleanTimeStamp();fs['copyFileSync'](zippath+_0xfb0d26(0xe2),configbackuppath+(_0xfb0d26(0x10c)+_0x204540+_0xfb0d26(0x9d)));let _0x526584=fs[_0xfb0d26(0x13b)](configbackuppath,{'withFileTypes':!![]});_0x526584[_0xfb0d26(0x245)]((_0x567fe3,_0x971a30)=>_0x567fe3[_0xfb0d26(0xd4)]<_0x971a30[_0xfb0d26(0xd4)]?0x1:_0x971a30[_0xfb0d26(0xd4)]<_0x567fe3[_0xfb0d26(0xd4)]?-0x1:0x0),_0x526584['length']>maxBackups&&fs[_0xfb0d26(0x298)](configbackuppath+_0x526584[_0x526584['length']-0x1][_0xfb0d26(0xd4)]);}function rotateLogFiles(){const _0x778b36=_0x11d260,_0x5ef1f8=fs[_0x778b36(0x135)](logspath+'output-000.log'),_0x201fa8=_0x5ef1f8[_0x778b36(0x1a0)]/0x400;if(_0x201fa8>0x64){let _0xcded9=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0xcded9[_0x778b36(0x245)]((_0x3450c5,_0x47c77b)=>_0x3450c5['name']<_0x47c77b[_0x778b36(0xd4)]?0x1:_0x47c77b[_0x778b36(0xd4)]<_0x3450c5['name']?-0x1:0x0),_0xcded9[_0x778b36(0x200)](_0x5e3ee5=>{const _0x20a95c=_0x778b36;if(_0x5e3ee5[_0x20a95c(0xd4)]==_0x20a95c(0x249))fs[_0x20a95c(0x9f)](logspath+_0x5e3ee5[_0x20a95c(0xd4)],logspath+_0x20a95c(0x8b));if(_0x5e3ee5[_0x20a95c(0xd4)]==_0x20a95c(0x26c))fs['copyFileSync'](logspath+_0x5e3ee5[_0x20a95c(0xd4)],logspath+_0x20a95c(0x249));_0x5e3ee5[_0x20a95c(0xd4)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x5e3ee5[_0x20a95c(0xd4)],logspath+_0x20a95c(0x26c)),fs[_0x20a95c(0x148)](logspath+_0x5e3ee5[_0x20a95c(0xd4)],''));});}}async function zipFiles(_0x19609b){const _0x31330f=_0x11d260;let _0x352948;if(_0x19609b==_0x31330f(0x22e))_0x352948=logspath;if(_0x19609b=='backup')_0x352948=configpath;if(_0x19609b==_0x31330f(0x23b))_0x352948=configpath;let _0x137448=fs['readdirSync'](_0x352948,{'withFileTypes':!![]});const _0x24fffe=new JSZip();_0x137448[_0x31330f(0x200)](_0x36b1cf=>{const _0xa1808f=_0x31330f;if(!_0x36b1cf[_0xa1808f(0x1ad)]()){let _0x240992=fs[_0xa1808f(0x1f6)](_0x352948+_0x36b1cf[_0xa1808f(0xd4)]);if(_0x19609b=='backup'){const _0x523b07=/^bot-[0-9]{3}-config.json$/,_0x5ae88a=_0x523b07['test'](_0x36b1cf['name']);if(_0x5ae88a){const _0x473387=JSON[_0xa1808f(0x25a)](_0x240992);if(_0x473387[_0xa1808f(0x12d)][0x0]){_0x473387[_0xa1808f(0x12d)][0x0][_0xa1808f(0x15d)]=_0xa1808f(0x114),_0x473387[_0xa1808f(0x12d)][0x0][_0xa1808f(0x215)]=_0xa1808f(0x114);if(_0x473387[_0xa1808f(0x12d)][0x0][_0xa1808f(0x156)])_0x473387[_0xa1808f(0x12d)][0x0][_0xa1808f(0x156)]=_0xa1808f(0x114);}_0x240992=JSON['stringify'](_0x473387,null,0x2);}if(_0x36b1cf[_0xa1808f(0xd4)]==_0xa1808f(0x145)){const _0x5c59d=JSON[_0xa1808f(0x25a)](_0x240992);if(_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0x16d)])_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0x16d)]=![];if(_0x5c59d[_0xa1808f(0x21c)]['bbPassword'])_0x5c59d['settings'][_0xa1808f(0x21e)]=_0xa1808f(0x114);if(_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0xa6)])_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0xa6)]=_0xa1808f(0x114);if(_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0x91)])_0x5c59d['settings']['telegramChatId']=null;if(_0x5c59d[_0xa1808f(0x21c)][_0xa1808f(0x286)])_0x5c59d['settings'][_0xa1808f(0x286)]=_0xa1808f(0x114);_0x240992=JSON[_0xa1808f(0x178)](_0x5c59d,null,0x2);}if(_0x36b1cf[_0xa1808f(0xd4)]!=_0xa1808f(0xbf))_0x24fffe[_0xa1808f(0x28a)](_0x36b1cf['name'],_0x240992);}else _0x24fffe['file'](_0x36b1cf['name'],_0x240992);}});const _0x35c7fd=await _0x24fffe[_0x31330f(0x198)]({'type':'string','base64':![],'compression':_0x31330f(0x1bd)});fs[_0x31330f(0x148)](zippath+(_0x19609b+'.zip'),_0x35c7fd,_0x31330f(0x144));}async function unzipFile(_0x1eba0d,_0x26dcde){const _0x3b5510=_0x11d260;fs[_0x3b5510(0x13b)](configpath,{'withFileTypes':!![]})[_0x3b5510(0x200)](_0x4013b0=>{const _0x2c8ba2=_0x3b5510;if(!_0x4013b0[_0x2c8ba2(0x1ad)]())fs[_0x2c8ba2(0x1f4)](configpath+_0x4013b0[_0x2c8ba2(0xd4)]);});const _0xd4a3c7=fs[_0x3b5510(0x1f6)](_0x1eba0d+_0x26dcde,_0x3b5510(0x144)),_0x5c7366=await JSZip[_0x3b5510(0x1a7)](_0xd4a3c7,{'base64':![],'checkCRC32':!![]});for(const _0x5606a1 of Object[_0x3b5510(0x1f0)](_0x5c7366['files'])){const _0x200794=_0x5c7366[_0x3b5510(0xcd)][_0x5606a1],_0x7178c6=await _0x200794[_0x3b5510(0xb7)](_0x3b5510(0x1e8));fs[_0x3b5510(0x148)](configpath+_0x200794['name'],_0x7178c6);}fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x230ff4=>{const _0x437acd=_0x3b5510;if(!_0x230ff4[_0x437acd(0x1ad)]())fs[_0x437acd(0x1f4)](temppath+_0x230ff4[_0x437acd(0xd4)]);}),logger[_0x3b5510(0x13e)](_0x3b5510(0x20c)),process['send']({'restore':!![]},_0xd22b0f=>{});}async function getPublicIp(){const _0x466c4b=_0x11d260;try{const _0x2903fc=await axios['get'](_0x466c4b(0x233));publicip=_0x2903fc[_0x466c4b(0x26b)]['ip'];}catch(_0xb0433f){}}async function triggerAnalytics(){const _0x1f0e4d=_0x11d260;if(!publicip)await getPublicIp();const _0x3283f3=getBotsWithMode();let _0x388127=0x0;_0x3283f3[_0x1f0e4d(0x200)](_0x2f83d6=>{if(_0x2f83d6['status']==='enabled')_0x388127++;});const _0x4811d8=getBotExchanges();mixpanel[_0x1f0e4d(0x23d)](_0x1f0e4d(0x105),{'distinct_id':settings[_0x1f0e4d(0x11c)],'ip':publicip,'version':serverversion,'numbots':_0x3283f3[_0x1f0e4d(0x18d)],'numbotsenabled':_0x388127,'exchanges':_0x4811d8,'environment':environment});}async function getMessages(){const _0xdc28d4=_0x11d260,_0x2fb8bf=_0xdc28d4(0x259),_0xbd0e1c=new GraphQLClient(_0x2fb8bf),_0x8ffaed={'authorization':_0xdc28d4(0x183)},_0x69991a=serverversion[_0xdc28d4(0x11e)]('.'),_0x1f4ae4=_0x69991a[0x0]+'.'+_0x69991a[0x1],_0x20b0e4=Math[_0xdc28d4(0x179)](settings[_0xdc28d4(0x235)],settings[_0xdc28d4(0x116)]),_0x2f43a6={'last':parseInt(_0x20b0e4),'bbm':_0x1f4ae4},_0x1ea231=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3d73a9;try{_0x3d73a9=await _0xbd0e1c['request'](_0x1ea231,_0x2f43a6,_0x8ffaed);}catch(_0x196133){}if(_0x3d73a9&&_0x3d73a9[_0xdc28d4(0x99)]){let _0x9b771b=settings[_0xdc28d4(0x235)];newMessages=[];for(const _0x4982f2 of _0x3d73a9[_0xdc28d4(0x99)]){newMessages[_0xdc28d4(0x180)](_0x4982f2);let _0x5ab1fa=![];_0x4982f2['bbvNew']&&(updateSetting(_0xdc28d4(0xcb),_0x4982f2[_0xdc28d4(0x131)]),_0x5ab1fa=isNewerVersion(serverversion,_0x4982f2[_0xdc28d4(0x131)])||serverversion==_0x4982f2[_0xdc28d4(0x131)]);if(!_0x5ab1fa&&_0x4982f2['number']>_0x9b771b){if(_0x4982f2['bbvReceive']===_0xdc28d4(0x10b)||serverversion[_0xdc28d4(0xf8)](_0x4982f2[_0xdc28d4(0x15a)])){let _0x22cd0a=''+_0x4982f2[_0xdc28d4(0xa7)]+'\x0a\x0a'+_0x4982f2[_0xdc28d4(0x216)];const _0x1ce29c=await sendTelegramMsg(toTelegramMarkdown(_0x22cd0a),_0xdc28d4(0x1d5));if(_0x1ce29c)_0x9b771b=_0x4982f2[_0xdc28d4(0x187)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0xdc28d4(0x235),_0x9b771b),emitMessages();}}function emitMessages(){const _0x3dd96d=_0x11d260,_0x585215=settings['lastmsgemitted'];let _0x22becf=[];newMessages['forEach'](_0x4c93e4=>{const _0x2b0fc7=_0x5bdf;_0x4c93e4[_0x2b0fc7(0x187)]>_0x585215&&_0x22becf[_0x2b0fc7(0x180)](_0x4c93e4);}),_0x22becf['length']>0x0&&getAllClients()[_0x3dd96d(0x200)](_0x477f28=>{const _0x436cf1=_0x3dd96d;getSocket(_0x477f28['id'])[_0x436cf1(0x115)](_0x436cf1(0x216),_0x22becf);});}function confirmMessage(_0x8b03d2){updateSetting('lastmsgemitted',Number(_0x8b03d2));}function isNewerVersion(_0x5d5b99,_0x1835a1){const _0x2b8e0c=_0x11d260,_0x1a1f0a=_0x1835a1[_0x2b8e0c(0x11e)]('.'),_0xb3783e=_0x5d5b99[_0x2b8e0c(0x11e)]('.');for(var _0x2ceba8=0x0;_0x2ceba8<_0xb3783e[_0x2b8e0c(0x18d)];_0x2ceba8++){const _0x22d49d=~~_0xb3783e[_0x2ceba8],_0x51a16d=~~_0x1a1f0a[_0x2ceba8];if(_0x22d49d>_0x51a16d)return!![];if(_0x22d49d<_0x51a16d)return![];}return![];}function toTelegramMarkdown(_0x730c41){const _0x34eb26=_0x11d260,_0x18e77d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x16181a=/\*{2}(.+?)\*{2}/gim;return _0x730c41=_0x730c41[_0x34eb26(0x27a)](_0x18e77d,_0x34eb26(0xf1))['replace'](_0x16181a,_0x34eb26(0x129)),_0x730c41;}async function validateConfigFile(){const _0x3dc25f=_0x11d260,_0x51edb5=dbConfig[_0x3dc25f(0x111)](_0x3dc25f(0x17e))[_0x3dc25f(0x243)](_0x3dc25f(0xa4))[_0x3dc25f(0x165)]()||[];if(_0x51edb5[_0x3dc25f(0x18d)]==0x0){let _0x2d88f0=0x0,_0x384281=[];const _0x1d6b7c=/^bot-([0-9]{3})-config.json$/,_0x55dfdc=fs[_0x3dc25f(0x13b)](configpath);_0x55dfdc['forEach'](_0x210c1b=>{const _0x296ca2=_0x3dc25f,_0x2d4d9d=_0x1d6b7c[_0x296ca2(0x83)](_0x210c1b);if(_0x2d4d9d){const _0xd0ce9c=_0x2d4d9d[0x1];let _0x28aed3=getBotAttributes(_0xd0ce9c);_0x384281[_0x296ca2(0x180)]({'botID':_0xd0ce9c,'botname':_0x28aed3[_0x296ca2(0x95)],'status':_0x296ca2(0x1fc),'live':_0x296ca2(0x96)}),_0x2d88f0++;}}),_0x2d88f0!=0x0&&(dbConfig['get'](_0x3dc25f(0x17e))[_0x3dc25f(0x269)](_0x384281)[_0x3dc25f(0x27f)](),config=_0x384281,restoredConfigFile=_0x2d88f0);}}async function restoreConfigNotify(_0x235893){const _0x2a3f34=_0x11d260;let _0x2c36cd;if(restoredConfigFile==0x1)_0x2c36cd=_0x2a3f34(0x1dc);else _0x2c36cd='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x235893)io['to'](_0x2a3f34(0x10a))[_0x2a3f34(0x115)](_0x2a3f34(0x15b),_0x2c36cd);else{logger[_0x2a3f34(0x1fd)](_0x2a3f34(0x17a)),logger[_0x2a3f34(0x1fd)](_0x2c36cd),logger['simple'](_0x2a3f34(0x17a)),logger[_0x2a3f34(0x1fd)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x2a3f34(0xa0)]!=_0x2a3f34(0xb2))await sendTelegram(settings[_0x2a3f34(0x91)],_0x2a3f34(0x281)+_0x2c36cd);}}function decryptRSA(_0x3aaaa4,_0x51f717){const _0x22b619=_0x11d260,_0x4eae17=forge[_0x22b619(0x19b)][_0x22b619(0x166)](_0x3aaaa4),_0x56ca52=_0x4eae17['decrypt'](forge['util'][_0x22b619(0x14e)](_0x51f717),'RSA-OAEP',{'md':forge['md'][_0x22b619(0x26f)][_0x22b619(0x9e)](),'mgf1':{'md':forge['md'][_0x22b619(0x26f)][_0x22b619(0x9e)]()}});return _0x56ca52;}function validateCredentials(_0x520b05,_0x560e6b){const _0x540cd3=_0x11d260;if(_0x520b05[_0x540cd3(0x275)]==settings['bbUsername']&&bcrypt[_0x540cd3(0x1c9)](_0x520b05[_0x540cd3(0xf9)],settings[_0x540cd3(0x21e)])){if(settings[_0x540cd3(0x17b)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x11fd22=generateLoginToken(_0x560e6b);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x11fd22};}}else return{'allow':![],'reason':_0x540cd3(0xa9),'token':null};}function refreshToken(_0x3a5ff7){const _0x513349=_0x11d260,_0x4009fb=generateLoginToken(_0x3a5ff7);return{'allow':!![],'reason':_0x513349(0xc3),'token':_0x4009fb};}function validateAccess(_0x838763,_0x1a107c,_0x49326e){const _0x1dada9=_0x11d260,_0x327c00=_0x49326e?_0x49326e:devices[_0x1a107c]['ip'];let _0x313822;const _0x31d3b1=_0x24c3fc=>{const _0x5593bf=_0x5bdf;if(settings[_0x5593bf(0x16d)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x1a107c)){const _0x45f182=generateLoginToken(_0x1a107c);return{'allow':!![],'reason':_0x5593bf(0x12e),'token':_0x45f182};}else return{'allow':![],'reason':_0x5593bf(0x1f9),'token':null};}else return _0x313822=validToken(_0x24c3fc,_0x1a107c),_0x313822[_0x5593bf(0x159)]('success')?{'allow':!![],'reason':_0x5593bf(0xa2),'token':_0x24c3fc}:{'allow':![],'reason':_0x5593bf(0x1f9),'token':null};}else return{'allow':!![],'reason':_0x5593bf(0x18b),'token':null};};if(settings['whitelistEnabled']){let _0x2163f4=[...settings['whitelist'],'::1',_0x1dada9(0x1cf),_0x1dada9(0xbe)];if(_0x2163f4[_0x1dada9(0x274)](_0x327c00))return _0x31d3b1(_0x838763);else{_0x313822=validToken(_0x838763,_0x1a107c);if(_0x313822[_0x1dada9(0x159)](_0x1dada9(0x123)))return _0x31d3b1(_0x838763);else{if(telegramIpApproved(_0x1a107c)){const _0x2f6fd5=generateToken(_0x1a107c);return _0x313822=_0x31d3b1(_0x838763),_0x313822['allow']?{'allow':!![],'reason':_0x1dada9(0xd9),'token':_0x2f6fd5}:_0x313822;}else return settings[_0x1dada9(0x168)]?{'allow':![],'reason':_0x1dada9(0x237),'token':null}:{'allow':![],'reason':_0x1dada9(0xda),'token':null};}}}else return _0x31d3b1(_0x838763);}function timelyDecrypt(_0x3e0bca,_0x21886d,_0x456aa7='@'){const _0x1d5c5e=_0x11d260;if(_0x3e0bca)try{const _0x1b0b42=decryptRSA(secure['privateKey'],_0x3e0bca),_0x40f870=_0x1b0b42[_0x1d5c5e(0x11e)](_0x456aa7)[0x0],_0x8a3838=_0x1b0b42[_0x1d5c5e(0x11e)](_0x456aa7)[0x1],_0x4322ce=new Date()['getTime']();if(_0x21886d){if(_0x4322ce-_0x8a3838<maxSecretAge*0x3e8)return _0x40f870;else return![];}else return _0x40f870;}catch(_0x1674ba){return![];}else return![];}const validToken=(_0x2b93ad,_0x28a509)=>{const _0x3cd9da=_0x11d260,_0x2410aa=devices[_0x28a509]['ip'];if(!_0x2b93ad)return{'error':'No\x20authentication\x20token'};for(let _0xbe765a of blacklist){if(_0xbe765a['token']==_0x2b93ad)return{'error':_0x3cd9da(0x280)};}let _0x456030;try{_0x456030=jwt[_0x3cd9da(0x11f)](_0x2b93ad,secure[_0x3cd9da(0x22c)]+_0x28a509);}catch{return{'error':_0x3cd9da(0x137)};}if(!_0x456030[_0x3cd9da(0x159)](_0x3cd9da(0x272))&&!_0x456030['hasOwnProperty'](_0x3cd9da(0x275))||!_0x456030['hasOwnProperty']('exp'))return{'error':_0x3cd9da(0x182)};if(!_0x456030[_0x3cd9da(0x159)](_0x3cd9da(0x275))&&_0x456030['hasOwnProperty'](_0x3cd9da(0x272))){const {clientip:_0x51f3ee}=_0x456030;return _0x2410aa==_0x51f3ee?{'success':_0x3cd9da(0x22d)}:{'error':_0x3cd9da(0x1f3)};}else{if(_0x456030[_0x3cd9da(0x159)](_0x3cd9da(0x275))&&_0x456030['hasOwnProperty'](_0x3cd9da(0x272))){const {username:_0x4a7940,clientip:_0x2ccf91}=_0x456030;return settings[_0x3cd9da(0xca)]==_0x4a7940&&_0x2410aa==_0x2ccf91?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3cd9da(0xb8)};}}},generateLoginToken=_0x4be744=>{const _0x2f1786=_0x11d260;if(_0x4be744){const _0x52b9af=devices[_0x4be744]['ip'];return jwt['sign']({'username':settings[_0x2f1786(0xca)],'clientip':_0x52b9af},secure['secret']+_0x4be744,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3575b9=>{const _0x136dab=_0x11d260;if(_0x3575b9){const _0x5d5e25=devices[_0x3575b9]['ip'];return jwt[_0x136dab(0x177)]({'clientip':_0x5d5e25},secure[_0x136dab(0x22c)]+_0x3575b9,{'expiresIn':devices[_0x3575b9][_0x136dab(0x172)][_0x136dab(0x256)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x58d362=>{const _0x35041f=_0x11d260;let _0x3e3513=![];return devices[_0x58d362][_0x35041f(0x172)]&&devices[_0x58d362]['telegramIpApproval'][_0x35041f(0x256)]!=_0x35041f(0x276)&&(_0x3e3513=devices[_0x58d362][_0x35041f(0x172)]['clientip']==devices[_0x58d362]['ip']&&new Date()[_0x35041f(0x240)]()-devices[_0x58d362][_0x35041f(0x172)][_0x35041f(0x113)]<devices[_0x58d362][_0x35041f(0x172)][_0x35041f(0x256)]*0x3c*0x3e8),_0x3e3513;},telegram2FaApproved=_0x465c43=>{const _0x3bf88b=_0x11d260;let _0x5e9d00=![];return devices[_0x465c43][_0x3bf88b(0x1fb)]&&devices[_0x465c43][_0x3bf88b(0x1fb)][_0x3bf88b(0x256)]!=_0x3bf88b(0x276)&&(_0x5e9d00=devices[_0x465c43][_0x3bf88b(0x1fb)][_0x3bf88b(0x272)]==devices[_0x465c43]['ip']&&new Date()[_0x3bf88b(0x240)]()-devices[_0x465c43]['telegram2FaApproval'][_0x3bf88b(0x113)]<devices[_0x465c43][_0x3bf88b(0x1fb)][_0x3bf88b(0x256)]*0x3c*0x3e8),_0x5e9d00;},normalizeIP=_0x3ddbbc=>{const _0x5e9f6a=_0x11d260;let _0x9cd32f=null,_0x5596c0=null;if(ipaddr['isValid'](_0x3ddbbc)){const _0x1db07c=ipaddr[_0x5e9f6a(0x25a)](_0x3ddbbc);_0x1db07c[_0x5e9f6a(0x18a)]()==='ipv6'?(_0x1db07c[_0x5e9f6a(0x218)]()&&(_0x9cd32f=_0x1db07c[_0x5e9f6a(0x289)]()[_0x5e9f6a(0x287)]()),_0x5596c0=_0x1db07c[_0x5e9f6a(0x287)]()):(_0x9cd32f=_0x1db07c[_0x5e9f6a(0x287)](),_0x5596c0=_0x1db07c[_0x5e9f6a(0x106)]()[_0x5e9f6a(0x287)]());}return{'show':_0x9cd32f?_0x9cd32f:_0x5596c0,'store':_0x5596c0};};function formatDate(_0x24f6d5){const _0x14a768=_0x11d260;return _0x24f6d5['getFullYear']()+'/'+(_0x24f6d5[_0x14a768(0x109)]()+0x1)['toString']()[_0x14a768(0x160)](0x2,'0')+'/'+_0x24f6d5[_0x14a768(0x169)]()[_0x14a768(0x287)]()[_0x14a768(0x160)](0x2,'0')+'\x20'+_0x24f6d5['getHours']()['toString']()[_0x14a768(0x160)](0x2,'0')+':'+_0x24f6d5[_0x14a768(0x288)]()['toString']()[_0x14a768(0x160)](0x2,'0')+':'+_0x24f6d5[_0x14a768(0x264)]()[_0x14a768(0x287)]()[_0x14a768(0x160)](0x2,'0');}function sleep(_0x4365e0){return new Promise(_0x3706cc=>setTimeout(_0x3706cc,_0x4365e0));}