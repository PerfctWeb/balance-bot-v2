const _0x452e8c=_0x42e4;(function(_0x23f6bb,_0x231947){const _0x29e889=_0x42e4,_0x2f7cc3=_0x23f6bb();while(!![]){try{const _0x4bea7e=-parseInt(_0x29e889(0x1fe))/0x1+parseInt(_0x29e889(0x271))/0x2+parseInt(_0x29e889(0x284))/0x3*(parseInt(_0x29e889(0x1e5))/0x4)+-parseInt(_0x29e889(0x220))/0x5*(parseInt(_0x29e889(0x1e8))/0x6)+-parseInt(_0x29e889(0x1c7))/0x7*(-parseInt(_0x29e889(0x305))/0x8)+-parseInt(_0x29e889(0x23d))/0x9*(parseInt(_0x29e889(0x296))/0xa)+-parseInt(_0x29e889(0x2bb))/0xb*(-parseInt(_0x29e889(0x24d))/0xc);if(_0x4bea7e===_0x231947)break;else _0x2f7cc3['push'](_0x2f7cc3['shift']());}catch(_0x562c4e){_0x2f7cc3['push'](_0x2f7cc3['shift']());}}}(_0x3c67,0xa2203));const _0x34f074=function(){let _0x2fd733=!![];return function(_0x272c60,_0x386dac){const _0x10b156=_0x2fd733?function(){const _0x2651ec=_0x42e4;if(_0x386dac){const _0x1a2f0b=_0x386dac[_0x2651ec(0x1c3)](_0x272c60,arguments);return _0x386dac=null,_0x1a2f0b;}}:function(){};return _0x2fd733=![],_0x10b156;};}(),_0x5f35a0=_0x34f074(this,function(){const _0xc7f31e=_0x42e4;return _0x5f35a0[_0xc7f31e(0x2a6)]()[_0xc7f31e(0x36b)](_0xc7f31e(0x1e1))[_0xc7f31e(0x2a6)]()[_0xc7f31e(0x317)](_0x5f35a0)[_0xc7f31e(0x36b)]('(((.+)+)+)+$');});_0x5f35a0();'use strict';process['env'][_0x452e8c(0x348)]=0x1;const childProcess=require(_0x452e8c(0x258)),fs=require('fs'),fns=require(_0x452e8c(0x34b)),low=require(_0x452e8c(0x2b3)),FileSync=require(_0x452e8c(0x288)),path=require(_0x452e8c(0x1b3)),crypto=require(_0x452e8c(0x336)),Crypt=require(_0x452e8c(0x1e0))[_0x452e8c(0x226)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x452e8c(0x1e7)),jwt=require(_0x452e8c(0x36f)),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process['argv'][_0x452e8c(0x2ee)](0x2))['argv'],uuidRandom=require(_0x452e8c(0x25b)),TelegramBot=require(_0x452e8c(0x1d7)),Mixpanel=require(_0x452e8c(0x235)),axios=require('axios'),{GraphQLClient,gql}=require(_0x452e8c(0x2d1)),util=require(_0x452e8c(0x337)),fileUpload=require(_0x452e8c(0x1b0)),{networkInterfaces}=require('os'),PORT=argv[_0x452e8c(0x307)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x452e8c(0x1bd)](PORT)&&(console['log'](_0x452e8c(0x21d)+PORT+_0x452e8c(0x1c6)),process[_0x452e8c(0x2c5)](0x1));const HOST=argv[_0x452e8c(0x25a)]||null,userID=argv[_0x452e8c(0x297)]||'',debugging=argv['d']||![],nodeversion=process[_0x452e8c(0x321)][_0x452e8c(0x23b)];let bbpath=_0x452e8c(0x29d),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile='bb-settings.json',securefile='bb-secure.json',environment=require('./'+bbpath2+'version.json')[_0x452e8c(0x2b0)]||_0x452e8c(0x2a0),maxBackups=0xa;let validInstallation=!![];function _0x42e4(_0x520576,_0x4ccbc7){const _0x55e87a=_0x3c67();return _0x42e4=function(_0x5f35a0,_0x34f074){_0x5f35a0=_0x5f35a0-0x1aa;let _0x3c6797=_0x55e87a[_0x5f35a0];return _0x3c6797;},_0x42e4(_0x520576,_0x4ccbc7);}!fs[_0x452e8c(0x358)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x452e8c(0x33e)),configpath=userID?bbpath+_0x452e8c(0x320)+userID+'/':bbpath+_0x452e8c(0x320),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x452e8c(0x32d),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x452e8c(0x2be),loggerfile=fs['createWriteStream'](logspath+_0x452e8c(0x1c2),{'flags':'a'}),temppath=userID?bbpath+_0x452e8c(0x314)+userID+'/':bbpath+_0x452e8c(0x314);!fs['existsSync'](configpath)&&fs[_0x452e8c(0x248)](configpath);!fs[_0x452e8c(0x358)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x452e8c(0x358)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x452e8c(0x248)](zippath);!fs['existsSync'](temppath)&&fs[_0x452e8c(0x248)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x452e8c(0x36d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x452e8c(0x32a),'onepagemode':![]}})[_0x452e8c(0x36d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x452e8c(0x23a)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x452e8c(0x1f9),'rsaStandard':_0x452e8c(0x257)});const saltRounds=0xa,mixpanel=Mixpanel[_0x452e8c(0x2c4)](_0x452e8c(0x1ec),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x452e8c(0x346)]&&settings[_0x452e8c(0x346)]!=''&&settings[_0x452e8c(0x2b9)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x36f08e,_0x5245dc)=>{const _0x97a10=_0x452e8c,_0x2c41b3=/#[A-Z]{3}#/g;if(typeof _0x36f08e==_0x97a10(0x1af)){!_0x5245dc?_0x36f08e=_0x36f08e[_0x97a10(0x356)](_0x2c41b3,''):(_0x36f08e=_0x36f08e[_0x97a10(0x356)](/#BLU#/g,_0x97a10(0x1c8)),_0x36f08e=_0x36f08e[_0x97a10(0x356)](/#RED#/g,_0x97a10(0x33a)),_0x36f08e=_0x36f08e['replace'](/#YEL#/g,'\x1b[33m'),_0x36f08e=_0x36f08e[_0x97a10(0x356)](/#MAG#/g,_0x97a10(0x31b)),_0x36f08e=_0x36f08e[_0x97a10(0x356)](/#CYA#/g,_0x97a10(0x2d8)),_0x36f08e=_0x36f08e[_0x97a10(0x356)](/#RES#/g,'\x1b[0m'));;}return _0x36f08e;},logger={'screen':_0xa434af=>{const _0x90b9c2=_0x452e8c;console[_0x90b9c2(0x34f)](parseColor(_0xa434af,!![]));},'simple':_0x4b2978=>{const _0x10bbe0=_0x452e8c;console[_0x10bbe0(0x34f)](parseColor(_0x4b2978,!![])),loggerfile[_0x10bbe0(0x36d)](util[_0x10bbe0(0x2c9)](parseColor(_0x4b2978,![]))+'\x0a');},'full':async _0x1ae4b4=>{const _0x36a9c6=_0x452e8c,_0x49f222=getTimeStamp()+_0x36a9c6(0x1f3)+_0x1ae4b4;console[_0x36a9c6(0x34f)](parseColor(_0x49f222,!![])),loggerfile[_0x36a9c6(0x36d)](util['format'](parseColor(_0x49f222,![]))+'\x0a');if(tgBot&&settings[_0x36a9c6(0x32f)]&&settings['telegramEvents']!=_0x36a9c6(0x265))await tgBot[_0x36a9c6(0x31d)](settings[_0x36a9c6(0x32f)],_0x36a9c6(0x2a1)+parseColor(_0x1ae4b4,![]))[_0x36a9c6(0x246)](_0x591503=>{telegramError(_0x591503);});},'debug':async(_0x111a10,_0x5e8513='')=>{const _0x2f86e6=_0x452e8c,_0x3520c4=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x111a10;if(debugging)console['log'](parseColor(_0x3520c4,!![]));loggerfile[_0x2f86e6(0x36d)](util[_0x2f86e6(0x2c9)](parseColor(_0x3520c4,![]))+'\x0a');if(_0x5e8513){if(debugging)console['log'](_0x5e8513);loggerfile[_0x2f86e6(0x36d)](util['format'](_0x5e8513)+'\x0a');}}};process['on']('uncaughtException',function(_0x3f3ba1){logger['simple'](_0x3f3ba1);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x452e8c(0x1e2))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x452e8c(0x1e6)),app=express(),http=require(_0x452e8c(0x23f))[_0x452e8c(0x2f7)](app);app[_0x452e8c(0x1ff)](fileUpload({'useTempFiles':!![]})),app[_0x452e8c(0x344)](_0x452e8c(0x1d4),async(_0x2b038c,_0x3324be)=>{const _0x3f8e0c=_0x452e8c,_0x279c11=_0x2b038c['params'][_0x3f8e0c(0x1d8)],_0x2d2fae=getClientsWithBotID(_0x3f8e0c(0x2f5)),_0x333d64=_0x2b038c[_0x3f8e0c(0x1db)]['uuid'],_0x3d780b=timelyDecrypt(_0x333d64,![]),_0x205ff4=_0x2d2fae[_0x3f8e0c(0x1b4)](_0x2cfc73=>_0x2cfc73[_0x3f8e0c(0x370)]==_0x3d780b);if(_0x205ff4){const _0xf5cbe7=normalizeIP(_0x2b038c[_0x3f8e0c(0x28c)][_0x3f8e0c(0x379)])[_0x3f8e0c(0x2f0)],_0x2e14a6=_0x2b038c[_0x3f8e0c(0x1db)][_0x3f8e0c(0x364)];if(validateAccess(_0x2e14a6,_0x3d780b,_0xf5cbe7)[_0x3f8e0c(0x1cf)])_0x279c11=='backup'&&await backupConfigFiles(),await zipFiles(_0x279c11),_0x3324be[_0x3f8e0c(0x20b)](zippath+(_0x279c11+_0x3f8e0c(0x28b)),_0x46c6cb=>{const _0x17aa07=_0x3f8e0c;_0x46c6cb&&(logger['full'](_0x17aa07(0x2dc)+_0x279c11),logger['simple'](_0x46c6cb));});else logger[_0x3f8e0c(0x2f8)](_0x3f8e0c(0x263)+_0x279c11+_0x3f8e0c(0x2c8));}else logger['full'](_0x3f8e0c(0x263)+_0x279c11+'\x20(2)');}),app[_0x452e8c(0x2a8)]('/upload-backup',async(_0x2ffbc3,_0x45272d)=>{const _0x456c9a=_0x452e8c,_0x4796d4=getClientsWithBotID(_0x456c9a(0x2f5)),_0x2f4ade=_0x2ffbc3[_0x456c9a(0x1db)]['uuid'],_0x237261=timelyDecrypt(_0x2f4ade,![]),_0x59a172=_0x4796d4[_0x456c9a(0x1b4)](_0x1ff8db=>_0x1ff8db[_0x456c9a(0x370)]==_0x237261);logger[_0x456c9a(0x2b6)](_0x456c9a(0x2da));if(_0x59a172){const _0x4f2d87=normalizeIP(_0x2ffbc3[_0x456c9a(0x28c)][_0x456c9a(0x379)])['store'],_0x4e15f6=_0x2ffbc3[_0x456c9a(0x1db)][_0x456c9a(0x364)];if(validateAccess(_0x4e15f6,_0x237261,_0x4f2d87)['allow']){if(_0x2ffbc3[_0x456c9a(0x1fd)]){const _0x557d24=_0x2ffbc3[_0x456c9a(0x1fd)]['backupfile'];await _0x557d24['mv'](temppath+_0x557d24[_0x456c9a(0x203)]),_0x45272d['send']({'status':!![],'message':'File\x20uploaded'});const _0x1c4a25=getBotsWithMode();_0x1c4a25[_0x456c9a(0x313)]>0x0?confirmRestore(temppath,_0x557d24[_0x456c9a(0x203)]):unzipFile(temppath,_0x557d24[_0x456c9a(0x203)]);}}else logger[_0x456c9a(0x2f8)](_0x456c9a(0x2fe));}else logger[_0x456c9a(0x2f8)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x452e8c(0x252)](path[_0x452e8c(0x329)](__dirname,bbpath2,_0x452e8c(0x363)))),app[_0x452e8c(0x1ff)](express['static'](path[_0x452e8c(0x329)](__dirname,bbpath2,_0x452e8c(0x2d5)))),app['get']('/',function(_0x33d334,_0x52af4c){const _0x1e3ff6=_0x452e8c;_0x52af4c[_0x1e3ff6(0x361)](path[_0x1e3ff6(0x329)](__dirname,bbpath2,_0x1e3ff6(0x363),_0x1e3ff6(0x273)));}),app['get']('/:bot',function(_0x1707ea,_0x4a792d){const _0x1aace3=_0x452e8c;_0x4a792d['sendFile'](path[_0x1aace3(0x329)](__dirname,bbpath2,_0x1aace3(0x2d5),'index.html'));}),app['get']('/:bot/portfolio',(_0x49f0a3,_0x5858f8)=>{const _0x24c013=_0x452e8c;_0x5858f8['sendFile'](path['join'](__dirname,bbpath2,_0x24c013(0x2d5),_0x24c013(0x273)));}),app[_0x452e8c(0x344)](_0x452e8c(0x1f2),(_0x3cc64d,_0x5267ab)=>{const _0x2f39a7=_0x452e8c;_0x5267ab[_0x2f39a7(0x361)](path['join'](__dirname,bbpath2,_0x2f39a7(0x2d5),'index.html'));}),app['get'](_0x452e8c(0x316),(_0xece4,_0x172d00)=>{const _0xfc5e4f=_0x452e8c;_0x172d00[_0xfc5e4f(0x361)](path[_0xfc5e4f(0x329)](__dirname,bbpath2,_0xfc5e4f(0x2d5),_0xfc5e4f(0x273)));}),app[_0x452e8c(0x344)](_0x452e8c(0x368),(_0x417d71,_0x5bc51d)=>{const _0x57f0b3=_0x452e8c;_0x5bc51d[_0x57f0b3(0x361)](path[_0x57f0b3(0x329)](__dirname,bbpath2,_0x57f0b3(0x2d5),_0x57f0b3(0x273)));}),app[_0x452e8c(0x344)]('/:bot/configuration',(_0x5cb299,_0x52eb3d)=>{const _0x3d8b2e=_0x452e8c;_0x52eb3d['sendFile'](path['join'](__dirname,bbpath2,_0x3d8b2e(0x2d5),_0x3d8b2e(0x273)));}),app[_0x452e8c(0x344)](_0x452e8c(0x2fc),(_0x44cabc,_0x5bd5ce)=>{const _0x52f486=_0x452e8c;_0x5bd5ce[_0x52f486(0x361)](path[_0x52f486(0x329)](__dirname,bbpath2,_0x52f486(0x2d5),_0x52f486(0x273)));});if(HOST)http[_0x452e8c(0x2d7)](PORT,HOST);else http['listen'](PORT);const io=require(_0x452e8c(0x2e0))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x235dab=_0x452e8c;let _0x4ba501='[ip-address]';const _0x4be787=networkInterfaces(),_0x6664db={};for(const _0x3701bc of Object['keys'](_0x4be787)){for(const _0xf2c61a of _0x4be787[_0x3701bc]){if((_0xf2c61a[_0x235dab(0x341)]==_0x235dab(0x290)||_0xf2c61a['family']==0x4)&&!_0xf2c61a[_0x235dab(0x22b)]){const _0x455241=ipaddr[_0x235dab(0x31a)](_0xf2c61a[_0x235dab(0x268)])[_0x235dab(0x30b)]();_0x455241!='private'&&(!_0x6664db[_0x3701bc]&&(_0x6664db[_0x3701bc]=[]),_0x6664db[_0x3701bc][_0x235dab(0x2ec)](_0xf2c61a['address']),_0x4ba501=_0xf2c61a[_0x235dab(0x268)]);}}}return{'serverip':_0x4ba501,'netinterfaces':_0x6664db};}async function startServer(){const _0x3c9352=_0x452e8c,{serverip:_0x4bcbc2,netinterfaces:_0x48a0a0}=getServerIP();logger[_0x3c9352(0x293)](''),logger['simple'](_0x3c9352(0x36a)),await logger[_0x3c9352(0x2f8)](_0x3c9352(0x289)+serverversion+'#RES#\x20'+(environment==_0x3c9352(0x2ff)?_0x3c9352(0x365):'')+'\x0a'+(_0x3c9352(0x1bf)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0x4bcbc2+':'+PORT+_0x3c9352(0x221))),logger[_0x3c9352(0x293)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x317f1a of config){const _0x1474f8=config[_0x3c9352(0x237)]==_0x3c9352(0x292)?'a':'m';if(_0x317f1a[_0x3c9352(0x270)]=='enabled'||_0x317f1a[_0x3c9352(0x270)]==_0x3c9352(0x1b8))await logger[_0x3c9352(0x2f8)](_0x3c9352(0x281)+_0x1474f8+_0x3c9352(0x1ee)+_0x317f1a[_0x3c9352(0x353)]+_0x3c9352(0x325)+_0x317f1a[_0x3c9352(0x309)]),startBot([_0x317f1a[_0x3c9352(0x353)],userID],{'cwd':bbpath},function(_0x138a39){if(_0x138a39)logger['full'](_0x138a39);});else(_0x317f1a['status']==_0x3c9352(0x233)||_0x317f1a['status']==_0x3c9352(0x33d))&&await logger['full'](_0x3c9352(0x2af)+_0x1474f8+_0x3c9352(0x26a)+_0x317f1a['botID']+'\x20|\x20'+_0x317f1a[_0x3c9352(0x309)]);}else!newBot&&logger[_0x3c9352(0x293)](_0x3c9352(0x238));if(newBot)addBot();logger[_0x3c9352(0x293)](_0x3c9352(0x36a)),logger[_0x3c9352(0x293)](''),await logger[_0x3c9352(0x2b6)]('Node.js\x20v'+nodeversion),await logger[_0x3c9352(0x2b6)](_0x3c9352(0x2c7),_0x48a0a0);}function startSocket(){const _0xdcda9=_0x452e8c;io['on'](_0xdcda9(0x1aa),_0x58ca3a=>{const _0x2c7304=_0xdcda9;let _0x2c1bbd,_0x15f940,_0xeb6ed7,_0xc01dfc,_0x22d29f;const _0x104ca3=_0x58ca3a[_0x2c7304(0x1eb)][_0x2c7304(0x1db)][_0x2c7304(0x2ed)];_0x15f940=_0x104ca3[_0x2c7304(0x2e1)](/bot[0-9]{3}/);if(_0x15f940)_0xeb6ed7=_0x15f940[0x0][_0x2c7304(0x2e1)](/[0-9]{3}/);if(_0xeb6ed7)_0x2c1bbd=_0xeb6ed7[0x0];else _0x2c1bbd=_0x2c7304(0x2f5);const _0x1b25e0=_0x58ca3a['handshake'][_0x2c7304(0x30a)][_0x2c7304(0x1ea)];if(!_0x1b25e0)_0x58ca3a[_0x2c7304(0x286)](_0x2c7304(0x270),{'publicKey':secure[_0x2c7304(0x2cf)]});else{_0xc01dfc=timelyDecrypt(_0x1b25e0,![]);if(!_0xc01dfc)_0x58ca3a['emit'](_0x2c7304(0x270),{'publicKey':secure[_0x2c7304(0x2cf)]});else{_0x22d29f=normalizeIP(_0x58ca3a[_0x2c7304(0x24c)]['remoteAddress'])[_0x2c7304(0x2f0)];if(!devices[_0xc01dfc])devices[_0xc01dfc]={'uuid':_0xc01dfc,'access':{'token':null}};devices[_0xc01dfc]['ip']=_0x22d29f;const _0x262b1e=addClient(_0x58ca3a['id'],_0xc01dfc,_0x2c1bbd);setAccess(_0x262b1e),emitMessages(),_0x58ca3a['on']('login',_0x6712cd=>{const _0xaebf5=_0x2c7304,_0x2a3402=timelyDecrypt(_0x6712cd[_0xaebf5(0x29c)]);if(_0x2a3402){_0x6712cd={'username':_0x6712cd['username'],'password':_0x2a3402},devices[_0xc01dfc][_0xaebf5(0x299)]=validateCredentials(_0x6712cd,_0xc01dfc);if(devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x1cf)]==![]&&devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x362)]==_0xaebf5(0x256))_0x58ca3a[_0xaebf5(0x286)](_0xaebf5(0x270),{'access':devices[_0xc01dfc]['access']}),loginAccess2FA(_0xc01dfc,_0x22d29f);else{if(devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x1cf)]==![]&&devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x362)]==_0xaebf5(0x24a))_0x58ca3a[_0xaebf5(0x286)](_0xaebf5(0x270),{'access':devices[_0xc01dfc]['access']});else devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x1cf)]&&devices[_0xc01dfc][_0xaebf5(0x299)][_0xaebf5(0x362)]==_0xaebf5(0x1f7)&&(getClientsWithUuid(_0xc01dfc)['forEach'](_0x575c86=>{setAccess(_0x575c86);}),logger[_0xaebf5(0x2b6)](_0xaebf5(0x324)+_0xc01dfc[_0xaebf5(0x2ee)](-0x8)),setTokenRefresh(_0xc01dfc),setSessionTimeout(_0xaebf5(0x328),_0xc01dfc));}}else logger['full'](_0xaebf5(0x1d9));}),_0x58ca3a['on'](_0x2c7304(0x2bc),()=>{resetPassword();}),_0x58ca3a['on'](_0x2c7304(0x1ce),_0x3d5d14=>{removeClient(_0x58ca3a['id']);}),_0x2c1bbd=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x58f7b4){const _0x137b19=_0x452e8c;if(_0x58f7b4!=_0x137b19(0x2f5)&&config[_0x137b19(0x1cc)]!=''){if(pid[_0x58f7b4])pid[_0x58f7b4][_0x137b19(0x2ac)]({'function':_0x137b19(0x260),'args':null});}_0x58f7b4!=_0x137b19(0x2f5)&&broadcastToBots(_0x137b19(0x234),JSON[_0x137b19(0x330)](config));}function reloadBotManager(){const _0x3c6094=_0x452e8c;getClientsWithBotID(_0x3c6094(0x2f5))[_0x3c6094(0x25e)](_0x157a93=>{const _0x452b74=_0x3c6094;getSocket(_0x157a93['id'])[_0x452b74(0x286)](_0x452b74(0x270),{'access':{'allow':![],'reason':_0x452b74(0x200),'token':null}});});}function getSocket(_0x5e02af){const _0x3a098f=_0x452e8c;return io[_0x3a098f(0x2f3)][_0x3a098f(0x2f3)][_0x3a098f(0x344)](_0x5e02af);}function setAccess(_0x2ee184){const _0x3330f1=_0x452e8c,_0x5be2b6=getSocket(_0x2ee184['id']),_0x3ce8a6=_0x2ee184[_0x3330f1(0x370)],_0x1ff08d=_0x2ee184['bot'];devices[_0x3ce8a6][_0x3330f1(0x299)]=validateAccess(devices[_0x3ce8a6][_0x3330f1(0x299)]['token'],_0x3ce8a6),logger[_0x3330f1(0x2b6)](_0x3330f1(0x2bf)+devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x362)]+'\x20|\x20client:\x20...'+_0x2ee184['id'][_0x3330f1(0x2ee)](-0x8)+'\x20|\x20user:\x20...'+_0x3ce8a6[_0x3330f1(0x2ee)](-0x8)),_0x5be2b6[_0x3330f1(0x329)](_0x3ce8a6);if(devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x1cf)]){_0x5be2b6[_0x3330f1(0x329)](_0x1ff08d);if(_0x1ff08d==_0x3330f1(0x2f5))initializeSocketBotManager(_0x5be2b6);else initializeSocketBot(_0x5be2b6);initClient(_0x1ff08d);}devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x1cd)]&&devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x362)]==_0x3330f1(0x2a2)&&setSessionTimeout('2FA',_0x3ce8a6),devices[_0x3ce8a6]['access'][_0x3330f1(0x1cd)]&&devices[_0x3ce8a6][_0x3330f1(0x299)]['reason']==_0x3330f1(0x1b6)&&setSessionTimeout('login',_0x3ce8a6),_0x5be2b6['emit']('status',{'status':_0x2ee184[_0x3330f1(0x352)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3ce8a6][_0x3330f1(0x299)],'externalip':devices[_0x3ce8a6]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x3330f1(0x2a9)],'validInstallation':validInstallation}),devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x1cf)]==![]&&devices[_0x3ce8a6][_0x3330f1(0x299)][_0x3330f1(0x362)]=='2FA\x20required'&&temporaryAccess2FA(_0x3ce8a6,devices[_0x3ce8a6]['ip']);}function setSessionTimeout(_0x31235b,_0xab01f3){const _0x531ae6=_0x452e8c;let _0x562994;if(_0x31235b==_0x531ae6(0x328))_0x562994=loginExpiry*0x3c*0x3e8;else _0x562994=devices[_0xab01f3][_0x531ae6(0x302)]['expiry']*0x3c*0x3e8-(new Date()[_0x531ae6(0x28f)]()-devices[_0xab01f3]['telegramIpApproval'][_0x531ae6(0x27a)]);if(devices[_0xab01f3][_0x531ae6(0x1fa)])clearTimeout(devices[_0xab01f3][_0x531ae6(0x1fa)]);devices[_0xab01f3][_0x531ae6(0x1fa)]=setTimeout(()=>{const _0x62e41d=_0x531ae6;if(devices[_0xab01f3]['pidRefreshToken'])clearTimeout(devices[_0xab01f3][_0x62e41d(0x30e)]);removeSocketListeners(_0xab01f3),addBlacklist(_0xab01f3),devices[_0xab01f3][_0x62e41d(0x302)]=null,devices[_0xab01f3][_0x62e41d(0x35c)]=null,devices[_0xab01f3][_0x62e41d(0x299)]['token']=null,logger['debug'](_0x62e41d(0x30c)+_0xab01f3[_0x62e41d(0x2ee)](-0x8)),devices[_0xab01f3][_0x62e41d(0x299)]=validateAccess(devices[_0xab01f3][_0x62e41d(0x299)][_0x62e41d(0x1cd)],_0xab01f3),!(devices[_0xab01f3][_0x62e41d(0x299)][_0x62e41d(0x1cf)]&&devices[_0xab01f3][_0x62e41d(0x299)][_0x62e41d(0x362)]=='login\x20not\x20required')&&(_0x31235b=='login'?io['to'](_0xab01f3)[_0x62e41d(0x286)](_0x62e41d(0x270),{'access':{'allow':![],'reason':_0x62e41d(0x27d),'token':null}}):io['to'](_0xab01f3)['emit'](_0x62e41d(0x270),{'access':{'allow':![],'reason':_0x62e41d(0x262),'token':null}})),devices[_0xab01f3][_0x62e41d(0x299)][_0x62e41d(0x1cd)]=null;},_0x562994);}function setTokenRefresh(_0x12acef){const _0x52f42c=_0x452e8c;if(devices[_0x12acef][_0x52f42c(0x30e)])clearTimeout(devices[_0x12acef][_0x52f42c(0x30e)]);devices[_0x12acef][_0x52f42c(0x30e)]=setTimeout(()=>{const _0x4d2586=_0x52f42c;getClientsWithUuid(_0x12acef)[_0x4d2586(0x313)]!=0x0?(devices[_0x12acef][_0x4d2586(0x299)]=refreshToken(_0x12acef),io['to'](_0x12acef)[_0x4d2586(0x286)](_0x4d2586(0x270),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x12acef][_0x4d2586(0x299)],'externalip':devices[_0x12acef]['ip'],'publicKey':secure[_0x4d2586(0x2cf)],'validInstallation':validInstallation}),setTokenRefresh(_0x12acef)):clearTimeout(devices[_0x12acef][_0x4d2586(0x30e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x396c5b){const _0x5b1317=_0x452e8c,_0x56269c=getClient(_0x396c5b['id'])[_0x5b1317(0x370)];_0x396c5b['emit'](_0x5b1317(0x234),config),_0x396c5b['emit'](_0x5b1317(0x2eb),cleanSettings()),_0x396c5b['on']('add-bot',_0x24766b=>{const _0x4402f4=_0x5b1317;if(validateAccess(_0x24766b,_0x56269c)[_0x4402f4(0x1cf)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x396c5b['on'](_0x5b1317(0x366),(_0x4450d0,_0x4daffa)=>{const _0x81a26a=_0x5b1317;if(validateAccess(_0x4daffa,_0x56269c)[_0x81a26a(0x1cf)])toggleBot(_0x4450d0[_0x81a26a(0x353)],_0x4450d0[_0x81a26a(0x270)],_0x4450d0[_0x81a26a(0x2c3)]);else logger[_0x81a26a(0x2f8)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x396c5b['on'](_0x5b1317(0x372),(_0x3a0ba6,_0x7b3e3f)=>{const _0x2ab6ed=_0x5b1317;if(validateAccess(_0x7b3e3f,_0x56269c)[_0x2ab6ed(0x1cf)])toggleBotMode(_0x3a0ba6);else logger[_0x2ab6ed(0x2f8)](_0x2ab6ed(0x214));}),_0x396c5b['on']('delete-bot',(_0x3613b0,_0xd99e87)=>{const _0x479732=_0x5b1317;if(validateAccess(_0xd99e87,_0x56269c)[_0x479732(0x1cf)])deleteBot(_0x3613b0);else logger[_0x479732(0x2f8)](_0x479732(0x259));}),_0x396c5b['on']('store-settings',(_0x562b49,_0xaf2b6a)=>{const _0xe35a79=_0x5b1317;if(validateAccess(_0xaf2b6a,_0x56269c)[_0xe35a79(0x1cf)])storeSettings(_0x562b49,!![]);else logger[_0xe35a79(0x2f8)](_0xe35a79(0x1ca));}),_0x396c5b['on'](_0x5b1317(0x279),_0x25c2af=>{const _0x370726=_0x5b1317;if(validateAccess(_0x25c2af,_0x56269c)[_0x370726(0x1cf)])updateBB(_0x370726(0x298));else logger[_0x370726(0x2f8)](_0x370726(0x241));}),_0x396c5b['on']('reinstall-bb',_0x3a84a5=>{const _0x128b22=_0x5b1317;if(validateAccess(_0x3a84a5,_0x56269c)[_0x128b22(0x1cf)])updateBB('reinstall');else logger[_0x128b22(0x2f8)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x396c5b['on'](_0x5b1317(0x373),_0x1b4afc=>{const _0x2a601a=_0x5b1317;if(validateAccess(_0x1b4afc,_0x56269c)[_0x2a601a(0x1cf)]){const _0x1ab0bb=getClient(_0x396c5b['id']);if(_0x1ab0bb)getBackupFiles(_0x1ab0bb['uuid']);else logger[_0x2a601a(0x2f8)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger['full'](_0x2a601a(0x376));}),_0x396c5b['on'](_0x5b1317(0x251),(_0x264d3f,_0x138397)=>{const _0x43e36c=_0x5b1317;if(validateAccess(_0x138397,_0x56269c)[_0x43e36c(0x1cf)])restoreBackupFile(_0x264d3f);else logger[_0x43e36c(0x2f8)](_0x43e36c(0x1d0));}),_0x396c5b['on'](_0x5b1317(0x236),_0xf2f9a3=>{const _0x3c1ad8=_0x5b1317;if(validateAccess(_0xf2f9a3,_0x56269c)[_0x3c1ad8(0x1cf)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x396c5b['on'](_0x5b1317(0x1f1),(_0x4e2632,_0x54b29d)=>{const _0x18c483=_0x5b1317;if(validateAccess(_0x54b29d,_0x56269c)[_0x18c483(0x1cf)])confirmMessage(_0x4e2632);else logger[_0x18c483(0x2f8)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x396c5b['on']('logout',_0x5df608=>{const _0x2fab73=_0x5b1317;if(validateAccess(_0x5df608,_0x56269c)[_0x2fab73(0x1cf)]){if(devices[_0x56269c][_0x2fab73(0x30e)])clearTimeout(devices[_0x56269c]['pidRefreshToken']);if(devices[_0x56269c][_0x2fab73(0x1fa)])clearTimeout(devices[_0x56269c][_0x2fab73(0x1fa)]);removeSocketListeners(getClient(_0x396c5b['id'])['uuid']),addBlacklist(_0x56269c),devices[_0x56269c][_0x2fab73(0x302)]=null,devices[_0x56269c][_0x2fab73(0x35c)]=null,devices[_0x56269c][_0x2fab73(0x299)][_0x2fab73(0x1cd)]=null,logger[_0x2fab73(0x2b6)](_0x2fab73(0x35f)+_0x56269c['slice'](-0x8)),io['to'](getClient(_0x396c5b['id'])[_0x2fab73(0x370)])[_0x2fab73(0x286)](_0x2fab73(0x270),{'access':{'allow':![],'reason':_0x2fab73(0x335),'token':null}});}else logger['full'](_0x2fab73(0x351));});}function initializeSocketBot(_0x9e9cc){const _0x4c2ea7=_0x452e8c,_0x5025b0=getClient(_0x9e9cc['id'])['bot'],_0x3046d8=getClient(_0x9e9cc['id'])[_0x4c2ea7(0x370)];_0x9e9cc['on']('get-logs',(_0x47857f,_0x23a935)=>{const _0x366a8f=_0x4c2ea7;if(validateAccess(_0x23a935,_0x3046d8)[_0x366a8f(0x1cf)]){if(pid[_0x5025b0])pid[_0x5025b0][_0x366a8f(0x2ac)]({'function':_0x366a8f(0x23e),'args':_0x47857f});}else logger[_0x366a8f(0x2f8)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x9e9cc['on']('delete-alerts',(_0x3df10f,_0x2a45fd)=>{const _0x414da1=_0x4c2ea7;if(validateAccess(_0x2a45fd,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0][_0x414da1(0x2ac)]({'function':_0x414da1(0x222),'args':_0x3df10f});}else logger[_0x414da1(0x2f8)](_0x414da1(0x207));}),_0x9e9cc['on'](_0x4c2ea7(0x359),(_0x8d7b96,_0x79d99f)=>{const _0x53fd16=_0x4c2ea7;if(validateAccess(_0x79d99f,_0x3046d8)[_0x53fd16(0x1cf)]){if(pid[_0x5025b0])pid[_0x5025b0][_0x53fd16(0x2ac)]({'function':_0x53fd16(0x243),'args':_0x8d7b96});}else logger[_0x53fd16(0x2f8)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x9e9cc['on'](_0x4c2ea7(0x23c),(_0x2c9caa,_0x3eab89)=>{const _0x53ab38=_0x4c2ea7;if(validateAccess(_0x3eab89,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0][_0x53ab38(0x2ac)]({'function':'storeConfiguration','args':_0x2c9caa});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x9e9cc['on'](_0x4c2ea7(0x374),(_0x230c35,_0x2ba731)=>{const _0x3f0f7b=_0x4c2ea7;if(validateAccess(_0x2ba731,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0][_0x3f0f7b(0x2ac)]({'function':'storeHeadless','args':_0x230c35});}else logger[_0x3f0f7b(0x2f8)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x9e9cc['on'](_0x4c2ea7(0x1fc),(_0x4b71f7,_0x5ee4d5)=>{const _0x181357=_0x4c2ea7;if(validateAccess(_0x5ee4d5,_0x3046d8)[_0x181357(0x1cf)]){if(pid[_0x5025b0])pid[_0x5025b0][_0x181357(0x2ac)]({'function':'storeFiat','args':_0x4b71f7});}else logger[_0x181357(0x2f8)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x9e9cc['on'](_0x4c2ea7(0x1b9),_0xa7aa04=>{const _0x192b9d=_0x4c2ea7;if(validateAccess(_0xa7aa04,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0][_0x192b9d(0x2ac)]({'function':_0x192b9d(0x343),'args':null});}else logger[_0x192b9d(0x2f8)](_0x192b9d(0x24e));}),_0x9e9cc['on']('get-starting-balances',_0x25875f=>{const _0x51f578=_0x4c2ea7;if(validateAccess(_0x25875f,_0x3046d8)[_0x51f578(0x1cf)]){if(pid[_0x5025b0])pid[_0x5025b0]['send']({'function':'getStartingBalances','args':null});}else logger[_0x51f578(0x2f8)](_0x51f578(0x2df));}),_0x9e9cc['on'](_0x4c2ea7(0x347),(_0x30f17c,_0x5c329b)=>{const _0x2c515b=_0x4c2ea7;if(validateAccess(_0x5c329b,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0]['send']({'function':_0x2c515b(0x2b8),'args':_0x30f17c});}else logger[_0x2c515b(0x2f8)](_0x2c515b(0x310));}),_0x9e9cc['on'](_0x4c2ea7(0x210),_0x258016=>{const _0x250e83=_0x4c2ea7;if(validateAccess(_0x258016,_0x3046d8)[_0x250e83(0x1cf)]){if(pid[_0x5025b0])pid[_0x5025b0][_0x250e83(0x2ac)]({'function':'cancelLoading','args':null});}else logger['full'](_0x250e83(0x2b1));}),_0x9e9cc['on'](_0x4c2ea7(0x28e),_0x42b50=>{const _0x3651a9=_0x4c2ea7;if(validateAccess(_0x42b50,_0x3046d8)['allow']){if(pid[_0x5025b0])pid[_0x5025b0][_0x3651a9(0x2ac)]({'function':_0x3651a9(0x36c),'args':null});}else logger[_0x3651a9(0x2f8)](_0x3651a9(0x2d6));}),_0x9e9cc['on'](_0x4c2ea7(0x279),_0x5a82e1=>{const _0x50ed96=_0x4c2ea7;if(validateAccess(_0x5a82e1,_0x3046d8)[_0x50ed96(0x1cf)])updateBB(_0x50ed96(0x298));else logger[_0x50ed96(0x2f8)](_0x50ed96(0x241));}),_0x9e9cc['on']('get-messages',_0x4e301b=>{const _0x1f6526=_0x4c2ea7;if(validateAccess(_0x4e301b,_0x3046d8)[_0x1f6526(0x1cf)])getMessages();else logger[_0x1f6526(0x2f8)](_0x1f6526(0x1bb));}),_0x9e9cc['on'](_0x4c2ea7(0x1f1),(_0x5430eb,_0x36faec)=>{const _0x6620c8=_0x4c2ea7;if(validateAccess(_0x36faec,_0x3046d8)[_0x6620c8(0x1cf)])confirmMessage(_0x5430eb);else logger[_0x6620c8(0x2f8)](_0x6620c8(0x280));}),_0x9e9cc['on']('logout',_0x23d124=>{const _0x2fc091=_0x4c2ea7;if(validateAccess(_0x23d124,_0x3046d8)['allow']){if(devices[_0x3046d8][_0x2fc091(0x30e)])clearTimeout(devices[_0x3046d8][_0x2fc091(0x30e)]);if(devices[_0x3046d8][_0x2fc091(0x1fa)])clearTimeout(devices[_0x3046d8][_0x2fc091(0x1fa)]);removeSocketListeners(getClient(_0x9e9cc['id'])['uuid']),addBlacklist(_0x3046d8),devices[_0x3046d8][_0x2fc091(0x302)]=null,devices[_0x3046d8][_0x2fc091(0x35c)]=null,devices[_0x3046d8][_0x2fc091(0x299)][_0x2fc091(0x1cd)]=null,logger[_0x2fc091(0x2b6)](_0x2fc091(0x35f)+_0x3046d8[_0x2fc091(0x2ee)](-0x8)),io['to'](getClient(_0x9e9cc['id'])[_0x2fc091(0x370)])[_0x2fc091(0x286)](_0x2fc091(0x270),{'access':{'allow':![],'reason':_0x2fc091(0x335),'token':null}});}else logger[_0x2fc091(0x2f8)](_0x2fc091(0x351));});}function removeSocketListeners(_0x16db36){getClientsWithUuid(_0x16db36)['forEach'](_0x183a66=>{getSocket(_0x183a66['id'])['removeAllListeners']();});}function cleanSettings(){const _0x3a6855=_0x452e8c;let _0x564695=settings;return settings[_0x3a6855(0x346)]&&settings[_0x3a6855(0x346)]!=''&&(_0x564695={..._0x564695,'telegramToken':_0x3a6855(0x255)}),settings[_0x3a6855(0x340)]&&settings[_0x3a6855(0x340)]!=''&&(_0x564695={..._0x564695,'bbPassword':_0x3a6855(0x255)}),(settings['bbPassword']&&settings[_0x3a6855(0x340)]==_0x3a6855(0x202)||settings['telegramToken']&&settings[_0x3a6855(0x346)]==_0x3a6855(0x202))&&(_0x564695={..._0x564695,'restored':{'password':settings[_0x3a6855(0x340)]==_0x3a6855(0x202),'telegram':settings[_0x3a6855(0x346)]==_0x3a6855(0x202)}}),_0x564695;}async function updateBB(_0x3b49da){const _0xbe4095=_0x452e8c;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x46a3cc=>{const _0x19787f=_0x42e4;restartBot(_0x46a3cc[_0x19787f(0x353)]);});if(_0x3b49da==_0xbe4095(0x298))process[_0xbe4095(0x2ac)]({'update':!![],'environment':environment},_0x2abe07=>{});else _0x3b49da==_0xbe4095(0x22e)&&process['send']({'reinstall':!![],'environment':environment},_0x5787ea=>{});}function startBot(_0x4f2c6f,_0xff98f2,_0x53131b){const _0x3f305a=_0x452e8c;if(debugging)_0x4f2c6f['push']('-d');let _0x22d27a=![];const _0x3a520e=_0x4f2c6f[0x0];_0xff98f2={..._0xff98f2,'stdio':[_0x3f305a(0x1ab),'inherit',_0x3f305a(0x1ab),'ipc']},pid[_0x3a520e]=childProcess[_0x3f305a(0x1f5)](botfile,_0x4f2c6f,_0xff98f2),pid[_0x3a520e]['on'](_0x3f305a(0x354),_0x127be8=>{const _0x1709cc=_0x3f305a;switch(Object[_0x1709cc(0x1c1)](_0x127be8)[0x0]){case _0x1709cc(0x309):updateBotName(_0x3a520e,_0x127be8[_0x1709cc(0x309)]);break;case _0x1709cc(0x250):updateBotManager();break;case'status':updateStatus(_0x3a520e,_0x127be8[_0x1709cc(0x270)]);break;case _0x1709cc(0x2c3):updateLive(_0x3a520e,_0x127be8[_0x1709cc(0x2c3)]);break;case _0x1709cc(0x30f):updateLive(_0x3a520e,_0x127be8[_0x1709cc(0x30f)]),io['to'](_0x3a520e)[_0x1709cc(0x286)]('status',{'access':{'allow':![],'reason':_0x1709cc(0x200),'token':null}});break;case _0x1709cc(0x29e):_0x127be8['stop']==_0x1709cc(0x32c)&&restartBot(_0x3a520e);_0x127be8['stop']==_0x1709cc(0x22f)&&toggleBot(_0x3a520e,_0x1709cc(0x233),_0x1709cc(0x295));break;case _0x1709cc(0x2f9):sendTelegram(_0x3a520e,_0x127be8['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x127be8[_0x1709cc(0x31e)]);break;case _0x1709cc(0x345):io['to'](_0x3a520e)[_0x1709cc(0x286)](_0x127be8[_0x1709cc(0x345)],_0x127be8[_0x1709cc(0x34c)]);break;}}),pid[_0x3a520e]['on'](_0x3f305a(0x216),function(_0x5c4759){if(_0x22d27a)return;_0x22d27a=!![],_0x53131b(_0x5c4759);}),pid[_0x3a520e]['on'](_0x3f305a(0x2c5),async function(_0x253dc3){const _0x27db17=_0x3f305a;if(installingUpdate)return;if(_0x22d27a)return;_0x22d27a=!![],_0x53131b(null);const _0x142eca=dbConfig['get'](_0x27db17(0x234))[_0x27db17(0x1b4)]({'botID':_0x3a520e})[_0x27db17(0x311)]();_0x142eca&&(_0x142eca[_0x27db17(0x270)]==_0x27db17(0x25c)||_0x142eca[_0x27db17(0x270)]==_0x27db17(0x1b8))&&(await sleep(0x3e8),updateLive(_0x3a520e,_0x27db17(0x295)),logger['full'](_0x27db17(0x2fa)+_0x3a520e),startBot([_0x3a520e,userID],{'cwd':bbpath},function(_0x2c4850){const _0x3709b1=_0x27db17;if(_0x2c4850)logger[_0x3709b1(0x2f8)](_0x2c4850);}));});}function stopBot(_0x480f50){getClientsWithBotID(_0x480f50)['forEach'](_0x846f4c=>{const _0x4c1ad2=_0x42e4;getSocket(_0x846f4c['id'])[_0x4c1ad2(0x1ce)](!![]),removeClient(_0x846f4c['id']);}),pid[_0x480f50]&&(pid[_0x480f50]['kill'](),pid[_0x480f50]=null);}function restartBot(_0xa554d1){const _0x3a8046=_0x452e8c;if(pid[_0xa554d1])pid[_0xa554d1][_0x3a8046(0x22f)]();}function addBot(){const _0x20d1a4=_0x452e8c;let _0x55cda9;for(let _0x207218=0x1;_0x207218<0x3e9;_0x207218++){_0x55cda9=_0x207218[_0x20d1a4(0x2a6)]()[_0x20d1a4(0x2ea)](0x3,'0');let _0x5670bd=config[_0x20d1a4(0x1b4)](_0x23482c=>_0x23482c[_0x20d1a4(0x353)]==_0x55cda9);if(!_0x5670bd)break;}if(_0x55cda9===_0x20d1a4(0x29a)){logger[_0x20d1a4(0x2f8)](_0x20d1a4(0x217));return;}logger[_0x20d1a4(0x2f8)](_0x20d1a4(0x30d)+_0x55cda9),dbConfig[_0x20d1a4(0x344)](_0x20d1a4(0x234))['push']({'botID':_0x55cda9,'botname':_0x20d1a4(0x34e)+_0x55cda9,'status':'new','live':''})[_0x20d1a4(0x36d)](),startBot([_0x55cda9,userID],{'cwd':bbpath},function(_0x561da5){if(_0x561da5)logger['full'](_0x561da5);}),config=getConfiguration(),io['to']('botmanager')[_0x20d1a4(0x286)](_0x20d1a4(0x234),config),broadcastToBots(_0x20d1a4(0x234),JSON['stringify'](config));}function deleteBot(_0x483e64){const _0x25c958=_0x452e8c;getClientsWithBotID(_0x483e64)['forEach'](_0x570a1a=>{const _0x5e96b2=_0x42e4;getSocket(_0x570a1a['id'])[_0x5e96b2(0x1ce)](!![]),removeClient(_0x570a1a['id']);}),dbConfig[_0x25c958(0x344)](_0x25c958(0x234))[_0x25c958(0x377)]({'botID':_0x483e64})[_0x25c958(0x36d)](),logger[_0x25c958(0x2f8)]('Deleted\x20Bot\x20'+_0x483e64),stopBot(_0x483e64);try{if(fs[_0x25c958(0x358)](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x1d3))))fs[_0x25c958(0x2fd)](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x1d3)));if(fs[_0x25c958(0x358)](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x2a4))))fs['unlinkSync'](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x2a4)));if(fs[_0x25c958(0x358)](path['join'](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x227))))fs['unlinkSync'](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x227)));if(fs[_0x25c958(0x358)](path['join'](configpath,_0x25c958(0x211)+_0x483e64+'-results.json')))fs[_0x25c958(0x2fd)](path[_0x25c958(0x329)](configpath,_0x25c958(0x211)+_0x483e64+_0x25c958(0x245)));}catch(_0x187011){if(_0x187011)logger[_0x25c958(0x2f8)](_0x25c958(0x304),_0x187011);}config=getConfiguration(),io['to'](_0x25c958(0x2f5))[_0x25c958(0x286)](_0x25c958(0x234),config),broadcastToBots(_0x25c958(0x234),JSON['stringify'](config));}function toggleBot(_0x4e8a19,_0xed3295,_0x1368c7){const _0x19f8b9=_0x452e8c;dbConfig[_0x19f8b9(0x344)](_0x19f8b9(0x234))[_0x19f8b9(0x1b4)]({'botID':_0x4e8a19})[_0x19f8b9(0x266)]({'status':_0xed3295})[_0x19f8b9(0x266)]({'live':_0x1368c7})[_0x19f8b9(0x36d)]();if(_0xed3295=='enabled'||_0xed3295==_0x19f8b9(0x1b8))logger[_0x19f8b9(0x2f8)](_0x19f8b9(0x2aa)+_0x4e8a19),startBot([_0x4e8a19,userID],{'cwd':bbpath},function(_0x4f1009){const _0x3f969f=_0x19f8b9;if(_0x4f1009)logger[_0x3f969f(0x2f8)](_0x4f1009);});else(_0xed3295==_0x19f8b9(0x233)||_0xed3295=='new-disabled')&&(logger[_0x19f8b9(0x2f8)](_0x19f8b9(0x219)+_0x4e8a19),stopBot(_0x4e8a19));config=getConfiguration(),io['to'](_0x19f8b9(0x2f5))[_0x19f8b9(0x286)]('bots',config),broadcastToBots(_0x19f8b9(0x234),JSON[_0x19f8b9(0x330)](config));}function toggleStatus(_0x463bab){const _0x53951b=_0x452e8c;let _0x1175ef=dbConfig[_0x53951b(0x344)](_0x53951b(0x234))[_0x53951b(0x1b4)]({'botID':_0x463bab})[_0x53951b(0x311)](),_0x106ce2;if(_0x1175ef[_0x53951b(0x270)]==='enabled')_0x106ce2=_0x53951b(0x233);else{if(_0x1175ef[_0x53951b(0x270)]==='new')_0x106ce2='new-disabled';else{if(_0x1175ef[_0x53951b(0x270)]===_0x53951b(0x33d))_0x106ce2=_0x53951b(0x1b8);else{if(_0x1175ef[_0x53951b(0x270)]==='disabled')_0x106ce2=_0x53951b(0x25c);}}}return _0x106ce2;}function updateStatus(_0x431372,_0x18101a){const _0x5d28f7=_0x452e8c;dbConfig[_0x5d28f7(0x344)](_0x5d28f7(0x234))[_0x5d28f7(0x1b4)]({'botID':_0x431372})[_0x5d28f7(0x266)]({'status':_0x18101a})[_0x5d28f7(0x36d)](),config=getConfiguration(),io['to'](_0x5d28f7(0x2f5))[_0x5d28f7(0x286)](_0x5d28f7(0x234),config),broadcastToBots(_0x5d28f7(0x234),JSON[_0x5d28f7(0x330)](config));}function updateLive(_0x13507a,_0x30fc10){const _0xc61bc4=_0x452e8c;dbConfig[_0xc61bc4(0x344)](_0xc61bc4(0x234))[_0xc61bc4(0x1b4)]({'botID':_0x13507a})[_0xc61bc4(0x266)]({'live':_0x30fc10})[_0xc61bc4(0x36d)](),config=getConfiguration(),io['to'](_0xc61bc4(0x2f5))[_0xc61bc4(0x286)]('bots',config),broadcastToBots(_0xc61bc4(0x234),JSON['stringify'](config));}function updateBotName(_0x5439ae,_0x506aef){const _0x308288=_0x452e8c;dbConfig[_0x308288(0x344)]('bots')[_0x308288(0x1b4)]({'botID':_0x5439ae})['assign']({'botname':_0x506aef})[_0x308288(0x36d)](),config=getConfiguration(),io['to'](_0x308288(0x2f5))[_0x308288(0x286)](_0x308288(0x234),config),broadcastToBots(_0x308288(0x234),JSON['stringify'](config));}function updateBotManager(){const _0xa20404=_0x452e8c;config=getConfiguration(),io['to'](_0xa20404(0x2f5))[_0xa20404(0x286)](_0xa20404(0x234),config),broadcastToBots(_0xa20404(0x234),JSON['stringify'](config));}function toggleBotMode(_0x476da5){const _0x3aca01=_0x452e8c;if(pid[_0x476da5])pid[_0x476da5][_0x3aca01(0x2ac)]({'function':_0x3aca01(0x2f2),'args':null});else{const _0x1f6b8b=configpath+_0x3aca01(0x211)+_0x476da5+_0x3aca01(0x1d3),_0x1a03f2=fs[_0x3aca01(0x1e9)](_0x1f6b8b),_0x3457ec=JSON[_0x3aca01(0x31a)](_0x1a03f2),_0x4706c2=_0x3457ec['bot'][0x0][_0x3aca01(0x333)];_0x3457ec[_0x3aca01(0x1ba)][0x0][_0x3aca01(0x333)]=!_0x4706c2;const _0x545fd2=JSON[_0x3aca01(0x330)](_0x3457ec,null,0x2);fs[_0x3aca01(0x2c2)](_0x1f6b8b,_0x545fd2),config=getConfiguration(),io['to'](_0x3aca01(0x2f5))[_0x3aca01(0x286)](_0x3aca01(0x234),config),broadcastToBots(_0x3aca01(0x234),JSON[_0x3aca01(0x330)](config));}}function telegramError(_0xe1afb7){const _0x505bac=_0x452e8c;logger[_0x505bac(0x293)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x487266){const _0xc3e891=_0x452e8c;if(_0x487266[_0xc3e891(0x2c0)]['username']!=settings[_0xc3e891(0x2b9)]&&'@'+_0x487266[_0xc3e891(0x2c0)][_0xc3e891(0x2e2)]!=settings['telegramUsername'])return tgBot[_0xc3e891(0x31d)](_0x487266[_0xc3e891(0x371)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0xc3e891(0x201)})[_0xc3e891(0x246)](_0x1cae81=>{telegramError(_0x1cae81);}),![];return!![];}async function initTelegram(){const _0x548d0f=_0x452e8c;if(tgBot)tgBot[_0x548d0f(0x1f8)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x548d0f(0x346)],{'polling':!![]});let _0x3b7852='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x3b7852+='\x0a',_0x3b7852+=_0x548d0f(0x327),_0x3b7852+=_0x548d0f(0x2ab),_0x3b7852+=_0x548d0f(0x20a),_0x3b7852+=_0x548d0f(0x25f),_0x3b7852+='/on\x20-\x20start\x20bot(s)\x0a',_0x3b7852+=_0x548d0f(0x1f6),_0x3b7852+=_0x548d0f(0x1ae),_0x3b7852+=_0x548d0f(0x218),_0x3b7852+=_0x548d0f(0x369),_0x3b7852+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x3b7852+=_0x548d0f(0x37b),_0x3b7852+=_0x548d0f(0x1b2),_0x3b7852+=_0x548d0f(0x2cb),_0x3b7852+=_0x548d0f(0x315);let _0x27e235=_0x548d0f(0x378);_0x27e235+='\x0a',_0x27e235+=_0x3b7852,tgBot[_0x548d0f(0x355)](/\/start/,_0x422611=>{const _0x2973b6=_0x548d0f;if(!validateTelegram(_0x422611))return;if(settings[_0x2973b6(0x32f)]!=_0x422611[_0x2973b6(0x371)]['id'])updateSetting(_0x2973b6(0x32f),_0x422611[_0x2973b6(0x371)]['id']);updateSetting(_0x2973b6(0x225),!![]),tgBot['sendMessage'](_0x422611[_0x2973b6(0x371)]['id'],_0x27e235)[_0x2973b6(0x246)](_0x11c880=>{telegramError(_0x11c880);});}),tgBot[_0x548d0f(0x355)](/\/enable/,_0x1f05fd=>{const _0x5929c6=_0x548d0f;if(!validateTelegram(_0x1f05fd))return;if(settings['telegramChatId']!=_0x1f05fd[_0x5929c6(0x371)]['id'])updateSetting(_0x5929c6(0x32f),_0x1f05fd[_0x5929c6(0x371)]['id']);updateSetting(_0x5929c6(0x225),!![]),tgBot[_0x5929c6(0x31d)](_0x1f05fd['chat']['id'],_0x5929c6(0x2e3))['catch'](_0xaf05d2=>{telegramError(_0xaf05d2);});}),tgBot[_0x548d0f(0x355)](/\/config/,async _0x416dae=>{const _0x2ed328=_0x548d0f;if(!validateTelegram(_0x416dae))return;tgBot[_0x2ed328(0x264)]('callback_query'),tgBot[_0x2ed328(0x31d)](_0x416dae[_0x2ed328(0x371)]['id'],_0x2ed328(0x1ac),{'reply_markup':{'inline_keyboard':[[{'text':_0x2ed328(0x2d9),'callback_data':'orders'},{'text':_0x2ed328(0x2ce),'callback_data':_0x2ed328(0x275)},{'text':'All','callback_data':'all'}]]}})[_0x2ed328(0x246)](_0x206d36=>{telegramError(_0x206d36);}),tgBot['on'](_0x2ed328(0x223),async _0x54e6e9=>{const _0x43ac10=_0x2ed328,_0x28a07c=_0x54e6e9[_0x43ac10(0x33c)],_0x384207=_0x54e6e9[_0x43ac10(0x354)];tgBot[_0x43ac10(0x2e8)](_0x54e6e9['id'])[_0x43ac10(0x2ad)](async()=>{const _0x4fdafb=_0x43ac10;_0x28a07c==_0x4fdafb(0x265)&&(updateSetting(_0x4fdafb(0x20f),_0x4fdafb(0x265)),updateSetting(_0x4fdafb(0x225),!![]),await tgBot[_0x4fdafb(0x31d)](_0x384207[_0x4fdafb(0x371)]['id'],_0x4fdafb(0x2a3))[_0x4fdafb(0x246)](_0x402610=>{telegramError(_0x402610);}));_0x28a07c==_0x4fdafb(0x275)&&(updateSetting(_0x4fdafb(0x20f),'alerts'),updateSetting(_0x4fdafb(0x225),!![]),await tgBot['sendMessage'](_0x384207['chat']['id'],_0x4fdafb(0x338))[_0x4fdafb(0x246)](_0x463073=>{telegramError(_0x463073);}));_0x28a07c==_0x4fdafb(0x27e)&&(updateSetting(_0x4fdafb(0x20f),_0x4fdafb(0x27e)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4fdafb(0x31d)](_0x384207['chat']['id'],_0x4fdafb(0x367))[_0x4fdafb(0x246)](_0x1e06cb=>{telegramError(_0x1e06cb);}));if(!settings[_0x4fdafb(0x32f)])tgBot[_0x4fdafb(0x31d)](_0x384207[_0x4fdafb(0x371)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x4fdafb(0x246)](_0x50d76d=>{telegramError(_0x50d76d);});}),tgBot[_0x43ac10(0x264)](_0x43ac10(0x223));});}),tgBot[_0x548d0f(0x355)](/\/status/,_0x27e3d0=>{const _0x44c948=_0x548d0f;if(!validateTelegram(_0x27e3d0))return;const _0x4bdef4=getBotsWithMode();let _0x3d6f69='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x52d58b=>{const _0x3f271d=_0x42e4,_0x3d1495=_0x4bdef4[_0x3f271d(0x1b4)](_0x352298=>_0x352298[_0x3f271d(0x353)]==_0x52d58b[_0x3f271d(0x353)])[_0x3f271d(0x237)];_0x3d6f69+=_0x3f271d(0x34e)+_0x52d58b[_0x3f271d(0x353)]+':\x20'+_0x52d58b[_0x3f271d(0x270)]+_0x3f271d(0x325)+_0x3d1495+'\x20|\x20'+_0x52d58b[_0x3f271d(0x2c3)]+'\x0a';}),_0x3d6f69+='\x0a',_0x3d6f69+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3d6f69+=!settings[_0x44c948(0x225)]?_0x44c948(0x212):_0x44c948(0x34d),_0x3d6f69+=settings[_0x44c948(0x225)]?settings[_0x44c948(0x20f)]=='all'?_0x44c948(0x249):'Notifications\x20types:\x20'+settings[_0x44c948(0x20f)]+'\x20only\x0a':'',tgBot[_0x44c948(0x31d)](_0x27e3d0['chat']['id'],_0x3d6f69,{'parse_mode':_0x44c948(0x201)})[_0x44c948(0x246)](_0x97c1c1=>{telegramError(_0x97c1c1);});}),tgBot[_0x548d0f(0x355)](/\/restart/,_0x2ce416=>{const _0x318a22=_0x548d0f;if(!validateTelegram(_0x2ce416))return;tgBot['removeListener'](_0x318a22(0x223));const _0x4ee37b=getEnabledBots();if(_0x4ee37b[_0x318a22(0x313)]==0x0)tgBot[_0x318a22(0x31d)](_0x2ce416[_0x318a22(0x371)]['id'],_0x318a22(0x26b))['catch'](_0x20083b=>{telegramError(_0x20083b);});else{if(_0x4ee37b[_0x318a22(0x313)]>0x1)_0x4ee37b['push']({'botID':_0x318a22(0x27e)});let _0x2d667d=[],_0x1a1ca1=[];const _0x112a4d=_0x4ee37b[_0x318a22(0x313)]%0x4==0x0||_0x4ee37b[_0x318a22(0x313)]%0x4==0x3||_0x4ee37b[_0x318a22(0x313)]%0x3==0x1?0x4:0x3;let _0xd2f72f=0x0;_0x4ee37b[_0x318a22(0x25e)]((_0x142b3d,_0x5185e1)=>{const _0x42d943=_0x318a22;if(_0x5185e1%_0x112a4d==0x0)_0x1a1ca1=[];_0x1a1ca1['push']({'text':_0x142b3d[_0x42d943(0x353)]==_0x42d943(0x27e)?_0x42d943(0x205):_0x42d943(0x34e)+_0x142b3d[_0x42d943(0x353)],'callback_data':_0x142b3d[_0x42d943(0x353)]}),_0x5185e1%_0x112a4d==0x0&&(_0x2d667d[_0xd2f72f]=_0x1a1ca1,_0xd2f72f++);}),tgBot['sendMessage'](_0x2ce416['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x2d667d}})[_0x318a22(0x246)](_0x38e2fd=>{telegramError(_0x38e2fd);}),tgBot['on'](_0x318a22(0x223),async _0x5803f2=>{const _0x3c2430=_0x318a22,_0x1a53a6=_0x5803f2[_0x3c2430(0x33c)],_0xbe66c2=_0x5803f2[_0x3c2430(0x354)];tgBot[_0x3c2430(0x2e8)](_0x5803f2['id'])[_0x3c2430(0x2ad)](async()=>{_0x1a53a6=='all'?config['forEach'](_0x41d16e=>{restartBot(_0x41d16e['botID']);}):restartBot(_0x1a53a6);}),tgBot[_0x3c2430(0x264)](_0x3c2430(0x223));});}}),tgBot['onText'](/\/on/,_0x20acbb=>{const _0x574eb=_0x548d0f;if(!validateTelegram(_0x20acbb))return;tgBot[_0x574eb(0x264)](_0x574eb(0x223));const _0x5e78f8=getDisabledBots();if(_0x5e78f8['length']==0x0)tgBot[_0x574eb(0x31d)](_0x20acbb[_0x574eb(0x371)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x466c5f=>{telegramError(_0x466c5f);});else{if(_0x5e78f8['length']>0x1)_0x5e78f8[_0x574eb(0x2ec)]({'botID':_0x574eb(0x27e)});let _0x59cca9=[],_0x432bb0=[];const _0x462635=_0x5e78f8['length']%0x4==0x0||_0x5e78f8['length']%0x4==0x3||_0x5e78f8[_0x574eb(0x313)]%0x3==0x1?0x4:0x3;let _0x1b5dd7=0x0;_0x5e78f8[_0x574eb(0x25e)]((_0x13d1e7,_0x1585b0)=>{const _0x34a2fb=_0x574eb;if(_0x1585b0%_0x462635==0x0)_0x432bb0=[];_0x432bb0[_0x34a2fb(0x2ec)]({'text':_0x13d1e7['botID']=='all'?_0x34a2fb(0x205):'Bot\x20'+_0x13d1e7[_0x34a2fb(0x353)],'callback_data':_0x13d1e7[_0x34a2fb(0x353)]}),_0x1585b0%_0x462635==0x0&&(_0x59cca9[_0x1b5dd7]=_0x432bb0,_0x1b5dd7++);}),tgBot[_0x574eb(0x31d)](_0x20acbb['chat']['id'],_0x574eb(0x2d0),{'reply_markup':{'inline_keyboard':_0x59cca9}})[_0x574eb(0x246)](_0x568887=>{telegramError(_0x568887);}),tgBot['on'](_0x574eb(0x223),async _0x21c28b=>{const _0x4b0bfe=_0x574eb,_0x3500cd=_0x21c28b[_0x4b0bfe(0x33c)],_0x36b119=_0x21c28b['message'];tgBot[_0x4b0bfe(0x2e8)](_0x21c28b['id'])[_0x4b0bfe(0x2ad)](async()=>{const _0x25d31d=_0x4b0bfe;_0x3500cd=='all'?(tgBot['sendMessage'](_0x36b119[_0x25d31d(0x371)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x25d31d(0x246)](_0x1847bc=>{telegramError(_0x1847bc);}),_0x5e78f8[_0x25d31d(0x25e)](_0x5a3339=>{const _0x5440f3=_0x25d31d;if(_0x5a3339['botID']!=_0x5440f3(0x27e))toggleBot(_0x5a3339[_0x5440f3(0x353)],toggleStatus(_0x5a3339[_0x5440f3(0x353)]),_0x5440f3(0x295));})):(tgBot['sendMessage'](_0x36b119[_0x25d31d(0x371)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x3500cd)[_0x25d31d(0x246)](_0xd40448=>{telegramError(_0xd40448);}),toggleBot(_0x3500cd,toggleStatus(_0x3500cd),_0x25d31d(0x295)));}),tgBot['removeListener'](_0x4b0bfe(0x223));});}}),tgBot[_0x548d0f(0x355)](/\/off/,_0x478046=>{const _0x2259f9=_0x548d0f;if(!validateTelegram(_0x478046))return;tgBot[_0x2259f9(0x264)]('callback_query');const _0x11904a=getEnabledBots();if(_0x11904a[_0x2259f9(0x313)]==0x0)tgBot[_0x2259f9(0x31d)](_0x478046[_0x2259f9(0x371)]['id'],_0x2259f9(0x26b))[_0x2259f9(0x246)](_0x538f1f=>{telegramError(_0x538f1f);});else{if(_0x11904a['length']>0x1)_0x11904a[_0x2259f9(0x2ec)]({'botID':_0x2259f9(0x27e)});let _0x3379b6=[],_0x4f271d=[];const _0x41e615=_0x11904a[_0x2259f9(0x313)]%0x4==0x0||_0x11904a['length']%0x4==0x3||_0x11904a[_0x2259f9(0x313)]%0x3==0x1?0x4:0x3;let _0x502f39=0x0;_0x11904a[_0x2259f9(0x25e)]((_0x120cc9,_0x7d8c0c)=>{const _0x2e028e=_0x2259f9;if(_0x7d8c0c%_0x41e615==0x0)_0x4f271d=[];_0x4f271d['push']({'text':_0x120cc9[_0x2e028e(0x353)]==_0x2e028e(0x27e)?_0x2e028e(0x205):_0x2e028e(0x34e)+_0x120cc9[_0x2e028e(0x353)],'callback_data':_0x120cc9[_0x2e028e(0x353)]}),_0x7d8c0c%_0x41e615==0x0&&(_0x3379b6[_0x502f39]=_0x4f271d,_0x502f39++);}),tgBot['sendMessage'](_0x478046[_0x2259f9(0x371)]['id'],_0x2259f9(0x2b7),{'reply_markup':{'inline_keyboard':_0x3379b6}})[_0x2259f9(0x246)](_0x25ca6f=>{telegramError(_0x25ca6f);}),tgBot['on'](_0x2259f9(0x223),async _0x23ece0=>{const _0x55e8b8=_0x2259f9,_0x4fc73f=_0x23ece0[_0x55e8b8(0x33c)],_0x5576d1=_0x23ece0['message'];tgBot[_0x55e8b8(0x2e8)](_0x23ece0['id'])[_0x55e8b8(0x2ad)](async()=>{const _0x5022cc=_0x55e8b8;_0x4fc73f==_0x5022cc(0x27e)?(tgBot['sendMessage'](_0x5576d1[_0x5022cc(0x371)]['id'],_0x5022cc(0x1be))[_0x5022cc(0x246)](_0x109365=>{telegramError(_0x109365);}),_0x11904a[_0x5022cc(0x25e)](_0x2163cb=>{const _0x16c29e=_0x5022cc;if(_0x2163cb['botID']!=_0x16c29e(0x27e))toggleBot(_0x2163cb[_0x16c29e(0x353)],toggleStatus(_0x2163cb[_0x16c29e(0x353)]),_0x16c29e(0x295));})):(tgBot['sendMessage'](_0x5576d1[_0x5022cc(0x371)]['id'],_0x5022cc(0x27b)+_0x4fc73f)[_0x5022cc(0x246)](_0x497ddb=>{telegramError(_0x497ddb);}),toggleBot(_0x4fc73f,toggleStatus(_0x4fc73f),_0x5022cc(0x295)));}),tgBot[_0x55e8b8(0x264)](_0x55e8b8(0x223));});}}),tgBot['onText'](/\/metrics/,_0x200fd2=>{const _0x162a25=_0x548d0f;if(!validateTelegram(_0x200fd2))return;tgBot['removeListener'](_0x162a25(0x223));const _0x28b398=getEnabledBots();if(_0x28b398[_0x162a25(0x313)]==0x0)tgBot[_0x162a25(0x31d)](_0x200fd2[_0x162a25(0x371)]['id'],_0x162a25(0x26b))[_0x162a25(0x246)](_0x38a937=>{telegramError(_0x38a937);});else{if(_0x28b398['length']>0x1){let _0x495d78=[],_0x8603ab=[];const _0x56a3ec=_0x28b398[_0x162a25(0x313)]%0x4==0x0||_0x28b398[_0x162a25(0x313)]%0x4==0x3||_0x28b398[_0x162a25(0x313)]%0x3==0x1?0x4:0x3;let _0x2a9439=0x0;_0x28b398[_0x162a25(0x25e)]((_0x25b9b8,_0x2c141c)=>{const _0x4d27dc=_0x162a25;if(_0x2c141c%_0x56a3ec==0x0)_0x8603ab=[];_0x8603ab[_0x4d27dc(0x2ec)]({'text':_0x4d27dc(0x34e)+_0x25b9b8[_0x4d27dc(0x353)],'callback_data':_0x25b9b8[_0x4d27dc(0x353)]}),_0x2c141c%_0x56a3ec==0x0&&(_0x495d78[_0x2a9439]=_0x8603ab,_0x2a9439++);}),tgBot[_0x162a25(0x31d)](_0x200fd2[_0x162a25(0x371)]['id'],_0x162a25(0x326),{'reply_markup':{'inline_keyboard':_0x495d78}})[_0x162a25(0x246)](_0x59da65=>{telegramError(_0x59da65);}),tgBot['on'](_0x162a25(0x223),async _0x54a77e=>{const _0x3fedfa=_0x162a25,_0x489524=_0x54a77e[_0x3fedfa(0x33c)],_0x138476=_0x54a77e[_0x3fedfa(0x354)];tgBot[_0x3fedfa(0x2e8)](_0x54a77e['id'])[_0x3fedfa(0x2ad)](async()=>{const _0x1b76db=_0x3fedfa;if(pid[_0x489524])pid[_0x489524]['send']({'function':_0x1b76db(0x228),'args':null});}),tgBot[_0x3fedfa(0x264)]('callback_query');});}else{const _0x512de6=_0x28b398[0x0][_0x162a25(0x353)];if(pid[_0x512de6])pid[_0x512de6][_0x162a25(0x2ac)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot['onText'](/\/portfolio/,_0x14c177=>{const _0x2f9867=_0x548d0f;if(!validateTelegram(_0x14c177))return;tgBot['removeListener'](_0x2f9867(0x223));const _0x5e95b1=getEnabledBots();if(_0x5e95b1[_0x2f9867(0x313)]==0x0)tgBot[_0x2f9867(0x31d)](_0x14c177[_0x2f9867(0x371)]['id'],_0x2f9867(0x26b))[_0x2f9867(0x246)](_0x4168ac=>{telegramError(_0x4168ac);});else{if(_0x5e95b1[_0x2f9867(0x313)]>0x1){let _0x5ea172=[],_0x2829e5=[];const _0x5ab1b1=_0x5e95b1[_0x2f9867(0x313)]%0x4==0x0||_0x5e95b1[_0x2f9867(0x313)]%0x4==0x3||_0x5e95b1['length']%0x3==0x1?0x4:0x3;let _0x1af322=0x0;_0x5e95b1['forEach']((_0xc147a6,_0x10605d)=>{const _0x2d1cdf=_0x2f9867;if(_0x10605d%_0x5ab1b1==0x0)_0x2829e5=[];_0x2829e5['push']({'text':_0x2d1cdf(0x34e)+_0xc147a6[_0x2d1cdf(0x353)],'callback_data':_0xc147a6[_0x2d1cdf(0x353)]}),_0x10605d%_0x5ab1b1==0x0&&(_0x5ea172[_0x1af322]=_0x2829e5,_0x1af322++);}),tgBot[_0x2f9867(0x31d)](_0x14c177[_0x2f9867(0x371)]['id'],_0x2f9867(0x26e),{'reply_markup':{'inline_keyboard':_0x5ea172}})['catch'](_0x7dc23c=>{telegramError(_0x7dc23c);}),tgBot['on']('callback_query',async _0x2caa07=>{const _0x136dbd=_0x2f9867,_0x40accd=_0x2caa07[_0x136dbd(0x33c)],_0x488740=_0x2caa07['message'];tgBot[_0x136dbd(0x2e8)](_0x2caa07['id'])[_0x136dbd(0x2ad)](async()=>{const _0xc627c8=_0x136dbd;if(pid[_0x40accd])pid[_0x40accd][_0xc627c8(0x2ac)]({'function':_0xc627c8(0x247),'args':null});}),tgBot[_0x136dbd(0x264)]('callback_query');});}else{const _0xa2eb6e=_0x5e95b1[0x0][_0x2f9867(0x353)];if(pid[_0xa2eb6e])pid[_0xa2eb6e][_0x2f9867(0x2ac)]({'function':_0x2f9867(0x247),'args':null});}}}),tgBot[_0x548d0f(0x355)](/\/update/,async _0x1cc9f1=>{const _0x26806d=_0x548d0f;if(!validateTelegram(_0x1cc9f1))return;tgBot[_0x26806d(0x264)](_0x26806d(0x223)),await getMessages();if(!updateAvailable)tgBot[_0x26806d(0x31d)](_0x1cc9f1['chat']['id'],_0x26806d(0x215))[_0x26806d(0x246)](_0xc90fd8=>{telegramError(_0xc90fd8);});else!validInstallation?tgBot['sendMessage'](_0x1cc9f1[_0x26806d(0x371)]['id'],_0x26806d(0x2f4))[_0x26806d(0x246)](_0x180364=>{telegramError(_0x180364);}):(tgBot['sendMessage'](_0x1cc9f1[_0x26806d(0x371)]['id'],_0x26806d(0x31c),{'reply_markup':{'inline_keyboard':[[{'text':_0x26806d(0x24f),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x26806d(0x246)](_0x36ad5c=>{telegramError(_0x36ad5c);}),tgBot['on'](_0x26806d(0x223),async _0x4a0c84=>{const _0x244da1=_0x26806d,_0x57a385=_0x4a0c84[_0x244da1(0x33c)],_0x4d8fe7=_0x4a0c84['message'];tgBot['answerCallbackQuery'](_0x4a0c84['id'])[_0x244da1(0x2ad)](async()=>{const _0x9b56db=_0x244da1;_0x57a385==_0x9b56db(0x209)&&(await tgBot['sendMessage'](_0x4d8fe7[_0x9b56db(0x371)]['id'],_0x9b56db(0x21f))[_0x9b56db(0x246)](_0x264ff9=>{telegramError(_0x264ff9);}),updateBB('update')),_0x57a385=='no'&&await tgBot[_0x9b56db(0x31d)](_0x4d8fe7[_0x9b56db(0x371)]['id'],_0x9b56db(0x282))[_0x9b56db(0x246)](_0x4596c0=>{telegramError(_0x4596c0);});}),tgBot[_0x244da1(0x264)](_0x244da1(0x223));}));}),tgBot[_0x548d0f(0x355)](/\/reinstall/,async _0x584431=>{const _0x97e7f4=_0x548d0f;if(!validateTelegram(_0x584431))return;tgBot[_0x97e7f4(0x264)]('callback_query'),!validInstallation?tgBot[_0x97e7f4(0x31d)](_0x584431[_0x97e7f4(0x371)]['id'],_0x97e7f4(0x1ef))['catch'](_0x379b0d=>{telegramError(_0x379b0d);}):(tgBot[_0x97e7f4(0x31d)](_0x584431[_0x97e7f4(0x371)]['id'],_0x97e7f4(0x1d5),{'reply_markup':{'inline_keyboard':[[{'text':_0x97e7f4(0x24f),'callback_data':_0x97e7f4(0x209)},{'text':'No','callback_data':'no'}]]}})[_0x97e7f4(0x246)](_0x305ecf=>{telegramError(_0x305ecf);}),tgBot['on']('callback_query',async _0x5e0137=>{const _0x536d54=_0x97e7f4,_0x17d602=_0x5e0137[_0x536d54(0x33c)],_0x3a33fc=_0x5e0137[_0x536d54(0x354)];tgBot['answerCallbackQuery'](_0x5e0137['id'])[_0x536d54(0x2ad)](async()=>{const _0x56002b=_0x536d54;_0x17d602==_0x56002b(0x209)&&(await tgBot[_0x56002b(0x31d)](_0x3a33fc[_0x56002b(0x371)]['id'],_0x56002b(0x20c))[_0x56002b(0x246)](_0x7bb9ec=>{telegramError(_0x7bb9ec);}),updateBB(_0x56002b(0x22e))),_0x17d602=='no'&&await tgBot['sendMessage'](_0x3a33fc[_0x56002b(0x371)]['id'],_0x56002b(0x350))[_0x56002b(0x246)](_0xb345e6=>{telegramError(_0xb345e6);});}),tgBot[_0x536d54(0x264)](_0x536d54(0x223));}));}),tgBot[_0x548d0f(0x355)](/\/toggle/,_0x234be4=>{const _0x416b9a=_0x548d0f;if(!validateTelegram(_0x234be4))return;tgBot[_0x416b9a(0x264)](_0x416b9a(0x223));const _0x6c2871=getBotsWithMode();if(_0x6c2871[_0x416b9a(0x313)]==0x0)tgBot[_0x416b9a(0x31d)](_0x234be4['chat']['id'],_0x416b9a(0x26b))[_0x416b9a(0x246)](_0x2869ed=>{telegramError(_0x2869ed);});else{let _0x101cf3=[],_0x2faf67=[];const _0x22b00a=0x2;let _0x253cfa=0x0;_0x6c2871[_0x416b9a(0x25e)]((_0x2d07be,_0x3b2e8a)=>{const _0x13a804=_0x416b9a;if(_0x3b2e8a%_0x22b00a==0x0)_0x2faf67=[];_0x2faf67[_0x13a804(0x2ec)]({'text':_0x13a804(0x34e)+_0x2d07be[_0x13a804(0x353)]+'\x20('+_0x2d07be[_0x13a804(0x237)]+')','callback_data':_0x2d07be[_0x13a804(0x353)]}),_0x3b2e8a%_0x22b00a==0x0&&(_0x101cf3[_0x253cfa]=_0x2faf67,_0x253cfa++);}),tgBot[_0x416b9a(0x31d)](_0x234be4[_0x416b9a(0x371)]['id'],_0x416b9a(0x1c5),{'reply_markup':{'inline_keyboard':_0x101cf3}})['catch'](_0x5b53ce=>{telegramError(_0x5b53ce);}),tgBot['on'](_0x416b9a(0x223),async _0x280d8e=>{const _0x5e4707=_0x416b9a,_0xffe3b1=_0x280d8e[_0x5e4707(0x33c)],_0x38b240=_0x280d8e[_0x5e4707(0x354)];tgBot[_0x5e4707(0x2e8)](_0x280d8e['id'])[_0x5e4707(0x2ad)](async()=>{const _0x47b0e0=_0x5e4707,_0x57b4d2=_0x6c2871[_0x47b0e0(0x1b4)](_0x24c062=>_0x24c062['botID']==_0xffe3b1),_0x372c0c=_0x57b4d2[_0x47b0e0(0x237)]=='auto'?_0x47b0e0(0x323):_0x47b0e0(0x292);tgBot[_0x47b0e0(0x31d)](_0x38b240[_0x47b0e0(0x371)]['id'],_0x47b0e0(0x2e7)+_0xffe3b1+_0x47b0e0(0x306)+_0x372c0c+_0x47b0e0(0x26f))[_0x47b0e0(0x246)](_0x59ee30=>{telegramError(_0x59ee30);}),toggleBotMode(_0xffe3b1);}),tgBot[_0x5e4707(0x264)](_0x5e4707(0x223));});}}),tgBot[_0x548d0f(0x355)](/\/names/,_0x210bca=>{const _0x3696f1=_0x548d0f;if(!validateTelegram(_0x210bca))return;let _0x54bfc9='';config[_0x3696f1(0x25e)](_0x2c1657=>{const _0x2e5391=_0x3696f1;_0x54bfc9+='Bot\x20'+_0x2c1657[_0x2e5391(0x353)]+':\x20'+_0x2c1657[_0x2e5391(0x309)]+'\x0a';}),tgBot[_0x3696f1(0x31d)](_0x210bca['chat']['id'],_0x54bfc9,{'parse_mode':_0x3696f1(0x201)})['catch'](_0x370f87=>{telegramError(_0x370f87);});}),tgBot[_0x548d0f(0x355)](/\/disable/,_0x2dda94=>{const _0x62ed9c=_0x548d0f;if(!validateTelegram(_0x2dda94))return;tgBot['sendMessage'](_0x2dda94[_0x62ed9c(0x371)]['id'],'Notifications\x20disabled')[_0x62ed9c(0x246)](_0x89a958=>{telegramError(_0x89a958);}),updateSetting(_0x62ed9c(0x225),![]);}),tgBot[_0x548d0f(0x355)](/\/help/,_0x49d108=>{const _0x326546=_0x548d0f;if(!validateTelegram(_0x49d108))return;tgBot['sendMessage'](_0x49d108['chat']['id'],_0x3b7852)[_0x326546(0x246)](_0x3f27e1=>{telegramError(_0x3f27e1);});}),tgBot['on'](_0x548d0f(0x35b),_0x17402f=>{const _0x5d0209=_0x548d0f;_0x17402f[_0x5d0209(0x2a6)]()['includes']('404\x20Not\x20Found')&&(logger[_0x5d0209(0x2f8)](_0x5d0209(0x283)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x5d0209(0x2f5))[_0x5d0209(0x286)]('notification',_0x5d0209(0x283)));}),process[_0x548d0f(0x240)](_0x548d0f(0x26c),()=>{const _0x475ba6=_0x548d0f;if(tgBot)tgBot[_0x475ba6(0x1f8)]();process['exit'](0x1);}),process[_0x548d0f(0x240)](_0x548d0f(0x2b2),()=>{const _0x4114c1=_0x548d0f;if(tgBot)tgBot[_0x4114c1(0x1f8)]();process[_0x4114c1(0x2c5)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x181061,_0x20bd20){const _0x537073=_0x452e8c;if(settings[_0x537073(0x225)]){if(settings[_0x537073(0x20f)]==_0x537073(0x27e)||(_0x20bd20['type']==_0x537073(0x216)||_0x20bd20[_0x537073(0x1d8)]==_0x537073(0x2a5)||_0x20bd20[_0x537073(0x1d8)]==_0x537073(0x21b))&&settings[_0x537073(0x20f)]==_0x537073(0x275)||_0x20bd20[_0x537073(0x1d8)]==_0x537073(0x35a)&&settings[_0x537073(0x20f)]==_0x537073(0x265)){if(tgBot&&settings[_0x537073(0x32f)]){if(_0x20bd20[_0x537073(0x239)])tgBot[_0x537073(0x31d)](settings[_0x537073(0x32f)],_0x20bd20[_0x537073(0x309)]+_0x537073(0x1bc)+_0x20bd20[_0x537073(0x375)])['catch'](_0xbdf849=>{telegramError(_0xbdf849);});else tgBot[_0x537073(0x31d)](settings['telegramChatId'],_0x537073(0x34e)+_0x181061+_0x537073(0x1bc)+_0x20bd20[_0x537073(0x375)])[_0x537073(0x246)](_0x3d62e4=>{telegramError(_0x3d62e4);});}}}}async function sendTelegramMsg(_0xfc0315,_0x4f2563=_0x452e8c(0x201)){const _0x5bff48=_0x452e8c;return settings[_0x5bff48(0x225)]&&tgBot&&settings[_0x5bff48(0x32f)]?(await tgBot[_0x5bff48(0x31d)](settings['telegramChatId'],_0xfc0315,{'parse_mode':_0x4f2563})[_0x5bff48(0x246)](_0x253e43=>{telegramError(_0x253e43);}),!![]):![];}function getDeviceWithIp(_0x23ab7f){return devices['find'](_0x2450ec=>_0x2450ec['ip']===_0x23ab7f);}function temporaryAccess2FA(_0x49e5e0,_0x1534ef){const _0x3f191c=_0x452e8c;let _0x4b3b4f=new Date(),_0x348518=![];if(lastIpApproval){if(_0x4b3b4f-lastIpApproval<0x1388)_0x348518=!![];}lastIpApproval=new Date();if(_0x348518)return;tgBot&&settings[_0x3f191c(0x32f)]&&(tgBot[_0x3f191c(0x264)](_0x3f191c(0x223)),tgBot[_0x3f191c(0x31d)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1534ef)['show']+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x3f191c(0x32e),'callback_data':'15'},{'text':_0x3f191c(0x276),'callback_data':'30'},{'text':'reject','callback_data':_0x3f191c(0x2bd)}]]}})[_0x3f191c(0x246)](_0x8e43a8=>{telegramError(_0x8e43a8);}),tgBot['on'](_0x3f191c(0x223),async _0x3b430f=>{const _0x1c08b6=_0x3f191c,_0x552b95=_0x3b430f[_0x1c08b6(0x33c)],_0x4d8630=_0x3b430f[_0x1c08b6(0x354)];tgBot[_0x1c08b6(0x2e8)](_0x3b430f['id'])[_0x1c08b6(0x2ad)](async()=>{const _0x3a2168=_0x1c08b6;devices[_0x49e5e0][_0x3a2168(0x302)]={'clientip':_0x1534ef,'timestamp':new Date()[_0x3a2168(0x28f)](),'expiry':_0x552b95},_0x552b95!=_0x3a2168(0x2bd)?(await tgBot['sendMessage'](_0x4d8630[_0x3a2168(0x371)]['id'],'Access\x20enabled\x20for\x20'+_0x552b95+'\x20minutes',{'parse_mode':'HTML'})[_0x3a2168(0x246)](_0x55d9ce=>{telegramError(_0x55d9ce);}),io['to'](_0x49e5e0)[_0x3a2168(0x286)](_0x3a2168(0x270),{'access':{'allow':![],'reason':_0x3a2168(0x200),'token':null}})):(await tgBot[_0x3a2168(0x31d)](_0x4d8630[_0x3a2168(0x371)]['id'],'Temporary\x20access\x20rejected')[_0x3a2168(0x246)](_0x4ece84=>{telegramError(_0x4ece84);}),io['to'](_0x49e5e0)[_0x3a2168(0x286)](_0x3a2168(0x270),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x1c08b6(0x223));}));}function loginAccess2FA(_0x422d05,_0x505b71){const _0x119c56=_0x452e8c;tgBot&&settings[_0x119c56(0x32f)]&&(tgBot[_0x119c56(0x264)](_0x119c56(0x223)),tgBot[_0x119c56(0x31d)](settings['telegramChatId'],_0x119c56(0x342)+normalizeIP(_0x505b71)['show']+_0x119c56(0x37a),{'parse_mode':_0x119c56(0x201),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x119c56(0x2bd),'callback_data':_0x119c56(0x2bd)}]]}})[_0x119c56(0x246)](_0x47904d=>{telegramError(_0x47904d);}),tgBot['on'](_0x119c56(0x223),async _0x59537a=>{const _0x2cbdf9=_0x119c56,_0x26aa86=_0x59537a[_0x2cbdf9(0x33c)],_0x174d18=_0x59537a[_0x2cbdf9(0x354)];tgBot[_0x2cbdf9(0x2e8)](_0x59537a['id'])['then'](async()=>{const _0x58e328=_0x2cbdf9;devices[_0x422d05][_0x58e328(0x35c)]={'clientip':_0x505b71,'timestamp':new Date()[_0x58e328(0x28f)](),'expiry':_0x26aa86},_0x26aa86!='reject'?(await tgBot[_0x58e328(0x31d)](_0x174d18[_0x58e328(0x371)]['id'],_0x58e328(0x2de),{'parse_mode':'HTML'})[_0x58e328(0x246)](_0x36a883=>{telegramError(_0x36a883);}),io['to'](_0x422d05)[_0x58e328(0x286)](_0x58e328(0x270),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x58e328(0x31d)](_0x174d18[_0x58e328(0x371)]['id'],'Login\x20rejected')[_0x58e328(0x246)](_0xe0a74c=>{telegramError(_0xe0a74c);}),io['to'](_0x422d05)[_0x58e328(0x286)](_0x58e328(0x270),{'access':{'allow':![],'reason':_0x58e328(0x308),'token':null}}));}),tgBot[_0x2cbdf9(0x264)](_0x2cbdf9(0x223));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x124d62=_0x452e8c;return dbConfig[_0x124d62(0x344)](_0x124d62(0x234))[_0x124d62(0x334)](_0x124d62(0x353))[_0x124d62(0x253)]({'status':_0x124d62(0x25c)})['value']()||[];}function getDisabledBots(){const _0xe6ab78=_0x452e8c;return dbConfig[_0xe6ab78(0x344)](_0xe6ab78(0x234))[_0xe6ab78(0x334)](_0xe6ab78(0x353))[_0xe6ab78(0x253)]({'status':'disabled'})[_0xe6ab78(0x311)]()||[];}function getBotAttributes(_0x4e56dd){const _0x559238=_0x452e8c;let _0x1bcc55={};const _0x131200=configpath+'bot-'+_0x4e56dd+_0x559238(0x1d3),_0x2e363b=fs[_0x559238(0x358)](_0x131200);if(_0x2e363b){const _0x329326=fs['readFileSync'](_0x131200);try{const _0x14ebb1=JSON[_0x559238(0x31a)](_0x329326),_0x565a78=_0x14ebb1?_0x14ebb1[_0x559238(0x1ba)][0x0]['headless']:![];_0x1bcc55[_0x559238(0x237)]=_0x565a78?_0x559238(0x292):_0x559238(0x323),_0x1bcc55[_0x559238(0x309)]=_0x14ebb1?_0x14ebb1[_0x559238(0x1ba)][0x0][_0x559238(0x309)]:_0x559238(0x34e)+_0x4e56dd;}catch(_0x59aaa2){_0x1bcc55[_0x559238(0x237)]='manual',_0x1bcc55[_0x559238(0x309)]=_0x559238(0x34e)+_0x4e56dd;}}else _0x1bcc55['mode']=_0x559238(0x323),_0x1bcc55[_0x559238(0x309)]=_0x559238(0x34e)+_0x4e56dd;return _0x1bcc55;}function getBotsWithMode(){const _0x3c721a=_0x452e8c,_0x59a965=dbConfig[_0x3c721a(0x344)](_0x3c721a(0x234))['sortBy'](_0x3c721a(0x353))['value']()||[];return _0x59a965[_0x3c721a(0x25e)](_0x1f1f70=>{const _0x441581=_0x3c721a;let _0x23e795=getBotAttributes(_0x1f1f70['botID']);_0x1f1f70['mode']=_0x23e795[_0x441581(0x237)];}),_0x59a965;}function getBotExchanges(){const _0x4802ba=_0x452e8c;let _0x1756cb=[];const _0x59cd10=dbConfig[_0x4802ba(0x344)]('bots')[_0x4802ba(0x334)](_0x4802ba(0x353))[_0x4802ba(0x311)]()||[];_0x59cd10[_0x4802ba(0x25e)](_0x410f24=>{const _0x1c8d3a=_0x4802ba;if(_0x410f24[_0x1c8d3a(0x270)]==_0x1c8d3a(0x25c)){const _0xf8b011=configpath+_0x1c8d3a(0x211)+_0x410f24['botID']+_0x1c8d3a(0x1d3),_0x3fa86a=fs[_0x1c8d3a(0x358)](_0xf8b011);let _0x1767a9;if(_0x3fa86a){const _0x358513=fs[_0x1c8d3a(0x1e9)](_0xf8b011);try{const _0x407882=JSON['parse'](_0x358513);_0x1767a9=_0x407882?_0x407882[_0x1c8d3a(0x1ba)][0x0][_0x1c8d3a(0x21c)]:null;}catch(_0x1d6df9){}}if(_0x1767a9)_0x1756cb[_0x1c8d3a(0x2ec)](_0x1767a9);}});const _0x4cb9a8=[...new Set(_0x1756cb)]['sort']();return _0x4cb9a8;}async function initUser(){const _0x57e6f4=_0x452e8c;if(!settings[_0x57e6f4(0x2a9)]){const _0x3ea2fb=uuidRandom();mixpanel['alias'](_0x3ea2fb),updateSetting(_0x57e6f4(0x2a9),_0x3ea2fb);}}async function initSecure(){const _0x279754=_0x452e8c;let _0x362c78=getSecure();if(!_0x362c78[_0x279754(0x1c4)]('secret')){let _0x346299=await generateKeys();_0x362c78[_0x279754(0x2cf)]=_0x346299[_0x279754(0x2cf)],_0x362c78[_0x279754(0x1c9)]=_0x346299[_0x279754(0x1c9)],_0x362c78[_0x279754(0x312)]=crypto[_0x279754(0x2ca)](0x20)[_0x279754(0x2a6)](_0x279754(0x1b1));;storeSecure(_0x362c78);}}function getSettings(){const _0x25c6d9=_0x452e8c;return dbSettings[_0x25c6d9(0x344)](_0x25c6d9(0x2eb))['value']()||{};}function getSecure(){const _0x319b30=_0x452e8c;return dbSecure[_0x319b30(0x344)](_0x319b30(0x1df))[_0x319b30(0x311)]()||{};}function getBlacklist(){const _0x743dc3=_0x452e8c;return dbSecure['get'](_0x743dc3(0x230))[_0x743dc3(0x311)]()||[];}function broadcastToBots(_0x5d2ad0,_0x30b8f5){config['forEach'](_0x2e3b4f=>{const _0x3c299c=_0x42e4;if(_0x2e3b4f['status']==_0x3c299c(0x25c)&&_0x2e3b4f[_0x3c299c(0x2c3)]=='running'||_0x2e3b4f['status']==_0x3c299c(0x1b8)&&_0x2e3b4f['live']==_0x3c299c(0x25d)){if(pid[_0x2e3b4f[_0x3c299c(0x353)]])pid[_0x2e3b4f[_0x3c299c(0x353)]][_0x3c299c(0x2ac)]({[_0x5d2ad0]:_0x30b8f5});}});}function storeSettings(_0x215cd,_0x264003=![]){const _0x26b132=_0x452e8c;_0x215cd={...settings,..._0x215cd};if(_0x264003&&_0x215cd[_0x26b132(0x340)]!=_0x26b132(0x255)&&_0x215cd[_0x26b132(0x340)]!=_0x26b132(0x202)&&_0x215cd[_0x26b132(0x340)]!=''){const _0x1e2c87=crypt[_0x26b132(0x277)](secure[_0x26b132(0x1c9)],_0x215cd[_0x26b132(0x340)])[_0x26b132(0x354)]['split']('@')[0x0],_0x311cd0=bcrypt[_0x26b132(0x357)](_0x1e2c87,saltRounds);_0x215cd={..._0x215cd,'bbPassword':_0x311cd0};}if(_0x264003&&_0x215cd[_0x26b132(0x346)]!='************'&&_0x215cd[_0x26b132(0x346)]!=_0x26b132(0x202)&&_0x215cd[_0x26b132(0x346)]!=''){const _0x5ad542=crypt[_0x26b132(0x277)](secure[_0x26b132(0x1c9)],_0x215cd['telegramToken'])[_0x26b132(0x354)][_0x26b132(0x2ba)]('@')[0x0];_0x215cd={..._0x215cd,'telegramToken':_0x5ad542};}const _0x3a0cc9=_0x215cd[_0x26b132(0x346)]!='************'&&_0x215cd[_0x26b132(0x346)]!=settings[_0x26b132(0x346)]||_0x215cd[_0x26b132(0x2b9)]!=settings['telegramUsername'],_0x46cd7a=_0x215cd[_0x26b132(0x346)]==''||_0x215cd[_0x26b132(0x2b9)]=='';if(_0x3a0cc9)_0x215cd[_0x26b132(0x20f)]=_0x26b132(0x27e);for(const [_0x4da64a,_0x33c79d]of Object[_0x26b132(0x2d2)](_0x215cd)){if(_0x4da64a==_0x26b132(0x346)&&_0x33c79d==_0x26b132(0x255)){_0x215cd[_0x26b132(0x346)]=settings[_0x26b132(0x346)];continue;};if(_0x4da64a=='bbPassword'&&_0x33c79d=='************'){_0x215cd[_0x26b132(0x340)]=settings['bbPassword'];continue;};dbSettings[_0x26b132(0x261)](_0x26b132(0x360)+_0x4da64a,_0x33c79d)[_0x26b132(0x36d)]();}settings=_0x215cd,io['to'](_0x26b132(0x2f5))[_0x26b132(0x286)](_0x26b132(0x2eb),cleanSettings()),broadcastToBots(_0x26b132(0x267),settings['timeshift']),broadcastToBots(_0x26b132(0x29f),settings[_0x26b132(0x29f)]);if(_0x3a0cc9&&!_0x46cd7a)initTelegram();if(_0x3a0cc9&&_0x46cd7a)disableTelegram();getAllClients()[_0x26b132(0x25e)](_0x23abd0=>{const _0x190015=_0x26b132;getSocket(_0x23abd0['id'])[_0x190015(0x286)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x4aaf2e,_0x323fe1){const _0x239377=_0x452e8c;dbSettings[_0x239377(0x261)](_0x239377(0x360)+_0x4aaf2e,_0x323fe1)['write'](),settings=getSettings(),io['to'](_0x239377(0x2f5))[_0x239377(0x286)](_0x239377(0x2eb),cleanSettings());}function storeSecure(_0x2b1ab2){const _0x24c8d1=_0x452e8c;dbSecure[_0x24c8d1(0x344)](_0x24c8d1(0x1df))[_0x24c8d1(0x2ec)](_0x2b1ab2)[_0x24c8d1(0x36d)](),secure=_0x2b1ab2;}function addBlacklist(_0x3622d5){const _0x207800=_0x452e8c;cleanBlacklist();let _0x59056d;devices[_0x3622d5][_0x207800(0x302)]?_0x59056d=Math[_0x207800(0x287)](devices[_0x3622d5][_0x207800(0x302)][_0x207800(0x331)],loginExpiry):_0x59056d=loginExpiry,dbSecure['get'](_0x207800(0x230))[_0x207800(0x2ec)]({'expiry':new Date()[_0x207800(0x28f)]()+_0x59056d*0x3c*0x3e8,'token':devices[_0x3622d5]['access'][_0x207800(0x1cd)]})['write'](),blacklist=dbSecure['get'](_0x207800(0x230))[_0x207800(0x311)]();}function cleanBlacklist(){const _0x3a9b3a=_0x452e8c;let _0xb66eaf=dbSecure[_0x3a9b3a(0x344)]('blacklist')[_0x3a9b3a(0x2ef)]()[_0x3a9b3a(0x311)](),_0x10b444=new Date()[_0x3a9b3a(0x28f)]();_0xb66eaf[_0x3a9b3a(0x25e)](_0x161d35=>{const _0x23080f=_0x3a9b3a;_0x161d35[_0x23080f(0x331)]<_0x10b444&&dbSecure[_0x23080f(0x344)](_0x23080f(0x230))[_0x23080f(0x377)]({'expiry':_0x161d35[_0x23080f(0x331)]})[_0x23080f(0x36d)]();});}function initStates(){const _0x402a7b=_0x452e8c;let _0x65ae83=getConfiguration();_0x65ae83[_0x402a7b(0x25e)](_0x2d2ba9=>{const _0x457148=_0x402a7b;_0x2d2ba9[_0x457148(0x2c3)]=_0x457148(0x295);}),storeConfiguration(_0x65ae83);}function onKeys(){const _0x2a0d72=new RSA();return new Promise(_0x17a333=>{const _0x248414=_0x42e4;_0x2a0d72[_0x248414(0x1dc)]()[_0x248414(0x2ad)](_0x416d2a=>{_0x17a333(_0x416d2a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xcdc037=_0x452e8c;let _0xcd3a11=getSettings(),_0x38b1d6=![];!_0xcd3a11[_0xcdc037(0x1c4)](_0xcdc037(0x2f6))&&(_0xcd3a11[_0xcdc037(0x2f6)]=0x0,_0x38b1d6=!![]);!_0xcd3a11['hasOwnProperty'](_0xcdc037(0x2d3))&&(_0xcd3a11[_0xcdc037(0x2d3)]=0x0,_0x38b1d6=!![]);!_0xcd3a11[_0xcdc037(0x1c4)](_0xcdc037(0x20d))&&(_0xcd3a11['latestversion']=_0xcdc037(0x32a),_0x38b1d6=!![]);!_0xcd3a11[_0xcdc037(0x1c4)]('onepagemode')&&(_0xcd3a11[_0xcdc037(0x29f)]=![],_0x38b1d6=!![]);if(_0x38b1d6)storeSettings(_0xcd3a11);try{fs[_0xcdc037(0x33f)](configbackuppath,{'withFileTypes':!![]})[_0xcdc037(0x25e)](_0x142501=>{const _0x30c79d=_0xcdc037;if(!_0x142501[_0x30c79d(0x291)]()){if(!_0x142501[_0x30c79d(0x203)][_0x30c79d(0x303)](_0x30c79d(0x31f)))fs[_0x30c79d(0x2fd)](configbackuppath+_0x142501[_0x30c79d(0x203)]);}else fs[_0x30c79d(0x278)](configbackuppath+_0x142501[_0x30c79d(0x203)],{'recursive':!![]});});}catch(_0x3d211c){logger[_0xcdc037(0x2b6)]('Error\x20removing\x20old\x20backup\x20files:',_0x3d211c);}}function storeConfiguration(_0x1eb340){const _0x55ef05=_0x452e8c;dbConfig['get'](_0x55ef05(0x234))[_0x55ef05(0x377)]()['write'](),_0x1eb340[_0x55ef05(0x25e)](_0x222d2b=>{const _0x179e9a=_0x55ef05;delete _0x222d2b[_0x179e9a(0x237)];}),dbConfig[_0x55ef05(0x344)](_0x55ef05(0x234))[_0x55ef05(0x2ec)](..._0x1eb340)[_0x55ef05(0x36d)](),config=_0x1eb340;}function resetPassword(){const _0x56dcb4=_0x452e8c;tgBot&&settings[_0x56dcb4(0x32f)]&&(tgBot[_0x56dcb4(0x264)](_0x56dcb4(0x223)),tgBot['sendMessage'](settings['telegramChatId'],_0x56dcb4(0x21a),{'parse_mode':_0x56dcb4(0x201),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x56dcb4(0x246)](_0x58a938=>{telegramError(_0x58a938);}),tgBot['on'](_0x56dcb4(0x223),async _0xeaccfc=>{const _0x16b4e7=_0x56dcb4,_0x2aa66c=_0xeaccfc['data'],_0x2e3154=_0xeaccfc[_0x16b4e7(0x354)];tgBot[_0x16b4e7(0x2e8)](_0xeaccfc['id'])['then'](async()=>{const _0x5b1fd4=_0x16b4e7;if(_0x2aa66c!='no'){const _0x487e00=0xf,_0x440e0c='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x18666c=Array[_0x5b1fd4(0x2c0)](crypto['randomFillSync'](new Uint32Array(_0x487e00)))['map'](_0x2fce7b=>_0x440e0c[_0x2fce7b%_0x440e0c['length']])[_0x5b1fd4(0x329)](''),_0x4b3e2f=bcrypt[_0x5b1fd4(0x357)](_0x18666c,saltRounds);storeSettings({'bbPassword':_0x4b3e2f}),await tgBot['sendMessage'](_0x2e3154['chat']['id'],_0x5b1fd4(0x242)+_0x18666c,{'parse_mode':'HTML'})[_0x5b1fd4(0x246)](_0x434923=>{telegramError(_0x434923);});}else await tgBot[_0x5b1fd4(0x31d)](_0x2e3154['chat']['id'],_0x5b1fd4(0x204))['catch'](_0x43350f=>{telegramError(_0x43350f);});}),tgBot[_0x16b4e7(0x264)](_0x16b4e7(0x223));}));}async function confirmRestore(_0x321e5e,_0xd13da4){const _0x30ff75=_0x452e8c;io['to']('botmanager')['emit'](_0x30ff75(0x35d),_0x30ff75(0x29b),'success'),tgBot&&settings[_0x30ff75(0x32f)]&&(tgBot[_0x30ff75(0x264)](_0x30ff75(0x223)),await tgBot[_0x30ff75(0x31d)](settings[_0x30ff75(0x32f)],_0x30ff75(0x272),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x30ff75(0x209),'callback_data':_0x30ff75(0x209)},{'text':'no','callback_data':'no'}]]}})[_0x30ff75(0x246)](_0xf6e191=>{telegramError(_0xf6e191);}),tgBot['on'](_0x30ff75(0x223),async _0x3c6da9=>{const _0x2eb970=_0x30ff75,_0x4a2442=_0x3c6da9[_0x2eb970(0x33c)],_0x399abb=_0x3c6da9[_0x2eb970(0x354)];tgBot[_0x2eb970(0x2e8)](_0x3c6da9['id'])[_0x2eb970(0x2ad)](async()=>{const _0x49099d=_0x2eb970;_0x4a2442==_0x49099d(0x209)?(await tgBot['sendMessage'](_0x399abb[_0x49099d(0x371)]['id'],_0x49099d(0x224),{'parse_mode':_0x49099d(0x201)})[_0x49099d(0x246)](_0x4ae560=>{telegramError(_0x4ae560);}),unzipFile(_0x321e5e,_0xd13da4)):(logger[_0x49099d(0x2b6)](_0x49099d(0x2c6)),await tgBot[_0x49099d(0x31d)](_0x399abb[_0x49099d(0x371)]['id'],'Restore\x20process\x20aborted')[_0x49099d(0x246)](_0x32f389=>{telegramError(_0x32f389);}));}),tgBot[_0x2eb970(0x264)](_0x2eb970(0x223));}));}function getServerTime(){const _0x57d8a4=_0x452e8c,_0x503b67=new Date();return _0x503b67[_0x57d8a4(0x1e4)]()+'/'+(_0x503b67[_0x57d8a4(0x274)]()+0x1)[_0x57d8a4(0x2a6)]()[_0x57d8a4(0x2ea)](0x2,'0')+'/'+_0x503b67[_0x57d8a4(0x269)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x503b67[_0x57d8a4(0x27c)]()[_0x57d8a4(0x2a6)]()['padStart'](0x2,'0')+':'+_0x503b67[_0x57d8a4(0x1fb)]()[_0x57d8a4(0x2a6)]()[_0x57d8a4(0x2ea)](0x2,'0')+':'+_0x503b67['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x235668=_0x452e8c,_0x115e15=shiftedTime();return _0x115e15[_0x235668(0x1e4)]()+'/'+(_0x115e15[_0x235668(0x274)]()+0x1)[_0x235668(0x2a6)]()[_0x235668(0x2ea)](0x2,'0')+'/'+_0x115e15[_0x235668(0x269)]()[_0x235668(0x2a6)]()[_0x235668(0x2ea)](0x2,'0')+'\x20'+_0x115e15[_0x235668(0x27c)]()[_0x235668(0x2a6)]()[_0x235668(0x2ea)](0x2,'0')+':'+_0x115e15['getMinutes']()[_0x235668(0x2a6)]()['padStart'](0x2,'0')+':'+_0x115e15[_0x235668(0x1de)]()[_0x235668(0x2a6)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x5cd072=_0x452e8c,_0x1f90ec=shiftedTime();return _0x1f90ec[_0x5cd072(0x1e4)]()+(_0x1f90ec[_0x5cd072(0x274)]()+0x1)[_0x5cd072(0x2a6)]()[_0x5cd072(0x2ea)](0x2,'0')+_0x1f90ec['getDate']()[_0x5cd072(0x2a6)]()[_0x5cd072(0x2ea)](0x2,'0')+'-'+_0x1f90ec[_0x5cd072(0x27c)]()[_0x5cd072(0x2a6)]()[_0x5cd072(0x2ea)](0x2,'0')+_0x1f90ec[_0x5cd072(0x1fb)]()[_0x5cd072(0x2a6)]()[_0x5cd072(0x2ea)](0x2,'0')+_0x1f90ec[_0x5cd072(0x1de)]()[_0x5cd072(0x2a6)]()[_0x5cd072(0x2ea)](0x2,'0');}function shiftedTime(){const _0x46fd96=_0x452e8c,_0x2c26a9=new Date();let _0x1269b3=_0x2c26a9;if(settings[_0x46fd96(0x267)]&&settings[_0x46fd96(0x267)]!==0x0)_0x1269b3=fns[_0x46fd96(0x1d1)](_0x2c26a9,{'hours':settings[_0x46fd96(0x267)]});return _0x1269b3;}function startScheduler(){const _0x120c9c=_0x452e8c,_0x32e9f=new Date()[_0x120c9c(0x1c0)](),_0x41eeb9=shiftedTime()[_0x120c9c(0x27c)]();_0x41eeb9==0x4&&backupConfigFiles();_0x41eeb9==0x0&&rotateLogFiles();_0x32e9f%0x6==0x0&&triggerAnalytics();_0x32e9f%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x17043e){const _0x377c43=_0x452e8c;logger[_0x377c43(0x2b6)](_0x377c43(0x2e4)+_0x17043e);const _0x3c7e5b=getBotsWithMode();_0x3c7e5b['length']>0x0?confirmRestore(configbackuppath,_0x17043e):unzipFile(configbackuppath,_0x17043e);}async function getBackupFiles(_0x3ebfd6=null){const _0x33ced2=_0x452e8c;let _0x5eb3ae=[],_0x1bc653=fs[_0x33ced2(0x33f)](configbackuppath,{'withFileTypes':!![]});_0x1bc653[_0x33ced2(0x22c)]((_0x54d214,_0x2d7290)=>_0x54d214['name']<_0x2d7290[_0x33ced2(0x203)]?0x1:_0x2d7290['name']<_0x54d214[_0x33ced2(0x203)]?-0x1:0x0),_0x1bc653['forEach'](_0x447eaa=>{const _0x2881e4=_0x33ced2;if(!_0x447eaa[_0x2881e4(0x291)]()&&_0x447eaa[_0x2881e4(0x203)][_0x2881e4(0x303)]('backup-full@')&&_0x447eaa[_0x2881e4(0x203)][_0x2881e4(0x229)](_0x2881e4(0x28b))){const _0x32bfd7=formatDate(fs[_0x2881e4(0x339)](configbackuppath+_0x447eaa[_0x2881e4(0x203)])[_0x2881e4(0x32b)]);_0x5eb3ae[_0x2881e4(0x2ec)]({'name':_0x447eaa[_0x2881e4(0x203)],'mtime':_0x32bfd7});}});if(_0x3ebfd6)io['to'](_0x3ebfd6)[_0x33ced2(0x286)](_0x33ced2(0x206),_0x5eb3ae);else return _0x5eb3ae;}async function backupConfigFiles(){const _0x332852=_0x452e8c;await zipFiles(_0x332852(0x2e9));const _0x55e62a=getCleanTimeStamp();fs[_0x332852(0x1ed)](zippath+_0x332852(0x319),configbackuppath+(_0x332852(0x31f)+_0x55e62a+_0x332852(0x28b)));let _0x480abd=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x480abd[_0x332852(0x22c)]((_0x99de95,_0x83c0c6)=>_0x99de95[_0x332852(0x203)]<_0x83c0c6[_0x332852(0x203)]?0x1:_0x83c0c6[_0x332852(0x203)]<_0x99de95[_0x332852(0x203)]?-0x1:0x0),_0x480abd['length']>maxBackups&&fs[_0x332852(0x2fd)](configbackuppath+_0x480abd[_0x480abd[_0x332852(0x313)]-0x1][_0x332852(0x203)]);}function rotateLogFiles(){const _0x1ce88f=_0x452e8c,_0x1b92a9=fs[_0x1ce88f(0x339)](logspath+_0x1ce88f(0x2db)),_0x4fbd48=_0x1b92a9[_0x1ce88f(0x208)]/0x400;if(_0x4fbd48>0x64){let _0x4dbcba=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x4dbcba['sort']((_0x36b032,_0x573d4e)=>_0x36b032['name']<_0x573d4e[_0x1ce88f(0x203)]?0x1:_0x573d4e[_0x1ce88f(0x203)]<_0x36b032[_0x1ce88f(0x203)]?-0x1:0x0),_0x4dbcba[_0x1ce88f(0x25e)](_0x5ac7e9=>{const _0xb2d7a=_0x1ce88f;if(_0x5ac7e9[_0xb2d7a(0x203)]==_0xb2d7a(0x2fb))fs[_0xb2d7a(0x1ed)](logspath+_0x5ac7e9[_0xb2d7a(0x203)],logspath+_0xb2d7a(0x301));if(_0x5ac7e9['name']==_0xb2d7a(0x332))fs[_0xb2d7a(0x1ed)](logspath+_0x5ac7e9[_0xb2d7a(0x203)],logspath+_0xb2d7a(0x2fb));_0x5ac7e9['name']==_0xb2d7a(0x2db)&&(fs[_0xb2d7a(0x1ed)](logspath+_0x5ac7e9[_0xb2d7a(0x203)],logspath+_0xb2d7a(0x332)),fs['writeFileSync'](logspath+_0x5ac7e9['name'],''));});}}async function zipFiles(_0x13ff00){const _0x420cd1=_0x452e8c;let _0x615af4;if(_0x13ff00==_0x420cd1(0x213))_0x615af4=logspath;if(_0x13ff00==_0x420cd1(0x1b5))_0x615af4=configpath;if(_0x13ff00=='backup-full')_0x615af4=configpath;let _0x71aa49=fs['readdirSync'](_0x615af4,{'withFileTypes':!![]});const _0x28deba=new require(_0x420cd1(0x2d4))();_0x71aa49[_0x420cd1(0x25e)](_0x3fcc0e=>{const _0x4baa45=_0x420cd1;if(!_0x3fcc0e[_0x4baa45(0x291)]()){let _0x1a4484=fs[_0x4baa45(0x1e9)](_0x615af4+_0x3fcc0e[_0x4baa45(0x203)]);if(_0x13ff00==_0x4baa45(0x1b5)){const _0x764f67=/^bot-[0-9]{3}-config.json$/,_0x31f9c2=_0x764f67[_0x4baa45(0x1bd)](_0x3fcc0e[_0x4baa45(0x203)]);if(_0x31f9c2){const _0x57dd90=JSON['parse'](_0x1a4484);if(_0x57dd90[_0x4baa45(0x1ba)][0x0]){_0x57dd90[_0x4baa45(0x1ba)][0x0][_0x4baa45(0x1cc)]='***',_0x57dd90[_0x4baa45(0x1ba)][0x0][_0x4baa45(0x1ad)]='***';if(_0x57dd90['bot'][0x0][_0x4baa45(0x34a)])_0x57dd90[_0x4baa45(0x1ba)][0x0][_0x4baa45(0x34a)]='***';}_0x1a4484=JSON[_0x4baa45(0x330)](_0x57dd90,null,0x2);}if(_0x3fcc0e[_0x4baa45(0x203)]==_0x4baa45(0x1cb)){const _0x297cab=JSON[_0x4baa45(0x31a)](_0x1a4484);if(_0x297cab['settings'][_0x4baa45(0x2e5)])_0x297cab['settings'][_0x4baa45(0x2e5)]=![];if(_0x297cab[_0x4baa45(0x2eb)][_0x4baa45(0x340)])_0x297cab[_0x4baa45(0x2eb)]['bbPassword']='***';if(_0x297cab[_0x4baa45(0x2eb)][_0x4baa45(0x346)])_0x297cab[_0x4baa45(0x2eb)][_0x4baa45(0x346)]=_0x4baa45(0x202);if(_0x297cab['settings'][_0x4baa45(0x32f)])_0x297cab[_0x4baa45(0x2eb)]['telegramChatId']=null;_0x1a4484=JSON[_0x4baa45(0x330)](_0x297cab,null,0x2);}if(_0x3fcc0e[_0x4baa45(0x203)]!=_0x4baa45(0x35e))_0x28deba[_0x4baa45(0x322)](_0x3fcc0e['name'],_0x1a4484);}else _0x28deba['file'](_0x3fcc0e['name'],_0x1a4484);}});const _0x10aff9=_0x28deba[_0x420cd1(0x20e)]({'base64':![],'compression':'DEFLATE'});fs[_0x420cd1(0x2c2)](zippath+(_0x13ff00+_0x420cd1(0x28b)),_0x10aff9,_0x420cd1(0x1da));}async function unzipFile(_0x401e42,_0x3c8099){const _0x313826=_0x452e8c;fs[_0x313826(0x33f)](configpath,{'withFileTypes':!![]})[_0x313826(0x25e)](_0x421d4d=>{if(!_0x421d4d['isDirectory']())fs['rmSync'](configpath+_0x421d4d['name']);});const _0x4b66c8=fs[_0x313826(0x1e9)](_0x401e42+_0x3c8099,_0x313826(0x1da)),_0x8afa10=new require(_0x313826(0x2d4))(_0x4b66c8,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x8afa10[_0x313826(0x1fd)])['forEach'](_0x590025=>{const _0x49119b=_0x313826,_0x37fe09=_0x8afa10[_0x49119b(0x1fd)][_0x590025];fs[_0x49119b(0x2c2)](configpath+_0x37fe09[_0x49119b(0x203)],_0x37fe09['_data']);}),fs[_0x313826(0x33f)](temppath,{'withFileTypes':!![]})[_0x313826(0x25e)](_0x3f48d3=>{const _0x2e808a=_0x313826;if(!_0x3f48d3['isDirectory']())fs['rmSync'](temppath+_0x3f48d3[_0x2e808a(0x203)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x4206ec=>{});}async function getPublicIp(){const _0x44620e=_0x452e8c;try{const _0xf579bd=await axios[_0x44620e(0x344)](_0x44620e(0x26d));publicip=_0xf579bd['data']['ip'];}catch(_0x1b4299){}}async function triggerAnalytics(){const _0x4275b1=_0x452e8c;if(!publicip)await getPublicIp();const _0xa7e089=getBotsWithMode();let _0x5d4b58=0x0;_0xa7e089[_0x4275b1(0x25e)](_0x44080f=>{if(_0x44080f['status']==='enabled')_0x5d4b58++;});const _0x23139=getBotExchanges();mixpanel['track'](_0x4275b1(0x28a),{'distinct_id':settings[_0x4275b1(0x2a9)],'ip':publicip,'version':serverversion,'numbots':_0xa7e089[_0x4275b1(0x313)],'numbotsenabled':_0x5d4b58,'exchanges':_0x23139,'environment':environment});}async function getMessages(){const _0x5310c8=_0x452e8c,_0x5d7566=_0x5310c8(0x300),_0x384566=new GraphQLClient(_0x5d7566),_0x38f6f5={'authorization':_0x5310c8(0x2dd)},_0xe58990=serverversion[_0x5310c8(0x2ba)]('.'),_0x24165d=_0xe58990[0x0]+'.'+_0xe58990[0x1],_0x4ca7ca=Math[_0x5310c8(0x2a7)](settings[_0x5310c8(0x2f6)],settings[_0x5310c8(0x2d3)]),_0x29d69a={'last':parseInt(_0x4ca7ca),'bbm':_0x24165d},_0x32eb30=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x78b293;try{_0x78b293=await _0x384566['request'](_0x32eb30,_0x29d69a,_0x38f6f5);}catch(_0x2a870a){}if(_0x78b293&&_0x78b293[_0x5310c8(0x1f4)]){let _0x5e6337=settings[_0x5310c8(0x2f6)];newMessages=[];for(const _0x28b28c of _0x78b293[_0x5310c8(0x1f4)]){newMessages[_0x5310c8(0x2ec)](_0x28b28c);let _0x394a95=![];_0x28b28c['bbvNew']&&(updateSetting(_0x5310c8(0x20d),_0x28b28c[_0x5310c8(0x2cd)]),_0x394a95=isNewerVersion(serverversion,_0x28b28c['bbvNew'])||serverversion==_0x28b28c[_0x5310c8(0x2cd)]);if(!_0x394a95&&_0x28b28c[_0x5310c8(0x349)]>_0x5e6337){if(_0x28b28c[_0x5310c8(0x294)]===_0x5310c8(0x285)||serverversion[_0x5310c8(0x303)](_0x28b28c['bbvReceive'])){let _0x1dc7fb=''+_0x28b28c['title']+'\x0a\x0a'+_0x28b28c[_0x5310c8(0x354)];const _0x256574=await sendTelegramMsg(toTelegramMarkdown(_0x1dc7fb),'Markdown');if(_0x256574)_0x5e6337=_0x28b28c[_0x5310c8(0x349)];}}}updateAvailable=isNewerVersion(settings[_0x5310c8(0x20d)],serverversion),updateSetting('lastmsgtelegram',_0x5e6337),emitMessages();}}function _0x3c67(){const _0x16bfc0=['Token\x20blacklisted','confirm-message','/:bot/performance',':\x20Bot\x20Mgr\x20>\x20','messages','fork','/off\x20-\x20stop\x20bot(s)\x0a','login\x20token\x20generated','stopPolling','sha256','pidExpireLogin','getMinutes','store-fiat','files','1215090cgjBHp','use','reload','HTML','***','name','Password\x20reset\x20rejected','All\x20bots','backup-files','Unauthorized\x20attempt\x20to\x20delete\x20alerts','size','yes','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','download','Starting\x20Balance\x20Bot\x20reinstallation','latestversion','generate','telegramEvents','cancel-loading','bot-','Notifications\x20disabled\x0a','logs','Unauthorized\x20attempt\x20to\x20update\x20bot','Your\x20installation\x20is\x20already\x20up\x20to\x20date','error','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/names\x20-\x20show\x20bot\x20names\x0a','Disabled\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','success','exchange','Error:\x20Invalid\x20argument\x20','User\x20has\x20been\x20validated','Starting\x20Balance\x20Bot\x20update','296105vCXbYa','#RES#\x20if\x20running\x20on\x20server','deleteHistoryAlerts','callback_query','Restoring\x20bot(s)\x20from\x20backup','telegramEnabled','Crypt','-performance.json','sendMetricsTelegram','endsWith','login\x20token\x20valid','internal','sort','Invalid\x20authentication\x20token\x20(1)','reinstall','kill','blacklist','*$1*','exec','disabled','bots','mixpanel','get-messages','mode','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','showname','defaults','node','store-configuration','6777ptvWmR','emitHistory','http','once','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Password\x20has\x20been\x20reset\x20to:\x20','getPortfolio','exp','-results.json','catch','sendPortfolioTelegram','mkdirSync','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','invalid\x20credentials','toIPv4MappedAddress','conn','12pJNXIq','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Yes','updatebotmanager','restore-backup-file','static','filter','sign','************','2FA\x20login\x20required','RSA-OAEP','child_process','Unauthorized\x20attempt\x20to\x20delete\x20bot','host','uuid-random','enabled','running','forEach','/restart\x20-\x20restart\x20bot(s)\x0a','initclient','set','temporary\x20access\x20timeout','Unauthorized\x20attempt\x20to\x20download\x20','removeListener','orders','assign','timeshift','address','getDate',')\x20\x20\x20|\x20Bot\x20','No\x20bots\x20running\x20right\x20now','SIGINT','https://api.ipify.org?format=json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','\x20mode','status','450870yOyJoW','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','index.html','getMonth','alerts','30\x20min','decrypt','rmSync','update-bb','timestamp','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','getHours','access\x20timeout','all','No\x20authentication\x20token','Unauthorized\x20attempt\x20to\x20confirm\x20message','Starting\x20(','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Invalid\x20Telegram\x20token','3EeHjrk','any','emit','max','lowdb/adapters/FileSync','Starting\x20#RED#Balance\x20Bot\x20v','Server','.zip','socket','temporaryAccessAllowed','show-config','getTime','IPv4','isDirectory','auto','simple','bbvReceive','stopped','5790qhncOC','user','update','access','1000','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','password','bb/','stop','onepagemode','production','Bot\x20Mgr\x20>\x20','temporary\x20token\x20generated','Ok,\x20will\x20send\x20order\x20notifications\x20only','-events.json','warning','toString','min','post','userid','Enabled\x20Bot\x20','/disable\x20-\x20disable\x20notifications\x0a','send','then','Invalid\x20IP\x20address','Idling\x20(','environment','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','SIGTERM','lowdb','isIPv4MappedAddress','Invalid\x20authentication\x20token\x20(2)','debug','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','placeOrder','telegramUsername','split','28122259GeRygW','reset-password','reject','zip/','Setting\x20access:\x20','from','2FA\x20required','writeFileSync','live','init','exit','Restore\x20process\x20aborted','Network\x20Interfaces:','\x20(1)','format','randomBytes','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','kind','bbvNew','Alerts','publicKey','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','graphql-request','entries','lastmsgemitted','node-zip','build','Unauthorized\x20attempt\x20to\x20show\x20configuration','listen','\x1b[36m','Orders','Backup\x20file\x20uploaded','output-000.log','Failed\x20to\x20download\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Login\x20accepted','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','socket.io','match','username','Notifications\x20enabled','Restore\x20backup\x20file\x20','loginRequired','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','answerCallbackQuery','backup-full','padStart','settings','push','referer','slice','cloneDeep','store','verify','toggleBotMode','sockets','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','botmanager','lastmsgtelegram','createServer','full','telegram','Restarting\x20Bot\x20','output-002.log','/:bot/support','unlinkSync','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','staging','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','output-003.log','telegramIpApproval','startsWith','Error\x20while\x20deleting\x20config\x20files:\x20','137832bBAvls','\x20to\x20','port','2FA\x20login\x20rejected','botname','auth','range','Session\x20expired\x20for\x20user\x20...','Starting\x20new\x20bot\x20|\x20Bot\x20','pidRefreshToken','started','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','value','secret','length','temp/','/help\x20-\x20show\x20available\x20commands\x0a','/:bot/coins','constructor','login\x20required','backup-full.zip','parse','\x1b[35m','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','sendMessage','telegrammsg','backup-full@','config/','versions','file','manual','Logged\x20in\x20user\x20...','\x20|\x20','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','/enable\x20-\x20enable\x20notifications\x0a','login','join','0.0.0','mtime','restart','logs/','15\x20min','telegramChatId','stringify','expiry','output-001.log','headless','sortBy','logged\x20out','crypto','util','Ok,\x20will\x20send\x20alert\x20notifications\x20only','statSync','\x1b[31m','::1','data','new-disabled','clients','readdirSync','bbPassword','family','Allow\x20login\x20from\x20IP\x20address\x20<b>','resetHistory','get','function','telegramToken','place-order','NTBA_FIX_319','number','apiPassword','date-fns','args','Notifications\x20enabled\x0a','Bot\x20','log','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Unauthorized\x20attempt\x20to\x20log\x20out','server','botID','message','onText','replace','hashSync','existsSync','get-portfolio','order','polling_error','telegram2FaApproval','notification','bb-secure.json','Logged\x20out\x20user\x20...','settings.','sendFile','reason','build2','tkn','(staging)','update-bot','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','/:bot/history','/status\x20-\x20show\x20bot(s)\x20status\x0a','-----------------------------------------------------------------------------------','search','showConfig','write','f2aRequired','jsonwebtoken','uuid','chat','toggle-bot-mode','get-backup-files','store-headless','event','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','remove','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','remoteAddress','</b>\x20?','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','connection','inherit','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','apiSecret','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','string','express-fileupload','hex','/update\x20-\x20update\x20Balance\x20Bot\x0a','path','find','backup','2FA\x20login\x20token\x20generated','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','new','reset-history','bot','Unauthorized\x20attempt\x20to\x20get\x20messages','\x20>\x20','test','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','getUTCHours','keys','/output-000.log','apply','hasOwnProperty','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',',\x20must\x20be\x20a\x204\x20digit\x20number','91VezgCO','\x1b[34m','privateKey','Unauthorized\x20attempt\x20to\x20update\x20settings','bb-settings.json','apiKey','token','disconnect','allow','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','add','clientip','-config.json','/download/:type','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','bbUsername','node-telegram-bot-api','type','Unauthorized\x20login\x20attempt\x20(timeout)','binary','headers','generateKeyPairAsync','127.0.0.1','getSeconds','secure','hybrid-crypto-js','(((.+)+)+)+$','version.json','whitelist','getFullYear','1737448AAUNmn','express','bcryptjs','114nZTjfz','readFileSync','encryptedUuid','handshake','6b67f3d61ee94b8f5c80b4affef4c4d9','copyFileSync',')\x20|\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation'];_0x3c67=function(){return _0x16bfc0;};return _0x3c67();}function emitMessages(){const _0x4cb499=_0x452e8c,_0x3a8cd4=settings['lastmsgemitted'];let _0x13caa1=[];newMessages[_0x4cb499(0x25e)](_0x1541dc=>{const _0x4b6814=_0x4cb499;_0x1541dc[_0x4b6814(0x349)]>_0x3a8cd4&&_0x13caa1['push'](_0x1541dc);}),_0x13caa1[_0x4cb499(0x313)]>0x0&&getAllClients()[_0x4cb499(0x25e)](_0x513a13=>{const _0x389a6a=_0x4cb499;getSocket(_0x513a13['id'])[_0x389a6a(0x286)](_0x389a6a(0x354),_0x13caa1);});}function confirmMessage(_0x55df3f){const _0x3e3075=_0x452e8c;updateSetting(_0x3e3075(0x2d3),Number(_0x55df3f));}function isNewerVersion(_0x279acc,_0x368231){const _0x24e773=_0x452e8c,_0x11157d=_0x368231[_0x24e773(0x2ba)]('.'),_0xa31b9b=_0x279acc[_0x24e773(0x2ba)]('.');for(var _0x334b35=0x0;_0x334b35<_0xa31b9b[_0x24e773(0x313)];_0x334b35++){const _0x5c9fe7=~~_0xa31b9b[_0x334b35],_0x557b4c=~~_0x11157d[_0x334b35];if(_0x5c9fe7>_0x557b4c)return!![];if(_0x5c9fe7<_0x557b4c)return![];}return![];}function toTelegramMarkdown(_0x1909bb){const _0x295541=_0x452e8c,_0x4f8231=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x7fc8bf=/\*{2}(.+?)\*{2}/gim;return _0x1909bb=_0x1909bb[_0x295541(0x356)](_0x4f8231,'$1_$2_$3')['replace'](_0x7fc8bf,_0x295541(0x231)),_0x1909bb;}async function validateConfigFile(){const _0x23a25c=_0x452e8c,_0x3cd163=dbConfig['get'](_0x23a25c(0x234))[_0x23a25c(0x334)](_0x23a25c(0x353))[_0x23a25c(0x311)]()||[];if(_0x3cd163['length']==0x0){let _0x33605e=0x0,_0x52ec03=[];const _0x3c81f6=/^bot-([0-9]{3})-config.json$/,_0x47ec6a=fs['readdirSync'](configpath);_0x47ec6a[_0x23a25c(0x25e)](_0x138f8c=>{const _0x4e6238=_0x23a25c,_0x371617=_0x3c81f6[_0x4e6238(0x232)](_0x138f8c);if(_0x371617){const _0x3d8150=_0x371617[0x1];let _0x3551ce=getBotAttributes(_0x3d8150);_0x52ec03[_0x4e6238(0x2ec)]({'botID':_0x3d8150,'botname':_0x3551ce[_0x4e6238(0x309)],'status':'disabled','live':_0x4e6238(0x295)}),_0x33605e++;}}),_0x33605e!=0x0&&(dbConfig['get'](_0x23a25c(0x234))[_0x23a25c(0x266)](_0x52ec03)['write'](),config=_0x52ec03,restoredConfigFile=_0x33605e);}}async function restoreConfigNotify(_0x32c7c9){const _0xddd269=_0x452e8c;let _0x3b321f;if(restoredConfigFile==0x1)_0x3b321f=_0xddd269(0x1b7);else _0x3b321f='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x32c7c9)io['to'](_0xddd269(0x2f5))[_0xddd269(0x286)]('notification',_0x3b321f);else{logger[_0xddd269(0x293)](_0xddd269(0x36a)),logger[_0xddd269(0x293)](_0x3b321f),logger[_0xddd269(0x293)](_0xddd269(0x36a)),logger[_0xddd269(0x293)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0xddd269(0x265))tgBot[_0xddd269(0x31d)](settings[_0xddd269(0x32f)],'Bot\x20Mgr\x20>\x20'+_0x3b321f)[_0xddd269(0x246)](_0x2b2570=>{telegramError(_0x2b2570);});}}function validateCredentials(_0x4b4a8f,_0xaf73dd){const _0x180642=_0x452e8c;if(_0x4b4a8f[_0x180642(0x2e2)]==settings[_0x180642(0x1d6)]&&bcrypt['compareSync'](_0x4b4a8f[_0x180642(0x29c)],settings[_0x180642(0x340)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x180642(0x256),'token':null};else{const _0x4615be=generateLoginToken(_0xaf73dd);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x4615be};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x3dbca5){const _0x46560a=generateLoginToken(_0x3dbca5);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x46560a};}function validateAccess(_0x12cca2,_0x3c48e5,_0x14d811){const _0x23f873=_0x452e8c,_0x24e0c5=_0x14d811?_0x14d811:devices[_0x3c48e5]['ip'];let _0x536f45;const _0x442415=_0x3821ee=>{const _0x48ad55=_0x42e4;if(settings[_0x48ad55(0x2e5)]){if(settings[_0x48ad55(0x36e)]){if(telegram2FaApproved(_0x3c48e5)){const _0x19a8ed=generateLoginToken(_0x3c48e5);return{'allow':!![],'reason':_0x48ad55(0x1b6),'token':_0x19a8ed};}else return{'allow':![],'reason':_0x48ad55(0x318),'token':null};}else return _0x536f45=validToken(_0x3821ee,_0x3c48e5),_0x536f45['hasOwnProperty']('success')?{'allow':!![],'reason':_0x48ad55(0x22a),'token':_0x3821ee}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x4f1cb1=[...settings[_0x23f873(0x1e3)],_0x23f873(0x33b),'::ffff:127.0.0.1',_0x23f873(0x1dd)];if(_0x4f1cb1['includes'](_0x24e0c5))return _0x442415(_0x12cca2);else{_0x536f45=validToken(_0x12cca2,_0x3c48e5);if(_0x536f45[_0x23f873(0x1c4)](_0x23f873(0x21b)))return _0x442415(_0x12cca2);else{if(telegramIpApproved(_0x3c48e5)){const _0x48e54c=generateToken(_0x3c48e5);return _0x536f45=_0x442415(_0x12cca2),_0x536f45[_0x23f873(0x1cf)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x48e54c}:_0x536f45;}else return settings[_0x23f873(0x28d)]?{'allow':![],'reason':_0x23f873(0x2c1),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x442415(_0x12cca2);}function timelyDecrypt(_0x296a17,_0x529ee4=!![]){const _0x17291e=_0x452e8c;if(_0x296a17)try{const _0x359fd2=crypt[_0x17291e(0x277)](secure['privateKey'],_0x296a17)[_0x17291e(0x354)],_0x10db94=_0x359fd2['split']('@')[0x0],_0x518c00=_0x359fd2[_0x17291e(0x2ba)]('@')[0x1],_0x602466=new Date()[_0x17291e(0x28f)]();if(_0x529ee4){if(_0x602466-_0x518c00<maxSecretAge*0x3e8)return _0x10db94;else return![];}else return _0x10db94;}catch(_0x23151e){return![];}else return![];}const validToken=(_0x58ee43,_0x1dc958)=>{const _0x36c21e=_0x452e8c,_0x5497b4=devices[_0x1dc958]['ip'];if(!_0x58ee43)return{'error':_0x36c21e(0x27f)};for(let _0xdac182 of blacklist){if(_0xdac182[_0x36c21e(0x1cd)]==_0x58ee43)return{'error':_0x36c21e(0x1f0)};}let _0x4de9f7;try{_0x4de9f7=jwt[_0x36c21e(0x2f1)](_0x58ee43,secure[_0x36c21e(0x312)]+_0x1dc958);}catch{return{'error':_0x36c21e(0x22d)};}if(!_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x1d2))&&!_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x2e2))||!_0x4de9f7['hasOwnProperty'](_0x36c21e(0x244)))return{'error':_0x36c21e(0x2b5)};if(!_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x2e2))&&_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x1d2))){const {clientip:_0x33170b}=_0x4de9f7;return _0x5497b4==_0x33170b?{'success':_0x36c21e(0x21e)}:{'error':_0x36c21e(0x2ae)};}else{if(_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x2e2))&&_0x4de9f7[_0x36c21e(0x1c4)](_0x36c21e(0x1d2))){const {username:_0x60c352,clientip:_0x2dcad2}=_0x4de9f7;return settings['bbUsername']==_0x60c352&&_0x5497b4==_0x2dcad2?{'success':_0x36c21e(0x21e)}:{'error':_0x36c21e(0x2e6)};}}},generateLoginToken=_0x5de563=>{const _0x1aaefe=_0x452e8c;if(_0x5de563){const _0x20d0cd=devices[_0x5de563]['ip'];return jwt['sign']({'username':settings[_0x1aaefe(0x1d6)],'clientip':_0x20d0cd},secure[_0x1aaefe(0x312)]+_0x5de563,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x16fe2c=>{const _0x37a403=_0x452e8c;if(_0x16fe2c){const _0x5a9160=devices[_0x16fe2c]['ip'];return jwt[_0x37a403(0x254)]({'clientip':_0x5a9160},secure[_0x37a403(0x312)]+_0x16fe2c,{'expiresIn':devices[_0x16fe2c][_0x37a403(0x302)][_0x37a403(0x331)]*0x3c});}else return![];},telegramIpApproved=_0x3c274e=>{const _0x2e61e3=_0x452e8c;let _0x18f841=![];return devices[_0x3c274e]['telegramIpApproval']&&devices[_0x3c274e][_0x2e61e3(0x302)][_0x2e61e3(0x331)]!=_0x2e61e3(0x2bd)&&(_0x18f841=devices[_0x3c274e][_0x2e61e3(0x302)]['clientip']==devices[_0x3c274e]['ip']&&new Date()[_0x2e61e3(0x28f)]()-devices[_0x3c274e][_0x2e61e3(0x302)][_0x2e61e3(0x27a)]<devices[_0x3c274e][_0x2e61e3(0x302)][_0x2e61e3(0x331)]*0x3c*0x3e8),_0x18f841;},telegram2FaApproved=_0x52ce57=>{const _0x5a7e86=_0x452e8c;let _0x24cc0e=![];return devices[_0x52ce57]['telegram2FaApproval']&&devices[_0x52ce57][_0x5a7e86(0x35c)][_0x5a7e86(0x331)]!=_0x5a7e86(0x2bd)&&(_0x24cc0e=devices[_0x52ce57][_0x5a7e86(0x35c)]['clientip']==devices[_0x52ce57]['ip']&&new Date()['getTime']()-devices[_0x52ce57][_0x5a7e86(0x35c)][_0x5a7e86(0x27a)]<devices[_0x52ce57]['telegram2FaApproval'][_0x5a7e86(0x331)]*0x3c*0x3e8),_0x24cc0e;},normalizeIP=_0x39058f=>{const _0x4bf982=_0x452e8c;let _0x20a63e=null,_0x4cadde=null;if(ipaddr['isValid'](_0x39058f)){const _0x3254bd=ipaddr['parse'](_0x39058f);_0x3254bd[_0x4bf982(0x2cc)]()==='ipv6'?(_0x3254bd[_0x4bf982(0x2b4)]()&&(_0x20a63e=_0x3254bd['toIPv4Address']()['toString']()),_0x4cadde=_0x3254bd[_0x4bf982(0x2a6)]()):(_0x20a63e=_0x3254bd[_0x4bf982(0x2a6)](),_0x4cadde=_0x3254bd[_0x4bf982(0x24b)]()[_0x4bf982(0x2a6)]());}return{'show':_0x20a63e?_0x20a63e:_0x4cadde,'store':_0x4cadde};};function formatDate(_0x49421e){const _0x36842c=_0x452e8c;return _0x49421e[_0x36842c(0x1e4)]()+'/'+(_0x49421e['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x49421e[_0x36842c(0x269)]()[_0x36842c(0x2a6)]()['padStart'](0x2,'0')+'\x20'+_0x49421e[_0x36842c(0x27c)]()[_0x36842c(0x2a6)]()[_0x36842c(0x2ea)](0x2,'0')+':'+_0x49421e[_0x36842c(0x1fb)]()[_0x36842c(0x2a6)]()[_0x36842c(0x2ea)](0x2,'0')+':'+_0x49421e['getSeconds']()[_0x36842c(0x2a6)]()[_0x36842c(0x2ea)](0x2,'0');}function sleep(_0x4063c9){return new Promise(_0x256bb0=>setTimeout(_0x256bb0,_0x4063c9));}