const _0x235888=_0x2b26;(function(_0x4d4d81,_0x3934ad){const _0x529048=_0x2b26,_0x404ad4=_0x4d4d81();while(!![]){try{const _0x3de481=-parseInt(_0x529048(0x202))/0x1+-parseInt(_0x529048(0x14e))/0x2*(parseInt(_0x529048(0x127))/0x3)+-parseInt(_0x529048(0x204))/0x4+-parseInt(_0x529048(0x1a3))/0x5*(-parseInt(_0x529048(0x19a))/0x6)+parseInt(_0x529048(0x165))/0x7+parseInt(_0x529048(0x212))/0x8+-parseInt(_0x529048(0x159))/0x9*(-parseInt(_0x529048(0x1b5))/0xa);if(_0x3de481===_0x3934ad)break;else _0x404ad4['push'](_0x404ad4['shift']());}catch(_0x3b4ab8){_0x404ad4['push'](_0x404ad4['shift']());}}}(_0xffcc,0xae990));const _0x185d59=function(){let _0xc7f2a5=!![];return function(_0x3e4393,_0x1b79a3){const _0x32f820=_0xc7f2a5?function(){const _0x48f675=_0x2b26;if(_0x1b79a3){const _0x28eb4d=_0x1b79a3[_0x48f675(0x259)](_0x3e4393,arguments);return _0x1b79a3=null,_0x28eb4d;}}:function(){};return _0xc7f2a5=![],_0x32f820;};}(),_0x142ca1=_0x185d59(this,function(){const _0x43e253=_0x2b26;return _0x142ca1['toString']()['search'](_0x43e253(0x154))['toString']()['constructor'](_0x142ca1)[_0x43e253(0x161)](_0x43e253(0x154));});_0x142ca1();'use strict';process[_0x235888(0x11c)][_0x235888(0x220)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x235888(0x226)),fs=require('fs'),fns=require(_0x235888(0x206)),low=require(_0x235888(0x1f8)),path=require(_0x235888(0x25a)),crypto=require(_0x235888(0x229)),Crypt=require(_0x235888(0x1ef))[_0x235888(0x15e)],RSA=require('hybrid-crypto-js')[_0x235888(0x24e)],bcrypt=require(_0x235888(0x260)),jwt=require(_0x235888(0x1bc)),{Analytics}=require(_0x235888(0x184)),googleAnalyticsV3Plugin=require(_0x235888(0x22d))['default'],ipaddr=require('ipaddr.js'),argv=require(_0x235888(0x198))(process[_0x235888(0x170)][_0x235888(0x135)](0x2))[_0x235888(0x170)],uuidRandom=require(_0x235888(0x171)),Mixpanel=require(_0x235888(0x237)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),PORT=argv[_0x235888(0x17f)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x235888(0x1e5)](PORT)&&(console[_0x235888(0x1c8)](_0x235888(0x231)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x235888(0x103)](0x1));const HOST=argv[_0x235888(0x104)]||null,userID=argv[_0x235888(0x13f)]||'';let bbpath=_0x235888(0x1f0),bbpath2='';const botfile=_0x235888(0x26b),configfile=_0x235888(0x166),settingsfile=_0x235888(0x24f),securefile=_0x235888(0x23a);let validInstallation=!![];!fs[_0x235888(0x209)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x235888(0x149),configbackuppath=configpath+_0x235888(0x16c);!fs['existsSync'](configpath)&&fs[_0x235888(0x20d)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x235888(0x20d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x235888(0x136)]({'bots':[]})[_0x235888(0x16e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2),adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x235888(0x136)]({'secure':{},'blacklist':[]})[_0x235888(0x16e)]();let crypt=new Crypt({'md':_0x235888(0x197),'rsaStandard':_0x235888(0x25b)});const saltRounds=0xa,mixpanel=Mixpanel[_0x235888(0x125)](_0x235888(0x20b),{'host':_0x235888(0x16d)}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});function _0xffcc(){const _0x2cd047=['Password\x20has\x20been\x20reset\x20to:\x20','sendFile','Unauthorized\x20attempt\x20to\x20update\x20bot','filter','-----------------------------------------------------------------------------------','enabled','Orders','chat','use','::ffff:127.0.0.1','env','reason','bbPassword','updatebotmanager','answerCallbackQuery','all','bot-','Ok,\x20will\x20send\x20order\x20notifications\x20only','<b>Balance\x20Bot\x20Status:</b>\x0a','init','match','111maVjnb','/restart\x20-\x20restart\x20bot(s)\x0a','generateKeyPairAsync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','store-headless','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','login','deleteHistoryAlerts','readFileSync','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','includes','logged\x20out','HTML','static','slice','defaults','bbUsername','express','split','/:bot/performance','placeOrder','notification','Notifications\x20enabled\x0a','telegramUsername','user','inherit','mode','sendMessage','join','version','\x20only\x0a','reject','/on\x20-\x20start\x20bot(s)\x0a','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','config/','whitelist','reload','max','privateKey','41902urGLPh','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','temporaryAccessAllowed','remove','place-order','value','(((.+)+)+)+$','ipc','f2aRequired','botmanager','login\x20required','17082279FQzVnt','<b>Telegram\x20Bot\x20Status:</b>\x0a','connection','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Invalid\x20authentication\x20token\x20(2)','Crypt','</b>\x20?','new','search','toggleBotMode','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','404\x20Not\x20Found','6998145AzxUOX','bb-config.json','unlinkSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Login\x20accepted','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','No\x20bots\x20running\x20right\x20now','backup/','api-eu.mixpanel.com','write','secret','argv','uuid-random','order','2FA\x20login\x20required','show','botname','bbvReceive','Invalid\x20Telegram\x20token','getSeconds','https://api.ipify.org?format=json','getStartingBalances','sockets','\x20minutes','blacklist','callback_query','port','toString','get-messages','disabled\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','analytics','bots','/names\x20-\x20show\x20bot\x20names\x0a','settings.','expiry','startsWith','/:bot/history','stopPolling','Unauthorized\x20attempt\x20to\x20get\x20messages','bot','Markdown','index.html','Notifications\x20enabled','login\x20not\x20required','apiKey','messages','find','length','catch','sha256','yargs/yargs','2FA\x20required','10446qABCcF','page','status','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','copyFileSync','emit','emitHistory','SIGTERM','/:bot','485YGOUaJ','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','event','invalid\x20credentials','botID','from','sign','telegramEvents','yes','/:bot/configuration','min','timeshift','process','login\x20token\x20valid','send','get','/enable\x20-\x20enable\x20notifications\x0a','disabled','10umneKO','1000','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20confirm\x20message','uuid','password','running','jsonwebtoken','args','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','getDate','alerts','clientip','accept','entries','*$1*','latestversion','login\x20token\x20generated','log','::1','User\x20has\x20been\x20validated','exp','polling_error','Unauthorized\x20attempt\x20to\x20get\x20portfolio','listen','All\x20bots','2FA\x20login\x20rejected','bbvNew','/:bot/support','data','removeListener','telegram','storeConfiguration','success','ipv6','initclient','update-bb','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','referer','Starting\x20Balance\x20Bot\x20update','timestamp','title','orders','getMonth','hasOwnProperty','new-disabled','readdirSync','test','randomUUID','build2','auto','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','live','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Notifications\x20types:\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','\x20|\x20','hybrid-crypto-js','bb/','isIPv4MappedAddress','telegrammsg','disconnect','then','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','encryptedUuid','/update\x20-\x20update\x20Balance\x20Bot\x0a','lowdb','-config.json','Password\x20reset\x20rejected','getUTCHours','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','-results.json','temporary\x20access\x20not\x20allowed','Unauthorized\x20attempt\x20to\x20log\x20out','error','writeFileSync','1000328atlwCe','telegramChatId','2372304kVMziZ','stop','date-fns','compareSync','0.0.0','existsSync','$1_$2_$3','6b67f3d61ee94b8f5c80b4affef4c4d9','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','mkdirSync','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','starting\x20bot\x20|\x20Bot\x20','Unauthorized\x20login\x20attempt\x20(timeout)','remoteAddress','136800XlSvoe','whitelistEnabled','************','Unauthorized\x20attempt\x20to\x20update\x20settings','userid','Ok,\x20will\x20send\x20alert\x20notifications\x20only','hashSync','socket.io','publicKey','\x20mode','loginRequired','username','access\x20timeout','set','NTBA_FIX_319','Bot\x20Mgr\x20>\x20','type','decrypt','started','settings','lowdb/adapters/FileSync','Temporary\x20access\x20rejected','-events.json','crypto','track','isDirectory','any','@analytics/google-analytics-v3','stopped','replace','showname','Error:\x20Invalid\x20argument\x20','Notifications\x20disabled\x0a','randomFillSync','access','getTime','Access\x20enabled\x20for\x20','mixpanel','\x20>\x20','node-telegram-bot-api','bb-secure.json','logout','/help\x20-\x20show\x20available\x20commands\x0a','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','alias','forEach','telegramToken','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','server','message','cancelLoading','15\x20min','/status\x20-\x20show\x20bot(s)\x20status\x0a','/disable\x20-\x20disable\x20notifications\x0a','30\x20min','allow','All','verify','RSA','bb-settings.json','handshake','headers','update-bot','conn','padStart','/:bot/coins','getFullYear','Alerts','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','apply','path','RSA-OAEP','kill','headless','telegram2FaApproval','get-logs','bcryptjs','secure','fork','assign','Your\x20installation\x20is\x20already\x20up\x20to\x20date','manual','Unauthorized\x20attempt\x20to\x20add\x20bot','pidExpireLogin','temporary\x20token\x20generated','lastmsgemitted','name','bot.js','function','getPortfolio','parse','onText','5\x20min','telegramIpApproval','keys','token','isValid','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','confirm-message','number','Invalid\x20authentication\x20token\x20(1)','get-starting-balances','Bot\x20','push','toIPv4Address','\x20to\x20','exit','host','lastmsgtelegram','once','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegramEnabled','pidRefreshToken','deleted\x20Bot\x20','getMinutes','kind','SIGINT','build','2FA\x20login\x20token\x20generated','store','sendPortfolioTelegram'];_0xffcc=function(){return _0x2cd047;};return _0xffcc();}let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x235888(0x144)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x235888(0x138)),app=express(),http=require('http')['createServer'](app);app[_0x235888(0x11a)](express['static'](path[_0x235888(0x143)](__dirname,bbpath2,_0x235888(0x1e7)))),app[_0x235888(0x11a)](express[_0x235888(0x134)](path['join'](__dirname,bbpath2,_0x235888(0x10e)))),app[_0x235888(0x1b2)]('/',function(_0x48131a,_0x464da2){const _0x332c93=_0x235888;_0x464da2[_0x332c93(0x113)](path[_0x332c93(0x143)](__dirname,bbpath2,_0x332c93(0x1e7),_0x332c93(0x18f)));}),app[_0x235888(0x1b2)](_0x235888(0x1a2),function(_0x1a96ca,_0x1b4680){const _0xbd9ff=_0x235888;_0x1b4680[_0xbd9ff(0x113)](path[_0xbd9ff(0x143)](__dirname,bbpath2,_0xbd9ff(0x10e),'index.html'));}),app[_0x235888(0x1b2)]('/:bot/portfolio',(_0x39bc23,_0x30c821)=>{const _0x5a3e51=_0x235888;_0x30c821[_0x5a3e51(0x113)](path['join'](__dirname,bbpath2,_0x5a3e51(0x10e),_0x5a3e51(0x18f)));}),app[_0x235888(0x1b2)](_0x235888(0x13a),(_0xe16c86,_0x34449c)=>{const _0x241286=_0x235888;_0x34449c[_0x241286(0x113)](path[_0x241286(0x143)](__dirname,bbpath2,_0x241286(0x10e),_0x241286(0x18f)));}),app['get'](_0x235888(0x255),(_0x109c8f,_0x1a8fb9)=>{const _0x134f62=_0x235888;_0x1a8fb9[_0x134f62(0x113)](path[_0x134f62(0x143)](__dirname,bbpath2,_0x134f62(0x10e),_0x134f62(0x18f)));}),app[_0x235888(0x1b2)](_0x235888(0x18a),(_0x3aacb3,_0x302764)=>{const _0x46226a=_0x235888;_0x302764[_0x46226a(0x113)](path['join'](__dirname,bbpath2,_0x46226a(0x10e),_0x46226a(0x18f)));}),app[_0x235888(0x1b2)](_0x235888(0x1ac),(_0x1a461f,_0x24136c)=>{const _0xa0ef2a=_0x235888;_0x24136c[_0xa0ef2a(0x113)](path[_0xa0ef2a(0x143)](__dirname,bbpath2,_0xa0ef2a(0x10e),'index.html'));}),app[_0x235888(0x1b2)](_0x235888(0x1d2),(_0x6074a7,_0x100ba8)=>{const _0x46e620=_0x235888;_0x100ba8[_0x46e620(0x113)](path[_0x46e620(0x143)](__dirname,bbpath2,_0x46e620(0x10e),'index.html'));});if(HOST)http[_0x235888(0x1ce)](PORT,HOST);else http[_0x235888(0x1ce)](PORT);const io=require(_0x235888(0x219))(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require(_0x235888(0x239)),{allowedNodeEnvironmentFlags}=require(_0x235888(0x1af));let tgBot;if(settings['telegramToken']&&settings[_0x235888(0x241)]!=''&&settings[_0x235888(0x13e)]&&settings[_0x235888(0x13e)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();function startServer(){const _0x2ae109=_0x235888;console[_0x2ae109(0x1c8)](''),console['log']('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x2ae109(0x1c8)](_0x2ae109(0x116));if(config['length']!=0x0)config[_0x2ae109(0x240)](_0x4f2b9a=>{const _0x300fc6=_0x2ae109;if(_0x4f2b9a[_0x300fc6(0x19c)]==_0x300fc6(0x117)||_0x4f2b9a[_0x300fc6(0x19c)]==_0x300fc6(0x160))logging(_0x300fc6(0x20f)+_0x4f2b9a[_0x300fc6(0x1a7)]+_0x300fc6(0x1ee)+_0x4f2b9a['botname']),startBot([_0x4f2b9a[_0x300fc6(0x1a7)],userID],{'cwd':bbpath},function(_0x5e86f4){if(_0x5e86f4)logging(_0x5e86f4);});else(_0x4f2b9a[_0x300fc6(0x19c)]==_0x300fc6(0x1b4)||_0x4f2b9a['status']==_0x300fc6(0x1e3))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x4f2b9a['botID']+_0x300fc6(0x1ee)+_0x4f2b9a[_0x300fc6(0x175)]);});else!newBot&&console['log'](_0x2ae109(0x12a));if(newBot)addBot();console[_0x2ae109(0x1c8)](_0x2ae109(0x116)),console['log']('');}function startSocket(){const _0x17a3de=_0x235888;io['on'](_0x17a3de(0x15b),_0x25e310=>{const _0x59e277=_0x17a3de;let _0x1732de,_0x565ad0,_0x57b5dd,_0xb4ae24,_0x3a9935;const _0x25fddb=_0x25e310[_0x59e277(0x250)][_0x59e277(0x251)][_0x59e277(0x1dc)];_0x565ad0=_0x25fddb[_0x59e277(0x126)](/bot[0-9]{3}/);if(_0x565ad0)_0x57b5dd=_0x565ad0[0x0][_0x59e277(0x126)](/[0-9]{3}/);if(_0x57b5dd)_0x1732de=_0x57b5dd[0x0];else _0x1732de=_0x59e277(0x157);const _0x4559a9=_0x25e310[_0x59e277(0x250)]['auth'][_0x59e277(0x1f6)];if(!_0x4559a9)_0x25e310[_0x59e277(0x19f)](_0x59e277(0x19c),{'publicKey':secure[_0x59e277(0x21a)]});else{_0xb4ae24=timelyDecrypt(_0x4559a9,![]);if(!_0xb4ae24)_0x25e310[_0x59e277(0x19f)](_0x59e277(0x19c),{'publicKey':secure[_0x59e277(0x21a)]});else{_0x3a9935=normalizeIP(_0x25e310[_0x59e277(0x253)][_0x59e277(0x211)])[_0x59e277(0x110)];if(!devices[_0xb4ae24])devices[_0xb4ae24]={'uuid':_0xb4ae24,'access':{'token':null}};devices[_0xb4ae24]['ip']=_0x3a9935;const _0x481a9f=addClient(_0x25e310['id'],_0xb4ae24,_0x1732de);setAccess(_0x481a9f),emitMessages(),_0x25e310['on']('login',_0x26c5ce=>{const _0x4d3f92=_0x59e277,_0x2b49eb=timelyDecrypt(_0x26c5ce[_0x4d3f92(0x1ba)]);if(_0x2b49eb){_0x26c5ce={'username':_0x26c5ce[_0x4d3f92(0x21d)],'password':_0x2b49eb},devices[_0xb4ae24][_0x4d3f92(0x234)]=validateCredentials(_0x26c5ce,_0xb4ae24);if(devices[_0xb4ae24][_0x4d3f92(0x234)][_0x4d3f92(0x24b)]==![]&&devices[_0xb4ae24][_0x4d3f92(0x234)][_0x4d3f92(0x11d)]==_0x4d3f92(0x173))_0x25e310[_0x4d3f92(0x19f)](_0x4d3f92(0x19c),{'access':devices[_0xb4ae24][_0x4d3f92(0x234)]}),loginAccess2FA(_0xb4ae24,_0x3a9935);else{if(devices[_0xb4ae24][_0x4d3f92(0x234)][_0x4d3f92(0x24b)]==![]&&devices[_0xb4ae24]['access'][_0x4d3f92(0x11d)]==_0x4d3f92(0x1a6))_0x25e310[_0x4d3f92(0x19f)](_0x4d3f92(0x19c),{'access':devices[_0xb4ae24][_0x4d3f92(0x234)]});else devices[_0xb4ae24][_0x4d3f92(0x234)]['allow']&&devices[_0xb4ae24][_0x4d3f92(0x234)][_0x4d3f92(0x11d)]==_0x4d3f92(0x1c7)&&(getClientsWithUuid(_0xb4ae24)['forEach'](_0x4d2c51=>{setAccess(_0x4d2c51);}),setTokenRefresh(_0xb4ae24),setSessionTimeout('login',_0xb4ae24));}}else logging(_0x4d3f92(0x210));}),_0x25e310['on']('reset-password',()=>{resetPassword();}),_0x25e310['on']('disconnect',_0x2e87b5=>{removeClient(_0x25e310['id']);});}}});}function initClient(_0x133dbd){const _0x11940f=_0x235888;if(_0x133dbd!=_0x11940f(0x157)&&config[_0x11940f(0x192)]!=''){if(pid[_0x133dbd])pid[_0x133dbd][_0x11940f(0x1b1)]({'function':_0x11940f(0x1d9),'args':null});}}function getSocket(_0x258e61){const _0x1bfb04=_0x235888;return io['sockets'][_0x1bfb04(0x17b)]['get'](_0x258e61);}function setAccess(_0x82c0cf){const _0x5a4b98=_0x235888,_0x284abe=getSocket(_0x82c0cf['id']),_0x147eec=_0x82c0cf[_0x5a4b98(0x1b9)],_0x8c09f1=_0x82c0cf[_0x5a4b98(0x18d)];devices[_0x147eec]['access']=validateAccess(devices[_0x147eec][_0x5a4b98(0x234)]['token'],_0x147eec),_0x284abe[_0x5a4b98(0x143)](_0x147eec);if(devices[_0x147eec]['access']['allow']){_0x284abe[_0x5a4b98(0x143)](_0x8c09f1);if(_0x8c09f1=='botmanager')initializeSocketBotManager(_0x284abe);else initializeSocketBot(_0x284abe);initClient(_0x8c09f1);}devices[_0x147eec][_0x5a4b98(0x234)][_0x5a4b98(0xf8)]&&devices[_0x147eec]['access'][_0x5a4b98(0x11d)]==_0x5a4b98(0x268)&&setSessionTimeout('2FA',_0x147eec),devices[_0x147eec][_0x5a4b98(0x234)][_0x5a4b98(0xf8)]&&devices[_0x147eec][_0x5a4b98(0x234)][_0x5a4b98(0x11d)]==_0x5a4b98(0x10f)&&setSessionTimeout('login',_0x147eec),_0x284abe[_0x5a4b98(0x19f)](_0x5a4b98(0x19c),{'status':_0x82c0cf[_0x5a4b98(0x244)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x147eec][_0x5a4b98(0x234)],'externalip':devices[_0x147eec]['ip'],'publicKey':secure[_0x5a4b98(0x21a)],'userid':settings[_0x5a4b98(0x216)],'validInstallation':validInstallation}),devices[_0x147eec][_0x5a4b98(0x234)][_0x5a4b98(0x24b)]==![]&&devices[_0x147eec]['access'][_0x5a4b98(0x11d)]==_0x5a4b98(0x199)&&temporaryAccess2FA(_0x147eec,devices[_0x147eec]['ip']);}function setSessionTimeout(_0x5d68fc,_0x1b9079){const _0x1f2a5b=_0x235888;let _0x5f0f95;if(_0x5d68fc==_0x1f2a5b(0x12d))_0x5f0f95=loginExpiry*0x3c*0x3e8;else _0x5f0f95=devices[_0x1b9079]['telegramIpApproval'][_0x1f2a5b(0x188)]*0x3c*0x3e8-(new Date()[_0x1f2a5b(0x235)]()-devices[_0x1b9079][_0x1f2a5b(0xf6)][_0x1f2a5b(0x1de)]);if(devices[_0x1b9079]['pidExpireLogin'])clearTimeout(devices[_0x1b9079][_0x1f2a5b(0x267)]);devices[_0x1b9079]['pidExpireLogin']=setTimeout(()=>{const _0x55b0ad=_0x1f2a5b;if(devices[_0x1b9079][_0x55b0ad(0x109)])clearTimeout(devices[_0x1b9079][_0x55b0ad(0x109)]);removeSocketListeners(_0x1b9079),addBlacklist(_0x1b9079),devices[_0x1b9079][_0x55b0ad(0xf6)]=null,devices[_0x1b9079]['telegram2FaApproval']=null,devices[_0x1b9079]['access'][_0x55b0ad(0xf8)]=null,devices[_0x1b9079]['access']=validateAccess(devices[_0x1b9079]['access'][_0x55b0ad(0xf8)],_0x1b9079),!(devices[_0x1b9079][_0x55b0ad(0x234)][_0x55b0ad(0x24b)]&&devices[_0x1b9079][_0x55b0ad(0x234)]['reason']==_0x55b0ad(0x191))&&(_0x5d68fc==_0x55b0ad(0x12d)?io['to'](_0x1b9079)[_0x55b0ad(0x19f)](_0x55b0ad(0x19c),{'access':{'allow':![],'reason':_0x55b0ad(0x21e),'token':null}}):io['to'](_0x1b9079)[_0x55b0ad(0x19f)](_0x55b0ad(0x19c),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x1b9079][_0x55b0ad(0x234)][_0x55b0ad(0xf8)]=null;},_0x5f0f95);}function setTokenRefresh(_0x5a1fae){const _0x47d482=_0x235888;if(devices[_0x5a1fae][_0x47d482(0x109)])clearTimeout(devices[_0x5a1fae][_0x47d482(0x109)]);devices[_0x5a1fae][_0x47d482(0x109)]=setTimeout(()=>{const _0x10496=_0x47d482;getClientsWithUuid(_0x5a1fae)[_0x10496(0x195)]!=0x0?(devices[_0x5a1fae]['access']=refreshToken(_0x5a1fae),io['to'](_0x5a1fae)['emit']('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5a1fae]['access'],'externalip':devices[_0x5a1fae]['ip'],'publicKey':secure[_0x10496(0x21a)],'validInstallation':validInstallation}),setTokenRefresh(_0x5a1fae)):clearTimeout(devices[_0x5a1fae]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x46bb8c){const _0x224cc3=_0x235888,_0x44a1dc=getClient(_0x46bb8c['id'])[_0x224cc3(0x1b9)];_0x46bb8c['emit'](_0x224cc3(0x185),config),_0x46bb8c[_0x224cc3(0x19f)](_0x224cc3(0x225),cleanSettings()),_0x46bb8c['on']('add-bot',_0x4381ee=>{const _0x35fbe8=_0x224cc3;if(validateAccess(_0x4381ee,_0x44a1dc)['allow'])addBot();else logging(_0x35fbe8(0x266));}),_0x46bb8c['on'](_0x224cc3(0x252),(_0x175c7e,_0x1db9a7)=>{const _0x543e3=_0x224cc3;if(validateAccess(_0x1db9a7,_0x44a1dc)[_0x543e3(0x24b)])toggleBot(_0x175c7e['botID'],_0x175c7e[_0x543e3(0x19c)],_0x175c7e[_0x543e3(0x1ea)]);else logging(_0x543e3(0x114));}),_0x46bb8c['on']('toggle-bot-mode',(_0x23508f,_0x5f0d3b)=>{const _0x41aa55=_0x224cc3;if(validateAccess(_0x5f0d3b,_0x44a1dc)[_0x41aa55(0x24b)])toggleBotMode(_0x23508f);else logging(_0x41aa55(0x114));}),_0x46bb8c['on']('delete-bot',(_0xb75618,_0x98a5cc)=>{if(validateAccess(_0x98a5cc,_0x44a1dc)['allow'])deleteBot(_0xb75618);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x46bb8c['on']('store-settings',(_0x15496a,_0x54ed7a)=>{const _0x405932=_0x224cc3;if(validateAccess(_0x54ed7a,_0x44a1dc)['allow'])storeSettings(_0x15496a,!![]);else logging(_0x405932(0x215));}),_0x46bb8c['on']('update-bb',_0x128e2d=>{const _0x172438=_0x224cc3;if(validateAccess(_0x128e2d,_0x44a1dc)['allow'])updateBB();else logging(_0x172438(0x1b7));}),_0x46bb8c['on'](_0x224cc3(0x181),_0x42658e=>{const _0x522557=_0x224cc3;if(validateAccess(_0x42658e,_0x44a1dc)[_0x522557(0x24b)])getMessages();else logging(_0x522557(0x18c));}),_0x46bb8c['on'](_0x224cc3(0xfb),(_0x31dde3,_0x4b10ae)=>{const _0x52cb1b=_0x224cc3;if(validateAccess(_0x4b10ae,_0x44a1dc)[_0x52cb1b(0x24b)])confirmMessage(_0x31dde3);else logging(_0x52cb1b(0x1b8));}),_0x46bb8c['on']('logout',_0x56dde4=>{const _0x269547=_0x224cc3;if(validateAccess(_0x56dde4,_0x44a1dc)[_0x269547(0x24b)]){if(devices[_0x44a1dc][_0x269547(0x109)])clearTimeout(devices[_0x44a1dc][_0x269547(0x109)]);if(devices[_0x44a1dc][_0x269547(0x267)])clearTimeout(devices[_0x44a1dc][_0x269547(0x267)]);removeSocketListeners(getClient(_0x46bb8c['id'])[_0x269547(0x1b9)]),addBlacklist(_0x44a1dc),devices[_0x44a1dc]['telegramIpApproval']=null,devices[_0x44a1dc][_0x269547(0x25e)]=null,devices[_0x44a1dc]['access'][_0x269547(0xf8)]=null,io['to'](getClient(_0x46bb8c['id'])[_0x269547(0x1b9)])[_0x269547(0x19f)]('status',{'access':{'allow':![],'reason':_0x269547(0x132),'token':null}});}else logging(_0x269547(0x1ff));});}function initializeSocketBot(_0x4d56a5){const _0x1138b5=_0x235888,_0x6146a7=getClient(_0x4d56a5['id'])[_0x1138b5(0x18d)],_0x5216b5=getClient(_0x4d56a5['id'])['uuid'];_0x4d56a5['on'](_0x1138b5(0x25f),(_0x36c93d,_0x29451b)=>{const _0x91ff7b=_0x1138b5;if(validateAccess(_0x29451b,_0x5216b5)[_0x91ff7b(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x91ff7b(0x1b1)]({'function':_0x91ff7b(0x1a0),'args':_0x36c93d});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x4d56a5['on']('delete-alerts',(_0x3f910a,_0x38824a)=>{const _0x3d5ad8=_0x1138b5;if(validateAccess(_0x38824a,_0x5216b5)[_0x3d5ad8(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x3d5ad8(0x1b1)]({'function':_0x3d5ad8(0x12e),'args':_0x3f910a});}else logging(_0x3d5ad8(0x1be));}),_0x4d56a5['on']('get-portfolio',(_0x124292,_0x2cbd15)=>{const _0x23b57d=_0x1138b5;if(validateAccess(_0x2cbd15,_0x5216b5)[_0x23b57d(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x23b57d(0x1b1)]({'function':_0x23b57d(0x26d),'args':_0x124292});}else logging(_0x23b57d(0x1cd));}),_0x4d56a5['on']('store-configuration',(_0x11da0c,_0x360817)=>{const _0x539c98=_0x1138b5;if(validateAccess(_0x360817,_0x5216b5)['allow']){if(pid[_0x6146a7])pid[_0x6146a7][_0x539c98(0x1b1)]({'function':_0x539c98(0x1d6),'args':_0x11da0c});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x4d56a5['on'](_0x1138b5(0x12b),(_0x3aed17,_0x224d3a)=>{const _0xbc544a=_0x1138b5;if(validateAccess(_0x224d3a,_0x5216b5)['allow']){if(pid[_0x6146a7])pid[_0x6146a7]['send']({'function':'storeHeadless','args':_0x3aed17});}else logging(_0xbc544a(0x12c));}),_0x4d56a5['on'](_0x1138b5(0xfe),_0x20c330=>{const _0x4b1d04=_0x1138b5;if(validateAccess(_0x20c330,_0x5216b5)[_0x4b1d04(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x4b1d04(0x1b1)]({'function':_0x4b1d04(0x17a),'args':null});}else logging(_0x4b1d04(0x1fc));}),_0x4d56a5['on'](_0x1138b5(0x152),(_0xca130b,_0x4b5a1f)=>{const _0x4c0a17=_0x1138b5;if(validateAccess(_0x4b5a1f,_0x5216b5)[_0x4c0a17(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x4c0a17(0x1b1)]({'function':_0x4c0a17(0x13b),'args':_0xca130b});}else logging(_0x4c0a17(0x243));}),_0x4d56a5['on']('cancel-loading',_0x2bdc18=>{const _0x1c3cb9=_0x1138b5;if(validateAccess(_0x2bdc18,_0x5216b5)[_0x1c3cb9(0x24b)]){if(pid[_0x6146a7])pid[_0x6146a7][_0x1c3cb9(0x1b1)]({'function':_0x1c3cb9(0x246),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x4d56a5['on'](_0x1138b5(0x1da),_0x223e12=>{const _0x14268f=_0x1138b5;if(validateAccess(_0x223e12,_0x5216b5)[_0x14268f(0x24b)])updateBB();else logging(_0x14268f(0x1b7));}),_0x4d56a5['on']('get-messages',_0x3c5107=>{const _0x3f8a1b=_0x1138b5;if(validateAccess(_0x3c5107,_0x5216b5)[_0x3f8a1b(0x24b)])getMessages();else logging(_0x3f8a1b(0x18c));}),_0x4d56a5['on']('confirm-message',(_0x124e56,_0x4fca09)=>{const _0x247fe8=_0x1138b5;if(validateAccess(_0x4fca09,_0x5216b5)['allow'])confirmMessage(_0x124e56);else logging(_0x247fe8(0x1b8));}),_0x4d56a5['on'](_0x1138b5(0x23b),_0x2ee662=>{const _0x50318b=_0x1138b5;if(validateAccess(_0x2ee662,_0x5216b5)[_0x50318b(0x24b)]){if(devices[_0x5216b5][_0x50318b(0x109)])clearTimeout(devices[_0x5216b5][_0x50318b(0x109)]);if(devices[_0x5216b5][_0x50318b(0x267)])clearTimeout(devices[_0x5216b5][_0x50318b(0x267)]);removeSocketListeners(getClient(_0x4d56a5['id'])[_0x50318b(0x1b9)]),addBlacklist(_0x5216b5),devices[_0x5216b5]['telegramIpApproval']=null,devices[_0x5216b5][_0x50318b(0x25e)]=null,devices[_0x5216b5][_0x50318b(0x234)][_0x50318b(0xf8)]=null,io['to'](getClient(_0x4d56a5['id'])[_0x50318b(0x1b9)])['emit'](_0x50318b(0x19c),{'access':{'allow':![],'reason':_0x50318b(0x132),'token':null}});}else logging(_0x50318b(0x1ff));});}function removeSocketListeners(_0x3561fd){const _0x66070c=_0x235888;getClientsWithUuid(_0x3561fd)[_0x66070c(0x240)](_0x4af76a=>{getSocket(_0x4af76a['id'])['removeAllListeners']();});}function cleanSettings(){const _0x7912a=_0x235888;let _0x336ff2=settings;return settings[_0x7912a(0x241)]&&settings[_0x7912a(0x241)]!=''&&(_0x336ff2={..._0x336ff2,'telegramToken':_0x7912a(0x214)}),settings[_0x7912a(0x11e)]&&settings['bbPassword']!=''&&(_0x336ff2={..._0x336ff2,'bbPassword':_0x7912a(0x214)}),_0x336ff2;}function updateBB(){const _0x33cdd8=_0x235888;installingUpdate=!![],config[_0x33cdd8(0x240)](_0x1449c2=>{const _0x4c718b=_0x33cdd8;restartBot(_0x1449c2[_0x4c718b(0x1a7)]);}),process[_0x33cdd8(0x1b1)]({'update':!![]},_0x13685e=>{});}function startBot(_0x880b8e,_0x237a56,_0x433eba){const _0x30ae12=_0x235888;let _0x3858c4=![];const _0x3a423f=_0x880b8e[0x0];_0x237a56={..._0x237a56,'stdio':[_0x30ae12(0x140),_0x30ae12(0x140),_0x30ae12(0x140),_0x30ae12(0x155)]},pid[_0x3a423f]=childProcess[_0x30ae12(0x262)](botfile,_0x880b8e,_0x237a56),pid[_0x3a423f]['on'](_0x30ae12(0x245),_0x2babac=>{const _0x113713=_0x30ae12;switch(Object[_0x113713(0xf7)](_0x2babac)[0x0]){case _0x113713(0x175):updateBotName(_0x3a423f,_0x2babac[_0x113713(0x175)]);break;case _0x113713(0x11f):updateBotManager();break;case'status':updateStatus(_0x3a423f,_0x2babac['status']);break;case _0x113713(0x1ea):updateLive(_0x3a423f,_0x2babac[_0x113713(0x1ea)]);break;case'started':updateLive(_0x3a423f,_0x2babac[_0x113713(0x224)]),io['to'](_0x3a423f)['emit']('status',{'access':{'allow':![],'reason':_0x113713(0x14b),'token':null}});break;case _0x113713(0x205):_0x2babac[_0x113713(0x205)]=='restart'&&restartBot(_0x3a423f);_0x2babac[_0x113713(0x205)]==_0x113713(0x25c)&&toggleBot(_0x3a423f,'disabled','stopped');break;case _0x113713(0x1d5):sendTelegram(_0x3a423f,_0x2babac[_0x113713(0x1d5)]);break;case _0x113713(0x1f2):sendTelegramMsg(_0x2babac[_0x113713(0x1f2)]);break;case _0x113713(0x26c):io['to'](_0x3a423f)[_0x113713(0x19f)](_0x2babac[_0x113713(0x26c)],_0x2babac[_0x113713(0x1bd)]);break;}}),pid[_0x3a423f]['on'](_0x30ae12(0x200),function(_0x5e3d4d){if(_0x3858c4)return;_0x3858c4=!![],_0x433eba(_0x5e3d4d);}),pid[_0x3a423f]['on']('exit',function(_0x4fca9d){const _0x1d3b57=_0x30ae12;if(installingUpdate)return;if(_0x3858c4)return;_0x3858c4=!![],_0x433eba(null);const _0x5b1683=dbConfig[_0x1d3b57(0x1b2)](_0x1d3b57(0x185))[_0x1d3b57(0x194)]({'botID':_0x3a423f})['value']();_0x5b1683&&(_0x5b1683['status']=='enabled'||_0x5b1683['status']==_0x1d3b57(0x160))&&(updateLive(_0x3a423f,'stopped'),logging('restarting\x20Bot\x20'+_0x3a423f),startBot([_0x3a423f,userID],{'cwd':bbpath},function(_0x510397){if(_0x510397)logging(_0x510397);}));});}function stopBot(_0x1b4d78){const _0xc083a5=_0x235888;getClientsWithBotID(_0x1b4d78)[_0xc083a5(0x240)](_0x4ecb37=>{const _0x184fca=_0xc083a5;getSocket(_0x4ecb37['id'])[_0x184fca(0x1f3)](!![]),removeClient(_0x4ecb37['id']);}),pid[_0x1b4d78]&&(pid[_0x1b4d78][_0xc083a5(0x25c)](),pid[_0x1b4d78]=null);}function restartBot(_0x75d455){const _0x5b27f6=_0x235888;if(pid[_0x75d455])pid[_0x75d455][_0x5b27f6(0x25c)]();}function addBot(){const _0x333a62=_0x235888;let _0x1d62d4;for(let _0x1df8e6=0x1;_0x1df8e6<0x3e9;_0x1df8e6++){_0x1d62d4=_0x1df8e6['toString']()[_0x333a62(0x254)](0x3,'0');let _0x3282c4=config[_0x333a62(0x194)](_0x26d918=>_0x26d918[_0x333a62(0x1a7)]==_0x1d62d4);if(!_0x3282c4)break;}if(_0x1d62d4===_0x333a62(0x1b6)){logging(_0x333a62(0x258));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x1d62d4),dbConfig[_0x333a62(0x1b2)](_0x333a62(0x185))['push']({'botID':_0x1d62d4,'botname':_0x333a62(0xff)+_0x1d62d4,'status':_0x333a62(0x160),'live':''})['write'](),startBot([_0x1d62d4,userID],{'cwd':bbpath},function(_0xfbe63d){if(_0xfbe63d)logging(_0xfbe63d);}),config=getConfiguration(),io['to'](_0x333a62(0x157))['emit'](_0x333a62(0x185),config);}function deleteBot(_0x562cef){const _0x465011=_0x235888;getClientsWithBotID(_0x562cef)[_0x465011(0x240)](_0x33e5aa=>{getSocket(_0x33e5aa['id'])['disconnect'](!![]),removeClient(_0x33e5aa['id']);}),dbConfig[_0x465011(0x1b2)]('bots')[_0x465011(0x151)]({'botID':_0x562cef})[_0x465011(0x16e)](),logging(_0x465011(0x10a)+_0x562cef),stopBot(_0x562cef);try{fs[_0x465011(0x167)](path['join'](configpath,_0x465011(0x122)+_0x562cef+'-config.json')),fs['unlinkSync'](path['join'](configpath,_0x465011(0x122)+_0x562cef+_0x465011(0x228))),fs['unlinkSync'](path[_0x465011(0x143)](configpath,_0x465011(0x122)+_0x562cef+'-performance.json')),fs[_0x465011(0x167)](path[_0x465011(0x143)](configpath,'bot-'+_0x562cef+_0x465011(0x1fd)));}catch(_0x50ad10){if(_0x50ad10)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x50ad10);}config=getConfiguration(),io['to'](_0x465011(0x157))[_0x465011(0x19f)]('bots',config);}function toggleBot(_0x1cc105,_0x51da9b,_0x37e38e){const _0x40f712=_0x235888;dbConfig[_0x40f712(0x1b2)]('bots')[_0x40f712(0x194)]({'botID':_0x1cc105})[_0x40f712(0x263)]({'status':_0x51da9b})[_0x40f712(0x263)]({'live':_0x37e38e})['write']();if(_0x51da9b==_0x40f712(0x117)||_0x51da9b==_0x40f712(0x160))logging('enabled\x20Bot\x20'+_0x1cc105),startBot([_0x1cc105,userID],{'cwd':bbpath},function(_0x120bd7){if(_0x120bd7)logging(_0x120bd7);});else(_0x51da9b==_0x40f712(0x1b4)||_0x51da9b=='new-disabled')&&(logging(_0x40f712(0x182)+_0x1cc105),stopBot(_0x1cc105));config=getConfiguration(),io['to'](_0x40f712(0x157))[_0x40f712(0x19f)](_0x40f712(0x185),config);}function toggleStatus(_0x5ed62d){const _0x36e2b3=_0x235888;let _0x253f87=dbConfig['get'](_0x36e2b3(0x185))[_0x36e2b3(0x194)]({'botID':_0x5ed62d})[_0x36e2b3(0x153)](),_0x494196;if(_0x253f87[_0x36e2b3(0x19c)]===_0x36e2b3(0x117))_0x494196=_0x36e2b3(0x1b4);else{if(_0x253f87[_0x36e2b3(0x19c)]===_0x36e2b3(0x160))_0x494196=_0x36e2b3(0x1e3);else{if(_0x253f87[_0x36e2b3(0x19c)]===_0x36e2b3(0x1e3))_0x494196=_0x36e2b3(0x160);else{if(_0x253f87[_0x36e2b3(0x19c)]==='disabled')_0x494196='enabled';}}}return _0x494196;}function updateStatus(_0x1bfa61,_0x466708){const _0x558fbc=_0x235888;dbConfig[_0x558fbc(0x1b2)](_0x558fbc(0x185))['find']({'botID':_0x1bfa61})['assign']({'status':_0x466708})['write'](),config=getConfiguration(),io['to'](_0x558fbc(0x157))[_0x558fbc(0x19f)](_0x558fbc(0x185),config);}function updateLive(_0x1fad5b,_0x324716){const _0x335d8a=_0x235888;dbConfig[_0x335d8a(0x1b2)](_0x335d8a(0x185))[_0x335d8a(0x194)]({'botID':_0x1fad5b})[_0x335d8a(0x263)]({'live':_0x324716})[_0x335d8a(0x16e)](),config=getConfiguration(),io['to'](_0x335d8a(0x157))[_0x335d8a(0x19f)](_0x335d8a(0x185),config);}function updateBotName(_0x4085f9,_0x358218){const _0x393ddb=_0x235888;dbConfig['get'](_0x393ddb(0x185))[_0x393ddb(0x194)]({'botID':_0x4085f9})['assign']({'botname':_0x358218})[_0x393ddb(0x16e)](),config=getConfiguration(),io['to'](_0x393ddb(0x157))['emit'](_0x393ddb(0x185),config);}function updateBotManager(){const _0x102523=_0x235888;config=getConfiguration(),io['to'](_0x102523(0x157))[_0x102523(0x19f)](_0x102523(0x185),config);}function toggleBotMode(_0xb93c32){const _0x491857=_0x235888;if(pid[_0xb93c32])pid[_0xb93c32][_0x491857(0x1b1)]({'function':_0x491857(0x162),'args':null});else{const _0x49cccc=configpath+_0x491857(0x122)+_0xb93c32+'-config.json',_0x44932f=fs[_0x491857(0x12f)](_0x49cccc),_0x265747=JSON[_0x491857(0x26e)](_0x44932f),_0x4a1485=_0x265747[_0x491857(0x18d)][0x0][_0x491857(0x25d)];_0x265747['bot'][0x0][_0x491857(0x25d)]=!_0x4a1485;const _0x17b87a=JSON['stringify'](_0x265747,null,0x2);fs[_0x491857(0x201)](_0x49cccc,_0x17b87a),config=getConfiguration(),io['to'](_0x491857(0x157))[_0x491857(0x19f)](_0x491857(0x185),config);}}function telegramError(_0x4aeff8){const _0x17230a=_0x235888;console[_0x17230a(0x1c8)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x1ff504){const _0x57a212=_0x235888;if(_0x1ff504['from'][_0x57a212(0x21d)]!=settings['telegramUsername']&&'@'+_0x1ff504[_0x57a212(0x1a8)][_0x57a212(0x21d)]!=settings[_0x57a212(0x13e)])return tgBot[_0x57a212(0x142)](_0x1ff504[_0x57a212(0x119)]['id'],_0x57a212(0x1a4),{'parse_mode':'HTML'})[_0x57a212(0x196)](_0x252970=>{telegramError(_0x252970);}),![];return!![];}async function initTelegram(){const _0x3e5565=_0x235888;if(tgBot)tgBot[_0x3e5565(0x18b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3e5565(0x241)],{'polling':!![]});let _0x28e317=_0x3e5565(0x242);_0x28e317+='\x0a',_0x28e317+=_0x3e5565(0x1b3),_0x28e317+=_0x3e5565(0x249),_0x28e317+=_0x3e5565(0xfa),_0x28e317+=_0x3e5565(0x128),_0x28e317+=_0x3e5565(0x147),_0x28e317+='/off\x20-\x20stop\x20bot(s)\x0a',_0x28e317+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x28e317+=_0x3e5565(0x186),_0x28e317+=_0x3e5565(0x248),_0x28e317+=_0x3e5565(0x130),_0x28e317+=_0x3e5565(0x1f7),_0x28e317+=_0x3e5565(0x23c);let _0x349a3f=_0x3e5565(0x148);_0x349a3f+='\x0a',_0x349a3f+=_0x28e317,tgBot[_0x3e5565(0x26f)](/\/start/,_0xe1a13c=>{const _0x382253=_0x3e5565;if(!validateTelegram(_0xe1a13c))return;if(settings[_0x382253(0x203)]!=_0xe1a13c[_0x382253(0x119)]['id'])updateSetting('telegramChatId',_0xe1a13c[_0x382253(0x119)]['id']);updateSetting(_0x382253(0x108),!![]),tgBot[_0x382253(0x142)](_0xe1a13c[_0x382253(0x119)]['id'],_0x349a3f)[_0x382253(0x196)](_0x57ea2f=>{telegramError(_0x57ea2f);});}),tgBot[_0x3e5565(0x26f)](/\/enable/,_0x391d07=>{const _0x322000=_0x3e5565;if(!validateTelegram(_0x391d07))return;if(settings['telegramChatId']!=_0x391d07['chat']['id'])updateSetting('telegramChatId',_0x391d07[_0x322000(0x119)]['id']);updateSetting(_0x322000(0x108),!![]),tgBot[_0x322000(0x142)](_0x391d07[_0x322000(0x119)]['id'],_0x322000(0x190))['catch'](_0x1d7bad=>{telegramError(_0x1d7bad);});}),tgBot[_0x3e5565(0x26f)](/\/config/,async _0x20f985=>{const _0x48fb82=_0x3e5565;if(!validateTelegram(_0x20f985))return;tgBot[_0x48fb82(0x1d4)]('callback_query'),tgBot[_0x48fb82(0x142)](_0x20f985[_0x48fb82(0x119)]['id'],_0x48fb82(0x163),{'reply_markup':{'inline_keyboard':[[{'text':_0x48fb82(0x118),'callback_data':_0x48fb82(0x1e0)},{'text':_0x48fb82(0x257),'callback_data':_0x48fb82(0x1c1)},{'text':_0x48fb82(0x24c),'callback_data':_0x48fb82(0x121)}]]}})[_0x48fb82(0x196)](_0x4e6d00=>{telegramError(_0x4e6d00);}),tgBot['on'](_0x48fb82(0x17e),async _0x29cbea=>{const _0x236154=_0x48fb82,_0x57d1ab=_0x29cbea[_0x236154(0x1d3)],_0x3d28be=_0x29cbea[_0x236154(0x245)];tgBot[_0x236154(0x120)](_0x29cbea['id'])[_0x236154(0x1f4)](async()=>{const _0x327b9a=_0x236154;_0x57d1ab==_0x327b9a(0x1e0)&&(updateSetting('telegramEvents',_0x327b9a(0x1e0)),updateSetting(_0x327b9a(0x108),!![]),await tgBot[_0x327b9a(0x142)](_0x3d28be[_0x327b9a(0x119)]['id'],_0x327b9a(0x123))['catch'](_0x2184ca=>{telegramError(_0x2184ca);}));_0x57d1ab==_0x327b9a(0x1c1)&&(updateSetting('telegramEvents',_0x327b9a(0x1c1)),updateSetting(_0x327b9a(0x108),!![]),await tgBot[_0x327b9a(0x142)](_0x3d28be[_0x327b9a(0x119)]['id'],_0x327b9a(0x217))[_0x327b9a(0x196)](_0x5e1d1a=>{telegramError(_0x5e1d1a);}));_0x57d1ab==_0x327b9a(0x121)&&(updateSetting('telegramEvents',_0x327b9a(0x121)),updateSetting(_0x327b9a(0x108),!![]),await tgBot[_0x327b9a(0x142)](_0x3d28be['chat']['id'],_0x327b9a(0x1e9))[_0x327b9a(0x196)](_0x5618bc=>{telegramError(_0x5618bc);}));if(!settings['telegramChatId'])tgBot[_0x327b9a(0x142)](_0x3d28be[_0x327b9a(0x119)]['id'],_0x327b9a(0x1bf))[_0x327b9a(0x196)](_0x473837=>{telegramError(_0x473837);});}),tgBot[_0x236154(0x1d4)](_0x236154(0x17e));});}),tgBot['onText'](/\/status/,_0x32a738=>{const _0x3f59ee=_0x3e5565;if(!validateTelegram(_0x32a738))return;const _0x246e06=getBotsWithMode();let _0x3d5224=_0x3f59ee(0x124);config[_0x3f59ee(0x240)](_0x4e08c4=>{const _0x4d5846=_0x3f59ee,_0x95064=_0x246e06[_0x4d5846(0x194)](_0x3a77fd=>_0x3a77fd[_0x4d5846(0x1a7)]==_0x4e08c4[_0x4d5846(0x1a7)])['mode'];_0x3d5224+=_0x4d5846(0xff)+_0x4e08c4[_0x4d5846(0x1a7)]+':\x20'+_0x4e08c4[_0x4d5846(0x19c)]+_0x4d5846(0x1ee)+_0x95064+_0x4d5846(0x1ee)+_0x4e08c4[_0x4d5846(0x1ea)]+'\x0a';}),_0x3d5224+='\x0a',_0x3d5224+=_0x3f59ee(0x15a),_0x3d5224+=!settings[_0x3f59ee(0x108)]?_0x3f59ee(0x232):_0x3f59ee(0x13d),_0x3d5224+=settings[_0x3f59ee(0x108)]?settings[_0x3f59ee(0x1aa)]==_0x3f59ee(0x121)?_0x3f59ee(0x23e):_0x3f59ee(0x1ec)+settings[_0x3f59ee(0x1aa)]+_0x3f59ee(0x145):'',tgBot[_0x3f59ee(0x142)](_0x32a738[_0x3f59ee(0x119)]['id'],_0x3d5224,{'parse_mode':_0x3f59ee(0x133)})[_0x3f59ee(0x196)](_0x3259b0=>{telegramError(_0x3259b0);});}),tgBot[_0x3e5565(0x26f)](/\/restart/,_0x1000cb=>{const _0x3e9f83=_0x3e5565;if(!validateTelegram(_0x1000cb))return;tgBot[_0x3e9f83(0x1d4)](_0x3e9f83(0x17e));const _0x141d79=getEnabledBots();if(_0x141d79['length']==0x0)tgBot[_0x3e9f83(0x142)](_0x1000cb['chat']['id'],_0x3e9f83(0x16b))[_0x3e9f83(0x196)](_0x2e857c=>{telegramError(_0x2e857c);});else{if(_0x141d79['length']>0x1)_0x141d79[_0x3e9f83(0x100)]({'botID':'all'});let _0x59e4e0=[],_0x2df483=[];const _0x2a4140=_0x141d79['length']%0x4==0x0||_0x141d79[_0x3e9f83(0x195)]%0x4==0x3||_0x141d79['length']%0x3==0x1?0x4:0x3;let _0x19fc07=0x0;_0x141d79['forEach']((_0x3d6150,_0xeb63ec)=>{const _0x3847d7=_0x3e9f83;if(_0xeb63ec%_0x2a4140==0x0)_0x2df483=[];_0x2df483[_0x3847d7(0x100)]({'text':_0x3d6150[_0x3847d7(0x1a7)]==_0x3847d7(0x121)?'All\x20bots':_0x3847d7(0xff)+_0x3d6150[_0x3847d7(0x1a7)],'callback_data':_0x3d6150[_0x3847d7(0x1a7)]}),_0xeb63ec%_0x2a4140==0x0&&(_0x59e4e0[_0x19fc07]=_0x2df483,_0x19fc07++);}),tgBot[_0x3e9f83(0x142)](_0x1000cb['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x59e4e0}})['catch'](_0x4e017e=>{telegramError(_0x4e017e);}),tgBot['on']('callback_query',async _0x1cbd3e=>{const _0x541c81=_0x3e9f83,_0x310a5d=_0x1cbd3e[_0x541c81(0x1d3)],_0x48546c=_0x1cbd3e[_0x541c81(0x245)];tgBot['answerCallbackQuery'](_0x1cbd3e['id'])[_0x541c81(0x1f4)](async()=>{const _0x84d5f3=_0x541c81;_0x310a5d=='all'?(tgBot[_0x84d5f3(0x142)](_0x48546c['chat']['id'],_0x84d5f3(0x20c))[_0x84d5f3(0x196)](_0x5e7975=>{telegramError(_0x5e7975);}),config[_0x84d5f3(0x240)](_0x56f0ff=>{restartBot(_0x56f0ff['botID']);})):(tgBot[_0x84d5f3(0x142)](_0x48546c[_0x84d5f3(0x119)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x310a5d)['catch'](_0x268211=>{telegramError(_0x268211);}),restartBot(_0x310a5d));}),tgBot[_0x541c81(0x1d4)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x15835a=>{const _0x2df2d2=_0x3e5565;if(!validateTelegram(_0x15835a))return;tgBot[_0x2df2d2(0x1d4)](_0x2df2d2(0x17e));const _0x598001=getDisabledBots();if(_0x598001[_0x2df2d2(0x195)]==0x0)tgBot[_0x2df2d2(0x142)](_0x15835a['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0x2df2d2(0x196)](_0x572dcc=>{telegramError(_0x572dcc);});else{if(_0x598001['length']>0x1)_0x598001[_0x2df2d2(0x100)]({'botID':_0x2df2d2(0x121)});let _0x5e87c1=[],_0x577d63=[];const _0x1b1099=_0x598001[_0x2df2d2(0x195)]%0x4==0x0||_0x598001[_0x2df2d2(0x195)]%0x4==0x3||_0x598001[_0x2df2d2(0x195)]%0x3==0x1?0x4:0x3;let _0x578f47=0x0;_0x598001[_0x2df2d2(0x240)]((_0x13d6ff,_0x506314)=>{const _0x5e495e=_0x2df2d2;if(_0x506314%_0x1b1099==0x0)_0x577d63=[];_0x577d63[_0x5e495e(0x100)]({'text':_0x13d6ff['botID']==_0x5e495e(0x121)?_0x5e495e(0x1cf):_0x5e495e(0xff)+_0x13d6ff[_0x5e495e(0x1a7)],'callback_data':_0x13d6ff[_0x5e495e(0x1a7)]}),_0x506314%_0x1b1099==0x0&&(_0x5e87c1[_0x578f47]=_0x577d63,_0x578f47++);}),tgBot['sendMessage'](_0x15835a[_0x2df2d2(0x119)]['id'],_0x2df2d2(0x183),{'reply_markup':{'inline_keyboard':_0x5e87c1}})[_0x2df2d2(0x196)](_0x45dec1=>{telegramError(_0x45dec1);}),tgBot['on'](_0x2df2d2(0x17e),async _0x367517=>{const _0x4af2e1=_0x2df2d2,_0x5f3d51=_0x367517[_0x4af2e1(0x1d3)],_0x2dc985=_0x367517[_0x4af2e1(0x245)];tgBot['answerCallbackQuery'](_0x367517['id'])['then'](async()=>{const _0x74a037=_0x4af2e1;_0x5f3d51==_0x74a037(0x121)?(tgBot[_0x74a037(0x142)](_0x2dc985[_0x74a037(0x119)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x74a037(0x196)](_0x2195d7=>{telegramError(_0x2195d7);}),_0x598001[_0x74a037(0x240)](_0x300d40=>{const _0x508b16=_0x74a037;if(_0x300d40[_0x508b16(0x1a7)]!=_0x508b16(0x121))toggleBot(_0x300d40[_0x508b16(0x1a7)],toggleStatus(_0x300d40['botID']),_0x508b16(0x22e));})):(tgBot[_0x74a037(0x142)](_0x2dc985[_0x74a037(0x119)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5f3d51)[_0x74a037(0x196)](_0x30f2a9=>{telegramError(_0x30f2a9);}),toggleBot(_0x5f3d51,toggleStatus(_0x5f3d51),'stopped'));}),tgBot[_0x4af2e1(0x1d4)](_0x4af2e1(0x17e));});}}),tgBot[_0x3e5565(0x26f)](/\/off/,_0x4f285e=>{const _0x2946cb=_0x3e5565;if(!validateTelegram(_0x4f285e))return;tgBot[_0x2946cb(0x1d4)]('callback_query');const _0x345baa=getEnabledBots();if(_0x345baa[_0x2946cb(0x195)]==0x0)tgBot[_0x2946cb(0x142)](_0x4f285e[_0x2946cb(0x119)]['id'],_0x2946cb(0x16b))[_0x2946cb(0x196)](_0x173a58=>{telegramError(_0x173a58);});else{if(_0x345baa[_0x2946cb(0x195)]>0x1)_0x345baa[_0x2946cb(0x100)]({'botID':_0x2946cb(0x121)});let _0x31a646=[],_0x466884=[];const _0x2b6f01=_0x345baa[_0x2946cb(0x195)]%0x4==0x0||_0x345baa[_0x2946cb(0x195)]%0x4==0x3||_0x345baa[_0x2946cb(0x195)]%0x3==0x1?0x4:0x3;let _0x2aa4c4=0x0;_0x345baa[_0x2946cb(0x240)]((_0x257035,_0x411f11)=>{const _0x5ed522=_0x2946cb;if(_0x411f11%_0x2b6f01==0x0)_0x466884=[];_0x466884[_0x5ed522(0x100)]({'text':_0x257035[_0x5ed522(0x1a7)]==_0x5ed522(0x121)?_0x5ed522(0x1cf):_0x5ed522(0xff)+_0x257035['botID'],'callback_data':_0x257035[_0x5ed522(0x1a7)]}),_0x411f11%_0x2b6f01==0x0&&(_0x31a646[_0x2aa4c4]=_0x466884,_0x2aa4c4++);}),tgBot[_0x2946cb(0x142)](_0x4f285e[_0x2946cb(0x119)]['id'],_0x2946cb(0x1db),{'reply_markup':{'inline_keyboard':_0x31a646}})['catch'](_0x5129cc=>{telegramError(_0x5129cc);}),tgBot['on'](_0x2946cb(0x17e),async _0x5c263b=>{const _0x6bb162=_0x2946cb,_0x1cd5e9=_0x5c263b[_0x6bb162(0x1d3)],_0x3fb5b7=_0x5c263b[_0x6bb162(0x245)];tgBot[_0x6bb162(0x120)](_0x5c263b['id'])['then'](async()=>{const _0x43beca=_0x6bb162;_0x1cd5e9=='all'?(tgBot[_0x43beca(0x142)](_0x3fb5b7['chat']['id'],_0x43beca(0x16a))['catch'](_0x353b05=>{telegramError(_0x353b05);}),_0x345baa['forEach'](_0x4dacce=>{const _0x28b731=_0x43beca;if(_0x4dacce[_0x28b731(0x1a7)]!=_0x28b731(0x121))toggleBot(_0x4dacce[_0x28b731(0x1a7)],toggleStatus(_0x4dacce[_0x28b731(0x1a7)]),_0x28b731(0x22e));})):(tgBot['sendMessage'](_0x3fb5b7['chat']['id'],_0x43beca(0x168)+_0x1cd5e9)['catch'](_0x45efcf=>{telegramError(_0x45efcf);}),toggleBot(_0x1cd5e9,toggleStatus(_0x1cd5e9),'stopped'));}),tgBot['removeListener'](_0x6bb162(0x17e));});}}),tgBot[_0x3e5565(0x26f)](/\/portfolio/,_0x46b8a4=>{const _0x53b25b=_0x3e5565;if(!validateTelegram(_0x46b8a4))return;tgBot[_0x53b25b(0x1d4)]('callback_query');const _0x2ac65a=getEnabledBots();if(_0x2ac65a[_0x53b25b(0x195)]==0x0)tgBot[_0x53b25b(0x142)](_0x46b8a4['chat']['id'],_0x53b25b(0x16b))[_0x53b25b(0x196)](_0x1d5565=>{telegramError(_0x1d5565);});else{if(_0x2ac65a[_0x53b25b(0x195)]>0x1){let _0x337d43=[],_0x3a9c79=[];const _0xee230b=_0x2ac65a[_0x53b25b(0x195)]%0x4==0x0||_0x2ac65a[_0x53b25b(0x195)]%0x4==0x3||_0x2ac65a[_0x53b25b(0x195)]%0x3==0x1?0x4:0x3;let _0x5cc346=0x0;_0x2ac65a[_0x53b25b(0x240)]((_0x2d2b30,_0x50af36)=>{const _0x5b0914=_0x53b25b;if(_0x50af36%_0xee230b==0x0)_0x3a9c79=[];_0x3a9c79[_0x5b0914(0x100)]({'text':_0x5b0914(0xff)+_0x2d2b30['botID'],'callback_data':_0x2d2b30[_0x5b0914(0x1a7)]}),_0x50af36%_0xee230b==0x0&&(_0x337d43[_0x5cc346]=_0x3a9c79,_0x5cc346++);}),tgBot['sendMessage'](_0x46b8a4[_0x53b25b(0x119)]['id'],_0x53b25b(0x19d),{'reply_markup':{'inline_keyboard':_0x337d43}})[_0x53b25b(0x196)](_0x261241=>{telegramError(_0x261241);}),tgBot['on']('callback_query',async _0x202e3e=>{const _0x1a5587=_0x53b25b,_0x47beff=_0x202e3e[_0x1a5587(0x1d3)],_0x5a9369=_0x202e3e[_0x1a5587(0x245)];tgBot['answerCallbackQuery'](_0x202e3e['id'])[_0x1a5587(0x1f4)](async()=>{const _0x18940d=_0x1a5587;if(pid[_0x47beff])pid[_0x47beff][_0x18940d(0x1b1)]({'function':_0x18940d(0x111),'args':null});}),tgBot[_0x1a5587(0x1d4)](_0x1a5587(0x17e));});}else{const _0x32a07e=_0x2ac65a[0x0][_0x53b25b(0x1a7)];if(pid[_0x32a07e])pid[_0x32a07e][_0x53b25b(0x1b1)]({'function':_0x53b25b(0x111),'args':null});}}}),tgBot['onText'](/\/update/,async _0x2899b8=>{const _0x400925=_0x3e5565;if(!validateTelegram(_0x2899b8))return;tgBot[_0x400925(0x1d4)](_0x400925(0x17e)),await getMessages();if(!updateAvailable)tgBot[_0x400925(0x142)](_0x2899b8[_0x400925(0x119)]['id'],_0x400925(0x264))['catch'](_0x5f0268=>{telegramError(_0x5f0268);});else!validInstallation?tgBot[_0x400925(0x142)](_0x2899b8[_0x400925(0x119)]['id'],_0x400925(0x1eb))[_0x400925(0x196)](_0x3caf43=>{telegramError(_0x3caf43);}):(tgBot[_0x400925(0x142)](_0x2899b8[_0x400925(0x119)]['id'],_0x400925(0x1f5),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x400925(0x196)](_0x3fde74=>{telegramError(_0x3fde74);}),tgBot['on']('callback_query',async _0x5a5cbd=>{const _0x20a005=_0x400925,_0x57c0b1=_0x5a5cbd[_0x20a005(0x1d3)],_0x2f0ed3=_0x5a5cbd[_0x20a005(0x245)];tgBot[_0x20a005(0x120)](_0x5a5cbd['id'])[_0x20a005(0x1f4)](async()=>{const _0x54052b=_0x20a005;_0x57c0b1==_0x54052b(0x1ab)&&(await tgBot['sendMessage'](_0x2f0ed3[_0x54052b(0x119)]['id'],_0x54052b(0x1dd))['catch'](_0x85866e=>{telegramError(_0x85866e);}),updateBB());_0x57c0b1=='no'&&await tgBot[_0x54052b(0x142)](_0x2f0ed3[_0x54052b(0x119)]['id'],_0x54052b(0x20e))['catch'](_0x715343=>{telegramError(_0x715343);});if(!settings[_0x54052b(0x203)])tgBot[_0x54052b(0x142)](_0x2f0ed3['chat']['id'],_0x54052b(0x1bf))[_0x54052b(0x196)](_0x5dcb0f=>{telegramError(_0x5dcb0f);});}),tgBot[_0x20a005(0x1d4)](_0x20a005(0x17e));}));}),tgBot[_0x3e5565(0x26f)](/\/toggle/,_0x1773ff=>{const _0x3496f9=_0x3e5565;if(!validateTelegram(_0x1773ff))return;tgBot[_0x3496f9(0x1d4)](_0x3496f9(0x17e));const _0x4f42d9=getBotsWithMode();if(_0x4f42d9[_0x3496f9(0x195)]==0x0)tgBot[_0x3496f9(0x142)](_0x1773ff['chat']['id'],_0x3496f9(0x16b))['catch'](_0x451bea=>{telegramError(_0x451bea);});else{let _0x181d3d=[],_0xb5810b=[];const _0x4b0c63=0x2;let _0x26bf1c=0x0;_0x4f42d9[_0x3496f9(0x240)]((_0xb403a4,_0x19502d)=>{const _0x39e3e7=_0x3496f9;if(_0x19502d%_0x4b0c63==0x0)_0xb5810b=[];_0xb5810b[_0x39e3e7(0x100)]({'text':'Bot\x20'+_0xb403a4[_0x39e3e7(0x1a7)]+'\x20('+_0xb403a4[_0x39e3e7(0x141)]+')','callback_data':_0xb403a4[_0x39e3e7(0x1a7)]}),_0x19502d%_0x4b0c63==0x0&&(_0x181d3d[_0x26bf1c]=_0xb5810b,_0x26bf1c++);}),tgBot[_0x3496f9(0x142)](_0x1773ff[_0x3496f9(0x119)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x181d3d}})[_0x3496f9(0x196)](_0x3698a0=>{telegramError(_0x3698a0);}),tgBot['on'](_0x3496f9(0x17e),async _0x3bcb6b=>{const _0x3f7a6f=_0x3496f9,_0x50501a=_0x3bcb6b[_0x3f7a6f(0x1d3)],_0x576dee=_0x3bcb6b[_0x3f7a6f(0x245)];tgBot[_0x3f7a6f(0x120)](_0x3bcb6b['id'])[_0x3f7a6f(0x1f4)](async()=>{const _0x19b50f=_0x3f7a6f,_0x48216b=_0x4f42d9['find'](_0x20680f=>_0x20680f['botID']==_0x50501a),_0x19d44b=_0x48216b[_0x19b50f(0x141)]==_0x19b50f(0x1e8)?_0x19b50f(0x265):'auto';tgBot[_0x19b50f(0x142)](_0x576dee[_0x19b50f(0x119)]['id'],_0x19b50f(0x1ed)+_0x50501a+_0x19b50f(0x102)+_0x19d44b+_0x19b50f(0x21b))[_0x19b50f(0x196)](_0x31df30=>{telegramError(_0x31df30);}),toggleBotMode(_0x50501a);}),tgBot[_0x3f7a6f(0x1d4)]('callback_query');});}}),tgBot['onText'](/\/names/,_0x12068a=>{const _0x24c632=_0x3e5565;if(!validateTelegram(_0x12068a))return;let _0x49fc96='';config[_0x24c632(0x240)](_0x11b22a=>{const _0x405b1e=_0x24c632;_0x49fc96+=_0x405b1e(0xff)+_0x11b22a['botID']+':\x20'+_0x11b22a[_0x405b1e(0x175)]+'\x0a';}),tgBot['sendMessage'](_0x12068a['chat']['id'],_0x49fc96,{'parse_mode':_0x24c632(0x133)})['catch'](_0x352553=>{telegramError(_0x352553);});}),tgBot[_0x3e5565(0x26f)](/\/disable/,_0x14dbff=>{const _0x1658f0=_0x3e5565;if(!validateTelegram(_0x14dbff))return;tgBot[_0x1658f0(0x142)](_0x14dbff['chat']['id'],'Notifications\x20disabled')[_0x1658f0(0x196)](_0x34147c=>{telegramError(_0x34147c);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x3e5565(0x26f)](/\/help/,_0xcaf9fd=>{const _0x3ba1f1=_0x3e5565;if(!validateTelegram(_0xcaf9fd))return;tgBot[_0x3ba1f1(0x142)](_0xcaf9fd['chat']['id'],_0x28e317)[_0x3ba1f1(0x196)](_0x53f12a=>{telegramError(_0x53f12a);});}),tgBot['on'](_0x3e5565(0x1cc),_0x275f87=>{const _0x34619f=_0x3e5565;_0x275f87[_0x34619f(0x180)]()['includes'](_0x34619f(0x164))&&(logging(_0x34619f(0x177)),tgBot[_0x34619f(0x18b)](),tgBot=null,io['to'](_0x34619f(0x157))[_0x34619f(0x19f)](_0x34619f(0x13c),'Invalid\x20Telegram\x20token'));}),process[_0x3e5565(0x106)](_0x3e5565(0x10d),()=>{const _0x4fbaf7=_0x3e5565;if(tgBot)tgBot[_0x4fbaf7(0x18b)]();process['exit'](0x1);}),process['once'](_0x3e5565(0x1a1),()=>{const _0x3815c7=_0x3e5565;if(tgBot)tgBot[_0x3815c7(0x18b)]();process[_0x3815c7(0x103)](0x1);});}}function disableTelegram(){const _0x5e2adb=_0x235888;tgBot&&(tgBot[_0x5e2adb(0x18b)](),tgBot=null);}function sendTelegram(_0x516244,_0x4106eb){const _0x36bb5b=_0x235888;if(settings['telegramEnabled']){if(settings[_0x36bb5b(0x1aa)]==_0x36bb5b(0x121)||(_0x4106eb[_0x36bb5b(0x222)]=='error'||_0x4106eb[_0x36bb5b(0x222)]==_0x36bb5b(0x1d7))&&settings[_0x36bb5b(0x1aa)]==_0x36bb5b(0x1c1)||_0x4106eb[_0x36bb5b(0x222)]==_0x36bb5b(0x172)&&settings[_0x36bb5b(0x1aa)]=='orders'){if(tgBot&&settings[_0x36bb5b(0x203)]){if(_0x4106eb[_0x36bb5b(0x230)])tgBot[_0x36bb5b(0x142)](settings[_0x36bb5b(0x203)],_0x4106eb[_0x36bb5b(0x175)]+'\x20>\x20'+_0x4106eb[_0x36bb5b(0x1a5)])[_0x36bb5b(0x196)](_0x37fb0d=>{telegramError(_0x37fb0d);});else tgBot[_0x36bb5b(0x142)](settings[_0x36bb5b(0x203)],_0x36bb5b(0xff)+_0x516244+_0x36bb5b(0x238)+_0x4106eb['event'])[_0x36bb5b(0x196)](_0x4bc1ad=>{telegramError(_0x4bc1ad);});}}}}async function sendTelegramMsg(_0x57a892,_0xa089fb=_0x235888(0x133)){const _0x5842c7=_0x235888;return settings['telegramEnabled']&&tgBot&&settings[_0x5842c7(0x203)]?(await tgBot['sendMessage'](settings[_0x5842c7(0x203)],_0x57a892,{'parse_mode':_0xa089fb})[_0x5842c7(0x196)](_0x5008a6=>{telegramError(_0x5008a6);}),!![]):![];}function _0x2b26(_0x490a06,_0x46995c){const _0x107343=_0xffcc();return _0x2b26=function(_0x142ca1,_0x185d59){_0x142ca1=_0x142ca1-0xf6;let _0xffcc22=_0x107343[_0x142ca1];return _0xffcc22;},_0x2b26(_0x490a06,_0x46995c);}function getDeviceWithIp(_0x3d018d){return devices['find'](_0x1257b3=>_0x1257b3['ip']===_0x3d018d);}function temporaryAccess2FA(_0x445aeb,_0x43f9d9){const _0x2b6c02=_0x235888;let _0x116162=new Date(),_0x433748=![];if(lastIpApproval){if(_0x116162-lastIpApproval<0x1388)_0x433748=!![];}lastIpApproval=new Date();if(_0x433748)return;tgBot&&settings[_0x2b6c02(0x203)]&&(tgBot['removeListener'](_0x2b6c02(0x17e)),tgBot[_0x2b6c02(0x142)](settings['telegramChatId'],_0x2b6c02(0x14f)+normalizeIP(_0x43f9d9)[_0x2b6c02(0x174)]+_0x2b6c02(0x15f),{'parse_mode':_0x2b6c02(0x133),'reply_markup':{'inline_keyboard':[[{'text':_0x2b6c02(0x270),'callback_data':'5'},{'text':_0x2b6c02(0x247),'callback_data':'15'},{'text':_0x2b6c02(0x24a),'callback_data':'30'},{'text':'reject','callback_data':_0x2b6c02(0x146)}]]}})[_0x2b6c02(0x196)](_0x5d0662=>{telegramError(_0x5d0662);}),tgBot['on'](_0x2b6c02(0x17e),async _0x43c466=>{const _0x38f977=_0x2b6c02,_0x1e1cb3=_0x43c466[_0x38f977(0x1d3)],_0x566eb2=_0x43c466[_0x38f977(0x245)];tgBot[_0x38f977(0x120)](_0x43c466['id'])[_0x38f977(0x1f4)](async()=>{const _0x4919cc=_0x38f977;devices[_0x445aeb]['telegramIpApproval']={'clientip':_0x43f9d9,'timestamp':new Date()[_0x4919cc(0x235)](),'expiry':_0x1e1cb3},_0x1e1cb3!=_0x4919cc(0x146)?(await tgBot[_0x4919cc(0x142)](_0x566eb2[_0x4919cc(0x119)]['id'],_0x4919cc(0x236)+_0x1e1cb3+_0x4919cc(0x17c),{'parse_mode':'HTML'})['catch'](_0xb8ebe1=>{telegramError(_0xb8ebe1);}),io['to'](_0x445aeb)[_0x4919cc(0x19f)](_0x4919cc(0x19c),{'access':{'allow':![],'reason':_0x4919cc(0x14b),'token':null}})):(await tgBot['sendMessage'](_0x566eb2['chat']['id'],_0x4919cc(0x227))['catch'](_0x27a814=>{telegramError(_0x27a814);}),io['to'](_0x445aeb)[_0x4919cc(0x19f)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x38f977(0x17e));}));}function loginAccess2FA(_0x3f5c08,_0x26fa4b){const _0x2a4cc2=_0x235888;tgBot&&settings[_0x2a4cc2(0x203)]&&(tgBot[_0x2a4cc2(0x1d4)](_0x2a4cc2(0x17e)),tgBot['sendMessage'](settings[_0x2a4cc2(0x203)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x26fa4b)[_0x2a4cc2(0x174)]+_0x2a4cc2(0x15f),{'parse_mode':_0x2a4cc2(0x133),'reply_markup':{'inline_keyboard':[[{'text':_0x2a4cc2(0x1c3),'callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x2a4cc2(0x196)](_0x397d85=>{telegramError(_0x397d85);}),tgBot['on'](_0x2a4cc2(0x17e),async _0xe9219c=>{const _0x4eb6c1=_0x2a4cc2,_0x2d101b=_0xe9219c[_0x4eb6c1(0x1d3)],_0x190df3=_0xe9219c['message'];tgBot[_0x4eb6c1(0x120)](_0xe9219c['id'])[_0x4eb6c1(0x1f4)](async()=>{const _0x18af63=_0x4eb6c1;devices[_0x3f5c08][_0x18af63(0x25e)]={'clientip':_0x26fa4b,'timestamp':new Date()[_0x18af63(0x235)](),'expiry':_0x2d101b},_0x2d101b!=_0x18af63(0x146)?(await tgBot[_0x18af63(0x142)](_0x190df3[_0x18af63(0x119)]['id'],_0x18af63(0x169),{'parse_mode':_0x18af63(0x133)})[_0x18af63(0x196)](_0x5e6a95=>{telegramError(_0x5e6a95);}),io['to'](_0x3f5c08)[_0x18af63(0x19f)](_0x18af63(0x19c),{'access':{'allow':![],'reason':_0x18af63(0x14b),'token':null}})):(await tgBot[_0x18af63(0x142)](_0x190df3[_0x18af63(0x119)]['id'],'Login\x20rejected')['catch'](_0x4b8f51=>{telegramError(_0x4b8f51);}),io['to'](_0x3f5c08)[_0x18af63(0x19f)](_0x18af63(0x19c),{'access':{'allow':![],'reason':_0x18af63(0x1d0),'token':null}}));}),tgBot[_0x4eb6c1(0x1d4)](_0x4eb6c1(0x17e));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x19c817=_0x235888;return dbConfig[_0x19c817(0x1b2)]('bots')['sortBy']('botID')[_0x19c817(0x115)]({'status':_0x19c817(0x117)})[_0x19c817(0x153)]()||[];}function getDisabledBots(){const _0x57083b=_0x235888;return dbConfig[_0x57083b(0x1b2)](_0x57083b(0x185))['sortBy']('botID')[_0x57083b(0x115)]({'status':_0x57083b(0x1b4)})['value']()||[];}function getBotsWithMode(){const _0x4a12a6=_0x235888,_0x48d47d=dbConfig[_0x4a12a6(0x1b2)](_0x4a12a6(0x185))['sortBy'](_0x4a12a6(0x1a7))[_0x4a12a6(0x153)]()||[];return _0x48d47d[_0x4a12a6(0x240)](_0x5d479b=>{const _0x3b50ad=_0x4a12a6,_0x5f971b=configpath+'bot-'+_0x5d479b[_0x3b50ad(0x1a7)]+_0x3b50ad(0x1f9),_0x1939af=fs[_0x3b50ad(0x209)](_0x5f971b);if(_0x1939af){const _0x484d37=fs[_0x3b50ad(0x12f)](_0x5f971b);try{const _0x1f2a73=JSON[_0x3b50ad(0x26e)](_0x484d37),_0x486c02=_0x1f2a73?_0x1f2a73[_0x3b50ad(0x18d)][0x0]['headless']:![];_0x5d479b[_0x3b50ad(0x141)]=_0x486c02?_0x3b50ad(0x1e8):_0x3b50ad(0x265);}catch(_0x404e9a){_0x5d479b[_0x3b50ad(0x141)]=_0x3b50ad(0x265);}}else _0x5d479b['mode']=_0x3b50ad(0x265);}),_0x48d47d;}function getSettings(){const _0x3c3eb1=_0x235888;let _0x2e7c51=dbSettings[_0x3c3eb1(0x1b2)](_0x3c3eb1(0x225))['value']();if(!_0x2e7c51){const _0x450c4b=crypto[_0x3c3eb1(0x1e6)]();mixpanel['alias'](_0x450c4b),_0x2e7c51={'timeshift':0x0,'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3c3eb1(0x208),'userid':_0x450c4b},dbSettings[_0x3c3eb1(0x1b2)](_0x3c3eb1(0x225))[_0x3c3eb1(0x100)](_0x2e7c51)[_0x3c3eb1(0x16e)]();}return _0x2e7c51;}function getSecure(){const _0x5793be=_0x235888;return dbSecure[_0x5793be(0x1b2)](_0x5793be(0x261))[_0x5793be(0x153)]()||{};}function getBlacklist(){const _0x1a0097=_0x235888;return dbSecure[_0x1a0097(0x1b2)]('blacklist')['value']()||[];}function broadcastToBots(_0x25792f,_0x3db76f){config['forEach'](_0xeda6ba=>{const _0xef39b7=_0x2b26;if(_0xeda6ba['status']==_0xef39b7(0x117)&&_0xeda6ba[_0xef39b7(0x1ea)]==_0xef39b7(0x1bb)){if(pid[_0xeda6ba[_0xef39b7(0x1a7)]])pid[_0xeda6ba[_0xef39b7(0x1a7)]][_0xef39b7(0x1b1)]({[_0x25792f]:_0x3db76f});}});}function storeSettings(_0x2c26ab,_0x207a10=![]){const _0x3e63cf=_0x235888;_0x2c26ab={...settings,..._0x2c26ab};if(_0x207a10&&_0x2c26ab[_0x3e63cf(0x11e)]!=_0x3e63cf(0x214)&&_0x2c26ab['bbPassword']!=''){const _0x17cbf5=crypt['decrypt'](secure['privateKey'],_0x2c26ab['bbPassword'])['message'][_0x3e63cf(0x139)]('@')[0x0],_0x44e0f5=bcrypt[_0x3e63cf(0x218)](_0x17cbf5,saltRounds);_0x2c26ab={..._0x2c26ab,'bbPassword':_0x44e0f5};}if(_0x207a10&&_0x2c26ab[_0x3e63cf(0x241)]!='************'&&_0x2c26ab['telegramToken']!=''){const _0x91f279=crypt[_0x3e63cf(0x223)](secure['privateKey'],_0x2c26ab[_0x3e63cf(0x241)])[_0x3e63cf(0x245)][_0x3e63cf(0x139)]('@')[0x0];_0x2c26ab={..._0x2c26ab,'telegramToken':_0x91f279};}const _0xa5f021=_0x2c26ab['telegramToken']!=_0x3e63cf(0x214)&&_0x2c26ab['telegramToken']!=settings[_0x3e63cf(0x241)]||_0x2c26ab['telegramUsername']!=settings[_0x3e63cf(0x13e)],_0x4b53ca=_0x2c26ab[_0x3e63cf(0x241)]==''||_0x2c26ab[_0x3e63cf(0x13e)]=='';if(_0xa5f021)_0x2c26ab[_0x3e63cf(0x1aa)]=_0x3e63cf(0x121);for(const [_0x3df697,_0xf54c56]of Object[_0x3e63cf(0x1c4)](_0x2c26ab)){if(_0x3df697==_0x3e63cf(0x241)&&_0xf54c56==_0x3e63cf(0x214)){_0x2c26ab['telegramToken']=settings['telegramToken'];continue;};if(_0x3df697==_0x3e63cf(0x11e)&&_0xf54c56==_0x3e63cf(0x214)){_0x2c26ab[_0x3e63cf(0x11e)]=settings[_0x3e63cf(0x11e)];continue;};dbSettings[_0x3e63cf(0x21f)](_0x3e63cf(0x187)+_0x3df697,_0xf54c56)[_0x3e63cf(0x16e)]();}settings=_0x2c26ab,io['to'](_0x3e63cf(0x157))[_0x3e63cf(0x19f)]('settings',cleanSettings()),broadcastToBots(_0x3e63cf(0x1ae),settings[_0x3e63cf(0x1ae)]);if(_0xa5f021&&!_0x4b53ca)initTelegram();if(_0xa5f021&&_0x4b53ca)disableTelegram();getAllClients()[_0x3e63cf(0x240)](_0x29fb2a=>{getSocket(_0x29fb2a['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x5730c2,_0x5d9e78){const _0x1b6725=_0x235888;dbSettings[_0x1b6725(0x21f)](_0x1b6725(0x187)+_0x5730c2,_0x5d9e78)['write'](),settings=getSettings(),io['to'](_0x1b6725(0x157))[_0x1b6725(0x19f)](_0x1b6725(0x225),cleanSettings());}function storeSecure(_0x58df23){const _0x348e2a=_0x235888;dbSecure[_0x348e2a(0x1b2)](_0x348e2a(0x261))['push'](_0x58df23)[_0x348e2a(0x16e)](),secure=_0x58df23;}function addBlacklist(_0x423fe0){const _0x273647=_0x235888;cleanBlacklist();let _0x487501;devices[_0x423fe0][_0x273647(0xf6)]?_0x487501=Math[_0x273647(0x14c)](devices[_0x423fe0][_0x273647(0xf6)][_0x273647(0x188)],loginExpiry):_0x487501=loginExpiry,dbSecure['get'](_0x273647(0x17d))[_0x273647(0x100)]({'expiry':new Date()['getTime']()+_0x487501*0x3c*0x3e8,'token':devices[_0x423fe0][_0x273647(0x234)][_0x273647(0xf8)]})['write'](),blacklist=dbSecure['get']('blacklist')[_0x273647(0x153)]();}function cleanBlacklist(){const _0x3bc8f5=_0x235888;let _0x4ab7c8=dbSecure[_0x3bc8f5(0x1b2)](_0x3bc8f5(0x17d))['cloneDeep']()[_0x3bc8f5(0x153)](),_0x316f2c=new Date()['getTime']();_0x4ab7c8[_0x3bc8f5(0x240)](_0x58c208=>{const _0x2bba61=_0x3bc8f5;_0x58c208[_0x2bba61(0x188)]<_0x316f2c&&dbSecure[_0x2bba61(0x1b2)](_0x2bba61(0x17d))[_0x2bba61(0x151)]({'expiry':_0x58c208[_0x2bba61(0x188)]})[_0x2bba61(0x16e)]();});}function initStates(){const _0x16d998=_0x235888;let _0x16e153=getConfiguration();_0x16e153[_0x16d998(0x240)](_0x5023bd=>{const _0x580b64=_0x16d998;_0x5023bd['live']=_0x580b64(0x22e);}),storeConfiguration(_0x16e153);}function onKeys(){const _0x4d6583=new RSA();return new Promise(_0x4e1f35=>{const _0x5a55d8=_0x2b26;_0x4d6583[_0x5a55d8(0x129)]()[_0x5a55d8(0x1f4)](_0x5da14a=>{_0x4e1f35(_0x5da14a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x28f934=_0x235888;let _0x1ba3e8=getSettings(),_0x29c3c6=![];!_0x1ba3e8[_0x28f934(0x1e2)]('lastmsgtelegram')&&(_0x1ba3e8['lastmsgtelegram']=0x0,_0x29c3c6=!![]);!_0x1ba3e8[_0x28f934(0x1e2)](_0x28f934(0x269))&&(_0x1ba3e8[_0x28f934(0x269)]=0x0,_0x29c3c6=!![]);!_0x1ba3e8['hasOwnProperty'](_0x28f934(0x1c6))&&(_0x1ba3e8[_0x28f934(0x1c6)]=_0x28f934(0x208),_0x29c3c6=!![]);!_0x1ba3e8[_0x28f934(0x1e2)](_0x28f934(0x216))&&(_0x1ba3e8[_0x28f934(0x216)]=uuidRandom(),mixpanel[_0x28f934(0x23f)](_0x1ba3e8['userid']),_0x29c3c6=!![]);if(_0x29c3c6)storeSettings(_0x1ba3e8);}function storeConfiguration(_0x105ced){const _0x4c6a7f=_0x235888;dbConfig[_0x4c6a7f(0x1b2)](_0x4c6a7f(0x185))[_0x4c6a7f(0x151)]()['write'](),_0x105ced[_0x4c6a7f(0x240)](_0x4cbc90=>{const _0x5876c6=_0x4c6a7f;delete _0x4cbc90[_0x5876c6(0x141)];}),dbConfig[_0x4c6a7f(0x1b2)](_0x4c6a7f(0x185))[_0x4c6a7f(0x100)](..._0x105ced)[_0x4c6a7f(0x16e)](),config=_0x105ced;}function resetPassword(){const _0xa3dc92=_0x235888;tgBot&&settings[_0xa3dc92(0x203)]&&(tgBot[_0xa3dc92(0x1d4)](_0xa3dc92(0x17e)),tgBot[_0xa3dc92(0x142)](settings[_0xa3dc92(0x203)],_0xa3dc92(0x107),{'parse_mode':_0xa3dc92(0x133),'reply_markup':{'inline_keyboard':[[{'text':_0xa3dc92(0x1ab),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0xa3dc92(0x196)](_0x4ffe41=>{telegramError(_0x4ffe41);}),tgBot['on']('callback_query',async _0x4c3a3f=>{const _0x5b5e07=_0xa3dc92,_0xf119fc=_0x4c3a3f[_0x5b5e07(0x1d3)],_0x43eb03=_0x4c3a3f[_0x5b5e07(0x245)];tgBot['answerCallbackQuery'](_0x4c3a3f['id'])[_0x5b5e07(0x1f4)](async()=>{const _0x2441e4=_0x5b5e07;if(_0xf119fc!='no'){const _0xe68565=0xf,_0x754eb4=_0x2441e4(0x15c),_0x6f1269=Array['from'](crypto[_0x2441e4(0x233)](new Uint32Array(_0xe68565)))['map'](_0x2c42c0=>_0x754eb4[_0x2c42c0%_0x754eb4[_0x2441e4(0x195)]])[_0x2441e4(0x143)](''),_0x1f4513=bcrypt[_0x2441e4(0x218)](_0x6f1269,saltRounds);storeSettings({'bbPassword':_0x1f4513}),await tgBot[_0x2441e4(0x142)](_0x43eb03[_0x2441e4(0x119)]['id'],_0x2441e4(0x112)+_0x6f1269,{'parse_mode':_0x2441e4(0x133)})[_0x2441e4(0x196)](_0x1a29a3=>{telegramError(_0x1a29a3);});}else await tgBot[_0x2441e4(0x142)](_0x43eb03[_0x2441e4(0x119)]['id'],_0x2441e4(0x1fa))['catch'](_0x3f8457=>{telegramError(_0x3f8457);});}),tgBot[_0x5b5e07(0x1d4)]('callback_query');}));}function logging(_0xde0d72){const _0x3edff6=_0x235888;console[_0x3edff6(0x1c8)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0xde0d72);if(tgBot&&settings[_0x3edff6(0x203)]&&settings['telegramEvents']!=_0x3edff6(0x1e0))tgBot[_0x3edff6(0x142)](settings['telegramChatId'],_0x3edff6(0x221)+_0xde0d72)[_0x3edff6(0x196)](_0x3c5b3c=>{telegramError(_0x3c5b3c);});}function getServerTime(){const _0x54d8c3=_0x235888,_0x51edb5=new Date();return _0x51edb5[_0x54d8c3(0x256)]()+'/'+(_0x51edb5[_0x54d8c3(0x1e1)]()+0x1)[_0x54d8c3(0x180)]()['padStart'](0x2,'0')+'/'+_0x51edb5[_0x54d8c3(0x1c0)]()[_0x54d8c3(0x180)]()[_0x54d8c3(0x254)](0x2,'0')+'\x20'+_0x51edb5['getHours']()[_0x54d8c3(0x180)]()[_0x54d8c3(0x254)](0x2,'0')+':'+_0x51edb5[_0x54d8c3(0x10b)]()['toString']()[_0x54d8c3(0x254)](0x2,'0')+':'+_0x51edb5[_0x54d8c3(0x178)]()['toString']()[_0x54d8c3(0x254)](0x2,'0');}function getTimeStamp(){const _0x21246f=_0x235888,_0x366ea1=shiftedTime();return _0x366ea1['getFullYear']()+'/'+(_0x366ea1[_0x21246f(0x1e1)]()+0x1)[_0x21246f(0x180)]()[_0x21246f(0x254)](0x2,'0')+'/'+_0x366ea1['getDate']()[_0x21246f(0x180)]()[_0x21246f(0x254)](0x2,'0')+'\x20'+_0x366ea1['getHours']()['toString']()[_0x21246f(0x254)](0x2,'0')+':'+_0x366ea1[_0x21246f(0x10b)]()['toString']()[_0x21246f(0x254)](0x2,'0')+':'+_0x366ea1[_0x21246f(0x178)]()[_0x21246f(0x180)]()[_0x21246f(0x254)](0x2,'0');}function shiftedTime(){const _0x2066e6=_0x235888,_0x2536e3=new Date();let _0x1cbf2a=_0x2536e3;if(settings[_0x2066e6(0x1ae)]&&settings[_0x2066e6(0x1ae)]!==0x0)_0x1cbf2a=fns['add'](_0x2536e3,{'hours':settings[_0x2066e6(0x1ae)]});return _0x1cbf2a;}function startScheduler(){const _0x64265a=_0x235888;let _0x1b3fe1=new Date()[_0x64265a(0x1fb)]();_0x1b3fe1==0x1&&backupConfigFiles();_0x1b3fe1==0x9&&triggerAnalytics();_0x1b3fe1%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5c6770=_0x235888;fs[_0x5c6770(0x1e4)](configpath,{'withFileTypes':!![]})['forEach'](_0x4953d7=>{const _0x5d2381=_0x5c6770;if(!_0x4953d7[_0x5d2381(0x22b)]())fs[_0x5d2381(0x19e)](configpath+_0x4953d7[_0x5d2381(0x26a)],configbackuppath+_0x4953d7[_0x5d2381(0x26a)]);});}async function getPublicIp(){const _0x55abda=_0x235888;try{const _0x123174=await axios['get'](_0x55abda(0x179));publicip=_0x123174[_0x55abda(0x1d3)]['ip'];}catch(_0x1a1b30){}}async function triggerAnalytics(_0x2575dd=![]){const _0x39179a=_0x235888;if(!publicip)await getPublicIp();const _0x5b7683=getBotsWithMode();let _0x1c60be=0x0;_0x5b7683[_0x39179a(0x240)](_0x20c3f5=>{const _0x5ab547=_0x39179a;if(_0x20c3f5[_0x5ab547(0x19c)]===_0x5ab547(0x117))_0x1c60be++;}),mixpanel[_0x39179a(0x22a)]('Server',{'distinct_id':settings[_0x39179a(0x216)],'ip':publicip,'version':serverversion,'numbots':_0x5b7683['length'],'numbotsenabled':_0x1c60be}),!_0x2575dd&&analytics[_0x39179a(0x19b)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}async function getMessages(){const _0x4788c5=_0x235888,_0x279ac2=_0x4788c5(0x23d),_0xae0630=new GraphQLClient(_0x279ac2),_0x4ef346={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x3b8460=serverversion[_0x4788c5(0x139)]('.'),_0x1a1fb8=_0x3b8460[0x0]+'.'+_0x3b8460[0x1],_0x47b328=Math[_0x4788c5(0x1ad)](settings[_0x4788c5(0x105)],settings['lastmsgemitted']),_0x46175d={'last':parseInt(_0x47b328),'bbm':_0x1a1fb8},_0x32cf03=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x408fd3;try{_0x408fd3=await _0xae0630['request'](_0x32cf03,_0x46175d,_0x4ef346);}catch(_0x29d317){}if(_0x408fd3&&_0x408fd3[_0x4788c5(0x193)]){let _0x73d713=settings[_0x4788c5(0x105)];for(const _0x474c5e of _0x408fd3['messages']){newMessages[_0x4788c5(0x100)](_0x474c5e);if(_0x474c5e[_0x4788c5(0x1d1)])updateSetting('latestversion',_0x474c5e[_0x4788c5(0x1d1)]);let _0x306f59=_0x474c5e['bbvNew']?serverversion>=_0x474c5e[_0x4788c5(0x1d1)]:![];if(!_0x306f59&&_0x474c5e[_0x4788c5(0xfc)]>_0x73d713){if(_0x474c5e[_0x4788c5(0x176)]===_0x4788c5(0x22c)||serverversion[_0x4788c5(0x189)](_0x474c5e[_0x4788c5(0x176)])){let _0x49f910=''+_0x474c5e[_0x4788c5(0x1df)]+'\x0a\x0a'+_0x474c5e[_0x4788c5(0x245)];const _0x21c53f=await sendTelegramMsg(toTelegramMarkdown(_0x49f910),_0x4788c5(0x18e));if(_0x21c53f)_0x73d713=_0x474c5e['number'];}}}updateAvailable=isNewerVersion(settings[_0x4788c5(0x1c6)],serverversion),updateSetting(_0x4788c5(0x105),_0x73d713),emitMessages();}}function emitMessages(){const _0x5327e5=_0x235888,_0x1531dd=settings[_0x5327e5(0x269)];let _0x5d1ab0=[];newMessages[_0x5327e5(0x240)](_0xc5b199=>{const _0xd9b0df=_0x5327e5;_0xc5b199['number']>_0x1531dd&&_0x5d1ab0[_0xd9b0df(0x100)](_0xc5b199);}),_0x5d1ab0[_0x5327e5(0x195)]>0x0&&getAllClients()['forEach'](_0x4fcac6=>{const _0x22d7f6=_0x5327e5;getSocket(_0x4fcac6['id'])['emit'](_0x22d7f6(0x245),_0x5d1ab0);});}function confirmMessage(_0x18ddab){updateSetting('lastmsgemitted',Number(_0x18ddab));}function isNewerVersion(_0x377d79,_0x15e427){const _0x4aeaf4=_0x235888,_0x14c450=_0x15e427['split']('.'),_0x5eac27=_0x377d79[_0x4aeaf4(0x139)]('.');for(var _0x2a47e3=0x0;_0x2a47e3<_0x5eac27['length'];_0x2a47e3++){const _0x856678=~~_0x5eac27[_0x2a47e3],_0x391786=~~_0x14c450[_0x2a47e3];if(_0x856678>_0x391786)return!![];if(_0x856678<_0x391786)return![];}return![];}function toTelegramMarkdown(_0x4f89cf){const _0x527b4d=_0x235888,_0x4f6419=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2da0f2=/\*{2}(.+?)\*{2}/gim;return _0x4f89cf=_0x4f89cf[_0x527b4d(0x22f)](_0x4f6419,_0x527b4d(0x20a))[_0x527b4d(0x22f)](_0x2da0f2,_0x527b4d(0x1c5)),_0x4f89cf;}function validateCredentials(_0x255a92,_0x228a38){const _0x19d2d9=_0x235888;if(_0x255a92['username']==settings[_0x19d2d9(0x137)]&&bcrypt[_0x19d2d9(0x207)](_0x255a92[_0x19d2d9(0x1ba)],settings['bbPassword'])){if(settings[_0x19d2d9(0x156)])return{'allow':![],'reason':_0x19d2d9(0x173),'token':null};else{const _0x1708f0=generateLoginToken(_0x228a38);return{'allow':!![],'reason':_0x19d2d9(0x1c7),'token':_0x1708f0};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x36adb0){const _0x2bb185=_0x235888,_0x372a66=generateLoginToken(_0x36adb0);return{'allow':!![],'reason':_0x2bb185(0x1c7),'token':_0x372a66};}function validateAccess(_0x52b854,_0x442464){const _0x4df492=_0x235888;let _0x238fca=devices[_0x442464]['ip'],_0x2433c5;const _0x11a505=_0xcbd6a4=>{const _0x368d57=_0x2b26;if(settings[_0x368d57(0x21c)]){if(settings[_0x368d57(0x156)]){if(telegram2FaApproved(_0x442464)){const _0x563a03=generateLoginToken(_0x442464);return{'allow':!![],'reason':_0x368d57(0x10f),'token':_0x563a03};}else return{'allow':![],'reason':_0x368d57(0x158),'token':null};}else return _0x2433c5=validToken(_0xcbd6a4,_0x442464),_0x2433c5['hasOwnProperty'](_0x368d57(0x1d7))?{'allow':!![],'reason':_0x368d57(0x1b0),'token':_0xcbd6a4}:{'allow':![],'reason':_0x368d57(0x158),'token':null};}else return{'allow':!![],'reason':_0x368d57(0x191),'token':null};};if(settings[_0x4df492(0x213)]){let _0x2981e2=[...settings[_0x4df492(0x14a)],_0x4df492(0x1c9),_0x4df492(0x11b),'127.0.0.1'];if(_0x2981e2[_0x4df492(0x131)](_0x238fca))return _0x11a505(_0x52b854);else{_0x2433c5=validToken(_0x52b854,_0x442464);if(_0x2433c5[_0x4df492(0x1e2)]('success'))return _0x11a505(_0x52b854);else{if(telegramIpApproved(_0x442464)){const _0x23ff32=generateToken(_0x442464);return _0x2433c5=_0x11a505(_0x52b854),_0x2433c5['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x23ff32}:_0x2433c5;}else return settings[_0x4df492(0x150)]?{'allow':![],'reason':_0x4df492(0x199),'token':null}:{'allow':![],'reason':_0x4df492(0x1fe),'token':null};}}}else return _0x11a505(_0x52b854);}function timelyDecrypt(_0xf8e91a,_0xbaff99=!![]){const _0x268f95=_0x235888;if(_0xf8e91a)try{const _0xeb8b6a=crypt[_0x268f95(0x223)](secure[_0x268f95(0x14d)],_0xf8e91a)[_0x268f95(0x245)],_0x20d9bf=_0xeb8b6a[_0x268f95(0x139)]('@')[0x0],_0x34635e=_0xeb8b6a['split']('@')[0x1],_0x25ebf6=new Date()[_0x268f95(0x235)]();if(_0xbaff99){if(_0x25ebf6-_0x34635e<maxSecretAge*0x3e8)return _0x20d9bf;else return![];}else return _0x20d9bf;}catch(_0x271a4e){return![];}else return![];}const validToken=(_0x1233db,_0x33291f)=>{const _0x37a838=_0x235888,_0x41c030=devices[_0x33291f]['ip'];if(!_0x1233db)return{'error':'No\x20authentication\x20token'};for(let _0xde81fe of blacklist){if(_0xde81fe['token']==_0x1233db)return{'error':'Token\x20blacklisted'};}let _0x41d635;try{_0x41d635=jwt[_0x37a838(0x24d)](_0x1233db,secure[_0x37a838(0x16f)]+_0x33291f);}catch{return{'error':_0x37a838(0xfd)};}if(!_0x41d635[_0x37a838(0x1e2)](_0x37a838(0x1c2))&&!_0x41d635[_0x37a838(0x1e2)](_0x37a838(0x21d))||!_0x41d635[_0x37a838(0x1e2)](_0x37a838(0x1cb)))return{'error':_0x37a838(0x15d)};if(!_0x41d635['hasOwnProperty'](_0x37a838(0x21d))&&_0x41d635[_0x37a838(0x1e2)](_0x37a838(0x1c2))){const {clientip:_0x5daa65}=_0x41d635;return _0x41c030==_0x5daa65?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x41d635[_0x37a838(0x1e2)]('username')&&_0x41d635[_0x37a838(0x1e2)](_0x37a838(0x1c2))){const {username:_0x44b566,clientip:_0x29b140}=_0x41d635;return settings[_0x37a838(0x137)]==_0x44b566&&_0x41c030==_0x29b140?{'success':_0x37a838(0x1ca)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x17f3ea=>{const _0x5878f5=_0x235888;if(_0x17f3ea){const _0x1f4f82=devices[_0x17f3ea]['ip'];return jwt[_0x5878f5(0x1a9)]({'username':settings[_0x5878f5(0x137)],'clientip':_0x1f4f82},secure[_0x5878f5(0x16f)]+_0x17f3ea,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1ff54e=>{const _0xa502a7=_0x235888;if(_0x1ff54e){const _0x394160=devices[_0x1ff54e]['ip'];return jwt[_0xa502a7(0x1a9)]({'clientip':_0x394160},secure[_0xa502a7(0x16f)]+_0x1ff54e,{'expiresIn':devices[_0x1ff54e][_0xa502a7(0xf6)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x57ac93=>{const _0x4eaa56=_0x235888;let _0x399db=![];return devices[_0x57ac93][_0x4eaa56(0xf6)]&&devices[_0x57ac93][_0x4eaa56(0xf6)][_0x4eaa56(0x188)]!=_0x4eaa56(0x146)&&(_0x399db=devices[_0x57ac93][_0x4eaa56(0xf6)][_0x4eaa56(0x1c2)]==devices[_0x57ac93]['ip']&&new Date()[_0x4eaa56(0x235)]()-devices[_0x57ac93][_0x4eaa56(0xf6)][_0x4eaa56(0x1de)]<devices[_0x57ac93][_0x4eaa56(0xf6)]['expiry']*0x3c*0x3e8),_0x399db;},telegram2FaApproved=_0x1435c5=>{const _0x3626d2=_0x235888;let _0xbf319=![];return devices[_0x1435c5]['telegram2FaApproval']&&devices[_0x1435c5][_0x3626d2(0x25e)][_0x3626d2(0x188)]!=_0x3626d2(0x146)&&(_0xbf319=devices[_0x1435c5][_0x3626d2(0x25e)]['clientip']==devices[_0x1435c5]['ip']&&new Date()['getTime']()-devices[_0x1435c5][_0x3626d2(0x25e)][_0x3626d2(0x1de)]<devices[_0x1435c5][_0x3626d2(0x25e)][_0x3626d2(0x188)]*0x3c*0x3e8),_0xbf319;},normalizeIP=_0x30cbdf=>{const _0x31001b=_0x235888;let _0x31a388=null,_0x1ef1f7=null;if(ipaddr[_0x31001b(0xf9)](_0x30cbdf)){const _0x482172=ipaddr['parse'](_0x30cbdf);_0x482172[_0x31001b(0x10c)]()===_0x31001b(0x1d8)?(_0x482172[_0x31001b(0x1f1)]()&&(_0x31a388=_0x482172[_0x31001b(0x101)]()['toString']()),_0x1ef1f7=_0x482172[_0x31001b(0x180)]()):(_0x31a388=_0x482172[_0x31001b(0x180)](),_0x1ef1f7=_0x482172['toIPv4MappedAddress']()[_0x31001b(0x180)]());}return{'show':_0x31a388?_0x31a388:_0x1ef1f7,'store':_0x1ef1f7};};function sleep(_0x894a9a){return new Promise(_0x3087c9=>setTimeout(_0x3087c9,_0x894a9a));}