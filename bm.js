const _0x6bf650=_0xfa51;(function(_0x1f1ebe,_0x2bc12b){const _0x9dbe18=_0xfa51,_0x3a52a4=_0x1f1ebe();while(!![]){try{const _0x40cd4f=-parseInt(_0x9dbe18(0xe4))/0x1*(parseInt(_0x9dbe18(0x107))/0x2)+parseInt(_0x9dbe18(0x151))/0x3+-parseInt(_0x9dbe18(0x112))/0x4*(-parseInt(_0x9dbe18(0x220))/0x5)+parseInt(_0x9dbe18(0xe6))/0x6+-parseInt(_0x9dbe18(0xdf))/0x7+parseInt(_0x9dbe18(0x166))/0x8+-parseInt(_0x9dbe18(0x17d))/0x9;if(_0x40cd4f===_0x2bc12b)break;else _0x3a52a4['push'](_0x3a52a4['shift']());}catch(_0x46427b){_0x3a52a4['push'](_0x3a52a4['shift']());}}}(_0x3439,0x2d587));const _0x51b429=function(){let _0x485a85=!![];return function(_0x7870c4,_0x2ae1cc){const _0x50849c=_0x485a85?function(){const _0x57be61=_0xfa51;if(_0x2ae1cc){const _0x58a58e=_0x2ae1cc[_0x57be61(0x20b)](_0x7870c4,arguments);return _0x2ae1cc=null,_0x58a58e;}}:function(){};return _0x485a85=![],_0x50849c;};}(),_0x2819de=_0x51b429(this,function(){const _0x500830=_0xfa51;return _0x2819de[_0x500830(0x162)]()[_0x500830(0x13e)](_0x500830(0x1cc))['toString']()['constructor'](_0x2819de)[_0x500830(0x13e)]('(((.+)+)+)+$');});_0x2819de();'use strict';process[_0x6bf650(0x16a)][_0x6bf650(0x199)]=0x1;const childProcess=require(_0x6bf650(0x1cd)),FileSync=require(_0x6bf650(0x18e)),fs=require('fs'),fns=require(_0x6bf650(0x21e)),low=require(_0x6bf650(0x217)),path=require(_0x6bf650(0x122)),crypto=require('crypto'),Crypt=require(_0x6bf650(0x1e2))[_0x6bf650(0x180)],RSA=require(_0x6bf650(0x1e2))[_0x6bf650(0x17c)],bcrypt=require(_0x6bf650(0x17b)),jwt=require(_0x6bf650(0xed)),analyticsLib=require(_0x6bf650(0x115))[_0x6bf650(0x157)],googleAnalytics=require(_0x6bf650(0x209))[_0x6bf650(0x157)],ipaddr=require('ipaddr.js'),argv=require(_0x6bf650(0x1e8))(process[_0x6bf650(0x128)][_0x6bf650(0x197)](0x2))[_0x6bf650(0x128)],PORT=argv[_0x6bf650(0x117)]||_0x6bf650(0x1f4),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log'](_0x6bf650(0x158)+PORT+_0x6bf650(0x1e7)),process[_0x6bf650(0x207)](0x1);const HOST=argv['host']||null,userID=argv[_0x6bf650(0x1bb)]||'';let bbpath=_0x6bf650(0x1af),bbpath2='';const botfile=_0x6bf650(0x135),configfile=_0x6bf650(0xf3),settingsfile=_0x6bf650(0x192),securefile=_0x6bf650(0xde),validInstallation=fs['existsSync']('../install.js');!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x6bf650(0x19c)),configpath=userID?bbpath+_0x6bf650(0x1ae)+userID+'/':bbpath+_0x6bf650(0x1ae),configbackuppath=configpath+'backup/';!fs[_0x6bf650(0x216)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x6bf650(0x216)](configbackuppath)&&fs[_0x6bf650(0x19d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x6bf650(0x1c9)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x6bf650(0x1c9)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x6bf650(0x1c9)]({'secure':{},'blacklist':[]})[_0x6bf650(0x1e0)]();let crypt=new Crypt({'md':_0x6bf650(0x159),'rsaStandard':_0x6bf650(0x1da)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x6bf650(0x1f7))[_0x6bf650(0x1d3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x6bf650(0x1b0))[_0x6bf650(0x196)](app);app[_0x6bf650(0xfe)](express[_0x6bf650(0x204)](path['join'](__dirname,bbpath2,'build2'))),app[_0x6bf650(0xfe)](express[_0x6bf650(0x204)](path[_0x6bf650(0x212)](__dirname,bbpath2,_0x6bf650(0x15c)))),app[_0x6bf650(0x173)]('/',function(_0x18dc88,_0x38746b){const _0x5c3a03=_0x6bf650;_0x38746b[_0x5c3a03(0x1eb)](path['join'](__dirname,bbpath2,_0x5c3a03(0x193),_0x5c3a03(0x15a)));}),app[_0x6bf650(0x173)](_0x6bf650(0x21d),function(_0xa49395,_0x3bac72){const _0x2ed5f4=_0x6bf650;_0x3bac72[_0x2ed5f4(0x1eb)](path[_0x2ed5f4(0x212)](__dirname,bbpath2,_0x2ed5f4(0x15c),_0x2ed5f4(0x15a)));}),app['get']('/:bot/portfolio',(_0xccdd58,_0x5b18b2)=>{const _0xe68668=_0x6bf650;_0x5b18b2[_0xe68668(0x1eb)](path[_0xe68668(0x212)](__dirname,bbpath2,_0xe68668(0x15c),_0xe68668(0x15a)));}),app[_0x6bf650(0x173)](_0x6bf650(0x161),(_0x317e96,_0x4a33c7)=>{const _0x26b31e=_0x6bf650;_0x4a33c7['sendFile'](path[_0x26b31e(0x212)](__dirname,bbpath2,'build',_0x26b31e(0x15a)));}),app['get'](_0x6bf650(0x102),(_0x5c9cf2,_0x2f9ba0)=>{const _0x229025=_0x6bf650;_0x2f9ba0[_0x229025(0x1eb)](path[_0x229025(0x212)](__dirname,bbpath2,'build',_0x229025(0x15a)));}),app['get'](_0x6bf650(0x1ea),(_0x39490f,_0x5256f0)=>{const _0x2aed60=_0x6bf650;_0x5256f0[_0x2aed60(0x1eb)](path[_0x2aed60(0x212)](__dirname,bbpath2,_0x2aed60(0x15c),_0x2aed60(0x15a)));}),app[_0x6bf650(0x173)](_0x6bf650(0x186),(_0x597ed2,_0x4f77ba)=>{const _0x37a880=_0x6bf650;_0x4f77ba['sendFile'](path[_0x37a880(0x212)](__dirname,bbpath2,_0x37a880(0x15c),_0x37a880(0x15a)));}),app[_0x6bf650(0x173)](_0x6bf650(0x1db),(_0x13bfee,_0x1818c2)=>{const _0x2d09cc=_0x6bf650;_0x1818c2[_0x2d09cc(0x1eb)](path[_0x2d09cc(0x212)](__dirname,bbpath2,_0x2d09cc(0x15c),_0x2d09cc(0x15a)));});if(HOST)http[_0x6bf650(0x1ef)](PORT,HOST);else http[_0x6bf650(0x1ef)](PORT);const io=require(_0x6bf650(0x194))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x6bf650(0x202)})]}),TelegramBot=require(_0x6bf650(0x174));let tgBot;if(settings[_0x6bf650(0x1fe)]&&settings['telegramToken']!=''&&settings[_0x6bf650(0x1f1)]&&settings[_0x6bf650(0x1f1)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x3e93ca=_0x6bf650;console[_0x3e93ca(0x215)](''),console[_0x3e93ca(0x215)](_0x3e93ca(0x11b)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x3e93ca(0x215)](_0x3e93ca(0x11b));if(config[_0x3e93ca(0x1ad)]!=0x0)config['forEach'](_0x8f7132=>{const _0x2767ff=_0x3e93ca;if(_0x8f7132[_0x2767ff(0x131)]==_0x2767ff(0x1a9)||_0x8f7132[_0x2767ff(0x131)]==_0x2767ff(0x169))logging('starting\x20bot\x20|\x20Bot\x20'+_0x8f7132['botID']+_0x2767ff(0x1fb)+_0x8f7132[_0x2767ff(0x13b)]),startBot([_0x8f7132[_0x2767ff(0x10b)],userID],{'cwd':bbpath},function(_0xf437fb){if(_0xf437fb)logging(_0xf437fb);});else(_0x8f7132[_0x2767ff(0x131)]=='disabled'||_0x8f7132['status']==_0x2767ff(0x140))&&logging(_0x2767ff(0x20e)+_0x8f7132[_0x2767ff(0x10b)]+_0x2767ff(0x1fb)+_0x8f7132['botname']);});else!newBot&&console[_0x3e93ca(0x215)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x3e93ca(0x215)](_0x3e93ca(0x11b)),console[_0x3e93ca(0x215)]('');}function startSocket(){const _0x9e9dde=_0x6bf650;io['on'](_0x9e9dde(0x106),_0x4161f1=>{const _0x3fd8fd=_0x9e9dde;let _0x5a96e7,_0x343ecc,_0x2194d8,_0x1b8a46,_0x3fe1cb;const _0x45c51c=_0x4161f1['handshake'][_0x3fd8fd(0x189)][_0x3fd8fd(0x198)];_0x343ecc=_0x45c51c[_0x3fd8fd(0x1f8)](/bot[0-9]{3}/);if(_0x343ecc)_0x2194d8=_0x343ecc[0x0][_0x3fd8fd(0x1f8)](/[0-9]{3}/);if(_0x2194d8)_0x5a96e7=_0x2194d8[0x0];else _0x5a96e7=_0x3fd8fd(0x19e);const _0x93d484=_0x4161f1[_0x3fd8fd(0xf4)][_0x3fd8fd(0x1ee)][_0x3fd8fd(0xf0)];if(!_0x93d484)_0x4161f1[_0x3fd8fd(0x137)]('status',{'publicKey':secure[_0x3fd8fd(0x134)]});else{_0x1b8a46=timelyDecrypt(_0x93d484,![]);if(!_0x1b8a46)_0x4161f1[_0x3fd8fd(0x137)](_0x3fd8fd(0x131),{'publicKey':secure['publicKey']});else{_0x3fe1cb=normalizeIP(_0x4161f1['conn']['remoteAddress'])['store'];if(!devices[_0x1b8a46])devices[_0x1b8a46]={'uuid':_0x1b8a46,'access':{'token':null}};devices[_0x1b8a46]['ip']=_0x3fe1cb;const _0x227f18=addClient(_0x4161f1['id'],_0x1b8a46,_0x5a96e7);setAccess(_0x227f18),_0x4161f1['on'](_0x3fd8fd(0x19f),_0x531f75=>{const _0x11a3a6=_0x3fd8fd,_0x42f9bc=timelyDecrypt(_0x531f75['password']);if(_0x42f9bc){_0x531f75={'username':_0x531f75[_0x11a3a6(0xf6)],'password':_0x42f9bc},devices[_0x1b8a46][_0x11a3a6(0x12f)]=validateCredentials(_0x531f75,_0x1b8a46);if(devices[_0x1b8a46][_0x11a3a6(0x12f)][_0x11a3a6(0x1bd)]==![]&&devices[_0x1b8a46]['access'][_0x11a3a6(0x1f2)]==_0x11a3a6(0x125))_0x4161f1[_0x11a3a6(0x137)]('status',{'access':devices[_0x1b8a46]['access']}),loginAccess2FA(_0x1b8a46,_0x3fe1cb);else{if(devices[_0x1b8a46][_0x11a3a6(0x12f)][_0x11a3a6(0x1bd)]==![]&&devices[_0x1b8a46][_0x11a3a6(0x12f)][_0x11a3a6(0x1f2)]==_0x11a3a6(0x1b2))_0x4161f1[_0x11a3a6(0x137)]('status',{'access':devices[_0x1b8a46][_0x11a3a6(0x12f)]});else devices[_0x1b8a46][_0x11a3a6(0x12f)][_0x11a3a6(0x1bd)]&&devices[_0x1b8a46][_0x11a3a6(0x12f)]['reason']==_0x11a3a6(0x110)&&(getClientsWithUuid(_0x1b8a46)[_0x11a3a6(0x183)](_0x51e6bf=>{setAccess(_0x51e6bf);}),setTokenRefresh(_0x1b8a46),setSessionTimeout('login',_0x1b8a46));}}else logging(_0x11a3a6(0x1a6));}),_0x4161f1['on'](_0x3fd8fd(0x1dc),()=>{resetPassword();}),_0x4161f1['on'](_0x3fd8fd(0x14f),_0x4f6963=>{removeClient(_0x4161f1['id']);});}}});}function initClient(_0x2ff1dd){const _0x157456=_0x6bf650;if(_0x2ff1dd!=_0x157456(0x19e)&&config[_0x157456(0x201)]!=''){if(pid[_0x2ff1dd])pid[_0x2ff1dd]['send']({'function':_0x157456(0x1e1),'args':null});}}function getSocket(_0x40d6e8){const _0x585e10=_0x6bf650;return io[_0x585e10(0x11a)][_0x585e10(0x11a)][_0x585e10(0x173)](_0x40d6e8);}function setAccess(_0x2f8216){const _0x4a3122=_0x6bf650,_0x341621=getSocket(_0x2f8216['id']),_0x51d053=_0x2f8216[_0x4a3122(0x1ac)],_0x2f3b84=_0x2f8216[_0x4a3122(0x145)];devices[_0x51d053]['access']=validateAccess(devices[_0x51d053]['access'][_0x4a3122(0xe1)],_0x51d053),_0x341621[_0x4a3122(0x212)](_0x51d053);if(devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0x1bd)]){_0x341621[_0x4a3122(0x212)](_0x2f3b84);if(_0x2f3b84==_0x4a3122(0x19e))initializeSocketBotManager(_0x341621);else initializeSocketBot(_0x341621);initClient(_0x2f3b84);}devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0xe1)]&&devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0x1f2)]==_0x4a3122(0x187)&&setSessionTimeout(_0x4a3122(0x109),_0x51d053),devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0xe1)]&&devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0x1f2)]==_0x4a3122(0x1d2)&&setSessionTimeout('login',_0x51d053),_0x341621[_0x4a3122(0x137)](_0x4a3122(0x131),{'status':_0x2f8216[_0x4a3122(0x1c8)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x51d053][_0x4a3122(0x12f)],'externalip':devices[_0x51d053]['ip'],'publicKey':secure[_0x4a3122(0x134)],'validInstallation':validInstallation}),devices[_0x51d053][_0x4a3122(0x12f)][_0x4a3122(0x1bd)]==![]&&devices[_0x51d053]['access'][_0x4a3122(0x1f2)]==_0x4a3122(0x12d)&&temporaryAccess2FA(_0x51d053,devices[_0x51d053]['ip']);}function setSessionTimeout(_0x7fa87d,_0x1ce5c7){const _0x35d35b=_0x6bf650;let _0xbc1d3f;if(_0x7fa87d==_0x35d35b(0x19f))_0xbc1d3f=loginExpiry*0x3c*0x3e8;else _0xbc1d3f=devices[_0x1ce5c7][_0x35d35b(0x10a)][_0x35d35b(0x17f)]*0x3c*0x3e8-(new Date()[_0x35d35b(0x1d9)]()-devices[_0x1ce5c7][_0x35d35b(0x10a)][_0x35d35b(0x16c)]);if(devices[_0x1ce5c7][_0x35d35b(0x14d)])clearTimeout(devices[_0x1ce5c7][_0x35d35b(0x14d)]);devices[_0x1ce5c7][_0x35d35b(0x14d)]=setTimeout(()=>{const _0x18c694=_0x35d35b;if(devices[_0x1ce5c7][_0x18c694(0x1a0)])clearTimeout(devices[_0x1ce5c7][_0x18c694(0x1a0)]);removeSocketListeners(_0x1ce5c7),addBlacklist(_0x1ce5c7),devices[_0x1ce5c7][_0x18c694(0x10a)]=null,devices[_0x1ce5c7]['telegram2FaApproval']=null,devices[_0x1ce5c7][_0x18c694(0x12f)][_0x18c694(0xe1)]=null,devices[_0x1ce5c7][_0x18c694(0x12f)]=validateAccess(devices[_0x1ce5c7][_0x18c694(0x12f)]['token'],_0x1ce5c7),!(devices[_0x1ce5c7][_0x18c694(0x12f)][_0x18c694(0x1bd)]&&devices[_0x1ce5c7][_0x18c694(0x12f)][_0x18c694(0x1f2)]==_0x18c694(0x1fc))&&(_0x7fa87d=='login'?io['to'](_0x1ce5c7)[_0x18c694(0x137)](_0x18c694(0x131),{'access':{'allow':![],'reason':_0x18c694(0x1e3),'token':null}}):io['to'](_0x1ce5c7)['emit']('status',{'access':{'allow':![],'reason':_0x18c694(0x1fa),'token':null}})),devices[_0x1ce5c7]['access'][_0x18c694(0xe1)]=null;},_0xbc1d3f);}function setTokenRefresh(_0x41575c){const _0x49b111=_0x6bf650;if(devices[_0x41575c][_0x49b111(0x1a0)])clearTimeout(devices[_0x41575c][_0x49b111(0x1a0)]);devices[_0x41575c][_0x49b111(0x1a0)]=setTimeout(()=>{const _0x467e8e=_0x49b111;getClientsWithUuid(_0x41575c)[_0x467e8e(0x1ad)]!=0x0?(devices[_0x41575c][_0x467e8e(0x12f)]=refreshToken(_0x41575c),io['to'](_0x41575c)[_0x467e8e(0x137)]('status',{'status':_0x467e8e(0xf1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x41575c][_0x467e8e(0x12f)],'externalip':devices[_0x41575c]['ip'],'publicKey':secure[_0x467e8e(0x134)],'validInstallation':validInstallation}),setTokenRefresh(_0x41575c)):clearTimeout(devices[_0x41575c][_0x467e8e(0x1a0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xcc1cba){const _0x552b28=_0x6bf650,_0x5f3b35=getClient(_0xcc1cba['id'])[_0x552b28(0x1ac)];_0xcc1cba['emit'](_0x552b28(0x179),config),_0xcc1cba[_0x552b28(0x137)](_0x552b28(0x10f),cleanSettings()),_0xcc1cba['on']('add-bot',_0x461ccc=>{const _0x8dd293=_0x552b28;if(validateAccess(_0x461ccc,_0x5f3b35)[_0x8dd293(0x1bd)])addBot();else logging(_0x8dd293(0x195));}),_0xcc1cba['on'](_0x552b28(0x1e4),(_0x236b6c,_0x38f844)=>{const _0x32ef38=_0x552b28;if(validateAccess(_0x38f844,_0x5f3b35)[_0x32ef38(0x1bd)])toggleBot(_0x236b6c['botID'],_0x236b6c[_0x32ef38(0x131)],_0x236b6c[_0x32ef38(0x150)]);else logging(_0x32ef38(0x142));}),_0xcc1cba['on'](_0x552b28(0x188),(_0x3cbce6,_0x49511a)=>{const _0x4ff777=_0x552b28;if(validateAccess(_0x49511a,_0x5f3b35)[_0x4ff777(0x1bd)])deleteBot(_0x3cbce6);else logging(_0x4ff777(0x1b6));}),_0xcc1cba['on'](_0x552b28(0x111),(_0x13e3d9,_0x3a23f3)=>{const _0x20295b=_0x552b28;if(validateAccess(_0x3a23f3,_0x5f3b35)[_0x20295b(0x1bd)])storeSettings(_0x13e3d9,!![]);else logging(_0x20295b(0x19b));}),_0xcc1cba['on']('update-bb',(_0x1ccee0,_0x4c66e2)=>{const _0x124d63=_0x552b28;if(validateAccess(_0x4c66e2,_0x5f3b35)[_0x124d63(0x1bd)])updateBB();else logging(_0x124d63(0x19b));}),_0xcc1cba['on'](_0x552b28(0x16d),_0x5b6b9f=>{const _0x3173c4=_0x552b28;if(validateAccess(_0x5b6b9f,_0x5f3b35)[_0x3173c4(0x1bd)]){if(devices[_0x5f3b35][_0x3173c4(0x1a0)])clearTimeout(devices[_0x5f3b35]['pidRefreshToken']);if(devices[_0x5f3b35]['pidExpireLogin'])clearTimeout(devices[_0x5f3b35][_0x3173c4(0x14d)]);removeSocketListeners(getClient(_0xcc1cba['id'])['uuid']),addBlacklist(_0x5f3b35),devices[_0x5f3b35][_0x3173c4(0x10a)]=null,devices[_0x5f3b35][_0x3173c4(0x1ec)]=null,devices[_0x5f3b35][_0x3173c4(0x12f)][_0x3173c4(0xe1)]=null,io['to'](getClient(_0xcc1cba['id'])[_0x3173c4(0x1ac)])[_0x3173c4(0x137)](_0x3173c4(0x131),{'access':{'allow':![],'reason':_0x3173c4(0x1ba),'token':null}});}else logging(_0x3173c4(0xdd));});}function initializeSocketBot(_0x208c62){const _0x2459c=_0x6bf650,_0xf56506=getClient(_0x208c62['id'])['bot'],_0x3ae0fa=getClient(_0x208c62['id'])[_0x2459c(0x1ac)];_0x208c62['on'](_0x2459c(0x100),(_0x340147,_0x19cf29)=>{const _0x29f023=_0x2459c;if(validateAccess(_0x19cf29,_0x3ae0fa)['allow']){if(pid[_0xf56506])pid[_0xf56506][_0x29f023(0x20c)]({'function':_0x29f023(0x18a),'args':_0x340147});}else logging(_0x29f023(0x1ab));}),_0x208c62['on'](_0x2459c(0x1fd),(_0x40015f,_0x499f65)=>{const _0x4d6fa0=_0x2459c;if(validateAccess(_0x499f65,_0x3ae0fa)[_0x4d6fa0(0x1bd)]){if(pid[_0xf56506])pid[_0xf56506][_0x4d6fa0(0x20c)]({'function':_0x4d6fa0(0x15b),'args':_0x40015f});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x208c62['on']('store-configuration',(_0x1c7fae,_0x59d85f)=>{const _0x12d012=_0x2459c;if(validateAccess(_0x59d85f,_0x3ae0fa)['allow']){if(pid[_0xf56506])pid[_0xf56506][_0x12d012(0x20c)]({'function':_0x12d012(0x1c0),'args':_0x1c7fae});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x208c62['on'](_0x2459c(0x1ce),(_0x1bbdea,_0x4bd34e)=>{const _0x2a0fbd=_0x2459c;if(validateAccess(_0x4bd34e,_0x3ae0fa)[_0x2a0fbd(0x1bd)]){if(pid[_0xf56506])pid[_0xf56506][_0x2a0fbd(0x20c)]({'function':_0x2a0fbd(0xf8),'args':_0x1bbdea});}else logging(_0x2a0fbd(0x1d0));}),_0x208c62['on'](_0x2459c(0xfb),_0x4effdf=>{const _0x169df6=_0x2459c;if(validateAccess(_0x4effdf,_0x3ae0fa)['allow']){if(pid[_0xf56506])pid[_0xf56506]['send']({'function':_0x169df6(0x132),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x208c62['on'](_0x2459c(0x16e),(_0x205291,_0x52365c)=>{const _0x52a4d9=_0x2459c;if(validateAccess(_0x52365c,_0x3ae0fa)[_0x52a4d9(0x1bd)]){if(pid[_0xf56506])pid[_0xf56506][_0x52a4d9(0x20c)]({'function':'placeOrder','args':_0x205291});}else logging(_0x52a4d9(0x13c));}),_0x208c62['on']('cancel-loading',_0x4865e1=>{const _0x828802=_0x2459c;if(validateAccess(_0x4865e1,_0x3ae0fa)['allow']){if(pid[_0xf56506])pid[_0xf56506][_0x828802(0x20c)]({'function':_0x828802(0x21b),'args':null});}else logging(_0x828802(0x18b));}),_0x208c62['on'](_0x2459c(0x16d),_0x162c21=>{const _0x3989e8=_0x2459c;if(validateAccess(_0x162c21,_0x3ae0fa)[_0x3989e8(0x1bd)]){if(devices[_0x3ae0fa][_0x3989e8(0x1a0)])clearTimeout(devices[_0x3ae0fa][_0x3989e8(0x1a0)]);if(devices[_0x3ae0fa][_0x3989e8(0x14d)])clearTimeout(devices[_0x3ae0fa]['pidExpireLogin']);removeSocketListeners(getClient(_0x208c62['id'])[_0x3989e8(0x1ac)]),addBlacklist(_0x3ae0fa),devices[_0x3ae0fa][_0x3989e8(0x10a)]=null,devices[_0x3ae0fa][_0x3989e8(0x1ec)]=null,devices[_0x3ae0fa][_0x3989e8(0x12f)]['token']=null,io['to'](getClient(_0x208c62['id'])[_0x3989e8(0x1ac)])[_0x3989e8(0x137)](_0x3989e8(0x131),{'access':{'allow':![],'reason':_0x3989e8(0x1ba),'token':null}});}else logging(_0x3989e8(0xdd));});}function removeSocketListeners(_0x5ef0ea){const _0x4152b1=_0x6bf650;getClientsWithUuid(_0x5ef0ea)[_0x4152b1(0x183)](_0x5ba8bc=>{const _0x38e224=_0x4152b1;getSocket(_0x5ba8bc['id'])[_0x38e224(0xe7)]();});}function cleanSettings(){const _0x5bb551=_0x6bf650;let _0x44e366=settings;return settings['telegramToken']&&settings[_0x5bb551(0x1fe)]!=''&&(_0x44e366={..._0x44e366,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x44e366={..._0x44e366,'bbPassword':'************'}),_0x44e366;}function updateBB(){const _0x489b23=_0x6bf650;installingUpdate=!![],config[_0x489b23(0x183)](_0x47e868=>{const _0xd5edff=_0x489b23;restartBot(_0x47e868[_0xd5edff(0x10b)]);}),process[_0x489b23(0x20c)]({'update':!![]},_0x1a9b96=>{});}function startBot(_0x48e961,_0x5dd1a8,_0xdc184d){const _0x30e6b1=_0x6bf650;let _0x5b0bdc=![];const _0x1ab0f2=_0x48e961[0x0];_0x5dd1a8={..._0x5dd1a8,'stdio':['inherit',_0x30e6b1(0x164),'inherit',_0x30e6b1(0x1c6)]},pid[_0x1ab0f2]=childProcess[_0x30e6b1(0x168)](botfile,_0x48e961,_0x5dd1a8),pid[_0x1ab0f2]['on'](_0x30e6b1(0x200),_0x50ea21=>{const _0x564e3b=_0x30e6b1;switch(Object[_0x564e3b(0x155)](_0x50ea21)[0x0]){case _0x564e3b(0x13b):updateBotName(_0x1ab0f2,_0x50ea21[_0x564e3b(0x13b)]);break;case _0x564e3b(0x131):updateStatus(_0x1ab0f2,_0x50ea21['status']);break;case _0x564e3b(0x150):updateLive(_0x1ab0f2,_0x50ea21[_0x564e3b(0x150)]);break;case _0x564e3b(0x103):updateLive(_0x1ab0f2,_0x50ea21[_0x564e3b(0x103)]),io['to'](_0x1ab0f2)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x564e3b(0x1bc):_0x50ea21[_0x564e3b(0x1bc)]=='restart'&&restartBot(_0x1ab0f2);_0x50ea21[_0x564e3b(0x1bc)]=='kill'&&toggleBot(_0x1ab0f2,'disabled',_0x564e3b(0x1cf));break;case _0x564e3b(0x17a):sendTelegram(_0x1ab0f2,_0x50ea21[_0x564e3b(0x17a)]);break;case'function':io['to'](_0x1ab0f2)[_0x564e3b(0x137)](_0x50ea21['function'],_0x50ea21['args']);break;}}),pid[_0x1ab0f2]['on'](_0x30e6b1(0x1cb),function(_0x1bbf89){if(_0x5b0bdc)return;_0x5b0bdc=!![],_0xdc184d(_0x1bbf89);}),pid[_0x1ab0f2]['on'](_0x30e6b1(0x207),function(_0x335144){const _0x30f060=_0x30e6b1;if(installingUpdate)return;if(_0x5b0bdc)return;_0x5b0bdc=!![],_0xdc184d(null);const _0x28f38f=dbConfig['get'](_0x30f060(0x179))[_0x30f060(0xf9)]({'botID':_0x1ab0f2})[_0x30f060(0x130)]();_0x28f38f&&(_0x28f38f[_0x30f060(0x131)]==_0x30f060(0x1a9)||_0x28f38f['status']==_0x30f060(0x169))&&(updateLive(_0x1ab0f2,_0x30f060(0x1cf)),logging('restarting\x20Bot\x20'+_0x1ab0f2),startBot([_0x1ab0f2,userID],{'cwd':bbpath},function(_0x1d0b61){if(_0x1d0b61)logging(_0x1d0b61);}));});}function stopBot(_0x2b10ec){const _0x55a52a=_0x6bf650;getClientsWithBotID(_0x2b10ec)[_0x55a52a(0x183)](_0x2c462b=>{const _0x111a89=_0x55a52a;getSocket(_0x2c462b['id'])[_0x111a89(0x14f)](!![]),removeClient(_0x2c462b['id']);});if(pid[_0x2b10ec])pid[_0x2b10ec][_0x55a52a(0x113)]();}function restartBot(_0x338793){const _0xdb5e3b=_0x6bf650;if(pid[_0x338793])pid[_0x338793][_0xdb5e3b(0x113)]();}function addBot(){const _0x414894=_0x6bf650;let _0x467f64;for(let _0x126fc6=0x1;_0x126fc6<0x3e9;_0x126fc6++){_0x467f64=_0x126fc6[_0x414894(0x162)]()[_0x414894(0x1b5)](0x3,'0');let _0x176657=config['find'](_0x1017e7=>_0x1017e7[_0x414894(0x10b)]==_0x467f64);if(!_0x176657)break;}if(_0x467f64===_0x414894(0x17e)){logging(_0x414894(0x1f0));return;}logging(_0x414894(0x163)+_0x467f64),dbConfig[_0x414894(0x173)]('bots')[_0x414894(0x1a8)]({'botID':_0x467f64,'botname':_0x414894(0x20d)+_0x467f64,'status':'new','live':''})[_0x414894(0x1e0)](),startBot([_0x467f64,userID],{'cwd':bbpath},function(_0x1694c6){if(_0x1694c6)logging(_0x1694c6);}),config=getConfiguration(),io['to'](_0x414894(0x19e))[_0x414894(0x137)](_0x414894(0x179),config);}function deleteBot(_0xdd6389){const _0xa24c3f=_0x6bf650;getClientsWithBotID(_0xdd6389)['forEach'](_0x4a0981=>{const _0x39bc7f=_0xfa51;getSocket(_0x4a0981['id'])[_0x39bc7f(0x14f)](!![]),removeClient(_0x4a0981['id']);}),dbConfig[_0xa24c3f(0x173)](_0xa24c3f(0x179))[_0xa24c3f(0x12e)]({'botID':_0xdd6389})[_0xa24c3f(0x1e0)](),logging(_0xa24c3f(0x14e)+_0xdd6389),stopBot(_0xdd6389);try{fs[_0xa24c3f(0x1e5)](path[_0xa24c3f(0x212)](configpath,'bot-'+_0xdd6389+_0xa24c3f(0xea))),fs[_0xa24c3f(0x1e5)](path[_0xa24c3f(0x212)](configpath,'bot-'+_0xdd6389+'-events.json')),fs['unlinkSync'](path['join'](configpath,_0xa24c3f(0x1d5)+_0xdd6389+_0xa24c3f(0x116))),fs[_0xa24c3f(0x1e5)](path[_0xa24c3f(0x212)](configpath,'bot-'+_0xdd6389+_0xa24c3f(0x126)));}catch(_0x29a968){if(_0x29a968)logging(_0xa24c3f(0x141),_0x29a968);}config=getConfiguration(),io['to']('botmanager')[_0xa24c3f(0x137)](_0xa24c3f(0x179),config);}function toggleBot(_0x3cbb6c,_0x483099,_0x120073){const _0x16cbb8=_0x6bf650;dbConfig['get']('bots')[_0x16cbb8(0xf9)]({'botID':_0x3cbb6c})[_0x16cbb8(0xf2)]({'status':_0x483099})[_0x16cbb8(0xf2)]({'live':_0x120073})['write']();if(_0x483099==_0x16cbb8(0x1a9)||_0x483099=='new')logging(_0x16cbb8(0x1d8)+_0x3cbb6c),startBot([_0x3cbb6c,userID],{'cwd':bbpath},function(_0x428c66){if(_0x428c66)logging(_0x428c66);});else(_0x483099==_0x16cbb8(0x1b7)||_0x483099==_0x16cbb8(0x140))&&(logging('disabled\x20Bot\x20'+_0x3cbb6c),stopBot(_0x3cbb6c));config=getConfiguration(),io['to'](_0x16cbb8(0x19e))[_0x16cbb8(0x137)](_0x16cbb8(0x179),config);}function toggleStatus(_0x5c5c0f){const _0xa039d7=_0x6bf650;let _0x3bbed5=dbConfig[_0xa039d7(0x173)](_0xa039d7(0x179))[_0xa039d7(0xf9)]({'botID':_0x5c5c0f})[_0xa039d7(0x130)](),_0xe0f0b9;if(_0x3bbed5[_0xa039d7(0x131)]==='enabled')_0xe0f0b9='disabled';else{if(_0x3bbed5['status']===_0xa039d7(0x169))_0xe0f0b9=_0xa039d7(0x140);else{if(_0x3bbed5[_0xa039d7(0x131)]===_0xa039d7(0x140))_0xe0f0b9=_0xa039d7(0x169);else{if(_0x3bbed5['status']==='disabled')_0xe0f0b9=_0xa039d7(0x1a9);}}}return _0xe0f0b9;}function updateStatus(_0x4437f5,_0x471b4f){const _0x457444=_0x6bf650;dbConfig['get'](_0x457444(0x179))[_0x457444(0xf9)]({'botID':_0x4437f5})[_0x457444(0xf2)]({'status':_0x471b4f})[_0x457444(0x1e0)](),config=getConfiguration(),io['to'](_0x457444(0x19e))[_0x457444(0x137)](_0x457444(0x179),config);}function updateLive(_0x15d2cf,_0x212deb){const _0x336060=_0x6bf650;dbConfig['get'](_0x336060(0x179))[_0x336060(0xf9)]({'botID':_0x15d2cf})[_0x336060(0xf2)]({'live':_0x212deb})[_0x336060(0x1e0)](),config=getConfiguration(),io['to'](_0x336060(0x19e))[_0x336060(0x137)](_0x336060(0x179),config);}function updateBotName(_0x33aeb1,_0x4b8a14){const _0x387a11=_0x6bf650;dbConfig[_0x387a11(0x173)](_0x387a11(0x179))[_0x387a11(0xf9)]({'botID':_0x33aeb1})['assign']({'botname':_0x4b8a14})[_0x387a11(0x1e0)](),config=getConfiguration(),io['to'](_0x387a11(0x19e))[_0x387a11(0x137)]('bots',config);}function telegramError(_0x5ab674){const _0x3dd0cc=_0x6bf650;console[_0x3dd0cc(0x215)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x379661){const _0x1977cb=_0x6bf650;if(_0x379661[_0x1977cb(0x1de)][_0x1977cb(0xf6)]!=settings['telegramUsername']&&'@'+_0x379661['from'][_0x1977cb(0xf6)]!=settings[_0x1977cb(0x1f1)])return tgBot['sendMessage'](_0x379661[_0x1977cb(0x1f6)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1977cb(0x12a)})['catch'](_0x5a0cba=>{telegramError(_0x5a0cba);}),![];return!![];}async function initTelegram(){const _0x5b44f8=_0x6bf650;if(tgBot)tgBot[_0x5b44f8(0x219)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5b44f8(0x1fe)],{'polling':!![]});let _0x2e43a7=_0x5b44f8(0x21a);_0x2e43a7+='\x0a',_0x2e43a7+=_0x5b44f8(0x124),_0x2e43a7+=_0x5b44f8(0x176),_0x2e43a7+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2e43a7+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2e43a7+=_0x5b44f8(0x1a7),_0x2e43a7+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2e43a7+=_0x5b44f8(0x1a2),_0x2e43a7+=_0x5b44f8(0x15d);let _0x494245='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x494245+='\x0a',_0x494245+=_0x2e43a7,tgBot[_0x5b44f8(0x165)](/\/start/,_0x139e08=>{const _0x12c5f3=_0x5b44f8;if(!validateTelegram(_0x139e08))return;if(settings['telegramChatId']!=_0x139e08[_0x12c5f3(0x1f6)]['id'])updateSetting('telegramChatId',_0x139e08[_0x12c5f3(0x1f6)]['id']);updateSetting(_0x12c5f3(0x1a3),!![]),tgBot[_0x12c5f3(0x167)](_0x139e08[_0x12c5f3(0x1f6)]['id'],_0x494245)[_0x12c5f3(0x14b)](_0x34e06a=>{telegramError(_0x34e06a);});}),tgBot[_0x5b44f8(0x165)](/\/enable/,_0x27f155=>{const _0x5ba06c=_0x5b44f8;if(!validateTelegram(_0x27f155))return;if(settings[_0x5ba06c(0x1bf)]!=_0x27f155['chat']['id'])updateSetting(_0x5ba06c(0x1bf),_0x27f155[_0x5ba06c(0x1f6)]['id']);updateSetting(_0x5ba06c(0x1a3),!![]),tgBot['sendMessage'](_0x27f155[_0x5ba06c(0x1f6)]['id'],_0x5ba06c(0x15e))[_0x5ba06c(0x14b)](_0x41b898=>{telegramError(_0x41b898);});}),tgBot[_0x5b44f8(0x165)](/\/config/,async _0x4d6470=>{const _0x2ae3b1=_0x5b44f8;if(!validateTelegram(_0x4d6470))return;tgBot[_0x2ae3b1(0x1d1)](_0x2ae3b1(0x1b4)),tgBot['sendMessage'](_0x4d6470['chat']['id'],_0x2ae3b1(0x13a),{'reply_markup':{'inline_keyboard':[[{'text':_0x2ae3b1(0x101),'callback_data':_0x2ae3b1(0xfd)},{'text':_0x2ae3b1(0x1aa),'callback_data':'alerts'},{'text':_0x2ae3b1(0x136),'callback_data':_0x2ae3b1(0x114)}]]}})[_0x2ae3b1(0x14b)](_0x39f962=>{telegramError(_0x39f962);}),tgBot['on'](_0x2ae3b1(0x1b4),async _0x308f2c=>{const _0x1f84ad=_0x2ae3b1,_0x3665af=_0x308f2c[_0x1f84ad(0xe3)],_0x445c68=_0x308f2c[_0x1f84ad(0x200)];tgBot[_0x1f84ad(0x11e)](_0x308f2c['id'])[_0x1f84ad(0x149)](async()=>{const _0x596051=_0x1f84ad;_0x3665af=='orders'&&(updateSetting(_0x596051(0x147),_0x596051(0xfd)),updateSetting(_0x596051(0x1a3),!![]),await tgBot[_0x596051(0x167)](_0x445c68[_0x596051(0x1f6)]['id'],_0x596051(0x206))[_0x596051(0x14b)](_0x59c411=>{telegramError(_0x59c411);}));_0x3665af=='alerts'&&(updateSetting(_0x596051(0x147),_0x596051(0x12b)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x445c68['chat']['id'],_0x596051(0x218))[_0x596051(0x14b)](_0x939515=>{telegramError(_0x939515);}));_0x3665af==_0x596051(0x114)&&(updateSetting(_0x596051(0x147),'all'),updateSetting(_0x596051(0x1a3),!![]),await tgBot[_0x596051(0x167)](_0x445c68['chat']['id'],_0x596051(0x181))[_0x596051(0x14b)](_0x174a8a=>{telegramError(_0x174a8a);}));if(!settings[_0x596051(0x1bf)])tgBot['sendMessage'](_0x445c68[_0x596051(0x1f6)]['id'],_0x596051(0x11d))[_0x596051(0x14b)](_0x507031=>{telegramError(_0x507031);});}),tgBot[_0x1f84ad(0x1d1)]('callback_query');});}),tgBot[_0x5b44f8(0x165)](/\/status/,_0x53e8a0=>{const _0x9c4329=_0x5b44f8;if(!validateTelegram(_0x53e8a0))return;let _0x6e31f8='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x9c4329(0x183)](_0x4086dd=>{const _0x1922fa=_0x9c4329;_0x6e31f8+=_0x1922fa(0x20d)+_0x4086dd[_0x1922fa(0x10b)]+_0x1922fa(0x1fb)+_0x4086dd[_0x1922fa(0x13b)]+':\x20'+_0x4086dd[_0x1922fa(0x131)]+_0x1922fa(0x13d)+_0x4086dd[_0x1922fa(0x150)]+'\x0a';}),_0x6e31f8+='\x0a',_0x6e31f8+=_0x9c4329(0x1dd),_0x6e31f8+=!settings[_0x9c4329(0x1a3)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x6e31f8+=settings['telegramEnabled']?settings['telegramEvents']=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x9c4329(0x1b8)+settings[_0x9c4329(0x147)]+_0x9c4329(0x1c3):'',tgBot[_0x9c4329(0x167)](_0x53e8a0[_0x9c4329(0x1f6)]['id'],_0x6e31f8,{'parse_mode':_0x9c4329(0x12a)})[_0x9c4329(0x14b)](_0x5665d=>{telegramError(_0x5665d);});}),tgBot[_0x5b44f8(0x165)](/\/restart/,_0x2e8806=>{const _0x25403d=_0x5b44f8;if(!validateTelegram(_0x2e8806))return;tgBot[_0x25403d(0x1d1)](_0x25403d(0x1b4));const _0x97fc6c=getEnabledBots();if(_0x97fc6c['length']==0x0)tgBot['sendMessage'](_0x2e8806[_0x25403d(0x1f6)]['id'],_0x25403d(0x10c))['catch'](_0x19f4e3=>{telegramError(_0x19f4e3);});else{if(_0x97fc6c[_0x25403d(0x1ad)]>0x1)_0x97fc6c[_0x25403d(0x1a8)]({'botID':_0x25403d(0x114)});let _0x146daa=[],_0x34f736=[];const _0x486ef5=_0x97fc6c[_0x25403d(0x1ad)]%0x4==0x0||_0x97fc6c[_0x25403d(0x1ad)]%0x4==0x3||_0x97fc6c[_0x25403d(0x1ad)]%0x3==0x1?0x4:0x3;let _0x40e4a8=0x0;_0x97fc6c['forEach']((_0x47b8ec,_0x447fd3)=>{const _0x1605b2=_0x25403d;if(_0x447fd3%_0x486ef5==0x0)_0x34f736=[];_0x34f736['push']({'text':_0x47b8ec['botID']=='all'?_0x1605b2(0xe2):'Bot\x20'+_0x47b8ec[_0x1605b2(0x10b)],'callback_data':_0x47b8ec[_0x1605b2(0x10b)]}),_0x447fd3%_0x486ef5==0x0&&(_0x146daa[_0x40e4a8]=_0x34f736,_0x40e4a8++);}),tgBot[_0x25403d(0x167)](_0x2e8806[_0x25403d(0x1f6)]['id'],_0x25403d(0x205),{'reply_markup':{'inline_keyboard':_0x146daa}})[_0x25403d(0x14b)](_0x2d2dce=>{telegramError(_0x2d2dce);}),tgBot['on'](_0x25403d(0x1b4),async _0x871d67=>{const _0xfd4215=_0x25403d,_0x43174c=_0x871d67[_0xfd4215(0xe3)],_0x472b24=_0x871d67['message'];tgBot[_0xfd4215(0x11e)](_0x871d67['id'])[_0xfd4215(0x149)](async()=>{const _0x124edb=_0xfd4215;if(_0x43174c==_0x124edb(0x114)){if(settings[_0x124edb(0x147)]==_0x124edb(0xfd))tgBot[_0x124edb(0x167)](_0x472b24['chat']['id'],_0x124edb(0x1be))[_0x124edb(0x14b)](_0x4851a8=>{telegramError(_0x4851a8);});config[_0x124edb(0x183)](_0x2dbc53=>{const _0x26b8f7=_0x124edb;restartBot(_0x2dbc53[_0x26b8f7(0x10b)]);});}else{if(settings[_0x124edb(0x147)]=='orders')tgBot['sendMessage'](_0x472b24[_0x124edb(0x1f6)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x43174c)['catch'](_0x51ea2e=>{telegramError(_0x51ea2e);});restartBot(_0x43174c);}}),tgBot[_0xfd4215(0x1d1)]('callback_query');});}}),tgBot[_0x5b44f8(0x165)](/\/on/,_0x4436f5=>{const _0x38809e=_0x5b44f8;if(!validateTelegram(_0x4436f5))return;tgBot[_0x38809e(0x1d1)]('callback_query');const _0x5a5a15=getDisabledBots();if(_0x5a5a15[_0x38809e(0x1ad)]==0x0)tgBot[_0x38809e(0x167)](_0x4436f5['chat']['id'],_0x38809e(0x213))[_0x38809e(0x14b)](_0x207fd4=>{telegramError(_0x207fd4);});else{if(_0x5a5a15[_0x38809e(0x1ad)]>0x1)_0x5a5a15[_0x38809e(0x1a8)]({'botID':'all'});let _0x234e8e=[],_0x2aa5fa=[];const _0x189433=_0x5a5a15['length']%0x4==0x0||_0x5a5a15[_0x38809e(0x1ad)]%0x4==0x3||_0x5a5a15['length']%0x3==0x1?0x4:0x3;let _0x115dbf=0x0;_0x5a5a15[_0x38809e(0x183)]((_0x44e7b7,_0x26521f)=>{const _0x17bd6e=_0x38809e;if(_0x26521f%_0x189433==0x0)_0x2aa5fa=[];_0x2aa5fa['push']({'text':_0x44e7b7['botID']==_0x17bd6e(0x114)?'All\x20bots':_0x17bd6e(0x20d)+_0x44e7b7[_0x17bd6e(0x10b)],'callback_data':_0x44e7b7['botID']}),_0x26521f%_0x189433==0x0&&(_0x234e8e[_0x115dbf]=_0x2aa5fa,_0x115dbf++);}),tgBot[_0x38809e(0x167)](_0x4436f5[_0x38809e(0x1f6)]['id'],_0x38809e(0x175),{'reply_markup':{'inline_keyboard':_0x234e8e}})[_0x38809e(0x14b)](_0x503964=>{telegramError(_0x503964);}),tgBot['on']('callback_query',async _0x4916a0=>{const _0x571de2=_0x38809e,_0x210cae=_0x4916a0[_0x571de2(0xe3)],_0x5687b9=_0x4916a0[_0x571de2(0x200)];tgBot['answerCallbackQuery'](_0x4916a0['id'])[_0x571de2(0x149)](async()=>{const _0x5d9e42=_0x571de2;if(_0x210cae==_0x5d9e42(0x114)){if(settings[_0x5d9e42(0x147)]=='orders')tgBot[_0x5d9e42(0x167)](_0x5687b9[_0x5d9e42(0x1f6)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x5d9e42(0x14b)](_0x20cf74=>{telegramError(_0x20cf74);});_0x5a5a15[_0x5d9e42(0x183)](_0x157782=>{const _0x2a21d4=_0x5d9e42;if(_0x157782[_0x2a21d4(0x10b)]!='all')toggleBot(_0x157782[_0x2a21d4(0x10b)],toggleStatus(_0x157782['botID']),_0x2a21d4(0x1cf));});}else{if(settings[_0x5d9e42(0x147)]==_0x5d9e42(0xfd))tgBot[_0x5d9e42(0x167)](_0x5687b9[_0x5d9e42(0x1f6)]['id'],_0x5d9e42(0x21f)+_0x210cae)['catch'](_0x5c58c8=>{telegramError(_0x5c58c8);});toggleBot(_0x210cae,toggleStatus(_0x210cae),'stopped');}}),tgBot['removeListener'](_0x571de2(0x1b4));});}}),tgBot['onText'](/\/off/,_0x4fa6b6=>{const _0x44ebe2=_0x5b44f8;if(!validateTelegram(_0x4fa6b6))return;tgBot[_0x44ebe2(0x1d1)](_0x44ebe2(0x1b4));const _0x28027e=getEnabledBots();if(_0x28027e[_0x44ebe2(0x1ad)]==0x0)tgBot[_0x44ebe2(0x167)](_0x4fa6b6[_0x44ebe2(0x1f6)]['id'],_0x44ebe2(0x10c))[_0x44ebe2(0x14b)](_0x2e7c8f=>{telegramError(_0x2e7c8f);});else{if(_0x28027e[_0x44ebe2(0x1ad)]>0x1)_0x28027e[_0x44ebe2(0x1a8)]({'botID':_0x44ebe2(0x114)});let _0x5bc10a=[],_0x385117=[];const _0x186d16=_0x28027e['length']%0x4==0x0||_0x28027e['length']%0x4==0x3||_0x28027e[_0x44ebe2(0x1ad)]%0x3==0x1?0x4:0x3;let _0x5b6a18=0x0;_0x28027e[_0x44ebe2(0x183)]((_0x20222f,_0x61732c)=>{const _0x49c160=_0x44ebe2;if(_0x61732c%_0x186d16==0x0)_0x385117=[];_0x385117['push']({'text':_0x20222f[_0x49c160(0x10b)]==_0x49c160(0x114)?_0x49c160(0xe2):_0x49c160(0x20d)+_0x20222f[_0x49c160(0x10b)],'callback_data':_0x20222f[_0x49c160(0x10b)]}),_0x61732c%_0x186d16==0x0&&(_0x5bc10a[_0x5b6a18]=_0x385117,_0x5b6a18++);}),tgBot[_0x44ebe2(0x167)](_0x4fa6b6[_0x44ebe2(0x1f6)]['id'],_0x44ebe2(0x120),{'reply_markup':{'inline_keyboard':_0x5bc10a}})[_0x44ebe2(0x14b)](_0x513459=>{telegramError(_0x513459);}),tgBot['on'](_0x44ebe2(0x1b4),async _0x141de7=>{const _0x141a82=_0x44ebe2,_0x688588=_0x141de7[_0x141a82(0xe3)],_0x40e8d2=_0x141de7[_0x141a82(0x200)];tgBot[_0x141a82(0x11e)](_0x141de7['id'])[_0x141a82(0x149)](async()=>{const _0x2367f1=_0x141a82;if(_0x688588==_0x2367f1(0x114)){if(settings['telegramEvents']==_0x2367f1(0xfd))tgBot[_0x2367f1(0x167)](_0x40e8d2[_0x2367f1(0x1f6)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x2367f1(0x14b)](_0x4bab6d=>{telegramError(_0x4bab6d);});_0x28027e[_0x2367f1(0x183)](_0x2204dc=>{const _0x5728df=_0x2367f1;if(_0x2204dc[_0x5728df(0x10b)]!=_0x5728df(0x114))toggleBot(_0x2204dc[_0x5728df(0x10b)],toggleStatus(_0x2204dc[_0x5728df(0x10b)]),_0x5728df(0x1cf));});}else{if(settings['telegramEvents']==_0x2367f1(0xfd))tgBot['sendMessage'](_0x40e8d2[_0x2367f1(0x1f6)]['id'],_0x2367f1(0xf7)+_0x688588)[_0x2367f1(0x14b)](_0x22d443=>{telegramError(_0x22d443);});toggleBot(_0x688588,toggleStatus(_0x688588),_0x2367f1(0x1cf));}}),tgBot[_0x141a82(0x1d1)]('callback_query');});}}),tgBot['onText'](/\/disable/,_0x50b3e5=>{const _0x40d5fa=_0x5b44f8;if(!validateTelegram(_0x50b3e5))return;tgBot[_0x40d5fa(0x167)](_0x50b3e5[_0x40d5fa(0x1f6)]['id'],_0x40d5fa(0x1a1))[_0x40d5fa(0x14b)](_0x13de42=>{telegramError(_0x13de42);}),updateSetting(_0x40d5fa(0x1a3),![]);}),tgBot[_0x5b44f8(0x165)](/\/help/,_0x362ba7=>{const _0x555c42=_0x5b44f8;if(!validateTelegram(_0x362ba7))return;tgBot['sendMessage'](_0x362ba7[_0x555c42(0x1f6)]['id'],_0x2e43a7)[_0x555c42(0x14b)](_0x3ecc44=>{telegramError(_0x3ecc44);});}),tgBot['on'](_0x5b44f8(0x172),_0x20fb89=>{const _0x58fa6f=_0x5b44f8;_0x20fb89[_0x58fa6f(0x162)]()[_0x58fa6f(0x18d)](_0x58fa6f(0x1e6))&&(logging(_0x58fa6f(0x15f)),tgBot[_0x58fa6f(0x219)](),tgBot=null,io['to'](_0x58fa6f(0x19e))[_0x58fa6f(0x137)](_0x58fa6f(0xeb),_0x58fa6f(0x15f)));}),process['once'](_0x5b44f8(0xfc),()=>{const _0x5cd45f=_0x5b44f8;if(tgBot)tgBot[_0x5cd45f(0x219)]();process['exit'](0x1);}),process[_0x5b44f8(0x153)]('SIGTERM',()=>{const _0x2e4dde=_0x5b44f8;if(tgBot)tgBot[_0x2e4dde(0x219)]();process[_0x2e4dde(0x207)](0x1);});}}function disableTelegram(){const _0x577dcb=_0x6bf650;tgBot&&(tgBot[_0x577dcb(0x219)](),tgBot=null);}function sendTelegram(_0x13c91a,_0x45c62f){const _0x66f09b=_0x6bf650;if(settings['telegramEnabled']){if(settings[_0x66f09b(0x147)]==_0x66f09b(0x114)||(_0x45c62f[_0x66f09b(0x123)]=='error'||_0x45c62f[_0x66f09b(0x123)]==_0x66f09b(0x129))&&settings[_0x66f09b(0x147)]==_0x66f09b(0x12b)||_0x45c62f[_0x66f09b(0x123)]==_0x66f09b(0x133)&&settings['telegramEvents']==_0x66f09b(0xfd)){if(tgBot&&settings['telegramChatId']){if(_0x45c62f['showname'])tgBot['sendMessage'](settings['telegramChatId'],_0x45c62f['botname']+_0x66f09b(0x1f5)+_0x45c62f[_0x66f09b(0x20f)])['catch'](_0x263a3c=>{telegramError(_0x263a3c);});else tgBot[_0x66f09b(0x167)](settings[_0x66f09b(0x1bf)],_0x66f09b(0x20d)+_0x13c91a+_0x66f09b(0x1f5)+_0x45c62f[_0x66f09b(0x20f)])['catch'](_0x5a9bcc=>{telegramError(_0x5a9bcc);});}}}}function getDeviceWithIp(_0x1f57cb){const _0x443ff9=_0x6bf650;return devices[_0x443ff9(0xf9)](_0x22aa43=>_0x22aa43['ip']===_0x1f57cb);}function temporaryAccess2FA(_0x20afad,_0x513b78){const _0x2fc5f4=_0x6bf650;let _0x235e37=new Date(),_0x48dfa3=![];if(lastIpApproval){if(_0x235e37-lastIpApproval<0x1388)_0x48dfa3=!![];}lastIpApproval=new Date();if(_0x48dfa3)return;tgBot&&settings[_0x2fc5f4(0x1bf)]&&(tgBot[_0x2fc5f4(0x1d1)]('callback_query'),tgBot[_0x2fc5f4(0x167)](settings[_0x2fc5f4(0x1bf)],_0x2fc5f4(0x211)+normalizeIP(_0x513b78)['show']+'</b>\x20?',{'parse_mode':_0x2fc5f4(0x12a),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2fc5f4(0x119),'callback_data':'30'},{'text':_0x2fc5f4(0x1c7),'callback_data':'reject'}]]}})[_0x2fc5f4(0x14b)](_0x226f76=>{telegramError(_0x226f76);}),tgBot['on'](_0x2fc5f4(0x1b4),async _0x57ae35=>{const _0x4422cf=_0x2fc5f4,_0x10d13f=_0x57ae35[_0x4422cf(0xe3)],_0x4ec535=_0x57ae35[_0x4422cf(0x200)];tgBot[_0x4422cf(0x11e)](_0x57ae35['id'])[_0x4422cf(0x149)](async()=>{const _0x2e328e=_0x4422cf;devices[_0x20afad][_0x2e328e(0x10a)]={'clientip':_0x513b78,'timestamp':new Date()[_0x2e328e(0x1d9)](),'expiry':_0x10d13f},_0x10d13f!=_0x2e328e(0x1c7)?(await tgBot[_0x2e328e(0x167)](_0x4ec535[_0x2e328e(0x1f6)]['id'],_0x2e328e(0x16f)+_0x10d13f+'\x20minutes',{'parse_mode':'HTML'})['catch'](_0x474303=>{telegramError(_0x474303);}),io['to'](_0x20afad)[_0x2e328e(0x137)](_0x2e328e(0x131),{'access':{'allow':![],'reason':_0x2e328e(0x13f),'token':null}})):(await tgBot[_0x2e328e(0x167)](_0x4ec535[_0x2e328e(0x1f6)]['id'],'Temporary\x20access\x20rejected')[_0x2e328e(0x14b)](_0x1ae6d4=>{telegramError(_0x1ae6d4);}),io['to'](_0x20afad)[_0x2e328e(0x137)](_0x2e328e(0x131),{'access':{'allow':![],'reason':_0x2e328e(0x104),'token':null}}));}),tgBot[_0x4422cf(0x1d1)](_0x4422cf(0x1b4));}));}function loginAccess2FA(_0x107a0c,_0x225c08){const _0x29c143=_0x6bf650;tgBot&&settings[_0x29c143(0x1bf)]&&(tgBot[_0x29c143(0x1d1)]('callback_query'),tgBot[_0x29c143(0x167)](settings[_0x29c143(0x1bf)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x225c08)[_0x29c143(0x1b1)]+_0x29c143(0xff),{'parse_mode':_0x29c143(0x12a),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x29c143(0x14b)](_0xfb6b54=>{telegramError(_0xfb6b54);}),tgBot['on'](_0x29c143(0x1b4),async _0x2d2efd=>{const _0x4a13e1=_0x29c143,_0x91e138=_0x2d2efd[_0x4a13e1(0xe3)],_0x507003=_0x2d2efd['message'];tgBot[_0x4a13e1(0x11e)](_0x2d2efd['id'])[_0x4a13e1(0x149)](async()=>{const _0x18f4f8=_0x4a13e1;devices[_0x107a0c][_0x18f4f8(0x1ec)]={'clientip':_0x225c08,'timestamp':new Date()['getTime'](),'expiry':_0x91e138},_0x91e138!=_0x18f4f8(0x1c7)?(await tgBot[_0x18f4f8(0x167)](_0x507003[_0x18f4f8(0x1f6)]['id'],_0x18f4f8(0x118),{'parse_mode':'HTML'})[_0x18f4f8(0x14b)](_0x3f4489=>{telegramError(_0x3f4489);}),io['to'](_0x107a0c)[_0x18f4f8(0x137)](_0x18f4f8(0x131),{'access':{'allow':![],'reason':_0x18f4f8(0x13f),'token':null}})):(await tgBot['sendMessage'](_0x507003['chat']['id'],_0x18f4f8(0x1d7))[_0x18f4f8(0x14b)](_0x3200c2=>{telegramError(_0x3200c2);}),io['to'](_0x107a0c)[_0x18f4f8(0x137)](_0x18f4f8(0x131),{'access':{'allow':![],'reason':_0x18f4f8(0x177),'token':null}}));}),tgBot[_0x4a13e1(0x1d1)](_0x4a13e1(0x1b4));}));}function getConfiguration(){const _0x2f3365=_0x6bf650;return dbConfig[_0x2f3365(0x173)](_0x2f3365(0x179))[_0x2f3365(0xe5)](_0x2f3365(0x10b))[_0x2f3365(0x130)]()||[];}function getEnabledBots(){const _0x53f7aa=_0x6bf650;return dbConfig['get'](_0x53f7aa(0x179))[_0x53f7aa(0xe5)](_0x53f7aa(0x10b))[_0x53f7aa(0x1c2)]({'status':_0x53f7aa(0x1a9)})[_0x53f7aa(0x130)]()||[];}function getDisabledBots(){const _0x55714f=_0x6bf650;return dbConfig['get']('bots')[_0x55714f(0xe5)](_0x55714f(0x10b))[_0x55714f(0x1c2)]({'status':_0x55714f(0x1b7)})['value']()||[];}function getSettings(){const _0x26206a=_0x6bf650;return dbSettings[_0x26206a(0x173)](_0x26206a(0x10f))[_0x26206a(0x130)]()||{'timeshift':0x0};}function getSecure(){const _0x28c178=_0x6bf650;return dbSecure[_0x28c178(0x173)](_0x28c178(0x1b9))[_0x28c178(0x130)]()||{};}function getBlacklist(){const _0xcf76bb=_0x6bf650;return dbSecure['get'](_0xcf76bb(0x12c))[_0xcf76bb(0x130)]()||[];}function broadcastToBots(_0x1d99c5,_0x4ff6ac){const _0x5db296=_0x6bf650;config[_0x5db296(0x183)](_0x36f1a1=>{const _0x3b2b0c=_0x5db296;if(_0x36f1a1['status']==_0x3b2b0c(0x1a9)&&_0x36f1a1[_0x3b2b0c(0x150)]=='running'){if(pid[_0x36f1a1[_0x3b2b0c(0x10b)]])pid[_0x36f1a1[_0x3b2b0c(0x10b)]][_0x3b2b0c(0x20c)]({[_0x1d99c5]:_0x4ff6ac});}});}function storeSettings(_0x498802,_0x29ef02=![]){const _0x5167fd=_0x6bf650;_0x498802={...settings,..._0x498802};if(_0x29ef02&&_0x498802[_0x5167fd(0x1c1)]!=_0x5167fd(0xee)&&_0x498802[_0x5167fd(0x1c1)]!=''){const _0x1b4dab=crypt[_0x5167fd(0x148)](secure[_0x5167fd(0x1df)],_0x498802['bbPassword'])['message'][_0x5167fd(0x190)]('@')[0x0],_0x1d064a=bcrypt[_0x5167fd(0x1a5)](_0x1b4dab,saltRounds);_0x498802={..._0x498802,'bbPassword':_0x1d064a};}if(_0x29ef02&&_0x498802[_0x5167fd(0x1fe)]!=_0x5167fd(0xee)&&_0x498802[_0x5167fd(0x1fe)]!=''){const _0x359f91=crypt['decrypt'](secure[_0x5167fd(0x1df)],_0x498802[_0x5167fd(0x1fe)])['message'][_0x5167fd(0x190)]('@')[0x0];_0x498802={..._0x498802,'telegramToken':_0x359f91};}const _0x3eec48=_0x498802[_0x5167fd(0x1fe)]!=_0x5167fd(0xee)&&_0x498802[_0x5167fd(0x1fe)]!=settings[_0x5167fd(0x1fe)]||_0x498802[_0x5167fd(0x1f1)]!=settings[_0x5167fd(0x1f1)],_0x547db2=_0x498802[_0x5167fd(0x1fe)]==''||_0x498802[_0x5167fd(0x1f1)]=='';if(_0x3eec48)_0x498802[_0x5167fd(0x147)]=_0x5167fd(0x114);for(const [_0x59f60e,_0x7f91f3]of Object[_0x5167fd(0x203)](_0x498802)){if(_0x59f60e=='telegramToken'&&_0x7f91f3==_0x5167fd(0xee)){_0x498802[_0x5167fd(0x1fe)]=settings[_0x5167fd(0x1fe)];continue;};if(_0x59f60e=='bbPassword'&&_0x7f91f3=='************'){_0x498802['bbPassword']=settings[_0x5167fd(0x1c1)];continue;};dbSettings[_0x5167fd(0xf5)](_0x5167fd(0xe9)+_0x59f60e,_0x7f91f3)[_0x5167fd(0x1e0)]();}settings=_0x498802,io['to'](_0x5167fd(0x19e))[_0x5167fd(0x137)]('settings',cleanSettings()),broadcastToBots(_0x5167fd(0x1ed),settings[_0x5167fd(0x1ed)]);if(_0x3eec48&&!_0x547db2)initTelegram();if(_0x3eec48&&_0x547db2)disableTelegram();getAllClients()[_0x5167fd(0x183)](_0x3e85f7=>{getSocket(_0x3e85f7['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x132e03,_0x18d8ea){const _0x949c14=_0x6bf650;dbSettings[_0x949c14(0xf5)]('settings.'+_0x132e03,_0x18d8ea)[_0x949c14(0x1e0)](),settings=getSettings(),io['to']('botmanager')[_0x949c14(0x137)](_0x949c14(0x10f),cleanSettings());}function storeSecure(_0x28d641){const _0x30605c=_0x6bf650;dbSecure['get'](_0x30605c(0x1b9))[_0x30605c(0x1a8)](_0x28d641)[_0x30605c(0x1e0)](),secure=_0x28d641;}function addBlacklist(_0x481619){const _0x313b1a=_0x6bf650;cleanBlacklist();let _0x41cb4d;devices[_0x481619]['telegramIpApproval']?_0x41cb4d=Math[_0x313b1a(0x1e9)](devices[_0x481619][_0x313b1a(0x10a)]['expiry'],loginExpiry):_0x41cb4d=loginExpiry,dbSecure['get']('blacklist')[_0x313b1a(0x1a8)]({'expiry':new Date()[_0x313b1a(0x1d9)]()+_0x41cb4d*0x3c*0x3e8,'token':devices[_0x481619]['access'][_0x313b1a(0xe1)]})[_0x313b1a(0x1e0)](),blacklist=dbSecure[_0x313b1a(0x173)](_0x313b1a(0x12c))[_0x313b1a(0x130)]();}function _0x3439(){const _0x46f868=['notification','Balance\x20Bot\x20Server','jsonwebtoken','************','ipv6','encryptedUuid','connected','assign','bb-config.json','handshake','set','username','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','storeHeadless','find','Invalid\x20authentication\x20token\x20(2)','get-starting-balances','SIGINT','orders','use','</b>\x20?','get-logs','Orders','/:bot/coins','started','temporary\x20access\x20rejected','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','connection','2ySNRTz','map','2FA','telegramIpApproval','botID','No\x20bots\x20running\x20right\x20now','toIPv4MappedAddress','getFullYear','settings','login\x20token\x20generated','store-settings','716712bMNblq','kill','all','analytics','-performance.json','port','Login\x20accepted','30\x20min','sockets','-----------------------------------------------------------------------------------','hasOwnProperty','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','answerCallbackQuery','f2aRequired','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Token\x20blacklisted','path','type','/enable\x20-\x20enable\x20notifications\x0a','2FA\x20login\x20required','-results.json','temporaryAccessAllowed','argv','success','HTML','alerts','blacklist','2FA\x20required','remove','access','value','status','getStartingBalances','order','publicKey','bot.js','All','emit','getMinutes','whitelistEnabled','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','botname','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','\x20/\x20','search','reload','new-disabled','error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','Invalid\x20username\x20or\x20IP\x20address','temporary\x20access\x20not\x20allowed','bot','login\x20token\x20valid','telegramEvents','decrypt','then','randomBytes','catch','sign','pidExpireLogin','deleted\x20Bot\x20','disconnect','live','806670ZumbUb','::1','once','getUTCHours','keys','https://hodlerhacks.com','default','Error:\x20Invalid\x20argument\x20','sha256','index.html','getPortfolio','build','/help\x20-\x20show\x20available\x20commands\x0a','Notifications\x20enabled','Invalid\x20Telegram\x20token','Invalid\x20authentication\x20token\x20(1)','/:bot/performance','toString','starting\x20new\x20bot\x20|\x20Bot\x20','inherit','onText','1512528PEMUSt','sendMessage','fork','new','env','kind','timestamp','logout','place-order','Access\x20enabled\x20for\x20','whitelist','page','polling_error','get','node-telegram-bot-api','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/disable\x20-\x20disable\x20notifications\x0a','2FA\x20login\x20rejected',':\x20Bot\x20Mgr\x20>\x20','bots','telegram','bcryptjs','RSA','1855845xGHPNZ','1000','expiry','Crypt','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bbUsername','forEach','isDirectory','exp','/:bot/configuration','temporary\x20token\x20generated','delete-bot','headers','emitHistory','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Password\x20reset\x20rejected','includes','lowdb/adapters/FileSync','name','split','getSeconds','bb-settings.json','build2','socket.io','Unauthorized\x20attempt\x20to\x20add\x20bot','createServer','slice','referer','NTBA_FIX_319','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20update\x20settings','clients','mkdirSync','botmanager','login','pidRefreshToken','Notifications\x20disabled','/status\x20-\x20show\x20bot(s)\x20status\x0a','telegramEnabled','No\x20authentication\x20token','hashSync','Unauthorized\x20login\x20attempt\x20(timeout)','/on\x20-\x20start\x20bot(s)\x0a','push','enabled','Alerts','Unauthorized\x20attempt\x20to\x20get\x20logs','uuid','length','config/','bb/','http','show','invalid\x20credentials','login\x20required','callback_query','padStart','Unauthorized\x20attempt\x20to\x20delete\x20bot','disabled','Notifications\x20types:\x20','secure','logged\x20out','user','stop','allow','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','telegramChatId','storeConfiguration','bbPassword','filter','\x20only\x0a','clientip','getHours','ipc','reject','server','defaults','loginRequired','error','(((.+)+)+)+$','child_process','store-headless','stopped','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','removeListener','2FA\x20login\x20token\x20generated','version','Invalid\x20IP\x20address','bot-','cloneDeep','Login\x20rejected','enabled\x20Bot\x20','getTime','RSA-OAEP','/:bot/support','reset-password','<b>Telegram\x20bot\x20status:</b>\x0a','from','privateKey','write','initclient','hybrid-crypto-js','access\x20timeout','update-bot','unlinkSync','404\x20Not\x20Found',',\x20must\x20be\x20a\x204\x20digit\x20number','yargs/yargs','max','/:bot/history','sendFile','telegram2FaApproval','timeshift','auth','listen','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','telegramUsername','reason','getDate','3000','\x20>\x20','chat','version.json','match','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','temporary\x20access\x20timeout','\x20|\x20','login\x20not\x20required','get-portfolio','telegramToken','parse','message','apiKey','UA-192771731-1','entries','static','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Ok,\x20will\x20send\x20order\x20notifications\x20only','exit','::ffff:127.0.0.1','@analytics/google-analytics','User\x20has\x20been\x20validated','apply','send','Bot\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','event','yes','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','join','All\x20bots\x20running\x20right\x20now','127.0.0.1','log','existsSync','lowdb','Ok,\x20will\x20send\x20alert\x20notifications\x20only','stopPolling','You\x20can\x20use\x20the\x20following\x20commands:\x0a','cancelLoading','getMonth','/:bot','date-fns','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','5ycWEUi','Unauthorized\x20attempt\x20to\x20log\x20out','bb-secure.json','1737890ssToKL','add','token','All\x20bots','data','120801jruTki','sortBy','743262WpGwvW','removeAllListeners','secret','settings.','-config.json'];_0x3439=function(){return _0x46f868;};return _0x3439();}function cleanBlacklist(){const _0x37ce41=_0x6bf650;let _0x44fb69=dbSecure['get'](_0x37ce41(0x12c))[_0x37ce41(0x1d6)]()[_0x37ce41(0x130)](),_0x1e2065=new Date()[_0x37ce41(0x1d9)]();_0x44fb69[_0x37ce41(0x183)](_0x5cb97b=>{const _0x5d20e4=_0x37ce41;_0x5cb97b[_0x5d20e4(0x17f)]<_0x1e2065&&dbSecure[_0x5d20e4(0x173)]('blacklist')[_0x5d20e4(0x12e)]({'expiry':_0x5cb97b[_0x5d20e4(0x17f)]})['write']();});}function initStates(){const _0x2e6d6f=_0x6bf650;let _0x4ff099=getConfiguration();_0x4ff099[_0x2e6d6f(0x183)](_0x706e92=>{const _0x4ef70a=_0x2e6d6f;_0x706e92[_0x4ef70a(0x150)]=_0x4ef70a(0x1cf);}),storeConfiguration(_0x4ff099);}function onKeys(){const _0x5e0a18=new RSA();return new Promise(_0x291b02=>{const _0x423447=_0xfa51;_0x5e0a18[_0x423447(0x19a)]()['then'](_0xced42b=>{_0x291b02(_0xced42b);});});}function _0xfa51(_0x58e4f5,_0x3ef960){const _0x1dd727=_0x3439();return _0xfa51=function(_0x2819de,_0x51b429){_0x2819de=_0x2819de-0xdd;let _0x3439fe=_0x1dd727[_0x2819de];return _0x3439fe;},_0xfa51(_0x58e4f5,_0x3ef960);}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x49191a=_0x6bf650;let _0x2eec8d=getConfiguration(),_0x1d36b6=![];_0x2eec8d[_0x49191a(0x183)](_0x3d20a2=>{const _0x5dcc55=_0x49191a;if(_0x3d20a2[_0x5dcc55(0x131)]=='running')_0x3d20a2[_0x5dcc55(0x131)]=_0x5dcc55(0x1a9),_0x1d36b6=!![];else _0x3d20a2[_0x5dcc55(0x131)]==_0x5dcc55(0x1cf)&&(_0x3d20a2[_0x5dcc55(0x131)]=_0x5dcc55(0x1b7),_0x1d36b6=!![]);});if(_0x1d36b6)storeConfiguration(_0x2eec8d);let _0x10a23d=getSecure();if(!_0x10a23d[_0x49191a(0x11c)]('secret')){let _0x2a1da1=await generateKeys();_0x10a23d['publicKey']=_0x2a1da1[_0x49191a(0x134)],_0x10a23d['privateKey']=_0x2a1da1['privateKey'],_0x10a23d['secret']=crypto[_0x49191a(0x14a)](0x20)[_0x49191a(0x162)]('hex');;storeSecure(_0x10a23d);}let _0x55eb5b=getSettings();_0x1d36b6=![];!_0x55eb5b['hasOwnProperty'](_0x49191a(0x1ca))&&(_0x55eb5b['loginRequired']=![],_0x55eb5b[_0x49191a(0x182)]='',_0x55eb5b['bbPassword']='',_0x55eb5b['f2aRequired']=![],_0x1d36b6=!![]);!_0x55eb5b[_0x49191a(0x11c)](_0x49191a(0x139))&&(_0x55eb5b[_0x49191a(0x139)]=![],_0x55eb5b[_0x49191a(0x170)]=[],_0x55eb5b[_0x49191a(0x127)]=![],_0x1d36b6=!![]);if(!_0x55eb5b[_0x49191a(0x11c)](_0x49191a(0x1a3))){if(_0x55eb5b[_0x49191a(0x1bf)])_0x55eb5b[_0x49191a(0x1a3)]=!![];else _0x55eb5b[_0x49191a(0x1a3)]=![];_0x1d36b6=!![];}if(_0x1d36b6)storeSettings(_0x55eb5b);}function storeConfiguration(_0x5e790f){const _0x2ca16f=_0x6bf650;dbConfig[_0x2ca16f(0x173)]('bots')['remove']()[_0x2ca16f(0x1e0)](),dbConfig[_0x2ca16f(0x173)](_0x2ca16f(0x179))[_0x2ca16f(0x1a8)](..._0x5e790f)['write'](),config=_0x5e790f;}function resetPassword(){const _0x575470=_0x6bf650;tgBot&&settings[_0x575470(0x1bf)]&&(tgBot[_0x575470(0x1d1)](_0x575470(0x1b4)),tgBot[_0x575470(0x167)](settings[_0x575470(0x1bf)],_0x575470(0x105),{'parse_mode':_0x575470(0x12a),'reply_markup':{'inline_keyboard':[[{'text':_0x575470(0x210),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4c4e7d=>{telegramError(_0x4c4e7d);}),tgBot['on'](_0x575470(0x1b4),async _0x574dd2=>{const _0x42b1b7=_0x575470,_0x245a73=_0x574dd2['data'],_0x21763a=_0x574dd2[_0x42b1b7(0x200)];tgBot[_0x42b1b7(0x11e)](_0x574dd2['id'])[_0x42b1b7(0x149)](async()=>{const _0x51a2b2=_0x42b1b7;if(_0x245a73!='no'){const _0x4a3018=0xf,_0x34fcc0=_0x51a2b2(0x1f9),_0x1f4fac=Array[_0x51a2b2(0x1de)](crypto['randomFillSync'](new Uint32Array(_0x4a3018)))[_0x51a2b2(0x108)](_0x5c991e=>_0x34fcc0[_0x5c991e%_0x34fcc0['length']])['join'](''),_0x4e30dc=bcrypt[_0x51a2b2(0x1a5)](_0x1f4fac,saltRounds);storeSettings({'bbPassword':_0x4e30dc}),await tgBot[_0x51a2b2(0x167)](_0x21763a['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x1f4fac,{'parse_mode':'HTML'})[_0x51a2b2(0x14b)](_0x1708a5=>{telegramError(_0x1708a5);});}else await tgBot['sendMessage'](_0x21763a[_0x51a2b2(0x1f6)]['id'],_0x51a2b2(0x18c))[_0x51a2b2(0x14b)](_0x2d9f46=>{telegramError(_0x2d9f46);});}),tgBot[_0x42b1b7(0x1d1)](_0x42b1b7(0x1b4));}));}function logging(_0x4b8c6b){const _0x9ac9ee=_0x6bf650;console[_0x9ac9ee(0x215)](getTimeStamp()+_0x9ac9ee(0x178)+_0x4b8c6b);if(tgBot&&settings[_0x9ac9ee(0x1bf)]&&settings[_0x9ac9ee(0x147)]!=_0x9ac9ee(0xfd))tgBot[_0x9ac9ee(0x167)](settings[_0x9ac9ee(0x1bf)],'Bot\x20Mgr\x20>\x20'+_0x4b8c6b)[_0x9ac9ee(0x14b)](_0x463709=>{telegramError(_0x463709);});}function getServerTime(){const _0x7bb779=_0x6bf650,_0x4892cd=new Date();return _0x4892cd[_0x7bb779(0x10e)]()+'/'+(_0x4892cd['getMonth']()+0x1)[_0x7bb779(0x162)]()[_0x7bb779(0x1b5)](0x2,'0')+'/'+_0x4892cd['getDate']()[_0x7bb779(0x162)]()[_0x7bb779(0x1b5)](0x2,'0')+'\x20'+_0x4892cd[_0x7bb779(0x1c5)]()[_0x7bb779(0x162)]()[_0x7bb779(0x1b5)](0x2,'0')+':'+_0x4892cd[_0x7bb779(0x138)]()[_0x7bb779(0x162)]()[_0x7bb779(0x1b5)](0x2,'0')+':'+_0x4892cd[_0x7bb779(0x191)]()[_0x7bb779(0x162)]()[_0x7bb779(0x1b5)](0x2,'0');}function getTimeStamp(){const _0x5f9bfe=_0x6bf650,_0x2fb7e7=shiftedTime();return _0x2fb7e7[_0x5f9bfe(0x10e)]()+'/'+(_0x2fb7e7[_0x5f9bfe(0x21c)]()+0x1)[_0x5f9bfe(0x162)]()[_0x5f9bfe(0x1b5)](0x2,'0')+'/'+_0x2fb7e7[_0x5f9bfe(0x1f3)]()[_0x5f9bfe(0x162)]()['padStart'](0x2,'0')+'\x20'+_0x2fb7e7[_0x5f9bfe(0x1c5)]()[_0x5f9bfe(0x162)]()[_0x5f9bfe(0x1b5)](0x2,'0')+':'+_0x2fb7e7[_0x5f9bfe(0x138)]()[_0x5f9bfe(0x162)]()['padStart'](0x2,'0')+':'+_0x2fb7e7[_0x5f9bfe(0x191)]()[_0x5f9bfe(0x162)]()[_0x5f9bfe(0x1b5)](0x2,'0');}function shiftedTime(){const _0x25252c=_0x6bf650,_0x399ae4=new Date();let _0x145838=_0x399ae4;if(settings[_0x25252c(0x1ed)]&&settings[_0x25252c(0x1ed)]!==0x0)_0x145838=fns[_0x25252c(0xe0)](_0x399ae4,{'hours':settings[_0x25252c(0x1ed)]});return _0x145838;}function startScheduler(){const _0x2910b9=_0x6bf650;let _0x5e4679=new Date()[_0x2910b9(0x154)]();_0x5e4679==0x1&&backupConfigFiles();_0x5e4679==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x563ede=>{const _0x356b1a=_0xfa51;if(!_0x563ede[_0x356b1a(0x184)]())fs['copyFileSync'](configpath+_0x563ede[_0x356b1a(0x18f)],configbackuppath+_0x563ede[_0x356b1a(0x18f)]);});}function triggerAnalytics(){const _0x452ffb=_0x6bf650;analytics[_0x452ffb(0x171)]({'title':_0x452ffb(0xec),'href':_0x452ffb(0x156),'path':'/v'+serverversion});}function validateCredentials(_0x133e82,_0x1d1e5b){const _0x4312fc=_0x6bf650;if(_0x133e82['username']==settings[_0x4312fc(0x182)]&&bcrypt['compareSync'](_0x133e82['password'],settings[_0x4312fc(0x1c1)])){if(settings[_0x4312fc(0x11f)])return{'allow':![],'reason':_0x4312fc(0x125),'token':null};else{const _0x5add48=generateLoginToken(_0x1d1e5b);return{'allow':!![],'reason':_0x4312fc(0x110),'token':_0x5add48};}}else return{'allow':![],'reason':_0x4312fc(0x1b2),'token':null};}function refreshToken(_0x4f7047){const _0x581939=_0x6bf650,_0x4be4b1=generateLoginToken(_0x4f7047);return{'allow':!![],'reason':_0x581939(0x110),'token':_0x4be4b1};}function validateAccess(_0xcdef9b,_0x4866fa){const _0x59ac50=_0x6bf650;let _0x1e0bab=devices[_0x4866fa]['ip'],_0x541944;const _0xeeb1db=_0x47c0d6=>{const _0x26e4ef=_0xfa51;if(settings[_0x26e4ef(0x1ca)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x4866fa)){const _0x5d67d8=generateLoginToken(_0x4866fa);return{'allow':!![],'reason':_0x26e4ef(0x1d2),'token':_0x5d67d8};}else return{'allow':![],'reason':_0x26e4ef(0x1b3),'token':null};}else return _0x541944=validToken(_0x47c0d6,_0x4866fa),_0x541944['hasOwnProperty'](_0x26e4ef(0x129))?{'allow':!![],'reason':_0x26e4ef(0x146),'token':_0x47c0d6}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x26e4ef(0x1fc),'token':null};};if(settings[_0x59ac50(0x139)]){let _0x432f15=[...settings['whitelist'],_0x59ac50(0x152),_0x59ac50(0x208),_0x59ac50(0x214)];if(_0x432f15[_0x59ac50(0x18d)](_0x1e0bab))return _0xeeb1db(_0xcdef9b);else{_0x541944=validToken(_0xcdef9b,_0x4866fa);if(_0x541944[_0x59ac50(0x11c)](_0x59ac50(0x129)))return _0xeeb1db(_0xcdef9b);else{if(telegramIpApproved(_0x4866fa)){const _0x139907=generateToken(_0x4866fa);return _0x541944=_0xeeb1db(_0xcdef9b),_0x541944['allow']?{'allow':!![],'reason':_0x59ac50(0x187),'token':_0x139907}:_0x541944;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x59ac50(0x144),'token':null};}}}else return _0xeeb1db(_0xcdef9b);}function timelyDecrypt(_0x401196,_0x594299=!![]){const _0x45d15a=_0x6bf650;if(_0x401196)try{const _0x3a5e26=crypt[_0x45d15a(0x148)](secure[_0x45d15a(0x1df)],_0x401196)[_0x45d15a(0x200)],_0xdb47c7=_0x3a5e26[_0x45d15a(0x190)]('@')[0x0],_0xd8fbf8=_0x3a5e26[_0x45d15a(0x190)]('@')[0x1],_0x48708d=new Date()[_0x45d15a(0x1d9)]();if(_0x594299){if(_0x48708d-_0xd8fbf8<maxSecretAge*0x3e8)return _0xdb47c7;else return![];}else return _0xdb47c7;}catch(_0x79573c){return![];}else return![];}const validToken=(_0x47bfe7,_0x31e3c4)=>{const _0x5c41d1=_0x6bf650,_0x3ed416=devices[_0x31e3c4]['ip'];if(!_0x47bfe7)return{'error':_0x5c41d1(0x1a4)};for(let _0x43318d of blacklist){if(_0x43318d['token']==_0x47bfe7)return{'error':_0x5c41d1(0x121)};}let _0x91d5d9;try{_0x91d5d9=jwt['verify'](_0x47bfe7,secure[_0x5c41d1(0xe8)]+_0x31e3c4);}catch{return{'error':_0x5c41d1(0x160)};}if(!_0x91d5d9['hasOwnProperty'](_0x5c41d1(0x1c4))&&!_0x91d5d9[_0x5c41d1(0x11c)](_0x5c41d1(0xf6))||!_0x91d5d9['hasOwnProperty'](_0x5c41d1(0x185)))return{'error':_0x5c41d1(0xfa)};if(!_0x91d5d9[_0x5c41d1(0x11c)](_0x5c41d1(0xf6))&&_0x91d5d9[_0x5c41d1(0x11c)](_0x5c41d1(0x1c4))){const {clientip:_0x2d42f8}=_0x91d5d9;return _0x3ed416==_0x2d42f8?{'success':_0x5c41d1(0x20a)}:{'error':_0x5c41d1(0x1d4)};}else{if(_0x91d5d9[_0x5c41d1(0x11c)](_0x5c41d1(0xf6))&&_0x91d5d9['hasOwnProperty'](_0x5c41d1(0x1c4))){const {username:_0x4dec0f,clientip:_0x1fc2e7}=_0x91d5d9;return settings[_0x5c41d1(0x182)]==_0x4dec0f&&_0x3ed416==_0x1fc2e7?{'success':_0x5c41d1(0x20a)}:{'error':_0x5c41d1(0x143)};}}},generateLoginToken=_0x55569e=>{const _0x14dadb=_0x6bf650;if(_0x55569e){const _0x12235a=devices[_0x55569e]['ip'];return jwt[_0x14dadb(0x14c)]({'username':settings[_0x14dadb(0x182)],'clientip':_0x12235a},secure[_0x14dadb(0xe8)]+_0x55569e,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x10e015=>{const _0x515461=_0x6bf650;if(_0x10e015){const _0x331816=devices[_0x10e015]['ip'];return jwt[_0x515461(0x14c)]({'clientip':_0x331816},secure[_0x515461(0xe8)]+_0x10e015,{'expiresIn':devices[_0x10e015]['telegramIpApproval'][_0x515461(0x17f)]*0x3c});}else return![];},telegramIpApproved=_0x31a0e9=>{const _0xe8eeac=_0x6bf650;let _0x44bd88=![];return devices[_0x31a0e9][_0xe8eeac(0x10a)]&&devices[_0x31a0e9][_0xe8eeac(0x10a)][_0xe8eeac(0x17f)]!=_0xe8eeac(0x1c7)&&(_0x44bd88=devices[_0x31a0e9]['telegramIpApproval'][_0xe8eeac(0x1c4)]==devices[_0x31a0e9]['ip']&&new Date()[_0xe8eeac(0x1d9)]()-devices[_0x31a0e9]['telegramIpApproval'][_0xe8eeac(0x16c)]<devices[_0x31a0e9][_0xe8eeac(0x10a)][_0xe8eeac(0x17f)]*0x3c*0x3e8),_0x44bd88;},telegram2FaApproved=_0x5ebf1b=>{const _0x2f1d95=_0x6bf650;let _0x44d1ec=![];return devices[_0x5ebf1b][_0x2f1d95(0x1ec)]&&devices[_0x5ebf1b][_0x2f1d95(0x1ec)][_0x2f1d95(0x17f)]!=_0x2f1d95(0x1c7)&&(_0x44d1ec=devices[_0x5ebf1b][_0x2f1d95(0x1ec)][_0x2f1d95(0x1c4)]==devices[_0x5ebf1b]['ip']&&new Date()[_0x2f1d95(0x1d9)]()-devices[_0x5ebf1b][_0x2f1d95(0x1ec)][_0x2f1d95(0x16c)]<devices[_0x5ebf1b][_0x2f1d95(0x1ec)]['expiry']*0x3c*0x3e8),_0x44d1ec;},normalizeIP=_0x4782bd=>{const _0x1b0950=_0x6bf650;let _0x3cdad3=null,_0xab488=null;if(ipaddr['isValid'](_0x4782bd)){const _0x4bdf8f=ipaddr[_0x1b0950(0x1ff)](_0x4782bd);_0x4bdf8f[_0x1b0950(0x16b)]()===_0x1b0950(0xef)?(_0x4bdf8f['isIPv4MappedAddress']()&&(_0x3cdad3=_0x4bdf8f['toIPv4Address']()['toString']()),_0xab488=_0x4bdf8f[_0x1b0950(0x162)]()):(_0x3cdad3=_0x4bdf8f[_0x1b0950(0x162)](),_0xab488=_0x4bdf8f[_0x1b0950(0x10d)]()[_0x1b0950(0x162)]());}return{'show':_0x3cdad3?_0x3cdad3:_0xab488,'store':_0xab488};};