const _0x5a1726=_0xf5ec;(function(_0x2d62ca,_0x19623f){const _0x2c501f=_0xf5ec,_0xd7feb3=_0x2d62ca();while(!![]){try{const _0x1d82d0=-parseInt(_0x2c501f(0x126))/0x1*(parseInt(_0x2c501f(0x1c7))/0x2)+parseInt(_0x2c501f(0x202))/0x3*(-parseInt(_0x2c501f(0x16f))/0x4)+-parseInt(_0x2c501f(0x1ea))/0x5+-parseInt(_0x2c501f(0x15a))/0x6*(-parseInt(_0x2c501f(0x22f))/0x7)+-parseInt(_0x2c501f(0x1c0))/0x8+-parseInt(_0x2c501f(0x1f2))/0x9*(parseInt(_0x2c501f(0x11f))/0xa)+parseInt(_0x2c501f(0x10b))/0xb;if(_0x1d82d0===_0x19623f)break;else _0xd7feb3['push'](_0xd7feb3['shift']());}catch(_0x2e2402){_0xd7feb3['push'](_0xd7feb3['shift']());}}}(_0x242c,0x24dbd));const _0x500eb6=function(){let _0x1ed88c=!![];return function(_0x57364a,_0x35532a){const _0x5d94f6=_0x1ed88c?function(){const _0xd362b4=_0xf5ec;if(_0x35532a){const _0x190d2e=_0x35532a[_0xd362b4(0x163)](_0x57364a,arguments);return _0x35532a=null,_0x190d2e;}}:function(){};return _0x1ed88c=![],_0x5d94f6;};}(),_0x5e027b=_0x500eb6(this,function(){const _0x5ee103=_0xf5ec;return _0x5e027b[_0x5ee103(0x16c)]()['search'](_0x5ee103(0x187))[_0x5ee103(0x16c)]()[_0x5ee103(0x1e5)](_0x5e027b)[_0x5ee103(0x220)](_0x5ee103(0x187));});_0x5e027b();'use strict';process[_0x5a1726(0x229)][_0x5a1726(0x22e)]=0x1;const childProcess=require(_0x5a1726(0x115)),FileSync=require(_0x5a1726(0x184)),fs=require('fs'),fns=require('date-fns'),low=require(_0x5a1726(0x14f)),path=require(_0x5a1726(0x19a)),crypto=require(_0x5a1726(0x101)),Crypt=require('hybrid-crypto-js')[_0x5a1726(0x1fa)],RSA=require(_0x5a1726(0x1f3))[_0x5a1726(0x1d0)],bcrypt=require('bcryptjs'),jwt=require(_0x5a1726(0x11a)),{Analytics}=require(_0x5a1726(0x251)),googleAnalyticsV3Plugin=require(_0x5a1726(0x108))['default'],googleAnalyticsPlugin=require(_0x5a1726(0x1a4))[_0x5a1726(0x210)],ipaddr=require(_0x5a1726(0x207)),argv=require(_0x5a1726(0x238))(process[_0x5a1726(0x1cd)][_0x5a1726(0x1fd)](0x2))[_0x5a1726(0x1cd)],PORT=argv['port']||_0x5a1726(0x23c),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x5a1726(0x1c8)](_0x5a1726(0x1e7)+PORT+_0x5a1726(0x1f0)),process[_0x5a1726(0x1cc)](0x1));const HOST=argv[_0x5a1726(0x166)]||null,userID=argv[_0x5a1726(0x154)]||'';let bbpath=_0x5a1726(0x1d4),bbpath2='';const botfile=_0x5a1726(0x11c),configfile=_0x5a1726(0x191),settingsfile=_0x5a1726(0x147),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x5a1726(0x17f)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5a1726(0x1e6)),configpath=userID?bbpath+_0x5a1726(0x104)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x5a1726(0x209)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x5a1726(0x209)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5a1726(0x18a)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x5a1726(0xfe)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5a1726(0x18a)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x5a1726(0x14d),'rsaStandard':_0x5a1726(0x167)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5a1726(0x1a9))[_0x5a1726(0xfa)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x5a1726(0x1da)),app=express(),http=require(_0x5a1726(0x15d))[_0x5a1726(0x1d6)](app);app[_0x5a1726(0x134)](express['static'](path[_0x5a1726(0x1c1)](__dirname,bbpath2,_0x5a1726(0x1e0)))),app['use'](express[_0x5a1726(0x145)](path[_0x5a1726(0x1c1)](__dirname,bbpath2,_0x5a1726(0x1f8)))),app[_0x5a1726(0x222)]('/',function(_0x12e651,_0xaa0b14){const _0x24d9f9=_0x5a1726;_0xaa0b14['sendFile'](path[_0x24d9f9(0x1c1)](__dirname,bbpath2,_0x24d9f9(0x1e0),'index.html'));}),app['get'](_0x5a1726(0x18d),function(_0x479951,_0x274a29){const _0x15cf32=_0x5a1726;_0x274a29[_0x15cf32(0x135)](path['join'](__dirname,bbpath2,'build',_0x15cf32(0x112)));}),app['get'](_0x5a1726(0x232),(_0x38e81d,_0x487b03)=>{const _0x32c922=_0x5a1726;_0x487b03['sendFile'](path[_0x32c922(0x1c1)](__dirname,bbpath2,_0x32c922(0x1f8),'index.html'));}),app[_0x5a1726(0x222)](_0x5a1726(0x243),(_0x4c2926,_0x5d3175)=>{const _0x37155c=_0x5a1726;_0x5d3175[_0x37155c(0x135)](path['join'](__dirname,bbpath2,_0x37155c(0x1f8),_0x37155c(0x112)));}),app[_0x5a1726(0x222)](_0x5a1726(0x11d),(_0x552dc6,_0x5a6a9b)=>{const _0x5f3f9a=_0x5a1726;_0x5a6a9b[_0x5f3f9a(0x135)](path[_0x5f3f9a(0x1c1)](__dirname,bbpath2,_0x5f3f9a(0x1f8),_0x5f3f9a(0x112)));}),app['get'](_0x5a1726(0x137),(_0x2c16f7,_0x1276ed)=>{const _0x1c8da7=_0x5a1726;_0x1276ed[_0x1c8da7(0x135)](path[_0x1c8da7(0x1c1)](__dirname,bbpath2,_0x1c8da7(0x1f8),_0x1c8da7(0x112)));}),app['get'](_0x5a1726(0x1e9),(_0x279ba0,_0x29dd3d)=>{const _0x141942=_0x5a1726;_0x29dd3d[_0x141942(0x135)](path[_0x141942(0x1c1)](__dirname,bbpath2,_0x141942(0x1f8),_0x141942(0x112)));}),app[_0x5a1726(0x222)]('/:bot/support',(_0x276c3f,_0x530e71)=>{const _0x2079bf=_0x5a1726;_0x530e71[_0x2079bf(0x135)](path[_0x2079bf(0x1c1)](__dirname,bbpath2,'build',_0x2079bf(0x112)));});if(HOST)http[_0x5a1726(0x19e)](PORT,HOST);else http[_0x5a1726(0x19e)](PORT);const io=require('socket.io')(http,{}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':_0x5a1726(0x1dc)}),googleAnalyticsPlugin({'measurementIds':[_0x5a1726(0xfb)]})]}),TelegramBot=require(_0x5a1726(0x119));let tgBot;if(settings[_0x5a1726(0x1dd)]&&settings[_0x5a1726(0x1dd)]!=''&&settings['telegramUsername']&&settings[_0x5a1726(0x173)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x37e01d=_0x5a1726;console[_0x37e01d(0x1c8)](''),console[_0x37e01d(0x1c8)](_0x37e01d(0xfd)),logging(_0x37e01d(0x23e)+PORT),console['log'](_0x37e01d(0xfd));if(config[_0x37e01d(0x139)]!=0x0)config['forEach'](_0x5ab6e3=>{const _0xe85fb9=_0x37e01d;if(_0x5ab6e3[_0xe85fb9(0x159)]==_0xe85fb9(0x1af)||_0x5ab6e3['status']==_0xe85fb9(0x24a))logging(_0xe85fb9(0x168)+_0x5ab6e3[_0xe85fb9(0x198)]+'\x20|\x20'+_0x5ab6e3[_0xe85fb9(0x208)]),startBot([_0x5ab6e3['botID'],userID],{'cwd':bbpath},function(_0x1cce3a){if(_0x1cce3a)logging(_0x1cce3a);});else(_0x5ab6e3[_0xe85fb9(0x159)]==_0xe85fb9(0x245)||_0x5ab6e3['status']==_0xe85fb9(0x11b))&&logging(_0xe85fb9(0x1bc)+_0x5ab6e3[_0xe85fb9(0x198)]+_0xe85fb9(0x1f1)+_0x5ab6e3[_0xe85fb9(0x208)]);});else!newBot&&console[_0x37e01d(0x1c8)](_0x37e01d(0x14b));if(newBot)addBot();console[_0x37e01d(0x1c8)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x405406=_0x5a1726;io['on'](_0x405406(0x1d9),_0xa3104d=>{const _0x447dfc=_0x405406;let _0x466d5d,_0x5848b6,_0x482487,_0x52a18e,_0x1bb4ec;const _0x5fe834=_0xa3104d[_0x447dfc(0x221)][_0x447dfc(0x1b8)]['referer'];_0x5848b6=_0x5fe834[_0x447dfc(0x146)](/bot[0-9]{3}/);if(_0x5848b6)_0x482487=_0x5848b6[0x0][_0x447dfc(0x146)](/[0-9]{3}/);if(_0x482487)_0x466d5d=_0x482487[0x0];else _0x466d5d='botmanager';const _0x24be2d=_0xa3104d['handshake']['auth']['encryptedUuid'];if(!_0x24be2d)_0xa3104d['emit'](_0x447dfc(0x159),{'publicKey':secure['publicKey']});else{_0x52a18e=timelyDecrypt(_0x24be2d,![]);if(!_0x52a18e)_0xa3104d[_0x447dfc(0x17e)]('status',{'publicKey':secure[_0x447dfc(0x132)]});else{_0x1bb4ec=normalizeIP(_0xa3104d[_0x447dfc(0x120)][_0x447dfc(0x193)])[_0x447dfc(0x161)];if(!devices[_0x52a18e])devices[_0x52a18e]={'uuid':_0x52a18e,'access':{'token':null}};devices[_0x52a18e]['ip']=_0x1bb4ec;const _0x561a23=addClient(_0xa3104d['id'],_0x52a18e,_0x466d5d);setAccess(_0x561a23),_0xa3104d['on'](_0x447dfc(0x13f),_0x4227cb=>{const _0x3c3ce8=_0x447dfc,_0x54ba06=timelyDecrypt(_0x4227cb[_0x3c3ce8(0x116)]);if(_0x54ba06){_0x4227cb={'username':_0x4227cb[_0x3c3ce8(0x239)],'password':_0x54ba06},devices[_0x52a18e]['access']=validateCredentials(_0x4227cb,_0x52a18e);if(devices[_0x52a18e][_0x3c3ce8(0x1fb)][_0x3c3ce8(0x218)]==![]&&devices[_0x52a18e][_0x3c3ce8(0x1fb)]['reason']==_0x3c3ce8(0x121))_0xa3104d['emit']('status',{'access':devices[_0x52a18e][_0x3c3ce8(0x1fb)]}),loginAccess2FA(_0x52a18e,_0x1bb4ec);else{if(devices[_0x52a18e][_0x3c3ce8(0x1fb)]['allow']==![]&&devices[_0x52a18e][_0x3c3ce8(0x1fb)][_0x3c3ce8(0x1c2)]==_0x3c3ce8(0x196))_0xa3104d['emit']('status',{'access':devices[_0x52a18e][_0x3c3ce8(0x1fb)]});else devices[_0x52a18e][_0x3c3ce8(0x1fb)][_0x3c3ce8(0x218)]&&devices[_0x52a18e][_0x3c3ce8(0x1fb)]['reason']==_0x3c3ce8(0x152)&&(getClientsWithUuid(_0x52a18e)[_0x3c3ce8(0x16b)](_0x359a61=>{setAccess(_0x359a61);}),setTokenRefresh(_0x52a18e),setSessionTimeout(_0x3c3ce8(0x13f),_0x52a18e));}}else logging(_0x3c3ce8(0x23b));}),_0xa3104d['on'](_0x447dfc(0x1b1),()=>{resetPassword();}),_0xa3104d['on'](_0x447dfc(0x1cf),_0x40e626=>{removeClient(_0xa3104d['id']);});}}});}function initClient(_0x121dad){const _0x1d4274=_0x5a1726;if(_0x121dad!=_0x1d4274(0x13e)&&config[_0x1d4274(0x133)]!=''){if(pid[_0x121dad])pid[_0x121dad][_0x1d4274(0x1a8)]({'function':_0x1d4274(0x22d),'args':null});}}function getSocket(_0x6711a3){const _0x213823=_0x5a1726;return io[_0x213823(0x1ce)][_0x213823(0x1ce)][_0x213823(0x222)](_0x6711a3);}function setAccess(_0x3eeaff){const _0xa81070=_0x5a1726,_0x38866e=getSocket(_0x3eeaff['id']),_0x890f42=_0x3eeaff[_0xa81070(0x1a5)],_0x29438b=_0x3eeaff[_0xa81070(0x1df)];devices[_0x890f42]['access']=validateAccess(devices[_0x890f42][_0xa81070(0x1fb)][_0xa81070(0x148)],_0x890f42),_0x38866e[_0xa81070(0x1c1)](_0x890f42);if(devices[_0x890f42]['access'][_0xa81070(0x218)]){_0x38866e[_0xa81070(0x1c1)](_0x29438b);if(_0x29438b==_0xa81070(0x13e))initializeSocketBotManager(_0x38866e);else initializeSocketBot(_0x38866e);initClient(_0x29438b);}devices[_0x890f42]['access'][_0xa81070(0x148)]&&devices[_0x890f42][_0xa81070(0x1fb)][_0xa81070(0x1c2)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0xa81070(0x226),_0x890f42),devices[_0x890f42]['access'][_0xa81070(0x148)]&&devices[_0x890f42][_0xa81070(0x1fb)][_0xa81070(0x1c2)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0xa81070(0x13f),_0x890f42),_0x38866e['emit'](_0xa81070(0x159),{'status':_0x3eeaff[_0xa81070(0x12d)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x890f42][_0xa81070(0x1fb)],'externalip':devices[_0x890f42]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x890f42][_0xa81070(0x1fb)]['allow']==![]&&devices[_0x890f42][_0xa81070(0x1fb)][_0xa81070(0x1c2)]==_0xa81070(0x23a)&&temporaryAccess2FA(_0x890f42,devices[_0x890f42]['ip']);}function _0xf5ec(_0x20c567,_0x22597e){const _0x964be7=_0x242c();return _0xf5ec=function(_0x5e027b,_0x500eb6){_0x5e027b=_0x5e027b-0xf8;let _0x242c33=_0x964be7[_0x5e027b];return _0x242c33;},_0xf5ec(_0x20c567,_0x22597e);}function setSessionTimeout(_0x420881,_0x1477a9){const _0xde32fc=_0x5a1726;let _0xef0723;if(_0x420881==_0xde32fc(0x13f))_0xef0723=loginExpiry*0x3c*0x3e8;else _0xef0723=devices[_0x1477a9][_0xde32fc(0x12a)][_0xde32fc(0x1e8)]*0x3c*0x3e8-(new Date()[_0xde32fc(0x13b)]()-devices[_0x1477a9][_0xde32fc(0x12a)][_0xde32fc(0x18e)]);if(devices[_0x1477a9][_0xde32fc(0x235)])clearTimeout(devices[_0x1477a9][_0xde32fc(0x235)]);devices[_0x1477a9][_0xde32fc(0x235)]=setTimeout(()=>{const _0x4dde2d=_0xde32fc;if(devices[_0x1477a9]['pidRefreshToken'])clearTimeout(devices[_0x1477a9]['pidRefreshToken']);removeSocketListeners(_0x1477a9),addBlacklist(_0x1477a9),devices[_0x1477a9]['telegramIpApproval']=null,devices[_0x1477a9]['telegram2FaApproval']=null,devices[_0x1477a9][_0x4dde2d(0x1fb)][_0x4dde2d(0x148)]=null,devices[_0x1477a9][_0x4dde2d(0x1fb)]=validateAccess(devices[_0x1477a9]['access'][_0x4dde2d(0x148)],_0x1477a9),!(devices[_0x1477a9][_0x4dde2d(0x1fb)][_0x4dde2d(0x218)]&&devices[_0x1477a9][_0x4dde2d(0x1fb)][_0x4dde2d(0x1c2)]==_0x4dde2d(0x1b5))&&(_0x420881==_0x4dde2d(0x13f)?io['to'](_0x1477a9)[_0x4dde2d(0x17e)]('status',{'access':{'allow':![],'reason':_0x4dde2d(0x185),'token':null}}):io['to'](_0x1477a9)[_0x4dde2d(0x17e)](_0x4dde2d(0x159),{'access':{'allow':![],'reason':_0x4dde2d(0x1f4),'token':null}})),devices[_0x1477a9][_0x4dde2d(0x1fb)][_0x4dde2d(0x148)]=null;},_0xef0723);}function setTokenRefresh(_0x4f611e){const _0x8bc39=_0x5a1726;if(devices[_0x4f611e]['pidRefreshToken'])clearTimeout(devices[_0x4f611e][_0x8bc39(0x1e4)]);devices[_0x4f611e]['pidRefreshToken']=setTimeout(()=>{const _0x12393d=_0x8bc39;getClientsWithUuid(_0x4f611e)[_0x12393d(0x139)]!=0x0?(devices[_0x4f611e][_0x12393d(0x1fb)]=refreshToken(_0x4f611e),io['to'](_0x4f611e)[_0x12393d(0x17e)](_0x12393d(0x159),{'status':_0x12393d(0x1ae),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4f611e]['access'],'externalip':devices[_0x4f611e]['ip'],'publicKey':secure[_0x12393d(0x132)],'validInstallation':validInstallation}),setTokenRefresh(_0x4f611e)):clearTimeout(devices[_0x4f611e][_0x12393d(0x1e4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x36a1c7){const _0x4ad3e2=_0x5a1726,_0x502bd5=getClient(_0x36a1c7['id'])['uuid'];_0x36a1c7[_0x4ad3e2(0x17e)](_0x4ad3e2(0x20d),config),_0x36a1c7[_0x4ad3e2(0x17e)](_0x4ad3e2(0x155),cleanSettings()),_0x36a1c7['on'](_0x4ad3e2(0x1a3),_0x4ba1e8=>{const _0x4a7408=_0x4ad3e2;if(validateAccess(_0x4ba1e8,_0x502bd5)[_0x4a7408(0x218)])addBot();else logging(_0x4a7408(0x109));}),_0x36a1c7['on'](_0x4ad3e2(0x1d7),(_0x5d1d02,_0x13311a)=>{const _0x315b6f=_0x4ad3e2;if(validateAccess(_0x13311a,_0x502bd5)[_0x315b6f(0x218)])toggleBot(_0x5d1d02[_0x315b6f(0x198)],_0x5d1d02[_0x315b6f(0x159)],_0x5d1d02[_0x315b6f(0x230)]);else logging(_0x315b6f(0x19c));}),_0x36a1c7['on']('toggle-bot-mode',(_0x24fa24,_0xb3da70)=>{const _0x164a95=_0x4ad3e2;if(validateAccess(_0xb3da70,_0x502bd5)[_0x164a95(0x218)])toggleBotMode(_0x24fa24);else logging(_0x164a95(0x19c));}),_0x36a1c7['on'](_0x4ad3e2(0x1ec),(_0x29eddb,_0x2a6580)=>{const _0x796777=_0x4ad3e2;if(validateAccess(_0x2a6580,_0x502bd5)[_0x796777(0x218)])deleteBot(_0x29eddb);else logging(_0x796777(0x105));}),_0x36a1c7['on'](_0x4ad3e2(0x1b7),(_0x53edb1,_0x58696b)=>{const _0x3e7d43=_0x4ad3e2;if(validateAccess(_0x58696b,_0x502bd5)[_0x3e7d43(0x218)])storeSettings(_0x53edb1,!![]);else logging(_0x3e7d43(0x24f));}),_0x36a1c7['on'](_0x4ad3e2(0x20c),_0x3c3c8f=>{const _0x487b12=_0x4ad3e2;if(validateAccess(_0x3c3c8f,_0x502bd5)[_0x487b12(0x218)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x36a1c7['on'](_0x4ad3e2(0x164),_0xe54707=>{const _0x268662=_0x4ad3e2;if(validateAccess(_0xe54707,_0x502bd5)['allow']){if(devices[_0x502bd5]['pidRefreshToken'])clearTimeout(devices[_0x502bd5][_0x268662(0x1e4)]);if(devices[_0x502bd5][_0x268662(0x235)])clearTimeout(devices[_0x502bd5]['pidExpireLogin']);removeSocketListeners(getClient(_0x36a1c7['id'])[_0x268662(0x1a5)]),addBlacklist(_0x502bd5),devices[_0x502bd5][_0x268662(0x12a)]=null,devices[_0x502bd5][_0x268662(0x234)]=null,devices[_0x502bd5][_0x268662(0x1fb)][_0x268662(0x148)]=null,io['to'](getClient(_0x36a1c7['id'])[_0x268662(0x1a5)])[_0x268662(0x17e)](_0x268662(0x159),{'access':{'allow':![],'reason':_0x268662(0x131),'token':null}});}else logging(_0x268662(0x1d1));});}function initializeSocketBot(_0x3eba60){const _0x14f4b7=_0x5a1726,_0x300453=getClient(_0x3eba60['id'])['bot'],_0x3be429=getClient(_0x3eba60['id'])[_0x14f4b7(0x1a5)];_0x3eba60['on'](_0x14f4b7(0x24d),(_0x4e2969,_0xac100e)=>{const _0x227c86=_0x14f4b7;if(validateAccess(_0xac100e,_0x3be429)[_0x227c86(0x218)]){if(pid[_0x300453])pid[_0x300453][_0x227c86(0x1a8)]({'function':_0x227c86(0x1a0),'args':_0x4e2969});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x3eba60['on']('delete-alerts',(_0xd71780,_0x202d6e)=>{const _0x5aed30=_0x14f4b7;if(validateAccess(_0x202d6e,_0x3be429)[_0x5aed30(0x218)]){if(pid[_0x300453])pid[_0x300453][_0x5aed30(0x1a8)]({'function':'deleteHistoryAlerts','args':_0xd71780});}else logging(_0x5aed30(0x1b2));}),_0x3eba60['on'](_0x14f4b7(0x10d),(_0x23d295,_0x5cd6b6)=>{const _0x4d10aa=_0x14f4b7;if(validateAccess(_0x5cd6b6,_0x3be429)[_0x4d10aa(0x218)]){if(pid[_0x300453])pid[_0x300453][_0x4d10aa(0x1a8)]({'function':'getPortfolio','args':_0x23d295});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3eba60['on'](_0x14f4b7(0x194),(_0x57b07f,_0x32379f)=>{const _0x142c91=_0x14f4b7;if(validateAccess(_0x32379f,_0x3be429)[_0x142c91(0x218)]){if(pid[_0x300453])pid[_0x300453][_0x142c91(0x1a8)]({'function':'storeConfiguration','args':_0x57b07f});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3eba60['on'](_0x14f4b7(0x17a),(_0x335400,_0x326f15)=>{const _0xaa0110=_0x14f4b7;if(validateAccess(_0x326f15,_0x3be429)[_0xaa0110(0x218)]){if(pid[_0x300453])pid[_0x300453][_0xaa0110(0x1a8)]({'function':'storeHeadless','args':_0x335400});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3eba60['on']('get-starting-balances',_0x4605a6=>{const _0x3a2e94=_0x14f4b7;if(validateAccess(_0x4605a6,_0x3be429)[_0x3a2e94(0x218)]){if(pid[_0x300453])pid[_0x300453]['send']({'function':_0x3a2e94(0x136),'args':null});}else logging(_0x3a2e94(0x106));}),_0x3eba60['on']('place-order',(_0x4447bb,_0x24d966)=>{const _0x1092c0=_0x14f4b7;if(validateAccess(_0x24d966,_0x3be429)['allow']){if(pid[_0x300453])pid[_0x300453][_0x1092c0(0x1a8)]({'function':_0x1092c0(0x21c),'args':_0x4447bb});}else logging(_0x1092c0(0x215));}),_0x3eba60['on'](_0x14f4b7(0x1bf),_0x359783=>{const _0xdf5386=_0x14f4b7;if(validateAccess(_0x359783,_0x3be429)['allow']){if(pid[_0x300453])pid[_0x300453][_0xdf5386(0x1a8)]({'function':'cancelLoading','args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3eba60['on'](_0x14f4b7(0x164),_0x45b52a=>{const _0x4bb836=_0x14f4b7;if(validateAccess(_0x45b52a,_0x3be429)[_0x4bb836(0x218)]){if(devices[_0x3be429][_0x4bb836(0x1e4)])clearTimeout(devices[_0x3be429]['pidRefreshToken']);if(devices[_0x3be429][_0x4bb836(0x235)])clearTimeout(devices[_0x3be429][_0x4bb836(0x235)]);removeSocketListeners(getClient(_0x3eba60['id'])[_0x4bb836(0x1a5)]),addBlacklist(_0x3be429),devices[_0x3be429][_0x4bb836(0x12a)]=null,devices[_0x3be429][_0x4bb836(0x234)]=null,devices[_0x3be429]['access'][_0x4bb836(0x148)]=null,io['to'](getClient(_0x3eba60['id'])[_0x4bb836(0x1a5)])[_0x4bb836(0x17e)](_0x4bb836(0x159),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x226484){const _0x38c938=_0x5a1726;getClientsWithUuid(_0x226484)[_0x38c938(0x16b)](_0x4eb8ae=>{const _0x4944c5=_0x38c938;getSocket(_0x4eb8ae['id'])[_0x4944c5(0x223)]();});}function cleanSettings(){const _0xee8447=_0x5a1726;let _0x52b159=settings;return settings[_0xee8447(0x1dd)]&&settings['telegramToken']!=''&&(_0x52b159={..._0x52b159,'telegramToken':'************'}),settings[_0xee8447(0x10e)]&&settings[_0xee8447(0x10e)]!=''&&(_0x52b159={..._0x52b159,'bbPassword':_0xee8447(0x10a)}),_0x52b159;}function updateBB(){const _0x2477a1=_0x5a1726;installingUpdate=!![],config[_0x2477a1(0x16b)](_0x4b8647=>{restartBot(_0x4b8647['botID']);}),process['send']({'update':!![]},_0x239d9d=>{});}function startBot(_0x4838ee,_0xb52bed,_0x40e7b4){const _0x5d4b99=_0x5a1726;let _0x3607e4=![];const _0x553e24=_0x4838ee[0x0];_0xb52bed={..._0xb52bed,'stdio':['inherit',_0x5d4b99(0x12e),'inherit',_0x5d4b99(0x190)]},pid[_0x553e24]=childProcess[_0x5d4b99(0x20a)](botfile,_0x4838ee,_0xb52bed),pid[_0x553e24]['on'](_0x5d4b99(0x1e1),_0x331fb3=>{const _0x4c8144=_0x5d4b99;switch(Object['keys'](_0x331fb3)[0x0]){case _0x4c8144(0x208):updateBotName(_0x553e24,_0x331fb3[_0x4c8144(0x208)]);break;case _0x4c8144(0x1c4):updateBotManager();break;case _0x4c8144(0x159):updateStatus(_0x553e24,_0x331fb3[_0x4c8144(0x159)]);break;case'live':updateLive(_0x553e24,_0x331fb3[_0x4c8144(0x230)]);break;case _0x4c8144(0x1a1):updateLive(_0x553e24,_0x331fb3[_0x4c8144(0x1a1)]),io['to'](_0x553e24)[_0x4c8144(0x17e)](_0x4c8144(0x159),{'access':{'allow':![],'reason':_0x4c8144(0x160),'token':null}});break;case _0x4c8144(0x1be):_0x331fb3[_0x4c8144(0x1be)]==_0x4c8144(0x171)&&restartBot(_0x553e24);_0x331fb3[_0x4c8144(0x1be)]==_0x4c8144(0x214)&&toggleBot(_0x553e24,_0x4c8144(0x245),_0x4c8144(0x216));break;case _0x4c8144(0x217):sendTelegram(_0x553e24,_0x331fb3[_0x4c8144(0x217)]);break;case _0x4c8144(0x123):sendTelegramMsg(_0x331fb3['telegrammsg']);break;case _0x4c8144(0x246):io['to'](_0x553e24)[_0x4c8144(0x17e)](_0x331fb3[_0x4c8144(0x246)],_0x331fb3[_0x4c8144(0x21a)]);break;}}),pid[_0x553e24]['on']('error',function(_0x333021){if(_0x3607e4)return;_0x3607e4=!![],_0x40e7b4(_0x333021);}),pid[_0x553e24]['on'](_0x5d4b99(0x1cc),function(_0x5c814c){const _0x1f1f62=_0x5d4b99;if(installingUpdate)return;if(_0x3607e4)return;_0x3607e4=!![],_0x40e7b4(null);const _0x517968=dbConfig[_0x1f1f62(0x222)]('bots')['find']({'botID':_0x553e24})[_0x1f1f62(0x111)]();_0x517968&&(_0x517968[_0x1f1f62(0x159)]==_0x1f1f62(0x1af)||_0x517968[_0x1f1f62(0x159)]=='new')&&(updateLive(_0x553e24,_0x1f1f62(0x216)),logging('restarting\x20Bot\x20'+_0x553e24),startBot([_0x553e24,userID],{'cwd':bbpath},function(_0xe8837a){if(_0xe8837a)logging(_0xe8837a);}));});}function stopBot(_0x111044){const _0x50fd2e=_0x5a1726;getClientsWithBotID(_0x111044)[_0x50fd2e(0x16b)](_0x2feab2=>{const _0x4654bf=_0x50fd2e;getSocket(_0x2feab2['id'])[_0x4654bf(0x1cf)](!![]),removeClient(_0x2feab2['id']);}),pid[_0x111044]&&(pid[_0x111044][_0x50fd2e(0x214)](),pid[_0x111044]=null);}function restartBot(_0x1d0794){const _0x486a65=_0x5a1726;if(pid[_0x1d0794])pid[_0x1d0794][_0x486a65(0x214)]();}function addBot(){const _0x2ee871=_0x5a1726;let _0x2b71a8;for(let _0x2c37fd=0x1;_0x2c37fd<0x3e9;_0x2c37fd++){_0x2b71a8=_0x2c37fd['toString']()[_0x2ee871(0x1f5)](0x3,'0');let _0x4b62f5=config[_0x2ee871(0x180)](_0x467b9d=>_0x467b9d[_0x2ee871(0x198)]==_0x2b71a8);if(!_0x4b62f5)break;}if(_0x2b71a8===_0x2ee871(0x1f7)){logging(_0x2ee871(0x14a));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x2b71a8),dbConfig[_0x2ee871(0x222)](_0x2ee871(0x20d))['push']({'botID':_0x2b71a8,'botname':_0x2ee871(0x13c)+_0x2b71a8,'status':_0x2ee871(0x24a),'live':''})[_0x2ee871(0xfe)](),startBot([_0x2b71a8,userID],{'cwd':bbpath},function(_0x572f47){if(_0x572f47)logging(_0x572f47);}),config=getConfiguration(),io['to']('botmanager')[_0x2ee871(0x17e)](_0x2ee871(0x20d),config);}function _0x242c(){const _0x37a6a8=['build2','message','unlinkSync','callback_query','pidRefreshToken','constructor','clients','Error:\x20Invalid\x20argument\x20','expiry','/:bot/configuration','1189910OrPJsy','toIPv4MappedAddress','delete-bot','Invalid\x20authentication\x20token\x20(2)','bbUsername','catch',',\x20must\x20be\x20a\x204\x20digit\x20number','\x20|\x20','9JnpVGj','hybrid-crypto-js','temporary\x20access\x20timeout','padStart','page','1000','build','HTML','Crypt','access','set','slice','whitelistEnabled','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sendMessage','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','388608dcJkGg','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','polling_error','hasOwnProperty','answerCallbackQuery','ipaddr.js','botname','mkdirSync','fork','parse','update-bb','bots','/on\x20-\x20start\x20bot(s)\x0a','settings.','default','bot-','assign','alerts','kill','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','stopped','telegram','allow','Password\x20has\x20been\x20reset\x20to:\x20','args','-performance.json','placeOrder','login\x20token\x20valid','hashSync','Temporary\x20access\x20rejected','search','handshake','get','removeAllListeners','Allow\x20login\x20from\x20IP\x20address\x20<b>','/off\x20-\x20stop\x20bot(s)\x0a','2FA','headless','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','env','secret','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','disabled\x20Bot\x20','initclient','NTBA_FIX_319','261373IvHnxJ','live','Bot\x20Mgr\x20>\x20','/:bot/portfolio','2FA\x20login\x20rejected','telegram2FaApproval','pidExpireLogin','stopPolling','filter','yargs/yargs','username','2FA\x20required','Unauthorized\x20login\x20attempt\x20(timeout)','3000','showname','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','</b>\x20?','getMinutes','privateKey','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/:bot/performance','readFileSync','disabled','function','copyFileSync','f2aRequired','show','new','exp','telegramChatId','get-logs','loginRequired','Unauthorized\x20attempt\x20to\x20update\x20settings','mode','analytics','includes','push','version','G-1KEE5V4K7S','auto','-----------------------------------------------------------------------------------','write','Balance\x20Bot\x20Server','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','crypto','temporary\x20access\x20not\x20allowed','from','config/','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/enable\x20-\x20enable\x20notifications\x0a','@analytics/google-analytics-v3','Unauthorized\x20attempt\x20to\x20add\x20bot','************','8096649IlGZce','then','get-portfolio','bbPassword','deleted\x20Bot\x20','timeshift','value','index.html','No\x20bots\x20running\x20right\x20now','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','child_process','password','-results.json','isValid','node-telegram-bot-api','jsonwebtoken','new-disabled','bot.js','/:bot/coins','Notifications\x20disabled\x0a','620240wLTukE','conn','2FA\x20login\x20required','generateKeyPairAsync','telegrammsg','getHours','SIGINT','31ZLMTFd','chat','Login\x20accepted','data','telegramIpApproval','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','server','inherit','telegramEnabled','ipv6','logged\x20out','publicKey','apiKey','use','sendFile','getStartingBalances','/:bot/history','temporaryAccessAllowed','length','Alerts','getTime','Bot\x20','/help\x20-\x20show\x20available\x20commands\x0a','botmanager','login','getDate','5\x20min','reject','clientip','stringify','static','match','bb-settings.json','token','success','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','sortBy','sha256','removeListener','lowdb','\x20>\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','login\x20token\x20generated','sendPortfolioTelegram','user','settings','secure','temporary\x20token\x20generated','-config.json','status','42EQwtJD','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','type','http','isDirectory','temporary\x20access\x20rejected','reload','store','2FA\x20login\x20token\x20generated','apply','logout','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','host','RSA-OAEP','starting\x20bot\x20|\x20Bot\x20','Token\x20blacklisted',':\x20Bot\x20Mgr\x20>\x20','forEach','toString','whitelist','-events.json','8eRVOOg','enabled\x20Bot\x20','restart','toIPv4Address','telegramUsername','blacklist','telegramEvents','accept','decrypt','login\x20required','Notifications\x20enabled\x0a','store-headless','orders','getSeconds','Password\x20reset\x20rejected','emit','existsSync','find','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','All\x20bots\x20running\x20right\x20now','order','lowdb/adapters/FileSync','access\x20timeout','Notifications\x20enabled','(((.+)+)+)+$','127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','defaults','\x20to\x20','all','/:bot','timestamp','getUTCHours','ipc','bb-config.json','manual','remoteAddress','store-configuration','No\x20authentication\x20token','invalid\x20credentials','Orders','botID','getFullYear','path','/names\x20-\x20show\x20bot\x20names\x0a','Unauthorized\x20attempt\x20to\x20update\x20bot','Login\x20rejected','listen','Invalid\x20username\x20or\x20IP\x20address','emitHistory','started','running','add-bot','@analytics/google-analytics','uuid','onText','404\x20Not\x20Found','send','version.json','Notifications\x20disabled',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','/disable\x20-\x20disable\x20notifications\x0a','connected','enabled','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','reset-password','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Ok,\x20will\x20send\x20order\x20notifications\x20only','login\x20not\x20required','split','store-settings','headers','event','remove','randomFillSync','idling\x20bot\x20\x20\x20|\x20Bot\x20','All\x20bots','stop','cancel-loading','1704096vLWpGU','join','reason','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','updatebotmanager','hex','toggleBotMode','4798AwKPkW','log','Invalid\x20Telegram\x20token','15\x20min','https://hodlerhacks.com','exit','argv','sockets','disconnect','RSA','Unauthorized\x20attempt\x20to\x20log\x20out','getMonth','entries','bb/','You\x20can\x20use\x20the\x20following\x20commands:\x0a','createServer','update-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','connection','express','yes','UA-192771731-1','telegramToken','Invalid\x20authentication\x20token\x20(1)','bot'];_0x242c=function(){return _0x37a6a8;};return _0x242c();}function deleteBot(_0x2457a4){const _0x51126f=_0x5a1726;getClientsWithBotID(_0x2457a4)[_0x51126f(0x16b)](_0x413e4e=>{getSocket(_0x413e4e['id'])['disconnect'](!![]),removeClient(_0x413e4e['id']);}),dbConfig[_0x51126f(0x222)](_0x51126f(0x20d))[_0x51126f(0x1ba)]({'botID':_0x2457a4})[_0x51126f(0xfe)](),logging(_0x51126f(0x10f)+_0x2457a4),stopBot(_0x2457a4);try{fs['unlinkSync'](path[_0x51126f(0x1c1)](configpath,_0x51126f(0x211)+_0x2457a4+_0x51126f(0x158))),fs[_0x51126f(0x1e2)](path[_0x51126f(0x1c1)](configpath,_0x51126f(0x211)+_0x2457a4+_0x51126f(0x16e))),fs['unlinkSync'](path[_0x51126f(0x1c1)](configpath,_0x51126f(0x211)+_0x2457a4+_0x51126f(0x21b))),fs[_0x51126f(0x1e2)](path[_0x51126f(0x1c1)](configpath,_0x51126f(0x211)+_0x2457a4+_0x51126f(0x117)));}catch(_0x1ec2f0){if(_0x1ec2f0)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x1ec2f0);}config=getConfiguration(),io['to'](_0x51126f(0x13e))[_0x51126f(0x17e)](_0x51126f(0x20d),config);}function toggleBot(_0x3d0e03,_0x2f93e6,_0xb8297d){const _0xf59cef=_0x5a1726;dbConfig[_0xf59cef(0x222)](_0xf59cef(0x20d))[_0xf59cef(0x180)]({'botID':_0x3d0e03})[_0xf59cef(0x212)]({'status':_0x2f93e6})[_0xf59cef(0x212)]({'live':_0xb8297d})[_0xf59cef(0xfe)]();if(_0x2f93e6==_0xf59cef(0x1af)||_0x2f93e6=='new')logging(_0xf59cef(0x170)+_0x3d0e03),startBot([_0x3d0e03,userID],{'cwd':bbpath},function(_0x433c74){if(_0x433c74)logging(_0x433c74);});else(_0x2f93e6=='disabled'||_0x2f93e6=='new-disabled')&&(logging(_0xf59cef(0x22c)+_0x3d0e03),stopBot(_0x3d0e03));config=getConfiguration(),io['to'](_0xf59cef(0x13e))[_0xf59cef(0x17e)](_0xf59cef(0x20d),config);}function toggleStatus(_0x2d880e){const _0x5b665d=_0x5a1726;let _0x2abe06=dbConfig['get'](_0x5b665d(0x20d))[_0x5b665d(0x180)]({'botID':_0x2d880e})[_0x5b665d(0x111)](),_0x302667;if(_0x2abe06[_0x5b665d(0x159)]===_0x5b665d(0x1af))_0x302667=_0x5b665d(0x245);else{if(_0x2abe06['status']===_0x5b665d(0x24a))_0x302667=_0x5b665d(0x11b);else{if(_0x2abe06[_0x5b665d(0x159)]===_0x5b665d(0x11b))_0x302667='new';else{if(_0x2abe06[_0x5b665d(0x159)]==='disabled')_0x302667=_0x5b665d(0x1af);}}}return _0x302667;}function updateStatus(_0x2bd7ff,_0x1dcf00){const _0x4a722b=_0x5a1726;dbConfig['get'](_0x4a722b(0x20d))[_0x4a722b(0x180)]({'botID':_0x2bd7ff})[_0x4a722b(0x212)]({'status':_0x1dcf00})[_0x4a722b(0xfe)](),config=getConfiguration(),io['to'](_0x4a722b(0x13e))[_0x4a722b(0x17e)](_0x4a722b(0x20d),config);}function updateLive(_0x3e5b90,_0x571ff0){const _0x316801=_0x5a1726;dbConfig[_0x316801(0x222)](_0x316801(0x20d))[_0x316801(0x180)]({'botID':_0x3e5b90})[_0x316801(0x212)]({'live':_0x571ff0})[_0x316801(0xfe)](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function updateBotName(_0x34629a,_0x2535bb){const _0x13a162=_0x5a1726;dbConfig[_0x13a162(0x222)](_0x13a162(0x20d))[_0x13a162(0x180)]({'botID':_0x34629a})[_0x13a162(0x212)]({'botname':_0x2535bb})[_0x13a162(0xfe)](),config=getConfiguration(),io['to'](_0x13a162(0x13e))[_0x13a162(0x17e)]('bots',config);}function updateBotManager(){const _0x1c6b19=_0x5a1726;config=getConfiguration(),io['to'](_0x1c6b19(0x13e))['emit']('bots',config);}function toggleBotMode(_0x27d63a){const _0x29607e=_0x5a1726;if(pid[_0x27d63a])pid[_0x27d63a][_0x29607e(0x1a8)]({'function':_0x29607e(0x1c6),'args':null});else{const _0x201ced=configpath+_0x29607e(0x211)+_0x27d63a+_0x29607e(0x158),_0x2a506d=fs[_0x29607e(0x244)](_0x201ced),_0x1bb9ce=JSON[_0x29607e(0x20b)](_0x2a506d),_0x59faf2=_0x1bb9ce['bot'][0x0][_0x29607e(0x227)];_0x1bb9ce[_0x29607e(0x1df)][0x0][_0x29607e(0x227)]=!_0x59faf2;const _0x18ee20=JSON[_0x29607e(0x144)](_0x1bb9ce,null,0x2);fs['writeFileSync'](_0x201ced,_0x18ee20),config=getConfiguration(),io['to']('botmanager')[_0x29607e(0x17e)]('bots',config);}}function telegramError(_0x4e4994){const _0x4eadfc=_0x5a1726;console[_0x4eadfc(0x1c8)](getTimeStamp()+_0x4eadfc(0x1ab));}function validateTelegram(_0x47a0b4){const _0x2eda5c=_0x5a1726;if(_0x47a0b4[_0x2eda5c(0x103)][_0x2eda5c(0x239)]!=settings[_0x2eda5c(0x173)]&&'@'+_0x47a0b4[_0x2eda5c(0x103)][_0x2eda5c(0x239)]!=settings['telegramUsername'])return tgBot[_0x2eda5c(0x200)](_0x47a0b4[_0x2eda5c(0x127)]['id'],_0x2eda5c(0x12c),{'parse_mode':_0x2eda5c(0x1f9)})[_0x2eda5c(0x1ef)](_0x295ac3=>{telegramError(_0x295ac3);}),![];return!![];}async function initTelegram(){const _0xf5c06b=_0x5a1726;if(tgBot)tgBot[_0xf5c06b(0x236)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xf5c06b(0x1dd)],{'polling':!![]});let _0x1a2b9b=_0xf5c06b(0x1d5);_0x1a2b9b+='\x0a',_0x1a2b9b+=_0xf5c06b(0x107),_0x1a2b9b+=_0xf5c06b(0x1ad),_0x1a2b9b+=_0xf5c06b(0x12b),_0x1a2b9b+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x1a2b9b+=_0xf5c06b(0x20e),_0x1a2b9b+=_0xf5c06b(0x225),_0x1a2b9b+=_0xf5c06b(0x181),_0x1a2b9b+=_0xf5c06b(0x19b),_0x1a2b9b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x1a2b9b+=_0xf5c06b(0x15b),_0x1a2b9b+=_0xf5c06b(0x13d);let _0x4e0516='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x4e0516+='\x0a',_0x4e0516+=_0x1a2b9b,tgBot[_0xf5c06b(0x1a6)](/\/start/,_0x5cd93a=>{const _0x31b029=_0xf5c06b;if(!validateTelegram(_0x5cd93a))return;if(settings[_0x31b029(0x24c)]!=_0x5cd93a['chat']['id'])updateSetting(_0x31b029(0x24c),_0x5cd93a[_0x31b029(0x127)]['id']);updateSetting(_0x31b029(0x12f),!![]),tgBot[_0x31b029(0x200)](_0x5cd93a[_0x31b029(0x127)]['id'],_0x4e0516)[_0x31b029(0x1ef)](_0x5eb20d=>{telegramError(_0x5eb20d);});}),tgBot[_0xf5c06b(0x1a6)](/\/enable/,_0x35b9aa=>{const _0x428404=_0xf5c06b;if(!validateTelegram(_0x35b9aa))return;if(settings['telegramChatId']!=_0x35b9aa['chat']['id'])updateSetting(_0x428404(0x24c),_0x35b9aa[_0x428404(0x127)]['id']);updateSetting(_0x428404(0x12f),!![]),tgBot[_0x428404(0x200)](_0x35b9aa[_0x428404(0x127)]['id'],_0x428404(0x186))['catch'](_0x24aab7=>{telegramError(_0x24aab7);});}),tgBot['onText'](/\/config/,async _0x3eb1fd=>{const _0x2f2dd2=_0xf5c06b;if(!validateTelegram(_0x3eb1fd))return;tgBot[_0x2f2dd2(0x14e)]('callback_query'),tgBot[_0x2f2dd2(0x200)](_0x3eb1fd[_0x2f2dd2(0x127)]['id'],_0x2f2dd2(0x228),{'reply_markup':{'inline_keyboard':[[{'text':_0x2f2dd2(0x197),'callback_data':_0x2f2dd2(0x17b)},{'text':_0x2f2dd2(0x13a),'callback_data':_0x2f2dd2(0x213)},{'text':'All','callback_data':'all'}]]}})[_0x2f2dd2(0x1ef)](_0x27b401=>{telegramError(_0x27b401);}),tgBot['on'](_0x2f2dd2(0x1e3),async _0x6ed159=>{const _0x2d8d17=_0x2f2dd2,_0x4bc1d6=_0x6ed159[_0x2d8d17(0x129)],_0x35bfa8=_0x6ed159[_0x2d8d17(0x1e1)];tgBot[_0x2d8d17(0x206)](_0x6ed159['id'])[_0x2d8d17(0x10c)](async()=>{const _0x536e97=_0x2d8d17;_0x4bc1d6==_0x536e97(0x17b)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x536e97(0x12f),!![]),await tgBot['sendMessage'](_0x35bfa8[_0x536e97(0x127)]['id'],_0x536e97(0x1b4))['catch'](_0x54420b=>{telegramError(_0x54420b);}));_0x4bc1d6=='alerts'&&(updateSetting('telegramEvents',_0x536e97(0x213)),updateSetting('telegramEnabled',!![]),await tgBot[_0x536e97(0x200)](_0x35bfa8['chat']['id'],_0x536e97(0x242))[_0x536e97(0x1ef)](_0x4ac0b9=>{telegramError(_0x4ac0b9);}));_0x4bc1d6=='all'&&(updateSetting(_0x536e97(0x175),_0x536e97(0x18c)),updateSetting(_0x536e97(0x12f),!![]),await tgBot['sendMessage'](_0x35bfa8[_0x536e97(0x127)]['id'],_0x536e97(0x1ff))[_0x536e97(0x1ef)](_0x1fed03=>{telegramError(_0x1fed03);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x35bfa8[_0x536e97(0x127)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x536e97(0x1ef)](_0x2481d4=>{telegramError(_0x2481d4);});}),tgBot['removeListener']('callback_query');});}),tgBot[_0xf5c06b(0x1a6)](/\/status/,_0xa18a87=>{const _0x473e67=_0xf5c06b;if(!validateTelegram(_0xa18a87))return;const _0x24b2ea=getBotsWithMode();let _0x231cb9='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x473e67(0x16b)](_0xada735=>{const _0x454abd=_0x473e67,_0xa0de19=_0x24b2ea[_0x454abd(0x180)](_0x20305d=>_0x20305d['botID']==_0xada735[_0x454abd(0x198)])['mode'];_0x231cb9+=_0x454abd(0x13c)+_0xada735[_0x454abd(0x198)]+':\x20'+_0xada735[_0x454abd(0x159)]+_0x454abd(0x1f1)+_0xa0de19+_0x454abd(0x1f1)+_0xada735['live']+'\x0a';}),_0x231cb9+='\x0a',_0x231cb9+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x231cb9+=!settings['telegramEnabled']?_0x473e67(0x11e):_0x473e67(0x179),_0x231cb9+=settings[_0x473e67(0x12f)]?settings['telegramEvents']=='all'?_0x473e67(0x114):'Notifications\x20types:\x20'+settings[_0x473e67(0x175)]+'\x20only\x0a':'',tgBot[_0x473e67(0x200)](_0xa18a87[_0x473e67(0x127)]['id'],_0x231cb9,{'parse_mode':_0x473e67(0x1f9)})['catch'](_0x35bd55=>{telegramError(_0x35bd55);});}),tgBot[_0xf5c06b(0x1a6)](/\/restart/,_0x20ee42=>{const _0x5bf306=_0xf5c06b;if(!validateTelegram(_0x20ee42))return;tgBot[_0x5bf306(0x14e)]('callback_query');const _0x5ba390=getEnabledBots();if(_0x5ba390[_0x5bf306(0x139)]==0x0)tgBot[_0x5bf306(0x200)](_0x20ee42[_0x5bf306(0x127)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2c85db=>{telegramError(_0x2c85db);});else{if(_0x5ba390['length']>0x1)_0x5ba390[_0x5bf306(0xf9)]({'botID':_0x5bf306(0x18c)});let _0x40cf6d=[],_0x97cdb7=[];const _0x337edd=_0x5ba390[_0x5bf306(0x139)]%0x4==0x0||_0x5ba390[_0x5bf306(0x139)]%0x4==0x3||_0x5ba390[_0x5bf306(0x139)]%0x3==0x1?0x4:0x3;let _0x570e7f=0x0;_0x5ba390[_0x5bf306(0x16b)]((_0x35e00f,_0x15081d)=>{const _0x292b2f=_0x5bf306;if(_0x15081d%_0x337edd==0x0)_0x97cdb7=[];_0x97cdb7[_0x292b2f(0xf9)]({'text':_0x35e00f[_0x292b2f(0x198)]==_0x292b2f(0x18c)?_0x292b2f(0x1bd):'Bot\x20'+_0x35e00f[_0x292b2f(0x198)],'callback_data':_0x35e00f[_0x292b2f(0x198)]}),_0x15081d%_0x337edd==0x0&&(_0x40cf6d[_0x570e7f]=_0x97cdb7,_0x570e7f++);}),tgBot[_0x5bf306(0x200)](_0x20ee42[_0x5bf306(0x127)]['id'],_0x5bf306(0x203),{'reply_markup':{'inline_keyboard':_0x40cf6d}})[_0x5bf306(0x1ef)](_0xfed1b6=>{telegramError(_0xfed1b6);}),tgBot['on'](_0x5bf306(0x1e3),async _0x52ae41=>{const _0x72e803=_0x5bf306,_0x4edbeb=_0x52ae41['data'],_0x31eb2b=_0x52ae41[_0x72e803(0x1e1)];tgBot['answerCallbackQuery'](_0x52ae41['id'])[_0x72e803(0x10c)](async()=>{const _0x498fae=_0x72e803;_0x4edbeb==_0x498fae(0x18c)?(tgBot[_0x498fae(0x200)](_0x31eb2b[_0x498fae(0x127)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x498fae(0x1ef)](_0x156faa=>{telegramError(_0x156faa);}),config['forEach'](_0x430ec5=>{const _0x435c10=_0x498fae;restartBot(_0x430ec5[_0x435c10(0x198)]);})):(tgBot['sendMessage'](_0x31eb2b[_0x498fae(0x127)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x4edbeb)[_0x498fae(0x1ef)](_0x574717=>{telegramError(_0x574717);}),restartBot(_0x4edbeb));}),tgBot[_0x72e803(0x14e)](_0x72e803(0x1e3));});}}),tgBot[_0xf5c06b(0x1a6)](/\/on/,_0x55aad5=>{const _0x526bea=_0xf5c06b;if(!validateTelegram(_0x55aad5))return;tgBot['removeListener']('callback_query');const _0xf44d5c=getDisabledBots();if(_0xf44d5c[_0x526bea(0x139)]==0x0)tgBot[_0x526bea(0x200)](_0x55aad5[_0x526bea(0x127)]['id'],_0x526bea(0x182))[_0x526bea(0x1ef)](_0x28fac2=>{telegramError(_0x28fac2);});else{if(_0xf44d5c[_0x526bea(0x139)]>0x1)_0xf44d5c[_0x526bea(0xf9)]({'botID':_0x526bea(0x18c)});let _0x3bd863=[],_0x5e73ce=[];const _0x1aed09=_0xf44d5c[_0x526bea(0x139)]%0x4==0x0||_0xf44d5c[_0x526bea(0x139)]%0x4==0x3||_0xf44d5c[_0x526bea(0x139)]%0x3==0x1?0x4:0x3;let _0x22cf41=0x0;_0xf44d5c['forEach']((_0x3dbab7,_0x58e9ea)=>{const _0x598a65=_0x526bea;if(_0x58e9ea%_0x1aed09==0x0)_0x5e73ce=[];_0x5e73ce['push']({'text':_0x3dbab7[_0x598a65(0x198)]==_0x598a65(0x18c)?'All\x20bots':_0x598a65(0x13c)+_0x3dbab7['botID'],'callback_data':_0x3dbab7['botID']}),_0x58e9ea%_0x1aed09==0x0&&(_0x3bd863[_0x22cf41]=_0x5e73ce,_0x22cf41++);}),tgBot['sendMessage'](_0x55aad5[_0x526bea(0x127)]['id'],_0x526bea(0x1d8),{'reply_markup':{'inline_keyboard':_0x3bd863}})['catch'](_0xc2291f=>{telegramError(_0xc2291f);}),tgBot['on'](_0x526bea(0x1e3),async _0x504b6d=>{const _0x31799e=_0x526bea,_0x2a1759=_0x504b6d['data'],_0x3718f=_0x504b6d[_0x31799e(0x1e1)];tgBot[_0x31799e(0x206)](_0x504b6d['id'])['then'](async()=>{const _0x45ad05=_0x31799e;_0x2a1759=='all'?(tgBot['sendMessage'](_0x3718f['chat']['id'],_0x45ad05(0x201))['catch'](_0x561447=>{telegramError(_0x561447);}),_0xf44d5c[_0x45ad05(0x16b)](_0x45d310=>{const _0x50e026=_0x45ad05;if(_0x45d310[_0x50e026(0x198)]!='all')toggleBot(_0x45d310[_0x50e026(0x198)],toggleStatus(_0x45d310[_0x50e026(0x198)]),_0x50e026(0x216));})):(tgBot[_0x45ad05(0x200)](_0x3718f[_0x45ad05(0x127)]['id'],_0x45ad05(0x1b0)+_0x2a1759)[_0x45ad05(0x1ef)](_0x1b6fbd=>{telegramError(_0x1b6fbd);}),toggleBot(_0x2a1759,toggleStatus(_0x2a1759),_0x45ad05(0x216)));}),tgBot['removeListener'](_0x31799e(0x1e3));});}}),tgBot[_0xf5c06b(0x1a6)](/\/off/,_0x13ba49=>{const _0x57c28f=_0xf5c06b;if(!validateTelegram(_0x13ba49))return;tgBot[_0x57c28f(0x14e)](_0x57c28f(0x1e3));const _0x1ed26e=getEnabledBots();if(_0x1ed26e[_0x57c28f(0x139)]==0x0)tgBot[_0x57c28f(0x200)](_0x13ba49['chat']['id'],_0x57c28f(0x113))['catch'](_0x368e9e=>{telegramError(_0x368e9e);});else{if(_0x1ed26e[_0x57c28f(0x139)]>0x1)_0x1ed26e['push']({'botID':_0x57c28f(0x18c)});let _0x40cea0=[],_0x2e9d0b=[];const _0xbc5903=_0x1ed26e[_0x57c28f(0x139)]%0x4==0x0||_0x1ed26e[_0x57c28f(0x139)]%0x4==0x3||_0x1ed26e[_0x57c28f(0x139)]%0x3==0x1?0x4:0x3;let _0x2c8433=0x0;_0x1ed26e[_0x57c28f(0x16b)]((_0x24ab3f,_0x5aad17)=>{const _0x34a00c=_0x57c28f;if(_0x5aad17%_0xbc5903==0x0)_0x2e9d0b=[];_0x2e9d0b[_0x34a00c(0xf9)]({'text':_0x24ab3f[_0x34a00c(0x198)]==_0x34a00c(0x18c)?'All\x20bots':_0x34a00c(0x13c)+_0x24ab3f[_0x34a00c(0x198)],'callback_data':_0x24ab3f['botID']}),_0x5aad17%_0xbc5903==0x0&&(_0x40cea0[_0x2c8433]=_0x2e9d0b,_0x2c8433++);}),tgBot[_0x57c28f(0x200)](_0x13ba49[_0x57c28f(0x127)]['id'],_0x57c28f(0x189),{'reply_markup':{'inline_keyboard':_0x40cea0}})[_0x57c28f(0x1ef)](_0x361fac=>{telegramError(_0x361fac);}),tgBot['on']('callback_query',async _0x1672d3=>{const _0x39e00e=_0x57c28f,_0x6a9d2b=_0x1672d3[_0x39e00e(0x129)],_0x25049e=_0x1672d3[_0x39e00e(0x1e1)];tgBot[_0x39e00e(0x206)](_0x1672d3['id'])[_0x39e00e(0x10c)](async()=>{const _0x27d31d=_0x39e00e;_0x6a9d2b==_0x27d31d(0x18c)?(tgBot[_0x27d31d(0x200)](_0x25049e[_0x27d31d(0x127)]['id'],_0x27d31d(0x165))[_0x27d31d(0x1ef)](_0x27c86c=>{telegramError(_0x27c86c);}),_0x1ed26e['forEach'](_0x57ef0f=>{const _0x48b683=_0x27d31d;if(_0x57ef0f[_0x48b683(0x198)]!=_0x48b683(0x18c))toggleBot(_0x57ef0f[_0x48b683(0x198)],toggleStatus(_0x57ef0f[_0x48b683(0x198)]),_0x48b683(0x216));})):(tgBot[_0x27d31d(0x200)](_0x25049e[_0x27d31d(0x127)]['id'],_0x27d31d(0x1c3)+_0x6a9d2b)[_0x27d31d(0x1ef)](_0xa15248=>{telegramError(_0xa15248);}),toggleBot(_0x6a9d2b,toggleStatus(_0x6a9d2b),_0x27d31d(0x216)));}),tgBot[_0x39e00e(0x14e)](_0x39e00e(0x1e3));});}}),tgBot[_0xf5c06b(0x1a6)](/\/portfolio/,_0x143a20=>{const _0x129cb1=_0xf5c06b;if(!validateTelegram(_0x143a20))return;tgBot[_0x129cb1(0x14e)](_0x129cb1(0x1e3));const _0x11c283=getEnabledBots();if(_0x11c283[_0x129cb1(0x139)]==0x0)tgBot[_0x129cb1(0x200)](_0x143a20[_0x129cb1(0x127)]['id'],_0x129cb1(0x113))['catch'](_0x4e9a44=>{telegramError(_0x4e9a44);});else{if(_0x11c283['length']>0x1){let _0xac2783=[],_0x509fa0=[];const _0xe69311=_0x11c283[_0x129cb1(0x139)]%0x4==0x0||_0x11c283[_0x129cb1(0x139)]%0x4==0x3||_0x11c283[_0x129cb1(0x139)]%0x3==0x1?0x4:0x3;let _0x4602ab=0x0;_0x11c283[_0x129cb1(0x16b)]((_0x44e06c,_0x1c9979)=>{const _0xcbd2ea=_0x129cb1;if(_0x1c9979%_0xe69311==0x0)_0x509fa0=[];_0x509fa0['push']({'text':_0xcbd2ea(0x13c)+_0x44e06c[_0xcbd2ea(0x198)],'callback_data':_0x44e06c[_0xcbd2ea(0x198)]}),_0x1c9979%_0xe69311==0x0&&(_0xac2783[_0x4602ab]=_0x509fa0,_0x4602ab++);}),tgBot[_0x129cb1(0x200)](_0x143a20[_0x129cb1(0x127)]['id'],_0x129cb1(0x1ac),{'reply_markup':{'inline_keyboard':_0xac2783}})[_0x129cb1(0x1ef)](_0x4bbe93=>{telegramError(_0x4bbe93);}),tgBot['on'](_0x129cb1(0x1e3),async _0x489108=>{const _0x92cda7=_0x129cb1,_0xbed1c0=_0x489108[_0x92cda7(0x129)],_0x135101=_0x489108['message'];tgBot['answerCallbackQuery'](_0x489108['id'])[_0x92cda7(0x10c)](async()=>{const _0x45d301=_0x92cda7;if(pid[_0xbed1c0])pid[_0xbed1c0][_0x45d301(0x1a8)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x92cda7(0x14e)](_0x92cda7(0x1e3));});}else{const _0x27f26a=_0x11c283[0x0][_0x129cb1(0x198)];if(pid[_0x27f26a])pid[_0x27f26a][_0x129cb1(0x1a8)]({'function':_0x129cb1(0x153),'args':null});}}}),tgBot[_0xf5c06b(0x1a6)](/\/toggle/,_0x3f1b06=>{const _0xa42c76=_0xf5c06b;if(!validateTelegram(_0x3f1b06))return;tgBot[_0xa42c76(0x14e)]('callback_query');const _0x4249dc=getBotsWithMode();if(_0x4249dc[_0xa42c76(0x139)]==0x0)tgBot['sendMessage'](_0x3f1b06[_0xa42c76(0x127)]['id'],_0xa42c76(0x113))['catch'](_0x1098ae=>{telegramError(_0x1098ae);});else{let _0x51b34e=[],_0x16022d=[];const _0x37d24f=0x2;let _0x3a7c05=0x0;_0x4249dc[_0xa42c76(0x16b)]((_0x75e41e,_0x22c53e)=>{const _0x211441=_0xa42c76;if(_0x22c53e%_0x37d24f==0x0)_0x16022d=[];_0x16022d[_0x211441(0xf9)]({'text':_0x211441(0x13c)+_0x75e41e[_0x211441(0x198)]+'\x20('+_0x75e41e[_0x211441(0x250)]+')','callback_data':_0x75e41e[_0x211441(0x198)]}),_0x22c53e%_0x37d24f==0x0&&(_0x51b34e[_0x3a7c05]=_0x16022d,_0x3a7c05++);}),tgBot[_0xa42c76(0x200)](_0x3f1b06[_0xa42c76(0x127)]['id'],_0xa42c76(0x22b),{'reply_markup':{'inline_keyboard':_0x51b34e}})[_0xa42c76(0x1ef)](_0x1ef36f=>{telegramError(_0x1ef36f);}),tgBot['on'](_0xa42c76(0x1e3),async _0x53a7b4=>{const _0x5037b8=_0xa42c76,_0x3a3a95=_0x53a7b4[_0x5037b8(0x129)],_0x37b67c=_0x53a7b4[_0x5037b8(0x1e1)];tgBot[_0x5037b8(0x206)](_0x53a7b4['id'])[_0x5037b8(0x10c)](async()=>{const _0x846481=_0x5037b8,_0x277f92=_0x4249dc[_0x846481(0x180)](_0x4d60f0=>_0x4d60f0['botID']==_0x3a3a95),_0x55bb49=_0x277f92[_0x846481(0x250)]==_0x846481(0xfc)?'manual':_0x846481(0xfc);tgBot['sendMessage'](_0x37b67c['chat']['id'],_0x846481(0x151)+_0x3a3a95+_0x846481(0x18b)+_0x55bb49+'\x20mode')[_0x846481(0x1ef)](_0x208ce8=>{telegramError(_0x208ce8);}),toggleBotMode(_0x3a3a95);}),tgBot[_0x5037b8(0x14e)](_0x5037b8(0x1e3));});}}),tgBot[_0xf5c06b(0x1a6)](/\/names/,_0x214067=>{const _0x36b287=_0xf5c06b;if(!validateTelegram(_0x214067))return;let _0x234c4c='';config[_0x36b287(0x16b)](_0x5529b4=>{const _0x318fb7=_0x36b287;_0x234c4c+=_0x318fb7(0x13c)+_0x5529b4[_0x318fb7(0x198)]+':\x20'+_0x5529b4['botname']+'\x0a';}),tgBot['sendMessage'](_0x214067[_0x36b287(0x127)]['id'],_0x234c4c,{'parse_mode':_0x36b287(0x1f9)})[_0x36b287(0x1ef)](_0x483933=>{telegramError(_0x483933);});}),tgBot[_0xf5c06b(0x1a6)](/\/disable/,_0x3c9e37=>{const _0x53cd1b=_0xf5c06b;if(!validateTelegram(_0x3c9e37))return;tgBot[_0x53cd1b(0x200)](_0x3c9e37[_0x53cd1b(0x127)]['id'],_0x53cd1b(0x1aa))[_0x53cd1b(0x1ef)](_0x50ef04=>{telegramError(_0x50ef04);}),updateSetting(_0x53cd1b(0x12f),![]);}),tgBot[_0xf5c06b(0x1a6)](/\/help/,_0x4f1b29=>{const _0x4d8a8e=_0xf5c06b;if(!validateTelegram(_0x4f1b29))return;tgBot[_0x4d8a8e(0x200)](_0x4f1b29[_0x4d8a8e(0x127)]['id'],_0x1a2b9b)[_0x4d8a8e(0x1ef)](_0x6145f9=>{telegramError(_0x6145f9);});}),tgBot['on'](_0xf5c06b(0x204),_0x42eda6=>{const _0x1b0aa0=_0xf5c06b;_0x42eda6['toString']()[_0x1b0aa0(0xf8)](_0x1b0aa0(0x1a7))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x1b0aa0(0x236)](),tgBot=null,io['to'](_0x1b0aa0(0x13e))[_0x1b0aa0(0x17e)]('notification',_0x1b0aa0(0x1c9)));}),process['once'](_0xf5c06b(0x125),()=>{const _0x1a1236=_0xf5c06b;if(tgBot)tgBot[_0x1a1236(0x236)]();process[_0x1a1236(0x1cc)](0x1);}),process['once']('SIGTERM',()=>{const _0x5b8751=_0xf5c06b;if(tgBot)tgBot[_0x5b8751(0x236)]();process[_0x5b8751(0x1cc)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x2d69a4,_0xddabf3){const _0x28b28a=_0x5a1726;if(settings[_0x28b28a(0x12f)]){if(settings[_0x28b28a(0x175)]=='all'||(_0xddabf3[_0x28b28a(0x15c)]=='error'||_0xddabf3[_0x28b28a(0x15c)]=='success')&&settings[_0x28b28a(0x175)]==_0x28b28a(0x213)||_0xddabf3[_0x28b28a(0x15c)]==_0x28b28a(0x183)&&settings[_0x28b28a(0x175)]==_0x28b28a(0x17b)){if(tgBot&&settings[_0x28b28a(0x24c)]){if(_0xddabf3[_0x28b28a(0x23d)])tgBot['sendMessage'](settings[_0x28b28a(0x24c)],_0xddabf3[_0x28b28a(0x208)]+_0x28b28a(0x150)+_0xddabf3[_0x28b28a(0x1b9)])['catch'](_0x2d9798=>{telegramError(_0x2d9798);});else tgBot['sendMessage'](settings[_0x28b28a(0x24c)],_0x28b28a(0x13c)+_0x2d69a4+_0x28b28a(0x150)+_0xddabf3[_0x28b28a(0x1b9)])[_0x28b28a(0x1ef)](_0x52d9d9=>{telegramError(_0x52d9d9);});}}}}function sendTelegramMsg(_0xa29f9f){const _0x3415be=_0x5a1726;settings['telegramEnabled']&&(tgBot&&settings[_0x3415be(0x24c)]&&tgBot[_0x3415be(0x200)](settings[_0x3415be(0x24c)],_0xa29f9f,{'parse_mode':_0x3415be(0x1f9)})['catch'](_0x4af7ef=>{telegramError(_0x4af7ef);}));}function getDeviceWithIp(_0x3c9f64){const _0x587542=_0x5a1726;return devices[_0x587542(0x180)](_0x47a8d1=>_0x47a8d1['ip']===_0x3c9f64);}function temporaryAccess2FA(_0x87ba87,_0x1918d7){const _0x150285=_0x5a1726;let _0x2f5edc=new Date(),_0x2f53a1=![];if(lastIpApproval){if(_0x2f5edc-lastIpApproval<0x1388)_0x2f53a1=!![];}lastIpApproval=new Date();if(_0x2f53a1)return;tgBot&&settings[_0x150285(0x24c)]&&(tgBot[_0x150285(0x14e)](_0x150285(0x1e3)),tgBot[_0x150285(0x200)](settings[_0x150285(0x24c)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1918d7)[_0x150285(0x249)]+'</b>\x20?',{'parse_mode':_0x150285(0x1f9),'reply_markup':{'inline_keyboard':[[{'text':_0x150285(0x141),'callback_data':'5'},{'text':_0x150285(0x1ca),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x150285(0x142),'callback_data':'reject'}]]}})['catch'](_0x4a305b=>{telegramError(_0x4a305b);}),tgBot['on'](_0x150285(0x1e3),async _0x1f4045=>{const _0x1cc07a=_0x150285,_0x2a224b=_0x1f4045[_0x1cc07a(0x129)],_0xef5b6a=_0x1f4045['message'];tgBot[_0x1cc07a(0x206)](_0x1f4045['id'])['then'](async()=>{const _0x18d665=_0x1cc07a;devices[_0x87ba87]['telegramIpApproval']={'clientip':_0x1918d7,'timestamp':new Date()[_0x18d665(0x13b)](),'expiry':_0x2a224b},_0x2a224b!=_0x18d665(0x142)?(await tgBot['sendMessage'](_0xef5b6a[_0x18d665(0x127)]['id'],'Access\x20enabled\x20for\x20'+_0x2a224b+'\x20minutes',{'parse_mode':_0x18d665(0x1f9)})['catch'](_0x4dfda5=>{telegramError(_0x4dfda5);}),io['to'](_0x87ba87)[_0x18d665(0x17e)](_0x18d665(0x159),{'access':{'allow':![],'reason':_0x18d665(0x160),'token':null}})):(await tgBot['sendMessage'](_0xef5b6a[_0x18d665(0x127)]['id'],_0x18d665(0x21f))[_0x18d665(0x1ef)](_0x721851=>{telegramError(_0x721851);}),io['to'](_0x87ba87)['emit'](_0x18d665(0x159),{'access':{'allow':![],'reason':_0x18d665(0x15f),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x363f78,_0x3840f0){const _0x37a33a=_0x5a1726;tgBot&&settings[_0x37a33a(0x24c)]&&(tgBot[_0x37a33a(0x14e)](_0x37a33a(0x1e3)),tgBot[_0x37a33a(0x200)](settings[_0x37a33a(0x24c)],_0x37a33a(0x224)+normalizeIP(_0x3840f0)['show']+_0x37a33a(0x23f),{'parse_mode':_0x37a33a(0x1f9),'reply_markup':{'inline_keyboard':[[{'text':_0x37a33a(0x176),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x37a33a(0x142)}]]}})[_0x37a33a(0x1ef)](_0x31fa85=>{telegramError(_0x31fa85);}),tgBot['on'](_0x37a33a(0x1e3),async _0x3450ab=>{const _0x24bae8=_0x37a33a,_0x7c61e3=_0x3450ab[_0x24bae8(0x129)],_0x39717e=_0x3450ab['message'];tgBot[_0x24bae8(0x206)](_0x3450ab['id'])[_0x24bae8(0x10c)](async()=>{const _0x5d5ffd=_0x24bae8;devices[_0x363f78][_0x5d5ffd(0x234)]={'clientip':_0x3840f0,'timestamp':new Date()[_0x5d5ffd(0x13b)](),'expiry':_0x7c61e3},_0x7c61e3!=_0x5d5ffd(0x142)?(await tgBot['sendMessage'](_0x39717e[_0x5d5ffd(0x127)]['id'],_0x5d5ffd(0x128),{'parse_mode':_0x5d5ffd(0x1f9)})[_0x5d5ffd(0x1ef)](_0x5b8410=>{telegramError(_0x5b8410);}),io['to'](_0x363f78)[_0x5d5ffd(0x17e)](_0x5d5ffd(0x159),{'access':{'allow':![],'reason':_0x5d5ffd(0x160),'token':null}})):(await tgBot[_0x5d5ffd(0x200)](_0x39717e[_0x5d5ffd(0x127)]['id'],_0x5d5ffd(0x19d))[_0x5d5ffd(0x1ef)](_0x3a0dd2=>{telegramError(_0x3a0dd2);}),io['to'](_0x363f78)[_0x5d5ffd(0x17e)]('status',{'access':{'allow':![],'reason':_0x5d5ffd(0x233),'token':null}}));}),tgBot[_0x24bae8(0x14e)](_0x24bae8(0x1e3));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1c02b8=_0x5a1726;return dbConfig[_0x1c02b8(0x222)](_0x1c02b8(0x20d))[_0x1c02b8(0x14c)]('botID')['filter']({'status':_0x1c02b8(0x1af)})[_0x1c02b8(0x111)]()||[];}function getDisabledBots(){const _0x195ea5=_0x5a1726;return dbConfig['get'](_0x195ea5(0x20d))['sortBy'](_0x195ea5(0x198))[_0x195ea5(0x237)]({'status':_0x195ea5(0x245)})['value']()||[];}function getBotsWithMode(){const _0x57309f=_0x5a1726,_0x25c1c8=dbConfig[_0x57309f(0x222)](_0x57309f(0x20d))['sortBy'](_0x57309f(0x198))['value']()||[];return _0x25c1c8[_0x57309f(0x16b)](_0x2bcb16=>{const _0x542276=_0x57309f,_0x25750a=configpath+_0x542276(0x211)+_0x2bcb16[_0x542276(0x198)]+_0x542276(0x158),_0xe5222b=fs['existsSync'](_0x25750a);if(_0xe5222b){const _0x1ce410=fs[_0x542276(0x244)](_0x25750a);try{const _0xc6937a=JSON[_0x542276(0x20b)](_0x1ce410),_0x1f7a16=_0xc6937a?_0xc6937a[_0x542276(0x1df)][0x0][_0x542276(0x227)]:![];_0x2bcb16[_0x542276(0x250)]=_0x1f7a16?'auto':_0x542276(0x192);}catch(_0x290acd){_0x2bcb16[_0x542276(0x250)]=_0x542276(0x192);}}else _0x2bcb16[_0x542276(0x250)]=_0x542276(0x192);}),_0x25c1c8;}function getSettings(){const _0x9d09cc=_0x5a1726;return dbSettings[_0x9d09cc(0x222)](_0x9d09cc(0x155))[_0x9d09cc(0x111)]()||{'timeshift':0x0};}function getSecure(){const _0x5dfc32=_0x5a1726;return dbSecure[_0x5dfc32(0x222)]('secure')[_0x5dfc32(0x111)]()||{};}function getBlacklist(){const _0x5eea98=_0x5a1726;return dbSecure[_0x5eea98(0x222)]('blacklist')['value']()||[];}function broadcastToBots(_0x4bb683,_0x112f5f){const _0x5b5fea=_0x5a1726;config[_0x5b5fea(0x16b)](_0x4a03d=>{const _0x824cdd=_0x5b5fea;if(_0x4a03d[_0x824cdd(0x159)]==_0x824cdd(0x1af)&&_0x4a03d[_0x824cdd(0x230)]==_0x824cdd(0x1a2)){if(pid[_0x4a03d[_0x824cdd(0x198)]])pid[_0x4a03d['botID']][_0x824cdd(0x1a8)]({[_0x4bb683]:_0x112f5f});}});}function storeSettings(_0x2d5759,_0x2538b2=![]){const _0x16c86c=_0x5a1726;_0x2d5759={...settings,..._0x2d5759};if(_0x2538b2&&_0x2d5759[_0x16c86c(0x10e)]!='************'&&_0x2d5759[_0x16c86c(0x10e)]!=''){const _0x2ec5b0=crypt[_0x16c86c(0x177)](secure[_0x16c86c(0x241)],_0x2d5759[_0x16c86c(0x10e)])['message'][_0x16c86c(0x1b6)]('@')[0x0],_0x67f8e6=bcrypt['hashSync'](_0x2ec5b0,saltRounds);_0x2d5759={..._0x2d5759,'bbPassword':_0x67f8e6};}if(_0x2538b2&&_0x2d5759[_0x16c86c(0x1dd)]!='************'&&_0x2d5759[_0x16c86c(0x1dd)]!=''){const _0x5393d9=crypt[_0x16c86c(0x177)](secure['privateKey'],_0x2d5759['telegramToken'])[_0x16c86c(0x1e1)][_0x16c86c(0x1b6)]('@')[0x0];_0x2d5759={..._0x2d5759,'telegramToken':_0x5393d9};}const _0x4ef5ad=_0x2d5759[_0x16c86c(0x1dd)]!=_0x16c86c(0x10a)&&_0x2d5759[_0x16c86c(0x1dd)]!=settings['telegramToken']||_0x2d5759[_0x16c86c(0x173)]!=settings[_0x16c86c(0x173)],_0x54da6b=_0x2d5759[_0x16c86c(0x1dd)]==''||_0x2d5759['telegramUsername']=='';if(_0x4ef5ad)_0x2d5759[_0x16c86c(0x175)]=_0x16c86c(0x18c);for(const [_0x5c2b5b,_0x1fa051]of Object[_0x16c86c(0x1d3)](_0x2d5759)){if(_0x5c2b5b==_0x16c86c(0x1dd)&&_0x1fa051==_0x16c86c(0x10a)){_0x2d5759[_0x16c86c(0x1dd)]=settings[_0x16c86c(0x1dd)];continue;};if(_0x5c2b5b==_0x16c86c(0x10e)&&_0x1fa051==_0x16c86c(0x10a)){_0x2d5759[_0x16c86c(0x10e)]=settings[_0x16c86c(0x10e)];continue;};dbSettings['set'](_0x16c86c(0x20f)+_0x5c2b5b,_0x1fa051)['write']();}settings=_0x2d5759,io['to']('botmanager')['emit'](_0x16c86c(0x155),cleanSettings()),broadcastToBots(_0x16c86c(0x110),settings['timeshift']);if(_0x4ef5ad&&!_0x54da6b)initTelegram();if(_0x4ef5ad&&_0x54da6b)disableTelegram();getAllClients()['forEach'](_0x979820=>{const _0x8c2fc4=_0x16c86c;getSocket(_0x979820['id'])[_0x8c2fc4(0x17e)]('status',{'access':{'allow':![],'reason':_0x8c2fc4(0x160),'token':null}});});}function updateSetting(_0x296892,_0x278a74){const _0x366195=_0x5a1726;dbSettings[_0x366195(0x1fc)](_0x366195(0x20f)+_0x296892,_0x278a74)[_0x366195(0xfe)](),settings=getSettings(),io['to']('botmanager')[_0x366195(0x17e)]('settings',cleanSettings());}function storeSecure(_0x500d18){const _0xd9960b=_0x5a1726;dbSecure[_0xd9960b(0x222)](_0xd9960b(0x156))[_0xd9960b(0xf9)](_0x500d18)[_0xd9960b(0xfe)](),secure=_0x500d18;}function addBlacklist(_0x3d3311){const _0x5949eb=_0x5a1726;cleanBlacklist();let _0x81f525;devices[_0x3d3311]['telegramIpApproval']?_0x81f525=Math['max'](devices[_0x3d3311][_0x5949eb(0x12a)][_0x5949eb(0x1e8)],loginExpiry):_0x81f525=loginExpiry,dbSecure[_0x5949eb(0x222)](_0x5949eb(0x174))[_0x5949eb(0xf9)]({'expiry':new Date()['getTime']()+_0x81f525*0x3c*0x3e8,'token':devices[_0x3d3311][_0x5949eb(0x1fb)]['token']})['write'](),blacklist=dbSecure[_0x5949eb(0x222)](_0x5949eb(0x174))[_0x5949eb(0x111)]();}function cleanBlacklist(){const _0xfa6b54=_0x5a1726;let _0x1bbafa=dbSecure['get']('blacklist')['cloneDeep']()[_0xfa6b54(0x111)](),_0x4730be=new Date()[_0xfa6b54(0x13b)]();_0x1bbafa[_0xfa6b54(0x16b)](_0x3c9aa0=>{const _0x230b11=_0xfa6b54;_0x3c9aa0[_0x230b11(0x1e8)]<_0x4730be&&dbSecure[_0x230b11(0x222)](_0x230b11(0x174))[_0x230b11(0x1ba)]({'expiry':_0x3c9aa0[_0x230b11(0x1e8)]})[_0x230b11(0xfe)]();});}function initStates(){const _0x160a3b=_0x5a1726;let _0x167c65=getConfiguration();_0x167c65[_0x160a3b(0x16b)](_0xc2d256=>{const _0x352727=_0x160a3b;_0xc2d256['live']=_0x352727(0x216);}),storeConfiguration(_0x167c65);}function onKeys(){const _0x387af8=new RSA();return new Promise(_0x1e4744=>{const _0x218d87=_0xf5ec;_0x387af8[_0x218d87(0x122)]()[_0x218d87(0x10c)](_0x354519=>{_0x1e4744(_0x354519);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4f9aa2=_0x5a1726;let _0x262a21=getConfiguration(),_0x443edc=![];_0x262a21[_0x4f9aa2(0x16b)](_0x222a18=>{const _0x29e209=_0x4f9aa2;if(_0x222a18[_0x29e209(0x159)]==_0x29e209(0x1a2))_0x222a18[_0x29e209(0x159)]='enabled',_0x443edc=!![];else _0x222a18[_0x29e209(0x159)]==_0x29e209(0x216)&&(_0x222a18[_0x29e209(0x159)]=_0x29e209(0x245),_0x443edc=!![]);});if(_0x443edc)storeConfiguration(_0x262a21);let _0xbd0fe2=getSecure();if(!_0xbd0fe2[_0x4f9aa2(0x205)](_0x4f9aa2(0x22a))){let _0x16a9b2=await generateKeys();_0xbd0fe2['publicKey']=_0x16a9b2[_0x4f9aa2(0x132)],_0xbd0fe2[_0x4f9aa2(0x241)]=_0x16a9b2[_0x4f9aa2(0x241)],_0xbd0fe2['secret']=crypto['randomBytes'](0x20)[_0x4f9aa2(0x16c)](_0x4f9aa2(0x1c5));;storeSecure(_0xbd0fe2);}let _0x4f05c2=getSettings();_0x443edc=![];!_0x4f05c2['hasOwnProperty']('loginRequired')&&(_0x4f05c2['loginRequired']=![],_0x4f05c2[_0x4f9aa2(0x1ee)]='',_0x4f05c2[_0x4f9aa2(0x10e)]='',_0x4f05c2[_0x4f9aa2(0x248)]=![],_0x443edc=!![]);!_0x4f05c2[_0x4f9aa2(0x205)](_0x4f9aa2(0x1fe))&&(_0x4f05c2[_0x4f9aa2(0x1fe)]=![],_0x4f05c2['whitelist']=[],_0x4f05c2[_0x4f9aa2(0x138)]=![],_0x443edc=!![]);if(!_0x4f05c2['hasOwnProperty'](_0x4f9aa2(0x12f))){if(_0x4f05c2[_0x4f9aa2(0x24c)])_0x4f05c2[_0x4f9aa2(0x12f)]=!![];else _0x4f05c2['telegramEnabled']=![];_0x443edc=!![];}if(_0x443edc)storeSettings(_0x4f05c2);}function storeConfiguration(_0x7eaf46){const _0x3bb019=_0x5a1726;dbConfig['get'](_0x3bb019(0x20d))[_0x3bb019(0x1ba)]()[_0x3bb019(0xfe)](),_0x7eaf46[_0x3bb019(0x16b)](_0xb68a41=>{delete _0xb68a41['mode'];}),dbConfig[_0x3bb019(0x222)]('bots')[_0x3bb019(0xf9)](..._0x7eaf46)[_0x3bb019(0xfe)](),config=_0x7eaf46;}function resetPassword(){const _0x306f54=_0x5a1726;tgBot&&settings[_0x306f54(0x24c)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x306f54(0x200)](settings[_0x306f54(0x24c)],_0x306f54(0x1b3),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x306f54(0x1db),'callback_data':_0x306f54(0x1db)},{'text':'no','callback_data':'no'}]]}})[_0x306f54(0x1ef)](_0xc2ed2d=>{telegramError(_0xc2ed2d);}),tgBot['on'](_0x306f54(0x1e3),async _0x243de4=>{const _0xabfd1d=_0x306f54,_0x494441=_0x243de4[_0xabfd1d(0x129)],_0x3bce5c=_0x243de4[_0xabfd1d(0x1e1)];tgBot[_0xabfd1d(0x206)](_0x243de4['id'])[_0xabfd1d(0x10c)](async()=>{const _0x38fc4c=_0xabfd1d;if(_0x494441!='no'){const _0x100b31=0xf,_0xba4b5e=_0x38fc4c(0x100),_0x59adc6=Array[_0x38fc4c(0x103)](crypto[_0x38fc4c(0x1bb)](new Uint32Array(_0x100b31)))['map'](_0x1fdf00=>_0xba4b5e[_0x1fdf00%_0xba4b5e[_0x38fc4c(0x139)]])['join'](''),_0xd74ca=bcrypt[_0x38fc4c(0x21e)](_0x59adc6,saltRounds);storeSettings({'bbPassword':_0xd74ca}),await tgBot[_0x38fc4c(0x200)](_0x3bce5c['chat']['id'],_0x38fc4c(0x219)+_0x59adc6,{'parse_mode':'HTML'})['catch'](_0x3e1db2=>{telegramError(_0x3e1db2);});}else await tgBot[_0x38fc4c(0x200)](_0x3bce5c[_0x38fc4c(0x127)]['id'],_0x38fc4c(0x17d))[_0x38fc4c(0x1ef)](_0x140eb7=>{telegramError(_0x140eb7);});}),tgBot[_0xabfd1d(0x14e)](_0xabfd1d(0x1e3));}));}function logging(_0x425a11){const _0x4d15db=_0x5a1726;console[_0x4d15db(0x1c8)](getTimeStamp()+_0x4d15db(0x16a)+_0x425a11);if(tgBot&&settings[_0x4d15db(0x24c)]&&settings[_0x4d15db(0x175)]!=_0x4d15db(0x17b))tgBot[_0x4d15db(0x200)](settings[_0x4d15db(0x24c)],_0x4d15db(0x231)+_0x425a11)[_0x4d15db(0x1ef)](_0xb901f2=>{telegramError(_0xb901f2);});}function getServerTime(){const _0x29b3f7=_0x5a1726,_0x9defa5=new Date();return _0x9defa5['getFullYear']()+'/'+(_0x9defa5[_0x29b3f7(0x1d2)]()+0x1)['toString']()[_0x29b3f7(0x1f5)](0x2,'0')+'/'+_0x9defa5[_0x29b3f7(0x140)]()[_0x29b3f7(0x16c)]()[_0x29b3f7(0x1f5)](0x2,'0')+'\x20'+_0x9defa5[_0x29b3f7(0x124)]()['toString']()[_0x29b3f7(0x1f5)](0x2,'0')+':'+_0x9defa5[_0x29b3f7(0x240)]()[_0x29b3f7(0x16c)]()[_0x29b3f7(0x1f5)](0x2,'0')+':'+_0x9defa5[_0x29b3f7(0x17c)]()[_0x29b3f7(0x16c)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4d859e=_0x5a1726,_0x4337fc=shiftedTime();return _0x4337fc[_0x4d859e(0x199)]()+'/'+(_0x4337fc[_0x4d859e(0x1d2)]()+0x1)[_0x4d859e(0x16c)]()[_0x4d859e(0x1f5)](0x2,'0')+'/'+_0x4337fc[_0x4d859e(0x140)]()['toString']()[_0x4d859e(0x1f5)](0x2,'0')+'\x20'+_0x4337fc[_0x4d859e(0x124)]()[_0x4d859e(0x16c)]()[_0x4d859e(0x1f5)](0x2,'0')+':'+_0x4337fc[_0x4d859e(0x240)]()[_0x4d859e(0x16c)]()[_0x4d859e(0x1f5)](0x2,'0')+':'+_0x4337fc[_0x4d859e(0x17c)]()['toString']()[_0x4d859e(0x1f5)](0x2,'0');}function shiftedTime(){const _0x567a3a=_0x5a1726,_0x1ff641=new Date();let _0x40e40b=_0x1ff641;if(settings[_0x567a3a(0x110)]&&settings['timeshift']!==0x0)_0x40e40b=fns['add'](_0x1ff641,{'hours':settings[_0x567a3a(0x110)]});return _0x40e40b;}function startScheduler(){const _0x10dcc8=_0x5a1726;let _0x40af53=new Date()[_0x10dcc8(0x18f)]();_0x40af53==0x1&&backupConfigFiles();_0x40af53==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x23b67c=_0x5a1726;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x23b67c(0x16b)](_0x30b00b=>{const _0x49fd73=_0x23b67c;if(!_0x30b00b[_0x49fd73(0x15e)]())fs[_0x49fd73(0x247)](configpath+_0x30b00b['name'],configbackuppath+_0x30b00b['name']);});}function triggerAnalytics(){const _0x463124=_0x5a1726;analytics[_0x463124(0x1f6)]({'title':_0x463124(0xff),'href':_0x463124(0x1cb),'path':'/v'+serverversion});}function validateCredentials(_0x838edd,_0x57d04b){const _0x545adc=_0x5a1726;if(_0x838edd['username']==settings['bbUsername']&&bcrypt['compareSync'](_0x838edd[_0x545adc(0x116)],settings[_0x545adc(0x10e)])){if(settings[_0x545adc(0x248)])return{'allow':![],'reason':_0x545adc(0x121),'token':null};else{const _0x4b541d=generateLoginToken(_0x57d04b);return{'allow':!![],'reason':_0x545adc(0x152),'token':_0x4b541d};}}else return{'allow':![],'reason':_0x545adc(0x196),'token':null};}function refreshToken(_0x52bf67){const _0x50deb3=_0x5a1726,_0x222fbf=generateLoginToken(_0x52bf67);return{'allow':!![],'reason':_0x50deb3(0x152),'token':_0x222fbf};}function validateAccess(_0x1d0da6,_0x746211){const _0x36812d=_0x5a1726;let _0x383c2f=devices[_0x746211]['ip'],_0x309d0f;const _0x2b3560=_0x4e8cbe=>{const _0x16d55d=_0xf5ec;if(settings[_0x16d55d(0x24e)]){if(settings[_0x16d55d(0x248)]){if(telegram2FaApproved(_0x746211)){const _0x2f9ccf=generateLoginToken(_0x746211);return{'allow':!![],'reason':_0x16d55d(0x162),'token':_0x2f9ccf};}else return{'allow':![],'reason':_0x16d55d(0x178),'token':null};}else return _0x309d0f=validToken(_0x4e8cbe,_0x746211),_0x309d0f['hasOwnProperty']('success')?{'allow':!![],'reason':_0x16d55d(0x21d),'token':_0x4e8cbe}:{'allow':![],'reason':_0x16d55d(0x178),'token':null};}else return{'allow':!![],'reason':_0x16d55d(0x1b5),'token':null};};if(settings[_0x36812d(0x1fe)]){let _0x43cedb=[...settings[_0x36812d(0x16d)],'::1','::ffff:127.0.0.1',_0x36812d(0x188)];if(_0x43cedb[_0x36812d(0xf8)](_0x383c2f))return _0x2b3560(_0x1d0da6);else{_0x309d0f=validToken(_0x1d0da6,_0x746211);if(_0x309d0f[_0x36812d(0x205)](_0x36812d(0x149)))return _0x2b3560(_0x1d0da6);else{if(telegramIpApproved(_0x746211)){const _0x2d09ab=generateToken(_0x746211);return _0x309d0f=_0x2b3560(_0x1d0da6),_0x309d0f[_0x36812d(0x218)]?{'allow':!![],'reason':_0x36812d(0x157),'token':_0x2d09ab}:_0x309d0f;}else return settings[_0x36812d(0x138)]?{'allow':![],'reason':_0x36812d(0x23a),'token':null}:{'allow':![],'reason':_0x36812d(0x102),'token':null};}}}else return _0x2b3560(_0x1d0da6);}function timelyDecrypt(_0x157980,_0x2ddff2=!![]){const _0x4813cc=_0x5a1726;if(_0x157980)try{const _0x140f72=crypt[_0x4813cc(0x177)](secure[_0x4813cc(0x241)],_0x157980)[_0x4813cc(0x1e1)],_0x3e9883=_0x140f72[_0x4813cc(0x1b6)]('@')[0x0],_0x5119c9=_0x140f72[_0x4813cc(0x1b6)]('@')[0x1],_0x250a40=new Date()[_0x4813cc(0x13b)]();if(_0x2ddff2){if(_0x250a40-_0x5119c9<maxSecretAge*0x3e8)return _0x3e9883;else return![];}else return _0x3e9883;}catch(_0x16c788){return![];}else return![];}const validToken=(_0x260bbf,_0x3a99e7)=>{const _0x2c4a7c=_0x5a1726,_0x26d9ec=devices[_0x3a99e7]['ip'];if(!_0x260bbf)return{'error':_0x2c4a7c(0x195)};for(let _0x5b67b1 of blacklist){if(_0x5b67b1[_0x2c4a7c(0x148)]==_0x260bbf)return{'error':_0x2c4a7c(0x169)};}let _0x3d7844;try{_0x3d7844=jwt['verify'](_0x260bbf,secure[_0x2c4a7c(0x22a)]+_0x3a99e7);}catch{return{'error':_0x2c4a7c(0x1de)};}if(!_0x3d7844['hasOwnProperty'](_0x2c4a7c(0x143))&&!_0x3d7844['hasOwnProperty'](_0x2c4a7c(0x239))||!_0x3d7844[_0x2c4a7c(0x205)](_0x2c4a7c(0x24b)))return{'error':_0x2c4a7c(0x1ed)};if(!_0x3d7844['hasOwnProperty']('username')&&_0x3d7844[_0x2c4a7c(0x205)](_0x2c4a7c(0x143))){const {clientip:_0x2a2cf1}=_0x3d7844;return _0x26d9ec==_0x2a2cf1?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x3d7844['hasOwnProperty']('username')&&_0x3d7844[_0x2c4a7c(0x205)]('clientip')){const {username:_0x3ca8f1,clientip:_0x35861e}=_0x3d7844;return settings[_0x2c4a7c(0x1ee)]==_0x3ca8f1&&_0x26d9ec==_0x35861e?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2c4a7c(0x19f)};}}},generateLoginToken=_0x425196=>{const _0x25ca57=_0x5a1726;if(_0x425196){const _0x1b7908=devices[_0x425196]['ip'];return jwt['sign']({'username':settings[_0x25ca57(0x1ee)],'clientip':_0x1b7908},secure[_0x25ca57(0x22a)]+_0x425196,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x94724=>{const _0x567ee3=_0x5a1726;if(_0x94724){const _0x25785a=devices[_0x94724]['ip'];return jwt['sign']({'clientip':_0x25785a},secure[_0x567ee3(0x22a)]+_0x94724,{'expiresIn':devices[_0x94724][_0x567ee3(0x12a)][_0x567ee3(0x1e8)]*0x3c});}else return![];},telegramIpApproved=_0x5bb0f4=>{const _0x1d85b3=_0x5a1726;let _0x45a0c7=![];return devices[_0x5bb0f4][_0x1d85b3(0x12a)]&&devices[_0x5bb0f4][_0x1d85b3(0x12a)]['expiry']!=_0x1d85b3(0x142)&&(_0x45a0c7=devices[_0x5bb0f4][_0x1d85b3(0x12a)][_0x1d85b3(0x143)]==devices[_0x5bb0f4]['ip']&&new Date()[_0x1d85b3(0x13b)]()-devices[_0x5bb0f4]['telegramIpApproval']['timestamp']<devices[_0x5bb0f4][_0x1d85b3(0x12a)]['expiry']*0x3c*0x3e8),_0x45a0c7;},telegram2FaApproved=_0x29d305=>{const _0x55daae=_0x5a1726;let _0x210472=![];return devices[_0x29d305][_0x55daae(0x234)]&&devices[_0x29d305]['telegram2FaApproval']['expiry']!='reject'&&(_0x210472=devices[_0x29d305]['telegram2FaApproval']['clientip']==devices[_0x29d305]['ip']&&new Date()[_0x55daae(0x13b)]()-devices[_0x29d305][_0x55daae(0x234)][_0x55daae(0x18e)]<devices[_0x29d305][_0x55daae(0x234)]['expiry']*0x3c*0x3e8),_0x210472;},normalizeIP=_0x3311c8=>{const _0x5d523c=_0x5a1726;let _0x572816=null,_0x1375c0=null;if(ipaddr[_0x5d523c(0x118)](_0x3311c8)){const _0x1ccd4e=ipaddr['parse'](_0x3311c8);_0x1ccd4e['kind']()===_0x5d523c(0x130)?(_0x1ccd4e['isIPv4MappedAddress']()&&(_0x572816=_0x1ccd4e[_0x5d523c(0x172)]()[_0x5d523c(0x16c)]()),_0x1375c0=_0x1ccd4e[_0x5d523c(0x16c)]()):(_0x572816=_0x1ccd4e[_0x5d523c(0x16c)](),_0x1375c0=_0x1ccd4e[_0x5d523c(0x1eb)]()['toString']());}return{'show':_0x572816?_0x572816:_0x1375c0,'store':_0x1375c0};};