const _0x1ee9c5=_0x2450;(function(_0x5447b3,_0x25cea4){const _0x3e864d=_0x2450,_0x9d61c9=_0x5447b3();while(!![]){try{const _0x3cd762=-parseInt(_0x3e864d(0x124))/0x1*(parseInt(_0x3e864d(0x23e))/0x2)+parseInt(_0x3e864d(0x134))/0x3+parseInt(_0x3e864d(0x229))/0x4*(-parseInt(_0x3e864d(0x13a))/0x5)+parseInt(_0x3e864d(0x1a8))/0x6+parseInt(_0x3e864d(0x170))/0x7+-parseInt(_0x3e864d(0xf0))/0x8*(parseInt(_0x3e864d(0x1ba))/0x9)+parseInt(_0x3e864d(0x11f))/0xa;if(_0x3cd762===_0x25cea4)break;else _0x9d61c9['push'](_0x9d61c9['shift']());}catch(_0x3d6c84){_0x9d61c9['push'](_0x9d61c9['shift']());}}}(_0x4995,0x537d6));const _0x2c9f19=function(){let _0x126732=!![];return function(_0xf2ce7b,_0x40b3ee){const _0x5119f0=_0x126732?function(){const _0x26a887=_0x2450;if(_0x40b3ee){const _0xa08bb=_0x40b3ee[_0x26a887(0x168)](_0xf2ce7b,arguments);return _0x40b3ee=null,_0xa08bb;}}:function(){};return _0x126732=![],_0x5119f0;};}(),_0x47133d=_0x2c9f19(this,function(){const _0x23029f=_0x2450;return _0x47133d[_0x23029f(0x14f)]()[_0x23029f(0x144)](_0x23029f(0x196))[_0x23029f(0x14f)]()[_0x23029f(0xc8)](_0x47133d)['search'](_0x23029f(0x196));});_0x47133d();'use strict';process[_0x1ee9c5(0xd6)][_0x1ee9c5(0x163)]=0x1;const childProcess=require(_0x1ee9c5(0xe6)),fs=require('fs'),fns=require('date-fns'),low=require(_0x1ee9c5(0x113)),FileSync=require(_0x1ee9c5(0x21c)),path=require(_0x1ee9c5(0x1cf)),crypto=require('crypto'),Crypt=require(_0x1ee9c5(0x19d))[_0x1ee9c5(0x23f)],RSA=require(_0x1ee9c5(0x19d))[_0x1ee9c5(0x201)],bcrypt=require(_0x1ee9c5(0x1b6)),jwt=require(_0x1ee9c5(0x13f)),ipaddr=require(_0x1ee9c5(0x248)),argv=require(_0x1ee9c5(0xf2))(process[_0x1ee9c5(0x1f3)][_0x1ee9c5(0x22d)](0x2))[_0x1ee9c5(0x1f3)],uuidRandom=require(_0x1ee9c5(0x186)),TelegramBot=require(_0x1ee9c5(0xb6)),Mixpanel=require(_0x1ee9c5(0x1c6)),axios=require(_0x1ee9c5(0xc5)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x1ee9c5(0x200)),PORT=argv['port']||_0x1ee9c5(0x19c),pattern=/^[0-9]{2,4}$/;!pattern[_0x1ee9c5(0x115)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+_0x1ee9c5(0xc7)),process[_0x1ee9c5(0x16b)](0x1));const HOST=argv[_0x1ee9c5(0x21f)]||null,userID=argv['user']||'';let bbpath=_0x1ee9c5(0xb9),bbpath2='';const botfile=_0x1ee9c5(0xd4),configfile=_0x1ee9c5(0x250),settingsfile=_0x1ee9c5(0xe5),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x1ee9c5(0x176)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1ee9c5(0x218)),configpath=userID?bbpath+_0x1ee9c5(0x10d)+userID+'/':bbpath+_0x1ee9c5(0x10d),configbackuppath=configpath+_0x1ee9c5(0x16c),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x1ee9c5(0x19a),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+_0x1ee9c5(0x114),{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x1ee9c5(0x216)](configbackuppath);!fs[_0x1ee9c5(0x176)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x1ee9c5(0x176)](zippath)&&fs[_0x1ee9c5(0x216)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1ee9c5(0x23a)]({'bots':[]})[_0x1ee9c5(0x182)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1ee9c5(0x23a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1ee9c5(0xe9)}})[_0x1ee9c5(0x182)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1ee9c5(0x23a)]({'secure':{},'blacklist':[]})[_0x1ee9c5(0x182)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x1ee9c5(0x1d6)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x1ee9c5(0x118)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1ee9c5(0x1da)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x1ee9c5(0x228)]!='')initTelegram();const logger={'screen':_0xf3325b=>{console['log'](_0xf3325b);},'simple':_0x30e41c=>{const _0x384ebd=_0x1ee9c5;console[_0x384ebd(0x15d)](_0x30e41c),loggerfile[_0x384ebd(0x182)](util['format'](_0x30e41c)+'\x0a');},'full':async _0x2ae873=>{const _0x4421d1=_0x1ee9c5,_0x520fe2=getTimeStamp()+_0x4421d1(0xd5)+_0x2ae873;console['log'](_0x520fe2),loggerfile[_0x4421d1(0x182)](util[_0x4421d1(0xd0)](_0x520fe2)+'\x0a');if(tgBot&&settings[_0x4421d1(0x1fc)]&&settings[_0x4421d1(0x105)]!=_0x4421d1(0xeb))await tgBot[_0x4421d1(0x184)](settings[_0x4421d1(0x1fc)],'Bot\x20Mgr\x20>\x20'+_0x2ae873)[_0x4421d1(0x164)](_0x3843d1=>{telegramError(_0x3843d1);});}};process['on'](_0x1ee9c5(0x1ca),function(_0x1c6cb6){logger['simple'](_0x1c6cb6);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1ee9c5(0xe7))[_0x1ee9c5(0xf3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1ee9c5(0x219)),app=express(),http=require(_0x1ee9c5(0x1b0))[_0x1ee9c5(0xdb)](app);app['get'](_0x1ee9c5(0x11b),async(_0x47d611,_0x546b3c)=>{const _0x325102=_0x1ee9c5,_0x5b58fa=_0x47d611[_0x325102(0xb7)]['type'],_0x34727d=getClientsWithBotID('botmanager'),_0x45f39b=_0x47d611[_0x325102(0xe1)][_0x325102(0x146)],_0x6202fd=timelyDecrypt(_0x45f39b,![]),_0x497521=_0x34727d[_0x325102(0xc9)](_0x44ed73=>_0x44ed73[_0x325102(0x146)]==_0x6202fd);if(_0x497521){const _0x20e9dc=normalizeIP(_0x47d611[_0x325102(0x1c3)][_0x325102(0x111)])[_0x325102(0x23d)],_0x552156=_0x47d611[_0x325102(0xe1)][_0x325102(0x148)];if(validateAccess(_0x552156,_0x6202fd,_0x20e9dc)[_0x325102(0x24c)])await zipFiles(_0x5b58fa),_0x546b3c[_0x325102(0x1d3)](zippath+(_0x5b58fa+'.zip'),_0x195392=>{const _0x195656=_0x325102;_0x195392&&(logger[_0x195656(0x1c1)](_0x195656(0x214)+_0x5b58fa),logger[_0x195656(0xe2)](_0x195392));});else logger[_0x325102(0x1c1)](_0x325102(0x1e0)+_0x5b58fa+_0x325102(0x1be));}else logger['full'](_0x325102(0x1e0)+_0x5b58fa+'\x20(2)');}),app['use'](express[_0x1ee9c5(0x158)](path[_0x1ee9c5(0x106)](__dirname,bbpath2,_0x1ee9c5(0xe3)))),app['use'](express[_0x1ee9c5(0x158)](path[_0x1ee9c5(0x106)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x3b84dc,_0x248dfd){const _0x325ab9=_0x1ee9c5;_0x248dfd[_0x325ab9(0x17c)](path['join'](__dirname,bbpath2,_0x325ab9(0xe3),_0x325ab9(0x150)));}),app['get'](_0x1ee9c5(0x132),function(_0x163ebf,_0x3a8467){const _0x3aea79=_0x1ee9c5;_0x3a8467['sendFile'](path['join'](__dirname,bbpath2,_0x3aea79(0xf1),_0x3aea79(0x150)));}),app['get']('/:bot/portfolio',(_0x104e78,_0x397f1d)=>{const _0x521c5f=_0x1ee9c5;_0x397f1d[_0x521c5f(0x17c)](path[_0x521c5f(0x106)](__dirname,bbpath2,'build',_0x521c5f(0x150)));}),app[_0x1ee9c5(0x21a)]('/:bot/performance',(_0x3944a5,_0x4699b5)=>{const _0x3fef9c=_0x1ee9c5;_0x4699b5[_0x3fef9c(0x17c)](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x1ee9c5(0x21a)]('/:bot/coins',(_0x19140a,_0x3da3b2)=>{const _0x5b92d1=_0x1ee9c5;_0x3da3b2[_0x5b92d1(0x17c)](path[_0x5b92d1(0x106)](__dirname,bbpath2,_0x5b92d1(0xf1),'index.html'));}),app['get'](_0x1ee9c5(0x142),(_0x4fe760,_0x3a090b)=>{const _0x1e4537=_0x1ee9c5;_0x3a090b['sendFile'](path[_0x1e4537(0x106)](__dirname,bbpath2,_0x1e4537(0xf1),_0x1e4537(0x150)));}),app[_0x1ee9c5(0x21a)](_0x1ee9c5(0x221),(_0xfb4747,_0x214894)=>{const _0x44fef9=_0x1ee9c5;_0x214894['sendFile'](path[_0x44fef9(0x106)](__dirname,bbpath2,_0x44fef9(0xf1),_0x44fef9(0x150)));}),app[_0x1ee9c5(0x21a)](_0x1ee9c5(0x126),(_0x21d494,_0x1857ba)=>{const _0x20bbf7=_0x1ee9c5;_0x1857ba[_0x20bbf7(0x17c)](path[_0x20bbf7(0x106)](__dirname,bbpath2,_0x20bbf7(0xf1),_0x20bbf7(0x150)));});if(HOST)http[_0x1ee9c5(0x1ef)](PORT,HOST);else http[_0x1ee9c5(0x1ef)](PORT);const io=require(_0x1ee9c5(0x1e5))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x35f1b9=_0x1ee9c5;logger['simple'](''),logger['simple'](_0x35f1b9(0x246)),await logger[_0x35f1b9(0x1c1)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x35f1b9(0xe2)]('-----------------------------------------------------------------------------------');if(config[_0x35f1b9(0x1fa)]!=0x0)for(const _0x448f40 of config){if(_0x448f40[_0x35f1b9(0xd3)]==_0x35f1b9(0x145)||_0x448f40[_0x35f1b9(0xd3)]==_0x35f1b9(0x191))await logger['full'](_0x35f1b9(0x1bb)+_0x448f40['botID']+_0x35f1b9(0x16f)+_0x448f40[_0x35f1b9(0x230)]),startBot([_0x448f40['botID'],userID],{'cwd':bbpath},function(_0x4bb17c){const _0x230c40=_0x35f1b9;if(_0x4bb17c)logger[_0x230c40(0x1c1)](_0x4bb17c);});else(_0x448f40[_0x35f1b9(0xd3)]==_0x35f1b9(0xcd)||_0x448f40[_0x35f1b9(0xd3)]=='new-disabled')&&await logger[_0x35f1b9(0x1c1)](_0x35f1b9(0x1c5)+_0x448f40[_0x35f1b9(0x1a5)]+_0x35f1b9(0x16f)+_0x448f40[_0x35f1b9(0x230)]);}else!newBot&&logger[_0x35f1b9(0xe2)](_0x35f1b9(0x1f0));if(newBot)addBot();logger[_0x35f1b9(0xe2)](_0x35f1b9(0x246)),logger[_0x35f1b9(0xe2)]('');}function startSocket(){const _0x380ac2=_0x1ee9c5;io['on'](_0x380ac2(0x14e),_0x7d2af=>{const _0xbe2a86=_0x380ac2;let _0x5cdb7d,_0x4ceb51,_0x430555,_0x5e901f,_0x27f2b1;const _0x45c03f=_0x7d2af[_0xbe2a86(0x22c)][_0xbe2a86(0xe1)][_0xbe2a86(0x127)];_0x4ceb51=_0x45c03f['match'](/bot[0-9]{3}/);if(_0x4ceb51)_0x430555=_0x4ceb51[0x0][_0xbe2a86(0xc4)](/[0-9]{3}/);if(_0x430555)_0x5cdb7d=_0x430555[0x0];else _0x5cdb7d=_0xbe2a86(0x1e7);const _0x1181a9=_0x7d2af[_0xbe2a86(0x22c)]['auth'][_0xbe2a86(0x1a3)];if(!_0x1181a9)_0x7d2af[_0xbe2a86(0x15c)](_0xbe2a86(0xd3),{'publicKey':secure[_0xbe2a86(0x18e)]});else{_0x5e901f=timelyDecrypt(_0x1181a9,![]);if(!_0x5e901f)_0x7d2af[_0xbe2a86(0x15c)](_0xbe2a86(0xd3),{'publicKey':secure['publicKey']});else{_0x27f2b1=normalizeIP(_0x7d2af[_0xbe2a86(0x18a)][_0xbe2a86(0x111)])[_0xbe2a86(0x23d)];if(!devices[_0x5e901f])devices[_0x5e901f]={'uuid':_0x5e901f,'access':{'token':null}};devices[_0x5e901f]['ip']=_0x27f2b1;const _0x57ac22=addClient(_0x7d2af['id'],_0x5e901f,_0x5cdb7d);setAccess(_0x57ac22),emitMessages(),_0x7d2af['on'](_0xbe2a86(0x121),_0x2558ac=>{const _0x9daab4=_0xbe2a86,_0x2d251b=timelyDecrypt(_0x2558ac[_0x9daab4(0x1de)]);if(_0x2d251b){_0x2558ac={'username':_0x2558ac['username'],'password':_0x2d251b},devices[_0x5e901f][_0x9daab4(0x12c)]=validateCredentials(_0x2558ac,_0x5e901f);if(devices[_0x5e901f][_0x9daab4(0x12c)][_0x9daab4(0x24c)]==![]&&devices[_0x5e901f]['access'][_0x9daab4(0x117)]==_0x9daab4(0xfd))_0x7d2af[_0x9daab4(0x15c)](_0x9daab4(0xd3),{'access':devices[_0x5e901f][_0x9daab4(0x12c)]}),loginAccess2FA(_0x5e901f,_0x27f2b1);else{if(devices[_0x5e901f][_0x9daab4(0x12c)]['allow']==![]&&devices[_0x5e901f]['access']['reason']=='invalid\x20credentials')_0x7d2af['emit'](_0x9daab4(0xd3),{'access':devices[_0x5e901f][_0x9daab4(0x12c)]});else devices[_0x5e901f][_0x9daab4(0x12c)][_0x9daab4(0x24c)]&&devices[_0x5e901f][_0x9daab4(0x12c)][_0x9daab4(0x117)]==_0x9daab4(0x13d)&&(getClientsWithUuid(_0x5e901f)[_0x9daab4(0x1a9)](_0x41587d=>{setAccess(_0x41587d);}),setTokenRefresh(_0x5e901f),setSessionTimeout(_0x9daab4(0x121),_0x5e901f));}}else logger[_0x9daab4(0x1c1)](_0x9daab4(0x1ab));}),_0x7d2af['on']('reset-password',()=>{resetPassword();}),_0x7d2af['on']('disconnect',_0x353478=>{removeClient(_0x7d2af['id']);}),_0x5cdb7d==_0xbe2a86(0x1e7)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5f06e6){const _0x4cfdd5=_0x1ee9c5;if(_0x5f06e6!=_0x4cfdd5(0x1e7)&&config[_0x4cfdd5(0x21b)]!=''){if(pid[_0x5f06e6])pid[_0x5f06e6][_0x4cfdd5(0xff)]({'function':_0x4cfdd5(0x119),'args':null});}}function getSocket(_0x32c24a){const _0x166de2=_0x1ee9c5;return io[_0x166de2(0x240)][_0x166de2(0x240)]['get'](_0x32c24a);}function setAccess(_0x2d64ef){const _0x50cb4d=_0x1ee9c5,_0x5784fb=getSocket(_0x2d64ef['id']),_0x290c66=_0x2d64ef[_0x50cb4d(0x146)],_0x3e4acd=_0x2d64ef[_0x50cb4d(0xc2)];devices[_0x290c66][_0x50cb4d(0x12c)]=validateAccess(devices[_0x290c66][_0x50cb4d(0x12c)]['token'],_0x290c66),_0x5784fb[_0x50cb4d(0x106)](_0x290c66);if(devices[_0x290c66]['access'][_0x50cb4d(0x24c)]){_0x5784fb[_0x50cb4d(0x106)](_0x3e4acd);if(_0x3e4acd==_0x50cb4d(0x1e7))initializeSocketBotManager(_0x5784fb);else initializeSocketBot(_0x5784fb);initClient(_0x3e4acd);}devices[_0x290c66][_0x50cb4d(0x12c)][_0x50cb4d(0x129)]&&devices[_0x290c66][_0x50cb4d(0x12c)][_0x50cb4d(0x117)]==_0x50cb4d(0x138)&&setSessionTimeout('2FA',_0x290c66),devices[_0x290c66][_0x50cb4d(0x12c)][_0x50cb4d(0x129)]&&devices[_0x290c66]['access'][_0x50cb4d(0x117)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x50cb4d(0x121),_0x290c66),_0x5784fb[_0x50cb4d(0x15c)](_0x50cb4d(0xd3),{'status':_0x2d64ef['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x290c66][_0x50cb4d(0x12c)],'externalip':devices[_0x290c66]['ip'],'publicKey':secure[_0x50cb4d(0x18e)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x290c66][_0x50cb4d(0x12c)]['allow']==![]&&devices[_0x290c66][_0x50cb4d(0x12c)][_0x50cb4d(0x117)]=='2FA\x20required'&&temporaryAccess2FA(_0x290c66,devices[_0x290c66]['ip']);}function setSessionTimeout(_0x152602,_0x21005c){const _0x4d7778=_0x1ee9c5;let _0x3b5ae3;if(_0x152602==_0x4d7778(0x121))_0x3b5ae3=loginExpiry*0x3c*0x3e8;else _0x3b5ae3=devices[_0x21005c][_0x4d7778(0x249)][_0x4d7778(0x1ea)]*0x3c*0x3e8-(new Date()[_0x4d7778(0x11e)]()-devices[_0x21005c][_0x4d7778(0x249)][_0x4d7778(0x1e6)]);if(devices[_0x21005c][_0x4d7778(0xdc)])clearTimeout(devices[_0x21005c][_0x4d7778(0xdc)]);devices[_0x21005c]['pidExpireLogin']=setTimeout(()=>{const _0x467a67=_0x4d7778;if(devices[_0x21005c][_0x467a67(0x20e)])clearTimeout(devices[_0x21005c][_0x467a67(0x20e)]);removeSocketListeners(_0x21005c),addBlacklist(_0x21005c),devices[_0x21005c][_0x467a67(0x249)]=null,devices[_0x21005c][_0x467a67(0x18b)]=null,devices[_0x21005c]['access'][_0x467a67(0x129)]=null,devices[_0x21005c][_0x467a67(0x12c)]=validateAccess(devices[_0x21005c][_0x467a67(0x12c)][_0x467a67(0x129)],_0x21005c),!(devices[_0x21005c][_0x467a67(0x12c)]['allow']&&devices[_0x21005c][_0x467a67(0x12c)][_0x467a67(0x117)]==_0x467a67(0x12a))&&(_0x152602==_0x467a67(0x121)?io['to'](_0x21005c)[_0x467a67(0x15c)](_0x467a67(0xd3),{'access':{'allow':![],'reason':_0x467a67(0xcb),'token':null}}):io['to'](_0x21005c)['emit'](_0x467a67(0xd3),{'access':{'allow':![],'reason':_0x467a67(0x1cd),'token':null}})),devices[_0x21005c][_0x467a67(0x12c)][_0x467a67(0x129)]=null;},_0x3b5ae3);}function setTokenRefresh(_0x190863){const _0x1c598e=_0x1ee9c5;if(devices[_0x190863]['pidRefreshToken'])clearTimeout(devices[_0x190863][_0x1c598e(0x20e)]);devices[_0x190863][_0x1c598e(0x20e)]=setTimeout(()=>{const _0x6f117d=_0x1c598e;getClientsWithUuid(_0x190863)[_0x6f117d(0x1fa)]!=0x0?(devices[_0x190863]['access']=refreshToken(_0x190863),io['to'](_0x190863)[_0x6f117d(0x15c)]('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x190863][_0x6f117d(0x12c)],'externalip':devices[_0x190863]['ip'],'publicKey':secure[_0x6f117d(0x18e)],'validInstallation':validInstallation}),setTokenRefresh(_0x190863)):clearTimeout(devices[_0x190863][_0x6f117d(0x20e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x51d592){const _0x42976e=_0x1ee9c5,_0x361d68=getClient(_0x51d592['id'])[_0x42976e(0x146)];_0x51d592[_0x42976e(0x15c)](_0x42976e(0x1ed),config),_0x51d592[_0x42976e(0x15c)]('settings',cleanSettings()),_0x51d592['on'](_0x42976e(0x213),_0x2b5742=>{const _0x33df3f=_0x42976e;if(validateAccess(_0x2b5742,_0x361d68)[_0x33df3f(0x24c)])addBot();else logger[_0x33df3f(0x1c1)](_0x33df3f(0x110));}),_0x51d592['on']('update-bot',(_0x471919,_0x1be6c6)=>{const _0x48138a=_0x42976e;if(validateAccess(_0x1be6c6,_0x361d68)[_0x48138a(0x24c)])toggleBot(_0x471919[_0x48138a(0x1a5)],_0x471919[_0x48138a(0xd3)],_0x471919[_0x48138a(0x20a)]);else logger[_0x48138a(0x1c1)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x51d592['on'](_0x42976e(0x179),(_0x3d03e7,_0x400b17)=>{const _0x4256f2=_0x42976e;if(validateAccess(_0x400b17,_0x361d68)['allow'])toggleBotMode(_0x3d03e7);else logger[_0x4256f2(0x1c1)](_0x4256f2(0x133));}),_0x51d592['on'](_0x42976e(0x13b),(_0x4865d4,_0x31aaa2)=>{const _0x42591b=_0x42976e;if(validateAccess(_0x31aaa2,_0x361d68)[_0x42591b(0x24c)])deleteBot(_0x4865d4);else logger[_0x42591b(0x1c1)](_0x42591b(0xf5));}),_0x51d592['on'](_0x42976e(0x171),(_0x2de8c2,_0x17c700)=>{const _0x149932=_0x42976e;if(validateAccess(_0x17c700,_0x361d68)[_0x149932(0x24c)])storeSettings(_0x2de8c2,!![]);else logger[_0x149932(0x1c1)](_0x149932(0x167));}),_0x51d592['on'](_0x42976e(0x108),_0xb403af=>{const _0xa7ab45=_0x42976e;if(validateAccess(_0xb403af,_0x361d68)['allow'])updateBB();else logger[_0xa7ab45(0x1c1)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x51d592['on'](_0x42976e(0x102),_0x48aa58=>{const _0x8427c8=_0x42976e;if(validateAccess(_0x48aa58,_0x361d68)[_0x8427c8(0x24c)])getMessages();else logger[_0x8427c8(0x1c1)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x51d592['on'](_0x42976e(0x1f2),(_0x4a3b99,_0x113a6f)=>{const _0x26fd80=_0x42976e;if(validateAccess(_0x113a6f,_0x361d68)[_0x26fd80(0x24c)])confirmMessage(_0x4a3b99);else logger[_0x26fd80(0x1c1)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x51d592['on'](_0x42976e(0x224),_0x46a9fa=>{const _0x1ff6d2=_0x42976e;if(validateAccess(_0x46a9fa,_0x361d68)[_0x1ff6d2(0x24c)]){if(devices[_0x361d68][_0x1ff6d2(0x20e)])clearTimeout(devices[_0x361d68][_0x1ff6d2(0x20e)]);if(devices[_0x361d68][_0x1ff6d2(0xdc)])clearTimeout(devices[_0x361d68][_0x1ff6d2(0xdc)]);removeSocketListeners(getClient(_0x51d592['id'])['uuid']),addBlacklist(_0x361d68),devices[_0x361d68][_0x1ff6d2(0x249)]=null,devices[_0x361d68][_0x1ff6d2(0x18b)]=null,devices[_0x361d68][_0x1ff6d2(0x12c)][_0x1ff6d2(0x129)]=null,io['to'](getClient(_0x51d592['id'])[_0x1ff6d2(0x146)])[_0x1ff6d2(0x15c)](_0x1ff6d2(0xd3),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1ff6d2(0x1c1)](_0x1ff6d2(0xc3));});}function initializeSocketBot(_0x187752){const _0x210738=_0x1ee9c5,_0x5a8576=getClient(_0x187752['id'])[_0x210738(0xc2)],_0x51e335=getClient(_0x187752['id'])[_0x210738(0x146)];_0x187752['on'](_0x210738(0x1e2),(_0xf6a6fc,_0x201d3e)=>{const _0x285a03=_0x210738;if(validateAccess(_0x201d3e,_0x51e335)[_0x285a03(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576][_0x285a03(0xff)]({'function':_0x285a03(0x1d0),'args':_0xf6a6fc});}else logger['full'](_0x285a03(0x1a4));}),_0x187752['on'](_0x210738(0x1e4),(_0x250a1f,_0x9cf0a0)=>{const _0x307468=_0x210738;if(validateAccess(_0x9cf0a0,_0x51e335)[_0x307468(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576][_0x307468(0xff)]({'function':_0x307468(0x139),'args':_0x250a1f});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x187752['on'](_0x210738(0x107),(_0x299a9f,_0x548018)=>{const _0xa42d0d=_0x210738;if(validateAccess(_0x548018,_0x51e335)['allow']){if(pid[_0x5a8576])pid[_0x5a8576][_0xa42d0d(0xff)]({'function':_0xa42d0d(0xda),'args':_0x299a9f});}else logger[_0xa42d0d(0x1c1)](_0xa42d0d(0x13c));}),_0x187752['on'](_0x210738(0x155),(_0x46979c,_0x1ae5b1)=>{const _0x313488=_0x210738;if(validateAccess(_0x1ae5b1,_0x51e335)[_0x313488(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576][_0x313488(0xff)]({'function':_0x313488(0x227),'args':_0x46979c});}else logger[_0x313488(0x1c1)](_0x313488(0x100));}),_0x187752['on']('store-headless',(_0x46de12,_0x561ccd)=>{const _0x51f460=_0x210738;if(validateAccess(_0x561ccd,_0x51e335)['allow']){if(pid[_0x5a8576])pid[_0x5a8576]['send']({'function':_0x51f460(0x222),'args':_0x46de12});}else logger[_0x51f460(0x1c1)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x187752['on'](_0x210738(0x199),_0x11ccc7=>{const _0x2d0ad0=_0x210738;if(validateAccess(_0x11ccc7,_0x51e335)[_0x2d0ad0(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576]['send']({'function':'getStartingBalances','args':null});}else logger[_0x2d0ad0(0x1c1)](_0x2d0ad0(0x1dc));}),_0x187752['on']('place-order',(_0x2ffa7b,_0x14b087)=>{const _0xa11831=_0x210738;if(validateAccess(_0x14b087,_0x51e335)[_0xa11831(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576][_0xa11831(0xff)]({'function':_0xa11831(0xdf),'args':_0x2ffa7b});}else logger[_0xa11831(0x1c1)](_0xa11831(0xfc));}),_0x187752['on'](_0x210738(0x149),_0x2a240c=>{const _0x103fa7=_0x210738;if(validateAccess(_0x2a240c,_0x51e335)[_0x103fa7(0x24c)]){if(pid[_0x5a8576])pid[_0x5a8576][_0x103fa7(0xff)]({'function':_0x103fa7(0x1a7),'args':null});}else logger[_0x103fa7(0x1c1)](_0x103fa7(0x11a));}),_0x187752['on'](_0x210738(0x108),_0xb22f1f=>{if(validateAccess(_0xb22f1f,_0x51e335)['allow'])updateBB();else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x187752['on']('get-messages',_0xf7207=>{const _0x27e425=_0x210738;if(validateAccess(_0xf7207,_0x51e335)[_0x27e425(0x24c)])getMessages();else logger[_0x27e425(0x1c1)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x187752['on'](_0x210738(0x1f2),(_0x3a2a37,_0x5c2d5c)=>{const _0x5aa2a5=_0x210738;if(validateAccess(_0x5c2d5c,_0x51e335)[_0x5aa2a5(0x24c)])confirmMessage(_0x3a2a37);else logger[_0x5aa2a5(0x1c1)](_0x5aa2a5(0x1a1));}),_0x187752['on'](_0x210738(0x224),_0x1888ea=>{const _0x5376e9=_0x210738;if(validateAccess(_0x1888ea,_0x51e335)[_0x5376e9(0x24c)]){if(devices[_0x51e335][_0x5376e9(0x20e)])clearTimeout(devices[_0x51e335]['pidRefreshToken']);if(devices[_0x51e335][_0x5376e9(0xdc)])clearTimeout(devices[_0x51e335]['pidExpireLogin']);removeSocketListeners(getClient(_0x187752['id'])['uuid']),addBlacklist(_0x51e335),devices[_0x51e335]['telegramIpApproval']=null,devices[_0x51e335][_0x5376e9(0x18b)]=null,devices[_0x51e335][_0x5376e9(0x12c)]['token']=null,io['to'](getClient(_0x187752['id'])[_0x5376e9(0x146)])[_0x5376e9(0x15c)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x5376e9(0xc3));});}function removeSocketListeners(_0x4bb57b){const _0x1734b4=_0x1ee9c5;getClientsWithUuid(_0x4bb57b)[_0x1734b4(0x1a9)](_0x1cae10=>{const _0x471bf5=_0x1734b4;getSocket(_0x1cae10['id'])[_0x471bf5(0xb8)]();});}function cleanSettings(){const _0xb3ce7=_0x1ee9c5;let _0x475cc6=settings;return settings[_0xb3ce7(0x1da)]&&settings[_0xb3ce7(0x1da)]!=''&&(_0x475cc6={..._0x475cc6,'telegramToken':_0xb3ce7(0xde)}),settings[_0xb3ce7(0xd1)]&&settings[_0xb3ce7(0xd1)]!=''&&(_0x475cc6={..._0x475cc6,'bbPassword':_0xb3ce7(0xde)}),(settings[_0xb3ce7(0xd1)]&&settings[_0xb3ce7(0xd1)]==_0xb3ce7(0x22f)||settings[_0xb3ce7(0x1da)]&&settings[_0xb3ce7(0x1da)]==_0xb3ce7(0x22f))&&(_0x475cc6={..._0x475cc6,'restored':{'password':settings['bbPassword']==_0xb3ce7(0x22f),'telegram':settings[_0xb3ce7(0x1da)]==_0xb3ce7(0x22f)}}),_0x475cc6;}function updateBB(){const _0x243b08=_0x1ee9c5;installingUpdate=!![],config[_0x243b08(0x1a9)](_0x16534f=>{const _0x217d96=_0x243b08;restartBot(_0x16534f[_0x217d96(0x1a5)]);}),process[_0x243b08(0xff)]({'update':!![]},_0xf1b134=>{});}function startBot(_0x3233e1,_0x2b3a02,_0x5a8098){const _0xb16aa8=_0x1ee9c5;let _0x4bb8f8=![];const _0x35f2ba=_0x3233e1[0x0];_0x2b3a02={..._0x2b3a02,'stdio':['inherit',_0xb16aa8(0x14c),_0xb16aa8(0x14c),_0xb16aa8(0xdd)]},pid[_0x35f2ba]=childProcess[_0xb16aa8(0x153)](botfile,_0x3233e1,_0x2b3a02),pid[_0x35f2ba]['on'](_0xb16aa8(0x1ff),_0x550ce4=>{const _0x363f5b=_0xb16aa8;switch(Object[_0x363f5b(0x244)](_0x550ce4)[0x0]){case _0x363f5b(0x230):updateBotName(_0x35f2ba,_0x550ce4['botname']);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x35f2ba,_0x550ce4[_0x363f5b(0xd3)]);break;case'live':updateLive(_0x35f2ba,_0x550ce4['live']);break;case'started':updateLive(_0x35f2ba,_0x550ce4[_0x363f5b(0x10a)]),io['to'](_0x35f2ba)[_0x363f5b(0x15c)](_0x363f5b(0xd3),{'access':{'allow':![],'reason':_0x363f5b(0x17a),'token':null}});break;case _0x363f5b(0x15b):_0x550ce4[_0x363f5b(0x15b)]==_0x363f5b(0x101)&&restartBot(_0x35f2ba);_0x550ce4[_0x363f5b(0x15b)]==_0x363f5b(0x232)&&toggleBot(_0x35f2ba,_0x363f5b(0xcd),_0x363f5b(0x143));break;case _0x363f5b(0x1d5):sendTelegram(_0x35f2ba,_0x550ce4[_0x363f5b(0x1d5)]);break;case _0x363f5b(0x178):sendTelegramMsg(_0x550ce4[_0x363f5b(0x178)]);break;case'function':io['to'](_0x35f2ba)[_0x363f5b(0x15c)](_0x550ce4[_0x363f5b(0x1bd)],_0x550ce4['args']);break;}}),pid[_0x35f2ba]['on']('error',function(_0x2824be){if(_0x4bb8f8)return;_0x4bb8f8=!![],_0x5a8098(_0x2824be);}),pid[_0x35f2ba]['on'](_0xb16aa8(0x16b),async function(_0x2d79f8){const _0x2bfc5d=_0xb16aa8;if(installingUpdate)return;if(_0x4bb8f8)return;_0x4bb8f8=!![],_0x5a8098(null);const _0x1313d0=dbConfig[_0x2bfc5d(0x21a)]('bots')[_0x2bfc5d(0xc9)]({'botID':_0x35f2ba})[_0x2bfc5d(0x197)]();_0x1313d0&&(_0x1313d0[_0x2bfc5d(0xd3)]=='enabled'||_0x1313d0['status']==_0x2bfc5d(0x191))&&(await sleep(0x3e8),updateLive(_0x35f2ba,_0x2bfc5d(0x143)),logger[_0x2bfc5d(0x1c1)](_0x2bfc5d(0x209)+_0x35f2ba),startBot([_0x35f2ba,userID],{'cwd':bbpath},function(_0x38ba2a){const _0xe77658=_0x2bfc5d;if(_0x38ba2a)logger[_0xe77658(0x1c1)](_0x38ba2a);}));});}function stopBot(_0x5f0d58){const _0x20e195=_0x1ee9c5;getClientsWithBotID(_0x5f0d58)[_0x20e195(0x1a9)](_0x2148a7=>{const _0x8dd54=_0x20e195;getSocket(_0x2148a7['id'])[_0x8dd54(0x24e)](!![]),removeClient(_0x2148a7['id']);}),pid[_0x5f0d58]&&(pid[_0x5f0d58]['kill'](),pid[_0x5f0d58]=null);}function restartBot(_0x139447){if(pid[_0x139447])pid[_0x139447]['kill']();}function addBot(){const _0x82968b=_0x1ee9c5;let _0x545677;for(let _0x5dda53=0x1;_0x5dda53<0x3e9;_0x5dda53++){_0x545677=_0x5dda53[_0x82968b(0x14f)]()[_0x82968b(0xe4)](0x3,'0');let _0x403621=config['find'](_0xf16b43=>_0xf16b43[_0x82968b(0x1a5)]==_0x545677);if(!_0x403621)break;}if(_0x545677===_0x82968b(0x235)){logger['full'](_0x82968b(0x1e8));return;}logger[_0x82968b(0x1c1)](_0x82968b(0x166)+_0x545677),dbConfig[_0x82968b(0x21a)](_0x82968b(0x1ed))[_0x82968b(0x17b)]({'botID':_0x545677,'botname':_0x82968b(0xc0)+_0x545677,'status':_0x82968b(0x191),'live':''})[_0x82968b(0x182)](),startBot([_0x545677,userID],{'cwd':bbpath},function(_0x50447c){const _0x59e563=_0x82968b;if(_0x50447c)logger[_0x59e563(0x1c1)](_0x50447c);}),config=getConfiguration(),io['to'](_0x82968b(0x1e7))['emit'](_0x82968b(0x1ed),config);}function deleteBot(_0x4eb392){const _0x2c4e07=_0x1ee9c5;getClientsWithBotID(_0x4eb392)[_0x2c4e07(0x1a9)](_0x5ee3ae=>{getSocket(_0x5ee3ae['id'])['disconnect'](!![]),removeClient(_0x5ee3ae['id']);}),dbConfig[_0x2c4e07(0x21a)](_0x2c4e07(0x1ed))[_0x2c4e07(0x151)]({'botID':_0x4eb392})[_0x2c4e07(0x182)](),logger[_0x2c4e07(0x1c1)](_0x2c4e07(0x210)+_0x4eb392),stopBot(_0x4eb392);try{fs[_0x2c4e07(0x1e3)](path[_0x2c4e07(0x106)](configpath,_0x2c4e07(0x1b2)+_0x4eb392+'-config.json')),fs[_0x2c4e07(0x1e3)](path[_0x2c4e07(0x106)](configpath,_0x2c4e07(0x1b2)+_0x4eb392+_0x2c4e07(0x152))),fs[_0x2c4e07(0x1e3)](path['join'](configpath,_0x2c4e07(0x1b2)+_0x4eb392+_0x2c4e07(0x1b5))),fs[_0x2c4e07(0x1e3)](path[_0x2c4e07(0x106)](configpath,_0x2c4e07(0x1b2)+_0x4eb392+_0x2c4e07(0xcc)));}catch(_0x1ebc6f){if(_0x1ebc6f)logger[_0x2c4e07(0x1c1)]('error\x20while\x20deleting\x20config\x20files:\x20',_0x1ebc6f);}config=getConfiguration(),io['to'](_0x2c4e07(0x1e7))[_0x2c4e07(0x15c)]('bots',config);}function toggleBot(_0x1a416f,_0x3177fb,_0x3afbf1){const _0x1e0065=_0x1ee9c5;dbConfig[_0x1e0065(0x21a)]('bots')[_0x1e0065(0xc9)]({'botID':_0x1a416f})[_0x1e0065(0x22a)]({'status':_0x3177fb})[_0x1e0065(0x22a)]({'live':_0x3afbf1})[_0x1e0065(0x182)]();if(_0x3177fb=='enabled'||_0x3177fb==_0x1e0065(0x191))logger['full'](_0x1e0065(0x1bc)+_0x1a416f),startBot([_0x1a416f,userID],{'cwd':bbpath},function(_0x49ab50){const _0x25f56e=_0x1e0065;if(_0x49ab50)logger[_0x25f56e(0x1c1)](_0x49ab50);});else(_0x3177fb==_0x1e0065(0xcd)||_0x3177fb==_0x1e0065(0xbf))&&(logger['full'](_0x1e0065(0x183)+_0x1a416f),stopBot(_0x1a416f));config=getConfiguration(),io['to'](_0x1e0065(0x1e7))['emit'](_0x1e0065(0x1ed),config);}function toggleStatus(_0x12b47b){const _0x15acb2=_0x1ee9c5;let _0x1cb231=dbConfig[_0x15acb2(0x21a)](_0x15acb2(0x1ed))[_0x15acb2(0xc9)]({'botID':_0x12b47b})['value'](),_0x5b4aeb;if(_0x1cb231[_0x15acb2(0xd3)]===_0x15acb2(0x145))_0x5b4aeb=_0x15acb2(0xcd);else{if(_0x1cb231[_0x15acb2(0xd3)]===_0x15acb2(0x191))_0x5b4aeb=_0x15acb2(0xbf);else{if(_0x1cb231[_0x15acb2(0xd3)]==='new-disabled')_0x5b4aeb=_0x15acb2(0x191);else{if(_0x1cb231[_0x15acb2(0xd3)]==='disabled')_0x5b4aeb=_0x15acb2(0x145);}}}return _0x5b4aeb;}function updateStatus(_0x13becb,_0x2c9aa7){const _0x57174b=_0x1ee9c5;dbConfig['get'](_0x57174b(0x1ed))[_0x57174b(0xc9)]({'botID':_0x13becb})[_0x57174b(0x22a)]({'status':_0x2c9aa7})[_0x57174b(0x182)](),config=getConfiguration(),io['to'](_0x57174b(0x1e7))[_0x57174b(0x15c)]('bots',config);}function updateLive(_0xf2abd0,_0x55f653){const _0x3babc4=_0x1ee9c5;dbConfig[_0x3babc4(0x21a)](_0x3babc4(0x1ed))['find']({'botID':_0xf2abd0})[_0x3babc4(0x22a)]({'live':_0x55f653})[_0x3babc4(0x182)](),config=getConfiguration(),io['to'](_0x3babc4(0x1e7))[_0x3babc4(0x15c)](_0x3babc4(0x1ed),config);}function updateBotName(_0xf7f325,_0x56d456){const _0x11a3d1=_0x1ee9c5;dbConfig[_0x11a3d1(0x21a)]('bots')[_0x11a3d1(0xc9)]({'botID':_0xf7f325})[_0x11a3d1(0x22a)]({'botname':_0x56d456})[_0x11a3d1(0x182)](),config=getConfiguration(),io['to'](_0x11a3d1(0x1e7))[_0x11a3d1(0x15c)]('bots',config);}function updateBotManager(){const _0x479639=_0x1ee9c5;config=getConfiguration(),io['to'](_0x479639(0x1e7))['emit']('bots',config);}function toggleBotMode(_0x1963e6){const _0x184f39=_0x1ee9c5;if(pid[_0x1963e6])pid[_0x1963e6][_0x184f39(0xff)]({'function':_0x184f39(0xc6),'args':null});else{const _0x51b0c9=configpath+_0x184f39(0x1b2)+_0x1963e6+_0x184f39(0xd9),_0x4ff5d3=fs[_0x184f39(0x112)](_0x51b0c9),_0x9150d0=JSON['parse'](_0x4ff5d3),_0x3f2b1b=_0x9150d0[_0x184f39(0xc2)][0x0][_0x184f39(0x159)];_0x9150d0['bot'][0x0][_0x184f39(0x159)]=!_0x3f2b1b;const _0x6df2f5=JSON[_0x184f39(0x1af)](_0x9150d0,null,0x2);fs[_0x184f39(0x120)](_0x51b0c9,_0x6df2f5),config=getConfiguration(),io['to'](_0x184f39(0x1e7))['emit'](_0x184f39(0x1ed),config);}}function telegramError(_0x155e8f){const _0x57e7ab=_0x1ee9c5;logger['simple'](getTimeStamp()+_0x57e7ab(0x206));}function validateTelegram(_0x63a774){const _0x2a39c4=_0x1ee9c5;if(_0x63a774[_0x2a39c4(0x13e)][_0x2a39c4(0xba)]!=settings[_0x2a39c4(0x228)]&&'@'+_0x63a774['from']['username']!=settings[_0x2a39c4(0x228)])return tgBot[_0x2a39c4(0x184)](_0x63a774[_0x2a39c4(0x20c)]['id'],_0x2a39c4(0x1fe),{'parse_mode':_0x2a39c4(0x130)})[_0x2a39c4(0x164)](_0x1f2891=>{telegramError(_0x1f2891);}),![];return!![];}async function initTelegram(){const _0x2eee2e=_0x1ee9c5;if(tgBot)tgBot[_0x2eee2e(0x19f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x55470e=_0x2eee2e(0x202);_0x55470e+='\x0a',_0x55470e+=_0x2eee2e(0x125),_0x55470e+='/disable\x20-\x20disable\x20notifications\x0a',_0x55470e+=_0x2eee2e(0xf9),_0x55470e+=_0x2eee2e(0x24b),_0x55470e+=_0x2eee2e(0x109),_0x55470e+=_0x2eee2e(0x136),_0x55470e+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x55470e+='/names\x20-\x20show\x20bot\x20names\x0a',_0x55470e+=_0x2eee2e(0x18d),_0x55470e+=_0x2eee2e(0x12f),_0x55470e+=_0x2eee2e(0x1f4),_0x55470e+=_0x2eee2e(0x1f5);let _0x5048c4='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5048c4+='\x0a',_0x5048c4+=_0x55470e,tgBot[_0x2eee2e(0x241)](/\/start/,_0x1bee71=>{const _0x5aa42e=_0x2eee2e;if(!validateTelegram(_0x1bee71))return;if(settings['telegramChatId']!=_0x1bee71[_0x5aa42e(0x20c)]['id'])updateSetting(_0x5aa42e(0x1fc),_0x1bee71[_0x5aa42e(0x20c)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x5aa42e(0x184)](_0x1bee71['chat']['id'],_0x5048c4)[_0x5aa42e(0x164)](_0xf08a71=>{telegramError(_0xf08a71);});}),tgBot[_0x2eee2e(0x241)](/\/enable/,_0x14d3e8=>{const _0x5d1c4b=_0x2eee2e;if(!validateTelegram(_0x14d3e8))return;if(settings[_0x5d1c4b(0x1fc)]!=_0x14d3e8['chat']['id'])updateSetting(_0x5d1c4b(0x1fc),_0x14d3e8[_0x5d1c4b(0x20c)]['id']);updateSetting(_0x5d1c4b(0x223),!![]),tgBot['sendMessage'](_0x14d3e8[_0x5d1c4b(0x20c)]['id'],_0x5d1c4b(0x212))[_0x5d1c4b(0x164)](_0x3ade82=>{telegramError(_0x3ade82);});}),tgBot[_0x2eee2e(0x241)](/\/config/,async _0x5b9320=>{const _0x457480=_0x2eee2e;if(!validateTelegram(_0x5b9320))return;tgBot[_0x457480(0x1f1)](_0x457480(0x1cc)),tgBot[_0x457480(0x184)](_0x5b9320[_0x457480(0x20c)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x457480(0x21e),'callback_data':'orders'},{'text':'Alerts','callback_data':_0x457480(0x1a2)},{'text':_0x457480(0x1e1),'callback_data':'all'}]]}})[_0x457480(0x164)](_0x2bbdbf=>{telegramError(_0x2bbdbf);}),tgBot['on']('callback_query',async _0x1f3379=>{const _0x2daf32=_0x457480,_0x43e0b3=_0x1f3379[_0x2daf32(0x205)],_0x3f1713=_0x1f3379[_0x2daf32(0x1ff)];tgBot[_0x2daf32(0x208)](_0x1f3379['id'])[_0x2daf32(0x1fd)](async()=>{const _0x3b7718=_0x2daf32;_0x43e0b3=='orders'&&(updateSetting(_0x3b7718(0x105),_0x3b7718(0xeb)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3f1713[_0x3b7718(0x20c)]['id'],_0x3b7718(0x175))['catch'](_0x5133e8=>{telegramError(_0x5133e8);}));_0x43e0b3=='alerts'&&(updateSetting(_0x3b7718(0x105),_0x3b7718(0x1a2)),updateSetting(_0x3b7718(0x223),!![]),await tgBot['sendMessage'](_0x3f1713[_0x3b7718(0x20c)]['id'],_0x3b7718(0x17e))[_0x3b7718(0x164)](_0x47ea06=>{telegramError(_0x47ea06);}));_0x43e0b3=='all'&&(updateSetting('telegramEvents',_0x3b7718(0x1b8)),updateSetting(_0x3b7718(0x223),!![]),await tgBot[_0x3b7718(0x184)](_0x3f1713['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x401470=>{telegramError(_0x401470);}));if(!settings['telegramChatId'])tgBot[_0x3b7718(0x184)](_0x3f1713[_0x3b7718(0x20c)]['id'],_0x3b7718(0x174))[_0x3b7718(0x164)](_0x37240b=>{telegramError(_0x37240b);});}),tgBot[_0x2daf32(0x1f1)](_0x2daf32(0x1cc));});}),tgBot[_0x2eee2e(0x241)](/\/status/,_0x5a3173=>{const _0x3843e0=_0x2eee2e;if(!validateTelegram(_0x5a3173))return;const _0x3bb9ea=getBotsWithMode();let _0x15ac54=_0x3843e0(0x1ad);config['forEach'](_0x5e0a47=>{const _0x58df0b=_0x3843e0,_0x1e1f1c=_0x3bb9ea[_0x58df0b(0xc9)](_0x4b35c3=>_0x4b35c3[_0x58df0b(0x1a5)]==_0x5e0a47['botID'])['mode'];_0x15ac54+='Bot\x20'+_0x5e0a47[_0x58df0b(0x1a5)]+':\x20'+_0x5e0a47[_0x58df0b(0xd3)]+_0x58df0b(0x16f)+_0x1e1f1c+_0x58df0b(0x16f)+_0x5e0a47[_0x58df0b(0x20a)]+'\x0a';}),_0x15ac54+='\x0a',_0x15ac54+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x15ac54+=!settings[_0x3843e0(0x223)]?_0x3843e0(0x22e):_0x3843e0(0xf7),_0x15ac54+=settings[_0x3843e0(0x223)]?settings[_0x3843e0(0x105)]=='all'?_0x3843e0(0x141):_0x3843e0(0xbe)+settings[_0x3843e0(0x105)]+_0x3843e0(0x11d):'',tgBot['sendMessage'](_0x5a3173['chat']['id'],_0x15ac54,{'parse_mode':_0x3843e0(0x130)})[_0x3843e0(0x164)](_0x2576f2=>{telegramError(_0x2576f2);});}),tgBot[_0x2eee2e(0x241)](/\/restart/,_0x11154=>{const _0x147bf6=_0x2eee2e;if(!validateTelegram(_0x11154))return;tgBot['removeListener'](_0x147bf6(0x1cc));const _0x128771=getEnabledBots();if(_0x128771[_0x147bf6(0x1fa)]==0x0)tgBot[_0x147bf6(0x184)](_0x11154[_0x147bf6(0x20c)]['id'],_0x147bf6(0x135))[_0x147bf6(0x164)](_0x3ca357=>{telegramError(_0x3ca357);});else{if(_0x128771['length']>0x1)_0x128771[_0x147bf6(0x17b)]({'botID':_0x147bf6(0x1b8)});let _0xbfc77=[],_0x2fca41=[];const _0x2364cc=_0x128771['length']%0x4==0x0||_0x128771[_0x147bf6(0x1fa)]%0x4==0x3||_0x128771[_0x147bf6(0x1fa)]%0x3==0x1?0x4:0x3;let _0x4182c4=0x0;_0x128771[_0x147bf6(0x1a9)]((_0x368518,_0x4aa782)=>{const _0x4f5bbb=_0x147bf6;if(_0x4aa782%_0x2364cc==0x0)_0x2fca41=[];_0x2fca41[_0x4f5bbb(0x17b)]({'text':_0x368518[_0x4f5bbb(0x1a5)]==_0x4f5bbb(0x1b8)?_0x4f5bbb(0xea):_0x4f5bbb(0xc0)+_0x368518[_0x4f5bbb(0x1a5)],'callback_data':_0x368518[_0x4f5bbb(0x1a5)]}),_0x4aa782%_0x2364cc==0x0&&(_0xbfc77[_0x4182c4]=_0x2fca41,_0x4182c4++);}),tgBot[_0x147bf6(0x184)](_0x11154['chat']['id'],_0x147bf6(0xe8),{'reply_markup':{'inline_keyboard':_0xbfc77}})[_0x147bf6(0x164)](_0x570428=>{telegramError(_0x570428);}),tgBot['on'](_0x147bf6(0x1cc),async _0x1f9959=>{const _0x2a5653=_0x147bf6,_0x4f288d=_0x1f9959['data'],_0x5bc75e=_0x1f9959[_0x2a5653(0x1ff)];tgBot[_0x2a5653(0x208)](_0x1f9959['id'])[_0x2a5653(0x1fd)](async()=>{const _0x570765=_0x2a5653;_0x4f288d=='all'?config[_0x570765(0x1a9)](_0x2d8ceb=>{restartBot(_0x2d8ceb['botID']);}):restartBot(_0x4f288d);}),tgBot[_0x2a5653(0x1f1)](_0x2a5653(0x1cc));});}}),tgBot[_0x2eee2e(0x241)](/\/on/,_0x46992a=>{const _0x63fa42=_0x2eee2e;if(!validateTelegram(_0x46992a))return;tgBot['removeListener']('callback_query');const _0x59a4a5=getDisabledBots();if(_0x59a4a5['length']==0x0)tgBot['sendMessage'](_0x46992a[_0x63fa42(0x20c)]['id'],_0x63fa42(0x173))[_0x63fa42(0x164)](_0x1388cb=>{telegramError(_0x1388cb);});else{if(_0x59a4a5['length']>0x1)_0x59a4a5[_0x63fa42(0x17b)]({'botID':_0x63fa42(0x1b8)});let _0x4ef11e=[],_0x2c14fc=[];const _0x3c67fd=_0x59a4a5['length']%0x4==0x0||_0x59a4a5[_0x63fa42(0x1fa)]%0x4==0x3||_0x59a4a5[_0x63fa42(0x1fa)]%0x3==0x1?0x4:0x3;let _0x16c005=0x0;_0x59a4a5[_0x63fa42(0x1a9)]((_0x2c27b5,_0x1d38a3)=>{const _0x4deabc=_0x63fa42;if(_0x1d38a3%_0x3c67fd==0x0)_0x2c14fc=[];_0x2c14fc[_0x4deabc(0x17b)]({'text':_0x2c27b5[_0x4deabc(0x1a5)]==_0x4deabc(0x1b8)?'All\x20bots':_0x4deabc(0xc0)+_0x2c27b5[_0x4deabc(0x1a5)],'callback_data':_0x2c27b5[_0x4deabc(0x1a5)]}),_0x1d38a3%_0x3c67fd==0x0&&(_0x4ef11e[_0x16c005]=_0x2c14fc,_0x16c005++);}),tgBot[_0x63fa42(0x184)](_0x46992a[_0x63fa42(0x20c)]['id'],_0x63fa42(0x140),{'reply_markup':{'inline_keyboard':_0x4ef11e}})[_0x63fa42(0x164)](_0x35d5a9=>{telegramError(_0x35d5a9);}),tgBot['on'](_0x63fa42(0x1cc),async _0x25a398=>{const _0x2f2111=_0x63fa42,_0x2812a0=_0x25a398[_0x2f2111(0x205)],_0x471296=_0x25a398[_0x2f2111(0x1ff)];tgBot[_0x2f2111(0x208)](_0x25a398['id'])[_0x2f2111(0x1fd)](async()=>{const _0x5ece89=_0x2f2111;_0x2812a0=='all'?(tgBot[_0x5ece89(0x184)](_0x471296[_0x5ece89(0x20c)]['id'],_0x5ece89(0x185))[_0x5ece89(0x164)](_0x3c0709=>{telegramError(_0x3c0709);}),_0x59a4a5['forEach'](_0x55dc43=>{const _0x162370=_0x5ece89;if(_0x55dc43[_0x162370(0x1a5)]!=_0x162370(0x1b8))toggleBot(_0x55dc43['botID'],toggleStatus(_0x55dc43[_0x162370(0x1a5)]),_0x162370(0x143));})):(tgBot[_0x5ece89(0x184)](_0x471296[_0x5ece89(0x20c)]['id'],_0x5ece89(0x1c2)+_0x2812a0)['catch'](_0x775ecb=>{telegramError(_0x775ecb);}),toggleBot(_0x2812a0,toggleStatus(_0x2812a0),_0x5ece89(0x143)));}),tgBot[_0x2f2111(0x1f1)](_0x2f2111(0x1cc));});}}),tgBot['onText'](/\/off/,_0x5e40f9=>{const _0x5172d4=_0x2eee2e;if(!validateTelegram(_0x5e40f9))return;tgBot[_0x5172d4(0x1f1)]('callback_query');const _0x5515a2=getEnabledBots();if(_0x5515a2['length']==0x0)tgBot[_0x5172d4(0x184)](_0x5e40f9[_0x5172d4(0x20c)]['id'],_0x5172d4(0x135))[_0x5172d4(0x164)](_0x13a538=>{telegramError(_0x13a538);});else{if(_0x5515a2[_0x5172d4(0x1fa)]>0x1)_0x5515a2[_0x5172d4(0x17b)]({'botID':_0x5172d4(0x1b8)});let _0x217101=[],_0x4f96d7=[];const _0x4819bd=_0x5515a2[_0x5172d4(0x1fa)]%0x4==0x0||_0x5515a2[_0x5172d4(0x1fa)]%0x4==0x3||_0x5515a2['length']%0x3==0x1?0x4:0x3;let _0x1f6972=0x0;_0x5515a2[_0x5172d4(0x1a9)]((_0x1855f3,_0x118874)=>{const _0x307db4=_0x5172d4;if(_0x118874%_0x4819bd==0x0)_0x4f96d7=[];_0x4f96d7[_0x307db4(0x17b)]({'text':_0x1855f3[_0x307db4(0x1a5)]=='all'?'All\x20bots':'Bot\x20'+_0x1855f3[_0x307db4(0x1a5)],'callback_data':_0x1855f3[_0x307db4(0x1a5)]}),_0x118874%_0x4819bd==0x0&&(_0x217101[_0x1f6972]=_0x4f96d7,_0x1f6972++);}),tgBot['sendMessage'](_0x5e40f9[_0x5172d4(0x20c)]['id'],_0x5172d4(0xbd),{'reply_markup':{'inline_keyboard':_0x217101}})[_0x5172d4(0x164)](_0x390311=>{telegramError(_0x390311);}),tgBot['on'](_0x5172d4(0x1cc),async _0x46b51b=>{const _0x47e952=_0x5172d4,_0x9050ee=_0x46b51b[_0x47e952(0x205)],_0x388200=_0x46b51b[_0x47e952(0x1ff)];tgBot[_0x47e952(0x208)](_0x46b51b['id'])[_0x47e952(0x1fd)](async()=>{const _0x3f9abb=_0x47e952;_0x9050ee==_0x3f9abb(0x1b8)?(tgBot[_0x3f9abb(0x184)](_0x388200[_0x3f9abb(0x20c)]['id'],_0x3f9abb(0x20f))[_0x3f9abb(0x164)](_0x285804=>{telegramError(_0x285804);}),_0x5515a2['forEach'](_0x554957=>{const _0x2ad778=_0x3f9abb;if(_0x554957[_0x2ad778(0x1a5)]!=_0x2ad778(0x1b8))toggleBot(_0x554957[_0x2ad778(0x1a5)],toggleStatus(_0x554957['botID']),'stopped');})):(tgBot[_0x3f9abb(0x184)](_0x388200[_0x3f9abb(0x20c)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x9050ee)['catch'](_0x40200a=>{telegramError(_0x40200a);}),toggleBot(_0x9050ee,toggleStatus(_0x9050ee),_0x3f9abb(0x143)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x2eee2e(0x241)](/\/portfolio/,_0x442a0d=>{const _0x5ab669=_0x2eee2e;if(!validateTelegram(_0x442a0d))return;tgBot[_0x5ab669(0x1f1)](_0x5ab669(0x1cc));const _0x3f8df7=getEnabledBots();if(_0x3f8df7['length']==0x0)tgBot['sendMessage'](_0x442a0d['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2d9a23=>{telegramError(_0x2d9a23);});else{if(_0x3f8df7['length']>0x1){let _0x11ef4b=[],_0xe1341=[];const _0x475f75=_0x3f8df7[_0x5ab669(0x1fa)]%0x4==0x0||_0x3f8df7[_0x5ab669(0x1fa)]%0x4==0x3||_0x3f8df7[_0x5ab669(0x1fa)]%0x3==0x1?0x4:0x3;let _0x211d1b=0x0;_0x3f8df7[_0x5ab669(0x1a9)]((_0x32edd7,_0x15ca9d)=>{const _0x221b54=_0x5ab669;if(_0x15ca9d%_0x475f75==0x0)_0xe1341=[];_0xe1341[_0x221b54(0x17b)]({'text':_0x221b54(0xc0)+_0x32edd7['botID'],'callback_data':_0x32edd7['botID']}),_0x15ca9d%_0x475f75==0x0&&(_0x11ef4b[_0x211d1b]=_0xe1341,_0x211d1b++);}),tgBot['sendMessage'](_0x442a0d[_0x5ab669(0x20c)]['id'],_0x5ab669(0x1c7),{'reply_markup':{'inline_keyboard':_0x11ef4b}})[_0x5ab669(0x164)](_0x3c00e2=>{telegramError(_0x3c00e2);}),tgBot['on']('callback_query',async _0x1a1db7=>{const _0x1dba99=_0x5ab669,_0x5d59e2=_0x1a1db7[_0x1dba99(0x205)],_0x45e748=_0x1a1db7[_0x1dba99(0x1ff)];tgBot['answerCallbackQuery'](_0x1a1db7['id'])['then'](async()=>{const _0x1549ca=_0x1dba99;if(pid[_0x5d59e2])pid[_0x5d59e2][_0x1549ca(0xff)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x1dba99(0x1f1)](_0x1dba99(0x1cc));});}else{const _0x2e136e=_0x3f8df7[0x0][_0x5ab669(0x1a5)];if(pid[_0x2e136e])pid[_0x2e136e]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x5571bd=>{const _0x5a1701=_0x2eee2e;if(!validateTelegram(_0x5571bd))return;tgBot[_0x5a1701(0x1f1)](_0x5a1701(0x1cc)),await getMessages();if(!updateAvailable)tgBot[_0x5a1701(0x184)](_0x5571bd[_0x5a1701(0x20c)]['id'],_0x5a1701(0x104))['catch'](_0x1e61b2=>{telegramError(_0x1e61b2);});else!validInstallation?tgBot[_0x5a1701(0x184)](_0x5571bd['chat']['id'],_0x5a1701(0x162))[_0x5a1701(0x164)](_0x4f639e=>{telegramError(_0x4f639e);}):(tgBot['sendMessage'](_0x5571bd[_0x5a1701(0x20c)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x5a1701(0x10f)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x49bdb7=>{telegramError(_0x49bdb7);}),tgBot['on'](_0x5a1701(0x1cc),async _0x5a112e=>{const _0x4b6dd8=_0x5a1701,_0x25307f=_0x5a112e[_0x4b6dd8(0x205)],_0x24ca28=_0x5a112e['message'];tgBot[_0x4b6dd8(0x208)](_0x5a112e['id'])[_0x4b6dd8(0x1fd)](async()=>{const _0x3e4290=_0x4b6dd8;_0x25307f==_0x3e4290(0x10f)&&(await tgBot[_0x3e4290(0x184)](_0x24ca28[_0x3e4290(0x20c)]['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0xd06e67=>{telegramError(_0xd06e67);}),updateBB());_0x25307f=='no'&&await tgBot[_0x3e4290(0x184)](_0x24ca28[_0x3e4290(0x20c)]['id'],_0x3e4290(0xfb))['catch'](_0x25d19e=>{telegramError(_0x25d19e);});if(!settings[_0x3e4290(0x1fc)])tgBot[_0x3e4290(0x184)](_0x24ca28[_0x3e4290(0x20c)]['id'],_0x3e4290(0x174))[_0x3e4290(0x164)](_0x1e691a=>{telegramError(_0x1e691a);});}),tgBot[_0x4b6dd8(0x1f1)](_0x4b6dd8(0x1cc));}));}),tgBot['onText'](/\/toggle/,_0xeefad4=>{const _0x1eebb2=_0x2eee2e;if(!validateTelegram(_0xeefad4))return;tgBot[_0x1eebb2(0x1f1)](_0x1eebb2(0x1cc));const _0x583636=getBotsWithMode();if(_0x583636['length']==0x0)tgBot[_0x1eebb2(0x184)](_0xeefad4[_0x1eebb2(0x20c)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x1eebb2(0x164)](_0xc9c3fd=>{telegramError(_0xc9c3fd);});else{let _0x21c197=[],_0x29b342=[];const _0x1682db=0x2;let _0x362854=0x0;_0x583636['forEach']((_0x4c2f09,_0x13b68b)=>{const _0x3c52ba=_0x1eebb2;if(_0x13b68b%_0x1682db==0x0)_0x29b342=[];_0x29b342['push']({'text':_0x3c52ba(0xc0)+_0x4c2f09[_0x3c52ba(0x1a5)]+'\x20('+_0x4c2f09[_0x3c52ba(0x1bf)]+')','callback_data':_0x4c2f09[_0x3c52ba(0x1a5)]}),_0x13b68b%_0x1682db==0x0&&(_0x21c197[_0x362854]=_0x29b342,_0x362854++);}),tgBot[_0x1eebb2(0x184)](_0xeefad4[_0x1eebb2(0x20c)]['id'],_0x1eebb2(0x1b9),{'reply_markup':{'inline_keyboard':_0x21c197}})[_0x1eebb2(0x164)](_0xaa9e0f=>{telegramError(_0xaa9e0f);}),tgBot['on'](_0x1eebb2(0x1cc),async _0x22700b=>{const _0x26b194=_0x1eebb2,_0x4ec73d=_0x22700b[_0x26b194(0x205)],_0x434a4e=_0x22700b['message'];tgBot['answerCallbackQuery'](_0x22700b['id'])[_0x26b194(0x1fd)](async()=>{const _0x1f365f=_0x26b194,_0x24c724=_0x583636[_0x1f365f(0xc9)](_0x27a276=>_0x27a276[_0x1f365f(0x1a5)]==_0x4ec73d),_0x510944=_0x24c724['mode']==_0x1f365f(0x1f9)?_0x1f365f(0x177):_0x1f365f(0x1f9);tgBot[_0x1f365f(0x184)](_0x434a4e['chat']['id'],_0x1f365f(0x1ce)+_0x4ec73d+_0x1f365f(0x19b)+_0x510944+_0x1f365f(0x1b3))[_0x1f365f(0x164)](_0x5cfe43=>{telegramError(_0x5cfe43);}),toggleBotMode(_0x4ec73d);}),tgBot[_0x26b194(0x1f1)](_0x26b194(0x1cc));});}}),tgBot['onText'](/\/names/,_0x2090e0=>{const _0x2498d6=_0x2eee2e;if(!validateTelegram(_0x2090e0))return;let _0x5f3a89='';config['forEach'](_0x10bb26=>{const _0x19f026=_0x2450;_0x5f3a89+=_0x19f026(0xc0)+_0x10bb26['botID']+':\x20'+_0x10bb26[_0x19f026(0x230)]+'\x0a';}),tgBot[_0x2498d6(0x184)](_0x2090e0[_0x2498d6(0x20c)]['id'],_0x5f3a89,{'parse_mode':'HTML'})[_0x2498d6(0x164)](_0x20b51c=>{telegramError(_0x20b51c);});}),tgBot[_0x2eee2e(0x241)](/\/disable/,_0x54831f=>{const _0x2a1de1=_0x2eee2e;if(!validateTelegram(_0x54831f))return;tgBot[_0x2a1de1(0x184)](_0x54831f[_0x2a1de1(0x20c)]['id'],_0x2a1de1(0xfa))['catch'](_0x276561=>{telegramError(_0x276561);}),updateSetting(_0x2a1de1(0x223),![]);}),tgBot[_0x2eee2e(0x241)](/\/help/,_0x5874be=>{const _0xa38d58=_0x2eee2e;if(!validateTelegram(_0x5874be))return;tgBot['sendMessage'](_0x5874be[_0xa38d58(0x20c)]['id'],_0x55470e)['catch'](_0x3bcaea=>{telegramError(_0x3bcaea);});}),tgBot['on']('polling_error',_0x29a205=>{const _0x2308fd=_0x2eee2e;_0x29a205['toString']()[_0x2308fd(0x17d)](_0x2308fd(0x1d1))&&(logger[_0x2308fd(0x1c1)](_0x2308fd(0x1ac)),tgBot[_0x2308fd(0x19f)](),tgBot=null,io['to'](_0x2308fd(0x1e7))[_0x2308fd(0x15c)](_0x2308fd(0xe0),_0x2308fd(0x1ac)));}),process[_0x2eee2e(0x116)](_0x2eee2e(0x1d9),()=>{const _0x2e4ff9=_0x2eee2e;if(tgBot)tgBot[_0x2e4ff9(0x19f)]();process[_0x2e4ff9(0x16b)](0x1);}),process[_0x2eee2e(0x116)](_0x2eee2e(0x19e),()=>{const _0x4f13b5=_0x2eee2e;if(tgBot)tgBot[_0x4f13b5(0x19f)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x2169bb,_0x524595){const _0x4167ca=_0x1ee9c5;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x4167ca(0x1b8)||(_0x524595[_0x4167ca(0x1c8)]==_0x4167ca(0x194)||_0x524595[_0x4167ca(0x1c8)]==_0x4167ca(0x1f8))&&settings[_0x4167ca(0x105)]==_0x4167ca(0x1a2)||_0x524595[_0x4167ca(0x1c8)]=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x4167ca(0x1fc)]){if(_0x524595[_0x4167ca(0x128)])tgBot['sendMessage'](settings[_0x4167ca(0x1fc)],_0x524595[_0x4167ca(0x230)]+_0x4167ca(0x12d)+_0x524595['event'])['catch'](_0x4105f0=>{telegramError(_0x4105f0);});else tgBot[_0x4167ca(0x184)](settings[_0x4167ca(0x1fc)],_0x4167ca(0xc0)+_0x2169bb+_0x4167ca(0x12d)+_0x524595[_0x4167ca(0x234)])[_0x4167ca(0x164)](_0x208f2a=>{telegramError(_0x208f2a);});}}}}async function sendTelegramMsg(_0xd6eee,_0x2841e1=_0x1ee9c5(0x130)){const _0x2bb3d2=_0x1ee9c5;return settings[_0x2bb3d2(0x223)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x2bb3d2(0x184)](settings[_0x2bb3d2(0x1fc)],_0xd6eee,{'parse_mode':_0x2841e1})[_0x2bb3d2(0x164)](_0x37a5f6=>{telegramError(_0x37a5f6);}),!![]):![];}function getDeviceWithIp(_0x95c8a3){const _0x150694=_0x1ee9c5;return devices[_0x150694(0xc9)](_0x3fb893=>_0x3fb893['ip']===_0x95c8a3);}function temporaryAccess2FA(_0x3a3fa4,_0x3d2daa){const _0x5b83de=_0x1ee9c5;let _0x6c552d=new Date(),_0x3ad485=![];if(lastIpApproval){if(_0x6c552d-lastIpApproval<0x1388)_0x3ad485=!![];}lastIpApproval=new Date();if(_0x3ad485)return;tgBot&&settings[_0x5b83de(0x1fc)]&&(tgBot[_0x5b83de(0x1f1)](_0x5b83de(0x1cc)),tgBot[_0x5b83de(0x184)](settings[_0x5b83de(0x1fc)],_0x5b83de(0x10e)+normalizeIP(_0x3d2daa)[_0x5b83de(0x247)]+'</b>\x20?',{'parse_mode':_0x5b83de(0x130),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x5b83de(0x1b7),'callback_data':'15'},{'text':_0x5b83de(0x180),'callback_data':'30'},{'text':'reject','callback_data':_0x5b83de(0x1a6)}]]}})[_0x5b83de(0x164)](_0x1134df=>{telegramError(_0x1134df);}),tgBot['on'](_0x5b83de(0x1cc),async _0x51b185=>{const _0x28a626=_0x5b83de,_0x2c24d6=_0x51b185['data'],_0x2538c0=_0x51b185['message'];tgBot[_0x28a626(0x208)](_0x51b185['id'])[_0x28a626(0x1fd)](async()=>{const _0x5d6342=_0x28a626;devices[_0x3a3fa4][_0x5d6342(0x249)]={'clientip':_0x3d2daa,'timestamp':new Date()['getTime'](),'expiry':_0x2c24d6},_0x2c24d6!=_0x5d6342(0x1a6)?(await tgBot[_0x5d6342(0x184)](_0x2538c0[_0x5d6342(0x20c)]['id'],_0x5d6342(0xef)+_0x2c24d6+_0x5d6342(0x1eb),{'parse_mode':_0x5d6342(0x130)})[_0x5d6342(0x164)](_0x81e8fc=>{telegramError(_0x81e8fc);}),io['to'](_0x3a3fa4)[_0x5d6342(0x15c)](_0x5d6342(0xd3),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x2538c0['chat']['id'],_0x5d6342(0xc1))[_0x5d6342(0x164)](_0x207c98=>{telegramError(_0x207c98);}),io['to'](_0x3a3fa4)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x28a626(0x1f1)](_0x28a626(0x1cc));}));}function _0x4995(){const _0x37de98=['ipaddr.js','telegramIpApproval','copyFileSync','/restart\x20-\x20restart\x20bot(s)\x0a','allow','127.0.0.1','disconnect','*$1*','bb-config.json','whitelist','node-telegram-bot-api','params','removeAllListeners','bb/','username','hashSync','exec','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Notifications\x20types:\x20','new-disabled','Bot\x20','Temporary\x20access\x20rejected','bot','Unauthorized\x20attempt\x20to\x20log\x20out','match','axios','toggleBotMode',',\x20must\x20be\x20a\x204\x20digit\x20number','constructor','find','getMonth','access\x20timeout','-results.json','disabled','messages','number','format','bbPassword','Invalid\x20authentication\x20token\x20(2)','status','bot.js',':\x20Bot\x20Mgr\x20>\x20','env','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','title','-config.json','getPortfolio','createServer','pidExpireLogin','ipc','************','placeOrder','notification','headers','simple','build2','padStart','bb-settings.json','child_process','version.json','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','0.0.0','All\x20bots','orders','lastmsgtelegram','set','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Access\x20enabled\x20for\x20','144616zdoRLt','build','yargs/yargs','version','blacklist','Unauthorized\x20attempt\x20to\x20delete\x20bot','parse','Notifications\x20enabled\x0a','temporary\x20access\x20not\x20allowed','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Notifications\x20disabled','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','2FA\x20login\x20required','bbUsername','send','Unauthorized\x20attempt\x20to\x20store\x20configuration','restart','get-messages','file','Your\x20installation\x20is\x20already\x20up\x20to\x20date','telegramEvents','join','get-portfolio','update-bb','/on\x20-\x20start\x20bot(s)\x0a','started','cloneDeep','decrypt','config/','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','yes','Unauthorized\x20attempt\x20to\x20add\x20bot','remoteAddress','readFileSync','lowdb','/output-000.log','test','once','reason','api-eu.mixpanel.com','initclient','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/download/:type','any','\x20only\x0a','getTime','5370000pWEBIu','writeFileSync','login','.zip','output-000.log','445qLUImr','/enable\x20-\x20enable\x20notifications\x0a','/:bot/support','referer','showname','token','login\x20not\x20required','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','access','\x20>\x20','track','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','HTML','isIPv4MappedAddress','/:bot','Unauthorized\x20attempt\x20to\x20update\x20bot','1774158etfeyG','No\x20bots\x20running\x20right\x20now','/off\x20-\x20stop\x20bot(s)\x0a','2FA\x20login\x20token\x20generated','temporary\x20token\x20generated','deleteHistoryAlerts','5455meOzdT','delete-bot','Unauthorized\x20attempt\x20to\x20get\x20portfolio','login\x20token\x20generated','from','jsonwebtoken','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/:bot/history','stopped','search','enabled','uuid','readdirSync','tkn','cancel-loading','split','::ffff:127.0.0.1','inherit','clientip','connection','toString','index.html','remove','-events.json','fork','exp','store-configuration','output-001.log','replace','static','headless','isDirectory','stop','emit','log','invalid\x20credentials','Invalid\x20username\x20or\x20IP\x20address','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','compareSync','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','NTBA_FIX_319','catch','latestversion','starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','apply','getUTCHours','timeshift','exit','backup/','getFullYear','2FA\x20required','\x20|\x20','3029747gtYYjh','store-settings','Login\x20rejected','All\x20bots\x20running\x20right\x20now','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Ok,\x20will\x20send\x20order\x20notifications\x20only','existsSync','manual','telegrammsg','toggle-bot-mode','reload','push','sendFile','includes','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getSeconds','30\x20min','isValid','write','disabled\x20Bot\x20','sendMessage','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','uuid-random','Password\x20reset\x20rejected','max','verify','conn','telegram2FaApproval','logs','/status\x20-\x20show\x20bot(s)\x20status\x0a','publicKey','secret','node-zip','new','</b>\x20?','settings','error','startsWith','(((.+)+)+)+$','value','Markdown','get-starting-balances','logs/','\x20to\x20','3000','hybrid-crypto-js','SIGTERM','stopPolling','apiSecret','Unauthorized\x20attempt\x20to\x20confirm\x20message','alerts','encryptedUuid','Unauthorized\x20attempt\x20to\x20get\x20logs','botID','reject','cancelLoading','185214ynKpzf','forEach','kind','Unauthorized\x20login\x20attempt\x20(timeout)','Invalid\x20Telegram\x20token','<b>Balance\x20Bot\x20Status:</b>\x0a','lastmsgemitted','stringify','http','2FA\x20login\x20rejected','bot-','\x20mode','request','-performance.json','bcryptjs','15\x20min','all','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','180eZxhyt','starting\x20bot\x20|\x20Bot\x20','enabled\x20Bot\x20','function','\x20(1)','mode','name','full','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','socket','generateKeyPairAsync','idling\x20bot\x20\x20\x20|\x20Bot\x20','mixpanel','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','type','accept','uncaughtException','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','callback_query','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','path','emitHistory','404\x20Not\x20Found','bb-secure.json','download','Invalid\x20IP\x20address','telegram','init','privateKey','getMinutes','SIGINT','telegramToken','hasOwnProperty','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','running','password','entries','Unauthorized\x20attempt\x20to\x20download\x20','All','get-logs','unlinkSync','delete-alerts','socket.io','timestamp','botmanager','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','sortBy','expiry','\x20minutes','f2aRequired','bots','Token\x20blacklisted','listen','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','removeListener','confirm-message','argv','/update\x20-\x20update\x20Balance\x20Bot\x0a','/help\x20-\x20show\x20available\x20commands\x0a','output-003.log','login\x20required','success','auto','length','settings.','telegramChatId','then','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','message','util','RSA','You\x20can\x20use\x20the\x20following\x20commands:\x0a','login\x20token\x20valid','Bot\x20Mgr\x20>\x20','data',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Password\x20has\x20been\x20reset\x20to:\x20','answerCallbackQuery','restarting\x20Bot\x20','live','secure','chat','add','pidRefreshToken','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','deleted\x20Bot\x20','backup','Notifications\x20enabled','add-bot','Failed\x20to\x20download\x20','filter','mkdirSync','loginRequired','clients','express','get','apiKey','lowdb/adapters/FileSync','sign','Orders','host','bbvNew','/:bot/configuration','storeHeadless','telegramEnabled','logout','DEFLATE','temporaryAccessAllowed','storeConfiguration','telegramUsername','1468JpVfmj','assign','output-002.log','handshake','slice','Notifications\x20disabled\x0a','***','botname','alias','kill','userid','event','1000','generate','No\x20authentication\x20token','getDate','sort','defaults','Server','Allow\x20login\x20from\x20IP\x20address\x20<b>','store','2194wZtzcJ','Crypt','sockets','onText','getHours','bbvReceive','keys','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','-----------------------------------------------------------------------------------','show'];_0x4995=function(){return _0x37de98;};return _0x4995();}function loginAccess2FA(_0x2ae16b,_0x2a2889){const _0x42b401=_0x1ee9c5;tgBot&&settings['telegramChatId']&&(tgBot[_0x42b401(0x1f1)](_0x42b401(0x1cc)),tgBot[_0x42b401(0x184)](settings[_0x42b401(0x1fc)],_0x42b401(0x23c)+normalizeIP(_0x2a2889)[_0x42b401(0x247)]+_0x42b401(0x192),{'parse_mode':_0x42b401(0x130),'reply_markup':{'inline_keyboard':[[{'text':_0x42b401(0x1c9),'callback_data':loginExpiry},{'text':_0x42b401(0x1a6),'callback_data':'reject'}]]}})[_0x42b401(0x164)](_0x7690ca=>{telegramError(_0x7690ca);}),tgBot['on'](_0x42b401(0x1cc),async _0x407948=>{const _0x178af1=_0x42b401,_0x215fa7=_0x407948[_0x178af1(0x205)],_0x310884=_0x407948[_0x178af1(0x1ff)];tgBot[_0x178af1(0x208)](_0x407948['id'])[_0x178af1(0x1fd)](async()=>{const _0x2f2962=_0x178af1;devices[_0x2ae16b]['telegram2FaApproval']={'clientip':_0x2a2889,'timestamp':new Date()['getTime'](),'expiry':_0x215fa7},_0x215fa7!=_0x2f2962(0x1a6)?(await tgBot['sendMessage'](_0x310884[_0x2f2962(0x20c)]['id'],'Login\x20accepted',{'parse_mode':_0x2f2962(0x130)})[_0x2f2962(0x164)](_0x11cc33=>{telegramError(_0x11cc33);}),io['to'](_0x2ae16b)[_0x2f2962(0x15c)](_0x2f2962(0xd3),{'access':{'allow':![],'reason':_0x2f2962(0x17a),'token':null}})):(await tgBot[_0x2f2962(0x184)](_0x310884[_0x2f2962(0x20c)]['id'],_0x2f2962(0x172))[_0x2f2962(0x164)](_0xc4e15b=>{telegramError(_0xc4e15b);}),io['to'](_0x2ae16b)['emit'](_0x2f2962(0xd3),{'access':{'allow':![],'reason':_0x2f2962(0x1b1),'token':null}}));}),tgBot[_0x178af1(0x1f1)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2940a3=_0x1ee9c5;return dbConfig[_0x2940a3(0x21a)](_0x2940a3(0x1ed))[_0x2940a3(0x1e9)]('botID')[_0x2940a3(0x215)]({'status':_0x2940a3(0x145)})['value']()||[];}function getDisabledBots(){const _0x11cfcd=_0x1ee9c5;return dbConfig[_0x11cfcd(0x21a)]('bots')['sortBy'](_0x11cfcd(0x1a5))['filter']({'status':_0x11cfcd(0xcd)})[_0x11cfcd(0x197)]()||[];}function getBotAttributes(_0xcb8d44){const _0x231fa3=_0x1ee9c5;let _0x3798b6={};const _0x58fe8c=configpath+_0x231fa3(0x1b2)+_0xcb8d44+_0x231fa3(0xd9),_0xc38c3=fs[_0x231fa3(0x176)](_0x58fe8c);if(_0xc38c3){const _0x169925=fs[_0x231fa3(0x112)](_0x58fe8c);try{const _0x12a763=JSON[_0x231fa3(0xf6)](_0x169925),_0x3218ab=_0x12a763?_0x12a763[_0x231fa3(0xc2)][0x0]['headless']:![];_0x3798b6[_0x231fa3(0x1bf)]=_0x3218ab?_0x231fa3(0x1f9):_0x231fa3(0x177),_0x3798b6[_0x231fa3(0x230)]=_0x12a763?_0x12a763[_0x231fa3(0xc2)][0x0]['botname']:'Bot\x20'+_0xcb8d44;}catch(_0x219922){_0x3798b6[_0x231fa3(0x1bf)]='manual',_0x3798b6[_0x231fa3(0x230)]='Bot\x20'+_0xcb8d44;}}else _0x3798b6[_0x231fa3(0x1bf)]=_0x231fa3(0x177),_0x3798b6[_0x231fa3(0x230)]=_0x231fa3(0xc0)+_0xcb8d44;return _0x3798b6;}function getBotsWithMode(){const _0x19115f=_0x1ee9c5,_0x35fb6f=dbConfig['get'](_0x19115f(0x1ed))[_0x19115f(0x1e9)](_0x19115f(0x1a5))[_0x19115f(0x197)]()||[];return _0x35fb6f[_0x19115f(0x1a9)](_0x41bb18=>{const _0x1ad72f=_0x19115f;let _0x3b7ea9=getBotAttributes(_0x41bb18[_0x1ad72f(0x1a5)]);_0x41bb18['mode']=_0x3b7ea9[_0x1ad72f(0x1bf)];}),_0x35fb6f;}async function initUser(){const _0x472287=_0x1ee9c5;if(!settings[_0x472287(0x233)]){const _0x30cdd9=uuidRandom();mixpanel[_0x472287(0x231)](_0x30cdd9),updateSetting(_0x472287(0x233),_0x30cdd9);}}async function initSecure(){const _0x512b0e=_0x1ee9c5;let _0x3ce5d3=getSecure();if(!_0x3ce5d3[_0x512b0e(0x1db)](_0x512b0e(0x18f))){let _0x3d5626=await generateKeys();_0x3ce5d3[_0x512b0e(0x18e)]=_0x3d5626[_0x512b0e(0x18e)],_0x3ce5d3[_0x512b0e(0x1d7)]=_0x3d5626[_0x512b0e(0x1d7)],_0x3ce5d3[_0x512b0e(0x18f)]=crypto['randomBytes'](0x20)[_0x512b0e(0x14f)]('hex');;storeSecure(_0x3ce5d3);}}function getSettings(){const _0x8e0039=_0x1ee9c5;return dbSettings[_0x8e0039(0x21a)](_0x8e0039(0x193))[_0x8e0039(0x197)]()||{};}function getSecure(){const _0x3c446d=_0x1ee9c5;return dbSecure[_0x3c446d(0x21a)](_0x3c446d(0x20b))[_0x3c446d(0x197)]()||{};}function getBlacklist(){const _0x30b9a4=_0x1ee9c5;return dbSecure['get'](_0x30b9a4(0xf4))[_0x30b9a4(0x197)]()||[];}function broadcastToBots(_0x4774c2,_0x448791){const _0xf8b704=_0x1ee9c5;config[_0xf8b704(0x1a9)](_0x531a70=>{const _0x15afdd=_0xf8b704;if(_0x531a70[_0x15afdd(0xd3)]=='enabled'&&_0x531a70[_0x15afdd(0x20a)]==_0x15afdd(0x1dd)){if(pid[_0x531a70['botID']])pid[_0x531a70[_0x15afdd(0x1a5)]]['send']({[_0x4774c2]:_0x448791});}});}function storeSettings(_0x2d2b47,_0x1b51a9=![]){const _0x517987=_0x1ee9c5;_0x2d2b47={...settings,..._0x2d2b47};if(_0x1b51a9&&_0x2d2b47['bbPassword']!=_0x517987(0xde)&&_0x2d2b47['bbPassword']!=''){const _0x124f21=crypt[_0x517987(0x10c)](secure[_0x517987(0x1d7)],_0x2d2b47[_0x517987(0xd1)])[_0x517987(0x1ff)]['split']('@')[0x0],_0x295d7c=bcrypt[_0x517987(0xbb)](_0x124f21,saltRounds);_0x2d2b47={..._0x2d2b47,'bbPassword':_0x295d7c};}if(_0x1b51a9&&_0x2d2b47[_0x517987(0x1da)]!='************'&&_0x2d2b47['telegramToken']!=''){const _0x31eae7=crypt[_0x517987(0x10c)](secure['privateKey'],_0x2d2b47[_0x517987(0x1da)])[_0x517987(0x1ff)][_0x517987(0x14a)]('@')[0x0];_0x2d2b47={..._0x2d2b47,'telegramToken':_0x31eae7};}const _0x4bbcfa=_0x2d2b47[_0x517987(0x1da)]!='************'&&_0x2d2b47[_0x517987(0x1da)]!=settings['telegramToken']||_0x2d2b47[_0x517987(0x228)]!=settings['telegramUsername'],_0x8b6eff=_0x2d2b47[_0x517987(0x1da)]==''||_0x2d2b47[_0x517987(0x228)]=='';if(_0x4bbcfa)_0x2d2b47[_0x517987(0x105)]=_0x517987(0x1b8);for(const [_0x185598,_0x38102b]of Object[_0x517987(0x1df)](_0x2d2b47)){if(_0x185598==_0x517987(0x1da)&&_0x38102b==_0x517987(0xde)){_0x2d2b47[_0x517987(0x1da)]=settings[_0x517987(0x1da)];continue;};if(_0x185598==_0x517987(0xd1)&&_0x38102b==_0x517987(0xde)){_0x2d2b47['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x517987(0xed)](_0x517987(0x1fb)+_0x185598,_0x38102b)[_0x517987(0x182)]();}settings=_0x2d2b47,io['to'](_0x517987(0x1e7))[_0x517987(0x15c)](_0x517987(0x193),cleanSettings()),broadcastToBots(_0x517987(0x16a),settings[_0x517987(0x16a)]);if(_0x4bbcfa&&!_0x8b6eff)initTelegram();if(_0x4bbcfa&&_0x8b6eff)disableTelegram();getAllClients()['forEach'](_0x1c5fde=>{const _0x533e9d=_0x517987;getSocket(_0x1c5fde['id'])[_0x533e9d(0x15c)](_0x533e9d(0xd3),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x3beb93,_0x14fa16){const _0x3ca71d=_0x1ee9c5;dbSettings[_0x3ca71d(0xed)](_0x3ca71d(0x1fb)+_0x3beb93,_0x14fa16)['write'](),settings=getSettings(),io['to'](_0x3ca71d(0x1e7))[_0x3ca71d(0x15c)](_0x3ca71d(0x193),cleanSettings());}function storeSecure(_0x1a1ffe){const _0x3d8a58=_0x1ee9c5;dbSecure[_0x3d8a58(0x21a)](_0x3d8a58(0x20b))[_0x3d8a58(0x17b)](_0x1a1ffe)[_0x3d8a58(0x182)](),secure=_0x1a1ffe;}function addBlacklist(_0x2b18b6){const _0xdb2ecd=_0x1ee9c5;cleanBlacklist();let _0x4fca64;devices[_0x2b18b6][_0xdb2ecd(0x249)]?_0x4fca64=Math[_0xdb2ecd(0x188)](devices[_0x2b18b6]['telegramIpApproval'][_0xdb2ecd(0x1ea)],loginExpiry):_0x4fca64=loginExpiry,dbSecure[_0xdb2ecd(0x21a)](_0xdb2ecd(0xf4))[_0xdb2ecd(0x17b)]({'expiry':new Date()[_0xdb2ecd(0x11e)]()+_0x4fca64*0x3c*0x3e8,'token':devices[_0x2b18b6][_0xdb2ecd(0x12c)][_0xdb2ecd(0x129)]})['write'](),blacklist=dbSecure[_0xdb2ecd(0x21a)](_0xdb2ecd(0xf4))[_0xdb2ecd(0x197)]();}function cleanBlacklist(){const _0x3bc87e=_0x1ee9c5;let _0x2bfe33=dbSecure[_0x3bc87e(0x21a)]('blacklist')[_0x3bc87e(0x10b)]()[_0x3bc87e(0x197)](),_0x6813cf=new Date()[_0x3bc87e(0x11e)]();_0x2bfe33[_0x3bc87e(0x1a9)](_0x5b8bae=>{const _0x4fb2ba=_0x3bc87e;_0x5b8bae['expiry']<_0x6813cf&&dbSecure['get'](_0x4fb2ba(0xf4))['remove']({'expiry':_0x5b8bae['expiry']})[_0x4fb2ba(0x182)]();});}function initStates(){const _0x3e10ad=_0x1ee9c5;let _0x32be33=getConfiguration();_0x32be33[_0x3e10ad(0x1a9)](_0x1474da=>{const _0x3fbfc3=_0x3e10ad;_0x1474da[_0x3fbfc3(0x20a)]=_0x3fbfc3(0x143);}),storeConfiguration(_0x32be33);}function onKeys(){const _0x5db6e2=new RSA();return new Promise(_0x202aef=>{const _0x26bddf=_0x2450;_0x5db6e2[_0x26bddf(0x1c4)]()[_0x26bddf(0x1fd)](_0x29adb4=>{_0x202aef(_0x29adb4);});});}function _0x2450(_0x475ab2,_0x31c425){const _0x3fedb6=_0x4995();return _0x2450=function(_0x47133d,_0x2c9f19){_0x47133d=_0x47133d-0xb6;let _0x4995ad=_0x3fedb6[_0x47133d];return _0x4995ad;},_0x2450(_0x475ab2,_0x31c425);}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x400640=_0x1ee9c5;let _0x52733c=getSettings(),_0x7f6397=![];!_0x52733c[_0x400640(0x1db)]('lastmsgtelegram')&&(_0x52733c['lastmsgtelegram']=0x0,_0x7f6397=!![]);!_0x52733c[_0x400640(0x1db)]('lastmsgemitted')&&(_0x52733c[_0x400640(0x1ae)]=0x0,_0x7f6397=!![]);!_0x52733c['hasOwnProperty'](_0x400640(0x165))&&(_0x52733c[_0x400640(0x165)]=_0x400640(0xe9),_0x7f6397=!![]);if(_0x7f6397)storeSettings(_0x52733c);}function storeConfiguration(_0x2aa345){const _0x3afd92=_0x1ee9c5;dbConfig['get'](_0x3afd92(0x1ed))['remove']()[_0x3afd92(0x182)](),_0x2aa345[_0x3afd92(0x1a9)](_0x5540b0=>{const _0x3f4e1a=_0x3afd92;delete _0x5540b0[_0x3f4e1a(0x1bf)];}),dbConfig[_0x3afd92(0x21a)](_0x3afd92(0x1ed))['push'](..._0x2aa345)['write'](),config=_0x2aa345;}function resetPassword(){const _0xdbeefa=_0x1ee9c5;tgBot&&settings['telegramChatId']&&(tgBot[_0xdbeefa(0x1f1)](_0xdbeefa(0x1cc)),tgBot['sendMessage'](settings[_0xdbeefa(0x1fc)],_0xdbeefa(0xd7),{'parse_mode':_0xdbeefa(0x130),'reply_markup':{'inline_keyboard':[[{'text':_0xdbeefa(0x10f),'callback_data':_0xdbeefa(0x10f)},{'text':'no','callback_data':'no'}]]}})[_0xdbeefa(0x164)](_0x870f4b=>{telegramError(_0x870f4b);}),tgBot['on'](_0xdbeefa(0x1cc),async _0x47a931=>{const _0x2b3ecd=_0xdbeefa,_0x576b24=_0x47a931['data'],_0x2c80d7=_0x47a931[_0x2b3ecd(0x1ff)];tgBot['answerCallbackQuery'](_0x47a931['id'])['then'](async()=>{const _0x3fda3f=_0x2b3ecd;if(_0x576b24!='no'){const _0x42f126=0xf,_0x5ac6fe=_0x3fda3f(0x1cb),_0x3bf080=Array[_0x3fda3f(0x13e)](crypto['randomFillSync'](new Uint32Array(_0x42f126)))['map'](_0x9feb6a=>_0x5ac6fe[_0x9feb6a%_0x5ac6fe[_0x3fda3f(0x1fa)]])['join'](''),_0x4c993c=bcrypt[_0x3fda3f(0xbb)](_0x3bf080,saltRounds);storeSettings({'bbPassword':_0x4c993c}),await tgBot[_0x3fda3f(0x184)](_0x2c80d7[_0x3fda3f(0x20c)]['id'],_0x3fda3f(0x207)+_0x3bf080,{'parse_mode':_0x3fda3f(0x130)})[_0x3fda3f(0x164)](_0xafff50=>{telegramError(_0xafff50);});}else await tgBot[_0x3fda3f(0x184)](_0x2c80d7[_0x3fda3f(0x20c)]['id'],_0x3fda3f(0x187))['catch'](_0x1c5d34=>{telegramError(_0x1c5d34);});}),tgBot['removeListener'](_0x2b3ecd(0x1cc));}));}function getServerTime(){const _0x40b691=_0x1ee9c5,_0x1183a9=new Date();return _0x1183a9[_0x40b691(0x16d)]()+'/'+(_0x1183a9['getMonth']()+0x1)[_0x40b691(0x14f)]()[_0x40b691(0xe4)](0x2,'0')+'/'+_0x1183a9['getDate']()[_0x40b691(0x14f)]()[_0x40b691(0xe4)](0x2,'0')+'\x20'+_0x1183a9[_0x40b691(0x242)]()['toString']()['padStart'](0x2,'0')+':'+_0x1183a9['getMinutes']()[_0x40b691(0x14f)]()[_0x40b691(0xe4)](0x2,'0')+':'+_0x1183a9['getSeconds']()[_0x40b691(0x14f)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x213834=_0x1ee9c5,_0x504640=shiftedTime();return _0x504640[_0x213834(0x16d)]()+'/'+(_0x504640[_0x213834(0xca)]()+0x1)[_0x213834(0x14f)]()[_0x213834(0xe4)](0x2,'0')+'/'+_0x504640[_0x213834(0x238)]()[_0x213834(0x14f)]()[_0x213834(0xe4)](0x2,'0')+'\x20'+_0x504640['getHours']()['toString']()[_0x213834(0xe4)](0x2,'0')+':'+_0x504640[_0x213834(0x1d8)]()[_0x213834(0x14f)]()[_0x213834(0xe4)](0x2,'0')+':'+_0x504640[_0x213834(0x17f)]()['toString']()[_0x213834(0xe4)](0x2,'0');}function shiftedTime(){const _0x573c04=_0x1ee9c5,_0x22f095=new Date();let _0x5c909d=_0x22f095;if(settings[_0x573c04(0x16a)]&&settings[_0x573c04(0x16a)]!==0x0)_0x5c909d=fns[_0x573c04(0x20d)](_0x22f095,{'hours':settings['timeshift']});return _0x5c909d;}function startScheduler(){const _0x4f5acf=_0x1ee9c5,_0x3d1d9e=new Date()[_0x4f5acf(0x169)](),_0x221f88=new Date()[_0x4f5acf(0x242)]()+settings['timeshift'];_0x221f88==0x4&&backupConfigFiles();_0x221f88==0x0&&rotateLogFiles();_0x3d1d9e%0x6==0x0&&triggerAnalytics();_0x3d1d9e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1a2669=_0x1ee9c5;fs[_0x1a2669(0x147)](configpath,{'withFileTypes':!![]})[_0x1a2669(0x1a9)](_0x267d4d=>{const _0x2b2b0f=_0x1a2669;if(!_0x267d4d[_0x2b2b0f(0x15a)]())fs[_0x2b2b0f(0x24a)](configpath+_0x267d4d[_0x2b2b0f(0x1c0)],configbackuppath+_0x267d4d['name']);});}function rotateLogFiles(){const _0x25308d=_0x1ee9c5;let _0x334fc9=fs[_0x25308d(0x147)](logspath,{'withFileTypes':!![]});_0x334fc9[_0x25308d(0x239)]((_0x3b3616,_0x5bbbb6)=>_0x3b3616[_0x25308d(0x1c0)]<_0x5bbbb6[_0x25308d(0x1c0)]?0x1:_0x5bbbb6[_0x25308d(0x1c0)]<_0x3b3616['name']?-0x1:0x0),_0x334fc9[_0x25308d(0x1a9)](_0x118229=>{const _0x442bfe=_0x25308d;if(_0x118229[_0x442bfe(0x1c0)]==_0x442bfe(0x22b))fs[_0x442bfe(0x24a)](logspath+_0x118229[_0x442bfe(0x1c0)],logspath+_0x442bfe(0x1f6));if(_0x118229[_0x442bfe(0x1c0)]==_0x442bfe(0x156))fs[_0x442bfe(0x24a)](logspath+_0x118229[_0x442bfe(0x1c0)],logspath+_0x442bfe(0x22b));_0x118229[_0x442bfe(0x1c0)]==_0x442bfe(0x123)&&(fs[_0x442bfe(0x24a)](logspath+_0x118229['name'],logspath+'output-001.log'),fs[_0x442bfe(0x120)](logspath+_0x118229[_0x442bfe(0x1c0)],''));});}async function zipFiles(_0xe33f4a){const _0x43af0b=_0x1ee9c5;let _0x4562e0;if(_0xe33f4a==_0x43af0b(0x18c))_0x4562e0=logspath;if(_0xe33f4a==_0x43af0b(0x211))_0x4562e0=configpath;let _0x40b5ce=fs['readdirSync'](_0x4562e0,{'withFileTypes':!![]});const _0x327194=new require(_0x43af0b(0x190))();_0x40b5ce[_0x43af0b(0x1a9)](_0x31430b=>{const _0x2b640a=_0x43af0b;if(!_0x31430b['isDirectory']()){let _0x15d9d3=fs[_0x2b640a(0x112)](_0x4562e0+_0x31430b[_0x2b640a(0x1c0)]);const _0x5ae463=/^bot-[0-9]{3}-config.json$/,_0x222851=_0x5ae463[_0x2b640a(0x115)](_0x31430b[_0x2b640a(0x1c0)]);if(_0x222851){const _0x171c65=JSON[_0x2b640a(0xf6)](_0x15d9d3);_0x171c65[_0x2b640a(0xc2)][0x0][_0x2b640a(0x21b)]='***',_0x171c65[_0x2b640a(0xc2)][0x0][_0x2b640a(0x1a0)]='***',_0x15d9d3=JSON['stringify'](_0x171c65,null,0x2);}if(_0x31430b['name']==_0x2b640a(0xe5)){const _0x3f5315=JSON['parse'](_0x15d9d3);if(_0x3f5315['settings'][_0x2b640a(0x217)])_0x3f5315['settings'][_0x2b640a(0x217)]=![];if(_0x3f5315[_0x2b640a(0x193)][_0x2b640a(0xd1)])_0x3f5315['settings']['bbPassword']='***';if(_0x3f5315['settings']['telegramToken'])_0x3f5315['settings'][_0x2b640a(0x1da)]='***';if(_0x3f5315[_0x2b640a(0x193)][_0x2b640a(0x1fc)])_0x3f5315['settings'][_0x2b640a(0x1fc)]='';_0x15d9d3=JSON[_0x2b640a(0x1af)](_0x3f5315,null,0x2);}if(_0x31430b[_0x2b640a(0x1c0)]!=_0x2b640a(0x1d2))_0x327194[_0x2b640a(0x103)](_0x31430b['name'],_0x15d9d3);}});const _0x2204ee=_0x327194[_0x43af0b(0x236)]({'base64':![],'compression':_0x43af0b(0x225)});fs['writeFileSync'](zippath+(_0xe33f4a+_0x43af0b(0x122)),_0x2204ee,'binary');}async function getPublicIp(){const _0x1a57a7=_0x1ee9c5;try{const _0xd291e9=await axios[_0x1a57a7(0x21a)]('https://api.ipify.org?format=json');publicip=_0xd291e9[_0x1a57a7(0x205)]['ip'];}catch(_0x155509){}}async function triggerAnalytics(){const _0x292770=_0x1ee9c5;if(!publicip)await getPublicIp();const _0x1882ca=getBotsWithMode();let _0x3edab3=0x0;_0x1882ca[_0x292770(0x1a9)](_0x557b8c=>{const _0x20e351=_0x292770;if(_0x557b8c[_0x20e351(0xd3)]===_0x20e351(0x145))_0x3edab3++;}),mixpanel[_0x292770(0x12e)](_0x292770(0x23b),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x1882ca[_0x292770(0x1fa)],'numbotsenabled':_0x3edab3});}async function getMessages(){const _0x5897fe=_0x1ee9c5,_0x408172=_0x5897fe(0xee),_0x1a38e3=new GraphQLClient(_0x408172),_0x3c9e58={'authorization':_0x5897fe(0x160)},_0x1fe563=serverversion['split']('.'),_0x565a42=_0x1fe563[0x0]+'.'+_0x1fe563[0x1],_0x425b62=Math['min'](settings[_0x5897fe(0xec)],settings['lastmsgemitted']),_0x26445f={'last':parseInt(_0x425b62),'bbm':_0x565a42},_0x8569c2=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4fdede;try{_0x4fdede=await _0x1a38e3[_0x5897fe(0x1b4)](_0x8569c2,_0x26445f,_0x3c9e58);}catch(_0x3ebc97){}if(_0x4fdede&&_0x4fdede[_0x5897fe(0xce)]){let _0x42d67c=settings['lastmsgtelegram'];newMessages=[];for(const _0x275b07 of _0x4fdede[_0x5897fe(0xce)]){newMessages[_0x5897fe(0x17b)](_0x275b07);if(_0x275b07[_0x5897fe(0x220)])updateSetting(_0x5897fe(0x165),_0x275b07[_0x5897fe(0x220)]);let _0x363be3=_0x275b07[_0x5897fe(0x220)]?serverversion>=_0x275b07[_0x5897fe(0x220)]:![];if(!_0x363be3&&_0x275b07[_0x5897fe(0xcf)]>_0x42d67c){if(_0x275b07['bbvReceive']===_0x5897fe(0x11c)||serverversion[_0x5897fe(0x195)](_0x275b07[_0x5897fe(0x243)])){let _0x5c1ccd=''+_0x275b07[_0x5897fe(0xd8)]+'\x0a\x0a'+_0x275b07[_0x5897fe(0x1ff)];const _0x1dda83=await sendTelegramMsg(toTelegramMarkdown(_0x5c1ccd),_0x5897fe(0x198));if(_0x1dda83)_0x42d67c=_0x275b07['number'];}}}updateAvailable=isNewerVersion(settings[_0x5897fe(0x165)],serverversion),updateSetting(_0x5897fe(0xec),_0x42d67c),emitMessages();}}function emitMessages(){const _0x27d0c1=_0x1ee9c5,_0x233ac6=settings['lastmsgemitted'];let _0x269083=[];newMessages[_0x27d0c1(0x1a9)](_0x5774e9=>{const _0x51152e=_0x27d0c1;_0x5774e9[_0x51152e(0xcf)]>_0x233ac6&&_0x269083[_0x51152e(0x17b)](_0x5774e9);}),_0x269083[_0x27d0c1(0x1fa)]>0x0&&getAllClients()[_0x27d0c1(0x1a9)](_0x2fdb2d=>{const _0x4e2c37=_0x27d0c1;getSocket(_0x2fdb2d['id'])[_0x4e2c37(0x15c)](_0x4e2c37(0x1ff),_0x269083);});}function confirmMessage(_0x41e600){updateSetting('lastmsgemitted',Number(_0x41e600));}function isNewerVersion(_0x2d73b7,_0x55ce4e){const _0x433155=_0x1ee9c5,_0x3f5789=_0x55ce4e[_0x433155(0x14a)]('.'),_0xe9b4ce=_0x2d73b7['split']('.');for(var _0x367dea=0x0;_0x367dea<_0xe9b4ce[_0x433155(0x1fa)];_0x367dea++){const _0x3462c5=~~_0xe9b4ce[_0x367dea],_0x4c2ca0=~~_0x3f5789[_0x367dea];if(_0x3462c5>_0x4c2ca0)return!![];if(_0x3462c5<_0x4c2ca0)return![];}return![];}function toTelegramMarkdown(_0x37bd95){const _0x4a6506=_0x1ee9c5,_0x2aa74f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x95152e=/\*{2}(.+?)\*{2}/gim;return _0x37bd95=_0x37bd95[_0x4a6506(0x157)](_0x2aa74f,'$1_$2_$3')[_0x4a6506(0x157)](_0x95152e,_0x4a6506(0x24f)),_0x37bd95;}async function validateConfigFile(){const _0x3ec567=_0x1ee9c5,_0x27cabb=dbConfig[_0x3ec567(0x21a)](_0x3ec567(0x1ed))[_0x3ec567(0x1e9)](_0x3ec567(0x1a5))['value']()||[];if(_0x27cabb['length']==0x0){let _0x563d25=0x0,_0x4d1b61=[];const _0x25b5ca=/^bot-([0-9]{3})-config.json$/,_0x4f1b48=fs[_0x3ec567(0x147)](configpath);_0x4f1b48['forEach'](_0x3d6c0a=>{const _0x428667=_0x3ec567,_0x324f7a=_0x25b5ca[_0x428667(0xbc)](_0x3d6c0a);if(_0x324f7a){const _0x5a7130=_0x324f7a[0x1];let _0x3a7c38=getBotAttributes(_0x5a7130);_0x4d1b61[_0x428667(0x17b)]({'botID':_0x5a7130,'botname':_0x3a7c38[_0x428667(0x230)],'status':_0x428667(0xcd),'live':'stopped'}),_0x563d25++;}}),_0x563d25!=0x0&&(dbConfig[_0x3ec567(0x21a)](_0x3ec567(0x1ed))[_0x3ec567(0x22a)](_0x4d1b61)[_0x3ec567(0x182)](),config=_0x4d1b61,restoredConfigFile=_0x563d25);}}async function restoreConfigNotify(_0x4b5608){const _0x3642a1=_0x1ee9c5;let _0x13c17c;if(restoredConfigFile==0x1)_0x13c17c=_0x3642a1(0x12b);else _0x13c17c=_0x3642a1(0x245);if(_0x4b5608)io['to'](_0x3642a1(0x1e7))['emit'](_0x3642a1(0xe0),_0x13c17c);else{logger[_0x3642a1(0xe2)](_0x3642a1(0x246)),logger[_0x3642a1(0xe2)](_0x13c17c),logger['simple'](_0x3642a1(0x246)),logger[_0x3642a1(0xe2)]('');if(tgBot&&settings[_0x3642a1(0x1fc)]&&settings['telegramEvents']!='orders')tgBot[_0x3642a1(0x184)](settings[_0x3642a1(0x1fc)],_0x3642a1(0x204)+_0x13c17c)[_0x3642a1(0x164)](_0x1660e7=>{telegramError(_0x1660e7);});}}function validateCredentials(_0xc64e41,_0xe7b992){const _0x4d1d71=_0x1ee9c5;if(_0xc64e41[_0x4d1d71(0xba)]==settings[_0x4d1d71(0xfe)]&&bcrypt[_0x4d1d71(0x161)](_0xc64e41[_0x4d1d71(0x1de)],settings[_0x4d1d71(0xd1)])){if(settings[_0x4d1d71(0x1ec)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x50d78d=generateLoginToken(_0xe7b992);return{'allow':!![],'reason':_0x4d1d71(0x13d),'token':_0x50d78d};}}else return{'allow':![],'reason':_0x4d1d71(0x15e),'token':null};}function refreshToken(_0x4f3d78){const _0x43ddb4=generateLoginToken(_0x4f3d78);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x43ddb4};}function validateAccess(_0x28a0b2,_0x450fe6,_0xcb37af){const _0x3dc392=_0x1ee9c5,_0x4e0d2e=_0xcb37af?_0xcb37af:devices[_0x450fe6]['ip'];let _0xe8ec3a;const _0x3542b0=_0xabc12=>{const _0x47341e=_0x2450;if(settings[_0x47341e(0x217)]){if(settings[_0x47341e(0x1ec)]){if(telegram2FaApproved(_0x450fe6)){const _0x2c9ba9=generateLoginToken(_0x450fe6);return{'allow':!![],'reason':_0x47341e(0x137),'token':_0x2c9ba9};}else return{'allow':![],'reason':_0x47341e(0x1f7),'token':null};}else return _0xe8ec3a=validToken(_0xabc12,_0x450fe6),_0xe8ec3a[_0x47341e(0x1db)](_0x47341e(0x1f8))?{'allow':!![],'reason':_0x47341e(0x203),'token':_0xabc12}:{'allow':![],'reason':_0x47341e(0x1f7),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x371faf=[...settings[_0x3dc392(0x251)],'::1',_0x3dc392(0x14b),_0x3dc392(0x24d)];if(_0x371faf[_0x3dc392(0x17d)](_0x4e0d2e))return _0x3542b0(_0x28a0b2);else{_0xe8ec3a=validToken(_0x28a0b2,_0x450fe6);if(_0xe8ec3a[_0x3dc392(0x1db)]('success'))return _0x3542b0(_0x28a0b2);else{if(telegramIpApproved(_0x450fe6)){const _0x4c36b5=generateToken(_0x450fe6);return _0xe8ec3a=_0x3542b0(_0x28a0b2),_0xe8ec3a[_0x3dc392(0x24c)]?{'allow':!![],'reason':_0x3dc392(0x138),'token':_0x4c36b5}:_0xe8ec3a;}else return settings[_0x3dc392(0x226)]?{'allow':![],'reason':_0x3dc392(0x16e),'token':null}:{'allow':![],'reason':_0x3dc392(0xf8),'token':null};}}}else return _0x3542b0(_0x28a0b2);}function timelyDecrypt(_0x341e0f,_0x546a28=!![]){const _0x1ff110=_0x1ee9c5;if(_0x341e0f)try{const _0x111940=crypt[_0x1ff110(0x10c)](secure[_0x1ff110(0x1d7)],_0x341e0f)[_0x1ff110(0x1ff)],_0x52d4e9=_0x111940[_0x1ff110(0x14a)]('@')[0x0],_0x84b75f=_0x111940[_0x1ff110(0x14a)]('@')[0x1],_0x5573f7=new Date()[_0x1ff110(0x11e)]();if(_0x546a28){if(_0x5573f7-_0x84b75f<maxSecretAge*0x3e8)return _0x52d4e9;else return![];}else return _0x52d4e9;}catch(_0x57255a){return![];}else return![];}const validToken=(_0x471ee1,_0x4e74e2)=>{const _0x192b99=_0x1ee9c5,_0x598d18=devices[_0x4e74e2]['ip'];if(!_0x471ee1)return{'error':_0x192b99(0x237)};for(let _0x5767d3 of blacklist){if(_0x5767d3[_0x192b99(0x129)]==_0x471ee1)return{'error':_0x192b99(0x1ee)};}let _0x405464;try{_0x405464=jwt[_0x192b99(0x189)](_0x471ee1,secure[_0x192b99(0x18f)]+_0x4e74e2);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x405464['hasOwnProperty'](_0x192b99(0x14d))&&!_0x405464['hasOwnProperty'](_0x192b99(0xba))||!_0x405464[_0x192b99(0x1db)](_0x192b99(0x154)))return{'error':_0x192b99(0xd2)};if(!_0x405464[_0x192b99(0x1db)]('username')&&_0x405464['hasOwnProperty'](_0x192b99(0x14d))){const {clientip:_0x39ebd4}=_0x405464;return _0x598d18==_0x39ebd4?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x192b99(0x1d4)};}else{if(_0x405464[_0x192b99(0x1db)](_0x192b99(0xba))&&_0x405464['hasOwnProperty'](_0x192b99(0x14d))){const {username:_0x214327,clientip:_0x76a914}=_0x405464;return settings[_0x192b99(0xfe)]==_0x214327&&_0x598d18==_0x76a914?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x192b99(0x15f)};}}},generateLoginToken=_0x439833=>{const _0x48a281=_0x1ee9c5;if(_0x439833){const _0x46e73c=devices[_0x439833]['ip'];return jwt[_0x48a281(0x21d)]({'username':settings[_0x48a281(0xfe)],'clientip':_0x46e73c},secure[_0x48a281(0x18f)]+_0x439833,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x8c5f77=>{const _0x49b879=_0x1ee9c5;if(_0x8c5f77){const _0x8e4367=devices[_0x8c5f77]['ip'];return jwt[_0x49b879(0x21d)]({'clientip':_0x8e4367},secure[_0x49b879(0x18f)]+_0x8c5f77,{'expiresIn':devices[_0x8c5f77][_0x49b879(0x249)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0xeb57d5=>{const _0x2af542=_0x1ee9c5;let _0xe4ea6c=![];return devices[_0xeb57d5]['telegramIpApproval']&&devices[_0xeb57d5]['telegramIpApproval'][_0x2af542(0x1ea)]!=_0x2af542(0x1a6)&&(_0xe4ea6c=devices[_0xeb57d5][_0x2af542(0x249)][_0x2af542(0x14d)]==devices[_0xeb57d5]['ip']&&new Date()[_0x2af542(0x11e)]()-devices[_0xeb57d5][_0x2af542(0x249)][_0x2af542(0x1e6)]<devices[_0xeb57d5][_0x2af542(0x249)][_0x2af542(0x1ea)]*0x3c*0x3e8),_0xe4ea6c;},telegram2FaApproved=_0x14c60c=>{const _0x456e79=_0x1ee9c5;let _0x111c91=![];return devices[_0x14c60c]['telegram2FaApproval']&&devices[_0x14c60c][_0x456e79(0x18b)]['expiry']!=_0x456e79(0x1a6)&&(_0x111c91=devices[_0x14c60c][_0x456e79(0x18b)][_0x456e79(0x14d)]==devices[_0x14c60c]['ip']&&new Date()['getTime']()-devices[_0x14c60c]['telegram2FaApproval'][_0x456e79(0x1e6)]<devices[_0x14c60c][_0x456e79(0x18b)][_0x456e79(0x1ea)]*0x3c*0x3e8),_0x111c91;},normalizeIP=_0x30ab19=>{const _0x553b9b=_0x1ee9c5;let _0x7ce420=null,_0xad64b0=null;if(ipaddr[_0x553b9b(0x181)](_0x30ab19)){const _0x4fbdd9=ipaddr[_0x553b9b(0xf6)](_0x30ab19);_0x4fbdd9[_0x553b9b(0x1aa)]()==='ipv6'?(_0x4fbdd9[_0x553b9b(0x131)]()&&(_0x7ce420=_0x4fbdd9['toIPv4Address']()[_0x553b9b(0x14f)]()),_0xad64b0=_0x4fbdd9[_0x553b9b(0x14f)]()):(_0x7ce420=_0x4fbdd9[_0x553b9b(0x14f)](),_0xad64b0=_0x4fbdd9['toIPv4MappedAddress']()[_0x553b9b(0x14f)]());}return{'show':_0x7ce420?_0x7ce420:_0xad64b0,'store':_0xad64b0};};function sleep(_0x4d8275){return new Promise(_0x2d2579=>setTimeout(_0x2d2579,_0x4d8275));}