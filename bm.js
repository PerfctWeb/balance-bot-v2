const _0x31ba24=_0x5bcb;(function(_0x388197,_0x217df0){const _0x5ecd39=_0x5bcb,_0x11c036=_0x388197();while(!![]){try{const _0x1ac027=parseInt(_0x5ecd39(0x1be))/0x1+-parseInt(_0x5ecd39(0x1a2))/0x2+parseInt(_0x5ecd39(0x212))/0x3*(parseInt(_0x5ecd39(0x1ae))/0x4)+parseInt(_0x5ecd39(0x12e))/0x5*(parseInt(_0x5ecd39(0x151))/0x6)+-parseInt(_0x5ecd39(0x222))/0x7*(-parseInt(_0x5ecd39(0x225))/0x8)+-parseInt(_0x5ecd39(0x167))/0x9*(parseInt(_0x5ecd39(0x19c))/0xa)+parseInt(_0x5ecd39(0x16e))/0xb;if(_0x1ac027===_0x217df0)break;else _0x11c036['push'](_0x11c036['shift']());}catch(_0x142149){_0x11c036['push'](_0x11c036['shift']());}}}(_0x2849,0x68895));const _0x3731b9=function(){let _0x464901=!![];return function(_0x3eb42f,_0x2f276d){const _0x21143d=_0x464901?function(){const _0x49e9bd=_0x5bcb;if(_0x2f276d){const _0x2fbb08=_0x2f276d[_0x49e9bd(0xf1)](_0x3eb42f,arguments);return _0x2f276d=null,_0x2fbb08;}}:function(){};return _0x464901=![],_0x21143d;};}(),_0x53c495=_0x3731b9(this,function(){const _0x3cad29=_0x5bcb;return _0x53c495[_0x3cad29(0x1d2)]()[_0x3cad29(0x23b)](_0x3cad29(0x137))[_0x3cad29(0x1d2)]()[_0x3cad29(0x23c)](_0x53c495)[_0x3cad29(0x23b)](_0x3cad29(0x137));});_0x53c495();'use strict';process['env'][_0x31ba24(0xf2)]=0x1;const childProcess=require(_0x31ba24(0x198)),fs=require('fs'),fns=require(_0x31ba24(0x103)),low=require('lowdb'),FileSync=require(_0x31ba24(0x21a)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x31ba24(0x236))[_0x31ba24(0x124)],RSA=require('hybrid-crypto-js')[_0x31ba24(0x1e1)],bcrypt=require('bcryptjs'),jwt=require(_0x31ba24(0x1cc)),{Analytics}=require(_0x31ba24(0xce)),googleAnalyticsV3Plugin=require(_0x31ba24(0xed))['default'],ipaddr=require(_0x31ba24(0x10c)),argv=require('yargs/yargs')(process['argv'][_0x31ba24(0x174)](0x2))[_0x31ba24(0x214)],uuidRandom=require(_0x31ba24(0x1f2)),Mixpanel=require(_0x31ba24(0x1d8)),axios=require(_0x31ba24(0x17c)),{GraphQLClient,gql}=require('graphql-request'),PORT=argv['port']||_0x31ba24(0x169),pattern=/^[0-9]{2,4}$/;!pattern[_0x31ba24(0x153)](PORT)&&(console['log'](_0x31ba24(0x13c)+PORT+_0x31ba24(0x1ba)),process[_0x31ba24(0x20d)](0x1));const HOST=argv[_0x31ba24(0x1d0)]||null,userID=argv[_0x31ba24(0x239)]||'';let bbpath=_0x31ba24(0x226),bbpath2='';const botfile=_0x31ba24(0x149),configfile='bb-config.json',settingsfile='bb-settings.json',securefile='bb-secure.json';let validInstallation=!![];!fs[_0x31ba24(0x19b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x31ba24(0x148)),configpath=userID?bbpath+_0x31ba24(0x105)+userID+'/':bbpath+_0x31ba24(0x105),configbackuppath=configpath+'backup/';!fs[_0x31ba24(0x19b)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x31ba24(0x1ec)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x31ba24(0x1ef)]({'bots':[]})[_0x31ba24(0x165)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x31ba24(0x1ef)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x31ba24(0x1f8)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x31ba24(0x1ef)]({'secure':{},'blacklist':[]})[_0x31ba24(0x165)]();let crypt=new Crypt({'md':_0x31ba24(0x207),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x31ba24(0xe3)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x31ba24(0x166)}),analytics=Analytics({'app':_0x31ba24(0x15e),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x31ba24(0xd9)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x31ba24(0x11a))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x31ba24(0x1b7)),app=express(),http=require(_0x31ba24(0x1ac))[_0x31ba24(0x1b3)](app);app[_0x31ba24(0x21f)](express[_0x31ba24(0xc7)](path[_0x31ba24(0x1db)](__dirname,bbpath2,_0x31ba24(0x232)))),app['use'](express['static'](path[_0x31ba24(0x1db)](__dirname,bbpath2,_0x31ba24(0x1ce)))),app[_0x31ba24(0x146)]('/',function(_0x49cc3b,_0x40a43a){const _0x198229=_0x31ba24;_0x40a43a[_0x198229(0x1ee)](path['join'](__dirname,bbpath2,_0x198229(0x232),_0x198229(0x1bb)));}),app[_0x31ba24(0x146)](_0x31ba24(0x19a),function(_0xa81a78,_0x564ab4){const _0x4c9ebf=_0x31ba24;_0x564ab4[_0x4c9ebf(0x1ee)](path[_0x4c9ebf(0x1db)](__dirname,bbpath2,_0x4c9ebf(0x1ce),_0x4c9ebf(0x1bb)));}),app[_0x31ba24(0x146)](_0x31ba24(0x1f5),(_0x449376,_0xc93684)=>{const _0x36b16e=_0x31ba24;_0xc93684[_0x36b16e(0x1ee)](path[_0x36b16e(0x1db)](__dirname,bbpath2,_0x36b16e(0x1ce),_0x36b16e(0x1bb)));}),app['get'](_0x31ba24(0x20b),(_0x9a0b98,_0x3bdc42)=>{const _0xbcd784=_0x31ba24;_0x3bdc42[_0xbcd784(0x1ee)](path[_0xbcd784(0x1db)](__dirname,bbpath2,_0xbcd784(0x1ce),_0xbcd784(0x1bb)));}),app[_0x31ba24(0x146)](_0x31ba24(0x11f),(_0x222674,_0x36e3c2)=>{const _0x24fcf2=_0x31ba24;_0x36e3c2['sendFile'](path[_0x24fcf2(0x1db)](__dirname,bbpath2,_0x24fcf2(0x1ce),'index.html'));}),app[_0x31ba24(0x146)](_0x31ba24(0x17f),(_0x2dc7bc,_0xb3b13c)=>{const _0x55062c=_0x31ba24;_0xb3b13c[_0x55062c(0x1ee)](path[_0x55062c(0x1db)](__dirname,bbpath2,'build',_0x55062c(0x1bb)));}),app['get'](_0x31ba24(0x13e),(_0xd2330a,_0x39acbf)=>{const _0x4ea6b2=_0x31ba24;_0x39acbf[_0x4ea6b2(0x1ee)](path[_0x4ea6b2(0x1db)](__dirname,bbpath2,_0x4ea6b2(0x1ce),_0x4ea6b2(0x1bb)));}),app[_0x31ba24(0x146)](_0x31ba24(0x141),(_0x4422c5,_0x464465)=>{const _0x467c0b=_0x31ba24;_0x464465[_0x467c0b(0x1ee)](path[_0x467c0b(0x1db)](__dirname,bbpath2,_0x467c0b(0x1ce),_0x467c0b(0x1bb)));});if(HOST)http[_0x31ba24(0x14f)](PORT,HOST);else http[_0x31ba24(0x14f)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require(_0x31ba24(0x177));let tgBot;if(settings[_0x31ba24(0x206)]&&settings[_0x31ba24(0x206)]!=''&&settings[_0x31ba24(0x1b2)]&&settings[_0x31ba24(0x1b2)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x21c24c=_0x31ba24;console[_0x21c24c(0x204)](''),console[_0x21c24c(0x204)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x21c24c(0x11d));if(config['length']!=0x0)config[_0x21c24c(0x21c)](_0xf9fcd8=>{const _0x226c0a=_0x21c24c;if(_0xf9fcd8['status']==_0x226c0a(0x213)||_0xf9fcd8[_0x226c0a(0x1e4)]==_0x226c0a(0x22b))logging(_0x226c0a(0x1ea)+_0xf9fcd8[_0x226c0a(0x147)]+_0x226c0a(0x221)+_0xf9fcd8['botname']),startBot([_0xf9fcd8['botID'],userID],{'cwd':bbpath},function(_0x1f388a){if(_0x1f388a)logging(_0x1f388a);});else(_0xf9fcd8[_0x226c0a(0x1e4)]=='disabled'||_0xf9fcd8['status']==_0x226c0a(0xd7))&&logging(_0x226c0a(0x1c0)+_0xf9fcd8[_0x226c0a(0x147)]+_0x226c0a(0x221)+_0xf9fcd8[_0x226c0a(0x1f6)]);});else!newBot&&console[_0x21c24c(0x204)](_0x21c24c(0x1d4));if(newBot)addBot();console[_0x21c24c(0x204)]('-----------------------------------------------------------------------------------'),console[_0x21c24c(0x204)]('');}function startSocket(){const _0x541eee=_0x31ba24;io['on'](_0x541eee(0x115),_0x3cbb62=>{const _0x3b8126=_0x541eee;let _0x125bee,_0x57d4df,_0x2bba42,_0x54d1bf,_0x202f9e;const _0x107432=_0x3cbb62[_0x3b8126(0x21e)][_0x3b8126(0xdb)][_0x3b8126(0x218)];_0x57d4df=_0x107432['match'](/bot[0-9]{3}/);if(_0x57d4df)_0x2bba42=_0x57d4df[0x0][_0x3b8126(0x144)](/[0-9]{3}/);if(_0x2bba42)_0x125bee=_0x2bba42[0x0];else _0x125bee='botmanager';const _0x4b9774=_0x3cbb62[_0x3b8126(0x21e)][_0x3b8126(0x1e8)]['encryptedUuid'];if(!_0x4b9774)_0x3cbb62[_0x3b8126(0xf8)]('status',{'publicKey':secure['publicKey']});else{_0x54d1bf=timelyDecrypt(_0x4b9774,![]);if(!_0x54d1bf)_0x3cbb62[_0x3b8126(0xf8)](_0x3b8126(0x1e4),{'publicKey':secure[_0x3b8126(0xdc)]});else{_0x202f9e=normalizeIP(_0x3cbb62[_0x3b8126(0x1f1)][_0x3b8126(0xfe)])[_0x3b8126(0x217)];if(!devices[_0x54d1bf])devices[_0x54d1bf]={'uuid':_0x54d1bf,'access':{'token':null}};devices[_0x54d1bf]['ip']=_0x202f9e;const _0xa31c8=addClient(_0x3cbb62['id'],_0x54d1bf,_0x125bee);setAccess(_0xa31c8),emitMessages(),_0x3cbb62['on'](_0x3b8126(0x22a),_0x4fb0f7=>{const _0x3ab0b5=_0x3b8126,_0x380d6b=timelyDecrypt(_0x4fb0f7[_0x3ab0b5(0x1e5)]);if(_0x380d6b){_0x4fb0f7={'username':_0x4fb0f7['username'],'password':_0x380d6b},devices[_0x54d1bf][_0x3ab0b5(0x208)]=validateCredentials(_0x4fb0f7,_0x54d1bf);if(devices[_0x54d1bf][_0x3ab0b5(0x208)][_0x3ab0b5(0x1b1)]==![]&&devices[_0x54d1bf][_0x3ab0b5(0x208)][_0x3ab0b5(0xdd)]==_0x3ab0b5(0x1d7))_0x3cbb62[_0x3ab0b5(0xf8)](_0x3ab0b5(0x1e4),{'access':devices[_0x54d1bf][_0x3ab0b5(0x208)]}),loginAccess2FA(_0x54d1bf,_0x202f9e);else{if(devices[_0x54d1bf]['access'][_0x3ab0b5(0x1b1)]==![]&&devices[_0x54d1bf]['access']['reason']==_0x3ab0b5(0xc8))_0x3cbb62[_0x3ab0b5(0xf8)]('status',{'access':devices[_0x54d1bf]['access']});else devices[_0x54d1bf][_0x3ab0b5(0x208)]['allow']&&devices[_0x54d1bf]['access']['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x54d1bf)[_0x3ab0b5(0x21c)](_0x71ea57=>{setAccess(_0x71ea57);}),setTokenRefresh(_0x54d1bf),setSessionTimeout(_0x3ab0b5(0x22a),_0x54d1bf));}}else logging(_0x3ab0b5(0x1f0));}),_0x3cbb62['on']('reset-password',()=>{resetPassword();}),_0x3cbb62['on'](_0x3b8126(0x13f),_0x2e2843=>{removeClient(_0x3cbb62['id']);});}}});}function initClient(_0x5983a7){const _0x5cbd55=_0x31ba24;if(_0x5983a7!=_0x5cbd55(0x108)&&config['apiKey']!=''){if(pid[_0x5983a7])pid[_0x5983a7][_0x5cbd55(0x138)]({'function':_0x5cbd55(0x1a6),'args':null});}}function getSocket(_0x356fe7){const _0x5245d5=_0x31ba24;return io[_0x5245d5(0x10a)][_0x5245d5(0x10a)][_0x5245d5(0x146)](_0x356fe7);}function setAccess(_0x6a874a){const _0x12903f=_0x31ba24,_0x3b4398=getSocket(_0x6a874a['id']),_0x440583=_0x6a874a[_0x12903f(0x13d)],_0x275212=_0x6a874a[_0x12903f(0xe2)];devices[_0x440583][_0x12903f(0x208)]=validateAccess(devices[_0x440583][_0x12903f(0x208)][_0x12903f(0x110)],_0x440583),_0x3b4398[_0x12903f(0x1db)](_0x440583);if(devices[_0x440583][_0x12903f(0x208)][_0x12903f(0x1b1)]){_0x3b4398[_0x12903f(0x1db)](_0x275212);if(_0x275212==_0x12903f(0x108))initializeSocketBotManager(_0x3b4398);else initializeSocketBot(_0x3b4398);initClient(_0x275212);}devices[_0x440583][_0x12903f(0x208)][_0x12903f(0x110)]&&devices[_0x440583][_0x12903f(0x208)][_0x12903f(0xdd)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x12903f(0x1de),_0x440583),devices[_0x440583]['access'][_0x12903f(0x110)]&&devices[_0x440583][_0x12903f(0x208)][_0x12903f(0xdd)]==_0x12903f(0x233)&&setSessionTimeout(_0x12903f(0x22a),_0x440583),_0x3b4398[_0x12903f(0xf8)](_0x12903f(0x1e4),{'status':_0x6a874a[_0x12903f(0x1d5)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x440583][_0x12903f(0x208)],'externalip':devices[_0x440583]['ip'],'publicKey':secure[_0x12903f(0xdc)],'userid':settings[_0x12903f(0x20f)],'validInstallation':validInstallation}),devices[_0x440583][_0x12903f(0x208)]['allow']==![]&&devices[_0x440583]['access']['reason']==_0x12903f(0xca)&&temporaryAccess2FA(_0x440583,devices[_0x440583]['ip']);}function setSessionTimeout(_0x45ce35,_0x2beef5){const _0xa41c8=_0x31ba24;let _0x7004cd;if(_0x45ce35=='login')_0x7004cd=loginExpiry*0x3c*0x3e8;else _0x7004cd=devices[_0x2beef5]['telegramIpApproval'][_0xa41c8(0x128)]*0x3c*0x3e8-(new Date()[_0xa41c8(0x1b8)]()-devices[_0x2beef5]['telegramIpApproval'][_0xa41c8(0x1a7)]);if(devices[_0x2beef5][_0xa41c8(0x1a4)])clearTimeout(devices[_0x2beef5][_0xa41c8(0x1a4)]);devices[_0x2beef5]['pidExpireLogin']=setTimeout(()=>{const _0x5a10e5=_0xa41c8;if(devices[_0x2beef5]['pidRefreshToken'])clearTimeout(devices[_0x2beef5][_0x5a10e5(0xbe)]);removeSocketListeners(_0x2beef5),addBlacklist(_0x2beef5),devices[_0x2beef5][_0x5a10e5(0xda)]=null,devices[_0x2beef5][_0x5a10e5(0x159)]=null,devices[_0x2beef5]['access'][_0x5a10e5(0x110)]=null,devices[_0x2beef5][_0x5a10e5(0x208)]=validateAccess(devices[_0x2beef5][_0x5a10e5(0x208)][_0x5a10e5(0x110)],_0x2beef5),!(devices[_0x2beef5]['access'][_0x5a10e5(0x1b1)]&&devices[_0x2beef5]['access'][_0x5a10e5(0xdd)]==_0x5a10e5(0x1ad))&&(_0x45ce35=='login'?io['to'](_0x2beef5)['emit']('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2beef5)[_0x5a10e5(0xf8)](_0x5a10e5(0x1e4),{'access':{'allow':![],'reason':_0x5a10e5(0xe0),'token':null}})),devices[_0x2beef5][_0x5a10e5(0x208)][_0x5a10e5(0x110)]=null;},_0x7004cd);}function setTokenRefresh(_0x594882){const _0x4a6f68=_0x31ba24;if(devices[_0x594882][_0x4a6f68(0xbe)])clearTimeout(devices[_0x594882][_0x4a6f68(0xbe)]);devices[_0x594882][_0x4a6f68(0xbe)]=setTimeout(()=>{const _0x1cc7e1=_0x4a6f68;getClientsWithUuid(_0x594882)[_0x1cc7e1(0xc0)]!=0x0?(devices[_0x594882][_0x1cc7e1(0x208)]=refreshToken(_0x594882),io['to'](_0x594882)[_0x1cc7e1(0xf8)](_0x1cc7e1(0x1e4),{'status':_0x1cc7e1(0x224),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x594882]['access'],'externalip':devices[_0x594882]['ip'],'publicKey':secure[_0x1cc7e1(0xdc)],'validInstallation':validInstallation}),setTokenRefresh(_0x594882)):clearTimeout(devices[_0x594882]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xbac102){const _0x19f90d=_0x31ba24,_0x4ab3b7=getClient(_0xbac102['id'])[_0x19f90d(0x13d)];_0xbac102[_0x19f90d(0xf8)](_0x19f90d(0x216),config),_0xbac102[_0x19f90d(0xf8)](_0x19f90d(0x196),cleanSettings()),_0xbac102['on']('add-bot',_0x376fc7=>{const _0x4cbb78=_0x19f90d;if(validateAccess(_0x376fc7,_0x4ab3b7)[_0x4cbb78(0x1b1)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0xbac102['on'](_0x19f90d(0x16b),(_0x17d690,_0x563689)=>{const _0x23f07a=_0x19f90d;if(validateAccess(_0x563689,_0x4ab3b7)[_0x23f07a(0x1b1)])toggleBot(_0x17d690[_0x23f07a(0x147)],_0x17d690[_0x23f07a(0x1e4)],_0x17d690[_0x23f07a(0x18d)]);else logging(_0x23f07a(0x187));}),_0xbac102['on'](_0x19f90d(0x18b),(_0x5c6613,_0x586750)=>{const _0x3a4e6c=_0x19f90d;if(validateAccess(_0x586750,_0x4ab3b7)[_0x3a4e6c(0x1b1)])toggleBotMode(_0x5c6613);else logging(_0x3a4e6c(0x187));}),_0xbac102['on'](_0x19f90d(0xeb),(_0x224ed4,_0x16b049)=>{const _0x42950c=_0x19f90d;if(validateAccess(_0x16b049,_0x4ab3b7)[_0x42950c(0x1b1)])deleteBot(_0x224ed4);else logging(_0x42950c(0x16f));}),_0xbac102['on'](_0x19f90d(0x142),(_0x5022ef,_0x549db6)=>{const _0x193b0b=_0x19f90d;if(validateAccess(_0x549db6,_0x4ab3b7)[_0x193b0b(0x1b1)])storeSettings(_0x5022ef,!![]);else logging(_0x193b0b(0x215));}),_0xbac102['on'](_0x19f90d(0x1c6),_0x3629e6=>{const _0x1c9459=_0x19f90d;if(validateAccess(_0x3629e6,_0x4ab3b7)['allow'])updateBB();else logging(_0x1c9459(0x184));}),_0xbac102['on'](_0x19f90d(0x1c8),_0x32cfd1=>{const _0xebe18b=_0x19f90d;if(validateAccess(_0x32cfd1,_0x4ab3b7)[_0xebe18b(0x1b1)])getMessages();else logging(_0xebe18b(0x188));}),_0xbac102['on']('confirm-message',(_0x176525,_0x233407)=>{const _0x4eaed9=_0x19f90d;if(validateAccess(_0x233407,_0x4ab3b7)['allow'])confirmMessage(_0x176525);else logging(_0x4eaed9(0x1fe));}),_0xbac102['on'](_0x19f90d(0x1ed),_0x4b0d41=>{const _0x2e0b70=_0x19f90d;if(validateAccess(_0x4b0d41,_0x4ab3b7)['allow']){if(devices[_0x4ab3b7][_0x2e0b70(0xbe)])clearTimeout(devices[_0x4ab3b7]['pidRefreshToken']);if(devices[_0x4ab3b7][_0x2e0b70(0x1a4)])clearTimeout(devices[_0x4ab3b7][_0x2e0b70(0x1a4)]);removeSocketListeners(getClient(_0xbac102['id'])[_0x2e0b70(0x13d)]),addBlacklist(_0x4ab3b7),devices[_0x4ab3b7][_0x2e0b70(0xda)]=null,devices[_0x4ab3b7][_0x2e0b70(0x159)]=null,devices[_0x4ab3b7][_0x2e0b70(0x208)][_0x2e0b70(0x110)]=null,io['to'](getClient(_0xbac102['id'])[_0x2e0b70(0x13d)])[_0x2e0b70(0xf8)](_0x2e0b70(0x1e4),{'access':{'allow':![],'reason':_0x2e0b70(0x22f),'token':null}});}else logging(_0x2e0b70(0x1ff));});}function initializeSocketBot(_0x4bc51d){const _0x3a2ee4=_0x31ba24,_0x1fdca6=getClient(_0x4bc51d['id'])[_0x3a2ee4(0xe2)],_0x3a727e=getClient(_0x4bc51d['id'])[_0x3a2ee4(0x13d)];_0x4bc51d['on'](_0x3a2ee4(0x1af),(_0xa10c95,_0x475f74)=>{const _0x40cc25=_0x3a2ee4;if(validateAccess(_0x475f74,_0x3a727e)[_0x40cc25(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6]['send']({'function':_0x40cc25(0x17b),'args':_0xa10c95});}else logging(_0x40cc25(0x1d9));}),_0x4bc51d['on'](_0x3a2ee4(0x185),(_0x19a418,_0x443b0)=>{const _0x30c52f=_0x3a2ee4;if(validateAccess(_0x443b0,_0x3a727e)[_0x30c52f(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6]['send']({'function':_0x30c52f(0x15d),'args':_0x19a418});}else logging(_0x30c52f(0x155));}),_0x4bc51d['on'](_0x3a2ee4(0x228),(_0x25be12,_0x54a46e)=>{const _0x3a1738=_0x3a2ee4;if(validateAccess(_0x54a46e,_0x3a727e)[_0x3a1738(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6]['send']({'function':'getPortfolio','args':_0x25be12});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x4bc51d['on'](_0x3a2ee4(0x237),(_0x27ae46,_0x5c5aa3)=>{const _0x44e00a=_0x3a2ee4;if(validateAccess(_0x5c5aa3,_0x3a727e)[_0x44e00a(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6][_0x44e00a(0x138)]({'function':_0x44e00a(0x161),'args':_0x27ae46});}else logging(_0x44e00a(0x22e));}),_0x4bc51d['on'](_0x3a2ee4(0xc1),(_0xa8622c,_0xba5dfb)=>{const _0x5aa67f=_0x3a2ee4;if(validateAccess(_0xba5dfb,_0x3a727e)['allow']){if(pid[_0x1fdca6])pid[_0x1fdca6][_0x5aa67f(0x138)]({'function':'storeHeadless','args':_0xa8622c});}else logging(_0x5aa67f(0xf5));}),_0x4bc51d['on']('get-starting-balances',_0x30e062=>{const _0x10556f=_0x3a2ee4;if(validateAccess(_0x30e062,_0x3a727e)[_0x10556f(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6]['send']({'function':'getStartingBalances','args':null});}else logging(_0x10556f(0x16a));}),_0x4bc51d['on'](_0x3a2ee4(0xcd),(_0x36c7cc,_0x512ed8)=>{const _0x32c8c3=_0x3a2ee4;if(validateAccess(_0x512ed8,_0x3a727e)[_0x32c8c3(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6][_0x32c8c3(0x138)]({'function':_0x32c8c3(0x10b),'args':_0x36c7cc});}else logging(_0x32c8c3(0x197));}),_0x4bc51d['on'](_0x3a2ee4(0x14c),_0x59aeea=>{const _0x220708=_0x3a2ee4;if(validateAccess(_0x59aeea,_0x3a727e)[_0x220708(0x1b1)]){if(pid[_0x1fdca6])pid[_0x1fdca6][_0x220708(0x138)]({'function':_0x220708(0xee),'args':null});}else logging(_0x220708(0x1bd));}),_0x4bc51d['on'](_0x3a2ee4(0x1c6),_0xb2d39=>{const _0x119e0b=_0x3a2ee4;if(validateAccess(_0xb2d39,_0x3a727e)[_0x119e0b(0x1b1)])updateBB();else logging(_0x119e0b(0x184));}),_0x4bc51d['on']('get-messages',_0x1bd1a6=>{const _0x36832f=_0x3a2ee4;if(validateAccess(_0x1bd1a6,_0x3a727e)['allow'])getMessages();else logging(_0x36832f(0x188));}),_0x4bc51d['on']('confirm-message',(_0x5aacc8,_0x4bb7bf)=>{const _0x46ed92=_0x3a2ee4;if(validateAccess(_0x4bb7bf,_0x3a727e)['allow'])confirmMessage(_0x5aacc8);else logging(_0x46ed92(0x1fe));}),_0x4bc51d['on'](_0x3a2ee4(0x1ed),_0x150a6d=>{const _0x4b29f6=_0x3a2ee4;if(validateAccess(_0x150a6d,_0x3a727e)['allow']){if(devices[_0x3a727e][_0x4b29f6(0xbe)])clearTimeout(devices[_0x3a727e][_0x4b29f6(0xbe)]);if(devices[_0x3a727e][_0x4b29f6(0x1a4)])clearTimeout(devices[_0x3a727e][_0x4b29f6(0x1a4)]);removeSocketListeners(getClient(_0x4bc51d['id'])[_0x4b29f6(0x13d)]),addBlacklist(_0x3a727e),devices[_0x3a727e][_0x4b29f6(0xda)]=null,devices[_0x3a727e][_0x4b29f6(0x159)]=null,devices[_0x3a727e]['access'][_0x4b29f6(0x110)]=null,io['to'](getClient(_0x4bc51d['id'])[_0x4b29f6(0x13d)])[_0x4b29f6(0xf8)]('status',{'access':{'allow':![],'reason':_0x4b29f6(0x22f),'token':null}});}else logging(_0x4b29f6(0x1ff));});}function removeSocketListeners(_0x46a91f){getClientsWithUuid(_0x46a91f)['forEach'](_0x4a5073=>{const _0xd3cd61=_0x5bcb;getSocket(_0x4a5073['id'])[_0xd3cd61(0x20e)]();});}function cleanSettings(){const _0x9b8b6=_0x31ba24;let _0x30ecfc=settings;return settings['telegramToken']&&settings[_0x9b8b6(0x206)]!=''&&(_0x30ecfc={..._0x30ecfc,'telegramToken':'************'}),settings['bbPassword']&&settings[_0x9b8b6(0x12c)]!=''&&(_0x30ecfc={..._0x30ecfc,'bbPassword':'************'}),_0x30ecfc;}function updateBB(){const _0x2d5fb7=_0x31ba24;installingUpdate=!![],config['forEach'](_0x28c408=>{const _0x57d46a=_0x5bcb;restartBot(_0x28c408[_0x57d46a(0x147)]);}),process[_0x2d5fb7(0x138)]({'update':!![]},_0x56484d=>{});}function startBot(_0x2f1e58,_0x570551,_0x46dc58){const _0x694bde=_0x31ba24;let _0x4c8c7c=![];const _0x35df7a=_0x2f1e58[0x0];_0x570551={..._0x570551,'stdio':[_0x694bde(0x1eb),_0x694bde(0x1eb),_0x694bde(0x1eb),_0x694bde(0x186)]},pid[_0x35df7a]=childProcess[_0x694bde(0x1f7)](botfile,_0x2f1e58,_0x570551),pid[_0x35df7a]['on'](_0x694bde(0x123),_0x109844=>{const _0x358d97=_0x694bde;switch(Object[_0x358d97(0x12f)](_0x109844)[0x0]){case _0x358d97(0x1f6):updateBotName(_0x35df7a,_0x109844[_0x358d97(0x1f6)]);break;case _0x358d97(0xde):updateBotManager();break;case _0x358d97(0x1e4):updateStatus(_0x35df7a,_0x109844[_0x358d97(0x1e4)]);break;case _0x358d97(0x18d):updateLive(_0x35df7a,_0x109844[_0x358d97(0x18d)]);break;case _0x358d97(0x10e):updateLive(_0x35df7a,_0x109844[_0x358d97(0x10e)]),io['to'](_0x35df7a)[_0x358d97(0xf8)](_0x358d97(0x1e4),{'access':{'allow':![],'reason':_0x358d97(0x15b),'token':null}});break;case'stop':_0x109844[_0x358d97(0x1cb)]==_0x358d97(0x13b)&&restartBot(_0x35df7a);_0x109844['stop']==_0x358d97(0x10f)&&toggleBot(_0x35df7a,_0x358d97(0x238),_0x358d97(0x219));break;case _0x358d97(0x205):sendTelegram(_0x35df7a,_0x109844['telegram']);break;case _0x358d97(0x1ca):sendTelegramMsg(_0x109844[_0x358d97(0x1ca)]);break;case _0x358d97(0x1cf):io['to'](_0x35df7a)[_0x358d97(0xf8)](_0x109844[_0x358d97(0x1cf)],_0x109844['args']);break;}}),pid[_0x35df7a]['on'](_0x694bde(0x111),function(_0x373615){if(_0x4c8c7c)return;_0x4c8c7c=!![],_0x46dc58(_0x373615);}),pid[_0x35df7a]['on'](_0x694bde(0x20d),function(_0x53a068){const _0x10069a=_0x694bde;if(installingUpdate)return;if(_0x4c8c7c)return;_0x4c8c7c=!![],_0x46dc58(null);const _0x138bce=dbConfig[_0x10069a(0x146)](_0x10069a(0x216))[_0x10069a(0x178)]({'botID':_0x35df7a})['value']();_0x138bce&&(_0x138bce[_0x10069a(0x1e4)]==_0x10069a(0x213)||_0x138bce['status']=='new')&&(updateLive(_0x35df7a,'stopped'),logging(_0x10069a(0xcc)+_0x35df7a),startBot([_0x35df7a,userID],{'cwd':bbpath},function(_0x12d97c){if(_0x12d97c)logging(_0x12d97c);}));});}function stopBot(_0xb1f1b6){const _0x16298c=_0x31ba24;getClientsWithBotID(_0xb1f1b6)['forEach'](_0xdd2e28=>{const _0xff56b2=_0x5bcb;getSocket(_0xdd2e28['id'])[_0xff56b2(0x13f)](!![]),removeClient(_0xdd2e28['id']);}),pid[_0xb1f1b6]&&(pid[_0xb1f1b6][_0x16298c(0x10f)](),pid[_0xb1f1b6]=null);}function restartBot(_0x164ce2){if(pid[_0x164ce2])pid[_0x164ce2]['kill']();}function addBot(){const _0x4d39b0=_0x31ba24;let _0x2ac0e0;for(let _0x1fbd9e=0x1;_0x1fbd9e<0x3e9;_0x1fbd9e++){_0x2ac0e0=_0x1fbd9e[_0x4d39b0(0x1d2)]()['padStart'](0x3,'0');let _0x4a08f6=config[_0x4d39b0(0x178)](_0x553c61=>_0x553c61[_0x4d39b0(0x147)]==_0x2ac0e0);if(!_0x4a08f6)break;}if(_0x2ac0e0==='1000'){logging(_0x4d39b0(0x1b9));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x2ac0e0),dbConfig['get'](_0x4d39b0(0x216))[_0x4d39b0(0x154)]({'botID':_0x2ac0e0,'botname':'Bot\x20'+_0x2ac0e0,'status':_0x4d39b0(0x22b),'live':''})['write'](),startBot([_0x2ac0e0,userID],{'cwd':bbpath},function(_0x199eb0){if(_0x199eb0)logging(_0x199eb0);}),config=getConfiguration(),io['to']('botmanager')[_0x4d39b0(0xf8)]('bots',config);}function deleteBot(_0x901477){const _0x537366=_0x31ba24;getClientsWithBotID(_0x901477)[_0x537366(0x21c)](_0xc5c4b=>{const _0x810824=_0x537366;getSocket(_0xc5c4b['id'])[_0x810824(0x13f)](!![]),removeClient(_0xc5c4b['id']);}),dbConfig[_0x537366(0x146)]('bots')[_0x537366(0x1b5)]({'botID':_0x901477})['write'](),logging(_0x537366(0xfd)+_0x901477),stopBot(_0x901477);try{fs[_0x537366(0x125)](path[_0x537366(0x1db)](configpath,_0x537366(0x235)+_0x901477+'-config.json')),fs['unlinkSync'](path['join'](configpath,_0x537366(0x235)+_0x901477+_0x537366(0xc5))),fs[_0x537366(0x125)](path[_0x537366(0x1db)](configpath,_0x537366(0x235)+_0x901477+_0x537366(0xdf))),fs['unlinkSync'](path[_0x537366(0x1db)](configpath,_0x537366(0x235)+_0x901477+_0x537366(0xf0)));}catch(_0x4d3394){if(_0x4d3394)logging(_0x537366(0x1f4),_0x4d3394);}config=getConfiguration(),io['to']('botmanager')[_0x537366(0xf8)](_0x537366(0x216),config);}function toggleBot(_0xd2ff2d,_0x5a1619,_0x355eb3){const _0x3c136d=_0x31ba24;dbConfig[_0x3c136d(0x146)](_0x3c136d(0x216))[_0x3c136d(0x178)]({'botID':_0xd2ff2d})[_0x3c136d(0x18f)]({'status':_0x5a1619})[_0x3c136d(0x18f)]({'live':_0x355eb3})[_0x3c136d(0x165)]();if(_0x5a1619==_0x3c136d(0x213)||_0x5a1619==_0x3c136d(0x22b))logging(_0x3c136d(0xf6)+_0xd2ff2d),startBot([_0xd2ff2d,userID],{'cwd':bbpath},function(_0x1198ff){if(_0x1198ff)logging(_0x1198ff);});else(_0x5a1619=='disabled'||_0x5a1619==_0x3c136d(0xd7))&&(logging(_0x3c136d(0x192)+_0xd2ff2d),stopBot(_0xd2ff2d));config=getConfiguration(),io['to'](_0x3c136d(0x108))[_0x3c136d(0xf8)](_0x3c136d(0x216),config);}function toggleStatus(_0x12ac7e){const _0x26bd62=_0x31ba24;let _0x1faed6=dbConfig[_0x26bd62(0x146)]('bots')[_0x26bd62(0x178)]({'botID':_0x12ac7e})['value'](),_0x2a17bd;if(_0x1faed6[_0x26bd62(0x1e4)]===_0x26bd62(0x213))_0x2a17bd=_0x26bd62(0x238);else{if(_0x1faed6[_0x26bd62(0x1e4)]===_0x26bd62(0x22b))_0x2a17bd=_0x26bd62(0xd7);else{if(_0x1faed6[_0x26bd62(0x1e4)]===_0x26bd62(0xd7))_0x2a17bd=_0x26bd62(0x22b);else{if(_0x1faed6['status']===_0x26bd62(0x238))_0x2a17bd=_0x26bd62(0x213);}}}return _0x2a17bd;}function updateStatus(_0x32af08,_0x5e7174){const _0x513242=_0x31ba24;dbConfig[_0x513242(0x146)](_0x513242(0x216))[_0x513242(0x178)]({'botID':_0x32af08})['assign']({'status':_0x5e7174})[_0x513242(0x165)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x513242(0x216),config);}function updateLive(_0x12a728,_0x317ab0){const _0x58fb36=_0x31ba24;dbConfig[_0x58fb36(0x146)](_0x58fb36(0x216))[_0x58fb36(0x178)]({'botID':_0x12a728})['assign']({'live':_0x317ab0})[_0x58fb36(0x165)](),config=getConfiguration(),io['to'](_0x58fb36(0x108))['emit'](_0x58fb36(0x216),config);}function updateBotName(_0x2af5be,_0x2ccd9d){const _0x1e1793=_0x31ba24;dbConfig[_0x1e1793(0x146)](_0x1e1793(0x216))[_0x1e1793(0x178)]({'botID':_0x2af5be})[_0x1e1793(0x18f)]({'botname':_0x2ccd9d})[_0x1e1793(0x165)](),config=getConfiguration(),io['to'](_0x1e1793(0x108))[_0x1e1793(0xf8)]('bots',config);}function updateBotManager(){const _0x351010=_0x31ba24;config=getConfiguration(),io['to']('botmanager')[_0x351010(0xf8)](_0x351010(0x216),config);}function toggleBotMode(_0x20ade6){const _0x25dc27=_0x31ba24;if(pid[_0x20ade6])pid[_0x20ade6][_0x25dc27(0x138)]({'function':_0x25dc27(0x1e7),'args':null});else{const _0x184adb=configpath+_0x25dc27(0x235)+_0x20ade6+'-config.json',_0x27b7a9=fs['readFileSync'](_0x184adb),_0xf71ce9=JSON[_0x25dc27(0x171)](_0x27b7a9),_0x5eb69a=_0xf71ce9['bot'][0x0][_0x25dc27(0xd0)];_0xf71ce9[_0x25dc27(0xe2)][0x0][_0x25dc27(0xd0)]=!_0x5eb69a;const _0x388703=JSON['stringify'](_0xf71ce9,null,0x2);fs['writeFileSync'](_0x184adb,_0x388703),config=getConfiguration(),io['to']('botmanager')[_0x25dc27(0xf8)]('bots',config);}}function telegramError(_0x218e48){const _0x4837d4=_0x31ba24;console[_0x4837d4(0x204)](getTimeStamp()+_0x4837d4(0x176));}function _0x2849(){const _0x3591e3=['build2','2FA\x20login\x20token\x20generated','Login\x20rejected','bot-','hybrid-crypto-js','store-configuration','disabled','user','data','search','constructor','add','running','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','pidRefreshToken','name','length','store-headless','/on\x20-\x20start\x20bot(s)\x0a','catch','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','-events.json','All\x20bots\x20running\x20right\x20now','static','invalid\x20credentials','30\x20min','2FA\x20required',':\x20Bot\x20Mgr\x20>\x20','restarting\x20Bot\x20','place-order','analytics','login\x20required','headless','/names\x20-\x20show\x20bot\x20names\x0a','show','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','secure','Password\x20has\x20been\x20reset\x20to:\x20','isIPv4MappedAddress','new-disabled','answerCallbackQuery','UA-192771731-1','telegramIpApproval','headers','publicKey','reason','updatebotmanager','-performance.json','temporary\x20access\x20timeout','getFullYear','bot','init','Login\x20accepted','Alerts','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','getMinutes','map','loginRequired','5\x20min','delete-bot','accept','@analytics/google-analytics-v3','cancelLoading','callback_query','-results.json','apply','NTBA_FIX_319','startsWith','sortBy','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','enabled\x20Bot\x20','settings.','emit','orders','All\x20bots','\x20>\x20','privateKey','deleted\x20Bot\x20','remoteAddress','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','getSeconds','sendPortfolioTelegram','title','date-fns','manual','config/','blacklist','randomBytes','botmanager','hex','sockets','placeOrder','ipaddr.js','randomFillSync','started','kill','token','error','split','messages','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','connection','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','SIGTERM','-config.json','auto','version.json','once','sendMessage','-----------------------------------------------------------------------------------','number','/:bot/coins','/restart\x20-\x20restart\x20bot(s)\x0a','then','telegramEvents','message','Crypt','unlinkSync','hashSync','decrypt','expiry','login\x20token\x20generated','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','bbPassword','track','17235ZJyVIG','keys','Ok,\x20will\x20send\x20alert\x20notifications\x20only','removeListener','15\x20min','event','all','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','/status\x20-\x20show\x20bot(s)\x20status\x0a','(((.+)+)+)+$','send','username','::1','restart','Error:\x20Invalid\x20argument\x20','uuid','/:bot/configuration','disconnect','min','/:bot/support','store-settings','/off\x20-\x20stop\x20bot(s)\x0a','match','readFileSync','get','botID','clients','bot.js','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bbUsername','cancel-loading','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','temporaryAccessAllowed','listen','\x20minutes','6ZrJOeU','************','test','push','Unauthorized\x20attempt\x20to\x20delete\x20alerts','</b>\x20?','filter','max','telegram2FaApproval','Password\x20reset\x20rejected','reload','padStart','deleteHistoryAlerts','Balance\x20Bot','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','toIPv4MappedAddress','storeConfiguration','Allow\x20login\x20from\x20IP\x20address\x20<b>','telegramChatId','Invalid\x20authentication\x20token\x20(1)','write','api-eu.mixpanel.com','203076AeGMnd','Markdown','3000','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','update-bot','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','/help\x20-\x20show\x20available\x20commands\x0a','5111700yiHXjo','Unauthorized\x20attempt\x20to\x20delete\x20bot','getHours','parse','includes','cloneDeep','slice','Invalid\x20IP\x20address',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','node-telegram-bot-api','find','127.0.0.1','\x20only\x0a','emitHistory','axios','compareSync','notification','/:bot/history','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','set','whitelistEnabled','clientip','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','delete-alerts','ipc','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20get\x20messages','Yes','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','toggle-bot-mode','<b>Balance\x20Bot\x20Status:</b>\x0a','live','/update\x20-\x20update\x20Balance\x20Bot\x0a','assign','sign','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','disabled\x20Bot\x20','readdirSync','success','secret','settings','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','child_process','generateKeyPairAsync','/:bot','existsSync','320yrcDhD','value','Token\x20blacklisted','All','bbvNew','temporary\x20token\x20generated','251834qwITei','onText','pidExpireLogin','Starting\x20Balance\x20Bot\x20update','initclient','timestamp','reject','Bot\x20','No\x20bots\x20running\x20right\x20now','stopPolling','http','login\x20not\x20required','2272NTDKsz','get-logs','mode','allow','telegramUsername','createServer','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','remove','*$1*','express','getTime','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached',',\x20must\x20be\x20a\x204\x20digit\x20number','index.html','\x20to\x20','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','533358wNbikz','lastmsgemitted','idling\x20bot\x20\x20\x20|\x20Bot\x20','toIPv4Address','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Notifications\x20disabled\x0a','timeshift','<b>Telegram\x20Bot\x20Status:</b>\x0a','update-bb','telegramEnabled','get-messages','lastmsgtelegram','telegrammsg','stop','jsonwebtoken','getMonth','build','function','host','alerts','toString','getDate','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','server','chat','2FA\x20login\x20required','mixpanel','Unauthorized\x20attempt\x20to\x20get\x20logs','entries','join','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','kind','2FA','exp','User\x20has\x20been\x20validated','RSA','type','isValid','status','password','copyFileSync','toggleBotMode','auth','f2aRequired','starting\x20bot\x20|\x20Bot\x20','inherit','mkdirSync','logout','sendFile','defaults','Unauthorized\x20login\x20attempt\x20(timeout)','conn','uuid-random','No\x20authentication\x20token','error\x20while\x20deleting\x20config\x20files:\x20','/:bot/portfolio','botname','fork','0.0.0','Notifications\x20types:\x20','any','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Unauthorized\x20attempt\x20to\x20confirm\x20message','Unauthorized\x20attempt\x20to\x20log\x20out','Server','request','Invalid\x20username\x20or\x20IP\x20address','from','log','telegram','telegramToken','sha256','access','$1_$2_$3','getUTCHours','/:bot/performance','Invalid\x20Telegram\x20token','exit','removeAllListeners','userid','bbvReceive','latestversion','1068nrBwOI','enabled','argv','Unauthorized\x20attempt\x20to\x20update\x20settings','bots','store','referer','stopped','lowdb/adapters/FileSync','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','forEach','polling_error','handshake','use','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','\x20|\x20','7dbKMLo','\x20mode','connected','579464KCcNnn','bb/','showname','get-portfolio','hasOwnProperty','login','new','yes','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20store\x20configuration','logged\x20out','login\x20token\x20valid','HTML'];_0x2849=function(){return _0x3591e3;};return _0x2849();}function validateTelegram(_0xccb021){const _0x8ecfcf=_0x31ba24;if(_0xccb021[_0x8ecfcf(0x203)]['username']!=settings[_0x8ecfcf(0x1b2)]&&'@'+_0xccb021['from']['username']!=settings[_0x8ecfcf(0x1b2)])return tgBot[_0x8ecfcf(0x11c)](_0xccb021[_0x8ecfcf(0x1d6)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'})['catch'](_0x571336=>{telegramError(_0x571336);}),![];return!![];}async function initTelegram(){const _0x328205=_0x31ba24;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x1c3b82=_0x328205(0x12a);_0x1c3b82+='\x0a',_0x1c3b82+='/enable\x20-\x20enable\x20notifications\x0a',_0x1c3b82+='/disable\x20-\x20disable\x20notifications\x0a',_0x1c3b82+=_0x328205(0x23f),_0x1c3b82+=_0x328205(0x120),_0x1c3b82+=_0x328205(0xc2),_0x1c3b82+=_0x328205(0x143),_0x1c3b82+=_0x328205(0x1c2),_0x1c3b82+=_0x328205(0xd1),_0x1c3b82+=_0x328205(0x136),_0x1c3b82+=_0x328205(0x116),_0x1c3b82+=_0x328205(0x18e),_0x1c3b82+=_0x328205(0x16d);let _0x1b5eb9=_0x328205(0xe6);_0x1b5eb9+='\x0a',_0x1b5eb9+=_0x1c3b82,tgBot['onText'](/\/start/,_0x4eda44=>{const _0x20d17=_0x328205;if(!validateTelegram(_0x4eda44))return;if(settings[_0x20d17(0x163)]!=_0x4eda44[_0x20d17(0x1d6)]['id'])updateSetting(_0x20d17(0x163),_0x4eda44['chat']['id']);updateSetting(_0x20d17(0x1c7),!![]),tgBot[_0x20d17(0x11c)](_0x4eda44[_0x20d17(0x1d6)]['id'],_0x1b5eb9)[_0x20d17(0xc3)](_0x426058=>{telegramError(_0x426058);});}),tgBot['onText'](/\/enable/,_0x3ec141=>{const _0xa0c483=_0x328205;if(!validateTelegram(_0x3ec141))return;if(settings[_0xa0c483(0x163)]!=_0x3ec141['chat']['id'])updateSetting(_0xa0c483(0x163),_0x3ec141[_0xa0c483(0x1d6)]['id']);updateSetting(_0xa0c483(0x1c7),!![]),tgBot[_0xa0c483(0x11c)](_0x3ec141[_0xa0c483(0x1d6)]['id'],'Notifications\x20enabled')[_0xa0c483(0xc3)](_0x7e930e=>{telegramError(_0x7e930e);});}),tgBot[_0x328205(0x1a3)](/\/config/,async _0x3f047d=>{const _0x404aff=_0x328205;if(!validateTelegram(_0x3f047d))return;tgBot[_0x404aff(0x131)](_0x404aff(0xef)),tgBot['sendMessage'](_0x3f047d[_0x404aff(0x1d6)]['id'],_0x404aff(0x180),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x404aff(0xf9)},{'text':_0x404aff(0xe5),'callback_data':_0x404aff(0x1d1)},{'text':_0x404aff(0x19f),'callback_data':'all'}]]}})[_0x404aff(0xc3)](_0x3866d4=>{telegramError(_0x3866d4);}),tgBot['on'](_0x404aff(0xef),async _0x555875=>{const _0x59cc94=_0x404aff,_0x212474=_0x555875['data'],_0x34381d=_0x555875[_0x59cc94(0x123)];tgBot[_0x59cc94(0xd8)](_0x555875['id'])[_0x59cc94(0x121)](async()=>{const _0x2d0870=_0x59cc94;_0x212474=='orders'&&(updateSetting(_0x2d0870(0x122),_0x2d0870(0xf9)),updateSetting(_0x2d0870(0x1c7),!![]),await tgBot['sendMessage'](_0x34381d['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x13357b=>{telegramError(_0x13357b);}));_0x212474==_0x2d0870(0x1d1)&&(updateSetting(_0x2d0870(0x122),_0x2d0870(0x1d1)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2d0870(0x11c)](_0x34381d['chat']['id'],_0x2d0870(0x130))[_0x2d0870(0xc3)](_0xd34406=>{telegramError(_0xd34406);}));_0x212474==_0x2d0870(0x134)&&(updateSetting(_0x2d0870(0x122),_0x2d0870(0x134)),updateSetting(_0x2d0870(0x1c7),!![]),await tgBot[_0x2d0870(0x11c)](_0x34381d['chat']['id'],_0x2d0870(0xff))['catch'](_0x2c5668=>{telegramError(_0x2c5668);}));if(!settings['telegramChatId'])tgBot[_0x2d0870(0x11c)](_0x34381d[_0x2d0870(0x1d6)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2d0870(0xc3)](_0x224140=>{telegramError(_0x224140);});}),tgBot[_0x59cc94(0x131)](_0x59cc94(0xef));});}),tgBot['onText'](/\/status/,_0x1b6e0d=>{const _0x27385a=_0x328205;if(!validateTelegram(_0x1b6e0d))return;const _0xcdb90f=getBotsWithMode();let _0x4539d1=_0x27385a(0x18c);config[_0x27385a(0x21c)](_0x35ed59=>{const _0x446334=_0x27385a,_0x16277b=_0xcdb90f[_0x446334(0x178)](_0x4c0350=>_0x4c0350[_0x446334(0x147)]==_0x35ed59[_0x446334(0x147)])[_0x446334(0x1b0)];_0x4539d1+=_0x446334(0x1a9)+_0x35ed59[_0x446334(0x147)]+':\x20'+_0x35ed59[_0x446334(0x1e4)]+'\x20|\x20'+_0x16277b+_0x446334(0x221)+_0x35ed59[_0x446334(0x18d)]+'\x0a';}),_0x4539d1+='\x0a',_0x4539d1+=_0x27385a(0x1c5),_0x4539d1+=!settings['telegramEnabled']?_0x27385a(0x1c3):'Notifications\x20enabled\x0a',_0x4539d1+=settings[_0x27385a(0x1c7)]?settings[_0x27385a(0x122)]==_0x27385a(0x134)?_0x27385a(0x14a):_0x27385a(0x1f9)+settings['telegramEvents']+_0x27385a(0x17a):'',tgBot['sendMessage'](_0x1b6e0d[_0x27385a(0x1d6)]['id'],_0x4539d1,{'parse_mode':'HTML'})[_0x27385a(0xc3)](_0x2d96ad=>{telegramError(_0x2d96ad);});}),tgBot['onText'](/\/restart/,_0x3a3e0d=>{const _0x4cbb02=_0x328205;if(!validateTelegram(_0x3a3e0d))return;tgBot[_0x4cbb02(0x131)]('callback_query');const _0x151d5e=getEnabledBots();if(_0x151d5e[_0x4cbb02(0xc0)]==0x0)tgBot[_0x4cbb02(0x11c)](_0x3a3e0d[_0x4cbb02(0x1d6)]['id'],_0x4cbb02(0x1aa))[_0x4cbb02(0xc3)](_0x4594c1=>{telegramError(_0x4594c1);});else{if(_0x151d5e['length']>0x1)_0x151d5e['push']({'botID':'all'});let _0x5dd999=[],_0x3509de=[];const _0x1f788f=_0x151d5e[_0x4cbb02(0xc0)]%0x4==0x0||_0x151d5e[_0x4cbb02(0xc0)]%0x4==0x3||_0x151d5e[_0x4cbb02(0xc0)]%0x3==0x1?0x4:0x3;let _0x154665=0x0;_0x151d5e['forEach']((_0x22ac58,_0x5da0bd)=>{const _0x524f10=_0x4cbb02;if(_0x5da0bd%_0x1f788f==0x0)_0x3509de=[];_0x3509de[_0x524f10(0x154)]({'text':_0x22ac58[_0x524f10(0x147)]=='all'?_0x524f10(0xfa):_0x524f10(0x1a9)+_0x22ac58[_0x524f10(0x147)],'callback_data':_0x22ac58[_0x524f10(0x147)]}),_0x5da0bd%_0x1f788f==0x0&&(_0x5dd999[_0x154665]=_0x3509de,_0x154665++);}),tgBot[_0x4cbb02(0x11c)](_0x3a3e0d[_0x4cbb02(0x1d6)]['id'],_0x4cbb02(0x220),{'reply_markup':{'inline_keyboard':_0x5dd999}})[_0x4cbb02(0xc3)](_0xa8f777=>{telegramError(_0xa8f777);}),tgBot['on']('callback_query',async _0x187a1f=>{const _0x376ba8=_0x4cbb02,_0x4ffc5a=_0x187a1f[_0x376ba8(0x23a)],_0x596073=_0x187a1f[_0x376ba8(0x123)];tgBot[_0x376ba8(0xd8)](_0x187a1f['id'])['then'](async()=>{const _0x589c7a=_0x376ba8;_0x4ffc5a==_0x589c7a(0x134)?(tgBot[_0x589c7a(0x11c)](_0x596073['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x32624e=>{telegramError(_0x32624e);}),config[_0x589c7a(0x21c)](_0x4f2bdb=>{const _0x311f97=_0x589c7a;restartBot(_0x4f2bdb[_0x311f97(0x147)]);})):(tgBot[_0x589c7a(0x11c)](_0x596073[_0x589c7a(0x1d6)]['id'],_0x589c7a(0x14d)+_0x4ffc5a)[_0x589c7a(0xc3)](_0x38dc66=>{telegramError(_0x38dc66);}),restartBot(_0x4ffc5a));}),tgBot['removeListener'](_0x376ba8(0xef));});}}),tgBot['onText'](/\/on/,_0xf768d=>{const _0x459e90=_0x328205;if(!validateTelegram(_0xf768d))return;tgBot[_0x459e90(0x131)](_0x459e90(0xef));const _0x3d1909=getDisabledBots();if(_0x3d1909[_0x459e90(0xc0)]==0x0)tgBot[_0x459e90(0x11c)](_0xf768d[_0x459e90(0x1d6)]['id'],_0x459e90(0xc6))[_0x459e90(0xc3)](_0x345b88=>{telegramError(_0x345b88);});else{if(_0x3d1909[_0x459e90(0xc0)]>0x1)_0x3d1909[_0x459e90(0x154)]({'botID':_0x459e90(0x134)});let _0x42bb9a=[],_0x158b01=[];const _0x21d1f2=_0x3d1909[_0x459e90(0xc0)]%0x4==0x0||_0x3d1909['length']%0x4==0x3||_0x3d1909['length']%0x3==0x1?0x4:0x3;let _0x3c5845=0x0;_0x3d1909[_0x459e90(0x21c)]((_0x16effd,_0x593f42)=>{const _0x562708=_0x459e90;if(_0x593f42%_0x21d1f2==0x0)_0x158b01=[];_0x158b01[_0x562708(0x154)]({'text':_0x16effd[_0x562708(0x147)]==_0x562708(0x134)?'All\x20bots':'Bot\x20'+_0x16effd['botID'],'callback_data':_0x16effd[_0x562708(0x147)]}),_0x593f42%_0x21d1f2==0x0&&(_0x42bb9a[_0x3c5845]=_0x158b01,_0x3c5845++);}),tgBot[_0x459e90(0x11c)](_0xf768d[_0x459e90(0x1d6)]['id'],_0x459e90(0x1b4),{'reply_markup':{'inline_keyboard':_0x42bb9a}})['catch'](_0x5ce5be=>{telegramError(_0x5ce5be);}),tgBot['on']('callback_query',async _0xb3e087=>{const _0x42b1c4=_0x459e90,_0x1764f8=_0xb3e087[_0x42b1c4(0x23a)],_0x338af3=_0xb3e087[_0x42b1c4(0x123)];tgBot[_0x42b1c4(0xd8)](_0xb3e087['id'])[_0x42b1c4(0x121)](async()=>{const _0x32d40a=_0x42b1c4;_0x1764f8==_0x32d40a(0x134)?(tgBot['sendMessage'](_0x338af3[_0x32d40a(0x1d6)]['id'],_0x32d40a(0x16c))[_0x32d40a(0xc3)](_0x1bb75a=>{telegramError(_0x1bb75a);}),_0x3d1909[_0x32d40a(0x21c)](_0x1251a7=>{const _0x3d340d=_0x32d40a;if(_0x1251a7['botID']!=_0x3d340d(0x134))toggleBot(_0x1251a7[_0x3d340d(0x147)],toggleStatus(_0x1251a7[_0x3d340d(0x147)]),_0x3d340d(0x219));})):(tgBot['sendMessage'](_0x338af3['chat']['id'],_0x32d40a(0xd3)+_0x1764f8)[_0x32d40a(0xc3)](_0x5e7ff4=>{telegramError(_0x5e7ff4);}),toggleBot(_0x1764f8,toggleStatus(_0x1764f8),_0x32d40a(0x219)));}),tgBot[_0x42b1c4(0x131)]('callback_query');});}}),tgBot[_0x328205(0x1a3)](/\/off/,_0x5650da=>{const _0x1a2333=_0x328205;if(!validateTelegram(_0x5650da))return;tgBot[_0x1a2333(0x131)]('callback_query');const _0x22877b=getEnabledBots();if(_0x22877b[_0x1a2333(0xc0)]==0x0)tgBot[_0x1a2333(0x11c)](_0x5650da[_0x1a2333(0x1d6)]['id'],_0x1a2333(0x1aa))['catch'](_0x19731d=>{telegramError(_0x19731d);});else{if(_0x22877b[_0x1a2333(0xc0)]>0x1)_0x22877b[_0x1a2333(0x154)]({'botID':'all'});let _0x4bfc26=[],_0x53db80=[];const _0x79aa2=_0x22877b['length']%0x4==0x0||_0x22877b[_0x1a2333(0xc0)]%0x4==0x3||_0x22877b[_0x1a2333(0xc0)]%0x3==0x1?0x4:0x3;let _0x44236d=0x0;_0x22877b[_0x1a2333(0x21c)]((_0x14216b,_0x296b33)=>{const _0x5c7928=_0x1a2333;if(_0x296b33%_0x79aa2==0x0)_0x53db80=[];_0x53db80[_0x5c7928(0x154)]({'text':_0x14216b[_0x5c7928(0x147)]==_0x5c7928(0x134)?_0x5c7928(0xfa):_0x5c7928(0x1a9)+_0x14216b[_0x5c7928(0x147)],'callback_data':_0x14216b['botID']}),_0x296b33%_0x79aa2==0x0&&(_0x4bfc26[_0x44236d]=_0x53db80,_0x44236d++);}),tgBot[_0x1a2333(0x11c)](_0x5650da[_0x1a2333(0x1d6)]['id'],_0x1a2333(0x191),{'reply_markup':{'inline_keyboard':_0x4bfc26}})[_0x1a2333(0xc3)](_0x1e9416=>{telegramError(_0x1e9416);}),tgBot['on'](_0x1a2333(0xef),async _0x593134=>{const _0x52daf6=_0x1a2333,_0x3f28b6=_0x593134[_0x52daf6(0x23a)],_0x6224bd=_0x593134[_0x52daf6(0x123)];tgBot[_0x52daf6(0xd8)](_0x593134['id'])[_0x52daf6(0x121)](async()=>{const _0x30c646=_0x52daf6;_0x3f28b6=='all'?(tgBot[_0x30c646(0x11c)](_0x6224bd[_0x30c646(0x1d6)]['id'],_0x30c646(0x22d))[_0x30c646(0xc3)](_0x1f4f25=>{telegramError(_0x1f4f25);}),_0x22877b[_0x30c646(0x21c)](_0x17ecda=>{const _0x29062e=_0x30c646;if(_0x17ecda[_0x29062e(0x147)]!=_0x29062e(0x134))toggleBot(_0x17ecda[_0x29062e(0x147)],toggleStatus(_0x17ecda[_0x29062e(0x147)]),'stopped');})):(tgBot['sendMessage'](_0x6224bd[_0x30c646(0x1d6)]['id'],_0x30c646(0x1dc)+_0x3f28b6)[_0x30c646(0xc3)](_0x5c1a6a=>{telegramError(_0x5c1a6a);}),toggleBot(_0x3f28b6,toggleStatus(_0x3f28b6),_0x30c646(0x219)));}),tgBot[_0x52daf6(0x131)](_0x52daf6(0xef));});}}),tgBot[_0x328205(0x1a3)](/\/portfolio/,_0xd5eb95=>{const _0x38cc62=_0x328205;if(!validateTelegram(_0xd5eb95))return;tgBot['removeListener'](_0x38cc62(0xef));const _0x1e9703=getEnabledBots();if(_0x1e9703[_0x38cc62(0xc0)]==0x0)tgBot[_0x38cc62(0x11c)](_0xd5eb95['chat']['id'],_0x38cc62(0x1aa))[_0x38cc62(0xc3)](_0xe96d3b=>{telegramError(_0xe96d3b);});else{if(_0x1e9703[_0x38cc62(0xc0)]>0x1){let _0x5ea15f=[],_0x41a754=[];const _0x4dd2fe=_0x1e9703[_0x38cc62(0xc0)]%0x4==0x0||_0x1e9703['length']%0x4==0x3||_0x1e9703[_0x38cc62(0xc0)]%0x3==0x1?0x4:0x3;let _0x1b8e33=0x0;_0x1e9703[_0x38cc62(0x21c)]((_0x16827b,_0x4ce0f9)=>{const _0x4dd36a=_0x38cc62;if(_0x4ce0f9%_0x4dd2fe==0x0)_0x41a754=[];_0x41a754['push']({'text':_0x4dd36a(0x1a9)+_0x16827b[_0x4dd36a(0x147)],'callback_data':_0x16827b[_0x4dd36a(0x147)]}),_0x4ce0f9%_0x4dd2fe==0x0&&(_0x5ea15f[_0x1b8e33]=_0x41a754,_0x1b8e33++);}),tgBot[_0x38cc62(0x11c)](_0xd5eb95[_0x38cc62(0x1d6)]['id'],_0x38cc62(0x15f),{'reply_markup':{'inline_keyboard':_0x5ea15f}})['catch'](_0x29c73=>{telegramError(_0x29c73);}),tgBot['on'](_0x38cc62(0xef),async _0x36067b=>{const _0x278fa8=_0x38cc62,_0x117292=_0x36067b[_0x278fa8(0x23a)],_0x115996=_0x36067b[_0x278fa8(0x123)];tgBot[_0x278fa8(0xd8)](_0x36067b['id'])['then'](async()=>{const _0x4ddbcb=_0x278fa8;if(pid[_0x117292])pid[_0x117292][_0x4ddbcb(0x138)]({'function':_0x4ddbcb(0x101),'args':null});}),tgBot[_0x278fa8(0x131)](_0x278fa8(0xef));});}else{const _0x774688=_0x1e9703[0x0][_0x38cc62(0x147)];if(pid[_0x774688])pid[_0x774688][_0x38cc62(0x138)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x328205(0x1a3)](/\/update/,async _0x40f0eb=>{const _0x55faa0=_0x328205;if(!validateTelegram(_0x40f0eb))return;tgBot[_0x55faa0(0x131)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x55faa0(0x11c)](_0x40f0eb['chat']['id'],_0x55faa0(0x1fd))[_0x55faa0(0xc3)](_0x59429b=>{telegramError(_0x59429b);});else!validInstallation?tgBot['sendMessage'](_0x40f0eb[_0x55faa0(0x1d6)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x3221d5=>{telegramError(_0x3221d5);}):(tgBot[_0x55faa0(0x11c)](_0x40f0eb[_0x55faa0(0x1d6)]['id'],_0x55faa0(0x1fc),{'reply_markup':{'inline_keyboard':[[{'text':_0x55faa0(0x189),'callback_data':_0x55faa0(0x22c)},{'text':'No','callback_data':'no'}]]}})[_0x55faa0(0xc3)](_0x1a8e41=>{telegramError(_0x1a8e41);}),tgBot['on'](_0x55faa0(0xef),async _0x3a863b=>{const _0x3e2be3=_0x55faa0,_0x3bf103=_0x3a863b[_0x3e2be3(0x23a)],_0x503b0f=_0x3a863b[_0x3e2be3(0x123)];tgBot[_0x3e2be3(0xd8)](_0x3a863b['id'])[_0x3e2be3(0x121)](async()=>{const _0x6ee97d=_0x3e2be3;_0x3bf103==_0x6ee97d(0x22c)&&(await tgBot[_0x6ee97d(0x11c)](_0x503b0f[_0x6ee97d(0x1d6)]['id'],_0x6ee97d(0x1a5))[_0x6ee97d(0xc3)](_0x42a350=>{telegramError(_0x42a350);}),updateBB());_0x3bf103=='no'&&await tgBot['sendMessage'](_0x503b0f[_0x6ee97d(0x1d6)]['id'],_0x6ee97d(0xc4))[_0x6ee97d(0xc3)](_0x54e527=>{telegramError(_0x54e527);});if(!settings[_0x6ee97d(0x163)])tgBot[_0x6ee97d(0x11c)](_0x503b0f[_0x6ee97d(0x1d6)]['id'],_0x6ee97d(0x21b))[_0x6ee97d(0xc3)](_0x50bdf9=>{telegramError(_0x50bdf9);});}),tgBot[_0x3e2be3(0x131)]('callback_query');}));}),tgBot['onText'](/\/toggle/,_0x5370bf=>{const _0x2d0e8e=_0x328205;if(!validateTelegram(_0x5370bf))return;tgBot['removeListener'](_0x2d0e8e(0xef));const _0x3784b7=getBotsWithMode();if(_0x3784b7[_0x2d0e8e(0xc0)]==0x0)tgBot[_0x2d0e8e(0x11c)](_0x5370bf[_0x2d0e8e(0x1d6)]['id'],_0x2d0e8e(0x1aa))[_0x2d0e8e(0xc3)](_0x357e45=>{telegramError(_0x357e45);});else{let _0x52a5c=[],_0x250b49=[];const _0x18e3d4=0x2;let _0x4e4ce5=0x0;_0x3784b7['forEach']((_0x1f0dd5,_0x39cc3c)=>{const _0x580a43=_0x2d0e8e;if(_0x39cc3c%_0x18e3d4==0x0)_0x250b49=[];_0x250b49[_0x580a43(0x154)]({'text':_0x580a43(0x1a9)+_0x1f0dd5[_0x580a43(0x147)]+'\x20('+_0x1f0dd5[_0x580a43(0x1b0)]+')','callback_data':_0x1f0dd5[_0x580a43(0x147)]}),_0x39cc3c%_0x18e3d4==0x0&&(_0x52a5c[_0x4e4ce5]=_0x250b49,_0x4e4ce5++);}),tgBot['sendMessage'](_0x5370bf[_0x2d0e8e(0x1d6)]['id'],_0x2d0e8e(0x12b),{'reply_markup':{'inline_keyboard':_0x52a5c}})[_0x2d0e8e(0xc3)](_0x423841=>{telegramError(_0x423841);}),tgBot['on'](_0x2d0e8e(0xef),async _0xf1b65=>{const _0x477f83=_0x2d0e8e,_0x413c08=_0xf1b65[_0x477f83(0x23a)],_0x9c0d70=_0xf1b65[_0x477f83(0x123)];tgBot[_0x477f83(0xd8)](_0xf1b65['id'])[_0x477f83(0x121)](async()=>{const _0x1b27ac=_0x477f83,_0x33c4f8=_0x3784b7['find'](_0x138592=>_0x138592[_0x1b27ac(0x147)]==_0x413c08),_0x329269=_0x33c4f8[_0x1b27ac(0x1b0)]==_0x1b27ac(0x119)?_0x1b27ac(0x104):'auto';tgBot[_0x1b27ac(0x11c)](_0x9c0d70[_0x1b27ac(0x1d6)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x413c08+_0x1b27ac(0x1bc)+_0x329269+_0x1b27ac(0x223))['catch'](_0xe1afde=>{telegramError(_0xe1afde);}),toggleBotMode(_0x413c08);}),tgBot[_0x477f83(0x131)](_0x477f83(0xef));});}}),tgBot[_0x328205(0x1a3)](/\/names/,_0x412249=>{const _0x568b4d=_0x328205;if(!validateTelegram(_0x412249))return;let _0x2d9cc7='';config[_0x568b4d(0x21c)](_0x4f45ee=>{const _0x5e0708=_0x568b4d;_0x2d9cc7+=_0x5e0708(0x1a9)+_0x4f45ee['botID']+':\x20'+_0x4f45ee[_0x5e0708(0x1f6)]+'\x0a';}),tgBot[_0x568b4d(0x11c)](_0x412249[_0x568b4d(0x1d6)]['id'],_0x2d9cc7,{'parse_mode':'HTML'})['catch'](_0x89e680=>{telegramError(_0x89e680);});}),tgBot[_0x328205(0x1a3)](/\/disable/,_0x187b51=>{const _0x56ffbb=_0x328205;if(!validateTelegram(_0x187b51))return;tgBot[_0x56ffbb(0x11c)](_0x187b51[_0x56ffbb(0x1d6)]['id'],'Notifications\x20disabled')[_0x56ffbb(0xc3)](_0xffde1f=>{telegramError(_0xffde1f);}),updateSetting(_0x56ffbb(0x1c7),![]);}),tgBot['onText'](/\/help/,_0x1f0260=>{const _0x5481d5=_0x328205;if(!validateTelegram(_0x1f0260))return;tgBot[_0x5481d5(0x11c)](_0x1f0260[_0x5481d5(0x1d6)]['id'],_0x1c3b82)['catch'](_0x481009=>{telegramError(_0x481009);});}),tgBot['on'](_0x328205(0x21d),_0x2d2a77=>{const _0x431a03=_0x328205;_0x2d2a77[_0x431a03(0x1d2)]()[_0x431a03(0x172)]('404\x20Not\x20Found')&&(logging(_0x431a03(0x20c)),tgBot[_0x431a03(0x1ab)](),tgBot=null,io['to']('botmanager')[_0x431a03(0xf8)](_0x431a03(0x17e),_0x431a03(0x20c)));}),process[_0x328205(0x11b)]('SIGINT',()=>{const _0x27274f=_0x328205;if(tgBot)tgBot[_0x27274f(0x1ab)]();process[_0x27274f(0x20d)](0x1);}),process[_0x328205(0x11b)](_0x328205(0x117),()=>{const _0xa001ca=_0x328205;if(tgBot)tgBot[_0xa001ca(0x1ab)]();process[_0xa001ca(0x20d)](0x1);});}}function disableTelegram(){const _0x424dd=_0x31ba24;tgBot&&(tgBot[_0x424dd(0x1ab)](),tgBot=null);}function sendTelegram(_0x3ea02d,_0xb560d4){const _0x2748c7=_0x31ba24;if(settings['telegramEnabled']){if(settings[_0x2748c7(0x122)]==_0x2748c7(0x134)||(_0xb560d4[_0x2748c7(0x1e2)]==_0x2748c7(0x111)||_0xb560d4['type']==_0x2748c7(0x194))&&settings[_0x2748c7(0x122)]==_0x2748c7(0x1d1)||_0xb560d4['type']=='order'&&settings['telegramEvents']==_0x2748c7(0xf9)){if(tgBot&&settings[_0x2748c7(0x163)]){if(_0xb560d4[_0x2748c7(0x227)])tgBot[_0x2748c7(0x11c)](settings[_0x2748c7(0x163)],_0xb560d4[_0x2748c7(0x1f6)]+_0x2748c7(0xfb)+_0xb560d4[_0x2748c7(0x133)])[_0x2748c7(0xc3)](_0x1354a4=>{telegramError(_0x1354a4);});else tgBot[_0x2748c7(0x11c)](settings['telegramChatId'],'Bot\x20'+_0x3ea02d+_0x2748c7(0xfb)+_0xb560d4['event'])['catch'](_0x3815c2=>{telegramError(_0x3815c2);});}}}}async function sendTelegramMsg(_0x264466,_0x5742e8='HTML'){const _0x2e6840=_0x31ba24;return settings[_0x2e6840(0x1c7)]&&tgBot&&settings[_0x2e6840(0x163)]?(await tgBot[_0x2e6840(0x11c)](settings[_0x2e6840(0x163)],_0x264466,{'parse_mode':_0x5742e8})['catch'](_0x21f1c2=>{telegramError(_0x21f1c2);}),!![]):![];}function getDeviceWithIp(_0x525e0b){const _0xc3d084=_0x31ba24;return devices[_0xc3d084(0x178)](_0x1d0c1c=>_0x1d0c1c['ip']===_0x525e0b);}function temporaryAccess2FA(_0x1a5692,_0x3b3661){const _0x45b13b=_0x31ba24;let _0x402223=new Date(),_0x20bca9=![];if(lastIpApproval){if(_0x402223-lastIpApproval<0x1388)_0x20bca9=!![];}lastIpApproval=new Date();if(_0x20bca9)return;tgBot&&settings[_0x45b13b(0x163)]&&(tgBot[_0x45b13b(0x131)](_0x45b13b(0xef)),tgBot[_0x45b13b(0x11c)](settings[_0x45b13b(0x163)],_0x45b13b(0x1fb)+normalizeIP(_0x3b3661)[_0x45b13b(0xd2)]+_0x45b13b(0x156),{'parse_mode':_0x45b13b(0x231),'reply_markup':{'inline_keyboard':[[{'text':_0x45b13b(0xea),'callback_data':'5'},{'text':_0x45b13b(0x132),'callback_data':'15'},{'text':_0x45b13b(0xc9),'callback_data':'30'},{'text':_0x45b13b(0x1a8),'callback_data':_0x45b13b(0x1a8)}]]}})[_0x45b13b(0xc3)](_0x1d7bea=>{telegramError(_0x1d7bea);}),tgBot['on']('callback_query',async _0x430853=>{const _0x501848=_0x45b13b,_0x206143=_0x430853['data'],_0x5c0791=_0x430853[_0x501848(0x123)];tgBot[_0x501848(0xd8)](_0x430853['id'])['then'](async()=>{const _0x3b48e6=_0x501848;devices[_0x1a5692]['telegramIpApproval']={'clientip':_0x3b3661,'timestamp':new Date()[_0x3b48e6(0x1b8)](),'expiry':_0x206143},_0x206143!=_0x3b48e6(0x1a8)?(await tgBot[_0x3b48e6(0x11c)](_0x5c0791[_0x3b48e6(0x1d6)]['id'],'Access\x20enabled\x20for\x20'+_0x206143+_0x3b48e6(0x150),{'parse_mode':'HTML'})[_0x3b48e6(0xc3)](_0x4b36a4=>{telegramError(_0x4b36a4);}),io['to'](_0x1a5692)[_0x3b48e6(0xf8)](_0x3b48e6(0x1e4),{'access':{'allow':![],'reason':_0x3b48e6(0x15b),'token':null}})):(await tgBot['sendMessage'](_0x5c0791['chat']['id'],'Temporary\x20access\x20rejected')[_0x3b48e6(0xc3)](_0x340af7=>{telegramError(_0x340af7);}),io['to'](_0x1a5692)[_0x3b48e6(0xf8)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x501848(0x131)](_0x501848(0xef));}));}function loginAccess2FA(_0x169a2a,_0x506e20){const _0x237ad4=_0x31ba24;tgBot&&settings[_0x237ad4(0x163)]&&(tgBot['removeListener'](_0x237ad4(0xef)),tgBot[_0x237ad4(0x11c)](settings['telegramChatId'],_0x237ad4(0x162)+normalizeIP(_0x506e20)['show']+_0x237ad4(0x156),{'parse_mode':_0x237ad4(0x231),'reply_markup':{'inline_keyboard':[[{'text':_0x237ad4(0xec),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x237ad4(0x1a8)}]]}})[_0x237ad4(0xc3)](_0xdf7f0a=>{telegramError(_0xdf7f0a);}),tgBot['on'](_0x237ad4(0xef),async _0x563d16=>{const _0x182693=_0x237ad4,_0x244cb2=_0x563d16[_0x182693(0x23a)],_0x3e203c=_0x563d16[_0x182693(0x123)];tgBot[_0x182693(0xd8)](_0x563d16['id'])['then'](async()=>{const _0x15ab4d=_0x182693;devices[_0x169a2a][_0x15ab4d(0x159)]={'clientip':_0x506e20,'timestamp':new Date()[_0x15ab4d(0x1b8)](),'expiry':_0x244cb2},_0x244cb2!=_0x15ab4d(0x1a8)?(await tgBot[_0x15ab4d(0x11c)](_0x3e203c[_0x15ab4d(0x1d6)]['id'],_0x15ab4d(0xe4),{'parse_mode':'HTML'})[_0x15ab4d(0xc3)](_0x39b6dc=>{telegramError(_0x39b6dc);}),io['to'](_0x169a2a)[_0x15ab4d(0xf8)](_0x15ab4d(0x1e4),{'access':{'allow':![],'reason':_0x15ab4d(0x15b),'token':null}})):(await tgBot['sendMessage'](_0x3e203c[_0x15ab4d(0x1d6)]['id'],_0x15ab4d(0x234))['catch'](_0x2f89c5=>{telegramError(_0x2f89c5);}),io['to'](_0x169a2a)['emit']('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x182693(0x131)](_0x182693(0xef));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4dbb40=_0x31ba24;return dbConfig[_0x4dbb40(0x146)]('bots')[_0x4dbb40(0xf4)](_0x4dbb40(0x147))[_0x4dbb40(0x157)]({'status':'enabled'})[_0x4dbb40(0x19d)]()||[];}function getDisabledBots(){const _0x483618=_0x31ba24;return dbConfig[_0x483618(0x146)](_0x483618(0x216))[_0x483618(0xf4)]('botID')[_0x483618(0x157)]({'status':_0x483618(0x238)})[_0x483618(0x19d)]()||[];}function getBotsWithMode(){const _0x1fd0be=_0x31ba24,_0x1cf3c3=dbConfig[_0x1fd0be(0x146)](_0x1fd0be(0x216))['sortBy'](_0x1fd0be(0x147))[_0x1fd0be(0x19d)]()||[];return _0x1cf3c3[_0x1fd0be(0x21c)](_0x2d65df=>{const _0xb7657e=_0x1fd0be,_0x46fdaa=configpath+'bot-'+_0x2d65df[_0xb7657e(0x147)]+_0xb7657e(0x118),_0x42cf9b=fs[_0xb7657e(0x19b)](_0x46fdaa);if(_0x42cf9b){const _0x160a66=fs[_0xb7657e(0x145)](_0x46fdaa);try{const _0x11cf82=JSON[_0xb7657e(0x171)](_0x160a66),_0x9b8418=_0x11cf82?_0x11cf82[_0xb7657e(0xe2)][0x0]['headless']:![];_0x2d65df[_0xb7657e(0x1b0)]=_0x9b8418?_0xb7657e(0x119):_0xb7657e(0x104);}catch(_0x249325){_0x2d65df['mode']=_0xb7657e(0x104);}}else _0x2d65df[_0xb7657e(0x1b0)]=_0xb7657e(0x104);}),_0x1cf3c3;}async function initUser(){const _0x58819d=_0x31ba24;if(!settings['userid']){const _0x31f547=uuidRandom();mixpanel['alias'](_0x31f547),updateSetting(_0x58819d(0x20f),_0x31f547);}}async function initSecure(){const _0x9ecd17=_0x31ba24;let _0x5b0e48=getSecure();if(!_0x5b0e48[_0x9ecd17(0x229)](_0x9ecd17(0x195))){let _0x32f769=await generateKeys();_0x5b0e48['publicKey']=_0x32f769[_0x9ecd17(0xdc)],_0x5b0e48[_0x9ecd17(0xfc)]=_0x32f769[_0x9ecd17(0xfc)],_0x5b0e48['secret']=crypto[_0x9ecd17(0x107)](0x20)['toString'](_0x9ecd17(0x109));;storeSecure(_0x5b0e48);}}function getSettings(){const _0x21d49f=_0x31ba24;return dbSettings[_0x21d49f(0x146)](_0x21d49f(0x196))[_0x21d49f(0x19d)]()||{};}function getSecure(){const _0x5ec1b3=_0x31ba24;return dbSecure[_0x5ec1b3(0x146)](_0x5ec1b3(0xd4))[_0x5ec1b3(0x19d)]()||{};}function _0x5bcb(_0x559a17,_0x12b814){const _0x364b2d=_0x2849();return _0x5bcb=function(_0x53c495,_0x3731b9){_0x53c495=_0x53c495-0xbe;let _0x284981=_0x364b2d[_0x53c495];return _0x284981;},_0x5bcb(_0x559a17,_0x12b814);}function getBlacklist(){const _0x5e2f04=_0x31ba24;return dbSecure[_0x5e2f04(0x146)]('blacklist')[_0x5e2f04(0x19d)]()||[];}function broadcastToBots(_0x4ee755,_0x2d74f2){const _0x2a1452=_0x31ba24;config[_0x2a1452(0x21c)](_0x408d42=>{const _0x14ea35=_0x2a1452;if(_0x408d42['status']==_0x14ea35(0x213)&&_0x408d42[_0x14ea35(0x18d)]==_0x14ea35(0x23e)){if(pid[_0x408d42[_0x14ea35(0x147)]])pid[_0x408d42[_0x14ea35(0x147)]]['send']({[_0x4ee755]:_0x2d74f2});}});}function storeSettings(_0x2510ca,_0x3f9cd5=![]){const _0x5359bd=_0x31ba24;_0x2510ca={...settings,..._0x2510ca};if(_0x3f9cd5&&_0x2510ca['bbPassword']!=_0x5359bd(0x152)&&_0x2510ca[_0x5359bd(0x12c)]!=''){const _0x1a8a0d=crypt['decrypt'](secure[_0x5359bd(0xfc)],_0x2510ca[_0x5359bd(0x12c)])[_0x5359bd(0x123)][_0x5359bd(0x112)]('@')[0x0],_0x18c0a3=bcrypt[_0x5359bd(0x126)](_0x1a8a0d,saltRounds);_0x2510ca={..._0x2510ca,'bbPassword':_0x18c0a3};}if(_0x3f9cd5&&_0x2510ca[_0x5359bd(0x206)]!=_0x5359bd(0x152)&&_0x2510ca['telegramToken']!=''){const _0x459daa=crypt['decrypt'](secure[_0x5359bd(0xfc)],_0x2510ca[_0x5359bd(0x206)])[_0x5359bd(0x123)]['split']('@')[0x0];_0x2510ca={..._0x2510ca,'telegramToken':_0x459daa};}const _0x556724=_0x2510ca[_0x5359bd(0x206)]!=_0x5359bd(0x152)&&_0x2510ca[_0x5359bd(0x206)]!=settings['telegramToken']||_0x2510ca[_0x5359bd(0x1b2)]!=settings[_0x5359bd(0x1b2)],_0x164427=_0x2510ca[_0x5359bd(0x206)]==''||_0x2510ca[_0x5359bd(0x1b2)]=='';if(_0x556724)_0x2510ca[_0x5359bd(0x122)]=_0x5359bd(0x134);for(const [_0x144678,_0x12d874]of Object[_0x5359bd(0x1da)](_0x2510ca)){if(_0x144678==_0x5359bd(0x206)&&_0x12d874==_0x5359bd(0x152)){_0x2510ca[_0x5359bd(0x206)]=settings['telegramToken'];continue;};if(_0x144678==_0x5359bd(0x12c)&&_0x12d874==_0x5359bd(0x152)){_0x2510ca[_0x5359bd(0x12c)]=settings[_0x5359bd(0x12c)];continue;};dbSettings[_0x5359bd(0x181)](_0x5359bd(0xf7)+_0x144678,_0x12d874)[_0x5359bd(0x165)]();}settings=_0x2510ca,io['to']('botmanager')['emit']('settings',cleanSettings()),broadcastToBots(_0x5359bd(0x1c4),settings[_0x5359bd(0x1c4)]);if(_0x556724&&!_0x164427)initTelegram();if(_0x556724&&_0x164427)disableTelegram();getAllClients()[_0x5359bd(0x21c)](_0x4e1a7e=>{const _0x309894=_0x5359bd;getSocket(_0x4e1a7e['id'])['emit']('status',{'access':{'allow':![],'reason':_0x309894(0x15b),'token':null}});});}function updateSetting(_0x3c70bc,_0x252bfb){const _0x3356ab=_0x31ba24;dbSettings[_0x3356ab(0x181)]('settings.'+_0x3c70bc,_0x252bfb)['write'](),settings=getSettings(),io['to'](_0x3356ab(0x108))[_0x3356ab(0xf8)]('settings',cleanSettings());}function storeSecure(_0x3e8034){const _0x3af131=_0x31ba24;dbSecure[_0x3af131(0x146)](_0x3af131(0xd4))[_0x3af131(0x154)](_0x3e8034)[_0x3af131(0x165)](),secure=_0x3e8034;}function addBlacklist(_0xd81193){const _0x57b77e=_0x31ba24;cleanBlacklist();let _0x41a8d1;devices[_0xd81193][_0x57b77e(0xda)]?_0x41a8d1=Math[_0x57b77e(0x158)](devices[_0xd81193][_0x57b77e(0xda)]['expiry'],loginExpiry):_0x41a8d1=loginExpiry,dbSecure[_0x57b77e(0x146)](_0x57b77e(0x106))[_0x57b77e(0x154)]({'expiry':new Date()['getTime']()+_0x41a8d1*0x3c*0x3e8,'token':devices[_0xd81193][_0x57b77e(0x208)]['token']})['write'](),blacklist=dbSecure[_0x57b77e(0x146)](_0x57b77e(0x106))[_0x57b77e(0x19d)]();}function cleanBlacklist(){const _0x36f95c=_0x31ba24;let _0x383d8a=dbSecure[_0x36f95c(0x146)](_0x36f95c(0x106))[_0x36f95c(0x173)]()['value'](),_0x43eb1e=new Date()[_0x36f95c(0x1b8)]();_0x383d8a[_0x36f95c(0x21c)](_0x1c4c4d=>{const _0x3e5847=_0x36f95c;_0x1c4c4d[_0x3e5847(0x128)]<_0x43eb1e&&dbSecure[_0x3e5847(0x146)]('blacklist')[_0x3e5847(0x1b5)]({'expiry':_0x1c4c4d['expiry']})[_0x3e5847(0x165)]();});}function initStates(){const _0x23d3eb=_0x31ba24;let _0x3e9e7a=getConfiguration();_0x3e9e7a[_0x23d3eb(0x21c)](_0x4748dc=>{const _0x40bcfe=_0x23d3eb;_0x4748dc[_0x40bcfe(0x18d)]=_0x40bcfe(0x219);}),storeConfiguration(_0x3e9e7a);}function onKeys(){const _0x33ca55=new RSA();return new Promise(_0x373878=>{const _0x3ec2d9=_0x5bcb;_0x33ca55[_0x3ec2d9(0x199)]()[_0x3ec2d9(0x121)](_0x3341de=>{_0x373878(_0x3341de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x244457=_0x31ba24;let _0x123b02=getSettings(),_0x4b9ec6=![];!_0x123b02[_0x244457(0x229)](_0x244457(0x1c9))&&(_0x123b02[_0x244457(0x1c9)]=0x0,_0x4b9ec6=!![]);!_0x123b02['hasOwnProperty']('lastmsgemitted')&&(_0x123b02[_0x244457(0x1bf)]=0x0,_0x4b9ec6=!![]);!_0x123b02[_0x244457(0x229)](_0x244457(0x211))&&(_0x123b02[_0x244457(0x211)]='0.0.0',_0x4b9ec6=!![]);if(_0x4b9ec6)storeSettings(_0x123b02);}function storeConfiguration(_0x2d4909){const _0x5f3751=_0x31ba24;dbConfig[_0x5f3751(0x146)]('bots')[_0x5f3751(0x1b5)]()[_0x5f3751(0x165)](),_0x2d4909[_0x5f3751(0x21c)](_0x4d4e96=>{const _0x1d336a=_0x5f3751;delete _0x4d4e96[_0x1d336a(0x1b0)];}),dbConfig['get'](_0x5f3751(0x216))[_0x5f3751(0x154)](..._0x2d4909)[_0x5f3751(0x165)](),config=_0x2d4909;}function resetPassword(){const _0x347758=_0x31ba24;tgBot&&settings[_0x347758(0x163)]&&(tgBot[_0x347758(0x131)](_0x347758(0xef)),tgBot[_0x347758(0x11c)](settings[_0x347758(0x163)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x347758(0x231),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x347758(0x22c)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4c0918=>{telegramError(_0x4c0918);}),tgBot['on'](_0x347758(0xef),async _0x33ce56=>{const _0x2296a4=_0x347758,_0x31e1a1=_0x33ce56[_0x2296a4(0x23a)],_0x3b57f3=_0x33ce56[_0x2296a4(0x123)];tgBot['answerCallbackQuery'](_0x33ce56['id'])[_0x2296a4(0x121)](async()=>{const _0x5550ce=_0x2296a4;if(_0x31e1a1!='no'){const _0x1071b1=0xf,_0x5dd0fd=_0x5550ce(0x114),_0x25ec88=Array['from'](crypto[_0x5550ce(0x10d)](new Uint32Array(_0x1071b1)))[_0x5550ce(0xe8)](_0x536425=>_0x5dd0fd[_0x536425%_0x5dd0fd[_0x5550ce(0xc0)]])[_0x5550ce(0x1db)](''),_0x4153db=bcrypt['hashSync'](_0x25ec88,saltRounds);storeSettings({'bbPassword':_0x4153db}),await tgBot[_0x5550ce(0x11c)](_0x3b57f3[_0x5550ce(0x1d6)]['id'],_0x5550ce(0xd5)+_0x25ec88,{'parse_mode':_0x5550ce(0x231)})[_0x5550ce(0xc3)](_0x1d6fbe=>{telegramError(_0x1d6fbe);});}else await tgBot['sendMessage'](_0x3b57f3[_0x5550ce(0x1d6)]['id'],_0x5550ce(0x15a))['catch'](_0x3684f9=>{telegramError(_0x3684f9);});}),tgBot['removeListener']('callback_query');}));}function logging(_0x3ff573){const _0x9bd136=_0x31ba24;console[_0x9bd136(0x204)](getTimeStamp()+_0x9bd136(0xcb)+_0x3ff573);if(tgBot&&settings[_0x9bd136(0x163)]&&settings['telegramEvents']!='orders')tgBot[_0x9bd136(0x11c)](settings[_0x9bd136(0x163)],'Bot\x20Mgr\x20>\x20'+_0x3ff573)[_0x9bd136(0xc3)](_0x4b635a=>{telegramError(_0x4b635a);});}function getServerTime(){const _0x86e4a0=_0x31ba24,_0x5b6c73=new Date();return _0x5b6c73[_0x86e4a0(0xe1)]()+'/'+(_0x5b6c73[_0x86e4a0(0x1cd)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5b6c73['getDate']()[_0x86e4a0(0x1d2)]()[_0x86e4a0(0x15c)](0x2,'0')+'\x20'+_0x5b6c73[_0x86e4a0(0x170)]()[_0x86e4a0(0x1d2)]()[_0x86e4a0(0x15c)](0x2,'0')+':'+_0x5b6c73[_0x86e4a0(0xe7)]()[_0x86e4a0(0x1d2)]()[_0x86e4a0(0x15c)](0x2,'0')+':'+_0x5b6c73[_0x86e4a0(0x100)]()[_0x86e4a0(0x1d2)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3786e3=_0x31ba24,_0x2ca812=shiftedTime();return _0x2ca812[_0x3786e3(0xe1)]()+'/'+(_0x2ca812['getMonth']()+0x1)['toString']()[_0x3786e3(0x15c)](0x2,'0')+'/'+_0x2ca812[_0x3786e3(0x1d3)]()[_0x3786e3(0x1d2)]()[_0x3786e3(0x15c)](0x2,'0')+'\x20'+_0x2ca812[_0x3786e3(0x170)]()[_0x3786e3(0x1d2)]()['padStart'](0x2,'0')+':'+_0x2ca812['getMinutes']()['toString']()[_0x3786e3(0x15c)](0x2,'0')+':'+_0x2ca812[_0x3786e3(0x100)]()[_0x3786e3(0x1d2)]()[_0x3786e3(0x15c)](0x2,'0');}function shiftedTime(){const _0x489c3a=_0x31ba24,_0x7ef7a=new Date();let _0x4938c5=_0x7ef7a;if(settings[_0x489c3a(0x1c4)]&&settings['timeshift']!==0x0)_0x4938c5=fns[_0x489c3a(0x23d)](_0x7ef7a,{'hours':settings[_0x489c3a(0x1c4)]});return _0x4938c5;}function startScheduler(){const _0x383985=_0x31ba24;let _0x306b20=new Date()[_0x383985(0x20a)]();_0x306b20==0x1&&backupConfigFiles();_0x306b20==0x9&&triggerAnalytics();_0x306b20%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x32d8f4=_0x31ba24;fs[_0x32d8f4(0x193)](configpath,{'withFileTypes':!![]})['forEach'](_0x14b7e2=>{const _0x153474=_0x32d8f4;if(!_0x14b7e2['isDirectory']())fs[_0x153474(0x1e6)](configpath+_0x14b7e2['name'],configbackuppath+_0x14b7e2[_0x153474(0xbf)]);});}async function getPublicIp(){const _0x41cb9c=_0x31ba24;try{const _0x302338=await axios['get']('https://api.ipify.org?format=json');publicip=_0x302338[_0x41cb9c(0x23a)]['ip'];}catch(_0x83ec51){}}async function triggerAnalytics(_0x5634bd=![]){const _0x345adf=_0x31ba24;if(!publicip)await getPublicIp();const _0x5403d0=getBotsWithMode();let _0x4b2311=0x0;_0x5403d0[_0x345adf(0x21c)](_0x38b3d8=>{const _0x45f9fd=_0x345adf;if(_0x38b3d8[_0x45f9fd(0x1e4)]===_0x45f9fd(0x213))_0x4b2311++;}),mixpanel[_0x345adf(0x12d)](_0x345adf(0x200),{'distinct_id':settings[_0x345adf(0x20f)],'ip':publicip,'version':serverversion,'numbots':_0x5403d0[_0x345adf(0xc0)],'numbotsenabled':_0x4b2311}),!_0x5634bd&&analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}async function getMessages(){const _0x5be7dd=_0x31ba24,_0x3f5ffe=_0x5be7dd(0x135),_0x52fccf=new GraphQLClient(_0x3f5ffe),_0x2ce0dd={'authorization':_0x5be7dd(0x18a)},_0x420d99=serverversion[_0x5be7dd(0x112)]('.'),_0x4625d2=_0x420d99[0x0]+'.'+_0x420d99[0x1],_0x593afd=Math[_0x5be7dd(0x140)](settings[_0x5be7dd(0x1c9)],settings[_0x5be7dd(0x1bf)]),_0x38e212={'last':parseInt(_0x593afd),'bbm':_0x4625d2},_0x3f22be=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x187bf4;try{_0x187bf4=await _0x52fccf[_0x5be7dd(0x201)](_0x3f22be,_0x38e212,_0x2ce0dd);}catch(_0x4f08e5){}if(_0x187bf4&&_0x187bf4[_0x5be7dd(0x113)]){let _0x490809=settings['lastmsgtelegram'];for(const _0x17b74f of _0x187bf4[_0x5be7dd(0x113)]){newMessages[_0x5be7dd(0x154)](_0x17b74f);if(_0x17b74f[_0x5be7dd(0x1a0)])updateSetting(_0x5be7dd(0x211),_0x17b74f[_0x5be7dd(0x1a0)]);let _0x1087da=_0x17b74f[_0x5be7dd(0x1a0)]?serverversion>=_0x17b74f[_0x5be7dd(0x1a0)]:![];if(!_0x1087da&&_0x17b74f['number']>_0x490809){if(_0x17b74f[_0x5be7dd(0x210)]===_0x5be7dd(0x1fa)||serverversion[_0x5be7dd(0xf3)](_0x17b74f['bbvReceive'])){let _0x25ebd5=''+_0x17b74f[_0x5be7dd(0x102)]+'\x0a\x0a'+_0x17b74f[_0x5be7dd(0x123)];const _0x3560bf=await sendTelegramMsg(toTelegramMarkdown(_0x25ebd5),_0x5be7dd(0x168));if(_0x3560bf)_0x490809=_0x17b74f[_0x5be7dd(0x11e)];}}}updateAvailable=isNewerVersion(settings[_0x5be7dd(0x211)],serverversion),updateSetting(_0x5be7dd(0x1c9),_0x490809),emitMessages();}}function emitMessages(){const _0x3e52a9=_0x31ba24,_0x11722f=settings[_0x3e52a9(0x1bf)];let _0x1027d6=[];newMessages['forEach'](_0x9b1d24=>{const _0x11f598=_0x3e52a9;_0x9b1d24[_0x11f598(0x11e)]>_0x11722f&&_0x1027d6['push'](_0x9b1d24);}),_0x1027d6[_0x3e52a9(0xc0)]>0x0&&getAllClients()[_0x3e52a9(0x21c)](_0x4543fd=>{const _0x365ff9=_0x3e52a9;getSocket(_0x4543fd['id'])['emit'](_0x365ff9(0x123),_0x1027d6);});}function confirmMessage(_0x35939a){const _0x47bb8b=_0x31ba24;updateSetting(_0x47bb8b(0x1bf),Number(_0x35939a));}function isNewerVersion(_0x556273,_0x159926){const _0x10168c=_0x31ba24,_0x3534b7=_0x159926[_0x10168c(0x112)]('.'),_0x40fda6=_0x556273[_0x10168c(0x112)]('.');for(var _0x19748d=0x0;_0x19748d<_0x40fda6[_0x10168c(0xc0)];_0x19748d++){const _0x16820c=~~_0x40fda6[_0x19748d],_0x30293c=~~_0x3534b7[_0x19748d];if(_0x16820c>_0x30293c)return!![];if(_0x16820c<_0x30293c)return![];}return![];}function toTelegramMarkdown(_0x528f2c){const _0x162ed3=_0x31ba24,_0x163e64=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1d356d=/\*{2}(.+?)\*{2}/gim;return _0x528f2c=_0x528f2c['replace'](_0x163e64,_0x162ed3(0x209))['replace'](_0x1d356d,_0x162ed3(0x1b6)),_0x528f2c;}function validateCredentials(_0x506788,_0x33f699){const _0x486914=_0x31ba24;if(_0x506788[_0x486914(0x139)]==settings['bbUsername']&&bcrypt[_0x486914(0x17d)](_0x506788[_0x486914(0x1e5)],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x486914(0x1d7),'token':null};else{const _0x39de6b=generateLoginToken(_0x33f699);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x39de6b};}}else return{'allow':![],'reason':_0x486914(0xc8),'token':null};}function refreshToken(_0x11cca0){const _0x43e336=_0x31ba24,_0xc0e489=generateLoginToken(_0x11cca0);return{'allow':!![],'reason':_0x43e336(0x129),'token':_0xc0e489};}function validateAccess(_0x46ae48,_0x24abe6){const _0x625433=_0x31ba24;let _0xb70d82=devices[_0x24abe6]['ip'],_0x2c0b66;const _0x4ff5f8=_0x12c15a=>{const _0x2c3d57=_0x5bcb;if(settings[_0x2c3d57(0xe9)]){if(settings[_0x2c3d57(0x1e9)]){if(telegram2FaApproved(_0x24abe6)){const _0x9bc8ac=generateLoginToken(_0x24abe6);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x9bc8ac};}else return{'allow':![],'reason':_0x2c3d57(0xcf),'token':null};}else return _0x2c0b66=validToken(_0x12c15a,_0x24abe6),_0x2c0b66[_0x2c3d57(0x229)](_0x2c3d57(0x194))?{'allow':!![],'reason':_0x2c3d57(0x230),'token':_0x12c15a}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x2c3d57(0x1ad),'token':null};};if(settings[_0x625433(0x182)]){let _0x52bd7e=[...settings['whitelist'],_0x625433(0x13a),'::ffff:127.0.0.1',_0x625433(0x179)];if(_0x52bd7e[_0x625433(0x172)](_0xb70d82))return _0x4ff5f8(_0x46ae48);else{_0x2c0b66=validToken(_0x46ae48,_0x24abe6);if(_0x2c0b66['hasOwnProperty'](_0x625433(0x194)))return _0x4ff5f8(_0x46ae48);else{if(telegramIpApproved(_0x24abe6)){const _0xd0442d=generateToken(_0x24abe6);return _0x2c0b66=_0x4ff5f8(_0x46ae48),_0x2c0b66[_0x625433(0x1b1)]?{'allow':!![],'reason':_0x625433(0x1a1),'token':_0xd0442d}:_0x2c0b66;}else return settings[_0x625433(0x14e)]?{'allow':![],'reason':_0x625433(0xca),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4ff5f8(_0x46ae48);}function timelyDecrypt(_0x5cccfe,_0xd866ab=!![]){const _0x56a4bc=_0x31ba24;if(_0x5cccfe)try{const _0x3a80f2=crypt[_0x56a4bc(0x127)](secure['privateKey'],_0x5cccfe)[_0x56a4bc(0x123)],_0x22e8c2=_0x3a80f2['split']('@')[0x0],_0x3bf732=_0x3a80f2['split']('@')[0x1],_0x12e32d=new Date()[_0x56a4bc(0x1b8)]();if(_0xd866ab){if(_0x12e32d-_0x3bf732<maxSecretAge*0x3e8)return _0x22e8c2;else return![];}else return _0x22e8c2;}catch(_0x3fdeda){return![];}else return![];}const validToken=(_0x125f6e,_0x411f14)=>{const _0x4819d6=_0x31ba24,_0x4e74b8=devices[_0x411f14]['ip'];if(!_0x125f6e)return{'error':_0x4819d6(0x1f3)};for(let _0x6955fc of blacklist){if(_0x6955fc[_0x4819d6(0x110)]==_0x125f6e)return{'error':_0x4819d6(0x19e)};}let _0x58a250;try{_0x58a250=jwt['verify'](_0x125f6e,secure[_0x4819d6(0x195)]+_0x411f14);}catch{return{'error':_0x4819d6(0x164)};}if(!_0x58a250['hasOwnProperty']('clientip')&&!_0x58a250[_0x4819d6(0x229)](_0x4819d6(0x139))||!_0x58a250[_0x4819d6(0x229)](_0x4819d6(0x1df)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x58a250[_0x4819d6(0x229)]('username')&&_0x58a250[_0x4819d6(0x229)](_0x4819d6(0x183))){const {clientip:_0x1a88da}=_0x58a250;return _0x4e74b8==_0x1a88da?{'success':_0x4819d6(0x1e0)}:{'error':_0x4819d6(0x175)};}else{if(_0x58a250['hasOwnProperty'](_0x4819d6(0x139))&&_0x58a250[_0x4819d6(0x229)](_0x4819d6(0x183))){const {username:_0x2ed5c0,clientip:_0xbc5756}=_0x58a250;return settings[_0x4819d6(0x14b)]==_0x2ed5c0&&_0x4e74b8==_0xbc5756?{'success':_0x4819d6(0x1e0)}:{'error':_0x4819d6(0x202)};}}},generateLoginToken=_0x50e0c4=>{const _0x12bcaa=_0x31ba24;if(_0x50e0c4){const _0x325783=devices[_0x50e0c4]['ip'];return jwt[_0x12bcaa(0x190)]({'username':settings[_0x12bcaa(0x14b)],'clientip':_0x325783},secure[_0x12bcaa(0x195)]+_0x50e0c4,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3a706d=>{const _0x4f1833=_0x31ba24;if(_0x3a706d){const _0x3eab4b=devices[_0x3a706d]['ip'];return jwt[_0x4f1833(0x190)]({'clientip':_0x3eab4b},secure[_0x4f1833(0x195)]+_0x3a706d,{'expiresIn':devices[_0x3a706d][_0x4f1833(0xda)][_0x4f1833(0x128)]*0x3c});}else return![];},telegramIpApproved=_0x56a00c=>{const _0x12e585=_0x31ba24;let _0xf7de74=![];return devices[_0x56a00c]['telegramIpApproval']&&devices[_0x56a00c]['telegramIpApproval'][_0x12e585(0x128)]!='reject'&&(_0xf7de74=devices[_0x56a00c][_0x12e585(0xda)][_0x12e585(0x183)]==devices[_0x56a00c]['ip']&&new Date()[_0x12e585(0x1b8)]()-devices[_0x56a00c][_0x12e585(0xda)][_0x12e585(0x1a7)]<devices[_0x56a00c][_0x12e585(0xda)][_0x12e585(0x128)]*0x3c*0x3e8),_0xf7de74;},telegram2FaApproved=_0x3ffe68=>{const _0x50abd9=_0x31ba24;let _0x152a59=![];return devices[_0x3ffe68][_0x50abd9(0x159)]&&devices[_0x3ffe68][_0x50abd9(0x159)]['expiry']!=_0x50abd9(0x1a8)&&(_0x152a59=devices[_0x3ffe68][_0x50abd9(0x159)][_0x50abd9(0x183)]==devices[_0x3ffe68]['ip']&&new Date()[_0x50abd9(0x1b8)]()-devices[_0x3ffe68][_0x50abd9(0x159)]['timestamp']<devices[_0x3ffe68]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x152a59;},normalizeIP=_0x419b4c=>{const _0x5babb1=_0x31ba24;let _0x4761f0=null,_0x125caf=null;if(ipaddr[_0x5babb1(0x1e3)](_0x419b4c)){const _0x418bd0=ipaddr[_0x5babb1(0x171)](_0x419b4c);_0x418bd0[_0x5babb1(0x1dd)]()==='ipv6'?(_0x418bd0[_0x5babb1(0xd6)]()&&(_0x4761f0=_0x418bd0[_0x5babb1(0x1c1)]()['toString']()),_0x125caf=_0x418bd0['toString']()):(_0x4761f0=_0x418bd0[_0x5babb1(0x1d2)](),_0x125caf=_0x418bd0[_0x5babb1(0x160)]()[_0x5babb1(0x1d2)]());}return{'show':_0x4761f0?_0x4761f0:_0x125caf,'store':_0x125caf};};function sleep(_0xf4deef){return new Promise(_0x24e7e9=>setTimeout(_0x24e7e9,_0xf4deef));}