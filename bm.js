const _0x44fc43=_0x47df;(function(_0x1936ab,_0x44f106){const _0x4c1245=_0x47df,_0x27cbb4=_0x1936ab();while(!![]){try{const _0x19c4dc=-parseInt(_0x4c1245(0x17f))/0x1*(parseInt(_0x4c1245(0x1a4))/0x2)+-parseInt(_0x4c1245(0x226))/0x3+-parseInt(_0x4c1245(0x1d1))/0x4*(-parseInt(_0x4c1245(0x1c3))/0x5)+parseInt(_0x4c1245(0x277))/0x6+parseInt(_0x4c1245(0x175))/0x7*(-parseInt(_0x4c1245(0x17c))/0x8)+-parseInt(_0x4c1245(0x1fd))/0x9*(parseInt(_0x4c1245(0x203))/0xa)+parseInt(_0x4c1245(0x1cc))/0xb;if(_0x19c4dc===_0x44f106)break;else _0x27cbb4['push'](_0x27cbb4['shift']());}catch(_0x858d74){_0x27cbb4['push'](_0x27cbb4['shift']());}}}(_0x5030,0x28d43));const _0x485bde=function(){let _0x4c2c67=!![];return function(_0x2767cc,_0x3075e9){const _0x109aa1=_0x4c2c67?function(){if(_0x3075e9){const _0x1863d3=_0x3075e9['apply'](_0x2767cc,arguments);return _0x3075e9=null,_0x1863d3;}}:function(){};return _0x4c2c67=![],_0x109aa1;};}(),_0x3513ad=_0x485bde(this,function(){const _0xdb99d4=_0x47df;return _0x3513ad[_0xdb99d4(0x222)]()['search'](_0xdb99d4(0x23f))[_0xdb99d4(0x222)]()[_0xdb99d4(0x25e)](_0x3513ad)[_0xdb99d4(0x1b0)](_0xdb99d4(0x23f));});_0x3513ad();'use strict';process[_0x44fc43(0x281)][_0x44fc43(0x159)]=0x1;const childProcess=require(_0x44fc43(0x18c)),FileSync=require(_0x44fc43(0x1fb)),fs=require('fs'),fns=require(_0x44fc43(0x267)),low=require(_0x44fc43(0x1c9)),path=require(_0x44fc43(0x1e1)),crypto=require('crypto'),Crypt=require(_0x44fc43(0x20a))[_0x44fc43(0x147)],RSA=require(_0x44fc43(0x20a))['RSA'],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),analyticsLib=require(_0x44fc43(0x144))[_0x44fc43(0x20b)],googleAnalytics=require(_0x44fc43(0x14e))[_0x44fc43(0x20b)],ipaddr=require('ipaddr.js'),argv=require(_0x44fc43(0x14f))(process['argv'][_0x44fc43(0x244)](0x2))['argv'],PORT=argv[_0x44fc43(0x1ef)]||_0x44fc43(0x165),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x44fc43(0x239)](_0x44fc43(0x249)+PORT+_0x44fc43(0x1db)),process[_0x44fc43(0x18b)](0x1);const HOST=argv[_0x44fc43(0x1e2)]||null,userID=argv[_0x44fc43(0x18d)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x44fc43(0x1bf),configfile=_0x44fc43(0x22c),settingsfile=_0x44fc43(0x24e),securefile=_0x44fc43(0x21b);!fs[_0x44fc43(0x24b)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x44fc43(0x1c5)),configpath=userID?bbpath+_0x44fc43(0x1df)+userID+'/':bbpath+_0x44fc43(0x1df),configbackuppath=configpath+_0x44fc43(0x1aa);!fs[_0x44fc43(0x24b)](configpath)&&fs[_0x44fc43(0x1ee)](configpath);!fs[_0x44fc43(0x24b)](configbackuppath)&&fs[_0x44fc43(0x1ee)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x44fc43(0x246)]({'bots':[]})[_0x44fc43(0x279)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x44fc43(0x279)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x44fc43(0x246)]({'secure':{},'blacklist':[]})[_0x44fc43(0x279)]();let crypt=new Crypt({'md':_0x44fc43(0x260),'rsaStandard':_0x44fc43(0x152)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x44fc43(0x1a9)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x44fc43(0x220)),app=express(),http=require(_0x44fc43(0x142))[_0x44fc43(0x196)](app);app[_0x44fc43(0x154)](express[_0x44fc43(0x273)](path[_0x44fc43(0x181)](__dirname,bbpath2,'build2'))),app[_0x44fc43(0x154)](express[_0x44fc43(0x273)](path[_0x44fc43(0x181)](__dirname,bbpath2,_0x44fc43(0x193)))),app[_0x44fc43(0x265)]('/',function(_0x24f67e,_0x2cd38f){const _0x33281a=_0x44fc43;_0x2cd38f[_0x33281a(0x21d)](path[_0x33281a(0x181)](__dirname,bbpath2,_0x33281a(0x1de),_0x33281a(0x215)));}),app[_0x44fc43(0x265)](_0x44fc43(0x251),function(_0x3b8d99,_0x59d6b3){const _0x291708=_0x44fc43;_0x59d6b3['sendFile'](path['join'](__dirname,bbpath2,_0x291708(0x193),_0x291708(0x215)));}),app['get']('/:bot/portfolio',(_0x34db69,_0x289e2d)=>{const _0x590e06=_0x44fc43;_0x289e2d[_0x590e06(0x21d)](path[_0x590e06(0x181)](__dirname,bbpath2,_0x590e06(0x193),'index.html'));}),app[_0x44fc43(0x265)](_0x44fc43(0x1d0),(_0x48276e,_0x2a0e6e)=>{const _0x25298c=_0x44fc43;_0x2a0e6e[_0x25298c(0x21d)](path['join'](__dirname,bbpath2,_0x25298c(0x193),_0x25298c(0x215)));}),app[_0x44fc43(0x265)](_0x44fc43(0x271),(_0xad989f,_0x4efffa)=>{const _0x2f176c=_0x44fc43;_0x4efffa['sendFile'](path[_0x2f176c(0x181)](__dirname,bbpath2,_0x2f176c(0x193),_0x2f176c(0x215)));}),app[_0x44fc43(0x265)]('/:bot/history',(_0x404ef5,_0x530b50)=>{const _0x15f7fe=_0x44fc43;_0x530b50[_0x15f7fe(0x21d)](path['join'](__dirname,bbpath2,_0x15f7fe(0x193),_0x15f7fe(0x215)));}),app['get'](_0x44fc43(0x24f),(_0x5cb056,_0x42c66e)=>{const _0x451f40=_0x44fc43;_0x42c66e[_0x451f40(0x21d)](path['join'](__dirname,bbpath2,_0x451f40(0x193),_0x451f40(0x215)));}),app[_0x44fc43(0x265)](_0x44fc43(0x252),(_0x16993c,_0x2e16f1)=>{const _0x3f6001=_0x44fc43;_0x2e16f1[_0x3f6001(0x21d)](path[_0x3f6001(0x181)](__dirname,bbpath2,_0x3f6001(0x193),_0x3f6001(0x215)));});if(HOST)http['listen'](PORT,HOST);else http[_0x44fc43(0x1d4)](PORT);const io=require(_0x44fc43(0x202))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x44fc43(0x289)})]}),TelegramBot=require(_0x44fc43(0x167));let tgBot;if(settings[_0x44fc43(0x22d)]&&settings[_0x44fc43(0x22d)]!=''&&settings[_0x44fc43(0x1e5)]&&settings[_0x44fc43(0x1e5)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x209274=_0x44fc43;console[_0x209274(0x239)](''),console[_0x209274(0x239)]('-----------------------------------------------------------------------------------'),logging(_0x209274(0x26f)+PORT),console[_0x209274(0x239)](_0x209274(0x190));if(config[_0x209274(0x1b2)]!=0x0)config[_0x209274(0x284)](_0x49eeb0=>{const _0x4a7bc7=_0x209274;if(_0x49eeb0['status']==_0x4a7bc7(0x169)||_0x49eeb0[_0x4a7bc7(0x1bd)]==_0x4a7bc7(0x218))logging(_0x4a7bc7(0x1b7)+_0x49eeb0[_0x4a7bc7(0x192)]+'\x20|\x20'+_0x49eeb0['botname']),startBot([_0x49eeb0[_0x4a7bc7(0x192)],userID],{'cwd':bbpath},function(_0x3ab484){if(_0x3ab484)logging(_0x3ab484);});else(_0x49eeb0[_0x4a7bc7(0x1bd)]==_0x4a7bc7(0x1e6)||_0x49eeb0[_0x4a7bc7(0x1bd)]==_0x4a7bc7(0x230))&&logging(_0x4a7bc7(0x242)+_0x49eeb0[_0x4a7bc7(0x192)]+_0x4a7bc7(0x25a)+_0x49eeb0[_0x4a7bc7(0x27c)]);});else!newBot&&console[_0x209274(0x239)](_0x209274(0x1a8));if(newBot)addBot();console[_0x209274(0x239)]('-----------------------------------------------------------------------------------'),console[_0x209274(0x239)]('');}function startSocket(){io['on']('connection',_0x49410b=>{const _0x4330dd=_0x47df;let _0x366a7f,_0x31cf1e,_0x540251,_0x77da7d,_0x15a7b8;const _0x2b93d1=_0x49410b[_0x4330dd(0x236)][_0x4330dd(0x1e8)][_0x4330dd(0x16d)];_0x31cf1e=_0x2b93d1[_0x4330dd(0x21e)](/bot[0-9]{3}/);if(_0x31cf1e)_0x540251=_0x31cf1e[0x0]['match'](/[0-9]{3}/);if(_0x540251)_0x366a7f=_0x540251[0x0];else _0x366a7f='botmanager';const _0x31c48c=_0x49410b['handshake']['auth'][_0x4330dd(0x280)];if(!_0x31c48c)_0x49410b[_0x4330dd(0x19a)](_0x4330dd(0x1bd),{'publicKey':secure[_0x4330dd(0x254)]});else{_0x77da7d=timelyDecrypt(_0x31c48c,![]);if(!_0x77da7d)_0x49410b[_0x4330dd(0x19a)]('status',{'publicKey':secure['publicKey']});else{_0x15a7b8=normalizeIP(_0x49410b[_0x4330dd(0x253)][_0x4330dd(0x268)])[_0x4330dd(0x269)];if(!devices[_0x77da7d])devices[_0x77da7d]={'uuid':_0x77da7d,'access':{'token':null}};devices[_0x77da7d]['ip']=_0x15a7b8;const _0x235a9a=addClient(_0x49410b['id'],_0x77da7d,_0x366a7f);setAccess(_0x235a9a),_0x49410b['on'](_0x4330dd(0x148),_0x244863=>{const _0x2fdb39=_0x4330dd,_0x4ede12=timelyDecrypt(_0x244863['password']);if(_0x4ede12){_0x244863={'username':_0x244863[_0x2fdb39(0x177)],'password':_0x4ede12},devices[_0x77da7d][_0x2fdb39(0x240)]=validateCredentials(_0x244863,_0x77da7d);if(devices[_0x77da7d][_0x2fdb39(0x240)][_0x2fdb39(0x22e)]==![]&&devices[_0x77da7d][_0x2fdb39(0x240)]['reason']==_0x2fdb39(0x1d7))_0x49410b[_0x2fdb39(0x19a)](_0x2fdb39(0x1bd),{'access':devices[_0x77da7d][_0x2fdb39(0x240)]}),loginAccess2FA(_0x77da7d,_0x15a7b8);else{if(devices[_0x77da7d][_0x2fdb39(0x240)][_0x2fdb39(0x22e)]==![]&&devices[_0x77da7d][_0x2fdb39(0x240)][_0x2fdb39(0x247)]=='invalid\x20credentials')_0x49410b[_0x2fdb39(0x19a)]('status',{'access':devices[_0x77da7d][_0x2fdb39(0x240)]});else devices[_0x77da7d]['access'][_0x2fdb39(0x22e)]&&devices[_0x77da7d]['access'][_0x2fdb39(0x247)]==_0x2fdb39(0x221)&&(getClientsWithUuid(_0x77da7d)[_0x2fdb39(0x284)](_0x504fe8=>{setAccess(_0x504fe8);}),setTokenRefresh(_0x77da7d),setSessionTimeout(_0x2fdb39(0x148),_0x77da7d));}}else logging(_0x2fdb39(0x1e7));}),_0x49410b['on'](_0x4330dd(0x1f4),()=>{resetPassword();}),_0x49410b['on'](_0x4330dd(0x206),_0x8b2581=>{removeClient(_0x49410b['id']);});}}});}function initClient(_0x21e5cb){const _0x4744b4=_0x44fc43;if(_0x21e5cb!=_0x4744b4(0x201)&&config['apiKey']!=''){if(pid[_0x21e5cb])pid[_0x21e5cb]['send']({'function':_0x4744b4(0x183),'args':null});}}function getSocket(_0x46e699){const _0x2b07a8=_0x44fc43;return io['sockets'][_0x2b07a8(0x20e)]['get'](_0x46e699);}function setAccess(_0x1fd7c8){const _0xc48e5d=_0x44fc43,_0xea8ab4=getSocket(_0x1fd7c8['id']),_0x421240=_0x1fd7c8['uuid'],_0x2f02c7=_0x1fd7c8['bot'];devices[_0x421240][_0xc48e5d(0x240)]=validateAccess(devices[_0x421240][_0xc48e5d(0x240)]['token'],_0x421240),_0xea8ab4[_0xc48e5d(0x181)](_0x421240);if(devices[_0x421240][_0xc48e5d(0x240)][_0xc48e5d(0x22e)]){_0xea8ab4[_0xc48e5d(0x181)](_0x2f02c7);if(_0x2f02c7==_0xc48e5d(0x201))initializeSocketBotManager(_0xea8ab4);else initializeSocketBot(_0xea8ab4);initClient(_0x2f02c7);}devices[_0x421240]['access'][_0xc48e5d(0x205)]&&devices[_0x421240][_0xc48e5d(0x240)][_0xc48e5d(0x247)]==_0xc48e5d(0x1cb)&&setSessionTimeout('2FA',_0x421240),devices[_0x421240][_0xc48e5d(0x240)]['token']&&devices[_0x421240][_0xc48e5d(0x240)][_0xc48e5d(0x247)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0xc48e5d(0x148),_0x421240),_0xea8ab4[_0xc48e5d(0x19a)](_0xc48e5d(0x1bd),{'status':_0x1fd7c8[_0xc48e5d(0x1b3)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x421240][_0xc48e5d(0x240)],'externalip':devices[_0x421240]['ip'],'publicKey':secure['publicKey']}),devices[_0x421240][_0xc48e5d(0x240)][_0xc48e5d(0x22e)]==![]&&devices[_0x421240][_0xc48e5d(0x240)][_0xc48e5d(0x247)]==_0xc48e5d(0x23b)&&temporaryAccess2FA(_0x421240,devices[_0x421240]['ip']);}function setSessionTimeout(_0x2f7610,_0xe61fc3){const _0x20dd22=_0x44fc43;let _0x38865e;if(_0x2f7610==_0x20dd22(0x148))_0x38865e=loginExpiry*0x3c*0x3e8;else _0x38865e=devices[_0xe61fc3][_0x20dd22(0x27a)][_0x20dd22(0x27e)]*0x3c*0x3e8-(new Date()[_0x20dd22(0x1ec)]()-devices[_0xe61fc3][_0x20dd22(0x27a)][_0x20dd22(0x28d)]);if(devices[_0xe61fc3][_0x20dd22(0x1ce)])clearTimeout(devices[_0xe61fc3][_0x20dd22(0x1ce)]);devices[_0xe61fc3][_0x20dd22(0x1ce)]=setTimeout(()=>{const _0x104197=_0x20dd22;if(devices[_0xe61fc3][_0x104197(0x173)])clearTimeout(devices[_0xe61fc3][_0x104197(0x173)]);removeSocketListeners(_0xe61fc3),addBlacklist(_0xe61fc3),devices[_0xe61fc3][_0x104197(0x27a)]=null,devices[_0xe61fc3][_0x104197(0x1da)]=null,devices[_0xe61fc3][_0x104197(0x240)][_0x104197(0x205)]=null,devices[_0xe61fc3][_0x104197(0x240)]=validateAccess(devices[_0xe61fc3][_0x104197(0x240)]['token'],_0xe61fc3),!(devices[_0xe61fc3][_0x104197(0x240)]['allow']&&devices[_0xe61fc3][_0x104197(0x240)][_0x104197(0x247)]=='login\x20not\x20required')&&(_0x2f7610==_0x104197(0x148)?io['to'](_0xe61fc3)[_0x104197(0x19a)](_0x104197(0x1bd),{'access':{'allow':![],'reason':_0x104197(0x225),'token':null}}):io['to'](_0xe61fc3)[_0x104197(0x19a)]('status',{'access':{'allow':![],'reason':_0x104197(0x224),'token':null}})),devices[_0xe61fc3][_0x104197(0x240)][_0x104197(0x205)]=null;},_0x38865e);}function setTokenRefresh(_0x51c7e7){const _0x39134f=_0x44fc43;if(devices[_0x51c7e7][_0x39134f(0x173)])clearTimeout(devices[_0x51c7e7]['pidRefreshToken']);devices[_0x51c7e7][_0x39134f(0x173)]=setTimeout(()=>{const _0x336ace=_0x39134f;getClientsWithUuid(_0x51c7e7)['length']!=0x0?(devices[_0x51c7e7]['access']=refreshToken(_0x51c7e7),io['to'](_0x51c7e7)[_0x336ace(0x19a)](_0x336ace(0x1bd),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x51c7e7]['access'],'externalip':devices[_0x51c7e7]['ip'],'publicKey':secure[_0x336ace(0x254)]}),setTokenRefresh(_0x51c7e7)):clearTimeout(devices[_0x51c7e7][_0x336ace(0x173)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x15be6e){const _0x342f10=_0x44fc43,_0x240cd8=getClient(_0x15be6e['id'])[_0x342f10(0x1f1)];_0x15be6e[_0x342f10(0x19a)](_0x342f10(0x288),config),_0x15be6e[_0x342f10(0x19a)]('settings',cleanSettings()),_0x15be6e['on'](_0x342f10(0x1ab),_0x5acca4=>{const _0x38cec3=_0x342f10;if(validateAccess(_0x5acca4,_0x240cd8)[_0x38cec3(0x22e)])addBot();else logging(_0x38cec3(0x18e));}),_0x15be6e['on'](_0x342f10(0x1dd),(_0x4aeab6,_0x3f949f)=>{const _0xc36387=_0x342f10;if(validateAccess(_0x3f949f,_0x240cd8)[_0xc36387(0x22e)])toggleBot(_0x4aeab6[_0xc36387(0x192)],_0x4aeab6['status'],_0x4aeab6[_0xc36387(0x19e)]);else logging(_0xc36387(0x186));}),_0x15be6e['on']('delete-bot',(_0x2435ee,_0xc02962)=>{const _0x3867d6=_0x342f10;if(validateAccess(_0xc02962,_0x240cd8)['allow'])deleteBot(_0x2435ee);else logging(_0x3867d6(0x155));}),_0x15be6e['on'](_0x342f10(0x146),(_0x2498ca,_0x237331)=>{const _0x2191ee=_0x342f10;if(validateAccess(_0x237331,_0x240cd8)[_0x2191ee(0x22e)])storeSettings(_0x2498ca,!![]);else logging(_0x2191ee(0x276));}),_0x15be6e['on']('update-bb',(_0x273a49,_0x4feae6)=>{const _0x428cab=_0x342f10;if(validateAccess(_0x4feae6,_0x240cd8)[_0x428cab(0x22e)])updateBB();else logging(_0x428cab(0x276));}),_0x15be6e['on'](_0x342f10(0x21c),_0x60ebe9=>{const _0x501f2d=_0x342f10;if(validateAccess(_0x60ebe9,_0x240cd8)['allow']){if(devices[_0x240cd8]['pidRefreshToken'])clearTimeout(devices[_0x240cd8][_0x501f2d(0x173)]);if(devices[_0x240cd8]['pidExpireLogin'])clearTimeout(devices[_0x240cd8]['pidExpireLogin']);removeSocketListeners(getClient(_0x15be6e['id'])[_0x501f2d(0x1f1)]),addBlacklist(_0x240cd8),devices[_0x240cd8][_0x501f2d(0x27a)]=null,devices[_0x240cd8]['telegram2FaApproval']=null,devices[_0x240cd8][_0x501f2d(0x240)][_0x501f2d(0x205)]=null,io['to'](getClient(_0x15be6e['id'])[_0x501f2d(0x1f1)])['emit'](_0x501f2d(0x1bd),{'access':{'allow':![],'reason':_0x501f2d(0x25f),'token':null}});}else logging(_0x501f2d(0x143));});}function initializeSocketBot(_0x355e28){const _0x47ef73=_0x44fc43,_0x2125ac=getClient(_0x355e28['id'])[_0x47ef73(0x23a)],_0x4c7026=getClient(_0x355e28['id'])[_0x47ef73(0x1f1)];_0x355e28['on']('get-logs',(_0x7413b,_0x446f5b)=>{const _0x37cf37=_0x47ef73;if(validateAccess(_0x446f5b,_0x4c7026)[_0x37cf37(0x22e)]){if(pid[_0x2125ac])pid[_0x2125ac][_0x37cf37(0x1c8)]({'function':_0x37cf37(0x156),'args':_0x7413b});}else logging(_0x37cf37(0x162));}),_0x355e28['on'](_0x47ef73(0x234),(_0x3792ff,_0x5bf461)=>{const _0x430549=_0x47ef73;if(validateAccess(_0x5bf461,_0x4c7026)[_0x430549(0x22e)]){if(pid[_0x2125ac])pid[_0x2125ac][_0x430549(0x1c8)]({'function':_0x430549(0x264),'args':_0x3792ff});}else logging(_0x430549(0x1c0));}),_0x355e28['on']('store-configuration',(_0x34ea7a,_0x5bcd0e)=>{if(validateAccess(_0x5bcd0e,_0x4c7026)['allow']){if(pid[_0x2125ac])pid[_0x2125ac]['send']({'function':'storeConfiguration','args':_0x34ea7a});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x355e28['on']('store-headless',(_0x2179ee,_0x536be1)=>{const _0x5eb12=_0x47ef73;if(validateAccess(_0x536be1,_0x4c7026)['allow']){if(pid[_0x2125ac])pid[_0x2125ac][_0x5eb12(0x1c8)]({'function':'storeHeadless','args':_0x2179ee});}else logging(_0x5eb12(0x19b));}),_0x355e28['on'](_0x47ef73(0x1b6),_0x43cc8b=>{const _0x55303c=_0x47ef73;if(validateAccess(_0x43cc8b,_0x4c7026)[_0x55303c(0x22e)]){if(pid[_0x2125ac])pid[_0x2125ac][_0x55303c(0x1c8)]({'function':'getStartingBalances','args':null});}else logging(_0x55303c(0x15f));}),_0x355e28['on'](_0x47ef73(0x14c),(_0x1f9bc9,_0x114a4b)=>{const _0x1bb9d6=_0x47ef73;if(validateAccess(_0x114a4b,_0x4c7026)[_0x1bb9d6(0x22e)]){if(pid[_0x2125ac])pid[_0x2125ac][_0x1bb9d6(0x1c8)]({'function':'placeOrder','args':_0x1f9bc9});}else logging(_0x1bb9d6(0x157));}),_0x355e28['on'](_0x47ef73(0x207),_0x3ea24c=>{const _0x2bf65f=_0x47ef73;if(validateAccess(_0x3ea24c,_0x4c7026)[_0x2bf65f(0x22e)]){if(pid[_0x2125ac])pid[_0x2125ac]['send']({'function':_0x2bf65f(0x286),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x355e28['on'](_0x47ef73(0x21c),_0x13e688=>{const _0x436b69=_0x47ef73;if(validateAccess(_0x13e688,_0x4c7026)[_0x436b69(0x22e)]){if(devices[_0x4c7026]['pidRefreshToken'])clearTimeout(devices[_0x4c7026][_0x436b69(0x173)]);if(devices[_0x4c7026][_0x436b69(0x1ce)])clearTimeout(devices[_0x4c7026][_0x436b69(0x1ce)]);removeSocketListeners(getClient(_0x355e28['id'])['uuid']),addBlacklist(_0x4c7026),devices[_0x4c7026][_0x436b69(0x27a)]=null,devices[_0x4c7026][_0x436b69(0x1da)]=null,devices[_0x4c7026]['access'][_0x436b69(0x205)]=null,io['to'](getClient(_0x355e28['id'])[_0x436b69(0x1f1)])['emit'](_0x436b69(0x1bd),{'access':{'allow':![],'reason':_0x436b69(0x25f),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x11d992){const _0x585b56=_0x44fc43;getClientsWithUuid(_0x11d992)[_0x585b56(0x284)](_0x379072=>{const _0x72ecf1=_0x585b56;getSocket(_0x379072['id'])[_0x72ecf1(0x1ca)]();});}function cleanSettings(){const _0x3e3e01=_0x44fc43;let _0x497b49=settings;return settings[_0x3e3e01(0x22d)]&&settings[_0x3e3e01(0x22d)]!=''&&(_0x497b49={..._0x497b49,'telegramToken':_0x3e3e01(0x272)}),settings[_0x3e3e01(0x15d)]&&settings[_0x3e3e01(0x15d)]!=''&&(_0x497b49={..._0x497b49,'bbPassword':'************'}),_0x497b49;}function updateBB(){const _0x54930d=_0x44fc43;process[_0x54930d(0x1c8)]({'update':!![]},_0x367a72=>{});}function startBot(_0x47df93,_0xdcfa1b,_0x132c29){const _0x17e398=_0x44fc43;let _0x4decfd=![];const _0x851f0c=_0x47df93[0x0];_0xdcfa1b={..._0xdcfa1b,'stdio':['inherit',_0x17e398(0x1d6),_0x17e398(0x1d6),_0x17e398(0x151)]},pid[_0x851f0c]=childProcess[_0x17e398(0x270)](botfile,_0x47df93,_0xdcfa1b),pid[_0x851f0c]['on'](_0x17e398(0x1d2),_0x3c2b5c=>{const _0x57e2c7=_0x17e398;switch(Object['keys'](_0x3c2b5c)[0x0]){case _0x57e2c7(0x27c):updateBotName(_0x851f0c,_0x3c2b5c[_0x57e2c7(0x27c)]);break;case _0x57e2c7(0x1bd):updateStatus(_0x851f0c,_0x3c2b5c[_0x57e2c7(0x1bd)]);break;case _0x57e2c7(0x19e):updateLive(_0x851f0c,_0x3c2b5c[_0x57e2c7(0x19e)]);break;case _0x57e2c7(0x28b):updateLive(_0x851f0c,_0x3c2b5c['started']),io['to'](_0x851f0c)['emit'](_0x57e2c7(0x1bd),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x57e2c7(0x211):_0x3c2b5c['stop']==_0x57e2c7(0x21f)&&stopBot(_0x851f0c);_0x3c2b5c['stop']==_0x57e2c7(0x229)&&toggleBot(_0x851f0c,_0x57e2c7(0x1e6),'stopped');break;case _0x57e2c7(0x274):sendTelegram(_0x851f0c,_0x3c2b5c[_0x57e2c7(0x274)]);break;case _0x57e2c7(0x256):io['to'](_0x851f0c)[_0x57e2c7(0x19a)](_0x3c2b5c[_0x57e2c7(0x256)],_0x3c2b5c[_0x57e2c7(0x278)]);break;}}),pid[_0x851f0c]['on'](_0x17e398(0x214),function(_0x3c06a5){if(_0x4decfd)return;_0x4decfd=!![],_0x132c29(_0x3c06a5);}),pid[_0x851f0c]['on'](_0x17e398(0x18b),function(_0x369f55){const _0x34837d=_0x17e398;if(_0x4decfd)return;_0x4decfd=!![],_0x132c29(null);const _0x2cb570=dbConfig[_0x34837d(0x265)](_0x34837d(0x288))[_0x34837d(0x24a)]({'botID':_0x851f0c})[_0x34837d(0x18a)]();_0x2cb570&&(_0x2cb570['status']==_0x34837d(0x169)||_0x2cb570[_0x34837d(0x1bd)]==_0x34837d(0x218))&&(updateLive(_0x851f0c,'stopped'),logging(_0x34837d(0x219)+_0x851f0c),startBot([_0x851f0c,userID],{'cwd':bbpath},function(_0x36afbe){if(_0x36afbe)logging(_0x36afbe);}));});}function stopBot(_0x471ba3){const _0x100445=_0x44fc43;getClientsWithBotID(_0x471ba3)['forEach'](_0xbedeb9=>{getSocket(_0xbedeb9['id'])['disconnect'](!![]),removeClient(_0xbedeb9['id']);});if(pid[_0x471ba3])pid[_0x471ba3][_0x100445(0x229)]();}function _0x5030(){const _0x220bf1=['started','accept','timestamp','reload','Invalid\x20authentication\x20token\x20(2)','http','Unauthorized\x20attempt\x20to\x20log\x20out','analytics','Ok,\x20will\x20send\x20order\x20notifications\x20only','store-settings','Crypt','login','getDate','show','Temporary\x20access\x20rejected','place-order','clientip','@analytics/google-analytics','yargs/yargs','sortBy','ipc','RSA-OAEP','\x20/\x20','use','Unauthorized\x20attempt\x20to\x20delete\x20bot','emitHistory','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/restart\x20-\x20restart\x20bot(s)\x0a','NTBA_FIX_319','getUTCHours','hasOwnProperty','remove','bbPassword','callback_query','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','assign','f2aRequired','Unauthorized\x20attempt\x20to\x20get\x20logs','password','stopped','3000','set','node-telegram-bot-api','127.0.0.1','enabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','getHours','secure','referer','verify','Notifications\x20types:\x20','stopPolling','::ffff:127.0.0.1','type','pidRefreshToken','Allow\x20login\x20from\x20IP\x20address\x20<b>','7IQSKcm','settings.','username','\x20only\x0a','/help\x20-\x20show\x20available\x20commands\x0a','2FA\x20login\x20rejected','add','239656UqKiDK','readdirSync','getMonth','274zQenPq','deleted\x20Bot\x20','join','No\x20authentication\x20token','initclient','copyFileSync','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','notification','max','Invalid\x20Telegram\x20token','value','exit','child_process','user','Unauthorized\x20attempt\x20to\x20add\x20bot','Access\x20enabled\x20for\x20','-----------------------------------------------------------------------------------','from','botID','build','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','<b>Telegram\x20bot\x20status:</b>\x0a','createServer','/status\x20-\x20show\x20bot(s)\x20status\x0a','<b>Balance\x20Bot\x20status:</b>\x0a','error\x20while\x20deleting\x20config\x20files:\x20','emit','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','2FA\x20login\x20token\x20generated','randomFillSync','live','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','hashSync','toIPv4MappedAddress','-performance.json','404\x20Not\x20Found','624OZLxIA','settings','sendMessage','once','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','version','backup/','add-bot','invalid\x20credentials','telegramEnabled','isIPv4MappedAddress','reject','search','Token\x20blacklisted','length','server','1000','Alerts','get-starting-balances','starting\x20bot\x20|\x20Bot\x20','All\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','disabled\x20Bot\x20','isDirectory','status','timeshift','bot.js','Unauthorized\x20attempt\x20to\x20get\x20portfolio','blacklist','event','2915QDSEOO','getSeconds','clients','parse','padStart','send','lowdb','removeAllListeners','temporary\x20token\x20generated','2891262YgRoDU','sign','pidExpireLogin','bot-','/:bot/performance','1556nSamDp','message','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','listen','Bot\x20','inherit','2FA\x20login\x20required','orders','compareSync','telegram2FaApproval',',\x20must\x20be\x20a\x204\x20digit\x20number','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','update-bot','build2','config/','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','path','host','all','bbUsername','telegramUsername','disabled','Unauthorized\x20login\x20attempt\x20(timeout)','headers','/off\x20-\x20stop\x20bot(s)\x0a','login\x20required','includes','getTime','temporary\x20access\x20not\x20allowed','mkdirSync','port','Login\x20accepted','uuid','SIGTERM','then','reset-password','loginRequired','removeListener','15\x20min','User\x20has\x20been\x20validated','Ok,\x20will\x20send\x20alert\x20notifications\x20only','30\x20min','lowdb/adapters/FileSync','-results.json','36ByLlTZ','whitelist',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','push','botmanager','socket.io','742480UiaMkZ','data','token','disconnect','cancel-loading','exp','Invalid\x20username\x20or\x20IP\x20address','hybrid-crypto-js','default','randomBytes','success','sockets','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','https://hodlerhacks.com','stop','Notifications\x20enabled\x0a','unlinkSync','error','index.html','Password\x20reset\x20rejected','Notifications\x20enabled','new','restarting\x20Bot\x20','All\x20bots','bb-secure.json','logout','sendFile','match','restart','express','login\x20token\x20generated','toString','starting\x20new\x20bot\x20|\x20Bot\x20','temporary\x20access\x20timeout','access\x20timeout','350574BuqDEg','Password\x20has\x20been\x20reset\x20to:\x20','decrypt','kill','login\x20token\x20valid','No\x20bots\x20running\x20right\x20now','bb-config.json','telegramToken','allow','Login\x20rejected','new-disabled','getFullYear','running','ipv6','get-portfolio','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','handshake','secret','alerts','log','bot','2FA\x20required','login\x20not\x20required','page','\x20minutes','(((.+)+)+)+$','access','whitelistEnabled','idling\x20bot\x20\x20\x20|\x20Bot\x20','HTML','slice','entries','defaults','reason','isValid','Error:\x20Invalid\x20argument\x20','find','existsSync','filter','chat','bb-settings.json','/:bot/configuration','\x20>\x20','/:bot','/:bot/support','conn','publicKey','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','function','getMinutes','onText','privateKey','\x20|\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','hex','temporary\x20access\x20rejected','constructor','logged\x20out','sha256','SIGINT','enabled\x20Bot\x20','telegramEvents','getPortfolio','get','</b>\x20?','date-fns','remoteAddress','store','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','cloneDeep','All','name','answerCallbackQuery','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','fork','/:bot/coins','************','static','telegram','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20update\x20settings','1241406CkxBjM','args','write','telegramIpApproval','split','botname','showname','expiry','telegramChatId','encryptedUuid','env','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','catch','forEach','yes','cancelLoading','/on\x20-\x20start\x20bot(s)\x0a','bots','UA-192771731-1','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications'];_0x5030=function(){return _0x220bf1;};return _0x5030();}function addBot(){const _0xb87026=_0x44fc43;let _0x2c36d3;for(let _0xc053ea=0x1;_0xc053ea<0x3e9;_0xc053ea++){_0x2c36d3=_0xc053ea['toString']()['padStart'](0x3,'0');let _0x11a5c2=config[_0xb87026(0x24a)](_0x5bca8a=>_0x5bca8a[_0xb87026(0x192)]==_0x2c36d3);if(!_0x11a5c2)break;}if(_0x2c36d3===_0xb87026(0x1b4)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0xb87026(0x223)+_0x2c36d3),dbConfig[_0xb87026(0x265)](_0xb87026(0x288))[_0xb87026(0x200)]({'botID':_0x2c36d3,'botname':_0xb87026(0x1d5)+_0x2c36d3,'status':_0xb87026(0x218),'live':''})['write'](),startBot([_0x2c36d3,userID],{'cwd':bbpath},function(_0x440b2a){if(_0x440b2a)logging(_0x440b2a);}),config=getConfiguration(),io['to'](_0xb87026(0x201))['emit'](_0xb87026(0x288),config);}function deleteBot(_0x43c70d){const _0x3876b8=_0x44fc43;getClientsWithBotID(_0x43c70d)['forEach'](_0x33e28a=>{const _0x4969fd=_0x47df;getSocket(_0x33e28a['id'])[_0x4969fd(0x206)](!![]),removeClient(_0x33e28a['id']);}),dbConfig[_0x3876b8(0x265)](_0x3876b8(0x288))[_0x3876b8(0x15c)]({'botID':_0x43c70d})[_0x3876b8(0x279)](),logging(_0x3876b8(0x180)+_0x43c70d),stopBot(_0x43c70d);try{fs[_0x3876b8(0x213)](path[_0x3876b8(0x181)](configpath,_0x3876b8(0x1cf)+_0x43c70d+'-config.json')),fs[_0x3876b8(0x213)](path[_0x3876b8(0x181)](configpath,_0x3876b8(0x1cf)+_0x43c70d+'-events.json')),fs[_0x3876b8(0x213)](path['join'](configpath,_0x3876b8(0x1cf)+_0x43c70d+_0x3876b8(0x1a2))),fs['unlinkSync'](path[_0x3876b8(0x181)](configpath,_0x3876b8(0x1cf)+_0x43c70d+_0x3876b8(0x1fc)));}catch(_0x6c39b2){if(_0x6c39b2)logging(_0x3876b8(0x199),_0x6c39b2);}config=getConfiguration(),io['to'](_0x3876b8(0x201))[_0x3876b8(0x19a)](_0x3876b8(0x288),config);}function toggleBot(_0x2fc4a0,_0x3c9f62,_0x2458ed){const _0x415e10=_0x44fc43;dbConfig[_0x415e10(0x265)](_0x415e10(0x288))[_0x415e10(0x24a)]({'botID':_0x2fc4a0})[_0x415e10(0x160)]({'status':_0x3c9f62})[_0x415e10(0x160)]({'live':_0x2458ed})[_0x415e10(0x279)]();if(_0x3c9f62==_0x415e10(0x169)||_0x3c9f62==_0x415e10(0x218))logging(_0x415e10(0x262)+_0x2fc4a0),startBot([_0x2fc4a0,userID],{'cwd':bbpath},function(_0x1b8c0b){if(_0x1b8c0b)logging(_0x1b8c0b);});else(_0x3c9f62=='disabled'||_0x3c9f62==_0x415e10(0x230))&&(logging(_0x415e10(0x1bb)+_0x2fc4a0),stopBot(_0x2fc4a0));config=getConfiguration(),io['to'](_0x415e10(0x201))[_0x415e10(0x19a)](_0x415e10(0x288),config);}function toggleStatus(_0x5dbab1){const _0x4b9681=_0x44fc43;let _0x2488a5=dbConfig[_0x4b9681(0x265)](_0x4b9681(0x288))[_0x4b9681(0x24a)]({'botID':_0x5dbab1})['value'](),_0x242725;if(_0x2488a5['status']===_0x4b9681(0x169))_0x242725=_0x4b9681(0x1e6);else{if(_0x2488a5[_0x4b9681(0x1bd)]===_0x4b9681(0x218))_0x242725=_0x4b9681(0x230);else{if(_0x2488a5['status']==='new-disabled')_0x242725=_0x4b9681(0x218);else{if(_0x2488a5[_0x4b9681(0x1bd)]===_0x4b9681(0x1e6))_0x242725='enabled';}}}return _0x242725;}function updateStatus(_0x4b820b,_0x44210a){const _0x2ae9ef=_0x44fc43;dbConfig['get'](_0x2ae9ef(0x288))[_0x2ae9ef(0x24a)]({'botID':_0x4b820b})[_0x2ae9ef(0x160)]({'status':_0x44210a})[_0x2ae9ef(0x279)](),config=getConfiguration(),io['to'](_0x2ae9ef(0x201))['emit'](_0x2ae9ef(0x288),config);}function updateLive(_0x298552,_0x19257b){const _0x5dcd99=_0x44fc43;dbConfig[_0x5dcd99(0x265)]('bots')[_0x5dcd99(0x24a)]({'botID':_0x298552})[_0x5dcd99(0x160)]({'live':_0x19257b})['write'](),config=getConfiguration(),io['to'](_0x5dcd99(0x201))[_0x5dcd99(0x19a)](_0x5dcd99(0x288),config);}function updateBotName(_0x5135b0,_0x4d1242){const _0xff55b6=_0x44fc43;dbConfig[_0xff55b6(0x265)](_0xff55b6(0x288))[_0xff55b6(0x24a)]({'botID':_0x5135b0})[_0xff55b6(0x160)]({'botname':_0x4d1242})[_0xff55b6(0x279)](),config=getConfiguration(),io['to'](_0xff55b6(0x201))[_0xff55b6(0x19a)](_0xff55b6(0x288),config);}function telegramError(_0x48bb65){const _0x2d367c=_0x44fc43;console[_0x2d367c(0x239)](getTimeStamp()+_0x2d367c(0x1ff));}function validateTelegram(_0x4af3d0){const _0x2e7c8b=_0x44fc43;if(_0x4af3d0[_0x2e7c8b(0x191)]['username']!=settings[_0x2e7c8b(0x1e5)]&&'@'+_0x4af3d0[_0x2e7c8b(0x191)][_0x2e7c8b(0x177)]!=settings['telegramUsername'])return tgBot[_0x2e7c8b(0x1a6)](_0x4af3d0[_0x2e7c8b(0x24d)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2e7c8b(0x243)})['catch'](_0x510f26=>{telegramError(_0x510f26);}),![];return!![];}async function initTelegram(){const _0x4e561a=_0x44fc43;if(tgBot)tgBot[_0x4e561a(0x170)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4e561a(0x22d)],{'polling':!![]});let _0x1a999a='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x1a999a+='\x0a',_0x1a999a+='/enable\x20-\x20enable\x20notifications\x0a',_0x1a999a+='/disable\x20-\x20disable\x20notifications\x0a',_0x1a999a+=_0x4e561a(0x26a),_0x1a999a+=_0x4e561a(0x158),_0x1a999a+=_0x4e561a(0x287),_0x1a999a+=_0x4e561a(0x1e9),_0x1a999a+=_0x4e561a(0x197),_0x1a999a+=_0x4e561a(0x179);let _0x2b25b8=_0x4e561a(0x282);_0x2b25b8+='\x0a',_0x2b25b8+=_0x1a999a,tgBot[_0x4e561a(0x258)](/\/start/,_0x4f4a4d=>{const _0x3195d2=_0x4e561a;if(!validateTelegram(_0x4f4a4d))return;if(settings[_0x3195d2(0x27f)]!=_0x4f4a4d['chat']['id'])updateSetting(_0x3195d2(0x27f),_0x4f4a4d[_0x3195d2(0x24d)]['id']);updateSetting(_0x3195d2(0x1ad),!![]),tgBot[_0x3195d2(0x1a6)](_0x4f4a4d[_0x3195d2(0x24d)]['id'],_0x2b25b8)[_0x3195d2(0x283)](_0x54c0ee=>{telegramError(_0x54c0ee);});}),tgBot[_0x4e561a(0x258)](/\/enable/,_0x52f4b5=>{const _0x371e75=_0x4e561a;if(!validateTelegram(_0x52f4b5))return;if(settings[_0x371e75(0x27f)]!=_0x52f4b5[_0x371e75(0x24d)]['id'])updateSetting(_0x371e75(0x27f),_0x52f4b5[_0x371e75(0x24d)]['id']);updateSetting(_0x371e75(0x1ad),!![]),tgBot['sendMessage'](_0x52f4b5[_0x371e75(0x24d)]['id'],_0x371e75(0x217))[_0x371e75(0x283)](_0x58bc46=>{telegramError(_0x58bc46);});}),tgBot[_0x4e561a(0x258)](/\/config/,async _0x298cf7=>{const _0x5a31b5=_0x4e561a;if(!validateTelegram(_0x298cf7))return;tgBot[_0x5a31b5(0x1f6)](_0x5a31b5(0x15e)),tgBot[_0x5a31b5(0x1a6)](_0x298cf7[_0x5a31b5(0x24d)]['id'],_0x5a31b5(0x25b),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x5a31b5(0x1b5),'callback_data':_0x5a31b5(0x238)},{'text':_0x5a31b5(0x26c),'callback_data':'all'}]]}})[_0x5a31b5(0x283)](_0xfd2b24=>{telegramError(_0xfd2b24);}),tgBot['on'](_0x5a31b5(0x15e),async _0x19b07e=>{const _0x11353c=_0x5a31b5,_0xb95802=_0x19b07e[_0x11353c(0x204)],_0x4b253a=_0x19b07e[_0x11353c(0x1d2)];tgBot[_0x11353c(0x26e)](_0x19b07e['id'])['then'](async()=>{const _0x2457cf=_0x11353c;_0xb95802==_0x2457cf(0x1d8)&&(updateSetting(_0x2457cf(0x263),'orders'),updateSetting(_0x2457cf(0x1ad),!![]),await tgBot[_0x2457cf(0x1a6)](_0x4b253a[_0x2457cf(0x24d)]['id'],_0x2457cf(0x145))[_0x2457cf(0x283)](_0x13ce35=>{telegramError(_0x13ce35);}));_0xb95802=='alerts'&&(updateSetting(_0x2457cf(0x263),_0x2457cf(0x238)),updateSetting(_0x2457cf(0x1ad),!![]),await tgBot[_0x2457cf(0x1a6)](_0x4b253a[_0x2457cf(0x24d)]['id'],_0x2457cf(0x1f9))[_0x2457cf(0x283)](_0x595932=>{telegramError(_0x595932);}));_0xb95802=='all'&&(updateSetting('telegramEvents','all'),updateSetting(_0x2457cf(0x1ad),!![]),await tgBot['sendMessage'](_0x4b253a[_0x2457cf(0x24d)]['id'],_0x2457cf(0x28a))[_0x2457cf(0x283)](_0x1672e4=>{telegramError(_0x1672e4);}));if(!settings[_0x2457cf(0x27f)])tgBot['sendMessage'](_0x4b253a[_0x2457cf(0x24d)]['id'],_0x2457cf(0x1ba))['catch'](_0x1fc944=>{telegramError(_0x1fc944);});}),tgBot[_0x11353c(0x1f6)](_0x11353c(0x15e));});}),tgBot[_0x4e561a(0x258)](/\/status/,_0x66d164=>{const _0x198d91=_0x4e561a;if(!validateTelegram(_0x66d164))return;let _0x5c3dc9=_0x198d91(0x198);config['forEach'](_0xfb8e0b=>{const _0x311b84=_0x198d91;_0x5c3dc9+=_0x311b84(0x1d5)+_0xfb8e0b[_0x311b84(0x192)]+_0x311b84(0x25a)+_0xfb8e0b[_0x311b84(0x27c)]+':\x20'+_0xfb8e0b[_0x311b84(0x1bd)]+_0x311b84(0x153)+_0xfb8e0b[_0x311b84(0x19e)]+'\x0a';}),_0x5c3dc9+='\x0a',_0x5c3dc9+=_0x198d91(0x195),_0x5c3dc9+=!settings[_0x198d91(0x1ad)]?'Notifications\x20disabled\x0a':_0x198d91(0x212),_0x5c3dc9+=settings[_0x198d91(0x1ad)]?settings[_0x198d91(0x263)]==_0x198d91(0x1e3)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x198d91(0x16f)+settings[_0x198d91(0x263)]+_0x198d91(0x178):'',tgBot[_0x198d91(0x1a6)](_0x66d164[_0x198d91(0x24d)]['id'],_0x5c3dc9,{'parse_mode':'HTML'})[_0x198d91(0x283)](_0x503884=>{telegramError(_0x503884);});}),tgBot[_0x4e561a(0x258)](/\/restart/,_0x100814=>{const _0x592b13=_0x4e561a;if(!validateTelegram(_0x100814))return;tgBot[_0x592b13(0x1f6)]('callback_query');const _0x53ef6e=getEnabledBots();if(_0x53ef6e[_0x592b13(0x1b2)]==0x0)tgBot[_0x592b13(0x1a6)](_0x100814[_0x592b13(0x24d)]['id'],_0x592b13(0x22b))['catch'](_0x54effd=>{telegramError(_0x54effd);});else{if(_0x53ef6e[_0x592b13(0x1b2)]>0x1)_0x53ef6e[_0x592b13(0x200)]({'botID':'all'});let _0x521efb=[],_0x59a225=[];const _0x41cfba=_0x53ef6e[_0x592b13(0x1b2)]%0x4==0x0||_0x53ef6e[_0x592b13(0x1b2)]%0x4==0x3||_0x53ef6e[_0x592b13(0x1b2)]%0x3==0x1?0x4:0x3;let _0x24ef46=0x0;_0x53ef6e[_0x592b13(0x284)]((_0x36715f,_0x40943f)=>{const _0x3d8678=_0x592b13;if(_0x40943f%_0x41cfba==0x0)_0x59a225=[];_0x59a225[_0x3d8678(0x200)]({'text':_0x36715f[_0x3d8678(0x192)]==_0x3d8678(0x1e3)?_0x3d8678(0x21a):'Bot\x20'+_0x36715f[_0x3d8678(0x192)],'callback_data':_0x36715f[_0x3d8678(0x192)]}),_0x40943f%_0x41cfba==0x0&&(_0x521efb[_0x24ef46]=_0x59a225,_0x24ef46++);}),tgBot[_0x592b13(0x1a6)](_0x100814[_0x592b13(0x24d)]['id'],_0x592b13(0x20f),{'reply_markup':{'inline_keyboard':_0x521efb}})[_0x592b13(0x283)](_0x2d469f=>{telegramError(_0x2d469f);}),tgBot['on'](_0x592b13(0x15e),async _0x1c77ff=>{const _0x2feb01=_0x592b13,_0x7d3ba3=_0x1c77ff['data'],_0x398d6e=_0x1c77ff[_0x2feb01(0x1d2)];tgBot[_0x2feb01(0x26e)](_0x1c77ff['id'])[_0x2feb01(0x1f3)](async()=>{const _0x44cc2f=_0x2feb01;if(_0x7d3ba3==_0x44cc2f(0x1e3)){if(settings['telegramEvents']==_0x44cc2f(0x1d8))tgBot['sendMessage'](_0x398d6e[_0x44cc2f(0x24d)]['id'],_0x44cc2f(0x1d3))[_0x44cc2f(0x283)](_0x46a0c6=>{telegramError(_0x46a0c6);});config[_0x44cc2f(0x284)](_0xff60d3=>{const _0x433f8a=_0x44cc2f;stopBot(_0xff60d3[_0x433f8a(0x192)]);});}else{if(settings[_0x44cc2f(0x263)]==_0x44cc2f(0x1d8))tgBot[_0x44cc2f(0x1a6)](_0x398d6e[_0x44cc2f(0x24d)]['id'],_0x44cc2f(0x235)+_0x7d3ba3)[_0x44cc2f(0x283)](_0x5370c1=>{telegramError(_0x5370c1);});stopBot(_0x7d3ba3);}}),tgBot['removeListener'](_0x2feb01(0x15e));});}}),tgBot[_0x4e561a(0x258)](/\/on/,_0x2a05bb=>{const _0x1f54f6=_0x4e561a;if(!validateTelegram(_0x2a05bb))return;tgBot[_0x1f54f6(0x1f6)](_0x1f54f6(0x15e));const _0x1f73e6=getDisabledBots();if(_0x1f73e6[_0x1f54f6(0x1b2)]==0x0)tgBot[_0x1f54f6(0x1a6)](_0x2a05bb['chat']['id'],_0x1f54f6(0x1b8))[_0x1f54f6(0x283)](_0x380841=>{telegramError(_0x380841);});else{if(_0x1f73e6[_0x1f54f6(0x1b2)]>0x1)_0x1f73e6[_0x1f54f6(0x200)]({'botID':'all'});let _0x41bfed=[],_0x163635=[];const _0x4685a1=_0x1f73e6['length']%0x4==0x0||_0x1f73e6[_0x1f54f6(0x1b2)]%0x4==0x3||_0x1f73e6[_0x1f54f6(0x1b2)]%0x3==0x1?0x4:0x3;let _0x31310d=0x0;_0x1f73e6[_0x1f54f6(0x284)]((_0x314f88,_0xd76dec)=>{const _0x361aa7=_0x1f54f6;if(_0xd76dec%_0x4685a1==0x0)_0x163635=[];_0x163635[_0x361aa7(0x200)]({'text':_0x314f88['botID']=='all'?_0x361aa7(0x21a):_0x361aa7(0x1d5)+_0x314f88[_0x361aa7(0x192)],'callback_data':_0x314f88[_0x361aa7(0x192)]}),_0xd76dec%_0x4685a1==0x0&&(_0x41bfed[_0x31310d]=_0x163635,_0x31310d++);}),tgBot[_0x1f54f6(0x1a6)](_0x2a05bb[_0x1f54f6(0x24d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x41bfed}})[_0x1f54f6(0x283)](_0xe58b18=>{telegramError(_0xe58b18);}),tgBot['on'](_0x1f54f6(0x15e),async _0x538865=>{const _0x245161=_0x1f54f6,_0x108a37=_0x538865[_0x245161(0x204)],_0x41446a=_0x538865[_0x245161(0x1d2)];tgBot['answerCallbackQuery'](_0x538865['id'])[_0x245161(0x1f3)](async()=>{const _0x5d7e83=_0x245161;if(_0x108a37==_0x5d7e83(0x1e3)){if(settings[_0x5d7e83(0x263)]=='orders')tgBot[_0x5d7e83(0x1a6)](_0x41446a[_0x5d7e83(0x24d)]['id'],_0x5d7e83(0x19f))[_0x5d7e83(0x283)](_0x2935cd=>{telegramError(_0x2935cd);});_0x1f73e6[_0x5d7e83(0x284)](_0x529be2=>{const _0x26d5e0=_0x5d7e83;if(_0x529be2[_0x26d5e0(0x192)]!=_0x26d5e0(0x1e3))toggleBot(_0x529be2['botID'],toggleStatus(_0x529be2[_0x26d5e0(0x192)]),_0x26d5e0(0x164));});}else{if(settings[_0x5d7e83(0x263)]==_0x5d7e83(0x1d8))tgBot[_0x5d7e83(0x1a6)](_0x41446a[_0x5d7e83(0x24d)]['id'],_0x5d7e83(0x1dc)+_0x108a37)[_0x5d7e83(0x283)](_0x4cde96=>{telegramError(_0x4cde96);});toggleBot(_0x108a37,toggleStatus(_0x108a37),_0x5d7e83(0x164));}}),tgBot[_0x245161(0x1f6)]('callback_query');});}}),tgBot[_0x4e561a(0x258)](/\/off/,_0x15ac14=>{const _0x3fa9e1=_0x4e561a;if(!validateTelegram(_0x15ac14))return;tgBot[_0x3fa9e1(0x1f6)]('callback_query');const _0x1c935e=getEnabledBots();if(_0x1c935e['length']==0x0)tgBot[_0x3fa9e1(0x1a6)](_0x15ac14['chat']['id'],_0x3fa9e1(0x22b))[_0x3fa9e1(0x283)](_0x6464ac=>{telegramError(_0x6464ac);});else{if(_0x1c935e['length']>0x1)_0x1c935e[_0x3fa9e1(0x200)]({'botID':_0x3fa9e1(0x1e3)});let _0x507982=[],_0x82f917=[];const _0x583ff5=_0x1c935e['length']%0x4==0x0||_0x1c935e[_0x3fa9e1(0x1b2)]%0x4==0x3||_0x1c935e[_0x3fa9e1(0x1b2)]%0x3==0x1?0x4:0x3;let _0x27d691=0x0;_0x1c935e[_0x3fa9e1(0x284)]((_0x1e0be7,_0x314932)=>{const _0x59d283=_0x3fa9e1;if(_0x314932%_0x583ff5==0x0)_0x82f917=[];_0x82f917['push']({'text':_0x1e0be7[_0x59d283(0x192)]==_0x59d283(0x1e3)?'All\x20bots':_0x59d283(0x1d5)+_0x1e0be7[_0x59d283(0x192)],'callback_data':_0x1e0be7[_0x59d283(0x192)]}),_0x314932%_0x583ff5==0x0&&(_0x507982[_0x27d691]=_0x82f917,_0x27d691++);}),tgBot[_0x3fa9e1(0x1a6)](_0x15ac14[_0x3fa9e1(0x24d)]['id'],_0x3fa9e1(0x1e0),{'reply_markup':{'inline_keyboard':_0x507982}})[_0x3fa9e1(0x283)](_0x2e0c27=>{telegramError(_0x2e0c27);}),tgBot['on']('callback_query',async _0x4ce8d4=>{const _0x198eac=_0x3fa9e1,_0x38fa50=_0x4ce8d4['data'],_0x5f4b3c=_0x4ce8d4[_0x198eac(0x1d2)];tgBot[_0x198eac(0x26e)](_0x4ce8d4['id'])[_0x198eac(0x1f3)](async()=>{const _0x508a7b=_0x198eac;if(_0x38fa50==_0x508a7b(0x1e3)){if(settings[_0x508a7b(0x263)]==_0x508a7b(0x1d8))tgBot[_0x508a7b(0x1a6)](_0x5f4b3c['chat']['id'],_0x508a7b(0x1b9))[_0x508a7b(0x283)](_0x3b086d=>{telegramError(_0x3b086d);});_0x1c935e[_0x508a7b(0x284)](_0x315a8c=>{const _0x4dafd1=_0x508a7b;if(_0x315a8c[_0x4dafd1(0x192)]!='all')toggleBot(_0x315a8c[_0x4dafd1(0x192)],toggleStatus(_0x315a8c[_0x4dafd1(0x192)]),_0x4dafd1(0x164));});}else{if(settings[_0x508a7b(0x263)]==_0x508a7b(0x1d8))tgBot[_0x508a7b(0x1a6)](_0x5f4b3c[_0x508a7b(0x24d)]['id'],_0x508a7b(0x16a)+_0x38fa50)[_0x508a7b(0x283)](_0x54920e=>{telegramError(_0x54920e);});toggleBot(_0x38fa50,toggleStatus(_0x38fa50),'stopped');}}),tgBot[_0x198eac(0x1f6)](_0x198eac(0x15e));});}}),tgBot[_0x4e561a(0x258)](/\/disable/,_0x1a81c3=>{const _0x3dd090=_0x4e561a;if(!validateTelegram(_0x1a81c3))return;tgBot[_0x3dd090(0x1a6)](_0x1a81c3[_0x3dd090(0x24d)]['id'],'Notifications\x20disabled')[_0x3dd090(0x283)](_0x5aed1f=>{telegramError(_0x5aed1f);}),updateSetting(_0x3dd090(0x1ad),![]);}),tgBot[_0x4e561a(0x258)](/\/help/,_0x5141d5=>{const _0x1a562b=_0x4e561a;if(!validateTelegram(_0x5141d5))return;tgBot[_0x1a562b(0x1a6)](_0x5141d5[_0x1a562b(0x24d)]['id'],_0x1a999a)[_0x1a562b(0x283)](_0x1b467a=>{telegramError(_0x1b467a);});}),tgBot['on']('polling_error',_0x85ed55=>{const _0x254802=_0x4e561a;_0x85ed55[_0x254802(0x222)]()['includes'](_0x254802(0x1a3))&&(logging(_0x254802(0x189)),tgBot[_0x254802(0x170)](),tgBot=null,io['to']('botmanager')[_0x254802(0x19a)](_0x254802(0x187),_0x254802(0x189)));}),process[_0x4e561a(0x1a7)](_0x4e561a(0x261),()=>{const _0x7e304c=_0x4e561a;if(tgBot)tgBot[_0x7e304c(0x170)]();process[_0x7e304c(0x18b)](0x1);}),process[_0x4e561a(0x1a7)](_0x4e561a(0x1f2),()=>{const _0x420313=_0x4e561a;if(tgBot)tgBot[_0x420313(0x170)]();process[_0x420313(0x18b)](0x1);});}}function disableTelegram(){const _0x51a45e=_0x44fc43;tgBot&&(tgBot[_0x51a45e(0x170)](),tgBot=null);}function sendTelegram(_0x1764c0,_0x35dd1f){const _0x1d0118=_0x44fc43;if(settings[_0x1d0118(0x1ad)]){if(settings[_0x1d0118(0x263)]==_0x1d0118(0x1e3)||(_0x35dd1f[_0x1d0118(0x172)]==_0x1d0118(0x214)||_0x35dd1f[_0x1d0118(0x172)]==_0x1d0118(0x20d))&&settings[_0x1d0118(0x263)]==_0x1d0118(0x238)||_0x35dd1f[_0x1d0118(0x172)]=='order'&&settings[_0x1d0118(0x263)]==_0x1d0118(0x1d8)){if(tgBot&&settings[_0x1d0118(0x27f)]){if(_0x35dd1f[_0x1d0118(0x27d)])tgBot[_0x1d0118(0x1a6)](settings[_0x1d0118(0x27f)],_0x35dd1f[_0x1d0118(0x27c)]+_0x1d0118(0x250)+_0x35dd1f[_0x1d0118(0x1c2)])[_0x1d0118(0x283)](_0x538424=>{telegramError(_0x538424);});else tgBot[_0x1d0118(0x1a6)](settings[_0x1d0118(0x27f)],'Bot\x20'+_0x1764c0+'\x20>\x20'+_0x35dd1f['event'])[_0x1d0118(0x283)](_0x5cc9cb=>{telegramError(_0x5cc9cb);});}}}}function getDeviceWithIp(_0x21a0cd){const _0x17472a=_0x44fc43;return devices[_0x17472a(0x24a)](_0x7f2e11=>_0x7f2e11['ip']===_0x21a0cd);}function temporaryAccess2FA(_0x21561e,_0x11f45b){const _0x2b3c38=_0x44fc43;let _0x486873=new Date(),_0x20f4f8=![];if(lastIpApproval){if(_0x486873-lastIpApproval<0x1388)_0x20f4f8=!![];}lastIpApproval=new Date();if(_0x20f4f8)return;tgBot&&settings[_0x2b3c38(0x27f)]&&(tgBot[_0x2b3c38(0x1f6)](_0x2b3c38(0x15e)),tgBot[_0x2b3c38(0x1a6)](settings['telegramChatId'],_0x2b3c38(0x194)+normalizeIP(_0x11f45b)[_0x2b3c38(0x14a)]+_0x2b3c38(0x266),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x2b3c38(0x1f7),'callback_data':'15'},{'text':_0x2b3c38(0x1fa),'callback_data':'30'},{'text':_0x2b3c38(0x1af),'callback_data':_0x2b3c38(0x1af)}]]}})[_0x2b3c38(0x283)](_0x5bf419=>{telegramError(_0x5bf419);}),tgBot['on']('callback_query',async _0x12ae50=>{const _0x31d47e=_0x2b3c38,_0x357499=_0x12ae50[_0x31d47e(0x204)],_0x4b2466=_0x12ae50[_0x31d47e(0x1d2)];tgBot[_0x31d47e(0x26e)](_0x12ae50['id'])[_0x31d47e(0x1f3)](async()=>{const _0x300d58=_0x31d47e;devices[_0x21561e][_0x300d58(0x27a)]={'clientip':_0x11f45b,'timestamp':new Date()[_0x300d58(0x1ec)](),'expiry':_0x357499},_0x357499!=_0x300d58(0x1af)?(await tgBot[_0x300d58(0x1a6)](_0x4b2466[_0x300d58(0x24d)]['id'],_0x300d58(0x18f)+_0x357499+_0x300d58(0x23e),{'parse_mode':_0x300d58(0x243)})[_0x300d58(0x283)](_0xc60115=>{telegramError(_0xc60115);}),io['to'](_0x21561e)[_0x300d58(0x19a)](_0x300d58(0x1bd),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x4b2466[_0x300d58(0x24d)]['id'],_0x300d58(0x14b))[_0x300d58(0x283)](_0x30450e=>{telegramError(_0x30450e);}),io['to'](_0x21561e)[_0x300d58(0x19a)](_0x300d58(0x1bd),{'access':{'allow':![],'reason':_0x300d58(0x25d),'token':null}}));}),tgBot[_0x31d47e(0x1f6)](_0x31d47e(0x15e));}));}function loginAccess2FA(_0x259f96,_0x2129bb){const _0x343498=_0x44fc43;tgBot&&settings[_0x343498(0x27f)]&&(tgBot[_0x343498(0x1f6)](_0x343498(0x15e)),tgBot[_0x343498(0x1a6)](settings['telegramChatId'],_0x343498(0x174)+normalizeIP(_0x2129bb)[_0x343498(0x14a)]+_0x343498(0x266),{'parse_mode':_0x343498(0x243),'reply_markup':{'inline_keyboard':[[{'text':_0x343498(0x28c),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x343498(0x1af)}]]}})[_0x343498(0x283)](_0x974f91=>{telegramError(_0x974f91);}),tgBot['on'](_0x343498(0x15e),async _0x4e1620=>{const _0x45c970=_0x343498,_0x5ddb20=_0x4e1620[_0x45c970(0x204)],_0x5960aa=_0x4e1620[_0x45c970(0x1d2)];tgBot[_0x45c970(0x26e)](_0x4e1620['id'])['then'](async()=>{const _0x325053=_0x45c970;devices[_0x259f96][_0x325053(0x1da)]={'clientip':_0x2129bb,'timestamp':new Date()[_0x325053(0x1ec)](),'expiry':_0x5ddb20},_0x5ddb20!=_0x325053(0x1af)?(await tgBot[_0x325053(0x1a6)](_0x5960aa[_0x325053(0x24d)]['id'],_0x325053(0x1f0),{'parse_mode':'HTML'})['catch'](_0x2acc5f=>{telegramError(_0x2acc5f);}),io['to'](_0x259f96)[_0x325053(0x19a)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x325053(0x1a6)](_0x5960aa[_0x325053(0x24d)]['id'],_0x325053(0x22f))[_0x325053(0x283)](_0x9c3dd0=>{telegramError(_0x9c3dd0);}),io['to'](_0x259f96)[_0x325053(0x19a)](_0x325053(0x1bd),{'access':{'allow':![],'reason':_0x325053(0x17a),'token':null}}));}),tgBot[_0x45c970(0x1f6)](_0x45c970(0x15e));}));}function getConfiguration(){const _0x49f0ec=_0x44fc43;return dbConfig[_0x49f0ec(0x265)](_0x49f0ec(0x288))[_0x49f0ec(0x150)](_0x49f0ec(0x192))[_0x49f0ec(0x18a)]()||[];}function getEnabledBots(){const _0x5bfffe=_0x44fc43;return dbConfig[_0x5bfffe(0x265)](_0x5bfffe(0x288))[_0x5bfffe(0x150)](_0x5bfffe(0x192))[_0x5bfffe(0x24c)]({'status':_0x5bfffe(0x169)})[_0x5bfffe(0x18a)]()||[];}function getDisabledBots(){const _0x933a15=_0x44fc43;return dbConfig[_0x933a15(0x265)](_0x933a15(0x288))[_0x933a15(0x150)](_0x933a15(0x192))['filter']({'status':'disabled'})['value']()||[];}function getSettings(){const _0x1e6d5b=_0x44fc43;return dbSettings[_0x1e6d5b(0x265)](_0x1e6d5b(0x1a5))[_0x1e6d5b(0x18a)]()||{'timeshift':0x0};}function getSecure(){const _0x532d5f=_0x44fc43;return dbSecure[_0x532d5f(0x265)]('secure')[_0x532d5f(0x18a)]()||{};}function getBlacklist(){const _0x3280e1=_0x44fc43;return dbSecure['get'](_0x3280e1(0x1c1))[_0x3280e1(0x18a)]()||[];}function broadcastToBots(_0xc4c791,_0x52c1ec){const _0x45684b=_0x44fc43;config[_0x45684b(0x284)](_0x35f4bc=>{const _0x3d6b69=_0x45684b;if(_0x35f4bc[_0x3d6b69(0x1bd)]==_0x3d6b69(0x169)&&_0x35f4bc[_0x3d6b69(0x19e)]==_0x3d6b69(0x232)){if(pid[_0x35f4bc[_0x3d6b69(0x192)]])pid[_0x35f4bc['botID']][_0x3d6b69(0x1c8)]({[_0xc4c791]:_0x52c1ec});}});}function storeSettings(_0x44658c,_0x22d09f=![]){const _0x3b4b5e=_0x44fc43;_0x44658c={...settings,..._0x44658c};if(_0x22d09f&&_0x44658c[_0x3b4b5e(0x15d)]!=_0x3b4b5e(0x272)&&_0x44658c['bbPassword']!=''){const _0x11835e=crypt[_0x3b4b5e(0x228)](secure[_0x3b4b5e(0x259)],_0x44658c[_0x3b4b5e(0x15d)])['message'][_0x3b4b5e(0x27b)]('@')[0x0],_0x2c0994=bcrypt[_0x3b4b5e(0x1a0)](_0x11835e,saltRounds);_0x44658c={..._0x44658c,'bbPassword':_0x2c0994};}if(_0x22d09f&&_0x44658c[_0x3b4b5e(0x22d)]!=_0x3b4b5e(0x272)&&_0x44658c[_0x3b4b5e(0x22d)]!=''){const _0x172a90=crypt['decrypt'](secure[_0x3b4b5e(0x259)],_0x44658c[_0x3b4b5e(0x22d)])[_0x3b4b5e(0x1d2)]['split']('@')[0x0];_0x44658c={..._0x44658c,'telegramToken':_0x172a90};}const _0x26c000=_0x44658c[_0x3b4b5e(0x22d)]!='************'&&_0x44658c[_0x3b4b5e(0x22d)]!=settings[_0x3b4b5e(0x22d)]||_0x44658c['telegramUsername']!=settings[_0x3b4b5e(0x1e5)],_0x523ee7=_0x44658c[_0x3b4b5e(0x22d)]==''||_0x44658c[_0x3b4b5e(0x1e5)]=='';if(_0x26c000)_0x44658c[_0x3b4b5e(0x263)]=_0x3b4b5e(0x1e3);for(const [_0xac0538,_0xf52de4]of Object[_0x3b4b5e(0x245)](_0x44658c)){if(_0xac0538==_0x3b4b5e(0x22d)&&_0xf52de4==_0x3b4b5e(0x272)){_0x44658c['telegramToken']=settings[_0x3b4b5e(0x22d)];continue;};if(_0xac0538=='bbPassword'&&_0xf52de4==_0x3b4b5e(0x272)){_0x44658c[_0x3b4b5e(0x15d)]=settings[_0x3b4b5e(0x15d)];continue;};dbSettings[_0x3b4b5e(0x166)](_0x3b4b5e(0x176)+_0xac0538,_0xf52de4)[_0x3b4b5e(0x279)]();}settings=_0x44658c,io['to'](_0x3b4b5e(0x201))[_0x3b4b5e(0x19a)](_0x3b4b5e(0x1a5),cleanSettings()),broadcastToBots(_0x3b4b5e(0x1be),settings[_0x3b4b5e(0x1be)]);if(_0x26c000&&!_0x523ee7)initTelegram();if(_0x26c000&&_0x523ee7)disableTelegram();getAllClients()[_0x3b4b5e(0x284)](_0x37669a=>{const _0x5c677d=_0x3b4b5e;getSocket(_0x37669a['id'])['emit'](_0x5c677d(0x1bd),{'access':{'allow':![],'reason':_0x5c677d(0x28e),'token':null}});});}function updateSetting(_0x110c9a,_0x50bf08){const _0x27239b=_0x44fc43;dbSettings[_0x27239b(0x166)](_0x27239b(0x176)+_0x110c9a,_0x50bf08)[_0x27239b(0x279)](),settings=getSettings(),io['to'](_0x27239b(0x201))['emit']('settings',cleanSettings());}function storeSecure(_0xe0c22a){const _0x2e82a4=_0x44fc43;dbSecure[_0x2e82a4(0x265)](_0x2e82a4(0x16c))[_0x2e82a4(0x200)](_0xe0c22a)['write'](),secure=_0xe0c22a;}function _0x47df(_0x46a3b5,_0x35d11a){const _0x9890f8=_0x5030();return _0x47df=function(_0x3513ad,_0x485bde){_0x3513ad=_0x3513ad-0x142;let _0x503044=_0x9890f8[_0x3513ad];return _0x503044;},_0x47df(_0x46a3b5,_0x35d11a);}function addBlacklist(_0x1b74a5){const _0xe3a306=_0x44fc43;cleanBlacklist();let _0x4b0ba1;devices[_0x1b74a5][_0xe3a306(0x27a)]?_0x4b0ba1=Math[_0xe3a306(0x188)](devices[_0x1b74a5][_0xe3a306(0x27a)][_0xe3a306(0x27e)],loginExpiry):_0x4b0ba1=loginExpiry,dbSecure[_0xe3a306(0x265)](_0xe3a306(0x1c1))[_0xe3a306(0x200)]({'expiry':new Date()[_0xe3a306(0x1ec)]()+_0x4b0ba1*0x3c*0x3e8,'token':devices[_0x1b74a5][_0xe3a306(0x240)][_0xe3a306(0x205)]})[_0xe3a306(0x279)](),blacklist=dbSecure[_0xe3a306(0x265)](_0xe3a306(0x1c1))[_0xe3a306(0x18a)]();}function cleanBlacklist(){const _0x47cb65=_0x44fc43;let _0x3a6041=dbSecure[_0x47cb65(0x265)](_0x47cb65(0x1c1))[_0x47cb65(0x26b)]()[_0x47cb65(0x18a)](),_0x1a2470=new Date()[_0x47cb65(0x1ec)]();_0x3a6041[_0x47cb65(0x284)](_0x200394=>{const _0x385b95=_0x47cb65;_0x200394[_0x385b95(0x27e)]<_0x1a2470&&dbSecure[_0x385b95(0x265)](_0x385b95(0x1c1))[_0x385b95(0x15c)]({'expiry':_0x200394['expiry']})[_0x385b95(0x279)]();});}function initStates(){const _0x2a5d5d=_0x44fc43;let _0x4a92ae=getConfiguration();_0x4a92ae[_0x2a5d5d(0x284)](_0x19677d=>{const _0x3778b1=_0x2a5d5d;_0x19677d['live']=_0x3778b1(0x164);}),storeConfiguration(_0x4a92ae);}function onKeys(){const _0x245a1b=new RSA();return new Promise(_0x540af8=>{_0x245a1b['generateKeyPairAsync']()['then'](_0x29acab=>{_0x540af8(_0x29acab);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x59c74d=_0x44fc43;let _0x285518=getConfiguration(),_0x1c6c0b=![];_0x285518[_0x59c74d(0x284)](_0x177dcc=>{const _0x232194=_0x59c74d;if(_0x177dcc['status']=='running')_0x177dcc[_0x232194(0x1bd)]=_0x232194(0x169),_0x1c6c0b=!![];else _0x177dcc['status']==_0x232194(0x164)&&(_0x177dcc[_0x232194(0x1bd)]=_0x232194(0x1e6),_0x1c6c0b=!![]);});if(_0x1c6c0b)storeConfiguration(_0x285518);let _0x35717f=getSecure();if(!_0x35717f[_0x59c74d(0x15b)]('secret')){let _0x5925d6=await generateKeys();_0x35717f[_0x59c74d(0x254)]=_0x5925d6[_0x59c74d(0x254)],_0x35717f['privateKey']=_0x5925d6[_0x59c74d(0x259)],_0x35717f[_0x59c74d(0x237)]=crypto[_0x59c74d(0x20c)](0x20)[_0x59c74d(0x222)](_0x59c74d(0x25c));;storeSecure(_0x35717f);}let _0x49cedd=getSettings();_0x1c6c0b=![];!_0x49cedd[_0x59c74d(0x15b)](_0x59c74d(0x1f5))&&(_0x49cedd['loginRequired']=![],_0x49cedd[_0x59c74d(0x1e4)]='',_0x49cedd[_0x59c74d(0x15d)]='',_0x49cedd[_0x59c74d(0x161)]=![],_0x1c6c0b=!![]);!_0x49cedd['hasOwnProperty']('whitelistEnabled')&&(_0x49cedd['whitelistEnabled']=![],_0x49cedd[_0x59c74d(0x1fe)]=[],_0x49cedd[_0x59c74d(0x275)]=![],_0x1c6c0b=!![]);if(!_0x49cedd[_0x59c74d(0x15b)](_0x59c74d(0x1ad))){if(_0x49cedd[_0x59c74d(0x27f)])_0x49cedd[_0x59c74d(0x1ad)]=!![];else _0x49cedd[_0x59c74d(0x1ad)]=![];_0x1c6c0b=!![];}if(_0x1c6c0b)storeSettings(_0x49cedd);}function storeConfiguration(_0x35d983){const _0x46b504=_0x44fc43;dbConfig['get'](_0x46b504(0x288))['remove']()['write'](),dbConfig[_0x46b504(0x265)](_0x46b504(0x288))[_0x46b504(0x200)](..._0x35d983)['write'](),config=_0x35d983;}function resetPassword(){const _0x50a49f=_0x44fc43;tgBot&&settings[_0x50a49f(0x27f)]&&(tgBot[_0x50a49f(0x1f6)]('callback_query'),tgBot['sendMessage'](settings[_0x50a49f(0x27f)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x50a49f(0x243),'reply_markup':{'inline_keyboard':[[{'text':_0x50a49f(0x285),'callback_data':_0x50a49f(0x285)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x41a0bb=>{telegramError(_0x41a0bb);}),tgBot['on'](_0x50a49f(0x15e),async _0x36b901=>{const _0x4c6acf=_0x50a49f,_0x47cdf=_0x36b901[_0x4c6acf(0x204)],_0x1c6c1e=_0x36b901[_0x4c6acf(0x1d2)];tgBot[_0x4c6acf(0x26e)](_0x36b901['id'])['then'](async()=>{const _0x35e29d=_0x4c6acf;if(_0x47cdf!='no'){const _0x379489=0xf,_0xf08e81=_0x35e29d(0x255),_0x1a1660=Array[_0x35e29d(0x191)](crypto[_0x35e29d(0x19d)](new Uint32Array(_0x379489)))['map'](_0x5b0f08=>_0xf08e81[_0x5b0f08%_0xf08e81[_0x35e29d(0x1b2)]])[_0x35e29d(0x181)](''),_0x44b342=bcrypt[_0x35e29d(0x1a0)](_0x1a1660,saltRounds);storeSettings({'bbPassword':_0x44b342}),await tgBot[_0x35e29d(0x1a6)](_0x1c6c1e['chat']['id'],_0x35e29d(0x227)+_0x1a1660,{'parse_mode':'HTML'})[_0x35e29d(0x283)](_0x110ad0=>{telegramError(_0x110ad0);});}else await tgBot['sendMessage'](_0x1c6c1e[_0x35e29d(0x24d)]['id'],_0x35e29d(0x216))[_0x35e29d(0x283)](_0x197538=>{telegramError(_0x197538);});}),tgBot[_0x4c6acf(0x1f6)](_0x4c6acf(0x15e));}));}function logging(_0x11f0b5){const _0x572fa5=_0x44fc43;console[_0x572fa5(0x239)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x11f0b5);if(tgBot&&settings[_0x572fa5(0x27f)]&&settings['telegramEvents']!=_0x572fa5(0x1d8))tgBot[_0x572fa5(0x1a6)](settings[_0x572fa5(0x27f)],_0x572fa5(0x185)+_0x11f0b5)[_0x572fa5(0x283)](_0x443d88=>{telegramError(_0x443d88);});}function getServerTime(){const _0x1258e0=_0x44fc43,_0x37a0da=new Date();return _0x37a0da['getFullYear']()+'/'+(_0x37a0da[_0x1258e0(0x17e)]()+0x1)['toString']()[_0x1258e0(0x1c7)](0x2,'0')+'/'+_0x37a0da['getDate']()[_0x1258e0(0x222)]()[_0x1258e0(0x1c7)](0x2,'0')+'\x20'+_0x37a0da[_0x1258e0(0x16b)]()[_0x1258e0(0x222)]()[_0x1258e0(0x1c7)](0x2,'0')+':'+_0x37a0da[_0x1258e0(0x257)]()[_0x1258e0(0x222)]()['padStart'](0x2,'0')+':'+_0x37a0da[_0x1258e0(0x1c4)]()[_0x1258e0(0x222)]()[_0x1258e0(0x1c7)](0x2,'0');}function getTimeStamp(){const _0x16d64e=_0x44fc43,_0x4ce4ff=shiftedTime();return _0x4ce4ff[_0x16d64e(0x231)]()+'/'+(_0x4ce4ff['getMonth']()+0x1)[_0x16d64e(0x222)]()[_0x16d64e(0x1c7)](0x2,'0')+'/'+_0x4ce4ff[_0x16d64e(0x149)]()[_0x16d64e(0x222)]()['padStart'](0x2,'0')+'\x20'+_0x4ce4ff['getHours']()[_0x16d64e(0x222)]()['padStart'](0x2,'0')+':'+_0x4ce4ff[_0x16d64e(0x257)]()[_0x16d64e(0x222)]()['padStart'](0x2,'0')+':'+_0x4ce4ff[_0x16d64e(0x1c4)]()['toString']()[_0x16d64e(0x1c7)](0x2,'0');}function shiftedTime(){const _0x2edbc7=_0x44fc43,_0x3b8263=new Date();let _0x137d9b=_0x3b8263;if(settings['timeshift']&&settings[_0x2edbc7(0x1be)]!==0x0)_0x137d9b=fns[_0x2edbc7(0x17b)](_0x3b8263,{'hours':settings[_0x2edbc7(0x1be)]});return _0x137d9b;}function startScheduler(){const _0x5c4c05=_0x44fc43;let _0x3a259d=new Date()[_0x5c4c05(0x15a)]();_0x3a259d==0x1&&backupConfigFiles();_0x3a259d==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x532db9=_0x44fc43;fs[_0x532db9(0x17d)](configpath,{'withFileTypes':!![]})[_0x532db9(0x284)](_0x43a535=>{const _0x574208=_0x532db9;if(!_0x43a535[_0x574208(0x1bc)]())fs[_0x574208(0x184)](configpath+_0x43a535['name'],configbackuppath+_0x43a535[_0x574208(0x26d)]);});}function triggerAnalytics(){const _0x491653=_0x44fc43;analytics[_0x491653(0x23d)]({'title':'Balance\x20Bot\x20Server','href':_0x491653(0x210),'path':'/v'+serverversion});}function validateCredentials(_0x5a782c,_0x3963f5){const _0xf76379=_0x44fc43;if(_0x5a782c[_0xf76379(0x177)]==settings[_0xf76379(0x1e4)]&&bcrypt[_0xf76379(0x1d9)](_0x5a782c[_0xf76379(0x163)],settings['bbPassword'])){if(settings[_0xf76379(0x161)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x56ce26=generateLoginToken(_0x3963f5);return{'allow':!![],'reason':_0xf76379(0x221),'token':_0x56ce26};}}else return{'allow':![],'reason':_0xf76379(0x1ac),'token':null};}function refreshToken(_0xdf7cd7){const _0x380d1e=_0x44fc43,_0x487058=generateLoginToken(_0xdf7cd7);return{'allow':!![],'reason':_0x380d1e(0x221),'token':_0x487058};}function validateAccess(_0x322061,_0x288584){const _0x439b6a=_0x44fc43;let _0x558462=devices[_0x288584]['ip'],_0x2439f5;const _0x4c1c52=_0x59724c=>{const _0x3a7fad=_0x47df;if(settings[_0x3a7fad(0x1f5)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x288584)){const _0x272064=generateLoginToken(_0x288584);return{'allow':!![],'reason':_0x3a7fad(0x19c),'token':_0x272064};}else return{'allow':![],'reason':_0x3a7fad(0x1ea),'token':null};}else return _0x2439f5=validToken(_0x59724c,_0x288584),_0x2439f5[_0x3a7fad(0x15b)](_0x3a7fad(0x20d))?{'allow':!![],'reason':_0x3a7fad(0x22a),'token':_0x59724c}:{'allow':![],'reason':_0x3a7fad(0x1ea),'token':null};}else return{'allow':!![],'reason':_0x3a7fad(0x23c),'token':null};};if(settings[_0x439b6a(0x241)]){let _0x3fe7b0=[...settings[_0x439b6a(0x1fe)],'::1',_0x439b6a(0x171),_0x439b6a(0x168)];if(_0x3fe7b0[_0x439b6a(0x1eb)](_0x558462))return _0x4c1c52(_0x322061);else{_0x2439f5=validToken(_0x322061,_0x288584);if(_0x2439f5[_0x439b6a(0x15b)]('success'))return _0x4c1c52(_0x322061);else{if(telegramIpApproved(_0x288584)){const _0x158704=generateToken(_0x288584);return _0x2439f5=_0x4c1c52(_0x322061),_0x2439f5[_0x439b6a(0x22e)]?{'allow':!![],'reason':_0x439b6a(0x1cb),'token':_0x158704}:_0x2439f5;}else return settings[_0x439b6a(0x275)]?{'allow':![],'reason':_0x439b6a(0x23b),'token':null}:{'allow':![],'reason':_0x439b6a(0x1ed),'token':null};}}}else return _0x4c1c52(_0x322061);}function timelyDecrypt(_0x512b8c,_0x518936=!![]){const _0x17d8eb=_0x44fc43;if(_0x512b8c)try{const _0x256733=crypt['decrypt'](secure['privateKey'],_0x512b8c)[_0x17d8eb(0x1d2)],_0x2edf74=_0x256733[_0x17d8eb(0x27b)]('@')[0x0],_0xb760ab=_0x256733['split']('@')[0x1],_0x3aed9c=new Date()[_0x17d8eb(0x1ec)]();if(_0x518936){if(_0x3aed9c-_0xb760ab<maxSecretAge*0x3e8)return _0x2edf74;else return![];}else return _0x2edf74;}catch(_0x4eecdf){return![];}else return![];}const validToken=(_0x206160,_0x275671)=>{const _0x51ca85=_0x44fc43,_0x11b228=devices[_0x275671]['ip'];if(!_0x206160)return{'error':_0x51ca85(0x182)};for(let _0x107340 of blacklist){if(_0x107340['token']==_0x206160)return{'error':_0x51ca85(0x1b1)};}let _0xff8491;try{_0xff8491=jwt[_0x51ca85(0x16e)](_0x206160,secure[_0x51ca85(0x237)]+_0x275671);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0xff8491[_0x51ca85(0x15b)](_0x51ca85(0x14d))&&!_0xff8491[_0x51ca85(0x15b)](_0x51ca85(0x177))||!_0xff8491['hasOwnProperty'](_0x51ca85(0x208)))return{'error':_0x51ca85(0x28f)};if(!_0xff8491[_0x51ca85(0x15b)]('username')&&_0xff8491[_0x51ca85(0x15b)](_0x51ca85(0x14d))){const {clientip:_0x53f951}=_0xff8491;return _0x11b228==_0x53f951?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0xff8491[_0x51ca85(0x15b)](_0x51ca85(0x177))&&_0xff8491['hasOwnProperty'](_0x51ca85(0x14d))){const {username:_0x38aa9a,clientip:_0x2ceb13}=_0xff8491;return settings[_0x51ca85(0x1e4)]==_0x38aa9a&&_0x11b228==_0x2ceb13?{'success':_0x51ca85(0x1f8)}:{'error':_0x51ca85(0x209)};}}},generateLoginToken=_0x477f34=>{const _0x2960a3=_0x44fc43;if(_0x477f34){const _0x4e7a32=devices[_0x477f34]['ip'];return jwt[_0x2960a3(0x1cd)]({'username':settings[_0x2960a3(0x1e4)],'clientip':_0x4e7a32},secure[_0x2960a3(0x237)]+_0x477f34,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x869d2e=>{const _0x471f5a=_0x44fc43;if(_0x869d2e){const _0x135038=devices[_0x869d2e]['ip'];return jwt[_0x471f5a(0x1cd)]({'clientip':_0x135038},secure[_0x471f5a(0x237)]+_0x869d2e,{'expiresIn':devices[_0x869d2e][_0x471f5a(0x27a)][_0x471f5a(0x27e)]*0x3c});}else return![];},telegramIpApproved=_0x16309a=>{const _0x52007d=_0x44fc43;let _0x152e96=![];return devices[_0x16309a][_0x52007d(0x27a)]&&devices[_0x16309a][_0x52007d(0x27a)][_0x52007d(0x27e)]!=_0x52007d(0x1af)&&(_0x152e96=devices[_0x16309a][_0x52007d(0x27a)][_0x52007d(0x14d)]==devices[_0x16309a]['ip']&&new Date()[_0x52007d(0x1ec)]()-devices[_0x16309a][_0x52007d(0x27a)][_0x52007d(0x28d)]<devices[_0x16309a][_0x52007d(0x27a)][_0x52007d(0x27e)]*0x3c*0x3e8),_0x152e96;},telegram2FaApproved=_0x57a9e2=>{const _0x33e19d=_0x44fc43;let _0x35d538=![];return devices[_0x57a9e2][_0x33e19d(0x1da)]&&devices[_0x57a9e2][_0x33e19d(0x1da)]['expiry']!=_0x33e19d(0x1af)&&(_0x35d538=devices[_0x57a9e2][_0x33e19d(0x1da)][_0x33e19d(0x14d)]==devices[_0x57a9e2]['ip']&&new Date()[_0x33e19d(0x1ec)]()-devices[_0x57a9e2]['telegram2FaApproval']['timestamp']<devices[_0x57a9e2][_0x33e19d(0x1da)][_0x33e19d(0x27e)]*0x3c*0x3e8),_0x35d538;},normalizeIP=_0x2df09c=>{const _0x2d1802=_0x44fc43;let _0x34b9f6=null,_0x606fb=null;if(ipaddr[_0x2d1802(0x248)](_0x2df09c)){const _0x5d9be7=ipaddr[_0x2d1802(0x1c6)](_0x2df09c);_0x5d9be7['kind']()===_0x2d1802(0x233)?(_0x5d9be7[_0x2d1802(0x1ae)]()&&(_0x34b9f6=_0x5d9be7['toIPv4Address']()[_0x2d1802(0x222)]()),_0x606fb=_0x5d9be7[_0x2d1802(0x222)]()):(_0x34b9f6=_0x5d9be7['toString'](),_0x606fb=_0x5d9be7[_0x2d1802(0x1a1)]()[_0x2d1802(0x222)]());}return{'show':_0x34b9f6?_0x34b9f6:_0x606fb,'store':_0x606fb};};