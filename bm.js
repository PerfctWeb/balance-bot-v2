const _0x57fee5=_0x5308;(function(_0x2b9d56,_0x180fcc){const _0x11df5a=_0x5308,_0x5172fc=_0x2b9d56();while(!![]){try{const _0x9bacd7=-parseInt(_0x11df5a(0x261))/0x1+parseInt(_0x11df5a(0x1cc))/0x2+-parseInt(_0x11df5a(0x182))/0x3*(parseInt(_0x11df5a(0x186))/0x4)+parseInt(_0x11df5a(0x233))/0x5*(parseInt(_0x11df5a(0xe9))/0x6)+parseInt(_0x11df5a(0x29c))/0x7+-parseInt(_0x11df5a(0x262))/0x8*(parseInt(_0x11df5a(0x1dd))/0x9)+parseInt(_0x11df5a(0x13a))/0xa;if(_0x9bacd7===_0x180fcc)break;else _0x5172fc['push'](_0x5172fc['shift']());}catch(_0x2cbbdc){_0x5172fc['push'](_0x5172fc['shift']());}}}(_0x52dd,0x49fed));const _0x433000=function(){let _0xab8d70=!![];return function(_0x20784a,_0x313c08){const _0x9246e0=_0xab8d70?function(){const _0x2ec432=_0x5308;if(_0x313c08){const _0xfc2c1b=_0x313c08[_0x2ec432(0xae)](_0x20784a,arguments);return _0x313c08=null,_0xfc2c1b;}}:function(){};return _0xab8d70=![],_0x9246e0;};}(),_0x13742a=_0x433000(this,function(){const _0x1e874a=_0x5308;return _0x13742a['toString']()[_0x1e874a(0x207)]('(((.+)+)+)+$')[_0x1e874a(0x19e)]()[_0x1e874a(0x1f0)](_0x13742a)[_0x1e874a(0x207)](_0x1e874a(0x22f));});_0x13742a();'use strict';process[_0x57fee5(0x1d4)][_0x57fee5(0x290)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x57fee5(0x1b0)),low=require(_0x57fee5(0x1e8)),FileSync=require(_0x57fee5(0xf3)),path=require(_0x57fee5(0x16b)),crypto=require(_0x57fee5(0xef)),Crypt=require(_0x57fee5(0x249))[_0x57fee5(0x1bb)],RSA=require(_0x57fee5(0x249))[_0x57fee5(0x1f5)],bcrypt=require(_0x57fee5(0xf9)),jwt=require(_0x57fee5(0x158)),ipaddr=require('ipaddr.js'),argv=require(_0x57fee5(0x10c))(process[_0x57fee5(0x98)][_0x57fee5(0x129)](0x2))[_0x57fee5(0x98)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x57fee5(0x1d9)),Mixpanel=require('mixpanel'),axios=require(_0x57fee5(0x16a)),{GraphQLClient,gql}=require(_0x57fee5(0x1c5)),util=require(_0x57fee5(0xcf)),fileUpload=require(_0x57fee5(0xb1)),{networkInterfaces}=require('os'),PORT=argv[_0x57fee5(0x26b)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x57fee5(0x21e)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x57fee5(0x25c)](0x1));const HOST=argv['host']||null,userID=argv[_0x57fee5(0x21d)]||'',debugging=argv['d']||![],nodeversion=process[_0x57fee5(0x295)]['node'];let bbpath=_0x57fee5(0xff),bbpath2='';const botfile=_0x57fee5(0x104),configfile=_0x57fee5(0x1c7),settingsfile=_0x57fee5(0x231),securefile=_0x57fee5(0x240),environment=require('./'+bbpath2+_0x57fee5(0x14e))[_0x57fee5(0x1e6)]||'production',maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x57fee5(0x122)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x57fee5(0x159),configbackuppath=configpath+_0x57fee5(0x241),logspath=userID?bbpath+_0x57fee5(0x247)+userID+'/':bbpath+_0x57fee5(0x247),zippath=userID?bbpath+_0x57fee5(0xb6)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x57fee5(0x252)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x57fee5(0x26d)+userID+'/':bbpath+_0x57fee5(0x26d);!fs[_0x57fee5(0x23d)](configpath)&&fs[_0x57fee5(0x287)](configpath);!fs[_0x57fee5(0x23d)](configbackuppath)&&fs[_0x57fee5(0x287)](configbackuppath);!fs[_0x57fee5(0x23d)](logspath)&&fs[_0x57fee5(0x287)](logspath);!fs[_0x57fee5(0x23d)](zippath)&&fs[_0x57fee5(0x287)](zippath);!fs['existsSync'](temppath)&&fs[_0x57fee5(0x287)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x57fee5(0x155)]({'bots':[]})[_0x57fee5(0xed)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x57fee5(0x155)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x57fee5(0x280),'onepagemode':![],'marketcapApi':''}})[_0x57fee5(0xed)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x57fee5(0x155)]({'secure':{},'blacklist':[]})[_0x57fee5(0xed)]();let crypt=new Crypt({'md':_0x57fee5(0x119),'rsaStandard':_0x57fee5(0x1a6)});const saltRounds=0xa,mixpanel=Mixpanel[_0x57fee5(0x298)](_0x57fee5(0x1a2),{'host':_0x57fee5(0xce)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x57fee5(0x11e)]&&(settings[_0x57fee5(0x11e)]!=''&&settings[_0x57fee5(0x11e)]!=_0x57fee5(0x19f))&&settings[_0x57fee5(0x17c)]&&settings[_0x57fee5(0x17c)]!='')initTelegram();const parseColor=(_0x302417,_0x500511)=>{const _0x2f32c1=_0x57fee5,_0x2c8d41=/#[A-Z]{3}#/g;if(typeof _0x302417=='string'){!_0x500511?_0x302417=_0x302417[_0x2f32c1(0x19c)](_0x2c8d41,''):(_0x302417=_0x302417['replace'](/#BLU#/g,'\x1b[34m'),_0x302417=_0x302417[_0x2f32c1(0x19c)](/#RED#/g,_0x2f32c1(0x296)),_0x302417=_0x302417[_0x2f32c1(0x19c)](/#YEL#/g,'\x1b[33m'),_0x302417=_0x302417[_0x2f32c1(0x19c)](/#MAG#/g,_0x2f32c1(0x11d)),_0x302417=_0x302417['replace'](/#CYA#/g,'\x1b[36m'),_0x302417=_0x302417[_0x2f32c1(0x19c)](/#RES#/g,_0x2f32c1(0x112)));;}return _0x302417;},logger={'screen':_0xbabde9=>{const _0x4bedce=_0x57fee5;console[_0x4bedce(0x268)](parseColor(_0xbabde9,!![]));},'simple':_0x27c502=>{const _0xee921b=_0x57fee5;console[_0xee921b(0x268)](parseColor(_0x27c502,!![])),loggerfile[_0xee921b(0xed)](util['format'](parseColor(_0x27c502,![]))+'\x0a');},'full':async _0x25f7ef=>{const _0x32f323=_0x57fee5,_0x3ac34e=getTimeStamp()+_0x32f323(0x236)+_0x25f7ef;console[_0x32f323(0x268)](parseColor(_0x3ac34e,!![])),loggerfile[_0x32f323(0xed)](util[_0x32f323(0x1b9)](parseColor(_0x3ac34e,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x32f323(0x127)]!=_0x32f323(0x169))await sendTelegram(settings[_0x32f323(0x28c)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x25f7ef,![]));},'debug':async(_0x3ff4fd,_0x54b9e7='')=>{const _0x549cf1=_0x57fee5,_0x4a7728=getTimeStamp()+_0x549cf1(0x8d)+_0x3ff4fd;if(debugging)console['log'](parseColor(_0x4a7728,!![]));loggerfile[_0x549cf1(0xed)](util[_0x549cf1(0x1b9)](parseColor(_0x4a7728,![]))+'\x0a');if(_0x54b9e7){if(debugging)console[_0x549cf1(0x268)](_0x54b9e7);loggerfile['write'](util['format'](_0x54b9e7)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x170b12){const _0x226897=_0x57fee5;_0x170b12['toString']()['includes'](_0x226897(0x126))?(logger['simple'](_0x226897(0x99)+_0x170b12[_0x226897(0x26b)]+_0x226897(0x142)),process[_0x226897(0x24f)]({'terminate':!![]},_0x17626d=>{})):logger[_0x226897(0x288)](_0x170b12);}),process['on']('exit',()=>{const _0x472a7b=_0x57fee5;stopAllBots(),process[_0x472a7b(0x25c)](0x0);}),process['on'](_0x57fee5(0x140),()=>{const _0x1c11aa=_0x57fee5;stopAllBots(),process[_0x1c11aa(0x25c)](0x0);}),process['on'](_0x57fee5(0x13d),()=>{const _0x51a543=_0x57fee5;stopAllBots(),process[_0x51a543(0x25c)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x57fee5(0x14e))[_0x57fee5(0x110)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x57fee5(0x153)),app=express(),http=require(_0x57fee5(0x1d2))[_0x57fee5(0x220)](app);app[_0x57fee5(0x146)](fileUpload({'useTempFiles':!![]})),app[_0x57fee5(0x284)](_0x57fee5(0xb7),async(_0x43b9a0,_0x3ffe44)=>{const _0x529432=_0x57fee5,_0x54c61f=_0x43b9a0['params']['type'],_0x4313ba=getClientsWithBotID(_0x529432(0xc4)),_0x46299c=_0x43b9a0['headers']['uuid'],_0x1f8378=timelyDecrypt(_0x46299c,![]),_0x2bf860=_0x4313ba[_0x529432(0x187)](_0x11e2a4=>_0x11e2a4['uuid']==_0x1f8378);if(_0x2bf860){const _0x4e0f68=normalizeIP(_0x43b9a0[_0x529432(0xa9)][_0x529432(0xf1)])[_0x529432(0x255)],_0x3339eb=_0x43b9a0[_0x529432(0x24b)]['tkn'];if(validateAccess(_0x3339eb,_0x1f8378,_0x4e0f68)[_0x529432(0xbb)])_0x54c61f==_0x529432(0x224)&&await backupConfigFiles(),await zipFiles(_0x54c61f),_0x3ffe44[_0x529432(0x132)](zippath+(_0x54c61f+'.zip'),_0x1f46a3=>{const _0x334350=_0x529432;_0x1f46a3&&(logger['full']('Failed\x20to\x20download\x20'+_0x54c61f),logger[_0x334350(0x288)](_0x1f46a3));});else logger[_0x529432(0x10d)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x54c61f+_0x529432(0x286));}else logger[_0x529432(0x10d)](_0x529432(0x17e)+_0x54c61f+_0x529432(0x173));}),app[_0x57fee5(0x246)](_0x57fee5(0x144),async(_0x3d1975,_0x207643)=>{const _0x33752a=_0x57fee5,_0x24f2d3=getClientsWithBotID(_0x33752a(0xc4)),_0x439012=_0x3d1975[_0x33752a(0x24b)][_0x33752a(0x22a)],_0x54b1bf=timelyDecrypt(_0x439012,![]),_0x3409ae=_0x24f2d3[_0x33752a(0x187)](_0x2bade6=>_0x2bade6[_0x33752a(0x22a)]==_0x54b1bf);logger[_0x33752a(0x222)](_0x33752a(0x183));if(_0x3409ae){const _0x316e35=normalizeIP(_0x3d1975[_0x33752a(0xa9)][_0x33752a(0xf1)])[_0x33752a(0x255)],_0x68bc4c=_0x3d1975['headers'][_0x33752a(0x8f)];if(validateAccess(_0x68bc4c,_0x54b1bf,_0x316e35)[_0x33752a(0xbb)]){if(_0x3d1975[_0x33752a(0xf8)]){const _0x285c75=_0x3d1975[_0x33752a(0xf8)][_0x33752a(0x25a)];await _0x285c75['mv'](temppath+_0x285c75[_0x33752a(0x1b1)]),_0x207643[_0x33752a(0x24f)]({'status':!![],'message':_0x33752a(0x105)});const _0x4ee0fd=getBotsWithMode();_0x4ee0fd['length']>0x0?confirmRestore(temppath,_0x285c75[_0x33752a(0x1b1)]):unzipFile(temppath,_0x285c75['name']);}}else logger['full'](_0x33752a(0x278));}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x57fee5(0x16e)](path[_0x57fee5(0xb5)](__dirname,bbpath2,'build2'))),app[_0x57fee5(0x146)](express[_0x57fee5(0x16e)](path[_0x57fee5(0xb5)](__dirname,bbpath2,_0x57fee5(0x1bc)))),app['get']('/',function(_0x57b84a,_0x403cd1){const _0x5468d8=_0x57fee5;_0x403cd1[_0x5468d8(0x125)](path[_0x5468d8(0xb5)](__dirname,bbpath2,_0x5468d8(0x1b4),'index.html'));}),app['get'](_0x57fee5(0x227),function(_0x27dc41,_0x1aed22){const _0x5897e4=_0x57fee5;_0x1aed22[_0x5897e4(0x125)](path[_0x5897e4(0xb5)](__dirname,bbpath2,'build',_0x5897e4(0x1b2)));}),app['get'](_0x57fee5(0x118),(_0x2c721d,_0x43a439)=>{const _0x3fc271=_0x57fee5;_0x43a439['sendFile'](path[_0x3fc271(0xb5)](__dirname,bbpath2,_0x3fc271(0x1bc),_0x3fc271(0x1b2)));}),app[_0x57fee5(0x284)]('/:bot/performance',(_0x3d5c8f,_0xc7fca7)=>{const _0xdc935f=_0x57fee5;_0xc7fca7[_0xdc935f(0x125)](path['join'](__dirname,bbpath2,_0xdc935f(0x1bc),'index.html'));}),app['get'](_0x57fee5(0x178),(_0x471c53,_0x542602)=>{const _0x45c935=_0x57fee5;_0x542602[_0x45c935(0x125)](path[_0x45c935(0xb5)](__dirname,bbpath2,_0x45c935(0x1bc),'index.html'));}),app[_0x57fee5(0x284)](_0x57fee5(0xf6),(_0x2f63b6,_0x3f4eac)=>{const _0x563db4=_0x57fee5;_0x3f4eac[_0x563db4(0x125)](path[_0x563db4(0xb5)](__dirname,bbpath2,_0x563db4(0x1bc),_0x563db4(0x1b2)));}),app[_0x57fee5(0x284)](_0x57fee5(0x26c),(_0xbbd481,_0x23f941)=>{const _0x4435c0=_0x57fee5;_0x23f941[_0x4435c0(0x125)](path['join'](__dirname,bbpath2,_0x4435c0(0x1bc),_0x4435c0(0x1b2)));}),app[_0x57fee5(0x284)]('/:bot/support',(_0x3e263e,_0x4b3321)=>{const _0x357e9c=_0x57fee5;_0x4b3321[_0x357e9c(0x125)](path[_0x357e9c(0xb5)](__dirname,bbpath2,_0x357e9c(0x1bc),_0x357e9c(0x1b2)));});if(HOST)http[_0x57fee5(0xad)](PORT,HOST);else http[_0x57fee5(0xad)](PORT);const io=require(_0x57fee5(0xdb))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x84f065=_0x57fee5;let _0x119f86=_0x84f065(0x253);const _0x1b5679=networkInterfaces(),_0x3bf6a2={};for(const _0x43a851 of Object[_0x84f065(0x239)](_0x1b5679)){for(const _0x2c48e0 of _0x1b5679[_0x43a851]){if((_0x2c48e0[_0x84f065(0x1a5)]==_0x84f065(0x1e7)||_0x2c48e0[_0x84f065(0x1a5)]==0x4)&&!_0x2c48e0[_0x84f065(0x1dc)]){const _0x47fc4b=ipaddr[_0x84f065(0x1c0)](_0x2c48e0[_0x84f065(0xa5)])[_0x84f065(0x28d)]();_0x47fc4b!=_0x84f065(0x297)&&(!_0x3bf6a2[_0x43a851]&&(_0x3bf6a2[_0x43a851]=[]),_0x3bf6a2[_0x43a851]['push'](_0x2c48e0[_0x84f065(0xa5)]),_0x119f86=_0x2c48e0['address']);}}}return{'serverip':_0x119f86,'netinterfaces':_0x3bf6a2};}async function startServer(){const _0x116e0e=_0x57fee5,{serverip:_0xcef7ca,netinterfaces:_0x526fb7}=getServerIP();logger[_0x116e0e(0x288)](''),logger[_0x116e0e(0x288)](_0x116e0e(0xb4)),await logger[_0x116e0e(0x10d)](_0x116e0e(0x1da)+serverversion+_0x116e0e(0x103)+(environment==_0x116e0e(0x257)?_0x116e0e(0x1cd):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x116e0e(0x199))+(_0x116e0e(0x25e)+_0xcef7ca+':'+PORT+_0x116e0e(0x1ef))),logger[_0x116e0e(0x288)](_0x116e0e(0xb4));if(config[_0x116e0e(0x1d1)]!=0x0)for(const _0x27f5c1 of config){const _0x536c5a=_0x27f5c1[_0x116e0e(0x9f)]==_0x116e0e(0x237)?'a':'m';if(_0x27f5c1[_0x116e0e(0x1be)]==_0x116e0e(0x1f9)||_0x27f5c1['status']==_0x116e0e(0xbe))await logger[_0x116e0e(0x10d)](_0x116e0e(0x18b)+_0x536c5a+_0x116e0e(0x152)+_0x27f5c1[_0x116e0e(0x1ab)]+'\x20|\x20'+_0x27f5c1[_0x116e0e(0xa6)]),startBot([_0x27f5c1[_0x116e0e(0x1ab)],userID],{'cwd':bbpath},function(_0x4abf79){const _0x418f25=_0x116e0e;if(_0x4abf79)logger[_0x418f25(0x10d)](_0x4abf79);});else(_0x27f5c1['status']==_0x116e0e(0x232)||_0x27f5c1[_0x116e0e(0x1be)]=='new-disabled')&&await logger[_0x116e0e(0x10d)]('Idling\x20('+_0x536c5a+_0x116e0e(0x1ca)+_0x27f5c1[_0x116e0e(0x1ab)]+_0x116e0e(0x1f4)+_0x27f5c1[_0x116e0e(0xa6)]);}else!newBot&&logger[_0x116e0e(0x288)](_0x116e0e(0xa8));if(newBot)addBot();logger[_0x116e0e(0x288)]('-----------------------------------------------------------------------------------'),logger[_0x116e0e(0x288)](''),await logger[_0x116e0e(0x222)](_0x116e0e(0x256)+nodeversion),await logger[_0x116e0e(0x222)](_0x116e0e(0xc6),_0x526fb7);}function startSocket(){io['on']('connection',_0x310171=>{const _0x414451=_0x5308;let _0x2d16e0,_0x5d645e,_0x41f54e,_0x47594d,_0x32c5bd;const _0x3c5b99=_0x310171[_0x414451(0x114)][_0x414451(0x24b)][_0x414451(0x14a)];_0x5d645e=_0x3c5b99['match'](/bot[0-9]{3}/);if(_0x5d645e)_0x41f54e=_0x5d645e[0x0][_0x414451(0x1c2)](/[0-9]{3}/);if(_0x41f54e)_0x2d16e0=_0x41f54e[0x0];else _0x2d16e0='botmanager';const _0x350cb3=_0x310171['handshake'][_0x414451(0x27d)][_0x414451(0xdf)];if(!_0x350cb3)_0x310171['emit'](_0x414451(0x1be),{'publicKey':secure[_0x414451(0x190)]});else{_0x47594d=timelyDecrypt(_0x350cb3,![]);if(!_0x47594d)_0x310171['emit'](_0x414451(0x1be),{'publicKey':secure[_0x414451(0x190)]});else{_0x32c5bd=normalizeIP(_0x310171['conn'][_0x414451(0xf1)])[_0x414451(0x255)];if(!devices[_0x47594d])devices[_0x47594d]={'uuid':_0x47594d,'access':{'token':null}};devices[_0x47594d]['ip']=_0x32c5bd;const _0x120b54=addClient(_0x310171['id'],_0x47594d,_0x2d16e0);setAccess(_0x120b54),emitMessages(),_0x310171['on'](_0x414451(0x1d5),_0x3af5b3=>{const _0x4d1ef1=_0x414451,_0x5cce79=timelyDecrypt(_0x3af5b3[_0x4d1ef1(0xe7)],!![],_0x4d1ef1(0x11f));if(_0x5cce79){_0x3af5b3={'username':_0x3af5b3['username'],'password':_0x5cce79},devices[_0x47594d][_0x4d1ef1(0xc1)]=validateCredentials(_0x3af5b3,_0x47594d);if(devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0xbb)]==![]&&devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0x1a7)]==_0x4d1ef1(0xc0))_0x310171['emit'](_0x4d1ef1(0x1be),{'access':devices[_0x47594d]['access']}),loginAccess2FA(_0x47594d,_0x32c5bd);else{if(devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0xbb)]==![]&&devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0x1a7)]=='invalid\x20credentials')_0x310171[_0x4d1ef1(0x281)](_0x4d1ef1(0x1be),{'access':devices[_0x47594d]['access']});else devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0xbb)]&&devices[_0x47594d][_0x4d1ef1(0xc1)][_0x4d1ef1(0x1a7)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x47594d)[_0x4d1ef1(0x1ba)](_0x109b99=>{setAccess(_0x109b99);}),logger['debug']('Logged\x20in\x20user\x20...'+_0x47594d[_0x4d1ef1(0x129)](-0x8)),setTokenRefresh(_0x47594d),setSessionTimeout(_0x4d1ef1(0x1d5),_0x47594d));}}else logger[_0x4d1ef1(0x10d)](_0x4d1ef1(0x244));}),_0x310171['on'](_0x414451(0x147),()=>{resetPassword();}),_0x310171['on'](_0x414451(0x168),_0x1aa78f=>{removeClient(_0x310171['id']);}),_0x2d16e0=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x12541f){const _0x3d4853=_0x57fee5;if(_0x12541f!=_0x3d4853(0xc4)&&config[_0x3d4853(0x258)]!=''){if(pid[_0x12541f])pid[_0x12541f][_0x3d4853(0x24f)]({'function':_0x3d4853(0x21f),'args':null});}_0x12541f!=_0x3d4853(0xc4)&&broadcastToBots('bots',JSON[_0x3d4853(0x10e)](config));}function reloadBotManager(){const _0x24e20a=_0x57fee5;getClientsWithBotID(_0x24e20a(0xc4))[_0x24e20a(0x1ba)](_0x1ab421=>{const _0x3f7890=_0x24e20a;getSocket(_0x1ab421['id'])['emit']('status',{'access':{'allow':![],'reason':_0x3f7890(0x17a),'token':null}});});}function getSocket(_0x3201cc){const _0x2d9ddb=_0x57fee5;return io[_0x2d9ddb(0x136)]['sockets'][_0x2d9ddb(0x284)](_0x3201cc);}function setAccess(_0x25d294){const _0x2e76d2=_0x57fee5,_0x2bee4a=getSocket(_0x25d294['id']),_0x8b5e3e=_0x25d294[_0x2e76d2(0x22a)],_0x3b38ac=_0x25d294[_0x2e76d2(0x177)];devices[_0x8b5e3e][_0x2e76d2(0xc1)]=validateAccess(devices[_0x8b5e3e][_0x2e76d2(0xc1)]['token'],_0x8b5e3e),logger[_0x2e76d2(0x222)](_0x2e76d2(0x14d)+devices[_0x8b5e3e]['access'][_0x2e76d2(0x1a7)]+_0x2e76d2(0x282)+_0x25d294['id'][_0x2e76d2(0x129)](-0x8)+_0x2e76d2(0x1bd)+_0x8b5e3e['slice'](-0x8)),_0x2bee4a['join'](_0x8b5e3e);if(devices[_0x8b5e3e][_0x2e76d2(0xc1)][_0x2e76d2(0xbb)]){_0x2bee4a[_0x2e76d2(0xb5)](_0x3b38ac);if(_0x3b38ac==_0x2e76d2(0xc4))initializeSocketBotManager(_0x2bee4a);else initializeSocketBot(_0x2bee4a);initClient(_0x3b38ac);}devices[_0x8b5e3e][_0x2e76d2(0xc1)][_0x2e76d2(0xf5)]&&devices[_0x8b5e3e][_0x2e76d2(0xc1)][_0x2e76d2(0x1a7)]==_0x2e76d2(0xee)&&setSessionTimeout(_0x2e76d2(0x2a1),_0x8b5e3e),devices[_0x8b5e3e][_0x2e76d2(0xc1)]['token']&&devices[_0x8b5e3e][_0x2e76d2(0xc1)][_0x2e76d2(0x1a7)]==_0x2e76d2(0x291)&&setSessionTimeout(_0x2e76d2(0x1d5),_0x8b5e3e),_0x2bee4a[_0x2e76d2(0x281)](_0x2e76d2(0x1be),{'status':_0x25d294['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x8b5e3e][_0x2e76d2(0xc1)],'externalip':devices[_0x8b5e3e]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x2e76d2(0x283)],'validInstallation':validInstallation}),devices[_0x8b5e3e][_0x2e76d2(0xc1)][_0x2e76d2(0xbb)]==![]&&devices[_0x8b5e3e]['access'][_0x2e76d2(0x1a7)]==_0x2e76d2(0x266)&&temporaryAccess2FA(_0x8b5e3e,devices[_0x8b5e3e]['ip']);}function setSessionTimeout(_0x34277a,_0x15b9b2){const _0x3ad9f9=_0x57fee5;let _0x335b41;if(_0x34277a==_0x3ad9f9(0x1d5))_0x335b41=loginExpiry*0x3c*0x3e8;else _0x335b41=devices[_0x15b9b2][_0x3ad9f9(0xb9)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x15b9b2][_0x3ad9f9(0xb9)][_0x3ad9f9(0x260)]);if(devices[_0x15b9b2][_0x3ad9f9(0x91)])clearTimeout(devices[_0x15b9b2][_0x3ad9f9(0x91)]);devices[_0x15b9b2]['pidExpireLogin']=setTimeout(()=>{const _0x4fbb0b=_0x3ad9f9;if(devices[_0x15b9b2][_0x4fbb0b(0xea)])clearTimeout(devices[_0x15b9b2][_0x4fbb0b(0xea)]);removeSocketListeners(_0x15b9b2),addBlacklist(_0x15b9b2),devices[_0x15b9b2][_0x4fbb0b(0xb9)]=null,devices[_0x15b9b2][_0x4fbb0b(0x19b)]=null,devices[_0x15b9b2][_0x4fbb0b(0xc1)]['token']=null,logger[_0x4fbb0b(0x222)](_0x4fbb0b(0x293)+_0x15b9b2[_0x4fbb0b(0x129)](-0x8)),devices[_0x15b9b2][_0x4fbb0b(0xc1)]=validateAccess(devices[_0x15b9b2][_0x4fbb0b(0xc1)][_0x4fbb0b(0xf5)],_0x15b9b2),!(devices[_0x15b9b2]['access'][_0x4fbb0b(0xbb)]&&devices[_0x15b9b2][_0x4fbb0b(0xc1)][_0x4fbb0b(0x1a7)]=='login\x20not\x20required')&&(_0x34277a==_0x4fbb0b(0x1d5)?io['to'](_0x15b9b2)['emit'](_0x4fbb0b(0x1be),{'access':{'allow':![],'reason':_0x4fbb0b(0x9e),'token':null}}):io['to'](_0x15b9b2)[_0x4fbb0b(0x281)](_0x4fbb0b(0x1be),{'access':{'allow':![],'reason':_0x4fbb0b(0xb0),'token':null}})),devices[_0x15b9b2][_0x4fbb0b(0xc1)][_0x4fbb0b(0xf5)]=null;},_0x335b41);}function setTokenRefresh(_0x1573ce){const _0x1b1539=_0x57fee5;if(devices[_0x1573ce]['pidRefreshToken'])clearTimeout(devices[_0x1573ce][_0x1b1539(0xea)]);devices[_0x1573ce]['pidRefreshToken']=setTimeout(()=>{const _0x587005=_0x1b1539;getClientsWithUuid(_0x1573ce)[_0x587005(0x1d1)]!=0x0?(devices[_0x1573ce][_0x587005(0xc1)]=refreshToken(_0x1573ce),io['to'](_0x1573ce)['emit'](_0x587005(0x1be),{'status':_0x587005(0x12a),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1573ce]['access'],'externalip':devices[_0x1573ce]['ip'],'publicKey':secure[_0x587005(0x190)],'validInstallation':validInstallation}),setTokenRefresh(_0x1573ce)):clearTimeout(devices[_0x1573ce][_0x587005(0xea)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4673ae){const _0x6a90f9=_0x57fee5,_0xe7a8ec=getClient(_0x4673ae['id'])['uuid'];_0x4673ae[_0x6a90f9(0x281)](_0x6a90f9(0x212),config),_0x4673ae[_0x6a90f9(0x281)](_0x6a90f9(0x11b),cleanSettings()),_0x4673ae['on']('add-bot',_0x35f77b=>{const _0x448098=_0x6a90f9;if(validateAccess(_0x35f77b,_0xe7a8ec)[_0x448098(0xbb)])addBot();else logger[_0x448098(0x10d)](_0x448098(0x1fc));}),_0x4673ae['on'](_0x6a90f9(0x90),(_0x4041f5,_0x332bf2)=>{const _0x2f06fb=_0x6a90f9;if(validateAccess(_0x332bf2,_0xe7a8ec)[_0x2f06fb(0xbb)])toggleBot(_0x4041f5[_0x2f06fb(0x1ab)],_0x4041f5['status'],_0x4041f5[_0x2f06fb(0x26f)]);else logger[_0x2f06fb(0x10d)](_0x2f06fb(0x176));}),_0x4673ae['on']('toggle-bot-mode',(_0x35b03c,_0x84c79c)=>{const _0x4e581e=_0x6a90f9;if(validateAccess(_0x84c79c,_0xe7a8ec)[_0x4e581e(0xbb)])toggleBotMode(_0x35b03c);else logger['full'](_0x4e581e(0x176));}),_0x4673ae['on'](_0x6a90f9(0x248),(_0x5a69b2,_0x3cc96f)=>{const _0x32d9fc=_0x6a90f9;if(validateAccess(_0x3cc96f,_0xe7a8ec)[_0x32d9fc(0xbb)])deleteBot(_0x5a69b2);else logger[_0x32d9fc(0x10d)](_0x32d9fc(0x223));}),_0x4673ae['on'](_0x6a90f9(0x137),(_0x14857d,_0x4cade4)=>{const _0x5cc6aa=_0x6a90f9;if(validateAccess(_0x4cade4,_0xe7a8ec)[_0x5cc6aa(0xbb)])storeSettings(_0x14857d,!![]);else logger[_0x5cc6aa(0x10d)](_0x5cc6aa(0x160));}),_0x4673ae['on']('update-bb',_0x416733=>{const _0x355e97=_0x6a90f9;if(validateAccess(_0x416733,_0xe7a8ec)['allow'])updateBB(_0x355e97(0x1af));else logger[_0x355e97(0x10d)](_0x355e97(0x242));}),_0x4673ae['on'](_0x6a90f9(0x22d),_0x72f3e2=>{const _0x4c9aca=_0x6a90f9;if(validateAccess(_0x72f3e2,_0xe7a8ec)['allow'])updateBB('reinstall');else logger[_0x4c9aca(0x10d)](_0x4c9aca(0x174));}),_0x4673ae['on']('get-backup-files',_0x272858=>{const _0x46fbfc=_0x6a90f9;if(validateAccess(_0x272858,_0xe7a8ec)['allow']){const _0x52dd3f=getClient(_0x4673ae['id']);if(_0x52dd3f)getBackupFiles(_0x52dd3f[_0x46fbfc(0x22a)]);else logger[_0x46fbfc(0x10d)](_0x46fbfc(0x1ee));}else logger[_0x46fbfc(0x10d)](_0x46fbfc(0x20e));}),_0x4673ae['on'](_0x6a90f9(0x203),(_0x1c7c87,_0x2841b3)=>{const _0x159803=_0x6a90f9;if(validateAccess(_0x2841b3,_0xe7a8ec)[_0x159803(0xbb)])restoreBackupFile(_0x1c7c87);else logger[_0x159803(0x10d)](_0x159803(0x11c));}),_0x4673ae['on'](_0x6a90f9(0x1e0),_0x465ba6=>{const _0x4a66b3=_0x6a90f9;if(validateAccess(_0x465ba6,_0xe7a8ec)['allow'])getMessages();else logger[_0x4a66b3(0x10d)](_0x4a66b3(0xc7));}),_0x4673ae['on'](_0x6a90f9(0xd2),(_0x58a8c6,_0x4ecac3)=>{const _0x191d63=_0x6a90f9;if(validateAccess(_0x4ecac3,_0xe7a8ec)[_0x191d63(0xbb)])confirmMessage(_0x58a8c6);else logger[_0x191d63(0x10d)](_0x191d63(0x15c));}),_0x4673ae['on'](_0x6a90f9(0x18e),_0x52567c=>{const _0x52741b=_0x6a90f9;if(validateAccess(_0x52567c,_0xe7a8ec)[_0x52741b(0xbb)]){if(devices[_0xe7a8ec][_0x52741b(0xea)])clearTimeout(devices[_0xe7a8ec][_0x52741b(0xea)]);if(devices[_0xe7a8ec][_0x52741b(0x91)])clearTimeout(devices[_0xe7a8ec][_0x52741b(0x91)]);removeSocketListeners(getClient(_0x4673ae['id'])[_0x52741b(0x22a)]),addBlacklist(_0xe7a8ec),devices[_0xe7a8ec][_0x52741b(0xb9)]=null,devices[_0xe7a8ec][_0x52741b(0x19b)]=null,devices[_0xe7a8ec][_0x52741b(0xc1)][_0x52741b(0xf5)]=null,logger[_0x52741b(0x222)](_0x52741b(0x263)+_0xe7a8ec[_0x52741b(0x129)](-0x8)),io['to'](getClient(_0x4673ae['id'])[_0x52741b(0x22a)])[_0x52741b(0x281)](_0x52741b(0x1be),{'access':{'allow':![],'reason':_0x52741b(0x28e),'token':null}});}else logger['full'](_0x52741b(0xbf));});}function initializeSocketBot(_0x22ccf6){const _0x4d2e16=_0x57fee5,_0x42ec9c=getClient(_0x22ccf6['id'])[_0x4d2e16(0x177)],_0x1cc798=getClient(_0x22ccf6['id'])['uuid'];_0x22ccf6['on'](_0x4d2e16(0xbd),(_0x56d99b,_0x211f76)=>{const _0x230d77=_0x4d2e16;if(validateAccess(_0x211f76,_0x1cc798)['allow']){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x230d77(0x24f)]({'function':_0x230d77(0xa0),'args':_0x56d99b});}else logger[_0x230d77(0x10d)](_0x230d77(0xcd));}),_0x22ccf6['on']('delete-alerts',(_0x26463f,_0x19ee96)=>{const _0x147472=_0x4d2e16;if(validateAccess(_0x19ee96,_0x1cc798)[_0x147472(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x147472(0x24f)]({'function':'deleteHistoryAlerts','args':_0x26463f});}else logger[_0x147472(0x10d)](_0x147472(0x1c9));}),_0x22ccf6['on']('get-portfolio',(_0x17861f,_0x23e6c7)=>{const _0x2c33e3=_0x4d2e16;if(validateAccess(_0x23e6c7,_0x1cc798)[_0x2c33e3(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x2c33e3(0x24f)]({'function':'getPortfolio','args':_0x17861f});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x22ccf6['on'](_0x4d2e16(0x14c),(_0x3f7a87,_0xe9897b)=>{const _0x501b74=_0x4d2e16;if(validateAccess(_0xe9897b,_0x1cc798)[_0x501b74(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x501b74(0x24f)]({'function':_0x501b74(0xdd),'args':_0x3f7a87});}else logger[_0x501b74(0x10d)](_0x501b74(0x251));}),_0x22ccf6['on']('store-headless',(_0x580768,_0x273d1c)=>{const _0x2f7412=_0x4d2e16;if(validateAccess(_0x273d1c,_0x1cc798)[_0x2f7412(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x2f7412(0x24f)]({'function':_0x2f7412(0x273),'args':_0x580768});}else logger[_0x2f7412(0x10d)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x22ccf6['on'](_0x4d2e16(0x230),(_0x43a5ee,_0x89f11)=>{const _0x2cd3c9=_0x4d2e16;if(validateAccess(_0x89f11,_0x1cc798)[_0x2cd3c9(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c]['send']({'function':_0x2cd3c9(0x26e),'args':_0x43a5ee});}else logger['full'](_0x2cd3c9(0x12b));}),_0x22ccf6['on'](_0x4d2e16(0x1df),_0x533ee4=>{const _0xf52eec=_0x4d2e16;if(validateAccess(_0x533ee4,_0x1cc798)[_0xf52eec(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c]['send']({'function':'resetHistory','args':null});}else logger[_0xf52eec(0x10d)](_0xf52eec(0x20b));}),_0x22ccf6['on']('get-starting-balances',_0xb9af95=>{const _0x18ef6a=_0x4d2e16;if(validateAccess(_0xb9af95,_0x1cc798)[_0x18ef6a(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x18ef6a(0x24f)]({'function':_0x18ef6a(0x157),'args':null});}else logger[_0x18ef6a(0x10d)](_0x18ef6a(0xaa));}),_0x22ccf6['on'](_0x4d2e16(0x111),(_0x1c0743,_0x1c8f1b)=>{const _0x186ae8=_0x4d2e16;if(validateAccess(_0x1c8f1b,_0x1cc798)[_0x186ae8(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x186ae8(0x24f)]({'function':_0x186ae8(0x9b),'args':_0x1c0743});}else logger[_0x186ae8(0x10d)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x22ccf6['on'](_0x4d2e16(0x18d),_0x541791=>{const _0x5ad516=_0x4d2e16;if(validateAccess(_0x541791,_0x1cc798)['allow']){if(pid[_0x42ec9c])pid[_0x42ec9c][_0x5ad516(0x24f)]({'function':_0x5ad516(0x121),'args':null});}else logger[_0x5ad516(0x10d)](_0x5ad516(0x194));}),_0x22ccf6['on'](_0x4d2e16(0x19a),_0x3412a5=>{const _0x7b31ad=_0x4d2e16;if(validateAccess(_0x3412a5,_0x1cc798)[_0x7b31ad(0xbb)]){if(pid[_0x42ec9c])pid[_0x42ec9c]['send']({'function':_0x7b31ad(0x1f7),'args':null});}else logger[_0x7b31ad(0x10d)](_0x7b31ad(0x28b));}),_0x22ccf6['on'](_0x4d2e16(0xdc),_0x587c67=>{const _0x22a2f6=_0x4d2e16;if(validateAccess(_0x587c67,_0x1cc798)[_0x22a2f6(0xbb)])updateBB(_0x22a2f6(0x1af));else logger[_0x22a2f6(0x10d)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x22ccf6['on']('get-messages',_0x23e491=>{const _0x1fda8d=_0x4d2e16;if(validateAccess(_0x23e491,_0x1cc798)[_0x1fda8d(0xbb)])getMessages();else logger[_0x1fda8d(0x10d)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x22ccf6['on'](_0x4d2e16(0xd2),(_0x14b921,_0x4b3399)=>{const _0x3a098b=_0x4d2e16;if(validateAccess(_0x4b3399,_0x1cc798)[_0x3a098b(0xbb)])confirmMessage(_0x14b921);else logger['full'](_0x3a098b(0x15c));}),_0x22ccf6['on'](_0x4d2e16(0x18e),_0xf2066f=>{const _0x334d6c=_0x4d2e16;if(validateAccess(_0xf2066f,_0x1cc798)[_0x334d6c(0xbb)]){if(devices[_0x1cc798][_0x334d6c(0xea)])clearTimeout(devices[_0x1cc798]['pidRefreshToken']);if(devices[_0x1cc798][_0x334d6c(0x91)])clearTimeout(devices[_0x1cc798]['pidExpireLogin']);removeSocketListeners(getClient(_0x22ccf6['id'])[_0x334d6c(0x22a)]),addBlacklist(_0x1cc798),devices[_0x1cc798][_0x334d6c(0xb9)]=null,devices[_0x1cc798][_0x334d6c(0x19b)]=null,devices[_0x1cc798][_0x334d6c(0xc1)]['token']=null,logger[_0x334d6c(0x222)](_0x334d6c(0x263)+_0x1cc798[_0x334d6c(0x129)](-0x8)),io['to'](getClient(_0x22ccf6['id'])[_0x334d6c(0x22a)])[_0x334d6c(0x281)]('status',{'access':{'allow':![],'reason':_0x334d6c(0x28e),'token':null}});}else logger['full'](_0x334d6c(0xbf));});}function removeSocketListeners(_0x8e0b22){getClientsWithUuid(_0x8e0b22)['forEach'](_0x31d532=>{getSocket(_0x31d532['id'])['removeAllListeners']();});}function cleanSettings(){const _0x563512=_0x57fee5;let _0xe35d50=settings;return settings[_0x563512(0x11e)]&&settings[_0x563512(0x11e)]!=''&&(_0xe35d50={..._0xe35d50,'telegramToken':_0x563512(0x28a)}),settings[_0x563512(0x162)]&&settings['bbPassword']!=''&&(_0xe35d50={..._0xe35d50,'bbPassword':'************'}),settings[_0x563512(0x1f1)]&&settings[_0x563512(0x1f1)]!=''&&(_0xe35d50={..._0xe35d50,'marketcapApi':'************'}),(settings['bbPassword']&&settings[_0x563512(0x162)]=='***'||settings[_0x563512(0x11e)]&&settings[_0x563512(0x11e)]==_0x563512(0x19f)||settings[_0x563512(0x1f1)]&&settings[_0x563512(0x1f1)]==_0x563512(0x19f))&&(_0xe35d50={..._0xe35d50,'restored':{'password':settings[_0x563512(0x162)]==_0x563512(0x19f),'telegram':settings[_0x563512(0x11e)]=='***','marketcap':settings['marketcapApi']=='***'}}),_0xe35d50;}async function updateBB(_0x5104a7){const _0x3e60a2=_0x57fee5;await backupConfigFiles(),installingUpdate=!![],config[_0x3e60a2(0x1ba)](_0x24607d=>{restartBot(_0x24607d['botID']);});if(_0x5104a7=='update')process[_0x3e60a2(0x24f)]({'update':!![],'environment':environment},_0x5909d9=>{});else _0x5104a7=='reinstall'&&process[_0x3e60a2(0x24f)]({'reinstall':!![],'environment':environment},_0x496c4a=>{});}function startBot(_0x3098fd,_0x55746d,_0x3df19f){const _0x344874=_0x57fee5;if(debugging)_0x3098fd['push']('-d');let _0x3e6478=![];const _0x5c7ff9=_0x3098fd[0x0];_0x55746d={..._0x55746d,'stdio':[_0x344874(0x10a),_0x344874(0x10a),_0x344874(0x10a),_0x344874(0x27f)]},pid[_0x5c7ff9]=childProcess[_0x344874(0x29b)](botfile,_0x3098fd,_0x55746d),pid[_0x5c7ff9]['on'](_0x344874(0x210),_0x765868=>{const _0x54ff94=_0x344874;switch(Object[_0x54ff94(0x239)](_0x765868)[0x0]){case'botname':updateBotName(_0x5c7ff9,_0x765868[_0x54ff94(0xa6)]);break;case'updatebotmanager':updateBotManager();break;case _0x54ff94(0x1be):updateStatus(_0x5c7ff9,_0x765868[_0x54ff94(0x1be)]);break;case _0x54ff94(0x26f):updateLive(_0x5c7ff9,_0x765868[_0x54ff94(0x26f)]);break;case _0x54ff94(0xc5):updateLive(_0x5c7ff9,_0x765868[_0x54ff94(0xc5)]),io['to'](_0x5c7ff9)[_0x54ff94(0x281)]('status',{'access':{'allow':![],'reason':_0x54ff94(0x17a),'token':null}});break;case _0x54ff94(0xe4):_0x765868[_0x54ff94(0xe4)]==_0x54ff94(0x21c)&&restartBot(_0x5c7ff9);_0x765868[_0x54ff94(0xe4)]=='kill'&&toggleBot(_0x5c7ff9,_0x54ff94(0x232),_0x54ff94(0x1b6));break;case'telegram':sendTelegramBot(_0x5c7ff9,_0x765868[_0x54ff94(0xd3)]);break;case _0x54ff94(0xfd):sendTelegramMsg(_0x765868[_0x54ff94(0xfd)]);break;case _0x54ff94(0x23f):io['to'](_0x5c7ff9)[_0x54ff94(0x281)](_0x765868[_0x54ff94(0x23f)],_0x765868[_0x54ff94(0x189)]);break;}}),pid[_0x5c7ff9]['on'](_0x344874(0x143),function(_0x49c3c6){if(_0x3e6478)return;_0x3e6478=!![],_0x3df19f(_0x49c3c6);}),pid[_0x5c7ff9]['on'](_0x344874(0x25c),async function(_0x15c459){const _0x290ce3=_0x344874;if(terminating)return;if(installingUpdate){logger['debug'](_0x290ce3(0xd9)),io['close']();return;}if(_0x3e6478)return;_0x3e6478=!![],_0x3df19f(null);const _0x39de1a=dbConfig[_0x290ce3(0x284)]('bots')[_0x290ce3(0x187)]({'botID':_0x5c7ff9})[_0x290ce3(0x265)]();_0x39de1a&&(_0x39de1a[_0x290ce3(0x1be)]==_0x290ce3(0x1f9)||_0x39de1a[_0x290ce3(0x1be)]==_0x290ce3(0xbe))&&(await sleep(0x3e8),updateLive(_0x5c7ff9,_0x290ce3(0x1b6)),logger['full'](_0x290ce3(0x29f)+_0x5c7ff9),startBot([_0x5c7ff9,userID],{'cwd':bbpath},function(_0x802995){const _0x5064a0=_0x290ce3;if(_0x802995)logger[_0x5064a0(0x10d)](_0x802995);}));});}function _0x5308(_0x545a18,_0x49cdc7){const _0x3efc36=_0x52dd();return _0x5308=function(_0x13742a,_0x433000){_0x13742a=_0x13742a-0x8a;let _0x52dd51=_0x3efc36[_0x13742a];return _0x52dd51;},_0x5308(_0x545a18,_0x49cdc7);}function stopBot(_0x934100){const _0x269c4d=_0x57fee5;getClientsWithBotID(_0x934100)[_0x269c4d(0x1ba)](_0x49dbef=>{getSocket(_0x49dbef['id'])['disconnect'](!![]),removeClient(_0x49dbef['id']);}),pid[_0x934100]&&(pid[_0x934100][_0x269c4d(0x1a9)](),pid[_0x934100]=null);}function stopAllBots(){const _0x5c6961=_0x57fee5;terminating=!![];const _0x15efe4=getEnabledBots();_0x15efe4[_0x5c6961(0x1ba)](_0x2b6602=>{stopBot(_0x2b6602['botID']);});}function restartBot(_0x2b6cbf){if(pid[_0x2b6cbf])pid[_0x2b6cbf]['kill']();}function addBot(){const _0x57f25e=_0x57fee5;let _0x2faa27;for(let _0x6393ff=0x1;_0x6393ff<0x3e9;_0x6393ff++){_0x2faa27=_0x6393ff[_0x57f25e(0x19e)]()['padStart'](0x3,'0');let _0x3271d9=config[_0x57f25e(0x187)](_0x48d3df=>_0x48d3df[_0x57f25e(0x1ab)]==_0x2faa27);if(!_0x3271d9)break;}if(_0x2faa27===_0x57f25e(0x180)){logger[_0x57f25e(0x10d)](_0x57f25e(0xda));return;}logger[_0x57f25e(0x10d)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x2faa27),dbConfig[_0x57f25e(0x284)](_0x57f25e(0x212))[_0x57f25e(0x245)]({'botID':_0x2faa27,'botname':_0x57f25e(0x1ff)+_0x2faa27,'status':_0x57f25e(0xbe),'live':''})[_0x57f25e(0xed)](),startBot([_0x2faa27,userID],{'cwd':bbpath},function(_0x31db8d){const _0x244423=_0x57f25e;if(_0x31db8d)logger[_0x244423(0x10d)](_0x31db8d);}),config=getConfiguration(),io['to']('botmanager')[_0x57f25e(0x281)](_0x57f25e(0x212),config),broadcastToBots('bots',JSON[_0x57f25e(0x10e)](config));}function deleteBot(_0x1bd449){const _0x541588=_0x57fee5;getClientsWithBotID(_0x1bd449)[_0x541588(0x1ba)](_0x209f98=>{const _0x3eb450=_0x541588;getSocket(_0x209f98['id'])[_0x3eb450(0x168)](!![]),removeClient(_0x209f98['id']);}),dbConfig[_0x541588(0x284)](_0x541588(0x212))[_0x541588(0x20f)]({'botID':_0x1bd449})[_0x541588(0xed)](),logger[_0x541588(0x10d)](_0x541588(0x1a4)+_0x1bd449),stopBot(_0x1bd449);try{if(fs[_0x541588(0x23d)](path[_0x541588(0xb5)](configpath,_0x541588(0x113)+_0x1bd449+_0x541588(0x156))))fs[_0x541588(0x28f)](path[_0x541588(0xb5)](configpath,_0x541588(0x113)+_0x1bd449+_0x541588(0x156)));if(fs['existsSync'](path[_0x541588(0xb5)](configpath,_0x541588(0x113)+_0x1bd449+_0x541588(0x123))))fs[_0x541588(0x28f)](path['join'](configpath,_0x541588(0x113)+_0x1bd449+_0x541588(0x123)));if(fs['existsSync'](path[_0x541588(0xb5)](configpath,'bot-'+_0x1bd449+_0x541588(0x106))))fs[_0x541588(0x28f)](path[_0x541588(0xb5)](configpath,_0x541588(0x113)+_0x1bd449+'-performance.json'));if(fs[_0x541588(0x23d)](path[_0x541588(0xb5)](configpath,'bot-'+_0x1bd449+_0x541588(0x216))))fs[_0x541588(0x28f)](path[_0x541588(0xb5)](configpath,_0x541588(0x113)+_0x1bd449+_0x541588(0x216)));}catch(_0x335511){if(_0x335511)logger[_0x541588(0x10d)](_0x541588(0x141),_0x335511);}config=getConfiguration(),io['to']('botmanager')[_0x541588(0x281)]('bots',config),broadcastToBots(_0x541588(0x212),JSON[_0x541588(0x10e)](config));}function toggleBot(_0x5035bb,_0x5786b0,_0x1be91e){const _0x5b206e=_0x57fee5;dbConfig['get']('bots')[_0x5b206e(0x187)]({'botID':_0x5035bb})[_0x5b206e(0xb3)]({'status':_0x5786b0})['assign']({'live':_0x1be91e})[_0x5b206e(0xed)]();if(_0x5786b0==_0x5b206e(0x1f9)||_0x5786b0=='new')logger[_0x5b206e(0x10d)]('Enabled\x20Bot\x20'+_0x5035bb),startBot([_0x5035bb,userID],{'cwd':bbpath},function(_0x28f2d9){if(_0x28f2d9)logger['full'](_0x28f2d9);});else(_0x5786b0=='disabled'||_0x5786b0==_0x5b206e(0x115))&&(logger[_0x5b206e(0x10d)](_0x5b206e(0x204)+_0x5035bb),stopBot(_0x5035bb));config=getConfiguration(),io['to'](_0x5b206e(0xc4))[_0x5b206e(0x281)](_0x5b206e(0x212),config),broadcastToBots(_0x5b206e(0x212),JSON[_0x5b206e(0x10e)](config));}function toggleStatus(_0x3c45d7){const _0x2f6b9e=_0x57fee5;let _0x51eef4=dbConfig[_0x2f6b9e(0x284)](_0x2f6b9e(0x212))[_0x2f6b9e(0x187)]({'botID':_0x3c45d7})['value'](),_0x3dac46;if(_0x51eef4['status']==='enabled')_0x3dac46=_0x2f6b9e(0x232);else{if(_0x51eef4[_0x2f6b9e(0x1be)]===_0x2f6b9e(0xbe))_0x3dac46=_0x2f6b9e(0x115);else{if(_0x51eef4[_0x2f6b9e(0x1be)]==='new-disabled')_0x3dac46=_0x2f6b9e(0xbe);else{if(_0x51eef4['status']==='disabled')_0x3dac46=_0x2f6b9e(0x1f9);}}}return _0x3dac46;}function updateStatus(_0x2b38b1,_0x96044e){const _0x206b3e=_0x57fee5;dbConfig[_0x206b3e(0x284)]('bots')[_0x206b3e(0x187)]({'botID':_0x2b38b1})['assign']({'status':_0x96044e})[_0x206b3e(0xed)](),config=getConfiguration(),io['to']('botmanager')[_0x206b3e(0x281)]('bots',config),broadcastToBots(_0x206b3e(0x212),JSON[_0x206b3e(0x10e)](config));}function updateLive(_0x581f93,_0x4a9d1c){const _0x11d941=_0x57fee5;dbConfig[_0x11d941(0x284)](_0x11d941(0x212))['find']({'botID':_0x581f93})[_0x11d941(0xb3)]({'live':_0x4a9d1c})[_0x11d941(0xed)](),config=getConfiguration(),io['to'](_0x11d941(0xc4))[_0x11d941(0x281)](_0x11d941(0x212),config),broadcastToBots(_0x11d941(0x212),JSON[_0x11d941(0x10e)](config));}function updateBotName(_0x435a2c,_0x5e4d96){const _0x246f24=_0x57fee5;dbConfig[_0x246f24(0x284)](_0x246f24(0x212))[_0x246f24(0x187)]({'botID':_0x435a2c})[_0x246f24(0xb3)]({'botname':_0x5e4d96})[_0x246f24(0xed)](),config=getConfiguration(),io['to']('botmanager')[_0x246f24(0x281)]('bots',config),broadcastToBots(_0x246f24(0x212),JSON['stringify'](config));}function updateBotManager(){const _0x1d53ab=_0x57fee5;config=getConfiguration(),io['to'](_0x1d53ab(0xc4))['emit']('bots',config),broadcastToBots('bots',JSON[_0x1d53ab(0x10e)](config));}function _0x52dd(){const _0x20d751=['copyFileSync','getSeconds','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','update_yes','::1','Token\x20blacklisted','off_','#RES#\x20if\x20running\x20locally\x0a','show-config','telegram2FaApproval','replace','Ok,\x20will\x20send\x20order\x20notifications\x20only','toString','***','hex','reinstall','6b67f3d61ee94b8f5c80b4affef4c4d9','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Deleted\x20Bot\x20','family','RSA-OAEP','reason','/names\x20-\x20show\x20bot\x20names\x0a','kill','success','botID','/status\x20-\x20show\x20bot(s)\x20status\x0a','timeshift','/help\x20-\x20show\x20available\x20commands\x0a','update','date-fns','name','index.html','invalid\x20credentials','build2','statSync','stopped','toggle','kind','format','forEach','Crypt','build','\x20|\x20user:\x20...','status','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','parse','action','match','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Your\x20installation\x20is\x20already\x20up\x20to\x20date','graphql-request','Telegraf\x20error:','bb-config.json','button','Unauthorized\x20attempt\x20to\x20delete\x20alerts',')\x20\x20\x20|\x20Bot\x20','sort','13670ShpYvO','(staging)','Invalid\x20username\x20or\x20IP\x20address','::ffff:127.0.0.1','names','length','http','editMessageReplyMarkup','env','login','hasOwnProperty','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Restore\x20backup\x20file\x20','telegraf','Starting\x20#RED#Balance\x20Bot\x20v','\x20to\x20','internal','20718rWOYNk','max','reset-history','get-messages','randomBytes','No\x20bots\x20running\x20right\x20now','.zip','status\x20code\x20401','config_all','environment','IPv4','lowdb','sendPortfolioTelegram','Restore\x20process\x20confirmed','output-001.log','expiry','Telegram\x20error:','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','#RES#\x20if\x20running\x20on\x20server','constructor','marketcapApi','restore_no_','f2aRequired','\x20|\x20','RSA','set','showConfig','getTime','enabled','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Invalid\x20authentication\x20token\x20(2)','Unauthorized\x20attempt\x20to\x20add\x20bot','15\x20min','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Bot\x20','Allow\x20login\x20from\x20IP\x20address\x20','sign','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','restore-backup-file','Disabled\x20Bot\x20','isDirectory','cloneDeep','search','data','inlineKeyboard','reply','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','DEFLATE','onepagemode','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','remove','message','Server','bots','output-000.log','$1_$2_$3','chat','-results.json','/restart\x20-\x20restart\x20bot(s)\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','settings.','decrypt','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','restart','user','test','initclient','createServer','callback','debug','Unauthorized\x20attempt\x20to\x20delete\x20bot','backup','getMinutes','/enable\x20-\x20enable\x20notifications\x0a','/:bot','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','isIPv4MappedAddress','uuid','5\x20min','split','reinstall-bb','launch','(((.+)+)+)+$','store-fiat','bb-settings.json','disabled','415mEJSJI','login2fa_reject_','Notifications\x20types:\x20orders\x20and\x20alerts\x0a',':\x20Bot\x20Mgr\x20>\x20','auto','ipv6','keys','from','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','compareSync','existsSync','blacklist','function','bb-secure.json','backup/','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','enable','Unauthorized\x20login\x20attempt\x20(timeout)','push','post','logs/','delete-bot','hybrid-crypto-js','manual','headers','event','HTML','bbvNew','send','whitelist','Unauthorized\x20attempt\x20to\x20store\x20configuration','createWriteStream','[ip-address]','padStart','store','Node.js\x20v','staging','apiKey','BCT','backupfile','track','exit','running','=>\x20Go\x20to\x20#CYA#http://','off','timestamp','580014UfiwgQ','1784iimjiy','Logged\x20out\x20user\x20...','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','value','2FA\x20required','\x20mode','log','messages','ETH','port','/:bot/configuration','temp/','storeFiat','live','entries','rmSync','exchange','storeHeadless','warning','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','portfolio_','Yes','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','command','backup-full@','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','portfolio','auth','notification','ipc','0.0.0','emit','\x20|\x20client:\x20...','userid','get','isValid','\x20(1)','mkdirSync','simple','headless','************','Unauthorized\x20attempt\x20to\x20show\x20configuration','telegramChatId','range','logged\x20out','unlinkSync','NTBA_FIX_319','2FA\x20login\x20token\x20generated','getMonth','Session\x20expired\x20for\x20user\x20...','login\x20token\x20generated','versions','\x1b[31m','private','init','alerts','Backup\x20file\x20unzipped\x20and\x20stored','fork','2801652VjjWNU','backup-files','temporaryAccessAllowed','Restarting\x20Bot\x20','text','2FA','logs','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','lastmsgemitted','tkn','update-bot','pidExpireLogin','exp','Password\x20has\x20been\x20reset\x20to:\x20','binary','Invalid\x20IP\x20address','telegramEnabled','Notifications\x20enabled','argv','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','Notifications\x20enabled\x0a','placeOrder','filter','backup-full.zip','access\x20timeout','mode','emitHistory','resetpw_no','\x20>\x20','code','exec','address','botname','/off\x20-\x20stop\x20bot(s)\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','socket','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/start','on_','listen','apply','Notifications\x20disabled\x0a','temporary\x20access\x20timeout','express-fileupload','/disable\x20-\x20disable\x20notifications\x0a','assign','-----------------------------------------------------------------------------------','join','zip/','/download/:type','Invalid\x20authentication\x20token\x20(1)','telegramIpApproval','config','allow','type','get-logs','new','Unauthorized\x20attempt\x20to\x20log\x20out','2FA\x20login\x20required','access','lastmsgtelegram','writeFileSync','botmanager','started','Network\x20Interfaces:','Unauthorized\x20attempt\x20to\x20get\x20messages','any','number','User\x20has\x20been\x20validated','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Unauthorized\x20attempt\x20to\x20get\x20events','api-eu.mixpanel.com','util','/on\x20-\x20start\x20bot(s)\x0a','<b>Telegram\x20Bot\x20Status:</b>\x0a','confirm-message','telegram','readFileSync','getHours','tempaccess_15_','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','toIPv4MappedAddress','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','socket.io','update-bb','storeConfiguration','Error\x20details:','encryptedUuid','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','temporary\x20access\x20rejected','\x20only\x0a','stop','127.0.0.1','order','password','Starting\x20Balance\x20Bot\x20reinstallation','28926yRcvBp','pidRefreshToken','includes','All\x20bots','write','temporary\x20token\x20generated','crypto','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','remoteAddress','restore_yes_','lowdb/adapters/FileSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','token','/:bot/history','verify','files','bcryptjs','\x20minutes','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','bbvReceive','telegrammsg','tempaccess_reject_','bb/','whitelistEnabled','output-002.log','Login\x20accepted','#RES#\x20','bot.js','File\x20uploaded','-performance.json','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','latestversion','request','inherit','username','yargs/yargs','full','stringify','loginRequired','version','place-order','\x1b[0m','bot-','handshake','new-disabled','privateKey','login\x20required','/:bot/portfolio','sha256','/metrics\x20-\x20show\x20bot\x20performance\x0a','settings','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','\x1b[35m','telegramToken','|@|','showname','cancelLoading','clients','-events.json','\x20-\x20','sendFile','address\x20already\x20in\x20use','telegramEvents','node-zip','slice','connected','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','file','show','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','reject','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','tempaccess_5_','download','login\x20not\x20required','getDate','getFullYear','sockets','store-settings','Restore\x20process\x20aborted','*$1*','7202000mnhMAv','accept','Bot\x20Mgr\x20>\x20','SIGINT','yes','backup-full','SIGTERM','Error\x20while\x20deleting\x20config\x20files:\x20','#RES#','error','/upload-backup','sendMetricsTelegram','use','reset-password','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','referer','getUTCHours','store-configuration','Setting\x20access:\x20','version.json','hashSync','start','2FA\x20login\x20rejected',')\x20|\x20Bot\x20','express','reinstall_yes','defaults','-config.json','getStartingBalances','jsonwebtoken','config/','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','readdirSync','Unauthorized\x20attempt\x20to\x20confirm\x20message','mtime','<b>Balance\x20Bot\x20Status:</b>\x0a','Temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20update\x20settings','apiPassword','bbPassword','Starting\x20Balance\x20Bot\x20update','all','sendMessage','sortBy','toggleBotMode','disconnect','orders','axios','path','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','config_alerts','static','secure','clientip','Restoring\x20bot(s)\x20from\x20backup','config_orders','\x20(2)','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','bot','/:bot/coins','startsWith','reload','generate','telegramUsername','output-003.log','Unauthorized\x20attempt\x20to\x20download\x20','tempaccess_30_','1000','catch','392907KXfERa','Backup\x20file\x20uploaded','bbUsername','Password\x20reset\x20rejected','4dkJMPK','find','All','args','Error\x20removing\x20old\x20backup\x20files:','Starting\x20(','No\x20authentication\x20token','cancel-loading','logout','secret','publicKey','Access\x20enabled\x20for\x20'];_0x52dd=function(){return _0x20d751;};return _0x52dd();}function toggleBotMode(_0x3e1151){const _0x7ef8cd=_0x57fee5;if(pid[_0x3e1151])pid[_0x3e1151][_0x7ef8cd(0x24f)]({'function':_0x7ef8cd(0x167),'args':null});else{const _0x39c983=configpath+_0x7ef8cd(0x113)+_0x3e1151+_0x7ef8cd(0x156),_0xe5d67d=fs[_0x7ef8cd(0xd4)](_0x39c983),_0xbbc861=JSON[_0x7ef8cd(0x1c0)](_0xe5d67d),_0xc6ff6f=_0xbbc861[_0x7ef8cd(0x177)][0x0][_0x7ef8cd(0x289)];_0xbbc861[_0x7ef8cd(0x177)][0x0][_0x7ef8cd(0x289)]=!_0xc6ff6f;const _0x4c6b17=JSON[_0x7ef8cd(0x10e)](_0xbbc861,null,0x2);fs['writeFileSync'](_0x39c983,_0x4c6b17),config=getConfiguration(),io['to'](_0x7ef8cd(0xc4))[_0x7ef8cd(0x281)]('bots',config),broadcastToBots(_0x7ef8cd(0x212),JSON[_0x7ef8cd(0x10e)](config));}}function validateTelegram(_0x2395a7){const _0x13a9e1=_0x57fee5;if(_0x2395a7[_0x13a9e1(0x23a)]['username']!=settings['telegramUsername']&&'@'+_0x2395a7[_0x13a9e1(0x23a)][_0x13a9e1(0x10b)]!=settings[_0x13a9e1(0x17c)]||_0x2395a7[_0x13a9e1(0x215)]['id']!=settings['telegramChatId'])return sendTelegram(_0x2395a7[_0x13a9e1(0x215)]['id'],_0x13a9e1(0xe1),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x397d86=_0x57fee5;if(tgBot)tgBot[_0x397d86(0xe4)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x397d86(0x11e)]);let _0x592681='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x592681+='\x0a',_0x592681+=_0x397d86(0x226),_0x592681+=_0x397d86(0xb2),_0x592681+=_0x397d86(0xe0),_0x592681+=_0x397d86(0x217),_0x592681+=_0x397d86(0xd0),_0x592681+=_0x397d86(0xa7),_0x592681+=_0x397d86(0xd7),_0x592681+=_0x397d86(0x1a8),_0x592681+=_0x397d86(0x1ac),_0x592681+=_0x397d86(0x11a),_0x592681+=_0x397d86(0x107),_0x592681+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x592681+=_0x397d86(0x15a),_0x592681+=_0x397d86(0x1ae);let _0x48da46=_0x397d86(0xf4);_0x48da46+='\x0a',_0x48da46+=_0x592681,tgBot[_0x397d86(0x181)]((_0x145592,_0x420819)=>{const _0x4225bb=_0x397d86;logger[_0x4225bb(0x288)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x4225bb(0x222)](_0x4225bb(0x1c6),_0x145592);}),tgBot[_0x397d86(0x146)](async(_0x3d2da8,_0x16eaec)=>{const _0x519e58=_0x397d86;if(!(!settings[_0x519e58(0x28c)]&&_0x3d2da8[_0x519e58(0x1af)][_0x519e58(0x210)][_0x519e58(0x2a0)]==_0x519e58(0xab))){if(!validateTelegram(_0x3d2da8))return;}_0x16eaec();}),tgBot[_0x397d86(0x279)](_0x397d86(0x150),async _0x3bd1b5=>{const _0x4cb3b9=_0x397d86;if(!settings[_0x4cb3b9(0x28c)])updateSetting(_0x4cb3b9(0x28c),_0x3bd1b5[_0x4cb3b9(0x215)]['id']);updateSetting(_0x4cb3b9(0x96),!![]);if(!validateTelegram(_0x3bd1b5))return;await sendTelegram(_0x3bd1b5[_0x4cb3b9(0x215)]['id'],_0x48da46);}),tgBot[_0x397d86(0x279)](_0x397d86(0x243),async _0x5bdaf3=>{const _0x50fbd7=_0x397d86;updateSetting(_0x50fbd7(0x96),!![]),await sendTelegram(_0x5bdaf3[_0x50fbd7(0x215)]['id'],_0x50fbd7(0x97));}),tgBot[_0x397d86(0x279)]('disable',async _0x39eef4=>{const _0x237a97=_0x397d86;await sendTelegram(_0x39eef4[_0x237a97(0x215)]['id'],'Notifications\x20disabled'),updateSetting('telegramEnabled',![]);}),tgBot[_0x397d86(0x279)](_0x397d86(0xba),async _0x2bd166=>{const _0x1e8dd6=_0x397d86,_0xa36479=Markup[_0x1e8dd6(0x209)]([Markup[_0x1e8dd6(0x1c8)][_0x1e8dd6(0x221)]('Orders',_0x1e8dd6(0x172)),Markup[_0x1e8dd6(0x1c8)][_0x1e8dd6(0x221)]('Alerts',_0x1e8dd6(0x16d)),Markup['button'][_0x1e8dd6(0x221)](_0x1e8dd6(0x188),_0x1e8dd6(0x1e5))]);_0x2bd166[_0x1e8dd6(0x20a)](_0x1e8dd6(0x8b),_0xa36479);}),tgBot[_0x397d86(0x1c1)](_0x397d86(0x172),async _0x4e277b=>{const _0x26f755=_0x397d86;_0x4e277b[_0x26f755(0x1d3)](),updateSetting(_0x26f755(0x127),'orders'),updateSetting(_0x26f755(0x96),!![]),await sendTelegram(_0x4e277b[_0x26f755(0x215)]['id'],_0x26f755(0x19d));}),tgBot['action'](_0x397d86(0x16d),async _0x21fb4f=>{const _0x188aea=_0x397d86;_0x21fb4f[_0x188aea(0x1d3)](),updateSetting(_0x188aea(0x127),_0x188aea(0x299)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x21fb4f['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot['action'](_0x397d86(0x1e5),async _0x5ce611=>{const _0x465f8b=_0x397d86;_0x5ce611[_0x465f8b(0x1d3)](),updateSetting('telegramEvents',_0x465f8b(0x164)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5ce611['chat']['id'],_0x465f8b(0x1fe));}),tgBot[_0x397d86(0x279)](_0x397d86(0x1be),async _0x3c3028=>{const _0x17691b=_0x397d86,_0x5f26fc=getBotsWithMode();let _0x3d751e=_0x17691b(0x15e);config[_0x17691b(0x1ba)](_0x2fd100=>{const _0x21d667=_0x17691b,_0x380beb=_0x5f26fc[_0x21d667(0x187)](_0x5ba923=>_0x5ba923[_0x21d667(0x1ab)]==_0x2fd100['botID'])['mode'];_0x3d751e+=_0x21d667(0x1ff)+_0x2fd100[_0x21d667(0x1ab)]+':\x20'+_0x2fd100[_0x21d667(0x1be)]+_0x21d667(0x1f4)+_0x380beb+_0x21d667(0x1f4)+_0x2fd100[_0x21d667(0x26f)]+'\x0a';}),_0x3d751e+='\x0a',_0x3d751e+=_0x17691b(0xd1),_0x3d751e+=!settings['telegramEnabled']?_0x17691b(0xaf):_0x17691b(0x9a),_0x3d751e+=settings[_0x17691b(0x96)]?settings[_0x17691b(0x127)]=='all'?_0x17691b(0x235):_0x17691b(0x175)+settings['telegramEvents']+_0x17691b(0xe3):'',await sendTelegram(_0x3c3028[_0x17691b(0x215)]['id'],_0x3d751e,{'parse_mode':'HTML'});}),tgBot[_0x397d86(0x279)](_0x397d86(0x21c),async _0x2a53d4=>{const _0x6c4fb5=_0x397d86,_0x2d731a=getEnabledBots();if(_0x2d731a[_0x6c4fb5(0x1d1)]==0x0)await sendTelegram(_0x2a53d4[_0x6c4fb5(0x215)]['id'],_0x6c4fb5(0x1e2));else{if(_0x2d731a[_0x6c4fb5(0x1d1)]>0x1)_0x2d731a[_0x6c4fb5(0x245)]({'botID':_0x6c4fb5(0x164)});let _0x530a6d=[],_0x15b126=[];const _0xdb62c6=_0x2d731a[_0x6c4fb5(0x1d1)]%0x4==0x0||_0x2d731a[_0x6c4fb5(0x1d1)]%0x4==0x3||_0x2d731a[_0x6c4fb5(0x1d1)]%0x3==0x1?0x4:0x3;let _0x5f5afa=0x0;_0x2d731a[_0x6c4fb5(0x1ba)]((_0x2f6951,_0x2ed1e2)=>{const _0x13a01b=_0x6c4fb5;if(_0x2ed1e2%_0xdb62c6==0x0)_0x15b126=[];_0x15b126[_0x13a01b(0x245)](Markup[_0x13a01b(0x1c8)]['callback'](_0x2f6951[_0x13a01b(0x1ab)]==_0x13a01b(0x164)?_0x13a01b(0xec):'Bot\x20'+_0x2f6951[_0x13a01b(0x1ab)],'restart_'+_0x2f6951[_0x13a01b(0x1ab)])),_0x2ed1e2%_0xdb62c6==0x0&&(_0x530a6d[_0x5f5afa]=_0x15b126,_0x5f5afa++);});const _0x2b07da=Markup['inlineKeyboard'](_0x530a6d);_0x2a53d4[_0x6c4fb5(0x20a)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x2b07da);}}),tgBot['action'](/restart_(.+)/,async _0x2c4475=>{const _0x59815f=_0x397d86,_0x556b98=_0x2c4475[_0x59815f(0x1c2)][0x1];_0x2c4475[_0x59815f(0x1d3)](),_0x556b98==_0x59815f(0x164)?config[_0x59815f(0x1ba)](_0x43c1f7=>{restartBot(_0x43c1f7['botID']);}):restartBot(_0x556b98);}),tgBot[_0x397d86(0x279)]('on',async _0x172346=>{const _0x27b8c2=_0x397d86,_0x15da58=getDisabledBots();if(_0x15da58[_0x27b8c2(0x1d1)]==0x0)await sendTelegram(_0x172346['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x15da58['length']>0x1)_0x15da58[_0x27b8c2(0x245)]({'botID':_0x27b8c2(0x164)});let _0x494816=[],_0x2b5219=[];const _0x2cbec1=_0x15da58[_0x27b8c2(0x1d1)]%0x4==0x0||_0x15da58[_0x27b8c2(0x1d1)]%0x4==0x3||_0x15da58[_0x27b8c2(0x1d1)]%0x3==0x1?0x4:0x3;let _0x4fce26=0x0;_0x15da58[_0x27b8c2(0x1ba)]((_0x75038b,_0x131144)=>{const _0x1df755=_0x27b8c2;if(_0x131144%_0x2cbec1==0x0)_0x2b5219=[];_0x2b5219[_0x1df755(0x245)](Markup[_0x1df755(0x1c8)][_0x1df755(0x221)](_0x75038b[_0x1df755(0x1ab)]==_0x1df755(0x164)?_0x1df755(0xec):_0x1df755(0x1ff)+_0x75038b[_0x1df755(0x1ab)],_0x1df755(0xac)+_0x75038b[_0x1df755(0x1ab)])),_0x131144%_0x2cbec1==0x0&&(_0x494816[_0x4fce26]=_0x2b5219,_0x4fce26++);});const _0x4b9fe2=Markup['inlineKeyboard'](_0x494816);_0x172346['reply'](_0x27b8c2(0x148),_0x4b9fe2);}}),tgBot[_0x397d86(0x1c1)](/on_(.+)/,async _0x2df617=>{const _0x2fc3de=_0x397d86,_0x17c5ce=_0x2df617[_0x2fc3de(0x1c2)][0x1];_0x2df617['editMessageReplyMarkup']();if(_0x17c5ce==_0x2fc3de(0x164)){const _0x20f383=getDisabledBots();await sendTelegram(_0x2df617[_0x2fc3de(0x215)]['id'],_0x2fc3de(0x16c)),_0x20f383[_0x2fc3de(0x1ba)](_0x2b7710=>{const _0x44d823=_0x2fc3de;if(_0x2b7710[_0x44d823(0x1ab)]!=_0x44d823(0x164))toggleBot(_0x2b7710[_0x44d823(0x1ab)],toggleStatus(_0x2b7710[_0x44d823(0x1ab)]),_0x44d823(0x1b6));});}else await sendTelegram(_0x2df617[_0x2fc3de(0x215)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x17c5ce),toggleBot(_0x17c5ce,toggleStatus(_0x17c5ce),_0x2fc3de(0x1b6));}),tgBot[_0x397d86(0x279)](_0x397d86(0x25f),async _0x41e3c9=>{const _0x59483a=_0x397d86,_0x264e93=getEnabledBots();if(_0x264e93[_0x59483a(0x1d1)]==0x0)await sendTelegram(_0x41e3c9[_0x59483a(0x215)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x264e93[_0x59483a(0x1d1)]>0x1)_0x264e93[_0x59483a(0x245)]({'botID':'all'});let _0x588d5e=[],_0x4b0313=[];const _0x3e6b43=_0x264e93['length']%0x4==0x0||_0x264e93[_0x59483a(0x1d1)]%0x4==0x3||_0x264e93['length']%0x3==0x1?0x4:0x3;let _0x554bbe=0x0;_0x264e93[_0x59483a(0x1ba)]((_0xc12ccf,_0x4199e2)=>{const _0x3ec2ca=_0x59483a;if(_0x4199e2%_0x3e6b43==0x0)_0x4b0313=[];_0x4b0313[_0x3ec2ca(0x245)](Markup[_0x3ec2ca(0x1c8)][_0x3ec2ca(0x221)](_0xc12ccf[_0x3ec2ca(0x1ab)]==_0x3ec2ca(0x164)?_0x3ec2ca(0xec):'Bot\x20'+_0xc12ccf[_0x3ec2ca(0x1ab)],_0x3ec2ca(0x198)+_0xc12ccf[_0x3ec2ca(0x1ab)])),_0x4199e2%_0x3e6b43==0x0&&(_0x588d5e[_0x554bbe]=_0x4b0313,_0x554bbe++);});const _0x4ebca0=Markup[_0x59483a(0x209)](_0x588d5e);_0x41e3c9[_0x59483a(0x20a)](_0x59483a(0x1c3),_0x4ebca0);}}),tgBot[_0x397d86(0x1c1)](/off_(.+)/,async _0x53772b=>{const _0x4bf831=_0x397d86,_0x253dc3=_0x53772b[_0x4bf831(0x1c2)][0x1];_0x53772b[_0x4bf831(0x1d3)]();if(_0x253dc3==_0x4bf831(0x164)){const _0x2dea35=getEnabledBots();await sendTelegram(_0x53772b['chat']['id'],_0x4bf831(0x1d7)),_0x2dea35[_0x4bf831(0x1ba)](_0x2fac87=>{const _0x4fe915=_0x4bf831;if(_0x2fac87[_0x4fe915(0x1ab)]!=_0x4fe915(0x164))toggleBot(_0x2fac87[_0x4fe915(0x1ab)],toggleStatus(_0x2fac87[_0x4fe915(0x1ab)]),'stopped');});}else await sendTelegram(_0x53772b[_0x4bf831(0x215)]['id'],_0x4bf831(0x12e)+_0x253dc3),toggleBot(_0x253dc3,toggleStatus(_0x253dc3),_0x4bf831(0x1b6));}),tgBot[_0x397d86(0x279)]('metrics',async _0x22c1ce=>{const _0x2ad991=_0x397d86,_0x21b37f=getEnabledBots();if(_0x21b37f['length']==0x0)await sendTelegram(_0x22c1ce[_0x2ad991(0x215)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x21b37f[_0x2ad991(0x1d1)]>0x1){let _0x5c5030=[],_0x4e5094=[];const _0x105f3d=_0x21b37f['length']%0x4==0x0||_0x21b37f[_0x2ad991(0x1d1)]%0x4==0x3||_0x21b37f[_0x2ad991(0x1d1)]%0x3==0x1?0x4:0x3;let _0xb119f3=0x0;_0x21b37f['forEach']((_0x4e9398,_0x34418e)=>{const _0x1659f0=_0x2ad991;if(_0x34418e%_0x105f3d==0x0)_0x4e5094=[];_0x4e5094['push'](Markup[_0x1659f0(0x1c8)][_0x1659f0(0x221)](_0x1659f0(0x1ff)+_0x4e9398[_0x1659f0(0x1ab)],'metrics_'+_0x4e9398[_0x1659f0(0x1ab)])),_0x34418e%_0x105f3d==0x0&&(_0x5c5030[_0xb119f3]=_0x4e5094,_0xb119f3++);});const _0x2f5109=Markup[_0x2ad991(0x209)](_0x5c5030);_0x22c1ce[_0x2ad991(0x20a)](_0x2ad991(0x8c),_0x2f5109);}else{const _0x3824b7=_0x21b37f[0x0]['botID'];if(pid[_0x3824b7])pid[_0x3824b7][_0x2ad991(0x24f)]({'function':_0x2ad991(0x145),'args':null});}}}),tgBot[_0x397d86(0x1c1)](/metrics_(.+)/,async _0x40db58=>{const _0x40e00a=_0x397d86,_0x53e775=_0x40db58['match'][0x1];_0x40db58[_0x40e00a(0x1d3)]();if(pid[_0x53e775])pid[_0x53e775]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x397d86(0x279)](_0x397d86(0x27c),async _0x4db0c5=>{const _0xfe23ee=_0x397d86,_0xc37cfd=getEnabledBots();if(_0xc37cfd[_0xfe23ee(0x1d1)]==0x0)await sendTelegram(_0x4db0c5['chat']['id'],_0xfe23ee(0x1e2));else{if(_0xc37cfd['length']>0x1){let _0x537999=[],_0x2b478a=[];const _0x4b6794=_0xc37cfd[_0xfe23ee(0x1d1)]%0x4==0x0||_0xc37cfd[_0xfe23ee(0x1d1)]%0x4==0x3||_0xc37cfd[_0xfe23ee(0x1d1)]%0x3==0x1?0x4:0x3;let _0x48ae8a=0x0;_0xc37cfd[_0xfe23ee(0x1ba)]((_0x13017d,_0x22792e)=>{const _0x3ba5e2=_0xfe23ee;if(_0x22792e%_0x4b6794==0x0)_0x2b478a=[];_0x2b478a[_0x3ba5e2(0x245)](Markup['button'][_0x3ba5e2(0x221)](_0x3ba5e2(0x1ff)+_0x13017d[_0x3ba5e2(0x1ab)],_0x3ba5e2(0x276)+_0x13017d['botID'])),_0x22792e%_0x4b6794==0x0&&(_0x537999[_0x48ae8a]=_0x2b478a,_0x48ae8a++);});const _0x151527=Markup[_0xfe23ee(0x209)](_0x537999);_0x4db0c5[_0xfe23ee(0x20a)](_0xfe23ee(0x21b),_0x151527);}else{const _0x3e8f43=_0xc37cfd[0x0]['botID'];if(pid[_0x3e8f43])pid[_0x3e8f43][_0xfe23ee(0x24f)]({'function':_0xfe23ee(0x1e9),'args':null});}}}),tgBot[_0x397d86(0x1c1)](/portfolio_(.+)/,async _0x14049f=>{const _0x5c5e6b=_0x397d86,_0x5d209a=_0x14049f[_0x5c5e6b(0x1c2)][0x1];_0x14049f[_0x5c5e6b(0x1d3)]();if(pid[_0x5d209a])pid[_0x5d209a]['send']({'function':_0x5c5e6b(0x1e9),'args':null});}),tgBot[_0x397d86(0x279)](_0x397d86(0x1af),async _0x2d0607=>{const _0x24decd=_0x397d86;await getMessages();if(!updateAvailable)await sendTelegram(_0x2d0607[_0x24decd(0x215)]['id'],_0x24decd(0x1c4));else{if(!validInstallation)await sendTelegram(_0x2d0607[_0x24decd(0x215)]['id'],_0x24decd(0xcc));else{const _0x42f431=Markup[_0x24decd(0x209)]([Markup[_0x24decd(0x1c8)][_0x24decd(0x221)](_0x24decd(0x277),_0x24decd(0x195)),Markup['button']['callback']('No','update_no')]);_0x2d0607[_0x24decd(0x20a)](_0x24decd(0x218),_0x42f431);}}}),tgBot[_0x397d86(0x1c1)](/update_(.+)/,async _0x15de37=>{const _0x471bcc=_0x397d86,_0x5209c3=_0x15de37[_0x471bcc(0x1c2)][0x1];_0x15de37[_0x471bcc(0x1d3)](),_0x5209c3=='yes'&&(await sendTelegram(_0x15de37[_0x471bcc(0x215)]['id'],_0x471bcc(0x163)),updateBB(_0x471bcc(0x1af))),_0x5209c3=='no'&&await sendTelegram(_0x15de37[_0x471bcc(0x215)]['id'],_0x471bcc(0x228));}),tgBot['command'](_0x397d86(0x1a1),async _0x3d4451=>{const _0x30099b=_0x397d86;if(!validInstallation)await sendTelegram(_0x3d4451[_0x30099b(0x215)]['id'],_0x30099b(0x275));else{const _0x3a4af9=Markup[_0x30099b(0x209)]([Markup[_0x30099b(0x1c8)][_0x30099b(0x221)](_0x30099b(0x277),_0x30099b(0x154)),Markup[_0x30099b(0x1c8)][_0x30099b(0x221)]('No','reinstall_no')]);_0x3d4451['reply'](_0x30099b(0x27b),_0x3a4af9);}}),tgBot[_0x397d86(0x1c1)](/reinstall_(.+)/,async _0x386191=>{const _0x5d57d2=_0x397d86,_0x32a462=_0x386191[_0x5d57d2(0x1c2)][0x1];_0x386191['editMessageReplyMarkup'](),_0x32a462==_0x5d57d2(0x13e)&&(await sendTelegram(_0x386191['chat']['id'],_0x5d57d2(0xe8)),updateBB(_0x5d57d2(0x1a1))),_0x32a462=='no'&&await sendTelegram(_0x386191['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x397d86(0x279)](_0x397d86(0x1b7),async _0x531a76=>{const _0x24ad12=_0x397d86,_0x5937b2=getBotsWithMode();if(_0x5937b2[_0x24ad12(0x1d1)]==0x0)await sendTelegram(_0x531a76[_0x24ad12(0x215)]['id'],_0x24ad12(0x1e2));else{let _0x21e7ae=[],_0x339369=[];const _0x52c940=0x2;let _0x44fcf1=0x0;_0x5937b2[_0x24ad12(0x1ba)]((_0x54731a,_0x24f270)=>{const _0x5c1f3a=_0x24ad12;if(_0x24f270%_0x52c940==0x0)_0x339369=[];_0x339369[_0x5c1f3a(0x245)](Markup['button']['callback']('Bot\x20'+_0x54731a[_0x5c1f3a(0x1ab)]+'\x20('+_0x54731a[_0x5c1f3a(0x9f)]+')','toggle_'+_0x54731a['botID'])),_0x24f270%_0x52c940==0x0&&(_0x21e7ae[_0x44fcf1]=_0x339369,_0x44fcf1++);});const _0x2668e9=Markup[_0x24ad12(0x209)](_0x21e7ae);_0x531a76[_0x24ad12(0x20a)](_0x24ad12(0x130),_0x2668e9);}}),tgBot['action'](/toggle_(.+)/,async _0x2f8f42=>{const _0x1ad79c=_0x397d86,_0x1c93ee=_0x2f8f42[_0x1ad79c(0x1c2)][0x1];_0x2f8f42[_0x1ad79c(0x1d3)]();const _0x5c637d=getBotsWithMode(),_0x4c49fe=_0x5c637d[_0x1ad79c(0x187)](_0x44c40f=>_0x44c40f[_0x1ad79c(0x1ab)]==_0x1c93ee),_0xa38c94=_0x4c49fe['mode']==_0x1ad79c(0x237)?_0x1ad79c(0x24a):_0x1ad79c(0x237);await sendTelegram(_0x2f8f42[_0x1ad79c(0x215)]['id'],_0x1ad79c(0xcb)+_0x1c93ee+_0x1ad79c(0x1db)+_0xa38c94+_0x1ad79c(0x267)),toggleBotMode(_0x1c93ee);}),tgBot[_0x397d86(0x279)](_0x397d86(0x1d0),async _0x8ad0cb=>{const _0x337c19=_0x397d86;let _0x3eba06='';config[_0x337c19(0x1ba)](_0x38b817=>{const _0x485ef8=_0x337c19;_0x3eba06+='Bot\x20'+_0x38b817[_0x485ef8(0x1ab)]+':\x20'+_0x38b817[_0x485ef8(0xa6)]+'\x0a';}),await sendTelegram(_0x8ad0cb[_0x337c19(0x215)]['id'],_0x3eba06,{'parse_mode':_0x337c19(0x24d)});}),tgBot[_0x397d86(0x279)]('help',async _0x2a7322=>{const _0x19651c=_0x397d86;await sendTelegram(_0x2a7322[_0x19651c(0x215)]['id'],_0x592681);}),process['once'](_0x397d86(0x13d),()=>tgBot[_0x397d86(0xe4)](_0x397d86(0x13d))),process['once'](_0x397d86(0x140),()=>tgBot['stop'](_0x397d86(0x140))),tgBot[_0x397d86(0x22e)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x7c5a6e,_0x2b71f7,_0x16dcf1){const _0x30b3ff=_0x57fee5;_0x16dcf1={..._0x16dcf1,'disable_web_page_preview':!![]};try{await tgBot[_0x30b3ff(0xd3)][_0x30b3ff(0x165)](_0x7c5a6e,_0x2b71f7,_0x16dcf1);}catch(_0x51e6b8){console[_0x30b3ff(0x268)](_0x30b3ff(0x1ed),_0x51e6b8);}}async function sendTelegramBot(_0x591ead,_0x8d85c0){const _0x3dfe7a=_0x57fee5;if(settings[_0x3dfe7a(0x96)]){if(settings[_0x3dfe7a(0x127)]==_0x3dfe7a(0x164)||(_0x8d85c0[_0x3dfe7a(0xbc)]==_0x3dfe7a(0x143)||_0x8d85c0['type']==_0x3dfe7a(0x274)||_0x8d85c0[_0x3dfe7a(0xbc)]==_0x3dfe7a(0x1aa))&&settings[_0x3dfe7a(0x127)]==_0x3dfe7a(0x299)||_0x8d85c0['type']==_0x3dfe7a(0xe6)&&settings[_0x3dfe7a(0x127)]==_0x3dfe7a(0x169)){if(tgBot&&settings[_0x3dfe7a(0x28c)]){if(_0x8d85c0[_0x3dfe7a(0x120)])await sendTelegram(settings['telegramChatId'],_0x8d85c0[_0x3dfe7a(0xa6)]+_0x3dfe7a(0xa2)+_0x8d85c0[_0x3dfe7a(0x24c)]);else await sendTelegram(settings['telegramChatId'],_0x3dfe7a(0x1ff)+_0x591ead+'\x20>\x20'+_0x8d85c0[_0x3dfe7a(0x24c)]);}}}}async function sendTelegramMsg(_0x535ed6,_0x5e721f='HTML'){const _0x8997ba=_0x57fee5;return settings[_0x8997ba(0x96)]&&tgBot&&settings[_0x8997ba(0x28c)]?(await sendTelegram(settings[_0x8997ba(0x28c)],_0x535ed6,{'parse_mode':_0x5e721f}),!![]):![];}function getDeviceWithIp(_0x380110){return devices['find'](_0x50dc7f=>_0x50dc7f['ip']===_0x380110);}async function temporaryAccess2FA(_0x255ceb,_0x48c0fa){const _0x1f1d50=_0x57fee5;let _0x562895=new Date(),_0xab89fa=![];if(lastIpApproval){if(_0x562895-lastIpApproval<0x1388)_0xab89fa=!![];}lastIpApproval=new Date();if(_0xab89fa)return;if(tgBot&&settings[_0x1f1d50(0x28c)]){const _0x1c1fea=uuidRandom();tmpStorage[_0x1c1fea]={'uuid':_0x255ceb,'externalip':_0x48c0fa};const _0x1cb103=Markup[_0x1f1d50(0x209)]([Markup[_0x1f1d50(0x1c8)]['callback'](_0x1f1d50(0x22b),_0x1f1d50(0x131)+_0x1c1fea),Markup[_0x1f1d50(0x1c8)][_0x1f1d50(0x221)](_0x1f1d50(0x1fd),_0x1f1d50(0xd6)+_0x1c1fea),Markup[_0x1f1d50(0x1c8)][_0x1f1d50(0x221)]('30\x20min',_0x1f1d50(0x17f)+_0x1c1fea),Markup['button'][_0x1f1d50(0x221)](_0x1f1d50(0x12f),_0x1f1d50(0xfe)+_0x1c1fea)]);await sendTelegram(settings['telegramChatId'],_0x1f1d50(0x149)+normalizeIP(_0x48c0fa)[_0x1f1d50(0x12d)]+'\x20?',_0x1cb103),tgBot[_0x1f1d50(0x1c1)](/tempaccess_(.+)_(.+)/,async _0x3fbede=>{const _0x4223cd=_0x1f1d50,_0x44e11d=_0x3fbede['match'][0x1],_0x5e9d1f=_0x3fbede['match'][0x2],{uuid:_0x4e0729,externalip:_0x49e1f7}=tmpStorage[_0x5e9d1f];delete tmpStorage[_0x5e9d1f],_0x3fbede[_0x4223cd(0x1d3)](),devices[_0x4e0729]['telegramIpApproval']={'clientip':_0x49e1f7,'timestamp':new Date()[_0x4223cd(0x1f8)](),'expiry':_0x44e11d},_0x44e11d!=_0x4223cd(0x12f)?(await sendTelegram(_0x3fbede[_0x4223cd(0x215)]['id'],_0x4223cd(0x191)+_0x44e11d+_0x4223cd(0xfa),{'parse_mode':_0x4223cd(0x24d)}),io['to'](_0x4e0729)[_0x4223cd(0x281)](_0x4223cd(0x1be),{'access':{'allow':![],'reason':_0x4223cd(0x17a),'token':null}})):(await sendTelegram(_0x3fbede[_0x4223cd(0x215)]['id'],_0x4223cd(0x15f)),io['to'](_0x4e0729)[_0x4223cd(0x281)](_0x4223cd(0x1be),{'access':{'allow':![],'reason':_0x4223cd(0xe2),'token':null}}));});}}async function loginAccess2FA(_0x3d3a3a,_0x5ef5cf){const _0x3d0905=_0x57fee5;if(tgBot&&settings[_0x3d0905(0x28c)]){const _0xf93630=uuidRandom();tmpStorage[_0xf93630]={'uuid':_0x3d3a3a,'externalip':_0x5ef5cf};const _0x1e0e0b=Markup[_0x3d0905(0x209)]([Markup[_0x3d0905(0x1c8)][_0x3d0905(0x221)](_0x3d0905(0x13b),'login2fa_'+loginExpiry+'_'+_0xf93630),Markup[_0x3d0905(0x1c8)][_0x3d0905(0x221)](_0x3d0905(0x12f),_0x3d0905(0x234)+_0xf93630)]);await sendTelegram(settings['telegramChatId'],_0x3d0905(0x200)+normalizeIP(_0x5ef5cf)[_0x3d0905(0x12d)]+'\x20?',_0x1e0e0b),tgBot[_0x3d0905(0x1c1)](/login2fa_(.+)_(.+)/,async _0x592dbc=>{const _0x5b2214=_0x3d0905,_0x371c12=_0x592dbc[_0x5b2214(0x1c2)][0x1],_0x18300b=_0x592dbc['match'][0x2],{uuid:_0x2914e3,externalip:_0x50f3ba}=tmpStorage[_0x18300b];delete tmpStorage[_0x18300b],_0x592dbc['editMessageReplyMarkup'](),devices[_0x2914e3][_0x5b2214(0x19b)]={'clientip':_0x50f3ba,'timestamp':new Date()[_0x5b2214(0x1f8)](),'expiry':_0x371c12},_0x371c12!='reject'?(await sendTelegram(_0x592dbc['chat']['id'],_0x5b2214(0x102),{'parse_mode':_0x5b2214(0x24d)}),io['to'](_0x2914e3)['emit'](_0x5b2214(0x1be),{'access':{'allow':![],'reason':_0x5b2214(0x17a),'token':null}})):(await sendTelegram(_0x592dbc['chat']['id'],'Login\x20rejected'),io['to'](_0x2914e3)[_0x5b2214(0x281)](_0x5b2214(0x1be),{'access':{'allow':![],'reason':_0x5b2214(0x151),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x52b3c9=_0x57fee5;return dbConfig[_0x52b3c9(0x284)]('bots')[_0x52b3c9(0x166)]('botID')[_0x52b3c9(0x9c)]({'status':_0x52b3c9(0x1f9)})[_0x52b3c9(0x265)]()||[];}function getDisabledBots(){const _0x3e2279=_0x57fee5;return dbConfig[_0x3e2279(0x284)](_0x3e2279(0x212))[_0x3e2279(0x166)](_0x3e2279(0x1ab))['filter']({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x5d56db){const _0x5e5be4=_0x57fee5;let _0xeda23b={};const _0x12426b=configpath+_0x5e5be4(0x113)+_0x5d56db+_0x5e5be4(0x156),_0x1ec2c3=fs[_0x5e5be4(0x23d)](_0x12426b);if(_0x1ec2c3){const _0x318248=fs['readFileSync'](_0x12426b);try{const _0x13b769=JSON[_0x5e5be4(0x1c0)](_0x318248),_0x1698cb=_0x13b769?_0x13b769['bot'][0x0][_0x5e5be4(0x289)]:![];_0xeda23b[_0x5e5be4(0x9f)]=_0x1698cb?_0x5e5be4(0x237):_0x5e5be4(0x24a),_0xeda23b[_0x5e5be4(0xa6)]=_0x13b769?_0x13b769[_0x5e5be4(0x177)][0x0][_0x5e5be4(0xa6)]:_0x5e5be4(0x1ff)+_0x5d56db;}catch(_0x244c60){_0xeda23b['mode']='manual',_0xeda23b[_0x5e5be4(0xa6)]=_0x5e5be4(0x1ff)+_0x5d56db;}}else _0xeda23b[_0x5e5be4(0x9f)]=_0x5e5be4(0x24a),_0xeda23b[_0x5e5be4(0xa6)]=_0x5e5be4(0x1ff)+_0x5d56db;return _0xeda23b;}function getBotsWithMode(){const _0x44c00=_0x57fee5,_0x4db466=dbConfig[_0x44c00(0x284)](_0x44c00(0x212))['sortBy'](_0x44c00(0x1ab))['value']()||[];return _0x4db466[_0x44c00(0x1ba)](_0x635c6b=>{const _0x1a97b6=_0x44c00;let _0x5d4fec=getBotAttributes(_0x635c6b[_0x1a97b6(0x1ab)]);_0x635c6b[_0x1a97b6(0x9f)]=_0x5d4fec[_0x1a97b6(0x9f)];}),_0x4db466;}function getBotExchanges(){const _0x5e42a7=_0x57fee5;let _0x40dad3=[];const _0xb422c8=dbConfig[_0x5e42a7(0x284)](_0x5e42a7(0x212))[_0x5e42a7(0x166)]('botID')[_0x5e42a7(0x265)]()||[];_0xb422c8['forEach'](_0x1981a9=>{const _0x335adc=_0x5e42a7;if(_0x1981a9[_0x335adc(0x1be)]==_0x335adc(0x1f9)){const _0x17c2bc=configpath+_0x335adc(0x113)+_0x1981a9['botID']+_0x335adc(0x156),_0x30cd09=fs['existsSync'](_0x17c2bc);let _0x58451b;if(_0x30cd09){const _0x43fa4c=fs[_0x335adc(0xd4)](_0x17c2bc);try{const _0x350806=JSON['parse'](_0x43fa4c);_0x58451b=_0x350806?_0x350806['bot'][0x0][_0x335adc(0x272)]:null;}catch(_0x51fb04){}}if(_0x58451b)_0x40dad3[_0x335adc(0x245)](_0x58451b);}});const _0x3d085e=[...new Set(_0x40dad3)][_0x5e42a7(0x1cb)]();return _0x3d085e;}async function initUser(){const _0x4e7e52=_0x57fee5;if(!settings[_0x4e7e52(0x283)]){const _0xccc3ad=uuidRandom();mixpanel['alias'](_0xccc3ad),updateSetting(_0x4e7e52(0x283),_0xccc3ad);}}async function initSecure(){const _0x1ba687=_0x57fee5;let _0x2beace=getSecure();if(!_0x2beace[_0x1ba687(0x1d6)](_0x1ba687(0x18f))){let _0x29009d=await generateKeys();_0x2beace[_0x1ba687(0x190)]=_0x29009d[_0x1ba687(0x190)],_0x2beace[_0x1ba687(0x116)]=_0x29009d[_0x1ba687(0x116)],_0x2beace[_0x1ba687(0x18f)]=crypto[_0x1ba687(0x1e1)](0x20)[_0x1ba687(0x19e)](_0x1ba687(0x1a0));;storeSecure(_0x2beace);}}function getSettings(){const _0x2df133=_0x57fee5;return dbSettings['get'](_0x2df133(0x11b))[_0x2df133(0x265)]()||{};}function getSecure(){const _0x1b2311=_0x57fee5;return dbSecure[_0x1b2311(0x284)](_0x1b2311(0x16f))[_0x1b2311(0x265)]()||{};}function getBlacklist(){const _0x54c285=_0x57fee5;return dbSecure[_0x54c285(0x284)]('blacklist')[_0x54c285(0x265)]()||[];}function broadcastToBots(_0x4ace98,_0x286edb){const _0x5b463c=_0x57fee5;config[_0x5b463c(0x1ba)](_0x31ded5=>{const _0x5448e0=_0x5b463c;if(_0x31ded5[_0x5448e0(0x1be)]==_0x5448e0(0x1f9)&&_0x31ded5['live']=='running'||_0x31ded5[_0x5448e0(0x1be)]==_0x5448e0(0xbe)&&_0x31ded5['live']==_0x5448e0(0x25d)){if(pid[_0x31ded5['botID']])pid[_0x31ded5[_0x5448e0(0x1ab)]][_0x5448e0(0x24f)]({[_0x4ace98]:_0x286edb});}});}async function storeSettings(_0x47e593,_0x4af4b5=![]){const _0x14c396=_0x57fee5;_0x47e593={...settings,..._0x47e593};if(_0x4af4b5&&_0x47e593[_0x14c396(0x162)]!=_0x14c396(0x28a)&&_0x47e593['bbPassword']!=_0x14c396(0x19f)&&_0x47e593['bbPassword']!=''){const _0x56e64d=crypt[_0x14c396(0x21a)](secure['privateKey'],_0x47e593[_0x14c396(0x162)])[_0x14c396(0x210)][_0x14c396(0x22c)](_0x14c396(0x11f))[0x0],_0x1349dd=bcrypt[_0x14c396(0x14f)](_0x56e64d,saltRounds);_0x47e593={..._0x47e593,'bbPassword':_0x1349dd};}if(_0x4af4b5&&_0x47e593[_0x14c396(0x11e)]!=_0x14c396(0x28a)&&_0x47e593['telegramToken']!=_0x14c396(0x19f)&&_0x47e593[_0x14c396(0x11e)]!=''){const _0x23e16b=crypt['decrypt'](secure[_0x14c396(0x116)],_0x47e593[_0x14c396(0x11e)])[_0x14c396(0x210)][_0x14c396(0x22c)](_0x14c396(0x11f))[0x0];_0x47e593={..._0x47e593,'telegramToken':_0x23e16b};}if(_0x4af4b5&&_0x47e593[_0x14c396(0x1f1)]!=_0x14c396(0x28a)&&_0x47e593[_0x14c396(0x1f1)]!=_0x14c396(0x19f)&&_0x47e593['marketcapApi']!=''){const _0xf57a9f=crypt['decrypt'](secure[_0x14c396(0x116)],_0x47e593[_0x14c396(0x1f1)])['message']['split'](_0x14c396(0x11f))[0x0];_0x47e593={..._0x47e593,'marketcapApi':_0xf57a9f};}const _0x1e3bd0=_0x47e593[_0x14c396(0x11e)]!='************'&&_0x47e593[_0x14c396(0x11e)]!=settings[_0x14c396(0x11e)]||_0x47e593[_0x14c396(0x17c)]!=settings['telegramUsername'],_0x1c70f9=_0x47e593[_0x14c396(0x11e)]==''||_0x47e593['telegramUsername']=='',_0x5ae25d=_0x47e593[_0x14c396(0x1f1)]&&_0x47e593[_0x14c396(0x1f1)]!='************'&&_0x47e593['marketcapApi']!=settings[_0x14c396(0x11e)];_0x1e3bd0&&(_0x47e593[_0x14c396(0x28c)]=null,_0x47e593[_0x14c396(0x127)]=_0x14c396(0x164));for(const [_0x587af0,_0xde1d8e]of Object[_0x14c396(0x270)](_0x47e593)){if(_0x587af0==_0x14c396(0x11e)&&_0xde1d8e==_0x14c396(0x28a)){_0x47e593[_0x14c396(0x11e)]=settings[_0x14c396(0x11e)];continue;};if(_0x587af0==_0x14c396(0x162)&&_0xde1d8e==_0x14c396(0x28a)){_0x47e593[_0x14c396(0x162)]=settings[_0x14c396(0x162)];continue;};if(_0x587af0==_0x14c396(0x1f1)&&_0xde1d8e==_0x14c396(0x28a)){_0x47e593[_0x14c396(0x1f1)]=settings[_0x14c396(0x1f1)];continue;};dbSettings[_0x14c396(0x1f6)]('settings.'+_0x587af0,_0xde1d8e)[_0x14c396(0xed)]();}settings=_0x47e593,io['to']('botmanager')[_0x14c396(0x281)](_0x14c396(0x11b),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']),broadcastToBots(_0x14c396(0x20d),settings['onepagemode']),broadcastToBots(_0x14c396(0x1f1),settings['marketcapApi']);if(_0x1e3bd0&&!_0x1c70f9)initTelegram();if(_0x1e3bd0&&_0x1c70f9)disableTelegram();getAllClients()['forEach'](_0x5b0f91=>{const _0x191dd0=_0x14c396;getSocket(_0x5b0f91['id'])[_0x191dd0(0x281)](_0x191dd0(0x1be),{'access':{'allow':![],'reason':_0x191dd0(0x17a),'token':null}});}),_0x5ae25d&&(await sleep(0xbb8),testMarketcapApi(_0x47e593[_0x14c396(0x1f1)]));}async function testMarketcapApi(_0x1cc18e){const _0xdea56c=_0x57fee5,_0x4a0a62=[_0xdea56c(0x259),_0xdea56c(0x26a)];try{await axios[_0xdea56c(0x284)](_0xdea56c(0xfb),{'headers':{'X-CMC_PRO_API_KEY':_0x1cc18e},'params':{'symbol':_0x4a0a62[_0xdea56c(0x19e)]()}});}catch(_0x29534e){_0x29534e[_0xdea56c(0x19e)]()['includes'](_0xdea56c(0x1e4))?(io['to'](_0xdea56c(0xc4))[_0xdea56c(0x281)]('notification',_0xdea56c(0x23b)),logger[_0xdea56c(0x10d)](_0xdea56c(0x23b))):(io['to'](_0xdea56c(0xc4))[_0xdea56c(0x281)](_0xdea56c(0x27e),_0xdea56c(0x202)),logger['full'](_0xdea56c(0x202)),logger[_0xdea56c(0x222)](_0xdea56c(0xde),_0x29534e[_0xdea56c(0x19e)]()+_0xdea56c(0x124)+_0x29534e[_0xdea56c(0xa3)]));return;}logger[_0xdea56c(0x222)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x56dc67,_0x2877f5){const _0x4653c6=_0x57fee5;dbSettings[_0x4653c6(0x1f6)](_0x4653c6(0x219)+_0x56dc67,_0x2877f5)['write'](),settings=getSettings(),io['to'](_0x4653c6(0xc4))[_0x4653c6(0x281)](_0x4653c6(0x11b),cleanSettings());}function storeSecure(_0x51ff8f){const _0xe4625e=_0x57fee5;dbSecure[_0xe4625e(0x284)](_0xe4625e(0x16f))[_0xe4625e(0x245)](_0x51ff8f)[_0xe4625e(0xed)](),secure=_0x51ff8f;}function addBlacklist(_0x298043){const _0x16752b=_0x57fee5;cleanBlacklist();let _0x148758;devices[_0x298043][_0x16752b(0xb9)]?_0x148758=Math[_0x16752b(0x1de)](devices[_0x298043][_0x16752b(0xb9)][_0x16752b(0x1ec)],loginExpiry):_0x148758=loginExpiry,dbSecure['get'](_0x16752b(0x23e))[_0x16752b(0x245)]({'expiry':new Date()[_0x16752b(0x1f8)]()+_0x148758*0x3c*0x3e8,'token':devices[_0x298043]['access'][_0x16752b(0xf5)]})[_0x16752b(0xed)](),blacklist=dbSecure['get'](_0x16752b(0x23e))[_0x16752b(0x265)]();}function cleanBlacklist(){const _0x46cfa0=_0x57fee5;let _0x592f5b=dbSecure['get'](_0x46cfa0(0x23e))[_0x46cfa0(0x206)]()[_0x46cfa0(0x265)](),_0x2afba5=new Date()['getTime']();_0x592f5b[_0x46cfa0(0x1ba)](_0x542571=>{const _0x1ce520=_0x46cfa0;_0x542571[_0x1ce520(0x1ec)]<_0x2afba5&&dbSecure[_0x1ce520(0x284)](_0x1ce520(0x23e))[_0x1ce520(0x20f)]({'expiry':_0x542571['expiry']})[_0x1ce520(0xed)]();});}function initStates(){let _0x3fc563=getConfiguration();_0x3fc563['forEach'](_0x2d83e0=>{const _0x4aad5d=_0x5308;_0x2d83e0[_0x4aad5d(0x26f)]=_0x4aad5d(0x1b6);}),storeConfiguration(_0x3fc563);}function onKeys(){const _0x5cb2a4=new RSA();return new Promise(_0x50a9e1=>{_0x5cb2a4['generateKeyPairAsync']()['then'](_0x4a261e=>{_0x50a9e1(_0x4a261e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2946e7=_0x57fee5;let _0x1910ec=getSettings(),_0x569b5f=![];!_0x1910ec[_0x2946e7(0x1d6)](_0x2946e7(0xc2))&&(_0x1910ec[_0x2946e7(0xc2)]=0x0,_0x569b5f=!![]);!_0x1910ec[_0x2946e7(0x1d6)]('lastmsgemitted')&&(_0x1910ec['lastmsgemitted']=0x0,_0x569b5f=!![]);!_0x1910ec[_0x2946e7(0x1d6)](_0x2946e7(0x108))&&(_0x1910ec[_0x2946e7(0x108)]=_0x2946e7(0x280),_0x569b5f=!![]);!_0x1910ec[_0x2946e7(0x1d6)](_0x2946e7(0x20d))&&(_0x1910ec[_0x2946e7(0x20d)]=![],_0x569b5f=!![]);!_0x1910ec['hasOwnProperty'](_0x2946e7(0x1f1))&&(_0x1910ec[_0x2946e7(0x1f1)]='',_0x569b5f=!![]);if(_0x569b5f)storeSettings(_0x1910ec);try{fs[_0x2946e7(0x15b)](configbackuppath,{'withFileTypes':!![]})[_0x2946e7(0x1ba)](_0x47f946=>{const _0x64cd89=_0x2946e7;if(!_0x47f946[_0x64cd89(0x205)]()){if(!_0x47f946[_0x64cd89(0x1b1)][_0x64cd89(0x179)](_0x64cd89(0x27a)))fs['unlinkSync'](configbackuppath+_0x47f946[_0x64cd89(0x1b1)]);}else fs[_0x64cd89(0x271)](configbackuppath+_0x47f946['name'],{'recursive':!![]});});}catch(_0x241d4b){logger[_0x2946e7(0x222)](_0x2946e7(0x18a),_0x241d4b);}}function storeConfiguration(_0x16cf0b){const _0x1065a4=_0x57fee5;dbConfig[_0x1065a4(0x284)](_0x1065a4(0x212))[_0x1065a4(0x20f)]()['write'](),dbConfig['get'](_0x1065a4(0x212))[_0x1065a4(0x245)](..._0x16cf0b)[_0x1065a4(0xed)](),config=_0x16cf0b;}async function resetPassword(){const _0x57efa3=_0x57fee5;if(tgBot&&settings[_0x57efa3(0x28c)]){const _0x3a8443=Markup[_0x57efa3(0x209)]([Markup[_0x57efa3(0x1c8)]['callback'](_0x57efa3(0x13e),'resetpw_yes'),Markup[_0x57efa3(0x1c8)]['callback']('no',_0x57efa3(0xa1))]);await sendTelegram(settings[_0x57efa3(0x28c)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x3a8443),tgBot['action'](/resetpw_(.+)/,async _0x328e93=>{const _0xf96e69=_0x57efa3,_0x40db9e=_0x328e93[_0xf96e69(0x1c2)][0x1];_0x328e93['editMessageReplyMarkup']();if(_0x40db9e!='no'){const _0x227948=0xf,_0x42e527=_0xf96e69(0x1fa),_0x256306=Array[_0xf96e69(0x23a)](crypto['randomFillSync'](new Uint32Array(_0x227948)))['map'](_0x11627f=>_0x42e527[_0x11627f%_0x42e527[_0xf96e69(0x1d1)]])[_0xf96e69(0xb5)](''),_0x5529ca=bcrypt['hashSync'](_0x256306,saltRounds);storeSettings({'bbPassword':_0x5529ca}),await sendTelegram(_0x328e93['chat']['id'],_0xf96e69(0x93)+_0x256306,{'parse_mode':'HTML'});}else await sendTelegram(_0x328e93[_0xf96e69(0x215)]['id'],_0xf96e69(0x185));});}}async function confirmRestore(_0x517624,_0x15f82d){const _0x18e8ce=_0x57fee5;io['to'](_0x18e8ce(0xc4))[_0x18e8ce(0x281)]('notification',_0x18e8ce(0x1bf),_0x18e8ce(0x1aa));if(tgBot&&settings[_0x18e8ce(0x28c)]){const _0x3b9098=uuidRandom();tmpStorage[_0x3b9098]={'path':_0x517624,'filename':_0x15f82d};const _0x2fb5b4=Markup[_0x18e8ce(0x209)]([Markup[_0x18e8ce(0x1c8)]['callback'](_0x18e8ce(0x13e),_0x18e8ce(0xf2)+_0x3b9098),Markup['button']['callback']('no',_0x18e8ce(0x1f2)+_0x3b9098)]);await sendTelegram(settings[_0x18e8ce(0x28c)],_0x18e8ce(0x1a3),_0x2fb5b4),tgBot[_0x18e8ce(0x1c1)](/restore_(.+)_(.+)/,async _0x4aaf09=>{const _0x4216e5=_0x18e8ce,_0x2a77dc=_0x4aaf09[_0x4216e5(0x1c2)][0x1],_0x59c035=_0x4aaf09[_0x4216e5(0x1c2)][0x2],{path:_0x32ca4a,filename:_0x426162}=tmpStorage[_0x59c035];delete tmpStorage[_0x59c035],_0x4aaf09[_0x4216e5(0x1d3)](),_0x2a77dc==_0x4216e5(0x13e)?(logger[_0x4216e5(0x222)](_0x4216e5(0x1ea)),await sendTelegram(_0x4aaf09[_0x4216e5(0x215)]['id'],_0x4216e5(0x171),{'parse_mode':_0x4216e5(0x24d)}),unzipFile(_0x32ca4a,_0x426162)):(logger[_0x4216e5(0x222)]('Restore\x20process\x20aborted'),await sendTelegram(_0x4aaf09[_0x4216e5(0x215)]['id'],_0x4216e5(0x138)));});}}function getServerTime(){const _0x5c3769=_0x57fee5,_0x53a3f3=new Date();return _0x53a3f3[_0x5c3769(0x135)]()+'/'+(_0x53a3f3['getMonth']()+0x1)[_0x5c3769(0x19e)]()['padStart'](0x2,'0')+'/'+_0x53a3f3[_0x5c3769(0x134)]()[_0x5c3769(0x19e)]()[_0x5c3769(0x254)](0x2,'0')+'\x20'+_0x53a3f3[_0x5c3769(0xd5)]()[_0x5c3769(0x19e)]()[_0x5c3769(0x254)](0x2,'0')+':'+_0x53a3f3[_0x5c3769(0x225)]()[_0x5c3769(0x19e)]()[_0x5c3769(0x254)](0x2,'0')+':'+_0x53a3f3[_0x5c3769(0x193)]()[_0x5c3769(0x19e)]()[_0x5c3769(0x254)](0x2,'0');}function getTimeStamp(){const _0xa7195e=_0x57fee5,_0x4d8af6=shiftedTime();return _0x4d8af6['getFullYear']()+'/'+(_0x4d8af6[_0xa7195e(0x292)]()+0x1)['toString']()[_0xa7195e(0x254)](0x2,'0')+'/'+_0x4d8af6[_0xa7195e(0x134)]()[_0xa7195e(0x19e)]()[_0xa7195e(0x254)](0x2,'0')+'\x20'+_0x4d8af6[_0xa7195e(0xd5)]()[_0xa7195e(0x19e)]()[_0xa7195e(0x254)](0x2,'0')+':'+_0x4d8af6[_0xa7195e(0x225)]()[_0xa7195e(0x19e)]()[_0xa7195e(0x254)](0x2,'0')+':'+_0x4d8af6[_0xa7195e(0x193)]()[_0xa7195e(0x19e)]()[_0xa7195e(0x254)](0x2,'0');}function getCleanTimeStamp(){const _0x36059f=_0x57fee5,_0x481312=shiftedTime();return _0x481312[_0x36059f(0x135)]()+(_0x481312[_0x36059f(0x292)]()+0x1)[_0x36059f(0x19e)]()[_0x36059f(0x254)](0x2,'0')+_0x481312[_0x36059f(0x134)]()[_0x36059f(0x19e)]()[_0x36059f(0x254)](0x2,'0')+'-'+_0x481312[_0x36059f(0xd5)]()['toString']()[_0x36059f(0x254)](0x2,'0')+_0x481312[_0x36059f(0x225)]()[_0x36059f(0x19e)]()[_0x36059f(0x254)](0x2,'0')+_0x481312['getSeconds']()[_0x36059f(0x19e)]()[_0x36059f(0x254)](0x2,'0');}function shiftedTime(){const _0x45f4a8=_0x57fee5,_0x1497b5=new Date();let _0xf8185d=_0x1497b5;if(settings[_0x45f4a8(0x1ad)]&&settings['timeshift']!==0x0)_0xf8185d=fns['add'](_0x1497b5,{'hours':settings[_0x45f4a8(0x1ad)]});return _0xf8185d;}function startScheduler(){const _0x39e506=_0x57fee5,_0x2bf653=new Date()[_0x39e506(0x14b)](),_0x5b5d43=shiftedTime()[_0x39e506(0xd5)]();_0x5b5d43==0x4&&backupConfigFiles();_0x5b5d43==0x0&&rotateLogFiles();_0x2bf653%0x6==0x0&&triggerAnalytics();_0x2bf653%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x59d147){const _0x35127b=_0x57fee5;logger[_0x35127b(0x222)](_0x35127b(0x1d8)+_0x59d147);const _0x31e7c2=getBotsWithMode();_0x31e7c2['length']>0x0?confirmRestore(configbackuppath,_0x59d147):unzipFile(configbackuppath,_0x59d147);}async function getBackupFiles(_0x1a9c46=null){const _0x2a8db5=_0x57fee5;let _0xa4be00=[],_0x3e7c05=fs[_0x2a8db5(0x15b)](configbackuppath,{'withFileTypes':!![]});_0x3e7c05[_0x2a8db5(0x1cb)]((_0x2020dc,_0xc97574)=>_0x2020dc['name']<_0xc97574[_0x2a8db5(0x1b1)]?0x1:_0xc97574[_0x2a8db5(0x1b1)]<_0x2020dc['name']?-0x1:0x0),_0x3e7c05[_0x2a8db5(0x1ba)](_0x52c879=>{const _0x2d6374=_0x2a8db5;if(!_0x52c879[_0x2d6374(0x205)]()&&_0x52c879[_0x2d6374(0x1b1)][_0x2d6374(0x179)]('backup-full@')&&_0x52c879[_0x2d6374(0x1b1)]['endsWith'](_0x2d6374(0x1e3))){const _0x1610bb=formatDate(fs[_0x2d6374(0x1b5)](configbackuppath+_0x52c879[_0x2d6374(0x1b1)])[_0x2d6374(0x15d)]);_0xa4be00['push']({'name':_0x52c879[_0x2d6374(0x1b1)],'mtime':_0x1610bb});}});if(_0x1a9c46)io['to'](_0x1a9c46)[_0x2a8db5(0x281)](_0x2a8db5(0x29d),_0xa4be00);else return _0xa4be00;}async function backupConfigFiles(){const _0x18e61a=_0x57fee5;await zipFiles(_0x18e61a(0x13f));const _0x25f927=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x18e61a(0x9d),configbackuppath+(_0x18e61a(0x27a)+_0x25f927+'.zip'));let _0x8de514=fs[_0x18e61a(0x15b)](configbackuppath,{'withFileTypes':!![]});_0x8de514[_0x18e61a(0x1cb)]((_0xc8c14,_0xe8679a)=>_0xc8c14['name']<_0xe8679a[_0x18e61a(0x1b1)]?0x1:_0xe8679a[_0x18e61a(0x1b1)]<_0xc8c14['name']?-0x1:0x0),_0x8de514['length']>maxBackups&&fs[_0x18e61a(0x28f)](configbackuppath+_0x8de514[_0x8de514['length']-0x1]['name']);}function rotateLogFiles(){const _0x175c64=_0x57fee5,_0x8defa8=fs[_0x175c64(0x1b5)](logspath+_0x175c64(0x213)),_0x31b24c=_0x8defa8['size']/0x400;if(_0x31b24c>0x64){let _0x1c598b=fs[_0x175c64(0x15b)](logspath,{'withFileTypes':!![]});_0x1c598b[_0x175c64(0x1cb)]((_0x5278cf,_0x2c8090)=>_0x5278cf[_0x175c64(0x1b1)]<_0x2c8090[_0x175c64(0x1b1)]?0x1:_0x2c8090[_0x175c64(0x1b1)]<_0x5278cf['name']?-0x1:0x0),_0x1c598b[_0x175c64(0x1ba)](_0x205867=>{const _0x259e48=_0x175c64;if(_0x205867['name']==_0x259e48(0x101))fs[_0x259e48(0x192)](logspath+_0x205867[_0x259e48(0x1b1)],logspath+_0x259e48(0x17d));if(_0x205867[_0x259e48(0x1b1)]==_0x259e48(0x1eb))fs[_0x259e48(0x192)](logspath+_0x205867[_0x259e48(0x1b1)],logspath+_0x259e48(0x101));_0x205867['name']==_0x259e48(0x213)&&(fs[_0x259e48(0x192)](logspath+_0x205867[_0x259e48(0x1b1)],logspath+_0x259e48(0x1eb)),fs[_0x259e48(0xc3)](logspath+_0x205867[_0x259e48(0x1b1)],''));});}}async function zipFiles(_0x2ea041){const _0x30d244=_0x57fee5;let _0x12c412;if(_0x2ea041==_0x30d244(0x8a))_0x12c412=logspath;if(_0x2ea041==_0x30d244(0x224))_0x12c412=configpath;if(_0x2ea041==_0x30d244(0x13f))_0x12c412=configpath;let _0x12df6d=fs['readdirSync'](_0x12c412,{'withFileTypes':!![]});const _0x16783f=new require(_0x30d244(0x128))();_0x12df6d[_0x30d244(0x1ba)](_0x3c0217=>{const _0x6521b7=_0x30d244;if(!_0x3c0217[_0x6521b7(0x205)]()){let _0x2ec08d=fs[_0x6521b7(0xd4)](_0x12c412+_0x3c0217[_0x6521b7(0x1b1)]);if(_0x2ea041==_0x6521b7(0x224)){const _0x5e4bd8=/^bot-[0-9]{3}-config.json$/,_0x2970c7=_0x5e4bd8[_0x6521b7(0x21e)](_0x3c0217[_0x6521b7(0x1b1)]);if(_0x2970c7){const _0x144200=JSON[_0x6521b7(0x1c0)](_0x2ec08d);if(_0x144200[_0x6521b7(0x177)][0x0]){_0x144200[_0x6521b7(0x177)][0x0][_0x6521b7(0x258)]='***',_0x144200['bot'][0x0]['apiSecret']=_0x6521b7(0x19f);if(_0x144200[_0x6521b7(0x177)][0x0][_0x6521b7(0x161)])_0x144200[_0x6521b7(0x177)][0x0][_0x6521b7(0x161)]=_0x6521b7(0x19f);}_0x2ec08d=JSON[_0x6521b7(0x10e)](_0x144200,null,0x2);}if(_0x3c0217['name']==_0x6521b7(0x231)){const _0xf112aa=JSON[_0x6521b7(0x1c0)](_0x2ec08d);if(_0xf112aa['settings'][_0x6521b7(0x10f)])_0xf112aa[_0x6521b7(0x11b)]['loginRequired']=![];if(_0xf112aa['settings'][_0x6521b7(0x162)])_0xf112aa[_0x6521b7(0x11b)]['bbPassword']='***';if(_0xf112aa[_0x6521b7(0x11b)]['telegramToken'])_0xf112aa['settings'][_0x6521b7(0x11e)]=_0x6521b7(0x19f);if(_0xf112aa[_0x6521b7(0x11b)][_0x6521b7(0x28c)])_0xf112aa[_0x6521b7(0x11b)]['telegramChatId']=null;if(_0xf112aa['settings'][_0x6521b7(0x1f1)])_0xf112aa[_0x6521b7(0x11b)][_0x6521b7(0x1f1)]='***';_0x2ec08d=JSON[_0x6521b7(0x10e)](_0xf112aa,null,0x2);}if(_0x3c0217['name']!=_0x6521b7(0x240))_0x16783f[_0x6521b7(0x12c)](_0x3c0217[_0x6521b7(0x1b1)],_0x2ec08d);}else _0x16783f[_0x6521b7(0x12c)](_0x3c0217[_0x6521b7(0x1b1)],_0x2ec08d);}});const _0x346063=_0x16783f[_0x30d244(0x17b)]({'base64':![],'compression':_0x30d244(0x20c)});fs[_0x30d244(0xc3)](zippath+(_0x2ea041+_0x30d244(0x1e3)),_0x346063,_0x30d244(0x94));}async function unzipFile(_0x5a2e2c,_0x226f9e){const _0x2ceb49=_0x57fee5;fs[_0x2ceb49(0x15b)](configpath,{'withFileTypes':!![]})['forEach'](_0x477b1a=>{const _0x131938=_0x2ceb49;if(!_0x477b1a[_0x131938(0x205)]())fs['rmSync'](configpath+_0x477b1a['name']);});const _0x54de78=fs[_0x2ceb49(0xd4)](_0x5a2e2c+_0x226f9e,_0x2ceb49(0x94)),_0x343c4a=new require(_0x2ceb49(0x128))(_0x54de78,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x343c4a[_0x2ceb49(0xf8)])[_0x2ceb49(0x1ba)](_0x331afc=>{const _0x29589b=_0x2ceb49,_0xa2d672=_0x343c4a[_0x29589b(0xf8)][_0x331afc];fs['writeFileSync'](configpath+_0xa2d672['name'],_0xa2d672['_data']);}),fs[_0x2ceb49(0x15b)](temppath,{'withFileTypes':!![]})['forEach'](_0x4ec1bd=>{const _0x4214a7=_0x2ceb49;if(!_0x4ec1bd[_0x4214a7(0x205)]())fs[_0x4214a7(0x271)](temppath+_0x4ec1bd[_0x4214a7(0x1b1)]);}),logger[_0x2ceb49(0x222)](_0x2ceb49(0x29a)),process[_0x2ceb49(0x24f)]({'restore':!![]},_0x25dcb4=>{});}async function getPublicIp(){const _0x363d4a=_0x57fee5;try{const _0x1ea0e8=await axios[_0x363d4a(0x284)]('https://api.ipify.org?format=json');publicip=_0x1ea0e8[_0x363d4a(0x208)]['ip'];}catch(_0xcc2ad0){}}async function triggerAnalytics(){const _0x44b34e=_0x57fee5;if(!publicip)await getPublicIp();const _0x12ee64=getBotsWithMode();let _0x1899d2=0x0;_0x12ee64['forEach'](_0x2e6083=>{const _0x6dfde1=_0x5308;if(_0x2e6083[_0x6dfde1(0x1be)]===_0x6dfde1(0x1f9))_0x1899d2++;});const _0x2954a3=getBotExchanges();mixpanel[_0x44b34e(0x25b)](_0x44b34e(0x211),{'distinct_id':settings[_0x44b34e(0x283)],'ip':publicip,'version':serverversion,'numbots':_0x12ee64[_0x44b34e(0x1d1)],'numbotsenabled':_0x1899d2,'exchanges':_0x2954a3,'environment':environment});}async function getMessages(){const _0x28ba2f=_0x57fee5,_0x52f402='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x2caa0a=new GraphQLClient(_0x52f402),_0x4d1773={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x3e1b8a=serverversion['split']('.'),_0x423ef4=_0x3e1b8a[0x0]+'.'+_0x3e1b8a[0x1],_0x3fd8a9=Math['min'](settings[_0x28ba2f(0xc2)],settings['lastmsgemitted']),_0x167e99={'last':parseInt(_0x3fd8a9),'bbm':_0x423ef4},_0x2a935a=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5b0ac3;try{_0x5b0ac3=await _0x2caa0a[_0x28ba2f(0x109)](_0x2a935a,_0x167e99,_0x4d1773);}catch(_0x2a207c){}if(_0x5b0ac3&&_0x5b0ac3[_0x28ba2f(0x269)]){let _0x3217ab=settings[_0x28ba2f(0xc2)];newMessages=[];for(const _0x1bec82 of _0x5b0ac3[_0x28ba2f(0x269)]){newMessages[_0x28ba2f(0x245)](_0x1bec82);let _0x21f89d=![];_0x1bec82['bbvNew']&&(updateSetting('latestversion',_0x1bec82[_0x28ba2f(0x24e)]),_0x21f89d=isNewerVersion(serverversion,_0x1bec82[_0x28ba2f(0x24e)])||serverversion==_0x1bec82['bbvNew']);if(!_0x21f89d&&_0x1bec82[_0x28ba2f(0xc9)]>_0x3217ab){if(_0x1bec82[_0x28ba2f(0xfc)]===_0x28ba2f(0xc8)||serverversion[_0x28ba2f(0x179)](_0x1bec82[_0x28ba2f(0xfc)])){let _0xb96dc3=''+_0x1bec82['title']+'\x0a\x0a'+_0x1bec82[_0x28ba2f(0x210)];const _0x4cffdc=await sendTelegramMsg(toTelegramMarkdown(_0xb96dc3),'Markdown');if(_0x4cffdc)_0x3217ab=_0x1bec82[_0x28ba2f(0xc9)];}}}updateAvailable=isNewerVersion(settings[_0x28ba2f(0x108)],serverversion),updateSetting(_0x28ba2f(0xc2),_0x3217ab),emitMessages();}}function emitMessages(){const _0xffe2b4=_0x57fee5,_0x34e397=settings[_0xffe2b4(0x8e)];let _0x405271=[];newMessages[_0xffe2b4(0x1ba)](_0x3c2a0f=>{const _0x2ce23e=_0xffe2b4;_0x3c2a0f[_0x2ce23e(0xc9)]>_0x34e397&&_0x405271[_0x2ce23e(0x245)](_0x3c2a0f);}),_0x405271[_0xffe2b4(0x1d1)]>0x0&&getAllClients()[_0xffe2b4(0x1ba)](_0x4cd19b=>{const _0x569984=_0xffe2b4;getSocket(_0x4cd19b['id'])[_0x569984(0x281)](_0x569984(0x210),_0x405271);});}function confirmMessage(_0x1967e4){const _0x7c5215=_0x57fee5;updateSetting(_0x7c5215(0x8e),Number(_0x1967e4));}function isNewerVersion(_0x241f66,_0x51fc0f){const _0x29c2bd=_0x57fee5,_0x54aaf8=_0x51fc0f[_0x29c2bd(0x22c)]('.'),_0x291857=_0x241f66[_0x29c2bd(0x22c)]('.');for(var _0x36a396=0x0;_0x36a396<_0x291857[_0x29c2bd(0x1d1)];_0x36a396++){const _0x22bd99=~~_0x291857[_0x36a396],_0x513621=~~_0x54aaf8[_0x36a396];if(_0x22bd99>_0x513621)return!![];if(_0x22bd99<_0x513621)return![];}return![];}function toTelegramMarkdown(_0x57fb86){const _0x1a9019=_0x57fee5,_0x567b36=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5dba1b=/\*{2}(.+?)\*{2}/gim;return _0x57fb86=_0x57fb86[_0x1a9019(0x19c)](_0x567b36,_0x1a9019(0x214))[_0x1a9019(0x19c)](_0x5dba1b,_0x1a9019(0x139)),_0x57fb86;}async function validateConfigFile(){const _0x1d6c4c=_0x57fee5,_0x3c54d3=dbConfig[_0x1d6c4c(0x284)](_0x1d6c4c(0x212))[_0x1d6c4c(0x166)](_0x1d6c4c(0x1ab))[_0x1d6c4c(0x265)]()||[];if(_0x3c54d3['length']==0x0){let _0x47f6af=0x0,_0x1b34f9=[];const _0x46af08=/^bot-([0-9]{3})-config.json$/,_0x90cffa=fs['readdirSync'](configpath);_0x90cffa[_0x1d6c4c(0x1ba)](_0x2c854f=>{const _0x3ec36e=_0x1d6c4c,_0x107b7e=_0x46af08[_0x3ec36e(0xa4)](_0x2c854f);if(_0x107b7e){const _0x4e5697=_0x107b7e[0x1];let _0x4305c1=getBotAttributes(_0x4e5697);_0x1b34f9['push']({'botID':_0x4e5697,'botname':_0x4305c1[_0x3ec36e(0xa6)],'status':'disabled','live':_0x3ec36e(0x1b6)}),_0x47f6af++;}}),_0x47f6af!=0x0&&(dbConfig['get'](_0x1d6c4c(0x212))[_0x1d6c4c(0xb3)](_0x1b34f9)[_0x1d6c4c(0xed)](),config=_0x1b34f9,restoredConfigFile=_0x47f6af);}}async function restoreConfigNotify(_0x3b3064){const _0x433c96=_0x57fee5;let _0x543e8f;if(restoredConfigFile==0x1)_0x543e8f=_0x433c96(0x264);else _0x543e8f=_0x433c96(0xf0);if(_0x3b3064)io['to'](_0x433c96(0xc4))[_0x433c96(0x281)]('notification',_0x543e8f);else{logger[_0x433c96(0x288)]('-----------------------------------------------------------------------------------'),logger['simple'](_0x543e8f),logger[_0x433c96(0x288)](_0x433c96(0xb4)),logger[_0x433c96(0x288)]('');if(tgBot&&settings[_0x433c96(0x28c)]&&settings['telegramEvents']!=_0x433c96(0x169))await sendTelegram(settings[_0x433c96(0x28c)],_0x433c96(0x13c)+_0x543e8f);}}function validateCredentials(_0x2f1c52,_0x3340b2){const _0x69bf9=_0x57fee5;if(_0x2f1c52['username']==settings[_0x69bf9(0x184)]&&bcrypt[_0x69bf9(0x23c)](_0x2f1c52[_0x69bf9(0xe7)],settings[_0x69bf9(0x162)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x69bf9(0xc0),'token':null};else{const _0x450b58=generateLoginToken(_0x3340b2);return{'allow':!![],'reason':_0x69bf9(0x294),'token':_0x450b58};}}else return{'allow':![],'reason':_0x69bf9(0x1b3),'token':null};}function refreshToken(_0x3fafd5){const _0x35e9b4=generateLoginToken(_0x3fafd5);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x35e9b4};}function validateAccess(_0x42ad3d,_0x176b4c,_0x16dfc9){const _0x2f7b01=_0x57fee5,_0x5aa28f=_0x16dfc9?_0x16dfc9:devices[_0x176b4c]['ip'];let _0x54c35b;const _0x26f3f6=_0x4b2c3d=>{const _0x17b634=_0x5308;if(settings['loginRequired']){if(settings[_0x17b634(0x1f3)]){if(telegram2FaApproved(_0x176b4c)){const _0x45f3bc=generateLoginToken(_0x176b4c);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x45f3bc};}else return{'allow':![],'reason':_0x17b634(0x117),'token':null};}else return _0x54c35b=validToken(_0x4b2c3d,_0x176b4c),_0x54c35b[_0x17b634(0x1d6)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x4b2c3d}:{'allow':![],'reason':_0x17b634(0x117),'token':null};}else return{'allow':!![],'reason':_0x17b634(0x133),'token':null};};if(settings[_0x2f7b01(0x100)]){let _0x5404ee=[...settings[_0x2f7b01(0x250)],_0x2f7b01(0x196),_0x2f7b01(0x1cf),_0x2f7b01(0xe5)];if(_0x5404ee[_0x2f7b01(0xeb)](_0x5aa28f))return _0x26f3f6(_0x42ad3d);else{_0x54c35b=validToken(_0x42ad3d,_0x176b4c);if(_0x54c35b[_0x2f7b01(0x1d6)](_0x2f7b01(0x1aa)))return _0x26f3f6(_0x42ad3d);else{if(telegramIpApproved(_0x176b4c)){const _0x237046=generateToken(_0x176b4c);return _0x54c35b=_0x26f3f6(_0x42ad3d),_0x54c35b['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x237046}:_0x54c35b;}else return settings[_0x2f7b01(0x29e)]?{'allow':![],'reason':_0x2f7b01(0x266),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x26f3f6(_0x42ad3d);}function timelyDecrypt(_0x203504,_0x8811fe,_0x3e039d='@'){const _0x1c68e8=_0x57fee5;if(_0x203504)try{const _0x29dbfe=crypt['decrypt'](secure[_0x1c68e8(0x116)],_0x203504)[_0x1c68e8(0x210)],_0x406567=_0x29dbfe['split'](_0x3e039d)[0x0],_0x15781f=_0x29dbfe[_0x1c68e8(0x22c)](_0x3e039d)[0x1],_0x1790b5=new Date()[_0x1c68e8(0x1f8)]();if(_0x8811fe){if(_0x1790b5-_0x15781f<maxSecretAge*0x3e8)return _0x406567;else return![];}else return _0x406567;}catch(_0x29df1f){return![];}else return![];}const validToken=(_0x268a80,_0x1b6e22)=>{const _0x588803=_0x57fee5,_0x30ed0b=devices[_0x1b6e22]['ip'];if(!_0x268a80)return{'error':_0x588803(0x18c)};for(let _0x395881 of blacklist){if(_0x395881['token']==_0x268a80)return{'error':_0x588803(0x197)};}let _0x1f7e1f;try{_0x1f7e1f=jwt[_0x588803(0xf7)](_0x268a80,secure[_0x588803(0x18f)]+_0x1b6e22);}catch{return{'error':_0x588803(0xb8)};}if(!_0x1f7e1f['hasOwnProperty']('clientip')&&!_0x1f7e1f['hasOwnProperty'](_0x588803(0x10b))||!_0x1f7e1f[_0x588803(0x1d6)](_0x588803(0x92)))return{'error':_0x588803(0x1fb)};if(!_0x1f7e1f[_0x588803(0x1d6)](_0x588803(0x10b))&&_0x1f7e1f[_0x588803(0x1d6)](_0x588803(0x170))){const {clientip:_0x184672}=_0x1f7e1f;return _0x30ed0b==_0x184672?{'success':_0x588803(0xca)}:{'error':_0x588803(0x95)};}else{if(_0x1f7e1f['hasOwnProperty'](_0x588803(0x10b))&&_0x1f7e1f['hasOwnProperty'](_0x588803(0x170))){const {username:_0x2c2ccc,clientip:_0x148bcd}=_0x1f7e1f;return settings[_0x588803(0x184)]==_0x2c2ccc&&_0x30ed0b==_0x148bcd?{'success':_0x588803(0xca)}:{'error':_0x588803(0x1ce)};}}},generateLoginToken=_0x1adf62=>{const _0x3d2218=_0x57fee5;if(_0x1adf62){const _0x179a73=devices[_0x1adf62]['ip'];return jwt[_0x3d2218(0x201)]({'username':settings['bbUsername'],'clientip':_0x179a73},secure[_0x3d2218(0x18f)]+_0x1adf62,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x23ed22=>{const _0x4ca32f=_0x57fee5;if(_0x23ed22){const _0x5cff19=devices[_0x23ed22]['ip'];return jwt['sign']({'clientip':_0x5cff19},secure['secret']+_0x23ed22,{'expiresIn':devices[_0x23ed22][_0x4ca32f(0xb9)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x5c8e92=>{const _0x2c2210=_0x57fee5;let _0x17cf34=![];return devices[_0x5c8e92]['telegramIpApproval']&&devices[_0x5c8e92][_0x2c2210(0xb9)][_0x2c2210(0x1ec)]!=_0x2c2210(0x12f)&&(_0x17cf34=devices[_0x5c8e92][_0x2c2210(0xb9)][_0x2c2210(0x170)]==devices[_0x5c8e92]['ip']&&new Date()[_0x2c2210(0x1f8)]()-devices[_0x5c8e92][_0x2c2210(0xb9)][_0x2c2210(0x260)]<devices[_0x5c8e92][_0x2c2210(0xb9)][_0x2c2210(0x1ec)]*0x3c*0x3e8),_0x17cf34;},telegram2FaApproved=_0xe8be02=>{const _0x1444df=_0x57fee5;let _0x106b3d=![];return devices[_0xe8be02][_0x1444df(0x19b)]&&devices[_0xe8be02]['telegram2FaApproval'][_0x1444df(0x1ec)]!='reject'&&(_0x106b3d=devices[_0xe8be02][_0x1444df(0x19b)][_0x1444df(0x170)]==devices[_0xe8be02]['ip']&&new Date()[_0x1444df(0x1f8)]()-devices[_0xe8be02][_0x1444df(0x19b)][_0x1444df(0x260)]<devices[_0xe8be02]['telegram2FaApproval'][_0x1444df(0x1ec)]*0x3c*0x3e8),_0x106b3d;},normalizeIP=_0x324975=>{const _0x24f7ea=_0x57fee5;let _0x1c62cb=null,_0x31def7=null;if(ipaddr[_0x24f7ea(0x285)](_0x324975)){const _0x25c57c=ipaddr[_0x24f7ea(0x1c0)](_0x324975);_0x25c57c[_0x24f7ea(0x1b8)]()===_0x24f7ea(0x238)?(_0x25c57c[_0x24f7ea(0x229)]()&&(_0x1c62cb=_0x25c57c['toIPv4Address']()[_0x24f7ea(0x19e)]()),_0x31def7=_0x25c57c[_0x24f7ea(0x19e)]()):(_0x1c62cb=_0x25c57c[_0x24f7ea(0x19e)](),_0x31def7=_0x25c57c[_0x24f7ea(0xd8)]()['toString']());}return{'show':_0x1c62cb?_0x1c62cb:_0x31def7,'store':_0x31def7};};function formatDate(_0x59c54a){const _0x4b5c0b=_0x57fee5;return _0x59c54a[_0x4b5c0b(0x135)]()+'/'+(_0x59c54a[_0x4b5c0b(0x292)]()+0x1)[_0x4b5c0b(0x19e)]()[_0x4b5c0b(0x254)](0x2,'0')+'/'+_0x59c54a[_0x4b5c0b(0x134)]()[_0x4b5c0b(0x19e)]()[_0x4b5c0b(0x254)](0x2,'0')+'\x20'+_0x59c54a['getHours']()[_0x4b5c0b(0x19e)]()['padStart'](0x2,'0')+':'+_0x59c54a[_0x4b5c0b(0x225)]()[_0x4b5c0b(0x19e)]()[_0x4b5c0b(0x254)](0x2,'0')+':'+_0x59c54a['getSeconds']()[_0x4b5c0b(0x19e)]()[_0x4b5c0b(0x254)](0x2,'0');}function sleep(_0x1442f4){return new Promise(_0x132041=>setTimeout(_0x132041,_0x1442f4));}