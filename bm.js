const _0x46a734=_0x271b;(function(_0x1bc70c,_0x5640a7){const _0x56fb6a=_0x271b,_0x4a8082=_0x1bc70c();while(!![]){try{const _0x188e8e=parseInt(_0x56fb6a(0x34a))/0x1+-parseInt(_0x56fb6a(0x2d8))/0x2*(parseInt(_0x56fb6a(0x2df))/0x3)+-parseInt(_0x56fb6a(0x207))/0x4*(-parseInt(_0x56fb6a(0x28f))/0x5)+parseInt(_0x56fb6a(0x18b))/0x6+parseInt(_0x56fb6a(0x33f))/0x7+parseInt(_0x56fb6a(0x1fa))/0x8+parseInt(_0x56fb6a(0x299))/0x9*(-parseInt(_0x56fb6a(0x30e))/0xa);if(_0x188e8e===_0x5640a7)break;else _0x4a8082['push'](_0x4a8082['shift']());}catch(_0x2e3e1a){_0x4a8082['push'](_0x4a8082['shift']());}}}(_0x1fe5,0x81784));const _0x1f5c77=function(){let _0x1e03e9=!![];return function(_0x40a53f,_0x48087f){const _0x26eb65=_0x1e03e9?function(){const _0x281c7d=_0x271b;if(_0x48087f){const _0x537d11=_0x48087f[_0x281c7d(0x2bd)](_0x40a53f,arguments);return _0x48087f=null,_0x537d11;}}:function(){};return _0x1e03e9=![],_0x26eb65;};}(),_0x4e4832=_0x1f5c77(this,function(){const _0x5264cd=_0x271b;return _0x4e4832[_0x5264cd(0x26e)]()['search'](_0x5264cd(0x28c))[_0x5264cd(0x26e)]()[_0x5264cd(0x381)](_0x4e4832)['search'](_0x5264cd(0x28c));});_0x4e4832();'use strict';process[_0x46a734(0x1fc)][_0x46a734(0x2dc)]=0x1;function _0x1fe5(){const _0x47e6ae=['ipaddr.js','reinstall_yes','request','getMonth','slice','\x1b[0m','Unauthorized\x20attempt\x20to\x20update\x20settings','accept','simple','hasOwnProperty','RSA-OAEP','reinstall_no','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','kill','sha256','format','production','disable','Unauthorized\x20attempt\x20to\x20get\x20messages','disabled','tempaccess_5_','restart_','Unauthorized\x20attempt\x20to\x20update\x20bot','timestamp','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','button','settings.','writeFileSync','internal','getDate','Setting\x20access:\x20','/update\x20-\x20update\x20Balance\x20Bot\x0a','sendFile','place-order','Unauthorized\x20attempt\x20to\x20download\x20','jsonwebtoken','Bot\x20Mgr\x20>\x20','enabled','remoteAddress','settings','-performance.json','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','mkdirSync','user','debug','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/off\x20-\x20stop\x20bot(s)\x0a','reset-password','\x20minutes','[ip-address]','alerts','headless','replace','storeFiat','kind','Idling\x20(','port','username','onepagemode','botID','toggleBotMode','.zip','telegram2FaApproval','forEach','login','loadAsync','build','\x20to\x20','SIGTERM','temporaryAccessAllowed','loginRequired','884392SFkqsv','store-settings','env','restore_yes_','code','Invalid\x20authentication\x20token\x20(1)','getHours','ipc','bbvNew','Error\x20removing\x20old\x20backup\x20files:','logs/','graphql-request','Error\x20while\x20deleting\x20config\x20files:\x20','169780JTqcKd','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','All\x20bots','once','#RES#\x20if\x20running\x20on\x20server','latestversion','resetHistory','api-eu.mixpanel.com','-events.json','showConfig','existsSync','expiry','emit','Backup\x20file\x20uploaded','IPv4','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','/:bot/history','Restore\x20process\x20confirmed','updatebotmanager','error','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','messages','(staging)','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stringify','decode64','tkn','clientip','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Error\x20details:','yargs/yargs','show','15\x20min','includes','startsWith','text','login\x20token\x20generated','full','https://api.ipify.org?format=json','reject','name','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','mtime','2FA\x20login\x20rejected','/download/:type','init','hex','-config.json','/:bot/coins','enable','$1_$2_$3','get-backup-files','publicKeyToPem','Logged\x20in\x20user\x20...','placeOrder','\x1b[36m','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','cancelLoading','stop','sendMessage','Starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','encryptedUuid','Error:\x20Invalid\x20argument\x20','1000','Logged\x20out\x20user\x20...','hashSync','inherit','help','reinstall','all','telegramEvents','listen','\x20mode','getTime','bb-settings.json','bot','bbPassword','SIGINT','portfolio_','get-logs','warning','telegraf','Restarting\x20Bot\x20','login\x20not\x20required','family','Unauthorized\x20attempt\x20to\x20store\x20configuration','Bot\x20',':\x20Bot\x20Mgr\x20>\x20','backup','\x1b[31m','/:bot/performance','static','string','rmSync','bots','getMinutes','post','show-config','/names\x20-\x20show\x20bot\x20names\x0a','command','live','bb/','toString','exchange','running','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','getSeconds','login2fa_','Login\x20accepted',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','isDirectory',',\x20must\x20be\x20a\x204\x20digit\x20number','telegramEnabled','Notifications\x20types:\x20','Disabled\x20Bot\x20','toIPv4Address','createWriteStream','catch','Starting\x20#RED#Balance\x20Bot\x20v','3000','\x20|\x20client:\x20...','params','config_all','reset-history','secure','environment','secret','\x1b[33m','sign','assign','getPortfolio','telegrammsg','(((.+)+)+)+$','Invalid\x20authentication\x20token\x20(2)','entries','30oXcOQO','/upload-backup','getFullYear','/disable\x20-\x20disable\x20notifications\x0a','store','************','copyFileSync','fork','reinstall-bb','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','194031LltDSU','reply','All','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','backup-full@','Invalid\x20IP\x20address','HTML','\x20(1)','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','headers','tempaccess_15_','\x20|\x20','store-headless','/status\x20-\x20show\x20bot(s)\x20status\x0a','length','config','Node.js\x20v','private','DEFLATE','botmanager','|@|','access\x20timeout','new-disabled','temporary\x20token\x20generated','readFileSync','/help\x20-\x20show\x20available\x20commands\x0a','Restore\x20process\x20aborted','set','handshake','Starting\x20Balance\x20Bot\x20update','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','127.0.0.1','disconnect','mode','split','apply','#RES#','privateKey','apiSecret','isValid','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','initclient','No\x20authentication\x20token','-results.json','Yes','exec','verify','telegramToken','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','parse','yes','bb-secure.json','inlineKeyboard','=>\x20Go\x20to\x20#CYA#http://','/:bot','temp/','ETH','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','config_alerts','privateKeyFromPem','isIPv4MappedAddress','230964UPfwRb','pidExpireLogin','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','restart','NTBA_FIX_319','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','21DCtvTg','manual','lowdb','confirm-message','keys','Unauthorized\x20attempt\x20to\x20log\x20out','2FA\x20login\x20token\x20generated','portfolio','Unauthorized\x20attempt\x20to\x20confirm\x20message','find','bb-config.json','Network\x20Interfaces:','index.html','metrics','track','value','telegramIpApproval','event','createServer','lastmsgtelegram','temporary\x20access\x20not\x20allowed','whitelistEnabled','botname','type','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Login\x20rejected','Unauthorized\x20attempt\x20to\x20show\x20configuration','editMessageReplyMarkup','connection','/restart\x20-\x20restart\x20bot(s)\x0a','-----------------------------------------------------------------------------------','on_','auth','randomBytes','compareSync','logged\x20out','stopped','files','showname','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','telegramChatId','/output-000.log','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','status','defaults','zip/','380TafTiV','get-starting-balances','\x20|\x20user:\x20...','exit','Starting\x20(','toggle-bot-mode','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','auto','Failed\x20to\x20download\x20','reason','get-portfolio','0.0.0','bbvReceive','userid','logout','size','/metrics\x20-\x20show\x20bot\x20performance\x0a','2FA\x20required','blacklist','<b>Balance\x20Bot\x20Status:</b>\x0a','bot-','version','update-bot','lowdb/adapters/FileSync','join','token','tempaccess_reject_','Alerts','30\x20min','config_orders','bcryptjs','argv','Unauthorized\x20attempt\x20to\x20delete\x20bot','Notifications\x20disabled\x0a','Temporary\x20access\x20rejected','get-messages','output-003.log','express','/start','<b>Telegram\x20Bot\x20Status:</b>\x0a','function','backup-full','message','Markdown','node-forge','orders','toggle_','map','/enable\x20-\x20enable\x20notifications\x0a','4824820PpOSVy','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','output-002.log','padStart','Allow\x20login\x20from\x20IP\x20address\x20','***','CoinMarketCap\x20API\x20key\x20validated','publicKey','server','order','sort','369418THeuxO','ipv6','pidRefreshToken','socket','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','close','any','max','update','callback','write','5\x20min','notification','node','bot.js','versions','started','\x1b[34m','toggle',')\x20\x20\x20|\x20Bot\x20','BCT','decrypt','login2fa_reject_','delete-alerts','push','tempaccess_30_','match','crypto','remove','Invalid\x20username\x20or\x20IP\x20address','password','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','from','launch','\x20only\x0a','test','number','marketcapApi','store-fiat','\x20>\x20','use','express-fileupload','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','access','timeshift','uuid','No\x20bots\x20running\x20right\x20now','telegramUsername','Session\x20expired\x20for\x20user\x20...','lastmsgemitted','backup/','allow','exp','staging','constructor','\x20-\x20','login\x20required','build2','address','async','update-bb','action','Unauthorized\x20login\x20attempt\x20(timeout)','invalid\x20credentials','get','Telegram\x20error:','path','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','readdirSync','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','success','jszip','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','file','new','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','4404162Uvnnxu','child_process','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','date-fns','Token\x20blacklisted','sendPortfolioTelegram','pki','apiKey','log','address\x20already\x20in\x20use','http','rsa','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','reload','delete-bot','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','send','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','User\x20has\x20been\x20validated','sortBy','restore-backup-file','temporary\x20access\x20rejected','title','config/','f2aRequired','output-000.log','backup-full.zip',')\x20|\x20Bot\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','socket.io','filter','unlinkSync','chat','Restoring\x20bot(s)\x20from\x20backup','add-bot','bbUsername','args','storeHeadless','conn','\x20(2)'];_0x1fe5=function(){return _0x47e6ae;};return _0x1fe5();}const childProcess=require(_0x46a734(0x18c)),fs=require('fs'),fns=require(_0x46a734(0x18e)),low=require(_0x46a734(0x2e1)),FileSync=require(_0x46a734(0x325)),path=require(_0x46a734(0x38d)),crypto=require(_0x46a734(0x365)),forge=require(_0x46a734(0x33a)),bcrypt=require(_0x46a734(0x32c)),jwt=require(_0x46a734(0x1d6)),ipaddr=require(_0x46a734(0x1b3)),argv=require(_0x46a734(0x225))(process[_0x46a734(0x32d)][_0x46a734(0x1b7)](0x2))[_0x46a734(0x32d)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x46a734(0x259)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0x46a734(0x205)),util=require('util'),fileUpload=require(_0x46a734(0x373)),{networkInterfaces}=require('os'),JSZip=require(_0x46a734(0x392)),PORT=argv[_0x46a734(0x1eb)]||_0x46a734(0x27f),pattern=/^[0-9]{2,4}$/;!pattern[_0x46a734(0x36d)](PORT)&&(console[_0x46a734(0x193)](_0x46a734(0x246)+PORT+_0x46a734(0x277)),process[_0x46a734(0x311)](0x1));const HOST=argv['host']||null,userID=argv[_0x46a734(0x1de)]||'',debugging=argv['d']||![],nodeversion=process[_0x46a734(0x359)][_0x46a734(0x357)];let bbpath=_0x46a734(0x26d),bbpath2='';const botfile=_0x46a734(0x358),configfile=_0x46a734(0x2e9),settingsfile='bb-settings.json',securefile=_0x46a734(0x2ce),environment=require('./'+bbpath2+'version.json')[_0x46a734(0x285)]||_0x46a734(0x1c3),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x46a734(0x211)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x46a734(0x1a2)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x46a734(0x37d),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x46a734(0x204),zippath=userID?bbpath+_0x46a734(0x30d)+userID+'/':bbpath+_0x46a734(0x30d),loggerfile=fs[_0x46a734(0x27c)](logspath+_0x46a734(0x308),{'flags':'a'}),temppath=userID?bbpath+_0x46a734(0x2d2)+userID+'/':bbpath+_0x46a734(0x2d2);!fs[_0x46a734(0x211)](configpath)&&fs[_0x46a734(0x1dd)](configpath);!fs[_0x46a734(0x211)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x46a734(0x211)](logspath)&&fs[_0x46a734(0x1dd)](logspath);!fs['existsSync'](zippath)&&fs[_0x46a734(0x1dd)](zippath);!fs[_0x46a734(0x211)](temppath)&&fs[_0x46a734(0x1dd)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();function _0x271b(_0x10f44d,_0x18f4df){const _0x50f3a0=_0x1fe5();return _0x271b=function(_0x4e4832,_0x1f5c77){_0x4e4832=_0x4e4832-0x188;let _0x1fe524=_0x50f3a0[_0x4e4832];return _0x1fe524;},_0x271b(_0x10f44d,_0x18f4df);}const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x46a734(0x30c)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x46a734(0x30c)]({'secure':{},'blacklist':[]})[_0x46a734(0x354)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x46a734(0x234)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x46a734(0x20e)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x46a734(0x2c9)]!=''&&settings[_0x46a734(0x2c9)]!='***')&&settings['telegramUsername']&&settings[_0x46a734(0x37a)]!='')initTelegram();const parseColor=(_0x2e4642,_0x133a8d)=>{const _0x175348=_0x46a734,_0x314890=/#[A-Z]{3}#/g;if(typeof _0x2e4642==_0x175348(0x264)){!_0x133a8d?_0x2e4642=_0x2e4642['replace'](_0x314890,''):(_0x2e4642=_0x2e4642[_0x175348(0x1e7)](/#BLU#/g,_0x175348(0x35b)),_0x2e4642=_0x2e4642[_0x175348(0x1e7)](/#RED#/g,_0x175348(0x261)),_0x2e4642=_0x2e4642[_0x175348(0x1e7)](/#YEL#/g,_0x175348(0x287)),_0x2e4642=_0x2e4642[_0x175348(0x1e7)](/#MAG#/g,'\x1b[35m'),_0x2e4642=_0x2e4642['replace'](/#CYA#/g,_0x175348(0x23e)),_0x2e4642=_0x2e4642[_0x175348(0x1e7)](/#RES#/g,_0x175348(0x1b8)));;}return _0x2e4642;},logger={'screen':_0x2848c0=>{const _0xec1066=_0x46a734;console[_0xec1066(0x193)](parseColor(_0x2848c0,!![]));},'simple':_0x54e864=>{const _0x2109bb=_0x46a734;console[_0x2109bb(0x193)](parseColor(_0x54e864,!![])),loggerfile[_0x2109bb(0x354)](util['format'](parseColor(_0x54e864,![]))+'\x0a');},'full':async _0x4561bf=>{const _0x176422=_0x46a734,_0xe3a804=getTimeStamp()+_0x176422(0x25f)+_0x4561bf;console[_0x176422(0x193)](parseColor(_0xe3a804,!![])),loggerfile[_0x176422(0x354)](util[_0x176422(0x1c2)](parseColor(_0xe3a804,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x176422(0x24e)]!=_0x176422(0x33b))await sendTelegram(settings[_0x176422(0x307)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x4561bf,![]));},'debug':async(_0x25b4d8,_0x394923='')=>{const _0x339313=_0x46a734,_0x91da9e=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x25b4d8;if(debugging)console[_0x339313(0x193)](parseColor(_0x91da9e,!![]));loggerfile[_0x339313(0x354)](util[_0x339313(0x1c2)](parseColor(_0x91da9e,![]))+'\x0a');if(_0x394923){if(debugging)console[_0x339313(0x193)](_0x394923);loggerfile[_0x339313(0x354)](util[_0x339313(0x1c2)](_0x394923)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x57442d){const _0x22d2cc=_0x46a734;_0x57442d['toString']()[_0x22d2cc(0x228)](_0x22d2cc(0x194))?(logger[_0x22d2cc(0x1bb)](_0x22d2cc(0x2cb)+_0x57442d[_0x22d2cc(0x1eb)]+_0x22d2cc(0x2be)),process[_0x22d2cc(0x19b)]({'terminate':!![]},_0x49f5dd=>{})):logger[_0x22d2cc(0x1bb)](_0x57442d);}),process['on'](_0x46a734(0x311),()=>{const _0x3860fb=_0x46a734;stopAllBots(),process[_0x3860fb(0x311)](0x0);}),process['on'](_0x46a734(0x1f7),()=>{const _0x2f5ffb=_0x46a734;stopAllBots(),process[_0x2f5ffb(0x311)](0x0);}),process['on']('SIGINT',()=>{const _0x56ab0f=_0x46a734;stopAllBots(),process[_0x56ab0f(0x311)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x46a734(0x323)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x46a734(0x333)),app=express(),http=require(_0x46a734(0x195))[_0x46a734(0x2f1)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x46a734(0x38b)](_0x46a734(0x233),async(_0xe8a703,_0x510e3d)=>{const _0x27bab6=_0x46a734,_0x89aa06=_0xe8a703[_0x27bab6(0x281)][_0x27bab6(0x2f6)],_0x4d3974=getClientsWithBotID(_0x27bab6(0x2ad)),_0x669798=_0xe8a703[_0x27bab6(0x2a3)][_0x27bab6(0x378)],_0x5dadea=timelyDecrypt(_0x669798,![]),_0x6fa14b=_0x4d3974[_0x27bab6(0x2e8)](_0x43f8dc=>_0x43f8dc[_0x27bab6(0x378)]==_0x5dadea);if(_0x6fa14b){const _0x315da2=normalizeIP(_0xe8a703[_0x27bab6(0x34d)][_0x27bab6(0x1d9)])['store'],_0x4a88e8=_0xe8a703[_0x27bab6(0x2a3)][_0x27bab6(0x221)];if(validateAccess(_0x4a88e8,_0x5dadea,_0x315da2)[_0x27bab6(0x37e)])_0x89aa06==_0x27bab6(0x260)&&await backupConfigFiles(),await zipFiles(_0x89aa06),_0x510e3d['download'](zippath+(_0x89aa06+'.zip'),_0x5d507c=>{const _0x9b5da3=_0x27bab6;_0x5d507c&&(logger[_0x9b5da3(0x22c)](_0x9b5da3(0x316)+_0x89aa06),logger['simple'](_0x5d507c));});else logger[_0x27bab6(0x22c)](_0x27bab6(0x1d5)+_0x89aa06+_0x27bab6(0x2a1));}else logger[_0x27bab6(0x22c)](_0x27bab6(0x1d5)+_0x89aa06+_0x27bab6(0x1b2));}),app[_0x46a734(0x268)](_0x46a734(0x290),async(_0x5af22b,_0x217c87)=>{const _0x51440e=_0x46a734,_0x2d641c=getClientsWithBotID(_0x51440e(0x2ad)),_0x3d12ed=_0x5af22b[_0x51440e(0x2a3)]['uuid'],_0x5d9221=timelyDecrypt(_0x3d12ed,![]),_0x529c26=_0x2d641c['find'](_0x46d22a=>_0x46d22a[_0x51440e(0x378)]==_0x5d9221);logger[_0x51440e(0x1df)](_0x51440e(0x214));if(_0x529c26){const _0x54910f=normalizeIP(_0x5af22b[_0x51440e(0x34d)][_0x51440e(0x1d9)])[_0x51440e(0x293)],_0x1f4c46=_0x5af22b[_0x51440e(0x2a3)]['tkn'];if(validateAccess(_0x1f4c46,_0x5d9221,_0x54910f)[_0x51440e(0x37e)]){if(_0x5af22b[_0x51440e(0x304)]){const _0x1ab2fb=_0x5af22b[_0x51440e(0x304)]['backupfile'];await _0x1ab2fb['mv'](temppath+_0x1ab2fb[_0x51440e(0x22f)]),_0x217c87[_0x51440e(0x19b)]({'status':!![],'message':'File\x20uploaded'});const _0x3026ac=getBotsWithMode();_0x3026ac[_0x51440e(0x2a8)]>0x0?confirmRestore(temppath,_0x1ab2fb['name']):unzipFile(temppath,_0x1ab2fb[_0x51440e(0x22f)]);}}else logger['full'](_0x51440e(0x314));}else logger[_0x51440e(0x22c)](_0x51440e(0x1bf));}),app['use'](express[_0x46a734(0x263)](path['join'](__dirname,bbpath2,'build2'))),app[_0x46a734(0x372)](express['static'](path['join'](__dirname,bbpath2,_0x46a734(0x1f5)))),app[_0x46a734(0x38b)]('/',function(_0x2959a5,_0xed27ab){const _0x3a0b89=_0x46a734;_0xed27ab[_0x3a0b89(0x1d3)](path[_0x3a0b89(0x326)](__dirname,bbpath2,_0x3a0b89(0x384),_0x3a0b89(0x2eb)));}),app[_0x46a734(0x38b)](_0x46a734(0x2d1),function(_0x523948,_0x145601){const _0x128db8=_0x46a734;_0x145601[_0x128db8(0x1d3)](path[_0x128db8(0x326)](__dirname,bbpath2,_0x128db8(0x1f5),_0x128db8(0x2eb)));}),app[_0x46a734(0x38b)]('/:bot/portfolio',(_0x30544d,_0x1823da)=>{const _0x23d521=_0x46a734;_0x1823da['sendFile'](path[_0x23d521(0x326)](__dirname,bbpath2,_0x23d521(0x1f5),_0x23d521(0x2eb)));}),app['get'](_0x46a734(0x262),(_0x2d4b38,_0x5e8b29)=>{const _0x5cf9f3=_0x46a734;_0x5e8b29[_0x5cf9f3(0x1d3)](path['join'](__dirname,bbpath2,_0x5cf9f3(0x1f5),_0x5cf9f3(0x2eb)));}),app['get'](_0x46a734(0x237),(_0x1e1224,_0x877f96)=>{const _0xd7e65a=_0x46a734;_0x877f96[_0xd7e65a(0x1d3)](path[_0xd7e65a(0x326)](__dirname,bbpath2,'build',_0xd7e65a(0x2eb)));}),app[_0x46a734(0x38b)](_0x46a734(0x217),(_0xf8f2ca,_0x7ab895)=>{const _0x141682=_0x46a734;_0x7ab895[_0x141682(0x1d3)](path[_0x141682(0x326)](__dirname,bbpath2,_0x141682(0x1f5),_0x141682(0x2eb)));}),app[_0x46a734(0x38b)]('/:bot/configuration',(_0x29e501,_0x554589)=>{const _0x19bcf3=_0x46a734;_0x554589[_0x19bcf3(0x1d3)](path['join'](__dirname,bbpath2,_0x19bcf3(0x1f5),_0x19bcf3(0x2eb)));}),app[_0x46a734(0x38b)]('/:bot/support',(_0x55c432,_0x386e03)=>{const _0xd8bb80=_0x46a734;_0x386e03['sendFile'](path[_0xd8bb80(0x326)](__dirname,bbpath2,_0xd8bb80(0x1f5),_0xd8bb80(0x2eb)));});if(HOST)http[_0x46a734(0x24f)](PORT,HOST);else http[_0x46a734(0x24f)](PORT);const io=require(_0x46a734(0x1a8))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x113a75=_0x46a734;let _0x481dc2=_0x113a75(0x1e4);const _0x23359d=networkInterfaces(),_0x59c6a7={};for(const _0x2abfab of Object[_0x113a75(0x2e3)](_0x23359d)){for(const _0x1deb6e of _0x23359d[_0x2abfab]){if((_0x1deb6e[_0x113a75(0x25c)]==_0x113a75(0x215)||_0x1deb6e[_0x113a75(0x25c)]==0x4)&&!_0x1deb6e[_0x113a75(0x1cf)]){const _0x2b60f7=ipaddr[_0x113a75(0x2cc)](_0x1deb6e[_0x113a75(0x385)])['range']();_0x2b60f7!=_0x113a75(0x2ab)&&(!_0x59c6a7[_0x2abfab]&&(_0x59c6a7[_0x2abfab]=[]),_0x59c6a7[_0x2abfab][_0x113a75(0x362)](_0x1deb6e[_0x113a75(0x385)]),_0x481dc2=_0x1deb6e[_0x113a75(0x385)]);}}}return{'serverip':_0x481dc2,'netinterfaces':_0x59c6a7};}async function startServer(){const _0x8a32e8=_0x46a734,{serverip:_0x5adcbe,netinterfaces:_0x194978}=getServerIP();logger['simple'](''),logger[_0x8a32e8(0x1bb)](_0x8a32e8(0x2fd)),await logger[_0x8a32e8(0x22c)](_0x8a32e8(0x27e)+serverversion+'#RES#\x20'+(environment==_0x8a32e8(0x380)?_0x8a32e8(0x21d):'')+'\x0a'+(_0x8a32e8(0x2da)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x8a32e8(0x2d0)+_0x5adcbe+':'+PORT+_0x8a32e8(0x20b))),logger[_0x8a32e8(0x1bb)]('-----------------------------------------------------------------------------------');if(config[_0x8a32e8(0x2a8)]!=0x0)for(const _0xec9e13 of config){const _0x4808be=_0xec9e13['mode']==_0x8a32e8(0x315)?'a':'m';if(_0xec9e13[_0x8a32e8(0x30b)]==_0x8a32e8(0x1d8)||_0xec9e13[_0x8a32e8(0x30b)]=='new')await logger[_0x8a32e8(0x22c)](_0x8a32e8(0x312)+_0x4808be+_0x8a32e8(0x1a6)+_0xec9e13[_0x8a32e8(0x1ee)]+_0x8a32e8(0x2a5)+_0xec9e13[_0x8a32e8(0x2f5)]),startBot([_0xec9e13[_0x8a32e8(0x1ee)],userID],{'cwd':bbpath},function(_0x5e965b){const _0x285e99=_0x8a32e8;if(_0x5e965b)logger[_0x285e99(0x22c)](_0x5e965b);});else(_0xec9e13[_0x8a32e8(0x30b)]==_0x8a32e8(0x1c6)||_0xec9e13[_0x8a32e8(0x30b)]=='new-disabled')&&await logger['full'](_0x8a32e8(0x1ea)+_0x4808be+_0x8a32e8(0x35d)+_0xec9e13[_0x8a32e8(0x1ee)]+'\x20|\x20'+_0xec9e13['botname']);}else!newBot&&logger[_0x8a32e8(0x1bb)](_0x8a32e8(0x306));if(newBot)addBot();logger[_0x8a32e8(0x1bb)](_0x8a32e8(0x2fd)),logger[_0x8a32e8(0x1bb)](''),await logger[_0x8a32e8(0x1df)](_0x8a32e8(0x2aa)+nodeversion),await logger[_0x8a32e8(0x1df)](_0x8a32e8(0x2ea),_0x194978);}function startSocket(){const _0x36691f=_0x46a734;io['on'](_0x36691f(0x2fb),_0x260f9a=>{const _0x31144e=_0x36691f;let _0x5105a4,_0x4bd5e5,_0x7415d4,_0x574adb,_0x1121bf;const _0x578302=_0x260f9a[_0x31144e(0x2b6)][_0x31144e(0x2a3)]['referer'];_0x4bd5e5=_0x578302[_0x31144e(0x364)](/bot[0-9]{3}/);if(_0x4bd5e5)_0x7415d4=_0x4bd5e5[0x0][_0x31144e(0x364)](/[0-9]{3}/);if(_0x7415d4)_0x5105a4=_0x7415d4[0x0];else _0x5105a4=_0x31144e(0x2ad);const _0x1ae350=_0x260f9a['handshake'][_0x31144e(0x2ff)][_0x31144e(0x245)];if(!_0x1ae350)_0x260f9a[_0x31144e(0x213)](_0x31144e(0x30b),{'publicKey':secure[_0x31144e(0x346)]});else{_0x574adb=timelyDecrypt(_0x1ae350,![]);if(!_0x574adb)_0x260f9a[_0x31144e(0x213)](_0x31144e(0x30b),{'publicKey':secure[_0x31144e(0x346)]});else{_0x1121bf=normalizeIP(_0x260f9a[_0x31144e(0x1b1)]['remoteAddress'])[_0x31144e(0x293)];if(!devices[_0x574adb])devices[_0x574adb]={'uuid':_0x574adb,'access':{'token':null}};devices[_0x574adb]['ip']=_0x1121bf;const _0x2e23e8=addClient(_0x260f9a['id'],_0x574adb,_0x5105a4);setAccess(_0x2e23e8),emitMessages(),_0x260f9a['on']('login',_0x534c79=>{const _0x466971=_0x31144e,_0x452828=timelyDecrypt(_0x534c79[_0x466971(0x368)],!![],_0x466971(0x2ae));if(_0x452828){_0x534c79={'username':_0x534c79[_0x466971(0x1ec)],'password':_0x452828},devices[_0x574adb][_0x466971(0x376)]=validateCredentials(_0x534c79,_0x574adb);if(devices[_0x574adb]['access']['allow']==![]&&devices[_0x574adb][_0x466971(0x376)][_0x466971(0x317)]=='2FA\x20login\x20required')_0x260f9a['emit'](_0x466971(0x30b),{'access':devices[_0x574adb]['access']}),loginAccess2FA(_0x574adb,_0x1121bf);else{if(devices[_0x574adb][_0x466971(0x376)]['allow']==![]&&devices[_0x574adb][_0x466971(0x376)][_0x466971(0x317)]=='invalid\x20credentials')_0x260f9a[_0x466971(0x213)](_0x466971(0x30b),{'access':devices[_0x574adb]['access']});else devices[_0x574adb][_0x466971(0x376)]['allow']&&devices[_0x574adb][_0x466971(0x376)]['reason']==_0x466971(0x22b)&&(getClientsWithUuid(_0x574adb)[_0x466971(0x1f2)](_0x59b95f=>{setAccess(_0x59b95f);}),logger[_0x466971(0x1df)](_0x466971(0x23c)+_0x574adb[_0x466971(0x1b7)](-0x8)),setTokenRefresh(_0x574adb),setSessionTimeout(_0x466971(0x1f3),_0x574adb));}}else logger[_0x466971(0x22c)](_0x466971(0x389));}),_0x260f9a['on'](_0x31144e(0x1e2),()=>{resetPassword();}),_0x260f9a['on']('disconnect',_0x56ea76=>{removeClient(_0x260f9a['id']);}),_0x5105a4=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x319209){const _0x4bffc4=_0x46a734;if(_0x319209!=_0x4bffc4(0x2ad)&&config[_0x4bffc4(0x192)]!=''){if(pid[_0x319209])pid[_0x319209][_0x4bffc4(0x19b)]({'function':_0x4bffc4(0x2c3),'args':null});}_0x319209!=_0x4bffc4(0x2ad)&&broadcastToBots('bots',JSON[_0x4bffc4(0x21f)](config));}function reloadBotManager(){const _0x217068=_0x46a734;getClientsWithBotID('botmanager')[_0x217068(0x1f2)](_0x141bac=>{const _0x8d56e9=_0x217068;getSocket(_0x141bac['id'])['emit']('status',{'access':{'allow':![],'reason':_0x8d56e9(0x198),'token':null}});});}function getSocket(_0x267b39){const _0x1539ee=_0x46a734,_0x5bf93a=io['_nsps'][_0x1539ee(0x38b)]('/');return _0x5bf93a['sockets'][_0x1539ee(0x38b)](_0x267b39);}function setAccess(_0x55e148){const _0xc2c3fe=_0x46a734,_0x33eba4=getSocket(_0x55e148['id']),_0x4e2977=_0x55e148[_0xc2c3fe(0x378)],_0xe3beb0=_0x55e148[_0xc2c3fe(0x253)];devices[_0x4e2977][_0xc2c3fe(0x376)]=validateAccess(devices[_0x4e2977][_0xc2c3fe(0x376)][_0xc2c3fe(0x327)],_0x4e2977),logger['debug'](_0xc2c3fe(0x1d1)+devices[_0x4e2977]['access']['reason']+_0xc2c3fe(0x280)+_0x55e148['id'][_0xc2c3fe(0x1b7)](-0x8)+_0xc2c3fe(0x310)+_0x4e2977[_0xc2c3fe(0x1b7)](-0x8)),_0x33eba4['join'](_0x4e2977);if(devices[_0x4e2977][_0xc2c3fe(0x376)][_0xc2c3fe(0x37e)]){_0x33eba4[_0xc2c3fe(0x326)](_0xe3beb0);if(_0xe3beb0==_0xc2c3fe(0x2ad))initializeSocketBotManager(_0x33eba4);else initializeSocketBot(_0x33eba4);initClient(_0xe3beb0);}devices[_0x4e2977][_0xc2c3fe(0x376)][_0xc2c3fe(0x327)]&&devices[_0x4e2977]['access']['reason']==_0xc2c3fe(0x2b1)&&setSessionTimeout('2FA',_0x4e2977),devices[_0x4e2977]['access'][_0xc2c3fe(0x327)]&&devices[_0x4e2977][_0xc2c3fe(0x376)]['reason']==_0xc2c3fe(0x2e5)&&setSessionTimeout(_0xc2c3fe(0x1f3),_0x4e2977),_0x33eba4[_0xc2c3fe(0x213)](_0xc2c3fe(0x30b),{'status':_0x55e148[_0xc2c3fe(0x347)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4e2977]['access'],'externalip':devices[_0x4e2977]['ip'],'publicKey':secure[_0xc2c3fe(0x346)],'userid':settings[_0xc2c3fe(0x31b)],'validInstallation':validInstallation}),devices[_0x4e2977][_0xc2c3fe(0x376)][_0xc2c3fe(0x37e)]==![]&&devices[_0x4e2977][_0xc2c3fe(0x376)][_0xc2c3fe(0x317)]==_0xc2c3fe(0x31f)&&temporaryAccess2FA(_0x4e2977,devices[_0x4e2977]['ip']);}function setSessionTimeout(_0x5ea548,_0x5906ec){const _0x2117c2=_0x46a734;let _0x1f4485;if(_0x5ea548==_0x2117c2(0x1f3))_0x1f4485=loginExpiry*0x3c*0x3e8;else _0x1f4485=devices[_0x5906ec]['telegramIpApproval'][_0x2117c2(0x212)]*0x3c*0x3e8-(new Date()[_0x2117c2(0x251)]()-devices[_0x5906ec][_0x2117c2(0x2ef)][_0x2117c2(0x1ca)]);if(devices[_0x5906ec][_0x2117c2(0x2d9)])clearTimeout(devices[_0x5906ec][_0x2117c2(0x2d9)]);devices[_0x5906ec][_0x2117c2(0x2d9)]=setTimeout(()=>{const _0x4717cb=_0x2117c2;if(devices[_0x5906ec][_0x4717cb(0x34c)])clearTimeout(devices[_0x5906ec][_0x4717cb(0x34c)]);removeSocketListeners(_0x5906ec),addBlacklist(_0x5906ec),devices[_0x5906ec]['telegramIpApproval']=null,devices[_0x5906ec][_0x4717cb(0x1f1)]=null,devices[_0x5906ec][_0x4717cb(0x376)][_0x4717cb(0x327)]=null,logger[_0x4717cb(0x1df)](_0x4717cb(0x37b)+_0x5906ec['slice'](-0x8)),devices[_0x5906ec][_0x4717cb(0x376)]=validateAccess(devices[_0x5906ec][_0x4717cb(0x376)]['token'],_0x5906ec),!(devices[_0x5906ec][_0x4717cb(0x376)][_0x4717cb(0x37e)]&&devices[_0x5906ec][_0x4717cb(0x376)]['reason']==_0x4717cb(0x25b))&&(_0x5ea548==_0x4717cb(0x1f3)?io['to'](_0x5906ec)[_0x4717cb(0x213)]('status',{'access':{'allow':![],'reason':_0x4717cb(0x2af),'token':null}}):io['to'](_0x5906ec)[_0x4717cb(0x213)](_0x4717cb(0x30b),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5906ec]['access'][_0x4717cb(0x327)]=null;},_0x1f4485);}function setTokenRefresh(_0x444291){const _0x4c039f=_0x46a734;if(devices[_0x444291][_0x4c039f(0x34c)])clearTimeout(devices[_0x444291][_0x4c039f(0x34c)]);devices[_0x444291][_0x4c039f(0x34c)]=setTimeout(()=>{const _0x1f3ffc=_0x4c039f;getClientsWithUuid(_0x444291)[_0x1f3ffc(0x2a8)]!=0x0?(devices[_0x444291]['access']=refreshToken(_0x444291),io['to'](_0x444291)[_0x1f3ffc(0x213)]('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x444291][_0x1f3ffc(0x376)],'externalip':devices[_0x444291]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x444291)):clearTimeout(devices[_0x444291]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1ea4ed){const _0x3dd3c4=_0x46a734,_0x293efb=getClient(_0x1ea4ed['id'])['uuid'];_0x1ea4ed[_0x3dd3c4(0x213)](_0x3dd3c4(0x266),config),_0x1ea4ed[_0x3dd3c4(0x213)](_0x3dd3c4(0x1da),cleanSettings()),_0x1ea4ed['on'](_0x3dd3c4(0x1ad),_0x2a1210=>{const _0x359679=_0x3dd3c4;if(validateAccess(_0x2a1210,_0x293efb)['allow'])addBot();else logger[_0x359679(0x22c)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x1ea4ed['on'](_0x3dd3c4(0x324),(_0x20a34c,_0x2301a8)=>{const _0x48af8e=_0x3dd3c4;if(validateAccess(_0x2301a8,_0x293efb)['allow'])toggleBot(_0x20a34c['botID'],_0x20a34c[_0x48af8e(0x30b)],_0x20a34c['live']);else logger[_0x48af8e(0x22c)](_0x48af8e(0x1c9));}),_0x1ea4ed['on'](_0x3dd3c4(0x313),(_0x32f5d2,_0x34a3c9)=>{const _0x1afdbc=_0x3dd3c4;if(validateAccess(_0x34a3c9,_0x293efb)[_0x1afdbc(0x37e)])toggleBotMode(_0x32f5d2);else logger['full'](_0x1afdbc(0x1c9));}),_0x1ea4ed['on'](_0x3dd3c4(0x199),(_0x1f2875,_0x1e939d)=>{const _0x26c3c6=_0x3dd3c4;if(validateAccess(_0x1e939d,_0x293efb)[_0x26c3c6(0x37e)])deleteBot(_0x1f2875);else logger['full'](_0x26c3c6(0x32e));}),_0x1ea4ed['on'](_0x3dd3c4(0x1fb),(_0x117223,_0x543ddb)=>{const _0x2e0d11=_0x3dd3c4;if(validateAccess(_0x543ddb,_0x293efb)[_0x2e0d11(0x37e)])storeSettings(_0x117223,!![]);else logger['full'](_0x2e0d11(0x1b9));}),_0x1ea4ed['on'](_0x3dd3c4(0x387),_0x555fe2=>{const _0x459417=_0x3dd3c4;if(validateAccess(_0x555fe2,_0x293efb)[_0x459417(0x37e)])updateBB(_0x459417(0x352));else logger['full'](_0x459417(0x197));}),_0x1ea4ed['on'](_0x3dd3c4(0x297),_0x2d98a1=>{const _0x4c60fb=_0x3dd3c4;if(validateAccess(_0x2d98a1,_0x293efb)[_0x4c60fb(0x37e)])updateBB(_0x4c60fb(0x24c));else logger[_0x4c60fb(0x22c)](_0x4c60fb(0x2ca));}),_0x1ea4ed['on'](_0x3dd3c4(0x23a),_0x56e70a=>{const _0x115ada=_0x3dd3c4;if(validateAccess(_0x56e70a,_0x293efb)[_0x115ada(0x37e)]){const _0x3b208b=getClient(_0x1ea4ed['id']);if(_0x3b208b)getBackupFiles(_0x3b208b[_0x115ada(0x378)]);else logger[_0x115ada(0x22c)](_0x115ada(0x21b));}else logger[_0x115ada(0x22c)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x1ea4ed['on'](_0x3dd3c4(0x19f),(_0x43b1cd,_0x306c32)=>{const _0x3900f4=_0x3dd3c4;if(validateAccess(_0x306c32,_0x293efb)[_0x3900f4(0x37e)])restoreBackupFile(_0x43b1cd);else logger[_0x3900f4(0x22c)](_0x3900f4(0x374));}),_0x1ea4ed['on']('get-messages',_0x18e075=>{const _0x5621ee=_0x3dd3c4;if(validateAccess(_0x18e075,_0x293efb)[_0x5621ee(0x37e)])getMessages();else logger[_0x5621ee(0x22c)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1ea4ed['on'](_0x3dd3c4(0x2e2),(_0x277f0b,_0x464d34)=>{const _0x24efd1=_0x3dd3c4;if(validateAccess(_0x464d34,_0x293efb)[_0x24efd1(0x37e)])confirmMessage(_0x277f0b);else logger[_0x24efd1(0x22c)](_0x24efd1(0x2e7));}),_0x1ea4ed['on'](_0x3dd3c4(0x31c),_0x34a73f=>{const _0xee444e=_0x3dd3c4;if(validateAccess(_0x34a73f,_0x293efb)[_0xee444e(0x37e)]){if(devices[_0x293efb][_0xee444e(0x34c)])clearTimeout(devices[_0x293efb][_0xee444e(0x34c)]);if(devices[_0x293efb][_0xee444e(0x2d9)])clearTimeout(devices[_0x293efb]['pidExpireLogin']);removeSocketListeners(getClient(_0x1ea4ed['id'])[_0xee444e(0x378)]),addBlacklist(_0x293efb),devices[_0x293efb][_0xee444e(0x2ef)]=null,devices[_0x293efb]['telegram2FaApproval']=null,devices[_0x293efb][_0xee444e(0x376)][_0xee444e(0x327)]=null,logger[_0xee444e(0x1df)](_0xee444e(0x248)+_0x293efb[_0xee444e(0x1b7)](-0x8)),io['to'](getClient(_0x1ea4ed['id'])[_0xee444e(0x378)])['emit'](_0xee444e(0x30b),{'access':{'allow':![],'reason':_0xee444e(0x302),'token':null}});}else logger[_0xee444e(0x22c)](_0xee444e(0x2e4));});}function initializeSocketBot(_0xd6b43d){const _0x340b92=_0x46a734,_0x8f0ef3=getClient(_0xd6b43d['id'])[_0x340b92(0x253)],_0x481a20=getClient(_0xd6b43d['id'])[_0x340b92(0x378)];_0xd6b43d['on'](_0x340b92(0x257),(_0x1f9ed4,_0x41a860)=>{if(validateAccess(_0x41a860,_0x481a20)['allow']){if(pid[_0x8f0ef3])pid[_0x8f0ef3]['send']({'function':'emitHistory','args':_0x1f9ed4});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0xd6b43d['on'](_0x340b92(0x361),(_0x19fb32,_0xb2e692)=>{const _0x9c5c5=_0x340b92;if(validateAccess(_0xb2e692,_0x481a20)[_0x9c5c5(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x9c5c5(0x19b)]({'function':'deleteHistoryAlerts','args':_0x19fb32});}else logger[_0x9c5c5(0x22c)](_0x9c5c5(0x223));}),_0xd6b43d['on'](_0x340b92(0x318),(_0x1f2847,_0x2ad58f)=>{const _0x17a1be=_0x340b92;if(validateAccess(_0x2ad58f,_0x481a20)['allow']){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x17a1be(0x19b)]({'function':_0x17a1be(0x28a),'args':_0x1f2847});}else logger[_0x17a1be(0x22c)](_0x17a1be(0x2de));}),_0xd6b43d['on']('store-configuration',(_0x384485,_0x282fd2)=>{const _0x149f39=_0x340b92;if(validateAccess(_0x282fd2,_0x481a20)[_0x149f39(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3]['send']({'function':'storeConfiguration','args':_0x384485});}else logger[_0x149f39(0x22c)](_0x149f39(0x25d));}),_0xd6b43d['on'](_0x340b92(0x2a6),(_0xecc489,_0x1b7062)=>{const _0xc07ec2=_0x340b92;if(validateAccess(_0x1b7062,_0x481a20)[_0xc07ec2(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0xc07ec2(0x19b)]({'function':_0xc07ec2(0x1b0),'args':_0xecc489});}else logger[_0xc07ec2(0x22c)](_0xc07ec2(0x298));}),_0xd6b43d['on'](_0x340b92(0x370),(_0x154731,_0x24706d)=>{const _0x15d79e=_0x340b92;if(validateAccess(_0x24706d,_0x481a20)[_0x15d79e(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x15d79e(0x19b)]({'function':_0x15d79e(0x1e8),'args':_0x154731});}else logger[_0x15d79e(0x22c)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0xd6b43d['on'](_0x340b92(0x283),_0x39e744=>{const _0x5e4b96=_0x340b92;if(validateAccess(_0x39e744,_0x481a20)['allow']){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x5e4b96(0x19b)]({'function':_0x5e4b96(0x20d),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0xd6b43d['on'](_0x340b92(0x30f),_0x335a29=>{const _0x4fae9b=_0x340b92;if(validateAccess(_0x335a29,_0x481a20)[_0x4fae9b(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x4fae9b(0x19b)]({'function':'getStartingBalances','args':null});}else logger[_0x4fae9b(0x22c)](_0x4fae9b(0x309));}),_0xd6b43d['on'](_0x340b92(0x1d4),(_0x4b3d5b,_0x1181fe)=>{const _0x11b459=_0x340b92;if(validateAccess(_0x1181fe,_0x481a20)[_0x11b459(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3]['send']({'function':_0x11b459(0x23d),'args':_0x4b3d5b});}else logger[_0x11b459(0x22c)](_0x11b459(0x244));}),_0xd6b43d['on']('cancel-loading',_0x2b3354=>{const _0x2c2a48=_0x340b92;if(validateAccess(_0x2b3354,_0x481a20)[_0x2c2a48(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3][_0x2c2a48(0x19b)]({'function':_0x2c2a48(0x240),'args':null});}else logger[_0x2c2a48(0x22c)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0xd6b43d['on'](_0x340b92(0x269),_0x2653e3=>{const _0x3407b4=_0x340b92;if(validateAccess(_0x2653e3,_0x481a20)[_0x3407b4(0x37e)]){if(pid[_0x8f0ef3])pid[_0x8f0ef3]['send']({'function':_0x3407b4(0x210),'args':null});}else logger[_0x3407b4(0x22c)](_0x3407b4(0x2f9));}),_0xd6b43d['on'](_0x340b92(0x387),_0x5d8184=>{const _0x50b66c=_0x340b92;if(validateAccess(_0x5d8184,_0x481a20)[_0x50b66c(0x37e)])updateBB(_0x50b66c(0x352));else logger[_0x50b66c(0x22c)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0xd6b43d['on'](_0x340b92(0x331),_0x2bc0ad=>{const _0x57c34d=_0x340b92;if(validateAccess(_0x2bc0ad,_0x481a20)[_0x57c34d(0x37e)])getMessages();else logger[_0x57c34d(0x22c)](_0x57c34d(0x1c5));}),_0xd6b43d['on'](_0x340b92(0x2e2),(_0x4b2427,_0x1fca5c)=>{const _0x1aa06c=_0x340b92;if(validateAccess(_0x1fca5c,_0x481a20)[_0x1aa06c(0x37e)])confirmMessage(_0x4b2427);else logger[_0x1aa06c(0x22c)](_0x1aa06c(0x2e7));}),_0xd6b43d['on']('logout',_0x13d30f=>{const _0x476040=_0x340b92;if(validateAccess(_0x13d30f,_0x481a20)[_0x476040(0x37e)]){if(devices[_0x481a20][_0x476040(0x34c)])clearTimeout(devices[_0x481a20][_0x476040(0x34c)]);if(devices[_0x481a20]['pidExpireLogin'])clearTimeout(devices[_0x481a20]['pidExpireLogin']);removeSocketListeners(getClient(_0xd6b43d['id'])[_0x476040(0x378)]),addBlacklist(_0x481a20),devices[_0x481a20][_0x476040(0x2ef)]=null,devices[_0x481a20][_0x476040(0x1f1)]=null,devices[_0x481a20][_0x476040(0x376)]['token']=null,logger['debug'](_0x476040(0x248)+_0x481a20[_0x476040(0x1b7)](-0x8)),io['to'](getClient(_0xd6b43d['id'])[_0x476040(0x378)])[_0x476040(0x213)](_0x476040(0x30b),{'access':{'allow':![],'reason':_0x476040(0x302),'token':null}});}else logger[_0x476040(0x22c)](_0x476040(0x2e4));});}function removeSocketListeners(_0x328556){const _0x4353b7=_0x46a734;getClientsWithUuid(_0x328556)[_0x4353b7(0x1f2)](_0x248c63=>{getSocket(_0x248c63['id'])['removeAllListeners']();});}function cleanSettings(){const _0x3812f1=_0x46a734;let _0x2e3ec7=settings;return settings[_0x3812f1(0x2c9)]&&settings[_0x3812f1(0x2c9)]!=''&&(_0x2e3ec7={..._0x2e3ec7,'telegramToken':_0x3812f1(0x294)}),settings[_0x3812f1(0x254)]&&settings[_0x3812f1(0x254)]!=''&&(_0x2e3ec7={..._0x2e3ec7,'bbPassword':_0x3812f1(0x294)}),settings[_0x3812f1(0x36f)]&&settings[_0x3812f1(0x36f)]!=''&&(_0x2e3ec7={..._0x2e3ec7,'marketcapApi':_0x3812f1(0x294)}),(settings['bbPassword']&&settings['bbPassword']==_0x3812f1(0x344)||settings[_0x3812f1(0x2c9)]&&settings[_0x3812f1(0x2c9)]==_0x3812f1(0x344)||settings[_0x3812f1(0x36f)]&&settings[_0x3812f1(0x36f)]==_0x3812f1(0x344))&&(_0x2e3ec7={..._0x2e3ec7,'restored':{'password':settings['bbPassword']==_0x3812f1(0x344),'telegram':settings[_0x3812f1(0x2c9)]==_0x3812f1(0x344),'marketcap':settings[_0x3812f1(0x36f)]=='***'}}),_0x2e3ec7;}async function updateBB(_0x39612e){const _0xb3a355=_0x46a734;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x16a7bc=>{restartBot(_0x16a7bc['botID']);});if(_0x39612e==_0xb3a355(0x352))process[_0xb3a355(0x19b)]({'update':!![],'environment':environment},_0x5f2bfb=>{});else _0x39612e=='reinstall'&&process[_0xb3a355(0x19b)]({'reinstall':!![],'environment':environment},_0x45ca5d=>{});}function startBot(_0x5b850f,_0x48eee9,_0x48d567){const _0x17ea65=_0x46a734;if(debugging)_0x5b850f['push']('-d');let _0x41cebc=![];const _0x3b11d0=_0x5b850f[0x0];_0x48eee9={..._0x48eee9,'stdio':[_0x17ea65(0x24a),'inherit',_0x17ea65(0x24a),_0x17ea65(0x201)]},pid[_0x3b11d0]=childProcess[_0x17ea65(0x296)](botfile,_0x5b850f,_0x48eee9),pid[_0x3b11d0]['on'](_0x17ea65(0x338),_0x3ee9b3=>{const _0x51ccb5=_0x17ea65;switch(Object[_0x51ccb5(0x2e3)](_0x3ee9b3)[0x0]){case _0x51ccb5(0x2f5):updateBotName(_0x3b11d0,_0x3ee9b3[_0x51ccb5(0x2f5)]);break;case _0x51ccb5(0x219):updateBotManager();break;case _0x51ccb5(0x30b):updateStatus(_0x3b11d0,_0x3ee9b3[_0x51ccb5(0x30b)]);break;case'live':updateLive(_0x3b11d0,_0x3ee9b3[_0x51ccb5(0x26c)]);break;case _0x51ccb5(0x35a):updateLive(_0x3b11d0,_0x3ee9b3[_0x51ccb5(0x35a)]),io['to'](_0x3b11d0)[_0x51ccb5(0x213)](_0x51ccb5(0x30b),{'access':{'allow':![],'reason':_0x51ccb5(0x198),'token':null}});break;case _0x51ccb5(0x241):_0x3ee9b3['stop']==_0x51ccb5(0x2db)&&restartBot(_0x3b11d0);_0x3ee9b3['stop']==_0x51ccb5(0x1c0)&&toggleBot(_0x3b11d0,_0x51ccb5(0x1c6),_0x51ccb5(0x303));break;case'telegram':sendTelegramBot(_0x3b11d0,_0x3ee9b3['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x3ee9b3[_0x51ccb5(0x28b)]);break;case _0x51ccb5(0x336):io['to'](_0x3b11d0)['emit'](_0x3ee9b3[_0x51ccb5(0x336)],_0x3ee9b3[_0x51ccb5(0x1af)]);break;}}),pid[_0x3b11d0]['on'](_0x17ea65(0x21a),function(_0x3a61fd){if(_0x41cebc)return;_0x41cebc=!![],_0x48d567(_0x3a61fd);}),pid[_0x3b11d0]['on'](_0x17ea65(0x311),async function(_0x15dd82){const _0x3c22df=_0x17ea65;if(terminating)return;if(installingUpdate){io[_0x3c22df(0x34f)]();return;}if(_0x41cebc)return;_0x41cebc=!![],_0x48d567(null);const _0x51908f=dbConfig[_0x3c22df(0x38b)](_0x3c22df(0x266))['find']({'botID':_0x3b11d0})['value']();_0x51908f&&(_0x51908f[_0x3c22df(0x30b)]=='enabled'||_0x51908f['status']==_0x3c22df(0x189))&&(await sleep(0x3e8),updateLive(_0x3b11d0,_0x3c22df(0x303)),logger[_0x3c22df(0x22c)](_0x3c22df(0x25a)+_0x3b11d0),startBot([_0x3b11d0,userID],{'cwd':bbpath},function(_0x1e7bb3){if(_0x1e7bb3)logger['full'](_0x1e7bb3);}));});}function stopBot(_0x57af56){const _0x3537ec=_0x46a734;getClientsWithBotID(_0x57af56)[_0x3537ec(0x1f2)](_0x3f99a8=>{const _0x23a431=_0x3537ec;getSocket(_0x3f99a8['id'])[_0x23a431(0x2ba)](!![]),removeClient(_0x3f99a8['id']);}),pid[_0x57af56]&&(pid[_0x57af56][_0x3537ec(0x1c0)](),pid[_0x57af56]=null);}function stopAllBots(){const _0x5a52c5=_0x46a734;terminating=!![];const _0x520b83=getEnabledBots();_0x520b83[_0x5a52c5(0x1f2)](_0x10f750=>{stopBot(_0x10f750['botID']);});}function restartBot(_0x190767){const _0x5b99f2=_0x46a734;if(pid[_0x190767])pid[_0x190767][_0x5b99f2(0x1c0)]();}function addBot(){const _0x13fcb1=_0x46a734;let _0x40111b;for(let _0x26001d=0x1;_0x26001d<0x3e9;_0x26001d++){_0x40111b=_0x26001d[_0x13fcb1(0x26e)]()[_0x13fcb1(0x342)](0x3,'0');let _0x4d477e=config[_0x13fcb1(0x2e8)](_0x413ef5=>_0x413ef5['botID']==_0x40111b);if(!_0x4d477e)break;}if(_0x40111b===_0x13fcb1(0x247)){logger[_0x13fcb1(0x22c)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x13fcb1(0x22c)](_0x13fcb1(0x243)+_0x40111b),dbConfig[_0x13fcb1(0x38b)](_0x13fcb1(0x266))[_0x13fcb1(0x362)]({'botID':_0x40111b,'botname':'Bot\x20'+_0x40111b,'status':_0x13fcb1(0x189),'live':''})[_0x13fcb1(0x354)](),startBot([_0x40111b,userID],{'cwd':bbpath},function(_0x4eb392){const _0x21da0a=_0x13fcb1;if(_0x4eb392)logger[_0x21da0a(0x22c)](_0x4eb392);}),config=getConfiguration(),io['to']('botmanager')[_0x13fcb1(0x213)]('bots',config),broadcastToBots(_0x13fcb1(0x266),JSON[_0x13fcb1(0x21f)](config));}function deleteBot(_0x49da06){const _0x1cc59a=_0x46a734;getClientsWithBotID(_0x49da06)[_0x1cc59a(0x1f2)](_0x297d5f=>{const _0x54d623=_0x1cc59a;getSocket(_0x297d5f['id'])[_0x54d623(0x2ba)](!![]),removeClient(_0x297d5f['id']);}),dbConfig['get'](_0x1cc59a(0x266))[_0x1cc59a(0x366)]({'botID':_0x49da06})[_0x1cc59a(0x354)](),logger[_0x1cc59a(0x22c)]('Deleted\x20Bot\x20'+_0x49da06),stopBot(_0x49da06);try{if(fs[_0x1cc59a(0x211)](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x236))))fs['unlinkSync'](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x236)));if(fs[_0x1cc59a(0x211)](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x20f))))fs[_0x1cc59a(0x1aa)](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x20f)));if(fs[_0x1cc59a(0x211)](path['join'](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x1db))))fs['unlinkSync'](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x1db)));if(fs['existsSync'](path['join'](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x2c5))))fs[_0x1cc59a(0x1aa)](path[_0x1cc59a(0x326)](configpath,_0x1cc59a(0x322)+_0x49da06+_0x1cc59a(0x2c5)));}catch(_0x491dc3){if(_0x491dc3)logger[_0x1cc59a(0x22c)](_0x1cc59a(0x206),_0x491dc3);}config=getConfiguration(),io['to'](_0x1cc59a(0x2ad))[_0x1cc59a(0x213)](_0x1cc59a(0x266),config),broadcastToBots(_0x1cc59a(0x266),JSON[_0x1cc59a(0x21f)](config));}function toggleBot(_0x5a18fa,_0x5e8702,_0x335a3b){const _0x15a62a=_0x46a734;dbConfig[_0x15a62a(0x38b)](_0x15a62a(0x266))['find']({'botID':_0x5a18fa})[_0x15a62a(0x289)]({'status':_0x5e8702})['assign']({'live':_0x335a3b})[_0x15a62a(0x354)]();if(_0x5e8702==_0x15a62a(0x1d8)||_0x5e8702==_0x15a62a(0x189))logger[_0x15a62a(0x22c)]('Enabled\x20Bot\x20'+_0x5a18fa),startBot([_0x5a18fa,userID],{'cwd':bbpath},function(_0x20db81){const _0x2af5fa=_0x15a62a;if(_0x20db81)logger[_0x2af5fa(0x22c)](_0x20db81);});else(_0x5e8702=='disabled'||_0x5e8702=='new-disabled')&&(logger[_0x15a62a(0x22c)](_0x15a62a(0x27a)+_0x5a18fa),stopBot(_0x5a18fa));config=getConfiguration(),io['to'](_0x15a62a(0x2ad))[_0x15a62a(0x213)](_0x15a62a(0x266),config),broadcastToBots(_0x15a62a(0x266),JSON['stringify'](config));}function toggleStatus(_0x23cbfe){const _0x442699=_0x46a734;let _0x20ebce=dbConfig[_0x442699(0x38b)](_0x442699(0x266))[_0x442699(0x2e8)]({'botID':_0x23cbfe})[_0x442699(0x2ee)](),_0x3297a9;if(_0x20ebce[_0x442699(0x30b)]===_0x442699(0x1d8))_0x3297a9=_0x442699(0x1c6);else{if(_0x20ebce['status']===_0x442699(0x189))_0x3297a9=_0x442699(0x2b0);else{if(_0x20ebce['status']==='new-disabled')_0x3297a9=_0x442699(0x189);else{if(_0x20ebce[_0x442699(0x30b)]==='disabled')_0x3297a9=_0x442699(0x1d8);}}}return _0x3297a9;}function updateStatus(_0x5621fc,_0x26f1ce){const _0x36d921=_0x46a734;dbConfig[_0x36d921(0x38b)]('bots')['find']({'botID':_0x5621fc})[_0x36d921(0x289)]({'status':_0x26f1ce})[_0x36d921(0x354)](),config=getConfiguration(),io['to'](_0x36d921(0x2ad))['emit'](_0x36d921(0x266),config),broadcastToBots(_0x36d921(0x266),JSON['stringify'](config));}function updateLive(_0x3c4336,_0x2626c0){const _0x5980cf=_0x46a734;dbConfig[_0x5980cf(0x38b)](_0x5980cf(0x266))[_0x5980cf(0x2e8)]({'botID':_0x3c4336})['assign']({'live':_0x2626c0})[_0x5980cf(0x354)](),config=getConfiguration(),io['to'](_0x5980cf(0x2ad))[_0x5980cf(0x213)]('bots',config),broadcastToBots(_0x5980cf(0x266),JSON[_0x5980cf(0x21f)](config));}function updateBotName(_0x55047d,_0x382520){const _0x408f9a=_0x46a734;dbConfig[_0x408f9a(0x38b)](_0x408f9a(0x266))[_0x408f9a(0x2e8)]({'botID':_0x55047d})[_0x408f9a(0x289)]({'botname':_0x382520})[_0x408f9a(0x354)](),config=getConfiguration(),io['to'](_0x408f9a(0x2ad))['emit'](_0x408f9a(0x266),config),broadcastToBots(_0x408f9a(0x266),JSON[_0x408f9a(0x21f)](config));}function updateBotManager(){const _0x3d5468=_0x46a734;config=getConfiguration(),io['to'](_0x3d5468(0x2ad))[_0x3d5468(0x213)](_0x3d5468(0x266),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x1aebcd){const _0x5e35fc=_0x46a734;if(pid[_0x1aebcd])pid[_0x1aebcd][_0x5e35fc(0x19b)]({'function':_0x5e35fc(0x1ef),'args':null});else{const _0x55ec10=configpath+_0x5e35fc(0x322)+_0x1aebcd+'-config.json',_0x4aeceb=fs[_0x5e35fc(0x2b2)](_0x55ec10),_0x3480cb=JSON[_0x5e35fc(0x2cc)](_0x4aeceb),_0x2e0843=_0x3480cb[_0x5e35fc(0x253)][0x0][_0x5e35fc(0x1e6)];_0x3480cb[_0x5e35fc(0x253)][0x0][_0x5e35fc(0x1e6)]=!_0x2e0843;const _0x3a3fa3=JSON[_0x5e35fc(0x21f)](_0x3480cb,null,0x2);fs[_0x5e35fc(0x1ce)](_0x55ec10,_0x3a3fa3),config=getConfiguration(),io['to'](_0x5e35fc(0x2ad))['emit'](_0x5e35fc(0x266),config),broadcastToBots('bots',JSON[_0x5e35fc(0x21f)](config));}}function validateTelegram(_0x112aff){const _0x2ad5d3=_0x46a734;if(_0x112aff[_0x2ad5d3(0x36a)][_0x2ad5d3(0x1ec)]!=settings['telegramUsername']&&'@'+_0x112aff[_0x2ad5d3(0x36a)]['username']!=settings[_0x2ad5d3(0x37a)]||_0x112aff[_0x2ad5d3(0x1ab)]['id']!=settings[_0x2ad5d3(0x307)])return sendTelegram(_0x112aff['chat']['id'],_0x2ad5d3(0x375),{'parse_mode':_0x2ad5d3(0x2a0)}),![];return!![];}async function initTelegram(){const _0x4a8155=_0x46a734;if(tgBot)tgBot[_0x4a8155(0x241)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x4a8155(0x2c9)]);let _0x31ef2d='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x31ef2d+='\x0a',_0x31ef2d+=_0x4a8155(0x33e),_0x31ef2d+=_0x4a8155(0x292),_0x31ef2d+=_0x4a8155(0x23f),_0x31ef2d+=_0x4a8155(0x2fc),_0x31ef2d+=_0x4a8155(0x2dd),_0x31ef2d+=_0x4a8155(0x1e1),_0x31ef2d+=_0x4a8155(0x1dc),_0x31ef2d+=_0x4a8155(0x26a),_0x31ef2d+=_0x4a8155(0x2a7),_0x31ef2d+=_0x4a8155(0x31e),_0x31ef2d+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x31ef2d+=_0x4a8155(0x1d2),_0x31ef2d+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x31ef2d+=_0x4a8155(0x2b3);let _0xf3e66f=_0x4a8155(0x1a7);_0xf3e66f+='\x0a',_0xf3e66f+=_0x31ef2d,tgBot[_0x4a8155(0x27d)]((_0x5076ac,_0x13995a)=>{const _0x5d9020=_0x4a8155;logger['simple'](getTimeStamp()+_0x5d9020(0x275)),logger[_0x5d9020(0x1df)]('Telegraf\x20error:',_0x5076ac);}),tgBot[_0x4a8155(0x372)](async(_0x5495f5,_0x4c9c67)=>{const _0x328b82=_0x4a8155;if(!(!settings[_0x328b82(0x307)]&&_0x5495f5[_0x328b82(0x352)][_0x328b82(0x338)][_0x328b82(0x22a)]==_0x328b82(0x334))){if(!validateTelegram(_0x5495f5))return;}_0x4c9c67();}),tgBot[_0x4a8155(0x26b)]('start',async _0x204fad=>{const _0x4d6edf=_0x4a8155;if(!settings[_0x4d6edf(0x307)])updateSetting(_0x4d6edf(0x307),_0x204fad[_0x4d6edf(0x1ab)]['id']);updateSetting(_0x4d6edf(0x278),!![]);if(!validateTelegram(_0x204fad))return;await sendTelegram(_0x204fad['chat']['id'],_0xf3e66f);}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x238),async _0x17cfb6=>{const _0x24f28b=_0x4a8155;updateSetting(_0x24f28b(0x278),!![]),await sendTelegram(_0x17cfb6['chat']['id'],'Notifications\x20enabled');}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x1c4),async _0x36ed29=>{const _0x51b5fd=_0x4a8155;await sendTelegram(_0x36ed29['chat']['id'],'Notifications\x20disabled'),updateSetting(_0x51b5fd(0x278),![]);}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x2a9),async _0x2be947=>{const _0x40c3f5=_0x4a8155,_0x5dcb5e=Markup['inlineKeyboard']([Markup['button']['callback']('Orders',_0x40c3f5(0x32b)),Markup[_0x40c3f5(0x1cc)]['callback'](_0x40c3f5(0x329),_0x40c3f5(0x2d5)),Markup['button'][_0x40c3f5(0x353)](_0x40c3f5(0x29b),'config_all')]);_0x2be947[_0x40c3f5(0x29a)](_0x40c3f5(0x38e),_0x5dcb5e);}),tgBot['action']('config_orders',async _0xcb09c3=>{const _0x30e218=_0x4a8155;_0xcb09c3[_0x30e218(0x2fa)](),updateSetting(_0x30e218(0x24e),_0x30e218(0x33b)),updateSetting(_0x30e218(0x278),!![]),await sendTelegram(_0xcb09c3['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x4a8155(0x388)]('config_alerts',async _0x5e1ba7=>{const _0x1eac7e=_0x4a8155;_0x5e1ba7[_0x1eac7e(0x2fa)](),updateSetting(_0x1eac7e(0x24e),_0x1eac7e(0x1e5)),updateSetting(_0x1eac7e(0x278),!![]),await sendTelegram(_0x5e1ba7['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x4a8155(0x388)](_0x4a8155(0x282),async _0x5cfe45=>{const _0xbf5a0c=_0x4a8155;_0x5cfe45[_0xbf5a0c(0x2fa)](),updateSetting(_0xbf5a0c(0x24e),_0xbf5a0c(0x24d)),updateSetting(_0xbf5a0c(0x278),!![]),await sendTelegram(_0x5cfe45['chat']['id'],_0xbf5a0c(0x216));}),tgBot['command'](_0x4a8155(0x30b),async _0x34fdfd=>{const _0x16f855=_0x4a8155,_0x251d58=getBotsWithMode();let _0x3b88a6=_0x16f855(0x321);config[_0x16f855(0x1f2)](_0x5e8f9f=>{const _0x5b2299=_0x16f855,_0x50fccf=_0x251d58['find'](_0x31f8fb=>_0x31f8fb[_0x5b2299(0x1ee)]==_0x5e8f9f[_0x5b2299(0x1ee)])['mode'];_0x3b88a6+=_0x5b2299(0x25e)+_0x5e8f9f[_0x5b2299(0x1ee)]+':\x20'+_0x5e8f9f['status']+_0x5b2299(0x2a5)+_0x50fccf+_0x5b2299(0x2a5)+_0x5e8f9f[_0x5b2299(0x26c)]+'\x0a';}),_0x3b88a6+='\x0a',_0x3b88a6+=_0x16f855(0x335),_0x3b88a6+=!settings[_0x16f855(0x278)]?_0x16f855(0x32f):'Notifications\x20enabled\x0a',_0x3b88a6+=settings['telegramEnabled']?settings[_0x16f855(0x24e)]==_0x16f855(0x24d)?_0x16f855(0x340):_0x16f855(0x279)+settings[_0x16f855(0x24e)]+_0x16f855(0x36c):'',await sendTelegram(_0x34fdfd[_0x16f855(0x1ab)]['id'],_0x3b88a6,{'parse_mode':_0x16f855(0x2a0)});}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x2db),async _0xac0a72=>{const _0x5d4f7c=_0x4a8155,_0x2c1167=getEnabledBots();if(_0x2c1167[_0x5d4f7c(0x2a8)]==0x0)await sendTelegram(_0xac0a72[_0x5d4f7c(0x1ab)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2c1167[_0x5d4f7c(0x2a8)]>0x1)_0x2c1167[_0x5d4f7c(0x362)]({'botID':_0x5d4f7c(0x24d)});let _0x3f4bf4=[],_0x347523=[];const _0x3620fe=_0x2c1167[_0x5d4f7c(0x2a8)]%0x4==0x0||_0x2c1167['length']%0x4==0x3||_0x2c1167[_0x5d4f7c(0x2a8)]%0x3==0x1?0x4:0x3;let _0x5139c6=0x0;_0x2c1167[_0x5d4f7c(0x1f2)]((_0x265858,_0x3d3afa)=>{const _0x1b0e74=_0x5d4f7c;if(_0x3d3afa%_0x3620fe==0x0)_0x347523=[];_0x347523[_0x1b0e74(0x362)](Markup[_0x1b0e74(0x1cc)][_0x1b0e74(0x353)](_0x265858['botID']==_0x1b0e74(0x24d)?_0x1b0e74(0x209):_0x1b0e74(0x25e)+_0x265858['botID'],_0x1b0e74(0x1c8)+_0x265858['botID'])),_0x3d3afa%_0x3620fe==0x0&&(_0x3f4bf4[_0x5139c6]=_0x347523,_0x5139c6++);});const _0x5a9830=Markup['inlineKeyboard'](_0x3f4bf4);_0xac0a72[_0x5d4f7c(0x29a)](_0x5d4f7c(0x19c),_0x5a9830);}}),tgBot[_0x4a8155(0x388)](/restart_(.+)/,async _0x18484d=>{const _0x3d498f=_0x4a8155,_0x991128=_0x18484d['match'][0x1];_0x18484d[_0x3d498f(0x2fa)](),_0x991128==_0x3d498f(0x24d)?config[_0x3d498f(0x1f2)](_0x1d33a7=>{const _0x2613a7=_0x3d498f;restartBot(_0x1d33a7[_0x2613a7(0x1ee)]);}):restartBot(_0x991128);}),tgBot['command']('on',async _0xa5a154=>{const _0x47d77b=_0x4a8155,_0x2f3def=getDisabledBots();if(_0x2f3def[_0x47d77b(0x2a8)]==0x0)await sendTelegram(_0xa5a154['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x2f3def[_0x47d77b(0x2a8)]>0x1)_0x2f3def[_0x47d77b(0x362)]({'botID':_0x47d77b(0x24d)});let _0x500eda=[],_0x28ca70=[];const _0x57c733=_0x2f3def[_0x47d77b(0x2a8)]%0x4==0x0||_0x2f3def[_0x47d77b(0x2a8)]%0x4==0x3||_0x2f3def[_0x47d77b(0x2a8)]%0x3==0x1?0x4:0x3;let _0x64d0b=0x0;_0x2f3def[_0x47d77b(0x1f2)]((_0x569999,_0x2deced)=>{const _0x1ce3fc=_0x47d77b;if(_0x2deced%_0x57c733==0x0)_0x28ca70=[];_0x28ca70['push'](Markup[_0x1ce3fc(0x1cc)][_0x1ce3fc(0x353)](_0x569999['botID']==_0x1ce3fc(0x24d)?_0x1ce3fc(0x209):_0x1ce3fc(0x25e)+_0x569999[_0x1ce3fc(0x1ee)],_0x1ce3fc(0x2fe)+_0x569999[_0x1ce3fc(0x1ee)])),_0x2deced%_0x57c733==0x0&&(_0x500eda[_0x64d0b]=_0x28ca70,_0x64d0b++);});const _0x369fcd=Markup[_0x47d77b(0x2cf)](_0x500eda);_0xa5a154[_0x47d77b(0x29a)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x369fcd);}}),tgBot['action'](/on_(.+)/,async _0x223e44=>{const _0x3e4417=_0x4a8155,_0x47a5b4=_0x223e44[_0x3e4417(0x364)][0x1];_0x223e44[_0x3e4417(0x2fa)]();if(_0x47a5b4==_0x3e4417(0x24d)){const _0x4f7f70=getDisabledBots();await sendTelegram(_0x223e44['chat']['id'],_0x3e4417(0x21e)),_0x4f7f70[_0x3e4417(0x1f2)](_0x892560=>{const _0x4af43d=_0x3e4417;if(_0x892560['botID']!=_0x4af43d(0x24d))toggleBot(_0x892560[_0x4af43d(0x1ee)],toggleStatus(_0x892560[_0x4af43d(0x1ee)]),'stopped');});}else await sendTelegram(_0x223e44['chat']['id'],_0x3e4417(0x34e)+_0x47a5b4),toggleBot(_0x47a5b4,toggleStatus(_0x47a5b4),'stopped');}),tgBot['command']('off',async _0x37b5c6=>{const _0x470d1d=_0x4a8155,_0x73f8b1=getEnabledBots();if(_0x73f8b1[_0x470d1d(0x2a8)]==0x0)await sendTelegram(_0x37b5c6['chat']['id'],_0x470d1d(0x379));else{if(_0x73f8b1[_0x470d1d(0x2a8)]>0x1)_0x73f8b1[_0x470d1d(0x362)]({'botID':_0x470d1d(0x24d)});let _0x12f2c8=[],_0x1858c7=[];const _0x56dd77=_0x73f8b1[_0x470d1d(0x2a8)]%0x4==0x0||_0x73f8b1[_0x470d1d(0x2a8)]%0x4==0x3||_0x73f8b1['length']%0x3==0x1?0x4:0x3;let _0x2e25b8=0x0;_0x73f8b1[_0x470d1d(0x1f2)]((_0x3fadea,_0x53262c)=>{const _0x7835be=_0x470d1d;if(_0x53262c%_0x56dd77==0x0)_0x1858c7=[];_0x1858c7[_0x7835be(0x362)](Markup[_0x7835be(0x1cc)][_0x7835be(0x353)](_0x3fadea[_0x7835be(0x1ee)]==_0x7835be(0x24d)?'All\x20bots':'Bot\x20'+_0x3fadea[_0x7835be(0x1ee)],'off_'+_0x3fadea[_0x7835be(0x1ee)])),_0x53262c%_0x56dd77==0x0&&(_0x12f2c8[_0x2e25b8]=_0x1858c7,_0x2e25b8++);});const _0x41698b=Markup[_0x470d1d(0x2cf)](_0x12f2c8);_0x37b5c6['reply'](_0x470d1d(0x393),_0x41698b);}}),tgBot[_0x4a8155(0x388)](/off_(.+)/,async _0x58e43a=>{const _0x10ea48=_0x4a8155,_0x1eff89=_0x58e43a[_0x10ea48(0x364)][0x1];_0x58e43a[_0x10ea48(0x2fa)]();if(_0x1eff89=='all'){const _0x386e2c=getEnabledBots();await sendTelegram(_0x58e43a[_0x10ea48(0x1ab)]['id'],_0x10ea48(0x2c2)),_0x386e2c[_0x10ea48(0x1f2)](_0x586da0=>{const _0xe81f77=_0x10ea48;if(_0x586da0[_0xe81f77(0x1ee)]!=_0xe81f77(0x24d))toggleBot(_0x586da0[_0xe81f77(0x1ee)],toggleStatus(_0x586da0[_0xe81f77(0x1ee)]),_0xe81f77(0x303));});}else await sendTelegram(_0x58e43a['chat']['id'],_0x10ea48(0x1e0)+_0x1eff89),toggleBot(_0x1eff89,toggleStatus(_0x1eff89),_0x10ea48(0x303));}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x2ec),async _0x4a4b74=>{const _0x1190c7=_0x4a8155,_0x124510=getEnabledBots();if(_0x124510['length']==0x0)await sendTelegram(_0x4a4b74[_0x1190c7(0x1ab)]['id'],_0x1190c7(0x379));else{if(_0x124510[_0x1190c7(0x2a8)]>0x1){let _0x5339d9=[],_0x5a9058=[];const _0x3d0c00=_0x124510[_0x1190c7(0x2a8)]%0x4==0x0||_0x124510[_0x1190c7(0x2a8)]%0x4==0x3||_0x124510[_0x1190c7(0x2a8)]%0x3==0x1?0x4:0x3;let _0x3f890c=0x0;_0x124510[_0x1190c7(0x1f2)]((_0x747e67,_0x4eff48)=>{const _0xa817a3=_0x1190c7;if(_0x4eff48%_0x3d0c00==0x0)_0x5a9058=[];_0x5a9058[_0xa817a3(0x362)](Markup[_0xa817a3(0x1cc)][_0xa817a3(0x353)](_0xa817a3(0x25e)+_0x747e67[_0xa817a3(0x1ee)],'metrics_'+_0x747e67[_0xa817a3(0x1ee)])),_0x4eff48%_0x3d0c00==0x0&&(_0x5339d9[_0x3f890c]=_0x5a9058,_0x3f890c++);});const _0x1b79a3=Markup['inlineKeyboard'](_0x5339d9);_0x4a4b74[_0x1190c7(0x29a)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x1b79a3);}else{const _0x4aaea2=_0x124510[0x0]['botID'];if(pid[_0x4aaea2])pid[_0x4aaea2]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x4a8155(0x388)](/metrics_(.+)/,async _0x1f3300=>{const _0x24b0f0=_0x4a8155,_0x441cf0=_0x1f3300[_0x24b0f0(0x364)][0x1];_0x1f3300[_0x24b0f0(0x2fa)]();if(pid[_0x441cf0])pid[_0x441cf0][_0x24b0f0(0x19b)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x2e6),async _0x16db53=>{const _0x4c4d21=_0x4a8155,_0x4bf2cb=getEnabledBots();if(_0x4bf2cb[_0x4c4d21(0x2a8)]==0x0)await sendTelegram(_0x16db53[_0x4c4d21(0x1ab)]['id'],_0x4c4d21(0x379));else{if(_0x4bf2cb[_0x4c4d21(0x2a8)]>0x1){let _0x4909af=[],_0x585320=[];const _0x80e7c1=_0x4bf2cb[_0x4c4d21(0x2a8)]%0x4==0x0||_0x4bf2cb[_0x4c4d21(0x2a8)]%0x4==0x3||_0x4bf2cb['length']%0x3==0x1?0x4:0x3;let _0xc1452e=0x0;_0x4bf2cb[_0x4c4d21(0x1f2)]((_0x2f71db,_0x5d84ad)=>{const _0x384f2c=_0x4c4d21;if(_0x5d84ad%_0x80e7c1==0x0)_0x585320=[];_0x585320[_0x384f2c(0x362)](Markup[_0x384f2c(0x1cc)][_0x384f2c(0x353)](_0x384f2c(0x25e)+_0x2f71db[_0x384f2c(0x1ee)],_0x384f2c(0x256)+_0x2f71db[_0x384f2c(0x1ee)])),_0x5d84ad%_0x80e7c1==0x0&&(_0x4909af[_0xc1452e]=_0x585320,_0xc1452e++);});const _0xe6c43c=Markup[_0x4c4d21(0x2cf)](_0x4909af);_0x16db53[_0x4c4d21(0x29a)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0xe6c43c);}else{const _0xc2216a=_0x4bf2cb[0x0]['botID'];if(pid[_0xc2216a])pid[_0xc2216a][_0x4c4d21(0x19b)]({'function':_0x4c4d21(0x190),'args':null});}}}),tgBot[_0x4a8155(0x388)](/portfolio_(.+)/,async _0x1322a5=>{const _0x17f4a3=_0x4a8155,_0x25f20b=_0x1322a5[_0x17f4a3(0x364)][0x1];_0x1322a5[_0x17f4a3(0x2fa)]();if(pid[_0x25f20b])pid[_0x25f20b][_0x17f4a3(0x19b)]({'function':_0x17f4a3(0x190),'args':null});}),tgBot['command'](_0x4a8155(0x352),async _0x49a90b=>{const _0x10429d=_0x4a8155;await getMessages();if(!updateAvailable)await sendTelegram(_0x49a90b[_0x10429d(0x1ab)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x49a90b[_0x10429d(0x1ab)]['id'],_0x10429d(0x271));else{const _0x1cd37a=Markup[_0x10429d(0x2cf)]([Markup[_0x10429d(0x1cc)]['callback'](_0x10429d(0x2c6),'update_yes'),Markup[_0x10429d(0x1cc)][_0x10429d(0x353)]('No','update_no')]);_0x49a90b['reply'](_0x10429d(0x390),_0x1cd37a);}}}),tgBot['action'](/update_(.+)/,async _0x56df21=>{const _0x563e23=_0x4a8155,_0x57dbd3=_0x56df21[_0x563e23(0x364)][0x1];_0x56df21[_0x563e23(0x2fa)](),_0x57dbd3=='yes'&&(await sendTelegram(_0x56df21[_0x563e23(0x1ab)]['id'],_0x563e23(0x2b7)),updateBB(_0x563e23(0x352))),_0x57dbd3=='no'&&await sendTelegram(_0x56df21[_0x563e23(0x1ab)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot['command'](_0x4a8155(0x24c),async _0x3f144e=>{const _0x1c7dcb=_0x4a8155;if(!validInstallation)await sendTelegram(_0x3f144e[_0x1c7dcb(0x1ab)]['id'],_0x1c7dcb(0x18a));else{const _0x5215ee=Markup[_0x1c7dcb(0x2cf)]([Markup[_0x1c7dcb(0x1cc)]['callback'](_0x1c7dcb(0x2c6),_0x1c7dcb(0x1b4)),Markup[_0x1c7dcb(0x1cc)]['callback']('No',_0x1c7dcb(0x1be))]);_0x3f144e[_0x1c7dcb(0x29a)](_0x1c7dcb(0x2d4),_0x5215ee);}}),tgBot[_0x4a8155(0x388)](/reinstall_(.+)/,async _0x57646d=>{const _0x28f181=_0x4a8155,_0xf7d459=_0x57646d[_0x28f181(0x364)][0x1];_0x57646d['editMessageReplyMarkup'](),_0xf7d459==_0x28f181(0x2cd)&&(await sendTelegram(_0x57646d['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x28f181(0x24c))),_0xf7d459=='no'&&await sendTelegram(_0x57646d['chat']['id'],_0x28f181(0x2a2));}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x35c),async _0x3f5d73=>{const _0x375099=_0x4a8155,_0x595a42=getBotsWithMode();if(_0x595a42[_0x375099(0x2a8)]==0x0)await sendTelegram(_0x3f5d73['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x3838b0=[],_0x23ce52=[];const _0x338b59=0x2;let _0x357f1b=0x0;_0x595a42['forEach']((_0x2f12bf,_0x5ab93e)=>{const _0x4680b4=_0x375099;if(_0x5ab93e%_0x338b59==0x0)_0x23ce52=[];_0x23ce52['push'](Markup[_0x4680b4(0x1cc)][_0x4680b4(0x353)](_0x4680b4(0x25e)+_0x2f12bf['botID']+'\x20('+_0x2f12bf[_0x4680b4(0x2bb)]+')',_0x4680b4(0x33c)+_0x2f12bf[_0x4680b4(0x1ee)])),_0x5ab93e%_0x338b59==0x0&&(_0x3838b0[_0x357f1b]=_0x23ce52,_0x357f1b++);});const _0x3a5e8d=Markup['inlineKeyboard'](_0x3838b0);_0x3f5d73[_0x375099(0x29a)](_0x375099(0x1cb),_0x3a5e8d);}}),tgBot[_0x4a8155(0x388)](/toggle_(.+)/,async _0x29c740=>{const _0x4c2efe=_0x4a8155,_0x32fd46=_0x29c740[_0x4c2efe(0x364)][0x1];_0x29c740[_0x4c2efe(0x2fa)]();const _0xd9cac4=getBotsWithMode(),_0x29426b=_0xd9cac4[_0x4c2efe(0x2e8)](_0x339a2e=>_0x339a2e[_0x4c2efe(0x1ee)]==_0x32fd46),_0x22ee8b=_0x29426b[_0x4c2efe(0x2bb)]=='auto'?_0x4c2efe(0x2e0):_0x4c2efe(0x315);await sendTelegram(_0x29c740['chat']['id'],_0x4c2efe(0x369)+_0x32fd46+_0x4c2efe(0x1f6)+_0x22ee8b+_0x4c2efe(0x250)),toggleBotMode(_0x32fd46);}),tgBot[_0x4a8155(0x26b)]('names',async _0x4e2055=>{const _0x1b2684=_0x4a8155;let _0x59d376='';config[_0x1b2684(0x1f2)](_0x5b8134=>{const _0x85920a=_0x1b2684;_0x59d376+=_0x85920a(0x25e)+_0x5b8134[_0x85920a(0x1ee)]+':\x20'+_0x5b8134[_0x85920a(0x2f5)]+'\x0a';}),await sendTelegram(_0x4e2055[_0x1b2684(0x1ab)]['id'],_0x59d376,{'parse_mode':'HTML'});}),tgBot[_0x4a8155(0x26b)](_0x4a8155(0x24b),async _0x4519c8=>{const _0x344e50=_0x4a8155;await sendTelegram(_0x4519c8[_0x344e50(0x1ab)]['id'],_0x31ef2d);}),process[_0x4a8155(0x20a)](_0x4a8155(0x255),()=>tgBot[_0x4a8155(0x241)](_0x4a8155(0x255))),process[_0x4a8155(0x20a)](_0x4a8155(0x1f7),()=>tgBot[_0x4a8155(0x241)]('SIGTERM')),tgBot[_0x4a8155(0x36b)]();}}function disableTelegram(){const _0x43b000=_0x46a734;tgBot&&tgBot[_0x43b000(0x241)]();}async function sendTelegram(_0x25b131,_0x2b7bfb,_0x2a06dd){const _0x414cd4=_0x46a734;_0x2a06dd={..._0x2a06dd,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x414cd4(0x242)](_0x25b131,_0x2b7bfb,_0x2a06dd);}catch(_0x175cd6){console[_0x414cd4(0x193)](_0x414cd4(0x38c),_0x175cd6);}}async function sendTelegramBot(_0xc5160a,_0x131463){const _0x27e93a=_0x46a734;if(settings[_0x27e93a(0x278)]){if(settings['telegramEvents']==_0x27e93a(0x24d)||(_0x131463['type']==_0x27e93a(0x21a)||_0x131463[_0x27e93a(0x2f6)]==_0x27e93a(0x258)||_0x131463[_0x27e93a(0x2f6)]==_0x27e93a(0x391))&&settings[_0x27e93a(0x24e)]=='alerts'||_0x131463[_0x27e93a(0x2f6)]==_0x27e93a(0x348)&&settings['telegramEvents']==_0x27e93a(0x33b)){if(tgBot&&settings[_0x27e93a(0x307)]){if(_0x131463[_0x27e93a(0x305)])await sendTelegram(settings['telegramChatId'],_0x131463[_0x27e93a(0x2f5)]+_0x27e93a(0x371)+_0x131463[_0x27e93a(0x2f0)]);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0xc5160a+_0x27e93a(0x371)+_0x131463[_0x27e93a(0x2f0)]);}}}}async function sendTelegramMsg(_0x4566a6,_0x5a5775=_0x46a734(0x2a0)){const _0x10e9a3=_0x46a734;return settings['telegramEnabled']&&tgBot&&settings[_0x10e9a3(0x307)]?(await sendTelegram(settings[_0x10e9a3(0x307)],_0x4566a6,{'parse_mode':_0x5a5775}),!![]):![];}function getDeviceWithIp(_0x38f22c){const _0x1c83a5=_0x46a734;return devices[_0x1c83a5(0x2e8)](_0x3d1a62=>_0x3d1a62['ip']===_0x38f22c);}async function temporaryAccess2FA(_0x2c0333,_0x3a76df){const _0x5b9e9a=_0x46a734;let _0x435231=new Date(),_0x352d0a=![];if(lastIpApproval){if(_0x435231-lastIpApproval<0x1388)_0x352d0a=!![];}lastIpApproval=new Date();if(_0x352d0a)return;if(tgBot&&settings[_0x5b9e9a(0x307)]){const _0x89782c=uuidRandom();tmpStorage[_0x89782c]={'uuid':_0x2c0333,'externalip':_0x3a76df};const _0x35f10b=Markup[_0x5b9e9a(0x2cf)]([Markup[_0x5b9e9a(0x1cc)][_0x5b9e9a(0x353)](_0x5b9e9a(0x355),_0x5b9e9a(0x1c7)+_0x89782c),Markup[_0x5b9e9a(0x1cc)][_0x5b9e9a(0x353)](_0x5b9e9a(0x227),_0x5b9e9a(0x2a4)+_0x89782c),Markup[_0x5b9e9a(0x1cc)]['callback'](_0x5b9e9a(0x32a),_0x5b9e9a(0x363)+_0x89782c),Markup['button'][_0x5b9e9a(0x353)]('reject',_0x5b9e9a(0x328)+_0x89782c)]);await sendTelegram(settings['telegramChatId'],_0x5b9e9a(0x29d)+normalizeIP(_0x3a76df)[_0x5b9e9a(0x226)]+'\x20?',_0x35f10b),tgBot[_0x5b9e9a(0x388)](/tempaccess_(.+)_(.+)/,async _0x59bc76=>{const _0x51ed0f=_0x5b9e9a,_0x4f9332=_0x59bc76[_0x51ed0f(0x364)][0x1],_0x14cd90=_0x59bc76[_0x51ed0f(0x364)][0x2],{uuid:_0xad3aeb,externalip:_0x46104c}=tmpStorage[_0x14cd90];delete tmpStorage[_0x14cd90],_0x59bc76['editMessageReplyMarkup'](),devices[_0xad3aeb][_0x51ed0f(0x2ef)]={'clientip':_0x46104c,'timestamp':new Date()[_0x51ed0f(0x251)](),'expiry':_0x4f9332},_0x4f9332!='reject'?(await sendTelegram(_0x59bc76[_0x51ed0f(0x1ab)]['id'],'Access\x20enabled\x20for\x20'+_0x4f9332+_0x51ed0f(0x1e3),{'parse_mode':'HTML'}),io['to'](_0xad3aeb)[_0x51ed0f(0x213)](_0x51ed0f(0x30b),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x59bc76[_0x51ed0f(0x1ab)]['id'],_0x51ed0f(0x330)),io['to'](_0xad3aeb)['emit']('status',{'access':{'allow':![],'reason':_0x51ed0f(0x1a0),'token':null}}));});}}async function loginAccess2FA(_0x5128d4,_0x5ea464){const _0xd82365=_0x46a734;if(tgBot&&settings['telegramChatId']){const _0x161614=uuidRandom();tmpStorage[_0x161614]={'uuid':_0x5128d4,'externalip':_0x5ea464};const _0x4f3bfb=Markup[_0xd82365(0x2cf)]([Markup[_0xd82365(0x1cc)][_0xd82365(0x353)](_0xd82365(0x1ba),_0xd82365(0x273)+loginExpiry+'_'+_0x161614),Markup[_0xd82365(0x1cc)][_0xd82365(0x353)]('reject',_0xd82365(0x360)+_0x161614)]);await sendTelegram(settings[_0xd82365(0x307)],_0xd82365(0x343)+normalizeIP(_0x5ea464)[_0xd82365(0x226)]+'\x20?',_0x4f3bfb),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x2165a5=>{const _0x54c347=_0xd82365,_0x208081=_0x2165a5[_0x54c347(0x364)][0x1],_0x469c30=_0x2165a5['match'][0x2],{uuid:_0x585fbd,externalip:_0x1b451c}=tmpStorage[_0x469c30];delete tmpStorage[_0x469c30],_0x2165a5[_0x54c347(0x2fa)](),devices[_0x585fbd][_0x54c347(0x1f1)]={'clientip':_0x1b451c,'timestamp':new Date()[_0x54c347(0x251)](),'expiry':_0x208081},_0x208081!='reject'?(await sendTelegram(_0x2165a5[_0x54c347(0x1ab)]['id'],_0x54c347(0x274),{'parse_mode':_0x54c347(0x2a0)}),io['to'](_0x585fbd)['emit'](_0x54c347(0x30b),{'access':{'allow':![],'reason':_0x54c347(0x198),'token':null}})):(await sendTelegram(_0x2165a5[_0x54c347(0x1ab)]['id'],_0x54c347(0x2f8)),io['to'](_0x585fbd)[_0x54c347(0x213)]('status',{'access':{'allow':![],'reason':_0x54c347(0x232),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xaea66=_0x46a734;return dbConfig['get']('bots')[_0xaea66(0x19e)](_0xaea66(0x1ee))[_0xaea66(0x1a9)]({'status':_0xaea66(0x1d8)})[_0xaea66(0x2ee)]()||[];}function getDisabledBots(){const _0x9e384e=_0x46a734;return dbConfig[_0x9e384e(0x38b)](_0x9e384e(0x266))['sortBy']('botID')[_0x9e384e(0x1a9)]({'status':_0x9e384e(0x1c6)})['value']()||[];}function getBotAttributes(_0xf4ac37){const _0x17d8a9=_0x46a734;let _0x4fa8e8={};const _0x376ca2=configpath+_0x17d8a9(0x322)+_0xf4ac37+'-config.json',_0x2932af=fs[_0x17d8a9(0x211)](_0x376ca2);if(_0x2932af){const _0x329ef7=fs[_0x17d8a9(0x2b2)](_0x376ca2);try{const _0x192717=JSON[_0x17d8a9(0x2cc)](_0x329ef7),_0x2e83e1=_0x192717?_0x192717['bot'][0x0]['headless']:![];_0x4fa8e8[_0x17d8a9(0x2bb)]=_0x2e83e1?_0x17d8a9(0x315):'manual',_0x4fa8e8[_0x17d8a9(0x2f5)]=_0x192717?_0x192717[_0x17d8a9(0x253)][0x0][_0x17d8a9(0x2f5)]:_0x17d8a9(0x25e)+_0xf4ac37;}catch(_0x56df22){_0x4fa8e8[_0x17d8a9(0x2bb)]=_0x17d8a9(0x2e0),_0x4fa8e8['botname']=_0x17d8a9(0x25e)+_0xf4ac37;}}else _0x4fa8e8[_0x17d8a9(0x2bb)]=_0x17d8a9(0x2e0),_0x4fa8e8[_0x17d8a9(0x2f5)]=_0x17d8a9(0x25e)+_0xf4ac37;return _0x4fa8e8;}function getBotsWithMode(){const _0x28e491=_0x46a734,_0x5260ff=dbConfig[_0x28e491(0x38b)](_0x28e491(0x266))['sortBy']('botID')[_0x28e491(0x2ee)]()||[];return _0x5260ff[_0x28e491(0x1f2)](_0x25cc83=>{const _0x4a3716=_0x28e491;let _0xc37bdd=getBotAttributes(_0x25cc83[_0x4a3716(0x1ee)]);_0x25cc83['mode']=_0xc37bdd[_0x4a3716(0x2bb)];}),_0x5260ff;}function getBotExchanges(){const _0x2d4c0b=_0x46a734;let _0x5962fe=[];const _0x4e7789=dbConfig[_0x2d4c0b(0x38b)](_0x2d4c0b(0x266))[_0x2d4c0b(0x19e)](_0x2d4c0b(0x1ee))[_0x2d4c0b(0x2ee)]()||[];_0x4e7789['forEach'](_0x36db5e=>{const _0x58dcd6=_0x2d4c0b;if(_0x36db5e[_0x58dcd6(0x30b)]=='enabled'){const _0x179add=configpath+_0x58dcd6(0x322)+_0x36db5e[_0x58dcd6(0x1ee)]+_0x58dcd6(0x236),_0x51a7e0=fs[_0x58dcd6(0x211)](_0x179add);let _0x388757;if(_0x51a7e0){const _0x51333d=fs['readFileSync'](_0x179add);try{const _0x4e2666=JSON[_0x58dcd6(0x2cc)](_0x51333d);_0x388757=_0x4e2666?_0x4e2666[_0x58dcd6(0x253)][0x0][_0x58dcd6(0x26f)]:null;}catch(_0x307800){}}if(_0x388757)_0x5962fe['push'](_0x388757);}});const _0x3a9cdd=[...new Set(_0x5962fe)][_0x2d4c0b(0x349)]();return _0x3a9cdd;}async function initUser(){const _0x12eefd=_0x46a734;if(!settings[_0x12eefd(0x31b)]){const _0x729f2b=uuidRandom();mixpanel['alias'](_0x729f2b),updateSetting('userid',_0x729f2b);}}async function initSecure(){const _0x151b34=_0x46a734;let _0x7820f7=getSecure();if(!_0x7820f7[_0x151b34(0x1bc)](_0x151b34(0x286))){let _0x45bab5=await generateKeys();_0x7820f7[_0x151b34(0x346)]=_0x45bab5['publicKey'],_0x7820f7[_0x151b34(0x2bf)]=_0x45bab5[_0x151b34(0x2bf)],_0x7820f7[_0x151b34(0x286)]=crypto[_0x151b34(0x300)](0x20)[_0x151b34(0x26e)](_0x151b34(0x235));;storeSecure(_0x7820f7);}}function getSettings(){const _0x1c24eb=_0x46a734;return dbSettings[_0x1c24eb(0x38b)](_0x1c24eb(0x1da))[_0x1c24eb(0x2ee)]()||{};}function getSecure(){const _0x33332d=_0x46a734;return dbSecure['get'](_0x33332d(0x284))['value']()||{};}function getBlacklist(){const _0x389f8c=_0x46a734;return dbSecure['get'](_0x389f8c(0x320))[_0x389f8c(0x2ee)]()||[];}function broadcastToBots(_0x1f896e,_0x5e7765){const _0x367415=_0x46a734;config[_0x367415(0x1f2)](_0x2f1534=>{const _0x2e1d83=_0x367415;if(_0x2f1534[_0x2e1d83(0x30b)]==_0x2e1d83(0x1d8)&&_0x2f1534['live']==_0x2e1d83(0x270)||_0x2f1534[_0x2e1d83(0x30b)]==_0x2e1d83(0x189)&&_0x2f1534['live']==_0x2e1d83(0x270)){if(pid[_0x2f1534[_0x2e1d83(0x1ee)]])pid[_0x2f1534[_0x2e1d83(0x1ee)]][_0x2e1d83(0x19b)]({[_0x1f896e]:_0x5e7765});}});}async function storeSettings(_0x4c6acf,_0x47bcde=![]){const _0x4576b6=_0x46a734;_0x4c6acf={...settings,..._0x4c6acf};if(_0x47bcde&&_0x4c6acf[_0x4576b6(0x254)]!=_0x4576b6(0x294)&&_0x4c6acf[_0x4576b6(0x254)]!=_0x4576b6(0x344)&&_0x4c6acf[_0x4576b6(0x254)]!=''){const _0xe3f08f=decryptRSA(secure['privateKey'],_0x4c6acf[_0x4576b6(0x254)])['split'](_0x4576b6(0x2ae))[0x0],_0xf21916=bcrypt[_0x4576b6(0x249)](_0xe3f08f,saltRounds);_0x4c6acf={..._0x4c6acf,'bbPassword':_0xf21916};}if(_0x47bcde&&_0x4c6acf[_0x4576b6(0x2c9)]!=_0x4576b6(0x294)&&_0x4c6acf[_0x4576b6(0x2c9)]!=_0x4576b6(0x344)&&_0x4c6acf[_0x4576b6(0x2c9)]!=''){const _0x1fd9d9=decryptRSA(secure[_0x4576b6(0x2bf)],_0x4c6acf[_0x4576b6(0x2c9)])[_0x4576b6(0x2bc)](_0x4576b6(0x2ae))[0x0];_0x4c6acf={..._0x4c6acf,'telegramToken':_0x1fd9d9};}if(_0x47bcde&&_0x4c6acf[_0x4576b6(0x36f)]!=_0x4576b6(0x294)&&_0x4c6acf[_0x4576b6(0x36f)]!=_0x4576b6(0x344)&&_0x4c6acf['marketcapApi']!=''){const _0x4f53b8=decryptRSA(secure[_0x4576b6(0x2bf)],_0x4c6acf[_0x4576b6(0x36f)])[_0x4576b6(0x2bc)](_0x4576b6(0x2ae))[0x0];_0x4c6acf={..._0x4c6acf,'marketcapApi':_0x4f53b8};}const _0x1b2fa9=_0x4c6acf['telegramToken']!='************'&&_0x4c6acf['telegramToken']!=settings['telegramToken']||_0x4c6acf[_0x4576b6(0x37a)]!=settings[_0x4576b6(0x37a)],_0x1588b2=_0x4c6acf[_0x4576b6(0x2c9)]==''||_0x4c6acf[_0x4576b6(0x37a)]=='',_0x3075de=_0x4c6acf[_0x4576b6(0x36f)]&&_0x4c6acf[_0x4576b6(0x36f)]!=_0x4576b6(0x294)&&_0x4c6acf[_0x4576b6(0x36f)]!=settings[_0x4576b6(0x2c9)];_0x1b2fa9&&(_0x4c6acf[_0x4576b6(0x307)]=null,_0x4c6acf[_0x4576b6(0x24e)]='all');for(const [_0x5c8169,_0x1a35d1]of Object[_0x4576b6(0x28e)](_0x4c6acf)){if(_0x5c8169==_0x4576b6(0x2c9)&&_0x1a35d1==_0x4576b6(0x294)){_0x4c6acf[_0x4576b6(0x2c9)]=settings[_0x4576b6(0x2c9)];continue;};if(_0x5c8169==_0x4576b6(0x254)&&_0x1a35d1=='************'){_0x4c6acf[_0x4576b6(0x254)]=settings[_0x4576b6(0x254)];continue;};if(_0x5c8169==_0x4576b6(0x36f)&&_0x1a35d1==_0x4576b6(0x294)){_0x4c6acf[_0x4576b6(0x36f)]=settings[_0x4576b6(0x36f)];continue;};dbSettings['set'](_0x4576b6(0x1cd)+_0x5c8169,_0x1a35d1)['write']();}settings=_0x4c6acf,io['to'](_0x4576b6(0x2ad))[_0x4576b6(0x213)]('settings',cleanSettings()),broadcastToBots('timeshift',settings['timeshift']),broadcastToBots('onepagemode',settings[_0x4576b6(0x1ed)]),broadcastToBots(_0x4576b6(0x36f),settings['marketcapApi']);if(_0x1b2fa9&&!_0x1588b2)initTelegram();if(_0x1b2fa9&&_0x1588b2)disableTelegram();getAllClients()[_0x4576b6(0x1f2)](_0x5de442=>{const _0x5b6b8a=_0x4576b6;getSocket(_0x5de442['id'])[_0x5b6b8a(0x213)](_0x5b6b8a(0x30b),{'access':{'allow':![],'reason':_0x5b6b8a(0x198),'token':null}});}),_0x3075de&&(await sleep(0xbb8),testMarketcapApi(_0x4c6acf[_0x4576b6(0x36f)]));}async function testMarketcapApi(_0xc430e5){const _0x19aa0e=_0x46a734,_0x419576=[_0x19aa0e(0x35e),_0x19aa0e(0x2d3)];try{await axios['get'](_0x19aa0e(0x30a),{'headers':{'X-CMC_PRO_API_KEY':_0xc430e5},'params':{'symbol':_0x419576[_0x19aa0e(0x26e)]()}});}catch(_0x3f857a){_0x3f857a[_0x19aa0e(0x26e)]()[_0x19aa0e(0x228)]('status\x20code\x20401')?(io['to'](_0x19aa0e(0x2ad))[_0x19aa0e(0x213)]('notification','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x19aa0e(0x22c)](_0x19aa0e(0x208))):(io['to'](_0x19aa0e(0x2ad))['emit'](_0x19aa0e(0x356),_0x19aa0e(0x2b8)),logger[_0x19aa0e(0x22c)](_0x19aa0e(0x2b8)),logger[_0x19aa0e(0x1df)](_0x19aa0e(0x224),_0x3f857a[_0x19aa0e(0x26e)]()+_0x19aa0e(0x382)+_0x3f857a[_0x19aa0e(0x1fe)]));return;}logger[_0x19aa0e(0x1df)](_0x19aa0e(0x345));}function updateSetting(_0x5e5102,_0x8329a8){const _0xb20c1d=_0x46a734;dbSettings[_0xb20c1d(0x2b5)]('settings.'+_0x5e5102,_0x8329a8)[_0xb20c1d(0x354)](),settings=getSettings(),io['to'](_0xb20c1d(0x2ad))[_0xb20c1d(0x213)]('settings',cleanSettings());}function storeSecure(_0x3a874b){const _0x4ac849=_0x46a734;dbSecure[_0x4ac849(0x38b)]('secure')[_0x4ac849(0x362)](_0x3a874b)['write'](),secure=_0x3a874b;}function addBlacklist(_0xc7555b){const _0x92ffd0=_0x46a734;cleanBlacklist();let _0xe14a04;devices[_0xc7555b][_0x92ffd0(0x2ef)]?_0xe14a04=Math[_0x92ffd0(0x351)](devices[_0xc7555b][_0x92ffd0(0x2ef)]['expiry'],loginExpiry):_0xe14a04=loginExpiry,dbSecure['get'](_0x92ffd0(0x320))[_0x92ffd0(0x362)]({'expiry':new Date()[_0x92ffd0(0x251)]()+_0xe14a04*0x3c*0x3e8,'token':devices[_0xc7555b][_0x92ffd0(0x376)][_0x92ffd0(0x327)]})[_0x92ffd0(0x354)](),blacklist=dbSecure[_0x92ffd0(0x38b)]('blacklist')[_0x92ffd0(0x2ee)]();}function cleanBlacklist(){let _0x12431d=dbSecure['get']('blacklist')['cloneDeep']()['value'](),_0x3dd0bb=new Date()['getTime']();_0x12431d['forEach'](_0x125447=>{const _0xf75219=_0x271b;_0x125447[_0xf75219(0x212)]<_0x3dd0bb&&dbSecure['get'](_0xf75219(0x320))[_0xf75219(0x366)]({'expiry':_0x125447[_0xf75219(0x212)]})[_0xf75219(0x354)]();});}function initStates(){const _0x25b78b=_0x46a734;let _0x4fcc4b=getConfiguration();_0x4fcc4b[_0x25b78b(0x1f2)](_0x2f27e0=>{const _0x38a6a5=_0x25b78b;_0x2f27e0[_0x38a6a5(0x26c)]=_0x38a6a5(0x303);}),storeConfiguration(_0x4fcc4b);}async function generateKeys(){const _0x2be8ec=_0x46a734,_0x4f5e38=forge[_0x2be8ec(0x191)][_0x2be8ec(0x196)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x101c0f=forge[_0x2be8ec(0x191)]['privateKeyToPem'](_0x4f5e38[_0x2be8ec(0x2bf)]),_0x311160=forge[_0x2be8ec(0x191)][_0x2be8ec(0x23b)](_0x4f5e38[_0x2be8ec(0x346)]);return{'privateKey':_0x101c0f,'publicKey':_0x311160};}async function oneTimeMigration(){const _0xbf8e7c=_0x46a734;let _0x3b4bc2=getSettings(),_0x4ac4e5=![];!_0x3b4bc2[_0xbf8e7c(0x1bc)](_0xbf8e7c(0x2f2))&&(_0x3b4bc2[_0xbf8e7c(0x2f2)]=0x0,_0x4ac4e5=!![]);!_0x3b4bc2[_0xbf8e7c(0x1bc)](_0xbf8e7c(0x37c))&&(_0x3b4bc2[_0xbf8e7c(0x37c)]=0x0,_0x4ac4e5=!![]);!_0x3b4bc2['hasOwnProperty'](_0xbf8e7c(0x20c))&&(_0x3b4bc2[_0xbf8e7c(0x20c)]=_0xbf8e7c(0x319),_0x4ac4e5=!![]);!_0x3b4bc2['hasOwnProperty'](_0xbf8e7c(0x1ed))&&(_0x3b4bc2[_0xbf8e7c(0x1ed)]=![],_0x4ac4e5=!![]);!_0x3b4bc2['hasOwnProperty'](_0xbf8e7c(0x36f))&&(_0x3b4bc2[_0xbf8e7c(0x36f)]='',_0x4ac4e5=!![]);if(_0x4ac4e5)storeSettings(_0x3b4bc2);try{fs[_0xbf8e7c(0x38f)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x4472f2=>{const _0x51b407=_0xbf8e7c;if(!_0x4472f2[_0x51b407(0x276)]()){if(!_0x4472f2[_0x51b407(0x22f)][_0x51b407(0x229)]('backup-full@'))fs[_0x51b407(0x1aa)](configbackuppath+_0x4472f2[_0x51b407(0x22f)]);}else fs[_0x51b407(0x265)](configbackuppath+_0x4472f2[_0x51b407(0x22f)],{'recursive':!![]});});}catch(_0x2a54e9){logger[_0xbf8e7c(0x1df)](_0xbf8e7c(0x203),_0x2a54e9);}}function storeConfiguration(_0x1509e5){const _0x5d9c9b=_0x46a734;dbConfig['get'](_0x5d9c9b(0x266))[_0x5d9c9b(0x366)]()[_0x5d9c9b(0x354)](),dbConfig[_0x5d9c9b(0x38b)]('bots')['push'](..._0x1509e5)[_0x5d9c9b(0x354)](),config=_0x1509e5;}async function resetPassword(){const _0x46cc33=_0x46a734;if(tgBot&&settings[_0x46cc33(0x307)]){const _0x251f84=Markup[_0x46cc33(0x2cf)]([Markup[_0x46cc33(0x1cc)][_0x46cc33(0x353)](_0x46cc33(0x2cd),'resetpw_yes'),Markup[_0x46cc33(0x1cc)]['callback']('no','resetpw_no')]);await sendTelegram(settings[_0x46cc33(0x307)],_0x46cc33(0x2f7),_0x251f84),tgBot['action'](/resetpw_(.+)/,async _0x9c0690=>{const _0x9165a6=_0x46cc33,_0x2fc1cb=_0x9c0690[_0x9165a6(0x364)][0x1];_0x9c0690[_0x9165a6(0x2fa)]();if(_0x2fc1cb!='no'){const _0x4ab80f=0xf,_0x290f68=_0x9165a6(0x230),_0x3429b1=Array[_0x9165a6(0x36a)](crypto['randomFillSync'](new Uint32Array(_0x4ab80f)))[_0x9165a6(0x33d)](_0x5533c0=>_0x290f68[_0x5533c0%_0x290f68[_0x9165a6(0x2a8)]])[_0x9165a6(0x326)](''),_0x4f0a11=bcrypt[_0x9165a6(0x249)](_0x3429b1,saltRounds);storeSettings({'bbPassword':_0x4f0a11}),await sendTelegram(_0x9c0690[_0x9165a6(0x1ab)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3429b1,{'parse_mode':'HTML'});}else await sendTelegram(_0x9c0690[_0x9165a6(0x1ab)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0xf8c265,_0x4afe48){const _0x870581=_0x46a734;io['to'](_0x870581(0x2ad))['emit'](_0x870581(0x356),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x870581(0x391));if(tgBot&&settings[_0x870581(0x307)]){const _0x1e46ee=uuidRandom();tmpStorage[_0x1e46ee]={'path':_0xf8c265,'filename':_0x4afe48};const _0x424750=Markup[_0x870581(0x2cf)]([Markup['button'][_0x870581(0x353)]('yes',_0x870581(0x1fd)+_0x1e46ee),Markup[_0x870581(0x1cc)]['callback']('no','restore_no_'+_0x1e46ee)]);await sendTelegram(settings['telegramChatId'],_0x870581(0x19a),_0x424750),tgBot[_0x870581(0x388)](/restore_(.+)_(.+)/,async _0x2fc376=>{const _0x3e7192=_0x870581,_0x1714a9=_0x2fc376['match'][0x1],_0x56dd03=_0x2fc376[_0x3e7192(0x364)][0x2],{path:_0x2f5296,filename:_0x1a7eaa}=tmpStorage[_0x56dd03];delete tmpStorage[_0x56dd03],_0x2fc376[_0x3e7192(0x2fa)](),_0x1714a9==_0x3e7192(0x2cd)?(logger[_0x3e7192(0x1df)](_0x3e7192(0x218)),await sendTelegram(_0x2fc376[_0x3e7192(0x1ab)]['id'],_0x3e7192(0x1ac),{'parse_mode':_0x3e7192(0x2a0)}),unzipFile(_0x2f5296,_0x1a7eaa)):(logger[_0x3e7192(0x1df)]('Restore\x20process\x20aborted'),await sendTelegram(_0x2fc376[_0x3e7192(0x1ab)]['id'],_0x3e7192(0x2b4)));});}}function getServerTime(){const _0x37efeb=_0x46a734,_0x3b3436=new Date();return _0x3b3436[_0x37efeb(0x291)]()+'/'+(_0x3b3436['getMonth']()+0x1)[_0x37efeb(0x26e)]()[_0x37efeb(0x342)](0x2,'0')+'/'+_0x3b3436[_0x37efeb(0x1d0)]()[_0x37efeb(0x26e)]()['padStart'](0x2,'0')+'\x20'+_0x3b3436[_0x37efeb(0x200)]()[_0x37efeb(0x26e)]()['padStart'](0x2,'0')+':'+_0x3b3436[_0x37efeb(0x267)]()[_0x37efeb(0x26e)]()[_0x37efeb(0x342)](0x2,'0')+':'+_0x3b3436[_0x37efeb(0x272)]()[_0x37efeb(0x26e)]()[_0x37efeb(0x342)](0x2,'0');}function getTimeStamp(){const _0x2968f3=_0x46a734,_0x3b27d4=shiftedTime();return _0x3b27d4[_0x2968f3(0x291)]()+'/'+(_0x3b27d4[_0x2968f3(0x1b6)]()+0x1)[_0x2968f3(0x26e)]()[_0x2968f3(0x342)](0x2,'0')+'/'+_0x3b27d4[_0x2968f3(0x1d0)]()[_0x2968f3(0x26e)]()['padStart'](0x2,'0')+'\x20'+_0x3b27d4[_0x2968f3(0x200)]()[_0x2968f3(0x26e)]()[_0x2968f3(0x342)](0x2,'0')+':'+_0x3b27d4[_0x2968f3(0x267)]()['toString']()['padStart'](0x2,'0')+':'+_0x3b27d4[_0x2968f3(0x272)]()[_0x2968f3(0x26e)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x53897f=_0x46a734,_0x8276ef=shiftedTime();return _0x8276ef['getFullYear']()+(_0x8276ef[_0x53897f(0x1b6)]()+0x1)[_0x53897f(0x26e)]()['padStart'](0x2,'0')+_0x8276ef[_0x53897f(0x1d0)]()[_0x53897f(0x26e)]()['padStart'](0x2,'0')+'-'+_0x8276ef[_0x53897f(0x200)]()[_0x53897f(0x26e)]()[_0x53897f(0x342)](0x2,'0')+_0x8276ef[_0x53897f(0x267)]()[_0x53897f(0x26e)]()[_0x53897f(0x342)](0x2,'0')+_0x8276ef['getSeconds']()[_0x53897f(0x26e)]()[_0x53897f(0x342)](0x2,'0');}function shiftedTime(){const _0x1aac3d=_0x46a734,_0x390f29=new Date();let _0x277edc=_0x390f29;if(settings[_0x1aac3d(0x377)]&&settings[_0x1aac3d(0x377)]!==0x0)_0x277edc=fns['add'](_0x390f29,{'hours':settings[_0x1aac3d(0x377)]});return _0x277edc;}async function startScheduler(){const _0x2e1254=new Date()['getUTCHours'](),_0x2def15=shiftedTime()['getHours']();_0x2def15==0x4&&backupConfigFiles(),_0x2def15==0x0&&rotateLogFiles(),_0x2e1254%0x6==0x0&&triggerAnalytics(),_0x2e1254%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x151142){const _0x3207bd=_0x46a734;logger['debug']('Restore\x20backup\x20file\x20'+_0x151142);const _0x773a6d=getBotsWithMode();_0x773a6d[_0x3207bd(0x2a8)]>0x0?confirmRestore(configbackuppath,_0x151142):unzipFile(configbackuppath,_0x151142);}async function getBackupFiles(_0x4d86c3=null){const _0x2e9495=_0x46a734;let _0x2ec6a2=[],_0x550352=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x550352[_0x2e9495(0x349)]((_0x5cd25a,_0x1905cb)=>_0x5cd25a[_0x2e9495(0x22f)]<_0x1905cb['name']?0x1:_0x1905cb[_0x2e9495(0x22f)]<_0x5cd25a[_0x2e9495(0x22f)]?-0x1:0x0),_0x550352[_0x2e9495(0x1f2)](_0x250d34=>{const _0x5d363d=_0x2e9495;if(!_0x250d34[_0x5d363d(0x276)]()&&_0x250d34['name'][_0x5d363d(0x229)]('backup-full@')&&_0x250d34[_0x5d363d(0x22f)]['endsWith'](_0x5d363d(0x1f0))){const _0x461cb2=formatDate(fs['statSync'](configbackuppath+_0x250d34[_0x5d363d(0x22f)])[_0x5d363d(0x231)]);_0x2ec6a2['push']({'name':_0x250d34[_0x5d363d(0x22f)],'mtime':_0x461cb2});}});if(_0x4d86c3)io['to'](_0x4d86c3)[_0x2e9495(0x213)]('backup-files',_0x2ec6a2);else return _0x2ec6a2;}async function backupConfigFiles(){const _0x57badc=_0x46a734;await zipFiles(_0x57badc(0x337));const _0x3a2647=getCleanTimeStamp();fs[_0x57badc(0x295)](zippath+_0x57badc(0x1a5),configbackuppath+(_0x57badc(0x29e)+_0x3a2647+_0x57badc(0x1f0)));let _0xdb8484=fs[_0x57badc(0x38f)](configbackuppath,{'withFileTypes':!![]});_0xdb8484[_0x57badc(0x349)]((_0x25e171,_0x33e49f)=>_0x25e171[_0x57badc(0x22f)]<_0x33e49f[_0x57badc(0x22f)]?0x1:_0x33e49f[_0x57badc(0x22f)]<_0x25e171[_0x57badc(0x22f)]?-0x1:0x0),_0xdb8484[_0x57badc(0x2a8)]>maxBackups&&fs[_0x57badc(0x1aa)](configbackuppath+_0xdb8484[_0xdb8484['length']-0x1][_0x57badc(0x22f)]);}function rotateLogFiles(){const _0x3cb365=_0x46a734,_0x54e58c=fs['statSync'](logspath+_0x3cb365(0x1a4)),_0x511230=_0x54e58c[_0x3cb365(0x31d)]/0x400;if(_0x511230>0x64){let _0x369b54=fs[_0x3cb365(0x38f)](logspath,{'withFileTypes':!![]});_0x369b54[_0x3cb365(0x349)]((_0x10a72e,_0x33fec6)=>_0x10a72e['name']<_0x33fec6['name']?0x1:_0x33fec6[_0x3cb365(0x22f)]<_0x10a72e[_0x3cb365(0x22f)]?-0x1:0x0),_0x369b54['forEach'](_0x512fc3=>{const _0x27dc55=_0x3cb365;if(_0x512fc3[_0x27dc55(0x22f)]==_0x27dc55(0x341))fs[_0x27dc55(0x295)](logspath+_0x512fc3[_0x27dc55(0x22f)],logspath+_0x27dc55(0x332));if(_0x512fc3[_0x27dc55(0x22f)]=='output-001.log')fs[_0x27dc55(0x295)](logspath+_0x512fc3[_0x27dc55(0x22f)],logspath+_0x27dc55(0x341));_0x512fc3[_0x27dc55(0x22f)]==_0x27dc55(0x1a4)&&(fs[_0x27dc55(0x295)](logspath+_0x512fc3[_0x27dc55(0x22f)],logspath+'output-001.log'),fs['writeFileSync'](logspath+_0x512fc3[_0x27dc55(0x22f)],''));});}}async function zipFiles(_0x425c7b){const _0x3e74ef=_0x46a734;let _0x2d832b;if(_0x425c7b=='logs')_0x2d832b=logspath;if(_0x425c7b==_0x3e74ef(0x260))_0x2d832b=configpath;if(_0x425c7b==_0x3e74ef(0x337))_0x2d832b=configpath;let _0x4071f8=fs[_0x3e74ef(0x38f)](_0x2d832b,{'withFileTypes':!![]});const _0x527b8e=new JSZip();_0x4071f8[_0x3e74ef(0x1f2)](_0x1e29df=>{const _0x3ad15d=_0x3e74ef;if(!_0x1e29df[_0x3ad15d(0x276)]()){let _0x175879=fs[_0x3ad15d(0x2b2)](_0x2d832b+_0x1e29df[_0x3ad15d(0x22f)]);if(_0x425c7b==_0x3ad15d(0x260)){const _0x1d70e1=/^bot-[0-9]{3}-config.json$/,_0x3c041c=_0x1d70e1[_0x3ad15d(0x36d)](_0x1e29df['name']);if(_0x3c041c){const _0x36183a=JSON[_0x3ad15d(0x2cc)](_0x175879);if(_0x36183a[_0x3ad15d(0x253)][0x0]){_0x36183a[_0x3ad15d(0x253)][0x0][_0x3ad15d(0x192)]=_0x3ad15d(0x344),_0x36183a['bot'][0x0][_0x3ad15d(0x2c0)]=_0x3ad15d(0x344);if(_0x36183a[_0x3ad15d(0x253)][0x0]['apiPassword'])_0x36183a[_0x3ad15d(0x253)][0x0]['apiPassword']=_0x3ad15d(0x344);}_0x175879=JSON[_0x3ad15d(0x21f)](_0x36183a,null,0x2);}if(_0x1e29df[_0x3ad15d(0x22f)]==_0x3ad15d(0x252)){const _0x360177=JSON[_0x3ad15d(0x2cc)](_0x175879);if(_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x1f9)])_0x360177[_0x3ad15d(0x1da)]['loginRequired']=![];if(_0x360177[_0x3ad15d(0x1da)]['bbPassword'])_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x254)]=_0x3ad15d(0x344);if(_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x2c9)])_0x360177[_0x3ad15d(0x1da)]['telegramToken']=_0x3ad15d(0x344);if(_0x360177[_0x3ad15d(0x1da)]['telegramChatId'])_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x307)]=null;if(_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x36f)])_0x360177[_0x3ad15d(0x1da)][_0x3ad15d(0x36f)]=_0x3ad15d(0x344);_0x175879=JSON['stringify'](_0x360177,null,0x2);}if(_0x1e29df[_0x3ad15d(0x22f)]!=_0x3ad15d(0x2ce))_0x527b8e[_0x3ad15d(0x188)](_0x1e29df[_0x3ad15d(0x22f)],_0x175879);}else _0x527b8e[_0x3ad15d(0x188)](_0x1e29df[_0x3ad15d(0x22f)],_0x175879);}});const _0x214f92=await _0x527b8e['generateAsync']({'type':_0x3e74ef(0x264),'base64':![],'compression':_0x3e74ef(0x2ac)});fs['writeFileSync'](zippath+(_0x425c7b+_0x3e74ef(0x1f0)),_0x214f92,'binary');}async function unzipFile(_0x5287e6,_0x5d0d1c){const _0x4c4fc3=_0x46a734;fs[_0x4c4fc3(0x38f)](configpath,{'withFileTypes':!![]})[_0x4c4fc3(0x1f2)](_0x3d9277=>{const _0x36c90d=_0x4c4fc3;if(!_0x3d9277[_0x36c90d(0x276)]())fs['rmSync'](configpath+_0x3d9277[_0x36c90d(0x22f)]);});const _0x462a9e=fs['readFileSync'](_0x5287e6+_0x5d0d1c,'binary'),_0x571318=await JSZip[_0x4c4fc3(0x1f4)](_0x462a9e,{'base64':![],'checkCRC32':!![]});for(const _0x416974 of Object[_0x4c4fc3(0x2e3)](_0x571318[_0x4c4fc3(0x304)])){const _0xfa03ad=_0x571318[_0x4c4fc3(0x304)][_0x416974],_0x52f0b1=await _0xfa03ad[_0x4c4fc3(0x386)](_0x4c4fc3(0x264));fs[_0x4c4fc3(0x1ce)](configpath+_0xfa03ad[_0x4c4fc3(0x22f)],_0x52f0b1);}fs[_0x4c4fc3(0x38f)](temppath,{'withFileTypes':!![]})[_0x4c4fc3(0x1f2)](_0x360f26=>{const _0xf08b67=_0x4c4fc3;if(!_0x360f26['isDirectory']())fs[_0xf08b67(0x265)](temppath+_0x360f26[_0xf08b67(0x22f)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x4c4fc3(0x19b)]({'restore':!![]},_0xfb8dc8=>{});}async function getPublicIp(){const _0x2766e8=_0x46a734;try{const _0x246911=await axios[_0x2766e8(0x38b)](_0x2766e8(0x22d));publicip=_0x246911['data']['ip'];}catch(_0x347a4a){}}async function triggerAnalytics(){const _0x3a2d70=_0x46a734;if(!publicip)await getPublicIp();const _0x32de41=getBotsWithMode();let _0x442d2d=0x0;_0x32de41[_0x3a2d70(0x1f2)](_0x4c27b4=>{const _0x15f222=_0x3a2d70;if(_0x4c27b4[_0x15f222(0x30b)]===_0x15f222(0x1d8))_0x442d2d++;});const _0x1b83b4=getBotExchanges();mixpanel[_0x3a2d70(0x2ed)]('Server',{'distinct_id':settings[_0x3a2d70(0x31b)],'ip':publicip,'version':serverversion,'numbots':_0x32de41[_0x3a2d70(0x2a8)],'numbotsenabled':_0x442d2d,'exchanges':_0x1b83b4,'environment':environment});}async function getMessages(){const _0x386d50=_0x46a734,_0x340dc1=_0x386d50(0x18d),_0x4fea98=new GraphQLClient(_0x340dc1),_0x32ca77={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x24b2b7=serverversion[_0x386d50(0x2bc)]('.'),_0x3a73fe=_0x24b2b7[0x0]+'.'+_0x24b2b7[0x1],_0x2e8eee=Math['min'](settings['lastmsgtelegram'],settings[_0x386d50(0x37c)]),_0x17ea1a={'last':parseInt(_0x2e8eee),'bbm':_0x3a73fe},_0x332af8=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x17532e;try{_0x17532e=await _0x4fea98[_0x386d50(0x1b5)](_0x332af8,_0x17ea1a,_0x32ca77);}catch(_0x33322e){}if(_0x17532e&&_0x17532e['messages']){let _0x39ec1d=settings[_0x386d50(0x2f2)];newMessages=[];for(const _0x555bc8 of _0x17532e[_0x386d50(0x21c)]){newMessages['push'](_0x555bc8);let _0x51454d=![];_0x555bc8['bbvNew']&&(updateSetting(_0x386d50(0x20c),_0x555bc8['bbvNew']),_0x51454d=isNewerVersion(serverversion,_0x555bc8['bbvNew'])||serverversion==_0x555bc8[_0x386d50(0x202)]);if(!_0x51454d&&_0x555bc8['number']>_0x39ec1d){if(_0x555bc8['bbvReceive']===_0x386d50(0x350)||serverversion[_0x386d50(0x229)](_0x555bc8[_0x386d50(0x31a)])){let _0x49bedd=''+_0x555bc8[_0x386d50(0x1a1)]+'\x0a\x0a'+_0x555bc8[_0x386d50(0x338)];const _0x56cb92=await sendTelegramMsg(toTelegramMarkdown(_0x49bedd),_0x386d50(0x339));if(_0x56cb92)_0x39ec1d=_0x555bc8[_0x386d50(0x36e)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x39ec1d),emitMessages();}}function emitMessages(){const _0x8c2440=_0x46a734,_0x1b3fb5=settings[_0x8c2440(0x37c)];let _0x34a9e9=[];newMessages['forEach'](_0x4cdc67=>{const _0x172cf8=_0x8c2440;_0x4cdc67[_0x172cf8(0x36e)]>_0x1b3fb5&&_0x34a9e9[_0x172cf8(0x362)](_0x4cdc67);}),_0x34a9e9['length']>0x0&&getAllClients()[_0x8c2440(0x1f2)](_0x465bca=>{const _0x5a2347=_0x8c2440;getSocket(_0x465bca['id'])[_0x5a2347(0x213)](_0x5a2347(0x338),_0x34a9e9);});}function confirmMessage(_0x89d338){const _0x132fae=_0x46a734;updateSetting(_0x132fae(0x37c),Number(_0x89d338));}function isNewerVersion(_0x4cf2fa,_0x846162){const _0x1e5c8a=_0x46a734,_0x5a7e56=_0x846162[_0x1e5c8a(0x2bc)]('.'),_0x331899=_0x4cf2fa[_0x1e5c8a(0x2bc)]('.');for(var _0x39477c=0x0;_0x39477c<_0x331899['length'];_0x39477c++){const _0xa4b488=~~_0x331899[_0x39477c],_0xdfc4b8=~~_0x5a7e56[_0x39477c];if(_0xa4b488>_0xdfc4b8)return!![];if(_0xa4b488<_0xdfc4b8)return![];}return![];}function toTelegramMarkdown(_0x22617a){const _0x1418d4=_0x46a734,_0x4b3bc1=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x491d99=/\*{2}(.+?)\*{2}/gim;return _0x22617a=_0x22617a['replace'](_0x4b3bc1,_0x1418d4(0x239))[_0x1418d4(0x1e7)](_0x491d99,'*$1*'),_0x22617a;}async function validateConfigFile(){const _0x1c8df1=_0x46a734,_0x5de934=dbConfig[_0x1c8df1(0x38b)]('bots')['sortBy']('botID')['value']()||[];if(_0x5de934['length']==0x0){let _0x1c2fc5=0x0,_0x458d6e=[];const _0x31644c=/^bot-([0-9]{3})-config.json$/,_0x22cb48=fs['readdirSync'](configpath);_0x22cb48[_0x1c8df1(0x1f2)](_0x533687=>{const _0x4fb8f5=_0x1c8df1,_0x4d3396=_0x31644c[_0x4fb8f5(0x2c7)](_0x533687);if(_0x4d3396){const _0x4ef681=_0x4d3396[0x1];let _0x2d021f=getBotAttributes(_0x4ef681);_0x458d6e[_0x4fb8f5(0x362)]({'botID':_0x4ef681,'botname':_0x2d021f[_0x4fb8f5(0x2f5)],'status':_0x4fb8f5(0x1c6),'live':_0x4fb8f5(0x303)}),_0x1c2fc5++;}}),_0x1c2fc5!=0x0&&(dbConfig['get'](_0x1c8df1(0x266))[_0x1c8df1(0x289)](_0x458d6e)['write'](),config=_0x458d6e,restoredConfigFile=_0x1c2fc5);}}async function restoreConfigNotify(_0x5d3f48){const _0x1aaa48=_0x46a734;let _0x277599;if(restoredConfigFile==0x1)_0x277599=_0x1aaa48(0x29c);else _0x277599='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x5d3f48)io['to'](_0x1aaa48(0x2ad))[_0x1aaa48(0x213)](_0x1aaa48(0x356),_0x277599);else{logger[_0x1aaa48(0x1bb)](_0x1aaa48(0x2fd)),logger[_0x1aaa48(0x1bb)](_0x277599),logger['simple'](_0x1aaa48(0x2fd)),logger[_0x1aaa48(0x1bb)]('');if(tgBot&&settings[_0x1aaa48(0x307)]&&settings[_0x1aaa48(0x24e)]!=_0x1aaa48(0x33b))await sendTelegram(settings[_0x1aaa48(0x307)],_0x1aaa48(0x1d7)+_0x277599);}}function decryptRSA(_0x1fefd8,_0x3ca1ed){const _0x1cb39d=_0x46a734,_0x52064b=forge[_0x1cb39d(0x191)][_0x1cb39d(0x2d6)](_0x1fefd8),_0x130038=_0x52064b[_0x1cb39d(0x35f)](forge['util'][_0x1cb39d(0x220)](_0x3ca1ed),_0x1cb39d(0x1bd),{'md':forge['md']['sha256']['create'](),'mgf1':{'md':forge['md'][_0x1cb39d(0x1c1)]['create']()}});return _0x130038;}function validateCredentials(_0x54f7d3,_0x491a52){const _0x5aa987=_0x46a734;if(_0x54f7d3[_0x5aa987(0x1ec)]==settings[_0x5aa987(0x1ae)]&&bcrypt[_0x5aa987(0x301)](_0x54f7d3[_0x5aa987(0x368)],settings['bbPassword'])){if(settings[_0x5aa987(0x1a3)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x4ce43b=generateLoginToken(_0x491a52);return{'allow':!![],'reason':_0x5aa987(0x22b),'token':_0x4ce43b};}}else return{'allow':![],'reason':_0x5aa987(0x38a),'token':null};}function refreshToken(_0x2b2466){const _0x14d731=_0x46a734,_0x12ced5=generateLoginToken(_0x2b2466);return{'allow':!![],'reason':_0x14d731(0x22b),'token':_0x12ced5};}function validateAccess(_0x33d9ab,_0x3ab420,_0x591f9a){const _0x452b46=_0x46a734,_0x3ac26b=_0x591f9a?_0x591f9a:devices[_0x3ab420]['ip'];let _0x1236a4;const _0x2bc8e9=_0x3c067a=>{const _0x546b92=_0x271b;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x3ab420)){const _0x18bc90=generateLoginToken(_0x3ab420);return{'allow':!![],'reason':_0x546b92(0x2e5),'token':_0x18bc90};}else return{'allow':![],'reason':_0x546b92(0x383),'token':null};}else return _0x1236a4=validToken(_0x3c067a,_0x3ab420),_0x1236a4[_0x546b92(0x1bc)](_0x546b92(0x391))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3c067a}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x546b92(0x25b),'token':null};};if(settings[_0x452b46(0x2f4)]){let _0x2f712e=[...settings['whitelist'],'::1','::ffff:127.0.0.1',_0x452b46(0x2b9)];if(_0x2f712e[_0x452b46(0x228)](_0x3ac26b))return _0x2bc8e9(_0x33d9ab);else{_0x1236a4=validToken(_0x33d9ab,_0x3ab420);if(_0x1236a4[_0x452b46(0x1bc)](_0x452b46(0x391)))return _0x2bc8e9(_0x33d9ab);else{if(telegramIpApproved(_0x3ab420)){const _0x16633a=generateToken(_0x3ab420);return _0x1236a4=_0x2bc8e9(_0x33d9ab),_0x1236a4['allow']?{'allow':!![],'reason':_0x452b46(0x2b1),'token':_0x16633a}:_0x1236a4;}else return settings[_0x452b46(0x1f8)]?{'allow':![],'reason':_0x452b46(0x31f),'token':null}:{'allow':![],'reason':_0x452b46(0x2f3),'token':null};}}}else return _0x2bc8e9(_0x33d9ab);}function timelyDecrypt(_0x2a917f,_0x455429,_0x6edf19='@'){const _0x234473=_0x46a734;if(_0x2a917f)try{const _0xfe5562=decryptRSA(secure[_0x234473(0x2bf)],_0x2a917f),_0x18415a=_0xfe5562[_0x234473(0x2bc)](_0x6edf19)[0x0],_0x490169=_0xfe5562[_0x234473(0x2bc)](_0x6edf19)[0x1],_0x1bf1c3=new Date()[_0x234473(0x251)]();if(_0x455429){if(_0x1bf1c3-_0x490169<maxSecretAge*0x3e8)return _0x18415a;else return![];}else return _0x18415a;}catch(_0x29032d){return![];}else return![];}const validToken=(_0x5cfbc2,_0x39d273)=>{const _0x44fcae=_0x46a734,_0x1c1179=devices[_0x39d273]['ip'];if(!_0x5cfbc2)return{'error':_0x44fcae(0x2c4)};for(let _0x37f7f9 of blacklist){if(_0x37f7f9['token']==_0x5cfbc2)return{'error':_0x44fcae(0x18f)};}let _0x2adfbf;try{_0x2adfbf=jwt[_0x44fcae(0x2c8)](_0x5cfbc2,secure[_0x44fcae(0x286)]+_0x39d273);}catch{return{'error':_0x44fcae(0x1ff)};}if(!_0x2adfbf['hasOwnProperty'](_0x44fcae(0x222))&&!_0x2adfbf[_0x44fcae(0x1bc)](_0x44fcae(0x1ec))||!_0x2adfbf[_0x44fcae(0x1bc)](_0x44fcae(0x37f)))return{'error':_0x44fcae(0x28d)};if(!_0x2adfbf[_0x44fcae(0x1bc)](_0x44fcae(0x1ec))&&_0x2adfbf[_0x44fcae(0x1bc)](_0x44fcae(0x222))){const {clientip:_0x59b1a3}=_0x2adfbf;return _0x1c1179==_0x59b1a3?{'success':_0x44fcae(0x19d)}:{'error':_0x44fcae(0x29f)};}else{if(_0x2adfbf['hasOwnProperty'](_0x44fcae(0x1ec))&&_0x2adfbf[_0x44fcae(0x1bc)](_0x44fcae(0x222))){const {username:_0x3a4a62,clientip:_0x23be0a}=_0x2adfbf;return settings[_0x44fcae(0x1ae)]==_0x3a4a62&&_0x1c1179==_0x23be0a?{'success':_0x44fcae(0x19d)}:{'error':_0x44fcae(0x367)};}}},generateLoginToken=_0x32fe28=>{const _0xeaeb2b=_0x46a734;if(_0x32fe28){const _0x47983d=devices[_0x32fe28]['ip'];return jwt[_0xeaeb2b(0x288)]({'username':settings[_0xeaeb2b(0x1ae)],'clientip':_0x47983d},secure['secret']+_0x32fe28,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0xc7f43a=>{const _0x5aa4f4=_0x46a734;if(_0xc7f43a){const _0x153e02=devices[_0xc7f43a]['ip'];return jwt[_0x5aa4f4(0x288)]({'clientip':_0x153e02},secure[_0x5aa4f4(0x286)]+_0xc7f43a,{'expiresIn':devices[_0xc7f43a][_0x5aa4f4(0x2ef)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3ef228=>{const _0x2ee1d1=_0x46a734;let _0x15cbf2=![];return devices[_0x3ef228]['telegramIpApproval']&&devices[_0x3ef228][_0x2ee1d1(0x2ef)]['expiry']!='reject'&&(_0x15cbf2=devices[_0x3ef228][_0x2ee1d1(0x2ef)][_0x2ee1d1(0x222)]==devices[_0x3ef228]['ip']&&new Date()['getTime']()-devices[_0x3ef228][_0x2ee1d1(0x2ef)][_0x2ee1d1(0x1ca)]<devices[_0x3ef228][_0x2ee1d1(0x2ef)][_0x2ee1d1(0x212)]*0x3c*0x3e8),_0x15cbf2;},telegram2FaApproved=_0x37334b=>{const _0x1d89fb=_0x46a734;let _0x5f0e9c=![];return devices[_0x37334b][_0x1d89fb(0x1f1)]&&devices[_0x37334b][_0x1d89fb(0x1f1)]['expiry']!=_0x1d89fb(0x22e)&&(_0x5f0e9c=devices[_0x37334b][_0x1d89fb(0x1f1)]['clientip']==devices[_0x37334b]['ip']&&new Date()[_0x1d89fb(0x251)]()-devices[_0x37334b][_0x1d89fb(0x1f1)][_0x1d89fb(0x1ca)]<devices[_0x37334b][_0x1d89fb(0x1f1)][_0x1d89fb(0x212)]*0x3c*0x3e8),_0x5f0e9c;},normalizeIP=_0x27bc14=>{const _0x32be9b=_0x46a734;let _0x47c8e2=null,_0x129a87=null;if(ipaddr[_0x32be9b(0x2c1)](_0x27bc14)){const _0x389acd=ipaddr[_0x32be9b(0x2cc)](_0x27bc14);_0x389acd[_0x32be9b(0x1e9)]()===_0x32be9b(0x34b)?(_0x389acd[_0x32be9b(0x2d7)]()&&(_0x47c8e2=_0x389acd[_0x32be9b(0x27b)]()['toString']()),_0x129a87=_0x389acd[_0x32be9b(0x26e)]()):(_0x47c8e2=_0x389acd['toString'](),_0x129a87=_0x389acd['toIPv4MappedAddress']()[_0x32be9b(0x26e)]());}return{'show':_0x47c8e2?_0x47c8e2:_0x129a87,'store':_0x129a87};};function formatDate(_0x29547e){const _0x1f4a29=_0x46a734;return _0x29547e[_0x1f4a29(0x291)]()+'/'+(_0x29547e['getMonth']()+0x1)[_0x1f4a29(0x26e)]()[_0x1f4a29(0x342)](0x2,'0')+'/'+_0x29547e[_0x1f4a29(0x1d0)]()[_0x1f4a29(0x26e)]()[_0x1f4a29(0x342)](0x2,'0')+'\x20'+_0x29547e['getHours']()['toString']()[_0x1f4a29(0x342)](0x2,'0')+':'+_0x29547e[_0x1f4a29(0x267)]()[_0x1f4a29(0x26e)]()[_0x1f4a29(0x342)](0x2,'0')+':'+_0x29547e['getSeconds']()[_0x1f4a29(0x26e)]()[_0x1f4a29(0x342)](0x2,'0');}function sleep(_0x196a9c){return new Promise(_0x3a11fb=>setTimeout(_0x3a11fb,_0x196a9c));}