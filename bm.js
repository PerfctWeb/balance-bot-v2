const _0x293b13=_0x18ab;(function(_0x539344,_0x261845){const _0xb92b6f=_0x18ab,_0x5e903f=_0x539344();while(!![]){try{const _0x19f666=-parseInt(_0xb92b6f(0x23e))/0x1*(parseInt(_0xb92b6f(0x235))/0x2)+parseInt(_0xb92b6f(0x318))/0x3+-parseInt(_0xb92b6f(0x359))/0x4*(parseInt(_0xb92b6f(0x261))/0x5)+-parseInt(_0xb92b6f(0x1e9))/0x6+-parseInt(_0xb92b6f(0x34c))/0x7+parseInt(_0xb92b6f(0x2de))/0x8+-parseInt(_0xb92b6f(0x2ac))/0x9*(-parseInt(_0xb92b6f(0x288))/0xa);if(_0x19f666===_0x261845)break;else _0x5e903f['push'](_0x5e903f['shift']());}catch(_0x5b7a02){_0x5e903f['push'](_0x5e903f['shift']());}}}(_0x2efd,0x3f0ed));const _0x1a696b=function(){let _0x4d9b32=!![];return function(_0x44348e,_0x45d697){const _0x362cd0=_0x4d9b32?function(){const _0x1c9b5b=_0x18ab;if(_0x45d697){const _0x25b764=_0x45d697[_0x1c9b5b(0x30f)](_0x44348e,arguments);return _0x45d697=null,_0x25b764;}}:function(){};return _0x4d9b32=![],_0x362cd0;};}(),_0x4bac69=_0x1a696b(this,function(){const _0x5d358d=_0x18ab;return _0x4bac69[_0x5d358d(0x1c8)]()['search']('(((.+)+)+)+$')[_0x5d358d(0x1c8)]()[_0x5d358d(0x22f)](_0x4bac69)[_0x5d358d(0x38e)](_0x5d358d(0x365));});_0x4bac69();'use strict';process[_0x293b13(0x25a)][_0x293b13(0x28d)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require(_0x293b13(0x1e4)),path=require(_0x293b13(0x30d)),crypto=require('crypto'),Crypt=require(_0x293b13(0x371))['Crypt'],RSA=require(_0x293b13(0x371))['RSA'],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require(_0x293b13(0x21a)),argv=require(_0x293b13(0x1d5))(process[_0x293b13(0x350)][_0x293b13(0x378)](0x2))[_0x293b13(0x350)],uuidRandom=require(_0x293b13(0x2bd)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x293b13(0x336)),axios=require(_0x293b13(0x1e6)),{GraphQLClient,gql}=require(_0x293b13(0x3a0)),util=require(_0x293b13(0x25c)),fileUpload=require(_0x293b13(0x2c1)),{networkInterfaces}=require('os'),PORT=argv[_0x293b13(0x2d6)]||_0x293b13(0x325),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x293b13(0x2a9)](_0x293b13(0x316)+PORT+_0x293b13(0x203)),process[_0x293b13(0x26c)](0x1));const HOST=argv[_0x293b13(0x287)]||null,userID=argv[_0x293b13(0x382)]||'',debugging=argv['d']||![],nodeversion=process[_0x293b13(0x236)][_0x293b13(0x20e)],environment=require('./version.json')[_0x293b13(0x367)]||_0x293b13(0x1da);let bbpath=_0x293b13(0x24d),bbpath2='';const botfile=_0x293b13(0x1ff),configfile='bb-config.json',settingsfile=_0x293b13(0x35d),securefile=_0x293b13(0x36d),maxBackups=0xa;let validInstallation=!![];!fs[_0x293b13(0x1fd)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x293b13(0x1e0)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x293b13(0x313),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x293b13(0x2a7),zippath=userID?bbpath+_0x293b13(0x1ea)+userID+'/':bbpath+_0x293b13(0x1ea),loggerfile=fs[_0x293b13(0x300)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+'temp/';!fs[_0x293b13(0x1fd)](configpath)&&fs[_0x293b13(0x3a2)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x293b13(0x3a2)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x293b13(0x3a2)](logspath);!fs['existsSync'](zippath)&&fs[_0x293b13(0x3a2)](zippath);!fs[_0x293b13(0x1fd)](temppath)&&fs[_0x293b13(0x3a2)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x293b13(0x2d0)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x293b13(0x1f8)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x293b13(0x1cf),'onepagemode':![]}})[_0x293b13(0x2d0)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x293b13(0x1f8)]({'secure':{},'blacklist':[]})[_0x293b13(0x2d0)]();let crypt=new Crypt({'md':_0x293b13(0x332),'rsaStandard':_0x293b13(0x274)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x293b13(0x206),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x293b13(0x362)]!=''&&settings[_0x293b13(0x1f6)]&&settings[_0x293b13(0x1f6)]!='')initTelegram();const parseColor=(_0x1a19f0,_0x442a1f)=>{const _0xdda4b1=_0x293b13,_0x16cb66=/#[A-Z]{3}#/g;if(typeof _0x1a19f0==_0xdda4b1(0x271)){!_0x442a1f?_0x1a19f0=_0x1a19f0[_0xdda4b1(0x21b)](_0x16cb66,''):(_0x1a19f0=_0x1a19f0[_0xdda4b1(0x21b)](/#BLU#/g,'\x1b[34m'),_0x1a19f0=_0x1a19f0[_0xdda4b1(0x21b)](/#RED#/g,_0xdda4b1(0x348)),_0x1a19f0=_0x1a19f0['replace'](/#YEL#/g,_0xdda4b1(0x1cc)),_0x1a19f0=_0x1a19f0[_0xdda4b1(0x21b)](/#MAG#/g,'\x1b[35m'),_0x1a19f0=_0x1a19f0['replace'](/#CYA#/g,'\x1b[36m'),_0x1a19f0=_0x1a19f0[_0xdda4b1(0x21b)](/#RES#/g,'\x1b[0m'));;}return _0x1a19f0;},logger={'screen':_0xe0b883=>{const _0x4c1f0e=_0x293b13;console[_0x4c1f0e(0x2a9)](parseColor(_0xe0b883,!![]));},'simple':_0x464dc6=>{console['log'](parseColor(_0x464dc6,!![])),loggerfile['write'](util['format'](parseColor(_0x464dc6,![]))+'\x0a');},'full':async _0x5644fa=>{const _0x4e0e45=_0x293b13,_0x13e74c=getTimeStamp()+_0x4e0e45(0x20c)+_0x5644fa;console[_0x4e0e45(0x2a9)](parseColor(_0x13e74c,!![])),loggerfile[_0x4e0e45(0x2d0)](util[_0x4e0e45(0x21c)](parseColor(_0x13e74c,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x4e0e45(0x22c)]!=_0x4e0e45(0x2b2))await tgBot['sendMessage'](settings[_0x4e0e45(0x31e)],_0x4e0e45(0x20f)+parseColor(_0x5644fa,![]))[_0x4e0e45(0x2c0)](_0x3d5b56=>{telegramError(_0x3d5b56);});},'debug':async(_0x570fe1,_0x30e0b6='')=>{const _0x214a88=_0x293b13,_0x498029=getTimeStamp()+_0x214a88(0x2a8)+_0x570fe1;if(debugging)console[_0x214a88(0x2a9)](parseColor(_0x498029,!![]));loggerfile[_0x214a88(0x2d0)](util[_0x214a88(0x21c)](parseColor(_0x498029,![]))+'\x0a');if(_0x30e0b6){if(debugging)console[_0x214a88(0x2a9)](_0x30e0b6);loggerfile[_0x214a88(0x2d0)](util[_0x214a88(0x21c)](_0x30e0b6)+'\x0a');}}};process['on'](_0x293b13(0x2da),function(_0x8bd383){const _0x39b94d=_0x293b13;logger[_0x39b94d(0x215)](_0x8bd383);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x293b13(0x1e8))[_0x293b13(0x2cd)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x293b13(0x39c))[_0x293b13(0x2fe)](app);app[_0x293b13(0x37a)](fileUpload({'useTempFiles':!![]})),app[_0x293b13(0x2c6)](_0x293b13(0x391),async(_0x5e9b6e,_0x63f193)=>{const _0x84787e=_0x293b13,_0x4b37d3=_0x5e9b6e[_0x84787e(0x39b)][_0x84787e(0x372)],_0x308343=getClientsWithBotID(_0x84787e(0x312)),_0x237f4d=_0x5e9b6e['headers']['uuid'],_0x39a953=timelyDecrypt(_0x237f4d,![]),_0x5bd580=_0x308343['find'](_0x21e856=>_0x21e856[_0x84787e(0x33c)]==_0x39a953);if(_0x5bd580){const _0x5677f9=normalizeIP(_0x5e9b6e[_0x84787e(0x2e0)]['remoteAddress'])['store'],_0x58b500=_0x5e9b6e[_0x84787e(0x246)][_0x84787e(0x2af)];if(validateAccess(_0x58b500,_0x39a953,_0x5677f9)[_0x84787e(0x343)])_0x4b37d3==_0x84787e(0x35b)&&await backupConfigFiles(),await zipFiles(_0x4b37d3),_0x63f193[_0x84787e(0x21e)](zippath+(_0x4b37d3+'.zip'),_0x37bf0a=>{const _0x382bf7=_0x84787e;_0x37bf0a&&(logger[_0x382bf7(0x384)](_0x382bf7(0x31b)+_0x4b37d3),logger[_0x382bf7(0x215)](_0x37bf0a));});else logger[_0x84787e(0x384)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4b37d3+'\x20(1)');}else logger['full'](_0x84787e(0x226)+_0x4b37d3+_0x84787e(0x266));}),app['post'](_0x293b13(0x349),async(_0x128d1b,_0x322a92)=>{const _0x3a84d1=_0x293b13,_0x45813e=getClientsWithBotID('botmanager'),_0x7b66ef=_0x128d1b['headers'][_0x3a84d1(0x33c)],_0x3cf10d=timelyDecrypt(_0x7b66ef,![]),_0x57409e=_0x45813e['find'](_0x40212d=>_0x40212d[_0x3a84d1(0x33c)]==_0x3cf10d);logger[_0x3a84d1(0x33a)](_0x3a84d1(0x32c));if(_0x57409e){const _0x1f26bb=normalizeIP(_0x128d1b['socket'][_0x3a84d1(0x25d)])['store'],_0x53c172=_0x128d1b[_0x3a84d1(0x246)][_0x3a84d1(0x2af)];if(validateAccess(_0x53c172,_0x3cf10d,_0x1f26bb)[_0x3a84d1(0x343)]){if(_0x128d1b[_0x3a84d1(0x208)]){const _0x47e0b4=_0x128d1b[_0x3a84d1(0x208)][_0x3a84d1(0x396)];await _0x47e0b4['mv'](temppath+_0x47e0b4[_0x3a84d1(0x1ce)]),_0x322a92[_0x3a84d1(0x1e1)]({'status':!![],'message':_0x3a84d1(0x2b8)});const _0x6566f5=getBotsWithMode();_0x6566f5[_0x3a84d1(0x2fd)]>0x0?confirmRestore(temppath,_0x47e0b4[_0x3a84d1(0x1ce)]):unzipFile(temppath,_0x47e0b4[_0x3a84d1(0x1ce)]);}}else logger[_0x3a84d1(0x384)](_0x3a84d1(0x2bb));}else logger[_0x3a84d1(0x384)](_0x3a84d1(0x2f1));}),app['use'](express[_0x293b13(0x209)](path[_0x293b13(0x1e3)](__dirname,bbpath2,'build2'))),app[_0x293b13(0x37a)](express[_0x293b13(0x209)](path['join'](__dirname,bbpath2,'build'))),app[_0x293b13(0x2c6)]('/',function(_0x239273,_0x554a3e){const _0x39febd=_0x293b13;_0x554a3e[_0x39febd(0x2f5)](path['join'](__dirname,bbpath2,_0x39febd(0x319),_0x39febd(0x2e1)));}),app['get'](_0x293b13(0x34a),function(_0xf492bf,_0x2e7655){const _0x4aced6=_0x293b13;_0x2e7655['sendFile'](path[_0x4aced6(0x1e3)](__dirname,bbpath2,'build','index.html'));}),app[_0x293b13(0x2c6)]('/:bot/portfolio',(_0x14a839,_0x48ad9e)=>{const _0x20b68d=_0x293b13;_0x48ad9e['sendFile'](path[_0x20b68d(0x1e3)](__dirname,bbpath2,_0x20b68d(0x1d0),_0x20b68d(0x2e1)));}),app['get']('/:bot/performance',(_0x14f0fa,_0x3c3480)=>{const _0x39a915=_0x293b13;_0x3c3480['sendFile'](path['join'](__dirname,bbpath2,_0x39a915(0x1d0),'index.html'));}),app[_0x293b13(0x2c6)](_0x293b13(0x22b),(_0x406eec,_0x3d29e3)=>{const _0x412c28=_0x293b13;_0x3d29e3[_0x412c28(0x2f5)](path[_0x412c28(0x1e3)](__dirname,bbpath2,_0x412c28(0x1d0),_0x412c28(0x2e1)));}),app['get'](_0x293b13(0x363),(_0x3809f4,_0x2675ac)=>{const _0x1056b0=_0x293b13;_0x2675ac[_0x1056b0(0x2f5)](path[_0x1056b0(0x1e3)](__dirname,bbpath2,'build',_0x1056b0(0x2e1)));}),app[_0x293b13(0x2c6)](_0x293b13(0x2ec),(_0x51917e,_0x2b902e)=>{const _0x4269f5=_0x293b13;_0x2b902e['sendFile'](path[_0x4269f5(0x1e3)](__dirname,bbpath2,_0x4269f5(0x1d0),_0x4269f5(0x2e1)));}),app[_0x293b13(0x2c6)](_0x293b13(0x282),(_0x1b2524,_0x3e4570)=>{const _0x5e9030=_0x293b13;_0x3e4570[_0x5e9030(0x2f5)](path[_0x5e9030(0x1e3)](__dirname,bbpath2,_0x5e9030(0x1d0),_0x5e9030(0x2e1)));});if(HOST)http[_0x293b13(0x2ea)](PORT,HOST);else http[_0x293b13(0x2ea)](PORT);const io=require(_0x293b13(0x341))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x493057=_0x293b13;let _0x4d22c8=_0x493057(0x251);const _0x1b0c7a=networkInterfaces(),_0x412fd3={};for(const _0x55e8f5 of Object['keys'](_0x1b0c7a)){for(const _0x5a8279 of _0x1b0c7a[_0x55e8f5]){if((_0x5a8279[_0x493057(0x1f2)]==_0x493057(0x231)||_0x5a8279[_0x493057(0x1f2)]==0x4)&&!_0x5a8279[_0x493057(0x31d)]){const _0xeb7843=ipaddr[_0x493057(0x39d)](_0x5a8279[_0x493057(0x36a)])[_0x493057(0x26d)]();_0xeb7843!='private'&&(!_0x412fd3[_0x55e8f5]&&(_0x412fd3[_0x55e8f5]=[]),_0x412fd3[_0x55e8f5][_0x493057(0x257)](_0x5a8279[_0x493057(0x36a)]),_0x4d22c8=_0x5a8279['address']);}}}return{'serverip':_0x4d22c8,'netinterfaces':_0x412fd3};}async function startServer(){const _0x27abf6=_0x293b13,{serverip:_0x454db2,netinterfaces:_0x219dd9}=getServerIP();logger[_0x27abf6(0x215)](''),logger[_0x27abf6(0x215)](_0x27abf6(0x201)),await logger[_0x27abf6(0x384)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x27abf6(0x314)+(environment==_0x27abf6(0x2b0)?_0x27abf6(0x342):'')+'\x0a'+(_0x27abf6(0x38f)+PORT+_0x27abf6(0x22d))+(_0x27abf6(0x2ef)+_0x454db2+':'+PORT+_0x27abf6(0x28b))),logger[_0x27abf6(0x215)](_0x27abf6(0x201));if(config[_0x27abf6(0x2fd)]!=0x0)for(const _0x148800 of config){if(_0x148800[_0x27abf6(0x264)]==_0x27abf6(0x354)||_0x148800[_0x27abf6(0x264)]=='new')await logger[_0x27abf6(0x384)](_0x27abf6(0x29e)+_0x148800[_0x27abf6(0x334)]+'\x20|\x20'+_0x148800[_0x27abf6(0x248)]),startBot([_0x148800[_0x27abf6(0x334)],userID],{'cwd':bbpath},function(_0x38f169){const _0x34a837=_0x27abf6;if(_0x38f169)logger[_0x34a837(0x384)](_0x38f169);});else(_0x148800[_0x27abf6(0x264)]==_0x27abf6(0x35f)||_0x148800[_0x27abf6(0x264)]==_0x27abf6(0x329))&&await logger[_0x27abf6(0x384)](_0x27abf6(0x211)+_0x148800['botID']+'\x20|\x20'+_0x148800[_0x27abf6(0x248)]);}else!newBot&&logger[_0x27abf6(0x215)](_0x27abf6(0x358));if(newBot)addBot();logger[_0x27abf6(0x215)](_0x27abf6(0x201)),logger[_0x27abf6(0x215)](''),await logger[_0x27abf6(0x33a)]('Node.js\x20v'+nodeversion),await logger['debug']('Network\x20Interfaces:',_0x219dd9);}function startSocket(){const _0x5e66c7=_0x293b13;io['on'](_0x5e66c7(0x29a),_0x3dc3a3=>{const _0x4658a8=_0x5e66c7;let _0x15b6a3,_0x5401fa,_0xab4efd,_0x41e17e,_0x483761;const _0x2b62bc=_0x3dc3a3[_0x4658a8(0x2b7)]['headers']['referer'];_0x5401fa=_0x2b62bc[_0x4658a8(0x328)](/bot[0-9]{3}/);if(_0x5401fa)_0xab4efd=_0x5401fa[0x0]['match'](/[0-9]{3}/);if(_0xab4efd)_0x15b6a3=_0xab4efd[0x0];else _0x15b6a3=_0x4658a8(0x312);const _0x3d2ee0=_0x3dc3a3[_0x4658a8(0x2b7)][_0x4658a8(0x252)][_0x4658a8(0x237)];if(!_0x3d2ee0)_0x3dc3a3[_0x4658a8(0x311)]('status',{'publicKey':secure[_0x4658a8(0x217)]});else{_0x41e17e=timelyDecrypt(_0x3d2ee0,![]);if(!_0x41e17e)_0x3dc3a3[_0x4658a8(0x311)](_0x4658a8(0x264),{'publicKey':secure['publicKey']});else{_0x483761=normalizeIP(_0x3dc3a3[_0x4658a8(0x377)]['remoteAddress'])[_0x4658a8(0x34f)];if(!devices[_0x41e17e])devices[_0x41e17e]={'uuid':_0x41e17e,'access':{'token':null}};devices[_0x41e17e]['ip']=_0x483761;const _0x13cd92=addClient(_0x3dc3a3['id'],_0x41e17e,_0x15b6a3);setAccess(_0x13cd92),emitMessages(),_0x3dc3a3['on'](_0x4658a8(0x256),_0x5a0d1c=>{const _0x149cd3=_0x4658a8,_0x4b3ff8=timelyDecrypt(_0x5a0d1c[_0x149cd3(0x2f7)]);if(_0x4b3ff8){_0x5a0d1c={'username':_0x5a0d1c[_0x149cd3(0x347)],'password':_0x4b3ff8},devices[_0x41e17e][_0x149cd3(0x205)]=validateCredentials(_0x5a0d1c,_0x41e17e);if(devices[_0x41e17e][_0x149cd3(0x205)][_0x149cd3(0x343)]==![]&&devices[_0x41e17e][_0x149cd3(0x205)]['reason']==_0x149cd3(0x279))_0x3dc3a3[_0x149cd3(0x311)](_0x149cd3(0x264),{'access':devices[_0x41e17e][_0x149cd3(0x205)]}),loginAccess2FA(_0x41e17e,_0x483761);else{if(devices[_0x41e17e][_0x149cd3(0x205)]['allow']==![]&&devices[_0x41e17e][_0x149cd3(0x205)][_0x149cd3(0x233)]==_0x149cd3(0x2c2))_0x3dc3a3[_0x149cd3(0x311)](_0x149cd3(0x264),{'access':devices[_0x41e17e][_0x149cd3(0x205)]});else devices[_0x41e17e]['access'][_0x149cd3(0x343)]&&devices[_0x41e17e][_0x149cd3(0x205)][_0x149cd3(0x233)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x41e17e)[_0x149cd3(0x23b)](_0x44ca74=>{setAccess(_0x44ca74);}),logger[_0x149cd3(0x33a)](_0x149cd3(0x389)+_0x41e17e[_0x149cd3(0x378)](-0x8)),setTokenRefresh(_0x41e17e),setSessionTimeout(_0x149cd3(0x256),_0x41e17e));}}else logger['full'](_0x149cd3(0x398));}),_0x3dc3a3['on'](_0x4658a8(0x291),()=>{resetPassword();}),_0x3dc3a3['on'](_0x4658a8(0x223),_0x4147b8=>{removeClient(_0x3dc3a3['id']);}),_0x15b6a3==_0x4658a8(0x312)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1aeb00){const _0x524e87=_0x293b13;if(_0x1aeb00!=_0x524e87(0x312)&&config[_0x524e87(0x220)]!=''){if(pid[_0x1aeb00])pid[_0x1aeb00]['send']({'function':_0x524e87(0x37c),'args':null});}_0x1aeb00!='botmanager'&&broadcastToBots(_0x524e87(0x307),JSON['stringify'](config));}function reloadBotManager(){const _0x3fede4=_0x293b13;getClientsWithBotID(_0x3fede4(0x312))[_0x3fede4(0x23b)](_0x215186=>{const _0x43a1e2=_0x3fede4;getSocket(_0x215186['id'])['emit'](_0x43a1e2(0x264),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x217edc){const _0x173243=_0x293b13;return io[_0x173243(0x2eb)][_0x173243(0x2eb)][_0x173243(0x2c6)](_0x217edc);}function setAccess(_0x16e897){const _0xd302c0=_0x293b13,_0x11132d=getSocket(_0x16e897['id']),_0x32e590=_0x16e897[_0xd302c0(0x33c)],_0x262691=_0x16e897[_0xd302c0(0x214)];devices[_0x32e590][_0xd302c0(0x205)]=validateAccess(devices[_0x32e590][_0xd302c0(0x205)][_0xd302c0(0x277)],_0x32e590),logger['debug']('Setting\x20access:\x20'+devices[_0x32e590][_0xd302c0(0x205)]['reason']+_0xd302c0(0x1d4)+_0x16e897['id'][_0xd302c0(0x378)](-0x8)+'\x20|\x20user:\x20...'+_0x32e590[_0xd302c0(0x378)](-0x8)),_0x11132d[_0xd302c0(0x1e3)](_0x32e590);if(devices[_0x32e590][_0xd302c0(0x205)]['allow']){_0x11132d['join'](_0x262691);if(_0x262691==_0xd302c0(0x312))initializeSocketBotManager(_0x11132d);else initializeSocketBot(_0x11132d);initClient(_0x262691);}devices[_0x32e590]['access'][_0xd302c0(0x277)]&&devices[_0x32e590][_0xd302c0(0x205)][_0xd302c0(0x233)]==_0xd302c0(0x2cc)&&setSessionTimeout(_0xd302c0(0x1eb),_0x32e590),devices[_0x32e590]['access']['token']&&devices[_0x32e590][_0xd302c0(0x205)][_0xd302c0(0x233)]==_0xd302c0(0x244)&&setSessionTimeout(_0xd302c0(0x256),_0x32e590),_0x11132d[_0xd302c0(0x311)](_0xd302c0(0x264),{'status':_0x16e897[_0xd302c0(0x281)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x32e590][_0xd302c0(0x205)],'externalip':devices[_0x32e590]['ip'],'publicKey':secure[_0xd302c0(0x217)],'userid':settings[_0xd302c0(0x1f5)],'validInstallation':validInstallation}),devices[_0x32e590][_0xd302c0(0x205)][_0xd302c0(0x343)]==![]&&devices[_0x32e590][_0xd302c0(0x205)]['reason']==_0xd302c0(0x299)&&temporaryAccess2FA(_0x32e590,devices[_0x32e590]['ip']);}function setSessionTimeout(_0x13244c,_0x37f3c5){const _0x14dbd9=_0x293b13;let _0x313fef;if(_0x13244c=='login')_0x313fef=loginExpiry*0x3c*0x3e8;else _0x313fef=devices[_0x37f3c5][_0x14dbd9(0x317)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x37f3c5][_0x14dbd9(0x317)]['timestamp']);if(devices[_0x37f3c5][_0x14dbd9(0x38b)])clearTimeout(devices[_0x37f3c5][_0x14dbd9(0x38b)]);devices[_0x37f3c5][_0x14dbd9(0x38b)]=setTimeout(()=>{const _0x14906f=_0x14dbd9;if(devices[_0x37f3c5][_0x14906f(0x366)])clearTimeout(devices[_0x37f3c5][_0x14906f(0x366)]);removeSocketListeners(_0x37f3c5),addBlacklist(_0x37f3c5),devices[_0x37f3c5][_0x14906f(0x317)]=null,devices[_0x37f3c5][_0x14906f(0x1f4)]=null,devices[_0x37f3c5][_0x14906f(0x205)][_0x14906f(0x277)]=null,logger[_0x14906f(0x33a)](_0x14906f(0x234)+_0x37f3c5[_0x14906f(0x378)](-0x8)),devices[_0x37f3c5][_0x14906f(0x205)]=validateAccess(devices[_0x37f3c5]['access'][_0x14906f(0x277)],_0x37f3c5),!(devices[_0x37f3c5][_0x14906f(0x205)]['allow']&&devices[_0x37f3c5][_0x14906f(0x205)]['reason']==_0x14906f(0x29f))&&(_0x13244c=='login'?io['to'](_0x37f3c5)[_0x14906f(0x311)](_0x14906f(0x264),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x37f3c5)[_0x14906f(0x311)](_0x14906f(0x264),{'access':{'allow':![],'reason':_0x14906f(0x2b5),'token':null}})),devices[_0x37f3c5][_0x14906f(0x205)][_0x14906f(0x277)]=null;},_0x313fef);}function setTokenRefresh(_0x424029){const _0x134d50=_0x293b13;if(devices[_0x424029][_0x134d50(0x366)])clearTimeout(devices[_0x424029][_0x134d50(0x366)]);devices[_0x424029][_0x134d50(0x366)]=setTimeout(()=>{const _0x49285a=_0x134d50;getClientsWithUuid(_0x424029)[_0x49285a(0x2fd)]!=0x0?(devices[_0x424029][_0x49285a(0x205)]=refreshToken(_0x424029),io['to'](_0x424029)[_0x49285a(0x311)](_0x49285a(0x264),{'status':_0x49285a(0x32e),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x424029]['access'],'externalip':devices[_0x424029]['ip'],'publicKey':secure[_0x49285a(0x217)],'validInstallation':validInstallation}),setTokenRefresh(_0x424029)):clearTimeout(devices[_0x424029][_0x49285a(0x366)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1ce21a){const _0x2c7b4d=_0x293b13,_0x4d004a=getClient(_0x1ce21a['id'])['uuid'];_0x1ce21a['emit'](_0x2c7b4d(0x307),config),_0x1ce21a['emit']('settings',cleanSettings()),_0x1ce21a['on'](_0x2c7b4d(0x32b),_0x2bdd8d=>{const _0x1364d0=_0x2c7b4d;if(validateAccess(_0x2bdd8d,_0x4d004a)[_0x1364d0(0x343)])addBot();else logger[_0x1364d0(0x384)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x1ce21a['on'](_0x2c7b4d(0x2e6),(_0xaee64b,_0x46cca8)=>{const _0x171e6f=_0x2c7b4d;if(validateAccess(_0x46cca8,_0x4d004a)[_0x171e6f(0x343)])toggleBot(_0xaee64b[_0x171e6f(0x334)],_0xaee64b[_0x171e6f(0x264)],_0xaee64b[_0x171e6f(0x353)]);else logger[_0x171e6f(0x384)](_0x171e6f(0x36c));}),_0x1ce21a['on'](_0x2c7b4d(0x305),(_0x5ee58f,_0x5530de)=>{const _0x10606d=_0x2c7b4d;if(validateAccess(_0x5530de,_0x4d004a)[_0x10606d(0x343)])toggleBotMode(_0x5ee58f);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1ce21a['on'](_0x2c7b4d(0x1c7),(_0x26727d,_0x21bcce)=>{const _0x48bb2e=_0x2c7b4d;if(validateAccess(_0x21bcce,_0x4d004a)[_0x48bb2e(0x343)])deleteBot(_0x26727d);else logger[_0x48bb2e(0x384)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x1ce21a['on']('store-settings',(_0x58eb88,_0x22671d)=>{const _0x164b42=_0x2c7b4d;if(validateAccess(_0x22671d,_0x4d004a)[_0x164b42(0x343)])storeSettings(_0x58eb88,!![]);else logger[_0x164b42(0x384)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1ce21a['on'](_0x2c7b4d(0x2f3),_0x15e588=>{const _0x514a48=_0x2c7b4d;if(validateAccess(_0x15e588,_0x4d004a)[_0x514a48(0x343)])updateBB('update');else logger[_0x514a48(0x384)](_0x514a48(0x337));}),_0x1ce21a['on'](_0x2c7b4d(0x1d3),_0x15158a=>{const _0x51b6d3=_0x2c7b4d;if(validateAccess(_0x15158a,_0x4d004a)['allow'])updateBB(_0x51b6d3(0x320));else logger[_0x51b6d3(0x384)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x1ce21a['on'](_0x2c7b4d(0x1ed),_0x12be21=>{const _0x14fbe2=_0x2c7b4d;if(validateAccess(_0x12be21,_0x4d004a)[_0x14fbe2(0x343)]){const _0x1dcb7d=getClient(_0x1ce21a['id']);if(_0x1dcb7d)getBackupFiles(_0x1dcb7d['uuid']);else logger[_0x14fbe2(0x384)](_0x14fbe2(0x333));}else logger['full'](_0x14fbe2(0x1d6));}),_0x1ce21a['on'](_0x2c7b4d(0x2c8),(_0x56fe90,_0x296265)=>{const _0x50c90d=_0x2c7b4d;if(validateAccess(_0x296265,_0x4d004a)['allow'])restoreBackupFile(_0x56fe90);else logger[_0x50c90d(0x384)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x1ce21a['on']('get-messages',_0x3f4e43=>{const _0x463df2=_0x2c7b4d;if(validateAccess(_0x3f4e43,_0x4d004a)[_0x463df2(0x343)])getMessages();else logger[_0x463df2(0x384)](_0x463df2(0x20b));}),_0x1ce21a['on'](_0x2c7b4d(0x216),(_0x34a273,_0x289d44)=>{const _0x4c1304=_0x2c7b4d;if(validateAccess(_0x289d44,_0x4d004a)[_0x4c1304(0x343)])confirmMessage(_0x34a273);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1ce21a['on']('logout',_0x5d3082=>{const _0x52b7e7=_0x2c7b4d;if(validateAccess(_0x5d3082,_0x4d004a)[_0x52b7e7(0x343)]){if(devices[_0x4d004a][_0x52b7e7(0x366)])clearTimeout(devices[_0x4d004a][_0x52b7e7(0x366)]);if(devices[_0x4d004a][_0x52b7e7(0x38b)])clearTimeout(devices[_0x4d004a][_0x52b7e7(0x38b)]);removeSocketListeners(getClient(_0x1ce21a['id'])[_0x52b7e7(0x33c)]),addBlacklist(_0x4d004a),devices[_0x4d004a]['telegramIpApproval']=null,devices[_0x4d004a][_0x52b7e7(0x1f4)]=null,devices[_0x4d004a][_0x52b7e7(0x205)]['token']=null,logger['debug'](_0x52b7e7(0x230)+_0x4d004a[_0x52b7e7(0x378)](-0x8)),io['to'](getClient(_0x1ce21a['id'])[_0x52b7e7(0x33c)])[_0x52b7e7(0x311)]('status',{'access':{'allow':![],'reason':_0x52b7e7(0x27b),'token':null}});}else logger['full'](_0x52b7e7(0x2e5));});}function initializeSocketBot(_0x5e3703){const _0x45fb9e=_0x293b13,_0x43b77b=getClient(_0x5e3703['id'])['bot'],_0x5802c5=getClient(_0x5e3703['id'])['uuid'];_0x5e3703['on'](_0x45fb9e(0x308),(_0x16aca6,_0x286fa7)=>{const _0x7c3e8b=_0x45fb9e;if(validateAccess(_0x286fa7,_0x5802c5)['allow']){if(pid[_0x43b77b])pid[_0x43b77b]['send']({'function':_0x7c3e8b(0x2e8),'args':_0x16aca6});}else logger[_0x7c3e8b(0x384)](_0x7c3e8b(0x283));}),_0x5e3703['on']('delete-alerts',(_0x2f9c3e,_0x2e070f)=>{const _0x276a5a=_0x45fb9e;if(validateAccess(_0x2e070f,_0x5802c5)[_0x276a5a(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b][_0x276a5a(0x1e1)]({'function':_0x276a5a(0x21d),'args':_0x2f9c3e});}else logger['full'](_0x276a5a(0x38a));}),_0x5e3703['on'](_0x45fb9e(0x263),(_0x572ced,_0x84ba9e)=>{const _0x1827db=_0x45fb9e;if(validateAccess(_0x84ba9e,_0x5802c5)[_0x1827db(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b][_0x1827db(0x1e1)]({'function':_0x1827db(0x2a5),'args':_0x572ced});}else logger[_0x1827db(0x384)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5e3703['on'](_0x45fb9e(0x2bf),(_0x4c27a8,_0x3ea5eb)=>{const _0x4806a0=_0x45fb9e;if(validateAccess(_0x3ea5eb,_0x5802c5)[_0x4806a0(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b]['send']({'function':_0x4806a0(0x399),'args':_0x4c27a8});}else logger[_0x4806a0(0x384)](_0x4806a0(0x260));}),_0x5e3703['on'](_0x45fb9e(0x32a),(_0x430908,_0x4ea363)=>{const _0x2fdf3f=_0x45fb9e;if(validateAccess(_0x4ea363,_0x5802c5)['allow']){if(pid[_0x43b77b])pid[_0x43b77b]['send']({'function':'storeHeadless','args':_0x430908});}else logger[_0x2fdf3f(0x384)](_0x2fdf3f(0x259));}),_0x5e3703['on']('store-fiat',(_0x479bb4,_0xea0fe)=>{const _0x36ace9=_0x45fb9e;if(validateAccess(_0xea0fe,_0x5802c5)['allow']){if(pid[_0x43b77b])pid[_0x43b77b][_0x36ace9(0x1e1)]({'function':_0x36ace9(0x275),'args':_0x479bb4});}else logger[_0x36ace9(0x384)](_0x36ace9(0x23c));}),_0x5e3703['on']('reset-history',_0x35d28a=>{const _0x5e5813=_0x45fb9e;if(validateAccess(_0x35d28a,_0x5802c5)['allow']){if(pid[_0x43b77b])pid[_0x43b77b][_0x5e5813(0x1e1)]({'function':'resetHistory','args':null});}else logger['full'](_0x5e5813(0x238));}),_0x5e3703['on'](_0x45fb9e(0x262),_0x3d7fe8=>{const _0x3a74fa=_0x45fb9e;if(validateAccess(_0x3d7fe8,_0x5802c5)[_0x3a74fa(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b]['send']({'function':_0x3a74fa(0x2df),'args':null});}else logger[_0x3a74fa(0x384)](_0x3a74fa(0x351));}),_0x5e3703['on'](_0x45fb9e(0x24e),(_0x1442bb,_0x1e0876)=>{const _0x3443e1=_0x45fb9e;if(validateAccess(_0x1e0876,_0x5802c5)[_0x3443e1(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b]['send']({'function':_0x3443e1(0x28c),'args':_0x1442bb});}else logger[_0x3443e1(0x384)](_0x3443e1(0x385));}),_0x5e3703['on']('cancel-loading',_0x343bec=>{const _0x384518=_0x45fb9e;if(validateAccess(_0x343bec,_0x5802c5)['allow']){if(pid[_0x43b77b])pid[_0x43b77b][_0x384518(0x1e1)]({'function':_0x384518(0x2c3),'args':null});}else logger[_0x384518(0x384)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5e3703['on'](_0x45fb9e(0x29c),_0x463c85=>{const _0x7e0d54=_0x45fb9e;if(validateAccess(_0x463c85,_0x5802c5)[_0x7e0d54(0x343)]){if(pid[_0x43b77b])pid[_0x43b77b][_0x7e0d54(0x1e1)]({'function':_0x7e0d54(0x255),'args':null});}else logger[_0x7e0d54(0x384)](_0x7e0d54(0x212));}),_0x5e3703['on']('update-bb',_0x354ad1=>{const _0x38f79a=_0x45fb9e;if(validateAccess(_0x354ad1,_0x5802c5)[_0x38f79a(0x343)])updateBB('update');else logger['full'](_0x38f79a(0x337));}),_0x5e3703['on'](_0x45fb9e(0x26a),_0x299920=>{const _0x5e1ccf=_0x45fb9e;if(validateAccess(_0x299920,_0x5802c5)[_0x5e1ccf(0x343)])getMessages();else logger[_0x5e1ccf(0x384)](_0x5e1ccf(0x20b));}),_0x5e3703['on'](_0x45fb9e(0x216),(_0xb23527,_0x209ddb)=>{const _0x2ea50f=_0x45fb9e;if(validateAccess(_0x209ddb,_0x5802c5)[_0x2ea50f(0x343)])confirmMessage(_0xb23527);else logger[_0x2ea50f(0x384)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5e3703['on'](_0x45fb9e(0x33f),_0xb65f49=>{const _0x26dca0=_0x45fb9e;if(validateAccess(_0xb65f49,_0x5802c5)[_0x26dca0(0x343)]){if(devices[_0x5802c5][_0x26dca0(0x366)])clearTimeout(devices[_0x5802c5][_0x26dca0(0x366)]);if(devices[_0x5802c5][_0x26dca0(0x38b)])clearTimeout(devices[_0x5802c5][_0x26dca0(0x38b)]);removeSocketListeners(getClient(_0x5e3703['id'])[_0x26dca0(0x33c)]),addBlacklist(_0x5802c5),devices[_0x5802c5][_0x26dca0(0x317)]=null,devices[_0x5802c5]['telegram2FaApproval']=null,devices[_0x5802c5][_0x26dca0(0x205)][_0x26dca0(0x277)]=null,logger[_0x26dca0(0x33a)](_0x26dca0(0x230)+_0x5802c5[_0x26dca0(0x378)](-0x8)),io['to'](getClient(_0x5e3703['id'])[_0x26dca0(0x33c)])[_0x26dca0(0x311)](_0x26dca0(0x264),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x26dca0(0x384)](_0x26dca0(0x2e5));});}function removeSocketListeners(_0x16c185){getClientsWithUuid(_0x16c185)['forEach'](_0x42428b=>{const _0x20e489=_0x18ab;getSocket(_0x42428b['id'])[_0x20e489(0x2d3)]();});}function cleanSettings(){const _0x6331e3=_0x293b13;let _0x4c79c1=settings;return settings[_0x6331e3(0x362)]&&settings[_0x6331e3(0x362)]!=''&&(_0x4c79c1={..._0x4c79c1,'telegramToken':_0x6331e3(0x2d9)}),settings[_0x6331e3(0x388)]&&settings[_0x6331e3(0x388)]!=''&&(_0x4c79c1={..._0x4c79c1,'bbPassword':_0x6331e3(0x2d9)}),(settings['bbPassword']&&settings[_0x6331e3(0x388)]==_0x6331e3(0x2e7)||settings[_0x6331e3(0x362)]&&settings['telegramToken']==_0x6331e3(0x2e7))&&(_0x4c79c1={..._0x4c79c1,'restored':{'password':settings[_0x6331e3(0x388)]==_0x6331e3(0x2e7),'telegram':settings[_0x6331e3(0x362)]==_0x6331e3(0x2e7)}}),_0x4c79c1;}async function updateBB(_0x19dffa){const _0x522f55=_0x293b13;await backupConfigFiles(),installingUpdate=!![],config[_0x522f55(0x23b)](_0x338284=>{restartBot(_0x338284['botID']);});if(_0x19dffa==_0x522f55(0x38d))process[_0x522f55(0x1e1)]({'update':!![],'environment':environment},_0x5e2ce6=>{});else _0x19dffa==_0x522f55(0x320)&&process['send']({'reinstall':!![],'environment':environment},_0x407b0a=>{});}function startBot(_0x2b27c9,_0x328a17,_0x20f228){const _0x21811e=_0x293b13;if(debugging)_0x2b27c9['push']('-d');let _0x3bd46d=![];const _0x5c242c=_0x2b27c9[0x0];_0x328a17={..._0x328a17,'stdio':['inherit',_0x21811e(0x301),_0x21811e(0x301),_0x21811e(0x24f)]},pid[_0x5c242c]=childProcess[_0x21811e(0x2aa)](botfile,_0x2b27c9,_0x328a17),pid[_0x5c242c]['on'](_0x21811e(0x2e9),_0x2598f0=>{const _0x5cb61a=_0x21811e;switch(Object[_0x5cb61a(0x227)](_0x2598f0)[0x0]){case _0x5cb61a(0x248):updateBotName(_0x5c242c,_0x2598f0[_0x5cb61a(0x248)]);break;case _0x5cb61a(0x28a):updateBotManager();break;case _0x5cb61a(0x264):updateStatus(_0x5c242c,_0x2598f0[_0x5cb61a(0x264)]);break;case _0x5cb61a(0x353):updateLive(_0x5c242c,_0x2598f0['live']);break;case _0x5cb61a(0x2d5):updateLive(_0x5c242c,_0x2598f0[_0x5cb61a(0x2d5)]),io['to'](_0x5c242c)[_0x5cb61a(0x311)](_0x5cb61a(0x264),{'access':{'allow':![],'reason':_0x5cb61a(0x270),'token':null}});break;case _0x5cb61a(0x286):_0x2598f0[_0x5cb61a(0x286)]==_0x5cb61a(0x380)&&restartBot(_0x5c242c);_0x2598f0[_0x5cb61a(0x286)]==_0x5cb61a(0x37b)&&toggleBot(_0x5c242c,_0x5cb61a(0x35f),_0x5cb61a(0x36f));break;case _0x5cb61a(0x1de):sendTelegram(_0x5c242c,_0x2598f0[_0x5cb61a(0x1de)]);break;case _0x5cb61a(0x218):sendTelegramMsg(_0x2598f0[_0x5cb61a(0x218)]);break;case _0x5cb61a(0x1db):io['to'](_0x5c242c)[_0x5cb61a(0x311)](_0x2598f0[_0x5cb61a(0x1db)],_0x2598f0[_0x5cb61a(0x38c)]);break;}}),pid[_0x5c242c]['on'](_0x21811e(0x28f),function(_0x23a93b){if(_0x3bd46d)return;_0x3bd46d=!![],_0x20f228(_0x23a93b);}),pid[_0x5c242c]['on']('exit',async function(_0x211a4d){const _0xa46a73=_0x21811e;if(installingUpdate)return;if(_0x3bd46d)return;_0x3bd46d=!![],_0x20f228(null);const _0xd55c=dbConfig['get'](_0xa46a73(0x307))[_0xa46a73(0x338)]({'botID':_0x5c242c})[_0xa46a73(0x36b)]();_0xd55c&&(_0xd55c['status']==_0xa46a73(0x354)||_0xd55c[_0xa46a73(0x264)]==_0xa46a73(0x1e5))&&(await sleep(0x3e8),updateLive(_0x5c242c,'stopped'),logger[_0xa46a73(0x384)]('Restarting\x20Bot\x20'+_0x5c242c),startBot([_0x5c242c,userID],{'cwd':bbpath},function(_0x3f4163){const _0x4e4054=_0xa46a73;if(_0x3f4163)logger[_0x4e4054(0x384)](_0x3f4163);}));});}function stopBot(_0x3e671e){const _0x308a42=_0x293b13;getClientsWithBotID(_0x3e671e)[_0x308a42(0x23b)](_0x3bf506=>{const _0x5b2be7=_0x308a42;getSocket(_0x3bf506['id'])[_0x5b2be7(0x223)](!![]),removeClient(_0x3bf506['id']);}),pid[_0x3e671e]&&(pid[_0x3e671e][_0x308a42(0x37b)](),pid[_0x3e671e]=null);}function restartBot(_0x369efe){const _0xf87540=_0x293b13;if(pid[_0x369efe])pid[_0x369efe][_0xf87540(0x37b)]();}function addBot(){const _0x22afdf=_0x293b13;let _0x351bd8;for(let _0x3d1ecb=0x1;_0x3d1ecb<0x3e9;_0x3d1ecb++){_0x351bd8=_0x3d1ecb[_0x22afdf(0x1c8)]()[_0x22afdf(0x346)](0x3,'0');let _0x20edca=config[_0x22afdf(0x338)](_0x2e252e=>_0x2e252e[_0x22afdf(0x334)]==_0x351bd8);if(!_0x20edca)break;}if(_0x351bd8===_0x22afdf(0x331)){logger[_0x22afdf(0x384)](_0x22afdf(0x292));return;}logger['full'](_0x22afdf(0x392)+_0x351bd8),dbConfig['get'](_0x22afdf(0x307))[_0x22afdf(0x257)]({'botID':_0x351bd8,'botname':_0x22afdf(0x1c9)+_0x351bd8,'status':_0x22afdf(0x1e5),'live':''})[_0x22afdf(0x2d0)](),startBot([_0x351bd8,userID],{'cwd':bbpath},function(_0x3ad0a1){const _0x584299=_0x22afdf;if(_0x3ad0a1)logger[_0x584299(0x384)](_0x3ad0a1);}),config=getConfiguration(),io['to']('botmanager')[_0x22afdf(0x311)](_0x22afdf(0x307),config),broadcastToBots(_0x22afdf(0x307),JSON[_0x22afdf(0x1ca)](config));}function deleteBot(_0x23fdb8){const _0x371769=_0x293b13;getClientsWithBotID(_0x23fdb8)[_0x371769(0x23b)](_0xd7fccb=>{const _0x500c10=_0x371769;getSocket(_0xd7fccb['id'])[_0x500c10(0x223)](!![]),removeClient(_0xd7fccb['id']);}),dbConfig[_0x371769(0x2c6)](_0x371769(0x307))[_0x371769(0x1fa)]({'botID':_0x23fdb8})[_0x371769(0x2d0)](),logger[_0x371769(0x384)](_0x371769(0x202)+_0x23fdb8),stopBot(_0x23fdb8);try{if(fs[_0x371769(0x1fd)](path['join'](configpath,'bot-'+_0x23fdb8+_0x371769(0x39f))))fs['unlinkSync'](path[_0x371769(0x1e3)](configpath,_0x371769(0x33d)+_0x23fdb8+'-config.json'));if(fs[_0x371769(0x1fd)](path[_0x371769(0x1e3)](configpath,_0x371769(0x33d)+_0x23fdb8+_0x371769(0x2d8))))fs[_0x371769(0x344)](path[_0x371769(0x1e3)](configpath,'bot-'+_0x23fdb8+_0x371769(0x2d8)));if(fs[_0x371769(0x1fd)](path[_0x371769(0x1e3)](configpath,'bot-'+_0x23fdb8+_0x371769(0x1fb))))fs['unlinkSync'](path[_0x371769(0x1e3)](configpath,_0x371769(0x33d)+_0x23fdb8+_0x371769(0x1fb)));if(fs[_0x371769(0x1fd)](path[_0x371769(0x1e3)](configpath,'bot-'+_0x23fdb8+'-results.json')))fs['unlinkSync'](path['join'](configpath,'bot-'+_0x23fdb8+'-results.json'));}catch(_0x7be806){if(_0x7be806)logger[_0x371769(0x384)](_0x371769(0x34e),_0x7be806);}config=getConfiguration(),io['to'](_0x371769(0x312))[_0x371769(0x311)](_0x371769(0x307),config),broadcastToBots('bots',JSON[_0x371769(0x1ca)](config));}function toggleBot(_0x5c2079,_0x32de06,_0x2b6efa){const _0x3cd2a5=_0x293b13;dbConfig[_0x3cd2a5(0x2c6)](_0x3cd2a5(0x307))[_0x3cd2a5(0x338)]({'botID':_0x5c2079})[_0x3cd2a5(0x1d7)]({'status':_0x32de06})['assign']({'live':_0x2b6efa})[_0x3cd2a5(0x2d0)]();if(_0x32de06==_0x3cd2a5(0x354)||_0x32de06=='new')logger[_0x3cd2a5(0x384)](_0x3cd2a5(0x315)+_0x5c2079),startBot([_0x5c2079,userID],{'cwd':bbpath},function(_0x5c78e3){const _0x37c922=_0x3cd2a5;if(_0x5c78e3)logger[_0x37c922(0x384)](_0x5c78e3);});else(_0x32de06=='disabled'||_0x32de06==_0x3cd2a5(0x329))&&(logger[_0x3cd2a5(0x384)](_0x3cd2a5(0x1e7)+_0x5c2079),stopBot(_0x5c2079));config=getConfiguration(),io['to'](_0x3cd2a5(0x312))[_0x3cd2a5(0x311)]('bots',config),broadcastToBots('bots',JSON[_0x3cd2a5(0x1ca)](config));}function toggleStatus(_0x33ebd9){const _0x211ef7=_0x293b13;let _0x3b2373=dbConfig[_0x211ef7(0x2c6)](_0x211ef7(0x307))[_0x211ef7(0x338)]({'botID':_0x33ebd9})[_0x211ef7(0x36b)](),_0x461cb9;if(_0x3b2373[_0x211ef7(0x264)]===_0x211ef7(0x354))_0x461cb9=_0x211ef7(0x35f);else{if(_0x3b2373[_0x211ef7(0x264)]===_0x211ef7(0x1e5))_0x461cb9=_0x211ef7(0x329);else{if(_0x3b2373[_0x211ef7(0x264)]==='new-disabled')_0x461cb9='new';else{if(_0x3b2373[_0x211ef7(0x264)]===_0x211ef7(0x35f))_0x461cb9=_0x211ef7(0x354);}}}return _0x461cb9;}function updateStatus(_0x24385d,_0x2efb1d){const _0x397e2d=_0x293b13;dbConfig[_0x397e2d(0x2c6)]('bots')[_0x397e2d(0x338)]({'botID':_0x24385d})[_0x397e2d(0x1d7)]({'status':_0x2efb1d})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x397e2d(0x311)](_0x397e2d(0x307),config),broadcastToBots(_0x397e2d(0x307),JSON['stringify'](config));}function updateLive(_0x4906a4,_0x1404db){const _0x2ac974=_0x293b13;dbConfig[_0x2ac974(0x2c6)](_0x2ac974(0x307))['find']({'botID':_0x4906a4})[_0x2ac974(0x1d7)]({'live':_0x1404db})[_0x2ac974(0x2d0)](),config=getConfiguration(),io['to'](_0x2ac974(0x312))['emit'](_0x2ac974(0x307),config),broadcastToBots('bots',JSON[_0x2ac974(0x1ca)](config));}function updateBotName(_0x437ea2,_0x3a21bd){const _0x10b14c=_0x293b13;dbConfig[_0x10b14c(0x2c6)](_0x10b14c(0x307))[_0x10b14c(0x338)]({'botID':_0x437ea2})['assign']({'botname':_0x3a21bd})[_0x10b14c(0x2d0)](),config=getConfiguration(),io['to'](_0x10b14c(0x312))[_0x10b14c(0x311)](_0x10b14c(0x307),config),broadcastToBots(_0x10b14c(0x307),JSON[_0x10b14c(0x1ca)](config));}function updateBotManager(){const _0x802d5b=_0x293b13;config=getConfiguration(),io['to'](_0x802d5b(0x312))['emit']('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x545d59){const _0x5cfc55=_0x293b13;if(pid[_0x545d59])pid[_0x545d59][_0x5cfc55(0x1e1)]({'function':_0x5cfc55(0x2dc),'args':null});else{const _0x1c989b=configpath+'bot-'+_0x545d59+'-config.json',_0x4dcf77=fs['readFileSync'](_0x1c989b),_0x431b9e=JSON[_0x5cfc55(0x39d)](_0x4dcf77),_0x1dfc09=_0x431b9e[_0x5cfc55(0x214)][0x0][_0x5cfc55(0x2f9)];_0x431b9e[_0x5cfc55(0x214)][0x0]['headless']=!_0x1dfc09;const _0x3804d0=JSON['stringify'](_0x431b9e,null,0x2);fs[_0x5cfc55(0x2c9)](_0x1c989b,_0x3804d0),config=getConfiguration(),io['to'](_0x5cfc55(0x312))[_0x5cfc55(0x311)]('bots',config),broadcastToBots(_0x5cfc55(0x307),JSON[_0x5cfc55(0x1ca)](config));}}function telegramError(_0x612c9e){const _0x4e121b=_0x293b13;logger['simple'](getTimeStamp()+_0x4e121b(0x27c));}function validateTelegram(_0x4bfd17){const _0x232825=_0x293b13;if(_0x4bfd17[_0x232825(0x345)][_0x232825(0x347)]!=settings['telegramUsername']&&'@'+_0x4bfd17[_0x232825(0x345)][_0x232825(0x347)]!=settings[_0x232825(0x1f6)])return tgBot[_0x232825(0x324)](_0x4bfd17[_0x232825(0x310)]['id'],_0x232825(0x335),{'parse_mode':_0x232825(0x323)})[_0x232825(0x2c0)](_0x23c07a=>{telegramError(_0x23c07a);}),![];return!![];}async function initTelegram(){const _0x1edd7f=_0x293b13;if(tgBot)tgBot[_0x1edd7f(0x1fe)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1edd7f(0x362)],{'polling':!![]});let _0x4d7b48='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x4d7b48+='\x0a',_0x4d7b48+='/enable\x20-\x20enable\x20notifications\x0a',_0x4d7b48+=_0x1edd7f(0x229),_0x4d7b48+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x4d7b48+=_0x1edd7f(0x1f7),_0x4d7b48+=_0x1edd7f(0x289),_0x4d7b48+=_0x1edd7f(0x273),_0x4d7b48+=_0x1edd7f(0x2e2),_0x4d7b48+=_0x1edd7f(0x376),_0x4d7b48+=_0x1edd7f(0x34d),_0x4d7b48+=_0x1edd7f(0x381),_0x4d7b48+=_0x1edd7f(0x2a2),_0x4d7b48+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x4d7b48+=_0x1edd7f(0x2ba),_0x4d7b48+=_0x1edd7f(0x390);let _0x136db1=_0x1edd7f(0x368);_0x136db1+='\x0a',_0x136db1+=_0x4d7b48,tgBot[_0x1edd7f(0x24b)](/\/start/,_0xaf418a=>{const _0x16d4f4=_0x1edd7f;if(!validateTelegram(_0xaf418a))return;if(settings[_0x16d4f4(0x31e)]!=_0xaf418a[_0x16d4f4(0x310)]['id'])updateSetting(_0x16d4f4(0x31e),_0xaf418a[_0x16d4f4(0x310)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x16d4f4(0x324)](_0xaf418a[_0x16d4f4(0x310)]['id'],_0x136db1)[_0x16d4f4(0x2c0)](_0x299d1d=>{telegramError(_0x299d1d);});}),tgBot[_0x1edd7f(0x24b)](/\/enable/,_0x796d80=>{const _0x518412=_0x1edd7f;if(!validateTelegram(_0x796d80))return;if(settings[_0x518412(0x31e)]!=_0x796d80[_0x518412(0x310)]['id'])updateSetting(_0x518412(0x31e),_0x796d80[_0x518412(0x310)]['id']);updateSetting(_0x518412(0x23a),!![]),tgBot[_0x518412(0x324)](_0x796d80[_0x518412(0x310)]['id'],_0x518412(0x219))[_0x518412(0x2c0)](_0x5d250c=>{telegramError(_0x5d250c);});}),tgBot[_0x1edd7f(0x24b)](/\/config/,async _0x530fd7=>{const _0x2829d9=_0x1edd7f;if(!validateTelegram(_0x530fd7))return;tgBot[_0x2829d9(0x2cb)](_0x2829d9(0x393)),tgBot['sendMessage'](_0x530fd7[_0x2829d9(0x310)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2829d9(0x2a0),'callback_data':_0x2829d9(0x2b2)},{'text':_0x2829d9(0x2b3),'callback_data':_0x2829d9(0x37f)},{'text':_0x2829d9(0x27d),'callback_data':_0x2829d9(0x293)}]]}})[_0x2829d9(0x2c0)](_0x45103f=>{telegramError(_0x45103f);}),tgBot['on'](_0x2829d9(0x393),async _0x2eb79a=>{const _0x1424c5=_0x2829d9,_0x39730f=_0x2eb79a[_0x1424c5(0x394)],_0x16cce2=_0x2eb79a[_0x1424c5(0x2e9)];tgBot[_0x1424c5(0x357)](_0x2eb79a['id'])[_0x1424c5(0x284)](async()=>{const _0x244fcf=_0x1424c5;_0x39730f==_0x244fcf(0x2b2)&&(updateSetting('telegramEvents',_0x244fcf(0x2b2)),updateSetting(_0x244fcf(0x23a),!![]),await tgBot[_0x244fcf(0x324)](_0x16cce2['chat']['id'],_0x244fcf(0x22a))[_0x244fcf(0x2c0)](_0x54f280=>{telegramError(_0x54f280);}));_0x39730f==_0x244fcf(0x37f)&&(updateSetting(_0x244fcf(0x22c),_0x244fcf(0x37f)),updateSetting(_0x244fcf(0x23a),!![]),await tgBot['sendMessage'](_0x16cce2[_0x244fcf(0x310)]['id'],_0x244fcf(0x294))[_0x244fcf(0x2c0)](_0x2152e9=>{telegramError(_0x2152e9);}));_0x39730f==_0x244fcf(0x293)&&(updateSetting('telegramEvents','all'),updateSetting(_0x244fcf(0x23a),!![]),await tgBot[_0x244fcf(0x324)](_0x16cce2[_0x244fcf(0x310)]['id'],_0x244fcf(0x361))[_0x244fcf(0x2c0)](_0x2d85e6=>{telegramError(_0x2d85e6);}));if(!settings['telegramChatId'])tgBot[_0x244fcf(0x324)](_0x16cce2[_0x244fcf(0x310)]['id'],_0x244fcf(0x2b1))[_0x244fcf(0x2c0)](_0x4c681a=>{telegramError(_0x4c681a);});}),tgBot['removeListener'](_0x1424c5(0x393));});}),tgBot['onText'](/\/status/,_0x14599f=>{const _0x126059=_0x1edd7f;if(!validateTelegram(_0x14599f))return;const _0xea76a3=getBotsWithMode();let _0x4c7f5f=_0x126059(0x204);config[_0x126059(0x23b)](_0x1c0c48=>{const _0x248fb5=_0x126059,_0x43090a=_0xea76a3['find'](_0x3ceef0=>_0x3ceef0['botID']==_0x1c0c48[_0x248fb5(0x334)])['mode'];_0x4c7f5f+=_0x248fb5(0x1c9)+_0x1c0c48[_0x248fb5(0x334)]+':\x20'+_0x1c0c48[_0x248fb5(0x264)]+'\x20|\x20'+_0x43090a+_0x248fb5(0x2ee)+_0x1c0c48[_0x248fb5(0x353)]+'\x0a';}),_0x4c7f5f+='\x0a',_0x4c7f5f+=_0x126059(0x302),_0x4c7f5f+=!settings[_0x126059(0x23a)]?_0x126059(0x26e):'Notifications\x20enabled\x0a',_0x4c7f5f+=settings['telegramEnabled']?settings['telegramEvents']==_0x126059(0x293)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x126059(0x232)+settings['telegramEvents']+_0x126059(0x2e3):'',tgBot['sendMessage'](_0x14599f['chat']['id'],_0x4c7f5f,{'parse_mode':_0x126059(0x323)})['catch'](_0x4dba2c=>{telegramError(_0x4dba2c);});}),tgBot[_0x1edd7f(0x24b)](/\/restart/,_0xacd088=>{const _0x9e2074=_0x1edd7f;if(!validateTelegram(_0xacd088))return;tgBot[_0x9e2074(0x2cb)]('callback_query');const _0xe0beea=getEnabledBots();if(_0xe0beea[_0x9e2074(0x2fd)]==0x0)tgBot[_0x9e2074(0x324)](_0xacd088[_0x9e2074(0x310)]['id'],_0x9e2074(0x240))[_0x9e2074(0x2c0)](_0x2b0176=>{telegramError(_0x2b0176);});else{if(_0xe0beea[_0x9e2074(0x2fd)]>0x1)_0xe0beea[_0x9e2074(0x257)]({'botID':'all'});let _0xaedff4=[],_0x279fbb=[];const _0x10fd28=_0xe0beea[_0x9e2074(0x2fd)]%0x4==0x0||_0xe0beea['length']%0x4==0x3||_0xe0beea[_0x9e2074(0x2fd)]%0x3==0x1?0x4:0x3;let _0x7c507a=0x0;_0xe0beea[_0x9e2074(0x23b)]((_0x330232,_0x59e3ad)=>{const _0x4f8f1a=_0x9e2074;if(_0x59e3ad%_0x10fd28==0x0)_0x279fbb=[];_0x279fbb[_0x4f8f1a(0x257)]({'text':_0x330232[_0x4f8f1a(0x334)]==_0x4f8f1a(0x293)?_0x4f8f1a(0x2ad):'Bot\x20'+_0x330232[_0x4f8f1a(0x334)],'callback_data':_0x330232[_0x4f8f1a(0x334)]}),_0x59e3ad%_0x10fd28==0x0&&(_0xaedff4[_0x7c507a]=_0x279fbb,_0x7c507a++);}),tgBot['sendMessage'](_0xacd088[_0x9e2074(0x310)]['id'],_0x9e2074(0x387),{'reply_markup':{'inline_keyboard':_0xaedff4}})[_0x9e2074(0x2c0)](_0x524d42=>{telegramError(_0x524d42);}),tgBot['on'](_0x9e2074(0x393),async _0x5967ba=>{const _0x376115=_0x9e2074,_0x1d35e1=_0x5967ba[_0x376115(0x394)],_0x143be6=_0x5967ba[_0x376115(0x2e9)];tgBot[_0x376115(0x357)](_0x5967ba['id'])[_0x376115(0x284)](async()=>{const _0x22e2f1=_0x376115;_0x1d35e1=='all'?config[_0x22e2f1(0x23b)](_0x301bc9=>{const _0xe861f=_0x22e2f1;restartBot(_0x301bc9[_0xe861f(0x334)]);}):restartBot(_0x1d35e1);}),tgBot[_0x376115(0x2cb)](_0x376115(0x393));});}}),tgBot['onText'](/\/on/,_0x4bd370=>{const _0x50d851=_0x1edd7f;if(!validateTelegram(_0x4bd370))return;tgBot['removeListener']('callback_query');const _0x113436=getDisabledBots();if(_0x113436['length']==0x0)tgBot['sendMessage'](_0x4bd370['chat']['id'],_0x50d851(0x397))[_0x50d851(0x2c0)](_0x51c608=>{telegramError(_0x51c608);});else{if(_0x113436[_0x50d851(0x2fd)]>0x1)_0x113436[_0x50d851(0x257)]({'botID':_0x50d851(0x293)});let _0x1191bd=[],_0x30db81=[];const _0x2b6616=_0x113436['length']%0x4==0x0||_0x113436[_0x50d851(0x2fd)]%0x4==0x3||_0x113436[_0x50d851(0x2fd)]%0x3==0x1?0x4:0x3;let _0x3e3c5d=0x0;_0x113436[_0x50d851(0x23b)]((_0x3b61d6,_0x2eaee6)=>{const _0x345008=_0x50d851;if(_0x2eaee6%_0x2b6616==0x0)_0x30db81=[];_0x30db81[_0x345008(0x257)]({'text':_0x3b61d6['botID']==_0x345008(0x293)?_0x345008(0x2ad):_0x345008(0x1c9)+_0x3b61d6['botID'],'callback_data':_0x3b61d6[_0x345008(0x334)]}),_0x2eaee6%_0x2b6616==0x0&&(_0x1191bd[_0x3e3c5d]=_0x30db81,_0x3e3c5d++);}),tgBot['sendMessage'](_0x4bd370[_0x50d851(0x310)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x1191bd}})['catch'](_0x205476=>{telegramError(_0x205476);}),tgBot['on']('callback_query',async _0x4e584a=>{const _0x3ffe90=_0x50d851,_0x3cff92=_0x4e584a[_0x3ffe90(0x394)],_0x37e51f=_0x4e584a[_0x3ffe90(0x2e9)];tgBot['answerCallbackQuery'](_0x4e584a['id'])[_0x3ffe90(0x284)](async()=>{const _0x1dd1bd=_0x3ffe90;_0x3cff92=='all'?(tgBot['sendMessage'](_0x37e51f['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x1dd1bd(0x2c0)](_0x5d1fb9=>{telegramError(_0x5d1fb9);}),_0x113436['forEach'](_0x7259f6=>{const _0xd801f3=_0x1dd1bd;if(_0x7259f6[_0xd801f3(0x334)]!='all')toggleBot(_0x7259f6['botID'],toggleStatus(_0x7259f6[_0xd801f3(0x334)]),'stopped');})):(tgBot[_0x1dd1bd(0x324)](_0x37e51f['chat']['id'],_0x1dd1bd(0x285)+_0x3cff92)[_0x1dd1bd(0x2c0)](_0x2f94a2=>{telegramError(_0x2f94a2);}),toggleBot(_0x3cff92,toggleStatus(_0x3cff92),_0x1dd1bd(0x36f)));}),tgBot[_0x3ffe90(0x2cb)](_0x3ffe90(0x393));});}}),tgBot[_0x1edd7f(0x24b)](/\/off/,_0x1daba0=>{const _0x587fd0=_0x1edd7f;if(!validateTelegram(_0x1daba0))return;tgBot[_0x587fd0(0x2cb)]('callback_query');const _0x1e66a7=getEnabledBots();if(_0x1e66a7['length']==0x0)tgBot['sendMessage'](_0x1daba0[_0x587fd0(0x310)]['id'],_0x587fd0(0x240))[_0x587fd0(0x2c0)](_0x3464db=>{telegramError(_0x3464db);});else{if(_0x1e66a7[_0x587fd0(0x2fd)]>0x1)_0x1e66a7[_0x587fd0(0x257)]({'botID':_0x587fd0(0x293)});let _0x1b63b6=[],_0x5298ef=[];const _0x4331ce=_0x1e66a7[_0x587fd0(0x2fd)]%0x4==0x0||_0x1e66a7[_0x587fd0(0x2fd)]%0x4==0x3||_0x1e66a7[_0x587fd0(0x2fd)]%0x3==0x1?0x4:0x3;let _0x420ff7=0x0;_0x1e66a7[_0x587fd0(0x23b)]((_0x38c1c9,_0x1db210)=>{const _0x3be5a3=_0x587fd0;if(_0x1db210%_0x4331ce==0x0)_0x5298ef=[];_0x5298ef[_0x3be5a3(0x257)]({'text':_0x38c1c9[_0x3be5a3(0x334)]==_0x3be5a3(0x293)?_0x3be5a3(0x2ad):_0x3be5a3(0x1c9)+_0x38c1c9[_0x3be5a3(0x334)],'callback_data':_0x38c1c9[_0x3be5a3(0x334)]}),_0x1db210%_0x4331ce==0x0&&(_0x1b63b6[_0x420ff7]=_0x5298ef,_0x420ff7++);}),tgBot['sendMessage'](_0x1daba0['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x1b63b6}})[_0x587fd0(0x2c0)](_0x202ae1=>{telegramError(_0x202ae1);}),tgBot['on']('callback_query',async _0x19fe41=>{const _0x1f26dc=_0x587fd0,_0x2bc982=_0x19fe41[_0x1f26dc(0x394)],_0x36dcf6=_0x19fe41[_0x1f26dc(0x2e9)];tgBot[_0x1f26dc(0x357)](_0x19fe41['id'])[_0x1f26dc(0x284)](async()=>{const _0x653328=_0x1f26dc;_0x2bc982==_0x653328(0x293)?(tgBot['sendMessage'](_0x36dcf6[_0x653328(0x310)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x653328(0x2c0)](_0x51fd8f=>{telegramError(_0x51fd8f);}),_0x1e66a7[_0x653328(0x23b)](_0x177d95=>{const _0x44244e=_0x653328;if(_0x177d95['botID']!=_0x44244e(0x293))toggleBot(_0x177d95[_0x44244e(0x334)],toggleStatus(_0x177d95[_0x44244e(0x334)]),_0x44244e(0x36f));})):(tgBot[_0x653328(0x324)](_0x36dcf6[_0x653328(0x310)]['id'],_0x653328(0x369)+_0x2bc982)['catch'](_0x19c58e=>{telegramError(_0x19c58e);}),toggleBot(_0x2bc982,toggleStatus(_0x2bc982),'stopped'));}),tgBot[_0x1f26dc(0x2cb)](_0x1f26dc(0x393));});}}),tgBot[_0x1edd7f(0x24b)](/\/metrics/,_0x285e19=>{const _0x11f0c4=_0x1edd7f;if(!validateTelegram(_0x285e19))return;tgBot[_0x11f0c4(0x2cb)](_0x11f0c4(0x393));const _0x4d73d9=getEnabledBots();if(_0x4d73d9[_0x11f0c4(0x2fd)]==0x0)tgBot[_0x11f0c4(0x324)](_0x285e19[_0x11f0c4(0x310)]['id'],_0x11f0c4(0x240))[_0x11f0c4(0x2c0)](_0x76e41b=>{telegramError(_0x76e41b);});else{if(_0x4d73d9['length']>0x1){let _0x25b407=[],_0x1f28cf=[];const _0x183869=_0x4d73d9[_0x11f0c4(0x2fd)]%0x4==0x0||_0x4d73d9['length']%0x4==0x3||_0x4d73d9['length']%0x3==0x1?0x4:0x3;let _0x32a3ed=0x0;_0x4d73d9[_0x11f0c4(0x23b)]((_0x6ea3a1,_0x3e6371)=>{const _0x16366d=_0x11f0c4;if(_0x3e6371%_0x183869==0x0)_0x1f28cf=[];_0x1f28cf[_0x16366d(0x257)]({'text':_0x16366d(0x1c9)+_0x6ea3a1['botID'],'callback_data':_0x6ea3a1[_0x16366d(0x334)]}),_0x3e6371%_0x183869==0x0&&(_0x25b407[_0x32a3ed]=_0x1f28cf,_0x32a3ed++);}),tgBot[_0x11f0c4(0x324)](_0x285e19[_0x11f0c4(0x310)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x25b407}})[_0x11f0c4(0x2c0)](_0x40751c=>{telegramError(_0x40751c);}),tgBot['on'](_0x11f0c4(0x393),async _0x156a2d=>{const _0x1aa3dd=_0x11f0c4,_0x565def=_0x156a2d[_0x1aa3dd(0x394)],_0x297300=_0x156a2d[_0x1aa3dd(0x2e9)];tgBot['answerCallbackQuery'](_0x156a2d['id'])[_0x1aa3dd(0x284)](async()=>{const _0x5efe01=_0x1aa3dd;if(pid[_0x565def])pid[_0x565def][_0x5efe01(0x1e1)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x1aa3dd(0x2cb)]('callback_query');});}else{const _0x143ecd=_0x4d73d9[0x0][_0x11f0c4(0x334)];if(pid[_0x143ecd])pid[_0x143ecd][_0x11f0c4(0x1e1)]({'function':_0x11f0c4(0x295),'args':null});}}}),tgBot[_0x1edd7f(0x24b)](/\/portfolio/,_0x35b43a=>{const _0x455c31=_0x1edd7f;if(!validateTelegram(_0x35b43a))return;tgBot['removeListener'](_0x455c31(0x393));const _0x551b78=getEnabledBots();if(_0x551b78[_0x455c31(0x2fd)]==0x0)tgBot[_0x455c31(0x324)](_0x35b43a[_0x455c31(0x310)]['id'],_0x455c31(0x240))[_0x455c31(0x2c0)](_0x4ad82a=>{telegramError(_0x4ad82a);});else{if(_0x551b78[_0x455c31(0x2fd)]>0x1){let _0x1c321f=[],_0x3bd0d4=[];const _0x3bdfdd=_0x551b78[_0x455c31(0x2fd)]%0x4==0x0||_0x551b78[_0x455c31(0x2fd)]%0x4==0x3||_0x551b78[_0x455c31(0x2fd)]%0x3==0x1?0x4:0x3;let _0x24f647=0x0;_0x551b78[_0x455c31(0x23b)]((_0x12df1d,_0x53c8a3)=>{const _0xf96620=_0x455c31;if(_0x53c8a3%_0x3bdfdd==0x0)_0x3bd0d4=[];_0x3bd0d4['push']({'text':_0xf96620(0x1c9)+_0x12df1d['botID'],'callback_data':_0x12df1d[_0xf96620(0x334)]}),_0x53c8a3%_0x3bdfdd==0x0&&(_0x1c321f[_0x24f647]=_0x3bd0d4,_0x24f647++);}),tgBot[_0x455c31(0x324)](_0x35b43a[_0x455c31(0x310)]['id'],_0x455c31(0x2fb),{'reply_markup':{'inline_keyboard':_0x1c321f}})[_0x455c31(0x2c0)](_0x5062e9=>{telegramError(_0x5062e9);}),tgBot['on'](_0x455c31(0x393),async _0x199d61=>{const _0x5c9047=_0x455c31,_0x245f4d=_0x199d61[_0x5c9047(0x394)],_0xbb759d=_0x199d61[_0x5c9047(0x2e9)];tgBot['answerCallbackQuery'](_0x199d61['id'])[_0x5c9047(0x284)](async()=>{const _0x41178f=_0x5c9047;if(pid[_0x245f4d])pid[_0x245f4d][_0x41178f(0x1e1)]({'function':_0x41178f(0x269),'args':null});}),tgBot[_0x5c9047(0x2cb)](_0x5c9047(0x393));});}else{const _0x4d7b59=_0x551b78[0x0][_0x455c31(0x334)];if(pid[_0x4d7b59])pid[_0x4d7b59][_0x455c31(0x1e1)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x1edd7f(0x24b)](/\/update/,async _0x750789=>{const _0x2586a8=_0x1edd7f;if(!validateTelegram(_0x750789))return;tgBot[_0x2586a8(0x2cb)](_0x2586a8(0x393)),await getMessages();if(!updateAvailable)tgBot[_0x2586a8(0x324)](_0x750789['chat']['id'],_0x2586a8(0x2d7))[_0x2586a8(0x2c0)](_0x4f7f0d=>{telegramError(_0x4f7f0d);});else!validInstallation?tgBot[_0x2586a8(0x324)](_0x750789['chat']['id'],_0x2586a8(0x1f3))['catch'](_0x57368d=>{telegramError(_0x57368d);}):(tgBot[_0x2586a8(0x324)](_0x750789[_0x2586a8(0x310)]['id'],_0x2586a8(0x306),{'reply_markup':{'inline_keyboard':[[{'text':_0x2586a8(0x370),'callback_data':_0x2586a8(0x39e)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x198df7=>{telegramError(_0x198df7);}),tgBot['on'](_0x2586a8(0x393),async _0x95874f=>{const _0x277a46=_0x2586a8,_0x2fcad3=_0x95874f[_0x277a46(0x394)],_0x224146=_0x95874f[_0x277a46(0x2e9)];tgBot['answerCallbackQuery'](_0x95874f['id'])[_0x277a46(0x284)](async()=>{const _0x20f724=_0x277a46;_0x2fcad3==_0x20f724(0x39e)&&(await tgBot[_0x20f724(0x324)](_0x224146['chat']['id'],_0x20f724(0x2ed))[_0x20f724(0x2c0)](_0x489339=>{telegramError(_0x489339);}),updateBB(_0x20f724(0x38d))),_0x2fcad3=='no'&&await tgBot[_0x20f724(0x324)](_0x224146[_0x20f724(0x310)]['id'],_0x20f724(0x25e))['catch'](_0x108eb6=>{telegramError(_0x108eb6);});}),tgBot[_0x277a46(0x2cb)](_0x277a46(0x393));}));}),tgBot[_0x1edd7f(0x24b)](/\/reinstall/,async _0x9ccc71=>{const _0x71dc48=_0x1edd7f;if(!validateTelegram(_0x9ccc71))return;tgBot[_0x71dc48(0x2cb)](_0x71dc48(0x393)),!validInstallation?tgBot[_0x71dc48(0x324)](_0x9ccc71[_0x71dc48(0x310)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0x71dc48(0x2c0)](_0xba50d9=>{telegramError(_0xba50d9);}):(tgBot[_0x71dc48(0x324)](_0x9ccc71['chat']['id'],_0x71dc48(0x241),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x71dc48(0x39e)},{'text':'No','callback_data':'no'}]]}})[_0x71dc48(0x2c0)](_0x51a878=>{telegramError(_0x51a878);}),tgBot['on'](_0x71dc48(0x393),async _0xdfba0b=>{const _0x23adea=_0x71dc48,_0x55ea1f=_0xdfba0b['data'],_0x450d9a=_0xdfba0b[_0x23adea(0x2e9)];tgBot[_0x23adea(0x357)](_0xdfba0b['id'])[_0x23adea(0x284)](async()=>{const _0x5aef2e=_0x23adea;_0x55ea1f==_0x5aef2e(0x39e)&&(await tgBot['sendMessage'](_0x450d9a[_0x5aef2e(0x310)]['id'],_0x5aef2e(0x2fa))[_0x5aef2e(0x2c0)](_0x3638d7=>{telegramError(_0x3638d7);}),updateBB(_0x5aef2e(0x320))),_0x55ea1f=='no'&&await tgBot['sendMessage'](_0x450d9a['chat']['id'],_0x5aef2e(0x1cb))['catch'](_0x5a323f=>{telegramError(_0x5a323f);});}),tgBot['removeListener'](_0x23adea(0x393));}));}),tgBot[_0x1edd7f(0x24b)](/\/toggle/,_0x5ee79b=>{const _0x429f04=_0x1edd7f;if(!validateTelegram(_0x5ee79b))return;tgBot[_0x429f04(0x2cb)]('callback_query');const _0x3aed9f=getBotsWithMode();if(_0x3aed9f[_0x429f04(0x2fd)]==0x0)tgBot[_0x429f04(0x324)](_0x5ee79b[_0x429f04(0x310)]['id'],_0x429f04(0x240))[_0x429f04(0x2c0)](_0x2159f7=>{telegramError(_0x2159f7);});else{let _0x146c79=[],_0x488aea=[];const _0x40fd15=0x2;let _0x67812b=0x0;_0x3aed9f['forEach']((_0xd509e3,_0x228105)=>{const _0x3d0e43=_0x429f04;if(_0x228105%_0x40fd15==0x0)_0x488aea=[];_0x488aea['push']({'text':_0x3d0e43(0x1c9)+_0xd509e3[_0x3d0e43(0x334)]+'\x20('+_0xd509e3['mode']+')','callback_data':_0xd509e3[_0x3d0e43(0x334)]}),_0x228105%_0x40fd15==0x0&&(_0x146c79[_0x67812b]=_0x488aea,_0x67812b++);}),tgBot[_0x429f04(0x324)](_0x5ee79b[_0x429f04(0x310)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x146c79}})[_0x429f04(0x2c0)](_0x176e03=>{telegramError(_0x176e03);}),tgBot['on'](_0x429f04(0x393),async _0x5d92d1=>{const _0x5440bb=_0x429f04,_0x56a474=_0x5d92d1['data'],_0x4dba2a=_0x5d92d1[_0x5440bb(0x2e9)];tgBot['answerCallbackQuery'](_0x5d92d1['id'])[_0x5440bb(0x284)](async()=>{const _0x27e92e=_0x5440bb,_0x279942=_0x3aed9f[_0x27e92e(0x338)](_0x37acb3=>_0x37acb3[_0x27e92e(0x334)]==_0x56a474),_0x11e7c0=_0x279942['mode']==_0x27e92e(0x30e)?_0x27e92e(0x2db):'auto';tgBot['sendMessage'](_0x4dba2a[_0x27e92e(0x310)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x56a474+_0x27e92e(0x303)+_0x11e7c0+_0x27e92e(0x26b))[_0x27e92e(0x2c0)](_0x560f50=>{telegramError(_0x560f50);}),toggleBotMode(_0x56a474);}),tgBot[_0x5440bb(0x2cb)]('callback_query');});}}),tgBot[_0x1edd7f(0x24b)](/\/names/,_0x542be7=>{const _0x429993=_0x1edd7f;if(!validateTelegram(_0x542be7))return;let _0x271ecc='';config[_0x429993(0x23b)](_0xb38c1a=>{const _0xe2c594=_0x429993;_0x271ecc+=_0xe2c594(0x1c9)+_0xb38c1a[_0xe2c594(0x334)]+':\x20'+_0xb38c1a[_0xe2c594(0x248)]+'\x0a';}),tgBot[_0x429993(0x324)](_0x542be7['chat']['id'],_0x271ecc,{'parse_mode':'HTML'})[_0x429993(0x2c0)](_0x36e528=>{telegramError(_0x36e528);});}),tgBot[_0x1edd7f(0x24b)](/\/disable/,_0x2feaca=>{const _0x46fb3d=_0x1edd7f;if(!validateTelegram(_0x2feaca))return;tgBot[_0x46fb3d(0x324)](_0x2feaca[_0x46fb3d(0x310)]['id'],_0x46fb3d(0x200))['catch'](_0x4735e=>{telegramError(_0x4735e);}),updateSetting(_0x46fb3d(0x23a),![]);}),tgBot[_0x1edd7f(0x24b)](/\/help/,_0x4a8bd0=>{const _0x60a9a6=_0x1edd7f;if(!validateTelegram(_0x4a8bd0))return;tgBot[_0x60a9a6(0x324)](_0x4a8bd0[_0x60a9a6(0x310)]['id'],_0x4d7b48)['catch'](_0x10b4c4=>{telegramError(_0x10b4c4);});}),tgBot['on'](_0x1edd7f(0x2c4),_0x58c455=>{const _0x5d19da=_0x1edd7f;_0x58c455['toString']()[_0x5d19da(0x322)](_0x5d19da(0x375))&&(logger['full'](_0x5d19da(0x2a6)),tgBot[_0x5d19da(0x1fe)](),tgBot=null,io['to'](_0x5d19da(0x312))[_0x5d19da(0x311)](_0x5d19da(0x254),_0x5d19da(0x2a6)));}),process[_0x1edd7f(0x1ef)]('SIGINT',()=>{const _0x235e96=_0x1edd7f;if(tgBot)tgBot[_0x235e96(0x1fe)]();process['exit'](0x1);}),process['once'](_0x1edd7f(0x30c),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x4b3a1f,_0x548cf9){const _0x3b0b15=_0x293b13;if(settings[_0x3b0b15(0x23a)]){if(settings[_0x3b0b15(0x22c)]==_0x3b0b15(0x293)||(_0x548cf9[_0x3b0b15(0x372)]=='error'||_0x548cf9[_0x3b0b15(0x372)]==_0x3b0b15(0x1f0)||_0x548cf9[_0x3b0b15(0x372)]==_0x3b0b15(0x24c))&&settings[_0x3b0b15(0x22c)]==_0x3b0b15(0x37f)||_0x548cf9[_0x3b0b15(0x372)]==_0x3b0b15(0x296)&&settings[_0x3b0b15(0x22c)]==_0x3b0b15(0x2b2)){if(tgBot&&settings['telegramChatId']){if(_0x548cf9[_0x3b0b15(0x35c)])tgBot[_0x3b0b15(0x324)](settings[_0x3b0b15(0x31e)],_0x548cf9['botname']+_0x3b0b15(0x2fc)+_0x548cf9[_0x3b0b15(0x1d2)])[_0x3b0b15(0x2c0)](_0x205a46=>{telegramError(_0x205a46);});else tgBot[_0x3b0b15(0x324)](settings['telegramChatId'],_0x3b0b15(0x1c9)+_0x4b3a1f+_0x3b0b15(0x2fc)+_0x548cf9[_0x3b0b15(0x1d2)])['catch'](_0x1cabfc=>{telegramError(_0x1cabfc);});}}}}async function sendTelegramMsg(_0xa3ba5a,_0x95d573=_0x293b13(0x323)){const _0x4b4bda=_0x293b13;return settings[_0x4b4bda(0x23a)]&&tgBot&&settings[_0x4b4bda(0x31e)]?(await tgBot[_0x4b4bda(0x324)](settings[_0x4b4bda(0x31e)],_0xa3ba5a,{'parse_mode':_0x95d573})[_0x4b4bda(0x2c0)](_0x3be162=>{telegramError(_0x3be162);}),!![]):![];}function getDeviceWithIp(_0x5b2b80){const _0xa96eeb=_0x293b13;return devices[_0xa96eeb(0x338)](_0x23aff0=>_0x23aff0['ip']===_0x5b2b80);}function temporaryAccess2FA(_0x303901,_0x1ae6df){const _0x52d155=_0x293b13;let _0x5a832d=new Date(),_0x4696d2=![];if(lastIpApproval){if(_0x5a832d-lastIpApproval<0x1388)_0x4696d2=!![];}lastIpApproval=new Date();if(_0x4696d2)return;tgBot&&settings[_0x52d155(0x31e)]&&(tgBot['removeListener'](_0x52d155(0x393)),tgBot['sendMessage'](settings[_0x52d155(0x31e)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1ae6df)['show']+_0x52d155(0x2ab),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x52d155(0x1ee),'callback_data':'5'},{'text':_0x52d155(0x250),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x52d155(0x1c6),'callback_data':_0x52d155(0x1c6)}]]}})[_0x52d155(0x2c0)](_0x5a2246=>{telegramError(_0x5a2246);}),tgBot['on']('callback_query',async _0x4e6d7a=>{const _0x4cf788=_0x52d155,_0x42aac5=_0x4e6d7a['data'],_0xb1082e=_0x4e6d7a[_0x4cf788(0x2e9)];tgBot[_0x4cf788(0x357)](_0x4e6d7a['id'])[_0x4cf788(0x284)](async()=>{const _0x9749df=_0x4cf788;devices[_0x303901][_0x9749df(0x317)]={'clientip':_0x1ae6df,'timestamp':new Date()[_0x9749df(0x253)](),'expiry':_0x42aac5},_0x42aac5!=_0x9749df(0x1c6)?(await tgBot['sendMessage'](_0xb1082e[_0x9749df(0x310)]['id'],_0x9749df(0x339)+_0x42aac5+_0x9749df(0x29b),{'parse_mode':_0x9749df(0x323)})[_0x9749df(0x2c0)](_0x188eeb=>{telegramError(_0x188eeb);}),io['to'](_0x303901)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0xb1082e[_0x9749df(0x310)]['id'],_0x9749df(0x213))[_0x9749df(0x2c0)](_0x4e7757=>{telegramError(_0x4e7757);}),io['to'](_0x303901)[_0x9749df(0x311)](_0x9749df(0x264),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x4cf788(0x2cb)](_0x4cf788(0x393));}));}function loginAccess2FA(_0x469141,_0x231c08){const _0x3ce3be=_0x293b13;tgBot&&settings[_0x3ce3be(0x31e)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x3ce3be(0x324)](settings[_0x3ce3be(0x31e)],_0x3ce3be(0x304)+normalizeIP(_0x231c08)[_0x3ce3be(0x26f)]+_0x3ce3be(0x2ab),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3ce3be(0x1c6),'callback_data':'reject'}]]}})[_0x3ce3be(0x2c0)](_0x1f81b4=>{telegramError(_0x1f81b4);}),tgBot['on']('callback_query',async _0x426df6=>{const _0x22ead8=_0x3ce3be,_0x39c4ea=_0x426df6[_0x22ead8(0x394)],_0x3f9f02=_0x426df6[_0x22ead8(0x2e9)];tgBot[_0x22ead8(0x357)](_0x426df6['id'])[_0x22ead8(0x284)](async()=>{const _0x53ae4d=_0x22ead8;devices[_0x469141]['telegram2FaApproval']={'clientip':_0x231c08,'timestamp':new Date()[_0x53ae4d(0x253)](),'expiry':_0x39c4ea},_0x39c4ea!='reject'?(await tgBot['sendMessage'](_0x3f9f02[_0x53ae4d(0x310)]['id'],_0x53ae4d(0x2f2),{'parse_mode':'HTML'})['catch'](_0x370ff9=>{telegramError(_0x370ff9);}),io['to'](_0x469141)[_0x53ae4d(0x311)](_0x53ae4d(0x264),{'access':{'allow':![],'reason':_0x53ae4d(0x270),'token':null}})):(await tgBot[_0x53ae4d(0x324)](_0x3f9f02[_0x53ae4d(0x310)]['id'],_0x53ae4d(0x2f0))['catch'](_0x1a894f=>{telegramError(_0x1a894f);}),io['to'](_0x469141)[_0x53ae4d(0x311)](_0x53ae4d(0x264),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x22ead8(0x2cb)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x37e324=_0x293b13;return dbConfig['get'](_0x37e324(0x307))['sortBy'](_0x37e324(0x334))[_0x37e324(0x20a)]({'status':'enabled'})[_0x37e324(0x36b)]()||[];}function getDisabledBots(){const _0x3f9afd=_0x293b13;return dbConfig['get'](_0x3f9afd(0x307))[_0x3f9afd(0x258)](_0x3f9afd(0x334))[_0x3f9afd(0x20a)]({'status':_0x3f9afd(0x35f)})[_0x3f9afd(0x36b)]()||[];}function getBotAttributes(_0x5d53b2){const _0x5a3050=_0x293b13;let _0x25d913={};const _0x3e9b63=configpath+_0x5a3050(0x33d)+_0x5d53b2+'-config.json',_0x48e74f=fs[_0x5a3050(0x1fd)](_0x3e9b63);if(_0x48e74f){const _0x1bf41f=fs['readFileSync'](_0x3e9b63);try{const _0x5f1914=JSON[_0x5a3050(0x39d)](_0x1bf41f),_0x44fbb0=_0x5f1914?_0x5f1914[_0x5a3050(0x214)][0x0][_0x5a3050(0x2f9)]:![];_0x25d913[_0x5a3050(0x243)]=_0x44fbb0?_0x5a3050(0x30e):'manual',_0x25d913['botname']=_0x5f1914?_0x5f1914[_0x5a3050(0x214)][0x0]['botname']:_0x5a3050(0x1c9)+_0x5d53b2;}catch(_0x547288){_0x25d913[_0x5a3050(0x243)]='manual',_0x25d913[_0x5a3050(0x248)]=_0x5a3050(0x1c9)+_0x5d53b2;}}else _0x25d913[_0x5a3050(0x243)]='manual',_0x25d913['botname']='Bot\x20'+_0x5d53b2;return _0x25d913;}function getBotsWithMode(){const _0x14db27=_0x293b13,_0x3cced1=dbConfig[_0x14db27(0x2c6)]('bots')[_0x14db27(0x258)](_0x14db27(0x334))[_0x14db27(0x36b)]()||[];return _0x3cced1['forEach'](_0x271e99=>{const _0x2504ce=_0x14db27;let _0xba94d2=getBotAttributes(_0x271e99['botID']);_0x271e99[_0x2504ce(0x243)]=_0xba94d2[_0x2504ce(0x243)];}),_0x3cced1;}function _0x18ab(_0x4cbfc0,_0xf0d17e){const _0x25df7d=_0x2efd();return _0x18ab=function(_0x4bac69,_0x1a696b){_0x4bac69=_0x4bac69-0x1c6;let _0x2efd52=_0x25df7d[_0x4bac69];return _0x2efd52;},_0x18ab(_0x4cbfc0,_0xf0d17e);}function getBotExchanges(){const _0x3e552b=_0x293b13;let _0x5b945a=[];const _0x40ec65=dbConfig[_0x3e552b(0x2c6)](_0x3e552b(0x307))[_0x3e552b(0x258)](_0x3e552b(0x334))[_0x3e552b(0x36b)]()||[];_0x40ec65[_0x3e552b(0x23b)](_0x1ff5c4=>{const _0x43da9b=_0x3e552b;if(_0x1ff5c4[_0x43da9b(0x264)]==_0x43da9b(0x354)){const _0x27d088=configpath+_0x43da9b(0x33d)+_0x1ff5c4[_0x43da9b(0x334)]+'-config.json',_0x4c8b06=fs['existsSync'](_0x27d088);let _0x2403ee;if(_0x4c8b06){const _0x4ac2e4=fs[_0x43da9b(0x33b)](_0x27d088);try{const _0x293c48=JSON[_0x43da9b(0x39d)](_0x4ac2e4);_0x2403ee=_0x293c48?_0x293c48['bot'][0x0][_0x43da9b(0x210)]:null;}catch(_0x21bdca){}}if(_0x2403ee)_0x5b945a[_0x43da9b(0x257)](_0x2403ee);}});const _0x27cf20=[...new Set(_0x5b945a)][_0x3e552b(0x25f)]();return _0x27cf20;}async function initUser(){const _0x567558=_0x293b13;if(!settings[_0x567558(0x1f5)]){const _0x4a0b78=uuidRandom();mixpanel[_0x567558(0x2b9)](_0x4a0b78),updateSetting(_0x567558(0x1f5),_0x4a0b78);}}async function initSecure(){const _0x448e28=_0x293b13;let _0x4430ea=getSecure();if(!_0x4430ea[_0x448e28(0x2ce)]('secret')){let _0x5bf32a=await generateKeys();_0x4430ea[_0x448e28(0x217)]=_0x5bf32a['publicKey'],_0x4430ea['privateKey']=_0x5bf32a['privateKey'],_0x4430ea[_0x448e28(0x23d)]=crypto[_0x448e28(0x31a)](0x20)[_0x448e28(0x1c8)]('hex');;storeSecure(_0x4430ea);}}function getSettings(){const _0x2099f6=_0x293b13;return dbSettings[_0x2099f6(0x2c6)](_0x2099f6(0x36e))[_0x2099f6(0x36b)]()||{};}function getSecure(){const _0x2a017d=_0x293b13;return dbSecure[_0x2a017d(0x2c6)]('secure')[_0x2a017d(0x36b)]()||{};}function getBlacklist(){const _0xa01409=_0x293b13;return dbSecure[_0xa01409(0x2c6)]('blacklist')[_0xa01409(0x36b)]()||[];}function broadcastToBots(_0x3fc7f4,_0x240edf){config['forEach'](_0x4e2072=>{const _0x26f792=_0x18ab;if(_0x4e2072[_0x26f792(0x264)]=='enabled'&&_0x4e2072[_0x26f792(0x353)]==_0x26f792(0x321)||_0x4e2072[_0x26f792(0x264)]==_0x26f792(0x1e5)&&_0x4e2072[_0x26f792(0x353)]=='running'){if(pid[_0x4e2072['botID']])pid[_0x4e2072['botID']][_0x26f792(0x1e1)]({[_0x3fc7f4]:_0x240edf});}});}function storeSettings(_0x543acd,_0x5abb4e=![]){const _0xf720da=_0x293b13;_0x543acd={...settings,..._0x543acd};if(_0x5abb4e&&_0x543acd['bbPassword']!=_0xf720da(0x2d9)&&_0x543acd['bbPassword']!=_0xf720da(0x2e7)&&_0x543acd['bbPassword']!=''){const _0x561525=crypt[_0xf720da(0x1cd)](secure[_0xf720da(0x2f6)],_0x543acd[_0xf720da(0x388)])[_0xf720da(0x2e9)]['split']('@')[0x0],_0x57a20f=bcrypt['hashSync'](_0x561525,saltRounds);_0x543acd={..._0x543acd,'bbPassword':_0x57a20f};}if(_0x5abb4e&&_0x543acd[_0xf720da(0x362)]!=_0xf720da(0x2d9)&&_0x543acd[_0xf720da(0x362)]!=_0xf720da(0x2e7)&&_0x543acd[_0xf720da(0x362)]!=''){const _0x13e664=crypt[_0xf720da(0x1cd)](secure[_0xf720da(0x2f6)],_0x543acd['telegramToken'])[_0xf720da(0x2e9)][_0xf720da(0x249)]('@')[0x0];_0x543acd={..._0x543acd,'telegramToken':_0x13e664};}const _0x5003e9=_0x543acd[_0xf720da(0x362)]!=_0xf720da(0x2d9)&&_0x543acd[_0xf720da(0x362)]!=settings[_0xf720da(0x362)]||_0x543acd[_0xf720da(0x1f6)]!=settings[_0xf720da(0x1f6)],_0x517ff0=_0x543acd[_0xf720da(0x362)]==''||_0x543acd[_0xf720da(0x1f6)]=='';if(_0x5003e9)_0x543acd['telegramEvents']=_0xf720da(0x293);for(const [_0x37bee1,_0x4de669]of Object[_0xf720da(0x268)](_0x543acd)){if(_0x37bee1==_0xf720da(0x362)&&_0x4de669==_0xf720da(0x2d9)){_0x543acd[_0xf720da(0x362)]=settings[_0xf720da(0x362)];continue;};if(_0x37bee1==_0xf720da(0x388)&&_0x4de669==_0xf720da(0x2d9)){_0x543acd[_0xf720da(0x388)]=settings['bbPassword'];continue;};dbSettings[_0xf720da(0x33e)](_0xf720da(0x265)+_0x37bee1,_0x4de669)[_0xf720da(0x2d0)]();}settings=_0x543acd,io['to'](_0xf720da(0x312))[_0xf720da(0x311)](_0xf720da(0x36e),cleanSettings()),broadcastToBots('timeshift',settings[_0xf720da(0x27a)]),broadcastToBots('onepagemode',settings[_0xf720da(0x2a4)]);if(_0x5003e9&&!_0x517ff0)initTelegram();if(_0x5003e9&&_0x517ff0)disableTelegram();getAllClients()['forEach'](_0x5d3bfb=>{const _0x5e0cfe=_0xf720da;getSocket(_0x5d3bfb['id'])[_0x5e0cfe(0x311)](_0x5e0cfe(0x264),{'access':{'allow':![],'reason':_0x5e0cfe(0x270),'token':null}});});}function updateSetting(_0x465632,_0x4a1874){const _0x58b736=_0x293b13;dbSettings[_0x58b736(0x33e)](_0x58b736(0x265)+_0x465632,_0x4a1874)[_0x58b736(0x2d0)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x58b736(0x36e),cleanSettings());}function storeSecure(_0x13506c){const _0x56f44f=_0x293b13;dbSecure[_0x56f44f(0x2c6)]('secure')['push'](_0x13506c)[_0x56f44f(0x2d0)](),secure=_0x13506c;}function addBlacklist(_0x5a0b12){const _0x36ed39=_0x293b13;cleanBlacklist();let _0x34a9de;devices[_0x5a0b12][_0x36ed39(0x317)]?_0x34a9de=Math[_0x36ed39(0x360)](devices[_0x5a0b12][_0x36ed39(0x317)][_0x36ed39(0x224)],loginExpiry):_0x34a9de=loginExpiry,dbSecure[_0x36ed39(0x2c6)](_0x36ed39(0x2f8))['push']({'expiry':new Date()['getTime']()+_0x34a9de*0x3c*0x3e8,'token':devices[_0x5a0b12]['access'][_0x36ed39(0x277)]})[_0x36ed39(0x2d0)](),blacklist=dbSecure[_0x36ed39(0x2c6)]('blacklist')['value']();}function cleanBlacklist(){const _0x47c05b=_0x293b13;let _0x5932dc=dbSecure['get'](_0x47c05b(0x2f8))[_0x47c05b(0x3a1)]()['value'](),_0x48d341=new Date()[_0x47c05b(0x253)]();_0x5932dc[_0x47c05b(0x23b)](_0x578ffb=>{const _0x910686=_0x47c05b;_0x578ffb[_0x910686(0x224)]<_0x48d341&&dbSecure[_0x910686(0x2c6)](_0x910686(0x2f8))[_0x910686(0x1fa)]({'expiry':_0x578ffb[_0x910686(0x224)]})[_0x910686(0x2d0)]();});}function initStates(){const _0x3fb3e7=_0x293b13;let _0x236692=getConfiguration();_0x236692[_0x3fb3e7(0x23b)](_0x3b736a=>{const _0x31559c=_0x3fb3e7;_0x3b736a[_0x31559c(0x353)]=_0x31559c(0x36f);}),storeConfiguration(_0x236692);}function onKeys(){const _0x2e35b6=new RSA();return new Promise(_0x327483=>{const _0x341fae=_0x18ab;_0x2e35b6[_0x341fae(0x22e)]()['then'](_0x14ecc9=>{_0x327483(_0x14ecc9);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x221bb0=_0x293b13;let _0x39d809=getSettings(),_0x101356=![];!_0x39d809[_0x221bb0(0x2ce)](_0x221bb0(0x2dd))&&(_0x39d809[_0x221bb0(0x2dd)]=0x0,_0x101356=!![]);!_0x39d809[_0x221bb0(0x2ce)]('lastmsgemitted')&&(_0x39d809[_0x221bb0(0x247)]=0x0,_0x101356=!![]);!_0x39d809[_0x221bb0(0x2ce)](_0x221bb0(0x2ca))&&(_0x39d809[_0x221bb0(0x2ca)]=_0x221bb0(0x1cf),_0x101356=!![]);!_0x39d809[_0x221bb0(0x2ce)](_0x221bb0(0x2a4))&&(_0x39d809['onepagemode']=![],_0x101356=!![]);if(_0x101356)storeSettings(_0x39d809);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x4399e7=>{const _0x26d20d=_0x221bb0;if(!_0x4399e7[_0x26d20d(0x2c5)]()){if(!_0x4399e7[_0x26d20d(0x1ce)]['startsWith']('backup-full@'))fs[_0x26d20d(0x344)](configbackuppath+_0x4399e7[_0x26d20d(0x1ce)]);}else fs[_0x26d20d(0x290)](configbackuppath+_0x4399e7[_0x26d20d(0x1ce)],{'recursive':!![]});});}catch(_0x3ae47a){logger['debug']('Error\x20removing\x20old\x20backup\x20files:',_0x3ae47a);}}function storeConfiguration(_0x3ad3ba){const _0x28ef3a=_0x293b13;dbConfig[_0x28ef3a(0x2c6)]('bots')[_0x28ef3a(0x1fa)]()[_0x28ef3a(0x2d0)](),_0x3ad3ba[_0x28ef3a(0x23b)](_0x3805a3=>{const _0x2f5ebf=_0x28ef3a;delete _0x3805a3[_0x2f5ebf(0x243)];}),dbConfig['get'](_0x28ef3a(0x307))[_0x28ef3a(0x257)](..._0x3ad3ba)[_0x28ef3a(0x2d0)](),config=_0x3ad3ba;}function resetPassword(){const _0x33afef=_0x293b13;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x33afef(0x393)),tgBot[_0x33afef(0x324)](settings[_0x33afef(0x31e)],_0x33afef(0x1fc),{'parse_mode':_0x33afef(0x323),'reply_markup':{'inline_keyboard':[[{'text':_0x33afef(0x39e),'callback_data':_0x33afef(0x39e)},{'text':'no','callback_data':'no'}]]}})[_0x33afef(0x2c0)](_0x2eaa9e=>{telegramError(_0x2eaa9e);}),tgBot['on']('callback_query',async _0x101141=>{const _0x3832af=_0x33afef,_0x5dcdf9=_0x101141[_0x3832af(0x394)],_0x1dc464=_0x101141[_0x3832af(0x2e9)];tgBot['answerCallbackQuery'](_0x101141['id'])[_0x3832af(0x284)](async()=>{const _0x36b4df=_0x3832af;if(_0x5dcdf9!='no'){const _0x2a580a=0xf,_0x279269=_0x36b4df(0x37d),_0x412fac=Array[_0x36b4df(0x345)](crypto[_0x36b4df(0x35a)](new Uint32Array(_0x2a580a)))[_0x36b4df(0x356)](_0x1ec35a=>_0x279269[_0x1ec35a%_0x279269[_0x36b4df(0x2fd)]])[_0x36b4df(0x1e3)](''),_0x178911=bcrypt['hashSync'](_0x412fac,saltRounds);storeSettings({'bbPassword':_0x178911}),await tgBot[_0x36b4df(0x324)](_0x1dc464[_0x36b4df(0x310)]['id'],_0x36b4df(0x383)+_0x412fac,{'parse_mode':_0x36b4df(0x323)})['catch'](_0x134191=>{telegramError(_0x134191);});}else await tgBot[_0x36b4df(0x324)](_0x1dc464[_0x36b4df(0x310)]['id'],_0x36b4df(0x2d4))[_0x36b4df(0x2c0)](_0x4ffcaa=>{telegramError(_0x4ffcaa);});}),tgBot[_0x3832af(0x2cb)](_0x3832af(0x393));}));}async function confirmRestore(_0x4cae05,_0x3f2fce){const _0x267941=_0x293b13;io['to'](_0x267941(0x312))['emit'](_0x267941(0x254),_0x267941(0x207),_0x267941(0x24c)),tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x267941(0x393)),await tgBot[_0x267941(0x324)](settings['telegramChatId'],_0x267941(0x2cf),{'parse_mode':_0x267941(0x323),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x267941(0x39e)},{'text':'no','callback_data':'no'}]]}})[_0x267941(0x2c0)](_0x2b54e4=>{telegramError(_0x2b54e4);}),tgBot['on'](_0x267941(0x393),async _0x53ad4b=>{const _0xcbcc76=_0x267941,_0x5b8f05=_0x53ad4b[_0xcbcc76(0x394)],_0x100190=_0x53ad4b[_0xcbcc76(0x2e9)];tgBot[_0xcbcc76(0x357)](_0x53ad4b['id'])[_0xcbcc76(0x284)](async()=>{const _0x2e1ee7=_0xcbcc76;_0x5b8f05==_0x2e1ee7(0x39e)?(await tgBot[_0x2e1ee7(0x324)](_0x100190['chat']['id'],_0x2e1ee7(0x221),{'parse_mode':_0x2e1ee7(0x323)})[_0x2e1ee7(0x2c0)](_0x3816a8=>{telegramError(_0x3816a8);}),unzipFile(_0x4cae05,_0x3f2fce)):(logger[_0x2e1ee7(0x33a)]('Restore\x20process\x20aborted'),await tgBot['sendMessage'](_0x100190[_0x2e1ee7(0x310)]['id'],'Restore\x20process\x20aborted')[_0x2e1ee7(0x2c0)](_0x54a70a=>{telegramError(_0x54a70a);}));}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x327973=_0x293b13,_0x4b602e=new Date();return _0x4b602e[_0x327973(0x1f1)]()+'/'+(_0x4b602e[_0x327973(0x272)]()+0x1)[_0x327973(0x1c8)]()[_0x327973(0x346)](0x2,'0')+'/'+_0x4b602e[_0x327973(0x2be)]()[_0x327973(0x1c8)]()[_0x327973(0x346)](0x2,'0')+'\x20'+_0x4b602e[_0x327973(0x1d9)]()[_0x327973(0x1c8)]()[_0x327973(0x346)](0x2,'0')+':'+_0x4b602e['getMinutes']()[_0x327973(0x1c8)]()[_0x327973(0x346)](0x2,'0')+':'+_0x4b602e['getSeconds']()['toString']()[_0x327973(0x346)](0x2,'0');}function getTimeStamp(){const _0x1235ae=_0x293b13,_0x3dbbec=shiftedTime();return _0x3dbbec[_0x1235ae(0x1f1)]()+'/'+(_0x3dbbec[_0x1235ae(0x272)]()+0x1)[_0x1235ae(0x1c8)]()[_0x1235ae(0x346)](0x2,'0')+'/'+_0x3dbbec['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3dbbec[_0x1235ae(0x1d9)]()[_0x1235ae(0x1c8)]()[_0x1235ae(0x346)](0x2,'0')+':'+_0x3dbbec['getMinutes']()[_0x1235ae(0x1c8)]()['padStart'](0x2,'0')+':'+_0x3dbbec[_0x1235ae(0x1ec)]()[_0x1235ae(0x1c8)]()[_0x1235ae(0x346)](0x2,'0');}function getCleanTimeStamp(){const _0x30c5c6=_0x293b13,_0x15034d=shiftedTime();return _0x15034d['getFullYear']()+(_0x15034d['getMonth']()+0x1)[_0x30c5c6(0x1c8)]()[_0x30c5c6(0x346)](0x2,'0')+_0x15034d[_0x30c5c6(0x2be)]()[_0x30c5c6(0x1c8)]()['padStart'](0x2,'0')+'-'+_0x15034d[_0x30c5c6(0x1d9)]()[_0x30c5c6(0x1c8)]()['padStart'](0x2,'0')+_0x15034d['getMinutes']()[_0x30c5c6(0x1c8)]()[_0x30c5c6(0x346)](0x2,'0')+_0x15034d['getSeconds']()[_0x30c5c6(0x1c8)]()[_0x30c5c6(0x346)](0x2,'0');}function shiftedTime(){const _0x287641=_0x293b13,_0x282e05=new Date();let _0x289e06=_0x282e05;if(settings[_0x287641(0x27a)]&&settings[_0x287641(0x27a)]!==0x0)_0x289e06=fns[_0x287641(0x2d2)](_0x282e05,{'hours':settings['timeshift']});return _0x289e06;}function startScheduler(){const _0x331099=_0x293b13,_0x544283=new Date()['getUTCHours'](),_0x53be94=shiftedTime()[_0x331099(0x1d9)]();_0x53be94==0x4&&backupConfigFiles();_0x53be94==0x0&&rotateLogFiles();_0x544283%0x6==0x0&&triggerAnalytics();_0x544283%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x733e26){const _0xb901cf=_0x293b13;logger[_0xb901cf(0x33a)](_0xb901cf(0x1dd)+_0x733e26);const _0x2f7dd7=getBotsWithMode();_0x2f7dd7['length']>0x0?confirmRestore(configbackuppath,_0x733e26):unzipFile(configbackuppath,_0x733e26);}async function getBackupFiles(_0x5c2b52=null){const _0x319ef0=_0x293b13;let _0x2e0614=[],_0x1b7067=fs[_0x319ef0(0x2d1)](configbackuppath,{'withFileTypes':!![]});_0x1b7067[_0x319ef0(0x25f)]((_0x28c35a,_0x4b0cc3)=>_0x28c35a[_0x319ef0(0x1ce)]<_0x4b0cc3[_0x319ef0(0x1ce)]?0x1:_0x4b0cc3[_0x319ef0(0x1ce)]<_0x28c35a['name']?-0x1:0x0),_0x1b7067[_0x319ef0(0x23b)](_0x188afb=>{const _0x5a42de=_0x319ef0;if(!_0x188afb[_0x5a42de(0x2c5)]()&&_0x188afb[_0x5a42de(0x1ce)][_0x5a42de(0x24a)]('backup-full@')&&_0x188afb[_0x5a42de(0x1ce)][_0x5a42de(0x34b)](_0x5a42de(0x35e))){const _0x26130b=formatDate(fs['statSync'](configbackuppath+_0x188afb['name'])['mtime']);_0x2e0614['push']({'name':_0x188afb['name'],'mtime':_0x26130b});}});if(_0x5c2b52)io['to'](_0x5c2b52)['emit'](_0x319ef0(0x32d),_0x2e0614);else return _0x2e0614;}async function backupConfigFiles(){const _0x51a675=_0x293b13;await zipFiles(_0x51a675(0x2c7));const _0x5e1960=getCleanTimeStamp();fs[_0x51a675(0x222)](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0x5e1960+'.zip'));let _0x3b9056=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3b9056[_0x51a675(0x25f)]((_0x3ae027,_0x52b7c1)=>_0x3ae027[_0x51a675(0x1ce)]<_0x52b7c1[_0x51a675(0x1ce)]?0x1:_0x52b7c1[_0x51a675(0x1ce)]<_0x3ae027[_0x51a675(0x1ce)]?-0x1:0x0),_0x3b9056[_0x51a675(0x2fd)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3b9056[_0x3b9056[_0x51a675(0x2fd)]-0x1][_0x51a675(0x1ce)]);}function rotateLogFiles(){const _0x4da19f=_0x293b13,_0x2a763d=fs[_0x4da19f(0x2f4)](logspath+_0x4da19f(0x2ff)),_0x57e596=_0x2a763d['size']/0x400;if(_0x57e596>0x64){let _0x2924cb=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x2924cb[_0x4da19f(0x25f)]((_0x2fbaed,_0x1e528b)=>_0x2fbaed[_0x4da19f(0x1ce)]<_0x1e528b['name']?0x1:_0x1e528b['name']<_0x2fbaed[_0x4da19f(0x1ce)]?-0x1:0x0),_0x2924cb[_0x4da19f(0x23b)](_0x4fd8ec=>{const _0x261779=_0x4da19f;if(_0x4fd8ec[_0x261779(0x1ce)]==_0x261779(0x30a))fs[_0x261779(0x222)](logspath+_0x4fd8ec['name'],logspath+_0x261779(0x228));if(_0x4fd8ec[_0x261779(0x1ce)]==_0x261779(0x386))fs[_0x261779(0x222)](logspath+_0x4fd8ec[_0x261779(0x1ce)],logspath+_0x261779(0x30a));_0x4fd8ec[_0x261779(0x1ce)]==_0x261779(0x2ff)&&(fs[_0x261779(0x222)](logspath+_0x4fd8ec['name'],logspath+_0x261779(0x386)),fs['writeFileSync'](logspath+_0x4fd8ec['name'],''));});}}async function zipFiles(_0x592224){const _0x1bb706=_0x293b13;let _0x2cae04;if(_0x592224=='logs')_0x2cae04=logspath;if(_0x592224==_0x1bb706(0x35b))_0x2cae04=configpath;if(_0x592224==_0x1bb706(0x2c7))_0x2cae04=configpath;let _0x22aefa=fs['readdirSync'](_0x2cae04,{'withFileTypes':!![]});const _0x20ab5c=new require(_0x1bb706(0x2a3))();_0x22aefa['forEach'](_0x4a5a5b=>{const _0x28b4dd=_0x1bb706;if(!_0x4a5a5b[_0x28b4dd(0x2c5)]()){let _0x581d4b=fs['readFileSync'](_0x2cae04+_0x4a5a5b[_0x28b4dd(0x1ce)]);if(_0x592224==_0x28b4dd(0x35b)){const _0x1f4a7f=/^bot-[0-9]{3}-config.json$/,_0x4bcdce=_0x1f4a7f[_0x28b4dd(0x326)](_0x4a5a5b['name']);if(_0x4bcdce){const _0x517f90=JSON[_0x28b4dd(0x39d)](_0x581d4b);if(_0x517f90[_0x28b4dd(0x214)][0x0]){_0x517f90[_0x28b4dd(0x214)][0x0][_0x28b4dd(0x220)]=_0x28b4dd(0x2e7),_0x517f90['bot'][0x0][_0x28b4dd(0x309)]=_0x28b4dd(0x2e7);if(_0x517f90[_0x28b4dd(0x214)][0x0][_0x28b4dd(0x1dc)])_0x517f90[_0x28b4dd(0x214)][0x0][_0x28b4dd(0x1dc)]=_0x28b4dd(0x2e7);}_0x581d4b=JSON[_0x28b4dd(0x1ca)](_0x517f90,null,0x2);}if(_0x4a5a5b['name']==_0x28b4dd(0x35d)){const _0x5533dd=JSON[_0x28b4dd(0x39d)](_0x581d4b);if(_0x5533dd[_0x28b4dd(0x36e)][_0x28b4dd(0x2bc)])_0x5533dd[_0x28b4dd(0x36e)][_0x28b4dd(0x2bc)]=![];if(_0x5533dd[_0x28b4dd(0x36e)]['bbPassword'])_0x5533dd[_0x28b4dd(0x36e)][_0x28b4dd(0x388)]=_0x28b4dd(0x2e7);if(_0x5533dd[_0x28b4dd(0x36e)][_0x28b4dd(0x362)])_0x5533dd[_0x28b4dd(0x36e)]['telegramToken']=_0x28b4dd(0x2e7);if(_0x5533dd[_0x28b4dd(0x36e)][_0x28b4dd(0x31e)])_0x5533dd[_0x28b4dd(0x36e)]['telegramChatId']=null;_0x581d4b=JSON[_0x28b4dd(0x1ca)](_0x5533dd,null,0x2);}if(_0x4a5a5b['name']!=_0x28b4dd(0x36d))_0x20ab5c[_0x28b4dd(0x352)](_0x4a5a5b[_0x28b4dd(0x1ce)],_0x581d4b);}else _0x20ab5c[_0x28b4dd(0x352)](_0x4a5a5b['name'],_0x581d4b);}});const _0x45445c=_0x20ab5c[_0x1bb706(0x267)]({'base64':![],'compression':'DEFLATE'});fs[_0x1bb706(0x2c9)](zippath+(_0x592224+_0x1bb706(0x35e)),_0x45445c,_0x1bb706(0x327));}async function unzipFile(_0x4054c5,_0x148acc){const _0x12e301=_0x293b13;fs[_0x12e301(0x2d1)](configpath,{'withFileTypes':!![]})[_0x12e301(0x23b)](_0x386f9a=>{const _0x1be725=_0x12e301;if(!_0x386f9a[_0x1be725(0x2c5)]())fs['rmSync'](configpath+_0x386f9a[_0x1be725(0x1ce)]);});const _0x562c3f=fs[_0x12e301(0x33b)](_0x4054c5+_0x148acc,_0x12e301(0x327)),_0x55d767=new require(_0x12e301(0x2a3))(_0x562c3f,{'base64':![],'checkCRC32':!![]});Object[_0x12e301(0x227)](_0x55d767[_0x12e301(0x208)])[_0x12e301(0x23b)](_0x692f92=>{const _0x4ac00e=_0x12e301,_0x1c17ca=_0x55d767[_0x4ac00e(0x208)][_0x692f92];fs[_0x4ac00e(0x2c9)](configpath+_0x1c17ca[_0x4ac00e(0x1ce)],_0x1c17ca['_data']);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x12e301(0x23b)](_0x4ee27e=>{const _0x48bd32=_0x12e301;if(!_0x4ee27e['isDirectory']())fs[_0x48bd32(0x290)](temppath+_0x4ee27e['name']);}),logger['debug'](_0x12e301(0x39a)),process[_0x12e301(0x1e1)]({'restore':!![]},_0x2231c0=>{});}async function getPublicIp(){const _0x16a6b1=_0x293b13;try{const _0xf04cd=await axios[_0x16a6b1(0x2c6)](_0x16a6b1(0x395));publicip=_0xf04cd[_0x16a6b1(0x394)]['ip'];}catch(_0x513870){}}async function triggerAnalytics(){const _0x25c4dc=_0x293b13;if(!publicip)await getPublicIp();const _0x2927b7=getBotsWithMode();let _0x44aca2=0x0;_0x2927b7[_0x25c4dc(0x23b)](_0x43bddd=>{const _0x5f1846=_0x25c4dc;if(_0x43bddd[_0x5f1846(0x264)]===_0x5f1846(0x354))_0x44aca2++;});const _0x3713ba=getBotExchanges();mixpanel['track'](_0x25c4dc(0x37e),{'distinct_id':settings[_0x25c4dc(0x1f5)],'ip':publicip,'version':serverversion,'numbots':_0x2927b7[_0x25c4dc(0x2fd)],'numbotsenabled':_0x44aca2,'exchanges':_0x3713ba});}async function getMessages(){const _0x17f283=_0x293b13,_0x2b5770=_0x17f283(0x2a1),_0x432d87=new GraphQLClient(_0x2b5770),_0x221697={'authorization':_0x17f283(0x280)},_0x1fca8a=serverversion[_0x17f283(0x249)]('.'),_0xc75eae=_0x1fca8a[0x0]+'.'+_0x1fca8a[0x1],_0x552cc5=Math[_0x17f283(0x225)](settings['lastmsgtelegram'],settings[_0x17f283(0x247)]),_0x34cc3f={'last':parseInt(_0x552cc5),'bbm':_0xc75eae},_0x1f1c1b=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2f4df6;try{_0x2f4df6=await _0x432d87[_0x17f283(0x364)](_0x1f1c1b,_0x34cc3f,_0x221697);}catch(_0x485f8d){}if(_0x2f4df6&&_0x2f4df6['messages']){let _0x2d3c13=settings['lastmsgtelegram'];newMessages=[];for(const _0x17847a of _0x2f4df6[_0x17f283(0x20d)]){newMessages[_0x17f283(0x257)](_0x17847a);if(_0x17847a[_0x17f283(0x2e4)])updateSetting('latestversion',_0x17847a[_0x17f283(0x2e4)]);let _0x470ed2=_0x17847a[_0x17f283(0x2e4)]?serverversion>=_0x17847a['bbvNew']:![];if(!_0x470ed2&&_0x17847a['number']>_0x2d3c13){if(_0x17847a['bbvReceive']==='any'||serverversion['startsWith'](_0x17847a[_0x17f283(0x2ae)])){let _0x285cac=''+_0x17847a[_0x17f283(0x27e)]+'\x0a\x0a'+_0x17847a[_0x17f283(0x2e9)];const _0x4bc85f=await sendTelegramMsg(toTelegramMarkdown(_0x285cac),'Markdown');if(_0x4bc85f)_0x2d3c13=_0x17847a[_0x17f283(0x1f9)];}}}updateAvailable=isNewerVersion(settings[_0x17f283(0x2ca)],serverversion),updateSetting('lastmsgtelegram',_0x2d3c13),emitMessages();}}function emitMessages(){const _0x1bf9ff=_0x293b13,_0x14c5f1=settings['lastmsgemitted'];let _0x304a3b=[];newMessages[_0x1bf9ff(0x23b)](_0x151451=>{const _0x1a10fe=_0x1bf9ff;_0x151451[_0x1a10fe(0x1f9)]>_0x14c5f1&&_0x304a3b[_0x1a10fe(0x257)](_0x151451);}),_0x304a3b[_0x1bf9ff(0x2fd)]>0x0&&getAllClients()[_0x1bf9ff(0x23b)](_0x12e823=>{const _0x265224=_0x1bf9ff;getSocket(_0x12e823['id'])[_0x265224(0x311)]('message',_0x304a3b);});}function confirmMessage(_0x2348b9){const _0x4744b6=_0x293b13;updateSetting(_0x4744b6(0x247),Number(_0x2348b9));}function isNewerVersion(_0x3b2710,_0xc87601){const _0x2bd8ef=_0x293b13,_0x52444f=_0xc87601[_0x2bd8ef(0x249)]('.'),_0x42362c=_0x3b2710[_0x2bd8ef(0x249)]('.');for(var _0x3b93bd=0x0;_0x3b93bd<_0x42362c[_0x2bd8ef(0x2fd)];_0x3b93bd++){const _0x2160c0=~~_0x42362c[_0x3b93bd],_0x2166e2=~~_0x52444f[_0x3b93bd];if(_0x2160c0>_0x2166e2)return!![];if(_0x2160c0<_0x2166e2)return![];}return![];}function toTelegramMarkdown(_0x56aa5e){const _0x525e89=_0x293b13,_0x3fa9f3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x346110=/\*{2}(.+?)\*{2}/gim;return _0x56aa5e=_0x56aa5e[_0x525e89(0x21b)](_0x3fa9f3,'$1_$2_$3')[_0x525e89(0x21b)](_0x346110,_0x525e89(0x355)),_0x56aa5e;}async function validateConfigFile(){const _0x4256eb=_0x293b13,_0x4f5643=dbConfig['get']('bots')['sortBy'](_0x4256eb(0x334))[_0x4256eb(0x36b)]()||[];if(_0x4f5643['length']==0x0){let _0x209bef=0x0,_0x443337=[];const _0x4c967d=/^bot-([0-9]{3})-config.json$/,_0x48880a=fs['readdirSync'](configpath);_0x48880a[_0x4256eb(0x23b)](_0xca7a06=>{const _0x139788=_0x4256eb,_0x1d648a=_0x4c967d['exec'](_0xca7a06);if(_0x1d648a){const _0x272c50=_0x1d648a[0x1];let _0x135b09=getBotAttributes(_0x272c50);_0x443337[_0x139788(0x257)]({'botID':_0x272c50,'botname':_0x135b09[_0x139788(0x248)],'status':_0x139788(0x35f),'live':_0x139788(0x36f)}),_0x209bef++;}}),_0x209bef!=0x0&&(dbConfig[_0x4256eb(0x2c6)](_0x4256eb(0x307))[_0x4256eb(0x1d7)](_0x443337)['write'](),config=_0x443337,restoredConfigFile=_0x209bef);}}async function restoreConfigNotify(_0x38d4ac){const _0x2cf9ee=_0x293b13;let _0x351193;if(restoredConfigFile==0x1)_0x351193=_0x2cf9ee(0x31c);else _0x351193='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x38d4ac)io['to']('botmanager')[_0x2cf9ee(0x311)]('notification',_0x351193);else{logger['simple'](_0x2cf9ee(0x201)),logger[_0x2cf9ee(0x215)](_0x351193),logger[_0x2cf9ee(0x215)](_0x2cf9ee(0x201)),logger[_0x2cf9ee(0x215)]('');if(tgBot&&settings[_0x2cf9ee(0x31e)]&&settings[_0x2cf9ee(0x22c)]!=_0x2cf9ee(0x2b2))tgBot[_0x2cf9ee(0x324)](settings[_0x2cf9ee(0x31e)],_0x2cf9ee(0x20f)+_0x351193)[_0x2cf9ee(0x2c0)](_0x390013=>{telegramError(_0x390013);});}}function validateCredentials(_0x1e28f7,_0x47d349){const _0x30d277=_0x293b13;if(_0x1e28f7[_0x30d277(0x347)]==settings[_0x30d277(0x239)]&&bcrypt[_0x30d277(0x330)](_0x1e28f7['password'],settings[_0x30d277(0x388)])){if(settings[_0x30d277(0x21f)])return{'allow':![],'reason':_0x30d277(0x279),'token':null};else{const _0x3dcabf=generateLoginToken(_0x47d349);return{'allow':!![],'reason':_0x30d277(0x298),'token':_0x3dcabf};}}else return{'allow':![],'reason':_0x30d277(0x2c2),'token':null};}function _0x2efd(){const _0x4fe300=['Do\x20you\x20want\x20to\x20reset\x20your\x20password?','existsSync','stopPolling','bot.js','Notifications\x20disabled','-----------------------------------------------------------------------------------','Deleted\x20Bot\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','<b>Balance\x20Bot\x20Status:</b>\x0a','access','6b67f3d61ee94b8f5c80b4affef4c4d9','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','files','static','filter','Unauthorized\x20attempt\x20to\x20get\x20messages',':\x20Bot\x20Mgr\x20>\x20','messages','node','Bot\x20Mgr\x20>\x20','exchange','Idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20show\x20configuration','Temporary\x20access\x20rejected','bot','simple','confirm-message','publicKey','telegrammsg','Notifications\x20enabled','ipaddr.js','replace','format','deleteHistoryAlerts','download','f2aRequired','apiKey','Restoring\x20bot(s)\x20from\x20backup','copyFileSync','disconnect','expiry','min','Unauthorized\x20attempt\x20to\x20download\x20','keys','output-003.log','/disable\x20-\x20disable\x20notifications\x0a','Ok,\x20will\x20send\x20order\x20notifications\x20only','/:bot/coins','telegramEvents','#RES#\x20if\x20running\x20locally\x0a','generateKeyPairAsync','constructor','Logged\x20out\x20user\x20...','IPv4','Notifications\x20types:\x20','reason','Session\x20expired\x20for\x20user\x20...','26tuTuWK','versions','encryptedUuid','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','bbUsername','telegramEnabled','forEach','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','secret','5564PBLKpf','Invalid\x20authentication\x20token\x20(1)','No\x20bots\x20running\x20right\x20now','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Invalid\x20authentication\x20token\x20(2)','mode','2FA\x20login\x20token\x20generated','::ffff:127.0.0.1','headers','lastmsgemitted','botname','split','startsWith','onText','success','bb/','place-order','ipc','15\x20min','[ip-address]','auth','getTime','notification','showConfig','login','push','sortBy','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','env','sign','util','remoteAddress','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','sort','Unauthorized\x20attempt\x20to\x20store\x20configuration','161055mEmXgb','get-starting-balances','get-portfolio','status','settings.','\x20(2)','generate','entries','sendPortfolioTelegram','get-messages','\x20mode','exit','range','Notifications\x20disabled\x0a','show','reload','string','getMonth','/off\x20-\x20stop\x20bot(s)\x0a','RSA-OAEP','storeFiat','isIPv4MappedAddress','token','exp','2FA\x20login\x20required','timeshift','logged\x20out',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','All','title','getMinutes','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','server','/:bot/support','Unauthorized\x20attempt\x20to\x20get\x20events','then','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','stop','host','1490oyzbZk','/on\x20-\x20start\x20bot(s)\x0a','updatebotmanager','#RES#\x20if\x20running\x20on\x20server','placeOrder','NTBA_FIX_319','temporaryAccessAllowed','error','rmSync','reset-password','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','all','Ok,\x20will\x20send\x20alert\x20notifications\x20only','sendMetricsTelegram','order','temporary\x20access\x20not\x20allowed','login\x20token\x20generated','2FA\x20required','connection','\x20minutes','show-config','clientip','Starting\x20bot\x20|\x20Bot\x20','login\x20not\x20required','Orders','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','node-zip','onepagemode','getPortfolio','Invalid\x20Telegram\x20token','logs/',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','log','fork','</b>\x20?','35703koTKWs','All\x20bots','bbvReceive','tkn','staging','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','orders','Alerts','::1','temporary\x20access\x20timeout','whitelist','handshake','File\x20uploaded','alias','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','loginRequired','uuid-random','getDate','store-configuration','catch','express-fileupload','invalid\x20credentials','cancelLoading','polling_error','isDirectory','get','backup-full','restore-backup-file','writeFileSync','latestversion','removeListener','temporary\x20token\x20generated','version','hasOwnProperty','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','write','readdirSync','add','removeAllListeners','Password\x20reset\x20rejected','started','port','Your\x20installation\x20is\x20already\x20up\x20to\x20date','-events.json','************','uncaughtException','manual','toggleBotMode','lastmsgtelegram','4131792IZxAHd','getStartingBalances','socket','index.html','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','\x20only\x0a','bbvNew','Unauthorized\x20attempt\x20to\x20log\x20out','update-bot','***','emitHistory','message','listen','sockets','/:bot/configuration','Starting\x20Balance\x20Bot\x20update','\x20|\x20','=>\x20Go\x20to\x20#CYA#http://','Login\x20rejected','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Login\x20accepted','update-bb','statSync','sendFile','privateKey','password','blacklist','headless','Starting\x20Balance\x20Bot\x20reinstallation','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','\x20>\x20','length','createServer','output-000.log','createWriteStream','inherit','<b>Telegram\x20Bot\x20Status:</b>\x0a','\x20to\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','toggle-bot-mode','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','bots','get-logs','apiSecret','output-002.log','ipv6','SIGTERM','path','auto','apply','chat','emit','botmanager','config/','#RES#\x20','Enabled\x20Bot\x20','Error:\x20Invalid\x20argument\x20','telegramIpApproval','535632eJNWic','build2','randomBytes','Failed\x20to\x20download\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','internal','telegramChatId','login\x20required','reinstall','running','includes','HTML','sendMessage','3000','test','binary','match','new-disabled','store-headless','add-bot','Backup\x20file\x20uploaded','backup-files','connected','Token\x20blacklisted','compareSync','1000','sha256','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','botID','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','mixpanel','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','find','Access\x20enabled\x20for\x20','debug','readFileSync','uuid','bot-','set','logout','login\x20token\x20valid','socket.io','(staging)','allow','unlinkSync','from','padStart','username','\x1b[31m','/upload-backup','/:bot','endsWith','3302775XqheAz','/status\x20-\x20show\x20bot(s)\x20status\x0a','Error\x20while\x20deleting\x20config\x20files:\x20','store','argv','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','file','live','enabled','*$1*','map','answerCallbackQuery','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','52EozmHm','randomFillSync','backup','showname','bb-settings.json','.zip','disabled','max','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','telegramToken','/:bot/history','request','(((.+)+)+)+$','pidRefreshToken','environment','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','address','value','Unauthorized\x20attempt\x20to\x20update\x20bot','bb-secure.json','settings','stopped','Yes','hybrid-crypto-js','type','verify','127.0.0.1','404\x20Not\x20Found','/names\x20-\x20show\x20bot\x20names\x0a','conn','slice','whitelistEnabled','use','kill','initclient','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Server','alerts','restart','/metrics\x20-\x20show\x20bot\x20performance\x0a','user','Password\x20has\x20been\x20reset\x20to:\x20','full','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','output-001.log','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bbPassword','Logged\x20in\x20user\x20...','Unauthorized\x20attempt\x20to\x20delete\x20alerts','pidExpireLogin','args','update','search','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','/help\x20-\x20show\x20available\x20commands\x0a','/download/:type','Starting\x20new\x20bot\x20|\x20Bot\x20','callback_query','data','https://api.ipify.org?format=json','backupfile','All\x20bots\x20running\x20right\x20now','Unauthorized\x20login\x20attempt\x20(timeout)','storeConfiguration','Backup\x20file\x20unzipped\x20and\x20stored','params','http','parse','yes','-config.json','graphql-request','cloneDeep','mkdirSync','reject','delete-bot','toString','Bot\x20','stringify','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','\x1b[33m','decrypt','name','0.0.0','build','User\x20has\x20been\x20validated','event','reinstall-bb','\x20|\x20client:\x20...','yargs/yargs','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','assign','timestamp','getHours','production','function','apiPassword','Restore\x20backup\x20file\x20','telegram','isValid','clients','send','toIPv4Address','join','lowdb/adapters/FileSync','new','axios','Disabled\x20Bot\x20','version.json','389496vQXYrL','zip/','2FA','getSeconds','get-backup-files','5\x20min','once','warning','getFullYear','family','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','telegram2FaApproval','userid','telegramUsername','/restart\x20-\x20restart\x20bot(s)\x0a','defaults','number','remove','-performance.json'];_0x2efd=function(){return _0x4fe300;};return _0x2efd();}function refreshToken(_0x55b074){const _0x290635=generateLoginToken(_0x55b074);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x290635};}function validateAccess(_0x1b21f3,_0x23d0a7,_0x280f16){const _0x2c0aec=_0x293b13,_0x34b39f=_0x280f16?_0x280f16:devices[_0x23d0a7]['ip'];let _0x565107;const _0x53d1da=_0x41d57f=>{const _0x259748=_0x18ab;if(settings[_0x259748(0x2bc)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x23d0a7)){const _0x1de65c=generateLoginToken(_0x23d0a7);return{'allow':!![],'reason':_0x259748(0x244),'token':_0x1de65c};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x565107=validToken(_0x41d57f,_0x23d0a7),_0x565107[_0x259748(0x2ce)](_0x259748(0x24c))?{'allow':!![],'reason':_0x259748(0x340),'token':_0x41d57f}:{'allow':![],'reason':_0x259748(0x31f),'token':null};}else return{'allow':!![],'reason':_0x259748(0x29f),'token':null};};if(settings[_0x2c0aec(0x379)]){let _0x2a0dd2=[...settings[_0x2c0aec(0x2b6)],_0x2c0aec(0x2b4),_0x2c0aec(0x245),_0x2c0aec(0x374)];if(_0x2a0dd2[_0x2c0aec(0x322)](_0x34b39f))return _0x53d1da(_0x1b21f3);else{_0x565107=validToken(_0x1b21f3,_0x23d0a7);if(_0x565107[_0x2c0aec(0x2ce)](_0x2c0aec(0x24c)))return _0x53d1da(_0x1b21f3);else{if(telegramIpApproved(_0x23d0a7)){const _0x1eccc7=generateToken(_0x23d0a7);return _0x565107=_0x53d1da(_0x1b21f3),_0x565107[_0x2c0aec(0x343)]?{'allow':!![],'reason':_0x2c0aec(0x2cc),'token':_0x1eccc7}:_0x565107;}else return settings[_0x2c0aec(0x28e)]?{'allow':![],'reason':_0x2c0aec(0x299),'token':null}:{'allow':![],'reason':_0x2c0aec(0x297),'token':null};}}}else return _0x53d1da(_0x1b21f3);}function timelyDecrypt(_0x23f8b,_0x27b8cf=!![]){const _0x3a057c=_0x293b13;if(_0x23f8b)try{const _0x177406=crypt['decrypt'](secure[_0x3a057c(0x2f6)],_0x23f8b)[_0x3a057c(0x2e9)],_0x24a068=_0x177406[_0x3a057c(0x249)]('@')[0x0],_0x5326bb=_0x177406[_0x3a057c(0x249)]('@')[0x1],_0x221aa5=new Date()[_0x3a057c(0x253)]();if(_0x27b8cf){if(_0x221aa5-_0x5326bb<maxSecretAge*0x3e8)return _0x24a068;else return![];}else return _0x24a068;}catch(_0x566ce8){return![];}else return![];}const validToken=(_0x15a5b5,_0x4661b6)=>{const _0x150d9e=_0x293b13,_0x45d2fc=devices[_0x4661b6]['ip'];if(!_0x15a5b5)return{'error':'No\x20authentication\x20token'};for(let _0x591217 of blacklist){if(_0x591217[_0x150d9e(0x277)]==_0x15a5b5)return{'error':_0x150d9e(0x32f)};}let _0x2ed297;try{_0x2ed297=jwt[_0x150d9e(0x373)](_0x15a5b5,secure[_0x150d9e(0x23d)]+_0x4661b6);}catch{return{'error':_0x150d9e(0x23f)};}if(!_0x2ed297[_0x150d9e(0x2ce)]('clientip')&&!_0x2ed297[_0x150d9e(0x2ce)](_0x150d9e(0x347))||!_0x2ed297['hasOwnProperty'](_0x150d9e(0x278)))return{'error':_0x150d9e(0x242)};if(!_0x2ed297[_0x150d9e(0x2ce)]('username')&&_0x2ed297[_0x150d9e(0x2ce)]('clientip')){const {clientip:_0x418243}=_0x2ed297;return _0x45d2fc==_0x418243?{'success':_0x150d9e(0x1d1)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x2ed297[_0x150d9e(0x2ce)]('username')&&_0x2ed297[_0x150d9e(0x2ce)](_0x150d9e(0x29d))){const {username:_0x35ffa8,clientip:_0x5826b9}=_0x2ed297;return settings[_0x150d9e(0x239)]==_0x35ffa8&&_0x45d2fc==_0x5826b9?{'success':_0x150d9e(0x1d1)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x1ad918=>{const _0x27f974=_0x293b13;if(_0x1ad918){const _0x575077=devices[_0x1ad918]['ip'];return jwt['sign']({'username':settings[_0x27f974(0x239)],'clientip':_0x575077},secure[_0x27f974(0x23d)]+_0x1ad918,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x20c2ac=>{const _0x3d604d=_0x293b13;if(_0x20c2ac){const _0x1923dd=devices[_0x20c2ac]['ip'];return jwt[_0x3d604d(0x25b)]({'clientip':_0x1923dd},secure['secret']+_0x20c2ac,{'expiresIn':devices[_0x20c2ac]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x2f48dc=>{const _0x28a980=_0x293b13;let _0x3477a1=![];return devices[_0x2f48dc][_0x28a980(0x317)]&&devices[_0x2f48dc][_0x28a980(0x317)][_0x28a980(0x224)]!=_0x28a980(0x1c6)&&(_0x3477a1=devices[_0x2f48dc]['telegramIpApproval']['clientip']==devices[_0x2f48dc]['ip']&&new Date()[_0x28a980(0x253)]()-devices[_0x2f48dc]['telegramIpApproval'][_0x28a980(0x1d8)]<devices[_0x2f48dc][_0x28a980(0x317)][_0x28a980(0x224)]*0x3c*0x3e8),_0x3477a1;},telegram2FaApproved=_0x318d18=>{const _0x36bd54=_0x293b13;let _0x3712d5=![];return devices[_0x318d18][_0x36bd54(0x1f4)]&&devices[_0x318d18][_0x36bd54(0x1f4)][_0x36bd54(0x224)]!=_0x36bd54(0x1c6)&&(_0x3712d5=devices[_0x318d18][_0x36bd54(0x1f4)][_0x36bd54(0x29d)]==devices[_0x318d18]['ip']&&new Date()[_0x36bd54(0x253)]()-devices[_0x318d18][_0x36bd54(0x1f4)][_0x36bd54(0x1d8)]<devices[_0x318d18][_0x36bd54(0x1f4)][_0x36bd54(0x224)]*0x3c*0x3e8),_0x3712d5;},normalizeIP=_0x56b3f7=>{const _0x575e89=_0x293b13;let _0x562f18=null,_0x36ff32=null;if(ipaddr[_0x575e89(0x1df)](_0x56b3f7)){const _0x30c4bb=ipaddr[_0x575e89(0x39d)](_0x56b3f7);_0x30c4bb['kind']()===_0x575e89(0x30b)?(_0x30c4bb[_0x575e89(0x276)]()&&(_0x562f18=_0x30c4bb[_0x575e89(0x1e2)]()[_0x575e89(0x1c8)]()),_0x36ff32=_0x30c4bb[_0x575e89(0x1c8)]()):(_0x562f18=_0x30c4bb[_0x575e89(0x1c8)](),_0x36ff32=_0x30c4bb['toIPv4MappedAddress']()['toString']());}return{'show':_0x562f18?_0x562f18:_0x36ff32,'store':_0x36ff32};};function formatDate(_0xa1c5fc){const _0x786961=_0x293b13;return _0xa1c5fc['getFullYear']()+'/'+(_0xa1c5fc[_0x786961(0x272)]()+0x1)['toString']()[_0x786961(0x346)](0x2,'0')+'/'+_0xa1c5fc['getDate']()[_0x786961(0x1c8)]()[_0x786961(0x346)](0x2,'0')+'\x20'+_0xa1c5fc[_0x786961(0x1d9)]()[_0x786961(0x1c8)]()[_0x786961(0x346)](0x2,'0')+':'+_0xa1c5fc[_0x786961(0x27f)]()[_0x786961(0x1c8)]()['padStart'](0x2,'0')+':'+_0xa1c5fc[_0x786961(0x1ec)]()[_0x786961(0x1c8)]()[_0x786961(0x346)](0x2,'0');}function sleep(_0x4f7d02){return new Promise(_0x102066=>setTimeout(_0x102066,_0x4f7d02));}