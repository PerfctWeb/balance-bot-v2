const _0x357005=_0x32fb;(function(_0x900f84,_0x453e57){const _0x1b9de0=_0x32fb,_0x271aa0=_0x900f84();while(!![]){try{const _0x2fa115=-parseInt(_0x1b9de0(0x229))/0x1+-parseInt(_0x1b9de0(0x217))/0x2*(-parseInt(_0x1b9de0(0x387))/0x3)+parseInt(_0x1b9de0(0x307))/0x4*(-parseInt(_0x1b9de0(0x1f5))/0x5)+-parseInt(_0x1b9de0(0x28f))/0x6+parseInt(_0x1b9de0(0x1f8))/0x7*(parseInt(_0x1b9de0(0x35b))/0x8)+parseInt(_0x1b9de0(0x1e1))/0x9+-parseInt(_0x1b9de0(0x214))/0xa*(-parseInt(_0x1b9de0(0x2cd))/0xb);if(_0x2fa115===_0x453e57)break;else _0x271aa0['push'](_0x271aa0['shift']());}catch(_0x2cbabe){_0x271aa0['push'](_0x271aa0['shift']());}}}(_0x20d8,0x9294b));const _0x4f6103=function(){let _0x2a0ee5=!![];return function(_0x2879ee,_0x453f05){const _0xdac7c9=_0x2a0ee5?function(){if(_0x453f05){const _0x48ddfc=_0x453f05['apply'](_0x2879ee,arguments);return _0x453f05=null,_0x48ddfc;}}:function(){};return _0x2a0ee5=![],_0xdac7c9;};}(),_0xe5a9d7=_0x4f6103(this,function(){const _0x1bcbac=_0x32fb;return _0xe5a9d7[_0x1bcbac(0x308)]()[_0x1bcbac(0x39c)](_0x1bcbac(0x233))['toString']()[_0x1bcbac(0x3bc)](_0xe5a9d7)[_0x1bcbac(0x39c)](_0x1bcbac(0x233));});_0xe5a9d7();'use strict';process[_0x357005(0x272)][_0x357005(0x286)]=0x1;const childProcess=require(_0x357005(0x3ba)),fs=require('fs'),fns=require('date-fns'),low=require(_0x357005(0x1f0)),FileSync=require(_0x357005(0x3a2)),path=require(_0x357005(0x204)),crypto=require(_0x357005(0x1f4)),Crypt=require(_0x357005(0x239))[_0x357005(0x28a)],RSA=require('hybrid-crypto-js')[_0x357005(0x39a)],bcrypt=require(_0x357005(0x2bd)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x357005(0x395))(process['argv'][_0x357005(0x287)](0x2))['argv'],uuidRandom=require(_0x357005(0x32b)),TelegramBot=require(_0x357005(0x219)),Mixpanel=require(_0x357005(0x2c1)),axios=require('axios'),{GraphQLClient,gql}=require(_0x357005(0x282)),util=require(_0x357005(0x222)),fileUpload=require(_0x357005(0x1ef)),{networkInterfaces}=require('os'),PORT=argv[_0x357005(0x3ad)]||_0x357005(0x2a8),pattern=/^[0-9]{2,4}$/;!pattern[_0x357005(0x3b0)](PORT)&&(console[_0x357005(0x20c)](_0x357005(0x3c8)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x357005(0x35f)](0x1));const HOST=argv[_0x357005(0x220)]||null,userID=argv[_0x357005(0x380)]||'',debugging=argv['d']||![],nodeversion=process[_0x357005(0x304)][_0x357005(0x261)];let bbpath=_0x357005(0x2cf),bbpath2='';const botfile=_0x357005(0x292),configfile=_0x357005(0x361),settingsfile=_0x357005(0x29c),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x357005(0x341))[_0x357005(0x3b6)]||_0x357005(0x213),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x357005(0x313)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x357005(0x249),configbackuppath=configpath+_0x357005(0x3c5),logspath=userID?bbpath+_0x357005(0x36d)+userID+'/':bbpath+_0x357005(0x36d),zippath=userID?bbpath+_0x357005(0x25e)+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+_0x357005(0x2ec),{'flags':'a'}),temppath=userID?bbpath+_0x357005(0x21f)+userID+'/':bbpath+_0x357005(0x21f);!fs[_0x357005(0x376)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x357005(0x32a)](configbackuppath);!fs[_0x357005(0x376)](logspath)&&fs[_0x357005(0x32a)](logspath);!fs[_0x357005(0x376)](zippath)&&fs['mkdirSync'](zippath);!fs['existsSync'](temppath)&&fs[_0x357005(0x32a)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x357005(0x32e)]({'bots':[]})[_0x357005(0x327)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x357005(0x32e)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x357005(0x38f),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x357005(0x32e)]({'secure':{},'blacklist':[]})[_0x357005(0x327)]();let crypt=new Crypt({'md':_0x357005(0x23f),'rsaStandard':_0x357005(0x325)});const saltRounds=0xa,mixpanel=Mixpanel[_0x357005(0x392)](_0x357005(0x37c),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x357005(0x389)]&&settings[_0x357005(0x389)]!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0xc77d62,_0x86f90c)=>{const _0x564497=_0x357005,_0x5dcb39=/#[A-Z]{3}#/g;if(typeof _0xc77d62==_0x564497(0x2ab)){!_0x86f90c?_0xc77d62=_0xc77d62[_0x564497(0x326)](_0x5dcb39,''):(_0xc77d62=_0xc77d62[_0x564497(0x326)](/#BLU#/g,_0x564497(0x3a1)),_0xc77d62=_0xc77d62[_0x564497(0x326)](/#RED#/g,_0x564497(0x1e9)),_0xc77d62=_0xc77d62[_0x564497(0x326)](/#YEL#/g,_0x564497(0x2ee)),_0xc77d62=_0xc77d62[_0x564497(0x326)](/#MAG#/g,_0x564497(0x1ec)),_0xc77d62=_0xc77d62[_0x564497(0x326)](/#CYA#/g,'\x1b[36m'),_0xc77d62=_0xc77d62['replace'](/#RES#/g,_0x564497(0x21e)));;}return _0xc77d62;},logger={'screen':_0xddfb98=>{const _0x2c5d0c=_0x357005;console[_0x2c5d0c(0x20c)](parseColor(_0xddfb98,!![]));},'simple':_0xb601cc=>{const _0x11adb9=_0x357005;console['log'](parseColor(_0xb601cc,!![])),loggerfile[_0x11adb9(0x327)](util[_0x11adb9(0x2b6)](parseColor(_0xb601cc,![]))+'\x0a');},'full':async _0x44e299=>{const _0x59bb59=_0x357005,_0x7ac56f=getTimeStamp()+_0x59bb59(0x2cb)+_0x44e299;console[_0x59bb59(0x20c)](parseColor(_0x7ac56f,!![])),loggerfile[_0x59bb59(0x327)](util['format'](parseColor(_0x7ac56f,![]))+'\x0a');if(tgBot&&settings[_0x59bb59(0x33f)]&&settings['telegramEvents']!=_0x59bb59(0x275))await tgBot['sendMessage'](settings[_0x59bb59(0x33f)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x44e299,![]))[_0x59bb59(0x319)](_0x428120=>{telegramError(_0x428120);});},'debug':async(_0x3553ea,_0x546747='')=>{const _0x5283f9=_0x357005,_0x36ab59=getTimeStamp()+_0x5283f9(0x332)+_0x3553ea;if(debugging)console[_0x5283f9(0x20c)](parseColor(_0x36ab59,!![]));loggerfile[_0x5283f9(0x327)](util[_0x5283f9(0x2b6)](parseColor(_0x36ab59,![]))+'\x0a');if(_0x546747){if(debugging)console['log'](_0x546747);loggerfile['write'](util[_0x5283f9(0x2b6)](_0x546747)+'\x0a');}}};process['on'](_0x357005(0x2f4),function(_0x222f41){const _0x5b1ca5=_0x357005;logger[_0x5b1ca5(0x3af)](_0x222f41);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x357005(0x341))[_0x357005(0x37e)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x357005(0x2ef)),app=express(),http=require(_0x357005(0x216))[_0x357005(0x32c)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x357005(0x2d5),async(_0x3cc8c0,_0x476f6e)=>{const _0x423394=_0x357005,_0x4e73b7=_0x3cc8c0[_0x423394(0x31f)][_0x423394(0x2e6)],_0x1ab8ee=getClientsWithBotID('botmanager'),_0xae7946=_0x3cc8c0[_0x423394(0x258)][_0x423394(0x2f5)],_0x6b9c04=timelyDecrypt(_0xae7946,![]),_0x3898c7=_0x1ab8ee['find'](_0x472dba=>_0x472dba[_0x423394(0x2f5)]==_0x6b9c04);if(_0x3898c7){const _0x3b8bd2=normalizeIP(_0x3cc8c0[_0x423394(0x39b)][_0x423394(0x3ae)])['store'],_0x23eae=_0x3cc8c0[_0x423394(0x258)][_0x423394(0x29d)];if(validateAccess(_0x23eae,_0x6b9c04,_0x3b8bd2)[_0x423394(0x312)])_0x4e73b7==_0x423394(0x2b9)&&await backupConfigFiles(),await zipFiles(_0x4e73b7),_0x476f6e['download'](zippath+(_0x4e73b7+_0x423394(0x28d)),_0x597f5a=>{const _0x25dafe=_0x423394;_0x597f5a&&(logger[_0x25dafe(0x283)](_0x25dafe(0x390)+_0x4e73b7),logger[_0x25dafe(0x3af)](_0x597f5a));});else logger[_0x423394(0x283)](_0x423394(0x223)+_0x4e73b7+_0x423394(0x34b));}else logger[_0x423394(0x283)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4e73b7+'\x20(2)');}),app[_0x357005(0x209)](_0x357005(0x2e7),async(_0x4b7303,_0x4af63f)=>{const _0x3b4d7f=_0x357005,_0x104676=getClientsWithBotID(_0x3b4d7f(0x1f1)),_0x454038=_0x4b7303[_0x3b4d7f(0x258)]['uuid'],_0x22549f=timelyDecrypt(_0x454038,![]),_0x3bed1b=_0x104676[_0x3b4d7f(0x2f8)](_0x39f671=>_0x39f671[_0x3b4d7f(0x2f5)]==_0x22549f);logger[_0x3b4d7f(0x3be)]('Backup\x20file\x20uploaded');if(_0x3bed1b){const _0x2d6fbf=normalizeIP(_0x4b7303['socket'][_0x3b4d7f(0x3ae)])[_0x3b4d7f(0x338)],_0x366c98=_0x4b7303[_0x3b4d7f(0x258)][_0x3b4d7f(0x29d)];if(validateAccess(_0x366c98,_0x22549f,_0x2d6fbf)[_0x3b4d7f(0x312)]){if(_0x4b7303[_0x3b4d7f(0x225)]){const _0x2c700c=_0x4b7303[_0x3b4d7f(0x225)]['backupfile'];await _0x2c700c['mv'](temppath+_0x2c700c[_0x3b4d7f(0x311)]),_0x4af63f[_0x3b4d7f(0x20e)]({'status':!![],'message':_0x3b4d7f(0x23c)});const _0x8b0d22=getBotsWithMode();_0x8b0d22['length']>0x0?confirmRestore(temppath,_0x2c700c['name']):unzipFile(temppath,_0x2c700c[_0x3b4d7f(0x311)]);}}else logger[_0x3b4d7f(0x283)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x3b4d7f(0x283)](_0x3b4d7f(0x397));}),app[_0x357005(0x352)](express['static'](path[_0x357005(0x1e8)](__dirname,bbpath2,'build2'))),app[_0x357005(0x352)](express['static'](path[_0x357005(0x1e8)](__dirname,bbpath2,_0x357005(0x2aa)))),app[_0x357005(0x375)]('/',function(_0xf50d1d,_0x4d0ed3){const _0x462c86=_0x357005;_0x4d0ed3[_0x462c86(0x317)](path[_0x462c86(0x1e8)](__dirname,bbpath2,_0x462c86(0x3c7),_0x462c86(0x2a5)));}),app['get'](_0x357005(0x377),function(_0x449a7c,_0x548bf5){const _0x25dd2d=_0x357005;_0x548bf5[_0x25dd2d(0x317)](path[_0x25dd2d(0x1e8)](__dirname,bbpath2,_0x25dd2d(0x2aa),_0x25dd2d(0x2a5)));}),app[_0x357005(0x375)](_0x357005(0x1fe),(_0x4f986a,_0x51facb)=>{const _0x1aea25=_0x357005;_0x51facb[_0x1aea25(0x317)](path[_0x1aea25(0x1e8)](__dirname,bbpath2,'build',_0x1aea25(0x2a5)));}),app[_0x357005(0x375)](_0x357005(0x333),(_0x385689,_0x7c5972)=>{const _0x529b80=_0x357005;_0x7c5972[_0x529b80(0x317)](path[_0x529b80(0x1e8)](__dirname,bbpath2,_0x529b80(0x2aa),_0x529b80(0x2a5)));}),app[_0x357005(0x375)](_0x357005(0x2a9),(_0x2b4435,_0x342eaf)=>{const _0x296f80=_0x357005;_0x342eaf[_0x296f80(0x317)](path[_0x296f80(0x1e8)](__dirname,bbpath2,_0x296f80(0x2aa),_0x296f80(0x2a5)));}),app[_0x357005(0x375)](_0x357005(0x26d),(_0x56fe23,_0x308f80)=>{const _0x182b3a=_0x357005;_0x308f80[_0x182b3a(0x317)](path[_0x182b3a(0x1e8)](__dirname,bbpath2,_0x182b3a(0x2aa),'index.html'));}),app[_0x357005(0x375)](_0x357005(0x274),(_0x4eea91,_0x20d9d6)=>{const _0x5a3fff=_0x357005;_0x20d9d6[_0x5a3fff(0x317)](path[_0x5a3fff(0x1e8)](__dirname,bbpath2,_0x5a3fff(0x2aa),_0x5a3fff(0x2a5)));}),app[_0x357005(0x375)](_0x357005(0x294),(_0x445ec8,_0x1ef5a4)=>{const _0x3b19ec=_0x357005;_0x1ef5a4[_0x3b19ec(0x317)](path[_0x3b19ec(0x1e8)](__dirname,bbpath2,_0x3b19ec(0x2aa),_0x3b19ec(0x2a5)));});if(HOST)http[_0x357005(0x250)](PORT,HOST);else http['listen'](PORT);const io=require(_0x357005(0x2c8))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x25d276=_0x357005;let _0x3f0bf4=_0x25d276(0x354);const _0x533a43=networkInterfaces(),_0x4ec7fa={};for(const _0x1b5c8e of Object[_0x25d276(0x297)](_0x533a43)){for(const _0x103e03 of _0x533a43[_0x1b5c8e]){if((_0x103e03['family']==_0x25d276(0x3c1)||_0x103e03['family']==0x4)&&!_0x103e03[_0x25d276(0x30d)]){const _0x12b468=ipaddr[_0x25d276(0x2a1)](_0x103e03['address'])[_0x25d276(0x38b)]();_0x12b468!=_0x25d276(0x296)&&(!_0x4ec7fa[_0x1b5c8e]&&(_0x4ec7fa[_0x1b5c8e]=[]),_0x4ec7fa[_0x1b5c8e][_0x25d276(0x3b9)](_0x103e03[_0x25d276(0x30e)]),_0x3f0bf4=_0x103e03['address']);}}}return{'serverip':_0x3f0bf4,'netinterfaces':_0x4ec7fa};}async function startServer(){const _0x2535a7=_0x357005,{serverip:_0x342d4a,netinterfaces:_0x162132}=getServerIP();logger['simple'](''),logger[_0x2535a7(0x3af)](_0x2535a7(0x1f3)),await logger[_0x2535a7(0x283)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x2535a7(0x25b)+(environment==_0x2535a7(0x3bb)?_0x2535a7(0x2ad):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x2535a7(0x3c3))+(_0x2535a7(0x1ed)+_0x342d4a+':'+PORT+_0x2535a7(0x2b2))),logger[_0x2535a7(0x3af)](_0x2535a7(0x1f3));if(config['length']!=0x0)for(const _0x1e5e10 of config){if(_0x1e5e10[_0x2535a7(0x2c7)]==_0x2535a7(0x351)||_0x1e5e10[_0x2535a7(0x2c7)]==_0x2535a7(0x28e))await logger['full'](_0x2535a7(0x301)+_0x1e5e10[_0x2535a7(0x33a)]+'\x20|\x20'+_0x1e5e10[_0x2535a7(0x2a3)]),startBot([_0x1e5e10[_0x2535a7(0x33a)],userID],{'cwd':bbpath},function(_0x498873){const _0x212170=_0x2535a7;if(_0x498873)logger[_0x212170(0x283)](_0x498873);});else(_0x1e5e10[_0x2535a7(0x2c7)]==_0x2535a7(0x2b1)||_0x1e5e10[_0x2535a7(0x2c7)]==_0x2535a7(0x37b))&&await logger[_0x2535a7(0x283)](_0x2535a7(0x24c)+_0x1e5e10['botID']+'\x20|\x20'+_0x1e5e10[_0x2535a7(0x2a3)]);}else!newBot&&logger[_0x2535a7(0x3af)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x2535a7(0x3af)](_0x2535a7(0x1f3)),logger[_0x2535a7(0x3af)](''),await logger[_0x2535a7(0x3be)](_0x2535a7(0x243)+nodeversion),await logger[_0x2535a7(0x3be)]('Network\x20Interfaces:',_0x162132);}function startSocket(){io['on']('connection',_0x59f2ab=>{const _0x5b3165=_0x32fb;let _0x586fe3,_0x33b184,_0x9a2890,_0x1d6c60,_0xd1bc71;const _0x55ffed=_0x59f2ab['handshake'][_0x5b3165(0x258)][_0x5b3165(0x386)];_0x33b184=_0x55ffed[_0x5b3165(0x399)](/bot[0-9]{3}/);if(_0x33b184)_0x9a2890=_0x33b184[0x0]['match'](/[0-9]{3}/);if(_0x9a2890)_0x586fe3=_0x9a2890[0x0];else _0x586fe3=_0x5b3165(0x1f1);const _0x42fae5=_0x59f2ab['handshake']['auth'][_0x5b3165(0x2cc)];if(!_0x42fae5)_0x59f2ab[_0x5b3165(0x2df)](_0x5b3165(0x2c7),{'publicKey':secure[_0x5b3165(0x25a)]});else{_0x1d6c60=timelyDecrypt(_0x42fae5,![]);if(!_0x1d6c60)_0x59f2ab[_0x5b3165(0x2df)](_0x5b3165(0x2c7),{'publicKey':secure[_0x5b3165(0x25a)]});else{_0xd1bc71=normalizeIP(_0x59f2ab[_0x5b3165(0x22e)][_0x5b3165(0x3ae)])['store'];if(!devices[_0x1d6c60])devices[_0x1d6c60]={'uuid':_0x1d6c60,'access':{'token':null}};devices[_0x1d6c60]['ip']=_0xd1bc71;const _0x512530=addClient(_0x59f2ab['id'],_0x1d6c60,_0x586fe3);setAccess(_0x512530),emitMessages(),_0x59f2ab['on']('login',_0x5f28ad=>{const _0x2c988a=_0x5b3165,_0x4f2ae4=timelyDecrypt(_0x5f28ad[_0x2c988a(0x31b)]);if(_0x4f2ae4){_0x5f28ad={'username':_0x5f28ad[_0x2c988a(0x266)],'password':_0x4f2ae4},devices[_0x1d6c60][_0x2c988a(0x2b4)]=validateCredentials(_0x5f28ad,_0x1d6c60);if(devices[_0x1d6c60][_0x2c988a(0x2b4)]['allow']==![]&&devices[_0x1d6c60][_0x2c988a(0x2b4)][_0x2c988a(0x25d)]==_0x2c988a(0x24d))_0x59f2ab[_0x2c988a(0x2df)](_0x2c988a(0x2c7),{'access':devices[_0x1d6c60][_0x2c988a(0x2b4)]}),loginAccess2FA(_0x1d6c60,_0xd1bc71);else{if(devices[_0x1d6c60]['access'][_0x2c988a(0x312)]==![]&&devices[_0x1d6c60][_0x2c988a(0x2b4)]['reason']==_0x2c988a(0x270))_0x59f2ab[_0x2c988a(0x2df)](_0x2c988a(0x2c7),{'access':devices[_0x1d6c60][_0x2c988a(0x2b4)]});else devices[_0x1d6c60][_0x2c988a(0x2b4)][_0x2c988a(0x312)]&&devices[_0x1d6c60][_0x2c988a(0x2b4)]['reason']==_0x2c988a(0x26e)&&(getClientsWithUuid(_0x1d6c60)[_0x2c988a(0x2b8)](_0x2b4735=>{setAccess(_0x2b4735);}),logger[_0x2c988a(0x3be)](_0x2c988a(0x255)+_0x1d6c60[_0x2c988a(0x287)](-0x8)),setTokenRefresh(_0x1d6c60),setSessionTimeout('login',_0x1d6c60));}}else logger[_0x2c988a(0x283)](_0x2c988a(0x346));}),_0x59f2ab['on'](_0x5b3165(0x2e0),()=>{resetPassword();}),_0x59f2ab['on'](_0x5b3165(0x218),_0x4bdd5b=>{removeClient(_0x59f2ab['id']);}),_0x586fe3==_0x5b3165(0x1f1)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3e76b6){const _0x4a7de5=_0x357005;if(_0x3e76b6!=_0x4a7de5(0x1f1)&&config[_0x4a7de5(0x2e8)]!=''){if(pid[_0x3e76b6])pid[_0x3e76b6]['send']({'function':_0x4a7de5(0x378),'args':null});}_0x3e76b6!=_0x4a7de5(0x1f1)&&broadcastToBots('bots',JSON[_0x4a7de5(0x31d)](config));}function reloadBotManager(){const _0x5de202=_0x357005;getClientsWithBotID(_0x5de202(0x1f1))['forEach'](_0x256828=>{getSocket(_0x256828['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x101168){const _0x4c1265=_0x357005;return io[_0x4c1265(0x2e9)][_0x4c1265(0x2e9)]['get'](_0x101168);}function setAccess(_0x28cce4){const _0x1056b4=_0x357005,_0x3dea17=getSocket(_0x28cce4['id']),_0x4efafa=_0x28cce4[_0x1056b4(0x2f5)],_0x5df331=_0x28cce4[_0x1056b4(0x36b)];devices[_0x4efafa][_0x1056b4(0x2b4)]=validateAccess(devices[_0x4efafa][_0x1056b4(0x2b4)]['token'],_0x4efafa),logger[_0x1056b4(0x3be)](_0x1056b4(0x280)+devices[_0x4efafa]['access'][_0x1056b4(0x25d)]+_0x1056b4(0x22a)+_0x28cce4['id'][_0x1056b4(0x287)](-0x8)+'\x20|\x20user:\x20...'+_0x4efafa[_0x1056b4(0x287)](-0x8)),_0x3dea17['join'](_0x4efafa);if(devices[_0x4efafa][_0x1056b4(0x2b4)]['allow']){_0x3dea17[_0x1056b4(0x1e8)](_0x5df331);if(_0x5df331==_0x1056b4(0x1f1))initializeSocketBotManager(_0x3dea17);else initializeSocketBot(_0x3dea17);initClient(_0x5df331);}devices[_0x4efafa][_0x1056b4(0x2b4)][_0x1056b4(0x2eb)]&&devices[_0x4efafa]['access']['reason']==_0x1056b4(0x328)&&setSessionTimeout('2FA',_0x4efafa),devices[_0x4efafa][_0x1056b4(0x2b4)][_0x1056b4(0x2eb)]&&devices[_0x4efafa][_0x1056b4(0x2b4)][_0x1056b4(0x25d)]==_0x1056b4(0x237)&&setSessionTimeout('login',_0x4efafa),_0x3dea17[_0x1056b4(0x2df)](_0x1056b4(0x2c7),{'status':_0x28cce4[_0x1056b4(0x251)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4efafa]['access'],'externalip':devices[_0x4efafa]['ip'],'publicKey':secure[_0x1056b4(0x25a)],'userid':settings[_0x1056b4(0x2ff)],'validInstallation':validInstallation}),devices[_0x4efafa][_0x1056b4(0x2b4)][_0x1056b4(0x312)]==![]&&devices[_0x4efafa][_0x1056b4(0x2b4)][_0x1056b4(0x25d)]=='2FA\x20required'&&temporaryAccess2FA(_0x4efafa,devices[_0x4efafa]['ip']);}function setSessionTimeout(_0x4f1435,_0x1225e5){const _0x42afd1=_0x357005;let _0x95efc9;if(_0x4f1435==_0x42afd1(0x3ab))_0x95efc9=loginExpiry*0x3c*0x3e8;else _0x95efc9=devices[_0x1225e5][_0x42afd1(0x263)]['expiry']*0x3c*0x3e8-(new Date()[_0x42afd1(0x320)]()-devices[_0x1225e5]['telegramIpApproval'][_0x42afd1(0x2da)]);if(devices[_0x1225e5][_0x42afd1(0x253)])clearTimeout(devices[_0x1225e5]['pidExpireLogin']);devices[_0x1225e5][_0x42afd1(0x253)]=setTimeout(()=>{const _0x5402ba=_0x42afd1;if(devices[_0x1225e5][_0x5402ba(0x372)])clearTimeout(devices[_0x1225e5]['pidRefreshToken']);removeSocketListeners(_0x1225e5),addBlacklist(_0x1225e5),devices[_0x1225e5]['telegramIpApproval']=null,devices[_0x1225e5][_0x5402ba(0x25c)]=null,devices[_0x1225e5][_0x5402ba(0x2b4)][_0x5402ba(0x2eb)]=null,logger[_0x5402ba(0x3be)](_0x5402ba(0x242)+_0x1225e5[_0x5402ba(0x287)](-0x8)),devices[_0x1225e5][_0x5402ba(0x2b4)]=validateAccess(devices[_0x1225e5][_0x5402ba(0x2b4)][_0x5402ba(0x2eb)],_0x1225e5),!(devices[_0x1225e5][_0x5402ba(0x2b4)][_0x5402ba(0x312)]&&devices[_0x1225e5][_0x5402ba(0x2b4)][_0x5402ba(0x25d)]==_0x5402ba(0x1ea))&&(_0x4f1435==_0x5402ba(0x3ab)?io['to'](_0x1225e5)[_0x5402ba(0x2df)](_0x5402ba(0x2c7),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x1225e5)[_0x5402ba(0x2df)](_0x5402ba(0x2c7),{'access':{'allow':![],'reason':_0x5402ba(0x29f),'token':null}})),devices[_0x1225e5][_0x5402ba(0x2b4)][_0x5402ba(0x2eb)]=null;},_0x95efc9);}function setTokenRefresh(_0x5a928a){const _0x1ccaf1=_0x357005;if(devices[_0x5a928a][_0x1ccaf1(0x372)])clearTimeout(devices[_0x5a928a]['pidRefreshToken']);devices[_0x5a928a][_0x1ccaf1(0x372)]=setTimeout(()=>{const _0x3267bf=_0x1ccaf1;getClientsWithUuid(_0x5a928a)[_0x3267bf(0x226)]!=0x0?(devices[_0x5a928a][_0x3267bf(0x2b4)]=refreshToken(_0x5a928a),io['to'](_0x5a928a)[_0x3267bf(0x2df)](_0x3267bf(0x2c7),{'status':_0x3267bf(0x365),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5a928a][_0x3267bf(0x2b4)],'externalip':devices[_0x5a928a]['ip'],'publicKey':secure[_0x3267bf(0x25a)],'validInstallation':validInstallation}),setTokenRefresh(_0x5a928a)):clearTimeout(devices[_0x5a928a][_0x3267bf(0x372)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3be792){const _0x199e5d=_0x357005,_0xa007aa=getClient(_0x3be792['id'])[_0x199e5d(0x2f5)];_0x3be792[_0x199e5d(0x2df)](_0x199e5d(0x260),config),_0x3be792[_0x199e5d(0x2df)](_0x199e5d(0x33e),cleanSettings()),_0x3be792['on'](_0x199e5d(0x38d),_0x14d92a=>{const _0x18cd6b=_0x199e5d;if(validateAccess(_0x14d92a,_0xa007aa)[_0x18cd6b(0x312)])addBot();else logger[_0x18cd6b(0x283)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x3be792['on'](_0x199e5d(0x357),(_0x738bd3,_0x302382)=>{const _0x4eadb8=_0x199e5d;if(validateAccess(_0x302382,_0xa007aa)[_0x4eadb8(0x312)])toggleBot(_0x738bd3['botID'],_0x738bd3['status'],_0x738bd3['live']);else logger[_0x4eadb8(0x283)](_0x4eadb8(0x2ba));}),_0x3be792['on'](_0x199e5d(0x2a7),(_0x20b8bf,_0x1f64d5)=>{const _0x392651=_0x199e5d;if(validateAccess(_0x1f64d5,_0xa007aa)[_0x392651(0x312)])toggleBotMode(_0x20b8bf);else logger['full'](_0x392651(0x2ba));}),_0x3be792['on'](_0x199e5d(0x27d),(_0x1cb1ed,_0xd9535d)=>{const _0x216a7b=_0x199e5d;if(validateAccess(_0xd9535d,_0xa007aa)[_0x216a7b(0x312)])deleteBot(_0x1cb1ed);else logger[_0x216a7b(0x283)](_0x216a7b(0x268));}),_0x3be792['on']('store-settings',(_0x36414a,_0x11cda4)=>{const _0x5e3e2e=_0x199e5d;if(validateAccess(_0x11cda4,_0xa007aa)[_0x5e3e2e(0x312)])storeSettings(_0x36414a,!![]);else logger[_0x5e3e2e(0x283)](_0x5e3e2e(0x374));}),_0x3be792['on'](_0x199e5d(0x344),_0x5d84d4=>{const _0x1eec8c=_0x199e5d;if(validateAccess(_0x5d84d4,_0xa007aa)['allow'])updateBB(_0x1eec8c(0x39f));else logger[_0x1eec8c(0x283)](_0x1eec8c(0x24a));}),_0x3be792['on']('reinstall-bb',_0x1d6f8d=>{const _0x45d7ce=_0x199e5d;if(validateAccess(_0x1d6f8d,_0xa007aa)[_0x45d7ce(0x312)])updateBB(_0x45d7ce(0x2c6));else logger['full'](_0x45d7ce(0x2c4));}),_0x3be792['on'](_0x199e5d(0x200),_0x4e209f=>{const _0x1c8bb2=_0x199e5d;if(validateAccess(_0x4e209f,_0xa007aa)[_0x1c8bb2(0x312)]){const _0x47e884=getClient(_0x3be792['id']);if(_0x47e884)getBackupFiles(_0x47e884[_0x1c8bb2(0x2f5)]);else logger[_0x1c8bb2(0x283)](_0x1c8bb2(0x3b4));}else logger['full'](_0x1c8bb2(0x339));}),_0x3be792['on'](_0x199e5d(0x316),(_0x13312f,_0x5a5d55)=>{const _0x323818=_0x199e5d;if(validateAccess(_0x5a5d55,_0xa007aa)[_0x323818(0x312)])restoreBackupFile(_0x13312f);else logger['full'](_0x323818(0x2fa));}),_0x3be792['on'](_0x199e5d(0x3b8),_0x176fe5=>{const _0x491f2d=_0x199e5d;if(validateAccess(_0x176fe5,_0xa007aa)[_0x491f2d(0x312)])getMessages();else logger[_0x491f2d(0x283)](_0x491f2d(0x310));}),_0x3be792['on'](_0x199e5d(0x295),(_0x15e003,_0x5eaee3)=>{const _0x3d17c6=_0x199e5d;if(validateAccess(_0x5eaee3,_0xa007aa)[_0x3d17c6(0x312)])confirmMessage(_0x15e003);else logger['full'](_0x3d17c6(0x24b));}),_0x3be792['on'](_0x199e5d(0x30b),_0x20cd16=>{const _0x6d839d=_0x199e5d;if(validateAccess(_0x20cd16,_0xa007aa)[_0x6d839d(0x312)]){if(devices[_0xa007aa][_0x6d839d(0x372)])clearTimeout(devices[_0xa007aa][_0x6d839d(0x372)]);if(devices[_0xa007aa]['pidExpireLogin'])clearTimeout(devices[_0xa007aa][_0x6d839d(0x253)]);removeSocketListeners(getClient(_0x3be792['id'])[_0x6d839d(0x2f5)]),addBlacklist(_0xa007aa),devices[_0xa007aa]['telegramIpApproval']=null,devices[_0xa007aa][_0x6d839d(0x25c)]=null,devices[_0xa007aa][_0x6d839d(0x2b4)][_0x6d839d(0x2eb)]=null,logger[_0x6d839d(0x3be)](_0x6d839d(0x385)+_0xa007aa['slice'](-0x8)),io['to'](getClient(_0x3be792['id'])[_0x6d839d(0x2f5)])[_0x6d839d(0x2df)](_0x6d839d(0x2c7),{'access':{'allow':![],'reason':_0x6d839d(0x289),'token':null}});}else logger['full'](_0x6d839d(0x208));});}function initializeSocketBot(_0x3ab25a){const _0x1a2abc=_0x357005,_0x133f64=getClient(_0x3ab25a['id'])[_0x1a2abc(0x36b)],_0x5cb05b=getClient(_0x3ab25a['id'])[_0x1a2abc(0x2f5)];_0x3ab25a['on'](_0x1a2abc(0x269),(_0xb8ff3b,_0x108fe1)=>{const _0x263184=_0x1a2abc;if(validateAccess(_0x108fe1,_0x5cb05b)['allow']){if(pid[_0x133f64])pid[_0x133f64][_0x263184(0x20e)]({'function':_0x263184(0x221),'args':_0xb8ff3b});}else logger[_0x263184(0x283)](_0x263184(0x370));}),_0x3ab25a['on'](_0x1a2abc(0x2db),(_0x1673fb,_0x41a6d4)=>{const _0x6174ff=_0x1a2abc;if(validateAccess(_0x41a6d4,_0x5cb05b)[_0x6174ff(0x312)]){if(pid[_0x133f64])pid[_0x133f64][_0x6174ff(0x20e)]({'function':_0x6174ff(0x2ca),'args':_0x1673fb});}else logger[_0x6174ff(0x283)](_0x6174ff(0x35a));}),_0x3ab25a['on'](_0x1a2abc(0x2f7),(_0x4cf65f,_0x5804e8)=>{const _0x5a8e04=_0x1a2abc;if(validateAccess(_0x5804e8,_0x5cb05b)[_0x5a8e04(0x312)]){if(pid[_0x133f64])pid[_0x133f64][_0x5a8e04(0x20e)]({'function':_0x5a8e04(0x23b),'args':_0x4cf65f});}else logger['full'](_0x5a8e04(0x267));}),_0x3ab25a['on'](_0x1a2abc(0x2ac),(_0x2aded8,_0x222f5e)=>{const _0x485c4c=_0x1a2abc;if(validateAccess(_0x222f5e,_0x5cb05b)['allow']){if(pid[_0x133f64])pid[_0x133f64][_0x485c4c(0x20e)]({'function':_0x485c4c(0x262),'args':_0x2aded8});}else logger[_0x485c4c(0x283)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3ab25a['on'](_0x1a2abc(0x279),(_0x330b40,_0x2f97d6)=>{const _0x40cc22=_0x1a2abc;if(validateAccess(_0x2f97d6,_0x5cb05b)['allow']){if(pid[_0x133f64])pid[_0x133f64]['send']({'function':_0x40cc22(0x3a0),'args':_0x330b40});}else logger[_0x40cc22(0x283)](_0x40cc22(0x373));}),_0x3ab25a['on']('store-fiat',(_0x41248c,_0xcbb5bf)=>{const _0x1b8422=_0x1a2abc;if(validateAccess(_0xcbb5bf,_0x5cb05b)[_0x1b8422(0x312)]){if(pid[_0x133f64])pid[_0x133f64][_0x1b8422(0x20e)]({'function':_0x1b8422(0x265),'args':_0x41248c});}else logger['full'](_0x1b8422(0x33c));}),_0x3ab25a['on'](_0x1a2abc(0x362),_0x544c77=>{const _0x2909c9=_0x1a2abc;if(validateAccess(_0x544c77,_0x5cb05b)[_0x2909c9(0x312)]){if(pid[_0x133f64])pid[_0x133f64][_0x2909c9(0x20e)]({'function':_0x2909c9(0x1f9),'args':null});}else logger['full'](_0x2909c9(0x1e2));}),_0x3ab25a['on'](_0x1a2abc(0x30c),_0x58b043=>{const _0x3a4673=_0x1a2abc;if(validateAccess(_0x58b043,_0x5cb05b)[_0x3a4673(0x312)]){if(pid[_0x133f64])pid[_0x133f64][_0x3a4673(0x20e)]({'function':_0x3a4673(0x264),'args':null});}else logger[_0x3a4673(0x283)](_0x3a4673(0x30a));}),_0x3ab25a['on']('place-order',(_0x476051,_0x1d3d8a)=>{const _0x4cc078=_0x1a2abc;if(validateAccess(_0x1d3d8a,_0x5cb05b)['allow']){if(pid[_0x133f64])pid[_0x133f64][_0x4cc078(0x20e)]({'function':_0x4cc078(0x1fd),'args':_0x476051});}else logger[_0x4cc078(0x283)](_0x4cc078(0x358));}),_0x3ab25a['on']('cancel-loading',_0x140b3f=>{const _0x586515=_0x1a2abc;if(validateAccess(_0x140b3f,_0x5cb05b)[_0x586515(0x312)]){if(pid[_0x133f64])pid[_0x133f64]['send']({'function':'cancelLoading','args':null});}else logger[_0x586515(0x283)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3ab25a['on'](_0x1a2abc(0x331),_0x3a2d86=>{const _0x5afd13=_0x1a2abc;if(validateAccess(_0x3a2d86,_0x5cb05b)['allow']){if(pid[_0x133f64])pid[_0x133f64][_0x5afd13(0x20e)]({'function':_0x5afd13(0x201),'args':null});}else logger[_0x5afd13(0x283)](_0x5afd13(0x2b5));}),_0x3ab25a['on'](_0x1a2abc(0x344),_0x55568c=>{const _0x4e4893=_0x1a2abc;if(validateAccess(_0x55568c,_0x5cb05b)[_0x4e4893(0x312)])updateBB(_0x4e4893(0x39f));else logger[_0x4e4893(0x283)](_0x4e4893(0x24a));}),_0x3ab25a['on'](_0x1a2abc(0x3b8),_0x1846ea=>{const _0x596b23=_0x1a2abc;if(validateAccess(_0x1846ea,_0x5cb05b)[_0x596b23(0x312)])getMessages();else logger['full'](_0x596b23(0x310));}),_0x3ab25a['on'](_0x1a2abc(0x295),(_0x49caa9,_0x7f7f6a)=>{const _0x45dcca=_0x1a2abc;if(validateAccess(_0x7f7f6a,_0x5cb05b)[_0x45dcca(0x312)])confirmMessage(_0x49caa9);else logger[_0x45dcca(0x283)](_0x45dcca(0x24b));}),_0x3ab25a['on'](_0x1a2abc(0x30b),_0x539a9e=>{const _0x12a8f1=_0x1a2abc;if(validateAccess(_0x539a9e,_0x5cb05b)[_0x12a8f1(0x312)]){if(devices[_0x5cb05b][_0x12a8f1(0x372)])clearTimeout(devices[_0x5cb05b][_0x12a8f1(0x372)]);if(devices[_0x5cb05b][_0x12a8f1(0x253)])clearTimeout(devices[_0x5cb05b][_0x12a8f1(0x253)]);removeSocketListeners(getClient(_0x3ab25a['id'])[_0x12a8f1(0x2f5)]),addBlacklist(_0x5cb05b),devices[_0x5cb05b]['telegramIpApproval']=null,devices[_0x5cb05b][_0x12a8f1(0x25c)]=null,devices[_0x5cb05b][_0x12a8f1(0x2b4)]['token']=null,logger[_0x12a8f1(0x3be)]('Logged\x20out\x20user\x20...'+_0x5cb05b[_0x12a8f1(0x287)](-0x8)),io['to'](getClient(_0x3ab25a['id'])['uuid'])[_0x12a8f1(0x2df)](_0x12a8f1(0x2c7),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x12a8f1(0x208));});}function removeSocketListeners(_0x47bcc4){getClientsWithUuid(_0x47bcc4)['forEach'](_0x540ff4=>{const _0x26b1ea=_0x32fb;getSocket(_0x540ff4['id'])[_0x26b1ea(0x215)]();});}function cleanSettings(){const _0x565ed3=_0x357005;let _0x38bbfb=settings;return settings[_0x565ed3(0x389)]&&settings[_0x565ed3(0x389)]!=''&&(_0x38bbfb={..._0x38bbfb,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x38bbfb={..._0x38bbfb,'bbPassword':_0x565ed3(0x231)}),(settings[_0x565ed3(0x248)]&&settings[_0x565ed3(0x248)]==_0x565ed3(0x2ce)||settings['telegramToken']&&settings[_0x565ed3(0x389)]==_0x565ed3(0x2ce))&&(_0x38bbfb={..._0x38bbfb,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x565ed3(0x389)]=='***'}}),_0x38bbfb;}async function updateBB(_0x28aecd){const _0x4994f8=_0x357005;await backupConfigFiles(),installingUpdate=!![],config[_0x4994f8(0x2b8)](_0x2de2df=>{const _0x2d2976=_0x4994f8;restartBot(_0x2de2df[_0x2d2976(0x33a)]);});if(_0x28aecd==_0x4994f8(0x39f))process[_0x4994f8(0x20e)]({'update':!![],'environment':environment},_0x49d523=>{});else _0x28aecd==_0x4994f8(0x2c6)&&process[_0x4994f8(0x20e)]({'reinstall':!![],'environment':environment},_0x231042=>{});}function startBot(_0x44b527,_0x3cf02c,_0x2e91b2){const _0x3511a5=_0x357005;if(debugging)_0x44b527[_0x3511a5(0x3b9)]('-d');let _0x17d80c=![];const _0x5a966d=_0x44b527[0x0];_0x3cf02c={..._0x3cf02c,'stdio':[_0x3511a5(0x37d),'inherit',_0x3511a5(0x37d),_0x3511a5(0x3aa)]},pid[_0x5a966d]=childProcess[_0x3511a5(0x330)](botfile,_0x44b527,_0x3cf02c),pid[_0x5a966d]['on'](_0x3511a5(0x1df),_0x4e72a5=>{const _0x3c2910=_0x3511a5;switch(Object['keys'](_0x4e72a5)[0x0]){case _0x3c2910(0x2a3):updateBotName(_0x5a966d,_0x4e72a5[_0x3c2910(0x2a3)]);break;case _0x3c2910(0x35e):updateBotManager();break;case _0x3c2910(0x2c7):updateStatus(_0x5a966d,_0x4e72a5[_0x3c2910(0x2c7)]);break;case _0x3c2910(0x2be):updateLive(_0x5a966d,_0x4e72a5[_0x3c2910(0x2be)]);break;case _0x3c2910(0x3c4):updateLive(_0x5a966d,_0x4e72a5['started']),io['to'](_0x5a966d)[_0x3c2910(0x2df)](_0x3c2910(0x2c7),{'access':{'allow':![],'reason':_0x3c2910(0x35d),'token':null}});break;case _0x3c2910(0x211):_0x4e72a5[_0x3c2910(0x211)]==_0x3c2910(0x36c)&&restartBot(_0x5a966d);_0x4e72a5[_0x3c2910(0x211)]==_0x3c2910(0x306)&&toggleBot(_0x5a966d,'disabled',_0x3c2910(0x259));break;case _0x3c2910(0x22f):sendTelegram(_0x5a966d,_0x4e72a5[_0x3c2910(0x22f)]);break;case'telegrammsg':sendTelegramMsg(_0x4e72a5['telegrammsg']);break;case'function':io['to'](_0x5a966d)[_0x3c2910(0x2df)](_0x4e72a5[_0x3c2910(0x345)],_0x4e72a5[_0x3c2910(0x2c3)]);break;}}),pid[_0x5a966d]['on'](_0x3511a5(0x391),function(_0x58ed18){if(_0x17d80c)return;_0x17d80c=!![],_0x2e91b2(_0x58ed18);}),pid[_0x5a966d]['on'](_0x3511a5(0x35f),async function(_0x169a5c){const _0x2424df=_0x3511a5;if(installingUpdate)return;if(_0x17d80c)return;_0x17d80c=!![],_0x2e91b2(null);const _0x1a19c6=dbConfig[_0x2424df(0x375)](_0x2424df(0x260))['find']({'botID':_0x5a966d})['value']();_0x1a19c6&&(_0x1a19c6[_0x2424df(0x2c7)]==_0x2424df(0x351)||_0x1a19c6['status']==_0x2424df(0x28e))&&(await sleep(0x3e8),updateLive(_0x5a966d,_0x2424df(0x259)),logger[_0x2424df(0x283)](_0x2424df(0x3bd)+_0x5a966d),startBot([_0x5a966d,userID],{'cwd':bbpath},function(_0x118692){const _0xb905cc=_0x2424df;if(_0x118692)logger[_0xb905cc(0x283)](_0x118692);}));});}function stopBot(_0x2a61a3){const _0x4eadee=_0x357005;getClientsWithBotID(_0x2a61a3)['forEach'](_0x529d55=>{getSocket(_0x529d55['id'])['disconnect'](!![]),removeClient(_0x529d55['id']);}),pid[_0x2a61a3]&&(pid[_0x2a61a3][_0x4eadee(0x306)](),pid[_0x2a61a3]=null);}function restartBot(_0x1e34e0){const _0x5cb8ee=_0x357005;if(pid[_0x1e34e0])pid[_0x1e34e0][_0x5cb8ee(0x306)]();}function addBot(){const _0x5a58a8=_0x357005;let _0x8a545e;for(let _0x3a95e2=0x1;_0x3a95e2<0x3e9;_0x3a95e2++){_0x8a545e=_0x3a95e2[_0x5a58a8(0x308)]()[_0x5a58a8(0x366)](0x3,'0');let _0x3bace0=config[_0x5a58a8(0x2f8)](_0x46e434=>_0x46e434[_0x5a58a8(0x33a)]==_0x8a545e);if(!_0x3bace0)break;}if(_0x8a545e==='1000'){logger['full'](_0x5a58a8(0x34e));return;}logger[_0x5a58a8(0x283)](_0x5a58a8(0x1f2)+_0x8a545e),dbConfig['get'](_0x5a58a8(0x260))[_0x5a58a8(0x3b9)]({'botID':_0x8a545e,'botname':_0x5a58a8(0x3a8)+_0x8a545e,'status':_0x5a58a8(0x28e),'live':''})[_0x5a58a8(0x327)](),startBot([_0x8a545e,userID],{'cwd':bbpath},function(_0x1ffccc){const _0x490de0=_0x5a58a8;if(_0x1ffccc)logger[_0x490de0(0x283)](_0x1ffccc);}),config=getConfiguration(),io['to'](_0x5a58a8(0x1f1))[_0x5a58a8(0x2df)](_0x5a58a8(0x260),config),broadcastToBots('bots',JSON[_0x5a58a8(0x31d)](config));}function deleteBot(_0x35fc22){const _0x51a07d=_0x357005;getClientsWithBotID(_0x35fc22)['forEach'](_0x2721a2=>{const _0x1e9935=_0x32fb;getSocket(_0x2721a2['id'])[_0x1e9935(0x218)](!![]),removeClient(_0x2721a2['id']);}),dbConfig[_0x51a07d(0x375)](_0x51a07d(0x260))['remove']({'botID':_0x35fc22})[_0x51a07d(0x327)](),logger[_0x51a07d(0x283)](_0x51a07d(0x367)+_0x35fc22),stopBot(_0x35fc22);try{if(fs[_0x51a07d(0x376)](path['join'](configpath,_0x51a07d(0x38a)+_0x35fc22+_0x51a07d(0x38c))))fs['unlinkSync'](path[_0x51a07d(0x1e8)](configpath,_0x51a07d(0x38a)+_0x35fc22+'-config.json'));if(fs['existsSync'](path[_0x51a07d(0x1e8)](configpath,'bot-'+_0x35fc22+_0x51a07d(0x247))))fs[_0x51a07d(0x3b7)](path[_0x51a07d(0x1e8)](configpath,_0x51a07d(0x38a)+_0x35fc22+_0x51a07d(0x247)));if(fs[_0x51a07d(0x376)](path[_0x51a07d(0x1e8)](configpath,_0x51a07d(0x38a)+_0x35fc22+_0x51a07d(0x240))))fs[_0x51a07d(0x3b7)](path['join'](configpath,_0x51a07d(0x38a)+_0x35fc22+_0x51a07d(0x240)));if(fs[_0x51a07d(0x376)](path[_0x51a07d(0x1e8)](configpath,_0x51a07d(0x38a)+_0x35fc22+_0x51a07d(0x2f9))))fs[_0x51a07d(0x3b7)](path[_0x51a07d(0x1e8)](configpath,'bot-'+_0x35fc22+_0x51a07d(0x2f9)));}catch(_0x37745d){if(_0x37745d)logger[_0x51a07d(0x283)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x37745d);}config=getConfiguration(),io['to']('botmanager')[_0x51a07d(0x2df)](_0x51a07d(0x260),config),broadcastToBots(_0x51a07d(0x260),JSON['stringify'](config));}function toggleBot(_0x32f50e,_0x1978ed,_0x51c8f0){const _0x38e096=_0x357005;dbConfig[_0x38e096(0x375)]('bots')[_0x38e096(0x2f8)]({'botID':_0x32f50e})[_0x38e096(0x3c6)]({'status':_0x1978ed})[_0x38e096(0x3c6)]({'live':_0x51c8f0})[_0x38e096(0x327)]();if(_0x1978ed==_0x38e096(0x351)||_0x1978ed=='new')logger['full']('Enabled\x20Bot\x20'+_0x32f50e),startBot([_0x32f50e,userID],{'cwd':bbpath},function(_0x59cccf){const _0x341806=_0x38e096;if(_0x59cccf)logger[_0x341806(0x283)](_0x59cccf);});else(_0x1978ed==_0x38e096(0x2b1)||_0x1978ed==_0x38e096(0x37b))&&(logger[_0x38e096(0x283)](_0x38e096(0x1fb)+_0x32f50e),stopBot(_0x32f50e));config=getConfiguration(),io['to'](_0x38e096(0x1f1))[_0x38e096(0x2df)](_0x38e096(0x260),config),broadcastToBots(_0x38e096(0x260),JSON[_0x38e096(0x31d)](config));}function toggleStatus(_0x276547){const _0x2457e8=_0x357005;let _0x48e9d5=dbConfig['get'](_0x2457e8(0x260))[_0x2457e8(0x2f8)]({'botID':_0x276547})[_0x2457e8(0x21a)](),_0x4fc835;if(_0x48e9d5[_0x2457e8(0x2c7)]==='enabled')_0x4fc835=_0x2457e8(0x2b1);else{if(_0x48e9d5[_0x2457e8(0x2c7)]===_0x2457e8(0x28e))_0x4fc835=_0x2457e8(0x37b);else{if(_0x48e9d5[_0x2457e8(0x2c7)]===_0x2457e8(0x37b))_0x4fc835=_0x2457e8(0x28e);else{if(_0x48e9d5[_0x2457e8(0x2c7)]===_0x2457e8(0x2b1))_0x4fc835=_0x2457e8(0x351);}}}return _0x4fc835;}function updateStatus(_0x57ef66,_0x50e1a1){const _0x14840b=_0x357005;dbConfig[_0x14840b(0x375)](_0x14840b(0x260))[_0x14840b(0x2f8)]({'botID':_0x57ef66})[_0x14840b(0x3c6)]({'status':_0x50e1a1})['write'](),config=getConfiguration(),io['to'](_0x14840b(0x1f1))[_0x14840b(0x2df)](_0x14840b(0x260),config),broadcastToBots(_0x14840b(0x260),JSON['stringify'](config));}function updateLive(_0x4543d5,_0x5c3c7b){const _0x2fb200=_0x357005;dbConfig[_0x2fb200(0x375)]('bots')[_0x2fb200(0x2f8)]({'botID':_0x4543d5})['assign']({'live':_0x5c3c7b})[_0x2fb200(0x327)](),config=getConfiguration(),io['to']('botmanager')[_0x2fb200(0x2df)](_0x2fb200(0x260),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x514451,_0x5a9304){const _0x2320d5=_0x357005;dbConfig[_0x2320d5(0x375)](_0x2320d5(0x260))[_0x2320d5(0x2f8)]({'botID':_0x514451})[_0x2320d5(0x3c6)]({'botname':_0x5a9304})[_0x2320d5(0x327)](),config=getConfiguration(),io['to'](_0x2320d5(0x1f1))[_0x2320d5(0x2df)](_0x2320d5(0x260),config),broadcastToBots(_0x2320d5(0x260),JSON[_0x2320d5(0x31d)](config));}function updateBotManager(){const _0x2ac920=_0x357005;config=getConfiguration(),io['to'](_0x2ac920(0x1f1))[_0x2ac920(0x2df)]('bots',config),broadcastToBots(_0x2ac920(0x260),JSON[_0x2ac920(0x31d)](config));}function toggleBotMode(_0x31bf84){const _0xd01bc4=_0x357005;if(pid[_0x31bf84])pid[_0x31bf84][_0xd01bc4(0x20e)]({'function':_0xd01bc4(0x278),'args':null});else{const _0x5b3db9=configpath+_0xd01bc4(0x38a)+_0x31bf84+_0xd01bc4(0x38c),_0x10f176=fs[_0xd01bc4(0x394)](_0x5b3db9),_0x18b3d6=JSON[_0xd01bc4(0x2a1)](_0x10f176),_0x22304f=_0x18b3d6[_0xd01bc4(0x36b)][0x0][_0xd01bc4(0x203)];_0x18b3d6[_0xd01bc4(0x36b)][0x0][_0xd01bc4(0x203)]=!_0x22304f;const _0x3d989a=JSON[_0xd01bc4(0x31d)](_0x18b3d6,null,0x2);fs[_0xd01bc4(0x300)](_0x5b3db9,_0x3d989a),config=getConfiguration(),io['to'](_0xd01bc4(0x1f1))['emit'](_0xd01bc4(0x260),config),broadcastToBots(_0xd01bc4(0x260),JSON[_0xd01bc4(0x31d)](config));}}function telegramError(_0x552cbf){const _0x3b5ab2=_0x357005;logger['simple'](getTimeStamp()+_0x3b5ab2(0x252));}function validateTelegram(_0x1dc148){const _0x1daa1f=_0x357005;if(_0x1dc148['from'][_0x1daa1f(0x266)]!=settings[_0x1daa1f(0x383)]&&'@'+_0x1dc148['from'][_0x1daa1f(0x266)]!=settings[_0x1daa1f(0x383)])return tgBot[_0x1daa1f(0x3b5)](_0x1dc148[_0x1daa1f(0x31a)]['id'],_0x1daa1f(0x368),{'parse_mode':_0x1daa1f(0x3a5)})['catch'](_0x1c3649=>{telegramError(_0x1c3649);}),![];return!![];}async function initTelegram(){const _0x42d15f=_0x357005;if(tgBot)tgBot[_0x42d15f(0x21b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x3091fa=_0x42d15f(0x2b3);_0x3091fa+='\x0a',_0x3091fa+=_0x42d15f(0x1fc),_0x3091fa+=_0x42d15f(0x2bc),_0x3091fa+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x3091fa+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3091fa+=_0x42d15f(0x2c9),_0x3091fa+=_0x42d15f(0x29a),_0x3091fa+=_0x42d15f(0x3b1),_0x3091fa+=_0x42d15f(0x334),_0x3091fa+=_0x42d15f(0x234),_0x3091fa+=_0x42d15f(0x2f6),_0x3091fa+=_0x42d15f(0x2f0),_0x3091fa+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3091fa+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x3091fa+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x8126b3=_0x42d15f(0x246);_0x8126b3+='\x0a',_0x8126b3+=_0x3091fa,tgBot[_0x42d15f(0x1e6)](/\/start/,_0x2956e7=>{const _0x577858=_0x42d15f;if(!validateTelegram(_0x2956e7))return;if(settings[_0x577858(0x33f)]!=_0x2956e7[_0x577858(0x31a)]['id'])updateSetting(_0x577858(0x33f),_0x2956e7[_0x577858(0x31a)]['id']);updateSetting(_0x577858(0x2d6),!![]),tgBot['sendMessage'](_0x2956e7[_0x577858(0x31a)]['id'],_0x8126b3)[_0x577858(0x319)](_0xa5c9e9=>{telegramError(_0xa5c9e9);});}),tgBot['onText'](/\/enable/,_0x304031=>{const _0x2375e4=_0x42d15f;if(!validateTelegram(_0x304031))return;if(settings[_0x2375e4(0x33f)]!=_0x304031['chat']['id'])updateSetting(_0x2375e4(0x33f),_0x304031['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2375e4(0x3b5)](_0x304031[_0x2375e4(0x31a)]['id'],'Notifications\x20enabled')[_0x2375e4(0x319)](_0x556222=>{telegramError(_0x556222);});}),tgBot[_0x42d15f(0x1e6)](/\/config/,async _0x163054=>{const _0x4f323d=_0x42d15f;if(!validateTelegram(_0x163054))return;tgBot[_0x4f323d(0x38e)]('callback_query'),tgBot[_0x4f323d(0x3b5)](_0x163054[_0x4f323d(0x31a)]['id'],_0x4f323d(0x322),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x4f323d(0x275)},{'text':'Alerts','callback_data':_0x4f323d(0x33b)},{'text':_0x4f323d(0x3a7),'callback_data':_0x4f323d(0x20a)}]]}})['catch'](_0x13cad3=>{telegramError(_0x13cad3);}),tgBot['on'](_0x4f323d(0x228),async _0x3c3d99=>{const _0x3e01ec=_0x4f323d,_0x266e34=_0x3c3d99[_0x3e01ec(0x29b)],_0x5d91b5=_0x3c3d99[_0x3e01ec(0x1df)];tgBot['answerCallbackQuery'](_0x3c3d99['id'])[_0x3e01ec(0x2dd)](async()=>{const _0x4e828c=_0x3e01ec;_0x266e34==_0x4e828c(0x275)&&(updateSetting(_0x4e828c(0x2d8),_0x4e828c(0x275)),updateSetting(_0x4e828c(0x2d6),!![]),await tgBot[_0x4e828c(0x3b5)](_0x5d91b5[_0x4e828c(0x31a)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x307d0b=>{telegramError(_0x307d0b);}));_0x266e34==_0x4e828c(0x33b)&&(updateSetting(_0x4e828c(0x2d8),'alerts'),updateSetting(_0x4e828c(0x2d6),!![]),await tgBot[_0x4e828c(0x3b5)](_0x5d91b5[_0x4e828c(0x31a)]['id'],_0x4e828c(0x302))['catch'](_0x4db0c3=>{telegramError(_0x4db0c3);}));_0x266e34==_0x4e828c(0x20a)&&(updateSetting(_0x4e828c(0x2d8),_0x4e828c(0x20a)),updateSetting(_0x4e828c(0x2d6),!![]),await tgBot[_0x4e828c(0x3b5)](_0x5d91b5[_0x4e828c(0x31a)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x45dca9=>{telegramError(_0x45dca9);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x5d91b5[_0x4e828c(0x31a)]['id'],_0x4e828c(0x227))[_0x4e828c(0x319)](_0x46e395=>{telegramError(_0x46e395);});}),tgBot[_0x3e01ec(0x38e)](_0x3e01ec(0x228));});}),tgBot[_0x42d15f(0x1e6)](/\/status/,_0xa21398=>{const _0x3a20e5=_0x42d15f;if(!validateTelegram(_0xa21398))return;const _0x4ccc5a=getBotsWithMode();let _0x18b2a8=_0x3a20e5(0x22d);config[_0x3a20e5(0x2b8)](_0x2c4e7=>{const _0x56986f=_0x3a20e5,_0x3eec2d=_0x4ccc5a[_0x56986f(0x2f8)](_0x39c95b=>_0x39c95b[_0x56986f(0x33a)]==_0x2c4e7['botID'])[_0x56986f(0x2d4)];_0x18b2a8+=_0x56986f(0x3a8)+_0x2c4e7['botID']+':\x20'+_0x2c4e7[_0x56986f(0x2c7)]+_0x56986f(0x34d)+_0x3eec2d+'\x20|\x20'+_0x2c4e7[_0x56986f(0x2be)]+'\x0a';}),_0x18b2a8+='\x0a',_0x18b2a8+=_0x3a20e5(0x299),_0x18b2a8+=!settings[_0x3a20e5(0x2d6)]?_0x3a20e5(0x23d):_0x3a20e5(0x2af),_0x18b2a8+=settings[_0x3a20e5(0x2d6)]?settings['telegramEvents']==_0x3a20e5(0x20a)?_0x3a20e5(0x257):_0x3a20e5(0x1f6)+settings['telegramEvents']+'\x20only\x0a':'',tgBot['sendMessage'](_0xa21398[_0x3a20e5(0x31a)]['id'],_0x18b2a8,{'parse_mode':'HTML'})['catch'](_0x545215=>{telegramError(_0x545215);});}),tgBot[_0x42d15f(0x1e6)](/\/restart/,_0x5032ea=>{const _0xb4a8ed=_0x42d15f;if(!validateTelegram(_0x5032ea))return;tgBot[_0xb4a8ed(0x38e)]('callback_query');const _0x1df22d=getEnabledBots();if(_0x1df22d[_0xb4a8ed(0x226)]==0x0)tgBot[_0xb4a8ed(0x3b5)](_0x5032ea[_0xb4a8ed(0x31a)]['id'],_0xb4a8ed(0x23a))[_0xb4a8ed(0x319)](_0x137eea=>{telegramError(_0x137eea);});else{if(_0x1df22d['length']>0x1)_0x1df22d['push']({'botID':_0xb4a8ed(0x20a)});let _0x388ee0=[],_0x2283c0=[];const _0x3f6124=_0x1df22d[_0xb4a8ed(0x226)]%0x4==0x0||_0x1df22d[_0xb4a8ed(0x226)]%0x4==0x3||_0x1df22d['length']%0x3==0x1?0x4:0x3;let _0x1c3f0f=0x0;_0x1df22d[_0xb4a8ed(0x2b8)]((_0x53973c,_0x363011)=>{const _0x2ca23f=_0xb4a8ed;if(_0x363011%_0x3f6124==0x0)_0x2283c0=[];_0x2283c0[_0x2ca23f(0x3b9)]({'text':_0x53973c[_0x2ca23f(0x33a)]==_0x2ca23f(0x20a)?_0x2ca23f(0x2a4):_0x2ca23f(0x3a8)+_0x53973c[_0x2ca23f(0x33a)],'callback_data':_0x53973c[_0x2ca23f(0x33a)]}),_0x363011%_0x3f6124==0x0&&(_0x388ee0[_0x1c3f0f]=_0x2283c0,_0x1c3f0f++);}),tgBot['sendMessage'](_0x5032ea['chat']['id'],_0xb4a8ed(0x36f),{'reply_markup':{'inline_keyboard':_0x388ee0}})[_0xb4a8ed(0x319)](_0x271f8a=>{telegramError(_0x271f8a);}),tgBot['on']('callback_query',async _0x271c40=>{const _0x23ddc9=_0xb4a8ed,_0x7a040f=_0x271c40[_0x23ddc9(0x29b)],_0x3c35c2=_0x271c40[_0x23ddc9(0x1df)];tgBot['answerCallbackQuery'](_0x271c40['id'])[_0x23ddc9(0x2dd)](async()=>{const _0x389761=_0x23ddc9;_0x7a040f==_0x389761(0x20a)?config['forEach'](_0x571b06=>{const _0x30dffb=_0x389761;restartBot(_0x571b06[_0x30dffb(0x33a)]);}):restartBot(_0x7a040f);}),tgBot['removeListener'](_0x23ddc9(0x228));});}}),tgBot['onText'](/\/on/,_0x5d5a22=>{const _0x1e4717=_0x42d15f;if(!validateTelegram(_0x5d5a22))return;tgBot['removeListener'](_0x1e4717(0x228));const _0x2abc14=getDisabledBots();if(_0x2abc14[_0x1e4717(0x226)]==0x0)tgBot['sendMessage'](_0x5d5a22['chat']['id'],_0x1e4717(0x1de))[_0x1e4717(0x319)](_0x3123a0=>{telegramError(_0x3123a0);});else{if(_0x2abc14[_0x1e4717(0x226)]>0x1)_0x2abc14[_0x1e4717(0x3b9)]({'botID':'all'});let _0x17e66a=[],_0x1a7fa9=[];const _0x2eebfe=_0x2abc14[_0x1e4717(0x226)]%0x4==0x0||_0x2abc14[_0x1e4717(0x226)]%0x4==0x3||_0x2abc14[_0x1e4717(0x226)]%0x3==0x1?0x4:0x3;let _0x3b5f24=0x0;_0x2abc14[_0x1e4717(0x2b8)]((_0x3de05c,_0x540d90)=>{const _0x86da78=_0x1e4717;if(_0x540d90%_0x2eebfe==0x0)_0x1a7fa9=[];_0x1a7fa9[_0x86da78(0x3b9)]({'text':_0x3de05c[_0x86da78(0x33a)]==_0x86da78(0x20a)?_0x86da78(0x2a4):'Bot\x20'+_0x3de05c[_0x86da78(0x33a)],'callback_data':_0x3de05c[_0x86da78(0x33a)]}),_0x540d90%_0x2eebfe==0x0&&(_0x17e66a[_0x3b5f24]=_0x1a7fa9,_0x3b5f24++);}),tgBot[_0x1e4717(0x3b5)](_0x5d5a22[_0x1e4717(0x31a)]['id'],_0x1e4717(0x396),{'reply_markup':{'inline_keyboard':_0x17e66a}})[_0x1e4717(0x319)](_0x8334f7=>{telegramError(_0x8334f7);}),tgBot['on'](_0x1e4717(0x228),async _0x29ca65=>{const _0x449bec=_0x1e4717,_0x6e0f99=_0x29ca65[_0x449bec(0x29b)],_0x284d0d=_0x29ca65[_0x449bec(0x1df)];tgBot['answerCallbackQuery'](_0x29ca65['id'])[_0x449bec(0x2dd)](async()=>{const _0x3bcf03=_0x449bec;_0x6e0f99==_0x3bcf03(0x20a)?(tgBot[_0x3bcf03(0x3b5)](_0x284d0d[_0x3bcf03(0x31a)]['id'],_0x3bcf03(0x27f))[_0x3bcf03(0x319)](_0x38c8b4=>{telegramError(_0x38c8b4);}),_0x2abc14['forEach'](_0x49b321=>{const _0x2e4555=_0x3bcf03;if(_0x49b321[_0x2e4555(0x33a)]!=_0x2e4555(0x20a))toggleBot(_0x49b321['botID'],toggleStatus(_0x49b321[_0x2e4555(0x33a)]),_0x2e4555(0x259));})):(tgBot[_0x3bcf03(0x3b5)](_0x284d0d['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x6e0f99)[_0x3bcf03(0x319)](_0x2d3cec=>{telegramError(_0x2d3cec);}),toggleBot(_0x6e0f99,toggleStatus(_0x6e0f99),'stopped'));}),tgBot['removeListener'](_0x449bec(0x228));});}}),tgBot['onText'](/\/off/,_0x5ba6d6=>{const _0x37abae=_0x42d15f;if(!validateTelegram(_0x5ba6d6))return;tgBot[_0x37abae(0x38e)](_0x37abae(0x228));const _0x25242c=getEnabledBots();if(_0x25242c[_0x37abae(0x226)]==0x0)tgBot[_0x37abae(0x3b5)](_0x5ba6d6[_0x37abae(0x31a)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x1be6fb=>{telegramError(_0x1be6fb);});else{if(_0x25242c[_0x37abae(0x226)]>0x1)_0x25242c['push']({'botID':_0x37abae(0x20a)});let _0x5ab68d=[],_0x1aeca3=[];const _0x408e82=_0x25242c[_0x37abae(0x226)]%0x4==0x0||_0x25242c[_0x37abae(0x226)]%0x4==0x3||_0x25242c[_0x37abae(0x226)]%0x3==0x1?0x4:0x3;let _0x5a52e8=0x0;_0x25242c[_0x37abae(0x2b8)]((_0x4a53a5,_0x3c140f)=>{const _0x54d6d0=_0x37abae;if(_0x3c140f%_0x408e82==0x0)_0x1aeca3=[];_0x1aeca3[_0x54d6d0(0x3b9)]({'text':_0x4a53a5[_0x54d6d0(0x33a)]=='all'?_0x54d6d0(0x2a4):_0x54d6d0(0x3a8)+_0x4a53a5[_0x54d6d0(0x33a)],'callback_data':_0x4a53a5[_0x54d6d0(0x33a)]}),_0x3c140f%_0x408e82==0x0&&(_0x5ab68d[_0x5a52e8]=_0x1aeca3,_0x5a52e8++);}),tgBot[_0x37abae(0x3b5)](_0x5ba6d6[_0x37abae(0x31a)]['id'],_0x37abae(0x212),{'reply_markup':{'inline_keyboard':_0x5ab68d}})[_0x37abae(0x319)](_0x23b887=>{telegramError(_0x23b887);}),tgBot['on']('callback_query',async _0x11a27d=>{const _0x25044e=_0x37abae,_0x97fc69=_0x11a27d[_0x25044e(0x29b)],_0x45d2ea=_0x11a27d[_0x25044e(0x1df)];tgBot[_0x25044e(0x28c)](_0x11a27d['id'])[_0x25044e(0x2dd)](async()=>{const _0x162440=_0x25044e;_0x97fc69==_0x162440(0x20a)?(tgBot[_0x162440(0x3b5)](_0x45d2ea[_0x162440(0x31a)]['id'],_0x162440(0x2a2))[_0x162440(0x319)](_0x184f67=>{telegramError(_0x184f67);}),_0x25242c[_0x162440(0x2b8)](_0x4e599d=>{const _0x4d164b=_0x162440;if(_0x4e599d[_0x4d164b(0x33a)]!='all')toggleBot(_0x4e599d[_0x4d164b(0x33a)],toggleStatus(_0x4e599d[_0x4d164b(0x33a)]),'stopped');})):(tgBot[_0x162440(0x3b5)](_0x45d2ea['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x97fc69)[_0x162440(0x319)](_0x13ccc9=>{telegramError(_0x13ccc9);}),toggleBot(_0x97fc69,toggleStatus(_0x97fc69),_0x162440(0x259)));}),tgBot[_0x25044e(0x38e)]('callback_query');});}}),tgBot['onText'](/\/metrics/,_0xdf44a5=>{const _0x557ab4=_0x42d15f;if(!validateTelegram(_0xdf44a5))return;tgBot[_0x557ab4(0x38e)](_0x557ab4(0x228));const _0xb6e3ee=getEnabledBots();if(_0xb6e3ee[_0x557ab4(0x226)]==0x0)tgBot[_0x557ab4(0x3b5)](_0xdf44a5['chat']['id'],_0x557ab4(0x23a))['catch'](_0x4660f5=>{telegramError(_0x4660f5);});else{if(_0xb6e3ee[_0x557ab4(0x226)]>0x1){let _0x5b8600=[],_0x532877=[];const _0x312e49=_0xb6e3ee[_0x557ab4(0x226)]%0x4==0x0||_0xb6e3ee[_0x557ab4(0x226)]%0x4==0x3||_0xb6e3ee[_0x557ab4(0x226)]%0x3==0x1?0x4:0x3;let _0x45112c=0x0;_0xb6e3ee[_0x557ab4(0x2b8)]((_0x1ca47b,_0x3bbc18)=>{const _0x310dee=_0x557ab4;if(_0x3bbc18%_0x312e49==0x0)_0x532877=[];_0x532877[_0x310dee(0x3b9)]({'text':_0x310dee(0x3a8)+_0x1ca47b['botID'],'callback_data':_0x1ca47b['botID']}),_0x3bbc18%_0x312e49==0x0&&(_0x5b8600[_0x45112c]=_0x532877,_0x45112c++);}),tgBot['sendMessage'](_0xdf44a5['chat']['id'],_0x557ab4(0x31e),{'reply_markup':{'inline_keyboard':_0x5b8600}})['catch'](_0x4c680e=>{telegramError(_0x4c680e);}),tgBot['on'](_0x557ab4(0x228),async _0x36dc01=>{const _0x1f28d2=_0x557ab4,_0x340635=_0x36dc01['data'],_0x7fd028=_0x36dc01[_0x1f28d2(0x1df)];tgBot[_0x1f28d2(0x28c)](_0x36dc01['id'])[_0x1f28d2(0x2dd)](async()=>{const _0x176285=_0x1f28d2;if(pid[_0x340635])pid[_0x340635][_0x176285(0x20e)]({'function':_0x176285(0x318),'args':null});}),tgBot[_0x1f28d2(0x38e)]('callback_query');});}else{const _0x22a1fb=_0xb6e3ee[0x0]['botID'];if(pid[_0x22a1fb])pid[_0x22a1fb]['send']({'function':_0x557ab4(0x318),'args':null});}}}),tgBot[_0x42d15f(0x1e6)](/\/portfolio/,_0x295f9c=>{const _0x59d385=_0x42d15f;if(!validateTelegram(_0x295f9c))return;tgBot[_0x59d385(0x38e)]('callback_query');const _0xa9d092=getEnabledBots();if(_0xa9d092[_0x59d385(0x226)]==0x0)tgBot['sendMessage'](_0x295f9c['chat']['id'],_0x59d385(0x23a))[_0x59d385(0x319)](_0x5ce0ee=>{telegramError(_0x5ce0ee);});else{if(_0xa9d092[_0x59d385(0x226)]>0x1){let _0x5ec73d=[],_0x317d06=[];const _0x3b9f7e=_0xa9d092[_0x59d385(0x226)]%0x4==0x0||_0xa9d092['length']%0x4==0x3||_0xa9d092[_0x59d385(0x226)]%0x3==0x1?0x4:0x3;let _0x17881e=0x0;_0xa9d092['forEach']((_0x4aa4bb,_0x168cb8)=>{const _0x1ae3c0=_0x59d385;if(_0x168cb8%_0x3b9f7e==0x0)_0x317d06=[];_0x317d06[_0x1ae3c0(0x3b9)]({'text':_0x1ae3c0(0x3a8)+_0x4aa4bb[_0x1ae3c0(0x33a)],'callback_data':_0x4aa4bb[_0x1ae3c0(0x33a)]}),_0x168cb8%_0x3b9f7e==0x0&&(_0x5ec73d[_0x17881e]=_0x317d06,_0x17881e++);}),tgBot[_0x59d385(0x3b5)](_0x295f9c[_0x59d385(0x31a)]['id'],_0x59d385(0x356),{'reply_markup':{'inline_keyboard':_0x5ec73d}})[_0x59d385(0x319)](_0x307c9d=>{telegramError(_0x307c9d);}),tgBot['on'](_0x59d385(0x228),async _0x990c5=>{const _0x2d5359=_0x59d385,_0x5e7f9e=_0x990c5['data'],_0x31ed86=_0x990c5[_0x2d5359(0x1df)];tgBot['answerCallbackQuery'](_0x990c5['id'])[_0x2d5359(0x2dd)](async()=>{const _0x1aa0f2=_0x2d5359;if(pid[_0x5e7f9e])pid[_0x5e7f9e][_0x1aa0f2(0x20e)]({'function':_0x1aa0f2(0x23e),'args':null});}),tgBot[_0x2d5359(0x38e)](_0x2d5359(0x228));});}else{const _0x138d81=_0xa9d092[0x0]['botID'];if(pid[_0x138d81])pid[_0x138d81][_0x59d385(0x20e)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x49437d=>{const _0x5b2271=_0x42d15f;if(!validateTelegram(_0x49437d))return;tgBot[_0x5b2271(0x38e)](_0x5b2271(0x228)),await getMessages();if(!updateAvailable)tgBot[_0x5b2271(0x3b5)](_0x49437d[_0x5b2271(0x31a)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x5b2271(0x319)](_0x3475fc=>{telegramError(_0x3475fc);});else!validInstallation?tgBot[_0x5b2271(0x3b5)](_0x49437d[_0x5b2271(0x31a)]['id'],_0x5b2271(0x2f2))['catch'](_0x5e6a3e=>{telegramError(_0x5e6a3e);}):(tgBot['sendMessage'](_0x49437d[_0x5b2271(0x31a)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x5b2271(0x319)](_0x3119ef=>{telegramError(_0x3119ef);}),tgBot['on']('callback_query',async _0x1a492f=>{const _0x35b6c3=_0x5b2271,_0x1a078b=_0x1a492f[_0x35b6c3(0x29b)],_0x5ab611=_0x1a492f['message'];tgBot[_0x35b6c3(0x28c)](_0x1a492f['id'])['then'](async()=>{const _0x3af437=_0x35b6c3;_0x1a078b==_0x3af437(0x3b2)&&(await tgBot[_0x3af437(0x3b5)](_0x5ab611[_0x3af437(0x31a)]['id'],_0x3af437(0x305))[_0x3af437(0x319)](_0x4fd16c=>{telegramError(_0x4fd16c);}),updateBB('update')),_0x1a078b=='no'&&await tgBot[_0x3af437(0x3b5)](_0x5ab611[_0x3af437(0x31a)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x3af437(0x319)](_0x13908e=>{telegramError(_0x13908e);});}),tgBot[_0x35b6c3(0x38e)](_0x35b6c3(0x228));}));}),tgBot[_0x42d15f(0x1e6)](/\/reinstall/,async _0x2313f3=>{const _0x3da86b=_0x42d15f;if(!validateTelegram(_0x2313f3))return;tgBot['removeListener'](_0x3da86b(0x228)),!validInstallation?tgBot[_0x3da86b(0x3b5)](_0x2313f3[_0x3da86b(0x31a)]['id'],_0x3da86b(0x2ed))[_0x3da86b(0x319)](_0x46c300=>{telegramError(_0x46c300);}):(tgBot[_0x3da86b(0x3b5)](_0x2313f3[_0x3da86b(0x31a)]['id'],_0x3da86b(0x2b0),{'reply_markup':{'inline_keyboard':[[{'text':_0x3da86b(0x2d2),'callback_data':_0x3da86b(0x3b2)},{'text':'No','callback_data':'no'}]]}})[_0x3da86b(0x319)](_0x329803=>{telegramError(_0x329803);}),tgBot['on'](_0x3da86b(0x228),async _0x324295=>{const _0x4e1f4b=_0x3da86b,_0xbe9720=_0x324295[_0x4e1f4b(0x29b)],_0x2285ff=_0x324295[_0x4e1f4b(0x1df)];tgBot['answerCallbackQuery'](_0x324295['id'])[_0x4e1f4b(0x2dd)](async()=>{const _0xaaa33d=_0x4e1f4b;_0xbe9720==_0xaaa33d(0x3b2)&&(await tgBot[_0xaaa33d(0x3b5)](_0x2285ff['chat']['id'],_0xaaa33d(0x2bb))[_0xaaa33d(0x319)](_0x326b11=>{telegramError(_0x326b11);}),updateBB(_0xaaa33d(0x2c6))),_0xbe9720=='no'&&await tgBot[_0xaaa33d(0x3b5)](_0x2285ff['chat']['id'],_0xaaa33d(0x277))[_0xaaa33d(0x319)](_0x4fe5c3=>{telegramError(_0x4fe5c3);});}),tgBot[_0x4e1f4b(0x38e)](_0x4e1f4b(0x228));}));}),tgBot[_0x42d15f(0x1e6)](/\/toggle/,_0x3d21d3=>{const _0x590a34=_0x42d15f;if(!validateTelegram(_0x3d21d3))return;tgBot[_0x590a34(0x38e)](_0x590a34(0x228));const _0x26fb47=getBotsWithMode();if(_0x26fb47[_0x590a34(0x226)]==0x0)tgBot[_0x590a34(0x3b5)](_0x3d21d3[_0x590a34(0x31a)]['id'],_0x590a34(0x23a))[_0x590a34(0x319)](_0x4f12cf=>{telegramError(_0x4f12cf);});else{let _0x5ce360=[],_0x5746b2=[];const _0x9485c2=0x2;let _0x592365=0x0;_0x26fb47[_0x590a34(0x2b8)]((_0x444309,_0x55452d)=>{const _0x53ff41=_0x590a34;if(_0x55452d%_0x9485c2==0x0)_0x5746b2=[];_0x5746b2[_0x53ff41(0x3b9)]({'text':_0x53ff41(0x3a8)+_0x444309[_0x53ff41(0x33a)]+'\x20('+_0x444309[_0x53ff41(0x2d4)]+')','callback_data':_0x444309[_0x53ff41(0x33a)]}),_0x55452d%_0x9485c2==0x0&&(_0x5ce360[_0x592365]=_0x5746b2,_0x592365++);}),tgBot['sendMessage'](_0x3d21d3[_0x590a34(0x31a)]['id'],_0x590a34(0x207),{'reply_markup':{'inline_keyboard':_0x5ce360}})[_0x590a34(0x319)](_0x1ac9f6=>{telegramError(_0x1ac9f6);}),tgBot['on'](_0x590a34(0x228),async _0x2cc6b7=>{const _0x18bf43=_0x590a34,_0x451a88=_0x2cc6b7['data'],_0x274ede=_0x2cc6b7[_0x18bf43(0x1df)];tgBot[_0x18bf43(0x28c)](_0x2cc6b7['id'])[_0x18bf43(0x2dd)](async()=>{const _0x41b3cf=_0x18bf43,_0x8ecc37=_0x26fb47['find'](_0x360f38=>_0x360f38[_0x41b3cf(0x33a)]==_0x451a88),_0x333895=_0x8ecc37['mode']=='auto'?_0x41b3cf(0x20b):_0x41b3cf(0x276);tgBot[_0x41b3cf(0x3b5)](_0x274ede[_0x41b3cf(0x31a)]['id'],_0x41b3cf(0x2d1)+_0x451a88+_0x41b3cf(0x324)+_0x333895+_0x41b3cf(0x245))[_0x41b3cf(0x319)](_0x488090=>{telegramError(_0x488090);}),toggleBotMode(_0x451a88);}),tgBot[_0x18bf43(0x38e)](_0x18bf43(0x228));});}}),tgBot[_0x42d15f(0x1e6)](/\/names/,_0xd8a828=>{const _0x1b42d7=_0x42d15f;if(!validateTelegram(_0xd8a828))return;let _0x5d16c9='';config['forEach'](_0x6efee1=>{const _0x5b8fe3=_0x32fb;_0x5d16c9+=_0x5b8fe3(0x3a8)+_0x6efee1[_0x5b8fe3(0x33a)]+':\x20'+_0x6efee1[_0x5b8fe3(0x2a3)]+'\x0a';}),tgBot['sendMessage'](_0xd8a828[_0x1b42d7(0x31a)]['id'],_0x5d16c9,{'parse_mode':_0x1b42d7(0x3a5)})['catch'](_0x51248e=>{telegramError(_0x51248e);});}),tgBot[_0x42d15f(0x1e6)](/\/disable/,_0x29638a=>{const _0x26b23d=_0x42d15f;if(!validateTelegram(_0x29638a))return;tgBot[_0x26b23d(0x3b5)](_0x29638a[_0x26b23d(0x31a)]['id'],_0x26b23d(0x3a3))[_0x26b23d(0x319)](_0x4798dd=>{telegramError(_0x4798dd);}),updateSetting(_0x26b23d(0x2d6),![]);}),tgBot[_0x42d15f(0x1e6)](/\/help/,_0x37c3c0=>{const _0x5201b2=_0x42d15f;if(!validateTelegram(_0x37c3c0))return;tgBot[_0x5201b2(0x3b5)](_0x37c3c0[_0x5201b2(0x31a)]['id'],_0x3091fa)[_0x5201b2(0x319)](_0x517f2b=>{telegramError(_0x517f2b);});}),tgBot['on'](_0x42d15f(0x314),_0x24a47a=>{const _0xd3a292=_0x42d15f;_0x24a47a[_0xd3a292(0x308)]()[_0xd3a292(0x235)]('404\x20Not\x20Found')&&(logger[_0xd3a292(0x283)]('Invalid\x20Telegram\x20token'),tgBot[_0xd3a292(0x21b)](),tgBot=null,io['to'](_0xd3a292(0x1f1))[_0xd3a292(0x2df)](_0xd3a292(0x2e5),_0xd3a292(0x27b)));}),process[_0x42d15f(0x2bf)](_0x42d15f(0x336),()=>{const _0x377802=_0x42d15f;if(tgBot)tgBot[_0x377802(0x21b)]();process[_0x377802(0x35f)](0x1);}),process[_0x42d15f(0x2bf)](_0x42d15f(0x3c2),()=>{const _0x912a89=_0x42d15f;if(tgBot)tgBot[_0x912a89(0x21b)]();process[_0x912a89(0x35f)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x3b9cb6,_0x5ce652){const _0x5c99d6=_0x357005;if(settings[_0x5c99d6(0x2d6)]){if(settings[_0x5c99d6(0x2d8)]=='all'||(_0x5ce652['type']==_0x5c99d6(0x391)||_0x5ce652[_0x5c99d6(0x2e6)]=='warning'||_0x5ce652[_0x5c99d6(0x2e6)]=='success')&&settings['telegramEvents']=='alerts'||_0x5ce652[_0x5c99d6(0x2e6)]==_0x5c99d6(0x3a9)&&settings[_0x5c99d6(0x2d8)]==_0x5c99d6(0x275)){if(tgBot&&settings['telegramChatId']){if(_0x5ce652[_0x5c99d6(0x33d)])tgBot['sendMessage'](settings[_0x5c99d6(0x33f)],_0x5ce652[_0x5c99d6(0x2a3)]+'\x20>\x20'+_0x5ce652[_0x5c99d6(0x353)])[_0x5c99d6(0x319)](_0xe92df3=>{telegramError(_0xe92df3);});else tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20'+_0x3b9cb6+'\x20>\x20'+_0x5ce652['event'])[_0x5c99d6(0x319)](_0x1113b9=>{telegramError(_0x1113b9);});}}}}async function sendTelegramMsg(_0xa9a880,_0x40c996=_0x357005(0x3a5)){const _0x3573c2=_0x357005;return settings[_0x3573c2(0x2d6)]&&tgBot&&settings[_0x3573c2(0x33f)]?(await tgBot[_0x3573c2(0x3b5)](settings[_0x3573c2(0x33f)],_0xa9a880,{'parse_mode':_0x40c996})['catch'](_0xa2f4d5=>{telegramError(_0xa2f4d5);}),!![]):![];}function getDeviceWithIp(_0x4562e0){const _0x42b013=_0x357005;return devices[_0x42b013(0x2f8)](_0x366ad4=>_0x366ad4['ip']===_0x4562e0);}function temporaryAccess2FA(_0x3e8d18,_0x5c33d0){const _0x8dbf3d=_0x357005;let _0x45b0c9=new Date(),_0x4a5849=![];if(lastIpApproval){if(_0x45b0c9-lastIpApproval<0x1388)_0x4a5849=!![];}lastIpApproval=new Date();if(_0x4a5849)return;tgBot&&settings[_0x8dbf3d(0x33f)]&&(tgBot[_0x8dbf3d(0x38e)](_0x8dbf3d(0x228)),tgBot[_0x8dbf3d(0x3b5)](settings['telegramChatId'],_0x8dbf3d(0x27c)+normalizeIP(_0x5c33d0)[_0x8dbf3d(0x288)]+_0x8dbf3d(0x22b),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x8dbf3d(0x236),'callback_data':'5'},{'text':_0x8dbf3d(0x398),'callback_data':'15'},{'text':_0x8dbf3d(0x37f),'callback_data':'30'},{'text':_0x8dbf3d(0x230),'callback_data':_0x8dbf3d(0x230)}]]}})[_0x8dbf3d(0x319)](_0x1f4779=>{telegramError(_0x1f4779);}),tgBot['on'](_0x8dbf3d(0x228),async _0x2be7aa=>{const _0x474269=_0x8dbf3d,_0x58b361=_0x2be7aa[_0x474269(0x29b)],_0x69455a=_0x2be7aa[_0x474269(0x1df)];tgBot[_0x474269(0x28c)](_0x2be7aa['id'])[_0x474269(0x2dd)](async()=>{const _0x43daa7=_0x474269;devices[_0x3e8d18][_0x43daa7(0x263)]={'clientip':_0x5c33d0,'timestamp':new Date()[_0x43daa7(0x320)](),'expiry':_0x58b361},_0x58b361!=_0x43daa7(0x230)?(await tgBot[_0x43daa7(0x3b5)](_0x69455a[_0x43daa7(0x31a)]['id'],_0x43daa7(0x34a)+_0x58b361+_0x43daa7(0x31c),{'parse_mode':_0x43daa7(0x3a5)})[_0x43daa7(0x319)](_0x128b5f=>{telegramError(_0x128b5f);}),io['to'](_0x3e8d18)['emit'](_0x43daa7(0x2c7),{'access':{'allow':![],'reason':_0x43daa7(0x35d),'token':null}})):(await tgBot[_0x43daa7(0x3b5)](_0x69455a[_0x43daa7(0x31a)]['id'],_0x43daa7(0x27e))[_0x43daa7(0x319)](_0x4e58a1=>{telegramError(_0x4e58a1);}),io['to'](_0x3e8d18)[_0x43daa7(0x2df)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x474269(0x38e)]('callback_query');}));}function loginAccess2FA(_0x44ba56,_0xb1fd39){const _0x3fe751=_0x357005;tgBot&&settings[_0x3fe751(0x33f)]&&(tgBot[_0x3fe751(0x38e)](_0x3fe751(0x228)),tgBot[_0x3fe751(0x3b5)](settings['telegramChatId'],_0x3fe751(0x241)+normalizeIP(_0xb1fd39)[_0x3fe751(0x288)]+_0x3fe751(0x22b),{'parse_mode':_0x3fe751(0x3a5),'reply_markup':{'inline_keyboard':[[{'text':_0x3fe751(0x309),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x3fe751(0x230)}]]}})['catch'](_0x2af300=>{telegramError(_0x2af300);}),tgBot['on'](_0x3fe751(0x228),async _0x34b5c2=>{const _0x4e9c54=_0x3fe751,_0x5e253c=_0x34b5c2['data'],_0x31bacb=_0x34b5c2[_0x4e9c54(0x1df)];tgBot[_0x4e9c54(0x28c)](_0x34b5c2['id'])[_0x4e9c54(0x2dd)](async()=>{const _0x19ec51=_0x4e9c54;devices[_0x44ba56][_0x19ec51(0x25c)]={'clientip':_0xb1fd39,'timestamp':new Date()[_0x19ec51(0x320)](),'expiry':_0x5e253c},_0x5e253c!=_0x19ec51(0x230)?(await tgBot[_0x19ec51(0x3b5)](_0x31bacb[_0x19ec51(0x31a)]['id'],'Login\x20accepted',{'parse_mode':_0x19ec51(0x3a5)})[_0x19ec51(0x319)](_0x145b3a=>{telegramError(_0x145b3a);}),io['to'](_0x44ba56)[_0x19ec51(0x2df)](_0x19ec51(0x2c7),{'access':{'allow':![],'reason':_0x19ec51(0x35d),'token':null}})):(await tgBot[_0x19ec51(0x3b5)](_0x31bacb[_0x19ec51(0x31a)]['id'],_0x19ec51(0x3a4))[_0x19ec51(0x319)](_0x488ef1=>{telegramError(_0x488ef1);}),io['to'](_0x44ba56)[_0x19ec51(0x2df)](_0x19ec51(0x2c7),{'access':{'allow':![],'reason':_0x19ec51(0x290),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1700cd=_0x357005;return dbConfig[_0x1700cd(0x375)](_0x1700cd(0x260))['sortBy']('botID')[_0x1700cd(0x2c0)]({'status':_0x1700cd(0x351)})['value']()||[];}function getDisabledBots(){const _0x255408=_0x357005;return dbConfig[_0x255408(0x375)](_0x255408(0x260))[_0x255408(0x329)](_0x255408(0x33a))[_0x255408(0x2c0)]({'status':_0x255408(0x2b1)})['value']()||[];}function getBotAttributes(_0xdda9ec){const _0x42f9e9=_0x357005;let _0x31d8df={};const _0x4ea14b=configpath+_0x42f9e9(0x38a)+_0xdda9ec+_0x42f9e9(0x38c),_0x330eb7=fs[_0x42f9e9(0x376)](_0x4ea14b);if(_0x330eb7){const _0x54d4a0=fs['readFileSync'](_0x4ea14b);try{const _0x190238=JSON['parse'](_0x54d4a0),_0x345e3f=_0x190238?_0x190238[_0x42f9e9(0x36b)][0x0][_0x42f9e9(0x203)]:![];_0x31d8df['mode']=_0x345e3f?'auto':_0x42f9e9(0x20b),_0x31d8df[_0x42f9e9(0x2a3)]=_0x190238?_0x190238[_0x42f9e9(0x36b)][0x0][_0x42f9e9(0x2a3)]:_0x42f9e9(0x3a8)+_0xdda9ec;}catch(_0x9c07b0){_0x31d8df['mode']=_0x42f9e9(0x20b),_0x31d8df[_0x42f9e9(0x2a3)]=_0x42f9e9(0x3a8)+_0xdda9ec;}}else _0x31d8df[_0x42f9e9(0x2d4)]=_0x42f9e9(0x20b),_0x31d8df['botname']=_0x42f9e9(0x3a8)+_0xdda9ec;return _0x31d8df;}function getBotsWithMode(){const _0x4429d9=_0x357005,_0x191054=dbConfig[_0x4429d9(0x375)](_0x4429d9(0x260))[_0x4429d9(0x329)](_0x4429d9(0x33a))[_0x4429d9(0x21a)]()||[];return _0x191054[_0x4429d9(0x2b8)](_0x3de1bb=>{const _0x59d313=_0x4429d9;let _0x299605=getBotAttributes(_0x3de1bb[_0x59d313(0x33a)]);_0x3de1bb['mode']=_0x299605[_0x59d313(0x2d4)];}),_0x191054;}function getBotExchanges(){const _0x130314=_0x357005;let _0x338048=[];const _0x42cb67=dbConfig[_0x130314(0x375)](_0x130314(0x260))[_0x130314(0x329)](_0x130314(0x33a))[_0x130314(0x21a)]()||[];_0x42cb67['forEach'](_0x20f88b=>{const _0x35e6df=_0x130314;if(_0x20f88b['status']==_0x35e6df(0x351)){const _0x1639ed=configpath+'bot-'+_0x20f88b[_0x35e6df(0x33a)]+'-config.json',_0x25b656=fs[_0x35e6df(0x376)](_0x1639ed);let _0x2a7702;if(_0x25b656){const _0x250ffa=fs[_0x35e6df(0x394)](_0x1639ed);try{const _0x3438d5=JSON[_0x35e6df(0x2a1)](_0x250ffa);_0x2a7702=_0x3438d5?_0x3438d5[_0x35e6df(0x36b)][0x0]['exchange']:null;}catch(_0x47d0bc){}}if(_0x2a7702)_0x338048[_0x35e6df(0x3b9)](_0x2a7702);}});const _0x255e08=[...new Set(_0x338048)][_0x130314(0x298)]();return _0x255e08;}async function initUser(){const _0x173f8a=_0x357005;if(!settings[_0x173f8a(0x2ff)]){const _0x174a05=uuidRandom();mixpanel[_0x173f8a(0x335)](_0x174a05),updateSetting(_0x173f8a(0x2ff),_0x174a05);}}async function initSecure(){const _0xdb3b0b=_0x357005;let _0x33dd79=getSecure();if(!_0x33dd79[_0xdb3b0b(0x291)]('secret')){let _0xe37fc1=await generateKeys();_0x33dd79[_0xdb3b0b(0x25a)]=_0xe37fc1[_0xdb3b0b(0x25a)],_0x33dd79[_0xdb3b0b(0x2fd)]=_0xe37fc1[_0xdb3b0b(0x2fd)],_0x33dd79[_0xdb3b0b(0x347)]=crypto['randomBytes'](0x20)['toString'](_0xdb3b0b(0x293));;storeSecure(_0x33dd79);}}function getSettings(){const _0x397de0=_0x357005;return dbSettings[_0x397de0(0x375)](_0x397de0(0x33e))['value']()||{};}function getSecure(){const _0x149cd0=_0x357005;return dbSecure['get'](_0x149cd0(0x321))['value']()||{};}function getBlacklist(){const _0x560454=_0x357005;return dbSecure['get'](_0x560454(0x1e3))['value']()||[];}function broadcastToBots(_0x1f010b,_0x24f380){const _0x2c75a8=_0x357005;config[_0x2c75a8(0x2b8)](_0x35e29d=>{const _0x5d8d33=_0x2c75a8;if(_0x35e29d[_0x5d8d33(0x2c7)]==_0x5d8d33(0x351)&&_0x35e29d['live']==_0x5d8d33(0x35c)||_0x35e29d['status']=='new'&&_0x35e29d[_0x5d8d33(0x2be)]==_0x5d8d33(0x35c)){if(pid[_0x35e29d[_0x5d8d33(0x33a)]])pid[_0x35e29d[_0x5d8d33(0x33a)]]['send']({[_0x1f010b]:_0x24f380});}});}function storeSettings(_0x16e464,_0x569f67=![]){const _0x176c9e=_0x357005;_0x16e464={...settings,..._0x16e464};if(_0x569f67&&_0x16e464[_0x176c9e(0x248)]!=_0x176c9e(0x231)&&_0x16e464['bbPassword']!=_0x176c9e(0x2ce)&&_0x16e464['bbPassword']!=''){const _0x5bf423=crypt[_0x176c9e(0x2fb)](secure['privateKey'],_0x16e464[_0x176c9e(0x248)])[_0x176c9e(0x1df)][_0x176c9e(0x3bf)]('@')[0x0],_0x16224c=bcrypt[_0x176c9e(0x2a0)](_0x5bf423,saltRounds);_0x16e464={..._0x16e464,'bbPassword':_0x16224c};}if(_0x569f67&&_0x16e464['telegramToken']!=_0x176c9e(0x231)&&_0x16e464[_0x176c9e(0x389)]!='***'&&_0x16e464[_0x176c9e(0x389)]!=''){const _0x149604=crypt['decrypt'](secure[_0x176c9e(0x2fd)],_0x16e464[_0x176c9e(0x389)])['message'][_0x176c9e(0x3bf)]('@')[0x0];_0x16e464={..._0x16e464,'telegramToken':_0x149604};}const _0xafcb03=_0x16e464[_0x176c9e(0x389)]!=_0x176c9e(0x231)&&_0x16e464[_0x176c9e(0x389)]!=settings[_0x176c9e(0x389)]||_0x16e464[_0x176c9e(0x383)]!=settings[_0x176c9e(0x383)],_0x1e3321=_0x16e464['telegramToken']==''||_0x16e464[_0x176c9e(0x383)]=='';if(_0xafcb03)_0x16e464[_0x176c9e(0x2d8)]='all';for(const [_0x44178a,_0x4ccd71]of Object[_0x176c9e(0x34f)](_0x16e464)){if(_0x44178a==_0x176c9e(0x389)&&_0x4ccd71=='************'){_0x16e464[_0x176c9e(0x389)]=settings[_0x176c9e(0x389)];continue;};if(_0x44178a==_0x176c9e(0x248)&&_0x4ccd71==_0x176c9e(0x231)){_0x16e464[_0x176c9e(0x248)]=settings[_0x176c9e(0x248)];continue;};dbSettings[_0x176c9e(0x384)](_0x176c9e(0x2ae)+_0x44178a,_0x4ccd71)[_0x176c9e(0x327)]();}settings=_0x16e464,io['to'](_0x176c9e(0x1f1))['emit'](_0x176c9e(0x33e),cleanSettings()),broadcastToBots(_0x176c9e(0x39d),settings[_0x176c9e(0x39d)]),broadcastToBots('onepagemode',settings['onepagemode']);if(_0xafcb03&&!_0x1e3321)initTelegram();if(_0xafcb03&&_0x1e3321)disableTelegram();getAllClients()[_0x176c9e(0x2b8)](_0x1faf75=>{const _0x1b5b66=_0x176c9e;getSocket(_0x1faf75['id'])[_0x1b5b66(0x2df)]('status',{'access':{'allow':![],'reason':_0x1b5b66(0x35d),'token':null}});});}function updateSetting(_0x1360cc,_0xbbe7a9){const _0x4bbe57=_0x357005;dbSettings[_0x4bbe57(0x384)](_0x4bbe57(0x2ae)+_0x1360cc,_0xbbe7a9)[_0x4bbe57(0x327)](),settings=getSettings(),io['to']('botmanager')[_0x4bbe57(0x2df)]('settings',cleanSettings());}function storeSecure(_0x381747){const _0x2de412=_0x357005;dbSecure['get'](_0x2de412(0x321))['push'](_0x381747)[_0x2de412(0x327)](),secure=_0x381747;}function addBlacklist(_0x710b85){const _0x22f538=_0x357005;cleanBlacklist();let _0x546257;devices[_0x710b85][_0x22f538(0x263)]?_0x546257=Math[_0x22f538(0x360)](devices[_0x710b85][_0x22f538(0x263)]['expiry'],loginExpiry):_0x546257=loginExpiry,dbSecure[_0x22f538(0x375)]('blacklist')[_0x22f538(0x3b9)]({'expiry':new Date()[_0x22f538(0x320)]()+_0x546257*0x3c*0x3e8,'token':devices[_0x710b85][_0x22f538(0x2b4)]['token']})[_0x22f538(0x327)](),blacklist=dbSecure[_0x22f538(0x375)](_0x22f538(0x1e3))[_0x22f538(0x21a)]();}function cleanBlacklist(){const _0x57a529=_0x357005;let _0x26757b=dbSecure[_0x57a529(0x375)](_0x57a529(0x1e3))['cloneDeep']()['value'](),_0x1566ca=new Date()['getTime']();_0x26757b[_0x57a529(0x2b8)](_0x2149d6=>{const _0x1e7252=_0x57a529;_0x2149d6[_0x1e7252(0x20d)]<_0x1566ca&&dbSecure['get'](_0x1e7252(0x1e3))[_0x1e7252(0x323)]({'expiry':_0x2149d6[_0x1e7252(0x20d)]})[_0x1e7252(0x327)]();});}function initStates(){const _0x5a9b58=_0x357005;let _0x291a5a=getConfiguration();_0x291a5a[_0x5a9b58(0x2b8)](_0x14cfc4=>{const _0x448825=_0x5a9b58;_0x14cfc4[_0x448825(0x2be)]=_0x448825(0x259);}),storeConfiguration(_0x291a5a);}function onKeys(){const _0x1d9f5a=new RSA();return new Promise(_0x320ec9=>{const _0x359b1f=_0x32fb;_0x1d9f5a['generateKeyPairAsync']()[_0x359b1f(0x2dd)](_0x137553=>{_0x320ec9(_0x137553);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2a1a7b=_0x357005;let _0x5baf3f=getSettings(),_0x27386d=![];!_0x5baf3f['hasOwnProperty']('lastmsgtelegram')&&(_0x5baf3f[_0x2a1a7b(0x2b7)]=0x0,_0x27386d=!![]);!_0x5baf3f[_0x2a1a7b(0x291)]('lastmsgemitted')&&(_0x5baf3f[_0x2a1a7b(0x32d)]=0x0,_0x27386d=!![]);!_0x5baf3f['hasOwnProperty'](_0x2a1a7b(0x1e5))&&(_0x5baf3f[_0x2a1a7b(0x1e5)]=_0x2a1a7b(0x38f),_0x27386d=!![]);!_0x5baf3f[_0x2a1a7b(0x291)](_0x2a1a7b(0x32f))&&(_0x5baf3f['onepagemode']=![],_0x27386d=!![]);if(_0x27386d)storeSettings(_0x5baf3f);try{fs[_0x2a1a7b(0x3ac)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x217f14=>{const _0x284f4d=_0x2a1a7b;if(!_0x217f14[_0x284f4d(0x2f3)]()){if(!_0x217f14[_0x284f4d(0x311)]['startsWith'](_0x284f4d(0x1eb)))fs['unlinkSync'](configbackuppath+_0x217f14[_0x284f4d(0x311)]);}else fs[_0x284f4d(0x281)](configbackuppath+_0x217f14[_0x284f4d(0x311)],{'recursive':!![]});});}catch(_0x36a25b){logger['debug'](_0x2a1a7b(0x21d),_0x36a25b);}}function storeConfiguration(_0x1e165c){const _0x489c86=_0x357005;dbConfig[_0x489c86(0x375)](_0x489c86(0x260))[_0x489c86(0x323)]()[_0x489c86(0x327)](),_0x1e165c[_0x489c86(0x2b8)](_0x80dd85=>{delete _0x80dd85['mode'];}),dbConfig[_0x489c86(0x375)](_0x489c86(0x260))[_0x489c86(0x3b9)](..._0x1e165c)[_0x489c86(0x327)](),config=_0x1e165c;}function resetPassword(){const _0x56fa1f=_0x357005;tgBot&&settings[_0x56fa1f(0x33f)]&&(tgBot[_0x56fa1f(0x38e)](_0x56fa1f(0x228)),tgBot[_0x56fa1f(0x3b5)](settings[_0x56fa1f(0x33f)],_0x56fa1f(0x21c),{'parse_mode':_0x56fa1f(0x3a5),'reply_markup':{'inline_keyboard':[[{'text':_0x56fa1f(0x3b2),'callback_data':_0x56fa1f(0x3b2)},{'text':'no','callback_data':'no'}]]}})[_0x56fa1f(0x319)](_0x35b444=>{telegramError(_0x35b444);}),tgBot['on'](_0x56fa1f(0x228),async _0x5a93cf=>{const _0xeda3f3=_0x56fa1f,_0x489d00=_0x5a93cf['data'],_0x1e17eb=_0x5a93cf[_0xeda3f3(0x1df)];tgBot['answerCallbackQuery'](_0x5a93cf['id'])[_0xeda3f3(0x2dd)](async()=>{const _0x1e7443=_0xeda3f3;if(_0x489d00!='no'){const _0x340ee2=0xf,_0x33d6e3=_0x1e7443(0x210),_0x1b9f71=Array['from'](crypto[_0x1e7443(0x26b)](new Uint32Array(_0x340ee2)))[_0x1e7443(0x2c2)](_0x3bf796=>_0x33d6e3[_0x3bf796%_0x33d6e3[_0x1e7443(0x226)]])['join'](''),_0x1e308d=bcrypt[_0x1e7443(0x2a0)](_0x1b9f71,saltRounds);storeSettings({'bbPassword':_0x1e308d}),await tgBot[_0x1e7443(0x3b5)](_0x1e17eb[_0x1e7443(0x31a)]['id'],_0x1e7443(0x2d0)+_0x1b9f71,{'parse_mode':'HTML'})[_0x1e7443(0x319)](_0x1cd0d3=>{telegramError(_0x1cd0d3);});}else await tgBot[_0x1e7443(0x3b5)](_0x1e17eb['chat']['id'],'Password\x20reset\x20rejected')[_0x1e7443(0x319)](_0x90784e=>{telegramError(_0x90784e);});}),tgBot[_0xeda3f3(0x38e)](_0xeda3f3(0x228));}));}async function confirmRestore(_0x1e9b87,_0x1cacbd){const _0x53e261=_0x357005;io['to'](_0x53e261(0x1f1))[_0x53e261(0x2df)](_0x53e261(0x2e5),_0x53e261(0x202),_0x53e261(0x37a)),tgBot&&settings[_0x53e261(0x33f)]&&(tgBot[_0x53e261(0x38e)](_0x53e261(0x228)),await tgBot['sendMessage'](settings[_0x53e261(0x33f)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x53e261(0x3a5),'reply_markup':{'inline_keyboard':[[{'text':_0x53e261(0x3b2),'callback_data':_0x53e261(0x3b2)},{'text':'no','callback_data':'no'}]]}})[_0x53e261(0x319)](_0x1fbd3c=>{telegramError(_0x1fbd3c);}),tgBot['on']('callback_query',async _0x1b9b83=>{const _0x4a4fbc=_0x53e261,_0x18a807=_0x1b9b83[_0x4a4fbc(0x29b)],_0x1a2af0=_0x1b9b83[_0x4a4fbc(0x1df)];tgBot[_0x4a4fbc(0x28c)](_0x1b9b83['id'])[_0x4a4fbc(0x2dd)](async()=>{const _0x26d3de=_0x4a4fbc;_0x18a807==_0x26d3de(0x3b2)?(await tgBot[_0x26d3de(0x3b5)](_0x1a2af0[_0x26d3de(0x31a)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'})['catch'](_0x1660e8=>{telegramError(_0x1660e8);}),unzipFile(_0x1e9b87,_0x1cacbd)):(logger[_0x26d3de(0x3be)]('Restore\x20process\x20aborted'),await tgBot[_0x26d3de(0x3b5)](_0x1a2af0[_0x26d3de(0x31a)]['id'],_0x26d3de(0x25f))[_0x26d3de(0x319)](_0xb4cf95=>{telegramError(_0xb4cf95);}));}),tgBot[_0x4a4fbc(0x38e)](_0x4a4fbc(0x228));}));}function getServerTime(){const _0x5eded0=_0x357005,_0x1d83df=new Date();return _0x1d83df[_0x5eded0(0x224)]()+'/'+(_0x1d83df[_0x5eded0(0x2dc)]()+0x1)[_0x5eded0(0x308)]()[_0x5eded0(0x366)](0x2,'0')+'/'+_0x1d83df[_0x5eded0(0x349)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x1d83df[_0x5eded0(0x3a6)]()[_0x5eded0(0x308)]()[_0x5eded0(0x366)](0x2,'0')+':'+_0x1d83df['getMinutes']()[_0x5eded0(0x308)]()['padStart'](0x2,'0')+':'+_0x1d83df[_0x5eded0(0x26a)]()[_0x5eded0(0x308)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x57a8af=_0x357005,_0x4af0c1=shiftedTime();return _0x4af0c1[_0x57a8af(0x224)]()+'/'+(_0x4af0c1[_0x57a8af(0x2dc)]()+0x1)['toString']()[_0x57a8af(0x366)](0x2,'0')+'/'+_0x4af0c1[_0x57a8af(0x349)]()[_0x57a8af(0x308)]()[_0x57a8af(0x366)](0x2,'0')+'\x20'+_0x4af0c1['getHours']()[_0x57a8af(0x308)]()[_0x57a8af(0x366)](0x2,'0')+':'+_0x4af0c1[_0x57a8af(0x340)]()[_0x57a8af(0x308)]()[_0x57a8af(0x366)](0x2,'0')+':'+_0x4af0c1[_0x57a8af(0x26a)]()[_0x57a8af(0x308)]()[_0x57a8af(0x366)](0x2,'0');}function getCleanTimeStamp(){const _0x3567d0=_0x357005,_0x113dc1=shiftedTime();return _0x113dc1['getFullYear']()+(_0x113dc1[_0x3567d0(0x2dc)]()+0x1)['toString']()[_0x3567d0(0x366)](0x2,'0')+_0x113dc1[_0x3567d0(0x349)]()[_0x3567d0(0x308)]()[_0x3567d0(0x366)](0x2,'0')+'-'+_0x113dc1[_0x3567d0(0x3a6)]()[_0x3567d0(0x308)]()[_0x3567d0(0x366)](0x2,'0')+_0x113dc1['getMinutes']()[_0x3567d0(0x308)]()['padStart'](0x2,'0')+_0x113dc1[_0x3567d0(0x26a)]()[_0x3567d0(0x308)]()[_0x3567d0(0x366)](0x2,'0');}function shiftedTime(){const _0x5e9808=_0x357005,_0x5edb63=new Date();let _0x2fd1ac=_0x5edb63;if(settings[_0x5e9808(0x39d)]&&settings['timeshift']!==0x0)_0x2fd1ac=fns[_0x5e9808(0x30f)](_0x5edb63,{'hours':settings['timeshift']});return _0x2fd1ac;}function startScheduler(){const _0x8f99a0=_0x357005,_0xf3a85c=new Date()[_0x8f99a0(0x369)](),_0x130375=shiftedTime()[_0x8f99a0(0x3a6)]();_0x130375==0x4&&backupConfigFiles();_0x130375==0x0&&rotateLogFiles();_0xf3a85c%0x6==0x0&&triggerAnalytics();_0xf3a85c%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function _0x20d8(){const _0x5490f3=['\x20mode','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','-events.json','bbPassword','config/','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20confirm\x20message','Idling\x20bot\x20\x20\x20|\x20Bot\x20','2FA\x20login\x20required','loginRequired','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','listen','server',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','pidExpireLogin','DEFLATE','Logged\x20in\x20user\x20...','binary','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','headers','stopped','publicKey','#RES#\x20','telegram2FaApproval','reason','zip/','Restore\x20process\x20aborted','bots','node','storeConfiguration','telegramIpApproval','getStartingBalances','storeFiat','username','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Unauthorized\x20attempt\x20to\x20delete\x20bot','get-logs','getSeconds','randomFillSync','No\x20authentication\x20token','/:bot/history','login\x20token\x20generated','statSync','invalid\x20credentials','temporary\x20access\x20not\x20allowed','env','whitelistEnabled','/:bot/configuration','orders','auto','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','toggleBotMode','store-headless','isIPv4MappedAddress','Invalid\x20Telegram\x20token','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','delete-bot','Temporary\x20access\x20rejected','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Setting\x20access:\x20','rmSync','graphql-request','full','output-002.log','whitelist','NTBA_FIX_319','slice','show','logged\x20out','Crypt','$1_$2_$3','answerCallbackQuery','.zip','new','4531086EuXiAc','2FA\x20login\x20rejected','hasOwnProperty','bot.js','hex','/:bot/support','confirm-message','private','keys','sort','<b>Telegram\x20Bot\x20Status:</b>\x0a','/off\x20-\x20stop\x20bot(s)\x0a','data','bb-settings.json','tkn','Invalid\x20username\x20or\x20IP\x20address','temporary\x20access\x20timeout','hashSync','parse','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','botname','All\x20bots','index.html','clientip','toggle-bot-mode','3000','/:bot/coins','build','string','store-configuration','(staging)','settings.','Notifications\x20enabled\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','disabled','#RES#\x20if\x20running\x20on\x20server','You\x20can\x20use\x20the\x20following\x20commands:\x0a','access','Unauthorized\x20attempt\x20to\x20show\x20configuration','format','lastmsgtelegram','forEach','backup','Unauthorized\x20attempt\x20to\x20update\x20bot','Starting\x20Balance\x20Bot\x20reinstallation','/disable\x20-\x20disable\x20notifications\x0a','bcryptjs','live','once','filter','mixpanel','map','args','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','request','reinstall','status','socket.io','/on\x20-\x20start\x20bot(s)\x0a','deleteHistoryAlerts',':\x20Bot\x20Mgr\x20>\x20','encryptedUuid','59257UisYfe','***','bb/','Password\x20has\x20been\x20reset\x20to:\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Yes','*$1*','mode','/download/:type','telegramEnabled','Invalid\x20IP\x20address','telegramEvents','Backup\x20file\x20unzipped\x20and\x20stored','timestamp','delete-alerts','getMonth','then','compareSync','emit','reset-password','apiPassword','kind','messages','apiSecret','notification','type','/upload-backup','apiKey','sockets','backup-full.zip','token','/output-000.log','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','\x1b[33m','express','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','logs','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','isDirectory','uncaughtException','uuid','/metrics\x20-\x20show\x20bot\x20performance\x0a','get-portfolio','find','-results.json','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','decrypt','Markdown','privateKey','node-zip','userid','writeFileSync','Starting\x20bot\x20|\x20Bot\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','ipv6','versions','Starting\x20Balance\x20Bot\x20update','kill','240BylVbQ','toString','accept','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','logout','get-starting-balances','internal','address','add','Unauthorized\x20attempt\x20to\x20get\x20messages','name','allow','clients','polling_error','output-000.log','restore-backup-file','sendFile','sendMetricsTelegram','catch','chat','password','\x20minutes','stringify','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','params','getTime','secure','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','remove','\x20to\x20','RSA-OAEP','replace','write','temporary\x20token\x20generated','sortBy','mkdirSync','uuid-random','createServer','lastmsgemitted','defaults','onepagemode','fork','show-config',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','/:bot/performance','/names\x20-\x20show\x20bot\x20names\x0a','alias','SIGINT','backup-full','store','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','botID','alerts','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','showname','settings','telegramChatId','getMinutes','version.json','::ffff:127.0.0.1','number','update-bb','function','Unauthorized\x20login\x20attempt\x20(timeout)','secret','login\x20required','getDate','Access\x20enabled\x20for\x20','\x20(1)','2FA\x20required','\x20|\x20','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','entries','Restore\x20backup\x20file\x20','enabled','use','event','[ip-address]','startsWith','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','update-bot','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','endsWith','Unauthorized\x20attempt\x20to\x20delete\x20alerts','16NUYshT','running','reload','updatebotmanager','exit','max','bb-config.json','reset-history','::1','bbvNew','connected','padStart','Deleted\x20Bot\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','getUTCHours','sign','bot','restart','logs/','toIPv4Address','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20attempt\x20to\x20get\x20events','output-003.log','pidRefreshToken','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20update\x20settings','get','existsSync','/:bot','initclient','Invalid\x20authentication\x20token\x20(1)','success','new-disabled','6b67f3d61ee94b8f5c80b4affef4c4d9','inherit','version','30\x20min','user','copyFileSync','User\x20has\x20been\x20validated','telegramUsername','set','Logged\x20out\x20user\x20...','referer','9dUVekg','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','telegramToken','bot-','range','-config.json','add-bot','removeListener','0.0.0','Failed\x20to\x20download\x20','error','init','bbvReceive','readFileSync','yargs/yargs','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','15\x20min','match','RSA','socket','search','timeshift','size','update','storeHeadless','\x1b[34m','lowdb/adapters/FileSync','Notifications\x20disabled','Login\x20rejected','HTML','getHours','All','Bot\x20','order','ipc','login','readdirSync','port','remoteAddress','simple','test','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','yes','127.0.0.1','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','sendMessage','environment','unlinkSync','get-messages','push','child_process','staging','constructor','Restarting\x20Bot\x20','debug','split','toIPv4MappedAddress','IPv4','SIGTERM','#RES#\x20if\x20running\x20locally\x0a','started','backup/','assign','build2','Error:\x20Invalid\x20argument\x20','All\x20bots\x20running\x20right\x20now','message','backup-files','6832161QQZdBh','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','blacklist','title','latestversion','onText','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','join','\x1b[31m','login\x20not\x20required','backup-full@','\x1b[35m','=>\x20Go\x20to\x20#CYA#http://','login\x20token\x20valid','express-fileupload','lowdb','botmanager','Starting\x20new\x20bot\x20|\x20Bot\x20','-----------------------------------------------------------------------------------','crypto','87800SPovXe','Notifications\x20types:\x20','temporaryAccessAllowed','1318877rEvMPq','resetHistory','file','Disabled\x20Bot\x20','/enable\x20-\x20enable\x20notifications\x0a','placeOrder','/:bot/portfolio','_data','get-backup-files','showConfig','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','headless','path','exp','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20log\x20out','post','all','manual','log','expiry','send','mtime','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','stop','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','production','2510ImMmQs','removeAllListeners','http','52296IzEOaJ','disconnect','node-telegram-bot-api','value','stopPolling','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Error\x20removing\x20old\x20backup\x20files:','\x1b[0m','temp/','host','emitHistory','util','Unauthorized\x20attempt\x20to\x20download\x20','getFullYear','files','length','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','callback_query','157356hlGjFU','\x20|\x20client:\x20...','</b>\x20?','Bot\x20Mgr\x20>\x20','<b>Balance\x20Bot\x20Status:</b>\x0a','conn','telegram','reject','************','f2aRequired','(((.+)+)+)+$','/status\x20-\x20show\x20bot(s)\x20status\x0a','includes','5\x20min','2FA\x20login\x20token\x20generated','track','hybrid-crypto-js','No\x20bots\x20running\x20right\x20now','getPortfolio','File\x20uploaded','Notifications\x20disabled\x0a','sendPortfolioTelegram','sha256','-performance.json','Allow\x20login\x20from\x20IP\x20address\x20<b>','Session\x20expired\x20for\x20user\x20...','Node.js\x20v','bbUsername'];_0x20d8=function(){return _0x5490f3;};return _0x20d8();}async function restoreBackupFile(_0x394566){const _0x1bfe17=_0x357005;logger['debug'](_0x1bfe17(0x350)+_0x394566);const _0x1af342=getBotsWithMode();_0x1af342[_0x1bfe17(0x226)]>0x0?confirmRestore(configbackuppath,_0x394566):unzipFile(configbackuppath,_0x394566);}async function getBackupFiles(_0x822dfc=null){const _0x4e11cf=_0x357005;let _0x8ce6f5=[],_0x2e4bc1=fs[_0x4e11cf(0x3ac)](configbackuppath,{'withFileTypes':!![]});_0x2e4bc1[_0x4e11cf(0x298)]((_0x115a84,_0x477f4f)=>_0x115a84[_0x4e11cf(0x311)]<_0x477f4f[_0x4e11cf(0x311)]?0x1:_0x477f4f[_0x4e11cf(0x311)]<_0x115a84['name']?-0x1:0x0),_0x2e4bc1['forEach'](_0x36adf1=>{const _0x123958=_0x4e11cf;if(!_0x36adf1[_0x123958(0x2f3)]()&&_0x36adf1[_0x123958(0x311)][_0x123958(0x355)](_0x123958(0x1eb))&&_0x36adf1[_0x123958(0x311)][_0x123958(0x359)](_0x123958(0x28d))){const _0x31a185=formatDate(fs['statSync'](configbackuppath+_0x36adf1[_0x123958(0x311)])[_0x123958(0x20f)]);_0x8ce6f5[_0x123958(0x3b9)]({'name':_0x36adf1[_0x123958(0x311)],'mtime':_0x31a185});}});if(_0x822dfc)io['to'](_0x822dfc)[_0x4e11cf(0x2df)](_0x4e11cf(0x1e0),_0x8ce6f5);else return _0x8ce6f5;}async function backupConfigFiles(){const _0x1b1f41=_0x357005;await zipFiles(_0x1b1f41(0x337));const _0x12d830=getCleanTimeStamp();fs[_0x1b1f41(0x381)](zippath+_0x1b1f41(0x2ea),configbackuppath+(_0x1b1f41(0x1eb)+_0x12d830+_0x1b1f41(0x28d)));let _0x11f801=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x11f801[_0x1b1f41(0x298)]((_0x58f266,_0x433ba9)=>_0x58f266['name']<_0x433ba9['name']?0x1:_0x433ba9['name']<_0x58f266['name']?-0x1:0x0),_0x11f801[_0x1b1f41(0x226)]>maxBackups&&fs[_0x1b1f41(0x3b7)](configbackuppath+_0x11f801[_0x11f801[_0x1b1f41(0x226)]-0x1]['name']);}function rotateLogFiles(){const _0x5c1897=_0x357005,_0x3bdc1c=fs[_0x5c1897(0x26f)](logspath+_0x5c1897(0x315)),_0x52de7b=_0x3bdc1c[_0x5c1897(0x39e)]/0x400;if(_0x52de7b>0x64){let _0x531730=fs[_0x5c1897(0x3ac)](logspath,{'withFileTypes':!![]});_0x531730[_0x5c1897(0x298)]((_0x476e7c,_0x4d6f51)=>_0x476e7c[_0x5c1897(0x311)]<_0x4d6f51[_0x5c1897(0x311)]?0x1:_0x4d6f51['name']<_0x476e7c[_0x5c1897(0x311)]?-0x1:0x0),_0x531730['forEach'](_0x391b52=>{const _0x3b4d28=_0x5c1897;if(_0x391b52['name']==_0x3b4d28(0x284))fs[_0x3b4d28(0x381)](logspath+_0x391b52[_0x3b4d28(0x311)],logspath+_0x3b4d28(0x371));if(_0x391b52[_0x3b4d28(0x311)]=='output-001.log')fs['copyFileSync'](logspath+_0x391b52[_0x3b4d28(0x311)],logspath+_0x3b4d28(0x284));_0x391b52[_0x3b4d28(0x311)]=='output-000.log'&&(fs[_0x3b4d28(0x381)](logspath+_0x391b52['name'],logspath+'output-001.log'),fs[_0x3b4d28(0x300)](logspath+_0x391b52[_0x3b4d28(0x311)],''));});}}async function zipFiles(_0x480c10){const _0x4e9475=_0x357005;let _0x33ba25;if(_0x480c10==_0x4e9475(0x2f1))_0x33ba25=logspath;if(_0x480c10==_0x4e9475(0x2b9))_0x33ba25=configpath;if(_0x480c10==_0x4e9475(0x337))_0x33ba25=configpath;let _0x5c1bfd=fs['readdirSync'](_0x33ba25,{'withFileTypes':!![]});const _0x4fcbef=new require(_0x4e9475(0x2fe))();_0x5c1bfd['forEach'](_0x5b0512=>{const _0x5a6940=_0x4e9475;if(!_0x5b0512[_0x5a6940(0x2f3)]()){let _0x7d1f43=fs[_0x5a6940(0x394)](_0x33ba25+_0x5b0512[_0x5a6940(0x311)]);if(_0x480c10==_0x5a6940(0x2b9)){const _0x53e026=/^bot-[0-9]{3}-config.json$/,_0x43a92a=_0x53e026[_0x5a6940(0x3b0)](_0x5b0512['name']);if(_0x43a92a){const _0x2c58aa=JSON['parse'](_0x7d1f43);if(_0x2c58aa[_0x5a6940(0x36b)][0x0]){_0x2c58aa[_0x5a6940(0x36b)][0x0][_0x5a6940(0x2e8)]=_0x5a6940(0x2ce),_0x2c58aa[_0x5a6940(0x36b)][0x0][_0x5a6940(0x2e4)]=_0x5a6940(0x2ce);if(_0x2c58aa[_0x5a6940(0x36b)][0x0]['apiPassword'])_0x2c58aa[_0x5a6940(0x36b)][0x0][_0x5a6940(0x2e1)]=_0x5a6940(0x2ce);}_0x7d1f43=JSON['stringify'](_0x2c58aa,null,0x2);}if(_0x5b0512[_0x5a6940(0x311)]=='bb-settings.json'){const _0x2aa42a=JSON[_0x5a6940(0x2a1)](_0x7d1f43);if(_0x2aa42a[_0x5a6940(0x33e)][_0x5a6940(0x24e)])_0x2aa42a[_0x5a6940(0x33e)][_0x5a6940(0x24e)]=![];if(_0x2aa42a['settings']['bbPassword'])_0x2aa42a[_0x5a6940(0x33e)][_0x5a6940(0x248)]=_0x5a6940(0x2ce);if(_0x2aa42a[_0x5a6940(0x33e)][_0x5a6940(0x389)])_0x2aa42a['settings'][_0x5a6940(0x389)]=_0x5a6940(0x2ce);if(_0x2aa42a[_0x5a6940(0x33e)]['telegramChatId'])_0x2aa42a['settings'][_0x5a6940(0x33f)]=null;_0x7d1f43=JSON['stringify'](_0x2aa42a,null,0x2);}if(_0x5b0512[_0x5a6940(0x311)]!='bb-secure.json')_0x4fcbef[_0x5a6940(0x1fa)](_0x5b0512[_0x5a6940(0x311)],_0x7d1f43);}else _0x4fcbef[_0x5a6940(0x1fa)](_0x5b0512[_0x5a6940(0x311)],_0x7d1f43);}});const _0x3ff6cd=_0x4fcbef['generate']({'base64':![],'compression':_0x4e9475(0x254)});fs['writeFileSync'](zippath+(_0x480c10+'.zip'),_0x3ff6cd,_0x4e9475(0x256));}function _0x32fb(_0x5dfe5d,_0x47a829){const _0x16c2c7=_0x20d8();return _0x32fb=function(_0xe5a9d7,_0x4f6103){_0xe5a9d7=_0xe5a9d7-0x1de;let _0x20d8dc=_0x16c2c7[_0xe5a9d7];return _0x20d8dc;},_0x32fb(_0x5dfe5d,_0x47a829);}async function unzipFile(_0x2d1da5,_0x490a15){const _0x313974=_0x357005;fs[_0x313974(0x3ac)](configpath,{'withFileTypes':!![]})['forEach'](_0x2a96d5=>{const _0x39ef3d=_0x313974;if(!_0x2a96d5[_0x39ef3d(0x2f3)]())fs[_0x39ef3d(0x281)](configpath+_0x2a96d5[_0x39ef3d(0x311)]);});const _0x970da3=fs[_0x313974(0x394)](_0x2d1da5+_0x490a15,_0x313974(0x256)),_0x161720=new require(_0x313974(0x2fe))(_0x970da3,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x161720[_0x313974(0x225)])[_0x313974(0x2b8)](_0x5b3b10=>{const _0x5b17ab=_0x313974,_0x4b5682=_0x161720[_0x5b17ab(0x225)][_0x5b3b10];fs['writeFileSync'](configpath+_0x4b5682[_0x5b17ab(0x311)],_0x4b5682[_0x5b17ab(0x1ff)]);}),fs[_0x313974(0x3ac)](temppath,{'withFileTypes':!![]})['forEach'](_0x2410a5=>{const _0xf4c3ed=_0x313974;if(!_0x2410a5['isDirectory']())fs['rmSync'](temppath+_0x2410a5[_0xf4c3ed(0x311)]);}),logger[_0x313974(0x3be)](_0x313974(0x2d9)),process['send']({'restore':!![]},_0x48f77c=>{});}async function getPublicIp(){const _0x22e123=_0x357005;try{const _0x5b9bb8=await axios[_0x22e123(0x375)]('https://api.ipify.org?format=json');publicip=_0x5b9bb8['data']['ip'];}catch(_0x5c7c6e){}}async function triggerAnalytics(){const _0x1df09d=_0x357005;if(!publicip)await getPublicIp();const _0x232013=getBotsWithMode();let _0x54ea3d=0x0;_0x232013['forEach'](_0x34245b=>{const _0x41ae69=_0x32fb;if(_0x34245b['status']===_0x41ae69(0x351))_0x54ea3d++;});const _0x4e445b=getBotExchanges();mixpanel[_0x1df09d(0x238)]('Server',{'distinct_id':settings[_0x1df09d(0x2ff)],'ip':publicip,'version':serverversion,'numbots':_0x232013[_0x1df09d(0x226)],'numbotsenabled':_0x54ea3d,'exchanges':_0x4e445b,'environment':environment});}async function getMessages(){const _0xc2abac=_0x357005,_0x1bf675=_0xc2abac(0x1e7),_0x49a07f=new GraphQLClient(_0x1bf675),_0x74d7ac={'authorization':_0xc2abac(0x24f)},_0x340a38=serverversion[_0xc2abac(0x3bf)]('.'),_0x2d02ea=_0x340a38[0x0]+'.'+_0x340a38[0x1],_0x5a3bf8=Math['min'](settings[_0xc2abac(0x2b7)],settings[_0xc2abac(0x32d)]),_0x546bfc={'last':parseInt(_0x5a3bf8),'bbm':_0x2d02ea},_0x2d3af8=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4a7149;try{_0x4a7149=await _0x49a07f[_0xc2abac(0x2c5)](_0x2d3af8,_0x546bfc,_0x74d7ac);}catch(_0x29413b){}if(_0x4a7149&&_0x4a7149[_0xc2abac(0x2e3)]){let _0x1a51ed=settings[_0xc2abac(0x2b7)];newMessages=[];for(const _0x4404ee of _0x4a7149[_0xc2abac(0x2e3)]){newMessages['push'](_0x4404ee);let _0x2d7bb6=![];_0x4404ee[_0xc2abac(0x364)]&&(updateSetting(_0xc2abac(0x1e5),_0x4404ee['bbvNew']),_0x2d7bb6=isNewerVersion(serverversion,_0x4404ee[_0xc2abac(0x364)])||serverversion==_0x4404ee[_0xc2abac(0x364)]);if(!_0x2d7bb6&&_0x4404ee[_0xc2abac(0x343)]>_0x1a51ed){if(_0x4404ee[_0xc2abac(0x393)]==='any'||serverversion[_0xc2abac(0x355)](_0x4404ee[_0xc2abac(0x393)])){let _0x103979=''+_0x4404ee[_0xc2abac(0x1e4)]+'\x0a\x0a'+_0x4404ee[_0xc2abac(0x1df)];const _0xd576ad=await sendTelegramMsg(toTelegramMarkdown(_0x103979),_0xc2abac(0x2fc));if(_0xd576ad)_0x1a51ed=_0x4404ee[_0xc2abac(0x343)];}}}updateAvailable=isNewerVersion(settings[_0xc2abac(0x1e5)],serverversion),updateSetting(_0xc2abac(0x2b7),_0x1a51ed),emitMessages();}}function emitMessages(){const _0x1030a5=_0x357005,_0x9a8633=settings[_0x1030a5(0x32d)];let _0x28e2a9=[];newMessages[_0x1030a5(0x2b8)](_0x6efba9=>{const _0x46c651=_0x1030a5;_0x6efba9[_0x46c651(0x343)]>_0x9a8633&&_0x28e2a9[_0x46c651(0x3b9)](_0x6efba9);}),_0x28e2a9['length']>0x0&&getAllClients()['forEach'](_0x1693c3=>{const _0x354485=_0x1030a5;getSocket(_0x1693c3['id'])[_0x354485(0x2df)](_0x354485(0x1df),_0x28e2a9);});}function confirmMessage(_0xc9f5e1){const _0x511293=_0x357005;updateSetting(_0x511293(0x32d),Number(_0xc9f5e1));}function isNewerVersion(_0x3b5e9d,_0x4495cd){const _0x501d75=_0x357005,_0x359bef=_0x4495cd[_0x501d75(0x3bf)]('.'),_0x329df3=_0x3b5e9d[_0x501d75(0x3bf)]('.');for(var _0x4d5993=0x0;_0x4d5993<_0x329df3[_0x501d75(0x226)];_0x4d5993++){const _0x1479bc=~~_0x329df3[_0x4d5993],_0x50e54a=~~_0x359bef[_0x4d5993];if(_0x1479bc>_0x50e54a)return!![];if(_0x1479bc<_0x50e54a)return![];}return![];}function toTelegramMarkdown(_0x71af43){const _0x38c6ca=_0x357005,_0x2da09a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x18bdd3=/\*{2}(.+?)\*{2}/gim;return _0x71af43=_0x71af43['replace'](_0x2da09a,_0x38c6ca(0x28b))[_0x38c6ca(0x326)](_0x18bdd3,_0x38c6ca(0x2d3)),_0x71af43;}async function validateConfigFile(){const _0x797ff1=_0x357005,_0xb2aa73=dbConfig[_0x797ff1(0x375)](_0x797ff1(0x260))[_0x797ff1(0x329)](_0x797ff1(0x33a))['value']()||[];if(_0xb2aa73[_0x797ff1(0x226)]==0x0){let _0x23fa81=0x0,_0x5bde98=[];const _0x16f54b=/^bot-([0-9]{3})-config.json$/,_0x72299f=fs[_0x797ff1(0x3ac)](configpath);_0x72299f['forEach'](_0x275764=>{const _0x5490ed=_0x797ff1,_0x374e83=_0x16f54b['exec'](_0x275764);if(_0x374e83){const _0x1997e6=_0x374e83[0x1];let _0x4cf97a=getBotAttributes(_0x1997e6);_0x5bde98['push']({'botID':_0x1997e6,'botname':_0x4cf97a[_0x5490ed(0x2a3)],'status':_0x5490ed(0x2b1),'live':_0x5490ed(0x259)}),_0x23fa81++;}}),_0x23fa81!=0x0&&(dbConfig[_0x797ff1(0x375)](_0x797ff1(0x260))['assign'](_0x5bde98)[_0x797ff1(0x327)](),config=_0x5bde98,restoredConfigFile=_0x23fa81);}}async function restoreConfigNotify(_0xc410f5){const _0x12d79e=_0x357005;let _0x1267aa;if(restoredConfigFile==0x1)_0x1267aa=_0x12d79e(0x388);else _0x1267aa=_0x12d79e(0x206);if(_0xc410f5)io['to'](_0x12d79e(0x1f1))[_0x12d79e(0x2df)](_0x12d79e(0x2e5),_0x1267aa);else{logger[_0x12d79e(0x3af)](_0x12d79e(0x1f3)),logger[_0x12d79e(0x3af)](_0x1267aa),logger[_0x12d79e(0x3af)]('-----------------------------------------------------------------------------------'),logger[_0x12d79e(0x3af)]('');if(tgBot&&settings[_0x12d79e(0x33f)]&&settings[_0x12d79e(0x2d8)]!=_0x12d79e(0x275))tgBot['sendMessage'](settings['telegramChatId'],_0x12d79e(0x22c)+_0x1267aa)['catch'](_0x4c5743=>{telegramError(_0x4c5743);});}}function validateCredentials(_0x466a4e,_0x1331e0){const _0x505813=_0x357005;if(_0x466a4e[_0x505813(0x266)]==settings[_0x505813(0x244)]&&bcrypt[_0x505813(0x2de)](_0x466a4e[_0x505813(0x31b)],settings[_0x505813(0x248)])){if(settings[_0x505813(0x232)])return{'allow':![],'reason':_0x505813(0x24d),'token':null};else{const _0x422557=generateLoginToken(_0x1331e0);return{'allow':!![],'reason':_0x505813(0x26e),'token':_0x422557};}}else return{'allow':![],'reason':_0x505813(0x270),'token':null};}function refreshToken(_0x11b5f4){const _0x4bfcf8=_0x357005,_0x6d4c3c=generateLoginToken(_0x11b5f4);return{'allow':!![],'reason':_0x4bfcf8(0x26e),'token':_0x6d4c3c};}function validateAccess(_0x450304,_0x34e01e,_0x54fcbc){const _0x1159a8=_0x357005,_0x2bfe0a=_0x54fcbc?_0x54fcbc:devices[_0x34e01e]['ip'];let _0x49eb74;const _0x4f9242=_0x1df9d4=>{const _0x4d124a=_0x32fb;if(settings[_0x4d124a(0x24e)]){if(settings[_0x4d124a(0x232)]){if(telegram2FaApproved(_0x34e01e)){const _0x125dec=generateLoginToken(_0x34e01e);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x125dec};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x49eb74=validToken(_0x1df9d4,_0x34e01e),_0x49eb74['hasOwnProperty']('success')?{'allow':!![],'reason':_0x4d124a(0x1ee),'token':_0x1df9d4}:{'allow':![],'reason':_0x4d124a(0x348),'token':null};}else return{'allow':!![],'reason':_0x4d124a(0x1ea),'token':null};};if(settings[_0x1159a8(0x273)]){let _0x55f1d9=[...settings[_0x1159a8(0x285)],_0x1159a8(0x363),_0x1159a8(0x342),_0x1159a8(0x3b3)];if(_0x55f1d9['includes'](_0x2bfe0a))return _0x4f9242(_0x450304);else{_0x49eb74=validToken(_0x450304,_0x34e01e);if(_0x49eb74[_0x1159a8(0x291)](_0x1159a8(0x37a)))return _0x4f9242(_0x450304);else{if(telegramIpApproved(_0x34e01e)){const _0x26673a=generateToken(_0x34e01e);return _0x49eb74=_0x4f9242(_0x450304),_0x49eb74[_0x1159a8(0x312)]?{'allow':!![],'reason':_0x1159a8(0x328),'token':_0x26673a}:_0x49eb74;}else return settings[_0x1159a8(0x1f7)]?{'allow':![],'reason':_0x1159a8(0x34c),'token':null}:{'allow':![],'reason':_0x1159a8(0x271),'token':null};}}}else return _0x4f9242(_0x450304);}function timelyDecrypt(_0x133080,_0x21fa7e=!![]){const _0x24e23f=_0x357005;if(_0x133080)try{const _0x5b03b0=crypt[_0x24e23f(0x2fb)](secure['privateKey'],_0x133080)[_0x24e23f(0x1df)],_0x48d577=_0x5b03b0[_0x24e23f(0x3bf)]('@')[0x0],_0x3ae183=_0x5b03b0[_0x24e23f(0x3bf)]('@')[0x1],_0x203156=new Date()[_0x24e23f(0x320)]();if(_0x21fa7e){if(_0x203156-_0x3ae183<maxSecretAge*0x3e8)return _0x48d577;else return![];}else return _0x48d577;}catch(_0x1dd1b8){return![];}else return![];}const validToken=(_0x155ab6,_0x39cd7a)=>{const _0x3818cf=_0x357005,_0x21030e=devices[_0x39cd7a]['ip'];if(!_0x155ab6)return{'error':_0x3818cf(0x26c)};for(let _0x3c2712 of blacklist){if(_0x3c2712['token']==_0x155ab6)return{'error':'Token\x20blacklisted'};}let _0x5ec30b;try{_0x5ec30b=jwt['verify'](_0x155ab6,secure[_0x3818cf(0x347)]+_0x39cd7a);}catch{return{'error':_0x3818cf(0x379)};}if(!_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x2a6))&&!_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x266))||!_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x205)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x266))&&_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x2a6))){const {clientip:_0x4a5fc3}=_0x5ec30b;return _0x21030e==_0x4a5fc3?{'success':_0x3818cf(0x382)}:{'error':_0x3818cf(0x2d7)};}else{if(_0x5ec30b[_0x3818cf(0x291)]('username')&&_0x5ec30b[_0x3818cf(0x291)](_0x3818cf(0x2a6))){const {username:_0x2a3df6,clientip:_0x492ca4}=_0x5ec30b;return settings['bbUsername']==_0x2a3df6&&_0x21030e==_0x492ca4?{'success':_0x3818cf(0x382)}:{'error':_0x3818cf(0x29e)};}}},generateLoginToken=_0x3eebef=>{const _0x1c2edf=_0x357005;if(_0x3eebef){const _0x35b32c=devices[_0x3eebef]['ip'];return jwt[_0x1c2edf(0x36a)]({'username':settings['bbUsername'],'clientip':_0x35b32c},secure[_0x1c2edf(0x347)]+_0x3eebef,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x16494a=>{const _0x40b0d6=_0x357005;if(_0x16494a){const _0x464271=devices[_0x16494a]['ip'];return jwt[_0x40b0d6(0x36a)]({'clientip':_0x464271},secure[_0x40b0d6(0x347)]+_0x16494a,{'expiresIn':devices[_0x16494a]['telegramIpApproval'][_0x40b0d6(0x20d)]*0x3c});}else return![];},telegramIpApproved=_0x41f757=>{const _0x1ab9fa=_0x357005;let _0x3bf81b=![];return devices[_0x41f757][_0x1ab9fa(0x263)]&&devices[_0x41f757][_0x1ab9fa(0x263)][_0x1ab9fa(0x20d)]!='reject'&&(_0x3bf81b=devices[_0x41f757]['telegramIpApproval'][_0x1ab9fa(0x2a6)]==devices[_0x41f757]['ip']&&new Date()['getTime']()-devices[_0x41f757]['telegramIpApproval'][_0x1ab9fa(0x2da)]<devices[_0x41f757][_0x1ab9fa(0x263)]['expiry']*0x3c*0x3e8),_0x3bf81b;},telegram2FaApproved=_0x3d5a0e=>{const _0x5cc400=_0x357005;let _0x4ea14f=![];return devices[_0x3d5a0e][_0x5cc400(0x25c)]&&devices[_0x3d5a0e][_0x5cc400(0x25c)]['expiry']!=_0x5cc400(0x230)&&(_0x4ea14f=devices[_0x3d5a0e][_0x5cc400(0x25c)][_0x5cc400(0x2a6)]==devices[_0x3d5a0e]['ip']&&new Date()[_0x5cc400(0x320)]()-devices[_0x3d5a0e][_0x5cc400(0x25c)][_0x5cc400(0x2da)]<devices[_0x3d5a0e][_0x5cc400(0x25c)]['expiry']*0x3c*0x3e8),_0x4ea14f;},normalizeIP=_0x1e2b23=>{const _0x580fe1=_0x357005;let _0x4eb45b=null,_0x13dfa4=null;if(ipaddr['isValid'](_0x1e2b23)){const _0x22f7bc=ipaddr['parse'](_0x1e2b23);_0x22f7bc[_0x580fe1(0x2e2)]()===_0x580fe1(0x303)?(_0x22f7bc[_0x580fe1(0x27a)]()&&(_0x4eb45b=_0x22f7bc[_0x580fe1(0x36e)]()[_0x580fe1(0x308)]()),_0x13dfa4=_0x22f7bc[_0x580fe1(0x308)]()):(_0x4eb45b=_0x22f7bc[_0x580fe1(0x308)](),_0x13dfa4=_0x22f7bc[_0x580fe1(0x3c0)]()['toString']());}return{'show':_0x4eb45b?_0x4eb45b:_0x13dfa4,'store':_0x13dfa4};};function formatDate(_0x8817d8){const _0x41121b=_0x357005;return _0x8817d8['getFullYear']()+'/'+(_0x8817d8[_0x41121b(0x2dc)]()+0x1)[_0x41121b(0x308)]()[_0x41121b(0x366)](0x2,'0')+'/'+_0x8817d8[_0x41121b(0x349)]()[_0x41121b(0x308)]()['padStart'](0x2,'0')+'\x20'+_0x8817d8['getHours']()[_0x41121b(0x308)]()[_0x41121b(0x366)](0x2,'0')+':'+_0x8817d8[_0x41121b(0x340)]()[_0x41121b(0x308)]()[_0x41121b(0x366)](0x2,'0')+':'+_0x8817d8[_0x41121b(0x26a)]()[_0x41121b(0x308)]()[_0x41121b(0x366)](0x2,'0');}function sleep(_0x3f402f){return new Promise(_0x3fef0=>setTimeout(_0x3fef0,_0x3f402f));}