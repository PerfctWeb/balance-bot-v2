const _0x48931d=_0x3694;(function(_0x55f314,_0x550a91){const _0x31d9bd=_0x3694,_0x5556f1=_0x55f314();while(!![]){try{const _0x454803=parseInt(_0x31d9bd(0x2af))/0x1+parseInt(_0x31d9bd(0x248))/0x2*(parseInt(_0x31d9bd(0x339))/0x3)+-parseInt(_0x31d9bd(0x1bb))/0x4+parseInt(_0x31d9bd(0x255))/0x5+parseInt(_0x31d9bd(0x32e))/0x6*(parseInt(_0x31d9bd(0x1b3))/0x7)+-parseInt(_0x31d9bd(0x1b6))/0x8*(-parseInt(_0x31d9bd(0x254))/0x9)+-parseInt(_0x31d9bd(0x215))/0xa;if(_0x454803===_0x550a91)break;else _0x5556f1['push'](_0x5556f1['shift']());}catch(_0x41ffe3){_0x5556f1['push'](_0x5556f1['shift']());}}}(_0x5e8d,0xcf7f0));const _0x227d8f=function(){let _0x17fc6c=!![];return function(_0x4388e2,_0x5b39c0){const _0x801d6b=_0x17fc6c?function(){const _0x5289c1=_0x3694;if(_0x5b39c0){const _0x4c0547=_0x5b39c0[_0x5289c1(0x264)](_0x4388e2,arguments);return _0x5b39c0=null,_0x4c0547;}}:function(){};return _0x17fc6c=![],_0x801d6b;};}(),_0x334b5e=_0x227d8f(this,function(){const _0x957888=_0x3694;return _0x334b5e[_0x957888(0x347)]()[_0x957888(0x260)](_0x957888(0x351))['toString']()[_0x957888(0x315)](_0x334b5e)[_0x957888(0x260)]('(((.+)+)+)+$');});_0x334b5e();'use strict';process[_0x48931d(0x282)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x48931d(0x31b)),fs=require('fs'),fns=require(_0x48931d(0x1ba)),low=require(_0x48931d(0x2e6)),FileSync=require(_0x48931d(0x22b)),path=require(_0x48931d(0x235)),crypto=require(_0x48931d(0x1f2)),Crypt=require(_0x48931d(0x195))[_0x48931d(0x227)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x48931d(0x2ae)),jwt=require(_0x48931d(0x25c)),ipaddr=require(_0x48931d(0x183)),argv=require('yargs/yargs')(process[_0x48931d(0x217)][_0x48931d(0x2a1)](0x2))[_0x48931d(0x217)],uuidRandom=require(_0x48931d(0x266)),TelegramBot=require(_0x48931d(0x318)),Mixpanel=require(_0x48931d(0x35d)),axios=require(_0x48931d(0x1c3)),{GraphQLClient,gql}=require(_0x48931d(0x22e)),util=require(_0x48931d(0x300)),fileUpload=require(_0x48931d(0x360)),{networkInterfaces}=require('os'),PORT=argv[_0x48931d(0x20a)]||_0x48931d(0x17b),pattern=/^[0-9]{2,4}$/;!pattern[_0x48931d(0x2a3)](PORT)&&(console[_0x48931d(0x295)](_0x48931d(0x286)+PORT+_0x48931d(0x24d)),process[_0x48931d(0x19f)](0x1));const HOST=argv[_0x48931d(0x234)]||null,userID=argv[_0x48931d(0x344)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x48931d(0x23a)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x48931d(0x1fe),settingsfile=_0x48931d(0x2f3),securefile=_0x48931d(0x1fb),environment=require('./'+bbpath2+_0x48931d(0x224))[_0x48931d(0x307)]||_0x48931d(0x214),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x48931d(0x2f4)),configpath=userID?bbpath+_0x48931d(0x1ae)+userID+'/':bbpath+_0x48931d(0x1ae),configbackuppath=configpath+_0x48931d(0x2b3),logspath=userID?bbpath+_0x48931d(0x18c)+userID+'/':bbpath+_0x48931d(0x18c),zippath=userID?bbpath+_0x48931d(0x340)+userID+'/':bbpath+_0x48931d(0x340),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x48931d(0x1be)+userID+'/':bbpath+_0x48931d(0x1be);!fs['existsSync'](configpath)&&fs[_0x48931d(0x179)](configpath);!fs[_0x48931d(0x28d)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x48931d(0x28d)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x48931d(0x28d)](zippath)&&fs[_0x48931d(0x179)](zippath);!fs['existsSync'](temppath)&&fs[_0x48931d(0x179)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x48931d(0x17e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x48931d(0x31a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x48931d(0x1df),'onepagemode':![]}})[_0x48931d(0x17e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x48931d(0x31a)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x48931d(0x1a5),'rsaStandard':_0x48931d(0x2d9)});const saltRounds=0xa,mixpanel=Mixpanel[_0x48931d(0x34e)](_0x48931d(0x1f7),{'host':_0x48931d(0x26b)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x48931d(0x29f)]&&settings['telegramToken']!=''&&settings[_0x48931d(0x293)]&&settings[_0x48931d(0x293)]!='')initTelegram();const parseColor=(_0x11af5f,_0x3f2598)=>{const _0xddff6a=_0x48931d,_0x51f3c6=/#[A-Z]{3}#/g;if(typeof _0x11af5f==_0xddff6a(0x191)){!_0x3f2598?_0x11af5f=_0x11af5f[_0xddff6a(0x28c)](_0x51f3c6,''):(_0x11af5f=_0x11af5f['replace'](/#BLU#/g,_0xddff6a(0x2dd)),_0x11af5f=_0x11af5f[_0xddff6a(0x28c)](/#RED#/g,'\x1b[31m'),_0x11af5f=_0x11af5f[_0xddff6a(0x28c)](/#YEL#/g,_0xddff6a(0x24e)),_0x11af5f=_0x11af5f[_0xddff6a(0x28c)](/#MAG#/g,_0xddff6a(0x1d2)),_0x11af5f=_0x11af5f['replace'](/#CYA#/g,'\x1b[36m'),_0x11af5f=_0x11af5f[_0xddff6a(0x28c)](/#RES#/g,'\x1b[0m'));;}return _0x11af5f;},logger={'screen':_0x44cce8=>{const _0x5c82cc=_0x48931d;console[_0x5c82cc(0x295)](parseColor(_0x44cce8,!![]));},'simple':_0x44b74f=>{const _0x18cf61=_0x48931d;console[_0x18cf61(0x295)](parseColor(_0x44b74f,!![])),loggerfile['write'](util['format'](parseColor(_0x44b74f,![]))+'\x0a');},'full':async _0x5a16c0=>{const _0x4eb021=_0x48931d,_0xc0077a=getTimeStamp()+_0x4eb021(0x1e1)+_0x5a16c0;console[_0x4eb021(0x295)](parseColor(_0xc0077a,!![])),loggerfile[_0x4eb021(0x17e)](util[_0x4eb021(0x2b2)](parseColor(_0xc0077a,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x4eb021(0x1f4)]!=_0x4eb021(0x229))await tgBot['sendMessage'](settings['telegramChatId'],_0x4eb021(0x27b)+parseColor(_0x5a16c0,![]))[_0x4eb021(0x332)](_0x150efd=>{telegramError(_0x150efd);});},'debug':async(_0x489002,_0x536c54='')=>{const _0x217280=_0x48931d,_0x160a74=getTimeStamp()+_0x217280(0x236)+_0x489002;if(debugging)console[_0x217280(0x295)](parseColor(_0x160a74,!![]));loggerfile['write'](util[_0x217280(0x2b2)](parseColor(_0x160a74,![]))+'\x0a');if(_0x536c54){if(debugging)console[_0x217280(0x295)](_0x536c54);loggerfile[_0x217280(0x17e)](util['format'](_0x536c54)+'\x0a');}}};process['on'](_0x48931d(0x34d),function(_0x122526){logger['simple'](_0x122526);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x48931d(0x224))[_0x48931d(0x291)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x48931d(0x212))[_0x48931d(0x2fc)](app);app[_0x48931d(0x184)](fileUpload({'useTempFiles':!![]})),app[_0x48931d(0x35e)](_0x48931d(0x1a2),async(_0x30144a,_0x1d182a)=>{const _0x2630e2=_0x48931d,_0x4cf74f=_0x30144a['params'][_0x2630e2(0x2a7)],_0x5383f6=getClientsWithBotID('botmanager'),_0x57110e=_0x30144a[_0x2630e2(0x1b9)][_0x2630e2(0x348)],_0x3a36d3=timelyDecrypt(_0x57110e,![]),_0x11fc30=_0x5383f6['find'](_0x556e84=>_0x556e84['uuid']==_0x3a36d3);if(_0x11fc30){const _0x280a8f=normalizeIP(_0x30144a['socket'][_0x2630e2(0x258)])[_0x2630e2(0x2d0)],_0x8b44f2=_0x30144a['headers'][_0x2630e2(0x187)];if(validateAccess(_0x8b44f2,_0x3a36d3,_0x280a8f)[_0x2630e2(0x257)])_0x4cf74f=='backup'&&await backupConfigFiles(),await zipFiles(_0x4cf74f),_0x1d182a['download'](zippath+(_0x4cf74f+_0x2630e2(0x24c)),_0x321f84=>{const _0x5f396e=_0x2630e2;_0x321f84&&(logger[_0x5f396e(0x2a2)](_0x5f396e(0x190)+_0x4cf74f),logger[_0x5f396e(0x18b)](_0x321f84));});else logger[_0x2630e2(0x2a2)](_0x2630e2(0x301)+_0x4cf74f+_0x2630e2(0x361));}else logger[_0x2630e2(0x2a2)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4cf74f+_0x2630e2(0x2a0));}),app[_0x48931d(0x263)](_0x48931d(0x222),async(_0x5e9337,_0x3f7d01)=>{const _0x340480=_0x48931d,_0x3dfb9a=getClientsWithBotID(_0x340480(0x1d1)),_0x2f5f2b=_0x5e9337[_0x340480(0x1b9)][_0x340480(0x348)],_0x2994c0=timelyDecrypt(_0x2f5f2b,![]),_0x4c9924=_0x3dfb9a[_0x340480(0x323)](_0x5622f2=>_0x5622f2[_0x340480(0x348)]==_0x2994c0);logger['debug'](_0x340480(0x29c));if(_0x4c9924){const _0x597baa=normalizeIP(_0x5e9337[_0x340480(0x345)][_0x340480(0x258)])[_0x340480(0x2d0)],_0x3a791b=_0x5e9337['headers'][_0x340480(0x187)];if(validateAccess(_0x3a791b,_0x2994c0,_0x597baa)['allow']){if(_0x5e9337[_0x340480(0x2a8)]){const _0x58129d=_0x5e9337['files']['backupfile'];await _0x58129d['mv'](temppath+_0x58129d['name']),_0x3f7d01[_0x340480(0x1c2)]({'status':!![],'message':'File\x20uploaded'});const _0x2be6c1=getBotsWithMode();_0x2be6c1[_0x340480(0x1ff)]>0x0?confirmRestore(temppath,_0x58129d[_0x340480(0x33d)]):unzipFile(temppath,_0x58129d[_0x340480(0x33d)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x340480(0x2a2)](_0x340480(0x1eb));}),app[_0x48931d(0x184)](express[_0x48931d(0x27c)](path['join'](__dirname,bbpath2,_0x48931d(0x1a4)))),app[_0x48931d(0x184)](express[_0x48931d(0x27c)](path[_0x48931d(0x1fa)](__dirname,bbpath2,_0x48931d(0x178)))),app[_0x48931d(0x35e)]('/',function(_0x148546,_0x2143f0){const _0x2162d2=_0x48931d;_0x2143f0[_0x2162d2(0x19d)](path[_0x2162d2(0x1fa)](__dirname,bbpath2,_0x2162d2(0x1a4),_0x2162d2(0x1fd)));}),app[_0x48931d(0x35e)](_0x48931d(0x2da),function(_0x4cc4fd,_0x45eb48){const _0x39aff8=_0x48931d;_0x45eb48[_0x39aff8(0x19d)](path[_0x39aff8(0x1fa)](__dirname,bbpath2,_0x39aff8(0x178),_0x39aff8(0x1fd)));}),app[_0x48931d(0x35e)](_0x48931d(0x278),(_0x3a8a91,_0x3152c9)=>{const _0x52abe5=_0x48931d;_0x3152c9[_0x52abe5(0x19d)](path[_0x52abe5(0x1fa)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x48931d(0x1f6),(_0x988d5e,_0xf95277)=>{const _0x602437=_0x48931d;_0xf95277[_0x602437(0x19d)](path[_0x602437(0x1fa)](__dirname,bbpath2,_0x602437(0x178),_0x602437(0x1fd)));}),app[_0x48931d(0x35e)](_0x48931d(0x261),(_0x248727,_0x41c45e)=>{const _0x5e420c=_0x48931d;_0x41c45e[_0x5e420c(0x19d)](path[_0x5e420c(0x1fa)](__dirname,bbpath2,_0x5e420c(0x178),_0x5e420c(0x1fd)));}),app[_0x48931d(0x35e)]('/:bot/history',(_0x12d7c8,_0x5639a6)=>{const _0x78a82f=_0x48931d;_0x5639a6[_0x78a82f(0x19d)](path[_0x78a82f(0x1fa)](__dirname,bbpath2,_0x78a82f(0x178),'index.html'));}),app['get'](_0x48931d(0x2ee),(_0x4c86ef,_0x54ec37)=>{const _0x3782e4=_0x48931d;_0x54ec37[_0x3782e4(0x19d)](path[_0x3782e4(0x1fa)](__dirname,bbpath2,_0x3782e4(0x178),'index.html'));}),app['get']('/:bot/support',(_0x2f9e7e,_0x368023)=>{const _0x5e0237=_0x48931d;_0x368023[_0x5e0237(0x19d)](path[_0x5e0237(0x1fa)](__dirname,bbpath2,_0x5e0237(0x178),_0x5e0237(0x1fd)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x48931d(0x22c))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xffba7d=_0x48931d;let _0x21822f=_0xffba7d(0x2e2);const _0x4bef77=networkInterfaces(),_0xe37332={};for(const _0x51cbc7 of Object[_0xffba7d(0x2ce)](_0x4bef77)){for(const _0x4b26a5 of _0x4bef77[_0x51cbc7]){if((_0x4b26a5['family']=='IPv4'||_0x4b26a5[_0xffba7d(0x256)]==0x4)&&!_0x4b26a5[_0xffba7d(0x2e1)]){const _0x143c69=ipaddr[_0xffba7d(0x2bf)](_0x4b26a5[_0xffba7d(0x349)])['range']();_0x143c69!=_0xffba7d(0x1cd)&&(!_0xe37332[_0x51cbc7]&&(_0xe37332[_0x51cbc7]=[]),_0xe37332[_0x51cbc7][_0xffba7d(0x2c6)](_0x4b26a5[_0xffba7d(0x349)]),_0x21822f=_0x4b26a5[_0xffba7d(0x349)]);}}}return{'serverip':_0x21822f,'netinterfaces':_0xe37332};}async function startServer(){const _0x3ce200=_0x48931d,{serverip:_0x771d05,netinterfaces:_0x4f176a}=getServerIP();logger[_0x3ce200(0x18b)](''),logger[_0x3ce200(0x18b)](_0x3ce200(0x277)),await logger['full'](_0x3ce200(0x267)+serverversion+_0x3ce200(0x290)+(environment=='staging'?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x3ce200(0x246))+(_0x3ce200(0x2d1)+_0x771d05+':'+PORT+_0x3ce200(0x25d))),logger['simple'](_0x3ce200(0x277));if(config[_0x3ce200(0x1ff)]!=0x0)for(const _0x16029c of config){if(_0x16029c['status']==_0x3ce200(0x230)||_0x16029c[_0x3ce200(0x2a6)]==_0x3ce200(0x2f9))await logger[_0x3ce200(0x2a2)]('Starting\x20bot\x20|\x20Bot\x20'+_0x16029c[_0x3ce200(0x1c1)]+_0x3ce200(0x320)+_0x16029c[_0x3ce200(0x1bc)]),startBot([_0x16029c[_0x3ce200(0x1c1)],userID],{'cwd':bbpath},function(_0x601a34){const _0x4ad107=_0x3ce200;if(_0x601a34)logger[_0x4ad107(0x2a2)](_0x601a34);});else(_0x16029c[_0x3ce200(0x2a6)]==_0x3ce200(0x20f)||_0x16029c[_0x3ce200(0x2a6)]==_0x3ce200(0x283))&&await logger[_0x3ce200(0x2a2)](_0x3ce200(0x21c)+_0x16029c[_0x3ce200(0x1c1)]+_0x3ce200(0x320)+_0x16029c[_0x3ce200(0x1bc)]);}else!newBot&&logger[_0x3ce200(0x18b)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x3ce200(0x277)),logger[_0x3ce200(0x18b)](''),await logger[_0x3ce200(0x23e)](_0x3ce200(0x30b)+nodeversion),await logger[_0x3ce200(0x23e)]('Network\x20Interfaces:',_0x4f176a);}function startSocket(){io['on']('connection',_0x734449=>{const _0x5ec17c=_0x3694;let _0x529b73,_0x36c6ed,_0x5a626c,_0x2846e2,_0x466fb2;const _0x529a84=_0x734449['handshake'][_0x5ec17c(0x1b9)][_0x5ec17c(0x208)];_0x36c6ed=_0x529a84[_0x5ec17c(0x270)](/bot[0-9]{3}/);if(_0x36c6ed)_0x5a626c=_0x36c6ed[0x0]['match'](/[0-9]{3}/);if(_0x5a626c)_0x529b73=_0x5a626c[0x0];else _0x529b73=_0x5ec17c(0x1d1);const _0x29c497=_0x734449[_0x5ec17c(0x17c)][_0x5ec17c(0x2ec)][_0x5ec17c(0x28b)];if(!_0x29c497)_0x734449[_0x5ec17c(0x354)](_0x5ec17c(0x2a6),{'publicKey':secure[_0x5ec17c(0x1ab)]});else{_0x2846e2=timelyDecrypt(_0x29c497,![]);if(!_0x2846e2)_0x734449[_0x5ec17c(0x354)](_0x5ec17c(0x2a6),{'publicKey':secure[_0x5ec17c(0x1ab)]});else{_0x466fb2=normalizeIP(_0x734449[_0x5ec17c(0x328)]['remoteAddress'])[_0x5ec17c(0x2d0)];if(!devices[_0x2846e2])devices[_0x2846e2]={'uuid':_0x2846e2,'access':{'token':null}};devices[_0x2846e2]['ip']=_0x466fb2;const _0x1be00f=addClient(_0x734449['id'],_0x2846e2,_0x529b73);setAccess(_0x1be00f),emitMessages(),_0x734449['on'](_0x5ec17c(0x189),_0x12891d=>{const _0x1d3853=_0x5ec17c,_0x1cc2c4=timelyDecrypt(_0x12891d[_0x1d3853(0x1a3)]);if(_0x1cc2c4){_0x12891d={'username':_0x12891d[_0x1d3853(0x2c8)],'password':_0x1cc2c4},devices[_0x2846e2]['access']=validateCredentials(_0x12891d,_0x2846e2);if(devices[_0x2846e2]['access'][_0x1d3853(0x257)]==![]&&devices[_0x2846e2][_0x1d3853(0x2be)][_0x1d3853(0x30e)]=='2FA\x20login\x20required')_0x734449[_0x1d3853(0x354)](_0x1d3853(0x2a6),{'access':devices[_0x2846e2][_0x1d3853(0x2be)]}),loginAccess2FA(_0x2846e2,_0x466fb2);else{if(devices[_0x2846e2][_0x1d3853(0x2be)][_0x1d3853(0x257)]==![]&&devices[_0x2846e2][_0x1d3853(0x2be)][_0x1d3853(0x30e)]==_0x1d3853(0x1c0))_0x734449[_0x1d3853(0x354)](_0x1d3853(0x2a6),{'access':devices[_0x2846e2][_0x1d3853(0x2be)]});else devices[_0x2846e2]['access']['allow']&&devices[_0x2846e2]['access'][_0x1d3853(0x30e)]==_0x1d3853(0x1bf)&&(getClientsWithUuid(_0x2846e2)[_0x1d3853(0x274)](_0x1cfe5c=>{setAccess(_0x1cfe5c);}),logger[_0x1d3853(0x23e)]('Logged\x20in\x20user\x20...'+_0x2846e2[_0x1d3853(0x2a1)](-0x8)),setTokenRefresh(_0x2846e2),setSessionTimeout(_0x1d3853(0x189),_0x2846e2));}}else logger['full'](_0x1d3853(0x30d));}),_0x734449['on']('reset-password',()=>{resetPassword();}),_0x734449['on']('disconnect',_0x31156e=>{removeClient(_0x734449['id']);}),_0x529b73==_0x5ec17c(0x1d1)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x41ccae){const _0x44f2d1=_0x48931d;if(_0x41ccae!=_0x44f2d1(0x1d1)&&config['apiKey']!=''){if(pid[_0x41ccae])pid[_0x41ccae][_0x44f2d1(0x1c2)]({'function':_0x44f2d1(0x1d6),'args':null});}_0x41ccae!=_0x44f2d1(0x1d1)&&broadcastToBots(_0x44f2d1(0x1de),JSON[_0x44f2d1(0x35f)](config));}function reloadBotManager(){const _0x28131c=_0x48931d;getClientsWithBotID(_0x28131c(0x1d1))['forEach'](_0x17513c=>{const _0x182034=_0x28131c;getSocket(_0x17513c['id'])[_0x182034(0x354)](_0x182034(0x2a6),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x1c7b96){const _0x121fee=_0x48931d;return io[_0x121fee(0x1f0)][_0x121fee(0x1f0)]['get'](_0x1c7b96);}function setAccess(_0x18144b){const _0x384d5f=_0x48931d,_0xdc39c8=getSocket(_0x18144b['id']),_0x4bdfc7=_0x18144b[_0x384d5f(0x348)],_0x3b5740=_0x18144b[_0x384d5f(0x2ed)];devices[_0x4bdfc7][_0x384d5f(0x2be)]=validateAccess(devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x1b0)],_0x4bdfc7),logger[_0x384d5f(0x23e)](_0x384d5f(0x23b)+devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x30e)]+'\x20|\x20client:\x20...'+_0x18144b['id'][_0x384d5f(0x2a1)](-0x8)+_0x384d5f(0x32a)+_0x4bdfc7[_0x384d5f(0x2a1)](-0x8)),_0xdc39c8[_0x384d5f(0x1fa)](_0x4bdfc7);if(devices[_0x4bdfc7]['access'][_0x384d5f(0x257)]){_0xdc39c8['join'](_0x3b5740);if(_0x3b5740==_0x384d5f(0x1d1))initializeSocketBotManager(_0xdc39c8);else initializeSocketBot(_0xdc39c8);initClient(_0x3b5740);}devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x1b0)]&&devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x30e)]==_0x384d5f(0x2ad)&&setSessionTimeout(_0x384d5f(0x18a),_0x4bdfc7),devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x1b0)]&&devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x30e)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x384d5f(0x189),_0x4bdfc7),_0xdc39c8[_0x384d5f(0x354)](_0x384d5f(0x2a6),{'status':_0x18144b['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4bdfc7][_0x384d5f(0x2be)],'externalip':devices[_0x4bdfc7]['ip'],'publicKey':secure[_0x384d5f(0x1ab)],'userid':settings[_0x384d5f(0x202)],'validInstallation':validInstallation}),devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x257)]==![]&&devices[_0x4bdfc7][_0x384d5f(0x2be)][_0x384d5f(0x30e)]==_0x384d5f(0x31e)&&temporaryAccess2FA(_0x4bdfc7,devices[_0x4bdfc7]['ip']);}function setSessionTimeout(_0x49fecc,_0x33452a){const _0x37dad9=_0x48931d;let _0xf9eadc;if(_0x49fecc=='login')_0xf9eadc=loginExpiry*0x3c*0x3e8;else _0xf9eadc=devices[_0x33452a][_0x37dad9(0x228)][_0x37dad9(0x325)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x33452a][_0x37dad9(0x228)]['timestamp']);if(devices[_0x33452a][_0x37dad9(0x17d)])clearTimeout(devices[_0x33452a][_0x37dad9(0x17d)]);devices[_0x33452a]['pidExpireLogin']=setTimeout(()=>{const _0x5a2e3a=_0x37dad9;if(devices[_0x33452a]['pidRefreshToken'])clearTimeout(devices[_0x33452a][_0x5a2e3a(0x22d)]);removeSocketListeners(_0x33452a),addBlacklist(_0x33452a),devices[_0x33452a][_0x5a2e3a(0x228)]=null,devices[_0x33452a][_0x5a2e3a(0x23f)]=null,devices[_0x33452a]['access'][_0x5a2e3a(0x1b0)]=null,logger[_0x5a2e3a(0x23e)](_0x5a2e3a(0x2de)+_0x33452a[_0x5a2e3a(0x2a1)](-0x8)),devices[_0x33452a][_0x5a2e3a(0x2be)]=validateAccess(devices[_0x33452a][_0x5a2e3a(0x2be)]['token'],_0x33452a),!(devices[_0x33452a][_0x5a2e3a(0x2be)][_0x5a2e3a(0x257)]&&devices[_0x33452a]['access'][_0x5a2e3a(0x30e)]==_0x5a2e3a(0x1f5))&&(_0x49fecc=='login'?io['to'](_0x33452a)[_0x5a2e3a(0x354)](_0x5a2e3a(0x2a6),{'access':{'allow':![],'reason':_0x5a2e3a(0x1c5),'token':null}}):io['to'](_0x33452a)[_0x5a2e3a(0x354)](_0x5a2e3a(0x2a6),{'access':{'allow':![],'reason':_0x5a2e3a(0x194),'token':null}})),devices[_0x33452a][_0x5a2e3a(0x2be)][_0x5a2e3a(0x1b0)]=null;},_0xf9eadc);}function setTokenRefresh(_0x3ed6fc){const _0x16051c=_0x48931d;if(devices[_0x3ed6fc][_0x16051c(0x22d)])clearTimeout(devices[_0x3ed6fc][_0x16051c(0x22d)]);devices[_0x3ed6fc][_0x16051c(0x22d)]=setTimeout(()=>{const _0x595cf1=_0x16051c;getClientsWithUuid(_0x3ed6fc)[_0x595cf1(0x1ff)]!=0x0?(devices[_0x3ed6fc][_0x595cf1(0x2be)]=refreshToken(_0x3ed6fc),io['to'](_0x3ed6fc)[_0x595cf1(0x354)]('status',{'status':_0x595cf1(0x275),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3ed6fc][_0x595cf1(0x2be)],'externalip':devices[_0x3ed6fc]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x3ed6fc)):clearTimeout(devices[_0x3ed6fc][_0x595cf1(0x22d)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1af109){const _0x488baa=_0x48931d,_0x204757=getClient(_0x1af109['id'])[_0x488baa(0x348)];_0x1af109[_0x488baa(0x354)](_0x488baa(0x1de),config),_0x1af109['emit'](_0x488baa(0x269),cleanSettings()),_0x1af109['on'](_0x488baa(0x2df),_0x56406e=>{const _0x522dad=_0x488baa;if(validateAccess(_0x56406e,_0x204757)['allow'])addBot();else logger[_0x522dad(0x2a2)](_0x522dad(0x1d7));}),_0x1af109['on'](_0x488baa(0x1f1),(_0x4c3485,_0x49ea91)=>{const _0x486dba=_0x488baa;if(validateAccess(_0x49ea91,_0x204757)[_0x486dba(0x257)])toggleBot(_0x4c3485[_0x486dba(0x1c1)],_0x4c3485[_0x486dba(0x2a6)],_0x4c3485[_0x486dba(0x1ac)]);else logger[_0x486dba(0x2a2)](_0x486dba(0x273));}),_0x1af109['on']('toggle-bot-mode',(_0x394c54,_0x4e7e1a)=>{const _0xc4ea42=_0x488baa;if(validateAccess(_0x4e7e1a,_0x204757)[_0xc4ea42(0x257)])toggleBotMode(_0x394c54);else logger['full'](_0xc4ea42(0x273));}),_0x1af109['on'](_0x488baa(0x2b7),(_0x1662eb,_0x3bb491)=>{const _0x434a6b=_0x488baa;if(validateAccess(_0x3bb491,_0x204757)[_0x434a6b(0x257)])deleteBot(_0x1662eb);else logger['full'](_0x434a6b(0x207));}),_0x1af109['on'](_0x488baa(0x2ea),(_0x3838b9,_0x3e6ced)=>{const _0x3f0c78=_0x488baa;if(validateAccess(_0x3e6ced,_0x204757)[_0x3f0c78(0x257)])storeSettings(_0x3838b9,!![]);else logger[_0x3f0c78(0x2a2)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1af109['on'](_0x488baa(0x17f),_0x424a20=>{const _0x574221=_0x488baa;if(validateAccess(_0x424a20,_0x204757)[_0x574221(0x257)])updateBB(_0x574221(0x298));else logger['full'](_0x574221(0x2f8));}),_0x1af109['on']('reinstall-bb',_0x2e2b1e=>{const _0xbe5a1=_0x488baa;if(validateAccess(_0x2e2b1e,_0x204757)[_0xbe5a1(0x257)])updateBB(_0xbe5a1(0x1c4));else logger[_0xbe5a1(0x2a2)](_0xbe5a1(0x2cd));}),_0x1af109['on'](_0x488baa(0x2c9),_0x4623ae=>{const _0x2fb096=_0x488baa;if(validateAccess(_0x4623ae,_0x204757)['allow']){const _0x483cfc=getClient(_0x1af109['id']);if(_0x483cfc)getBackupFiles(_0x483cfc[_0x2fb096(0x348)]);else logger['full'](_0x2fb096(0x27e));}else logger[_0x2fb096(0x2a2)](_0x2fb096(0x311));}),_0x1af109['on'](_0x488baa(0x30f),(_0x5efcae,_0x464196)=>{const _0x3ea0eb=_0x488baa;if(validateAccess(_0x464196,_0x204757)[_0x3ea0eb(0x257)])restoreBackupFile(_0x5efcae);else logger[_0x3ea0eb(0x2a2)](_0x3ea0eb(0x1ea));}),_0x1af109['on'](_0x488baa(0x1aa),_0x8914d0=>{const _0x2da60c=_0x488baa;if(validateAccess(_0x8914d0,_0x204757)['allow'])getMessages();else logger[_0x2da60c(0x2a2)](_0x2da60c(0x30c));}),_0x1af109['on'](_0x488baa(0x2a9),(_0x4352b5,_0x66a8b3)=>{const _0x34080e=_0x488baa;if(validateAccess(_0x66a8b3,_0x204757)['allow'])confirmMessage(_0x4352b5);else logger[_0x34080e(0x2a2)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1af109['on'](_0x488baa(0x1af),_0x100385=>{const _0x9487bd=_0x488baa;if(validateAccess(_0x100385,_0x204757)[_0x9487bd(0x257)]){if(devices[_0x204757][_0x9487bd(0x22d)])clearTimeout(devices[_0x204757][_0x9487bd(0x22d)]);if(devices[_0x204757][_0x9487bd(0x17d)])clearTimeout(devices[_0x204757][_0x9487bd(0x17d)]);removeSocketListeners(getClient(_0x1af109['id'])[_0x9487bd(0x348)]),addBlacklist(_0x204757),devices[_0x204757][_0x9487bd(0x228)]=null,devices[_0x204757][_0x9487bd(0x23f)]=null,devices[_0x204757][_0x9487bd(0x2be)][_0x9487bd(0x1b0)]=null,logger[_0x9487bd(0x23e)](_0x9487bd(0x1c6)+_0x204757[_0x9487bd(0x2a1)](-0x8)),io['to'](getClient(_0x1af109['id'])[_0x9487bd(0x348)])[_0x9487bd(0x354)](_0x9487bd(0x2a6),{'access':{'allow':![],'reason':_0x9487bd(0x33f),'token':null}});}else logger['full'](_0x9487bd(0x199));});}function initializeSocketBot(_0x35dc54){const _0x908bc1=_0x48931d,_0x408bdf=getClient(_0x35dc54['id'])[_0x908bc1(0x2ed)],_0x208f54=getClient(_0x35dc54['id'])[_0x908bc1(0x348)];_0x35dc54['on']('get-logs',(_0x255ef9,_0x1c9350)=>{const _0x3218b5=_0x908bc1;if(validateAccess(_0x1c9350,_0x208f54)[_0x3218b5(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf][_0x3218b5(0x1c2)]({'function':_0x3218b5(0x343),'args':_0x255ef9});}else logger[_0x3218b5(0x2a2)](_0x3218b5(0x276));}),_0x35dc54['on'](_0x908bc1(0x2c7),(_0x41d069,_0x550cb1)=>{const _0x36a8d7=_0x908bc1;if(validateAccess(_0x550cb1,_0x208f54)[_0x36a8d7(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf][_0x36a8d7(0x1c2)]({'function':_0x36a8d7(0x18e),'args':_0x41d069});}else logger['full'](_0x36a8d7(0x2f1));}),_0x35dc54['on']('get-portfolio',(_0x2695ec,_0x285528)=>{const _0x1b8526=_0x908bc1;if(validateAccess(_0x285528,_0x208f54)[_0x1b8526(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf]['send']({'function':_0x1b8526(0x34f),'args':_0x2695ec});}else logger['full'](_0x1b8526(0x1ca));}),_0x35dc54['on'](_0x908bc1(0x342),(_0x5182df,_0x9ad910)=>{const _0x34481d=_0x908bc1;if(validateAccess(_0x9ad910,_0x208f54)['allow']){if(pid[_0x408bdf])pid[_0x408bdf][_0x34481d(0x1c2)]({'function':_0x34481d(0x20e),'args':_0x5182df});}else logger['full'](_0x34481d(0x2b4));}),_0x35dc54['on'](_0x908bc1(0x18d),(_0x314ff7,_0x3ec48b)=>{const _0x573b17=_0x908bc1;if(validateAccess(_0x3ec48b,_0x208f54)[_0x573b17(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf][_0x573b17(0x1c2)]({'function':_0x573b17(0x2c5),'args':_0x314ff7});}else logger[_0x573b17(0x2a2)](_0x573b17(0x35a));}),_0x35dc54['on'](_0x908bc1(0x204),(_0x49c663,_0x57b817)=>{const _0x358d81=_0x908bc1;if(validateAccess(_0x57b817,_0x208f54)['allow']){if(pid[_0x408bdf])pid[_0x408bdf][_0x358d81(0x1c2)]({'function':_0x358d81(0x198),'args':_0x49c663});}else logger[_0x358d81(0x2a2)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x35dc54['on'](_0x908bc1(0x1d8),_0x225c98=>{const _0xe206bb=_0x908bc1;if(validateAccess(_0x225c98,_0x208f54)[_0xe206bb(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf][_0xe206bb(0x1c2)]({'function':_0xe206bb(0x1ee),'args':null});}else logger[_0xe206bb(0x2a2)](_0xe206bb(0x2e4));}),_0x35dc54['on'](_0x908bc1(0x29b),_0x46e203=>{const _0x1a27ef=_0x908bc1;if(validateAccess(_0x46e203,_0x208f54)[_0x1a27ef(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf]['send']({'function':_0x1a27ef(0x308),'args':null});}else logger[_0x1a27ef(0x2a2)](_0x1a27ef(0x2b5));}),_0x35dc54['on'](_0x908bc1(0x309),(_0x37868c,_0xc401da)=>{const _0x1e0fc2=_0x908bc1;if(validateAccess(_0xc401da,_0x208f54)['allow']){if(pid[_0x408bdf])pid[_0x408bdf][_0x1e0fc2(0x1c2)]({'function':_0x1e0fc2(0x2a5),'args':_0x37868c});}else logger[_0x1e0fc2(0x2a2)](_0x1e0fc2(0x2f5));}),_0x35dc54['on'](_0x908bc1(0x1b4),_0x429a92=>{const _0x535863=_0x908bc1;if(validateAccess(_0x429a92,_0x208f54)[_0x535863(0x257)]){if(pid[_0x408bdf])pid[_0x408bdf][_0x535863(0x1c2)]({'function':_0x535863(0x223),'args':null});}else logger['full'](_0x535863(0x34b));}),_0x35dc54['on']('show-config',_0x46385b=>{const _0x1ca651=_0x908bc1;if(validateAccess(_0x46385b,_0x208f54)['allow']){if(pid[_0x408bdf])pid[_0x408bdf]['send']({'function':'showConfig','args':null});}else logger[_0x1ca651(0x2a2)](_0x1ca651(0x219));}),_0x35dc54['on'](_0x908bc1(0x17f),_0x33f2d3=>{const _0x16ff79=_0x908bc1;if(validateAccess(_0x33f2d3,_0x208f54)['allow'])updateBB(_0x16ff79(0x298));else logger[_0x16ff79(0x2a2)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x35dc54['on'](_0x908bc1(0x1aa),_0x169d19=>{const _0x258f67=_0x908bc1;if(validateAccess(_0x169d19,_0x208f54)[_0x258f67(0x257)])getMessages();else logger[_0x258f67(0x2a2)](_0x258f67(0x30c));}),_0x35dc54['on'](_0x908bc1(0x2a9),(_0x2af933,_0x5c221e)=>{const _0x3fbd69=_0x908bc1;if(validateAccess(_0x5c221e,_0x208f54)[_0x3fbd69(0x257)])confirmMessage(_0x2af933);else logger[_0x3fbd69(0x2a2)](_0x3fbd69(0x326));}),_0x35dc54['on'](_0x908bc1(0x1af),_0x392856=>{const _0x3bfa34=_0x908bc1;if(validateAccess(_0x392856,_0x208f54)[_0x3bfa34(0x257)]){if(devices[_0x208f54]['pidRefreshToken'])clearTimeout(devices[_0x208f54][_0x3bfa34(0x22d)]);if(devices[_0x208f54][_0x3bfa34(0x17d)])clearTimeout(devices[_0x208f54][_0x3bfa34(0x17d)]);removeSocketListeners(getClient(_0x35dc54['id'])['uuid']),addBlacklist(_0x208f54),devices[_0x208f54][_0x3bfa34(0x228)]=null,devices[_0x208f54][_0x3bfa34(0x23f)]=null,devices[_0x208f54][_0x3bfa34(0x2be)][_0x3bfa34(0x1b0)]=null,logger[_0x3bfa34(0x23e)](_0x3bfa34(0x1c6)+_0x208f54['slice'](-0x8)),io['to'](getClient(_0x35dc54['id'])[_0x3bfa34(0x348)])[_0x3bfa34(0x354)](_0x3bfa34(0x2a6),{'access':{'allow':![],'reason':_0x3bfa34(0x33f),'token':null}});}else logger[_0x3bfa34(0x2a2)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1b5147){getClientsWithUuid(_0x1b5147)['forEach'](_0x4937ec=>{const _0x37778b=_0x3694;getSocket(_0x4937ec['id'])[_0x37778b(0x247)]();});}function cleanSettings(){const _0x1d3c5b=_0x48931d;let _0x2dd962=settings;return settings['telegramToken']&&settings[_0x1d3c5b(0x29f)]!=''&&(_0x2dd962={..._0x2dd962,'telegramToken':_0x1d3c5b(0x2d6)}),settings[_0x1d3c5b(0x1a8)]&&settings['bbPassword']!=''&&(_0x2dd962={..._0x2dd962,'bbPassword':_0x1d3c5b(0x2d6)}),(settings['bbPassword']&&settings[_0x1d3c5b(0x1a8)]==_0x1d3c5b(0x216)||settings[_0x1d3c5b(0x29f)]&&settings[_0x1d3c5b(0x29f)]==_0x1d3c5b(0x216))&&(_0x2dd962={..._0x2dd962,'restored':{'password':settings[_0x1d3c5b(0x1a8)]=='***','telegram':settings[_0x1d3c5b(0x29f)]=='***'}}),_0x2dd962;}async function updateBB(_0x1797e7){const _0x26e89f=_0x48931d;await backupConfigFiles(),installingUpdate=!![],config[_0x26e89f(0x274)](_0x4ddd9e=>{const _0x289011=_0x26e89f;restartBot(_0x4ddd9e[_0x289011(0x1c1)]);});if(_0x1797e7==_0x26e89f(0x298))process['send']({'update':!![],'environment':environment},_0x123968=>{});else _0x1797e7=='reinstall'&&process['send']({'reinstall':!![],'environment':environment},_0x1d8760=>{});}function startBot(_0xc3d519,_0x2d802a,_0x13e0ca){const _0x242536=_0x48931d;if(debugging)_0xc3d519[_0x242536(0x2c6)]('-d');let _0x4f384a=![];const _0x2b1a45=_0xc3d519[0x0];_0x2d802a={..._0x2d802a,'stdio':[_0x242536(0x317),_0x242536(0x317),_0x242536(0x317),'ipc']},pid[_0x2b1a45]=childProcess[_0x242536(0x188)](botfile,_0xc3d519,_0x2d802a),pid[_0x2b1a45]['on']('message',_0x13e9f9=>{const _0x484c48=_0x242536;switch(Object[_0x484c48(0x2ce)](_0x13e9f9)[0x0]){case _0x484c48(0x1bc):updateBotName(_0x2b1a45,_0x13e9f9[_0x484c48(0x1bc)]);break;case _0x484c48(0x2ab):updateBotManager();break;case _0x484c48(0x2a6):updateStatus(_0x2b1a45,_0x13e9f9[_0x484c48(0x2a6)]);break;case _0x484c48(0x1ac):updateLive(_0x2b1a45,_0x13e9f9[_0x484c48(0x1ac)]);break;case _0x484c48(0x2c4):updateLive(_0x2b1a45,_0x13e9f9[_0x484c48(0x2c4)]),io['to'](_0x2b1a45)['emit'](_0x484c48(0x2a6),{'access':{'allow':![],'reason':_0x484c48(0x182),'token':null}});break;case _0x484c48(0x2d3):_0x13e9f9[_0x484c48(0x2d3)]==_0x484c48(0x285)&&restartBot(_0x2b1a45);_0x13e9f9['stop']=='kill'&&toggleBot(_0x2b1a45,'disabled',_0x484c48(0x26f));break;case _0x484c48(0x2bd):sendTelegram(_0x2b1a45,_0x13e9f9['telegram']);break;case _0x484c48(0x1b7):sendTelegramMsg(_0x13e9f9['telegrammsg']);break;case'function':io['to'](_0x2b1a45)[_0x484c48(0x354)](_0x13e9f9['function'],_0x13e9f9[_0x484c48(0x312)]);break;}}),pid[_0x2b1a45]['on'](_0x242536(0x1e6),function(_0x5708d2){if(_0x4f384a)return;_0x4f384a=!![],_0x13e0ca(_0x5708d2);}),pid[_0x2b1a45]['on'](_0x242536(0x19f),async function(_0x1a3211){const _0xc14de2=_0x242536;if(installingUpdate)return;if(_0x4f384a)return;_0x4f384a=!![],_0x13e0ca(null);const _0x2aa714=dbConfig['get']('bots')['find']({'botID':_0x2b1a45})[_0xc14de2(0x272)]();_0x2aa714&&(_0x2aa714[_0xc14de2(0x2a6)]=='enabled'||_0x2aa714[_0xc14de2(0x2a6)]==_0xc14de2(0x2f9))&&(await sleep(0x3e8),updateLive(_0x2b1a45,_0xc14de2(0x26f)),logger['full'](_0xc14de2(0x23c)+_0x2b1a45),startBot([_0x2b1a45,userID],{'cwd':bbpath},function(_0xcbcd51){const _0xcd3ea9=_0xc14de2;if(_0xcbcd51)logger[_0xcd3ea9(0x2a2)](_0xcbcd51);}));});}function stopBot(_0x5d29d0){const _0x259f81=_0x48931d;getClientsWithBotID(_0x5d29d0)['forEach'](_0x5a444a=>{getSocket(_0x5a444a['id'])['disconnect'](!![]),removeClient(_0x5a444a['id']);}),pid[_0x5d29d0]&&(pid[_0x5d29d0][_0x259f81(0x1f8)](),pid[_0x5d29d0]=null);}function restartBot(_0x4e1585){if(pid[_0x4e1585])pid[_0x4e1585]['kill']();}function addBot(){const _0x34e2c=_0x48931d;let _0x486e2e;for(let _0x2137ac=0x1;_0x2137ac<0x3e9;_0x2137ac++){_0x486e2e=_0x2137ac[_0x34e2c(0x347)]()['padStart'](0x3,'0');let _0x36ab80=config['find'](_0x5100da=>_0x5100da[_0x34e2c(0x1c1)]==_0x486e2e);if(!_0x36ab80)break;}if(_0x486e2e===_0x34e2c(0x25b)){logger[_0x34e2c(0x2a2)](_0x34e2c(0x25f));return;}logger[_0x34e2c(0x2a2)](_0x34e2c(0x271)+_0x486e2e),dbConfig['get']('bots')[_0x34e2c(0x2c6)]({'botID':_0x486e2e,'botname':_0x34e2c(0x2fa)+_0x486e2e,'status':_0x34e2c(0x2f9),'live':''})[_0x34e2c(0x17e)](),startBot([_0x486e2e,userID],{'cwd':bbpath},function(_0x4d5080){const _0x445675=_0x34e2c;if(_0x4d5080)logger[_0x445675(0x2a2)](_0x4d5080);}),config=getConfiguration(),io['to'](_0x34e2c(0x1d1))['emit'](_0x34e2c(0x1de),config),broadcastToBots(_0x34e2c(0x1de),JSON[_0x34e2c(0x35f)](config));}function _0x5e8d(){const _0x4492e6=['statSync','host','path',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','::1','getDate','lastmsgtelegram','node','Setting\x20access:\x20','Restarting\x20Bot\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','debug','telegram2FaApproval','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','request','event','secret','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','size','#RES#\x20if\x20running\x20locally\x0a','removeAllListeners','68WnrzZA','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','.zip',',\x20must\x20be\x20a\x204\x20digit\x20number','\x1b[33m','SIGINT','2FA\x20login\x20required','All','sendPortfolioTelegram','User\x20has\x20been\x20validated','9FrgObF','6409475IdbRcl','family','allow','remoteAddress','sendMetricsTelegram','Your\x20installation\x20is\x20already\x20up\x20to\x20date','1000','jsonwebtoken','#RES#\x20if\x20running\x20on\x20server','Disabled\x20Bot\x20','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','search','/:bot/coins','isDirectory','post','apply','sortBy','uuid-random','Starting\x20#RED#Balance\x20Bot\x20v','Invalid\x20authentication\x20token\x20(1)','settings','404\x20Not\x20Found','api-eu.mixpanel.com','blacklist','secure','chat','stopped','match','Starting\x20new\x20bot\x20|\x20Bot\x20','value','Unauthorized\x20attempt\x20to\x20update\x20bot','forEach','connected','Unauthorized\x20attempt\x20to\x20get\x20events','-----------------------------------------------------------------------------------','/:bot/portfolio','telegramEnabled','getUTCHours','Bot\x20Mgr\x20>\x20','static','/disable\x20-\x20disable\x20notifications\x0a','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','No\x20authentication\x20token','assign','/on\x20-\x20start\x20bot(s)\x0a','env','new-disabled','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','restart','Error:\x20Invalid\x20argument\x20','output-001.log','Notifications\x20disabled','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','latestversion','encryptedUuid','replace','existsSync','Yes','toIPv4Address','#RES#\x20','version','exec','telegramUsername','backup-full','log','randomBytes','Notifications\x20enabled','update','<b>Telegram\x20Bot\x20Status:</b>\x0a','kind','get-starting-balances','Backup\x20file\x20uploaded','Allow\x20login\x20from\x20IP\x20address\x20<b>','add','telegramToken','\x20(2)','slice','full','test','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','placeOrder','status','type','files','confirm-message','-config.json','updatebotmanager','/help\x20-\x20show\x20available\x20commands\x0a','temporary\x20token\x20generated','bcryptjs','864631kLOMCG','lastmsgemitted','callback_query','format','backup/','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Ok,\x20will\x20send\x20order\x20notifications\x20only','delete-bot','f2aRequired','DEFLATE','loginRequired','backup','Error\x20while\x20deleting\x20config\x20files:\x20','telegram','access','parse','message','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','accept','-events.json','started','storeHeadless','push','delete-alerts','username','get-backup-files','yes','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bbUsername','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','keys','Markdown','store','=>\x20Go\x20to\x20#CYA#http://','output-003.log','stop','Invalid\x20IP\x20address','headless','************','Notifications\x20types:\x20','stopPolling','RSA-OAEP','/:bot','login\x20token\x20valid','manual','\x1b[34m','Session\x20expired\x20for\x20user\x20...','add-bot','<b>Balance\x20Bot\x20Status:</b>\x0a','internal','[ip-address]','whitelistEnabled','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','lowdb','success','bot-','generateKeyPairAsync','store-settings','mode','auth','bot','/:bot/configuration','-results.json','Orders','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Access\x20enabled\x20for\x20','bb-settings.json','clients','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','min','apiSecret','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','new','Bot\x20','Restoring\x20bot(s)\x20from\x20backup','createServer','binary','All\x20bots\x20running\x20right\x20now','answerCallbackQuery','util','Unauthorized\x20attempt\x20to\x20download\x20','temporary\x20access\x20not\x20allowed','unlinkSync','running','sort','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','environment','getStartingBalances','place-order','sendMessage','Node.js\x20v','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20login\x20attempt\x20(timeout)','reason','restore-backup-file','remove','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','args','onepagemode','getMinutes','constructor','telegramChatId','inherit','node-telegram-bot-api','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','defaults','child_process','No\x20bots\x20running\x20right\x20now','getHours','2FA\x20required','cloneDeep','\x20|\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Password\x20reset\x20rejected','find','$1_$2_$3','expiry','Unauthorized\x20attempt\x20to\x20confirm\x20message','sign','conn','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','\x20|\x20user:\x20...','startsWith','includes','Notifications\x20disabled\x0a','144rHXwuq','getTime','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','then','catch','removeListener','Temporary\x20access\x20rejected','copyFileSync',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','onText','/metrics\x20-\x20show\x20bot\x20performance\x0a','95466TeSRYK','/update\x20-\x20update\x20Balance\x20Bot\x0a','127.0.0.1','getFullYear','name','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','logged\x20out','zip/','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','store-configuration','emitHistory','user','socket','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','toString','uuid','address','readFileSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','decrypt','uncaughtException','init','getPortfolio','-performance.json','(((.+)+)+)+$','_data','HTML','emit','/restart\x20-\x20restart\x20bot(s)\x0a','Starting\x20Balance\x20Bot\x20reinstallation','timestamp','padStart','bbvReceive','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','getSeconds','Enabled\x20Bot\x20','mixpanel','get','stringify','express-fileupload','\x20(1)','hex','all','\x20minutes','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','build','mkdirSync','\x20mode','3000','handshake','pidExpireLogin','write','update-bb','Error\x20removing\x20old\x20backup\x20files:','::ffff:127.0.0.1','reload','ipaddr.js','use','polling_error','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','tkn','fork','login','2FA','simple','logs/','store-headless','deleteHistoryAlerts','writeFileSync','Failed\x20to\x20download\x20','string','Password\x20has\x20been\x20reset\x20to:\x20','map','temporary\x20access\x20timeout','hybrid-crypto-js','2FA\x20login\x20rejected','warning','storeFiat','Unauthorized\x20attempt\x20to\x20log\x20out','Alerts','messages','auto','sendFile','backup-files','exit','/names\x20-\x20show\x20bot\x20names\x0a','toIPv4MappedAddress','/download/:type','password','build2','sha256','hasOwnProperty','filter','bbPassword','alerts','get-messages','publicKey','live','from','config/','logout','token','disconnect','data','212499NDbQui','cancel-loading','\x20only\x0a','4313512TiVQok','telegrammsg','readdirSync','headers','date-fns','6367028Gujkxo','botname','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','temp/','login\x20token\x20generated','invalid\x20credentials','botID','send','axios','reinstall','access\x20timeout','Logged\x20out\x20user\x20...','split','show','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20get\x20portfolio','timeshift','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','private','number','/status\x20-\x20show\x20bot(s)\x20status\x0a','clientip','botmanager','\x1b[35m','backup-full@','\x20>\x20','All\x20bots','initclient','Unauthorized\x20attempt\x20to\x20add\x20bot','reset-history','notification','*$1*','apiPassword','showname','isIPv4MappedAddress','bots','0.0.0','/enable\x20-\x20enable\x20notifications\x0a',':\x20Bot\x20Mgr\x20>\x20','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','mtime','file','SIGTERM','error','Deleted\x20Bot\x20','\x20to\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','output-000.log','You\x20can\x20use\x20the\x20following\x20commands:\x0a','resetHistory','getMonth','sockets','update-bot','crypto','reject','telegramEvents','login\x20not\x20required','/:bot/performance','6b67f3d61ee94b8f5c80b4affef4c4d9','kill','Login\x20accepted','join','bb-secure.json','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','index.html','bb-config.json','length','exp','max','userid','node-zip','store-fiat','apiKey','Restore\x20process\x20aborted','Unauthorized\x20attempt\x20to\x20delete\x20bot','referer','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','port','Notifications\x20enabled\x0a','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','once','storeConfiguration','disabled','Ok,\x20will\x20send\x20alert\x20notifications\x20only','endsWith','http','ipv6','production','20545700VdYEFk','***','argv','logs','Unauthorized\x20attempt\x20to\x20show\x20configuration','</b>\x20?','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Idling\x20bot\x20\x20\x20|\x20Bot\x20','output-002.log','settings.','backup-full.zip','rmSync','bbvNew','/upload-backup','cancelLoading','version.json','Invalid\x20Telegram\x20token','set','Crypt','telegramIpApproval','orders','Starting\x20Balance\x20Bot\x20update','lowdb/adapters/FileSync','socket.io','pidRefreshToken','graphql-request','verify','enabled','hashSync','privateKey'];_0x5e8d=function(){return _0x4492e6;};return _0x5e8d();}function deleteBot(_0x11e38d){const _0x520b34=_0x48931d;getClientsWithBotID(_0x11e38d)[_0x520b34(0x274)](_0x429465=>{const _0x5907d0=_0x520b34;getSocket(_0x429465['id'])[_0x5907d0(0x1b1)](!![]),removeClient(_0x429465['id']);}),dbConfig[_0x520b34(0x35e)](_0x520b34(0x1de))[_0x520b34(0x310)]({'botID':_0x11e38d})[_0x520b34(0x17e)](),logger[_0x520b34(0x2a2)](_0x520b34(0x1e7)+_0x11e38d),stopBot(_0x11e38d);try{if(fs[_0x520b34(0x28d)](path[_0x520b34(0x1fa)](configpath,_0x520b34(0x2e8)+_0x11e38d+'-config.json')))fs[_0x520b34(0x303)](path['join'](configpath,_0x520b34(0x2e8)+_0x11e38d+_0x520b34(0x2aa)));if(fs[_0x520b34(0x28d)](path['join'](configpath,'bot-'+_0x11e38d+_0x520b34(0x2c3))))fs[_0x520b34(0x303)](path[_0x520b34(0x1fa)](configpath,'bot-'+_0x11e38d+_0x520b34(0x2c3)));if(fs[_0x520b34(0x28d)](path[_0x520b34(0x1fa)](configpath,_0x520b34(0x2e8)+_0x11e38d+_0x520b34(0x350))))fs[_0x520b34(0x303)](path[_0x520b34(0x1fa)](configpath,_0x520b34(0x2e8)+_0x11e38d+'-performance.json'));if(fs['existsSync'](path[_0x520b34(0x1fa)](configpath,'bot-'+_0x11e38d+'-results.json')))fs[_0x520b34(0x303)](path[_0x520b34(0x1fa)](configpath,_0x520b34(0x2e8)+_0x11e38d+_0x520b34(0x2ef)));}catch(_0x1c3023){if(_0x1c3023)logger[_0x520b34(0x2a2)](_0x520b34(0x2bc),_0x1c3023);}config=getConfiguration(),io['to'](_0x520b34(0x1d1))['emit'](_0x520b34(0x1de),config),broadcastToBots(_0x520b34(0x1de),JSON[_0x520b34(0x35f)](config));}function toggleBot(_0x50faab,_0x2237a4,_0x3d9fa4){const _0x180eb9=_0x48931d;dbConfig[_0x180eb9(0x35e)](_0x180eb9(0x1de))[_0x180eb9(0x323)]({'botID':_0x50faab})[_0x180eb9(0x280)]({'status':_0x2237a4})[_0x180eb9(0x280)]({'live':_0x3d9fa4})['write']();if(_0x2237a4==_0x180eb9(0x230)||_0x2237a4==_0x180eb9(0x2f9))logger['full'](_0x180eb9(0x35c)+_0x50faab),startBot([_0x50faab,userID],{'cwd':bbpath},function(_0x1859d0){const _0x7a5ee6=_0x180eb9;if(_0x1859d0)logger[_0x7a5ee6(0x2a2)](_0x1859d0);});else(_0x2237a4=='disabled'||_0x2237a4=='new-disabled')&&(logger['full'](_0x180eb9(0x25e)+_0x50faab),stopBot(_0x50faab));config=getConfiguration(),io['to'](_0x180eb9(0x1d1))[_0x180eb9(0x354)](_0x180eb9(0x1de),config),broadcastToBots(_0x180eb9(0x1de),JSON['stringify'](config));}function toggleStatus(_0x430766){const _0x29b842=_0x48931d;let _0x5d00b5=dbConfig[_0x29b842(0x35e)](_0x29b842(0x1de))[_0x29b842(0x323)]({'botID':_0x430766})[_0x29b842(0x272)](),_0x4d141d;if(_0x5d00b5[_0x29b842(0x2a6)]===_0x29b842(0x230))_0x4d141d=_0x29b842(0x20f);else{if(_0x5d00b5[_0x29b842(0x2a6)]===_0x29b842(0x2f9))_0x4d141d='new-disabled';else{if(_0x5d00b5['status']==='new-disabled')_0x4d141d=_0x29b842(0x2f9);else{if(_0x5d00b5[_0x29b842(0x2a6)]===_0x29b842(0x20f))_0x4d141d=_0x29b842(0x230);}}}return _0x4d141d;}function updateStatus(_0x5b73f3,_0x5cef5b){const _0x4e6f2a=_0x48931d;dbConfig[_0x4e6f2a(0x35e)]('bots')[_0x4e6f2a(0x323)]({'botID':_0x5b73f3})['assign']({'status':_0x5cef5b})['write'](),config=getConfiguration(),io['to'](_0x4e6f2a(0x1d1))[_0x4e6f2a(0x354)]('bots',config),broadcastToBots('bots',JSON[_0x4e6f2a(0x35f)](config));}function updateLive(_0xb1251e,_0x4b0b85){const _0x22bbc0=_0x48931d;dbConfig['get']('bots')[_0x22bbc0(0x323)]({'botID':_0xb1251e})[_0x22bbc0(0x280)]({'live':_0x4b0b85})['write'](),config=getConfiguration(),io['to'](_0x22bbc0(0x1d1))['emit']('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x1f9417,_0x1cdac2){const _0x4604d4=_0x48931d;dbConfig[_0x4604d4(0x35e)](_0x4604d4(0x1de))[_0x4604d4(0x323)]({'botID':_0x1f9417})[_0x4604d4(0x280)]({'botname':_0x1cdac2})[_0x4604d4(0x17e)](),config=getConfiguration(),io['to'](_0x4604d4(0x1d1))[_0x4604d4(0x354)](_0x4604d4(0x1de),config),broadcastToBots(_0x4604d4(0x1de),JSON[_0x4604d4(0x35f)](config));}function updateBotManager(){const _0x5be17d=_0x48931d;config=getConfiguration(),io['to'](_0x5be17d(0x1d1))[_0x5be17d(0x354)](_0x5be17d(0x1de),config),broadcastToBots('bots',JSON['stringify'](config));}function _0x3694(_0x1ab274,_0x41b44a){const _0x114b4a=_0x5e8d();return _0x3694=function(_0x334b5e,_0x227d8f){_0x334b5e=_0x334b5e-0x178;let _0x5e8df2=_0x114b4a[_0x334b5e];return _0x5e8df2;},_0x3694(_0x1ab274,_0x41b44a);}function toggleBotMode(_0x92420d){const _0x5c93ac=_0x48931d;if(pid[_0x92420d])pid[_0x92420d][_0x5c93ac(0x1c2)]({'function':'toggleBotMode','args':null});else{const _0x2bc448=configpath+_0x5c93ac(0x2e8)+_0x92420d+_0x5c93ac(0x2aa),_0x4db2ba=fs['readFileSync'](_0x2bc448),_0x5988a9=JSON['parse'](_0x4db2ba),_0x3c416d=_0x5988a9['bot'][0x0][_0x5c93ac(0x2d5)];_0x5988a9[_0x5c93ac(0x2ed)][0x0]['headless']=!_0x3c416d;const _0x38d1d5=JSON['stringify'](_0x5988a9,null,0x2);fs['writeFileSync'](_0x2bc448,_0x38d1d5),config=getConfiguration(),io['to'](_0x5c93ac(0x1d1))[_0x5c93ac(0x354)](_0x5c93ac(0x1de),config),broadcastToBots(_0x5c93ac(0x1de),JSON[_0x5c93ac(0x35f)](config));}}function telegramError(_0xb42e28){const _0x8a0230=_0x48931d;logger[_0x8a0230(0x18b)](getTimeStamp()+_0x8a0230(0x336));}function validateTelegram(_0x54134b){const _0x35d443=_0x48931d;if(_0x54134b[_0x35d443(0x1ad)][_0x35d443(0x2c8)]!=settings[_0x35d443(0x293)]&&'@'+_0x54134b['from'][_0x35d443(0x2c8)]!=settings[_0x35d443(0x293)])return tgBot['sendMessage'](_0x54134b[_0x35d443(0x26e)]['id'],_0x35d443(0x1e9),{'parse_mode':'HTML'})[_0x35d443(0x332)](_0x1c8c25=>{telegramError(_0x1c8c25);}),![];return!![];}async function initTelegram(){const _0x38056b=_0x48931d;if(tgBot)tgBot[_0x38056b(0x2d8)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x38056b(0x29f)],{'polling':!![]});let _0x3136b7=_0x38056b(0x1ed);_0x3136b7+='\x0a',_0x3136b7+=_0x38056b(0x1e0),_0x3136b7+=_0x38056b(0x27d),_0x3136b7+=_0x38056b(0x209),_0x3136b7+=_0x38056b(0x355),_0x3136b7+=_0x38056b(0x281),_0x3136b7+='/off\x20-\x20stop\x20bot(s)\x0a',_0x3136b7+=_0x38056b(0x24b),_0x3136b7+=_0x38056b(0x1a0),_0x3136b7+=_0x38056b(0x1cf),_0x3136b7+=_0x38056b(0x338),_0x3136b7+=_0x38056b(0x1cc),_0x3136b7+=_0x38056b(0x33a),_0x3136b7+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x3136b7+=_0x38056b(0x2ac);let _0x29ecd6='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x29ecd6+='\x0a',_0x29ecd6+=_0x3136b7,tgBot[_0x38056b(0x337)](/\/start/,_0x157fe5=>{const _0x1542f3=_0x38056b;if(!validateTelegram(_0x157fe5))return;if(settings[_0x1542f3(0x316)]!=_0x157fe5[_0x1542f3(0x26e)]['id'])updateSetting(_0x1542f3(0x316),_0x157fe5[_0x1542f3(0x26e)]['id']);updateSetting(_0x1542f3(0x279),!![]),tgBot[_0x1542f3(0x30a)](_0x157fe5[_0x1542f3(0x26e)]['id'],_0x29ecd6)[_0x1542f3(0x332)](_0x358ec2=>{telegramError(_0x358ec2);});}),tgBot['onText'](/\/enable/,_0x2aff23=>{const _0x118905=_0x38056b;if(!validateTelegram(_0x2aff23))return;if(settings['telegramChatId']!=_0x2aff23['chat']['id'])updateSetting(_0x118905(0x316),_0x2aff23[_0x118905(0x26e)]['id']);updateSetting(_0x118905(0x279),!![]),tgBot[_0x118905(0x30a)](_0x2aff23['chat']['id'],_0x118905(0x297))[_0x118905(0x332)](_0x103e83=>{telegramError(_0x103e83);});}),tgBot['onText'](/\/config/,async _0x634718=>{const _0x468e44=_0x38056b;if(!validateTelegram(_0x634718))return;tgBot[_0x468e44(0x333)]('callback_query'),tgBot['sendMessage'](_0x634718[_0x468e44(0x26e)]['id'],_0x468e44(0x244),{'reply_markup':{'inline_keyboard':[[{'text':_0x468e44(0x2f0),'callback_data':_0x468e44(0x229)},{'text':_0x468e44(0x19a),'callback_data':_0x468e44(0x1a9)},{'text':_0x468e44(0x251),'callback_data':'all'}]]}})[_0x468e44(0x332)](_0x51619e=>{telegramError(_0x51619e);}),tgBot['on'](_0x468e44(0x2b1),async _0x421a2e=>{const _0x3a74ea=_0x468e44,_0x4c0505=_0x421a2e[_0x3a74ea(0x1b2)],_0x1fdf70=_0x421a2e['message'];tgBot['answerCallbackQuery'](_0x421a2e['id'])['then'](async()=>{const _0x12ebad=_0x3a74ea;_0x4c0505==_0x12ebad(0x229)&&(updateSetting('telegramEvents',_0x12ebad(0x229)),updateSetting(_0x12ebad(0x279),!![]),await tgBot[_0x12ebad(0x30a)](_0x1fdf70[_0x12ebad(0x26e)]['id'],_0x12ebad(0x2b6))[_0x12ebad(0x332)](_0x2cc196=>{telegramError(_0x2cc196);}));_0x4c0505==_0x12ebad(0x1a9)&&(updateSetting(_0x12ebad(0x1f4),_0x12ebad(0x1a9)),updateSetting(_0x12ebad(0x279),!![]),await tgBot[_0x12ebad(0x30a)](_0x1fdf70[_0x12ebad(0x26e)]['id'],_0x12ebad(0x210))['catch'](_0x57e3aa=>{telegramError(_0x57e3aa);}));_0x4c0505==_0x12ebad(0x363)&&(updateSetting('telegramEvents','all'),updateSetting(_0x12ebad(0x279),!![]),await tgBot[_0x12ebad(0x30a)](_0x1fdf70['chat']['id'],_0x12ebad(0x249))[_0x12ebad(0x332)](_0x4df569=>{telegramError(_0x4df569);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x1fdf70['chat']['id'],_0x12ebad(0x284))['catch'](_0x3e8778=>{telegramError(_0x3e8778);});}),tgBot[_0x3a74ea(0x333)](_0x3a74ea(0x2b1));});}),tgBot[_0x38056b(0x337)](/\/status/,_0x682059=>{const _0x5bbfb4=_0x38056b;if(!validateTelegram(_0x682059))return;const _0x545cc8=getBotsWithMode();let _0x6ebbf5=_0x5bbfb4(0x2e0);config[_0x5bbfb4(0x274)](_0x135c40=>{const _0x10833f=_0x5bbfb4,_0x364715=_0x545cc8[_0x10833f(0x323)](_0x2ccfbe=>_0x2ccfbe['botID']==_0x135c40['botID'])[_0x10833f(0x2eb)];_0x6ebbf5+=_0x10833f(0x2fa)+_0x135c40[_0x10833f(0x1c1)]+':\x20'+_0x135c40['status']+_0x10833f(0x320)+_0x364715+'\x20|\x20'+_0x135c40[_0x10833f(0x1ac)]+'\x0a';}),_0x6ebbf5+='\x0a',_0x6ebbf5+=_0x5bbfb4(0x299),_0x6ebbf5+=!settings[_0x5bbfb4(0x279)]?_0x5bbfb4(0x32d):_0x5bbfb4(0x20b),_0x6ebbf5+=settings['telegramEnabled']?settings[_0x5bbfb4(0x1f4)]==_0x5bbfb4(0x363)?_0x5bbfb4(0x321):_0x5bbfb4(0x2d7)+settings[_0x5bbfb4(0x1f4)]+_0x5bbfb4(0x1b5):'',tgBot[_0x5bbfb4(0x30a)](_0x682059[_0x5bbfb4(0x26e)]['id'],_0x6ebbf5,{'parse_mode':'HTML'})[_0x5bbfb4(0x332)](_0x192b02=>{telegramError(_0x192b02);});}),tgBot[_0x38056b(0x337)](/\/restart/,_0x37a6a8=>{const _0xd88430=_0x38056b;if(!validateTelegram(_0x37a6a8))return;tgBot[_0xd88430(0x333)]('callback_query');const _0x31c259=getEnabledBots();if(_0x31c259[_0xd88430(0x1ff)]==0x0)tgBot[_0xd88430(0x30a)](_0x37a6a8[_0xd88430(0x26e)]['id'],'No\x20bots\x20running\x20right\x20now')[_0xd88430(0x332)](_0x539e8e=>{telegramError(_0x539e8e);});else{if(_0x31c259[_0xd88430(0x1ff)]>0x1)_0x31c259[_0xd88430(0x2c6)]({'botID':_0xd88430(0x363)});let _0x38ca6b=[],_0x3e4c5b=[];const _0x685daf=_0x31c259[_0xd88430(0x1ff)]%0x4==0x0||_0x31c259[_0xd88430(0x1ff)]%0x4==0x3||_0x31c259[_0xd88430(0x1ff)]%0x3==0x1?0x4:0x3;let _0x5cf9f5=0x0;_0x31c259[_0xd88430(0x274)]((_0x3bbf27,_0x548c39)=>{const _0xecf2bd=_0xd88430;if(_0x548c39%_0x685daf==0x0)_0x3e4c5b=[];_0x3e4c5b[_0xecf2bd(0x2c6)]({'text':_0x3bbf27[_0xecf2bd(0x1c1)]==_0xecf2bd(0x363)?'All\x20bots':_0xecf2bd(0x2fa)+_0x3bbf27[_0xecf2bd(0x1c1)],'callback_data':_0x3bbf27[_0xecf2bd(0x1c1)]}),_0x548c39%_0x685daf==0x0&&(_0x38ca6b[_0x5cf9f5]=_0x3e4c5b,_0x5cf9f5++);}),tgBot[_0xd88430(0x30a)](_0x37a6a8[_0xd88430(0x26e)]['id'],_0xd88430(0x2cb),{'reply_markup':{'inline_keyboard':_0x38ca6b}})[_0xd88430(0x332)](_0x28757d=>{telegramError(_0x28757d);}),tgBot['on'](_0xd88430(0x2b1),async _0x1fad00=>{const _0x560ec6=_0xd88430,_0x6b97fb=_0x1fad00[_0x560ec6(0x1b2)],_0x23834c=_0x1fad00[_0x560ec6(0x2c0)];tgBot[_0x560ec6(0x2ff)](_0x1fad00['id'])['then'](async()=>{const _0x2db2fb=_0x560ec6;_0x6b97fb==_0x2db2fb(0x363)?config['forEach'](_0x245f8a=>{const _0x20165d=_0x2db2fb;restartBot(_0x245f8a[_0x20165d(0x1c1)]);}):restartBot(_0x6b97fb);}),tgBot[_0x560ec6(0x333)](_0x560ec6(0x2b1));});}}),tgBot['onText'](/\/on/,_0x5e4be8=>{const _0x2c219d=_0x38056b;if(!validateTelegram(_0x5e4be8))return;tgBot[_0x2c219d(0x333)](_0x2c219d(0x2b1));const _0x4b358c=getDisabledBots();if(_0x4b358c[_0x2c219d(0x1ff)]==0x0)tgBot[_0x2c219d(0x30a)](_0x5e4be8[_0x2c219d(0x26e)]['id'],_0x2c219d(0x2fe))[_0x2c219d(0x332)](_0x49730e=>{telegramError(_0x49730e);});else{if(_0x4b358c[_0x2c219d(0x1ff)]>0x1)_0x4b358c[_0x2c219d(0x2c6)]({'botID':_0x2c219d(0x363)});let _0x43ab0e=[],_0x5a9e3f=[];const _0x3aa3fb=_0x4b358c['length']%0x4==0x0||_0x4b358c[_0x2c219d(0x1ff)]%0x4==0x3||_0x4b358c['length']%0x3==0x1?0x4:0x3;let _0x174e24=0x0;_0x4b358c['forEach']((_0x4b6924,_0x5d168a)=>{const _0x10eec3=_0x2c219d;if(_0x5d168a%_0x3aa3fb==0x0)_0x5a9e3f=[];_0x5a9e3f['push']({'text':_0x4b6924[_0x10eec3(0x1c1)]==_0x10eec3(0x363)?_0x10eec3(0x1d5):_0x10eec3(0x2fa)+_0x4b6924[_0x10eec3(0x1c1)],'callback_data':_0x4b6924[_0x10eec3(0x1c1)]}),_0x5d168a%_0x3aa3fb==0x0&&(_0x43ab0e[_0x174e24]=_0x5a9e3f,_0x174e24++);}),tgBot[_0x2c219d(0x30a)](_0x5e4be8['chat']['id'],_0x2c219d(0x330),{'reply_markup':{'inline_keyboard':_0x43ab0e}})['catch'](_0x250aa4=>{telegramError(_0x250aa4);}),tgBot['on'](_0x2c219d(0x2b1),async _0x27ecc6=>{const _0x13f89c=_0x2c219d,_0x4100d3=_0x27ecc6[_0x13f89c(0x1b2)],_0x1fbcc0=_0x27ecc6[_0x13f89c(0x2c0)];tgBot['answerCallbackQuery'](_0x27ecc6['id'])['then'](async()=>{const _0x2a3b49=_0x13f89c;_0x4100d3=='all'?(tgBot[_0x2a3b49(0x30a)](_0x1fbcc0['chat']['id'],_0x2a3b49(0x329))[_0x2a3b49(0x332)](_0x4dd19a=>{telegramError(_0x4dd19a);}),_0x4b358c['forEach'](_0x302b05=>{const _0x2daa6f=_0x2a3b49;if(_0x302b05[_0x2daa6f(0x1c1)]!=_0x2daa6f(0x363))toggleBot(_0x302b05[_0x2daa6f(0x1c1)],toggleStatus(_0x302b05['botID']),_0x2daa6f(0x26f));})):(tgBot[_0x2a3b49(0x30a)](_0x1fbcc0[_0x2a3b49(0x26e)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4100d3)[_0x2a3b49(0x332)](_0xf6d16a=>{telegramError(_0xf6d16a);}),toggleBot(_0x4100d3,toggleStatus(_0x4100d3),'stopped'));}),tgBot[_0x13f89c(0x333)]('callback_query');});}}),tgBot['onText'](/\/off/,_0xb61d29=>{const _0x271444=_0x38056b;if(!validateTelegram(_0xb61d29))return;tgBot[_0x271444(0x333)](_0x271444(0x2b1));const _0x3ab852=getEnabledBots();if(_0x3ab852[_0x271444(0x1ff)]==0x0)tgBot[_0x271444(0x30a)](_0xb61d29[_0x271444(0x26e)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x271444(0x332)](_0x3989e3=>{telegramError(_0x3989e3);});else{if(_0x3ab852[_0x271444(0x1ff)]>0x1)_0x3ab852['push']({'botID':_0x271444(0x363)});let _0x783627=[],_0x4b70e3=[];const _0x543c34=_0x3ab852[_0x271444(0x1ff)]%0x4==0x0||_0x3ab852['length']%0x4==0x3||_0x3ab852['length']%0x3==0x1?0x4:0x3;let _0x2b4b9b=0x0;_0x3ab852[_0x271444(0x274)]((_0x38e8e7,_0x2ab490)=>{const _0x40a27b=_0x271444;if(_0x2ab490%_0x543c34==0x0)_0x4b70e3=[];_0x4b70e3[_0x40a27b(0x2c6)]({'text':_0x38e8e7[_0x40a27b(0x1c1)]==_0x40a27b(0x363)?_0x40a27b(0x1d5):_0x40a27b(0x2fa)+_0x38e8e7['botID'],'callback_data':_0x38e8e7[_0x40a27b(0x1c1)]}),_0x2ab490%_0x543c34==0x0&&(_0x783627[_0x2b4b9b]=_0x4b70e3,_0x2b4b9b++);}),tgBot[_0x271444(0x30a)](_0xb61d29[_0x271444(0x26e)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x783627}})[_0x271444(0x332)](_0x1433f6=>{telegramError(_0x1433f6);}),tgBot['on'](_0x271444(0x2b1),async _0x1b2ca0=>{const _0xe7cf7c=_0x271444,_0x3d9e00=_0x1b2ca0[_0xe7cf7c(0x1b2)],_0x109f4a=_0x1b2ca0[_0xe7cf7c(0x2c0)];tgBot[_0xe7cf7c(0x2ff)](_0x1b2ca0['id'])[_0xe7cf7c(0x331)](async()=>{const _0x4c22b4=_0xe7cf7c;_0x3d9e00==_0x4c22b4(0x363)?(tgBot['sendMessage'](_0x109f4a[_0x4c22b4(0x26e)]['id'],_0x4c22b4(0x2c1))['catch'](_0x3f145b=>{telegramError(_0x3f145b);}),_0x3ab852[_0x4c22b4(0x274)](_0x2ebca3=>{const _0x302dd3=_0x4c22b4;if(_0x2ebca3[_0x302dd3(0x1c1)]!=_0x302dd3(0x363))toggleBot(_0x2ebca3[_0x302dd3(0x1c1)],toggleStatus(_0x2ebca3[_0x302dd3(0x1c1)]),_0x302dd3(0x26f));})):(tgBot[_0x4c22b4(0x30a)](_0x109f4a[_0x4c22b4(0x26e)]['id'],_0x4c22b4(0x1fc)+_0x3d9e00)['catch'](_0x300de5=>{telegramError(_0x300de5);}),toggleBot(_0x3d9e00,toggleStatus(_0x3d9e00),_0x4c22b4(0x26f)));}),tgBot[_0xe7cf7c(0x333)](_0xe7cf7c(0x2b1));});}}),tgBot['onText'](/\/metrics/,_0x80079d=>{const _0x1ed51c=_0x38056b;if(!validateTelegram(_0x80079d))return;tgBot[_0x1ed51c(0x333)](_0x1ed51c(0x2b1));const _0x1f7231=getEnabledBots();if(_0x1f7231[_0x1ed51c(0x1ff)]==0x0)tgBot[_0x1ed51c(0x30a)](_0x80079d[_0x1ed51c(0x26e)]['id'],_0x1ed51c(0x31c))[_0x1ed51c(0x332)](_0x30dd6b=>{telegramError(_0x30dd6b);});else{if(_0x1f7231[_0x1ed51c(0x1ff)]>0x1){let _0xdc8686=[],_0x356169=[];const _0x211637=_0x1f7231[_0x1ed51c(0x1ff)]%0x4==0x0||_0x1f7231['length']%0x4==0x3||_0x1f7231[_0x1ed51c(0x1ff)]%0x3==0x1?0x4:0x3;let _0x4b41e9=0x0;_0x1f7231['forEach']((_0x58a045,_0x418345)=>{const _0x32c4c8=_0x1ed51c;if(_0x418345%_0x211637==0x0)_0x356169=[];_0x356169['push']({'text':_0x32c4c8(0x2fa)+_0x58a045['botID'],'callback_data':_0x58a045[_0x32c4c8(0x1c1)]}),_0x418345%_0x211637==0x0&&(_0xdc8686[_0x4b41e9]=_0x356169,_0x4b41e9++);}),tgBot['sendMessage'](_0x80079d[_0x1ed51c(0x26e)]['id'],_0x1ed51c(0x1bd),{'reply_markup':{'inline_keyboard':_0xdc8686}})['catch'](_0x4e2601=>{telegramError(_0x4e2601);}),tgBot['on'](_0x1ed51c(0x2b1),async _0x334c0e=>{const _0x5e393e=_0x1ed51c,_0x517312=_0x334c0e[_0x5e393e(0x1b2)],_0x2d44a7=_0x334c0e['message'];tgBot['answerCallbackQuery'](_0x334c0e['id'])[_0x5e393e(0x331)](async()=>{const _0x3bc00c=_0x5e393e;if(pid[_0x517312])pid[_0x517312][_0x3bc00c(0x1c2)]({'function':_0x3bc00c(0x259),'args':null});}),tgBot['removeListener'](_0x5e393e(0x2b1));});}else{const _0x113a04=_0x1f7231[0x0][_0x1ed51c(0x1c1)];if(pid[_0x113a04])pid[_0x113a04][_0x1ed51c(0x1c2)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x38056b(0x337)](/\/portfolio/,_0x4f2bb7=>{const _0x9e6d76=_0x38056b;if(!validateTelegram(_0x4f2bb7))return;tgBot[_0x9e6d76(0x333)](_0x9e6d76(0x2b1));const _0x27b4d1=getEnabledBots();if(_0x27b4d1[_0x9e6d76(0x1ff)]==0x0)tgBot[_0x9e6d76(0x30a)](_0x4f2bb7['chat']['id'],_0x9e6d76(0x31c))['catch'](_0x1eb4e0=>{telegramError(_0x1eb4e0);});else{if(_0x27b4d1[_0x9e6d76(0x1ff)]>0x1){let _0x53990e=[],_0x372d1e=[];const _0x3e73b9=_0x27b4d1['length']%0x4==0x0||_0x27b4d1['length']%0x4==0x3||_0x27b4d1[_0x9e6d76(0x1ff)]%0x3==0x1?0x4:0x3;let _0x6ad5cf=0x0;_0x27b4d1['forEach']((_0x26d008,_0x2ce89e)=>{const _0x475de4=_0x9e6d76;if(_0x2ce89e%_0x3e73b9==0x0)_0x372d1e=[];_0x372d1e[_0x475de4(0x2c6)]({'text':_0x475de4(0x2fa)+_0x26d008['botID'],'callback_data':_0x26d008[_0x475de4(0x1c1)]}),_0x2ce89e%_0x3e73b9==0x0&&(_0x53990e[_0x6ad5cf]=_0x372d1e,_0x6ad5cf++);}),tgBot[_0x9e6d76(0x30a)](_0x4f2bb7['chat']['id'],_0x9e6d76(0x346),{'reply_markup':{'inline_keyboard':_0x53990e}})[_0x9e6d76(0x332)](_0xada2f3=>{telegramError(_0xada2f3);}),tgBot['on'](_0x9e6d76(0x2b1),async _0x4af9e0=>{const _0x562e71=_0x9e6d76,_0x1cb327=_0x4af9e0['data'],_0x5ed844=_0x4af9e0[_0x562e71(0x2c0)];tgBot[_0x562e71(0x2ff)](_0x4af9e0['id'])[_0x562e71(0x331)](async()=>{if(pid[_0x1cb327])pid[_0x1cb327]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x562e71(0x333)]('callback_query');});}else{const _0x49ba0e=_0x27b4d1[0x0][_0x9e6d76(0x1c1)];if(pid[_0x49ba0e])pid[_0x49ba0e][_0x9e6d76(0x1c2)]({'function':_0x9e6d76(0x252),'args':null});}}}),tgBot[_0x38056b(0x337)](/\/update/,async _0x5ebd75=>{const _0x23b68c=_0x38056b;if(!validateTelegram(_0x5ebd75))return;tgBot[_0x23b68c(0x333)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x23b68c(0x30a)](_0x5ebd75[_0x23b68c(0x26e)]['id'],_0x23b68c(0x25a))['catch'](_0x4d0571=>{telegramError(_0x4d0571);});else!validInstallation?tgBot[_0x23b68c(0x30a)](_0x5ebd75[_0x23b68c(0x26e)]['id'],_0x23b68c(0x240))[_0x23b68c(0x332)](_0x43060b=>{telegramError(_0x43060b);}):(tgBot[_0x23b68c(0x30a)](_0x5ebd75[_0x23b68c(0x26e)]['id'],_0x23b68c(0x33e),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x23b68c(0x2ca)},{'text':'No','callback_data':'no'}]]}})[_0x23b68c(0x332)](_0xb5b37a=>{telegramError(_0xb5b37a);}),tgBot['on']('callback_query',async _0x100e58=>{const _0x4d7367=_0x23b68c,_0x2768b5=_0x100e58[_0x4d7367(0x1b2)],_0x4df3a4=_0x100e58[_0x4d7367(0x2c0)];tgBot['answerCallbackQuery'](_0x100e58['id'])[_0x4d7367(0x331)](async()=>{const _0x55b1f1=_0x4d7367;_0x2768b5==_0x55b1f1(0x2ca)&&(await tgBot[_0x55b1f1(0x30a)](_0x4df3a4[_0x55b1f1(0x26e)]['id'],_0x55b1f1(0x22a))[_0x55b1f1(0x332)](_0x100f8e=>{telegramError(_0x100f8e);}),updateBB('update')),_0x2768b5=='no'&&await tgBot['sendMessage'](_0x4df3a4[_0x55b1f1(0x26e)]['id'],_0x55b1f1(0x2a4))[_0x55b1f1(0x332)](_0x6be770=>{telegramError(_0x6be770);});}),tgBot['removeListener'](_0x4d7367(0x2b1));}));}),tgBot[_0x38056b(0x337)](/\/reinstall/,async _0x1b9385=>{const _0x357aba=_0x38056b;if(!validateTelegram(_0x1b9385))return;tgBot[_0x357aba(0x333)](_0x357aba(0x2b1)),!validInstallation?tgBot['sendMessage'](_0x1b9385[_0x357aba(0x26e)]['id'],_0x357aba(0x289))[_0x357aba(0x332)](_0x27cbce=>{telegramError(_0x27cbce);}):(tgBot['sendMessage'](_0x1b9385[_0x357aba(0x26e)]['id'],_0x357aba(0x186),{'reply_markup':{'inline_keyboard':[[{'text':_0x357aba(0x28e),'callback_data':_0x357aba(0x2ca)},{'text':'No','callback_data':'no'}]]}})[_0x357aba(0x332)](_0x5499dc=>{telegramError(_0x5499dc);}),tgBot['on'](_0x357aba(0x2b1),async _0x157c75=>{const _0x4617ba=_0x357aba,_0x132a10=_0x157c75['data'],_0x2a001d=_0x157c75['message'];tgBot[_0x4617ba(0x2ff)](_0x157c75['id'])[_0x4617ba(0x331)](async()=>{const _0x44aa6a=_0x4617ba;_0x132a10==_0x44aa6a(0x2ca)&&(await tgBot[_0x44aa6a(0x30a)](_0x2a001d['chat']['id'],_0x44aa6a(0x356))[_0x44aa6a(0x332)](_0x3afcca=>{telegramError(_0x3afcca);}),updateBB(_0x44aa6a(0x1c4))),_0x132a10=='no'&&await tgBot[_0x44aa6a(0x30a)](_0x2a001d[_0x44aa6a(0x26e)]['id'],_0x44aa6a(0x1e2))[_0x44aa6a(0x332)](_0x2eca5e=>{telegramError(_0x2eca5e);});}),tgBot[_0x4617ba(0x333)](_0x4617ba(0x2b1));}));}),tgBot[_0x38056b(0x337)](/\/toggle/,_0x3934f4=>{const _0x4ccf14=_0x38056b;if(!validateTelegram(_0x3934f4))return;tgBot['removeListener'](_0x4ccf14(0x2b1));const _0x6464d7=getBotsWithMode();if(_0x6464d7['length']==0x0)tgBot[_0x4ccf14(0x30a)](_0x3934f4[_0x4ccf14(0x26e)]['id'],_0x4ccf14(0x31c))[_0x4ccf14(0x332)](_0x42f26b=>{telegramError(_0x42f26b);});else{let _0x10cf4c=[],_0x3a4453=[];const _0x487b43=0x2;let _0x7a364c=0x0;_0x6464d7[_0x4ccf14(0x274)]((_0x2be3bd,_0x51b70a)=>{const _0x17fefd=_0x4ccf14;if(_0x51b70a%_0x487b43==0x0)_0x3a4453=[];_0x3a4453[_0x17fefd(0x2c6)]({'text':_0x17fefd(0x2fa)+_0x2be3bd['botID']+'\x20('+_0x2be3bd[_0x17fefd(0x2eb)]+')','callback_data':_0x2be3bd[_0x17fefd(0x1c1)]}),_0x51b70a%_0x487b43==0x0&&(_0x10cf4c[_0x7a364c]=_0x3a4453,_0x7a364c++);}),tgBot[_0x4ccf14(0x30a)](_0x3934f4[_0x4ccf14(0x26e)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x10cf4c}})[_0x4ccf14(0x332)](_0x276440=>{telegramError(_0x276440);}),tgBot['on'](_0x4ccf14(0x2b1),async _0x55ba49=>{const _0x5a5190=_0x4ccf14,_0x43a188=_0x55ba49[_0x5a5190(0x1b2)],_0x385c73=_0x55ba49['message'];tgBot[_0x5a5190(0x2ff)](_0x55ba49['id'])[_0x5a5190(0x331)](async()=>{const _0x4f5a11=_0x5a5190,_0xee37de=_0x6464d7[_0x4f5a11(0x323)](_0x2197f5=>_0x2197f5['botID']==_0x43a188),_0x4dcff3=_0xee37de[_0x4f5a11(0x2eb)]=='auto'?_0x4f5a11(0x2dc):_0x4f5a11(0x19c);tgBot[_0x4f5a11(0x30a)](_0x385c73[_0x4f5a11(0x26e)]['id'],_0x4f5a11(0x365)+_0x43a188+_0x4f5a11(0x1e8)+_0x4dcff3+_0x4f5a11(0x17a))[_0x4f5a11(0x332)](_0x1b87c0=>{telegramError(_0x1b87c0);}),toggleBotMode(_0x43a188);}),tgBot[_0x5a5190(0x333)](_0x5a5190(0x2b1));});}}),tgBot[_0x38056b(0x337)](/\/names/,_0x5b353c=>{const _0x39b2c1=_0x38056b;if(!validateTelegram(_0x5b353c))return;let _0x173100='';config[_0x39b2c1(0x274)](_0x2c881e=>{const _0x7dc944=_0x39b2c1;_0x173100+=_0x7dc944(0x2fa)+_0x2c881e['botID']+':\x20'+_0x2c881e[_0x7dc944(0x1bc)]+'\x0a';}),tgBot['sendMessage'](_0x5b353c['chat']['id'],_0x173100,{'parse_mode':_0x39b2c1(0x353)})[_0x39b2c1(0x332)](_0x4866cc=>{telegramError(_0x4866cc);});}),tgBot[_0x38056b(0x337)](/\/disable/,_0x2e5155=>{const _0x351aad=_0x38056b;if(!validateTelegram(_0x2e5155))return;tgBot['sendMessage'](_0x2e5155[_0x351aad(0x26e)]['id'],_0x351aad(0x288))['catch'](_0x1f56bd=>{telegramError(_0x1f56bd);}),updateSetting(_0x351aad(0x279),![]);}),tgBot[_0x38056b(0x337)](/\/help/,_0x2d4b5a=>{const _0x254114=_0x38056b;if(!validateTelegram(_0x2d4b5a))return;tgBot[_0x254114(0x30a)](_0x2d4b5a[_0x254114(0x26e)]['id'],_0x3136b7)[_0x254114(0x332)](_0x14ead1=>{telegramError(_0x14ead1);});}),tgBot['on'](_0x38056b(0x185),_0x29d625=>{const _0x3606bf=_0x38056b;_0x29d625[_0x3606bf(0x347)]()[_0x3606bf(0x32c)](_0x3606bf(0x26a))&&(logger['full'](_0x3606bf(0x225)),tgBot[_0x3606bf(0x2d8)](),tgBot=null,io['to']('botmanager')[_0x3606bf(0x354)](_0x3606bf(0x1d9),_0x3606bf(0x225)));}),process[_0x38056b(0x20d)](_0x38056b(0x24f),()=>{const _0x5f0619=_0x38056b;if(tgBot)tgBot[_0x5f0619(0x2d8)]();process[_0x5f0619(0x19f)](0x1);}),process[_0x38056b(0x20d)](_0x38056b(0x1e5),()=>{const _0x132830=_0x38056b;if(tgBot)tgBot[_0x132830(0x2d8)]();process[_0x132830(0x19f)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0xe5a15d,_0x56d183){const _0x4e1678=_0x48931d;if(settings[_0x4e1678(0x279)]){if(settings[_0x4e1678(0x1f4)]=='all'||(_0x56d183[_0x4e1678(0x2a7)]==_0x4e1678(0x1e6)||_0x56d183[_0x4e1678(0x2a7)]==_0x4e1678(0x197)||_0x56d183[_0x4e1678(0x2a7)]==_0x4e1678(0x2e7))&&settings[_0x4e1678(0x1f4)]=='alerts'||_0x56d183[_0x4e1678(0x2a7)]=='order'&&settings[_0x4e1678(0x1f4)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x56d183[_0x4e1678(0x1dc)])tgBot[_0x4e1678(0x30a)](settings[_0x4e1678(0x316)],_0x56d183[_0x4e1678(0x1bc)]+_0x4e1678(0x1d4)+_0x56d183['event'])['catch'](_0x31cb3e=>{telegramError(_0x31cb3e);});else tgBot['sendMessage'](settings[_0x4e1678(0x316)],_0x4e1678(0x2fa)+_0xe5a15d+_0x4e1678(0x1d4)+_0x56d183[_0x4e1678(0x242)])[_0x4e1678(0x332)](_0x1e2756=>{telegramError(_0x1e2756);});}}}}async function sendTelegramMsg(_0xad074d,_0x19e4cb=_0x48931d(0x353)){const _0x48cc8f=_0x48931d;return settings[_0x48cc8f(0x279)]&&tgBot&&settings[_0x48cc8f(0x316)]?(await tgBot[_0x48cc8f(0x30a)](settings['telegramChatId'],_0xad074d,{'parse_mode':_0x19e4cb})[_0x48cc8f(0x332)](_0x4466c6=>{telegramError(_0x4466c6);}),!![]):![];}function getDeviceWithIp(_0x880de0){const _0x398890=_0x48931d;return devices[_0x398890(0x323)](_0x54e419=>_0x54e419['ip']===_0x880de0);}function temporaryAccess2FA(_0x3917cf,_0x40d663){const _0x590a4f=_0x48931d;let _0x346bc7=new Date(),_0xcd53db=![];if(lastIpApproval){if(_0x346bc7-lastIpApproval<0x1388)_0xcd53db=!![];}lastIpApproval=new Date();if(_0xcd53db)return;tgBot&&settings[_0x590a4f(0x316)]&&(tgBot[_0x590a4f(0x333)](_0x590a4f(0x2b1)),tgBot[_0x590a4f(0x30a)](settings[_0x590a4f(0x316)],_0x590a4f(0x23d)+normalizeIP(_0x40d663)['show']+_0x590a4f(0x21a),{'parse_mode':_0x590a4f(0x353),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x590a4f(0x1f3)}]]}})[_0x590a4f(0x332)](_0xb11674=>{telegramError(_0xb11674);}),tgBot['on'](_0x590a4f(0x2b1),async _0x1cfbb1=>{const _0x349602=_0x590a4f,_0x46c7a8=_0x1cfbb1[_0x349602(0x1b2)],_0x52d6f2=_0x1cfbb1[_0x349602(0x2c0)];tgBot[_0x349602(0x2ff)](_0x1cfbb1['id'])[_0x349602(0x331)](async()=>{const _0x52130b=_0x349602;devices[_0x3917cf][_0x52130b(0x228)]={'clientip':_0x40d663,'timestamp':new Date()[_0x52130b(0x32f)](),'expiry':_0x46c7a8},_0x46c7a8!=_0x52130b(0x1f3)?(await tgBot[_0x52130b(0x30a)](_0x52d6f2[_0x52130b(0x26e)]['id'],_0x52130b(0x2f2)+_0x46c7a8+_0x52130b(0x364),{'parse_mode':_0x52130b(0x353)})[_0x52130b(0x332)](_0x294edb=>{telegramError(_0x294edb);}),io['to'](_0x3917cf)['emit'](_0x52130b(0x2a6),{'access':{'allow':![],'reason':_0x52130b(0x182),'token':null}})):(await tgBot[_0x52130b(0x30a)](_0x52d6f2[_0x52130b(0x26e)]['id'],_0x52130b(0x334))[_0x52130b(0x332)](_0x43dde2=>{telegramError(_0x43dde2);}),io['to'](_0x3917cf)[_0x52130b(0x354)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x349602(0x333)]('callback_query');}));}function loginAccess2FA(_0x55eb74,_0x5a19b7){const _0x3500a5=_0x48931d;tgBot&&settings[_0x3500a5(0x316)]&&(tgBot['removeListener'](_0x3500a5(0x2b1)),tgBot[_0x3500a5(0x30a)](settings[_0x3500a5(0x316)],_0x3500a5(0x29d)+normalizeIP(_0x5a19b7)[_0x3500a5(0x1c8)]+_0x3500a5(0x21a),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3500a5(0x2c2),'callback_data':loginExpiry},{'text':_0x3500a5(0x1f3),'callback_data':'reject'}]]}})['catch'](_0x465bcc=>{telegramError(_0x465bcc);}),tgBot['on'](_0x3500a5(0x2b1),async _0x1a0486=>{const _0x560a94=_0x3500a5,_0x2f41e2=_0x1a0486[_0x560a94(0x1b2)],_0x59c472=_0x1a0486[_0x560a94(0x2c0)];tgBot['answerCallbackQuery'](_0x1a0486['id'])[_0x560a94(0x331)](async()=>{const _0x54b518=_0x560a94;devices[_0x55eb74][_0x54b518(0x23f)]={'clientip':_0x5a19b7,'timestamp':new Date()[_0x54b518(0x32f)](),'expiry':_0x2f41e2},_0x2f41e2!=_0x54b518(0x1f3)?(await tgBot['sendMessage'](_0x59c472[_0x54b518(0x26e)]['id'],_0x54b518(0x1f9),{'parse_mode':'HTML'})[_0x54b518(0x332)](_0x34d12e=>{telegramError(_0x34d12e);}),io['to'](_0x55eb74)[_0x54b518(0x354)](_0x54b518(0x2a6),{'access':{'allow':![],'reason':_0x54b518(0x182),'token':null}})):(await tgBot[_0x54b518(0x30a)](_0x59c472['chat']['id'],'Login\x20rejected')[_0x54b518(0x332)](_0x2d2930=>{telegramError(_0x2d2930);}),io['to'](_0x55eb74)[_0x54b518(0x354)](_0x54b518(0x2a6),{'access':{'allow':![],'reason':_0x54b518(0x196),'token':null}}));}),tgBot[_0x560a94(0x333)](_0x560a94(0x2b1));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x53218b=_0x48931d;return dbConfig[_0x53218b(0x35e)]('bots')['sortBy'](_0x53218b(0x1c1))[_0x53218b(0x1a7)]({'status':'enabled'})[_0x53218b(0x272)]()||[];}function getDisabledBots(){const _0x51bdfc=_0x48931d;return dbConfig[_0x51bdfc(0x35e)]('bots')['sortBy'](_0x51bdfc(0x1c1))[_0x51bdfc(0x1a7)]({'status':_0x51bdfc(0x20f)})['value']()||[];}function getBotAttributes(_0x5ebf4d){const _0x54ed60=_0x48931d;let _0x13cc1b={};const _0x1de752=configpath+_0x54ed60(0x2e8)+_0x5ebf4d+_0x54ed60(0x2aa),_0x3533d7=fs[_0x54ed60(0x28d)](_0x1de752);if(_0x3533d7){const _0x4865d2=fs['readFileSync'](_0x1de752);try{const _0x5492f7=JSON[_0x54ed60(0x2bf)](_0x4865d2),_0x356b7f=_0x5492f7?_0x5492f7[_0x54ed60(0x2ed)][0x0][_0x54ed60(0x2d5)]:![];_0x13cc1b[_0x54ed60(0x2eb)]=_0x356b7f?_0x54ed60(0x19c):_0x54ed60(0x2dc),_0x13cc1b[_0x54ed60(0x1bc)]=_0x5492f7?_0x5492f7[_0x54ed60(0x2ed)][0x0]['botname']:'Bot\x20'+_0x5ebf4d;}catch(_0x39dc00){_0x13cc1b[_0x54ed60(0x2eb)]=_0x54ed60(0x2dc),_0x13cc1b[_0x54ed60(0x1bc)]=_0x54ed60(0x2fa)+_0x5ebf4d;}}else _0x13cc1b[_0x54ed60(0x2eb)]=_0x54ed60(0x2dc),_0x13cc1b['botname']=_0x54ed60(0x2fa)+_0x5ebf4d;return _0x13cc1b;}function getBotsWithMode(){const _0x4ee486=_0x48931d,_0x1f97e1=dbConfig[_0x4ee486(0x35e)]('bots')['sortBy'](_0x4ee486(0x1c1))[_0x4ee486(0x272)]()||[];return _0x1f97e1[_0x4ee486(0x274)](_0x4c07c4=>{const _0x3dd3a4=_0x4ee486;let _0x92ac=getBotAttributes(_0x4c07c4[_0x3dd3a4(0x1c1)]);_0x4c07c4[_0x3dd3a4(0x2eb)]=_0x92ac['mode'];}),_0x1f97e1;}function getBotExchanges(){const _0x3153ff=_0x48931d;let _0x5c91a6=[];const _0x44cb26=dbConfig[_0x3153ff(0x35e)](_0x3153ff(0x1de))['sortBy'](_0x3153ff(0x1c1))[_0x3153ff(0x272)]()||[];_0x44cb26[_0x3153ff(0x274)](_0x45b0d5=>{const _0xe97229=_0x3153ff;if(_0x45b0d5[_0xe97229(0x2a6)]==_0xe97229(0x230)){const _0xcd32ca=configpath+'bot-'+_0x45b0d5[_0xe97229(0x1c1)]+_0xe97229(0x2aa),_0x3ce797=fs[_0xe97229(0x28d)](_0xcd32ca);let _0x4428d9;if(_0x3ce797){const _0x903af9=fs['readFileSync'](_0xcd32ca);try{const _0x17c472=JSON[_0xe97229(0x2bf)](_0x903af9);_0x4428d9=_0x17c472?_0x17c472['bot'][0x0]['exchange']:null;}catch(_0x7d283b){}}if(_0x4428d9)_0x5c91a6[_0xe97229(0x2c6)](_0x4428d9);}});const _0x36cda8=[...new Set(_0x5c91a6)][_0x3153ff(0x305)]();return _0x36cda8;}async function initUser(){const _0x2bff4d=_0x48931d;if(!settings[_0x2bff4d(0x202)]){const _0x23613f=uuidRandom();mixpanel['alias'](_0x23613f),updateSetting(_0x2bff4d(0x202),_0x23613f);}}async function initSecure(){const _0x35ac86=_0x48931d;let _0x514c88=getSecure();if(!_0x514c88[_0x35ac86(0x1a6)](_0x35ac86(0x243))){let _0x2f1f72=await generateKeys();_0x514c88[_0x35ac86(0x1ab)]=_0x2f1f72[_0x35ac86(0x1ab)],_0x514c88[_0x35ac86(0x232)]=_0x2f1f72['privateKey'],_0x514c88['secret']=crypto[_0x35ac86(0x296)](0x20)[_0x35ac86(0x347)](_0x35ac86(0x362));;storeSecure(_0x514c88);}}function getSettings(){const _0x3d4376=_0x48931d;return dbSettings[_0x3d4376(0x35e)]('settings')['value']()||{};}function getSecure(){const _0xba4cad=_0x48931d;return dbSecure[_0xba4cad(0x35e)](_0xba4cad(0x26d))[_0xba4cad(0x272)]()||{};}function getBlacklist(){const _0x2c0e6f=_0x48931d;return dbSecure['get'](_0x2c0e6f(0x26c))['value']()||[];}function broadcastToBots(_0x4d1754,_0x280aac){const _0x53dda6=_0x48931d;config[_0x53dda6(0x274)](_0x6b69e5=>{const _0xc06542=_0x53dda6;if(_0x6b69e5[_0xc06542(0x2a6)]==_0xc06542(0x230)&&_0x6b69e5[_0xc06542(0x1ac)]==_0xc06542(0x304)||_0x6b69e5[_0xc06542(0x2a6)]=='new'&&_0x6b69e5[_0xc06542(0x1ac)]==_0xc06542(0x304)){if(pid[_0x6b69e5['botID']])pid[_0x6b69e5[_0xc06542(0x1c1)]]['send']({[_0x4d1754]:_0x280aac});}});}function storeSettings(_0x147eda,_0x21d498=![]){const _0x50c1d8=_0x48931d;_0x147eda={...settings,..._0x147eda};if(_0x21d498&&_0x147eda['bbPassword']!=_0x50c1d8(0x2d6)&&_0x147eda[_0x50c1d8(0x1a8)]!=_0x50c1d8(0x216)&&_0x147eda['bbPassword']!=''){const _0x356c76=crypt['decrypt'](secure['privateKey'],_0x147eda[_0x50c1d8(0x1a8)])[_0x50c1d8(0x2c0)][_0x50c1d8(0x1c7)]('@')[0x0],_0x40e6d5=bcrypt[_0x50c1d8(0x231)](_0x356c76,saltRounds);_0x147eda={..._0x147eda,'bbPassword':_0x40e6d5};}if(_0x21d498&&_0x147eda[_0x50c1d8(0x29f)]!='************'&&_0x147eda[_0x50c1d8(0x29f)]!='***'&&_0x147eda[_0x50c1d8(0x29f)]!=''){const _0x464a4c=crypt[_0x50c1d8(0x34c)](secure[_0x50c1d8(0x232)],_0x147eda[_0x50c1d8(0x29f)])[_0x50c1d8(0x2c0)][_0x50c1d8(0x1c7)]('@')[0x0];_0x147eda={..._0x147eda,'telegramToken':_0x464a4c};}const _0x54a336=_0x147eda['telegramToken']!=_0x50c1d8(0x2d6)&&_0x147eda[_0x50c1d8(0x29f)]!=settings[_0x50c1d8(0x29f)]||_0x147eda['telegramUsername']!=settings[_0x50c1d8(0x293)],_0x151e22=_0x147eda[_0x50c1d8(0x29f)]==''||_0x147eda[_0x50c1d8(0x293)]=='';if(_0x54a336)_0x147eda[_0x50c1d8(0x1f4)]=_0x50c1d8(0x363);for(const [_0x2b7cf0,_0x560ff8]of Object['entries'](_0x147eda)){if(_0x2b7cf0==_0x50c1d8(0x29f)&&_0x560ff8==_0x50c1d8(0x2d6)){_0x147eda['telegramToken']=settings['telegramToken'];continue;};if(_0x2b7cf0==_0x50c1d8(0x1a8)&&_0x560ff8==_0x50c1d8(0x2d6)){_0x147eda[_0x50c1d8(0x1a8)]=settings[_0x50c1d8(0x1a8)];continue;};dbSettings[_0x50c1d8(0x226)]('settings.'+_0x2b7cf0,_0x560ff8)['write']();}settings=_0x147eda,io['to'](_0x50c1d8(0x1d1))[_0x50c1d8(0x354)](_0x50c1d8(0x269),cleanSettings()),broadcastToBots('timeshift',settings[_0x50c1d8(0x1cb)]),broadcastToBots(_0x50c1d8(0x313),settings[_0x50c1d8(0x313)]);if(_0x54a336&&!_0x151e22)initTelegram();if(_0x54a336&&_0x151e22)disableTelegram();getAllClients()['forEach'](_0x374560=>{const _0x37b672=_0x50c1d8;getSocket(_0x374560['id'])[_0x37b672(0x354)](_0x37b672(0x2a6),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x17b3b8,_0xad67a1){const _0x1235a1=_0x48931d;dbSettings[_0x1235a1(0x226)](_0x1235a1(0x21e)+_0x17b3b8,_0xad67a1)[_0x1235a1(0x17e)](),settings=getSettings(),io['to'](_0x1235a1(0x1d1))[_0x1235a1(0x354)](_0x1235a1(0x269),cleanSettings());}function storeSecure(_0xd54d7){const _0x889147=_0x48931d;dbSecure[_0x889147(0x35e)]('secure')[_0x889147(0x2c6)](_0xd54d7)[_0x889147(0x17e)](),secure=_0xd54d7;}function addBlacklist(_0x172c36){const _0x1041f3=_0x48931d;cleanBlacklist();let _0x543e1e;devices[_0x172c36][_0x1041f3(0x228)]?_0x543e1e=Math[_0x1041f3(0x201)](devices[_0x172c36][_0x1041f3(0x228)][_0x1041f3(0x325)],loginExpiry):_0x543e1e=loginExpiry,dbSecure[_0x1041f3(0x35e)](_0x1041f3(0x26c))[_0x1041f3(0x2c6)]({'expiry':new Date()[_0x1041f3(0x32f)]()+_0x543e1e*0x3c*0x3e8,'token':devices[_0x172c36][_0x1041f3(0x2be)][_0x1041f3(0x1b0)]})[_0x1041f3(0x17e)](),blacklist=dbSecure['get']('blacklist')[_0x1041f3(0x272)]();}function cleanBlacklist(){const _0x51340e=_0x48931d;let _0xd69fa4=dbSecure[_0x51340e(0x35e)](_0x51340e(0x26c))[_0x51340e(0x31f)]()[_0x51340e(0x272)](),_0x3a249c=new Date()[_0x51340e(0x32f)]();_0xd69fa4[_0x51340e(0x274)](_0x1cd3dd=>{const _0x123107=_0x51340e;_0x1cd3dd['expiry']<_0x3a249c&&dbSecure[_0x123107(0x35e)](_0x123107(0x26c))[_0x123107(0x310)]({'expiry':_0x1cd3dd[_0x123107(0x325)]})[_0x123107(0x17e)]();});}function initStates(){const _0x197490=_0x48931d;let _0x24157a=getConfiguration();_0x24157a[_0x197490(0x274)](_0x3abd4c=>{const _0x5d45b2=_0x197490;_0x3abd4c[_0x5d45b2(0x1ac)]=_0x5d45b2(0x26f);}),storeConfiguration(_0x24157a);}function onKeys(){const _0x3b13d4=new RSA();return new Promise(_0x54c248=>{const _0x196c38=_0x3694;_0x3b13d4[_0x196c38(0x2e9)]()['then'](_0x55aeee=>{_0x54c248(_0x55aeee);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x8cef61=_0x48931d;let _0x20a19d=getSettings(),_0x2d6e18=![];!_0x20a19d[_0x8cef61(0x1a6)](_0x8cef61(0x239))&&(_0x20a19d[_0x8cef61(0x239)]=0x0,_0x2d6e18=!![]);!_0x20a19d[_0x8cef61(0x1a6)](_0x8cef61(0x2b0))&&(_0x20a19d[_0x8cef61(0x2b0)]=0x0,_0x2d6e18=!![]);!_0x20a19d[_0x8cef61(0x1a6)](_0x8cef61(0x28a))&&(_0x20a19d[_0x8cef61(0x28a)]=_0x8cef61(0x1df),_0x2d6e18=!![]);!_0x20a19d[_0x8cef61(0x1a6)](_0x8cef61(0x313))&&(_0x20a19d['onepagemode']=![],_0x2d6e18=!![]);if(_0x2d6e18)storeSettings(_0x20a19d);try{fs[_0x8cef61(0x1b8)](configbackuppath,{'withFileTypes':!![]})[_0x8cef61(0x274)](_0x49f260=>{const _0x4a67ac=_0x8cef61;if(!_0x49f260['isDirectory']()){if(!_0x49f260['name'][_0x4a67ac(0x32b)](_0x4a67ac(0x1d3)))fs[_0x4a67ac(0x303)](configbackuppath+_0x49f260['name']);}else fs[_0x4a67ac(0x220)](configbackuppath+_0x49f260[_0x4a67ac(0x33d)],{'recursive':!![]});});}catch(_0x3af54e){logger[_0x8cef61(0x23e)](_0x8cef61(0x180),_0x3af54e);}}function storeConfiguration(_0x8e99c8){const _0xb19c6e=_0x48931d;dbConfig[_0xb19c6e(0x35e)](_0xb19c6e(0x1de))['remove']()[_0xb19c6e(0x17e)](),_0x8e99c8['forEach'](_0x55a9c3=>{const _0x160fbc=_0xb19c6e;delete _0x55a9c3[_0x160fbc(0x2eb)];}),dbConfig['get'](_0xb19c6e(0x1de))[_0xb19c6e(0x2c6)](..._0x8e99c8)[_0xb19c6e(0x17e)](),config=_0x8e99c8;}function resetPassword(){const _0x46c021=_0x48931d;tgBot&&settings[_0x46c021(0x316)]&&(tgBot[_0x46c021(0x333)](_0x46c021(0x2b1)),tgBot[_0x46c021(0x30a)](settings[_0x46c021(0x316)],_0x46c021(0x341),{'parse_mode':_0x46c021(0x353),'reply_markup':{'inline_keyboard':[[{'text':_0x46c021(0x2ca),'callback_data':_0x46c021(0x2ca)},{'text':'no','callback_data':'no'}]]}})[_0x46c021(0x332)](_0x35d961=>{telegramError(_0x35d961);}),tgBot['on'](_0x46c021(0x2b1),async _0x5c8d2b=>{const _0x16732b=_0x46c021,_0x30f6f9=_0x5c8d2b[_0x16732b(0x1b2)],_0x478b15=_0x5c8d2b[_0x16732b(0x2c0)];tgBot[_0x16732b(0x2ff)](_0x5c8d2b['id'])[_0x16732b(0x331)](async()=>{const _0x19837e=_0x16732b;if(_0x30f6f9!='no'){const _0x161b17=0xf,_0x3bc762=_0x19837e(0x306),_0x3e91ce=Array[_0x19837e(0x1ad)](crypto['randomFillSync'](new Uint32Array(_0x161b17)))[_0x19837e(0x193)](_0x5aa68e=>_0x3bc762[_0x5aa68e%_0x3bc762['length']])[_0x19837e(0x1fa)](''),_0x54e89c=bcrypt['hashSync'](_0x3e91ce,saltRounds);storeSettings({'bbPassword':_0x54e89c}),await tgBot[_0x19837e(0x30a)](_0x478b15['chat']['id'],_0x19837e(0x192)+_0x3e91ce,{'parse_mode':_0x19837e(0x353)})[_0x19837e(0x332)](_0x3227a3=>{telegramError(_0x3227a3);});}else await tgBot[_0x19837e(0x30a)](_0x478b15[_0x19837e(0x26e)]['id'],_0x19837e(0x322))[_0x19837e(0x332)](_0x2c8c6f=>{telegramError(_0x2c8c6f);});}),tgBot['removeListener'](_0x16732b(0x2b1));}));}async function confirmRestore(_0x3c00ea,_0x13f8e8){const _0x41cd2e=_0x48931d;io['to'](_0x41cd2e(0x1d1))[_0x41cd2e(0x354)](_0x41cd2e(0x1d9),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x41cd2e(0x2e7)),tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),await tgBot[_0x41cd2e(0x30a)](settings[_0x41cd2e(0x316)],_0x41cd2e(0x20c),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x41cd2e(0x2ca),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x41cd2e(0x332)](_0x37810a=>{telegramError(_0x37810a);}),tgBot['on'](_0x41cd2e(0x2b1),async _0xb97a41=>{const _0x5707b4=_0x41cd2e,_0x1590cf=_0xb97a41[_0x5707b4(0x1b2)],_0x3eab7b=_0xb97a41[_0x5707b4(0x2c0)];tgBot['answerCallbackQuery'](_0xb97a41['id'])[_0x5707b4(0x331)](async()=>{const _0x28865c=_0x5707b4;_0x1590cf==_0x28865c(0x2ca)?(await tgBot[_0x28865c(0x30a)](_0x3eab7b[_0x28865c(0x26e)]['id'],_0x28865c(0x2fb),{'parse_mode':_0x28865c(0x353)})[_0x28865c(0x332)](_0x1a90e9=>{telegramError(_0x1a90e9);}),unzipFile(_0x3c00ea,_0x13f8e8)):(logger['debug'](_0x28865c(0x206)),await tgBot[_0x28865c(0x30a)](_0x3eab7b['chat']['id'],_0x28865c(0x206))[_0x28865c(0x332)](_0x52c04d=>{telegramError(_0x52c04d);}));}),tgBot['removeListener'](_0x5707b4(0x2b1));}));}function getServerTime(){const _0x598ee8=_0x48931d,_0x4cb87b=new Date();return _0x4cb87b[_0x598ee8(0x33c)]()+'/'+(_0x4cb87b[_0x598ee8(0x1ef)]()+0x1)['toString']()[_0x598ee8(0x358)](0x2,'0')+'/'+_0x4cb87b[_0x598ee8(0x238)]()[_0x598ee8(0x347)]()[_0x598ee8(0x358)](0x2,'0')+'\x20'+_0x4cb87b[_0x598ee8(0x31d)]()['toString']()[_0x598ee8(0x358)](0x2,'0')+':'+_0x4cb87b[_0x598ee8(0x314)]()[_0x598ee8(0x347)]()[_0x598ee8(0x358)](0x2,'0')+':'+_0x4cb87b[_0x598ee8(0x35b)]()['toString']()[_0x598ee8(0x358)](0x2,'0');}function getTimeStamp(){const _0x2d8c1a=_0x48931d,_0x25b32b=shiftedTime();return _0x25b32b[_0x2d8c1a(0x33c)]()+'/'+(_0x25b32b[_0x2d8c1a(0x1ef)]()+0x1)[_0x2d8c1a(0x347)]()[_0x2d8c1a(0x358)](0x2,'0')+'/'+_0x25b32b[_0x2d8c1a(0x238)]()[_0x2d8c1a(0x347)]()['padStart'](0x2,'0')+'\x20'+_0x25b32b[_0x2d8c1a(0x31d)]()[_0x2d8c1a(0x347)]()[_0x2d8c1a(0x358)](0x2,'0')+':'+_0x25b32b[_0x2d8c1a(0x314)]()[_0x2d8c1a(0x347)]()[_0x2d8c1a(0x358)](0x2,'0')+':'+_0x25b32b[_0x2d8c1a(0x35b)]()['toString']()[_0x2d8c1a(0x358)](0x2,'0');}function getCleanTimeStamp(){const _0x2bb22f=_0x48931d,_0x45d0e5=shiftedTime();return _0x45d0e5['getFullYear']()+(_0x45d0e5[_0x2bb22f(0x1ef)]()+0x1)[_0x2bb22f(0x347)]()[_0x2bb22f(0x358)](0x2,'0')+_0x45d0e5[_0x2bb22f(0x238)]()[_0x2bb22f(0x347)]()[_0x2bb22f(0x358)](0x2,'0')+'-'+_0x45d0e5[_0x2bb22f(0x31d)]()[_0x2bb22f(0x347)]()[_0x2bb22f(0x358)](0x2,'0')+_0x45d0e5[_0x2bb22f(0x314)]()[_0x2bb22f(0x347)]()['padStart'](0x2,'0')+_0x45d0e5['getSeconds']()[_0x2bb22f(0x347)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x32d251=_0x48931d,_0x29bf4a=new Date();let _0x404669=_0x29bf4a;if(settings['timeshift']&&settings[_0x32d251(0x1cb)]!==0x0)_0x404669=fns[_0x32d251(0x29e)](_0x29bf4a,{'hours':settings[_0x32d251(0x1cb)]});return _0x404669;}function startScheduler(){const _0x197598=_0x48931d,_0x209654=new Date()[_0x197598(0x27a)](),_0x17d0f8=shiftedTime()[_0x197598(0x31d)]();_0x17d0f8==0x4&&backupConfigFiles();_0x17d0f8==0x0&&rotateLogFiles();_0x209654%0x6==0x0&&triggerAnalytics();_0x209654%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x5d88ec){const _0x5e9a6c=_0x48931d;logger[_0x5e9a6c(0x23e)]('Restore\x20backup\x20file\x20'+_0x5d88ec);const _0x3a9a8b=getBotsWithMode();_0x3a9a8b['length']>0x0?confirmRestore(configbackuppath,_0x5d88ec):unzipFile(configbackuppath,_0x5d88ec);}async function getBackupFiles(_0x49aace=null){const _0x4a38bf=_0x48931d;let _0x1d02a5=[],_0x30a029=fs[_0x4a38bf(0x1b8)](configbackuppath,{'withFileTypes':!![]});_0x30a029[_0x4a38bf(0x305)]((_0x561c1c,_0x1bb9cf)=>_0x561c1c[_0x4a38bf(0x33d)]<_0x1bb9cf[_0x4a38bf(0x33d)]?0x1:_0x1bb9cf[_0x4a38bf(0x33d)]<_0x561c1c['name']?-0x1:0x0),_0x30a029[_0x4a38bf(0x274)](_0x52e329=>{const _0x5ce492=_0x4a38bf;if(!_0x52e329['isDirectory']()&&_0x52e329[_0x5ce492(0x33d)][_0x5ce492(0x32b)](_0x5ce492(0x1d3))&&_0x52e329['name'][_0x5ce492(0x211)](_0x5ce492(0x24c))){const _0x377f66=formatDate(fs['statSync'](configbackuppath+_0x52e329[_0x5ce492(0x33d)])[_0x5ce492(0x1e3)]);_0x1d02a5['push']({'name':_0x52e329['name'],'mtime':_0x377f66});}});if(_0x49aace)io['to'](_0x49aace)[_0x4a38bf(0x354)](_0x4a38bf(0x19e),_0x1d02a5);else return _0x1d02a5;}async function backupConfigFiles(){const _0x477488=_0x48931d;await zipFiles(_0x477488(0x294));const _0x87c1b4=getCleanTimeStamp();fs[_0x477488(0x335)](zippath+_0x477488(0x21f),configbackuppath+(_0x477488(0x1d3)+_0x87c1b4+_0x477488(0x24c)));let _0xe5d6bb=fs[_0x477488(0x1b8)](configbackuppath,{'withFileTypes':!![]});_0xe5d6bb[_0x477488(0x305)]((_0x1ae54c,_0x4e62d0)=>_0x1ae54c[_0x477488(0x33d)]<_0x4e62d0['name']?0x1:_0x4e62d0[_0x477488(0x33d)]<_0x1ae54c['name']?-0x1:0x0),_0xe5d6bb[_0x477488(0x1ff)]>maxBackups&&fs[_0x477488(0x303)](configbackuppath+_0xe5d6bb[_0xe5d6bb[_0x477488(0x1ff)]-0x1][_0x477488(0x33d)]);}function rotateLogFiles(){const _0x19056a=_0x48931d,_0x5a2e20=fs[_0x19056a(0x233)](logspath+_0x19056a(0x1ec)),_0xc67953=_0x5a2e20[_0x19056a(0x245)]/0x400;if(_0xc67953>0x64){let _0x46ec98=fs[_0x19056a(0x1b8)](logspath,{'withFileTypes':!![]});_0x46ec98[_0x19056a(0x305)]((_0x4c9c6e,_0x288307)=>_0x4c9c6e[_0x19056a(0x33d)]<_0x288307[_0x19056a(0x33d)]?0x1:_0x288307[_0x19056a(0x33d)]<_0x4c9c6e['name']?-0x1:0x0),_0x46ec98['forEach'](_0xbf2b9b=>{const _0x5aba42=_0x19056a;if(_0xbf2b9b[_0x5aba42(0x33d)]=='output-002.log')fs[_0x5aba42(0x335)](logspath+_0xbf2b9b[_0x5aba42(0x33d)],logspath+_0x5aba42(0x2d2));if(_0xbf2b9b[_0x5aba42(0x33d)]==_0x5aba42(0x287))fs[_0x5aba42(0x335)](logspath+_0xbf2b9b[_0x5aba42(0x33d)],logspath+_0x5aba42(0x21d));_0xbf2b9b[_0x5aba42(0x33d)]==_0x5aba42(0x1ec)&&(fs[_0x5aba42(0x335)](logspath+_0xbf2b9b[_0x5aba42(0x33d)],logspath+'output-001.log'),fs['writeFileSync'](logspath+_0xbf2b9b['name'],''));});}}async function zipFiles(_0x31502d){const _0x6de437=_0x48931d;let _0xd80ff;if(_0x31502d==_0x6de437(0x218))_0xd80ff=logspath;if(_0x31502d==_0x6de437(0x2bb))_0xd80ff=configpath;if(_0x31502d==_0x6de437(0x294))_0xd80ff=configpath;let _0xd657fa=fs[_0x6de437(0x1b8)](_0xd80ff,{'withFileTypes':!![]});const _0x4a0a7c=new require(_0x6de437(0x203))();_0xd657fa[_0x6de437(0x274)](_0x3c60b0=>{const _0x4ca900=_0x6de437;if(!_0x3c60b0['isDirectory']()){let _0x4f5fb8=fs[_0x4ca900(0x34a)](_0xd80ff+_0x3c60b0[_0x4ca900(0x33d)]);if(_0x31502d=='backup'){const _0x41bda=/^bot-[0-9]{3}-config.json$/,_0x95f40c=_0x41bda[_0x4ca900(0x2a3)](_0x3c60b0[_0x4ca900(0x33d)]);if(_0x95f40c){const _0x43fe60=JSON['parse'](_0x4f5fb8);if(_0x43fe60['bot'][0x0]){_0x43fe60[_0x4ca900(0x2ed)][0x0][_0x4ca900(0x205)]=_0x4ca900(0x216),_0x43fe60[_0x4ca900(0x2ed)][0x0][_0x4ca900(0x2f7)]=_0x4ca900(0x216);if(_0x43fe60[_0x4ca900(0x2ed)][0x0]['apiPassword'])_0x43fe60['bot'][0x0][_0x4ca900(0x1db)]=_0x4ca900(0x216);}_0x4f5fb8=JSON[_0x4ca900(0x35f)](_0x43fe60,null,0x2);}if(_0x3c60b0['name']==_0x4ca900(0x2f3)){const _0x162aae=JSON[_0x4ca900(0x2bf)](_0x4f5fb8);if(_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x2ba)])_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x2ba)]=![];if(_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x1a8)])_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x1a8)]='***';if(_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x29f)])_0x162aae[_0x4ca900(0x269)]['telegramToken']=_0x4ca900(0x216);if(_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x316)])_0x162aae[_0x4ca900(0x269)][_0x4ca900(0x316)]=null;_0x4f5fb8=JSON[_0x4ca900(0x35f)](_0x162aae,null,0x2);}if(_0x3c60b0[_0x4ca900(0x33d)]!='bb-secure.json')_0x4a0a7c[_0x4ca900(0x1e4)](_0x3c60b0[_0x4ca900(0x33d)],_0x4f5fb8);}else _0x4a0a7c[_0x4ca900(0x1e4)](_0x3c60b0[_0x4ca900(0x33d)],_0x4f5fb8);}});const _0x38d10a=_0x4a0a7c['generate']({'base64':![],'compression':_0x6de437(0x2b9)});fs[_0x6de437(0x18f)](zippath+(_0x31502d+_0x6de437(0x24c)),_0x38d10a,_0x6de437(0x2fd));}async function unzipFile(_0x5eeec5,_0x2ff38b){const _0x30902b=_0x48931d;fs[_0x30902b(0x1b8)](configpath,{'withFileTypes':!![]})[_0x30902b(0x274)](_0x2e3a01=>{const _0x517a7e=_0x30902b;if(!_0x2e3a01[_0x517a7e(0x262)]())fs[_0x517a7e(0x220)](configpath+_0x2e3a01[_0x517a7e(0x33d)]);});const _0x5669f9=fs[_0x30902b(0x34a)](_0x5eeec5+_0x2ff38b,_0x30902b(0x2fd)),_0x1a4321=new require(_0x30902b(0x203))(_0x5669f9,{'base64':![],'checkCRC32':!![]});Object[_0x30902b(0x2ce)](_0x1a4321[_0x30902b(0x2a8)])[_0x30902b(0x274)](_0x201506=>{const _0x28f5d9=_0x30902b,_0x1ad0fc=_0x1a4321[_0x28f5d9(0x2a8)][_0x201506];fs[_0x28f5d9(0x18f)](configpath+_0x1ad0fc[_0x28f5d9(0x33d)],_0x1ad0fc[_0x28f5d9(0x352)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x30902b(0x274)](_0x4279b7=>{const _0x380e9e=_0x30902b;if(!_0x4279b7['isDirectory']())fs[_0x380e9e(0x220)](temppath+_0x4279b7[_0x380e9e(0x33d)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x30902b(0x1c2)]({'restore':!![]},_0x2b8ea0=>{});}async function getPublicIp(){const _0x43cc2e=_0x48931d;try{const _0x3806f1=await axios[_0x43cc2e(0x35e)]('https://api.ipify.org?format=json');publicip=_0x3806f1[_0x43cc2e(0x1b2)]['ip'];}catch(_0x125e06){}}async function triggerAnalytics(){const _0x18bb6e=_0x48931d;if(!publicip)await getPublicIp();const _0xb28d9e=getBotsWithMode();let _0x285939=0x0;_0xb28d9e['forEach'](_0x2f65d4=>{const _0x43900d=_0x3694;if(_0x2f65d4[_0x43900d(0x2a6)]==='enabled')_0x285939++;});const _0x1b50bf=getBotExchanges();mixpanel['track']('Server',{'distinct_id':settings[_0x18bb6e(0x202)],'ip':publicip,'version':serverversion,'numbots':_0xb28d9e[_0x18bb6e(0x1ff)],'numbotsenabled':_0x285939,'exchanges':_0x1b50bf,'environment':environment});}async function getMessages(){const _0x15c5d7=_0x48931d,_0x720856=_0x15c5d7(0x2e5),_0x560e33=new GraphQLClient(_0x720856),_0xb04b33={'authorization':_0x15c5d7(0x24a)},_0x11aee4=serverversion[_0x15c5d7(0x1c7)]('.'),_0x37ad72=_0x11aee4[0x0]+'.'+_0x11aee4[0x1],_0x51dd0c=Math[_0x15c5d7(0x2f6)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x3dbb11={'last':parseInt(_0x51dd0c),'bbm':_0x37ad72},_0x40bcc1=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x199e0f;try{_0x199e0f=await _0x560e33[_0x15c5d7(0x241)](_0x40bcc1,_0x3dbb11,_0xb04b33);}catch(_0x37b8d8){}if(_0x199e0f&&_0x199e0f[_0x15c5d7(0x19b)]){let _0x4e8db5=settings[_0x15c5d7(0x239)];newMessages=[];for(const _0x13ee71 of _0x199e0f[_0x15c5d7(0x19b)]){newMessages['push'](_0x13ee71);let _0x31f2ba=![];_0x13ee71[_0x15c5d7(0x221)]&&(updateSetting(_0x15c5d7(0x28a),_0x13ee71[_0x15c5d7(0x221)]),_0x31f2ba=isNewerVersion(serverversion,_0x13ee71[_0x15c5d7(0x221)])||serverversion==_0x13ee71[_0x15c5d7(0x221)]);if(!_0x31f2ba&&_0x13ee71[_0x15c5d7(0x1ce)]>_0x4e8db5){if(_0x13ee71[_0x15c5d7(0x359)]==='any'||serverversion['startsWith'](_0x13ee71[_0x15c5d7(0x359)])){let _0x245214=''+_0x13ee71['title']+'\x0a\x0a'+_0x13ee71[_0x15c5d7(0x2c0)];const _0x109b97=await sendTelegramMsg(toTelegramMarkdown(_0x245214),_0x15c5d7(0x2cf));if(_0x109b97)_0x4e8db5=_0x13ee71[_0x15c5d7(0x1ce)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x4e8db5),emitMessages();}}function emitMessages(){const _0x3b74c5=_0x48931d,_0x586f6a=settings[_0x3b74c5(0x2b0)];let _0x4b6702=[];newMessages['forEach'](_0x5f1900=>{const _0x5222ff=_0x3b74c5;_0x5f1900['number']>_0x586f6a&&_0x4b6702[_0x5222ff(0x2c6)](_0x5f1900);}),_0x4b6702[_0x3b74c5(0x1ff)]>0x0&&getAllClients()['forEach'](_0x1a13de=>{const _0x16a6e0=_0x3b74c5;getSocket(_0x1a13de['id'])[_0x16a6e0(0x354)](_0x16a6e0(0x2c0),_0x4b6702);});}function confirmMessage(_0x12b192){updateSetting('lastmsgemitted',Number(_0x12b192));}function isNewerVersion(_0x169c40,_0x329bd4){const _0x46a313=_0x48931d,_0x286fc7=_0x329bd4['split']('.'),_0x4fbda4=_0x169c40['split']('.');for(var _0x68ae82=0x0;_0x68ae82<_0x4fbda4[_0x46a313(0x1ff)];_0x68ae82++){const _0x455cec=~~_0x4fbda4[_0x68ae82],_0x17f95a=~~_0x286fc7[_0x68ae82];if(_0x455cec>_0x17f95a)return!![];if(_0x455cec<_0x17f95a)return![];}return![];}function toTelegramMarkdown(_0x2d66d9){const _0x293c20=_0x48931d,_0x3edf7e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x57c492=/\*{2}(.+?)\*{2}/gim;return _0x2d66d9=_0x2d66d9[_0x293c20(0x28c)](_0x3edf7e,_0x293c20(0x324))[_0x293c20(0x28c)](_0x57c492,_0x293c20(0x1da)),_0x2d66d9;}async function validateConfigFile(){const _0x3887ff=_0x48931d,_0x529675=dbConfig['get'](_0x3887ff(0x1de))[_0x3887ff(0x265)](_0x3887ff(0x1c1))['value']()||[];if(_0x529675[_0x3887ff(0x1ff)]==0x0){let _0x1733fc=0x0,_0x57a2ff=[];const _0x5c0088=/^bot-([0-9]{3})-config.json$/,_0xcc2821=fs[_0x3887ff(0x1b8)](configpath);_0xcc2821['forEach'](_0x2d8269=>{const _0x58291b=_0x3887ff,_0x2cd6d3=_0x5c0088[_0x58291b(0x292)](_0x2d8269);if(_0x2cd6d3){const _0xda74b5=_0x2cd6d3[0x1];let _0x5264ff=getBotAttributes(_0xda74b5);_0x57a2ff[_0x58291b(0x2c6)]({'botID':_0xda74b5,'botname':_0x5264ff['botname'],'status':'disabled','live':_0x58291b(0x26f)}),_0x1733fc++;}}),_0x1733fc!=0x0&&(dbConfig[_0x3887ff(0x35e)]('bots')[_0x3887ff(0x280)](_0x57a2ff)[_0x3887ff(0x17e)](),config=_0x57a2ff,restoredConfigFile=_0x1733fc);}}async function restoreConfigNotify(_0x43b8be){const _0x38ade6=_0x48931d;let _0xec181e;if(restoredConfigFile==0x1)_0xec181e=_0x38ade6(0x319);else _0xec181e=_0x38ade6(0x21b);if(_0x43b8be)io['to'](_0x38ade6(0x1d1))['emit']('notification',_0xec181e);else{logger[_0x38ade6(0x18b)](_0x38ade6(0x277)),logger[_0x38ade6(0x18b)](_0xec181e),logger[_0x38ade6(0x18b)](_0x38ade6(0x277)),logger[_0x38ade6(0x18b)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x38ade6(0x1f4)]!=_0x38ade6(0x229))tgBot[_0x38ade6(0x30a)](settings[_0x38ade6(0x316)],_0x38ade6(0x27b)+_0xec181e)[_0x38ade6(0x332)](_0x1545cb=>{telegramError(_0x1545cb);});}}function validateCredentials(_0x44df5f,_0x35e7ef){const _0x502923=_0x48931d;if(_0x44df5f[_0x502923(0x2c8)]==settings[_0x502923(0x2cc)]&&bcrypt['compareSync'](_0x44df5f['password'],settings[_0x502923(0x1a8)])){if(settings[_0x502923(0x2b8)])return{'allow':![],'reason':_0x502923(0x250),'token':null};else{const _0xc8c337=generateLoginToken(_0x35e7ef);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xc8c337};}}else return{'allow':![],'reason':_0x502923(0x1c0),'token':null};}function refreshToken(_0x4d201f){const _0x4876c4=_0x48931d,_0x2fd733=generateLoginToken(_0x4d201f);return{'allow':!![],'reason':_0x4876c4(0x1bf),'token':_0x2fd733};}function validateAccess(_0x49dda2,_0x26c9ac,_0x2f97f0){const _0x4b9155=_0x48931d,_0x582107=_0x2f97f0?_0x2f97f0:devices[_0x26c9ac]['ip'];let _0x3aa714;const _0x4bdc21=_0x4433b5=>{const _0x41aa36=_0x3694;if(settings[_0x41aa36(0x2ba)]){if(settings[_0x41aa36(0x2b8)]){if(telegram2FaApproved(_0x26c9ac)){const _0x1c5ef4=generateLoginToken(_0x26c9ac);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x1c5ef4};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3aa714=validToken(_0x4433b5,_0x26c9ac),_0x3aa714[_0x41aa36(0x1a6)](_0x41aa36(0x2e7))?{'allow':!![],'reason':_0x41aa36(0x2db),'token':_0x4433b5}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x41aa36(0x1f5),'token':null};};if(settings[_0x4b9155(0x2e3)]){let _0x1a5b20=[...settings['whitelist'],_0x4b9155(0x237),_0x4b9155(0x181),_0x4b9155(0x33b)];if(_0x1a5b20['includes'](_0x582107))return _0x4bdc21(_0x49dda2);else{_0x3aa714=validToken(_0x49dda2,_0x26c9ac);if(_0x3aa714[_0x4b9155(0x1a6)](_0x4b9155(0x2e7)))return _0x4bdc21(_0x49dda2);else{if(telegramIpApproved(_0x26c9ac)){const _0x1e0482=generateToken(_0x26c9ac);return _0x3aa714=_0x4bdc21(_0x49dda2),_0x3aa714[_0x4b9155(0x257)]?{'allow':!![],'reason':_0x4b9155(0x2ad),'token':_0x1e0482}:_0x3aa714;}else return settings[_0x4b9155(0x1c9)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x4b9155(0x302),'token':null};}}}else return _0x4bdc21(_0x49dda2);}function timelyDecrypt(_0x1d1461,_0x38a5fd=!![]){const _0x4073bf=_0x48931d;if(_0x1d1461)try{const _0x47391d=crypt['decrypt'](secure[_0x4073bf(0x232)],_0x1d1461)[_0x4073bf(0x2c0)],_0x572b03=_0x47391d['split']('@')[0x0],_0x1bc4a2=_0x47391d['split']('@')[0x1],_0x41a348=new Date()['getTime']();if(_0x38a5fd){if(_0x41a348-_0x1bc4a2<maxSecretAge*0x3e8)return _0x572b03;else return![];}else return _0x572b03;}catch(_0x4520ce){return![];}else return![];}const validToken=(_0x145828,_0x2aa0b0)=>{const _0x2b68f0=_0x48931d,_0x4b5ba6=devices[_0x2aa0b0]['ip'];if(!_0x145828)return{'error':_0x2b68f0(0x27f)};for(let _0x43bc5c of blacklist){if(_0x43bc5c[_0x2b68f0(0x1b0)]==_0x145828)return{'error':'Token\x20blacklisted'};}let _0x5bdd1c;try{_0x5bdd1c=jwt[_0x2b68f0(0x22f)](_0x145828,secure['secret']+_0x2aa0b0);}catch{return{'error':_0x2b68f0(0x268)};}if(!_0x5bdd1c['hasOwnProperty'](_0x2b68f0(0x1d0))&&!_0x5bdd1c[_0x2b68f0(0x1a6)](_0x2b68f0(0x2c8))||!_0x5bdd1c['hasOwnProperty'](_0x2b68f0(0x200)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5bdd1c[_0x2b68f0(0x1a6)](_0x2b68f0(0x2c8))&&_0x5bdd1c[_0x2b68f0(0x1a6)]('clientip')){const {clientip:_0x17083f}=_0x5bdd1c;return _0x4b5ba6==_0x17083f?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2b68f0(0x2d4)};}else{if(_0x5bdd1c[_0x2b68f0(0x1a6)]('username')&&_0x5bdd1c[_0x2b68f0(0x1a6)](_0x2b68f0(0x1d0))){const {username:_0x192814,clientip:_0x5dec6c}=_0x5bdd1c;return settings['bbUsername']==_0x192814&&_0x4b5ba6==_0x5dec6c?{'success':_0x2b68f0(0x253)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x4c8d5b=>{const _0x49b517=_0x48931d;if(_0x4c8d5b){const _0x4fde03=devices[_0x4c8d5b]['ip'];return jwt[_0x49b517(0x327)]({'username':settings[_0x49b517(0x2cc)],'clientip':_0x4fde03},secure[_0x49b517(0x243)]+_0x4c8d5b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1a43aa=>{const _0xaed1ea=_0x48931d;if(_0x1a43aa){const _0x4ba281=devices[_0x1a43aa]['ip'];return jwt['sign']({'clientip':_0x4ba281},secure[_0xaed1ea(0x243)]+_0x1a43aa,{'expiresIn':devices[_0x1a43aa][_0xaed1ea(0x228)][_0xaed1ea(0x325)]*0x3c});}else return![];},telegramIpApproved=_0x465ca5=>{const _0x3527fe=_0x48931d;let _0x185828=![];return devices[_0x465ca5][_0x3527fe(0x228)]&&devices[_0x465ca5][_0x3527fe(0x228)]['expiry']!=_0x3527fe(0x1f3)&&(_0x185828=devices[_0x465ca5]['telegramIpApproval']['clientip']==devices[_0x465ca5]['ip']&&new Date()['getTime']()-devices[_0x465ca5][_0x3527fe(0x228)][_0x3527fe(0x357)]<devices[_0x465ca5][_0x3527fe(0x228)]['expiry']*0x3c*0x3e8),_0x185828;},telegram2FaApproved=_0x1cf787=>{const _0x40b672=_0x48931d;let _0x25d9a6=![];return devices[_0x1cf787][_0x40b672(0x23f)]&&devices[_0x1cf787][_0x40b672(0x23f)][_0x40b672(0x325)]!=_0x40b672(0x1f3)&&(_0x25d9a6=devices[_0x1cf787]['telegram2FaApproval']['clientip']==devices[_0x1cf787]['ip']&&new Date()[_0x40b672(0x32f)]()-devices[_0x1cf787][_0x40b672(0x23f)][_0x40b672(0x357)]<devices[_0x1cf787][_0x40b672(0x23f)][_0x40b672(0x325)]*0x3c*0x3e8),_0x25d9a6;},normalizeIP=_0x2e0a77=>{const _0x3c0a1b=_0x48931d;let _0x1c79e8=null,_0x21377b=null;if(ipaddr['isValid'](_0x2e0a77)){const _0x567858=ipaddr[_0x3c0a1b(0x2bf)](_0x2e0a77);_0x567858[_0x3c0a1b(0x29a)]()===_0x3c0a1b(0x213)?(_0x567858[_0x3c0a1b(0x1dd)]()&&(_0x1c79e8=_0x567858[_0x3c0a1b(0x28f)]()['toString']()),_0x21377b=_0x567858[_0x3c0a1b(0x347)]()):(_0x1c79e8=_0x567858['toString'](),_0x21377b=_0x567858[_0x3c0a1b(0x1a1)]()['toString']());}return{'show':_0x1c79e8?_0x1c79e8:_0x21377b,'store':_0x21377b};};function formatDate(_0x48c4c8){const _0x55cdeb=_0x48931d;return _0x48c4c8[_0x55cdeb(0x33c)]()+'/'+(_0x48c4c8['getMonth']()+0x1)[_0x55cdeb(0x347)]()[_0x55cdeb(0x358)](0x2,'0')+'/'+_0x48c4c8[_0x55cdeb(0x238)]()['toString']()[_0x55cdeb(0x358)](0x2,'0')+'\x20'+_0x48c4c8[_0x55cdeb(0x31d)]()[_0x55cdeb(0x347)]()[_0x55cdeb(0x358)](0x2,'0')+':'+_0x48c4c8[_0x55cdeb(0x314)]()[_0x55cdeb(0x347)]()[_0x55cdeb(0x358)](0x2,'0')+':'+_0x48c4c8[_0x55cdeb(0x35b)]()[_0x55cdeb(0x347)]()[_0x55cdeb(0x358)](0x2,'0');}function sleep(_0x3820cb){return new Promise(_0x3efdd2=>setTimeout(_0x3efdd2,_0x3820cb));}