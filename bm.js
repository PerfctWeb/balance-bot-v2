const _0x5e87da=_0x2921;(function(_0x2146d1,_0x1f2b44){const _0x28ec9d=_0x2921,_0x3b968a=_0x2146d1();while(!![]){try{const _0x40a0df=parseInt(_0x28ec9d(0x3b6))/0x1+parseInt(_0x28ec9d(0x36b))/0x2*(-parseInt(_0x28ec9d(0x3a1))/0x3)+parseInt(_0x28ec9d(0x252))/0x4+parseInt(_0x28ec9d(0x355))/0x5*(-parseInt(_0x28ec9d(0x299))/0x6)+-parseInt(_0x28ec9d(0x293))/0x7*(parseInt(_0x28ec9d(0x309))/0x8)+-parseInt(_0x28ec9d(0x21a))/0x9*(-parseInt(_0x28ec9d(0x2a9))/0xa)+parseInt(_0x28ec9d(0x279))/0xb;if(_0x40a0df===_0x1f2b44)break;else _0x3b968a['push'](_0x3b968a['shift']());}catch(_0x3295ea){_0x3b968a['push'](_0x3b968a['shift']());}}}(_0x16b8,0xbba85));const _0x4b83f3=function(){let _0x353cee=!![];return function(_0x5213bc,_0x53f3ef){const _0x1dfc21=_0x353cee?function(){const _0x5a60e2=_0x2921;if(_0x53f3ef){const _0x56aae6=_0x53f3ef[_0x5a60e2(0x30e)](_0x5213bc,arguments);return _0x53f3ef=null,_0x56aae6;}}:function(){};return _0x353cee=![],_0x1dfc21;};}(),_0x3cd2b7=_0x4b83f3(this,function(){const _0x4dc873=_0x2921;return _0x3cd2b7[_0x4dc873(0x36d)]()['search'](_0x4dc873(0x325))[_0x4dc873(0x36d)]()['constructor'](_0x3cd2b7)[_0x4dc873(0x2e9)](_0x4dc873(0x325));});_0x3cd2b7();'use strict';process[_0x5e87da(0x369)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x5e87da(0x370)),fs=require('fs'),fns=require(_0x5e87da(0x2fc)),low=require(_0x5e87da(0x356)),FileSync=require(_0x5e87da(0x2af)),path=require(_0x5e87da(0x396)),crypto=require(_0x5e87da(0x2f0)),Crypt=require(_0x5e87da(0x350))[_0x5e87da(0x320)],RSA=require(_0x5e87da(0x350))[_0x5e87da(0x2ac)],bcrypt=require(_0x5e87da(0x212)),jwt=require(_0x5e87da(0x2aa)),ipaddr=require(_0x5e87da(0x201)),argv=require(_0x5e87da(0x363))(process[_0x5e87da(0x368)]['slice'](0x2))['argv'],uuidRandom=require(_0x5e87da(0x323)),TelegramBot=require(_0x5e87da(0x391)),Mixpanel=require(_0x5e87da(0x1e9)),axios=require('axios'),{GraphQLClient,gql}=require(_0x5e87da(0x33f)),util=require(_0x5e87da(0x25d)),fileUpload=require(_0x5e87da(0x34d)),{networkInterfaces}=require('os'),PORT=argv['port']||_0x5e87da(0x380),pattern=/^[0-9]{2,4}$/;!pattern[_0x5e87da(0x2f3)](PORT)&&(console[_0x5e87da(0x265)](_0x5e87da(0x37e)+PORT+_0x5e87da(0x3b9)),process[_0x5e87da(0x333)](0x1));const HOST=argv[_0x5e87da(0x2ae)]||null,userID=argv[_0x5e87da(0x1eb)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x5e87da(0x2bc)];let bbpath=_0x5e87da(0x3bb),bbpath2='';const botfile=_0x5e87da(0x2f2),configfile=_0x5e87da(0x394),settingsfile=_0x5e87da(0x2e2),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x5e87da(0x300))['environment']||'production',maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x5e87da(0x27f)+userID+'/':bbpath+_0x5e87da(0x27f),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x5e87da(0x3a7)+userID+'/':bbpath+_0x5e87da(0x3a7),zippath=userID?bbpath+_0x5e87da(0x383)+userID+'/':bbpath+_0x5e87da(0x383),loggerfile=fs['createWriteStream'](logspath+_0x5e87da(0x28e),{'flags':'a'}),temppath=userID?bbpath+_0x5e87da(0x216)+userID+'/':bbpath+_0x5e87da(0x216);!fs[_0x5e87da(0x354)](configpath)&&fs[_0x5e87da(0x324)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x5e87da(0x324)](logspath);!fs[_0x5e87da(0x354)](zippath)&&fs[_0x5e87da(0x324)](zippath);!fs[_0x5e87da(0x354)](temppath)&&fs[_0x5e87da(0x324)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5e87da(0x225)]({'bots':[]})[_0x5e87da(0x244)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5e87da(0x225)]({'secure':{},'blacklist':[]})[_0x5e87da(0x244)]();let crypt=new Crypt({'md':_0x5e87da(0x25f),'rsaStandard':_0x5e87da(0x3aa)});const saltRounds=0xa,mixpanel=Mixpanel[_0x5e87da(0x2a8)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x5e87da(0x3ad)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x5e87da(0x26d)]&&settings['telegramToken']!=''&&settings[_0x5e87da(0x33a)]&&settings[_0x5e87da(0x33a)]!='')initTelegram();const parseColor=(_0xf2d593,_0x3c555f)=>{const _0x2c6e23=_0x5e87da,_0x54a9af=/#[A-Z]{3}#/g;if(typeof _0xf2d593==_0x2c6e23(0x1f2)){!_0x3c555f?_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](_0x54a9af,''):(_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](/#BLU#/g,_0x2c6e23(0x377)),_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](/#RED#/g,_0x2c6e23(0x39e)),_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](/#YEL#/g,_0x2c6e23(0x342)),_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](/#MAG#/g,_0x2c6e23(0x32d)),_0xf2d593=_0xf2d593['replace'](/#CYA#/g,_0x2c6e23(0x3a3)),_0xf2d593=_0xf2d593[_0x2c6e23(0x243)](/#RES#/g,_0x2c6e23(0x2c0)));;}return _0xf2d593;},logger={'screen':_0x400761=>{const _0xf481e4=_0x5e87da;console[_0xf481e4(0x265)](parseColor(_0x400761,!![]));},'simple':_0x484160=>{const _0x551ea7=_0x5e87da;console['log'](parseColor(_0x484160,!![])),loggerfile['write'](util[_0x551ea7(0x38f)](parseColor(_0x484160,![]))+'\x0a');},'full':async _0xa81355=>{const _0x5e6c71=_0x5e87da,_0x590da9=getTimeStamp()+_0x5e6c71(0x339)+_0xa81355;console[_0x5e6c71(0x265)](parseColor(_0x590da9,!![])),loggerfile[_0x5e6c71(0x244)](util[_0x5e6c71(0x38f)](parseColor(_0x590da9,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x5e6c71(0x203)]!=_0x5e6c71(0x319))await tgBot[_0x5e6c71(0x2a1)](settings['telegramChatId'],_0x5e6c71(0x2c1)+parseColor(_0xa81355,![]))['catch'](_0x38f47d=>{telegramError(_0x38f47d);});},'debug':async(_0x3a76b2,_0x6b9bc5='')=>{const _0x6a25f6=_0x5e87da,_0x57f71c=getTimeStamp()+_0x6a25f6(0x33d)+_0x3a76b2;if(debugging)console[_0x6a25f6(0x265)](parseColor(_0x57f71c,!![]));loggerfile[_0x6a25f6(0x244)](util[_0x6a25f6(0x38f)](parseColor(_0x57f71c,![]))+'\x0a');if(_0x6b9bc5){if(debugging)console[_0x6a25f6(0x265)](_0x6b9bc5);loggerfile[_0x6a25f6(0x244)](util[_0x6a25f6(0x38f)](_0x6b9bc5)+'\x0a');}}};process['on'](_0x5e87da(0x33e),function(_0xcc702c){logger['simple'](_0xcc702c);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5e87da(0x33b)),app=express(),http=require(_0x5e87da(0x3ab))[_0x5e87da(0x376)](app);app[_0x5e87da(0x3c1)](fileUpload({'useTempFiles':!![]})),app[_0x5e87da(0x329)](_0x5e87da(0x245),async(_0xe533c6,_0x23249e)=>{const _0x511e91=_0x5e87da,_0x12d313=_0xe533c6[_0x511e91(0x35f)][_0x511e91(0x2c7)],_0x5a328e=getClientsWithBotID('botmanager'),_0x338026=_0xe533c6['headers']['uuid'],_0x3aafdf=timelyDecrypt(_0x338026,![]),_0x2f870f=_0x5a328e['find'](_0x2867ac=>_0x2867ac['uuid']==_0x3aafdf);if(_0x2f870f){const _0x8532c=normalizeIP(_0xe533c6[_0x511e91(0x2eb)][_0x511e91(0x38a)])[_0x511e91(0x382)],_0x5dce41=_0xe533c6[_0x511e91(0x362)][_0x511e91(0x3c0)];if(validateAccess(_0x5dce41,_0x3aafdf,_0x8532c)[_0x511e91(0x32f)])_0x12d313==_0x511e91(0x38c)&&await backupConfigFiles(),await zipFiles(_0x12d313),_0x23249e[_0x511e91(0x2c3)](zippath+(_0x12d313+'.zip'),_0x3ce218=>{const _0x2fe405=_0x511e91;_0x3ce218&&(logger[_0x2fe405(0x38d)](_0x2fe405(0x232)+_0x12d313),logger[_0x2fe405(0x1fd)](_0x3ce218));});else logger[_0x511e91(0x38d)](_0x511e91(0x1ef)+_0x12d313+'\x20(1)');}else logger[_0x511e91(0x38d)](_0x511e91(0x1ef)+_0x12d313+'\x20(2)');}),app['post'](_0x5e87da(0x393),async(_0x4d4c8c,_0x526726)=>{const _0x19bb63=_0x5e87da,_0x52bc5c=getClientsWithBotID('botmanager'),_0x245c0e=_0x4d4c8c[_0x19bb63(0x362)]['uuid'],_0x36bbfe=timelyDecrypt(_0x245c0e,![]),_0x451c2e=_0x52bc5c[_0x19bb63(0x2d3)](_0x284bed=>_0x284bed['uuid']==_0x36bbfe);logger[_0x19bb63(0x32c)](_0x19bb63(0x284));if(_0x451c2e){const _0x399d08=normalizeIP(_0x4d4c8c[_0x19bb63(0x2eb)][_0x19bb63(0x38a)])[_0x19bb63(0x382)],_0x2e5133=_0x4d4c8c[_0x19bb63(0x362)]['tkn'];if(validateAccess(_0x2e5133,_0x36bbfe,_0x399d08)[_0x19bb63(0x32f)]){if(_0x4d4c8c[_0x19bb63(0x250)]){const _0x2b1c1b=_0x4d4c8c[_0x19bb63(0x250)][_0x19bb63(0x213)];await _0x2b1c1b['mv'](temppath+_0x2b1c1b[_0x19bb63(0x388)]),_0x526726[_0x19bb63(0x274)]({'status':!![],'message':_0x19bb63(0x29e)});const _0x377f1f=getBotsWithMode();_0x377f1f['length']>0x0?confirmRestore(temppath,_0x2b1c1b[_0x19bb63(0x388)]):unzipFile(temppath,_0x2b1c1b[_0x19bb63(0x388)]);}}else logger[_0x19bb63(0x38d)](_0x19bb63(0x26f));}else logger[_0x19bb63(0x38d)](_0x19bb63(0x310));}),app['use'](express[_0x5e87da(0x2dd)](path[_0x5e87da(0x385)](__dirname,bbpath2,_0x5e87da(0x35c)))),app['use'](express[_0x5e87da(0x2dd)](path[_0x5e87da(0x385)](__dirname,bbpath2,_0x5e87da(0x206)))),app['get']('/',function(_0x54d1d7,_0x5d789c){const _0x1b1702=_0x5e87da;_0x5d789c[_0x1b1702(0x23b)](path[_0x1b1702(0x385)](__dirname,bbpath2,_0x1b1702(0x35c),_0x1b1702(0x207)));}),app[_0x5e87da(0x329)]('/:bot',function(_0x56cabd,_0x2e6ded){const _0x174e83=_0x5e87da;_0x2e6ded['sendFile'](path[_0x174e83(0x385)](__dirname,bbpath2,_0x174e83(0x206),'index.html'));}),app[_0x5e87da(0x329)]('/:bot/portfolio',(_0x567407,_0x2927f4)=>{const _0x4a2d94=_0x5e87da;_0x2927f4['sendFile'](path[_0x4a2d94(0x385)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x5e87da(0x30f),(_0x2b0a51,_0x24b780)=>{const _0x40f1f6=_0x5e87da;_0x24b780[_0x40f1f6(0x23b)](path[_0x40f1f6(0x385)](__dirname,bbpath2,_0x40f1f6(0x206),_0x40f1f6(0x207)));}),app[_0x5e87da(0x329)](_0x5e87da(0x263),(_0x3fb99c,_0x35d0a3)=>{const _0x44a2cb=_0x5e87da;_0x35d0a3['sendFile'](path[_0x44a2cb(0x385)](__dirname,bbpath2,_0x44a2cb(0x206),_0x44a2cb(0x207)));}),app[_0x5e87da(0x329)](_0x5e87da(0x321),(_0x592811,_0xf794df)=>{const _0x24d25a=_0x5e87da;_0xf794df[_0x24d25a(0x23b)](path[_0x24d25a(0x385)](__dirname,bbpath2,_0x24d25a(0x206),_0x24d25a(0x207)));}),app[_0x5e87da(0x329)](_0x5e87da(0x2fa),(_0x55e77a,_0x4eb320)=>{const _0x53c32e=_0x5e87da;_0x4eb320[_0x53c32e(0x23b)](path[_0x53c32e(0x385)](__dirname,bbpath2,_0x53c32e(0x206),'index.html'));}),app['get'](_0x5e87da(0x37b),(_0x12c58c,_0x411918)=>{const _0x3f0b46=_0x5e87da;_0x411918[_0x3f0b46(0x23b)](path['join'](__dirname,bbpath2,_0x3f0b46(0x206),_0x3f0b46(0x207)));});function _0x2921(_0xdcff1,_0x1beadb){const _0x560dfd=_0x16b8();return _0x2921=function(_0x3cd2b7,_0x4b83f3){_0x3cd2b7=_0x3cd2b7-0x1e8;let _0x16b826=_0x560dfd[_0x3cd2b7];return _0x16b826;},_0x2921(_0xdcff1,_0x1beadb);}if(HOST)http['listen'](PORT,HOST);else http[_0x5e87da(0x2ba)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x17a3c6=_0x5e87da;let _0x30c700=_0x17a3c6(0x2b0);const _0x27a38c=networkInterfaces(),_0x463d3d={};for(const _0x4068ee of Object[_0x17a3c6(0x258)](_0x27a38c)){for(const _0x14851a of _0x27a38c[_0x4068ee]){if((_0x14851a[_0x17a3c6(0x21e)]==_0x17a3c6(0x334)||_0x14851a[_0x17a3c6(0x21e)]==0x4)&&!_0x14851a['internal']){const _0x5dda90=ipaddr[_0x17a3c6(0x381)](_0x14851a[_0x17a3c6(0x29d)])['range']();_0x5dda90!=_0x17a3c6(0x2c5)&&(!_0x463d3d[_0x4068ee]&&(_0x463d3d[_0x4068ee]=[]),_0x463d3d[_0x4068ee][_0x17a3c6(0x22b)](_0x14851a[_0x17a3c6(0x29d)]),_0x30c700=_0x14851a[_0x17a3c6(0x29d)]);}}}return{'serverip':_0x30c700,'netinterfaces':_0x463d3d};}async function startServer(){const _0x10aa7c=_0x5e87da,{serverip:_0x3d455c,netinterfaces:_0x1644ae}=getServerIP();logger[_0x10aa7c(0x1fd)](''),logger[_0x10aa7c(0x1fd)](_0x10aa7c(0x351)),await logger[_0x10aa7c(0x38d)](_0x10aa7c(0x31b)+serverversion+'#RES#\x20'+(environment==_0x10aa7c(0x251)?'(staging)':'')+'\x0a'+(_0x10aa7c(0x35b)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x10aa7c(0x248)+_0x3d455c+':'+PORT+_0x10aa7c(0x357))),logger[_0x10aa7c(0x1fd)](_0x10aa7c(0x351));if(config['length']!=0x0)for(const _0x3e6590 of config){if(_0x3e6590[_0x10aa7c(0x25e)]==_0x10aa7c(0x328)||_0x3e6590[_0x10aa7c(0x25e)]=='new')await logger[_0x10aa7c(0x38d)](_0x10aa7c(0x1f8)+_0x3e6590[_0x10aa7c(0x344)]+'\x20|\x20'+_0x3e6590[_0x10aa7c(0x2d9)]),startBot([_0x3e6590['botID'],userID],{'cwd':bbpath},function(_0x2e9ae1){const _0xdcbb59=_0x10aa7c;if(_0x2e9ae1)logger[_0xdcbb59(0x38d)](_0x2e9ae1);});else(_0x3e6590['status']==_0x10aa7c(0x306)||_0x3e6590['status']==_0x10aa7c(0x378))&&await logger[_0x10aa7c(0x38d)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x3e6590['botID']+_0x10aa7c(0x316)+_0x3e6590[_0x10aa7c(0x2d9)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x10aa7c(0x1fd)](''),await logger[_0x10aa7c(0x32c)](_0x10aa7c(0x2e6)+nodeversion),await logger[_0x10aa7c(0x32c)]('Network\x20Interfaces:',_0x1644ae);}function startSocket(){const _0x363a9f=_0x5e87da;io['on'](_0x363a9f(0x2da),_0x27d482=>{const _0x3fce67=_0x363a9f;let _0x7b2da0,_0x7f5ede,_0xbcc378,_0x59ffdc,_0x2fdeb6;const _0x5873be=_0x27d482[_0x3fce67(0x36e)][_0x3fce67(0x362)]['referer'];_0x7f5ede=_0x5873be['match'](/bot[0-9]{3}/);if(_0x7f5ede)_0xbcc378=_0x7f5ede[0x0][_0x3fce67(0x255)](/[0-9]{3}/);if(_0xbcc378)_0x7b2da0=_0xbcc378[0x0];else _0x7b2da0=_0x3fce67(0x282);const _0x1c33d1=_0x27d482[_0x3fce67(0x36e)][_0x3fce67(0x3b2)][_0x3fce67(0x2df)];if(!_0x1c33d1)_0x27d482[_0x3fce67(0x2a7)](_0x3fce67(0x25e),{'publicKey':secure[_0x3fce67(0x2ed)]});else{_0x59ffdc=timelyDecrypt(_0x1c33d1,![]);if(!_0x59ffdc)_0x27d482[_0x3fce67(0x2a7)](_0x3fce67(0x25e),{'publicKey':secure['publicKey']});else{_0x2fdeb6=normalizeIP(_0x27d482[_0x3fce67(0x2f7)][_0x3fce67(0x38a)])[_0x3fce67(0x382)];if(!devices[_0x59ffdc])devices[_0x59ffdc]={'uuid':_0x59ffdc,'access':{'token':null}};devices[_0x59ffdc]['ip']=_0x2fdeb6;const _0x52573a=addClient(_0x27d482['id'],_0x59ffdc,_0x7b2da0);setAccess(_0x52573a),emitMessages(),_0x27d482['on'](_0x3fce67(0x2c9),_0x121b6f=>{const _0x35c8b0=_0x3fce67,_0x36fbd5=timelyDecrypt(_0x121b6f[_0x35c8b0(0x327)]);if(_0x36fbd5){_0x121b6f={'username':_0x121b6f[_0x35c8b0(0x24b)],'password':_0x36fbd5},devices[_0x59ffdc][_0x35c8b0(0x36a)]=validateCredentials(_0x121b6f,_0x59ffdc);if(devices[_0x59ffdc]['access'][_0x35c8b0(0x32f)]==![]&&devices[_0x59ffdc][_0x35c8b0(0x36a)][_0x35c8b0(0x271)]==_0x35c8b0(0x2f4))_0x27d482[_0x35c8b0(0x2a7)](_0x35c8b0(0x25e),{'access':devices[_0x59ffdc][_0x35c8b0(0x36a)]}),loginAccess2FA(_0x59ffdc,_0x2fdeb6);else{if(devices[_0x59ffdc][_0x35c8b0(0x36a)]['allow']==![]&&devices[_0x59ffdc]['access'][_0x35c8b0(0x271)]==_0x35c8b0(0x3c3))_0x27d482[_0x35c8b0(0x2a7)](_0x35c8b0(0x25e),{'access':devices[_0x59ffdc]['access']});else devices[_0x59ffdc][_0x35c8b0(0x36a)][_0x35c8b0(0x32f)]&&devices[_0x59ffdc][_0x35c8b0(0x36a)][_0x35c8b0(0x271)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x59ffdc)[_0x35c8b0(0x227)](_0x5adce9=>{setAccess(_0x5adce9);}),logger[_0x35c8b0(0x32c)](_0x35c8b0(0x2a5)+_0x59ffdc['slice'](-0x8)),setTokenRefresh(_0x59ffdc),setSessionTimeout(_0x35c8b0(0x2c9),_0x59ffdc));}}else logger[_0x35c8b0(0x38d)](_0x35c8b0(0x2c4));}),_0x27d482['on'](_0x3fce67(0x233),()=>{resetPassword();}),_0x27d482['on'](_0x3fce67(0x224),_0x2b7c29=>{removeClient(_0x27d482['id']);}),_0x7b2da0==_0x3fce67(0x282)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5395a5){const _0x4a7d4b=_0x5e87da;if(_0x5395a5!='botmanager'&&config[_0x4a7d4b(0x2e0)]!=''){if(pid[_0x5395a5])pid[_0x5395a5][_0x4a7d4b(0x274)]({'function':_0x4a7d4b(0x266),'args':null});}_0x5395a5!=_0x4a7d4b(0x282)&&broadcastToBots(_0x4a7d4b(0x290),JSON['stringify'](config));}function reloadBotManager(){const _0x341d61=_0x5e87da;getClientsWithBotID(_0x341d61(0x282))[_0x341d61(0x227)](_0x32bafd=>{const _0x51737f=_0x341d61;getSocket(_0x32bafd['id'])[_0x51737f(0x2a7)](_0x51737f(0x25e),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x4541c0){const _0x5c8b2a=_0x5e87da;return io[_0x5c8b2a(0x359)]['sockets'][_0x5c8b2a(0x329)](_0x4541c0);}function setAccess(_0x44f08b){const _0x2ae3c6=_0x5e87da,_0xabb809=getSocket(_0x44f08b['id']),_0x16f045=_0x44f08b[_0x2ae3c6(0x295)],_0x3ce4ff=_0x44f08b['bot'];devices[_0x16f045]['access']=validateAccess(devices[_0x16f045][_0x2ae3c6(0x36a)]['token'],_0x16f045),logger[_0x2ae3c6(0x32c)](_0x2ae3c6(0x365)+devices[_0x16f045][_0x2ae3c6(0x36a)][_0x2ae3c6(0x271)]+'\x20|\x20client:\x20...'+_0x44f08b['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x16f045['slice'](-0x8)),_0xabb809['join'](_0x16f045);if(devices[_0x16f045][_0x2ae3c6(0x36a)][_0x2ae3c6(0x32f)]){_0xabb809['join'](_0x3ce4ff);if(_0x3ce4ff=='botmanager')initializeSocketBotManager(_0xabb809);else initializeSocketBot(_0xabb809);initClient(_0x3ce4ff);}devices[_0x16f045][_0x2ae3c6(0x36a)][_0x2ae3c6(0x387)]&&devices[_0x16f045]['access'][_0x2ae3c6(0x271)]==_0x2ae3c6(0x288)&&setSessionTimeout('2FA',_0x16f045),devices[_0x16f045]['access'][_0x2ae3c6(0x387)]&&devices[_0x16f045][_0x2ae3c6(0x36a)][_0x2ae3c6(0x271)]==_0x2ae3c6(0x262)&&setSessionTimeout(_0x2ae3c6(0x2c9),_0x16f045),_0xabb809[_0x2ae3c6(0x2a7)]('status',{'status':_0x44f08b[_0x2ae3c6(0x2fe)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x16f045][_0x2ae3c6(0x36a)],'externalip':devices[_0x16f045]['ip'],'publicKey':secure[_0x2ae3c6(0x2ed)],'userid':settings[_0x2ae3c6(0x358)],'validInstallation':validInstallation}),devices[_0x16f045][_0x2ae3c6(0x36a)][_0x2ae3c6(0x32f)]==![]&&devices[_0x16f045][_0x2ae3c6(0x36a)]['reason']==_0x2ae3c6(0x1fc)&&temporaryAccess2FA(_0x16f045,devices[_0x16f045]['ip']);}function setSessionTimeout(_0x3fd7e3,_0x4fa3ed){const _0x1bc270=_0x5e87da;let _0x595718;if(_0x3fd7e3==_0x1bc270(0x2c9))_0x595718=loginExpiry*0x3c*0x3e8;else _0x595718=devices[_0x4fa3ed]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x4fa3ed][_0x1bc270(0x2ce)][_0x1bc270(0x298)]);if(devices[_0x4fa3ed][_0x1bc270(0x37d)])clearTimeout(devices[_0x4fa3ed][_0x1bc270(0x37d)]);devices[_0x4fa3ed]['pidExpireLogin']=setTimeout(()=>{const _0x380d5a=_0x1bc270;if(devices[_0x4fa3ed][_0x380d5a(0x345)])clearTimeout(devices[_0x4fa3ed][_0x380d5a(0x345)]);removeSocketListeners(_0x4fa3ed),addBlacklist(_0x4fa3ed),devices[_0x4fa3ed][_0x380d5a(0x2ce)]=null,devices[_0x4fa3ed][_0x380d5a(0x291)]=null,devices[_0x4fa3ed]['access'][_0x380d5a(0x387)]=null,logger[_0x380d5a(0x32c)](_0x380d5a(0x27c)+_0x4fa3ed['slice'](-0x8)),devices[_0x4fa3ed][_0x380d5a(0x36a)]=validateAccess(devices[_0x4fa3ed]['access']['token'],_0x4fa3ed),!(devices[_0x4fa3ed][_0x380d5a(0x36a)][_0x380d5a(0x32f)]&&devices[_0x4fa3ed][_0x380d5a(0x36a)][_0x380d5a(0x271)]==_0x380d5a(0x335))&&(_0x3fd7e3==_0x380d5a(0x2c9)?io['to'](_0x4fa3ed)[_0x380d5a(0x2a7)](_0x380d5a(0x25e),{'access':{'allow':![],'reason':_0x380d5a(0x221),'token':null}}):io['to'](_0x4fa3ed)[_0x380d5a(0x2a7)](_0x380d5a(0x25e),{'access':{'allow':![],'reason':_0x380d5a(0x3a8),'token':null}})),devices[_0x4fa3ed][_0x380d5a(0x36a)]['token']=null;},_0x595718);}function setTokenRefresh(_0x5aaf59){const _0x5bb7c8=_0x5e87da;if(devices[_0x5aaf59][_0x5bb7c8(0x345)])clearTimeout(devices[_0x5aaf59][_0x5bb7c8(0x345)]);devices[_0x5aaf59][_0x5bb7c8(0x345)]=setTimeout(()=>{const _0x5b9730=_0x5bb7c8;getClientsWithUuid(_0x5aaf59)[_0x5b9730(0x275)]!=0x0?(devices[_0x5aaf59][_0x5b9730(0x36a)]=refreshToken(_0x5aaf59),io['to'](_0x5aaf59)[_0x5b9730(0x2a7)](_0x5b9730(0x25e),{'status':_0x5b9730(0x3be),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5aaf59]['access'],'externalip':devices[_0x5aaf59]['ip'],'publicKey':secure[_0x5b9730(0x2ed)],'validInstallation':validInstallation}),setTokenRefresh(_0x5aaf59)):clearTimeout(devices[_0x5aaf59][_0x5b9730(0x345)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x338da6){const _0x5b30b2=_0x5e87da,_0x5465ff=getClient(_0x338da6['id'])[_0x5b30b2(0x295)];_0x338da6[_0x5b30b2(0x2a7)](_0x5b30b2(0x290),config),_0x338da6['emit']('settings',cleanSettings()),_0x338da6['on']('add-bot',_0x186712=>{const _0x5df9f6=_0x5b30b2;if(validateAccess(_0x186712,_0x5465ff)[_0x5df9f6(0x32f)])addBot();else logger['full'](_0x5df9f6(0x372));}),_0x338da6['on'](_0x5b30b2(0x1f6),(_0x10caa3,_0x468acc)=>{const _0x5350b4=_0x5b30b2;if(validateAccess(_0x468acc,_0x5465ff)[_0x5350b4(0x32f)])toggleBot(_0x10caa3['botID'],_0x10caa3[_0x5350b4(0x25e)],_0x10caa3[_0x5350b4(0x2d6)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x338da6['on'](_0x5b30b2(0x23e),(_0x50b2e5,_0xdbdda4)=>{const _0x1dc0a8=_0x5b30b2;if(validateAccess(_0xdbdda4,_0x5465ff)[_0x1dc0a8(0x32f)])toggleBotMode(_0x50b2e5);else logger[_0x1dc0a8(0x38d)](_0x1dc0a8(0x30c));}),_0x338da6['on'](_0x5b30b2(0x202),(_0xb9cde6,_0x3d9460)=>{const _0xcc4f90=_0x5b30b2;if(validateAccess(_0x3d9460,_0x5465ff)[_0xcc4f90(0x32f)])deleteBot(_0xb9cde6);else logger[_0xcc4f90(0x38d)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x338da6['on']('store-settings',(_0x1a6bf8,_0x49051e)=>{const _0x11ed96=_0x5b30b2;if(validateAccess(_0x49051e,_0x5465ff)[_0x11ed96(0x32f)])storeSettings(_0x1a6bf8,!![]);else logger[_0x11ed96(0x38d)](_0x11ed96(0x352));}),_0x338da6['on'](_0x5b30b2(0x254),_0x5d390a=>{const _0x3f7045=_0x5b30b2;if(validateAccess(_0x5d390a,_0x5465ff)[_0x3f7045(0x32f)])updateBB(_0x3f7045(0x32e));else logger[_0x3f7045(0x38d)](_0x3f7045(0x281));}),_0x338da6['on'](_0x5b30b2(0x2d0),_0x3f6527=>{const _0x59d332=_0x5b30b2;if(validateAccess(_0x3f6527,_0x5465ff)[_0x59d332(0x32f)])updateBB('reinstall');else logger[_0x59d332(0x38d)](_0x59d332(0x214));}),_0x338da6['on'](_0x5b30b2(0x2dc),_0x3187cf=>{const _0x2ee611=_0x5b30b2;if(validateAccess(_0x3187cf,_0x5465ff)[_0x2ee611(0x32f)]){const _0x3da57b=getClient(_0x338da6['id']);if(_0x3da57b)getBackupFiles(_0x3da57b[_0x2ee611(0x295)]);else logger[_0x2ee611(0x38d)](_0x2ee611(0x25a));}else logger[_0x2ee611(0x38d)](_0x2ee611(0x2f5));}),_0x338da6['on']('restore-backup-file',(_0x353ab0,_0x2cdd91)=>{const _0x146237=_0x5b30b2;if(validateAccess(_0x2cdd91,_0x5465ff)[_0x146237(0x32f)])restoreBackupFile(_0x353ab0);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x338da6['on']('get-messages',_0x1a1fb0=>{const _0x30e96e=_0x5b30b2;if(validateAccess(_0x1a1fb0,_0x5465ff)[_0x30e96e(0x32f)])getMessages();else logger['full'](_0x30e96e(0x259));}),_0x338da6['on'](_0x5b30b2(0x1f0),(_0xb4b634,_0x3320dd)=>{const _0x39faab=_0x5b30b2;if(validateAccess(_0x3320dd,_0x5465ff)[_0x39faab(0x32f)])confirmMessage(_0xb4b634);else logger[_0x39faab(0x38d)](_0x39faab(0x3ac));}),_0x338da6['on'](_0x5b30b2(0x31a),_0x892e3c=>{const _0x461b6a=_0x5b30b2;if(validateAccess(_0x892e3c,_0x5465ff)[_0x461b6a(0x32f)]){if(devices[_0x5465ff]['pidRefreshToken'])clearTimeout(devices[_0x5465ff][_0x461b6a(0x345)]);if(devices[_0x5465ff][_0x461b6a(0x37d)])clearTimeout(devices[_0x5465ff][_0x461b6a(0x37d)]);removeSocketListeners(getClient(_0x338da6['id'])[_0x461b6a(0x295)]),addBlacklist(_0x5465ff),devices[_0x5465ff][_0x461b6a(0x2ce)]=null,devices[_0x5465ff][_0x461b6a(0x291)]=null,devices[_0x5465ff][_0x461b6a(0x36a)][_0x461b6a(0x387)]=null,logger[_0x461b6a(0x32c)](_0x461b6a(0x237)+_0x5465ff[_0x461b6a(0x2de)](-0x8)),io['to'](getClient(_0x338da6['id'])[_0x461b6a(0x295)])[_0x461b6a(0x2a7)](_0x461b6a(0x25e),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x461b6a(0x38d)](_0x461b6a(0x31c));});}function initializeSocketBot(_0x4373bf){const _0x11ee79=_0x5e87da,_0x4e6776=getClient(_0x4373bf['id'])[_0x11ee79(0x2d7)],_0x2912da=getClient(_0x4373bf['id'])[_0x11ee79(0x295)];_0x4373bf['on'](_0x11ee79(0x2b8),(_0x5d3853,_0x450eac)=>{const _0x5d4dc0=_0x11ee79;if(validateAccess(_0x450eac,_0x2912da)['allow']){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':'emitHistory','args':_0x5d3853});}else logger[_0x5d4dc0(0x38d)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x4373bf['on'](_0x11ee79(0x34a),(_0x1a6b3d,_0x10cba3)=>{const _0xa5e1b=_0x11ee79;if(validateAccess(_0x10cba3,_0x2912da)[_0xa5e1b(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':_0xa5e1b(0x2cb),'args':_0x1a6b3d});}else logger[_0xa5e1b(0x38d)](_0xa5e1b(0x226));}),_0x4373bf['on'](_0x11ee79(0x314),(_0x31fde3,_0x48b97e)=>{const _0x5cd2ae=_0x11ee79;if(validateAccess(_0x48b97e,_0x2912da)['allow']){if(pid[_0x4e6776])pid[_0x4e6776][_0x5cd2ae(0x274)]({'function':_0x5cd2ae(0x2cd),'args':_0x31fde3});}else logger[_0x5cd2ae(0x38d)](_0x5cd2ae(0x21d));}),_0x4373bf['on'](_0x11ee79(0x20d),(_0x3a994e,_0x4fd533)=>{const _0x135357=_0x11ee79;if(validateAccess(_0x4fd533,_0x2912da)[_0x135357(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':_0x135357(0x28f),'args':_0x3a994e});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x4373bf['on']('store-headless',(_0x263743,_0x3ce740)=>{const _0x5bf04d=_0x11ee79;if(validateAccess(_0x3ce740,_0x2912da)[_0x5bf04d(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':'storeHeadless','args':_0x263743});}else logger['full'](_0x5bf04d(0x3b4));}),_0x4373bf['on']('store-fiat',(_0x372b6a,_0x2b272b)=>{const _0x2ee8d1=_0x11ee79;if(validateAccess(_0x2b272b,_0x2912da)['allow']){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':_0x2ee8d1(0x2d2),'args':_0x372b6a});}else logger[_0x2ee8d1(0x38d)](_0x2ee8d1(0x35e));}),_0x4373bf['on'](_0x11ee79(0x347),_0x47d6a6=>{const _0x574612=_0x11ee79;if(validateAccess(_0x47d6a6,_0x2912da)['allow']){if(pid[_0x4e6776])pid[_0x4e6776][_0x574612(0x274)]({'function':_0x574612(0x25c),'args':null});}else logger[_0x574612(0x38d)](_0x574612(0x280));}),_0x4373bf['on'](_0x11ee79(0x2db),_0x6facf8=>{const _0x50c4e2=_0x11ee79;if(validateAccess(_0x6facf8,_0x2912da)[_0x50c4e2(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776][_0x50c4e2(0x274)]({'function':_0x50c4e2(0x2be),'args':null});}else logger[_0x50c4e2(0x38d)](_0x50c4e2(0x374));}),_0x4373bf['on'](_0x11ee79(0x37f),(_0x4599b4,_0x480fc2)=>{const _0x1ce1df=_0x11ee79;if(validateAccess(_0x480fc2,_0x2912da)[_0x1ce1df(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776][_0x1ce1df(0x274)]({'function':_0x1ce1df(0x2a0),'args':_0x4599b4});}else logger[_0x1ce1df(0x38d)](_0x1ce1df(0x1f9));}),_0x4373bf['on'](_0x11ee79(0x2c8),_0x4c32db=>{const _0x2a1d02=_0x11ee79;if(validateAccess(_0x4c32db,_0x2912da)['allow']){if(pid[_0x4e6776])pid[_0x4e6776]['send']({'function':'cancelLoading','args':null});}else logger['full'](_0x2a1d02(0x39f));}),_0x4373bf['on'](_0x11ee79(0x27e),_0x506569=>{const _0x2f8d4c=_0x11ee79;if(validateAccess(_0x506569,_0x2912da)[_0x2f8d4c(0x32f)]){if(pid[_0x4e6776])pid[_0x4e6776][_0x2f8d4c(0x274)]({'function':_0x2f8d4c(0x20e),'args':null});}else logger['full'](_0x2f8d4c(0x27a));}),_0x4373bf['on']('update-bb',_0x35fd2e=>{const _0x2407f7=_0x11ee79;if(validateAccess(_0x35fd2e,_0x2912da)[_0x2407f7(0x32f)])updateBB(_0x2407f7(0x32e));else logger[_0x2407f7(0x38d)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4373bf['on'](_0x11ee79(0x28d),_0x4243b4=>{const _0x5057bf=_0x11ee79;if(validateAccess(_0x4243b4,_0x2912da)[_0x5057bf(0x32f)])getMessages();else logger[_0x5057bf(0x38d)](_0x5057bf(0x259));}),_0x4373bf['on'](_0x11ee79(0x1f0),(_0x49e42c,_0x3147be)=>{const _0x3f92e2=_0x11ee79;if(validateAccess(_0x3147be,_0x2912da)[_0x3f92e2(0x32f)])confirmMessage(_0x49e42c);else logger[_0x3f92e2(0x38d)](_0x3f92e2(0x3ac));}),_0x4373bf['on'](_0x11ee79(0x31a),_0x447b96=>{const _0x1eb680=_0x11ee79;if(validateAccess(_0x447b96,_0x2912da)[_0x1eb680(0x32f)]){if(devices[_0x2912da][_0x1eb680(0x345)])clearTimeout(devices[_0x2912da][_0x1eb680(0x345)]);if(devices[_0x2912da][_0x1eb680(0x37d)])clearTimeout(devices[_0x2912da][_0x1eb680(0x37d)]);removeSocketListeners(getClient(_0x4373bf['id'])['uuid']),addBlacklist(_0x2912da),devices[_0x2912da]['telegramIpApproval']=null,devices[_0x2912da]['telegram2FaApproval']=null,devices[_0x2912da]['access'][_0x1eb680(0x387)]=null,logger[_0x1eb680(0x32c)]('Logged\x20out\x20user\x20...'+_0x2912da['slice'](-0x8)),io['to'](getClient(_0x4373bf['id'])[_0x1eb680(0x295)])[_0x1eb680(0x2a7)](_0x1eb680(0x25e),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1eb680(0x38d)](_0x1eb680(0x31c));});}function removeSocketListeners(_0x12e555){const _0x31dbfb=_0x5e87da;getClientsWithUuid(_0x12e555)[_0x31dbfb(0x227)](_0x439b81=>{const _0x3ee78a=_0x31dbfb;getSocket(_0x439b81['id'])[_0x3ee78a(0x28b)]();});}function cleanSettings(){const _0x422884=_0x5e87da;let _0x95bec1=settings;return settings['telegramToken']&&settings[_0x422884(0x26d)]!=''&&(_0x95bec1={..._0x95bec1,'telegramToken':_0x422884(0x326)}),settings[_0x422884(0x260)]&&settings[_0x422884(0x260)]!=''&&(_0x95bec1={..._0x95bec1,'bbPassword':'************'}),(settings[_0x422884(0x260)]&&settings[_0x422884(0x260)]==_0x422884(0x247)||settings[_0x422884(0x26d)]&&settings[_0x422884(0x26d)]==_0x422884(0x247))&&(_0x95bec1={..._0x95bec1,'restored':{'password':settings[_0x422884(0x260)]==_0x422884(0x247),'telegram':settings[_0x422884(0x26d)]=='***'}}),_0x95bec1;}async function updateBB(_0x3ae651){const _0x1ec64b=_0x5e87da;await backupConfigFiles(),installingUpdate=!![],config[_0x1ec64b(0x227)](_0xf0f89a=>{const _0x505cef=_0x1ec64b;restartBot(_0xf0f89a[_0x505cef(0x344)]);});if(_0x3ae651==_0x1ec64b(0x32e))process[_0x1ec64b(0x274)]({'update':!![],'environment':environment},_0x210b16=>{});else _0x3ae651==_0x1ec64b(0x27b)&&process[_0x1ec64b(0x274)]({'reinstall':!![],'environment':environment},_0x5ad435=>{});}function startBot(_0xe89a14,_0x19983b,_0x277b3d){const _0x48c804=_0x5e87da;if(debugging)_0xe89a14['push']('-d');let _0x5ec0a9=![];const _0x1fa1ea=_0xe89a14[0x0];_0x19983b={..._0x19983b,'stdio':[_0x48c804(0x367),_0x48c804(0x367),_0x48c804(0x367),_0x48c804(0x3c4)]},pid[_0x1fa1ea]=childProcess['fork'](botfile,_0xe89a14,_0x19983b),pid[_0x1fa1ea]['on'](_0x48c804(0x3b0),_0x3d6a3e=>{const _0x201e2e=_0x48c804;switch(Object['keys'](_0x3d6a3e)[0x0]){case'botname':updateBotName(_0x1fa1ea,_0x3d6a3e[_0x201e2e(0x2d9)]);break;case _0x201e2e(0x3c6):updateBotManager();break;case _0x201e2e(0x25e):updateStatus(_0x1fa1ea,_0x3d6a3e[_0x201e2e(0x25e)]);break;case _0x201e2e(0x2d6):updateLive(_0x1fa1ea,_0x3d6a3e[_0x201e2e(0x2d6)]);break;case'started':updateLive(_0x1fa1ea,_0x3d6a3e['started']),io['to'](_0x1fa1ea)[_0x201e2e(0x2a7)](_0x201e2e(0x25e),{'access':{'allow':![],'reason':_0x201e2e(0x209),'token':null}});break;case _0x201e2e(0x343):_0x3d6a3e[_0x201e2e(0x343)]==_0x201e2e(0x272)&&restartBot(_0x1fa1ea);_0x3d6a3e['stop']==_0x201e2e(0x366)&&toggleBot(_0x1fa1ea,'disabled',_0x201e2e(0x3b8));break;case _0x201e2e(0x302):sendTelegram(_0x1fa1ea,_0x3d6a3e[_0x201e2e(0x302)]);break;case'telegrammsg':sendTelegramMsg(_0x3d6a3e[_0x201e2e(0x36c)]);break;case _0x201e2e(0x305):io['to'](_0x1fa1ea)[_0x201e2e(0x2a7)](_0x3d6a3e[_0x201e2e(0x305)],_0x3d6a3e[_0x201e2e(0x200)]);break;}}),pid[_0x1fa1ea]['on']('error',function(_0x50ba03){if(_0x5ec0a9)return;_0x5ec0a9=!![],_0x277b3d(_0x50ba03);}),pid[_0x1fa1ea]['on'](_0x48c804(0x333),async function(_0x562b59){const _0x2df0c5=_0x48c804;if(installingUpdate)return;if(_0x5ec0a9)return;_0x5ec0a9=!![],_0x277b3d(null);const _0x1dd411=dbConfig[_0x2df0c5(0x329)]('bots')[_0x2df0c5(0x2d3)]({'botID':_0x1fa1ea})[_0x2df0c5(0x261)]();_0x1dd411&&(_0x1dd411[_0x2df0c5(0x25e)]==_0x2df0c5(0x328)||_0x1dd411['status']==_0x2df0c5(0x34b))&&(await sleep(0x3e8),updateLive(_0x1fa1ea,_0x2df0c5(0x3b8)),logger['full'](_0x2df0c5(0x268)+_0x1fa1ea),startBot([_0x1fa1ea,userID],{'cwd':bbpath},function(_0x2879a2){const _0x437496=_0x2df0c5;if(_0x2879a2)logger[_0x437496(0x38d)](_0x2879a2);}));});}function stopBot(_0x4481f6){const _0x45012d=_0x5e87da;getClientsWithBotID(_0x4481f6)[_0x45012d(0x227)](_0x2277b4=>{getSocket(_0x2277b4['id'])['disconnect'](!![]),removeClient(_0x2277b4['id']);}),pid[_0x4481f6]&&(pid[_0x4481f6][_0x45012d(0x366)](),pid[_0x4481f6]=null);}function restartBot(_0x518440){if(pid[_0x518440])pid[_0x518440]['kill']();}function addBot(){const _0x1575d0=_0x5e87da;let _0xe15d1e;for(let _0x108cf1=0x1;_0x108cf1<0x3e9;_0x108cf1++){_0xe15d1e=_0x108cf1['toString']()['padStart'](0x3,'0');let _0xc841e4=config[_0x1575d0(0x2d3)](_0x15e88f=>_0x15e88f[_0x1575d0(0x344)]==_0xe15d1e);if(!_0xc841e4)break;}if(_0xe15d1e===_0x1575d0(0x23d)){logger[_0x1575d0(0x38d)](_0x1575d0(0x384));return;}logger[_0x1575d0(0x38d)](_0x1575d0(0x238)+_0xe15d1e),dbConfig[_0x1575d0(0x329)](_0x1575d0(0x290))[_0x1575d0(0x22b)]({'botID':_0xe15d1e,'botname':'Bot\x20'+_0xe15d1e,'status':_0x1575d0(0x34b),'live':''})[_0x1575d0(0x244)](),startBot([_0xe15d1e,userID],{'cwd':bbpath},function(_0x2ed71d){const _0xa030e2=_0x1575d0;if(_0x2ed71d)logger[_0xa030e2(0x38d)](_0x2ed71d);}),config=getConfiguration(),io['to'](_0x1575d0(0x282))[_0x1575d0(0x2a7)](_0x1575d0(0x290),config),broadcastToBots(_0x1575d0(0x290),JSON['stringify'](config));}function deleteBot(_0x372398){const _0x4f4d3e=_0x5e87da;getClientsWithBotID(_0x372398)[_0x4f4d3e(0x227)](_0x2af478=>{const _0xf2eef7=_0x4f4d3e;getSocket(_0x2af478['id'])[_0xf2eef7(0x224)](!![]),removeClient(_0x2af478['id']);}),dbConfig[_0x4f4d3e(0x329)](_0x4f4d3e(0x290))[_0x4f4d3e(0x373)]({'botID':_0x372398})[_0x4f4d3e(0x244)](),logger[_0x4f4d3e(0x38d)]('Deleted\x20Bot\x20'+_0x372398),stopBot(_0x372398);try{if(fs['existsSync'](path[_0x4f4d3e(0x385)](configpath,'bot-'+_0x372398+_0x4f4d3e(0x2e8))))fs['unlinkSync'](path[_0x4f4d3e(0x385)](configpath,_0x4f4d3e(0x2bd)+_0x372398+_0x4f4d3e(0x2e8)));if(fs[_0x4f4d3e(0x354)](path['join'](configpath,_0x4f4d3e(0x2bd)+_0x372398+'-events.json')))fs[_0x4f4d3e(0x267)](path[_0x4f4d3e(0x385)](configpath,_0x4f4d3e(0x2bd)+_0x372398+_0x4f4d3e(0x3a5)));if(fs[_0x4f4d3e(0x354)](path[_0x4f4d3e(0x385)](configpath,'bot-'+_0x372398+'-performance.json')))fs['unlinkSync'](path[_0x4f4d3e(0x385)](configpath,_0x4f4d3e(0x2bd)+_0x372398+_0x4f4d3e(0x30d)));if(fs[_0x4f4d3e(0x354)](path[_0x4f4d3e(0x385)](configpath,_0x4f4d3e(0x2bd)+_0x372398+'-results.json')))fs[_0x4f4d3e(0x267)](path['join'](configpath,'bot-'+_0x372398+_0x4f4d3e(0x29c)));}catch(_0x3dca52){if(_0x3dca52)logger[_0x4f4d3e(0x38d)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x3dca52);}config=getConfiguration(),io['to'](_0x4f4d3e(0x282))['emit']('bots',config),broadcastToBots('bots',JSON[_0x4f4d3e(0x234)](config));}function toggleBot(_0x40548c,_0x4af7d9,_0xe94f6e){const _0x25ed46=_0x5e87da;dbConfig['get'](_0x25ed46(0x290))[_0x25ed46(0x2d3)]({'botID':_0x40548c})[_0x25ed46(0x1ee)]({'status':_0x4af7d9})[_0x25ed46(0x1ee)]({'live':_0xe94f6e})['write']();if(_0x4af7d9==_0x25ed46(0x328)||_0x4af7d9==_0x25ed46(0x34b))logger[_0x25ed46(0x38d)](_0x25ed46(0x2b6)+_0x40548c),startBot([_0x40548c,userID],{'cwd':bbpath},function(_0x29e817){if(_0x29e817)logger['full'](_0x29e817);});else(_0x4af7d9==_0x25ed46(0x306)||_0x4af7d9==_0x25ed46(0x378))&&(logger[_0x25ed46(0x38d)](_0x25ed46(0x3b5)+_0x40548c),stopBot(_0x40548c));config=getConfiguration(),io['to'](_0x25ed46(0x282))['emit']('bots',config),broadcastToBots('bots',JSON[_0x25ed46(0x234)](config));}function toggleStatus(_0x4812f7){const _0x4d8270=_0x5e87da;let _0x1301ad=dbConfig[_0x4d8270(0x329)](_0x4d8270(0x290))['find']({'botID':_0x4812f7})[_0x4d8270(0x261)](),_0x8a61e4;if(_0x1301ad[_0x4d8270(0x25e)]===_0x4d8270(0x328))_0x8a61e4=_0x4d8270(0x306);else{if(_0x1301ad[_0x4d8270(0x25e)]===_0x4d8270(0x34b))_0x8a61e4=_0x4d8270(0x378);else{if(_0x1301ad[_0x4d8270(0x25e)]===_0x4d8270(0x378))_0x8a61e4=_0x4d8270(0x34b);else{if(_0x1301ad[_0x4d8270(0x25e)]===_0x4d8270(0x306))_0x8a61e4=_0x4d8270(0x328);}}}return _0x8a61e4;}function updateStatus(_0x5eec02,_0x33300d){const _0x55d3ca=_0x5e87da;dbConfig[_0x55d3ca(0x329)]('bots')['find']({'botID':_0x5eec02})[_0x55d3ca(0x1ee)]({'status':_0x33300d})[_0x55d3ca(0x244)](),config=getConfiguration(),io['to']('botmanager')[_0x55d3ca(0x2a7)](_0x55d3ca(0x290),config),broadcastToBots(_0x55d3ca(0x290),JSON['stringify'](config));}function updateLive(_0x3af82b,_0x2719a6){const _0x2fef24=_0x5e87da;dbConfig['get'](_0x2fef24(0x290))[_0x2fef24(0x2d3)]({'botID':_0x3af82b})[_0x2fef24(0x1ee)]({'live':_0x2719a6})[_0x2fef24(0x244)](),config=getConfiguration(),io['to'](_0x2fef24(0x282))[_0x2fef24(0x2a7)](_0x2fef24(0x290),config),broadcastToBots('bots',JSON[_0x2fef24(0x234)](config));}function updateBotName(_0x16deee,_0x4ed883){const _0x5b1764=_0x5e87da;dbConfig[_0x5b1764(0x329)](_0x5b1764(0x290))[_0x5b1764(0x2d3)]({'botID':_0x16deee})[_0x5b1764(0x1ee)]({'botname':_0x4ed883})[_0x5b1764(0x244)](),config=getConfiguration(),io['to'](_0x5b1764(0x282))[_0x5b1764(0x2a7)](_0x5b1764(0x290),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0xc0a9a1=_0x5e87da;config=getConfiguration(),io['to'](_0xc0a9a1(0x282))[_0xc0a9a1(0x2a7)](_0xc0a9a1(0x290),config),broadcastToBots('bots',JSON[_0xc0a9a1(0x234)](config));}function toggleBotMode(_0x23081d){const _0x1cf1d9=_0x5e87da;if(pid[_0x23081d])pid[_0x23081d][_0x1cf1d9(0x274)]({'function':'toggleBotMode','args':null});else{const _0x111ab5=configpath+_0x1cf1d9(0x2bd)+_0x23081d+_0x1cf1d9(0x2e8),_0x2887c4=fs[_0x1cf1d9(0x22f)](_0x111ab5),_0xc3f09f=JSON[_0x1cf1d9(0x381)](_0x2887c4),_0x3a6d21=_0xc3f09f['bot'][0x0][_0x1cf1d9(0x31e)];_0xc3f09f['bot'][0x0][_0x1cf1d9(0x31e)]=!_0x3a6d21;const _0x5af9e0=JSON[_0x1cf1d9(0x234)](_0xc3f09f,null,0x2);fs[_0x1cf1d9(0x273)](_0x111ab5,_0x5af9e0),config=getConfiguration(),io['to'](_0x1cf1d9(0x282))[_0x1cf1d9(0x2a7)](_0x1cf1d9(0x290),config),broadcastToBots(_0x1cf1d9(0x290),JSON['stringify'](config));}}function telegramError(_0x5de817){const _0x56e7cc=_0x5e87da;logger['simple'](getTimeStamp()+_0x56e7cc(0x32b));}function validateTelegram(_0x232194){const _0x521d3d=_0x5e87da;if(_0x232194[_0x521d3d(0x30b)][_0x521d3d(0x24b)]!=settings[_0x521d3d(0x33a)]&&'@'+_0x232194[_0x521d3d(0x30b)][_0x521d3d(0x24b)]!=settings[_0x521d3d(0x33a)])return tgBot[_0x521d3d(0x2a1)](_0x232194['chat']['id'],_0x521d3d(0x3ba),{'parse_mode':_0x521d3d(0x1fa)})[_0x521d3d(0x223)](_0x42600d=>{telegramError(_0x42600d);}),![];return!![];}async function initTelegram(){const _0x5482c1=_0x5e87da;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5482c1(0x26d)],{'polling':!![]});let _0x233b86=_0x5482c1(0x3b3);_0x233b86+='\x0a',_0x233b86+=_0x5482c1(0x204),_0x233b86+='/disable\x20-\x20disable\x20notifications\x0a',_0x233b86+=_0x5482c1(0x296),_0x233b86+=_0x5482c1(0x33c),_0x233b86+='/on\x20-\x20start\x20bot(s)\x0a',_0x233b86+=_0x5482c1(0x2cf),_0x233b86+=_0x5482c1(0x379),_0x233b86+=_0x5482c1(0x2b2),_0x233b86+=_0x5482c1(0x24a),_0x233b86+=_0x5482c1(0x28a),_0x233b86+=_0x5482c1(0x2f9),_0x233b86+=_0x5482c1(0x39d),_0x233b86+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x233b86+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x37e7e7='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x37e7e7+='\x0a',_0x37e7e7+=_0x233b86,tgBot[_0x5482c1(0x2e7)](/\/start/,_0x39ccd8=>{const _0xd2187a=_0x5482c1;if(!validateTelegram(_0x39ccd8))return;if(settings[_0xd2187a(0x2ca)]!=_0x39ccd8[_0xd2187a(0x361)]['id'])updateSetting(_0xd2187a(0x2ca),_0x39ccd8[_0xd2187a(0x361)]['id']);updateSetting(_0xd2187a(0x1f5),!![]),tgBot[_0xd2187a(0x2a1)](_0x39ccd8[_0xd2187a(0x361)]['id'],_0x37e7e7)[_0xd2187a(0x223)](_0x48bb2a=>{telegramError(_0x48bb2a);});}),tgBot[_0x5482c1(0x2e7)](/\/enable/,_0x15f66f=>{const _0x490893=_0x5482c1;if(!validateTelegram(_0x15f66f))return;if(settings['telegramChatId']!=_0x15f66f[_0x490893(0x361)]['id'])updateSetting(_0x490893(0x2ca),_0x15f66f[_0x490893(0x361)]['id']);updateSetting(_0x490893(0x1f5),!![]),tgBot[_0x490893(0x2a1)](_0x15f66f[_0x490893(0x361)]['id'],_0x490893(0x222))['catch'](_0x5ad35a=>{telegramError(_0x5ad35a);});}),tgBot[_0x5482c1(0x2e7)](/\/config/,async _0x365c30=>{const _0x3a486e=_0x5482c1;if(!validateTelegram(_0x365c30))return;tgBot[_0x3a486e(0x3a0)](_0x3a486e(0x2b3)),tgBot[_0x3a486e(0x2a1)](_0x365c30[_0x3a486e(0x361)]['id'],_0x3a486e(0x242),{'reply_markup':{'inline_keyboard':[[{'text':_0x3a486e(0x285),'callback_data':_0x3a486e(0x319)},{'text':_0x3a486e(0x36f),'callback_data':_0x3a486e(0x3bf)},{'text':_0x3a486e(0x2a6),'callback_data':_0x3a486e(0x34f)}]]}})[_0x3a486e(0x223)](_0x43dc6e=>{telegramError(_0x43dc6e);}),tgBot['on'](_0x3a486e(0x2b3),async _0x8e11fb=>{const _0x3d525e=_0x3a486e,_0x469095=_0x8e11fb[_0x3d525e(0x270)],_0x443b92=_0x8e11fb[_0x3d525e(0x3b0)];tgBot['answerCallbackQuery'](_0x8e11fb['id'])[_0x3d525e(0x2e4)](async()=>{const _0x3096bc=_0x3d525e;_0x469095=='orders'&&(updateSetting('telegramEvents',_0x3096bc(0x319)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3096bc(0x2a1)](_0x443b92[_0x3096bc(0x361)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x43bdaf=>{telegramError(_0x43bdaf);}));_0x469095==_0x3096bc(0x3bf)&&(updateSetting(_0x3096bc(0x203),_0x3096bc(0x3bf)),updateSetting(_0x3096bc(0x1f5),!![]),await tgBot[_0x3096bc(0x2a1)](_0x443b92[_0x3096bc(0x361)]['id'],_0x3096bc(0x24e))[_0x3096bc(0x223)](_0x16e4d7=>{telegramError(_0x16e4d7);}));_0x469095=='all'&&(updateSetting('telegramEvents',_0x3096bc(0x34f)),updateSetting(_0x3096bc(0x1f5),!![]),await tgBot[_0x3096bc(0x2a1)](_0x443b92[_0x3096bc(0x361)]['id'],_0x3096bc(0x39a))[_0x3096bc(0x223)](_0x1f9a87=>{telegramError(_0x1f9a87);}));if(!settings[_0x3096bc(0x2ca)])tgBot[_0x3096bc(0x2a1)](_0x443b92[_0x3096bc(0x361)]['id'],_0x3096bc(0x24c))['catch'](_0x3836d9=>{telegramError(_0x3836d9);});}),tgBot[_0x3d525e(0x3a0)](_0x3d525e(0x2b3));});}),tgBot[_0x5482c1(0x2e7)](/\/status/,_0x3509cc=>{const _0x505d50=_0x5482c1;if(!validateTelegram(_0x3509cc))return;const _0x934621=getBotsWithMode();let _0x20c358=_0x505d50(0x27d);config['forEach'](_0x19efe4=>{const _0x21ad11=_0x505d50,_0x1ef651=_0x934621['find'](_0x3bd712=>_0x3bd712[_0x21ad11(0x344)]==_0x19efe4['botID'])[_0x21ad11(0x249)];_0x20c358+='Bot\x20'+_0x19efe4['botID']+':\x20'+_0x19efe4[_0x21ad11(0x25e)]+_0x21ad11(0x316)+_0x1ef651+'\x20|\x20'+_0x19efe4['live']+'\x0a';}),_0x20c358+='\x0a',_0x20c358+=_0x505d50(0x26b),_0x20c358+=!settings[_0x505d50(0x1f5)]?_0x505d50(0x2bb):_0x505d50(0x3bc),_0x20c358+=settings[_0x505d50(0x1f5)]?settings['telegramEvents']==_0x505d50(0x34f)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x505d50(0x203)]+'\x20only\x0a':'',tgBot[_0x505d50(0x2a1)](_0x3509cc[_0x505d50(0x361)]['id'],_0x20c358,{'parse_mode':_0x505d50(0x1fa)})[_0x505d50(0x223)](_0x58779b=>{telegramError(_0x58779b);});}),tgBot[_0x5482c1(0x2e7)](/\/restart/,_0x155a6e=>{const _0x133fad=_0x5482c1;if(!validateTelegram(_0x155a6e))return;tgBot['removeListener'](_0x133fad(0x2b3));const _0x75752a=getEnabledBots();if(_0x75752a['length']==0x0)tgBot[_0x133fad(0x2a1)](_0x155a6e[_0x133fad(0x361)]['id'],_0x133fad(0x386))[_0x133fad(0x223)](_0x32a71d=>{telegramError(_0x32a71d);});else{if(_0x75752a[_0x133fad(0x275)]>0x1)_0x75752a[_0x133fad(0x22b)]({'botID':_0x133fad(0x34f)});let _0x5e8289=[],_0x32811d=[];const _0x2bb479=_0x75752a[_0x133fad(0x275)]%0x4==0x0||_0x75752a[_0x133fad(0x275)]%0x4==0x3||_0x75752a['length']%0x3==0x1?0x4:0x3;let _0x1bf09c=0x0;_0x75752a[_0x133fad(0x227)]((_0x4b1e6a,_0x33e366)=>{const _0x1617da=_0x133fad;if(_0x33e366%_0x2bb479==0x0)_0x32811d=[];_0x32811d[_0x1617da(0x22b)]({'text':_0x4b1e6a[_0x1617da(0x344)]==_0x1617da(0x34f)?'All\x20bots':_0x1617da(0x3c5)+_0x4b1e6a[_0x1617da(0x344)],'callback_data':_0x4b1e6a[_0x1617da(0x344)]}),_0x33e366%_0x2bb479==0x0&&(_0x5e8289[_0x1bf09c]=_0x32811d,_0x1bf09c++);}),tgBot[_0x133fad(0x2a1)](_0x155a6e[_0x133fad(0x361)]['id'],_0x133fad(0x2fd),{'reply_markup':{'inline_keyboard':_0x5e8289}})[_0x133fad(0x223)](_0x5d2ef4=>{telegramError(_0x5d2ef4);}),tgBot['on'](_0x133fad(0x2b3),async _0x5aec72=>{const _0x1587be=_0x133fad,_0x42a3db=_0x5aec72[_0x1587be(0x270)],_0x2b3cd0=_0x5aec72[_0x1587be(0x3b0)];tgBot['answerCallbackQuery'](_0x5aec72['id'])[_0x1587be(0x2e4)](async()=>{const _0x471cc5=_0x1587be;_0x42a3db=='all'?config[_0x471cc5(0x227)](_0x25cfdf=>{const _0x50e118=_0x471cc5;restartBot(_0x25cfdf[_0x50e118(0x344)]);}):restartBot(_0x42a3db);}),tgBot[_0x1587be(0x3a0)](_0x1587be(0x2b3));});}}),tgBot['onText'](/\/on/,_0x3af686=>{const _0x3fdebb=_0x5482c1;if(!validateTelegram(_0x3af686))return;tgBot[_0x3fdebb(0x3a0)](_0x3fdebb(0x2b3));const _0x104ecb=getDisabledBots();if(_0x104ecb[_0x3fdebb(0x275)]==0x0)tgBot[_0x3fdebb(0x2a1)](_0x3af686[_0x3fdebb(0x361)]['id'],_0x3fdebb(0x39b))[_0x3fdebb(0x223)](_0x35bb27=>{telegramError(_0x35bb27);});else{if(_0x104ecb[_0x3fdebb(0x275)]>0x1)_0x104ecb[_0x3fdebb(0x22b)]({'botID':_0x3fdebb(0x34f)});let _0x5c24a9=[],_0x5cdd8b=[];const _0x154602=_0x104ecb[_0x3fdebb(0x275)]%0x4==0x0||_0x104ecb['length']%0x4==0x3||_0x104ecb[_0x3fdebb(0x275)]%0x3==0x1?0x4:0x3;let _0x57a815=0x0;_0x104ecb[_0x3fdebb(0x227)]((_0x413b4d,_0xf7e9e9)=>{const _0x14c3fd=_0x3fdebb;if(_0xf7e9e9%_0x154602==0x0)_0x5cdd8b=[];_0x5cdd8b[_0x14c3fd(0x22b)]({'text':_0x413b4d['botID']==_0x14c3fd(0x34f)?_0x14c3fd(0x304):'Bot\x20'+_0x413b4d[_0x14c3fd(0x344)],'callback_data':_0x413b4d[_0x14c3fd(0x344)]}),_0xf7e9e9%_0x154602==0x0&&(_0x5c24a9[_0x57a815]=_0x5cdd8b,_0x57a815++);}),tgBot['sendMessage'](_0x3af686[_0x3fdebb(0x361)]['id'],_0x3fdebb(0x23a),{'reply_markup':{'inline_keyboard':_0x5c24a9}})[_0x3fdebb(0x223)](_0x4f9b77=>{telegramError(_0x4f9b77);}),tgBot['on'](_0x3fdebb(0x2b3),async _0x4229bf=>{const _0x636e4b=_0x3fdebb,_0x2e4184=_0x4229bf[_0x636e4b(0x270)],_0x88696a=_0x4229bf['message'];tgBot['answerCallbackQuery'](_0x4229bf['id'])['then'](async()=>{const _0x4a9c3e=_0x636e4b;_0x2e4184==_0x4a9c3e(0x34f)?(tgBot[_0x4a9c3e(0x2a1)](_0x88696a['chat']['id'],_0x4a9c3e(0x29a))['catch'](_0x489d46=>{telegramError(_0x489d46);}),_0x104ecb['forEach'](_0x5acc2a=>{const _0x2623de=_0x4a9c3e;if(_0x5acc2a[_0x2623de(0x344)]!=_0x2623de(0x34f))toggleBot(_0x5acc2a[_0x2623de(0x344)],toggleStatus(_0x5acc2a[_0x2623de(0x344)]),'stopped');})):(tgBot[_0x4a9c3e(0x2a1)](_0x88696a[_0x4a9c3e(0x361)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x2e4184)[_0x4a9c3e(0x223)](_0x53187b=>{telegramError(_0x53187b);}),toggleBot(_0x2e4184,toggleStatus(_0x2e4184),_0x4a9c3e(0x3b8)));}),tgBot[_0x636e4b(0x3a0)]('callback_query');});}}),tgBot[_0x5482c1(0x2e7)](/\/off/,_0x478d1d=>{const _0x5443ae=_0x5482c1;if(!validateTelegram(_0x478d1d))return;tgBot[_0x5443ae(0x3a0)](_0x5443ae(0x2b3));const _0x4007ba=getEnabledBots();if(_0x4007ba['length']==0x0)tgBot['sendMessage'](_0x478d1d[_0x5443ae(0x361)]['id'],_0x5443ae(0x386))[_0x5443ae(0x223)](_0x47af2c=>{telegramError(_0x47af2c);});else{if(_0x4007ba['length']>0x1)_0x4007ba[_0x5443ae(0x22b)]({'botID':_0x5443ae(0x34f)});let _0x2a8209=[],_0x17ef56=[];const _0x3687ce=_0x4007ba['length']%0x4==0x0||_0x4007ba['length']%0x4==0x3||_0x4007ba[_0x5443ae(0x275)]%0x3==0x1?0x4:0x3;let _0x830fa4=0x0;_0x4007ba[_0x5443ae(0x227)]((_0x3a42d2,_0x3145db)=>{const _0x36bc77=_0x5443ae;if(_0x3145db%_0x3687ce==0x0)_0x17ef56=[];_0x17ef56[_0x36bc77(0x22b)]({'text':_0x3a42d2['botID']==_0x36bc77(0x34f)?'All\x20bots':_0x36bc77(0x3c5)+_0x3a42d2['botID'],'callback_data':_0x3a42d2[_0x36bc77(0x344)]}),_0x3145db%_0x3687ce==0x0&&(_0x2a8209[_0x830fa4]=_0x17ef56,_0x830fa4++);}),tgBot[_0x5443ae(0x2a1)](_0x478d1d[_0x5443ae(0x361)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2a8209}})[_0x5443ae(0x223)](_0xa452ff=>{telegramError(_0xa452ff);}),tgBot['on'](_0x5443ae(0x2b3),async _0x5a722c=>{const _0x4f0302=_0x5443ae,_0x334888=_0x5a722c[_0x4f0302(0x270)],_0x4ccd04=_0x5a722c[_0x4f0302(0x3b0)];tgBot['answerCallbackQuery'](_0x5a722c['id'])[_0x4f0302(0x2e4)](async()=>{const _0xfd2671=_0x4f0302;_0x334888==_0xfd2671(0x34f)?(tgBot[_0xfd2671(0x2a1)](_0x4ccd04[_0xfd2671(0x361)]['id'],_0xfd2671(0x2d1))[_0xfd2671(0x223)](_0x4657c4=>{telegramError(_0x4657c4);}),_0x4007ba['forEach'](_0x302347=>{const _0x1d66cb=_0xfd2671;if(_0x302347['botID']!=_0x1d66cb(0x34f))toggleBot(_0x302347[_0x1d66cb(0x344)],toggleStatus(_0x302347[_0x1d66cb(0x344)]),_0x1d66cb(0x3b8));})):(tgBot[_0xfd2671(0x2a1)](_0x4ccd04[_0xfd2671(0x361)]['id'],_0xfd2671(0x3bd)+_0x334888)[_0xfd2671(0x223)](_0x261e40=>{telegramError(_0x261e40);}),toggleBot(_0x334888,toggleStatus(_0x334888),_0xfd2671(0x3b8)));}),tgBot[_0x4f0302(0x3a0)]('callback_query');});}}),tgBot[_0x5482c1(0x2e7)](/\/metrics/,_0x19cb66=>{const _0x5f06a3=_0x5482c1;if(!validateTelegram(_0x19cb66))return;tgBot[_0x5f06a3(0x3a0)](_0x5f06a3(0x2b3));const _0x32bb4c=getEnabledBots();if(_0x32bb4c[_0x5f06a3(0x275)]==0x0)tgBot[_0x5f06a3(0x2a1)](_0x19cb66[_0x5f06a3(0x361)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5f06a3(0x223)](_0x1d1d9b=>{telegramError(_0x1d1d9b);});else{if(_0x32bb4c[_0x5f06a3(0x275)]>0x1){let _0x2e5fd=[],_0x85fe46=[];const _0x38cc3f=_0x32bb4c['length']%0x4==0x0||_0x32bb4c[_0x5f06a3(0x275)]%0x4==0x3||_0x32bb4c[_0x5f06a3(0x275)]%0x3==0x1?0x4:0x3;let _0x531c67=0x0;_0x32bb4c[_0x5f06a3(0x227)]((_0x369b34,_0x19ca7c)=>{const _0x2cf0a4=_0x5f06a3;if(_0x19ca7c%_0x38cc3f==0x0)_0x85fe46=[];_0x85fe46[_0x2cf0a4(0x22b)]({'text':_0x2cf0a4(0x3c5)+_0x369b34[_0x2cf0a4(0x344)],'callback_data':_0x369b34[_0x2cf0a4(0x344)]}),_0x19ca7c%_0x38cc3f==0x0&&(_0x2e5fd[_0x531c67]=_0x85fe46,_0x531c67++);}),tgBot[_0x5f06a3(0x2a1)](_0x19cb66['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x2e5fd}})[_0x5f06a3(0x223)](_0x418acf=>{telegramError(_0x418acf);}),tgBot['on'](_0x5f06a3(0x2b3),async _0x5bdc67=>{const _0x25fe33=_0x5f06a3,_0x4a606d=_0x5bdc67[_0x25fe33(0x270)],_0x5b644d=_0x5bdc67[_0x25fe33(0x3b0)];tgBot[_0x25fe33(0x20a)](_0x5bdc67['id'])[_0x25fe33(0x2e4)](async()=>{const _0x34ebf8=_0x25fe33;if(pid[_0x4a606d])pid[_0x4a606d][_0x34ebf8(0x274)]({'function':'sendMetricsTelegram','args':null});}),tgBot['removeListener'](_0x25fe33(0x2b3));});}else{const _0x45ccb1=_0x32bb4c[0x0][_0x5f06a3(0x344)];if(pid[_0x45ccb1])pid[_0x45ccb1][_0x5f06a3(0x274)]({'function':_0x5f06a3(0x389),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x545d4c=>{const _0x6211db=_0x5482c1;if(!validateTelegram(_0x545d4c))return;tgBot[_0x6211db(0x3a0)](_0x6211db(0x2b3));const _0x460771=getEnabledBots();if(_0x460771['length']==0x0)tgBot[_0x6211db(0x2a1)](_0x545d4c['chat']['id'],_0x6211db(0x386))[_0x6211db(0x223)](_0x83b58b=>{telegramError(_0x83b58b);});else{if(_0x460771['length']>0x1){let _0x2cabf=[],_0x4cc1fc=[];const _0x3c929a=_0x460771[_0x6211db(0x275)]%0x4==0x0||_0x460771[_0x6211db(0x275)]%0x4==0x3||_0x460771[_0x6211db(0x275)]%0x3==0x1?0x4:0x3;let _0x1d8d8a=0x0;_0x460771[_0x6211db(0x227)]((_0x70fd0c,_0x176b31)=>{const _0x1bcef9=_0x6211db;if(_0x176b31%_0x3c929a==0x0)_0x4cc1fc=[];_0x4cc1fc[_0x1bcef9(0x22b)]({'text':'Bot\x20'+_0x70fd0c[_0x1bcef9(0x344)],'callback_data':_0x70fd0c[_0x1bcef9(0x344)]}),_0x176b31%_0x3c929a==0x0&&(_0x2cabf[_0x1d8d8a]=_0x4cc1fc,_0x1d8d8a++);}),tgBot[_0x6211db(0x2a1)](_0x545d4c[_0x6211db(0x361)]['id'],_0x6211db(0x21c),{'reply_markup':{'inline_keyboard':_0x2cabf}})[_0x6211db(0x223)](_0x23ecf1=>{telegramError(_0x23ecf1);}),tgBot['on'](_0x6211db(0x2b3),async _0x2fb7ce=>{const _0x47a63e=_0x6211db,_0x4f8b67=_0x2fb7ce[_0x47a63e(0x270)],_0xf0508d=_0x2fb7ce[_0x47a63e(0x3b0)];tgBot[_0x47a63e(0x20a)](_0x2fb7ce['id'])[_0x47a63e(0x2e4)](async()=>{const _0x27d8af=_0x47a63e;if(pid[_0x4f8b67])pid[_0x4f8b67][_0x27d8af(0x274)]({'function':_0x27d8af(0x31d),'args':null});}),tgBot[_0x47a63e(0x3a0)](_0x47a63e(0x2b3));});}else{const _0x1f6083=_0x460771[0x0]['botID'];if(pid[_0x1f6083])pid[_0x1f6083][_0x6211db(0x274)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x5482c1(0x2e7)](/\/update/,async _0x2a0090=>{const _0xee1b45=_0x5482c1;if(!validateTelegram(_0x2a0090))return;tgBot[_0xee1b45(0x3a0)]('callback_query'),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x2a0090['chat']['id'],_0xee1b45(0x37c))[_0xee1b45(0x223)](_0x5c34c4=>{telegramError(_0x5c34c4);});else!validInstallation?tgBot[_0xee1b45(0x2a1)](_0x2a0090[_0xee1b45(0x361)]['id'],_0xee1b45(0x23f))[_0xee1b45(0x223)](_0x11eac2=>{telegramError(_0x11eac2);}):(tgBot[_0xee1b45(0x2a1)](_0x2a0090[_0xee1b45(0x361)]['id'],_0xee1b45(0x317),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0xee1b45(0x26a)},{'text':'No','callback_data':'no'}]]}})[_0xee1b45(0x223)](_0x24b9eb=>{telegramError(_0x24b9eb);}),tgBot['on'](_0xee1b45(0x2b3),async _0xb91d74=>{const _0x3db606=_0xee1b45,_0xfe031f=_0xb91d74[_0x3db606(0x270)],_0x28ab85=_0xb91d74[_0x3db606(0x3b0)];tgBot['answerCallbackQuery'](_0xb91d74['id'])[_0x3db606(0x2e4)](async()=>{const _0x457865=_0x3db606;_0xfe031f=='yes'&&(await tgBot['sendMessage'](_0x28ab85['chat']['id'],_0x457865(0x34c))[_0x457865(0x223)](_0x4219cf=>{telegramError(_0x4219cf);}),updateBB(_0x457865(0x32e))),_0xfe031f=='no'&&await tgBot[_0x457865(0x2a1)](_0x28ab85['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')['catch'](_0x3250ed=>{telegramError(_0x3250ed);});}),tgBot[_0x3db606(0x3a0)](_0x3db606(0x2b3));}));}),tgBot['onText'](/\/reinstall/,async _0x5e99f0=>{const _0x25ab9f=_0x5482c1;if(!validateTelegram(_0x5e99f0))return;tgBot[_0x25ab9f(0x3a0)](_0x25ab9f(0x2b3)),!validInstallation?tgBot[_0x25ab9f(0x2a1)](_0x5e99f0[_0x25ab9f(0x361)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0x25ab9f(0x223)](_0x1027ab=>{telegramError(_0x1027ab);}):(tgBot[_0x25ab9f(0x2a1)](_0x5e99f0['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x25ab9f(0x257),'callback_data':_0x25ab9f(0x26a)},{'text':'No','callback_data':'no'}]]}})[_0x25ab9f(0x223)](_0x313a8d=>{telegramError(_0x313a8d);}),tgBot['on'](_0x25ab9f(0x2b3),async _0x1dd91e=>{const _0x49a3dd=_0x25ab9f,_0x1e2713=_0x1dd91e[_0x49a3dd(0x270)],_0x43c067=_0x1dd91e[_0x49a3dd(0x3b0)];tgBot[_0x49a3dd(0x20a)](_0x1dd91e['id'])[_0x49a3dd(0x2e4)](async()=>{const _0x1e3bb1=_0x49a3dd;_0x1e2713==_0x1e3bb1(0x26a)&&(await tgBot[_0x1e3bb1(0x2a1)](_0x43c067[_0x1e3bb1(0x361)]['id'],_0x1e3bb1(0x294))[_0x1e3bb1(0x223)](_0x51baee=>{telegramError(_0x51baee);}),updateBB(_0x1e3bb1(0x27b))),_0x1e2713=='no'&&await tgBot[_0x1e3bb1(0x2a1)](_0x43c067['chat']['id'],_0x1e3bb1(0x336))[_0x1e3bb1(0x223)](_0xa274a9=>{telegramError(_0xa274a9);});}),tgBot['removeListener'](_0x49a3dd(0x2b3));}));}),tgBot[_0x5482c1(0x2e7)](/\/toggle/,_0x17d1bc=>{const _0x5b0abc=_0x5482c1;if(!validateTelegram(_0x17d1bc))return;tgBot['removeListener']('callback_query');const _0x2970b1=getBotsWithMode();if(_0x2970b1[_0x5b0abc(0x275)]==0x0)tgBot['sendMessage'](_0x17d1bc[_0x5b0abc(0x361)]['id'],_0x5b0abc(0x386))[_0x5b0abc(0x223)](_0x5bbcb6=>{telegramError(_0x5bbcb6);});else{let _0x55a8d7=[],_0x14285a=[];const _0x21b7e4=0x2;let _0x3638e7=0x0;_0x2970b1[_0x5b0abc(0x227)]((_0x57b1ac,_0x345c34)=>{const _0x5d87f9=_0x5b0abc;if(_0x345c34%_0x21b7e4==0x0)_0x14285a=[];_0x14285a['push']({'text':_0x5d87f9(0x3c5)+_0x57b1ac[_0x5d87f9(0x344)]+'\x20('+_0x57b1ac['mode']+')','callback_data':_0x57b1ac['botID']}),_0x345c34%_0x21b7e4==0x0&&(_0x55a8d7[_0x3638e7]=_0x14285a,_0x3638e7++);}),tgBot[_0x5b0abc(0x2a1)](_0x17d1bc[_0x5b0abc(0x361)]['id'],_0x5b0abc(0x241),{'reply_markup':{'inline_keyboard':_0x55a8d7}})['catch'](_0x5a1bfb=>{telegramError(_0x5a1bfb);}),tgBot['on'](_0x5b0abc(0x2b3),async _0x15fc52=>{const _0x29c266=_0x5b0abc,_0x1402eb=_0x15fc52[_0x29c266(0x270)],_0x11ecef=_0x15fc52[_0x29c266(0x3b0)];tgBot[_0x29c266(0x20a)](_0x15fc52['id'])[_0x29c266(0x2e4)](async()=>{const _0x52f44c=_0x29c266,_0x1f47b5=_0x2970b1['find'](_0x17c479=>_0x17c479['botID']==_0x1402eb),_0x43fdd5=_0x1f47b5['mode']=='auto'?_0x52f44c(0x2a2):_0x52f44c(0x28c);tgBot[_0x52f44c(0x2a1)](_0x11ecef['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x1402eb+'\x20to\x20'+_0x43fdd5+'\x20mode')[_0x52f44c(0x223)](_0x225b84=>{telegramError(_0x225b84);}),toggleBotMode(_0x1402eb);}),tgBot['removeListener'](_0x29c266(0x2b3));});}}),tgBot[_0x5482c1(0x2e7)](/\/names/,_0x1fabe0=>{const _0x27d056=_0x5482c1;if(!validateTelegram(_0x1fabe0))return;let _0x3304a5='';config[_0x27d056(0x227)](_0x188561=>{const _0x123572=_0x27d056;_0x3304a5+='Bot\x20'+_0x188561[_0x123572(0x344)]+':\x20'+_0x188561[_0x123572(0x2d9)]+'\x0a';}),tgBot[_0x27d056(0x2a1)](_0x1fabe0[_0x27d056(0x361)]['id'],_0x3304a5,{'parse_mode':_0x27d056(0x1fa)})[_0x27d056(0x223)](_0x3ed1d7=>{telegramError(_0x3ed1d7);});}),tgBot[_0x5482c1(0x2e7)](/\/disable/,_0x35c68e=>{const _0x5482ac=_0x5482c1;if(!validateTelegram(_0x35c68e))return;tgBot['sendMessage'](_0x35c68e[_0x5482ac(0x361)]['id'],_0x5482ac(0x2ec))['catch'](_0x2c91f6=>{telegramError(_0x2c91f6);}),updateSetting(_0x5482ac(0x1f5),![]);}),tgBot[_0x5482c1(0x2e7)](/\/help/,_0x4177fe=>{const _0x4e3dc1=_0x5482c1;if(!validateTelegram(_0x4177fe))return;tgBot[_0x4e3dc1(0x2a1)](_0x4177fe[_0x4e3dc1(0x361)]['id'],_0x233b86)['catch'](_0x5186c9=>{telegramError(_0x5186c9);});}),tgBot['on'](_0x5482c1(0x346),_0x1ec3d5=>{const _0x1beca8=_0x5482c1;_0x1ec3d5['toString']()[_0x1beca8(0x331)](_0x1beca8(0x240))&&(logger['full'](_0x1beca8(0x38e)),tgBot[_0x1beca8(0x301)](),tgBot=null,io['to'](_0x1beca8(0x282))[_0x1beca8(0x2a7)](_0x1beca8(0x3b7),'Invalid\x20Telegram\x20token'));}),process[_0x5482c1(0x2f6)]('SIGINT',()=>{const _0x337866=_0x5482c1;if(tgBot)tgBot[_0x337866(0x301)]();process[_0x337866(0x333)](0x1);}),process[_0x5482c1(0x2f6)](_0x5482c1(0x276),()=>{const _0x5ddbca=_0x5482c1;if(tgBot)tgBot['stopPolling']();process[_0x5ddbca(0x333)](0x1);});}}function disableTelegram(){const _0x5b91b3=_0x5e87da;tgBot&&(tgBot[_0x5b91b3(0x301)](),tgBot=null);}function sendTelegram(_0x57f6bc,_0x153872){const _0xa1bd11=_0x5e87da;if(settings[_0xa1bd11(0x1f5)]){if(settings['telegramEvents']==_0xa1bd11(0x34f)||(_0x153872['type']=='error'||_0x153872[_0xa1bd11(0x2c7)]=='warning'||_0x153872[_0xa1bd11(0x2c7)]==_0xa1bd11(0x37a))&&settings[_0xa1bd11(0x203)]=='alerts'||_0x153872['type']==_0xa1bd11(0x283)&&settings['telegramEvents']==_0xa1bd11(0x319)){if(tgBot&&settings[_0xa1bd11(0x2ca)]){if(_0x153872[_0xa1bd11(0x35d)])tgBot[_0xa1bd11(0x2a1)](settings[_0xa1bd11(0x2ca)],_0x153872[_0xa1bd11(0x2d9)]+_0xa1bd11(0x256)+_0x153872['event'])['catch'](_0x1657d9=>{telegramError(_0x1657d9);});else tgBot[_0xa1bd11(0x2a1)](settings[_0xa1bd11(0x2ca)],_0xa1bd11(0x3c5)+_0x57f6bc+_0xa1bd11(0x256)+_0x153872[_0xa1bd11(0x29b)])['catch'](_0x32d51f=>{telegramError(_0x32d51f);});}}}}async function sendTelegramMsg(_0x56bb4e,_0x1ee4c3=_0x5e87da(0x1fa)){const _0xc6308e=_0x5e87da;return settings[_0xc6308e(0x1f5)]&&tgBot&&settings[_0xc6308e(0x2ca)]?(await tgBot[_0xc6308e(0x2a1)](settings['telegramChatId'],_0x56bb4e,{'parse_mode':_0x1ee4c3})[_0xc6308e(0x223)](_0x516f0e=>{telegramError(_0x516f0e);}),!![]):![];}function getDeviceWithIp(_0x2db21d){const _0x570741=_0x5e87da;return devices[_0x570741(0x2d3)](_0x2a6188=>_0x2a6188['ip']===_0x2db21d);}function temporaryAccess2FA(_0x474e40,_0x6af995){const _0xd2647a=_0x5e87da;let _0x561e08=new Date(),_0x690385=![];if(lastIpApproval){if(_0x561e08-lastIpApproval<0x1388)_0x690385=!![];}lastIpApproval=new Date();if(_0x690385)return;tgBot&&settings[_0xd2647a(0x2ca)]&&(tgBot[_0xd2647a(0x3a0)]('callback_query'),tgBot[_0xd2647a(0x2a1)](settings['telegramChatId'],_0xd2647a(0x22e)+normalizeIP(_0x6af995)[_0xd2647a(0x3b1)]+_0xd2647a(0x219),{'parse_mode':_0xd2647a(0x1fa),'reply_markup':{'inline_keyboard':[[{'text':_0xd2647a(0x220),'callback_data':'5'},{'text':_0xd2647a(0x2c6),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0xd2647a(0x330),'callback_data':_0xd2647a(0x330)}]]}})[_0xd2647a(0x223)](_0x156c23=>{telegramError(_0x156c23);}),tgBot['on'](_0xd2647a(0x2b3),async _0x57c03d=>{const _0x588184=_0xd2647a,_0x247487=_0x57c03d[_0x588184(0x270)],_0x7628f8=_0x57c03d[_0x588184(0x3b0)];tgBot[_0x588184(0x20a)](_0x57c03d['id'])[_0x588184(0x2e4)](async()=>{const _0x148b86=_0x588184;devices[_0x474e40][_0x148b86(0x2ce)]={'clientip':_0x6af995,'timestamp':new Date()[_0x148b86(0x3a2)](),'expiry':_0x247487},_0x247487!=_0x148b86(0x330)?(await tgBot['sendMessage'](_0x7628f8[_0x148b86(0x361)]['id'],_0x148b86(0x286)+_0x247487+_0x148b86(0x2ef),{'parse_mode':_0x148b86(0x1fa)})['catch'](_0x5a5c16=>{telegramError(_0x5a5c16);}),io['to'](_0x474e40)['emit'](_0x148b86(0x25e),{'access':{'allow':![],'reason':_0x148b86(0x209),'token':null}})):(await tgBot['sendMessage'](_0x7628f8[_0x148b86(0x361)]['id'],'Temporary\x20access\x20rejected')[_0x148b86(0x223)](_0x52adf5=>{telegramError(_0x52adf5);}),io['to'](_0x474e40)[_0x148b86(0x2a7)](_0x148b86(0x25e),{'access':{'allow':![],'reason':_0x148b86(0x3ae),'token':null}}));}),tgBot[_0x588184(0x3a0)](_0x588184(0x2b3));}));}function loginAccess2FA(_0x26e1f7,_0x3b618d){const _0x1236b5=_0x5e87da;tgBot&&settings[_0x1236b5(0x2ca)]&&(tgBot[_0x1236b5(0x3a0)](_0x1236b5(0x2b3)),tgBot[_0x1236b5(0x2a1)](settings['telegramChatId'],_0x1236b5(0x341)+normalizeIP(_0x3b618d)[_0x1236b5(0x3b1)]+_0x1236b5(0x219),{'parse_mode':_0x1236b5(0x1fa),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x1236b5(0x330),'callback_data':_0x1236b5(0x330)}]]}})['catch'](_0x319f5b=>{telegramError(_0x319f5b);}),tgBot['on'](_0x1236b5(0x2b3),async _0x426b0e=>{const _0x530f5a=_0x1236b5,_0x4b3563=_0x426b0e[_0x530f5a(0x270)],_0x3ee0ab=_0x426b0e[_0x530f5a(0x3b0)];tgBot[_0x530f5a(0x20a)](_0x426b0e['id'])[_0x530f5a(0x2e4)](async()=>{const _0x5af539=_0x530f5a;devices[_0x26e1f7]['telegram2FaApproval']={'clientip':_0x3b618d,'timestamp':new Date()[_0x5af539(0x3a2)](),'expiry':_0x4b3563},_0x4b3563!=_0x5af539(0x330)?(await tgBot[_0x5af539(0x2a1)](_0x3ee0ab[_0x5af539(0x361)]['id'],_0x5af539(0x348),{'parse_mode':_0x5af539(0x1fa)})[_0x5af539(0x223)](_0x1782eb=>{telegramError(_0x1782eb);}),io['to'](_0x26e1f7)['emit']('status',{'access':{'allow':![],'reason':_0x5af539(0x209),'token':null}})):(await tgBot['sendMessage'](_0x3ee0ab[_0x5af539(0x361)]['id'],_0x5af539(0x1ed))[_0x5af539(0x223)](_0x22cbba=>{telegramError(_0x22cbba);}),io['to'](_0x26e1f7)[_0x5af539(0x2a7)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x530f5a(0x3a0)](_0x530f5a(0x2b3));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x11faf3=_0x5e87da;return dbConfig[_0x11faf3(0x329)]('bots')[_0x11faf3(0x39c)](_0x11faf3(0x344))[_0x11faf3(0x390)]({'status':_0x11faf3(0x328)})['value']()||[];}function getDisabledBots(){const _0x43a514=_0x5e87da;return dbConfig[_0x43a514(0x329)](_0x43a514(0x290))[_0x43a514(0x39c)](_0x43a514(0x344))[_0x43a514(0x390)]({'status':_0x43a514(0x306)})[_0x43a514(0x261)]()||[];}function getBotAttributes(_0x2818e3){const _0x77c925=_0x5e87da;let _0x2bc36b={};const _0x2aacba=configpath+_0x77c925(0x2bd)+_0x2818e3+_0x77c925(0x2e8),_0xd910ba=fs[_0x77c925(0x354)](_0x2aacba);if(_0xd910ba){const _0x25e92b=fs[_0x77c925(0x22f)](_0x2aacba);try{const _0x1515f1=JSON['parse'](_0x25e92b),_0x2535a1=_0x1515f1?_0x1515f1['bot'][0x0][_0x77c925(0x31e)]:![];_0x2bc36b['mode']=_0x2535a1?_0x77c925(0x28c):_0x77c925(0x2a2),_0x2bc36b[_0x77c925(0x2d9)]=_0x1515f1?_0x1515f1[_0x77c925(0x2d7)][0x0][_0x77c925(0x2d9)]:_0x77c925(0x3c5)+_0x2818e3;}catch(_0x48fd09){_0x2bc36b['mode']='manual',_0x2bc36b['botname']=_0x77c925(0x3c5)+_0x2818e3;}}else _0x2bc36b['mode']=_0x77c925(0x2a2),_0x2bc36b[_0x77c925(0x2d9)]=_0x77c925(0x3c5)+_0x2818e3;return _0x2bc36b;}function getBotsWithMode(){const _0x2a2608=_0x5e87da,_0x2b05ef=dbConfig[_0x2a2608(0x329)](_0x2a2608(0x290))[_0x2a2608(0x39c)](_0x2a2608(0x344))[_0x2a2608(0x261)]()||[];return _0x2b05ef[_0x2a2608(0x227)](_0x3723fb=>{const _0x5e8a6c=_0x2a2608;let _0x171f5a=getBotAttributes(_0x3723fb[_0x5e8a6c(0x344)]);_0x3723fb['mode']=_0x171f5a[_0x5e8a6c(0x249)];}),_0x2b05ef;}function getBotExchanges(){const _0x3ea3ec=_0x5e87da;let _0x4d5185=[];const _0x46dc30=dbConfig[_0x3ea3ec(0x329)]('bots')[_0x3ea3ec(0x39c)](_0x3ea3ec(0x344))[_0x3ea3ec(0x261)]()||[];_0x46dc30['forEach'](_0x56ca89=>{const _0x591105=_0x3ea3ec;if(_0x56ca89[_0x591105(0x25e)]==_0x591105(0x328)){const _0x4ef737=configpath+'bot-'+_0x56ca89[_0x591105(0x344)]+'-config.json',_0x136137=fs[_0x591105(0x354)](_0x4ef737);let _0x118c82;if(_0x136137){const _0x421471=fs[_0x591105(0x22f)](_0x4ef737);try{const _0x30f4ff=JSON[_0x591105(0x381)](_0x421471);_0x118c82=_0x30f4ff?_0x30f4ff[_0x591105(0x2d7)][0x0][_0x591105(0x30a)]:null;}catch(_0x3d1dca){}}if(_0x118c82)_0x4d5185[_0x591105(0x22b)](_0x118c82);}});const _0x5e9e8f=[...new Set(_0x4d5185)][_0x3ea3ec(0x398)]();return _0x5e9e8f;}async function initUser(){const _0x3e4b01=_0x5e87da;if(!settings[_0x3e4b01(0x358)]){const _0x38be39=uuidRandom();mixpanel['alias'](_0x38be39),updateSetting(_0x3e4b01(0x358),_0x38be39);}}async function initSecure(){const _0x1aff11=_0x5e87da;let _0x432bb0=getSecure();if(!_0x432bb0[_0x1aff11(0x318)](_0x1aff11(0x215))){let _0x1f6dc2=await generateKeys();_0x432bb0[_0x1aff11(0x2ed)]=_0x1f6dc2['publicKey'],_0x432bb0[_0x1aff11(0x397)]=_0x1f6dc2['privateKey'],_0x432bb0['secret']=crypto['randomBytes'](0x20)[_0x1aff11(0x36d)](_0x1aff11(0x2ea));;storeSecure(_0x432bb0);}}function getSettings(){const _0x7f5581=_0x5e87da;return dbSettings['get'](_0x7f5581(0x2f1))[_0x7f5581(0x261)]()||{};}function getSecure(){const _0x175464=_0x5e87da;return dbSecure[_0x175464(0x329)](_0x175464(0x26c))[_0x175464(0x261)]()||{};}function getBlacklist(){const _0x538b88=_0x5e87da;return dbSecure['get'](_0x538b88(0x1f3))[_0x538b88(0x261)]()||[];}function broadcastToBots(_0x148f27,_0x50335d){config['forEach'](_0x1be8d0=>{const _0x5b68b4=_0x2921;if(_0x1be8d0[_0x5b68b4(0x25e)]==_0x5b68b4(0x328)&&_0x1be8d0[_0x5b68b4(0x2d6)]==_0x5b68b4(0x337)||_0x1be8d0['status']==_0x5b68b4(0x34b)&&_0x1be8d0[_0x5b68b4(0x2d6)]=='running'){if(pid[_0x1be8d0[_0x5b68b4(0x344)]])pid[_0x1be8d0['botID']]['send']({[_0x148f27]:_0x50335d});}});}function storeSettings(_0x54ba6c,_0x495604=![]){const _0x3dd10c=_0x5e87da;_0x54ba6c={...settings,..._0x54ba6c};if(_0x495604&&_0x54ba6c['bbPassword']!=_0x3dd10c(0x326)&&_0x54ba6c['bbPassword']!=_0x3dd10c(0x247)&&_0x54ba6c['bbPassword']!=''){const _0x4e8995=crypt[_0x3dd10c(0x246)](secure[_0x3dd10c(0x397)],_0x54ba6c[_0x3dd10c(0x260)])[_0x3dd10c(0x3b0)]['split']('@')[0x0],_0x48cc95=bcrypt[_0x3dd10c(0x2b5)](_0x4e8995,saltRounds);_0x54ba6c={..._0x54ba6c,'bbPassword':_0x48cc95};}if(_0x495604&&_0x54ba6c[_0x3dd10c(0x26d)]!=_0x3dd10c(0x326)&&_0x54ba6c[_0x3dd10c(0x26d)]!='***'&&_0x54ba6c[_0x3dd10c(0x26d)]!=''){const _0x6ebfec=crypt[_0x3dd10c(0x246)](secure[_0x3dd10c(0x397)],_0x54ba6c[_0x3dd10c(0x26d)])[_0x3dd10c(0x3b0)][_0x3dd10c(0x1f4)]('@')[0x0];_0x54ba6c={..._0x54ba6c,'telegramToken':_0x6ebfec};}const _0x91e751=_0x54ba6c[_0x3dd10c(0x26d)]!=_0x3dd10c(0x326)&&_0x54ba6c['telegramToken']!=settings[_0x3dd10c(0x26d)]||_0x54ba6c[_0x3dd10c(0x33a)]!=settings[_0x3dd10c(0x33a)],_0x13b618=_0x54ba6c['telegramToken']==''||_0x54ba6c['telegramUsername']=='';if(_0x91e751)_0x54ba6c[_0x3dd10c(0x203)]=_0x3dd10c(0x34f);for(const [_0x26f8ea,_0x586bdd]of Object[_0x3dd10c(0x1e8)](_0x54ba6c)){if(_0x26f8ea==_0x3dd10c(0x26d)&&_0x586bdd==_0x3dd10c(0x326)){_0x54ba6c['telegramToken']=settings[_0x3dd10c(0x26d)];continue;};if(_0x26f8ea=='bbPassword'&&_0x586bdd=='************'){_0x54ba6c[_0x3dd10c(0x260)]=settings[_0x3dd10c(0x260)];continue;};dbSettings[_0x3dd10c(0x269)]('settings.'+_0x26f8ea,_0x586bdd)[_0x3dd10c(0x244)]();}settings=_0x54ba6c,io['to']('botmanager')[_0x3dd10c(0x2a7)]('settings',cleanSettings()),broadcastToBots(_0x3dd10c(0x2d8),settings[_0x3dd10c(0x2d8)]),broadcastToBots('onepagemode',settings[_0x3dd10c(0x2e5)]);if(_0x91e751&&!_0x13b618)initTelegram();if(_0x91e751&&_0x13b618)disableTelegram();getAllClients()[_0x3dd10c(0x227)](_0x494745=>{const _0x3a6568=_0x3dd10c;getSocket(_0x494745['id'])['emit'](_0x3a6568(0x25e),{'access':{'allow':![],'reason':_0x3a6568(0x209),'token':null}});});}function updateSetting(_0x249936,_0x4bb130){const _0x410d0a=_0x5e87da;dbSettings['set'](_0x410d0a(0x211)+_0x249936,_0x4bb130)[_0x410d0a(0x244)](),settings=getSettings(),io['to'](_0x410d0a(0x282))[_0x410d0a(0x2a7)]('settings',cleanSettings());}function storeSecure(_0x3f0e29){const _0x84a7d6=_0x5e87da;dbSecure[_0x84a7d6(0x329)]('secure')[_0x84a7d6(0x22b)](_0x3f0e29)[_0x84a7d6(0x244)](),secure=_0x3f0e29;}function addBlacklist(_0x16c5f3){const _0xdbbbad=_0x5e87da;cleanBlacklist();let _0x5ca0b8;devices[_0x16c5f3][_0xdbbbad(0x2ce)]?_0x5ca0b8=Math[_0xdbbbad(0x3a9)](devices[_0x16c5f3]['telegramIpApproval'][_0xdbbbad(0x2bf)],loginExpiry):_0x5ca0b8=loginExpiry,dbSecure['get'](_0xdbbbad(0x1f3))[_0xdbbbad(0x22b)]({'expiry':new Date()['getTime']()+_0x5ca0b8*0x3c*0x3e8,'token':devices[_0x16c5f3]['access'][_0xdbbbad(0x387)]})['write'](),blacklist=dbSecure[_0xdbbbad(0x329)](_0xdbbbad(0x1f3))[_0xdbbbad(0x261)]();}function cleanBlacklist(){const _0x39a925=_0x5e87da;let _0x1d05b6=dbSecure[_0x39a925(0x329)]('blacklist')[_0x39a925(0x21b)]()[_0x39a925(0x261)](),_0x11f54c=new Date()[_0x39a925(0x3a2)]();_0x1d05b6[_0x39a925(0x227)](_0x474eb0=>{const _0x3842f7=_0x39a925;_0x474eb0[_0x3842f7(0x2bf)]<_0x11f54c&&dbSecure[_0x3842f7(0x329)](_0x3842f7(0x1f3))['remove']({'expiry':_0x474eb0[_0x3842f7(0x2bf)]})[_0x3842f7(0x244)]();});}function initStates(){const _0x3e2d6e=_0x5e87da;let _0xf895de=getConfiguration();_0xf895de[_0x3e2d6e(0x227)](_0x45d3ad=>{const _0x52b6a6=_0x3e2d6e;_0x45d3ad['live']=_0x52b6a6(0x3b8);}),storeConfiguration(_0xf895de);}function onKeys(){const _0x3ce443=new RSA();return new Promise(_0x498a98=>{const _0x2aabcb=_0x2921;_0x3ce443['generateKeyPairAsync']()[_0x2aabcb(0x2e4)](_0xf1f78d=>{_0x498a98(_0xf1f78d);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1dbba0=_0x5e87da;let _0x376139=getSettings(),_0x4ff532=![];!_0x376139['hasOwnProperty'](_0x1dbba0(0x2a3))&&(_0x376139[_0x1dbba0(0x2a3)]=0x0,_0x4ff532=!![]);!_0x376139[_0x1dbba0(0x318)](_0x1dbba0(0x1ec))&&(_0x376139[_0x1dbba0(0x1ec)]=0x0,_0x4ff532=!![]);!_0x376139[_0x1dbba0(0x318)](_0x1dbba0(0x208))&&(_0x376139[_0x1dbba0(0x208)]='0.0.0',_0x4ff532=!![]);!_0x376139[_0x1dbba0(0x318)](_0x1dbba0(0x2e5))&&(_0x376139[_0x1dbba0(0x2e5)]=![],_0x4ff532=!![]);if(_0x4ff532)storeSettings(_0x376139);try{fs[_0x1dbba0(0x2b7)](configbackuppath,{'withFileTypes':!![]})[_0x1dbba0(0x227)](_0x5698b4=>{const _0x288697=_0x1dbba0;if(!_0x5698b4[_0x288697(0x218)]()){if(!_0x5698b4[_0x288697(0x388)]['startsWith'](_0x288697(0x22c)))fs['unlinkSync'](configbackuppath+_0x5698b4[_0x288697(0x388)]);}else fs[_0x288697(0x3a6)](configbackuppath+_0x5698b4[_0x288697(0x388)],{'recursive':!![]});});}catch(_0x40b282){logger[_0x1dbba0(0x32c)](_0x1dbba0(0x23c),_0x40b282);}}function storeConfiguration(_0x3569fe){const _0x5357c5=_0x5e87da;dbConfig[_0x5357c5(0x329)]('bots')[_0x5357c5(0x373)]()[_0x5357c5(0x244)](),_0x3569fe[_0x5357c5(0x227)](_0x5a7880=>{const _0xcec001=_0x5357c5;delete _0x5a7880[_0xcec001(0x249)];}),dbConfig['get'](_0x5357c5(0x290))['push'](..._0x3569fe)[_0x5357c5(0x244)](),config=_0x3569fe;}function resetPassword(){const _0x27381=_0x5e87da;tgBot&&settings[_0x27381(0x2ca)]&&(tgBot[_0x27381(0x3a0)](_0x27381(0x2b3)),tgBot[_0x27381(0x2a1)](settings[_0x27381(0x2ca)],_0x27381(0x31f),{'parse_mode':_0x27381(0x1fa),'reply_markup':{'inline_keyboard':[[{'text':_0x27381(0x26a),'callback_data':_0x27381(0x26a)},{'text':'no','callback_data':'no'}]]}})[_0x27381(0x223)](_0x40d4e3=>{telegramError(_0x40d4e3);}),tgBot['on']('callback_query',async _0x321218=>{const _0x293be4=_0x27381,_0x4e423f=_0x321218['data'],_0x53c76c=_0x321218[_0x293be4(0x3b0)];tgBot[_0x293be4(0x20a)](_0x321218['id'])[_0x293be4(0x2e4)](async()=>{const _0x188f60=_0x293be4;if(_0x4e423f!='no'){const _0x51a285=0xf,_0x3d51d4=_0x188f60(0x364),_0x4d3551=Array[_0x188f60(0x30b)](crypto[_0x188f60(0x308)](new Uint32Array(_0x51a285)))[_0x188f60(0x278)](_0x5f531c=>_0x3d51d4[_0x5f531c%_0x3d51d4[_0x188f60(0x275)]])[_0x188f60(0x385)](''),_0x4779f8=bcrypt['hashSync'](_0x4d3551,saltRounds);storeSettings({'bbPassword':_0x4779f8}),await tgBot[_0x188f60(0x2a1)](_0x53c76c[_0x188f60(0x361)]['id'],_0x188f60(0x338)+_0x4d3551,{'parse_mode':_0x188f60(0x1fa)})['catch'](_0x146052=>{telegramError(_0x146052);});}else await tgBot[_0x188f60(0x2a1)](_0x53c76c[_0x188f60(0x361)]['id'],_0x188f60(0x239))[_0x188f60(0x223)](_0x57359c=>{telegramError(_0x57359c);});}),tgBot['removeListener'](_0x293be4(0x2b3));}));}async function confirmRestore(_0x4b69f,_0x264668){const _0x548d8d=_0x5e87da;io['to'](_0x548d8d(0x282))[_0x548d8d(0x2a7)](_0x548d8d(0x3b7),_0x548d8d(0x311),_0x548d8d(0x37a)),tgBot&&settings[_0x548d8d(0x2ca)]&&(tgBot['removeListener'](_0x548d8d(0x2b3)),await tgBot['sendMessage'](settings[_0x548d8d(0x2ca)],_0x548d8d(0x231),{'parse_mode':_0x548d8d(0x1fa),'reply_markup':{'inline_keyboard':[[{'text':_0x548d8d(0x26a),'callback_data':_0x548d8d(0x26a)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4f598a=>{telegramError(_0x4f598a);}),tgBot['on'](_0x548d8d(0x2b3),async _0x4ebd1a=>{const _0x4d7d5d=_0x548d8d,_0x43ae4d=_0x4ebd1a[_0x4d7d5d(0x270)],_0x4b4d17=_0x4ebd1a['message'];tgBot[_0x4d7d5d(0x20a)](_0x4ebd1a['id'])[_0x4d7d5d(0x2e4)](async()=>{const _0x369a14=_0x4d7d5d;_0x43ae4d==_0x369a14(0x26a)?(await tgBot['sendMessage'](_0x4b4d17['chat']['id'],_0x369a14(0x2e3),{'parse_mode':_0x369a14(0x1fa)})['catch'](_0x9e322=>{telegramError(_0x9e322);}),unzipFile(_0x4b69f,_0x264668)):(logger[_0x369a14(0x32c)](_0x369a14(0x253)),await tgBot[_0x369a14(0x2a1)](_0x4b4d17[_0x369a14(0x361)]['id'],_0x369a14(0x253))[_0x369a14(0x223)](_0x47d104=>{telegramError(_0x47d104);}));}),tgBot[_0x4d7d5d(0x3a0)]('callback_query');}));}function getServerTime(){const _0x4a1be1=_0x5e87da,_0x3e5718=new Date();return _0x3e5718[_0x4a1be1(0x2a4)]()+'/'+(_0x3e5718[_0x4a1be1(0x236)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x3e5718[_0x4a1be1(0x2b4)]()[_0x4a1be1(0x36d)]()[_0x4a1be1(0x1ea)](0x2,'0')+'\x20'+_0x3e5718[_0x4a1be1(0x26e)]()[_0x4a1be1(0x36d)]()[_0x4a1be1(0x1ea)](0x2,'0')+':'+_0x3e5718['getMinutes']()[_0x4a1be1(0x36d)]()[_0x4a1be1(0x1ea)](0x2,'0')+':'+_0x3e5718['getSeconds']()[_0x4a1be1(0x36d)]()[_0x4a1be1(0x1ea)](0x2,'0');}function getTimeStamp(){const _0x456f41=_0x5e87da,_0xeffa72=shiftedTime();return _0xeffa72['getFullYear']()+'/'+(_0xeffa72['getMonth']()+0x1)[_0x456f41(0x36d)]()[_0x456f41(0x1ea)](0x2,'0')+'/'+_0xeffa72[_0x456f41(0x2b4)]()[_0x456f41(0x36d)]()['padStart'](0x2,'0')+'\x20'+_0xeffa72['getHours']()[_0x456f41(0x36d)]()['padStart'](0x2,'0')+':'+_0xeffa72['getMinutes']()[_0x456f41(0x36d)]()['padStart'](0x2,'0')+':'+_0xeffa72['getSeconds']()['toString']()[_0x456f41(0x1ea)](0x2,'0');}function getCleanTimeStamp(){const _0x54e28e=_0x5e87da,_0x4711bd=shiftedTime();return _0x4711bd[_0x54e28e(0x2a4)]()+(_0x4711bd[_0x54e28e(0x236)]()+0x1)[_0x54e28e(0x36d)]()['padStart'](0x2,'0')+_0x4711bd[_0x54e28e(0x2b4)]()[_0x54e28e(0x36d)]()[_0x54e28e(0x1ea)](0x2,'0')+'-'+_0x4711bd[_0x54e28e(0x26e)]()[_0x54e28e(0x36d)]()[_0x54e28e(0x1ea)](0x2,'0')+_0x4711bd[_0x54e28e(0x29f)]()[_0x54e28e(0x36d)]()[_0x54e28e(0x1ea)](0x2,'0')+_0x4711bd[_0x54e28e(0x210)]()[_0x54e28e(0x36d)]()[_0x54e28e(0x1ea)](0x2,'0');}function shiftedTime(){const _0xcb0339=_0x5e87da,_0x837312=new Date();let _0x419b43=_0x837312;if(settings[_0xcb0339(0x2d8)]&&settings['timeshift']!==0x0)_0x419b43=fns[_0xcb0339(0x287)](_0x837312,{'hours':settings['timeshift']});return _0x419b43;}function startScheduler(){const _0x21979b=_0x5e87da,_0x1749b9=new Date()[_0x21979b(0x229)](),_0x19ed9a=shiftedTime()[_0x21979b(0x26e)]();_0x19ed9a==0x4&&backupConfigFiles();_0x19ed9a==0x0&&rotateLogFiles();_0x1749b9%0x6==0x0&&triggerAnalytics();_0x1749b9%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x5c51fa){const _0x3a6e0f=_0x5e87da;logger[_0x3a6e0f(0x32c)]('Restore\x20backup\x20file\x20'+_0x5c51fa);const _0x19f090=getBotsWithMode();_0x19f090[_0x3a6e0f(0x275)]>0x0?confirmRestore(configbackuppath,_0x5c51fa):unzipFile(configbackuppath,_0x5c51fa);}async function getBackupFiles(_0x479ecf=null){const _0x36ca10=_0x5e87da;let _0x6aa133=[],_0x39f2a2=fs[_0x36ca10(0x2b7)](configbackuppath,{'withFileTypes':!![]});_0x39f2a2['sort']((_0x552877,_0x3ac358)=>_0x552877[_0x36ca10(0x388)]<_0x3ac358[_0x36ca10(0x388)]?0x1:_0x3ac358[_0x36ca10(0x388)]<_0x552877[_0x36ca10(0x388)]?-0x1:0x0),_0x39f2a2[_0x36ca10(0x227)](_0xda681f=>{const _0x4ba5d3=_0x36ca10;if(!_0xda681f[_0x4ba5d3(0x218)]()&&_0xda681f['name'][_0x4ba5d3(0x205)]('backup-full@')&&_0xda681f[_0x4ba5d3(0x388)]['endsWith'](_0x4ba5d3(0x2ff))){const _0x576a8f=formatDate(fs[_0x4ba5d3(0x20f)](configbackuppath+_0xda681f[_0x4ba5d3(0x388)])[_0x4ba5d3(0x22d)]);_0x6aa133[_0x4ba5d3(0x22b)]({'name':_0xda681f['name'],'mtime':_0x576a8f});}});if(_0x479ecf)io['to'](_0x479ecf)[_0x36ca10(0x2a7)](_0x36ca10(0x289),_0x6aa133);else return _0x6aa133;}async function backupConfigFiles(){const _0x24b929=_0x5e87da;await zipFiles('backup-full');const _0x1ffa19=getCleanTimeStamp();fs[_0x24b929(0x1ff)](zippath+_0x24b929(0x230),configbackuppath+('backup-full@'+_0x1ffa19+_0x24b929(0x2ff)));let _0x2dfb2b=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2dfb2b[_0x24b929(0x398)]((_0xf24f15,_0x4330ef)=>_0xf24f15[_0x24b929(0x388)]<_0x4330ef[_0x24b929(0x388)]?0x1:_0x4330ef[_0x24b929(0x388)]<_0xf24f15['name']?-0x1:0x0),_0x2dfb2b[_0x24b929(0x275)]>maxBackups&&fs[_0x24b929(0x267)](configbackuppath+_0x2dfb2b[_0x2dfb2b[_0x24b929(0x275)]-0x1][_0x24b929(0x388)]);}function rotateLogFiles(){const _0x5a9326=_0x5e87da,_0x12b546=fs[_0x5a9326(0x20f)](logspath+_0x5a9326(0x313)),_0x270107=_0x12b546[_0x5a9326(0x349)]/0x400;if(_0x270107>0x64){let _0x3fb4d1=fs[_0x5a9326(0x2b7)](logspath,{'withFileTypes':!![]});_0x3fb4d1[_0x5a9326(0x398)]((_0x213790,_0x2cbea3)=>_0x213790[_0x5a9326(0x388)]<_0x2cbea3[_0x5a9326(0x388)]?0x1:_0x2cbea3[_0x5a9326(0x388)]<_0x213790[_0x5a9326(0x388)]?-0x1:0x0),_0x3fb4d1[_0x5a9326(0x227)](_0x4d63fa=>{const _0x3eeb3d=_0x5a9326;if(_0x4d63fa[_0x3eeb3d(0x388)]==_0x3eeb3d(0x2d5))fs[_0x3eeb3d(0x1ff)](logspath+_0x4d63fa[_0x3eeb3d(0x388)],logspath+'output-003.log');if(_0x4d63fa[_0x3eeb3d(0x388)]==_0x3eeb3d(0x277))fs[_0x3eeb3d(0x1ff)](logspath+_0x4d63fa[_0x3eeb3d(0x388)],logspath+'output-002.log');_0x4d63fa[_0x3eeb3d(0x388)]==_0x3eeb3d(0x313)&&(fs['copyFileSync'](logspath+_0x4d63fa[_0x3eeb3d(0x388)],logspath+_0x3eeb3d(0x277)),fs[_0x3eeb3d(0x273)](logspath+_0x4d63fa['name'],''));});}}async function zipFiles(_0x393748){const _0x20c16e=_0x5e87da;let _0x2d0272;if(_0x393748==_0x20c16e(0x297))_0x2d0272=logspath;if(_0x393748==_0x20c16e(0x38c))_0x2d0272=configpath;if(_0x393748==_0x20c16e(0x2f8))_0x2d0272=configpath;let _0x16db68=fs[_0x20c16e(0x2b7)](_0x2d0272,{'withFileTypes':!![]});const _0x3d80df=new require(_0x20c16e(0x24f))();_0x16db68[_0x20c16e(0x227)](_0x141c33=>{const _0x333a19=_0x20c16e;if(!_0x141c33[_0x333a19(0x218)]()){let _0x49134f=fs[_0x333a19(0x22f)](_0x2d0272+_0x141c33[_0x333a19(0x388)]);if(_0x393748==_0x333a19(0x38c)){const _0x1def56=/^bot-[0-9]{3}-config.json$/,_0x5eee50=_0x1def56[_0x333a19(0x2f3)](_0x141c33[_0x333a19(0x388)]);if(_0x5eee50){const _0x17c6a4=JSON['parse'](_0x49134f);if(_0x17c6a4[_0x333a19(0x2d7)][0x0]){_0x17c6a4['bot'][0x0][_0x333a19(0x2e0)]=_0x333a19(0x247),_0x17c6a4[_0x333a19(0x2d7)][0x0]['apiSecret']=_0x333a19(0x247);if(_0x17c6a4[_0x333a19(0x2d7)][0x0][_0x333a19(0x228)])_0x17c6a4[_0x333a19(0x2d7)][0x0][_0x333a19(0x228)]=_0x333a19(0x247);}_0x49134f=JSON[_0x333a19(0x234)](_0x17c6a4,null,0x2);}if(_0x141c33[_0x333a19(0x388)]==_0x333a19(0x2e2)){const _0x549724=JSON[_0x333a19(0x381)](_0x49134f);if(_0x549724['settings'][_0x333a19(0x3c2)])_0x549724['settings'][_0x333a19(0x3c2)]=![];if(_0x549724[_0x333a19(0x2f1)][_0x333a19(0x260)])_0x549724['settings'][_0x333a19(0x260)]=_0x333a19(0x247);if(_0x549724[_0x333a19(0x2f1)][_0x333a19(0x26d)])_0x549724['settings'][_0x333a19(0x26d)]=_0x333a19(0x247);if(_0x549724[_0x333a19(0x2f1)]['telegramChatId'])_0x549724[_0x333a19(0x2f1)][_0x333a19(0x2ca)]=null;_0x49134f=JSON['stringify'](_0x549724,null,0x2);}if(_0x141c33[_0x333a19(0x388)]!='bb-secure.json')_0x3d80df['file'](_0x141c33['name'],_0x49134f);}else _0x3d80df[_0x333a19(0x332)](_0x141c33[_0x333a19(0x388)],_0x49134f);}});const _0x3ca604=_0x3d80df[_0x20c16e(0x22a)]({'base64':![],'compression':_0x20c16e(0x292)});fs[_0x20c16e(0x273)](zippath+(_0x393748+'.zip'),_0x3ca604,_0x20c16e(0x375));}async function unzipFile(_0x15e2df,_0x10a34c){const _0x5cef1f=_0x5e87da;fs[_0x5cef1f(0x2b7)](configpath,{'withFileTypes':!![]})[_0x5cef1f(0x227)](_0x388986=>{const _0xa68325=_0x5cef1f;if(!_0x388986[_0xa68325(0x218)]())fs['rmSync'](configpath+_0x388986[_0xa68325(0x388)]);});const _0x402a32=fs[_0x5cef1f(0x22f)](_0x15e2df+_0x10a34c,_0x5cef1f(0x375)),_0x33c93a=new require(_0x5cef1f(0x24f))(_0x402a32,{'base64':![],'checkCRC32':!![]});Object[_0x5cef1f(0x258)](_0x33c93a[_0x5cef1f(0x250)])[_0x5cef1f(0x227)](_0x55ee1a=>{const _0x54a6e2=_0x5cef1f,_0x4ae201=_0x33c93a['files'][_0x55ee1a];fs['writeFileSync'](configpath+_0x4ae201[_0x54a6e2(0x388)],_0x4ae201[_0x54a6e2(0x307)]);}),fs[_0x5cef1f(0x2b7)](temppath,{'withFileTypes':!![]})['forEach'](_0x1ce7d8=>{const _0x4633e7=_0x5cef1f;if(!_0x1ce7d8[_0x4633e7(0x218)]())fs[_0x4633e7(0x3a6)](temppath+_0x1ce7d8[_0x4633e7(0x388)]);}),logger[_0x5cef1f(0x32c)](_0x5cef1f(0x360)),process['send']({'restore':!![]},_0x499139=>{});}async function getPublicIp(){const _0x13bda5=_0x5e87da;try{const _0x5de56e=await axios[_0x13bda5(0x329)](_0x13bda5(0x20b));publicip=_0x5de56e['data']['ip'];}catch(_0x1151e7){}}async function triggerAnalytics(){const _0x3e73f9=_0x5e87da;if(!publicip)await getPublicIp();const _0xe4d8ae=getBotsWithMode();let _0x4a66e9=0x0;_0xe4d8ae[_0x3e73f9(0x227)](_0x16f971=>{const _0x296e2d=_0x3e73f9;if(_0x16f971[_0x296e2d(0x25e)]==='enabled')_0x4a66e9++;});const _0x239ea0=getBotExchanges();mixpanel['track'](_0x3e73f9(0x21f),{'distinct_id':settings[_0x3e73f9(0x358)],'ip':publicip,'version':serverversion,'numbots':_0xe4d8ae[_0x3e73f9(0x275)],'numbotsenabled':_0x4a66e9,'exchanges':_0x239ea0,'environment':environment});}async function getMessages(){const _0xcd04cd=_0x5e87da,_0x2c8ec7=_0xcd04cd(0x3af),_0xd8e02=new GraphQLClient(_0x2c8ec7),_0x37078d={'authorization':_0xcd04cd(0x399)},_0x45c009=serverversion[_0xcd04cd(0x1f4)]('.'),_0x62ff45=_0x45c009[0x0]+'.'+_0x45c009[0x1],_0x2f44a6=Math[_0xcd04cd(0x264)](settings[_0xcd04cd(0x2a3)],settings['lastmsgemitted']),_0x3c9961={'last':parseInt(_0x2f44a6),'bbm':_0x62ff45},_0xd124ed=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5f1899;try{_0x5f1899=await _0xd8e02[_0xcd04cd(0x392)](_0xd124ed,_0x3c9961,_0x37078d);}catch(_0x202b0c){}if(_0x5f1899&&_0x5f1899[_0xcd04cd(0x32a)]){let _0x72abc4=settings[_0xcd04cd(0x2a3)];newMessages=[];for(const _0x1fcf19 of _0x5f1899[_0xcd04cd(0x32a)]){newMessages[_0xcd04cd(0x22b)](_0x1fcf19);let _0x11c902=![];_0x1fcf19[_0xcd04cd(0x34e)]&&(updateSetting(_0xcd04cd(0x208),_0x1fcf19[_0xcd04cd(0x34e)]),_0x11c902=isNewerVersion(serverversion,_0x1fcf19[_0xcd04cd(0x34e)])||serverversion==_0x1fcf19[_0xcd04cd(0x34e)]);if(!_0x11c902&&_0x1fcf19['number']>_0x72abc4){if(_0x1fcf19['bbvReceive']===_0xcd04cd(0x3a4)||serverversion['startsWith'](_0x1fcf19[_0xcd04cd(0x1fb)])){let _0x20524b=''+_0x1fcf19[_0xcd04cd(0x371)]+'\x0a\x0a'+_0x1fcf19['message'];const _0x2cd73e=await sendTelegramMsg(toTelegramMarkdown(_0x20524b),_0xcd04cd(0x1f7));if(_0x2cd73e)_0x72abc4=_0x1fcf19[_0xcd04cd(0x20c)];}}}updateAvailable=isNewerVersion(settings[_0xcd04cd(0x208)],serverversion),updateSetting(_0xcd04cd(0x2a3),_0x72abc4),emitMessages();}}function emitMessages(){const _0x3a6c09=_0x5e87da,_0xf1d4dd=settings['lastmsgemitted'];let _0x55fb36=[];newMessages[_0x3a6c09(0x227)](_0x42828c=>{const _0x31c51e=_0x3a6c09;_0x42828c[_0x31c51e(0x20c)]>_0xf1d4dd&&_0x55fb36[_0x31c51e(0x22b)](_0x42828c);}),_0x55fb36['length']>0x0&&getAllClients()[_0x3a6c09(0x227)](_0xbea397=>{const _0x17d6a3=_0x3a6c09;getSocket(_0xbea397['id'])[_0x17d6a3(0x2a7)](_0x17d6a3(0x3b0),_0x55fb36);});}function confirmMessage(_0x2a7f75){const _0x2b5aea=_0x5e87da;updateSetting(_0x2b5aea(0x1ec),Number(_0x2a7f75));}function _0x16b8(){const _0x3c6fd9=['callback_query','getDate','hashSync','Enabled\x20Bot\x20','readdirSync','get-logs','sign','listen','Notifications\x20disabled\x0a','node','bot-','getStartingBalances','expiry','\x1b[0m','Bot\x20Mgr\x20>\x20','No\x20authentication\x20token','download','Unauthorized\x20login\x20attempt\x20(timeout)','private','15\x20min','type','cancel-loading','login','telegramChatId','deleteHistoryAlerts','temporary\x20access\x20not\x20allowed','getPortfolio','telegramIpApproval','/off\x20-\x20stop\x20bot(s)\x0a','reinstall-bb','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','storeFiat','find','Invalid\x20username\x20or\x20IP\x20address','output-002.log','live','bot','timeshift','botname','connection','get-starting-balances','get-backup-files','static','slice','encryptedUuid','apiKey','login\x20token\x20generated','bb-settings.json','Restoring\x20bot(s)\x20from\x20backup','then','onepagemode','Node.js\x20v','onText','-config.json','search','hex','socket','Notifications\x20disabled','publicKey','exec','\x20minutes','crypto','settings','bot.js','test','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','once','conn','backup-full','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','/:bot/configuration','ipv6','date-fns','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','server','.zip','version.json','stopPolling','telegram','Invalid\x20authentication\x20token\x20(1)','All\x20bots','function','disabled','_data','randomFillSync','126136fJbCXS','exchange','from','Unauthorized\x20attempt\x20to\x20update\x20bot','-performance.json','apply','/:bot/performance','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','toIPv4Address','output-000.log','get-portfolio','kind','\x20|\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','hasOwnProperty','orders','logout','Starting\x20#RED#Balance\x20Bot\x20v','Unauthorized\x20attempt\x20to\x20log\x20out','sendPortfolioTelegram','headless','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Crypt','/:bot/history','exp','uuid-random','mkdirSync','(((.+)+)+)+$','************','password','enabled','get','messages',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','debug','\x1b[35m','update','allow','reject','includes','file','exit','IPv4','login\x20not\x20required','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','running','Password\x20has\x20been\x20reset\x20to:\x20',':\x20Bot\x20Mgr\x20>\x20','telegramUsername','express','/restart\x20-\x20restart\x20bot(s)\x0a',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','uncaughtException','graphql-request','bbUsername','Allow\x20login\x20from\x20IP\x20address\x20<b>','\x1b[33m','stop','botID','pidRefreshToken','polling_error','reset-history','Login\x20accepted','size','delete-alerts','new','Starting\x20Balance\x20Bot\x20update','express-fileupload','bbvNew','all','hybrid-crypto-js','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20update\x20settings','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','existsSync','10OKAPEt','lowdb','#RES#\x20if\x20running\x20on\x20server','userid','sockets','compareSync','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','build2','showname','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','params','Backup\x20file\x20unzipped\x20and\x20stored','chat','headers','yargs/yargs','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Setting\x20access:\x20','kill','inherit','argv','env','access','158eWdwZt','telegrammsg','toString','handshake','Alerts','child_process','title','Unauthorized\x20attempt\x20to\x20add\x20bot','remove','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','binary','createServer','\x1b[34m','new-disabled','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','success','/:bot/support','Your\x20installation\x20is\x20already\x20up\x20to\x20date','pidExpireLogin','Error:\x20Invalid\x20argument\x20','place-order','3000','parse','store','zip/','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','join','No\x20bots\x20running\x20right\x20now','token','name','sendMetricsTelegram','remoteAddress','Invalid\x20authentication\x20token\x20(2)','backup','full','Invalid\x20Telegram\x20token','format','filter','node-telegram-bot-api','request','/upload-backup','bb-config.json','login\x20required','path','privateKey','sort','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','All\x20bots\x20running\x20right\x20now','sortBy','/update\x20-\x20update\x20Balance\x20Bot\x0a','\x1b[31m','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','removeListener','22314mictic','getTime','\x1b[36m','any','-events.json','rmSync','logs/','temporary\x20access\x20timeout','max','RSA-OAEP','http','Unauthorized\x20attempt\x20to\x20confirm\x20message','api-eu.mixpanel.com','temporary\x20access\x20rejected','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','message','show','auth','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Disabled\x20Bot\x20','622383SPigPm','notification','stopped',',\x20must\x20be\x20a\x204\x20digit\x20number','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','bb/','Notifications\x20enabled\x0a','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','connected','alerts','tkn','use','loginRequired','invalid\x20credentials','ipc','Bot\x20','updatebotmanager','entries','mixpanel','padStart','user','lastmsgemitted','Login\x20rejected','assign','Unauthorized\x20attempt\x20to\x20download\x20','confirm-message','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','string','blacklist','split','telegramEnabled','update-bot','Markdown','Starting\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','HTML','bbvReceive','2FA\x20required','simple','User\x20has\x20been\x20validated','copyFileSync','args','ipaddr.js','delete-bot','telegramEvents','/enable\x20-\x20enable\x20notifications\x0a','startsWith','build','index.html','latestversion','reload','answerCallbackQuery','https://api.ipify.org?format=json','number','store-configuration','showConfig','statSync','getSeconds','settings.','bcryptjs','backupfile','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','secret','temp/','whitelistEnabled','isDirectory','</b>\x20?','16785CTGrrw','cloneDeep','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Unauthorized\x20attempt\x20to\x20get\x20portfolio','family','Server','5\x20min','access\x20timeout','Notifications\x20enabled','catch','disconnect','defaults','Unauthorized\x20attempt\x20to\x20delete\x20alerts','forEach','apiPassword','getUTCHours','generate','push','backup-full@','mtime','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','readFileSync','backup-full.zip','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Failed\x20to\x20download\x20','reset-password','stringify','login\x20token\x20valid','getMonth','Logged\x20out\x20user\x20...','Starting\x20new\x20bot\x20|\x20Bot\x20','Password\x20reset\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','sendFile','Error\x20removing\x20old\x20backup\x20files:','1000','toggle-bot-mode','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','404\x20Not\x20Found','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','replace','write','/download/:type','decrypt','***','=>\x20Go\x20to\x20#CYA#http://','mode','/status\x20-\x20show\x20bot(s)\x20status\x0a','username','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Invalid\x20IP\x20address','Ok,\x20will\x20send\x20alert\x20notifications\x20only','node-zip','files','staging','2070544XQstrk','Restore\x20process\x20aborted','update-bb','match','\x20>\x20','Yes','keys','Unauthorized\x20attempt\x20to\x20get\x20messages','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','127.0.0.1','resetHistory','util','status','sha256','bbPassword','value','2FA\x20login\x20token\x20generated','/:bot/coins','min','log','initclient','unlinkSync','Restarting\x20Bot\x20','set','yes','<b>Telegram\x20Bot\x20Status:</b>\x0a','secure','telegramToken','getHours','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','data','reason','restart','writeFileSync','send','length','SIGTERM','output-001.log','map','3576243MjwTnN','Unauthorized\x20attempt\x20to\x20show\x20configuration','reinstall','Session\x20expired\x20for\x20user\x20...','<b>Balance\x20Bot\x20Status:</b>\x0a','show-config','config/','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','botmanager','order','Backup\x20file\x20uploaded','Orders','Access\x20enabled\x20for\x20','add','temporary\x20token\x20generated','backup-files','/metrics\x20-\x20show\x20bot\x20performance\x0a','removeAllListeners','auto','get-messages','/output-000.log','storeConfiguration','bots','telegram2FaApproval','DEFLATE','546OumzTk','Starting\x20Balance\x20Bot\x20reinstallation','uuid','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','logs','timestamp','436182pydgNk','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','event','-results.json','address','File\x20uploaded','getMinutes','placeOrder','sendMessage','manual','lastmsgtelegram','getFullYear','Logged\x20in\x20user\x20...','All','emit','init','6790tYMpgC','jsonwebtoken','toIPv4MappedAddress','RSA','clientip','host','lowdb/adapters/FileSync','[ip-address]','::1','/names\x20-\x20show\x20bot\x20names\x0a'];_0x16b8=function(){return _0x3c6fd9;};return _0x16b8();}function isNewerVersion(_0x225da5,_0x3a39c8){const _0x2f2691=_0x5e87da,_0x4d3a34=_0x3a39c8[_0x2f2691(0x1f4)]('.'),_0x10fb0e=_0x225da5[_0x2f2691(0x1f4)]('.');for(var _0x44aff8=0x0;_0x44aff8<_0x10fb0e[_0x2f2691(0x275)];_0x44aff8++){const _0x2058d1=~~_0x10fb0e[_0x44aff8],_0x5cbd46=~~_0x4d3a34[_0x44aff8];if(_0x2058d1>_0x5cbd46)return!![];if(_0x2058d1<_0x5cbd46)return![];}return![];}function toTelegramMarkdown(_0x3b2b4d){const _0x256747=_0x5e87da,_0x38bd80=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2b8418=/\*{2}(.+?)\*{2}/gim;return _0x3b2b4d=_0x3b2b4d['replace'](_0x38bd80,'$1_$2_$3')[_0x256747(0x243)](_0x2b8418,'*$1*'),_0x3b2b4d;}async function validateConfigFile(){const _0x3810d0=_0x5e87da,_0x243587=dbConfig[_0x3810d0(0x329)](_0x3810d0(0x290))[_0x3810d0(0x39c)](_0x3810d0(0x344))[_0x3810d0(0x261)]()||[];if(_0x243587[_0x3810d0(0x275)]==0x0){let _0x5032fb=0x0,_0x50ef45=[];const _0x4c1475=/^bot-([0-9]{3})-config.json$/,_0x1fb162=fs[_0x3810d0(0x2b7)](configpath);_0x1fb162[_0x3810d0(0x227)](_0xc7fd20=>{const _0x5c738f=_0x3810d0,_0x571eff=_0x4c1475[_0x5c738f(0x2ee)](_0xc7fd20);if(_0x571eff){const _0x546e3c=_0x571eff[0x1];let _0x2d7711=getBotAttributes(_0x546e3c);_0x50ef45[_0x5c738f(0x22b)]({'botID':_0x546e3c,'botname':_0x2d7711[_0x5c738f(0x2d9)],'status':'disabled','live':_0x5c738f(0x3b8)}),_0x5032fb++;}}),_0x5032fb!=0x0&&(dbConfig[_0x3810d0(0x329)](_0x3810d0(0x290))[_0x3810d0(0x1ee)](_0x50ef45)[_0x3810d0(0x244)](),config=_0x50ef45,restoredConfigFile=_0x5032fb);}}async function restoreConfigNotify(_0x18df02){const _0x2f3076=_0x5e87da;let _0x4a7423;if(restoredConfigFile==0x1)_0x4a7423=_0x2f3076(0x353);else _0x4a7423=_0x2f3076(0x1f1);if(_0x18df02)io['to'](_0x2f3076(0x282))[_0x2f3076(0x2a7)]('notification',_0x4a7423);else{logger['simple'](_0x2f3076(0x351)),logger[_0x2f3076(0x1fd)](_0x4a7423),logger['simple'](_0x2f3076(0x351)),logger[_0x2f3076(0x1fd)]('');if(tgBot&&settings[_0x2f3076(0x2ca)]&&settings[_0x2f3076(0x203)]!=_0x2f3076(0x319))tgBot[_0x2f3076(0x2a1)](settings[_0x2f3076(0x2ca)],_0x2f3076(0x2c1)+_0x4a7423)['catch'](_0x25dc0d=>{telegramError(_0x25dc0d);});}}function validateCredentials(_0x3c797c,_0x3655db){const _0x36c3a5=_0x5e87da;if(_0x3c797c[_0x36c3a5(0x24b)]==settings['bbUsername']&&bcrypt[_0x36c3a5(0x35a)](_0x3c797c[_0x36c3a5(0x327)],settings[_0x36c3a5(0x260)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x36c3a5(0x2f4),'token':null};else{const _0xd05a45=generateLoginToken(_0x3655db);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xd05a45};}}else return{'allow':![],'reason':_0x36c3a5(0x3c3),'token':null};}function refreshToken(_0x40c209){const _0x16dc8a=_0x5e87da,_0x21b937=generateLoginToken(_0x40c209);return{'allow':!![],'reason':_0x16dc8a(0x2e1),'token':_0x21b937};}function validateAccess(_0x3612ca,_0x4ed4e4,_0x2cf313){const _0x3c9aed=_0x5e87da,_0x7d35ae=_0x2cf313?_0x2cf313:devices[_0x4ed4e4]['ip'];let _0x35f9e8;const _0x4153d9=_0x533976=>{const _0x4ec000=_0x2921;if(settings[_0x4ec000(0x3c2)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x4ed4e4)){const _0x1acc8b=generateLoginToken(_0x4ed4e4);return{'allow':!![],'reason':_0x4ec000(0x262),'token':_0x1acc8b};}else return{'allow':![],'reason':_0x4ec000(0x395),'token':null};}else return _0x35f9e8=validToken(_0x533976,_0x4ed4e4),_0x35f9e8[_0x4ec000(0x318)](_0x4ec000(0x37a))?{'allow':!![],'reason':_0x4ec000(0x235),'token':_0x533976}:{'allow':![],'reason':_0x4ec000(0x395),'token':null};}else return{'allow':!![],'reason':_0x4ec000(0x335),'token':null};};if(settings[_0x3c9aed(0x217)]){let _0x16b99f=[...settings['whitelist'],_0x3c9aed(0x2b1),'::ffff:127.0.0.1',_0x3c9aed(0x25b)];if(_0x16b99f[_0x3c9aed(0x331)](_0x7d35ae))return _0x4153d9(_0x3612ca);else{_0x35f9e8=validToken(_0x3612ca,_0x4ed4e4);if(_0x35f9e8[_0x3c9aed(0x318)](_0x3c9aed(0x37a)))return _0x4153d9(_0x3612ca);else{if(telegramIpApproved(_0x4ed4e4)){const _0x5e7d34=generateToken(_0x4ed4e4);return _0x35f9e8=_0x4153d9(_0x3612ca),_0x35f9e8[_0x3c9aed(0x32f)]?{'allow':!![],'reason':_0x3c9aed(0x288),'token':_0x5e7d34}:_0x35f9e8;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x3c9aed(0x1fc),'token':null}:{'allow':![],'reason':_0x3c9aed(0x2cc),'token':null};}}}else return _0x4153d9(_0x3612ca);}function timelyDecrypt(_0x44e05a,_0x5ee6a0=!![]){const _0x3fc350=_0x5e87da;if(_0x44e05a)try{const _0x564e83=crypt['decrypt'](secure[_0x3fc350(0x397)],_0x44e05a)[_0x3fc350(0x3b0)],_0x5fad5=_0x564e83[_0x3fc350(0x1f4)]('@')[0x0],_0x470984=_0x564e83[_0x3fc350(0x1f4)]('@')[0x1],_0x39a63d=new Date()[_0x3fc350(0x3a2)]();if(_0x5ee6a0){if(_0x39a63d-_0x470984<maxSecretAge*0x3e8)return _0x5fad5;else return![];}else return _0x5fad5;}catch(_0x8e63e7){return![];}else return![];}const validToken=(_0x5e67e6,_0xc8d883)=>{const _0x526789=_0x5e87da,_0x5ead98=devices[_0xc8d883]['ip'];if(!_0x5e67e6)return{'error':_0x526789(0x2c2)};for(let _0x5b1820 of blacklist){if(_0x5b1820['token']==_0x5e67e6)return{'error':'Token\x20blacklisted'};}let _0x409548;try{_0x409548=jwt['verify'](_0x5e67e6,secure[_0x526789(0x215)]+_0xc8d883);}catch{return{'error':_0x526789(0x303)};}if(!_0x409548[_0x526789(0x318)](_0x526789(0x2ad))&&!_0x409548[_0x526789(0x318)](_0x526789(0x24b))||!_0x409548[_0x526789(0x318)](_0x526789(0x322)))return{'error':_0x526789(0x38b)};if(!_0x409548[_0x526789(0x318)](_0x526789(0x24b))&&_0x409548[_0x526789(0x318)](_0x526789(0x2ad))){const {clientip:_0x527800}=_0x409548;return _0x5ead98==_0x527800?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x526789(0x24d)};}else{if(_0x409548[_0x526789(0x318)]('username')&&_0x409548['hasOwnProperty'](_0x526789(0x2ad))){const {username:_0x53086d,clientip:_0x250fb1}=_0x409548;return settings[_0x526789(0x340)]==_0x53086d&&_0x5ead98==_0x250fb1?{'success':_0x526789(0x1fe)}:{'error':_0x526789(0x2d4)};}}},generateLoginToken=_0x2f90ec=>{const _0x250c27=_0x5e87da;if(_0x2f90ec){const _0x1450b2=devices[_0x2f90ec]['ip'];return jwt['sign']({'username':settings[_0x250c27(0x340)],'clientip':_0x1450b2},secure[_0x250c27(0x215)]+_0x2f90ec,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x551962=>{const _0x442cba=_0x5e87da;if(_0x551962){const _0x222bdf=devices[_0x551962]['ip'];return jwt[_0x442cba(0x2b9)]({'clientip':_0x222bdf},secure[_0x442cba(0x215)]+_0x551962,{'expiresIn':devices[_0x551962][_0x442cba(0x2ce)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x562404=>{const _0x5b24fa=_0x5e87da;let _0x4cc833=![];return devices[_0x562404][_0x5b24fa(0x2ce)]&&devices[_0x562404]['telegramIpApproval']['expiry']!='reject'&&(_0x4cc833=devices[_0x562404][_0x5b24fa(0x2ce)][_0x5b24fa(0x2ad)]==devices[_0x562404]['ip']&&new Date()[_0x5b24fa(0x3a2)]()-devices[_0x562404][_0x5b24fa(0x2ce)][_0x5b24fa(0x298)]<devices[_0x562404][_0x5b24fa(0x2ce)][_0x5b24fa(0x2bf)]*0x3c*0x3e8),_0x4cc833;},telegram2FaApproved=_0x55e30d=>{const _0x1ababe=_0x5e87da;let _0x55b88c=![];return devices[_0x55e30d][_0x1ababe(0x291)]&&devices[_0x55e30d][_0x1ababe(0x291)][_0x1ababe(0x2bf)]!=_0x1ababe(0x330)&&(_0x55b88c=devices[_0x55e30d][_0x1ababe(0x291)][_0x1ababe(0x2ad)]==devices[_0x55e30d]['ip']&&new Date()[_0x1ababe(0x3a2)]()-devices[_0x55e30d][_0x1ababe(0x291)][_0x1ababe(0x298)]<devices[_0x55e30d][_0x1ababe(0x291)][_0x1ababe(0x2bf)]*0x3c*0x3e8),_0x55b88c;},normalizeIP=_0x1bdd13=>{const _0x1d3478=_0x5e87da;let _0x1fcd12=null,_0x304d1e=null;if(ipaddr['isValid'](_0x1bdd13)){const _0x3c4a4f=ipaddr['parse'](_0x1bdd13);_0x3c4a4f[_0x1d3478(0x315)]()===_0x1d3478(0x2fb)?(_0x3c4a4f['isIPv4MappedAddress']()&&(_0x1fcd12=_0x3c4a4f[_0x1d3478(0x312)]()[_0x1d3478(0x36d)]()),_0x304d1e=_0x3c4a4f[_0x1d3478(0x36d)]()):(_0x1fcd12=_0x3c4a4f[_0x1d3478(0x36d)](),_0x304d1e=_0x3c4a4f[_0x1d3478(0x2ab)]()[_0x1d3478(0x36d)]());}return{'show':_0x1fcd12?_0x1fcd12:_0x304d1e,'store':_0x304d1e};};function formatDate(_0xc7997f){const _0x2f326f=_0x5e87da;return _0xc7997f['getFullYear']()+'/'+(_0xc7997f[_0x2f326f(0x236)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0xc7997f[_0x2f326f(0x2b4)]()[_0x2f326f(0x36d)]()[_0x2f326f(0x1ea)](0x2,'0')+'\x20'+_0xc7997f[_0x2f326f(0x26e)]()[_0x2f326f(0x36d)]()[_0x2f326f(0x1ea)](0x2,'0')+':'+_0xc7997f['getMinutes']()[_0x2f326f(0x36d)]()[_0x2f326f(0x1ea)](0x2,'0')+':'+_0xc7997f[_0x2f326f(0x210)]()[_0x2f326f(0x36d)]()[_0x2f326f(0x1ea)](0x2,'0');}function sleep(_0x14faba){return new Promise(_0x5b3f54=>setTimeout(_0x5b3f54,_0x14faba));}