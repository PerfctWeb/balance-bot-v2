const _0x4f25fc=_0x238c;(function(_0xa98e85,_0x144b3e){const _0x179a5d=_0x238c,_0x1b1361=_0xa98e85();while(!![]){try{const _0x29af44=-parseInt(_0x179a5d(0x19f))/0x1*(parseInt(_0x179a5d(0x2d3))/0x2)+parseInt(_0x179a5d(0x18f))/0x3*(parseInt(_0x179a5d(0x1ee))/0x4)+parseInt(_0x179a5d(0x1c2))/0x5*(parseInt(_0x179a5d(0x260))/0x6)+-parseInt(_0x179a5d(0x182))/0x7+parseInt(_0x179a5d(0x252))/0x8*(parseInt(_0x179a5d(0x1d0))/0x9)+-parseInt(_0x179a5d(0x217))/0xa+-parseInt(_0x179a5d(0x264))/0xb;if(_0x29af44===_0x144b3e)break;else _0x1b1361['push'](_0x1b1361['shift']());}catch(_0x31299c){_0x1b1361['push'](_0x1b1361['shift']());}}}(_0x19c7,0x1a146));const _0x5694ca=function(){let _0x3444fa=!![];return function(_0x347f02,_0x51029a){const _0x39412f=_0x3444fa?function(){if(_0x51029a){const _0x422d62=_0x51029a['apply'](_0x347f02,arguments);return _0x51029a=null,_0x422d62;}}:function(){};return _0x3444fa=![],_0x39412f;};}(),_0x4ff5f2=_0x5694ca(this,function(){const _0x395603=_0x238c;return _0x4ff5f2[_0x395603(0x195)]()['search'](_0x395603(0x2d7))['toString']()['constructor'](_0x4ff5f2)[_0x395603(0x27d)](_0x395603(0x2d7));});_0x4ff5f2();'use strict';process[_0x4f25fc(0x1a8)][_0x4f25fc(0x2b6)]=0x1;const childProcess=require(_0x4f25fc(0x214)),FileSync=require(_0x4f25fc(0x1bc)),fs=require('fs'),fns=require(_0x4f25fc(0x267)),low=require(_0x4f25fc(0x1de)),path=require(_0x4f25fc(0x1f4)),crypto=require(_0x4f25fc(0x2c7)),Crypt=require(_0x4f25fc(0x249))[_0x4f25fc(0x21b)],RSA=require(_0x4f25fc(0x249))[_0x4f25fc(0x1e1)],bcrypt=require(_0x4f25fc(0x2ad)),jwt=require(_0x4f25fc(0x18e)),analyticsLib=require(_0x4f25fc(0x28c))[_0x4f25fc(0x20c)],googleAnalytics=require(_0x4f25fc(0x1b2))[_0x4f25fc(0x20c)],ipaddr=require(_0x4f25fc(0x2a6)),argv=require(_0x4f25fc(0x25a))(process[_0x4f25fc(0x1fe)][_0x4f25fc(0x1cc)](0x2))['argv'],PORT=argv[_0x4f25fc(0x2c2)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x4f25fc(0x194)+PORT+_0x4f25fc(0x2af)),process[_0x4f25fc(0x197)](0x1));const HOST=argv[_0x4f25fc(0x2cd)]||null,userID=argv[_0x4f25fc(0x285)]||'';let bbpath=_0x4f25fc(0x2ba),bbpath2='';const botfile=_0x4f25fc(0x2e7),configfile=_0x4f25fc(0x187),settingsfile=_0x4f25fc(0x232),securefile=_0x4f25fc(0x20e);let validInstallation=!![];!fs[_0x4f25fc(0x243)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4f25fc(0x251)),configpath=userID?bbpath+_0x4f25fc(0x1f2)+userID+'/':bbpath+_0x4f25fc(0x1f2),configbackuppath=configpath+_0x4f25fc(0x21c);!fs[_0x4f25fc(0x243)](configpath)&&fs[_0x4f25fc(0x22b)](configpath);!fs[_0x4f25fc(0x243)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x4f25fc(0x1b8)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4f25fc(0x1e5)]({'settings':{'timeshift':0x0}})[_0x4f25fc(0x1b8)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);function _0x19c7(){const _0x22c2d2=['bb-config.json','Allow\x20login\x20from\x20IP\x20address\x20<b>','delete-alerts','2FA\x20required','/status\x20-\x20show\x20bot(s)\x20status\x0a','assign','store-settings','jsonwebtoken','186PqgdRy','privateKey','parse','auth','idling\x20bot\x20\x20\x20|\x20Bot\x20','Error:\x20Invalid\x20argument\x20','toString','login\x20token\x20generated','exit','Token\x20blacklisted','login\x20not\x20required','conn','store-headless',':\x20Bot\x20Mgr\x20>\x20','build2','/restart\x20-\x20restart\x20bot(s)\x0a','1BPsirN','update-bb','isIPv4MappedAddress','started','build','value','::ffff:127.0.0.1','join','Notifications\x20enabled','env','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','store-configuration','send','Invalid\x20authentication\x20token\x20(1)','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','storeConfiguration','/:bot/performance','split','User\x20has\x20been\x20validated','@analytics/google-analytics','reload','<b>Balance\x20Bot\x20Status:</b>\x0a','toIPv4MappedAddress','hashSync','disabled','write','alerts','UA-192771731-1','<b>Telegram\x20Bot\x20Status:</b>\x0a','lowdb/adapters/FileSync','All','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','once','HTML','notification','62525mSXFfJ','RSA-OAEP','auto','Unauthorized\x20attempt\x20to\x20get\x20portfolio','pidExpireLogin','temporary\x20token\x20generated','-results.json','/names\x20-\x20show\x20bot\x20names\x0a',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','-config.json','slice','\x20>\x20','headless','uuid','1359OSwgMo','/:bot/support','sendFile','sockets','/enable\x20-\x20enable\x20notifications\x0a','getMonth','2FA\x20login\x20token\x20generated','readFileSync','referer','reject','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','telegramToken','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','deleteHistoryAlerts','lowdb','answerCallbackQuery','logged\x20out','RSA','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sortBy','sha256','defaults','All\x20bots','getUTCHours','login','store','randomBytes','getTime','Invalid\x20Telegram\x20token','keys','596HgJFDz','entries','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','30\x20min','config/','access\x20timeout','path','127.0.0.1','getPortfolio','encryptedUuid','polling_error','blacklist','removeAllListeners','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','kill','apiKey','argv','</b>\x20?','Unauthorized\x20attempt\x20to\x20update\x20settings','username','bot-','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','match','No\x20bots\x20running\x20right\x20now','Notifications\x20enabled\x0a','node-telegram-bot-api','getSeconds','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20log\x20out','live','default','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','bb-secure.json','args','running','Invalid\x20authentication\x20token\x20(2)','delete-bot','2FA\x20login\x20rejected','child_process','reason','botID','214280WymQzx','Login\x20rejected','/off\x20-\x20stop\x20bot(s)\x0a','loginRequired','Crypt','backup/','All\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','enabled','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','accept','get-logs','temporary\x20access\x20rejected','getStartingBalances','invalid\x20credentials','timestamp','sendMessage','deleted\x20Bot\x20','log','manual','mkdirSync','whitelistEnabled','cancel-loading','Alerts','\x20only\x0a','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','storeHeadless','bb-settings.json','hex','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','initclient','token','error\x20while\x20deleting\x20config\x20files:\x20','Invalid\x20username\x20or\x20IP\x20address','bbUsername','remove','static','show','includes','secret','telegramChatId','push','************','-----------------------------------------------------------------------------------','existsSync','Balance\x20Bot','getHours','handshake','Temporary\x20access\x20rejected','telegramIpApproval','hybrid-crypto-js','status','/disable\x20-\x20disable\x20notifications\x0a','onText','Login\x20accepted','connected','reset-password','use','clients','7904bSlpEj','removeListener','copyFileSync','publicKey','Password\x20has\x20been\x20reset\x20to:\x20','getFullYear','orders','page','yargs/yargs','logout','whitelist','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','404\x20Not\x20Found','add','78fYcKhr','telegramEnabled','\x20minutes','listen','288398fWmizv','filter','generateKeyPairAsync','date-fns','length','\x20mode','success','toggle-bot-mode','function','2FA','placeOrder','allow','::1','unlinkSync','place-order','bbPassword','index.html','createServer','event','\x20to\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','error','\x20|\x20','telegramEvents','emit','search','set','cloneDeep','secure','find','compareSync','writeFileSync','order','user','Ok,\x20will\x20send\x20alert\x20notifications\x20only','max','data','stopped','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','analytics','/:bot','expiry','get','botname','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20get\x20logs','stopPolling','5\x20min','ipc','toIPv4Address','/:bot/portfolio','/:bot/coins','2FA\x20login\x20required','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','all','inherit','login\x20required','bots','f2aRequired','get-portfolio','Balance\x20Bot\x20Server','disconnect','verify','version','from','ipaddr.js','You\x20can\x20use\x20the\x20following\x20commands:\x0a','timeshift','pidRefreshToken','hasOwnProperty','telegram','botmanager','bcryptjs','kind',',\x20must\x20be\x20a\x204\x20digit\x20number','yes','padStart','mode','add-bot','update-bot','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','NTBA_FIX_319','access','Notifications\x20disabled\x0a','connection','bb/','Bot\x20','express','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20add\x20bot','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','showname','port','message','SIGINT','enabled\x20Bot\x20','isValid','crypto','Unauthorized\x20attempt\x20to\x20store\x20configuration','password','login\x20token\x20valid','headers','clientip','host','sign','forEach','bot','telegramUsername','remoteAddress','283078yLLoGJ','server','getMinutes','toggleBotMode','(((.+)+)+)+$','-events.json','callback_query','fork','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','updatebotmanager','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','new-disabled','/on\x20-\x20start\x20bot(s)\x0a','then','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','type','stop','No\x20authentication\x20token','bot.js','catch','temporary\x20access\x20not\x20allowed','new','174888fSbMNQ','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','settings','decrypt','chat'];_0x19c7=function(){return _0x22c2d2;};return _0x19c7();}dbSecure[_0x4f25fc(0x1e5)]({'secure':{},'blacklist':[]})[_0x4f25fc(0x1b8)]();let crypt=new Crypt({'md':_0x4f25fc(0x1e4),'rsaStandard':_0x4f25fc(0x1c3)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x4f25fc(0x2a4)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4f25fc(0x2bc)),app=express(),http=require('http')[_0x4f25fc(0x275)](app);app[_0x4f25fc(0x250)](express[_0x4f25fc(0x23b)](path[_0x4f25fc(0x1a6)](__dirname,bbpath2,'build2'))),app['use'](express[_0x4f25fc(0x23b)](path[_0x4f25fc(0x1a6)](__dirname,bbpath2,_0x4f25fc(0x1a3)))),app['get']('/',function(_0x10d5b6,_0x4f71e8){const _0x347a45=_0x4f25fc;_0x4f71e8['sendFile'](path[_0x347a45(0x1a6)](__dirname,bbpath2,_0x347a45(0x19d),_0x347a45(0x274)));}),app[_0x4f25fc(0x28f)](_0x4f25fc(0x28d),function(_0x2eef6b,_0x4a141d){const _0x2d6095=_0x4f25fc;_0x4a141d['sendFile'](path[_0x2d6095(0x1a6)](__dirname,bbpath2,_0x2d6095(0x1a3),_0x2d6095(0x274)));}),app['get'](_0x4f25fc(0x297),(_0x335c2d,_0x4921fb)=>{const _0x3cc145=_0x4f25fc;_0x4921fb[_0x3cc145(0x1d2)](path[_0x3cc145(0x1a6)](__dirname,bbpath2,_0x3cc145(0x1a3),_0x3cc145(0x274)));}),app[_0x4f25fc(0x28f)](_0x4f25fc(0x1af),(_0x5dcf53,_0x1a9770)=>{const _0x547ed8=_0x4f25fc;_0x1a9770[_0x547ed8(0x1d2)](path['join'](__dirname,bbpath2,'build',_0x547ed8(0x274)));}),app[_0x4f25fc(0x28f)](_0x4f25fc(0x298),(_0x4027f5,_0x22e8ee)=>{const _0xc7b5f7=_0x4f25fc;_0x22e8ee['sendFile'](path['join'](__dirname,bbpath2,_0xc7b5f7(0x1a3),_0xc7b5f7(0x274)));}),app[_0x4f25fc(0x28f)]('/:bot/history',(_0x2704ec,_0x347a6e)=>{const _0x433fef=_0x4f25fc;_0x347a6e[_0x433fef(0x1d2)](path['join'](__dirname,bbpath2,_0x433fef(0x1a3),'index.html'));}),app[_0x4f25fc(0x28f)]('/:bot/configuration',(_0x551327,_0x44b996)=>{const _0x275d7a=_0x4f25fc;_0x44b996['sendFile'](path['join'](__dirname,bbpath2,_0x275d7a(0x1a3),_0x275d7a(0x274)));}),app[_0x4f25fc(0x28f)](_0x4f25fc(0x1d1),(_0x34df8e,_0x47c300)=>{const _0x3986e7=_0x4f25fc;_0x47c300[_0x3986e7(0x1d2)](path[_0x3986e7(0x1a6)](__dirname,bbpath2,_0x3986e7(0x1a3),_0x3986e7(0x274)));});if(HOST)http[_0x4f25fc(0x263)](PORT,HOST);else http[_0x4f25fc(0x263)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x4f25fc(0x244),'plugins':[googleAnalytics({'trackingId':_0x4f25fc(0x1ba)})]}),TelegramBot=require(_0x4f25fc(0x207));let tgBot;if(settings[_0x4f25fc(0x1db)]&&settings[_0x4f25fc(0x1db)]!=''&&settings['telegramUsername']&&settings[_0x4f25fc(0x2d1)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x50ecf9=_0x4f25fc;console[_0x50ecf9(0x229)](''),console[_0x50ecf9(0x229)](_0x50ecf9(0x242)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x50ecf9(0x229)]('-----------------------------------------------------------------------------------');if(config[_0x50ecf9(0x268)]!=0x0)config['forEach'](_0x410f3a=>{const _0x5dac4d=_0x50ecf9;if(_0x410f3a['status']==_0x5dac4d(0x21f)||_0x410f3a[_0x5dac4d(0x24a)]==_0x5dac4d(0x181))logging('starting\x20bot\x20|\x20Bot\x20'+_0x410f3a['botID']+_0x5dac4d(0x27a)+_0x410f3a[_0x5dac4d(0x290)]),startBot([_0x410f3a[_0x5dac4d(0x216)],userID],{'cwd':bbpath},function(_0x5a3db6){if(_0x5a3db6)logging(_0x5a3db6);});else(_0x410f3a[_0x5dac4d(0x24a)]==_0x5dac4d(0x1b7)||_0x410f3a[_0x5dac4d(0x24a)]=='new-disabled')&&logging(_0x5dac4d(0x193)+_0x410f3a[_0x5dac4d(0x216)]+'\x20|\x20'+_0x410f3a['botname']);});else!newBot&&console[_0x50ecf9(0x229)](_0x50ecf9(0x1fb));if(newBot)addBot();console[_0x50ecf9(0x229)]('-----------------------------------------------------------------------------------'),console[_0x50ecf9(0x229)]('');}function startSocket(){const _0x2d041f=_0x4f25fc;io['on'](_0x2d041f(0x2b9),_0x250ec9=>{const _0x19fca9=_0x2d041f;let _0x1a36d8,_0x38a353,_0x6ad6a,_0xee8da2,_0x44336c;const _0x2c553b=_0x250ec9[_0x19fca9(0x246)][_0x19fca9(0x2cb)][_0x19fca9(0x1d8)];_0x38a353=_0x2c553b[_0x19fca9(0x204)](/bot[0-9]{3}/);if(_0x38a353)_0x6ad6a=_0x38a353[0x0][_0x19fca9(0x204)](/[0-9]{3}/);if(_0x6ad6a)_0x1a36d8=_0x6ad6a[0x0];else _0x1a36d8=_0x19fca9(0x2ac);const _0x4a2271=_0x250ec9[_0x19fca9(0x246)][_0x19fca9(0x192)][_0x19fca9(0x1f7)];if(!_0x4a2271)_0x250ec9['emit'](_0x19fca9(0x24a),{'publicKey':secure[_0x19fca9(0x255)]});else{_0xee8da2=timelyDecrypt(_0x4a2271,![]);if(!_0xee8da2)_0x250ec9[_0x19fca9(0x27c)](_0x19fca9(0x24a),{'publicKey':secure['publicKey']});else{_0x44336c=normalizeIP(_0x250ec9[_0x19fca9(0x19a)][_0x19fca9(0x2d2)])[_0x19fca9(0x1e9)];if(!devices[_0xee8da2])devices[_0xee8da2]={'uuid':_0xee8da2,'access':{'token':null}};devices[_0xee8da2]['ip']=_0x44336c;const _0x4f10f1=addClient(_0x250ec9['id'],_0xee8da2,_0x1a36d8);setAccess(_0x4f10f1),_0x250ec9['on'](_0x19fca9(0x1e8),_0x41959f=>{const _0x363682=_0x19fca9,_0xbcd965=timelyDecrypt(_0x41959f[_0x363682(0x2c9)]);if(_0xbcd965){_0x41959f={'username':_0x41959f[_0x363682(0x201)],'password':_0xbcd965},devices[_0xee8da2][_0x363682(0x2b7)]=validateCredentials(_0x41959f,_0xee8da2);if(devices[_0xee8da2][_0x363682(0x2b7)][_0x363682(0x26f)]==![]&&devices[_0xee8da2]['access'][_0x363682(0x215)]==_0x363682(0x299))_0x250ec9['emit'](_0x363682(0x24a),{'access':devices[_0xee8da2][_0x363682(0x2b7)]}),loginAccess2FA(_0xee8da2,_0x44336c);else{if(devices[_0xee8da2][_0x363682(0x2b7)]['allow']==![]&&devices[_0xee8da2]['access'][_0x363682(0x215)]==_0x363682(0x225))_0x250ec9['emit']('status',{'access':devices[_0xee8da2][_0x363682(0x2b7)]});else devices[_0xee8da2][_0x363682(0x2b7)]['allow']&&devices[_0xee8da2][_0x363682(0x2b7)][_0x363682(0x215)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0xee8da2)[_0x363682(0x2cf)](_0x4802e5=>{setAccess(_0x4802e5);}),setTokenRefresh(_0xee8da2),setSessionTimeout(_0x363682(0x1e8),_0xee8da2));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x250ec9['on'](_0x19fca9(0x24f),()=>{resetPassword();}),_0x250ec9['on'](_0x19fca9(0x2a2),_0x584d0b=>{removeClient(_0x250ec9['id']);});}}});}function initClient(_0x5669ac){const _0x164e94=_0x4f25fc;if(_0x5669ac!=_0x164e94(0x2ac)&&config[_0x164e94(0x1fd)]!=''){if(pid[_0x5669ac])pid[_0x5669ac][_0x164e94(0x1ab)]({'function':_0x164e94(0x235),'args':null});}}function getSocket(_0x381ae7){const _0x1e0121=_0x4f25fc;return io[_0x1e0121(0x1d3)][_0x1e0121(0x1d3)][_0x1e0121(0x28f)](_0x381ae7);}function _0x238c(_0x4d0fd4,_0x487cf9){const _0x4a1020=_0x19c7();return _0x238c=function(_0x4ff5f2,_0x5694ca){_0x4ff5f2=_0x4ff5f2-0x181;let _0x19c7bc=_0x4a1020[_0x4ff5f2];return _0x19c7bc;},_0x238c(_0x4d0fd4,_0x487cf9);}function setAccess(_0x330310){const _0x128074=_0x4f25fc,_0x3f4c54=getSocket(_0x330310['id']),_0x4a06b4=_0x330310[_0x128074(0x1cf)],_0xae130e=_0x330310[_0x128074(0x2d0)];devices[_0x4a06b4][_0x128074(0x2b7)]=validateAccess(devices[_0x4a06b4]['access'][_0x128074(0x236)],_0x4a06b4),_0x3f4c54[_0x128074(0x1a6)](_0x4a06b4);if(devices[_0x4a06b4][_0x128074(0x2b7)][_0x128074(0x26f)]){_0x3f4c54['join'](_0xae130e);if(_0xae130e==_0x128074(0x2ac))initializeSocketBotManager(_0x3f4c54);else initializeSocketBot(_0x3f4c54);initClient(_0xae130e);}devices[_0x4a06b4]['access'][_0x128074(0x236)]&&devices[_0x4a06b4]['access'][_0x128074(0x215)]==_0x128074(0x1c7)&&setSessionTimeout(_0x128074(0x26d),_0x4a06b4),devices[_0x4a06b4][_0x128074(0x2b7)][_0x128074(0x236)]&&devices[_0x4a06b4][_0x128074(0x2b7)][_0x128074(0x215)]==_0x128074(0x1d6)&&setSessionTimeout('login',_0x4a06b4),_0x3f4c54['emit'](_0x128074(0x24a),{'status':_0x330310[_0x128074(0x2d4)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4a06b4][_0x128074(0x2b7)],'externalip':devices[_0x4a06b4]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x4a06b4][_0x128074(0x2b7)][_0x128074(0x26f)]==![]&&devices[_0x4a06b4][_0x128074(0x2b7)][_0x128074(0x215)]==_0x128074(0x18a)&&temporaryAccess2FA(_0x4a06b4,devices[_0x4a06b4]['ip']);}function setSessionTimeout(_0x25ec1a,_0x989ea7){const _0x5433dc=_0x4f25fc;let _0x13bbe4;if(_0x25ec1a==_0x5433dc(0x1e8))_0x13bbe4=loginExpiry*0x3c*0x3e8;else _0x13bbe4=devices[_0x989ea7][_0x5433dc(0x248)][_0x5433dc(0x28e)]*0x3c*0x3e8-(new Date()[_0x5433dc(0x1eb)]()-devices[_0x989ea7][_0x5433dc(0x248)][_0x5433dc(0x226)]);if(devices[_0x989ea7][_0x5433dc(0x1c6)])clearTimeout(devices[_0x989ea7][_0x5433dc(0x1c6)]);devices[_0x989ea7][_0x5433dc(0x1c6)]=setTimeout(()=>{const _0x3cb063=_0x5433dc;if(devices[_0x989ea7][_0x3cb063(0x2a9)])clearTimeout(devices[_0x989ea7][_0x3cb063(0x2a9)]);removeSocketListeners(_0x989ea7),addBlacklist(_0x989ea7),devices[_0x989ea7]['telegramIpApproval']=null,devices[_0x989ea7][_0x3cb063(0x209)]=null,devices[_0x989ea7][_0x3cb063(0x2b7)][_0x3cb063(0x236)]=null,devices[_0x989ea7][_0x3cb063(0x2b7)]=validateAccess(devices[_0x989ea7][_0x3cb063(0x2b7)][_0x3cb063(0x236)],_0x989ea7),!(devices[_0x989ea7]['access'][_0x3cb063(0x26f)]&&devices[_0x989ea7][_0x3cb063(0x2b7)][_0x3cb063(0x215)]==_0x3cb063(0x199))&&(_0x25ec1a=='login'?io['to'](_0x989ea7)[_0x3cb063(0x27c)](_0x3cb063(0x24a),{'access':{'allow':![],'reason':_0x3cb063(0x1f3),'token':null}}):io['to'](_0x989ea7)[_0x3cb063(0x27c)](_0x3cb063(0x24a),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x989ea7]['access'][_0x3cb063(0x236)]=null;},_0x13bbe4);}function setTokenRefresh(_0x54c439){const _0x2e880f=_0x4f25fc;if(devices[_0x54c439][_0x2e880f(0x2a9)])clearTimeout(devices[_0x54c439][_0x2e880f(0x2a9)]);devices[_0x54c439][_0x2e880f(0x2a9)]=setTimeout(()=>{const _0x2e73c4=_0x2e880f;getClientsWithUuid(_0x54c439)[_0x2e73c4(0x268)]!=0x0?(devices[_0x54c439]['access']=refreshToken(_0x54c439),io['to'](_0x54c439)['emit']('status',{'status':_0x2e73c4(0x24e),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54c439][_0x2e73c4(0x2b7)],'externalip':devices[_0x54c439]['ip'],'publicKey':secure[_0x2e73c4(0x255)],'validInstallation':validInstallation}),setTokenRefresh(_0x54c439)):clearTimeout(devices[_0x54c439]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4d6ea9){const _0x136382=_0x4f25fc,_0x288580=getClient(_0x4d6ea9['id'])[_0x136382(0x1cf)];_0x4d6ea9[_0x136382(0x27c)](_0x136382(0x29e),config),_0x4d6ea9[_0x136382(0x27c)]('settings',cleanSettings()),_0x4d6ea9['on'](_0x136382(0x2b3),_0x43b6ef=>{const _0x4488eb=_0x136382;if(validateAccess(_0x43b6ef,_0x288580)['allow'])addBot();else logging(_0x4488eb(0x2be));}),_0x4d6ea9['on'](_0x136382(0x2b4),(_0x496026,_0x262e99)=>{const _0x13beb9=_0x136382;if(validateAccess(_0x262e99,_0x288580)['allow'])toggleBot(_0x496026[_0x13beb9(0x216)],_0x496026[_0x13beb9(0x24a)],_0x496026['live']);else logging(_0x13beb9(0x278));}),_0x4d6ea9['on'](_0x136382(0x26b),(_0x2e75f7,_0x4b60bd)=>{const _0x4ca86c=_0x136382;if(validateAccess(_0x4b60bd,_0x288580)[_0x4ca86c(0x26f)])toggleBotMode(_0x2e75f7);else logging(_0x4ca86c(0x278));}),_0x4d6ea9['on'](_0x136382(0x212),(_0x41ea21,_0x322c7e)=>{const _0x3ceeeb=_0x136382;if(validateAccess(_0x322c7e,_0x288580)[_0x3ceeeb(0x26f)])deleteBot(_0x41ea21);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4d6ea9['on'](_0x136382(0x18d),(_0xfa76b4,_0x55c7f7)=>{const _0x4725ed=_0x136382;if(validateAccess(_0x55c7f7,_0x288580)[_0x4725ed(0x26f)])storeSettings(_0xfa76b4,!![]);else logging(_0x4725ed(0x200));}),_0x4d6ea9['on'](_0x136382(0x1a0),_0x3391e8=>{const _0x399cd2=_0x136382;if(validateAccess(_0x3391e8,_0x288580)[_0x399cd2(0x26f)])updateBB();else logging(_0x399cd2(0x2c0));}),_0x4d6ea9['on'](_0x136382(0x25b),_0x43209c=>{const _0x54cc4f=_0x136382;if(validateAccess(_0x43209c,_0x288580)[_0x54cc4f(0x26f)]){if(devices[_0x288580][_0x54cc4f(0x2a9)])clearTimeout(devices[_0x288580][_0x54cc4f(0x2a9)]);if(devices[_0x288580][_0x54cc4f(0x1c6)])clearTimeout(devices[_0x288580][_0x54cc4f(0x1c6)]);removeSocketListeners(getClient(_0x4d6ea9['id'])[_0x54cc4f(0x1cf)]),addBlacklist(_0x288580),devices[_0x288580][_0x54cc4f(0x248)]=null,devices[_0x288580][_0x54cc4f(0x209)]=null,devices[_0x288580][_0x54cc4f(0x2b7)][_0x54cc4f(0x236)]=null,io['to'](getClient(_0x4d6ea9['id'])['uuid'])[_0x54cc4f(0x27c)](_0x54cc4f(0x24a),{'access':{'allow':![],'reason':_0x54cc4f(0x1e0),'token':null}});}else logging(_0x54cc4f(0x20a));});}function initializeSocketBot(_0x3fa5e4){const _0x3912f6=_0x4f25fc,_0x754b49=getClient(_0x3fa5e4['id'])[_0x3912f6(0x2d0)],_0x2234c2=getClient(_0x3fa5e4['id'])[_0x3912f6(0x1cf)];_0x3fa5e4['on'](_0x3912f6(0x222),(_0x2aca5d,_0x304c4a)=>{const _0x50eec1=_0x3912f6;if(validateAccess(_0x304c4a,_0x2234c2)[_0x50eec1(0x26f)]){if(pid[_0x754b49])pid[_0x754b49][_0x50eec1(0x1ab)]({'function':'emitHistory','args':_0x2aca5d});}else logging(_0x50eec1(0x292));}),_0x3fa5e4['on'](_0x3912f6(0x189),(_0x575136,_0x36a2e2)=>{const _0x25f463=_0x3912f6;if(validateAccess(_0x36a2e2,_0x2234c2)[_0x25f463(0x26f)]){if(pid[_0x754b49])pid[_0x754b49][_0x25f463(0x1ab)]({'function':_0x25f463(0x1dd),'args':_0x575136});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x3fa5e4['on'](_0x3912f6(0x2a0),(_0x7f7cd8,_0x410fba)=>{const _0x204589=_0x3912f6;if(validateAccess(_0x410fba,_0x2234c2)['allow']){if(pid[_0x754b49])pid[_0x754b49][_0x204589(0x1ab)]({'function':_0x204589(0x1f6),'args':_0x7f7cd8});}else logging(_0x204589(0x1c5));}),_0x3fa5e4['on'](_0x3912f6(0x1aa),(_0x125652,_0x4a928f)=>{const _0x11a5db=_0x3912f6;if(validateAccess(_0x4a928f,_0x2234c2)['allow']){if(pid[_0x754b49])pid[_0x754b49][_0x11a5db(0x1ab)]({'function':_0x11a5db(0x1ae),'args':_0x125652});}else logging(_0x11a5db(0x2c8));}),_0x3fa5e4['on'](_0x3912f6(0x19b),(_0xa4ae0e,_0x4fe3bd)=>{const _0x445105=_0x3912f6;if(validateAccess(_0x4fe3bd,_0x2234c2)['allow']){if(pid[_0x754b49])pid[_0x754b49][_0x445105(0x1ab)]({'function':_0x445105(0x231),'args':_0xa4ae0e});}else logging(_0x445105(0x234));}),_0x3fa5e4['on']('get-starting-balances',_0x461911=>{const _0x3963df=_0x3912f6;if(validateAccess(_0x461911,_0x2234c2)['allow']){if(pid[_0x754b49])pid[_0x754b49]['send']({'function':_0x3963df(0x224),'args':null});}else logging(_0x3963df(0x20d));}),_0x3fa5e4['on'](_0x3912f6(0x272),(_0x4008b7,_0x12c1e5)=>{const _0x4550f0=_0x3912f6;if(validateAccess(_0x12c1e5,_0x2234c2)[_0x4550f0(0x26f)]){if(pid[_0x754b49])pid[_0x754b49][_0x4550f0(0x1ab)]({'function':_0x4550f0(0x26e),'args':_0x4008b7});}else logging(_0x4550f0(0x2dd));}),_0x3fa5e4['on'](_0x3912f6(0x22d),_0x38edca=>{const _0x5a424c=_0x3912f6;if(validateAccess(_0x38edca,_0x2234c2)[_0x5a424c(0x26f)]){if(pid[_0x754b49])pid[_0x754b49]['send']({'function':'cancelLoading','args':null});}else logging(_0x5a424c(0x1be));}),_0x3fa5e4['on'](_0x3912f6(0x25b),_0x260de2=>{const _0x1e7d7b=_0x3912f6;if(validateAccess(_0x260de2,_0x2234c2)['allow']){if(devices[_0x2234c2]['pidRefreshToken'])clearTimeout(devices[_0x2234c2]['pidRefreshToken']);if(devices[_0x2234c2][_0x1e7d7b(0x1c6)])clearTimeout(devices[_0x2234c2]['pidExpireLogin']);removeSocketListeners(getClient(_0x3fa5e4['id'])['uuid']),addBlacklist(_0x2234c2),devices[_0x2234c2][_0x1e7d7b(0x248)]=null,devices[_0x2234c2]['telegram2FaApproval']=null,devices[_0x2234c2][_0x1e7d7b(0x2b7)][_0x1e7d7b(0x236)]=null,io['to'](getClient(_0x3fa5e4['id'])['uuid'])[_0x1e7d7b(0x27c)](_0x1e7d7b(0x24a),{'access':{'allow':![],'reason':_0x1e7d7b(0x1e0),'token':null}});}else logging(_0x1e7d7b(0x20a));});}function removeSocketListeners(_0x1f8011){getClientsWithUuid(_0x1f8011)['forEach'](_0x1b73d7=>{const _0x4a546d=_0x238c;getSocket(_0x1b73d7['id'])[_0x4a546d(0x1fa)]();});}function cleanSettings(){const _0x709b32=_0x4f25fc;let _0x11d40d=settings;return settings[_0x709b32(0x1db)]&&settings[_0x709b32(0x1db)]!=''&&(_0x11d40d={..._0x11d40d,'telegramToken':_0x709b32(0x241)}),settings[_0x709b32(0x273)]&&settings[_0x709b32(0x273)]!=''&&(_0x11d40d={..._0x11d40d,'bbPassword':_0x709b32(0x241)}),_0x11d40d;}function updateBB(){const _0x31b3b7=_0x4f25fc;installingUpdate=!![],config['forEach'](_0x2f4852=>{const _0x2be60a=_0x238c;restartBot(_0x2f4852[_0x2be60a(0x216)]);}),process[_0x31b3b7(0x1ab)]({'update':!![]},_0x43a048=>{});}function startBot(_0x2c70bb,_0x1434da,_0x17726c){const _0x6eba9b=_0x4f25fc;let _0x2a42d9=![];const _0xff6207=_0x2c70bb[0x0];_0x1434da={..._0x1434da,'stdio':['inherit',_0x6eba9b(0x29c),_0x6eba9b(0x29c),_0x6eba9b(0x295)]},pid[_0xff6207]=childProcess[_0x6eba9b(0x2da)](botfile,_0x2c70bb,_0x1434da),pid[_0xff6207]['on']('message',_0x2ce1a3=>{const _0x5d5834=_0x6eba9b;switch(Object[_0x5d5834(0x1ed)](_0x2ce1a3)[0x0]){case _0x5d5834(0x290):updateBotName(_0xff6207,_0x2ce1a3[_0x5d5834(0x290)]);break;case _0x5d5834(0x2de):updateBotManager();break;case _0x5d5834(0x24a):updateStatus(_0xff6207,_0x2ce1a3['status']);break;case'live':updateLive(_0xff6207,_0x2ce1a3[_0x5d5834(0x20b)]);break;case _0x5d5834(0x1a2):updateLive(_0xff6207,_0x2ce1a3[_0x5d5834(0x1a2)]),io['to'](_0xff6207)['emit'](_0x5d5834(0x24a),{'access':{'allow':![],'reason':_0x5d5834(0x1b3),'token':null}});break;case _0x5d5834(0x2e5):_0x2ce1a3[_0x5d5834(0x2e5)]=='restart'&&restartBot(_0xff6207);_0x2ce1a3[_0x5d5834(0x2e5)]==_0x5d5834(0x1fc)&&toggleBot(_0xff6207,_0x5d5834(0x1b7),'stopped');break;case'telegram':sendTelegram(_0xff6207,_0x2ce1a3[_0x5d5834(0x2ab)]);break;case _0x5d5834(0x26c):io['to'](_0xff6207)[_0x5d5834(0x27c)](_0x2ce1a3['function'],_0x2ce1a3[_0x5d5834(0x20f)]);break;}}),pid[_0xff6207]['on']('error',function(_0x107a43){if(_0x2a42d9)return;_0x2a42d9=!![],_0x17726c(_0x107a43);}),pid[_0xff6207]['on'](_0x6eba9b(0x197),function(_0x2e8b26){const _0x374d25=_0x6eba9b;if(installingUpdate)return;if(_0x2a42d9)return;_0x2a42d9=!![],_0x17726c(null);const _0x476ece=dbConfig[_0x374d25(0x28f)](_0x374d25(0x29e))[_0x374d25(0x281)]({'botID':_0xff6207})[_0x374d25(0x1a4)]();_0x476ece&&(_0x476ece[_0x374d25(0x24a)]==_0x374d25(0x21f)||_0x476ece[_0x374d25(0x24a)]==_0x374d25(0x181))&&(updateLive(_0xff6207,'stopped'),logging('restarting\x20Bot\x20'+_0xff6207),startBot([_0xff6207,userID],{'cwd':bbpath},function(_0x1e5c7e){if(_0x1e5c7e)logging(_0x1e5c7e);}));});}function stopBot(_0x3cc266){const _0x5100fd=_0x4f25fc;getClientsWithBotID(_0x3cc266)[_0x5100fd(0x2cf)](_0xbd9afe=>{const _0x51f932=_0x5100fd;getSocket(_0xbd9afe['id'])[_0x51f932(0x2a2)](!![]),removeClient(_0xbd9afe['id']);}),pid[_0x3cc266]&&(pid[_0x3cc266][_0x5100fd(0x1fc)](),pid[_0x3cc266]=null);}function restartBot(_0x581823){const _0x2a7b6e=_0x4f25fc;if(pid[_0x581823])pid[_0x581823][_0x2a7b6e(0x1fc)]();}function addBot(){const _0x174f3e=_0x4f25fc;let _0x4b8a12;for(let _0x1eec83=0x1;_0x1eec83<0x3e9;_0x1eec83++){_0x4b8a12=_0x1eec83['toString']()[_0x174f3e(0x2b1)](0x3,'0');let _0x28403d=config[_0x174f3e(0x281)](_0x56bd59=>_0x56bd59['botID']==_0x4b8a12);if(!_0x28403d)break;}if(_0x4b8a12==='1000'){logging(_0x174f3e(0x183));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x4b8a12),dbConfig['get'](_0x174f3e(0x29e))[_0x174f3e(0x240)]({'botID':_0x4b8a12,'botname':'Bot\x20'+_0x4b8a12,'status':'new','live':''})['write'](),startBot([_0x4b8a12,userID],{'cwd':bbpath},function(_0x25256a){if(_0x25256a)logging(_0x25256a);}),config=getConfiguration(),io['to'](_0x174f3e(0x2ac))[_0x174f3e(0x27c)](_0x174f3e(0x29e),config);}function deleteBot(_0x4dc74b){const _0x20278b=_0x4f25fc;getClientsWithBotID(_0x4dc74b)[_0x20278b(0x2cf)](_0x1fefc7=>{const _0x6bfa01=_0x20278b;getSocket(_0x1fefc7['id'])[_0x6bfa01(0x2a2)](!![]),removeClient(_0x1fefc7['id']);}),dbConfig[_0x20278b(0x28f)]('bots')['remove']({'botID':_0x4dc74b})[_0x20278b(0x1b8)](),logging(_0x20278b(0x228)+_0x4dc74b),stopBot(_0x4dc74b);try{fs['unlinkSync'](path[_0x20278b(0x1a6)](configpath,_0x20278b(0x202)+_0x4dc74b+'-config.json')),fs['unlinkSync'](path['join'](configpath,_0x20278b(0x202)+_0x4dc74b+_0x20278b(0x2d8))),fs[_0x20278b(0x271)](path['join'](configpath,_0x20278b(0x202)+_0x4dc74b+'-performance.json')),fs[_0x20278b(0x271)](path['join'](configpath,_0x20278b(0x202)+_0x4dc74b+_0x20278b(0x1c8)));}catch(_0x3b96c4){if(_0x3b96c4)logging(_0x20278b(0x237),_0x3b96c4);}config=getConfiguration(),io['to'](_0x20278b(0x2ac))[_0x20278b(0x27c)]('bots',config);}function toggleBot(_0x47fe76,_0x456f2e,_0x3acacd){const _0x1c71c4=_0x4f25fc;dbConfig[_0x1c71c4(0x28f)](_0x1c71c4(0x29e))[_0x1c71c4(0x281)]({'botID':_0x47fe76})[_0x1c71c4(0x18c)]({'status':_0x456f2e})[_0x1c71c4(0x18c)]({'live':_0x3acacd})['write']();if(_0x456f2e==_0x1c71c4(0x21f)||_0x456f2e==_0x1c71c4(0x181))logging(_0x1c71c4(0x2c5)+_0x47fe76),startBot([_0x47fe76,userID],{'cwd':bbpath},function(_0x25f6c6){if(_0x25f6c6)logging(_0x25f6c6);});else(_0x456f2e==_0x1c71c4(0x1b7)||_0x456f2e=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x47fe76),stopBot(_0x47fe76));config=getConfiguration(),io['to'](_0x1c71c4(0x2ac))[_0x1c71c4(0x27c)]('bots',config);}function toggleStatus(_0xe554b1){const _0x37275b=_0x4f25fc;let _0x1fae71=dbConfig[_0x37275b(0x28f)](_0x37275b(0x29e))[_0x37275b(0x281)]({'botID':_0xe554b1})['value'](),_0x48d963;if(_0x1fae71[_0x37275b(0x24a)]==='enabled')_0x48d963='disabled';else{if(_0x1fae71['status']==='new')_0x48d963=_0x37275b(0x2e0);else{if(_0x1fae71[_0x37275b(0x24a)]===_0x37275b(0x2e0))_0x48d963=_0x37275b(0x181);else{if(_0x1fae71['status']===_0x37275b(0x1b7))_0x48d963=_0x37275b(0x21f);}}}return _0x48d963;}function updateStatus(_0x1fa4a4,_0x1adcd0){const _0x1635ff=_0x4f25fc;dbConfig[_0x1635ff(0x28f)](_0x1635ff(0x29e))[_0x1635ff(0x281)]({'botID':_0x1fa4a4})[_0x1635ff(0x18c)]({'status':_0x1adcd0})[_0x1635ff(0x1b8)](),config=getConfiguration(),io['to'](_0x1635ff(0x2ac))[_0x1635ff(0x27c)](_0x1635ff(0x29e),config);}function updateLive(_0x57c44a,_0x199cb7){const _0x2d81dc=_0x4f25fc;dbConfig['get'](_0x2d81dc(0x29e))[_0x2d81dc(0x281)]({'botID':_0x57c44a})[_0x2d81dc(0x18c)]({'live':_0x199cb7})[_0x2d81dc(0x1b8)](),config=getConfiguration(),io['to'](_0x2d81dc(0x2ac))['emit'](_0x2d81dc(0x29e),config);}function updateBotName(_0x5d6b7d,_0x20cd55){const _0x3296f8=_0x4f25fc;dbConfig[_0x3296f8(0x28f)](_0x3296f8(0x29e))['find']({'botID':_0x5d6b7d})['assign']({'botname':_0x20cd55})[_0x3296f8(0x1b8)](),config=getConfiguration(),io['to'](_0x3296f8(0x2ac))[_0x3296f8(0x27c)]('bots',config);}function updateBotManager(){const _0x58e0dc=_0x4f25fc;config=getConfiguration(),io['to']('botmanager')[_0x58e0dc(0x27c)](_0x58e0dc(0x29e),config);}function toggleBotMode(_0x5f5630){const _0x29f7bf=_0x4f25fc;if(pid[_0x5f5630])pid[_0x5f5630][_0x29f7bf(0x1ab)]({'function':_0x29f7bf(0x2d6),'args':null});else{const _0x12d544=configpath+_0x29f7bf(0x202)+_0x5f5630+_0x29f7bf(0x1cb),_0x33b2cc=fs[_0x29f7bf(0x1d7)](_0x12d544),_0x10a5c3=JSON[_0x29f7bf(0x191)](_0x33b2cc),_0x1f3080=_0x10a5c3[_0x29f7bf(0x2d0)][0x0][_0x29f7bf(0x1ce)];_0x10a5c3['bot'][0x0][_0x29f7bf(0x1ce)]=!_0x1f3080;const _0x3c43b9=JSON['stringify'](_0x10a5c3,null,0x2);fs[_0x29f7bf(0x283)](_0x12d544,_0x3c43b9),config=getConfiguration(),io['to'](_0x29f7bf(0x2ac))[_0x29f7bf(0x27c)]('bots',config);}}function telegramError(_0x3c9a46){const _0x2450a3=_0x4f25fc;console[_0x2450a3(0x229)](getTimeStamp()+_0x2450a3(0x1ca));}function validateTelegram(_0x680399){const _0xbfdb58=_0x4f25fc;if(_0x680399['from'][_0xbfdb58(0x201)]!=settings[_0xbfdb58(0x2d1)]&&'@'+_0x680399[_0xbfdb58(0x2a5)][_0xbfdb58(0x201)]!=settings['telegramUsername'])return tgBot[_0xbfdb58(0x227)](_0x680399['chat']['id'],_0xbfdb58(0x1a9),{'parse_mode':_0xbfdb58(0x1c0)})[_0xbfdb58(0x2e8)](_0x5271fa=>{telegramError(_0x5271fa);}),![];return!![];}async function initTelegram(){const _0x508c47=_0x4f25fc;if(tgBot)tgBot[_0x508c47(0x293)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x3df11d=_0x508c47(0x2a7);_0x3df11d+='\x0a',_0x3df11d+=_0x508c47(0x1d4),_0x3df11d+=_0x508c47(0x24b),_0x3df11d+=_0x508c47(0x1da),_0x3df11d+=_0x508c47(0x19e),_0x3df11d+=_0x508c47(0x2e1),_0x3df11d+=_0x508c47(0x219),_0x3df11d+=_0x508c47(0x220),_0x3df11d+=_0x508c47(0x1c9),_0x3df11d+=_0x508c47(0x18b),_0x3df11d+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x379842=_0x508c47(0x2dc);_0x379842+='\x0a',_0x379842+=_0x3df11d,tgBot[_0x508c47(0x24c)](/\/start/,_0x2e024b=>{const _0x3bed59=_0x508c47;if(!validateTelegram(_0x2e024b))return;if(settings[_0x3bed59(0x23f)]!=_0x2e024b[_0x3bed59(0x186)]['id'])updateSetting(_0x3bed59(0x23f),_0x2e024b[_0x3bed59(0x186)]['id']);updateSetting(_0x3bed59(0x261),!![]),tgBot[_0x3bed59(0x227)](_0x2e024b[_0x3bed59(0x186)]['id'],_0x379842)[_0x3bed59(0x2e8)](_0x51f643=>{telegramError(_0x51f643);});}),tgBot[_0x508c47(0x24c)](/\/enable/,_0x2faaed=>{const _0x3480b8=_0x508c47;if(!validateTelegram(_0x2faaed))return;if(settings[_0x3480b8(0x23f)]!=_0x2faaed[_0x3480b8(0x186)]['id'])updateSetting(_0x3480b8(0x23f),_0x2faaed[_0x3480b8(0x186)]['id']);updateSetting(_0x3480b8(0x261),!![]),tgBot[_0x3480b8(0x227)](_0x2faaed['chat']['id'],_0x3480b8(0x1a7))['catch'](_0x583194=>{telegramError(_0x583194);});}),tgBot[_0x508c47(0x24c)](/\/config/,async _0x53a9de=>{const _0x28bdf5=_0x508c47;if(!validateTelegram(_0x53a9de))return;tgBot[_0x28bdf5(0x253)](_0x28bdf5(0x2d9)),tgBot[_0x28bdf5(0x227)](_0x53a9de[_0x28bdf5(0x186)]['id'],_0x28bdf5(0x29a),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x28bdf5(0x22e),'callback_data':'alerts'},{'text':_0x28bdf5(0x1bd),'callback_data':_0x28bdf5(0x29b)}]]}})[_0x28bdf5(0x2e8)](_0x20ff74=>{telegramError(_0x20ff74);}),tgBot['on'](_0x28bdf5(0x2d9),async _0x586b74=>{const _0x5ed543=_0x28bdf5,_0x7b6cf1=_0x586b74[_0x5ed543(0x288)],_0x5e86c3=_0x586b74[_0x5ed543(0x2c3)];tgBot[_0x5ed543(0x1df)](_0x586b74['id'])[_0x5ed543(0x2e2)](async()=>{const _0x1402a4=_0x5ed543;_0x7b6cf1==_0x1402a4(0x258)&&(updateSetting(_0x1402a4(0x27b),_0x1402a4(0x258)),updateSetting(_0x1402a4(0x261),!![]),await tgBot[_0x1402a4(0x227)](_0x5e86c3[_0x1402a4(0x186)]['id'],_0x1402a4(0x28b))[_0x1402a4(0x2e8)](_0x3d404b=>{telegramError(_0x3d404b);}));_0x7b6cf1==_0x1402a4(0x1b9)&&(updateSetting(_0x1402a4(0x27b),_0x1402a4(0x1b9)),updateSetting('telegramEnabled',!![]),await tgBot[_0x1402a4(0x227)](_0x5e86c3['chat']['id'],_0x1402a4(0x286))['catch'](_0x4e96db=>{telegramError(_0x4e96db);}));_0x7b6cf1==_0x1402a4(0x29b)&&(updateSetting(_0x1402a4(0x27b),_0x1402a4(0x29b)),updateSetting(_0x1402a4(0x261),!![]),await tgBot[_0x1402a4(0x227)](_0x5e86c3[_0x1402a4(0x186)]['id'],_0x1402a4(0x1e2))[_0x1402a4(0x2e8)](_0x574240=>{telegramError(_0x574240);}));if(!settings[_0x1402a4(0x23f)])tgBot['sendMessage'](_0x5e86c3[_0x1402a4(0x186)]['id'],_0x1402a4(0x203))[_0x1402a4(0x2e8)](_0x4e29f8=>{telegramError(_0x4e29f8);});}),tgBot[_0x5ed543(0x253)]('callback_query');});}),tgBot[_0x508c47(0x24c)](/\/status/,_0x22070a=>{const _0x2e330e=_0x508c47;if(!validateTelegram(_0x22070a))return;const _0x230c45=getBotsWithMode();let _0x10b324=_0x2e330e(0x1b4);config[_0x2e330e(0x2cf)](_0x31e3a1=>{const _0x54d8dc=_0x2e330e,_0x54b575=_0x230c45[_0x54d8dc(0x281)](_0x3f4bd7=>_0x3f4bd7[_0x54d8dc(0x216)]==_0x31e3a1[_0x54d8dc(0x216)])[_0x54d8dc(0x2b2)];_0x10b324+=_0x54d8dc(0x2bb)+_0x31e3a1[_0x54d8dc(0x216)]+':\x20'+_0x31e3a1[_0x54d8dc(0x24a)]+_0x54d8dc(0x27a)+_0x54b575+_0x54d8dc(0x27a)+_0x31e3a1[_0x54d8dc(0x20b)]+'\x0a';}),_0x10b324+='\x0a',_0x10b324+=_0x2e330e(0x1bb),_0x10b324+=!settings[_0x2e330e(0x261)]?_0x2e330e(0x2b8):_0x2e330e(0x206),_0x10b324+=settings['telegramEnabled']?settings['telegramEvents']=='all'?_0x2e330e(0x2df):_0x2e330e(0x2bd)+settings[_0x2e330e(0x27b)]+_0x2e330e(0x22f):'',tgBot[_0x2e330e(0x227)](_0x22070a['chat']['id'],_0x10b324,{'parse_mode':_0x2e330e(0x1c0)})[_0x2e330e(0x2e8)](_0x3a01e9=>{telegramError(_0x3a01e9);});}),tgBot[_0x508c47(0x24c)](/\/restart/,_0x197279=>{const _0x5be1b5=_0x508c47;if(!validateTelegram(_0x197279))return;tgBot[_0x5be1b5(0x253)](_0x5be1b5(0x2d9));const _0xc40a4=getEnabledBots();if(_0xc40a4[_0x5be1b5(0x268)]==0x0)tgBot[_0x5be1b5(0x227)](_0x197279[_0x5be1b5(0x186)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x3fabdc=>{telegramError(_0x3fabdc);});else{if(_0xc40a4[_0x5be1b5(0x268)]>0x1)_0xc40a4[_0x5be1b5(0x240)]({'botID':_0x5be1b5(0x29b)});let _0x6fd5e9=[],_0x55f773=[];const _0x55433c=_0xc40a4['length']%0x4==0x0||_0xc40a4[_0x5be1b5(0x268)]%0x4==0x3||_0xc40a4[_0x5be1b5(0x268)]%0x3==0x1?0x4:0x3;let _0x518843=0x0;_0xc40a4['forEach']((_0x5e74cb,_0x1af548)=>{const _0x1969db=_0x5be1b5;if(_0x1af548%_0x55433c==0x0)_0x55f773=[];_0x55f773[_0x1969db(0x240)]({'text':_0x5e74cb[_0x1969db(0x216)]=='all'?_0x1969db(0x1e6):_0x1969db(0x2bb)+_0x5e74cb[_0x1969db(0x216)],'callback_data':_0x5e74cb['botID']}),_0x1af548%_0x55433c==0x0&&(_0x6fd5e9[_0x518843]=_0x55f773,_0x518843++);}),tgBot['sendMessage'](_0x197279[_0x5be1b5(0x186)]['id'],_0x5be1b5(0x2e3),{'reply_markup':{'inline_keyboard':_0x6fd5e9}})[_0x5be1b5(0x2e8)](_0x932fbe=>{telegramError(_0x932fbe);}),tgBot['on']('callback_query',async _0x11ae56=>{const _0x4ecf43=_0x5be1b5,_0x57e6c8=_0x11ae56['data'],_0x12da22=_0x11ae56[_0x4ecf43(0x2c3)];tgBot[_0x4ecf43(0x1df)](_0x11ae56['id'])[_0x4ecf43(0x2e2)](async()=>{const _0x4b4ce3=_0x4ecf43;_0x57e6c8=='all'?(tgBot[_0x4b4ce3(0x227)](_0x12da22[_0x4b4ce3(0x186)]['id'],_0x4b4ce3(0x1dc))[_0x4b4ce3(0x2e8)](_0x167028=>{telegramError(_0x167028);}),config['forEach'](_0x426e37=>{restartBot(_0x426e37['botID']);})):(tgBot[_0x4b4ce3(0x227)](_0x12da22[_0x4b4ce3(0x186)]['id'],_0x4b4ce3(0x28a)+_0x57e6c8)[_0x4b4ce3(0x2e8)](_0x46eef2=>{telegramError(_0x46eef2);}),restartBot(_0x57e6c8));}),tgBot[_0x4ecf43(0x253)](_0x4ecf43(0x2d9));});}}),tgBot[_0x508c47(0x24c)](/\/on/,_0x1037f6=>{const _0x5523f5=_0x508c47;if(!validateTelegram(_0x1037f6))return;tgBot[_0x5523f5(0x253)](_0x5523f5(0x2d9));const _0x5913ea=getDisabledBots();if(_0x5913ea[_0x5523f5(0x268)]==0x0)tgBot[_0x5523f5(0x227)](_0x1037f6['chat']['id'],_0x5523f5(0x21d))[_0x5523f5(0x2e8)](_0x402da3=>{telegramError(_0x402da3);});else{if(_0x5913ea[_0x5523f5(0x268)]>0x1)_0x5913ea['push']({'botID':_0x5523f5(0x29b)});let _0x3622bd=[],_0x1489da=[];const _0x38fbb7=_0x5913ea['length']%0x4==0x0||_0x5913ea[_0x5523f5(0x268)]%0x4==0x3||_0x5913ea[_0x5523f5(0x268)]%0x3==0x1?0x4:0x3;let _0x280eb7=0x0;_0x5913ea[_0x5523f5(0x2cf)]((_0x28e1d1,_0x2a4d38)=>{const _0x3c2daa=_0x5523f5;if(_0x2a4d38%_0x38fbb7==0x0)_0x1489da=[];_0x1489da[_0x3c2daa(0x240)]({'text':_0x28e1d1[_0x3c2daa(0x216)]==_0x3c2daa(0x29b)?_0x3c2daa(0x1e6):'Bot\x20'+_0x28e1d1[_0x3c2daa(0x216)],'callback_data':_0x28e1d1['botID']}),_0x2a4d38%_0x38fbb7==0x0&&(_0x3622bd[_0x280eb7]=_0x1489da,_0x280eb7++);}),tgBot[_0x5523f5(0x227)](_0x1037f6[_0x5523f5(0x186)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3622bd}})[_0x5523f5(0x2e8)](_0x4a7424=>{telegramError(_0x4a7424);}),tgBot['on'](_0x5523f5(0x2d9),async _0x38d1bc=>{const _0x49404b=_0x5523f5,_0x364ad8=_0x38d1bc[_0x49404b(0x288)],_0x44a5a6=_0x38d1bc[_0x49404b(0x2c3)];tgBot[_0x49404b(0x1df)](_0x38d1bc['id'])[_0x49404b(0x2e2)](async()=>{const _0x2f820e=_0x49404b;_0x364ad8==_0x2f820e(0x29b)?(tgBot[_0x2f820e(0x227)](_0x44a5a6[_0x2f820e(0x186)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x2f820e(0x2e8)](_0x5aa394=>{telegramError(_0x5aa394);}),_0x5913ea[_0x2f820e(0x2cf)](_0x19ccde=>{const _0x48510b=_0x2f820e;if(_0x19ccde[_0x48510b(0x216)]!=_0x48510b(0x29b))toggleBot(_0x19ccde['botID'],toggleStatus(_0x19ccde['botID']),_0x48510b(0x289));})):(tgBot[_0x2f820e(0x227)](_0x44a5a6[_0x2f820e(0x186)]['id'],_0x2f820e(0x21e)+_0x364ad8)[_0x2f820e(0x2e8)](_0x4927a7=>{telegramError(_0x4927a7);}),toggleBot(_0x364ad8,toggleStatus(_0x364ad8),_0x2f820e(0x289)));}),tgBot[_0x49404b(0x253)](_0x49404b(0x2d9));});}}),tgBot[_0x508c47(0x24c)](/\/off/,_0x3ebfc7=>{const _0xcf4cf1=_0x508c47;if(!validateTelegram(_0x3ebfc7))return;tgBot[_0xcf4cf1(0x253)]('callback_query');const _0x5e7a39=getEnabledBots();if(_0x5e7a39['length']==0x0)tgBot[_0xcf4cf1(0x227)](_0x3ebfc7[_0xcf4cf1(0x186)]['id'],_0xcf4cf1(0x205))['catch'](_0x3a5ef7=>{telegramError(_0x3a5ef7);});else{if(_0x5e7a39[_0xcf4cf1(0x268)]>0x1)_0x5e7a39['push']({'botID':'all'});let _0x54bd06=[],_0x23b666=[];const _0x2386bb=_0x5e7a39['length']%0x4==0x0||_0x5e7a39[_0xcf4cf1(0x268)]%0x4==0x3||_0x5e7a39[_0xcf4cf1(0x268)]%0x3==0x1?0x4:0x3;let _0x34f1a7=0x0;_0x5e7a39[_0xcf4cf1(0x2cf)]((_0x4cb668,_0x18d381)=>{const _0x487373=_0xcf4cf1;if(_0x18d381%_0x2386bb==0x0)_0x23b666=[];_0x23b666[_0x487373(0x240)]({'text':_0x4cb668[_0x487373(0x216)]==_0x487373(0x29b)?_0x487373(0x1e6):'Bot\x20'+_0x4cb668[_0x487373(0x216)],'callback_data':_0x4cb668[_0x487373(0x216)]}),_0x18d381%_0x2386bb==0x0&&(_0x54bd06[_0x34f1a7]=_0x23b666,_0x34f1a7++);}),tgBot['sendMessage'](_0x3ebfc7[_0xcf4cf1(0x186)]['id'],_0xcf4cf1(0x25d),{'reply_markup':{'inline_keyboard':_0x54bd06}})['catch'](_0x7a57a3=>{telegramError(_0x7a57a3);}),tgBot['on']('callback_query',async _0x1e47ad=>{const _0x411b=_0xcf4cf1,_0xe036bb=_0x1e47ad[_0x411b(0x288)],_0x438d4b=_0x1e47ad[_0x411b(0x2c3)];tgBot[_0x411b(0x1df)](_0x1e47ad['id'])[_0x411b(0x2e2)](async()=>{const _0x19c747=_0x411b;_0xe036bb=='all'?(tgBot[_0x19c747(0x227)](_0x438d4b[_0x19c747(0x186)]['id'],_0x19c747(0x1ad))[_0x19c747(0x2e8)](_0x7870aa=>{telegramError(_0x7870aa);}),_0x5e7a39[_0x19c747(0x2cf)](_0x4d1287=>{const _0x2374e7=_0x19c747;if(_0x4d1287['botID']!=_0x2374e7(0x29b))toggleBot(_0x4d1287[_0x2374e7(0x216)],toggleStatus(_0x4d1287[_0x2374e7(0x216)]),_0x2374e7(0x289));})):(tgBot['sendMessage'](_0x438d4b[_0x19c747(0x186)]['id'],_0x19c747(0x1f0)+_0xe036bb)['catch'](_0xe88ef8=>{telegramError(_0xe88ef8);}),toggleBot(_0xe036bb,toggleStatus(_0xe036bb),_0x19c747(0x289)));}),tgBot[_0x411b(0x253)]('callback_query');});}}),tgBot[_0x508c47(0x24c)](/\/toggle/,_0x19d01e=>{const _0x31cfca=_0x508c47;if(!validateTelegram(_0x19d01e))return;tgBot[_0x31cfca(0x253)](_0x31cfca(0x2d9));const _0x5230bf=getBotsWithMode();if(_0x5230bf[_0x31cfca(0x268)]==0x0)tgBot[_0x31cfca(0x227)](_0x19d01e[_0x31cfca(0x186)]['id'],_0x31cfca(0x205))[_0x31cfca(0x2e8)](_0x19feb3=>{telegramError(_0x19feb3);});else{let _0x5129b1=[],_0x101a8e=[];const _0x5b3eb3=0x2;let _0x5775fe=0x0;_0x5230bf[_0x31cfca(0x2cf)]((_0x36ea4b,_0x2bab55)=>{const _0x4274f0=_0x31cfca;if(_0x2bab55%_0x5b3eb3==0x0)_0x101a8e=[];_0x101a8e[_0x4274f0(0x240)]({'text':_0x4274f0(0x2bb)+_0x36ea4b[_0x4274f0(0x216)]+'\x20('+_0x36ea4b[_0x4274f0(0x2b2)]+')','callback_data':_0x36ea4b['botID']}),_0x2bab55%_0x5b3eb3==0x0&&(_0x5129b1[_0x5775fe]=_0x101a8e,_0x5775fe++);}),tgBot[_0x31cfca(0x227)](_0x19d01e[_0x31cfca(0x186)]['id'],_0x31cfca(0x2bf),{'reply_markup':{'inline_keyboard':_0x5129b1}})[_0x31cfca(0x2e8)](_0x138b47=>{telegramError(_0x138b47);}),tgBot['on'](_0x31cfca(0x2d9),async _0x2dcbbd=>{const _0x25cbf5=_0x31cfca,_0x32da01=_0x2dcbbd[_0x25cbf5(0x288)],_0x5bfbf4=_0x2dcbbd[_0x25cbf5(0x2c3)];tgBot[_0x25cbf5(0x1df)](_0x2dcbbd['id'])[_0x25cbf5(0x2e2)](async()=>{const _0x16abd2=_0x25cbf5,_0x27a8fb=_0x5230bf['find'](_0x291c77=>_0x291c77[_0x16abd2(0x216)]==_0x32da01),_0x3d7c24=_0x27a8fb[_0x16abd2(0x2b2)]==_0x16abd2(0x1c4)?_0x16abd2(0x22a):'auto';tgBot[_0x16abd2(0x227)](_0x5bfbf4[_0x16abd2(0x186)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x32da01+_0x16abd2(0x277)+_0x3d7c24+_0x16abd2(0x269))[_0x16abd2(0x2e8)](_0x591b92=>{telegramError(_0x591b92);}),toggleBotMode(_0x32da01);}),tgBot[_0x25cbf5(0x253)](_0x25cbf5(0x2d9));});}}),tgBot['onText'](/\/names/,_0x369fb7=>{const _0x5b122c=_0x508c47;if(!validateTelegram(_0x369fb7))return;let _0x4cc039='';config[_0x5b122c(0x2cf)](_0x1d7ea5=>{const _0x2d5902=_0x5b122c;_0x4cc039+=_0x2d5902(0x2bb)+_0x1d7ea5[_0x2d5902(0x216)]+':\x20'+_0x1d7ea5['botname']+'\x0a';}),tgBot[_0x5b122c(0x227)](_0x369fb7['chat']['id'],_0x4cc039,{'parse_mode':_0x5b122c(0x1c0)})[_0x5b122c(0x2e8)](_0x450e95=>{telegramError(_0x450e95);});}),tgBot['onText'](/\/disable/,_0x1e52e2=>{const _0x30aad2=_0x508c47;if(!validateTelegram(_0x1e52e2))return;tgBot[_0x30aad2(0x227)](_0x1e52e2[_0x30aad2(0x186)]['id'],'Notifications\x20disabled')[_0x30aad2(0x2e8)](_0x5a9f2f=>{telegramError(_0x5a9f2f);}),updateSetting(_0x30aad2(0x261),![]);}),tgBot[_0x508c47(0x24c)](/\/help/,_0x204357=>{const _0x427380=_0x508c47;if(!validateTelegram(_0x204357))return;tgBot['sendMessage'](_0x204357[_0x427380(0x186)]['id'],_0x3df11d)['catch'](_0x3e8f3d=>{telegramError(_0x3e8f3d);});}),tgBot['on'](_0x508c47(0x1f8),_0x33d09a=>{const _0x384c4b=_0x508c47;_0x33d09a[_0x384c4b(0x195)]()[_0x384c4b(0x23d)](_0x384c4b(0x25e))&&(logging(_0x384c4b(0x1ec)),tgBot[_0x384c4b(0x293)](),tgBot=null,io['to'](_0x384c4b(0x2ac))[_0x384c4b(0x27c)](_0x384c4b(0x1c1),_0x384c4b(0x1ec)));}),process[_0x508c47(0x1bf)](_0x508c47(0x2c4),()=>{const _0x344817=_0x508c47;if(tgBot)tgBot[_0x344817(0x293)]();process[_0x344817(0x197)](0x1);}),process[_0x508c47(0x1bf)]('SIGTERM',()=>{const _0x534b1d=_0x508c47;if(tgBot)tgBot[_0x534b1d(0x293)]();process[_0x534b1d(0x197)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x2b4aa5,_0x4e1ecd){const _0x41f0b3=_0x4f25fc;if(settings['telegramEnabled']){if(settings[_0x41f0b3(0x27b)]==_0x41f0b3(0x29b)||(_0x4e1ecd[_0x41f0b3(0x2e4)]==_0x41f0b3(0x279)||_0x4e1ecd[_0x41f0b3(0x2e4)]==_0x41f0b3(0x26a))&&settings['telegramEvents']=='alerts'||_0x4e1ecd[_0x41f0b3(0x2e4)]==_0x41f0b3(0x284)&&settings[_0x41f0b3(0x27b)]==_0x41f0b3(0x258)){if(tgBot&&settings[_0x41f0b3(0x23f)]){if(_0x4e1ecd[_0x41f0b3(0x2c1)])tgBot['sendMessage'](settings['telegramChatId'],_0x4e1ecd[_0x41f0b3(0x290)]+_0x41f0b3(0x1cd)+_0x4e1ecd[_0x41f0b3(0x276)])[_0x41f0b3(0x2e8)](_0x373dba=>{telegramError(_0x373dba);});else tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20'+_0x2b4aa5+'\x20>\x20'+_0x4e1ecd[_0x41f0b3(0x276)])['catch'](_0x284d70=>{telegramError(_0x284d70);});}}}}function getDeviceWithIp(_0x20ebbc){const _0x8abd12=_0x4f25fc;return devices[_0x8abd12(0x281)](_0x11d29b=>_0x11d29b['ip']===_0x20ebbc);}function temporaryAccess2FA(_0x48021d,_0x50b8a1){const _0x124d67=_0x4f25fc;let _0x463434=new Date(),_0x1d3a26=![];if(lastIpApproval){if(_0x463434-lastIpApproval<0x1388)_0x1d3a26=!![];}lastIpApproval=new Date();if(_0x1d3a26)return;tgBot&&settings[_0x124d67(0x23f)]&&(tgBot[_0x124d67(0x253)](_0x124d67(0x2d9)),tgBot[_0x124d67(0x227)](settings[_0x124d67(0x23f)],_0x124d67(0x2db)+normalizeIP(_0x50b8a1)['show']+'</b>\x20?',{'parse_mode':_0x124d67(0x1c0),'reply_markup':{'inline_keyboard':[[{'text':_0x124d67(0x294),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x124d67(0x1f1),'callback_data':'30'},{'text':_0x124d67(0x1d9),'callback_data':'reject'}]]}})[_0x124d67(0x2e8)](_0x4ab0a9=>{telegramError(_0x4ab0a9);}),tgBot['on'](_0x124d67(0x2d9),async _0x287ce7=>{const _0x14948c=_0x124d67,_0x2aa6d3=_0x287ce7[_0x14948c(0x288)],_0x2b2674=_0x287ce7['message'];tgBot[_0x14948c(0x1df)](_0x287ce7['id'])['then'](async()=>{const _0x2e3e04=_0x14948c;devices[_0x48021d][_0x2e3e04(0x248)]={'clientip':_0x50b8a1,'timestamp':new Date()[_0x2e3e04(0x1eb)](),'expiry':_0x2aa6d3},_0x2aa6d3!=_0x2e3e04(0x1d9)?(await tgBot[_0x2e3e04(0x227)](_0x2b2674['chat']['id'],_0x2e3e04(0x291)+_0x2aa6d3+_0x2e3e04(0x262),{'parse_mode':'HTML'})[_0x2e3e04(0x2e8)](_0x136ac4=>{telegramError(_0x136ac4);}),io['to'](_0x48021d)['emit'](_0x2e3e04(0x24a),{'access':{'allow':![],'reason':_0x2e3e04(0x1b3),'token':null}})):(await tgBot['sendMessage'](_0x2b2674[_0x2e3e04(0x186)]['id'],_0x2e3e04(0x247))[_0x2e3e04(0x2e8)](_0x1b7f7e=>{telegramError(_0x1b7f7e);}),io['to'](_0x48021d)['emit']('status',{'access':{'allow':![],'reason':_0x2e3e04(0x223),'token':null}}));}),tgBot[_0x14948c(0x253)](_0x14948c(0x2d9));}));}function loginAccess2FA(_0x5c1a75,_0x4c0116){const _0x5a98c8=_0x4f25fc;tgBot&&settings['telegramChatId']&&(tgBot[_0x5a98c8(0x253)](_0x5a98c8(0x2d9)),tgBot[_0x5a98c8(0x227)](settings[_0x5a98c8(0x23f)],_0x5a98c8(0x188)+normalizeIP(_0x4c0116)[_0x5a98c8(0x23c)]+_0x5a98c8(0x1ff),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5a98c8(0x221),'callback_data':loginExpiry},{'text':_0x5a98c8(0x1d9),'callback_data':'reject'}]]}})[_0x5a98c8(0x2e8)](_0x3e0918=>{telegramError(_0x3e0918);}),tgBot['on'](_0x5a98c8(0x2d9),async _0x2ada6b=>{const _0x3097cf=_0x5a98c8,_0x1d899d=_0x2ada6b[_0x3097cf(0x288)],_0x1de1fd=_0x2ada6b[_0x3097cf(0x2c3)];tgBot[_0x3097cf(0x1df)](_0x2ada6b['id'])[_0x3097cf(0x2e2)](async()=>{const _0x474a23=_0x3097cf;devices[_0x5c1a75][_0x474a23(0x209)]={'clientip':_0x4c0116,'timestamp':new Date()[_0x474a23(0x1eb)](),'expiry':_0x1d899d},_0x1d899d!=_0x474a23(0x1d9)?(await tgBot['sendMessage'](_0x1de1fd[_0x474a23(0x186)]['id'],_0x474a23(0x24d),{'parse_mode':_0x474a23(0x1c0)})[_0x474a23(0x2e8)](_0x1fc388=>{telegramError(_0x1fc388);}),io['to'](_0x5c1a75)[_0x474a23(0x27c)](_0x474a23(0x24a),{'access':{'allow':![],'reason':_0x474a23(0x1b3),'token':null}})):(await tgBot[_0x474a23(0x227)](_0x1de1fd[_0x474a23(0x186)]['id'],_0x474a23(0x218))[_0x474a23(0x2e8)](_0x506c8e=>{telegramError(_0x506c8e);}),io['to'](_0x5c1a75)[_0x474a23(0x27c)](_0x474a23(0x24a),{'access':{'allow':![],'reason':_0x474a23(0x213),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x267135=_0x4f25fc;return dbConfig['get'](_0x267135(0x29e))[_0x267135(0x1e3)]('botID')[_0x267135(0x265)]({'status':'enabled'})[_0x267135(0x1a4)]()||[];}function getDisabledBots(){const _0x4acc20=_0x4f25fc;return dbConfig[_0x4acc20(0x28f)](_0x4acc20(0x29e))[_0x4acc20(0x1e3)](_0x4acc20(0x216))['filter']({'status':_0x4acc20(0x1b7)})[_0x4acc20(0x1a4)]()||[];}function getBotsWithMode(){const _0x2eec03=_0x4f25fc,_0x9da90e=dbConfig[_0x2eec03(0x28f)](_0x2eec03(0x29e))[_0x2eec03(0x1e3)](_0x2eec03(0x216))[_0x2eec03(0x1a4)]()||[];return _0x9da90e[_0x2eec03(0x2cf)](_0x1c169c=>{const _0x376b74=_0x2eec03,_0x49360c=configpath+_0x376b74(0x202)+_0x1c169c[_0x376b74(0x216)]+_0x376b74(0x1cb),_0x313cfd=fs['existsSync'](_0x49360c);if(_0x313cfd){const _0xf0d17f=fs[_0x376b74(0x1d7)](_0x49360c);try{const _0x1787da=JSON['parse'](_0xf0d17f),_0x216d02=_0x1787da?_0x1787da['bot'][0x0][_0x376b74(0x1ce)]:![];_0x1c169c['mode']=_0x216d02?_0x376b74(0x1c4):_0x376b74(0x22a);}catch(_0x4392cc){_0x1c169c[_0x376b74(0x2b2)]=_0x376b74(0x22a);}}else _0x1c169c[_0x376b74(0x2b2)]='manual';}),_0x9da90e;}function getSettings(){const _0x37ccf5=_0x4f25fc;return dbSettings[_0x37ccf5(0x28f)](_0x37ccf5(0x184))[_0x37ccf5(0x1a4)]()||{'timeshift':0x0};}function getSecure(){const _0x4c7ba4=_0x4f25fc;return dbSecure[_0x4c7ba4(0x28f)](_0x4c7ba4(0x280))['value']()||{};}function getBlacklist(){const _0x2acb6d=_0x4f25fc;return dbSecure['get'](_0x2acb6d(0x1f9))[_0x2acb6d(0x1a4)]()||[];}function broadcastToBots(_0x5c0cbd,_0x615c47){const _0x5f227b=_0x4f25fc;config[_0x5f227b(0x2cf)](_0x233a11=>{const _0x2d56ee=_0x5f227b;if(_0x233a11[_0x2d56ee(0x24a)]==_0x2d56ee(0x21f)&&_0x233a11[_0x2d56ee(0x20b)]=='running'){if(pid[_0x233a11['botID']])pid[_0x233a11[_0x2d56ee(0x216)]]['send']({[_0x5c0cbd]:_0x615c47});}});}function storeSettings(_0x443ce7,_0x1d82ec=![]){const _0x36dda7=_0x4f25fc;_0x443ce7={...settings,..._0x443ce7};if(_0x1d82ec&&_0x443ce7[_0x36dda7(0x273)]!=_0x36dda7(0x241)&&_0x443ce7['bbPassword']!=''){const _0x269c17=crypt[_0x36dda7(0x185)](secure[_0x36dda7(0x190)],_0x443ce7['bbPassword'])[_0x36dda7(0x2c3)]['split']('@')[0x0],_0x3fd9ce=bcrypt[_0x36dda7(0x1b6)](_0x269c17,saltRounds);_0x443ce7={..._0x443ce7,'bbPassword':_0x3fd9ce};}if(_0x1d82ec&&_0x443ce7[_0x36dda7(0x1db)]!=_0x36dda7(0x241)&&_0x443ce7[_0x36dda7(0x1db)]!=''){const _0x240df1=crypt[_0x36dda7(0x185)](secure['privateKey'],_0x443ce7[_0x36dda7(0x1db)])[_0x36dda7(0x2c3)]['split']('@')[0x0];_0x443ce7={..._0x443ce7,'telegramToken':_0x240df1};}const _0x698dc0=_0x443ce7[_0x36dda7(0x1db)]!=_0x36dda7(0x241)&&_0x443ce7[_0x36dda7(0x1db)]!=settings[_0x36dda7(0x1db)]||_0x443ce7[_0x36dda7(0x2d1)]!=settings['telegramUsername'],_0x2ee439=_0x443ce7[_0x36dda7(0x1db)]==''||_0x443ce7[_0x36dda7(0x2d1)]=='';if(_0x698dc0)_0x443ce7['telegramEvents']=_0x36dda7(0x29b);for(const [_0x40f771,_0x15a54f]of Object[_0x36dda7(0x1ef)](_0x443ce7)){if(_0x40f771==_0x36dda7(0x1db)&&_0x15a54f==_0x36dda7(0x241)){_0x443ce7[_0x36dda7(0x1db)]=settings['telegramToken'];continue;};if(_0x40f771==_0x36dda7(0x273)&&_0x15a54f==_0x36dda7(0x241)){_0x443ce7['bbPassword']=settings[_0x36dda7(0x273)];continue;};dbSettings[_0x36dda7(0x27e)]('settings.'+_0x40f771,_0x15a54f)[_0x36dda7(0x1b8)]();}settings=_0x443ce7,io['to'](_0x36dda7(0x2ac))[_0x36dda7(0x27c)](_0x36dda7(0x184),cleanSettings()),broadcastToBots(_0x36dda7(0x2a8),settings[_0x36dda7(0x2a8)]);if(_0x698dc0&&!_0x2ee439)initTelegram();if(_0x698dc0&&_0x2ee439)disableTelegram();getAllClients()['forEach'](_0x7c6f79=>{const _0xbb6aa9=_0x36dda7;getSocket(_0x7c6f79['id'])['emit'](_0xbb6aa9(0x24a),{'access':{'allow':![],'reason':_0xbb6aa9(0x1b3),'token':null}});});}function updateSetting(_0xbebdfa,_0x1d4cd8){const _0x1017d0=_0x4f25fc;dbSettings[_0x1017d0(0x27e)]('settings.'+_0xbebdfa,_0x1d4cd8)[_0x1017d0(0x1b8)](),settings=getSettings(),io['to'](_0x1017d0(0x2ac))[_0x1017d0(0x27c)](_0x1017d0(0x184),cleanSettings());}function storeSecure(_0x1557cd){const _0x1a0be8=_0x4f25fc;dbSecure[_0x1a0be8(0x28f)](_0x1a0be8(0x280))[_0x1a0be8(0x240)](_0x1557cd)[_0x1a0be8(0x1b8)](),secure=_0x1557cd;}function addBlacklist(_0xc8a57c){const _0x21a6f7=_0x4f25fc;cleanBlacklist();let _0xf9a3e1;devices[_0xc8a57c][_0x21a6f7(0x248)]?_0xf9a3e1=Math[_0x21a6f7(0x287)](devices[_0xc8a57c][_0x21a6f7(0x248)]['expiry'],loginExpiry):_0xf9a3e1=loginExpiry,dbSecure[_0x21a6f7(0x28f)](_0x21a6f7(0x1f9))[_0x21a6f7(0x240)]({'expiry':new Date()['getTime']()+_0xf9a3e1*0x3c*0x3e8,'token':devices[_0xc8a57c][_0x21a6f7(0x2b7)][_0x21a6f7(0x236)]})[_0x21a6f7(0x1b8)](),blacklist=dbSecure[_0x21a6f7(0x28f)]('blacklist')[_0x21a6f7(0x1a4)]();}function cleanBlacklist(){const _0x18caab=_0x4f25fc;let _0x3e9efa=dbSecure['get']('blacklist')[_0x18caab(0x27f)]()[_0x18caab(0x1a4)](),_0x2f8830=new Date()['getTime']();_0x3e9efa[_0x18caab(0x2cf)](_0x17aa76=>{const _0x5cf720=_0x18caab;_0x17aa76[_0x5cf720(0x28e)]<_0x2f8830&&dbSecure[_0x5cf720(0x28f)](_0x5cf720(0x1f9))[_0x5cf720(0x23a)]({'expiry':_0x17aa76[_0x5cf720(0x28e)]})['write']();});}function initStates(){const _0x431950=_0x4f25fc;let _0x248ea2=getConfiguration();_0x248ea2[_0x431950(0x2cf)](_0x15b87b=>{const _0x3a8751=_0x431950;_0x15b87b[_0x3a8751(0x20b)]=_0x3a8751(0x289);}),storeConfiguration(_0x248ea2);}function onKeys(){const _0x141e7f=new RSA();return new Promise(_0x45e02f=>{const _0x16ba3d=_0x238c;_0x141e7f[_0x16ba3d(0x266)]()[_0x16ba3d(0x2e2)](_0x273518=>{_0x45e02f(_0x273518);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1ffcc7=_0x4f25fc;let _0x5d820a=getConfiguration(),_0x232753=![];_0x5d820a[_0x1ffcc7(0x2cf)](_0x590522=>{const _0x30a767=_0x1ffcc7;if(_0x590522[_0x30a767(0x24a)]==_0x30a767(0x210))_0x590522['status']=_0x30a767(0x21f),_0x232753=!![];else _0x590522['status']=='stopped'&&(_0x590522[_0x30a767(0x24a)]=_0x30a767(0x1b7),_0x232753=!![]);});if(_0x232753)storeConfiguration(_0x5d820a);let _0xd0017c=getSecure();if(!_0xd0017c[_0x1ffcc7(0x2aa)](_0x1ffcc7(0x23e))){let _0x3446e9=await generateKeys();_0xd0017c[_0x1ffcc7(0x255)]=_0x3446e9['publicKey'],_0xd0017c[_0x1ffcc7(0x190)]=_0x3446e9[_0x1ffcc7(0x190)],_0xd0017c['secret']=crypto[_0x1ffcc7(0x1ea)](0x20)[_0x1ffcc7(0x195)](_0x1ffcc7(0x233));;storeSecure(_0xd0017c);}let _0x2a894d=getSettings();_0x232753=![];!_0x2a894d[_0x1ffcc7(0x2aa)](_0x1ffcc7(0x21a))&&(_0x2a894d['loginRequired']=![],_0x2a894d[_0x1ffcc7(0x239)]='',_0x2a894d[_0x1ffcc7(0x273)]='',_0x2a894d['f2aRequired']=![],_0x232753=!![]);!_0x2a894d[_0x1ffcc7(0x2aa)]('whitelistEnabled')&&(_0x2a894d['whitelistEnabled']=![],_0x2a894d[_0x1ffcc7(0x25c)]=[],_0x2a894d['temporaryAccessAllowed']=![],_0x232753=!![]);if(!_0x2a894d[_0x1ffcc7(0x2aa)](_0x1ffcc7(0x261))){if(_0x2a894d['telegramChatId'])_0x2a894d[_0x1ffcc7(0x261)]=!![];else _0x2a894d[_0x1ffcc7(0x261)]=![];_0x232753=!![];}if(_0x232753)storeSettings(_0x2a894d);}function storeConfiguration(_0x2d2096){const _0x438cce=_0x4f25fc;dbConfig[_0x438cce(0x28f)](_0x438cce(0x29e))[_0x438cce(0x23a)]()[_0x438cce(0x1b8)](),_0x2d2096[_0x438cce(0x2cf)](_0x58f17f=>{const _0x314846=_0x438cce;delete _0x58f17f[_0x314846(0x2b2)];}),dbConfig[_0x438cce(0x28f)]('bots')['push'](..._0x2d2096)['write'](),config=_0x2d2096;}function resetPassword(){const _0xce55c2=_0x4f25fc;tgBot&&settings[_0xce55c2(0x23f)]&&(tgBot[_0xce55c2(0x253)](_0xce55c2(0x2d9)),tgBot[_0xce55c2(0x227)](settings[_0xce55c2(0x23f)],_0xce55c2(0x230),{'parse_mode':_0xce55c2(0x1c0),'reply_markup':{'inline_keyboard':[[{'text':_0xce55c2(0x2b0),'callback_data':_0xce55c2(0x2b0)},{'text':'no','callback_data':'no'}]]}})[_0xce55c2(0x2e8)](_0x3cf943=>{telegramError(_0x3cf943);}),tgBot['on'](_0xce55c2(0x2d9),async _0x55d985=>{const _0x305f6c=_0xce55c2,_0x301d65=_0x55d985[_0x305f6c(0x288)],_0x3d725a=_0x55d985[_0x305f6c(0x2c3)];tgBot[_0x305f6c(0x1df)](_0x55d985['id'])[_0x305f6c(0x2e2)](async()=>{const _0x241a1e=_0x305f6c;if(_0x301d65!='no'){const _0x5ab0cf=0xf,_0x19e6e6=_0x241a1e(0x2b5),_0x5885cd=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x5ab0cf)))['map'](_0x531486=>_0x19e6e6[_0x531486%_0x19e6e6[_0x241a1e(0x268)]])['join'](''),_0x30ee1f=bcrypt[_0x241a1e(0x1b6)](_0x5885cd,saltRounds);storeSettings({'bbPassword':_0x30ee1f}),await tgBot[_0x241a1e(0x227)](_0x3d725a[_0x241a1e(0x186)]['id'],_0x241a1e(0x256)+_0x5885cd,{'parse_mode':_0x241a1e(0x1c0)})[_0x241a1e(0x2e8)](_0x57d5d6=>{telegramError(_0x57d5d6);});}else await tgBot['sendMessage'](_0x3d725a[_0x241a1e(0x186)]['id'],'Password\x20reset\x20rejected')[_0x241a1e(0x2e8)](_0x51c861=>{telegramError(_0x51c861);});}),tgBot[_0x305f6c(0x253)]('callback_query');}));}function logging(_0x260509){const _0x50a6fc=_0x4f25fc;console[_0x50a6fc(0x229)](getTimeStamp()+_0x50a6fc(0x19c)+_0x260509);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x50a6fc(0x258))tgBot[_0x50a6fc(0x227)](settings[_0x50a6fc(0x23f)],'Bot\x20Mgr\x20>\x20'+_0x260509)[_0x50a6fc(0x2e8)](_0x2bd9d9=>{telegramError(_0x2bd9d9);});}function getServerTime(){const _0x3a13d9=_0x4f25fc,_0x2a1d6d=new Date();return _0x2a1d6d[_0x3a13d9(0x257)]()+'/'+(_0x2a1d6d[_0x3a13d9(0x1d5)]()+0x1)[_0x3a13d9(0x195)]()[_0x3a13d9(0x2b1)](0x2,'0')+'/'+_0x2a1d6d['getDate']()['toString']()[_0x3a13d9(0x2b1)](0x2,'0')+'\x20'+_0x2a1d6d[_0x3a13d9(0x245)]()[_0x3a13d9(0x195)]()[_0x3a13d9(0x2b1)](0x2,'0')+':'+_0x2a1d6d[_0x3a13d9(0x2d5)]()['toString']()['padStart'](0x2,'0')+':'+_0x2a1d6d[_0x3a13d9(0x208)]()['toString']()[_0x3a13d9(0x2b1)](0x2,'0');}function getTimeStamp(){const _0x23a6ef=_0x4f25fc,_0x34f2c3=shiftedTime();return _0x34f2c3[_0x23a6ef(0x257)]()+'/'+(_0x34f2c3['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x34f2c3['getDate']()[_0x23a6ef(0x195)]()[_0x23a6ef(0x2b1)](0x2,'0')+'\x20'+_0x34f2c3[_0x23a6ef(0x245)]()['toString']()[_0x23a6ef(0x2b1)](0x2,'0')+':'+_0x34f2c3['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x34f2c3[_0x23a6ef(0x208)]()[_0x23a6ef(0x195)]()[_0x23a6ef(0x2b1)](0x2,'0');}function shiftedTime(){const _0x37fa4a=_0x4f25fc,_0x437f45=new Date();let _0x28fbff=_0x437f45;if(settings['timeshift']&&settings[_0x37fa4a(0x2a8)]!==0x0)_0x28fbff=fns[_0x37fa4a(0x25f)](_0x437f45,{'hours':settings['timeshift']});return _0x28fbff;}function startScheduler(){const _0x36dc8c=_0x4f25fc;let _0x50b43d=new Date()[_0x36dc8c(0x1e7)]();_0x50b43d==0x1&&backupConfigFiles();_0x50b43d==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x59b916=_0x4f25fc;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x59b916(0x2cf)](_0x2ec20d=>{const _0x56ae88=_0x59b916;if(!_0x2ec20d['isDirectory']())fs[_0x56ae88(0x254)](configpath+_0x2ec20d['name'],configbackuppath+_0x2ec20d['name']);});}function triggerAnalytics(){const _0x1b35ec=_0x4f25fc;analytics[_0x1b35ec(0x259)]({'title':_0x1b35ec(0x2a1),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x6ee176,_0x53e591){const _0x5b3eab=_0x4f25fc;if(_0x6ee176[_0x5b3eab(0x201)]==settings[_0x5b3eab(0x239)]&&bcrypt[_0x5b3eab(0x282)](_0x6ee176[_0x5b3eab(0x2c9)],settings[_0x5b3eab(0x273)])){if(settings[_0x5b3eab(0x29f)])return{'allow':![],'reason':_0x5b3eab(0x299),'token':null};else{const _0x3a495a=generateLoginToken(_0x53e591);return{'allow':!![],'reason':_0x5b3eab(0x196),'token':_0x3a495a};}}else return{'allow':![],'reason':_0x5b3eab(0x225),'token':null};}function refreshToken(_0x2805c4){const _0x542389=_0x4f25fc,_0x551650=generateLoginToken(_0x2805c4);return{'allow':!![],'reason':_0x542389(0x196),'token':_0x551650};}function validateAccess(_0x5b0092,_0x1c8212){const _0x2a72af=_0x4f25fc;let _0x1bc9b1=devices[_0x1c8212]['ip'],_0x5e31eb;const _0x7c3baa=_0xb7f2d3=>{const _0x245966=_0x238c;if(settings[_0x245966(0x21a)]){if(settings[_0x245966(0x29f)]){if(telegram2FaApproved(_0x1c8212)){const _0x227457=generateLoginToken(_0x1c8212);return{'allow':!![],'reason':_0x245966(0x1d6),'token':_0x227457};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5e31eb=validToken(_0xb7f2d3,_0x1c8212),_0x5e31eb['hasOwnProperty'](_0x245966(0x26a))?{'allow':!![],'reason':_0x245966(0x2ca),'token':_0xb7f2d3}:{'allow':![],'reason':_0x245966(0x29d),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x2a72af(0x22c)]){let _0x1c8081=[...settings[_0x2a72af(0x25c)],_0x2a72af(0x270),_0x2a72af(0x1a5),_0x2a72af(0x1f5)];if(_0x1c8081['includes'](_0x1bc9b1))return _0x7c3baa(_0x5b0092);else{_0x5e31eb=validToken(_0x5b0092,_0x1c8212);if(_0x5e31eb[_0x2a72af(0x2aa)](_0x2a72af(0x26a)))return _0x7c3baa(_0x5b0092);else{if(telegramIpApproved(_0x1c8212)){const _0x397ef5=generateToken(_0x1c8212);return _0x5e31eb=_0x7c3baa(_0x5b0092),_0x5e31eb['allow']?{'allow':!![],'reason':_0x2a72af(0x1c7),'token':_0x397ef5}:_0x5e31eb;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2a72af(0x2e9),'token':null};}}}else return _0x7c3baa(_0x5b0092);}function timelyDecrypt(_0xbe31ab,_0x5daa14=!![]){const _0xd2d30f=_0x4f25fc;if(_0xbe31ab)try{const _0x5bce46=crypt[_0xd2d30f(0x185)](secure[_0xd2d30f(0x190)],_0xbe31ab)['message'],_0x4d050d=_0x5bce46[_0xd2d30f(0x1b0)]('@')[0x0],_0x2c5c5e=_0x5bce46['split']('@')[0x1],_0x498303=new Date()[_0xd2d30f(0x1eb)]();if(_0x5daa14){if(_0x498303-_0x2c5c5e<maxSecretAge*0x3e8)return _0x4d050d;else return![];}else return _0x4d050d;}catch(_0x3283a8){return![];}else return![];}const validToken=(_0x36b5f5,_0x4def46)=>{const _0x515246=_0x4f25fc,_0x27c122=devices[_0x4def46]['ip'];if(!_0x36b5f5)return{'error':_0x515246(0x2e6)};for(let _0xebd253 of blacklist){if(_0xebd253['token']==_0x36b5f5)return{'error':_0x515246(0x198)};}let _0x507a00;try{_0x507a00=jwt[_0x515246(0x2a3)](_0x36b5f5,secure[_0x515246(0x23e)]+_0x4def46);}catch{return{'error':_0x515246(0x1ac)};}if(!_0x507a00[_0x515246(0x2aa)](_0x515246(0x2cc))&&!_0x507a00[_0x515246(0x2aa)](_0x515246(0x201))||!_0x507a00[_0x515246(0x2aa)]('exp'))return{'error':_0x515246(0x211)};if(!_0x507a00[_0x515246(0x2aa)](_0x515246(0x201))&&_0x507a00[_0x515246(0x2aa)](_0x515246(0x2cc))){const {clientip:_0x50f851}=_0x507a00;return _0x27c122==_0x50f851?{'success':_0x515246(0x1b1)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x507a00['hasOwnProperty']('username')&&_0x507a00['hasOwnProperty'](_0x515246(0x2cc))){const {username:_0x2fde93,clientip:_0x5102a0}=_0x507a00;return settings[_0x515246(0x239)]==_0x2fde93&&_0x27c122==_0x5102a0?{'success':_0x515246(0x1b1)}:{'error':_0x515246(0x238)};}}},generateLoginToken=_0xb31e38=>{const _0x3a4648=_0x4f25fc;if(_0xb31e38){const _0xdd7960=devices[_0xb31e38]['ip'];return jwt['sign']({'username':settings[_0x3a4648(0x239)],'clientip':_0xdd7960},secure[_0x3a4648(0x23e)]+_0xb31e38,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3d9aff=>{const _0x1396f4=_0x4f25fc;if(_0x3d9aff){const _0x295ef0=devices[_0x3d9aff]['ip'];return jwt[_0x1396f4(0x2ce)]({'clientip':_0x295ef0},secure[_0x1396f4(0x23e)]+_0x3d9aff,{'expiresIn':devices[_0x3d9aff][_0x1396f4(0x248)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0xf2f075=>{const _0x1a0a19=_0x4f25fc;let _0x269189=![];return devices[_0xf2f075][_0x1a0a19(0x248)]&&devices[_0xf2f075]['telegramIpApproval'][_0x1a0a19(0x28e)]!=_0x1a0a19(0x1d9)&&(_0x269189=devices[_0xf2f075][_0x1a0a19(0x248)][_0x1a0a19(0x2cc)]==devices[_0xf2f075]['ip']&&new Date()[_0x1a0a19(0x1eb)]()-devices[_0xf2f075][_0x1a0a19(0x248)][_0x1a0a19(0x226)]<devices[_0xf2f075][_0x1a0a19(0x248)][_0x1a0a19(0x28e)]*0x3c*0x3e8),_0x269189;},telegram2FaApproved=_0x49c21d=>{const _0x3ec19f=_0x4f25fc;let _0x193769=![];return devices[_0x49c21d]['telegram2FaApproval']&&devices[_0x49c21d][_0x3ec19f(0x209)][_0x3ec19f(0x28e)]!='reject'&&(_0x193769=devices[_0x49c21d][_0x3ec19f(0x209)][_0x3ec19f(0x2cc)]==devices[_0x49c21d]['ip']&&new Date()[_0x3ec19f(0x1eb)]()-devices[_0x49c21d][_0x3ec19f(0x209)][_0x3ec19f(0x226)]<devices[_0x49c21d]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x193769;},normalizeIP=_0x4208a8=>{const _0x4cca23=_0x4f25fc;let _0x43db8f=null,_0x393e9f=null;if(ipaddr[_0x4cca23(0x2c6)](_0x4208a8)){const _0xf012de=ipaddr[_0x4cca23(0x191)](_0x4208a8);_0xf012de[_0x4cca23(0x2ae)]()==='ipv6'?(_0xf012de[_0x4cca23(0x1a1)]()&&(_0x43db8f=_0xf012de[_0x4cca23(0x296)]()['toString']()),_0x393e9f=_0xf012de[_0x4cca23(0x195)]()):(_0x43db8f=_0xf012de['toString'](),_0x393e9f=_0xf012de[_0x4cca23(0x1b5)]()[_0x4cca23(0x195)]());}return{'show':_0x43db8f?_0x43db8f:_0x393e9f,'store':_0x393e9f};};