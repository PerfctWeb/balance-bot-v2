const _0x402db5=_0x5e9a;(function(_0x4a9734,_0xabb828){const _0x3217e1=_0x5e9a,_0x1841d7=_0x4a9734();while(!![]){try{const _0x30bcdf=parseInt(_0x3217e1(0x1a3))/0x1+-parseInt(_0x3217e1(0x1d9))/0x2*(-parseInt(_0x3217e1(0x133))/0x3)+-parseInt(_0x3217e1(0x246))/0x4*(-parseInt(_0x3217e1(0x146))/0x5)+parseInt(_0x3217e1(0x220))/0x6*(parseInt(_0x3217e1(0x160))/0x7)+-parseInt(_0x3217e1(0x15a))/0x8+-parseInt(_0x3217e1(0x274))/0x9+-parseInt(_0x3217e1(0x201))/0xa*(-parseInt(_0x3217e1(0x241))/0xb);if(_0x30bcdf===_0xabb828)break;else _0x1841d7['push'](_0x1841d7['shift']());}catch(_0xa45407){_0x1841d7['push'](_0x1841d7['shift']());}}}(_0x5d71,0xc3b9d));const _0xb034e2=function(){let _0x55ce10=!![];return function(_0x11c09e,_0x5ba91f){const _0x3cf538=_0x55ce10?function(){const _0x17d7d6=_0x5e9a;if(_0x5ba91f){const _0x9b89f6=_0x5ba91f[_0x17d7d6(0x25f)](_0x11c09e,arguments);return _0x5ba91f=null,_0x9b89f6;}}:function(){};return _0x55ce10=![],_0x3cf538;};}(),_0x22914f=_0xb034e2(this,function(){const _0x159b1f=_0x5e9a;return _0x22914f[_0x159b1f(0x1fd)]()[_0x159b1f(0x21e)](_0x159b1f(0x1bd))[_0x159b1f(0x1fd)]()[_0x159b1f(0x260)](_0x22914f)[_0x159b1f(0x21e)](_0x159b1f(0x1bd));});_0x22914f();'use strict';process[_0x402db5(0x230)][_0x402db5(0x256)]=0x1;const childProcess=require(_0x402db5(0x1fb)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x402db5(0x150)),low=require(_0x402db5(0x169)),path=require(_0x402db5(0x15f)),crypto=require(_0x402db5(0x24a)),Crypt=require(_0x402db5(0x26a))[_0x402db5(0x167)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x402db5(0x12a)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x402db5(0x13c))['default'],googleAnalytics=require('@analytics/google-analytics')[_0x402db5(0x1dc)],ipaddr=require(_0x402db5(0x15d)),argv=require(_0x402db5(0x1e5))(process[_0x402db5(0x14d)][_0x402db5(0x152)](0x2))['argv'],PORT=argv[_0x402db5(0x12f)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x402db5(0x1d3)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+_0x402db5(0x1b2)),process[_0x402db5(0x1f5)](0x1));function _0x5d71(){const _0x199b0f=['UA-192771731-1','<b>Telegram\x20Bot\x20Status:</b>\x0a','login\x20token\x20generated','/:bot','/:bot/coins','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','send','6117687IVEfsK','stop','function','telegramIpApproval','readFileSync','user','server','/:bot/support','-config.json','get-starting-balances','Invalid\x20authentication\x20token\x20(2)','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','stopped','storeConfiguration','bcryptjs','Unauthorized\x20attempt\x20to\x20store\x20configuration','Password\x20reset\x20rejected','::1','2FA\x20login\x20required','port','new','config/','handshake','3TOKtMh','blacklist','orders','username','Unauthorized\x20attempt\x20to\x20log\x20out','temporary\x20token\x20generated','telegram2FaApproval','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','sendMessage','analytics','update-bb','showname','temporary\x20access\x20timeout','reason','bot.js','page','answerCallbackQuery','restart','removeListener','10PxCUBB','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','remove','version','bot','User\x20has\x20been\x20validated','generateKeyPairAsync','argv','emitHistory','referer','date-fns','bbUsername','slice','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','sockets','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','toggle-bot-mode','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','************','match','7975648asFQDc','compareSync','You\x20can\x20use\x20the\x20following\x20commands:\x0a','ipaddr.js','getPortfolio','path','3864iqBCWS','filter','bot-','hasOwnProperty','headless','place-order','updatebotmanager','Crypt','Bot\x20','lowdb','assign','unlinkSync','status','1000','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','callback_query','Ok,\x20will\x20send\x20order\x20notifications\x20only','push','deleted\x20Bot\x20','publicKey','store-settings','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','remoteAddress','store-configuration','mode','settings.','message','map','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','manual','sendFile','sign','Notifications\x20enabled','socket.io','/:bot/history','stringify','entries','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','existsSync','verify','getTime','build','storeHeadless','clientip','/:bot/portfolio','/enable\x20-\x20enable\x20notifications\x0a','length','\x20mode','RSA-OAEP','sortBy','botmanager','bb-settings.json',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','express','log','stopPolling','-----------------------------------------------------------------------------------','Unauthorized\x20login\x20attempt\x20(timeout)','password','alerts','max','write','getSeconds','store','writeFileSync','638405znICtn','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','mkdirSync','yes','/disable\x20-\x20disable\x20notifications\x0a','onText','Invalid\x20authentication\x20token\x20(1)','::ffff:127.0.0.1','connection','bbPassword','telegramUsername','telegramEvents','split','defaults','Unauthorized\x20attempt\x20to\x20update\x20settings',',\x20must\x20be\x20a\x204\x20digit\x20number','deleteHistoryAlerts','disabled','All\x20bots','encryptedUuid','\x20>\x20','apiKey','All','5\x20min','login\x20token\x20valid','pidExpireLogin','(((.+)+)+)+$','get-logs','exp','bb-secure.json','404\x20Not\x20Found','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','getDate','get-portfolio','2FA\x20login\x20rejected','includes','hashSync','show','bots','botID','15\x20min','reject','polling_error','2FA\x20login\x20token\x20generated','Orders','createServer','-results.json','allow','test','copyFileSync','Temporary\x20access\x20rejected','temporary\x20access\x20not\x20allowed','<b>Balance\x20Bot\x20Status:</b>\x0a','conn','1440902WqAkKw','/off\x20-\x20stop\x20bot(s)\x0a','access','default','getUTCHours','padStart','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','pidRefreshToken','disconnect','Login\x20rejected','restarting\x20Bot\x20','\x20|\x20','yargs/yargs','forEach','/on\x20-\x20start\x20bot(s)\x0a','getStartingBalances','timestamp','sha256','once','order','from','host','No\x20authentication\x20token','listen','-events.json','Unauthorized\x20attempt\x20to\x20delete\x20bot','access\x20timeout','started','exit','uuid','expiry','login\x20not\x20required','event','getMinutes','child_process','error','toString','HTML','running','enabled\x20Bot\x20','1659290GpsjqY','disabled\x20Bot\x20','2FA\x20required','invalid\x20credentials','SIGTERM','cancel-loading','starting\x20new\x20bot\x20|\x20Bot\x20','new-disabled','index.html','reload','randomBytes','set','Invalid\x20Telegram\x20token','join','auth','login','timeshift','Unauthorized\x20attempt\x20to\x20add\x20bot','bb-config.json','settings','Unauthorized\x20attempt\x20to\x20update\x20bot','token','getFullYear','\x20to\x20','find','\x20only\x0a','Unauthorized\x20attempt\x20to\x20get\x20logs','then','telegram','search','all','4632Rznpjp','notification','getHours','ipv6','Unauthorized\x20attempt\x20to\x20delete\x20alerts','whitelistEnabled','temporary\x20access\x20rejected','Balance\x20Bot\x20Server','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','catch','auto','decrypt','kill','backup/','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','telegramToken','env','type','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','telegramEnabled','2FA','logged\x20out','telegramChatId','delete-alerts','starting\x20bot\x20|\x20Bot\x20','parse','idling\x20bot\x20\x20\x20|\x20Bot\x20','Alerts','secure','enabled','f2aRequired','emit','bb/','22KBWfnL','use','fork','ipc','name','723068OLofyY','Unauthorized\x20attempt\x20to\x20get\x20portfolio','success','data','crypto','/help\x20-\x20show\x20available\x20commands\x0a','get','removeAllListeners','args','Login\x20accepted','kind','build2','loginRequired','inherit','add','logout','NTBA_FIX_319','node-telegram-bot-api','login\x20required','temporaryAccessAllowed','chat','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','static','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','accept','apply','constructor','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','toIPv4MappedAddress','botname','secret','privateKey','value','live','headers','/:bot/configuration','hybrid-crypto-js','update-bot','isIPv4MappedAddress'];_0x5d71=function(){return _0x199b0f;};return _0x5d71();}const HOST=argv[_0x402db5(0x1ee)]||null,userID=argv[_0x402db5(0x279)]||'';let bbpath=_0x402db5(0x240),bbpath2='';const botfile=_0x402db5(0x141),configfile=_0x402db5(0x213),settingsfile=_0x402db5(0x194),securefile=_0x402db5(0x1c0);let validInstallation=!![];!fs[_0x402db5(0x187)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x402db5(0x131)+userID+'/':bbpath+_0x402db5(0x131),configbackuppath=configpath+_0x402db5(0x22d);!fs[_0x402db5(0x187)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x402db5(0x187)](configbackuppath)&&fs[_0x402db5(0x1a5)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x402db5(0x1b0)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x402db5(0x1b0)]({'settings':{'timeshift':0x0}})[_0x402db5(0x19f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x402db5(0x1b0)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x402db5(0x1ea),'rsaStandard':_0x402db5(0x191)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x402db5(0x149)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x402db5(0x197)),app=express(),http=require('http')[_0x402db5(0x1d0)](app);app[_0x402db5(0x242)](express[_0x402db5(0x25c)](path[_0x402db5(0x20e)](__dirname,bbpath2,_0x402db5(0x251)))),app[_0x402db5(0x242)](express[_0x402db5(0x25c)](path['join'](__dirname,bbpath2,_0x402db5(0x18a)))),app[_0x402db5(0x24c)]('/',function(_0x4a9770,_0x56c8a8){const _0x4ba8fa=_0x402db5;_0x56c8a8['sendFile'](path[_0x4ba8fa(0x20e)](__dirname,bbpath2,_0x4ba8fa(0x251),_0x4ba8fa(0x209)));}),app[_0x402db5(0x24c)](_0x402db5(0x270),function(_0x386e81,_0x1e48e4){const _0x4c03f8=_0x402db5;_0x1e48e4[_0x4c03f8(0x17f)](path[_0x4c03f8(0x20e)](__dirname,bbpath2,_0x4c03f8(0x18a),_0x4c03f8(0x209)));}),app[_0x402db5(0x24c)](_0x402db5(0x18d),(_0x3147b1,_0x27fbb4)=>{const _0x22b5f1=_0x402db5;_0x27fbb4[_0x22b5f1(0x17f)](path[_0x22b5f1(0x20e)](__dirname,bbpath2,_0x22b5f1(0x18a),'index.html'));}),app[_0x402db5(0x24c)]('/:bot/performance',(_0x5ab965,_0x3f9387)=>{const _0x1c4406=_0x402db5;_0x3f9387['sendFile'](path[_0x1c4406(0x20e)](__dirname,bbpath2,_0x1c4406(0x18a),_0x1c4406(0x209)));}),app[_0x402db5(0x24c)](_0x402db5(0x271),(_0x1fbedb,_0x2051a3)=>{const _0x354ee9=_0x402db5;_0x2051a3['sendFile'](path['join'](__dirname,bbpath2,_0x354ee9(0x18a),_0x354ee9(0x209)));}),app[_0x402db5(0x24c)](_0x402db5(0x183),(_0x3d483d,_0x1f595c)=>{const _0x3115a4=_0x402db5;_0x1f595c['sendFile'](path[_0x3115a4(0x20e)](__dirname,bbpath2,_0x3115a4(0x18a),_0x3115a4(0x209)));}),app['get'](_0x402db5(0x269),(_0x53e09a,_0x1d862e)=>{const _0x399ead=_0x402db5;_0x1d862e[_0x399ead(0x17f)](path[_0x399ead(0x20e)](__dirname,bbpath2,'build','index.html'));}),app[_0x402db5(0x24c)](_0x402db5(0x27b),(_0x2030a5,_0x28d5ca)=>{const _0x1cd54f=_0x402db5;_0x28d5ca[_0x1cd54f(0x17f)](path[_0x1cd54f(0x20e)](__dirname,bbpath2,_0x1cd54f(0x18a),'index.html'));});if(HOST)http[_0x402db5(0x1f0)](PORT,HOST);else http[_0x402db5(0x1f0)](PORT);const io=require(_0x402db5(0x182))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x402db5(0x26d)})]}),TelegramBot=require(_0x402db5(0x257));let tgBot;if(settings[_0x402db5(0x22f)]&&settings[_0x402db5(0x22f)]!=''&&settings[_0x402db5(0x1ad)]&&settings[_0x402db5(0x1ad)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x9a3e3a=_0x402db5;console['log'](''),console[_0x9a3e3a(0x198)](_0x9a3e3a(0x19a)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x9a3e3a(0x198)](_0x9a3e3a(0x19a));if(config['length']!=0x0)config['forEach'](_0x51aa9a=>{const _0x86e5f1=_0x9a3e3a;if(_0x51aa9a[_0x86e5f1(0x16c)]==_0x86e5f1(0x23d)||_0x51aa9a['status']==_0x86e5f1(0x130))logging(_0x86e5f1(0x238)+_0x51aa9a[_0x86e5f1(0x1ca)]+_0x86e5f1(0x1e4)+_0x51aa9a[_0x86e5f1(0x263)]),startBot([_0x51aa9a[_0x86e5f1(0x1ca)],userID],{'cwd':bbpath},function(_0xcee07f){if(_0xcee07f)logging(_0xcee07f);});else(_0x51aa9a[_0x86e5f1(0x16c)]==_0x86e5f1(0x1b4)||_0x51aa9a[_0x86e5f1(0x16c)]==_0x86e5f1(0x208))&&logging(_0x86e5f1(0x23a)+_0x51aa9a[_0x86e5f1(0x1ca)]+_0x86e5f1(0x1e4)+_0x51aa9a[_0x86e5f1(0x263)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x9a3e3a(0x198)]('-----------------------------------------------------------------------------------'),console[_0x9a3e3a(0x198)]('');}function startSocket(){const _0xca693f=_0x402db5;io['on'](_0xca693f(0x1ab),_0x22dfac=>{const _0x487f73=_0xca693f;let _0x10a2e0,_0x45f12c,_0x515866,_0x3bf17a,_0x3195f4;const _0x200294=_0x22dfac[_0x487f73(0x132)][_0x487f73(0x268)][_0x487f73(0x14f)];_0x45f12c=_0x200294[_0x487f73(0x159)](/bot[0-9]{3}/);if(_0x45f12c)_0x515866=_0x45f12c[0x0][_0x487f73(0x159)](/[0-9]{3}/);if(_0x515866)_0x10a2e0=_0x515866[0x0];else _0x10a2e0=_0x487f73(0x193);const _0x14846e=_0x22dfac[_0x487f73(0x132)][_0x487f73(0x20f)][_0x487f73(0x1b6)];if(!_0x14846e)_0x22dfac[_0x487f73(0x23f)]('status',{'publicKey':secure[_0x487f73(0x174)]});else{_0x3bf17a=timelyDecrypt(_0x14846e,![]);if(!_0x3bf17a)_0x22dfac[_0x487f73(0x23f)](_0x487f73(0x16c),{'publicKey':secure[_0x487f73(0x174)]});else{_0x3195f4=normalizeIP(_0x22dfac[_0x487f73(0x1d8)][_0x487f73(0x177)])[_0x487f73(0x1a1)];if(!devices[_0x3bf17a])devices[_0x3bf17a]={'uuid':_0x3bf17a,'access':{'token':null}};devices[_0x3bf17a]['ip']=_0x3195f4;const _0xb151cf=addClient(_0x22dfac['id'],_0x3bf17a,_0x10a2e0);setAccess(_0xb151cf),_0x22dfac['on'](_0x487f73(0x210),_0x361e45=>{const _0xb05006=_0x487f73,_0xd9d284=timelyDecrypt(_0x361e45[_0xb05006(0x19c)]);if(_0xd9d284){_0x361e45={'username':_0x361e45['username'],'password':_0xd9d284},devices[_0x3bf17a]['access']=validateCredentials(_0x361e45,_0x3bf17a);if(devices[_0x3bf17a][_0xb05006(0x1db)]['allow']==![]&&devices[_0x3bf17a][_0xb05006(0x1db)][_0xb05006(0x140)]==_0xb05006(0x12e))_0x22dfac[_0xb05006(0x23f)](_0xb05006(0x16c),{'access':devices[_0x3bf17a][_0xb05006(0x1db)]}),loginAccess2FA(_0x3bf17a,_0x3195f4);else{if(devices[_0x3bf17a]['access']['allow']==![]&&devices[_0x3bf17a][_0xb05006(0x1db)]['reason']==_0xb05006(0x204))_0x22dfac[_0xb05006(0x23f)](_0xb05006(0x16c),{'access':devices[_0x3bf17a]['access']});else devices[_0x3bf17a][_0xb05006(0x1db)][_0xb05006(0x1d2)]&&devices[_0x3bf17a]['access'][_0xb05006(0x140)]==_0xb05006(0x26f)&&(getClientsWithUuid(_0x3bf17a)['forEach'](_0x26ec5b=>{setAccess(_0x26ec5b);}),setTokenRefresh(_0x3bf17a),setSessionTimeout(_0xb05006(0x210),_0x3bf17a));}}else logging(_0xb05006(0x19b));}),_0x22dfac['on']('reset-password',()=>{resetPassword();}),_0x22dfac['on'](_0x487f73(0x1e1),_0x1e0029=>{removeClient(_0x22dfac['id']);});}}});}function initClient(_0x3e0728){const _0x3714a8=_0x402db5;if(_0x3e0728!=_0x3714a8(0x193)&&config[_0x3714a8(0x1b8)]!=''){if(pid[_0x3e0728])pid[_0x3e0728][_0x3714a8(0x273)]({'function':'initclient','args':null});}}function getSocket(_0x20cc3f){const _0x3c8cf5=_0x402db5;return io['sockets'][_0x3c8cf5(0x154)][_0x3c8cf5(0x24c)](_0x20cc3f);}function setAccess(_0x4a9881){const _0x114989=_0x402db5,_0x30cf72=getSocket(_0x4a9881['id']),_0x50d978=_0x4a9881['uuid'],_0x40ac4a=_0x4a9881['bot'];devices[_0x50d978]['access']=validateAccess(devices[_0x50d978][_0x114989(0x1db)][_0x114989(0x216)],_0x50d978),_0x30cf72['join'](_0x50d978);if(devices[_0x50d978][_0x114989(0x1db)][_0x114989(0x1d2)]){_0x30cf72[_0x114989(0x20e)](_0x40ac4a);if(_0x40ac4a==_0x114989(0x193))initializeSocketBotManager(_0x30cf72);else initializeSocketBot(_0x30cf72);initClient(_0x40ac4a);}devices[_0x50d978][_0x114989(0x1db)][_0x114989(0x216)]&&devices[_0x50d978][_0x114989(0x1db)][_0x114989(0x140)]==_0x114989(0x138)&&setSessionTimeout(_0x114989(0x234),_0x50d978),devices[_0x50d978][_0x114989(0x1db)]['token']&&devices[_0x50d978][_0x114989(0x1db)][_0x114989(0x140)]==_0x114989(0x1ce)&&setSessionTimeout(_0x114989(0x210),_0x50d978),_0x30cf72[_0x114989(0x23f)]('status',{'status':_0x4a9881[_0x114989(0x27a)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x50d978][_0x114989(0x1db)],'externalip':devices[_0x50d978]['ip'],'publicKey':secure[_0x114989(0x174)],'validInstallation':validInstallation}),devices[_0x50d978]['access'][_0x114989(0x1d2)]==![]&&devices[_0x50d978]['access'][_0x114989(0x140)]==_0x114989(0x203)&&temporaryAccess2FA(_0x50d978,devices[_0x50d978]['ip']);}function setSessionTimeout(_0x2fb121,_0x56e095){const _0x37932c=_0x402db5;let _0x6e8f49;if(_0x2fb121==_0x37932c(0x210))_0x6e8f49=loginExpiry*0x3c*0x3e8;else _0x6e8f49=devices[_0x56e095]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x37932c(0x189)]()-devices[_0x56e095][_0x37932c(0x277)][_0x37932c(0x1e9)]);if(devices[_0x56e095]['pidExpireLogin'])clearTimeout(devices[_0x56e095][_0x37932c(0x1bc)]);devices[_0x56e095]['pidExpireLogin']=setTimeout(()=>{const _0x570804=_0x37932c;if(devices[_0x56e095][_0x570804(0x1e0)])clearTimeout(devices[_0x56e095]['pidRefreshToken']);removeSocketListeners(_0x56e095),addBlacklist(_0x56e095),devices[_0x56e095][_0x570804(0x277)]=null,devices[_0x56e095]['telegram2FaApproval']=null,devices[_0x56e095][_0x570804(0x1db)][_0x570804(0x216)]=null,devices[_0x56e095][_0x570804(0x1db)]=validateAccess(devices[_0x56e095]['access'][_0x570804(0x216)],_0x56e095),!(devices[_0x56e095][_0x570804(0x1db)][_0x570804(0x1d2)]&&devices[_0x56e095][_0x570804(0x1db)][_0x570804(0x140)]==_0x570804(0x1f8))&&(_0x2fb121==_0x570804(0x210)?io['to'](_0x56e095)[_0x570804(0x23f)](_0x570804(0x16c),{'access':{'allow':![],'reason':_0x570804(0x1f3),'token':null}}):io['to'](_0x56e095)['emit']('status',{'access':{'allow':![],'reason':_0x570804(0x13f),'token':null}})),devices[_0x56e095]['access']['token']=null;},_0x6e8f49);}function setTokenRefresh(_0x5b442e){const _0x1b183d=_0x402db5;if(devices[_0x5b442e][_0x1b183d(0x1e0)])clearTimeout(devices[_0x5b442e][_0x1b183d(0x1e0)]);devices[_0x5b442e][_0x1b183d(0x1e0)]=setTimeout(()=>{const _0x28c562=_0x1b183d;getClientsWithUuid(_0x5b442e)[_0x28c562(0x18f)]!=0x0?(devices[_0x5b442e][_0x28c562(0x1db)]=refreshToken(_0x5b442e),io['to'](_0x5b442e)[_0x28c562(0x23f)](_0x28c562(0x16c),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5b442e][_0x28c562(0x1db)],'externalip':devices[_0x5b442e]['ip'],'publicKey':secure[_0x28c562(0x174)],'validInstallation':validInstallation}),setTokenRefresh(_0x5b442e)):clearTimeout(devices[_0x5b442e][_0x28c562(0x1e0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x40f9ff){const _0x42fab5=_0x402db5,_0x1a7427=getClient(_0x40f9ff['id'])['uuid'];_0x40f9ff[_0x42fab5(0x23f)](_0x42fab5(0x1c9),config),_0x40f9ff[_0x42fab5(0x23f)]('settings',cleanSettings()),_0x40f9ff['on']('add-bot',_0x2647c0=>{const _0x33d59d=_0x42fab5;if(validateAccess(_0x2647c0,_0x1a7427)['allow'])addBot();else logging(_0x33d59d(0x212));}),_0x40f9ff['on'](_0x42fab5(0x26b),(_0x38e9dc,_0x3ae341)=>{const _0x2edb98=_0x42fab5;if(validateAccess(_0x3ae341,_0x1a7427)['allow'])toggleBot(_0x38e9dc[_0x2edb98(0x1ca)],_0x38e9dc['status'],_0x38e9dc[_0x2edb98(0x267)]);else logging(_0x2edb98(0x215));}),_0x40f9ff['on'](_0x42fab5(0x156),(_0x1334f6,_0x14dfe)=>{const _0x20286a=_0x42fab5;if(validateAccess(_0x14dfe,_0x1a7427)[_0x20286a(0x1d2)])toggleBotMode(_0x1334f6);else logging(_0x20286a(0x215));}),_0x40f9ff['on']('delete-bot',(_0x276a89,_0x3a6413)=>{const _0x3df266=_0x42fab5;if(validateAccess(_0x3a6413,_0x1a7427)[_0x3df266(0x1d2)])deleteBot(_0x276a89);else logging(_0x3df266(0x1f2));}),_0x40f9ff['on'](_0x42fab5(0x175),(_0x1bbb49,_0x316b74)=>{const _0xec8517=_0x42fab5;if(validateAccess(_0x316b74,_0x1a7427)[_0xec8517(0x1d2)])storeSettings(_0x1bbb49,!![]);else logging(_0xec8517(0x1b1));}),_0x40f9ff['on'](_0x42fab5(0x13d),_0x353f11=>{const _0x301eed=_0x42fab5;if(validateAccess(_0x353f11,_0x1a7427)['allow'])updateBB();else logging(_0x301eed(0x1a4));}),_0x40f9ff['on'](_0x42fab5(0x255),_0x5dedd1=>{const _0xec84e6=_0x42fab5;if(validateAccess(_0x5dedd1,_0x1a7427)[_0xec84e6(0x1d2)]){if(devices[_0x1a7427][_0xec84e6(0x1e0)])clearTimeout(devices[_0x1a7427][_0xec84e6(0x1e0)]);if(devices[_0x1a7427][_0xec84e6(0x1bc)])clearTimeout(devices[_0x1a7427]['pidExpireLogin']);removeSocketListeners(getClient(_0x40f9ff['id'])[_0xec84e6(0x1f6)]),addBlacklist(_0x1a7427),devices[_0x1a7427]['telegramIpApproval']=null,devices[_0x1a7427][_0xec84e6(0x139)]=null,devices[_0x1a7427][_0xec84e6(0x1db)][_0xec84e6(0x216)]=null,io['to'](getClient(_0x40f9ff['id'])[_0xec84e6(0x1f6)])[_0xec84e6(0x23f)](_0xec84e6(0x16c),{'access':{'allow':![],'reason':_0xec84e6(0x235),'token':null}});}else logging(_0xec84e6(0x137));});}function initializeSocketBot(_0x3c61d8){const _0x5d40ae=_0x402db5,_0x4868e4=getClient(_0x3c61d8['id'])[_0x5d40ae(0x14a)],_0x5dbe40=getClient(_0x3c61d8['id'])[_0x5d40ae(0x1f6)];_0x3c61d8['on'](_0x5d40ae(0x1be),(_0x19628c,_0x1b0b7b)=>{const _0x46a46c=_0x5d40ae;if(validateAccess(_0x1b0b7b,_0x5dbe40)[_0x46a46c(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4][_0x46a46c(0x273)]({'function':_0x46a46c(0x14e),'args':_0x19628c});}else logging(_0x46a46c(0x21b));}),_0x3c61d8['on'](_0x5d40ae(0x237),(_0x515080,_0x1d3d02)=>{const _0x2f13ea=_0x5d40ae;if(validateAccess(_0x1d3d02,_0x5dbe40)[_0x2f13ea(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4]['send']({'function':_0x2f13ea(0x1b3),'args':_0x515080});}else logging(_0x2f13ea(0x224));}),_0x3c61d8['on'](_0x5d40ae(0x1c4),(_0x13bbd4,_0x2c477a)=>{const _0x3514ed=_0x5d40ae;if(validateAccess(_0x2c477a,_0x5dbe40)[_0x3514ed(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4]['send']({'function':_0x3514ed(0x15e),'args':_0x13bbd4});}else logging(_0x3514ed(0x247));}),_0x3c61d8['on'](_0x5d40ae(0x178),(_0x3ae48b,_0x7b5c47)=>{const _0x9e51db=_0x5d40ae;if(validateAccess(_0x7b5c47,_0x5dbe40)[_0x9e51db(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4][_0x9e51db(0x273)]({'function':_0x9e51db(0x129),'args':_0x3ae48b});}else logging(_0x9e51db(0x12b));}),_0x3c61d8['on']('store-headless',(_0x1686f,_0x54a649)=>{const _0x4f209e=_0x5d40ae;if(validateAccess(_0x54a649,_0x5dbe40)[_0x4f209e(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4]['send']({'function':_0x4f209e(0x18b),'args':_0x1686f});}else logging(_0x4f209e(0x232));}),_0x3c61d8['on'](_0x5d40ae(0x27d),_0x2805d2=>{const _0x40f148=_0x5d40ae;if(validateAccess(_0x2805d2,_0x5dbe40)['allow']){if(pid[_0x4868e4])pid[_0x4868e4]['send']({'function':_0x40f148(0x1e8),'args':null});}else logging(_0x40f148(0x153));}),_0x3c61d8['on'](_0x5d40ae(0x165),(_0xfd6ee9,_0x397a70)=>{const _0x2d2aa5=_0x5d40ae;if(validateAccess(_0x397a70,_0x5dbe40)[_0x2d2aa5(0x1d2)]){if(pid[_0x4868e4])pid[_0x4868e4][_0x2d2aa5(0x273)]({'function':'placeOrder','args':_0xfd6ee9});}else logging(_0x2d2aa5(0x228));}),_0x3c61d8['on'](_0x5d40ae(0x206),_0x3ded2a=>{const _0x31e35a=_0x5d40ae;if(validateAccess(_0x3ded2a,_0x5dbe40)['allow']){if(pid[_0x4868e4])pid[_0x4868e4][_0x31e35a(0x273)]({'function':'cancelLoading','args':null});}else logging(_0x31e35a(0x1df));}),_0x3c61d8['on'](_0x5d40ae(0x255),_0x1d58be=>{const _0x34cee4=_0x5d40ae;if(validateAccess(_0x1d58be,_0x5dbe40)[_0x34cee4(0x1d2)]){if(devices[_0x5dbe40][_0x34cee4(0x1e0)])clearTimeout(devices[_0x5dbe40]['pidRefreshToken']);if(devices[_0x5dbe40][_0x34cee4(0x1bc)])clearTimeout(devices[_0x5dbe40][_0x34cee4(0x1bc)]);removeSocketListeners(getClient(_0x3c61d8['id'])[_0x34cee4(0x1f6)]),addBlacklist(_0x5dbe40),devices[_0x5dbe40][_0x34cee4(0x277)]=null,devices[_0x5dbe40][_0x34cee4(0x139)]=null,devices[_0x5dbe40]['access'][_0x34cee4(0x216)]=null,io['to'](getClient(_0x3c61d8['id'])[_0x34cee4(0x1f6)])[_0x34cee4(0x23f)](_0x34cee4(0x16c),{'access':{'allow':![],'reason':_0x34cee4(0x235),'token':null}});}else logging(_0x34cee4(0x137));});}function removeSocketListeners(_0x19fff5){const _0x17a34e=_0x402db5;getClientsWithUuid(_0x19fff5)[_0x17a34e(0x1e6)](_0xd906d6=>{const _0x456f9d=_0x17a34e;getSocket(_0xd906d6['id'])[_0x456f9d(0x24d)]();});}function cleanSettings(){const _0x2cdcd5=_0x402db5;let _0x1124ed=settings;return settings[_0x2cdcd5(0x22f)]&&settings[_0x2cdcd5(0x22f)]!=''&&(_0x1124ed={..._0x1124ed,'telegramToken':_0x2cdcd5(0x158)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x1124ed={..._0x1124ed,'bbPassword':_0x2cdcd5(0x158)}),_0x1124ed;}function updateBB(){const _0x3599b4=_0x402db5;installingUpdate=!![],config['forEach'](_0x4e40a9=>{const _0x26e4f2=_0x5e9a;restartBot(_0x4e40a9[_0x26e4f2(0x1ca)]);}),process[_0x3599b4(0x273)]({'update':!![]},_0x31667e=>{});}function startBot(_0x339f2d,_0x1274ff,_0x430ff7){const _0x44a8c5=_0x402db5;let _0x32ef9b=![];const _0x177bce=_0x339f2d[0x0];_0x1274ff={..._0x1274ff,'stdio':['inherit',_0x44a8c5(0x253),_0x44a8c5(0x253),_0x44a8c5(0x244)]},pid[_0x177bce]=childProcess[_0x44a8c5(0x243)](botfile,_0x339f2d,_0x1274ff),pid[_0x177bce]['on']('message',_0x1f45a3=>{const _0x35adb6=_0x44a8c5;switch(Object['keys'](_0x1f45a3)[0x0]){case _0x35adb6(0x263):updateBotName(_0x177bce,_0x1f45a3[_0x35adb6(0x263)]);break;case _0x35adb6(0x166):updateBotManager();break;case'status':updateStatus(_0x177bce,_0x1f45a3[_0x35adb6(0x16c)]);break;case _0x35adb6(0x267):updateLive(_0x177bce,_0x1f45a3[_0x35adb6(0x267)]);break;case _0x35adb6(0x1f4):updateLive(_0x177bce,_0x1f45a3[_0x35adb6(0x1f4)]),io['to'](_0x177bce)['emit'](_0x35adb6(0x16c),{'access':{'allow':![],'reason':_0x35adb6(0x20a),'token':null}});break;case'stop':_0x1f45a3[_0x35adb6(0x275)]==_0x35adb6(0x144)&&restartBot(_0x177bce);_0x1f45a3['stop']==_0x35adb6(0x22c)&&toggleBot(_0x177bce,'disabled',_0x35adb6(0x128));break;case'telegram':sendTelegram(_0x177bce,_0x1f45a3[_0x35adb6(0x21d)]);break;case'function':io['to'](_0x177bce)['emit'](_0x1f45a3[_0x35adb6(0x276)],_0x1f45a3[_0x35adb6(0x24e)]);break;}}),pid[_0x177bce]['on']('error',function(_0x4bcdf5){if(_0x32ef9b)return;_0x32ef9b=!![],_0x430ff7(_0x4bcdf5);}),pid[_0x177bce]['on'](_0x44a8c5(0x1f5),function(_0x568d7e){const _0x17db0b=_0x44a8c5;if(installingUpdate)return;if(_0x32ef9b)return;_0x32ef9b=!![],_0x430ff7(null);const _0x365c2c=dbConfig[_0x17db0b(0x24c)]('bots')[_0x17db0b(0x219)]({'botID':_0x177bce})[_0x17db0b(0x266)]();_0x365c2c&&(_0x365c2c[_0x17db0b(0x16c)]=='enabled'||_0x365c2c[_0x17db0b(0x16c)]==_0x17db0b(0x130))&&(updateLive(_0x177bce,_0x17db0b(0x128)),logging(_0x17db0b(0x1e3)+_0x177bce),startBot([_0x177bce,userID],{'cwd':bbpath},function(_0x13f025){if(_0x13f025)logging(_0x13f025);}));});}function stopBot(_0xe6d6c4){const _0x1cc0c5=_0x402db5;getClientsWithBotID(_0xe6d6c4)[_0x1cc0c5(0x1e6)](_0x25ffa8=>{const _0x4f88fa=_0x1cc0c5;getSocket(_0x25ffa8['id'])[_0x4f88fa(0x1e1)](!![]),removeClient(_0x25ffa8['id']);}),pid[_0xe6d6c4]&&(pid[_0xe6d6c4][_0x1cc0c5(0x22c)](),pid[_0xe6d6c4]=null);}function restartBot(_0x355f0c){const _0x94a3ec=_0x402db5;if(pid[_0x355f0c])pid[_0x355f0c][_0x94a3ec(0x22c)]();}function addBot(){const _0x275c50=_0x402db5;let _0x924b04;for(let _0x94d606=0x1;_0x94d606<0x3e9;_0x94d606++){_0x924b04=_0x94d606[_0x275c50(0x1fd)]()[_0x275c50(0x1de)](0x3,'0');let _0x482d50=config[_0x275c50(0x219)](_0x4b26c2=>_0x4b26c2['botID']==_0x924b04);if(!_0x482d50)break;}if(_0x924b04===_0x275c50(0x16d)){logging(_0x275c50(0x16e));return;}logging(_0x275c50(0x207)+_0x924b04),dbConfig[_0x275c50(0x24c)](_0x275c50(0x1c9))[_0x275c50(0x172)]({'botID':_0x924b04,'botname':_0x275c50(0x168)+_0x924b04,'status':_0x275c50(0x130),'live':''})[_0x275c50(0x19f)](),startBot([_0x924b04,userID],{'cwd':bbpath},function(_0x2d3000){if(_0x2d3000)logging(_0x2d3000);}),config=getConfiguration(),io['to'](_0x275c50(0x193))[_0x275c50(0x23f)](_0x275c50(0x1c9),config);}function deleteBot(_0xc92c11){const _0x5d82af=_0x402db5;getClientsWithBotID(_0xc92c11)[_0x5d82af(0x1e6)](_0x266239=>{const _0x4e2828=_0x5d82af;getSocket(_0x266239['id'])[_0x4e2828(0x1e1)](!![]),removeClient(_0x266239['id']);}),dbConfig[_0x5d82af(0x24c)]('bots')[_0x5d82af(0x148)]({'botID':_0xc92c11})['write'](),logging(_0x5d82af(0x173)+_0xc92c11),stopBot(_0xc92c11);try{fs[_0x5d82af(0x16b)](path['join'](configpath,_0x5d82af(0x162)+_0xc92c11+_0x5d82af(0x27c))),fs[_0x5d82af(0x16b)](path[_0x5d82af(0x20e)](configpath,_0x5d82af(0x162)+_0xc92c11+_0x5d82af(0x1f1))),fs[_0x5d82af(0x16b)](path[_0x5d82af(0x20e)](configpath,'bot-'+_0xc92c11+'-performance.json')),fs['unlinkSync'](path['join'](configpath,_0x5d82af(0x162)+_0xc92c11+_0x5d82af(0x1d1)));}catch(_0x43ecc2){if(_0x43ecc2)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x43ecc2);}config=getConfiguration(),io['to']('botmanager')[_0x5d82af(0x23f)](_0x5d82af(0x1c9),config);}function toggleBot(_0x196808,_0x45ff57,_0x5825e1){const _0x1b2d74=_0x402db5;dbConfig[_0x1b2d74(0x24c)]('bots')['find']({'botID':_0x196808})[_0x1b2d74(0x16a)]({'status':_0x45ff57})[_0x1b2d74(0x16a)]({'live':_0x5825e1})['write']();if(_0x45ff57=='enabled'||_0x45ff57=='new')logging(_0x1b2d74(0x200)+_0x196808),startBot([_0x196808,userID],{'cwd':bbpath},function(_0x4f8c39){if(_0x4f8c39)logging(_0x4f8c39);});else(_0x45ff57=='disabled'||_0x45ff57==_0x1b2d74(0x208))&&(logging(_0x1b2d74(0x202)+_0x196808),stopBot(_0x196808));config=getConfiguration(),io['to'](_0x1b2d74(0x193))[_0x1b2d74(0x23f)](_0x1b2d74(0x1c9),config);}function toggleStatus(_0x30e17a){const _0x11759b=_0x402db5;let _0x29f278=dbConfig[_0x11759b(0x24c)](_0x11759b(0x1c9))[_0x11759b(0x219)]({'botID':_0x30e17a})[_0x11759b(0x266)](),_0x4d9085;if(_0x29f278['status']===_0x11759b(0x23d))_0x4d9085='disabled';else{if(_0x29f278['status']===_0x11759b(0x130))_0x4d9085=_0x11759b(0x208);else{if(_0x29f278[_0x11759b(0x16c)]===_0x11759b(0x208))_0x4d9085='new';else{if(_0x29f278[_0x11759b(0x16c)]===_0x11759b(0x1b4))_0x4d9085=_0x11759b(0x23d);}}}return _0x4d9085;}function updateStatus(_0x1b664c,_0x643c6a){const _0x4377b2=_0x402db5;dbConfig[_0x4377b2(0x24c)]('bots')[_0x4377b2(0x219)]({'botID':_0x1b664c})[_0x4377b2(0x16a)]({'status':_0x643c6a})[_0x4377b2(0x19f)](),config=getConfiguration(),io['to']('botmanager')[_0x4377b2(0x23f)](_0x4377b2(0x1c9),config);}function updateLive(_0x1becb7,_0x4b330c){const _0x3d0565=_0x402db5;dbConfig[_0x3d0565(0x24c)]('bots')['find']({'botID':_0x1becb7})[_0x3d0565(0x16a)]({'live':_0x4b330c})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x3d0565(0x23f)](_0x3d0565(0x1c9),config);}function updateBotName(_0x145e80,_0x188dbb){const _0x49745c=_0x402db5;dbConfig[_0x49745c(0x24c)]('bots')[_0x49745c(0x219)]({'botID':_0x145e80})['assign']({'botname':_0x188dbb})[_0x49745c(0x19f)](),config=getConfiguration(),io['to']('botmanager')[_0x49745c(0x23f)](_0x49745c(0x1c9),config);}function updateBotManager(){const _0x4dcd6e=_0x402db5;config=getConfiguration(),io['to']('botmanager')[_0x4dcd6e(0x23f)](_0x4dcd6e(0x1c9),config);}function toggleBotMode(_0x1c6df5){const _0x4008a0=_0x402db5;if(pid[_0x1c6df5])pid[_0x1c6df5][_0x4008a0(0x273)]({'function':'toggleBotMode','args':null});else{const _0x6ed964=configpath+_0x4008a0(0x162)+_0x1c6df5+_0x4008a0(0x27c),_0x3c2ff4=fs[_0x4008a0(0x278)](_0x6ed964),_0x2ca1be=JSON['parse'](_0x3c2ff4),_0x585829=_0x2ca1be['bot'][0x0]['headless'];_0x2ca1be['bot'][0x0]['headless']=!_0x585829;const _0x2bc027=JSON[_0x4008a0(0x184)](_0x2ca1be,null,0x2);fs[_0x4008a0(0x1a2)](_0x6ed964,_0x2bc027),config=getConfiguration(),io['to'](_0x4008a0(0x193))[_0x4008a0(0x23f)](_0x4008a0(0x1c9),config);}}function telegramError(_0x52f9ab){const _0x1c31e3=_0x402db5;console[_0x1c31e3(0x198)](getTimeStamp()+_0x1c31e3(0x195));}function validateTelegram(_0x29a0d6){const _0x1bd1de=_0x402db5;if(_0x29a0d6[_0x1bd1de(0x1ed)]['username']!=settings[_0x1bd1de(0x1ad)]&&'@'+_0x29a0d6['from'][_0x1bd1de(0x136)]!=settings[_0x1bd1de(0x1ad)])return tgBot['sendMessage'](_0x29a0d6[_0x1bd1de(0x25a)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1bd1de(0x1fe)})[_0x1bd1de(0x229)](_0x5b24fd=>{telegramError(_0x5b24fd);}),![];return!![];}async function initTelegram(){const _0x34b3b9=_0x402db5;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x34b3b9(0x22f)],{'polling':!![]});let _0x3016a0=_0x34b3b9(0x15c);_0x3016a0+='\x0a',_0x3016a0+=_0x34b3b9(0x18e),_0x3016a0+=_0x34b3b9(0x1a7),_0x3016a0+=_0x34b3b9(0x17d),_0x3016a0+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3016a0+=_0x34b3b9(0x1e7),_0x3016a0+=_0x34b3b9(0x1da),_0x3016a0+=_0x34b3b9(0x261),_0x3016a0+='/names\x20-\x20show\x20bot\x20names\x0a',_0x3016a0+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x3016a0+=_0x34b3b9(0x24b);let _0x1531d3=_0x34b3b9(0x127);_0x1531d3+='\x0a',_0x1531d3+=_0x3016a0,tgBot[_0x34b3b9(0x1a8)](/\/start/,_0x35a7a4=>{const _0x5d1825=_0x34b3b9;if(!validateTelegram(_0x35a7a4))return;if(settings[_0x5d1825(0x236)]!=_0x35a7a4[_0x5d1825(0x25a)]['id'])updateSetting('telegramChatId',_0x35a7a4[_0x5d1825(0x25a)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x5d1825(0x13b)](_0x35a7a4['chat']['id'],_0x1531d3)[_0x5d1825(0x229)](_0x474046=>{telegramError(_0x474046);});}),tgBot[_0x34b3b9(0x1a8)](/\/enable/,_0x4c5999=>{const _0x44e942=_0x34b3b9;if(!validateTelegram(_0x4c5999))return;if(settings['telegramChatId']!=_0x4c5999[_0x44e942(0x25a)]['id'])updateSetting(_0x44e942(0x236),_0x4c5999[_0x44e942(0x25a)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x44e942(0x13b)](_0x4c5999[_0x44e942(0x25a)]['id'],_0x44e942(0x181))[_0x44e942(0x229)](_0x111adc=>{telegramError(_0x111adc);});}),tgBot['onText'](/\/config/,async _0x2b3961=>{const _0x5e9103=_0x34b3b9;if(!validateTelegram(_0x2b3961))return;tgBot[_0x5e9103(0x145)]('callback_query'),tgBot[_0x5e9103(0x13b)](_0x2b3961[_0x5e9103(0x25a)]['id'],_0x5e9103(0x272),{'reply_markup':{'inline_keyboard':[[{'text':_0x5e9103(0x1cf),'callback_data':_0x5e9103(0x135)},{'text':_0x5e9103(0x23b),'callback_data':_0x5e9103(0x19d)},{'text':_0x5e9103(0x1b9),'callback_data':'all'}]]}})[_0x5e9103(0x229)](_0x12e55b=>{telegramError(_0x12e55b);}),tgBot['on'](_0x5e9103(0x170),async _0x33b5c3=>{const _0x31b7b9=_0x5e9103,_0x38ae88=_0x33b5c3[_0x31b7b9(0x249)],_0xfe5a11=_0x33b5c3[_0x31b7b9(0x17b)];tgBot[_0x31b7b9(0x143)](_0x33b5c3['id'])['then'](async()=>{const _0x3f14f4=_0x31b7b9;_0x38ae88==_0x3f14f4(0x135)&&(updateSetting(_0x3f14f4(0x1ae),_0x3f14f4(0x135)),updateSetting(_0x3f14f4(0x233),!![]),await tgBot[_0x3f14f4(0x13b)](_0xfe5a11[_0x3f14f4(0x25a)]['id'],_0x3f14f4(0x171))[_0x3f14f4(0x229)](_0x171514=>{telegramError(_0x171514);}));_0x38ae88==_0x3f14f4(0x19d)&&(updateSetting(_0x3f14f4(0x1ae),_0x3f14f4(0x19d)),updateSetting(_0x3f14f4(0x233),!![]),await tgBot['sendMessage'](_0xfe5a11[_0x3f14f4(0x25a)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x3f14f4(0x229)](_0x110ed0=>{telegramError(_0x110ed0);}));_0x38ae88==_0x3f14f4(0x21f)&&(updateSetting('telegramEvents',_0x3f14f4(0x21f)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3f14f4(0x13b)](_0xfe5a11[_0x3f14f4(0x25a)]['id'],_0x3f14f4(0x196))[_0x3f14f4(0x229)](_0x2c4d3d=>{telegramError(_0x2c4d3d);}));if(!settings[_0x3f14f4(0x236)])tgBot[_0x3f14f4(0x13b)](_0xfe5a11[_0x3f14f4(0x25a)]['id'],_0x3f14f4(0x25d))[_0x3f14f4(0x229)](_0x51c3ef=>{telegramError(_0x51c3ef);});}),tgBot[_0x31b7b9(0x145)](_0x31b7b9(0x170));});}),tgBot['onText'](/\/status/,_0x3f6bbf=>{const _0x31fcc3=_0x34b3b9;if(!validateTelegram(_0x3f6bbf))return;const _0x469b16=getBotsWithMode();let _0x624bf5=_0x31fcc3(0x1d7);config['forEach'](_0x3550fe=>{const _0x21e8a2=_0x31fcc3,_0x5c2c8b=_0x469b16['find'](_0x143d89=>_0x143d89[_0x21e8a2(0x1ca)]==_0x3550fe['botID'])[_0x21e8a2(0x179)];_0x624bf5+=_0x21e8a2(0x168)+_0x3550fe[_0x21e8a2(0x1ca)]+':\x20'+_0x3550fe[_0x21e8a2(0x16c)]+_0x21e8a2(0x1e4)+_0x5c2c8b+_0x21e8a2(0x1e4)+_0x3550fe[_0x21e8a2(0x267)]+'\x0a';}),_0x624bf5+='\x0a',_0x624bf5+=_0x31fcc3(0x26e),_0x624bf5+=!settings[_0x31fcc3(0x233)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x624bf5+=settings['telegramEnabled']?settings[_0x31fcc3(0x1ae)]==_0x31fcc3(0x21f)?_0x31fcc3(0x155):'Notifications\x20types:\x20'+settings[_0x31fcc3(0x1ae)]+_0x31fcc3(0x21a):'',tgBot['sendMessage'](_0x3f6bbf[_0x31fcc3(0x25a)]['id'],_0x624bf5,{'parse_mode':_0x31fcc3(0x1fe)})[_0x31fcc3(0x229)](_0x78d484=>{telegramError(_0x78d484);});}),tgBot[_0x34b3b9(0x1a8)](/\/restart/,_0x4ffcea=>{const _0x4d1aeb=_0x34b3b9;if(!validateTelegram(_0x4ffcea))return;tgBot[_0x4d1aeb(0x145)](_0x4d1aeb(0x170));const _0x33cd3a=getEnabledBots();if(_0x33cd3a[_0x4d1aeb(0x18f)]==0x0)tgBot['sendMessage'](_0x4ffcea[_0x4d1aeb(0x25a)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x4d1aeb(0x229)](_0x201415=>{telegramError(_0x201415);});else{if(_0x33cd3a[_0x4d1aeb(0x18f)]>0x1)_0x33cd3a[_0x4d1aeb(0x172)]({'botID':'all'});let _0x4a6af8=[],_0x601973=[];const _0x257bc5=_0x33cd3a[_0x4d1aeb(0x18f)]%0x4==0x0||_0x33cd3a[_0x4d1aeb(0x18f)]%0x4==0x3||_0x33cd3a[_0x4d1aeb(0x18f)]%0x3==0x1?0x4:0x3;let _0x6c207a=0x0;_0x33cd3a[_0x4d1aeb(0x1e6)]((_0x1efdeb,_0x1b24b8)=>{const _0x2b1a2c=_0x4d1aeb;if(_0x1b24b8%_0x257bc5==0x0)_0x601973=[];_0x601973[_0x2b1a2c(0x172)]({'text':_0x1efdeb[_0x2b1a2c(0x1ca)]==_0x2b1a2c(0x21f)?_0x2b1a2c(0x1b5):_0x2b1a2c(0x168)+_0x1efdeb[_0x2b1a2c(0x1ca)],'callback_data':_0x1efdeb[_0x2b1a2c(0x1ca)]}),_0x1b24b8%_0x257bc5==0x0&&(_0x4a6af8[_0x6c207a]=_0x601973,_0x6c207a++);}),tgBot['sendMessage'](_0x4ffcea['chat']['id'],_0x4d1aeb(0x157),{'reply_markup':{'inline_keyboard':_0x4a6af8}})[_0x4d1aeb(0x229)](_0x422d44=>{telegramError(_0x422d44);}),tgBot['on']('callback_query',async _0x223c60=>{const _0x260f5b=_0x4d1aeb,_0x308b7f=_0x223c60[_0x260f5b(0x249)],_0x3902fd=_0x223c60[_0x260f5b(0x17b)];tgBot[_0x260f5b(0x143)](_0x223c60['id'])[_0x260f5b(0x21c)](async()=>{const _0x3bdbf0=_0x260f5b;_0x308b7f=='all'?(tgBot[_0x3bdbf0(0x13b)](_0x3902fd['chat']['id'],_0x3bdbf0(0x22e))[_0x3bdbf0(0x229)](_0x44d4a4=>{telegramError(_0x44d4a4);}),config['forEach'](_0x1b6577=>{const _0x44cfc0=_0x3bdbf0;restartBot(_0x1b6577[_0x44cfc0(0x1ca)]);})):(tgBot[_0x3bdbf0(0x13b)](_0x3902fd[_0x3bdbf0(0x25a)]['id'],_0x3bdbf0(0x1c2)+_0x308b7f)[_0x3bdbf0(0x229)](_0x3f37c8=>{telegramError(_0x3f37c8);}),restartBot(_0x308b7f));}),tgBot['removeListener'](_0x260f5b(0x170));});}}),tgBot['onText'](/\/on/,_0x4d4dc2=>{const _0x171573=_0x34b3b9;if(!validateTelegram(_0x4d4dc2))return;tgBot[_0x171573(0x145)](_0x171573(0x170));const _0x3f4058=getDisabledBots();if(_0x3f4058[_0x171573(0x18f)]==0x0)tgBot[_0x171573(0x13b)](_0x4d4dc2['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0x171573(0x229)](_0x71ac15=>{telegramError(_0x71ac15);});else{if(_0x3f4058[_0x171573(0x18f)]>0x1)_0x3f4058['push']({'botID':_0x171573(0x21f)});let _0x238a4e=[],_0x32112f=[];const _0x10df59=_0x3f4058['length']%0x4==0x0||_0x3f4058['length']%0x4==0x3||_0x3f4058[_0x171573(0x18f)]%0x3==0x1?0x4:0x3;let _0xf070a9=0x0;_0x3f4058[_0x171573(0x1e6)]((_0x3f5a4f,_0x124215)=>{const _0x38a297=_0x171573;if(_0x124215%_0x10df59==0x0)_0x32112f=[];_0x32112f['push']({'text':_0x3f5a4f[_0x38a297(0x1ca)]==_0x38a297(0x21f)?_0x38a297(0x1b5):_0x38a297(0x168)+_0x3f5a4f['botID'],'callback_data':_0x3f5a4f['botID']}),_0x124215%_0x10df59==0x0&&(_0x238a4e[_0xf070a9]=_0x32112f,_0xf070a9++);}),tgBot[_0x171573(0x13b)](_0x4d4dc2[_0x171573(0x25a)]['id'],_0x171573(0x25b),{'reply_markup':{'inline_keyboard':_0x238a4e}})[_0x171573(0x229)](_0xd4ed69=>{telegramError(_0xd4ed69);}),tgBot['on'](_0x171573(0x170),async _0x4a921c=>{const _0x172c84=_0x171573,_0x1e0cfc=_0x4a921c[_0x172c84(0x249)],_0xcb9734=_0x4a921c[_0x172c84(0x17b)];tgBot[_0x172c84(0x143)](_0x4a921c['id'])[_0x172c84(0x21c)](async()=>{const _0xe7354c=_0x172c84;_0x1e0cfc==_0xe7354c(0x21f)?(tgBot[_0xe7354c(0x13b)](_0xcb9734[_0xe7354c(0x25a)]['id'],_0xe7354c(0x16f))[_0xe7354c(0x229)](_0x25d736=>{telegramError(_0x25d736);}),_0x3f4058[_0xe7354c(0x1e6)](_0x6a7749=>{const _0x33c643=_0xe7354c;if(_0x6a7749[_0x33c643(0x1ca)]!='all')toggleBot(_0x6a7749['botID'],toggleStatus(_0x6a7749[_0x33c643(0x1ca)]),_0x33c643(0x128));})):(tgBot[_0xe7354c(0x13b)](_0xcb9734[_0xe7354c(0x25a)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1e0cfc)[_0xe7354c(0x229)](_0x4fceda=>{telegramError(_0x4fceda);}),toggleBot(_0x1e0cfc,toggleStatus(_0x1e0cfc),'stopped'));}),tgBot[_0x172c84(0x145)](_0x172c84(0x170));});}}),tgBot['onText'](/\/off/,_0x367d76=>{const _0x193a07=_0x34b3b9;if(!validateTelegram(_0x367d76))return;tgBot['removeListener']('callback_query');const _0x7c9c6a=getEnabledBots();if(_0x7c9c6a[_0x193a07(0x18f)]==0x0)tgBot['sendMessage'](_0x367d76[_0x193a07(0x25a)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x193a07(0x229)](_0x184c55=>{telegramError(_0x184c55);});else{if(_0x7c9c6a[_0x193a07(0x18f)]>0x1)_0x7c9c6a[_0x193a07(0x172)]({'botID':_0x193a07(0x21f)});let _0x2cdba6=[],_0x2bcd26=[];const _0x971915=_0x7c9c6a[_0x193a07(0x18f)]%0x4==0x0||_0x7c9c6a['length']%0x4==0x3||_0x7c9c6a[_0x193a07(0x18f)]%0x3==0x1?0x4:0x3;let _0x5e4f67=0x0;_0x7c9c6a['forEach']((_0x3e1d72,_0x52fa8a)=>{const _0x137b08=_0x193a07;if(_0x52fa8a%_0x971915==0x0)_0x2bcd26=[];_0x2bcd26[_0x137b08(0x172)]({'text':_0x3e1d72[_0x137b08(0x1ca)]=='all'?'All\x20bots':_0x137b08(0x168)+_0x3e1d72[_0x137b08(0x1ca)],'callback_data':_0x3e1d72[_0x137b08(0x1ca)]}),_0x52fa8a%_0x971915==0x0&&(_0x2cdba6[_0x5e4f67]=_0x2bcd26,_0x5e4f67++);}),tgBot['sendMessage'](_0x367d76[_0x193a07(0x25a)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2cdba6}})[_0x193a07(0x229)](_0x40ac2e=>{telegramError(_0x40ac2e);}),tgBot['on'](_0x193a07(0x170),async _0x34e27c=>{const _0x488d9c=_0x193a07,_0xfb193c=_0x34e27c[_0x488d9c(0x249)],_0x6b5dad=_0x34e27c[_0x488d9c(0x17b)];tgBot[_0x488d9c(0x143)](_0x34e27c['id'])[_0x488d9c(0x21c)](async()=>{const _0x4346b0=_0x488d9c;_0xfb193c=='all'?(tgBot[_0x4346b0(0x13b)](_0x6b5dad[_0x4346b0(0x25a)]['id'],_0x4346b0(0x126))[_0x4346b0(0x229)](_0x766a9a=>{telegramError(_0x766a9a);}),_0x7c9c6a[_0x4346b0(0x1e6)](_0xfafda0=>{const _0x1e37a5=_0x4346b0;if(_0xfafda0['botID']!=_0x1e37a5(0x21f))toggleBot(_0xfafda0['botID'],toggleStatus(_0xfafda0[_0x1e37a5(0x1ca)]),_0x1e37a5(0x128));})):(tgBot[_0x4346b0(0x13b)](_0x6b5dad['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0xfb193c)[_0x4346b0(0x229)](_0x5b322c=>{telegramError(_0x5b322c);}),toggleBot(_0xfb193c,toggleStatus(_0xfb193c),_0x4346b0(0x128)));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/toggle/,_0x3a9725=>{const _0x3f1e4e=_0x34b3b9;if(!validateTelegram(_0x3a9725))return;tgBot[_0x3f1e4e(0x145)](_0x3f1e4e(0x170));const _0x292230=getBotsWithMode();if(_0x292230[_0x3f1e4e(0x18f)]==0x0)tgBot[_0x3f1e4e(0x13b)](_0x3a9725[_0x3f1e4e(0x25a)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x5ec4a4=>{telegramError(_0x5ec4a4);});else{let _0x58e344=[],_0xb017e4=[];const _0x5b2984=0x2;let _0x2c2ad4=0x0;_0x292230['forEach']((_0x5cc69c,_0x4b3a7c)=>{const _0x1995fa=_0x3f1e4e;if(_0x4b3a7c%_0x5b2984==0x0)_0xb017e4=[];_0xb017e4['push']({'text':'Bot\x20'+_0x5cc69c[_0x1995fa(0x1ca)]+'\x20('+_0x5cc69c[_0x1995fa(0x179)]+')','callback_data':_0x5cc69c[_0x1995fa(0x1ca)]}),_0x4b3a7c%_0x5b2984==0x0&&(_0x58e344[_0x2c2ad4]=_0xb017e4,_0x2c2ad4++);}),tgBot[_0x3f1e4e(0x13b)](_0x3a9725['chat']['id'],_0x3f1e4e(0x147),{'reply_markup':{'inline_keyboard':_0x58e344}})[_0x3f1e4e(0x229)](_0x147deb=>{telegramError(_0x147deb);}),tgBot['on'](_0x3f1e4e(0x170),async _0x50e03e=>{const _0x14a6d0=_0x3f1e4e,_0x2d42ea=_0x50e03e[_0x14a6d0(0x249)],_0x309b2e=_0x50e03e[_0x14a6d0(0x17b)];tgBot[_0x14a6d0(0x143)](_0x50e03e['id'])[_0x14a6d0(0x21c)](async()=>{const _0x5cd904=_0x14a6d0,_0x577b85=_0x292230[_0x5cd904(0x219)](_0x442713=>_0x442713[_0x5cd904(0x1ca)]==_0x2d42ea),_0x2c19de=_0x577b85[_0x5cd904(0x179)]=='auto'?_0x5cd904(0x17e):_0x5cd904(0x22a);tgBot[_0x5cd904(0x13b)](_0x309b2e[_0x5cd904(0x25a)]['id'],_0x5cd904(0x176)+_0x2d42ea+_0x5cd904(0x218)+_0x2c19de+_0x5cd904(0x190))['catch'](_0x93d6cc=>{telegramError(_0x93d6cc);}),toggleBotMode(_0x2d42ea);}),tgBot[_0x14a6d0(0x145)](_0x14a6d0(0x170));});}}),tgBot[_0x34b3b9(0x1a8)](/\/names/,_0x436393=>{const _0x25a0fe=_0x34b3b9;if(!validateTelegram(_0x436393))return;let _0x282ebe='';config[_0x25a0fe(0x1e6)](_0x1ab93f=>{const _0x3178fa=_0x25a0fe;_0x282ebe+='Bot\x20'+_0x1ab93f[_0x3178fa(0x1ca)]+':\x20'+_0x1ab93f['botname']+'\x0a';}),tgBot[_0x25a0fe(0x13b)](_0x436393[_0x25a0fe(0x25a)]['id'],_0x282ebe,{'parse_mode':_0x25a0fe(0x1fe)})['catch'](_0x5dfa80=>{telegramError(_0x5dfa80);});}),tgBot[_0x34b3b9(0x1a8)](/\/disable/,_0x3eea35=>{const _0x5e5fcb=_0x34b3b9;if(!validateTelegram(_0x3eea35))return;tgBot[_0x5e5fcb(0x13b)](_0x3eea35[_0x5e5fcb(0x25a)]['id'],'Notifications\x20disabled')['catch'](_0x1aa3c9=>{telegramError(_0x1aa3c9);}),updateSetting(_0x5e5fcb(0x233),![]);}),tgBot[_0x34b3b9(0x1a8)](/\/help/,_0x1ec10f=>{const _0x529ec4=_0x34b3b9;if(!validateTelegram(_0x1ec10f))return;tgBot[_0x529ec4(0x13b)](_0x1ec10f[_0x529ec4(0x25a)]['id'],_0x3016a0)[_0x529ec4(0x229)](_0x63534=>{telegramError(_0x63534);});}),tgBot['on'](_0x34b3b9(0x1cd),_0x103e1a=>{const _0x48899b=_0x34b3b9;_0x103e1a[_0x48899b(0x1fd)]()[_0x48899b(0x1c6)](_0x48899b(0x1c1))&&(logging(_0x48899b(0x20d)),tgBot[_0x48899b(0x199)](),tgBot=null,io['to'](_0x48899b(0x193))[_0x48899b(0x23f)](_0x48899b(0x221),_0x48899b(0x20d)));}),process[_0x34b3b9(0x1eb)]('SIGINT',()=>{const _0x4b0415=_0x34b3b9;if(tgBot)tgBot[_0x4b0415(0x199)]();process[_0x4b0415(0x1f5)](0x1);}),process[_0x34b3b9(0x1eb)](_0x34b3b9(0x205),()=>{const _0x24d68d=_0x34b3b9;if(tgBot)tgBot['stopPolling']();process[_0x24d68d(0x1f5)](0x1);});}}function disableTelegram(){const _0x35a622=_0x402db5;tgBot&&(tgBot[_0x35a622(0x199)](),tgBot=null);}function sendTelegram(_0x5d25bf,_0x1af35b){const _0x3908ad=_0x402db5;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x3908ad(0x21f)||(_0x1af35b[_0x3908ad(0x231)]==_0x3908ad(0x1fc)||_0x1af35b['type']==_0x3908ad(0x248))&&settings[_0x3908ad(0x1ae)]==_0x3908ad(0x19d)||_0x1af35b[_0x3908ad(0x231)]==_0x3908ad(0x1ec)&&settings[_0x3908ad(0x1ae)]==_0x3908ad(0x135)){if(tgBot&&settings['telegramChatId']){if(_0x1af35b[_0x3908ad(0x13e)])tgBot['sendMessage'](settings[_0x3908ad(0x236)],_0x1af35b[_0x3908ad(0x263)]+'\x20>\x20'+_0x1af35b[_0x3908ad(0x1f9)])[_0x3908ad(0x229)](_0x3f548a=>{telegramError(_0x3f548a);});else tgBot[_0x3908ad(0x13b)](settings[_0x3908ad(0x236)],_0x3908ad(0x168)+_0x5d25bf+_0x3908ad(0x1b7)+_0x1af35b[_0x3908ad(0x1f9)])['catch'](_0x149952=>{telegramError(_0x149952);});}}}}function getDeviceWithIp(_0x2d0332){const _0x540bb5=_0x402db5;return devices[_0x540bb5(0x219)](_0x409fb9=>_0x409fb9['ip']===_0x2d0332);}function temporaryAccess2FA(_0xb1b90b,_0x23edd6){const _0x31a919=_0x402db5;let _0x3529c2=new Date(),_0x51ad14=![];if(lastIpApproval){if(_0x3529c2-lastIpApproval<0x1388)_0x51ad14=!![];}lastIpApproval=new Date();if(_0x51ad14)return;tgBot&&settings[_0x31a919(0x236)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x31a919(0x13a)+normalizeIP(_0x23edd6)[_0x31a919(0x1c8)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x31a919(0x1ba),'callback_data':'5'},{'text':_0x31a919(0x1cb),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x31a919(0x1cc),'callback_data':_0x31a919(0x1cc)}]]}})[_0x31a919(0x229)](_0x1f0643=>{telegramError(_0x1f0643);}),tgBot['on'](_0x31a919(0x170),async _0x4b27ad=>{const _0x3ccbed=_0x31a919,_0x4d5de2=_0x4b27ad['data'],_0x175995=_0x4b27ad[_0x3ccbed(0x17b)];tgBot[_0x3ccbed(0x143)](_0x4b27ad['id'])[_0x3ccbed(0x21c)](async()=>{const _0x4c4cc4=_0x3ccbed;devices[_0xb1b90b][_0x4c4cc4(0x277)]={'clientip':_0x23edd6,'timestamp':new Date()[_0x4c4cc4(0x189)](),'expiry':_0x4d5de2},_0x4d5de2!=_0x4c4cc4(0x1cc)?(await tgBot[_0x4c4cc4(0x13b)](_0x175995[_0x4c4cc4(0x25a)]['id'],'Access\x20enabled\x20for\x20'+_0x4d5de2+'\x20minutes',{'parse_mode':_0x4c4cc4(0x1fe)})[_0x4c4cc4(0x229)](_0x13c894=>{telegramError(_0x13c894);}),io['to'](_0xb1b90b)['emit'](_0x4c4cc4(0x16c),{'access':{'allow':![],'reason':_0x4c4cc4(0x20a),'token':null}})):(await tgBot[_0x4c4cc4(0x13b)](_0x175995[_0x4c4cc4(0x25a)]['id'],_0x4c4cc4(0x1d5))[_0x4c4cc4(0x229)](_0x412d41=>{telegramError(_0x412d41);}),io['to'](_0xb1b90b)['emit']('status',{'access':{'allow':![],'reason':_0x4c4cc4(0x226),'token':null}}));}),tgBot[_0x3ccbed(0x145)](_0x3ccbed(0x170));}));}function loginAccess2FA(_0x453184,_0x5a6202){const _0x15dcce=_0x402db5;tgBot&&settings[_0x15dcce(0x236)]&&(tgBot[_0x15dcce(0x145)]('callback_query'),tgBot[_0x15dcce(0x13b)](settings[_0x15dcce(0x236)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5a6202)[_0x15dcce(0x1c8)]+'</b>\x20?',{'parse_mode':_0x15dcce(0x1fe),'reply_markup':{'inline_keyboard':[[{'text':_0x15dcce(0x25e),'callback_data':loginExpiry},{'text':_0x15dcce(0x1cc),'callback_data':_0x15dcce(0x1cc)}]]}})[_0x15dcce(0x229)](_0x508bd3=>{telegramError(_0x508bd3);}),tgBot['on'](_0x15dcce(0x170),async _0x2c07dd=>{const _0x30cc22=_0x15dcce,_0x29160a=_0x2c07dd[_0x30cc22(0x249)],_0x42a513=_0x2c07dd[_0x30cc22(0x17b)];tgBot['answerCallbackQuery'](_0x2c07dd['id'])[_0x30cc22(0x21c)](async()=>{const _0x1e11d5=_0x30cc22;devices[_0x453184][_0x1e11d5(0x139)]={'clientip':_0x5a6202,'timestamp':new Date()[_0x1e11d5(0x189)](),'expiry':_0x29160a},_0x29160a!=_0x1e11d5(0x1cc)?(await tgBot[_0x1e11d5(0x13b)](_0x42a513['chat']['id'],_0x1e11d5(0x24f),{'parse_mode':_0x1e11d5(0x1fe)})['catch'](_0x1cf901=>{telegramError(_0x1cf901);}),io['to'](_0x453184)[_0x1e11d5(0x23f)](_0x1e11d5(0x16c),{'access':{'allow':![],'reason':_0x1e11d5(0x20a),'token':null}})):(await tgBot[_0x1e11d5(0x13b)](_0x42a513[_0x1e11d5(0x25a)]['id'],_0x1e11d5(0x1e2))[_0x1e11d5(0x229)](_0x4d8642=>{telegramError(_0x4d8642);}),io['to'](_0x453184)[_0x1e11d5(0x23f)](_0x1e11d5(0x16c),{'access':{'allow':![],'reason':_0x1e11d5(0x1c5),'token':null}}));}),tgBot[_0x30cc22(0x145)](_0x30cc22(0x170));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x20e9f2=_0x402db5;return dbConfig[_0x20e9f2(0x24c)](_0x20e9f2(0x1c9))[_0x20e9f2(0x192)](_0x20e9f2(0x1ca))[_0x20e9f2(0x161)]({'status':_0x20e9f2(0x23d)})[_0x20e9f2(0x266)]()||[];}function getDisabledBots(){const _0x3461cd=_0x402db5;return dbConfig['get'](_0x3461cd(0x1c9))[_0x3461cd(0x192)](_0x3461cd(0x1ca))['filter']({'status':_0x3461cd(0x1b4)})[_0x3461cd(0x266)]()||[];}function getBotsWithMode(){const _0x40a54b=_0x402db5,_0x5cc37e=dbConfig[_0x40a54b(0x24c)](_0x40a54b(0x1c9))[_0x40a54b(0x192)]('botID')[_0x40a54b(0x266)]()||[];return _0x5cc37e[_0x40a54b(0x1e6)](_0x3b0fd7=>{const _0x255846=_0x40a54b,_0x43553c=configpath+_0x255846(0x162)+_0x3b0fd7[_0x255846(0x1ca)]+_0x255846(0x27c),_0x578168=fs[_0x255846(0x187)](_0x43553c);if(_0x578168){const _0xde0878=fs[_0x255846(0x278)](_0x43553c);try{const _0x4d374b=JSON[_0x255846(0x239)](_0xde0878),_0x2114cf=_0x4d374b?_0x4d374b[_0x255846(0x14a)][0x0][_0x255846(0x164)]:![];_0x3b0fd7[_0x255846(0x179)]=_0x2114cf?_0x255846(0x22a):_0x255846(0x17e);}catch(_0x1cf58a){_0x3b0fd7['mode']=_0x255846(0x17e);}}else _0x3b0fd7[_0x255846(0x179)]=_0x255846(0x17e);}),_0x5cc37e;}function getSettings(){const _0x221d7e=_0x402db5;return dbSettings['get'](_0x221d7e(0x214))[_0x221d7e(0x266)]()||{'timeshift':0x0};}function getSecure(){const _0x2ccbb6=_0x402db5;return dbSecure[_0x2ccbb6(0x24c)]('secure')[_0x2ccbb6(0x266)]()||{};}function getBlacklist(){const _0xdb0d4c=_0x402db5;return dbSecure[_0xdb0d4c(0x24c)](_0xdb0d4c(0x134))[_0xdb0d4c(0x266)]()||[];}function broadcastToBots(_0x36e24f,_0x26b0c5){const _0x3be4d3=_0x402db5;config[_0x3be4d3(0x1e6)](_0xc8ebeb=>{const _0x52ad66=_0x3be4d3;if(_0xc8ebeb['status']==_0x52ad66(0x23d)&&_0xc8ebeb['live']==_0x52ad66(0x1ff)){if(pid[_0xc8ebeb[_0x52ad66(0x1ca)]])pid[_0xc8ebeb[_0x52ad66(0x1ca)]][_0x52ad66(0x273)]({[_0x36e24f]:_0x26b0c5});}});}function storeSettings(_0x25c4fa,_0x559fd2=![]){const _0x46c06d=_0x402db5;_0x25c4fa={...settings,..._0x25c4fa};if(_0x559fd2&&_0x25c4fa[_0x46c06d(0x1ac)]!=_0x46c06d(0x158)&&_0x25c4fa['bbPassword']!=''){const _0x139c80=crypt['decrypt'](secure['privateKey'],_0x25c4fa['bbPassword'])[_0x46c06d(0x17b)][_0x46c06d(0x1af)]('@')[0x0],_0x20dc11=bcrypt[_0x46c06d(0x1c7)](_0x139c80,saltRounds);_0x25c4fa={..._0x25c4fa,'bbPassword':_0x20dc11};}if(_0x559fd2&&_0x25c4fa[_0x46c06d(0x22f)]!=_0x46c06d(0x158)&&_0x25c4fa[_0x46c06d(0x22f)]!=''){const _0x57d22d=crypt[_0x46c06d(0x22b)](secure[_0x46c06d(0x265)],_0x25c4fa['telegramToken'])[_0x46c06d(0x17b)][_0x46c06d(0x1af)]('@')[0x0];_0x25c4fa={..._0x25c4fa,'telegramToken':_0x57d22d};}const _0x46269e=_0x25c4fa[_0x46c06d(0x22f)]!=_0x46c06d(0x158)&&_0x25c4fa[_0x46c06d(0x22f)]!=settings[_0x46c06d(0x22f)]||_0x25c4fa[_0x46c06d(0x1ad)]!=settings['telegramUsername'],_0x492808=_0x25c4fa['telegramToken']==''||_0x25c4fa['telegramUsername']=='';if(_0x46269e)_0x25c4fa['telegramEvents']=_0x46c06d(0x21f);for(const [_0x978183,_0x339b5a]of Object[_0x46c06d(0x185)](_0x25c4fa)){if(_0x978183==_0x46c06d(0x22f)&&_0x339b5a==_0x46c06d(0x158)){_0x25c4fa[_0x46c06d(0x22f)]=settings[_0x46c06d(0x22f)];continue;};if(_0x978183=='bbPassword'&&_0x339b5a==_0x46c06d(0x158)){_0x25c4fa['bbPassword']=settings[_0x46c06d(0x1ac)];continue;};dbSettings['set'](_0x46c06d(0x17a)+_0x978183,_0x339b5a)[_0x46c06d(0x19f)]();}settings=_0x25c4fa,io['to'](_0x46c06d(0x193))[_0x46c06d(0x23f)](_0x46c06d(0x214),cleanSettings()),broadcastToBots(_0x46c06d(0x211),settings[_0x46c06d(0x211)]);if(_0x46269e&&!_0x492808)initTelegram();if(_0x46269e&&_0x492808)disableTelegram();getAllClients()[_0x46c06d(0x1e6)](_0x57a1f6=>{const _0x33336d=_0x46c06d;getSocket(_0x57a1f6['id'])[_0x33336d(0x23f)](_0x33336d(0x16c),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x31ce47,_0x5450dc){const _0x3ae6ae=_0x402db5;dbSettings[_0x3ae6ae(0x20c)](_0x3ae6ae(0x17a)+_0x31ce47,_0x5450dc)[_0x3ae6ae(0x19f)](),settings=getSettings(),io['to'](_0x3ae6ae(0x193))[_0x3ae6ae(0x23f)]('settings',cleanSettings());}function storeSecure(_0x5dbdac){const _0x4b0bd6=_0x402db5;dbSecure[_0x4b0bd6(0x24c)](_0x4b0bd6(0x23c))[_0x4b0bd6(0x172)](_0x5dbdac)[_0x4b0bd6(0x19f)](),secure=_0x5dbdac;}function addBlacklist(_0x4fcd6c){const _0x13b56e=_0x402db5;cleanBlacklist();let _0x14ca8a;devices[_0x4fcd6c][_0x13b56e(0x277)]?_0x14ca8a=Math[_0x13b56e(0x19e)](devices[_0x4fcd6c][_0x13b56e(0x277)][_0x13b56e(0x1f7)],loginExpiry):_0x14ca8a=loginExpiry,dbSecure[_0x13b56e(0x24c)]('blacklist')[_0x13b56e(0x172)]({'expiry':new Date()['getTime']()+_0x14ca8a*0x3c*0x3e8,'token':devices[_0x4fcd6c][_0x13b56e(0x1db)][_0x13b56e(0x216)]})[_0x13b56e(0x19f)](),blacklist=dbSecure[_0x13b56e(0x24c)](_0x13b56e(0x134))[_0x13b56e(0x266)]();}function cleanBlacklist(){const _0xea37c7=_0x402db5;let _0xc50aa3=dbSecure[_0xea37c7(0x24c)]('blacklist')['cloneDeep']()[_0xea37c7(0x266)](),_0x4fa3ac=new Date()[_0xea37c7(0x189)]();_0xc50aa3[_0xea37c7(0x1e6)](_0x303f5c=>{const _0x4a1752=_0xea37c7;_0x303f5c['expiry']<_0x4fa3ac&&dbSecure[_0x4a1752(0x24c)](_0x4a1752(0x134))[_0x4a1752(0x148)]({'expiry':_0x303f5c[_0x4a1752(0x1f7)]})[_0x4a1752(0x19f)]();});}function _0x5e9a(_0x461ef,_0x225ded){const _0x4602d7=_0x5d71();return _0x5e9a=function(_0x22914f,_0xb034e2){_0x22914f=_0x22914f-0x125;let _0x5d71b9=_0x4602d7[_0x22914f];return _0x5d71b9;},_0x5e9a(_0x461ef,_0x225ded);}function initStates(){const _0x207e33=_0x402db5;let _0x2fcb6c=getConfiguration();_0x2fcb6c[_0x207e33(0x1e6)](_0x3c5252=>{const _0x460bc7=_0x207e33;_0x3c5252['live']=_0x460bc7(0x128);}),storeConfiguration(_0x2fcb6c);}function onKeys(){const _0x4ef1bb=new RSA();return new Promise(_0x18c0dc=>{const _0xdef24a=_0x5e9a;_0x4ef1bb[_0xdef24a(0x14c)]()[_0xdef24a(0x21c)](_0xd61187=>{_0x18c0dc(_0xd61187);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1f1865=_0x402db5;let _0x2fbbc9=getConfiguration(),_0x25dd82=![];_0x2fbbc9['forEach'](_0x1ae40b=>{const _0x22943b=_0x5e9a;if(_0x1ae40b['status']==_0x22943b(0x1ff))_0x1ae40b[_0x22943b(0x16c)]=_0x22943b(0x23d),_0x25dd82=!![];else _0x1ae40b[_0x22943b(0x16c)]==_0x22943b(0x128)&&(_0x1ae40b[_0x22943b(0x16c)]=_0x22943b(0x1b4),_0x25dd82=!![]);});if(_0x25dd82)storeConfiguration(_0x2fbbc9);let _0x333f96=getSecure();if(!_0x333f96[_0x1f1865(0x163)](_0x1f1865(0x264))){let _0x5014f8=await generateKeys();_0x333f96[_0x1f1865(0x174)]=_0x5014f8[_0x1f1865(0x174)],_0x333f96['privateKey']=_0x5014f8[_0x1f1865(0x265)],_0x333f96[_0x1f1865(0x264)]=crypto[_0x1f1865(0x20b)](0x20)[_0x1f1865(0x1fd)]('hex');;storeSecure(_0x333f96);}let _0x38524e=getSettings();_0x25dd82=![];!_0x38524e[_0x1f1865(0x163)](_0x1f1865(0x252))&&(_0x38524e['loginRequired']=![],_0x38524e[_0x1f1865(0x151)]='',_0x38524e[_0x1f1865(0x1ac)]='',_0x38524e[_0x1f1865(0x23e)]=![],_0x25dd82=!![]);!_0x38524e[_0x1f1865(0x163)]('whitelistEnabled')&&(_0x38524e[_0x1f1865(0x225)]=![],_0x38524e['whitelist']=[],_0x38524e[_0x1f1865(0x259)]=![],_0x25dd82=!![]);if(!_0x38524e[_0x1f1865(0x163)](_0x1f1865(0x233))){if(_0x38524e[_0x1f1865(0x236)])_0x38524e['telegramEnabled']=!![];else _0x38524e[_0x1f1865(0x233)]=![];_0x25dd82=!![];}if(_0x25dd82)storeSettings(_0x38524e);}function storeConfiguration(_0x2bada4){const _0x3e1ef3=_0x402db5;dbConfig['get'](_0x3e1ef3(0x1c9))[_0x3e1ef3(0x148)]()[_0x3e1ef3(0x19f)](),_0x2bada4[_0x3e1ef3(0x1e6)](_0x2f00cf=>{const _0x2bc594=_0x3e1ef3;delete _0x2f00cf[_0x2bc594(0x179)];}),dbConfig[_0x3e1ef3(0x24c)](_0x3e1ef3(0x1c9))[_0x3e1ef3(0x172)](..._0x2bada4)[_0x3e1ef3(0x19f)](),config=_0x2bada4;}function resetPassword(){const _0x839fa9=_0x402db5;tgBot&&settings[_0x839fa9(0x236)]&&(tgBot[_0x839fa9(0x145)](_0x839fa9(0x170)),tgBot[_0x839fa9(0x13b)](settings['telegramChatId'],_0x839fa9(0x186),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x839fa9(0x1a6),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x839fa9(0x229)](_0x1bb22d=>{telegramError(_0x1bb22d);}),tgBot['on'](_0x839fa9(0x170),async _0x5b65ba=>{const _0x158795=_0x839fa9,_0x19b617=_0x5b65ba[_0x158795(0x249)],_0x50cb84=_0x5b65ba['message'];tgBot[_0x158795(0x143)](_0x5b65ba['id'])[_0x158795(0x21c)](async()=>{const _0x143870=_0x158795;if(_0x19b617!='no'){const _0xe905c7=0xf,_0x1c20e8='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x53b464=Array[_0x143870(0x1ed)](crypto['randomFillSync'](new Uint32Array(_0xe905c7)))[_0x143870(0x17c)](_0x4ac519=>_0x1c20e8[_0x4ac519%_0x1c20e8[_0x143870(0x18f)]])[_0x143870(0x20e)](''),_0x332f89=bcrypt['hashSync'](_0x53b464,saltRounds);storeSettings({'bbPassword':_0x332f89}),await tgBot[_0x143870(0x13b)](_0x50cb84[_0x143870(0x25a)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x53b464,{'parse_mode':_0x143870(0x1fe)})['catch'](_0x1c1f3a=>{telegramError(_0x1c1f3a);});}else await tgBot[_0x143870(0x13b)](_0x50cb84['chat']['id'],_0x143870(0x12c))[_0x143870(0x229)](_0x4cd5ce=>{telegramError(_0x4cd5ce);});}),tgBot[_0x158795(0x145)](_0x158795(0x170));}));}function logging(_0x3940f9){const _0x55459f=_0x402db5;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x3940f9);if(tgBot&&settings[_0x55459f(0x236)]&&settings[_0x55459f(0x1ae)]!=_0x55459f(0x135))tgBot[_0x55459f(0x13b)](settings[_0x55459f(0x236)],'Bot\x20Mgr\x20>\x20'+_0x3940f9)[_0x55459f(0x229)](_0x3c9bf6=>{telegramError(_0x3c9bf6);});}function getServerTime(){const _0xd83368=_0x402db5,_0x501434=new Date();return _0x501434['getFullYear']()+'/'+(_0x501434['getMonth']()+0x1)[_0xd83368(0x1fd)]()[_0xd83368(0x1de)](0x2,'0')+'/'+_0x501434['getDate']()[_0xd83368(0x1fd)]()[_0xd83368(0x1de)](0x2,'0')+'\x20'+_0x501434[_0xd83368(0x222)]()['toString']()[_0xd83368(0x1de)](0x2,'0')+':'+_0x501434[_0xd83368(0x1fa)]()[_0xd83368(0x1fd)]()[_0xd83368(0x1de)](0x2,'0')+':'+_0x501434['getSeconds']()[_0xd83368(0x1fd)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xa55cad=_0x402db5,_0x11e961=shiftedTime();return _0x11e961[_0xa55cad(0x217)]()+'/'+(_0x11e961['getMonth']()+0x1)[_0xa55cad(0x1fd)]()[_0xa55cad(0x1de)](0x2,'0')+'/'+_0x11e961[_0xa55cad(0x1c3)]()[_0xa55cad(0x1fd)]()[_0xa55cad(0x1de)](0x2,'0')+'\x20'+_0x11e961[_0xa55cad(0x222)]()[_0xa55cad(0x1fd)]()[_0xa55cad(0x1de)](0x2,'0')+':'+_0x11e961['getMinutes']()[_0xa55cad(0x1fd)]()['padStart'](0x2,'0')+':'+_0x11e961[_0xa55cad(0x1a0)]()[_0xa55cad(0x1fd)]()[_0xa55cad(0x1de)](0x2,'0');}function shiftedTime(){const _0x5d10bd=_0x402db5,_0x514902=new Date();let _0x5b0ad2=_0x514902;if(settings[_0x5d10bd(0x211)]&&settings['timeshift']!==0x0)_0x5b0ad2=fns[_0x5d10bd(0x254)](_0x514902,{'hours':settings[_0x5d10bd(0x211)]});return _0x5b0ad2;}function startScheduler(){const _0x1bfd3e=_0x402db5;let _0x2ab9eb=new Date()[_0x1bfd3e(0x1dd)]();_0x2ab9eb==0x1&&backupConfigFiles();_0x2ab9eb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x125a42=_0x402db5;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x125a42(0x1e6)](_0x3361f1=>{const _0x322e0d=_0x125a42;if(!_0x3361f1['isDirectory']())fs[_0x322e0d(0x1d4)](configpath+_0x3361f1['name'],configbackuppath+_0x3361f1[_0x322e0d(0x245)]);});}function triggerAnalytics(){const _0x432f7b=_0x402db5;analytics[_0x432f7b(0x142)]({'title':_0x432f7b(0x227),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x482a0d,_0x3bce93){const _0x584c90=_0x402db5;if(_0x482a0d[_0x584c90(0x136)]==settings[_0x584c90(0x151)]&&bcrypt[_0x584c90(0x15b)](_0x482a0d[_0x584c90(0x19c)],settings[_0x584c90(0x1ac)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x584c90(0x12e),'token':null};else{const _0xfa356d=generateLoginToken(_0x3bce93);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xfa356d};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x21bb90){const _0x5deb8e=_0x402db5,_0x1fb8b6=generateLoginToken(_0x21bb90);return{'allow':!![],'reason':_0x5deb8e(0x26f),'token':_0x1fb8b6};}function validateAccess(_0x31e665,_0x18685f){const _0x2d4862=_0x402db5;let _0x337c54=devices[_0x18685f]['ip'],_0xd65ef9;const _0x281461=_0x23294a=>{const _0x535a5c=_0x5e9a;if(settings['loginRequired']){if(settings[_0x535a5c(0x23e)]){if(telegram2FaApproved(_0x18685f)){const _0x3c5a9b=generateLoginToken(_0x18685f);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3c5a9b};}else return{'allow':![],'reason':_0x535a5c(0x258),'token':null};}else return _0xd65ef9=validToken(_0x23294a,_0x18685f),_0xd65ef9['hasOwnProperty']('success')?{'allow':!![],'reason':_0x535a5c(0x1bb),'token':_0x23294a}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x535a5c(0x1f8),'token':null};};if(settings[_0x2d4862(0x225)]){let _0xf32c6b=[...settings['whitelist'],_0x2d4862(0x12d),_0x2d4862(0x1aa),'127.0.0.1'];if(_0xf32c6b['includes'](_0x337c54))return _0x281461(_0x31e665);else{_0xd65ef9=validToken(_0x31e665,_0x18685f);if(_0xd65ef9['hasOwnProperty'](_0x2d4862(0x248)))return _0x281461(_0x31e665);else{if(telegramIpApproved(_0x18685f)){const _0x4e7cf1=generateToken(_0x18685f);return _0xd65ef9=_0x281461(_0x31e665),_0xd65ef9['allow']?{'allow':!![],'reason':_0x2d4862(0x138),'token':_0x4e7cf1}:_0xd65ef9;}else return settings[_0x2d4862(0x259)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2d4862(0x1d6),'token':null};}}}else return _0x281461(_0x31e665);}function timelyDecrypt(_0x2a6d98,_0x5e6735=!![]){const _0x388932=_0x402db5;if(_0x2a6d98)try{const _0x118d74=crypt['decrypt'](secure[_0x388932(0x265)],_0x2a6d98)[_0x388932(0x17b)],_0x159c61=_0x118d74['split']('@')[0x0],_0x546852=_0x118d74[_0x388932(0x1af)]('@')[0x1],_0x1975cd=new Date()[_0x388932(0x189)]();if(_0x5e6735){if(_0x1975cd-_0x546852<maxSecretAge*0x3e8)return _0x159c61;else return![];}else return _0x159c61;}catch(_0x430961){return![];}else return![];}const validToken=(_0xdf28f9,_0x348474)=>{const _0x4c45ae=_0x402db5,_0x5c18c5=devices[_0x348474]['ip'];if(!_0xdf28f9)return{'error':_0x4c45ae(0x1ef)};for(let _0x176556 of blacklist){if(_0x176556[_0x4c45ae(0x216)]==_0xdf28f9)return{'error':'Token\x20blacklisted'};}let _0x589e64;try{_0x589e64=jwt[_0x4c45ae(0x188)](_0xdf28f9,secure[_0x4c45ae(0x264)]+_0x348474);}catch{return{'error':_0x4c45ae(0x1a9)};}if(!_0x589e64[_0x4c45ae(0x163)](_0x4c45ae(0x18c))&&!_0x589e64[_0x4c45ae(0x163)](_0x4c45ae(0x136))||!_0x589e64[_0x4c45ae(0x163)](_0x4c45ae(0x1bf)))return{'error':_0x4c45ae(0x125)};if(!_0x589e64['hasOwnProperty']('username')&&_0x589e64[_0x4c45ae(0x163)]('clientip')){const {clientip:_0x758351}=_0x589e64;return _0x5c18c5==_0x758351?{'success':_0x4c45ae(0x14b)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x589e64[_0x4c45ae(0x163)](_0x4c45ae(0x136))&&_0x589e64[_0x4c45ae(0x163)]('clientip')){const {username:_0x3d33df,clientip:_0x30cffe}=_0x589e64;return settings['bbUsername']==_0x3d33df&&_0x5c18c5==_0x30cffe?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xae1967=>{const _0x37bf12=_0x402db5;if(_0xae1967){const _0x14221c=devices[_0xae1967]['ip'];return jwt['sign']({'username':settings[_0x37bf12(0x151)],'clientip':_0x14221c},secure[_0x37bf12(0x264)]+_0xae1967,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3d49b3=>{const _0x45d862=_0x402db5;if(_0x3d49b3){const _0x7e7596=devices[_0x3d49b3]['ip'];return jwt[_0x45d862(0x180)]({'clientip':_0x7e7596},secure[_0x45d862(0x264)]+_0x3d49b3,{'expiresIn':devices[_0x3d49b3][_0x45d862(0x277)][_0x45d862(0x1f7)]*0x3c});}else return![];},telegramIpApproved=_0x4814e6=>{const _0x404afa=_0x402db5;let _0x1578c0=![];return devices[_0x4814e6]['telegramIpApproval']&&devices[_0x4814e6][_0x404afa(0x277)][_0x404afa(0x1f7)]!=_0x404afa(0x1cc)&&(_0x1578c0=devices[_0x4814e6]['telegramIpApproval'][_0x404afa(0x18c)]==devices[_0x4814e6]['ip']&&new Date()[_0x404afa(0x189)]()-devices[_0x4814e6][_0x404afa(0x277)][_0x404afa(0x1e9)]<devices[_0x4814e6][_0x404afa(0x277)][_0x404afa(0x1f7)]*0x3c*0x3e8),_0x1578c0;},telegram2FaApproved=_0x3bab81=>{const _0x39212=_0x402db5;let _0x2f02c3=![];return devices[_0x3bab81][_0x39212(0x139)]&&devices[_0x3bab81][_0x39212(0x139)][_0x39212(0x1f7)]!=_0x39212(0x1cc)&&(_0x2f02c3=devices[_0x3bab81][_0x39212(0x139)][_0x39212(0x18c)]==devices[_0x3bab81]['ip']&&new Date()[_0x39212(0x189)]()-devices[_0x3bab81]['telegram2FaApproval'][_0x39212(0x1e9)]<devices[_0x3bab81][_0x39212(0x139)][_0x39212(0x1f7)]*0x3c*0x3e8),_0x2f02c3;},normalizeIP=_0x227bbd=>{const _0x55aa57=_0x402db5;let _0x2b9ad1=null,_0x44dd6a=null;if(ipaddr['isValid'](_0x227bbd)){const _0x1065e9=ipaddr[_0x55aa57(0x239)](_0x227bbd);_0x1065e9[_0x55aa57(0x250)]()===_0x55aa57(0x223)?(_0x1065e9[_0x55aa57(0x26c)]()&&(_0x2b9ad1=_0x1065e9['toIPv4Address']()[_0x55aa57(0x1fd)]()),_0x44dd6a=_0x1065e9['toString']()):(_0x2b9ad1=_0x1065e9[_0x55aa57(0x1fd)](),_0x44dd6a=_0x1065e9[_0x55aa57(0x262)]()[_0x55aa57(0x1fd)]());}return{'show':_0x2b9ad1?_0x2b9ad1:_0x44dd6a,'store':_0x44dd6a};};