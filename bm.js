const _0xe4ffaf=_0x4cd3;(function(_0x5f4e3c,_0x12a056){const _0x59c51d=_0x4cd3,_0x480ae9=_0x5f4e3c();while(!![]){try{const _0x30d328=parseInt(_0x59c51d(0x18e))/0x1+-parseInt(_0x59c51d(0x1e1))/0x2+parseInt(_0x59c51d(0x1e8))/0x3*(parseInt(_0x59c51d(0x117))/0x4)+parseInt(_0x59c51d(0x255))/0x5*(parseInt(_0x59c51d(0x1ca))/0x6)+parseInt(_0x59c51d(0x247))/0x7*(parseInt(_0x59c51d(0x144))/0x8)+-parseInt(_0x59c51d(0x1de))/0x9*(-parseInt(_0x59c51d(0x1b3))/0xa)+-parseInt(_0x59c51d(0x1dd))/0xb*(parseInt(_0x59c51d(0x1a6))/0xc);if(_0x30d328===_0x12a056)break;else _0x480ae9['push'](_0x480ae9['shift']());}catch(_0xb8c56e){_0x480ae9['push'](_0x480ae9['shift']());}}}(_0x236d,0x3e220));const _0x2b377a=function(){let _0x4cc776=!![];return function(_0x4e0ace,_0x1d0970){const _0x404ec6=_0x4cc776?function(){const _0x773c7e=_0x4cd3;if(_0x1d0970){const _0x18534f=_0x1d0970[_0x773c7e(0x171)](_0x4e0ace,arguments);return _0x1d0970=null,_0x18534f;}}:function(){};return _0x4cc776=![],_0x404ec6;};}(),_0x1ba508=_0x2b377a(this,function(){const _0x429798=_0x4cd3;return _0x1ba508[_0x429798(0x1e7)]()[_0x429798(0x154)](_0x429798(0x179))['toString']()[_0x429798(0x128)](_0x1ba508)['search'](_0x429798(0x179));});_0x1ba508();'use strict';process['env'][_0xe4ffaf(0x104)]=0x1;const childProcess=require(_0xe4ffaf(0x13e)),fs=require('fs'),fns=require(_0xe4ffaf(0x274)),low=require(_0xe4ffaf(0xeb)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0xe4ffaf(0x157)),crypto=require(_0xe4ffaf(0x14c)),Crypt=require(_0xe4ffaf(0x151))[_0xe4ffaf(0x1d7)],RSA=require(_0xe4ffaf(0x151))[_0xe4ffaf(0x1da)],bcrypt=require('bcryptjs'),jwt=require(_0xe4ffaf(0x14b)),ipaddr=require(_0xe4ffaf(0xe7)),argv=require(_0xe4ffaf(0x1a8))(process[_0xe4ffaf(0x1d1)][_0xe4ffaf(0x213)](0x2))[_0xe4ffaf(0x1d1)],uuidRandom=require(_0xe4ffaf(0x28f)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0xe4ffaf(0x212)),axios=require(_0xe4ffaf(0x1b5)),{GraphQLClient,gql}=require(_0xe4ffaf(0x245)),util=require(_0xe4ffaf(0x23f)),fileUpload=require(_0xe4ffaf(0x19d)),PORT=argv['port']||_0xe4ffaf(0x148),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0xe4ffaf(0xe6)](_0xe4ffaf(0x1ac)+PORT+_0xe4ffaf(0x1f2)),process[_0xe4ffaf(0x1c1)](0x1));const HOST=argv[_0xe4ffaf(0x160)]||null,userID=argv[_0xe4ffaf(0x1d8)]||'';let bbpath=_0xe4ffaf(0xe5),bbpath2='';const botfile=_0xe4ffaf(0x1cc),configfile=_0xe4ffaf(0x201),settingsfile=_0xe4ffaf(0x22f),securefile=_0xe4ffaf(0x10c);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xe4ffaf(0x253)),configpath=userID?bbpath+_0xe4ffaf(0x17e)+userID+'/':bbpath+_0xe4ffaf(0x17e),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0xe4ffaf(0x278),zippath=userID?bbpath+_0xe4ffaf(0x12b)+userID+'/':bbpath+_0xe4ffaf(0x12b),loggerfile=fs[_0xe4ffaf(0x185)](logspath+_0xe4ffaf(0x288),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+'temp/';!fs[_0xe4ffaf(0x174)](configpath)&&fs[_0xe4ffaf(0x228)](configpath);!fs[_0xe4ffaf(0x174)](configbackuppath)&&fs[_0xe4ffaf(0x228)](configbackuppath);!fs[_0xe4ffaf(0x174)](logspath)&&fs[_0xe4ffaf(0x228)](logspath);!fs[_0xe4ffaf(0x174)](zippath)&&fs['mkdirSync'](zippath);!fs[_0xe4ffaf(0x174)](temppath)&&fs[_0xe4ffaf(0x228)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xe4ffaf(0x178)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xe4ffaf(0x24f)}})[_0xe4ffaf(0x263)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xe4ffaf(0x178)]({'secure':{},'blacklist':[]})[_0xe4ffaf(0x263)]();function _0x4cd3(_0x452da8,_0x2cb024){const _0x537bbd=_0x236d();return _0x4cd3=function(_0x1ba508,_0x2b377a){_0x1ba508=_0x1ba508-0xe5;let _0x236db8=_0x537bbd[_0x1ba508];return _0x236db8;},_0x4cd3(_0x452da8,_0x2cb024);}let crypt=new Crypt({'md':'sha256','rsaStandard':_0xe4ffaf(0x210)});const saltRounds=0xa,mixpanel=Mixpanel[_0xe4ffaf(0x173)](_0xe4ffaf(0x240),{'host':_0xe4ffaf(0x12a)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xe4ffaf(0x16d)]&&settings[_0xe4ffaf(0x16d)]!=''&&settings[_0xe4ffaf(0x19e)]&&settings[_0xe4ffaf(0x19e)]!='')initTelegram();const logger={'screen':_0x473f0a=>{console['log'](_0x473f0a);},'simple':_0x1db749=>{const _0x2e1d3f=_0xe4ffaf;console['log'](_0x1db749),loggerfile[_0x2e1d3f(0x263)](util[_0x2e1d3f(0x1af)](_0x1db749)+'\x0a');},'full':async _0x1226e8=>{const _0x3dc2f2=_0xe4ffaf,_0x4eedbe=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x1226e8;console[_0x3dc2f2(0xe6)](_0x4eedbe),loggerfile[_0x3dc2f2(0x263)](util[_0x3dc2f2(0x1af)](_0x4eedbe)+'\x0a');if(tgBot&&settings[_0x3dc2f2(0x134)]&&settings[_0x3dc2f2(0x226)]!=_0x3dc2f2(0x192))await tgBot['sendMessage'](settings[_0x3dc2f2(0x134)],_0x3dc2f2(0x116)+_0x1226e8)['catch'](_0xc06736=>{telegramError(_0xc06736);});}};process['on'](_0xe4ffaf(0x172),function(_0x47f369){logger['simple'](_0x47f369);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0xe4ffaf(0x27f))[_0xe4ffaf(0x107)](app);app[_0xe4ffaf(0x122)](fileUpload({'useTempFiles':!![]})),app[_0xe4ffaf(0x1dc)](_0xe4ffaf(0x112),async(_0x1add18,_0x223311)=>{const _0x260953=_0xe4ffaf,_0x5d9b10=_0x1add18['params'][_0x260953(0x16c)],_0x13f47c=getClientsWithBotID(_0x260953(0x199)),_0x24f36f=_0x1add18[_0x260953(0x14e)]['uuid'],_0x4ad5b2=timelyDecrypt(_0x24f36f,![]),_0x113acd=_0x13f47c[_0x260953(0xec)](_0xc74589=>_0xc74589['uuid']==_0x4ad5b2);if(_0x113acd){const _0x57e47f=normalizeIP(_0x1add18['socket'][_0x260953(0x16a)])[_0x260953(0x1d4)],_0x21b756=_0x1add18[_0x260953(0x14e)][_0x260953(0x10a)];if(validateAccess(_0x21b756,_0x4ad5b2,_0x57e47f)[_0x260953(0x242)])await zipFiles(_0x5d9b10),_0x223311[_0x260953(0x1bb)](zippath+(_0x5d9b10+_0x260953(0xfa)),_0x19a33e=>{const _0x27b8e0=_0x260953;_0x19a33e&&(logger[_0x27b8e0(0x15b)]('Failed\x20to\x20download\x20'+_0x5d9b10),logger[_0x27b8e0(0x15f)](_0x19a33e));});else logger[_0x260953(0x15b)](_0x260953(0x1c8)+_0x5d9b10+_0x260953(0x1fe));}else logger[_0x260953(0x15b)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x5d9b10+_0x260953(0x234));}),app['post'](_0xe4ffaf(0x1f3),async(_0x4f5eaf,_0x33dc3d)=>{const _0x119a11=_0xe4ffaf,_0x34eecd=getClientsWithBotID(_0x119a11(0x199)),_0x3e5022=_0x4f5eaf[_0x119a11(0x14e)][_0x119a11(0x119)],_0x277b08=timelyDecrypt(_0x3e5022,![]),_0x297250=_0x34eecd[_0x119a11(0xec)](_0x1013c6=>_0x1013c6[_0x119a11(0x119)]==_0x277b08);if(_0x297250){const _0x19c268=normalizeIP(_0x4f5eaf[_0x119a11(0x235)][_0x119a11(0x16a)])[_0x119a11(0x1d4)],_0x3d5b4b=_0x4f5eaf[_0x119a11(0x14e)][_0x119a11(0x10a)];if(validateAccess(_0x3d5b4b,_0x277b08,_0x19c268)[_0x119a11(0x242)]){if(_0x4f5eaf[_0x119a11(0x291)]){const _0x4e46ca=_0x4f5eaf['files'][_0x119a11(0x28e)];await _0x4e46ca['mv'](temppath+_0x4e46ca[_0x119a11(0x27d)]),confirmRestore(temppath,_0x4e46ca['name']);}}else logger['full'](_0x119a11(0xf8));}else logger[_0x119a11(0x15b)](_0x119a11(0x13a));}),app[_0xe4ffaf(0x122)](express[_0xe4ffaf(0x135)](path[_0xe4ffaf(0x1f6)](__dirname,bbpath2,'build2'))),app['use'](express[_0xe4ffaf(0x135)](path['join'](__dirname,bbpath2,_0xe4ffaf(0x27a)))),app[_0xe4ffaf(0x1dc)]('/',function(_0x639ecb,_0x269e20){const _0x57bebc=_0xe4ffaf;_0x269e20[_0x57bebc(0x1e9)](path[_0x57bebc(0x1f6)](__dirname,bbpath2,'build2',_0x57bebc(0x1ec)));}),app['get'](_0xe4ffaf(0x143),function(_0x24f2b6,_0x4802da){const _0x210d2d=_0xe4ffaf;_0x4802da[_0x210d2d(0x1e9)](path[_0x210d2d(0x1f6)](__dirname,bbpath2,_0x210d2d(0x27a),_0x210d2d(0x1ec)));}),app[_0xe4ffaf(0x1dc)](_0xe4ffaf(0x1a4),(_0x15a603,_0x466134)=>{const _0x41c9d6=_0xe4ffaf;_0x466134['sendFile'](path[_0x41c9d6(0x1f6)](__dirname,bbpath2,_0x41c9d6(0x27a),'index.html'));}),app[_0xe4ffaf(0x1dc)]('/:bot/performance',(_0x23c252,_0x3ac5fc)=>{const _0x5d515b=_0xe4ffaf;_0x3ac5fc[_0x5d515b(0x1e9)](path['join'](__dirname,bbpath2,_0x5d515b(0x27a),_0x5d515b(0x1ec)));}),app[_0xe4ffaf(0x1dc)]('/:bot/coins',(_0x14d7ea,_0x3c4b08)=>{const _0x72567d=_0xe4ffaf;_0x3c4b08[_0x72567d(0x1e9)](path[_0x72567d(0x1f6)](__dirname,bbpath2,_0x72567d(0x27a),_0x72567d(0x1ec)));}),app[_0xe4ffaf(0x1dc)](_0xe4ffaf(0x270),(_0x3f27d7,_0x553af6)=>{const _0x3badee=_0xe4ffaf;_0x553af6[_0x3badee(0x1e9)](path[_0x3badee(0x1f6)](__dirname,bbpath2,'build','index.html'));}),app[_0xe4ffaf(0x1dc)](_0xe4ffaf(0x1bc),(_0x1dfe29,_0x2d09e9)=>{const _0x39dbad=_0xe4ffaf;_0x2d09e9['sendFile'](path['join'](__dirname,bbpath2,_0x39dbad(0x27a),_0x39dbad(0x1ec)));}),app[_0xe4ffaf(0x1dc)](_0xe4ffaf(0x197),(_0x5e96c5,_0x38a125)=>{const _0x4b3e06=_0xe4ffaf;_0x38a125['sendFile'](path[_0x4b3e06(0x1f6)](__dirname,bbpath2,_0x4b3e06(0x27a),_0x4b3e06(0x1ec)));});if(HOST)http[_0xe4ffaf(0x1eb)](PORT,HOST);else http[_0xe4ffaf(0x1eb)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x346202=_0xe4ffaf;logger['simple'](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger[_0x346202(0x15b)](_0x346202(0x14a)+PORT),logger[_0x346202(0x15f)](_0x346202(0x118));if(config[_0x346202(0x105)]!=0x0)for(const _0x353a7a of config){if(_0x353a7a[_0x346202(0x21f)]=='enabled'||_0x353a7a['status']==_0x346202(0x260))await logger[_0x346202(0x15b)]('starting\x20bot\x20|\x20Bot\x20'+_0x353a7a[_0x346202(0x215)]+_0x346202(0x20b)+_0x353a7a['botname']),startBot([_0x353a7a[_0x346202(0x215)],userID],{'cwd':bbpath},function(_0x21eb2d){const _0x46cef2=_0x346202;if(_0x21eb2d)logger[_0x46cef2(0x15b)](_0x21eb2d);});else(_0x353a7a[_0x346202(0x21f)]==_0x346202(0x196)||_0x353a7a[_0x346202(0x21f)]=='new-disabled')&&await logger[_0x346202(0x15b)](_0x346202(0x187)+_0x353a7a[_0x346202(0x215)]+_0x346202(0x20b)+_0x353a7a[_0x346202(0xf7)]);}else!newBot&&logger[_0x346202(0x15f)](_0x346202(0x1b4));if(newBot)addBot();logger[_0x346202(0x15f)](_0x346202(0x118)),logger['simple']('');}function startSocket(){const _0x5d916f=_0xe4ffaf;io['on'](_0x5d916f(0x1e5),_0x2b7841=>{const _0x43ba46=_0x5d916f;let _0x15dae6,_0x4a7637,_0x25558f,_0x469fa1,_0x25bf1f;const _0x2f719d=_0x2b7841['handshake']['headers']['referer'];_0x4a7637=_0x2f719d[_0x43ba46(0x124)](/bot[0-9]{3}/);if(_0x4a7637)_0x25558f=_0x4a7637[0x0]['match'](/[0-9]{3}/);if(_0x25558f)_0x15dae6=_0x25558f[0x0];else _0x15dae6='botmanager';const _0x297274=_0x2b7841['handshake'][_0x43ba46(0x293)]['encryptedUuid'];if(!_0x297274)_0x2b7841[_0x43ba46(0x132)]('status',{'publicKey':secure[_0x43ba46(0xfd)]});else{_0x469fa1=timelyDecrypt(_0x297274,![]);if(!_0x469fa1)_0x2b7841[_0x43ba46(0x132)](_0x43ba46(0x21f),{'publicKey':secure[_0x43ba46(0xfd)]});else{_0x25bf1f=normalizeIP(_0x2b7841[_0x43ba46(0x12d)][_0x43ba46(0x16a)])[_0x43ba46(0x1d4)];if(!devices[_0x469fa1])devices[_0x469fa1]={'uuid':_0x469fa1,'access':{'token':null}};devices[_0x469fa1]['ip']=_0x25bf1f;const _0x23e08c=addClient(_0x2b7841['id'],_0x469fa1,_0x15dae6);setAccess(_0x23e08c),emitMessages(),_0x2b7841['on']('login',_0x5e078e=>{const _0x3ba8ec=_0x43ba46,_0x27b3ba=timelyDecrypt(_0x5e078e[_0x3ba8ec(0x1a7)]);if(_0x27b3ba){_0x5e078e={'username':_0x5e078e[_0x3ba8ec(0x1c3)],'password':_0x27b3ba},devices[_0x469fa1][_0x3ba8ec(0x120)]=validateCredentials(_0x5e078e,_0x469fa1);if(devices[_0x469fa1][_0x3ba8ec(0x120)]['allow']==![]&&devices[_0x469fa1][_0x3ba8ec(0x120)][_0x3ba8ec(0x10b)]==_0x3ba8ec(0x150))_0x2b7841[_0x3ba8ec(0x132)](_0x3ba8ec(0x21f),{'access':devices[_0x469fa1][_0x3ba8ec(0x120)]}),loginAccess2FA(_0x469fa1,_0x25bf1f);else{if(devices[_0x469fa1][_0x3ba8ec(0x120)][_0x3ba8ec(0x242)]==![]&&devices[_0x469fa1][_0x3ba8ec(0x120)][_0x3ba8ec(0x10b)]==_0x3ba8ec(0x175))_0x2b7841[_0x3ba8ec(0x132)](_0x3ba8ec(0x21f),{'access':devices[_0x469fa1]['access']});else devices[_0x469fa1][_0x3ba8ec(0x120)][_0x3ba8ec(0x242)]&&devices[_0x469fa1][_0x3ba8ec(0x120)][_0x3ba8ec(0x10b)]==_0x3ba8ec(0x18a)&&(getClientsWithUuid(_0x469fa1)[_0x3ba8ec(0x24c)](_0x54559d=>{setAccess(_0x54559d);}),setTokenRefresh(_0x469fa1),setSessionTimeout('login',_0x469fa1));}}else logger[_0x3ba8ec(0x15b)](_0x3ba8ec(0x14f));}),_0x2b7841['on']('reset-password',()=>{resetPassword();}),_0x2b7841['on']('disconnect',_0x5e0820=>{removeClient(_0x2b7841['id']);}),_0x15dae6==_0x43ba46(0x199)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x50a8a0){const _0x51f5b1=_0xe4ffaf;if(_0x50a8a0!=_0x51f5b1(0x199)&&config['apiKey']!=''){if(pid[_0x50a8a0])pid[_0x50a8a0][_0x51f5b1(0x1ea)]({'function':_0x51f5b1(0x162),'args':null});}}function reloadBotManager(){const _0x2c23e3=_0xe4ffaf;getClientsWithBotID(_0x2c23e3(0x199))[_0x2c23e3(0x24c)](_0x5c236e=>{const _0x4ccc4b=_0x2c23e3;getSocket(_0x5c236e['id'])[_0x4ccc4b(0x132)](_0x4ccc4b(0x21f),{'access':{'allow':![],'reason':_0x4ccc4b(0x268),'token':null}});});}function getSocket(_0x227ade){const _0x13152c=_0xe4ffaf;return io[_0x13152c(0x106)][_0x13152c(0x106)][_0x13152c(0x1dc)](_0x227ade);}function setAccess(_0x41598d){const _0x1212b5=_0xe4ffaf,_0x276ad9=getSocket(_0x41598d['id']),_0x32f588=_0x41598d[_0x1212b5(0x119)],_0x1920b0=_0x41598d[_0x1212b5(0x22d)];devices[_0x32f588][_0x1212b5(0x120)]=validateAccess(devices[_0x32f588]['access']['token'],_0x32f588),_0x276ad9[_0x1212b5(0x1f6)](_0x32f588);if(devices[_0x32f588]['access']['allow']){_0x276ad9[_0x1212b5(0x1f6)](_0x1920b0);if(_0x1920b0=='botmanager')initializeSocketBotManager(_0x276ad9);else initializeSocketBot(_0x276ad9);initClient(_0x1920b0);}devices[_0x32f588][_0x1212b5(0x120)]['token']&&devices[_0x32f588][_0x1212b5(0x120)][_0x1212b5(0x10b)]==_0x1212b5(0x1bf)&&setSessionTimeout(_0x1212b5(0x285),_0x32f588),devices[_0x32f588][_0x1212b5(0x120)][_0x1212b5(0x109)]&&devices[_0x32f588][_0x1212b5(0x120)][_0x1212b5(0x10b)]==_0x1212b5(0x211)&&setSessionTimeout(_0x1212b5(0x1be),_0x32f588),_0x276ad9[_0x1212b5(0x132)](_0x1212b5(0x21f),{'status':_0x41598d[_0x1212b5(0x246)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x32f588][_0x1212b5(0x120)],'externalip':devices[_0x32f588]['ip'],'publicKey':secure[_0x1212b5(0xfd)],'userid':settings[_0x1212b5(0x1a0)],'validInstallation':validInstallation}),devices[_0x32f588][_0x1212b5(0x120)][_0x1212b5(0x242)]==![]&&devices[_0x32f588][_0x1212b5(0x120)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x32f588,devices[_0x32f588]['ip']);}function setSessionTimeout(_0xe8a833,_0x3bacc9){const _0x7671fb=_0xe4ffaf;let _0x4a8378;if(_0xe8a833==_0x7671fb(0x1be))_0x4a8378=loginExpiry*0x3c*0x3e8;else _0x4a8378=devices[_0x3bacc9][_0x7671fb(0x1fb)][_0x7671fb(0x188)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3bacc9]['telegramIpApproval'][_0x7671fb(0x1ba)]);if(devices[_0x3bacc9][_0x7671fb(0x198)])clearTimeout(devices[_0x3bacc9][_0x7671fb(0x198)]);devices[_0x3bacc9][_0x7671fb(0x198)]=setTimeout(()=>{const _0x3fa14c=_0x7671fb;if(devices[_0x3bacc9][_0x3fa14c(0x1d6)])clearTimeout(devices[_0x3bacc9][_0x3fa14c(0x1d6)]);removeSocketListeners(_0x3bacc9),addBlacklist(_0x3bacc9),devices[_0x3bacc9]['telegramIpApproval']=null,devices[_0x3bacc9][_0x3fa14c(0x15a)]=null,devices[_0x3bacc9][_0x3fa14c(0x120)][_0x3fa14c(0x109)]=null,devices[_0x3bacc9]['access']=validateAccess(devices[_0x3bacc9][_0x3fa14c(0x120)]['token'],_0x3bacc9),!(devices[_0x3bacc9][_0x3fa14c(0x120)][_0x3fa14c(0x242)]&&devices[_0x3bacc9][_0x3fa14c(0x120)][_0x3fa14c(0x10b)]==_0x3fa14c(0x27b))&&(_0xe8a833==_0x3fa14c(0x1be)?io['to'](_0x3bacc9)[_0x3fa14c(0x132)](_0x3fa14c(0x21f),{'access':{'allow':![],'reason':_0x3fa14c(0x15e),'token':null}}):io['to'](_0x3bacc9)['emit']('status',{'access':{'allow':![],'reason':_0x3fa14c(0x286),'token':null}})),devices[_0x3bacc9][_0x3fa14c(0x120)][_0x3fa14c(0x109)]=null;},_0x4a8378);}function setTokenRefresh(_0x55f94e){const _0x80b562=_0xe4ffaf;if(devices[_0x55f94e][_0x80b562(0x1d6)])clearTimeout(devices[_0x55f94e]['pidRefreshToken']);devices[_0x55f94e][_0x80b562(0x1d6)]=setTimeout(()=>{const _0x2cb50e=_0x80b562;getClientsWithUuid(_0x55f94e)[_0x2cb50e(0x105)]!=0x0?(devices[_0x55f94e][_0x2cb50e(0x120)]=refreshToken(_0x55f94e),io['to'](_0x55f94e)['emit'](_0x2cb50e(0x21f),{'status':_0x2cb50e(0xf4),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x55f94e][_0x2cb50e(0x120)],'externalip':devices[_0x55f94e]['ip'],'publicKey':secure[_0x2cb50e(0xfd)],'validInstallation':validInstallation}),setTokenRefresh(_0x55f94e)):clearTimeout(devices[_0x55f94e][_0x2cb50e(0x1d6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3ab3cc){const _0x365bb7=_0xe4ffaf,_0x5528c7=getClient(_0x3ab3cc['id'])['uuid'];_0x3ab3cc[_0x365bb7(0x132)](_0x365bb7(0x1ee),config),_0x3ab3cc[_0x365bb7(0x132)](_0x365bb7(0x11f),cleanSettings()),_0x3ab3cc['on'](_0x365bb7(0xfe),_0x570568=>{const _0x366c57=_0x365bb7;if(validateAccess(_0x570568,_0x5528c7)[_0x366c57(0x242)])addBot();else logger[_0x366c57(0x15b)](_0x366c57(0x147));}),_0x3ab3cc['on'](_0x365bb7(0x138),(_0x5be35c,_0x4af086)=>{const _0x2be2fe=_0x365bb7;if(validateAccess(_0x4af086,_0x5528c7)[_0x2be2fe(0x242)])toggleBot(_0x5be35c[_0x2be2fe(0x215)],_0x5be35c[_0x2be2fe(0x21f)],_0x5be35c[_0x2be2fe(0x1c9)]);else logger[_0x2be2fe(0x15b)](_0x2be2fe(0x1ad));}),_0x3ab3cc['on'](_0x365bb7(0x203),(_0x4bea87,_0xc67e8a)=>{const _0x42568a=_0x365bb7;if(validateAccess(_0xc67e8a,_0x5528c7)[_0x42568a(0x242)])toggleBotMode(_0x4bea87);else logger[_0x42568a(0x15b)](_0x42568a(0x1ad));}),_0x3ab3cc['on']('delete-bot',(_0x23ff59,_0x50e91b)=>{const _0x401079=_0x365bb7;if(validateAccess(_0x50e91b,_0x5528c7)['allow'])deleteBot(_0x23ff59);else logger[_0x401079(0x15b)](_0x401079(0x1fa));}),_0x3ab3cc['on'](_0x365bb7(0x149),(_0x299644,_0x55710e)=>{const _0x110ab7=_0x365bb7;if(validateAccess(_0x55710e,_0x5528c7)[_0x110ab7(0x242)])storeSettings(_0x299644,!![]);else logger[_0x110ab7(0x15b)](_0x110ab7(0x266));}),_0x3ab3cc['on'](_0x365bb7(0x123),_0x17c57d=>{const _0x1c9d70=_0x365bb7;if(validateAccess(_0x17c57d,_0x5528c7)[_0x1c9d70(0x242)])updateBB();else logger['full'](_0x1c9d70(0x15c));}),_0x3ab3cc['on'](_0x365bb7(0xe8),_0x37faac=>{const _0xd776dc=_0x365bb7;if(validateAccess(_0x37faac,_0x5528c7)[_0xd776dc(0x242)])getMessages();else logger[_0xd776dc(0x15b)](_0xd776dc(0x141));}),_0x3ab3cc['on'](_0x365bb7(0xf1),(_0x220588,_0x78acb)=>{const _0x3bdba7=_0x365bb7;if(validateAccess(_0x78acb,_0x5528c7)[_0x3bdba7(0x242)])confirmMessage(_0x220588);else logger[_0x3bdba7(0x15b)](_0x3bdba7(0x167));}),_0x3ab3cc['on'](_0x365bb7(0x102),_0x9f8136=>{const _0x1732a9=_0x365bb7;if(validateAccess(_0x9f8136,_0x5528c7)[_0x1732a9(0x242)]){if(devices[_0x5528c7]['pidRefreshToken'])clearTimeout(devices[_0x5528c7]['pidRefreshToken']);if(devices[_0x5528c7][_0x1732a9(0x198)])clearTimeout(devices[_0x5528c7][_0x1732a9(0x198)]);removeSocketListeners(getClient(_0x3ab3cc['id'])['uuid']),addBlacklist(_0x5528c7),devices[_0x5528c7]['telegramIpApproval']=null,devices[_0x5528c7]['telegram2FaApproval']=null,devices[_0x5528c7]['access'][_0x1732a9(0x109)]=null,io['to'](getClient(_0x3ab3cc['id'])[_0x1732a9(0x119)])[_0x1732a9(0x132)](_0x1732a9(0x21f),{'access':{'allow':![],'reason':_0x1732a9(0x1b0),'token':null}});}else logger[_0x1732a9(0x15b)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x2437d5){const _0x15bb89=_0xe4ffaf,_0xc5c73a=getClient(_0x2437d5['id'])[_0x15bb89(0x22d)],_0x35cfeb=getClient(_0x2437d5['id'])[_0x15bb89(0x119)];_0x2437d5['on'](_0x15bb89(0x100),(_0x5e05fa,_0x5d6dd0)=>{const _0x52a9ff=_0x15bb89;if(validateAccess(_0x5d6dd0,_0x35cfeb)[_0x52a9ff(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x52a9ff(0x1ea)]({'function':_0x52a9ff(0x1a1),'args':_0x5e05fa});}else logger[_0x52a9ff(0x15b)](_0x52a9ff(0x17d));}),_0x2437d5['on'](_0x15bb89(0x258),(_0x4b37aa,_0x34b41e)=>{const _0x4dee39=_0x15bb89;if(validateAccess(_0x34b41e,_0x35cfeb)[_0x4dee39(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x4dee39(0x1ea)]({'function':_0x4dee39(0x1fc),'args':_0x4b37aa});}else logger[_0x4dee39(0x15b)](_0x4dee39(0x12f));}),_0x2437d5['on'](_0x15bb89(0x281),(_0x11e06d,_0x4bc564)=>{const _0x3d02a2=_0x15bb89;if(validateAccess(_0x4bc564,_0x35cfeb)[_0x3d02a2(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x3d02a2(0x1ea)]({'function':'getPortfolio','args':_0x11e06d});}else logger[_0x3d02a2(0x15b)](_0x3d02a2(0x20a));}),_0x2437d5['on'](_0x15bb89(0x21c),(_0x4ca184,_0x44f0d1)=>{const _0x369ed4=_0x15bb89;if(validateAccess(_0x44f0d1,_0x35cfeb)[_0x369ed4(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x369ed4(0x1ea)]({'function':'storeConfiguration','args':_0x4ca184});}else logger[_0x369ed4(0x15b)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x2437d5['on'](_0x15bb89(0x13f),(_0x5b71c9,_0x54b787)=>{const _0x2eea8d=_0x15bb89;if(validateAccess(_0x54b787,_0x35cfeb)[_0x2eea8d(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a]['send']({'function':_0x2eea8d(0x24a),'args':_0x5b71c9});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x2437d5['on'](_0x15bb89(0x26a),_0x126814=>{const _0x34a638=_0x15bb89;if(validateAccess(_0x126814,_0x35cfeb)[_0x34a638(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x34a638(0x1ea)]({'function':_0x34a638(0x1db),'args':null});}else logger[_0x34a638(0x15b)](_0x34a638(0x1c0));}),_0x2437d5['on'](_0x15bb89(0x219),(_0xe2aae3,_0x2de259)=>{const _0x4305ca=_0x15bb89;if(validateAccess(_0x2de259,_0x35cfeb)[_0x4305ca(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x4305ca(0x1ea)]({'function':_0x4305ca(0x249),'args':_0xe2aae3});}else logger[_0x4305ca(0x15b)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x2437d5['on'](_0x15bb89(0x20e),_0x1fc40f=>{const _0x3c1966=_0x15bb89;if(validateAccess(_0x1fc40f,_0x35cfeb)[_0x3c1966(0x242)]){if(pid[_0xc5c73a])pid[_0xc5c73a][_0x3c1966(0x1ea)]({'function':_0x3c1966(0x183),'args':null});}else logger['full'](_0x3c1966(0x1f7));}),_0x2437d5['on'](_0x15bb89(0x123),_0x400f99=>{const _0x3973e8=_0x15bb89;if(validateAccess(_0x400f99,_0x35cfeb)['allow'])updateBB();else logger[_0x3973e8(0x15b)](_0x3973e8(0x15c));}),_0x2437d5['on']('get-messages',_0x49aca4=>{const _0x485893=_0x15bb89;if(validateAccess(_0x49aca4,_0x35cfeb)['allow'])getMessages();else logger[_0x485893(0x15b)](_0x485893(0x141));}),_0x2437d5['on'](_0x15bb89(0xf1),(_0x205288,_0x59f938)=>{const _0x24cc56=_0x15bb89;if(validateAccess(_0x59f938,_0x35cfeb)[_0x24cc56(0x242)])confirmMessage(_0x205288);else logger[_0x24cc56(0x15b)](_0x24cc56(0x167));}),_0x2437d5['on'](_0x15bb89(0x102),_0x2c1b3c=>{const _0x4ad211=_0x15bb89;if(validateAccess(_0x2c1b3c,_0x35cfeb)[_0x4ad211(0x242)]){if(devices[_0x35cfeb][_0x4ad211(0x1d6)])clearTimeout(devices[_0x35cfeb]['pidRefreshToken']);if(devices[_0x35cfeb][_0x4ad211(0x198)])clearTimeout(devices[_0x35cfeb][_0x4ad211(0x198)]);removeSocketListeners(getClient(_0x2437d5['id'])[_0x4ad211(0x119)]),addBlacklist(_0x35cfeb),devices[_0x35cfeb][_0x4ad211(0x1fb)]=null,devices[_0x35cfeb]['telegram2FaApproval']=null,devices[_0x35cfeb]['access'][_0x4ad211(0x109)]=null,io['to'](getClient(_0x2437d5['id'])[_0x4ad211(0x119)])[_0x4ad211(0x132)](_0x4ad211(0x21f),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x4ad211(0x133));});}function removeSocketListeners(_0x79d94c){const _0x2190ca=_0xe4ffaf;getClientsWithUuid(_0x79d94c)[_0x2190ca(0x24c)](_0x47c5c5=>{const _0x43e882=_0x2190ca;getSocket(_0x47c5c5['id'])[_0x43e882(0x1ef)]();});}function cleanSettings(){const _0x545085=_0xe4ffaf;let _0x2da0ef=settings;return settings['telegramToken']&&settings[_0x545085(0x16d)]!=''&&(_0x2da0ef={..._0x2da0ef,'telegramToken':_0x545085(0x272)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x2da0ef={..._0x2da0ef,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x545085(0x229)]==_0x545085(0x10d)||settings[_0x545085(0x16d)]&&settings['telegramToken']==_0x545085(0x10d))&&(_0x2da0ef={..._0x2da0ef,'restored':{'password':settings[_0x545085(0x229)]==_0x545085(0x10d),'telegram':settings[_0x545085(0x16d)]==_0x545085(0x10d)}}),_0x2da0ef;}function updateBB(){const _0x121129=_0xe4ffaf;installingUpdate=!![],config[_0x121129(0x24c)](_0x8a2906=>{const _0x3e087c=_0x121129;restartBot(_0x8a2906[_0x3e087c(0x215)]);}),process[_0x121129(0x1ea)]({'update':!![]},_0x59c3f4=>{});}function startBot(_0x3ada8c,_0x192898,_0x5e697b){const _0x3b642c=_0xe4ffaf;let _0xaeb5dc=![];const _0x2e4ee9=_0x3ada8c[0x0];_0x192898={..._0x192898,'stdio':['inherit',_0x3b642c(0x111),'inherit','ipc']},pid[_0x2e4ee9]=childProcess[_0x3b642c(0x279)](botfile,_0x3ada8c,_0x192898),pid[_0x2e4ee9]['on'](_0x3b642c(0x25d),_0x58dada=>{const _0x15811f=_0x3b642c;switch(Object[_0x15811f(0x26c)](_0x58dada)[0x0]){case _0x15811f(0xf7):updateBotName(_0x2e4ee9,_0x58dada[_0x15811f(0xf7)]);break;case'updatebotmanager':updateBotManager();break;case _0x15811f(0x21f):updateStatus(_0x2e4ee9,_0x58dada['status']);break;case _0x15811f(0x1c9):updateLive(_0x2e4ee9,_0x58dada[_0x15811f(0x1c9)]);break;case _0x15811f(0x236):updateLive(_0x2e4ee9,_0x58dada[_0x15811f(0x236)]),io['to'](_0x2e4ee9)[_0x15811f(0x132)](_0x15811f(0x21f),{'access':{'allow':![],'reason':_0x15811f(0x268),'token':null}});break;case _0x15811f(0x21a):_0x58dada[_0x15811f(0x21a)]=='restart'&&restartBot(_0x2e4ee9);_0x58dada['stop']==_0x15811f(0x17f)&&toggleBot(_0x2e4ee9,'disabled',_0x15811f(0x176));break;case _0x15811f(0xf6):sendTelegram(_0x2e4ee9,_0x58dada[_0x15811f(0xf6)]);break;case _0x15811f(0x186):sendTelegramMsg(_0x58dada[_0x15811f(0x186)]);break;case _0x15811f(0x10e):io['to'](_0x2e4ee9)[_0x15811f(0x132)](_0x58dada['function'],_0x58dada[_0x15811f(0x1f4)]);break;}}),pid[_0x2e4ee9]['on'](_0x3b642c(0x1a3),function(_0x2af004){if(_0xaeb5dc)return;_0xaeb5dc=!![],_0x5e697b(_0x2af004);}),pid[_0x2e4ee9]['on'](_0x3b642c(0x1c1),async function(_0x4c0cb1){const _0x5e2d90=_0x3b642c;if(installingUpdate)return;if(_0xaeb5dc)return;_0xaeb5dc=!![],_0x5e697b(null);const _0x372dc2=dbConfig['get']('bots')['find']({'botID':_0x2e4ee9})[_0x5e2d90(0x1d0)]();_0x372dc2&&(_0x372dc2[_0x5e2d90(0x21f)]==_0x5e2d90(0x24e)||_0x372dc2[_0x5e2d90(0x21f)]==_0x5e2d90(0x260))&&(await sleep(0x3e8),updateLive(_0x2e4ee9,_0x5e2d90(0x176)),logger[_0x5e2d90(0x15b)](_0x5e2d90(0x1f0)+_0x2e4ee9),startBot([_0x2e4ee9,userID],{'cwd':bbpath},function(_0x1ed278){const _0xdf8877=_0x5e2d90;if(_0x1ed278)logger[_0xdf8877(0x15b)](_0x1ed278);}));});}function stopBot(_0x5d63d7){const _0x3aaa78=_0xe4ffaf;getClientsWithBotID(_0x5d63d7)['forEach'](_0x133452=>{const _0x46db73=_0x4cd3;getSocket(_0x133452['id'])[_0x46db73(0x131)](!![]),removeClient(_0x133452['id']);}),pid[_0x5d63d7]&&(pid[_0x5d63d7][_0x3aaa78(0x17f)](),pid[_0x5d63d7]=null);}function restartBot(_0x12e592){const _0x2207c6=_0xe4ffaf;if(pid[_0x12e592])pid[_0x12e592][_0x2207c6(0x17f)]();}function addBot(){const _0x514a23=_0xe4ffaf;let _0x4dd9ae;for(let _0x35716c=0x1;_0x35716c<0x3e9;_0x35716c++){_0x4dd9ae=_0x35716c[_0x514a23(0x1e7)]()[_0x514a23(0x158)](0x3,'0');let _0x5678f6=config[_0x514a23(0xec)](_0x276a47=>_0x276a47[_0x514a23(0x215)]==_0x4dd9ae);if(!_0x5678f6)break;}if(_0x4dd9ae===_0x514a23(0x261)){logger[_0x514a23(0x15b)](_0x514a23(0x27e));return;}logger[_0x514a23(0x15b)](_0x514a23(0x17b)+_0x4dd9ae),dbConfig['get'](_0x514a23(0x1ee))[_0x514a23(0x19c)]({'botID':_0x4dd9ae,'botname':_0x514a23(0x142)+_0x4dd9ae,'status':_0x514a23(0x260),'live':''})[_0x514a23(0x263)](),startBot([_0x4dd9ae,userID],{'cwd':bbpath},function(_0xd960bc){const _0x20d6d8=_0x514a23;if(_0xd960bc)logger[_0x20d6d8(0x15b)](_0xd960bc);}),config=getConfiguration(),io['to'](_0x514a23(0x199))['emit'](_0x514a23(0x1ee),config);}function deleteBot(_0x5a1c72){const _0x2e63e1=_0xe4ffaf;getClientsWithBotID(_0x5a1c72)[_0x2e63e1(0x24c)](_0x34e485=>{const _0x475830=_0x2e63e1;getSocket(_0x34e485['id'])[_0x475830(0x131)](!![]),removeClient(_0x34e485['id']);}),dbConfig[_0x2e63e1(0x1dc)](_0x2e63e1(0x1ee))['remove']({'botID':_0x5a1c72})[_0x2e63e1(0x263)](),logger[_0x2e63e1(0x15b)](_0x2e63e1(0x22b)+_0x5a1c72),stopBot(_0x5a1c72);try{fs['unlinkSync'](path[_0x2e63e1(0x1f6)](configpath,'bot-'+_0x5a1c72+_0x2e63e1(0x1b1))),fs[_0x2e63e1(0x1f9)](path[_0x2e63e1(0x1f6)](configpath,'bot-'+_0x5a1c72+_0x2e63e1(0x1d5))),fs[_0x2e63e1(0x1f9)](path[_0x2e63e1(0x1f6)](configpath,_0x2e63e1(0x271)+_0x5a1c72+_0x2e63e1(0x207))),fs['unlinkSync'](path[_0x2e63e1(0x1f6)](configpath,'bot-'+_0x5a1c72+_0x2e63e1(0x239)));}catch(_0x4a7f09){if(_0x4a7f09)logger[_0x2e63e1(0x15b)](_0x2e63e1(0x17a),_0x4a7f09);}config=getConfiguration(),io['to']('botmanager')[_0x2e63e1(0x132)](_0x2e63e1(0x1ee),config);}function toggleBot(_0x273cc0,_0x22efb1,_0x540886){const _0x300db7=_0xe4ffaf;dbConfig[_0x300db7(0x1dc)](_0x300db7(0x1ee))[_0x300db7(0xec)]({'botID':_0x273cc0})[_0x300db7(0x26b)]({'status':_0x22efb1})[_0x300db7(0x26b)]({'live':_0x540886})[_0x300db7(0x263)]();if(_0x22efb1==_0x300db7(0x24e)||_0x22efb1==_0x300db7(0x260))logger[_0x300db7(0x15b)](_0x300db7(0x1d2)+_0x273cc0),startBot([_0x273cc0,userID],{'cwd':bbpath},function(_0x4a4902){const _0x4e8ddc=_0x300db7;if(_0x4a4902)logger[_0x4e8ddc(0x15b)](_0x4a4902);});else(_0x22efb1==_0x300db7(0x196)||_0x22efb1==_0x300db7(0x1b7))&&(logger[_0x300db7(0x15b)](_0x300db7(0x121)+_0x273cc0),stopBot(_0x273cc0));config=getConfiguration(),io['to'](_0x300db7(0x199))['emit'](_0x300db7(0x1ee),config);}function toggleStatus(_0x110170){const _0x4f589b=_0xe4ffaf;let _0x2e7d24=dbConfig[_0x4f589b(0x1dc)](_0x4f589b(0x1ee))[_0x4f589b(0xec)]({'botID':_0x110170})[_0x4f589b(0x1d0)](),_0x20ee17;if(_0x2e7d24['status']==='enabled')_0x20ee17=_0x4f589b(0x196);else{if(_0x2e7d24['status']==='new')_0x20ee17=_0x4f589b(0x1b7);else{if(_0x2e7d24['status']===_0x4f589b(0x1b7))_0x20ee17=_0x4f589b(0x260);else{if(_0x2e7d24[_0x4f589b(0x21f)]===_0x4f589b(0x196))_0x20ee17=_0x4f589b(0x24e);}}}return _0x20ee17;}function updateStatus(_0x4ae145,_0x12244e){const _0x19e509=_0xe4ffaf;dbConfig[_0x19e509(0x1dc)](_0x19e509(0x1ee))[_0x19e509(0xec)]({'botID':_0x4ae145})[_0x19e509(0x26b)]({'status':_0x12244e})['write'](),config=getConfiguration(),io['to'](_0x19e509(0x199))[_0x19e509(0x132)](_0x19e509(0x1ee),config);}function updateLive(_0x279fe6,_0x46e589){const _0x37370=_0xe4ffaf;dbConfig[_0x37370(0x1dc)](_0x37370(0x1ee))[_0x37370(0xec)]({'botID':_0x279fe6})[_0x37370(0x26b)]({'live':_0x46e589})[_0x37370(0x263)](),config=getConfiguration(),io['to'](_0x37370(0x199))[_0x37370(0x132)](_0x37370(0x1ee),config);}function updateBotName(_0x38adfa,_0x66fc2e){const _0x418e39=_0xe4ffaf;dbConfig[_0x418e39(0x1dc)](_0x418e39(0x1ee))[_0x418e39(0xec)]({'botID':_0x38adfa})[_0x418e39(0x26b)]({'botname':_0x66fc2e})[_0x418e39(0x263)](),config=getConfiguration(),io['to'](_0x418e39(0x199))[_0x418e39(0x132)]('bots',config);}function updateBotManager(){const _0x535f36=_0xe4ffaf;config=getConfiguration(),io['to'](_0x535f36(0x199))[_0x535f36(0x132)](_0x535f36(0x1ee),config);}function toggleBotMode(_0x4820e8){const _0x17cf51=_0xe4ffaf;if(pid[_0x4820e8])pid[_0x4820e8]['send']({'function':_0x17cf51(0x259),'args':null});else{const _0xf2dc65=configpath+_0x17cf51(0x271)+_0x4820e8+'-config.json',_0x17a0bd=fs[_0x17cf51(0x1e2)](_0xf2dc65),_0x3686a7=JSON[_0x17cf51(0x170)](_0x17a0bd),_0x261a02=_0x3686a7[_0x17cf51(0x22d)][0x0]['headless'];_0x3686a7[_0x17cf51(0x22d)][0x0][_0x17cf51(0x1b9)]=!_0x261a02;const _0x788f81=JSON['stringify'](_0x3686a7,null,0x2);fs['writeFileSync'](_0xf2dc65,_0x788f81),config=getConfiguration(),io['to'](_0x17cf51(0x199))[_0x17cf51(0x132)](_0x17cf51(0x1ee),config);}}function telegramError(_0x988ca4){const _0x3dedb6=_0xe4ffaf;logger[_0x3dedb6(0x15f)](getTimeStamp()+_0x3dedb6(0x125));}function validateTelegram(_0x4a30bc){const _0xf3b065=_0xe4ffaf;if(_0x4a30bc['from'][_0xf3b065(0x1c3)]!=settings[_0xf3b065(0x19e)]&&'@'+_0x4a30bc[_0xf3b065(0x137)][_0xf3b065(0x1c3)]!=settings[_0xf3b065(0x19e)])return tgBot[_0xf3b065(0x108)](_0x4a30bc['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0xf3b065(0x113)})[_0xf3b065(0x20d)](_0x264a16=>{telegramError(_0x264a16);}),![];return!![];}async function initTelegram(){const _0x204b65=_0xe4ffaf;if(tgBot)tgBot[_0x204b65(0xf2)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x204b65(0x16d)],{'polling':!![]});let _0x5c58cc='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5c58cc+='\x0a',_0x5c58cc+=_0x204b65(0x1c5),_0x5c58cc+=_0x204b65(0x166),_0x5c58cc+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5c58cc+=_0x204b65(0x19a),_0x5c58cc+='/on\x20-\x20start\x20bot(s)\x0a',_0x5c58cc+=_0x204b65(0x25f),_0x5c58cc+=_0x204b65(0x1a9),_0x5c58cc+=_0x204b65(0x218),_0x5c58cc+=_0x204b65(0x221),_0x5c58cc+=_0x204b65(0x244),_0x5c58cc+=_0x204b65(0x11a),_0x5c58cc+=_0x204b65(0x214);let _0x527fb1=_0x204b65(0x115);_0x527fb1+='\x0a',_0x527fb1+=_0x5c58cc,tgBot[_0x204b65(0x191)](/\/start/,_0x51563b=>{const _0x1d5fa9=_0x204b65;if(!validateTelegram(_0x51563b))return;if(settings[_0x1d5fa9(0x134)]!=_0x51563b[_0x1d5fa9(0x23b)]['id'])updateSetting(_0x1d5fa9(0x134),_0x51563b[_0x1d5fa9(0x23b)]['id']);updateSetting(_0x1d5fa9(0x1f8),!![]),tgBot[_0x1d5fa9(0x108)](_0x51563b[_0x1d5fa9(0x23b)]['id'],_0x527fb1)['catch'](_0x313e3b=>{telegramError(_0x313e3b);});}),tgBot[_0x204b65(0x191)](/\/enable/,_0x1673be=>{const _0x3f0e07=_0x204b65;if(!validateTelegram(_0x1673be))return;if(settings['telegramChatId']!=_0x1673be[_0x3f0e07(0x23b)]['id'])updateSetting(_0x3f0e07(0x134),_0x1673be[_0x3f0e07(0x23b)]['id']);updateSetting(_0x3f0e07(0x1f8),!![]),tgBot[_0x3f0e07(0x108)](_0x1673be[_0x3f0e07(0x23b)]['id'],_0x3f0e07(0x231))['catch'](_0x3b827c=>{telegramError(_0x3b827c);});}),tgBot[_0x204b65(0x191)](/\/config/,async _0x34fa97=>{const _0x35b2ec=_0x204b65;if(!validateTelegram(_0x34fa97))return;tgBot[_0x35b2ec(0x190)]('callback_query'),tgBot[_0x35b2ec(0x108)](_0x34fa97[_0x35b2ec(0x23b)]['id'],_0x35b2ec(0x223),{'reply_markup':{'inline_keyboard':[[{'text':_0x35b2ec(0x1ab),'callback_data':_0x35b2ec(0x192)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x35b2ec(0xf9),'callback_data':_0x35b2ec(0x243)}]]}})[_0x35b2ec(0x20d)](_0x25a29c=>{telegramError(_0x25a29c);}),tgBot['on'](_0x35b2ec(0x287),async _0x126b7c=>{const _0x3bc152=_0x35b2ec,_0x227e96=_0x126b7c['data'],_0x33adb4=_0x126b7c[_0x3bc152(0x25d)];tgBot[_0x3bc152(0x262)](_0x126b7c['id'])[_0x3bc152(0x155)](async()=>{const _0x136404=_0x3bc152;_0x227e96==_0x136404(0x192)&&(updateSetting(_0x136404(0x226),'orders'),updateSetting(_0x136404(0x1f8),!![]),await tgBot[_0x136404(0x108)](_0x33adb4[_0x136404(0x23b)]['id'],_0x136404(0x265))[_0x136404(0x20d)](_0x3021e4=>{telegramError(_0x3021e4);}));_0x227e96==_0x136404(0x264)&&(updateSetting(_0x136404(0x226),_0x136404(0x264)),updateSetting(_0x136404(0x1f8),!![]),await tgBot[_0x136404(0x108)](_0x33adb4[_0x136404(0x23b)]['id'],_0x136404(0x140))[_0x136404(0x20d)](_0x325f78=>{telegramError(_0x325f78);}));_0x227e96==_0x136404(0x243)&&(updateSetting(_0x136404(0x226),_0x136404(0x243)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x33adb4[_0x136404(0x23b)]['id'],_0x136404(0x267))[_0x136404(0x20d)](_0x19a1f4=>{telegramError(_0x19a1f4);}));if(!settings['telegramChatId'])tgBot[_0x136404(0x108)](_0x33adb4['chat']['id'],_0x136404(0x280))[_0x136404(0x20d)](_0x38c538=>{telegramError(_0x38c538);});}),tgBot[_0x3bc152(0x190)]('callback_query');});}),tgBot[_0x204b65(0x191)](/\/status/,_0x5c0a12=>{const _0x4c9c77=_0x204b65;if(!validateTelegram(_0x5c0a12))return;const _0x1a3b6c=getBotsWithMode();let _0x3e8a4a=_0x4c9c77(0x25a);config['forEach'](_0x334b9a=>{const _0xc864df=_0x4c9c77,_0x3be66f=_0x1a3b6c[_0xc864df(0xec)](_0x3f99ae=>_0x3f99ae[_0xc864df(0x215)]==_0x334b9a[_0xc864df(0x215)])['mode'];_0x3e8a4a+=_0xc864df(0x142)+_0x334b9a['botID']+':\x20'+_0x334b9a['status']+_0xc864df(0x20b)+_0x3be66f+'\x20|\x20'+_0x334b9a[_0xc864df(0x1c9)]+'\x0a';}),_0x3e8a4a+='\x0a',_0x3e8a4a+=_0x4c9c77(0x163),_0x3e8a4a+=!settings[_0x4c9c77(0x1f8)]?'Notifications\x20disabled\x0a':_0x4c9c77(0x1b8),_0x3e8a4a+=settings[_0x4c9c77(0x1f8)]?settings[_0x4c9c77(0x226)]=='all'?_0x4c9c77(0x21d):_0x4c9c77(0x12c)+settings[_0x4c9c77(0x226)]+_0x4c9c77(0x189):'',tgBot[_0x4c9c77(0x108)](_0x5c0a12['chat']['id'],_0x3e8a4a,{'parse_mode':'HTML'})[_0x4c9c77(0x20d)](_0x226461=>{telegramError(_0x226461);});}),tgBot[_0x204b65(0x191)](/\/restart/,_0x13e8e4=>{const _0x301d7b=_0x204b65;if(!validateTelegram(_0x13e8e4))return;tgBot[_0x301d7b(0x190)](_0x301d7b(0x287));const _0x54f39c=getEnabledBots();if(_0x54f39c['length']==0x0)tgBot[_0x301d7b(0x108)](_0x13e8e4[_0x301d7b(0x23b)]['id'],_0x301d7b(0x1e3))['catch'](_0x48a754=>{telegramError(_0x48a754);});else{if(_0x54f39c[_0x301d7b(0x105)]>0x1)_0x54f39c['push']({'botID':_0x301d7b(0x243)});let _0x1c407e=[],_0x5cac87=[];const _0x577a6c=_0x54f39c[_0x301d7b(0x105)]%0x4==0x0||_0x54f39c[_0x301d7b(0x105)]%0x4==0x3||_0x54f39c['length']%0x3==0x1?0x4:0x3;let _0x3c39bb=0x0;_0x54f39c[_0x301d7b(0x24c)]((_0x2b2212,_0x231c7d)=>{const _0x20e74f=_0x301d7b;if(_0x231c7d%_0x577a6c==0x0)_0x5cac87=[];_0x5cac87['push']({'text':_0x2b2212[_0x20e74f(0x215)]=='all'?_0x20e74f(0x23a):_0x20e74f(0x142)+_0x2b2212[_0x20e74f(0x215)],'callback_data':_0x2b2212[_0x20e74f(0x215)]}),_0x231c7d%_0x577a6c==0x0&&(_0x1c407e[_0x3c39bb]=_0x5cac87,_0x3c39bb++);}),tgBot[_0x301d7b(0x108)](_0x13e8e4['chat']['id'],_0x301d7b(0x182),{'reply_markup':{'inline_keyboard':_0x1c407e}})['catch'](_0x57de12=>{telegramError(_0x57de12);}),tgBot['on'](_0x301d7b(0x287),async _0x3db466=>{const _0x1df530=_0x301d7b,_0x37a0a3=_0x3db466[_0x1df530(0xee)],_0x10e0bb=_0x3db466['message'];tgBot[_0x1df530(0x262)](_0x3db466['id'])['then'](async()=>{const _0x1aec35=_0x1df530;_0x37a0a3==_0x1aec35(0x243)?config[_0x1aec35(0x24c)](_0xd1c6c3=>{const _0x480657=_0x1aec35;restartBot(_0xd1c6c3[_0x480657(0x215)]);}):restartBot(_0x37a0a3);}),tgBot[_0x1df530(0x190)](_0x1df530(0x287));});}}),tgBot[_0x204b65(0x191)](/\/on/,_0x2076e8=>{const _0x12e1f6=_0x204b65;if(!validateTelegram(_0x2076e8))return;tgBot['removeListener']('callback_query');const _0x178c13=getDisabledBots();if(_0x178c13[_0x12e1f6(0x105)]==0x0)tgBot[_0x12e1f6(0x108)](_0x2076e8[_0x12e1f6(0x23b)]['id'],_0x12e1f6(0xf5))[_0x12e1f6(0x20d)](_0x14b62a=>{telegramError(_0x14b62a);});else{if(_0x178c13['length']>0x1)_0x178c13['push']({'botID':_0x12e1f6(0x243)});let _0x1713ee=[],_0x25c761=[];const _0x1602c7=_0x178c13['length']%0x4==0x0||_0x178c13[_0x12e1f6(0x105)]%0x4==0x3||_0x178c13['length']%0x3==0x1?0x4:0x3;let _0x4a454f=0x0;_0x178c13['forEach']((_0x10aca9,_0x47bf08)=>{const _0x5dffff=_0x12e1f6;if(_0x47bf08%_0x1602c7==0x0)_0x25c761=[];_0x25c761[_0x5dffff(0x19c)]({'text':_0x10aca9[_0x5dffff(0x215)]==_0x5dffff(0x243)?'All\x20bots':'Bot\x20'+_0x10aca9[_0x5dffff(0x215)],'callback_data':_0x10aca9[_0x5dffff(0x215)]}),_0x47bf08%_0x1602c7==0x0&&(_0x1713ee[_0x4a454f]=_0x25c761,_0x4a454f++);}),tgBot['sendMessage'](_0x2076e8[_0x12e1f6(0x23b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x1713ee}})[_0x12e1f6(0x20d)](_0x5cb20c=>{telegramError(_0x5cb20c);}),tgBot['on']('callback_query',async _0x370049=>{const _0x20dbbf=_0x12e1f6,_0x45bab9=_0x370049[_0x20dbbf(0xee)],_0x309d8f=_0x370049[_0x20dbbf(0x25d)];tgBot[_0x20dbbf(0x262)](_0x370049['id'])[_0x20dbbf(0x155)](async()=>{const _0x4895ff=_0x20dbbf;_0x45bab9==_0x4895ff(0x243)?(tgBot[_0x4895ff(0x108)](_0x309d8f[_0x4895ff(0x23b)]['id'],_0x4895ff(0xed))[_0x4895ff(0x20d)](_0x1fe6ff=>{telegramError(_0x1fe6ff);}),_0x178c13[_0x4895ff(0x24c)](_0x21f91b=>{const _0x50fc94=_0x4895ff;if(_0x21f91b[_0x50fc94(0x215)]!=_0x50fc94(0x243))toggleBot(_0x21f91b[_0x50fc94(0x215)],toggleStatus(_0x21f91b[_0x50fc94(0x215)]),_0x50fc94(0x176));})):(tgBot['sendMessage'](_0x309d8f[_0x4895ff(0x23b)]['id'],_0x4895ff(0x1cb)+_0x45bab9)['catch'](_0x1d0db1=>{telegramError(_0x1d0db1);}),toggleBot(_0x45bab9,toggleStatus(_0x45bab9),_0x4895ff(0x176)));}),tgBot['removeListener'](_0x20dbbf(0x287));});}}),tgBot['onText'](/\/off/,_0x3a9c8a=>{const _0x338b3f=_0x204b65;if(!validateTelegram(_0x3a9c8a))return;tgBot[_0x338b3f(0x190)](_0x338b3f(0x287));const _0x45379b=getEnabledBots();if(_0x45379b[_0x338b3f(0x105)]==0x0)tgBot['sendMessage'](_0x3a9c8a[_0x338b3f(0x23b)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x338b3f(0x20d)](_0x1450ce=>{telegramError(_0x1450ce);});else{if(_0x45379b[_0x338b3f(0x105)]>0x1)_0x45379b[_0x338b3f(0x19c)]({'botID':_0x338b3f(0x243)});let _0x40f4af=[],_0x4a26ff=[];const _0x177bc9=_0x45379b['length']%0x4==0x0||_0x45379b['length']%0x4==0x3||_0x45379b[_0x338b3f(0x105)]%0x3==0x1?0x4:0x3;let _0xd28114=0x0;_0x45379b['forEach']((_0xaf8a35,_0x2288f5)=>{const _0x4dd8de=_0x338b3f;if(_0x2288f5%_0x177bc9==0x0)_0x4a26ff=[];_0x4a26ff[_0x4dd8de(0x19c)]({'text':_0xaf8a35[_0x4dd8de(0x215)]==_0x4dd8de(0x243)?_0x4dd8de(0x23a):_0x4dd8de(0x142)+_0xaf8a35[_0x4dd8de(0x215)],'callback_data':_0xaf8a35[_0x4dd8de(0x215)]}),_0x2288f5%_0x177bc9==0x0&&(_0x40f4af[_0xd28114]=_0x4a26ff,_0xd28114++);}),tgBot[_0x338b3f(0x108)](_0x3a9c8a['chat']['id'],_0x338b3f(0x25b),{'reply_markup':{'inline_keyboard':_0x40f4af}})[_0x338b3f(0x20d)](_0x2a8606=>{telegramError(_0x2a8606);}),tgBot['on'](_0x338b3f(0x287),async _0x1d6bb7=>{const _0x3bcd62=_0x338b3f,_0x5aa4c5=_0x1d6bb7['data'],_0x216c90=_0x1d6bb7['message'];tgBot['answerCallbackQuery'](_0x1d6bb7['id'])[_0x3bcd62(0x155)](async()=>{const _0x1f5e60=_0x3bcd62;_0x5aa4c5==_0x1f5e60(0x243)?(tgBot[_0x1f5e60(0x108)](_0x216c90[_0x1f5e60(0x23b)]['id'],_0x1f5e60(0x269))['catch'](_0x46350c=>{telegramError(_0x46350c);}),_0x45379b['forEach'](_0x307c43=>{const _0x17396d=_0x1f5e60;if(_0x307c43['botID']!=_0x17396d(0x243))toggleBot(_0x307c43[_0x17396d(0x215)],toggleStatus(_0x307c43[_0x17396d(0x215)]),_0x17396d(0x176));})):(tgBot['sendMessage'](_0x216c90[_0x1f5e60(0x23b)]['id'],_0x1f5e60(0x28d)+_0x5aa4c5)[_0x1f5e60(0x20d)](_0x492cc8=>{telegramError(_0x492cc8);}),toggleBot(_0x5aa4c5,toggleStatus(_0x5aa4c5),_0x1f5e60(0x176)));}),tgBot['removeListener'](_0x3bcd62(0x287));});}}),tgBot[_0x204b65(0x191)](/\/portfolio/,_0x4cd4ff=>{const _0x4f60c4=_0x204b65;if(!validateTelegram(_0x4cd4ff))return;tgBot['removeListener']('callback_query');const _0x173bf8=getEnabledBots();if(_0x173bf8['length']==0x0)tgBot[_0x4f60c4(0x108)](_0x4cd4ff[_0x4f60c4(0x23b)]['id'],_0x4f60c4(0x1e3))[_0x4f60c4(0x20d)](_0xbf1758=>{telegramError(_0xbf1758);});else{if(_0x173bf8[_0x4f60c4(0x105)]>0x1){let _0x3465de=[],_0x5896d4=[];const _0x35e267=_0x173bf8[_0x4f60c4(0x105)]%0x4==0x0||_0x173bf8[_0x4f60c4(0x105)]%0x4==0x3||_0x173bf8[_0x4f60c4(0x105)]%0x3==0x1?0x4:0x3;let _0x3185f3=0x0;_0x173bf8[_0x4f60c4(0x24c)]((_0x26a213,_0x3247aa)=>{const _0x50f841=_0x4f60c4;if(_0x3247aa%_0x35e267==0x0)_0x5896d4=[];_0x5896d4[_0x50f841(0x19c)]({'text':_0x50f841(0x142)+_0x26a213['botID'],'callback_data':_0x26a213[_0x50f841(0x215)]}),_0x3247aa%_0x35e267==0x0&&(_0x3465de[_0x3185f3]=_0x5896d4,_0x3185f3++);}),tgBot[_0x4f60c4(0x108)](_0x4cd4ff[_0x4f60c4(0x23b)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x3465de}})['catch'](_0x2c22a3=>{telegramError(_0x2c22a3);}),tgBot['on'](_0x4f60c4(0x287),async _0xbcffe0=>{const _0x603519=_0x4f60c4,_0x1709e0=_0xbcffe0[_0x603519(0xee)],_0x5c3032=_0xbcffe0[_0x603519(0x25d)];tgBot[_0x603519(0x262)](_0xbcffe0['id'])['then'](async()=>{const _0x532986=_0x603519;if(pid[_0x1709e0])pid[_0x1709e0][_0x532986(0x1ea)]({'function':_0x532986(0x241),'args':null});}),tgBot[_0x603519(0x190)](_0x603519(0x287));});}else{const _0x1df3ea=_0x173bf8[0x0][_0x4f60c4(0x215)];if(pid[_0x1df3ea])pid[_0x1df3ea][_0x4f60c4(0x1ea)]({'function':_0x4f60c4(0x241),'args':null});}}}),tgBot['onText'](/\/update/,async _0x391eae=>{const _0x9eea6a=_0x204b65;if(!validateTelegram(_0x391eae))return;tgBot[_0x9eea6a(0x190)](_0x9eea6a(0x287)),await getMessages();if(!updateAvailable)tgBot[_0x9eea6a(0x108)](_0x391eae[_0x9eea6a(0x23b)]['id'],_0x9eea6a(0x194))[_0x9eea6a(0x20d)](_0x2a3735=>{telegramError(_0x2a3735);});else!validInstallation?tgBot['sendMessage'](_0x391eae[_0x9eea6a(0x23b)]['id'],_0x9eea6a(0x23d))['catch'](_0x53d729=>{telegramError(_0x53d729);}):(tgBot[_0x9eea6a(0x108)](_0x391eae[_0x9eea6a(0x23b)]['id'],_0x9eea6a(0x1bd),{'reply_markup':{'inline_keyboard':[[{'text':_0x9eea6a(0xf0),'callback_data':_0x9eea6a(0x28c)},{'text':'No','callback_data':'no'}]]}})[_0x9eea6a(0x20d)](_0x45a1b3=>{telegramError(_0x45a1b3);}),tgBot['on'](_0x9eea6a(0x287),async _0x29be32=>{const _0x13d991=_0x9eea6a,_0x51d491=_0x29be32[_0x13d991(0xee)],_0x1158b8=_0x29be32[_0x13d991(0x25d)];tgBot[_0x13d991(0x262)](_0x29be32['id'])[_0x13d991(0x155)](async()=>{const _0x184ea0=_0x13d991;_0x51d491==_0x184ea0(0x28c)&&(await tgBot['sendMessage'](_0x1158b8[_0x184ea0(0x23b)]['id'],_0x184ea0(0x11c))[_0x184ea0(0x20d)](_0x158d67=>{telegramError(_0x158d67);}),updateBB());_0x51d491=='no'&&await tgBot[_0x184ea0(0x108)](_0x1158b8[_0x184ea0(0x23b)]['id'],_0x184ea0(0x16e))[_0x184ea0(0x20d)](_0x287019=>{telegramError(_0x287019);});if(!settings['telegramChatId'])tgBot[_0x184ea0(0x108)](_0x1158b8[_0x184ea0(0x23b)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x184ea0(0x20d)](_0x257d23=>{telegramError(_0x257d23);});}),tgBot[_0x13d991(0x190)](_0x13d991(0x287));}));}),tgBot[_0x204b65(0x191)](/\/toggle/,_0x6de189=>{const _0x3e67b9=_0x204b65;if(!validateTelegram(_0x6de189))return;tgBot['removeListener']('callback_query');const _0x38179e=getBotsWithMode();if(_0x38179e[_0x3e67b9(0x105)]==0x0)tgBot[_0x3e67b9(0x108)](_0x6de189[_0x3e67b9(0x23b)]['id'],_0x3e67b9(0x1e3))[_0x3e67b9(0x20d)](_0x1ba10a=>{telegramError(_0x1ba10a);});else{let _0x3555ef=[],_0x3726c0=[];const _0x4ce00f=0x2;let _0x1e554f=0x0;_0x38179e[_0x3e67b9(0x24c)]((_0x38f52b,_0x462944)=>{const _0x2c384c=_0x3e67b9;if(_0x462944%_0x4ce00f==0x0)_0x3726c0=[];_0x3726c0[_0x2c384c(0x19c)]({'text':_0x2c384c(0x142)+_0x38f52b[_0x2c384c(0x215)]+'\x20('+_0x38f52b['mode']+')','callback_data':_0x38f52b[_0x2c384c(0x215)]}),_0x462944%_0x4ce00f==0x0&&(_0x3555ef[_0x1e554f]=_0x3726c0,_0x1e554f++);}),tgBot['sendMessage'](_0x6de189['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x3555ef}})[_0x3e67b9(0x20d)](_0x92c603=>{telegramError(_0x92c603);}),tgBot['on'](_0x3e67b9(0x287),async _0x54dfa6=>{const _0x5db8b0=_0x3e67b9,_0x3c2292=_0x54dfa6['data'],_0x51e768=_0x54dfa6[_0x5db8b0(0x25d)];tgBot['answerCallbackQuery'](_0x54dfa6['id'])['then'](async()=>{const _0x831c16=_0x5db8b0,_0x3325a8=_0x38179e['find'](_0x4d42c4=>_0x4d42c4[_0x831c16(0x215)]==_0x3c2292),_0xef03a7=_0x3325a8[_0x831c16(0x139)]=='auto'?_0x831c16(0x26f):_0x831c16(0x205);tgBot[_0x831c16(0x108)](_0x51e768['chat']['id'],_0x831c16(0x1b2)+_0x3c2292+_0x831c16(0x206)+_0xef03a7+_0x831c16(0x16b))[_0x831c16(0x20d)](_0x279328=>{telegramError(_0x279328);}),toggleBotMode(_0x3c2292);}),tgBot[_0x5db8b0(0x190)](_0x5db8b0(0x287));});}}),tgBot[_0x204b65(0x191)](/\/names/,_0x4d9fce=>{const _0x5909ab=_0x204b65;if(!validateTelegram(_0x4d9fce))return;let _0x20d7b6='';config[_0x5909ab(0x24c)](_0x420376=>{const _0x4813bc=_0x5909ab;_0x20d7b6+=_0x4813bc(0x142)+_0x420376[_0x4813bc(0x215)]+':\x20'+_0x420376[_0x4813bc(0xf7)]+'\x0a';}),tgBot[_0x5909ab(0x108)](_0x4d9fce[_0x5909ab(0x23b)]['id'],_0x20d7b6,{'parse_mode':_0x5909ab(0x113)})[_0x5909ab(0x20d)](_0x35cb2f=>{telegramError(_0x35cb2f);});}),tgBot[_0x204b65(0x191)](/\/disable/,_0x937fd2=>{const _0x3dd152=_0x204b65;if(!validateTelegram(_0x937fd2))return;tgBot[_0x3dd152(0x108)](_0x937fd2[_0x3dd152(0x23b)]['id'],'Notifications\x20disabled')[_0x3dd152(0x20d)](_0x3dcf90=>{telegramError(_0x3dcf90);}),updateSetting(_0x3dd152(0x1f8),![]);}),tgBot[_0x204b65(0x191)](/\/help/,_0x675441=>{const _0x1fd59e=_0x204b65;if(!validateTelegram(_0x675441))return;tgBot['sendMessage'](_0x675441[_0x1fd59e(0x23b)]['id'],_0x5c58cc)[_0x1fd59e(0x20d)](_0x4b058d=>{telegramError(_0x4b058d);});}),tgBot['on'](_0x204b65(0x1b6),_0x4ac294=>{const _0x569f5a=_0x204b65;_0x4ac294[_0x569f5a(0x1e7)]()[_0x569f5a(0x28b)]('404\x20Not\x20Found')&&(logger[_0x569f5a(0x15b)]('Invalid\x20Telegram\x20token'),tgBot[_0x569f5a(0xf2)](),tgBot=null,io['to'](_0x569f5a(0x199))[_0x569f5a(0x132)](_0x569f5a(0x204),_0x569f5a(0x13c)));}),process['once']('SIGINT',()=>{const _0x3bc6ed=_0x204b65;if(tgBot)tgBot[_0x3bc6ed(0xf2)]();process[_0x3bc6ed(0x1c1)](0x1);}),process['once']('SIGTERM',()=>{const _0x359aa5=_0x204b65;if(tgBot)tgBot[_0x359aa5(0xf2)]();process[_0x359aa5(0x1c1)](0x1);});}}function disableTelegram(){const _0x490838=_0xe4ffaf;tgBot&&(tgBot[_0x490838(0xf2)](),tgBot=null);}function sendTelegram(_0x2beed5,_0xf6a98f){const _0x44762a=_0xe4ffaf;if(settings['telegramEnabled']){if(settings[_0x44762a(0x226)]==_0x44762a(0x243)||(_0xf6a98f[_0x44762a(0x16c)]==_0x44762a(0x1a3)||_0xf6a98f[_0x44762a(0x16c)]=='warning'||_0xf6a98f[_0x44762a(0x16c)]==_0x44762a(0x169))&&settings[_0x44762a(0x226)]==_0x44762a(0x264)||_0xf6a98f[_0x44762a(0x16c)]==_0x44762a(0x200)&&settings[_0x44762a(0x226)]=='orders'){if(tgBot&&settings[_0x44762a(0x134)]){if(_0xf6a98f[_0x44762a(0x24d)])tgBot[_0x44762a(0x108)](settings[_0x44762a(0x134)],_0xf6a98f[_0x44762a(0xf7)]+'\x20>\x20'+_0xf6a98f['event'])['catch'](_0x148b00=>{telegramError(_0x148b00);});else tgBot['sendMessage'](settings[_0x44762a(0x134)],'Bot\x20'+_0x2beed5+_0x44762a(0x273)+_0xf6a98f[_0x44762a(0x1cd)])[_0x44762a(0x20d)](_0x433b1d=>{telegramError(_0x433b1d);});}}}}async function sendTelegramMsg(_0x123186,_0x33a2ac='HTML'){const _0x51d8c9=_0xe4ffaf;return settings[_0x51d8c9(0x1f8)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x51d8c9(0x108)](settings['telegramChatId'],_0x123186,{'parse_mode':_0x33a2ac})['catch'](_0x3467fd=>{telegramError(_0x3467fd);}),!![]):![];}function getDeviceWithIp(_0x2910a1){const _0x2849b0=_0xe4ffaf;return devices[_0x2849b0(0xec)](_0x3839eb=>_0x3839eb['ip']===_0x2910a1);}function temporaryAccess2FA(_0x60c509,_0x5af603){const _0xb0d4c=_0xe4ffaf;let _0xdeee92=new Date(),_0x517115=![];if(lastIpApproval){if(_0xdeee92-lastIpApproval<0x1388)_0x517115=!![];}lastIpApproval=new Date();if(_0x517115)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0xb0d4c(0x287)),tgBot[_0xb0d4c(0x108)](settings[_0xb0d4c(0x134)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5af603)[_0xb0d4c(0x237)]+'</b>\x20?',{'parse_mode':_0xb0d4c(0x113),'reply_markup':{'inline_keyboard':[[{'text':_0xb0d4c(0x153),'callback_data':'5'},{'text':_0xb0d4c(0x254),'callback_data':'15'},{'text':_0xb0d4c(0x224),'callback_data':'30'},{'text':_0xb0d4c(0x145),'callback_data':_0xb0d4c(0x145)}]]}})[_0xb0d4c(0x20d)](_0x3fe02a=>{telegramError(_0x3fe02a);}),tgBot['on'](_0xb0d4c(0x287),async _0x7eb17e=>{const _0x125d5a=_0xb0d4c,_0x2092ae=_0x7eb17e[_0x125d5a(0xee)],_0xf62a92=_0x7eb17e['message'];tgBot[_0x125d5a(0x262)](_0x7eb17e['id'])['then'](async()=>{const _0x525eab=_0x125d5a;devices[_0x60c509][_0x525eab(0x1fb)]={'clientip':_0x5af603,'timestamp':new Date()[_0x525eab(0x1a2)](),'expiry':_0x2092ae},_0x2092ae!=_0x525eab(0x145)?(await tgBot[_0x525eab(0x108)](_0xf62a92[_0x525eab(0x23b)]['id'],_0x525eab(0x284)+_0x2092ae+_0x525eab(0x23e),{'parse_mode':_0x525eab(0x113)})[_0x525eab(0x20d)](_0x50ec56=>{telegramError(_0x50ec56);}),io['to'](_0x60c509)[_0x525eab(0x132)]('status',{'access':{'allow':![],'reason':_0x525eab(0x268),'token':null}})):(await tgBot[_0x525eab(0x108)](_0xf62a92[_0x525eab(0x23b)]['id'],'Temporary\x20access\x20rejected')[_0x525eab(0x20d)](_0x3e782f=>{telegramError(_0x3e782f);}),io['to'](_0x60c509)[_0x525eab(0x132)]('status',{'access':{'allow':![],'reason':_0x525eab(0x252),'token':null}}));}),tgBot['removeListener'](_0x125d5a(0x287));}));}function loginAccess2FA(_0x1459a7,_0x1d1ba2){const _0x375dc5=_0xe4ffaf;tgBot&&settings[_0x375dc5(0x134)]&&(tgBot['removeListener'](_0x375dc5(0x287)),tgBot[_0x375dc5(0x108)](settings['telegramChatId'],_0x375dc5(0x103)+normalizeIP(_0x1d1ba2)[_0x375dc5(0x237)]+_0x375dc5(0x1c4),{'parse_mode':_0x375dc5(0x113),'reply_markup':{'inline_keyboard':[[{'text':_0x375dc5(0x127),'callback_data':loginExpiry},{'text':_0x375dc5(0x145),'callback_data':'reject'}]]}})[_0x375dc5(0x20d)](_0x422d0a=>{telegramError(_0x422d0a);}),tgBot['on'](_0x375dc5(0x287),async _0x3ef199=>{const _0x34e2ff=_0x375dc5,_0x46a20c=_0x3ef199['data'],_0x1b3673=_0x3ef199[_0x34e2ff(0x25d)];tgBot['answerCallbackQuery'](_0x3ef199['id'])['then'](async()=>{const _0x279c5e=_0x34e2ff;devices[_0x1459a7][_0x279c5e(0x15a)]={'clientip':_0x1d1ba2,'timestamp':new Date()[_0x279c5e(0x1a2)](),'expiry':_0x46a20c},_0x46a20c!=_0x279c5e(0x145)?(await tgBot[_0x279c5e(0x108)](_0x1b3673[_0x279c5e(0x23b)]['id'],_0x279c5e(0x283),{'parse_mode':_0x279c5e(0x113)})[_0x279c5e(0x20d)](_0x3f31ed=>{telegramError(_0x3f31ed);}),io['to'](_0x1459a7)['emit']('status',{'access':{'allow':![],'reason':_0x279c5e(0x268),'token':null}})):(await tgBot[_0x279c5e(0x108)](_0x1b3673['chat']['id'],_0x279c5e(0x1ce))[_0x279c5e(0x20d)](_0x14c5ff=>{telegramError(_0x14c5ff);}),io['to'](_0x1459a7)['emit'](_0x279c5e(0x21f),{'access':{'allow':![],'reason':_0x279c5e(0x1f1),'token':null}}));}),tgBot[_0x34e2ff(0x190)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x41592a=_0xe4ffaf;return dbConfig[_0x41592a(0x1dc)](_0x41592a(0x1ee))['sortBy'](_0x41592a(0x215))[_0x41592a(0x13d)]({'status':_0x41592a(0x24e)})[_0x41592a(0x1d0)]()||[];}function getDisabledBots(){const _0x2d9b5f=_0xe4ffaf;return dbConfig[_0x2d9b5f(0x1dc)](_0x2d9b5f(0x1ee))[_0x2d9b5f(0x180)](_0x2d9b5f(0x215))['filter']({'status':_0x2d9b5f(0x196)})[_0x2d9b5f(0x1d0)]()||[];}function getBotAttributes(_0x14aac2){const _0x2e1ac0=_0xe4ffaf;let _0x3df6c4={};const _0x54c896=configpath+_0x2e1ac0(0x271)+_0x14aac2+_0x2e1ac0(0x1b1),_0x2b03fd=fs[_0x2e1ac0(0x174)](_0x54c896);if(_0x2b03fd){const _0x5cc09e=fs['readFileSync'](_0x54c896);try{const _0x40a31b=JSON[_0x2e1ac0(0x170)](_0x5cc09e),_0x3127c3=_0x40a31b?_0x40a31b['bot'][0x0][_0x2e1ac0(0x1b9)]:![];_0x3df6c4[_0x2e1ac0(0x139)]=_0x3127c3?_0x2e1ac0(0x205):_0x2e1ac0(0x26f),_0x3df6c4[_0x2e1ac0(0xf7)]=_0x40a31b?_0x40a31b[_0x2e1ac0(0x22d)][0x0][_0x2e1ac0(0xf7)]:_0x2e1ac0(0x142)+_0x14aac2;}catch(_0x4c5ac7){_0x3df6c4[_0x2e1ac0(0x139)]='manual',_0x3df6c4[_0x2e1ac0(0xf7)]='Bot\x20'+_0x14aac2;}}else _0x3df6c4[_0x2e1ac0(0x139)]=_0x2e1ac0(0x26f),_0x3df6c4[_0x2e1ac0(0xf7)]=_0x2e1ac0(0x142)+_0x14aac2;return _0x3df6c4;}function getBotsWithMode(){const _0x4f0e81=_0xe4ffaf,_0x33c996=dbConfig[_0x4f0e81(0x1dc)](_0x4f0e81(0x1ee))[_0x4f0e81(0x180)](_0x4f0e81(0x215))[_0x4f0e81(0x1d0)]()||[];return _0x33c996[_0x4f0e81(0x24c)](_0x139e85=>{const _0x1bd1c8=_0x4f0e81;let _0x182bab=getBotAttributes(_0x139e85[_0x1bd1c8(0x215)]);_0x139e85['mode']=_0x182bab[_0x1bd1c8(0x139)];}),_0x33c996;}async function initUser(){const _0x2be8e0=_0xe4ffaf;if(!settings[_0x2be8e0(0x1a0)]){const _0x3e66e7=uuidRandom();mixpanel[_0x2be8e0(0x20f)](_0x3e66e7),updateSetting('userid',_0x3e66e7);}}async function initSecure(){const _0x2dfa20=_0xe4ffaf;let _0x361bb7=getSecure();if(!_0x361bb7[_0x2dfa20(0x193)]('secret')){let _0x28e8c1=await generateKeys();_0x361bb7[_0x2dfa20(0xfd)]=_0x28e8c1[_0x2dfa20(0xfd)],_0x361bb7[_0x2dfa20(0xef)]=_0x28e8c1[_0x2dfa20(0xef)],_0x361bb7[_0x2dfa20(0x25e)]=crypto[_0x2dfa20(0xfb)](0x20)[_0x2dfa20(0x1e7)](_0x2dfa20(0x129));;storeSecure(_0x361bb7);}}function getSettings(){const _0xaaf9b1=_0xe4ffaf;return dbSettings['get'](_0xaaf9b1(0x11f))[_0xaaf9b1(0x1d0)]()||{};}function getSecure(){const _0xe6f59d=_0xe4ffaf;return dbSecure[_0xe6f59d(0x1dc)](_0xe6f59d(0x233))[_0xe6f59d(0x1d0)]()||{};}function getBlacklist(){const _0x2a22fa=_0xe4ffaf;return dbSecure[_0x2a22fa(0x1dc)](_0x2a22fa(0x10f))['value']()||[];}function broadcastToBots(_0x278d20,_0x5bc6db){const _0x187df5=_0xe4ffaf;config[_0x187df5(0x24c)](_0x5ca77c=>{const _0x150ece=_0x187df5;if(_0x5ca77c['status']==_0x150ece(0x24e)&&_0x5ca77c['live']=='running'){if(pid[_0x5ca77c[_0x150ece(0x215)]])pid[_0x5ca77c[_0x150ece(0x215)]][_0x150ece(0x1ea)]({[_0x278d20]:_0x5bc6db});}});}function storeSettings(_0x272732,_0x57ad0e=![]){const _0x2286e8=_0xe4ffaf;_0x272732={...settings,..._0x272732};if(_0x57ad0e&&_0x272732['bbPassword']!=_0x2286e8(0x272)&&_0x272732['bbPassword']!=_0x2286e8(0x10d)&&_0x272732[_0x2286e8(0x229)]!=''){const _0xdaffbb=crypt[_0x2286e8(0x282)](secure[_0x2286e8(0xef)],_0x272732[_0x2286e8(0x229)])[_0x2286e8(0x25d)]['split']('@')[0x0],_0x4cbbe2=bcrypt[_0x2286e8(0x11e)](_0xdaffbb,saltRounds);_0x272732={..._0x272732,'bbPassword':_0x4cbbe2};}if(_0x57ad0e&&_0x272732[_0x2286e8(0x16d)]!=_0x2286e8(0x272)&&_0x272732[_0x2286e8(0x16d)]!=_0x2286e8(0x10d)&&_0x272732[_0x2286e8(0x16d)]!=''){const _0x53222d=crypt[_0x2286e8(0x282)](secure[_0x2286e8(0xef)],_0x272732['telegramToken'])[_0x2286e8(0x25d)][_0x2286e8(0x18c)]('@')[0x0];_0x272732={..._0x272732,'telegramToken':_0x53222d};}const _0x3df3ed=_0x272732['telegramToken']!=_0x2286e8(0x272)&&_0x272732[_0x2286e8(0x16d)]!=settings['telegramToken']||_0x272732[_0x2286e8(0x19e)]!=settings[_0x2286e8(0x19e)],_0x29b875=_0x272732['telegramToken']==''||_0x272732['telegramUsername']=='';if(_0x3df3ed)_0x272732[_0x2286e8(0x226)]='all';for(const [_0x360c83,_0x1a9185]of Object[_0x2286e8(0x164)](_0x272732)){if(_0x360c83==_0x2286e8(0x16d)&&_0x1a9185==_0x2286e8(0x272)){_0x272732[_0x2286e8(0x16d)]=settings['telegramToken'];continue;};if(_0x360c83==_0x2286e8(0x229)&&_0x1a9185==_0x2286e8(0x272)){_0x272732['bbPassword']=settings[_0x2286e8(0x229)];continue;};dbSettings[_0x2286e8(0x21e)](_0x2286e8(0x256)+_0x360c83,_0x1a9185)[_0x2286e8(0x263)]();}settings=_0x272732,io['to'](_0x2286e8(0x199))[_0x2286e8(0x132)](_0x2286e8(0x11f),cleanSettings()),broadcastToBots('timeshift',settings[_0x2286e8(0x1e6)]);if(_0x3df3ed&&!_0x29b875)initTelegram();if(_0x3df3ed&&_0x29b875)disableTelegram();getAllClients()['forEach'](_0x4952ef=>{const _0x168fde=_0x2286e8;getSocket(_0x4952ef['id'])['emit']('status',{'access':{'allow':![],'reason':_0x168fde(0x268),'token':null}});});}function updateSetting(_0x46bdb3,_0xf97643){const _0x3ae48a=_0xe4ffaf;dbSettings['set'](_0x3ae48a(0x256)+_0x46bdb3,_0xf97643)[_0x3ae48a(0x263)](),settings=getSettings(),io['to'](_0x3ae48a(0x199))['emit'](_0x3ae48a(0x11f),cleanSettings());}function storeSecure(_0x593b06){const _0x49934f=_0xe4ffaf;dbSecure['get'](_0x49934f(0x233))[_0x49934f(0x19c)](_0x593b06)[_0x49934f(0x263)](),secure=_0x593b06;}function addBlacklist(_0x443d2a){const _0x42f6dc=_0xe4ffaf;cleanBlacklist();let _0x490eeb;devices[_0x443d2a][_0x42f6dc(0x1fb)]?_0x490eeb=Math[_0x42f6dc(0x1ed)](devices[_0x443d2a][_0x42f6dc(0x1fb)][_0x42f6dc(0x188)],loginExpiry):_0x490eeb=loginExpiry,dbSecure[_0x42f6dc(0x1dc)](_0x42f6dc(0x10f))[_0x42f6dc(0x19c)]({'expiry':new Date()[_0x42f6dc(0x1a2)]()+_0x490eeb*0x3c*0x3e8,'token':devices[_0x443d2a][_0x42f6dc(0x120)]['token']})[_0x42f6dc(0x263)](),blacklist=dbSecure[_0x42f6dc(0x1dc)](_0x42f6dc(0x10f))[_0x42f6dc(0x1d0)]();}function cleanBlacklist(){const _0xc8f8ce=_0xe4ffaf;let _0x2b24fd=dbSecure[_0xc8f8ce(0x1dc)](_0xc8f8ce(0x10f))['cloneDeep']()[_0xc8f8ce(0x1d0)](),_0x4aa67c=new Date()[_0xc8f8ce(0x1a2)]();_0x2b24fd[_0xc8f8ce(0x24c)](_0x8bcf57=>{const _0x329dff=_0xc8f8ce;_0x8bcf57['expiry']<_0x4aa67c&&dbSecure['get'](_0x329dff(0x10f))['remove']({'expiry':_0x8bcf57[_0x329dff(0x188)]})[_0x329dff(0x263)]();});}function initStates(){const _0x68e2dc=_0xe4ffaf;let _0x23fe01=getConfiguration();_0x23fe01[_0x68e2dc(0x24c)](_0xe55317=>{const _0x3c79dd=_0x68e2dc;_0xe55317[_0x3c79dd(0x1c9)]='stopped';}),storeConfiguration(_0x23fe01);}function onKeys(){const _0x306a77=new RSA();return new Promise(_0x54c08a=>{const _0x163cc1=_0x4cd3;_0x306a77['generateKeyPairAsync']()[_0x163cc1(0x155)](_0x17a1da=>{_0x54c08a(_0x17a1da);});});}function _0x236d(){const _0x1704bb=['<b>Balance\x20Bot\x20Status:</b>\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','getUTCHours','message','secret','/off\x20-\x20stop\x20bot(s)\x0a','new','1000','answerCallbackQuery','write','alerts','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20update\x20settings','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','reload','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','get-starting-balances','assign','keys','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','bbUsername','manual','/:bot/history','bot-','************','\x20>\x20','date-fns','login\x20required','bbvNew','toIPv4Address','logs/','fork','build','login\x20not\x20required','::ffff:127.0.0.1','name','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','http','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','get-portfolio','decrypt','Login\x20accepted','Access\x20enabled\x20for\x20','2FA','temporary\x20access\x20timeout','callback_query','/output-000.log','compareSync','Invalid\x20username\x20or\x20IP\x20address','includes','yes','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','backupfile','uuid-random','login\x20token\x20valid','files','verify','auth','bb/','log','ipaddr.js','get-messages','stringify','test','lowdb','find','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','data','privateKey','Yes','confirm-message','stopPolling','sort','connected','All\x20bots\x20running\x20right\x20now','telegram','botname','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','All','.zip','randomBytes','isIPv4MappedAddress','publicKey','add-bot','number','get-logs','temporaryAccessAllowed','logout','Allow\x20login\x20from\x20IP\x20address\x20<b>','NTBA_FIX_319','length','sockets','createServer','sendMessage','token','tkn','reason','bb-secure.json','***','function','blacklist','isValid','inherit','/download/:type','HTML','getMinutes','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Bot\x20Mgr\x20>\x20','4hyzIvx','-----------------------------------------------------------------------------------','uuid','/update\x20-\x20update\x20Balance\x20Bot\x0a','whitelist','Starting\x20Balance\x20Bot\x20update','User\x20has\x20been\x20validated','hashSync','settings','access','disabled\x20Bot\x20','use','update-bb','match',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','clientip','accept','constructor','hex','api-eu.mixpanel.com','zip/','Notifications\x20types:\x20','conn','whitelistEnabled','Unauthorized\x20attempt\x20to\x20delete\x20alerts','No\x20authentication\x20token','disconnect','emit','Unauthorized\x20attempt\x20to\x20log\x20out','telegramChatId','static','lastmsgtelegram','from','update-bot','mode','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','_data','Invalid\x20Telegram\x20token','filter','child_process','store-headless','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20get\x20messages','Bot\x20','/:bot','120yiBxKc','reject','size','Unauthorized\x20attempt\x20to\x20add\x20bot','3000','store-settings','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','jsonwebtoken','crypto','messages','headers','Unauthorized\x20login\x20attempt\x20(timeout)','2FA\x20login\x20required','hybrid-crypto-js','statSync','5\x20min','search','then','getDate','path','padStart','loginRequired','telegram2FaApproval','full','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','writeFileSync','access\x20timeout','simple','host','exp','initclient','<b>Telegram\x20Bot\x20Status:</b>\x0a','entries','exec','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20confirm\x20message','latestversion','success','remoteAddress','\x20mode','type','telegramToken','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','DEFLATE','parse','apply','uncaughtException','init','existsSync','invalid\x20credentials','stopped','getHours','defaults','(((.+)+)+)+$','error\x20while\x20deleting\x20config\x20files:\x20','starting\x20new\x20bot\x20|\x20Bot\x20','track','Unauthorized\x20attempt\x20to\x20get\x20logs','config/','kill','sortBy','2FA\x20required','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','cancelLoading','copyFileSync','createWriteStream','telegrammsg','idling\x20bot\x20\x20\x20|\x20Bot\x20','expiry','\x20only\x0a','login\x20token\x20generated','Invalid\x20IP\x20address','split','$1_$2_$3','388366jHAOlZ','randomFillSync','removeListener','onText','orders','hasOwnProperty','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Password\x20has\x20been\x20reset\x20to:\x20','disabled','/:bot/support','pidExpireLogin','botmanager','/restart\x20-\x20restart\x20bot(s)\x0a','map','push','express-fileupload','telegramUsername','*$1*','userid','emitHistory','getTime','error','/:bot/portfolio','getSeconds','4316472SSKWxA','password','yargs/yargs','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','binary','Orders','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','f2aRequired','format','logged\x20out','-config.json','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','292270sGFtLk','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','axios','polling_error','new-disabled','Notifications\x20enabled\x0a','headless','timestamp','download','/:bot/configuration','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','login','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','exit','Invalid\x20authentication\x20token\x20(2)','username','</b>\x20?','/enable\x20-\x20enable\x20notifications\x0a','output-000.log','::1','Unauthorized\x20attempt\x20to\x20download\x20','live','84BVnAkk','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','bot.js','event','Login\x20rejected','Token\x20blacklisted','value','argv','enabled\x20Bot\x20','readdirSync','store','-events.json','pidRefreshToken','Crypt','user','logs','RSA','getStartingBalances','get','11EAUirP','54XbRGif','apiKey','Restoring\x20bot(s)\x20from\x20backup\x20-\x20Bot\x20Manager\x20will\x20restart\x20once\x20finished','991144jnZjhl','readFileSync','No\x20bots\x20running\x20right\x20now','sign','connection','timeshift','toString','112686LxxTQj','sendFile','send','listen','index.html','max','bots','removeAllListeners','restarting\x20Bot\x20','2FA\x20login\x20rejected',',\x20must\x20be\x20a\x204\x20digit\x20number','/upload-backup','args','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)!','join','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','telegramEnabled','unlinkSync','Unauthorized\x20attempt\x20to\x20delete\x20bot','telegramIpApproval','deleteHistoryAlerts','lastmsgemitted','\x20(1)','rmSync','order','bb-config.json','ipv6','toggle-bot-mode','notification','auto','\x20to\x20','-performance.json','startsWith','output-002.log','Unauthorized\x20attempt\x20to\x20get\x20portfolio','\x20|\x20','Server','catch','cancel-loading','alias','RSA-OAEP','2FA\x20login\x20token\x20generated','mixpanel','slice','/help\x20-\x20show\x20available\x20commands\x0a','botID','kind','getFullYear','/names\x20-\x20show\x20bot\x20names\x0a','place-order','stop','min','store-configuration','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','set','status','title','/status\x20-\x20show\x20bot(s)\x20status\x0a','apiSecret','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','30\x20min','isDirectory','telegramEvents','any','mkdirSync','bbPassword','getMonth','deleted\x20Bot\x20','toIPv4MappedAddress','bot','bbvReceive','bb-settings.json','add','Notifications\x20enabled','generate','secure','\x20(2)','socket','started','show','file','-results.json','All\x20bots','chat','Restore\x20process\x20aborted','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','\x20minutes','util','6b67f3d61ee94b8f5c80b4affef4c4d9','sendPortfolioTelegram','allow','all','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','graphql-request','server','146538otsuZW','replace','placeOrder','storeHeadless','127.0.0.1','forEach','showname','enabled','0.0.0','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','node-zip','temporary\x20access\x20rejected','clients','15\x20min','69455fcyXTF','settings.','Password\x20reset\x20rejected','delete-alerts','toggleBotMode'];_0x236d=function(){return _0x1704bb;};return _0x236d();}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x51dd0f=_0xe4ffaf;let _0x424c00=getSettings(),_0x127ecf=![];!_0x424c00[_0x51dd0f(0x193)]('lastmsgtelegram')&&(_0x424c00[_0x51dd0f(0x136)]=0x0,_0x127ecf=!![]);!_0x424c00['hasOwnProperty']('lastmsgemitted')&&(_0x424c00[_0x51dd0f(0x1fd)]=0x0,_0x127ecf=!![]);!_0x424c00[_0x51dd0f(0x193)](_0x51dd0f(0x168))&&(_0x424c00['latestversion']=_0x51dd0f(0x24f),_0x127ecf=!![]);if(_0x127ecf)storeSettings(_0x424c00);}function storeConfiguration(_0x1b1d34){const _0x7a59c9=_0xe4ffaf;dbConfig[_0x7a59c9(0x1dc)](_0x7a59c9(0x1ee))['remove']()[_0x7a59c9(0x263)](),_0x1b1d34[_0x7a59c9(0x24c)](_0x1a0153=>{const _0xbcffea=_0x7a59c9;delete _0x1a0153[_0xbcffea(0x139)];}),dbConfig[_0x7a59c9(0x1dc)](_0x7a59c9(0x1ee))['push'](..._0x1b1d34)[_0x7a59c9(0x263)](),config=_0x1b1d34;}function resetPassword(){const _0x2c6941=_0xe4ffaf;tgBot&&settings[_0x2c6941(0x134)]&&(tgBot[_0x2c6941(0x190)](_0x2c6941(0x287)),tgBot[_0x2c6941(0x108)](settings[_0x2c6941(0x134)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2c6941(0x113),'reply_markup':{'inline_keyboard':[[{'text':_0x2c6941(0x28c),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x2c6941(0x20d)](_0x14cfee=>{telegramError(_0x14cfee);}),tgBot['on'](_0x2c6941(0x287),async _0x372ece=>{const _0x48696d=_0x2c6941,_0x29f619=_0x372ece['data'],_0x5941d6=_0x372ece[_0x48696d(0x25d)];tgBot[_0x48696d(0x262)](_0x372ece['id'])['then'](async()=>{const _0x1016fe=_0x48696d;if(_0x29f619!='no'){const _0x899164=0xf,_0x518bd0=_0x1016fe(0x250),_0x23cadc=Array[_0x1016fe(0x137)](crypto[_0x1016fe(0x18f)](new Uint32Array(_0x899164)))[_0x1016fe(0x19b)](_0x5145d6=>_0x518bd0[_0x5145d6%_0x518bd0[_0x1016fe(0x105)]])['join'](''),_0x559e18=bcrypt[_0x1016fe(0x11e)](_0x23cadc,saltRounds);storeSettings({'bbPassword':_0x559e18}),await tgBot[_0x1016fe(0x108)](_0x5941d6['chat']['id'],_0x1016fe(0x195)+_0x23cadc,{'parse_mode':_0x1016fe(0x113)})[_0x1016fe(0x20d)](_0x1dc9c3=>{telegramError(_0x1dc9c3);});}else await tgBot[_0x1016fe(0x108)](_0x5941d6[_0x1016fe(0x23b)]['id'],_0x1016fe(0x257))[_0x1016fe(0x20d)](_0x11f437=>{telegramError(_0x11f437);});}),tgBot[_0x48696d(0x190)](_0x48696d(0x287));}));}async function confirmRestore(_0x35d777,_0x599ec8){const _0x1e0618=_0xe4ffaf;tgBot&&settings['telegramChatId']&&(tgBot[_0x1e0618(0x190)](_0x1e0618(0x287)),await tgBot['sendMessage'](settings[_0x1e0618(0x134)],_0x1e0618(0x1f5),{'parse_mode':_0x1e0618(0x113),'reply_markup':{'inline_keyboard':[[{'text':_0x1e0618(0x28c),'callback_data':_0x1e0618(0x28c)},{'text':'no','callback_data':'no'}]]}})[_0x1e0618(0x20d)](_0x1e6ff6=>{telegramError(_0x1e6ff6);}),tgBot['on']('callback_query',async _0x4d804f=>{const _0x300492=_0x1e0618,_0x452a19=_0x4d804f['data'],_0x7bbe86=_0x4d804f['message'];tgBot[_0x300492(0x262)](_0x4d804f['id'])[_0x300492(0x155)](async()=>{const _0x8f0d9a=_0x300492;_0x452a19!='no'?(await tgBot['sendMessage'](_0x7bbe86[_0x8f0d9a(0x23b)]['id'],_0x8f0d9a(0x1e0),{'parse_mode':_0x8f0d9a(0x113)})[_0x8f0d9a(0x20d)](_0x31cba4=>{telegramError(_0x31cba4);}),unzipFile(_0x35d777,_0x599ec8)):await tgBot[_0x8f0d9a(0x108)](_0x7bbe86[_0x8f0d9a(0x23b)]['id'],_0x8f0d9a(0x23c))[_0x8f0d9a(0x20d)](_0x529679=>{telegramError(_0x529679);});}),tgBot['removeListener'](_0x300492(0x287));}));}function getServerTime(){const _0x229e1a=_0xe4ffaf,_0x273e8c=new Date();return _0x273e8c['getFullYear']()+'/'+(_0x273e8c['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x273e8c[_0x229e1a(0x156)]()[_0x229e1a(0x1e7)]()[_0x229e1a(0x158)](0x2,'0')+'\x20'+_0x273e8c['getHours']()['toString']()[_0x229e1a(0x158)](0x2,'0')+':'+_0x273e8c[_0x229e1a(0x114)]()[_0x229e1a(0x1e7)]()[_0x229e1a(0x158)](0x2,'0')+':'+_0x273e8c[_0x229e1a(0x1a5)]()[_0x229e1a(0x1e7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x426e94=_0xe4ffaf,_0x18b579=shiftedTime();return _0x18b579[_0x426e94(0x217)]()+'/'+(_0x18b579[_0x426e94(0x22a)]()+0x1)[_0x426e94(0x1e7)]()[_0x426e94(0x158)](0x2,'0')+'/'+_0x18b579[_0x426e94(0x156)]()[_0x426e94(0x1e7)]()[_0x426e94(0x158)](0x2,'0')+'\x20'+_0x18b579[_0x426e94(0x177)]()[_0x426e94(0x1e7)]()[_0x426e94(0x158)](0x2,'0')+':'+_0x18b579[_0x426e94(0x114)]()[_0x426e94(0x1e7)]()[_0x426e94(0x158)](0x2,'0')+':'+_0x18b579['getSeconds']()[_0x426e94(0x1e7)]()[_0x426e94(0x158)](0x2,'0');}function shiftedTime(){const _0x1b74c5=_0xe4ffaf,_0x3356ad=new Date();let _0x3b009a=_0x3356ad;if(settings[_0x1b74c5(0x1e6)]&&settings['timeshift']!==0x0)_0x3b009a=fns[_0x1b74c5(0x230)](_0x3356ad,{'hours':settings['timeshift']});return _0x3b009a;}function startScheduler(){const _0x5ce269=_0xe4ffaf,_0x1f9528=new Date()[_0x5ce269(0x25c)](),_0x238d9f=shiftedTime()[_0x5ce269(0x177)]();_0x238d9f==0x4&&backupConfigFiles();_0x238d9f==0x0&&rotateLogFiles();_0x1f9528%0x6==0x0&&triggerAnalytics();_0x1f9528%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x152bc2=_0xe4ffaf;fs[_0x152bc2(0x1d3)](configpath,{'withFileTypes':!![]})[_0x152bc2(0x24c)](_0x565d35=>{const _0x5e51ce=_0x152bc2;if(!_0x565d35['isDirectory']())fs[_0x5e51ce(0x184)](configpath+_0x565d35['name'],configbackuppath+_0x565d35[_0x5e51ce(0x27d)]);});}function rotateLogFiles(){const _0xd6d14d=_0xe4ffaf,_0xe4c375=fs[_0xd6d14d(0x152)](logspath+_0xd6d14d(0x1c6)),_0x5522c9=_0xe4c375[_0xd6d14d(0x146)]/0x400;if(_0x5522c9>0x32){let _0x1ae109=fs[_0xd6d14d(0x1d3)](logspath,{'withFileTypes':!![]});_0x1ae109[_0xd6d14d(0xf3)]((_0x2eb177,_0x344207)=>_0x2eb177[_0xd6d14d(0x27d)]<_0x344207['name']?0x1:_0x344207['name']<_0x2eb177[_0xd6d14d(0x27d)]?-0x1:0x0),_0x1ae109[_0xd6d14d(0x24c)](_0x4c3399=>{const _0x5268f6=_0xd6d14d;if(_0x4c3399[_0x5268f6(0x27d)]=='output-002.log')fs[_0x5268f6(0x184)](logspath+_0x4c3399[_0x5268f6(0x27d)],logspath+'output-003.log');if(_0x4c3399[_0x5268f6(0x27d)]=='output-001.log')fs[_0x5268f6(0x184)](logspath+_0x4c3399[_0x5268f6(0x27d)],logspath+_0x5268f6(0x209));_0x4c3399[_0x5268f6(0x27d)]=='output-000.log'&&(fs[_0x5268f6(0x184)](logspath+_0x4c3399[_0x5268f6(0x27d)],logspath+'output-001.log'),fs[_0x5268f6(0x15d)](logspath+_0x4c3399[_0x5268f6(0x27d)],''));});}}async function zipFiles(_0x2e95a4){const _0x29d0f7=_0xe4ffaf;let _0x1a2422;if(_0x2e95a4==_0x29d0f7(0x1d9))_0x1a2422=logspath;if(_0x2e95a4=='backup')_0x1a2422=configpath;let _0x58d2fd=fs[_0x29d0f7(0x1d3)](_0x1a2422,{'withFileTypes':!![]});const _0x57362c=new require(_0x29d0f7(0x251))();_0x58d2fd['forEach'](_0x5b9858=>{const _0x3ae2f9=_0x29d0f7;if(!_0x5b9858[_0x3ae2f9(0x225)]()){let _0x40a803=fs[_0x3ae2f9(0x1e2)](_0x1a2422+_0x5b9858['name']);const _0x17f875=/^bot-[0-9]{3}-config.json$/,_0x30090c=_0x17f875[_0x3ae2f9(0xea)](_0x5b9858[_0x3ae2f9(0x27d)]);if(_0x30090c){const _0x175ba5=JSON['parse'](_0x40a803);_0x175ba5['bot'][0x0][_0x3ae2f9(0x1df)]='***',_0x175ba5[_0x3ae2f9(0x22d)][0x0][_0x3ae2f9(0x222)]='***',_0x40a803=JSON['stringify'](_0x175ba5,null,0x2);}if(_0x5b9858['name']==_0x3ae2f9(0x22f)){const _0x2adcfe=JSON[_0x3ae2f9(0x170)](_0x40a803);if(_0x2adcfe[_0x3ae2f9(0x11f)][_0x3ae2f9(0x159)])_0x2adcfe[_0x3ae2f9(0x11f)][_0x3ae2f9(0x159)]=![];if(_0x2adcfe[_0x3ae2f9(0x11f)]['bbPassword'])_0x2adcfe[_0x3ae2f9(0x11f)]['bbPassword']='***';if(_0x2adcfe['settings']['telegramToken'])_0x2adcfe['settings'][_0x3ae2f9(0x16d)]='***';if(_0x2adcfe[_0x3ae2f9(0x11f)][_0x3ae2f9(0x134)])_0x2adcfe['settings'][_0x3ae2f9(0x134)]=null;_0x40a803=JSON[_0x3ae2f9(0xe9)](_0x2adcfe,null,0x2);}if(_0x5b9858['name']!=_0x3ae2f9(0x10c))_0x57362c[_0x3ae2f9(0x238)](_0x5b9858['name'],_0x40a803);}});const _0x2542b7=_0x57362c[_0x29d0f7(0x232)]({'base64':![],'compression':_0x29d0f7(0x16f)});fs['writeFileSync'](zippath+(_0x2e95a4+_0x29d0f7(0xfa)),_0x2542b7,_0x29d0f7(0x1aa));}async function unzipFile(_0x200a98,_0x134c30){const _0x4bf247=_0xe4ffaf;await backupConfigFiles(),fs[_0x4bf247(0x1d3)](configpath,{'withFileTypes':!![]})[_0x4bf247(0x24c)](_0x52bd44=>{const _0x31c73d=_0x4bf247;if(!_0x52bd44[_0x31c73d(0x225)]())fs[_0x31c73d(0x1ff)](configpath+_0x52bd44[_0x31c73d(0x27d)]);});const _0x144e29=fs['readFileSync'](_0x200a98+_0x134c30,_0x4bf247(0x1aa)),_0x432803=new require(_0x4bf247(0x251))(_0x144e29,{'base64':![],'checkCRC32':!![]});Object[_0x4bf247(0x26c)](_0x432803['files'])['forEach'](_0x3da8e1=>{const _0x3d82da=_0x4bf247,_0x520c21=_0x432803[_0x3d82da(0x291)][_0x3da8e1];fs['writeFileSync'](configpath+_0x520c21['name'],_0x520c21[_0x3d82da(0x13b)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x4bf247(0x24c)](_0xe6baa7=>{const _0x2495ad=_0x4bf247;if(!_0xe6baa7[_0x2495ad(0x225)]())fs[_0x2495ad(0x1ff)](temppath+_0xe6baa7['name']);}),process[_0x4bf247(0x1ea)]({'restore':!![]},_0x56c106=>{});}async function getPublicIp(){const _0xb91f42=_0xe4ffaf;try{const _0xf25952=await axios[_0xb91f42(0x1dc)]('https://api.ipify.org?format=json');publicip=_0xf25952[_0xb91f42(0xee)]['ip'];}catch(_0x3b37d6){}}async function triggerAnalytics(){const _0x4e0d96=_0xe4ffaf;if(!publicip)await getPublicIp();const _0x5c70df=getBotsWithMode();let _0x2de4d9=0x0;_0x5c70df['forEach'](_0x57c722=>{const _0x4592e0=_0x4cd3;if(_0x57c722[_0x4592e0(0x21f)]===_0x4592e0(0x24e))_0x2de4d9++;}),mixpanel[_0x4e0d96(0x17c)](_0x4e0d96(0x20c),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x5c70df[_0x4e0d96(0x105)],'numbotsenabled':_0x2de4d9});}async function getMessages(){const _0x3590d4=_0xe4ffaf,_0x408a79='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x14ddbf=new GraphQLClient(_0x408a79),_0x364ae4={'authorization':_0x3590d4(0x26d)},_0x3e27f2=serverversion[_0x3590d4(0x18c)]('.'),_0x6254e4=_0x3e27f2[0x0]+'.'+_0x3e27f2[0x1],_0x1efca0=Math[_0x3590d4(0x21b)](settings[_0x3590d4(0x136)],settings['lastmsgemitted']),_0x34cdb4={'last':parseInt(_0x1efca0),'bbm':_0x6254e4},_0x1b092d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x153e5f;try{_0x153e5f=await _0x14ddbf['request'](_0x1b092d,_0x34cdb4,_0x364ae4);}catch(_0x95cc03){}if(_0x153e5f&&_0x153e5f[_0x3590d4(0x14d)]){let _0x38c439=settings[_0x3590d4(0x136)];newMessages=[];for(const _0x53b0d2 of _0x153e5f[_0x3590d4(0x14d)]){newMessages[_0x3590d4(0x19c)](_0x53b0d2);if(_0x53b0d2['bbvNew'])updateSetting(_0x3590d4(0x168),_0x53b0d2[_0x3590d4(0x276)]);let _0x193a70=_0x53b0d2['bbvNew']?serverversion>=_0x53b0d2[_0x3590d4(0x276)]:![];if(!_0x193a70&&_0x53b0d2[_0x3590d4(0xff)]>_0x38c439){if(_0x53b0d2[_0x3590d4(0x22e)]===_0x3590d4(0x227)||serverversion[_0x3590d4(0x208)](_0x53b0d2['bbvReceive'])){let _0x8a6f8a=''+_0x53b0d2[_0x3590d4(0x220)]+'\x0a\x0a'+_0x53b0d2['message'];const _0x149fc3=await sendTelegramMsg(toTelegramMarkdown(_0x8a6f8a),'Markdown');if(_0x149fc3)_0x38c439=_0x53b0d2[_0x3590d4(0xff)];}}}updateAvailable=isNewerVersion(settings[_0x3590d4(0x168)],serverversion),updateSetting(_0x3590d4(0x136),_0x38c439),emitMessages();}}function emitMessages(){const _0x37e58d=_0xe4ffaf,_0x5e8510=settings[_0x37e58d(0x1fd)];let _0x53879e=[];newMessages[_0x37e58d(0x24c)](_0x402209=>{const _0x166fa5=_0x37e58d;_0x402209[_0x166fa5(0xff)]>_0x5e8510&&_0x53879e[_0x166fa5(0x19c)](_0x402209);}),_0x53879e[_0x37e58d(0x105)]>0x0&&getAllClients()[_0x37e58d(0x24c)](_0xe7f987=>{const _0x3a94dc=_0x37e58d;getSocket(_0xe7f987['id'])[_0x3a94dc(0x132)](_0x3a94dc(0x25d),_0x53879e);});}function confirmMessage(_0xeb1290){const _0x406f21=_0xe4ffaf;updateSetting(_0x406f21(0x1fd),Number(_0xeb1290));}function isNewerVersion(_0x249d72,_0x48a15e){const _0xe0611d=_0xe4ffaf,_0x251be0=_0x48a15e['split']('.'),_0x1b12ad=_0x249d72['split']('.');for(var _0x3857fe=0x0;_0x3857fe<_0x1b12ad[_0xe0611d(0x105)];_0x3857fe++){const _0x2bb612=~~_0x1b12ad[_0x3857fe],_0x46d36b=~~_0x251be0[_0x3857fe];if(_0x2bb612>_0x46d36b)return!![];if(_0x2bb612<_0x46d36b)return![];}return![];}function toTelegramMarkdown(_0x50ffdf){const _0x281250=_0xe4ffaf,_0x15af5a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5b2fa0=/\*{2}(.+?)\*{2}/gim;return _0x50ffdf=_0x50ffdf[_0x281250(0x248)](_0x15af5a,_0x281250(0x18d))[_0x281250(0x248)](_0x5b2fa0,_0x281250(0x19f)),_0x50ffdf;}async function validateConfigFile(){const _0x279253=_0xe4ffaf,_0x1bd42c=dbConfig[_0x279253(0x1dc)](_0x279253(0x1ee))[_0x279253(0x180)](_0x279253(0x215))['value']()||[];if(_0x1bd42c['length']==0x0){let _0x1a9483=0x0,_0x177904=[];const _0x1492d9=/^bot-([0-9]{3})-config.json$/,_0x1c0ea6=fs[_0x279253(0x1d3)](configpath);_0x1c0ea6[_0x279253(0x24c)](_0x448f2c=>{const _0x36cc08=_0x279253,_0x517fb3=_0x1492d9[_0x36cc08(0x165)](_0x448f2c);if(_0x517fb3){const _0x26778e=_0x517fb3[0x1];let _0x1d9a7d=getBotAttributes(_0x26778e);_0x177904[_0x36cc08(0x19c)]({'botID':_0x26778e,'botname':_0x1d9a7d['botname'],'status':'disabled','live':'stopped'}),_0x1a9483++;}}),_0x1a9483!=0x0&&(dbConfig[_0x279253(0x1dc)]('bots')[_0x279253(0x26b)](_0x177904)[_0x279253(0x263)](),config=_0x177904,restoredConfigFile=_0x1a9483);}}async function restoreConfigNotify(_0x1c796e){const _0x3ccc4b=_0xe4ffaf;let _0x237671;if(restoredConfigFile==0x1)_0x237671='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x237671='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x1c796e)io['to'](_0x3ccc4b(0x199))[_0x3ccc4b(0x132)](_0x3ccc4b(0x204),_0x237671);else{logger['simple'](_0x3ccc4b(0x118)),logger[_0x3ccc4b(0x15f)](_0x237671),logger[_0x3ccc4b(0x15f)](_0x3ccc4b(0x118)),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x3ccc4b(0x192))tgBot[_0x3ccc4b(0x108)](settings[_0x3ccc4b(0x134)],_0x3ccc4b(0x116)+_0x237671)[_0x3ccc4b(0x20d)](_0x2703d7=>{telegramError(_0x2703d7);});}}function validateCredentials(_0x2a3928,_0x27bfc3){const _0xa5f2b0=_0xe4ffaf;if(_0x2a3928[_0xa5f2b0(0x1c3)]==settings[_0xa5f2b0(0x26e)]&&bcrypt[_0xa5f2b0(0x289)](_0x2a3928[_0xa5f2b0(0x1a7)],settings['bbPassword'])){if(settings[_0xa5f2b0(0x1ae)])return{'allow':![],'reason':_0xa5f2b0(0x150),'token':null};else{const _0x43ea00=generateLoginToken(_0x27bfc3);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x43ea00};}}else return{'allow':![],'reason':_0xa5f2b0(0x175),'token':null};}function refreshToken(_0x531fdd){const _0x32564d=generateLoginToken(_0x531fdd);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x32564d};}function validateAccess(_0x4f3698,_0x18dbb4,_0x30c57c){const _0xb05e8e=_0xe4ffaf,_0x25113a=_0x30c57c?_0x30c57c:devices[_0x18dbb4]['ip'];let _0x231060;const _0x176329=_0x40b604=>{const _0x8e7bbb=_0x4cd3;if(settings[_0x8e7bbb(0x159)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x18dbb4)){const _0x3cdfd9=generateLoginToken(_0x18dbb4);return{'allow':!![],'reason':_0x8e7bbb(0x211),'token':_0x3cdfd9};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x231060=validToken(_0x40b604,_0x18dbb4),_0x231060[_0x8e7bbb(0x193)](_0x8e7bbb(0x169))?{'allow':!![],'reason':_0x8e7bbb(0x290),'token':_0x40b604}:{'allow':![],'reason':_0x8e7bbb(0x275),'token':null};}else return{'allow':!![],'reason':_0x8e7bbb(0x27b),'token':null};};if(settings[_0xb05e8e(0x12e)]){let _0x3c2bd5=[...settings[_0xb05e8e(0x11b)],_0xb05e8e(0x1c7),_0xb05e8e(0x27c),_0xb05e8e(0x24b)];if(_0x3c2bd5[_0xb05e8e(0x28b)](_0x25113a))return _0x176329(_0x4f3698);else{_0x231060=validToken(_0x4f3698,_0x18dbb4);if(_0x231060['hasOwnProperty'](_0xb05e8e(0x169)))return _0x176329(_0x4f3698);else{if(telegramIpApproved(_0x18dbb4)){const _0x4e1779=generateToken(_0x18dbb4);return _0x231060=_0x176329(_0x4f3698),_0x231060['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4e1779}:_0x231060;}else return settings[_0xb05e8e(0x101)]?{'allow':![],'reason':_0xb05e8e(0x181),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x176329(_0x4f3698);}function timelyDecrypt(_0x223beb,_0x16ccc7=!![]){const _0x3df909=_0xe4ffaf;if(_0x223beb)try{const _0x130492=crypt[_0x3df909(0x282)](secure[_0x3df909(0xef)],_0x223beb)['message'],_0x4af16c=_0x130492['split']('@')[0x0],_0x112ae6=_0x130492[_0x3df909(0x18c)]('@')[0x1],_0x54ce72=new Date()['getTime']();if(_0x16ccc7){if(_0x54ce72-_0x112ae6<maxSecretAge*0x3e8)return _0x4af16c;else return![];}else return _0x4af16c;}catch(_0x13d6c0){return![];}else return![];}const validToken=(_0xee32c4,_0xac9444)=>{const _0xa8f5af=_0xe4ffaf,_0x9fa4ce=devices[_0xac9444]['ip'];if(!_0xee32c4)return{'error':_0xa8f5af(0x130)};for(let _0x39212b of blacklist){if(_0x39212b[_0xa8f5af(0x109)]==_0xee32c4)return{'error':_0xa8f5af(0x1cf)};}let _0x543854;try{_0x543854=jwt[_0xa8f5af(0x292)](_0xee32c4,secure[_0xa8f5af(0x25e)]+_0xac9444);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x543854[_0xa8f5af(0x193)](_0xa8f5af(0x126))&&!_0x543854[_0xa8f5af(0x193)](_0xa8f5af(0x1c3))||!_0x543854['hasOwnProperty'](_0xa8f5af(0x161)))return{'error':_0xa8f5af(0x1c2)};if(!_0x543854[_0xa8f5af(0x193)](_0xa8f5af(0x1c3))&&_0x543854[_0xa8f5af(0x193)]('clientip')){const {clientip:_0x40ed13}=_0x543854;return _0x9fa4ce==_0x40ed13?{'success':_0xa8f5af(0x11d)}:{'error':_0xa8f5af(0x18b)};}else{if(_0x543854[_0xa8f5af(0x193)](_0xa8f5af(0x1c3))&&_0x543854['hasOwnProperty'](_0xa8f5af(0x126))){const {username:_0x4f494a,clientip:_0x59c879}=_0x543854;return settings[_0xa8f5af(0x26e)]==_0x4f494a&&_0x9fa4ce==_0x59c879?{'success':_0xa8f5af(0x11d)}:{'error':_0xa8f5af(0x28a)};}}},generateLoginToken=_0x5039a3=>{const _0x4dbe51=_0xe4ffaf;if(_0x5039a3){const _0x423ec2=devices[_0x5039a3]['ip'];return jwt['sign']({'username':settings[_0x4dbe51(0x26e)],'clientip':_0x423ec2},secure[_0x4dbe51(0x25e)]+_0x5039a3,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xf2af1c=>{const _0x513105=_0xe4ffaf;if(_0xf2af1c){const _0x30d238=devices[_0xf2af1c]['ip'];return jwt[_0x513105(0x1e4)]({'clientip':_0x30d238},secure[_0x513105(0x25e)]+_0xf2af1c,{'expiresIn':devices[_0xf2af1c][_0x513105(0x1fb)][_0x513105(0x188)]*0x3c});}else return![];},telegramIpApproved=_0x55b4a9=>{const _0x140f18=_0xe4ffaf;let _0x32c430=![];return devices[_0x55b4a9][_0x140f18(0x1fb)]&&devices[_0x55b4a9][_0x140f18(0x1fb)]['expiry']!=_0x140f18(0x145)&&(_0x32c430=devices[_0x55b4a9]['telegramIpApproval'][_0x140f18(0x126)]==devices[_0x55b4a9]['ip']&&new Date()[_0x140f18(0x1a2)]()-devices[_0x55b4a9][_0x140f18(0x1fb)]['timestamp']<devices[_0x55b4a9][_0x140f18(0x1fb)][_0x140f18(0x188)]*0x3c*0x3e8),_0x32c430;},telegram2FaApproved=_0x5e4d08=>{const _0x171af8=_0xe4ffaf;let _0x1f715e=![];return devices[_0x5e4d08][_0x171af8(0x15a)]&&devices[_0x5e4d08][_0x171af8(0x15a)]['expiry']!=_0x171af8(0x145)&&(_0x1f715e=devices[_0x5e4d08]['telegram2FaApproval'][_0x171af8(0x126)]==devices[_0x5e4d08]['ip']&&new Date()[_0x171af8(0x1a2)]()-devices[_0x5e4d08][_0x171af8(0x15a)][_0x171af8(0x1ba)]<devices[_0x5e4d08][_0x171af8(0x15a)][_0x171af8(0x188)]*0x3c*0x3e8),_0x1f715e;},normalizeIP=_0x5d102a=>{const _0x5b226e=_0xe4ffaf;let _0x51bf78=null,_0x46de89=null;if(ipaddr[_0x5b226e(0x110)](_0x5d102a)){const _0x2bcc04=ipaddr[_0x5b226e(0x170)](_0x5d102a);_0x2bcc04[_0x5b226e(0x216)]()===_0x5b226e(0x202)?(_0x2bcc04[_0x5b226e(0xfc)]()&&(_0x51bf78=_0x2bcc04[_0x5b226e(0x277)]()[_0x5b226e(0x1e7)]()),_0x46de89=_0x2bcc04[_0x5b226e(0x1e7)]()):(_0x51bf78=_0x2bcc04[_0x5b226e(0x1e7)](),_0x46de89=_0x2bcc04[_0x5b226e(0x22c)]()['toString']());}return{'show':_0x51bf78?_0x51bf78:_0x46de89,'store':_0x46de89};};function sleep(_0x220a5f){return new Promise(_0x1ad972=>setTimeout(_0x1ad972,_0x220a5f));}