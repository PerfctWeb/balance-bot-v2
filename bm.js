const _0x4e4f86=_0x869a;(function(_0x524a75,_0x26ede4){const _0x29b40a=_0x869a,_0x20c627=_0x524a75();while(!![]){try{const _0xf64de6=parseInt(_0x29b40a(0x2a4))/0x1*(-parseInt(_0x29b40a(0x196))/0x2)+parseInt(_0x29b40a(0x1e9))/0x3*(-parseInt(_0x29b40a(0x1b8))/0x4)+-parseInt(_0x29b40a(0x18b))/0x5*(-parseInt(_0x29b40a(0x204))/0x6)+-parseInt(_0x29b40a(0x241))/0x7+parseInt(_0x29b40a(0x256))/0x8*(parseInt(_0x29b40a(0x294))/0x9)+parseInt(_0x29b40a(0x25f))/0xa+parseInt(_0x29b40a(0x2a8))/0xb*(parseInt(_0x29b40a(0x1ef))/0xc);if(_0xf64de6===_0x26ede4)break;else _0x20c627['push'](_0x20c627['shift']());}catch(_0x5c5f65){_0x20c627['push'](_0x20c627['shift']());}}}(_0x3f53,0x30561));const _0x554c96=function(){let _0xcd8e1a=!![];return function(_0x54ff7b,_0x3d682a){const _0x41f7cb=_0xcd8e1a?function(){if(_0x3d682a){const _0x48301d=_0x3d682a['apply'](_0x54ff7b,arguments);return _0x3d682a=null,_0x48301d;}}:function(){};return _0xcd8e1a=![],_0x41f7cb;};}(),_0x2928e3=_0x554c96(this,function(){const _0x55bad4=_0x869a;return _0x2928e3['toString']()['search']('(((.+)+)+)+$')[_0x55bad4(0x1f6)]()[_0x55bad4(0x238)](_0x2928e3)[_0x55bad4(0x1f1)]('(((.+)+)+)+$');});_0x2928e3();'use strict';process[_0x4e4f86(0x21b)][_0x4e4f86(0x1b9)]=0x1;const childProcess=require(_0x4e4f86(0x1fb)),FileSync=require(_0x4e4f86(0x195)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),path=require(_0x4e4f86(0x2c2)),crypto=require(_0x4e4f86(0x290)),Crypt=require(_0x4e4f86(0x205))[_0x4e4f86(0x257)],RSA=require(_0x4e4f86(0x205))[_0x4e4f86(0x29f)],bcrypt=require(_0x4e4f86(0x1c5)),jwt=require(_0x4e4f86(0x1eb)),analyticsLib=require(_0x4e4f86(0x1b7))[_0x4e4f86(0x23d)],googleAnalytics=require(_0x4e4f86(0x29d))['default'],ipaddr=require('ipaddr.js'),argv=require(_0x4e4f86(0x222))(process[_0x4e4f86(0x1d9)][_0x4e4f86(0x1dd)](0x2))[_0x4e4f86(0x1d9)],PORT=argv[_0x4e4f86(0x207)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4e4f86(0x1af)](PORT))return console[_0x4e4f86(0x1b1)](_0x4e4f86(0x2ad)+PORT+_0x4e4f86(0x22c)),process[_0x4e4f86(0x213)](0x1);const HOST=argv['host']||null,userID=argv[_0x4e4f86(0x227)]||'';let bbpath=_0x4e4f86(0x236),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x4e4f86(0x2b2),securefile=_0x4e4f86(0x23f),validInstallation=fs[_0x4e4f86(0x21d)]('../install.js');!fs[_0x4e4f86(0x21d)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x4e4f86(0x23c);!fs['existsSync'](configpath)&&fs[_0x4e4f86(0x1b0)](configpath);!fs[_0x4e4f86(0x21d)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e4f86(0x289)]({'bots':[]})[_0x4e4f86(0x217)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4e4f86(0x289)]({'settings':{'timeshift':0x0}})[_0x4e4f86(0x217)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4e4f86(0x289)]({'secure':{},'blacklist':[]})[_0x4e4f86(0x217)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4e4f86(0x1e3))[_0x4e4f86(0x1d3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4e4f86(0x1fd)),app=express(),http=require('http')[_0x4e4f86(0x1d4)](app);app[_0x4e4f86(0x27b)](express[_0x4e4f86(0x235)](path[_0x4e4f86(0x247)](__dirname,bbpath2,_0x4e4f86(0x1c4)))),app[_0x4e4f86(0x27b)](express[_0x4e4f86(0x235)](path[_0x4e4f86(0x247)](__dirname,bbpath2,'build'))),app[_0x4e4f86(0x27d)]('/',function(_0x2905ac,_0x9499b){const _0x4655c6=_0x4e4f86;_0x9499b['sendFile'](path[_0x4655c6(0x247)](__dirname,bbpath2,_0x4655c6(0x1c4),_0x4655c6(0x1ad)));}),app[_0x4e4f86(0x27d)](_0x4e4f86(0x2ae),function(_0x19b848,_0x4adf81){const _0x49f646=_0x4e4f86;_0x4adf81[_0x49f646(0x29a)](path[_0x49f646(0x247)](__dirname,bbpath2,'build',_0x49f646(0x1ad)));}),app['get'](_0x4e4f86(0x219),(_0x51fe95,_0x5a0059)=>{const _0x28051a=_0x4e4f86;_0x5a0059[_0x28051a(0x29a)](path[_0x28051a(0x247)](__dirname,bbpath2,_0x28051a(0x242),_0x28051a(0x1ad)));}),app[_0x4e4f86(0x27d)]('/:bot/performance',(_0x4a16fc,_0x58add1)=>{const _0x1c420b=_0x4e4f86;_0x58add1[_0x1c420b(0x29a)](path[_0x1c420b(0x247)](__dirname,bbpath2,'build',_0x1c420b(0x1ad)));}),app[_0x4e4f86(0x27d)](_0x4e4f86(0x261),(_0x372110,_0x202323)=>{const _0x3d9caf=_0x4e4f86;_0x202323[_0x3d9caf(0x29a)](path[_0x3d9caf(0x247)](__dirname,bbpath2,_0x3d9caf(0x242),'index.html'));}),app[_0x4e4f86(0x27d)](_0x4e4f86(0x1ba),(_0x453af9,_0x2b6b92)=>{const _0x2b48ba=_0x4e4f86;_0x2b6b92[_0x2b48ba(0x29a)](path[_0x2b48ba(0x247)](__dirname,bbpath2,_0x2b48ba(0x242),_0x2b48ba(0x1ad)));}),app['get'](_0x4e4f86(0x1c7),(_0x57af3e,_0x97281)=>{const _0x58554a=_0x4e4f86;_0x97281[_0x58554a(0x29a)](path[_0x58554a(0x247)](__dirname,bbpath2,'build',_0x58554a(0x1ad)));}),app[_0x4e4f86(0x27d)](_0x4e4f86(0x25c),(_0x472682,_0x1cfa74)=>{const _0x4005e7=_0x4e4f86;_0x1cfa74[_0x4005e7(0x29a)](path[_0x4005e7(0x247)](__dirname,bbpath2,_0x4005e7(0x242),_0x4005e7(0x1ad)));});if(HOST)http[_0x4e4f86(0x253)](PORT,HOST);else http[_0x4e4f86(0x253)](PORT);const io=require(_0x4e4f86(0x1d1))(http,{}),analytics=analyticsLib({'app':_0x4e4f86(0x23b),'plugins':[googleAnalytics({'trackingId':_0x4e4f86(0x281)})]}),TelegramBot=require(_0x4e4f86(0x2c3));let tgBot;if(settings['telegramToken']&&settings[_0x4e4f86(0x1aa)]!=''&&settings[_0x4e4f86(0x272)]&&settings[_0x4e4f86(0x272)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x22f8eb=_0x4e4f86;console[_0x22f8eb(0x1b1)](''),console['log'](_0x22f8eb(0x1a2)),logging(_0x22f8eb(0x276)+PORT),console[_0x22f8eb(0x1b1)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x22f8eb(0x1da)](_0xb25d38=>{const _0x13fe99=_0x22f8eb;if(_0xb25d38[_0x13fe99(0x2bb)]==_0x13fe99(0x2c4)||_0xb25d38[_0x13fe99(0x2bb)]==_0x13fe99(0x198))logging(_0x13fe99(0x29c)+_0xb25d38[_0x13fe99(0x270)]+'\x20|\x20'+_0xb25d38['botname']),startBot([_0xb25d38[_0x13fe99(0x270)],userID],{'cwd':bbpath},function(_0x21280a){if(_0x21280a)logging(_0x21280a);});else(_0xb25d38[_0x13fe99(0x2bb)]==_0x13fe99(0x2c6)||_0xb25d38[_0x13fe99(0x2bb)]==_0x13fe99(0x268))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0xb25d38['botID']+_0x13fe99(0x22e)+_0xb25d38['botname']);});else!newBot&&console[_0x22f8eb(0x1b1)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0x22f8eb(0x1a2)),console[_0x22f8eb(0x1b1)]('');}function startSocket(){const _0x385e45=_0x4e4f86;io['on'](_0x385e45(0x245),_0x173e33=>{const _0x14cacd=_0x385e45;let _0x2413c9,_0x4c58de,_0x3ce9b1,_0x332fa0,_0x4339e6;const _0x596b8=_0x173e33[_0x14cacd(0x1a1)][_0x14cacd(0x1e4)][_0x14cacd(0x1cb)];_0x4c58de=_0x596b8['match'](/bot[0-9]{3}/);if(_0x4c58de)_0x3ce9b1=_0x4c58de[0x0][_0x14cacd(0x2a9)](/[0-9]{3}/);if(_0x3ce9b1)_0x2413c9=_0x3ce9b1[0x0];else _0x2413c9=_0x14cacd(0x251);const _0x1f91af=_0x173e33[_0x14cacd(0x1a1)]['auth'][_0x14cacd(0x267)];if(!_0x1f91af)_0x173e33[_0x14cacd(0x2c7)]('status',{'publicKey':secure[_0x14cacd(0x20f)]});else{_0x332fa0=timelyDecrypt(_0x1f91af,![]);if(!_0x332fa0)_0x173e33[_0x14cacd(0x2c7)](_0x14cacd(0x2bb),{'publicKey':secure[_0x14cacd(0x20f)]});else{_0x4339e6=normalizeIP(_0x173e33[_0x14cacd(0x19f)][_0x14cacd(0x208)])[_0x14cacd(0x1f5)];if(!devices[_0x332fa0])devices[_0x332fa0]={'uuid':_0x332fa0,'access':{'token':null}};devices[_0x332fa0]['ip']=_0x4339e6;const _0x7caba0=addClient(_0x173e33['id'],_0x332fa0,_0x2413c9);setAccess(_0x7caba0),_0x173e33['on'](_0x14cacd(0x223),_0x7c0997=>{const _0x40ccc4=_0x14cacd,_0x29e214=timelyDecrypt(_0x7c0997['password']);if(_0x29e214){_0x7c0997={'username':_0x7c0997['username'],'password':_0x29e214},devices[_0x332fa0][_0x40ccc4(0x20c)]=validateCredentials(_0x7c0997,_0x332fa0);if(devices[_0x332fa0][_0x40ccc4(0x20c)][_0x40ccc4(0x1e7)]==![]&&devices[_0x332fa0]['access'][_0x40ccc4(0x18c)]==_0x40ccc4(0x1e0))_0x173e33[_0x40ccc4(0x2c7)](_0x40ccc4(0x2bb),{'access':devices[_0x332fa0][_0x40ccc4(0x20c)]}),loginAccess2FA(_0x332fa0,_0x4339e6);else{if(devices[_0x332fa0][_0x40ccc4(0x20c)][_0x40ccc4(0x1e7)]==![]&&devices[_0x332fa0][_0x40ccc4(0x20c)][_0x40ccc4(0x18c)]==_0x40ccc4(0x1a9))_0x173e33['emit'](_0x40ccc4(0x2bb),{'access':devices[_0x332fa0][_0x40ccc4(0x20c)]});else devices[_0x332fa0][_0x40ccc4(0x20c)][_0x40ccc4(0x1e7)]&&devices[_0x332fa0][_0x40ccc4(0x20c)][_0x40ccc4(0x18c)]==_0x40ccc4(0x298)&&(getClientsWithUuid(_0x332fa0)[_0x40ccc4(0x1da)](_0x272a60=>{setAccess(_0x272a60);}),setTokenRefresh(_0x332fa0),setSessionTimeout(_0x40ccc4(0x223),_0x332fa0));}}else logging(_0x40ccc4(0x194));}),_0x173e33['on']('reset-password',()=>{resetPassword();}),_0x173e33['on'](_0x14cacd(0x263),_0x13728a=>{removeClient(_0x173e33['id']);});}}});}function initClient(_0x342c9e){const _0x30e592=_0x4e4f86;if(_0x342c9e!=_0x30e592(0x251)&&config['apiKey']!=''){if(pid[_0x342c9e])pid[_0x342c9e]['send']({'function':_0x30e592(0x1a8),'args':null});}}function getSocket(_0x4a4f4c){const _0x31c5d8=_0x4e4f86;return io['sockets'][_0x31c5d8(0x2aa)]['get'](_0x4a4f4c);}function setAccess(_0x4be571){const _0x573965=_0x4e4f86,_0x3b7e8f=getSocket(_0x4be571['id']),_0x4d8ffe=_0x4be571[_0x573965(0x1df)],_0x5908db=_0x4be571[_0x573965(0x18d)];devices[_0x4d8ffe][_0x573965(0x20c)]=validateAccess(devices[_0x4d8ffe][_0x573965(0x20c)]['token'],_0x4d8ffe),_0x3b7e8f[_0x573965(0x247)](_0x4d8ffe);if(devices[_0x4d8ffe][_0x573965(0x20c)][_0x573965(0x1e7)]){_0x3b7e8f[_0x573965(0x247)](_0x5908db);if(_0x5908db==_0x573965(0x251))initializeSocketBotManager(_0x3b7e8f);else initializeSocketBot(_0x3b7e8f);initClient(_0x5908db);}devices[_0x4d8ffe][_0x573965(0x20c)]['token']&&devices[_0x4d8ffe][_0x573965(0x20c)][_0x573965(0x18c)]==_0x573965(0x1bd)&&setSessionTimeout(_0x573965(0x24b),_0x4d8ffe),devices[_0x4d8ffe][_0x573965(0x20c)]['token']&&devices[_0x4d8ffe][_0x573965(0x20c)][_0x573965(0x18c)]==_0x573965(0x21e)&&setSessionTimeout(_0x573965(0x223),_0x4d8ffe),_0x3b7e8f[_0x573965(0x2c7)](_0x573965(0x2bb),{'status':_0x4be571[_0x573965(0x26a)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4d8ffe]['access'],'externalip':devices[_0x4d8ffe]['ip'],'publicKey':secure[_0x573965(0x20f)],'validInstallation':validInstallation}),devices[_0x4d8ffe][_0x573965(0x20c)][_0x573965(0x1e7)]==![]&&devices[_0x4d8ffe][_0x573965(0x20c)]['reason']==_0x573965(0x295)&&temporaryAccess2FA(_0x4d8ffe,devices[_0x4d8ffe]['ip']);}function setSessionTimeout(_0x3c52de,_0x20a310){const _0x48ce2f=_0x4e4f86;let _0x2989ff;if(_0x3c52de=='login')_0x2989ff=loginExpiry*0x3c*0x3e8;else _0x2989ff=devices[_0x20a310][_0x48ce2f(0x226)][_0x48ce2f(0x291)]*0x3c*0x3e8-(new Date()[_0x48ce2f(0x18e)]()-devices[_0x20a310][_0x48ce2f(0x226)][_0x48ce2f(0x23a)]);if(devices[_0x20a310][_0x48ce2f(0x1d7)])clearTimeout(devices[_0x20a310][_0x48ce2f(0x1d7)]);devices[_0x20a310][_0x48ce2f(0x1d7)]=setTimeout(()=>{const _0x1b738c=_0x48ce2f;if(devices[_0x20a310][_0x1b738c(0x229)])clearTimeout(devices[_0x20a310]['pidRefreshToken']);removeSocketListeners(_0x20a310),addBlacklist(_0x20a310),devices[_0x20a310][_0x1b738c(0x226)]=null,devices[_0x20a310][_0x1b738c(0x200)]=null,devices[_0x20a310][_0x1b738c(0x20c)][_0x1b738c(0x2a7)]=null,devices[_0x20a310]['access']=validateAccess(devices[_0x20a310][_0x1b738c(0x20c)]['token'],_0x20a310),!(devices[_0x20a310][_0x1b738c(0x20c)][_0x1b738c(0x1e7)]&&devices[_0x20a310][_0x1b738c(0x20c)][_0x1b738c(0x18c)]==_0x1b738c(0x1cf))&&(_0x3c52de=='login'?io['to'](_0x20a310)[_0x1b738c(0x2c7)](_0x1b738c(0x2bb),{'access':{'allow':![],'reason':_0x1b738c(0x1ff),'token':null}}):io['to'](_0x20a310)[_0x1b738c(0x2c7)](_0x1b738c(0x2bb),{'access':{'allow':![],'reason':_0x1b738c(0x218),'token':null}})),devices[_0x20a310][_0x1b738c(0x20c)]['token']=null;},_0x2989ff);}function setTokenRefresh(_0x1d57ac){const _0x2f91aa=_0x4e4f86;if(devices[_0x1d57ac][_0x2f91aa(0x229)])clearTimeout(devices[_0x1d57ac]['pidRefreshToken']);devices[_0x1d57ac][_0x2f91aa(0x229)]=setTimeout(()=>{const _0x3f3cba=_0x2f91aa;getClientsWithUuid(_0x1d57ac)['length']!=0x0?(devices[_0x1d57ac][_0x3f3cba(0x20c)]=refreshToken(_0x1d57ac),io['to'](_0x1d57ac)[_0x3f3cba(0x2c7)](_0x3f3cba(0x2bb),{'status':_0x3f3cba(0x24c),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1d57ac]['access'],'externalip':devices[_0x1d57ac]['ip'],'publicKey':secure[_0x3f3cba(0x20f)],'validInstallation':validInstallation}),setTokenRefresh(_0x1d57ac)):clearTimeout(devices[_0x1d57ac][_0x3f3cba(0x229)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4eb7ef){const _0x4fe15d=_0x4e4f86,_0x319e8c=getClient(_0x4eb7ef['id'])['uuid'];_0x4eb7ef['emit'](_0x4fe15d(0x201),config),_0x4eb7ef[_0x4fe15d(0x2c7)]('settings',cleanSettings()),_0x4eb7ef['on'](_0x4fe15d(0x212),_0x367a1b=>{const _0x3d9057=_0x4fe15d;if(validateAccess(_0x367a1b,_0x319e8c)[_0x3d9057(0x1e7)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x4eb7ef['on'](_0x4fe15d(0x27c),(_0x14a845,_0x515727)=>{const _0x570453=_0x4fe15d;if(validateAccess(_0x515727,_0x319e8c)[_0x570453(0x1e7)])toggleBot(_0x14a845['botID'],_0x14a845[_0x570453(0x2bb)],_0x14a845['live']);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4eb7ef['on'](_0x4fe15d(0x28c),(_0xabb46b,_0x4d7010)=>{if(validateAccess(_0x4d7010,_0x319e8c)['allow'])deleteBot(_0xabb46b);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4eb7ef['on']('store-settings',(_0x25ffd5,_0x437c8e)=>{const _0x421b1b=_0x4fe15d;if(validateAccess(_0x437c8e,_0x319e8c)[_0x421b1b(0x1e7)])storeSettings(_0x25ffd5,!![]);else logging(_0x421b1b(0x24d));}),_0x4eb7ef['on'](_0x4fe15d(0x1b5),(_0x2cd14c,_0x29720b)=>{const _0x193b2f=_0x4fe15d;if(validateAccess(_0x29720b,_0x319e8c)['allow'])updateBB();else logging(_0x193b2f(0x24d));}),_0x4eb7ef['on'](_0x4fe15d(0x211),_0x51544d=>{const _0x276630=_0x4fe15d;if(validateAccess(_0x51544d,_0x319e8c)[_0x276630(0x1e7)]){if(devices[_0x319e8c]['pidRefreshToken'])clearTimeout(devices[_0x319e8c][_0x276630(0x229)]);if(devices[_0x319e8c]['pidExpireLogin'])clearTimeout(devices[_0x319e8c][_0x276630(0x1d7)]);removeSocketListeners(getClient(_0x4eb7ef['id'])[_0x276630(0x1df)]),addBlacklist(_0x319e8c),devices[_0x319e8c][_0x276630(0x226)]=null,devices[_0x319e8c][_0x276630(0x200)]=null,devices[_0x319e8c][_0x276630(0x20c)][_0x276630(0x2a7)]=null,io['to'](getClient(_0x4eb7ef['id'])['uuid'])[_0x276630(0x2c7)](_0x276630(0x2bb),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x276630(0x2a0));});}function initializeSocketBot(_0x48a586){const _0x218b80=_0x4e4f86,_0x3f952e=getClient(_0x48a586['id'])[_0x218b80(0x18d)],_0x1a19dd=getClient(_0x48a586['id'])[_0x218b80(0x1df)];_0x48a586['on'](_0x218b80(0x1f2),(_0x327e54,_0x2a9d4d)=>{const _0x5665ba=_0x218b80;if(validateAccess(_0x2a9d4d,_0x1a19dd)[_0x5665ba(0x1e7)]){if(pid[_0x3f952e])pid[_0x3f952e][_0x5665ba(0x1a6)]({'function':'emitHistory','args':_0x327e54});}else logging(_0x5665ba(0x225));}),_0x48a586['on'](_0x218b80(0x248),(_0x25afcd,_0x35962b)=>{const _0x9eb5f1=_0x218b80;if(validateAccess(_0x35962b,_0x1a19dd)[_0x9eb5f1(0x1e7)]){if(pid[_0x3f952e])pid[_0x3f952e][_0x9eb5f1(0x1a6)]({'function':_0x9eb5f1(0x271),'args':_0x25afcd});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x48a586['on'](_0x218b80(0x2ba),(_0x153d33,_0x3a300c)=>{const _0x37b580=_0x218b80;if(validateAccess(_0x3a300c,_0x1a19dd)['allow']){if(pid[_0x3f952e])pid[_0x3f952e]['send']({'function':'storeConfiguration','args':_0x153d33});}else logging(_0x37b580(0x220));}),_0x48a586['on']('store-headless',(_0x1a17fb,_0xaa9774)=>{const _0x7aba73=_0x218b80;if(validateAccess(_0xaa9774,_0x1a19dd)[_0x7aba73(0x1e7)]){if(pid[_0x3f952e])pid[_0x3f952e][_0x7aba73(0x1a6)]({'function':_0x7aba73(0x26e),'args':_0x1a17fb});}else logging(_0x7aba73(0x20d));}),_0x48a586['on'](_0x218b80(0x2b0),_0x397133=>{const _0xd058fe=_0x218b80;if(validateAccess(_0x397133,_0x1a19dd)[_0xd058fe(0x1e7)]){if(pid[_0x3f952e])pid[_0x3f952e][_0xd058fe(0x1a6)]({'function':_0xd058fe(0x249),'args':null});}else logging(_0xd058fe(0x252));}),_0x48a586['on'](_0x218b80(0x2a2),(_0x4c62ec,_0x2ab102)=>{const _0x593c6f=_0x218b80;if(validateAccess(_0x2ab102,_0x1a19dd)[_0x593c6f(0x1e7)]){if(pid[_0x3f952e])pid[_0x3f952e]['send']({'function':'placeOrder','args':_0x4c62ec});}else logging(_0x593c6f(0x1ec));}),_0x48a586['on'](_0x218b80(0x25d),_0x8729e2=>{const _0xfb0451=_0x218b80;if(validateAccess(_0x8729e2,_0x1a19dd)['allow']){if(pid[_0x3f952e])pid[_0x3f952e]['send']({'function':_0xfb0451(0x286),'args':null});}else logging(_0xfb0451(0x1c6));}),_0x48a586['on'](_0x218b80(0x211),_0x3a249a=>{const _0x509b46=_0x218b80;if(validateAccess(_0x3a249a,_0x1a19dd)[_0x509b46(0x1e7)]){if(devices[_0x1a19dd][_0x509b46(0x229)])clearTimeout(devices[_0x1a19dd][_0x509b46(0x229)]);if(devices[_0x1a19dd][_0x509b46(0x1d7)])clearTimeout(devices[_0x1a19dd][_0x509b46(0x1d7)]);removeSocketListeners(getClient(_0x48a586['id'])[_0x509b46(0x1df)]),addBlacklist(_0x1a19dd),devices[_0x1a19dd][_0x509b46(0x226)]=null,devices[_0x1a19dd][_0x509b46(0x200)]=null,devices[_0x1a19dd]['access'][_0x509b46(0x2a7)]=null,io['to'](getClient(_0x48a586['id'])['uuid'])[_0x509b46(0x2c7)](_0x509b46(0x2bb),{'access':{'allow':![],'reason':_0x509b46(0x21a),'token':null}});}else logging(_0x509b46(0x2a0));});}function removeSocketListeners(_0x41322a){const _0x185e17=_0x4e4f86;getClientsWithUuid(_0x41322a)[_0x185e17(0x1da)](_0x5164fa=>{const _0x495a64=_0x185e17;getSocket(_0x5164fa['id'])[_0x495a64(0x266)]();});}function cleanSettings(){const _0x231280=_0x4e4f86;let _0x56d9fb=settings;return settings[_0x231280(0x1aa)]&&settings[_0x231280(0x1aa)]!=''&&(_0x56d9fb={..._0x56d9fb,'telegramToken':'************'}),settings[_0x231280(0x1c1)]&&settings[_0x231280(0x1c1)]!=''&&(_0x56d9fb={..._0x56d9fb,'bbPassword':_0x231280(0x1fe)}),_0x56d9fb;}function updateBB(){const _0x1cb5d4=_0x4e4f86;installingUpdate=!![],config[_0x1cb5d4(0x1da)](_0x413170=>{const _0x30dd55=_0x1cb5d4;restartBot(_0x413170[_0x30dd55(0x270)]);}),process[_0x1cb5d4(0x1a6)]({'update':!![]},_0x135721=>{});}function startBot(_0x5c8572,_0x38f70c,_0x51d0ee){const _0x440d77=_0x4e4f86;let _0x4f8b4b=![];const _0x2bb421=_0x5c8572[0x0];_0x38f70c={..._0x38f70c,'stdio':['inherit','inherit',_0x440d77(0x283),_0x440d77(0x1f9)]},pid[_0x2bb421]=childProcess[_0x440d77(0x26b)](botfile,_0x5c8572,_0x38f70c),pid[_0x2bb421]['on'](_0x440d77(0x25b),_0x138032=>{const _0x1592e8=_0x440d77;switch(Object[_0x1592e8(0x1ce)](_0x138032)[0x0]){case _0x1592e8(0x20a):updateBotName(_0x2bb421,_0x138032[_0x1592e8(0x20a)]);break;case _0x1592e8(0x2bb):updateStatus(_0x2bb421,_0x138032[_0x1592e8(0x2bb)]);break;case _0x1592e8(0x28b):updateLive(_0x2bb421,_0x138032[_0x1592e8(0x28b)]);break;case _0x1592e8(0x239):updateLive(_0x2bb421,_0x138032[_0x1592e8(0x239)]),io['to'](_0x2bb421)[_0x1592e8(0x2c7)](_0x1592e8(0x2bb),{'access':{'allow':![],'reason':_0x1592e8(0x275),'token':null}});break;case _0x1592e8(0x1d2):_0x138032[_0x1592e8(0x1d2)]=='restart'&&restartBot(_0x2bb421);_0x138032['stop']==_0x1592e8(0x1c9)&&toggleBot(_0x2bb421,_0x1592e8(0x2c6),'stopped');break;case _0x1592e8(0x22b):sendTelegram(_0x2bb421,_0x138032[_0x1592e8(0x22b)]);break;case _0x1592e8(0x2b7):io['to'](_0x2bb421)['emit'](_0x138032[_0x1592e8(0x2b7)],_0x138032['args']);break;}}),pid[_0x2bb421]['on'](_0x440d77(0x297),function(_0x18b1f9){if(_0x4f8b4b)return;_0x4f8b4b=!![],_0x51d0ee(_0x18b1f9);}),pid[_0x2bb421]['on'](_0x440d77(0x213),function(_0x202eed){const _0xba06fd=_0x440d77;if(installingUpdate)return;if(_0x4f8b4b)return;_0x4f8b4b=!![],_0x51d0ee(null);const _0x414f0d=dbConfig[_0xba06fd(0x27d)](_0xba06fd(0x201))['find']({'botID':_0x2bb421})['value']();_0x414f0d&&(_0x414f0d['status']==_0xba06fd(0x2c4)||_0x414f0d[_0xba06fd(0x2bb)]==_0xba06fd(0x198))&&(updateLive(_0x2bb421,'stopped'),logging('restarting\x20Bot\x20'+_0x2bb421),startBot([_0x2bb421,userID],{'cwd':bbpath},function(_0x8ad67f){if(_0x8ad67f)logging(_0x8ad67f);}));});}function stopBot(_0x2076fc){const _0x42aa21=_0x4e4f86;getClientsWithBotID(_0x2076fc)[_0x42aa21(0x1da)](_0x571d30=>{const _0x25db6a=_0x42aa21;getSocket(_0x571d30['id'])[_0x25db6a(0x263)](!![]),removeClient(_0x571d30['id']);});if(pid[_0x2076fc])pid[_0x2076fc][_0x42aa21(0x1c9)]();}function restartBot(_0x546e78){const _0x1d9943=_0x4e4f86;if(pid[_0x546e78])pid[_0x546e78][_0x1d9943(0x1c9)]();}function addBot(){const _0x5f0b69=_0x4e4f86;let _0x4fa9e6;for(let _0x435a7d=0x1;_0x435a7d<0x3e9;_0x435a7d++){_0x4fa9e6=_0x435a7d['toString']()[_0x5f0b69(0x2bf)](0x3,'0');let _0x1049de=config['find'](_0x3b4479=>_0x3b4479[_0x5f0b69(0x270)]==_0x4fa9e6);if(!_0x1049de)break;}if(_0x4fa9e6===_0x5f0b69(0x26d)){logging(_0x5f0b69(0x1cc));return;}logging(_0x5f0b69(0x206)+_0x4fa9e6),dbConfig[_0x5f0b69(0x27d)](_0x5f0b69(0x201))[_0x5f0b69(0x22f)]({'botID':_0x4fa9e6,'botname':_0x5f0b69(0x28d)+_0x4fa9e6,'status':_0x5f0b69(0x198),'live':''})[_0x5f0b69(0x217)](),startBot([_0x4fa9e6,userID],{'cwd':bbpath},function(_0x429a17){if(_0x429a17)logging(_0x429a17);}),config=getConfiguration(),io['to']('botmanager')[_0x5f0b69(0x2c7)](_0x5f0b69(0x201),config);}function deleteBot(_0x2272c6){const _0x49ba5c=_0x4e4f86;getClientsWithBotID(_0x2272c6)['forEach'](_0x2ea2fd=>{const _0x45d05c=_0x869a;getSocket(_0x2ea2fd['id'])[_0x45d05c(0x263)](!![]),removeClient(_0x2ea2fd['id']);}),dbConfig[_0x49ba5c(0x27d)](_0x49ba5c(0x201))[_0x49ba5c(0x1fa)]({'botID':_0x2272c6})[_0x49ba5c(0x217)](),logging('deleted\x20Bot\x20'+_0x2272c6),stopBot(_0x2272c6);try{fs[_0x49ba5c(0x293)](path[_0x49ba5c(0x247)](configpath,_0x49ba5c(0x2ac)+_0x2272c6+_0x49ba5c(0x2a6))),fs['unlinkSync'](path[_0x49ba5c(0x247)](configpath,_0x49ba5c(0x2ac)+_0x2272c6+'-events.json')),fs['unlinkSync'](path[_0x49ba5c(0x247)](configpath,_0x49ba5c(0x2ac)+_0x2272c6+_0x49ba5c(0x292))),fs[_0x49ba5c(0x293)](path[_0x49ba5c(0x247)](configpath,_0x49ba5c(0x2ac)+_0x2272c6+_0x49ba5c(0x26f)));}catch(_0x118f76){if(_0x118f76)logging(_0x49ba5c(0x1a7),_0x118f76);}config=getConfiguration(),io['to'](_0x49ba5c(0x251))[_0x49ba5c(0x2c7)](_0x49ba5c(0x201),config);}function toggleBot(_0x5d2bfc,_0x10b862,_0x12649e){const _0x6617e5=_0x4e4f86;dbConfig['get'](_0x6617e5(0x201))['find']({'botID':_0x5d2bfc})[_0x6617e5(0x1b6)]({'status':_0x10b862})[_0x6617e5(0x1b6)]({'live':_0x12649e})['write']();if(_0x10b862==_0x6617e5(0x2c4)||_0x10b862=='new')logging(_0x6617e5(0x2ca)+_0x5d2bfc),startBot([_0x5d2bfc,userID],{'cwd':bbpath},function(_0x29cc74){if(_0x29cc74)logging(_0x29cc74);});else(_0x10b862==_0x6617e5(0x2c6)||_0x10b862=='new-disabled')&&(logging(_0x6617e5(0x197)+_0x5d2bfc),stopBot(_0x5d2bfc));config=getConfiguration(),io['to'](_0x6617e5(0x251))[_0x6617e5(0x2c7)](_0x6617e5(0x201),config);}function toggleStatus(_0x491688){const _0x45599a=_0x4e4f86;let _0x167286=dbConfig[_0x45599a(0x27d)](_0x45599a(0x201))['find']({'botID':_0x491688})[_0x45599a(0x221)](),_0x544020;if(_0x167286['status']===_0x45599a(0x2c4))_0x544020=_0x45599a(0x2c6);else{if(_0x167286[_0x45599a(0x2bb)]===_0x45599a(0x198))_0x544020=_0x45599a(0x268);else{if(_0x167286[_0x45599a(0x2bb)]==='new-disabled')_0x544020=_0x45599a(0x198);else{if(_0x167286[_0x45599a(0x2bb)]===_0x45599a(0x2c6))_0x544020=_0x45599a(0x2c4);}}}return _0x544020;}function updateStatus(_0x37a692,_0x94f214){const _0x1912b9=_0x4e4f86;dbConfig[_0x1912b9(0x27d)](_0x1912b9(0x201))[_0x1912b9(0x29e)]({'botID':_0x37a692})['assign']({'status':_0x94f214})[_0x1912b9(0x217)](),config=getConfiguration(),io['to']('botmanager')[_0x1912b9(0x2c7)](_0x1912b9(0x201),config);}function updateLive(_0x2a4d75,_0x33d84f){const _0xa6706f=_0x4e4f86;dbConfig['get'](_0xa6706f(0x201))[_0xa6706f(0x29e)]({'botID':_0x2a4d75})[_0xa6706f(0x1b6)]({'live':_0x33d84f})[_0xa6706f(0x217)](),config=getConfiguration(),io['to'](_0xa6706f(0x251))[_0xa6706f(0x2c7)](_0xa6706f(0x201),config);}function updateBotName(_0x5ea495,_0x1ec08c){const _0x55bde2=_0x4e4f86;dbConfig['get'](_0x55bde2(0x201))[_0x55bde2(0x29e)]({'botID':_0x5ea495})[_0x55bde2(0x1b6)]({'botname':_0x1ec08c})[_0x55bde2(0x217)](),config=getConfiguration(),io['to'](_0x55bde2(0x251))['emit'](_0x55bde2(0x201),config);}function telegramError(_0x51c09e){const _0x475dd2=_0x4e4f86;console[_0x475dd2(0x1b1)](getTimeStamp()+_0x475dd2(0x1b4));}function validateTelegram(_0x351f5f){const _0x54b9ee=_0x4e4f86;if(_0x351f5f[_0x54b9ee(0x254)][_0x54b9ee(0x296)]!=settings[_0x54b9ee(0x272)]&&'@'+_0x351f5f[_0x54b9ee(0x254)]['username']!=settings[_0x54b9ee(0x272)])return tgBot[_0x54b9ee(0x1ea)](_0x351f5f[_0x54b9ee(0x1ae)]['id'],_0x54b9ee(0x1c8),{'parse_mode':_0x54b9ee(0x1b2)})[_0x54b9ee(0x1a5)](_0x10cbe7=>{telegramError(_0x10cbe7);}),![];return!![];}async function initTelegram(){const _0x39af4d=_0x4e4f86;if(tgBot)tgBot[_0x39af4d(0x1e6)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x39af4d(0x1aa)],{'polling':!![]});let _0x2f2153=_0x39af4d(0x1db);_0x2f2153+='\x0a',_0x2f2153+=_0x39af4d(0x228),_0x2f2153+=_0x39af4d(0x1dc),_0x2f2153+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2f2153+=_0x39af4d(0x1be),_0x2f2153+='/on\x20-\x20start\x20bot(s)\x0a',_0x2f2153+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2f2153+=_0x39af4d(0x2be),_0x2f2153+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x10a8fd=_0x39af4d(0x25a);_0x10a8fd+='\x0a',_0x10a8fd+=_0x2f2153,tgBot[_0x39af4d(0x27a)](/\/start/,_0x3af892=>{const _0x52e3b4=_0x39af4d;if(!validateTelegram(_0x3af892))return;if(settings['telegramChatId']!=_0x3af892[_0x52e3b4(0x1ae)]['id'])updateSetting(_0x52e3b4(0x214),_0x3af892[_0x52e3b4(0x1ae)]['id']);updateSetting(_0x52e3b4(0x1f7),!![]),tgBot[_0x52e3b4(0x1ea)](_0x3af892[_0x52e3b4(0x1ae)]['id'],_0x10a8fd)[_0x52e3b4(0x1a5)](_0x3a536c=>{telegramError(_0x3a536c);});}),tgBot[_0x39af4d(0x27a)](/\/enable/,_0x128fc6=>{const _0x4a5455=_0x39af4d;if(!validateTelegram(_0x128fc6))return;if(settings['telegramChatId']!=_0x128fc6[_0x4a5455(0x1ae)]['id'])updateSetting(_0x4a5455(0x214),_0x128fc6['chat']['id']);updateSetting(_0x4a5455(0x1f7),!![]),tgBot[_0x4a5455(0x1ea)](_0x128fc6['chat']['id'],_0x4a5455(0x19d))[_0x4a5455(0x1a5)](_0x191c39=>{telegramError(_0x191c39);});}),tgBot[_0x39af4d(0x27a)](/\/config/,async _0x4930aa=>{const _0x47288e=_0x39af4d;if(!validateTelegram(_0x4930aa))return;tgBot[_0x47288e(0x1c3)]('callback_query'),tgBot['sendMessage'](_0x4930aa[_0x47288e(0x1ae)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x47288e(0x2af),'callback_data':_0x47288e(0x280)},{'text':_0x47288e(0x287),'callback_data':_0x47288e(0x264)},{'text':_0x47288e(0x1e2),'callback_data':_0x47288e(0x250)}]]}})[_0x47288e(0x1a5)](_0x4a99e5=>{telegramError(_0x4a99e5);}),tgBot['on'](_0x47288e(0x19a),async _0x4db38b=>{const _0x11c817=_0x47288e,_0x2cf87c=_0x4db38b[_0x11c817(0x1ac)],_0x255d0f=_0x4db38b[_0x11c817(0x25b)];tgBot[_0x11c817(0x284)](_0x4db38b['id'])[_0x11c817(0x1c0)](async()=>{const _0x433f4c=_0x11c817;_0x2cf87c=='orders'&&(updateSetting(_0x433f4c(0x1e5),_0x433f4c(0x280)),updateSetting('telegramEnabled',!![]),await tgBot[_0x433f4c(0x1ea)](_0x255d0f[_0x433f4c(0x1ae)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x433f4c(0x1a5)](_0x578b5c=>{telegramError(_0x578b5c);}));_0x2cf87c==_0x433f4c(0x264)&&(updateSetting('telegramEvents',_0x433f4c(0x264)),updateSetting(_0x433f4c(0x1f7),!![]),await tgBot[_0x433f4c(0x1ea)](_0x255d0f[_0x433f4c(0x1ae)]['id'],_0x433f4c(0x1d0))[_0x433f4c(0x1a5)](_0x522540=>{telegramError(_0x522540);}));_0x2cf87c=='all'&&(updateSetting(_0x433f4c(0x1e5),_0x433f4c(0x250)),updateSetting(_0x433f4c(0x1f7),!![]),await tgBot[_0x433f4c(0x1ea)](_0x255d0f['chat']['id'],_0x433f4c(0x22a))[_0x433f4c(0x1a5)](_0x28aa16=>{telegramError(_0x28aa16);}));if(!settings[_0x433f4c(0x214)])tgBot[_0x433f4c(0x1ea)](_0x255d0f[_0x433f4c(0x1ae)]['id'],_0x433f4c(0x191))[_0x433f4c(0x1a5)](_0x21379b=>{telegramError(_0x21379b);});}),tgBot[_0x11c817(0x1c3)](_0x11c817(0x19a));});}),tgBot['onText'](/\/status/,_0x560028=>{const _0xbaf281=_0x39af4d;if(!validateTelegram(_0x560028))return;let _0x2d7ec8='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0xbaf281(0x1da)](_0x19f220=>{const _0xae5729=_0xbaf281;_0x2d7ec8+=_0xae5729(0x28d)+_0x19f220[_0xae5729(0x270)]+_0xae5729(0x22e)+_0x19f220[_0xae5729(0x20a)]+':\x20'+_0x19f220[_0xae5729(0x2bb)]+_0xae5729(0x1cd)+_0x19f220[_0xae5729(0x28b)]+'\x0a';}),_0x2d7ec8+='\x0a',_0x2d7ec8+=_0xbaf281(0x2b3),_0x2d7ec8+=!settings[_0xbaf281(0x1f7)]?'Notifications\x20disabled\x0a':_0xbaf281(0x209),_0x2d7ec8+=settings['telegramEnabled']?settings[_0xbaf281(0x1e5)]==_0xbaf281(0x250)?_0xbaf281(0x215):_0xbaf281(0x25e)+settings['telegramEvents']+_0xbaf281(0x24f):'',tgBot[_0xbaf281(0x1ea)](_0x560028[_0xbaf281(0x1ae)]['id'],_0x2d7ec8,{'parse_mode':_0xbaf281(0x1b2)})[_0xbaf281(0x1a5)](_0x50d692=>{telegramError(_0x50d692);});}),tgBot[_0x39af4d(0x27a)](/\/restart/,_0x5ed7fe=>{const _0x164bb7=_0x39af4d;if(!validateTelegram(_0x5ed7fe))return;tgBot[_0x164bb7(0x1c3)]('callback_query');const _0x3c6026=getEnabledBots();if(_0x3c6026[_0x164bb7(0x1a3)]==0x0)tgBot[_0x164bb7(0x1ea)](_0x5ed7fe[_0x164bb7(0x1ae)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x164bb7(0x1a5)](_0x315b26=>{telegramError(_0x315b26);});else{if(_0x3c6026[_0x164bb7(0x1a3)]>0x1)_0x3c6026[_0x164bb7(0x22f)]({'botID':_0x164bb7(0x250)});let _0x557305=[],_0x19c6df=[];const _0x80739d=_0x3c6026[_0x164bb7(0x1a3)]%0x4==0x0||_0x3c6026['length']%0x4==0x3||_0x3c6026[_0x164bb7(0x1a3)]%0x3==0x1?0x4:0x3;let _0x4ea18f=0x0;_0x3c6026['forEach']((_0x4b2778,_0xfbe437)=>{const _0x421c49=_0x164bb7;if(_0xfbe437%_0x80739d==0x0)_0x19c6df=[];_0x19c6df[_0x421c49(0x22f)]({'text':_0x4b2778[_0x421c49(0x270)]=='all'?_0x421c49(0x265):_0x421c49(0x28d)+_0x4b2778['botID'],'callback_data':_0x4b2778[_0x421c49(0x270)]}),_0xfbe437%_0x80739d==0x0&&(_0x557305[_0x4ea18f]=_0x19c6df,_0x4ea18f++);}),tgBot[_0x164bb7(0x1ea)](_0x5ed7fe[_0x164bb7(0x1ae)]['id'],_0x164bb7(0x1a0),{'reply_markup':{'inline_keyboard':_0x557305}})[_0x164bb7(0x1a5)](_0x288d1a=>{telegramError(_0x288d1a);}),tgBot['on'](_0x164bb7(0x19a),async _0x4c0d0c=>{const _0x1c5c36=_0x164bb7,_0x2a0007=_0x4c0d0c[_0x1c5c36(0x1ac)],_0xefce1b=_0x4c0d0c['message'];tgBot[_0x1c5c36(0x284)](_0x4c0d0c['id'])['then'](async()=>{const _0x56c6e4=_0x1c5c36;if(_0x2a0007=='all'){if(settings[_0x56c6e4(0x1e5)]==_0x56c6e4(0x280))tgBot[_0x56c6e4(0x1ea)](_0xefce1b[_0x56c6e4(0x1ae)]['id'],_0x56c6e4(0x1a4))[_0x56c6e4(0x1a5)](_0x5d7850=>{telegramError(_0x5d7850);});config['forEach'](_0x2d504f=>{const _0x82b5fb=_0x56c6e4;restartBot(_0x2d504f[_0x82b5fb(0x270)]);});}else{if(settings[_0x56c6e4(0x1e5)]=='orders')tgBot[_0x56c6e4(0x1ea)](_0xefce1b[_0x56c6e4(0x1ae)]['id'],_0x56c6e4(0x233)+_0x2a0007)[_0x56c6e4(0x1a5)](_0x5744b8=>{telegramError(_0x5744b8);});restartBot(_0x2a0007);}}),tgBot['removeListener'](_0x1c5c36(0x19a));});}}),tgBot[_0x39af4d(0x27a)](/\/on/,_0x1843bf=>{const _0x4095cf=_0x39af4d;if(!validateTelegram(_0x1843bf))return;tgBot[_0x4095cf(0x1c3)](_0x4095cf(0x19a));const _0x5c0d31=getDisabledBots();if(_0x5c0d31[_0x4095cf(0x1a3)]==0x0)tgBot[_0x4095cf(0x1ea)](_0x1843bf[_0x4095cf(0x1ae)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x29d6bf=>{telegramError(_0x29d6bf);});else{if(_0x5c0d31[_0x4095cf(0x1a3)]>0x1)_0x5c0d31[_0x4095cf(0x22f)]({'botID':_0x4095cf(0x250)});let _0x262045=[],_0x4c3f71=[];const _0x136492=_0x5c0d31[_0x4095cf(0x1a3)]%0x4==0x0||_0x5c0d31[_0x4095cf(0x1a3)]%0x4==0x3||_0x5c0d31['length']%0x3==0x1?0x4:0x3;let _0x333e61=0x0;_0x5c0d31['forEach']((_0x1cd60a,_0x328da0)=>{const _0x48fc71=_0x4095cf;if(_0x328da0%_0x136492==0x0)_0x4c3f71=[];_0x4c3f71[_0x48fc71(0x22f)]({'text':_0x1cd60a[_0x48fc71(0x270)]==_0x48fc71(0x250)?_0x48fc71(0x265):'Bot\x20'+_0x1cd60a[_0x48fc71(0x270)],'callback_data':_0x1cd60a[_0x48fc71(0x270)]}),_0x328da0%_0x136492==0x0&&(_0x262045[_0x333e61]=_0x4c3f71,_0x333e61++);}),tgBot[_0x4095cf(0x1ea)](_0x1843bf[_0x4095cf(0x1ae)]['id'],_0x4095cf(0x210),{'reply_markup':{'inline_keyboard':_0x262045}})[_0x4095cf(0x1a5)](_0x2fc16f=>{telegramError(_0x2fc16f);}),tgBot['on'](_0x4095cf(0x19a),async _0x9fab15=>{const _0x3a369a=_0x4095cf,_0x331ed0=_0x9fab15[_0x3a369a(0x1ac)],_0x307f74=_0x9fab15[_0x3a369a(0x25b)];tgBot[_0x3a369a(0x284)](_0x9fab15['id'])[_0x3a369a(0x1c0)](async()=>{const _0x19f6b7=_0x3a369a;if(_0x331ed0==_0x19f6b7(0x250)){if(settings[_0x19f6b7(0x1e5)]==_0x19f6b7(0x280))tgBot[_0x19f6b7(0x1ea)](_0x307f74[_0x19f6b7(0x1ae)]['id'],_0x19f6b7(0x2b4))[_0x19f6b7(0x1a5)](_0x5c4b3f=>{telegramError(_0x5c4b3f);});_0x5c0d31[_0x19f6b7(0x1da)](_0x304d21=>{const _0x460491=_0x19f6b7;if(_0x304d21[_0x460491(0x270)]!=_0x460491(0x250))toggleBot(_0x304d21['botID'],toggleStatus(_0x304d21[_0x460491(0x270)]),_0x460491(0x2b8));});}else{if(settings['telegramEvents']==_0x19f6b7(0x280))tgBot['sendMessage'](_0x307f74[_0x19f6b7(0x1ae)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x331ed0)[_0x19f6b7(0x1a5)](_0xda309c=>{telegramError(_0xda309c);});toggleBot(_0x331ed0,toggleStatus(_0x331ed0),_0x19f6b7(0x2b8));}}),tgBot[_0x3a369a(0x1c3)](_0x3a369a(0x19a));});}}),tgBot[_0x39af4d(0x27a)](/\/off/,_0x4df4dd=>{const _0x241ca9=_0x39af4d;if(!validateTelegram(_0x4df4dd))return;tgBot[_0x241ca9(0x1c3)]('callback_query');const _0x496377=getEnabledBots();if(_0x496377[_0x241ca9(0x1a3)]==0x0)tgBot['sendMessage'](_0x4df4dd[_0x241ca9(0x1ae)]['id'],_0x241ca9(0x2bc))[_0x241ca9(0x1a5)](_0x5130f0=>{telegramError(_0x5130f0);});else{if(_0x496377['length']>0x1)_0x496377[_0x241ca9(0x22f)]({'botID':_0x241ca9(0x250)});let _0x352fe1=[],_0x524296=[];const _0xe576c7=_0x496377[_0x241ca9(0x1a3)]%0x4==0x0||_0x496377[_0x241ca9(0x1a3)]%0x4==0x3||_0x496377[_0x241ca9(0x1a3)]%0x3==0x1?0x4:0x3;let _0x3cb96b=0x0;_0x496377['forEach']((_0x265fab,_0x4748da)=>{const _0x446dd3=_0x241ca9;if(_0x4748da%_0xe576c7==0x0)_0x524296=[];_0x524296['push']({'text':_0x265fab[_0x446dd3(0x270)]==_0x446dd3(0x250)?_0x446dd3(0x265):_0x446dd3(0x28d)+_0x265fab[_0x446dd3(0x270)],'callback_data':_0x265fab[_0x446dd3(0x270)]}),_0x4748da%_0xe576c7==0x0&&(_0x352fe1[_0x3cb96b]=_0x524296,_0x3cb96b++);}),tgBot['sendMessage'](_0x4df4dd['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x352fe1}})[_0x241ca9(0x1a5)](_0x14c211=>{telegramError(_0x14c211);}),tgBot['on'](_0x241ca9(0x19a),async _0x2f5858=>{const _0x38b08b=_0x241ca9,_0x1b6bac=_0x2f5858[_0x38b08b(0x1ac)],_0x297870=_0x2f5858[_0x38b08b(0x25b)];tgBot[_0x38b08b(0x284)](_0x2f5858['id'])['then'](async()=>{const _0x513a5e=_0x38b08b;if(_0x1b6bac==_0x513a5e(0x250)){if(settings[_0x513a5e(0x1e5)]==_0x513a5e(0x280))tgBot[_0x513a5e(0x1ea)](_0x297870['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x513a5e(0x1a5)](_0x4607ab=>{telegramError(_0x4607ab);});_0x496377[_0x513a5e(0x1da)](_0x4f45b5=>{const _0x4cbe8e=_0x513a5e;if(_0x4f45b5[_0x4cbe8e(0x270)]!=_0x4cbe8e(0x250))toggleBot(_0x4f45b5[_0x4cbe8e(0x270)],toggleStatus(_0x4f45b5[_0x4cbe8e(0x270)]),_0x4cbe8e(0x2b8));});}else{if(settings[_0x513a5e(0x1e5)]==_0x513a5e(0x280))tgBot[_0x513a5e(0x1ea)](_0x297870[_0x513a5e(0x1ae)]['id'],_0x513a5e(0x231)+_0x1b6bac)[_0x513a5e(0x1a5)](_0x18295f=>{telegramError(_0x18295f);});toggleBot(_0x1b6bac,toggleStatus(_0x1b6bac),_0x513a5e(0x2b8));}}),tgBot[_0x38b08b(0x1c3)]('callback_query');});}}),tgBot[_0x39af4d(0x27a)](/\/disable/,_0x291b43=>{const _0x2e8666=_0x39af4d;if(!validateTelegram(_0x291b43))return;tgBot[_0x2e8666(0x1ea)](_0x291b43[_0x2e8666(0x1ae)]['id'],_0x2e8666(0x23e))[_0x2e8666(0x1a5)](_0x3ac232=>{telegramError(_0x3ac232);}),updateSetting(_0x2e8666(0x1f7),![]);}),tgBot[_0x39af4d(0x27a)](/\/help/,_0x233f1c=>{const _0x23476e=_0x39af4d;if(!validateTelegram(_0x233f1c))return;tgBot['sendMessage'](_0x233f1c[_0x23476e(0x1ae)]['id'],_0x2f2153)[_0x23476e(0x1a5)](_0x4fcf04=>{telegramError(_0x4fcf04);});}),tgBot['on']('polling_error',_0x5011c6=>{const _0x1ed1c6=_0x39af4d;_0x5011c6[_0x1ed1c6(0x1f6)]()['includes'](_0x1ed1c6(0x2b6))&&(logging(_0x1ed1c6(0x190)),tgBot[_0x1ed1c6(0x1e6)](),tgBot=null,io['to']('botmanager')[_0x1ed1c6(0x2c7)]('notification',_0x1ed1c6(0x190)));}),process[_0x39af4d(0x216)](_0x39af4d(0x258),()=>{const _0x593428=_0x39af4d;if(tgBot)tgBot[_0x593428(0x1e6)]();process['exit'](0x1);}),process[_0x39af4d(0x216)](_0x39af4d(0x202),()=>{const _0x4ba294=_0x39af4d;if(tgBot)tgBot['stopPolling']();process[_0x4ba294(0x213)](0x1);});}}function disableTelegram(){const _0x3f2d8a=_0x4e4f86;tgBot&&(tgBot[_0x3f2d8a(0x1e6)](),tgBot=null);}function _0x3f53(){const _0x32f2ed=['cancel-loading','Notifications\x20types:\x20','686380mppGnP','Login\x20rejected','/:bot/coins','bbUsername','disconnect','alerts','All\x20bots','removeAllListeners','encryptedUuid','new-disabled','clientip','server','fork','sortBy','1000','storeHeadless','-results.json','botID','getPortfolio','telegramUsername','\x20>\x20','Password\x20reset\x20rejected','reload','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','getFullYear','secure','Allow\x20login\x20from\x20IP\x20address\x20<b>','onText','use','update-bot','get','2FA\x20login\x20rejected','f2aRequired','orders','UA-192771731-1','yes','inherit','answerCallbackQuery','sign','cancelLoading','Alerts','settings','defaults','hasOwnProperty','live','delete-bot','Bot\x20','filter','User\x20has\x20been\x20validated','crypto','expiry','-performance.json','unlinkSync','1128177EEYnZz','2FA\x20required','username','error','login\x20token\x20generated','whitelist','sendFile','copyFileSync','starting\x20bot\x20|\x20Bot\x20','@analytics/google-analytics','find','RSA','Unauthorized\x20attempt\x20to\x20log\x20out','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','place-order','::ffff:127.0.0.1','21039MryVEB','login\x20token\x20valid','-config.json','token','13266fMnhqC','match','sockets','\x20minutes','bot-','Error:\x20Invalid\x20argument\x20','/:bot','Orders','get-starting-balances','Login\x20accepted','bb-settings.json','<b>Telegram\x20bot\x20status:</b>\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','add','404\x20Not\x20Found','function','stopped','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','store-configuration','status','No\x20bots\x20running\x20right\x20now','login\x20required','/status\x20-\x20show\x20bot(s)\x20status\x0a','padStart','reject','event','path','node-telegram-bot-api','enabled','Invalid\x20authentication\x20token\x20(2)','disabled','emit','Token\x20blacklisted','hex','enabled\x20Bot\x20','settings.','decrypt','No\x20authentication\x20token','getHours','getUTCHours','3775SrFzyn','reason','bot','getTime','timeshift','Invalid\x20Telegram\x20token','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','show','temporaryAccessAllowed','Unauthorized\x20login\x20attempt\x20(timeout)','lowdb/adapters/FileSync','6NWnqvf','disabled\x20Bot\x20','new','running','callback_query','127.0.0.1','getMinutes','Notifications\x20enabled','Temporary\x20access\x20rejected','conn','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','handshake','-----------------------------------------------------------------------------------','length','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','catch','send','error\x20while\x20deleting\x20config\x20files:\x20','initclient','invalid\x20credentials','telegramToken','Access\x20enabled\x20for\x20','data','index.html','chat','test','mkdirSync','log','HTML','readdirSync',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','update-bb','assign','analytics','420460NRMcbZ','NTBA_FIX_319','/:bot/history','isDirectory','Invalid\x20username\x20or\x20IP\x20address','temporary\x20token\x20generated','/restart\x20-\x20restart\x20bot(s)\x0a','max','then','bbPassword','generateKeyPairAsync','removeListener','build2','bcryptjs','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/:bot/configuration','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','kill','cloneDeep','referer','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','\x20/\x20','keys','login\x20not\x20required','Ok,\x20will\x20send\x20alert\x20notifications\x20only','socket.io','stop','version','createServer','entries','getMonth','pidExpireLogin','name','argv','forEach','You\x20can\x20use\x20the\x20following\x20commands:\x0a','/disable\x20-\x20disable\x20notifications\x0a','slice','exp','uuid','2FA\x20login\x20required','randomFillSync','All','version.json','headers','telegramEvents','stopPolling','allow','isValid','3SwhcTx','sendMessage','jsonwebtoken','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','split','parse','1308hRqPSj','</b>\x20?','search','get-logs','Invalid\x20authentication\x20token\x20(1)','hashSync','store','toString','telegramEnabled','temporary\x20access\x20not\x20allowed','ipc','remove','child_process','secret','express','************','access\x20timeout','telegram2FaApproval','bots','SIGTERM','getSeconds','1398wrLCUr','hybrid-crypto-js','starting\x20new\x20bot\x20|\x20Bot\x20','port','remoteAddress','Notifications\x20enabled\x0a','botname','isIPv4MappedAddress','access','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','includes','publicKey','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','logout','add-bot','exit','telegramChatId','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','once','write','temporary\x20access\x20timeout','/:bot/portfolio','logged\x20out','env','15\x20min','existsSync','2FA\x20login\x20token\x20generated','map','Unauthorized\x20attempt\x20to\x20store\x20configuration','value','yargs/yargs','login','::1','Unauthorized\x20attempt\x20to\x20get\x20logs','telegramIpApproval','user','/enable\x20-\x20enable\x20notifications\x0a','pidRefreshToken','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','telegram',',\x20must\x20be\x20a\x204\x20digit\x20number','password','\x20|\x20','push','type','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','privateKey','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','success','static','bb/','loginRequired','constructor','started','timestamp','Balance\x20Bot','backup/','default','Notifications\x20disabled','bb-secure.json','set','1823472yHjEGf','build','toIPv4MappedAddress','ipv6','connection',':\x20Bot\x20Mgr\x20>\x20','join','get-portfolio','getStartingBalances','compareSync','2FA','connected','Unauthorized\x20attempt\x20to\x20update\x20settings','getDate','\x20only\x0a','all','botmanager','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','listen','from','blacklist','16cSEWhg','Crypt','SIGINT','5\x20min','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','message','/:bot/support'];_0x3f53=function(){return _0x32f2ed;};return _0x3f53();}function sendTelegram(_0xd77db6,_0x4d08d1){const _0x384a4b=_0x4e4f86;if(settings[_0x384a4b(0x1f7)]){if(settings[_0x384a4b(0x1e5)]==_0x384a4b(0x250)||(_0x4d08d1['type']=='error'||_0x4d08d1[_0x384a4b(0x230)]==_0x384a4b(0x234))&&settings['telegramEvents']=='alerts'||_0x4d08d1[_0x384a4b(0x230)]=='order'&&settings[_0x384a4b(0x1e5)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x4d08d1['showname'])tgBot[_0x384a4b(0x1ea)](settings[_0x384a4b(0x214)],_0x4d08d1[_0x384a4b(0x20a)]+_0x384a4b(0x273)+_0x4d08d1[_0x384a4b(0x2c1)])['catch'](_0xa71756=>{telegramError(_0xa71756);});else tgBot[_0x384a4b(0x1ea)](settings[_0x384a4b(0x214)],_0x384a4b(0x28d)+_0xd77db6+_0x384a4b(0x273)+_0x4d08d1[_0x384a4b(0x2c1)])[_0x384a4b(0x1a5)](_0x2ab944=>{telegramError(_0x2ab944);});}}}}function getDeviceWithIp(_0x541f70){const _0x17a925=_0x4e4f86;return devices[_0x17a925(0x29e)](_0x1a20d6=>_0x1a20d6['ip']===_0x541f70);}function temporaryAccess2FA(_0x56087a,_0x5d1677){const _0x7e0ffa=_0x4e4f86;let _0x1bfb7e=new Date(),_0x3c9c70=![];if(lastIpApproval){if(_0x1bfb7e-lastIpApproval<0x1388)_0x3c9c70=!![];}lastIpApproval=new Date();if(_0x3c9c70)return;tgBot&&settings[_0x7e0ffa(0x214)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x7e0ffa(0x214)],_0x7e0ffa(0x2a1)+normalizeIP(_0x5d1677)[_0x7e0ffa(0x192)]+_0x7e0ffa(0x1f0),{'parse_mode':_0x7e0ffa(0x1b2),'reply_markup':{'inline_keyboard':[[{'text':_0x7e0ffa(0x259),'callback_data':'5'},{'text':_0x7e0ffa(0x21c),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x7e0ffa(0x2c0),'callback_data':'reject'}]]}})[_0x7e0ffa(0x1a5)](_0xafd70b=>{telegramError(_0xafd70b);}),tgBot['on'](_0x7e0ffa(0x19a),async _0x4e2658=>{const _0x2aa4da=_0x7e0ffa,_0x504e89=_0x4e2658[_0x2aa4da(0x1ac)],_0x3ac475=_0x4e2658[_0x2aa4da(0x25b)];tgBot[_0x2aa4da(0x284)](_0x4e2658['id'])['then'](async()=>{const _0x11d5c5=_0x2aa4da;devices[_0x56087a][_0x11d5c5(0x226)]={'clientip':_0x5d1677,'timestamp':new Date()[_0x11d5c5(0x18e)](),'expiry':_0x504e89},_0x504e89!=_0x11d5c5(0x2c0)?(await tgBot[_0x11d5c5(0x1ea)](_0x3ac475[_0x11d5c5(0x1ae)]['id'],_0x11d5c5(0x1ab)+_0x504e89+_0x11d5c5(0x2ab),{'parse_mode':_0x11d5c5(0x1b2)})[_0x11d5c5(0x1a5)](_0x404e99=>{telegramError(_0x404e99);}),io['to'](_0x56087a)[_0x11d5c5(0x2c7)]('status',{'access':{'allow':![],'reason':_0x11d5c5(0x275),'token':null}})):(await tgBot['sendMessage'](_0x3ac475[_0x11d5c5(0x1ae)]['id'],_0x11d5c5(0x19e))['catch'](_0x14465f=>{telegramError(_0x14465f);}),io['to'](_0x56087a)[_0x11d5c5(0x2c7)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x2aa4da(0x1c3)]('callback_query');}));}function loginAccess2FA(_0x580b32,_0x53056b){const _0x403325=_0x4e4f86;tgBot&&settings[_0x403325(0x214)]&&(tgBot[_0x403325(0x1c3)](_0x403325(0x19a)),tgBot['sendMessage'](settings['telegramChatId'],_0x403325(0x279)+normalizeIP(_0x53056b)[_0x403325(0x192)]+'</b>\x20?',{'parse_mode':_0x403325(0x1b2),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x403325(0x2c0),'callback_data':_0x403325(0x2c0)}]]}})[_0x403325(0x1a5)](_0x3dd57a=>{telegramError(_0x3dd57a);}),tgBot['on'](_0x403325(0x19a),async _0x4716ba=>{const _0x34f169=_0x403325,_0x1b1090=_0x4716ba[_0x34f169(0x1ac)],_0x26be9e=_0x4716ba[_0x34f169(0x25b)];tgBot[_0x34f169(0x284)](_0x4716ba['id'])[_0x34f169(0x1c0)](async()=>{const _0x2a5f9d=_0x34f169;devices[_0x580b32][_0x2a5f9d(0x200)]={'clientip':_0x53056b,'timestamp':new Date()[_0x2a5f9d(0x18e)](),'expiry':_0x1b1090},_0x1b1090!=_0x2a5f9d(0x2c0)?(await tgBot[_0x2a5f9d(0x1ea)](_0x26be9e[_0x2a5f9d(0x1ae)]['id'],_0x2a5f9d(0x2b1),{'parse_mode':_0x2a5f9d(0x1b2)})[_0x2a5f9d(0x1a5)](_0x5ce271=>{telegramError(_0x5ce271);}),io['to'](_0x580b32)[_0x2a5f9d(0x2c7)]('status',{'access':{'allow':![],'reason':_0x2a5f9d(0x275),'token':null}})):(await tgBot[_0x2a5f9d(0x1ea)](_0x26be9e[_0x2a5f9d(0x1ae)]['id'],_0x2a5f9d(0x260))[_0x2a5f9d(0x1a5)](_0x9d89d=>{telegramError(_0x9d89d);}),io['to'](_0x580b32)['emit'](_0x2a5f9d(0x2bb),{'access':{'allow':![],'reason':_0x2a5f9d(0x27e),'token':null}}));}),tgBot[_0x34f169(0x1c3)](_0x34f169(0x19a));}));}function getConfiguration(){const _0x416de8=_0x4e4f86;return dbConfig[_0x416de8(0x27d)](_0x416de8(0x201))[_0x416de8(0x26c)](_0x416de8(0x270))[_0x416de8(0x221)]()||[];}function getEnabledBots(){const _0x287bde=_0x4e4f86;return dbConfig[_0x287bde(0x27d)](_0x287bde(0x201))[_0x287bde(0x26c)](_0x287bde(0x270))['filter']({'status':_0x287bde(0x2c4)})[_0x287bde(0x221)]()||[];}function getDisabledBots(){const _0x16fa88=_0x4e4f86;return dbConfig['get']('bots')[_0x16fa88(0x26c)](_0x16fa88(0x270))[_0x16fa88(0x28e)]({'status':_0x16fa88(0x2c6)})[_0x16fa88(0x221)]()||[];}function getSettings(){const _0x4e5ac9=_0x4e4f86;return dbSettings[_0x4e5ac9(0x27d)](_0x4e5ac9(0x288))['value']()||{'timeshift':0x0};}function getSecure(){const _0x4040a4=_0x4e4f86;return dbSecure[_0x4040a4(0x27d)]('secure')[_0x4040a4(0x221)]()||{};}function getBlacklist(){const _0x331130=_0x4e4f86;return dbSecure[_0x331130(0x27d)]('blacklist')[_0x331130(0x221)]()||[];}function broadcastToBots(_0x5593b2,_0x4c8755){const _0x289d35=_0x4e4f86;config[_0x289d35(0x1da)](_0x2eff5f=>{const _0x4205f7=_0x289d35;if(_0x2eff5f[_0x4205f7(0x2bb)]=='enabled'&&_0x2eff5f[_0x4205f7(0x28b)]==_0x4205f7(0x199)){if(pid[_0x2eff5f[_0x4205f7(0x270)]])pid[_0x2eff5f[_0x4205f7(0x270)]][_0x4205f7(0x1a6)]({[_0x5593b2]:_0x4c8755});}});}function storeSettings(_0x477e84,_0x2efb04=![]){const _0x3ccf7f=_0x4e4f86;_0x477e84={...settings,..._0x477e84};if(_0x2efb04&&_0x477e84['bbPassword']!=_0x3ccf7f(0x1fe)&&_0x477e84[_0x3ccf7f(0x1c1)]!=''){const _0x43e8e1=crypt['decrypt'](secure[_0x3ccf7f(0x232)],_0x477e84[_0x3ccf7f(0x1c1)])[_0x3ccf7f(0x25b)][_0x3ccf7f(0x1ed)]('@')[0x0],_0x51944d=bcrypt[_0x3ccf7f(0x1f4)](_0x43e8e1,saltRounds);_0x477e84={..._0x477e84,'bbPassword':_0x51944d};}if(_0x2efb04&&_0x477e84['telegramToken']!='************'&&_0x477e84[_0x3ccf7f(0x1aa)]!=''){const _0x1c35cb=crypt[_0x3ccf7f(0x2cc)](secure['privateKey'],_0x477e84[_0x3ccf7f(0x1aa)])['message'][_0x3ccf7f(0x1ed)]('@')[0x0];_0x477e84={..._0x477e84,'telegramToken':_0x1c35cb};}const _0x2bcb6f=_0x477e84['telegramToken']!=_0x3ccf7f(0x1fe)&&_0x477e84[_0x3ccf7f(0x1aa)]!=settings[_0x3ccf7f(0x1aa)]||_0x477e84[_0x3ccf7f(0x272)]!=settings[_0x3ccf7f(0x272)],_0x363242=_0x477e84[_0x3ccf7f(0x1aa)]==''||_0x477e84[_0x3ccf7f(0x272)]=='';if(_0x2bcb6f)_0x477e84['telegramEvents']=_0x3ccf7f(0x250);for(const [_0x9b768a,_0x592630]of Object[_0x3ccf7f(0x1d5)](_0x477e84)){if(_0x9b768a==_0x3ccf7f(0x1aa)&&_0x592630==_0x3ccf7f(0x1fe)){_0x477e84[_0x3ccf7f(0x1aa)]=settings[_0x3ccf7f(0x1aa)];continue;};if(_0x9b768a==_0x3ccf7f(0x1c1)&&_0x592630==_0x3ccf7f(0x1fe)){_0x477e84[_0x3ccf7f(0x1c1)]=settings[_0x3ccf7f(0x1c1)];continue;};dbSettings['set'](_0x3ccf7f(0x2cb)+_0x9b768a,_0x592630)['write']();}settings=_0x477e84,io['to']('botmanager')[_0x3ccf7f(0x2c7)](_0x3ccf7f(0x288),cleanSettings()),broadcastToBots(_0x3ccf7f(0x18f),settings[_0x3ccf7f(0x18f)]);if(_0x2bcb6f&&!_0x363242)initTelegram();if(_0x2bcb6f&&_0x363242)disableTelegram();getAllClients()[_0x3ccf7f(0x1da)](_0x471a6b=>{const _0x427b08=_0x3ccf7f;getSocket(_0x471a6b['id'])[_0x427b08(0x2c7)]('status',{'access':{'allow':![],'reason':_0x427b08(0x275),'token':null}});});}function updateSetting(_0x56d962,_0x2788c8){const _0x7d855f=_0x4e4f86;dbSettings[_0x7d855f(0x240)](_0x7d855f(0x2cb)+_0x56d962,_0x2788c8)[_0x7d855f(0x217)](),settings=getSettings(),io['to'](_0x7d855f(0x251))[_0x7d855f(0x2c7)](_0x7d855f(0x288),cleanSettings());}function storeSecure(_0x4dcd37){const _0x4fcec8=_0x4e4f86;dbSecure[_0x4fcec8(0x27d)](_0x4fcec8(0x278))['push'](_0x4dcd37)[_0x4fcec8(0x217)](),secure=_0x4dcd37;}function addBlacklist(_0x526df5){const _0x38f201=_0x4e4f86;cleanBlacklist();let _0x415233;devices[_0x526df5][_0x38f201(0x226)]?_0x415233=Math[_0x38f201(0x1bf)](devices[_0x526df5][_0x38f201(0x226)][_0x38f201(0x291)],loginExpiry):_0x415233=loginExpiry,dbSecure[_0x38f201(0x27d)](_0x38f201(0x255))[_0x38f201(0x22f)]({'expiry':new Date()[_0x38f201(0x18e)]()+_0x415233*0x3c*0x3e8,'token':devices[_0x526df5][_0x38f201(0x20c)][_0x38f201(0x2a7)]})[_0x38f201(0x217)](),blacklist=dbSecure[_0x38f201(0x27d)](_0x38f201(0x255))[_0x38f201(0x221)]();}function cleanBlacklist(){const _0x428dd9=_0x4e4f86;let _0xeab906=dbSecure['get'](_0x428dd9(0x255))[_0x428dd9(0x1ca)]()['value'](),_0x3136db=new Date()[_0x428dd9(0x18e)]();_0xeab906['forEach'](_0x402efa=>{const _0x52b6af=_0x428dd9;_0x402efa['expiry']<_0x3136db&&dbSecure['get'](_0x52b6af(0x255))['remove']({'expiry':_0x402efa[_0x52b6af(0x291)]})['write']();});}function initStates(){let _0x293aba=getConfiguration();_0x293aba['forEach'](_0x547aa2=>{const _0x1743f6=_0x869a;_0x547aa2[_0x1743f6(0x28b)]=_0x1743f6(0x2b8);}),storeConfiguration(_0x293aba);}function onKeys(){const _0x54604d=new RSA();return new Promise(_0x4d5499=>{const _0x4b919b=_0x869a;_0x54604d[_0x4b919b(0x1c2)]()['then'](_0xb9476a=>{_0x4d5499(_0xb9476a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x26630f=_0x4e4f86;let _0x1262b7=getConfiguration(),_0x372d50=![];_0x1262b7[_0x26630f(0x1da)](_0x56f8e7=>{const _0x427b01=_0x26630f;if(_0x56f8e7[_0x427b01(0x2bb)]=='running')_0x56f8e7[_0x427b01(0x2bb)]=_0x427b01(0x2c4),_0x372d50=!![];else _0x56f8e7[_0x427b01(0x2bb)]==_0x427b01(0x2b8)&&(_0x56f8e7['status']=_0x427b01(0x2c6),_0x372d50=!![]);});if(_0x372d50)storeConfiguration(_0x1262b7);let _0x2f7506=getSecure();if(!_0x2f7506[_0x26630f(0x28a)](_0x26630f(0x1fc))){let _0x430f4c=await generateKeys();_0x2f7506[_0x26630f(0x20f)]=_0x430f4c[_0x26630f(0x20f)],_0x2f7506[_0x26630f(0x232)]=_0x430f4c['privateKey'],_0x2f7506[_0x26630f(0x1fc)]=crypto['randomBytes'](0x20)[_0x26630f(0x1f6)](_0x26630f(0x2c9));;storeSecure(_0x2f7506);}let _0x5f3e0e=getSettings();_0x372d50=![];!_0x5f3e0e[_0x26630f(0x28a)](_0x26630f(0x237))&&(_0x5f3e0e['loginRequired']=![],_0x5f3e0e[_0x26630f(0x262)]='',_0x5f3e0e[_0x26630f(0x1c1)]='',_0x5f3e0e[_0x26630f(0x27f)]=![],_0x372d50=!![]);!_0x5f3e0e[_0x26630f(0x28a)]('whitelistEnabled')&&(_0x5f3e0e['whitelistEnabled']=![],_0x5f3e0e[_0x26630f(0x299)]=[],_0x5f3e0e[_0x26630f(0x193)]=![],_0x372d50=!![]);if(!_0x5f3e0e[_0x26630f(0x28a)](_0x26630f(0x1f7))){if(_0x5f3e0e[_0x26630f(0x214)])_0x5f3e0e[_0x26630f(0x1f7)]=!![];else _0x5f3e0e[_0x26630f(0x1f7)]=![];_0x372d50=!![];}if(_0x372d50)storeSettings(_0x5f3e0e);}function _0x869a(_0x338d2e,_0x21120c){const _0x1605d0=_0x3f53();return _0x869a=function(_0x2928e3,_0x554c96){_0x2928e3=_0x2928e3-0x188;let _0x3f53a0=_0x1605d0[_0x2928e3];return _0x3f53a0;},_0x869a(_0x338d2e,_0x21120c);}function storeConfiguration(_0x24c899){const _0x4efac2=_0x4e4f86;dbConfig[_0x4efac2(0x27d)](_0x4efac2(0x201))['remove']()[_0x4efac2(0x217)](),dbConfig[_0x4efac2(0x27d)]('bots')[_0x4efac2(0x22f)](..._0x24c899)[_0x4efac2(0x217)](),config=_0x24c899;}function resetPassword(){const _0x5ec5e8=_0x4e4f86;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0x5ec5e8(0x1ea)](settings[_0x5ec5e8(0x214)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x5ec5e8(0x1b2),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x5ec5e8(0x282)},{'text':'no','callback_data':'no'}]]}})[_0x5ec5e8(0x1a5)](_0x21200e=>{telegramError(_0x21200e);}),tgBot['on'](_0x5ec5e8(0x19a),async _0x95ad1d=>{const _0x134c2a=_0x5ec5e8,_0x4e7069=_0x95ad1d['data'],_0x707940=_0x95ad1d[_0x134c2a(0x25b)];tgBot[_0x134c2a(0x284)](_0x95ad1d['id'])[_0x134c2a(0x1c0)](async()=>{const _0x1b5926=_0x134c2a;if(_0x4e7069!='no'){const _0x128fef=0xf,_0x34fccc=_0x1b5926(0x2b9),_0x2a4211=Array['from'](crypto[_0x1b5926(0x1e1)](new Uint32Array(_0x128fef)))[_0x1b5926(0x21f)](_0x211659=>_0x34fccc[_0x211659%_0x34fccc[_0x1b5926(0x1a3)]])[_0x1b5926(0x247)](''),_0x3d5eb4=bcrypt[_0x1b5926(0x1f4)](_0x2a4211,saltRounds);storeSettings({'bbPassword':_0x3d5eb4}),await tgBot[_0x1b5926(0x1ea)](_0x707940[_0x1b5926(0x1ae)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x2a4211,{'parse_mode':_0x1b5926(0x1b2)})[_0x1b5926(0x1a5)](_0x3a547b=>{telegramError(_0x3a547b);});}else await tgBot['sendMessage'](_0x707940[_0x1b5926(0x1ae)]['id'],_0x1b5926(0x274))[_0x1b5926(0x1a5)](_0xfe0f96=>{telegramError(_0xfe0f96);});}),tgBot[_0x134c2a(0x1c3)](_0x134c2a(0x19a));}));}function logging(_0x4408c7){const _0x227fa9=_0x4e4f86;console[_0x227fa9(0x1b1)](getTimeStamp()+_0x227fa9(0x246)+_0x4408c7);if(tgBot&&settings[_0x227fa9(0x214)]&&settings[_0x227fa9(0x1e5)]!='orders')tgBot['sendMessage'](settings[_0x227fa9(0x214)],'Bot\x20Mgr\x20>\x20'+_0x4408c7)['catch'](_0x3170c3=>{telegramError(_0x3170c3);});}function getServerTime(){const _0x5517cc=_0x4e4f86,_0x2770ef=new Date();return _0x2770ef[_0x5517cc(0x277)]()+'/'+(_0x2770ef[_0x5517cc(0x1d6)]()+0x1)[_0x5517cc(0x1f6)]()[_0x5517cc(0x2bf)](0x2,'0')+'/'+_0x2770ef['getDate']()['toString']()[_0x5517cc(0x2bf)](0x2,'0')+'\x20'+_0x2770ef[_0x5517cc(0x189)]()[_0x5517cc(0x1f6)]()['padStart'](0x2,'0')+':'+_0x2770ef[_0x5517cc(0x19c)]()[_0x5517cc(0x1f6)]()[_0x5517cc(0x2bf)](0x2,'0')+':'+_0x2770ef[_0x5517cc(0x203)]()[_0x5517cc(0x1f6)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x29dca2=_0x4e4f86,_0x49d8e7=shiftedTime();return _0x49d8e7[_0x29dca2(0x277)]()+'/'+(_0x49d8e7['getMonth']()+0x1)['toString']()[_0x29dca2(0x2bf)](0x2,'0')+'/'+_0x49d8e7[_0x29dca2(0x24e)]()[_0x29dca2(0x1f6)]()['padStart'](0x2,'0')+'\x20'+_0x49d8e7[_0x29dca2(0x189)]()[_0x29dca2(0x1f6)]()['padStart'](0x2,'0')+':'+_0x49d8e7[_0x29dca2(0x19c)]()[_0x29dca2(0x1f6)]()[_0x29dca2(0x2bf)](0x2,'0')+':'+_0x49d8e7[_0x29dca2(0x203)]()['toString']()[_0x29dca2(0x2bf)](0x2,'0');}function shiftedTime(){const _0x20433c=_0x4e4f86,_0x549888=new Date();let _0x341c1b=_0x549888;if(settings[_0x20433c(0x18f)]&&settings[_0x20433c(0x18f)]!==0x0)_0x341c1b=fns[_0x20433c(0x2b5)](_0x549888,{'hours':settings[_0x20433c(0x18f)]});return _0x341c1b;}function startScheduler(){const _0x21682d=_0x4e4f86;let _0x51444c=new Date()[_0x21682d(0x18a)]();_0x51444c==0x1&&backupConfigFiles();_0x51444c==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2fe6f0=_0x4e4f86;fs[_0x2fe6f0(0x1b3)](configpath,{'withFileTypes':!![]})[_0x2fe6f0(0x1da)](_0x41bb2e=>{const _0x18a842=_0x2fe6f0;if(!_0x41bb2e[_0x18a842(0x1bb)]())fs[_0x18a842(0x29b)](configpath+_0x41bb2e[_0x18a842(0x1d8)],configbackuppath+_0x41bb2e[_0x18a842(0x1d8)]);});}function triggerAnalytics(){analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x4f0756,_0x3585b8){const _0x591d6a=_0x4e4f86;if(_0x4f0756[_0x591d6a(0x296)]==settings[_0x591d6a(0x262)]&&bcrypt[_0x591d6a(0x24a)](_0x4f0756[_0x591d6a(0x22d)],settings[_0x591d6a(0x1c1)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x17d927=generateLoginToken(_0x3585b8);return{'allow':!![],'reason':_0x591d6a(0x298),'token':_0x17d927};}}else return{'allow':![],'reason':_0x591d6a(0x1a9),'token':null};}function refreshToken(_0x34ccb1){const _0x40dacf=_0x4e4f86,_0x33cbe9=generateLoginToken(_0x34ccb1);return{'allow':!![],'reason':_0x40dacf(0x298),'token':_0x33cbe9};}function validateAccess(_0x4c47da,_0x5ce907){const _0x5134de=_0x4e4f86;let _0x2ed377=devices[_0x5ce907]['ip'],_0x16a873;const _0x22c108=_0x59dbbf=>{const _0x50ce03=_0x869a;if(settings[_0x50ce03(0x237)]){if(settings[_0x50ce03(0x27f)]){if(telegram2FaApproved(_0x5ce907)){const _0xd632f6=generateLoginToken(_0x5ce907);return{'allow':!![],'reason':_0x50ce03(0x21e),'token':_0xd632f6};}else return{'allow':![],'reason':_0x50ce03(0x2bd),'token':null};}else return _0x16a873=validToken(_0x59dbbf,_0x5ce907),_0x16a873[_0x50ce03(0x28a)]('success')?{'allow':!![],'reason':_0x50ce03(0x2a5),'token':_0x59dbbf}:{'allow':![],'reason':_0x50ce03(0x2bd),'token':null};}else return{'allow':!![],'reason':_0x50ce03(0x1cf),'token':null};};if(settings['whitelistEnabled']){let _0x4a59aa=[...settings[_0x5134de(0x299)],_0x5134de(0x224),_0x5134de(0x2a3),_0x5134de(0x19b)];if(_0x4a59aa[_0x5134de(0x20e)](_0x2ed377))return _0x22c108(_0x4c47da);else{_0x16a873=validToken(_0x4c47da,_0x5ce907);if(_0x16a873[_0x5134de(0x28a)](_0x5134de(0x234)))return _0x22c108(_0x4c47da);else{if(telegramIpApproved(_0x5ce907)){const _0x261dd6=generateToken(_0x5ce907);return _0x16a873=_0x22c108(_0x4c47da),_0x16a873['allow']?{'allow':!![],'reason':_0x5134de(0x1bd),'token':_0x261dd6}:_0x16a873;}else return settings[_0x5134de(0x193)]?{'allow':![],'reason':_0x5134de(0x295),'token':null}:{'allow':![],'reason':_0x5134de(0x1f8),'token':null};}}}else return _0x22c108(_0x4c47da);}function timelyDecrypt(_0x35df56,_0x3eec16=!![]){const _0xe57c3a=_0x4e4f86;if(_0x35df56)try{const _0x3bdd81=crypt[_0xe57c3a(0x2cc)](secure[_0xe57c3a(0x232)],_0x35df56)[_0xe57c3a(0x25b)],_0x413f87=_0x3bdd81['split']('@')[0x0],_0x836cc3=_0x3bdd81[_0xe57c3a(0x1ed)]('@')[0x1],_0x284081=new Date()['getTime']();if(_0x3eec16){if(_0x284081-_0x836cc3<maxSecretAge*0x3e8)return _0x413f87;else return![];}else return _0x413f87;}catch(_0x1cbbe3){return![];}else return![];}const validToken=(_0x36d796,_0x242f28)=>{const _0x5fa2e=_0x4e4f86,_0x5e3ad8=devices[_0x242f28]['ip'];if(!_0x36d796)return{'error':_0x5fa2e(0x188)};for(let _0x9af0a5 of blacklist){if(_0x9af0a5['token']==_0x36d796)return{'error':_0x5fa2e(0x2c8)};}let _0x22d963;try{_0x22d963=jwt['verify'](_0x36d796,secure[_0x5fa2e(0x1fc)]+_0x242f28);}catch{return{'error':_0x5fa2e(0x1f3)};}if(!_0x22d963['hasOwnProperty'](_0x5fa2e(0x269))&&!_0x22d963[_0x5fa2e(0x28a)](_0x5fa2e(0x296))||!_0x22d963['hasOwnProperty'](_0x5fa2e(0x1de)))return{'error':_0x5fa2e(0x2c5)};if(!_0x22d963[_0x5fa2e(0x28a)](_0x5fa2e(0x296))&&_0x22d963['hasOwnProperty'](_0x5fa2e(0x269))){const {clientip:_0x58fc67}=_0x22d963;return _0x5e3ad8==_0x58fc67?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x22d963[_0x5fa2e(0x28a)](_0x5fa2e(0x296))&&_0x22d963[_0x5fa2e(0x28a)](_0x5fa2e(0x269))){const {username:_0x3215d4,clientip:_0x185a7e}=_0x22d963;return settings[_0x5fa2e(0x262)]==_0x3215d4&&_0x5e3ad8==_0x185a7e?{'success':_0x5fa2e(0x28f)}:{'error':_0x5fa2e(0x1bc)};}}},generateLoginToken=_0x149076=>{const _0x3aef9b=_0x4e4f86;if(_0x149076){const _0x3c0c75=devices[_0x149076]['ip'];return jwt[_0x3aef9b(0x285)]({'username':settings[_0x3aef9b(0x262)],'clientip':_0x3c0c75},secure[_0x3aef9b(0x1fc)]+_0x149076,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2fd434=>{const _0x4f017e=_0x4e4f86;if(_0x2fd434){const _0x5eec3d=devices[_0x2fd434]['ip'];return jwt['sign']({'clientip':_0x5eec3d},secure['secret']+_0x2fd434,{'expiresIn':devices[_0x2fd434]['telegramIpApproval'][_0x4f017e(0x291)]*0x3c});}else return![];},telegramIpApproved=_0x293107=>{const _0x72e051=_0x4e4f86;let _0x2657ef=![];return devices[_0x293107]['telegramIpApproval']&&devices[_0x293107][_0x72e051(0x226)][_0x72e051(0x291)]!=_0x72e051(0x2c0)&&(_0x2657ef=devices[_0x293107]['telegramIpApproval'][_0x72e051(0x269)]==devices[_0x293107]['ip']&&new Date()[_0x72e051(0x18e)]()-devices[_0x293107]['telegramIpApproval'][_0x72e051(0x23a)]<devices[_0x293107][_0x72e051(0x226)][_0x72e051(0x291)]*0x3c*0x3e8),_0x2657ef;},telegram2FaApproved=_0x7be6c8=>{const _0xb1f3a1=_0x4e4f86;let _0x402e67=![];return devices[_0x7be6c8][_0xb1f3a1(0x200)]&&devices[_0x7be6c8]['telegram2FaApproval']['expiry']!=_0xb1f3a1(0x2c0)&&(_0x402e67=devices[_0x7be6c8]['telegram2FaApproval'][_0xb1f3a1(0x269)]==devices[_0x7be6c8]['ip']&&new Date()[_0xb1f3a1(0x18e)]()-devices[_0x7be6c8]['telegram2FaApproval'][_0xb1f3a1(0x23a)]<devices[_0x7be6c8][_0xb1f3a1(0x200)][_0xb1f3a1(0x291)]*0x3c*0x3e8),_0x402e67;},normalizeIP=_0x300fd3=>{const _0x43c42a=_0x4e4f86;let _0x11b940=null,_0x41673b=null;if(ipaddr[_0x43c42a(0x1e8)](_0x300fd3)){const _0x86aeff=ipaddr[_0x43c42a(0x1ee)](_0x300fd3);_0x86aeff['kind']()===_0x43c42a(0x244)?(_0x86aeff[_0x43c42a(0x20b)]()&&(_0x11b940=_0x86aeff['toIPv4Address']()[_0x43c42a(0x1f6)]()),_0x41673b=_0x86aeff[_0x43c42a(0x1f6)]()):(_0x11b940=_0x86aeff[_0x43c42a(0x1f6)](),_0x41673b=_0x86aeff[_0x43c42a(0x243)]()['toString']());}return{'show':_0x11b940?_0x11b940:_0x41673b,'store':_0x41673b};};