const _0xf01a4f=_0x5e41;(function(_0x48cc0a,_0x2067a0){const _0xd3280b=_0x5e41,_0x5c696c=_0x48cc0a();while(!![]){try{const _0x1a85a6=-parseInt(_0xd3280b(0x1a7))/0x1*(-parseInt(_0xd3280b(0x2bd))/0x2)+parseInt(_0xd3280b(0x18c))/0x3*(parseInt(_0xd3280b(0x30d))/0x4)+parseInt(_0xd3280b(0x278))/0x5*(parseInt(_0xd3280b(0x176))/0x6)+-parseInt(_0xd3280b(0x27d))/0x7*(parseInt(_0xd3280b(0x1dd))/0x8)+parseInt(_0xd3280b(0x307))/0x9*(parseInt(_0xd3280b(0x199))/0xa)+-parseInt(_0xd3280b(0x24d))/0xb*(parseInt(_0xd3280b(0x183))/0xc)+-parseInt(_0xd3280b(0x334))/0xd*(-parseInt(_0xd3280b(0x186))/0xe);if(_0x1a85a6===_0x2067a0)break;else _0x5c696c['push'](_0x5c696c['shift']());}catch(_0x328025){_0x5c696c['push'](_0x5c696c['shift']());}}}(_0x5672,0xe8a3b));const _0x3f8f32=function(){let _0x1640a7=!![];return function(_0x10b446,_0x3dadf6){const _0x9df1d6=_0x1640a7?function(){const _0x428bbc=_0x5e41;if(_0x3dadf6){const _0x148288=_0x3dadf6[_0x428bbc(0x294)](_0x10b446,arguments);return _0x3dadf6=null,_0x148288;}}:function(){};return _0x1640a7=![],_0x9df1d6;};}(),_0x42372c=_0x3f8f32(this,function(){const _0x4b5d6a=_0x5e41;return _0x42372c[_0x4b5d6a(0x33d)]()[_0x4b5d6a(0x236)](_0x4b5d6a(0x1ac))['toString']()[_0x4b5d6a(0x22a)](_0x42372c)[_0x4b5d6a(0x236)]('(((.+)+)+)+$');});_0x42372c();'use strict';process[_0xf01a4f(0x2b9)][_0xf01a4f(0x262)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0xf01a4f(0x197)),low=require(_0xf01a4f(0x2d5)),FileSync=require(_0xf01a4f(0x1a0)),path=require(_0xf01a4f(0x314)),crypto=require(_0xf01a4f(0x26f)),Crypt=require(_0xf01a4f(0x297))[_0xf01a4f(0x2cb)],RSA=require('hybrid-crypto-js')[_0xf01a4f(0x1f5)],bcrypt=require(_0xf01a4f(0x18e)),jwt=require('jsonwebtoken'),ipaddr=require(_0xf01a4f(0x2c0)),argv=require(_0xf01a4f(0x2ba))(process[_0xf01a4f(0x2df)][_0xf01a4f(0x188)](0x2))[_0xf01a4f(0x2df)],uuidRandom=require(_0xf01a4f(0x33e)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0xf01a4f(0x1e1)),axios=require(_0xf01a4f(0x269)),{GraphQLClient,gql}=require(_0xf01a4f(0x17b)),util=require(_0xf01a4f(0x20d)),fileUpload=require(_0xf01a4f(0x24c)),PORT=argv[_0xf01a4f(0x225)]||_0xf01a4f(0x173),pattern=/^[0-9]{2,4}$/;!pattern[_0xf01a4f(0x2de)](PORT)&&(console[_0xf01a4f(0x1ea)]('Error:\x20Invalid\x20argument\x20'+PORT+_0xf01a4f(0x1e4)),process[_0xf01a4f(0x192)](0x1));const HOST=argv[_0xf01a4f(0x24f)]||null,userID=argv[_0xf01a4f(0x187)]||'',debugging=argv['d']||![];let bbpath=_0xf01a4f(0x1d2),bbpath2='';const botfile=_0xf01a4f(0x30b),configfile='bb-config.json',settingsfile=_0xf01a4f(0x285),securefile=_0xf01a4f(0x234),maxBackups=0xa;let validInstallation=!![];!fs[_0xf01a4f(0x190)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xf01a4f(0x19b)),configpath=userID?bbpath+_0xf01a4f(0x1de)+userID+'/':bbpath+_0xf01a4f(0x1de),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0xf01a4f(0x196),zippath=userID?bbpath+_0xf01a4f(0x28d)+userID+'/':bbpath+_0xf01a4f(0x28d),loggerfile=fs['createWriteStream'](logspath+_0xf01a4f(0x2a7),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0xf01a4f(0x2a5);!fs[_0xf01a4f(0x190)](configpath)&&fs[_0xf01a4f(0x315)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0xf01a4f(0x315)](configbackuppath);!fs[_0xf01a4f(0x190)](logspath)&&fs[_0xf01a4f(0x315)](logspath);!fs[_0xf01a4f(0x190)](zippath)&&fs[_0xf01a4f(0x315)](zippath);!fs['existsSync'](temppath)&&fs[_0xf01a4f(0x315)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xf01a4f(0x2cf)]({'bots':[]})[_0xf01a4f(0x185)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xf01a4f(0x2cf)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xf01a4f(0x2b5)}})[_0xf01a4f(0x185)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0xf01a4f(0x185)]();let crypt=new Crypt({'md':_0xf01a4f(0x20b),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0xf01a4f(0x184)](_0xf01a4f(0x1a3),{'host':_0xf01a4f(0x172)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xf01a4f(0x1b1)]&&settings['telegramToken']!=''&&settings[_0xf01a4f(0x2ec)]&&settings[_0xf01a4f(0x2ec)]!='')initTelegram();const logger={'screen':_0x5b8907=>{const _0xc63eb=_0xf01a4f;console[_0xc63eb(0x1ea)](_0x5b8907);},'simple':_0x26fbb2=>{const _0x5cf676=_0xf01a4f;console[_0x5cf676(0x1ea)](_0x26fbb2),loggerfile[_0x5cf676(0x185)](util[_0x5cf676(0x29b)](_0x26fbb2)+'\x0a');},'full':async _0x4cb8aa=>{const _0x3ac6fc=_0xf01a4f,_0xdc77d9=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4cb8aa;console[_0x3ac6fc(0x1ea)](_0xdc77d9),loggerfile[_0x3ac6fc(0x185)](util[_0x3ac6fc(0x29b)](_0xdc77d9)+'\x0a');if(tgBot&&settings[_0x3ac6fc(0x1b8)]&&settings['telegramEvents']!=_0x3ac6fc(0x1fa))await tgBot[_0x3ac6fc(0x2fe)](settings['telegramChatId'],_0x3ac6fc(0x18d)+_0x4cb8aa)[_0x3ac6fc(0x1bd)](_0x101ba9=>{telegramError(_0x101ba9);});},'debug':async(_0x584b44,_0x3f856e='')=>{const _0x5a48ba=_0xf01a4f,_0x3fd7fe=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x584b44;if(debugging)console['log'](_0x3fd7fe);loggerfile[_0x5a48ba(0x185)](util[_0x5a48ba(0x29b)](_0x3fd7fe)+'\x0a');if(_0x3f856e){if(debugging)console[_0x5a48ba(0x1ea)](_0x3f856e);loggerfile[_0x5a48ba(0x185)](util['format'](_0x3f856e)+'\x0a');}}};process['on']('uncaughtException',function(_0x19adf2){const _0x51db2a=_0xf01a4f;logger[_0x51db2a(0x1ba)](_0x19adf2);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xf01a4f(0x194)),app=express(),http=require(_0xf01a4f(0x26d))[_0xf01a4f(0x202)](app);app[_0xf01a4f(0x22c)](fileUpload({'useTempFiles':!![]})),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x243),async(_0x19d247,_0x127032)=>{const _0x394e76=_0xf01a4f,_0x446388=_0x19d247[_0x394e76(0x1fc)][_0x394e76(0x1e9)],_0x3de651=getClientsWithBotID(_0x394e76(0x231)),_0x4eb629=_0x19d247[_0x394e76(0x30a)][_0x394e76(0x21c)],_0x59e65b=timelyDecrypt(_0x4eb629,![]),_0x42641d=_0x3de651['find'](_0x342f5f=>_0x342f5f[_0x394e76(0x21c)]==_0x59e65b);if(_0x42641d){const _0x3f20c0=normalizeIP(_0x19d247['socket'][_0x394e76(0x33a)])[_0x394e76(0x311)],_0x1063a2=_0x19d247[_0x394e76(0x30a)][_0x394e76(0x299)];if(validateAccess(_0x1063a2,_0x59e65b,_0x3f20c0)[_0x394e76(0x18f)])_0x446388=='backup'&&await backupConfigFiles(),await zipFiles(_0x446388),_0x127032[_0x394e76(0x220)](zippath+(_0x446388+_0x394e76(0x283)),_0x3ddcdc=>{const _0x4a526f=_0x394e76;_0x3ddcdc&&(logger[_0x4a526f(0x2f6)](_0x4a526f(0x1e7)+_0x446388),logger[_0x4a526f(0x1ba)](_0x3ddcdc));});else logger[_0x394e76(0x2f6)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x446388+_0x394e76(0x1f4));}else logger[_0x394e76(0x2f6)](_0x394e76(0x1c0)+_0x446388+_0x394e76(0x17f));}),app[_0xf01a4f(0x193)]('/upload-backup',async(_0x4ff26a,_0x404346)=>{const _0x12a1b8=_0xf01a4f,_0x176910=getClientsWithBotID(_0x12a1b8(0x231)),_0x3687dc=_0x4ff26a[_0x12a1b8(0x30a)][_0x12a1b8(0x21c)],_0xa11720=timelyDecrypt(_0x3687dc,![]),_0x4e6dea=_0x176910[_0x12a1b8(0x1e6)](_0xd3227e=>_0xd3227e[_0x12a1b8(0x21c)]==_0xa11720);logger['debug']('Backup\x20file\x20uploaded');if(_0x4e6dea){const _0x4dac72=normalizeIP(_0x4ff26a[_0x12a1b8(0x332)][_0x12a1b8(0x33a)])[_0x12a1b8(0x311)],_0xd4fd0=_0x4ff26a[_0x12a1b8(0x30a)]['tkn'];if(validateAccess(_0xd4fd0,_0xa11720,_0x4dac72)[_0x12a1b8(0x18f)]){if(_0x4ff26a[_0x12a1b8(0x277)]){const _0x22786c=_0x4ff26a['files'][_0x12a1b8(0x1ef)];await _0x22786c['mv'](temppath+_0x22786c['name']),_0x404346[_0x12a1b8(0x329)]({'status':!![],'message':_0x12a1b8(0x19f)});const _0x4bca3d=getBotsWithMode();_0x4bca3d['length']>0x0?confirmRestore(temppath,_0x22786c['name']):unzipFile(temppath,_0x22786c[_0x12a1b8(0x1c9)]);}}else logger[_0x12a1b8(0x2f6)](_0x12a1b8(0x200));}else logger[_0x12a1b8(0x2f6)](_0x12a1b8(0x252));}),app[_0xf01a4f(0x22c)](express[_0xf01a4f(0x2b8)](path['join'](__dirname,bbpath2,'build2'))),app[_0xf01a4f(0x22c)](express[_0xf01a4f(0x2b8)](path[_0xf01a4f(0x1c2)](__dirname,bbpath2,_0xf01a4f(0x1c6)))),app[_0xf01a4f(0x1cd)]('/',function(_0x4201d6,_0x465bdd){const _0x2b84d8=_0xf01a4f;_0x465bdd[_0x2b84d8(0x1fb)](path[_0x2b84d8(0x1c2)](__dirname,bbpath2,_0x2b84d8(0x258),'index.html'));}),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x21a),function(_0x1d8b39,_0x4f2eda){const _0x9e0a26=_0xf01a4f;_0x4f2eda['sendFile'](path[_0x9e0a26(0x1c2)](__dirname,bbpath2,_0x9e0a26(0x1c6),_0x9e0a26(0x2aa)));}),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x22d),(_0x3fb98e,_0x286720)=>{const _0x4348a9=_0xf01a4f;_0x286720[_0x4348a9(0x1fb)](path['join'](__dirname,bbpath2,'build',_0x4348a9(0x2aa)));}),app['get']('/:bot/performance',(_0x52a984,_0x733e58)=>{const _0x54bf7a=_0xf01a4f;_0x733e58[_0x54bf7a(0x1fb)](path['join'](__dirname,bbpath2,'build',_0x54bf7a(0x2aa)));}),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x317),(_0x3369ff,_0x41eb63)=>{const _0x43e49d=_0xf01a4f;_0x41eb63['sendFile'](path[_0x43e49d(0x1c2)](__dirname,bbpath2,_0x43e49d(0x1c6),'index.html'));}),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x257),(_0x409280,_0x2d6c74)=>{const _0x1e7f7e=_0xf01a4f;_0x2d6c74[_0x1e7f7e(0x1fb)](path[_0x1e7f7e(0x1c2)](__dirname,bbpath2,_0x1e7f7e(0x1c6),_0x1e7f7e(0x2aa)));}),app[_0xf01a4f(0x1cd)](_0xf01a4f(0x2c8),(_0x2496fc,_0x1963e4)=>{const _0x4a6508=_0xf01a4f;_0x1963e4[_0x4a6508(0x1fb)](path['join'](__dirname,bbpath2,_0x4a6508(0x1c6),_0x4a6508(0x2aa)));}),app['get'](_0xf01a4f(0x2be),(_0x34338f,_0x1b318d)=>{const _0x4a9196=_0xf01a4f;_0x1b318d[_0x4a9196(0x1fb)](path['join'](__dirname,bbpath2,'build',_0x4a9196(0x2aa)));});if(HOST)http[_0xf01a4f(0x2e4)](PORT,HOST);else http[_0xf01a4f(0x2e4)](PORT);const io=require(_0xf01a4f(0x2ad))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x5a2c6b=_0xf01a4f;logger[_0x5a2c6b(0x1ba)](''),logger[_0x5a2c6b(0x1ba)]('-----------------------------------------------------------------------------------'),await logger[_0x5a2c6b(0x2f6)](_0x5a2c6b(0x1d1)+PORT),logger[_0x5a2c6b(0x1ba)](_0x5a2c6b(0x1ca));if(config['length']!=0x0)for(const _0x19d404 of config){if(_0x19d404['status']==_0x5a2c6b(0x263)||_0x19d404[_0x5a2c6b(0x1b6)]=='new')await logger[_0x5a2c6b(0x2f6)](_0x5a2c6b(0x2e9)+_0x19d404[_0x5a2c6b(0x201)]+_0x5a2c6b(0x2cc)+_0x19d404[_0x5a2c6b(0x25b)]),startBot([_0x19d404[_0x5a2c6b(0x201)],userID],{'cwd':bbpath},function(_0x40608f){if(_0x40608f)logger['full'](_0x40608f);});else(_0x19d404['status']==_0x5a2c6b(0x344)||_0x19d404[_0x5a2c6b(0x1b6)]==_0x5a2c6b(0x17c))&&await logger[_0x5a2c6b(0x2f6)](_0x5a2c6b(0x292)+_0x19d404[_0x5a2c6b(0x201)]+'\x20|\x20'+_0x19d404['botname']);}else!newBot&&logger['simple'](_0x5a2c6b(0x2bc));if(newBot)addBot();logger[_0x5a2c6b(0x1ba)](_0x5a2c6b(0x1ca)),logger[_0x5a2c6b(0x1ba)]('');}function startSocket(){io['on']('connection',_0x4a2aa2=>{const _0xb189a7=_0x5e41;let _0x2fd32b,_0x4b01fd,_0x198fdd,_0x1206ae,_0x243364;const _0x1c4ea3=_0x4a2aa2[_0xb189a7(0x1f9)][_0xb189a7(0x30a)][_0xb189a7(0x17d)];_0x4b01fd=_0x1c4ea3['match'](/bot[0-9]{3}/);if(_0x4b01fd)_0x198fdd=_0x4b01fd[0x0]['match'](/[0-9]{3}/);if(_0x198fdd)_0x2fd32b=_0x198fdd[0x0];else _0x2fd32b=_0xb189a7(0x231);const _0x171edd=_0x4a2aa2[_0xb189a7(0x1f9)]['auth']['encryptedUuid'];if(!_0x171edd)_0x4a2aa2[_0xb189a7(0x29a)](_0xb189a7(0x1b6),{'publicKey':secure['publicKey']});else{_0x1206ae=timelyDecrypt(_0x171edd,![]);if(!_0x1206ae)_0x4a2aa2[_0xb189a7(0x29a)]('status',{'publicKey':secure[_0xb189a7(0x2dd)]});else{_0x243364=normalizeIP(_0x4a2aa2[_0xb189a7(0x208)][_0xb189a7(0x33a)])[_0xb189a7(0x311)];if(!devices[_0x1206ae])devices[_0x1206ae]={'uuid':_0x1206ae,'access':{'token':null}};devices[_0x1206ae]['ip']=_0x243364;const _0x59c0e0=addClient(_0x4a2aa2['id'],_0x1206ae,_0x2fd32b);setAccess(_0x59c0e0),emitMessages(),_0x4a2aa2['on'](_0xb189a7(0x30e),_0x3b862e=>{const _0x113d74=_0xb189a7,_0x1834ec=timelyDecrypt(_0x3b862e[_0x113d74(0x276)]);if(_0x1834ec){_0x3b862e={'username':_0x3b862e[_0x113d74(0x2c4)],'password':_0x1834ec},devices[_0x1206ae][_0x113d74(0x217)]=validateCredentials(_0x3b862e,_0x1206ae);if(devices[_0x1206ae][_0x113d74(0x217)][_0x113d74(0x18f)]==![]&&devices[_0x1206ae]['access'][_0x113d74(0x2f2)]=='2FA\x20login\x20required')_0x4a2aa2[_0x113d74(0x29a)](_0x113d74(0x1b6),{'access':devices[_0x1206ae][_0x113d74(0x217)]}),loginAccess2FA(_0x1206ae,_0x243364);else{if(devices[_0x1206ae][_0x113d74(0x217)]['allow']==![]&&devices[_0x1206ae][_0x113d74(0x217)][_0x113d74(0x2f2)]==_0x113d74(0x29d))_0x4a2aa2[_0x113d74(0x29a)]('status',{'access':devices[_0x1206ae]['access']});else devices[_0x1206ae][_0x113d74(0x217)][_0x113d74(0x18f)]&&devices[_0x1206ae]['access'][_0x113d74(0x2f2)]==_0x113d74(0x2d7)&&(getClientsWithUuid(_0x1206ae)[_0x113d74(0x270)](_0x42c9a2=>{setAccess(_0x42c9a2);}),logger[_0x113d74(0x320)](_0x113d74(0x1af)+_0x1206ae[_0x113d74(0x188)](-0x8)),setTokenRefresh(_0x1206ae),setSessionTimeout(_0x113d74(0x30e),_0x1206ae));}}else logger[_0x113d74(0x2f6)](_0x113d74(0x1f7));}),_0x4a2aa2['on'](_0xb189a7(0x2f5),()=>{resetPassword();}),_0x4a2aa2['on']('disconnect',_0x498106=>{removeClient(_0x4a2aa2['id']);}),_0x2fd32b==_0xb189a7(0x231)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x230d14){const _0x4316ed=_0xf01a4f;if(_0x230d14!=_0x4316ed(0x231)&&config[_0x4316ed(0x1ab)]!=''){if(pid[_0x230d14])pid[_0x230d14]['send']({'function':_0x4316ed(0x313),'args':null});}}function reloadBotManager(){const _0x94b705=_0xf01a4f;getClientsWithBotID(_0x94b705(0x231))[_0x94b705(0x270)](_0x14b69c=>{const _0x5b3fb3=_0x94b705;getSocket(_0x14b69c['id'])[_0x5b3fb3(0x29a)](_0x5b3fb3(0x1b6),{'access':{'allow':![],'reason':_0x5b3fb3(0x1c8),'token':null}});});}function getSocket(_0x5b394d){const _0x4978bd=_0xf01a4f;return io[_0x4978bd(0x26b)][_0x4978bd(0x26b)]['get'](_0x5b394d);}function setAccess(_0x452b9b){const _0x147cbb=_0xf01a4f,_0x26ab14=getSocket(_0x452b9b['id']),_0x5114c6=_0x452b9b['uuid'],_0x2b53f1=_0x452b9b[_0x147cbb(0x1e5)];devices[_0x5114c6][_0x147cbb(0x217)]=validateAccess(devices[_0x5114c6][_0x147cbb(0x217)][_0x147cbb(0x1dc)],_0x5114c6),logger['debug']('Setting\x20access:\x20'+devices[_0x5114c6]['access'][_0x147cbb(0x2f2)]+_0x147cbb(0x2af)+_0x452b9b['id'][_0x147cbb(0x188)](-0x8)+_0x147cbb(0x228)+_0x5114c6['slice'](-0x8)),_0x26ab14['join'](_0x5114c6);if(devices[_0x5114c6][_0x147cbb(0x217)][_0x147cbb(0x18f)]){_0x26ab14[_0x147cbb(0x1c2)](_0x2b53f1);if(_0x2b53f1=='botmanager')initializeSocketBotManager(_0x26ab14);else initializeSocketBot(_0x26ab14);initClient(_0x2b53f1);}devices[_0x5114c6][_0x147cbb(0x217)]['token']&&devices[_0x5114c6][_0x147cbb(0x217)][_0x147cbb(0x2f2)]==_0x147cbb(0x281)&&setSessionTimeout(_0x147cbb(0x2d6),_0x5114c6),devices[_0x5114c6][_0x147cbb(0x217)]['token']&&devices[_0x5114c6]['access'][_0x147cbb(0x2f2)]==_0x147cbb(0x312)&&setSessionTimeout('login',_0x5114c6),_0x26ab14['emit']('status',{'status':_0x452b9b[_0x147cbb(0x1cc)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5114c6][_0x147cbb(0x217)],'externalip':devices[_0x5114c6]['ip'],'publicKey':secure[_0x147cbb(0x2dd)],'userid':settings[_0x147cbb(0x324)],'validInstallation':validInstallation}),devices[_0x5114c6][_0x147cbb(0x217)][_0x147cbb(0x18f)]==![]&&devices[_0x5114c6][_0x147cbb(0x217)][_0x147cbb(0x2f2)]=='2FA\x20required'&&temporaryAccess2FA(_0x5114c6,devices[_0x5114c6]['ip']);}function setSessionTimeout(_0x44dd70,_0x5ea6e9){const _0x487b66=_0xf01a4f;let _0x428ac7;if(_0x44dd70=='login')_0x428ac7=loginExpiry*0x3c*0x3e8;else _0x428ac7=devices[_0x5ea6e9]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x5ea6e9][_0x487b66(0x27a)][_0x487b66(0x1be)]);if(devices[_0x5ea6e9][_0x487b66(0x2fa)])clearTimeout(devices[_0x5ea6e9][_0x487b66(0x2fa)]);devices[_0x5ea6e9][_0x487b66(0x2fa)]=setTimeout(()=>{const _0x58e581=_0x487b66;if(devices[_0x5ea6e9]['pidRefreshToken'])clearTimeout(devices[_0x5ea6e9][_0x58e581(0x316)]);removeSocketListeners(_0x5ea6e9),addBlacklist(_0x5ea6e9),devices[_0x5ea6e9][_0x58e581(0x27a)]=null,devices[_0x5ea6e9][_0x58e581(0x287)]=null,devices[_0x5ea6e9][_0x58e581(0x217)][_0x58e581(0x1dc)]=null,logger[_0x58e581(0x320)]('Session\x20expired\x20for\x20user\x20...'+_0x5ea6e9['slice'](-0x8)),devices[_0x5ea6e9][_0x58e581(0x217)]=validateAccess(devices[_0x5ea6e9]['access']['token'],_0x5ea6e9),!(devices[_0x5ea6e9][_0x58e581(0x217)][_0x58e581(0x18f)]&&devices[_0x5ea6e9][_0x58e581(0x217)][_0x58e581(0x2f2)]==_0x58e581(0x2b1))&&(_0x44dd70=='login'?io['to'](_0x5ea6e9)[_0x58e581(0x29a)](_0x58e581(0x1b6),{'access':{'allow':![],'reason':_0x58e581(0x256),'token':null}}):io['to'](_0x5ea6e9)[_0x58e581(0x29a)](_0x58e581(0x1b6),{'access':{'allow':![],'reason':_0x58e581(0x2ab),'token':null}})),devices[_0x5ea6e9][_0x58e581(0x217)]['token']=null;},_0x428ac7);}function setTokenRefresh(_0x11f004){const _0x4c73c7=_0xf01a4f;if(devices[_0x11f004][_0x4c73c7(0x316)])clearTimeout(devices[_0x11f004]['pidRefreshToken']);devices[_0x11f004][_0x4c73c7(0x316)]=setTimeout(()=>{const _0x35e03f=_0x4c73c7;getClientsWithUuid(_0x11f004)[_0x35e03f(0x291)]!=0x0?(devices[_0x11f004][_0x35e03f(0x217)]=refreshToken(_0x11f004),io['to'](_0x11f004)[_0x35e03f(0x29a)](_0x35e03f(0x1b6),{'status':_0x35e03f(0x23f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x11f004][_0x35e03f(0x217)],'externalip':devices[_0x11f004]['ip'],'publicKey':secure[_0x35e03f(0x2dd)],'validInstallation':validInstallation}),setTokenRefresh(_0x11f004)):clearTimeout(devices[_0x11f004]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x56cb8d){const _0x4a1797=_0xf01a4f,_0x51bfde=getClient(_0x56cb8d['id'])[_0x4a1797(0x21c)];_0x56cb8d[_0x4a1797(0x29a)](_0x4a1797(0x259),config),_0x56cb8d[_0x4a1797(0x29a)](_0x4a1797(0x1c3),cleanSettings()),_0x56cb8d['on'](_0x4a1797(0x273),_0x59e400=>{const _0x1002a1=_0x4a1797;if(validateAccess(_0x59e400,_0x51bfde)[_0x1002a1(0x18f)])addBot();else logger[_0x1002a1(0x2f6)](_0x1002a1(0x212));}),_0x56cb8d['on']('update-bot',(_0x260586,_0x4c96ad)=>{const _0x154b7c=_0x4a1797;if(validateAccess(_0x4c96ad,_0x51bfde)[_0x154b7c(0x18f)])toggleBot(_0x260586[_0x154b7c(0x201)],_0x260586[_0x154b7c(0x1b6)],_0x260586[_0x154b7c(0x1e3)]);else logger[_0x154b7c(0x2f6)](_0x154b7c(0x174));}),_0x56cb8d['on'](_0x4a1797(0x2db),(_0x5d7157,_0x328f18)=>{const _0x5701f1=_0x4a1797;if(validateAccess(_0x328f18,_0x51bfde)['allow'])toggleBotMode(_0x5d7157);else logger[_0x5701f1(0x2f6)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x56cb8d['on']('delete-bot',(_0x4d1a4d,_0x5e7d4f)=>{if(validateAccess(_0x5e7d4f,_0x51bfde)['allow'])deleteBot(_0x4d1a4d);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x56cb8d['on']('store-settings',(_0x577536,_0x2d247a)=>{const _0x2792c4=_0x4a1797;if(validateAccess(_0x2d247a,_0x51bfde)[_0x2792c4(0x18f)])storeSettings(_0x577536,!![]);else logger['full'](_0x2792c4(0x204));}),_0x56cb8d['on']('update-bb',_0x975234=>{const _0x2abead=_0x4a1797;if(validateAccess(_0x975234,_0x51bfde)['allow'])updateBB('update');else logger[_0x2abead(0x2f6)](_0x2abead(0x279));}),_0x56cb8d['on']('reinstall-bb',_0x43d2ff=>{const _0x44470c=_0x4a1797;if(validateAccess(_0x43d2ff,_0x51bfde)['allow'])updateBB(_0x44470c(0x1cf));else logger['full'](_0x44470c(0x19e));}),_0x56cb8d['on']('get-backup-files',_0x47fe29=>{const _0x1e0ade=_0x4a1797;if(validateAccess(_0x47fe29,_0x51bfde)[_0x1e0ade(0x18f)]){const _0x392281=getClient(_0x56cb8d['id']);if(_0x392281)getBackupFiles(_0x392281[_0x1e0ade(0x21c)]);else logger[_0x1e0ade(0x2f6)](_0x1e0ade(0x2e2));}else logger[_0x1e0ade(0x2f6)](_0x1e0ade(0x1a5));}),_0x56cb8d['on'](_0x4a1797(0x308),(_0xc4cb04,_0x4a974f)=>{const _0x30b161=_0x4a1797;if(validateAccess(_0x4a974f,_0x51bfde)[_0x30b161(0x18f)])restoreBackupFile(_0xc4cb04);else logger[_0x30b161(0x2f6)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x56cb8d['on'](_0x4a1797(0x240),_0x188c8f=>{const _0x3cf157=_0x4a1797;if(validateAccess(_0x188c8f,_0x51bfde)[_0x3cf157(0x18f)])getMessages();else logger[_0x3cf157(0x2f6)](_0x3cf157(0x21b));}),_0x56cb8d['on'](_0x4a1797(0x327),(_0x5b02ae,_0x381ad7)=>{const _0x234534=_0x4a1797;if(validateAccess(_0x381ad7,_0x51bfde)[_0x234534(0x18f)])confirmMessage(_0x5b02ae);else logger[_0x234534(0x2f6)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x56cb8d['on']('logout',_0x5f49e4=>{const _0x35165e=_0x4a1797;if(validateAccess(_0x5f49e4,_0x51bfde)['allow']){if(devices[_0x51bfde]['pidRefreshToken'])clearTimeout(devices[_0x51bfde][_0x35165e(0x316)]);if(devices[_0x51bfde][_0x35165e(0x2fa)])clearTimeout(devices[_0x51bfde]['pidExpireLogin']);removeSocketListeners(getClient(_0x56cb8d['id'])['uuid']),addBlacklist(_0x51bfde),devices[_0x51bfde][_0x35165e(0x27a)]=null,devices[_0x51bfde]['telegram2FaApproval']=null,devices[_0x51bfde]['access'][_0x35165e(0x1dc)]=null,logger[_0x35165e(0x320)](_0x35165e(0x251)+_0x51bfde['slice'](-0x8)),io['to'](getClient(_0x56cb8d['id'])[_0x35165e(0x21c)])[_0x35165e(0x29a)](_0x35165e(0x1b6),{'access':{'allow':![],'reason':_0x35165e(0x1b7),'token':null}});}else logger[_0x35165e(0x2f6)](_0x35165e(0x1fd));});}function initializeSocketBot(_0x3ff475){const _0x5e87da=_0xf01a4f,_0x576ebd=getClient(_0x3ff475['id'])['bot'],_0x34d310=getClient(_0x3ff475['id'])[_0x5e87da(0x21c)];_0x3ff475['on'](_0x5e87da(0x219),(_0x52dba7,_0x31a86d)=>{const _0x416bae=_0x5e87da;if(validateAccess(_0x31a86d,_0x34d310)[_0x416bae(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd][_0x416bae(0x329)]({'function':_0x416bae(0x275),'args':_0x52dba7});}else logger[_0x416bae(0x2f6)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x3ff475['on'](_0x5e87da(0x339),(_0x708b72,_0x2ad0dd)=>{const _0xf0eefc=_0x5e87da;if(validateAccess(_0x2ad0dd,_0x34d310)[_0xf0eefc(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd]['send']({'function':_0xf0eefc(0x260),'args':_0x708b72});}else logger[_0xf0eefc(0x2f6)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x3ff475['on'](_0x5e87da(0x180),(_0x3595ab,_0x7147a6)=>{const _0x31409f=_0x5e87da;if(validateAccess(_0x7147a6,_0x34d310)[_0x31409f(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd][_0x31409f(0x329)]({'function':_0x31409f(0x2e6),'args':_0x3595ab});}else logger[_0x31409f(0x2f6)](_0x31409f(0x1a6));}),_0x3ff475['on']('store-configuration',(_0x371395,_0x1c47b5)=>{const _0x39480d=_0x5e87da;if(validateAccess(_0x1c47b5,_0x34d310)[_0x39480d(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd]['send']({'function':_0x39480d(0x1b3),'args':_0x371395});}else logger[_0x39480d(0x2f6)](_0x39480d(0x1db));}),_0x3ff475['on']('store-headless',(_0x1c532e,_0x30f950)=>{const _0x48a04a=_0x5e87da;if(validateAccess(_0x30f950,_0x34d310)[_0x48a04a(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd]['send']({'function':_0x48a04a(0x2ed),'args':_0x1c532e});}else logger[_0x48a04a(0x2f6)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3ff475['on'](_0x5e87da(0x1b0),(_0x11a845,_0x38ef46)=>{const _0x4b1c17=_0x5e87da;if(validateAccess(_0x38ef46,_0x34d310)['allow']){if(pid[_0x576ebd])pid[_0x576ebd][_0x4b1c17(0x329)]({'function':_0x4b1c17(0x326),'args':_0x11a845});}else logger[_0x4b1c17(0x2f6)](_0x4b1c17(0x2a2));}),_0x3ff475['on'](_0x5e87da(0x237),_0x27a1f0=>{const _0x5515bf=_0x5e87da;if(validateAccess(_0x27a1f0,_0x34d310)['allow']){if(pid[_0x576ebd])pid[_0x576ebd][_0x5515bf(0x329)]({'function':_0x5515bf(0x16f),'args':null});}else logger[_0x5515bf(0x2f6)](_0x5515bf(0x250));}),_0x3ff475['on']('get-starting-balances',_0x5fb9f8=>{const _0x23c3d9=_0x5e87da;if(validateAccess(_0x5fb9f8,_0x34d310)[_0x23c3d9(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd]['send']({'function':_0x23c3d9(0x246),'args':null});}else logger[_0x23c3d9(0x2f6)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3ff475['on'](_0x5e87da(0x32d),(_0x239890,_0x413361)=>{const _0x1162e7=_0x5e87da;if(validateAccess(_0x413361,_0x34d310)[_0x1162e7(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd][_0x1162e7(0x329)]({'function':_0x1162e7(0x223),'args':_0x239890});}else logger[_0x1162e7(0x2f6)](_0x1162e7(0x282));}),_0x3ff475['on'](_0x5e87da(0x20a),_0x53eb12=>{const _0x5ea884=_0x5e87da;if(validateAccess(_0x53eb12,_0x34d310)[_0x5ea884(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd][_0x5ea884(0x329)]({'function':_0x5ea884(0x238),'args':null});}else logger['full'](_0x5ea884(0x302));}),_0x3ff475['on'](_0x5e87da(0x28c),_0x28f36c=>{const _0x5ea779=_0x5e87da;if(validateAccess(_0x28f36c,_0x34d310)[_0x5ea779(0x18f)]){if(pid[_0x576ebd])pid[_0x576ebd]['send']({'function':_0x5ea779(0x1d5),'args':null});}else logger[_0x5ea779(0x2f6)](_0x5ea779(0x298));}),_0x3ff475['on']('update-bb',_0x4e1a78=>{const _0x2eaf30=_0x5e87da;if(validateAccess(_0x4e1a78,_0x34d310)['allow'])updateBB(_0x2eaf30(0x2d8));else logger[_0x2eaf30(0x2f6)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3ff475['on'](_0x5e87da(0x240),_0x4b3fa4=>{const _0x1cba6d=_0x5e87da;if(validateAccess(_0x4b3fa4,_0x34d310)[_0x1cba6d(0x18f)])getMessages();else logger[_0x1cba6d(0x2f6)](_0x1cba6d(0x21b));}),_0x3ff475['on'](_0x5e87da(0x327),(_0x2a8372,_0x3a1d83)=>{const _0x4c6b63=_0x5e87da;if(validateAccess(_0x3a1d83,_0x34d310)[_0x4c6b63(0x18f)])confirmMessage(_0x2a8372);else logger['full'](_0x4c6b63(0x309));}),_0x3ff475['on'](_0x5e87da(0x203),_0x592d55=>{const _0x331849=_0x5e87da;if(validateAccess(_0x592d55,_0x34d310)[_0x331849(0x18f)]){if(devices[_0x34d310][_0x331849(0x316)])clearTimeout(devices[_0x34d310][_0x331849(0x316)]);if(devices[_0x34d310]['pidExpireLogin'])clearTimeout(devices[_0x34d310]['pidExpireLogin']);removeSocketListeners(getClient(_0x3ff475['id'])['uuid']),addBlacklist(_0x34d310),devices[_0x34d310][_0x331849(0x27a)]=null,devices[_0x34d310]['telegram2FaApproval']=null,devices[_0x34d310][_0x331849(0x217)][_0x331849(0x1dc)]=null,logger[_0x331849(0x320)](_0x331849(0x251)+_0x34d310['slice'](-0x8)),io['to'](getClient(_0x3ff475['id'])[_0x331849(0x21c)])[_0x331849(0x29a)](_0x331849(0x1b6),{'access':{'allow':![],'reason':_0x331849(0x1b7),'token':null}});}else logger[_0x331849(0x2f6)](_0x331849(0x1fd));});}function removeSocketListeners(_0x37da73){const _0x20d054=_0xf01a4f;getClientsWithUuid(_0x37da73)[_0x20d054(0x270)](_0xcb4e7d=>{const _0x36761d=_0x20d054;getSocket(_0xcb4e7d['id'])[_0x36761d(0x296)]();});}function cleanSettings(){const _0x323cea=_0xf01a4f;let _0x5418ea=settings;return settings[_0x323cea(0x1b1)]&&settings['telegramToken']!=''&&(_0x5418ea={..._0x5418ea,'telegramToken':_0x323cea(0x22f)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x5418ea={..._0x5418ea,'bbPassword':_0x323cea(0x22f)}),(settings[_0x323cea(0x1d6)]&&settings[_0x323cea(0x1d6)]==_0x323cea(0x33c)||settings['telegramToken']&&settings[_0x323cea(0x1b1)]==_0x323cea(0x33c))&&(_0x5418ea={..._0x5418ea,'restored':{'password':settings[_0x323cea(0x1d6)]==_0x323cea(0x33c),'telegram':settings['telegramToken']==_0x323cea(0x33c)}}),_0x5418ea;}async function updateBB(_0x261463){const _0x11d6db=_0xf01a4f;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x291601=>{const _0x19e8e4=_0x5e41;restartBot(_0x291601[_0x19e8e4(0x201)]);}),logger['debug'](_0x11d6db(0x27e)+_0x261463);if(_0x261463==_0x11d6db(0x2d8))process[_0x11d6db(0x329)]({'update':!![]},_0x154d1e=>{});else _0x261463==_0x11d6db(0x1cf)&&process[_0x11d6db(0x329)]({'reinstall':!![]},_0x58425d=>{});}function startBot(_0xa8e587,_0x20c83e,_0x3b2c6a){const _0x40598e=_0xf01a4f;if(debugging)_0xa8e587[_0x40598e(0x235)]('-d');let _0x215611=![];const _0x464ca2=_0xa8e587[0x0];_0x20c83e={..._0x20c83e,'stdio':[_0x40598e(0x335),_0x40598e(0x335),_0x40598e(0x335),'ipc']},pid[_0x464ca2]=childProcess['fork'](botfile,_0xa8e587,_0x20c83e),pid[_0x464ca2]['on'](_0x40598e(0x229),_0xa62798=>{const _0x4abe39=_0x40598e;switch(Object[_0x4abe39(0x2ca)](_0xa62798)[0x0]){case'botname':updateBotName(_0x464ca2,_0xa62798[_0x4abe39(0x25b)]);break;case _0x4abe39(0x2dc):updateBotManager();break;case'status':updateStatus(_0x464ca2,_0xa62798[_0x4abe39(0x1b6)]);break;case _0x4abe39(0x1e3):updateLive(_0x464ca2,_0xa62798['live']);break;case _0x4abe39(0x31d):updateLive(_0x464ca2,_0xa62798[_0x4abe39(0x31d)]),io['to'](_0x464ca2)['emit'](_0x4abe39(0x1b6),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x4abe39(0x1b2):_0xa62798[_0x4abe39(0x1b2)]==_0x4abe39(0x1b5)&&restartBot(_0x464ca2);_0xa62798[_0x4abe39(0x1b2)]==_0x4abe39(0x1df)&&toggleBot(_0x464ca2,'disabled','stopped');break;case _0x4abe39(0x19d):sendTelegram(_0x464ca2,_0xa62798[_0x4abe39(0x19d)]);break;case _0x4abe39(0x27b):sendTelegramMsg(_0xa62798[_0x4abe39(0x27b)]);break;case'function':io['to'](_0x464ca2)[_0x4abe39(0x29a)](_0xa62798[_0x4abe39(0x2fd)],_0xa62798['args']);break;}}),pid[_0x464ca2]['on'](_0x40598e(0x19a),function(_0x19a1bb){if(_0x215611)return;_0x215611=!![],_0x3b2c6a(_0x19a1bb);}),pid[_0x464ca2]['on'](_0x40598e(0x192),async function(_0x1ec244){const _0x4bc128=_0x40598e;if(installingUpdate)return;if(_0x215611)return;_0x215611=!![],_0x3b2c6a(null);const _0x2b5511=dbConfig[_0x4bc128(0x1cd)](_0x4bc128(0x259))[_0x4bc128(0x1e6)]({'botID':_0x464ca2})[_0x4bc128(0x321)]();_0x2b5511&&(_0x2b5511[_0x4bc128(0x1b6)]=='enabled'||_0x2b5511[_0x4bc128(0x1b6)]==_0x4bc128(0x1a1))&&(await sleep(0x3e8),updateLive(_0x464ca2,'stopped'),logger[_0x4bc128(0x2f6)](_0x4bc128(0x31e)+_0x464ca2),startBot([_0x464ca2,userID],{'cwd':bbpath},function(_0x806c04){const _0x26bfe7=_0x4bc128;if(_0x806c04)logger[_0x26bfe7(0x2f6)](_0x806c04);}));});}function stopBot(_0x26cd0a){const _0x578734=_0xf01a4f;getClientsWithBotID(_0x26cd0a)[_0x578734(0x270)](_0x20afd8=>{const _0x5da704=_0x578734;getSocket(_0x20afd8['id'])[_0x5da704(0x340)](!![]),removeClient(_0x20afd8['id']);}),pid[_0x26cd0a]&&(pid[_0x26cd0a][_0x578734(0x1df)](),pid[_0x26cd0a]=null);}function restartBot(_0x119882){if(pid[_0x119882])pid[_0x119882]['kill']();}function addBot(){const _0xe9f133=_0xf01a4f;let _0x3eba8a;for(let _0x4e55a3=0x1;_0x4e55a3<0x3e9;_0x4e55a3++){_0x3eba8a=_0x4e55a3[_0xe9f133(0x33d)]()['padStart'](0x3,'0');let _0x4b4eee=config[_0xe9f133(0x1e6)](_0x5dac80=>_0x5dac80['botID']==_0x3eba8a);if(!_0x4b4eee)break;}if(_0x3eba8a==='1000'){logger[_0xe9f133(0x2f6)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0xe9f133(0x2f6)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x3eba8a),dbConfig[_0xe9f133(0x1cd)](_0xe9f133(0x259))[_0xe9f133(0x235)]({'botID':_0x3eba8a,'botname':'Bot\x20'+_0x3eba8a,'status':_0xe9f133(0x1a1),'live':''})['write'](),startBot([_0x3eba8a,userID],{'cwd':bbpath},function(_0x5451dc){const _0x4f164e=_0xe9f133;if(_0x5451dc)logger[_0x4f164e(0x2f6)](_0x5451dc);}),config=getConfiguration(),io['to']('botmanager')[_0xe9f133(0x29a)](_0xe9f133(0x259),config);}function deleteBot(_0x381867){const _0x53258e=_0xf01a4f;getClientsWithBotID(_0x381867)[_0x53258e(0x270)](_0x28ece0=>{getSocket(_0x28ece0['id'])['disconnect'](!![]),removeClient(_0x28ece0['id']);}),dbConfig[_0x53258e(0x1cd)](_0x53258e(0x259))[_0x53258e(0x25c)]({'botID':_0x381867})['write'](),logger[_0x53258e(0x2f6)]('deleted\x20Bot\x20'+_0x381867),stopBot(_0x381867);try{if(fs['existsSync'](path[_0x53258e(0x1c2)](configpath,_0x53258e(0x325)+_0x381867+_0x53258e(0x2da))))fs[_0x53258e(0x248)](path[_0x53258e(0x1c2)](configpath,_0x53258e(0x325)+_0x381867+'-config.json'));if(fs[_0x53258e(0x190)](path[_0x53258e(0x1c2)](configpath,_0x53258e(0x325)+_0x381867+_0x53258e(0x2f7))))fs['unlinkSync'](path[_0x53258e(0x1c2)](configpath,_0x53258e(0x325)+_0x381867+'-events.json'));if(fs[_0x53258e(0x190)](path[_0x53258e(0x1c2)](configpath,_0x53258e(0x325)+_0x381867+'-performance.json')))fs[_0x53258e(0x248)](path['join'](configpath,_0x53258e(0x325)+_0x381867+_0x53258e(0x2ef)));if(fs[_0x53258e(0x190)](path[_0x53258e(0x1c2)](configpath,'bot-'+_0x381867+_0x53258e(0x24e))))fs[_0x53258e(0x248)](path['join'](configpath,_0x53258e(0x325)+_0x381867+_0x53258e(0x24e)));}catch(_0x2446b8){if(_0x2446b8)logger['full'](_0x53258e(0x319),_0x2446b8);}config=getConfiguration(),io['to'](_0x53258e(0x231))[_0x53258e(0x29a)](_0x53258e(0x259),config);}function toggleBot(_0x4645f7,_0xe1281b,_0x39ca3e){const _0x40e1e8=_0xf01a4f;dbConfig[_0x40e1e8(0x1cd)]('bots')['find']({'botID':_0x4645f7})[_0x40e1e8(0x1bb)]({'status':_0xe1281b})[_0x40e1e8(0x1bb)]({'live':_0x39ca3e})['write']();if(_0xe1281b=='enabled'||_0xe1281b==_0x40e1e8(0x1a1))logger[_0x40e1e8(0x2f6)]('enabled\x20Bot\x20'+_0x4645f7),startBot([_0x4645f7,userID],{'cwd':bbpath},function(_0xc40402){if(_0xc40402)logger['full'](_0xc40402);});else(_0xe1281b=='disabled'||_0xe1281b==_0x40e1e8(0x17c))&&(logger[_0x40e1e8(0x2f6)](_0x40e1e8(0x22b)+_0x4645f7),stopBot(_0x4645f7));config=getConfiguration(),io['to'](_0x40e1e8(0x231))[_0x40e1e8(0x29a)](_0x40e1e8(0x259),config);}function toggleStatus(_0x2fa718){const _0x4766be=_0xf01a4f;let _0x3b1748=dbConfig[_0x4766be(0x1cd)](_0x4766be(0x259))[_0x4766be(0x1e6)]({'botID':_0x2fa718})[_0x4766be(0x321)](),_0x6791d6;if(_0x3b1748[_0x4766be(0x1b6)]===_0x4766be(0x263))_0x6791d6=_0x4766be(0x344);else{if(_0x3b1748[_0x4766be(0x1b6)]==='new')_0x6791d6=_0x4766be(0x17c);else{if(_0x3b1748[_0x4766be(0x1b6)]===_0x4766be(0x17c))_0x6791d6=_0x4766be(0x1a1);else{if(_0x3b1748[_0x4766be(0x1b6)]===_0x4766be(0x344))_0x6791d6=_0x4766be(0x263);}}}return _0x6791d6;}function _0x5e41(_0x4e3df0,_0x19649e){const _0x56de7d=_0x5672();return _0x5e41=function(_0x42372c,_0x3f8f32){_0x42372c=_0x42372c-0x16f;let _0x5672b2=_0x56de7d[_0x42372c];return _0x5672b2;},_0x5e41(_0x4e3df0,_0x19649e);}function updateStatus(_0x58323d,_0x4b6958){const _0x353b7e=_0xf01a4f;dbConfig[_0x353b7e(0x1cd)](_0x353b7e(0x259))['find']({'botID':_0x58323d})[_0x353b7e(0x1bb)]({'status':_0x4b6958})[_0x353b7e(0x185)](),config=getConfiguration(),io['to'](_0x353b7e(0x231))[_0x353b7e(0x29a)](_0x353b7e(0x259),config);}function updateLive(_0x23055b,_0x7a450f){const _0x419823=_0xf01a4f;dbConfig[_0x419823(0x1cd)](_0x419823(0x259))[_0x419823(0x1e6)]({'botID':_0x23055b})['assign']({'live':_0x7a450f})[_0x419823(0x185)](),config=getConfiguration(),io['to'](_0x419823(0x231))[_0x419823(0x29a)](_0x419823(0x259),config);}function updateBotName(_0x4f0850,_0x1fd7e1){const _0x24a421=_0xf01a4f;dbConfig[_0x24a421(0x1cd)](_0x24a421(0x259))[_0x24a421(0x1e6)]({'botID':_0x4f0850})[_0x24a421(0x1bb)]({'botname':_0x1fd7e1})['write'](),config=getConfiguration(),io['to'](_0x24a421(0x231))['emit'](_0x24a421(0x259),config);}function _0x5672(){const _0x26a522=['slice','isValid','expiry','stopPolling','3849330XIFwwj','Bot\x20Mgr\x20>\x20','bcryptjs','allow','existsSync','filter','exit','post','express','messages','logs/','date-fns','sort','13748620yTMCLC','error','clients','Notifications\x20enabled','telegram','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','File\x20uploaded','lowdb/adapters/FileSync','new','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','6b67f3d61ee94b8f5c80b4affef4c4d9','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20get\x20portfolio','14rQawNU','404\x20Not\x20Found','set','order','apiKey','(((.+)+)+)+$','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','decrypt','Logged\x20in\x20user\x20...','store-fiat','telegramToken','stop','storeConfiguration','number','restart','status','logged\x20out','telegramChatId','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','simple','assign','Restore\x20process\x20aborted','catch','timestamp','Yes','Unauthorized\x20attempt\x20to\x20download\x20','sortBy','join','settings','User\x20has\x20been\x20validated','HTML','build','polling_error','reload','name','-----------------------------------------------------------------------------------','backup','server','get','exp','reinstall','getMinutes','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','bb/','manual','getSeconds','showConfig','bbPassword','auto','secure','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20store\x20configuration','token','7552Krrfpg','config/','kill','bbvNew','mixpanel','answerCallbackQuery','live',',\x20must\x20be\x20a\x204\x20digit\x20number','bot','find','Failed\x20to\x20download\x20','mode','type','log','endsWith','whitelistEnabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','backupfile','Ok,\x20will\x20send\x20order\x20notifications\x20only','removeListener','output-001.log','isIPv4MappedAddress','\x20(1)','RSA','success','Unauthorized\x20login\x20attempt\x20(timeout)','SIGINT','handshake','orders','sendFile','params','Unauthorized\x20attempt\x20to\x20log\x20out','Ok,\x20will\x20send\x20alert\x20notifications\x20only','rmSync','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','botID','createServer','logout','Unauthorized\x20attempt\x20to\x20update\x20settings','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Notifications\x20disabled\x0a','conn','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','cancel-loading','sha256','notification','util','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Token\x20blacklisted','::ffff:127.0.0.1','request','Unauthorized\x20attempt\x20to\x20add\x20bot','callback_query','Starting\x20Balance\x20Bot\x20update','5\x20min','map','access','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','get-logs','/:bot','Unauthorized\x20attempt\x20to\x20get\x20messages','uuid','login\x20required','/metrics\x20-\x20show\x20bot\x20performance\x0a','Temporary\x20access\x20rejected','download','getMonth','getHours','placeOrder','15\x20min','port','settings.','/off\x20-\x20stop\x20bot(s)\x0a','\x20|\x20user:\x20...','message','constructor','disabled\x20Bot\x20','use','/:bot/portfolio','privateKey','************','binary','botmanager','Invalid\x20authentication\x20token\x20(1)','Restoring\x20bot(s)\x20from\x20backup','bb-secure.json','push','search','reset-history','cancelLoading','verify','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','all','All\x20bots','Invalid\x20IP\x20address','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','connected','get-messages','replace','clientip','/download/:type','file','All','getStartingBalances','No\x20authentication\x20token','unlinkSync','Server','sign','lastmsgemitted','express-fileupload','396tDLpuY','-results.json','host','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Logged\x20out\x20user\x20...','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Allow\x20login\x20from\x20IP\x20address\x20<b>','kind','max','access\x20timeout','/:bot/history','build2','bots','sendMetricsTelegram','botname','remove','alias','split','generateKeyPairAsync','deleteHistoryAlerts','compareSync','NTBA_FIX_319','enabled','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','\x20mode','timeshift','randomBytes','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','axios','logs','sockets','_data','http','Password\x20has\x20been\x20reset\x20to:\x20','crypto','forEach','blacklist','Login\x20accepted','add-bot','from','emitHistory','password','files','166715RWpcEp','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','telegramIpApproval','telegrammsg','loginRequired','7693fcuzYi','Starting\x20Balance\x20Bot\x20','onText','output-003.log','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','.zip','headless','bb-settings.json','getDate','telegram2FaApproval','node-zip','*$1*','readFileSync','isDirectory','show-config','zip/','https://api.ipify.org?format=json','login\x20token\x20valid','stringify','length','idling\x20bot\x20\x20\x20|\x20Bot\x20','Notifications\x20types:\x20','apply','/restart\x20-\x20restart\x20bot(s)\x0a','removeAllListeners','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20show\x20configuration','tkn','emit','format','backup-files','invalid\x20credentials','latestversion','toIPv4MappedAddress','\x20>\x20','stopped','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','backup-full.zip','temp/','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','/output-000.log','bbvReceive','Markdown','index.html','temporary\x20access\x20timeout','Alerts','socket.io','Invalid\x20authentication\x20token\x20(2)','\x20|\x20client:\x20...','exec','login\x20not\x20required','output-000.log','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','apiSecret','0.0.0','parse','Starting\x20Balance\x20Bot\x20reinstallation','static','env','yargs/yargs','toggleBotMode','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','13284Oildpa','/:bot/support','Bot\x20','ipaddr.js','\x20to\x20','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','output-002.log','username','entries','padStart','Notifications\x20enabled\x0a','/:bot/configuration','Restore\x20backup\x20file\x20','keys','Crypt','\x20|\x20','toIPv4Address','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','defaults','telegramEnabled','hasOwnProperty','hex','telegramEvents','yes','lowdb','2FA','login\x20token\x20generated','update','chat','-config.json','toggle-bot-mode','updatebotmanager','publicKey','test','argv','running','secret','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','listen','track','getPortfolio','readdirSync','statSync','starting\x20bot\x20|\x20Bot\x20','reject','\x20only\x0a','telegramUsername','storeHeadless','Login\x20rejected','-performance.json','hashSync','startsWith','reason','exchange','writeFileSync','reset-password','full','-events.json','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Invalid\x20Telegram\x20token','pidExpireLogin','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','temporaryAccessAllowed','function','sendMessage','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','data','show','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','backup-full@','sendPortfolioTelegram','any','backup-full','9hcaYCG','restore-backup-file','Unauthorized\x20attempt\x20to\x20confirm\x20message','headers','bot.js','size','4rdPxvp','login','bbUsername','<b>Balance\x20Bot\x20Status:</b>\x0a','store','2FA\x20login\x20token\x20generated','initclient','path','mkdirSync','pidRefreshToken','/:bot/coins','temporary\x20access\x20rejected','error\x20while\x20deleting\x20config\x20files:\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','127.0.0.1','lastmsgtelegram','started','restarting\x20Bot\x20','includes','debug','value','/disable\x20-\x20disable\x20notifications\x0a','Access\x20enabled\x20for\x20','userid','bot-','storeFiat','confirm-message','Your\x20installation\x20is\x20already\x20up\x20to\x20date','send','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','</b>\x20?','place-order','::1','getFullYear','\x20minutes','once','socket','2FA\x20required','689drOBIL','inherit','then','alerts','/names\x20-\x20show\x20bot\x20names\x0a','delete-alerts','remoteAddress','add','***','toString','uuid-random','randomFillSync','disconnect','No\x20bots\x20running\x20right\x20now','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','ipv6','disabled','resetHistory','copyFileSync','getUTCHours','api-eu.mixpanel.com','3000','Unauthorized\x20attempt\x20to\x20update\x20bot','min','48SBWhoW','event',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','2FA\x20login\x20required','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','graphql-request','new-disabled','referer','Password\x20reset\x20rejected','\x20(2)','get-portfolio','getTime','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','464688XHbRNH','init','write','96866XuDddd','user'];_0x5672=function(){return _0x26a522;};return _0x5672();}function updateBotManager(){const _0x4c0c1a=_0xf01a4f;config=getConfiguration(),io['to'](_0x4c0c1a(0x231))[_0x4c0c1a(0x29a)](_0x4c0c1a(0x259),config);}function toggleBotMode(_0x3eff0e){const _0x2a473e=_0xf01a4f;if(pid[_0x3eff0e])pid[_0x3eff0e][_0x2a473e(0x329)]({'function':_0x2a473e(0x2bb),'args':null});else{const _0x4b6653=configpath+'bot-'+_0x3eff0e+_0x2a473e(0x2da),_0x529bc3=fs['readFileSync'](_0x4b6653),_0x49b3f6=JSON[_0x2a473e(0x2b6)](_0x529bc3),_0x495c33=_0x49b3f6['bot'][0x0][_0x2a473e(0x284)];_0x49b3f6[_0x2a473e(0x1e5)][0x0]['headless']=!_0x495c33;const _0x7bcca4=JSON['stringify'](_0x49b3f6,null,0x2);fs[_0x2a473e(0x2f4)](_0x4b6653,_0x7bcca4),config=getConfiguration(),io['to'](_0x2a473e(0x231))[_0x2a473e(0x29a)](_0x2a473e(0x259),config);}}function telegramError(_0x950977){const _0x395f62=_0xf01a4f;logger[_0x395f62(0x1ba)](getTimeStamp()+_0x395f62(0x178));}function validateTelegram(_0x3edf2a){const _0x4e3288=_0xf01a4f;if(_0x3edf2a['from'][_0x4e3288(0x2c4)]!=settings['telegramUsername']&&'@'+_0x3edf2a[_0x4e3288(0x274)][_0x4e3288(0x2c4)]!=settings['telegramUsername'])return tgBot[_0x4e3288(0x2fe)](_0x3edf2a[_0x4e3288(0x2d9)]['id'],_0x4e3288(0x2ce),{'parse_mode':'HTML'})[_0x4e3288(0x1bd)](_0x92678e=>{telegramError(_0x92678e);}),![];return!![];}async function initTelegram(){const _0x38743b=_0xf01a4f;if(tgBot)tgBot[_0x38743b(0x18b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x38743b(0x1b1)],{'polling':!![]});let _0x281a75='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x281a75+='\x0a',_0x281a75+='/enable\x20-\x20enable\x20notifications\x0a',_0x281a75+=_0x38743b(0x322),_0x281a75+=_0x38743b(0x1ee),_0x281a75+=_0x38743b(0x295),_0x281a75+='/on\x20-\x20start\x20bot(s)\x0a',_0x281a75+=_0x38743b(0x227),_0x281a75+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x281a75+=_0x38743b(0x338),_0x281a75+=_0x38743b(0x31a),_0x281a75+=_0x38743b(0x21e),_0x281a75+=_0x38743b(0x2f8),_0x281a75+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x281a75+=_0x38743b(0x209),_0x281a75+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x34a2fa=_0x38743b(0x17a);_0x34a2fa+='\x0a',_0x34a2fa+=_0x281a75,tgBot[_0x38743b(0x27f)](/\/start/,_0x1b225f=>{const _0x359451=_0x38743b;if(!validateTelegram(_0x1b225f))return;if(settings[_0x359451(0x1b8)]!=_0x1b225f[_0x359451(0x2d9)]['id'])updateSetting(_0x359451(0x1b8),_0x1b225f['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x1b225f[_0x359451(0x2d9)]['id'],_0x34a2fa)['catch'](_0x5a367c=>{telegramError(_0x5a367c);});}),tgBot[_0x38743b(0x27f)](/\/enable/,_0x35b26a=>{const _0x3e8d15=_0x38743b;if(!validateTelegram(_0x35b26a))return;if(settings[_0x3e8d15(0x1b8)]!=_0x35b26a['chat']['id'])updateSetting('telegramChatId',_0x35b26a['chat']['id']);updateSetting(_0x3e8d15(0x2d0),!![]),tgBot[_0x3e8d15(0x2fe)](_0x35b26a[_0x3e8d15(0x2d9)]['id'],_0x3e8d15(0x19c))[_0x3e8d15(0x1bd)](_0x4b79ac=>{telegramError(_0x4b79ac);});}),tgBot[_0x38743b(0x27f)](/\/config/,async _0xf06882=>{const _0x1dbda4=_0x38743b;if(!validateTelegram(_0xf06882))return;tgBot['removeListener'](_0x1dbda4(0x213)),tgBot[_0x1dbda4(0x2fe)](_0xf06882[_0x1dbda4(0x2d9)]['id'],_0x1dbda4(0x20e),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x1dbda4(0x1fa)},{'text':_0x1dbda4(0x2ac),'callback_data':'alerts'},{'text':_0x1dbda4(0x245),'callback_data':'all'}]]}})[_0x1dbda4(0x1bd)](_0x207a58=>{telegramError(_0x207a58);}),tgBot['on'](_0x1dbda4(0x213),async _0x4a3e08=>{const _0x1bf32e=_0x1dbda4,_0x5d65a3=_0x4a3e08[_0x1bf32e(0x300)],_0x4218fa=_0x4a3e08[_0x1bf32e(0x229)];tgBot['answerCallbackQuery'](_0x4a3e08['id'])[_0x1bf32e(0x336)](async()=>{const _0x5e1055=_0x1bf32e;_0x5d65a3=='orders'&&(updateSetting(_0x5e1055(0x2d3),_0x5e1055(0x1fa)),updateSetting(_0x5e1055(0x2d0),!![]),await tgBot['sendMessage'](_0x4218fa[_0x5e1055(0x2d9)]['id'],_0x5e1055(0x1f0))['catch'](_0x54e4c7=>{telegramError(_0x54e4c7);}));_0x5d65a3==_0x5e1055(0x337)&&(updateSetting('telegramEvents',_0x5e1055(0x337)),updateSetting(_0x5e1055(0x2d0),!![]),await tgBot[_0x5e1055(0x2fe)](_0x4218fa[_0x5e1055(0x2d9)]['id'],_0x5e1055(0x1fe))[_0x5e1055(0x1bd)](_0x9f5a1c=>{telegramError(_0x9f5a1c);}));_0x5d65a3==_0x5e1055(0x23b)&&(updateSetting(_0x5e1055(0x2d3),'all'),updateSetting(_0x5e1055(0x2d0),!![]),await tgBot[_0x5e1055(0x2fe)](_0x4218fa[_0x5e1055(0x2d9)]['id'],_0x5e1055(0x1d9))[_0x5e1055(0x1bd)](_0xd0e574=>{telegramError(_0xd0e574);}));if(!settings[_0x5e1055(0x1b8)])tgBot[_0x5e1055(0x2fe)](_0x4218fa['chat']['id'],_0x5e1055(0x1a4))[_0x5e1055(0x1bd)](_0x52c13e=>{telegramError(_0x52c13e);});}),tgBot['removeListener'](_0x1bf32e(0x213));});}),tgBot['onText'](/\/status/,_0x931e=>{const _0x36ffe5=_0x38743b;if(!validateTelegram(_0x931e))return;const _0x368aa9=getBotsWithMode();let _0x83d3e9=_0x36ffe5(0x310);config['forEach'](_0x50092a=>{const _0x104a7d=_0x36ffe5,_0x1e8717=_0x368aa9[_0x104a7d(0x1e6)](_0x3e06de=>_0x3e06de[_0x104a7d(0x201)]==_0x50092a[_0x104a7d(0x201)])['mode'];_0x83d3e9+=_0x104a7d(0x2bf)+_0x50092a['botID']+':\x20'+_0x50092a[_0x104a7d(0x1b6)]+_0x104a7d(0x2cc)+_0x1e8717+_0x104a7d(0x2cc)+_0x50092a[_0x104a7d(0x1e3)]+'\x0a';}),_0x83d3e9+='\x0a',_0x83d3e9+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x83d3e9+=!settings[_0x36ffe5(0x2d0)]?_0x36ffe5(0x207):_0x36ffe5(0x2c7),_0x83d3e9+=settings['telegramEnabled']?settings[_0x36ffe5(0x2d3)]=='all'?_0x36ffe5(0x264):_0x36ffe5(0x293)+settings[_0x36ffe5(0x2d3)]+_0x36ffe5(0x2eb):'',tgBot[_0x36ffe5(0x2fe)](_0x931e['chat']['id'],_0x83d3e9,{'parse_mode':_0x36ffe5(0x1c5)})[_0x36ffe5(0x1bd)](_0x81605d=>{telegramError(_0x81605d);});}),tgBot[_0x38743b(0x27f)](/\/restart/,_0x474aa4=>{const _0x1398fd=_0x38743b;if(!validateTelegram(_0x474aa4))return;tgBot[_0x1398fd(0x1f1)](_0x1398fd(0x213));const _0x15e405=getEnabledBots();if(_0x15e405[_0x1398fd(0x291)]==0x0)tgBot[_0x1398fd(0x2fe)](_0x474aa4[_0x1398fd(0x2d9)]['id'],_0x1398fd(0x341))[_0x1398fd(0x1bd)](_0x16e345=>{telegramError(_0x16e345);});else{if(_0x15e405[_0x1398fd(0x291)]>0x1)_0x15e405['push']({'botID':_0x1398fd(0x23b)});let _0x56a6e2=[],_0x37fa95=[];const _0x2a756d=_0x15e405['length']%0x4==0x0||_0x15e405['length']%0x4==0x3||_0x15e405[_0x1398fd(0x291)]%0x3==0x1?0x4:0x3;let _0x28e35b=0x0;_0x15e405[_0x1398fd(0x270)]((_0x28db32,_0x42322c)=>{const _0x51df6c=_0x1398fd;if(_0x42322c%_0x2a756d==0x0)_0x37fa95=[];_0x37fa95[_0x51df6c(0x235)]({'text':_0x28db32[_0x51df6c(0x201)]==_0x51df6c(0x23b)?_0x51df6c(0x23c):_0x51df6c(0x2bf)+_0x28db32['botID'],'callback_data':_0x28db32[_0x51df6c(0x201)]}),_0x42322c%_0x2a756d==0x0&&(_0x56a6e2[_0x28e35b]=_0x37fa95,_0x28e35b++);}),tgBot[_0x1398fd(0x2fe)](_0x474aa4['chat']['id'],_0x1398fd(0x23a),{'reply_markup':{'inline_keyboard':_0x56a6e2}})[_0x1398fd(0x1bd)](_0x4c4b8b=>{telegramError(_0x4c4b8b);}),tgBot['on'](_0x1398fd(0x213),async _0x3c959e=>{const _0x4ddd1b=_0x1398fd,_0x273186=_0x3c959e[_0x4ddd1b(0x300)],_0xada47e=_0x3c959e[_0x4ddd1b(0x229)];tgBot['answerCallbackQuery'](_0x3c959e['id'])[_0x4ddd1b(0x336)](async()=>{_0x273186=='all'?config['forEach'](_0x6fb6e0=>{restartBot(_0x6fb6e0['botID']);}):restartBot(_0x273186);}),tgBot[_0x4ddd1b(0x1f1)](_0x4ddd1b(0x213));});}}),tgBot[_0x38743b(0x27f)](/\/on/,_0x4631df=>{const _0x1d096b=_0x38743b;if(!validateTelegram(_0x4631df))return;tgBot['removeListener']('callback_query');const _0x16ed55=getDisabledBots();if(_0x16ed55[_0x1d096b(0x291)]==0x0)tgBot[_0x1d096b(0x2fe)](_0x4631df[_0x1d096b(0x2d9)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x1d096b(0x1bd)](_0x4fd3f6=>{telegramError(_0x4fd3f6);});else{if(_0x16ed55[_0x1d096b(0x291)]>0x1)_0x16ed55['push']({'botID':_0x1d096b(0x23b)});let _0xed9945=[],_0x326c19=[];const _0x21339c=_0x16ed55[_0x1d096b(0x291)]%0x4==0x0||_0x16ed55[_0x1d096b(0x291)]%0x4==0x3||_0x16ed55[_0x1d096b(0x291)]%0x3==0x1?0x4:0x3;let _0xa4559b=0x0;_0x16ed55[_0x1d096b(0x270)]((_0x32f5a0,_0xce13fb)=>{const _0x3507d6=_0x1d096b;if(_0xce13fb%_0x21339c==0x0)_0x326c19=[];_0x326c19[_0x3507d6(0x235)]({'text':_0x32f5a0[_0x3507d6(0x201)]==_0x3507d6(0x23b)?_0x3507d6(0x23c):_0x3507d6(0x2bf)+_0x32f5a0['botID'],'callback_data':_0x32f5a0[_0x3507d6(0x201)]}),_0xce13fb%_0x21339c==0x0&&(_0xed9945[_0xa4559b]=_0x326c19,_0xa4559b++);}),tgBot['sendMessage'](_0x4631df[_0x1d096b(0x2d9)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0xed9945}})[_0x1d096b(0x1bd)](_0x399928=>{telegramError(_0x399928);}),tgBot['on']('callback_query',async _0x166dfe=>{const _0x4c356e=_0x1d096b,_0x46086c=_0x166dfe[_0x4c356e(0x300)],_0x276378=_0x166dfe[_0x4c356e(0x229)];tgBot[_0x4c356e(0x1e2)](_0x166dfe['id'])['then'](async()=>{const _0x3a4510=_0x4c356e;_0x46086c==_0x3a4510(0x23b)?(tgBot['sendMessage'](_0x276378[_0x3a4510(0x2d9)]['id'],_0x3a4510(0x2fb))[_0x3a4510(0x1bd)](_0x21f627=>{telegramError(_0x21f627);}),_0x16ed55[_0x3a4510(0x270)](_0x2abac8=>{const _0x48f047=_0x3a4510;if(_0x2abac8[_0x48f047(0x201)]!='all')toggleBot(_0x2abac8[_0x48f047(0x201)],toggleStatus(_0x2abac8[_0x48f047(0x201)]),_0x48f047(0x2a1));})):(tgBot[_0x3a4510(0x2fe)](_0x276378[_0x3a4510(0x2d9)]['id'],_0x3a4510(0x32b)+_0x46086c)[_0x3a4510(0x1bd)](_0x150fef=>{telegramError(_0x150fef);}),toggleBot(_0x46086c,toggleStatus(_0x46086c),_0x3a4510(0x2a1)));}),tgBot['removeListener'](_0x4c356e(0x213));});}}),tgBot[_0x38743b(0x27f)](/\/off/,_0x49c9ca=>{const _0x45e8f8=_0x38743b;if(!validateTelegram(_0x49c9ca))return;tgBot[_0x45e8f8(0x1f1)](_0x45e8f8(0x213));const _0x472ad8=getEnabledBots();if(_0x472ad8[_0x45e8f8(0x291)]==0x0)tgBot[_0x45e8f8(0x2fe)](_0x49c9ca[_0x45e8f8(0x2d9)]['id'],_0x45e8f8(0x341))[_0x45e8f8(0x1bd)](_0x49392a=>{telegramError(_0x49392a);});else{if(_0x472ad8['length']>0x1)_0x472ad8['push']({'botID':_0x45e8f8(0x23b)});let _0x3c6ed6=[],_0x22b0f8=[];const _0x4705aa=_0x472ad8[_0x45e8f8(0x291)]%0x4==0x0||_0x472ad8['length']%0x4==0x3||_0x472ad8[_0x45e8f8(0x291)]%0x3==0x1?0x4:0x3;let _0xcb8346=0x0;_0x472ad8['forEach']((_0x1cd6ce,_0x210abc)=>{const _0x2c3761=_0x45e8f8;if(_0x210abc%_0x4705aa==0x0)_0x22b0f8=[];_0x22b0f8[_0x2c3761(0x235)]({'text':_0x1cd6ce[_0x2c3761(0x201)]==_0x2c3761(0x23b)?'All\x20bots':_0x2c3761(0x2bf)+_0x1cd6ce[_0x2c3761(0x201)],'callback_data':_0x1cd6ce[_0x2c3761(0x201)]}),_0x210abc%_0x4705aa==0x0&&(_0x3c6ed6[_0xcb8346]=_0x22b0f8,_0xcb8346++);}),tgBot[_0x45e8f8(0x2fe)](_0x49c9ca[_0x45e8f8(0x2d9)]['id'],_0x45e8f8(0x206),{'reply_markup':{'inline_keyboard':_0x3c6ed6}})[_0x45e8f8(0x1bd)](_0x23d972=>{telegramError(_0x23d972);}),tgBot['on'](_0x45e8f8(0x213),async _0x93841d=>{const _0x5e17f9=_0x45e8f8,_0x434cc9=_0x93841d[_0x5e17f9(0x300)],_0x23c7ef=_0x93841d[_0x5e17f9(0x229)];tgBot[_0x5e17f9(0x1e2)](_0x93841d['id'])[_0x5e17f9(0x336)](async()=>{const _0xf2b628=_0x5e17f9;_0x434cc9==_0xf2b628(0x23b)?(tgBot[_0xf2b628(0x2fe)](_0x23c7ef[_0xf2b628(0x2d9)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0xf2b628(0x1bd)](_0x16a3cf=>{telegramError(_0x16a3cf);}),_0x472ad8[_0xf2b628(0x270)](_0x4f7f05=>{const _0x2ba449=_0xf2b628;if(_0x4f7f05['botID']!='all')toggleBot(_0x4f7f05[_0x2ba449(0x201)],toggleStatus(_0x4f7f05[_0x2ba449(0x201)]),'stopped');})):(tgBot[_0xf2b628(0x2fe)](_0x23c7ef[_0xf2b628(0x2d9)]['id'],_0xf2b628(0x1ed)+_0x434cc9)['catch'](_0x4782fb=>{telegramError(_0x4782fb);}),toggleBot(_0x434cc9,toggleStatus(_0x434cc9),_0xf2b628(0x2a1)));}),tgBot['removeListener'](_0x5e17f9(0x213));});}}),tgBot[_0x38743b(0x27f)](/\/metrics/,_0x99ba8b=>{const _0x33c2ef=_0x38743b;if(!validateTelegram(_0x99ba8b))return;tgBot[_0x33c2ef(0x1f1)](_0x33c2ef(0x213));const _0x7d6400=getEnabledBots();if(_0x7d6400[_0x33c2ef(0x291)]==0x0)tgBot[_0x33c2ef(0x2fe)](_0x99ba8b[_0x33c2ef(0x2d9)]['id'],_0x33c2ef(0x341))[_0x33c2ef(0x1bd)](_0x527986=>{telegramError(_0x527986);});else{if(_0x7d6400[_0x33c2ef(0x291)]>0x1){let _0x3bcc79=[],_0x23d964=[];const _0x27dc94=_0x7d6400['length']%0x4==0x0||_0x7d6400[_0x33c2ef(0x291)]%0x4==0x3||_0x7d6400[_0x33c2ef(0x291)]%0x3==0x1?0x4:0x3;let _0x488b9b=0x0;_0x7d6400[_0x33c2ef(0x270)]((_0x5a177d,_0x5de9d5)=>{const _0x4c7106=_0x33c2ef;if(_0x5de9d5%_0x27dc94==0x0)_0x23d964=[];_0x23d964['push']({'text':_0x4c7106(0x2bf)+_0x5a177d[_0x4c7106(0x201)],'callback_data':_0x5a177d[_0x4c7106(0x201)]}),_0x5de9d5%_0x27dc94==0x0&&(_0x3bcc79[_0x488b9b]=_0x23d964,_0x488b9b++);}),tgBot[_0x33c2ef(0x2fe)](_0x99ba8b[_0x33c2ef(0x2d9)]['id'],_0x33c2ef(0x1ad),{'reply_markup':{'inline_keyboard':_0x3bcc79}})[_0x33c2ef(0x1bd)](_0x35ac45=>{telegramError(_0x35ac45);}),tgBot['on']('callback_query',async _0x4559e0=>{const _0xd56d5b=_0x33c2ef,_0x54f2a8=_0x4559e0[_0xd56d5b(0x300)],_0x5f5073=_0x4559e0[_0xd56d5b(0x229)];tgBot[_0xd56d5b(0x1e2)](_0x4559e0['id'])['then'](async()=>{if(pid[_0x54f2a8])pid[_0x54f2a8]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0xd56d5b(0x1f1)]('callback_query');});}else{const _0x4d17fd=_0x7d6400[0x0]['botID'];if(pid[_0x4d17fd])pid[_0x4d17fd][_0x33c2ef(0x329)]({'function':_0x33c2ef(0x25a),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x2ed338=>{const _0x4fdf81=_0x38743b;if(!validateTelegram(_0x2ed338))return;tgBot[_0x4fdf81(0x1f1)](_0x4fdf81(0x213));const _0x1c03db=getEnabledBots();if(_0x1c03db['length']==0x0)tgBot[_0x4fdf81(0x2fe)](_0x2ed338[_0x4fdf81(0x2d9)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x22d472=>{telegramError(_0x22d472);});else{if(_0x1c03db[_0x4fdf81(0x291)]>0x1){let _0x31129a=[],_0x24efd9=[];const _0x3a44ec=_0x1c03db[_0x4fdf81(0x291)]%0x4==0x0||_0x1c03db['length']%0x4==0x3||_0x1c03db[_0x4fdf81(0x291)]%0x3==0x1?0x4:0x3;let _0x534d2e=0x0;_0x1c03db[_0x4fdf81(0x270)]((_0x4357a2,_0x219c06)=>{const _0x30ea51=_0x4fdf81;if(_0x219c06%_0x3a44ec==0x0)_0x24efd9=[];_0x24efd9[_0x30ea51(0x235)]({'text':'Bot\x20'+_0x4357a2[_0x30ea51(0x201)],'callback_data':_0x4357a2[_0x30ea51(0x201)]}),_0x219c06%_0x3a44ec==0x0&&(_0x31129a[_0x534d2e]=_0x24efd9,_0x534d2e++);}),tgBot[_0x4fdf81(0x2fe)](_0x2ed338['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x31129a}})[_0x4fdf81(0x1bd)](_0x2ae2ac=>{telegramError(_0x2ae2ac);}),tgBot['on']('callback_query',async _0x3461ec=>{const _0x3813de=_0x4fdf81,_0x2f65c9=_0x3461ec[_0x3813de(0x300)],_0x42ec37=_0x3461ec['message'];tgBot[_0x3813de(0x1e2)](_0x3461ec['id'])[_0x3813de(0x336)](async()=>{const _0x161b3c=_0x3813de;if(pid[_0x2f65c9])pid[_0x2f65c9][_0x161b3c(0x329)]({'function':_0x161b3c(0x304),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x166f48=_0x1c03db[0x0][_0x4fdf81(0x201)];if(pid[_0x166f48])pid[_0x166f48][_0x4fdf81(0x329)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x38743b(0x27f)](/\/update/,async _0x45f19d=>{const _0x106f7f=_0x38743b;if(!validateTelegram(_0x45f19d))return;tgBot[_0x106f7f(0x1f1)](_0x106f7f(0x213)),await getMessages();if(!updateAvailable)tgBot[_0x106f7f(0x2fe)](_0x45f19d['chat']['id'],_0x106f7f(0x328))['catch'](_0x342da6=>{telegramError(_0x342da6);});else!validInstallation?tgBot['sendMessage'](_0x45f19d[_0x106f7f(0x2d9)]['id'],_0x106f7f(0x2a3))[_0x106f7f(0x1bd)](_0x4d5f65=>{telegramError(_0x4d5f65);}):(tgBot[_0x106f7f(0x2fe)](_0x45f19d[_0x106f7f(0x2d9)]['id'],_0x106f7f(0x182),{'reply_markup':{'inline_keyboard':[[{'text':_0x106f7f(0x1bf),'callback_data':_0x106f7f(0x2d4)},{'text':'No','callback_data':'no'}]]}})[_0x106f7f(0x1bd)](_0x2ceef9=>{telegramError(_0x2ceef9);}),tgBot['on'](_0x106f7f(0x213),async _0x1b5137=>{const _0x122dde=_0x106f7f,_0x4c360a=_0x1b5137['data'],_0x9bfce0=_0x1b5137[_0x122dde(0x229)];tgBot['answerCallbackQuery'](_0x1b5137['id'])[_0x122dde(0x336)](async()=>{const _0x1903f1=_0x122dde;_0x4c360a==_0x1903f1(0x2d4)&&(await tgBot[_0x1903f1(0x2fe)](_0x9bfce0[_0x1903f1(0x2d9)]['id'],_0x1903f1(0x214))['catch'](_0x51d61e=>{telegramError(_0x51d61e);}),updateBB(_0x1903f1(0x2d8))),_0x4c360a=='no'&&await tgBot['sendMessage'](_0x9bfce0[_0x1903f1(0x2d9)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')['catch'](_0x1f700a=>{telegramError(_0x1f700a);});}),tgBot[_0x122dde(0x1f1)](_0x122dde(0x213));}));}),tgBot['onText'](/\/reinstall/,async _0x3fdab2=>{const _0x563df3=_0x38743b;if(!validateTelegram(_0x3fdab2))return;tgBot['removeListener'](_0x563df3(0x213)),!validInstallation?tgBot[_0x563df3(0x2fe)](_0x3fdab2[_0x563df3(0x2d9)]['id'],_0x563df3(0x23e))[_0x563df3(0x1bd)](_0x417757=>{telegramError(_0x417757);}):(tgBot[_0x563df3(0x2fe)](_0x3fdab2['chat']['id'],_0x563df3(0x2ff),{'reply_markup':{'inline_keyboard':[[{'text':_0x563df3(0x1bf),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x563df3(0x1bd)](_0x4b7bf2=>{telegramError(_0x4b7bf2);}),tgBot['on']('callback_query',async _0x2cb567=>{const _0x37a566=_0x563df3,_0x2870ed=_0x2cb567['data'],_0x2a3dc8=_0x2cb567[_0x37a566(0x229)];tgBot[_0x37a566(0x1e2)](_0x2cb567['id'])[_0x37a566(0x336)](async()=>{const _0x3633b5=_0x37a566;_0x2870ed==_0x3633b5(0x2d4)&&(await tgBot['sendMessage'](_0x2a3dc8['chat']['id'],_0x3633b5(0x2b7))['catch'](_0x5bdfe9=>{telegramError(_0x5bdfe9);}),updateBB(_0x3633b5(0x1cf))),_0x2870ed=='no'&&await tgBot[_0x3633b5(0x2fe)](_0x2a3dc8['chat']['id'],_0x3633b5(0x2e3))[_0x3633b5(0x1bd)](_0xd1095e=>{telegramError(_0xd1095e);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0x38743b(0x27f)](/\/toggle/,_0x57d150=>{const _0x12fd41=_0x38743b;if(!validateTelegram(_0x57d150))return;tgBot[_0x12fd41(0x1f1)]('callback_query');const _0x3754d9=getBotsWithMode();if(_0x3754d9[_0x12fd41(0x291)]==0x0)tgBot[_0x12fd41(0x2fe)](_0x57d150[_0x12fd41(0x2d9)]['id'],_0x12fd41(0x341))[_0x12fd41(0x1bd)](_0x5bf314=>{telegramError(_0x5bf314);});else{let _0x59a9ae=[],_0xddba7a=[];const _0x215249=0x2;let _0x261cf9=0x0;_0x3754d9[_0x12fd41(0x270)]((_0x53d719,_0x3d86a5)=>{const _0x34b151=_0x12fd41;if(_0x3d86a5%_0x215249==0x0)_0xddba7a=[];_0xddba7a[_0x34b151(0x235)]({'text':_0x34b151(0x2bf)+_0x53d719[_0x34b151(0x201)]+'\x20('+_0x53d719['mode']+')','callback_data':_0x53d719[_0x34b151(0x201)]}),_0x3d86a5%_0x215249==0x0&&(_0x59a9ae[_0x261cf9]=_0xddba7a,_0x261cf9++);}),tgBot[_0x12fd41(0x2fe)](_0x57d150[_0x12fd41(0x2d9)]['id'],_0x12fd41(0x2a6),{'reply_markup':{'inline_keyboard':_0x59a9ae}})[_0x12fd41(0x1bd)](_0x27c7c4=>{telegramError(_0x27c7c4);}),tgBot['on']('callback_query',async _0x1d9808=>{const _0x56bd09=_0x12fd41,_0x425576=_0x1d9808[_0x56bd09(0x300)],_0x11b6e4=_0x1d9808[_0x56bd09(0x229)];tgBot['answerCallbackQuery'](_0x1d9808['id'])[_0x56bd09(0x336)](async()=>{const _0x32f261=_0x56bd09,_0x4ebef3=_0x3754d9[_0x32f261(0x1e6)](_0x3e2ce6=>_0x3e2ce6[_0x32f261(0x201)]==_0x425576),_0x2044eb=_0x4ebef3['mode']==_0x32f261(0x1d7)?_0x32f261(0x1d3):_0x32f261(0x1d7);tgBot['sendMessage'](_0x11b6e4[_0x32f261(0x2d9)]['id'],_0x32f261(0x218)+_0x425576+_0x32f261(0x2c1)+_0x2044eb+_0x32f261(0x265))[_0x32f261(0x1bd)](_0x292708=>{telegramError(_0x292708);}),toggleBotMode(_0x425576);}),tgBot[_0x56bd09(0x1f1)](_0x56bd09(0x213));});}}),tgBot['onText'](/\/names/,_0x1df609=>{const _0x5b1e43=_0x38743b;if(!validateTelegram(_0x1df609))return;let _0x30fc7e='';config[_0x5b1e43(0x270)](_0x153754=>{const _0x30b3c6=_0x5b1e43;_0x30fc7e+=_0x30b3c6(0x2bf)+_0x153754[_0x30b3c6(0x201)]+':\x20'+_0x153754['botname']+'\x0a';}),tgBot[_0x5b1e43(0x2fe)](_0x1df609['chat']['id'],_0x30fc7e,{'parse_mode':_0x5b1e43(0x1c5)})[_0x5b1e43(0x1bd)](_0xddaf39=>{telegramError(_0xddaf39);});}),tgBot[_0x38743b(0x27f)](/\/disable/,_0x3fae45=>{const _0x101709=_0x38743b;if(!validateTelegram(_0x3fae45))return;tgBot[_0x101709(0x2fe)](_0x3fae45[_0x101709(0x2d9)]['id'],'Notifications\x20disabled')[_0x101709(0x1bd)](_0x857cbc=>{telegramError(_0x857cbc);}),updateSetting(_0x101709(0x2d0),![]);}),tgBot['onText'](/\/help/,_0xd966a8=>{const _0x14d25c=_0x38743b;if(!validateTelegram(_0xd966a8))return;tgBot[_0x14d25c(0x2fe)](_0xd966a8['chat']['id'],_0x281a75)[_0x14d25c(0x1bd)](_0x35d746=>{telegramError(_0x35d746);});}),tgBot['on'](_0x38743b(0x1c7),_0x5ca33c=>{const _0x182f85=_0x38743b;_0x5ca33c[_0x182f85(0x33d)]()['includes'](_0x182f85(0x1a8))&&(logger[_0x182f85(0x2f6)](_0x182f85(0x2f9)),tgBot[_0x182f85(0x18b)](),tgBot=null,io['to']('botmanager')[_0x182f85(0x29a)](_0x182f85(0x20c),_0x182f85(0x2f9)));}),process[_0x38743b(0x331)](_0x38743b(0x1f8),()=>{const _0x3a5b84=_0x38743b;if(tgBot)tgBot[_0x3a5b84(0x18b)]();process[_0x3a5b84(0x192)](0x1);}),process[_0x38743b(0x331)]('SIGTERM',()=>{const _0x1aad5e=_0x38743b;if(tgBot)tgBot[_0x1aad5e(0x18b)]();process['exit'](0x1);});}}function disableTelegram(){const _0x1eed94=_0xf01a4f;tgBot&&(tgBot[_0x1eed94(0x18b)](),tgBot=null);}function sendTelegram(_0x3af3ff,_0xbff556){const _0x498c4c=_0xf01a4f;if(settings['telegramEnabled']){if(settings[_0x498c4c(0x2d3)]==_0x498c4c(0x23b)||(_0xbff556[_0x498c4c(0x1e9)]==_0x498c4c(0x19a)||_0xbff556[_0x498c4c(0x1e9)]=='warning'||_0xbff556[_0x498c4c(0x1e9)]==_0x498c4c(0x1f6))&&settings[_0x498c4c(0x2d3)]==_0x498c4c(0x337)||_0xbff556[_0x498c4c(0x1e9)]==_0x498c4c(0x1aa)&&settings[_0x498c4c(0x2d3)]=='orders'){if(tgBot&&settings[_0x498c4c(0x1b8)]){if(_0xbff556['showname'])tgBot[_0x498c4c(0x2fe)](settings['telegramChatId'],_0xbff556[_0x498c4c(0x25b)]+_0x498c4c(0x2a0)+_0xbff556[_0x498c4c(0x177)])[_0x498c4c(0x1bd)](_0x1390b7=>{telegramError(_0x1390b7);});else tgBot[_0x498c4c(0x2fe)](settings[_0x498c4c(0x1b8)],_0x498c4c(0x2bf)+_0x3af3ff+'\x20>\x20'+_0xbff556[_0x498c4c(0x177)])[_0x498c4c(0x1bd)](_0x5487a0=>{telegramError(_0x5487a0);});}}}}async function sendTelegramMsg(_0x5695d1,_0x24cdc8=_0xf01a4f(0x1c5)){const _0x16c1de=_0xf01a4f;return settings[_0x16c1de(0x2d0)]&&tgBot&&settings[_0x16c1de(0x1b8)]?(await tgBot['sendMessage'](settings[_0x16c1de(0x1b8)],_0x5695d1,{'parse_mode':_0x24cdc8})['catch'](_0xe8b5fa=>{telegramError(_0xe8b5fa);}),!![]):![];}function getDeviceWithIp(_0x2e332f){const _0x23ade9=_0xf01a4f;return devices[_0x23ade9(0x1e6)](_0xc6925d=>_0xc6925d['ip']===_0x2e332f);}function temporaryAccess2FA(_0x9263c2,_0x4f0c64){const _0x377201=_0xf01a4f;let _0x29c7b7=new Date(),_0x123265=![];if(lastIpApproval){if(_0x29c7b7-lastIpApproval<0x1388)_0x123265=!![];}lastIpApproval=new Date();if(_0x123265)return;tgBot&&settings[_0x377201(0x1b8)]&&(tgBot[_0x377201(0x1f1)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x377201(0x1a2)+normalizeIP(_0x4f0c64)[_0x377201(0x301)]+_0x377201(0x32c),{'parse_mode':_0x377201(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x377201(0x215),'callback_data':'5'},{'text':_0x377201(0x224),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x377201(0x2ea)}]]}})[_0x377201(0x1bd)](_0x515194=>{telegramError(_0x515194);}),tgBot['on'](_0x377201(0x213),async _0x761561=>{const _0x4f5310=_0x377201,_0x432334=_0x761561[_0x4f5310(0x300)],_0x46db03=_0x761561[_0x4f5310(0x229)];tgBot[_0x4f5310(0x1e2)](_0x761561['id'])[_0x4f5310(0x336)](async()=>{const _0x493a3d=_0x4f5310;devices[_0x9263c2][_0x493a3d(0x27a)]={'clientip':_0x4f0c64,'timestamp':new Date()[_0x493a3d(0x181)](),'expiry':_0x432334},_0x432334!='reject'?(await tgBot[_0x493a3d(0x2fe)](_0x46db03[_0x493a3d(0x2d9)]['id'],_0x493a3d(0x323)+_0x432334+_0x493a3d(0x330),{'parse_mode':_0x493a3d(0x1c5)})[_0x493a3d(0x1bd)](_0x26a765=>{telegramError(_0x26a765);}),io['to'](_0x9263c2)[_0x493a3d(0x29a)](_0x493a3d(0x1b6),{'access':{'allow':![],'reason':_0x493a3d(0x1c8),'token':null}})):(await tgBot[_0x493a3d(0x2fe)](_0x46db03[_0x493a3d(0x2d9)]['id'],_0x493a3d(0x21f))[_0x493a3d(0x1bd)](_0x2456a5=>{telegramError(_0x2456a5);}),io['to'](_0x9263c2)[_0x493a3d(0x29a)]('status',{'access':{'allow':![],'reason':_0x493a3d(0x318),'token':null}}));}),tgBot[_0x4f5310(0x1f1)]('callback_query');}));}function loginAccess2FA(_0x37d1eb,_0x401960){const _0x240936=_0xf01a4f;tgBot&&settings[_0x240936(0x1b8)]&&(tgBot['removeListener'](_0x240936(0x213)),tgBot[_0x240936(0x2fe)](settings[_0x240936(0x1b8)],_0x240936(0x253)+normalizeIP(_0x401960)[_0x240936(0x301)]+_0x240936(0x32c),{'parse_mode':_0x240936(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x240936(0x2ea),'callback_data':'reject'}]]}})[_0x240936(0x1bd)](_0xd6379f=>{telegramError(_0xd6379f);}),tgBot['on'](_0x240936(0x213),async _0x82a657=>{const _0x1aee4c=_0x240936,_0x7aa54b=_0x82a657['data'],_0x5f2cb2=_0x82a657[_0x1aee4c(0x229)];tgBot[_0x1aee4c(0x1e2)](_0x82a657['id'])[_0x1aee4c(0x336)](async()=>{const _0x5f25a9=_0x1aee4c;devices[_0x37d1eb][_0x5f25a9(0x287)]={'clientip':_0x401960,'timestamp':new Date()[_0x5f25a9(0x181)](),'expiry':_0x7aa54b},_0x7aa54b!=_0x5f25a9(0x2ea)?(await tgBot['sendMessage'](_0x5f2cb2[_0x5f25a9(0x2d9)]['id'],_0x5f25a9(0x272),{'parse_mode':'HTML'})[_0x5f25a9(0x1bd)](_0x4152b6=>{telegramError(_0x4152b6);}),io['to'](_0x37d1eb)[_0x5f25a9(0x29a)]('status',{'access':{'allow':![],'reason':_0x5f25a9(0x1c8),'token':null}})):(await tgBot[_0x5f25a9(0x2fe)](_0x5f2cb2[_0x5f25a9(0x2d9)]['id'],_0x5f25a9(0x2ee))[_0x5f25a9(0x1bd)](_0x24689a=>{telegramError(_0x24689a);}),io['to'](_0x37d1eb)[_0x5f25a9(0x29a)](_0x5f25a9(0x1b6),{'access':{'allow':![],'reason':_0x5f25a9(0x1da),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x361df9=_0xf01a4f;return dbConfig['get'](_0x361df9(0x259))[_0x361df9(0x1c1)]('botID')[_0x361df9(0x191)]({'status':_0x361df9(0x263)})['value']()||[];}function getDisabledBots(){const _0x50ef0b=_0xf01a4f;return dbConfig['get']('bots')['sortBy'](_0x50ef0b(0x201))[_0x50ef0b(0x191)]({'status':'disabled'})[_0x50ef0b(0x321)]()||[];}function getBotAttributes(_0x3eb170){const _0x553048=_0xf01a4f;let _0x18ccd6={};const _0x2a2e2a=configpath+_0x553048(0x325)+_0x3eb170+_0x553048(0x2da),_0x13ab6c=fs[_0x553048(0x190)](_0x2a2e2a);if(_0x13ab6c){const _0x412a07=fs['readFileSync'](_0x2a2e2a);try{const _0x4f8b68=JSON[_0x553048(0x2b6)](_0x412a07),_0x3aa9b1=_0x4f8b68?_0x4f8b68[_0x553048(0x1e5)][0x0]['headless']:![];_0x18ccd6[_0x553048(0x1e8)]=_0x3aa9b1?_0x553048(0x1d7):_0x553048(0x1d3),_0x18ccd6[_0x553048(0x25b)]=_0x4f8b68?_0x4f8b68[_0x553048(0x1e5)][0x0][_0x553048(0x25b)]:'Bot\x20'+_0x3eb170;}catch(_0x387d82){_0x18ccd6[_0x553048(0x1e8)]=_0x553048(0x1d3),_0x18ccd6['botname']=_0x553048(0x2bf)+_0x3eb170;}}else _0x18ccd6[_0x553048(0x1e8)]=_0x553048(0x1d3),_0x18ccd6[_0x553048(0x25b)]=_0x553048(0x2bf)+_0x3eb170;return _0x18ccd6;}function getBotsWithMode(){const _0x58b142=_0xf01a4f,_0x352260=dbConfig[_0x58b142(0x1cd)](_0x58b142(0x259))[_0x58b142(0x1c1)]('botID')[_0x58b142(0x321)]()||[];return _0x352260[_0x58b142(0x270)](_0x3b7f18=>{const _0x4f619c=_0x58b142;let _0x22c80f=getBotAttributes(_0x3b7f18[_0x4f619c(0x201)]);_0x3b7f18[_0x4f619c(0x1e8)]=_0x22c80f['mode'];}),_0x352260;}function getBotExchanges(){const _0x307e9f=_0xf01a4f;let _0x6496a2=[];const _0x3e8c80=dbConfig[_0x307e9f(0x1cd)]('bots')[_0x307e9f(0x1c1)](_0x307e9f(0x201))[_0x307e9f(0x321)]()||[];_0x3e8c80[_0x307e9f(0x270)](_0x253611=>{const _0xd444f5=_0x307e9f;if(_0x253611['status']==_0xd444f5(0x263)){const _0x2ab10f=configpath+_0xd444f5(0x325)+_0x253611['botID']+_0xd444f5(0x2da),_0x4fd4d3=fs[_0xd444f5(0x190)](_0x2ab10f);let _0x260cef;if(_0x4fd4d3){const _0x2f2834=fs[_0xd444f5(0x28a)](_0x2ab10f);try{const _0x206c0f=JSON[_0xd444f5(0x2b6)](_0x2f2834);_0x260cef=_0x206c0f?_0x206c0f[_0xd444f5(0x1e5)][0x0][_0xd444f5(0x2f3)]:null;}catch(_0x3204a2){}}if(_0x260cef)_0x6496a2[_0xd444f5(0x235)](_0x260cef);}});const _0x5008e1=[...new Set(_0x6496a2)]['sort']();return _0x5008e1;}async function initUser(){const _0x24790c=_0xf01a4f;if(!settings[_0x24790c(0x324)]){const _0x4d31e5=uuidRandom();mixpanel[_0x24790c(0x25d)](_0x4d31e5),updateSetting(_0x24790c(0x324),_0x4d31e5);}}async function initSecure(){const _0x6cd1a0=_0xf01a4f;let _0x959f8f=getSecure();if(!_0x959f8f[_0x6cd1a0(0x2d1)]('secret')){let _0x3c77c8=await generateKeys();_0x959f8f['publicKey']=_0x3c77c8[_0x6cd1a0(0x2dd)],_0x959f8f[_0x6cd1a0(0x22e)]=_0x3c77c8[_0x6cd1a0(0x22e)],_0x959f8f[_0x6cd1a0(0x2e1)]=crypto[_0x6cd1a0(0x267)](0x20)[_0x6cd1a0(0x33d)](_0x6cd1a0(0x2d2));;storeSecure(_0x959f8f);}}function getSettings(){return dbSettings['get']('settings')['value']()||{};}function getSecure(){const _0x27f768=_0xf01a4f;return dbSecure[_0x27f768(0x1cd)](_0x27f768(0x1d8))[_0x27f768(0x321)]()||{};}function getBlacklist(){const _0x359e55=_0xf01a4f;return dbSecure[_0x359e55(0x1cd)](_0x359e55(0x271))['value']()||[];}function broadcastToBots(_0xd61ce7,_0x119383){const _0x3f5455=_0xf01a4f;config[_0x3f5455(0x270)](_0x3d690a=>{const _0x1971c0=_0x3f5455;if(_0x3d690a[_0x1971c0(0x1b6)]=='enabled'&&_0x3d690a[_0x1971c0(0x1e3)]==_0x1971c0(0x2e0)){if(pid[_0x3d690a['botID']])pid[_0x3d690a[_0x1971c0(0x201)]][_0x1971c0(0x329)]({[_0xd61ce7]:_0x119383});}});}function storeSettings(_0x2c553b,_0x132251=![]){const _0x5bcb08=_0xf01a4f;_0x2c553b={...settings,..._0x2c553b};if(_0x132251&&_0x2c553b[_0x5bcb08(0x1d6)]!=_0x5bcb08(0x22f)&&_0x2c553b[_0x5bcb08(0x1d6)]!=_0x5bcb08(0x33c)&&_0x2c553b[_0x5bcb08(0x1d6)]!=''){const _0x54bea6=crypt[_0x5bcb08(0x1ae)](secure[_0x5bcb08(0x22e)],_0x2c553b[_0x5bcb08(0x1d6)])[_0x5bcb08(0x229)][_0x5bcb08(0x25e)]('@')[0x0],_0x1a33c0=bcrypt['hashSync'](_0x54bea6,saltRounds);_0x2c553b={..._0x2c553b,'bbPassword':_0x1a33c0};}if(_0x132251&&_0x2c553b[_0x5bcb08(0x1b1)]!=_0x5bcb08(0x22f)&&_0x2c553b[_0x5bcb08(0x1b1)]!='***'&&_0x2c553b['telegramToken']!=''){const _0x206e81=crypt[_0x5bcb08(0x1ae)](secure[_0x5bcb08(0x22e)],_0x2c553b[_0x5bcb08(0x1b1)])['message'][_0x5bcb08(0x25e)]('@')[0x0];_0x2c553b={..._0x2c553b,'telegramToken':_0x206e81};}const _0x566f4b=_0x2c553b[_0x5bcb08(0x1b1)]!='************'&&_0x2c553b[_0x5bcb08(0x1b1)]!=settings['telegramToken']||_0x2c553b[_0x5bcb08(0x2ec)]!=settings[_0x5bcb08(0x2ec)],_0x3d82eb=_0x2c553b[_0x5bcb08(0x1b1)]==''||_0x2c553b[_0x5bcb08(0x2ec)]=='';if(_0x566f4b)_0x2c553b[_0x5bcb08(0x2d3)]=_0x5bcb08(0x23b);for(const [_0x4cdfc4,_0x38e8e3]of Object[_0x5bcb08(0x2c5)](_0x2c553b)){if(_0x4cdfc4=='telegramToken'&&_0x38e8e3=='************'){_0x2c553b[_0x5bcb08(0x1b1)]=settings[_0x5bcb08(0x1b1)];continue;};if(_0x4cdfc4==_0x5bcb08(0x1d6)&&_0x38e8e3=='************'){_0x2c553b[_0x5bcb08(0x1d6)]=settings[_0x5bcb08(0x1d6)];continue;};dbSettings[_0x5bcb08(0x1a9)](_0x5bcb08(0x226)+_0x4cdfc4,_0x38e8e3)['write']();}settings=_0x2c553b,io['to']('botmanager')[_0x5bcb08(0x29a)](_0x5bcb08(0x1c3),cleanSettings()),broadcastToBots('timeshift',settings[_0x5bcb08(0x266)]);if(_0x566f4b&&!_0x3d82eb)initTelegram();if(_0x566f4b&&_0x3d82eb)disableTelegram();getAllClients()[_0x5bcb08(0x270)](_0x19cc73=>{const _0x17aa9c=_0x5bcb08;getSocket(_0x19cc73['id'])[_0x17aa9c(0x29a)](_0x17aa9c(0x1b6),{'access':{'allow':![],'reason':_0x17aa9c(0x1c8),'token':null}});});}function updateSetting(_0x496e42,_0x53ee55){const _0x5d7dc4=_0xf01a4f;dbSettings[_0x5d7dc4(0x1a9)](_0x5d7dc4(0x226)+_0x496e42,_0x53ee55)[_0x5d7dc4(0x185)](),settings=getSettings(),io['to'](_0x5d7dc4(0x231))[_0x5d7dc4(0x29a)](_0x5d7dc4(0x1c3),cleanSettings());}function storeSecure(_0x492961){const _0x22f3c1=_0xf01a4f;dbSecure['get'](_0x22f3c1(0x1d8))[_0x22f3c1(0x235)](_0x492961)[_0x22f3c1(0x185)](),secure=_0x492961;}function addBlacklist(_0x4e3f94){const _0x89709c=_0xf01a4f;cleanBlacklist();let _0x28f717;devices[_0x4e3f94]['telegramIpApproval']?_0x28f717=Math[_0x89709c(0x255)](devices[_0x4e3f94][_0x89709c(0x27a)]['expiry'],loginExpiry):_0x28f717=loginExpiry,dbSecure['get'](_0x89709c(0x271))['push']({'expiry':new Date()[_0x89709c(0x181)]()+_0x28f717*0x3c*0x3e8,'token':devices[_0x4e3f94][_0x89709c(0x217)][_0x89709c(0x1dc)]})[_0x89709c(0x185)](),blacklist=dbSecure['get'](_0x89709c(0x271))[_0x89709c(0x321)]();}function cleanBlacklist(){const _0x33c9e7=_0xf01a4f;let _0x3835af=dbSecure[_0x33c9e7(0x1cd)](_0x33c9e7(0x271))['cloneDeep']()[_0x33c9e7(0x321)](),_0x39371a=new Date()[_0x33c9e7(0x181)]();_0x3835af[_0x33c9e7(0x270)](_0xbebc6d=>{const _0x5bdbe1=_0x33c9e7;_0xbebc6d[_0x5bdbe1(0x18a)]<_0x39371a&&dbSecure[_0x5bdbe1(0x1cd)](_0x5bdbe1(0x271))['remove']({'expiry':_0xbebc6d[_0x5bdbe1(0x18a)]})[_0x5bdbe1(0x185)]();});}function initStates(){let _0x4d3156=getConfiguration();_0x4d3156['forEach'](_0xd18824=>{const _0x47f494=_0x5e41;_0xd18824[_0x47f494(0x1e3)]='stopped';}),storeConfiguration(_0x4d3156);}function onKeys(){const _0x2092fc=new RSA();return new Promise(_0x5779c8=>{const _0x2b598b=_0x5e41;_0x2092fc[_0x2b598b(0x25f)]()['then'](_0xd77570=>{_0x5779c8(_0xd77570);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x49f5ca=_0xf01a4f;let _0x95cc36=getSettings(),_0xa5f571=![];!_0x95cc36[_0x49f5ca(0x2d1)](_0x49f5ca(0x31c))&&(_0x95cc36['lastmsgtelegram']=0x0,_0xa5f571=!![]);!_0x95cc36[_0x49f5ca(0x2d1)](_0x49f5ca(0x24b))&&(_0x95cc36[_0x49f5ca(0x24b)]=0x0,_0xa5f571=!![]);!_0x95cc36['hasOwnProperty']('latestversion')&&(_0x95cc36[_0x49f5ca(0x29e)]=_0x49f5ca(0x2b5),_0xa5f571=!![]);if(_0xa5f571)storeSettings(_0x95cc36);}function storeConfiguration(_0x224403){const _0xd60b46=_0xf01a4f;dbConfig[_0xd60b46(0x1cd)](_0xd60b46(0x259))['remove']()[_0xd60b46(0x185)](),_0x224403[_0xd60b46(0x270)](_0x1cc944=>{const _0x340eea=_0xd60b46;delete _0x1cc944[_0x340eea(0x1e8)];}),dbConfig[_0xd60b46(0x1cd)]('bots')['push'](..._0x224403)[_0xd60b46(0x185)](),config=_0x224403;}function resetPassword(){const _0x43a87d=_0xf01a4f;tgBot&&settings[_0x43a87d(0x1b8)]&&(tgBot[_0x43a87d(0x1f1)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x43a87d(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x43a87d(0x2d4),'callback_data':_0x43a87d(0x2d4)},{'text':'no','callback_data':'no'}]]}})[_0x43a87d(0x1bd)](_0x121891=>{telegramError(_0x121891);}),tgBot['on'](_0x43a87d(0x213),async _0x340017=>{const _0x1dcfef=_0x43a87d,_0x191cee=_0x340017[_0x1dcfef(0x300)],_0x2d9769=_0x340017[_0x1dcfef(0x229)];tgBot[_0x1dcfef(0x1e2)](_0x340017['id'])[_0x1dcfef(0x336)](async()=>{const _0x419da5=_0x1dcfef;if(_0x191cee!='no'){const _0x3679aa=0xf,_0x3b6cad=_0x419da5(0x342),_0x2b758e=Array[_0x419da5(0x274)](crypto[_0x419da5(0x33f)](new Uint32Array(_0x3679aa)))[_0x419da5(0x216)](_0x38a25d=>_0x3b6cad[_0x38a25d%_0x3b6cad['length']])[_0x419da5(0x1c2)](''),_0x316690=bcrypt[_0x419da5(0x2f0)](_0x2b758e,saltRounds);storeSettings({'bbPassword':_0x316690}),await tgBot[_0x419da5(0x2fe)](_0x2d9769['chat']['id'],_0x419da5(0x26e)+_0x2b758e,{'parse_mode':_0x419da5(0x1c5)})['catch'](_0x1a1e3c=>{telegramError(_0x1a1e3c);});}else await tgBot[_0x419da5(0x2fe)](_0x2d9769[_0x419da5(0x2d9)]['id'],_0x419da5(0x17e))['catch'](_0x7f1fa9=>{telegramError(_0x7f1fa9);});}),tgBot[_0x1dcfef(0x1f1)](_0x1dcfef(0x213));}));}async function confirmRestore(_0x937a4e,_0x4d83b9){const _0x502d27=_0xf01a4f;io['to'](_0x502d27(0x231))[_0x502d27(0x29a)](_0x502d27(0x20c),_0x502d27(0x205),_0x502d27(0x1f6)),tgBot&&settings['telegramChatId']&&(tgBot[_0x502d27(0x1f1)](_0x502d27(0x213)),await tgBot[_0x502d27(0x2fe)](settings['telegramChatId'],_0x502d27(0x2c2),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x502d27(0x2d4)},{'text':'no','callback_data':'no'}]]}})[_0x502d27(0x1bd)](_0x3723f2=>{telegramError(_0x3723f2);}),tgBot['on'](_0x502d27(0x213),async _0x2ae2f1=>{const _0x496b07=_0x502d27,_0xe7d660=_0x2ae2f1[_0x496b07(0x300)],_0x1416d6=_0x2ae2f1['message'];tgBot['answerCallbackQuery'](_0x2ae2f1['id'])[_0x496b07(0x336)](async()=>{const _0x7aecbe=_0x496b07;_0xe7d660=='yes'?(await tgBot[_0x7aecbe(0x2fe)](_0x1416d6[_0x7aecbe(0x2d9)]['id'],_0x7aecbe(0x233),{'parse_mode':_0x7aecbe(0x1c5)})[_0x7aecbe(0x1bd)](_0x1181ed=>{telegramError(_0x1181ed);}),unzipFile(_0x937a4e,_0x4d83b9)):(logger[_0x7aecbe(0x320)]('Restore\x20process\x20aborted'),await tgBot[_0x7aecbe(0x2fe)](_0x1416d6[_0x7aecbe(0x2d9)]['id'],_0x7aecbe(0x1bc))[_0x7aecbe(0x1bd)](_0xf72e11=>{telegramError(_0xf72e11);}));}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x1d6582=_0xf01a4f,_0x136a28=new Date();return _0x136a28[_0x1d6582(0x32f)]()+'/'+(_0x136a28[_0x1d6582(0x221)]()+0x1)[_0x1d6582(0x33d)]()[_0x1d6582(0x2c6)](0x2,'0')+'/'+_0x136a28[_0x1d6582(0x286)]()['toString']()[_0x1d6582(0x2c6)](0x2,'0')+'\x20'+_0x136a28['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x136a28['getMinutes']()[_0x1d6582(0x33d)]()['padStart'](0x2,'0')+':'+_0x136a28['getSeconds']()[_0x1d6582(0x33d)]()[_0x1d6582(0x2c6)](0x2,'0');}function getTimeStamp(){const _0x5d6878=_0xf01a4f,_0x51e0d5=shiftedTime();return _0x51e0d5['getFullYear']()+'/'+(_0x51e0d5[_0x5d6878(0x221)]()+0x1)[_0x5d6878(0x33d)]()[_0x5d6878(0x2c6)](0x2,'0')+'/'+_0x51e0d5[_0x5d6878(0x286)]()[_0x5d6878(0x33d)]()[_0x5d6878(0x2c6)](0x2,'0')+'\x20'+_0x51e0d5['getHours']()[_0x5d6878(0x33d)]()[_0x5d6878(0x2c6)](0x2,'0')+':'+_0x51e0d5[_0x5d6878(0x1d0)]()[_0x5d6878(0x33d)]()['padStart'](0x2,'0')+':'+_0x51e0d5[_0x5d6878(0x1d4)]()[_0x5d6878(0x33d)]()[_0x5d6878(0x2c6)](0x2,'0');}function getCleanTimeStamp(){const _0x1f8fa8=_0xf01a4f,_0x18279e=shiftedTime();return _0x18279e['getFullYear']()+(_0x18279e['getMonth']()+0x1)['toString']()[_0x1f8fa8(0x2c6)](0x2,'0')+_0x18279e['getDate']()['toString']()[_0x1f8fa8(0x2c6)](0x2,'0')+'-'+_0x18279e[_0x1f8fa8(0x222)]()[_0x1f8fa8(0x33d)]()[_0x1f8fa8(0x2c6)](0x2,'0')+_0x18279e[_0x1f8fa8(0x1d0)]()[_0x1f8fa8(0x33d)]()['padStart'](0x2,'0')+_0x18279e[_0x1f8fa8(0x1d4)]()[_0x1f8fa8(0x33d)]()[_0x1f8fa8(0x2c6)](0x2,'0');}function shiftedTime(){const _0x263a82=_0xf01a4f,_0x1eef2f=new Date();let _0x2d224c=_0x1eef2f;if(settings['timeshift']&&settings[_0x263a82(0x266)]!==0x0)_0x2d224c=fns[_0x263a82(0x33b)](_0x1eef2f,{'hours':settings[_0x263a82(0x266)]});return _0x2d224c;}function startScheduler(){const _0x19339d=_0xf01a4f,_0x149508=new Date()[_0x19339d(0x171)](),_0x32dca4=shiftedTime()[_0x19339d(0x222)]();_0x32dca4==0x4&&backupConfigFiles();_0x32dca4==0x0&&rotateLogFiles();_0x149508%0x6==0x0&&triggerAnalytics();_0x149508%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2c3e9d){const _0x42fa90=_0xf01a4f;logger['debug'](_0x42fa90(0x2c9)+_0x2c3e9d);const _0x2fd9cb=getBotsWithMode();_0x2fd9cb[_0x42fa90(0x291)]>0x0?confirmRestore(configbackuppath,_0x2c3e9d):unzipFile(configbackuppath,_0x2c3e9d);}async function getBackupFiles(_0x9d2049=null){const _0x5491da=_0xf01a4f;let _0x9bffd3=[],_0x5b0237=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x5b0237[_0x5491da(0x198)]((_0x1763a0,_0x522852)=>_0x1763a0['name']<_0x522852[_0x5491da(0x1c9)]?0x1:_0x522852['name']<_0x1763a0[_0x5491da(0x1c9)]?-0x1:0x0),_0x5b0237[_0x5491da(0x270)](_0x37bb22=>{const _0x2cad35=_0x5491da;if(!_0x37bb22[_0x2cad35(0x28b)]()&&_0x37bb22['name'][_0x2cad35(0x2f1)]('backup-full@')&&_0x37bb22['name'][_0x2cad35(0x1eb)](_0x2cad35(0x283))){const _0x2d0fbd=formatDate(fs[_0x2cad35(0x2e8)](configbackuppath+_0x37bb22[_0x2cad35(0x1c9)])['mtime']);_0x9bffd3['push']({'name':_0x37bb22[_0x2cad35(0x1c9)],'mtime':_0x2d0fbd});}});if(_0x9d2049)io['to'](_0x9d2049)['emit'](_0x5491da(0x29c),_0x9bffd3);else return _0x9bffd3;}async function backupConfigFiles(){const _0x3dc5a6=_0xf01a4f;await zipFiles(_0x3dc5a6(0x306));const _0x526fd0=getCleanTimeStamp();fs[_0x3dc5a6(0x170)](zippath+_0x3dc5a6(0x2a4),configbackuppath+(_0x3dc5a6(0x303)+_0x526fd0+_0x3dc5a6(0x283)));let _0x5bedb4=fs[_0x3dc5a6(0x2e7)](configbackuppath,{'withFileTypes':!![]});_0x5bedb4['sort']((_0x9aa144,_0x2ba093)=>_0x9aa144[_0x3dc5a6(0x1c9)]<_0x2ba093['name']?0x1:_0x2ba093[_0x3dc5a6(0x1c9)]<_0x9aa144[_0x3dc5a6(0x1c9)]?-0x1:0x0),_0x5bedb4[_0x3dc5a6(0x291)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x5bedb4[maxBackups][_0x3dc5a6(0x1c9)]);}function rotateLogFiles(){const _0x3cdb7d=_0xf01a4f,_0x2f283f=fs[_0x3cdb7d(0x2e8)](logspath+_0x3cdb7d(0x2b2)),_0x4fb38d=_0x2f283f[_0x3cdb7d(0x30c)]/0x400;if(_0x4fb38d>0x32){let _0x2cd896=fs[_0x3cdb7d(0x2e7)](logspath,{'withFileTypes':!![]});_0x2cd896[_0x3cdb7d(0x198)]((_0x51652b,_0x515bff)=>_0x51652b[_0x3cdb7d(0x1c9)]<_0x515bff[_0x3cdb7d(0x1c9)]?0x1:_0x515bff[_0x3cdb7d(0x1c9)]<_0x51652b[_0x3cdb7d(0x1c9)]?-0x1:0x0),_0x2cd896[_0x3cdb7d(0x270)](_0x150aef=>{const _0xe7f494=_0x3cdb7d;if(_0x150aef['name']=='output-002.log')fs['copyFileSync'](logspath+_0x150aef['name'],logspath+_0xe7f494(0x280));if(_0x150aef[_0xe7f494(0x1c9)]=='output-001.log')fs['copyFileSync'](logspath+_0x150aef[_0xe7f494(0x1c9)],logspath+_0xe7f494(0x2c3));_0x150aef[_0xe7f494(0x1c9)]=='output-000.log'&&(fs[_0xe7f494(0x170)](logspath+_0x150aef[_0xe7f494(0x1c9)],logspath+_0xe7f494(0x1f2)),fs[_0xe7f494(0x2f4)](logspath+_0x150aef[_0xe7f494(0x1c9)],''));});}}async function zipFiles(_0x385783){const _0x147079=_0xf01a4f;let _0x3f7387;if(_0x385783==_0x147079(0x26a))_0x3f7387=logspath;if(_0x385783==_0x147079(0x1cb))_0x3f7387=configpath;if(_0x385783==_0x147079(0x306))_0x3f7387=configpath;let _0x3fdca2=fs[_0x147079(0x2e7)](_0x3f7387,{'withFileTypes':!![]});const _0x3607c6=new require(_0x147079(0x288))();_0x3fdca2[_0x147079(0x270)](_0x1d5cdb=>{const _0x488a61=_0x147079;if(!_0x1d5cdb[_0x488a61(0x28b)]()){let _0x4f0829=fs[_0x488a61(0x28a)](_0x3f7387+_0x1d5cdb['name']);if(_0x385783==_0x488a61(0x1cb)){const _0x101fbb=/^bot-[0-9]{3}-config.json$/,_0x195213=_0x101fbb[_0x488a61(0x2de)](_0x1d5cdb[_0x488a61(0x1c9)]);if(_0x195213){const _0x11884e=JSON[_0x488a61(0x2b6)](_0x4f0829);_0x11884e[_0x488a61(0x1e5)][0x0]&&(_0x11884e[_0x488a61(0x1e5)][0x0]['apiKey']=_0x488a61(0x33c),_0x11884e['bot'][0x0][_0x488a61(0x2b4)]=_0x488a61(0x33c)),_0x4f0829=JSON[_0x488a61(0x290)](_0x11884e,null,0x2);}if(_0x1d5cdb['name']=='bb-settings.json'){const _0x15a9c9=JSON['parse'](_0x4f0829);if(_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x27c)])_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x27c)]=![];if(_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x1d6)])_0x15a9c9['settings'][_0x488a61(0x1d6)]=_0x488a61(0x33c);if(_0x15a9c9['settings'][_0x488a61(0x1b1)])_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x1b1)]=_0x488a61(0x33c);if(_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x1b8)])_0x15a9c9[_0x488a61(0x1c3)][_0x488a61(0x1b8)]=null;_0x4f0829=JSON['stringify'](_0x15a9c9,null,0x2);}if(_0x1d5cdb['name']!='bb-secure.json')_0x3607c6[_0x488a61(0x244)](_0x1d5cdb['name'],_0x4f0829);}else _0x3607c6[_0x488a61(0x244)](_0x1d5cdb[_0x488a61(0x1c9)],_0x4f0829);}});const _0x1497e7=_0x3607c6['generate']({'base64':![],'compression':'DEFLATE'});fs[_0x147079(0x2f4)](zippath+(_0x385783+_0x147079(0x283)),_0x1497e7,_0x147079(0x230));}async function unzipFile(_0x43d67d,_0x266cfb){const _0x39c686=_0xf01a4f;fs[_0x39c686(0x2e7)](configpath,{'withFileTypes':!![]})[_0x39c686(0x270)](_0x1b1837=>{const _0x40a915=_0x39c686;if(!_0x1b1837[_0x40a915(0x28b)]())fs['rmSync'](configpath+_0x1b1837['name']);});const _0x29ee97=fs['readFileSync'](_0x43d67d+_0x266cfb,_0x39c686(0x230)),_0x137d21=new require(_0x39c686(0x288))(_0x29ee97,{'base64':![],'checkCRC32':!![]});Object[_0x39c686(0x2ca)](_0x137d21[_0x39c686(0x277)])['forEach'](_0x52503c=>{const _0x4265d7=_0x39c686,_0x3e1621=_0x137d21[_0x4265d7(0x277)][_0x52503c];fs[_0x4265d7(0x2f4)](configpath+_0x3e1621['name'],_0x3e1621[_0x4265d7(0x26c)]);}),fs[_0x39c686(0x2e7)](temppath,{'withFileTypes':!![]})[_0x39c686(0x270)](_0x27115b=>{const _0x27235f=_0x39c686;if(!_0x27115b[_0x27235f(0x28b)]())fs[_0x27235f(0x1ff)](temppath+_0x27115b['name']);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x39c686(0x329)]({'restore':!![]},_0xbc6380=>{});}async function getPublicIp(){const _0x562478=_0xf01a4f;try{const _0x116e61=await axios[_0x562478(0x1cd)](_0x562478(0x28e));publicip=_0x116e61[_0x562478(0x300)]['ip'];}catch(_0x1353a5){}}async function triggerAnalytics(){const _0x5ae1ef=_0xf01a4f;if(!publicip)await getPublicIp();const _0x54d20b=getBotsWithMode();let _0x18640e=0x0;_0x54d20b[_0x5ae1ef(0x270)](_0x1449ab=>{const _0x490833=_0x5ae1ef;if(_0x1449ab[_0x490833(0x1b6)]==='enabled')_0x18640e++;});const _0x408566=getBotExchanges();mixpanel[_0x5ae1ef(0x2e5)](_0x5ae1ef(0x249),{'distinct_id':settings[_0x5ae1ef(0x324)],'ip':publicip,'version':serverversion,'numbots':_0x54d20b['length'],'numbotsenabled':_0x18640e,'exchanges':_0x408566});}async function getMessages(){const _0x18e4ac=_0xf01a4f,_0x495bb0=_0x18e4ac(0x2b3),_0x1e29ea=new GraphQLClient(_0x495bb0),_0xfb6df1={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x30fd42=serverversion[_0x18e4ac(0x25e)]('.'),_0x182f82=_0x30fd42[0x0]+'.'+_0x30fd42[0x1],_0x49c7f1=Math[_0x18e4ac(0x175)](settings[_0x18e4ac(0x31c)],settings[_0x18e4ac(0x24b)]),_0x2ac2d3={'last':parseInt(_0x49c7f1),'bbm':_0x182f82},_0x32301a=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2876ff;try{_0x2876ff=await _0x1e29ea[_0x18e4ac(0x211)](_0x32301a,_0x2ac2d3,_0xfb6df1);}catch(_0x4d6404){}if(_0x2876ff&&_0x2876ff[_0x18e4ac(0x195)]){let _0xcf292b=settings[_0x18e4ac(0x31c)];newMessages=[];for(const _0x634613 of _0x2876ff[_0x18e4ac(0x195)]){newMessages['push'](_0x634613);if(_0x634613[_0x18e4ac(0x1e0)])updateSetting(_0x18e4ac(0x29e),_0x634613[_0x18e4ac(0x1e0)]);let _0x1698af=_0x634613[_0x18e4ac(0x1e0)]?serverversion>=_0x634613[_0x18e4ac(0x1e0)]:![];if(!_0x1698af&&_0x634613['number']>_0xcf292b){if(_0x634613[_0x18e4ac(0x2a8)]===_0x18e4ac(0x305)||serverversion['startsWith'](_0x634613[_0x18e4ac(0x2a8)])){let _0x2e5cf8=''+_0x634613['title']+'\x0a\x0a'+_0x634613[_0x18e4ac(0x229)];const _0x2fe91f=await sendTelegramMsg(toTelegramMarkdown(_0x2e5cf8),_0x18e4ac(0x2a9));if(_0x2fe91f)_0xcf292b=_0x634613[_0x18e4ac(0x1b4)];}}}updateAvailable=isNewerVersion(settings[_0x18e4ac(0x29e)],serverversion),updateSetting(_0x18e4ac(0x31c),_0xcf292b),emitMessages();}}function emitMessages(){const _0x5727a9=_0xf01a4f,_0x539649=settings['lastmsgemitted'];let _0x151cb4=[];newMessages[_0x5727a9(0x270)](_0x46af00=>{const _0x23826b=_0x5727a9;_0x46af00[_0x23826b(0x1b4)]>_0x539649&&_0x151cb4[_0x23826b(0x235)](_0x46af00);}),_0x151cb4[_0x5727a9(0x291)]>0x0&&getAllClients()[_0x5727a9(0x270)](_0x55794e=>{const _0x4fe86f=_0x5727a9;getSocket(_0x55794e['id'])[_0x4fe86f(0x29a)]('message',_0x151cb4);});}function confirmMessage(_0x58f005){const _0x50237c=_0xf01a4f;updateSetting(_0x50237c(0x24b),Number(_0x58f005));}function isNewerVersion(_0x37e16e,_0x4c70cd){const _0x58395d=_0xf01a4f,_0x58eb39=_0x4c70cd[_0x58395d(0x25e)]('.'),_0x3f335a=_0x37e16e[_0x58395d(0x25e)]('.');for(var _0x1d3cf4=0x0;_0x1d3cf4<_0x3f335a[_0x58395d(0x291)];_0x1d3cf4++){const _0x25fc93=~~_0x3f335a[_0x1d3cf4],_0x469cf5=~~_0x58eb39[_0x1d3cf4];if(_0x25fc93>_0x469cf5)return!![];if(_0x25fc93<_0x469cf5)return![];}return![];}function toTelegramMarkdown(_0x1360f7){const _0x2a34ec=_0xf01a4f,_0x19c91c=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5d94dd=/\*{2}(.+?)\*{2}/gim;return _0x1360f7=_0x1360f7['replace'](_0x19c91c,'$1_$2_$3')[_0x2a34ec(0x241)](_0x5d94dd,_0x2a34ec(0x289)),_0x1360f7;}async function validateConfigFile(){const _0x156785=_0xf01a4f,_0x522c18=dbConfig[_0x156785(0x1cd)](_0x156785(0x259))['sortBy'](_0x156785(0x201))[_0x156785(0x321)]()||[];if(_0x522c18[_0x156785(0x291)]==0x0){let _0x365ce5=0x0,_0x5bf984=[];const _0x2df250=/^bot-([0-9]{3})-config.json$/,_0x4aee08=fs[_0x156785(0x2e7)](configpath);_0x4aee08[_0x156785(0x270)](_0x5037e5=>{const _0x1de610=_0x156785,_0x23f9f1=_0x2df250[_0x1de610(0x2b0)](_0x5037e5);if(_0x23f9f1){const _0x1af359=_0x23f9f1[0x1];let _0x46903c=getBotAttributes(_0x1af359);_0x5bf984['push']({'botID':_0x1af359,'botname':_0x46903c[_0x1de610(0x25b)],'status':_0x1de610(0x344),'live':_0x1de610(0x2a1)}),_0x365ce5++;}}),_0x365ce5!=0x0&&(dbConfig[_0x156785(0x1cd)](_0x156785(0x259))[_0x156785(0x1bb)](_0x5bf984)[_0x156785(0x185)](),config=_0x5bf984,restoredConfigFile=_0x365ce5);}}async function restoreConfigNotify(_0x14f6f7){const _0x22bad2=_0xf01a4f;let _0x1aaf39;if(restoredConfigFile==0x1)_0x1aaf39=_0x22bad2(0x268);else _0x1aaf39=_0x22bad2(0x1b9);if(_0x14f6f7)io['to'](_0x22bad2(0x231))[_0x22bad2(0x29a)](_0x22bad2(0x20c),_0x1aaf39);else{logger[_0x22bad2(0x1ba)]('-----------------------------------------------------------------------------------'),logger[_0x22bad2(0x1ba)](_0x1aaf39),logger[_0x22bad2(0x1ba)](_0x22bad2(0x1ca)),logger['simple']('');if(tgBot&&settings[_0x22bad2(0x1b8)]&&settings[_0x22bad2(0x2d3)]!=_0x22bad2(0x1fa))tgBot[_0x22bad2(0x2fe)](settings[_0x22bad2(0x1b8)],_0x22bad2(0x18d)+_0x1aaf39)[_0x22bad2(0x1bd)](_0x27d691=>{telegramError(_0x27d691);});}}function validateCredentials(_0x268f88,_0x569990){const _0x427891=_0xf01a4f;if(_0x268f88[_0x427891(0x2c4)]==settings[_0x427891(0x30f)]&&bcrypt[_0x427891(0x261)](_0x268f88['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x427891(0x179),'token':null};else{const _0x4c6532=generateLoginToken(_0x569990);return{'allow':!![],'reason':_0x427891(0x2d7),'token':_0x4c6532};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x19409e){const _0x4f1455=_0xf01a4f,_0x34ce5b=generateLoginToken(_0x19409e);return{'allow':!![],'reason':_0x4f1455(0x2d7),'token':_0x34ce5b};}function validateAccess(_0x4430e2,_0x4943d2,_0x5b0fd5){const _0x2bb267=_0xf01a4f,_0x285864=_0x5b0fd5?_0x5b0fd5:devices[_0x4943d2]['ip'];let _0x310f92;const _0x2d9e6e=_0x2866a0=>{const _0x423e7a=_0x5e41;if(settings[_0x423e7a(0x27c)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x4943d2)){const _0x4b9853=generateLoginToken(_0x4943d2);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x4b9853};}else return{'allow':![],'reason':_0x423e7a(0x21d),'token':null};}else return _0x310f92=validToken(_0x2866a0,_0x4943d2),_0x310f92['hasOwnProperty'](_0x423e7a(0x1f6))?{'allow':!![],'reason':_0x423e7a(0x28f),'token':_0x2866a0}:{'allow':![],'reason':_0x423e7a(0x21d),'token':null};}else return{'allow':!![],'reason':_0x423e7a(0x2b1),'token':null};};if(settings[_0x2bb267(0x1ec)]){let _0x159304=[...settings['whitelist'],_0x2bb267(0x32e),_0x2bb267(0x210),_0x2bb267(0x31b)];if(_0x159304[_0x2bb267(0x31f)](_0x285864))return _0x2d9e6e(_0x4430e2);else{_0x310f92=validToken(_0x4430e2,_0x4943d2);if(_0x310f92[_0x2bb267(0x2d1)](_0x2bb267(0x1f6)))return _0x2d9e6e(_0x4430e2);else{if(telegramIpApproved(_0x4943d2)){const _0x1323a5=generateToken(_0x4943d2);return _0x310f92=_0x2d9e6e(_0x4430e2),_0x310f92[_0x2bb267(0x18f)]?{'allow':!![],'reason':_0x2bb267(0x281),'token':_0x1323a5}:_0x310f92;}else return settings[_0x2bb267(0x2fc)]?{'allow':![],'reason':_0x2bb267(0x333),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x2d9e6e(_0x4430e2);}function timelyDecrypt(_0x9f1444,_0x5bcdfd=!![]){const _0x31e9be=_0xf01a4f;if(_0x9f1444)try{const _0x1e0b26=crypt['decrypt'](secure[_0x31e9be(0x22e)],_0x9f1444)[_0x31e9be(0x229)],_0x484e8f=_0x1e0b26[_0x31e9be(0x25e)]('@')[0x0],_0x3fa785=_0x1e0b26['split']('@')[0x1],_0x56c9f8=new Date()[_0x31e9be(0x181)]();if(_0x5bcdfd){if(_0x56c9f8-_0x3fa785<maxSecretAge*0x3e8)return _0x484e8f;else return![];}else return _0x484e8f;}catch(_0x43d20d){return![];}else return![];}const validToken=(_0x4d59c3,_0x362f76)=>{const _0x9c7624=_0xf01a4f,_0x8b0727=devices[_0x362f76]['ip'];if(!_0x4d59c3)return{'error':_0x9c7624(0x247)};for(let _0xb53f11 of blacklist){if(_0xb53f11[_0x9c7624(0x1dc)]==_0x4d59c3)return{'error':_0x9c7624(0x20f)};}let _0x357ab0;try{_0x357ab0=jwt[_0x9c7624(0x239)](_0x4d59c3,secure[_0x9c7624(0x2e1)]+_0x362f76);}catch{return{'error':_0x9c7624(0x232)};}if(!_0x357ab0['hasOwnProperty'](_0x9c7624(0x242))&&!_0x357ab0[_0x9c7624(0x2d1)]('username')||!_0x357ab0['hasOwnProperty'](_0x9c7624(0x1ce)))return{'error':_0x9c7624(0x2ae)};if(!_0x357ab0[_0x9c7624(0x2d1)](_0x9c7624(0x2c4))&&_0x357ab0[_0x9c7624(0x2d1)](_0x9c7624(0x242))){const {clientip:_0x383a9d}=_0x357ab0;return _0x8b0727==_0x383a9d?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x9c7624(0x23d)};}else{if(_0x357ab0['hasOwnProperty'](_0x9c7624(0x2c4))&&_0x357ab0[_0x9c7624(0x2d1)](_0x9c7624(0x242))){const {username:_0x13d964,clientip:_0x5ca233}=_0x357ab0;return settings[_0x9c7624(0x30f)]==_0x13d964&&_0x8b0727==_0x5ca233?{'success':_0x9c7624(0x1c4)}:{'error':_0x9c7624(0x32a)};}}},generateLoginToken=_0x4a360=>{const _0x5d17e7=_0xf01a4f;if(_0x4a360){const _0x5ab72e=devices[_0x4a360]['ip'];return jwt[_0x5d17e7(0x24a)]({'username':settings[_0x5d17e7(0x30f)],'clientip':_0x5ab72e},secure[_0x5d17e7(0x2e1)]+_0x4a360,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x50e1de=>{const _0x45f69e=_0xf01a4f;if(_0x50e1de){const _0x3b465c=devices[_0x50e1de]['ip'];return jwt['sign']({'clientip':_0x3b465c},secure[_0x45f69e(0x2e1)]+_0x50e1de,{'expiresIn':devices[_0x50e1de][_0x45f69e(0x27a)][_0x45f69e(0x18a)]*0x3c});}else return![];},telegramIpApproved=_0x300a61=>{const _0x39c56c=_0xf01a4f;let _0x416c18=![];return devices[_0x300a61][_0x39c56c(0x27a)]&&devices[_0x300a61][_0x39c56c(0x27a)]['expiry']!=_0x39c56c(0x2ea)&&(_0x416c18=devices[_0x300a61][_0x39c56c(0x27a)]['clientip']==devices[_0x300a61]['ip']&&new Date()[_0x39c56c(0x181)]()-devices[_0x300a61][_0x39c56c(0x27a)]['timestamp']<devices[_0x300a61][_0x39c56c(0x27a)][_0x39c56c(0x18a)]*0x3c*0x3e8),_0x416c18;},telegram2FaApproved=_0x53b730=>{const _0x292c4e=_0xf01a4f;let _0x383213=![];return devices[_0x53b730][_0x292c4e(0x287)]&&devices[_0x53b730][_0x292c4e(0x287)][_0x292c4e(0x18a)]!='reject'&&(_0x383213=devices[_0x53b730][_0x292c4e(0x287)]['clientip']==devices[_0x53b730]['ip']&&new Date()['getTime']()-devices[_0x53b730]['telegram2FaApproval'][_0x292c4e(0x1be)]<devices[_0x53b730][_0x292c4e(0x287)]['expiry']*0x3c*0x3e8),_0x383213;},normalizeIP=_0x24168b=>{const _0x198efe=_0xf01a4f;let _0x383928=null,_0x275d1b=null;if(ipaddr[_0x198efe(0x189)](_0x24168b)){const _0x19edb5=ipaddr[_0x198efe(0x2b6)](_0x24168b);_0x19edb5[_0x198efe(0x254)]()===_0x198efe(0x343)?(_0x19edb5[_0x198efe(0x1f3)]()&&(_0x383928=_0x19edb5[_0x198efe(0x2cd)]()['toString']()),_0x275d1b=_0x19edb5['toString']()):(_0x383928=_0x19edb5[_0x198efe(0x33d)](),_0x275d1b=_0x19edb5[_0x198efe(0x29f)]()[_0x198efe(0x33d)]());}return{'show':_0x383928?_0x383928:_0x275d1b,'store':_0x275d1b};};function formatDate(_0x1568f5){const _0x187887=_0xf01a4f;return _0x1568f5['getFullYear']()+'/'+(_0x1568f5[_0x187887(0x221)]()+0x1)[_0x187887(0x33d)]()[_0x187887(0x2c6)](0x2,'0')+'/'+_0x1568f5[_0x187887(0x286)]()[_0x187887(0x33d)]()['padStart'](0x2,'0')+'\x20'+_0x1568f5['getHours']()[_0x187887(0x33d)]()[_0x187887(0x2c6)](0x2,'0')+':'+_0x1568f5[_0x187887(0x1d0)]()[_0x187887(0x33d)]()[_0x187887(0x2c6)](0x2,'0')+':'+_0x1568f5[_0x187887(0x1d4)]()[_0x187887(0x33d)]()[_0x187887(0x2c6)](0x2,'0');}function sleep(_0x1b4c66){return new Promise(_0x4f7f7e=>setTimeout(_0x4f7f7e,_0x1b4c66));}