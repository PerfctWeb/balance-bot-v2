const _0x3a1e10=_0x762f;(function(_0x75eab2,_0x2b01bd){const _0x151af1=_0x762f,_0x4c98bf=_0x75eab2();while(!![]){try{const _0x2d642c=-parseInt(_0x151af1(0x1e4))/0x1*(parseInt(_0x151af1(0x260))/0x2)+parseInt(_0x151af1(0x2f6))/0x3+parseInt(_0x151af1(0x2f3))/0x4*(parseInt(_0x151af1(0x18f))/0x5)+-parseInt(_0x151af1(0x20a))/0x6+parseInt(_0x151af1(0x1a0))/0x7+parseInt(_0x151af1(0x278))/0x8+-parseInt(_0x151af1(0x1d4))/0x9;if(_0x2d642c===_0x2b01bd)break;else _0x4c98bf['push'](_0x4c98bf['shift']());}catch(_0x11273e){_0x4c98bf['push'](_0x4c98bf['shift']());}}}(_0x479d,0xefbe6));const _0x3a0525=function(){let _0xc5b4c8=!![];return function(_0x4d9e78,_0x261131){const _0x30fd2c=_0xc5b4c8?function(){const _0x2efc0e=_0x762f;if(_0x261131){const _0x41d379=_0x261131[_0x2efc0e(0x2bd)](_0x4d9e78,arguments);return _0x261131=null,_0x41d379;}}:function(){};return _0xc5b4c8=![],_0x30fd2c;};}(),_0x4c1372=_0x3a0525(this,function(){const _0x1fef22=_0x762f;return _0x4c1372['toString']()[_0x1fef22(0x318)](_0x1fef22(0x325))[_0x1fef22(0x300)]()[_0x1fef22(0x160)](_0x4c1372)[_0x1fef22(0x318)](_0x1fef22(0x325));});_0x4c1372();'use strict';process[_0x3a1e10(0x1ec)][_0x3a1e10(0x28f)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x3a1e10(0x1a1)),low=require(_0x3a1e10(0x231)),FileSync=require(_0x3a1e10(0x262)),path=require(_0x3a1e10(0x2ec)),crypto=require(_0x3a1e10(0x2b3)),Crypt=require(_0x3a1e10(0x247))['Crypt'],RSA=require(_0x3a1e10(0x247))[_0x3a1e10(0x221)],bcrypt=require(_0x3a1e10(0x21d)),jwt=require(_0x3a1e10(0x275)),ipaddr=require('ipaddr.js'),argv=require(_0x3a1e10(0x245))(process[_0x3a1e10(0x2d9)][_0x3a1e10(0x271)](0x2))[_0x3a1e10(0x2d9)],uuidRandom=require(_0x3a1e10(0x27a)),TelegramBot=require(_0x3a1e10(0x282)),Mixpanel=require('mixpanel'),axios=require(_0x3a1e10(0x23f)),{GraphQLClient,gql}=require(_0x3a1e10(0x1b7)),util=require('util'),fileUpload=require(_0x3a1e10(0x164)),{networkInterfaces}=require('os'),PORT=argv[_0x3a1e10(0x2c0)]||_0x3a1e10(0x1a7),pattern=/^[0-9]{2,4}$/;!pattern[_0x3a1e10(0x217)](PORT)&&(console[_0x3a1e10(0x20c)](_0x3a1e10(0x2a1)+PORT+_0x3a1e10(0x261)),process[_0x3a1e10(0x2d0)](0x1));const HOST=argv[_0x3a1e10(0x1dd)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x3a1e10(0x2b0)]['node'];let bbpath=_0x3a1e10(0x1d0),bbpath2='';const botfile='bot.js',configfile=_0x3a1e10(0x2e3),settingsfile='bb-settings.json',securefile=_0x3a1e10(0x319),environment=require('./'+bbpath2+_0x3a1e10(0x2d5))[_0x3a1e10(0x1e6)]||'production',maxBackups=0xa;let validInstallation=!![];!fs[_0x3a1e10(0x19a)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3a1e10(0x196)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x3a1e10(0x1cf),logspath=userID?bbpath+_0x3a1e10(0x255)+userID+'/':bbpath+_0x3a1e10(0x255),zippath=userID?bbpath+_0x3a1e10(0x1d8)+userID+'/':bbpath+_0x3a1e10(0x1d8),loggerfile=fs[_0x3a1e10(0x2af)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x3a1e10(0x26b)+userID+'/':bbpath+'temp/';!fs[_0x3a1e10(0x19a)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x3a1e10(0x1b9)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x3a1e10(0x1b9)](logspath);!fs['existsSync'](zippath)&&fs[_0x3a1e10(0x1b9)](zippath);!fs[_0x3a1e10(0x19a)](temppath)&&fs[_0x3a1e10(0x1b9)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3a1e10(0x206)]({'bots':[]})[_0x3a1e10(0x2c6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3a1e10(0x206)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3a1e10(0x25f),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3a1e10(0x206)]({'secure':{},'blacklist':[]})[_0x3a1e10(0x2c6)]();let crypt=new Crypt({'md':_0x3a1e10(0x324),'rsaStandard':_0x3a1e10(0x1b8)});const saltRounds=0xa,mixpanel=Mixpanel[_0x3a1e10(0x14b)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x3a1e10(0x321)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x3a1e10(0x2d8)]!=''&&settings[_0x3a1e10(0x305)]&&settings[_0x3a1e10(0x305)]!='')initTelegram();const parseColor=(_0xd4016f,_0x4d14a0)=>{const _0xb8119e=_0x3a1e10,_0x136114=/#[A-Z]{3}#/g;if(typeof _0xd4016f=='string'){!_0x4d14a0?_0xd4016f=_0xd4016f['replace'](_0x136114,''):(_0xd4016f=_0xd4016f['replace'](/#BLU#/g,_0xb8119e(0x2cb)),_0xd4016f=_0xd4016f['replace'](/#RED#/g,_0xb8119e(0x2a7)),_0xd4016f=_0xd4016f[_0xb8119e(0x158)](/#YEL#/g,_0xb8119e(0x29b)),_0xd4016f=_0xd4016f[_0xb8119e(0x158)](/#MAG#/g,_0xb8119e(0x16b)),_0xd4016f=_0xd4016f['replace'](/#CYA#/g,'\x1b[36m'),_0xd4016f=_0xd4016f[_0xb8119e(0x158)](/#RES#/g,_0xb8119e(0x243)));;}return _0xd4016f;},logger={'screen':_0x487d77=>{const _0x2f0e57=_0x3a1e10;console[_0x2f0e57(0x20c)](parseColor(_0x487d77,!![]));},'simple':_0x330adf=>{const _0x100f69=_0x3a1e10;console[_0x100f69(0x20c)](parseColor(_0x330adf,!![])),loggerfile[_0x100f69(0x2c6)](util[_0x100f69(0x202)](parseColor(_0x330adf,![]))+'\x0a');},'full':async _0x2e72aa=>{const _0xd20e8c=_0x3a1e10,_0xa2fc95=getTimeStamp()+_0xd20e8c(0x30d)+_0x2e72aa;console[_0xd20e8c(0x20c)](parseColor(_0xa2fc95,!![])),loggerfile['write'](util[_0xd20e8c(0x202)](parseColor(_0xa2fc95,![]))+'\x0a');if(tgBot&&settings[_0xd20e8c(0x2fc)]&&settings[_0xd20e8c(0x2f7)]!=_0xd20e8c(0x1df))await tgBot[_0xd20e8c(0x30c)](settings[_0xd20e8c(0x2fc)],_0xd20e8c(0x2bf)+parseColor(_0x2e72aa,![]))['catch'](_0x5b9b12=>{telegramError(_0x5b9b12);});},'debug':async(_0x42872c,_0x32f899='')=>{const _0x1fbcb5=_0x3a1e10,_0x3821ac=getTimeStamp()+_0x1fbcb5(0x220)+_0x42872c;if(debugging)console[_0x1fbcb5(0x20c)](parseColor(_0x3821ac,!![]));loggerfile[_0x1fbcb5(0x2c6)](util['format'](parseColor(_0x3821ac,![]))+'\x0a');if(_0x32f899){if(debugging)console['log'](_0x32f899);loggerfile[_0x1fbcb5(0x2c6)](util[_0x1fbcb5(0x202)](_0x32f899)+'\x0a');}}};process['on']('uncaughtException',function(_0x3d918d){const _0x4a0c39=_0x3a1e10;logger[_0x4a0c39(0x22f)](_0x3d918d);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3a1e10(0x2d5))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')['createServer'](app);app[_0x3a1e10(0x2e8)](fileUpload({'useTempFiles':!![]})),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x2cd),async(_0x4693c8,_0x180175)=>{const _0x57714e=_0x3a1e10,_0x142bdc=_0x4693c8['params']['type'],_0x5c3cf5=getClientsWithBotID(_0x57714e(0x272)),_0x221bd3=_0x4693c8[_0x57714e(0x2ed)][_0x57714e(0x276)],_0x5eae3d=timelyDecrypt(_0x221bd3,![]),_0x2d7611=_0x5c3cf5['find'](_0x1b8ccc=>_0x1b8ccc[_0x57714e(0x276)]==_0x5eae3d);if(_0x2d7611){const _0x2cbbe7=normalizeIP(_0x4693c8[_0x57714e(0x265)]['remoteAddress'])[_0x57714e(0x298)],_0x392067=_0x4693c8[_0x57714e(0x2ed)]['tkn'];if(validateAccess(_0x392067,_0x5eae3d,_0x2cbbe7)[_0x57714e(0x170)])_0x142bdc==_0x57714e(0x2b1)&&await backupConfigFiles(),await zipFiles(_0x142bdc),_0x180175[_0x57714e(0x1ac)](zippath+(_0x142bdc+_0x57714e(0x2ac)),_0x52ff82=>{const _0x54a473=_0x57714e;_0x52ff82&&(logger['full'](_0x54a473(0x207)+_0x142bdc),logger[_0x54a473(0x22f)](_0x52ff82));});else logger[_0x57714e(0x1e1)](_0x57714e(0x312)+_0x142bdc+_0x57714e(0x266));}else logger['full'](_0x57714e(0x312)+_0x142bdc+'\x20(2)');}),app['post'](_0x3a1e10(0x1b0),async(_0x1edb9f,_0x868560)=>{const _0x44493a=_0x3a1e10,_0x813c17=getClientsWithBotID(_0x44493a(0x272)),_0x39ae75=_0x1edb9f[_0x44493a(0x2ed)][_0x44493a(0x276)],_0x455463=timelyDecrypt(_0x39ae75,![]),_0x226064=_0x813c17['find'](_0x58f04b=>_0x58f04b[_0x44493a(0x276)]==_0x455463);logger[_0x44493a(0x1f6)](_0x44493a(0x240));if(_0x226064){const _0x1e56ca=normalizeIP(_0x1edb9f['socket'][_0x44493a(0x174)])[_0x44493a(0x298)],_0x52151a=_0x1edb9f[_0x44493a(0x2ed)][_0x44493a(0x28b)];if(validateAccess(_0x52151a,_0x455463,_0x1e56ca)[_0x44493a(0x170)]){if(_0x1edb9f[_0x44493a(0x289)]){const _0x52b48f=_0x1edb9f['files'][_0x44493a(0x223)];await _0x52b48f['mv'](temppath+_0x52b48f['name']),_0x868560[_0x44493a(0x1c7)]({'status':!![],'message':_0x44493a(0x2e2)});const _0x14ff8c=getBotsWithMode();_0x14ff8c[_0x44493a(0x1fb)]>0x0?confirmRestore(temppath,_0x52b48f[_0x44493a(0x21f)]):unzipFile(temppath,_0x52b48f['name']);}}else logger[_0x44493a(0x1e1)](_0x44493a(0x173));}else logger[_0x44493a(0x1e1)](_0x44493a(0x1c1));}),app[_0x3a1e10(0x2e8)](express[_0x3a1e10(0x241)](path[_0x3a1e10(0x186)](__dirname,bbpath2,_0x3a1e10(0x205)))),app[_0x3a1e10(0x2e8)](express['static'](path['join'](__dirname,bbpath2,_0x3a1e10(0x177)))),app[_0x3a1e10(0x2c2)]('/',function(_0x2d67cc,_0x4a5219){const _0xecfc0e=_0x3a1e10;_0x4a5219['sendFile'](path[_0xecfc0e(0x186)](__dirname,bbpath2,'build2','index.html'));}),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x182),function(_0x165a33,_0x1d6db7){const _0x2701a7=_0x3a1e10;_0x1d6db7[_0x2701a7(0x1f8)](path[_0x2701a7(0x186)](__dirname,bbpath2,_0x2701a7(0x177),_0x2701a7(0x203)));}),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x2bc),(_0xa7686a,_0x37ebd7)=>{const _0x23830d=_0x3a1e10;_0x37ebd7[_0x23830d(0x1f8)](path[_0x23830d(0x186)](__dirname,bbpath2,_0x23830d(0x177),_0x23830d(0x203)));}),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x1da),(_0x5297a4,_0xad7f2b)=>{const _0x38d404=_0x3a1e10;_0xad7f2b[_0x38d404(0x1f8)](path['join'](__dirname,bbpath2,_0x38d404(0x177),_0x38d404(0x203)));}),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x1e2),(_0x3f22bf,_0x52f156)=>{const _0xfbc5ba=_0x3a1e10;_0x52f156[_0xfbc5ba(0x1f8)](path[_0xfbc5ba(0x186)](__dirname,bbpath2,_0xfbc5ba(0x177),'index.html'));}),app[_0x3a1e10(0x2c2)](_0x3a1e10(0x313),(_0x3c86ec,_0x4507c2)=>{const _0x23a878=_0x3a1e10;_0x4507c2[_0x23a878(0x1f8)](path[_0x23a878(0x186)](__dirname,bbpath2,_0x23a878(0x177),_0x23a878(0x203)));}),app['get'](_0x3a1e10(0x264),(_0xeebe70,_0x2ac1b9)=>{const _0x1fec9=_0x3a1e10;_0x2ac1b9[_0x1fec9(0x1f8)](path[_0x1fec9(0x186)](__dirname,bbpath2,_0x1fec9(0x177),_0x1fec9(0x203)));}),app['get']('/:bot/support',(_0x16529e,_0x37c8d2)=>{const _0x19121c=_0x3a1e10;_0x37c8d2[_0x19121c(0x1f8)](path['join'](__dirname,bbpath2,_0x19121c(0x177),'index.html'));});if(HOST)http[_0x3a1e10(0x29e)](PORT,HOST);else http[_0x3a1e10(0x29e)](PORT);const io=require(_0x3a1e10(0x2cf))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x153bb0=_0x3a1e10;let _0x21c6c1='[ip-address]';const _0x25c29d=networkInterfaces(),_0x3fbd88={};for(const _0x171a8d of Object['keys'](_0x25c29d)){for(const _0x573ba9 of _0x25c29d[_0x171a8d]){if((_0x573ba9[_0x153bb0(0x15a)]==_0x153bb0(0x27b)||_0x573ba9['family']==0x4)&&!_0x573ba9[_0x153bb0(0x2ff)]){const _0x214e85=ipaddr[_0x153bb0(0x31b)](_0x573ba9[_0x153bb0(0x2ae)])[_0x153bb0(0x1aa)]();_0x214e85!=_0x153bb0(0x2a4)&&(!_0x3fbd88[_0x171a8d]&&(_0x3fbd88[_0x171a8d]=[]),_0x3fbd88[_0x171a8d]['push'](_0x573ba9[_0x153bb0(0x2ae)]),_0x21c6c1=_0x573ba9[_0x153bb0(0x2ae)]);}}}return{'serverip':_0x21c6c1,'netinterfaces':_0x3fbd88};}async function startServer(){const _0x2e2397=_0x3a1e10,{serverip:_0x14cce1,netinterfaces:_0x57713}=getServerIP();logger['simple'](''),logger[_0x2e2397(0x22f)](_0x2e2397(0x187)),await logger[_0x2e2397(0x1e1)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x2e2397(0x1b6)+(environment==_0x2e2397(0x297)?'(staging)':'')+'\x0a'+(_0x2e2397(0x307)+PORT+_0x2e2397(0x1e7))+(_0x2e2397(0x198)+_0x14cce1+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x2e2397(0x22f)](_0x2e2397(0x187));if(config['length']!=0x0)for(const _0x1c1b0b of config){if(_0x1c1b0b[_0x2e2397(0x2db)]==_0x2e2397(0x290)||_0x1c1b0b[_0x2e2397(0x2db)]==_0x2e2397(0x274))await logger['full'](_0x2e2397(0x181)+_0x1c1b0b['botID']+_0x2e2397(0x15d)+_0x1c1b0b['botname']),startBot([_0x1c1b0b[_0x2e2397(0x26c)],userID],{'cwd':bbpath},function(_0x5cca56){if(_0x5cca56)logger['full'](_0x5cca56);});else(_0x1c1b0b[_0x2e2397(0x2db)]==_0x2e2397(0x193)||_0x1c1b0b[_0x2e2397(0x2db)]=='new-disabled')&&await logger[_0x2e2397(0x1e1)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x1c1b0b['botID']+_0x2e2397(0x15d)+_0x1c1b0b[_0x2e2397(0x20b)]);}else!newBot&&logger['simple'](_0x2e2397(0x14a));if(newBot)addBot();logger[_0x2e2397(0x22f)](_0x2e2397(0x187)),logger[_0x2e2397(0x22f)](''),await logger[_0x2e2397(0x1f6)](_0x2e2397(0x150)+nodeversion),await logger[_0x2e2397(0x1f6)]('Network\x20Interfaces:',_0x57713);}function startSocket(){const _0x41fd3c=_0x3a1e10;io['on'](_0x41fd3c(0x153),_0x5b3fb9=>{const _0x5a576f=_0x41fd3c;let _0x517943,_0xcfee5f,_0x33de2d,_0x221913,_0x55d7ba;const _0x34fb97=_0x5b3fb9[_0x5a576f(0x28e)][_0x5a576f(0x2ed)][_0x5a576f(0x1e3)];_0xcfee5f=_0x34fb97[_0x5a576f(0x2fd)](/bot[0-9]{3}/);if(_0xcfee5f)_0x33de2d=_0xcfee5f[0x0]['match'](/[0-9]{3}/);if(_0x33de2d)_0x517943=_0x33de2d[0x0];else _0x517943=_0x5a576f(0x272);const _0x3ab3fd=_0x5b3fb9[_0x5a576f(0x28e)][_0x5a576f(0x225)]['encryptedUuid'];if(!_0x3ab3fd)_0x5b3fb9[_0x5a576f(0x17f)]('status',{'publicKey':secure[_0x5a576f(0x1f4)]});else{_0x221913=timelyDecrypt(_0x3ab3fd,![]);if(!_0x221913)_0x5b3fb9[_0x5a576f(0x17f)]('status',{'publicKey':secure[_0x5a576f(0x1f4)]});else{_0x55d7ba=normalizeIP(_0x5b3fb9['conn'][_0x5a576f(0x174)])[_0x5a576f(0x298)];if(!devices[_0x221913])devices[_0x221913]={'uuid':_0x221913,'access':{'token':null}};devices[_0x221913]['ip']=_0x55d7ba;const _0x44d761=addClient(_0x5b3fb9['id'],_0x221913,_0x517943);setAccess(_0x44d761),emitMessages(),_0x5b3fb9['on'](_0x5a576f(0x2b4),_0x5ecda3=>{const _0x408a79=_0x5a576f,_0x15d653=timelyDecrypt(_0x5ecda3[_0x408a79(0x248)]);if(_0x15d653){_0x5ecda3={'username':_0x5ecda3[_0x408a79(0x31f)],'password':_0x15d653},devices[_0x221913]['access']=validateCredentials(_0x5ecda3,_0x221913);if(devices[_0x221913]['access']['allow']==![]&&devices[_0x221913][_0x408a79(0x21a)][_0x408a79(0x1be)]==_0x408a79(0x2ce))_0x5b3fb9[_0x408a79(0x17f)](_0x408a79(0x2db),{'access':devices[_0x221913][_0x408a79(0x21a)]}),loginAccess2FA(_0x221913,_0x55d7ba);else{if(devices[_0x221913][_0x408a79(0x21a)][_0x408a79(0x170)]==![]&&devices[_0x221913][_0x408a79(0x21a)][_0x408a79(0x1be)]==_0x408a79(0x2ad))_0x5b3fb9[_0x408a79(0x17f)](_0x408a79(0x2db),{'access':devices[_0x221913]['access']});else devices[_0x221913]['access']['allow']&&devices[_0x221913]['access'][_0x408a79(0x1be)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x221913)[_0x408a79(0x224)](_0x1a83b5=>{setAccess(_0x1a83b5);}),logger['debug'](_0x408a79(0x30f)+_0x221913[_0x408a79(0x271)](-0x8)),setTokenRefresh(_0x221913),setSessionTimeout('login',_0x221913));}}else logger['full'](_0x408a79(0x1f9));}),_0x5b3fb9['on']('reset-password',()=>{resetPassword();}),_0x5b3fb9['on'](_0x5a576f(0x1ff),_0x10cc4e=>{removeClient(_0x5b3fb9['id']);}),_0x517943==_0x5a576f(0x272)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xd77fe){const _0x3555f5=_0x3a1e10;if(_0xd77fe!=_0x3555f5(0x272)&&config['apiKey']!=''){if(pid[_0xd77fe])pid[_0xd77fe][_0x3555f5(0x1c7)]({'function':_0x3555f5(0x172),'args':null});}_0xd77fe!=_0x3555f5(0x272)&&broadcastToBots('bots',JSON[_0x3555f5(0x229)](config));}function reloadBotManager(){const _0x467bc4=_0x3a1e10;getClientsWithBotID(_0x467bc4(0x272))[_0x467bc4(0x224)](_0x4535d4=>{const _0x25124b=_0x467bc4;getSocket(_0x4535d4['id'])[_0x25124b(0x17f)](_0x25124b(0x2db),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x4fdf71){const _0x2efcd9=_0x3a1e10;return io['sockets'][_0x2efcd9(0x246)][_0x2efcd9(0x2c2)](_0x4fdf71);}function setAccess(_0x209960){const _0x55df3e=_0x3a1e10,_0x5439cd=getSocket(_0x209960['id']),_0x144743=_0x209960['uuid'],_0x250b6b=_0x209960[_0x55df3e(0x18b)];devices[_0x144743][_0x55df3e(0x21a)]=validateAccess(devices[_0x144743][_0x55df3e(0x21a)][_0x55df3e(0x2c7)],_0x144743),logger[_0x55df3e(0x1f6)]('Setting\x20access:\x20'+devices[_0x144743][_0x55df3e(0x21a)][_0x55df3e(0x1be)]+_0x55df3e(0x15f)+_0x209960['id'][_0x55df3e(0x271)](-0x8)+_0x55df3e(0x1b3)+_0x144743['slice'](-0x8)),_0x5439cd['join'](_0x144743);if(devices[_0x144743]['access'][_0x55df3e(0x170)]){_0x5439cd[_0x55df3e(0x186)](_0x250b6b);if(_0x250b6b==_0x55df3e(0x272))initializeSocketBotManager(_0x5439cd);else initializeSocketBot(_0x5439cd);initClient(_0x250b6b);}devices[_0x144743]['access']['token']&&devices[_0x144743][_0x55df3e(0x21a)]['reason']==_0x55df3e(0x2a9)&&setSessionTimeout(_0x55df3e(0x215),_0x144743),devices[_0x144743][_0x55df3e(0x21a)][_0x55df3e(0x2c7)]&&devices[_0x144743][_0x55df3e(0x21a)][_0x55df3e(0x1be)]==_0x55df3e(0x2e6)&&setSessionTimeout(_0x55df3e(0x2b4),_0x144743),_0x5439cd['emit'](_0x55df3e(0x2db),{'status':_0x209960[_0x55df3e(0x19e)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x144743][_0x55df3e(0x21a)],'externalip':devices[_0x144743]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x55df3e(0x1a8)],'validInstallation':validInstallation}),devices[_0x144743]['access'][_0x55df3e(0x170)]==![]&&devices[_0x144743][_0x55df3e(0x21a)][_0x55df3e(0x1be)]=='2FA\x20required'&&temporaryAccess2FA(_0x144743,devices[_0x144743]['ip']);}function setSessionTimeout(_0x2653e0,_0x3fc226){const _0x4f5950=_0x3a1e10;let _0x57c19a;if(_0x2653e0==_0x4f5950(0x2b4))_0x57c19a=loginExpiry*0x3c*0x3e8;else _0x57c19a=devices[_0x3fc226][_0x4f5950(0x2a0)]['expiry']*0x3c*0x3e8-(new Date()[_0x4f5950(0x1bd)]()-devices[_0x3fc226][_0x4f5950(0x2a0)]['timestamp']);if(devices[_0x3fc226][_0x4f5950(0x2b2)])clearTimeout(devices[_0x3fc226][_0x4f5950(0x2b2)]);devices[_0x3fc226][_0x4f5950(0x2b2)]=setTimeout(()=>{const _0x12b080=_0x4f5950;if(devices[_0x3fc226]['pidRefreshToken'])clearTimeout(devices[_0x3fc226][_0x12b080(0x201)]);removeSocketListeners(_0x3fc226),addBlacklist(_0x3fc226),devices[_0x3fc226][_0x12b080(0x2a0)]=null,devices[_0x3fc226]['telegram2FaApproval']=null,devices[_0x3fc226]['access'][_0x12b080(0x2c7)]=null,logger[_0x12b080(0x1f6)](_0x12b080(0x226)+_0x3fc226[_0x12b080(0x271)](-0x8)),devices[_0x3fc226]['access']=validateAccess(devices[_0x3fc226][_0x12b080(0x21a)][_0x12b080(0x2c7)],_0x3fc226),!(devices[_0x3fc226][_0x12b080(0x21a)]['allow']&&devices[_0x3fc226][_0x12b080(0x21a)][_0x12b080(0x1be)]==_0x12b080(0x23a))&&(_0x2653e0==_0x12b080(0x2b4)?io['to'](_0x3fc226)['emit'](_0x12b080(0x2db),{'access':{'allow':![],'reason':_0x12b080(0x2cc),'token':null}}):io['to'](_0x3fc226)[_0x12b080(0x17f)](_0x12b080(0x2db),{'access':{'allow':![],'reason':_0x12b080(0x233),'token':null}})),devices[_0x3fc226][_0x12b080(0x21a)][_0x12b080(0x2c7)]=null;},_0x57c19a);}function setTokenRefresh(_0x5f46be){const _0x4fe4d7=_0x3a1e10;if(devices[_0x5f46be][_0x4fe4d7(0x201)])clearTimeout(devices[_0x5f46be][_0x4fe4d7(0x201)]);devices[_0x5f46be]['pidRefreshToken']=setTimeout(()=>{const _0x46798b=_0x4fe4d7;getClientsWithUuid(_0x5f46be)[_0x46798b(0x1fb)]!=0x0?(devices[_0x5f46be][_0x46798b(0x21a)]=refreshToken(_0x5f46be),io['to'](_0x5f46be)[_0x46798b(0x17f)](_0x46798b(0x2db),{'status':_0x46798b(0x2b9),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5f46be][_0x46798b(0x21a)],'externalip':devices[_0x5f46be]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x5f46be)):clearTimeout(devices[_0x5f46be][_0x46798b(0x201)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x489c6c){const _0x2b036a=_0x3a1e10,_0x3d0388=getClient(_0x489c6c['id'])['uuid'];_0x489c6c['emit'](_0x2b036a(0x213),config),_0x489c6c[_0x2b036a(0x17f)]('settings',cleanSettings()),_0x489c6c['on'](_0x2b036a(0x2ba),_0x246f30=>{const _0x3b7e8b=_0x2b036a;if(validateAccess(_0x246f30,_0x3d0388)[_0x3b7e8b(0x170)])addBot();else logger[_0x3b7e8b(0x1e1)](_0x3b7e8b(0x176));}),_0x489c6c['on'](_0x2b036a(0x14f),(_0x24d7a4,_0x215b62)=>{const _0x46705c=_0x2b036a;if(validateAccess(_0x215b62,_0x3d0388)[_0x46705c(0x170)])toggleBot(_0x24d7a4[_0x46705c(0x26c)],_0x24d7a4[_0x46705c(0x2db)],_0x24d7a4[_0x46705c(0x167)]);else logger[_0x46705c(0x1e1)](_0x46705c(0x273));}),_0x489c6c['on'](_0x2b036a(0x234),(_0x3da07b,_0x283365)=>{const _0x46bad8=_0x2b036a;if(validateAccess(_0x283365,_0x3d0388)['allow'])toggleBotMode(_0x3da07b);else logger[_0x46bad8(0x1e1)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x489c6c['on']('delete-bot',(_0x456ec5,_0x3e64b5)=>{const _0x3a791e=_0x2b036a;if(validateAccess(_0x3e64b5,_0x3d0388)[_0x3a791e(0x170)])deleteBot(_0x456ec5);else logger[_0x3a791e(0x1e1)](_0x3a791e(0x17b));}),_0x489c6c['on'](_0x2b036a(0x230),(_0x4bc177,_0x119637)=>{const _0x112fe6=_0x2b036a;if(validateAccess(_0x119637,_0x3d0388)[_0x112fe6(0x170)])storeSettings(_0x4bc177,!![]);else logger['full'](_0x112fe6(0x1de));}),_0x489c6c['on']('update-bb',_0x18c98c=>{const _0x978a86=_0x2b036a;if(validateAccess(_0x18c98c,_0x3d0388)['allow'])updateBB(_0x978a86(0x1ad));else logger['full'](_0x978a86(0x20e));}),_0x489c6c['on'](_0x2b036a(0x252),_0x2ead83=>{const _0x1f8339=_0x2b036a;if(validateAccess(_0x2ead83,_0x3d0388)['allow'])updateBB(_0x1f8339(0x179));else logger[_0x1f8339(0x1e1)](_0x1f8339(0x258));}),_0x489c6c['on'](_0x2b036a(0x2aa),_0x1640e8=>{const _0x2992ef=_0x2b036a;if(validateAccess(_0x1640e8,_0x3d0388)[_0x2992ef(0x170)]){const _0x3bd289=getClient(_0x489c6c['id']);if(_0x3bd289)getBackupFiles(_0x3bd289[_0x2992ef(0x276)]);else logger[_0x2992ef(0x1e1)](_0x2992ef(0x236));}else logger[_0x2992ef(0x1e1)](_0x2992ef(0x2a8));}),_0x489c6c['on'](_0x2b036a(0x200),(_0x251951,_0x2c3d30)=>{const _0x49912a=_0x2b036a;if(validateAccess(_0x2c3d30,_0x3d0388)['allow'])restoreBackupFile(_0x251951);else logger[_0x49912a(0x1e1)](_0x49912a(0x1bb));}),_0x489c6c['on'](_0x2b036a(0x219),_0x549a26=>{const _0x4362d4=_0x2b036a;if(validateAccess(_0x549a26,_0x3d0388)[_0x4362d4(0x170)])getMessages();else logger[_0x4362d4(0x1e1)](_0x4362d4(0x323));}),_0x489c6c['on'](_0x2b036a(0x29a),(_0x1767d1,_0x59045c)=>{const _0x2a3ef6=_0x2b036a;if(validateAccess(_0x59045c,_0x3d0388)[_0x2a3ef6(0x170)])confirmMessage(_0x1767d1);else logger[_0x2a3ef6(0x1e1)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x489c6c['on'](_0x2b036a(0x21b),_0x425f3a=>{const _0x3f9112=_0x2b036a;if(validateAccess(_0x425f3a,_0x3d0388)['allow']){if(devices[_0x3d0388][_0x3f9112(0x201)])clearTimeout(devices[_0x3d0388][_0x3f9112(0x201)]);if(devices[_0x3d0388][_0x3f9112(0x2b2)])clearTimeout(devices[_0x3d0388][_0x3f9112(0x2b2)]);removeSocketListeners(getClient(_0x489c6c['id'])[_0x3f9112(0x276)]),addBlacklist(_0x3d0388),devices[_0x3d0388][_0x3f9112(0x2a0)]=null,devices[_0x3d0388][_0x3f9112(0x1ef)]=null,devices[_0x3d0388][_0x3f9112(0x21a)][_0x3f9112(0x2c7)]=null,logger[_0x3f9112(0x1f6)](_0x3f9112(0x1c2)+_0x3d0388['slice'](-0x8)),io['to'](getClient(_0x489c6c['id'])[_0x3f9112(0x276)])[_0x3f9112(0x17f)](_0x3f9112(0x2db),{'access':{'allow':![],'reason':_0x3f9112(0x2e0),'token':null}});}else logger[_0x3f9112(0x1e1)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x297bf4){const _0x155f7c=_0x3a1e10,_0x59ebe7=getClient(_0x297bf4['id'])[_0x155f7c(0x18b)],_0x207216=getClient(_0x297bf4['id'])[_0x155f7c(0x276)];_0x297bf4['on']('get-logs',(_0x38c6ad,_0x43481a)=>{const _0x2b3688=_0x155f7c;if(validateAccess(_0x43481a,_0x207216)[_0x2b3688(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x2b3688(0x1c7)]({'function':'emitHistory','args':_0x38c6ad});}else logger['full'](_0x2b3688(0x19b));}),_0x297bf4['on']('delete-alerts',(_0xe4d329,_0x10e3f9)=>{const _0x12042a=_0x155f7c;if(validateAccess(_0x10e3f9,_0x207216)[_0x12042a(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7]['send']({'function':'deleteHistoryAlerts','args':_0xe4d329});}else logger[_0x12042a(0x1e1)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x297bf4['on'](_0x155f7c(0x322),(_0x10466a,_0x5d72d0)=>{const _0x239703=_0x155f7c;if(validateAccess(_0x5d72d0,_0x207216)['allow']){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x239703(0x1c7)]({'function':_0x239703(0x32a),'args':_0x10466a});}else logger[_0x239703(0x1e1)](_0x239703(0x22b));}),_0x297bf4['on']('store-configuration',(_0x571440,_0x4beb82)=>{const _0x2915fa=_0x155f7c;if(validateAccess(_0x4beb82,_0x207216)[_0x2915fa(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7]['send']({'function':_0x2915fa(0x16a),'args':_0x571440});}else logger['full'](_0x2915fa(0x195));}),_0x297bf4['on'](_0x155f7c(0x23b),(_0x207f71,_0x21b6ec)=>{const _0x57718d=_0x155f7c;if(validateAccess(_0x21b6ec,_0x207216)[_0x57718d(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x57718d(0x1c7)]({'function':_0x57718d(0x2c5),'args':_0x207f71});}else logger[_0x57718d(0x1e1)](_0x57718d(0x2b5));}),_0x297bf4['on'](_0x155f7c(0x212),(_0x3a8049,_0x263512)=>{const _0x543719=_0x155f7c;if(validateAccess(_0x263512,_0x207216)[_0x543719(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x543719(0x1c7)]({'function':_0x543719(0x268),'args':_0x3a8049});}else logger[_0x543719(0x1e1)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x297bf4['on']('reset-history',_0x4e4798=>{const _0x343693=_0x155f7c;if(validateAccess(_0x4e4798,_0x207216)['allow']){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x343693(0x1c7)]({'function':_0x343693(0x161),'args':null});}else logger[_0x343693(0x1e1)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x297bf4['on'](_0x155f7c(0x2f0),_0x3679a0=>{const _0x28ef30=_0x155f7c;if(validateAccess(_0x3679a0,_0x207216)['allow']){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x28ef30(0x1c7)]({'function':'getStartingBalances','args':null});}else logger[_0x28ef30(0x1e1)](_0x28ef30(0x1d9));}),_0x297bf4['on']('place-order',(_0x167d56,_0x5e1a54)=>{const _0x333781=_0x155f7c;if(validateAccess(_0x5e1a54,_0x207216)['allow']){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x333781(0x1c7)]({'function':'placeOrder','args':_0x167d56});}else logger['full'](_0x333781(0x14e));}),_0x297bf4['on'](_0x155f7c(0x222),_0x4fc88d=>{const _0x16ba4f=_0x155f7c;if(validateAccess(_0x4fc88d,_0x207216)['allow']){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x16ba4f(0x1c7)]({'function':_0x16ba4f(0x1a6),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x297bf4['on'](_0x155f7c(0x25a),_0x29f40d=>{const _0x5b1e8d=_0x155f7c;if(validateAccess(_0x29f40d,_0x207216)[_0x5b1e8d(0x170)]){if(pid[_0x59ebe7])pid[_0x59ebe7][_0x5b1e8d(0x1c7)]({'function':_0x5b1e8d(0x17c),'args':null});}else logger['full'](_0x5b1e8d(0x2dc));}),_0x297bf4['on']('update-bb',_0x12e559=>{const _0x597c55=_0x155f7c;if(validateAccess(_0x12e559,_0x207216)['allow'])updateBB('update');else logger[_0x597c55(0x1e1)](_0x597c55(0x20e));}),_0x297bf4['on']('get-messages',_0x5e44cc=>{const _0x34b829=_0x155f7c;if(validateAccess(_0x5e44cc,_0x207216)['allow'])getMessages();else logger['full'](_0x34b829(0x323));}),_0x297bf4['on'](_0x155f7c(0x29a),(_0x144b27,_0x20780f)=>{const _0x181015=_0x155f7c;if(validateAccess(_0x20780f,_0x207216)[_0x181015(0x170)])confirmMessage(_0x144b27);else logger['full'](_0x181015(0x23c));}),_0x297bf4['on'](_0x155f7c(0x21b),_0x196411=>{const _0x36640a=_0x155f7c;if(validateAccess(_0x196411,_0x207216)[_0x36640a(0x170)]){if(devices[_0x207216][_0x36640a(0x201)])clearTimeout(devices[_0x207216]['pidRefreshToken']);if(devices[_0x207216]['pidExpireLogin'])clearTimeout(devices[_0x207216][_0x36640a(0x2b2)]);removeSocketListeners(getClient(_0x297bf4['id'])[_0x36640a(0x276)]),addBlacklist(_0x207216),devices[_0x207216][_0x36640a(0x2a0)]=null,devices[_0x207216]['telegram2FaApproval']=null,devices[_0x207216][_0x36640a(0x21a)]['token']=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x207216[_0x36640a(0x271)](-0x8)),io['to'](getClient(_0x297bf4['id'])[_0x36640a(0x276)])[_0x36640a(0x17f)](_0x36640a(0x2db),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x36640a(0x1e1)](_0x36640a(0x326));});}function removeSocketListeners(_0x39c572){const _0x108480=_0x3a1e10;getClientsWithUuid(_0x39c572)[_0x108480(0x224)](_0x4e3879=>{const _0x26af26=_0x108480;getSocket(_0x4e3879['id'])[_0x26af26(0x2d2)]();});}function cleanSettings(){const _0x1d36cc=_0x3a1e10;let _0x4cb514=settings;return settings[_0x1d36cc(0x2d8)]&&settings[_0x1d36cc(0x2d8)]!=''&&(_0x4cb514={..._0x4cb514,'telegramToken':_0x1d36cc(0x1c6)}),settings[_0x1d36cc(0x20d)]&&settings[_0x1d36cc(0x20d)]!=''&&(_0x4cb514={..._0x4cb514,'bbPassword':_0x1d36cc(0x1c6)}),(settings['bbPassword']&&settings[_0x1d36cc(0x20d)]==_0x1d36cc(0x1f7)||settings[_0x1d36cc(0x2d8)]&&settings[_0x1d36cc(0x2d8)]==_0x1d36cc(0x1f7))&&(_0x4cb514={..._0x4cb514,'restored':{'password':settings[_0x1d36cc(0x20d)]=='***','telegram':settings[_0x1d36cc(0x2d8)]==_0x1d36cc(0x1f7)}}),_0x4cb514;}async function updateBB(_0x2a4703){const _0x576e00=_0x3a1e10;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0xebc06a=>{restartBot(_0xebc06a['botID']);});if(_0x2a4703==_0x576e00(0x1ad))process[_0x576e00(0x1c7)]({'update':!![],'environment':environment},_0x55047e=>{});else _0x2a4703==_0x576e00(0x179)&&process[_0x576e00(0x1c7)]({'reinstall':!![],'environment':environment},_0x1be564=>{});}function startBot(_0x4a5a8d,_0x4313d6,_0x32b6ee){const _0x570006=_0x3a1e10;if(debugging)_0x4a5a8d[_0x570006(0x188)]('-d');let _0x34dbd6=![];const _0x251e6a=_0x4a5a8d[0x0];_0x4313d6={..._0x4313d6,'stdio':[_0x570006(0x154),_0x570006(0x154),'inherit',_0x570006(0x228)]},pid[_0x251e6a]=childProcess[_0x570006(0x28a)](botfile,_0x4a5a8d,_0x4313d6),pid[_0x251e6a]['on'](_0x570006(0x2ea),_0x5e4b42=>{const _0x2455d2=_0x570006;switch(Object[_0x2455d2(0x315)](_0x5e4b42)[0x0]){case _0x2455d2(0x20b):updateBotName(_0x251e6a,_0x5e4b42['botname']);break;case _0x2455d2(0x1e0):updateBotManager();break;case _0x2455d2(0x2db):updateStatus(_0x251e6a,_0x5e4b42[_0x2455d2(0x2db)]);break;case _0x2455d2(0x167):updateLive(_0x251e6a,_0x5e4b42[_0x2455d2(0x167)]);break;case _0x2455d2(0x1fa):updateLive(_0x251e6a,_0x5e4b42[_0x2455d2(0x1fa)]),io['to'](_0x251e6a)['emit'](_0x2455d2(0x2db),{'access':{'allow':![],'reason':_0x2455d2(0x31d),'token':null}});break;case _0x2455d2(0x1ae):_0x5e4b42[_0x2455d2(0x1ae)]==_0x2455d2(0x1e5)&&restartBot(_0x251e6a);_0x5e4b42[_0x2455d2(0x1ae)]==_0x2455d2(0x171)&&toggleBot(_0x251e6a,_0x2455d2(0x193),_0x2455d2(0x30e));break;case _0x2455d2(0x159):sendTelegram(_0x251e6a,_0x5e4b42[_0x2455d2(0x159)]);break;case'telegrammsg':sendTelegramMsg(_0x5e4b42[_0x2455d2(0x2b6)]);break;case _0x2455d2(0x1f2):io['to'](_0x251e6a)['emit'](_0x5e4b42['function'],_0x5e4b42[_0x2455d2(0x2e1)]);break;}}),pid[_0x251e6a]['on'](_0x570006(0x21c),function(_0x21ad0c){if(_0x34dbd6)return;_0x34dbd6=!![],_0x32b6ee(_0x21ad0c);}),pid[_0x251e6a]['on'](_0x570006(0x2d0),async function(_0x427a9b){const _0x560b74=_0x570006;if(installingUpdate)return;if(_0x34dbd6)return;_0x34dbd6=!![],_0x32b6ee(null);const _0x2c01f9=dbConfig['get'](_0x560b74(0x213))[_0x560b74(0x309)]({'botID':_0x251e6a})[_0x560b74(0x2d6)]();_0x2c01f9&&(_0x2c01f9[_0x560b74(0x2db)]==_0x560b74(0x290)||_0x2c01f9[_0x560b74(0x2db)]==_0x560b74(0x274))&&(await sleep(0x3e8),updateLive(_0x251e6a,_0x560b74(0x30e)),logger[_0x560b74(0x1e1)](_0x560b74(0x15e)+_0x251e6a),startBot([_0x251e6a,userID],{'cwd':bbpath},function(_0x3197e0){if(_0x3197e0)logger['full'](_0x3197e0);}));});}function stopBot(_0x4d946d){const _0x3fd72a=_0x3a1e10;getClientsWithBotID(_0x4d946d)[_0x3fd72a(0x224)](_0x2d0b31=>{const _0x750e0c=_0x3fd72a;getSocket(_0x2d0b31['id'])[_0x750e0c(0x1ff)](!![]),removeClient(_0x2d0b31['id']);}),pid[_0x4d946d]&&(pid[_0x4d946d][_0x3fd72a(0x171)](),pid[_0x4d946d]=null);}function restartBot(_0x9fca57){const _0x385c17=_0x3a1e10;if(pid[_0x9fca57])pid[_0x9fca57][_0x385c17(0x171)]();}function addBot(){const _0x32d7e0=_0x3a1e10;let _0x1ff127;for(let _0x557224=0x1;_0x557224<0x3e9;_0x557224++){_0x1ff127=_0x557224['toString']()['padStart'](0x3,'0');let _0x3d2813=config['find'](_0x1f83e1=>_0x1f83e1[_0x32d7e0(0x26c)]==_0x1ff127);if(!_0x3d2813)break;}if(_0x1ff127===_0x32d7e0(0x2f1)){logger[_0x32d7e0(0x1e1)](_0x32d7e0(0x1a4));return;}logger[_0x32d7e0(0x1e1)](_0x32d7e0(0x2c9)+_0x1ff127),dbConfig[_0x32d7e0(0x2c2)](_0x32d7e0(0x213))[_0x32d7e0(0x188)]({'botID':_0x1ff127,'botname':_0x32d7e0(0x1d5)+_0x1ff127,'status':_0x32d7e0(0x274),'live':''})['write'](),startBot([_0x1ff127,userID],{'cwd':bbpath},function(_0x3f9c10){const _0x3f98ab=_0x32d7e0;if(_0x3f9c10)logger[_0x3f98ab(0x1e1)](_0x3f9c10);}),config=getConfiguration(),io['to'](_0x32d7e0(0x272))[_0x32d7e0(0x17f)]('bots',config),broadcastToBots('bots',JSON[_0x32d7e0(0x229)](config));}function deleteBot(_0x2f6fa0){const _0x31a11e=_0x3a1e10;getClientsWithBotID(_0x2f6fa0)[_0x31a11e(0x224)](_0x29c929=>{getSocket(_0x29c929['id'])['disconnect'](!![]),removeClient(_0x29c929['id']);}),dbConfig[_0x31a11e(0x2c2)]('bots')['remove']({'botID':_0x2f6fa0})['write'](),logger[_0x31a11e(0x1e1)](_0x31a11e(0x27c)+_0x2f6fa0),stopBot(_0x2f6fa0);try{if(fs[_0x31a11e(0x19a)](path[_0x31a11e(0x186)](configpath,_0x31a11e(0x1ba)+_0x2f6fa0+_0x31a11e(0x1a9))))fs[_0x31a11e(0x256)](path[_0x31a11e(0x186)](configpath,'bot-'+_0x2f6fa0+_0x31a11e(0x1a9)));if(fs[_0x31a11e(0x19a)](path[_0x31a11e(0x186)](configpath,'bot-'+_0x2f6fa0+_0x31a11e(0x208))))fs[_0x31a11e(0x256)](path['join'](configpath,'bot-'+_0x2f6fa0+'-events.json'));if(fs[_0x31a11e(0x19a)](path[_0x31a11e(0x186)](configpath,_0x31a11e(0x1ba)+_0x2f6fa0+_0x31a11e(0x329))))fs[_0x31a11e(0x256)](path[_0x31a11e(0x186)](configpath,_0x31a11e(0x1ba)+_0x2f6fa0+_0x31a11e(0x329)));if(fs[_0x31a11e(0x19a)](path[_0x31a11e(0x186)](configpath,_0x31a11e(0x1ba)+_0x2f6fa0+_0x31a11e(0x320))))fs[_0x31a11e(0x256)](path[_0x31a11e(0x186)](configpath,_0x31a11e(0x1ba)+_0x2f6fa0+'-results.json'));}catch(_0x2750d9){if(_0x2750d9)logger[_0x31a11e(0x1e1)](_0x31a11e(0x269),_0x2750d9);}config=getConfiguration(),io['to'](_0x31a11e(0x272))[_0x31a11e(0x17f)](_0x31a11e(0x213),config),broadcastToBots(_0x31a11e(0x213),JSON[_0x31a11e(0x229)](config));}function toggleBot(_0x2a570d,_0x3386df,_0x5f04b4){const _0x51821c=_0x3a1e10;dbConfig[_0x51821c(0x2c2)](_0x51821c(0x213))['find']({'botID':_0x2a570d})[_0x51821c(0x156)]({'status':_0x3386df})['assign']({'live':_0x5f04b4})[_0x51821c(0x2c6)]();if(_0x3386df=='enabled'||_0x3386df==_0x51821c(0x274))logger[_0x51821c(0x1e1)](_0x51821c(0x23e)+_0x2a570d),startBot([_0x2a570d,userID],{'cwd':bbpath},function(_0x396c11){const _0x325442=_0x51821c;if(_0x396c11)logger[_0x325442(0x1e1)](_0x396c11);});else(_0x3386df=='disabled'||_0x3386df=='new-disabled')&&(logger[_0x51821c(0x1e1)](_0x51821c(0x1c9)+_0x2a570d),stopBot(_0x2a570d));config=getConfiguration(),io['to'](_0x51821c(0x272))['emit'](_0x51821c(0x213),config),broadcastToBots('bots',JSON[_0x51821c(0x229)](config));}function toggleStatus(_0x28789e){const _0x5d88c2=_0x3a1e10;let _0x35e1bf=dbConfig[_0x5d88c2(0x2c2)](_0x5d88c2(0x213))['find']({'botID':_0x28789e})[_0x5d88c2(0x2d6)](),_0x319899;if(_0x35e1bf[_0x5d88c2(0x2db)]===_0x5d88c2(0x290))_0x319899=_0x5d88c2(0x193);else{if(_0x35e1bf[_0x5d88c2(0x2db)]==='new')_0x319899='new-disabled';else{if(_0x35e1bf[_0x5d88c2(0x2db)]==='new-disabled')_0x319899=_0x5d88c2(0x274);else{if(_0x35e1bf[_0x5d88c2(0x2db)]==='disabled')_0x319899=_0x5d88c2(0x290);}}}return _0x319899;}function updateStatus(_0x1bcabf,_0x55acac){const _0x85e37b=_0x3a1e10;dbConfig[_0x85e37b(0x2c2)](_0x85e37b(0x213))[_0x85e37b(0x309)]({'botID':_0x1bcabf})['assign']({'status':_0x55acac})[_0x85e37b(0x2c6)](),config=getConfiguration(),io['to'](_0x85e37b(0x272))['emit'](_0x85e37b(0x213),config),broadcastToBots(_0x85e37b(0x213),JSON[_0x85e37b(0x229)](config));}function updateLive(_0x325b74,_0x2636a0){const _0x98bfe9=_0x3a1e10;dbConfig['get']('bots')['find']({'botID':_0x325b74})[_0x98bfe9(0x156)]({'live':_0x2636a0})[_0x98bfe9(0x2c6)](),config=getConfiguration(),io['to'](_0x98bfe9(0x272))[_0x98bfe9(0x17f)](_0x98bfe9(0x213),config),broadcastToBots('bots',JSON[_0x98bfe9(0x229)](config));}function updateBotName(_0x45220c,_0x47fc35){const _0x30d3ae=_0x3a1e10;dbConfig[_0x30d3ae(0x2c2)](_0x30d3ae(0x213))[_0x30d3ae(0x309)]({'botID':_0x45220c})[_0x30d3ae(0x156)]({'botname':_0x47fc35})[_0x30d3ae(0x2c6)](),config=getConfiguration(),io['to'](_0x30d3ae(0x272))[_0x30d3ae(0x17f)]('bots',config),broadcastToBots('bots',JSON[_0x30d3ae(0x229)](config));}function updateBotManager(){const _0x2eba2f=_0x3a1e10;config=getConfiguration(),io['to'](_0x2eba2f(0x272))['emit']('bots',config),broadcastToBots('bots',JSON[_0x2eba2f(0x229)](config));}function toggleBotMode(_0x377648){const _0x378542=_0x3a1e10;if(pid[_0x377648])pid[_0x377648][_0x378542(0x1c7)]({'function':_0x378542(0x2e7),'args':null});else{const _0x2a2187=configpath+_0x378542(0x1ba)+_0x377648+'-config.json',_0x475be7=fs[_0x378542(0x17d)](_0x2a2187),_0x3b4ba6=JSON[_0x378542(0x31b)](_0x475be7),_0x4b2e69=_0x3b4ba6[_0x378542(0x18b)][0x0][_0x378542(0x29c)];_0x3b4ba6['bot'][0x0][_0x378542(0x29c)]=!_0x4b2e69;const _0x1cb943=JSON[_0x378542(0x229)](_0x3b4ba6,null,0x2);fs['writeFileSync'](_0x2a2187,_0x1cb943),config=getConfiguration(),io['to']('botmanager')['emit'](_0x378542(0x213),config),broadcastToBots('bots',JSON[_0x378542(0x229)](config));}}function telegramError(_0x19ddb6){const _0x2f6f57=_0x3a1e10;logger[_0x2f6f57(0x22f)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x20058b){const _0x5e38e0=_0x3a1e10;if(_0x20058b['from'][_0x5e38e0(0x31f)]!=settings[_0x5e38e0(0x305)]&&'@'+_0x20058b['from']['username']!=settings['telegramUsername'])return tgBot[_0x5e38e0(0x30c)](_0x20058b['chat']['id'],_0x5e38e0(0x2e5),{'parse_mode':_0x5e38e0(0x291)})[_0x5e38e0(0x1b1)](_0x3667c6=>{telegramError(_0x3667c6);}),![];return!![];}async function initTelegram(){const _0x1f6187=_0x3a1e10;if(tgBot)tgBot[_0x1f6187(0x1cd)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1f6187(0x2d8)],{'polling':!![]});let _0x582e4d=_0x1f6187(0x2c3);_0x582e4d+='\x0a',_0x582e4d+=_0x1f6187(0x2de),_0x582e4d+=_0x1f6187(0x294),_0x582e4d+=_0x1f6187(0x15c),_0x582e4d+=_0x1f6187(0x162),_0x582e4d+=_0x1f6187(0x184),_0x582e4d+=_0x1f6187(0x2c1),_0x582e4d+=_0x1f6187(0x259),_0x582e4d+=_0x1f6187(0x232),_0x582e4d+=_0x1f6187(0x16d),_0x582e4d+=_0x1f6187(0x166),_0x582e4d+=_0x1f6187(0x2d7),_0x582e4d+=_0x1f6187(0x288),_0x582e4d+=_0x1f6187(0x24e),_0x582e4d+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x5ce890='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5ce890+='\x0a',_0x5ce890+=_0x582e4d,tgBot[_0x1f6187(0x2a6)](/\/start/,_0xacb0d1=>{const _0x10576d=_0x1f6187;if(!validateTelegram(_0xacb0d1))return;if(settings[_0x10576d(0x2fc)]!=_0xacb0d1['chat']['id'])updateSetting(_0x10576d(0x2fc),_0xacb0d1['chat']['id']);updateSetting(_0x10576d(0x31e),!![]),tgBot[_0x10576d(0x30c)](_0xacb0d1[_0x10576d(0x244)]['id'],_0x5ce890)[_0x10576d(0x1b1)](_0xab9964=>{telegramError(_0xab9964);});}),tgBot[_0x1f6187(0x2a6)](/\/enable/,_0x13b51a=>{const _0x1d53e5=_0x1f6187;if(!validateTelegram(_0x13b51a))return;if(settings[_0x1d53e5(0x2fc)]!=_0x13b51a[_0x1d53e5(0x244)]['id'])updateSetting(_0x1d53e5(0x2fc),_0x13b51a[_0x1d53e5(0x244)]['id']);updateSetting(_0x1d53e5(0x31e),!![]),tgBot['sendMessage'](_0x13b51a[_0x1d53e5(0x244)]['id'],_0x1d53e5(0x242))[_0x1d53e5(0x1b1)](_0x10dcf4=>{telegramError(_0x10dcf4);});}),tgBot['onText'](/\/config/,async _0x39e0d9=>{const _0x4106a9=_0x1f6187;if(!validateTelegram(_0x39e0d9))return;tgBot['removeListener'](_0x4106a9(0x2be)),tgBot['sendMessage'](_0x39e0d9[_0x4106a9(0x244)]['id'],_0x4106a9(0x197),{'reply_markup':{'inline_keyboard':[[{'text':_0x4106a9(0x18a),'callback_data':_0x4106a9(0x1df)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x4106a9(0x194),'callback_data':_0x4106a9(0x1b2)}]]}})[_0x4106a9(0x1b1)](_0x9fe788=>{telegramError(_0x9fe788);}),tgBot['on'](_0x4106a9(0x2be),async _0x5968ab=>{const _0x142dda=_0x4106a9,_0x5e7fd4=_0x5968ab['data'],_0x50eeab=_0x5968ab[_0x142dda(0x2ea)];tgBot['answerCallbackQuery'](_0x5968ab['id'])[_0x142dda(0x2a3)](async()=>{const _0x125890=_0x142dda;_0x5e7fd4=='orders'&&(updateSetting('telegramEvents',_0x125890(0x1df)),updateSetting('telegramEnabled',!![]),await tgBot[_0x125890(0x30c)](_0x50eeab['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x125890(0x1b1)](_0xfa0a7e=>{telegramError(_0xfa0a7e);}));_0x5e7fd4==_0x125890(0x1b5)&&(updateSetting(_0x125890(0x2f7),_0x125890(0x1b5)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x50eeab[_0x125890(0x244)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x125890(0x1b1)](_0x58d40d=>{telegramError(_0x58d40d);}));_0x5e7fd4==_0x125890(0x1b2)&&(updateSetting('telegramEvents','all'),updateSetting(_0x125890(0x31e),!![]),await tgBot[_0x125890(0x30c)](_0x50eeab['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x125890(0x1b1)](_0x79ca31=>{telegramError(_0x79ca31);}));if(!settings[_0x125890(0x2fc)])tgBot[_0x125890(0x30c)](_0x50eeab[_0x125890(0x244)]['id'],_0x125890(0x26d))['catch'](_0x388c21=>{telegramError(_0x388c21);});}),tgBot[_0x142dda(0x1fe)]('callback_query');});}),tgBot['onText'](/\/status/,_0x446ba9=>{const _0x1c851b=_0x1f6187;if(!validateTelegram(_0x446ba9))return;const _0x50547c=getBotsWithMode();let _0x1d974f=_0x1c851b(0x14c);config[_0x1c851b(0x224)](_0x1d98dd=>{const _0x40c07a=_0x1c851b,_0x53383a=_0x50547c[_0x40c07a(0x309)](_0xf689bb=>_0xf689bb[_0x40c07a(0x26c)]==_0x1d98dd[_0x40c07a(0x26c)])[_0x40c07a(0x25e)];_0x1d974f+=_0x40c07a(0x1d5)+_0x1d98dd['botID']+':\x20'+_0x1d98dd['status']+_0x40c07a(0x15d)+_0x53383a+_0x40c07a(0x15d)+_0x1d98dd['live']+'\x0a';}),_0x1d974f+='\x0a',_0x1d974f+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x1d974f+=!settings[_0x1c851b(0x31e)]?_0x1c851b(0x293):_0x1c851b(0x2d4),_0x1d974f+=settings[_0x1c851b(0x31e)]?settings['telegramEvents']==_0x1c851b(0x1b2)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x1c851b(0x178)+settings[_0x1c851b(0x2f7)]+'\x20only\x0a':'',tgBot[_0x1c851b(0x30c)](_0x446ba9[_0x1c851b(0x244)]['id'],_0x1d974f,{'parse_mode':_0x1c851b(0x291)})[_0x1c851b(0x1b1)](_0x3d1140=>{telegramError(_0x3d1140);});}),tgBot[_0x1f6187(0x2a6)](/\/restart/,_0x1e13b3=>{const _0x4f7ddc=_0x1f6187;if(!validateTelegram(_0x1e13b3))return;tgBot[_0x4f7ddc(0x1fe)](_0x4f7ddc(0x2be));const _0x20c764=getEnabledBots();if(_0x20c764[_0x4f7ddc(0x1fb)]==0x0)tgBot[_0x4f7ddc(0x30c)](_0x1e13b3[_0x4f7ddc(0x244)]['id'],_0x4f7ddc(0x253))[_0x4f7ddc(0x1b1)](_0x403353=>{telegramError(_0x403353);});else{if(_0x20c764[_0x4f7ddc(0x1fb)]>0x1)_0x20c764['push']({'botID':_0x4f7ddc(0x1b2)});let _0x1a4e2e=[],_0x1562c3=[];const _0x47af3c=_0x20c764['length']%0x4==0x0||_0x20c764[_0x4f7ddc(0x1fb)]%0x4==0x3||_0x20c764[_0x4f7ddc(0x1fb)]%0x3==0x1?0x4:0x3;let _0x280445=0x0;_0x20c764[_0x4f7ddc(0x224)]((_0x2feced,_0x509a2e)=>{const _0x4c0372=_0x4f7ddc;if(_0x509a2e%_0x47af3c==0x0)_0x1562c3=[];_0x1562c3[_0x4c0372(0x188)]({'text':_0x2feced[_0x4c0372(0x26c)]==_0x4c0372(0x1b2)?_0x4c0372(0x1db):_0x4c0372(0x1d5)+_0x2feced[_0x4c0372(0x26c)],'callback_data':_0x2feced['botID']}),_0x509a2e%_0x47af3c==0x0&&(_0x1a4e2e[_0x280445]=_0x1562c3,_0x280445++);}),tgBot[_0x4f7ddc(0x30c)](_0x1e13b3[_0x4f7ddc(0x244)]['id'],_0x4f7ddc(0x2f9),{'reply_markup':{'inline_keyboard':_0x1a4e2e}})[_0x4f7ddc(0x1b1)](_0x140cf0=>{telegramError(_0x140cf0);}),tgBot['on'](_0x4f7ddc(0x2be),async _0x4b0321=>{const _0x264f9f=_0x4f7ddc,_0x345846=_0x4b0321[_0x264f9f(0x2da)],_0x292b5e=_0x4b0321['message'];tgBot[_0x264f9f(0x2ab)](_0x4b0321['id'])['then'](async()=>{const _0x1ed688=_0x264f9f;_0x345846==_0x1ed688(0x1b2)?config[_0x1ed688(0x224)](_0x4a8cff=>{const _0x577453=_0x1ed688;restartBot(_0x4a8cff[_0x577453(0x26c)]);}):restartBot(_0x345846);}),tgBot[_0x264f9f(0x1fe)]('callback_query');});}}),tgBot[_0x1f6187(0x2a6)](/\/on/,_0x2c07c8=>{const _0x4f2cc7=_0x1f6187;if(!validateTelegram(_0x2c07c8))return;tgBot['removeListener'](_0x4f2cc7(0x2be));const _0x12ef15=getDisabledBots();if(_0x12ef15[_0x4f2cc7(0x1fb)]==0x0)tgBot[_0x4f2cc7(0x30c)](_0x2c07c8['chat']['id'],_0x4f2cc7(0x218))['catch'](_0x4c0ade=>{telegramError(_0x4c0ade);});else{if(_0x12ef15[_0x4f2cc7(0x1fb)]>0x1)_0x12ef15['push']({'botID':_0x4f2cc7(0x1b2)});let _0x3fda38=[],_0x39d552=[];const _0x7f2979=_0x12ef15[_0x4f2cc7(0x1fb)]%0x4==0x0||_0x12ef15[_0x4f2cc7(0x1fb)]%0x4==0x3||_0x12ef15['length']%0x3==0x1?0x4:0x3;let _0x4b8b04=0x0;_0x12ef15['forEach']((_0x463a1a,_0xeb64f4)=>{const _0x57d4ea=_0x4f2cc7;if(_0xeb64f4%_0x7f2979==0x0)_0x39d552=[];_0x39d552[_0x57d4ea(0x188)]({'text':_0x463a1a[_0x57d4ea(0x26c)]==_0x57d4ea(0x1b2)?_0x57d4ea(0x1db):_0x57d4ea(0x1d5)+_0x463a1a[_0x57d4ea(0x26c)],'callback_data':_0x463a1a['botID']}),_0xeb64f4%_0x7f2979==0x0&&(_0x3fda38[_0x4b8b04]=_0x39d552,_0x4b8b04++);}),tgBot[_0x4f2cc7(0x30c)](_0x2c07c8['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3fda38}})[_0x4f2cc7(0x1b1)](_0x50d50e=>{telegramError(_0x50d50e);}),tgBot['on'](_0x4f2cc7(0x2be),async _0x3eb9e6=>{const _0x2d72c5=_0x4f2cc7,_0xa9f55e=_0x3eb9e6[_0x2d72c5(0x2da)],_0x29b94c=_0x3eb9e6[_0x2d72c5(0x2ea)];tgBot[_0x2d72c5(0x2ab)](_0x3eb9e6['id'])['then'](async()=>{const _0x60b222=_0x2d72c5;_0xa9f55e==_0x60b222(0x1b2)?(tgBot[_0x60b222(0x30c)](_0x29b94c[_0x60b222(0x244)]['id'],_0x60b222(0x19f))[_0x60b222(0x1b1)](_0x9bef69=>{telegramError(_0x9bef69);}),_0x12ef15[_0x60b222(0x224)](_0x4a2f20=>{const _0x2c5211=_0x60b222;if(_0x4a2f20['botID']!='all')toggleBot(_0x4a2f20[_0x2c5211(0x26c)],toggleStatus(_0x4a2f20[_0x2c5211(0x26c)]),_0x2c5211(0x30e));})):(tgBot[_0x60b222(0x30c)](_0x29b94c['chat']['id'],_0x60b222(0x1a2)+_0xa9f55e)[_0x60b222(0x1b1)](_0x18f8ea=>{telegramError(_0x18f8ea);}),toggleBot(_0xa9f55e,toggleStatus(_0xa9f55e),_0x60b222(0x30e)));}),tgBot[_0x2d72c5(0x1fe)](_0x2d72c5(0x2be));});}}),tgBot['onText'](/\/off/,_0x10865e=>{const _0x43b629=_0x1f6187;if(!validateTelegram(_0x10865e))return;tgBot[_0x43b629(0x1fe)](_0x43b629(0x2be));const _0x52c8bf=getEnabledBots();if(_0x52c8bf[_0x43b629(0x1fb)]==0x0)tgBot['sendMessage'](_0x10865e[_0x43b629(0x244)]['id'],_0x43b629(0x253))['catch'](_0x3082df=>{telegramError(_0x3082df);});else{if(_0x52c8bf[_0x43b629(0x1fb)]>0x1)_0x52c8bf[_0x43b629(0x188)]({'botID':'all'});let _0x4cdcf2=[],_0x25b1d3=[];const _0x45c4b3=_0x52c8bf[_0x43b629(0x1fb)]%0x4==0x0||_0x52c8bf['length']%0x4==0x3||_0x52c8bf[_0x43b629(0x1fb)]%0x3==0x1?0x4:0x3;let _0x206030=0x0;_0x52c8bf[_0x43b629(0x224)]((_0x13c92d,_0x35393b)=>{const _0x5296fb=_0x43b629;if(_0x35393b%_0x45c4b3==0x0)_0x25b1d3=[];_0x25b1d3[_0x5296fb(0x188)]({'text':_0x13c92d[_0x5296fb(0x26c)]=='all'?_0x5296fb(0x1db):_0x5296fb(0x1d5)+_0x13c92d['botID'],'callback_data':_0x13c92d[_0x5296fb(0x26c)]}),_0x35393b%_0x45c4b3==0x0&&(_0x4cdcf2[_0x206030]=_0x25b1d3,_0x206030++);}),tgBot[_0x43b629(0x30c)](_0x10865e[_0x43b629(0x244)]['id'],_0x43b629(0x2c8),{'reply_markup':{'inline_keyboard':_0x4cdcf2}})['catch'](_0x1571fc=>{telegramError(_0x1571fc);}),tgBot['on'](_0x43b629(0x2be),async _0xf6692c=>{const _0x46a732=_0x43b629,_0x15f464=_0xf6692c[_0x46a732(0x2da)],_0x32cf11=_0xf6692c[_0x46a732(0x2ea)];tgBot[_0x46a732(0x2ab)](_0xf6692c['id'])[_0x46a732(0x2a3)](async()=>{const _0xc7cede=_0x46a732;_0x15f464==_0xc7cede(0x1b2)?(tgBot['sendMessage'](_0x32cf11[_0xc7cede(0x244)]['id'],_0xc7cede(0x1f1))[_0xc7cede(0x1b1)](_0x2ee3ad=>{telegramError(_0x2ee3ad);}),_0x52c8bf[_0xc7cede(0x224)](_0x3bb451=>{const _0x17582d=_0xc7cede;if(_0x3bb451[_0x17582d(0x26c)]!='all')toggleBot(_0x3bb451[_0x17582d(0x26c)],toggleStatus(_0x3bb451['botID']),_0x17582d(0x30e));})):(tgBot[_0xc7cede(0x30c)](_0x32cf11[_0xc7cede(0x244)]['id'],_0xc7cede(0x199)+_0x15f464)[_0xc7cede(0x1b1)](_0x37e296=>{telegramError(_0x37e296);}),toggleBot(_0x15f464,toggleStatus(_0x15f464),_0xc7cede(0x30e)));}),tgBot[_0x46a732(0x1fe)]('callback_query');});}}),tgBot[_0x1f6187(0x2a6)](/\/metrics/,_0x152fd6=>{const _0x47c201=_0x1f6187;if(!validateTelegram(_0x152fd6))return;tgBot[_0x47c201(0x1fe)](_0x47c201(0x2be));const _0x35b505=getEnabledBots();if(_0x35b505[_0x47c201(0x1fb)]==0x0)tgBot[_0x47c201(0x30c)](_0x152fd6[_0x47c201(0x244)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x47c201(0x1b1)](_0x57d6df=>{telegramError(_0x57d6df);});else{if(_0x35b505['length']>0x1){let _0x3808a8=[],_0x4ef868=[];const _0x5c8959=_0x35b505['length']%0x4==0x0||_0x35b505[_0x47c201(0x1fb)]%0x4==0x3||_0x35b505['length']%0x3==0x1?0x4:0x3;let _0x24470a=0x0;_0x35b505['forEach']((_0x332834,_0x597db1)=>{const _0x82a2cc=_0x47c201;if(_0x597db1%_0x5c8959==0x0)_0x4ef868=[];_0x4ef868['push']({'text':_0x82a2cc(0x1d5)+_0x332834['botID'],'callback_data':_0x332834[_0x82a2cc(0x26c)]}),_0x597db1%_0x5c8959==0x0&&(_0x3808a8[_0x24470a]=_0x4ef868,_0x24470a++);}),tgBot[_0x47c201(0x30c)](_0x152fd6[_0x47c201(0x244)]['id'],_0x47c201(0x2f8),{'reply_markup':{'inline_keyboard':_0x3808a8}})[_0x47c201(0x1b1)](_0x15f215=>{telegramError(_0x15f215);}),tgBot['on']('callback_query',async _0x2c7974=>{const _0x160642=_0x47c201,_0x3ad87c=_0x2c7974[_0x160642(0x2da)],_0x3777fc=_0x2c7974['message'];tgBot[_0x160642(0x2ab)](_0x2c7974['id'])[_0x160642(0x2a3)](async()=>{const _0x229bcf=_0x160642;if(pid[_0x3ad87c])pid[_0x3ad87c][_0x229bcf(0x1c7)]({'function':_0x229bcf(0x23d),'args':null});}),tgBot[_0x160642(0x1fe)](_0x160642(0x2be));});}else{const _0x4f3545=_0x35b505[0x0][_0x47c201(0x26c)];if(pid[_0x4f3545])pid[_0x4f3545][_0x47c201(0x1c7)]({'function':_0x47c201(0x23d),'args':null});}}}),tgBot[_0x1f6187(0x2a6)](/\/portfolio/,_0x50de78=>{const _0x306fb2=_0x1f6187;if(!validateTelegram(_0x50de78))return;tgBot[_0x306fb2(0x1fe)](_0x306fb2(0x2be));const _0x16faf7=getEnabledBots();if(_0x16faf7[_0x306fb2(0x1fb)]==0x0)tgBot['sendMessage'](_0x50de78[_0x306fb2(0x244)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x173641=>{telegramError(_0x173641);});else{if(_0x16faf7[_0x306fb2(0x1fb)]>0x1){let _0x1a1a41=[],_0x26b167=[];const _0x203ff5=_0x16faf7[_0x306fb2(0x1fb)]%0x4==0x0||_0x16faf7['length']%0x4==0x3||_0x16faf7[_0x306fb2(0x1fb)]%0x3==0x1?0x4:0x3;let _0x282abd=0x0;_0x16faf7['forEach']((_0x1c1cfd,_0x3dea16)=>{const _0x5a4beb=_0x306fb2;if(_0x3dea16%_0x203ff5==0x0)_0x26b167=[];_0x26b167[_0x5a4beb(0x188)]({'text':_0x5a4beb(0x1d5)+_0x1c1cfd['botID'],'callback_data':_0x1c1cfd[_0x5a4beb(0x26c)]}),_0x3dea16%_0x203ff5==0x0&&(_0x1a1a41[_0x282abd]=_0x26b167,_0x282abd++);}),tgBot['sendMessage'](_0x50de78['chat']['id'],_0x306fb2(0x1c4),{'reply_markup':{'inline_keyboard':_0x1a1a41}})['catch'](_0x50759c=>{telegramError(_0x50759c);}),tgBot['on']('callback_query',async _0x1033b1=>{const _0x531964=_0x306fb2,_0x2c3bb5=_0x1033b1['data'],_0x221565=_0x1033b1['message'];tgBot[_0x531964(0x2ab)](_0x1033b1['id'])[_0x531964(0x2a3)](async()=>{const _0x3b4cd2=_0x531964;if(pid[_0x2c3bb5])pid[_0x2c3bb5]['send']({'function':_0x3b4cd2(0x24a),'args':null});}),tgBot[_0x531964(0x1fe)](_0x531964(0x2be));});}else{const _0x3a6cd5=_0x16faf7[0x0]['botID'];if(pid[_0x3a6cd5])pid[_0x3a6cd5]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x40cfdd=>{const _0x143e2e=_0x1f6187;if(!validateTelegram(_0x40cfdd))return;tgBot[_0x143e2e(0x1fe)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x143e2e(0x30c)](_0x40cfdd[_0x143e2e(0x244)]['id'],_0x143e2e(0x280))['catch'](_0x5a1591=>{telegramError(_0x5a1591);});else!validInstallation?tgBot[_0x143e2e(0x30c)](_0x40cfdd[_0x143e2e(0x244)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x143e2e(0x1b1)](_0x4a5631=>{telegramError(_0x4a5631);}):(tgBot[_0x143e2e(0x30c)](_0x40cfdd[_0x143e2e(0x244)]['id'],_0x143e2e(0x285),{'reply_markup':{'inline_keyboard':[[{'text':_0x143e2e(0x310),'callback_data':_0x143e2e(0x1cc)},{'text':'No','callback_data':'no'}]]}})[_0x143e2e(0x1b1)](_0x245468=>{telegramError(_0x245468);}),tgBot['on']('callback_query',async _0xdd4506=>{const _0x5e7404=_0x143e2e,_0x2b88fa=_0xdd4506[_0x5e7404(0x2da)],_0x138262=_0xdd4506[_0x5e7404(0x2ea)];tgBot[_0x5e7404(0x2ab)](_0xdd4506['id'])[_0x5e7404(0x2a3)](async()=>{const _0xa98fb1=_0x5e7404;_0x2b88fa==_0xa98fb1(0x1cc)&&(await tgBot[_0xa98fb1(0x30c)](_0x138262['chat']['id'],_0xa98fb1(0x1d7))[_0xa98fb1(0x1b1)](_0xd75211=>{telegramError(_0xd75211);}),updateBB(_0xa98fb1(0x1ad))),_0x2b88fa=='no'&&await tgBot[_0xa98fb1(0x30c)](_0x138262[_0xa98fb1(0x244)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0xa98fb1(0x1b1)](_0x5ab1b1=>{telegramError(_0x5ab1b1);});}),tgBot[_0x5e7404(0x1fe)](_0x5e7404(0x2be));}));}),tgBot[_0x1f6187(0x2a6)](/\/reinstall/,async _0x5e5dd5=>{const _0x53e09b=_0x1f6187;if(!validateTelegram(_0x5e5dd5))return;tgBot[_0x53e09b(0x1fe)](_0x53e09b(0x2be)),!validInstallation?tgBot[_0x53e09b(0x30c)](_0x5e5dd5['chat']['id'],_0x53e09b(0x16c))[_0x53e09b(0x1b1)](_0x18c201=>{telegramError(_0x18c201);}):(tgBot[_0x53e09b(0x30c)](_0x5e5dd5[_0x53e09b(0x244)]['id'],_0x53e09b(0x22d),{'reply_markup':{'inline_keyboard':[[{'text':_0x53e09b(0x310),'callback_data':_0x53e09b(0x1cc)},{'text':'No','callback_data':'no'}]]}})[_0x53e09b(0x1b1)](_0xedb359=>{telegramError(_0xedb359);}),tgBot['on'](_0x53e09b(0x2be),async _0x31bc0a=>{const _0x54e4f2=_0x53e09b,_0x1ecc6b=_0x31bc0a[_0x54e4f2(0x2da)],_0x4cb9da=_0x31bc0a[_0x54e4f2(0x2ea)];tgBot['answerCallbackQuery'](_0x31bc0a['id'])[_0x54e4f2(0x2a3)](async()=>{const _0x4552dc=_0x54e4f2;_0x1ecc6b==_0x4552dc(0x1cc)&&(await tgBot[_0x4552dc(0x30c)](_0x4cb9da['chat']['id'],_0x4552dc(0x151))['catch'](_0x12040e=>{telegramError(_0x12040e);}),updateBB('reinstall')),_0x1ecc6b=='no'&&await tgBot[_0x4552dc(0x30c)](_0x4cb9da[_0x4552dc(0x244)]['id'],_0x4552dc(0x22a))['catch'](_0xd7dc3=>{telegramError(_0xd7dc3);});}),tgBot[_0x54e4f2(0x1fe)]('callback_query');}));}),tgBot[_0x1f6187(0x2a6)](/\/toggle/,_0x4df519=>{const _0x4a56c3=_0x1f6187;if(!validateTelegram(_0x4df519))return;tgBot[_0x4a56c3(0x1fe)]('callback_query');const _0x2c22b2=getBotsWithMode();if(_0x2c22b2[_0x4a56c3(0x1fb)]==0x0)tgBot[_0x4a56c3(0x30c)](_0x4df519[_0x4a56c3(0x244)]['id'],_0x4a56c3(0x253))['catch'](_0x366b9b=>{telegramError(_0x366b9b);});else{let _0x12f2ec=[],_0x5d1e1c=[];const _0x220687=0x2;let _0x127b94=0x0;_0x2c22b2[_0x4a56c3(0x224)]((_0x5409f2,_0x3100f1)=>{const _0x1b9acb=_0x4a56c3;if(_0x3100f1%_0x220687==0x0)_0x5d1e1c=[];_0x5d1e1c[_0x1b9acb(0x188)]({'text':_0x1b9acb(0x1d5)+_0x5409f2[_0x1b9acb(0x26c)]+'\x20('+_0x5409f2[_0x1b9acb(0x25e)]+')','callback_data':_0x5409f2[_0x1b9acb(0x26c)]}),_0x3100f1%_0x220687==0x0&&(_0x12f2ec[_0x127b94]=_0x5d1e1c,_0x127b94++);}),tgBot[_0x4a56c3(0x30c)](_0x4df519[_0x4a56c3(0x244)]['id'],_0x4a56c3(0x28d),{'reply_markup':{'inline_keyboard':_0x12f2ec}})[_0x4a56c3(0x1b1)](_0x4330d2=>{telegramError(_0x4330d2);}),tgBot['on'](_0x4a56c3(0x2be),async _0x1014b5=>{const _0x70acdf=_0x4a56c3,_0x5b1292=_0x1014b5['data'],_0x5efe3a=_0x1014b5[_0x70acdf(0x2ea)];tgBot[_0x70acdf(0x2ab)](_0x1014b5['id'])[_0x70acdf(0x2a3)](async()=>{const _0x5c9eeb=_0x70acdf,_0x3e9a8a=_0x2c22b2['find'](_0x2ec7c5=>_0x2ec7c5['botID']==_0x5b1292),_0xbf9c0a=_0x3e9a8a[_0x5c9eeb(0x25e)]==_0x5c9eeb(0x1b4)?_0x5c9eeb(0x2fa):_0x5c9eeb(0x1b4);tgBot[_0x5c9eeb(0x30c)](_0x5efe3a[_0x5c9eeb(0x244)]['id'],_0x5c9eeb(0x317)+_0x5b1292+'\x20to\x20'+_0xbf9c0a+_0x5c9eeb(0x1ce))['catch'](_0x5e434c=>{telegramError(_0x5e434c);}),toggleBotMode(_0x5b1292);}),tgBot[_0x70acdf(0x1fe)](_0x70acdf(0x2be));});}}),tgBot[_0x1f6187(0x2a6)](/\/names/,_0x5d30fd=>{const _0x4934c6=_0x1f6187;if(!validateTelegram(_0x5d30fd))return;let _0x3e2f82='';config[_0x4934c6(0x224)](_0x5b4d07=>{const _0x24f803=_0x4934c6;_0x3e2f82+=_0x24f803(0x1d5)+_0x5b4d07[_0x24f803(0x26c)]+':\x20'+_0x5b4d07['botname']+'\x0a';}),tgBot['sendMessage'](_0x5d30fd[_0x4934c6(0x244)]['id'],_0x3e2f82,{'parse_mode':_0x4934c6(0x291)})[_0x4934c6(0x1b1)](_0x440fa4=>{telegramError(_0x440fa4);});}),tgBot[_0x1f6187(0x2a6)](/\/disable/,_0x20e88d=>{const _0x7ec0db=_0x1f6187;if(!validateTelegram(_0x20e88d))return;tgBot[_0x7ec0db(0x30c)](_0x20e88d[_0x7ec0db(0x244)]['id'],'Notifications\x20disabled')[_0x7ec0db(0x1b1)](_0x1fc59b=>{telegramError(_0x1fc59b);}),updateSetting(_0x7ec0db(0x31e),![]);}),tgBot[_0x1f6187(0x2a6)](/\/help/,_0x2202fc=>{const _0x3978fc=_0x1f6187;if(!validateTelegram(_0x2202fc))return;tgBot[_0x3978fc(0x30c)](_0x2202fc[_0x3978fc(0x244)]['id'],_0x582e4d)[_0x3978fc(0x1b1)](_0x5e5919=>{telegramError(_0x5e5919);});}),tgBot['on'](_0x1f6187(0x163),_0x341060=>{const _0x8c47c6=_0x1f6187;_0x341060[_0x8c47c6(0x300)]()[_0x8c47c6(0x1e8)](_0x8c47c6(0x192))&&(logger['full'](_0x8c47c6(0x19d)),tgBot[_0x8c47c6(0x1cd)](),tgBot=null,io['to']('botmanager')[_0x8c47c6(0x17f)](_0x8c47c6(0x2dd),_0x8c47c6(0x19d)));}),process[_0x1f6187(0x22e)](_0x1f6187(0x1c8),()=>{const _0x3d1fc2=_0x1f6187;if(tgBot)tgBot[_0x3d1fc2(0x1cd)]();process[_0x3d1fc2(0x2d0)](0x1);}),process[_0x1f6187(0x22e)](_0x1f6187(0x21e),()=>{const _0x2e3d46=_0x1f6187;if(tgBot)tgBot[_0x2e3d46(0x1cd)]();process['exit'](0x1);});}}function _0x479d(){const _0x2be62f=['exp','yes','stopPolling','\x20mode','backup/','bb/','decrypt','remove','login\x20token\x20generated','12320424JCCljc','Bot\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','Starting\x20Balance\x20Bot\x20update','zip/','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/:bot/performance','All\x20bots','sortBy','host','Unauthorized\x20attempt\x20to\x20update\x20settings','orders','updatebotmanager','full','/:bot/coins','referer','8ncyGHg','restart','environment','#RES#\x20if\x20running\x20locally\x0a','includes','privateKey','rmSync','event','env','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','apiKey','telegram2FaApproval','sign','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','function','https://api.ipify.org?format=json','publicKey','mtime','debug','***','sendFile','Unauthorized\x20login\x20attempt\x20(timeout)','started','length','secure','hasOwnProperty','removeListener','disconnect','restore-backup-file','pidRefreshToken','format','index.html','hex','build2','defaults','Failed\x20to\x20download\x20','-events.json','User\x20has\x20been\x20validated','7100868COfOtB','botname','log','bbPassword','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','entries','2FA\x20login\x20rejected','store-fiat','bots','copyFileSync','2FA','2FA\x20required','test','All\x20bots\x20running\x20right\x20now','get-messages','access','logout','error','bcryptjs','SIGTERM','name',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','RSA','cancel-loading','backupfile','forEach','auth','Session\x20expired\x20for\x20user\x20...','toIPv4Address','ipc','stringify','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Unauthorized\x20attempt\x20to\x20get\x20portfolio','sort','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','once','simple','store-settings','lowdb','/names\x20-\x20show\x20bot\x20names\x0a','temporary\x20access\x20timeout','toggle-bot-mode','clientip','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','type','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','max','login\x20not\x20required','store-headless','Unauthorized\x20attempt\x20to\x20confirm\x20message','sendMetricsTelegram','Enabled\x20Bot\x20','axios','Backup\x20file\x20uploaded','static','Notifications\x20enabled','\x1b[0m','chat','yargs/yargs','sockets','hybrid-crypto-js','password','writeFileSync','sendPortfolioTelegram','5\x20min','accept','exchange','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Invalid\x20username\x20or\x20IP\x20address','getMinutes','output-003.log','reinstall-bb','No\x20bots\x20running\x20right\x20now','expiry','logs/','unlinkSync','whitelist','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','show-config','loginRequired','Markdown','blacklist','mode','0.0.0','148610cLmlue',',\x20must\x20be\x20a\x204\x20digit\x20number','lowdb/adapters/FileSync','number','/:bot/configuration','socket','\x20(1)','apiPassword','storeFiat','Error\x20while\x20deleting\x20config\x20files:\x20','set','temp/','botID','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Login\x20accepted','Invalid\x20authentication\x20token\x20(1)','Temporary\x20access\x20rejected','slice','botmanager','Unauthorized\x20attempt\x20to\x20update\x20bot','new','jsonwebtoken','uuid','show','8038496ZbTGPx','output-000.log','uuid-random','IPv4','Deleted\x20Bot\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','messages','Your\x20installation\x20is\x20already\x20up\x20to\x20date','any','node-telegram-bot-api','backup-files','*$1*','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','</b>\x20?','getMonth','/update\x20-\x20update\x20Balance\x20Bot\x0a','files','fork','tkn','::ffff:127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','handshake','NTBA_FIX_319','enabled','HTML','alias','Notifications\x20disabled\x0a','/disable\x20-\x20disable\x20notifications\x0a','from','warning','staging','store','success','confirm-message','\x1b[33m','headless','getHours','listen','request','telegramIpApproval','Error:\x20Invalid\x20argument\x20','readdirSync','then','private','getFullYear','onText','\x1b[31m','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','temporary\x20token\x20generated','get-backup-files','answerCallbackQuery','.zip','invalid\x20credentials','address','createWriteStream','versions','backup','pidExpireLogin','crypto','login','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','telegrammsg','::1','\x20>\x20','connected','add-bot','output-002.log','/:bot/portfolio','apply','callback_query','Bot\x20Mgr\x20>\x20','port','/off\x20-\x20stop\x20bot(s)\x0a','get','You\x20can\x20use\x20the\x20following\x20commands:\x0a','title','storeHeadless','write','token','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Starting\x20new\x20bot\x20|\x20Bot\x20','temporary\x20access\x20not\x20allowed','\x1b[34m','access\x20timeout','/download/:type','2FA\x20login\x20required','socket.io','exit','startsWith','removeAllListeners','getDate','Notifications\x20enabled\x0a','version.json','value','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','telegramToken','argv','data','status','Unauthorized\x20attempt\x20to\x20show\x20configuration','notification','/enable\x20-\x20enable\x20notifications\x0a','generate','logged\x20out','args','File\x20uploaded','bb-config.json','file','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','2FA\x20login\x20token\x20generated','toggleBotMode','use','settings.','message','timeshift','path','headers','Invalid\x20authentication\x20token\x20(2)','getSeconds','get-starting-balances','1000','split','4649464xfJaZI','node-zip','endsWith','3888381wqlWXb','telegramEvents','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','manual','_data','telegramChatId','match','isDirectory','internal','toString','onepagemode','30\x20min','$1_$2_$3','temporary\x20access\x20rejected','telegramUsername','hashSync','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','compareSync','find','filter','\x20minutes','sendMessage',':\x20Bot\x20Mgr\x20>\x20','stopped','Logged\x20in\x20user\x20...','Yes','127.0.0.1','Unauthorized\x20attempt\x20to\x20download\x20','/:bot/history','login\x20required','keys','Restoring\x20bot(s)\x20from\x20backup','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','search','bb-secure.json','backup-full.zip','parse','bbvReceive','reload','telegramEnabled','username','-results.json','api-eu.mixpanel.com','get-portfolio','Unauthorized\x20attempt\x20to\x20get\x20messages','sha256','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20log\x20out','padStart','binary','-performance.json','getPortfolio','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','init','<b>Balance\x20Bot\x20Status:</b>\x0a','output-001.log','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','update-bot','Node.js\x20v','Starting\x20Balance\x20Bot\x20reinstallation','secret','connection','inherit','randomBytes','assign','order','replace','telegram','family','bbUsername','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20|\x20','Restarting\x20Bot\x20','\x20|\x20client:\x20...','constructor','resetHistory','/restart\x20-\x20restart\x20bot(s)\x0a','polling_error','express-fileupload','map','/metrics\x20-\x20show\x20bot\x20performance\x0a','live','latestversion','Token\x20blacklisted','storeConfiguration','\x1b[35m','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','/status\x20-\x20show\x20bot(s)\x20status\x0a','exec','reject','allow','kill','initclient','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','remoteAddress','settings','Unauthorized\x20attempt\x20to\x20add\x20bot','build','Notifications\x20types:\x20','reinstall','Login\x20rejected','Unauthorized\x20attempt\x20to\x20delete\x20bot','showConfig','readFileSync','bbvNew','emit','size','Starting\x20bot\x20|\x20Bot\x20','/:bot','track','/on\x20-\x20start\x20bot(s)\x0a','backup-full@','join','-----------------------------------------------------------------------------------','push','running','Orders','bot','lastmsgemitted','ipv6','lastmsgtelegram','5AgQXxg','toIPv4MappedAddress','f2aRequired','404\x20Not\x20Found','disabled','All','Unauthorized\x20attempt\x20to\x20store\x20configuration','clients','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','=>\x20Go\x20to\x20#CYA#http://','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','existsSync','Unauthorized\x20attempt\x20to\x20get\x20events','apiSecret','Invalid\x20Telegram\x20token','server','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','4658773imCXGK','date-fns','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Password\x20reset\x20rejected','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','cancelLoading','3000','userid','-config.json','range','backup-full','download','update','stop','min','/upload-backup','catch','all','\x20|\x20user:\x20...','auto','alerts','#RES#\x20','graphql-request','RSA-OAEP','mkdirSync','bot-','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','isValid','getTime','reason','randomFillSync','timestamp','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Logged\x20out\x20user\x20...','add','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Invalid\x20IP\x20address','************','send','SIGINT','Disabled\x20Bot\x20','Error\x20removing\x20old\x20backup\x20files:'];_0x479d=function(){return _0x2be62f;};return _0x479d();}function disableTelegram(){const _0x314a33=_0x3a1e10;tgBot&&(tgBot[_0x314a33(0x1cd)](),tgBot=null);}function sendTelegram(_0xee8764,_0x1889b9){const _0x26338a=_0x3a1e10;if(settings[_0x26338a(0x31e)]){if(settings[_0x26338a(0x2f7)]=='all'||(_0x1889b9[_0x26338a(0x237)]==_0x26338a(0x21c)||_0x1889b9[_0x26338a(0x237)]==_0x26338a(0x296)||_0x1889b9[_0x26338a(0x237)]=='success')&&settings[_0x26338a(0x2f7)]=='alerts'||_0x1889b9[_0x26338a(0x237)]==_0x26338a(0x157)&&settings[_0x26338a(0x2f7)]==_0x26338a(0x1df)){if(tgBot&&settings[_0x26338a(0x2fc)]){if(_0x1889b9['showname'])tgBot[_0x26338a(0x30c)](settings[_0x26338a(0x2fc)],_0x1889b9[_0x26338a(0x20b)]+_0x26338a(0x2b8)+_0x1889b9[_0x26338a(0x1eb)])[_0x26338a(0x1b1)](_0x14082a=>{telegramError(_0x14082a);});else tgBot[_0x26338a(0x30c)](settings[_0x26338a(0x2fc)],_0x26338a(0x1d5)+_0xee8764+_0x26338a(0x2b8)+_0x1889b9['event'])[_0x26338a(0x1b1)](_0x4275cf=>{telegramError(_0x4275cf);});}}}}async function sendTelegramMsg(_0x2fcb2b,_0x16364c='HTML'){const _0x79618b=_0x3a1e10;return settings[_0x79618b(0x31e)]&&tgBot&&settings[_0x79618b(0x2fc)]?(await tgBot['sendMessage'](settings[_0x79618b(0x2fc)],_0x2fcb2b,{'parse_mode':_0x16364c})[_0x79618b(0x1b1)](_0x20d3cf=>{telegramError(_0x20d3cf);}),!![]):![];}function getDeviceWithIp(_0x3115fa){const _0x519291=_0x3a1e10;return devices[_0x519291(0x309)](_0x2c6b45=>_0x2c6b45['ip']===_0x3115fa);}function temporaryAccess2FA(_0x33d36b,_0x31389a){const _0x5b54ac=_0x3a1e10;let _0x403daa=new Date(),_0x2762a0=![];if(lastIpApproval){if(_0x403daa-lastIpApproval<0x1388)_0x2762a0=!![];}lastIpApproval=new Date();if(_0x2762a0)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x5b54ac(0x1fe)](_0x5b54ac(0x2be)),tgBot[_0x5b54ac(0x30c)](settings[_0x5b54ac(0x2fc)],_0x5b54ac(0x1a5)+normalizeIP(_0x31389a)['show']+_0x5b54ac(0x286),{'parse_mode':_0x5b54ac(0x291),'reply_markup':{'inline_keyboard':[[{'text':_0x5b54ac(0x24b),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x5b54ac(0x302),'callback_data':'30'},{'text':_0x5b54ac(0x16f),'callback_data':_0x5b54ac(0x16f)}]]}})[_0x5b54ac(0x1b1)](_0x1b9ced=>{telegramError(_0x1b9ced);}),tgBot['on']('callback_query',async _0x12d881=>{const _0xdd267e=_0x5b54ac,_0x4305b3=_0x12d881[_0xdd267e(0x2da)],_0x55d4d3=_0x12d881['message'];tgBot['answerCallbackQuery'](_0x12d881['id'])['then'](async()=>{const _0x530822=_0xdd267e;devices[_0x33d36b][_0x530822(0x2a0)]={'clientip':_0x31389a,'timestamp':new Date()[_0x530822(0x1bd)](),'expiry':_0x4305b3},_0x4305b3!=_0x530822(0x16f)?(await tgBot[_0x530822(0x30c)](_0x55d4d3[_0x530822(0x244)]['id'],'Access\x20enabled\x20for\x20'+_0x4305b3+_0x530822(0x30b),{'parse_mode':_0x530822(0x291)})[_0x530822(0x1b1)](_0x2c4c56=>{telegramError(_0x2c4c56);}),io['to'](_0x33d36b)[_0x530822(0x17f)](_0x530822(0x2db),{'access':{'allow':![],'reason':_0x530822(0x31d),'token':null}})):(await tgBot['sendMessage'](_0x55d4d3[_0x530822(0x244)]['id'],_0x530822(0x270))[_0x530822(0x1b1)](_0xb2cb8d=>{telegramError(_0xb2cb8d);}),io['to'](_0x33d36b)[_0x530822(0x17f)](_0x530822(0x2db),{'access':{'allow':![],'reason':_0x530822(0x304),'token':null}}));}),tgBot[_0xdd267e(0x1fe)](_0xdd267e(0x2be));}));}function loginAccess2FA(_0x2f5201,_0xf425e4){const _0x99c7dc=_0x3a1e10;tgBot&&settings[_0x99c7dc(0x2fc)]&&(tgBot[_0x99c7dc(0x1fe)](_0x99c7dc(0x2be)),tgBot[_0x99c7dc(0x30c)](settings[_0x99c7dc(0x2fc)],_0x99c7dc(0x1d6)+normalizeIP(_0xf425e4)[_0x99c7dc(0x277)]+_0x99c7dc(0x286),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x99c7dc(0x24c),'callback_data':loginExpiry},{'text':_0x99c7dc(0x16f),'callback_data':'reject'}]]}})[_0x99c7dc(0x1b1)](_0x243865=>{telegramError(_0x243865);}),tgBot['on'](_0x99c7dc(0x2be),async _0x142cd4=>{const _0x49560a=_0x99c7dc,_0x5eac29=_0x142cd4['data'],_0x18fdcb=_0x142cd4[_0x49560a(0x2ea)];tgBot[_0x49560a(0x2ab)](_0x142cd4['id'])[_0x49560a(0x2a3)](async()=>{const _0x37dddb=_0x49560a;devices[_0x2f5201][_0x37dddb(0x1ef)]={'clientip':_0xf425e4,'timestamp':new Date()[_0x37dddb(0x1bd)](),'expiry':_0x5eac29},_0x5eac29!=_0x37dddb(0x16f)?(await tgBot[_0x37dddb(0x30c)](_0x18fdcb[_0x37dddb(0x244)]['id'],_0x37dddb(0x26e),{'parse_mode':'HTML'})[_0x37dddb(0x1b1)](_0x292382=>{telegramError(_0x292382);}),io['to'](_0x2f5201)[_0x37dddb(0x17f)]('status',{'access':{'allow':![],'reason':_0x37dddb(0x31d),'token':null}})):(await tgBot[_0x37dddb(0x30c)](_0x18fdcb[_0x37dddb(0x244)]['id'],_0x37dddb(0x17a))[_0x37dddb(0x1b1)](_0x1a9828=>{telegramError(_0x1a9828);}),io['to'](_0x2f5201)[_0x37dddb(0x17f)](_0x37dddb(0x2db),{'access':{'allow':![],'reason':_0x37dddb(0x211),'token':null}}));}),tgBot[_0x49560a(0x1fe)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x200873=_0x3a1e10;return dbConfig[_0x200873(0x2c2)](_0x200873(0x213))[_0x200873(0x1dc)](_0x200873(0x26c))[_0x200873(0x30a)]({'status':_0x200873(0x290)})[_0x200873(0x2d6)]()||[];}function getDisabledBots(){const _0x4d6247=_0x3a1e10;return dbConfig[_0x4d6247(0x2c2)]('bots')[_0x4d6247(0x1dc)](_0x4d6247(0x26c))[_0x4d6247(0x30a)]({'status':'disabled'})[_0x4d6247(0x2d6)]()||[];}function getBotAttributes(_0x1281d4){const _0x51515f=_0x3a1e10;let _0x3c460b={};const _0x12ddba=configpath+_0x51515f(0x1ba)+_0x1281d4+_0x51515f(0x1a9),_0x5b1d98=fs['existsSync'](_0x12ddba);if(_0x5b1d98){const _0x1e4a35=fs[_0x51515f(0x17d)](_0x12ddba);try{const _0x36445a=JSON['parse'](_0x1e4a35),_0x34fdb4=_0x36445a?_0x36445a[_0x51515f(0x18b)][0x0][_0x51515f(0x29c)]:![];_0x3c460b[_0x51515f(0x25e)]=_0x34fdb4?_0x51515f(0x1b4):_0x51515f(0x2fa),_0x3c460b['botname']=_0x36445a?_0x36445a[_0x51515f(0x18b)][0x0][_0x51515f(0x20b)]:_0x51515f(0x1d5)+_0x1281d4;}catch(_0x279f96){_0x3c460b[_0x51515f(0x25e)]=_0x51515f(0x2fa),_0x3c460b['botname']=_0x51515f(0x1d5)+_0x1281d4;}}else _0x3c460b['mode']=_0x51515f(0x2fa),_0x3c460b[_0x51515f(0x20b)]=_0x51515f(0x1d5)+_0x1281d4;return _0x3c460b;}function getBotsWithMode(){const _0x485a43=_0x3a1e10,_0x3f29fb=dbConfig[_0x485a43(0x2c2)](_0x485a43(0x213))['sortBy']('botID')[_0x485a43(0x2d6)]()||[];return _0x3f29fb[_0x485a43(0x224)](_0x1e5698=>{const _0x8bca76=_0x485a43;let _0x5adda2=getBotAttributes(_0x1e5698[_0x8bca76(0x26c)]);_0x1e5698[_0x8bca76(0x25e)]=_0x5adda2[_0x8bca76(0x25e)];}),_0x3f29fb;}function getBotExchanges(){const _0x135ce7=_0x3a1e10;let _0x542c6d=[];const _0x1525e4=dbConfig[_0x135ce7(0x2c2)]('bots')[_0x135ce7(0x1dc)](_0x135ce7(0x26c))['value']()||[];_0x1525e4[_0x135ce7(0x224)](_0x5522b3=>{const _0x2962ef=_0x135ce7;if(_0x5522b3[_0x2962ef(0x2db)]==_0x2962ef(0x290)){const _0x272a52=configpath+_0x2962ef(0x1ba)+_0x5522b3['botID']+_0x2962ef(0x1a9),_0x441991=fs[_0x2962ef(0x19a)](_0x272a52);let _0x55b76a;if(_0x441991){const _0x1dd3b0=fs['readFileSync'](_0x272a52);try{const _0x33e708=JSON[_0x2962ef(0x31b)](_0x1dd3b0);_0x55b76a=_0x33e708?_0x33e708[_0x2962ef(0x18b)][0x0][_0x2962ef(0x24d)]:null;}catch(_0x44f451){}}if(_0x55b76a)_0x542c6d[_0x2962ef(0x188)](_0x55b76a);}});const _0xb16db2=[...new Set(_0x542c6d)][_0x135ce7(0x22c)]();return _0xb16db2;}async function initUser(){const _0x544865=_0x3a1e10;if(!settings['userid']){const _0x32578e=uuidRandom();mixpanel[_0x544865(0x292)](_0x32578e),updateSetting(_0x544865(0x1a8),_0x32578e);}}async function initSecure(){const _0xd38334=_0x3a1e10;let _0x2f232a=getSecure();if(!_0x2f232a[_0xd38334(0x1fd)]('secret')){let _0x447b93=await generateKeys();_0x2f232a[_0xd38334(0x1f4)]=_0x447b93['publicKey'],_0x2f232a[_0xd38334(0x1e9)]=_0x447b93[_0xd38334(0x1e9)],_0x2f232a['secret']=crypto[_0xd38334(0x155)](0x20)['toString'](_0xd38334(0x204));;storeSecure(_0x2f232a);}}function getSettings(){const _0x370fc0=_0x3a1e10;return dbSettings[_0x370fc0(0x2c2)](_0x370fc0(0x175))[_0x370fc0(0x2d6)]()||{};}function getSecure(){const _0x431887=_0x3a1e10;return dbSecure[_0x431887(0x2c2)](_0x431887(0x1fc))['value']()||{};}function getBlacklist(){const _0x1adf36=_0x3a1e10;return dbSecure['get'](_0x1adf36(0x25d))[_0x1adf36(0x2d6)]()||[];}function broadcastToBots(_0x592b90,_0x584a51){const _0x2f11a3=_0x3a1e10;config[_0x2f11a3(0x224)](_0x3f1b39=>{const _0x3159c3=_0x2f11a3;if(_0x3f1b39[_0x3159c3(0x2db)]=='enabled'&&_0x3f1b39[_0x3159c3(0x167)]==_0x3159c3(0x189)||_0x3f1b39[_0x3159c3(0x2db)]==_0x3159c3(0x274)&&_0x3f1b39[_0x3159c3(0x167)]=='running'){if(pid[_0x3f1b39[_0x3159c3(0x26c)]])pid[_0x3f1b39[_0x3159c3(0x26c)]][_0x3159c3(0x1c7)]({[_0x592b90]:_0x584a51});}});}function storeSettings(_0x5b7ce8,_0x2558f9=![]){const _0x1231c6=_0x3a1e10;_0x5b7ce8={...settings,..._0x5b7ce8};if(_0x2558f9&&_0x5b7ce8[_0x1231c6(0x20d)]!=_0x1231c6(0x1c6)&&_0x5b7ce8['bbPassword']!='***'&&_0x5b7ce8[_0x1231c6(0x20d)]!=''){const _0x50f84b=crypt[_0x1231c6(0x1d1)](secure['privateKey'],_0x5b7ce8[_0x1231c6(0x20d)])[_0x1231c6(0x2ea)][_0x1231c6(0x2f2)]('@')[0x0],_0x39249c=bcrypt['hashSync'](_0x50f84b,saltRounds);_0x5b7ce8={..._0x5b7ce8,'bbPassword':_0x39249c};}if(_0x2558f9&&_0x5b7ce8[_0x1231c6(0x2d8)]!='************'&&_0x5b7ce8[_0x1231c6(0x2d8)]!=_0x1231c6(0x1f7)&&_0x5b7ce8[_0x1231c6(0x2d8)]!=''){const _0x10fc21=crypt['decrypt'](secure['privateKey'],_0x5b7ce8['telegramToken'])['message'][_0x1231c6(0x2f2)]('@')[0x0];_0x5b7ce8={..._0x5b7ce8,'telegramToken':_0x10fc21};}const _0x48b812=_0x5b7ce8[_0x1231c6(0x2d8)]!=_0x1231c6(0x1c6)&&_0x5b7ce8[_0x1231c6(0x2d8)]!=settings[_0x1231c6(0x2d8)]||_0x5b7ce8[_0x1231c6(0x305)]!=settings[_0x1231c6(0x305)],_0x242ff5=_0x5b7ce8[_0x1231c6(0x2d8)]==''||_0x5b7ce8[_0x1231c6(0x305)]=='';if(_0x48b812)_0x5b7ce8[_0x1231c6(0x2f7)]='all';for(const [_0x4f181b,_0x559f67]of Object[_0x1231c6(0x210)](_0x5b7ce8)){if(_0x4f181b=='telegramToken'&&_0x559f67=='************'){_0x5b7ce8['telegramToken']=settings[_0x1231c6(0x2d8)];continue;};if(_0x4f181b=='bbPassword'&&_0x559f67==_0x1231c6(0x1c6)){_0x5b7ce8[_0x1231c6(0x20d)]=settings['bbPassword'];continue;};dbSettings[_0x1231c6(0x26a)](_0x1231c6(0x2e9)+_0x4f181b,_0x559f67)[_0x1231c6(0x2c6)]();}settings=_0x5b7ce8,io['to'](_0x1231c6(0x272))[_0x1231c6(0x17f)](_0x1231c6(0x175),cleanSettings()),broadcastToBots(_0x1231c6(0x2eb),settings['timeshift']),broadcastToBots(_0x1231c6(0x301),settings[_0x1231c6(0x301)]);if(_0x48b812&&!_0x242ff5)initTelegram();if(_0x48b812&&_0x242ff5)disableTelegram();getAllClients()['forEach'](_0x2314f9=>{const _0x93342d=_0x1231c6;getSocket(_0x2314f9['id'])[_0x93342d(0x17f)]('status',{'access':{'allow':![],'reason':_0x93342d(0x31d),'token':null}});});}function updateSetting(_0x3a6123,_0x557d11){const _0x206307=_0x3a1e10;dbSettings[_0x206307(0x26a)](_0x206307(0x2e9)+_0x3a6123,_0x557d11)[_0x206307(0x2c6)](),settings=getSettings(),io['to'](_0x206307(0x272))[_0x206307(0x17f)]('settings',cleanSettings());}function storeSecure(_0x418835){const _0x261b2d=_0x3a1e10;dbSecure['get'](_0x261b2d(0x1fc))['push'](_0x418835)[_0x261b2d(0x2c6)](),secure=_0x418835;}function addBlacklist(_0x4b54df){const _0x2076b7=_0x3a1e10;cleanBlacklist();let _0xa4c408;devices[_0x4b54df]['telegramIpApproval']?_0xa4c408=Math[_0x2076b7(0x239)](devices[_0x4b54df][_0x2076b7(0x2a0)][_0x2076b7(0x254)],loginExpiry):_0xa4c408=loginExpiry,dbSecure[_0x2076b7(0x2c2)](_0x2076b7(0x25d))[_0x2076b7(0x188)]({'expiry':new Date()[_0x2076b7(0x1bd)]()+_0xa4c408*0x3c*0x3e8,'token':devices[_0x4b54df][_0x2076b7(0x21a)][_0x2076b7(0x2c7)]})[_0x2076b7(0x2c6)](),blacklist=dbSecure['get'](_0x2076b7(0x25d))[_0x2076b7(0x2d6)]();}function cleanBlacklist(){const _0x526a27=_0x3a1e10;let _0x222a67=dbSecure[_0x526a27(0x2c2)](_0x526a27(0x25d))['cloneDeep']()['value'](),_0x7a6f02=new Date()[_0x526a27(0x1bd)]();_0x222a67[_0x526a27(0x224)](_0xcc341d=>{const _0x9fbd9f=_0x526a27;_0xcc341d[_0x9fbd9f(0x254)]<_0x7a6f02&&dbSecure[_0x9fbd9f(0x2c2)]('blacklist')[_0x9fbd9f(0x1d2)]({'expiry':_0xcc341d[_0x9fbd9f(0x254)]})[_0x9fbd9f(0x2c6)]();});}function initStates(){const _0x13f285=_0x3a1e10;let _0x4ea33b=getConfiguration();_0x4ea33b[_0x13f285(0x224)](_0x4fcb8=>{const _0x3a3c4b=_0x13f285;_0x4fcb8[_0x3a3c4b(0x167)]=_0x3a3c4b(0x30e);}),storeConfiguration(_0x4ea33b);}function onKeys(){const _0x50ea1f=new RSA();return new Promise(_0xe30cf6=>{const _0x5dd3ad=_0x762f;_0x50ea1f['generateKeyPairAsync']()[_0x5dd3ad(0x2a3)](_0x11d010=>{_0xe30cf6(_0x11d010);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1f447f=_0x3a1e10;let _0x3599fa=getSettings(),_0x47c1e9=![];!_0x3599fa[_0x1f447f(0x1fd)](_0x1f447f(0x18e))&&(_0x3599fa[_0x1f447f(0x18e)]=0x0,_0x47c1e9=!![]);!_0x3599fa[_0x1f447f(0x1fd)]('lastmsgemitted')&&(_0x3599fa['lastmsgemitted']=0x0,_0x47c1e9=!![]);!_0x3599fa[_0x1f447f(0x1fd)](_0x1f447f(0x168))&&(_0x3599fa[_0x1f447f(0x168)]='0.0.0',_0x47c1e9=!![]);!_0x3599fa[_0x1f447f(0x1fd)](_0x1f447f(0x301))&&(_0x3599fa[_0x1f447f(0x301)]=![],_0x47c1e9=!![]);if(_0x47c1e9)storeSettings(_0x3599fa);try{fs[_0x1f447f(0x2a2)](configbackuppath,{'withFileTypes':!![]})[_0x1f447f(0x224)](_0x154d9d=>{const _0x2ef8f9=_0x1f447f;if(!_0x154d9d[_0x2ef8f9(0x2fe)]()){if(!_0x154d9d[_0x2ef8f9(0x21f)][_0x2ef8f9(0x2d1)](_0x2ef8f9(0x185)))fs[_0x2ef8f9(0x256)](configbackuppath+_0x154d9d[_0x2ef8f9(0x21f)]);}else fs[_0x2ef8f9(0x1ea)](configbackuppath+_0x154d9d[_0x2ef8f9(0x21f)],{'recursive':!![]});});}catch(_0x1256c5){logger[_0x1f447f(0x1f6)](_0x1f447f(0x1ca),_0x1256c5);}}function storeConfiguration(_0x52c8cb){const _0xd4dcac=_0x3a1e10;dbConfig['get'](_0xd4dcac(0x213))['remove']()[_0xd4dcac(0x2c6)](),_0x52c8cb[_0xd4dcac(0x224)](_0x38278a=>{const _0x5d2bf0=_0xd4dcac;delete _0x38278a[_0x5d2bf0(0x25e)];}),dbConfig[_0xd4dcac(0x2c2)]('bots')[_0xd4dcac(0x188)](..._0x52c8cb)[_0xd4dcac(0x2c6)](),config=_0x52c8cb;}function resetPassword(){const _0x2aca6b=_0x3a1e10;tgBot&&settings[_0x2aca6b(0x2fc)]&&(tgBot[_0x2aca6b(0x1fe)](_0x2aca6b(0x2be)),tgBot[_0x2aca6b(0x30c)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2aca6b(0x291),'reply_markup':{'inline_keyboard':[[{'text':_0x2aca6b(0x1cc),'callback_data':_0x2aca6b(0x1cc)},{'text':'no','callback_data':'no'}]]}})[_0x2aca6b(0x1b1)](_0x3b5bee=>{telegramError(_0x3b5bee);}),tgBot['on'](_0x2aca6b(0x2be),async _0x20aab1=>{const _0x5ed294=_0x2aca6b,_0x425165=_0x20aab1[_0x5ed294(0x2da)],_0x38aa7c=_0x20aab1['message'];tgBot[_0x5ed294(0x2ab)](_0x20aab1['id'])[_0x5ed294(0x2a3)](async()=>{const _0x36da34=_0x5ed294;if(_0x425165!='no'){const _0x457c0a=0xf,_0x478d4a=_0x36da34(0x20f),_0xcbfe8c=Array[_0x36da34(0x295)](crypto[_0x36da34(0x1bf)](new Uint32Array(_0x457c0a)))[_0x36da34(0x165)](_0x56b772=>_0x478d4a[_0x56b772%_0x478d4a[_0x36da34(0x1fb)]])[_0x36da34(0x186)](''),_0xd76fd1=bcrypt[_0x36da34(0x306)](_0xcbfe8c,saltRounds);storeSettings({'bbPassword':_0xd76fd1}),await tgBot['sendMessage'](_0x38aa7c[_0x36da34(0x244)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0xcbfe8c,{'parse_mode':'HTML'})[_0x36da34(0x1b1)](_0x118c72=>{telegramError(_0x118c72);});}else await tgBot['sendMessage'](_0x38aa7c[_0x36da34(0x244)]['id'],_0x36da34(0x1a3))[_0x36da34(0x1b1)](_0x55a133=>{telegramError(_0x55a133);});}),tgBot[_0x5ed294(0x1fe)]('callback_query');}));}async function confirmRestore(_0x1cc7ef,_0x58d62b){const _0x2fa8cd=_0x3a1e10;io['to'](_0x2fa8cd(0x272))['emit'](_0x2fa8cd(0x2dd),_0x2fa8cd(0x27e),_0x2fa8cd(0x299)),tgBot&&settings[_0x2fa8cd(0x2fc)]&&(tgBot[_0x2fa8cd(0x1fe)]('callback_query'),await tgBot[_0x2fa8cd(0x30c)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x2fa8cd(0x291),'reply_markup':{'inline_keyboard':[[{'text':_0x2fa8cd(0x1cc),'callback_data':_0x2fa8cd(0x1cc)},{'text':'no','callback_data':'no'}]]}})[_0x2fa8cd(0x1b1)](_0x6b45e7=>{telegramError(_0x6b45e7);}),tgBot['on'](_0x2fa8cd(0x2be),async _0x5bbb39=>{const _0x5dbb30=_0x2fa8cd,_0x3cc923=_0x5bbb39[_0x5dbb30(0x2da)],_0x393ed8=_0x5bbb39[_0x5dbb30(0x2ea)];tgBot[_0x5dbb30(0x2ab)](_0x5bbb39['id'])[_0x5dbb30(0x2a3)](async()=>{const _0x261dd3=_0x5dbb30;_0x3cc923==_0x261dd3(0x1cc)?(await tgBot[_0x261dd3(0x30c)](_0x393ed8[_0x261dd3(0x244)]['id'],_0x261dd3(0x316),{'parse_mode':_0x261dd3(0x291)})['catch'](_0x32eccd=>{telegramError(_0x32eccd);}),unzipFile(_0x1cc7ef,_0x58d62b)):(logger[_0x261dd3(0x1f6)]('Restore\x20process\x20aborted'),await tgBot[_0x261dd3(0x30c)](_0x393ed8[_0x261dd3(0x244)]['id'],'Restore\x20process\x20aborted')['catch'](_0x3d00d1=>{telegramError(_0x3d00d1);}));}),tgBot['removeListener'](_0x5dbb30(0x2be));}));}function getServerTime(){const _0x4e01c2=_0x3a1e10,_0x1ca665=new Date();return _0x1ca665[_0x4e01c2(0x2a5)]()+'/'+(_0x1ca665[_0x4e01c2(0x287)]()+0x1)[_0x4e01c2(0x300)]()[_0x4e01c2(0x327)](0x2,'0')+'/'+_0x1ca665[_0x4e01c2(0x2d3)]()['toString']()[_0x4e01c2(0x327)](0x2,'0')+'\x20'+_0x1ca665['getHours']()['toString']()[_0x4e01c2(0x327)](0x2,'0')+':'+_0x1ca665[_0x4e01c2(0x250)]()[_0x4e01c2(0x300)]()[_0x4e01c2(0x327)](0x2,'0')+':'+_0x1ca665[_0x4e01c2(0x2ef)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x19bf4d=_0x3a1e10,_0x2f9739=shiftedTime();return _0x2f9739[_0x19bf4d(0x2a5)]()+'/'+(_0x2f9739['getMonth']()+0x1)[_0x19bf4d(0x300)]()[_0x19bf4d(0x327)](0x2,'0')+'/'+_0x2f9739[_0x19bf4d(0x2d3)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x2f9739[_0x19bf4d(0x29d)]()['toString']()['padStart'](0x2,'0')+':'+_0x2f9739['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x2f9739[_0x19bf4d(0x2ef)]()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x525bc7=_0x3a1e10,_0x5e1bf8=shiftedTime();return _0x5e1bf8['getFullYear']()+(_0x5e1bf8[_0x525bc7(0x287)]()+0x1)[_0x525bc7(0x300)]()['padStart'](0x2,'0')+_0x5e1bf8['getDate']()[_0x525bc7(0x300)]()[_0x525bc7(0x327)](0x2,'0')+'-'+_0x5e1bf8[_0x525bc7(0x29d)]()[_0x525bc7(0x300)]()[_0x525bc7(0x327)](0x2,'0')+_0x5e1bf8[_0x525bc7(0x250)]()[_0x525bc7(0x300)]()[_0x525bc7(0x327)](0x2,'0')+_0x5e1bf8['getSeconds']()[_0x525bc7(0x300)]()[_0x525bc7(0x327)](0x2,'0');}function shiftedTime(){const _0x4bf3ab=_0x3a1e10,_0x482590=new Date();let _0x25ad56=_0x482590;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x25ad56=fns[_0x4bf3ab(0x1c3)](_0x482590,{'hours':settings['timeshift']});return _0x25ad56;}function startScheduler(){const _0x26704a=_0x3a1e10,_0x10bd34=new Date()['getUTCHours'](),_0x3f1c57=shiftedTime()[_0x26704a(0x29d)]();_0x3f1c57==0x4&&backupConfigFiles();_0x3f1c57==0x0&&rotateLogFiles();_0x10bd34%0x6==0x0&&triggerAnalytics();_0x10bd34%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2bbdcf){const _0x5d1c77=_0x3a1e10;logger[_0x5d1c77(0x1f6)]('Restore\x20backup\x20file\x20'+_0x2bbdcf);const _0x963ba6=getBotsWithMode();_0x963ba6[_0x5d1c77(0x1fb)]>0x0?confirmRestore(configbackuppath,_0x2bbdcf):unzipFile(configbackuppath,_0x2bbdcf);}async function getBackupFiles(_0xdc71e1=null){const _0x561430=_0x3a1e10;let _0x1efaf2=[],_0x54658d=fs[_0x561430(0x2a2)](configbackuppath,{'withFileTypes':!![]});_0x54658d['sort']((_0xd72489,_0x229a9e)=>_0xd72489[_0x561430(0x21f)]<_0x229a9e[_0x561430(0x21f)]?0x1:_0x229a9e[_0x561430(0x21f)]<_0xd72489[_0x561430(0x21f)]?-0x1:0x0),_0x54658d['forEach'](_0x2d058e=>{const _0x1b4117=_0x561430;if(!_0x2d058e[_0x1b4117(0x2fe)]()&&_0x2d058e[_0x1b4117(0x21f)][_0x1b4117(0x2d1)](_0x1b4117(0x185))&&_0x2d058e['name'][_0x1b4117(0x2f5)]('.zip')){const _0x97441=formatDate(fs['statSync'](configbackuppath+_0x2d058e[_0x1b4117(0x21f)])[_0x1b4117(0x1f5)]);_0x1efaf2[_0x1b4117(0x188)]({'name':_0x2d058e['name'],'mtime':_0x97441});}});if(_0xdc71e1)io['to'](_0xdc71e1)['emit'](_0x561430(0x283),_0x1efaf2);else return _0x1efaf2;}async function backupConfigFiles(){const _0x28e32b=_0x3a1e10;await zipFiles('backup-full');const _0x3babe6=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x28e32b(0x31a),configbackuppath+(_0x28e32b(0x185)+_0x3babe6+'.zip'));let _0x4f651d=fs[_0x28e32b(0x2a2)](configbackuppath,{'withFileTypes':!![]});_0x4f651d[_0x28e32b(0x22c)]((_0x56feab,_0x5b26ee)=>_0x56feab[_0x28e32b(0x21f)]<_0x5b26ee['name']?0x1:_0x5b26ee['name']<_0x56feab[_0x28e32b(0x21f)]?-0x1:0x0),_0x4f651d[_0x28e32b(0x1fb)]>maxBackups&&fs[_0x28e32b(0x256)](configbackuppath+_0x4f651d[_0x4f651d[_0x28e32b(0x1fb)]-0x1]['name']);}function rotateLogFiles(){const _0x3b9ef7=_0x3a1e10,_0x4483cd=fs['statSync'](logspath+_0x3b9ef7(0x279)),_0x47690d=_0x4483cd[_0x3b9ef7(0x180)]/0x400;if(_0x47690d>0x64){let _0x13bc57=fs[_0x3b9ef7(0x2a2)](logspath,{'withFileTypes':!![]});_0x13bc57[_0x3b9ef7(0x22c)]((_0x4f51ec,_0x1a4638)=>_0x4f51ec[_0x3b9ef7(0x21f)]<_0x1a4638[_0x3b9ef7(0x21f)]?0x1:_0x1a4638['name']<_0x4f51ec[_0x3b9ef7(0x21f)]?-0x1:0x0),_0x13bc57[_0x3b9ef7(0x224)](_0x3b4b2c=>{const _0x12ae66=_0x3b9ef7;if(_0x3b4b2c[_0x12ae66(0x21f)]==_0x12ae66(0x2bb))fs[_0x12ae66(0x214)](logspath+_0x3b4b2c['name'],logspath+_0x12ae66(0x251));if(_0x3b4b2c[_0x12ae66(0x21f)]=='output-001.log')fs[_0x12ae66(0x214)](logspath+_0x3b4b2c[_0x12ae66(0x21f)],logspath+_0x12ae66(0x2bb));_0x3b4b2c[_0x12ae66(0x21f)]==_0x12ae66(0x279)&&(fs[_0x12ae66(0x214)](logspath+_0x3b4b2c[_0x12ae66(0x21f)],logspath+_0x12ae66(0x14d)),fs[_0x12ae66(0x249)](logspath+_0x3b4b2c[_0x12ae66(0x21f)],''));});}}async function zipFiles(_0x37f311){const _0x350887=_0x3a1e10;let _0x45cdb5;if(_0x37f311=='logs')_0x45cdb5=logspath;if(_0x37f311=='backup')_0x45cdb5=configpath;if(_0x37f311==_0x350887(0x1ab))_0x45cdb5=configpath;let _0x1f8494=fs[_0x350887(0x2a2)](_0x45cdb5,{'withFileTypes':!![]});const _0x4dc977=new require(_0x350887(0x2f4))();_0x1f8494['forEach'](_0x40e3a7=>{const _0x2b42fe=_0x350887;if(!_0x40e3a7['isDirectory']()){let _0x391053=fs['readFileSync'](_0x45cdb5+_0x40e3a7[_0x2b42fe(0x21f)]);if(_0x37f311==_0x2b42fe(0x2b1)){const _0x204f66=/^bot-[0-9]{3}-config.json$/,_0x5ccc2a=_0x204f66[_0x2b42fe(0x217)](_0x40e3a7[_0x2b42fe(0x21f)]);if(_0x5ccc2a){const _0xb3f397=JSON[_0x2b42fe(0x31b)](_0x391053);if(_0xb3f397[_0x2b42fe(0x18b)][0x0]){_0xb3f397['bot'][0x0][_0x2b42fe(0x1ee)]='***',_0xb3f397['bot'][0x0][_0x2b42fe(0x19c)]=_0x2b42fe(0x1f7);if(_0xb3f397['bot'][0x0][_0x2b42fe(0x267)])_0xb3f397[_0x2b42fe(0x18b)][0x0][_0x2b42fe(0x267)]=_0x2b42fe(0x1f7);}_0x391053=JSON[_0x2b42fe(0x229)](_0xb3f397,null,0x2);}if(_0x40e3a7[_0x2b42fe(0x21f)]=='bb-settings.json'){const _0x298034=JSON[_0x2b42fe(0x31b)](_0x391053);if(_0x298034[_0x2b42fe(0x175)][_0x2b42fe(0x25b)])_0x298034[_0x2b42fe(0x175)][_0x2b42fe(0x25b)]=![];if(_0x298034['settings'][_0x2b42fe(0x20d)])_0x298034[_0x2b42fe(0x175)]['bbPassword']=_0x2b42fe(0x1f7);if(_0x298034[_0x2b42fe(0x175)]['telegramToken'])_0x298034[_0x2b42fe(0x175)][_0x2b42fe(0x2d8)]=_0x2b42fe(0x1f7);if(_0x298034[_0x2b42fe(0x175)][_0x2b42fe(0x2fc)])_0x298034[_0x2b42fe(0x175)][_0x2b42fe(0x2fc)]=null;_0x391053=JSON['stringify'](_0x298034,null,0x2);}if(_0x40e3a7[_0x2b42fe(0x21f)]!=_0x2b42fe(0x319))_0x4dc977[_0x2b42fe(0x2e4)](_0x40e3a7['name'],_0x391053);}else _0x4dc977[_0x2b42fe(0x2e4)](_0x40e3a7['name'],_0x391053);}});const _0x5ac7ff=_0x4dc977[_0x350887(0x2df)]({'base64':![],'compression':'DEFLATE'});fs[_0x350887(0x249)](zippath+(_0x37f311+_0x350887(0x2ac)),_0x5ac7ff,_0x350887(0x328));}async function unzipFile(_0x483d59,_0x308007){const _0x3540c5=_0x3a1e10;fs[_0x3540c5(0x2a2)](configpath,{'withFileTypes':!![]})[_0x3540c5(0x224)](_0x4a0099=>{const _0x3f068f=_0x3540c5;if(!_0x4a0099[_0x3f068f(0x2fe)]())fs[_0x3f068f(0x1ea)](configpath+_0x4a0099[_0x3f068f(0x21f)]);});const _0x1e923b=fs['readFileSync'](_0x483d59+_0x308007,_0x3540c5(0x328)),_0x3433b7=new require(_0x3540c5(0x2f4))(_0x1e923b,{'base64':![],'checkCRC32':!![]});Object[_0x3540c5(0x315)](_0x3433b7[_0x3540c5(0x289)])['forEach'](_0x2365a1=>{const _0x1f2391=_0x3540c5,_0xa2c8f9=_0x3433b7['files'][_0x2365a1];fs[_0x1f2391(0x249)](configpath+_0xa2c8f9[_0x1f2391(0x21f)],_0xa2c8f9[_0x1f2391(0x2fb)]);}),fs[_0x3540c5(0x2a2)](temppath,{'withFileTypes':!![]})[_0x3540c5(0x224)](_0x1fe27f=>{const _0x21a9a1=_0x3540c5;if(!_0x1fe27f[_0x21a9a1(0x2fe)]())fs[_0x21a9a1(0x1ea)](temppath+_0x1fe27f[_0x21a9a1(0x21f)]);}),logger[_0x3540c5(0x1f6)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x3540c5(0x1c7)]({'restore':!![]},_0x5a1f52=>{});}async function getPublicIp(){const _0xc7990b=_0x3a1e10;try{const _0x1fcf96=await axios[_0xc7990b(0x2c2)](_0xc7990b(0x1f3));publicip=_0x1fcf96['data']['ip'];}catch(_0x548ee4){}}async function triggerAnalytics(){const _0x838d42=_0x3a1e10;if(!publicip)await getPublicIp();const _0xcdabbe=getBotsWithMode();let _0x51602e=0x0;_0xcdabbe['forEach'](_0x1102a8=>{const _0x2b579c=_0x762f;if(_0x1102a8[_0x2b579c(0x2db)]===_0x2b579c(0x290))_0x51602e++;});const _0x114dc9=getBotExchanges();mixpanel[_0x838d42(0x183)]('Server',{'distinct_id':settings[_0x838d42(0x1a8)],'ip':publicip,'version':serverversion,'numbots':_0xcdabbe['length'],'numbotsenabled':_0x51602e,'exchanges':_0x114dc9,'environment':environment});}async function getMessages(){const _0x467827=_0x3a1e10,_0x24b71d=_0x467827(0x238),_0x57d00c=new GraphQLClient(_0x24b71d),_0x22b787={'authorization':_0x467827(0x1ed)},_0x16eafc=serverversion['split']('.'),_0x14a9ca=_0x16eafc[0x0]+'.'+_0x16eafc[0x1],_0x38d511=Math[_0x467827(0x1af)](settings['lastmsgtelegram'],settings[_0x467827(0x18c)]),_0x366efb={'last':parseInt(_0x38d511),'bbm':_0x14a9ca},_0x3794d9=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5d3f7e;try{_0x5d3f7e=await _0x57d00c[_0x467827(0x29f)](_0x3794d9,_0x366efb,_0x22b787);}catch(_0xa9184f){}if(_0x5d3f7e&&_0x5d3f7e['messages']){let _0x36e292=settings[_0x467827(0x18e)];newMessages=[];for(const _0x118ab5 of _0x5d3f7e[_0x467827(0x27f)]){newMessages[_0x467827(0x188)](_0x118ab5);let _0x3bc516=![];_0x118ab5[_0x467827(0x17e)]&&(updateSetting(_0x467827(0x168),_0x118ab5[_0x467827(0x17e)]),_0x3bc516=isNewerVersion(serverversion,_0x118ab5[_0x467827(0x17e)])||serverversion==_0x118ab5[_0x467827(0x17e)]);if(!_0x3bc516&&_0x118ab5[_0x467827(0x263)]>_0x36e292){if(_0x118ab5[_0x467827(0x31c)]===_0x467827(0x281)||serverversion[_0x467827(0x2d1)](_0x118ab5['bbvReceive'])){let _0x3cc45c=''+_0x118ab5[_0x467827(0x2c4)]+'\x0a\x0a'+_0x118ab5[_0x467827(0x2ea)];const _0x4f4f24=await sendTelegramMsg(toTelegramMarkdown(_0x3cc45c),_0x467827(0x25c));if(_0x4f4f24)_0x36e292=_0x118ab5['number'];}}}updateAvailable=isNewerVersion(settings[_0x467827(0x168)],serverversion),updateSetting(_0x467827(0x18e),_0x36e292),emitMessages();}}function emitMessages(){const _0x5abadd=_0x3a1e10,_0x2d660e=settings[_0x5abadd(0x18c)];let _0x570839=[];newMessages[_0x5abadd(0x224)](_0x534b10=>{_0x534b10['number']>_0x2d660e&&_0x570839['push'](_0x534b10);}),_0x570839[_0x5abadd(0x1fb)]>0x0&&getAllClients()[_0x5abadd(0x224)](_0x366508=>{const _0x217bb0=_0x5abadd;getSocket(_0x366508['id'])[_0x217bb0(0x17f)]('message',_0x570839);});}function confirmMessage(_0x743ea8){const _0x3b940a=_0x3a1e10;updateSetting(_0x3b940a(0x18c),Number(_0x743ea8));}function isNewerVersion(_0x2e70ce,_0x53781b){const _0x5537e0=_0x3a1e10,_0x3c6756=_0x53781b[_0x5537e0(0x2f2)]('.'),_0x5ba37d=_0x2e70ce[_0x5537e0(0x2f2)]('.');for(var _0x215777=0x0;_0x215777<_0x5ba37d[_0x5537e0(0x1fb)];_0x215777++){const _0x5aaead=~~_0x5ba37d[_0x215777],_0x5c09b2=~~_0x3c6756[_0x215777];if(_0x5aaead>_0x5c09b2)return!![];if(_0x5aaead<_0x5c09b2)return![];}return![];}function toTelegramMarkdown(_0x5cabb6){const _0x4be52d=_0x3a1e10,_0x3ce598=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4018c1=/\*{2}(.+?)\*{2}/gim;return _0x5cabb6=_0x5cabb6[_0x4be52d(0x158)](_0x3ce598,_0x4be52d(0x303))[_0x4be52d(0x158)](_0x4018c1,_0x4be52d(0x284)),_0x5cabb6;}async function validateConfigFile(){const _0x16139c=_0x3a1e10,_0x10c0e5=dbConfig[_0x16139c(0x2c2)](_0x16139c(0x213))[_0x16139c(0x1dc)]('botID')['value']()||[];if(_0x10c0e5[_0x16139c(0x1fb)]==0x0){let _0x388e94=0x0,_0x640765=[];const _0x130a89=/^bot-([0-9]{3})-config.json$/,_0x2f0622=fs[_0x16139c(0x2a2)](configpath);_0x2f0622[_0x16139c(0x224)](_0x90de28=>{const _0x10d0d4=_0x16139c,_0x28f6c9=_0x130a89[_0x10d0d4(0x16e)](_0x90de28);if(_0x28f6c9){const _0x4e0a17=_0x28f6c9[0x1];let _0x127759=getBotAttributes(_0x4e0a17);_0x640765[_0x10d0d4(0x188)]({'botID':_0x4e0a17,'botname':_0x127759[_0x10d0d4(0x20b)],'status':_0x10d0d4(0x193),'live':_0x10d0d4(0x30e)}),_0x388e94++;}}),_0x388e94!=0x0&&(dbConfig['get'](_0x16139c(0x213))['assign'](_0x640765)[_0x16139c(0x2c6)](),config=_0x640765,restoredConfigFile=_0x388e94);}}async function restoreConfigNotify(_0x392322){const _0x3558f2=_0x3a1e10;let _0x788a0d;if(restoredConfigFile==0x1)_0x788a0d=_0x3558f2(0x27d);else _0x788a0d='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x392322)io['to']('botmanager')[_0x3558f2(0x17f)](_0x3558f2(0x2dd),_0x788a0d);else{logger[_0x3558f2(0x22f)]('-----------------------------------------------------------------------------------'),logger[_0x3558f2(0x22f)](_0x788a0d),logger[_0x3558f2(0x22f)](_0x3558f2(0x187)),logger[_0x3558f2(0x22f)]('');if(tgBot&&settings[_0x3558f2(0x2fc)]&&settings[_0x3558f2(0x2f7)]!='orders')tgBot[_0x3558f2(0x30c)](settings[_0x3558f2(0x2fc)],_0x3558f2(0x2bf)+_0x788a0d)[_0x3558f2(0x1b1)](_0x1e3c2c=>{telegramError(_0x1e3c2c);});}}function _0x762f(_0x3e6029,_0x84113a){const _0x494dc1=_0x479d();return _0x762f=function(_0x4c1372,_0x3a0525){_0x4c1372=_0x4c1372-0x14a;let _0x479db3=_0x494dc1[_0x4c1372];return _0x479db3;},_0x762f(_0x3e6029,_0x84113a);}function validateCredentials(_0x41e521,_0x1fa7ca){const _0x1af2e8=_0x3a1e10;if(_0x41e521['username']==settings[_0x1af2e8(0x15b)]&&bcrypt[_0x1af2e8(0x308)](_0x41e521[_0x1af2e8(0x248)],settings[_0x1af2e8(0x20d)])){if(settings[_0x1af2e8(0x191)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0xc504e9=generateLoginToken(_0x1fa7ca);return{'allow':!![],'reason':_0x1af2e8(0x1d3),'token':_0xc504e9};}}else return{'allow':![],'reason':_0x1af2e8(0x2ad),'token':null};}function refreshToken(_0x84cdb9){const _0x59f103=generateLoginToken(_0x84cdb9);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x59f103};}function validateAccess(_0x32d173,_0x17cd60,_0x1d708d){const _0x353e2b=_0x3a1e10,_0x47ec76=_0x1d708d?_0x1d708d:devices[_0x17cd60]['ip'];let _0x8c28fe;const _0x1123c2=_0x16db62=>{const _0x339548=_0x762f;if(settings[_0x339548(0x25b)]){if(settings[_0x339548(0x191)]){if(telegram2FaApproved(_0x17cd60)){const _0x39b494=generateLoginToken(_0x17cd60);return{'allow':!![],'reason':_0x339548(0x2e6),'token':_0x39b494};}else return{'allow':![],'reason':_0x339548(0x314),'token':null};}else return _0x8c28fe=validToken(_0x16db62,_0x17cd60),_0x8c28fe[_0x339548(0x1fd)](_0x339548(0x299))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x16db62}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x339548(0x23a),'token':null};};if(settings['whitelistEnabled']){let _0x11ccdf=[...settings[_0x353e2b(0x257)],_0x353e2b(0x2b7),_0x353e2b(0x28c),_0x353e2b(0x311)];if(_0x11ccdf['includes'](_0x47ec76))return _0x1123c2(_0x32d173);else{_0x8c28fe=validToken(_0x32d173,_0x17cd60);if(_0x8c28fe['hasOwnProperty']('success'))return _0x1123c2(_0x32d173);else{if(telegramIpApproved(_0x17cd60)){const _0x55520=generateToken(_0x17cd60);return _0x8c28fe=_0x1123c2(_0x32d173),_0x8c28fe['allow']?{'allow':!![],'reason':_0x353e2b(0x2a9),'token':_0x55520}:_0x8c28fe;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x353e2b(0x216),'token':null}:{'allow':![],'reason':_0x353e2b(0x2ca),'token':null};}}}else return _0x1123c2(_0x32d173);}function timelyDecrypt(_0x5c7c4d,_0x22dcc9=!![]){const _0x5005aa=_0x3a1e10;if(_0x5c7c4d)try{const _0x279557=crypt['decrypt'](secure[_0x5005aa(0x1e9)],_0x5c7c4d)[_0x5005aa(0x2ea)],_0x58f1f1=_0x279557[_0x5005aa(0x2f2)]('@')[0x0],_0x39f356=_0x279557[_0x5005aa(0x2f2)]('@')[0x1],_0x2a09e9=new Date()['getTime']();if(_0x22dcc9){if(_0x2a09e9-_0x39f356<maxSecretAge*0x3e8)return _0x58f1f1;else return![];}else return _0x58f1f1;}catch(_0x56b3a1){return![];}else return![];}const validToken=(_0xee436a,_0x41497b)=>{const _0x4b0516=_0x3a1e10,_0x4e60f9=devices[_0x41497b]['ip'];if(!_0xee436a)return{'error':'No\x20authentication\x20token'};for(let _0x466c94 of blacklist){if(_0x466c94['token']==_0xee436a)return{'error':_0x4b0516(0x169)};}let _0x1d3a33;try{_0x1d3a33=jwt['verify'](_0xee436a,secure[_0x4b0516(0x152)]+_0x41497b);}catch{return{'error':_0x4b0516(0x26f)};}if(!_0x1d3a33[_0x4b0516(0x1fd)](_0x4b0516(0x235))&&!_0x1d3a33[_0x4b0516(0x1fd)]('username')||!_0x1d3a33[_0x4b0516(0x1fd)](_0x4b0516(0x1cb)))return{'error':_0x4b0516(0x2ee)};if(!_0x1d3a33[_0x4b0516(0x1fd)]('username')&&_0x1d3a33[_0x4b0516(0x1fd)]('clientip')){const {clientip:_0x359a1c}=_0x1d3a33;return _0x4e60f9==_0x359a1c?{'success':_0x4b0516(0x209)}:{'error':_0x4b0516(0x1c5)};}else{if(_0x1d3a33['hasOwnProperty'](_0x4b0516(0x31f))&&_0x1d3a33[_0x4b0516(0x1fd)](_0x4b0516(0x235))){const {username:_0x5b6e11,clientip:_0x2dc36a}=_0x1d3a33;return settings[_0x4b0516(0x15b)]==_0x5b6e11&&_0x4e60f9==_0x2dc36a?{'success':_0x4b0516(0x209)}:{'error':_0x4b0516(0x24f)};}}},generateLoginToken=_0x5ed876=>{const _0x20528d=_0x3a1e10;if(_0x5ed876){const _0x217103=devices[_0x5ed876]['ip'];return jwt[_0x20528d(0x1f0)]({'username':settings[_0x20528d(0x15b)],'clientip':_0x217103},secure[_0x20528d(0x152)]+_0x5ed876,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1a19f2=>{const _0x20679b=_0x3a1e10;if(_0x1a19f2){const _0x2a548d=devices[_0x1a19f2]['ip'];return jwt[_0x20679b(0x1f0)]({'clientip':_0x2a548d},secure['secret']+_0x1a19f2,{'expiresIn':devices[_0x1a19f2][_0x20679b(0x2a0)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0xeee465=>{const _0x502859=_0x3a1e10;let _0x562509=![];return devices[_0xeee465][_0x502859(0x2a0)]&&devices[_0xeee465]['telegramIpApproval'][_0x502859(0x254)]!=_0x502859(0x16f)&&(_0x562509=devices[_0xeee465]['telegramIpApproval'][_0x502859(0x235)]==devices[_0xeee465]['ip']&&new Date()[_0x502859(0x1bd)]()-devices[_0xeee465][_0x502859(0x2a0)][_0x502859(0x1c0)]<devices[_0xeee465][_0x502859(0x2a0)][_0x502859(0x254)]*0x3c*0x3e8),_0x562509;},telegram2FaApproved=_0x554caa=>{const _0x58cb8c=_0x3a1e10;let _0x2f2e5e=![];return devices[_0x554caa][_0x58cb8c(0x1ef)]&&devices[_0x554caa]['telegram2FaApproval']['expiry']!=_0x58cb8c(0x16f)&&(_0x2f2e5e=devices[_0x554caa][_0x58cb8c(0x1ef)][_0x58cb8c(0x235)]==devices[_0x554caa]['ip']&&new Date()[_0x58cb8c(0x1bd)]()-devices[_0x554caa][_0x58cb8c(0x1ef)][_0x58cb8c(0x1c0)]<devices[_0x554caa][_0x58cb8c(0x1ef)]['expiry']*0x3c*0x3e8),_0x2f2e5e;},normalizeIP=_0x205435=>{const _0x462614=_0x3a1e10;let _0x3c031a=null,_0x89c701=null;if(ipaddr[_0x462614(0x1bc)](_0x205435)){const _0x48c7d4=ipaddr[_0x462614(0x31b)](_0x205435);_0x48c7d4['kind']()===_0x462614(0x18d)?(_0x48c7d4['isIPv4MappedAddress']()&&(_0x3c031a=_0x48c7d4[_0x462614(0x227)]()[_0x462614(0x300)]()),_0x89c701=_0x48c7d4[_0x462614(0x300)]()):(_0x3c031a=_0x48c7d4[_0x462614(0x300)](),_0x89c701=_0x48c7d4[_0x462614(0x190)]()[_0x462614(0x300)]());}return{'show':_0x3c031a?_0x3c031a:_0x89c701,'store':_0x89c701};};function formatDate(_0x1af528){const _0x201578=_0x3a1e10;return _0x1af528['getFullYear']()+'/'+(_0x1af528[_0x201578(0x287)]()+0x1)[_0x201578(0x300)]()['padStart'](0x2,'0')+'/'+_0x1af528['getDate']()[_0x201578(0x300)]()['padStart'](0x2,'0')+'\x20'+_0x1af528['getHours']()[_0x201578(0x300)]()[_0x201578(0x327)](0x2,'0')+':'+_0x1af528[_0x201578(0x250)]()['toString']()[_0x201578(0x327)](0x2,'0')+':'+_0x1af528[_0x201578(0x2ef)]()['toString']()[_0x201578(0x327)](0x2,'0');}function sleep(_0x556e8b){return new Promise(_0x3a61d0=>setTimeout(_0x3a61d0,_0x556e8b));}