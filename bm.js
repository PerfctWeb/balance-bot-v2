const _0xe82b12=_0x51a4;(function(_0x345a56,_0x243316){const _0x23e5e7=_0x51a4,_0x5c2160=_0x345a56();while(!![]){try{const _0x231b53=parseInt(_0x23e5e7(0x1c4))/0x1+parseInt(_0x23e5e7(0x1bf))/0x2*(parseInt(_0x23e5e7(0x168))/0x3)+parseInt(_0x23e5e7(0x1bb))/0x4+-parseInt(_0x23e5e7(0x1d5))/0x5*(-parseInt(_0x23e5e7(0x126))/0x6)+-parseInt(_0x23e5e7(0x131))/0x7+parseInt(_0x23e5e7(0x1ea))/0x8*(-parseInt(_0x23e5e7(0x1b2))/0x9)+parseInt(_0x23e5e7(0x1f9))/0xa*(-parseInt(_0x23e5e7(0x1fb))/0xb);if(_0x231b53===_0x243316)break;else _0x5c2160['push'](_0x5c2160['shift']());}catch(_0x2853c4){_0x5c2160['push'](_0x5c2160['shift']());}}}(_0x1250,0x4679c));const _0x36dd16=function(){let _0xc07775=!![];return function(_0x13f573,_0x8a87f0){const _0x32b85f=_0xc07775?function(){if(_0x8a87f0){const _0x45ddfa=_0x8a87f0['apply'](_0x13f573,arguments);return _0x8a87f0=null,_0x45ddfa;}}:function(){};return _0xc07775=![],_0x32b85f;};}(),_0x184ba3=_0x36dd16(this,function(){const _0x1068a6=_0x51a4;return _0x184ba3[_0x1068a6(0x21f)]()['search'](_0x1068a6(0x159))[_0x1068a6(0x21f)]()[_0x1068a6(0x204)](_0x184ba3)[_0x1068a6(0x1c0)](_0x1068a6(0x159));});_0x184ba3();'use strict';process[_0xe82b12(0x1af)]['NTBA_FIX_319']=0x1;const childProcess=require(_0xe82b12(0x199)),FileSync=require(_0xe82b12(0x1aa)),fs=require('fs'),fns=require(_0xe82b12(0x166)),low=require(_0xe82b12(0x202)),path=require(_0xe82b12(0x1e2)),crypto=require(_0xe82b12(0x122)),Crypt=require('hybrid-crypto-js')[_0xe82b12(0x1ce)],RSA=require(_0xe82b12(0x11d))[_0xe82b12(0x143)],bcrypt=require(_0xe82b12(0x16f)),jwt=require(_0xe82b12(0x1c8)),analyticsLib=require(_0xe82b12(0x234))[_0xe82b12(0x16b)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0xe82b12(0x22a)][_0xe82b12(0x1b5)](0x2))[_0xe82b12(0x22a)],PORT=argv[_0xe82b12(0x196)]||_0xe82b12(0x11e),pattern=/^[0-9]{2,4}$/;if(!pattern[_0xe82b12(0x22f)](PORT))return console[_0xe82b12(0x139)](_0xe82b12(0x15c)+PORT+_0xe82b12(0x208)),process[_0xe82b12(0x220)](0x1);const HOST=argv[_0xe82b12(0x24e)]||null,userID=argv[_0xe82b12(0x21d)]||'';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0xe82b12(0x23b),securefile=_0xe82b12(0x193);!fs[_0xe82b12(0x244)](bbpath+botfile)&&(bbpath='');function _0x1250(){const _0x71a4be=['2FA\x20login\x20token\x20generated','enabled','enabled\x20Bot\x20','404\x20Not\x20Found','2FA\x20login\x20required',':\x20Bot\x20Mgr\x20>\x20','createServer','Notifications\x20types:\x20','host','telegramToken','botmanager','temporary\x20access\x20not\x20allowed','toIPv4MappedAddress','/:bot/configuration','\x20/\x20','secret','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','new','reload','bots','isValid','callback_query','add-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','All\x20bots\x20running\x20right\x20now','access\x20timeout','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','pidRefreshToken','hybrid-crypto-js','3000','All\x20bots','match','onText','crypto','loginRequired','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Unauthorized\x20attempt\x20to\x20delete\x20bot','174gNWWXl','RSA-OAEP','notification','127.0.0.1','2FA\x20login\x20rejected','clientip','isDirectory','accept','-----------------------------------------------------------------------------------','2FA','emitHistory','1176791xRRjsn','UA-192771731-1','config/','access','status','getMinutes','getHours','started','log','telegramEvents','update-bot','includes','-results.json','/help\x20-\x20show\x20available\x20commands\x0a','Unauthorized\x20attempt\x20to\x20get\x20logs','telegram2FaApproval','build','telegramUsername','RSA','/:bot/portfolio','token','whitelistEnabled','https://hodlerhacks.com','mkdirSync','filter','handshake','connection','message','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','getSeconds','type','allow','restart','Unauthorized\x20attempt\x20to\x20log\x20out','login\x20not\x20required','starting\x20bot\x20|\x20Bot\x20','running','place-order','\x20>\x20','assign','(((.+)+)+)+$','temporary\x20access\x20timeout','Notifications\x20disabled','Error:\x20Invalid\x20argument\x20','version.json','value','HTML','answerCallbackQuery','live','new-disabled','all','auth','show','date-fns','emit','5622qSLcxr','listen','chat','default','cancel-loading','Password\x20reset\x20rejected','Unauthorized\x20attempt\x20to\x20store\x20configuration','bcryptjs','name','botID','Invalid\x20IP\x20address','node-telegram-bot-api','/:bot/history','yes','static','/off\x20-\x20stop\x20bot(s)\x0a','map','telegramIpApproval','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','reject','Login\x20accepted','keys','settings.','initclient','add','logged\x20out','success','build2','Unauthorized\x20attempt\x20to\x20add\x20bot','SIGTERM','cloneDeep','hex','hasOwnProperty','SIGINT','privateKey','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Ok,\x20will\x20send\x20alert\x20notifications\x20only','referer','update-bb','set','alerts','login\x20required','secure','bb-secure.json','/:bot/support','reset-password','port','hashSync','stopPolling','child_process','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20get\x20portfolio','getTime','User\x20has\x20been\x20validated','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','botname','get-portfolio','from','invalid\x20credentials','No\x20bots\x20running\x20right\x20now','/restart\x20-\x20restart\x20bot(s)\x0a','once','login\x20token\x20valid','getUTCHours','whitelist','login','lowdb/adapters/FileSync','timestamp','sendMessage','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','login\x20token\x20generated','env','</b>\x20?','password','643446bKZexi','Temporary\x20access\x20rejected','kind','slice','exp','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','padStart','Notifications\x20enabled','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','1183680nTZYrR','telegramChatId','settings','randomFillSync','410DzamOm','search','stop','socket.io','::ffff:127.0.0.1','259078FToWAI','getPortfolio','timeshift','temporary\x20access\x20rejected','jsonwebtoken','fork','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','then','compareSync','/status\x20-\x20show\x20bot(s)\x20status\x0a','Crypt','encryptedUuid','args','store-configuration','************','removeAllListeners','send','98390NneHSP','bbUsername','uuid','/:bot/performance','toIPv4Address','Orders','sockets','bot-','find','store-headless','connected','getFullYear','username','path','/:bot','Login\x20rejected','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','get-logs','15\x20min','express','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','16mxRDYS','use','removeListener','reason','telegramEnabled','cancelLoading','forEach','\x20minutes','event','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','join','randomBytes','copyFileSync','unlinkSync','remoteAddress','9100610zbRXvx','logout','11QEEqtZ','disabled','temporaryAccessAllowed','entries','expiry','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','headers','lowdb','data','constructor','pidExpireLogin','Alerts','f2aRequired',',\x20must\x20be\x20a\x204\x20digit\x20number','error','Unauthorized\x20attempt\x20to\x20update\x20bot','getStartingBalances','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','clients','publicKey','verify','ipc','Bot\x20','index.html','ipv6','\x20|\x20','Notifications\x20enabled\x0a','blacklist','delete-bot','-events.json','stopped','kill','generateKeyPairAsync','sha256','user','defaults','toString','exit','Balance\x20Bot\x20Server','bot','store','showname','storeConfiguration','split','sendFile','Invalid\x20Telegram\x20token','write','argv','Balance\x20Bot','orders','sortBy','get','test','5\x20min','-config.json','You\x20can\x20use\x20the\x20following\x20commands:\x0a','push','analytics','Invalid\x20authentication\x20token\x20(2)','apiKey','catch','2FA\x20required','disabled\x20Bot\x20','inherit','bb-settings.json','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','disconnect','decrypt','bbPassword','-performance.json','version','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','length','existsSync','restarting\x20Bot\x20'];_0x1250=function(){return _0x71a4be;};return _0x1250();}const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xe82b12(0x20d)),configpath=userID?bbpath+_0xe82b12(0x133)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0xe82b12(0x148)](configpath);!fs[_0xe82b12(0x244)](configbackuppath)&&fs[_0xe82b12(0x148)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xe82b12(0x21e)]({'bots':[]})[_0xe82b12(0x229)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xe82b12(0x21e)]({'settings':{'timeshift':0x0}})[_0xe82b12(0x229)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xe82b12(0x21e)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0xe82b12(0x21c),'rsaStandard':_0xe82b12(0x127)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xe82b12(0x15d))[_0xe82b12(0x241)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0xe82b12(0x1e8)),app=express(),http=require('http')[_0xe82b12(0x24c)](app);app[_0xe82b12(0x1eb)](express['static'](path['join'](__dirname,bbpath2,'build2'))),app['use'](express[_0xe82b12(0x176)](path[_0xe82b12(0x1f4)](__dirname,bbpath2,'build'))),app[_0xe82b12(0x22e)]('/',function(_0x786ec5,_0x58fd59){const _0x3dd400=_0xe82b12;_0x58fd59[_0x3dd400(0x227)](path[_0x3dd400(0x1f4)](__dirname,bbpath2,_0x3dd400(0x183),_0x3dd400(0x212)));}),app['get'](_0xe82b12(0x1e3),function(_0xa61552,_0x49476b){const _0x4043ea=_0xe82b12;_0x49476b['sendFile'](path[_0x4043ea(0x1f4)](__dirname,bbpath2,_0x4043ea(0x141),_0x4043ea(0x212)));}),app[_0xe82b12(0x22e)](_0xe82b12(0x144),(_0x136fa2,_0xb2d24b)=>{const _0x458ae2=_0xe82b12;_0xb2d24b['sendFile'](path['join'](__dirname,bbpath2,_0x458ae2(0x141),_0x458ae2(0x212)));}),app[_0xe82b12(0x22e)](_0xe82b12(0x1d8),(_0x3a454c,_0x29badb)=>{const _0x2cc9af=_0xe82b12;_0x29badb['sendFile'](path['join'](__dirname,bbpath2,_0x2cc9af(0x141),_0x2cc9af(0x212)));}),app[_0xe82b12(0x22e)]('/:bot/coins',(_0x21f614,_0x593388)=>{const _0x165ff3=_0xe82b12;_0x593388[_0x165ff3(0x227)](path['join'](__dirname,bbpath2,'build',_0x165ff3(0x212)));}),app[_0xe82b12(0x22e)](_0xe82b12(0x174),(_0x367fb2,_0x573e87)=>{const _0x542604=_0xe82b12;_0x573e87[_0x542604(0x227)](path[_0x542604(0x1f4)](__dirname,bbpath2,'build','index.html'));}),app[_0xe82b12(0x22e)](_0xe82b12(0x10e),(_0x516ed4,_0x4ddb48)=>{const _0x1bfd19=_0xe82b12;_0x4ddb48[_0x1bfd19(0x227)](path[_0x1bfd19(0x1f4)](__dirname,bbpath2,_0x1bfd19(0x141),_0x1bfd19(0x212)));}),app[_0xe82b12(0x22e)](_0xe82b12(0x194),(_0x10dd4f,_0x4b927a)=>{const _0x243f29=_0xe82b12;_0x4b927a['sendFile'](path[_0x243f29(0x1f4)](__dirname,bbpath2,_0x243f29(0x141),_0x243f29(0x212)));});if(HOST)http[_0xe82b12(0x169)](PORT,HOST);else http[_0xe82b12(0x169)](PORT);const io=require(_0xe82b12(0x1c2))(http,{}),analytics=analyticsLib({'app':_0xe82b12(0x22b),'plugins':[googleAnalytics({'trackingId':_0xe82b12(0x132)})]}),TelegramBot=require(_0xe82b12(0x173));let tgBot;if(settings[_0xe82b12(0x24f)]&&settings[_0xe82b12(0x24f)]!=''&&settings[_0xe82b12(0x142)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2fdbf7=_0xe82b12;console[_0x2fdbf7(0x139)](''),console['log'](_0x2fdbf7(0x12e)),logging(_0x2fdbf7(0x1e5)+PORT),console['log']('-----------------------------------------------------------------------------------');if(config[_0x2fdbf7(0x243)]!=0x0)config[_0x2fdbf7(0x1f0)](_0x46511d=>{const _0x526b53=_0x2fdbf7;if(_0x46511d['status']==_0x526b53(0x247)||_0x46511d[_0x526b53(0x135)]==_0x526b53(0x112))logging(_0x526b53(0x154)+_0x46511d[_0x526b53(0x171)]+'\x20|\x20'+_0x46511d['botname']),startBot([_0x46511d[_0x526b53(0x171)],userID],{'cwd':bbpath},function(_0x1ffacf){if(_0x1ffacf)logging(_0x1ffacf);});else(_0x46511d[_0x526b53(0x135)]==_0x526b53(0x1fc)||_0x46511d[_0x526b53(0x135)]=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x46511d['botID']+_0x526b53(0x214)+_0x46511d['botname']);});else!newBot&&console[_0x2fdbf7(0x139)](_0x2fdbf7(0x111));if(newBot)addBot();console[_0x2fdbf7(0x139)](_0x2fdbf7(0x12e)),console[_0x2fdbf7(0x139)]('');}function startSocket(){const _0xaee24a=_0xe82b12;io['on'](_0xaee24a(0x14b),_0x10daaf=>{const _0x23e424=_0xaee24a;let _0x58776b,_0x43486a,_0x5c0ef2,_0xe59707,_0x6b80bb;const _0x3f1810=_0x10daaf[_0x23e424(0x14a)][_0x23e424(0x201)][_0x23e424(0x18d)];_0x43486a=_0x3f1810[_0x23e424(0x120)](/bot[0-9]{3}/);if(_0x43486a)_0x5c0ef2=_0x43486a[0x0][_0x23e424(0x120)](/[0-9]{3}/);if(_0x5c0ef2)_0x58776b=_0x5c0ef2[0x0];else _0x58776b=_0x23e424(0x10b);const _0x35976b=_0x10daaf[_0x23e424(0x14a)][_0x23e424(0x164)][_0x23e424(0x1cf)];if(!_0x35976b)_0x10daaf[_0x23e424(0x167)](_0x23e424(0x135),{'publicKey':secure[_0x23e424(0x20e)]});else{_0xe59707=timelyDecrypt(_0x35976b,![]);if(!_0xe59707)_0x10daaf['emit'](_0x23e424(0x135),{'publicKey':secure[_0x23e424(0x20e)]});else{_0x6b80bb=normalizeIP(_0x10daaf['conn'][_0x23e424(0x1f8)])[_0x23e424(0x223)];if(!devices[_0xe59707])devices[_0xe59707]={'uuid':_0xe59707,'access':{'token':null}};devices[_0xe59707]['ip']=_0x6b80bb;const _0x533954=addClient(_0x10daaf['id'],_0xe59707,_0x58776b);setAccess(_0x533954),_0x10daaf['on']('login',_0xa4555d=>{const _0x55b034=_0x23e424,_0x186f2c=timelyDecrypt(_0xa4555d[_0x55b034(0x1b1)]);if(_0x186f2c){_0xa4555d={'username':_0xa4555d[_0x55b034(0x1e1)],'password':_0x186f2c},devices[_0xe59707][_0x55b034(0x134)]=validateCredentials(_0xa4555d,_0xe59707);if(devices[_0xe59707][_0x55b034(0x134)][_0x55b034(0x150)]==![]&&devices[_0xe59707]['access']['reason']==_0x55b034(0x24a))_0x10daaf[_0x55b034(0x167)](_0x55b034(0x135),{'access':devices[_0xe59707][_0x55b034(0x134)]}),loginAccess2FA(_0xe59707,_0x6b80bb);else{if(devices[_0xe59707]['access'][_0x55b034(0x150)]==![]&&devices[_0xe59707]['access'][_0x55b034(0x1ed)]==_0x55b034(0x1a2))_0x10daaf[_0x55b034(0x167)](_0x55b034(0x135),{'access':devices[_0xe59707][_0x55b034(0x134)]});else devices[_0xe59707][_0x55b034(0x134)]['allow']&&devices[_0xe59707][_0x55b034(0x134)]['reason']==_0x55b034(0x1ae)&&(getClientsWithUuid(_0xe59707)['forEach'](_0x4fc0a7=>{setAccess(_0x4fc0a7);}),setTokenRefresh(_0xe59707),setSessionTimeout(_0x55b034(0x1a9),_0xe59707));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x10daaf['on'](_0x23e424(0x195),()=>{resetPassword();}),_0x10daaf['on'](_0x23e424(0x23d),_0x3cde7d=>{removeClient(_0x10daaf['id']);});}}});}function initClient(_0x5c14d9){const _0x545485=_0xe82b12;if(_0x5c14d9!=_0x545485(0x10b)&&config[_0x545485(0x236)]!=''){if(pid[_0x5c14d9])pid[_0x5c14d9][_0x545485(0x1d4)]({'function':_0x545485(0x17f),'args':null});}}function getSocket(_0x363abe){const _0x16ca9c=_0xe82b12;return io[_0x16ca9c(0x1db)][_0x16ca9c(0x1db)][_0x16ca9c(0x22e)](_0x363abe);}function setAccess(_0x279dab){const _0x44cd1c=_0xe82b12,_0x41ed78=getSocket(_0x279dab['id']),_0x158437=_0x279dab[_0x44cd1c(0x1d7)],_0x57ea76=_0x279dab[_0x44cd1c(0x222)];devices[_0x158437]['access']=validateAccess(devices[_0x158437][_0x44cd1c(0x134)][_0x44cd1c(0x145)],_0x158437),_0x41ed78['join'](_0x158437);if(devices[_0x158437][_0x44cd1c(0x134)][_0x44cd1c(0x150)]){_0x41ed78[_0x44cd1c(0x1f4)](_0x57ea76);if(_0x57ea76==_0x44cd1c(0x10b))initializeSocketBotManager(_0x41ed78);else initializeSocketBot(_0x41ed78);initClient(_0x57ea76);}devices[_0x158437][_0x44cd1c(0x134)]['token']&&devices[_0x158437][_0x44cd1c(0x134)][_0x44cd1c(0x1ed)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x44cd1c(0x12f),_0x158437),devices[_0x158437][_0x44cd1c(0x134)][_0x44cd1c(0x145)]&&devices[_0x158437]['access']['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x44cd1c(0x1a9),_0x158437),_0x41ed78[_0x44cd1c(0x167)]('status',{'status':_0x279dab['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x158437][_0x44cd1c(0x134)],'externalip':devices[_0x158437]['ip'],'publicKey':secure[_0x44cd1c(0x20e)]}),devices[_0x158437]['access'][_0x44cd1c(0x150)]==![]&&devices[_0x158437]['access'][_0x44cd1c(0x1ed)]==_0x44cd1c(0x238)&&temporaryAccess2FA(_0x158437,devices[_0x158437]['ip']);}function setSessionTimeout(_0x2f28d9,_0x2e2e00){const _0x164542=_0xe82b12;let _0x80533;if(_0x2f28d9==_0x164542(0x1a9))_0x80533=loginExpiry*0x3c*0x3e8;else _0x80533=devices[_0x2e2e00][_0x164542(0x179)][_0x164542(0x1ff)]*0x3c*0x3e8-(new Date()[_0x164542(0x19c)]()-devices[_0x2e2e00][_0x164542(0x179)]['timestamp']);if(devices[_0x2e2e00][_0x164542(0x205)])clearTimeout(devices[_0x2e2e00][_0x164542(0x205)]);devices[_0x2e2e00]['pidExpireLogin']=setTimeout(()=>{const _0x182dff=_0x164542;if(devices[_0x2e2e00]['pidRefreshToken'])clearTimeout(devices[_0x2e2e00][_0x182dff(0x11c)]);removeSocketListeners(_0x2e2e00),addBlacklist(_0x2e2e00),devices[_0x2e2e00][_0x182dff(0x179)]=null,devices[_0x2e2e00][_0x182dff(0x140)]=null,devices[_0x2e2e00]['access']['token']=null,devices[_0x2e2e00]['access']=validateAccess(devices[_0x2e2e00]['access'][_0x182dff(0x145)],_0x2e2e00),!(devices[_0x2e2e00][_0x182dff(0x134)][_0x182dff(0x150)]&&devices[_0x2e2e00]['access'][_0x182dff(0x1ed)]==_0x182dff(0x153))&&(_0x2f28d9=='login'?io['to'](_0x2e2e00)[_0x182dff(0x167)]('status',{'access':{'allow':![],'reason':_0x182dff(0x11a),'token':null}}):io['to'](_0x2e2e00)['emit'](_0x182dff(0x135),{'access':{'allow':![],'reason':_0x182dff(0x15a),'token':null}})),devices[_0x2e2e00][_0x182dff(0x134)][_0x182dff(0x145)]=null;},_0x80533);}function setTokenRefresh(_0x16bc5a){const _0xa6fb8b=_0xe82b12;if(devices[_0x16bc5a][_0xa6fb8b(0x11c)])clearTimeout(devices[_0x16bc5a][_0xa6fb8b(0x11c)]);devices[_0x16bc5a][_0xa6fb8b(0x11c)]=setTimeout(()=>{const _0x3bbbc7=_0xa6fb8b;getClientsWithUuid(_0x16bc5a)[_0x3bbbc7(0x243)]!=0x0?(devices[_0x16bc5a][_0x3bbbc7(0x134)]=refreshToken(_0x16bc5a),io['to'](_0x16bc5a)[_0x3bbbc7(0x167)](_0x3bbbc7(0x135),{'status':_0x3bbbc7(0x1df),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x16bc5a][_0x3bbbc7(0x134)],'externalip':devices[_0x16bc5a]['ip'],'publicKey':secure[_0x3bbbc7(0x20e)]}),setTokenRefresh(_0x16bc5a)):clearTimeout(devices[_0x16bc5a]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1e7a3e){const _0x25b715=_0xe82b12,_0xaed68a=getClient(_0x1e7a3e['id'])[_0x25b715(0x1d7)];_0x1e7a3e[_0x25b715(0x167)](_0x25b715(0x114),config),_0x1e7a3e[_0x25b715(0x167)]('settings',cleanSettings()),_0x1e7a3e['on'](_0x25b715(0x117),_0x4336a7=>{const _0x565580=_0x25b715;if(validateAccess(_0x4336a7,_0xaed68a)[_0x565580(0x150)])addBot();else logging(_0x565580(0x184));}),_0x1e7a3e['on'](_0x25b715(0x13b),(_0x2f0188,_0x5ac66a)=>{const _0x1350b2=_0x25b715;if(validateAccess(_0x5ac66a,_0xaed68a)[_0x1350b2(0x150)])toggleBot(_0x2f0188[_0x1350b2(0x171)],_0x2f0188['status'],_0x2f0188['live']);else logging(_0x1350b2(0x20a));}),_0x1e7a3e['on'](_0x25b715(0x217),(_0x162e8b,_0x4312f4)=>{const _0x3d1d01=_0x25b715;if(validateAccess(_0x4312f4,_0xaed68a)[_0x3d1d01(0x150)])deleteBot(_0x162e8b);else logging(_0x3d1d01(0x125));}),_0x1e7a3e['on']('store-settings',(_0x1d0052,_0x447974)=>{const _0x1c2841=_0x25b715;if(validateAccess(_0x447974,_0xaed68a)[_0x1c2841(0x150)])storeSettings(_0x1d0052,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1e7a3e['on'](_0x25b715(0x18e),(_0x24ac1f,_0x3395f3)=>{const _0x2609bd=_0x25b715;if(validateAccess(_0x3395f3,_0xaed68a)['allow'])updateBB();else logging(_0x2609bd(0x19a));}),_0x1e7a3e['on'](_0x25b715(0x1fa),_0x1752a0=>{const _0x24400e=_0x25b715;if(validateAccess(_0x1752a0,_0xaed68a)[_0x24400e(0x150)]){if(devices[_0xaed68a][_0x24400e(0x11c)])clearTimeout(devices[_0xaed68a]['pidRefreshToken']);if(devices[_0xaed68a][_0x24400e(0x205)])clearTimeout(devices[_0xaed68a][_0x24400e(0x205)]);removeSocketListeners(getClient(_0x1e7a3e['id'])['uuid']),addBlacklist(_0xaed68a),devices[_0xaed68a]['telegramIpApproval']=null,devices[_0xaed68a]['telegram2FaApproval']=null,devices[_0xaed68a]['access'][_0x24400e(0x145)]=null,io['to'](getClient(_0x1e7a3e['id'])['uuid'])[_0x24400e(0x167)](_0x24400e(0x135),{'access':{'allow':![],'reason':_0x24400e(0x181),'token':null}});}else logging(_0x24400e(0x152));});}function initializeSocketBot(_0x36af69){const _0x320a9f=_0xe82b12,_0x3471fe=getClient(_0x36af69['id'])['bot'],_0x589b97=getClient(_0x36af69['id'])[_0x320a9f(0x1d7)];_0x36af69['on'](_0x320a9f(0x1e6),(_0x168953,_0x71091)=>{const _0x26de1d=_0x320a9f;if(validateAccess(_0x71091,_0x589b97)[_0x26de1d(0x150)]){if(pid[_0x3471fe])pid[_0x3471fe][_0x26de1d(0x1d4)]({'function':_0x26de1d(0x130),'args':_0x168953});}else logging(_0x26de1d(0x13f));}),_0x36af69['on'](_0x320a9f(0x1a0),(_0x118bc8,_0x1036d9)=>{const _0x4c22bd=_0x320a9f;if(validateAccess(_0x1036d9,_0x589b97)[_0x4c22bd(0x150)]){if(pid[_0x3471fe])pid[_0x3471fe][_0x4c22bd(0x1d4)]({'function':_0x4c22bd(0x1c5),'args':_0x118bc8});}else logging(_0x4c22bd(0x19b));}),_0x36af69['on'](_0x320a9f(0x1d1),(_0x1975a1,_0x3d0d5b)=>{const _0xa26d72=_0x320a9f;if(validateAccess(_0x3d0d5b,_0x589b97)['allow']){if(pid[_0x3471fe])pid[_0x3471fe][_0xa26d72(0x1d4)]({'function':_0xa26d72(0x225),'args':_0x1975a1});}else logging(_0xa26d72(0x16e));}),_0x36af69['on'](_0x320a9f(0x1de),(_0x3d38f1,_0x3c7653)=>{const _0x585186=_0x320a9f;if(validateAccess(_0x3c7653,_0x589b97)['allow']){if(pid[_0x3471fe])pid[_0x3471fe]['send']({'function':'storeHeadless','args':_0x3d38f1});}else logging(_0x585186(0x1ca));}),_0x36af69['on']('get-starting-balances',_0x1d5b8e=>{const _0x49d11a=_0x320a9f;if(validateAccess(_0x1d5b8e,_0x589b97)[_0x49d11a(0x150)]){if(pid[_0x3471fe])pid[_0x3471fe]['send']({'function':_0x49d11a(0x20b),'args':null});}else logging(_0x49d11a(0x1e9));}),_0x36af69['on'](_0x320a9f(0x156),(_0x51a240,_0x3644d2)=>{const _0x42d1e5=_0x320a9f;if(validateAccess(_0x3644d2,_0x589b97)[_0x42d1e5(0x150)]){if(pid[_0x3471fe])pid[_0x3471fe]['send']({'function':'placeOrder','args':_0x51a240});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x36af69['on'](_0x320a9f(0x16c),_0x2726a4=>{const _0xd6dd23=_0x320a9f;if(validateAccess(_0x2726a4,_0x589b97)['allow']){if(pid[_0x3471fe])pid[_0x3471fe][_0xd6dd23(0x1d4)]({'function':_0xd6dd23(0x1ef),'args':null});}else logging(_0xd6dd23(0x200));}),_0x36af69['on'](_0x320a9f(0x1fa),_0x1f4c0b=>{const _0x3dd0e4=_0x320a9f;if(validateAccess(_0x1f4c0b,_0x589b97)['allow']){if(devices[_0x589b97][_0x3dd0e4(0x11c)])clearTimeout(devices[_0x589b97][_0x3dd0e4(0x11c)]);if(devices[_0x589b97]['pidExpireLogin'])clearTimeout(devices[_0x589b97][_0x3dd0e4(0x205)]);removeSocketListeners(getClient(_0x36af69['id'])[_0x3dd0e4(0x1d7)]),addBlacklist(_0x589b97),devices[_0x589b97][_0x3dd0e4(0x179)]=null,devices[_0x589b97]['telegram2FaApproval']=null,devices[_0x589b97][_0x3dd0e4(0x134)][_0x3dd0e4(0x145)]=null,io['to'](getClient(_0x36af69['id'])['uuid'])[_0x3dd0e4(0x167)](_0x3dd0e4(0x135),{'access':{'allow':![],'reason':_0x3dd0e4(0x181),'token':null}});}else logging(_0x3dd0e4(0x152));});}function removeSocketListeners(_0x51dcb7){const _0x53ca05=_0xe82b12;getClientsWithUuid(_0x51dcb7)[_0x53ca05(0x1f0)](_0x42b542=>{const _0x18340e=_0x53ca05;getSocket(_0x42b542['id'])[_0x18340e(0x1d3)]();});}function _0x51a4(_0x112f00,_0x5d82b7){const _0x1db49d=_0x1250();return _0x51a4=function(_0x184ba3,_0x36dd16){_0x184ba3=_0x184ba3-0x10b;let _0x1250e=_0x1db49d[_0x184ba3];return _0x1250e;},_0x51a4(_0x112f00,_0x5d82b7);}function cleanSettings(){const _0x314816=_0xe82b12;let _0x4d57e4=settings;return settings['telegramToken']&&settings[_0x314816(0x24f)]!=''&&(_0x4d57e4={..._0x4d57e4,'telegramToken':_0x314816(0x1d2)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x4d57e4={..._0x4d57e4,'bbPassword':_0x314816(0x1d2)}),_0x4d57e4;}function updateBB(){const _0x2ac07a=_0xe82b12;installingUpdate=!![],config[_0x2ac07a(0x1f0)](_0x2afb73=>{const _0x528704=_0x2ac07a;restartBot(_0x2afb73[_0x528704(0x171)]);}),process[_0x2ac07a(0x1d4)]({'update':!![]},_0x3282f8=>{});}function startBot(_0x1852dc,_0x519aa9,_0x2876da){const _0x10360a=_0xe82b12;let _0x4500e7=![];const _0x18d55b=_0x1852dc[0x0];_0x519aa9={..._0x519aa9,'stdio':[_0x10360a(0x23a),_0x10360a(0x23a),_0x10360a(0x23a),_0x10360a(0x210)]},pid[_0x18d55b]=childProcess[_0x10360a(0x1c9)](botfile,_0x1852dc,_0x519aa9),pid[_0x18d55b]['on'](_0x10360a(0x14c),_0x99b8a9=>{const _0x5b9019=_0x10360a;switch(Object[_0x5b9019(0x17d)](_0x99b8a9)[0x0]){case _0x5b9019(0x19f):updateBotName(_0x18d55b,_0x99b8a9[_0x5b9019(0x19f)]);break;case _0x5b9019(0x135):updateStatus(_0x18d55b,_0x99b8a9[_0x5b9019(0x135)]);break;case _0x5b9019(0x161):updateLive(_0x18d55b,_0x99b8a9[_0x5b9019(0x161)]);break;case'started':updateLive(_0x18d55b,_0x99b8a9[_0x5b9019(0x138)]),io['to'](_0x18d55b)[_0x5b9019(0x167)](_0x5b9019(0x135),{'access':{'allow':![],'reason':_0x5b9019(0x113),'token':null}});break;case'stop':_0x99b8a9['stop']==_0x5b9019(0x151)&&restartBot(_0x18d55b);_0x99b8a9[_0x5b9019(0x1c1)]==_0x5b9019(0x21a)&&toggleBot(_0x18d55b,_0x5b9019(0x1fc),_0x5b9019(0x219));break;case'telegram':sendTelegram(_0x18d55b,_0x99b8a9['telegram']);break;case'function':io['to'](_0x18d55b)[_0x5b9019(0x167)](_0x99b8a9['function'],_0x99b8a9[_0x5b9019(0x1d0)]);break;}}),pid[_0x18d55b]['on'](_0x10360a(0x209),function(_0x33011c){if(_0x4500e7)return;_0x4500e7=!![],_0x2876da(_0x33011c);}),pid[_0x18d55b]['on'](_0x10360a(0x220),function(_0x4d6386){const _0x553364=_0x10360a;if(installingUpdate)return;if(_0x4500e7)return;_0x4500e7=!![],_0x2876da(null);const _0x50fc05=dbConfig[_0x553364(0x22e)](_0x553364(0x114))[_0x553364(0x1dd)]({'botID':_0x18d55b})[_0x553364(0x15e)]();_0x50fc05&&(_0x50fc05[_0x553364(0x135)]==_0x553364(0x247)||_0x50fc05[_0x553364(0x135)]==_0x553364(0x112))&&(updateLive(_0x18d55b,_0x553364(0x219)),logging(_0x553364(0x245)+_0x18d55b),startBot([_0x18d55b,userID],{'cwd':bbpath},function(_0x593bff){if(_0x593bff)logging(_0x593bff);}));});}function stopBot(_0xbc265f){const _0x3e8c3b=_0xe82b12;getClientsWithBotID(_0xbc265f)[_0x3e8c3b(0x1f0)](_0x4a16a2=>{const _0x50d172=_0x3e8c3b;getSocket(_0x4a16a2['id'])[_0x50d172(0x23d)](!![]),removeClient(_0x4a16a2['id']);});if(pid[_0xbc265f])pid[_0xbc265f][_0x3e8c3b(0x21a)]();}function restartBot(_0xd10762){const _0x275b93=_0xe82b12;if(pid[_0xd10762])pid[_0xd10762][_0x275b93(0x21a)]();}function addBot(){const _0x42e6dd=_0xe82b12;let _0x1833b8;for(let _0x40f98d=0x1;_0x40f98d<0x3e9;_0x40f98d++){_0x1833b8=_0x40f98d['toString']()[_0x42e6dd(0x1b8)](0x3,'0');let _0x34f516=config[_0x42e6dd(0x1dd)](_0x3cee40=>_0x3cee40['botID']==_0x1833b8);if(!_0x34f516)break;}if(_0x1833b8==='1000'){logging(_0x42e6dd(0x1b7));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x1833b8),dbConfig[_0x42e6dd(0x22e)](_0x42e6dd(0x114))[_0x42e6dd(0x233)]({'botID':_0x1833b8,'botname':_0x42e6dd(0x211)+_0x1833b8,'status':'new','live':''})[_0x42e6dd(0x229)](),startBot([_0x1833b8,userID],{'cwd':bbpath},function(_0x5ec83c){if(_0x5ec83c)logging(_0x5ec83c);}),config=getConfiguration(),io['to']('botmanager')[_0x42e6dd(0x167)](_0x42e6dd(0x114),config);}function deleteBot(_0x3aaf05){const _0x57d802=_0xe82b12;getClientsWithBotID(_0x3aaf05)['forEach'](_0x31f865=>{const _0x2f9d8c=_0x51a4;getSocket(_0x31f865['id'])[_0x2f9d8c(0x23d)](!![]),removeClient(_0x31f865['id']);}),dbConfig[_0x57d802(0x22e)](_0x57d802(0x114))['remove']({'botID':_0x3aaf05})[_0x57d802(0x229)](),logging('deleted\x20Bot\x20'+_0x3aaf05),stopBot(_0x3aaf05);try{fs[_0x57d802(0x1f7)](path['join'](configpath,_0x57d802(0x1dc)+_0x3aaf05+_0x57d802(0x231))),fs[_0x57d802(0x1f7)](path[_0x57d802(0x1f4)](configpath,_0x57d802(0x1dc)+_0x3aaf05+_0x57d802(0x218))),fs[_0x57d802(0x1f7)](path[_0x57d802(0x1f4)](configpath,'bot-'+_0x3aaf05+_0x57d802(0x240))),fs[_0x57d802(0x1f7)](path[_0x57d802(0x1f4)](configpath,_0x57d802(0x1dc)+_0x3aaf05+_0x57d802(0x13d)));}catch(_0x3548d1){if(_0x3548d1)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x3548d1);}config=getConfiguration(),io['to']('botmanager')[_0x57d802(0x167)]('bots',config);}function toggleBot(_0x15c8c2,_0x2a1a50,_0x1852fd){const _0x22ef1b=_0xe82b12;dbConfig[_0x22ef1b(0x22e)](_0x22ef1b(0x114))[_0x22ef1b(0x1dd)]({'botID':_0x15c8c2})[_0x22ef1b(0x158)]({'status':_0x2a1a50})[_0x22ef1b(0x158)]({'live':_0x1852fd})[_0x22ef1b(0x229)]();if(_0x2a1a50==_0x22ef1b(0x247)||_0x2a1a50==_0x22ef1b(0x112))logging(_0x22ef1b(0x248)+_0x15c8c2),startBot([_0x15c8c2,userID],{'cwd':bbpath},function(_0x22abdd){if(_0x22abdd)logging(_0x22abdd);});else(_0x2a1a50=='disabled'||_0x2a1a50==_0x22ef1b(0x162))&&(logging(_0x22ef1b(0x239)+_0x15c8c2),stopBot(_0x15c8c2));config=getConfiguration(),io['to']('botmanager')['emit'](_0x22ef1b(0x114),config);}function toggleStatus(_0x49c4c0){const _0x31eb21=_0xe82b12;let _0xaa135d=dbConfig[_0x31eb21(0x22e)](_0x31eb21(0x114))[_0x31eb21(0x1dd)]({'botID':_0x49c4c0})[_0x31eb21(0x15e)](),_0x251d9a;if(_0xaa135d[_0x31eb21(0x135)]===_0x31eb21(0x247))_0x251d9a='disabled';else{if(_0xaa135d[_0x31eb21(0x135)]==='new')_0x251d9a=_0x31eb21(0x162);else{if(_0xaa135d['status']===_0x31eb21(0x162))_0x251d9a=_0x31eb21(0x112);else{if(_0xaa135d[_0x31eb21(0x135)]===_0x31eb21(0x1fc))_0x251d9a=_0x31eb21(0x247);}}}return _0x251d9a;}function updateStatus(_0x313784,_0x218258){const _0x2ff68a=_0xe82b12;dbConfig[_0x2ff68a(0x22e)](_0x2ff68a(0x114))[_0x2ff68a(0x1dd)]({'botID':_0x313784})['assign']({'status':_0x218258})[_0x2ff68a(0x229)](),config=getConfiguration(),io['to'](_0x2ff68a(0x10b))[_0x2ff68a(0x167)](_0x2ff68a(0x114),config);}function updateLive(_0x3d03b5,_0x2ae07a){const _0x1b8e52=_0xe82b12;dbConfig[_0x1b8e52(0x22e)](_0x1b8e52(0x114))['find']({'botID':_0x3d03b5})[_0x1b8e52(0x158)]({'live':_0x2ae07a})[_0x1b8e52(0x229)](),config=getConfiguration(),io['to'](_0x1b8e52(0x10b))['emit'](_0x1b8e52(0x114),config);}function updateBotName(_0x58cd26,_0x3bbd62){const _0x31d904=_0xe82b12;dbConfig['get']('bots')[_0x31d904(0x1dd)]({'botID':_0x58cd26})[_0x31d904(0x158)]({'botname':_0x3bbd62})[_0x31d904(0x229)](),config=getConfiguration(),io['to'](_0x31d904(0x10b))[_0x31d904(0x167)](_0x31d904(0x114),config);}function telegramError(_0x427ec3){const _0x228f02=_0xe82b12;console[_0x228f02(0x139)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x4f8274){const _0x44d082=_0xe82b12;if(_0x4f8274[_0x44d082(0x1a1)]['username']!=settings[_0x44d082(0x142)]&&'@'+_0x4f8274[_0x44d082(0x1a1)]['username']!=settings['telegramUsername'])return tgBot[_0x44d082(0x1ac)](_0x4f8274['chat']['id'],_0x44d082(0x17a),{'parse_mode':_0x44d082(0x15f)})[_0x44d082(0x237)](_0x2866fa=>{telegramError(_0x2866fa);}),![];return!![];}async function initTelegram(){const _0xe2aad2=_0xe82b12;if(tgBot)tgBot[_0xe2aad2(0x198)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x403c56=_0xe2aad2(0x232);_0x403c56+='\x0a',_0x403c56+='/enable\x20-\x20enable\x20notifications\x0a',_0x403c56+='/disable\x20-\x20disable\x20notifications\x0a',_0x403c56+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x403c56+=_0xe2aad2(0x1a4),_0x403c56+='/on\x20-\x20start\x20bot(s)\x0a',_0x403c56+=_0xe2aad2(0x177),_0x403c56+=_0xe2aad2(0x1cd),_0x403c56+=_0xe2aad2(0x13e);let _0x1a4357=_0xe2aad2(0x1f3);_0x1a4357+='\x0a',_0x1a4357+=_0x403c56,tgBot[_0xe2aad2(0x121)](/\/start/,_0x198ccf=>{const _0xc8916e=_0xe2aad2;if(!validateTelegram(_0x198ccf))return;if(settings[_0xc8916e(0x1bc)]!=_0x198ccf[_0xc8916e(0x16a)]['id'])updateSetting(_0xc8916e(0x1bc),_0x198ccf[_0xc8916e(0x16a)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x198ccf[_0xc8916e(0x16a)]['id'],_0x1a4357)['catch'](_0x55180b=>{telegramError(_0x55180b);});}),tgBot[_0xe2aad2(0x121)](/\/enable/,_0x4c798d=>{const _0x1cee08=_0xe2aad2;if(!validateTelegram(_0x4c798d))return;if(settings[_0x1cee08(0x1bc)]!=_0x4c798d[_0x1cee08(0x16a)]['id'])updateSetting(_0x1cee08(0x1bc),_0x4c798d[_0x1cee08(0x16a)]['id']);updateSetting(_0x1cee08(0x1ee),!![]),tgBot['sendMessage'](_0x4c798d[_0x1cee08(0x16a)]['id'],_0x1cee08(0x1b9))[_0x1cee08(0x237)](_0x23b4d6=>{telegramError(_0x23b4d6);});}),tgBot['onText'](/\/config/,async _0x40290e=>{const _0x31f612=_0xe2aad2;if(!validateTelegram(_0x40290e))return;tgBot['removeListener']('callback_query'),tgBot[_0x31f612(0x1ac)](_0x40290e[_0x31f612(0x16a)]['id'],_0x31f612(0x18b),{'reply_markup':{'inline_keyboard':[[{'text':_0x31f612(0x1da),'callback_data':_0x31f612(0x22c)},{'text':_0x31f612(0x206),'callback_data':_0x31f612(0x190)},{'text':'All','callback_data':'all'}]]}})['catch'](_0x28a25c=>{telegramError(_0x28a25c);}),tgBot['on']('callback_query',async _0x87dcdd=>{const _0xf6dd73=_0x31f612,_0x30460f=_0x87dcdd[_0xf6dd73(0x203)],_0x3e8bb9=_0x87dcdd[_0xf6dd73(0x14c)];tgBot[_0xf6dd73(0x160)](_0x87dcdd['id'])[_0xf6dd73(0x1cb)](async()=>{const _0xe021eb=_0xf6dd73;_0x30460f==_0xe021eb(0x22c)&&(updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0xe021eb(0x1ac)](_0x3e8bb9['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x19099c=>{telegramError(_0x19099c);}));_0x30460f==_0xe021eb(0x190)&&(updateSetting(_0xe021eb(0x13a),_0xe021eb(0x190)),updateSetting(_0xe021eb(0x1ee),!![]),await tgBot[_0xe021eb(0x1ac)](_0x3e8bb9[_0xe021eb(0x16a)]['id'],_0xe021eb(0x18c))['catch'](_0x1251a3=>{telegramError(_0x1251a3);}));_0x30460f==_0xe021eb(0x163)&&(updateSetting('telegramEvents',_0xe021eb(0x163)),updateSetting(_0xe021eb(0x1ee),!![]),await tgBot[_0xe021eb(0x1ac)](_0x3e8bb9[_0xe021eb(0x16a)]['id'],_0xe021eb(0x23c))['catch'](_0x23de83=>{telegramError(_0x23de83);}));if(!settings['telegramChatId'])tgBot[_0xe021eb(0x1ac)](_0x3e8bb9[_0xe021eb(0x16a)]['id'],_0xe021eb(0x11b))['catch'](_0x3f713c=>{telegramError(_0x3f713c);});}),tgBot[_0xf6dd73(0x1ec)]('callback_query');});}),tgBot[_0xe2aad2(0x121)](/\/status/,_0x54fdde=>{const _0x39e1ed=_0xe2aad2;if(!validateTelegram(_0x54fdde))return;let _0x364944='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x39e1ed(0x1f0)](_0x1ae525=>{const _0x472949=_0x39e1ed;_0x364944+='Bot\x20'+_0x1ae525[_0x472949(0x171)]+_0x472949(0x214)+_0x1ae525[_0x472949(0x19f)]+':\x20'+_0x1ae525[_0x472949(0x135)]+_0x472949(0x10f)+_0x1ae525[_0x472949(0x161)]+'\x0a';}),_0x364944+='\x0a',_0x364944+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x364944+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x39e1ed(0x215),_0x364944+=settings[_0x39e1ed(0x1ee)]?settings[_0x39e1ed(0x13a)]==_0x39e1ed(0x163)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x39e1ed(0x24d)+settings[_0x39e1ed(0x13a)]+'\x20only\x0a':'',tgBot[_0x39e1ed(0x1ac)](_0x54fdde[_0x39e1ed(0x16a)]['id'],_0x364944,{'parse_mode':_0x39e1ed(0x15f)})[_0x39e1ed(0x237)](_0x4e0021=>{telegramError(_0x4e0021);});}),tgBot[_0xe2aad2(0x121)](/\/restart/,_0x3a8eab=>{const _0x120714=_0xe2aad2;if(!validateTelegram(_0x3a8eab))return;tgBot[_0x120714(0x1ec)](_0x120714(0x116));const _0x2ccfe6=getEnabledBots();if(_0x2ccfe6['length']==0x0)tgBot[_0x120714(0x1ac)](_0x3a8eab[_0x120714(0x16a)]['id'],_0x120714(0x1a3))[_0x120714(0x237)](_0xc97876=>{telegramError(_0xc97876);});else{if(_0x2ccfe6[_0x120714(0x243)]>0x1)_0x2ccfe6['push']({'botID':_0x120714(0x163)});let _0x23cca0=[],_0x12a423=[];const _0x2bcca1=_0x2ccfe6[_0x120714(0x243)]%0x4==0x0||_0x2ccfe6[_0x120714(0x243)]%0x4==0x3||_0x2ccfe6[_0x120714(0x243)]%0x3==0x1?0x4:0x3;let _0x2c5ba1=0x0;_0x2ccfe6[_0x120714(0x1f0)]((_0x57fa11,_0x2917b6)=>{const _0x103f7a=_0x120714;if(_0x2917b6%_0x2bcca1==0x0)_0x12a423=[];_0x12a423['push']({'text':_0x57fa11[_0x103f7a(0x171)]==_0x103f7a(0x163)?'All\x20bots':'Bot\x20'+_0x57fa11[_0x103f7a(0x171)],'callback_data':_0x57fa11[_0x103f7a(0x171)]}),_0x2917b6%_0x2bcca1==0x0&&(_0x23cca0[_0x2c5ba1]=_0x12a423,_0x2c5ba1++);}),tgBot[_0x120714(0x1ac)](_0x3a8eab[_0x120714(0x16a)]['id'],_0x120714(0x1ad),{'reply_markup':{'inline_keyboard':_0x23cca0}})[_0x120714(0x237)](_0x306786=>{telegramError(_0x306786);}),tgBot['on'](_0x120714(0x116),async _0x6b9e03=>{const _0x42588c=_0x120714,_0x3de514=_0x6b9e03[_0x42588c(0x203)],_0x7b17c0=_0x6b9e03['message'];tgBot[_0x42588c(0x160)](_0x6b9e03['id'])[_0x42588c(0x1cb)](async()=>{const _0x334480=_0x42588c;if(_0x3de514==_0x334480(0x163)){if(settings[_0x334480(0x13a)]=='orders')tgBot[_0x334480(0x1ac)](_0x7b17c0[_0x334480(0x16a)]['id'],_0x334480(0x242))[_0x334480(0x237)](_0x36e3c2=>{telegramError(_0x36e3c2);});config[_0x334480(0x1f0)](_0x473fca=>{const _0x309d88=_0x334480;restartBot(_0x473fca[_0x309d88(0x171)]);});}else{if(settings[_0x334480(0x13a)]=='orders')tgBot[_0x334480(0x1ac)](_0x7b17c0['chat']['id'],_0x334480(0x14d)+_0x3de514)[_0x334480(0x237)](_0x2480ba=>{telegramError(_0x2480ba);});restartBot(_0x3de514);}}),tgBot[_0x42588c(0x1ec)](_0x42588c(0x116));});}}),tgBot['onText'](/\/on/,_0xaedc68=>{const _0x612fda=_0xe2aad2;if(!validateTelegram(_0xaedc68))return;tgBot[_0x612fda(0x1ec)](_0x612fda(0x116));const _0x44299b=getDisabledBots();if(_0x44299b[_0x612fda(0x243)]==0x0)tgBot[_0x612fda(0x1ac)](_0xaedc68[_0x612fda(0x16a)]['id'],_0x612fda(0x119))[_0x612fda(0x237)](_0x1afe21=>{telegramError(_0x1afe21);});else{if(_0x44299b[_0x612fda(0x243)]>0x1)_0x44299b[_0x612fda(0x233)]({'botID':'all'});let _0x43227f=[],_0x31b5b8=[];const _0x196aa9=_0x44299b[_0x612fda(0x243)]%0x4==0x0||_0x44299b[_0x612fda(0x243)]%0x4==0x3||_0x44299b[_0x612fda(0x243)]%0x3==0x1?0x4:0x3;let _0x1276e0=0x0;_0x44299b[_0x612fda(0x1f0)]((_0x1b0db0,_0x10ac30)=>{const _0x15e497=_0x612fda;if(_0x10ac30%_0x196aa9==0x0)_0x31b5b8=[];_0x31b5b8[_0x15e497(0x233)]({'text':_0x1b0db0['botID']=='all'?_0x15e497(0x11f):'Bot\x20'+_0x1b0db0[_0x15e497(0x171)],'callback_data':_0x1b0db0['botID']}),_0x10ac30%_0x196aa9==0x0&&(_0x43227f[_0x1276e0]=_0x31b5b8,_0x1276e0++);}),tgBot[_0x612fda(0x1ac)](_0xaedc68[_0x612fda(0x16a)]['id'],_0x612fda(0x118),{'reply_markup':{'inline_keyboard':_0x43227f}})[_0x612fda(0x237)](_0x443819=>{telegramError(_0x443819);}),tgBot['on'](_0x612fda(0x116),async _0x2bed41=>{const _0x1aa3da=_0x612fda,_0x5de43b=_0x2bed41[_0x1aa3da(0x203)],_0x674029=_0x2bed41[_0x1aa3da(0x14c)];tgBot[_0x1aa3da(0x160)](_0x2bed41['id'])[_0x1aa3da(0x1cb)](async()=>{const _0x575187=_0x1aa3da;if(_0x5de43b==_0x575187(0x163)){if(settings['telegramEvents']=='orders')tgBot[_0x575187(0x1ac)](_0x674029['chat']['id'],_0x575187(0x19e))[_0x575187(0x237)](_0x399bd0=>{telegramError(_0x399bd0);});_0x44299b['forEach'](_0x37a3bf=>{const _0x42ea78=_0x575187;if(_0x37a3bf['botID']!=_0x42ea78(0x163))toggleBot(_0x37a3bf[_0x42ea78(0x171)],toggleStatus(_0x37a3bf[_0x42ea78(0x171)]),_0x42ea78(0x219));});}else{if(settings['telegramEvents']==_0x575187(0x22c))tgBot[_0x575187(0x1ac)](_0x674029[_0x575187(0x16a)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5de43b)['catch'](_0x3ea6aa=>{telegramError(_0x3ea6aa);});toggleBot(_0x5de43b,toggleStatus(_0x5de43b),_0x575187(0x219));}}),tgBot['removeListener'](_0x1aa3da(0x116));});}}),tgBot['onText'](/\/off/,_0x5d5859=>{const _0x3b9ee3=_0xe2aad2;if(!validateTelegram(_0x5d5859))return;tgBot[_0x3b9ee3(0x1ec)]('callback_query');const _0x24bac1=getEnabledBots();if(_0x24bac1[_0x3b9ee3(0x243)]==0x0)tgBot[_0x3b9ee3(0x1ac)](_0x5d5859['chat']['id'],_0x3b9ee3(0x1a3))[_0x3b9ee3(0x237)](_0x38cabb=>{telegramError(_0x38cabb);});else{if(_0x24bac1['length']>0x1)_0x24bac1[_0x3b9ee3(0x233)]({'botID':_0x3b9ee3(0x163)});let _0x406beb=[],_0x2f8648=[];const _0x31394c=_0x24bac1[_0x3b9ee3(0x243)]%0x4==0x0||_0x24bac1['length']%0x4==0x3||_0x24bac1[_0x3b9ee3(0x243)]%0x3==0x1?0x4:0x3;let _0x582c99=0x0;_0x24bac1['forEach']((_0x182de3,_0x2c5c80)=>{const _0x3b201e=_0x3b9ee3;if(_0x2c5c80%_0x31394c==0x0)_0x2f8648=[];_0x2f8648[_0x3b201e(0x233)]({'text':_0x182de3['botID']=='all'?_0x3b201e(0x11f):'Bot\x20'+_0x182de3['botID'],'callback_data':_0x182de3[_0x3b201e(0x171)]}),_0x2c5c80%_0x31394c==0x0&&(_0x406beb[_0x582c99]=_0x2f8648,_0x582c99++);}),tgBot[_0x3b9ee3(0x1ac)](_0x5d5859[_0x3b9ee3(0x16a)]['id'],_0x3b9ee3(0x124),{'reply_markup':{'inline_keyboard':_0x406beb}})['catch'](_0x3282ef=>{telegramError(_0x3282ef);}),tgBot['on'](_0x3b9ee3(0x116),async _0x520312=>{const _0xb1595c=_0x3b9ee3,_0x2bb23f=_0x520312[_0xb1595c(0x203)],_0x22c36c=_0x520312[_0xb1595c(0x14c)];tgBot[_0xb1595c(0x160)](_0x520312['id'])[_0xb1595c(0x1cb)](async()=>{const _0x53fc23=_0xb1595c;if(_0x2bb23f=='all'){if(settings[_0x53fc23(0x13a)]==_0x53fc23(0x22c))tgBot[_0x53fc23(0x1ac)](_0x22c36c['chat']['id'],_0x53fc23(0x20c))[_0x53fc23(0x237)](_0x4fb362=>{telegramError(_0x4fb362);});_0x24bac1[_0x53fc23(0x1f0)](_0x248972=>{const _0x2a9630=_0x53fc23;if(_0x248972[_0x2a9630(0x171)]!=_0x2a9630(0x163))toggleBot(_0x248972[_0x2a9630(0x171)],toggleStatus(_0x248972['botID']),_0x2a9630(0x219));});}else{if(settings[_0x53fc23(0x13a)]=='orders')tgBot['sendMessage'](_0x22c36c[_0x53fc23(0x16a)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2bb23f)['catch'](_0x185e25=>{telegramError(_0x185e25);});toggleBot(_0x2bb23f,toggleStatus(_0x2bb23f),_0x53fc23(0x219));}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0xe2aad2(0x121)](/\/disable/,_0x37f23c=>{const _0x2c8d45=_0xe2aad2;if(!validateTelegram(_0x37f23c))return;tgBot[_0x2c8d45(0x1ac)](_0x37f23c['chat']['id'],_0x2c8d45(0x15b))[_0x2c8d45(0x237)](_0x2344c9=>{telegramError(_0x2344c9);}),updateSetting('telegramEnabled',![]);}),tgBot[_0xe2aad2(0x121)](/\/help/,_0x1ac528=>{const _0x1736e1=_0xe2aad2;if(!validateTelegram(_0x1ac528))return;tgBot['sendMessage'](_0x1ac528[_0x1736e1(0x16a)]['id'],_0x403c56)[_0x1736e1(0x237)](_0x269b4a=>{telegramError(_0x269b4a);});}),tgBot['on']('polling_error',_0x102087=>{const _0x1ffbc1=_0xe2aad2;_0x102087[_0x1ffbc1(0x21f)]()[_0x1ffbc1(0x13c)](_0x1ffbc1(0x249))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x1ffbc1(0x198)](),tgBot=null,io['to'](_0x1ffbc1(0x10b))['emit'](_0x1ffbc1(0x128),_0x1ffbc1(0x228)));}),process[_0xe2aad2(0x1a5)](_0xe2aad2(0x189),()=>{const _0x2e668f=_0xe2aad2;if(tgBot)tgBot['stopPolling']();process[_0x2e668f(0x220)](0x1);}),process[_0xe2aad2(0x1a5)](_0xe2aad2(0x185),()=>{const _0x1e9c0e=_0xe2aad2;if(tgBot)tgBot['stopPolling']();process[_0x1e9c0e(0x220)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0xa630d4,_0x5548ca){const _0x5107bc=_0xe82b12;if(settings[_0x5107bc(0x1ee)]){if(settings[_0x5107bc(0x13a)]==_0x5107bc(0x163)||(_0x5548ca[_0x5107bc(0x14f)]==_0x5107bc(0x209)||_0x5548ca[_0x5107bc(0x14f)]==_0x5107bc(0x182))&&settings[_0x5107bc(0x13a)]==_0x5107bc(0x190)||_0x5548ca['type']=='order'&&settings[_0x5107bc(0x13a)]==_0x5107bc(0x22c)){if(tgBot&&settings['telegramChatId']){if(_0x5548ca[_0x5107bc(0x224)])tgBot[_0x5107bc(0x1ac)](settings[_0x5107bc(0x1bc)],_0x5548ca[_0x5107bc(0x19f)]+_0x5107bc(0x157)+_0x5548ca[_0x5107bc(0x1f2)])[_0x5107bc(0x237)](_0x116e57=>{telegramError(_0x116e57);});else tgBot['sendMessage'](settings[_0x5107bc(0x1bc)],'Bot\x20'+_0xa630d4+_0x5107bc(0x157)+_0x5548ca[_0x5107bc(0x1f2)])[_0x5107bc(0x237)](_0x383a78=>{telegramError(_0x383a78);});}}}}function getDeviceWithIp(_0x3fba94){const _0x74da57=_0xe82b12;return devices[_0x74da57(0x1dd)](_0x20b49e=>_0x20b49e['ip']===_0x3fba94);}function temporaryAccess2FA(_0xec5b1e,_0xbda1ed){const _0x18fb31=_0xe82b12;let _0x424ca0=new Date(),_0x187cc1=![];if(lastIpApproval){if(_0x424ca0-lastIpApproval<0x1388)_0x187cc1=!![];}lastIpApproval=new Date();if(_0x187cc1)return;tgBot&&settings[_0x18fb31(0x1bc)]&&(tgBot['removeListener'](_0x18fb31(0x116)),tgBot['sendMessage'](settings[_0x18fb31(0x1bc)],_0x18fb31(0x1ba)+normalizeIP(_0xbda1ed)[_0x18fb31(0x165)]+'</b>\x20?',{'parse_mode':_0x18fb31(0x15f),'reply_markup':{'inline_keyboard':[[{'text':_0x18fb31(0x230),'callback_data':'5'},{'text':_0x18fb31(0x1e7),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x18fb31(0x17b),'callback_data':_0x18fb31(0x17b)}]]}})[_0x18fb31(0x237)](_0x13cce6=>{telegramError(_0x13cce6);}),tgBot['on']('callback_query',async _0x1de009=>{const _0xd99d02=_0x18fb31,_0x2893c1=_0x1de009[_0xd99d02(0x203)],_0x217062=_0x1de009[_0xd99d02(0x14c)];tgBot[_0xd99d02(0x160)](_0x1de009['id'])['then'](async()=>{const _0x378344=_0xd99d02;devices[_0xec5b1e][_0x378344(0x179)]={'clientip':_0xbda1ed,'timestamp':new Date()[_0x378344(0x19c)](),'expiry':_0x2893c1},_0x2893c1!=_0x378344(0x17b)?(await tgBot[_0x378344(0x1ac)](_0x217062[_0x378344(0x16a)]['id'],'Access\x20enabled\x20for\x20'+_0x2893c1+_0x378344(0x1f1),{'parse_mode':_0x378344(0x15f)})['catch'](_0x459fba=>{telegramError(_0x459fba);}),io['to'](_0xec5b1e)[_0x378344(0x167)](_0x378344(0x135),{'access':{'allow':![],'reason':_0x378344(0x113),'token':null}})):(await tgBot[_0x378344(0x1ac)](_0x217062[_0x378344(0x16a)]['id'],_0x378344(0x1b3))[_0x378344(0x237)](_0x50461a=>{telegramError(_0x50461a);}),io['to'](_0xec5b1e)[_0x378344(0x167)]('status',{'access':{'allow':![],'reason':_0x378344(0x1c7),'token':null}}));}),tgBot[_0xd99d02(0x1ec)]('callback_query');}));}function loginAccess2FA(_0xac91f7,_0x2dec13){const _0x2ff1c4=_0xe82b12;tgBot&&settings[_0x2ff1c4(0x1bc)]&&(tgBot['removeListener'](_0x2ff1c4(0x116)),tgBot[_0x2ff1c4(0x1ac)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x2dec13)[_0x2ff1c4(0x165)]+_0x2ff1c4(0x1b0),{'parse_mode':_0x2ff1c4(0x15f),'reply_markup':{'inline_keyboard':[[{'text':_0x2ff1c4(0x12d),'callback_data':loginExpiry},{'text':_0x2ff1c4(0x17b),'callback_data':_0x2ff1c4(0x17b)}]]}})[_0x2ff1c4(0x237)](_0x61cd11=>{telegramError(_0x61cd11);}),tgBot['on'](_0x2ff1c4(0x116),async _0x2dde26=>{const _0x150a45=_0x2ff1c4,_0x47df23=_0x2dde26['data'],_0x4f5146=_0x2dde26[_0x150a45(0x14c)];tgBot[_0x150a45(0x160)](_0x2dde26['id'])[_0x150a45(0x1cb)](async()=>{const _0x3ecdc6=_0x150a45;devices[_0xac91f7][_0x3ecdc6(0x140)]={'clientip':_0x2dec13,'timestamp':new Date()[_0x3ecdc6(0x19c)](),'expiry':_0x47df23},_0x47df23!=_0x3ecdc6(0x17b)?(await tgBot['sendMessage'](_0x4f5146['chat']['id'],_0x3ecdc6(0x17c),{'parse_mode':_0x3ecdc6(0x15f)})[_0x3ecdc6(0x237)](_0x2faede=>{telegramError(_0x2faede);}),io['to'](_0xac91f7)['emit'](_0x3ecdc6(0x135),{'access':{'allow':![],'reason':_0x3ecdc6(0x113),'token':null}})):(await tgBot['sendMessage'](_0x4f5146[_0x3ecdc6(0x16a)]['id'],_0x3ecdc6(0x1e4))[_0x3ecdc6(0x237)](_0x4b7b98=>{telegramError(_0x4b7b98);}),io['to'](_0xac91f7)[_0x3ecdc6(0x167)](_0x3ecdc6(0x135),{'access':{'allow':![],'reason':_0x3ecdc6(0x12a),'token':null}}));}),tgBot[_0x150a45(0x1ec)](_0x150a45(0x116));}));}function getConfiguration(){const _0x658bf5=_0xe82b12;return dbConfig[_0x658bf5(0x22e)]('bots')[_0x658bf5(0x22d)](_0x658bf5(0x171))[_0x658bf5(0x15e)]()||[];}function getEnabledBots(){const _0xf17228=_0xe82b12;return dbConfig[_0xf17228(0x22e)](_0xf17228(0x114))['sortBy'](_0xf17228(0x171))[_0xf17228(0x149)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x19135b=_0xe82b12;return dbConfig[_0x19135b(0x22e)](_0x19135b(0x114))['sortBy'](_0x19135b(0x171))[_0x19135b(0x149)]({'status':_0x19135b(0x1fc)})[_0x19135b(0x15e)]()||[];}function getSettings(){const _0x3e0501=_0xe82b12;return dbSettings[_0x3e0501(0x22e)](_0x3e0501(0x1bd))[_0x3e0501(0x15e)]()||{'timeshift':0x0};}function getSecure(){const _0x534057=_0xe82b12;return dbSecure['get'](_0x534057(0x192))[_0x534057(0x15e)]()||{};}function getBlacklist(){const _0x290ac1=_0xe82b12;return dbSecure[_0x290ac1(0x22e)](_0x290ac1(0x216))['value']()||[];}function broadcastToBots(_0x111858,_0x57d6db){const _0x133422=_0xe82b12;config[_0x133422(0x1f0)](_0x47db73=>{const _0xd61b3f=_0x133422;if(_0x47db73[_0xd61b3f(0x135)]=='enabled'&&_0x47db73[_0xd61b3f(0x161)]==_0xd61b3f(0x155)){if(pid[_0x47db73['botID']])pid[_0x47db73[_0xd61b3f(0x171)]][_0xd61b3f(0x1d4)]({[_0x111858]:_0x57d6db});}});}function storeSettings(_0x1e74c4,_0x103071=![]){const _0xf7a7ed=_0xe82b12;_0x1e74c4={...settings,..._0x1e74c4};if(_0x103071&&_0x1e74c4[_0xf7a7ed(0x23f)]!=_0xf7a7ed(0x1d2)&&_0x1e74c4[_0xf7a7ed(0x23f)]!=''){const _0x133901=crypt[_0xf7a7ed(0x23e)](secure[_0xf7a7ed(0x18a)],_0x1e74c4[_0xf7a7ed(0x23f)])[_0xf7a7ed(0x14c)][_0xf7a7ed(0x226)]('@')[0x0],_0x3c0857=bcrypt[_0xf7a7ed(0x197)](_0x133901,saltRounds);_0x1e74c4={..._0x1e74c4,'bbPassword':_0x3c0857};}if(_0x103071&&_0x1e74c4['telegramToken']!=_0xf7a7ed(0x1d2)&&_0x1e74c4['telegramToken']!=''){const _0x5c8b35=crypt[_0xf7a7ed(0x23e)](secure[_0xf7a7ed(0x18a)],_0x1e74c4['telegramToken'])[_0xf7a7ed(0x14c)][_0xf7a7ed(0x226)]('@')[0x0];_0x1e74c4={..._0x1e74c4,'telegramToken':_0x5c8b35};}const _0x5dd1f9=_0x1e74c4[_0xf7a7ed(0x24f)]!='************'&&_0x1e74c4[_0xf7a7ed(0x24f)]!=settings[_0xf7a7ed(0x24f)]||_0x1e74c4[_0xf7a7ed(0x142)]!=settings[_0xf7a7ed(0x142)],_0x178f2b=_0x1e74c4[_0xf7a7ed(0x24f)]==''||_0x1e74c4['telegramUsername']=='';if(_0x5dd1f9)_0x1e74c4[_0xf7a7ed(0x13a)]=_0xf7a7ed(0x163);for(const [_0x3b515a,_0x3b15ff]of Object[_0xf7a7ed(0x1fe)](_0x1e74c4)){if(_0x3b515a==_0xf7a7ed(0x24f)&&_0x3b15ff=='************'){_0x1e74c4['telegramToken']=settings[_0xf7a7ed(0x24f)];continue;};if(_0x3b515a==_0xf7a7ed(0x23f)&&_0x3b15ff==_0xf7a7ed(0x1d2)){_0x1e74c4[_0xf7a7ed(0x23f)]=settings['bbPassword'];continue;};dbSettings[_0xf7a7ed(0x18f)]('settings.'+_0x3b515a,_0x3b15ff)['write']();}settings=_0x1e74c4,io['to'](_0xf7a7ed(0x10b))[_0xf7a7ed(0x167)](_0xf7a7ed(0x1bd),cleanSettings()),broadcastToBots(_0xf7a7ed(0x1c6),settings[_0xf7a7ed(0x1c6)]);if(_0x5dd1f9&&!_0x178f2b)initTelegram();if(_0x5dd1f9&&_0x178f2b)disableTelegram();getAllClients()['forEach'](_0x5c10c2=>{const _0x226d09=_0xf7a7ed;getSocket(_0x5c10c2['id'])[_0x226d09(0x167)](_0x226d09(0x135),{'access':{'allow':![],'reason':_0x226d09(0x113),'token':null}});});}function updateSetting(_0x4ac2ac,_0x11f64b){const _0x3f3a24=_0xe82b12;dbSettings[_0x3f3a24(0x18f)](_0x3f3a24(0x17e)+_0x4ac2ac,_0x11f64b)[_0x3f3a24(0x229)](),settings=getSettings(),io['to'](_0x3f3a24(0x10b))[_0x3f3a24(0x167)](_0x3f3a24(0x1bd),cleanSettings());}function storeSecure(_0x1aafa7){const _0x20c171=_0xe82b12;dbSecure[_0x20c171(0x22e)](_0x20c171(0x192))[_0x20c171(0x233)](_0x1aafa7)[_0x20c171(0x229)](),secure=_0x1aafa7;}function addBlacklist(_0x28eab1){const _0x293bc9=_0xe82b12;cleanBlacklist();let _0x3729a9;devices[_0x28eab1][_0x293bc9(0x179)]?_0x3729a9=Math['max'](devices[_0x28eab1][_0x293bc9(0x179)][_0x293bc9(0x1ff)],loginExpiry):_0x3729a9=loginExpiry,dbSecure[_0x293bc9(0x22e)](_0x293bc9(0x216))[_0x293bc9(0x233)]({'expiry':new Date()['getTime']()+_0x3729a9*0x3c*0x3e8,'token':devices[_0x28eab1][_0x293bc9(0x134)][_0x293bc9(0x145)]})[_0x293bc9(0x229)](),blacklist=dbSecure[_0x293bc9(0x22e)](_0x293bc9(0x216))['value']();}function cleanBlacklist(){const _0x368020=_0xe82b12;let _0x252cb9=dbSecure[_0x368020(0x22e)](_0x368020(0x216))[_0x368020(0x186)]()[_0x368020(0x15e)](),_0x2168fe=new Date()['getTime']();_0x252cb9[_0x368020(0x1f0)](_0x5a0b16=>{const _0x4a9397=_0x368020;_0x5a0b16[_0x4a9397(0x1ff)]<_0x2168fe&&dbSecure['get'](_0x4a9397(0x216))['remove']({'expiry':_0x5a0b16[_0x4a9397(0x1ff)]})[_0x4a9397(0x229)]();});}function initStates(){const _0x3aee75=_0xe82b12;let _0x161c5e=getConfiguration();_0x161c5e[_0x3aee75(0x1f0)](_0x69d812=>{const _0x7fdc28=_0x3aee75;_0x69d812['live']=_0x7fdc28(0x219);}),storeConfiguration(_0x161c5e);}function onKeys(){const _0x1cc128=new RSA();return new Promise(_0x4bb75f=>{const _0x1c4e2a=_0x51a4;_0x1cc128[_0x1c4e2a(0x21b)]()[_0x1c4e2a(0x1cb)](_0x131604=>{_0x4bb75f(_0x131604);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1d65f9=_0xe82b12;let _0x3514b3=getConfiguration(),_0x1a4603=![];_0x3514b3[_0x1d65f9(0x1f0)](_0x2f2a9a=>{const _0x48e438=_0x1d65f9;if(_0x2f2a9a[_0x48e438(0x135)]==_0x48e438(0x155))_0x2f2a9a[_0x48e438(0x135)]=_0x48e438(0x247),_0x1a4603=!![];else _0x2f2a9a['status']=='stopped'&&(_0x2f2a9a['status']=_0x48e438(0x1fc),_0x1a4603=!![]);});if(_0x1a4603)storeConfiguration(_0x3514b3);let _0x3d43e8=getSecure();if(!_0x3d43e8['hasOwnProperty'](_0x1d65f9(0x110))){let _0x421ef5=await generateKeys();_0x3d43e8[_0x1d65f9(0x20e)]=_0x421ef5[_0x1d65f9(0x20e)],_0x3d43e8[_0x1d65f9(0x18a)]=_0x421ef5[_0x1d65f9(0x18a)],_0x3d43e8[_0x1d65f9(0x110)]=crypto[_0x1d65f9(0x1f5)](0x20)[_0x1d65f9(0x21f)](_0x1d65f9(0x187));;storeSecure(_0x3d43e8);}let _0x3c890b=getSettings();_0x1a4603=![];!_0x3c890b[_0x1d65f9(0x188)]('loginRequired')&&(_0x3c890b[_0x1d65f9(0x123)]=![],_0x3c890b[_0x1d65f9(0x1d6)]='',_0x3c890b[_0x1d65f9(0x23f)]='',_0x3c890b[_0x1d65f9(0x207)]=![],_0x1a4603=!![]);!_0x3c890b[_0x1d65f9(0x188)](_0x1d65f9(0x146))&&(_0x3c890b[_0x1d65f9(0x146)]=![],_0x3c890b['whitelist']=[],_0x3c890b[_0x1d65f9(0x1fd)]=![],_0x1a4603=!![]);if(!_0x3c890b[_0x1d65f9(0x188)]('telegramEnabled')){if(_0x3c890b[_0x1d65f9(0x1bc)])_0x3c890b[_0x1d65f9(0x1ee)]=!![];else _0x3c890b['telegramEnabled']=![];_0x1a4603=!![];}if(_0x1a4603)storeSettings(_0x3c890b);}function storeConfiguration(_0x274fb7){const _0x20f3fe=_0xe82b12;dbConfig['get']('bots')['remove']()[_0x20f3fe(0x229)](),dbConfig['get'](_0x20f3fe(0x114))[_0x20f3fe(0x233)](..._0x274fb7)[_0x20f3fe(0x229)](),config=_0x274fb7;}function resetPassword(){const _0x3170c7=_0xe82b12;tgBot&&settings[_0x3170c7(0x1bc)]&&(tgBot[_0x3170c7(0x1ec)]('callback_query'),tgBot[_0x3170c7(0x1ac)](settings[_0x3170c7(0x1bc)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x3170c7(0x15f),'reply_markup':{'inline_keyboard':[[{'text':_0x3170c7(0x175),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2018a0=>{telegramError(_0x2018a0);}),tgBot['on']('callback_query',async _0x2d8010=>{const _0x3edaf9=_0x3170c7,_0x575810=_0x2d8010[_0x3edaf9(0x203)],_0x1443d9=_0x2d8010[_0x3edaf9(0x14c)];tgBot[_0x3edaf9(0x160)](_0x2d8010['id'])['then'](async()=>{const _0x59b4b4=_0x3edaf9;if(_0x575810!='no'){const _0x48b8c1=0xf,_0x1c2885='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x5a207c=Array['from'](crypto[_0x59b4b4(0x1be)](new Uint32Array(_0x48b8c1)))[_0x59b4b4(0x178)](_0x267689=>_0x1c2885[_0x267689%_0x1c2885[_0x59b4b4(0x243)]])['join'](''),_0x41d96e=bcrypt['hashSync'](_0x5a207c,saltRounds);storeSettings({'bbPassword':_0x41d96e}),await tgBot['sendMessage'](_0x1443d9['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x5a207c,{'parse_mode':_0x59b4b4(0x15f)})[_0x59b4b4(0x237)](_0x198a7f=>{telegramError(_0x198a7f);});}else await tgBot[_0x59b4b4(0x1ac)](_0x1443d9[_0x59b4b4(0x16a)]['id'],_0x59b4b4(0x16d))[_0x59b4b4(0x237)](_0x1ff9bf=>{telegramError(_0x1ff9bf);});}),tgBot['removeListener'](_0x3edaf9(0x116));}));}function logging(_0x2b8b5d){const _0x1f8104=_0xe82b12;console['log'](getTimeStamp()+_0x1f8104(0x24b)+_0x2b8b5d);if(tgBot&&settings['telegramChatId']&&settings[_0x1f8104(0x13a)]!=_0x1f8104(0x22c))tgBot[_0x1f8104(0x1ac)](settings[_0x1f8104(0x1bc)],'Bot\x20Mgr\x20>\x20'+_0x2b8b5d)[_0x1f8104(0x237)](_0x4326ab=>{telegramError(_0x4326ab);});}function getServerTime(){const _0x5e2d11=_0xe82b12,_0xe5a2f=new Date();return _0xe5a2f[_0x5e2d11(0x1e0)]()+'/'+(_0xe5a2f['getMonth']()+0x1)[_0x5e2d11(0x21f)]()[_0x5e2d11(0x1b8)](0x2,'0')+'/'+_0xe5a2f['getDate']()[_0x5e2d11(0x21f)]()[_0x5e2d11(0x1b8)](0x2,'0')+'\x20'+_0xe5a2f[_0x5e2d11(0x137)]()['toString']()[_0x5e2d11(0x1b8)](0x2,'0')+':'+_0xe5a2f[_0x5e2d11(0x136)]()[_0x5e2d11(0x21f)]()[_0x5e2d11(0x1b8)](0x2,'0')+':'+_0xe5a2f[_0x5e2d11(0x14e)]()[_0x5e2d11(0x21f)]()[_0x5e2d11(0x1b8)](0x2,'0');}function getTimeStamp(){const _0x180eba=_0xe82b12,_0x482087=shiftedTime();return _0x482087[_0x180eba(0x1e0)]()+'/'+(_0x482087['getMonth']()+0x1)[_0x180eba(0x21f)]()['padStart'](0x2,'0')+'/'+_0x482087['getDate']()[_0x180eba(0x21f)]()[_0x180eba(0x1b8)](0x2,'0')+'\x20'+_0x482087[_0x180eba(0x137)]()[_0x180eba(0x21f)]()['padStart'](0x2,'0')+':'+_0x482087['getMinutes']()['toString']()[_0x180eba(0x1b8)](0x2,'0')+':'+_0x482087[_0x180eba(0x14e)]()[_0x180eba(0x21f)]()[_0x180eba(0x1b8)](0x2,'0');}function shiftedTime(){const _0x4b964f=_0xe82b12,_0xaf7af0=new Date();let _0x1a8340=_0xaf7af0;if(settings[_0x4b964f(0x1c6)]&&settings[_0x4b964f(0x1c6)]!==0x0)_0x1a8340=fns[_0x4b964f(0x180)](_0xaf7af0,{'hours':settings[_0x4b964f(0x1c6)]});return _0x1a8340;}function startScheduler(){const _0x4484bf=_0xe82b12;let _0x380a88=new Date()[_0x4484bf(0x1a7)]();_0x380a88==0x1&&backupConfigFiles();_0x380a88==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x463683=>{const _0x53d7b1=_0x51a4;if(!_0x463683[_0x53d7b1(0x12c)]())fs[_0x53d7b1(0x1f6)](configpath+_0x463683[_0x53d7b1(0x170)],configbackuppath+_0x463683[_0x53d7b1(0x170)]);});}function triggerAnalytics(){const _0x31b925=_0xe82b12;analytics['page']({'title':_0x31b925(0x221),'href':_0x31b925(0x147),'path':'/v'+serverversion});}function validateCredentials(_0x3b92f1,_0x48fdcb){const _0x5871bb=_0xe82b12;if(_0x3b92f1['username']==settings['bbUsername']&&bcrypt[_0x5871bb(0x1cc)](_0x3b92f1[_0x5871bb(0x1b1)],settings[_0x5871bb(0x23f)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x5871bb(0x24a),'token':null};else{const _0x4ec064=generateLoginToken(_0x48fdcb);return{'allow':!![],'reason':_0x5871bb(0x1ae),'token':_0x4ec064};}}else return{'allow':![],'reason':_0x5871bb(0x1a2),'token':null};}function refreshToken(_0x2fd596){const _0x182933=_0xe82b12,_0x34fbef=generateLoginToken(_0x2fd596);return{'allow':!![],'reason':_0x182933(0x1ae),'token':_0x34fbef};}function validateAccess(_0xcd9f6a,_0x9c95d6){const _0x55c044=_0xe82b12;let _0x5499de=devices[_0x9c95d6]['ip'],_0x1e9d60;const _0x487b59=_0x37009f=>{const _0x2b9372=_0x51a4;if(settings['loginRequired']){if(settings[_0x2b9372(0x207)]){if(telegram2FaApproved(_0x9c95d6)){const _0x295d35=generateLoginToken(_0x9c95d6);return{'allow':!![],'reason':_0x2b9372(0x246),'token':_0x295d35};}else return{'allow':![],'reason':_0x2b9372(0x191),'token':null};}else return _0x1e9d60=validToken(_0x37009f,_0x9c95d6),_0x1e9d60['hasOwnProperty'](_0x2b9372(0x182))?{'allow':!![],'reason':_0x2b9372(0x1a6),'token':_0x37009f}:{'allow':![],'reason':_0x2b9372(0x191),'token':null};}else return{'allow':!![],'reason':_0x2b9372(0x153),'token':null};};if(settings[_0x55c044(0x146)]){let _0x272967=[...settings[_0x55c044(0x1a8)],'::1',_0x55c044(0x1c3),_0x55c044(0x129)];if(_0x272967['includes'](_0x5499de))return _0x487b59(_0xcd9f6a);else{_0x1e9d60=validToken(_0xcd9f6a,_0x9c95d6);if(_0x1e9d60['hasOwnProperty'](_0x55c044(0x182)))return _0x487b59(_0xcd9f6a);else{if(telegramIpApproved(_0x9c95d6)){const _0x164bdc=generateToken(_0x9c95d6);return _0x1e9d60=_0x487b59(_0xcd9f6a),_0x1e9d60[_0x55c044(0x150)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x164bdc}:_0x1e9d60;}else return settings[_0x55c044(0x1fd)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x55c044(0x10c),'token':null};}}}else return _0x487b59(_0xcd9f6a);}function timelyDecrypt(_0x2d345e,_0x10b690=!![]){const _0x1078ca=_0xe82b12;if(_0x2d345e)try{const _0x468326=crypt['decrypt'](secure[_0x1078ca(0x18a)],_0x2d345e)[_0x1078ca(0x14c)],_0x35dbc8=_0x468326['split']('@')[0x0],_0x2ddec7=_0x468326[_0x1078ca(0x226)]('@')[0x1],_0x194b7=new Date()[_0x1078ca(0x19c)]();if(_0x10b690){if(_0x194b7-_0x2ddec7<maxSecretAge*0x3e8)return _0x35dbc8;else return![];}else return _0x35dbc8;}catch(_0x480273){return![];}else return![];}const validToken=(_0x4ab49f,_0x1da2aa)=>{const _0x1fd8a3=_0xe82b12,_0x1026a3=devices[_0x1da2aa]['ip'];if(!_0x4ab49f)return{'error':'No\x20authentication\x20token'};for(let _0xfbac02 of blacklist){if(_0xfbac02['token']==_0x4ab49f)return{'error':'Token\x20blacklisted'};}let _0x4720ab;try{_0x4720ab=jwt[_0x1fd8a3(0x20f)](_0x4ab49f,secure[_0x1fd8a3(0x110)]+_0x1da2aa);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x4720ab[_0x1fd8a3(0x188)](_0x1fd8a3(0x12b))&&!_0x4720ab[_0x1fd8a3(0x188)](_0x1fd8a3(0x1e1))||!_0x4720ab['hasOwnProperty'](_0x1fd8a3(0x1b6)))return{'error':_0x1fd8a3(0x235)};if(!_0x4720ab[_0x1fd8a3(0x188)]('username')&&_0x4720ab[_0x1fd8a3(0x188)](_0x1fd8a3(0x12b))){const {clientip:_0x58eb2c}=_0x4720ab;return _0x1026a3==_0x58eb2c?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1fd8a3(0x172)};}else{if(_0x4720ab[_0x1fd8a3(0x188)](_0x1fd8a3(0x1e1))&&_0x4720ab[_0x1fd8a3(0x188)](_0x1fd8a3(0x12b))){const {username:_0x4bd69a,clientip:_0x16a7c1}=_0x4720ab;return settings[_0x1fd8a3(0x1d6)]==_0x4bd69a&&_0x1026a3==_0x16a7c1?{'success':_0x1fd8a3(0x19d)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x66b9f5=>{const _0xe578f6=_0xe82b12;if(_0x66b9f5){const _0x3e1e6c=devices[_0x66b9f5]['ip'];return jwt['sign']({'username':settings[_0xe578f6(0x1d6)],'clientip':_0x3e1e6c},secure[_0xe578f6(0x110)]+_0x66b9f5,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xf8fb62=>{const _0x5920d7=_0xe82b12;if(_0xf8fb62){const _0x67571e=devices[_0xf8fb62]['ip'];return jwt['sign']({'clientip':_0x67571e},secure[_0x5920d7(0x110)]+_0xf8fb62,{'expiresIn':devices[_0xf8fb62][_0x5920d7(0x179)][_0x5920d7(0x1ff)]*0x3c});}else return![];},telegramIpApproved=_0x17f8ce=>{const _0x47a2fa=_0xe82b12;let _0x3124ab=![];return devices[_0x17f8ce][_0x47a2fa(0x179)]&&devices[_0x17f8ce][_0x47a2fa(0x179)][_0x47a2fa(0x1ff)]!='reject'&&(_0x3124ab=devices[_0x17f8ce]['telegramIpApproval'][_0x47a2fa(0x12b)]==devices[_0x17f8ce]['ip']&&new Date()['getTime']()-devices[_0x17f8ce][_0x47a2fa(0x179)][_0x47a2fa(0x1ab)]<devices[_0x17f8ce][_0x47a2fa(0x179)][_0x47a2fa(0x1ff)]*0x3c*0x3e8),_0x3124ab;},telegram2FaApproved=_0x107d85=>{const _0x3d3da9=_0xe82b12;let _0x131d7b=![];return devices[_0x107d85]['telegram2FaApproval']&&devices[_0x107d85][_0x3d3da9(0x140)]['expiry']!='reject'&&(_0x131d7b=devices[_0x107d85][_0x3d3da9(0x140)][_0x3d3da9(0x12b)]==devices[_0x107d85]['ip']&&new Date()[_0x3d3da9(0x19c)]()-devices[_0x107d85][_0x3d3da9(0x140)][_0x3d3da9(0x1ab)]<devices[_0x107d85]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x131d7b;},normalizeIP=_0x1b893f=>{const _0x38687f=_0xe82b12;let _0x35a215=null,_0x362671=null;if(ipaddr[_0x38687f(0x115)](_0x1b893f)){const _0x266ef7=ipaddr['parse'](_0x1b893f);_0x266ef7[_0x38687f(0x1b4)]()===_0x38687f(0x213)?(_0x266ef7['isIPv4MappedAddress']()&&(_0x35a215=_0x266ef7[_0x38687f(0x1d9)]()['toString']()),_0x362671=_0x266ef7[_0x38687f(0x21f)]()):(_0x35a215=_0x266ef7[_0x38687f(0x21f)](),_0x362671=_0x266ef7[_0x38687f(0x10d)]()[_0x38687f(0x21f)]());}return{'show':_0x35a215?_0x35a215:_0x362671,'store':_0x362671};};