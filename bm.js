const _0x5b888d=_0x5ae7;(function(_0x1cf876,_0x9fb8d9){const _0x1e7586=_0x5ae7,_0x4af0d9=_0x1cf876();while(!![]){try{const _0x3bf430=-parseInt(_0x1e7586(0x1bf))/0x1+parseInt(_0x1e7586(0x14b))/0x2*(parseInt(_0x1e7586(0x17f))/0x3)+parseInt(_0x1e7586(0x1c9))/0x4*(parseInt(_0x1e7586(0xfe))/0x5)+parseInt(_0x1e7586(0x1da))/0x6*(parseInt(_0x1e7586(0x17e))/0x7)+parseInt(_0x1e7586(0x107))/0x8+-parseInt(_0x1e7586(0x1eb))/0x9*(parseInt(_0x1e7586(0x201))/0xa)+parseInt(_0x1e7586(0xc2))/0xb*(-parseInt(_0x1e7586(0x163))/0xc);if(_0x3bf430===_0x9fb8d9)break;else _0x4af0d9['push'](_0x4af0d9['shift']());}catch(_0x5fd68d){_0x4af0d9['push'](_0x4af0d9['shift']());}}}(_0x4cfe,0x48a7e));const _0x322979=function(){let _0x2bb5a9=!![];return function(_0x17db95,_0x319220){const _0x5d1eb7=_0x2bb5a9?function(){const _0x468f95=_0x5ae7;if(_0x319220){const _0x3f7821=_0x319220[_0x468f95(0xd1)](_0x17db95,arguments);return _0x319220=null,_0x3f7821;}}:function(){};return _0x2bb5a9=![],_0x5d1eb7;};}(),_0x18f6b7=_0x322979(this,function(){const _0x447c49=_0x5ae7;return _0x18f6b7[_0x447c49(0xf7)]()[_0x447c49(0x160)](_0x447c49(0x180))[_0x447c49(0xf7)]()[_0x447c49(0x128)](_0x18f6b7)['search'](_0x447c49(0x180));});_0x18f6b7();'use strict';process['env'][_0x5b888d(0x1b3)]=0x1;const childProcess=require(_0x5b888d(0x1db)),FileSync=require(_0x5b888d(0x1cf)),fs=require('fs'),fns=require(_0x5b888d(0x134)),low=require(_0x5b888d(0x1ba)),path=require(_0x5b888d(0xee)),crypto=require('crypto'),Crypt=require(_0x5b888d(0x15b))[_0x5b888d(0x1c2)],RSA=require(_0x5b888d(0x15b))[_0x5b888d(0x1b4)],bcrypt=require(_0x5b888d(0x18c)),jwt=require(_0x5b888d(0x15e)),analyticsLib=require(_0x5b888d(0xcb))[_0x5b888d(0x155)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x5b888d(0xde)),argv=require(_0x5b888d(0x1a7))(process[_0x5b888d(0xce)]['slice'](0x2))[_0x5b888d(0xce)],PORT=argv['port']||_0x5b888d(0x169),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x5b888d(0x1b2)](_0x5b888d(0x1ec)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x5b888d(0x13b)](0x1);const HOST=argv['host']||null,userID=argv[_0x5b888d(0x19c)]||'';let bbpath=_0x5b888d(0x117),bbpath2='';const botfile=_0x5b888d(0x161),configfile=_0x5b888d(0x1ee),settingsfile=_0x5b888d(0x1a4),securefile=_0x5b888d(0xdd);!fs[_0x5b888d(0x120)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5b888d(0x106)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x5b888d(0x17b),configbackuppath=configpath+'backup/';!fs[_0x5b888d(0x120)](configpath)&&fs[_0x5b888d(0x16e)](configpath);!fs[_0x5b888d(0x120)](configbackuppath)&&fs[_0x5b888d(0x16e)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5b888d(0x138)]({'bots':[]})[_0x5b888d(0x191)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5b888d(0x138)]({'settings':{'timeshift':0x0}})[_0x5b888d(0x191)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5b888d(0x138)]({'secure':{},'blacklist':[]})[_0x5b888d(0x191)]();let crypt=new Crypt({'md':_0x5b888d(0x12d),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5b888d(0x199))[_0x5b888d(0x1f7)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x5b888d(0x1a3)),app=express(),http=require(_0x5b888d(0x1c8))[_0x5b888d(0x1ac)](app);app['use'](express[_0x5b888d(0x193)](path[_0x5b888d(0xcf)](__dirname,bbpath2,_0x5b888d(0x200)))),app[_0x5b888d(0x1c7)](express[_0x5b888d(0x193)](path[_0x5b888d(0xcf)](__dirname,bbpath2,_0x5b888d(0x1d2)))),app[_0x5b888d(0x108)]('/',function(_0x5cdd31,_0x56cc69){const _0x1f344a=_0x5b888d;_0x56cc69['sendFile'](path[_0x1f344a(0xcf)](__dirname,bbpath2,'build2',_0x1f344a(0x147)));}),app['get'](_0x5b888d(0x1fa),function(_0xd45bda,_0x163549){const _0x473fbd=_0x5b888d;_0x163549[_0x473fbd(0x158)](path['join'](__dirname,bbpath2,_0x473fbd(0x1d2),'index.html'));}),app[_0x5b888d(0x108)]('/:bot/portfolio',(_0x242fd9,_0x13372c)=>{const _0x2cbea5=_0x5b888d;_0x13372c[_0x2cbea5(0x158)](path[_0x2cbea5(0xcf)](__dirname,bbpath2,_0x2cbea5(0x1d2),'index.html'));}),app[_0x5b888d(0x108)](_0x5b888d(0x131),(_0x6de1ea,_0x3f55d5)=>{const _0x12fe2c=_0x5b888d;_0x3f55d5['sendFile'](path[_0x12fe2c(0xcf)](__dirname,bbpath2,_0x12fe2c(0x1d2),_0x12fe2c(0x147)));}),app[_0x5b888d(0x108)](_0x5b888d(0x157),(_0x2baefb,_0x171139)=>{const _0x82ccd5=_0x5b888d;_0x171139[_0x82ccd5(0x158)](path[_0x82ccd5(0xcf)](__dirname,bbpath2,'build',_0x82ccd5(0x147)));}),app[_0x5b888d(0x108)]('/:bot/history',(_0x419a42,_0x2c28f2)=>{const _0x4e7786=_0x5b888d;_0x2c28f2[_0x4e7786(0x158)](path[_0x4e7786(0xcf)](__dirname,bbpath2,_0x4e7786(0x1d2),_0x4e7786(0x147)));}),app[_0x5b888d(0x108)](_0x5b888d(0xc3),(_0x5307c2,_0x5b22f1)=>{const _0x4c4cfc=_0x5b888d;_0x5b22f1[_0x4c4cfc(0x158)](path['join'](__dirname,bbpath2,_0x4c4cfc(0x1d2),'index.html'));}),app[_0x5b888d(0x108)](_0x5b888d(0x140),(_0x9c4617,_0x41d5d2)=>{const _0x3d5538=_0x5b888d;_0x41d5d2[_0x3d5538(0x158)](path['join'](__dirname,bbpath2,_0x3d5538(0x1d2),_0x3d5538(0x147)));});if(HOST)http[_0x5b888d(0xd9)](PORT,HOST);else http[_0x5b888d(0xd9)](PORT);const io=require(_0x5b888d(0x156))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x5b888d(0x1b5)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x5b888d(0x14d)]&&settings[_0x5b888d(0x14d)]!=''&&settings[_0x5b888d(0x181)]&&settings[_0x5b888d(0x181)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x41b07a=_0x5b888d;console['log'](''),console[_0x41b07a(0x1b2)](_0x41b07a(0xe4)),logging(_0x41b07a(0x173)+PORT),console[_0x41b07a(0x1b2)]('-----------------------------------------------------------------------------------');if(config[_0x41b07a(0x203)]!=0x0)config[_0x41b07a(0x137)](_0x2f77c3=>{const _0x4f538f=_0x41b07a;if(_0x2f77c3[_0x4f538f(0x109)]==_0x4f538f(0x115)||_0x2f77c3[_0x4f538f(0x109)]==_0x4f538f(0x122))logging(_0x4f538f(0x121)+_0x2f77c3['botID']+'\x20|\x20'+_0x2f77c3['botname']),startBot([_0x2f77c3[_0x4f538f(0x16b)],userID],{'cwd':bbpath},function(_0x180ee8){if(_0x180ee8)logging(_0x180ee8);});else(_0x2f77c3[_0x4f538f(0x109)]==_0x4f538f(0xfa)||_0x2f77c3[_0x4f538f(0x109)]==_0x4f538f(0x1bc))&&logging(_0x4f538f(0x1b7)+_0x2f77c3['botID']+'\x20|\x20'+_0x2f77c3['botname']);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x41b07a(0x1b2)](_0x41b07a(0xe4)),console[_0x41b07a(0x1b2)]('');}function startSocket(){const _0x321c82=_0x5b888d;io['on'](_0x321c82(0x10e),_0x458ebd=>{const _0x1a96cb=_0x321c82;let _0x40089e,_0x487091,_0x26b896,_0x109bef,_0x2ad9e9;const _0x44bf9a=_0x458ebd['handshake'][_0x1a96cb(0x167)]['referer'];_0x487091=_0x44bf9a['match'](/bot[0-9]{3}/);if(_0x487091)_0x26b896=_0x487091[0x0][_0x1a96cb(0x1a2)](/[0-9]{3}/);if(_0x26b896)_0x40089e=_0x26b896[0x0];else _0x40089e=_0x1a96cb(0x105);const _0x192675=_0x458ebd[_0x1a96cb(0x164)]['auth'][_0x1a96cb(0x1ae)];if(!_0x192675)_0x458ebd['emit'](_0x1a96cb(0x109),{'publicKey':secure['publicKey']});else{_0x109bef=timelyDecrypt(_0x192675,![]);if(!_0x109bef)_0x458ebd[_0x1a96cb(0x17a)](_0x1a96cb(0x109),{'publicKey':secure[_0x1a96cb(0x118)]});else{_0x2ad9e9=normalizeIP(_0x458ebd[_0x1a96cb(0x12f)][_0x1a96cb(0x11b)])[_0x1a96cb(0x165)];if(!devices[_0x109bef])devices[_0x109bef]={'uuid':_0x109bef,'access':{'token':null}};devices[_0x109bef]['ip']=_0x2ad9e9;const _0x5349f7=addClient(_0x458ebd['id'],_0x109bef,_0x40089e);setAccess(_0x5349f7),_0x458ebd['on'](_0x1a96cb(0xd2),_0x55c73d=>{const _0x51252b=_0x1a96cb,_0x700840=timelyDecrypt(_0x55c73d[_0x51252b(0x11e)]);if(_0x700840){_0x55c73d={'username':_0x55c73d['username'],'password':_0x700840},devices[_0x109bef][_0x51252b(0xd4)]=validateCredentials(_0x55c73d,_0x109bef);if(devices[_0x109bef][_0x51252b(0xd4)][_0x51252b(0x195)]==![]&&devices[_0x109bef][_0x51252b(0xd4)][_0x51252b(0x18b)]==_0x51252b(0xe7))_0x458ebd[_0x51252b(0x17a)]('status',{'access':devices[_0x109bef]['access']}),loginAccess2FA(_0x109bef,_0x2ad9e9);else{if(devices[_0x109bef]['access'][_0x51252b(0x195)]==![]&&devices[_0x109bef]['access']['reason']==_0x51252b(0xcc))_0x458ebd[_0x51252b(0x17a)](_0x51252b(0x109),{'access':devices[_0x109bef][_0x51252b(0xd4)]});else devices[_0x109bef][_0x51252b(0xd4)]['allow']&&devices[_0x109bef][_0x51252b(0xd4)][_0x51252b(0x18b)]==_0x51252b(0x127)&&(getClientsWithUuid(_0x109bef)[_0x51252b(0x137)](_0x568969=>{setAccess(_0x568969);}),setTokenRefresh(_0x109bef),setSessionTimeout(_0x51252b(0xd2),_0x109bef));}}else logging(_0x51252b(0x16f));}),_0x458ebd['on'](_0x1a96cb(0x1a8),()=>{resetPassword();}),_0x458ebd['on']('disconnect',_0x42c9d1=>{removeClient(_0x458ebd['id']);});}}});}function initClient(_0x2607b5){const _0x13b452=_0x5b888d;if(_0x2607b5!=_0x13b452(0x105)&&config['apiKey']!=''){if(pid[_0x2607b5])pid[_0x2607b5][_0x13b452(0x132)]({'function':_0x13b452(0x1e3),'args':null});}}function getSocket(_0x5d3869){const _0x15a664=_0x5b888d;return io['sockets'][_0x15a664(0xc9)][_0x15a664(0x108)](_0x5d3869);}function setAccess(_0x506064){const _0x351c29=_0x5b888d,_0xec72b7=getSocket(_0x506064['id']),_0xa24cbc=_0x506064[_0x351c29(0x1c4)],_0x4708f9=_0x506064[_0x351c29(0x14a)];devices[_0xa24cbc][_0x351c29(0xd4)]=validateAccess(devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x18a)],_0xa24cbc),_0xec72b7[_0x351c29(0xcf)](_0xa24cbc);if(devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x195)]){_0xec72b7[_0x351c29(0xcf)](_0x4708f9);if(_0x4708f9==_0x351c29(0x105))initializeSocketBotManager(_0xec72b7);else initializeSocketBot(_0xec72b7);initClient(_0x4708f9);}devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x18a)]&&devices[_0xa24cbc][_0x351c29(0xd4)]['reason']==_0x351c29(0xc8)&&setSessionTimeout(_0x351c29(0x123),_0xa24cbc),devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x18a)]&&devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x18b)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x351c29(0xd2),_0xa24cbc),_0xec72b7[_0x351c29(0x17a)]('status',{'status':_0x506064[_0x351c29(0x1aa)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xa24cbc]['access'],'externalip':devices[_0xa24cbc]['ip'],'publicKey':secure[_0x351c29(0x118)]}),devices[_0xa24cbc]['access']['allow']==![]&&devices[_0xa24cbc][_0x351c29(0xd4)][_0x351c29(0x18b)]=='2FA\x20required'&&temporaryAccess2FA(_0xa24cbc,devices[_0xa24cbc]['ip']);}function setSessionTimeout(_0x5c18cb,_0x2cd2d3){const _0x1f9fec=_0x5b888d;let _0x588316;if(_0x5c18cb==_0x1f9fec(0xd2))_0x588316=loginExpiry*0x3c*0x3e8;else _0x588316=devices[_0x2cd2d3][_0x1f9fec(0xe6)][_0x1f9fec(0x136)]*0x3c*0x3e8-(new Date()[_0x1f9fec(0x14f)]()-devices[_0x2cd2d3][_0x1f9fec(0xe6)][_0x1f9fec(0x1d4)]);if(devices[_0x2cd2d3][_0x1f9fec(0x187)])clearTimeout(devices[_0x2cd2d3]['pidExpireLogin']);devices[_0x2cd2d3]['pidExpireLogin']=setTimeout(()=>{const _0x2dab64=_0x1f9fec;if(devices[_0x2cd2d3][_0x2dab64(0x114)])clearTimeout(devices[_0x2cd2d3]['pidRefreshToken']);removeSocketListeners(_0x2cd2d3),addBlacklist(_0x2cd2d3),devices[_0x2cd2d3][_0x2dab64(0xe6)]=null,devices[_0x2cd2d3][_0x2dab64(0xf2)]=null,devices[_0x2cd2d3][_0x2dab64(0xd4)][_0x2dab64(0x18a)]=null,devices[_0x2cd2d3][_0x2dab64(0xd4)]=validateAccess(devices[_0x2cd2d3][_0x2dab64(0xd4)][_0x2dab64(0x18a)],_0x2cd2d3),!(devices[_0x2cd2d3][_0x2dab64(0xd4)][_0x2dab64(0x195)]&&devices[_0x2cd2d3]['access'][_0x2dab64(0x18b)]==_0x2dab64(0x16d))&&(_0x5c18cb==_0x2dab64(0xd2)?io['to'](_0x2cd2d3)[_0x2dab64(0x17a)](_0x2dab64(0x109),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2cd2d3)['emit'](_0x2dab64(0x109),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x2cd2d3][_0x2dab64(0xd4)][_0x2dab64(0x18a)]=null;},_0x588316);}function setTokenRefresh(_0x4f31a6){const _0xf848b6=_0x5b888d;if(devices[_0x4f31a6][_0xf848b6(0x114)])clearTimeout(devices[_0x4f31a6][_0xf848b6(0x114)]);devices[_0x4f31a6][_0xf848b6(0x114)]=setTimeout(()=>{const _0x206e99=_0xf848b6;getClientsWithUuid(_0x4f31a6)['length']!=0x0?(devices[_0x4f31a6]['access']=refreshToken(_0x4f31a6),io['to'](_0x4f31a6)[_0x206e99(0x17a)](_0x206e99(0x109),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4f31a6][_0x206e99(0xd4)],'externalip':devices[_0x4f31a6]['ip'],'publicKey':secure[_0x206e99(0x118)]}),setTokenRefresh(_0x4f31a6)):clearTimeout(devices[_0x4f31a6][_0x206e99(0x114)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x573459){const _0x543820=_0x5b888d,_0x17688a=getClient(_0x573459['id'])[_0x543820(0x1c4)];_0x573459[_0x543820(0x17a)](_0x543820(0x100),config),_0x573459['emit'](_0x543820(0x172),cleanSettings()),_0x573459['on'](_0x543820(0x146),_0x2bbbb3=>{const _0xd7bc65=_0x543820;if(validateAccess(_0x2bbbb3,_0x17688a)[_0xd7bc65(0x195)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x573459['on']('update-bot',(_0x53259d,_0x166e49)=>{const _0x43cd4e=_0x543820;if(validateAccess(_0x166e49,_0x17688a)[_0x43cd4e(0x195)])toggleBot(_0x53259d[_0x43cd4e(0x16b)],_0x53259d[_0x43cd4e(0x109)],_0x53259d[_0x43cd4e(0xe5)]);else logging(_0x43cd4e(0x1ef));}),_0x573459['on'](_0x543820(0xc5),(_0x4dcba3,_0x23bda2)=>{const _0x27d29d=_0x543820;if(validateAccess(_0x23bda2,_0x17688a)[_0x27d29d(0x195)])deleteBot(_0x4dcba3);else logging(_0x27d29d(0x133));}),_0x573459['on'](_0x543820(0x1ab),(_0x50f367,_0xebfb96)=>{if(validateAccess(_0xebfb96,_0x17688a)['allow'])storeSettings(_0x50f367,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x573459['on'](_0x543820(0x145),(_0x4a7e64,_0x446b79)=>{const _0x2262db=_0x543820;if(validateAccess(_0x446b79,_0x17688a)[_0x2262db(0x195)])updateBB();else logging(_0x2262db(0xca));}),_0x573459['on'](_0x543820(0x13d),_0x375b5f=>{const _0x2060f5=_0x543820;if(validateAccess(_0x375b5f,_0x17688a)[_0x2060f5(0x195)]){if(devices[_0x17688a][_0x2060f5(0x114)])clearTimeout(devices[_0x17688a]['pidRefreshToken']);if(devices[_0x17688a][_0x2060f5(0x187)])clearTimeout(devices[_0x17688a][_0x2060f5(0x187)]);removeSocketListeners(getClient(_0x573459['id'])[_0x2060f5(0x1c4)]),addBlacklist(_0x17688a),devices[_0x17688a][_0x2060f5(0xe6)]=null,devices[_0x17688a]['telegram2FaApproval']=null,devices[_0x17688a][_0x2060f5(0xd4)][_0x2060f5(0x18a)]=null,io['to'](getClient(_0x573459['id'])['uuid'])[_0x2060f5(0x17a)](_0x2060f5(0x109),{'access':{'allow':![],'reason':_0x2060f5(0x103),'token':null}});}else logging(_0x2060f5(0xf1));});}function initializeSocketBot(_0x710d79){const _0x20892e=_0x5b888d,_0x56c14f=getClient(_0x710d79['id'])['bot'],_0x409100=getClient(_0x710d79['id'])[_0x20892e(0x1c4)];_0x710d79['on']('get-logs',(_0x19e11d,_0x4a04ee)=>{const _0x4a93c4=_0x20892e;if(validateAccess(_0x4a04ee,_0x409100)['allow']){if(pid[_0x56c14f])pid[_0x56c14f]['send']({'function':_0x4a93c4(0x1e5),'args':_0x19e11d});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x710d79['on'](_0x20892e(0x1af),(_0x18908c,_0x23b58a)=>{const _0x20323d=_0x20892e;if(validateAccess(_0x23b58a,_0x409100)[_0x20323d(0x195)]){if(pid[_0x56c14f])pid[_0x56c14f][_0x20323d(0x132)]({'function':_0x20323d(0xd5),'args':_0x18908c});}else logging(_0x20323d(0x12c));}),_0x710d79['on'](_0x20892e(0x1ff),(_0x3d2be5,_0x5dfaa0)=>{const _0x553640=_0x20892e;if(validateAccess(_0x5dfaa0,_0x409100)[_0x553640(0x195)]){if(pid[_0x56c14f])pid[_0x56c14f][_0x553640(0x132)]({'function':_0x553640(0x1e7),'args':_0x3d2be5});}else logging(_0x553640(0x178));}),_0x710d79['on']('store-headless',(_0x4a65f6,_0x4c48aa)=>{const _0x1d5683=_0x20892e;if(validateAccess(_0x4c48aa,_0x409100)[_0x1d5683(0x195)]){if(pid[_0x56c14f])pid[_0x56c14f][_0x1d5683(0x132)]({'function':_0x1d5683(0x148),'args':_0x4a65f6});}else logging(_0x1d5683(0x1c1));}),_0x710d79['on']('get-starting-balances',_0x42e7bf=>{const _0x2f9cfe=_0x20892e;if(validateAccess(_0x42e7bf,_0x409100)[_0x2f9cfe(0x195)]){if(pid[_0x56c14f])pid[_0x56c14f][_0x2f9cfe(0x132)]({'function':_0x2f9cfe(0x1f2),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x710d79['on'](_0x20892e(0x1ad),(_0x2da519,_0x56dc7d)=>{const _0x58620a=_0x20892e;if(validateAccess(_0x56dc7d,_0x409100)[_0x58620a(0x195)]){if(pid[_0x56c14f])pid[_0x56c14f]['send']({'function':_0x58620a(0x143),'args':_0x2da519});}else logging(_0x58620a(0x10f));}),_0x710d79['on']('cancel-loading',_0x249427=>{const _0x31d5a0=_0x20892e;if(validateAccess(_0x249427,_0x409100)['allow']){if(pid[_0x56c14f])pid[_0x56c14f][_0x31d5a0(0x132)]({'function':'cancelLoading','args':null});}else logging(_0x31d5a0(0x1f5));}),_0x710d79['on'](_0x20892e(0x13d),_0x2f2b0c=>{const _0x5d5207=_0x20892e;if(validateAccess(_0x2f2b0c,_0x409100)[_0x5d5207(0x195)]){if(devices[_0x409100][_0x5d5207(0x114)])clearTimeout(devices[_0x409100][_0x5d5207(0x114)]);if(devices[_0x409100]['pidExpireLogin'])clearTimeout(devices[_0x409100][_0x5d5207(0x187)]);removeSocketListeners(getClient(_0x710d79['id'])[_0x5d5207(0x1c4)]),addBlacklist(_0x409100),devices[_0x409100]['telegramIpApproval']=null,devices[_0x409100][_0x5d5207(0xf2)]=null,devices[_0x409100][_0x5d5207(0xd4)]['token']=null,io['to'](getClient(_0x710d79['id'])[_0x5d5207(0x1c4)])[_0x5d5207(0x17a)](_0x5d5207(0x109),{'access':{'allow':![],'reason':_0x5d5207(0x103),'token':null}});}else logging(_0x5d5207(0xf1));});}function removeSocketListeners(_0x37eb72){const _0x43e0eb=_0x5b888d;getClientsWithUuid(_0x37eb72)[_0x43e0eb(0x137)](_0x71c98b=>{const _0x4fb5a2=_0x43e0eb;getSocket(_0x71c98b['id'])[_0x4fb5a2(0x129)]();});}function cleanSettings(){const _0x449733=_0x5b888d;let _0x50e2c6=settings;return settings[_0x449733(0x14d)]&&settings['telegramToken']!=''&&(_0x50e2c6={..._0x50e2c6,'telegramToken':_0x449733(0x1e6)}),settings[_0x449733(0x18f)]&&settings[_0x449733(0x18f)]!=''&&(_0x50e2c6={..._0x50e2c6,'bbPassword':'************'}),_0x50e2c6;}function updateBB(){const _0x3b8748=_0x5b888d;process[_0x3b8748(0x132)]({'update':!![]},_0x2068e5=>{});}function startBot(_0x5b648e,_0x2e80dc,_0x60e33e){const _0x4287fe=_0x5b888d;let _0x1707da=![];const _0x11c13d=_0x5b648e[0x0];_0x2e80dc={..._0x2e80dc,'stdio':['inherit','inherit',_0x4287fe(0x113),'ipc']},pid[_0x11c13d]=childProcess[_0x4287fe(0xdc)](botfile,_0x5b648e,_0x2e80dc),pid[_0x11c13d]['on'](_0x4287fe(0xfc),_0x164b88=>{const _0x2f3ee4=_0x4287fe;switch(Object[_0x2f3ee4(0x124)](_0x164b88)[0x0]){case _0x2f3ee4(0x1bb):updateBotName(_0x11c13d,_0x164b88['botname']);break;case _0x2f3ee4(0x109):updateStatus(_0x11c13d,_0x164b88[_0x2f3ee4(0x109)]);break;case _0x2f3ee4(0xe5):updateLive(_0x11c13d,_0x164b88[_0x2f3ee4(0xe5)]);break;case _0x2f3ee4(0xf4):updateLive(_0x11c13d,_0x164b88['started']),io['to'](_0x11c13d)[_0x2f3ee4(0x17a)]('status',{'access':{'allow':![],'reason':_0x2f3ee4(0x1cb),'token':null}});break;case _0x2f3ee4(0x130):_0x164b88['stop']=='restart'&&stopBot(_0x11c13d);_0x164b88['stop']==_0x2f3ee4(0x14c)&&toggleBot(_0x11c13d,_0x2f3ee4(0xfa),_0x2f3ee4(0x1c3));break;case _0x2f3ee4(0x190):sendTelegram(_0x11c13d,_0x164b88['telegram']);break;case _0x2f3ee4(0x1f1):io['to'](_0x11c13d)['emit'](_0x164b88[_0x2f3ee4(0x1f1)],_0x164b88['args']);break;}}),pid[_0x11c13d]['on'](_0x4287fe(0x1b9),function(_0x35f0da){if(_0x1707da)return;_0x1707da=!![],_0x60e33e(_0x35f0da);}),pid[_0x11c13d]['on']('exit',function(_0x52f5a3){const _0x575148=_0x4287fe;if(_0x1707da)return;_0x1707da=!![],_0x60e33e(null);const _0x91945e=dbConfig[_0x575148(0x108)](_0x575148(0x100))[_0x575148(0x141)]({'botID':_0x11c13d})[_0x575148(0xe0)]();_0x91945e&&(_0x91945e['status']==_0x575148(0x115)||_0x91945e[_0x575148(0x109)]=='new')&&(updateLive(_0x11c13d,_0x575148(0x1c3)),logging(_0x575148(0x1f4)+_0x11c13d),startBot([_0x11c13d,userID],{'cwd':bbpath},function(_0x6d8c18){if(_0x6d8c18)logging(_0x6d8c18);}));});}function stopBot(_0x50ef78){const _0x24e75c=_0x5b888d;getClientsWithBotID(_0x50ef78)['forEach'](_0x5ca6b7=>{getSocket(_0x5ca6b7['id'])['disconnect'](!![]),removeClient(_0x5ca6b7['id']);});if(pid[_0x50ef78])pid[_0x50ef78][_0x24e75c(0x14c)]();}function addBot(){const _0x24f529=_0x5b888d;let _0x3c896c;for(let _0x61172a=0x1;_0x61172a<0x3e9;_0x61172a++){_0x3c896c=_0x61172a[_0x24f529(0xf7)]()['padStart'](0x3,'0');let _0x38f6f3=config[_0x24f529(0x141)](_0x557091=>_0x557091[_0x24f529(0x16b)]==_0x3c896c);if(!_0x38f6f3)break;}if(_0x3c896c==='1000'){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x24f529(0x182)+_0x3c896c),dbConfig[_0x24f529(0x108)]('bots')[_0x24f529(0x1a6)]({'botID':_0x3c896c,'botname':'Bot\x20'+_0x3c896c,'status':_0x24f529(0x122),'live':''})['write'](),startBot([_0x3c896c,userID],{'cwd':bbpath},function(_0x5074af){if(_0x5074af)logging(_0x5074af);}),config=getConfiguration(),io['to'](_0x24f529(0x105))[_0x24f529(0x17a)](_0x24f529(0x100),config);}function deleteBot(_0x40802d){const _0x3b91cd=_0x5b888d;getClientsWithBotID(_0x40802d)[_0x3b91cd(0x137)](_0xccfa4c=>{const _0x56a8f9=_0x3b91cd;getSocket(_0xccfa4c['id'])[_0x56a8f9(0xf9)](!![]),removeClient(_0xccfa4c['id']);}),dbConfig[_0x3b91cd(0x108)](_0x3b91cd(0x100))['remove']({'botID':_0x40802d})[_0x3b91cd(0x191)](),logging(_0x3b91cd(0xe1)+_0x40802d),stopBot(_0x40802d);try{fs[_0x3b91cd(0x1f6)](path[_0x3b91cd(0xcf)](configpath,_0x3b91cd(0x10c)+_0x40802d+_0x3b91cd(0x1be))),fs[_0x3b91cd(0x1f6)](path[_0x3b91cd(0xcf)](configpath,_0x3b91cd(0x10c)+_0x40802d+_0x3b91cd(0x177))),fs[_0x3b91cd(0x1f6)](path[_0x3b91cd(0xcf)](configpath,'bot-'+_0x40802d+_0x3b91cd(0x196))),fs[_0x3b91cd(0x1f6)](path[_0x3b91cd(0xcf)](configpath,_0x3b91cd(0x10c)+_0x40802d+_0x3b91cd(0x1f9)));}catch(_0x3a5ce8){if(_0x3a5ce8)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x3a5ce8);}config=getConfiguration(),io['to']('botmanager')[_0x3b91cd(0x17a)](_0x3b91cd(0x100),config);}function toggleBot(_0x4f4f74,_0x21703e,_0x539743){const _0x5a80f5=_0x5b888d;dbConfig[_0x5a80f5(0x108)]('bots')['find']({'botID':_0x4f4f74})[_0x5a80f5(0x16c)]({'status':_0x21703e})[_0x5a80f5(0x16c)]({'live':_0x539743})['write']();if(_0x21703e==_0x5a80f5(0x115)||_0x21703e==_0x5a80f5(0x122))logging('enabled\x20Bot\x20'+_0x4f4f74),startBot([_0x4f4f74,userID],{'cwd':bbpath},function(_0xc47946){if(_0xc47946)logging(_0xc47946);});else(_0x21703e=='disabled'||_0x21703e=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x4f4f74),stopBot(_0x4f4f74));config=getConfiguration(),io['to'](_0x5a80f5(0x105))[_0x5a80f5(0x17a)](_0x5a80f5(0x100),config);}function _0x5ae7(_0x48e11d,_0x13d47a){const _0x259859=_0x4cfe();return _0x5ae7=function(_0x18f6b7,_0x322979){_0x18f6b7=_0x18f6b7-0xc2;let _0x4cfe67=_0x259859[_0x18f6b7];return _0x4cfe67;},_0x5ae7(_0x48e11d,_0x13d47a);}function toggleStatus(_0x22b1ff){const _0x124040=_0x5b888d;let _0x1ac989=dbConfig[_0x124040(0x108)](_0x124040(0x100))['find']({'botID':_0x22b1ff})[_0x124040(0xe0)](),_0x1e6aee;if(_0x1ac989['status']===_0x124040(0x115))_0x1e6aee=_0x124040(0xfa);else{if(_0x1ac989[_0x124040(0x109)]===_0x124040(0x122))_0x1e6aee=_0x124040(0x1bc);else{if(_0x1ac989[_0x124040(0x109)]===_0x124040(0x1bc))_0x1e6aee='new';else{if(_0x1ac989['status']===_0x124040(0xfa))_0x1e6aee='enabled';}}}return _0x1e6aee;}function updateStatus(_0x487daf,_0x24fc51){const _0x313647=_0x5b888d;dbConfig[_0x313647(0x108)](_0x313647(0x100))[_0x313647(0x141)]({'botID':_0x487daf})['assign']({'status':_0x24fc51})[_0x313647(0x191)](),config=getConfiguration(),io['to'](_0x313647(0x105))['emit'](_0x313647(0x100),config);}function updateLive(_0x362df6,_0x62d478){const _0x2148fd=_0x5b888d;dbConfig[_0x2148fd(0x108)](_0x2148fd(0x100))[_0x2148fd(0x141)]({'botID':_0x362df6})[_0x2148fd(0x16c)]({'live':_0x62d478})[_0x2148fd(0x191)](),config=getConfiguration(),io['to'](_0x2148fd(0x105))['emit']('bots',config);}function updateBotName(_0x2c7539,_0x5d4a5a){const _0x8f0ca4=_0x5b888d;dbConfig['get'](_0x8f0ca4(0x100))[_0x8f0ca4(0x141)]({'botID':_0x2c7539})[_0x8f0ca4(0x16c)]({'botname':_0x5d4a5a})[_0x8f0ca4(0x191)](),config=getConfiguration(),io['to'](_0x8f0ca4(0x105))[_0x8f0ca4(0x17a)](_0x8f0ca4(0x100),config);}function telegramError(_0x39c5d1){const _0x195108=_0x5b888d;console[_0x195108(0x1b2)](getTimeStamp()+_0x195108(0x1f8));}function validateTelegram(_0x3496b7){const _0x2a3c5c=_0x5b888d;if(_0x3496b7[_0x2a3c5c(0x111)][_0x2a3c5c(0x1a5)]!=settings[_0x2a3c5c(0x181)]&&'@'+_0x3496b7[_0x2a3c5c(0x111)][_0x2a3c5c(0x1a5)]!=settings[_0x2a3c5c(0x181)])return tgBot[_0x2a3c5c(0x12b)](_0x3496b7[_0x2a3c5c(0xd8)]['id'],_0x2a3c5c(0x1d9),{'parse_mode':_0x2a3c5c(0x1c6)})[_0x2a3c5c(0x1de)](_0x3808d7=>{telegramError(_0x3808d7);}),![];return!![];}async function initTelegram(){const _0x2df0ce=_0x5b888d;if(tgBot)tgBot[_0x2df0ce(0xe9)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2df0ce(0x14d)],{'polling':!![]});let _0x2d1176='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x2d1176+='\x0a',_0x2d1176+=_0x2df0ce(0x11a),_0x2d1176+=_0x2df0ce(0x125),_0x2d1176+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2d1176+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2d1176+=_0x2df0ce(0xff),_0x2d1176+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2d1176+=_0x2df0ce(0x1fe),_0x2d1176+=_0x2df0ce(0x198);let _0x47c135=_0x2df0ce(0x194);_0x47c135+='\x0a',_0x47c135+=_0x2d1176,tgBot[_0x2df0ce(0xed)](/\/start/,_0x1c93fd=>{const _0x3df11c=_0x2df0ce;if(!validateTelegram(_0x1c93fd))return;if(settings[_0x3df11c(0x186)]!=_0x1c93fd['chat']['id'])updateSetting(_0x3df11c(0x186),_0x1c93fd[_0x3df11c(0xd8)]['id']);updateSetting(_0x3df11c(0x1f3),!![]),tgBot['sendMessage'](_0x1c93fd[_0x3df11c(0xd8)]['id'],_0x47c135)[_0x3df11c(0x1de)](_0x48c51a=>{telegramError(_0x48c51a);});}),tgBot[_0x2df0ce(0xed)](/\/enable/,_0x18abfc=>{const _0x594e42=_0x2df0ce;if(!validateTelegram(_0x18abfc))return;if(settings['telegramChatId']!=_0x18abfc[_0x594e42(0xd8)]['id'])updateSetting('telegramChatId',_0x18abfc[_0x594e42(0xd8)]['id']);updateSetting(_0x594e42(0x1f3),!![]),tgBot[_0x594e42(0x12b)](_0x18abfc[_0x594e42(0xd8)]['id'],_0x594e42(0x10d))['catch'](_0x401255=>{telegramError(_0x401255);});}),tgBot[_0x2df0ce(0xed)](/\/config/,async _0xacc708=>{const _0x10e4c0=_0x2df0ce;if(!validateTelegram(_0xacc708))return;tgBot[_0x10e4c0(0x1ce)](_0x10e4c0(0x15d)),tgBot[_0x10e4c0(0x12b)](_0xacc708[_0x10e4c0(0xd8)]['id'],_0x10e4c0(0x150),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x10e4c0(0x175)},{'text':_0x10e4c0(0x142),'callback_data':_0x10e4c0(0x104)},{'text':'All','callback_data':'all'}]]}})[_0x10e4c0(0x1de)](_0x41ce33=>{telegramError(_0x41ce33);}),tgBot['on'](_0x10e4c0(0x15d),async _0x47902b=>{const _0x199ca8=_0x10e4c0,_0x584e5c=_0x47902b[_0x199ca8(0x171)],_0x59e003=_0x47902b[_0x199ca8(0xfc)];tgBot['answerCallbackQuery'](_0x47902b['id'])[_0x199ca8(0x15c)](async()=>{const _0x22616a=_0x199ca8;_0x584e5c==_0x22616a(0x175)&&(updateSetting(_0x22616a(0x1fb),_0x22616a(0x175)),updateSetting(_0x22616a(0x1f3),!![]),await tgBot[_0x22616a(0x12b)](_0x59e003['chat']['id'],_0x22616a(0x184))[_0x22616a(0x1de)](_0xcd70f6=>{telegramError(_0xcd70f6);}));_0x584e5c==_0x22616a(0x104)&&(updateSetting(_0x22616a(0x1fb),_0x22616a(0x104)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x59e003[_0x22616a(0xd8)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x22616a(0x1de)](_0xbe82b3=>{telegramError(_0xbe82b3);}));_0x584e5c==_0x22616a(0x185)&&(updateSetting(_0x22616a(0x1fb),'all'),updateSetting(_0x22616a(0x1f3),!![]),await tgBot['sendMessage'](_0x59e003[_0x22616a(0xd8)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x4a5a3d=>{telegramError(_0x4a5a3d);}));if(!settings[_0x22616a(0x186)])tgBot['sendMessage'](_0x59e003[_0x22616a(0xd8)]['id'],_0x22616a(0x176))[_0x22616a(0x1de)](_0x565340=>{telegramError(_0x565340);});}),tgBot[_0x199ca8(0x1ce)](_0x199ca8(0x15d));});}),tgBot[_0x2df0ce(0xed)](/\/status/,_0x4a9056=>{const _0x5ad107=_0x2df0ce;if(!validateTelegram(_0x4a9056))return;let _0x42cd3d=_0x5ad107(0x11f);config[_0x5ad107(0x137)](_0x1c1e81=>{const _0x2938bb=_0x5ad107;_0x42cd3d+=_0x2938bb(0xf8)+_0x1c1e81[_0x2938bb(0x16b)]+_0x2938bb(0x1e4)+_0x1c1e81[_0x2938bb(0x1bb)]+':\x20'+_0x1c1e81[_0x2938bb(0x109)]+'\x20/\x20'+_0x1c1e81['live']+'\x0a';}),_0x42cd3d+='\x0a',_0x42cd3d+=_0x5ad107(0x1e1),_0x42cd3d+=!settings[_0x5ad107(0x1f3)]?'Notifications\x20disabled\x0a':_0x5ad107(0x149),_0x42cd3d+=settings[_0x5ad107(0x1f3)]?settings[_0x5ad107(0x1fb)]==_0x5ad107(0x185)?_0x5ad107(0x13e):_0x5ad107(0x126)+settings[_0x5ad107(0x1fb)]+_0x5ad107(0x1ed):'',tgBot[_0x5ad107(0x12b)](_0x4a9056[_0x5ad107(0xd8)]['id'],_0x42cd3d,{'parse_mode':_0x5ad107(0x1c6)})[_0x5ad107(0x1de)](_0x7a7e59=>{telegramError(_0x7a7e59);});}),tgBot['onText'](/\/restart/,_0x597e35=>{const _0x3adc43=_0x2df0ce;if(!validateTelegram(_0x597e35))return;tgBot[_0x3adc43(0x1ce)](_0x3adc43(0x15d));const _0x269282=getEnabledBots();if(_0x269282[_0x3adc43(0x203)]==0x0)tgBot['sendMessage'](_0x597e35[_0x3adc43(0xd8)]['id'],_0x3adc43(0x18e))[_0x3adc43(0x1de)](_0x35e607=>{telegramError(_0x35e607);});else{if(_0x269282[_0x3adc43(0x203)]>0x1)_0x269282['push']({'botID':'all'});let _0x73c19d=[],_0xaa1c2c=[];const _0x406cfb=_0x269282['length']%0x4==0x0||_0x269282['length']%0x4==0x3||_0x269282[_0x3adc43(0x203)]%0x3==0x1?0x4:0x3;let _0x1bf819=0x0;_0x269282[_0x3adc43(0x137)]((_0x4b743d,_0x491e95)=>{const _0x530129=_0x3adc43;if(_0x491e95%_0x406cfb==0x0)_0xaa1c2c=[];_0xaa1c2c[_0x530129(0x1a6)]({'text':_0x4b743d[_0x530129(0x16b)]==_0x530129(0x185)?_0x530129(0x13c):_0x530129(0xf8)+_0x4b743d['botID'],'callback_data':_0x4b743d['botID']}),_0x491e95%_0x406cfb==0x0&&(_0x73c19d[_0x1bf819]=_0xaa1c2c,_0x1bf819++);}),tgBot[_0x3adc43(0x12b)](_0x597e35['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x73c19d}})[_0x3adc43(0x1de)](_0x16d070=>{telegramError(_0x16d070);}),tgBot['on'](_0x3adc43(0x15d),async _0x287d64=>{const _0x25fae2=_0x3adc43,_0x56da1c=_0x287d64[_0x25fae2(0x171)],_0x59697a=_0x287d64[_0x25fae2(0xfc)];tgBot[_0x25fae2(0x1fd)](_0x287d64['id'])['then'](async()=>{const _0x560294=_0x25fae2;if(_0x56da1c==_0x560294(0x185)){if(settings[_0x560294(0x1fb)]==_0x560294(0x175))tgBot[_0x560294(0x12b)](_0x59697a['chat']['id'],_0x560294(0x1df))[_0x560294(0x1de)](_0x246d06=>{telegramError(_0x246d06);});config[_0x560294(0x137)](_0x11fdee=>{const _0x1cf65a=_0x560294;stopBot(_0x11fdee[_0x1cf65a(0x16b)]);});}else{if(settings[_0x560294(0x1fb)]==_0x560294(0x175))tgBot[_0x560294(0x12b)](_0x59697a[_0x560294(0xd8)]['id'],_0x560294(0x102)+_0x56da1c)[_0x560294(0x1de)](_0x56dca9=>{telegramError(_0x56dca9);});stopBot(_0x56da1c);}}),tgBot[_0x25fae2(0x1ce)]('callback_query');});}}),tgBot[_0x2df0ce(0xed)](/\/on/,_0x1caeb9=>{const _0x5675b9=_0x2df0ce;if(!validateTelegram(_0x1caeb9))return;tgBot['removeListener'](_0x5675b9(0x15d));const _0x310279=getDisabledBots();if(_0x310279[_0x5675b9(0x203)]==0x0)tgBot[_0x5675b9(0x12b)](_0x1caeb9[_0x5675b9(0xd8)]['id'],_0x5675b9(0x12a))[_0x5675b9(0x1de)](_0x3a876d=>{telegramError(_0x3a876d);});else{if(_0x310279['length']>0x1)_0x310279[_0x5675b9(0x1a6)]({'botID':_0x5675b9(0x185)});let _0x538cf5=[],_0x578290=[];const _0x5d0287=_0x310279['length']%0x4==0x0||_0x310279['length']%0x4==0x3||_0x310279[_0x5675b9(0x203)]%0x3==0x1?0x4:0x3;let _0x556bf8=0x0;_0x310279[_0x5675b9(0x137)]((_0x16921,_0x5625a9)=>{const _0x4fb203=_0x5675b9;if(_0x5625a9%_0x5d0287==0x0)_0x578290=[];_0x578290['push']({'text':_0x16921[_0x4fb203(0x16b)]==_0x4fb203(0x185)?_0x4fb203(0x13c):_0x4fb203(0xf8)+_0x16921[_0x4fb203(0x16b)],'callback_data':_0x16921['botID']}),_0x5625a9%_0x5d0287==0x0&&(_0x538cf5[_0x556bf8]=_0x578290,_0x556bf8++);}),tgBot[_0x5675b9(0x12b)](_0x1caeb9[_0x5675b9(0xd8)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x538cf5}})[_0x5675b9(0x1de)](_0x2d4635=>{telegramError(_0x2d4635);}),tgBot['on'](_0x5675b9(0x15d),async _0x4e681a=>{const _0x514872=_0x5675b9,_0x5b12c2=_0x4e681a[_0x514872(0x171)],_0x23cbc1=_0x4e681a[_0x514872(0xfc)];tgBot[_0x514872(0x1fd)](_0x4e681a['id'])[_0x514872(0x15c)](async()=>{const _0x18484d=_0x514872;if(_0x5b12c2==_0x18484d(0x185)){if(settings['telegramEvents']==_0x18484d(0x175))tgBot['sendMessage'](_0x23cbc1[_0x18484d(0xd8)]['id'],_0x18484d(0xd0))[_0x18484d(0x1de)](_0x1bb964=>{telegramError(_0x1bb964);});_0x310279[_0x18484d(0x137)](_0x7ac002=>{const _0x270fb8=_0x18484d;if(_0x7ac002[_0x270fb8(0x16b)]!=_0x270fb8(0x185))toggleBot(_0x7ac002[_0x270fb8(0x16b)],toggleStatus(_0x7ac002[_0x270fb8(0x16b)]),'stopped');});}else{if(settings[_0x18484d(0x1fb)]=='orders')tgBot[_0x18484d(0x12b)](_0x23cbc1[_0x18484d(0xd8)]['id'],_0x18484d(0x13f)+_0x5b12c2)[_0x18484d(0x1de)](_0x4558bb=>{telegramError(_0x4558bb);});toggleBot(_0x5b12c2,toggleStatus(_0x5b12c2),_0x18484d(0x1c3));}}),tgBot[_0x514872(0x1ce)](_0x514872(0x15d));});}}),tgBot[_0x2df0ce(0xed)](/\/off/,_0x3c05e2=>{const _0x359990=_0x2df0ce;if(!validateTelegram(_0x3c05e2))return;tgBot['removeListener'](_0x359990(0x15d));const _0x439cd5=getEnabledBots();if(_0x439cd5[_0x359990(0x203)]==0x0)tgBot['sendMessage'](_0x3c05e2[_0x359990(0xd8)]['id'],_0x359990(0x18e))[_0x359990(0x1de)](_0x46693a=>{telegramError(_0x46693a);});else{if(_0x439cd5['length']>0x1)_0x439cd5[_0x359990(0x1a6)]({'botID':'all'});let _0x47e1ea=[],_0x147b02=[];const _0x6d5339=_0x439cd5[_0x359990(0x203)]%0x4==0x0||_0x439cd5[_0x359990(0x203)]%0x4==0x3||_0x439cd5[_0x359990(0x203)]%0x3==0x1?0x4:0x3;let _0x3467=0x0;_0x439cd5['forEach']((_0x1d48fa,_0x1fdb73)=>{const _0x18c347=_0x359990;if(_0x1fdb73%_0x6d5339==0x0)_0x147b02=[];_0x147b02[_0x18c347(0x1a6)]({'text':_0x1d48fa['botID']==_0x18c347(0x185)?_0x18c347(0x13c):'Bot\x20'+_0x1d48fa[_0x18c347(0x16b)],'callback_data':_0x1d48fa[_0x18c347(0x16b)]}),_0x1fdb73%_0x6d5339==0x0&&(_0x47e1ea[_0x3467]=_0x147b02,_0x3467++);}),tgBot[_0x359990(0x12b)](_0x3c05e2[_0x359990(0xd8)]['id'],_0x359990(0xf6),{'reply_markup':{'inline_keyboard':_0x47e1ea}})['catch'](_0x50adcc=>{telegramError(_0x50adcc);}),tgBot['on']('callback_query',async _0x1f3188=>{const _0x2511d2=_0x359990,_0x4440e6=_0x1f3188['data'],_0x1dd26e=_0x1f3188['message'];tgBot['answerCallbackQuery'](_0x1f3188['id'])[_0x2511d2(0x15c)](async()=>{const _0x2ab7f6=_0x2511d2;if(_0x4440e6==_0x2ab7f6(0x185)){if(settings[_0x2ab7f6(0x1fb)]==_0x2ab7f6(0x175))tgBot[_0x2ab7f6(0x12b)](_0x1dd26e[_0x2ab7f6(0xd8)]['id'],_0x2ab7f6(0x14e))[_0x2ab7f6(0x1de)](_0x2d7efa=>{telegramError(_0x2d7efa);});_0x439cd5['forEach'](_0x1b1007=>{const _0x954511=_0x2ab7f6;if(_0x1b1007[_0x954511(0x16b)]!='all')toggleBot(_0x1b1007[_0x954511(0x16b)],toggleStatus(_0x1b1007['botID']),_0x954511(0x1c3));});}else{if(settings[_0x2ab7f6(0x1fb)]=='orders')tgBot[_0x2ab7f6(0x12b)](_0x1dd26e[_0x2ab7f6(0xd8)]['id'],_0x2ab7f6(0x19b)+_0x4440e6)[_0x2ab7f6(0x1de)](_0x12dc86=>{telegramError(_0x12dc86);});toggleBot(_0x4440e6,toggleStatus(_0x4440e6),_0x2ab7f6(0x1c3));}}),tgBot[_0x2511d2(0x1ce)](_0x2511d2(0x15d));});}}),tgBot['onText'](/\/disable/,_0x384ea3=>{const _0x5aadbe=_0x2df0ce;if(!validateTelegram(_0x384ea3))return;tgBot[_0x5aadbe(0x12b)](_0x384ea3[_0x5aadbe(0xd8)]['id'],'Notifications\x20disabled')[_0x5aadbe(0x1de)](_0x4dff2b=>{telegramError(_0x4dff2b);}),updateSetting(_0x5aadbe(0x1f3),![]);}),tgBot['onText'](/\/help/,_0x983b13=>{const _0x31c100=_0x2df0ce;if(!validateTelegram(_0x983b13))return;tgBot[_0x31c100(0x12b)](_0x983b13['chat']['id'],_0x2d1176)[_0x31c100(0x1de)](_0x454ddf=>{telegramError(_0x454ddf);});}),tgBot['on'](_0x2df0ce(0x170),_0x337d65=>{const _0x4822c8=_0x2df0ce;_0x337d65[_0x4822c8(0xf7)]()[_0x4822c8(0x15a)]('404\x20Not\x20Found')&&(logging(_0x4822c8(0x159)),tgBot[_0x4822c8(0xe9)](),tgBot=null,io['to'](_0x4822c8(0x105))['emit'](_0x4822c8(0xc7),_0x4822c8(0x159)));}),process[_0x2df0ce(0x1d7)](_0x2df0ce(0xeb),()=>{const _0xf32d12=_0x2df0ce;if(tgBot)tgBot[_0xf32d12(0xe9)]();process[_0xf32d12(0x13b)](0x1);}),process['once'](_0x2df0ce(0x1dd),()=>{const _0x401609=_0x2df0ce;if(tgBot)tgBot[_0x401609(0xe9)]();process[_0x401609(0x13b)](0x1);});}}function disableTelegram(){const _0x4c9c6f=_0x5b888d;tgBot&&(tgBot[_0x4c9c6f(0xe9)](),tgBot=null);}function sendTelegram(_0x3ca265,_0x4747f8){const _0x4adaf2=_0x5b888d;if(settings[_0x4adaf2(0x1f3)]){if(settings[_0x4adaf2(0x1fb)]==_0x4adaf2(0x185)||(_0x4747f8[_0x4adaf2(0x1dc)]==_0x4adaf2(0x1b9)||_0x4747f8[_0x4adaf2(0x1dc)]==_0x4adaf2(0x1d6))&&settings[_0x4adaf2(0x1fb)]=='alerts'||_0x4747f8[_0x4adaf2(0x1dc)]==_0x4adaf2(0x119)&&settings[_0x4adaf2(0x1fb)]==_0x4adaf2(0x175)){if(tgBot&&settings['telegramChatId']){if(_0x4747f8[_0x4adaf2(0x1cc)])tgBot[_0x4adaf2(0x12b)](settings[_0x4adaf2(0x186)],_0x4747f8[_0x4adaf2(0x1bb)]+_0x4adaf2(0xd3)+_0x4747f8[_0x4adaf2(0x1a9)])[_0x4adaf2(0x1de)](_0x1af52c=>{telegramError(_0x1af52c);});else tgBot[_0x4adaf2(0x12b)](settings[_0x4adaf2(0x186)],'Bot\x20'+_0x3ca265+_0x4adaf2(0xd3)+_0x4747f8['event'])['catch'](_0x3d6e3f=>{telegramError(_0x3d6e3f);});}}}}function getDeviceWithIp(_0x537019){return devices['find'](_0x474d83=>_0x474d83['ip']===_0x537019);}function temporaryAccess2FA(_0x2a7be1,_0x561b4d){const _0x5b77cc=_0x5b888d;let _0x58fb73=new Date(),_0x17ca34=![];if(lastIpApproval){if(_0x58fb73-lastIpApproval<0x1388)_0x17ca34=!![];}lastIpApproval=new Date();if(_0x17ca34)return;tgBot&&settings[_0x5b77cc(0x186)]&&(tgBot[_0x5b77cc(0x1ce)](_0x5b77cc(0x15d)),tgBot['sendMessage'](settings[_0x5b77cc(0x186)],_0x5b77cc(0xda)+normalizeIP(_0x561b4d)[_0x5b77cc(0x1b1)]+_0x5b77cc(0x1d1),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5b77cc(0x154),'callback_data':'5'},{'text':_0x5b77cc(0xec),'callback_data':'15'},{'text':_0x5b77cc(0x1e8),'callback_data':'30'},{'text':_0x5b77cc(0x1bd),'callback_data':_0x5b77cc(0x1bd)}]]}})[_0x5b77cc(0x1de)](_0x52a454=>{telegramError(_0x52a454);}),tgBot['on'](_0x5b77cc(0x15d),async _0xa8ce61=>{const _0xbec2fa=_0x5b77cc,_0x2e685f=_0xa8ce61[_0xbec2fa(0x171)],_0x28b242=_0xa8ce61['message'];tgBot['answerCallbackQuery'](_0xa8ce61['id'])[_0xbec2fa(0x15c)](async()=>{const _0x22ddd5=_0xbec2fa;devices[_0x2a7be1]['telegramIpApproval']={'clientip':_0x561b4d,'timestamp':new Date()[_0x22ddd5(0x14f)](),'expiry':_0x2e685f},_0x2e685f!=_0x22ddd5(0x1bd)?(await tgBot[_0x22ddd5(0x12b)](_0x28b242[_0x22ddd5(0xd8)]['id'],_0x22ddd5(0x19e)+_0x2e685f+_0x22ddd5(0x1b8),{'parse_mode':_0x22ddd5(0x1c6)})[_0x22ddd5(0x1de)](_0xc83025=>{telegramError(_0xc83025);}),io['to'](_0x2a7be1)['emit'](_0x22ddd5(0x109),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x22ddd5(0x12b)](_0x28b242[_0x22ddd5(0xd8)]['id'],_0x22ddd5(0x1e0))[_0x22ddd5(0x1de)](_0x5e684f=>{telegramError(_0x5e684f);}),io['to'](_0x2a7be1)['emit'](_0x22ddd5(0x109),{'access':{'allow':![],'reason':_0x22ddd5(0x15f),'token':null}}));}),tgBot['removeListener'](_0xbec2fa(0x15d));}));}function loginAccess2FA(_0x3a6426,_0x1bd525){const _0x56dd55=_0x5b888d;tgBot&&settings[_0x56dd55(0x186)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x56dd55(0x12b)](settings[_0x56dd55(0x186)],_0x56dd55(0x116)+normalizeIP(_0x1bd525)[_0x56dd55(0x1b1)]+_0x56dd55(0x1d1),{'parse_mode':_0x56dd55(0x1c6),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x56dd55(0x1bd),'callback_data':_0x56dd55(0x1bd)}]]}})[_0x56dd55(0x1de)](_0x3cbfc3=>{telegramError(_0x3cbfc3);}),tgBot['on'](_0x56dd55(0x15d),async _0x2b4286=>{const _0xdf9548=_0x56dd55,_0x6ff19c=_0x2b4286['data'],_0x499ec2=_0x2b4286[_0xdf9548(0xfc)];tgBot[_0xdf9548(0x1fd)](_0x2b4286['id'])[_0xdf9548(0x15c)](async()=>{const _0x41a4ce=_0xdf9548;devices[_0x3a6426]['telegram2FaApproval']={'clientip':_0x1bd525,'timestamp':new Date()['getTime'](),'expiry':_0x6ff19c},_0x6ff19c!=_0x41a4ce(0x1bd)?(await tgBot['sendMessage'](_0x499ec2[_0x41a4ce(0xd8)]['id'],_0x41a4ce(0x183),{'parse_mode':_0x41a4ce(0x1c6)})[_0x41a4ce(0x1de)](_0x4ff2a8=>{telegramError(_0x4ff2a8);}),io['to'](_0x3a6426)[_0x41a4ce(0x17a)]('status',{'access':{'allow':![],'reason':_0x41a4ce(0x1cb),'token':null}})):(await tgBot[_0x41a4ce(0x12b)](_0x499ec2[_0x41a4ce(0xd8)]['id'],_0x41a4ce(0x192))[_0x41a4ce(0x1de)](_0x358932=>{telegramError(_0x358932);}),io['to'](_0x3a6426)[_0x41a4ce(0x17a)](_0x41a4ce(0x109),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0xdf9548(0x15d));}));}function getConfiguration(){const _0x838db5=_0x5b888d;return dbConfig[_0x838db5(0x108)](_0x838db5(0x100))[_0x838db5(0x13a)](_0x838db5(0x16b))[_0x838db5(0xe0)]()||[];}function getEnabledBots(){const _0xbb5be5=_0x5b888d;return dbConfig['get']('bots')[_0xbb5be5(0x13a)]('botID')[_0xbb5be5(0x16a)]({'status':_0xbb5be5(0x115)})['value']()||[];}function getDisabledBots(){const _0xa57f7c=_0x5b888d;return dbConfig[_0xa57f7c(0x108)](_0xa57f7c(0x100))[_0xa57f7c(0x13a)](_0xa57f7c(0x16b))['filter']({'status':'disabled'})['value']()||[];}function getSettings(){const _0x562898=_0x5b888d;return dbSettings[_0x562898(0x108)](_0x562898(0x172))[_0x562898(0xe0)]()||{'timeshift':0x0};}function getSecure(){const _0x1d0bd0=_0x5b888d;return dbSecure[_0x1d0bd0(0x108)]('secure')[_0x1d0bd0(0xe0)]()||{};}function getBlacklist(){const _0xfbd5d5=_0x5b888d;return dbSecure[_0xfbd5d5(0x108)](_0xfbd5d5(0x10a))[_0xfbd5d5(0xe0)]()||[];}function broadcastToBots(_0x3efe96,_0x4a2bce){const _0x2753f3=_0x5b888d;config[_0x2753f3(0x137)](_0xf6b5d2=>{const _0x4168ea=_0x2753f3;if(_0xf6b5d2[_0x4168ea(0x109)]==_0x4168ea(0x115)&&_0xf6b5d2[_0x4168ea(0xe5)]==_0x4168ea(0x151)){if(pid[_0xf6b5d2['botID']])pid[_0xf6b5d2['botID']][_0x4168ea(0x132)]({[_0x3efe96]:_0x4a2bce});}});}function storeSettings(_0x21c8f7,_0x3a29fe=![]){const _0x29a6de=_0x5b888d;_0x21c8f7={...settings,..._0x21c8f7};if(_0x3a29fe&&_0x21c8f7['bbPassword']!=_0x29a6de(0x1e6)&&_0x21c8f7[_0x29a6de(0x18f)]!=''){const _0x297f2a=crypt[_0x29a6de(0x197)](secure[_0x29a6de(0xc4)],_0x21c8f7['bbPassword'])[_0x29a6de(0xfc)][_0x29a6de(0x1a0)]('@')[0x0],_0x1b1d10=bcrypt[_0x29a6de(0x162)](_0x297f2a,saltRounds);_0x21c8f7={..._0x21c8f7,'bbPassword':_0x1b1d10};}if(_0x3a29fe&&_0x21c8f7[_0x29a6de(0x14d)]!=_0x29a6de(0x1e6)&&_0x21c8f7[_0x29a6de(0x14d)]!=''){const _0x53cedc=crypt[_0x29a6de(0x197)](secure['privateKey'],_0x21c8f7[_0x29a6de(0x14d)])[_0x29a6de(0xfc)][_0x29a6de(0x1a0)]('@')[0x0];_0x21c8f7={..._0x21c8f7,'telegramToken':_0x53cedc};}const _0x3c42f3=_0x21c8f7['telegramToken']!=_0x29a6de(0x1e6)&&_0x21c8f7[_0x29a6de(0x14d)]!=settings[_0x29a6de(0x14d)]||_0x21c8f7[_0x29a6de(0x181)]!=settings['telegramUsername'],_0x28fdeb=_0x21c8f7[_0x29a6de(0x14d)]==''||_0x21c8f7[_0x29a6de(0x181)]=='';if(_0x3c42f3)_0x21c8f7[_0x29a6de(0x1fb)]=_0x29a6de(0x185);for(const [_0x370d15,_0x43cc42]of Object['entries'](_0x21c8f7)){if(_0x370d15==_0x29a6de(0x14d)&&_0x43cc42==_0x29a6de(0x1e6)){_0x21c8f7[_0x29a6de(0x14d)]=settings[_0x29a6de(0x14d)];continue;};if(_0x370d15==_0x29a6de(0x18f)&&_0x43cc42=='************'){_0x21c8f7[_0x29a6de(0x18f)]=settings[_0x29a6de(0x18f)];continue;};dbSettings[_0x29a6de(0x19d)](_0x29a6de(0xfb)+_0x370d15,_0x43cc42)[_0x29a6de(0x191)]();}settings=_0x21c8f7,io['to']('botmanager')[_0x29a6de(0x17a)]('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x29a6de(0xfd)]);if(_0x3c42f3&&!_0x28fdeb)initTelegram();if(_0x3c42f3&&_0x28fdeb)disableTelegram();getAllClients()['forEach'](_0x86abad=>{const _0x1ee5a5=_0x29a6de;getSocket(_0x86abad['id'])[_0x1ee5a5(0x17a)]('status',{'access':{'allow':![],'reason':_0x1ee5a5(0x1cb),'token':null}});});}function updateSetting(_0x449d2d,_0x34ea6c){const _0x1d4a5a=_0x5b888d;dbSettings[_0x1d4a5a(0x19d)](_0x1d4a5a(0xfb)+_0x449d2d,_0x34ea6c)['write'](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0x58dab3){const _0x13106c=_0x5b888d;dbSecure[_0x13106c(0x108)](_0x13106c(0xd6))[_0x13106c(0x1a6)](_0x58dab3)[_0x13106c(0x191)](),secure=_0x58dab3;}function addBlacklist(_0x3a56a7){const _0xb56f4a=_0x5b888d;cleanBlacklist();let _0x3b0301;devices[_0x3a56a7][_0xb56f4a(0xe6)]?_0x3b0301=Math[_0xb56f4a(0x152)](devices[_0x3a56a7][_0xb56f4a(0xe6)][_0xb56f4a(0x136)],loginExpiry):_0x3b0301=loginExpiry,dbSecure['get'](_0xb56f4a(0x10a))['push']({'expiry':new Date()['getTime']()+_0x3b0301*0x3c*0x3e8,'token':devices[_0x3a56a7][_0xb56f4a(0xd4)]['token']})[_0xb56f4a(0x191)](),blacklist=dbSecure[_0xb56f4a(0x108)]('blacklist')[_0xb56f4a(0xe0)]();}function cleanBlacklist(){const _0x1ad991=_0x5b888d;let _0x10a964=dbSecure[_0x1ad991(0x108)](_0x1ad991(0x10a))[_0x1ad991(0x1f0)]()[_0x1ad991(0xe0)](),_0x4df1f2=new Date()['getTime']();_0x10a964[_0x1ad991(0x137)](_0x327e0f=>{const _0x2992db=_0x1ad991;_0x327e0f[_0x2992db(0x136)]<_0x4df1f2&&dbSecure['get'](_0x2992db(0x10a))['remove']({'expiry':_0x327e0f[_0x2992db(0x136)]})[_0x2992db(0x191)]();});}function initStates(){const _0x105083=_0x5b888d;let _0x446aa6=getConfiguration();_0x446aa6[_0x105083(0x137)](_0x227b46=>{const _0x752919=_0x105083;_0x227b46[_0x752919(0xe5)]=_0x752919(0x1c3);}),storeConfiguration(_0x446aa6);}function onKeys(){const _0x413e74=new RSA();return new Promise(_0x27a283=>{const _0x1b0e2a=_0x5ae7;_0x413e74[_0x1b0e2a(0xc6)]()['then'](_0x2a0da8=>{_0x27a283(_0x2a0da8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2d75ba=_0x5b888d;let _0x5a1b8c=getConfiguration(),_0x4631c6=![];_0x5a1b8c[_0x2d75ba(0x137)](_0x52ff47=>{const _0x592050=_0x2d75ba;if(_0x52ff47['status']==_0x592050(0x151))_0x52ff47[_0x592050(0x109)]=_0x592050(0x115),_0x4631c6=!![];else _0x52ff47['status']==_0x592050(0x1c3)&&(_0x52ff47[_0x592050(0x109)]=_0x592050(0xfa),_0x4631c6=!![]);});if(_0x4631c6)storeConfiguration(_0x5a1b8c);let _0x1a3d84=getSecure();if(!_0x1a3d84['hasOwnProperty'](_0x2d75ba(0xd7))){let _0x4dbd7a=await generateKeys();_0x1a3d84[_0x2d75ba(0x118)]=_0x4dbd7a[_0x2d75ba(0x118)],_0x1a3d84[_0x2d75ba(0xc4)]=_0x4dbd7a[_0x2d75ba(0xc4)],_0x1a3d84[_0x2d75ba(0xd7)]=crypto[_0x2d75ba(0xf0)](0x20)['toString'](_0x2d75ba(0x1cd));;storeSecure(_0x1a3d84);}let _0xb4c939=getSettings();_0x4631c6=![];!_0xb4c939['hasOwnProperty'](_0x2d75ba(0x1ea))&&(_0xb4c939['loginRequired']=![],_0xb4c939[_0x2d75ba(0x101)]='',_0xb4c939['bbPassword']='',_0xb4c939[_0x2d75ba(0x135)]=![],_0x4631c6=!![]);!_0xb4c939[_0x2d75ba(0x18d)](_0x2d75ba(0x19f))&&(_0xb4c939['whitelistEnabled']=![],_0xb4c939[_0x2d75ba(0x202)]=[],_0xb4c939[_0x2d75ba(0x11d)]=![],_0x4631c6=!![]);if(!_0xb4c939['hasOwnProperty'](_0x2d75ba(0x1f3))){if(_0xb4c939[_0x2d75ba(0x186)])_0xb4c939['telegramEnabled']=!![];else _0xb4c939[_0x2d75ba(0x1f3)]=![];_0x4631c6=!![];}if(_0x4631c6)storeSettings(_0xb4c939);}function storeConfiguration(_0x5074e9){const _0x5dbcb4=_0x5b888d;dbConfig['get'](_0x5dbcb4(0x100))[_0x5dbcb4(0x179)]()[_0x5dbcb4(0x191)](),dbConfig[_0x5dbcb4(0x108)]('bots')[_0x5dbcb4(0x1a6)](..._0x5074e9)[_0x5dbcb4(0x191)](),config=_0x5074e9;}function resetPassword(){const _0x5daf28=_0x5b888d;tgBot&&settings[_0x5daf28(0x186)]&&(tgBot['removeListener'](_0x5daf28(0x15d)),tgBot[_0x5daf28(0x12b)](settings[_0x5daf28(0x186)],_0x5daf28(0x12e),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5daf28(0x166),'callback_data':_0x5daf28(0x166)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x3ed918=>{telegramError(_0x3ed918);}),tgBot['on'](_0x5daf28(0x15d),async _0x43cb91=>{const _0x292d07=_0x5daf28,_0x175cfc=_0x43cb91[_0x292d07(0x171)],_0x15d4d2=_0x43cb91[_0x292d07(0xfc)];tgBot[_0x292d07(0x1fd)](_0x43cb91['id'])[_0x292d07(0x15c)](async()=>{const _0x38bab4=_0x292d07;if(_0x175cfc!='no'){const _0x45542b=0xf,_0x25e71d=_0x38bab4(0x1b6),_0x3a3a4d=Array[_0x38bab4(0x111)](crypto[_0x38bab4(0x11c)](new Uint32Array(_0x45542b)))[_0x38bab4(0xdf)](_0x34c13c=>_0x25e71d[_0x34c13c%_0x25e71d['length']])['join'](''),_0xf59a1=bcrypt[_0x38bab4(0x162)](_0x3a3a4d,saltRounds);storeSettings({'bbPassword':_0xf59a1}),await tgBot[_0x38bab4(0x12b)](_0x15d4d2[_0x38bab4(0xd8)]['id'],_0x38bab4(0x10b)+_0x3a3a4d,{'parse_mode':_0x38bab4(0x1c6)})[_0x38bab4(0x1de)](_0x37d5fc=>{telegramError(_0x37d5fc);});}else await tgBot['sendMessage'](_0x15d4d2[_0x38bab4(0xd8)]['id'],_0x38bab4(0x1e9))[_0x38bab4(0x1de)](_0x3b3e4f=>{telegramError(_0x3b3e4f);});}),tgBot[_0x292d07(0x1ce)](_0x292d07(0x15d));}));}function logging(_0x244169){const _0x56a791=_0x5b888d;console['log'](getTimeStamp()+_0x56a791(0x188)+_0x244169);if(tgBot&&settings[_0x56a791(0x186)]&&settings[_0x56a791(0x1fb)]!=_0x56a791(0x175))tgBot['sendMessage'](settings[_0x56a791(0x186)],'Bot\x20Mgr\x20>\x20'+_0x244169)[_0x56a791(0x1de)](_0x246f6d=>{telegramError(_0x246f6d);});}function getServerTime(){const _0x529f34=_0x5b888d,_0xb49e3=new Date();return _0xb49e3[_0x529f34(0xef)]()+'/'+(_0xb49e3[_0x529f34(0x17c)]()+0x1)[_0x529f34(0xf7)]()[_0x529f34(0xcd)](0x2,'0')+'/'+_0xb49e3[_0x529f34(0x1fc)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xb49e3['getHours']()['toString']()[_0x529f34(0xcd)](0x2,'0')+':'+_0xb49e3[_0x529f34(0x1c0)]()[_0x529f34(0xf7)]()['padStart'](0x2,'0')+':'+_0xb49e3[_0x529f34(0x1d3)]()[_0x529f34(0xf7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x174029=_0x5b888d,_0x4c7229=shiftedTime();return _0x4c7229[_0x174029(0xef)]()+'/'+(_0x4c7229[_0x174029(0x17c)]()+0x1)[_0x174029(0xf7)]()[_0x174029(0xcd)](0x2,'0')+'/'+_0x4c7229[_0x174029(0x1fc)]()[_0x174029(0xf7)]()[_0x174029(0xcd)](0x2,'0')+'\x20'+_0x4c7229[_0x174029(0x1a1)]()[_0x174029(0xf7)]()[_0x174029(0xcd)](0x2,'0')+':'+_0x4c7229['getMinutes']()[_0x174029(0xf7)]()[_0x174029(0xcd)](0x2,'0')+':'+_0x4c7229['getSeconds']()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x5e19c7=_0x5b888d,_0x3432c9=new Date();let _0x166b30=_0x3432c9;if(settings['timeshift']&&settings[_0x5e19c7(0xfd)]!==0x0)_0x166b30=fns[_0x5e19c7(0x1ca)](_0x3432c9,{'hours':settings[_0x5e19c7(0xfd)]});return _0x166b30;}function startScheduler(){let _0x171542=new Date()['getUTCHours']();_0x171542==0x1&&backupConfigFiles();_0x171542==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function _0x4cfe(){const _0x6087d8=['Invalid\x20username\x20or\x20IP\x20address','</b>\x20?','build','getSeconds','timestamp','Balance\x20Bot\x20Server','success','once','Invalid\x20IP\x20address','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','6xkjRkF','child_process','type','SIGTERM','catch','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Temporary\x20access\x20rejected','<b>Telegram\x20bot\x20status:</b>\x0a','Invalid\x20authentication\x20token\x20(1)','initclient','\x20|\x20','emitHistory','************','storeConfiguration','30\x20min','Password\x20reset\x20rejected','loginRequired','25542EGutMw','Error:\x20Invalid\x20argument\x20','\x20only\x0a','bb-config.json','Unauthorized\x20attempt\x20to\x20update\x20bot','cloneDeep','function','getStartingBalances','telegramEnabled','restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','unlinkSync','version',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','-results.json','/:bot','telegramEvents','getDate','answerCallbackQuery','/status\x20-\x20show\x20bot(s)\x20status\x0a','store-configuration','build2','270JdVBKe','whitelist','length','ipv6','179905mIuWCH','/:bot/configuration','privateKey','delete-bot','generateKeyPairAsync','notification','temporary\x20token\x20generated','sockets','Unauthorized\x20attempt\x20to\x20update\x20settings','analytics','invalid\x20credentials','padStart','argv','join','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','apply','login','\x20>\x20','access','getPortfolio','secure','secret','chat','listen','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','copyFileSync','fork','bb-secure.json','ipaddr.js','map','value','deleted\x20Bot\x20','clientip','User\x20has\x20been\x20validated','-----------------------------------------------------------------------------------','live','telegramIpApproval','2FA\x20login\x20required','toIPv4MappedAddress','stopPolling','isDirectory','SIGINT','15\x20min','onText','path','getFullYear','randomBytes','Unauthorized\x20attempt\x20to\x20log\x20out','telegram2FaApproval','Token\x20blacklisted','started','temporary\x20access\x20not\x20allowed','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','toString','Bot\x20','disconnect','disabled','settings.','message','timeshift','5OqjHsD','/on\x20-\x20start\x20bot(s)\x0a','bots','bbUsername','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','logged\x20out','alerts','botmanager','clients','3393496iLAqRO','get','status','blacklist','Password\x20has\x20been\x20reset\x20to:\x20','bot-','Notifications\x20enabled','connection','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','exp','from','isIPv4MappedAddress','inherit','pidRefreshToken','enabled','Allow\x20login\x20from\x20IP\x20address\x20<b>','bb/','publicKey','order','/enable\x20-\x20enable\x20notifications\x0a','remoteAddress','randomFillSync','temporaryAccessAllowed','password','<b>Balance\x20Bot\x20status:</b>\x0a','existsSync','starting\x20bot\x20|\x20Bot\x20','new','2FA','keys','/disable\x20-\x20disable\x20notifications\x0a','Notifications\x20types:\x20','login\x20token\x20generated','constructor','removeAllListeners','All\x20bots\x20running\x20right\x20now','sendMessage','Unauthorized\x20attempt\x20to\x20get\x20portfolio','sha256','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','conn','stop','/:bot/performance','send','Unauthorized\x20attempt\x20to\x20delete\x20bot','date-fns','f2aRequired','expiry','forEach','defaults','readdirSync','sortBy','exit','All\x20bots','logout','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','/:bot/support','find','Alerts','placeOrder','page','update-bb','add-bot','index.html','storeHeadless','Notifications\x20enabled\x0a','bot','2nBZRxr','kill','telegramToken','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','getTime','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','running','max','login\x20required','5\x20min','default','socket.io','/:bot/coins','sendFile','Invalid\x20Telegram\x20token','includes','hybrid-crypto-js','then','callback_query','jsonwebtoken','temporary\x20access\x20rejected','search','bot.js','hashSync','588dEudbD','handshake','store','yes','headers','No\x20authentication\x20token','3000','filter','botID','assign','login\x20not\x20required','mkdirSync','Unauthorized\x20login\x20attempt\x20(timeout)','polling_error','data','settings','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','toIPv4Address','orders','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','-events.json','Unauthorized\x20attempt\x20to\x20store\x20configuration','remove','emit','config/','getMonth','sign','3177797vDjTmg','1445814FLuuQj','(((.+)+)+)+$','telegramUsername','starting\x20new\x20bot\x20|\x20Bot\x20','Login\x20accepted','Ok,\x20will\x20send\x20order\x20notifications\x20only','all','telegramChatId','pidExpireLogin',':\x20Bot\x20Mgr\x20>\x20','2FA\x20required','token','reason','bcryptjs','hasOwnProperty','No\x20bots\x20running\x20right\x20now','bbPassword','telegram','write','Login\x20rejected','static','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','allow','-performance.json','decrypt','/help\x20-\x20show\x20available\x20commands\x0a','version.json','compareSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','user','set','Access\x20enabled\x20for\x20','whitelistEnabled','split','getHours','match','express','bb-settings.json','username','push','yargs/yargs','reset-password','event','server','store-settings','createServer','place-order','encryptedUuid','get-portfolio','kind','show','log','NTBA_FIX_319','RSA','UA-192771731-1','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','idling\x20bot\x20\x20\x20|\x20Bot\x20','\x20minutes','error','lowdb','botname','new-disabled','reject','-config.json','526046tWMdeO','getMinutes','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Crypt','stopped','uuid','isValid','HTML','use','http','1366276UdJIZh','add','reload','showname','hex','removeListener','lowdb/adapters/FileSync'];_0x4cfe=function(){return _0x6087d8;};return _0x4cfe();}function backupConfigFiles(){const _0xf89cb5=_0x5b888d;fs[_0xf89cb5(0x139)](configpath,{'withFileTypes':!![]})['forEach'](_0x33294f=>{const _0x33f91f=_0xf89cb5;if(!_0x33294f[_0x33f91f(0xea)]())fs[_0x33f91f(0xdb)](configpath+_0x33294f['name'],configbackuppath+_0x33294f['name']);});}function triggerAnalytics(){const _0x35ec14=_0x5b888d;analytics[_0x35ec14(0x144)]({'title':_0x35ec14(0x1d5),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x27f8df,_0xb99019){const _0x30ecf3=_0x5b888d;if(_0x27f8df[_0x30ecf3(0x1a5)]==settings[_0x30ecf3(0x101)]&&bcrypt[_0x30ecf3(0x19a)](_0x27f8df[_0x30ecf3(0x11e)],settings[_0x30ecf3(0x18f)])){if(settings[_0x30ecf3(0x135)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0xa71ace=generateLoginToken(_0xb99019);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xa71ace};}}else return{'allow':![],'reason':_0x30ecf3(0xcc),'token':null};}function refreshToken(_0x3d5e26){const _0xb30b27=_0x5b888d,_0x17f408=generateLoginToken(_0x3d5e26);return{'allow':!![],'reason':_0xb30b27(0x127),'token':_0x17f408};}function validateAccess(_0x4cf72d,_0x34ed43){const _0x53fb20=_0x5b888d;let _0x337f5e=devices[_0x34ed43]['ip'],_0xb94fd4;const _0x2c4e2d=_0x1af4c5=>{const _0x3bb46=_0x5ae7;if(settings['loginRequired']){if(settings[_0x3bb46(0x135)]){if(telegram2FaApproved(_0x34ed43)){const _0x4963b4=generateLoginToken(_0x34ed43);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x4963b4};}else return{'allow':![],'reason':_0x3bb46(0x153),'token':null};}else return _0xb94fd4=validToken(_0x1af4c5,_0x34ed43),_0xb94fd4[_0x3bb46(0x18d)](_0x3bb46(0x1d6))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1af4c5}:{'allow':![],'reason':_0x3bb46(0x153),'token':null};}else return{'allow':!![],'reason':_0x3bb46(0x16d),'token':null};};if(settings['whitelistEnabled']){let _0x55675e=[...settings[_0x53fb20(0x202)],'::1','::ffff:127.0.0.1','127.0.0.1'];if(_0x55675e[_0x53fb20(0x15a)](_0x337f5e))return _0x2c4e2d(_0x4cf72d);else{_0xb94fd4=validToken(_0x4cf72d,_0x34ed43);if(_0xb94fd4[_0x53fb20(0x18d)](_0x53fb20(0x1d6)))return _0x2c4e2d(_0x4cf72d);else{if(telegramIpApproved(_0x34ed43)){const _0x4f4ad1=generateToken(_0x34ed43);return _0xb94fd4=_0x2c4e2d(_0x4cf72d),_0xb94fd4[_0x53fb20(0x195)]?{'allow':!![],'reason':_0x53fb20(0xc8),'token':_0x4f4ad1}:_0xb94fd4;}else return settings[_0x53fb20(0x11d)]?{'allow':![],'reason':_0x53fb20(0x189),'token':null}:{'allow':![],'reason':_0x53fb20(0xf5),'token':null};}}}else return _0x2c4e2d(_0x4cf72d);}function timelyDecrypt(_0x2229b3,_0x56398a=!![]){const _0x33c7bd=_0x5b888d;if(_0x2229b3)try{const _0x28ffbe=crypt[_0x33c7bd(0x197)](secure[_0x33c7bd(0xc4)],_0x2229b3)[_0x33c7bd(0xfc)],_0x316d15=_0x28ffbe[_0x33c7bd(0x1a0)]('@')[0x0],_0x18cb1a=_0x28ffbe[_0x33c7bd(0x1a0)]('@')[0x1],_0x52de95=new Date()[_0x33c7bd(0x14f)]();if(_0x56398a){if(_0x52de95-_0x18cb1a<maxSecretAge*0x3e8)return _0x316d15;else return![];}else return _0x316d15;}catch(_0x4b4f95){return![];}else return![];}const validToken=(_0x6b634f,_0x490b89)=>{const _0x1006a2=_0x5b888d,_0x4b6536=devices[_0x490b89]['ip'];if(!_0x6b634f)return{'error':_0x1006a2(0x168)};for(let _0xd1b0c9 of blacklist){if(_0xd1b0c9['token']==_0x6b634f)return{'error':_0x1006a2(0xf3)};}let _0x35e64d;try{_0x35e64d=jwt['verify'](_0x6b634f,secure[_0x1006a2(0xd7)]+_0x490b89);}catch{return{'error':_0x1006a2(0x1e2)};}if(!_0x35e64d[_0x1006a2(0x18d)](_0x1006a2(0xe2))&&!_0x35e64d[_0x1006a2(0x18d)]('username')||!_0x35e64d[_0x1006a2(0x18d)](_0x1006a2(0x110)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x35e64d[_0x1006a2(0x18d)]('username')&&_0x35e64d['hasOwnProperty'](_0x1006a2(0xe2))){const {clientip:_0x1018e4}=_0x35e64d;return _0x4b6536==_0x1018e4?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1006a2(0x1d8)};}else{if(_0x35e64d['hasOwnProperty'](_0x1006a2(0x1a5))&&_0x35e64d[_0x1006a2(0x18d)](_0x1006a2(0xe2))){const {username:_0x35c4c5,clientip:_0xb3c42}=_0x35e64d;return settings['bbUsername']==_0x35c4c5&&_0x4b6536==_0xb3c42?{'success':_0x1006a2(0xe3)}:{'error':_0x1006a2(0x1d0)};}}},generateLoginToken=_0x136e0e=>{const _0x436a89=_0x5b888d;if(_0x136e0e){const _0x475aaf=devices[_0x136e0e]['ip'];return jwt[_0x436a89(0x17d)]({'username':settings[_0x436a89(0x101)],'clientip':_0x475aaf},secure['secret']+_0x136e0e,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x311b56=>{const _0x348811=_0x5b888d;if(_0x311b56){const _0x5e1aad=devices[_0x311b56]['ip'];return jwt[_0x348811(0x17d)]({'clientip':_0x5e1aad},secure['secret']+_0x311b56,{'expiresIn':devices[_0x311b56][_0x348811(0xe6)][_0x348811(0x136)]*0x3c});}else return![];},telegramIpApproved=_0x16efbf=>{const _0x2ad58b=_0x5b888d;let _0x44a8ac=![];return devices[_0x16efbf][_0x2ad58b(0xe6)]&&devices[_0x16efbf][_0x2ad58b(0xe6)][_0x2ad58b(0x136)]!=_0x2ad58b(0x1bd)&&(_0x44a8ac=devices[_0x16efbf]['telegramIpApproval'][_0x2ad58b(0xe2)]==devices[_0x16efbf]['ip']&&new Date()['getTime']()-devices[_0x16efbf][_0x2ad58b(0xe6)][_0x2ad58b(0x1d4)]<devices[_0x16efbf]['telegramIpApproval'][_0x2ad58b(0x136)]*0x3c*0x3e8),_0x44a8ac;},telegram2FaApproved=_0x591b59=>{const _0x4d79f1=_0x5b888d;let _0x2a6884=![];return devices[_0x591b59][_0x4d79f1(0xf2)]&&devices[_0x591b59][_0x4d79f1(0xf2)][_0x4d79f1(0x136)]!='reject'&&(_0x2a6884=devices[_0x591b59][_0x4d79f1(0xf2)][_0x4d79f1(0xe2)]==devices[_0x591b59]['ip']&&new Date()[_0x4d79f1(0x14f)]()-devices[_0x591b59][_0x4d79f1(0xf2)]['timestamp']<devices[_0x591b59][_0x4d79f1(0xf2)][_0x4d79f1(0x136)]*0x3c*0x3e8),_0x2a6884;},normalizeIP=_0x2c1e7c=>{const _0x2b3fae=_0x5b888d;let _0x5ecb76=null,_0x18e7e0=null;if(ipaddr[_0x2b3fae(0x1c5)](_0x2c1e7c)){const _0x1d9c70=ipaddr['parse'](_0x2c1e7c);_0x1d9c70[_0x2b3fae(0x1b0)]()===_0x2b3fae(0x204)?(_0x1d9c70[_0x2b3fae(0x112)]()&&(_0x5ecb76=_0x1d9c70[_0x2b3fae(0x174)]()['toString']()),_0x18e7e0=_0x1d9c70[_0x2b3fae(0xf7)]()):(_0x5ecb76=_0x1d9c70['toString'](),_0x18e7e0=_0x1d9c70[_0x2b3fae(0xe8)]()[_0x2b3fae(0xf7)]());}return{'show':_0x5ecb76?_0x5ecb76:_0x18e7e0,'store':_0x18e7e0};};