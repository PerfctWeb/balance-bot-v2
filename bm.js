const _0x4f06e4=_0x2358;(function(_0x54f217,_0x503df4){const _0x9f6910=_0x2358,_0x66e7df=_0x54f217();while(!![]){try{const _0xe6ab39=parseInt(_0x9f6910(0x116))/0x1+-parseInt(_0x9f6910(0xe3))/0x2*(parseInt(_0x9f6910(0x112))/0x3)+-parseInt(_0x9f6910(0x2a6))/0x4*(parseInt(_0x9f6910(0xf1))/0x5)+parseInt(_0x9f6910(0xe0))/0x6+parseInt(_0x9f6910(0x139))/0x7+parseInt(_0x9f6910(0x228))/0x8+parseInt(_0x9f6910(0x16c))/0x9*(parseInt(_0x9f6910(0x136))/0xa);if(_0xe6ab39===_0x503df4)break;else _0x66e7df['push'](_0x66e7df['shift']());}catch(_0x3455ca){_0x66e7df['push'](_0x66e7df['shift']());}}}(_0xae96,0x7c7ac));const _0x58b44d=function(){let _0x39f78c=!![];return function(_0x29e7be,_0x5d8031){const _0x205111=_0x39f78c?function(){const _0x2f8bb7=_0x2358;if(_0x5d8031){const _0x17243d=_0x5d8031[_0x2f8bb7(0x2aa)](_0x29e7be,arguments);return _0x5d8031=null,_0x17243d;}}:function(){};return _0x39f78c=![],_0x205111;};}(),_0x2e3b27=_0x58b44d(this,function(){const _0x2d82cd=_0x2358;return _0x2e3b27[_0x2d82cd(0x202)]()['search']('(((.+)+)+)+$')[_0x2d82cd(0x202)]()[_0x2d82cd(0x2d8)](_0x2e3b27)[_0x2d82cd(0x1ad)](_0x2d82cd(0x215));});_0x2e3b27();'use strict';process['env'][_0x4f06e4(0xe2)]=0x1;const childProcess=require(_0x4f06e4(0x294)),fs=require('fs'),fns=require(_0x4f06e4(0x23c)),low=require(_0x4f06e4(0xec)),FileSync=require(_0x4f06e4(0xf5)),path=require(_0x4f06e4(0x12a)),crypto=require(_0x4f06e4(0xff)),forge=require(_0x4f06e4(0xe4)),bcrypt=require(_0x4f06e4(0x22c)),jwt=require(_0x4f06e4(0x12b)),ipaddr=require('ipaddr.js'),argv=require(_0x4f06e4(0x234))(process[_0x4f06e4(0x243)]['slice'](0x2))[_0x4f06e4(0x243)],uuidRandom=require(_0x4f06e4(0x266)),{Telegraf,Markup}=require(_0x4f06e4(0x298)),Mixpanel=require(_0x4f06e4(0x1fe)),axios=require(_0x4f06e4(0x118)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x4f06e4(0x2bf)),fileUpload=require(_0x4f06e4(0x1c8)),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x4f06e4(0xde)]||_0x4f06e4(0x273),pattern=/^[0-9]{2,4}$/;!pattern[_0x4f06e4(0x175)](PORT)&&(console[_0x4f06e4(0x192)](_0x4f06e4(0x2bb)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x4f06e4(0x2b7)](0x1));const HOST=argv['host']||null,userID=argv[_0x4f06e4(0x22a)]||'',debugging=argv['d']||![],nodeversion=process[_0x4f06e4(0x153)][_0x4f06e4(0x275)];let bbpath=_0x4f06e4(0x237),bbpath2='';const botfile=_0x4f06e4(0x179),configfile='bb-config.json',settingsfile=_0x4f06e4(0x2ad),securefile=_0x4f06e4(0x2c2),environment=require('./'+bbpath2+_0x4f06e4(0x184))[_0x4f06e4(0x27e)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x4f06e4(0x1da)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4f06e4(0x12e)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x4f06e4(0x2a2),configbackuppath=configpath+_0x4f06e4(0x1bb),logspath=userID?bbpath+_0x4f06e4(0x240)+userID+'/':bbpath+_0x4f06e4(0x240),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x4f06e4(0x22b)](logspath+_0x4f06e4(0x272),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x4f06e4(0x236);!fs[_0x4f06e4(0x1da)](configpath)&&fs[_0x4f06e4(0x2be)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4f06e4(0x2be)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x4f06e4(0x1da)](zippath)&&fs[_0x4f06e4(0x2be)](zippath);!fs[_0x4f06e4(0x1da)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4f06e4(0xda)]({'bots':[]})[_0x4f06e4(0x268)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4f06e4(0xda)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4f06e4(0x1a7),'onepagemode':![],'marketcapApi':''}})[_0x4f06e4(0x268)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4f06e4(0xda)]({'secure':{},'blacklist':[]})[_0x4f06e4(0x268)]();const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x4f06e4(0x18a)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x4f06e4(0x122)]&&(settings['telegramToken']!=''&&settings[_0x4f06e4(0x122)]!='***')&&settings['telegramUsername']&&settings[_0x4f06e4(0x19b)]!='')initTelegram();const parseColor=(_0x416f94,_0xf0a09)=>{const _0x120a6f=_0x4f06e4,_0x27b8a5=/#[A-Z]{3}#/g;if(typeof _0x416f94==_0x120a6f(0x2da)){!_0xf0a09?_0x416f94=_0x416f94[_0x120a6f(0x2e1)](_0x27b8a5,''):(_0x416f94=_0x416f94[_0x120a6f(0x2e1)](/#BLU#/g,'\x1b[34m'),_0x416f94=_0x416f94[_0x120a6f(0x2e1)](/#RED#/g,_0x120a6f(0x14e)),_0x416f94=_0x416f94[_0x120a6f(0x2e1)](/#YEL#/g,_0x120a6f(0x24b)),_0x416f94=_0x416f94['replace'](/#MAG#/g,'\x1b[35m'),_0x416f94=_0x416f94[_0x120a6f(0x2e1)](/#CYA#/g,_0x120a6f(0x1b8)),_0x416f94=_0x416f94['replace'](/#RES#/g,_0x120a6f(0x160)));;}return _0x416f94;},logger={'screen':_0x41b442=>{const _0x372c50=_0x4f06e4;console[_0x372c50(0x192)](parseColor(_0x41b442,!![]));},'simple':_0x51a398=>{const _0x4ce774=_0x4f06e4;console[_0x4ce774(0x192)](parseColor(_0x51a398,!![])),loggerfile[_0x4ce774(0x268)](util[_0x4ce774(0xe5)](parseColor(_0x51a398,![]))+'\x0a');},'full':async _0x21b896=>{const _0x389f1f=_0x4f06e4,_0x1b258d=getTimeStamp()+_0x389f1f(0x1a3)+_0x21b896;console['log'](parseColor(_0x1b258d,!![])),loggerfile[_0x389f1f(0x268)](util[_0x389f1f(0xe5)](parseColor(_0x1b258d,![]))+'\x0a');if(tgBot&&settings[_0x389f1f(0x248)]&&settings['telegramEvents']!=_0x389f1f(0x1c0))await sendTelegram(settings['telegramChatId'],_0x389f1f(0x16a)+parseColor(_0x21b896,![]));},'debug':async(_0x1a0f5f,_0x5d127f='')=>{const _0x4dcb10=_0x4f06e4,_0x5c5a53=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x1a0f5f;if(debugging)console[_0x4dcb10(0x192)](parseColor(_0x5c5a53,!![]));loggerfile[_0x4dcb10(0x268)](util[_0x4dcb10(0xe5)](parseColor(_0x5c5a53,![]))+'\x0a');if(_0x5d127f){if(debugging)console['log'](_0x5d127f);loggerfile[_0x4dcb10(0x268)](util[_0x4dcb10(0xe5)](_0x5d127f)+'\x0a');}}};let terminating=![];function _0x2358(_0x54a5dc,_0x56a6be){const _0x12a158=_0xae96();return _0x2358=function(_0x2e3b27,_0x58b44d){_0x2e3b27=_0x2e3b27-0xd8;let _0xae962d=_0x12a158[_0x2e3b27];return _0xae962d;},_0x2358(_0x54a5dc,_0x56a6be);}process['on']('uncaughtException',function(_0x1f5c0d){const _0x395ca2=_0x4f06e4;_0x1f5c0d[_0x395ca2(0x202)]()[_0x395ca2(0x187)]('address\x20already\x20in\x20use')?(logger[_0x395ca2(0x13f)](_0x395ca2(0x10a)+_0x1f5c0d[_0x395ca2(0xde)]+'#RES#'),process[_0x395ca2(0x290)]({'terminate':!![]},_0x4b4b14=>{})):logger[_0x395ca2(0x13f)](_0x1f5c0d);}),process['on'](_0x4f06e4(0x2b7),()=>{const _0x48319f=_0x4f06e4;stopAllBots(),process[_0x48319f(0x2b7)](0x0);}),process['on'](_0x4f06e4(0x159),()=>{const _0x4b147c=_0x4f06e4;stopAllBots(),process[_0x4b147c(0x2b7)](0x0);}),process['on'](_0x4f06e4(0x1ee),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4f06e4(0x184))[_0x4f06e4(0x15b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x4f06e4(0x1fd)](app);app[_0x4f06e4(0x210)](fileUpload({'useTempFiles':!![]})),app[_0x4f06e4(0x242)]('/download/:type',async(_0x3c6f49,_0x791302)=>{const _0x285294=_0x4f06e4,_0x55d65a=_0x3c6f49[_0x285294(0x212)][_0x285294(0x18e)],_0x4de7f5=getClientsWithBotID(_0x285294(0x289)),_0x5450d4=_0x3c6f49['headers'][_0x285294(0x21e)],_0x4a107c=timelyDecrypt(_0x5450d4,![]),_0xf039f4=_0x4de7f5[_0x285294(0x16b)](_0x35cc44=>_0x35cc44[_0x285294(0x21e)]==_0x4a107c);if(_0xf039f4){const _0x1e6ede=normalizeIP(_0x3c6f49['socket'][_0x285294(0x256)])[_0x285294(0x2b0)],_0x328ced=_0x3c6f49[_0x285294(0x25d)][_0x285294(0x17f)];if(validateAccess(_0x328ced,_0x4a107c,_0x1e6ede)[_0x285294(0x209)])_0x55d65a==_0x285294(0x244)&&await backupConfigFiles(),await zipFiles(_0x55d65a),_0x791302[_0x285294(0x1e3)](zippath+(_0x55d65a+_0x285294(0x29a)),_0x4dd528=>{const _0x56b687=_0x285294;_0x4dd528&&(logger[_0x56b687(0x255)](_0x56b687(0x252)+_0x55d65a),logger[_0x56b687(0x13f)](_0x4dd528));});else logger[_0x285294(0x255)](_0x285294(0x28c)+_0x55d65a+_0x285294(0x114));}else logger[_0x285294(0x255)](_0x285294(0x28c)+_0x55d65a+_0x285294(0x141));}),app[_0x4f06e4(0x2ae)]('/upload-backup',async(_0x19c068,_0xd28b0f)=>{const _0x26c2d7=_0x4f06e4,_0x378c08=getClientsWithBotID('botmanager'),_0x3bb707=_0x19c068[_0x26c2d7(0x25d)]['uuid'],_0x567f4d=timelyDecrypt(_0x3bb707,![]),_0x22fbcb=_0x378c08['find'](_0x5da24b=>_0x5da24b[_0x26c2d7(0x21e)]==_0x567f4d);logger['debug'](_0x26c2d7(0x21d));if(_0x22fbcb){const _0x1c9f40=normalizeIP(_0x19c068[_0x26c2d7(0x241)][_0x26c2d7(0x256)])[_0x26c2d7(0x2b0)],_0x5e62ce=_0x19c068[_0x26c2d7(0x25d)][_0x26c2d7(0x17f)];if(validateAccess(_0x5e62ce,_0x567f4d,_0x1c9f40)[_0x26c2d7(0x209)]){if(_0x19c068['files']){const _0x1793f3=_0x19c068[_0x26c2d7(0x1aa)][_0x26c2d7(0x181)];await _0x1793f3['mv'](temppath+_0x1793f3[_0x26c2d7(0x1c1)]),_0xd28b0f['send']({'status':!![],'message':_0x26c2d7(0x134)});const _0x1cacc9=getBotsWithMode();_0x1cacc9[_0x26c2d7(0x1ea)]>0x0?confirmRestore(temppath,_0x1793f3[_0x26c2d7(0x1c1)]):unzipFile(temppath,_0x1793f3[_0x26c2d7(0x1c1)]);}}else logger[_0x26c2d7(0x255)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x26c2d7(0x255)](_0x26c2d7(0x125));}),app['use'](express[_0x4f06e4(0x1d8)](path[_0x4f06e4(0x25e)](__dirname,bbpath2,_0x4f06e4(0x110)))),app[_0x4f06e4(0x210)](express[_0x4f06e4(0x1d8)](path[_0x4f06e4(0x25e)](__dirname,bbpath2,'build'))),app[_0x4f06e4(0x242)]('/',function(_0x515167,_0x1cfec8){const _0x5f2e6c=_0x4f06e4;_0x1cfec8[_0x5f2e6c(0x150)](path[_0x5f2e6c(0x25e)](__dirname,bbpath2,'build2',_0x5f2e6c(0x2c8)));}),app[_0x4f06e4(0x242)](_0x4f06e4(0xf2),function(_0x4ce84d,_0x2d70b2){const _0x59a5e1=_0x4f06e4;_0x2d70b2[_0x59a5e1(0x150)](path['join'](__dirname,bbpath2,_0x59a5e1(0x1b4),'index.html'));}),app['get']('/:bot/portfolio',(_0x2705de,_0xb71a2c)=>{const _0x1a8edd=_0x4f06e4;_0xb71a2c[_0x1a8edd(0x150)](path[_0x1a8edd(0x25e)](__dirname,bbpath2,_0x1a8edd(0x1b4),_0x1a8edd(0x2c8)));}),app['get'](_0x4f06e4(0x137),(_0x470dae,_0x585ae8)=>{const _0x242e08=_0x4f06e4;_0x585ae8[_0x242e08(0x150)](path[_0x242e08(0x25e)](__dirname,bbpath2,_0x242e08(0x1b4),'index.html'));}),app[_0x4f06e4(0x242)](_0x4f06e4(0x124),(_0x301c40,_0x297257)=>{const _0xd35504=_0x4f06e4;_0x297257[_0xd35504(0x150)](path[_0xd35504(0x25e)](__dirname,bbpath2,_0xd35504(0x1b4),_0xd35504(0x2c8)));}),app['get']('/:bot/history',(_0x171a77,_0xf43b4b)=>{const _0xbf98f0=_0x4f06e4;_0xf43b4b[_0xbf98f0(0x150)](path['join'](__dirname,bbpath2,_0xbf98f0(0x1b4),'index.html'));}),app['get'](_0x4f06e4(0x197),(_0x17a261,_0x5c998e)=>{const _0x303734=_0x4f06e4;_0x5c998e['sendFile'](path[_0x303734(0x25e)](__dirname,bbpath2,_0x303734(0x1b4),_0x303734(0x2c8)));}),app[_0x4f06e4(0x242)]('/:bot/support',(_0x3dce22,_0x310b6a)=>{const _0x598390=_0x4f06e4;_0x310b6a[_0x598390(0x150)](path['join'](__dirname,bbpath2,'build',_0x598390(0x2c8)));});if(HOST)http[_0x4f06e4(0x19d)](PORT,HOST);else http[_0x4f06e4(0x19d)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x33816d=_0x4f06e4;let _0x3d961a='[ip-address]';const _0x3516c7=networkInterfaces(),_0x41fd05={};for(const _0x35fff3 of Object[_0x33816d(0x226)](_0x3516c7)){for(const _0x13d390 of _0x3516c7[_0x35fff3]){if((_0x13d390[_0x33816d(0x1a0)]==_0x33816d(0x295)||_0x13d390['family']==0x4)&&!_0x13d390[_0x33816d(0x213)]){const _0x397e11=ipaddr['parse'](_0x13d390['address'])[_0x33816d(0x1c9)]();_0x397e11!=_0x33816d(0xe9)&&(!_0x41fd05[_0x35fff3]&&(_0x41fd05[_0x35fff3]=[]),_0x41fd05[_0x35fff3]['push'](_0x13d390['address']),_0x3d961a=_0x13d390['address']);}}}return{'serverip':_0x3d961a,'netinterfaces':_0x41fd05};}async function startServer(){const _0x30caad=_0x4f06e4,{serverip:_0x292c6f,netinterfaces:_0x371ad3}=getServerIP();logger[_0x30caad(0x13f)](''),logger[_0x30caad(0x13f)](_0x30caad(0x101)),await logger[_0x30caad(0x255)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x30caad(0x152)+(environment==_0x30caad(0x1b7)?_0x30caad(0x176):'')+'\x0a'+(_0x30caad(0x271)+PORT+_0x30caad(0x2b2))+(_0x30caad(0x191)+_0x292c6f+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x30caad(0x13f)](_0x30caad(0x101));if(config[_0x30caad(0x1ea)]!=0x0)for(const _0x2c4d7 of config){const _0x5650b7=_0x2c4d7[_0x30caad(0x29b)]==_0x30caad(0x2d1)?'a':'m';if(_0x2c4d7['status']=='enabled'||_0x2c4d7[_0x30caad(0x216)]==_0x30caad(0x2c4))await logger[_0x30caad(0x255)](_0x30caad(0x223)+_0x5650b7+_0x30caad(0x17a)+_0x2c4d7[_0x30caad(0x26b)]+_0x30caad(0x2c9)+_0x2c4d7[_0x30caad(0x2d6)]),startBot([_0x2c4d7['botID'],userID],{'cwd':bbpath},function(_0x4e823b){if(_0x4e823b)logger['full'](_0x4e823b);});else(_0x2c4d7['status']==_0x30caad(0x2c3)||_0x2c4d7[_0x30caad(0x216)]==_0x30caad(0x22f))&&await logger[_0x30caad(0x255)](_0x30caad(0xf0)+_0x5650b7+_0x30caad(0x144)+_0x2c4d7['botID']+_0x30caad(0x2c9)+_0x2c4d7[_0x30caad(0x2d6)]);}else!newBot&&logger[_0x30caad(0x13f)](_0x30caad(0x13a));if(newBot)addBot();logger[_0x30caad(0x13f)](_0x30caad(0x101)),logger[_0x30caad(0x13f)](''),await logger[_0x30caad(0x24f)](_0x30caad(0x18d)+nodeversion),await logger[_0x30caad(0x24f)](_0x30caad(0x2b5),_0x371ad3);}function startSocket(){const _0x494434=_0x4f06e4;io['on'](_0x494434(0x2e4),_0x107048=>{const _0x2dea9e=_0x494434;let _0x4b80c3,_0x2e7445,_0x1124f8,_0x286bfe,_0x5d4617;const _0xab620d=_0x107048['handshake']['headers'][_0x2dea9e(0x1e7)];_0x2e7445=_0xab620d[_0x2dea9e(0x1c2)](/bot[0-9]{3}/);if(_0x2e7445)_0x1124f8=_0x2e7445[0x0]['match'](/[0-9]{3}/);if(_0x1124f8)_0x4b80c3=_0x1124f8[0x0];else _0x4b80c3=_0x2dea9e(0x289);const _0xcd8317=_0x107048['handshake'][_0x2dea9e(0x2b1)][_0x2dea9e(0x12d)];if(!_0xcd8317)_0x107048[_0x2dea9e(0x180)](_0x2dea9e(0x216),{'publicKey':secure['publicKey']});else{_0x286bfe=timelyDecrypt(_0xcd8317,![]);if(!_0x286bfe)_0x107048[_0x2dea9e(0x180)](_0x2dea9e(0x216),{'publicKey':secure[_0x2dea9e(0x1dd)]});else{_0x5d4617=normalizeIP(_0x107048['conn'][_0x2dea9e(0x256)])['store'];if(!devices[_0x286bfe])devices[_0x286bfe]={'uuid':_0x286bfe,'access':{'token':null}};devices[_0x286bfe]['ip']=_0x5d4617;const _0x2bcf05=addClient(_0x107048['id'],_0x286bfe,_0x4b80c3);setAccess(_0x2bcf05),emitMessages(),_0x107048['on'](_0x2dea9e(0x21b),_0x5ca562=>{const _0x123b4a=_0x2dea9e,_0x371ff6=timelyDecrypt(_0x5ca562[_0x123b4a(0x2df)],!![],_0x123b4a(0x27c));if(_0x371ff6){_0x5ca562={'username':_0x5ca562[_0x123b4a(0x178)],'password':_0x371ff6},devices[_0x286bfe][_0x123b4a(0xd8)]=validateCredentials(_0x5ca562,_0x286bfe);if(devices[_0x286bfe][_0x123b4a(0xd8)][_0x123b4a(0x209)]==![]&&devices[_0x286bfe][_0x123b4a(0xd8)][_0x123b4a(0x232)]==_0x123b4a(0x260))_0x107048[_0x123b4a(0x180)]('status',{'access':devices[_0x286bfe][_0x123b4a(0xd8)]}),loginAccess2FA(_0x286bfe,_0x5d4617);else{if(devices[_0x286bfe][_0x123b4a(0xd8)]['allow']==![]&&devices[_0x286bfe]['access']['reason']=='invalid\x20credentials')_0x107048[_0x123b4a(0x180)](_0x123b4a(0x216),{'access':devices[_0x286bfe][_0x123b4a(0xd8)]});else devices[_0x286bfe]['access'][_0x123b4a(0x209)]&&devices[_0x286bfe][_0x123b4a(0xd8)][_0x123b4a(0x232)]==_0x123b4a(0x186)&&(getClientsWithUuid(_0x286bfe)[_0x123b4a(0x1d5)](_0x2aa1b8=>{setAccess(_0x2aa1b8);}),logger[_0x123b4a(0x24f)]('Logged\x20in\x20user\x20...'+_0x286bfe['slice'](-0x8)),setTokenRefresh(_0x286bfe),setSessionTimeout(_0x123b4a(0x21b),_0x286bfe));}}else logger[_0x123b4a(0x255)](_0x123b4a(0x127));}),_0x107048['on'](_0x2dea9e(0x2ba),()=>{resetPassword();}),_0x107048['on'](_0x2dea9e(0x2d5),_0x13eb83=>{removeClient(_0x107048['id']);}),_0x4b80c3=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x33e84a){const _0xa06fa3=_0x4f06e4;if(_0x33e84a!='botmanager'&&config[_0xa06fa3(0x2a1)]!=''){if(pid[_0x33e84a])pid[_0x33e84a][_0xa06fa3(0x290)]({'function':_0xa06fa3(0x28e),'args':null});}_0x33e84a!=_0xa06fa3(0x289)&&broadcastToBots(_0xa06fa3(0x26f),JSON['stringify'](config));}function reloadBotManager(){const _0x361790=_0x4f06e4;getClientsWithBotID('botmanager')[_0x361790(0x1d5)](_0x2af9f5=>{const _0x3163df=_0x361790;getSocket(_0x2af9f5['id'])[_0x3163df(0x180)](_0x3163df(0x216),{'access':{'allow':![],'reason':_0x3163df(0xdf),'token':null}});});}function getSocket(_0x3a5d98){const _0x115ad5=_0x4f06e4,_0xf079b1=io[_0x115ad5(0x29f)][_0x115ad5(0x242)]('/');return _0xf079b1['sockets'][_0x115ad5(0x242)](_0x3a5d98);}function setAccess(_0x30df04){const _0x21db93=_0x4f06e4,_0x1e5e03=getSocket(_0x30df04['id']),_0x59360f=_0x30df04[_0x21db93(0x21e)],_0xf7a6c2=_0x30df04[_0x21db93(0x277)];devices[_0x59360f][_0x21db93(0xd8)]=validateAccess(devices[_0x59360f]['access'][_0x21db93(0x123)],_0x59360f),logger[_0x21db93(0x24f)](_0x21db93(0xe6)+devices[_0x59360f][_0x21db93(0xd8)][_0x21db93(0x232)]+'\x20|\x20client:\x20...'+_0x30df04['id'][_0x21db93(0x261)](-0x8)+_0x21db93(0x29c)+_0x59360f['slice'](-0x8)),_0x1e5e03[_0x21db93(0x25e)](_0x59360f);if(devices[_0x59360f]['access'][_0x21db93(0x209)]){_0x1e5e03[_0x21db93(0x25e)](_0xf7a6c2);if(_0xf7a6c2==_0x21db93(0x289))initializeSocketBotManager(_0x1e5e03);else initializeSocketBot(_0x1e5e03);initClient(_0xf7a6c2);}devices[_0x59360f][_0x21db93(0xd8)][_0x21db93(0x123)]&&devices[_0x59360f]['access']['reason']==_0x21db93(0xed)&&setSessionTimeout(_0x21db93(0x218),_0x59360f),devices[_0x59360f]['access'][_0x21db93(0x123)]&&devices[_0x59360f][_0x21db93(0xd8)][_0x21db93(0x232)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x59360f),_0x1e5e03['emit'](_0x21db93(0x216),{'status':_0x30df04[_0x21db93(0x245)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x59360f]['access'],'externalip':devices[_0x59360f]['ip'],'publicKey':secure[_0x21db93(0x1dd)],'userid':settings[_0x21db93(0x1e9)],'validInstallation':validInstallation}),devices[_0x59360f][_0x21db93(0xd8)][_0x21db93(0x209)]==![]&&devices[_0x59360f]['access']['reason']==_0x21db93(0x1d1)&&temporaryAccess2FA(_0x59360f,devices[_0x59360f]['ip']);}function setSessionTimeout(_0x1a3ce2,_0x38bfe0){const _0x200e44=_0x4f06e4;let _0x190330;if(_0x1a3ce2==_0x200e44(0x21b))_0x190330=loginExpiry*0x3c*0x3e8;else _0x190330=devices[_0x38bfe0][_0x200e44(0x117)][_0x200e44(0x259)]*0x3c*0x3e8-(new Date()[_0x200e44(0x2e0)]()-devices[_0x38bfe0][_0x200e44(0x117)]['timestamp']);if(devices[_0x38bfe0]['pidExpireLogin'])clearTimeout(devices[_0x38bfe0][_0x200e44(0x20e)]);devices[_0x38bfe0]['pidExpireLogin']=setTimeout(()=>{const _0x4a0f25=_0x200e44;if(devices[_0x38bfe0][_0x4a0f25(0x106)])clearTimeout(devices[_0x38bfe0][_0x4a0f25(0x106)]);removeSocketListeners(_0x38bfe0),addBlacklist(_0x38bfe0),devices[_0x38bfe0][_0x4a0f25(0x117)]=null,devices[_0x38bfe0][_0x4a0f25(0x283)]=null,devices[_0x38bfe0][_0x4a0f25(0xd8)]['token']=null,logger[_0x4a0f25(0x24f)]('Session\x20expired\x20for\x20user\x20...'+_0x38bfe0['slice'](-0x8)),devices[_0x38bfe0]['access']=validateAccess(devices[_0x38bfe0][_0x4a0f25(0xd8)]['token'],_0x38bfe0),!(devices[_0x38bfe0][_0x4a0f25(0xd8)][_0x4a0f25(0x209)]&&devices[_0x38bfe0][_0x4a0f25(0xd8)][_0x4a0f25(0x232)]==_0x4a0f25(0x2e3))&&(_0x1a3ce2==_0x4a0f25(0x21b)?io['to'](_0x38bfe0)[_0x4a0f25(0x180)](_0x4a0f25(0x216),{'access':{'allow':![],'reason':_0x4a0f25(0x1ce),'token':null}}):io['to'](_0x38bfe0)[_0x4a0f25(0x180)]('status',{'access':{'allow':![],'reason':_0x4a0f25(0x2a5),'token':null}})),devices[_0x38bfe0][_0x4a0f25(0xd8)]['token']=null;},_0x190330);}function setTokenRefresh(_0x4bd6de){const _0x432f0e=_0x4f06e4;if(devices[_0x4bd6de]['pidRefreshToken'])clearTimeout(devices[_0x4bd6de][_0x432f0e(0x106)]);devices[_0x4bd6de][_0x432f0e(0x106)]=setTimeout(()=>{const _0x372e94=_0x432f0e;getClientsWithUuid(_0x4bd6de)[_0x372e94(0x1ea)]!=0x0?(devices[_0x4bd6de][_0x372e94(0xd8)]=refreshToken(_0x4bd6de),io['to'](_0x4bd6de)[_0x372e94(0x180)](_0x372e94(0x216),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4bd6de][_0x372e94(0xd8)],'externalip':devices[_0x4bd6de]['ip'],'publicKey':secure[_0x372e94(0x1dd)],'validInstallation':validInstallation}),setTokenRefresh(_0x4bd6de)):clearTimeout(devices[_0x4bd6de][_0x372e94(0x106)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x252fc1){const _0x2f6d18=_0x4f06e4,_0x136780=getClient(_0x252fc1['id'])[_0x2f6d18(0x21e)];_0x252fc1[_0x2f6d18(0x180)](_0x2f6d18(0x26f),config),_0x252fc1['emit'](_0x2f6d18(0x281),cleanSettings()),_0x252fc1['on'](_0x2f6d18(0x16f),_0x3071fc=>{const _0x5d9330=_0x2f6d18;if(validateAccess(_0x3071fc,_0x136780)['allow'])addBot();else logger[_0x5d9330(0x255)](_0x5d9330(0x128));}),_0x252fc1['on'](_0x2f6d18(0x11e),(_0x333558,_0x3f8473)=>{const _0x2c3033=_0x2f6d18;if(validateAccess(_0x3f8473,_0x136780)[_0x2c3033(0x209)])toggleBot(_0x333558['botID'],_0x333558[_0x2c3033(0x216)],_0x333558[_0x2c3033(0x1eb)]);else logger[_0x2c3033(0x255)](_0x2c3033(0xea));}),_0x252fc1['on']('toggle-bot-mode',(_0x7dbd27,_0x2b181a)=>{const _0x1c7179=_0x2f6d18;if(validateAccess(_0x2b181a,_0x136780)[_0x1c7179(0x209)])toggleBotMode(_0x7dbd27);else logger[_0x1c7179(0x255)](_0x1c7179(0xea));}),_0x252fc1['on'](_0x2f6d18(0x28b),(_0x29f3aa,_0x5d9b8d)=>{const _0x3988d6=_0x2f6d18;if(validateAccess(_0x5d9b8d,_0x136780)[_0x3988d6(0x209)])deleteBot(_0x29f3aa);else logger[_0x3988d6(0x255)](_0x3988d6(0x23a));}),_0x252fc1['on'](_0x2f6d18(0x1ac),(_0x5416c7,_0x24eabe)=>{const _0x1d9cf1=_0x2f6d18;if(validateAccess(_0x24eabe,_0x136780)['allow'])storeSettings(_0x5416c7,!![]);else logger[_0x1d9cf1(0x255)](_0x1d9cf1(0x2cd));}),_0x252fc1['on'](_0x2f6d18(0x1a4),_0x147346=>{const _0x2cfa76=_0x2f6d18;if(validateAccess(_0x147346,_0x136780)[_0x2cfa76(0x209)])updateBB(_0x2cfa76(0x200));else logger[_0x2cfa76(0x255)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x252fc1['on'](_0x2f6d18(0x2dc),_0x49bf48=>{const _0x3b8d09=_0x2f6d18;if(validateAccess(_0x49bf48,_0x136780)[_0x3b8d09(0x209)])updateBB('reinstall');else logger[_0x3b8d09(0x255)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x252fc1['on']('get-backup-files',_0x44c773=>{const _0x3028b9=_0x2f6d18;if(validateAccess(_0x44c773,_0x136780)[_0x3028b9(0x209)]){const _0x1db4d4=getClient(_0x252fc1['id']);if(_0x1db4d4)getBackupFiles(_0x1db4d4[_0x3028b9(0x21e)]);else logger[_0x3028b9(0x255)](_0x3028b9(0x2b9));}else logger['full']('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x252fc1['on'](_0x2f6d18(0x207),(_0x477cfb,_0x34f1c5)=>{const _0x19f3dd=_0x2f6d18;if(validateAccess(_0x34f1c5,_0x136780)[_0x19f3dd(0x209)])restoreBackupFile(_0x477cfb);else logger[_0x19f3dd(0x255)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x252fc1['on'](_0x2f6d18(0x20c),_0x1849ea=>{const _0x326127=_0x2f6d18;if(validateAccess(_0x1849ea,_0x136780)[_0x326127(0x209)])getMessages();else logger[_0x326127(0x255)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x252fc1['on']('confirm-message',(_0x16779c,_0x4e1281)=>{const _0x54ad02=_0x2f6d18;if(validateAccess(_0x4e1281,_0x136780)[_0x54ad02(0x209)])confirmMessage(_0x16779c);else logger[_0x54ad02(0x255)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x252fc1['on'](_0x2f6d18(0x269),_0x360c98=>{const _0x3ded41=_0x2f6d18;if(validateAccess(_0x360c98,_0x136780)[_0x3ded41(0x209)]){if(devices[_0x136780][_0x3ded41(0x106)])clearTimeout(devices[_0x136780][_0x3ded41(0x106)]);if(devices[_0x136780]['pidExpireLogin'])clearTimeout(devices[_0x136780]['pidExpireLogin']);removeSocketListeners(getClient(_0x252fc1['id'])[_0x3ded41(0x21e)]),addBlacklist(_0x136780),devices[_0x136780][_0x3ded41(0x117)]=null,devices[_0x136780][_0x3ded41(0x283)]=null,devices[_0x136780][_0x3ded41(0xd8)]['token']=null,logger['debug'](_0x3ded41(0x121)+_0x136780[_0x3ded41(0x261)](-0x8)),io['to'](getClient(_0x252fc1['id'])['uuid'])[_0x3ded41(0x180)](_0x3ded41(0x216),{'access':{'allow':![],'reason':_0x3ded41(0x195),'token':null}});}else logger[_0x3ded41(0x255)](_0x3ded41(0x14f));});}function initializeSocketBot(_0x2fe00e){const _0x555101=_0x4f06e4,_0x27bb9b=getClient(_0x2fe00e['id'])[_0x555101(0x277)],_0x5007ac=getClient(_0x2fe00e['id'])['uuid'];_0x2fe00e['on'](_0x555101(0x169),(_0x3a0b77,_0x2eaf5c)=>{const _0x314958=_0x555101;if(validateAccess(_0x2eaf5c,_0x5007ac)['allow']){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x314958(0x290)]({'function':_0x314958(0x24c),'args':_0x3a0b77});}else logger[_0x314958(0x255)](_0x314958(0x1a2));}),_0x2fe00e['on']('delete-alerts',(_0x291f12,_0x7b66de)=>{const _0x366680=_0x555101;if(validateAccess(_0x7b66de,_0x5007ac)[_0x366680(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b]['send']({'function':_0x366680(0x14b),'args':_0x291f12});}else logger[_0x366680(0x255)](_0x366680(0x24a));}),_0x2fe00e['on'](_0x555101(0x170),(_0x5a2905,_0x2a164b)=>{const _0x26cfdd=_0x555101;if(validateAccess(_0x2a164b,_0x5007ac)[_0x26cfdd(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x26cfdd(0x290)]({'function':_0x26cfdd(0x1f0),'args':_0x5a2905});}else logger[_0x26cfdd(0x255)](_0x26cfdd(0x2b3));}),_0x2fe00e['on'](_0x555101(0x177),(_0x32bc7a,_0x59e6bb)=>{const _0x1acf96=_0x555101;if(validateAccess(_0x59e6bb,_0x5007ac)[_0x1acf96(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b]['send']({'function':_0x1acf96(0x14c),'args':_0x32bc7a});}else logger[_0x1acf96(0x255)](_0x1acf96(0x293));}),_0x2fe00e['on'](_0x555101(0x19c),(_0x595abd,_0x277fdc)=>{const _0x57bfd5=_0x555101;if(validateAccess(_0x277fdc,_0x5007ac)[_0x57bfd5(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x57bfd5(0x290)]({'function':_0x57bfd5(0x229),'args':_0x595abd});}else logger[_0x57bfd5(0x255)](_0x57bfd5(0x2d7));}),_0x2fe00e['on'](_0x555101(0x205),(_0x2051ba,_0x4dd0ec)=>{const _0x268a51=_0x555101;if(validateAccess(_0x4dd0ec,_0x5007ac)[_0x268a51(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x268a51(0x290)]({'function':_0x268a51(0x2d2),'args':_0x2051ba});}else logger['full'](_0x268a51(0x198));}),_0x2fe00e['on'](_0x555101(0x25f),_0x375f26=>{const _0x4c6f74=_0x555101;if(validateAccess(_0x375f26,_0x5007ac)[_0x4c6f74(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x4c6f74(0x290)]({'function':_0x4c6f74(0x1be),'args':null});}else logger[_0x4c6f74(0x255)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x2fe00e['on'](_0x555101(0x23b),_0x1fdfa1=>{const _0x58fe6a=_0x555101;if(validateAccess(_0x1fdfa1,_0x5007ac)['allow']){if(pid[_0x27bb9b])pid[_0x27bb9b]['send']({'function':_0x58fe6a(0x109),'args':null});}else logger['full'](_0x58fe6a(0x2a7));}),_0x2fe00e['on'](_0x555101(0x235),(_0xc65d33,_0x43a66e)=>{const _0x4aa96f=_0x555101;if(validateAccess(_0x43a66e,_0x5007ac)[_0x4aa96f(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x4aa96f(0x290)]({'function':'placeOrder','args':_0xc65d33});}else logger[_0x4aa96f(0x255)](_0x4aa96f(0x2c0));}),_0x2fe00e['on'](_0x555101(0x1bf),_0x2e2c22=>{const _0x2accd0=_0x555101;if(validateAccess(_0x2e2c22,_0x5007ac)[_0x2accd0(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0x2accd0(0x290)]({'function':_0x2accd0(0x126),'args':null});}else logger[_0x2accd0(0x255)](_0x2accd0(0x22d));}),_0x2fe00e['on'](_0x555101(0x1bd),_0x48c574=>{const _0xc9047d=_0x555101;if(validateAccess(_0x48c574,_0x5007ac)[_0xc9047d(0x209)]){if(pid[_0x27bb9b])pid[_0x27bb9b][_0xc9047d(0x290)]({'function':_0xc9047d(0x2e2),'args':null});}else logger[_0xc9047d(0x255)](_0xc9047d(0x2a8));}),_0x2fe00e['on'](_0x555101(0x1a4),_0x1392e2=>{const _0x519fa0=_0x555101;if(validateAccess(_0x1392e2,_0x5007ac)[_0x519fa0(0x209)])updateBB(_0x519fa0(0x200));else logger['full'](_0x519fa0(0x270));}),_0x2fe00e['on'](_0x555101(0x20c),_0x566f1d=>{const _0x4e5cec=_0x555101;if(validateAccess(_0x566f1d,_0x5007ac)[_0x4e5cec(0x209)])getMessages();else logger[_0x4e5cec(0x255)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2fe00e['on']('confirm-message',(_0x2fe006,_0x1cda7d)=>{const _0x319c0f=_0x555101;if(validateAccess(_0x1cda7d,_0x5007ac)[_0x319c0f(0x209)])confirmMessage(_0x2fe006);else logger[_0x319c0f(0x255)](_0x319c0f(0x145));}),_0x2fe00e['on']('logout',_0x351642=>{const _0x2199f7=_0x555101;if(validateAccess(_0x351642,_0x5007ac)[_0x2199f7(0x209)]){if(devices[_0x5007ac][_0x2199f7(0x106)])clearTimeout(devices[_0x5007ac][_0x2199f7(0x106)]);if(devices[_0x5007ac][_0x2199f7(0x20e)])clearTimeout(devices[_0x5007ac][_0x2199f7(0x20e)]);removeSocketListeners(getClient(_0x2fe00e['id'])[_0x2199f7(0x21e)]),addBlacklist(_0x5007ac),devices[_0x5007ac]['telegramIpApproval']=null,devices[_0x5007ac][_0x2199f7(0x283)]=null,devices[_0x5007ac][_0x2199f7(0xd8)][_0x2199f7(0x123)]=null,logger[_0x2199f7(0x24f)](_0x2199f7(0x121)+_0x5007ac[_0x2199f7(0x261)](-0x8)),io['to'](getClient(_0x2fe00e['id'])[_0x2199f7(0x21e)])[_0x2199f7(0x180)](_0x2199f7(0x216),{'access':{'allow':![],'reason':_0x2199f7(0x195),'token':null}});}else logger[_0x2199f7(0x255)](_0x2199f7(0x14f));});}function removeSocketListeners(_0x4c78ce){const _0x23c471=_0x4f06e4;getClientsWithUuid(_0x4c78ce)[_0x23c471(0x1d5)](_0x55037a=>{getSocket(_0x55037a['id'])['removeAllListeners']();});}function cleanSettings(){const _0x43133b=_0x4f06e4;let _0x595930=settings;return settings[_0x43133b(0x122)]&&settings[_0x43133b(0x122)]!=''&&(_0x595930={..._0x595930,'telegramToken':_0x43133b(0x2cb)}),settings[_0x43133b(0x20d)]&&settings['bbPassword']!=''&&(_0x595930={..._0x595930,'bbPassword':_0x43133b(0x2cb)}),settings[_0x43133b(0x28d)]&&settings[_0x43133b(0x28d)]!=''&&(_0x595930={..._0x595930,'marketcapApi':'************'}),(settings[_0x43133b(0x20d)]&&settings[_0x43133b(0x20d)]==_0x43133b(0x188)||settings[_0x43133b(0x122)]&&settings[_0x43133b(0x122)]==_0x43133b(0x188)||settings[_0x43133b(0x28d)]&&settings['marketcapApi']==_0x43133b(0x188))&&(_0x595930={..._0x595930,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x43133b(0x122)]==_0x43133b(0x188),'marketcap':settings[_0x43133b(0x28d)]==_0x43133b(0x188)}}),_0x595930;}async function updateBB(_0x2c1f38){const _0x342ec2=_0x4f06e4;await backupConfigFiles(),installingUpdate=!![],config[_0x342ec2(0x1d5)](_0x53aaf8=>{restartBot(_0x53aaf8['botID']);});if(_0x2c1f38=='update')process[_0x342ec2(0x290)]({'update':!![],'environment':environment},_0x4a9863=>{});else _0x2c1f38==_0x342ec2(0x1d6)&&process[_0x342ec2(0x290)]({'reinstall':!![],'environment':environment},_0x1c49fa=>{});}function startBot(_0x3e43b2,_0x512a97,_0x46ecbb){const _0x229504=_0x4f06e4;if(debugging)_0x3e43b2[_0x229504(0x27a)]('-d');let _0x1bc37a=![];const _0x539427=_0x3e43b2[0x0];_0x512a97={..._0x512a97,'stdio':[_0x229504(0x1b9),'inherit',_0x229504(0x1b9),'ipc']},pid[_0x539427]=childProcess[_0x229504(0x2c6)](botfile,_0x3e43b2,_0x512a97),pid[_0x539427]['on'](_0x229504(0x17c),_0xb5df9d=>{const _0x452de6=_0x229504;switch(Object[_0x452de6(0x226)](_0xb5df9d)[0x0]){case _0x452de6(0x2d6):updateBotName(_0x539427,_0xb5df9d['botname']);break;case _0x452de6(0x182):updateBotManager();break;case _0x452de6(0x216):updateStatus(_0x539427,_0xb5df9d[_0x452de6(0x216)]);break;case _0x452de6(0x1eb):updateLive(_0x539427,_0xb5df9d['live']);break;case'started':updateLive(_0x539427,_0xb5df9d[_0x452de6(0xeb)]),io['to'](_0x539427)[_0x452de6(0x180)](_0x452de6(0x216),{'access':{'allow':![],'reason':_0x452de6(0xdf),'token':null}});break;case _0x452de6(0x1e4):_0xb5df9d['stop']=='restart'&&restartBot(_0x539427);_0xb5df9d[_0x452de6(0x1e4)]==_0x452de6(0x23f)&&toggleBot(_0x539427,_0x452de6(0x2c3),_0x452de6(0x1b0));break;case _0x452de6(0x1d7):sendTelegramBot(_0x539427,_0xb5df9d[_0x452de6(0x1d7)]);break;case _0x452de6(0x1b1):sendTelegramMsg(_0xb5df9d[_0x452de6(0x1b1)]);break;case'function':io['to'](_0x539427)[_0x452de6(0x180)](_0xb5df9d[_0x452de6(0x2dd)],_0xb5df9d['args']);break;}}),pid[_0x539427]['on']('error',function(_0x3bbe7e){if(_0x1bc37a)return;_0x1bc37a=!![],_0x46ecbb(_0x3bbe7e);}),pid[_0x539427]['on'](_0x229504(0x2b7),async function(_0x588e5c){const _0x1f5dc3=_0x229504;if(terminating)return;if(installingUpdate){logger[_0x1f5dc3(0x24f)](_0x1f5dc3(0x104)),io['close']();return;}if(_0x1bc37a)return;_0x1bc37a=!![],_0x46ecbb(null);const _0x2c5a35=dbConfig[_0x1f5dc3(0x242)](_0x1f5dc3(0x26f))[_0x1f5dc3(0x16b)]({'botID':_0x539427})[_0x1f5dc3(0x21f)]();_0x2c5a35&&(_0x2c5a35[_0x1f5dc3(0x216)]==_0x1f5dc3(0x284)||_0x2c5a35[_0x1f5dc3(0x216)]==_0x1f5dc3(0x2c4))&&(await sleep(0x3e8),updateLive(_0x539427,_0x1f5dc3(0x1b0)),logger['full']('Restarting\x20Bot\x20'+_0x539427),startBot([_0x539427,userID],{'cwd':bbpath},function(_0x2b52ed){const _0x35546c=_0x1f5dc3;if(_0x2b52ed)logger[_0x35546c(0x255)](_0x2b52ed);}));});}function stopBot(_0x472605){const _0x1272bf=_0x4f06e4;getClientsWithBotID(_0x472605)[_0x1272bf(0x1d5)](_0x2179fd=>{const _0x112ae1=_0x1272bf;getSocket(_0x2179fd['id'])[_0x112ae1(0x2d5)](!![]),removeClient(_0x2179fd['id']);}),pid[_0x472605]&&(pid[_0x472605][_0x1272bf(0x23f)](),pid[_0x472605]=null);}function stopAllBots(){terminating=!![];const _0x25ebf9=getEnabledBots();_0x25ebf9['forEach'](_0x152e7d=>{const _0x573553=_0x2358;stopBot(_0x152e7d[_0x573553(0x26b)]);});}function restartBot(_0x563dda){if(pid[_0x563dda])pid[_0x563dda]['kill']();}function addBot(){const _0x5ebb5f=_0x4f06e4;let _0x16d959;for(let _0x1fa867=0x1;_0x1fa867<0x3e9;_0x1fa867++){_0x16d959=_0x1fa867[_0x5ebb5f(0x202)]()[_0x5ebb5f(0x168)](0x3,'0');let _0xa51a06=config[_0x5ebb5f(0x16b)](_0xa2a60e=>_0xa2a60e['botID']==_0x16d959);if(!_0xa51a06)break;}if(_0x16d959===_0x5ebb5f(0x18f)){logger['full'](_0x5ebb5f(0x1bc));return;}logger['full'](_0x5ebb5f(0x1f6)+_0x16d959),dbConfig['get'](_0x5ebb5f(0x26f))[_0x5ebb5f(0x27a)]({'botID':_0x16d959,'botname':_0x5ebb5f(0x1c5)+_0x16d959,'status':_0x5ebb5f(0x2c4),'live':''})[_0x5ebb5f(0x268)](),startBot([_0x16d959,userID],{'cwd':bbpath},function(_0x1c92bd){const _0x4d58c7=_0x5ebb5f;if(_0x1c92bd)logger[_0x4d58c7(0x255)](_0x1c92bd);}),config=getConfiguration(),io['to'](_0x5ebb5f(0x289))[_0x5ebb5f(0x180)](_0x5ebb5f(0x26f),config),broadcastToBots(_0x5ebb5f(0x26f),JSON['stringify'](config));}function deleteBot(_0x341476){const _0x4ed62d=_0x4f06e4;getClientsWithBotID(_0x341476)['forEach'](_0x39dbe2=>{const _0x161a16=_0x2358;getSocket(_0x39dbe2['id'])[_0x161a16(0x2d5)](!![]),removeClient(_0x39dbe2['id']);}),dbConfig[_0x4ed62d(0x242)](_0x4ed62d(0x26f))['remove']({'botID':_0x341476})[_0x4ed62d(0x268)](),logger[_0x4ed62d(0x255)](_0x4ed62d(0x10e)+_0x341476),stopBot(_0x341476);try{if(fs['existsSync'](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x286))))fs['unlinkSync'](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x286)));if(fs[_0x4ed62d(0x1da)](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x1f9))))fs[_0x4ed62d(0x26c)](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x1f9)));if(fs[_0x4ed62d(0x1da)](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x265))))fs['unlinkSync'](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x265)));if(fs[_0x4ed62d(0x1da)](path[_0x4ed62d(0x25e)](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x288))))fs[_0x4ed62d(0x26c)](path['join'](configpath,_0x4ed62d(0x27b)+_0x341476+_0x4ed62d(0x288)));}catch(_0x92c1ac){if(_0x92c1ac)logger[_0x4ed62d(0x255)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x92c1ac);}config=getConfiguration(),io['to'](_0x4ed62d(0x289))['emit'](_0x4ed62d(0x26f),config),broadcastToBots('bots',JSON[_0x4ed62d(0x1f1)](config));}function toggleBot(_0x1b1c9d,_0x690b55,_0x4a3b45){const _0x2a307d=_0x4f06e4;dbConfig[_0x2a307d(0x242)](_0x2a307d(0x26f))[_0x2a307d(0x16b)]({'botID':_0x1b1c9d})[_0x2a307d(0xdc)]({'status':_0x690b55})['assign']({'live':_0x4a3b45})[_0x2a307d(0x268)]();if(_0x690b55=='enabled'||_0x690b55==_0x2a307d(0x2c4))logger[_0x2a307d(0x255)]('Enabled\x20Bot\x20'+_0x1b1c9d),startBot([_0x1b1c9d,userID],{'cwd':bbpath},function(_0x4cf70f){if(_0x4cf70f)logger['full'](_0x4cf70f);});else(_0x690b55=='disabled'||_0x690b55==_0x2a307d(0x22f))&&(logger[_0x2a307d(0x255)](_0x2a307d(0x15a)+_0x1b1c9d),stopBot(_0x1b1c9d));config=getConfiguration(),io['to'](_0x2a307d(0x289))[_0x2a307d(0x180)](_0x2a307d(0x26f),config),broadcastToBots(_0x2a307d(0x26f),JSON['stringify'](config));}function toggleStatus(_0x2ee55f){const _0x52ea05=_0x4f06e4;let _0x41d23a=dbConfig['get'](_0x52ea05(0x26f))['find']({'botID':_0x2ee55f})[_0x52ea05(0x21f)](),_0x22b2f7;if(_0x41d23a[_0x52ea05(0x216)]==='enabled')_0x22b2f7=_0x52ea05(0x2c3);else{if(_0x41d23a['status']===_0x52ea05(0x2c4))_0x22b2f7=_0x52ea05(0x22f);else{if(_0x41d23a[_0x52ea05(0x216)]==='new-disabled')_0x22b2f7=_0x52ea05(0x2c4);else{if(_0x41d23a[_0x52ea05(0x216)]===_0x52ea05(0x2c3))_0x22b2f7=_0x52ea05(0x284);}}}return _0x22b2f7;}function updateStatus(_0x8d75fc,_0x2faf40){const _0x1a64fa=_0x4f06e4;dbConfig[_0x1a64fa(0x242)](_0x1a64fa(0x26f))[_0x1a64fa(0x16b)]({'botID':_0x8d75fc})[_0x1a64fa(0xdc)]({'status':_0x2faf40})[_0x1a64fa(0x268)](),config=getConfiguration(),io['to']('botmanager')[_0x1a64fa(0x180)](_0x1a64fa(0x26f),config),broadcastToBots('bots',JSON[_0x1a64fa(0x1f1)](config));}function updateLive(_0x585b4d,_0x5b3ece){const _0x5c16ad=_0x4f06e4;dbConfig[_0x5c16ad(0x242)]('bots')[_0x5c16ad(0x16b)]({'botID':_0x585b4d})[_0x5c16ad(0xdc)]({'live':_0x5b3ece})[_0x5c16ad(0x268)](),config=getConfiguration(),io['to'](_0x5c16ad(0x289))['emit'](_0x5c16ad(0x26f),config),broadcastToBots('bots',JSON[_0x5c16ad(0x1f1)](config));}function updateBotName(_0x2655d9,_0x5b94d8){const _0x4b020c=_0x4f06e4;dbConfig[_0x4b020c(0x242)](_0x4b020c(0x26f))[_0x4b020c(0x16b)]({'botID':_0x2655d9})[_0x4b020c(0xdc)]({'botname':_0x5b94d8})[_0x4b020c(0x268)](),config=getConfiguration(),io['to'](_0x4b020c(0x289))[_0x4b020c(0x180)](_0x4b020c(0x26f),config),broadcastToBots(_0x4b020c(0x26f),JSON[_0x4b020c(0x1f1)](config));}function updateBotManager(){const _0x126962=_0x4f06e4;config=getConfiguration(),io['to'](_0x126962(0x289))['emit'](_0x126962(0x26f),config),broadcastToBots(_0x126962(0x26f),JSON[_0x126962(0x1f1)](config));}function toggleBotMode(_0x7dc948){const _0x454c36=_0x4f06e4;if(pid[_0x7dc948])pid[_0x7dc948][_0x454c36(0x290)]({'function':_0x454c36(0xef),'args':null});else{const _0xa6b463=configpath+_0x454c36(0x27b)+_0x7dc948+_0x454c36(0x286),_0x3aac9c=fs[_0x454c36(0x18b)](_0xa6b463),_0x198489=JSON[_0x454c36(0x296)](_0x3aac9c),_0x19a04a=_0x198489['bot'][0x0][_0x454c36(0x107)];_0x198489[_0x454c36(0x277)][0x0][_0x454c36(0x107)]=!_0x19a04a;const _0x5e4e2d=JSON['stringify'](_0x198489,null,0x2);fs[_0x454c36(0x278)](_0xa6b463,_0x5e4e2d),config=getConfiguration(),io['to'](_0x454c36(0x289))[_0x454c36(0x180)](_0x454c36(0x26f),config),broadcastToBots(_0x454c36(0x26f),JSON[_0x454c36(0x1f1)](config));}}function validateTelegram(_0x42e2f9){const _0x3e6326=_0x4f06e4;if(_0x42e2f9[_0x3e6326(0x163)][_0x3e6326(0x178)]!=settings[_0x3e6326(0x19b)]&&'@'+_0x42e2f9[_0x3e6326(0x163)][_0x3e6326(0x178)]!=settings[_0x3e6326(0x19b)]||_0x42e2f9[_0x3e6326(0x111)]['id']!=settings[_0x3e6326(0x248)])return sendTelegram(_0x42e2f9[_0x3e6326(0x111)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x3e6326(0x185)}),![];return!![];}async function initTelegram(){const _0x312ace=_0x4f06e4;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x270637=_0x312ace(0x17d);_0x270637+='\x0a',_0x270637+=_0x312ace(0x287),_0x270637+='/disable\x20-\x20disable\x20notifications\x0a',_0x270637+=_0x312ace(0x1c3),_0x270637+=_0x312ace(0x1ab),_0x270637+=_0x312ace(0x27d),_0x270637+=_0x312ace(0x29d),_0x270637+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x270637+='/names\x20-\x20show\x20bot\x20names\x0a',_0x270637+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x270637+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x270637+=_0x312ace(0xee),_0x270637+=_0x312ace(0x251),_0x270637+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x270637+=_0x312ace(0x113);let _0x29a32d=_0x312ace(0xdd);_0x29a32d+='\x0a',_0x29a32d+=_0x270637,tgBot[_0x312ace(0x171)]((_0x2e6426,_0x2f24c0)=>{const _0x3c8ebd=_0x312ace;logger[_0x3c8ebd(0x13f)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x3c8ebd(0x24f)](_0x3c8ebd(0x102),_0x2e6426);}),tgBot[_0x312ace(0x210)](async(_0x1fabd6,_0x265f73)=>{const _0x37b563=_0x312ace;if(!(!settings['telegramChatId']&&_0x1fabd6[_0x37b563(0x200)][_0x37b563(0x17c)][_0x37b563(0x1e1)]==_0x37b563(0x206))){if(!validateTelegram(_0x1fabd6))return;}_0x265f73();}),tgBot[_0x312ace(0x120)](_0x312ace(0x16e),async _0x2eac1e=>{const _0xb2a64a=_0x312ace;if(!settings[_0xb2a64a(0x248)])updateSetting('telegramChatId',_0x2eac1e[_0xb2a64a(0x111)]['id']);updateSetting(_0xb2a64a(0x103),!![]);if(!validateTelegram(_0x2eac1e))return;await sendTelegram(_0x2eac1e[_0xb2a64a(0x111)]['id'],_0x29a32d);}),tgBot[_0x312ace(0x120)](_0x312ace(0x11a),async _0x812d8a=>{const _0x2c5f3b=_0x312ace;updateSetting(_0x2c5f3b(0x103),!![]),await sendTelegram(_0x812d8a[_0x2c5f3b(0x111)]['id'],_0x2c5f3b(0x12c));}),tgBot[_0x312ace(0x120)]('disable',async _0x5b7070=>{const _0x156ac0=_0x312ace;await sendTelegram(_0x5b7070[_0x156ac0(0x111)]['id'],_0x156ac0(0xfd)),updateSetting('telegramEnabled',![]);}),tgBot[_0x312ace(0x120)](_0x312ace(0x1a1),async _0x37e86b=>{const _0x617a07=_0x312ace,_0x426bf4=Markup[_0x617a07(0x1f8)]([Markup['button'][_0x617a07(0x189)](_0x617a07(0x13b),_0x617a07(0x1a5)),Markup[_0x617a07(0x25c)][_0x617a07(0x189)](_0x617a07(0x299),_0x617a07(0x154)),Markup[_0x617a07(0x25c)][_0x617a07(0x189)](_0x617a07(0x23d),'config_all')]);_0x37e86b[_0x617a07(0x1d0)](_0x617a07(0x1ef),_0x426bf4);}),tgBot['action']('config_orders',async _0x5707ae=>{const _0x5afbfa=_0x312ace;_0x5707ae[_0x5afbfa(0x18c)](),updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5707ae[_0x5afbfa(0x111)]['id'],_0x5afbfa(0xfb));}),tgBot[_0x312ace(0x108)](_0x312ace(0x154),async _0x561487=>{const _0x4ce031=_0x312ace;_0x561487['editMessageReplyMarkup'](),updateSetting(_0x4ce031(0x12f),_0x4ce031(0x1ca)),updateSetting(_0x4ce031(0x103),!![]),await sendTelegram(_0x561487['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x312ace(0x108)]('config_all',async _0x38cb30=>{const _0x44df83=_0x312ace;_0x38cb30[_0x44df83(0x18c)](),updateSetting(_0x44df83(0x12f),_0x44df83(0x196)),updateSetting(_0x44df83(0x103),!![]),await sendTelegram(_0x38cb30[_0x44df83(0x111)]['id'],_0x44df83(0x27f));}),tgBot[_0x312ace(0x120)](_0x312ace(0x216),async _0x5d621f=>{const _0x319a14=_0x312ace,_0xcbdbb5=getBotsWithMode();let _0x23c3a4='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x319a14(0x1d5)](_0x1a9ca3=>{const _0x3fe7ba=_0x319a14,_0x10b9ee=_0xcbdbb5[_0x3fe7ba(0x16b)](_0x4cc62a=>_0x4cc62a[_0x3fe7ba(0x26b)]==_0x1a9ca3[_0x3fe7ba(0x26b)])[_0x3fe7ba(0x29b)];_0x23c3a4+=_0x3fe7ba(0x1c5)+_0x1a9ca3['botID']+':\x20'+_0x1a9ca3[_0x3fe7ba(0x216)]+_0x3fe7ba(0x2c9)+_0x10b9ee+_0x3fe7ba(0x2c9)+_0x1a9ca3[_0x3fe7ba(0x1eb)]+'\x0a';}),_0x23c3a4+='\x0a',_0x23c3a4+=_0x319a14(0x26a),_0x23c3a4+=!settings[_0x319a14(0x103)]?_0x319a14(0xfa):_0x319a14(0x11c),_0x23c3a4+=settings[_0x319a14(0x103)]?settings['telegramEvents']==_0x319a14(0x196)?_0x319a14(0xf9):_0x319a14(0x193)+settings[_0x319a14(0x12f)]+_0x319a14(0x1f3):'',await sendTelegram(_0x5d621f['chat']['id'],_0x23c3a4,{'parse_mode':_0x319a14(0x185)});}),tgBot[_0x312ace(0x120)]('restart',async _0x3b0ff3=>{const _0x3c162d=_0x312ace,_0x2ecb94=getEnabledBots();if(_0x2ecb94[_0x3c162d(0x1ea)]==0x0)await sendTelegram(_0x3b0ff3['chat']['id'],_0x3c162d(0xf4));else{if(_0x2ecb94[_0x3c162d(0x1ea)]>0x1)_0x2ecb94[_0x3c162d(0x27a)]({'botID':_0x3c162d(0x196)});let _0x438ac8=[],_0x4ad934=[];const _0x1079df=_0x2ecb94[_0x3c162d(0x1ea)]%0x4==0x0||_0x2ecb94[_0x3c162d(0x1ea)]%0x4==0x3||_0x2ecb94[_0x3c162d(0x1ea)]%0x3==0x1?0x4:0x3;let _0x50ba3c=0x0;_0x2ecb94[_0x3c162d(0x1d5)]((_0x16c081,_0x49266d)=>{const _0x2743e7=_0x3c162d;if(_0x49266d%_0x1079df==0x0)_0x4ad934=[];_0x4ad934[_0x2743e7(0x27a)](Markup[_0x2743e7(0x25c)][_0x2743e7(0x189)](_0x16c081[_0x2743e7(0x26b)]==_0x2743e7(0x196)?_0x2743e7(0x29e):_0x2743e7(0x1c5)+_0x16c081[_0x2743e7(0x26b)],_0x2743e7(0x219)+_0x16c081[_0x2743e7(0x26b)])),_0x49266d%_0x1079df==0x0&&(_0x438ac8[_0x50ba3c]=_0x4ad934,_0x50ba3c++);});const _0x668ac9=Markup[_0x3c162d(0x1f8)](_0x438ac8);_0x3b0ff3['reply'](_0x3c162d(0x1ed),_0x668ac9);}}),tgBot['action'](/restart_(.+)/,async _0x226ad4=>{const _0x5bf6a1=_0x312ace,_0x4dbdf5=_0x226ad4[_0x5bf6a1(0x1c2)][0x1];_0x226ad4[_0x5bf6a1(0x18c)](),_0x4dbdf5==_0x5bf6a1(0x196)?config[_0x5bf6a1(0x1d5)](_0x2e4d0f=>{const _0x28d6e8=_0x5bf6a1;restartBot(_0x2e4d0f[_0x28d6e8(0x26b)]);}):restartBot(_0x4dbdf5);}),tgBot[_0x312ace(0x120)]('on',async _0x449b00=>{const _0x1d8551=_0x312ace,_0xc43a92=getDisabledBots();if(_0xc43a92[_0x1d8551(0x1ea)]==0x0)await sendTelegram(_0x449b00[_0x1d8551(0x111)]['id'],_0x1d8551(0x2c5));else{if(_0xc43a92[_0x1d8551(0x1ea)]>0x1)_0xc43a92['push']({'botID':_0x1d8551(0x196)});let _0x41f375=[],_0x2bc178=[];const _0x2b7f9=_0xc43a92['length']%0x4==0x0||_0xc43a92['length']%0x4==0x3||_0xc43a92[_0x1d8551(0x1ea)]%0x3==0x1?0x4:0x3;let _0x39b2d2=0x0;_0xc43a92[_0x1d8551(0x1d5)]((_0x113960,_0x3d5911)=>{const _0x1e1e0d=_0x1d8551;if(_0x3d5911%_0x2b7f9==0x0)_0x2bc178=[];_0x2bc178[_0x1e1e0d(0x27a)](Markup[_0x1e1e0d(0x25c)]['callback'](_0x113960[_0x1e1e0d(0x26b)]==_0x1e1e0d(0x196)?_0x1e1e0d(0x29e):_0x1e1e0d(0x1c5)+_0x113960[_0x1e1e0d(0x26b)],_0x1e1e0d(0x249)+_0x113960[_0x1e1e0d(0x26b)])),_0x3d5911%_0x2b7f9==0x0&&(_0x41f375[_0x39b2d2]=_0x2bc178,_0x39b2d2++);});const _0x4ca4f0=Markup[_0x1d8551(0x1f8)](_0x41f375);_0x449b00[_0x1d8551(0x1d0)](_0x1d8551(0x17e),_0x4ca4f0);}}),tgBot['action'](/on_(.+)/,async _0x5a638d=>{const _0x410d22=_0x312ace,_0x554364=_0x5a638d[_0x410d22(0x1c2)][0x1];_0x5a638d[_0x410d22(0x18c)]();if(_0x554364=='all'){const _0x555bc8=getDisabledBots();await sendTelegram(_0x5a638d[_0x410d22(0x111)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x555bc8[_0x410d22(0x1d5)](_0x45ba5f=>{const _0x394c15=_0x410d22;if(_0x45ba5f[_0x394c15(0x26b)]!=_0x394c15(0x196))toggleBot(_0x45ba5f['botID'],toggleStatus(_0x45ba5f[_0x394c15(0x26b)]),_0x394c15(0x1b0));});}else await sendTelegram(_0x5a638d['chat']['id'],_0x410d22(0x147)+_0x554364),toggleBot(_0x554364,toggleStatus(_0x554364),_0x410d22(0x1b0));}),tgBot['command'](_0x312ace(0x1fc),async _0x2db8a0=>{const _0x10bb44=_0x312ace,_0x526b22=getEnabledBots();if(_0x526b22[_0x10bb44(0x1ea)]==0x0)await sendTelegram(_0x2db8a0[_0x10bb44(0x111)]['id'],_0x10bb44(0xf4));else{if(_0x526b22['length']>0x1)_0x526b22[_0x10bb44(0x27a)]({'botID':_0x10bb44(0x196)});let _0x5f3011=[],_0x4a2858=[];const _0x1bba33=_0x526b22[_0x10bb44(0x1ea)]%0x4==0x0||_0x526b22[_0x10bb44(0x1ea)]%0x4==0x3||_0x526b22[_0x10bb44(0x1ea)]%0x3==0x1?0x4:0x3;let _0x5f4d48=0x0;_0x526b22[_0x10bb44(0x1d5)]((_0x16c810,_0x62cf64)=>{const _0xaa08fd=_0x10bb44;if(_0x62cf64%_0x1bba33==0x0)_0x4a2858=[];_0x4a2858[_0xaa08fd(0x27a)](Markup[_0xaa08fd(0x25c)]['callback'](_0x16c810[_0xaa08fd(0x26b)]==_0xaa08fd(0x196)?'All\x20bots':_0xaa08fd(0x1c5)+_0x16c810[_0xaa08fd(0x26b)],_0xaa08fd(0x1d9)+_0x16c810[_0xaa08fd(0x26b)])),_0x62cf64%_0x1bba33==0x0&&(_0x5f3011[_0x5f4d48]=_0x4a2858,_0x5f4d48++);});const _0x116c22=Markup[_0x10bb44(0x1f8)](_0x5f3011);_0x2db8a0[_0x10bb44(0x1d0)](_0x10bb44(0x1af),_0x116c22);}}),tgBot[_0x312ace(0x108)](/off_(.+)/,async _0x1ecbfa=>{const _0x4ffe65=_0x312ace,_0x211c06=_0x1ecbfa[_0x4ffe65(0x1c2)][0x1];_0x1ecbfa[_0x4ffe65(0x18c)]();if(_0x211c06=='all'){const _0x902957=getEnabledBots();await sendTelegram(_0x1ecbfa[_0x4ffe65(0x111)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x902957[_0x4ffe65(0x1d5)](_0x1f0051=>{const _0x48b473=_0x4ffe65;if(_0x1f0051[_0x48b473(0x26b)]!=_0x48b473(0x196))toggleBot(_0x1f0051['botID'],toggleStatus(_0x1f0051[_0x48b473(0x26b)]),_0x48b473(0x1b0));});}else await sendTelegram(_0x1ecbfa[_0x4ffe65(0x111)]['id'],_0x4ffe65(0x24e)+_0x211c06),toggleBot(_0x211c06,toggleStatus(_0x211c06),_0x4ffe65(0x1b0));}),tgBot[_0x312ace(0x120)](_0x312ace(0x2d3),async _0x43cfdb=>{const _0xfa7d9f=_0x312ace,_0x58277c=getEnabledBots();if(_0x58277c['length']==0x0)await sendTelegram(_0x43cfdb[_0xfa7d9f(0x111)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x58277c[_0xfa7d9f(0x1ea)]>0x1){let _0x64474e=[],_0x5c2a25=[];const _0xc23da5=_0x58277c[_0xfa7d9f(0x1ea)]%0x4==0x0||_0x58277c['length']%0x4==0x3||_0x58277c[_0xfa7d9f(0x1ea)]%0x3==0x1?0x4:0x3;let _0x5147f1=0x0;_0x58277c['forEach']((_0x1cc5b1,_0x141530)=>{const _0x576396=_0xfa7d9f;if(_0x141530%_0xc23da5==0x0)_0x5c2a25=[];_0x5c2a25[_0x576396(0x27a)](Markup['button']['callback'](_0x576396(0x1c5)+_0x1cc5b1[_0x576396(0x26b)],_0x576396(0x190)+_0x1cc5b1[_0x576396(0x26b)])),_0x141530%_0xc23da5==0x0&&(_0x64474e[_0x5147f1]=_0x5c2a25,_0x5147f1++);});const _0x206c8e=Markup[_0xfa7d9f(0x1f8)](_0x64474e);_0x43cfdb[_0xfa7d9f(0x1d0)](_0xfa7d9f(0x119),_0x206c8e);}else{const _0x2f4cbf=_0x58277c[0x0][_0xfa7d9f(0x26b)];if(pid[_0x2f4cbf])pid[_0x2f4cbf][_0xfa7d9f(0x290)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x356bc7=>{const _0x43d72a=_0x356bc7['match'][0x1];_0x356bc7['editMessageReplyMarkup']();if(pid[_0x43d72a])pid[_0x43d72a]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x312ace(0x120)](_0x312ace(0x161),async _0x23859f=>{const _0x1846c9=_0x312ace,_0x55ac2b=getEnabledBots();if(_0x55ac2b[_0x1846c9(0x1ea)]==0x0)await sendTelegram(_0x23859f[_0x1846c9(0x111)]['id'],_0x1846c9(0xf4));else{if(_0x55ac2b[_0x1846c9(0x1ea)]>0x1){let _0x12f9cc=[],_0x3e8abe=[];const _0x4f67db=_0x55ac2b[_0x1846c9(0x1ea)]%0x4==0x0||_0x55ac2b[_0x1846c9(0x1ea)]%0x4==0x3||_0x55ac2b[_0x1846c9(0x1ea)]%0x3==0x1?0x4:0x3;let _0x2786ac=0x0;_0x55ac2b[_0x1846c9(0x1d5)]((_0x582d8b,_0x5320b2)=>{const _0x411520=_0x1846c9;if(_0x5320b2%_0x4f67db==0x0)_0x3e8abe=[];_0x3e8abe[_0x411520(0x27a)](Markup[_0x411520(0x25c)][_0x411520(0x189)](_0x411520(0x1c5)+_0x582d8b[_0x411520(0x26b)],_0x411520(0x1e0)+_0x582d8b[_0x411520(0x26b)])),_0x5320b2%_0x4f67db==0x0&&(_0x12f9cc[_0x2786ac]=_0x3e8abe,_0x2786ac++);});const _0x537508=Markup['inlineKeyboard'](_0x12f9cc);_0x23859f[_0x1846c9(0x1d0)](_0x1846c9(0x1ba),_0x537508);}else{const _0x9e3202=_0x55ac2b[0x0][_0x1846c9(0x26b)];if(pid[_0x9e3202])pid[_0x9e3202]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x312ace(0x108)](/portfolio_(.+)/,async _0x11dad9=>{const _0x486818=_0x312ace,_0x5ab942=_0x11dad9[_0x486818(0x1c2)][0x1];_0x11dad9[_0x486818(0x18c)]();if(pid[_0x5ab942])pid[_0x5ab942][_0x486818(0x290)]({'function':_0x486818(0x20b),'args':null});}),tgBot['command'](_0x312ace(0x200),async _0x1785f5=>{const _0x1b68fb=_0x312ace;await getMessages();if(!updateAvailable)await sendTelegram(_0x1785f5['chat']['id'],_0x1b68fb(0x132));else{if(!validInstallation)await sendTelegram(_0x1785f5[_0x1b68fb(0x111)]['id'],_0x1b68fb(0x11b));else{const _0x288d21=Markup['inlineKeyboard']([Markup[_0x1b68fb(0x25c)][_0x1b68fb(0x189)]('Yes',_0x1b68fb(0x1c7)),Markup['button'][_0x1b68fb(0x189)]('No',_0x1b68fb(0x1cb))]);_0x1785f5[_0x1b68fb(0x1d0)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x288d21);}}}),tgBot[_0x312ace(0x108)](/update_(.+)/,async _0x1471e3=>{const _0x21d18c=_0x312ace,_0x3d5086=_0x1471e3[_0x21d18c(0x1c2)][0x1];_0x1471e3[_0x21d18c(0x18c)](),_0x3d5086==_0x21d18c(0x1a9)&&(await sendTelegram(_0x1471e3['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x21d18c(0x200))),_0x3d5086=='no'&&await sendTelegram(_0x1471e3['chat']['id'],_0x21d18c(0x129));}),tgBot[_0x312ace(0x120)](_0x312ace(0x1d6),async _0x241838=>{const _0x241061=_0x312ace;if(!validInstallation)await sendTelegram(_0x241838[_0x241061(0x111)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x450b5d=Markup['inlineKeyboard']([Markup['button'][_0x241061(0x189)]('Yes',_0x241061(0x204)),Markup[_0x241061(0x25c)]['callback']('No',_0x241061(0x16d))]);_0x241838[_0x241061(0x1d0)](_0x241061(0x1e8),_0x450b5d);}}),tgBot[_0x312ace(0x108)](/reinstall_(.+)/,async _0x306188=>{const _0x52c0d2=_0x312ace,_0x18374b=_0x306188['match'][0x1];_0x306188['editMessageReplyMarkup'](),_0x18374b=='yes'&&(await sendTelegram(_0x306188[_0x52c0d2(0x111)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x52c0d2(0x1d6))),_0x18374b=='no'&&await sendTelegram(_0x306188[_0x52c0d2(0x111)]['id'],_0x52c0d2(0x1cf));}),tgBot['command'](_0x312ace(0x135),async _0x54d4ea=>{const _0x477be1=_0x312ace,_0x1c9807=getBotsWithMode();if(_0x1c9807[_0x477be1(0x1ea)]==0x0)await sendTelegram(_0x54d4ea[_0x477be1(0x111)]['id'],_0x477be1(0xf4));else{let _0x50b0f1=[],_0xf8f40b=[];const _0x6c6efb=0x2;let _0x102a0a=0x0;_0x1c9807[_0x477be1(0x1d5)]((_0x384254,_0x1a6195)=>{const _0x14a19e=_0x477be1;if(_0x1a6195%_0x6c6efb==0x0)_0xf8f40b=[];_0xf8f40b[_0x14a19e(0x27a)](Markup[_0x14a19e(0x25c)][_0x14a19e(0x189)](_0x14a19e(0x1c5)+_0x384254['botID']+'\x20('+_0x384254[_0x14a19e(0x29b)]+')',_0x14a19e(0x2cf)+_0x384254[_0x14a19e(0x26b)])),_0x1a6195%_0x6c6efb==0x0&&(_0x50b0f1[_0x102a0a]=_0xf8f40b,_0x102a0a++);});const _0x132589=Markup[_0x477be1(0x1f8)](_0x50b0f1);_0x54d4ea[_0x477be1(0x1d0)](_0x477be1(0x1a6),_0x132589);}}),tgBot[_0x312ace(0x108)](/toggle_(.+)/,async _0x1a50ef=>{const _0x4315e5=_0x312ace,_0x370a42=_0x1a50ef[_0x4315e5(0x1c2)][0x1];_0x1a50ef[_0x4315e5(0x18c)]();const _0x645e18=getBotsWithMode(),_0x5313ea=_0x645e18[_0x4315e5(0x16b)](_0x1a43a0=>_0x1a43a0[_0x4315e5(0x26b)]==_0x370a42),_0x461a0b=_0x5313ea['mode']=='auto'?_0x4315e5(0x2d9):_0x4315e5(0x2d1);await sendTelegram(_0x1a50ef['chat']['id'],_0x4315e5(0x1f7)+_0x370a42+_0x4315e5(0x155)+_0x461a0b+_0x4315e5(0x173)),toggleBotMode(_0x370a42);}),tgBot['command'](_0x312ace(0x142),async _0x30940d=>{const _0x1ebd25=_0x312ace;let _0x11e8c0='';config[_0x1ebd25(0x1d5)](_0x15cee5=>{const _0x28273b=_0x1ebd25;_0x11e8c0+=_0x28273b(0x1c5)+_0x15cee5['botID']+':\x20'+_0x15cee5['botname']+'\x0a';}),await sendTelegram(_0x30940d[_0x1ebd25(0x111)]['id'],_0x11e8c0,{'parse_mode':_0x1ebd25(0x185)});}),tgBot[_0x312ace(0x120)](_0x312ace(0x1e2),async _0xbf296f=>{const _0x192e83=_0x312ace;await sendTelegram(_0xbf296f[_0x192e83(0x111)]['id'],_0x270637);}),process[_0x312ace(0x199)]('SIGINT',()=>tgBot[_0x312ace(0x1e4)]('SIGINT')),process['once'](_0x312ace(0x159),()=>tgBot['stop'](_0x312ace(0x159))),tgBot[_0x312ace(0x225)]();}}function disableTelegram(){const _0xc1d4b7=_0x4f06e4;tgBot&&tgBot[_0xc1d4b7(0x1e4)]();}async function sendTelegram(_0x18e183,_0x4e21aa,_0xa69052){const _0x27875e=_0x4f06e4;_0xa69052={..._0xa69052,'disable_web_page_preview':!![]};try{await tgBot[_0x27875e(0x1d7)][_0x27875e(0x246)](_0x18e183,_0x4e21aa,_0xa69052);}catch(_0x5b6c86){console[_0x27875e(0x192)](_0x27875e(0x254),_0x5b6c86);}}async function sendTelegramBot(_0x5d2d33,_0x4d422a){const _0xcce0a6=_0x4f06e4;if(settings['telegramEnabled']){if(settings[_0xcce0a6(0x12f)]=='all'||(_0x4d422a[_0xcce0a6(0x18e)]==_0xcce0a6(0x2a3)||_0x4d422a[_0xcce0a6(0x18e)]==_0xcce0a6(0x239)||_0x4d422a[_0xcce0a6(0x18e)]==_0xcce0a6(0xd9))&&settings[_0xcce0a6(0x12f)]==_0xcce0a6(0x1ca)||_0x4d422a[_0xcce0a6(0x18e)]=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0xcce0a6(0x248)]){if(_0x4d422a['showname'])await sendTelegram(settings[_0xcce0a6(0x248)],_0x4d422a[_0xcce0a6(0x2d6)]+_0xcce0a6(0x20f)+_0x4d422a[_0xcce0a6(0x28f)]);else await sendTelegram(settings[_0xcce0a6(0x248)],_0xcce0a6(0x1c5)+_0x5d2d33+_0xcce0a6(0x20f)+_0x4d422a[_0xcce0a6(0x28f)]);}}}}async function sendTelegramMsg(_0x260ed6,_0x245dfb=_0x4f06e4(0x185)){const _0x429d8d=_0x4f06e4;return settings[_0x429d8d(0x103)]&&tgBot&&settings[_0x429d8d(0x248)]?(await sendTelegram(settings[_0x429d8d(0x248)],_0x260ed6,{'parse_mode':_0x245dfb}),!![]):![];}function getDeviceWithIp(_0x2cbb2c){const _0x4e0dc0=_0x4f06e4;return devices[_0x4e0dc0(0x16b)](_0x140765=>_0x140765['ip']===_0x2cbb2c);}async function temporaryAccess2FA(_0x38b68b,_0x2e030f){const _0x5ba56c=_0x4f06e4;let _0x1980fe=new Date(),_0x19784a=![];if(lastIpApproval){if(_0x1980fe-lastIpApproval<0x1388)_0x19784a=!![];}lastIpApproval=new Date();if(_0x19784a)return;if(tgBot&&settings[_0x5ba56c(0x248)]){const _0x34dd56=uuidRandom();tmpStorage[_0x34dd56]={'uuid':_0x38b68b,'externalip':_0x2e030f};const _0x3664c4=Markup[_0x5ba56c(0x1f8)]([Markup[_0x5ba56c(0x25c)][_0x5ba56c(0x189)](_0x5ba56c(0x203),_0x5ba56c(0x257)+_0x34dd56),Markup[_0x5ba56c(0x25c)][_0x5ba56c(0x189)]('15\x20min',_0x5ba56c(0x194)+_0x34dd56),Markup[_0x5ba56c(0x25c)]['callback'](_0x5ba56c(0x148),_0x5ba56c(0x165)+_0x34dd56),Markup[_0x5ba56c(0x25c)][_0x5ba56c(0x189)]('reject','tempaccess_reject_'+_0x34dd56)]);await sendTelegram(settings[_0x5ba56c(0x248)],_0x5ba56c(0x279)+normalizeIP(_0x2e030f)[_0x5ba56c(0x1de)]+'\x20?',_0x3664c4),tgBot[_0x5ba56c(0x108)](/tempaccess_(.+)_(.+)/,async _0x8cb629=>{const _0x154da6=_0x5ba56c,_0x2a6ad7=_0x8cb629['match'][0x1],_0x4bea13=_0x8cb629[_0x154da6(0x1c2)][0x2],{uuid:_0x2d6add,externalip:_0x567878}=tmpStorage[_0x4bea13];delete tmpStorage[_0x4bea13],_0x8cb629[_0x154da6(0x18c)](),devices[_0x2d6add][_0x154da6(0x117)]={'clientip':_0x567878,'timestamp':new Date()['getTime'](),'expiry':_0x2a6ad7},_0x2a6ad7!=_0x154da6(0x274)?(await sendTelegram(_0x8cb629[_0x154da6(0x111)]['id'],_0x154da6(0x166)+_0x2a6ad7+'\x20minutes',{'parse_mode':_0x154da6(0x185)}),io['to'](_0x2d6add)[_0x154da6(0x180)](_0x154da6(0x216),{'access':{'allow':![],'reason':_0x154da6(0xdf),'token':null}})):(await sendTelegram(_0x8cb629[_0x154da6(0x111)]['id'],_0x154da6(0x258)),io['to'](_0x2d6add)['emit'](_0x154da6(0x216),{'access':{'allow':![],'reason':_0x154da6(0x162),'token':null}}));});}}async function loginAccess2FA(_0x1c254c,_0x247f6a){const _0x3ad2c5=_0x4f06e4;if(tgBot&&settings[_0x3ad2c5(0x248)]){const _0x43dd9e=uuidRandom();tmpStorage[_0x43dd9e]={'uuid':_0x1c254c,'externalip':_0x247f6a};const _0x52be78=Markup[_0x3ad2c5(0x1f8)]([Markup['button']['callback'](_0x3ad2c5(0x280),'login2fa_'+loginExpiry+'_'+_0x43dd9e),Markup[_0x3ad2c5(0x25c)][_0x3ad2c5(0x189)](_0x3ad2c5(0x274),_0x3ad2c5(0x19a)+_0x43dd9e)]);await sendTelegram(settings[_0x3ad2c5(0x248)],_0x3ad2c5(0x1ec)+normalizeIP(_0x247f6a)[_0x3ad2c5(0x1de)]+'\x20?',_0x52be78),tgBot[_0x3ad2c5(0x108)](/login2fa_(.+)_(.+)/,async _0x23a56d=>{const _0x5414e4=_0x3ad2c5,_0x2b6644=_0x23a56d[_0x5414e4(0x1c2)][0x1],_0x67a86c=_0x23a56d['match'][0x2],{uuid:_0x3b362a,externalip:_0x1eae67}=tmpStorage[_0x67a86c];delete tmpStorage[_0x67a86c],_0x23a56d[_0x5414e4(0x18c)](),devices[_0x3b362a][_0x5414e4(0x283)]={'clientip':_0x1eae67,'timestamp':new Date()['getTime'](),'expiry':_0x2b6644},_0x2b6644!=_0x5414e4(0x274)?(await sendTelegram(_0x23a56d[_0x5414e4(0x111)]['id'],_0x5414e4(0x214),{'parse_mode':_0x5414e4(0x185)}),io['to'](_0x3b362a)[_0x5414e4(0x180)](_0x5414e4(0x216),{'access':{'allow':![],'reason':_0x5414e4(0xdf),'token':null}})):(await sendTelegram(_0x23a56d['chat']['id'],_0x5414e4(0x2ca)),io['to'](_0x3b362a)['emit']('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2af64e=_0x4f06e4;return dbConfig[_0x2af64e(0x242)](_0x2af64e(0x26f))['sortBy'](_0x2af64e(0x26b))['filter']({'status':_0x2af64e(0x284)})[_0x2af64e(0x21f)]()||[];}function getDisabledBots(){const _0x4ca570=_0x4f06e4;return dbConfig['get']('bots')[_0x4ca570(0x1fa)]('botID')[_0x4ca570(0x1d2)]({'status':'disabled'})[_0x4ca570(0x21f)]()||[];}function getBotAttributes(_0x38c822){const _0x503aef=_0x4f06e4;let _0x37a943={};const _0x5946a5=configpath+_0x503aef(0x27b)+_0x38c822+'-config.json',_0x129373=fs[_0x503aef(0x1da)](_0x5946a5);if(_0x129373){const _0x4283ee=fs[_0x503aef(0x18b)](_0x5946a5);try{const _0x97da63=JSON[_0x503aef(0x296)](_0x4283ee),_0x18ae25=_0x97da63?_0x97da63[_0x503aef(0x277)][0x0][_0x503aef(0x107)]:![];_0x37a943[_0x503aef(0x29b)]=_0x18ae25?_0x503aef(0x2d1):_0x503aef(0x2d9),_0x37a943[_0x503aef(0x2d6)]=_0x97da63?_0x97da63[_0x503aef(0x277)][0x0]['botname']:'Bot\x20'+_0x38c822;}catch(_0x584dda){_0x37a943[_0x503aef(0x29b)]='manual',_0x37a943[_0x503aef(0x2d6)]=_0x503aef(0x1c5)+_0x38c822;}}else _0x37a943[_0x503aef(0x29b)]=_0x503aef(0x2d9),_0x37a943[_0x503aef(0x2d6)]=_0x503aef(0x1c5)+_0x38c822;return _0x37a943;}function getBotsWithMode(){const _0x29d90b=_0x4f06e4,_0x3e7bdf=dbConfig[_0x29d90b(0x242)](_0x29d90b(0x26f))['sortBy'](_0x29d90b(0x26b))['value']()||[];return _0x3e7bdf['forEach'](_0x5cc581=>{const _0x254900=_0x29d90b;let _0x1703ea=getBotAttributes(_0x5cc581[_0x254900(0x26b)]);_0x5cc581[_0x254900(0x29b)]=_0x1703ea[_0x254900(0x29b)];}),_0x3e7bdf;}function getBotExchanges(){const _0x4d68bb=_0x4f06e4;let _0x19ee9c=[];const _0x504036=dbConfig['get'](_0x4d68bb(0x26f))[_0x4d68bb(0x1fa)]('botID')[_0x4d68bb(0x21f)]()||[];_0x504036['forEach'](_0x468e63=>{const _0x141fb5=_0x4d68bb;if(_0x468e63[_0x141fb5(0x216)]==_0x141fb5(0x284)){const _0x347424=configpath+_0x141fb5(0x27b)+_0x468e63[_0x141fb5(0x26b)]+'-config.json',_0x4350e7=fs[_0x141fb5(0x1da)](_0x347424);let _0x327abd;if(_0x4350e7){const _0x37a0ce=fs[_0x141fb5(0x18b)](_0x347424);try{const _0x19d5fa=JSON[_0x141fb5(0x296)](_0x37a0ce);_0x327abd=_0x19d5fa?_0x19d5fa[_0x141fb5(0x277)][0x0][_0x141fb5(0x2de)]:null;}catch(_0x354f5a){}}if(_0x327abd)_0x19ee9c[_0x141fb5(0x27a)](_0x327abd);}});const _0x27c740=[...new Set(_0x19ee9c)][_0x4d68bb(0x143)]();return _0x27c740;}async function initUser(){const _0x360318=_0x4f06e4;if(!settings['userid']){const _0x2512d8=uuidRandom();mixpanel[_0x360318(0x2b6)](_0x2512d8),updateSetting(_0x360318(0x1e9),_0x2512d8);}}async function initSecure(){const _0x5e41e8=_0x4f06e4;let _0x4bdfb0=getSecure();if(!_0x4bdfb0[_0x5e41e8(0x151)](_0x5e41e8(0x2bc))){let _0x164f33=await generateKeys();_0x4bdfb0[_0x5e41e8(0x1dd)]=_0x164f33[_0x5e41e8(0x1dd)],_0x4bdfb0[_0x5e41e8(0x10c)]=_0x164f33['privateKey'],_0x4bdfb0[_0x5e41e8(0x2bc)]=crypto[_0x5e41e8(0x19e)](0x20)[_0x5e41e8(0x202)](_0x5e41e8(0x208));;storeSecure(_0x4bdfb0);}}function getSettings(){const _0x547828=_0x4f06e4;return dbSettings[_0x547828(0x242)]('settings')[_0x547828(0x21f)]()||{};}function getSecure(){const _0x384177=_0x4f06e4;return dbSecure[_0x384177(0x242)]('secure')['value']()||{};}function getBlacklist(){const _0x3c9359=_0x4f06e4;return dbSecure['get']('blacklist')[_0x3c9359(0x21f)]()||[];}function broadcastToBots(_0x565da7,_0x2101cd){const _0x5ddfc2=_0x4f06e4;config[_0x5ddfc2(0x1d5)](_0x53c5d8=>{const _0x8f71cd=_0x5ddfc2;if(_0x53c5d8[_0x8f71cd(0x216)]=='enabled'&&_0x53c5d8[_0x8f71cd(0x1eb)]==_0x8f71cd(0x149)||_0x53c5d8['status']==_0x8f71cd(0x2c4)&&_0x53c5d8[_0x8f71cd(0x1eb)]=='running'){if(pid[_0x53c5d8[_0x8f71cd(0x26b)]])pid[_0x53c5d8[_0x8f71cd(0x26b)]]['send']({[_0x565da7]:_0x2101cd});}});}async function storeSettings(_0x1610ec,_0x1d7e94=![]){const _0x47f5e0=_0x4f06e4;_0x1610ec={...settings,..._0x1610ec};if(_0x1d7e94&&_0x1610ec[_0x47f5e0(0x20d)]!=_0x47f5e0(0x2cb)&&_0x1610ec[_0x47f5e0(0x20d)]!=_0x47f5e0(0x188)&&_0x1610ec[_0x47f5e0(0x20d)]!=''){const _0x25818e=decryptRSA(secure['privateKey'],_0x1610ec['bbPassword'])[_0x47f5e0(0x138)](_0x47f5e0(0x27c))[0x0],_0x1b23c7=bcrypt[_0x47f5e0(0x146)](_0x25818e,saltRounds);_0x1610ec={..._0x1610ec,'bbPassword':_0x1b23c7};}if(_0x1d7e94&&_0x1610ec[_0x47f5e0(0x122)]!=_0x47f5e0(0x2cb)&&_0x1610ec[_0x47f5e0(0x122)]!=_0x47f5e0(0x188)&&_0x1610ec['telegramToken']!=''){const _0x2507cc=decryptRSA(secure[_0x47f5e0(0x10c)],_0x1610ec[_0x47f5e0(0x122)])['split'](_0x47f5e0(0x27c))[0x0];_0x1610ec={..._0x1610ec,'telegramToken':_0x2507cc};}if(_0x1d7e94&&_0x1610ec['marketcapApi']!=_0x47f5e0(0x2cb)&&_0x1610ec[_0x47f5e0(0x28d)]!=_0x47f5e0(0x188)&&_0x1610ec[_0x47f5e0(0x28d)]!=''){const _0x48c138=decryptRSA(secure[_0x47f5e0(0x10c)],_0x1610ec['marketcapApi'])[_0x47f5e0(0x138)](_0x47f5e0(0x27c))[0x0];_0x1610ec={..._0x1610ec,'marketcapApi':_0x48c138};}const _0x2de970=_0x1610ec[_0x47f5e0(0x122)]!=_0x47f5e0(0x2cb)&&_0x1610ec[_0x47f5e0(0x122)]!=settings[_0x47f5e0(0x122)]||_0x1610ec[_0x47f5e0(0x19b)]!=settings['telegramUsername'],_0x4d1fc0=_0x1610ec[_0x47f5e0(0x122)]==''||_0x1610ec[_0x47f5e0(0x19b)]=='',_0x28b3e9=_0x1610ec[_0x47f5e0(0x28d)]&&_0x1610ec[_0x47f5e0(0x28d)]!='************'&&_0x1610ec[_0x47f5e0(0x28d)]!=settings[_0x47f5e0(0x122)];_0x2de970&&(_0x1610ec[_0x47f5e0(0x248)]=null,_0x1610ec[_0x47f5e0(0x12f)]='all');for(const [_0x16d153,_0x2692b3]of Object[_0x47f5e0(0x2cc)](_0x1610ec)){if(_0x16d153==_0x47f5e0(0x122)&&_0x2692b3==_0x47f5e0(0x2cb)){_0x1610ec[_0x47f5e0(0x122)]=settings['telegramToken'];continue;};if(_0x16d153==_0x47f5e0(0x20d)&&_0x2692b3==_0x47f5e0(0x2cb)){_0x1610ec[_0x47f5e0(0x20d)]=settings[_0x47f5e0(0x20d)];continue;};if(_0x16d153==_0x47f5e0(0x28d)&&_0x2692b3==_0x47f5e0(0x2cb)){_0x1610ec['marketcapApi']=settings[_0x47f5e0(0x28d)];continue;};dbSettings[_0x47f5e0(0x15d)](_0x47f5e0(0x2d4)+_0x16d153,_0x2692b3)[_0x47f5e0(0x268)]();}settings=_0x1610ec,io['to'](_0x47f5e0(0x289))[_0x47f5e0(0x180)](_0x47f5e0(0x281),cleanSettings()),broadcastToBots(_0x47f5e0(0x10d),settings[_0x47f5e0(0x10d)]),broadcastToBots(_0x47f5e0(0x17b),settings[_0x47f5e0(0x17b)]),broadcastToBots(_0x47f5e0(0x28d),settings[_0x47f5e0(0x28d)]);if(_0x2de970&&!_0x4d1fc0)initTelegram();if(_0x2de970&&_0x4d1fc0)disableTelegram();getAllClients()[_0x47f5e0(0x1d5)](_0x51ef04=>{const _0x5888c3=_0x47f5e0;getSocket(_0x51ef04['id'])[_0x5888c3(0x180)](_0x5888c3(0x216),{'access':{'allow':![],'reason':_0x5888c3(0xdf),'token':null}});}),_0x28b3e9&&(await sleep(0xbb8),testMarketcapApi(_0x1610ec[_0x47f5e0(0x28d)]));}async function testMarketcapApi(_0x12cb83){const _0x48cee0=_0x4f06e4,_0x228860=['BCT',_0x48cee0(0x1c6)];try{await axios['get'](_0x48cee0(0x233),{'headers':{'X-CMC_PRO_API_KEY':_0x12cb83},'params':{'symbol':_0x228860[_0x48cee0(0x202)]()}});}catch(_0xbaa676){_0xbaa676['toString']()[_0x48cee0(0x187)](_0x48cee0(0x262))?(io['to'](_0x48cee0(0x289))[_0x48cee0(0x180)](_0x48cee0(0x2d0),_0x48cee0(0x25a)),logger[_0x48cee0(0x255)](_0x48cee0(0x25a))):(io['to'](_0x48cee0(0x289))[_0x48cee0(0x180)](_0x48cee0(0x2d0),_0x48cee0(0xf6)),logger['full'](_0x48cee0(0xf6)),logger[_0x48cee0(0x24f)]('Error\x20details:',_0xbaa676['toString']()+_0x48cee0(0x276)+_0xbaa676[_0x48cee0(0x2bd)]));return;}logger[_0x48cee0(0x24f)](_0x48cee0(0x11d));}function updateSetting(_0xc4c673,_0x17e23a){dbSettings['set']('settings.'+_0xc4c673,_0x17e23a)['write'](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0xaa511){const _0x19a12f=_0x4f06e4;dbSecure['get']('secure')[_0x19a12f(0x27a)](_0xaa511)['write'](),secure=_0xaa511;}function addBlacklist(_0x412cd4){const _0x49d46d=_0x4f06e4;cleanBlacklist();let _0x16f5ab;devices[_0x412cd4]['telegramIpApproval']?_0x16f5ab=Math[_0x49d46d(0x115)](devices[_0x412cd4][_0x49d46d(0x117)][_0x49d46d(0x259)],loginExpiry):_0x16f5ab=loginExpiry,dbSecure[_0x49d46d(0x242)](_0x49d46d(0x2a4))[_0x49d46d(0x27a)]({'expiry':new Date()['getTime']()+_0x16f5ab*0x3c*0x3e8,'token':devices[_0x412cd4][_0x49d46d(0xd8)][_0x49d46d(0x123)]})['write'](),blacklist=dbSecure[_0x49d46d(0x242)](_0x49d46d(0x2a4))[_0x49d46d(0x21f)]();}function cleanBlacklist(){const _0x364d90=_0x4f06e4;let _0x2df7f2=dbSecure[_0x364d90(0x242)](_0x364d90(0x2a4))['cloneDeep']()[_0x364d90(0x21f)](),_0x50ecb9=new Date()['getTime']();_0x2df7f2[_0x364d90(0x1d5)](_0x551e03=>{const _0x3279b4=_0x364d90;_0x551e03[_0x3279b4(0x259)]<_0x50ecb9&&dbSecure[_0x3279b4(0x242)](_0x3279b4(0x2a4))[_0x3279b4(0x10f)]({'expiry':_0x551e03[_0x3279b4(0x259)]})[_0x3279b4(0x268)]();});}function initStates(){let _0xb8b26b=getConfiguration();_0xb8b26b['forEach'](_0x55b738=>{_0x55b738['live']='stopped';}),storeConfiguration(_0xb8b26b);}async function generateKeys(){const _0x3b8cef=_0x4f06e4,_0x48fd18=forge[_0x3b8cef(0xdb)]['rsa'][_0x3b8cef(0x2b8)]({'bits':0x1000,'e':0x10001}),_0x45362f=forge[_0x3b8cef(0xdb)][_0x3b8cef(0x105)](_0x48fd18['privateKey']),_0x1dd5ac=forge['pki'][_0x3b8cef(0x1cd)](_0x48fd18[_0x3b8cef(0x1dd)]);return{'privateKey':_0x45362f,'publicKey':_0x1dd5ac};}async function oneTimeMigration(){const _0x5067f4=_0x4f06e4;let _0x7ecab5=getSettings(),_0x3b01fe=![];!_0x7ecab5[_0x5067f4(0x151)](_0x5067f4(0x1db))&&(_0x7ecab5['lastmsgtelegram']=0x0,_0x3b01fe=!![]);!_0x7ecab5[_0x5067f4(0x151)](_0x5067f4(0x291))&&(_0x7ecab5['lastmsgemitted']=0x0,_0x3b01fe=!![]);!_0x7ecab5[_0x5067f4(0x151)](_0x5067f4(0x211))&&(_0x7ecab5[_0x5067f4(0x211)]='0.0.0',_0x3b01fe=!![]);!_0x7ecab5[_0x5067f4(0x151)]('onepagemode')&&(_0x7ecab5[_0x5067f4(0x17b)]=![],_0x3b01fe=!![]);!_0x7ecab5['hasOwnProperty'](_0x5067f4(0x28d))&&(_0x7ecab5[_0x5067f4(0x28d)]='',_0x3b01fe=!![]);if(_0x3b01fe)storeSettings(_0x7ecab5);try{fs[_0x5067f4(0x13e)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x4de070=>{const _0x4e8780=_0x5067f4;if(!_0x4de070[_0x4e8780(0x156)]()){if(!_0x4de070[_0x4e8780(0x1c1)][_0x4e8780(0x174)](_0x4e8780(0x130)))fs[_0x4e8780(0x26c)](configbackuppath+_0x4de070['name']);}else fs[_0x4e8780(0x25b)](configbackuppath+_0x4de070[_0x4e8780(0x1c1)],{'recursive':!![]});});}catch(_0x2be847){logger[_0x5067f4(0x24f)](_0x5067f4(0x201),_0x2be847);}}function storeConfiguration(_0x1481ad){const _0x74a415=_0x4f06e4;dbConfig[_0x74a415(0x242)](_0x74a415(0x26f))[_0x74a415(0x10f)]()[_0x74a415(0x268)](),dbConfig[_0x74a415(0x242)](_0x74a415(0x26f))[_0x74a415(0x27a)](..._0x1481ad)['write'](),config=_0x1481ad;}async function resetPassword(){const _0x313c0b=_0x4f06e4;if(tgBot&&settings[_0x313c0b(0x248)]){const _0x12eb8f=Markup[_0x313c0b(0x1f8)]([Markup[_0x313c0b(0x25c)][_0x313c0b(0x189)](_0x313c0b(0x1a9),_0x313c0b(0x285)),Markup['button']['callback']('no',_0x313c0b(0x1c4))]);await sendTelegram(settings[_0x313c0b(0x248)],_0x313c0b(0x250),_0x12eb8f),tgBot[_0x313c0b(0x108)](/resetpw_(.+)/,async _0x17618e=>{const _0x221012=_0x313c0b,_0x1f8c63=_0x17618e[_0x221012(0x1c2)][0x1];_0x17618e[_0x221012(0x18c)]();if(_0x1f8c63!='no'){const _0x418d65=0xf,_0x412408=_0x221012(0x1f4),_0x40b532=Array[_0x221012(0x163)](crypto[_0x221012(0xe1)](new Uint32Array(_0x418d65)))[_0x221012(0x26e)](_0x1e2257=>_0x412408[_0x1e2257%_0x412408['length']])[_0x221012(0x25e)](''),_0x5115f9=bcrypt[_0x221012(0x146)](_0x40b532,saltRounds);storeSettings({'bbPassword':_0x5115f9}),await sendTelegram(_0x17618e[_0x221012(0x111)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x40b532,{'parse_mode':_0x221012(0x185)});}else await sendTelegram(_0x17618e[_0x221012(0x111)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x3a10d0,_0x3a2cc7){const _0x338536=_0x4f06e4;io['to'](_0x338536(0x289))[_0x338536(0x180)](_0x338536(0x2d0),_0x338536(0x23e),_0x338536(0xd9));if(tgBot&&settings[_0x338536(0x248)]){const _0x5b1f50=uuidRandom();tmpStorage[_0x5b1f50]={'path':_0x3a10d0,'filename':_0x3a2cc7};const _0x47af16=Markup[_0x338536(0x1f8)]([Markup[_0x338536(0x25c)][_0x338536(0x189)](_0x338536(0x1a9),'restore_yes_'+_0x5b1f50),Markup['button'][_0x338536(0x189)]('no',_0x338536(0x15f)+_0x5b1f50)]);await sendTelegram(settings['telegramChatId'],_0x338536(0x19f),_0x47af16),tgBot[_0x338536(0x108)](/restore_(.+)_(.+)/,async _0x31135e=>{const _0x2d2d14=_0x338536,_0x4c4d57=_0x31135e[_0x2d2d14(0x1c2)][0x1],_0x2140e4=_0x31135e[_0x2d2d14(0x1c2)][0x2],{path:_0x23e903,filename:_0x2c70db}=tmpStorage[_0x2140e4];delete tmpStorage[_0x2140e4],_0x31135e[_0x2d2d14(0x18c)](),_0x4c4d57==_0x2d2d14(0x1a9)?(logger[_0x2d2d14(0x24f)](_0x2d2d14(0x1cc)),await sendTelegram(_0x31135e['chat']['id'],_0x2d2d14(0x172),{'parse_mode':_0x2d2d14(0x185)}),unzipFile(_0x23e903,_0x2c70db)):(logger[_0x2d2d14(0x24f)](_0x2d2d14(0x1e5)),await sendTelegram(_0x31135e[_0x2d2d14(0x111)]['id'],_0x2d2d14(0x1e5)));});}}function getServerTime(){const _0x37a82d=_0x4f06e4,_0x53901e=new Date();return _0x53901e[_0x37a82d(0x2c7)]()+'/'+(_0x53901e[_0x37a82d(0x1b5)]()+0x1)[_0x37a82d(0x202)]()[_0x37a82d(0x168)](0x2,'0')+'/'+_0x53901e[_0x37a82d(0x2b4)]()[_0x37a82d(0x202)]()[_0x37a82d(0x168)](0x2,'0')+'\x20'+_0x53901e[_0x37a82d(0x220)]()[_0x37a82d(0x202)]()[_0x37a82d(0x168)](0x2,'0')+':'+_0x53901e['getMinutes']()[_0x37a82d(0x202)]()[_0x37a82d(0x168)](0x2,'0')+':'+_0x53901e[_0x37a82d(0x297)]()[_0x37a82d(0x202)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x512792=_0x4f06e4,_0x2bf2bf=shiftedTime();return _0x2bf2bf[_0x512792(0x2c7)]()+'/'+(_0x2bf2bf[_0x512792(0x1b5)]()+0x1)[_0x512792(0x202)]()[_0x512792(0x168)](0x2,'0')+'/'+_0x2bf2bf[_0x512792(0x2b4)]()[_0x512792(0x202)]()[_0x512792(0x168)](0x2,'0')+'\x20'+_0x2bf2bf[_0x512792(0x220)]()[_0x512792(0x202)]()[_0x512792(0x168)](0x2,'0')+':'+_0x2bf2bf[_0x512792(0x157)]()['toString']()['padStart'](0x2,'0')+':'+_0x2bf2bf[_0x512792(0x297)]()[_0x512792(0x202)]()[_0x512792(0x168)](0x2,'0');}function getCleanTimeStamp(){const _0x72df07=_0x4f06e4,_0x2ebd4d=shiftedTime();return _0x2ebd4d['getFullYear']()+(_0x2ebd4d[_0x72df07(0x1b5)]()+0x1)[_0x72df07(0x202)]()[_0x72df07(0x168)](0x2,'0')+_0x2ebd4d['getDate']()[_0x72df07(0x202)]()[_0x72df07(0x168)](0x2,'0')+'-'+_0x2ebd4d[_0x72df07(0x220)]()[_0x72df07(0x202)]()['padStart'](0x2,'0')+_0x2ebd4d[_0x72df07(0x157)]()[_0x72df07(0x202)]()['padStart'](0x2,'0')+_0x2ebd4d[_0x72df07(0x297)]()[_0x72df07(0x202)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x4ecaa6=_0x4f06e4,_0x37d3a4=new Date();let _0x87e044=_0x37d3a4;if(settings[_0x4ecaa6(0x10d)]&&settings['timeshift']!==0x0)_0x87e044=fns['add'](_0x37d3a4,{'hours':settings[_0x4ecaa6(0x10d)]});return _0x87e044;}async function startScheduler(){const _0x2e159e=_0x4f06e4,_0x584cd8=new Date()['getUTCHours'](),_0xdc5fd3=shiftedTime()[_0x2e159e(0x220)]();_0xdc5fd3==0x4&&backupConfigFiles(),_0xdc5fd3==0x0&&rotateLogFiles(),_0x584cd8%0x6==0x0&&triggerAnalytics(),_0x584cd8%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x16d21f){const _0xbd7b3a=_0x4f06e4;logger['debug'](_0xbd7b3a(0x1df)+_0x16d21f);const _0x3c8ab0=getBotsWithMode();_0x3c8ab0[_0xbd7b3a(0x1ea)]>0x0?confirmRestore(configbackuppath,_0x16d21f):unzipFile(configbackuppath,_0x16d21f);}async function getBackupFiles(_0x2c915b=null){const _0x2dc5c8=_0x4f06e4;let _0x70c10b=[],_0x262073=fs[_0x2dc5c8(0x13e)](configbackuppath,{'withFileTypes':!![]});_0x262073[_0x2dc5c8(0x143)]((_0x4f605e,_0x5d7486)=>_0x4f605e[_0x2dc5c8(0x1c1)]<_0x5d7486['name']?0x1:_0x5d7486['name']<_0x4f605e[_0x2dc5c8(0x1c1)]?-0x1:0x0),_0x262073[_0x2dc5c8(0x1d5)](_0x3d754c=>{const _0x4c05d8=_0x2dc5c8;if(!_0x3d754c['isDirectory']()&&_0x3d754c[_0x4c05d8(0x1c1)][_0x4c05d8(0x174)](_0x4c05d8(0x130))&&_0x3d754c[_0x4c05d8(0x1c1)][_0x4c05d8(0x1fb)]('.zip')){const _0x4aeaf7=formatDate(fs[_0x4c05d8(0x13c)](configbackuppath+_0x3d754c[_0x4c05d8(0x1c1)])[_0x4c05d8(0x21c)]);_0x70c10b['push']({'name':_0x3d754c[_0x4c05d8(0x1c1)],'mtime':_0x4aeaf7});}});if(_0x2c915b)io['to'](_0x2c915b)[_0x2dc5c8(0x180)]('backup-files',_0x70c10b);else return _0x70c10b;}async function backupConfigFiles(){const _0x5cf1ed=_0x4f06e4;await zipFiles('backup-full');const _0x1aac3a=getCleanTimeStamp();fs[_0x5cf1ed(0x14a)](zippath+_0x5cf1ed(0xfc),configbackuppath+(_0x5cf1ed(0x130)+_0x1aac3a+_0x5cf1ed(0x29a)));let _0x3b0df1=fs[_0x5cf1ed(0x13e)](configbackuppath,{'withFileTypes':!![]});_0x3b0df1[_0x5cf1ed(0x143)]((_0x8dd50b,_0x9c742a)=>_0x8dd50b[_0x5cf1ed(0x1c1)]<_0x9c742a[_0x5cf1ed(0x1c1)]?0x1:_0x9c742a[_0x5cf1ed(0x1c1)]<_0x8dd50b[_0x5cf1ed(0x1c1)]?-0x1:0x0),_0x3b0df1[_0x5cf1ed(0x1ea)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3b0df1[_0x3b0df1[_0x5cf1ed(0x1ea)]-0x1]['name']);}function rotateLogFiles(){const _0x5a1270=_0x4f06e4,_0x458ef8=fs[_0x5a1270(0x13c)](logspath+_0x5a1270(0x24d)),_0x5d7a8a=_0x458ef8[_0x5a1270(0xfe)]/0x400;if(_0x5d7a8a>0x64){let _0x298de7=fs[_0x5a1270(0x13e)](logspath,{'withFileTypes':!![]});_0x298de7[_0x5a1270(0x143)]((_0x1bfc03,_0x134dc9)=>_0x1bfc03['name']<_0x134dc9[_0x5a1270(0x1c1)]?0x1:_0x134dc9[_0x5a1270(0x1c1)]<_0x1bfc03[_0x5a1270(0x1c1)]?-0x1:0x0),_0x298de7['forEach'](_0x40ec72=>{const _0x364f39=_0x5a1270;if(_0x40ec72['name']==_0x364f39(0x253))fs['copyFileSync'](logspath+_0x40ec72[_0x364f39(0x1c1)],logspath+_0x364f39(0x100));if(_0x40ec72[_0x364f39(0x1c1)]=='output-001.log')fs[_0x364f39(0x14a)](logspath+_0x40ec72[_0x364f39(0x1c1)],logspath+_0x364f39(0x253));_0x40ec72[_0x364f39(0x1c1)]==_0x364f39(0x24d)&&(fs[_0x364f39(0x14a)](logspath+_0x40ec72[_0x364f39(0x1c1)],logspath+_0x364f39(0x230)),fs[_0x364f39(0x278)](logspath+_0x40ec72['name'],''));});}}async function zipFiles(_0x2952f3){const _0x1336a6=_0x4f06e4;let _0xeeb501;if(_0x2952f3==_0x1336a6(0x183))_0xeeb501=logspath;if(_0x2952f3==_0x1336a6(0x244))_0xeeb501=configpath;if(_0x2952f3==_0x1336a6(0x247))_0xeeb501=configpath;let _0x2e3266=fs[_0x1336a6(0x13e)](_0xeeb501,{'withFileTypes':!![]});const _0x54f34a=new JSZip();_0x2e3266[_0x1336a6(0x1d5)](_0x5db161=>{const _0x4b1db4=_0x1336a6;if(!_0x5db161[_0x4b1db4(0x156)]()){let _0x177a13=fs[_0x4b1db4(0x18b)](_0xeeb501+_0x5db161[_0x4b1db4(0x1c1)]);if(_0x2952f3==_0x4b1db4(0x244)){const _0x3c9c1a=/^bot-[0-9]{3}-config.json$/,_0x2906ac=_0x3c9c1a[_0x4b1db4(0x175)](_0x5db161['name']);if(_0x2906ac){const _0x1dfa6a=JSON[_0x4b1db4(0x296)](_0x177a13);if(_0x1dfa6a[_0x4b1db4(0x277)][0x0]){_0x1dfa6a[_0x4b1db4(0x277)][0x0]['apiKey']='***',_0x1dfa6a[_0x4b1db4(0x277)][0x0][_0x4b1db4(0x1b6)]='***';if(_0x1dfa6a[_0x4b1db4(0x277)][0x0]['apiPassword'])_0x1dfa6a[_0x4b1db4(0x277)][0x0][_0x4b1db4(0x267)]='***';}_0x177a13=JSON[_0x4b1db4(0x1f1)](_0x1dfa6a,null,0x2);}if(_0x5db161['name']=='bb-settings.json'){const _0x160fa0=JSON['parse'](_0x177a13);if(_0x160fa0[_0x4b1db4(0x281)]['loginRequired'])_0x160fa0['settings'][_0x4b1db4(0x140)]=![];if(_0x160fa0['settings']['bbPassword'])_0x160fa0[_0x4b1db4(0x281)][_0x4b1db4(0x20d)]=_0x4b1db4(0x188);if(_0x160fa0[_0x4b1db4(0x281)][_0x4b1db4(0x122)])_0x160fa0[_0x4b1db4(0x281)][_0x4b1db4(0x122)]='***';if(_0x160fa0['settings'][_0x4b1db4(0x248)])_0x160fa0[_0x4b1db4(0x281)][_0x4b1db4(0x248)]=null;if(_0x160fa0['settings']['marketcapApi'])_0x160fa0[_0x4b1db4(0x281)][_0x4b1db4(0x28d)]=_0x4b1db4(0x188);_0x177a13=JSON[_0x4b1db4(0x1f1)](_0x160fa0,null,0x2);}if(_0x5db161['name']!=_0x4b1db4(0x2c2))_0x54f34a[_0x4b1db4(0x11f)](_0x5db161[_0x4b1db4(0x1c1)],_0x177a13);}else _0x54f34a[_0x4b1db4(0x11f)](_0x5db161['name'],_0x177a13);}});const _0x2d247e=await _0x54f34a[_0x1336a6(0x2a0)]({'type':_0x1336a6(0x2da),'base64':![],'compression':_0x1336a6(0x224)});fs[_0x1336a6(0x278)](zippath+(_0x2952f3+_0x1336a6(0x29a)),_0x2d247e,'binary');}async function unzipFile(_0x520a7b,_0x473aed){const _0x4a9e5b=_0x4f06e4;fs[_0x4a9e5b(0x13e)](configpath,{'withFileTypes':!![]})['forEach'](_0x4d618e=>{const _0xd6a8f8=_0x4a9e5b;if(!_0x4d618e[_0xd6a8f8(0x156)]())fs['rmSync'](configpath+_0x4d618e[_0xd6a8f8(0x1c1)]);});const _0x5634fe=fs[_0x4a9e5b(0x18b)](_0x520a7b+_0x473aed,_0x4a9e5b(0x1b3)),_0x3acdca=await JSZip[_0x4a9e5b(0x26d)](_0x5634fe,{'base64':![],'checkCRC32':!![]});for(const _0x5006ee of Object['keys'](_0x3acdca[_0x4a9e5b(0x1aa)])){const _0x31887b=_0x3acdca[_0x4a9e5b(0x1aa)][_0x5006ee],_0x5ea496=await _0x31887b['async'](_0x4a9e5b(0x2da));fs[_0x4a9e5b(0x278)](configpath+_0x31887b['name'],_0x5ea496);}fs[_0x4a9e5b(0x13e)](temppath,{'withFileTypes':!![]})[_0x4a9e5b(0x1d5)](_0x5022b8=>{const _0x4dea93=_0x4a9e5b;if(!_0x5022b8['isDirectory']())fs[_0x4dea93(0x25b)](temppath+_0x5022b8[_0x4dea93(0x1c1)]);}),logger[_0x4a9e5b(0x24f)]('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x126f78=>{});}async function getPublicIp(){const _0x5b23dc=_0x4f06e4;try{const _0x3e6094=await axios[_0x5b23dc(0x242)](_0x5b23dc(0x2ab));publicip=_0x3e6094[_0x5b23dc(0x264)]['ip'];}catch(_0x556774){}}async function triggerAnalytics(){const _0x204ee0=_0x4f06e4;if(!publicip)await getPublicIp();const _0x5f3a53=getBotsWithMode();let _0x30d16f=0x0;_0x5f3a53['forEach'](_0x205b20=>{const _0x40e6f1=_0x2358;if(_0x205b20[_0x40e6f1(0x216)]===_0x40e6f1(0x284))_0x30d16f++;});const _0x2fb4d8=getBotExchanges();mixpanel[_0x204ee0(0x20a)]('Server',{'distinct_id':settings[_0x204ee0(0x1e9)],'ip':publicip,'version':serverversion,'numbots':_0x5f3a53[_0x204ee0(0x1ea)],'numbotsenabled':_0x30d16f,'exchanges':_0x2fb4d8,'environment':environment});}async function getMessages(){const _0x38fa9c=_0x4f06e4,_0x2c1af5='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5c9c73=new GraphQLClient(_0x2c1af5),_0x16a534={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x4aef50=serverversion[_0x38fa9c(0x138)]('.'),_0x24b77b=_0x4aef50[0x0]+'.'+_0x4aef50[0x1],_0x975d26=Math[_0x38fa9c(0x2af)](settings[_0x38fa9c(0x1db)],settings[_0x38fa9c(0x291)]),_0x5f4d27={'last':parseInt(_0x975d26),'bbm':_0x24b77b},_0x4d2be3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x48d17b;try{_0x48d17b=await _0x5c9c73['request'](_0x4d2be3,_0x5f4d27,_0x16a534);}catch(_0x531b6d){}if(_0x48d17b&&_0x48d17b[_0x38fa9c(0x164)]){let _0x241c62=settings[_0x38fa9c(0x1db)];newMessages=[];for(const _0x2d9bd3 of _0x48d17b[_0x38fa9c(0x164)]){newMessages[_0x38fa9c(0x27a)](_0x2d9bd3);let _0x25396d=![];_0x2d9bd3[_0x38fa9c(0x10b)]&&(updateSetting(_0x38fa9c(0x211),_0x2d9bd3['bbvNew']),_0x25396d=isNewerVersion(serverversion,_0x2d9bd3[_0x38fa9c(0x10b)])||serverversion==_0x2d9bd3['bbvNew']);if(!_0x25396d&&_0x2d9bd3[_0x38fa9c(0x222)]>_0x241c62){if(_0x2d9bd3[_0x38fa9c(0x292)]===_0x38fa9c(0x263)||serverversion[_0x38fa9c(0x174)](_0x2d9bd3[_0x38fa9c(0x292)])){let _0x1569ef=''+_0x2d9bd3[_0x38fa9c(0x221)]+'\x0a\x0a'+_0x2d9bd3[_0x38fa9c(0x17c)];const _0xdf023d=await sendTelegramMsg(toTelegramMarkdown(_0x1569ef),_0x38fa9c(0xf7));if(_0xdf023d)_0x241c62=_0x2d9bd3[_0x38fa9c(0x222)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x38fa9c(0x1db),_0x241c62),emitMessages();}}function emitMessages(){const _0x402096=_0x4f06e4,_0x3104a1=settings[_0x402096(0x291)];let _0x30f6c5=[];newMessages[_0x402096(0x1d5)](_0x2d9fa5=>{const _0x3d4f01=_0x402096;_0x2d9fa5[_0x3d4f01(0x222)]>_0x3104a1&&_0x30f6c5[_0x3d4f01(0x27a)](_0x2d9fa5);}),_0x30f6c5[_0x402096(0x1ea)]>0x0&&getAllClients()['forEach'](_0x446535=>{const _0x5136e4=_0x402096;getSocket(_0x446535['id'])[_0x5136e4(0x180)](_0x5136e4(0x17c),_0x30f6c5);});}function confirmMessage(_0x394b48){updateSetting('lastmsgemitted',Number(_0x394b48));}function isNewerVersion(_0x121310,_0x37c1db){const _0x4d1d4f=_0x4f06e4,_0x2a0c97=_0x37c1db[_0x4d1d4f(0x138)]('.'),_0x1d29c8=_0x121310[_0x4d1d4f(0x138)]('.');for(var _0xd2c760=0x0;_0xd2c760<_0x1d29c8['length'];_0xd2c760++){const _0x454810=~~_0x1d29c8[_0xd2c760],_0x2b778a=~~_0x2a0c97[_0xd2c760];if(_0x454810>_0x2b778a)return!![];if(_0x454810<_0x2b778a)return![];}return![];}function toTelegramMarkdown(_0x5c48be){const _0x11f76e=_0x4f06e4,_0x452564=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x29bd9f=/\*{2}(.+?)\*{2}/gim;return _0x5c48be=_0x5c48be[_0x11f76e(0x2e1)](_0x452564,_0x11f76e(0x14d))[_0x11f76e(0x2e1)](_0x29bd9f,_0x11f76e(0x238)),_0x5c48be;}async function validateConfigFile(){const _0x16ceb1=_0x4f06e4,_0x211dd1=dbConfig['get'](_0x16ceb1(0x26f))[_0x16ceb1(0x1fa)](_0x16ceb1(0x26b))['value']()||[];if(_0x211dd1[_0x16ceb1(0x1ea)]==0x0){let _0x32ab10=0x0,_0x3aedd0=[];const _0x196e44=/^bot-([0-9]{3})-config.json$/,_0x2e6c66=fs[_0x16ceb1(0x13e)](configpath);_0x2e6c66[_0x16ceb1(0x1d5)](_0x43ce40=>{const _0x3ae72b=_0x16ceb1,_0xa39eb8=_0x196e44['exec'](_0x43ce40);if(_0xa39eb8){const _0x1226a6=_0xa39eb8[0x1];let _0x1c3604=getBotAttributes(_0x1226a6);_0x3aedd0[_0x3ae72b(0x27a)]({'botID':_0x1226a6,'botname':_0x1c3604['botname'],'status':_0x3ae72b(0x2c3),'live':_0x3ae72b(0x1b0)}),_0x32ab10++;}}),_0x32ab10!=0x0&&(dbConfig[_0x16ceb1(0x242)](_0x16ceb1(0x26f))[_0x16ceb1(0xdc)](_0x3aedd0)['write'](),config=_0x3aedd0,restoredConfigFile=_0x32ab10);}}function _0xae96(){const _0x527783=['copyFileSync','deleteHistoryAlerts','storeConfiguration','$1_$2_$3','\x1b[31m','Unauthorized\x20attempt\x20to\x20log\x20out','sendFile','hasOwnProperty','#RES#\x20','versions','config_alerts','\x20to\x20','isDirectory','getMinutes','privateKeyFromPem','SIGTERM','Disabled\x20Bot\x20','version','invalid\x20credentials','set','toIPv4MappedAddress','restore_no_','\x1b[0m','portfolio','temporary\x20access\x20rejected','from','messages','tempaccess_30_','Access\x20enabled\x20for\x20','temporary\x20access\x20not\x20allowed','padStart','get-logs','Bot\x20Mgr\x20>\x20','find','9gGQkPY','reinstall_no','start','add-bot','get-portfolio','catch','Restoring\x20bot(s)\x20from\x20backup','\x20mode','startsWith','test','(staging)','store-configuration','username','bot.js',')\x20|\x20Bot\x20','onepagemode','message','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','tkn','emit','backupfile','updatebotmanager','logs','version.json','HTML','login\x20token\x20generated','includes','***','callback','api-eu.mixpanel.com','readFileSync','editMessageReplyMarkup','Node.js\x20v','type','1000','metrics_','=>\x20Go\x20to\x20#CYA#http://','log','Notifications\x20types:\x20','tempaccess_15_','logged\x20out','all','/:bot/configuration','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','once','login2fa_reject_','telegramUsername','store-headless','listen','randomBytes','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','family','config','Unauthorized\x20attempt\x20to\x20get\x20events',':\x20Bot\x20Mgr\x20>\x20','update-bb','config_orders','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','0.0.0','f2aRequired','yes','files','/restart\x20-\x20restart\x20bot(s)\x0a','store-settings','search','::1','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','stopped','telegrammsg','Token\x20blacklisted','binary','build','getMonth','apiSecret','staging','\x1b[36m','inherit','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','backup/','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','show-config','resetHistory','cancel-loading','orders','name','match','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','resetpw_no','Bot\x20','ETH','update_yes','express-fileupload','range','alerts','update_no','Restore\x20process\x20confirmed','publicKeyToPem','access\x20timeout','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','reply','2FA\x20required','filter','RSA-OAEP','sha256','forEach','reinstall','telegram','static','off_','existsSync','lastmsgtelegram','login\x20required','publicKey','show','Restore\x20backup\x20file\x20','portfolio_','text','help','download','stop','Restore\x20process\x20aborted','temporaryAccessAllowed','referer','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','userid','length','live','Allow\x20login\x20from\x20IP\x20address\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','SIGINT','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','getPortfolio','stringify','User\x20has\x20been\x20validated','\x20only\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Invalid\x20authentication\x20token\x20(1)','Starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','inlineKeyboard','-events.json','sortBy','endsWith','off','createServer','mixpanel','timestamp','update','Error\x20removing\x20old\x20backup\x20files:','toString','5\x20min','reinstall_yes','store-fiat','/start','restore-backup-file','hex','allow','track','sendPortfolioTelegram','get-messages','bbPassword','pidExpireLogin','\x20>\x20','use','latestversion','params','internal','Login\x20accepted','(((.+)+)+)+$','status','whitelistEnabled','2FA','restart_','create','login','mtime','Backup\x20file\x20uploaded','uuid','value','getHours','title','number','Starting\x20(','DEFLATE','launch','keys','decrypt','2603840eWshuO','storeHeadless','user','createWriteStream','bcryptjs','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Invalid\x20IP\x20address','new-disabled','output-001.log','verify','reason','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','yargs/yargs','place-order','temp/','bb/','*$1*','warning','Unauthorized\x20attempt\x20to\x20delete\x20bot','get-starting-balances','date-fns','All','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','kill','logs/','socket','get','argv','backup','server','sendMessage','backup-full','telegramChatId','on_','Unauthorized\x20attempt\x20to\x20delete\x20alerts','\x1b[33m','emitHistory','output-000.log','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','debug','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','/update\x20-\x20update\x20Balance\x20Bot\x0a','Failed\x20to\x20download\x20','output-002.log','Telegram\x20error:','full','remoteAddress','tempaccess_5_','Temporary\x20access\x20rejected','expiry','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','rmSync','button','headers','join','reset-history','2FA\x20login\x20required','slice','status\x20code\x20401','any','data','-performance.json','uuid-random','apiPassword','write','logout','<b>Telegram\x20Bot\x20Status:</b>\x0a','botID','unlinkSync','loadAsync','map','bots','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','/output-000.log','3000','reject','node','\x20-\x20','bot','writeFileSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','push','bot-','|@|','/on\x20-\x20start\x20bot(s)\x0a','environment','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','accept','settings','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','telegram2FaApproval','enabled','resetpw_yes','-config.json','/enable\x20-\x20enable\x20notifications\x0a','-results.json','botmanager','::ffff:127.0.0.1','delete-bot','Unauthorized\x20attempt\x20to\x20download\x20','marketcapApi','initclient','event','send','lastmsgemitted','bbvReceive','Unauthorized\x20attempt\x20to\x20store\x20configuration','child_process','IPv4','parse','getSeconds','telegraf','Alerts','.zip','mode','\x20|\x20user:\x20...','/off\x20-\x20stop\x20bot(s)\x0a','All\x20bots','_nsps','generateAsync','apiKey','config/','error','blacklist','temporary\x20access\x20timeout','364GAdDnr','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20show\x20configuration','kind','apply','https://api.ipify.org?format=json','Invalid\x20username\x20or\x20IP\x20address','bb-settings.json','post','min','store','auth','#RES#\x20if\x20running\x20locally\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','getDate','Network\x20Interfaces:','alias','exit','generateKeyPair','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','reset-password','Error:\x20Invalid\x20argument\x20','secret','code','mkdirSync','util','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','decode64','bb-secure.json','disabled','new','All\x20bots\x20running\x20right\x20now','fork','getFullYear','index.html','\x20|\x20','Login\x20rejected','************','entries','Unauthorized\x20attempt\x20to\x20update\x20settings','clientip','toggle_','notification','auto','storeFiat','metrics','settings.','disconnect','botname','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','constructor','manual','string','sign','reinstall-bb','function','exchange','password','getTime','replace','showConfig','login\x20not\x20required','connection','access','success','defaults','pki','assign','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','port','reload','2906370waPxFL','randomFillSync','NTBA_FIX_319','4394QtCaMY','node-forge','format','Setting\x20access:\x20','toIPv4Address','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','private','Unauthorized\x20attempt\x20to\x20update\x20bot','started','lowdb','temporary\x20token\x20generated','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','toggleBotMode','Idling\x20(','28115qFvpjG','/:bot','isValid','No\x20bots\x20running\x20right\x20now','lowdb/adapters/FileSync','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','Markdown','ipv6','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Notifications\x20disabled\x0a','Ok,\x20will\x20send\x20order\x20notifications\x20only','backup-full.zip','Notifications\x20disabled','size','crypto','output-003.log','-----------------------------------------------------------------------------------','Telegraf\x20error:','telegramEnabled','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','privateKeyToPem','pidRefreshToken','headless','action','getStartingBalances','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','bbvNew','privateKey','timeshift','Deleted\x20Bot\x20','remove','build2','chat','969EszzgN','/help\x20-\x20show\x20available\x20commands\x0a','\x20(1)','max','16452AGBaPu','telegramIpApproval','axios','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','enable','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Notifications\x20enabled\x0a','CoinMarketCap\x20API\x20key\x20validated','update-bot','file','command','Logged\x20out\x20user\x20...','telegramToken','token','/:bot/coins','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','cancelLoading','Unauthorized\x20login\x20attempt\x20(timeout)','Unauthorized\x20attempt\x20to\x20add\x20bot','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','path','jsonwebtoken','Notifications\x20enabled','encryptedUuid','clients','telegramEvents','backup-full@','No\x20authentication\x20token','Your\x20installation\x20is\x20already\x20up\x20to\x20date','bbUsername','File\x20uploaded','toggle','3682870xmcmvM','/:bot/performance','split','3756046bRLGBc','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Orders','statSync','exp','readdirSync','simple','loginRequired','\x20(2)','names','sort',')\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20confirm\x20message','hashSync','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','30\x20min','running'];_0xae96=function(){return _0x527783;};return _0xae96();}async function restoreConfigNotify(_0x4ea12f){const _0x54c105=_0x4f06e4;let _0x3b8202;if(restoredConfigFile==0x1)_0x3b8202=_0x54c105(0xe8);else _0x3b8202=_0x54c105(0x282);if(_0x4ea12f)io['to']('botmanager')[_0x54c105(0x180)](_0x54c105(0x2d0),_0x3b8202);else{logger['simple'](_0x54c105(0x101)),logger['simple'](_0x3b8202),logger['simple'](_0x54c105(0x101)),logger['simple']('');if(tgBot&&settings[_0x54c105(0x248)]&&settings['telegramEvents']!=_0x54c105(0x1c0))await sendTelegram(settings[_0x54c105(0x248)],'Bot\x20Mgr\x20>\x20'+_0x3b8202);}}function decryptRSA(_0x32752b,_0x3db507){const _0x2a75bc=_0x4f06e4,_0x5cd5c2=forge[_0x2a75bc(0xdb)][_0x2a75bc(0x158)](_0x32752b),_0x275cbc=_0x5cd5c2[_0x2a75bc(0x227)](forge['util'][_0x2a75bc(0x2c1)](_0x3db507),_0x2a75bc(0x1d3),{'md':forge['md'][_0x2a75bc(0x1d4)][_0x2a75bc(0x21a)](),'mgf1':{'md':forge['md'][_0x2a75bc(0x1d4)][_0x2a75bc(0x21a)]()}});return _0x275cbc;}function validateCredentials(_0x32df36,_0x346640){const _0x49f4e5=_0x4f06e4;if(_0x32df36[_0x49f4e5(0x178)]==settings[_0x49f4e5(0x133)]&&bcrypt['compareSync'](_0x32df36[_0x49f4e5(0x2df)],settings['bbPassword'])){if(settings[_0x49f4e5(0x1a8)])return{'allow':![],'reason':_0x49f4e5(0x260),'token':null};else{const _0x5bc80c=generateLoginToken(_0x346640);return{'allow':!![],'reason':_0x49f4e5(0x186),'token':_0x5bc80c};}}else return{'allow':![],'reason':_0x49f4e5(0x15c),'token':null};}function refreshToken(_0x3ffaa7){const _0x2dd1a4=_0x4f06e4,_0x45bb16=generateLoginToken(_0x3ffaa7);return{'allow':!![],'reason':_0x2dd1a4(0x186),'token':_0x45bb16};}function validateAccess(_0x3b73ab,_0xa8a2c2,_0xfbd357){const _0x4fd68d=_0x4f06e4,_0x3afca3=_0xfbd357?_0xfbd357:devices[_0xa8a2c2]['ip'];let _0x485c5b;const _0xac91a3=_0x16fcd4=>{const _0x11063f=_0x2358;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0xa8a2c2)){const _0x20fa85=generateLoginToken(_0xa8a2c2);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x20fa85};}else return{'allow':![],'reason':_0x11063f(0x1dc),'token':null};}else return _0x485c5b=validToken(_0x16fcd4,_0xa8a2c2),_0x485c5b[_0x11063f(0x151)](_0x11063f(0xd9))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x16fcd4}:{'allow':![],'reason':_0x11063f(0x1dc),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x4fd68d(0x217)]){let _0x291c7e=[...settings['whitelist'],_0x4fd68d(0x1ae),_0x4fd68d(0x28a),'127.0.0.1'];if(_0x291c7e[_0x4fd68d(0x187)](_0x3afca3))return _0xac91a3(_0x3b73ab);else{_0x485c5b=validToken(_0x3b73ab,_0xa8a2c2);if(_0x485c5b[_0x4fd68d(0x151)](_0x4fd68d(0xd9)))return _0xac91a3(_0x3b73ab);else{if(telegramIpApproved(_0xa8a2c2)){const _0x10315c=generateToken(_0xa8a2c2);return _0x485c5b=_0xac91a3(_0x3b73ab),_0x485c5b[_0x4fd68d(0x209)]?{'allow':!![],'reason':_0x4fd68d(0xed),'token':_0x10315c}:_0x485c5b;}else return settings[_0x4fd68d(0x1e6)]?{'allow':![],'reason':_0x4fd68d(0x1d1),'token':null}:{'allow':![],'reason':_0x4fd68d(0x167),'token':null};}}}else return _0xac91a3(_0x3b73ab);}function timelyDecrypt(_0x1b1e63,_0x248481,_0x152fc6='@'){const _0xcb0e16=_0x4f06e4;if(_0x1b1e63)try{const _0x1aeca9=decryptRSA(secure[_0xcb0e16(0x10c)],_0x1b1e63),_0x2eebe6=_0x1aeca9[_0xcb0e16(0x138)](_0x152fc6)[0x0],_0x4be2a6=_0x1aeca9[_0xcb0e16(0x138)](_0x152fc6)[0x1],_0x14f7a0=new Date()[_0xcb0e16(0x2e0)]();if(_0x248481){if(_0x14f7a0-_0x4be2a6<maxSecretAge*0x3e8)return _0x2eebe6;else return![];}else return _0x2eebe6;}catch(_0x55b55e){return![];}else return![];}const validToken=(_0x1979b3,_0x16b5a5)=>{const _0x29dff8=_0x4f06e4,_0x5bbbf2=devices[_0x16b5a5]['ip'];if(!_0x1979b3)return{'error':_0x29dff8(0x131)};for(let _0x285214 of blacklist){if(_0x285214[_0x29dff8(0x123)]==_0x1979b3)return{'error':_0x29dff8(0x1b2)};}let _0x2f688f;try{_0x2f688f=jwt[_0x29dff8(0x231)](_0x1979b3,secure['secret']+_0x16b5a5);}catch{return{'error':_0x29dff8(0x1f5)};}if(!_0x2f688f[_0x29dff8(0x151)](_0x29dff8(0x2ce))&&!_0x2f688f[_0x29dff8(0x151)](_0x29dff8(0x178))||!_0x2f688f[_0x29dff8(0x151)](_0x29dff8(0x13d)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2f688f[_0x29dff8(0x151)](_0x29dff8(0x178))&&_0x2f688f[_0x29dff8(0x151)]('clientip')){const {clientip:_0x25ef8c}=_0x2f688f;return _0x5bbbf2==_0x25ef8c?{'success':_0x29dff8(0x1f2)}:{'error':_0x29dff8(0x22e)};}else{if(_0x2f688f['hasOwnProperty']('username')&&_0x2f688f[_0x29dff8(0x151)](_0x29dff8(0x2ce))){const {username:_0x110bf9,clientip:_0x59713c}=_0x2f688f;return settings[_0x29dff8(0x133)]==_0x110bf9&&_0x5bbbf2==_0x59713c?{'success':_0x29dff8(0x1f2)}:{'error':_0x29dff8(0x2ac)};}}},generateLoginToken=_0x3d7f24=>{const _0x5b70b3=_0x4f06e4;if(_0x3d7f24){const _0x2820a8=devices[_0x3d7f24]['ip'];return jwt[_0x5b70b3(0x2db)]({'username':settings[_0x5b70b3(0x133)],'clientip':_0x2820a8},secure[_0x5b70b3(0x2bc)]+_0x3d7f24,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x54250e=>{const _0x35572b=_0x4f06e4;if(_0x54250e){const _0x15b927=devices[_0x54250e]['ip'];return jwt['sign']({'clientip':_0x15b927},secure[_0x35572b(0x2bc)]+_0x54250e,{'expiresIn':devices[_0x54250e][_0x35572b(0x117)][_0x35572b(0x259)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xae663=>{const _0x34c46c=_0x4f06e4;let _0x1b5b79=![];return devices[_0xae663][_0x34c46c(0x117)]&&devices[_0xae663][_0x34c46c(0x117)]['expiry']!=_0x34c46c(0x274)&&(_0x1b5b79=devices[_0xae663]['telegramIpApproval'][_0x34c46c(0x2ce)]==devices[_0xae663]['ip']&&new Date()[_0x34c46c(0x2e0)]()-devices[_0xae663][_0x34c46c(0x117)][_0x34c46c(0x1ff)]<devices[_0xae663][_0x34c46c(0x117)]['expiry']*0x3c*0x3e8),_0x1b5b79;},telegram2FaApproved=_0x183ea9=>{const _0x3690ec=_0x4f06e4;let _0x776269=![];return devices[_0x183ea9][_0x3690ec(0x283)]&&devices[_0x183ea9]['telegram2FaApproval'][_0x3690ec(0x259)]!='reject'&&(_0x776269=devices[_0x183ea9][_0x3690ec(0x283)]['clientip']==devices[_0x183ea9]['ip']&&new Date()[_0x3690ec(0x2e0)]()-devices[_0x183ea9][_0x3690ec(0x283)][_0x3690ec(0x1ff)]<devices[_0x183ea9][_0x3690ec(0x283)][_0x3690ec(0x259)]*0x3c*0x3e8),_0x776269;},normalizeIP=_0x40532d=>{const _0xeccf0c=_0x4f06e4;let _0x3a5d0e=null,_0x19f559=null;if(ipaddr[_0xeccf0c(0xf3)](_0x40532d)){const _0x3e6f0b=ipaddr[_0xeccf0c(0x296)](_0x40532d);_0x3e6f0b[_0xeccf0c(0x2a9)]()===_0xeccf0c(0xf8)?(_0x3e6f0b['isIPv4MappedAddress']()&&(_0x3a5d0e=_0x3e6f0b[_0xeccf0c(0xe7)]()['toString']()),_0x19f559=_0x3e6f0b[_0xeccf0c(0x202)]()):(_0x3a5d0e=_0x3e6f0b['toString'](),_0x19f559=_0x3e6f0b[_0xeccf0c(0x15e)]()[_0xeccf0c(0x202)]());}return{'show':_0x3a5d0e?_0x3a5d0e:_0x19f559,'store':_0x19f559};};function formatDate(_0xf58fc2){const _0x28f75d=_0x4f06e4;return _0xf58fc2[_0x28f75d(0x2c7)]()+'/'+(_0xf58fc2[_0x28f75d(0x1b5)]()+0x1)[_0x28f75d(0x202)]()[_0x28f75d(0x168)](0x2,'0')+'/'+_0xf58fc2[_0x28f75d(0x2b4)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xf58fc2[_0x28f75d(0x220)]()['toString']()[_0x28f75d(0x168)](0x2,'0')+':'+_0xf58fc2[_0x28f75d(0x157)]()[_0x28f75d(0x202)]()[_0x28f75d(0x168)](0x2,'0')+':'+_0xf58fc2['getSeconds']()[_0x28f75d(0x202)]()['padStart'](0x2,'0');}function sleep(_0x45a5cd){return new Promise(_0x547316=>setTimeout(_0x547316,_0x45a5cd));}