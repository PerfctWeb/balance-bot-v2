const _0x57c538=_0x20e9;(function(_0x537548,_0x33a2ed){const _0x353a1c=_0x20e9,_0x44a851=_0x537548();while(!![]){try{const _0x545247=-parseInt(_0x353a1c(0xad))/0x1+parseInt(_0x353a1c(0x1f5))/0x2+parseInt(_0x353a1c(0xdc))/0x3+parseInt(_0x353a1c(0x1f2))/0x4*(parseInt(_0x353a1c(0x161))/0x5)+parseInt(_0x353a1c(0xdd))/0x6*(parseInt(_0x353a1c(0x1a4))/0x7)+parseInt(_0x353a1c(0x126))/0x8+-parseInt(_0x353a1c(0x1dd))/0x9;if(_0x545247===_0x33a2ed)break;else _0x44a851['push'](_0x44a851['shift']());}catch(_0x3084fd){_0x44a851['push'](_0x44a851['shift']());}}}(_0x5639,0x6d832));const _0xe3bba9=function(){let _0xba80ea=!![];return function(_0xd98d81,_0x113b91){const _0x38d91e=_0xba80ea?function(){const _0x2c268f=_0x20e9;if(_0x113b91){const _0xc0a0d7=_0x113b91[_0x2c268f(0x1ae)](_0xd98d81,arguments);return _0x113b91=null,_0xc0a0d7;}}:function(){};return _0xba80ea=![],_0x38d91e;};}(),_0x5d0805=_0xe3bba9(this,function(){const _0x15f3e4=_0x20e9;return _0x5d0805[_0x15f3e4(0xf6)]()[_0x15f3e4(0x133)](_0x15f3e4(0x145))[_0x15f3e4(0xf6)]()['constructor'](_0x5d0805)[_0x15f3e4(0x133)](_0x15f3e4(0x145));});_0x5d0805();'use strict';process[_0x57c538(0x20e)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x57c538(0x12d)),fs=require('fs'),fns=require(_0x57c538(0x1a5)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x57c538(0x130)),crypto=require('crypto'),Crypt=require(_0x57c538(0x121))[_0x57c538(0x14d)],RSA=require('hybrid-crypto-js')[_0x57c538(0x1ea)],bcrypt=require(_0x57c538(0x1d1)),jwt=require(_0x57c538(0x177)),{Analytics}=require(_0x57c538(0x1e6)),googleAnalyticsV3Plugin=require(_0x57c538(0x1d5))[_0x57c538(0xcf)],ipaddr=require(_0x57c538(0x1b3)),argv=require(_0x57c538(0x20c))(process['argv'][_0x57c538(0x15b)](0x2))[_0x57c538(0x109)],uuidRandom=require(_0x57c538(0x124)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0x57c538(0xf4)),PORT=argv[_0x57c538(0x1b0)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x57c538(0x115)](PORT)&&(console[_0x57c538(0x1bc)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x57c538(0x1b4)),process[_0x57c538(0x211)](0x1));const HOST=argv['host']||null,userID=argv[_0x57c538(0x1e4)]||'';function _0x5639(){const _0x8e6d94=['publicKey','/update\x20-\x20update\x20Balance\x20Bot\x0a','sendMessage','store-configuration','hybrid-crypto-js','temporary\x20access\x20rejected','event','uuid-random','Notifications\x20disabled','7056992NBLnse','logout','storeConfiguration','SIGTERM','connection','hashSync','Unauthorized\x20attempt\x20to\x20add\x20bot','child_process','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','data','path','loginRequired','telegram2FaApproval','search','/restart\x20-\x20restart\x20bot(s)\x0a','HTML','timeshift','-events.json','ipv6','Orders','f2aRequired','chat','Login\x20rejected','max','botmanager','/on\x20-\x20start\x20bot(s)\x0a','disconnect','filter','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','fork','name','(((.+)+)+)+$','length','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','update-bb','isDirectory','store-settings','telegramEnabled','split','Crypt','map','Login\x20accepted','token','min','\x20mode','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','confirm-message','pidRefreshToken','forEach','deleted\x20Bot\x20','store-headless','keys','emit','slice','\x20>\x20','Password\x20reset\x20rejected','botID','Notifications\x20types:\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','185xGpvMW','telegram','Unauthorized\x20attempt\x20to\x20update\x20bot','place-order','verify','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','removeListener','Starting\x20Balance\x20Bot\x20update','/enable\x20-\x20enable\x20notifications\x0a','settings.','encryptedUuid','telegramToken','lastmsgemitted','randomFillSync','bb-secure.json','restarting\x20Bot\x20','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Token\x20blacklisted','Notifications\x20disabled\x0a','yes','-results.json','expiry','jsonwebtoken','6b67f3d61ee94b8f5c80b4affef4c4d9','Unauthorized\x20attempt\x20to\x20get\x20portfolio','writeFileSync','started','logged\x20out','bots','/:bot/performance','any','<b>Telegram\x20Bot\x20Status:</b>\x0a','readFileSync','store','0.0.0','new','Password\x20has\x20been\x20reset\x20to:\x20','alias','set','initclient','new-disabled','bbvNew','stopPolling','answerCallbackQuery','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','settings','reload','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','conn','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','2FA\x20login\x20token\x20generated','accept','hex','password','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','getSeconds','remoteAddress','$1_$2_$3','All\x20bots\x20running\x20right\x20now','Yes','alerts','getMonth','getHours','listen','Bot\x20Mgr\x20>\x20','match','329945cxigzw','date-fns','cancel-loading','mode','/:bot/portfolio','access','includes','Unauthorized\x20attempt\x20to\x20confirm\x20message','placeOrder','stopped','apply','::ffff:127.0.0.1','port','15\x20min','padStart','ipaddr.js',',\x20must\x20be\x20a\x204\x20digit\x20number','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','add','write','All\x20bots','latestversion','from','live','log','toIPv4MappedAddress','error\x20while\x20deleting\x20config\x20files:\x20','get-messages','args','defaults','decrypt','version.json','handshake','Invalid\x20Telegram\x20token','************','polling_error','1000','-----------------------------------------------------------------------------------','error','stringify','bot-','access\x20timeout','existsSync','lastmsgtelegram','secure','bcryptjs',':\x20Bot\x20Mgr\x20>\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','starting\x20new\x20bot\x20|\x20Bot\x20','@analytics/google-analytics-v3','-config.json','login','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','whitelist','userid','reason','function','8539551wwGXpx','reject','copyFileSync','inherit','login\x20token\x20generated','\x20|\x20','getFullYear','user','Unauthorized\x20login\x20attempt\x20(timeout)','analytics','headless','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','updatebotmanager','RSA','telegramIpApproval','login\x20not\x20required','notification','removeAllListeners','404\x20Not\x20Found','reset-password','/status\x20-\x20show\x20bot(s)\x20status\x0a','748TsfMhq','temporaryAccessAllowed','send','312858eLnXrF','delete-alerts','messages','\x20to\x20','toggleBotMode','Notifications\x20enabled\x0a','telegramUsername','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','get-portfolio','type','2FA\x20required','unlinkSync','getStartingBalances','getDate','User\x20has\x20been\x20validated','bot','/disable\x20-\x20disable\x20notifications\x0a','push','Unauthorized\x20attempt\x20to\x20log\x20out','number','telegramEvents','temporary\x20token\x20generated','manual','yargs/yargs','assign','env','http','static','exit','temporary\x20access\x20not\x20allowed','Unauthorized\x20attempt\x20to\x20delete\x20alerts','disabled\x20Bot\x20','update-bot','showname','clients','Unauthorized\x20attempt\x20to\x20get\x20logs','allow','Ok,\x20will\x20send\x20order\x20notifications\x20only','uuid','clientip','isValid','get-logs','orders','get-starting-balances','headers','server','pidExpireLogin','once','ipc','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/:bot/configuration','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','2FA\x20login\x20required','build2','value','Ok,\x20will\x20send\x20alert\x20notifications\x20only','timestamp','SIGINT','772226FFqVLa','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Invalid\x20authentication\x20token\x20(1)','get','kill','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','temporary\x20access\x20timeout','message','index.html','</b>\x20?','blacklist','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','sha256','\x20only\x0a','config/','bbPassword','<b>Balance\x20Bot\x20Status:</b>\x0a','botname','replace','Unauthorized\x20attempt\x20to\x20store\x20configuration','sendFile','restart','hasOwnProperty','No\x20bots\x20running\x20right\x20now','\x20minutes','build','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','getTime','Temporary\x20access\x20rejected','find','callback_query','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','default','stop','status','Unauthorized\x20attempt\x20to\x20delete\x20bot','/help\x20-\x20show\x20available\x20commands\x0a','telegrammsg','UA-192771731-1','order','sockets','catch','title','exp','telegramChatId','2382630bnxkjN','42lBXUbC','auto','storeHeadless','sendPortfolioTelegram','use','bbUsername','bbvReceive','generateKeyPairAsync','username','isIPv4MappedAddress','cloneDeep','No\x20authentication\x20token','all','request','https://api.ipify.org?format=json','mkdirSync','parse','auth','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','privateKey','starting\x20bot\x20|\x20Bot\x20','graphql-request','secret','toString','Balance\x20Bot\x20Server','referer','/names\x20-\x20show\x20bot\x20names\x0a','join','https://hodlerhacks.com','onText','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','readdirSync','sortBy','enabled','All','Invalid\x20username\x20or\x20IP\x20address','Access\x20enabled\x20for\x20','sign','5\x20min','toIPv4Address','Bot\x20','argv','then','-performance.json','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','login\x20required','/off\x20-\x20stop\x20bot(s)\x0a','success','invalid\x20credentials','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','running','getMinutes','version','test','getUTCHours','bb-settings.json','Unauthorized\x20attempt\x20to\x20get\x20messages','disabled','/:bot','whitelistEnabled','enabled\x20Bot\x20'];_0x5639=function(){return _0x8e6d94;};return _0x5639();}let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x57c538(0x117),securefile=_0x57c538(0x16f);let validInstallation=!![];!fs[_0x57c538(0x1ce)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x57c538(0x95)),configpath=userID?bbpath+_0x57c538(0xbd)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x57c538(0xec)](configpath);!fs[_0x57c538(0x1ce)](configbackuppath)&&fs[_0x57c538(0xec)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x57c538(0x1c1)]({'bots':[]})[_0x57c538(0x1b7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x57c538(0x1c1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x57c538(0x183)}})[_0x57c538(0x1b7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x57c538(0x1b7)]();let crypt=new Crypt({'md':_0x57c538(0xbb),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x57c538(0x178),{'host':'api-eu.mixpanel.com'}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':_0x57c538(0xd5)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x57c538(0x1c3))[_0x57c538(0x114)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x57c538(0x20f))['createServer'](app);app[_0x57c538(0xe1)](express[_0x57c538(0x210)](path[_0x57c538(0xfa)](__dirname,bbpath2,_0x57c538(0xa8)))),app[_0x57c538(0xe1)](express[_0x57c538(0x210)](path[_0x57c538(0xfa)](__dirname,bbpath2,_0x57c538(0xc8)))),app[_0x57c538(0xb1)]('/',function(_0x3a1cad,_0x1a6b7c){const _0x2c05d5=_0x57c538;_0x1a6b7c[_0x2c05d5(0xc3)](path[_0x2c05d5(0xfa)](__dirname,bbpath2,_0x2c05d5(0xa8),_0x2c05d5(0xb7)));}),app[_0x57c538(0xb1)](_0x57c538(0x11a),function(_0x5907cb,_0x59c1dd){const _0x14d88c=_0x57c538;_0x59c1dd[_0x14d88c(0xc3)](path['join'](__dirname,bbpath2,_0x14d88c(0xc8),_0x14d88c(0xb7)));}),app['get'](_0x57c538(0x1a8),(_0x216a6b,_0xfd41ab)=>{const _0x224814=_0x57c538;_0xfd41ab[_0x224814(0xc3)](path[_0x224814(0xfa)](__dirname,bbpath2,_0x224814(0xc8),_0x224814(0xb7)));}),app[_0x57c538(0xb1)](_0x57c538(0x17e),(_0xf894cd,_0x399db6)=>{const _0x51f75d=_0x57c538;_0x399db6['sendFile'](path[_0x51f75d(0xfa)](__dirname,bbpath2,_0x51f75d(0xc8),'index.html'));}),app['get']('/:bot/coins',(_0x327e04,_0x6bda00)=>{const _0x1c3cb1=_0x57c538;_0x6bda00[_0x1c3cb1(0xc3)](path['join'](__dirname,bbpath2,_0x1c3cb1(0xc8),_0x1c3cb1(0xb7)));}),app[_0x57c538(0xb1)]('/:bot/history',(_0x2ae132,_0x4fc051)=>{const _0x3612d3=_0x57c538;_0x4fc051[_0x3612d3(0xc3)](path[_0x3612d3(0xfa)](__dirname,bbpath2,_0x3612d3(0xc8),_0x3612d3(0xb7)));}),app[_0x57c538(0xb1)](_0x57c538(0xa5),(_0x4ce67b,_0x1de3ee)=>{const _0x5f4824=_0x57c538;_0x1de3ee['sendFile'](path[_0x5f4824(0xfa)](__dirname,bbpath2,'build','index.html'));}),app['get']('/:bot/support',(_0x34b418,_0x3de043)=>{const _0x25d4a0=_0x57c538;_0x3de043[_0x25d4a0(0xc3)](path['join'](__dirname,bbpath2,'build',_0x25d4a0(0xb7)));});if(HOST)http[_0x57c538(0x1a1)](PORT,HOST);else http[_0x57c538(0x1a1)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings[_0x57c538(0x16c)]!=''&&settings[_0x57c538(0x1fb)]&&settings[_0x57c538(0x1fb)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x3f3ab7=_0x57c538;console['log'](''),console[_0x3f3ab7(0x1bc)](_0x3f3ab7(0x1c9)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x3f3ab7(0x1c9));if(config[_0x3f3ab7(0x146)]!=0x0)config[_0x3f3ab7(0x156)](_0x2755ed=>{const _0x19317d=_0x3f3ab7;if(_0x2755ed[_0x19317d(0xd1)]=='enabled'||_0x2755ed[_0x19317d(0xd1)]==_0x19317d(0x184))logging(_0x19317d(0xf3)+_0x2755ed[_0x19317d(0x15e)]+_0x19317d(0x1e2)+_0x2755ed['botname']),startBot([_0x2755ed[_0x19317d(0x15e)],userID],{'cwd':bbpath},function(_0x1badd2){if(_0x1badd2)logging(_0x1badd2);});else(_0x2755ed[_0x19317d(0xd1)]==_0x19317d(0x119)||_0x2755ed['status']==_0x19317d(0x189))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x2755ed[_0x19317d(0x15e)]+_0x19317d(0x1e2)+_0x2755ed['botname']);});else!newBot&&console[_0x3f3ab7(0x1bc)](_0x3f3ab7(0x1d8));if(newBot)addBot();console[_0x3f3ab7(0x1bc)](_0x3f3ab7(0x1c9)),console['log']('');}function startSocket(){const _0x58afbb=_0x57c538;io['on'](_0x58afbb(0x12a),_0x14d373=>{const _0xa57eee=_0x58afbb;let _0x53f59c,_0x24dac5,_0x155d1f,_0x217244,_0x17717a;const _0x507ebe=_0x14d373[_0xa57eee(0x1c4)][_0xa57eee(0x9f)][_0xa57eee(0xf8)];_0x24dac5=_0x507ebe[_0xa57eee(0x1a3)](/bot[0-9]{3}/);if(_0x24dac5)_0x155d1f=_0x24dac5[0x0][_0xa57eee(0x1a3)](/[0-9]{3}/);if(_0x155d1f)_0x53f59c=_0x155d1f[0x0];else _0x53f59c=_0xa57eee(0x13e);const _0xe6c6e9=_0x14d373['handshake'][_0xa57eee(0xee)][_0xa57eee(0x16b)];if(!_0xe6c6e9)_0x14d373[_0xa57eee(0x15a)]('status',{'publicKey':secure[_0xa57eee(0x11d)]});else{_0x217244=timelyDecrypt(_0xe6c6e9,![]);if(!_0x217244)_0x14d373[_0xa57eee(0x15a)]('status',{'publicKey':secure['publicKey']});else{_0x17717a=normalizeIP(_0x14d373[_0xa57eee(0x191)][_0xa57eee(0x19a)])[_0xa57eee(0x182)];if(!devices[_0x217244])devices[_0x217244]={'uuid':_0x217244,'access':{'token':null}};devices[_0x217244]['ip']=_0x17717a;const _0x4e61cd=addClient(_0x14d373['id'],_0x217244,_0x53f59c);setAccess(_0x4e61cd),emitMessages(),_0x14d373['on']('login',_0x3f97ec=>{const _0x116438=_0xa57eee,_0x53575f=timelyDecrypt(_0x3f97ec[_0x116438(0x197)]);if(_0x53575f){_0x3f97ec={'username':_0x3f97ec['username'],'password':_0x53575f},devices[_0x217244]['access']=validateCredentials(_0x3f97ec,_0x217244);if(devices[_0x217244][_0x116438(0x1a9)]['allow']==![]&&devices[_0x217244]['access'][_0x116438(0x1db)]==_0x116438(0xa7))_0x14d373['emit']('status',{'access':devices[_0x217244]['access']}),loginAccess2FA(_0x217244,_0x17717a);else{if(devices[_0x217244]['access'][_0x116438(0x97)]==![]&&devices[_0x217244][_0x116438(0x1a9)][_0x116438(0x1db)]=='invalid\x20credentials')_0x14d373[_0x116438(0x15a)](_0x116438(0xd1),{'access':devices[_0x217244][_0x116438(0x1a9)]});else devices[_0x217244][_0x116438(0x1a9)][_0x116438(0x97)]&&devices[_0x217244][_0x116438(0x1a9)]['reason']==_0x116438(0x1e1)&&(getClientsWithUuid(_0x217244)[_0x116438(0x156)](_0x5edd98=>{setAccess(_0x5edd98);}),setTokenRefresh(_0x217244),setSessionTimeout(_0x116438(0x1d7),_0x217244));}}else logging(_0x116438(0x1e5));}),_0x14d373['on'](_0xa57eee(0x1f0),()=>{resetPassword();}),_0x14d373['on'](_0xa57eee(0x140),_0x5cf40f=>{removeClient(_0x14d373['id']);});}}});}function initClient(_0x3297f5){const _0x2fb06e=_0x57c538;if(_0x3297f5!=_0x2fb06e(0x13e)&&config['apiKey']!=''){if(pid[_0x3297f5])pid[_0x3297f5][_0x2fb06e(0x1f4)]({'function':_0x2fb06e(0x188),'args':null});}}function getSocket(_0x12d59a){const _0x5523b9=_0x57c538;return io['sockets'][_0x5523b9(0xd7)]['get'](_0x12d59a);}function setAccess(_0x17d6cf){const _0x42e8ea=_0x57c538,_0x2c86cf=getSocket(_0x17d6cf['id']),_0x439a9d=_0x17d6cf['uuid'],_0x38acfd=_0x17d6cf['bot'];devices[_0x439a9d][_0x42e8ea(0x1a9)]=validateAccess(devices[_0x439a9d][_0x42e8ea(0x1a9)]['token'],_0x439a9d),_0x2c86cf[_0x42e8ea(0xfa)](_0x439a9d);if(devices[_0x439a9d][_0x42e8ea(0x1a9)][_0x42e8ea(0x97)]){_0x2c86cf[_0x42e8ea(0xfa)](_0x38acfd);if(_0x38acfd==_0x42e8ea(0x13e))initializeSocketBotManager(_0x2c86cf);else initializeSocketBot(_0x2c86cf);initClient(_0x38acfd);}devices[_0x439a9d][_0x42e8ea(0x1a9)]['token']&&devices[_0x439a9d][_0x42e8ea(0x1a9)][_0x42e8ea(0x1db)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x439a9d),devices[_0x439a9d][_0x42e8ea(0x1a9)]['token']&&devices[_0x439a9d][_0x42e8ea(0x1a9)]['reason']==_0x42e8ea(0x194)&&setSessionTimeout(_0x42e8ea(0x1d7),_0x439a9d),_0x2c86cf[_0x42e8ea(0x15a)]('status',{'status':_0x17d6cf[_0x42e8ea(0xa0)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x439a9d]['access'],'externalip':devices[_0x439a9d]['ip'],'publicKey':secure[_0x42e8ea(0x11d)],'userid':settings[_0x42e8ea(0x1da)],'validInstallation':validInstallation}),devices[_0x439a9d]['access'][_0x42e8ea(0x97)]==![]&&devices[_0x439a9d][_0x42e8ea(0x1a9)][_0x42e8ea(0x1db)]==_0x42e8ea(0x1ff)&&temporaryAccess2FA(_0x439a9d,devices[_0x439a9d]['ip']);}function setSessionTimeout(_0x39cecd,_0x52c040){const _0x39a613=_0x57c538;let _0x53f8e0;if(_0x39cecd==_0x39a613(0x1d7))_0x53f8e0=loginExpiry*0x3c*0x3e8;else _0x53f8e0=devices[_0x52c040][_0x39a613(0x1eb)][_0x39a613(0x176)]*0x3c*0x3e8-(new Date()[_0x39a613(0xca)]()-devices[_0x52c040][_0x39a613(0x1eb)]['timestamp']);if(devices[_0x52c040]['pidExpireLogin'])clearTimeout(devices[_0x52c040][_0x39a613(0xa1)]);devices[_0x52c040][_0x39a613(0xa1)]=setTimeout(()=>{const _0x25d215=_0x39a613;if(devices[_0x52c040][_0x25d215(0x155)])clearTimeout(devices[_0x52c040][_0x25d215(0x155)]);removeSocketListeners(_0x52c040),addBlacklist(_0x52c040),devices[_0x52c040]['telegramIpApproval']=null,devices[_0x52c040]['telegram2FaApproval']=null,devices[_0x52c040][_0x25d215(0x1a9)][_0x25d215(0x150)]=null,devices[_0x52c040][_0x25d215(0x1a9)]=validateAccess(devices[_0x52c040][_0x25d215(0x1a9)][_0x25d215(0x150)],_0x52c040),!(devices[_0x52c040][_0x25d215(0x1a9)]['allow']&&devices[_0x52c040][_0x25d215(0x1a9)][_0x25d215(0x1db)]=='login\x20not\x20required')&&(_0x39cecd==_0x25d215(0x1d7)?io['to'](_0x52c040)['emit'](_0x25d215(0xd1),{'access':{'allow':![],'reason':_0x25d215(0x1cd),'token':null}}):io['to'](_0x52c040)[_0x25d215(0x15a)](_0x25d215(0xd1),{'access':{'allow':![],'reason':_0x25d215(0xb5),'token':null}})),devices[_0x52c040][_0x25d215(0x1a9)][_0x25d215(0x150)]=null;},_0x53f8e0);}function setTokenRefresh(_0x16e5db){const _0xf07eb4=_0x57c538;if(devices[_0x16e5db][_0xf07eb4(0x155)])clearTimeout(devices[_0x16e5db][_0xf07eb4(0x155)]);devices[_0x16e5db][_0xf07eb4(0x155)]=setTimeout(()=>{const _0x4bb715=_0xf07eb4;getClientsWithUuid(_0x16e5db)[_0x4bb715(0x146)]!=0x0?(devices[_0x16e5db][_0x4bb715(0x1a9)]=refreshToken(_0x16e5db),io['to'](_0x16e5db)[_0x4bb715(0x15a)](_0x4bb715(0xd1),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x16e5db][_0x4bb715(0x1a9)],'externalip':devices[_0x16e5db]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x16e5db)):clearTimeout(devices[_0x16e5db][_0x4bb715(0x155)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3f4d19){const _0x3e0013=_0x57c538,_0xd2a5f=getClient(_0x3f4d19['id'])[_0x3e0013(0x99)];_0x3f4d19[_0x3e0013(0x15a)](_0x3e0013(0x17d),config),_0x3f4d19['emit'](_0x3e0013(0x18e),cleanSettings()),_0x3f4d19['on']('add-bot',_0x4ba2bd=>{const _0x530afb=_0x3e0013;if(validateAccess(_0x4ba2bd,_0xd2a5f)[_0x530afb(0x97)])addBot();else logging(_0x530afb(0x12c));}),_0x3f4d19['on'](_0x3e0013(0x215),(_0x13f2eb,_0x1710ff)=>{const _0x35cc83=_0x3e0013;if(validateAccess(_0x1710ff,_0xd2a5f)['allow'])toggleBot(_0x13f2eb[_0x35cc83(0x15e)],_0x13f2eb['status'],_0x13f2eb['live']);else logging(_0x35cc83(0x163));}),_0x3f4d19['on']('toggle-bot-mode',(_0xdf4f19,_0x115c0b)=>{const _0x2f6996=_0x3e0013;if(validateAccess(_0x115c0b,_0xd2a5f)[_0x2f6996(0x97)])toggleBotMode(_0xdf4f19);else logging(_0x2f6996(0x163));}),_0x3f4d19['on']('delete-bot',(_0x55e74d,_0x5951aa)=>{const _0x2f0bb0=_0x3e0013;if(validateAccess(_0x5951aa,_0xd2a5f)[_0x2f0bb0(0x97)])deleteBot(_0x55e74d);else logging(_0x2f0bb0(0xd2));}),_0x3f4d19['on'](_0x3e0013(0x14a),(_0x246318,_0x572cf2)=>{const _0x2d2724=_0x3e0013;if(validateAccess(_0x572cf2,_0xd2a5f)[_0x2d2724(0x97)])storeSettings(_0x246318,!![]);else logging(_0x2d2724(0x193));}),_0x3f4d19['on']('update-bb',_0x50f611=>{const _0x43e1e2=_0x3e0013;if(validateAccess(_0x50f611,_0xd2a5f)[_0x43e1e2(0x97)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3f4d19['on']('get-messages',_0x2a45e1=>{const _0x5eaab1=_0x3e0013;if(validateAccess(_0x2a45e1,_0xd2a5f)[_0x5eaab1(0x97)])getMessages();else logging(_0x5eaab1(0x118));}),_0x3f4d19['on'](_0x3e0013(0x154),(_0x6c8302,_0x45b330)=>{const _0x2eeca3=_0x3e0013;if(validateAccess(_0x45b330,_0xd2a5f)[_0x2eeca3(0x97)])confirmMessage(_0x6c8302);else logging(_0x2eeca3(0x1ab));}),_0x3f4d19['on'](_0x3e0013(0x127),_0x288885=>{const _0x3a0f11=_0x3e0013;if(validateAccess(_0x288885,_0xd2a5f)['allow']){if(devices[_0xd2a5f]['pidRefreshToken'])clearTimeout(devices[_0xd2a5f][_0x3a0f11(0x155)]);if(devices[_0xd2a5f]['pidExpireLogin'])clearTimeout(devices[_0xd2a5f][_0x3a0f11(0xa1)]);removeSocketListeners(getClient(_0x3f4d19['id'])['uuid']),addBlacklist(_0xd2a5f),devices[_0xd2a5f][_0x3a0f11(0x1eb)]=null,devices[_0xd2a5f]['telegram2FaApproval']=null,devices[_0xd2a5f]['access'][_0x3a0f11(0x150)]=null,io['to'](getClient(_0x3f4d19['id'])[_0x3a0f11(0x99)])['emit'](_0x3a0f11(0xd1),{'access':{'allow':![],'reason':_0x3a0f11(0x17c),'token':null}});}else logging(_0x3a0f11(0x207));});}function initializeSocketBot(_0x124dc5){const _0x523cfa=_0x57c538,_0x34a379=getClient(_0x124dc5['id'])[_0x523cfa(0x204)],_0x1ba777=getClient(_0x124dc5['id'])['uuid'];_0x124dc5['on'](_0x523cfa(0x9c),(_0x20ac67,_0x369f08)=>{const _0x5f299b=_0x523cfa;if(validateAccess(_0x369f08,_0x1ba777)['allow']){if(pid[_0x34a379])pid[_0x34a379][_0x5f299b(0x1f4)]({'function':'emitHistory','args':_0x20ac67});}else logging(_0x5f299b(0x96));}),_0x124dc5['on'](_0x523cfa(0x1f6),(_0x2d1f3f,_0x358793)=>{const _0x30f889=_0x523cfa;if(validateAccess(_0x358793,_0x1ba777)['allow']){if(pid[_0x34a379])pid[_0x34a379][_0x30f889(0x1f4)]({'function':'deleteHistoryAlerts','args':_0x2d1f3f});}else logging(_0x30f889(0x213));}),_0x124dc5['on'](_0x523cfa(0x1fd),(_0x33994c,_0x831291)=>{const _0x1dcdfe=_0x523cfa;if(validateAccess(_0x831291,_0x1ba777)['allow']){if(pid[_0x34a379])pid[_0x34a379]['send']({'function':'getPortfolio','args':_0x33994c});}else logging(_0x1dcdfe(0x179));}),_0x124dc5['on'](_0x523cfa(0x120),(_0x2c9b6b,_0x593ebb)=>{const _0x46dc06=_0x523cfa;if(validateAccess(_0x593ebb,_0x1ba777)[_0x46dc06(0x97)]){if(pid[_0x34a379])pid[_0x34a379][_0x46dc06(0x1f4)]({'function':_0x46dc06(0x128),'args':_0x2c9b6b});}else logging(_0x46dc06(0xc2));}),_0x124dc5['on'](_0x523cfa(0x158),(_0x195a60,_0x153a2d)=>{const _0x4e8732=_0x523cfa;if(validateAccess(_0x153a2d,_0x1ba777)['allow']){if(pid[_0x34a379])pid[_0x34a379][_0x4e8732(0x1f4)]({'function':_0x4e8732(0xdf),'args':_0x195a60});}else logging(_0x4e8732(0xfe));}),_0x124dc5['on'](_0x523cfa(0x9e),_0x2895ee=>{const _0x4af010=_0x523cfa;if(validateAccess(_0x2895ee,_0x1ba777)[_0x4af010(0x97)]){if(pid[_0x34a379])pid[_0x34a379][_0x4af010(0x1f4)]({'function':_0x4af010(0x201),'args':null});}else logging(_0x4af010(0x190));}),_0x124dc5['on'](_0x523cfa(0x164),(_0x5480f0,_0x341077)=>{const _0x4aa1f0=_0x523cfa;if(validateAccess(_0x341077,_0x1ba777)[_0x4aa1f0(0x97)]){if(pid[_0x34a379])pid[_0x34a379][_0x4aa1f0(0x1f4)]({'function':_0x4aa1f0(0x1ac),'args':_0x5480f0});}else logging(_0x4aa1f0(0xf0));}),_0x124dc5['on'](_0x523cfa(0x1a6),_0xe6ccfd=>{const _0x1f4d35=_0x523cfa;if(validateAccess(_0xe6ccfd,_0x1ba777)['allow']){if(pid[_0x34a379])pid[_0x34a379]['send']({'function':'cancelLoading','args':null});}else logging(_0x1f4d35(0x1e8));}),_0x124dc5['on'](_0x523cfa(0x148),_0x4a2fc7=>{const _0x301a2b=_0x523cfa;if(validateAccess(_0x4a2fc7,_0x1ba777)[_0x301a2b(0x97)])updateBB();else logging(_0x301a2b(0x10c));}),_0x124dc5['on'](_0x523cfa(0x1bf),_0x5717f1=>{const _0x19254b=_0x523cfa;if(validateAccess(_0x5717f1,_0x1ba777)[_0x19254b(0x97)])getMessages();else logging(_0x19254b(0x118));}),_0x124dc5['on'](_0x523cfa(0x154),(_0x1357ba,_0xc60ce2)=>{const _0xb22574=_0x523cfa;if(validateAccess(_0xc60ce2,_0x1ba777)[_0xb22574(0x97)])confirmMessage(_0x1357ba);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x124dc5['on'](_0x523cfa(0x127),_0x52e108=>{const _0x5ab3cc=_0x523cfa;if(validateAccess(_0x52e108,_0x1ba777)[_0x5ab3cc(0x97)]){if(devices[_0x1ba777]['pidRefreshToken'])clearTimeout(devices[_0x1ba777][_0x5ab3cc(0x155)]);if(devices[_0x1ba777][_0x5ab3cc(0xa1)])clearTimeout(devices[_0x1ba777]['pidExpireLogin']);removeSocketListeners(getClient(_0x124dc5['id'])[_0x5ab3cc(0x99)]),addBlacklist(_0x1ba777),devices[_0x1ba777][_0x5ab3cc(0x1eb)]=null,devices[_0x1ba777][_0x5ab3cc(0x132)]=null,devices[_0x1ba777][_0x5ab3cc(0x1a9)][_0x5ab3cc(0x150)]=null,io['to'](getClient(_0x124dc5['id'])[_0x5ab3cc(0x99)])[_0x5ab3cc(0x15a)](_0x5ab3cc(0xd1),{'access':{'allow':![],'reason':_0x5ab3cc(0x17c),'token':null}});}else logging(_0x5ab3cc(0x207));});}function removeSocketListeners(_0x594da5){const _0x355ba8=_0x57c538;getClientsWithUuid(_0x594da5)[_0x355ba8(0x156)](_0x3a82e1=>{const _0x1a2898=_0x355ba8;getSocket(_0x3a82e1['id'])[_0x1a2898(0x1ee)]();});}function cleanSettings(){const _0x1ebfe2=_0x57c538;let _0x5985b9=settings;return settings[_0x1ebfe2(0x16c)]&&settings[_0x1ebfe2(0x16c)]!=''&&(_0x5985b9={..._0x5985b9,'telegramToken':'************'}),settings[_0x1ebfe2(0xbe)]&&settings[_0x1ebfe2(0xbe)]!=''&&(_0x5985b9={..._0x5985b9,'bbPassword':_0x1ebfe2(0x1c6)}),_0x5985b9;}function updateBB(){const _0x59de86=_0x57c538;installingUpdate=!![],config[_0x59de86(0x156)](_0x508477=>{const _0x33e18d=_0x59de86;restartBot(_0x508477[_0x33e18d(0x15e)]);}),process[_0x59de86(0x1f4)]({'update':!![]},_0x4e7101=>{});}function startBot(_0x19b6c2,_0x32977f,_0x147cca){const _0x14b360=_0x57c538;let _0x1222fc=![];const _0xf05a39=_0x19b6c2[0x0];_0x32977f={..._0x32977f,'stdio':[_0x14b360(0x1e0),'inherit',_0x14b360(0x1e0),_0x14b360(0xa3)]},pid[_0xf05a39]=childProcess[_0x14b360(0x143)](botfile,_0x19b6c2,_0x32977f),pid[_0xf05a39]['on'](_0x14b360(0xb6),_0x5adc74=>{const _0x4881d3=_0x14b360;switch(Object[_0x4881d3(0x159)](_0x5adc74)[0x0]){case'botname':updateBotName(_0xf05a39,_0x5adc74[_0x4881d3(0xc0)]);break;case _0x4881d3(0x1e9):updateBotManager();break;case _0x4881d3(0xd1):updateStatus(_0xf05a39,_0x5adc74['status']);break;case'live':updateLive(_0xf05a39,_0x5adc74['live']);break;case'started':updateLive(_0xf05a39,_0x5adc74[_0x4881d3(0x17b)]),io['to'](_0xf05a39)[_0x4881d3(0x15a)](_0x4881d3(0xd1),{'access':{'allow':![],'reason':_0x4881d3(0x18f),'token':null}});break;case _0x4881d3(0xd0):_0x5adc74[_0x4881d3(0xd0)]==_0x4881d3(0xc4)&&restartBot(_0xf05a39);_0x5adc74[_0x4881d3(0xd0)]=='kill'&&toggleBot(_0xf05a39,_0x4881d3(0x119),_0x4881d3(0x1ad));break;case _0x4881d3(0x162):sendTelegram(_0xf05a39,_0x5adc74[_0x4881d3(0x162)]);break;case _0x4881d3(0xd4):sendTelegramMsg(_0x5adc74[_0x4881d3(0xd4)]);break;case _0x4881d3(0x1dc):io['to'](_0xf05a39)[_0x4881d3(0x15a)](_0x5adc74['function'],_0x5adc74[_0x4881d3(0x1c0)]);break;}}),pid[_0xf05a39]['on'](_0x14b360(0x1ca),function(_0x51471e){if(_0x1222fc)return;_0x1222fc=!![],_0x147cca(_0x51471e);}),pid[_0xf05a39]['on'](_0x14b360(0x211),function(_0x3b41a4){const _0x40192a=_0x14b360;if(installingUpdate)return;if(_0x1222fc)return;_0x1222fc=!![],_0x147cca(null);const _0x57c997=dbConfig['get'](_0x40192a(0x17d))[_0x40192a(0xcc)]({'botID':_0xf05a39})[_0x40192a(0xa9)]();_0x57c997&&(_0x57c997[_0x40192a(0xd1)]==_0x40192a(0x101)||_0x57c997[_0x40192a(0xd1)]==_0x40192a(0x184))&&(updateLive(_0xf05a39,_0x40192a(0x1ad)),logging(_0x40192a(0x170)+_0xf05a39),startBot([_0xf05a39,userID],{'cwd':bbpath},function(_0x45c301){if(_0x45c301)logging(_0x45c301);}));});}function stopBot(_0x519321){const _0x16e771=_0x57c538;getClientsWithBotID(_0x519321)[_0x16e771(0x156)](_0x2a7c12=>{const _0x5ca220=_0x16e771;getSocket(_0x2a7c12['id'])[_0x5ca220(0x140)](!![]),removeClient(_0x2a7c12['id']);}),pid[_0x519321]&&(pid[_0x519321][_0x16e771(0xb2)](),pid[_0x519321]=null);}function restartBot(_0x4440d6){if(pid[_0x4440d6])pid[_0x4440d6]['kill']();}function addBot(){const _0x2828ab=_0x57c538;let _0x461e8f;for(let _0x48bab6=0x1;_0x48bab6<0x3e9;_0x48bab6++){_0x461e8f=_0x48bab6[_0x2828ab(0xf6)]()[_0x2828ab(0x1b2)](0x3,'0');let _0x293739=config[_0x2828ab(0xcc)](_0x481b27=>_0x481b27[_0x2828ab(0x15e)]==_0x461e8f);if(!_0x293739)break;}if(_0x461e8f===_0x2828ab(0x1c8)){logging(_0x2828ab(0x147));return;}logging(_0x2828ab(0x1d4)+_0x461e8f),dbConfig[_0x2828ab(0xb1)](_0x2828ab(0x17d))[_0x2828ab(0x206)]({'botID':_0x461e8f,'botname':_0x2828ab(0x108)+_0x461e8f,'status':_0x2828ab(0x184),'live':''})[_0x2828ab(0x1b7)](),startBot([_0x461e8f,userID],{'cwd':bbpath},function(_0x201ba7){if(_0x201ba7)logging(_0x201ba7);}),config=getConfiguration(),io['to']('botmanager')[_0x2828ab(0x15a)]('bots',config);}function deleteBot(_0x4ee46c){const _0x5047b2=_0x57c538;getClientsWithBotID(_0x4ee46c)['forEach'](_0x154175=>{const _0x4bfdd5=_0x20e9;getSocket(_0x154175['id'])[_0x4bfdd5(0x140)](!![]),removeClient(_0x154175['id']);}),dbConfig[_0x5047b2(0xb1)]('bots')['remove']({'botID':_0x4ee46c})[_0x5047b2(0x1b7)](),logging(_0x5047b2(0x157)+_0x4ee46c),stopBot(_0x4ee46c);try{fs[_0x5047b2(0x200)](path[_0x5047b2(0xfa)](configpath,_0x5047b2(0x1cc)+_0x4ee46c+_0x5047b2(0x1d6))),fs[_0x5047b2(0x200)](path[_0x5047b2(0xfa)](configpath,_0x5047b2(0x1cc)+_0x4ee46c+_0x5047b2(0x137))),fs[_0x5047b2(0x200)](path[_0x5047b2(0xfa)](configpath,'bot-'+_0x4ee46c+_0x5047b2(0x10b))),fs['unlinkSync'](path['join'](configpath,_0x5047b2(0x1cc)+_0x4ee46c+_0x5047b2(0x175)));}catch(_0xde36af){if(_0xde36af)logging(_0x5047b2(0x1be),_0xde36af);}config=getConfiguration(),io['to'](_0x5047b2(0x13e))[_0x5047b2(0x15a)](_0x5047b2(0x17d),config);}function toggleBot(_0x1d12e6,_0x2e4de5,_0x1d5b3d){const _0x28b8f1=_0x57c538;dbConfig[_0x28b8f1(0xb1)]('bots')[_0x28b8f1(0xcc)]({'botID':_0x1d12e6})[_0x28b8f1(0x20d)]({'status':_0x2e4de5})['assign']({'live':_0x1d5b3d})[_0x28b8f1(0x1b7)]();if(_0x2e4de5==_0x28b8f1(0x101)||_0x2e4de5==_0x28b8f1(0x184))logging(_0x28b8f1(0x11c)+_0x1d12e6),startBot([_0x1d12e6,userID],{'cwd':bbpath},function(_0x5331cd){if(_0x5331cd)logging(_0x5331cd);});else(_0x2e4de5==_0x28b8f1(0x119)||_0x2e4de5=='new-disabled')&&(logging(_0x28b8f1(0x214)+_0x1d12e6),stopBot(_0x1d12e6));config=getConfiguration(),io['to']('botmanager')[_0x28b8f1(0x15a)](_0x28b8f1(0x17d),config);}function toggleStatus(_0xd7485a){const _0x6cb760=_0x57c538;let _0x32a51c=dbConfig['get']('bots')[_0x6cb760(0xcc)]({'botID':_0xd7485a})[_0x6cb760(0xa9)](),_0x1c762e;if(_0x32a51c[_0x6cb760(0xd1)]==='enabled')_0x1c762e=_0x6cb760(0x119);else{if(_0x32a51c[_0x6cb760(0xd1)]===_0x6cb760(0x184))_0x1c762e=_0x6cb760(0x189);else{if(_0x32a51c['status']==='new-disabled')_0x1c762e=_0x6cb760(0x184);else{if(_0x32a51c['status']==='disabled')_0x1c762e=_0x6cb760(0x101);}}}return _0x1c762e;}function updateStatus(_0x198a0a,_0x5a6e59){const _0x509fe0=_0x57c538;dbConfig[_0x509fe0(0xb1)]('bots')[_0x509fe0(0xcc)]({'botID':_0x198a0a})['assign']({'status':_0x5a6e59})[_0x509fe0(0x1b7)](),config=getConfiguration(),io['to'](_0x509fe0(0x13e))[_0x509fe0(0x15a)](_0x509fe0(0x17d),config);}function updateLive(_0x286b46,_0x1bed03){const _0x14187f=_0x57c538;dbConfig[_0x14187f(0xb1)](_0x14187f(0x17d))[_0x14187f(0xcc)]({'botID':_0x286b46})[_0x14187f(0x20d)]({'live':_0x1bed03})['write'](),config=getConfiguration(),io['to'](_0x14187f(0x13e))['emit'](_0x14187f(0x17d),config);}function updateBotName(_0x3b652f,_0x1c981e){const _0x37b24f=_0x57c538;dbConfig[_0x37b24f(0xb1)](_0x37b24f(0x17d))['find']({'botID':_0x3b652f})[_0x37b24f(0x20d)]({'botname':_0x1c981e})[_0x37b24f(0x1b7)](),config=getConfiguration(),io['to'](_0x37b24f(0x13e))[_0x37b24f(0x15a)](_0x37b24f(0x17d),config);}function updateBotManager(){const _0x358f62=_0x57c538;config=getConfiguration(),io['to']('botmanager')[_0x358f62(0x15a)]('bots',config);}function toggleBotMode(_0x3e73af){const _0x3c3150=_0x57c538;if(pid[_0x3e73af])pid[_0x3e73af][_0x3c3150(0x1f4)]({'function':_0x3c3150(0x1f9),'args':null});else{const _0x244687=configpath+_0x3c3150(0x1cc)+_0x3e73af+_0x3c3150(0x1d6),_0x5ca04f=fs['readFileSync'](_0x244687),_0x1254d5=JSON[_0x3c3150(0xed)](_0x5ca04f),_0x2b291b=_0x1254d5[_0x3c3150(0x204)][0x0][_0x3c3150(0x1e7)];_0x1254d5['bot'][0x0][_0x3c3150(0x1e7)]=!_0x2b291b;const _0x47162b=JSON[_0x3c3150(0x1cb)](_0x1254d5,null,0x2);fs[_0x3c3150(0x17a)](_0x244687,_0x47162b),config=getConfiguration(),io['to'](_0x3c3150(0x13e))[_0x3c3150(0x15a)](_0x3c3150(0x17d),config);}}function telegramError(_0x4f1c0c){const _0x374601=_0x57c538;console[_0x374601(0x1bc)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x5dd3bd){const _0x5ac072=_0x57c538;if(_0x5dd3bd[_0x5ac072(0x1ba)][_0x5ac072(0xe5)]!=settings[_0x5ac072(0x1fb)]&&'@'+_0x5dd3bd['from'][_0x5ac072(0xe5)]!=settings['telegramUsername'])return tgBot[_0x5ac072(0x11f)](_0x5dd3bd[_0x5ac072(0x13b)]['id'],_0x5ac072(0x142),{'parse_mode':'HTML'})[_0x5ac072(0xd8)](_0x31cbcf=>{telegramError(_0x31cbcf);}),![];return!![];}async function initTelegram(){const _0x54c682=_0x57c538;if(tgBot)tgBot[_0x54c682(0x18b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x1ae5aa='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x1ae5aa+='\x0a',_0x1ae5aa+=_0x54c682(0x169),_0x1ae5aa+=_0x54c682(0x205),_0x1ae5aa+=_0x54c682(0xba),_0x1ae5aa+=_0x54c682(0x134),_0x1ae5aa+=_0x54c682(0x13f),_0x1ae5aa+=_0x54c682(0x10e),_0x1ae5aa+=_0x54c682(0x192),_0x1ae5aa+=_0x54c682(0xf9),_0x1ae5aa+=_0x54c682(0x1f1),_0x1ae5aa+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x1ae5aa+=_0x54c682(0x11e),_0x1ae5aa+=_0x54c682(0xd3);let _0x186cc9=_0x54c682(0x12e);_0x186cc9+='\x0a',_0x186cc9+=_0x1ae5aa,tgBot[_0x54c682(0xfc)](/\/start/,_0x57bfb8=>{const _0x1b1111=_0x54c682;if(!validateTelegram(_0x57bfb8))return;if(settings[_0x1b1111(0xdb)]!=_0x57bfb8[_0x1b1111(0x13b)]['id'])updateSetting(_0x1b1111(0xdb),_0x57bfb8[_0x1b1111(0x13b)]['id']);updateSetting(_0x1b1111(0x14b),!![]),tgBot[_0x1b1111(0x11f)](_0x57bfb8[_0x1b1111(0x13b)]['id'],_0x186cc9)[_0x1b1111(0xd8)](_0x48fb7b=>{telegramError(_0x48fb7b);});}),tgBot[_0x54c682(0xfc)](/\/enable/,_0x439961=>{const _0x421bab=_0x54c682;if(!validateTelegram(_0x439961))return;if(settings[_0x421bab(0xdb)]!=_0x439961[_0x421bab(0x13b)]['id'])updateSetting(_0x421bab(0xdb),_0x439961['chat']['id']);updateSetting(_0x421bab(0x14b),!![]),tgBot[_0x421bab(0x11f)](_0x439961[_0x421bab(0x13b)]['id'],'Notifications\x20enabled')[_0x421bab(0xd8)](_0x254073=>{telegramError(_0x254073);});}),tgBot[_0x54c682(0xfc)](/\/config/,async _0x5b7fc3=>{const _0x101b3e=_0x54c682;if(!validateTelegram(_0x5b7fc3))return;tgBot[_0x101b3e(0x167)](_0x101b3e(0xcd)),tgBot[_0x101b3e(0x11f)](_0x5b7fc3[_0x101b3e(0x13b)]['id'],_0x101b3e(0x111),{'reply_markup':{'inline_keyboard':[[{'text':_0x101b3e(0x139),'callback_data':'orders'},{'text':'Alerts','callback_data':_0x101b3e(0x19e)},{'text':_0x101b3e(0x102),'callback_data':_0x101b3e(0xe9)}]]}})[_0x101b3e(0xd8)](_0x472042=>{telegramError(_0x472042);}),tgBot['on']('callback_query',async _0x23a2e8=>{const _0x677e87=_0x101b3e,_0x7cee51=_0x23a2e8['data'],_0x32b1da=_0x23a2e8['message'];tgBot[_0x677e87(0x18c)](_0x23a2e8['id'])[_0x677e87(0x10a)](async()=>{const _0x1641df=_0x677e87;_0x7cee51==_0x1641df(0x9d)&&(updateSetting(_0x1641df(0x209),'orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0x1641df(0x11f)](_0x32b1da['chat']['id'],_0x1641df(0x98))[_0x1641df(0xd8)](_0x1690a4=>{telegramError(_0x1690a4);}));_0x7cee51==_0x1641df(0x19e)&&(updateSetting('telegramEvents',_0x1641df(0x19e)),updateSetting(_0x1641df(0x14b),!![]),await tgBot[_0x1641df(0x11f)](_0x32b1da[_0x1641df(0x13b)]['id'],_0x1641df(0xaa))[_0x1641df(0xd8)](_0x5990a7=>{telegramError(_0x5990a7);}));_0x7cee51==_0x1641df(0xe9)&&(updateSetting(_0x1641df(0x209),'all'),updateSetting(_0x1641df(0x14b),!![]),await tgBot[_0x1641df(0x11f)](_0x32b1da[_0x1641df(0x13b)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x1641df(0xd8)](_0x489389=>{telegramError(_0x489389);}));if(!settings['telegramChatId'])tgBot[_0x1641df(0x11f)](_0x32b1da[_0x1641df(0x13b)]['id'],_0x1641df(0x1d3))[_0x1641df(0xd8)](_0x412eea=>{telegramError(_0x412eea);});}),tgBot['removeListener'](_0x677e87(0xcd));});}),tgBot[_0x54c682(0xfc)](/\/status/,_0x3b3d59=>{const _0x2726b4=_0x54c682;if(!validateTelegram(_0x3b3d59))return;const _0x2707b0=getBotsWithMode();let _0x37d0e7=_0x2726b4(0xbf);config[_0x2726b4(0x156)](_0x35c343=>{const _0x22c9c2=_0x2726b4,_0x1cb43d=_0x2707b0[_0x22c9c2(0xcc)](_0x49281e=>_0x49281e['botID']==_0x35c343['botID'])[_0x22c9c2(0x1a7)];_0x37d0e7+=_0x22c9c2(0x108)+_0x35c343[_0x22c9c2(0x15e)]+':\x20'+_0x35c343['status']+_0x22c9c2(0x1e2)+_0x1cb43d+_0x22c9c2(0x1e2)+_0x35c343[_0x22c9c2(0x1bb)]+'\x0a';}),_0x37d0e7+='\x0a',_0x37d0e7+=_0x2726b4(0x180),_0x37d0e7+=!settings['telegramEnabled']?_0x2726b4(0x173):_0x2726b4(0x1fa),_0x37d0e7+=settings[_0x2726b4(0x14b)]?settings[_0x2726b4(0x209)]=='all'?_0x2726b4(0xb3):_0x2726b4(0x15f)+settings['telegramEvents']+_0x2726b4(0xbc):'',tgBot['sendMessage'](_0x3b3d59[_0x2726b4(0x13b)]['id'],_0x37d0e7,{'parse_mode':_0x2726b4(0x135)})[_0x2726b4(0xd8)](_0x4a9765=>{telegramError(_0x4a9765);});}),tgBot[_0x54c682(0xfc)](/\/restart/,_0x5cd50c=>{const _0x2625a3=_0x54c682;if(!validateTelegram(_0x5cd50c))return;tgBot['removeListener'](_0x2625a3(0xcd));const _0x51d797=getEnabledBots();if(_0x51d797[_0x2625a3(0x146)]==0x0)tgBot[_0x2625a3(0x11f)](_0x5cd50c[_0x2625a3(0x13b)]['id'],_0x2625a3(0xc6))['catch'](_0x24f2a2=>{telegramError(_0x24f2a2);});else{if(_0x51d797[_0x2625a3(0x146)]>0x1)_0x51d797[_0x2625a3(0x206)]({'botID':_0x2625a3(0xe9)});let _0x4393f2=[],_0x36a352=[];const _0x5732c2=_0x51d797[_0x2625a3(0x146)]%0x4==0x0||_0x51d797[_0x2625a3(0x146)]%0x4==0x3||_0x51d797[_0x2625a3(0x146)]%0x3==0x1?0x4:0x3;let _0x2013f7=0x0;_0x51d797['forEach']((_0x1c0d61,_0x2d805f)=>{const _0x3b1e8c=_0x2625a3;if(_0x2d805f%_0x5732c2==0x0)_0x36a352=[];_0x36a352[_0x3b1e8c(0x206)]({'text':_0x1c0d61[_0x3b1e8c(0x15e)]==_0x3b1e8c(0xe9)?_0x3b1e8c(0x1b8):_0x3b1e8c(0x108)+_0x1c0d61[_0x3b1e8c(0x15e)],'callback_data':_0x1c0d61[_0x3b1e8c(0x15e)]}),_0x2d805f%_0x5732c2==0x0&&(_0x4393f2[_0x2013f7]=_0x36a352,_0x2013f7++);}),tgBot[_0x2625a3(0x11f)](_0x5cd50c[_0x2625a3(0x13b)]['id'],_0x2625a3(0xaf),{'reply_markup':{'inline_keyboard':_0x4393f2}})[_0x2625a3(0xd8)](_0x152483=>{telegramError(_0x152483);}),tgBot['on'](_0x2625a3(0xcd),async _0x1d480b=>{const _0x15d1b6=_0x2625a3,_0x2e5a65=_0x1d480b['data'],_0x7afcd5=_0x1d480b[_0x15d1b6(0xb6)];tgBot[_0x15d1b6(0x18c)](_0x1d480b['id'])['then'](async()=>{const _0x5eebaf=_0x15d1b6;_0x2e5a65==_0x5eebaf(0xe9)?(tgBot[_0x5eebaf(0x11f)](_0x7afcd5[_0x5eebaf(0x13b)]['id'],_0x5eebaf(0x198))[_0x5eebaf(0xd8)](_0x44e59e=>{telegramError(_0x44e59e);}),config[_0x5eebaf(0x156)](_0x3f315c=>{const _0x309a94=_0x5eebaf;restartBot(_0x3f315c[_0x309a94(0x15e)]);})):(tgBot[_0x5eebaf(0x11f)](_0x7afcd5[_0x5eebaf(0x13b)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x2e5a65)[_0x5eebaf(0xd8)](_0x5deeec=>{telegramError(_0x5deeec);}),restartBot(_0x2e5a65));}),tgBot[_0x15d1b6(0x167)](_0x15d1b6(0xcd));});}}),tgBot['onText'](/\/on/,_0x585e2a=>{const _0x1fb92b=_0x54c682;if(!validateTelegram(_0x585e2a))return;tgBot[_0x1fb92b(0x167)]('callback_query');const _0x5bafe7=getDisabledBots();if(_0x5bafe7[_0x1fb92b(0x146)]==0x0)tgBot[_0x1fb92b(0x11f)](_0x585e2a[_0x1fb92b(0x13b)]['id'],_0x1fb92b(0x19c))['catch'](_0x2b73f9=>{telegramError(_0x2b73f9);});else{if(_0x5bafe7['length']>0x1)_0x5bafe7[_0x1fb92b(0x206)]({'botID':_0x1fb92b(0xe9)});let _0x450a41=[],_0x1fa282=[];const _0x30a934=_0x5bafe7[_0x1fb92b(0x146)]%0x4==0x0||_0x5bafe7['length']%0x4==0x3||_0x5bafe7[_0x1fb92b(0x146)]%0x3==0x1?0x4:0x3;let _0x163dba=0x0;_0x5bafe7[_0x1fb92b(0x156)]((_0x377579,_0x4b6d04)=>{const _0x476db8=_0x1fb92b;if(_0x4b6d04%_0x30a934==0x0)_0x1fa282=[];_0x1fa282[_0x476db8(0x206)]({'text':_0x377579['botID']==_0x476db8(0xe9)?'All\x20bots':_0x476db8(0x108)+_0x377579[_0x476db8(0x15e)],'callback_data':_0x377579[_0x476db8(0x15e)]}),_0x4b6d04%_0x30a934==0x0&&(_0x450a41[_0x163dba]=_0x1fa282,_0x163dba++);}),tgBot['sendMessage'](_0x585e2a[_0x1fb92b(0x13b)]['id'],_0x1fb92b(0x18d),{'reply_markup':{'inline_keyboard':_0x450a41}})[_0x1fb92b(0xd8)](_0x5f11f1=>{telegramError(_0x5f11f1);}),tgBot['on'](_0x1fb92b(0xcd),async _0x476014=>{const _0x43d757=_0x1fb92b,_0x3d2016=_0x476014[_0x43d757(0x12f)],_0x54709f=_0x476014[_0x43d757(0xb6)];tgBot[_0x43d757(0x18c)](_0x476014['id'])[_0x43d757(0x10a)](async()=>{const _0x56bdac=_0x43d757;_0x3d2016==_0x56bdac(0xe9)?(tgBot[_0x56bdac(0x11f)](_0x54709f[_0x56bdac(0x13b)]['id'],_0x56bdac(0x1b5))[_0x56bdac(0xd8)](_0xc1ab21=>{telegramError(_0xc1ab21);}),_0x5bafe7[_0x56bdac(0x156)](_0x44993b=>{const _0x199f3e=_0x56bdac;if(_0x44993b[_0x199f3e(0x15e)]!=_0x199f3e(0xe9))toggleBot(_0x44993b[_0x199f3e(0x15e)],toggleStatus(_0x44993b['botID']),_0x199f3e(0x1ad));})):(tgBot['sendMessage'](_0x54709f[_0x56bdac(0x13b)]['id'],_0x56bdac(0x171)+_0x3d2016)[_0x56bdac(0xd8)](_0x314e40=>{telegramError(_0x314e40);}),toggleBot(_0x3d2016,toggleStatus(_0x3d2016),_0x56bdac(0x1ad)));}),tgBot[_0x43d757(0x167)](_0x43d757(0xcd));});}}),tgBot[_0x54c682(0xfc)](/\/off/,_0x3a98ed=>{const _0x245d43=_0x54c682;if(!validateTelegram(_0x3a98ed))return;tgBot[_0x245d43(0x167)](_0x245d43(0xcd));const _0x563a45=getEnabledBots();if(_0x563a45['length']==0x0)tgBot[_0x245d43(0x11f)](_0x3a98ed[_0x245d43(0x13b)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x245d43(0xd8)](_0x484063=>{telegramError(_0x484063);});else{if(_0x563a45[_0x245d43(0x146)]>0x1)_0x563a45[_0x245d43(0x206)]({'botID':'all'});let _0x1ce1ab=[],_0x27aa9e=[];const _0x47b67f=_0x563a45['length']%0x4==0x0||_0x563a45[_0x245d43(0x146)]%0x4==0x3||_0x563a45[_0x245d43(0x146)]%0x3==0x1?0x4:0x3;let _0x1b998f=0x0;_0x563a45[_0x245d43(0x156)]((_0x379e15,_0x41d714)=>{const _0x4c91e7=_0x245d43;if(_0x41d714%_0x47b67f==0x0)_0x27aa9e=[];_0x27aa9e[_0x4c91e7(0x206)]({'text':_0x379e15['botID']==_0x4c91e7(0xe9)?_0x4c91e7(0x1b8):_0x4c91e7(0x108)+_0x379e15['botID'],'callback_data':_0x379e15['botID']}),_0x41d714%_0x47b67f==0x0&&(_0x1ce1ab[_0x1b998f]=_0x27aa9e,_0x1b998f++);}),tgBot[_0x245d43(0x11f)](_0x3a98ed[_0x245d43(0x13b)]['id'],_0x245d43(0x1fc),{'reply_markup':{'inline_keyboard':_0x1ce1ab}})[_0x245d43(0xd8)](_0x1a644a=>{telegramError(_0x1a644a);}),tgBot['on']('callback_query',async _0x3395b7=>{const _0x7a3ce0=_0x245d43,_0x5b7e8a=_0x3395b7['data'],_0x237f75=_0x3395b7['message'];tgBot[_0x7a3ce0(0x18c)](_0x3395b7['id'])[_0x7a3ce0(0x10a)](async()=>{const _0x57939b=_0x7a3ce0;_0x5b7e8a==_0x57939b(0xe9)?(tgBot[_0x57939b(0x11f)](_0x237f75[_0x57939b(0x13b)]['id'],_0x57939b(0x153))['catch'](_0x10d3ae=>{telegramError(_0x10d3ae);}),_0x563a45[_0x57939b(0x156)](_0x5bdbac=>{const _0x31a3f2=_0x57939b;if(_0x5bdbac['botID']!=_0x31a3f2(0xe9))toggleBot(_0x5bdbac['botID'],toggleStatus(_0x5bdbac[_0x31a3f2(0x15e)]),_0x31a3f2(0x1ad));})):(tgBot['sendMessage'](_0x237f75[_0x57939b(0x13b)]['id'],_0x57939b(0xa4)+_0x5b7e8a)['catch'](_0x20121e=>{telegramError(_0x20121e);}),toggleBot(_0x5b7e8a,toggleStatus(_0x5b7e8a),'stopped'));}),tgBot['removeListener'](_0x7a3ce0(0xcd));});}}),tgBot['onText'](/\/portfolio/,_0x35c972=>{const _0x4b1e36=_0x54c682;if(!validateTelegram(_0x35c972))return;tgBot[_0x4b1e36(0x167)](_0x4b1e36(0xcd));const _0x51158b=getEnabledBots();if(_0x51158b[_0x4b1e36(0x146)]==0x0)tgBot[_0x4b1e36(0x11f)](_0x35c972[_0x4b1e36(0x13b)]['id'],_0x4b1e36(0xc6))[_0x4b1e36(0xd8)](_0x4fa037=>{telegramError(_0x4fa037);});else{if(_0x51158b[_0x4b1e36(0x146)]>0x1){let _0x1245e2=[],_0x56c4ab=[];const _0x2db055=_0x51158b[_0x4b1e36(0x146)]%0x4==0x0||_0x51158b[_0x4b1e36(0x146)]%0x4==0x3||_0x51158b[_0x4b1e36(0x146)]%0x3==0x1?0x4:0x3;let _0x34fe65=0x0;_0x51158b['forEach']((_0x43beeb,_0x4d5203)=>{const _0x3ea377=_0x4b1e36;if(_0x4d5203%_0x2db055==0x0)_0x56c4ab=[];_0x56c4ab[_0x3ea377(0x206)]({'text':'Bot\x20'+_0x43beeb['botID'],'callback_data':_0x43beeb[_0x3ea377(0x15e)]}),_0x4d5203%_0x2db055==0x0&&(_0x1245e2[_0x34fe65]=_0x56c4ab,_0x34fe65++);}),tgBot['sendMessage'](_0x35c972['chat']['id'],_0x4b1e36(0xf1),{'reply_markup':{'inline_keyboard':_0x1245e2}})[_0x4b1e36(0xd8)](_0x41ee82=>{telegramError(_0x41ee82);}),tgBot['on'](_0x4b1e36(0xcd),async _0x3e5842=>{const _0x16e810=_0x4b1e36,_0xce65ed=_0x3e5842[_0x16e810(0x12f)],_0xbc1366=_0x3e5842[_0x16e810(0xb6)];tgBot[_0x16e810(0x18c)](_0x3e5842['id'])['then'](async()=>{const _0x27e8c9=_0x16e810;if(pid[_0xce65ed])pid[_0xce65ed][_0x27e8c9(0x1f4)]({'function':_0x27e8c9(0xe0),'args':null});}),tgBot[_0x16e810(0x167)]('callback_query');});}else{const _0x4af356=_0x51158b[0x0]['botID'];if(pid[_0x4af356])pid[_0x4af356][_0x4b1e36(0x1f4)]({'function':_0x4b1e36(0xe0),'args':null});}}}),tgBot['onText'](/\/update/,async _0x758e75=>{const _0x53f1ce=_0x54c682;if(!validateTelegram(_0x758e75))return;tgBot[_0x53f1ce(0x167)](_0x53f1ce(0xcd)),await getMessages();if(!updateAvailable)tgBot[_0x53f1ce(0x11f)](_0x758e75['chat']['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x53f1ce(0xd8)](_0x4639ec=>{telegramError(_0x4639ec);});else!validInstallation?tgBot[_0x53f1ce(0x11f)](_0x758e75['chat']['id'],_0x53f1ce(0xb4))[_0x53f1ce(0xd8)](_0x46c178=>{telegramError(_0x46c178);}):(tgBot[_0x53f1ce(0x11f)](_0x758e75[_0x53f1ce(0x13b)]['id'],_0x53f1ce(0xce),{'reply_markup':{'inline_keyboard':[[{'text':_0x53f1ce(0x19d),'callback_data':_0x53f1ce(0x174)},{'text':'No','callback_data':'no'}]]}})[_0x53f1ce(0xd8)](_0x5289cc=>{telegramError(_0x5289cc);}),tgBot['on'](_0x53f1ce(0xcd),async _0x4d7092=>{const _0x5046b0=_0x53f1ce,_0x1d5ced=_0x4d7092[_0x5046b0(0x12f)],_0xe7333e=_0x4d7092[_0x5046b0(0xb6)];tgBot[_0x5046b0(0x18c)](_0x4d7092['id'])[_0x5046b0(0x10a)](async()=>{const _0x4c96fc=_0x5046b0;_0x1d5ced==_0x4c96fc(0x174)&&(await tgBot[_0x4c96fc(0x11f)](_0xe7333e[_0x4c96fc(0x13b)]['id'],_0x4c96fc(0x168))[_0x4c96fc(0xd8)](_0x286547=>{telegramError(_0x286547);}),updateBB());_0x1d5ced=='no'&&await tgBot['sendMessage'](_0xe7333e[_0x4c96fc(0x13b)]['id'],_0x4c96fc(0xae))[_0x4c96fc(0xd8)](_0x21dde9=>{telegramError(_0x21dde9);});if(!settings[_0x4c96fc(0xdb)])tgBot[_0x4c96fc(0x11f)](_0xe7333e[_0x4c96fc(0x13b)]['id'],_0x4c96fc(0x1d3))['catch'](_0x383a43=>{telegramError(_0x383a43);});}),tgBot[_0x5046b0(0x167)](_0x5046b0(0xcd));}));}),tgBot[_0x54c682(0xfc)](/\/toggle/,_0x595e4a=>{const _0x1da322=_0x54c682;if(!validateTelegram(_0x595e4a))return;tgBot[_0x1da322(0x167)](_0x1da322(0xcd));const _0x183fb7=getBotsWithMode();if(_0x183fb7[_0x1da322(0x146)]==0x0)tgBot[_0x1da322(0x11f)](_0x595e4a['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x1da322(0xd8)](_0x3b039f=>{telegramError(_0x3b039f);});else{let _0x365765=[],_0x289dad=[];const _0x4b8c5c=0x2;let _0x2eeb6c=0x0;_0x183fb7[_0x1da322(0x156)]((_0x5785b4,_0x327f55)=>{const _0x111d1d=_0x1da322;if(_0x327f55%_0x4b8c5c==0x0)_0x289dad=[];_0x289dad[_0x111d1d(0x206)]({'text':'Bot\x20'+_0x5785b4[_0x111d1d(0x15e)]+'\x20('+_0x5785b4[_0x111d1d(0x1a7)]+')','callback_data':_0x5785b4['botID']}),_0x327f55%_0x4b8c5c==0x0&&(_0x365765[_0x2eeb6c]=_0x289dad,_0x2eeb6c++);}),tgBot[_0x1da322(0x11f)](_0x595e4a[_0x1da322(0x13b)]['id'],_0x1da322(0x166),{'reply_markup':{'inline_keyboard':_0x365765}})[_0x1da322(0xd8)](_0x43649a=>{telegramError(_0x43649a);}),tgBot['on'](_0x1da322(0xcd),async _0x1ad0c5=>{const _0x24f6f8=_0x1da322,_0x572e4e=_0x1ad0c5[_0x24f6f8(0x12f)],_0x5d0d44=_0x1ad0c5[_0x24f6f8(0xb6)];tgBot[_0x24f6f8(0x18c)](_0x1ad0c5['id'])['then'](async()=>{const _0x5231b8=_0x24f6f8,_0x4213d9=_0x183fb7[_0x5231b8(0xcc)](_0x55b190=>_0x55b190[_0x5231b8(0x15e)]==_0x572e4e),_0x41d918=_0x4213d9[_0x5231b8(0x1a7)]==_0x5231b8(0xde)?_0x5231b8(0x20b):'auto';tgBot[_0x5231b8(0x11f)](_0x5d0d44['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x572e4e+_0x5231b8(0x1f8)+_0x41d918+_0x5231b8(0x152))[_0x5231b8(0xd8)](_0x2b6162=>{telegramError(_0x2b6162);}),toggleBotMode(_0x572e4e);}),tgBot[_0x24f6f8(0x167)](_0x24f6f8(0xcd));});}}),tgBot[_0x54c682(0xfc)](/\/names/,_0x25585b=>{const _0x578b50=_0x54c682;if(!validateTelegram(_0x25585b))return;let _0x477e46='';config[_0x578b50(0x156)](_0x2bf1a7=>{const _0x3ee221=_0x578b50;_0x477e46+=_0x3ee221(0x108)+_0x2bf1a7[_0x3ee221(0x15e)]+':\x20'+_0x2bf1a7[_0x3ee221(0xc0)]+'\x0a';}),tgBot['sendMessage'](_0x25585b[_0x578b50(0x13b)]['id'],_0x477e46,{'parse_mode':_0x578b50(0x135)})[_0x578b50(0xd8)](_0x66ea65=>{telegramError(_0x66ea65);});}),tgBot['onText'](/\/disable/,_0x15dd4b=>{const _0x2774f3=_0x54c682;if(!validateTelegram(_0x15dd4b))return;tgBot[_0x2774f3(0x11f)](_0x15dd4b[_0x2774f3(0x13b)]['id'],_0x2774f3(0x125))[_0x2774f3(0xd8)](_0x64fed0=>{telegramError(_0x64fed0);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x54c682(0xfc)](/\/help/,_0xf04c7d=>{const _0x21074d=_0x54c682;if(!validateTelegram(_0xf04c7d))return;tgBot['sendMessage'](_0xf04c7d['chat']['id'],_0x1ae5aa)[_0x21074d(0xd8)](_0x4be3b0=>{telegramError(_0x4be3b0);});}),tgBot['on'](_0x54c682(0x1c7),_0x2c40d1=>{const _0x387e3f=_0x54c682;_0x2c40d1[_0x387e3f(0xf6)]()[_0x387e3f(0x1aa)](_0x387e3f(0x1ef))&&(logging(_0x387e3f(0x1c5)),tgBot[_0x387e3f(0x18b)](),tgBot=null,io['to'](_0x387e3f(0x13e))[_0x387e3f(0x15a)](_0x387e3f(0x1ed),_0x387e3f(0x1c5)));}),process[_0x54c682(0xa2)](_0x54c682(0xac),()=>{const _0x3f2bc6=_0x54c682;if(tgBot)tgBot[_0x3f2bc6(0x18b)]();process[_0x3f2bc6(0x211)](0x1);}),process[_0x54c682(0xa2)](_0x54c682(0x129),()=>{const _0x4db8b0=_0x54c682;if(tgBot)tgBot[_0x4db8b0(0x18b)]();process[_0x4db8b0(0x211)](0x1);});}}function disableTelegram(){const _0x2586f7=_0x57c538;tgBot&&(tgBot[_0x2586f7(0x18b)](),tgBot=null);}function sendTelegram(_0x47a103,_0x4ff6e4){const _0x5e9bd1=_0x57c538;if(settings['telegramEnabled']){if(settings[_0x5e9bd1(0x209)]==_0x5e9bd1(0xe9)||(_0x4ff6e4[_0x5e9bd1(0x1fe)]=='error'||_0x4ff6e4[_0x5e9bd1(0x1fe)]==_0x5e9bd1(0x10f))&&settings[_0x5e9bd1(0x209)]==_0x5e9bd1(0x19e)||_0x4ff6e4[_0x5e9bd1(0x1fe)]==_0x5e9bd1(0xd6)&&settings[_0x5e9bd1(0x209)]==_0x5e9bd1(0x9d)){if(tgBot&&settings[_0x5e9bd1(0xdb)]){if(_0x4ff6e4[_0x5e9bd1(0x216)])tgBot[_0x5e9bd1(0x11f)](settings[_0x5e9bd1(0xdb)],_0x4ff6e4[_0x5e9bd1(0xc0)]+_0x5e9bd1(0x15c)+_0x4ff6e4['event'])[_0x5e9bd1(0xd8)](_0xee3248=>{telegramError(_0xee3248);});else tgBot[_0x5e9bd1(0x11f)](settings['telegramChatId'],_0x5e9bd1(0x108)+_0x47a103+_0x5e9bd1(0x15c)+_0x4ff6e4[_0x5e9bd1(0x123)])[_0x5e9bd1(0xd8)](_0x183ca4=>{telegramError(_0x183ca4);});}}}}async function sendTelegramMsg(_0x453f57,_0x4b9416=_0x57c538(0x135)){const _0x101a05=_0x57c538;return settings[_0x101a05(0x14b)]&&tgBot&&settings[_0x101a05(0xdb)]?(await tgBot[_0x101a05(0x11f)](settings[_0x101a05(0xdb)],_0x453f57,{'parse_mode':_0x4b9416})['catch'](_0x5b8fb8=>{telegramError(_0x5b8fb8);}),!![]):![];}function getDeviceWithIp(_0x2533cb){const _0x3092dd=_0x57c538;return devices[_0x3092dd(0xcc)](_0x2e9519=>_0x2e9519['ip']===_0x2533cb);}function temporaryAccess2FA(_0x3540a6,_0x404e2e){const _0x33ab72=_0x57c538;let _0x16f7c7=new Date(),_0x5b0517=![];if(lastIpApproval){if(_0x16f7c7-lastIpApproval<0x1388)_0x5b0517=!![];}lastIpApproval=new Date();if(_0x5b0517)return;tgBot&&settings[_0x33ab72(0xdb)]&&(tgBot['removeListener'](_0x33ab72(0xcd)),tgBot[_0x33ab72(0x11f)](settings[_0x33ab72(0xdb)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x404e2e)['show']+_0x33ab72(0xb8),{'parse_mode':_0x33ab72(0x135),'reply_markup':{'inline_keyboard':[[{'text':_0x33ab72(0x106),'callback_data':'5'},{'text':_0x33ab72(0x1b1),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x33ab72(0x1de),'callback_data':_0x33ab72(0x1de)}]]}})[_0x33ab72(0xd8)](_0x56af5a=>{telegramError(_0x56af5a);}),tgBot['on'](_0x33ab72(0xcd),async _0x4d046b=>{const _0x122628=_0x33ab72,_0x4aec69=_0x4d046b[_0x122628(0x12f)],_0x453cfa=_0x4d046b['message'];tgBot[_0x122628(0x18c)](_0x4d046b['id'])['then'](async()=>{const _0x4f4c2c=_0x122628;devices[_0x3540a6][_0x4f4c2c(0x1eb)]={'clientip':_0x404e2e,'timestamp':new Date()[_0x4f4c2c(0xca)](),'expiry':_0x4aec69},_0x4aec69!=_0x4f4c2c(0x1de)?(await tgBot[_0x4f4c2c(0x11f)](_0x453cfa['chat']['id'],_0x4f4c2c(0x104)+_0x4aec69+_0x4f4c2c(0xc7),{'parse_mode':'HTML'})['catch'](_0x153352=>{telegramError(_0x153352);}),io['to'](_0x3540a6)['emit'](_0x4f4c2c(0xd1),{'access':{'allow':![],'reason':_0x4f4c2c(0x18f),'token':null}})):(await tgBot['sendMessage'](_0x453cfa['chat']['id'],_0x4f4c2c(0xcb))[_0x4f4c2c(0xd8)](_0x29e1ab=>{telegramError(_0x29e1ab);}),io['to'](_0x3540a6)[_0x4f4c2c(0x15a)]('status',{'access':{'allow':![],'reason':_0x4f4c2c(0x122),'token':null}}));}),tgBot[_0x122628(0x167)](_0x122628(0xcd));}));}function loginAccess2FA(_0x3295f4,_0x456215){const _0x561641=_0x57c538;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x561641(0xcd)),tgBot[_0x561641(0x11f)](settings[_0x561641(0xdb)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x456215)['show']+_0x561641(0xb8),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x561641(0x195),'callback_data':loginExpiry},{'text':_0x561641(0x1de),'callback_data':_0x561641(0x1de)}]]}})['catch'](_0x414b84=>{telegramError(_0x414b84);}),tgBot['on']('callback_query',async _0x4cb384=>{const _0x1d70d9=_0x561641,_0x570a94=_0x4cb384[_0x1d70d9(0x12f)],_0x53f9cb=_0x4cb384['message'];tgBot[_0x1d70d9(0x18c)](_0x4cb384['id'])['then'](async()=>{const _0x195a25=_0x1d70d9;devices[_0x3295f4]['telegram2FaApproval']={'clientip':_0x456215,'timestamp':new Date()[_0x195a25(0xca)](),'expiry':_0x570a94},_0x570a94!=_0x195a25(0x1de)?(await tgBot[_0x195a25(0x11f)](_0x53f9cb['chat']['id'],_0x195a25(0x14f),{'parse_mode':_0x195a25(0x135)})['catch'](_0x319481=>{telegramError(_0x319481);}),io['to'](_0x3295f4)['emit']('status',{'access':{'allow':![],'reason':_0x195a25(0x18f),'token':null}})):(await tgBot[_0x195a25(0x11f)](_0x53f9cb['chat']['id'],_0x195a25(0x13c))[_0x195a25(0xd8)](_0x26ed03=>{telegramError(_0x26ed03);}),io['to'](_0x3295f4)['emit'](_0x195a25(0xd1),{'access':{'allow':![],'reason':_0x195a25(0xfd),'token':null}}));}),tgBot['removeListener'](_0x1d70d9(0xcd));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1585cc=_0x57c538;return dbConfig[_0x1585cc(0xb1)](_0x1585cc(0x17d))[_0x1585cc(0x100)]('botID')[_0x1585cc(0x141)]({'status':_0x1585cc(0x101)})[_0x1585cc(0xa9)]()||[];}function getDisabledBots(){const _0x45a341=_0x57c538;return dbConfig[_0x45a341(0xb1)](_0x45a341(0x17d))[_0x45a341(0x100)](_0x45a341(0x15e))[_0x45a341(0x141)]({'status':_0x45a341(0x119)})[_0x45a341(0xa9)]()||[];}function getBotsWithMode(){const _0x484d15=_0x57c538,_0x32c49e=dbConfig[_0x484d15(0xb1)](_0x484d15(0x17d))[_0x484d15(0x100)]('botID')[_0x484d15(0xa9)]()||[];return _0x32c49e['forEach'](_0x16070c=>{const _0x6f39e=_0x484d15,_0x334ccc=configpath+_0x6f39e(0x1cc)+_0x16070c[_0x6f39e(0x15e)]+_0x6f39e(0x1d6),_0x48701a=fs[_0x6f39e(0x1ce)](_0x334ccc);if(_0x48701a){const _0x68fbb4=fs[_0x6f39e(0x181)](_0x334ccc);try{const _0x113d46=JSON[_0x6f39e(0xed)](_0x68fbb4),_0x511f5e=_0x113d46?_0x113d46[_0x6f39e(0x204)][0x0]['headless']:![];_0x16070c['mode']=_0x511f5e?_0x6f39e(0xde):_0x6f39e(0x20b);}catch(_0x5e8669){_0x16070c['mode']=_0x6f39e(0x20b);}}else _0x16070c['mode']='manual';}),_0x32c49e;}function _0x20e9(_0x3a229e,_0x4cdd4a){const _0x25ed86=_0x5639();return _0x20e9=function(_0x5d0805,_0xe3bba9){_0x5d0805=_0x5d0805-0x95;let _0x563944=_0x25ed86[_0x5d0805];return _0x563944;},_0x20e9(_0x3a229e,_0x4cdd4a);}async function initUser(){const _0x21d26a=_0x57c538;if(!settings[_0x21d26a(0x1da)]){const _0x5e9d2c=uuidRandom();mixpanel[_0x21d26a(0x186)](_0x5e9d2c),updateSetting(_0x21d26a(0x1da),_0x5e9d2c);}}async function initSecure(){const _0x4cf7f8=_0x57c538;let _0x30a4cd=getSecure();if(!_0x30a4cd['hasOwnProperty'](_0x4cf7f8(0xf5))){let _0x4e2d62=await generateKeys();_0x30a4cd['publicKey']=_0x4e2d62[_0x4cf7f8(0x11d)],_0x30a4cd[_0x4cf7f8(0xf2)]=_0x4e2d62[_0x4cf7f8(0xf2)],_0x30a4cd[_0x4cf7f8(0xf5)]=crypto['randomBytes'](0x20)['toString'](_0x4cf7f8(0x196));;storeSecure(_0x30a4cd);}}function getSettings(){const _0x5d9b4e=_0x57c538;return dbSettings[_0x5d9b4e(0xb1)](_0x5d9b4e(0x18e))[_0x5d9b4e(0xa9)]()||{};}function getSecure(){const _0x2c20b1=_0x57c538;return dbSecure[_0x2c20b1(0xb1)](_0x2c20b1(0x1d0))[_0x2c20b1(0xa9)]()||{};}function getBlacklist(){const _0x470700=_0x57c538;return dbSecure[_0x470700(0xb1)]('blacklist')[_0x470700(0xa9)]()||[];}function broadcastToBots(_0x335a5e,_0x41067f){const _0x1c4f75=_0x57c538;config[_0x1c4f75(0x156)](_0x32e182=>{const _0x48e91d=_0x1c4f75;if(_0x32e182[_0x48e91d(0xd1)]=='enabled'&&_0x32e182['live']==_0x48e91d(0x112)){if(pid[_0x32e182['botID']])pid[_0x32e182['botID']][_0x48e91d(0x1f4)]({[_0x335a5e]:_0x41067f});}});}function storeSettings(_0xd9a1fb,_0xd42943=![]){const _0x4c75ed=_0x57c538;_0xd9a1fb={...settings,..._0xd9a1fb};if(_0xd42943&&_0xd9a1fb['bbPassword']!=_0x4c75ed(0x1c6)&&_0xd9a1fb[_0x4c75ed(0xbe)]!=''){const _0x5af26d=crypt['decrypt'](secure[_0x4c75ed(0xf2)],_0xd9a1fb[_0x4c75ed(0xbe)])[_0x4c75ed(0xb6)]['split']('@')[0x0],_0x2f95e8=bcrypt[_0x4c75ed(0x12b)](_0x5af26d,saltRounds);_0xd9a1fb={..._0xd9a1fb,'bbPassword':_0x2f95e8};}if(_0xd42943&&_0xd9a1fb[_0x4c75ed(0x16c)]!='************'&&_0xd9a1fb['telegramToken']!=''){const _0xa5af0d=crypt[_0x4c75ed(0x1c2)](secure[_0x4c75ed(0xf2)],_0xd9a1fb[_0x4c75ed(0x16c)])[_0x4c75ed(0xb6)][_0x4c75ed(0x14c)]('@')[0x0];_0xd9a1fb={..._0xd9a1fb,'telegramToken':_0xa5af0d};}const _0x40b567=_0xd9a1fb['telegramToken']!=_0x4c75ed(0x1c6)&&_0xd9a1fb[_0x4c75ed(0x16c)]!=settings['telegramToken']||_0xd9a1fb[_0x4c75ed(0x1fb)]!=settings['telegramUsername'],_0x5ee391=_0xd9a1fb[_0x4c75ed(0x16c)]==''||_0xd9a1fb['telegramUsername']=='';if(_0x40b567)_0xd9a1fb[_0x4c75ed(0x209)]=_0x4c75ed(0xe9);for(const [_0x1dc30c,_0x4cef45]of Object['entries'](_0xd9a1fb)){if(_0x1dc30c==_0x4c75ed(0x16c)&&_0x4cef45==_0x4c75ed(0x1c6)){_0xd9a1fb[_0x4c75ed(0x16c)]=settings['telegramToken'];continue;};if(_0x1dc30c==_0x4c75ed(0xbe)&&_0x4cef45==_0x4c75ed(0x1c6)){_0xd9a1fb[_0x4c75ed(0xbe)]=settings[_0x4c75ed(0xbe)];continue;};dbSettings[_0x4c75ed(0x187)]('settings.'+_0x1dc30c,_0x4cef45)['write']();}settings=_0xd9a1fb,io['to'](_0x4c75ed(0x13e))[_0x4c75ed(0x15a)](_0x4c75ed(0x18e),cleanSettings()),broadcastToBots(_0x4c75ed(0x136),settings[_0x4c75ed(0x136)]);if(_0x40b567&&!_0x5ee391)initTelegram();if(_0x40b567&&_0x5ee391)disableTelegram();getAllClients()[_0x4c75ed(0x156)](_0x23e203=>{const _0x4b50e6=_0x4c75ed;getSocket(_0x23e203['id'])[_0x4b50e6(0x15a)](_0x4b50e6(0xd1),{'access':{'allow':![],'reason':_0x4b50e6(0x18f),'token':null}});});}function updateSetting(_0x4151c8,_0x16411a){const _0x2e966c=_0x57c538;dbSettings[_0x2e966c(0x187)](_0x2e966c(0x16a)+_0x4151c8,_0x16411a)[_0x2e966c(0x1b7)](),settings=getSettings(),io['to']('botmanager')[_0x2e966c(0x15a)](_0x2e966c(0x18e),cleanSettings());}function storeSecure(_0x32baa4){const _0x1102e5=_0x57c538;dbSecure[_0x1102e5(0xb1)]('secure')[_0x1102e5(0x206)](_0x32baa4)[_0x1102e5(0x1b7)](),secure=_0x32baa4;}function addBlacklist(_0x57a558){const _0x1d2771=_0x57c538;cleanBlacklist();let _0x3165;devices[_0x57a558][_0x1d2771(0x1eb)]?_0x3165=Math[_0x1d2771(0x13d)](devices[_0x57a558][_0x1d2771(0x1eb)][_0x1d2771(0x176)],loginExpiry):_0x3165=loginExpiry,dbSecure[_0x1d2771(0xb1)]('blacklist')[_0x1d2771(0x206)]({'expiry':new Date()[_0x1d2771(0xca)]()+_0x3165*0x3c*0x3e8,'token':devices[_0x57a558][_0x1d2771(0x1a9)][_0x1d2771(0x150)]})['write'](),blacklist=dbSecure[_0x1d2771(0xb1)]('blacklist')[_0x1d2771(0xa9)]();}function cleanBlacklist(){const _0x1dc9e9=_0x57c538;let _0x3dd036=dbSecure['get']('blacklist')[_0x1dc9e9(0xe7)]()[_0x1dc9e9(0xa9)](),_0x20d4f3=new Date()[_0x1dc9e9(0xca)]();_0x3dd036[_0x1dc9e9(0x156)](_0x5bc9f0=>{const _0x434c50=_0x1dc9e9;_0x5bc9f0[_0x434c50(0x176)]<_0x20d4f3&&dbSecure[_0x434c50(0xb1)](_0x434c50(0xb9))['remove']({'expiry':_0x5bc9f0[_0x434c50(0x176)]})[_0x434c50(0x1b7)]();});}function initStates(){const _0x36d330=_0x57c538;let _0x37bccc=getConfiguration();_0x37bccc[_0x36d330(0x156)](_0x52a9c5=>{const _0x49c4bd=_0x36d330;_0x52a9c5[_0x49c4bd(0x1bb)]='stopped';}),storeConfiguration(_0x37bccc);}function onKeys(){const _0x20fbf3=new RSA();return new Promise(_0x4b5133=>{const _0x41b799=_0x20e9;_0x20fbf3[_0x41b799(0xe4)]()[_0x41b799(0x10a)](_0xe2c959=>{_0x4b5133(_0xe2c959);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xd33913=_0x57c538;let _0x4a5a0d=getSettings(),_0x11de4b=![];!_0x4a5a0d[_0xd33913(0xc5)](_0xd33913(0x1cf))&&(_0x4a5a0d[_0xd33913(0x1cf)]=0x0,_0x11de4b=!![]);!_0x4a5a0d[_0xd33913(0xc5)](_0xd33913(0x16d))&&(_0x4a5a0d[_0xd33913(0x16d)]=0x0,_0x11de4b=!![]);!_0x4a5a0d[_0xd33913(0xc5)](_0xd33913(0x1b9))&&(_0x4a5a0d[_0xd33913(0x1b9)]=_0xd33913(0x183),_0x11de4b=!![]);if(_0x11de4b)storeSettings(_0x4a5a0d);}function storeConfiguration(_0x1478e8){const _0x39103f=_0x57c538;dbConfig[_0x39103f(0xb1)]('bots')['remove']()[_0x39103f(0x1b7)](),_0x1478e8['forEach'](_0x18bcfc=>{const _0x2623b0=_0x39103f;delete _0x18bcfc[_0x2623b0(0x1a7)];}),dbConfig[_0x39103f(0xb1)]('bots')[_0x39103f(0x206)](..._0x1478e8)[_0x39103f(0x1b7)](),config=_0x1478e8;}function resetPassword(){const _0x593708=_0x57c538;tgBot&&settings[_0x593708(0xdb)]&&(tgBot[_0x593708(0x167)](_0x593708(0xcd)),tgBot[_0x593708(0x11f)](settings[_0x593708(0xdb)],_0x593708(0xa6),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x593708(0x174),'callback_data':_0x593708(0x174)},{'text':'no','callback_data':'no'}]]}})[_0x593708(0xd8)](_0x91ac99=>{telegramError(_0x91ac99);}),tgBot['on'](_0x593708(0xcd),async _0x12071c=>{const _0x44e9ce=_0x593708,_0x4d09c7=_0x12071c[_0x44e9ce(0x12f)],_0x32e319=_0x12071c[_0x44e9ce(0xb6)];tgBot[_0x44e9ce(0x18c)](_0x12071c['id'])[_0x44e9ce(0x10a)](async()=>{const _0x227ec6=_0x44e9ce;if(_0x4d09c7!='no'){const _0x4d7f6f=0xf,_0x29fcd5=_0x227ec6(0x160),_0x36988e=Array[_0x227ec6(0x1ba)](crypto[_0x227ec6(0x16e)](new Uint32Array(_0x4d7f6f)))[_0x227ec6(0x14e)](_0x1e1089=>_0x29fcd5[_0x1e1089%_0x29fcd5[_0x227ec6(0x146)]])[_0x227ec6(0xfa)](''),_0x4afe8e=bcrypt[_0x227ec6(0x12b)](_0x36988e,saltRounds);storeSettings({'bbPassword':_0x4afe8e}),await tgBot[_0x227ec6(0x11f)](_0x32e319[_0x227ec6(0x13b)]['id'],_0x227ec6(0x185)+_0x36988e,{'parse_mode':_0x227ec6(0x135)})['catch'](_0x2c4cbf=>{telegramError(_0x2c4cbf);});}else await tgBot['sendMessage'](_0x32e319[_0x227ec6(0x13b)]['id'],_0x227ec6(0x15d))['catch'](_0x472fcc=>{telegramError(_0x472fcc);});}),tgBot[_0x44e9ce(0x167)](_0x44e9ce(0xcd));}));}function logging(_0x24c0a8){const _0x552c50=_0x57c538;console[_0x552c50(0x1bc)](getTimeStamp()+_0x552c50(0x1d2)+_0x24c0a8);if(tgBot&&settings[_0x552c50(0xdb)]&&settings['telegramEvents']!='orders')tgBot['sendMessage'](settings['telegramChatId'],_0x552c50(0x1a2)+_0x24c0a8)[_0x552c50(0xd8)](_0x513f72=>{telegramError(_0x513f72);});}function getServerTime(){const _0x157601=_0x57c538,_0x4a488c=new Date();return _0x4a488c[_0x157601(0x1e3)]()+'/'+(_0x4a488c[_0x157601(0x19f)]()+0x1)['toString']()[_0x157601(0x1b2)](0x2,'0')+'/'+_0x4a488c['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4a488c[_0x157601(0x1a0)]()['toString']()[_0x157601(0x1b2)](0x2,'0')+':'+_0x4a488c[_0x157601(0x113)]()[_0x157601(0xf6)]()[_0x157601(0x1b2)](0x2,'0')+':'+_0x4a488c[_0x157601(0x199)]()[_0x157601(0xf6)]()[_0x157601(0x1b2)](0x2,'0');}function getTimeStamp(){const _0x3c1226=_0x57c538,_0xf145c0=shiftedTime();return _0xf145c0[_0x3c1226(0x1e3)]()+'/'+(_0xf145c0[_0x3c1226(0x19f)]()+0x1)[_0x3c1226(0xf6)]()['padStart'](0x2,'0')+'/'+_0xf145c0[_0x3c1226(0x202)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xf145c0[_0x3c1226(0x1a0)]()[_0x3c1226(0xf6)]()[_0x3c1226(0x1b2)](0x2,'0')+':'+_0xf145c0['getMinutes']()[_0x3c1226(0xf6)]()[_0x3c1226(0x1b2)](0x2,'0')+':'+_0xf145c0['getSeconds']()[_0x3c1226(0xf6)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2c2b72=_0x57c538,_0x2738ce=new Date();let _0x28d58e=_0x2738ce;if(settings[_0x2c2b72(0x136)]&&settings[_0x2c2b72(0x136)]!==0x0)_0x28d58e=fns[_0x2c2b72(0x1b6)](_0x2738ce,{'hours':settings[_0x2c2b72(0x136)]});return _0x28d58e;}function startScheduler(){const _0x38cbe1=_0x57c538;let _0x501048=new Date()[_0x38cbe1(0x116)]();_0x501048==0x1&&backupConfigFiles();_0x501048==0x9&&triggerAnalytics();_0x501048%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x43e44f=_0x57c538;fs[_0x43e44f(0xff)](configpath,{'withFileTypes':!![]})['forEach'](_0x46b25c=>{const _0x8d13d8=_0x43e44f;if(!_0x46b25c[_0x8d13d8(0x149)]())fs[_0x8d13d8(0x1df)](configpath+_0x46b25c[_0x8d13d8(0x144)],configbackuppath+_0x46b25c[_0x8d13d8(0x144)]);});}async function getPublicIp(){const _0x3639c7=_0x57c538;try{const _0x55bf7e=await axios[_0x3639c7(0xb1)](_0x3639c7(0xeb));publicip=_0x55bf7e[_0x3639c7(0x12f)]['ip'];}catch(_0x3926ff){}}async function triggerAnalytics(_0x5e2aad=![]){const _0x484e7e=_0x57c538;if(!publicip)await getPublicIp();const _0x10aacf=getBotsWithMode();let _0xa2cf6f=0x0;_0x10aacf['forEach'](_0x3f0e51=>{const _0x42340d=_0x20e9;if(_0x3f0e51[_0x42340d(0xd1)]===_0x42340d(0x101))_0xa2cf6f++;}),mixpanel['track']('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x10aacf[_0x484e7e(0x146)],'numbotsenabled':_0xa2cf6f}),!_0x5e2aad&&analytics['page']({'title':_0x484e7e(0xf7),'href':_0x484e7e(0xfb),'path':'/v'+serverversion});}async function getMessages(){const _0x2b4a10=_0x57c538,_0x2b5202='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x574b6d=new GraphQLClient(_0x2b5202),_0x535308={'authorization':_0x2b4a10(0xc9)},_0x3f6d6f=serverversion['split']('.'),_0x593d8b=_0x3f6d6f[0x0]+'.'+_0x3f6d6f[0x1],_0x41a727=Math[_0x2b4a10(0x151)](settings['lastmsgtelegram'],settings[_0x2b4a10(0x16d)]),_0xe4f18c={'last':parseInt(_0x41a727),'bbm':_0x593d8b},_0x1063d8=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x55d3bc;try{_0x55d3bc=await _0x574b6d[_0x2b4a10(0xea)](_0x1063d8,_0xe4f18c,_0x535308);}catch(_0x337266){}if(_0x55d3bc&&_0x55d3bc[_0x2b4a10(0x1f7)]){let _0x4d3331=settings['lastmsgtelegram'];newMessages=[];for(const _0x1d96a0 of _0x55d3bc[_0x2b4a10(0x1f7)]){newMessages['push'](_0x1d96a0);if(_0x1d96a0[_0x2b4a10(0x18a)])updateSetting(_0x2b4a10(0x1b9),_0x1d96a0[_0x2b4a10(0x18a)]);let _0x31f4fb=_0x1d96a0['bbvNew']?serverversion>=_0x1d96a0[_0x2b4a10(0x18a)]:![];if(!_0x31f4fb&&_0x1d96a0[_0x2b4a10(0x208)]>_0x4d3331){if(_0x1d96a0[_0x2b4a10(0xe3)]===_0x2b4a10(0x17f)||serverversion['startsWith'](_0x1d96a0[_0x2b4a10(0xe3)])){let _0x175dbc=''+_0x1d96a0[_0x2b4a10(0xd9)]+'\x0a\x0a'+_0x1d96a0[_0x2b4a10(0xb6)];const _0x1592d6=await sendTelegramMsg(toTelegramMarkdown(_0x175dbc),'Markdown');if(_0x1592d6)_0x4d3331=_0x1d96a0['number'];}}}updateAvailable=isNewerVersion(settings[_0x2b4a10(0x1b9)],serverversion),updateSetting(_0x2b4a10(0x1cf),_0x4d3331),emitMessages();}}function emitMessages(){const _0x3d9659=_0x57c538,_0x5ad1f8=settings['lastmsgemitted'];let _0x4dfe25=[];newMessages[_0x3d9659(0x156)](_0x5bbfb1=>{const _0x1b81fe=_0x3d9659;_0x5bbfb1[_0x1b81fe(0x208)]>_0x5ad1f8&&_0x4dfe25[_0x1b81fe(0x206)](_0x5bbfb1);}),_0x4dfe25[_0x3d9659(0x146)]>0x0&&getAllClients()[_0x3d9659(0x156)](_0x4f97ce=>{const _0x3a2110=_0x3d9659;getSocket(_0x4f97ce['id'])[_0x3a2110(0x15a)](_0x3a2110(0xb6),_0x4dfe25);});}function confirmMessage(_0x4f2cc6){updateSetting('lastmsgemitted',Number(_0x4f2cc6));}function isNewerVersion(_0x35f336,_0x1ed5e4){const _0x5c57b0=_0x57c538,_0x13e92d=_0x1ed5e4[_0x5c57b0(0x14c)]('.'),_0x17ffe4=_0x35f336[_0x5c57b0(0x14c)]('.');for(var _0x129e8b=0x0;_0x129e8b<_0x17ffe4[_0x5c57b0(0x146)];_0x129e8b++){const _0x3fe596=~~_0x17ffe4[_0x129e8b],_0x42e059=~~_0x13e92d[_0x129e8b];if(_0x3fe596>_0x42e059)return!![];if(_0x3fe596<_0x42e059)return![];}return![];}function toTelegramMarkdown(_0x4cd29c){const _0x42a80f=_0x57c538,_0xefea0d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4f9e88=/\*{2}(.+?)\*{2}/gim;return _0x4cd29c=_0x4cd29c[_0x42a80f(0xc1)](_0xefea0d,_0x42a80f(0x19b))[_0x42a80f(0xc1)](_0x4f9e88,'*$1*'),_0x4cd29c;}function validateCredentials(_0x166712,_0x15ee81){const _0x50c594=_0x57c538;if(_0x166712['username']==settings['bbUsername']&&bcrypt['compareSync'](_0x166712[_0x50c594(0x197)],settings['bbPassword'])){if(settings[_0x50c594(0x13a)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x523298=generateLoginToken(_0x15ee81);return{'allow':!![],'reason':_0x50c594(0x1e1),'token':_0x523298};}}else return{'allow':![],'reason':_0x50c594(0x110),'token':null};}function refreshToken(_0x51fcb0){const _0x11c21a=generateLoginToken(_0x51fcb0);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x11c21a};}function validateAccess(_0x3b8a39,_0xc5da36){const _0x266a3a=_0x57c538;let _0x1a9005=devices[_0xc5da36]['ip'],_0x6ecdc6;const _0x3199d1=_0x43e3cb=>{const _0x4f60ce=_0x20e9;if(settings[_0x4f60ce(0x131)]){if(settings[_0x4f60ce(0x13a)]){if(telegram2FaApproved(_0xc5da36)){const _0x391213=generateLoginToken(_0xc5da36);return{'allow':!![],'reason':_0x4f60ce(0x194),'token':_0x391213};}else return{'allow':![],'reason':_0x4f60ce(0x10d),'token':null};}else return _0x6ecdc6=validToken(_0x43e3cb,_0xc5da36),_0x6ecdc6['hasOwnProperty'](_0x4f60ce(0x10f))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x43e3cb}:{'allow':![],'reason':_0x4f60ce(0x10d),'token':null};}else return{'allow':!![],'reason':_0x4f60ce(0x1ec),'token':null};};if(settings[_0x266a3a(0x11b)]){let _0x7e64fe=[...settings[_0x266a3a(0x1d9)],'::1',_0x266a3a(0x1af),'127.0.0.1'];if(_0x7e64fe['includes'](_0x1a9005))return _0x3199d1(_0x3b8a39);else{_0x6ecdc6=validToken(_0x3b8a39,_0xc5da36);if(_0x6ecdc6[_0x266a3a(0xc5)]('success'))return _0x3199d1(_0x3b8a39);else{if(telegramIpApproved(_0xc5da36)){const _0x4d9869=generateToken(_0xc5da36);return _0x6ecdc6=_0x3199d1(_0x3b8a39),_0x6ecdc6[_0x266a3a(0x97)]?{'allow':!![],'reason':_0x266a3a(0x20a),'token':_0x4d9869}:_0x6ecdc6;}else return settings[_0x266a3a(0x1f3)]?{'allow':![],'reason':_0x266a3a(0x1ff),'token':null}:{'allow':![],'reason':_0x266a3a(0x212),'token':null};}}}else return _0x3199d1(_0x3b8a39);}function timelyDecrypt(_0x100e6a,_0x5f0b8f=!![]){const _0x365bea=_0x57c538;if(_0x100e6a)try{const _0x41a98d=crypt['decrypt'](secure['privateKey'],_0x100e6a)[_0x365bea(0xb6)],_0x5e460b=_0x41a98d['split']('@')[0x0],_0x4828c1=_0x41a98d[_0x365bea(0x14c)]('@')[0x1],_0x32c707=new Date()['getTime']();if(_0x5f0b8f){if(_0x32c707-_0x4828c1<maxSecretAge*0x3e8)return _0x5e460b;else return![];}else return _0x5e460b;}catch(_0x4e8fab){return![];}else return![];}const validToken=(_0x53fb1d,_0x2de9d9)=>{const _0x5a4bda=_0x57c538,_0x4f9c84=devices[_0x2de9d9]['ip'];if(!_0x53fb1d)return{'error':_0x5a4bda(0xe8)};for(let _0x272d52 of blacklist){if(_0x272d52[_0x5a4bda(0x150)]==_0x53fb1d)return{'error':_0x5a4bda(0x172)};}let _0x9d5c8f;try{_0x9d5c8f=jwt[_0x5a4bda(0x165)](_0x53fb1d,secure['secret']+_0x2de9d9);}catch{return{'error':_0x5a4bda(0xb0)};}if(!_0x9d5c8f['hasOwnProperty'](_0x5a4bda(0x9a))&&!_0x9d5c8f[_0x5a4bda(0xc5)](_0x5a4bda(0xe5))||!_0x9d5c8f['hasOwnProperty'](_0x5a4bda(0xda)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x9d5c8f[_0x5a4bda(0xc5)]('username')&&_0x9d5c8f['hasOwnProperty'](_0x5a4bda(0x9a))){const {clientip:_0x22bc80}=_0x9d5c8f;return _0x4f9c84==_0x22bc80?{'success':_0x5a4bda(0x203)}:{'error':_0x5a4bda(0xef)};}else{if(_0x9d5c8f[_0x5a4bda(0xc5)](_0x5a4bda(0xe5))&&_0x9d5c8f[_0x5a4bda(0xc5)](_0x5a4bda(0x9a))){const {username:_0x5914da,clientip:_0x50f7a7}=_0x9d5c8f;return settings[_0x5a4bda(0xe2)]==_0x5914da&&_0x4f9c84==_0x50f7a7?{'success':_0x5a4bda(0x203)}:{'error':_0x5a4bda(0x103)};}}},generateLoginToken=_0x333216=>{const _0x21bcc8=_0x57c538;if(_0x333216){const _0x35a778=devices[_0x333216]['ip'];return jwt[_0x21bcc8(0x105)]({'username':settings[_0x21bcc8(0xe2)],'clientip':_0x35a778},secure[_0x21bcc8(0xf5)]+_0x333216,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1c3fc6=>{const _0x4d0c78=_0x57c538;if(_0x1c3fc6){const _0x322091=devices[_0x1c3fc6]['ip'];return jwt[_0x4d0c78(0x105)]({'clientip':_0x322091},secure[_0x4d0c78(0xf5)]+_0x1c3fc6,{'expiresIn':devices[_0x1c3fc6][_0x4d0c78(0x1eb)][_0x4d0c78(0x176)]*0x3c});}else return![];},telegramIpApproved=_0x2790a1=>{const _0x4ac1f5=_0x57c538;let _0x569e8a=![];return devices[_0x2790a1]['telegramIpApproval']&&devices[_0x2790a1][_0x4ac1f5(0x1eb)][_0x4ac1f5(0x176)]!='reject'&&(_0x569e8a=devices[_0x2790a1][_0x4ac1f5(0x1eb)][_0x4ac1f5(0x9a)]==devices[_0x2790a1]['ip']&&new Date()[_0x4ac1f5(0xca)]()-devices[_0x2790a1][_0x4ac1f5(0x1eb)][_0x4ac1f5(0xab)]<devices[_0x2790a1]['telegramIpApproval'][_0x4ac1f5(0x176)]*0x3c*0x3e8),_0x569e8a;},telegram2FaApproved=_0x50cbe4=>{const _0x43cb76=_0x57c538;let _0x1e69ff=![];return devices[_0x50cbe4][_0x43cb76(0x132)]&&devices[_0x50cbe4][_0x43cb76(0x132)][_0x43cb76(0x176)]!='reject'&&(_0x1e69ff=devices[_0x50cbe4][_0x43cb76(0x132)][_0x43cb76(0x9a)]==devices[_0x50cbe4]['ip']&&new Date()[_0x43cb76(0xca)]()-devices[_0x50cbe4][_0x43cb76(0x132)][_0x43cb76(0xab)]<devices[_0x50cbe4]['telegram2FaApproval'][_0x43cb76(0x176)]*0x3c*0x3e8),_0x1e69ff;},normalizeIP=_0x3f75bb=>{const _0x386547=_0x57c538;let _0x1e7b96=null,_0x5b5a33=null;if(ipaddr[_0x386547(0x9b)](_0x3f75bb)){const _0x96605f=ipaddr['parse'](_0x3f75bb);_0x96605f['kind']()===_0x386547(0x138)?(_0x96605f[_0x386547(0xe6)]()&&(_0x1e7b96=_0x96605f[_0x386547(0x107)]()[_0x386547(0xf6)]()),_0x5b5a33=_0x96605f['toString']()):(_0x1e7b96=_0x96605f[_0x386547(0xf6)](),_0x5b5a33=_0x96605f[_0x386547(0x1bd)]()[_0x386547(0xf6)]());}return{'show':_0x1e7b96?_0x1e7b96:_0x5b5a33,'store':_0x5b5a33};};function sleep(_0x3fb564){return new Promise(_0x586bd1=>setTimeout(_0x586bd1,_0x3fb564));}