const _0x491c76=_0x3c91;function _0x3c91(_0x31726a,_0x3b93ab){const _0xd7de25=_0x595c();return _0x3c91=function(_0x57f2b4,_0x30951b){_0x57f2b4=_0x57f2b4-0x138;let _0x595c04=_0xd7de25[_0x57f2b4];return _0x595c04;},_0x3c91(_0x31726a,_0x3b93ab);}(function(_0xff7b35,_0x5d4a86){const _0x153eb0=_0x3c91,_0x4d49f8=_0xff7b35();while(!![]){try{const _0x2a9908=parseInt(_0x153eb0(0x1b4))/0x1*(parseInt(_0x153eb0(0x1a2))/0x2)+-parseInt(_0x153eb0(0x173))/0x3+-parseInt(_0x153eb0(0x1cc))/0x4*(parseInt(_0x153eb0(0x13f))/0x5)+parseInt(_0x153eb0(0x16d))/0x6*(-parseInt(_0x153eb0(0x266))/0x7)+parseInt(_0x153eb0(0x23f))/0x8+-parseInt(_0x153eb0(0x154))/0x9+parseInt(_0x153eb0(0x15e))/0xa;if(_0x2a9908===_0x5d4a86)break;else _0x4d49f8['push'](_0x4d49f8['shift']());}catch(_0x20c3b6){_0x4d49f8['push'](_0x4d49f8['shift']());}}}(_0x595c,0x4d603));const _0x30951b=function(){let _0x187c72=!![];return function(_0x566347,_0x9797d7){const _0x1c0e08=_0x187c72?function(){if(_0x9797d7){const _0x586baf=_0x9797d7['apply'](_0x566347,arguments);return _0x9797d7=null,_0x586baf;}}:function(){};return _0x187c72=![],_0x1c0e08;};}(),_0x57f2b4=_0x30951b(this,function(){const _0x145b24=_0x3c91;return _0x57f2b4[_0x145b24(0x13e)]()[_0x145b24(0x17f)]('(((.+)+)+)+$')[_0x145b24(0x13e)]()['constructor'](_0x57f2b4)['search'](_0x145b24(0x221));});_0x57f2b4();'use strict';process[_0x491c76(0x140)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x491c76(0x185)),fs=require('fs'),fns=require(_0x491c76(0x25f)),low=require('lowdb'),FileSync=require(_0x491c76(0x1a1)),path=require(_0x491c76(0x2ce)),crypto=require(_0x491c76(0x241)),Crypt=require(_0x491c76(0x164))['Crypt'],RSA=require(_0x491c76(0x164))['RSA'],bcrypt=require(_0x491c76(0x1b6)),jwt=require(_0x491c76(0x2c1)),ipaddr=require('ipaddr.js'),argv=require(_0x491c76(0x2cb))(process[_0x491c76(0x23c)][_0x491c76(0x184)](0x2))[_0x491c76(0x23c)],uuidRandom=require(_0x491c76(0x28c)),TelegramBot=require(_0x491c76(0x21b)),Mixpanel=require(_0x491c76(0x153)),axios=require(_0x491c76(0x1da)),{GraphQLClient,gql}=require(_0x491c76(0x1a9)),util=require('util'),PORT=argv['port']||_0x491c76(0x2cc),pattern=/^[0-9]{2,4}$/;!pattern[_0x491c76(0x29d)](PORT)&&(console[_0x491c76(0x1ec)](_0x491c76(0x1e7)+PORT+_0x491c76(0x207)),process[_0x491c76(0x1c5)](0x1));const HOST=argv[_0x491c76(0x242)]||null,userID=argv[_0x491c76(0x18e)]||'';let bbpath=_0x491c76(0x230),bbpath2='';const botfile=_0x491c76(0x24d),configfile='bb-config.json',settingsfile=_0x491c76(0x1ee),securefile=_0x491c76(0x1a8);let validInstallation=!![];!fs[_0x491c76(0x27e)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x491c76(0x17e)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x491c76(0x282),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x491c76(0x19a),zippath=userID?bbpath+_0x491c76(0x238)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x491c76(0x2c9)](logspath+_0x491c76(0x27f),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x491c76(0x1ad)](configpath);!fs[_0x491c76(0x27e)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x491c76(0x27e)](logspath)&&fs[_0x491c76(0x1ad)](logspath);!fs[_0x491c76(0x27e)](zippath)&&fs[_0x491c76(0x1ad)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x491c76(0x298)]({'bots':[]})[_0x491c76(0x1d1)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x491c76(0x298)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x491c76(0x275)}})[_0x491c76(0x1d1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x491c76(0x298)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x491c76(0x1ba),'rsaStandard':_0x491c76(0x188)});const saltRounds=0xa,mixpanel=Mixpanel[_0x491c76(0x28e)](_0x491c76(0x231),{'host':_0x491c76(0x225)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x491c76(0x19e)]!=''&&settings[_0x491c76(0x139)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x4adff1=>{const _0x2b39a2=_0x491c76;console[_0x2b39a2(0x1ec)](_0x4adff1);},'simple':_0x465773=>{const _0x3d1901=_0x491c76;console[_0x3d1901(0x1ec)](_0x465773),loggerfile['write'](util[_0x3d1901(0x199)](_0x465773)+'\x0a');},'full':async _0xe73825=>{const _0x41def9=_0x491c76,_0x34d8d4=getTimeStamp()+_0x41def9(0x2a3)+_0xe73825;console['log'](_0x34d8d4),loggerfile[_0x41def9(0x1d1)](util['format'](_0x34d8d4)+'\x0a');if(tgBot&&settings[_0x41def9(0x169)]&&settings[_0x41def9(0x1cb)]!=_0x41def9(0x2a9))await tgBot['sendMessage'](settings[_0x41def9(0x169)],_0x41def9(0x26d)+_0xe73825)[_0x41def9(0x1a3)](_0x9bedfb=>{telegramError(_0x9bedfb);});}};process['on'](_0x491c76(0x17b),function(_0x99fc32){const _0x2695f2=_0x491c76;logger[_0x2695f2(0x1af)](_0x99fc32);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x491c76(0x25c))[_0x491c76(0x28b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x491c76(0x1eb)),app=express(),http=require(_0x491c76(0x1c0))[_0x491c76(0x1b7)](app);app[_0x491c76(0x23e)](_0x491c76(0x1e9),async(_0x41e5fe,_0x4f94ec)=>{const _0xe2ffc4=_0x491c76,_0x47a486=_0x41e5fe[_0xe2ffc4(0x257)][_0xe2ffc4(0x23a)],_0x19dded=getClientsWithBotID(_0xe2ffc4(0x208)),_0x5b15c=_0x41e5fe[_0xe2ffc4(0x1df)][_0xe2ffc4(0x261)],_0x2b0043=timelyDecrypt(_0x5b15c,![]),_0x29fc4f=_0x19dded[_0xe2ffc4(0x249)](_0x1d410=>_0x1d410[_0xe2ffc4(0x261)]==_0x2b0043);if(_0x29fc4f){const _0x4963d0=normalizeIP(_0x41e5fe[_0xe2ffc4(0x26f)]['remoteAddress'])[_0xe2ffc4(0x22a)],_0xb713a3=_0x41e5fe[_0xe2ffc4(0x1df)][_0xe2ffc4(0x195)];if(validateAccess(_0xb713a3,_0x2b0043,_0x4963d0)['allow'])await zipFiles(_0x47a486),_0x4f94ec[_0xe2ffc4(0x255)](zippath+(_0x47a486+'.zip'),_0x4e20c9=>{const _0x41dd0c=_0xe2ffc4;_0x4e20c9&&(logger['full'](_0x41dd0c(0x233)+_0x47a486),logger[_0x41dd0c(0x1af)](_0x4e20c9));});else logger[_0xe2ffc4(0x1a5)](_0xe2ffc4(0x290)+_0x47a486+_0xe2ffc4(0x1c8));}else logger[_0xe2ffc4(0x1a5)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x47a486+_0xe2ffc4(0x285));}),app[_0x491c76(0x201)](express[_0x491c76(0x223)](path[_0x491c76(0x2bb)](__dirname,bbpath2,_0x491c76(0x170)))),app[_0x491c76(0x201)](express[_0x491c76(0x223)](path[_0x491c76(0x2bb)](__dirname,bbpath2,_0x491c76(0x1db)))),app['get']('/',function(_0x4954b6,_0x4a762c){const _0x25f344=_0x491c76;_0x4a762c[_0x25f344(0x29b)](path[_0x25f344(0x2bb)](__dirname,bbpath2,'build2',_0x25f344(0x273)));}),app['get'](_0x491c76(0x192),function(_0x2d1d1a,_0xbaf9f3){const _0x39ec8f=_0x491c76;_0xbaf9f3[_0x39ec8f(0x29b)](path[_0x39ec8f(0x2bb)](__dirname,bbpath2,_0x39ec8f(0x1db),_0x39ec8f(0x273)));}),app[_0x491c76(0x23e)](_0x491c76(0x1a6),(_0x25f057,_0xc98d9)=>{const _0x24453a=_0x491c76;_0xc98d9[_0x24453a(0x29b)](path[_0x24453a(0x2bb)](__dirname,bbpath2,'build',_0x24453a(0x273)));}),app[_0x491c76(0x23e)]('/:bot/performance',(_0x35e437,_0x24b43b)=>{const _0x1d5278=_0x491c76;_0x24b43b['sendFile'](path['join'](__dirname,bbpath2,_0x1d5278(0x1db),'index.html'));}),app[_0x491c76(0x23e)](_0x491c76(0x247),(_0x4b0ecd,_0x19d7c6)=>{const _0x2006b0=_0x491c76;_0x19d7c6[_0x2006b0(0x29b)](path[_0x2006b0(0x2bb)](__dirname,bbpath2,_0x2006b0(0x1db),_0x2006b0(0x273)));}),app['get'](_0x491c76(0x1c9),(_0x297acd,_0x332a8b)=>{const _0x1b362f=_0x491c76;_0x332a8b[_0x1b362f(0x29b)](path[_0x1b362f(0x2bb)](__dirname,bbpath2,_0x1b362f(0x1db),_0x1b362f(0x273)));}),app[_0x491c76(0x23e)](_0x491c76(0x286),(_0x5c154b,_0x315820)=>{const _0x594a1f=_0x491c76;_0x315820['sendFile'](path[_0x594a1f(0x2bb)](__dirname,bbpath2,_0x594a1f(0x1db),_0x594a1f(0x273)));}),app[_0x491c76(0x23e)](_0x491c76(0x28f),(_0x1b8673,_0x4b98c6)=>{const _0x21389c=_0x491c76;_0x4b98c6['sendFile'](path[_0x21389c(0x2bb)](__dirname,bbpath2,_0x21389c(0x1db),'index.html'));});if(HOST)http[_0x491c76(0x24f)](PORT,HOST);else http[_0x491c76(0x24f)](PORT);const io=require(_0x491c76(0x15f))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x230142=_0x491c76;logger[_0x230142(0x1af)](''),logger[_0x230142(0x1af)](_0x230142(0x211)),await logger[_0x230142(0x1a5)](_0x230142(0x1f5)+PORT),logger[_0x230142(0x1af)](_0x230142(0x211));if(config[_0x230142(0x16b)]!=0x0)for(const _0xdaafde of config){if(_0xdaafde[_0x230142(0x27a)]==_0x230142(0x17c)||_0xdaafde[_0x230142(0x27a)]==_0x230142(0x26c))await logger[_0x230142(0x1a5)](_0x230142(0x1aa)+_0xdaafde[_0x230142(0x190)]+_0x230142(0x178)+_0xdaafde[_0x230142(0x2ae)]),startBot([_0xdaafde[_0x230142(0x190)],userID],{'cwd':bbpath},function(_0x21abf7){const _0x6938e8=_0x230142;if(_0x21abf7)logger[_0x6938e8(0x1a5)](_0x21abf7);});else(_0xdaafde[_0x230142(0x27a)]=='disabled'||_0xdaafde[_0x230142(0x27a)]==_0x230142(0x19f))&&await logger[_0x230142(0x1a5)](_0x230142(0x22b)+_0xdaafde[_0x230142(0x190)]+_0x230142(0x178)+_0xdaafde['botname']);}else!newBot&&logger[_0x230142(0x1af)](_0x230142(0x18d));if(newBot)addBot();logger[_0x230142(0x1af)](_0x230142(0x211)),logger[_0x230142(0x1af)]('');}function startSocket(){io['on']('connection',_0x1ec098=>{const _0x4f1817=_0x3c91;let _0x4ea004,_0x9bdede,_0x1d7f3b,_0x4f0736,_0x4a5f63;const _0x3427ee=_0x1ec098[_0x4f1817(0x1f4)][_0x4f1817(0x1df)][_0x4f1817(0x263)];_0x9bdede=_0x3427ee['match'](/bot[0-9]{3}/);if(_0x9bdede)_0x1d7f3b=_0x9bdede[0x0][_0x4f1817(0x23b)](/[0-9]{3}/);if(_0x1d7f3b)_0x4ea004=_0x1d7f3b[0x0];else _0x4ea004='botmanager';const _0x3c53a0=_0x1ec098[_0x4f1817(0x1f4)][_0x4f1817(0x2c6)][_0x4f1817(0x1e0)];if(!_0x3c53a0)_0x1ec098[_0x4f1817(0x1fd)](_0x4f1817(0x27a),{'publicKey':secure[_0x4f1817(0x24c)]});else{_0x4f0736=timelyDecrypt(_0x3c53a0,![]);if(!_0x4f0736)_0x1ec098['emit']('status',{'publicKey':secure['publicKey']});else{_0x4a5f63=normalizeIP(_0x1ec098[_0x4f1817(0x274)][_0x4f1817(0x29c)])[_0x4f1817(0x22a)];if(!devices[_0x4f0736])devices[_0x4f0736]={'uuid':_0x4f0736,'access':{'token':null}};devices[_0x4f0736]['ip']=_0x4a5f63;const _0x304803=addClient(_0x1ec098['id'],_0x4f0736,_0x4ea004);setAccess(_0x304803),emitMessages(),_0x1ec098['on'](_0x4f1817(0x292),_0x2372dc=>{const _0xc51317=_0x4f1817,_0x440c4c=timelyDecrypt(_0x2372dc[_0xc51317(0x288)]);if(_0x440c4c){_0x2372dc={'username':_0x2372dc[_0xc51317(0x1bd)],'password':_0x440c4c},devices[_0x4f0736][_0xc51317(0x2a0)]=validateCredentials(_0x2372dc,_0x4f0736);if(devices[_0x4f0736]['access']['allow']==![]&&devices[_0x4f0736][_0xc51317(0x2a0)][_0xc51317(0x278)]==_0xc51317(0x16c))_0x1ec098[_0xc51317(0x1fd)](_0xc51317(0x27a),{'access':devices[_0x4f0736][_0xc51317(0x2a0)]}),loginAccess2FA(_0x4f0736,_0x4a5f63);else{if(devices[_0x4f0736]['access']['allow']==![]&&devices[_0x4f0736]['access'][_0xc51317(0x278)]==_0xc51317(0x13d))_0x1ec098[_0xc51317(0x1fd)](_0xc51317(0x27a),{'access':devices[_0x4f0736][_0xc51317(0x2a0)]});else devices[_0x4f0736]['access'][_0xc51317(0x138)]&&devices[_0x4f0736][_0xc51317(0x2a0)][_0xc51317(0x278)]==_0xc51317(0x264)&&(getClientsWithUuid(_0x4f0736)[_0xc51317(0x142)](_0x597a5a=>{setAccess(_0x597a5a);}),setTokenRefresh(_0x4f0736),setSessionTimeout('login',_0x4f0736));}}else logger[_0xc51317(0x1a5)](_0xc51317(0x1ae));}),_0x1ec098['on'](_0x4f1817(0x1bb),()=>{resetPassword();}),_0x1ec098['on'](_0x4f1817(0x171),_0x59d332=>{removeClient(_0x1ec098['id']);}),_0x4ea004==_0x4f1817(0x208)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xed3280){const _0x47c09d=_0x491c76;if(_0xed3280!=_0x47c09d(0x208)&&config[_0x47c09d(0x18c)]!=''){if(pid[_0xed3280])pid[_0xed3280][_0x47c09d(0x1ea)]({'function':_0x47c09d(0x25e),'args':null});}}function getSocket(_0x36b1c9){const _0x2b21c0=_0x491c76;return io['sockets'][_0x2b21c0(0x251)][_0x2b21c0(0x23e)](_0x36b1c9);}function setAccess(_0x5871b4){const _0x314123=_0x491c76,_0x3d5f0b=getSocket(_0x5871b4['id']),_0x185a1b=_0x5871b4[_0x314123(0x261)],_0x476a9c=_0x5871b4[_0x314123(0x2b7)];devices[_0x185a1b][_0x314123(0x2a0)]=validateAccess(devices[_0x185a1b][_0x314123(0x2a0)][_0x314123(0x215)],_0x185a1b),_0x3d5f0b[_0x314123(0x2bb)](_0x185a1b);if(devices[_0x185a1b][_0x314123(0x2a0)][_0x314123(0x138)]){_0x3d5f0b[_0x314123(0x2bb)](_0x476a9c);if(_0x476a9c=='botmanager')initializeSocketBotManager(_0x3d5f0b);else initializeSocketBot(_0x3d5f0b);initClient(_0x476a9c);}devices[_0x185a1b]['access']['token']&&devices[_0x185a1b][_0x314123(0x2a0)]['reason']==_0x314123(0x141)&&setSessionTimeout(_0x314123(0x16f),_0x185a1b),devices[_0x185a1b][_0x314123(0x2a0)][_0x314123(0x215)]&&devices[_0x185a1b][_0x314123(0x2a0)]['reason']==_0x314123(0x200)&&setSessionTimeout(_0x314123(0x292),_0x185a1b),_0x3d5f0b[_0x314123(0x1fd)](_0x314123(0x27a),{'status':_0x5871b4[_0x314123(0x149)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x185a1b][_0x314123(0x2a0)],'externalip':devices[_0x185a1b]['ip'],'publicKey':secure[_0x314123(0x24c)],'userid':settings[_0x314123(0x1ff)],'validInstallation':validInstallation}),devices[_0x185a1b]['access'][_0x314123(0x138)]==![]&&devices[_0x185a1b][_0x314123(0x2a0)]['reason']==_0x314123(0x1f1)&&temporaryAccess2FA(_0x185a1b,devices[_0x185a1b]['ip']);}function setSessionTimeout(_0x305dde,_0x1c8b78){const _0x2f627b=_0x491c76;let _0x23caea;if(_0x305dde==_0x2f627b(0x292))_0x23caea=loginExpiry*0x3c*0x3e8;else _0x23caea=devices[_0x1c8b78]['telegramIpApproval'][_0x2f627b(0x2ad)]*0x3c*0x3e8-(new Date()[_0x2f627b(0x1d6)]()-devices[_0x1c8b78]['telegramIpApproval'][_0x2f627b(0x2c0)]);if(devices[_0x1c8b78][_0x2f627b(0x2c7)])clearTimeout(devices[_0x1c8b78]['pidExpireLogin']);devices[_0x1c8b78][_0x2f627b(0x2c7)]=setTimeout(()=>{const _0x18d641=_0x2f627b;if(devices[_0x1c8b78]['pidRefreshToken'])clearTimeout(devices[_0x1c8b78][_0x18d641(0x177)]);removeSocketListeners(_0x1c8b78),addBlacklist(_0x1c8b78),devices[_0x1c8b78][_0x18d641(0x227)]=null,devices[_0x1c8b78][_0x18d641(0x1d5)]=null,devices[_0x1c8b78]['access'][_0x18d641(0x215)]=null,devices[_0x1c8b78][_0x18d641(0x2a0)]=validateAccess(devices[_0x1c8b78][_0x18d641(0x2a0)][_0x18d641(0x215)],_0x1c8b78),!(devices[_0x1c8b78]['access'][_0x18d641(0x138)]&&devices[_0x1c8b78][_0x18d641(0x2a0)][_0x18d641(0x278)]=='login\x20not\x20required')&&(_0x305dde==_0x18d641(0x292)?io['to'](_0x1c8b78)[_0x18d641(0x1fd)](_0x18d641(0x27a),{'access':{'allow':![],'reason':_0x18d641(0x20d),'token':null}}):io['to'](_0x1c8b78)[_0x18d641(0x1fd)]('status',{'access':{'allow':![],'reason':_0x18d641(0x189),'token':null}})),devices[_0x1c8b78][_0x18d641(0x2a0)]['token']=null;},_0x23caea);}function setTokenRefresh(_0x375ce6){const _0xaba76f=_0x491c76;if(devices[_0x375ce6][_0xaba76f(0x177)])clearTimeout(devices[_0x375ce6][_0xaba76f(0x177)]);devices[_0x375ce6][_0xaba76f(0x177)]=setTimeout(()=>{const _0x57622c=_0xaba76f;getClientsWithUuid(_0x375ce6)['length']!=0x0?(devices[_0x375ce6][_0x57622c(0x2a0)]=refreshToken(_0x375ce6),io['to'](_0x375ce6)[_0x57622c(0x1fd)](_0x57622c(0x27a),{'status':_0x57622c(0x29a),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x375ce6][_0x57622c(0x2a0)],'externalip':devices[_0x375ce6]['ip'],'publicKey':secure[_0x57622c(0x24c)],'validInstallation':validInstallation}),setTokenRefresh(_0x375ce6)):clearTimeout(devices[_0x375ce6]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4ab245){const _0x25bf86=_0x491c76,_0x2fc607=getClient(_0x4ab245['id'])[_0x25bf86(0x261)];_0x4ab245[_0x25bf86(0x1fd)](_0x25bf86(0x157),config),_0x4ab245['emit'](_0x25bf86(0x1d7),cleanSettings()),_0x4ab245['on'](_0x25bf86(0x1e1),_0x2d151d=>{const _0x642164=_0x25bf86;if(validateAccess(_0x2d151d,_0x2fc607)['allow'])addBot();else logger[_0x642164(0x1a5)](_0x642164(0x143));}),_0x4ab245['on'](_0x25bf86(0x203),(_0x4bb9d3,_0x531605)=>{const _0x44b28a=_0x25bf86;if(validateAccess(_0x531605,_0x2fc607)[_0x44b28a(0x138)])toggleBot(_0x4bb9d3[_0x44b28a(0x190)],_0x4bb9d3[_0x44b28a(0x27a)],_0x4bb9d3[_0x44b28a(0x14b)]);else logger['full'](_0x44b28a(0x268));}),_0x4ab245['on']('toggle-bot-mode',(_0x48f0f6,_0x30979f)=>{const _0x5447b3=_0x25bf86;if(validateAccess(_0x30979f,_0x2fc607)[_0x5447b3(0x138)])toggleBotMode(_0x48f0f6);else logger['full'](_0x5447b3(0x268));}),_0x4ab245['on'](_0x25bf86(0x167),(_0x67cb56,_0x12bd7a)=>{const _0x19c120=_0x25bf86;if(validateAccess(_0x12bd7a,_0x2fc607)['allow'])deleteBot(_0x67cb56);else logger[_0x19c120(0x1a5)](_0x19c120(0x280));}),_0x4ab245['on'](_0x25bf86(0x23d),(_0x192d69,_0x5edd52)=>{const _0x19aa09=_0x25bf86;if(validateAccess(_0x5edd52,_0x2fc607)[_0x19aa09(0x138)])storeSettings(_0x192d69,!![]);else logger[_0x19aa09(0x1a5)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4ab245['on'](_0x25bf86(0x260),_0x1185d3=>{const _0x221d75=_0x25bf86;if(validateAccess(_0x1185d3,_0x2fc607)['allow'])updateBB();else logger[_0x221d75(0x1a5)](_0x221d75(0x1e2));}),_0x4ab245['on'](_0x25bf86(0x21e),_0x51fe33=>{if(validateAccess(_0x51fe33,_0x2fc607)['allow'])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4ab245['on'](_0x25bf86(0x2ca),(_0x5c6223,_0x234da8)=>{const _0x44dec7=_0x25bf86;if(validateAccess(_0x234da8,_0x2fc607)['allow'])confirmMessage(_0x5c6223);else logger[_0x44dec7(0x1a5)](_0x44dec7(0x26b));}),_0x4ab245['on'](_0x25bf86(0x202),_0x407e7b=>{const _0x58cfb1=_0x25bf86;if(validateAccess(_0x407e7b,_0x2fc607)['allow']){if(devices[_0x2fc607][_0x58cfb1(0x177)])clearTimeout(devices[_0x2fc607]['pidRefreshToken']);if(devices[_0x2fc607][_0x58cfb1(0x2c7)])clearTimeout(devices[_0x2fc607][_0x58cfb1(0x2c7)]);removeSocketListeners(getClient(_0x4ab245['id'])[_0x58cfb1(0x261)]),addBlacklist(_0x2fc607),devices[_0x2fc607]['telegramIpApproval']=null,devices[_0x2fc607][_0x58cfb1(0x1d5)]=null,devices[_0x2fc607][_0x58cfb1(0x2a0)][_0x58cfb1(0x215)]=null,io['to'](getClient(_0x4ab245['id'])[_0x58cfb1(0x261)])[_0x58cfb1(0x1fd)](_0x58cfb1(0x27a),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x58cfb1(0x1a5)](_0x58cfb1(0x18b));});}function initializeSocketBot(_0x55038d){const _0x5325b0=_0x491c76,_0x2c16f2=getClient(_0x55038d['id'])['bot'],_0x7b432a=getClient(_0x55038d['id'])['uuid'];_0x55038d['on']('get-logs',(_0x13ef5d,_0x6dcf9f)=>{const _0x567cf5=_0x3c91;if(validateAccess(_0x6dcf9f,_0x7b432a)[_0x567cf5(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2]['send']({'function':'emitHistory','args':_0x13ef5d});}else logger['full'](_0x567cf5(0x2a2));}),_0x55038d['on'](_0x5325b0(0x1fb),(_0x4f9ae0,_0x5d045c)=>{const _0x63b35c=_0x5325b0;if(validateAccess(_0x5d045c,_0x7b432a)[_0x63b35c(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2][_0x63b35c(0x1ea)]({'function':_0x63b35c(0x16e),'args':_0x4f9ae0});}else logger['full'](_0x63b35c(0x15c));}),_0x55038d['on'](_0x5325b0(0x239),(_0x380647,_0x450fbf)=>{const _0x14eb3d=_0x5325b0;if(validateAccess(_0x450fbf,_0x7b432a)[_0x14eb3d(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2][_0x14eb3d(0x1ea)]({'function':_0x14eb3d(0x258),'args':_0x380647});}else logger[_0x14eb3d(0x1a5)](_0x14eb3d(0x236));}),_0x55038d['on']('store-configuration',(_0x20e9cd,_0x8397a4)=>{const _0xaf735a=_0x5325b0;if(validateAccess(_0x8397a4,_0x7b432a)[_0xaf735a(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2][_0xaf735a(0x1ea)]({'function':_0xaf735a(0x2b3),'args':_0x20e9cd});}else logger[_0xaf735a(0x1a5)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x55038d['on'](_0x5325b0(0x15b),(_0x458ca8,_0x5cca85)=>{const _0x576388=_0x5325b0;if(validateAccess(_0x5cca85,_0x7b432a)[_0x576388(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2][_0x576388(0x1ea)]({'function':'storeHeadless','args':_0x458ca8});}else logger[_0x576388(0x1a5)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x55038d['on'](_0x5325b0(0x1c3),_0x5181fc=>{const _0x2f5f8d=_0x5325b0;if(validateAccess(_0x5181fc,_0x7b432a)[_0x2f5f8d(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2]['send']({'function':_0x2f5f8d(0x1de),'args':null});}else logger[_0x2f5f8d(0x1a5)](_0x2f5f8d(0x1a7));}),_0x55038d['on'](_0x5325b0(0x21d),(_0x508228,_0x6223fb)=>{const _0x347a3b=_0x5325b0;if(validateAccess(_0x6223fb,_0x7b432a)[_0x347a3b(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2][_0x347a3b(0x1ea)]({'function':'placeOrder','args':_0x508228});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x55038d['on'](_0x5325b0(0x253),_0x3249b8=>{const _0x24cbb7=_0x5325b0;if(validateAccess(_0x3249b8,_0x7b432a)[_0x24cbb7(0x138)]){if(pid[_0x2c16f2])pid[_0x2c16f2]['send']({'function':_0x24cbb7(0x20f),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x55038d['on']('update-bb',_0x4791a3=>{const _0x3e5cc2=_0x5325b0;if(validateAccess(_0x4791a3,_0x7b432a)[_0x3e5cc2(0x138)])updateBB();else logger[_0x3e5cc2(0x1a5)](_0x3e5cc2(0x1e2));}),_0x55038d['on'](_0x5325b0(0x21e),_0x4f1d23=>{const _0x442eae=_0x5325b0;if(validateAccess(_0x4f1d23,_0x7b432a)[_0x442eae(0x138)])getMessages();else logger[_0x442eae(0x1a5)](_0x442eae(0x216));}),_0x55038d['on'](_0x5325b0(0x2ca),(_0x1480c7,_0x275cdd)=>{const _0x66822b=_0x5325b0;if(validateAccess(_0x275cdd,_0x7b432a)[_0x66822b(0x138)])confirmMessage(_0x1480c7);else logger['full'](_0x66822b(0x26b));}),_0x55038d['on']('logout',_0x311b50=>{const _0x49ae15=_0x5325b0;if(validateAccess(_0x311b50,_0x7b432a)[_0x49ae15(0x138)]){if(devices[_0x7b432a]['pidRefreshToken'])clearTimeout(devices[_0x7b432a][_0x49ae15(0x177)]);if(devices[_0x7b432a][_0x49ae15(0x2c7)])clearTimeout(devices[_0x7b432a][_0x49ae15(0x2c7)]);removeSocketListeners(getClient(_0x55038d['id'])[_0x49ae15(0x261)]),addBlacklist(_0x7b432a),devices[_0x7b432a][_0x49ae15(0x227)]=null,devices[_0x7b432a][_0x49ae15(0x1d5)]=null,devices[_0x7b432a][_0x49ae15(0x2a0)]['token']=null,io['to'](getClient(_0x55038d['id'])['uuid'])[_0x49ae15(0x1fd)](_0x49ae15(0x27a),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x49ae15(0x1a5)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x408e98){getClientsWithUuid(_0x408e98)['forEach'](_0xf9928b=>{getSocket(_0xf9928b['id'])['removeAllListeners']();});}function cleanSettings(){const _0x9592e=_0x491c76;let _0x33c5f8=settings;return settings[_0x9592e(0x19e)]&&settings[_0x9592e(0x19e)]!=''&&(_0x33c5f8={..._0x33c5f8,'telegramToken':_0x9592e(0x289)}),settings[_0x9592e(0x18f)]&&settings[_0x9592e(0x18f)]!=''&&(_0x33c5f8={..._0x33c5f8,'bbPassword':'************'}),_0x33c5f8;}function updateBB(){const _0x3f9cbb=_0x491c76;installingUpdate=!![],config[_0x3f9cbb(0x142)](_0x2bf341=>{const _0x42b986=_0x3f9cbb;restartBot(_0x2bf341[_0x42b986(0x190)]);}),process[_0x3f9cbb(0x1ea)]({'update':!![]},_0x106720=>{});}function startBot(_0x461408,_0x10a7db,_0x445f6c){const _0x2a43bd=_0x491c76;let _0x248f49=![];const _0x280365=_0x461408[0x0];_0x10a7db={..._0x10a7db,'stdio':[_0x2a43bd(0x234),_0x2a43bd(0x234),_0x2a43bd(0x234),_0x2a43bd(0x1be)]},pid[_0x280365]=childProcess[_0x2a43bd(0x1c6)](botfile,_0x461408,_0x10a7db),pid[_0x280365]['on'](_0x2a43bd(0x2b2),_0xbc15c7=>{const _0x3155c7=_0x2a43bd;switch(Object[_0x3155c7(0x20e)](_0xbc15c7)[0x0]){case _0x3155c7(0x2ae):updateBotName(_0x280365,_0xbc15c7[_0x3155c7(0x2ae)]);break;case _0x3155c7(0x219):updateBotManager();break;case _0x3155c7(0x27a):updateStatus(_0x280365,_0xbc15c7['status']);break;case'live':updateLive(_0x280365,_0xbc15c7[_0x3155c7(0x14b)]);break;case _0x3155c7(0x296):updateLive(_0x280365,_0xbc15c7[_0x3155c7(0x296)]),io['to'](_0x280365)[_0x3155c7(0x1fd)]('status',{'access':{'allow':![],'reason':_0x3155c7(0x1d9),'token':null}});break;case'stop':_0xbc15c7[_0x3155c7(0x232)]=='restart'&&restartBot(_0x280365);_0xbc15c7[_0x3155c7(0x232)]==_0x3155c7(0x19d)&&toggleBot(_0x280365,_0x3155c7(0x2b9),_0x3155c7(0x147));break;case _0x3155c7(0x27b):sendTelegram(_0x280365,_0xbc15c7[_0x3155c7(0x27b)]);break;case _0x3155c7(0x229):sendTelegramMsg(_0xbc15c7[_0x3155c7(0x229)]);break;case'function':io['to'](_0x280365)[_0x3155c7(0x1fd)](_0xbc15c7[_0x3155c7(0x2b8)],_0xbc15c7['args']);break;}}),pid[_0x280365]['on'](_0x2a43bd(0x228),function(_0x16b4a8){if(_0x248f49)return;_0x248f49=!![],_0x445f6c(_0x16b4a8);}),pid[_0x280365]['on'](_0x2a43bd(0x1c5),async function(_0x193df7){const _0x287e60=_0x2a43bd;if(installingUpdate)return;if(_0x248f49)return;_0x248f49=!![],_0x445f6c(null);const _0x3dbcad=dbConfig[_0x287e60(0x23e)](_0x287e60(0x157))[_0x287e60(0x249)]({'botID':_0x280365})['value']();_0x3dbcad&&(_0x3dbcad[_0x287e60(0x27a)]==_0x287e60(0x17c)||_0x3dbcad['status']==_0x287e60(0x26c))&&(await sleep(0x3e8),updateLive(_0x280365,_0x287e60(0x147)),logger['full'](_0x287e60(0x16a)+_0x280365),startBot([_0x280365,userID],{'cwd':bbpath},function(_0x3faed2){const _0x5331a6=_0x287e60;if(_0x3faed2)logger[_0x5331a6(0x1a5)](_0x3faed2);}));});}function stopBot(_0x68a9e3){const _0x4a9941=_0x491c76;getClientsWithBotID(_0x68a9e3)[_0x4a9941(0x142)](_0x3247c7=>{getSocket(_0x3247c7['id'])['disconnect'](!![]),removeClient(_0x3247c7['id']);}),pid[_0x68a9e3]&&(pid[_0x68a9e3]['kill'](),pid[_0x68a9e3]=null);}function restartBot(_0x3269b7){const _0x245ccc=_0x491c76;if(pid[_0x3269b7])pid[_0x3269b7][_0x245ccc(0x19d)]();}function addBot(){const _0x17fec4=_0x491c76;let _0x19b2e5;for(let _0x4e652d=0x1;_0x4e652d<0x3e9;_0x4e652d++){_0x19b2e5=_0x4e652d[_0x17fec4(0x13e)]()['padStart'](0x3,'0');let _0x2f5199=config[_0x17fec4(0x249)](_0x5192bd=>_0x5192bd['botID']==_0x19b2e5);if(!_0x2f5199)break;}if(_0x19b2e5==='1000'){logger['full'](_0x17fec4(0x2a6));return;}logger[_0x17fec4(0x1a5)](_0x17fec4(0x265)+_0x19b2e5),dbConfig[_0x17fec4(0x23e)](_0x17fec4(0x157))[_0x17fec4(0x245)]({'botID':_0x19b2e5,'botname':_0x17fec4(0x1f2)+_0x19b2e5,'status':_0x17fec4(0x26c),'live':''})[_0x17fec4(0x1d1)](),startBot([_0x19b2e5,userID],{'cwd':bbpath},function(_0x333072){const _0x82aacc=_0x17fec4;if(_0x333072)logger[_0x82aacc(0x1a5)](_0x333072);}),config=getConfiguration(),io['to'](_0x17fec4(0x208))[_0x17fec4(0x1fd)](_0x17fec4(0x157),config);}function deleteBot(_0x3ee18b){const _0x54c783=_0x491c76;getClientsWithBotID(_0x3ee18b)[_0x54c783(0x142)](_0x1b4654=>{const _0x6adf83=_0x54c783;getSocket(_0x1b4654['id'])[_0x6adf83(0x171)](!![]),removeClient(_0x1b4654['id']);}),dbConfig[_0x54c783(0x23e)](_0x54c783(0x157))[_0x54c783(0x2a5)]({'botID':_0x3ee18b})[_0x54c783(0x1d1)](),logger['full'](_0x54c783(0x161)+_0x3ee18b),stopBot(_0x3ee18b);try{fs[_0x54c783(0x246)](path[_0x54c783(0x2bb)](configpath,_0x54c783(0x197)+_0x3ee18b+'-config.json')),fs[_0x54c783(0x246)](path['join'](configpath,'bot-'+_0x3ee18b+'-events.json')),fs[_0x54c783(0x246)](path[_0x54c783(0x2bb)](configpath,_0x54c783(0x197)+_0x3ee18b+_0x54c783(0x212))),fs[_0x54c783(0x246)](path['join'](configpath,'bot-'+_0x3ee18b+_0x54c783(0x1f0)));}catch(_0x42c34b){if(_0x42c34b)logger[_0x54c783(0x1a5)](_0x54c783(0x24a),_0x42c34b);}config=getConfiguration(),io['to'](_0x54c783(0x208))['emit'](_0x54c783(0x157),config);}function toggleBot(_0xff8f11,_0x374125,_0x38a638){const _0x5c2204=_0x491c76;dbConfig[_0x5c2204(0x23e)]('bots')['find']({'botID':_0xff8f11})['assign']({'status':_0x374125})['assign']({'live':_0x38a638})['write']();if(_0x374125=='enabled'||_0x374125==_0x5c2204(0x26c))logger[_0x5c2204(0x1a5)]('enabled\x20Bot\x20'+_0xff8f11),startBot([_0xff8f11,userID],{'cwd':bbpath},function(_0x36568e){const _0x67e823=_0x5c2204;if(_0x36568e)logger[_0x67e823(0x1a5)](_0x36568e);});else(_0x374125==_0x5c2204(0x2b9)||_0x374125==_0x5c2204(0x19f))&&(logger['full'](_0x5c2204(0x28d)+_0xff8f11),stopBot(_0xff8f11));config=getConfiguration(),io['to'](_0x5c2204(0x208))[_0x5c2204(0x1fd)]('bots',config);}function toggleStatus(_0x14f5aa){const _0x159311=_0x491c76;let _0x448abc=dbConfig[_0x159311(0x23e)](_0x159311(0x157))[_0x159311(0x249)]({'botID':_0x14f5aa})[_0x159311(0x1fe)](),_0x56b4c8;if(_0x448abc['status']===_0x159311(0x17c))_0x56b4c8='disabled';else{if(_0x448abc[_0x159311(0x27a)]===_0x159311(0x26c))_0x56b4c8=_0x159311(0x19f);else{if(_0x448abc[_0x159311(0x27a)]===_0x159311(0x19f))_0x56b4c8=_0x159311(0x26c);else{if(_0x448abc[_0x159311(0x27a)]===_0x159311(0x2b9))_0x56b4c8=_0x159311(0x17c);}}}return _0x56b4c8;}function updateStatus(_0x30c587,_0x50c473){const _0x30bd64=_0x491c76;dbConfig['get'](_0x30bd64(0x157))[_0x30bd64(0x249)]({'botID':_0x30c587})['assign']({'status':_0x50c473})[_0x30bd64(0x1d1)](),config=getConfiguration(),io['to'](_0x30bd64(0x208))['emit'](_0x30bd64(0x157),config);}function updateLive(_0x2d0258,_0x3c4389){const _0x42fd3b=_0x491c76;dbConfig[_0x42fd3b(0x23e)](_0x42fd3b(0x157))['find']({'botID':_0x2d0258})['assign']({'live':_0x3c4389})['write'](),config=getConfiguration(),io['to'](_0x42fd3b(0x208))[_0x42fd3b(0x1fd)]('bots',config);}function updateBotName(_0x1b5a00,_0x572fc3){const _0x4e01ed=_0x491c76;dbConfig[_0x4e01ed(0x23e)](_0x4e01ed(0x157))[_0x4e01ed(0x249)]({'botID':_0x1b5a00})[_0x4e01ed(0x214)]({'botname':_0x572fc3})['write'](),config=getConfiguration(),io['to'](_0x4e01ed(0x208))[_0x4e01ed(0x1fd)](_0x4e01ed(0x157),config);}function updateBotManager(){const _0xd70271=_0x491c76;config=getConfiguration(),io['to'](_0xd70271(0x208))[_0xd70271(0x1fd)]('bots',config);}function toggleBotMode(_0x4243eb){const _0xa46b16=_0x491c76;if(pid[_0x4243eb])pid[_0x4243eb][_0xa46b16(0x1ea)]({'function':'toggleBotMode','args':null});else{const _0x69dba8=configpath+_0xa46b16(0x197)+_0x4243eb+_0xa46b16(0x220),_0x3a2213=fs[_0xa46b16(0x163)](_0x69dba8),_0x17c053=JSON[_0xa46b16(0x209)](_0x3a2213),_0x11c2ee=_0x17c053[_0xa46b16(0x2b7)][0x0][_0xa46b16(0x196)];_0x17c053[_0xa46b16(0x2b7)][0x0]['headless']=!_0x11c2ee;const _0x22d84d=JSON[_0xa46b16(0x174)](_0x17c053,null,0x2);fs[_0xa46b16(0x2b4)](_0x69dba8,_0x22d84d),config=getConfiguration(),io['to']('botmanager')[_0xa46b16(0x1fd)](_0xa46b16(0x157),config);}}function telegramError(_0x347057){const _0x578e1b=_0x491c76;logger[_0x578e1b(0x1af)](getTimeStamp()+_0x578e1b(0x22f));}function validateTelegram(_0x3ff38a){const _0x544a68=_0x491c76;if(_0x3ff38a[_0x544a68(0x24e)]['username']!=settings[_0x544a68(0x139)]&&'@'+_0x3ff38a[_0x544a68(0x24e)][_0x544a68(0x1bd)]!=settings[_0x544a68(0x139)])return tgBot[_0x544a68(0x27c)](_0x3ff38a[_0x544a68(0x205)]['id'],_0x544a68(0x2ab),{'parse_mode':_0x544a68(0x1cd)})[_0x544a68(0x1a3)](_0x27d296=>{telegramError(_0x27d296);}),![];return!![];}async function initTelegram(){const _0xb2258b=_0x491c76;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xb2258b(0x19e)],{'polling':!![]});let _0x12bea1=_0xb2258b(0x25d);_0x12bea1+='\x0a',_0x12bea1+=_0xb2258b(0x1a0),_0x12bea1+=_0xb2258b(0x218),_0x12bea1+=_0xb2258b(0x1c2),_0x12bea1+=_0xb2258b(0x19b),_0x12bea1+=_0xb2258b(0x2c8),_0x12bea1+='/off\x20-\x20stop\x20bot(s)\x0a',_0x12bea1+=_0xb2258b(0x1b2),_0x12bea1+='/names\x20-\x20show\x20bot\x20names\x0a',_0x12bea1+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x12bea1+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x12bea1+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x12bea1+=_0xb2258b(0x1e3);let _0x410621=_0xb2258b(0x160);_0x410621+='\x0a',_0x410621+=_0x12bea1,tgBot[_0xb2258b(0x1bf)](/\/start/,_0x3d6907=>{const _0x41a50a=_0xb2258b;if(!validateTelegram(_0x3d6907))return;if(settings[_0x41a50a(0x169)]!=_0x3d6907[_0x41a50a(0x205)]['id'])updateSetting(_0x41a50a(0x169),_0x3d6907['chat']['id']);updateSetting(_0x41a50a(0x1d0),!![]),tgBot[_0x41a50a(0x27c)](_0x3d6907[_0x41a50a(0x205)]['id'],_0x410621)['catch'](_0xac09d6=>{telegramError(_0xac09d6);});}),tgBot[_0xb2258b(0x1bf)](/\/enable/,_0x6d3b54=>{const _0x7da051=_0xb2258b;if(!validateTelegram(_0x6d3b54))return;if(settings[_0x7da051(0x169)]!=_0x6d3b54['chat']['id'])updateSetting(_0x7da051(0x169),_0x6d3b54[_0x7da051(0x205)]['id']);updateSetting(_0x7da051(0x1d0),!![]),tgBot[_0x7da051(0x27c)](_0x6d3b54[_0x7da051(0x205)]['id'],'Notifications\x20enabled')[_0x7da051(0x1a3)](_0x6de38=>{telegramError(_0x6de38);});}),tgBot[_0xb2258b(0x1bf)](/\/config/,async _0x5eae33=>{const _0x289700=_0xb2258b;if(!validateTelegram(_0x5eae33))return;tgBot[_0x289700(0x29e)](_0x289700(0x237)),tgBot[_0x289700(0x27c)](_0x5eae33[_0x289700(0x205)]['id'],_0x289700(0x272),{'reply_markup':{'inline_keyboard':[[{'text':_0x289700(0x181),'callback_data':_0x289700(0x2a9)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x289700(0x158),'callback_data':_0x289700(0x269)}]]}})['catch'](_0x5f4d04=>{telegramError(_0x5f4d04);}),tgBot['on'](_0x289700(0x237),async _0x53c9ae=>{const _0x7e7983=_0x289700,_0x740978=_0x53c9ae[_0x7e7983(0x1e8)],_0x5d0225=_0x53c9ae[_0x7e7983(0x2b2)];tgBot[_0x7e7983(0x243)](_0x53c9ae['id'])[_0x7e7983(0x17d)](async()=>{const _0x25c563=_0x7e7983;_0x740978==_0x25c563(0x2a9)&&(updateSetting(_0x25c563(0x1cb),'orders'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x5d0225[_0x25c563(0x205)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x25c563(0x1a3)](_0x4e74c2=>{telegramError(_0x4e74c2);}));_0x740978=='alerts'&&(updateSetting(_0x25c563(0x1cb),'alerts'),updateSetting(_0x25c563(0x1d0),!![]),await tgBot[_0x25c563(0x27c)](_0x5d0225[_0x25c563(0x205)]['id'],_0x25c563(0x210))['catch'](_0x2ff52f=>{telegramError(_0x2ff52f);}));_0x740978==_0x25c563(0x269)&&(updateSetting('telegramEvents',_0x25c563(0x269)),updateSetting(_0x25c563(0x1d0),!![]),await tgBot['sendMessage'](_0x5d0225[_0x25c563(0x205)]['id'],_0x25c563(0x1b3))[_0x25c563(0x1a3)](_0x1edf10=>{telegramError(_0x1edf10);}));if(!settings[_0x25c563(0x169)])tgBot[_0x25c563(0x27c)](_0x5d0225[_0x25c563(0x205)]['id'],_0x25c563(0x150))[_0x25c563(0x1a3)](_0x409321=>{telegramError(_0x409321);});}),tgBot[_0x7e7983(0x29e)]('callback_query');});}),tgBot['onText'](/\/status/,_0x47af96=>{const _0x1896de=_0xb2258b;if(!validateTelegram(_0x47af96))return;const _0x1ef563=getBotsWithMode();let _0xc5bc03=_0x1896de(0x1bc);config[_0x1896de(0x142)](_0x21ae73=>{const _0x30c6c9=_0x1896de,_0x57ac86=_0x1ef563['find'](_0xd9fc9e=>_0xd9fc9e['botID']==_0x21ae73[_0x30c6c9(0x190)])['mode'];_0xc5bc03+=_0x30c6c9(0x1f2)+_0x21ae73[_0x30c6c9(0x190)]+':\x20'+_0x21ae73[_0x30c6c9(0x27a)]+_0x30c6c9(0x178)+_0x57ac86+'\x20|\x20'+_0x21ae73[_0x30c6c9(0x14b)]+'\x0a';}),_0xc5bc03+='\x0a',_0xc5bc03+=_0x1896de(0x191),_0xc5bc03+=!settings[_0x1896de(0x1d0)]?_0x1896de(0x24b):_0x1896de(0x2aa),_0xc5bc03+=settings[_0x1896de(0x1d0)]?settings[_0x1896de(0x1cb)]=='all'?_0x1896de(0x1fa):_0x1896de(0x267)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x1896de(0x27c)](_0x47af96['chat']['id'],_0xc5bc03,{'parse_mode':_0x1896de(0x1cd)})['catch'](_0x4cff50=>{telegramError(_0x4cff50);});}),tgBot[_0xb2258b(0x1bf)](/\/restart/,_0x43d296=>{const _0x20e0c6=_0xb2258b;if(!validateTelegram(_0x43d296))return;tgBot[_0x20e0c6(0x29e)](_0x20e0c6(0x237));const _0x18d742=getEnabledBots();if(_0x18d742['length']==0x0)tgBot[_0x20e0c6(0x27c)](_0x43d296[_0x20e0c6(0x205)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x20e0c6(0x1a3)](_0x1411ee=>{telegramError(_0x1411ee);});else{if(_0x18d742[_0x20e0c6(0x16b)]>0x1)_0x18d742[_0x20e0c6(0x245)]({'botID':_0x20e0c6(0x269)});let _0x3183cd=[],_0x62c14a=[];const _0x21ad3c=_0x18d742[_0x20e0c6(0x16b)]%0x4==0x0||_0x18d742[_0x20e0c6(0x16b)]%0x4==0x3||_0x18d742[_0x20e0c6(0x16b)]%0x3==0x1?0x4:0x3;let _0x4345c7=0x0;_0x18d742[_0x20e0c6(0x142)]((_0x34fbdc,_0xafb95b)=>{const _0x3d3915=_0x20e0c6;if(_0xafb95b%_0x21ad3c==0x0)_0x62c14a=[];_0x62c14a['push']({'text':_0x34fbdc[_0x3d3915(0x190)]==_0x3d3915(0x269)?'All\x20bots':_0x3d3915(0x1f2)+_0x34fbdc[_0x3d3915(0x190)],'callback_data':_0x34fbdc[_0x3d3915(0x190)]}),_0xafb95b%_0x21ad3c==0x0&&(_0x3183cd[_0x4345c7]=_0x62c14a,_0x4345c7++);}),tgBot[_0x20e0c6(0x27c)](_0x43d296[_0x20e0c6(0x205)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x3183cd}})[_0x20e0c6(0x1a3)](_0x5e9cb7=>{telegramError(_0x5e9cb7);}),tgBot['on'](_0x20e0c6(0x237),async _0x12b3a9=>{const _0x40f511=_0x20e0c6,_0x2ec9a4=_0x12b3a9[_0x40f511(0x1e8)],_0x1cf095=_0x12b3a9[_0x40f511(0x2b2)];tgBot[_0x40f511(0x243)](_0x12b3a9['id'])[_0x40f511(0x17d)](async()=>{const _0x398a6f=_0x40f511;_0x2ec9a4==_0x398a6f(0x269)?config['forEach'](_0x4bb29a=>{const _0x77a56=_0x398a6f;restartBot(_0x4bb29a[_0x77a56(0x190)]);}):restartBot(_0x2ec9a4);}),tgBot['removeListener']('callback_query');});}}),tgBot[_0xb2258b(0x1bf)](/\/on/,_0x1dea93=>{const _0x5b7511=_0xb2258b;if(!validateTelegram(_0x1dea93))return;tgBot[_0x5b7511(0x29e)](_0x5b7511(0x237));const _0x5bff29=getDisabledBots();if(_0x5bff29[_0x5b7511(0x16b)]==0x0)tgBot['sendMessage'](_0x1dea93[_0x5b7511(0x205)]['id'],_0x5b7511(0x2bc))[_0x5b7511(0x1a3)](_0x4fa0a8=>{telegramError(_0x4fa0a8);});else{if(_0x5bff29[_0x5b7511(0x16b)]>0x1)_0x5bff29[_0x5b7511(0x245)]({'botID':'all'});let _0x3d3ede=[],_0x5c6a59=[];const _0x2f4b78=_0x5bff29['length']%0x4==0x0||_0x5bff29[_0x5b7511(0x16b)]%0x4==0x3||_0x5bff29[_0x5b7511(0x16b)]%0x3==0x1?0x4:0x3;let _0x211663=0x0;_0x5bff29['forEach']((_0xd035f7,_0x4e2467)=>{const _0x1e94c3=_0x5b7511;if(_0x4e2467%_0x2f4b78==0x0)_0x5c6a59=[];_0x5c6a59[_0x1e94c3(0x245)]({'text':_0xd035f7[_0x1e94c3(0x190)]==_0x1e94c3(0x269)?_0x1e94c3(0x21f):'Bot\x20'+_0xd035f7[_0x1e94c3(0x190)],'callback_data':_0xd035f7[_0x1e94c3(0x190)]}),_0x4e2467%_0x2f4b78==0x0&&(_0x3d3ede[_0x211663]=_0x5c6a59,_0x211663++);}),tgBot['sendMessage'](_0x1dea93[_0x5b7511(0x205)]['id'],_0x5b7511(0x2c3),{'reply_markup':{'inline_keyboard':_0x3d3ede}})[_0x5b7511(0x1a3)](_0x1d16f1=>{telegramError(_0x1d16f1);}),tgBot['on'](_0x5b7511(0x237),async _0x2aad92=>{const _0x17889a=_0x5b7511,_0x3a76b7=_0x2aad92[_0x17889a(0x1e8)],_0x5b4621=_0x2aad92['message'];tgBot[_0x17889a(0x243)](_0x2aad92['id'])['then'](async()=>{const _0x30e06f=_0x17889a;_0x3a76b7=='all'?(tgBot[_0x30e06f(0x27c)](_0x5b4621[_0x30e06f(0x205)]['id'],_0x30e06f(0x204))[_0x30e06f(0x1a3)](_0x4086f0=>{telegramError(_0x4086f0);}),_0x5bff29[_0x30e06f(0x142)](_0x2caef6=>{const _0x40e9a4=_0x30e06f;if(_0x2caef6[_0x40e9a4(0x190)]!=_0x40e9a4(0x269))toggleBot(_0x2caef6[_0x40e9a4(0x190)],toggleStatus(_0x2caef6[_0x40e9a4(0x190)]),_0x40e9a4(0x147));})):(tgBot['sendMessage'](_0x5b4621[_0x30e06f(0x205)]['id'],_0x30e06f(0x2ac)+_0x3a76b7)[_0x30e06f(0x1a3)](_0x5c7bbc=>{telegramError(_0x5c7bbc);}),toggleBot(_0x3a76b7,toggleStatus(_0x3a76b7),_0x30e06f(0x147)));}),tgBot[_0x17889a(0x29e)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x295b60=>{const _0x523c22=_0xb2258b;if(!validateTelegram(_0x295b60))return;tgBot[_0x523c22(0x29e)]('callback_query');const _0x4bbd15=getEnabledBots();if(_0x4bbd15[_0x523c22(0x16b)]==0x0)tgBot[_0x523c22(0x27c)](_0x295b60[_0x523c22(0x205)]['id'],_0x523c22(0x19c))[_0x523c22(0x1a3)](_0x1f6f5b=>{telegramError(_0x1f6f5b);});else{if(_0x4bbd15[_0x523c22(0x16b)]>0x1)_0x4bbd15[_0x523c22(0x245)]({'botID':'all'});let _0x194fcd=[],_0xe07596=[];const _0x27a35f=_0x4bbd15[_0x523c22(0x16b)]%0x4==0x0||_0x4bbd15['length']%0x4==0x3||_0x4bbd15[_0x523c22(0x16b)]%0x3==0x1?0x4:0x3;let _0x2ee0c0=0x0;_0x4bbd15['forEach']((_0x4c6558,_0x39d404)=>{const _0x134d9c=_0x523c22;if(_0x39d404%_0x27a35f==0x0)_0xe07596=[];_0xe07596['push']({'text':_0x4c6558[_0x134d9c(0x190)]==_0x134d9c(0x269)?_0x134d9c(0x21f):_0x134d9c(0x1f2)+_0x4c6558['botID'],'callback_data':_0x4c6558[_0x134d9c(0x190)]}),_0x39d404%_0x27a35f==0x0&&(_0x194fcd[_0x2ee0c0]=_0xe07596,_0x2ee0c0++);}),tgBot[_0x523c22(0x27c)](_0x295b60[_0x523c22(0x205)]['id'],_0x523c22(0x217),{'reply_markup':{'inline_keyboard':_0x194fcd}})[_0x523c22(0x1a3)](_0x5bb073=>{telegramError(_0x5bb073);}),tgBot['on'](_0x523c22(0x237),async _0x2d4ce5=>{const _0x3ef6a0=_0x523c22,_0x1ead8a=_0x2d4ce5[_0x3ef6a0(0x1e8)],_0x272aaf=_0x2d4ce5[_0x3ef6a0(0x2b2)];tgBot[_0x3ef6a0(0x243)](_0x2d4ce5['id'])[_0x3ef6a0(0x17d)](async()=>{const _0x221ca2=_0x3ef6a0;_0x1ead8a==_0x221ca2(0x269)?(tgBot[_0x221ca2(0x27c)](_0x272aaf[_0x221ca2(0x205)]['id'],_0x221ca2(0x183))[_0x221ca2(0x1a3)](_0x39159f=>{telegramError(_0x39159f);}),_0x4bbd15['forEach'](_0x141e92=>{const _0x226b25=_0x221ca2;if(_0x141e92['botID']!=_0x226b25(0x269))toggleBot(_0x141e92['botID'],toggleStatus(_0x141e92[_0x226b25(0x190)]),_0x226b25(0x147));})):(tgBot[_0x221ca2(0x27c)](_0x272aaf[_0x221ca2(0x205)]['id'],_0x221ca2(0x279)+_0x1ead8a)[_0x221ca2(0x1a3)](_0x3490c0=>{telegramError(_0x3490c0);}),toggleBot(_0x1ead8a,toggleStatus(_0x1ead8a),_0x221ca2(0x147)));}),tgBot[_0x3ef6a0(0x29e)](_0x3ef6a0(0x237));});}}),tgBot[_0xb2258b(0x1bf)](/\/portfolio/,_0x56c774=>{const _0x37d50e=_0xb2258b;if(!validateTelegram(_0x56c774))return;tgBot[_0x37d50e(0x29e)](_0x37d50e(0x237));const _0x5464a2=getEnabledBots();if(_0x5464a2[_0x37d50e(0x16b)]==0x0)tgBot['sendMessage'](_0x56c774['chat']['id'],_0x37d50e(0x19c))[_0x37d50e(0x1a3)](_0x4178a7=>{telegramError(_0x4178a7);});else{if(_0x5464a2[_0x37d50e(0x16b)]>0x1){let _0x49eda2=[],_0x4ac1d4=[];const _0xf5ec8a=_0x5464a2[_0x37d50e(0x16b)]%0x4==0x0||_0x5464a2['length']%0x4==0x3||_0x5464a2[_0x37d50e(0x16b)]%0x3==0x1?0x4:0x3;let _0x371042=0x0;_0x5464a2[_0x37d50e(0x142)]((_0xa2f98c,_0x32203b)=>{const _0x4c731e=_0x37d50e;if(_0x32203b%_0xf5ec8a==0x0)_0x4ac1d4=[];_0x4ac1d4[_0x4c731e(0x245)]({'text':_0x4c731e(0x1f2)+_0xa2f98c[_0x4c731e(0x190)],'callback_data':_0xa2f98c[_0x4c731e(0x190)]}),_0x32203b%_0xf5ec8a==0x0&&(_0x49eda2[_0x371042]=_0x4ac1d4,_0x371042++);}),tgBot[_0x37d50e(0x27c)](_0x56c774[_0x37d50e(0x205)]['id'],_0x37d50e(0x240),{'reply_markup':{'inline_keyboard':_0x49eda2}})[_0x37d50e(0x1a3)](_0xbd3c30=>{telegramError(_0xbd3c30);}),tgBot['on'](_0x37d50e(0x237),async _0x3530f5=>{const _0x5cbce3=_0x37d50e,_0x44c550=_0x3530f5[_0x5cbce3(0x1e8)],_0x20dd3a=_0x3530f5['message'];tgBot[_0x5cbce3(0x243)](_0x3530f5['id'])[_0x5cbce3(0x17d)](async()=>{const _0x12c555=_0x5cbce3;if(pid[_0x44c550])pid[_0x44c550]['send']({'function':_0x12c555(0x284),'args':null});}),tgBot[_0x5cbce3(0x29e)](_0x5cbce3(0x237));});}else{const _0x20ba21=_0x5464a2[0x0][_0x37d50e(0x190)];if(pid[_0x20ba21])pid[_0x20ba21][_0x37d50e(0x1ea)]({'function':_0x37d50e(0x284),'args':null});}}}),tgBot[_0xb2258b(0x1bf)](/\/update/,async _0x14152f=>{const _0x35a8ad=_0xb2258b;if(!validateTelegram(_0x14152f))return;tgBot[_0x35a8ad(0x29e)](_0x35a8ad(0x237)),await getMessages();if(!updateAvailable)tgBot[_0x35a8ad(0x27c)](_0x14152f['chat']['id'],_0x35a8ad(0x194))[_0x35a8ad(0x1a3)](_0x426e82=>{telegramError(_0x426e82);});else!validInstallation?tgBot[_0x35a8ad(0x27c)](_0x14152f['chat']['id'],_0x35a8ad(0x22e))[_0x35a8ad(0x1a3)](_0x18ef95=>{telegramError(_0x18ef95);}):(tgBot[_0x35a8ad(0x27c)](_0x14152f[_0x35a8ad(0x205)]['id'],_0x35a8ad(0x1a4),{'reply_markup':{'inline_keyboard':[[{'text':_0x35a8ad(0x1ac),'callback_data':_0x35a8ad(0x281)},{'text':'No','callback_data':'no'}]]}})[_0x35a8ad(0x1a3)](_0x381e4a=>{telegramError(_0x381e4a);}),tgBot['on'](_0x35a8ad(0x237),async _0x522aff=>{const _0x2b3bda=_0x35a8ad,_0x149760=_0x522aff['data'],_0x1520a7=_0x522aff[_0x2b3bda(0x2b2)];tgBot[_0x2b3bda(0x243)](_0x522aff['id'])[_0x2b3bda(0x17d)](async()=>{const _0x10c1da=_0x2b3bda;_0x149760==_0x10c1da(0x281)&&(await tgBot[_0x10c1da(0x27c)](_0x1520a7[_0x10c1da(0x205)]['id'],_0x10c1da(0x277))[_0x10c1da(0x1a3)](_0x2705c5=>{telegramError(_0x2705c5);}),updateBB());_0x149760=='no'&&await tgBot[_0x10c1da(0x27c)](_0x1520a7[_0x10c1da(0x205)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x10c1da(0x1a3)](_0x3fae83=>{telegramError(_0x3fae83);});if(!settings['telegramChatId'])tgBot[_0x10c1da(0x27c)](_0x1520a7[_0x10c1da(0x205)]['id'],_0x10c1da(0x150))['catch'](_0x3c17b8=>{telegramError(_0x3c17b8);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0xb2258b(0x1bf)](/\/toggle/,_0x4e6f0d=>{const _0x42289b=_0xb2258b;if(!validateTelegram(_0x4e6f0d))return;tgBot[_0x42289b(0x29e)](_0x42289b(0x237));const _0x67b27f=getBotsWithMode();if(_0x67b27f[_0x42289b(0x16b)]==0x0)tgBot[_0x42289b(0x27c)](_0x4e6f0d[_0x42289b(0x205)]['id'],_0x42289b(0x19c))[_0x42289b(0x1a3)](_0x59503d=>{telegramError(_0x59503d);});else{let _0x2927e2=[],_0x2ba48a=[];const _0x33d75c=0x2;let _0x4b83bb=0x0;_0x67b27f['forEach']((_0x2af8bf,_0x147e0b)=>{const _0x41bf88=_0x42289b;if(_0x147e0b%_0x33d75c==0x0)_0x2ba48a=[];_0x2ba48a[_0x41bf88(0x245)]({'text':_0x41bf88(0x1f2)+_0x2af8bf['botID']+'\x20('+_0x2af8bf[_0x41bf88(0x295)]+')','callback_data':_0x2af8bf[_0x41bf88(0x190)]}),_0x147e0b%_0x33d75c==0x0&&(_0x2927e2[_0x4b83bb]=_0x2ba48a,_0x4b83bb++);}),tgBot[_0x42289b(0x27c)](_0x4e6f0d['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x2927e2}})[_0x42289b(0x1a3)](_0x318315=>{telegramError(_0x318315);}),tgBot['on'](_0x42289b(0x237),async _0x4f4cb7=>{const _0x354834=_0x42289b,_0x1d353c=_0x4f4cb7['data'],_0x5055ec=_0x4f4cb7[_0x354834(0x2b2)];tgBot[_0x354834(0x243)](_0x4f4cb7['id'])[_0x354834(0x17d)](async()=>{const _0x33d2ec=_0x354834,_0x142505=_0x67b27f[_0x33d2ec(0x249)](_0x47016d=>_0x47016d[_0x33d2ec(0x190)]==_0x1d353c),_0x5ad81e=_0x142505[_0x33d2ec(0x295)]==_0x33d2ec(0x1f8)?_0x33d2ec(0x224):_0x33d2ec(0x1f8);tgBot[_0x33d2ec(0x27c)](_0x5055ec[_0x33d2ec(0x205)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x1d353c+_0x33d2ec(0x2bf)+_0x5ad81e+_0x33d2ec(0x262))[_0x33d2ec(0x1a3)](_0x55a5a6=>{telegramError(_0x55a5a6);}),toggleBotMode(_0x1d353c);}),tgBot[_0x354834(0x29e)](_0x354834(0x237));});}}),tgBot[_0xb2258b(0x1bf)](/\/names/,_0x15434b=>{const _0xac004e=_0xb2258b;if(!validateTelegram(_0x15434b))return;let _0x5bd597='';config['forEach'](_0x49980a=>{const _0x5366d3=_0x3c91;_0x5bd597+=_0x5366d3(0x1f2)+_0x49980a[_0x5366d3(0x190)]+':\x20'+_0x49980a['botname']+'\x0a';}),tgBot[_0xac004e(0x27c)](_0x15434b[_0xac004e(0x205)]['id'],_0x5bd597,{'parse_mode':_0xac004e(0x1cd)})[_0xac004e(0x1a3)](_0x2600c4=>{telegramError(_0x2600c4);});}),tgBot[_0xb2258b(0x1bf)](/\/disable/,_0x525c8c=>{const _0x127937=_0xb2258b;if(!validateTelegram(_0x525c8c))return;tgBot[_0x127937(0x27c)](_0x525c8c[_0x127937(0x205)]['id'],_0x127937(0x25a))[_0x127937(0x1a3)](_0x35c789=>{telegramError(_0x35c789);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x546a9c=>{const _0x32ab4e=_0xb2258b;if(!validateTelegram(_0x546a9c))return;tgBot[_0x32ab4e(0x27c)](_0x546a9c['chat']['id'],_0x12bea1)[_0x32ab4e(0x1a3)](_0x5f213e=>{telegramError(_0x5f213e);});}),tgBot['on'](_0xb2258b(0x182),_0x1fcb98=>{const _0x4f41fc=_0xb2258b;_0x1fcb98[_0x4f41fc(0x13e)]()['includes'](_0x4f41fc(0x1b0))&&(logger[_0x4f41fc(0x1a5)](_0x4f41fc(0x276)),tgBot[_0x4f41fc(0x2af)](),tgBot=null,io['to'](_0x4f41fc(0x208))[_0x4f41fc(0x1fd)](_0x4f41fc(0x206),_0x4f41fc(0x276)));}),process['once']('SIGINT',()=>{const _0x44d841=_0xb2258b;if(tgBot)tgBot['stopPolling']();process[_0x44d841(0x1c5)](0x1);}),process[_0xb2258b(0x29f)]('SIGTERM',()=>{const _0x468ee2=_0xb2258b;if(tgBot)tgBot[_0x468ee2(0x2af)]();process['exit'](0x1);});}}function disableTelegram(){const _0x49fc82=_0x491c76;tgBot&&(tgBot[_0x49fc82(0x2af)](),tgBot=null);}function sendTelegram(_0x5bfacd,_0x1dad32){const _0x236700=_0x491c76;if(settings[_0x236700(0x1d0)]){if(settings['telegramEvents']==_0x236700(0x269)||(_0x1dad32[_0x236700(0x23a)]==_0x236700(0x228)||_0x1dad32[_0x236700(0x23a)]==_0x236700(0x1c7))&&settings['telegramEvents']==_0x236700(0x1ce)||_0x1dad32[_0x236700(0x23a)]=='order'&&settings['telegramEvents']==_0x236700(0x2a9)){if(tgBot&&settings[_0x236700(0x169)]){if(_0x1dad32[_0x236700(0x1b5)])tgBot[_0x236700(0x27c)](settings[_0x236700(0x169)],_0x1dad32[_0x236700(0x2ae)]+_0x236700(0x299)+_0x1dad32['event'])[_0x236700(0x1a3)](_0x222f7a=>{telegramError(_0x222f7a);});else tgBot[_0x236700(0x27c)](settings[_0x236700(0x169)],_0x236700(0x1f2)+_0x5bfacd+_0x236700(0x299)+_0x1dad32[_0x236700(0x2ba)])[_0x236700(0x1a3)](_0x30ba16=>{telegramError(_0x30ba16);});}}}}async function sendTelegramMsg(_0x47113b,_0xb5ccf1=_0x491c76(0x1cd)){const _0x5f19b4=_0x491c76;return settings[_0x5f19b4(0x1d0)]&&tgBot&&settings[_0x5f19b4(0x169)]?(await tgBot[_0x5f19b4(0x27c)](settings[_0x5f19b4(0x169)],_0x47113b,{'parse_mode':_0xb5ccf1})[_0x5f19b4(0x1a3)](_0x4de87e=>{telegramError(_0x4de87e);}),!![]):![];}function getDeviceWithIp(_0x2ad6b4){const _0x11fa3a=_0x491c76;return devices[_0x11fa3a(0x249)](_0x42d744=>_0x42d744['ip']===_0x2ad6b4);}function temporaryAccess2FA(_0x5eb4f7,_0x3eb7ec){const _0x5ebefd=_0x491c76;let _0x3eaa2a=new Date(),_0x5e73eb=![];if(lastIpApproval){if(_0x3eaa2a-lastIpApproval<0x1388)_0x5e73eb=!![];}lastIpApproval=new Date();if(_0x5e73eb)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0x5ebefd(0x27c)](settings[_0x5ebefd(0x169)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3eb7ec)[_0x5ebefd(0x1c4)]+_0x5ebefd(0x1d2),{'parse_mode':_0x5ebefd(0x1cd),'reply_markup':{'inline_keyboard':[[{'text':_0x5ebefd(0x2b5),'callback_data':'5'},{'text':_0x5ebefd(0x198),'callback_data':'15'},{'text':_0x5ebefd(0x15a),'callback_data':'30'},{'text':_0x5ebefd(0x27d),'callback_data':_0x5ebefd(0x27d)}]]}})[_0x5ebefd(0x1a3)](_0x45ceda=>{telegramError(_0x45ceda);}),tgBot['on']('callback_query',async _0x2f9d12=>{const _0xbf8753=_0x5ebefd,_0x4f4c71=_0x2f9d12[_0xbf8753(0x1e8)],_0x1aaa37=_0x2f9d12['message'];tgBot['answerCallbackQuery'](_0x2f9d12['id'])[_0xbf8753(0x17d)](async()=>{const _0x3d4c40=_0xbf8753;devices[_0x5eb4f7][_0x3d4c40(0x227)]={'clientip':_0x3eb7ec,'timestamp':new Date()['getTime'](),'expiry':_0x4f4c71},_0x4f4c71!=_0x3d4c40(0x27d)?(await tgBot['sendMessage'](_0x1aaa37[_0x3d4c40(0x205)]['id'],'Access\x20enabled\x20for\x20'+_0x4f4c71+_0x3d4c40(0x1fc),{'parse_mode':_0x3d4c40(0x1cd)})[_0x3d4c40(0x1a3)](_0x49b929=>{telegramError(_0x49b929);}),io['to'](_0x5eb4f7)[_0x3d4c40(0x1fd)](_0x3d4c40(0x27a),{'access':{'allow':![],'reason':_0x3d4c40(0x1d9),'token':null}})):(await tgBot['sendMessage'](_0x1aaa37['chat']['id'],'Temporary\x20access\x20rejected')[_0x3d4c40(0x1a3)](_0x453d8b=>{telegramError(_0x453d8b);}),io['to'](_0x5eb4f7)[_0x3d4c40(0x1fd)](_0x3d4c40(0x27a),{'access':{'allow':![],'reason':_0x3d4c40(0x252),'token':null}}));}),tgBot[_0xbf8753(0x29e)]('callback_query');}));}function loginAccess2FA(_0x4cf684,_0x902fb6){const _0x580efc=_0x491c76;tgBot&&settings[_0x580efc(0x169)]&&(tgBot[_0x580efc(0x29e)](_0x580efc(0x237)),tgBot['sendMessage'](settings[_0x580efc(0x169)],_0x580efc(0x14c)+normalizeIP(_0x902fb6)['show']+'</b>\x20?',{'parse_mode':_0x580efc(0x1cd),'reply_markup':{'inline_keyboard':[[{'text':_0x580efc(0x156),'callback_data':loginExpiry},{'text':_0x580efc(0x27d),'callback_data':'reject'}]]}})[_0x580efc(0x1a3)](_0x4f6912=>{telegramError(_0x4f6912);}),tgBot['on']('callback_query',async _0xf228d1=>{const _0x150a35=_0x580efc,_0x4f0c33=_0xf228d1[_0x150a35(0x1e8)],_0x105ac7=_0xf228d1[_0x150a35(0x2b2)];tgBot[_0x150a35(0x243)](_0xf228d1['id'])[_0x150a35(0x17d)](async()=>{const _0x12da27=_0x150a35;devices[_0x4cf684][_0x12da27(0x1d5)]={'clientip':_0x902fb6,'timestamp':new Date()[_0x12da27(0x1d6)](),'expiry':_0x4f0c33},_0x4f0c33!='reject'?(await tgBot[_0x12da27(0x27c)](_0x105ac7[_0x12da27(0x205)]['id'],_0x12da27(0x14f),{'parse_mode':_0x12da27(0x1cd)})[_0x12da27(0x1a3)](_0x4ef2cf=>{telegramError(_0x4ef2cf);}),io['to'](_0x4cf684)[_0x12da27(0x1fd)](_0x12da27(0x27a),{'access':{'allow':![],'reason':_0x12da27(0x1d9),'token':null}})):(await tgBot['sendMessage'](_0x105ac7[_0x12da27(0x205)]['id'],_0x12da27(0x14d))[_0x12da27(0x1a3)](_0x3eec8d=>{telegramError(_0x3eec8d);}),io['to'](_0x4cf684)['emit'](_0x12da27(0x27a),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x150a35(0x237));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x471433=_0x491c76;return dbConfig[_0x471433(0x23e)](_0x471433(0x157))['sortBy'](_0x471433(0x190))['filter']({'status':'enabled'})[_0x471433(0x1fe)]()||[];}function getDisabledBots(){const _0x330544=_0x491c76;return dbConfig[_0x330544(0x23e)](_0x330544(0x157))['sortBy'](_0x330544(0x190))[_0x330544(0x165)]({'status':_0x330544(0x2b9)})[_0x330544(0x1fe)]()||[];}function getBotAttributes(_0x4695c4){const _0x10363d=_0x491c76;let _0x1b1211={};const _0x5da628=configpath+_0x10363d(0x197)+_0x4695c4+_0x10363d(0x220),_0x1ad194=fs[_0x10363d(0x27e)](_0x5da628);if(_0x1ad194){const _0x2fec29=fs[_0x10363d(0x163)](_0x5da628);try{const _0x1e219f=JSON[_0x10363d(0x209)](_0x2fec29),_0x1a9d8b=_0x1e219f?_0x1e219f[_0x10363d(0x2b7)][0x0][_0x10363d(0x196)]:![];_0x1b1211[_0x10363d(0x295)]=_0x1a9d8b?'auto':_0x10363d(0x224),_0x1b1211[_0x10363d(0x2ae)]=_0x1e219f?_0x1e219f[_0x10363d(0x2b7)][0x0][_0x10363d(0x2ae)]:_0x10363d(0x1f2)+_0x4695c4;}catch(_0x202977){_0x1b1211[_0x10363d(0x295)]=_0x10363d(0x224),_0x1b1211['botname']=_0x10363d(0x1f2)+_0x4695c4;}}else _0x1b1211[_0x10363d(0x295)]=_0x10363d(0x224),_0x1b1211[_0x10363d(0x2ae)]=_0x10363d(0x1f2)+_0x4695c4;return _0x1b1211;}function getBotsWithMode(){const _0x339059=_0x491c76,_0x1fe98d=dbConfig['get'](_0x339059(0x157))['sortBy'](_0x339059(0x190))['value']()||[];return _0x1fe98d[_0x339059(0x142)](_0x552f49=>{const _0x2bc00d=_0x339059;let _0x141efb=getBotAttributes(_0x552f49['botID']);_0x552f49[_0x2bc00d(0x295)]=_0x141efb['mode'];}),_0x1fe98d;}async function initUser(){const _0xb76701=_0x491c76;if(!settings[_0xb76701(0x1ff)]){const _0x327da5=uuidRandom();mixpanel['alias'](_0x327da5),updateSetting(_0xb76701(0x1ff),_0x327da5);}}async function initSecure(){const _0x28dcad=_0x491c76;let _0x33a5af=getSecure();if(!_0x33a5af[_0x28dcad(0x152)](_0x28dcad(0x291))){let _0x2ec89e=await generateKeys();_0x33a5af['publicKey']=_0x2ec89e[_0x28dcad(0x24c)],_0x33a5af[_0x28dcad(0x2b1)]=_0x2ec89e[_0x28dcad(0x2b1)],_0x33a5af[_0x28dcad(0x291)]=crypto[_0x28dcad(0x1ca)](0x20)['toString']('hex');;storeSecure(_0x33a5af);}}function getSettings(){const _0x40b28f=_0x491c76;return dbSettings[_0x40b28f(0x23e)]('settings')[_0x40b28f(0x1fe)]()||{};}function getSecure(){const _0x1f7c4b=_0x491c76;return dbSecure[_0x1f7c4b(0x23e)]('secure')[_0x1f7c4b(0x1fe)]()||{};}function getBlacklist(){const _0x569031=_0x491c76;return dbSecure[_0x569031(0x23e)](_0x569031(0x1e4))['value']()||[];}function broadcastToBots(_0x4e7abb,_0x52a613){const _0x2025e1=_0x491c76;config[_0x2025e1(0x142)](_0xe50697=>{const _0x25acbb=_0x2025e1;if(_0xe50697[_0x25acbb(0x27a)]=='enabled'&&_0xe50697[_0x25acbb(0x14b)]=='running'){if(pid[_0xe50697[_0x25acbb(0x190)]])pid[_0xe50697['botID']]['send']({[_0x4e7abb]:_0x52a613});}});}function storeSettings(_0x12cb8f,_0x501424=![]){const _0x568f9b=_0x491c76;_0x12cb8f={...settings,..._0x12cb8f};if(_0x501424&&_0x12cb8f[_0x568f9b(0x18f)]!=_0x568f9b(0x289)&&_0x12cb8f[_0x568f9b(0x18f)]!=''){const _0x53ed5f=crypt[_0x568f9b(0x1d8)](secure['privateKey'],_0x12cb8f['bbPassword'])[_0x568f9b(0x2b2)]['split']('@')[0x0],_0x1a751e=bcrypt[_0x568f9b(0x13b)](_0x53ed5f,saltRounds);_0x12cb8f={..._0x12cb8f,'bbPassword':_0x1a751e};}if(_0x501424&&_0x12cb8f[_0x568f9b(0x19e)]!=_0x568f9b(0x289)&&_0x12cb8f[_0x568f9b(0x19e)]!=''){const _0x3371ca=crypt['decrypt'](secure['privateKey'],_0x12cb8f[_0x568f9b(0x19e)])['message'][_0x568f9b(0x186)]('@')[0x0];_0x12cb8f={..._0x12cb8f,'telegramToken':_0x3371ca};}const _0x4b69e1=_0x12cb8f[_0x568f9b(0x19e)]!=_0x568f9b(0x289)&&_0x12cb8f['telegramToken']!=settings[_0x568f9b(0x19e)]||_0x12cb8f['telegramUsername']!=settings['telegramUsername'],_0x5ebae4=_0x12cb8f['telegramToken']==''||_0x12cb8f[_0x568f9b(0x139)]=='';if(_0x4b69e1)_0x12cb8f[_0x568f9b(0x1cb)]=_0x568f9b(0x269);for(const [_0x4efa98,_0x58891e]of Object[_0x568f9b(0x226)](_0x12cb8f)){if(_0x4efa98==_0x568f9b(0x19e)&&_0x58891e==_0x568f9b(0x289)){_0x12cb8f[_0x568f9b(0x19e)]=settings[_0x568f9b(0x19e)];continue;};if(_0x4efa98==_0x568f9b(0x18f)&&_0x58891e==_0x568f9b(0x289)){_0x12cb8f['bbPassword']=settings[_0x568f9b(0x18f)];continue;};dbSettings[_0x568f9b(0x2bd)](_0x568f9b(0x13c)+_0x4efa98,_0x58891e)[_0x568f9b(0x1d1)]();}settings=_0x12cb8f,io['to']('botmanager')['emit']('settings',cleanSettings()),broadcastToBots(_0x568f9b(0x1f3),settings['timeshift']);if(_0x4b69e1&&!_0x5ebae4)initTelegram();if(_0x4b69e1&&_0x5ebae4)disableTelegram();getAllClients()[_0x568f9b(0x142)](_0x10cf75=>{const _0x32fd7b=_0x568f9b;getSocket(_0x10cf75['id'])[_0x32fd7b(0x1fd)]('status',{'access':{'allow':![],'reason':_0x32fd7b(0x1d9),'token':null}});});}function updateSetting(_0x490517,_0x4d1f82){const _0x353bf6=_0x491c76;dbSettings[_0x353bf6(0x2bd)](_0x353bf6(0x13c)+_0x490517,_0x4d1f82)[_0x353bf6(0x1d1)](),settings=getSettings(),io['to']('botmanager')[_0x353bf6(0x1fd)]('settings',cleanSettings());}function storeSecure(_0x5c7e96){const _0x1cd871=_0x491c76;dbSecure[_0x1cd871(0x23e)](_0x1cd871(0x2be))[_0x1cd871(0x245)](_0x5c7e96)[_0x1cd871(0x1d1)](),secure=_0x5c7e96;}function addBlacklist(_0x4a4d4e){const _0x5ee043=_0x491c76;cleanBlacklist();let _0x497448;devices[_0x4a4d4e][_0x5ee043(0x227)]?_0x497448=Math[_0x5ee043(0x20b)](devices[_0x4a4d4e]['telegramIpApproval']['expiry'],loginExpiry):_0x497448=loginExpiry,dbSecure[_0x5ee043(0x23e)](_0x5ee043(0x1e4))['push']({'expiry':new Date()[_0x5ee043(0x1d6)]()+_0x497448*0x3c*0x3e8,'token':devices[_0x4a4d4e]['access'][_0x5ee043(0x215)]})['write'](),blacklist=dbSecure[_0x5ee043(0x23e)](_0x5ee043(0x1e4))[_0x5ee043(0x1fe)]();}function cleanBlacklist(){const _0x329b42=_0x491c76;let _0x3b0710=dbSecure['get'](_0x329b42(0x1e4))[_0x329b42(0x1d3)]()[_0x329b42(0x1fe)](),_0x4a5ab6=new Date()[_0x329b42(0x1d6)]();_0x3b0710[_0x329b42(0x142)](_0x423f3c=>{const _0x1a5a4a=_0x329b42;_0x423f3c[_0x1a5a4a(0x2ad)]<_0x4a5ab6&&dbSecure[_0x1a5a4a(0x23e)](_0x1a5a4a(0x1e4))[_0x1a5a4a(0x2a5)]({'expiry':_0x423f3c['expiry']})['write']();});}function initStates(){const _0x1468aa=_0x491c76;let _0xc9c310=getConfiguration();_0xc9c310[_0x1468aa(0x142)](_0x5a76fa=>{const _0x276a5f=_0x1468aa;_0x5a76fa['live']=_0x276a5f(0x147);}),storeConfiguration(_0xc9c310);}function onKeys(){const _0x5a75cb=new RSA();return new Promise(_0x32188b=>{const _0x342fd3=_0x3c91;_0x5a75cb[_0x342fd3(0x256)]()['then'](_0x447b62=>{_0x32188b(_0x447b62);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x440782=_0x491c76;let _0x58aa5e=getSettings(),_0x4227b6=![];!_0x58aa5e[_0x440782(0x152)](_0x440782(0x1e5))&&(_0x58aa5e[_0x440782(0x1e5)]=0x0,_0x4227b6=!![]);!_0x58aa5e[_0x440782(0x152)](_0x440782(0x148))&&(_0x58aa5e[_0x440782(0x148)]=0x0,_0x4227b6=!![]);!_0x58aa5e[_0x440782(0x152)]('latestversion')&&(_0x58aa5e['latestversion']=_0x440782(0x275),_0x4227b6=!![]);if(_0x4227b6)storeSettings(_0x58aa5e);}function storeConfiguration(_0x595d56){const _0x3da757=_0x491c76;dbConfig['get'](_0x3da757(0x157))[_0x3da757(0x2a5)]()[_0x3da757(0x1d1)](),_0x595d56[_0x3da757(0x142)](_0x2a71d4=>{const _0xc525a9=_0x3da757;delete _0x2a71d4[_0xc525a9(0x295)];}),dbConfig[_0x3da757(0x23e)]('bots')[_0x3da757(0x245)](..._0x595d56)[_0x3da757(0x1d1)](),config=_0x595d56;}function resetPassword(){const _0x1b29e9=_0x491c76;tgBot&&settings[_0x1b29e9(0x169)]&&(tgBot[_0x1b29e9(0x29e)](_0x1b29e9(0x237)),tgBot[_0x1b29e9(0x27c)](settings[_0x1b29e9(0x169)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x1b29e9(0x1cd),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x1b29e9(0x281)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2209e3=>{telegramError(_0x2209e3);}),tgBot['on'](_0x1b29e9(0x237),async _0x4fa78d=>{const _0x3cb966=_0x1b29e9,_0x271fe1=_0x4fa78d[_0x3cb966(0x1e8)],_0x1cac72=_0x4fa78d['message'];tgBot[_0x3cb966(0x243)](_0x4fa78d['id'])[_0x3cb966(0x17d)](async()=>{const _0xdef26a=_0x3cb966;if(_0x271fe1!='no'){const _0xd35d3b=0xf,_0x5d028b=_0xdef26a(0x2b6),_0x5170ea=Array[_0xdef26a(0x24e)](crypto[_0xdef26a(0x1dd)](new Uint32Array(_0xd35d3b)))[_0xdef26a(0x2c2)](_0x5c2b66=>_0x5d028b[_0x5c2b66%_0x5d028b[_0xdef26a(0x16b)]])[_0xdef26a(0x2bb)](''),_0x6dfda8=bcrypt[_0xdef26a(0x13b)](_0x5170ea,saltRounds);storeSettings({'bbPassword':_0x6dfda8}),await tgBot[_0xdef26a(0x27c)](_0x1cac72[_0xdef26a(0x205)]['id'],_0xdef26a(0x283)+_0x5170ea,{'parse_mode':_0xdef26a(0x1cd)})[_0xdef26a(0x1a3)](_0x53b455=>{telegramError(_0x53b455);});}else await tgBot[_0xdef26a(0x27c)](_0x1cac72['chat']['id'],_0xdef26a(0x17a))[_0xdef26a(0x1a3)](_0x22f30d=>{telegramError(_0x22f30d);});}),tgBot['removeListener'](_0x3cb966(0x237));}));}function _0x595c(){const _0x219df1=['login','.zip','backup','mode','started','Invalid\x20authentication\x20token\x20(1)','defaults','\x20>\x20','connected','sendFile','remoteAddress','test','removeListener','once','access','copyFileSync','Unauthorized\x20attempt\x20to\x20get\x20logs',':\x20Bot\x20Mgr\x20>\x20','Invalid\x20authentication\x20token\x20(2)','remove','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','readdirSync','track','orders','Notifications\x20enabled\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','expiry','botname','stopPolling','add','privateKey','message','storeConfiguration','writeFileSync','5\x20min','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bot','function','disabled','event','join','All\x20bots\x20running\x20right\x20now','set','secure','\x20to\x20','timestamp','jsonwebtoken','map','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','$1_$2_$3','title','auth','pidExpireLogin','/on\x20-\x20start\x20bot(s)\x0a','createWriteStream','confirm-message','yargs/yargs','3000','apiSecret','path','*$1*','allow','telegramUsername','No\x20authentication\x20token','hashSync','settings.','invalid\x20credentials','toString','5GsAjEU','env','temporary\x20token\x20generated','forEach','Unauthorized\x20attempt\x20to\x20add\x20bot','padStart','kind','bbUsername','stopped','lastmsgemitted','server','getSeconds','live','Allow\x20login\x20from\x20IP\x20address\x20<b>','Login\x20rejected','login\x20token\x20valid','Login\x20accepted','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Server','hasOwnProperty','mixpanel','4256343RLtMSZ','whitelistEnabled','accept','bots','All','getMonth','30\x20min','store-headless','Unauthorized\x20attempt\x20to\x20delete\x20alerts','file','13277710xbvhvH','socket.io','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','deleted\x20Bot\x20','https://api.ipify.org?format=json','readFileSync','hybrid-crypto-js','filter','getUTCHours','delete-bot','127.0.0.1','telegramChatId','restarting\x20Bot\x20','length','2FA\x20login\x20required','12yyMzYH','deleteHistoryAlerts','2FA','build2','disconnect','login\x20required','35664YZsYAK','stringify','number','includes','pidRefreshToken','\x20|\x20','verify','Password\x20reset\x20rejected','uncaughtException','enabled','then','clients','search','***','Orders','polling_error','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','slice','child_process','split','getHours','RSA-OAEP','temporary\x20access\x20timeout','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20log\x20out','apiKey','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','user','bbPassword','botID','<b>Telegram\x20Bot\x20Status:</b>\x0a','/:bot','output-003.log','Your\x20installation\x20is\x20already\x20up\x20to\x20date','tkn','headless','bot-','15\x20min','format','logs/','/restart\x20-\x20restart\x20bot(s)\x0a','No\x20bots\x20running\x20right\x20now','kill','telegramToken','new-disabled','/enable\x20-\x20enable\x20notifications\x0a','lowdb/adapters/FileSync','58SwFCcw','catch','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','full','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','bb-secure.json','graphql-request','starting\x20bot\x20|\x20Bot\x20','node-zip','Yes','mkdirSync','Unauthorized\x20login\x20attempt\x20(timeout)','simple','404\x20Not\x20Found','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','2804EhlRjz','showname','bcryptjs','createServer','DEFLATE','Markdown','sha256','reset-password','<b>Balance\x20Bot\x20Status:</b>\x0a','username','ipc','onText','http','sort','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','get-starting-balances','show','exit','fork','success','\x20(1)','/:bot/history','randomBytes','telegramEvents','1459100eYXpfo','HTML','alerts','startsWith','telegramEnabled','write','</b>\x20?','cloneDeep','output-002.log','telegram2FaApproval','getTime','settings','decrypt','reload','axios','build','::1','randomFillSync','getStartingBalances','headers','encryptedUuid','add-bot','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/help\x20-\x20show\x20available\x20commands\x0a','blacklist','lastmsgtelegram','getDate','Error:\x20Invalid\x20argument\x20','data','/download/:type','send','express','log','getFullYear','bb-settings.json','Token\x20blacklisted','-results.json','2FA\x20required','Bot\x20','timeshift','handshake','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','compareSync','login\x20not\x20required','auto','loginRequired','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','delete-alerts','\x20minutes','emit','value','userid','2FA\x20login\x20token\x20generated','use','logout','update-bot','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','chat','notification',',\x20must\x20be\x20a\x204\x20digit\x20number','botmanager','parse','getMinutes','max','exec','access\x20timeout','keys','cancelLoading','Ok,\x20will\x20send\x20alert\x20notifications\x20only','-----------------------------------------------------------------------------------','-performance.json','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','assign','token','Unauthorized\x20attempt\x20to\x20get\x20messages','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','/disable\x20-\x20disable\x20notifications\x0a','updatebotmanager','output-000.log','node-telegram-bot-api','name','place-order','get-messages','All\x20bots','-config.json','(((.+)+)+)+$','Invalid\x20IP\x20address','static','manual','api-eu.mixpanel.com','entries','telegramIpApproval','error','telegrammsg','store','idling\x20bot\x20\x20\x20|\x20Bot\x20','toIPv4Address','isValid','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','bb/','6b67f3d61ee94b8f5c80b4affef4c4d9','stop','Failed\x20to\x20download\x20','inherit','latestversion','Unauthorized\x20attempt\x20to\x20get\x20portfolio','callback_query','zip/','get-portfolio','type','match','argv','store-settings','get','2074176YPRLJP','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','crypto','host','answerCallbackQuery','replace','push','unlinkSync','/:bot/coins','logs','find','error\x20while\x20deleting\x20config\x20files:\x20','Notifications\x20disabled\x0a','publicKey','bot.js','from','listen','messages','sockets','temporary\x20access\x20rejected','cancel-loading','sign','download','generateKeyPairAsync','params','getPortfolio','isIPv4MappedAddress','Notifications\x20disabled','output-001.log','version.json','You\x20can\x20use\x20the\x20following\x20commands:\x0a','initclient','date-fns','update-bb','uuid','\x20mode','referer','login\x20token\x20generated','starting\x20new\x20bot\x20|\x20Bot\x20','1756433PCIyuU','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','all','isDirectory','Unauthorized\x20attempt\x20to\x20confirm\x20message','new','Bot\x20Mgr\x20>\x20','request','socket','User\x20has\x20been\x20validated','clientip','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','index.html','conn','0.0.0','Invalid\x20Telegram\x20token','Starting\x20Balance\x20Bot\x20update','reason','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','status','telegram','sendMessage','reject','existsSync','/output-000.log','Unauthorized\x20attempt\x20to\x20delete\x20bot','yes','config/','Password\x20has\x20been\x20reset\x20to:\x20','sendPortfolioTelegram','\x20(2)','/:bot/configuration','bbvNew','password','************','binary','version','uuid-random','disabled\x20Bot\x20','init','/:bot/support','Unauthorized\x20attempt\x20to\x20download\x20','secret'];_0x595c=function(){return _0x219df1;};return _0x595c();}function getServerTime(){const _0x33d49a=_0x491c76,_0xbaf963=new Date();return _0xbaf963['getFullYear']()+'/'+(_0xbaf963[_0x33d49a(0x159)]()+0x1)[_0x33d49a(0x13e)]()['padStart'](0x2,'0')+'/'+_0xbaf963[_0x33d49a(0x1e6)]()[_0x33d49a(0x13e)]()['padStart'](0x2,'0')+'\x20'+_0xbaf963[_0x33d49a(0x187)]()['toString']()[_0x33d49a(0x144)](0x2,'0')+':'+_0xbaf963[_0x33d49a(0x20a)]()[_0x33d49a(0x13e)]()[_0x33d49a(0x144)](0x2,'0')+':'+_0xbaf963[_0x33d49a(0x14a)]()['toString']()[_0x33d49a(0x144)](0x2,'0');}function getTimeStamp(){const _0x372b52=_0x491c76,_0x1c35f9=shiftedTime();return _0x1c35f9[_0x372b52(0x1ed)]()+'/'+(_0x1c35f9[_0x372b52(0x159)]()+0x1)[_0x372b52(0x13e)]()[_0x372b52(0x144)](0x2,'0')+'/'+_0x1c35f9[_0x372b52(0x1e6)]()[_0x372b52(0x13e)]()[_0x372b52(0x144)](0x2,'0')+'\x20'+_0x1c35f9['getHours']()[_0x372b52(0x13e)]()[_0x372b52(0x144)](0x2,'0')+':'+_0x1c35f9[_0x372b52(0x20a)]()[_0x372b52(0x13e)]()['padStart'](0x2,'0')+':'+_0x1c35f9['getSeconds']()['toString']()[_0x372b52(0x144)](0x2,'0');}function shiftedTime(){const _0x196c4e=_0x491c76,_0x33407a=new Date();let _0x3a897b=_0x33407a;if(settings[_0x196c4e(0x1f3)]&&settings['timeshift']!==0x0)_0x3a897b=fns[_0x196c4e(0x2b0)](_0x33407a,{'hours':settings[_0x196c4e(0x1f3)]});return _0x3a897b;}function startScheduler(){const _0x288e8e=_0x491c76,_0x29a4ef=new Date()[_0x288e8e(0x166)](),_0x40be29=new Date()[_0x288e8e(0x187)]()+settings[_0x288e8e(0x1f3)];_0x40be29==0x4&&backupConfigFiles();_0x40be29==0x0&&rotateLogFiles();_0x29a4ef%0x6==0x0&&triggerAnalytics();_0x29a4ef%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x262ef7=_0x491c76;fs[_0x262ef7(0x2a7)](configpath,{'withFileTypes':!![]})[_0x262ef7(0x142)](_0x533cbd=>{const _0x10d0c1=_0x262ef7;if(!_0x533cbd['isDirectory']())fs[_0x10d0c1(0x2a1)](configpath+_0x533cbd[_0x10d0c1(0x21c)],configbackuppath+_0x533cbd[_0x10d0c1(0x21c)]);});}function rotateLogFiles(){const _0x312004=_0x491c76;let _0x50dd4e=fs[_0x312004(0x2a7)](logspath,{'withFileTypes':!![]});_0x50dd4e[_0x312004(0x1c1)]((_0xe9c58d,_0x4dbe36)=>_0xe9c58d[_0x312004(0x21c)]<_0x4dbe36[_0x312004(0x21c)]?0x1:_0x4dbe36[_0x312004(0x21c)]<_0xe9c58d[_0x312004(0x21c)]?-0x1:0x0),_0x50dd4e[_0x312004(0x142)](_0x413616=>{const _0x2d7a13=_0x312004;if(_0x413616[_0x2d7a13(0x21c)]=='output-002.log')fs['copyFileSync'](logspath+_0x413616[_0x2d7a13(0x21c)],logspath+_0x2d7a13(0x193));if(_0x413616[_0x2d7a13(0x21c)]==_0x2d7a13(0x25b))fs['copyFileSync'](logspath+_0x413616[_0x2d7a13(0x21c)],logspath+_0x2d7a13(0x1d4));_0x413616[_0x2d7a13(0x21c)]==_0x2d7a13(0x21a)&&(fs[_0x2d7a13(0x2a1)](logspath+_0x413616['name'],logspath+_0x2d7a13(0x25b)),fs[_0x2d7a13(0x2b4)](logspath+_0x413616[_0x2d7a13(0x21c)],''));});}async function zipFiles(_0x119098){const _0x452f16=_0x491c76;let _0xab1ef5;if(_0x119098==_0x452f16(0x248))_0xab1ef5=logspath;if(_0x119098==_0x452f16(0x294))_0xab1ef5=configpath;let _0x1235fa=fs[_0x452f16(0x2a7)](_0xab1ef5,{'withFileTypes':!![]});const _0x1a2797=new require(_0x452f16(0x1ab))();_0x1235fa[_0x452f16(0x142)](_0x2f1897=>{const _0x38ccd1=_0x452f16;if(!_0x2f1897[_0x38ccd1(0x26a)]()){let _0x2b7e65=fs[_0x38ccd1(0x163)](_0xab1ef5+_0x2f1897[_0x38ccd1(0x21c)]);const _0x31e0ef=/^bot-[0-9]{3}-config.json$/,_0x1a6bb3=_0x31e0ef['test'](_0x2f1897[_0x38ccd1(0x21c)]);if(_0x1a6bb3){const _0x267d8e=JSON[_0x38ccd1(0x209)](_0x2b7e65);_0x267d8e[_0x38ccd1(0x2b7)][0x0][_0x38ccd1(0x18c)]=_0x38ccd1(0x180),_0x267d8e[_0x38ccd1(0x2b7)][0x0][_0x38ccd1(0x2cd)]=_0x38ccd1(0x180),_0x2b7e65=JSON['stringify'](_0x267d8e,null,0x2);}if(_0x2f1897[_0x38ccd1(0x21c)]==_0x38ccd1(0x1ee)){const _0x2103d5=JSON[_0x38ccd1(0x209)](_0x2b7e65);if(_0x2103d5[_0x38ccd1(0x1d7)]['loginRequired'])_0x2103d5[_0x38ccd1(0x1d7)][_0x38ccd1(0x1f9)]=![];if(_0x2103d5[_0x38ccd1(0x1d7)][_0x38ccd1(0x18f)])_0x2103d5[_0x38ccd1(0x1d7)]['bbPassword']=_0x38ccd1(0x180);if(_0x2103d5[_0x38ccd1(0x1d7)][_0x38ccd1(0x19e)])_0x2103d5['settings'][_0x38ccd1(0x19e)]='';if(_0x2103d5[_0x38ccd1(0x1d7)][_0x38ccd1(0x169)])_0x2103d5[_0x38ccd1(0x1d7)][_0x38ccd1(0x169)]='';_0x2b7e65=JSON[_0x38ccd1(0x174)](_0x2103d5,null,0x2);}if(_0x2f1897[_0x38ccd1(0x21c)]!=_0x38ccd1(0x1a8))_0x1a2797[_0x38ccd1(0x15d)](_0x2f1897[_0x38ccd1(0x21c)],_0x2b7e65);}});const _0x56c411=_0x1a2797['generate']({'base64':![],'compression':_0x452f16(0x1b8)});fs[_0x452f16(0x2b4)](zippath+(_0x119098+_0x452f16(0x293)),_0x56c411,_0x452f16(0x28a));}async function getPublicIp(){const _0x379f52=_0x491c76;try{const _0x9c0faa=await axios['get'](_0x379f52(0x162));publicip=_0x9c0faa[_0x379f52(0x1e8)]['ip'];}catch(_0x20d752){}}async function triggerAnalytics(){const _0x338e09=_0x491c76;if(!publicip)await getPublicIp();const _0x45e218=getBotsWithMode();let _0x273dd1=0x0;_0x45e218[_0x338e09(0x142)](_0x339be1=>{const _0xe9f838=_0x338e09;if(_0x339be1[_0xe9f838(0x27a)]===_0xe9f838(0x17c))_0x273dd1++;}),mixpanel[_0x338e09(0x2a8)](_0x338e09(0x151),{'distinct_id':settings[_0x338e09(0x1ff)],'ip':publicip,'version':serverversion,'numbots':_0x45e218[_0x338e09(0x16b)],'numbotsenabled':_0x273dd1});}async function getMessages(){const _0x4b40ca=_0x491c76,_0x27dc4c='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5abdd0=new GraphQLClient(_0x27dc4c),_0x2dc033={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x183889=serverversion[_0x4b40ca(0x186)]('.'),_0x505a86=_0x183889[0x0]+'.'+_0x183889[0x1],_0x44519e=Math['min'](settings['lastmsgtelegram'],settings[_0x4b40ca(0x148)]),_0x2c5cc2={'last':parseInt(_0x44519e),'bbm':_0x505a86},_0x95062=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x37211c;try{_0x37211c=await _0x5abdd0[_0x4b40ca(0x26e)](_0x95062,_0x2c5cc2,_0x2dc033);}catch(_0x5e7dc9){}if(_0x37211c&&_0x37211c[_0x4b40ca(0x250)]){let _0x52a6eb=settings[_0x4b40ca(0x1e5)];newMessages=[];for(const _0x367f0e of _0x37211c['messages']){newMessages[_0x4b40ca(0x245)](_0x367f0e);if(_0x367f0e['bbvNew'])updateSetting(_0x4b40ca(0x235),_0x367f0e['bbvNew']);let _0x468c73=_0x367f0e[_0x4b40ca(0x287)]?serverversion>=_0x367f0e[_0x4b40ca(0x287)]:![];if(!_0x468c73&&_0x367f0e[_0x4b40ca(0x175)]>_0x52a6eb){if(_0x367f0e['bbvReceive']==='any'||serverversion[_0x4b40ca(0x1cf)](_0x367f0e['bbvReceive'])){let _0x408664=''+_0x367f0e[_0x4b40ca(0x2c5)]+'\x0a\x0a'+_0x367f0e[_0x4b40ca(0x2b2)];const _0x406f68=await sendTelegramMsg(toTelegramMarkdown(_0x408664),_0x4b40ca(0x1b9));if(_0x406f68)_0x52a6eb=_0x367f0e[_0x4b40ca(0x175)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x4b40ca(0x1e5),_0x52a6eb),emitMessages();}}function emitMessages(){const _0x71d7dd=_0x491c76,_0x1f30e2=settings[_0x71d7dd(0x148)];let _0x5dd1bf=[];newMessages[_0x71d7dd(0x142)](_0x4c723b=>{const _0x192d29=_0x71d7dd;_0x4c723b[_0x192d29(0x175)]>_0x1f30e2&&_0x5dd1bf[_0x192d29(0x245)](_0x4c723b);}),_0x5dd1bf[_0x71d7dd(0x16b)]>0x0&&getAllClients()[_0x71d7dd(0x142)](_0x32547b=>{const _0x33caa1=_0x71d7dd;getSocket(_0x32547b['id'])[_0x33caa1(0x1fd)]('message',_0x5dd1bf);});}function confirmMessage(_0x5998ee){const _0x424847=_0x491c76;updateSetting(_0x424847(0x148),Number(_0x5998ee));}function isNewerVersion(_0x3dfb47,_0x5dff53){const _0x3a00a2=_0x491c76,_0x5d9e64=_0x5dff53[_0x3a00a2(0x186)]('.'),_0x659b9e=_0x3dfb47[_0x3a00a2(0x186)]('.');for(var _0x53a8e7=0x0;_0x53a8e7<_0x659b9e['length'];_0x53a8e7++){const _0x54b3ed=~~_0x659b9e[_0x53a8e7],_0x37a739=~~_0x5d9e64[_0x53a8e7];if(_0x54b3ed>_0x37a739)return!![];if(_0x54b3ed<_0x37a739)return![];}return![];}function toTelegramMarkdown(_0x1dd4c7){const _0x1a5186=_0x491c76,_0x42bda4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3bf310=/\*{2}(.+?)\*{2}/gim;return _0x1dd4c7=_0x1dd4c7[_0x1a5186(0x244)](_0x42bda4,_0x1a5186(0x2c4))[_0x1a5186(0x244)](_0x3bf310,_0x1a5186(0x2cf)),_0x1dd4c7;}async function validateConfigFile(){const _0x103a6a=_0x491c76,_0x2a9a36=dbConfig[_0x103a6a(0x23e)](_0x103a6a(0x157))['sortBy'](_0x103a6a(0x190))[_0x103a6a(0x1fe)]()||[];if(_0x2a9a36[_0x103a6a(0x16b)]==0x0){let _0x4ea44a=0x0,_0x1e80cb=[];const _0x2ec56a=/^bot-([0-9]{3})-config.json$/,_0xab1e33=fs[_0x103a6a(0x2a7)](configpath);_0xab1e33[_0x103a6a(0x142)](_0x1a2ae6=>{const _0x2dcb04=_0x103a6a,_0x21447c=_0x2ec56a[_0x2dcb04(0x20c)](_0x1a2ae6);if(_0x21447c){const _0x10edba=_0x21447c[0x1];let _0x479d5c=getBotAttributes(_0x10edba);_0x1e80cb['push']({'botID':_0x10edba,'botname':_0x479d5c['botname'],'status':_0x2dcb04(0x2b9),'live':_0x2dcb04(0x147)}),_0x4ea44a++;}}),_0x4ea44a!=0x0&&(dbConfig[_0x103a6a(0x23e)]('bots')['assign'](_0x1e80cb)[_0x103a6a(0x1d1)](),config=_0x1e80cb,restoredConfigFile=_0x4ea44a);}}async function restoreConfigNotify(_0x47b63c){const _0xa2f3aa=_0x491c76;let _0x1ec730;if(restoredConfigFile==0x1)_0x1ec730=_0xa2f3aa(0x1b1);else _0x1ec730=_0xa2f3aa(0x213);if(_0x47b63c)io['to'](_0xa2f3aa(0x208))[_0xa2f3aa(0x1fd)](_0xa2f3aa(0x206),_0x1ec730);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0xa2f3aa(0x1af)](_0x1ec730),logger[_0xa2f3aa(0x1af)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0xa2f3aa(0x169)]&&settings[_0xa2f3aa(0x1cb)]!=_0xa2f3aa(0x2a9))tgBot[_0xa2f3aa(0x27c)](settings[_0xa2f3aa(0x169)],_0xa2f3aa(0x26d)+_0x1ec730)[_0xa2f3aa(0x1a3)](_0x492fbf=>{telegramError(_0x492fbf);});}}function validateCredentials(_0x4eeadf,_0x12b6b3){const _0x4dc13c=_0x491c76;if(_0x4eeadf[_0x4dc13c(0x1bd)]==settings[_0x4dc13c(0x146)]&&bcrypt[_0x4dc13c(0x1f6)](_0x4eeadf['password'],settings[_0x4dc13c(0x18f)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x4dc13c(0x16c),'token':null};else{const _0x2d04b3=generateLoginToken(_0x12b6b3);return{'allow':!![],'reason':_0x4dc13c(0x264),'token':_0x2d04b3};}}else return{'allow':![],'reason':_0x4dc13c(0x13d),'token':null};}function refreshToken(_0xd977cb){const _0x3af09b=_0x491c76,_0x26596f=generateLoginToken(_0xd977cb);return{'allow':!![],'reason':_0x3af09b(0x264),'token':_0x26596f};}function validateAccess(_0x4bfb46,_0x15a5c0,_0x387ac3){const _0x5a26b0=_0x491c76,_0x5e80f9=_0x387ac3?_0x387ac3:devices[_0x15a5c0]['ip'];let _0x42ba9d;const _0x94e143=_0x488c4f=>{const _0x120a59=_0x3c91;if(settings[_0x120a59(0x1f9)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x15a5c0)){const _0x28b491=generateLoginToken(_0x15a5c0);return{'allow':!![],'reason':_0x120a59(0x200),'token':_0x28b491};}else return{'allow':![],'reason':_0x120a59(0x172),'token':null};}else return _0x42ba9d=validToken(_0x488c4f,_0x15a5c0),_0x42ba9d[_0x120a59(0x152)](_0x120a59(0x1c7))?{'allow':!![],'reason':_0x120a59(0x14e),'token':_0x488c4f}:{'allow':![],'reason':_0x120a59(0x172),'token':null};}else return{'allow':!![],'reason':_0x120a59(0x1f7),'token':null};};if(settings[_0x5a26b0(0x155)]){let _0x3ca394=[...settings['whitelist'],_0x5a26b0(0x1dc),'::ffff:127.0.0.1',_0x5a26b0(0x168)];if(_0x3ca394[_0x5a26b0(0x176)](_0x5e80f9))return _0x94e143(_0x4bfb46);else{_0x42ba9d=validToken(_0x4bfb46,_0x15a5c0);if(_0x42ba9d['hasOwnProperty'](_0x5a26b0(0x1c7)))return _0x94e143(_0x4bfb46);else{if(telegramIpApproved(_0x15a5c0)){const _0x4c4549=generateToken(_0x15a5c0);return _0x42ba9d=_0x94e143(_0x4bfb46),_0x42ba9d[_0x5a26b0(0x138)]?{'allow':!![],'reason':_0x5a26b0(0x141),'token':_0x4c4549}:_0x42ba9d;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x5a26b0(0x1f1),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x94e143(_0x4bfb46);}function timelyDecrypt(_0x227684,_0x2af93e=!![]){const _0x3e843e=_0x491c76;if(_0x227684)try{const _0x576bb1=crypt[_0x3e843e(0x1d8)](secure['privateKey'],_0x227684)[_0x3e843e(0x2b2)],_0x99343b=_0x576bb1[_0x3e843e(0x186)]('@')[0x0],_0x39892c=_0x576bb1[_0x3e843e(0x186)]('@')[0x1],_0x1418ca=new Date()[_0x3e843e(0x1d6)]();if(_0x2af93e){if(_0x1418ca-_0x39892c<maxSecretAge*0x3e8)return _0x99343b;else return![];}else return _0x99343b;}catch(_0x25bd97){return![];}else return![];}const validToken=(_0x3bafe4,_0x31a094)=>{const _0x3a7c57=_0x491c76,_0xed9fba=devices[_0x31a094]['ip'];if(!_0x3bafe4)return{'error':_0x3a7c57(0x13a)};for(let _0x179a7e of blacklist){if(_0x179a7e[_0x3a7c57(0x215)]==_0x3bafe4)return{'error':_0x3a7c57(0x1ef)};}let _0x53c619;try{_0x53c619=jwt[_0x3a7c57(0x179)](_0x3bafe4,secure['secret']+_0x31a094);}catch{return{'error':_0x3a7c57(0x297)};}if(!_0x53c619['hasOwnProperty']('clientip')&&!_0x53c619['hasOwnProperty'](_0x3a7c57(0x1bd))||!_0x53c619[_0x3a7c57(0x152)]('exp'))return{'error':_0x3a7c57(0x2a4)};if(!_0x53c619[_0x3a7c57(0x152)](_0x3a7c57(0x1bd))&&_0x53c619[_0x3a7c57(0x152)](_0x3a7c57(0x271))){const {clientip:_0x2d265f}=_0x53c619;return _0xed9fba==_0x2d265f?{'success':_0x3a7c57(0x270)}:{'error':_0x3a7c57(0x222)};}else{if(_0x53c619[_0x3a7c57(0x152)]('username')&&_0x53c619[_0x3a7c57(0x152)](_0x3a7c57(0x271))){const {username:_0x2fb2a3,clientip:_0x57f641}=_0x53c619;return settings[_0x3a7c57(0x146)]==_0x2fb2a3&&_0xed9fba==_0x57f641?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x1a0c61=>{const _0x4d57ba=_0x491c76;if(_0x1a0c61){const _0x325d13=devices[_0x1a0c61]['ip'];return jwt[_0x4d57ba(0x254)]({'username':settings[_0x4d57ba(0x146)],'clientip':_0x325d13},secure[_0x4d57ba(0x291)]+_0x1a0c61,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2dfab8=>{const _0x106421=_0x491c76;if(_0x2dfab8){const _0xa83b9=devices[_0x2dfab8]['ip'];return jwt[_0x106421(0x254)]({'clientip':_0xa83b9},secure[_0x106421(0x291)]+_0x2dfab8,{'expiresIn':devices[_0x2dfab8][_0x106421(0x227)][_0x106421(0x2ad)]*0x3c});}else return![];},telegramIpApproved=_0x4e0218=>{const _0x1394f0=_0x491c76;let _0x31d6f6=![];return devices[_0x4e0218]['telegramIpApproval']&&devices[_0x4e0218]['telegramIpApproval'][_0x1394f0(0x2ad)]!='reject'&&(_0x31d6f6=devices[_0x4e0218]['telegramIpApproval'][_0x1394f0(0x271)]==devices[_0x4e0218]['ip']&&new Date()[_0x1394f0(0x1d6)]()-devices[_0x4e0218]['telegramIpApproval'][_0x1394f0(0x2c0)]<devices[_0x4e0218][_0x1394f0(0x227)][_0x1394f0(0x2ad)]*0x3c*0x3e8),_0x31d6f6;},telegram2FaApproved=_0x45ec67=>{const _0x1e5165=_0x491c76;let _0x308c06=![];return devices[_0x45ec67][_0x1e5165(0x1d5)]&&devices[_0x45ec67]['telegram2FaApproval'][_0x1e5165(0x2ad)]!=_0x1e5165(0x27d)&&(_0x308c06=devices[_0x45ec67][_0x1e5165(0x1d5)]['clientip']==devices[_0x45ec67]['ip']&&new Date()['getTime']()-devices[_0x45ec67][_0x1e5165(0x1d5)][_0x1e5165(0x2c0)]<devices[_0x45ec67]['telegram2FaApproval'][_0x1e5165(0x2ad)]*0x3c*0x3e8),_0x308c06;},normalizeIP=_0x3760c2=>{const _0x17f5a2=_0x491c76;let _0x11a06e=null,_0x1dbe07=null;if(ipaddr[_0x17f5a2(0x22d)](_0x3760c2)){const _0x97a28c=ipaddr[_0x17f5a2(0x209)](_0x3760c2);_0x97a28c[_0x17f5a2(0x145)]()==='ipv6'?(_0x97a28c[_0x17f5a2(0x259)]()&&(_0x11a06e=_0x97a28c[_0x17f5a2(0x22c)]()[_0x17f5a2(0x13e)]()),_0x1dbe07=_0x97a28c[_0x17f5a2(0x13e)]()):(_0x11a06e=_0x97a28c['toString'](),_0x1dbe07=_0x97a28c[_0x17f5a2(0x18a)]()['toString']());}return{'show':_0x11a06e?_0x11a06e:_0x1dbe07,'store':_0x1dbe07};};function sleep(_0x38ab1b){return new Promise(_0x82f36c=>setTimeout(_0x82f36c,_0x38ab1b));}