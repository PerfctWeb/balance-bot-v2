const _0x454b7e=_0x47ad;(function(_0x4aa0c2,_0x1e1373){const _0x1e231d=_0x47ad,_0x4b57c8=_0x4aa0c2();while(!![]){try{const _0x2f44af=parseInt(_0x1e231d(0x1cc))/0x1*(parseInt(_0x1e231d(0x2c1))/0x2)+parseInt(_0x1e231d(0x22c))/0x3+parseInt(_0x1e231d(0x223))/0x4+parseInt(_0x1e231d(0x2eb))/0x5+parseInt(_0x1e231d(0x1e3))/0x6+parseInt(_0x1e231d(0x2de))/0x7+parseInt(_0x1e231d(0x278))/0x8*(-parseInt(_0x1e231d(0x240))/0x9);if(_0x2f44af===_0x1e1373)break;else _0x4b57c8['push'](_0x4b57c8['shift']());}catch(_0x4c5ebe){_0x4b57c8['push'](_0x4b57c8['shift']());}}}(_0x479f,0xb7185));const _0xdf6455=function(){let _0x4af765=!![];return function(_0x29084f,_0x468d7b){const _0x25c3a9=_0x4af765?function(){if(_0x468d7b){const _0x5bc5b5=_0x468d7b['apply'](_0x29084f,arguments);return _0x468d7b=null,_0x5bc5b5;}}:function(){};return _0x4af765=![],_0x25c3a9;};}(),_0x2a2c6c=_0xdf6455(this,function(){const _0x49eb61=_0x47ad;return _0x2a2c6c[_0x49eb61(0x25a)]()[_0x49eb61(0x28e)](_0x49eb61(0x2e8))['toString']()[_0x49eb61(0x307)](_0x2a2c6c)[_0x49eb61(0x28e)](_0x49eb61(0x2e8));});_0x2a2c6c();'use strict';process[_0x454b7e(0x256)][_0x454b7e(0x2a2)]=0x1;const childProcess=require(_0x454b7e(0x26e)),fs=require('fs'),fns=require(_0x454b7e(0x308)),low=require('lowdb'),FileSync=require(_0x454b7e(0x28d)),path=require(_0x454b7e(0x21b)),crypto=require(_0x454b7e(0x2e4)),Crypt=require(_0x454b7e(0x30d))[_0x454b7e(0x252)],RSA=require(_0x454b7e(0x30d))[_0x454b7e(0x1b9)],bcrypt=require('bcryptjs'),jwt=require(_0x454b7e(0x208)),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require('@analytics/google-analytics-v3')['default'],ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x454b7e(0x2b5)]['slice'](0x2))[_0x454b7e(0x2b5)],uuidRandom=require('uuid-random'),Mixpanel=require(_0x454b7e(0x24e)),axios=require(_0x454b7e(0x22e)),{GraphQLClient,gql}=require(_0x454b7e(0x1b1)),PORT=argv['port']||_0x454b7e(0x1e8),pattern=/^[0-9]{2,4}$/;!pattern[_0x454b7e(0x233)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x454b7e(0x20d)](0x1));const HOST=argv[_0x454b7e(0x1b6)]||null,userID=argv[_0x454b7e(0x309)]||'';let bbpath=_0x454b7e(0x245),bbpath2='';const botfile=_0x454b7e(0x30a),configfile=_0x454b7e(0x255),settingsfile=_0x454b7e(0x204),securefile=_0x454b7e(0x2b1);let validInstallation=!![];!fs[_0x454b7e(0x1ce)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x454b7e(0x298)),configpath=userID?bbpath+_0x454b7e(0x277)+userID+'/':bbpath+_0x454b7e(0x277),configbackuppath=configpath+_0x454b7e(0x320);!fs[_0x454b7e(0x1ce)](configpath)&&fs[_0x454b7e(0x248)](configpath);!fs[_0x454b7e(0x1ce)](configbackuppath)&&fs[_0x454b7e(0x248)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x454b7e(0x30f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x454b7e(0x1ff)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x454b7e(0x1fb)}})[_0x454b7e(0x30f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x454b7e(0x1ff)]({'secure':{},'blacklist':[]})[_0x454b7e(0x30f)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x454b7e(0x229)](_0x454b7e(0x2b8),{'host':_0x454b7e(0x1cf)}),analytics=Analytics({'app':_0x454b7e(0x24a),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x454b7e(0x2da)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x454b7e(0x2f5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x454b7e(0x1d9)),app=express(),http=require(_0x454b7e(0x2f3))[_0x454b7e(0x1cd)](app);app[_0x454b7e(0x303)](express[_0x454b7e(0x1df)](path[_0x454b7e(0x20f)](__dirname,bbpath2,_0x454b7e(0x201)))),app[_0x454b7e(0x303)](express[_0x454b7e(0x1df)](path[_0x454b7e(0x20f)](__dirname,bbpath2,'build'))),app[_0x454b7e(0x23c)]('/',function(_0x3ecf89,_0x55ecec){const _0x3fcf4b=_0x454b7e;_0x55ecec[_0x3fcf4b(0x2e6)](path[_0x3fcf4b(0x20f)](__dirname,bbpath2,_0x3fcf4b(0x201),_0x3fcf4b(0x218)));}),app[_0x454b7e(0x23c)](_0x454b7e(0x29a),function(_0x529dac,_0x5a5539){const _0x27cdca=_0x454b7e;_0x5a5539[_0x27cdca(0x2e6)](path[_0x27cdca(0x20f)](__dirname,bbpath2,_0x27cdca(0x24c),'index.html'));}),app[_0x454b7e(0x23c)]('/:bot/portfolio',(_0xa55b26,_0x3286e1)=>{const _0x1ac04f=_0x454b7e;_0x3286e1[_0x1ac04f(0x2e6)](path[_0x1ac04f(0x20f)](__dirname,bbpath2,_0x1ac04f(0x24c),_0x1ac04f(0x218)));}),app[_0x454b7e(0x23c)](_0x454b7e(0x262),(_0x595e19,_0x2c3cc9)=>{const _0x2879cd=_0x454b7e;_0x2c3cc9['sendFile'](path[_0x2879cd(0x20f)](__dirname,bbpath2,_0x2879cd(0x24c),_0x2879cd(0x218)));}),app[_0x454b7e(0x23c)]('/:bot/coins',(_0x5e5547,_0x412dff)=>{const _0x5cc994=_0x454b7e;_0x412dff['sendFile'](path[_0x5cc994(0x20f)](__dirname,bbpath2,'build',_0x5cc994(0x218)));}),app[_0x454b7e(0x23c)](_0x454b7e(0x20c),(_0xc0a8f3,_0x3b6dd4)=>{const _0x492b0e=_0x454b7e;_0x3b6dd4[_0x492b0e(0x2e6)](path[_0x492b0e(0x20f)](__dirname,bbpath2,'build','index.html'));}),app[_0x454b7e(0x23c)](_0x454b7e(0x22a),(_0x17b212,_0x5b3314)=>{const _0x335078=_0x454b7e;_0x5b3314[_0x335078(0x2e6)](path[_0x335078(0x20f)](__dirname,bbpath2,_0x335078(0x24c),_0x335078(0x218)));}),app[_0x454b7e(0x23c)](_0x454b7e(0x2fc),(_0x529a36,_0xe63297)=>{const _0x1d8b51=_0x454b7e;_0xe63297['sendFile'](path['join'](__dirname,bbpath2,_0x1d8b51(0x24c),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x454b7e(0x1c7)](PORT);const io=require(_0x454b7e(0x238))(http,{}),TelegramBot=require(_0x454b7e(0x2fb));let tgBot;if(settings[_0x454b7e(0x21a)]&&settings[_0x454b7e(0x21a)]!=''&&settings[_0x454b7e(0x28a)]&&settings[_0x454b7e(0x28a)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x434065=_0x454b7e;console[_0x434065(0x209)](''),console[_0x434065(0x209)](_0x434065(0x2cd)),logging(_0x434065(0x2e0)+PORT),console[_0x434065(0x209)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x434065(0x21c)](_0x9afb69=>{const _0x390987=_0x434065;if(_0x9afb69[_0x390987(0x21f)]=='enabled'||_0x9afb69[_0x390987(0x21f)]==_0x390987(0x30e))logging('starting\x20bot\x20|\x20Bot\x20'+_0x9afb69[_0x390987(0x2d3)]+_0x390987(0x2dc)+_0x9afb69[_0x390987(0x1b5)]),startBot([_0x9afb69[_0x390987(0x2d3)],userID],{'cwd':bbpath},function(_0x1bf262){if(_0x1bf262)logging(_0x1bf262);});else(_0x9afb69[_0x390987(0x21f)]=='disabled'||_0x9afb69[_0x390987(0x21f)]=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x9afb69[_0x390987(0x2d3)]+_0x390987(0x2dc)+_0x9afb69[_0x390987(0x1b5)]);});else!newBot&&console[_0x434065(0x209)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0x434065(0x2cd)),console[_0x434065(0x209)]('');}function startSocket(){const _0x4d9fdf=_0x454b7e;io['on'](_0x4d9fdf(0x260),_0x996d7a=>{const _0x53e893=_0x4d9fdf;let _0xbe04c2,_0x49a914,_0x21157a,_0x48c534,_0x112d93;const _0x229fc9=_0x996d7a['handshake'][_0x53e893(0x1e2)]['referer'];_0x49a914=_0x229fc9[_0x53e893(0x242)](/bot[0-9]{3}/);if(_0x49a914)_0x21157a=_0x49a914[0x0][_0x53e893(0x242)](/[0-9]{3}/);if(_0x21157a)_0xbe04c2=_0x21157a[0x0];else _0xbe04c2=_0x53e893(0x290);const _0xfa506c=_0x996d7a[_0x53e893(0x239)][_0x53e893(0x24b)][_0x53e893(0x289)];if(!_0xfa506c)_0x996d7a[_0x53e893(0x2b3)](_0x53e893(0x21f),{'publicKey':secure[_0x53e893(0x285)]});else{_0x48c534=timelyDecrypt(_0xfa506c,![]);if(!_0x48c534)_0x996d7a[_0x53e893(0x2b3)](_0x53e893(0x21f),{'publicKey':secure[_0x53e893(0x285)]});else{_0x112d93=normalizeIP(_0x996d7a['conn'][_0x53e893(0x24f)])[_0x53e893(0x271)];if(!devices[_0x48c534])devices[_0x48c534]={'uuid':_0x48c534,'access':{'token':null}};devices[_0x48c534]['ip']=_0x112d93;const _0x55df18=addClient(_0x996d7a['id'],_0x48c534,_0xbe04c2);setAccess(_0x55df18),emitMessages(),_0x996d7a['on'](_0x53e893(0x1ba),_0xe0b499=>{const _0x154db7=_0x53e893,_0x4b5acd=timelyDecrypt(_0xe0b499['password']);if(_0x4b5acd){_0xe0b499={'username':_0xe0b499[_0x154db7(0x2f2)],'password':_0x4b5acd},devices[_0x48c534]['access']=validateCredentials(_0xe0b499,_0x48c534);if(devices[_0x48c534][_0x154db7(0x235)][_0x154db7(0x214)]==![]&&devices[_0x48c534][_0x154db7(0x235)][_0x154db7(0x2df)]==_0x154db7(0x314))_0x996d7a['emit'](_0x154db7(0x21f),{'access':devices[_0x48c534]['access']}),loginAccess2FA(_0x48c534,_0x112d93);else{if(devices[_0x48c534][_0x154db7(0x235)]['allow']==![]&&devices[_0x48c534][_0x154db7(0x235)][_0x154db7(0x2df)]=='invalid\x20credentials')_0x996d7a[_0x154db7(0x2b3)](_0x154db7(0x21f),{'access':devices[_0x48c534][_0x154db7(0x235)]});else devices[_0x48c534][_0x154db7(0x235)][_0x154db7(0x214)]&&devices[_0x48c534][_0x154db7(0x235)][_0x154db7(0x2df)]==_0x154db7(0x241)&&(getClientsWithUuid(_0x48c534)[_0x154db7(0x21c)](_0x1793d1=>{setAccess(_0x1793d1);}),setTokenRefresh(_0x48c534),setSessionTimeout(_0x154db7(0x1ba),_0x48c534));}}else logging(_0x154db7(0x26d));}),_0x996d7a['on'](_0x53e893(0x1ea),()=>{resetPassword();}),_0x996d7a['on'](_0x53e893(0x200),_0x3c6390=>{removeClient(_0x996d7a['id']);});}}});}function initClient(_0x2b56ff){const _0x23b643=_0x454b7e;if(_0x2b56ff!=_0x23b643(0x290)&&config['apiKey']!=''){if(pid[_0x2b56ff])pid[_0x2b56ff][_0x23b643(0x1d0)]({'function':_0x23b643(0x1f3),'args':null});}}function getSocket(_0x3336af){const _0x329412=_0x454b7e;return io[_0x329412(0x24d)]['sockets'][_0x329412(0x23c)](_0x3336af);}function setAccess(_0x162a16){const _0x4ebbda=_0x454b7e,_0x1c6390=getSocket(_0x162a16['id']),_0x46d8f0=_0x162a16[_0x4ebbda(0x2c0)],_0x4cf53e=_0x162a16['bot'];devices[_0x46d8f0]['access']=validateAccess(devices[_0x46d8f0][_0x4ebbda(0x235)]['token'],_0x46d8f0),_0x1c6390[_0x4ebbda(0x20f)](_0x46d8f0);if(devices[_0x46d8f0][_0x4ebbda(0x235)][_0x4ebbda(0x214)]){_0x1c6390[_0x4ebbda(0x20f)](_0x4cf53e);if(_0x4cf53e==_0x4ebbda(0x290))initializeSocketBotManager(_0x1c6390);else initializeSocketBot(_0x1c6390);initClient(_0x4cf53e);}devices[_0x46d8f0][_0x4ebbda(0x235)][_0x4ebbda(0x26b)]&&devices[_0x46d8f0][_0x4ebbda(0x235)][_0x4ebbda(0x2df)]==_0x4ebbda(0x2aa)&&setSessionTimeout(_0x4ebbda(0x1b4),_0x46d8f0),devices[_0x46d8f0][_0x4ebbda(0x235)]['token']&&devices[_0x46d8f0][_0x4ebbda(0x235)][_0x4ebbda(0x2df)]==_0x4ebbda(0x31e)&&setSessionTimeout(_0x4ebbda(0x1ba),_0x46d8f0),_0x1c6390[_0x4ebbda(0x2b3)]('status',{'status':_0x162a16[_0x4ebbda(0x2a6)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x46d8f0][_0x4ebbda(0x235)],'externalip':devices[_0x46d8f0]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x4ebbda(0x325)],'validInstallation':validInstallation}),devices[_0x46d8f0]['access'][_0x4ebbda(0x214)]==![]&&devices[_0x46d8f0][_0x4ebbda(0x235)][_0x4ebbda(0x2df)]=='2FA\x20required'&&temporaryAccess2FA(_0x46d8f0,devices[_0x46d8f0]['ip']);}function setSessionTimeout(_0xabb792,_0x49684d){const _0x141a59=_0x454b7e;let _0x1b0d08;if(_0xabb792==_0x141a59(0x1ba))_0x1b0d08=loginExpiry*0x3c*0x3e8;else _0x1b0d08=devices[_0x49684d]['telegramIpApproval'][_0x141a59(0x2be)]*0x3c*0x3e8-(new Date()[_0x141a59(0x1e0)]()-devices[_0x49684d][_0x141a59(0x275)]['timestamp']);if(devices[_0x49684d]['pidExpireLogin'])clearTimeout(devices[_0x49684d][_0x141a59(0x1bf)]);devices[_0x49684d][_0x141a59(0x1bf)]=setTimeout(()=>{const _0x399ca3=_0x141a59;if(devices[_0x49684d]['pidRefreshToken'])clearTimeout(devices[_0x49684d]['pidRefreshToken']);removeSocketListeners(_0x49684d),addBlacklist(_0x49684d),devices[_0x49684d][_0x399ca3(0x275)]=null,devices[_0x49684d][_0x399ca3(0x27d)]=null,devices[_0x49684d][_0x399ca3(0x235)]['token']=null,devices[_0x49684d][_0x399ca3(0x235)]=validateAccess(devices[_0x49684d]['access'][_0x399ca3(0x26b)],_0x49684d),!(devices[_0x49684d][_0x399ca3(0x235)][_0x399ca3(0x214)]&&devices[_0x49684d][_0x399ca3(0x235)]['reason']==_0x399ca3(0x222))&&(_0xabb792==_0x399ca3(0x1ba)?io['to'](_0x49684d)[_0x399ca3(0x2b3)]('status',{'access':{'allow':![],'reason':_0x399ca3(0x29e),'token':null}}):io['to'](_0x49684d)[_0x399ca3(0x2b3)](_0x399ca3(0x21f),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x49684d][_0x399ca3(0x235)]['token']=null;},_0x1b0d08);}function setTokenRefresh(_0x36ef71){const _0x1a5c3d=_0x454b7e;if(devices[_0x36ef71][_0x1a5c3d(0x207)])clearTimeout(devices[_0x36ef71][_0x1a5c3d(0x207)]);devices[_0x36ef71][_0x1a5c3d(0x207)]=setTimeout(()=>{const _0xb5b587=_0x1a5c3d;getClientsWithUuid(_0x36ef71)['length']!=0x0?(devices[_0x36ef71]['access']=refreshToken(_0x36ef71),io['to'](_0x36ef71)[_0xb5b587(0x2b3)](_0xb5b587(0x21f),{'status':_0xb5b587(0x1b0),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x36ef71][_0xb5b587(0x235)],'externalip':devices[_0x36ef71]['ip'],'publicKey':secure[_0xb5b587(0x285)],'validInstallation':validInstallation}),setTokenRefresh(_0x36ef71)):clearTimeout(devices[_0x36ef71][_0xb5b587(0x207)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1790ad){const _0x320d20=_0x454b7e,_0x3ef545=getClient(_0x1790ad['id'])[_0x320d20(0x2c0)];_0x1790ad['emit'](_0x320d20(0x2a8),config),_0x1790ad[_0x320d20(0x2b3)](_0x320d20(0x212),cleanSettings()),_0x1790ad['on'](_0x320d20(0x2e3),_0x5356d6=>{const _0x56d822=_0x320d20;if(validateAccess(_0x5356d6,_0x3ef545)[_0x56d822(0x214)])addBot();else logging(_0x56d822(0x1da));}),_0x1790ad['on'](_0x320d20(0x2c2),(_0x2d8978,_0xc1ff1)=>{const _0x5cd0e5=_0x320d20;if(validateAccess(_0xc1ff1,_0x3ef545)[_0x5cd0e5(0x214)])toggleBot(_0x2d8978[_0x5cd0e5(0x2d3)],_0x2d8978['status'],_0x2d8978[_0x5cd0e5(0x27e)]);else logging(_0x5cd0e5(0x1f0));}),_0x1790ad['on'](_0x320d20(0x2bb),(_0x5e1420,_0x14a955)=>{const _0x501e3d=_0x320d20;if(validateAccess(_0x14a955,_0x3ef545)[_0x501e3d(0x214)])toggleBotMode(_0x5e1420);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1790ad['on'](_0x320d20(0x2f4),(_0x3af4ea,_0x1ffaa1)=>{const _0x4f4e1b=_0x320d20;if(validateAccess(_0x1ffaa1,_0x3ef545)[_0x4f4e1b(0x214)])deleteBot(_0x3af4ea);else logging(_0x4f4e1b(0x1f2));}),_0x1790ad['on'](_0x320d20(0x1c0),(_0x105b9d,_0x4e8ce4)=>{const _0x4ddb7a=_0x320d20;if(validateAccess(_0x4e8ce4,_0x3ef545)[_0x4ddb7a(0x214)])storeSettings(_0x105b9d,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1790ad['on'](_0x320d20(0x266),_0x449577=>{const _0x53a909=_0x320d20;if(validateAccess(_0x449577,_0x3ef545)[_0x53a909(0x214)])updateBB();else logging(_0x53a909(0x1b8));}),_0x1790ad['on']('get-messages',_0x1c359a=>{const _0x41b463=_0x320d20;if(validateAccess(_0x1c359a,_0x3ef545)[_0x41b463(0x214)])getMessages();else logging(_0x41b463(0x1f8));}),_0x1790ad['on']('confirm-message',(_0x4034b9,_0x3eba36)=>{const _0x4e3038=_0x320d20;if(validateAccess(_0x3eba36,_0x3ef545)[_0x4e3038(0x214)])confirmMessage(_0x4034b9);else logging(_0x4e3038(0x30c));}),_0x1790ad['on']('logout',_0x5d7d68=>{const _0x4bc598=_0x320d20;if(validateAccess(_0x5d7d68,_0x3ef545)[_0x4bc598(0x214)]){if(devices[_0x3ef545]['pidRefreshToken'])clearTimeout(devices[_0x3ef545][_0x4bc598(0x207)]);if(devices[_0x3ef545][_0x4bc598(0x1bf)])clearTimeout(devices[_0x3ef545][_0x4bc598(0x1bf)]);removeSocketListeners(getClient(_0x1790ad['id'])[_0x4bc598(0x2c0)]),addBlacklist(_0x3ef545),devices[_0x3ef545][_0x4bc598(0x275)]=null,devices[_0x3ef545][_0x4bc598(0x27d)]=null,devices[_0x3ef545]['access']['token']=null,io['to'](getClient(_0x1790ad['id'])[_0x4bc598(0x2c0)])['emit'](_0x4bc598(0x21f),{'access':{'allow':![],'reason':_0x4bc598(0x279),'token':null}});}else logging(_0x4bc598(0x1f1));});}function initializeSocketBot(_0x13d73d){const _0x16410b=_0x454b7e,_0x4d24b2=getClient(_0x13d73d['id'])['bot'],_0x5445c7=getClient(_0x13d73d['id'])[_0x16410b(0x2c0)];_0x13d73d['on'](_0x16410b(0x324),(_0x1ad22d,_0x4161e9)=>{const _0xf6e73c=_0x16410b;if(validateAccess(_0x4161e9,_0x5445c7)[_0xf6e73c(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2][_0xf6e73c(0x1d0)]({'function':_0xf6e73c(0x316),'args':_0x1ad22d});}else logging(_0xf6e73c(0x2d4));}),_0x13d73d['on'](_0x16410b(0x1fe),(_0x259f9c,_0x293091)=>{const _0x119854=_0x16410b;if(validateAccess(_0x293091,_0x5445c7)[_0x119854(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2][_0x119854(0x1d0)]({'function':_0x119854(0x22f),'args':_0x259f9c});}else logging(_0x119854(0x29d));}),_0x13d73d['on'](_0x16410b(0x20a),(_0x355878,_0x2c4fde)=>{const _0x5373b8=_0x16410b;if(validateAccess(_0x2c4fde,_0x5445c7)[_0x5373b8(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2][_0x5373b8(0x1d0)]({'function':_0x5373b8(0x231),'args':_0x355878});}else logging(_0x5373b8(0x2c8));}),_0x13d73d['on']('store-configuration',(_0x1b1b49,_0x54bb2f)=>{const _0x399ed1=_0x16410b;if(validateAccess(_0x54bb2f,_0x5445c7)['allow']){if(pid[_0x4d24b2])pid[_0x4d24b2][_0x399ed1(0x1d0)]({'function':_0x399ed1(0x1f9),'args':_0x1b1b49});}else logging(_0x399ed1(0x2e9));}),_0x13d73d['on'](_0x16410b(0x2cc),(_0x4ca038,_0x5ad359)=>{const _0x32fa94=_0x16410b;if(validateAccess(_0x5ad359,_0x5445c7)[_0x32fa94(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2][_0x32fa94(0x1d0)]({'function':_0x32fa94(0x31b),'args':_0x4ca038});}else logging(_0x32fa94(0x1d8));}),_0x13d73d['on']('get-starting-balances',_0x5c6f6c=>{const _0x5566c6=_0x16410b;if(validateAccess(_0x5c6f6c,_0x5445c7)[_0x5566c6(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2]['send']({'function':_0x5566c6(0x301),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x13d73d['on'](_0x16410b(0x1c3),(_0x35a721,_0x1af99e)=>{if(validateAccess(_0x1af99e,_0x5445c7)['allow']){if(pid[_0x4d24b2])pid[_0x4d24b2]['send']({'function':'placeOrder','args':_0x35a721});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x13d73d['on']('cancel-loading',_0x563d2f=>{const _0x1128c8=_0x16410b;if(validateAccess(_0x563d2f,_0x5445c7)[_0x1128c8(0x214)]){if(pid[_0x4d24b2])pid[_0x4d24b2][_0x1128c8(0x1d0)]({'function':'cancelLoading','args':null});}else logging(_0x1128c8(0x270));}),_0x13d73d['on']('update-bb',_0x461631=>{const _0x38e487=_0x16410b;if(validateAccess(_0x461631,_0x5445c7)[_0x38e487(0x214)])updateBB();else logging(_0x38e487(0x1b8));}),_0x13d73d['on']('get-messages',_0x30c866=>{const _0x4ddc54=_0x16410b;if(validateAccess(_0x30c866,_0x5445c7)[_0x4ddc54(0x214)])getMessages();else logging(_0x4ddc54(0x1f8));}),_0x13d73d['on'](_0x16410b(0x295),(_0x22912e,_0x198bff)=>{const _0x2ac7bd=_0x16410b;if(validateAccess(_0x198bff,_0x5445c7)[_0x2ac7bd(0x214)])confirmMessage(_0x22912e);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x13d73d['on'](_0x16410b(0x1c1),_0x368e0e=>{const _0x3a97b5=_0x16410b;if(validateAccess(_0x368e0e,_0x5445c7)[_0x3a97b5(0x214)]){if(devices[_0x5445c7][_0x3a97b5(0x207)])clearTimeout(devices[_0x5445c7]['pidRefreshToken']);if(devices[_0x5445c7][_0x3a97b5(0x1bf)])clearTimeout(devices[_0x5445c7][_0x3a97b5(0x1bf)]);removeSocketListeners(getClient(_0x13d73d['id'])[_0x3a97b5(0x2c0)]),addBlacklist(_0x5445c7),devices[_0x5445c7][_0x3a97b5(0x275)]=null,devices[_0x5445c7][_0x3a97b5(0x27d)]=null,devices[_0x5445c7][_0x3a97b5(0x235)][_0x3a97b5(0x26b)]=null,io['to'](getClient(_0x13d73d['id'])[_0x3a97b5(0x2c0)])[_0x3a97b5(0x2b3)](_0x3a97b5(0x21f),{'access':{'allow':![],'reason':_0x3a97b5(0x279),'token':null}});}else logging(_0x3a97b5(0x1f1));});}function removeSocketListeners(_0x492289){const _0x10574e=_0x454b7e;getClientsWithUuid(_0x492289)[_0x10574e(0x21c)](_0x5a024c=>{const _0x99999e=_0x10574e;getSocket(_0x5a024c['id'])[_0x99999e(0x322)]();});}function cleanSettings(){const _0x57979f=_0x454b7e;let _0x2846c5=settings;return settings[_0x57979f(0x21a)]&&settings['telegramToken']!=''&&(_0x2846c5={..._0x2846c5,'telegramToken':_0x57979f(0x1d4)}),settings['bbPassword']&&settings[_0x57979f(0x293)]!=''&&(_0x2846c5={..._0x2846c5,'bbPassword':_0x57979f(0x1d4)}),_0x2846c5;}function updateBB(){const _0x37279c=_0x454b7e;installingUpdate=!![],config[_0x37279c(0x21c)](_0x55196a=>{const _0x3289d2=_0x37279c;restartBot(_0x55196a[_0x3289d2(0x2d3)]);}),process[_0x37279c(0x1d0)]({'update':!![]},_0x1aaabb=>{});}function startBot(_0x48f8b4,_0x2dbfcc,_0x10730b){const _0x33fa0c=_0x454b7e;let _0x36ec4c=![];const _0x522ef6=_0x48f8b4[0x0];_0x2dbfcc={..._0x2dbfcc,'stdio':['inherit','inherit',_0x33fa0c(0x25c),_0x33fa0c(0x26f)]},pid[_0x522ef6]=childProcess[_0x33fa0c(0x28f)](botfile,_0x48f8b4,_0x2dbfcc),pid[_0x522ef6]['on'](_0x33fa0c(0x1c6),_0x47cdaf=>{const _0x21182a=_0x33fa0c;switch(Object[_0x21182a(0x1eb)](_0x47cdaf)[0x0]){case _0x21182a(0x1b5):updateBotName(_0x522ef6,_0x47cdaf[_0x21182a(0x1b5)]);break;case _0x21182a(0x2f8):updateBotManager();break;case'status':updateStatus(_0x522ef6,_0x47cdaf[_0x21182a(0x21f)]);break;case _0x21182a(0x27e):updateLive(_0x522ef6,_0x47cdaf['live']);break;case'started':updateLive(_0x522ef6,_0x47cdaf[_0x21182a(0x21d)]),io['to'](_0x522ef6)[_0x21182a(0x2b3)](_0x21182a(0x21f),{'access':{'allow':![],'reason':_0x21182a(0x2fd),'token':null}});break;case _0x21182a(0x318):_0x47cdaf[_0x21182a(0x318)]=='restart'&&restartBot(_0x522ef6);_0x47cdaf[_0x21182a(0x318)]==_0x21182a(0x1aa)&&toggleBot(_0x522ef6,'disabled',_0x21182a(0x250));break;case _0x21182a(0x267):sendTelegram(_0x522ef6,_0x47cdaf[_0x21182a(0x267)]);break;case _0x21182a(0x2d0):sendTelegramMsg(_0x47cdaf[_0x21182a(0x2d0)]);break;case'function':io['to'](_0x522ef6)[_0x21182a(0x2b3)](_0x47cdaf[_0x21182a(0x23f)],_0x47cdaf[_0x21182a(0x2f9)]);break;}}),pid[_0x522ef6]['on'](_0x33fa0c(0x2e2),function(_0x13108d){if(_0x36ec4c)return;_0x36ec4c=!![],_0x10730b(_0x13108d);}),pid[_0x522ef6]['on']('exit',function(_0x469858){const _0x2afd27=_0x33fa0c;if(installingUpdate)return;if(_0x36ec4c)return;_0x36ec4c=!![],_0x10730b(null);const _0x27d750=dbConfig[_0x2afd27(0x23c)](_0x2afd27(0x2a8))[_0x2afd27(0x2e5)]({'botID':_0x522ef6})[_0x2afd27(0x328)]();_0x27d750&&(_0x27d750[_0x2afd27(0x21f)]==_0x2afd27(0x1f7)||_0x27d750[_0x2afd27(0x21f)]==_0x2afd27(0x30e))&&(updateLive(_0x522ef6,'stopped'),logging(_0x2afd27(0x2b9)+_0x522ef6),startBot([_0x522ef6,userID],{'cwd':bbpath},function(_0x407465){if(_0x407465)logging(_0x407465);}));});}function stopBot(_0x244bc1){const _0x177e28=_0x454b7e;getClientsWithBotID(_0x244bc1)['forEach'](_0x149c71=>{const _0x21a35e=_0x47ad;getSocket(_0x149c71['id'])[_0x21a35e(0x200)](!![]),removeClient(_0x149c71['id']);}),pid[_0x244bc1]&&(pid[_0x244bc1][_0x177e28(0x1aa)](),pid[_0x244bc1]=null);}function restartBot(_0x3918f7){const _0x439309=_0x454b7e;if(pid[_0x3918f7])pid[_0x3918f7][_0x439309(0x1aa)]();}function _0x479f(){const _0xafc124=['type','Password\x20reset\x20rejected','update-bb','telegram','Your\x20installation\x20is\x20already\x20up\x20to\x20date','randomFillSync','Bot\x20','token','loginRequired','Unauthorized\x20login\x20attempt\x20(timeout)','child_process','ipc','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','store','404\x20Not\x20Found','data','Bot\x20Mgr\x20>\x20','telegramIpApproval','any','config/','12956968vxYvnL','logged\x20out','manual','disabled','onText','telegram2FaApproval','live','catch','f2aRequired','disabled\x20Bot\x20','login\x20required','/disable\x20-\x20disable\x20notifications\x0a','alerts','publicKey','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','order','encryptedUuid','telegramUsername','push','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','lowdb/adapters/FileSync','search','fork','botmanager','password','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','bbPassword','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','confirm-message','sendMessage','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','clients','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/:bot','filter','\x20minutes','Unauthorized\x20attempt\x20to\x20delete\x20alerts','access\x20timeout','parse','mode','ipv6','NTBA_FIX_319','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','All','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','server','alias','bots','sendPortfolioTelegram','temporary\x20token\x20generated','/restart\x20-\x20restart\x20bot(s)\x0a','Invalid\x20username\x20or\x20IP\x20address','5\x20min','\x20mode','2FA\x20login\x20rejected','-events.json','bb-secure.json','2FA\x20required','emit','error\x20while\x20deleting\x20config\x20files:\x20','argv','kind','copyFileSync','6b67f3d61ee94b8f5c80b4affef4c4d9','restarting\x20Bot\x20','readdirSync','toggle-bot-mode','Notifications\x20disabled\x0a','-config.json','expiry','request','uuid','8LtIYsF','update-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/help\x20-\x20show\x20available\x20commands\x0a','min','Orders','lastmsgemitted','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Ok,\x20will\x20send\x20order\x20notifications\x20only','callback_query','Notifications\x20disabled','store-headless','-----------------------------------------------------------------------------------','remove','login\x20token\x20valid','telegrammsg','page','All\x20bots','botID','Unauthorized\x20attempt\x20to\x20get\x20logs','</b>\x20?','success','SIGINT','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','UA-192771731-1','Markdown','\x20|\x20','max','3549532ppyMIS','reason','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','timestamp','error','add-bot','crypto','find','sendFile','/on\x20-\x20start\x20bot(s)\x0a','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20store\x20configuration','getSeconds','6788125xPHQEU','verify','Starting\x20Balance\x20Bot\x20update','randomBytes','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','stringify','whitelistEnabled','username','http','delete-bot','version','length','compareSync','updatebotmanager','args','number','node-telegram-bot-api','/:bot/support','reload','new-disabled','temporary\x20access\x20not\x20allowed','showname','getStartingBalances','readFileSync','use','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','includes','invalid\x20credentials','constructor','date-fns','user','bot.js','isValid','Unauthorized\x20attempt\x20to\x20confirm\x20message','hybrid-crypto-js','new','write','title','answerCallbackQuery','whitelist','temporary\x20access\x20rejected','2FA\x20login\x20required','sign','emitHistory','/names\x20-\x20show\x20bot\x20names\x0a','stop','running','hasOwnProperty','storeHeadless','127.0.0.1','bot-','2FA\x20login\x20token\x20generated','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','backup/','::1','removeAllListeners','assign','get-logs','userid','map','bbvNew','value','Password\x20has\x20been\x20reset\x20to:\x20','kill','Access\x20enabled\x20for\x20','from','startsWith','chat','/status\x20-\x20show\x20bot(s)\x20status\x0a','connected','graphql-request','*$1*','isDirectory','2FA','botname','host','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','RSA','login','secret','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','-results.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','pidExpireLogin','store-settings','logout','<b>Telegram\x20Bot\x20Status:</b>\x0a','place-order','1000','-performance.json','message','listen','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','blacklist','exp','/off\x20-\x20stop\x20bot(s)\x0a','245638nxUUHI','createServer','existsSync','api-eu.mixpanel.com','send','/update\x20-\x20update\x20Balance\x20Bot\x0a','yes','orders','************','15\x20min','telegramChatId','getMonth','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','express','Unauthorized\x20attempt\x20to\x20add\x20bot','polling_error','timeshift','All\x20bots\x20running\x20right\x20now','Yes','static','getTime','bbUsername','headers','343194zgHhWE','temporaryAccessAllowed','getMinutes','toIPv4MappedAddress','decrypt','3000','cloneDeep','reset-password','keys','No\x20bots\x20running\x20right\x20now','deleted\x20Bot\x20','getHours','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20log\x20out','Unauthorized\x20attempt\x20to\x20delete\x20bot','initclient','settings.','name','$1_$2_$3','enabled','Unauthorized\x20attempt\x20to\x20get\x20messages','storeConfiguration','bbvReceive','0.0.0','/enable\x20-\x20enable\x20notifications\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','delete-alerts','defaults','disconnect','build2','auto','\x20only\x0a','bb-settings.json','Notifications\x20enabled\x0a','lastmsgtelegram','pidRefreshToken','jsonwebtoken','log','get-portfolio','split','/:bot/history','exit','sortBy','join','getFullYear','telegramEvents','settings','Notifications\x20types:\x20','allow','secure','isIPv4MappedAddress','SIGTERM','index.html','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','telegramToken','path','forEach','started','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','status','stopPolling','You\x20can\x20use\x20the\x20following\x20commands:\x0a','login\x20not\x20required','5757768KDQyIq','headless','bot','hashSync','privateKey','messages','init','/:bot/configuration','\x20to\x20','3794778eunGki','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','axios','deleteHistoryAlerts','telegramEnabled','getPortfolio','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','test','Invalid\x20authentication\x20token\x20(1)','access','unlinkSync','writeFileSync','socket.io','handshake','toIPv4Address','padStart','get','removeListener','clientip','function','27zcdIIH','login\x20token\x20generated','match','enabled\x20Bot\x20','Login\x20rejected','bb/','Notifications\x20enabled','track','mkdirSync','latestversion','Balance\x20Bot','auth','build','sockets','mixpanel','remoteAddress','stopped','Server','Crypt','Alerts','getDate','bb-config.json','env','all','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','getUTCHours','toString','https://hodlerhacks.com','inherit','reject','notification','HTML','connection','then','/:bot/performance','replace'];_0x479f=function(){return _0xafc124;};return _0x479f();}function addBot(){const _0x7c445d=_0x454b7e;let _0x12417c;for(let _0x298822=0x1;_0x298822<0x3e9;_0x298822++){_0x12417c=_0x298822[_0x7c445d(0x25a)]()[_0x7c445d(0x23b)](0x3,'0');let _0x1d3d1a=config[_0x7c445d(0x2e5)](_0xed4ded=>_0xed4ded['botID']==_0x12417c);if(!_0x1d3d1a)break;}if(_0x12417c===_0x7c445d(0x1c4)){logging(_0x7c445d(0x2a5));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x12417c),dbConfig['get'](_0x7c445d(0x2a8))[_0x7c445d(0x28b)]({'botID':_0x12417c,'botname':_0x7c445d(0x26a)+_0x12417c,'status':_0x7c445d(0x30e),'live':''})[_0x7c445d(0x30f)](),startBot([_0x12417c,userID],{'cwd':bbpath},function(_0x44f3c9){if(_0x44f3c9)logging(_0x44f3c9);}),config=getConfiguration(),io['to']('botmanager')[_0x7c445d(0x2b3)](_0x7c445d(0x2a8),config);}function deleteBot(_0x5cfff7){const _0x56ae1e=_0x454b7e;getClientsWithBotID(_0x5cfff7)[_0x56ae1e(0x21c)](_0x288a28=>{getSocket(_0x288a28['id'])['disconnect'](!![]),removeClient(_0x288a28['id']);}),dbConfig['get'](_0x56ae1e(0x2a8))[_0x56ae1e(0x2ce)]({'botID':_0x5cfff7})[_0x56ae1e(0x30f)](),logging(_0x56ae1e(0x1ed)+_0x5cfff7),stopBot(_0x5cfff7);try{fs[_0x56ae1e(0x236)](path['join'](configpath,_0x56ae1e(0x31d)+_0x5cfff7+_0x56ae1e(0x2bd))),fs['unlinkSync'](path[_0x56ae1e(0x20f)](configpath,_0x56ae1e(0x31d)+_0x5cfff7+_0x56ae1e(0x2b0))),fs[_0x56ae1e(0x236)](path[_0x56ae1e(0x20f)](configpath,'bot-'+_0x5cfff7+_0x56ae1e(0x1c5))),fs[_0x56ae1e(0x236)](path[_0x56ae1e(0x20f)](configpath,_0x56ae1e(0x31d)+_0x5cfff7+_0x56ae1e(0x1bd)));}catch(_0xcedac3){if(_0xcedac3)logging(_0x56ae1e(0x2b4),_0xcedac3);}config=getConfiguration(),io['to'](_0x56ae1e(0x290))[_0x56ae1e(0x2b3)](_0x56ae1e(0x2a8),config);}function toggleBot(_0x4659ec,_0x2a1124,_0x27f4a9){const _0x5bef16=_0x454b7e;dbConfig[_0x5bef16(0x23c)](_0x5bef16(0x2a8))[_0x5bef16(0x2e5)]({'botID':_0x4659ec})[_0x5bef16(0x323)]({'status':_0x2a1124})['assign']({'live':_0x27f4a9})[_0x5bef16(0x30f)]();if(_0x2a1124==_0x5bef16(0x1f7)||_0x2a1124==_0x5bef16(0x30e))logging(_0x5bef16(0x243)+_0x4659ec),startBot([_0x4659ec,userID],{'cwd':bbpath},function(_0x2c63df){if(_0x2c63df)logging(_0x2c63df);});else(_0x2a1124==_0x5bef16(0x27b)||_0x2a1124==_0x5bef16(0x2fe))&&(logging(_0x5bef16(0x281)+_0x4659ec),stopBot(_0x4659ec));config=getConfiguration(),io['to'](_0x5bef16(0x290))[_0x5bef16(0x2b3)](_0x5bef16(0x2a8),config);}function toggleStatus(_0x26b12a){const _0xf3078d=_0x454b7e;let _0x2bc4d6=dbConfig['get'](_0xf3078d(0x2a8))[_0xf3078d(0x2e5)]({'botID':_0x26b12a})['value'](),_0x283c3e;if(_0x2bc4d6[_0xf3078d(0x21f)]===_0xf3078d(0x1f7))_0x283c3e=_0xf3078d(0x27b);else{if(_0x2bc4d6[_0xf3078d(0x21f)]===_0xf3078d(0x30e))_0x283c3e='new-disabled';else{if(_0x2bc4d6[_0xf3078d(0x21f)]===_0xf3078d(0x2fe))_0x283c3e=_0xf3078d(0x30e);else{if(_0x2bc4d6[_0xf3078d(0x21f)]===_0xf3078d(0x27b))_0x283c3e=_0xf3078d(0x1f7);}}}return _0x283c3e;}function updateStatus(_0x461570,_0x9e99e8){const _0x257e03=_0x454b7e;dbConfig[_0x257e03(0x23c)]('bots')['find']({'botID':_0x461570})[_0x257e03(0x323)]({'status':_0x9e99e8})[_0x257e03(0x30f)](),config=getConfiguration(),io['to']('botmanager')[_0x257e03(0x2b3)](_0x257e03(0x2a8),config);}function updateLive(_0x2dd136,_0x802e39){const _0x2a835e=_0x454b7e;dbConfig['get'](_0x2a835e(0x2a8))['find']({'botID':_0x2dd136})[_0x2a835e(0x323)]({'live':_0x802e39})[_0x2a835e(0x30f)](),config=getConfiguration(),io['to'](_0x2a835e(0x290))[_0x2a835e(0x2b3)](_0x2a835e(0x2a8),config);}function updateBotName(_0x5ff558,_0x534c30){const _0x5ac627=_0x454b7e;dbConfig[_0x5ac627(0x23c)]('bots')['find']({'botID':_0x5ff558})[_0x5ac627(0x323)]({'botname':_0x534c30})[_0x5ac627(0x30f)](),config=getConfiguration(),io['to'](_0x5ac627(0x290))['emit'](_0x5ac627(0x2a8),config);}function updateBotManager(){const _0x5c332b=_0x454b7e;config=getConfiguration(),io['to'](_0x5c332b(0x290))[_0x5c332b(0x2b3)](_0x5c332b(0x2a8),config);}function toggleBotMode(_0x327da4){const _0x15eadf=_0x454b7e;if(pid[_0x327da4])pid[_0x327da4][_0x15eadf(0x1d0)]({'function':'toggleBotMode','args':null});else{const _0xd6738f=configpath+'bot-'+_0x327da4+_0x15eadf(0x2bd),_0x560cf0=fs[_0x15eadf(0x302)](_0xd6738f),_0x268372=JSON[_0x15eadf(0x29f)](_0x560cf0),_0x57199e=_0x268372[_0x15eadf(0x225)][0x0][_0x15eadf(0x224)];_0x268372[_0x15eadf(0x225)][0x0][_0x15eadf(0x224)]=!_0x57199e;const _0x24ed22=JSON[_0x15eadf(0x2f0)](_0x268372,null,0x2);fs[_0x15eadf(0x237)](_0xd6738f,_0x24ed22),config=getConfiguration(),io['to'](_0x15eadf(0x290))[_0x15eadf(0x2b3)](_0x15eadf(0x2a8),config);}}function telegramError(_0x383883){const _0x57e4b2=_0x454b7e;console[_0x57e4b2(0x209)](getTimeStamp()+_0x57e4b2(0x287));}function validateTelegram(_0x58dc70){const _0x560e89=_0x454b7e;if(_0x58dc70[_0x560e89(0x1ac)]['username']!=settings[_0x560e89(0x28a)]&&'@'+_0x58dc70[_0x560e89(0x1ac)][_0x560e89(0x2f2)]!=settings['telegramUsername'])return tgBot[_0x560e89(0x296)](_0x58dc70[_0x560e89(0x1ae)]['id'],_0x560e89(0x31f),{'parse_mode':_0x560e89(0x25f)})[_0x560e89(0x27f)](_0x36b7b1=>{telegramError(_0x36b7b1);}),![];return!![];}async function initTelegram(){const _0x46727a=_0x454b7e;if(tgBot)tgBot[_0x46727a(0x220)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x46727a(0x21a)],{'polling':!![]});let _0x18d3ab=_0x46727a(0x221);_0x18d3ab+='\x0a',_0x18d3ab+=_0x46727a(0x1fc),_0x18d3ab+=_0x46727a(0x283),_0x18d3ab+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x18d3ab+=_0x46727a(0x2ab),_0x18d3ab+=_0x46727a(0x2e7),_0x18d3ab+=_0x46727a(0x1cb),_0x18d3ab+=_0x46727a(0x258),_0x18d3ab+=_0x46727a(0x317),_0x18d3ab+=_0x46727a(0x1af),_0x18d3ab+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x18d3ab+=_0x46727a(0x1d1),_0x18d3ab+=_0x46727a(0x2c4);let _0x81399=_0x46727a(0x22d);_0x81399+='\x0a',_0x81399+=_0x18d3ab,tgBot[_0x46727a(0x27c)](/\/start/,_0x2427ac=>{const _0x5e07d1=_0x46727a;if(!validateTelegram(_0x2427ac))return;if(settings[_0x5e07d1(0x1d6)]!=_0x2427ac[_0x5e07d1(0x1ae)]['id'])updateSetting(_0x5e07d1(0x1d6),_0x2427ac['chat']['id']);updateSetting(_0x5e07d1(0x230),!![]),tgBot[_0x5e07d1(0x296)](_0x2427ac[_0x5e07d1(0x1ae)]['id'],_0x81399)['catch'](_0x95594a=>{telegramError(_0x95594a);});}),tgBot['onText'](/\/enable/,_0x4e309f=>{const _0x42024e=_0x46727a;if(!validateTelegram(_0x4e309f))return;if(settings[_0x42024e(0x1d6)]!=_0x4e309f['chat']['id'])updateSetting(_0x42024e(0x1d6),_0x4e309f[_0x42024e(0x1ae)]['id']);updateSetting(_0x42024e(0x230),!![]),tgBot['sendMessage'](_0x4e309f[_0x42024e(0x1ae)]['id'],_0x42024e(0x246))[_0x42024e(0x27f)](_0x6d9173=>{telegramError(_0x6d9173);});}),tgBot[_0x46727a(0x27c)](/\/config/,async _0x5b2c72=>{const _0x24b5d8=_0x46727a;if(!validateTelegram(_0x5b2c72))return;tgBot[_0x24b5d8(0x23d)](_0x24b5d8(0x2ca)),tgBot[_0x24b5d8(0x296)](_0x5b2c72[_0x24b5d8(0x1ae)]['id'],_0x24b5d8(0x1be),{'reply_markup':{'inline_keyboard':[[{'text':_0x24b5d8(0x2c6),'callback_data':_0x24b5d8(0x1d3)},{'text':_0x24b5d8(0x253),'callback_data':'alerts'},{'text':_0x24b5d8(0x2a4),'callback_data':'all'}]]}})[_0x24b5d8(0x27f)](_0x49ea79=>{telegramError(_0x49ea79);}),tgBot['on'](_0x24b5d8(0x2ca),async _0x586c48=>{const _0x288183=_0x24b5d8,_0x26a5fa=_0x586c48[_0x288183(0x273)],_0x3640c1=_0x586c48[_0x288183(0x1c6)];tgBot['answerCallbackQuery'](_0x586c48['id'])[_0x288183(0x261)](async()=>{const _0x4449c3=_0x288183;_0x26a5fa==_0x4449c3(0x1d3)&&(updateSetting(_0x4449c3(0x211),_0x4449c3(0x1d3)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4449c3(0x296)](_0x3640c1[_0x4449c3(0x1ae)]['id'],_0x4449c3(0x2c9))[_0x4449c3(0x27f)](_0x2bffcd=>{telegramError(_0x2bffcd);}));_0x26a5fa==_0x4449c3(0x284)&&(updateSetting('telegramEvents',_0x4449c3(0x284)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3640c1[_0x4449c3(0x1ae)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x4449c3(0x27f)](_0x2f6b18=>{telegramError(_0x2f6b18);}));_0x26a5fa==_0x4449c3(0x257)&&(updateSetting('telegramEvents',_0x4449c3(0x257)),updateSetting(_0x4449c3(0x230),!![]),await tgBot[_0x4449c3(0x296)](_0x3640c1[_0x4449c3(0x1ae)]['id'],_0x4449c3(0x232))['catch'](_0x2c7814=>{telegramError(_0x2c7814);}));if(!settings[_0x4449c3(0x1d6)])tgBot[_0x4449c3(0x296)](_0x3640c1[_0x4449c3(0x1ae)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x4449c3(0x27f)](_0x4fbd1e=>{telegramError(_0x4fbd1e);});}),tgBot[_0x288183(0x23d)]('callback_query');});}),tgBot[_0x46727a(0x27c)](/\/status/,_0x5e2c79=>{const _0x1ae4f5=_0x46727a;if(!validateTelegram(_0x5e2c79))return;const _0xa9a7cd=getBotsWithMode();let _0x3eba0a=_0x1ae4f5(0x1fd);config['forEach'](_0x1bed9c=>{const _0x3d1156=_0x1ae4f5,_0x49f5a4=_0xa9a7cd[_0x3d1156(0x2e5)](_0x57941b=>_0x57941b['botID']==_0x1bed9c[_0x3d1156(0x2d3)])[_0x3d1156(0x2a0)];_0x3eba0a+='Bot\x20'+_0x1bed9c[_0x3d1156(0x2d3)]+':\x20'+_0x1bed9c['status']+_0x3d1156(0x2dc)+_0x49f5a4+'\x20|\x20'+_0x1bed9c[_0x3d1156(0x27e)]+'\x0a';}),_0x3eba0a+='\x0a',_0x3eba0a+=_0x1ae4f5(0x1c2),_0x3eba0a+=!settings['telegramEnabled']?_0x1ae4f5(0x2bc):_0x1ae4f5(0x205),_0x3eba0a+=settings[_0x1ae4f5(0x230)]?settings[_0x1ae4f5(0x211)]==_0x1ae4f5(0x257)?_0x1ae4f5(0x297):_0x1ae4f5(0x213)+settings[_0x1ae4f5(0x211)]+_0x1ae4f5(0x203):'',tgBot[_0x1ae4f5(0x296)](_0x5e2c79[_0x1ae4f5(0x1ae)]['id'],_0x3eba0a,{'parse_mode':_0x1ae4f5(0x25f)})[_0x1ae4f5(0x27f)](_0x519f4f=>{telegramError(_0x519f4f);});}),tgBot[_0x46727a(0x27c)](/\/restart/,_0x83837f=>{const _0x9c73bb=_0x46727a;if(!validateTelegram(_0x83837f))return;tgBot['removeListener'](_0x9c73bb(0x2ca));const _0x2fc131=getEnabledBots();if(_0x2fc131[_0x9c73bb(0x2f6)]==0x0)tgBot[_0x9c73bb(0x296)](_0x83837f['chat']['id'],_0x9c73bb(0x1ec))[_0x9c73bb(0x27f)](_0x4387be=>{telegramError(_0x4387be);});else{if(_0x2fc131[_0x9c73bb(0x2f6)]>0x1)_0x2fc131['push']({'botID':_0x9c73bb(0x257)});let _0x5ad856=[],_0x6ec8f0=[];const _0xd34f32=_0x2fc131['length']%0x4==0x0||_0x2fc131[_0x9c73bb(0x2f6)]%0x4==0x3||_0x2fc131['length']%0x3==0x1?0x4:0x3;let _0xe2e23b=0x0;_0x2fc131[_0x9c73bb(0x21c)]((_0x3deacc,_0x24827f)=>{const _0x37c4da=_0x9c73bb;if(_0x24827f%_0xd34f32==0x0)_0x6ec8f0=[];_0x6ec8f0[_0x37c4da(0x28b)]({'text':_0x3deacc['botID']==_0x37c4da(0x257)?'All\x20bots':_0x37c4da(0x26a)+_0x3deacc[_0x37c4da(0x2d3)],'callback_data':_0x3deacc[_0x37c4da(0x2d3)]}),_0x24827f%_0xd34f32==0x0&&(_0x5ad856[_0xe2e23b]=_0x6ec8f0,_0xe2e23b++);}),tgBot[_0x9c73bb(0x296)](_0x83837f['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x5ad856}})[_0x9c73bb(0x27f)](_0x456ad9=>{telegramError(_0x456ad9);}),tgBot['on']('callback_query',async _0x3558de=>{const _0x23046d=_0x9c73bb,_0x5ec2e2=_0x3558de[_0x23046d(0x273)],_0x215644=_0x3558de[_0x23046d(0x1c6)];tgBot[_0x23046d(0x311)](_0x3558de['id'])[_0x23046d(0x261)](async()=>{const _0x1fef8b=_0x23046d;_0x5ec2e2==_0x1fef8b(0x257)?config[_0x1fef8b(0x21c)](_0x154bc4=>{const _0x231ccb=_0x1fef8b;restartBot(_0x154bc4[_0x231ccb(0x2d3)]);}):restartBot(_0x5ec2e2);}),tgBot[_0x23046d(0x23d)](_0x23046d(0x2ca));});}}),tgBot['onText'](/\/on/,_0x316c7e=>{const _0x3ac38b=_0x46727a;if(!validateTelegram(_0x316c7e))return;tgBot['removeListener'](_0x3ac38b(0x2ca));const _0xcbeb0f=getDisabledBots();if(_0xcbeb0f[_0x3ac38b(0x2f6)]==0x0)tgBot[_0x3ac38b(0x296)](_0x316c7e[_0x3ac38b(0x1ae)]['id'],_0x3ac38b(0x1dd))[_0x3ac38b(0x27f)](_0x34d4a9=>{telegramError(_0x34d4a9);});else{if(_0xcbeb0f['length']>0x1)_0xcbeb0f[_0x3ac38b(0x28b)]({'botID':_0x3ac38b(0x257)});let _0x39047d=[],_0x100e5e=[];const _0x524a0c=_0xcbeb0f[_0x3ac38b(0x2f6)]%0x4==0x0||_0xcbeb0f[_0x3ac38b(0x2f6)]%0x4==0x3||_0xcbeb0f[_0x3ac38b(0x2f6)]%0x3==0x1?0x4:0x3;let _0x40b435=0x0;_0xcbeb0f[_0x3ac38b(0x21c)]((_0x4813ae,_0x93c8aa)=>{const _0x1ca74d=_0x3ac38b;if(_0x93c8aa%_0x524a0c==0x0)_0x100e5e=[];_0x100e5e[_0x1ca74d(0x28b)]({'text':_0x4813ae[_0x1ca74d(0x2d3)]==_0x1ca74d(0x257)?_0x1ca74d(0x2d2):_0x1ca74d(0x26a)+_0x4813ae[_0x1ca74d(0x2d3)],'callback_data':_0x4813ae[_0x1ca74d(0x2d3)]}),_0x93c8aa%_0x524a0c==0x0&&(_0x39047d[_0x40b435]=_0x100e5e,_0x40b435++);}),tgBot['sendMessage'](_0x316c7e['chat']['id'],_0x3ac38b(0x2c3),{'reply_markup':{'inline_keyboard':_0x39047d}})[_0x3ac38b(0x27f)](_0x13fbe4=>{telegramError(_0x13fbe4);}),tgBot['on'](_0x3ac38b(0x2ca),async _0x3f4dd6=>{const _0x341a06=_0x3ac38b,_0x3a2eb2=_0x3f4dd6[_0x341a06(0x273)],_0x33b50a=_0x3f4dd6['message'];tgBot[_0x341a06(0x311)](_0x3f4dd6['id'])[_0x341a06(0x261)](async()=>{const _0x4f35c8=_0x341a06;_0x3a2eb2==_0x4f35c8(0x257)?(tgBot[_0x4f35c8(0x296)](_0x33b50a[_0x4f35c8(0x1ae)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x4f35c8(0x27f)](_0x1abd4c=>{telegramError(_0x1abd4c);}),_0xcbeb0f[_0x4f35c8(0x21c)](_0x8b38cf=>{const _0x29337e=_0x4f35c8;if(_0x8b38cf[_0x29337e(0x2d3)]!=_0x29337e(0x257))toggleBot(_0x8b38cf[_0x29337e(0x2d3)],toggleStatus(_0x8b38cf[_0x29337e(0x2d3)]),'stopped');})):(tgBot[_0x4f35c8(0x296)](_0x33b50a[_0x4f35c8(0x1ae)]['id'],_0x4f35c8(0x21e)+_0x3a2eb2)[_0x4f35c8(0x27f)](_0x32abf1=>{telegramError(_0x32abf1);}),toggleBot(_0x3a2eb2,toggleStatus(_0x3a2eb2),_0x4f35c8(0x250)));}),tgBot[_0x341a06(0x23d)](_0x341a06(0x2ca));});}}),tgBot[_0x46727a(0x27c)](/\/off/,_0x51b9cd=>{const _0x52b3ed=_0x46727a;if(!validateTelegram(_0x51b9cd))return;tgBot[_0x52b3ed(0x23d)](_0x52b3ed(0x2ca));const _0x1cc7df=getEnabledBots();if(_0x1cc7df['length']==0x0)tgBot['sendMessage'](_0x51b9cd[_0x52b3ed(0x1ae)]['id'],_0x52b3ed(0x1ec))['catch'](_0x304109=>{telegramError(_0x304109);});else{if(_0x1cc7df[_0x52b3ed(0x2f6)]>0x1)_0x1cc7df['push']({'botID':_0x52b3ed(0x257)});let _0x6b59e5=[],_0x592c1e=[];const _0x309e72=_0x1cc7df[_0x52b3ed(0x2f6)]%0x4==0x0||_0x1cc7df[_0x52b3ed(0x2f6)]%0x4==0x3||_0x1cc7df['length']%0x3==0x1?0x4:0x3;let _0x42523e=0x0;_0x1cc7df['forEach']((_0x48009e,_0x3c228f)=>{const _0x39655d=_0x52b3ed;if(_0x3c228f%_0x309e72==0x0)_0x592c1e=[];_0x592c1e[_0x39655d(0x28b)]({'text':_0x48009e[_0x39655d(0x2d3)]==_0x39655d(0x257)?'All\x20bots':_0x39655d(0x26a)+_0x48009e[_0x39655d(0x2d3)],'callback_data':_0x48009e[_0x39655d(0x2d3)]}),_0x3c228f%_0x309e72==0x0&&(_0x6b59e5[_0x42523e]=_0x592c1e,_0x42523e++);}),tgBot[_0x52b3ed(0x296)](_0x51b9cd['chat']['id'],_0x52b3ed(0x1b7),{'reply_markup':{'inline_keyboard':_0x6b59e5}})[_0x52b3ed(0x27f)](_0x51bcd3=>{telegramError(_0x51bcd3);}),tgBot['on']('callback_query',async _0x507372=>{const _0x5adae0=_0x52b3ed,_0x5243c4=_0x507372[_0x5adae0(0x273)],_0x23c437=_0x507372[_0x5adae0(0x1c6)];tgBot[_0x5adae0(0x311)](_0x507372['id'])[_0x5adae0(0x261)](async()=>{const _0x4fcc03=_0x5adae0;_0x5243c4==_0x4fcc03(0x257)?(tgBot['sendMessage'](_0x23c437[_0x4fcc03(0x1ae)]['id'],_0x4fcc03(0x299))[_0x4fcc03(0x27f)](_0x1e73a8=>{telegramError(_0x1e73a8);}),_0x1cc7df['forEach'](_0x29bf35=>{const _0x49a02=_0x4fcc03;if(_0x29bf35[_0x49a02(0x2d3)]!=_0x49a02(0x257))toggleBot(_0x29bf35['botID'],toggleStatus(_0x29bf35['botID']),_0x49a02(0x250));})):(tgBot[_0x4fcc03(0x296)](_0x23c437[_0x4fcc03(0x1ae)]['id'],_0x4fcc03(0x28c)+_0x5243c4)[_0x4fcc03(0x27f)](_0x40250e=>{telegramError(_0x40250e);}),toggleBot(_0x5243c4,toggleStatus(_0x5243c4),'stopped'));}),tgBot[_0x5adae0(0x23d)]('callback_query');});}}),tgBot[_0x46727a(0x27c)](/\/portfolio/,_0x476058=>{const _0x4b9eee=_0x46727a;if(!validateTelegram(_0x476058))return;tgBot[_0x4b9eee(0x23d)](_0x4b9eee(0x2ca));const _0x1e72c1=getEnabledBots();if(_0x1e72c1[_0x4b9eee(0x2f6)]==0x0)tgBot['sendMessage'](_0x476058[_0x4b9eee(0x1ae)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x4a4f68=>{telegramError(_0x4a4f68);});else{if(_0x1e72c1[_0x4b9eee(0x2f6)]>0x1){let _0x4f54e7=[],_0x524053=[];const _0x38499b=_0x1e72c1[_0x4b9eee(0x2f6)]%0x4==0x0||_0x1e72c1[_0x4b9eee(0x2f6)]%0x4==0x3||_0x1e72c1[_0x4b9eee(0x2f6)]%0x3==0x1?0x4:0x3;let _0x329126=0x0;_0x1e72c1[_0x4b9eee(0x21c)]((_0x3a639b,_0x407fbf)=>{const _0x17e76d=_0x4b9eee;if(_0x407fbf%_0x38499b==0x0)_0x524053=[];_0x524053[_0x17e76d(0x28b)]({'text':_0x17e76d(0x26a)+_0x3a639b[_0x17e76d(0x2d3)],'callback_data':_0x3a639b['botID']}),_0x407fbf%_0x38499b==0x0&&(_0x4f54e7[_0x329126]=_0x524053,_0x329126++);}),tgBot['sendMessage'](_0x476058[_0x4b9eee(0x1ae)]['id'],_0x4b9eee(0x1c8),{'reply_markup':{'inline_keyboard':_0x4f54e7}})['catch'](_0x721227=>{telegramError(_0x721227);}),tgBot['on'](_0x4b9eee(0x2ca),async _0x46a188=>{const _0x291cb9=_0x4b9eee,_0xc695f0=_0x46a188[_0x291cb9(0x273)],_0xa4edd=_0x46a188[_0x291cb9(0x1c6)];tgBot[_0x291cb9(0x311)](_0x46a188['id'])[_0x291cb9(0x261)](async()=>{const _0x2426b2=_0x291cb9;if(pid[_0xc695f0])pid[_0xc695f0]['send']({'function':_0x2426b2(0x2a9),'args':null});}),tgBot[_0x291cb9(0x23d)]('callback_query');});}else{const _0x38c0cc=_0x1e72c1[0x0]['botID'];if(pid[_0x38c0cc])pid[_0x38c0cc][_0x4b9eee(0x1d0)]({'function':_0x4b9eee(0x2a9),'args':null});}}}),tgBot[_0x46727a(0x27c)](/\/update/,async _0x42b9cb=>{const _0x5a8cc2=_0x46727a;if(!validateTelegram(_0x42b9cb))return;tgBot[_0x5a8cc2(0x23d)](_0x5a8cc2(0x2ca)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x42b9cb[_0x5a8cc2(0x1ae)]['id'],_0x5a8cc2(0x268))['catch'](_0x118817=>{telegramError(_0x118817);});else!validInstallation?tgBot[_0x5a8cc2(0x296)](_0x42b9cb[_0x5a8cc2(0x1ae)]['id'],_0x5a8cc2(0x1bc))[_0x5a8cc2(0x27f)](_0x5245d5=>{telegramError(_0x5245d5);}):(tgBot['sendMessage'](_0x42b9cb[_0x5a8cc2(0x1ae)]['id'],_0x5a8cc2(0x2a3),{'reply_markup':{'inline_keyboard':[[{'text':_0x5a8cc2(0x1de),'callback_data':_0x5a8cc2(0x1d2)},{'text':'No','callback_data':'no'}]]}})[_0x5a8cc2(0x27f)](_0x3c41b4=>{telegramError(_0x3c41b4);}),tgBot['on'](_0x5a8cc2(0x2ca),async _0x2c8858=>{const _0x156124=_0x5a8cc2,_0x53541a=_0x2c8858[_0x156124(0x273)],_0x463233=_0x2c8858[_0x156124(0x1c6)];tgBot[_0x156124(0x311)](_0x2c8858['id'])[_0x156124(0x261)](async()=>{const _0x489b3c=_0x156124;_0x53541a==_0x489b3c(0x1d2)&&(await tgBot[_0x489b3c(0x296)](_0x463233[_0x489b3c(0x1ae)]['id'],_0x489b3c(0x2ed))[_0x489b3c(0x27f)](_0x1dac79=>{telegramError(_0x1dac79);}),updateBB());_0x53541a=='no'&&await tgBot['sendMessage'](_0x463233['chat']['id'],_0x489b3c(0x304))[_0x489b3c(0x27f)](_0x4d2d7d=>{telegramError(_0x4d2d7d);});if(!settings[_0x489b3c(0x1d6)])tgBot[_0x489b3c(0x296)](_0x463233[_0x489b3c(0x1ae)]['id'],_0x489b3c(0x2d9))['catch'](_0x5113f0=>{telegramError(_0x5113f0);});}),tgBot[_0x156124(0x23d)]('callback_query');}));}),tgBot[_0x46727a(0x27c)](/\/toggle/,_0x2534d5=>{const _0xbd9248=_0x46727a;if(!validateTelegram(_0x2534d5))return;tgBot[_0xbd9248(0x23d)](_0xbd9248(0x2ca));const _0x4bf0cd=getBotsWithMode();if(_0x4bf0cd[_0xbd9248(0x2f6)]==0x0)tgBot['sendMessage'](_0x2534d5[_0xbd9248(0x1ae)]['id'],_0xbd9248(0x1ec))['catch'](_0x2d1d44=>{telegramError(_0x2d1d44);});else{let _0x2dab67=[],_0x2fb7c4=[];const _0x4f990a=0x2;let _0x33f7a=0x0;_0x4bf0cd[_0xbd9248(0x21c)]((_0xeb5a17,_0x3af7d4)=>{const _0x476d76=_0xbd9248;if(_0x3af7d4%_0x4f990a==0x0)_0x2fb7c4=[];_0x2fb7c4[_0x476d76(0x28b)]({'text':'Bot\x20'+_0xeb5a17[_0x476d76(0x2d3)]+'\x20('+_0xeb5a17['mode']+')','callback_data':_0xeb5a17[_0x476d76(0x2d3)]}),_0x3af7d4%_0x4f990a==0x0&&(_0x2dab67[_0x33f7a]=_0x2fb7c4,_0x33f7a++);}),tgBot[_0xbd9248(0x296)](_0x2534d5[_0xbd9248(0x1ae)]['id'],_0xbd9248(0x286),{'reply_markup':{'inline_keyboard':_0x2dab67}})[_0xbd9248(0x27f)](_0x5996b0=>{telegramError(_0x5996b0);}),tgBot['on']('callback_query',async _0x4caef6=>{const _0x3a9767=_0xbd9248,_0x2a960d=_0x4caef6[_0x3a9767(0x273)],_0x3e3cb2=_0x4caef6['message'];tgBot[_0x3a9767(0x311)](_0x4caef6['id'])[_0x3a9767(0x261)](async()=>{const _0x2ecc23=_0x3a9767,_0x4f4dab=_0x4bf0cd[_0x2ecc23(0x2e5)](_0x4390f2=>_0x4390f2[_0x2ecc23(0x2d3)]==_0x2a960d),_0x5476e4=_0x4f4dab[_0x2ecc23(0x2a0)]==_0x2ecc23(0x202)?_0x2ecc23(0x27a):_0x2ecc23(0x202);tgBot[_0x2ecc23(0x296)](_0x3e3cb2['chat']['id'],_0x2ecc23(0x219)+_0x2a960d+_0x2ecc23(0x22b)+_0x5476e4+_0x2ecc23(0x2ae))[_0x2ecc23(0x27f)](_0x24b26d=>{telegramError(_0x24b26d);}),toggleBotMode(_0x2a960d);}),tgBot['removeListener'](_0x3a9767(0x2ca));});}}),tgBot[_0x46727a(0x27c)](/\/names/,_0x32ee36=>{const _0x137dfe=_0x46727a;if(!validateTelegram(_0x32ee36))return;let _0x4cf690='';config[_0x137dfe(0x21c)](_0x71040e=>{const _0x30ae82=_0x137dfe;_0x4cf690+=_0x30ae82(0x26a)+_0x71040e[_0x30ae82(0x2d3)]+':\x20'+_0x71040e[_0x30ae82(0x1b5)]+'\x0a';}),tgBot[_0x137dfe(0x296)](_0x32ee36[_0x137dfe(0x1ae)]['id'],_0x4cf690,{'parse_mode':_0x137dfe(0x25f)})['catch'](_0xd4ad11=>{telegramError(_0xd4ad11);});}),tgBot[_0x46727a(0x27c)](/\/disable/,_0x2d98ad=>{const _0x2c7097=_0x46727a;if(!validateTelegram(_0x2d98ad))return;tgBot['sendMessage'](_0x2d98ad[_0x2c7097(0x1ae)]['id'],_0x2c7097(0x2cb))[_0x2c7097(0x27f)](_0x16e340=>{telegramError(_0x16e340);}),updateSetting(_0x2c7097(0x230),![]);}),tgBot[_0x46727a(0x27c)](/\/help/,_0x468735=>{const _0xcddce4=_0x46727a;if(!validateTelegram(_0x468735))return;tgBot[_0xcddce4(0x296)](_0x468735[_0xcddce4(0x1ae)]['id'],_0x18d3ab)['catch'](_0x45e6d0=>{telegramError(_0x45e6d0);});}),tgBot['on'](_0x46727a(0x1db),_0x572d88=>{const _0x50588e=_0x46727a;_0x572d88[_0x50588e(0x25a)]()[_0x50588e(0x305)](_0x50588e(0x272))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x50588e(0x290))[_0x50588e(0x2b3)](_0x50588e(0x25e),'Invalid\x20Telegram\x20token'));}),process['once'](_0x46727a(0x2d7),()=>{const _0x1fbacb=_0x46727a;if(tgBot)tgBot['stopPolling']();process[_0x1fbacb(0x20d)](0x1);}),process['once'](_0x46727a(0x217),()=>{const _0x159793=_0x46727a;if(tgBot)tgBot[_0x159793(0x220)]();process[_0x159793(0x20d)](0x1);});}}function disableTelegram(){const _0xed3a4c=_0x454b7e;tgBot&&(tgBot[_0xed3a4c(0x220)](),tgBot=null);}function sendTelegram(_0x2c3c08,_0x29bed2){const _0x143055=_0x454b7e;if(settings[_0x143055(0x230)]){if(settings[_0x143055(0x211)]==_0x143055(0x257)||(_0x29bed2[_0x143055(0x264)]==_0x143055(0x2e2)||_0x29bed2[_0x143055(0x264)]==_0x143055(0x2d6))&&settings['telegramEvents']==_0x143055(0x284)||_0x29bed2[_0x143055(0x264)]==_0x143055(0x288)&&settings[_0x143055(0x211)]==_0x143055(0x1d3)){if(tgBot&&settings[_0x143055(0x1d6)]){if(_0x29bed2[_0x143055(0x300)])tgBot[_0x143055(0x296)](settings[_0x143055(0x1d6)],_0x29bed2[_0x143055(0x1b5)]+'\x20>\x20'+_0x29bed2['event'])[_0x143055(0x27f)](_0x682300=>{telegramError(_0x682300);});else tgBot[_0x143055(0x296)](settings[_0x143055(0x1d6)],_0x143055(0x26a)+_0x2c3c08+'\x20>\x20'+_0x29bed2['event'])['catch'](_0x2b017c=>{telegramError(_0x2b017c);});}}}}async function sendTelegramMsg(_0x1072ef,_0x5dca60=_0x454b7e(0x25f)){const _0x55ba16=_0x454b7e;return settings[_0x55ba16(0x230)]&&tgBot&&settings[_0x55ba16(0x1d6)]?(await tgBot['sendMessage'](settings[_0x55ba16(0x1d6)],_0x1072ef,{'parse_mode':_0x5dca60})['catch'](_0x37d46c=>{telegramError(_0x37d46c);}),!![]):![];}function getDeviceWithIp(_0x4de0be){const _0x32a4b5=_0x454b7e;return devices[_0x32a4b5(0x2e5)](_0x1d841d=>_0x1d841d['ip']===_0x4de0be);}function temporaryAccess2FA(_0x19b537,_0x3d6f1f){const _0x12dc87=_0x454b7e;let _0x2306ba=new Date(),_0x33a158=![];if(lastIpApproval){if(_0x2306ba-lastIpApproval<0x1388)_0x33a158=!![];}lastIpApproval=new Date();if(_0x33a158)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x12dc87(0x2ca)),tgBot['sendMessage'](settings[_0x12dc87(0x1d6)],_0x12dc87(0x294)+normalizeIP(_0x3d6f1f)['show']+_0x12dc87(0x2d5),{'parse_mode':_0x12dc87(0x25f),'reply_markup':{'inline_keyboard':[[{'text':_0x12dc87(0x2ad),'callback_data':'5'},{'text':_0x12dc87(0x1d5),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x12dc87(0x25d),'callback_data':_0x12dc87(0x25d)}]]}})[_0x12dc87(0x27f)](_0x4a982c=>{telegramError(_0x4a982c);}),tgBot['on'](_0x12dc87(0x2ca),async _0x381065=>{const _0x38daff=_0x12dc87,_0x37c029=_0x381065[_0x38daff(0x273)],_0x1858e3=_0x381065[_0x38daff(0x1c6)];tgBot['answerCallbackQuery'](_0x381065['id'])['then'](async()=>{const _0x28c553=_0x38daff;devices[_0x19b537][_0x28c553(0x275)]={'clientip':_0x3d6f1f,'timestamp':new Date()[_0x28c553(0x1e0)](),'expiry':_0x37c029},_0x37c029!=_0x28c553(0x25d)?(await tgBot['sendMessage'](_0x1858e3['chat']['id'],_0x28c553(0x1ab)+_0x37c029+_0x28c553(0x29c),{'parse_mode':_0x28c553(0x25f)})['catch'](_0x1f57c1=>{telegramError(_0x1f57c1);}),io['to'](_0x19b537)[_0x28c553(0x2b3)](_0x28c553(0x21f),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x28c553(0x296)](_0x1858e3[_0x28c553(0x1ae)]['id'],'Temporary\x20access\x20rejected')[_0x28c553(0x27f)](_0x5570a7=>{telegramError(_0x5570a7);}),io['to'](_0x19b537)[_0x28c553(0x2b3)]('status',{'access':{'allow':![],'reason':_0x28c553(0x313),'token':null}}));}),tgBot[_0x38daff(0x23d)](_0x38daff(0x2ca));}));}function loginAccess2FA(_0x49f82e,_0xc03373){const _0x364532=_0x454b7e;tgBot&&settings['telegramChatId']&&(tgBot[_0x364532(0x23d)](_0x364532(0x2ca)),tgBot['sendMessage'](settings[_0x364532(0x1d6)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0xc03373)['show']+_0x364532(0x2d5),{'parse_mode':_0x364532(0x25f),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x364532(0x25d),'callback_data':_0x364532(0x25d)}]]}})['catch'](_0x4d744a=>{telegramError(_0x4d744a);}),tgBot['on'](_0x364532(0x2ca),async _0x2a9ff0=>{const _0x3bd399=_0x364532,_0x5ea2eb=_0x2a9ff0[_0x3bd399(0x273)],_0x3625e1=_0x2a9ff0[_0x3bd399(0x1c6)];tgBot['answerCallbackQuery'](_0x2a9ff0['id'])[_0x3bd399(0x261)](async()=>{const _0x409480=_0x3bd399;devices[_0x49f82e]['telegram2FaApproval']={'clientip':_0xc03373,'timestamp':new Date()['getTime'](),'expiry':_0x5ea2eb},_0x5ea2eb!=_0x409480(0x25d)?(await tgBot[_0x409480(0x296)](_0x3625e1[_0x409480(0x1ae)]['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0x409480(0x27f)](_0x1435cc=>{telegramError(_0x1435cc);}),io['to'](_0x49f82e)['emit']('status',{'access':{'allow':![],'reason':_0x409480(0x2fd),'token':null}})):(await tgBot[_0x409480(0x296)](_0x3625e1[_0x409480(0x1ae)]['id'],_0x409480(0x244))[_0x409480(0x27f)](_0x3895aa=>{telegramError(_0x3895aa);}),io['to'](_0x49f82e)[_0x409480(0x2b3)]('status',{'access':{'allow':![],'reason':_0x409480(0x2af),'token':null}}));}),tgBot[_0x3bd399(0x23d)](_0x3bd399(0x2ca));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2a4ae7=_0x454b7e;return dbConfig[_0x2a4ae7(0x23c)](_0x2a4ae7(0x2a8))[_0x2a4ae7(0x20e)](_0x2a4ae7(0x2d3))[_0x2a4ae7(0x29b)]({'status':_0x2a4ae7(0x1f7)})['value']()||[];}function getDisabledBots(){const _0x2b6dd6=_0x454b7e;return dbConfig[_0x2b6dd6(0x23c)]('bots')[_0x2b6dd6(0x20e)](_0x2b6dd6(0x2d3))['filter']({'status':'disabled'})[_0x2b6dd6(0x328)]()||[];}function getBotsWithMode(){const _0x2acac6=_0x454b7e,_0x380cdb=dbConfig[_0x2acac6(0x23c)](_0x2acac6(0x2a8))[_0x2acac6(0x20e)]('botID')[_0x2acac6(0x328)]()||[];return _0x380cdb[_0x2acac6(0x21c)](_0x479208=>{const _0x391041=_0x2acac6,_0x32234d=configpath+_0x391041(0x31d)+_0x479208[_0x391041(0x2d3)]+_0x391041(0x2bd),_0x1405d4=fs['existsSync'](_0x32234d);if(_0x1405d4){const _0x50889a=fs[_0x391041(0x302)](_0x32234d);try{const _0x555b1e=JSON['parse'](_0x50889a),_0x4dde88=_0x555b1e?_0x555b1e[_0x391041(0x225)][0x0][_0x391041(0x224)]:![];_0x479208[_0x391041(0x2a0)]=_0x4dde88?'auto':_0x391041(0x27a);}catch(_0x2b7766){_0x479208['mode']='manual';}}else _0x479208[_0x391041(0x2a0)]=_0x391041(0x27a);}),_0x380cdb;}async function initUser(){const _0x155406=_0x454b7e;if(!settings[_0x155406(0x325)]){const _0x526393=uuidRandom();mixpanel[_0x155406(0x2a7)](_0x526393),updateSetting(_0x155406(0x325),_0x526393);}}async function initSecure(){const _0x342497=_0x454b7e;let _0x29f47c=getSecure();if(!_0x29f47c[_0x342497(0x31a)](_0x342497(0x1bb))){let _0x1a5a00=await generateKeys();_0x29f47c[_0x342497(0x285)]=_0x1a5a00['publicKey'],_0x29f47c[_0x342497(0x227)]=_0x1a5a00[_0x342497(0x227)],_0x29f47c[_0x342497(0x1bb)]=crypto[_0x342497(0x2ee)](0x20)[_0x342497(0x25a)]('hex');;storeSecure(_0x29f47c);}}function getSettings(){const _0x55ca16=_0x454b7e;return dbSettings[_0x55ca16(0x23c)]('settings')[_0x55ca16(0x328)]()||{};}function getSecure(){const _0x4aa73f=_0x454b7e;return dbSecure[_0x4aa73f(0x23c)](_0x4aa73f(0x215))[_0x4aa73f(0x328)]()||{};}function getBlacklist(){const _0x22b9ee=_0x454b7e;return dbSecure['get'](_0x22b9ee(0x1c9))[_0x22b9ee(0x328)]()||[];}function broadcastToBots(_0x17d350,_0x6e6f66){const _0x1cb5c3=_0x454b7e;config[_0x1cb5c3(0x21c)](_0x44d24a=>{const _0x1b282b=_0x1cb5c3;if(_0x44d24a[_0x1b282b(0x21f)]=='enabled'&&_0x44d24a[_0x1b282b(0x27e)]==_0x1b282b(0x319)){if(pid[_0x44d24a[_0x1b282b(0x2d3)]])pid[_0x44d24a['botID']][_0x1b282b(0x1d0)]({[_0x17d350]:_0x6e6f66});}});}function storeSettings(_0x18d5eb,_0x3885a4=![]){const _0x4b9590=_0x454b7e;_0x18d5eb={...settings,..._0x18d5eb};if(_0x3885a4&&_0x18d5eb[_0x4b9590(0x293)]!='************'&&_0x18d5eb[_0x4b9590(0x293)]!=''){const _0x133006=crypt[_0x4b9590(0x1e7)](secure[_0x4b9590(0x227)],_0x18d5eb['bbPassword'])['message'][_0x4b9590(0x20b)]('@')[0x0],_0x34db53=bcrypt[_0x4b9590(0x226)](_0x133006,saltRounds);_0x18d5eb={..._0x18d5eb,'bbPassword':_0x34db53};}if(_0x3885a4&&_0x18d5eb['telegramToken']!=_0x4b9590(0x1d4)&&_0x18d5eb['telegramToken']!=''){const _0x246918=crypt[_0x4b9590(0x1e7)](secure[_0x4b9590(0x227)],_0x18d5eb[_0x4b9590(0x21a)])[_0x4b9590(0x1c6)][_0x4b9590(0x20b)]('@')[0x0];_0x18d5eb={..._0x18d5eb,'telegramToken':_0x246918};}const _0x5a4fb2=_0x18d5eb[_0x4b9590(0x21a)]!=_0x4b9590(0x1d4)&&_0x18d5eb['telegramToken']!=settings[_0x4b9590(0x21a)]||_0x18d5eb['telegramUsername']!=settings[_0x4b9590(0x28a)],_0x5ee550=_0x18d5eb['telegramToken']==''||_0x18d5eb[_0x4b9590(0x28a)]=='';if(_0x5a4fb2)_0x18d5eb[_0x4b9590(0x211)]=_0x4b9590(0x257);for(const [_0x4afcc7,_0x4f0eb7]of Object['entries'](_0x18d5eb)){if(_0x4afcc7=='telegramToken'&&_0x4f0eb7==_0x4b9590(0x1d4)){_0x18d5eb[_0x4b9590(0x21a)]=settings[_0x4b9590(0x21a)];continue;};if(_0x4afcc7==_0x4b9590(0x293)&&_0x4f0eb7=='************'){_0x18d5eb[_0x4b9590(0x293)]=settings['bbPassword'];continue;};dbSettings['set'](_0x4b9590(0x1f4)+_0x4afcc7,_0x4f0eb7)[_0x4b9590(0x30f)]();}settings=_0x18d5eb,io['to']('botmanager')['emit'](_0x4b9590(0x212),cleanSettings()),broadcastToBots(_0x4b9590(0x1dc),settings[_0x4b9590(0x1dc)]);if(_0x5a4fb2&&!_0x5ee550)initTelegram();if(_0x5a4fb2&&_0x5ee550)disableTelegram();getAllClients()[_0x4b9590(0x21c)](_0xb545c7=>{const _0x3a7337=_0x4b9590;getSocket(_0xb545c7['id'])[_0x3a7337(0x2b3)](_0x3a7337(0x21f),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x5773ee,_0x51f4b2){const _0x38e293=_0x454b7e;dbSettings['set'](_0x38e293(0x1f4)+_0x5773ee,_0x51f4b2)[_0x38e293(0x30f)](),settings=getSettings(),io['to'](_0x38e293(0x290))[_0x38e293(0x2b3)]('settings',cleanSettings());}function storeSecure(_0x5b3d33){const _0x5a7568=_0x454b7e;dbSecure['get'](_0x5a7568(0x215))['push'](_0x5b3d33)[_0x5a7568(0x30f)](),secure=_0x5b3d33;}function addBlacklist(_0x6e51df){const _0x364b51=_0x454b7e;cleanBlacklist();let _0x18b708;devices[_0x6e51df]['telegramIpApproval']?_0x18b708=Math[_0x364b51(0x2dd)](devices[_0x6e51df]['telegramIpApproval'][_0x364b51(0x2be)],loginExpiry):_0x18b708=loginExpiry,dbSecure[_0x364b51(0x23c)](_0x364b51(0x1c9))['push']({'expiry':new Date()[_0x364b51(0x1e0)]()+_0x18b708*0x3c*0x3e8,'token':devices[_0x6e51df][_0x364b51(0x235)][_0x364b51(0x26b)]})['write'](),blacklist=dbSecure[_0x364b51(0x23c)](_0x364b51(0x1c9))[_0x364b51(0x328)]();}function cleanBlacklist(){const _0x1e044f=_0x454b7e;let _0x417ad7=dbSecure[_0x1e044f(0x23c)](_0x1e044f(0x1c9))[_0x1e044f(0x1e9)]()['value'](),_0x156845=new Date()['getTime']();_0x417ad7['forEach'](_0x17a32c=>{const _0x28c17d=_0x1e044f;_0x17a32c['expiry']<_0x156845&&dbSecure['get'](_0x28c17d(0x1c9))['remove']({'expiry':_0x17a32c['expiry']})[_0x28c17d(0x30f)]();});}function initStates(){const _0x480254=_0x454b7e;let _0x2f62ce=getConfiguration();_0x2f62ce[_0x480254(0x21c)](_0x2ee64c=>{const _0x59c209=_0x480254;_0x2ee64c[_0x59c209(0x27e)]='stopped';}),storeConfiguration(_0x2f62ce);}function onKeys(){const _0x592d02=new RSA();return new Promise(_0x97daa3=>{const _0x20b3d9=_0x47ad;_0x592d02[_0x20b3d9(0x1ef)]()[_0x20b3d9(0x261)](_0x24a0e7=>{_0x97daa3(_0x24a0e7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3ac1b4=_0x454b7e;let _0x3c9f98=getSettings(),_0x31d00d=![];!_0x3c9f98['hasOwnProperty']('lastmsgtelegram')&&(_0x3c9f98[_0x3ac1b4(0x206)]=0x0,_0x31d00d=!![]);!_0x3c9f98[_0x3ac1b4(0x31a)](_0x3ac1b4(0x2c7))&&(_0x3c9f98['lastmsgemitted']=0x0,_0x31d00d=!![]);!_0x3c9f98[_0x3ac1b4(0x31a)](_0x3ac1b4(0x249))&&(_0x3c9f98[_0x3ac1b4(0x249)]=_0x3ac1b4(0x1fb),_0x31d00d=!![]);if(_0x31d00d)storeSettings(_0x3c9f98);}function storeConfiguration(_0x2a97b8){const _0x540522=_0x454b7e;dbConfig[_0x540522(0x23c)](_0x540522(0x2a8))[_0x540522(0x2ce)]()[_0x540522(0x30f)](),_0x2a97b8[_0x540522(0x21c)](_0x1ee044=>{const _0x41cfe4=_0x540522;delete _0x1ee044[_0x41cfe4(0x2a0)];}),dbConfig['get'](_0x540522(0x2a8))[_0x540522(0x28b)](..._0x2a97b8)[_0x540522(0x30f)](),config=_0x2a97b8;}function resetPassword(){const _0x2794e6=_0x454b7e;tgBot&&settings['telegramChatId']&&(tgBot[_0x2794e6(0x23d)](_0x2794e6(0x2ca)),tgBot[_0x2794e6(0x296)](settings[_0x2794e6(0x1d6)],_0x2794e6(0x2d8),{'parse_mode':_0x2794e6(0x25f),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2794e6(0x1d2)},{'text':'no','callback_data':'no'}]]}})[_0x2794e6(0x27f)](_0x5750c9=>{telegramError(_0x5750c9);}),tgBot['on'](_0x2794e6(0x2ca),async _0x3e158c=>{const _0x29443f=_0x2794e6,_0x1f08d1=_0x3e158c[_0x29443f(0x273)],_0x22764b=_0x3e158c['message'];tgBot['answerCallbackQuery'](_0x3e158c['id'])['then'](async()=>{const _0x10c9ef=_0x29443f;if(_0x1f08d1!='no'){const _0x19b18f=0xf,_0x417551=_0x10c9ef(0x2ef),_0x3c1f41=Array[_0x10c9ef(0x1ac)](crypto[_0x10c9ef(0x269)](new Uint32Array(_0x19b18f)))[_0x10c9ef(0x326)](_0x56132e=>_0x417551[_0x56132e%_0x417551[_0x10c9ef(0x2f6)]])[_0x10c9ef(0x20f)](''),_0x50dff2=bcrypt[_0x10c9ef(0x226)](_0x3c1f41,saltRounds);storeSettings({'bbPassword':_0x50dff2}),await tgBot[_0x10c9ef(0x296)](_0x22764b['chat']['id'],_0x10c9ef(0x1a9)+_0x3c1f41,{'parse_mode':'HTML'})[_0x10c9ef(0x27f)](_0x170c6b=>{telegramError(_0x170c6b);});}else await tgBot['sendMessage'](_0x22764b[_0x10c9ef(0x1ae)]['id'],_0x10c9ef(0x265))[_0x10c9ef(0x27f)](_0xaf2a75=>{telegramError(_0xaf2a75);});}),tgBot['removeListener']('callback_query');}));}function logging(_0x4d997b){const _0x37f306=_0x454b7e;console[_0x37f306(0x209)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4d997b);if(tgBot&&settings[_0x37f306(0x1d6)]&&settings[_0x37f306(0x211)]!=_0x37f306(0x1d3))tgBot[_0x37f306(0x296)](settings['telegramChatId'],_0x37f306(0x274)+_0x4d997b)[_0x37f306(0x27f)](_0x2527bd=>{telegramError(_0x2527bd);});}function getServerTime(){const _0x2ca1df=_0x454b7e,_0x3e85f0=new Date();return _0x3e85f0['getFullYear']()+'/'+(_0x3e85f0[_0x2ca1df(0x1d7)]()+0x1)[_0x2ca1df(0x25a)]()[_0x2ca1df(0x23b)](0x2,'0')+'/'+_0x3e85f0[_0x2ca1df(0x254)]()[_0x2ca1df(0x25a)]()[_0x2ca1df(0x23b)](0x2,'0')+'\x20'+_0x3e85f0[_0x2ca1df(0x1ee)]()[_0x2ca1df(0x25a)]()[_0x2ca1df(0x23b)](0x2,'0')+':'+_0x3e85f0[_0x2ca1df(0x1e5)]()[_0x2ca1df(0x25a)]()[_0x2ca1df(0x23b)](0x2,'0')+':'+_0x3e85f0[_0x2ca1df(0x2ea)]()[_0x2ca1df(0x25a)]()[_0x2ca1df(0x23b)](0x2,'0');}function getTimeStamp(){const _0x37bccd=_0x454b7e,_0x4dbad3=shiftedTime();return _0x4dbad3[_0x37bccd(0x210)]()+'/'+(_0x4dbad3['getMonth']()+0x1)[_0x37bccd(0x25a)]()[_0x37bccd(0x23b)](0x2,'0')+'/'+_0x4dbad3[_0x37bccd(0x254)]()['toString']()[_0x37bccd(0x23b)](0x2,'0')+'\x20'+_0x4dbad3[_0x37bccd(0x1ee)]()['toString']()['padStart'](0x2,'0')+':'+_0x4dbad3['getMinutes']()['toString']()[_0x37bccd(0x23b)](0x2,'0')+':'+_0x4dbad3[_0x37bccd(0x2ea)]()[_0x37bccd(0x25a)]()['padStart'](0x2,'0');}function shiftedTime(){const _0xf4cbb4=_0x454b7e,_0x5547d2=new Date();let _0x508665=_0x5547d2;if(settings[_0xf4cbb4(0x1dc)]&&settings['timeshift']!==0x0)_0x508665=fns['add'](_0x5547d2,{'hours':settings[_0xf4cbb4(0x1dc)]});return _0x508665;}function startScheduler(){const _0x4c2c20=_0x454b7e;let _0x460dc7=new Date()[_0x4c2c20(0x259)]();_0x460dc7==0x1&&backupConfigFiles();_0x460dc7==0x9&&triggerAnalytics();_0x460dc7%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x200a48=_0x454b7e;fs[_0x200a48(0x2ba)](configpath,{'withFileTypes':!![]})[_0x200a48(0x21c)](_0x36fc54=>{const _0x2b5fa6=_0x200a48;if(!_0x36fc54[_0x2b5fa6(0x1b3)]())fs[_0x2b5fa6(0x2b7)](configpath+_0x36fc54[_0x2b5fa6(0x1f5)],configbackuppath+_0x36fc54[_0x2b5fa6(0x1f5)]);});}async function getPublicIp(){const _0xdfe8b9=_0x454b7e;try{const _0x2ba383=await axios[_0xdfe8b9(0x23c)]('https://api.ipify.org?format=json');publicip=_0x2ba383['data']['ip'];}catch(_0x3327ec){}}async function triggerAnalytics(_0x376b96=![]){const _0x3d3d45=_0x454b7e;if(!publicip)await getPublicIp();const _0x25b4ec=getBotsWithMode();let _0x4caeb4=0x0;_0x25b4ec[_0x3d3d45(0x21c)](_0x46fa90=>{if(_0x46fa90['status']==='enabled')_0x4caeb4++;}),mixpanel[_0x3d3d45(0x247)](_0x3d3d45(0x251),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x25b4ec[_0x3d3d45(0x2f6)],'numbotsenabled':_0x4caeb4}),!_0x376b96&&analytics[_0x3d3d45(0x2d1)]({'title':'Balance\x20Bot\x20Server','href':_0x3d3d45(0x25b),'path':'/v'+serverversion});}async function getMessages(){const _0x183c53=_0x454b7e,_0x1cabc4=_0x183c53(0x292),_0x2b3ba9=new GraphQLClient(_0x1cabc4),_0x20b3c2={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x26f6a=serverversion[_0x183c53(0x20b)]('.'),_0x49bf55=_0x26f6a[0x0]+'.'+_0x26f6a[0x1],_0x22f10c=Math[_0x183c53(0x2c5)](settings[_0x183c53(0x206)],settings['lastmsgemitted']),_0x456e10={'last':parseInt(_0x22f10c),'bbm':_0x49bf55},_0x550032=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3f0d6b;try{_0x3f0d6b=await _0x2b3ba9[_0x183c53(0x2bf)](_0x550032,_0x456e10,_0x20b3c2);}catch(_0x2d32fb){}if(_0x3f0d6b&&_0x3f0d6b[_0x183c53(0x228)]){let _0x1fdaf9=settings[_0x183c53(0x206)];newMessages=[];for(const _0x2659c0 of _0x3f0d6b[_0x183c53(0x228)]){newMessages[_0x183c53(0x28b)](_0x2659c0);if(_0x2659c0[_0x183c53(0x327)])updateSetting(_0x183c53(0x249),_0x2659c0[_0x183c53(0x327)]);let _0x1bcb2d=_0x2659c0[_0x183c53(0x327)]?serverversion>=_0x2659c0[_0x183c53(0x327)]:![];if(!_0x1bcb2d&&_0x2659c0[_0x183c53(0x2fa)]>_0x1fdaf9){if(_0x2659c0[_0x183c53(0x1fa)]===_0x183c53(0x276)||serverversion[_0x183c53(0x1ad)](_0x2659c0[_0x183c53(0x1fa)])){let _0x3b138b=''+_0x2659c0[_0x183c53(0x310)]+'\x0a\x0a'+_0x2659c0[_0x183c53(0x1c6)];const _0x1170e6=await sendTelegramMsg(toTelegramMarkdown(_0x3b138b),_0x183c53(0x2db));if(_0x1170e6)_0x1fdaf9=_0x2659c0[_0x183c53(0x2fa)];}}}updateAvailable=isNewerVersion(settings[_0x183c53(0x249)],serverversion),updateSetting('lastmsgtelegram',_0x1fdaf9),emitMessages();}}function emitMessages(){const _0x4b839b=_0x454b7e,_0x261cb4=settings[_0x4b839b(0x2c7)];let _0x16d34d=[];newMessages[_0x4b839b(0x21c)](_0x6007e4=>{const _0x717d70=_0x4b839b;_0x6007e4['number']>_0x261cb4&&_0x16d34d[_0x717d70(0x28b)](_0x6007e4);}),_0x16d34d['length']>0x0&&getAllClients()['forEach'](_0x3404cc=>{const _0x48e55a=_0x4b839b;getSocket(_0x3404cc['id'])[_0x48e55a(0x2b3)](_0x48e55a(0x1c6),_0x16d34d);});}function confirmMessage(_0x3a876c){const _0x5497de=_0x454b7e;updateSetting(_0x5497de(0x2c7),Number(_0x3a876c));}function isNewerVersion(_0x155f51,_0x3fb8a8){const _0xfe195d=_0x454b7e,_0x3a973c=_0x3fb8a8['split']('.'),_0x5bdd6e=_0x155f51[_0xfe195d(0x20b)]('.');for(var _0x1ee0e7=0x0;_0x1ee0e7<_0x5bdd6e[_0xfe195d(0x2f6)];_0x1ee0e7++){const _0x5727d5=~~_0x5bdd6e[_0x1ee0e7],_0x532933=~~_0x3a973c[_0x1ee0e7];if(_0x5727d5>_0x532933)return!![];if(_0x5727d5<_0x532933)return![];}return![];}function toTelegramMarkdown(_0x1516cd){const _0x14c8f0=_0x454b7e,_0x51489c=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1f33f9=/\*{2}(.+?)\*{2}/gim;return _0x1516cd=_0x1516cd[_0x14c8f0(0x263)](_0x51489c,_0x14c8f0(0x1f6))[_0x14c8f0(0x263)](_0x1f33f9,_0x14c8f0(0x1b2)),_0x1516cd;}function validateCredentials(_0x943e76,_0x143447){const _0x3c7e9c=_0x454b7e;if(_0x943e76['username']==settings[_0x3c7e9c(0x1e1)]&&bcrypt[_0x3c7e9c(0x2f7)](_0x943e76[_0x3c7e9c(0x291)],settings[_0x3c7e9c(0x293)])){if(settings[_0x3c7e9c(0x280)])return{'allow':![],'reason':_0x3c7e9c(0x314),'token':null};else{const _0x60feca=generateLoginToken(_0x143447);return{'allow':!![],'reason':_0x3c7e9c(0x241),'token':_0x60feca};}}else return{'allow':![],'reason':_0x3c7e9c(0x306),'token':null};}function refreshToken(_0x18630e){const _0x5391b8=_0x454b7e,_0x573bc3=generateLoginToken(_0x18630e);return{'allow':!![],'reason':_0x5391b8(0x241),'token':_0x573bc3};}function validateAccess(_0x2ad800,_0x5bacda){const _0x13b7ee=_0x454b7e;let _0x50d647=devices[_0x5bacda]['ip'],_0x251eb1;const _0x65c81f=_0x50548c=>{const _0x45af42=_0x47ad;if(settings[_0x45af42(0x26c)]){if(settings[_0x45af42(0x280)]){if(telegram2FaApproved(_0x5bacda)){const _0x14dd8d=generateLoginToken(_0x5bacda);return{'allow':!![],'reason':_0x45af42(0x31e),'token':_0x14dd8d};}else return{'allow':![],'reason':_0x45af42(0x282),'token':null};}else return _0x251eb1=validToken(_0x50548c,_0x5bacda),_0x251eb1[_0x45af42(0x31a)](_0x45af42(0x2d6))?{'allow':!![],'reason':_0x45af42(0x2cf),'token':_0x50548c}:{'allow':![],'reason':_0x45af42(0x282),'token':null};}else return{'allow':!![],'reason':_0x45af42(0x222),'token':null};};if(settings[_0x13b7ee(0x2f1)]){let _0x12daba=[...settings[_0x13b7ee(0x312)],_0x13b7ee(0x321),'::ffff:127.0.0.1',_0x13b7ee(0x31c)];if(_0x12daba[_0x13b7ee(0x305)](_0x50d647))return _0x65c81f(_0x2ad800);else{_0x251eb1=validToken(_0x2ad800,_0x5bacda);if(_0x251eb1[_0x13b7ee(0x31a)]('success'))return _0x65c81f(_0x2ad800);else{if(telegramIpApproved(_0x5bacda)){const _0x5ee7e3=generateToken(_0x5bacda);return _0x251eb1=_0x65c81f(_0x2ad800),_0x251eb1['allow']?{'allow':!![],'reason':_0x13b7ee(0x2aa),'token':_0x5ee7e3}:_0x251eb1;}else return settings[_0x13b7ee(0x1e4)]?{'allow':![],'reason':_0x13b7ee(0x2b2),'token':null}:{'allow':![],'reason':_0x13b7ee(0x2ff),'token':null};}}}else return _0x65c81f(_0x2ad800);}function timelyDecrypt(_0x3f020d,_0x3f0ebd=!![]){const _0x38301d=_0x454b7e;if(_0x3f020d)try{const _0x522dad=crypt[_0x38301d(0x1e7)](secure[_0x38301d(0x227)],_0x3f020d)['message'],_0x441508=_0x522dad[_0x38301d(0x20b)]('@')[0x0],_0x20bbf0=_0x522dad[_0x38301d(0x20b)]('@')[0x1],_0x5befcf=new Date()[_0x38301d(0x1e0)]();if(_0x3f0ebd){if(_0x5befcf-_0x20bbf0<maxSecretAge*0x3e8)return _0x441508;else return![];}else return _0x441508;}catch(_0x8c1d83){return![];}else return![];}function _0x47ad(_0x42eb3a,_0x19ad34){const _0x1a6108=_0x479f();return _0x47ad=function(_0x2a2c6c,_0xdf6455){_0x2a2c6c=_0x2a2c6c-0x1a9;let _0x479f10=_0x1a6108[_0x2a2c6c];return _0x479f10;},_0x47ad(_0x42eb3a,_0x19ad34);}const validToken=(_0x124d50,_0x512c71)=>{const _0xffed61=_0x454b7e,_0x2774c4=devices[_0x512c71]['ip'];if(!_0x124d50)return{'error':'No\x20authentication\x20token'};for(let _0x5a0159 of blacklist){if(_0x5a0159[_0xffed61(0x26b)]==_0x124d50)return{'error':'Token\x20blacklisted'};}let _0x2e5c25;try{_0x2e5c25=jwt[_0xffed61(0x2ec)](_0x124d50,secure[_0xffed61(0x1bb)]+_0x512c71);}catch{return{'error':_0xffed61(0x234)};}if(!_0x2e5c25['hasOwnProperty']('clientip')&&!_0x2e5c25[_0xffed61(0x31a)](_0xffed61(0x2f2))||!_0x2e5c25[_0xffed61(0x31a)](_0xffed61(0x1ca)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2e5c25[_0xffed61(0x31a)](_0xffed61(0x2f2))&&_0x2e5c25[_0xffed61(0x31a)]('clientip')){const {clientip:_0x568ee5}=_0x2e5c25;return _0x2774c4==_0x568ee5?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x2e5c25[_0xffed61(0x31a)](_0xffed61(0x2f2))&&_0x2e5c25[_0xffed61(0x31a)](_0xffed61(0x23e))){const {username:_0x5c5080,clientip:_0x430207}=_0x2e5c25;return settings[_0xffed61(0x1e1)]==_0x5c5080&&_0x2774c4==_0x430207?{'success':'User\x20has\x20been\x20validated'}:{'error':_0xffed61(0x2ac)};}}},generateLoginToken=_0x45b79d=>{const _0x99fbfc=_0x454b7e;if(_0x45b79d){const _0xafd87a=devices[_0x45b79d]['ip'];return jwt[_0x99fbfc(0x315)]({'username':settings[_0x99fbfc(0x1e1)],'clientip':_0xafd87a},secure[_0x99fbfc(0x1bb)]+_0x45b79d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4798df=>{const _0x424e77=_0x454b7e;if(_0x4798df){const _0x4b8fa9=devices[_0x4798df]['ip'];return jwt[_0x424e77(0x315)]({'clientip':_0x4b8fa9},secure[_0x424e77(0x1bb)]+_0x4798df,{'expiresIn':devices[_0x4798df][_0x424e77(0x275)][_0x424e77(0x2be)]*0x3c});}else return![];},telegramIpApproved=_0x21ae55=>{const _0x522409=_0x454b7e;let _0x51b3f3=![];return devices[_0x21ae55][_0x522409(0x275)]&&devices[_0x21ae55][_0x522409(0x275)][_0x522409(0x2be)]!=_0x522409(0x25d)&&(_0x51b3f3=devices[_0x21ae55][_0x522409(0x275)][_0x522409(0x23e)]==devices[_0x21ae55]['ip']&&new Date()['getTime']()-devices[_0x21ae55][_0x522409(0x275)][_0x522409(0x2e1)]<devices[_0x21ae55][_0x522409(0x275)][_0x522409(0x2be)]*0x3c*0x3e8),_0x51b3f3;},telegram2FaApproved=_0x25567d=>{const _0x607734=_0x454b7e;let _0x22ba2c=![];return devices[_0x25567d][_0x607734(0x27d)]&&devices[_0x25567d][_0x607734(0x27d)][_0x607734(0x2be)]!=_0x607734(0x25d)&&(_0x22ba2c=devices[_0x25567d][_0x607734(0x27d)][_0x607734(0x23e)]==devices[_0x25567d]['ip']&&new Date()[_0x607734(0x1e0)]()-devices[_0x25567d][_0x607734(0x27d)]['timestamp']<devices[_0x25567d][_0x607734(0x27d)][_0x607734(0x2be)]*0x3c*0x3e8),_0x22ba2c;},normalizeIP=_0x11dfea=>{const _0x244482=_0x454b7e;let _0x2f9d74=null,_0x77649a=null;if(ipaddr[_0x244482(0x30b)](_0x11dfea)){const _0x374143=ipaddr['parse'](_0x11dfea);_0x374143[_0x244482(0x2b6)]()===_0x244482(0x2a1)?(_0x374143[_0x244482(0x216)]()&&(_0x2f9d74=_0x374143[_0x244482(0x23a)]()[_0x244482(0x25a)]()),_0x77649a=_0x374143[_0x244482(0x25a)]()):(_0x2f9d74=_0x374143[_0x244482(0x25a)](),_0x77649a=_0x374143[_0x244482(0x1e6)]()[_0x244482(0x25a)]());}return{'show':_0x2f9d74?_0x2f9d74:_0x77649a,'store':_0x77649a};};function sleep(_0x387eb5){return new Promise(_0x349e4c=>setTimeout(_0x349e4c,_0x387eb5));}