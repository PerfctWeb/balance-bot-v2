const _0x23395e=_0x3706;(function(_0x3d1960,_0x13274e){const _0x6f0d2f=_0x3706,_0x3287fc=_0x3d1960();while(!![]){try{const _0x27a081=-parseInt(_0x6f0d2f(0x208))/0x1+parseInt(_0x6f0d2f(0x9d))/0x2+parseInt(_0x6f0d2f(0x1f8))/0x3*(parseInt(_0x6f0d2f(0xa1))/0x4)+-parseInt(_0x6f0d2f(0x103))/0x5*(-parseInt(_0x6f0d2f(0xa4))/0x6)+-parseInt(_0x6f0d2f(0x227))/0x7*(parseInt(_0x6f0d2f(0x1df))/0x8)+-parseInt(_0x6f0d2f(0xc6))/0x9+parseInt(_0x6f0d2f(0x188))/0xa;if(_0x27a081===_0x13274e)break;else _0x3287fc['push'](_0x3287fc['shift']());}catch(_0x8ad89c){_0x3287fc['push'](_0x3287fc['shift']());}}}(_0x48e7,0xa6524));const _0x163864=function(){let _0x14bdb0=!![];return function(_0x20b5d3,_0xa60039){const _0x1c1e10=_0x14bdb0?function(){const _0x5d6786=_0x3706;if(_0xa60039){const _0x36c9c5=_0xa60039[_0x5d6786(0x19e)](_0x20b5d3,arguments);return _0xa60039=null,_0x36c9c5;}}:function(){};return _0x14bdb0=![],_0x1c1e10;};}(),_0x4fc853=_0x163864(this,function(){const _0x1ce583=_0x3706;return _0x4fc853[_0x1ce583(0x156)]()[_0x1ce583(0x1d5)](_0x1ce583(0xb6))[_0x1ce583(0x156)]()[_0x1ce583(0x1ae)](_0x4fc853)[_0x1ce583(0x1d5)](_0x1ce583(0xb6));});_0x4fc853();'use strict';process['env'][_0x23395e(0xd5)]=0x1;const childProcess=require(_0x23395e(0x11f)),fs=require('fs'),fns=require('date-fns'),low=require(_0x23395e(0x16c)),FileSync=require(_0x23395e(0x129)),path=require(_0x23395e(0x17f)),crypto=require(_0x23395e(0x1ee)),Crypt=require(_0x23395e(0x225))['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x23395e(0x1f5)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x23395e(0x214))(process[_0x23395e(0x150)]['slice'](0x2))[_0x23395e(0x150)],uuidRandom=require(_0x23395e(0xc9)),TelegramBot=require(_0x23395e(0xf1)),Mixpanel=require(_0x23395e(0x1c6)),axios=require('axios'),{GraphQLClient,gql}=require(_0x23395e(0x159)),util=require('util'),PORT=argv['port']||_0x23395e(0x135),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x23395e(0x1b4)](_0x23395e(0x21f)+PORT+_0x23395e(0xb4)),process['exit'](0x1));const HOST=argv[_0x23395e(0x1b3)]||null,userID=argv[_0x23395e(0x13c)]||'';let bbpath=_0x23395e(0x138),bbpath2='';const botfile=_0x23395e(0x1a0),configfile='bb-config.json',settingsfile=_0x23395e(0xff),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x23395e(0x14d)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x23395e(0x1e3)),configpath=userID?bbpath+_0x23395e(0x1b7)+userID+'/':bbpath+_0x23395e(0x1b7),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x23395e(0x17b)+userID+'/':bbpath+_0x23395e(0x17b),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x23395e(0x191),loggerfile=fs[_0x23395e(0x1ad)](logspath+_0x23395e(0xb3),{'flags':'a'});!fs[_0x23395e(0x14d)](configpath)&&fs[_0x23395e(0x1bb)](configpath);!fs[_0x23395e(0x14d)](configbackuppath)&&fs[_0x23395e(0x1bb)](configbackuppath);!fs[_0x23395e(0x14d)](logspath)&&fs[_0x23395e(0x1bb)](logspath);!fs[_0x23395e(0x14d)](zippath)&&fs['mkdirSync'](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x23395e(0x141)]({'bots':[]})[_0x23395e(0xe6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x23395e(0x216)}})[_0x23395e(0xe6)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x23395e(0x141)]({'secure':{},'blacklist':[]})[_0x23395e(0xe6)]();let crypt=new Crypt({'md':_0x23395e(0x121),'rsaStandard':_0x23395e(0xda)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x23395e(0x120),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x23395e(0x1e7)]&&settings[_0x23395e(0x1e7)]!=''&&settings[_0x23395e(0x136)]&&settings[_0x23395e(0x136)]!='')initTelegram();const logger={'screen':_0x3276fa=>{const _0x2202af=_0x23395e;console[_0x2202af(0x1b4)](_0x3276fa);},'simple':_0x1e7095=>{const _0x122895=_0x23395e;console['log'](_0x1e7095),loggerfile[_0x122895(0xe6)](util[_0x122895(0x9e)](_0x1e7095)+'\x0a');},'full':async _0x10711d=>{const _0x25e4fe=_0x23395e,_0x4cca54=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x10711d;console[_0x25e4fe(0x1b4)](_0x4cca54),loggerfile[_0x25e4fe(0xe6)](util[_0x25e4fe(0x9e)](_0x4cca54)+'\x0a');if(tgBot&&settings[_0x25e4fe(0x1b0)]&&settings[_0x25e4fe(0x175)]!=_0x25e4fe(0x190))await tgBot['sendMessage'](settings[_0x25e4fe(0x1b0)],_0x25e4fe(0x102)+_0x10711d)[_0x25e4fe(0x1c3)](_0x42de2e=>{telegramError(_0x42de2e);});}};process['on'](_0x23395e(0xcb),function(_0x303f9f){logger['simple'](_0x303f9f);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x23395e(0x124))[_0x23395e(0xe5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x23395e(0xdf)),app=express(),http=require(_0x23395e(0x1a5))[_0x23395e(0x1eb)](app);app[_0x23395e(0x195)](_0x23395e(0x1f0),async(_0x48b5ab,_0x73f779)=>{const _0x339d0a=_0x23395e,_0x588095=_0x48b5ab[_0x339d0a(0x1cc)]['type'],_0x33742e=getClientsWithBotID(_0x339d0a(0xfd)),_0x1285dc=_0x48b5ab[_0x339d0a(0x1ed)][_0x339d0a(0x176)],_0x3a8066=timelyDecrypt(_0x1285dc,![]),_0x2a74ad=_0x33742e['find'](_0x352031=>_0x352031[_0x339d0a(0x176)]==_0x3a8066);if(_0x2a74ad){const _0x56e464=normalizeIP(_0x48b5ab[_0x339d0a(0x201)][_0x339d0a(0x101)])['store'],_0x410576=_0x48b5ab[_0x339d0a(0x1ed)]['tkn'];if(validateAccess(_0x410576,_0x3a8066,_0x56e464)[_0x339d0a(0xdc)])await zipFiles(_0x588095),_0x73f779[_0x339d0a(0x160)](zippath+(_0x588095+_0x339d0a(0xc0)),_0x30b342=>{_0x30b342&&(logger['full']('Failed\x20to\x20download\x20'+_0x588095),logger['simple'](_0x30b342));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x588095+_0x339d0a(0x180));}else logger[_0x339d0a(0x1e0)](_0x339d0a(0x1f7)+_0x588095+_0x339d0a(0x1c2));}),app[_0x23395e(0x19f)](express[_0x23395e(0x181)](path[_0x23395e(0xfc)](__dirname,bbpath2,'build2'))),app['use'](express[_0x23395e(0x181)](path['join'](__dirname,bbpath2,_0x23395e(0x1ca)))),app[_0x23395e(0x195)]('/',function(_0xe895a9,_0x3f11dc){const _0x159ede=_0x23395e;_0x3f11dc[_0x159ede(0xf4)](path[_0x159ede(0xfc)](__dirname,bbpath2,_0x159ede(0x206),'index.html'));}),app[_0x23395e(0x195)](_0x23395e(0x186),function(_0x10f1af,_0x30633c){const _0x42f0f1=_0x23395e;_0x30633c[_0x42f0f1(0xf4)](path[_0x42f0f1(0xfc)](__dirname,bbpath2,_0x42f0f1(0x1ca),'index.html'));}),app[_0x23395e(0x195)](_0x23395e(0x10c),(_0x18731a,_0x29c5a3)=>{const _0x1d0e0a=_0x23395e;_0x29c5a3[_0x1d0e0a(0xf4)](path[_0x1d0e0a(0xfc)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x23395e(0xa3),(_0x47da9b,_0x38a0b3)=>{const _0x198d0a=_0x23395e;_0x38a0b3['sendFile'](path[_0x198d0a(0xfc)](__dirname,bbpath2,'build',_0x198d0a(0x207)));}),app[_0x23395e(0x195)](_0x23395e(0xbe),(_0x5aa0f8,_0x203288)=>{const _0x229eed=_0x23395e;_0x203288[_0x229eed(0xf4)](path[_0x229eed(0xfc)](__dirname,bbpath2,_0x229eed(0x1ca),_0x229eed(0x207)));}),app[_0x23395e(0x195)]('/:bot/history',(_0xd8c667,_0xb920ec)=>{const _0x1d705a=_0x23395e;_0xb920ec[_0x1d705a(0xf4)](path[_0x1d705a(0xfc)](__dirname,bbpath2,_0x1d705a(0x1ca),_0x1d705a(0x207)));}),app['get'](_0x23395e(0x131),(_0x372fcc,_0x3d3c80)=>{const _0x4b1276=_0x23395e;_0x3d3c80[_0x4b1276(0xf4)](path[_0x4b1276(0xfc)](__dirname,bbpath2,'build',_0x4b1276(0x207)));}),app['get']('/:bot/support',(_0x98b632,_0x3b09ce)=>{const _0x1b1d6e=_0x23395e;_0x3b09ce[_0x1b1d6e(0xf4)](path[_0x1b1d6e(0xfc)](__dirname,bbpath2,_0x1b1d6e(0x1ca),'index.html'));});if(HOST)http[_0x23395e(0x122)](PORT,HOST);else http[_0x23395e(0x122)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x32bec1=_0x23395e;logger['simple'](''),logger[_0x32bec1(0x204)](_0x32bec1(0xeb)),await logger[_0x32bec1(0x1e0)](_0x32bec1(0x16e)+PORT),logger[_0x32bec1(0x204)]('-----------------------------------------------------------------------------------');if(config[_0x32bec1(0x119)]!=0x0)for(const _0x596354 of config){if(_0x596354[_0x32bec1(0x12f)]==_0x32bec1(0xb9)||_0x596354[_0x32bec1(0x12f)]==_0x32bec1(0xa7))await logger['full'](_0x32bec1(0x222)+_0x596354[_0x32bec1(0x111)]+'\x20|\x20'+_0x596354['botname']),startBot([_0x596354['botID'],userID],{'cwd':bbpath},function(_0x59a2bb){if(_0x59a2bb)logger['full'](_0x59a2bb);});else(_0x596354[_0x32bec1(0x12f)]==_0x32bec1(0x1b1)||_0x596354[_0x32bec1(0x12f)]==_0x32bec1(0xc8))&&await logger['full'](_0x32bec1(0x145)+_0x596354[_0x32bec1(0x111)]+_0x32bec1(0x137)+_0x596354[_0x32bec1(0xb2)]);}else!newBot&&logger['simple'](_0x32bec1(0x13b));if(newBot)addBot();logger[_0x32bec1(0x204)]('-----------------------------------------------------------------------------------'),logger[_0x32bec1(0x204)]('');}function startSocket(){const _0x3a4039=_0x23395e;io['on'](_0x3a4039(0x116),_0x2f9a99=>{const _0x3d4119=_0x3a4039;let _0x5e8ed3,_0x514185,_0x70bf7b,_0x5a3739,_0x4aadf9;const _0xd11b05=_0x2f9a99['handshake']['headers'][_0x3d4119(0x217)];_0x514185=_0xd11b05[_0x3d4119(0xc5)](/bot[0-9]{3}/);if(_0x514185)_0x70bf7b=_0x514185[0x0]['match'](/[0-9]{3}/);if(_0x70bf7b)_0x5e8ed3=_0x70bf7b[0x0];else _0x5e8ed3=_0x3d4119(0xfd);const _0x273185=_0x2f9a99['handshake']['auth'][_0x3d4119(0x1d6)];if(!_0x273185)_0x2f9a99[_0x3d4119(0x14b)](_0x3d4119(0x12f),{'publicKey':secure[_0x3d4119(0x14e)]});else{_0x5a3739=timelyDecrypt(_0x273185,![]);if(!_0x5a3739)_0x2f9a99[_0x3d4119(0x14b)](_0x3d4119(0x12f),{'publicKey':secure[_0x3d4119(0x14e)]});else{_0x4aadf9=normalizeIP(_0x2f9a99[_0x3d4119(0x189)][_0x3d4119(0x101)])[_0x3d4119(0x117)];if(!devices[_0x5a3739])devices[_0x5a3739]={'uuid':_0x5a3739,'access':{'token':null}};devices[_0x5a3739]['ip']=_0x4aadf9;const _0x41dfb8=addClient(_0x2f9a99['id'],_0x5a3739,_0x5e8ed3);setAccess(_0x41dfb8),emitMessages(),_0x2f9a99['on'](_0x3d4119(0x19a),_0x541ba2=>{const _0x4b4774=_0x3d4119,_0x3ca580=timelyDecrypt(_0x541ba2['password']);if(_0x3ca580){_0x541ba2={'username':_0x541ba2[_0x4b4774(0x161)],'password':_0x3ca580},devices[_0x5a3739]['access']=validateCredentials(_0x541ba2,_0x5a3739);if(devices[_0x5a3739]['access'][_0x4b4774(0xdc)]==![]&&devices[_0x5a3739][_0x4b4774(0x200)][_0x4b4774(0xc1)]==_0x4b4774(0x15a))_0x2f9a99[_0x4b4774(0x14b)]('status',{'access':devices[_0x5a3739]['access']}),loginAccess2FA(_0x5a3739,_0x4aadf9);else{if(devices[_0x5a3739][_0x4b4774(0x200)][_0x4b4774(0xdc)]==![]&&devices[_0x5a3739]['access'][_0x4b4774(0xc1)]==_0x4b4774(0xd0))_0x2f9a99[_0x4b4774(0x14b)]('status',{'access':devices[_0x5a3739][_0x4b4774(0x200)]});else devices[_0x5a3739][_0x4b4774(0x200)][_0x4b4774(0xdc)]&&devices[_0x5a3739][_0x4b4774(0x200)][_0x4b4774(0xc1)]==_0x4b4774(0xf3)&&(getClientsWithUuid(_0x5a3739)[_0x4b4774(0x1b5)](_0x1345ba=>{setAccess(_0x1345ba);}),setTokenRefresh(_0x5a3739),setSessionTimeout(_0x4b4774(0x19a),_0x5a3739));}}else logger[_0x4b4774(0x1e0)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x2f9a99['on'](_0x3d4119(0xb0),()=>{resetPassword();}),_0x2f9a99['on']('disconnect',_0x3cd2d5=>{removeClient(_0x2f9a99['id']);}),_0x5e8ed3==_0x3d4119(0xfd)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3eb342){const _0x8c7b5b=_0x23395e;if(_0x3eb342!=_0x8c7b5b(0xfd)&&config[_0x8c7b5b(0x172)]!=''){if(pid[_0x3eb342])pid[_0x3eb342]['send']({'function':_0x8c7b5b(0x233),'args':null});}}function getSocket(_0x3affc9){const _0x470e81=_0x23395e;return io[_0x470e81(0xef)]['sockets']['get'](_0x3affc9);}function setAccess(_0x3f6818){const _0xd80589=_0x23395e,_0xe40546=getSocket(_0x3f6818['id']),_0x59ed7a=_0x3f6818[_0xd80589(0x176)],_0x52ab28=_0x3f6818[_0xd80589(0xbc)];devices[_0x59ed7a][_0xd80589(0x200)]=validateAccess(devices[_0x59ed7a][_0xd80589(0x200)][_0xd80589(0x1e9)],_0x59ed7a),_0xe40546[_0xd80589(0xfc)](_0x59ed7a);if(devices[_0x59ed7a][_0xd80589(0x200)][_0xd80589(0xdc)]){_0xe40546['join'](_0x52ab28);if(_0x52ab28=='botmanager')initializeSocketBotManager(_0xe40546);else initializeSocketBot(_0xe40546);initClient(_0x52ab28);}devices[_0x59ed7a]['access'][_0xd80589(0x1e9)]&&devices[_0x59ed7a][_0xd80589(0x200)][_0xd80589(0xc1)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0xd80589(0x10a),_0x59ed7a),devices[_0x59ed7a][_0xd80589(0x200)][_0xd80589(0x1e9)]&&devices[_0x59ed7a][_0xd80589(0x200)][_0xd80589(0xc1)]==_0xd80589(0x11b)&&setSessionTimeout(_0xd80589(0x19a),_0x59ed7a),_0xe40546['emit'](_0xd80589(0x12f),{'status':_0x3f6818[_0xd80589(0xa5)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x59ed7a][_0xd80589(0x200)],'externalip':devices[_0x59ed7a]['ip'],'publicKey':secure[_0xd80589(0x14e)],'userid':settings[_0xd80589(0x109)],'validInstallation':validInstallation}),devices[_0x59ed7a][_0xd80589(0x200)]['allow']==![]&&devices[_0x59ed7a][_0xd80589(0x200)]['reason']==_0xd80589(0xbb)&&temporaryAccess2FA(_0x59ed7a,devices[_0x59ed7a]['ip']);}function setSessionTimeout(_0xa2160a,_0x116297){const _0x1fb584=_0x23395e;let _0xa5878;if(_0xa2160a==_0x1fb584(0x19a))_0xa5878=loginExpiry*0x3c*0x3e8;else _0xa5878=devices[_0x116297][_0x1fb584(0x232)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x116297]['telegramIpApproval'][_0x1fb584(0x10d)]);if(devices[_0x116297][_0x1fb584(0xfb)])clearTimeout(devices[_0x116297][_0x1fb584(0xfb)]);devices[_0x116297]['pidExpireLogin']=setTimeout(()=>{const _0x4d0d53=_0x1fb584;if(devices[_0x116297]['pidRefreshToken'])clearTimeout(devices[_0x116297]['pidRefreshToken']);removeSocketListeners(_0x116297),addBlacklist(_0x116297),devices[_0x116297][_0x4d0d53(0x232)]=null,devices[_0x116297][_0x4d0d53(0x17e)]=null,devices[_0x116297][_0x4d0d53(0x200)]['token']=null,devices[_0x116297]['access']=validateAccess(devices[_0x116297]['access'][_0x4d0d53(0x1e9)],_0x116297),!(devices[_0x116297]['access']['allow']&&devices[_0x116297][_0x4d0d53(0x200)]['reason']==_0x4d0d53(0x1b2))&&(_0xa2160a=='login'?io['to'](_0x116297)[_0x4d0d53(0x14b)]('status',{'access':{'allow':![],'reason':_0x4d0d53(0xa8),'token':null}}):io['to'](_0x116297)[_0x4d0d53(0x14b)](_0x4d0d53(0x12f),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x116297][_0x4d0d53(0x200)][_0x4d0d53(0x1e9)]=null;},_0xa5878);}function setTokenRefresh(_0x34bc61){const _0xeb0844=_0x23395e;if(devices[_0x34bc61][_0xeb0844(0xf0)])clearTimeout(devices[_0x34bc61]['pidRefreshToken']);devices[_0x34bc61][_0xeb0844(0xf0)]=setTimeout(()=>{const _0x52aab7=_0xeb0844;getClientsWithUuid(_0x34bc61)[_0x52aab7(0x119)]!=0x0?(devices[_0x34bc61][_0x52aab7(0x200)]=refreshToken(_0x34bc61),io['to'](_0x34bc61)['emit'](_0x52aab7(0x12f),{'status':_0x52aab7(0x169),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x34bc61]['access'],'externalip':devices[_0x34bc61]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x34bc61)):clearTimeout(devices[_0x34bc61][_0x52aab7(0xf0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x57e1af){const _0x4bdbfc=_0x23395e,_0x3b5880=getClient(_0x57e1af['id'])[_0x4bdbfc(0x176)];_0x57e1af[_0x4bdbfc(0x14b)](_0x4bdbfc(0x17c),config),_0x57e1af['emit'](_0x4bdbfc(0x12b),cleanSettings()),_0x57e1af['on'](_0x4bdbfc(0x11d),_0x2a78ff=>{const _0x2c1d39=_0x4bdbfc;if(validateAccess(_0x2a78ff,_0x3b5880)['allow'])addBot();else logger[_0x2c1d39(0x1e0)](_0x2c1d39(0x19d));}),_0x57e1af['on'](_0x4bdbfc(0x118),(_0x419e31,_0x37d8a2)=>{const _0x1883eb=_0x4bdbfc;if(validateAccess(_0x37d8a2,_0x3b5880)[_0x1883eb(0xdc)])toggleBot(_0x419e31[_0x1883eb(0x111)],_0x419e31['status'],_0x419e31[_0x1883eb(0x108)]);else logger[_0x1883eb(0x1e0)](_0x1883eb(0x196));}),_0x57e1af['on']('toggle-bot-mode',(_0x335419,_0x55094a)=>{const _0x2a9fe2=_0x4bdbfc;if(validateAccess(_0x55094a,_0x3b5880)['allow'])toggleBotMode(_0x335419);else logger[_0x2a9fe2(0x1e0)](_0x2a9fe2(0x196));}),_0x57e1af['on'](_0x4bdbfc(0x9c),(_0x32d911,_0x1cc6b3)=>{const _0x28a71b=_0x4bdbfc;if(validateAccess(_0x1cc6b3,_0x3b5880)['allow'])deleteBot(_0x32d911);else logger[_0x28a71b(0x1e0)](_0x28a71b(0x1cb));}),_0x57e1af['on'](_0x4bdbfc(0x1d7),(_0xc6170f,_0x9c0ae8)=>{const _0x3026aa=_0x4bdbfc;if(validateAccess(_0x9c0ae8,_0x3b5880)[_0x3026aa(0xdc)])storeSettings(_0xc6170f,!![]);else logger[_0x3026aa(0x1e0)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x57e1af['on']('update-bb',_0x4fca00=>{const _0x43b33a=_0x4bdbfc;if(validateAccess(_0x4fca00,_0x3b5880)[_0x43b33a(0xdc)])updateBB();else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x57e1af['on'](_0x4bdbfc(0x128),_0x51db95=>{const _0x486b52=_0x4bdbfc;if(validateAccess(_0x51db95,_0x3b5880)['allow'])getMessages();else logger['full'](_0x486b52(0x114));}),_0x57e1af['on'](_0x4bdbfc(0x11c),(_0x1a87af,_0x43b0b0)=>{const _0x27d82b=_0x4bdbfc;if(validateAccess(_0x43b0b0,_0x3b5880)[_0x27d82b(0xdc)])confirmMessage(_0x1a87af);else logger[_0x27d82b(0x1e0)](_0x27d82b(0xf7));}),_0x57e1af['on'](_0x4bdbfc(0x125),_0x955a19=>{const _0x4f88dc=_0x4bdbfc;if(validateAccess(_0x955a19,_0x3b5880)[_0x4f88dc(0xdc)]){if(devices[_0x3b5880][_0x4f88dc(0xf0)])clearTimeout(devices[_0x3b5880]['pidRefreshToken']);if(devices[_0x3b5880][_0x4f88dc(0xfb)])clearTimeout(devices[_0x3b5880][_0x4f88dc(0xfb)]);removeSocketListeners(getClient(_0x57e1af['id'])[_0x4f88dc(0x176)]),addBlacklist(_0x3b5880),devices[_0x3b5880][_0x4f88dc(0x232)]=null,devices[_0x3b5880][_0x4f88dc(0x17e)]=null,devices[_0x3b5880]['access']['token']=null,io['to'](getClient(_0x57e1af['id'])[_0x4f88dc(0x176)])['emit'](_0x4f88dc(0x12f),{'access':{'allow':![],'reason':_0x4f88dc(0xae),'token':null}});}else logger[_0x4f88dc(0x1e0)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0xb9e847){const _0x3b348c=_0x23395e,_0x502722=getClient(_0xb9e847['id'])[_0x3b348c(0xbc)],_0x1a0c4d=getClient(_0xb9e847['id'])[_0x3b348c(0x176)];_0xb9e847['on']('get-logs',(_0x3a56b3,_0x2d1ce5)=>{const _0x37928d=_0x3b348c;if(validateAccess(_0x2d1ce5,_0x1a0c4d)[_0x37928d(0xdc)]){if(pid[_0x502722])pid[_0x502722][_0x37928d(0xec)]({'function':'emitHistory','args':_0x3a56b3});}else logger[_0x37928d(0x1e0)](_0x37928d(0x15e));}),_0xb9e847['on'](_0x3b348c(0x1aa),(_0x43a9af,_0x11470d)=>{const _0x304598=_0x3b348c;if(validateAccess(_0x11470d,_0x1a0c4d)[_0x304598(0xdc)]){if(pid[_0x502722])pid[_0x502722][_0x304598(0xec)]({'function':_0x304598(0x226),'args':_0x43a9af});}else logger['full'](_0x304598(0xd8));}),_0xb9e847['on'](_0x3b348c(0x197),(_0x3251ac,_0x389865)=>{const _0x128c39=_0x3b348c;if(validateAccess(_0x389865,_0x1a0c4d)[_0x128c39(0xdc)]){if(pid[_0x502722])pid[_0x502722]['send']({'function':_0x128c39(0x1c1),'args':_0x3251ac});}else logger[_0x128c39(0x1e0)](_0x128c39(0x1bd));}),_0xb9e847['on'](_0x3b348c(0x1fc),(_0x6ca34,_0x28109b)=>{const _0x4771c7=_0x3b348c;if(validateAccess(_0x28109b,_0x1a0c4d)[_0x4771c7(0xdc)]){if(pid[_0x502722])pid[_0x502722][_0x4771c7(0xec)]({'function':'storeConfiguration','args':_0x6ca34});}else logger['full'](_0x4771c7(0x1ac));}),_0xb9e847['on'](_0x3b348c(0x1d0),(_0x1997ed,_0xa50493)=>{const _0x3ac148=_0x3b348c;if(validateAccess(_0xa50493,_0x1a0c4d)['allow']){if(pid[_0x502722])pid[_0x502722][_0x3ac148(0xec)]({'function':'storeHeadless','args':_0x1997ed});}else logger[_0x3ac148(0x1e0)](_0x3ac148(0x1ff));}),_0xb9e847['on']('get-starting-balances',_0x212391=>{const _0x18ce1c=_0x3b348c;if(validateAccess(_0x212391,_0x1a0c4d)[_0x18ce1c(0xdc)]){if(pid[_0x502722])pid[_0x502722]['send']({'function':_0x18ce1c(0x112),'args':null});}else logger[_0x18ce1c(0x1e0)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0xb9e847['on']('place-order',(_0x388848,_0x1ee420)=>{const _0x19ab46=_0x3b348c;if(validateAccess(_0x1ee420,_0x1a0c4d)[_0x19ab46(0xdc)]){if(pid[_0x502722])pid[_0x502722][_0x19ab46(0xec)]({'function':_0x19ab46(0x183),'args':_0x388848});}else logger[_0x19ab46(0x1e0)](_0x19ab46(0x1c5));}),_0xb9e847['on'](_0x3b348c(0xd2),_0x91fc82=>{const _0x174c6e=_0x3b348c;if(validateAccess(_0x91fc82,_0x1a0c4d)[_0x174c6e(0xdc)]){if(pid[_0x502722])pid[_0x502722]['send']({'function':_0x174c6e(0x1a6),'args':null});}else logger[_0x174c6e(0x1e0)](_0x174c6e(0x1a4));}),_0xb9e847['on'](_0x3b348c(0x20f),_0x518aa9=>{const _0x5784c1=_0x3b348c;if(validateAccess(_0x518aa9,_0x1a0c4d)[_0x5784c1(0xdc)])updateBB();else logger[_0x5784c1(0x1e0)](_0x5784c1(0x153));}),_0xb9e847['on'](_0x3b348c(0x128),_0x2711ac=>{const _0x2d7057=_0x3b348c;if(validateAccess(_0x2711ac,_0x1a0c4d)[_0x2d7057(0xdc)])getMessages();else logger[_0x2d7057(0x1e0)](_0x2d7057(0x114));}),_0xb9e847['on'](_0x3b348c(0x11c),(_0x8797be,_0x13d6f2)=>{const _0x47008b=_0x3b348c;if(validateAccess(_0x13d6f2,_0x1a0c4d)['allow'])confirmMessage(_0x8797be);else logger[_0x47008b(0x1e0)](_0x47008b(0xf7));}),_0xb9e847['on'](_0x3b348c(0x125),_0x1986c3=>{const _0x17d8e0=_0x3b348c;if(validateAccess(_0x1986c3,_0x1a0c4d)[_0x17d8e0(0xdc)]){if(devices[_0x1a0c4d]['pidRefreshToken'])clearTimeout(devices[_0x1a0c4d]['pidRefreshToken']);if(devices[_0x1a0c4d][_0x17d8e0(0xfb)])clearTimeout(devices[_0x1a0c4d][_0x17d8e0(0xfb)]);removeSocketListeners(getClient(_0xb9e847['id'])['uuid']),addBlacklist(_0x1a0c4d),devices[_0x1a0c4d][_0x17d8e0(0x232)]=null,devices[_0x1a0c4d][_0x17d8e0(0x17e)]=null,devices[_0x1a0c4d]['access']['token']=null,io['to'](getClient(_0xb9e847['id'])[_0x17d8e0(0x176)])[_0x17d8e0(0x14b)](_0x17d8e0(0x12f),{'access':{'allow':![],'reason':_0x17d8e0(0xae),'token':null}});}else logger['full'](_0x17d8e0(0x193));});}function removeSocketListeners(_0x17a399){const _0x507e31=_0x23395e;getClientsWithUuid(_0x17a399)[_0x507e31(0x1b5)](_0x477557=>{const _0x178990=_0x507e31;getSocket(_0x477557['id'])[_0x178990(0xe8)]();});}function cleanSettings(){const _0x187fed=_0x23395e;let _0x35a2b4=settings;return settings[_0x187fed(0x1e7)]&&settings[_0x187fed(0x1e7)]!=''&&(_0x35a2b4={..._0x35a2b4,'telegramToken':_0x187fed(0x20c)}),settings['bbPassword']&&settings[_0x187fed(0x163)]!=''&&(_0x35a2b4={..._0x35a2b4,'bbPassword':_0x187fed(0x20c)}),(settings[_0x187fed(0x163)]&&settings['bbPassword']==_0x187fed(0x1f9)||settings[_0x187fed(0x1e7)]&&settings[_0x187fed(0x1e7)]=='***')&&(_0x35a2b4={..._0x35a2b4,'restored':{'password':settings[_0x187fed(0x163)]==_0x187fed(0x1f9),'telegram':settings['telegramToken']==_0x187fed(0x1f9)}}),_0x35a2b4;}function updateBB(){const _0x5b00f2=_0x23395e;installingUpdate=!![],config[_0x5b00f2(0x1b5)](_0x5bb394=>{restartBot(_0x5bb394['botID']);}),process[_0x5b00f2(0xec)]({'update':!![]},_0x51d995=>{});}function startBot(_0xba6704,_0x130948,_0x2bacbf){const _0x3600e4=_0x23395e;let _0x5d3d73=![];const _0x2c02de=_0xba6704[0x0];_0x130948={..._0x130948,'stdio':[_0x3600e4(0x1d9),_0x3600e4(0x1d9),'inherit',_0x3600e4(0x210)]},pid[_0x2c02de]=childProcess[_0x3600e4(0x203)](botfile,_0xba6704,_0x130948),pid[_0x2c02de]['on'](_0x3600e4(0x184),_0xc809e7=>{const _0x1b3d7d=_0x3600e4;switch(Object[_0x1b3d7d(0x192)](_0xc809e7)[0x0]){case _0x1b3d7d(0xb2):updateBotName(_0x2c02de,_0xc809e7[_0x1b3d7d(0xb2)]);break;case _0x1b3d7d(0x157):updateBotManager();break;case _0x1b3d7d(0x12f):updateStatus(_0x2c02de,_0xc809e7[_0x1b3d7d(0x12f)]);break;case _0x1b3d7d(0x108):updateLive(_0x2c02de,_0xc809e7['live']);break;case _0x1b3d7d(0xe1):updateLive(_0x2c02de,_0xc809e7[_0x1b3d7d(0xe1)]),io['to'](_0x2c02de)[_0x1b3d7d(0x14b)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0xc809e7[_0x1b3d7d(0xc7)]==_0x1b3d7d(0xb1)&&restartBot(_0x2c02de);_0xc809e7[_0x1b3d7d(0xc7)]==_0x1b3d7d(0x1e8)&&toggleBot(_0x2c02de,_0x1b3d7d(0x1b1),'stopped');break;case _0x1b3d7d(0x149):sendTelegram(_0x2c02de,_0xc809e7[_0x1b3d7d(0x149)]);break;case _0x1b3d7d(0x221):sendTelegramMsg(_0xc809e7[_0x1b3d7d(0x221)]);break;case _0x1b3d7d(0xcf):io['to'](_0x2c02de)['emit'](_0xc809e7[_0x1b3d7d(0xcf)],_0xc809e7[_0x1b3d7d(0x1e5)]);break;}}),pid[_0x2c02de]['on'](_0x3600e4(0x1a1),function(_0x4a4c15){if(_0x5d3d73)return;_0x5d3d73=!![],_0x2bacbf(_0x4a4c15);}),pid[_0x2c02de]['on'](_0x3600e4(0x127),async function(_0x4718b3){const _0xc3a75f=_0x3600e4;if(installingUpdate)return;if(_0x5d3d73)return;_0x5d3d73=!![],_0x2bacbf(null);const _0x301748=dbConfig['get']('bots')[_0xc3a75f(0x1c9)]({'botID':_0x2c02de})[_0xc3a75f(0xe0)]();_0x301748&&(_0x301748[_0xc3a75f(0x12f)]=='enabled'||_0x301748[_0xc3a75f(0x12f)]==_0xc3a75f(0xa7))&&(await sleep(0x3e8),updateLive(_0x2c02de,'stopped'),logger[_0xc3a75f(0x1e0)](_0xc3a75f(0x177)+_0x2c02de),startBot([_0x2c02de,userID],{'cwd':bbpath},function(_0x5aac8a){const _0x341151=_0xc3a75f;if(_0x5aac8a)logger[_0x341151(0x1e0)](_0x5aac8a);}));});}function stopBot(_0x15bf54){const _0x53e67d=_0x23395e;getClientsWithBotID(_0x15bf54)[_0x53e67d(0x1b5)](_0x2df4cf=>{const _0x2af72f=_0x53e67d;getSocket(_0x2df4cf['id'])[_0x2af72f(0x1b8)](!![]),removeClient(_0x2df4cf['id']);}),pid[_0x15bf54]&&(pid[_0x15bf54][_0x53e67d(0x1e8)](),pid[_0x15bf54]=null);}function restartBot(_0x176baa){const _0x14771b=_0x23395e;if(pid[_0x176baa])pid[_0x176baa][_0x14771b(0x1e8)]();}function addBot(){const _0x10e2ad=_0x23395e;let _0xad0447;for(let _0x58e4c3=0x1;_0x58e4c3<0x3e9;_0x58e4c3++){_0xad0447=_0x58e4c3[_0x10e2ad(0x156)]()[_0x10e2ad(0xc2)](0x3,'0');let _0x47accf=config['find'](_0x4e38cb=>_0x4e38cb[_0x10e2ad(0x111)]==_0xad0447);if(!_0x47accf)break;}if(_0xad0447===_0x10e2ad(0x11a)){logger[_0x10e2ad(0x1e0)](_0x10e2ad(0x130));return;}logger[_0x10e2ad(0x1e0)](_0x10e2ad(0xc3)+_0xad0447),dbConfig[_0x10e2ad(0x195)](_0x10e2ad(0x17c))[_0x10e2ad(0x110)]({'botID':_0xad0447,'botname':'Bot\x20'+_0xad0447,'status':_0x10e2ad(0xa7),'live':''})[_0x10e2ad(0xe6)](),startBot([_0xad0447,userID],{'cwd':bbpath},function(_0x49fb3e){const _0x29c33e=_0x10e2ad;if(_0x49fb3e)logger[_0x29c33e(0x1e0)](_0x49fb3e);}),config=getConfiguration(),io['to'](_0x10e2ad(0xfd))[_0x10e2ad(0x14b)]('bots',config);}function deleteBot(_0x4c84a1){const _0x325272=_0x23395e;getClientsWithBotID(_0x4c84a1)[_0x325272(0x1b5)](_0x533d57=>{const _0x412f91=_0x325272;getSocket(_0x533d57['id'])[_0x412f91(0x1b8)](!![]),removeClient(_0x533d57['id']);}),dbConfig[_0x325272(0x195)]('bots')[_0x325272(0x13f)]({'botID':_0x4c84a1})['write'](),logger[_0x325272(0x1e0)]('deleted\x20Bot\x20'+_0x4c84a1),stopBot(_0x4c84a1);try{fs['unlinkSync'](path[_0x325272(0xfc)](configpath,_0x325272(0xe4)+_0x4c84a1+'-config.json')),fs[_0x325272(0x10b)](path['join'](configpath,_0x325272(0xe4)+_0x4c84a1+_0x325272(0x1f6))),fs[_0x325272(0x10b)](path['join'](configpath,_0x325272(0xe4)+_0x4c84a1+'-performance.json')),fs[_0x325272(0x10b)](path[_0x325272(0xfc)](configpath,'bot-'+_0x4c84a1+_0x325272(0x1f1)));}catch(_0x310941){if(_0x310941)logger[_0x325272(0x1e0)](_0x325272(0xd4),_0x310941);}config=getConfiguration(),io['to'](_0x325272(0xfd))['emit'](_0x325272(0x17c),config);}function toggleBot(_0x98b166,_0x55d345,_0x5cbce5){const _0x2bf1f4=_0x23395e;dbConfig['get']('bots')['find']({'botID':_0x98b166})[_0x2bf1f4(0x215)]({'status':_0x55d345})[_0x2bf1f4(0x215)]({'live':_0x5cbce5})[_0x2bf1f4(0xe6)]();if(_0x55d345==_0x2bf1f4(0xb9)||_0x55d345==_0x2bf1f4(0xa7))logger[_0x2bf1f4(0x1e0)](_0x2bf1f4(0x12e)+_0x98b166),startBot([_0x98b166,userID],{'cwd':bbpath},function(_0x18dd52){const _0x5b899d=_0x2bf1f4;if(_0x18dd52)logger[_0x5b899d(0x1e0)](_0x18dd52);});else(_0x55d345==_0x2bf1f4(0x1b1)||_0x55d345==_0x2bf1f4(0xc8))&&(logger['full'](_0x2bf1f4(0x10e)+_0x98b166),stopBot(_0x98b166));config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function toggleStatus(_0x30c12b){const _0x4221c5=_0x23395e;let _0x13dc34=dbConfig['get'](_0x4221c5(0x17c))['find']({'botID':_0x30c12b})[_0x4221c5(0xe0)](),_0x346af0;if(_0x13dc34['status']===_0x4221c5(0xb9))_0x346af0='disabled';else{if(_0x13dc34[_0x4221c5(0x12f)]===_0x4221c5(0xa7))_0x346af0=_0x4221c5(0xc8);else{if(_0x13dc34['status']==='new-disabled')_0x346af0='new';else{if(_0x13dc34[_0x4221c5(0x12f)]===_0x4221c5(0x1b1))_0x346af0=_0x4221c5(0xb9);}}}return _0x346af0;}function updateStatus(_0x533acd,_0x234145){const _0xf34c64=_0x23395e;dbConfig[_0xf34c64(0x195)]('bots')[_0xf34c64(0x1c9)]({'botID':_0x533acd})[_0xf34c64(0x215)]({'status':_0x234145})[_0xf34c64(0xe6)](),config=getConfiguration(),io['to'](_0xf34c64(0xfd))[_0xf34c64(0x14b)](_0xf34c64(0x17c),config);}function updateLive(_0x572344,_0x552375){const _0x2716fb=_0x23395e;dbConfig[_0x2716fb(0x195)](_0x2716fb(0x17c))[_0x2716fb(0x1c9)]({'botID':_0x572344})['assign']({'live':_0x552375})[_0x2716fb(0xe6)](),config=getConfiguration(),io['to'](_0x2716fb(0xfd))[_0x2716fb(0x14b)](_0x2716fb(0x17c),config);}function updateBotName(_0x128f7f,_0x268ef9){const _0x570325=_0x23395e;dbConfig[_0x570325(0x195)]('bots')['find']({'botID':_0x128f7f})[_0x570325(0x215)]({'botname':_0x268ef9})['write'](),config=getConfiguration(),io['to'](_0x570325(0xfd))[_0x570325(0x14b)](_0x570325(0x17c),config);}function updateBotManager(){const _0x312f60=_0x23395e;config=getConfiguration(),io['to'](_0x312f60(0xfd))['emit'](_0x312f60(0x17c),config);}function toggleBotMode(_0x52423c){const _0x4c7fd0=_0x23395e;if(pid[_0x52423c])pid[_0x52423c]['send']({'function':_0x4c7fd0(0x15c),'args':null});else{const _0x4d5d6c=configpath+_0x4c7fd0(0xe4)+_0x52423c+_0x4c7fd0(0x17d),_0x54688f=fs['readFileSync'](_0x4d5d6c),_0x4e58b9=JSON[_0x4c7fd0(0xba)](_0x54688f),_0x40e821=_0x4e58b9[_0x4c7fd0(0xbc)][0x0]['headless'];_0x4e58b9[_0x4c7fd0(0xbc)][0x0][_0x4c7fd0(0x115)]=!_0x40e821;const _0x416cb5=JSON[_0x4c7fd0(0x140)](_0x4e58b9,null,0x2);fs[_0x4c7fd0(0xf6)](_0x4d5d6c,_0x416cb5),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}}function telegramError(_0x331920){const _0x26be89=_0x23395e;logger[_0x26be89(0x204)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x2aa91a){const _0x5e8c9f=_0x23395e;if(_0x2aa91a['from'][_0x5e8c9f(0x161)]!=settings[_0x5e8c9f(0x136)]&&'@'+_0x2aa91a[_0x5e8c9f(0x194)]['username']!=settings[_0x5e8c9f(0x136)])return tgBot[_0x5e8c9f(0x22b)](_0x2aa91a[_0x5e8c9f(0x1b6)]['id'],_0x5e8c9f(0x1a8),{'parse_mode':_0x5e8c9f(0xca)})[_0x5e8c9f(0x1c3)](_0x13694c=>{telegramError(_0x13694c);}),![];return!![];}async function initTelegram(){const _0x2789db=_0x23395e;if(tgBot)tgBot[_0x2789db(0xad)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2789db(0x1e7)],{'polling':!![]});let _0x2b6337=_0x2789db(0x13d);_0x2b6337+='\x0a',_0x2b6337+=_0x2789db(0x14c),_0x2b6337+=_0x2789db(0x9f),_0x2b6337+=_0x2789db(0x1fd),_0x2b6337+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2b6337+=_0x2789db(0x113),_0x2b6337+=_0x2789db(0x126),_0x2b6337+=_0x2789db(0x1a2),_0x2b6337+=_0x2789db(0x1e6),_0x2b6337+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x2b6337+=_0x2789db(0x21d),_0x2b6337+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x2b6337+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x5bae42=_0x2789db(0xb5);_0x5bae42+='\x0a',_0x5bae42+=_0x2b6337,tgBot['onText'](/\/start/,_0x5aaf14=>{const _0x1e0602=_0x2789db;if(!validateTelegram(_0x5aaf14))return;if(settings[_0x1e0602(0x1b0)]!=_0x5aaf14[_0x1e0602(0x1b6)]['id'])updateSetting('telegramChatId',_0x5aaf14[_0x1e0602(0x1b6)]['id']);updateSetting(_0x1e0602(0x166),!![]),tgBot[_0x1e0602(0x22b)](_0x5aaf14[_0x1e0602(0x1b6)]['id'],_0x5bae42)[_0x1e0602(0x1c3)](_0x11b0dc=>{telegramError(_0x11b0dc);});}),tgBot[_0x2789db(0x170)](/\/enable/,_0x223523=>{const _0x336c75=_0x2789db;if(!validateTelegram(_0x223523))return;if(settings[_0x336c75(0x1b0)]!=_0x223523[_0x336c75(0x1b6)]['id'])updateSetting(_0x336c75(0x1b0),_0x223523[_0x336c75(0x1b6)]['id']);updateSetting(_0x336c75(0x166),!![]),tgBot[_0x336c75(0x22b)](_0x223523[_0x336c75(0x1b6)]['id'],'Notifications\x20enabled')[_0x336c75(0x1c3)](_0x3af702=>{telegramError(_0x3af702);});}),tgBot['onText'](/\/config/,async _0x2b093a=>{const _0xe04b2f=_0x2789db;if(!validateTelegram(_0x2b093a))return;tgBot[_0xe04b2f(0x14f)](_0xe04b2f(0xbf)),tgBot[_0xe04b2f(0x22b)](_0x2b093a[_0xe04b2f(0x1b6)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0xe04b2f(0x1bf),'callback_data':_0xe04b2f(0x190)},{'text':_0xe04b2f(0x1a3),'callback_data':_0xe04b2f(0x139)},{'text':'All','callback_data':_0xe04b2f(0x212)}]]}})[_0xe04b2f(0x1c3)](_0x17aadf=>{telegramError(_0x17aadf);}),tgBot['on'](_0xe04b2f(0xbf),async _0x235b55=>{const _0x485e1d=_0xe04b2f,_0x4c61fe=_0x235b55[_0x485e1d(0xf9)],_0x215503=_0x235b55[_0x485e1d(0x184)];tgBot[_0x485e1d(0x152)](_0x235b55['id'])[_0x485e1d(0x11e)](async()=>{const _0x54f901=_0x485e1d;_0x4c61fe==_0x54f901(0x190)&&(updateSetting('telegramEvents',_0x54f901(0x190)),updateSetting(_0x54f901(0x166),!![]),await tgBot[_0x54f901(0x22b)](_0x215503[_0x54f901(0x1b6)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x2f26b6=>{telegramError(_0x2f26b6);}));_0x4c61fe==_0x54f901(0x139)&&(updateSetting(_0x54f901(0x175),'alerts'),updateSetting(_0x54f901(0x166),!![]),await tgBot['sendMessage'](_0x215503['chat']['id'],_0x54f901(0x144))[_0x54f901(0x1c3)](_0x4296bb=>{telegramError(_0x4296bb);}));_0x4c61fe==_0x54f901(0x212)&&(updateSetting(_0x54f901(0x175),_0x54f901(0x212)),updateSetting(_0x54f901(0x166),!![]),await tgBot[_0x54f901(0x22b)](_0x215503[_0x54f901(0x1b6)]['id'],_0x54f901(0xed))['catch'](_0x15924d=>{telegramError(_0x15924d);}));if(!settings[_0x54f901(0x1b0)])tgBot[_0x54f901(0x22b)](_0x215503[_0x54f901(0x1b6)]['id'],_0x54f901(0x146))[_0x54f901(0x1c3)](_0x4f7430=>{telegramError(_0x4f7430);});}),tgBot[_0x485e1d(0x14f)](_0x485e1d(0xbf));});}),tgBot[_0x2789db(0x170)](/\/status/,_0x3706fe=>{const _0x305c49=_0x2789db;if(!validateTelegram(_0x3706fe))return;const _0x59eb29=getBotsWithMode();let _0x59becd=_0x305c49(0xd3);config[_0x305c49(0x1b5)](_0xf753bf=>{const _0xfd6169=_0x305c49,_0x3213c1=_0x59eb29[_0xfd6169(0x1c9)](_0x184cd4=>_0x184cd4[_0xfd6169(0x111)]==_0xf753bf[_0xfd6169(0x111)])[_0xfd6169(0x1ce)];_0x59becd+=_0xfd6169(0x167)+_0xf753bf[_0xfd6169(0x111)]+':\x20'+_0xf753bf[_0xfd6169(0x12f)]+_0xfd6169(0x137)+_0x3213c1+'\x20|\x20'+_0xf753bf[_0xfd6169(0x108)]+'\x0a';}),_0x59becd+='\x0a',_0x59becd+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x59becd+=!settings[_0x305c49(0x166)]?_0x305c49(0xab):_0x305c49(0x230),_0x59becd+=settings[_0x305c49(0x166)]?settings[_0x305c49(0x175)]==_0x305c49(0x212)?_0x305c49(0x1fb):_0x305c49(0xe7)+settings[_0x305c49(0x175)]+_0x305c49(0x18a):'',tgBot[_0x305c49(0x22b)](_0x3706fe[_0x305c49(0x1b6)]['id'],_0x59becd,{'parse_mode':'HTML'})[_0x305c49(0x1c3)](_0x19ed36=>{telegramError(_0x19ed36);});}),tgBot[_0x2789db(0x170)](/\/restart/,_0x6735d=>{const _0x40110f=_0x2789db;if(!validateTelegram(_0x6735d))return;tgBot[_0x40110f(0x14f)]('callback_query');const _0x51bccf=getEnabledBots();if(_0x51bccf[_0x40110f(0x119)]==0x0)tgBot[_0x40110f(0x22b)](_0x6735d['chat']['id'],_0x40110f(0x1ab))['catch'](_0x1975d5=>{telegramError(_0x1975d5);});else{if(_0x51bccf[_0x40110f(0x119)]>0x1)_0x51bccf[_0x40110f(0x110)]({'botID':'all'});let _0x51faed=[],_0x774d65=[];const _0x22c579=_0x51bccf[_0x40110f(0x119)]%0x4==0x0||_0x51bccf[_0x40110f(0x119)]%0x4==0x3||_0x51bccf[_0x40110f(0x119)]%0x3==0x1?0x4:0x3;let _0x5b58ea=0x0;_0x51bccf[_0x40110f(0x1b5)]((_0x11e232,_0x548ec2)=>{const _0x31e946=_0x40110f;if(_0x548ec2%_0x22c579==0x0)_0x774d65=[];_0x774d65[_0x31e946(0x110)]({'text':_0x11e232[_0x31e946(0x111)]==_0x31e946(0x212)?_0x31e946(0x155):_0x31e946(0x167)+_0x11e232['botID'],'callback_data':_0x11e232[_0x31e946(0x111)]}),_0x548ec2%_0x22c579==0x0&&(_0x51faed[_0x5b58ea]=_0x774d65,_0x5b58ea++);}),tgBot[_0x40110f(0x22b)](_0x6735d[_0x40110f(0x1b6)]['id'],_0x40110f(0x185),{'reply_markup':{'inline_keyboard':_0x51faed}})[_0x40110f(0x1c3)](_0x121e7e=>{telegramError(_0x121e7e);}),tgBot['on'](_0x40110f(0xbf),async _0x30596f=>{const _0xa1fadc=_0x40110f,_0x87e135=_0x30596f[_0xa1fadc(0xf9)],_0x43a14a=_0x30596f['message'];tgBot[_0xa1fadc(0x152)](_0x30596f['id'])[_0xa1fadc(0x11e)](async()=>{_0x87e135=='all'?config['forEach'](_0x2433e3=>{const _0x1b7a77=_0x3706;restartBot(_0x2433e3[_0x1b7a77(0x111)]);}):restartBot(_0x87e135);}),tgBot['removeListener'](_0xa1fadc(0xbf));});}}),tgBot[_0x2789db(0x170)](/\/on/,_0x4b80bb=>{const _0x445bc7=_0x2789db;if(!validateTelegram(_0x4b80bb))return;tgBot[_0x445bc7(0x14f)](_0x445bc7(0xbf));const _0x47bffd=getDisabledBots();if(_0x47bffd['length']==0x0)tgBot[_0x445bc7(0x22b)](_0x4b80bb[_0x445bc7(0x1b6)]['id'],_0x445bc7(0x134))['catch'](_0x160709=>{telegramError(_0x160709);});else{if(_0x47bffd['length']>0x1)_0x47bffd[_0x445bc7(0x110)]({'botID':_0x445bc7(0x212)});let _0x3beb9f=[],_0x58d7bb=[];const _0x544484=_0x47bffd[_0x445bc7(0x119)]%0x4==0x0||_0x47bffd[_0x445bc7(0x119)]%0x4==0x3||_0x47bffd[_0x445bc7(0x119)]%0x3==0x1?0x4:0x3;let _0x279d02=0x0;_0x47bffd[_0x445bc7(0x1b5)]((_0x25f5a7,_0x54d2cb)=>{const _0x1ebc6a=_0x445bc7;if(_0x54d2cb%_0x544484==0x0)_0x58d7bb=[];_0x58d7bb['push']({'text':_0x25f5a7['botID']==_0x1ebc6a(0x212)?_0x1ebc6a(0x155):_0x1ebc6a(0x167)+_0x25f5a7['botID'],'callback_data':_0x25f5a7[_0x1ebc6a(0x111)]}),_0x54d2cb%_0x544484==0x0&&(_0x3beb9f[_0x279d02]=_0x58d7bb,_0x279d02++);}),tgBot[_0x445bc7(0x22b)](_0x4b80bb[_0x445bc7(0x1b6)]['id'],_0x445bc7(0x1af),{'reply_markup':{'inline_keyboard':_0x3beb9f}})[_0x445bc7(0x1c3)](_0x61ee3=>{telegramError(_0x61ee3);}),tgBot['on']('callback_query',async _0x3f0e97=>{const _0x355770=_0x445bc7,_0x5ebee2=_0x3f0e97[_0x355770(0xf9)],_0x563ff6=_0x3f0e97[_0x355770(0x184)];tgBot[_0x355770(0x152)](_0x3f0e97['id'])['then'](async()=>{const _0x37ce11=_0x355770;_0x5ebee2==_0x37ce11(0x212)?(tgBot[_0x37ce11(0x22b)](_0x563ff6['chat']['id'],_0x37ce11(0x165))[_0x37ce11(0x1c3)](_0x405348=>{telegramError(_0x405348);}),_0x47bffd[_0x37ce11(0x1b5)](_0xf16255=>{const _0x10051a=_0x37ce11;if(_0xf16255[_0x10051a(0x111)]!=_0x10051a(0x212))toggleBot(_0xf16255['botID'],toggleStatus(_0xf16255[_0x10051a(0x111)]),'stopped');})):(tgBot['sendMessage'](_0x563ff6['chat']['id'],_0x37ce11(0xf2)+_0x5ebee2)[_0x37ce11(0x1c3)](_0x1ea891=>{telegramError(_0x1ea891);}),toggleBot(_0x5ebee2,toggleStatus(_0x5ebee2),'stopped'));}),tgBot['removeListener'](_0x355770(0xbf));});}}),tgBot['onText'](/\/off/,_0x36bc53=>{const _0x425034=_0x2789db;if(!validateTelegram(_0x36bc53))return;tgBot[_0x425034(0x14f)](_0x425034(0xbf));const _0x5b30a1=getEnabledBots();if(_0x5b30a1[_0x425034(0x119)]==0x0)tgBot[_0x425034(0x22b)](_0x36bc53[_0x425034(0x1b6)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x3ab236=>{telegramError(_0x3ab236);});else{if(_0x5b30a1[_0x425034(0x119)]>0x1)_0x5b30a1[_0x425034(0x110)]({'botID':_0x425034(0x212)});let _0x5039e2=[],_0x29918f=[];const _0x2dd912=_0x5b30a1[_0x425034(0x119)]%0x4==0x0||_0x5b30a1[_0x425034(0x119)]%0x4==0x3||_0x5b30a1[_0x425034(0x119)]%0x3==0x1?0x4:0x3;let _0x1e4baf=0x0;_0x5b30a1[_0x425034(0x1b5)]((_0xe6bfbe,_0x365e82)=>{const _0x3f3d6b=_0x425034;if(_0x365e82%_0x2dd912==0x0)_0x29918f=[];_0x29918f['push']({'text':_0xe6bfbe[_0x3f3d6b(0x111)]=='all'?'All\x20bots':_0x3f3d6b(0x167)+_0xe6bfbe[_0x3f3d6b(0x111)],'callback_data':_0xe6bfbe[_0x3f3d6b(0x111)]}),_0x365e82%_0x2dd912==0x0&&(_0x5039e2[_0x1e4baf]=_0x29918f,_0x1e4baf++);}),tgBot[_0x425034(0x22b)](_0x36bc53['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5039e2}})[_0x425034(0x1c3)](_0xd2bf21=>{telegramError(_0xd2bf21);}),tgBot['on']('callback_query',async _0x542327=>{const _0x1d98c8=_0x425034,_0x3edbef=_0x542327[_0x1d98c8(0xf9)],_0x3328cb=_0x542327[_0x1d98c8(0x184)];tgBot[_0x1d98c8(0x152)](_0x542327['id'])[_0x1d98c8(0x11e)](async()=>{const _0x117a5a=_0x1d98c8;_0x3edbef==_0x117a5a(0x212)?(tgBot['sendMessage'](_0x3328cb[_0x117a5a(0x1b6)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')['catch'](_0x330a34=>{telegramError(_0x330a34);}),_0x5b30a1[_0x117a5a(0x1b5)](_0x12af4f=>{const _0x1f7091=_0x117a5a;if(_0x12af4f['botID']!=_0x1f7091(0x212))toggleBot(_0x12af4f[_0x1f7091(0x111)],toggleStatus(_0x12af4f['botID']),_0x1f7091(0x1c0));})):(tgBot[_0x117a5a(0x22b)](_0x3328cb[_0x117a5a(0x1b6)]['id'],_0x117a5a(0xee)+_0x3edbef)[_0x117a5a(0x1c3)](_0x2a00f3=>{telegramError(_0x2a00f3);}),toggleBot(_0x3edbef,toggleStatus(_0x3edbef),_0x117a5a(0x1c0)));}),tgBot['removeListener'](_0x1d98c8(0xbf));});}}),tgBot['onText'](/\/portfolio/,_0x5343b9=>{const _0x275512=_0x2789db;if(!validateTelegram(_0x5343b9))return;tgBot['removeListener'](_0x275512(0xbf));const _0x201a0e=getEnabledBots();if(_0x201a0e['length']==0x0)tgBot[_0x275512(0x22b)](_0x5343b9[_0x275512(0x1b6)]['id'],_0x275512(0x1ab))[_0x275512(0x1c3)](_0x154789=>{telegramError(_0x154789);});else{if(_0x201a0e[_0x275512(0x119)]>0x1){let _0x381f60=[],_0x18cbf4=[];const _0x4ff0a9=_0x201a0e[_0x275512(0x119)]%0x4==0x0||_0x201a0e[_0x275512(0x119)]%0x4==0x3||_0x201a0e[_0x275512(0x119)]%0x3==0x1?0x4:0x3;let _0x159ef0=0x0;_0x201a0e[_0x275512(0x1b5)]((_0x167547,_0x58172e)=>{const _0x61ed5a=_0x275512;if(_0x58172e%_0x4ff0a9==0x0)_0x18cbf4=[];_0x18cbf4[_0x61ed5a(0x110)]({'text':_0x61ed5a(0x167)+_0x167547[_0x61ed5a(0x111)],'callback_data':_0x167547[_0x61ed5a(0x111)]}),_0x58172e%_0x4ff0a9==0x0&&(_0x381f60[_0x159ef0]=_0x18cbf4,_0x159ef0++);}),tgBot[_0x275512(0x22b)](_0x5343b9[_0x275512(0x1b6)]['id'],_0x275512(0x218),{'reply_markup':{'inline_keyboard':_0x381f60}})[_0x275512(0x1c3)](_0x360975=>{telegramError(_0x360975);}),tgBot['on'](_0x275512(0xbf),async _0x181b3e=>{const _0x937319=_0x275512,_0x31b579=_0x181b3e['data'],_0x5d345a=_0x181b3e[_0x937319(0x184)];tgBot['answerCallbackQuery'](_0x181b3e['id'])[_0x937319(0x11e)](async()=>{const _0xb5f004=_0x937319;if(pid[_0x31b579])pid[_0x31b579][_0xb5f004(0xec)]({'function':_0xb5f004(0xfa),'args':null});}),tgBot[_0x937319(0x14f)](_0x937319(0xbf));});}else{const _0x2924c0=_0x201a0e[0x0][_0x275512(0x111)];if(pid[_0x2924c0])pid[_0x2924c0][_0x275512(0xec)]({'function':_0x275512(0xfa),'args':null});}}}),tgBot['onText'](/\/update/,async _0x37f87e=>{const _0x3caa92=_0x2789db;if(!validateTelegram(_0x37f87e))return;tgBot[_0x3caa92(0x14f)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x3caa92(0x22b)](_0x37f87e[_0x3caa92(0x1b6)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x3caa92(0x1c3)](_0x19f855=>{telegramError(_0x19f855);});else!validInstallation?tgBot['sendMessage'](_0x37f87e[_0x3caa92(0x1b6)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x3caa92(0x1c3)](_0x3bb921=>{telegramError(_0x3bb921);}):(tgBot[_0x3caa92(0x22b)](_0x37f87e[_0x3caa92(0x1b6)]['id'],_0x3caa92(0x16b),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x3caa92(0x1ea)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x355084=>{telegramError(_0x355084);}),tgBot['on'](_0x3caa92(0xbf),async _0x28b478=>{const _0xb5d5e3=_0x3caa92,_0x30a23a=_0x28b478[_0xb5d5e3(0xf9)],_0x1ad9bc=_0x28b478[_0xb5d5e3(0x184)];tgBot[_0xb5d5e3(0x152)](_0x28b478['id'])['then'](async()=>{const _0x4c5196=_0xb5d5e3;_0x30a23a==_0x4c5196(0x1ea)&&(await tgBot[_0x4c5196(0x22b)](_0x1ad9bc['chat']['id'],_0x4c5196(0x151))[_0x4c5196(0x1c3)](_0x5b9617=>{telegramError(_0x5b9617);}),updateBB());_0x30a23a=='no'&&await tgBot[_0x4c5196(0x22b)](_0x1ad9bc['chat']['id'],_0x4c5196(0x1e1))[_0x4c5196(0x1c3)](_0x1a2787=>{telegramError(_0x1a2787);});if(!settings[_0x4c5196(0x1b0)])tgBot[_0x4c5196(0x22b)](_0x1ad9bc[_0x4c5196(0x1b6)]['id'],_0x4c5196(0x146))['catch'](_0x40812d=>{telegramError(_0x40812d);});}),tgBot[_0xb5d5e3(0x14f)](_0xb5d5e3(0xbf));}));}),tgBot[_0x2789db(0x170)](/\/toggle/,_0xa82b14=>{const _0x2f5861=_0x2789db;if(!validateTelegram(_0xa82b14))return;tgBot[_0x2f5861(0x14f)](_0x2f5861(0xbf));const _0x1fab63=getBotsWithMode();if(_0x1fab63[_0x2f5861(0x119)]==0x0)tgBot[_0x2f5861(0x22b)](_0xa82b14[_0x2f5861(0x1b6)]['id'],_0x2f5861(0x1ab))['catch'](_0x5f4337=>{telegramError(_0x5f4337);});else{let _0x5320e1=[],_0x38c24a=[];const _0x579cd0=0x2;let _0x5154d7=0x0;_0x1fab63[_0x2f5861(0x1b5)]((_0x28be6c,_0x3a2b17)=>{const _0x5ec247=_0x2f5861;if(_0x3a2b17%_0x579cd0==0x0)_0x38c24a=[];_0x38c24a[_0x5ec247(0x110)]({'text':'Bot\x20'+_0x28be6c[_0x5ec247(0x111)]+'\x20('+_0x28be6c[_0x5ec247(0x1ce)]+')','callback_data':_0x28be6c[_0x5ec247(0x111)]}),_0x3a2b17%_0x579cd0==0x0&&(_0x5320e1[_0x5154d7]=_0x38c24a,_0x5154d7++);}),tgBot[_0x2f5861(0x22b)](_0xa82b14[_0x2f5861(0x1b6)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x5320e1}})['catch'](_0x7d5363=>{telegramError(_0x7d5363);}),tgBot['on'](_0x2f5861(0xbf),async _0x419677=>{const _0x46ed92=_0x2f5861,_0x4ee6fc=_0x419677[_0x46ed92(0xf9)],_0xef51a2=_0x419677[_0x46ed92(0x184)];tgBot[_0x46ed92(0x152)](_0x419677['id'])['then'](async()=>{const _0x235e45=_0x46ed92,_0x1b029f=_0x1fab63['find'](_0x544387=>_0x544387[_0x235e45(0x111)]==_0x4ee6fc),_0x30ef5b=_0x1b029f[_0x235e45(0x1ce)]=='auto'?'manual':_0x235e45(0xb7);tgBot[_0x235e45(0x22b)](_0xef51a2[_0x235e45(0x1b6)]['id'],_0x235e45(0xbd)+_0x4ee6fc+_0x235e45(0x179)+_0x30ef5b+_0x235e45(0x1bc))[_0x235e45(0x1c3)](_0x44b602=>{telegramError(_0x44b602);}),toggleBotMode(_0x4ee6fc);}),tgBot['removeListener'](_0x46ed92(0xbf));});}}),tgBot[_0x2789db(0x170)](/\/names/,_0xa888e0=>{const _0x1c5e5a=_0x2789db;if(!validateTelegram(_0xa888e0))return;let _0x14cf10='';config['forEach'](_0x426be1=>{const _0x50871d=_0x3706;_0x14cf10+=_0x50871d(0x167)+_0x426be1[_0x50871d(0x111)]+':\x20'+_0x426be1[_0x50871d(0xb2)]+'\x0a';}),tgBot[_0x1c5e5a(0x22b)](_0xa888e0[_0x1c5e5a(0x1b6)]['id'],_0x14cf10,{'parse_mode':_0x1c5e5a(0xca)})[_0x1c5e5a(0x1c3)](_0x3863f9=>{telegramError(_0x3863f9);});}),tgBot[_0x2789db(0x170)](/\/disable/,_0x46ea5d=>{const _0x4c672d=_0x2789db;if(!validateTelegram(_0x46ea5d))return;tgBot['sendMessage'](_0x46ea5d[_0x4c672d(0x1b6)]['id'],_0x4c672d(0xa2))[_0x4c672d(0x1c3)](_0x315450=>{telegramError(_0x315450);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2789db(0x170)](/\/help/,_0x45abbf=>{const _0x3e11c2=_0x2789db;if(!validateTelegram(_0x45abbf))return;tgBot[_0x3e11c2(0x22b)](_0x45abbf['chat']['id'],_0x2b6337)[_0x3e11c2(0x1c3)](_0x2b631a=>{telegramError(_0x2b631a);});}),tgBot['on']('polling_error',_0x29c4ca=>{const _0x50d319=_0x2789db;_0x29c4ca[_0x50d319(0x156)]()['includes'](_0x50d319(0x220))&&(logger[_0x50d319(0x1e0)]('Invalid\x20Telegram\x20token'),tgBot[_0x50d319(0xad)](),tgBot=null,io['to'](_0x50d319(0xfd))[_0x50d319(0x14b)]('notification',_0x50d319(0x1a7)));}),process[_0x2789db(0x147)](_0x2789db(0x213),()=>{const _0x362e68=_0x2789db;if(tgBot)tgBot['stopPolling']();process[_0x362e68(0x127)](0x1);}),process[_0x2789db(0x147)](_0x2789db(0x209),()=>{const _0x3d022d=_0x2789db;if(tgBot)tgBot[_0x3d022d(0xad)]();process[_0x3d022d(0x127)](0x1);});}}function disableTelegram(){const _0x9dab5=_0x23395e;tgBot&&(tgBot[_0x9dab5(0xad)](),tgBot=null);}function sendTelegram(_0x33e81c,_0x20514d){const _0x380194=_0x23395e;if(settings[_0x380194(0x166)]){if(settings[_0x380194(0x175)]==_0x380194(0x212)||(_0x20514d[_0x380194(0x22a)]==_0x380194(0x1a1)||_0x20514d[_0x380194(0x22a)]==_0x380194(0x1d1)||_0x20514d[_0x380194(0x22a)]==_0x380194(0x16a))&&settings[_0x380194(0x175)]=='alerts'||_0x20514d[_0x380194(0x22a)]==_0x380194(0x21b)&&settings[_0x380194(0x175)]==_0x380194(0x190)){if(tgBot&&settings['telegramChatId']){if(_0x20514d[_0x380194(0x132)])tgBot[_0x380194(0x22b)](settings['telegramChatId'],_0x20514d['botname']+_0x380194(0x1b9)+_0x20514d[_0x380194(0xfe)])['catch'](_0x179f2d=>{telegramError(_0x179f2d);});else tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20'+_0x33e81c+_0x380194(0x1b9)+_0x20514d['event'])[_0x380194(0x1c3)](_0x3e726e=>{telegramError(_0x3e726e);});}}}}async function sendTelegramMsg(_0x3d103e,_0x529b6f='HTML'){const _0x536a0f=_0x23395e;return settings[_0x536a0f(0x166)]&&tgBot&&settings[_0x536a0f(0x1b0)]?(await tgBot[_0x536a0f(0x22b)](settings[_0x536a0f(0x1b0)],_0x3d103e,{'parse_mode':_0x529b6f})[_0x536a0f(0x1c3)](_0xd24967=>{telegramError(_0xd24967);}),!![]):![];}function getDeviceWithIp(_0x50ce08){const _0x32be8b=_0x23395e;return devices[_0x32be8b(0x1c9)](_0x4a121d=>_0x4a121d['ip']===_0x50ce08);}function temporaryAccess2FA(_0x376959,_0x997f91){const _0x51eb5a=_0x23395e;let _0x392260=new Date(),_0x1005ff=![];if(lastIpApproval){if(_0x392260-lastIpApproval<0x1388)_0x1005ff=!![];}lastIpApproval=new Date();if(_0x1005ff)return;tgBot&&settings[_0x51eb5a(0x1b0)]&&(tgBot['removeListener'](_0x51eb5a(0xbf)),tgBot[_0x51eb5a(0x22b)](settings[_0x51eb5a(0x1b0)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x997f91)[_0x51eb5a(0x219)]+_0x51eb5a(0x21c),{'parse_mode':_0x51eb5a(0xca),'reply_markup':{'inline_keyboard':[[{'text':_0x51eb5a(0x20a),'callback_data':'5'},{'text':_0x51eb5a(0xe9),'callback_data':'15'},{'text':_0x51eb5a(0x202),'callback_data':'30'},{'text':_0x51eb5a(0xaf),'callback_data':_0x51eb5a(0xaf)}]]}})[_0x51eb5a(0x1c3)](_0x10fe2e=>{telegramError(_0x10fe2e);}),tgBot['on'](_0x51eb5a(0xbf),async _0x4e0012=>{const _0x1fc179=_0x51eb5a,_0x500f75=_0x4e0012[_0x1fc179(0xf9)],_0x960c7=_0x4e0012[_0x1fc179(0x184)];tgBot[_0x1fc179(0x152)](_0x4e0012['id'])[_0x1fc179(0x11e)](async()=>{const _0x3212af=_0x1fc179;devices[_0x376959][_0x3212af(0x232)]={'clientip':_0x997f91,'timestamp':new Date()[_0x3212af(0x19b)](),'expiry':_0x500f75},_0x500f75!=_0x3212af(0xaf)?(await tgBot['sendMessage'](_0x960c7[_0x3212af(0x1b6)]['id'],'Access\x20enabled\x20for\x20'+_0x500f75+'\x20minutes',{'parse_mode':_0x3212af(0xca)})[_0x3212af(0x1c3)](_0x1401a0=>{telegramError(_0x1401a0);}),io['to'](_0x376959)['emit'](_0x3212af(0x12f),{'access':{'allow':![],'reason':_0x3212af(0x1d2),'token':null}})):(await tgBot['sendMessage'](_0x960c7['chat']['id'],_0x3212af(0xdd))[_0x3212af(0x1c3)](_0x5ef84a=>{telegramError(_0x5ef84a);}),io['to'](_0x376959)[_0x3212af(0x14b)](_0x3212af(0x12f),{'access':{'allow':![],'reason':_0x3212af(0x148),'token':null}}));}),tgBot[_0x1fc179(0x14f)](_0x1fc179(0xbf));}));}function loginAccess2FA(_0x1c7c52,_0xa38e0e){const _0x504264=_0x23395e;tgBot&&settings['telegramChatId']&&(tgBot[_0x504264(0x14f)](_0x504264(0xbf)),tgBot[_0x504264(0x22b)](settings[_0x504264(0x1b0)],_0x504264(0x1e2)+normalizeIP(_0xa38e0e)[_0x504264(0x219)]+_0x504264(0x21c),{'parse_mode':_0x504264(0xca),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x504264(0xaf),'callback_data':_0x504264(0xaf)}]]}})[_0x504264(0x1c3)](_0x57e79e=>{telegramError(_0x57e79e);}),tgBot['on']('callback_query',async _0x26e5b5=>{const _0x4fe914=_0x504264,_0x264946=_0x26e5b5['data'],_0x40c9df=_0x26e5b5['message'];tgBot[_0x4fe914(0x152)](_0x26e5b5['id'])[_0x4fe914(0x11e)](async()=>{const _0x4e8e90=_0x4fe914;devices[_0x1c7c52][_0x4e8e90(0x17e)]={'clientip':_0xa38e0e,'timestamp':new Date()['getTime'](),'expiry':_0x264946},_0x264946!='reject'?(await tgBot[_0x4e8e90(0x22b)](_0x40c9df[_0x4e8e90(0x1b6)]['id'],_0x4e8e90(0x1cd),{'parse_mode':_0x4e8e90(0xca)})['catch'](_0x51d6d9=>{telegramError(_0x51d6d9);}),io['to'](_0x1c7c52)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4e8e90(0x22b)](_0x40c9df[_0x4e8e90(0x1b6)]['id'],_0x4e8e90(0xd6))[_0x4e8e90(0x1c3)](_0x48a0c5=>{telegramError(_0x48a0c5);}),io['to'](_0x1c7c52)[_0x4e8e90(0x14b)](_0x4e8e90(0x12f),{'access':{'allow':![],'reason':_0x4e8e90(0x15d),'token':null}}));}),tgBot['removeListener'](_0x4fe914(0xbf));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3869b8=_0x23395e;return dbConfig[_0x3869b8(0x195)]('bots')[_0x3869b8(0x1fe)](_0x3869b8(0x111))[_0x3869b8(0x1d3)]({'status':_0x3869b8(0xb9)})['value']()||[];}function getDisabledBots(){const _0x434994=_0x23395e;return dbConfig['get'](_0x434994(0x17c))[_0x434994(0x1fe)](_0x434994(0x111))[_0x434994(0x1d3)]({'status':_0x434994(0x1b1)})[_0x434994(0xe0)]()||[];}function getBotAttributes(_0x481e8c){const _0x37212c=_0x23395e;let _0x45b853={};const _0xce2c64=configpath+'bot-'+_0x481e8c+_0x37212c(0x17d),_0x47c576=fs['existsSync'](_0xce2c64);if(_0x47c576){const _0x42d812=fs[_0x37212c(0x182)](_0xce2c64);try{const _0x39ce99=JSON['parse'](_0x42d812),_0x4389f7=_0x39ce99?_0x39ce99[_0x37212c(0xbc)][0x0][_0x37212c(0x115)]:![];_0x45b853[_0x37212c(0x1ce)]=_0x4389f7?_0x37212c(0xb7):_0x37212c(0x107),_0x45b853[_0x37212c(0xb2)]=_0x39ce99?_0x39ce99[_0x37212c(0xbc)][0x0][_0x37212c(0xb2)]:_0x37212c(0x167)+_0x481e8c;}catch(_0x35542e){_0x45b853[_0x37212c(0x1ce)]=_0x37212c(0x107),_0x45b853['botname']='Bot\x20'+_0x481e8c;}}else _0x45b853[_0x37212c(0x1ce)]=_0x37212c(0x107),_0x45b853[_0x37212c(0xb2)]=_0x37212c(0x167)+_0x481e8c;return _0x45b853;}function _0x48e7(){const _0x2d8d77=['\x20(2)','catch','bb-secure.json','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','mixpanel','bbvNew','Invalid\x20authentication\x20token\x20(1)','find','build','Unauthorized\x20attempt\x20to\x20delete\x20bot','params','Login\x20accepted','mode','add','store-headless','warning','reload','filter','sort','search','encryptedUuid','store-settings','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','inherit','Invalid\x20username\x20or\x20IP\x20address','*$1*','Password\x20reset\x20rejected','entries','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','136hZuhjX','full','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Allow\x20login\x20from\x20IP\x20address\x20<b>','clients','blacklist','args','/names\x20-\x20show\x20bot\x20names\x0a','telegramToken','kill','token','yes','createServer','file','headers','crypto','getHours','/download/:type','-results.json','alias','decrypt','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bcryptjs','-events.json','Unauthorized\x20attempt\x20to\x20download\x20','3KAjLyt','***','Invalid\x20IP\x20address','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','store-configuration','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','sortBy','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','access','socket','30\x20min','fork','simple','No\x20authentication\x20token','build2','index.html','1204004MLKBRS','SIGTERM','5\x20min','Rotate\x20log\x20files','************','lastmsgtelegram','getUTCHours','update-bb','ipc','request','all','SIGINT','yargs/yargs','assign','0.0.0','referer','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','show','getMonth','order','</b>\x20?','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','output-000.log','Error:\x20Invalid\x20argument\x20','404\x20Not\x20Found','telegrammsg','starting\x20bot\x20|\x20Bot\x20','test','latestversion','hybrid-crypto-js','deleteHistoryAlerts','196553hxoDCw','notification','max','type','sendMessage','getFullYear','verify','Password\x20has\x20been\x20reset\x20to:\x20','timeshift','Notifications\x20enabled\x0a','logs','telegramIpApproval','initclient','delete-bot','429212ZiEFEh','format','/disable\x20-\x20disable\x20notifications\x0a','settings.','2504828lXLZYi','Notifications\x20disabled','/:bot/performance','544362fziCnH','server','bbvReceive','new','access\x20timeout','login\x20token\x20valid','output-002.log','Notifications\x20disabled\x0a','whitelist','stopPolling','logged\x20out','reject','reset-password','restart','botname','/output-000.log',',\x20must\x20be\x20a\x204\x20digit\x20number','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','(((.+)+)+)+$','auto','copyFileSync','enabled','parse','2FA\x20required','bot','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','/:bot/coins','callback_query','.zip','reason','padStart','starting\x20new\x20bot\x20|\x20Bot\x20','backup','match','11509461KEKZFF','stop','new-disabled','uuid-random','HTML','uncaughtException','loginRequired','track','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','function','invalid\x20credentials','hasOwnProperty','cancel-loading','<b>Balance\x20Bot\x20Status:</b>\x0a','error\x20while\x20deleting\x20config\x20files:\x20','NTBA_FIX_319','Login\x20rejected','isDirectory','Unauthorized\x20attempt\x20to\x20delete\x20alerts','127.0.0.1','RSA-OAEP','::1','allow','Temporary\x20access\x20rejected','any','express','value','started','compareSync','login\x20required','bot-','version','write','Notifications\x20types:\x20','removeAllListeners','15\x20min','clientip','-----------------------------------------------------------------------------------','send','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','sockets','pidRefreshToken','node-telegram-bot-api','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','login\x20token\x20generated','sendFile','sign','writeFileSync','Unauthorized\x20attempt\x20to\x20confirm\x20message','readdirSync','data','sendPortfolioTelegram','pidExpireLogin','join','botmanager','event','bb-settings.json','::ffff:127.0.0.1','remoteAddress','Bot\x20Mgr\x20>\x20','15nwNnSn','hashSync','output-001.log','bbUsername','manual','live','userid','2FA','unlinkSync','/:bot/portfolio','timestamp','disabled\x20Bot\x20','randomBytes','push','botID','getStartingBalances','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20messages','headless','connection','store','update-bot','length','1000','2FA\x20login\x20token\x20generated','confirm-message','add-bot','then','child_process','6b67f3d61ee94b8f5c80b4affef4c4d9','sha256','listen','exp','version.json','logout','/off\x20-\x20stop\x20bot(s)\x0a','exit','get-messages','lowdb/adapters/FileSync','title','settings','whitelistEnabled','set','enabled\x20Bot\x20','status','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/:bot/configuration','showname','name','All\x20bots\x20running\x20right\x20now','3000','telegramUsername','\x20|\x20','bb/','alerts','toIPv4Address','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','user','You\x20can\x20use\x20the\x20following\x20commands:\x0a','DEFLATE','remove','stringify','defaults','hex','messages','Ok,\x20will\x20send\x20alert\x20notifications\x20only','idling\x20bot\x20\x20\x20|\x20Bot\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','once','temporary\x20access\x20rejected','telegram','startsWith','emit','/enable\x20-\x20enable\x20notifications\x0a','existsSync','publicKey','removeListener','argv','Starting\x20Balance\x20Bot\x20update','answerCallbackQuery','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','isValid','All\x20bots','toString','updatebotmanager','output-003.log','graphql-request','2FA\x20login\x20required','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','toggleBotMode','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20get\x20logs','https://api.ipify.org?format=json','download','username','apiSecret','bbPassword','includes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','telegramEnabled','Bot\x20','secret','connected','success','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','lowdb','replace','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','getDate','onText','number','apiKey','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','split','telegramEvents','uuid','restarting\x20Bot\x20','getMinutes','\x20to\x20','expiry','logs/','bots','-config.json','telegram2FaApproval','path','\x20(1)','static','readFileSync','placeOrder','message','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/:bot','User\x20has\x20been\x20validated','25284340wrcTnf','conn','\x20only\x0a','getSeconds','secure','randomFillSync','generate','password','orders','zip/','keys','Unauthorized\x20attempt\x20to\x20log\x20out','from','get','Unauthorized\x20attempt\x20to\x20update\x20bot','get-portfolio','Server','privateKey','login','getTime','f2aRequired','Unauthorized\x20attempt\x20to\x20add\x20bot','apply','use','bot.js','error','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Alerts','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','http','cancelLoading','Invalid\x20Telegram\x20token','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','node-zip','delete-alerts','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20store\x20configuration','createWriteStream','constructor','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','telegramChatId','disabled','login\x20not\x20required','host','log','forEach','chat','config/','disconnect','\x20>\x20','lastmsgemitted','mkdirSync','\x20mode','Unauthorized\x20attempt\x20to\x20get\x20portfolio','running','Orders','stopped','getPortfolio'];_0x48e7=function(){return _0x2d8d77;};return _0x48e7();}function getBotsWithMode(){const _0x130c0d=_0x23395e,_0x26d751=dbConfig[_0x130c0d(0x195)]('bots')[_0x130c0d(0x1fe)](_0x130c0d(0x111))[_0x130c0d(0xe0)]()||[];return _0x26d751[_0x130c0d(0x1b5)](_0x4108b9=>{const _0x4aa4e1=_0x130c0d;let _0x4d7d8b=getBotAttributes(_0x4108b9[_0x4aa4e1(0x111)]);_0x4108b9[_0x4aa4e1(0x1ce)]=_0x4d7d8b[_0x4aa4e1(0x1ce)];}),_0x26d751;}async function initUser(){const _0x32acb5=_0x23395e;if(!settings[_0x32acb5(0x109)]){const _0x4b407f=uuidRandom();mixpanel[_0x32acb5(0x1f2)](_0x4b407f),updateSetting(_0x32acb5(0x109),_0x4b407f);}}async function initSecure(){const _0x511427=_0x23395e;let _0x591a65=getSecure();if(!_0x591a65[_0x511427(0xd1)]('secret')){let _0x1e127d=await generateKeys();_0x591a65[_0x511427(0x14e)]=_0x1e127d[_0x511427(0x14e)],_0x591a65['privateKey']=_0x1e127d[_0x511427(0x199)],_0x591a65[_0x511427(0x168)]=crypto[_0x511427(0x10f)](0x20)[_0x511427(0x156)](_0x511427(0x142));;storeSecure(_0x591a65);}}function getSettings(){const _0x3a714a=_0x23395e;return dbSettings['get'](_0x3a714a(0x12b))['value']()||{};}function getSecure(){const _0x1455f8=_0x23395e;return dbSecure[_0x1455f8(0x195)]('secure')[_0x1455f8(0xe0)]()||{};}function getBlacklist(){const _0x4465bf=_0x23395e;return dbSecure[_0x4465bf(0x195)](_0x4465bf(0x1e4))['value']()||[];}function broadcastToBots(_0x213d64,_0x39bf4c){const _0x43214a=_0x23395e;config[_0x43214a(0x1b5)](_0x35204a=>{const _0x33e4de=_0x43214a;if(_0x35204a[_0x33e4de(0x12f)]=='enabled'&&_0x35204a[_0x33e4de(0x108)]==_0x33e4de(0x1be)){if(pid[_0x35204a[_0x33e4de(0x111)]])pid[_0x35204a['botID']]['send']({[_0x213d64]:_0x39bf4c});}});}function storeSettings(_0x349780,_0x1854e7=![]){const _0x4c1480=_0x23395e;_0x349780={...settings,..._0x349780};if(_0x1854e7&&_0x349780[_0x4c1480(0x163)]!=_0x4c1480(0x20c)&&_0x349780['bbPassword']!=''){const _0xffe85d=crypt['decrypt'](secure[_0x4c1480(0x199)],_0x349780[_0x4c1480(0x163)])['message']['split']('@')[0x0],_0x34799c=bcrypt[_0x4c1480(0x104)](_0xffe85d,saltRounds);_0x349780={..._0x349780,'bbPassword':_0x34799c};}if(_0x1854e7&&_0x349780[_0x4c1480(0x1e7)]!='************'&&_0x349780['telegramToken']!=''){const _0x2563ee=crypt[_0x4c1480(0x1f3)](secure[_0x4c1480(0x199)],_0x349780[_0x4c1480(0x1e7)])[_0x4c1480(0x184)]['split']('@')[0x0];_0x349780={..._0x349780,'telegramToken':_0x2563ee};}const _0x331a10=_0x349780[_0x4c1480(0x1e7)]!=_0x4c1480(0x20c)&&_0x349780[_0x4c1480(0x1e7)]!=settings[_0x4c1480(0x1e7)]||_0x349780[_0x4c1480(0x136)]!=settings['telegramUsername'],_0xf5713a=_0x349780[_0x4c1480(0x1e7)]==''||_0x349780[_0x4c1480(0x136)]=='';if(_0x331a10)_0x349780[_0x4c1480(0x175)]='all';for(const [_0x35fd4b,_0x533d41]of Object[_0x4c1480(0x1dd)](_0x349780)){if(_0x35fd4b==_0x4c1480(0x1e7)&&_0x533d41=='************'){_0x349780[_0x4c1480(0x1e7)]=settings[_0x4c1480(0x1e7)];continue;};if(_0x35fd4b==_0x4c1480(0x163)&&_0x533d41==_0x4c1480(0x20c)){_0x349780[_0x4c1480(0x163)]=settings[_0x4c1480(0x163)];continue;};dbSettings[_0x4c1480(0x12d)](_0x4c1480(0xa0)+_0x35fd4b,_0x533d41)['write']();}settings=_0x349780,io['to'](_0x4c1480(0xfd))[_0x4c1480(0x14b)](_0x4c1480(0x12b),cleanSettings()),broadcastToBots(_0x4c1480(0x22f),settings[_0x4c1480(0x22f)]);if(_0x331a10&&!_0xf5713a)initTelegram();if(_0x331a10&&_0xf5713a)disableTelegram();getAllClients()[_0x4c1480(0x1b5)](_0x8f9e0b=>{const _0x2d2084=_0x4c1480;getSocket(_0x8f9e0b['id'])[_0x2d2084(0x14b)]('status',{'access':{'allow':![],'reason':_0x2d2084(0x1d2),'token':null}});});}function updateSetting(_0x266360,_0x3cb8cc){const _0x51d8ab=_0x23395e;dbSettings[_0x51d8ab(0x12d)](_0x51d8ab(0xa0)+_0x266360,_0x3cb8cc)[_0x51d8ab(0xe6)](),settings=getSettings(),io['to'](_0x51d8ab(0xfd))[_0x51d8ab(0x14b)]('settings',cleanSettings());}function storeSecure(_0x35ab99){const _0x3fb561=_0x23395e;dbSecure[_0x3fb561(0x195)](_0x3fb561(0x18c))[_0x3fb561(0x110)](_0x35ab99)[_0x3fb561(0xe6)](),secure=_0x35ab99;}function addBlacklist(_0x5598ff){const _0x2fca88=_0x23395e;cleanBlacklist();let _0x29e169;devices[_0x5598ff][_0x2fca88(0x232)]?_0x29e169=Math[_0x2fca88(0x229)](devices[_0x5598ff]['telegramIpApproval'][_0x2fca88(0x17a)],loginExpiry):_0x29e169=loginExpiry,dbSecure[_0x2fca88(0x195)](_0x2fca88(0x1e4))[_0x2fca88(0x110)]({'expiry':new Date()[_0x2fca88(0x19b)]()+_0x29e169*0x3c*0x3e8,'token':devices[_0x5598ff][_0x2fca88(0x200)][_0x2fca88(0x1e9)]})[_0x2fca88(0xe6)](),blacklist=dbSecure[_0x2fca88(0x195)](_0x2fca88(0x1e4))['value']();}function cleanBlacklist(){const _0x492f85=_0x23395e;let _0x177e7b=dbSecure['get'](_0x492f85(0x1e4))['cloneDeep']()[_0x492f85(0xe0)](),_0xe1965=new Date()[_0x492f85(0x19b)]();_0x177e7b['forEach'](_0x2c47a5=>{const _0x4b0b52=_0x492f85;_0x2c47a5[_0x4b0b52(0x17a)]<_0xe1965&&dbSecure[_0x4b0b52(0x195)](_0x4b0b52(0x1e4))[_0x4b0b52(0x13f)]({'expiry':_0x2c47a5[_0x4b0b52(0x17a)]})[_0x4b0b52(0xe6)]();});}function initStates(){const _0x4ee190=_0x23395e;let _0x10b568=getConfiguration();_0x10b568[_0x4ee190(0x1b5)](_0xf52279=>{const _0x1b708a=_0x4ee190;_0xf52279[_0x1b708a(0x108)]=_0x1b708a(0x1c0);}),storeConfiguration(_0x10b568);}function onKeys(){const _0x387d5c=new RSA();return new Promise(_0x5a60aa=>{const _0x12d8c3=_0x3706;_0x387d5c['generateKeyPairAsync']()[_0x12d8c3(0x11e)](_0x391f77=>{_0x5a60aa(_0x391f77);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x522766=_0x23395e;let _0x294442=getSettings(),_0x14523d=![];!_0x294442[_0x522766(0xd1)](_0x522766(0x20d))&&(_0x294442['lastmsgtelegram']=0x0,_0x14523d=!![]);!_0x294442[_0x522766(0xd1)](_0x522766(0x1ba))&&(_0x294442[_0x522766(0x1ba)]=0x0,_0x14523d=!![]);!_0x294442[_0x522766(0xd1)]('latestversion')&&(_0x294442[_0x522766(0x224)]='0.0.0',_0x14523d=!![]);if(_0x14523d)storeSettings(_0x294442);}function storeConfiguration(_0x2de29){const _0x3ae16e=_0x23395e;dbConfig[_0x3ae16e(0x195)](_0x3ae16e(0x17c))[_0x3ae16e(0x13f)]()[_0x3ae16e(0xe6)](),_0x2de29[_0x3ae16e(0x1b5)](_0x162481=>{delete _0x162481['mode'];}),dbConfig[_0x3ae16e(0x195)]('bots')[_0x3ae16e(0x110)](..._0x2de29)[_0x3ae16e(0xe6)](),config=_0x2de29;}function resetPassword(){const _0x5bd901=_0x23395e;tgBot&&settings[_0x5bd901(0x1b0)]&&(tgBot[_0x5bd901(0x14f)](_0x5bd901(0xbf)),tgBot['sendMessage'](settings[_0x5bd901(0x1b0)],_0x5bd901(0x1f4),{'parse_mode':_0x5bd901(0xca),'reply_markup':{'inline_keyboard':[[{'text':_0x5bd901(0x1ea),'callback_data':_0x5bd901(0x1ea)},{'text':'no','callback_data':'no'}]]}})[_0x5bd901(0x1c3)](_0x1e4bf8=>{telegramError(_0x1e4bf8);}),tgBot['on'](_0x5bd901(0xbf),async _0x47a427=>{const _0x552dd8=_0x5bd901,_0x3d6b35=_0x47a427['data'],_0x411809=_0x47a427[_0x552dd8(0x184)];tgBot[_0x552dd8(0x152)](_0x47a427['id'])[_0x552dd8(0x11e)](async()=>{const _0x39d22d=_0x552dd8;if(_0x3d6b35!='no'){const _0x5b1eb3=0xf,_0x2bda9f=_0x39d22d(0x1d8),_0x5bb665=Array[_0x39d22d(0x194)](crypto[_0x39d22d(0x18d)](new Uint32Array(_0x5b1eb3)))['map'](_0x2ea621=>_0x2bda9f[_0x2ea621%_0x2bda9f['length']])[_0x39d22d(0xfc)](''),_0x319a42=bcrypt['hashSync'](_0x5bb665,saltRounds);storeSettings({'bbPassword':_0x319a42}),await tgBot[_0x39d22d(0x22b)](_0x411809['chat']['id'],_0x39d22d(0x22e)+_0x5bb665,{'parse_mode':_0x39d22d(0xca)})[_0x39d22d(0x1c3)](_0x4f847a=>{telegramError(_0x4f847a);});}else await tgBot[_0x39d22d(0x22b)](_0x411809[_0x39d22d(0x1b6)]['id'],_0x39d22d(0x1dc))[_0x39d22d(0x1c3)](_0x3bef05=>{telegramError(_0x3bef05);});}),tgBot[_0x552dd8(0x14f)]('callback_query');}));}function _0x3706(_0x4aeb91,_0x5c3c13){const _0x66dcde=_0x48e7();return _0x3706=function(_0x4fc853,_0x163864){_0x4fc853=_0x4fc853-0x9c;let _0x48e70c=_0x66dcde[_0x4fc853];return _0x48e70c;},_0x3706(_0x4aeb91,_0x5c3c13);}function getServerTime(){const _0x30e715=_0x23395e,_0x323777=new Date();return _0x323777[_0x30e715(0x22c)]()+'/'+(_0x323777[_0x30e715(0x21a)]()+0x1)[_0x30e715(0x156)]()[_0x30e715(0xc2)](0x2,'0')+'/'+_0x323777[_0x30e715(0x16f)]()[_0x30e715(0x156)]()[_0x30e715(0xc2)](0x2,'0')+'\x20'+_0x323777[_0x30e715(0x1ef)]()[_0x30e715(0x156)]()[_0x30e715(0xc2)](0x2,'0')+':'+_0x323777[_0x30e715(0x178)]()[_0x30e715(0x156)]()[_0x30e715(0xc2)](0x2,'0')+':'+_0x323777[_0x30e715(0x18b)]()[_0x30e715(0x156)]()[_0x30e715(0xc2)](0x2,'0');}function getTimeStamp(){const _0xdf87fa=_0x23395e,_0x415a56=shiftedTime();return _0x415a56[_0xdf87fa(0x22c)]()+'/'+(_0x415a56[_0xdf87fa(0x21a)]()+0x1)[_0xdf87fa(0x156)]()['padStart'](0x2,'0')+'/'+_0x415a56['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x415a56['getHours']()[_0xdf87fa(0x156)]()[_0xdf87fa(0xc2)](0x2,'0')+':'+_0x415a56['getMinutes']()[_0xdf87fa(0x156)]()[_0xdf87fa(0xc2)](0x2,'0')+':'+_0x415a56[_0xdf87fa(0x18b)]()[_0xdf87fa(0x156)]()[_0xdf87fa(0xc2)](0x2,'0');}function shiftedTime(){const _0x58c14a=_0x23395e,_0x3d58c8=new Date();let _0x790cef=_0x3d58c8;if(settings[_0x58c14a(0x22f)]&&settings[_0x58c14a(0x22f)]!==0x0)_0x790cef=fns[_0x58c14a(0x1cf)](_0x3d58c8,{'hours':settings['timeshift']});return _0x790cef;}function startScheduler(){const _0x520754=_0x23395e,_0x24c33e=new Date()[_0x520754(0x20e)](),_0x2635c5=shiftedTime()[_0x520754(0x1ef)]();_0x2635c5==0x4&&backupConfigFiles();_0x2635c5==0x0&&rotateLogFiles();_0x24c33e%0x6==0x0&&triggerAnalytics();_0x24c33e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x256744=>{const _0x3994f5=_0x3706;if(!_0x256744[_0x3994f5(0xd7)]())fs[_0x3994f5(0xb8)](configpath+_0x256744[_0x3994f5(0x133)],configbackuppath+_0x256744[_0x3994f5(0x133)]);});}function rotateLogFiles(){const _0x467752=_0x23395e;console['log'](_0x467752(0x20b));let _0xe9d984=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0xe9d984[_0x467752(0x1d4)]((_0x255d2a,_0x455d36)=>_0x255d2a['name']<_0x455d36[_0x467752(0x133)]?0x1:_0x455d36[_0x467752(0x133)]<_0x255d2a[_0x467752(0x133)]?-0x1:0x0),_0xe9d984['forEach'](_0x3efea0=>{const _0x22bb02=_0x467752;if(_0x3efea0[_0x22bb02(0x133)]==_0x22bb02(0xaa))fs['copyFileSync'](logspath+_0x3efea0['name'],logspath+_0x22bb02(0x158));if(_0x3efea0['name']==_0x22bb02(0x105))fs['copyFileSync'](logspath+_0x3efea0[_0x22bb02(0x133)],logspath+_0x22bb02(0xaa));_0x3efea0[_0x22bb02(0x133)]==_0x22bb02(0x21e)&&(fs[_0x22bb02(0xb8)](logspath+_0x3efea0[_0x22bb02(0x133)],logspath+_0x22bb02(0x105)),fs[_0x22bb02(0xf6)](logspath+_0x3efea0[_0x22bb02(0x133)],''));});}async function zipFiles(_0x290eb0){const _0x41099b=_0x23395e;let _0xe118d5;if(_0x290eb0==_0x41099b(0x231))_0xe118d5=logspath;if(_0x290eb0==_0x41099b(0xc4))_0xe118d5=configpath;let _0x3766f2=fs[_0x41099b(0xf8)](_0xe118d5,{'withFileTypes':!![]});const _0x242371=new require(_0x41099b(0x1a9))();_0x3766f2[_0x41099b(0x1b5)](_0x4b5142=>{const _0x354dbb=_0x41099b;if(!_0x4b5142[_0x354dbb(0xd7)]()){let _0x3968a0=fs[_0x354dbb(0x182)](_0xe118d5+_0x4b5142['name']);const _0x241323=/^bot-[0-9]{3}-config.json$/,_0x120a1a=_0x241323[_0x354dbb(0x223)](_0x4b5142[_0x354dbb(0x133)]);if(_0x120a1a){const _0xbdda2d=JSON[_0x354dbb(0xba)](_0x3968a0);_0xbdda2d[_0x354dbb(0xbc)][0x0][_0x354dbb(0x172)]=_0x354dbb(0x1f9),_0xbdda2d[_0x354dbb(0xbc)][0x0][_0x354dbb(0x162)]='***',_0x3968a0=JSON['stringify'](_0xbdda2d,null,0x2);}if(_0x4b5142[_0x354dbb(0x133)]==_0x354dbb(0xff)){const _0x29775c=JSON['parse'](_0x3968a0);if(_0x29775c['settings'][_0x354dbb(0xcc)])_0x29775c[_0x354dbb(0x12b)]['loginRequired']=![];if(_0x29775c['settings'][_0x354dbb(0x163)])_0x29775c[_0x354dbb(0x12b)][_0x354dbb(0x163)]='***';if(_0x29775c['settings'][_0x354dbb(0x1e7)])_0x29775c['settings']['telegramToken']=_0x354dbb(0x1f9);if(_0x29775c['settings'][_0x354dbb(0x1b0)])_0x29775c[_0x354dbb(0x12b)][_0x354dbb(0x1b0)]='';_0x3968a0=JSON[_0x354dbb(0x140)](_0x29775c,null,0x2);}if(_0x4b5142[_0x354dbb(0x133)]!=_0x354dbb(0x1c4))_0x242371[_0x354dbb(0x1ec)](_0x4b5142[_0x354dbb(0x133)],_0x3968a0);}});const _0x529def=_0x242371[_0x41099b(0x18e)]({'base64':![],'compression':_0x41099b(0x13e)});fs[_0x41099b(0xf6)](zippath+(_0x290eb0+_0x41099b(0xc0)),_0x529def,'binary');}async function getPublicIp(){const _0x2131bd=_0x23395e;try{const _0x5d268c=await axios[_0x2131bd(0x195)](_0x2131bd(0x15f));publicip=_0x5d268c[_0x2131bd(0xf9)]['ip'];}catch(_0x58f269){}}async function triggerAnalytics(){const _0x502b8c=_0x23395e;if(!publicip)await getPublicIp();const _0xae4879=getBotsWithMode();let _0x529165=0x0;_0xae4879[_0x502b8c(0x1b5)](_0x4635d2=>{const _0x318f8c=_0x502b8c;if(_0x4635d2[_0x318f8c(0x12f)]===_0x318f8c(0xb9))_0x529165++;}),mixpanel[_0x502b8c(0xcd)](_0x502b8c(0x198),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0xae4879[_0x502b8c(0x119)],'numbotsenabled':_0x529165});}async function getMessages(){const _0x36e447=_0x23395e,_0x81fad=_0x36e447(0x173),_0x379652=new GraphQLClient(_0x81fad),_0x5740be={'authorization':_0x36e447(0x15b)},_0x43761b=serverversion[_0x36e447(0x174)]('.'),_0x2490cf=_0x43761b[0x0]+'.'+_0x43761b[0x1],_0x43b732=Math['min'](settings[_0x36e447(0x20d)],settings[_0x36e447(0x1ba)]),_0x5882f6={'last':parseInt(_0x43b732),'bbm':_0x2490cf},_0x4807d3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x502bef;try{_0x502bef=await _0x379652[_0x36e447(0x211)](_0x4807d3,_0x5882f6,_0x5740be);}catch(_0x4843d5){}if(_0x502bef&&_0x502bef[_0x36e447(0x143)]){let _0x1df93a=settings[_0x36e447(0x20d)];newMessages=[];for(const _0x568fe5 of _0x502bef[_0x36e447(0x143)]){newMessages[_0x36e447(0x110)](_0x568fe5);if(_0x568fe5[_0x36e447(0x1c7)])updateSetting(_0x36e447(0x224),_0x568fe5['bbvNew']);let _0x43220a=_0x568fe5['bbvNew']?serverversion>=_0x568fe5[_0x36e447(0x1c7)]:![];if(!_0x43220a&&_0x568fe5[_0x36e447(0x171)]>_0x1df93a){if(_0x568fe5[_0x36e447(0xa6)]===_0x36e447(0xde)||serverversion[_0x36e447(0x14a)](_0x568fe5[_0x36e447(0xa6)])){let _0x3a716a=''+_0x568fe5[_0x36e447(0x12a)]+'\x0a\x0a'+_0x568fe5[_0x36e447(0x184)];const _0x12ca09=await sendTelegramMsg(toTelegramMarkdown(_0x3a716a),'Markdown');if(_0x12ca09)_0x1df93a=_0x568fe5[_0x36e447(0x171)];}}}updateAvailable=isNewerVersion(settings[_0x36e447(0x224)],serverversion),updateSetting('lastmsgtelegram',_0x1df93a),emitMessages();}}function emitMessages(){const _0x595927=_0x23395e,_0x33a56f=settings['lastmsgemitted'];let _0x17077d=[];newMessages[_0x595927(0x1b5)](_0x5b2496=>{const _0x592ffa=_0x595927;_0x5b2496[_0x592ffa(0x171)]>_0x33a56f&&_0x17077d['push'](_0x5b2496);}),_0x17077d[_0x595927(0x119)]>0x0&&getAllClients()['forEach'](_0x171a27=>{const _0x1aef42=_0x595927;getSocket(_0x171a27['id'])[_0x1aef42(0x14b)](_0x1aef42(0x184),_0x17077d);});}function confirmMessage(_0x2afa03){const _0x5ab982=_0x23395e;updateSetting(_0x5ab982(0x1ba),Number(_0x2afa03));}function isNewerVersion(_0x4bf35f,_0x2989de){const _0x20157d=_0x23395e,_0x1a2cf3=_0x2989de[_0x20157d(0x174)]('.'),_0x5376f2=_0x4bf35f[_0x20157d(0x174)]('.');for(var _0x24256b=0x0;_0x24256b<_0x5376f2['length'];_0x24256b++){const _0x5a8f32=~~_0x5376f2[_0x24256b],_0x1fac31=~~_0x1a2cf3[_0x24256b];if(_0x5a8f32>_0x1fac31)return!![];if(_0x5a8f32<_0x1fac31)return![];}return![];}function toTelegramMarkdown(_0x27dbf8){const _0x413388=_0x23395e,_0x4aa854=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5cb079=/\*{2}(.+?)\*{2}/gim;return _0x27dbf8=_0x27dbf8[_0x413388(0x16d)](_0x4aa854,'$1_$2_$3')['replace'](_0x5cb079,_0x413388(0x1db)),_0x27dbf8;}async function validateConfigFile(){const _0x193c26=_0x23395e,_0x30dc12=dbConfig['get'](_0x193c26(0x17c))[_0x193c26(0x1fe)](_0x193c26(0x111))[_0x193c26(0xe0)]()||[];if(_0x30dc12[_0x193c26(0x119)]==0x0){let _0x457b1e=0x0,_0x848242=[];const _0x405be4=/^bot-([0-9]{3})-config.json$/,_0x5d6142=fs[_0x193c26(0xf8)](configpath);_0x5d6142[_0x193c26(0x1b5)](_0x7276a8=>{const _0x3abe3e=_0x193c26,_0x44c273=_0x405be4['exec'](_0x7276a8);if(_0x44c273){const _0x1edfe5=_0x44c273[0x1];let _0x51e45b=getBotAttributes(_0x1edfe5);_0x848242[_0x3abe3e(0x110)]({'botID':_0x1edfe5,'botname':_0x51e45b[_0x3abe3e(0xb2)],'status':_0x3abe3e(0x1b1),'live':_0x3abe3e(0x1c0)}),_0x457b1e++;}}),_0x457b1e!=0x0&&(dbConfig[_0x193c26(0x195)]('bots')[_0x193c26(0x215)](_0x848242)['write'](),config=_0x848242,restoredConfigFile=_0x457b1e);}}async function restoreConfigNotify(_0x13f472){const _0x2d2d43=_0x23395e;let _0x527d35;if(restoredConfigFile==0x1)_0x527d35=_0x2d2d43(0x1de);else _0x527d35=_0x2d2d43(0xce);if(_0x13f472)io['to']('botmanager')[_0x2d2d43(0x14b)](_0x2d2d43(0x228),_0x527d35);else{logger['simple'](_0x2d2d43(0xeb)),logger[_0x2d2d43(0x204)](_0x527d35),logger[_0x2d2d43(0x204)](_0x2d2d43(0xeb)),logger[_0x2d2d43(0x204)]('');if(tgBot&&settings[_0x2d2d43(0x1b0)]&&settings[_0x2d2d43(0x175)]!=_0x2d2d43(0x190))tgBot[_0x2d2d43(0x22b)](settings[_0x2d2d43(0x1b0)],'Bot\x20Mgr\x20>\x20'+_0x527d35)[_0x2d2d43(0x1c3)](_0x259103=>{telegramError(_0x259103);});}}function validateCredentials(_0x3274bb,_0xaecca8){const _0xfe17fa=_0x23395e;if(_0x3274bb[_0xfe17fa(0x161)]==settings[_0xfe17fa(0x106)]&&bcrypt[_0xfe17fa(0xe2)](_0x3274bb[_0xfe17fa(0x18f)],settings['bbPassword'])){if(settings[_0xfe17fa(0x19c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x211344=generateLoginToken(_0xaecca8);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x211344};}}else return{'allow':![],'reason':_0xfe17fa(0xd0),'token':null};}function refreshToken(_0x13c621){const _0x106f4c=_0x23395e,_0x42abdf=generateLoginToken(_0x13c621);return{'allow':!![],'reason':_0x106f4c(0xf3),'token':_0x42abdf};}function validateAccess(_0x85d81c,_0x2fa7b2,_0x35dfa1){const _0x127b7d=_0x23395e,_0x2acf00=_0x35dfa1?_0x35dfa1:devices[_0x2fa7b2]['ip'];let _0x4f1982;const _0x302569=_0x507e32=>{const _0x494164=_0x3706;if(settings['loginRequired']){if(settings[_0x494164(0x19c)]){if(telegram2FaApproved(_0x2fa7b2)){const _0x26b703=generateLoginToken(_0x2fa7b2);return{'allow':!![],'reason':_0x494164(0x11b),'token':_0x26b703};}else return{'allow':![],'reason':_0x494164(0xe3),'token':null};}else return _0x4f1982=validToken(_0x507e32,_0x2fa7b2),_0x4f1982[_0x494164(0xd1)](_0x494164(0x16a))?{'allow':!![],'reason':_0x494164(0xa9),'token':_0x507e32}:{'allow':![],'reason':_0x494164(0xe3),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x127b7d(0x12c)]){let _0x349f01=[...settings[_0x127b7d(0xac)],_0x127b7d(0xdb),_0x127b7d(0x100),_0x127b7d(0xd9)];if(_0x349f01[_0x127b7d(0x164)](_0x2acf00))return _0x302569(_0x85d81c);else{_0x4f1982=validToken(_0x85d81c,_0x2fa7b2);if(_0x4f1982[_0x127b7d(0xd1)]('success'))return _0x302569(_0x85d81c);else{if(telegramIpApproved(_0x2fa7b2)){const _0x1445a5=generateToken(_0x2fa7b2);return _0x4f1982=_0x302569(_0x85d81c),_0x4f1982[_0x127b7d(0xdc)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x1445a5}:_0x4f1982;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x127b7d(0xbb),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x302569(_0x85d81c);}function timelyDecrypt(_0x3fc8db,_0x57a486=!![]){const _0x1d6cbe=_0x23395e;if(_0x3fc8db)try{const _0x3bf3e8=crypt[_0x1d6cbe(0x1f3)](secure[_0x1d6cbe(0x199)],_0x3fc8db)[_0x1d6cbe(0x184)],_0x219519=_0x3bf3e8[_0x1d6cbe(0x174)]('@')[0x0],_0x2357ef=_0x3bf3e8['split']('@')[0x1],_0x453444=new Date()[_0x1d6cbe(0x19b)]();if(_0x57a486){if(_0x453444-_0x2357ef<maxSecretAge*0x3e8)return _0x219519;else return![];}else return _0x219519;}catch(_0x304c53){return![];}else return![];}const validToken=(_0x2a21ff,_0x48e226)=>{const _0x3e7fab=_0x23395e,_0xa65f84=devices[_0x48e226]['ip'];if(!_0x2a21ff)return{'error':_0x3e7fab(0x205)};for(let _0x34781f of blacklist){if(_0x34781f[_0x3e7fab(0x1e9)]==_0x2a21ff)return{'error':'Token\x20blacklisted'};}let _0x2de626;try{_0x2de626=jwt[_0x3e7fab(0x22d)](_0x2a21ff,secure[_0x3e7fab(0x168)]+_0x48e226);}catch{return{'error':_0x3e7fab(0x1c8)};}if(!_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0xea))&&!_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0x161))||!_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0x123)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0x161))&&_0x2de626['hasOwnProperty']('clientip')){const {clientip:_0x23c10d}=_0x2de626;return _0xa65f84==_0x23c10d?{'success':_0x3e7fab(0x187)}:{'error':_0x3e7fab(0x1fa)};}else{if(_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0x161))&&_0x2de626[_0x3e7fab(0xd1)](_0x3e7fab(0xea))){const {username:_0x39a401,clientip:_0x5a4aaf}=_0x2de626;return settings[_0x3e7fab(0x106)]==_0x39a401&&_0xa65f84==_0x5a4aaf?{'success':_0x3e7fab(0x187)}:{'error':_0x3e7fab(0x1da)};}}},generateLoginToken=_0x10d5fc=>{const _0x2dd8fc=_0x23395e;if(_0x10d5fc){const _0x48716f=devices[_0x10d5fc]['ip'];return jwt['sign']({'username':settings[_0x2dd8fc(0x106)],'clientip':_0x48716f},secure[_0x2dd8fc(0x168)]+_0x10d5fc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4de6b2=>{const _0x678652=_0x23395e;if(_0x4de6b2){const _0x2c2a04=devices[_0x4de6b2]['ip'];return jwt[_0x678652(0xf5)]({'clientip':_0x2c2a04},secure[_0x678652(0x168)]+_0x4de6b2,{'expiresIn':devices[_0x4de6b2][_0x678652(0x232)][_0x678652(0x17a)]*0x3c});}else return![];},telegramIpApproved=_0xbd1e4b=>{const _0x259fdd=_0x23395e;let _0x17c7d0=![];return devices[_0xbd1e4b][_0x259fdd(0x232)]&&devices[_0xbd1e4b][_0x259fdd(0x232)]['expiry']!=_0x259fdd(0xaf)&&(_0x17c7d0=devices[_0xbd1e4b][_0x259fdd(0x232)]['clientip']==devices[_0xbd1e4b]['ip']&&new Date()['getTime']()-devices[_0xbd1e4b][_0x259fdd(0x232)][_0x259fdd(0x10d)]<devices[_0xbd1e4b][_0x259fdd(0x232)][_0x259fdd(0x17a)]*0x3c*0x3e8),_0x17c7d0;},telegram2FaApproved=_0xc90831=>{const _0x27f82c=_0x23395e;let _0x5e76ec=![];return devices[_0xc90831]['telegram2FaApproval']&&devices[_0xc90831][_0x27f82c(0x17e)][_0x27f82c(0x17a)]!=_0x27f82c(0xaf)&&(_0x5e76ec=devices[_0xc90831][_0x27f82c(0x17e)][_0x27f82c(0xea)]==devices[_0xc90831]['ip']&&new Date()[_0x27f82c(0x19b)]()-devices[_0xc90831][_0x27f82c(0x17e)][_0x27f82c(0x10d)]<devices[_0xc90831][_0x27f82c(0x17e)][_0x27f82c(0x17a)]*0x3c*0x3e8),_0x5e76ec;},normalizeIP=_0x20914b=>{const _0x26141f=_0x23395e;let _0x57330f=null,_0x4af723=null;if(ipaddr[_0x26141f(0x154)](_0x20914b)){const _0x25a230=ipaddr['parse'](_0x20914b);_0x25a230['kind']()==='ipv6'?(_0x25a230['isIPv4MappedAddress']()&&(_0x57330f=_0x25a230[_0x26141f(0x13a)]()[_0x26141f(0x156)]()),_0x4af723=_0x25a230[_0x26141f(0x156)]()):(_0x57330f=_0x25a230[_0x26141f(0x156)](),_0x4af723=_0x25a230['toIPv4MappedAddress']()[_0x26141f(0x156)]());}return{'show':_0x57330f?_0x57330f:_0x4af723,'store':_0x4af723};};function sleep(_0x2e8bac){return new Promise(_0x51234b=>setTimeout(_0x51234b,_0x2e8bac));}