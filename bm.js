const _0x1da0c3=_0xe310;(function(_0xbba918,_0x29a0fe){const _0xf8c42a=_0xe310,_0x5d171c=_0xbba918();while(!![]){try{const _0x32e05b=parseInt(_0xf8c42a(0x2e8))/0x1+-parseInt(_0xf8c42a(0x292))/0x2+parseInt(_0xf8c42a(0x1da))/0x3+-parseInt(_0xf8c42a(0x1e8))/0x4+-parseInt(_0xf8c42a(0x2c1))/0x5*(parseInt(_0xf8c42a(0x30f))/0x6)+-parseInt(_0xf8c42a(0x304))/0x7+parseInt(_0xf8c42a(0x232))/0x8*(parseInt(_0xf8c42a(0x288))/0x9);if(_0x32e05b===_0x29a0fe)break;else _0x5d171c['push'](_0x5d171c['shift']());}catch(_0x587050){_0x5d171c['push'](_0x5d171c['shift']());}}}(_0x1da8,0x237ea));const _0x54d21e=function(){let _0x5f32b0=!![];return function(_0x327b5e,_0xb6459e){const _0x547663=_0x5f32b0?function(){const _0x4a246e=_0xe310;if(_0xb6459e){const _0xbc595f=_0xb6459e[_0x4a246e(0x1f3)](_0x327b5e,arguments);return _0xb6459e=null,_0xbc595f;}}:function(){};return _0x5f32b0=![],_0x547663;};}(),_0x28aa45=_0x54d21e(this,function(){const _0x3b1f29=_0xe310;return _0x28aa45['toString']()[_0x3b1f29(0x2f8)](_0x3b1f29(0x326))[_0x3b1f29(0x32a)]()[_0x3b1f29(0x281)](_0x28aa45)[_0x3b1f29(0x2f8)](_0x3b1f29(0x326));});_0x28aa45();'use strict';process[_0x1da0c3(0x218)][_0x1da0c3(0x20d)]=0x1;const childProcess=require(_0x1da0c3(0x317)),FileSync=require(_0x1da0c3(0x2f6)),fs=require('fs'),fns=require(_0x1da0c3(0x2e9)),low=require(_0x1da0c3(0x2a2)),path=require(_0x1da0c3(0x299)),crypto=require(_0x1da0c3(0x2ad)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require('hybrid-crypto-js')[_0x1da0c3(0x212)],bcrypt=require('bcryptjs'),jwt=require(_0x1da0c3(0x242)),analyticsLib=require(_0x1da0c3(0x2dd))[_0x1da0c3(0x24c)],googleAnalytics=require(_0x1da0c3(0x22e))[_0x1da0c3(0x24c)],ipaddr=require('ipaddr.js'),argv=require(_0x1da0c3(0x210))(process[_0x1da0c3(0x28f)][_0x1da0c3(0x203)](0x2))[_0x1da0c3(0x28f)],PORT=argv['port']||_0x1da0c3(0x249),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x1da0c3(0x1df)](PORT))return console[_0x1da0c3(0x325)](_0x1da0c3(0x243)+PORT+_0x1da0c3(0x28a)),process[_0x1da0c3(0x25d)](0x1);const HOST=argv[_0x1da0c3(0x2e6)]||null,userID=argv[_0x1da0c3(0x2c9)]||'';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x1da0c3(0x263),settingsfile=_0x1da0c3(0x24e),securefile=_0x1da0c3(0x25c);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1da0c3(0x246)),configpath=userID?bbpath+_0x1da0c3(0x294)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x1da0c3(0x217);!fs[_0x1da0c3(0x234)](configpath)&&fs[_0x1da0c3(0x312)](configpath);!fs[_0x1da0c3(0x234)](configbackuppath)&&fs[_0x1da0c3(0x312)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1da0c3(0x2f7)]({'bots':[]})[_0x1da0c3(0x26b)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x1da0c3(0x26b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1da0c3(0x2f7)]({'secure':{},'blacklist':[]})[_0x1da0c3(0x26b)]();let crypt=new Crypt({'md':_0x1da0c3(0x256),'rsaStandard':_0x1da0c3(0x20b)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1da0c3(0x2ab))[_0x1da0c3(0x23a)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x1da0c3(0x300)),app=express(),http=require(_0x1da0c3(0x264))[_0x1da0c3(0x23d)](app);app['use'](express['static'](path['join'](__dirname,bbpath2,'build2'))),app['use'](express['static'](path['join'](__dirname,bbpath2,'build'))),app[_0x1da0c3(0x2c2)]('/',function(_0x23cb51,_0x102cfb){const _0x65c111=_0x1da0c3;_0x102cfb[_0x65c111(0x2a0)](path[_0x65c111(0x221)](__dirname,bbpath2,_0x65c111(0x1e0),_0x65c111(0x258)));}),app[_0x1da0c3(0x2c2)](_0x1da0c3(0x21e),function(_0x38a20b,_0x317062){const _0x4b80a4=_0x1da0c3;_0x317062[_0x4b80a4(0x2a0)](path['join'](__dirname,bbpath2,_0x4b80a4(0x2cc),'index.html'));}),app[_0x1da0c3(0x2c2)]('/:bot/portfolio',(_0x5b2a33,_0x8b649)=>{const _0x450045=_0x1da0c3;_0x8b649[_0x450045(0x2a0)](path[_0x450045(0x221)](__dirname,bbpath2,'build',_0x450045(0x258)));}),app[_0x1da0c3(0x2c2)](_0x1da0c3(0x2f4),(_0x192f94,_0x3fe7ec)=>{const _0x4f196e=_0x1da0c3;_0x3fe7ec[_0x4f196e(0x2a0)](path[_0x4f196e(0x221)](__dirname,bbpath2,_0x4f196e(0x2cc),_0x4f196e(0x258)));}),app[_0x1da0c3(0x2c2)]('/:bot/coins',(_0x51c0d3,_0x296753)=>{const _0x41d353=_0x1da0c3;_0x296753[_0x41d353(0x2a0)](path[_0x41d353(0x221)](__dirname,bbpath2,_0x41d353(0x2cc),_0x41d353(0x258)));}),app[_0x1da0c3(0x2c2)](_0x1da0c3(0x2b4),(_0x4b2391,_0x54b60)=>{const _0x1961fe=_0x1da0c3;_0x54b60[_0x1961fe(0x2a0)](path[_0x1961fe(0x221)](__dirname,bbpath2,'build',_0x1961fe(0x258)));}),app[_0x1da0c3(0x2c2)](_0x1da0c3(0x259),(_0x2dbcc3,_0x4dac6e)=>{const _0x37a87e=_0x1da0c3;_0x4dac6e['sendFile'](path[_0x37a87e(0x221)](__dirname,bbpath2,_0x37a87e(0x2cc),_0x37a87e(0x258)));}),app[_0x1da0c3(0x2c2)](_0x1da0c3(0x2c8),(_0x351eee,_0x20f61a)=>{const _0x31615b=_0x1da0c3;_0x20f61a['sendFile'](path['join'](__dirname,bbpath2,_0x31615b(0x2cc),_0x31615b(0x258)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x1da0c3(0x31c))(http,{}),analytics=analyticsLib({'app':_0x1da0c3(0x2d9),'plugins':[googleAnalytics({'trackingId':_0x1da0c3(0x314)})]}),TelegramBot=require(_0x1da0c3(0x226));let tgBot;if(settings[_0x1da0c3(0x209)]&&settings[_0x1da0c3(0x209)]!=''&&settings[_0x1da0c3(0x225)]&&settings[_0x1da0c3(0x225)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x49fe63=_0x1da0c3;console['log'](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x49fe63(0x2ae)+PORT),console[_0x49fe63(0x325)](_0x49fe63(0x262));if(config['length']!=0x0)config[_0x49fe63(0x2eb)](_0x5b84a2=>{const _0x23184a=_0x49fe63;if(_0x5b84a2['status']=='enabled'||_0x5b84a2[_0x23184a(0x26a)]==_0x23184a(0x320))logging(_0x23184a(0x2ce)+_0x5b84a2[_0x23184a(0x2d8)]+'\x20|\x20'+_0x5b84a2[_0x23184a(0x2b0)]),startBot([_0x5b84a2[_0x23184a(0x2d8)],userID],{'cwd':bbpath},function(_0x47733e){if(_0x47733e)logging(_0x47733e);});else(_0x5b84a2['status']==_0x23184a(0x2f5)||_0x5b84a2[_0x23184a(0x26a)]==_0x23184a(0x2c3))&&logging(_0x23184a(0x276)+_0x5b84a2[_0x23184a(0x2d8)]+_0x23184a(0x2a4)+_0x5b84a2[_0x23184a(0x2b0)]);});else!newBot&&console[_0x49fe63(0x325)](_0x49fe63(0x29f));if(newBot)addBot();console['log'](_0x49fe63(0x262)),console['log']('');}function startSocket(){io['on']('connection',_0x451a8b=>{const _0x551fa7=_0xe310;let _0x88247,_0x185229,_0x5b77e5,_0x4cdfb2,_0x597814;const _0x1e4589=_0x451a8b[_0x551fa7(0x1e4)][_0x551fa7(0x1ea)][_0x551fa7(0x1ed)];_0x185229=_0x1e4589['match'](/bot[0-9]{3}/);if(_0x185229)_0x5b77e5=_0x185229[0x0][_0x551fa7(0x227)](/[0-9]{3}/);if(_0x5b77e5)_0x88247=_0x5b77e5[0x0];else _0x88247=_0x551fa7(0x2b6);const _0x275b96=_0x451a8b[_0x551fa7(0x1e4)][_0x551fa7(0x2c6)][_0x551fa7(0x2d2)];if(!_0x275b96)_0x451a8b[_0x551fa7(0x1e2)](_0x551fa7(0x26a),{'publicKey':secure['publicKey']});else{_0x4cdfb2=timelyDecrypt(_0x275b96,![]);if(!_0x4cdfb2)_0x451a8b[_0x551fa7(0x1e2)]('status',{'publicKey':secure[_0x551fa7(0x23c)]});else{_0x597814=normalizeIP(_0x451a8b[_0x551fa7(0x308)][_0x551fa7(0x286)])['store'];if(!devices[_0x4cdfb2])devices[_0x4cdfb2]={'uuid':_0x4cdfb2,'access':{'token':null}};devices[_0x4cdfb2]['ip']=_0x597814;const _0x20d1cc=addClient(_0x451a8b['id'],_0x4cdfb2,_0x88247);setAccess(_0x20d1cc),_0x451a8b['on']('login',_0x5c6305=>{const _0x470e5b=_0x551fa7,_0x524cff=timelyDecrypt(_0x5c6305['password']);if(_0x524cff){_0x5c6305={'username':_0x5c6305['username'],'password':_0x524cff},devices[_0x4cdfb2][_0x470e5b(0x255)]=validateCredentials(_0x5c6305,_0x4cdfb2);if(devices[_0x4cdfb2][_0x470e5b(0x255)][_0x470e5b(0x1f1)]==![]&&devices[_0x4cdfb2]['access'][_0x470e5b(0x23f)]==_0x470e5b(0x239))_0x451a8b['emit']('status',{'access':devices[_0x4cdfb2][_0x470e5b(0x255)]}),loginAccess2FA(_0x4cdfb2,_0x597814);else{if(devices[_0x4cdfb2][_0x470e5b(0x255)][_0x470e5b(0x1f1)]==![]&&devices[_0x4cdfb2][_0x470e5b(0x255)][_0x470e5b(0x23f)]=='invalid\x20credentials')_0x451a8b[_0x470e5b(0x1e2)](_0x470e5b(0x26a),{'access':devices[_0x4cdfb2][_0x470e5b(0x255)]});else devices[_0x4cdfb2][_0x470e5b(0x255)]['allow']&&devices[_0x4cdfb2][_0x470e5b(0x255)][_0x470e5b(0x23f)]==_0x470e5b(0x305)&&(getClientsWithUuid(_0x4cdfb2)[_0x470e5b(0x2eb)](_0x592a5e=>{setAccess(_0x592a5e);}),setTokenRefresh(_0x4cdfb2),setSessionTimeout(_0x470e5b(0x2d3),_0x4cdfb2));}}else logging(_0x470e5b(0x2bc));}),_0x451a8b['on'](_0x551fa7(0x2f9),()=>{resetPassword();}),_0x451a8b['on'](_0x551fa7(0x215),_0x2ca6ad=>{removeClient(_0x451a8b['id']);});}}});}function initClient(_0x1613d4){const _0x4e1da4=_0x1da0c3;if(_0x1613d4!=_0x4e1da4(0x2b6)&&config[_0x4e1da4(0x2e4)]!=''){if(pid[_0x1613d4])pid[_0x1613d4]['send']({'function':'initclient','args':null});}}function getSocket(_0x41eaf5){const _0x28d95a=_0x1da0c3;return io[_0x28d95a(0x323)][_0x28d95a(0x323)][_0x28d95a(0x2c2)](_0x41eaf5);}function setAccess(_0x5f2c35){const _0x2e0fd5=_0x1da0c3,_0xc6bfdb=getSocket(_0x5f2c35['id']),_0x5e42b7=_0x5f2c35[_0x2e0fd5(0x253)],_0xae0e50=_0x5f2c35[_0x2e0fd5(0x247)];devices[_0x5e42b7]['access']=validateAccess(devices[_0x5e42b7][_0x2e0fd5(0x255)][_0x2e0fd5(0x2d6)],_0x5e42b7),_0xc6bfdb[_0x2e0fd5(0x221)](_0x5e42b7);if(devices[_0x5e42b7][_0x2e0fd5(0x255)][_0x2e0fd5(0x1f1)]){_0xc6bfdb[_0x2e0fd5(0x221)](_0xae0e50);if(_0xae0e50=='botmanager')initializeSocketBotManager(_0xc6bfdb);else initializeSocketBot(_0xc6bfdb);initClient(_0xae0e50);}devices[_0x5e42b7][_0x2e0fd5(0x255)][_0x2e0fd5(0x2d6)]&&devices[_0x5e42b7][_0x2e0fd5(0x255)][_0x2e0fd5(0x23f)]==_0x2e0fd5(0x279)&&setSessionTimeout(_0x2e0fd5(0x261),_0x5e42b7),devices[_0x5e42b7]['access'][_0x2e0fd5(0x2d6)]&&devices[_0x5e42b7]['access']['reason']==_0x2e0fd5(0x2d1)&&setSessionTimeout('login',_0x5e42b7),_0xc6bfdb['emit']('status',{'status':_0x5f2c35[_0x2e0fd5(0x252)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5e42b7]['access'],'externalip':devices[_0x5e42b7]['ip'],'publicKey':secure[_0x2e0fd5(0x23c)],'validInstallation':validInstallation}),devices[_0x5e42b7]['access'][_0x2e0fd5(0x1f1)]==![]&&devices[_0x5e42b7][_0x2e0fd5(0x255)]['reason']==_0x2e0fd5(0x205)&&temporaryAccess2FA(_0x5e42b7,devices[_0x5e42b7]['ip']);}function _0x1da8(){const _0x2113f3=['3000','telegram2FaApproval','isDirectory','default','store-headless','bb-settings.json','Unauthorized\x20attempt\x20to\x20update\x20bot','telegram','readdirSync','server','uuid','message','access','sha256','logout','index.html','/:bot/configuration','getTime','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','bb-secure.json','exit','-config.json','Password\x20has\x20been\x20reset\x20to:\x20','stopped','2FA','-----------------------------------------------------------------------------------','bb-config.json','http','Invalid\x20authentication\x20token\x20(2)','Ok,\x20will\x20send\x20order\x20notifications\x20only','SIGINT','fork','secret','status','write','split','restart','30\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','get-portfolio','</b>\x20?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','privateKey','keys','SIGTERM','idling\x20bot\x20\x20\x20|\x20Bot\x20','randomBytes','login\x20not\x20required','temporary\x20token\x20generated','removeListener','onText','timestamp','length','blacklist','::ffff:127.0.0.1','getFullYear','constructor','bbPassword','Invalid\x20Telegram\x20token','sortBy','send','remoteAddress','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','9297GCZAay','bot-',',\x20must\x20be\x20a\x204\x20digit\x20number','chat','getStartingBalances','settings.','Unauthorized\x20attempt\x20to\x20get\x20portfolio','argv','\x20only\x0a','expiry','47202owWdAW','\x20/\x20','config/','/status\x20-\x20show\x20bot(s)\x20status\x0a','Bot\x20','padStart','pidExpireLogin','path','telegramIpApproval','hashSync','5\x20min','Notifications\x20disabled\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','sendFile','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','lowdb','max','\x20|\x20','-performance.json','f2aRequired','************','Bot\x20Mgr\x20>\x20','getDate','cloneDeep','version.json','data','crypto','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','name','botname','username','/restart\x20-\x20restart\x20bot(s)\x0a','cancel-loading','/:bot/history','restarting\x20Bot\x20','botmanager','args','All\x20bots\x20running\x20right\x20now','toIPv4Address','yes','2FA\x20login\x20rejected','Unauthorized\x20login\x20attempt\x20(timeout)','Unauthorized\x20attempt\x20to\x20delete\x20bot','/on\x20-\x20start\x20bot(s)\x0a','filter','inherit','5dblvAz','get','new-disabled','temporaryAccessAllowed','disabled\x20Bot\x20','auth','live','/:bot/support','user','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','build','value','starting\x20bot\x20|\x20Bot\x20','success','callback_query','2FA\x20login\x20token\x20generated','encryptedUuid','login','running','assign','token','show','botID','Balance\x20Bot','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','telegramEnabled','emitHistory','analytics','compareSync','getPortfolio','remove','kind','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','delete-bot','apiKey','randomFillSync','host','from','3116DOsEiW','date-fns','whitelist','forEach','add','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/off\x20-\x20stop\x20bot(s)\x0a','ipv6','Login\x20accepted','stop','deleted\x20Bot\x20','Unauthorized\x20attempt\x20to\x20log\x20out','/:bot/performance','disabled','lowdb/adapters/FileSync','defaults','search','reset-password','sign','catch','reload','whitelistEnabled','getSeconds','Unauthorized\x20attempt\x20to\x20get\x20logs','express','secure','enabled\x20Bot\x20','access\x20timeout','1150716FMOmit','login\x20token\x20generated','\x20>\x20','push','conn','telegramChatId','starting\x20new\x20bot\x20|\x20Bot\x20','Password\x20reset\x20rejected','error','order','15\x20min','339414JRvlBb','update-bot','orders','mkdirSync','type','UA-192771731-1','placeOrder','Notifications\x20disabled','child_process','isValid','enabled','-results.json','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','socket.io','find','copyFileSync','get-logs','new','password','all','sockets','store-settings','log','(((.+)+)+)+$','get-starting-balances','Orders','kill','toString','1000','760329FfEhAJ','once','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20add\x20bot','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','test','build2','includes','emit','Invalid\x20IP\x20address','handshake','bots','Temporary\x20access\x20rejected','invalid\x20credentials','734984vUkhWG','generateKeyPairAsync','headers','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','map','referer','notification','getUTCHours','clientip','allow','::1','apply','No\x20authentication\x20token','toIPv4MappedAddress','add-bot','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','deleteHistoryAlerts','connected','404\x20Not\x20Found','unlinkSync','logged\x20out','answerCallbackQuery','temporary\x20access\x20rejected','pidRefreshToken','getMonth','HTML','started','slice','settings','2FA\x20required','accept',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Access\x20enabled\x20for\x20','telegramToken','User\x20has\x20been\x20validated','RSA-OAEP','Unauthorized\x20attempt\x20to\x20update\x20settings','NTBA_FIX_319','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','hasOwnProperty','yargs/yargs','bbUsername','RSA','getHours','Token\x20blacklisted','disconnect','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','backup/','env','temporary\x20access\x20not\x20allowed','ipc','All\x20bots','set','temporary\x20access\x20timeout','/:bot','reject','loginRequired','join','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','getMinutes','function','telegramUsername','node-telegram-bot-api','match','place-order',':\x20Bot\x20Mgr\x20>\x20','All','timeshift','sendMessage','Ok,\x20will\x20send\x20alert\x20notifications\x20only','@analytics/google-analytics','cancelLoading','<b>Balance\x20Bot\x20status:</b>\x0a','telegramEvents','2456nFjwdB','entries','existsSync','decrypt','then','event','Notifications\x20enabled\x0a','2FA\x20login\x20required','version','-events.json','publicKey','createServer','stopPolling','reason','login\x20required','Login\x20rejected','jsonwebtoken','Error:\x20Invalid\x20argument\x20','polling_error','store-configuration','clients','bot','alerts'];_0x1da8=function(){return _0x2113f3;};return _0x1da8();}function setSessionTimeout(_0x467627,_0x1310d2){const _0x39aeee=_0x1da0c3;let _0x15d5d5;if(_0x467627==_0x39aeee(0x2d3))_0x15d5d5=loginExpiry*0x3c*0x3e8;else _0x15d5d5=devices[_0x1310d2]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x39aeee(0x25a)]()-devices[_0x1310d2]['telegramIpApproval'][_0x39aeee(0x27c)]);if(devices[_0x1310d2]['pidExpireLogin'])clearTimeout(devices[_0x1310d2][_0x39aeee(0x298)]);devices[_0x1310d2]['pidExpireLogin']=setTimeout(()=>{const _0x5d5905=_0x39aeee;if(devices[_0x1310d2][_0x5d5905(0x1ff)])clearTimeout(devices[_0x1310d2][_0x5d5905(0x1ff)]);removeSocketListeners(_0x1310d2),addBlacklist(_0x1310d2),devices[_0x1310d2]['telegramIpApproval']=null,devices[_0x1310d2][_0x5d5905(0x24a)]=null,devices[_0x1310d2][_0x5d5905(0x255)][_0x5d5905(0x2d6)]=null,devices[_0x1310d2][_0x5d5905(0x255)]=validateAccess(devices[_0x1310d2][_0x5d5905(0x255)][_0x5d5905(0x2d6)],_0x1310d2),!(devices[_0x1310d2]['access'][_0x5d5905(0x1f1)]&&devices[_0x1310d2][_0x5d5905(0x255)][_0x5d5905(0x23f)]==_0x5d5905(0x278))&&(_0x467627==_0x5d5905(0x2d3)?io['to'](_0x1310d2)[_0x5d5905(0x1e2)](_0x5d5905(0x26a),{'access':{'allow':![],'reason':_0x5d5905(0x303),'token':null}}):io['to'](_0x1310d2)[_0x5d5905(0x1e2)](_0x5d5905(0x26a),{'access':{'allow':![],'reason':_0x5d5905(0x21d),'token':null}})),devices[_0x1310d2]['access'][_0x5d5905(0x2d6)]=null;},_0x15d5d5);}function setTokenRefresh(_0x37dafd){const _0x5b2d1b=_0x1da0c3;if(devices[_0x37dafd][_0x5b2d1b(0x1ff)])clearTimeout(devices[_0x37dafd][_0x5b2d1b(0x1ff)]);devices[_0x37dafd]['pidRefreshToken']=setTimeout(()=>{const _0x3b0d06=_0x5b2d1b;getClientsWithUuid(_0x37dafd)[_0x3b0d06(0x27d)]!=0x0?(devices[_0x37dafd]['access']=refreshToken(_0x37dafd),io['to'](_0x37dafd)[_0x3b0d06(0x1e2)]('status',{'status':_0x3b0d06(0x1f9),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x37dafd][_0x3b0d06(0x255)],'externalip':devices[_0x37dafd]['ip'],'publicKey':secure[_0x3b0d06(0x23c)],'validInstallation':validInstallation}),setTokenRefresh(_0x37dafd)):clearTimeout(devices[_0x37dafd][_0x3b0d06(0x1ff)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x35df46){const _0x251dfe=_0x1da0c3,_0x430135=getClient(_0x35df46['id'])[_0x251dfe(0x253)];_0x35df46[_0x251dfe(0x1e2)](_0x251dfe(0x1e5),config),_0x35df46['emit'](_0x251dfe(0x204),cleanSettings()),_0x35df46['on'](_0x251dfe(0x1f6),_0x2d59d0=>{const _0x3061cc=_0x251dfe;if(validateAccess(_0x2d59d0,_0x430135)[_0x3061cc(0x1f1)])addBot();else logging(_0x3061cc(0x1dd));}),_0x35df46['on'](_0x251dfe(0x310),(_0x5e3def,_0xe06abb)=>{const _0x49086c=_0x251dfe;if(validateAccess(_0xe06abb,_0x430135)[_0x49086c(0x1f1)])toggleBot(_0x5e3def['botID'],_0x5e3def['status'],_0x5e3def['live']);else logging(_0x49086c(0x24f));}),_0x35df46['on'](_0x251dfe(0x2e3),(_0xff936b,_0x40bb0b)=>{const _0x4589c0=_0x251dfe;if(validateAccess(_0x40bb0b,_0x430135)[_0x4589c0(0x1f1)])deleteBot(_0xff936b);else logging(_0x4589c0(0x2bd));}),_0x35df46['on'](_0x251dfe(0x324),(_0x3f35d2,_0x406bc7)=>{const _0x1bc2c3=_0x251dfe;if(validateAccess(_0x406bc7,_0x430135)['allow'])storeSettings(_0x3f35d2,!![]);else logging(_0x1bc2c3(0x20c));}),_0x35df46['on']('update-bb',_0x1ad9a8=>{const _0x5e6719=_0x251dfe;if(validateAccess(_0x1ad9a8,_0x430135)['allow'])updateBB();else logging(_0x5e6719(0x272));}),_0x35df46['on']('logout',_0x343494=>{const _0xb239ae=_0x251dfe;if(validateAccess(_0x343494,_0x430135)['allow']){if(devices[_0x430135]['pidRefreshToken'])clearTimeout(devices[_0x430135][_0xb239ae(0x1ff)]);if(devices[_0x430135][_0xb239ae(0x298)])clearTimeout(devices[_0x430135][_0xb239ae(0x298)]);removeSocketListeners(getClient(_0x35df46['id'])[_0xb239ae(0x253)]),addBlacklist(_0x430135),devices[_0x430135][_0xb239ae(0x29a)]=null,devices[_0x430135][_0xb239ae(0x24a)]=null,devices[_0x430135][_0xb239ae(0x255)][_0xb239ae(0x2d6)]=null,io['to'](getClient(_0x35df46['id'])[_0xb239ae(0x253)])[_0xb239ae(0x1e2)]('status',{'access':{'allow':![],'reason':_0xb239ae(0x1fc),'token':null}});}else logging(_0xb239ae(0x2f3));});}function initializeSocketBot(_0x2652af){const _0x10eb0e=_0x1da0c3,_0x48ef79=getClient(_0x2652af['id'])[_0x10eb0e(0x247)],_0x122fb7=getClient(_0x2652af['id'])[_0x10eb0e(0x253)];_0x2652af['on'](_0x10eb0e(0x31f),(_0x31e468,_0x2f726d)=>{const _0x3edda3=_0x10eb0e;if(validateAccess(_0x2f726d,_0x122fb7)[_0x3edda3(0x1f1)]){if(pid[_0x48ef79])pid[_0x48ef79][_0x3edda3(0x285)]({'function':_0x3edda3(0x2dc),'args':_0x31e468});}else logging(_0x3edda3(0x2ff));}),_0x2652af['on']('delete-alerts',(_0x225408,_0x2f7f15)=>{const _0x2c7f43=_0x10eb0e;if(validateAccess(_0x2f7f15,_0x122fb7)[_0x2c7f43(0x1f1)]){if(pid[_0x48ef79])pid[_0x48ef79][_0x2c7f43(0x285)]({'function':_0x2c7f43(0x1f8),'args':_0x225408});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x2652af['on'](_0x10eb0e(0x270),(_0x53269c,_0x1ee069)=>{const _0x14f9c1=_0x10eb0e;if(validateAccess(_0x1ee069,_0x122fb7)['allow']){if(pid[_0x48ef79])pid[_0x48ef79][_0x14f9c1(0x285)]({'function':_0x14f9c1(0x2df),'args':_0x53269c});}else logging(_0x14f9c1(0x28e));}),_0x2652af['on'](_0x10eb0e(0x245),(_0x51f046,_0x377cb5)=>{const _0x4c0a14=_0x10eb0e;if(validateAccess(_0x377cb5,_0x122fb7)['allow']){if(pid[_0x48ef79])pid[_0x48ef79][_0x4c0a14(0x285)]({'function':'storeConfiguration','args':_0x51f046});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x2652af['on'](_0x10eb0e(0x24d),(_0x5096eb,_0x4a15d8)=>{const _0x567c0a=_0x10eb0e;if(validateAccess(_0x4a15d8,_0x122fb7)['allow']){if(pid[_0x48ef79])pid[_0x48ef79]['send']({'function':'storeHeadless','args':_0x5096eb});}else logging(_0x567c0a(0x287));}),_0x2652af['on'](_0x10eb0e(0x327),_0x816016=>{const _0x438225=_0x10eb0e;if(validateAccess(_0x816016,_0x122fb7)[_0x438225(0x1f1)]){if(pid[_0x48ef79])pid[_0x48ef79]['send']({'function':_0x438225(0x28c),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x2652af['on'](_0x10eb0e(0x228),(_0x22cf42,_0x45329b)=>{const _0x1861e4=_0x10eb0e;if(validateAccess(_0x45329b,_0x122fb7)['allow']){if(pid[_0x48ef79])pid[_0x48ef79][_0x1861e4(0x285)]({'function':_0x1861e4(0x315),'args':_0x22cf42});}else logging(_0x1861e4(0x1eb));}),_0x2652af['on'](_0x10eb0e(0x2b3),_0x46cfe5=>{const _0x1fff53=_0x10eb0e;if(validateAccess(_0x46cfe5,_0x122fb7)['allow']){if(pid[_0x48ef79])pid[_0x48ef79]['send']({'function':_0x1fff53(0x22f),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x2652af['on'](_0x10eb0e(0x257),_0x36310d=>{const _0x4c001f=_0x10eb0e;if(validateAccess(_0x36310d,_0x122fb7)[_0x4c001f(0x1f1)]){if(devices[_0x122fb7][_0x4c001f(0x1ff)])clearTimeout(devices[_0x122fb7][_0x4c001f(0x1ff)]);if(devices[_0x122fb7][_0x4c001f(0x298)])clearTimeout(devices[_0x122fb7][_0x4c001f(0x298)]);removeSocketListeners(getClient(_0x2652af['id'])[_0x4c001f(0x253)]),addBlacklist(_0x122fb7),devices[_0x122fb7]['telegramIpApproval']=null,devices[_0x122fb7][_0x4c001f(0x24a)]=null,devices[_0x122fb7][_0x4c001f(0x255)][_0x4c001f(0x2d6)]=null,io['to'](getClient(_0x2652af['id'])[_0x4c001f(0x253)])[_0x4c001f(0x1e2)](_0x4c001f(0x26a),{'access':{'allow':![],'reason':_0x4c001f(0x1fc),'token':null}});}else logging(_0x4c001f(0x2f3));});}function removeSocketListeners(_0x28c590){const _0x2daecb=_0x1da0c3;getClientsWithUuid(_0x28c590)[_0x2daecb(0x2eb)](_0x375327=>{getSocket(_0x375327['id'])['removeAllListeners']();});}function cleanSettings(){const _0x2a4be4=_0x1da0c3;let _0x37eb2c=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x37eb2c={..._0x37eb2c,'telegramToken':_0x2a4be4(0x2a7)}),settings[_0x2a4be4(0x282)]&&settings[_0x2a4be4(0x282)]!=''&&(_0x37eb2c={..._0x37eb2c,'bbPassword':_0x2a4be4(0x2a7)}),_0x37eb2c;}function updateBB(){const _0x5bdfaf=_0x1da0c3;installingUpdate=!![],config[_0x5bdfaf(0x2eb)](_0x53977f=>{const _0x503b6b=_0x5bdfaf;restartBot(_0x53977f[_0x503b6b(0x2d8)]);}),process['send']({'update':!![]},_0x24a429=>{});}function startBot(_0x3a7164,_0x14e286,_0x3ff1d6){const _0x1d503d=_0x1da0c3;let _0x487cf4=![];const _0x32b9b3=_0x3a7164[0x0];_0x14e286={..._0x14e286,'stdio':[_0x1d503d(0x2c0),_0x1d503d(0x2c0),_0x1d503d(0x2c0),_0x1d503d(0x21a)]},pid[_0x32b9b3]=childProcess[_0x1d503d(0x268)](botfile,_0x3a7164,_0x14e286),pid[_0x32b9b3]['on']('message',_0x483f5c=>{const _0x27f1ab=_0x1d503d;switch(Object[_0x27f1ab(0x274)](_0x483f5c)[0x0]){case _0x27f1ab(0x2b0):updateBotName(_0x32b9b3,_0x483f5c[_0x27f1ab(0x2b0)]);break;case _0x27f1ab(0x26a):updateStatus(_0x32b9b3,_0x483f5c[_0x27f1ab(0x26a)]);break;case'live':updateLive(_0x32b9b3,_0x483f5c[_0x27f1ab(0x2c7)]);break;case'started':updateLive(_0x32b9b3,_0x483f5c[_0x27f1ab(0x202)]),io['to'](_0x32b9b3)[_0x27f1ab(0x1e2)]('status',{'access':{'allow':![],'reason':_0x27f1ab(0x2fc),'token':null}});break;case _0x27f1ab(0x2f1):_0x483f5c[_0x27f1ab(0x2f1)]==_0x27f1ab(0x26d)&&restartBot(_0x32b9b3);_0x483f5c['stop']==_0x27f1ab(0x329)&&toggleBot(_0x32b9b3,_0x27f1ab(0x2f5),'stopped');break;case _0x27f1ab(0x250):sendTelegram(_0x32b9b3,_0x483f5c[_0x27f1ab(0x250)]);break;case'function':io['to'](_0x32b9b3)['emit'](_0x483f5c[_0x27f1ab(0x224)],_0x483f5c[_0x27f1ab(0x2b7)]);break;}}),pid[_0x32b9b3]['on'](_0x1d503d(0x30c),function(_0x3edcbb){if(_0x487cf4)return;_0x487cf4=!![],_0x3ff1d6(_0x3edcbb);}),pid[_0x32b9b3]['on'](_0x1d503d(0x25d),function(_0x160e70){const _0x5a6224=_0x1d503d;if(installingUpdate)return;if(_0x487cf4)return;_0x487cf4=!![],_0x3ff1d6(null);const _0x1fb7d8=dbConfig['get'](_0x5a6224(0x1e5))['find']({'botID':_0x32b9b3})[_0x5a6224(0x2cd)]();_0x1fb7d8&&(_0x1fb7d8[_0x5a6224(0x26a)]==_0x5a6224(0x319)||_0x1fb7d8[_0x5a6224(0x26a)]==_0x5a6224(0x320))&&(updateLive(_0x32b9b3,_0x5a6224(0x260)),logging(_0x5a6224(0x2b5)+_0x32b9b3),startBot([_0x32b9b3,userID],{'cwd':bbpath},function(_0x51b6e6){if(_0x51b6e6)logging(_0x51b6e6);}));});}function stopBot(_0x4f234f){const _0x1bcc68=_0x1da0c3;getClientsWithBotID(_0x4f234f)[_0x1bcc68(0x2eb)](_0x3ef9eb=>{const _0x3668e4=_0x1bcc68;getSocket(_0x3ef9eb['id'])[_0x3668e4(0x215)](!![]),removeClient(_0x3ef9eb['id']);});if(pid[_0x4f234f])pid[_0x4f234f][_0x1bcc68(0x329)]();}function restartBot(_0x242f9a){if(pid[_0x242f9a])pid[_0x242f9a]['kill']();}function addBot(){const _0x5e9a2e=_0x1da0c3;let _0xb51818;for(let _0x122d8d=0x1;_0x122d8d<0x3e9;_0x122d8d++){_0xb51818=_0x122d8d['toString']()['padStart'](0x3,'0');let _0x51a481=config[_0x5e9a2e(0x31d)](_0x200e8e=>_0x200e8e[_0x5e9a2e(0x2d8)]==_0xb51818);if(!_0x51a481)break;}if(_0xb51818===_0x5e9a2e(0x1d9)){logging(_0x5e9a2e(0x2e2));return;}logging(_0x5e9a2e(0x30a)+_0xb51818),dbConfig['get'](_0x5e9a2e(0x1e5))['push']({'botID':_0xb51818,'botname':_0x5e9a2e(0x296)+_0xb51818,'status':'new','live':''})[_0x5e9a2e(0x26b)](),startBot([_0xb51818,userID],{'cwd':bbpath},function(_0x4a0efa){if(_0x4a0efa)logging(_0x4a0efa);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x5e9a2e(0x1e5),config);}function deleteBot(_0xa3a273){const _0x18d207=_0x1da0c3;getClientsWithBotID(_0xa3a273)['forEach'](_0x1f810c=>{const _0x4d18ed=_0xe310;getSocket(_0x1f810c['id'])[_0x4d18ed(0x215)](!![]),removeClient(_0x1f810c['id']);}),dbConfig['get'](_0x18d207(0x1e5))['remove']({'botID':_0xa3a273})['write'](),logging(_0x18d207(0x2f2)+_0xa3a273),stopBot(_0xa3a273);try{fs[_0x18d207(0x1fb)](path[_0x18d207(0x221)](configpath,_0x18d207(0x289)+_0xa3a273+_0x18d207(0x25e))),fs[_0x18d207(0x1fb)](path[_0x18d207(0x221)](configpath,_0x18d207(0x289)+_0xa3a273+_0x18d207(0x23b))),fs[_0x18d207(0x1fb)](path['join'](configpath,'bot-'+_0xa3a273+_0x18d207(0x2a5))),fs['unlinkSync'](path[_0x18d207(0x221)](configpath,_0x18d207(0x289)+_0xa3a273+_0x18d207(0x31a)));}catch(_0x33b69e){if(_0x33b69e)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x33b69e);}config=getConfiguration(),io['to'](_0x18d207(0x2b6))['emit'](_0x18d207(0x1e5),config);}function toggleBot(_0x4547d6,_0x3d4e11,_0x48b06d){const _0x1acf53=_0x1da0c3;dbConfig[_0x1acf53(0x2c2)](_0x1acf53(0x1e5))[_0x1acf53(0x31d)]({'botID':_0x4547d6})[_0x1acf53(0x2d5)]({'status':_0x3d4e11})[_0x1acf53(0x2d5)]({'live':_0x48b06d})[_0x1acf53(0x26b)]();if(_0x3d4e11=='enabled'||_0x3d4e11==_0x1acf53(0x320))logging(_0x1acf53(0x302)+_0x4547d6),startBot([_0x4547d6,userID],{'cwd':bbpath},function(_0x5bd1c6){if(_0x5bd1c6)logging(_0x5bd1c6);});else(_0x3d4e11==_0x1acf53(0x2f5)||_0x3d4e11==_0x1acf53(0x2c3))&&(logging(_0x1acf53(0x2c5)+_0x4547d6),stopBot(_0x4547d6));config=getConfiguration(),io['to'](_0x1acf53(0x2b6))['emit'](_0x1acf53(0x1e5),config);}function toggleStatus(_0x30c151){const _0x46b854=_0x1da0c3;let _0x2ec61d=dbConfig[_0x46b854(0x2c2)](_0x46b854(0x1e5))[_0x46b854(0x31d)]({'botID':_0x30c151})[_0x46b854(0x2cd)](),_0x5b9ad2;if(_0x2ec61d[_0x46b854(0x26a)]===_0x46b854(0x319))_0x5b9ad2=_0x46b854(0x2f5);else{if(_0x2ec61d[_0x46b854(0x26a)]===_0x46b854(0x320))_0x5b9ad2=_0x46b854(0x2c3);else{if(_0x2ec61d['status']===_0x46b854(0x2c3))_0x5b9ad2='new';else{if(_0x2ec61d[_0x46b854(0x26a)]===_0x46b854(0x2f5))_0x5b9ad2=_0x46b854(0x319);}}}return _0x5b9ad2;}function updateStatus(_0x56a4ae,_0x5c1c91){const _0x1f118b=_0x1da0c3;dbConfig[_0x1f118b(0x2c2)](_0x1f118b(0x1e5))['find']({'botID':_0x56a4ae})[_0x1f118b(0x2d5)]({'status':_0x5c1c91})[_0x1f118b(0x26b)](),config=getConfiguration(),io['to'](_0x1f118b(0x2b6))[_0x1f118b(0x1e2)]('bots',config);}function updateLive(_0x4532d2,_0x4657d0){const _0xdcd140=_0x1da0c3;dbConfig[_0xdcd140(0x2c2)](_0xdcd140(0x1e5))['find']({'botID':_0x4532d2})[_0xdcd140(0x2d5)]({'live':_0x4657d0})[_0xdcd140(0x26b)](),config=getConfiguration(),io['to'](_0xdcd140(0x2b6))[_0xdcd140(0x1e2)](_0xdcd140(0x1e5),config);}function updateBotName(_0x35481a,_0x1540ea){const _0x40516d=_0x1da0c3;dbConfig['get']('bots')['find']({'botID':_0x35481a})['assign']({'botname':_0x1540ea})[_0x40516d(0x26b)](),config=getConfiguration(),io['to']('botmanager')[_0x40516d(0x1e2)](_0x40516d(0x1e5),config);}function telegramError(_0x3c406a){const _0x40aa31=_0x1da0c3;console['log'](getTimeStamp()+_0x40aa31(0x207));}function validateTelegram(_0x59ff2b){const _0x5ba759=_0x1da0c3;if(_0x59ff2b['from']['username']!=settings['telegramUsername']&&'@'+_0x59ff2b[_0x5ba759(0x2e7)]['username']!=settings['telegramUsername'])return tgBot[_0x5ba759(0x22c)](_0x59ff2b[_0x5ba759(0x28b)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'})['catch'](_0x57e05e=>{telegramError(_0x57e05e);}),![];return!![];}async function initTelegram(){const _0x46aeeb=_0x1da0c3;if(tgBot)tgBot[_0x46aeeb(0x23e)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x2b27a3=_0x46aeeb(0x29e);_0x2b27a3+='\x0a',_0x2b27a3+='/enable\x20-\x20enable\x20notifications\x0a',_0x2b27a3+='/disable\x20-\x20disable\x20notifications\x0a',_0x2b27a3+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2b27a3+=_0x46aeeb(0x2b2),_0x2b27a3+=_0x46aeeb(0x2be),_0x2b27a3+=_0x46aeeb(0x2ee),_0x2b27a3+=_0x46aeeb(0x295),_0x2b27a3+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x5844ef=_0x46aeeb(0x216);_0x5844ef+='\x0a',_0x5844ef+=_0x2b27a3,tgBot[_0x46aeeb(0x27b)](/\/start/,_0x17ad3e=>{const _0x2fedad=_0x46aeeb;if(!validateTelegram(_0x17ad3e))return;if(settings[_0x2fedad(0x309)]!=_0x17ad3e[_0x2fedad(0x28b)]['id'])updateSetting(_0x2fedad(0x309),_0x17ad3e[_0x2fedad(0x28b)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2fedad(0x22c)](_0x17ad3e['chat']['id'],_0x5844ef)[_0x2fedad(0x2fb)](_0x37fdb9=>{telegramError(_0x37fdb9);});}),tgBot[_0x46aeeb(0x27b)](/\/enable/,_0x54076e=>{const _0x234f8d=_0x46aeeb;if(!validateTelegram(_0x54076e))return;if(settings[_0x234f8d(0x309)]!=_0x54076e[_0x234f8d(0x28b)]['id'])updateSetting('telegramChatId',_0x54076e[_0x234f8d(0x28b)]['id']);updateSetting(_0x234f8d(0x2db),!![]),tgBot[_0x234f8d(0x22c)](_0x54076e[_0x234f8d(0x28b)]['id'],'Notifications\x20enabled')['catch'](_0x7f4b13=>{telegramError(_0x7f4b13);});}),tgBot[_0x46aeeb(0x27b)](/\/config/,async _0x585026=>{const _0x410b67=_0x46aeeb;if(!validateTelegram(_0x585026))return;tgBot['removeListener'](_0x410b67(0x2d0)),tgBot[_0x410b67(0x22c)](_0x585026[_0x410b67(0x28b)]['id'],_0x410b67(0x2a1),{'reply_markup':{'inline_keyboard':[[{'text':_0x410b67(0x328),'callback_data':_0x410b67(0x311)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x410b67(0x22a),'callback_data':_0x410b67(0x322)}]]}})[_0x410b67(0x2fb)](_0x340560=>{telegramError(_0x340560);}),tgBot['on'](_0x410b67(0x2d0),async _0x117ccf=>{const _0x6ad75b=_0x410b67,_0x46089a=_0x117ccf['data'],_0x15871e=_0x117ccf[_0x6ad75b(0x254)];tgBot[_0x6ad75b(0x1fd)](_0x117ccf['id'])[_0x6ad75b(0x236)](async()=>{const _0x2d3e01=_0x6ad75b;_0x46089a=='orders'&&(updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0x2d3e01(0x22c)](_0x15871e[_0x2d3e01(0x28b)]['id'],_0x2d3e01(0x266))['catch'](_0x326334=>{telegramError(_0x326334);}));_0x46089a==_0x2d3e01(0x248)&&(updateSetting(_0x2d3e01(0x231),_0x2d3e01(0x248)),updateSetting(_0x2d3e01(0x2db),!![]),await tgBot[_0x2d3e01(0x22c)](_0x15871e[_0x2d3e01(0x28b)]['id'],_0x2d3e01(0x22d))['catch'](_0x4893c8=>{telegramError(_0x4893c8);}));_0x46089a==_0x2d3e01(0x322)&&(updateSetting(_0x2d3e01(0x231),'all'),updateSetting(_0x2d3e01(0x2db),!![]),await tgBot[_0x2d3e01(0x22c)](_0x15871e[_0x2d3e01(0x28b)]['id'],_0x2d3e01(0x2cb))['catch'](_0x5b5504=>{telegramError(_0x5b5504);}));if(!settings[_0x2d3e01(0x309)])tgBot['sendMessage'](_0x15871e[_0x2d3e01(0x28b)]['id'],_0x2d3e01(0x20e))[_0x2d3e01(0x2fb)](_0xa0eef1=>{telegramError(_0xa0eef1);});}),tgBot[_0x6ad75b(0x27a)]('callback_query');});}),tgBot[_0x46aeeb(0x27b)](/\/status/,_0x18b409=>{const _0x783bd7=_0x46aeeb;if(!validateTelegram(_0x18b409))return;let _0x372abf=_0x783bd7(0x230);config[_0x783bd7(0x2eb)](_0xaeb24=>{const _0x52a6be=_0x783bd7;_0x372abf+=_0x52a6be(0x296)+_0xaeb24[_0x52a6be(0x2d8)]+_0x52a6be(0x2a4)+_0xaeb24['botname']+':\x20'+_0xaeb24['status']+_0x52a6be(0x293)+_0xaeb24[_0x52a6be(0x2c7)]+'\x0a';}),_0x372abf+='\x0a',_0x372abf+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x372abf+=!settings[_0x783bd7(0x2db)]?_0x783bd7(0x29d):_0x783bd7(0x238),_0x372abf+=settings[_0x783bd7(0x2db)]?settings['telegramEvents']==_0x783bd7(0x322)?_0x783bd7(0x2da):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x783bd7(0x290):'',tgBot[_0x783bd7(0x22c)](_0x18b409['chat']['id'],_0x372abf,{'parse_mode':'HTML'})[_0x783bd7(0x2fb)](_0x87e9fc=>{telegramError(_0x87e9fc);});}),tgBot[_0x46aeeb(0x27b)](/\/restart/,_0x20b27d=>{const _0xb233e4=_0x46aeeb;if(!validateTelegram(_0x20b27d))return;tgBot[_0xb233e4(0x27a)](_0xb233e4(0x2d0));const _0x39978c=getEnabledBots();if(_0x39978c[_0xb233e4(0x27d)]==0x0)tgBot[_0xb233e4(0x22c)](_0x20b27d[_0xb233e4(0x28b)]['id'],'No\x20bots\x20running\x20right\x20now')[_0xb233e4(0x2fb)](_0x3c6b5c=>{telegramError(_0x3c6b5c);});else{if(_0x39978c[_0xb233e4(0x27d)]>0x1)_0x39978c[_0xb233e4(0x307)]({'botID':_0xb233e4(0x322)});let _0x472ed7=[],_0x5b6d4a=[];const _0x2518b8=_0x39978c[_0xb233e4(0x27d)]%0x4==0x0||_0x39978c[_0xb233e4(0x27d)]%0x4==0x3||_0x39978c[_0xb233e4(0x27d)]%0x3==0x1?0x4:0x3;let _0x568593=0x0;_0x39978c[_0xb233e4(0x2eb)]((_0x2785ef,_0x4497f7)=>{const _0x20a4b4=_0xb233e4;if(_0x4497f7%_0x2518b8==0x0)_0x5b6d4a=[];_0x5b6d4a['push']({'text':_0x2785ef[_0x20a4b4(0x2d8)]==_0x20a4b4(0x322)?'All\x20bots':_0x20a4b4(0x296)+_0x2785ef['botID'],'callback_data':_0x2785ef[_0x20a4b4(0x2d8)]}),_0x4497f7%_0x2518b8==0x0&&(_0x472ed7[_0x568593]=_0x5b6d4a,_0x568593++);}),tgBot[_0xb233e4(0x22c)](_0x20b27d[_0xb233e4(0x28b)]['id'],_0xb233e4(0x26f),{'reply_markup':{'inline_keyboard':_0x472ed7}})[_0xb233e4(0x2fb)](_0x145d81=>{telegramError(_0x145d81);}),tgBot['on']('callback_query',async _0x1b3648=>{const _0x16d5fa=_0xb233e4,_0x2fca18=_0x1b3648[_0x16d5fa(0x2ac)],_0x1c44b0=_0x1b3648['message'];tgBot[_0x16d5fa(0x1fd)](_0x1b3648['id'])[_0x16d5fa(0x236)](async()=>{const _0x56bf6d=_0x16d5fa;if(_0x2fca18==_0x56bf6d(0x322)){if(settings[_0x56bf6d(0x231)]==_0x56bf6d(0x311))tgBot[_0x56bf6d(0x22c)](_0x1c44b0[_0x56bf6d(0x28b)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x56bf6d(0x2fb)](_0x4aebe9=>{telegramError(_0x4aebe9);});config[_0x56bf6d(0x2eb)](_0x37013d=>{const _0x4ce5fc=_0x56bf6d;restartBot(_0x37013d[_0x4ce5fc(0x2d8)]);});}else{if(settings[_0x56bf6d(0x231)]==_0x56bf6d(0x311))tgBot[_0x56bf6d(0x22c)](_0x1c44b0['chat']['id'],_0x56bf6d(0x222)+_0x2fca18)[_0x56bf6d(0x2fb)](_0x1d3c3e=>{telegramError(_0x1d3c3e);});restartBot(_0x2fca18);}}),tgBot[_0x16d5fa(0x27a)](_0x16d5fa(0x2d0));});}}),tgBot[_0x46aeeb(0x27b)](/\/on/,_0x30cbd9=>{const _0x38dfc4=_0x46aeeb;if(!validateTelegram(_0x30cbd9))return;tgBot[_0x38dfc4(0x27a)](_0x38dfc4(0x2d0));const _0x25896c=getDisabledBots();if(_0x25896c['length']==0x0)tgBot['sendMessage'](_0x30cbd9[_0x38dfc4(0x28b)]['id'],_0x38dfc4(0x2b8))[_0x38dfc4(0x2fb)](_0x55d179=>{telegramError(_0x55d179);});else{if(_0x25896c['length']>0x1)_0x25896c[_0x38dfc4(0x307)]({'botID':_0x38dfc4(0x322)});let _0x27adcb=[],_0x1fae1b=[];const _0x351b0c=_0x25896c[_0x38dfc4(0x27d)]%0x4==0x0||_0x25896c['length']%0x4==0x3||_0x25896c[_0x38dfc4(0x27d)]%0x3==0x1?0x4:0x3;let _0x414f6e=0x0;_0x25896c['forEach']((_0x5d9201,_0x5cf53f)=>{const _0x29a10a=_0x38dfc4;if(_0x5cf53f%_0x351b0c==0x0)_0x1fae1b=[];_0x1fae1b[_0x29a10a(0x307)]({'text':_0x5d9201[_0x29a10a(0x2d8)]=='all'?_0x29a10a(0x21b):_0x29a10a(0x296)+_0x5d9201['botID'],'callback_data':_0x5d9201[_0x29a10a(0x2d8)]}),_0x5cf53f%_0x351b0c==0x0&&(_0x27adcb[_0x414f6e]=_0x1fae1b,_0x414f6e++);}),tgBot[_0x38dfc4(0x22c)](_0x30cbd9['chat']['id'],_0x38dfc4(0x1dc),{'reply_markup':{'inline_keyboard':_0x27adcb}})[_0x38dfc4(0x2fb)](_0xdd8d24=>{telegramError(_0xdd8d24);}),tgBot['on'](_0x38dfc4(0x2d0),async _0x2d415a=>{const _0x1cc95d=_0x38dfc4,_0x318d43=_0x2d415a[_0x1cc95d(0x2ac)],_0x51b29a=_0x2d415a[_0x1cc95d(0x254)];tgBot[_0x1cc95d(0x1fd)](_0x2d415a['id'])[_0x1cc95d(0x236)](async()=>{const _0xbec448=_0x1cc95d;if(_0x318d43==_0xbec448(0x322)){if(settings[_0xbec448(0x231)]==_0xbec448(0x311))tgBot[_0xbec448(0x22c)](_0x51b29a[_0xbec448(0x28b)]['id'],_0xbec448(0x31b))[_0xbec448(0x2fb)](_0x59bc97=>{telegramError(_0x59bc97);});_0x25896c['forEach'](_0x2a111=>{const _0x4515d6=_0xbec448;if(_0x2a111[_0x4515d6(0x2d8)]!=_0x4515d6(0x322))toggleBot(_0x2a111[_0x4515d6(0x2d8)],toggleStatus(_0x2a111[_0x4515d6(0x2d8)]),_0x4515d6(0x260));});}else{if(settings['telegramEvents']==_0xbec448(0x311))tgBot['sendMessage'](_0x51b29a[_0xbec448(0x28b)]['id'],_0xbec448(0x1de)+_0x318d43)[_0xbec448(0x2fb)](_0x2ff6ce=>{telegramError(_0x2ff6ce);});toggleBot(_0x318d43,toggleStatus(_0x318d43),_0xbec448(0x260));}}),tgBot[_0x1cc95d(0x27a)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x27fb0f=>{const _0x48f2ee=_0x46aeeb;if(!validateTelegram(_0x27fb0f))return;tgBot[_0x48f2ee(0x27a)](_0x48f2ee(0x2d0));const _0x42032f=getEnabledBots();if(_0x42032f[_0x48f2ee(0x27d)]==0x0)tgBot[_0x48f2ee(0x22c)](_0x27fb0f[_0x48f2ee(0x28b)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x48f2ee(0x2fb)](_0x86d1a=>{telegramError(_0x86d1a);});else{if(_0x42032f['length']>0x1)_0x42032f[_0x48f2ee(0x307)]({'botID':_0x48f2ee(0x322)});let _0x31a19f=[],_0x225518=[];const _0x5b9058=_0x42032f[_0x48f2ee(0x27d)]%0x4==0x0||_0x42032f[_0x48f2ee(0x27d)]%0x4==0x3||_0x42032f[_0x48f2ee(0x27d)]%0x3==0x1?0x4:0x3;let _0x12e7e8=0x0;_0x42032f[_0x48f2ee(0x2eb)]((_0x1d09ab,_0x5af9c4)=>{const _0x1ba1b6=_0x48f2ee;if(_0x5af9c4%_0x5b9058==0x0)_0x225518=[];_0x225518[_0x1ba1b6(0x307)]({'text':_0x1d09ab[_0x1ba1b6(0x2d8)]==_0x1ba1b6(0x322)?_0x1ba1b6(0x21b):'Bot\x20'+_0x1d09ab[_0x1ba1b6(0x2d8)],'callback_data':_0x1d09ab[_0x1ba1b6(0x2d8)]}),_0x5af9c4%_0x5b9058==0x0&&(_0x31a19f[_0x12e7e8]=_0x225518,_0x12e7e8++);}),tgBot['sendMessage'](_0x27fb0f[_0x48f2ee(0x28b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x31a19f}})['catch'](_0xe15a70=>{telegramError(_0xe15a70);}),tgBot['on']('callback_query',async _0x32a776=>{const _0x4b5641=_0x48f2ee,_0x2fee3a=_0x32a776[_0x4b5641(0x2ac)],_0x22dc48=_0x32a776[_0x4b5641(0x254)];tgBot[_0x4b5641(0x1fd)](_0x32a776['id'])['then'](async()=>{const _0x1b66d0=_0x4b5641;if(_0x2fee3a=='all'){if(settings[_0x1b66d0(0x231)]==_0x1b66d0(0x311))tgBot['sendMessage'](_0x22dc48[_0x1b66d0(0x28b)]['id'],_0x1b66d0(0x2ed))[_0x1b66d0(0x2fb)](_0x23957d=>{telegramError(_0x23957d);});_0x42032f[_0x1b66d0(0x2eb)](_0x44e0fa=>{const _0x1a37d5=_0x1b66d0;if(_0x44e0fa[_0x1a37d5(0x2d8)]!='all')toggleBot(_0x44e0fa['botID'],toggleStatus(_0x44e0fa[_0x1a37d5(0x2d8)]),'stopped');});}else{if(settings[_0x1b66d0(0x231)]==_0x1b66d0(0x311))tgBot[_0x1b66d0(0x22c)](_0x22dc48[_0x1b66d0(0x28b)]['id'],_0x1b66d0(0x25b)+_0x2fee3a)[_0x1b66d0(0x2fb)](_0x54a122=>{telegramError(_0x54a122);});toggleBot(_0x2fee3a,toggleStatus(_0x2fee3a),'stopped');}}),tgBot[_0x4b5641(0x27a)](_0x4b5641(0x2d0));});}}),tgBot[_0x46aeeb(0x27b)](/\/disable/,_0x590b63=>{const _0x29cc99=_0x46aeeb;if(!validateTelegram(_0x590b63))return;tgBot[_0x29cc99(0x22c)](_0x590b63[_0x29cc99(0x28b)]['id'],_0x29cc99(0x316))[_0x29cc99(0x2fb)](_0x1e7712=>{telegramError(_0x1e7712);}),updateSetting(_0x29cc99(0x2db),![]);}),tgBot[_0x46aeeb(0x27b)](/\/help/,_0x5ea55b=>{const _0x220f93=_0x46aeeb;if(!validateTelegram(_0x5ea55b))return;tgBot['sendMessage'](_0x5ea55b[_0x220f93(0x28b)]['id'],_0x2b27a3)['catch'](_0x2234f8=>{telegramError(_0x2234f8);});}),tgBot['on'](_0x46aeeb(0x244),_0x328705=>{const _0x4e98c5=_0x46aeeb;_0x328705[_0x4e98c5(0x32a)]()[_0x4e98c5(0x1e1)](_0x4e98c5(0x1fa))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x4e98c5(0x23e)](),tgBot=null,io['to'](_0x4e98c5(0x2b6))[_0x4e98c5(0x1e2)](_0x4e98c5(0x1ee),_0x4e98c5(0x283)));}),process['once'](_0x46aeeb(0x267),()=>{const _0x37c6ca=_0x46aeeb;if(tgBot)tgBot[_0x37c6ca(0x23e)]();process[_0x37c6ca(0x25d)](0x1);}),process[_0x46aeeb(0x1db)](_0x46aeeb(0x275),()=>{const _0xed7e46=_0x46aeeb;if(tgBot)tgBot[_0xed7e46(0x23e)]();process[_0xed7e46(0x25d)](0x1);});}}function disableTelegram(){const _0xff939a=_0x1da0c3;tgBot&&(tgBot[_0xff939a(0x23e)](),tgBot=null);}function sendTelegram(_0x4b9956,_0x5baa8d){const _0x18da46=_0x1da0c3;if(settings[_0x18da46(0x2db)]){if(settings[_0x18da46(0x231)]=='all'||(_0x5baa8d[_0x18da46(0x313)]==_0x18da46(0x30c)||_0x5baa8d[_0x18da46(0x313)]=='success')&&settings[_0x18da46(0x231)]==_0x18da46(0x248)||_0x5baa8d[_0x18da46(0x313)]==_0x18da46(0x30d)&&settings[_0x18da46(0x231)]==_0x18da46(0x311)){if(tgBot&&settings[_0x18da46(0x309)]){if(_0x5baa8d['showname'])tgBot[_0x18da46(0x22c)](settings[_0x18da46(0x309)],_0x5baa8d['botname']+_0x18da46(0x306)+_0x5baa8d[_0x18da46(0x237)])[_0x18da46(0x2fb)](_0x259694=>{telegramError(_0x259694);});else tgBot['sendMessage'](settings[_0x18da46(0x309)],_0x18da46(0x296)+_0x4b9956+'\x20>\x20'+_0x5baa8d['event'])[_0x18da46(0x2fb)](_0x222f70=>{telegramError(_0x222f70);});}}}}function getDeviceWithIp(_0xb813db){const _0x4df355=_0x1da0c3;return devices[_0x4df355(0x31d)](_0x54b17b=>_0x54b17b['ip']===_0xb813db);}function temporaryAccess2FA(_0xbf4b0a,_0x313132){const _0x2f0935=_0x1da0c3;let _0x236ae2=new Date(),_0x1af4f5=![];if(lastIpApproval){if(_0x236ae2-lastIpApproval<0x1388)_0x1af4f5=!![];}lastIpApproval=new Date();if(_0x1af4f5)return;tgBot&&settings[_0x2f0935(0x309)]&&(tgBot[_0x2f0935(0x27a)](_0x2f0935(0x2d0)),tgBot[_0x2f0935(0x22c)](settings[_0x2f0935(0x309)],_0x2f0935(0x2ca)+normalizeIP(_0x313132)[_0x2f0935(0x2d7)]+_0x2f0935(0x271),{'parse_mode':_0x2f0935(0x201),'reply_markup':{'inline_keyboard':[[{'text':_0x2f0935(0x29c),'callback_data':'5'},{'text':_0x2f0935(0x30e),'callback_data':'15'},{'text':_0x2f0935(0x26e),'callback_data':'30'},{'text':_0x2f0935(0x21f),'callback_data':_0x2f0935(0x21f)}]]}})['catch'](_0x29100b=>{telegramError(_0x29100b);}),tgBot['on']('callback_query',async _0xea7acb=>{const _0x503f99=_0x2f0935,_0x411339=_0xea7acb[_0x503f99(0x2ac)],_0x28ac71=_0xea7acb[_0x503f99(0x254)];tgBot[_0x503f99(0x1fd)](_0xea7acb['id'])[_0x503f99(0x236)](async()=>{const _0x592fc6=_0x503f99;devices[_0xbf4b0a]['telegramIpApproval']={'clientip':_0x313132,'timestamp':new Date()['getTime'](),'expiry':_0x411339},_0x411339!=_0x592fc6(0x21f)?(await tgBot[_0x592fc6(0x22c)](_0x28ac71[_0x592fc6(0x28b)]['id'],_0x592fc6(0x208)+_0x411339+'\x20minutes',{'parse_mode':_0x592fc6(0x201)})[_0x592fc6(0x2fb)](_0x289542=>{telegramError(_0x289542);}),io['to'](_0xbf4b0a)['emit']('status',{'access':{'allow':![],'reason':_0x592fc6(0x2fc),'token':null}})):(await tgBot[_0x592fc6(0x22c)](_0x28ac71[_0x592fc6(0x28b)]['id'],_0x592fc6(0x1e6))[_0x592fc6(0x2fb)](_0x21a6df=>{telegramError(_0x21a6df);}),io['to'](_0xbf4b0a)[_0x592fc6(0x1e2)](_0x592fc6(0x26a),{'access':{'allow':![],'reason':_0x592fc6(0x1fe),'token':null}}));}),tgBot[_0x503f99(0x27a)]('callback_query');}));}function loginAccess2FA(_0x1436b2,_0x17f99c){const _0x5c1aed=_0x1da0c3;tgBot&&settings['telegramChatId']&&(tgBot[_0x5c1aed(0x27a)](_0x5c1aed(0x2d0)),tgBot[_0x5c1aed(0x22c)](settings[_0x5c1aed(0x309)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x17f99c)['show']+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5c1aed(0x206),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x5c1aed(0x21f)}]]}})['catch'](_0x13d033=>{telegramError(_0x13d033);}),tgBot['on']('callback_query',async _0x64c2ec=>{const _0x293920=_0x5c1aed,_0xea1204=_0x64c2ec['data'],_0x4ac8fb=_0x64c2ec[_0x293920(0x254)];tgBot[_0x293920(0x1fd)](_0x64c2ec['id'])[_0x293920(0x236)](async()=>{const _0x5a0a33=_0x293920;devices[_0x1436b2][_0x5a0a33(0x24a)]={'clientip':_0x17f99c,'timestamp':new Date()[_0x5a0a33(0x25a)](),'expiry':_0xea1204},_0xea1204!=_0x5a0a33(0x21f)?(await tgBot['sendMessage'](_0x4ac8fb[_0x5a0a33(0x28b)]['id'],_0x5a0a33(0x2f0),{'parse_mode':_0x5a0a33(0x201)})[_0x5a0a33(0x2fb)](_0x39da44=>{telegramError(_0x39da44);}),io['to'](_0x1436b2)[_0x5a0a33(0x1e2)](_0x5a0a33(0x26a),{'access':{'allow':![],'reason':_0x5a0a33(0x2fc),'token':null}})):(await tgBot[_0x5a0a33(0x22c)](_0x4ac8fb[_0x5a0a33(0x28b)]['id'],_0x5a0a33(0x241))[_0x5a0a33(0x2fb)](_0xa72424=>{telegramError(_0xa72424);}),io['to'](_0x1436b2)['emit'](_0x5a0a33(0x26a),{'access':{'allow':![],'reason':_0x5a0a33(0x2bb),'token':null}}));}),tgBot[_0x293920(0x27a)]('callback_query');}));}function getConfiguration(){const _0xc0b801=_0x1da0c3;return dbConfig['get'](_0xc0b801(0x1e5))['sortBy'](_0xc0b801(0x2d8))[_0xc0b801(0x2cd)]()||[];}function getEnabledBots(){const _0x584566=_0x1da0c3;return dbConfig[_0x584566(0x2c2)](_0x584566(0x1e5))[_0x584566(0x284)](_0x584566(0x2d8))[_0x584566(0x2bf)]({'status':_0x584566(0x319)})[_0x584566(0x2cd)]()||[];}function getDisabledBots(){const _0x4f2c19=_0x1da0c3;return dbConfig[_0x4f2c19(0x2c2)](_0x4f2c19(0x1e5))[_0x4f2c19(0x284)](_0x4f2c19(0x2d8))[_0x4f2c19(0x2bf)]({'status':_0x4f2c19(0x2f5)})[_0x4f2c19(0x2cd)]()||[];}function getSettings(){const _0x4a2f9b=_0x1da0c3;return dbSettings['get'](_0x4a2f9b(0x204))[_0x4a2f9b(0x2cd)]()||{'timeshift':0x0};}function getSecure(){const _0x1e9ab8=_0x1da0c3;return dbSecure['get']('secure')[_0x1e9ab8(0x2cd)]()||{};}function getBlacklist(){const _0x365143=_0x1da0c3;return dbSecure['get'](_0x365143(0x27e))[_0x365143(0x2cd)]()||[];}function broadcastToBots(_0x436095,_0x17f477){const _0x22fd54=_0x1da0c3;config[_0x22fd54(0x2eb)](_0x2b1eb4=>{const _0xcfff69=_0x22fd54;if(_0x2b1eb4[_0xcfff69(0x26a)]==_0xcfff69(0x319)&&_0x2b1eb4['live']==_0xcfff69(0x2d4)){if(pid[_0x2b1eb4[_0xcfff69(0x2d8)]])pid[_0x2b1eb4[_0xcfff69(0x2d8)]][_0xcfff69(0x285)]({[_0x436095]:_0x17f477});}});}function storeSettings(_0x4ffda9,_0x3567bb=![]){const _0x3a5dad=_0x1da0c3;_0x4ffda9={...settings,..._0x4ffda9};if(_0x3567bb&&_0x4ffda9[_0x3a5dad(0x282)]!=_0x3a5dad(0x2a7)&&_0x4ffda9[_0x3a5dad(0x282)]!=''){const _0x3a8c63=crypt[_0x3a5dad(0x235)](secure[_0x3a5dad(0x273)],_0x4ffda9[_0x3a5dad(0x282)])[_0x3a5dad(0x254)]['split']('@')[0x0],_0x3cac6c=bcrypt[_0x3a5dad(0x29b)](_0x3a8c63,saltRounds);_0x4ffda9={..._0x4ffda9,'bbPassword':_0x3cac6c};}if(_0x3567bb&&_0x4ffda9[_0x3a5dad(0x209)]!='************'&&_0x4ffda9['telegramToken']!=''){const _0x59a60e=crypt[_0x3a5dad(0x235)](secure[_0x3a5dad(0x273)],_0x4ffda9[_0x3a5dad(0x209)])[_0x3a5dad(0x254)][_0x3a5dad(0x26c)]('@')[0x0];_0x4ffda9={..._0x4ffda9,'telegramToken':_0x59a60e};}const _0x22511b=_0x4ffda9[_0x3a5dad(0x209)]!='************'&&_0x4ffda9[_0x3a5dad(0x209)]!=settings['telegramToken']||_0x4ffda9[_0x3a5dad(0x225)]!=settings[_0x3a5dad(0x225)],_0x47d792=_0x4ffda9['telegramToken']==''||_0x4ffda9[_0x3a5dad(0x225)]=='';if(_0x22511b)_0x4ffda9[_0x3a5dad(0x231)]=_0x3a5dad(0x322);for(const [_0x5f2f55,_0x144929]of Object[_0x3a5dad(0x233)](_0x4ffda9)){if(_0x5f2f55==_0x3a5dad(0x209)&&_0x144929==_0x3a5dad(0x2a7)){_0x4ffda9[_0x3a5dad(0x209)]=settings[_0x3a5dad(0x209)];continue;};if(_0x5f2f55==_0x3a5dad(0x282)&&_0x144929==_0x3a5dad(0x2a7)){_0x4ffda9[_0x3a5dad(0x282)]=settings[_0x3a5dad(0x282)];continue;};dbSettings[_0x3a5dad(0x21c)](_0x3a5dad(0x28d)+_0x5f2f55,_0x144929)['write']();}settings=_0x4ffda9,io['to']('botmanager')['emit'](_0x3a5dad(0x204),cleanSettings()),broadcastToBots('timeshift',settings[_0x3a5dad(0x22b)]);if(_0x22511b&&!_0x47d792)initTelegram();if(_0x22511b&&_0x47d792)disableTelegram();getAllClients()[_0x3a5dad(0x2eb)](_0x546c75=>{const _0x5467b4=_0x3a5dad;getSocket(_0x546c75['id'])[_0x5467b4(0x1e2)](_0x5467b4(0x26a),{'access':{'allow':![],'reason':_0x5467b4(0x2fc),'token':null}});});}function updateSetting(_0x1c602a,_0x3df24f){const _0x252ac2=_0x1da0c3;dbSettings[_0x252ac2(0x21c)]('settings.'+_0x1c602a,_0x3df24f)[_0x252ac2(0x26b)](),settings=getSettings(),io['to']('botmanager')[_0x252ac2(0x1e2)]('settings',cleanSettings());}function storeSecure(_0x325205){const _0x28d690=_0x1da0c3;dbSecure[_0x28d690(0x2c2)](_0x28d690(0x301))[_0x28d690(0x307)](_0x325205)[_0x28d690(0x26b)](),secure=_0x325205;}function addBlacklist(_0x165fb7){const _0x5eb65a=_0x1da0c3;cleanBlacklist();let _0x3f97da;devices[_0x165fb7][_0x5eb65a(0x29a)]?_0x3f97da=Math[_0x5eb65a(0x2a3)](devices[_0x165fb7][_0x5eb65a(0x29a)][_0x5eb65a(0x291)],loginExpiry):_0x3f97da=loginExpiry,dbSecure['get'](_0x5eb65a(0x27e))['push']({'expiry':new Date()['getTime']()+_0x3f97da*0x3c*0x3e8,'token':devices[_0x165fb7][_0x5eb65a(0x255)][_0x5eb65a(0x2d6)]})[_0x5eb65a(0x26b)](),blacklist=dbSecure['get'](_0x5eb65a(0x27e))['value']();}function cleanBlacklist(){const _0x1f7742=_0x1da0c3;let _0x318c7f=dbSecure[_0x1f7742(0x2c2)](_0x1f7742(0x27e))[_0x1f7742(0x2aa)]()[_0x1f7742(0x2cd)](),_0x1efac4=new Date()[_0x1f7742(0x25a)]();_0x318c7f[_0x1f7742(0x2eb)](_0x145836=>{const _0x242706=_0x1f7742;_0x145836[_0x242706(0x291)]<_0x1efac4&&dbSecure[_0x242706(0x2c2)](_0x242706(0x27e))[_0x242706(0x2e0)]({'expiry':_0x145836[_0x242706(0x291)]})[_0x242706(0x26b)]();});}function initStates(){const _0x4b1a0a=_0x1da0c3;let _0x4ab89a=getConfiguration();_0x4ab89a[_0x4b1a0a(0x2eb)](_0x4bcdb0=>{const _0x2e12c5=_0x4b1a0a;_0x4bcdb0[_0x2e12c5(0x2c7)]=_0x2e12c5(0x260);}),storeConfiguration(_0x4ab89a);}function onKeys(){const _0x1bce50=new RSA();return new Promise(_0xcbfbc=>{const _0x50fae9=_0xe310;_0x1bce50[_0x50fae9(0x1e9)]()['then'](_0x5c6bd1=>{_0xcbfbc(_0x5c6bd1);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x395e8d=_0x1da0c3;let _0x8d4450=getConfiguration(),_0x3e4523=![];_0x8d4450['forEach'](_0x56544f=>{const _0x4faa76=_0xe310;if(_0x56544f[_0x4faa76(0x26a)]==_0x4faa76(0x2d4))_0x56544f[_0x4faa76(0x26a)]=_0x4faa76(0x319),_0x3e4523=!![];else _0x56544f[_0x4faa76(0x26a)]==_0x4faa76(0x260)&&(_0x56544f['status']=_0x4faa76(0x2f5),_0x3e4523=!![]);});if(_0x3e4523)storeConfiguration(_0x8d4450);let _0x43e468=getSecure();if(!_0x43e468['hasOwnProperty'](_0x395e8d(0x269))){let _0x1972d1=await generateKeys();_0x43e468[_0x395e8d(0x23c)]=_0x1972d1['publicKey'],_0x43e468[_0x395e8d(0x273)]=_0x1972d1['privateKey'],_0x43e468['secret']=crypto[_0x395e8d(0x277)](0x20)[_0x395e8d(0x32a)]('hex');;storeSecure(_0x43e468);}let _0xfbe6d3=getSettings();_0x3e4523=![];!_0xfbe6d3[_0x395e8d(0x20f)](_0x395e8d(0x220))&&(_0xfbe6d3['loginRequired']=![],_0xfbe6d3[_0x395e8d(0x211)]='',_0xfbe6d3[_0x395e8d(0x282)]='',_0xfbe6d3['f2aRequired']=![],_0x3e4523=!![]);!_0xfbe6d3[_0x395e8d(0x20f)](_0x395e8d(0x2fd))&&(_0xfbe6d3['whitelistEnabled']=![],_0xfbe6d3[_0x395e8d(0x2ea)]=[],_0xfbe6d3[_0x395e8d(0x2c4)]=![],_0x3e4523=!![]);if(!_0xfbe6d3[_0x395e8d(0x20f)](_0x395e8d(0x2db))){if(_0xfbe6d3[_0x395e8d(0x309)])_0xfbe6d3[_0x395e8d(0x2db)]=!![];else _0xfbe6d3[_0x395e8d(0x2db)]=![];_0x3e4523=!![];}if(_0x3e4523)storeSettings(_0xfbe6d3);}function storeConfiguration(_0x112658){const _0x3f5f7a=_0x1da0c3;dbConfig['get']('bots')[_0x3f5f7a(0x2e0)]()[_0x3f5f7a(0x26b)](),dbConfig[_0x3f5f7a(0x2c2)](_0x3f5f7a(0x1e5))[_0x3f5f7a(0x307)](..._0x112658)[_0x3f5f7a(0x26b)](),config=_0x112658;}function resetPassword(){const _0x346d55=_0x1da0c3;tgBot&&settings[_0x346d55(0x309)]&&(tgBot[_0x346d55(0x27a)](_0x346d55(0x2d0)),tgBot[_0x346d55(0x22c)](settings[_0x346d55(0x309)],_0x346d55(0x1f7),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x346d55(0x2ba)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4fccce=>{telegramError(_0x4fccce);}),tgBot['on'](_0x346d55(0x2d0),async _0x81fc78=>{const _0x4baceb=_0x346d55,_0x566107=_0x81fc78['data'],_0x538b=_0x81fc78[_0x4baceb(0x254)];tgBot[_0x4baceb(0x1fd)](_0x81fc78['id'])['then'](async()=>{const _0x30cfdc=_0x4baceb;if(_0x566107!='no'){const _0x5e3024=0xf,_0x47ca25='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x45a20a=Array[_0x30cfdc(0x2e7)](crypto[_0x30cfdc(0x2e5)](new Uint32Array(_0x5e3024)))[_0x30cfdc(0x1ec)](_0x4aaeee=>_0x47ca25[_0x4aaeee%_0x47ca25[_0x30cfdc(0x27d)]])[_0x30cfdc(0x221)](''),_0x41cdb6=bcrypt[_0x30cfdc(0x29b)](_0x45a20a,saltRounds);storeSettings({'bbPassword':_0x41cdb6}),await tgBot['sendMessage'](_0x538b[_0x30cfdc(0x28b)]['id'],_0x30cfdc(0x25f)+_0x45a20a,{'parse_mode':'HTML'})[_0x30cfdc(0x2fb)](_0x6c35b3=>{telegramError(_0x6c35b3);});}else await tgBot['sendMessage'](_0x538b[_0x30cfdc(0x28b)]['id'],_0x30cfdc(0x30b))['catch'](_0x5c2c49=>{telegramError(_0x5c2c49);});}),tgBot['removeListener'](_0x4baceb(0x2d0));}));}function logging(_0x3f451c){const _0x5c8454=_0x1da0c3;console[_0x5c8454(0x325)](getTimeStamp()+_0x5c8454(0x229)+_0x3f451c);if(tgBot&&settings['telegramChatId']&&settings[_0x5c8454(0x231)]!=_0x5c8454(0x311))tgBot[_0x5c8454(0x22c)](settings['telegramChatId'],_0x5c8454(0x2a8)+_0x3f451c)[_0x5c8454(0x2fb)](_0x515374=>{telegramError(_0x515374);});}function getServerTime(){const _0xcfad40=_0x1da0c3,_0x19eb91=new Date();return _0x19eb91['getFullYear']()+'/'+(_0x19eb91[_0xcfad40(0x200)]()+0x1)[_0xcfad40(0x32a)]()[_0xcfad40(0x297)](0x2,'0')+'/'+_0x19eb91['getDate']()[_0xcfad40(0x32a)]()[_0xcfad40(0x297)](0x2,'0')+'\x20'+_0x19eb91[_0xcfad40(0x213)]()[_0xcfad40(0x32a)]()[_0xcfad40(0x297)](0x2,'0')+':'+_0x19eb91[_0xcfad40(0x223)]()[_0xcfad40(0x32a)]()[_0xcfad40(0x297)](0x2,'0')+':'+_0x19eb91['getSeconds']()['toString']()[_0xcfad40(0x297)](0x2,'0');}function getTimeStamp(){const _0x24ab22=_0x1da0c3,_0x15db9b=shiftedTime();return _0x15db9b[_0x24ab22(0x280)]()+'/'+(_0x15db9b[_0x24ab22(0x200)]()+0x1)[_0x24ab22(0x32a)]()[_0x24ab22(0x297)](0x2,'0')+'/'+_0x15db9b[_0x24ab22(0x2a9)]()['toString']()[_0x24ab22(0x297)](0x2,'0')+'\x20'+_0x15db9b[_0x24ab22(0x213)]()['toString']()[_0x24ab22(0x297)](0x2,'0')+':'+_0x15db9b['getMinutes']()[_0x24ab22(0x32a)]()[_0x24ab22(0x297)](0x2,'0')+':'+_0x15db9b[_0x24ab22(0x2fe)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x3bbf2d=_0x1da0c3,_0x817ee2=new Date();let _0x3af7c1=_0x817ee2;if(settings[_0x3bbf2d(0x22b)]&&settings[_0x3bbf2d(0x22b)]!==0x0)_0x3af7c1=fns[_0x3bbf2d(0x2ec)](_0x817ee2,{'hours':settings[_0x3bbf2d(0x22b)]});return _0x3af7c1;}function _0xe310(_0x496f59,_0x3d6f05){const _0x4b8671=_0x1da8();return _0xe310=function(_0x28aa45,_0x54d21e){_0x28aa45=_0x28aa45-0x1d9;let _0x1da8b7=_0x4b8671[_0x28aa45];return _0x1da8b7;},_0xe310(_0x496f59,_0x3d6f05);}function startScheduler(){const _0x43a697=_0x1da0c3;let _0x498731=new Date()[_0x43a697(0x1ef)]();_0x498731==0x1&&backupConfigFiles();_0x498731==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0xdbc171=_0x1da0c3;fs[_0xdbc171(0x251)](configpath,{'withFileTypes':!![]})['forEach'](_0x2feada=>{const _0x550875=_0xdbc171;if(!_0x2feada[_0x550875(0x24b)]())fs[_0x550875(0x31e)](configpath+_0x2feada[_0x550875(0x2af)],configbackuppath+_0x2feada[_0x550875(0x2af)]);});}function triggerAnalytics(){analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x2e95d5,_0x2cb2c4){const _0x220c64=_0x1da0c3;if(_0x2e95d5[_0x220c64(0x2b1)]==settings[_0x220c64(0x211)]&&bcrypt[_0x220c64(0x2de)](_0x2e95d5[_0x220c64(0x321)],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x220c64(0x239),'token':null};else{const _0x51d03a=generateLoginToken(_0x2cb2c4);return{'allow':!![],'reason':_0x220c64(0x305),'token':_0x51d03a};}}else return{'allow':![],'reason':_0x220c64(0x1e7),'token':null};}function refreshToken(_0x5c756a){const _0x1bdd16=_0x1da0c3,_0x433b02=generateLoginToken(_0x5c756a);return{'allow':!![],'reason':_0x1bdd16(0x305),'token':_0x433b02};}function validateAccess(_0x5ce053,_0x530d9c){const _0x3962f8=_0x1da0c3;let _0x4b3c15=devices[_0x530d9c]['ip'],_0x4e8f6b;const _0x4c20af=_0x1045d7=>{const _0x4de454=_0xe310;if(settings[_0x4de454(0x220)]){if(settings[_0x4de454(0x2a6)]){if(telegram2FaApproved(_0x530d9c)){const _0x1c87c4=generateLoginToken(_0x530d9c);return{'allow':!![],'reason':_0x4de454(0x2d1),'token':_0x1c87c4};}else return{'allow':![],'reason':_0x4de454(0x240),'token':null};}else return _0x4e8f6b=validToken(_0x1045d7,_0x530d9c),_0x4e8f6b[_0x4de454(0x20f)](_0x4de454(0x2cf))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1045d7}:{'allow':![],'reason':_0x4de454(0x240),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x3962f8(0x2fd)]){let _0x3be214=[...settings[_0x3962f8(0x2ea)],_0x3962f8(0x1f2),_0x3962f8(0x27f),'127.0.0.1'];if(_0x3be214[_0x3962f8(0x1e1)](_0x4b3c15))return _0x4c20af(_0x5ce053);else{_0x4e8f6b=validToken(_0x5ce053,_0x530d9c);if(_0x4e8f6b[_0x3962f8(0x20f)](_0x3962f8(0x2cf)))return _0x4c20af(_0x5ce053);else{if(telegramIpApproved(_0x530d9c)){const _0x3b5445=generateToken(_0x530d9c);return _0x4e8f6b=_0x4c20af(_0x5ce053),_0x4e8f6b['allow']?{'allow':!![],'reason':_0x3962f8(0x279),'token':_0x3b5445}:_0x4e8f6b;}else return settings[_0x3962f8(0x2c4)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x3962f8(0x219),'token':null};}}}else return _0x4c20af(_0x5ce053);}function timelyDecrypt(_0x566191,_0x29e5ee=!![]){const _0x50ea3e=_0x1da0c3;if(_0x566191)try{const _0xcf817c=crypt[_0x50ea3e(0x235)](secure[_0x50ea3e(0x273)],_0x566191)[_0x50ea3e(0x254)],_0xe43813=_0xcf817c[_0x50ea3e(0x26c)]('@')[0x0],_0x17c121=_0xcf817c['split']('@')[0x1],_0x67e80e=new Date()[_0x50ea3e(0x25a)]();if(_0x29e5ee){if(_0x67e80e-_0x17c121<maxSecretAge*0x3e8)return _0xe43813;else return![];}else return _0xe43813;}catch(_0x1a272c){return![];}else return![];}const validToken=(_0x4c6071,_0x4d0bde)=>{const _0x413d25=_0x1da0c3,_0x3af0d8=devices[_0x4d0bde]['ip'];if(!_0x4c6071)return{'error':_0x413d25(0x1f4)};for(let _0x3bb51d of blacklist){if(_0x3bb51d['token']==_0x4c6071)return{'error':_0x413d25(0x214)};}let _0x518720;try{_0x518720=jwt['verify'](_0x4c6071,secure[_0x413d25(0x269)]+_0x4d0bde);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x518720[_0x413d25(0x20f)]('clientip')&&!_0x518720[_0x413d25(0x20f)](_0x413d25(0x2b1))||!_0x518720[_0x413d25(0x20f)]('exp'))return{'error':_0x413d25(0x265)};if(!_0x518720[_0x413d25(0x20f)](_0x413d25(0x2b1))&&_0x518720['hasOwnProperty']('clientip')){const {clientip:_0x552109}=_0x518720;return _0x3af0d8==_0x552109?{'success':_0x413d25(0x20a)}:{'error':_0x413d25(0x1e3)};}else{if(_0x518720[_0x413d25(0x20f)](_0x413d25(0x2b1))&&_0x518720[_0x413d25(0x20f)](_0x413d25(0x1f0))){const {username:_0x4ad66f,clientip:_0x13301e}=_0x518720;return settings[_0x413d25(0x211)]==_0x4ad66f&&_0x3af0d8==_0x13301e?{'success':_0x413d25(0x20a)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x5f59b1=>{const _0x25023a=_0x1da0c3;if(_0x5f59b1){const _0x381c3e=devices[_0x5f59b1]['ip'];return jwt[_0x25023a(0x2fa)]({'username':settings[_0x25023a(0x211)],'clientip':_0x381c3e},secure['secret']+_0x5f59b1,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x349066=>{const _0x3cb9f7=_0x1da0c3;if(_0x349066){const _0x3ec6c4=devices[_0x349066]['ip'];return jwt['sign']({'clientip':_0x3ec6c4},secure['secret']+_0x349066,{'expiresIn':devices[_0x349066][_0x3cb9f7(0x29a)][_0x3cb9f7(0x291)]*0x3c});}else return![];},telegramIpApproved=_0x45cd19=>{const _0x3ce1e1=_0x1da0c3;let _0xf2d84d=![];return devices[_0x45cd19]['telegramIpApproval']&&devices[_0x45cd19][_0x3ce1e1(0x29a)][_0x3ce1e1(0x291)]!=_0x3ce1e1(0x21f)&&(_0xf2d84d=devices[_0x45cd19][_0x3ce1e1(0x29a)]['clientip']==devices[_0x45cd19]['ip']&&new Date()[_0x3ce1e1(0x25a)]()-devices[_0x45cd19][_0x3ce1e1(0x29a)][_0x3ce1e1(0x27c)]<devices[_0x45cd19][_0x3ce1e1(0x29a)][_0x3ce1e1(0x291)]*0x3c*0x3e8),_0xf2d84d;},telegram2FaApproved=_0x48da47=>{const _0x119c4f=_0x1da0c3;let _0x1b8f55=![];return devices[_0x48da47][_0x119c4f(0x24a)]&&devices[_0x48da47][_0x119c4f(0x24a)]['expiry']!=_0x119c4f(0x21f)&&(_0x1b8f55=devices[_0x48da47][_0x119c4f(0x24a)]['clientip']==devices[_0x48da47]['ip']&&new Date()[_0x119c4f(0x25a)]()-devices[_0x48da47][_0x119c4f(0x24a)][_0x119c4f(0x27c)]<devices[_0x48da47][_0x119c4f(0x24a)][_0x119c4f(0x291)]*0x3c*0x3e8),_0x1b8f55;},normalizeIP=_0x496405=>{const _0x547b4f=_0x1da0c3;let _0x271d77=null,_0x4bbd57=null;if(ipaddr[_0x547b4f(0x318)](_0x496405)){const _0x2bd67a=ipaddr['parse'](_0x496405);_0x2bd67a[_0x547b4f(0x2e1)]()===_0x547b4f(0x2ef)?(_0x2bd67a['isIPv4MappedAddress']()&&(_0x271d77=_0x2bd67a[_0x547b4f(0x2b9)]()[_0x547b4f(0x32a)]()),_0x4bbd57=_0x2bd67a['toString']()):(_0x271d77=_0x2bd67a['toString'](),_0x4bbd57=_0x2bd67a[_0x547b4f(0x1f5)]()['toString']());}return{'show':_0x271d77?_0x271d77:_0x4bbd57,'store':_0x4bbd57};};