const _0x16c541=_0x1b7b;(function(_0x3c84f8,_0x251476){const _0x56e82b=_0x1b7b,_0x499d23=_0x3c84f8();while(!![]){try{const _0x53bd84=parseInt(_0x56e82b(0x1a7))/0x1+-parseInt(_0x56e82b(0x150))/0x2*(-parseInt(_0x56e82b(0x15a))/0x3)+parseInt(_0x56e82b(0x1fa))/0x4*(parseInt(_0x56e82b(0x1b9))/0x5)+parseInt(_0x56e82b(0x166))/0x6*(parseInt(_0x56e82b(0x102))/0x7)+parseInt(_0x56e82b(0xd5))/0x8*(-parseInt(_0x56e82b(0x16b))/0x9)+-parseInt(_0x56e82b(0x14c))/0xa+parseInt(_0x56e82b(0x149))/0xb*(-parseInt(_0x56e82b(0x206))/0xc);if(_0x53bd84===_0x251476)break;else _0x499d23['push'](_0x499d23['shift']());}catch(_0x42cd0a){_0x499d23['push'](_0x499d23['shift']());}}}(_0x2656,0xd298d));const _0x502b3b=function(){let _0x5547f9=!![];return function(_0x437bc5,_0x12a992){const _0x2b1528=_0x5547f9?function(){const _0x49fb79=_0x1b7b;if(_0x12a992){const _0x445ec1=_0x12a992[_0x49fb79(0x16c)](_0x437bc5,arguments);return _0x12a992=null,_0x445ec1;}}:function(){};return _0x5547f9=![],_0x2b1528;};}(),_0x482cdc=_0x502b3b(this,function(){const _0x2e3d06=_0x1b7b;return _0x482cdc['toString']()[_0x2e3d06(0x1ac)](_0x2e3d06(0x11a))['toString']()[_0x2e3d06(0x180)](_0x482cdc)['search']('(((.+)+)+)+$');});_0x482cdc();'use strict';process[_0x16c541(0x172)][_0x16c541(0x169)]=0x1;const childProcess=require(_0x16c541(0x187)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x16c541(0x1d8)),low=require(_0x16c541(0x11f)),path=require(_0x16c541(0x1a6)),crypto=require(_0x16c541(0x13e)),Crypt=require('hybrid-crypto-js')[_0x16c541(0x1fe)],RSA=require(_0x16c541(0xb8))[_0x16c541(0xe4)],bcrypt=require(_0x16c541(0xf2)),jwt=require(_0x16c541(0xc4)),{Analytics}=require(_0x16c541(0xe9)),googleAnalyticsV3Plugin=require(_0x16c541(0x163))['default'],ipaddr=require(_0x16c541(0x12b)),argv=require(_0x16c541(0x179))(process['argv'][_0x16c541(0x113)](0x2))[_0x16c541(0x1ee)],uuidRandom=require(_0x16c541(0x162)),Mixpanel=require(_0x16c541(0x1b1)),axios=require(_0x16c541(0xd9)),PORT=argv['port']||_0x16c541(0x111),pattern=/^[0-9]{2,4}$/;!pattern[_0x16c541(0x1dc)](PORT)&&(console[_0x16c541(0x160)](_0x16c541(0x1b6)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv[_0x16c541(0xf8)]||null,userID=argv['user']||'';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x16c541(0xca),settingsfile=_0x16c541(0x18b),securefile=_0x16c541(0x141);let validInstallation=!![];!fs[_0x16c541(0x171)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x16c541(0xe2)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x16c541(0x19b),configbackuppath=configpath+_0x16c541(0x15c);!fs[_0x16c541(0x171)](configpath)&&fs[_0x16c541(0x14e)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x16c541(0xde)]({'bots':[]})[_0x16c541(0x110)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x16c541(0xde)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x16c541(0xde)]({'secure':{},'blacklist':[]})[_0x16c541(0x110)]();let crypt=new Crypt({'md':_0x16c541(0xce),'rsaStandard':_0x16c541(0x1f2)});const saltRounds=0xa,mixpanel=Mixpanel[_0x16c541(0x129)](_0x16c541(0x123),{'host':_0x16c541(0x1c6)}),analytics=Analytics({'app':_0x16c541(0x1db),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x16c541(0x144)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x16c541(0x1da)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip;const express=require(_0x16c541(0x1b7)),app=express(),http=require(_0x16c541(0x1bd))[_0x16c541(0x117)](app);app[_0x16c541(0x16e)](express[_0x16c541(0x1d2)](path[_0x16c541(0x186)](__dirname,bbpath2,_0x16c541(0x184)))),app[_0x16c541(0x16e)](express[_0x16c541(0x1d2)](path['join'](__dirname,bbpath2,_0x16c541(0xcc)))),app[_0x16c541(0x16a)]('/',function(_0x1b6cf8,_0x4e0958){const _0xe9f8bd=_0x16c541;_0x4e0958[_0xe9f8bd(0x1dd)](path[_0xe9f8bd(0x186)](__dirname,bbpath2,_0xe9f8bd(0x184),'index.html'));}),app['get']('/:bot',function(_0x2f4828,_0x5adf86){const _0x5d4dcb=_0x16c541;_0x5adf86[_0x5d4dcb(0x1dd)](path[_0x5d4dcb(0x186)](__dirname,bbpath2,'build','index.html'));}),app[_0x16c541(0x16a)](_0x16c541(0x17c),(_0x246a83,_0x141b3f)=>{const _0x2e0eb3=_0x16c541;_0x141b3f['sendFile'](path[_0x2e0eb3(0x186)](__dirname,bbpath2,_0x2e0eb3(0xcc),_0x2e0eb3(0x108)));}),app[_0x16c541(0x16a)](_0x16c541(0xf9),(_0x24da72,_0x1ce201)=>{const _0x13b6f6=_0x16c541;_0x1ce201[_0x13b6f6(0x1dd)](path[_0x13b6f6(0x186)](__dirname,bbpath2,_0x13b6f6(0xcc),'index.html'));}),app[_0x16c541(0x16a)]('/:bot/coins',(_0x35d1e0,_0x16aae5)=>{const _0x3faf4d=_0x16c541;_0x16aae5[_0x3faf4d(0x1dd)](path[_0x3faf4d(0x186)](__dirname,bbpath2,_0x3faf4d(0xcc),'index.html'));}),app[_0x16c541(0x16a)]('/:bot/history',(_0x13a123,_0x390c4e)=>{const _0x2d100b=_0x16c541;_0x390c4e[_0x2d100b(0x1dd)](path['join'](__dirname,bbpath2,_0x2d100b(0xcc),_0x2d100b(0x108)));}),app['get']('/:bot/configuration',(_0x3840b1,_0x5e9e53)=>{const _0x436e8f=_0x16c541;_0x5e9e53[_0x436e8f(0x1dd)](path[_0x436e8f(0x186)](__dirname,bbpath2,_0x436e8f(0xcc),_0x436e8f(0x108)));}),app[_0x16c541(0x16a)](_0x16c541(0x11e),(_0x13d277,_0x4e19c8)=>{const _0x330e9c=_0x16c541;_0x4e19c8[_0x330e9c(0x1dd)](path[_0x330e9c(0x186)](__dirname,bbpath2,'build',_0x330e9c(0x108)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require(_0x16c541(0x1ae));let tgBot;if(settings[_0x16c541(0x1a2)]&&settings[_0x16c541(0x1a2)]!=''&&settings[_0x16c541(0x198)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]);function startServer(){const _0xd20469=_0x16c541;console[_0xd20469(0x160)](''),console[_0xd20469(0x160)](_0xd20469(0x127)),logging(_0xd20469(0x17b)+PORT),console[_0xd20469(0x160)](_0xd20469(0x127));if(config['length']!=0x0)config[_0xd20469(0x132)](_0x555d44=>{const _0x2b34ae=_0xd20469;if(_0x555d44['status']==_0x2b34ae(0x1b4)||_0x555d44[_0x2b34ae(0xc2)]==_0x2b34ae(0x138))logging(_0x2b34ae(0x1e9)+_0x555d44[_0x2b34ae(0x1c8)]+_0x2b34ae(0x1be)+_0x555d44[_0x2b34ae(0x128)]),startBot([_0x555d44[_0x2b34ae(0x1c8)],userID],{'cwd':bbpath},function(_0x2714a5){if(_0x2714a5)logging(_0x2714a5);});else(_0x555d44['status']==_0x2b34ae(0x1d5)||_0x555d44[_0x2b34ae(0xc2)]==_0x2b34ae(0x12e))&&logging(_0x2b34ae(0x15e)+_0x555d44[_0x2b34ae(0x1c8)]+_0x2b34ae(0x1be)+_0x555d44[_0x2b34ae(0x128)]);});else!newBot&&console[_0xd20469(0x160)](_0xd20469(0x1f4));if(newBot)addBot();console[_0xd20469(0x160)](_0xd20469(0x127)),console[_0xd20469(0x160)]('');}function startSocket(){io['on']('connection',_0x47ea5b=>{const _0x17839f=_0x1b7b;let _0x4e14b3,_0x3035f1,_0x3e3810,_0x46d127,_0x5288a3;const _0xfa6f7=_0x47ea5b[_0x17839f(0x1d9)][_0x17839f(0x1ca)][_0x17839f(0x125)];_0x3035f1=_0xfa6f7[_0x17839f(0x214)](/bot[0-9]{3}/);if(_0x3035f1)_0x3e3810=_0x3035f1[0x0][_0x17839f(0x214)](/[0-9]{3}/);if(_0x3e3810)_0x4e14b3=_0x3e3810[0x0];else _0x4e14b3=_0x17839f(0x1d0);const _0xabcbc=_0x47ea5b[_0x17839f(0x1d9)]['auth'][_0x17839f(0x20b)];if(!_0xabcbc)_0x47ea5b['emit'](_0x17839f(0xc2),{'publicKey':secure[_0x17839f(0x10d)]});else{_0x46d127=timelyDecrypt(_0xabcbc,![]);if(!_0x46d127)_0x47ea5b[_0x17839f(0x1ba)]('status',{'publicKey':secure[_0x17839f(0x10d)]});else{_0x5288a3=normalizeIP(_0x47ea5b[_0x17839f(0x14f)][_0x17839f(0xdb)])[_0x17839f(0x109)];if(!devices[_0x46d127])devices[_0x46d127]={'uuid':_0x46d127,'access':{'token':null}};devices[_0x46d127]['ip']=_0x5288a3;const _0x1d28cf=addClient(_0x47ea5b['id'],_0x46d127,_0x4e14b3);setAccess(_0x1d28cf),_0x47ea5b['on']('login',_0x436023=>{const _0xd51772=_0x17839f,_0x15f613=timelyDecrypt(_0x436023['password']);if(_0x15f613){_0x436023={'username':_0x436023[_0xd51772(0x1d7)],'password':_0x15f613},devices[_0x46d127][_0xd51772(0xba)]=validateCredentials(_0x436023,_0x46d127);if(devices[_0x46d127][_0xd51772(0xba)]['allow']==![]&&devices[_0x46d127][_0xd51772(0xba)][_0xd51772(0x157)]==_0xd51772(0x175))_0x47ea5b['emit'](_0xd51772(0xc2),{'access':devices[_0x46d127][_0xd51772(0xba)]}),loginAccess2FA(_0x46d127,_0x5288a3);else{if(devices[_0x46d127]['access'][_0xd51772(0x185)]==![]&&devices[_0x46d127]['access'][_0xd51772(0x157)]=='invalid\x20credentials')_0x47ea5b[_0xd51772(0x1ba)](_0xd51772(0xc2),{'access':devices[_0x46d127][_0xd51772(0xba)]});else devices[_0x46d127][_0xd51772(0xba)][_0xd51772(0x185)]&&devices[_0x46d127][_0xd51772(0xba)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x46d127)[_0xd51772(0x132)](_0x58c7fb=>{setAccess(_0x58c7fb);}),setTokenRefresh(_0x46d127),setSessionTimeout(_0xd51772(0xed),_0x46d127));}}else logging(_0xd51772(0x1fb));}),_0x47ea5b['on'](_0x17839f(0x192),()=>{resetPassword();}),_0x47ea5b['on'](_0x17839f(0x1b8),_0xa655bf=>{removeClient(_0x47ea5b['id']);});}}});}function initClient(_0xa90110){const _0x334de7=_0x16c541;if(_0xa90110!=_0x334de7(0x1d0)&&config[_0x334de7(0x112)]!=''){if(pid[_0xa90110])pid[_0xa90110][_0x334de7(0x12d)]({'function':_0x334de7(0x146),'args':null});}}function getSocket(_0x375bbb){const _0x396884=_0x16c541;return io['sockets'][_0x396884(0x182)][_0x396884(0x16a)](_0x375bbb);}function setAccess(_0x4a4867){const _0x23243a=_0x16c541,_0x3f4aa4=getSocket(_0x4a4867['id']),_0x58b321=_0x4a4867['uuid'],_0x55e188=_0x4a4867[_0x23243a(0x168)];devices[_0x58b321][_0x23243a(0xba)]=validateAccess(devices[_0x58b321]['access']['token'],_0x58b321),_0x3f4aa4[_0x23243a(0x186)](_0x58b321);if(devices[_0x58b321][_0x23243a(0xba)][_0x23243a(0x185)]){_0x3f4aa4[_0x23243a(0x186)](_0x55e188);if(_0x55e188=='botmanager')initializeSocketBotManager(_0x3f4aa4);else initializeSocketBot(_0x3f4aa4);initClient(_0x55e188);}devices[_0x58b321][_0x23243a(0xba)][_0x23243a(0x1c2)]&&devices[_0x58b321][_0x23243a(0xba)][_0x23243a(0x157)]==_0x23243a(0x176)&&setSessionTimeout('2FA',_0x58b321),devices[_0x58b321]['access'][_0x23243a(0x1c2)]&&devices[_0x58b321][_0x23243a(0xba)][_0x23243a(0x157)]==_0x23243a(0x17a)&&setSessionTimeout(_0x23243a(0xed),_0x58b321),_0x3f4aa4[_0x23243a(0x1ba)](_0x23243a(0xc2),{'status':_0x4a4867[_0x23243a(0xf6)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x58b321][_0x23243a(0xba)],'externalip':devices[_0x58b321]['ip'],'publicKey':secure[_0x23243a(0x10d)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x58b321]['access']['allow']==![]&&devices[_0x58b321][_0x23243a(0xba)]['reason']==_0x23243a(0xea)&&temporaryAccess2FA(_0x58b321,devices[_0x58b321]['ip']);}function setSessionTimeout(_0xc2d7d7,_0x188c03){const _0x3675e1=_0x16c541;let _0x2f5be8;if(_0xc2d7d7=='login')_0x2f5be8=loginExpiry*0x3c*0x3e8;else _0x2f5be8=devices[_0x188c03][_0x3675e1(0x152)][_0x3675e1(0x1c9)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x188c03][_0x3675e1(0x152)][_0x3675e1(0x201)]);if(devices[_0x188c03]['pidExpireLogin'])clearTimeout(devices[_0x188c03][_0x3675e1(0x17e)]);devices[_0x188c03][_0x3675e1(0x17e)]=setTimeout(()=>{const _0x5f0760=_0x3675e1;if(devices[_0x188c03][_0x5f0760(0x1e3)])clearTimeout(devices[_0x188c03][_0x5f0760(0x1e3)]);removeSocketListeners(_0x188c03),addBlacklist(_0x188c03),devices[_0x188c03]['telegramIpApproval']=null,devices[_0x188c03][_0x5f0760(0x137)]=null,devices[_0x188c03]['access'][_0x5f0760(0x1c2)]=null,devices[_0x188c03][_0x5f0760(0xba)]=validateAccess(devices[_0x188c03][_0x5f0760(0xba)][_0x5f0760(0x1c2)],_0x188c03),!(devices[_0x188c03][_0x5f0760(0xba)]['allow']&&devices[_0x188c03][_0x5f0760(0xba)][_0x5f0760(0x157)]==_0x5f0760(0x181))&&(_0xc2d7d7==_0x5f0760(0xed)?io['to'](_0x188c03)[_0x5f0760(0x1ba)](_0x5f0760(0xc2),{'access':{'allow':![],'reason':_0x5f0760(0xbb),'token':null}}):io['to'](_0x188c03)['emit']('status',{'access':{'allow':![],'reason':_0x5f0760(0xf1),'token':null}})),devices[_0x188c03][_0x5f0760(0xba)][_0x5f0760(0x1c2)]=null;},_0x2f5be8);}function setTokenRefresh(_0x565559){const _0x307e89=_0x16c541;if(devices[_0x565559]['pidRefreshToken'])clearTimeout(devices[_0x565559][_0x307e89(0x1e3)]);devices[_0x565559][_0x307e89(0x1e3)]=setTimeout(()=>{const _0x861e4=_0x307e89;getClientsWithUuid(_0x565559)[_0x861e4(0x143)]!=0x0?(devices[_0x565559][_0x861e4(0xba)]=refreshToken(_0x565559),io['to'](_0x565559)['emit'](_0x861e4(0xc2),{'status':_0x861e4(0x1a9),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x565559][_0x861e4(0xba)],'externalip':devices[_0x565559]['ip'],'publicKey':secure[_0x861e4(0x10d)],'validInstallation':validInstallation}),setTokenRefresh(_0x565559)):clearTimeout(devices[_0x565559][_0x861e4(0x1e3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x32b0b8){const _0x127f81=_0x16c541,_0xe74f9f=getClient(_0x32b0b8['id'])[_0x127f81(0x1f5)];_0x32b0b8[_0x127f81(0x1ba)](_0x127f81(0x19e),config),_0x32b0b8[_0x127f81(0x1ba)](_0x127f81(0x10e),cleanSettings()),_0x32b0b8['on']('add-bot',_0x244b94=>{const _0x3b929d=_0x127f81;if(validateAccess(_0x244b94,_0xe74f9f)['allow'])addBot();else logging(_0x3b929d(0xc9));}),_0x32b0b8['on'](_0x127f81(0x203),(_0x3e8cd5,_0x149860)=>{const _0x40ea01=_0x127f81;if(validateAccess(_0x149860,_0xe74f9f)['allow'])toggleBot(_0x3e8cd5[_0x40ea01(0x1c8)],_0x3e8cd5['status'],_0x3e8cd5['live']);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x32b0b8['on'](_0x127f81(0x165),(_0xe881c3,_0x135da0)=>{const _0x1d7a1a=_0x127f81;if(validateAccess(_0x135da0,_0xe74f9f)[_0x1d7a1a(0x185)])toggleBotMode(_0xe881c3);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x32b0b8['on'](_0x127f81(0x1ed),(_0x28f5b8,_0x1ed490)=>{const _0x329319=_0x127f81;if(validateAccess(_0x1ed490,_0xe74f9f)['allow'])deleteBot(_0x28f5b8);else logging(_0x329319(0x121));}),_0x32b0b8['on'](_0x127f81(0x1f0),(_0x560dfc,_0x1b3c22)=>{const _0x4dc6cb=_0x127f81;if(validateAccess(_0x1b3c22,_0xe74f9f)[_0x4dc6cb(0x185)])storeSettings(_0x560dfc,!![]);else logging(_0x4dc6cb(0xd4));}),_0x32b0b8['on'](_0x127f81(0x1df),_0x44c1ba=>{const _0x424bb7=_0x127f81;if(validateAccess(_0x44c1ba,_0xe74f9f)['allow'])updateBB();else logging(_0x424bb7(0x1f9));}),_0x32b0b8['on'](_0x127f81(0x140),_0x59711c=>{const _0x3e5f45=_0x127f81;if(validateAccess(_0x59711c,_0xe74f9f)[_0x3e5f45(0x185)]){if(devices[_0xe74f9f]['pidRefreshToken'])clearTimeout(devices[_0xe74f9f][_0x3e5f45(0x1e3)]);if(devices[_0xe74f9f][_0x3e5f45(0x17e)])clearTimeout(devices[_0xe74f9f][_0x3e5f45(0x17e)]);removeSocketListeners(getClient(_0x32b0b8['id'])['uuid']),addBlacklist(_0xe74f9f),devices[_0xe74f9f][_0x3e5f45(0x152)]=null,devices[_0xe74f9f][_0x3e5f45(0x137)]=null,devices[_0xe74f9f][_0x3e5f45(0xba)][_0x3e5f45(0x1c2)]=null,io['to'](getClient(_0x32b0b8['id'])['uuid'])[_0x3e5f45(0x1ba)]('status',{'access':{'allow':![],'reason':_0x3e5f45(0x177),'token':null}});}else logging(_0x3e5f45(0x1b2));});}function initializeSocketBot(_0x3fd437){const _0x11f400=_0x16c541,_0x1106f2=getClient(_0x3fd437['id'])[_0x11f400(0x168)],_0x398388=getClient(_0x3fd437['id'])['uuid'];_0x3fd437['on'](_0x11f400(0x145),(_0x3f958a,_0x54ef08)=>{const _0x2540b0=_0x11f400;if(validateAccess(_0x54ef08,_0x398388)['allow']){if(pid[_0x1106f2])pid[_0x1106f2]['send']({'function':_0x2540b0(0xdf),'args':_0x3f958a});}else logging(_0x2540b0(0x10a));}),_0x3fd437['on']('delete-alerts',(_0x5e96db,_0x431a1a)=>{const _0x2a0b7f=_0x11f400;if(validateAccess(_0x431a1a,_0x398388)['allow']){if(pid[_0x1106f2])pid[_0x1106f2][_0x2a0b7f(0x12d)]({'function':_0x2a0b7f(0x13f),'args':_0x5e96db});}else logging(_0x2a0b7f(0x104));}),_0x3fd437['on'](_0x11f400(0x14b),(_0x2bb4a7,_0x198613)=>{const _0x553774=_0x11f400;if(validateAccess(_0x198613,_0x398388)[_0x553774(0x185)]){if(pid[_0x1106f2])pid[_0x1106f2][_0x553774(0x12d)]({'function':_0x553774(0x1e0),'args':_0x2bb4a7});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3fd437['on']('store-configuration',(_0x36418e,_0x22d9e1)=>{const _0x2b8b59=_0x11f400;if(validateAccess(_0x22d9e1,_0x398388)[_0x2b8b59(0x185)]){if(pid[_0x1106f2])pid[_0x1106f2]['send']({'function':_0x2b8b59(0x1e2),'args':_0x36418e});}else logging(_0x2b8b59(0x194));}),_0x3fd437['on'](_0x11f400(0x1e7),(_0x1b4116,_0x5d5d5a)=>{const _0x459b1b=_0x11f400;if(validateAccess(_0x5d5d5a,_0x398388)[_0x459b1b(0x185)]){if(pid[_0x1106f2])pid[_0x1106f2][_0x459b1b(0x12d)]({'function':_0x459b1b(0xb1),'args':_0x1b4116});}else logging(_0x459b1b(0x178));}),_0x3fd437['on'](_0x11f400(0x174),_0x5b838f=>{const _0x2db812=_0x11f400;if(validateAccess(_0x5b838f,_0x398388)[_0x2db812(0x185)]){if(pid[_0x1106f2])pid[_0x1106f2][_0x2db812(0x12d)]({'function':_0x2db812(0x1e8),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3fd437['on'](_0x11f400(0x167),(_0x23b5d9,_0x4f6061)=>{const _0x33516b=_0x11f400;if(validateAccess(_0x4f6061,_0x398388)['allow']){if(pid[_0x1106f2])pid[_0x1106f2][_0x33516b(0x12d)]({'function':'placeOrder','args':_0x23b5d9});}else logging(_0x33516b(0xac));}),_0x3fd437['on'](_0x11f400(0xe8),_0x5bdbca=>{const _0x47401c=_0x11f400;if(validateAccess(_0x5bdbca,_0x398388)[_0x47401c(0x185)]){if(pid[_0x1106f2])pid[_0x1106f2]['send']({'function':_0x47401c(0x114),'args':null});}else logging(_0x47401c(0xda));}),_0x3fd437['on'](_0x11f400(0x140),_0x346859=>{const _0x3798d2=_0x11f400;if(validateAccess(_0x346859,_0x398388)[_0x3798d2(0x185)]){if(devices[_0x398388][_0x3798d2(0x1e3)])clearTimeout(devices[_0x398388][_0x3798d2(0x1e3)]);if(devices[_0x398388][_0x3798d2(0x17e)])clearTimeout(devices[_0x398388][_0x3798d2(0x17e)]);removeSocketListeners(getClient(_0x3fd437['id'])[_0x3798d2(0x1f5)]),addBlacklist(_0x398388),devices[_0x398388][_0x3798d2(0x152)]=null,devices[_0x398388][_0x3798d2(0x137)]=null,devices[_0x398388]['access'][_0x3798d2(0x1c2)]=null,io['to'](getClient(_0x3fd437['id'])[_0x3798d2(0x1f5)])[_0x3798d2(0x1ba)](_0x3798d2(0xc2),{'access':{'allow':![],'reason':_0x3798d2(0x177),'token':null}});}else logging(_0x3798d2(0x1b2));});}function removeSocketListeners(_0x1d8655){const _0x20e6a1=_0x16c541;getClientsWithUuid(_0x1d8655)[_0x20e6a1(0x132)](_0x26cbbd=>{const _0x7f4325=_0x20e6a1;getSocket(_0x26cbbd['id'])[_0x7f4325(0x10c)]();});}function cleanSettings(){const _0x31a776=_0x16c541;let _0x5e31d3=settings;return settings[_0x31a776(0x1a2)]&&settings['telegramToken']!=''&&(_0x5e31d3={..._0x5e31d3,'telegramToken':_0x31a776(0x1d1)}),settings['bbPassword']&&settings[_0x31a776(0x1e6)]!=''&&(_0x5e31d3={..._0x5e31d3,'bbPassword':_0x31a776(0x1d1)}),_0x5e31d3;}function updateBB(){const _0x5f338a=_0x16c541;installingUpdate=!![],config[_0x5f338a(0x132)](_0x5befb5=>{restartBot(_0x5befb5['botID']);}),process['send']({'update':!![]},_0x46da80=>{});}function startBot(_0xe53957,_0xcdfffa,_0x45817f){const _0x3788ad=_0x16c541;let _0x29d041=![];const _0x5631f1=_0xe53957[0x0];_0xcdfffa={..._0xcdfffa,'stdio':[_0x3788ad(0x122),_0x3788ad(0x122),_0x3788ad(0x122),_0x3788ad(0xaf)]},pid[_0x5631f1]=childProcess[_0x3788ad(0xcd)](botfile,_0xe53957,_0xcdfffa),pid[_0x5631f1]['on'](_0x3788ad(0x207),_0x4aeb9b=>{const _0x12e782=_0x3788ad;switch(Object[_0x12e782(0x15f)](_0x4aeb9b)[0x0]){case _0x12e782(0x128):updateBotName(_0x5631f1,_0x4aeb9b[_0x12e782(0x128)]);break;case _0x12e782(0x116):updateBotManager();break;case _0x12e782(0xc2):updateStatus(_0x5631f1,_0x4aeb9b[_0x12e782(0xc2)]);break;case _0x12e782(0x11c):updateLive(_0x5631f1,_0x4aeb9b['live']);break;case _0x12e782(0xb2):updateLive(_0x5631f1,_0x4aeb9b[_0x12e782(0xb2)]),io['to'](_0x5631f1)['emit']('status',{'access':{'allow':![],'reason':_0x12e782(0x1f7),'token':null}});break;case _0x12e782(0x195):_0x4aeb9b[_0x12e782(0x195)]==_0x12e782(0x147)&&restartBot(_0x5631f1);_0x4aeb9b[_0x12e782(0x195)]=='kill'&&toggleBot(_0x5631f1,_0x12e782(0x1d5),'stopped');break;case _0x12e782(0xfd):sendTelegram(_0x5631f1,_0x4aeb9b[_0x12e782(0xfd)]);break;case'telegrammsg':sendTelegramMsg(_0x4aeb9b[_0x12e782(0x119)]);break;case _0x12e782(0xeb):io['to'](_0x5631f1)[_0x12e782(0x1ba)](_0x4aeb9b[_0x12e782(0xeb)],_0x4aeb9b[_0x12e782(0xcb)]);break;}}),pid[_0x5631f1]['on']('error',function(_0x12e5fb){if(_0x29d041)return;_0x29d041=!![],_0x45817f(_0x12e5fb);}),pid[_0x5631f1]['on'](_0x3788ad(0xc0),function(_0xcaf339){const _0x25e6ae=_0x3788ad;if(installingUpdate)return;if(_0x29d041)return;_0x29d041=!![],_0x45817f(null);const _0x2d4be3=dbConfig[_0x25e6ae(0x16a)]('bots')[_0x25e6ae(0x196)]({'botID':_0x5631f1})[_0x25e6ae(0x1ad)]();_0x2d4be3&&(_0x2d4be3[_0x25e6ae(0xc2)]==_0x25e6ae(0x1b4)||_0x2d4be3['status']==_0x25e6ae(0x138))&&(updateLive(_0x5631f1,'stopped'),logging(_0x25e6ae(0xd1)+_0x5631f1),startBot([_0x5631f1,userID],{'cwd':bbpath},function(_0x3620b7){if(_0x3620b7)logging(_0x3620b7);}));});}function stopBot(_0x579683){const _0x4ad97b=_0x16c541;getClientsWithBotID(_0x579683)['forEach'](_0x1c9c78=>{const _0x5f4b06=_0x1b7b;getSocket(_0x1c9c78['id'])[_0x5f4b06(0x1b8)](!![]),removeClient(_0x1c9c78['id']);}),pid[_0x579683]&&(pid[_0x579683][_0x4ad97b(0x1d6)](),pid[_0x579683]=null);}function restartBot(_0x1ed161){const _0x279651=_0x16c541;if(pid[_0x1ed161])pid[_0x1ed161][_0x279651(0x1d6)]();}function addBot(){const _0x57959d=_0x16c541;let _0x220f22;for(let _0x5b80c2=0x1;_0x5b80c2<0x3e9;_0x5b80c2++){_0x220f22=_0x5b80c2[_0x57959d(0x189)]()[_0x57959d(0x191)](0x3,'0');let _0x47ceb2=config[_0x57959d(0x196)](_0x5c970a=>_0x5c970a[_0x57959d(0x1c8)]==_0x220f22);if(!_0x47ceb2)break;}if(_0x220f22==='1000'){logging(_0x57959d(0x1a5));return;}logging(_0x57959d(0x153)+_0x220f22),dbConfig[_0x57959d(0x16a)]('bots')[_0x57959d(0x124)]({'botID':_0x220f22,'botname':'Bot\x20'+_0x220f22,'status':'new','live':''})['write'](),startBot([_0x220f22,userID],{'cwd':bbpath},function(_0x51b683){if(_0x51b683)logging(_0x51b683);}),config=getConfiguration(),io['to'](_0x57959d(0x1d0))['emit']('bots',config);}function deleteBot(_0x56419b){const _0x5b3c1a=_0x16c541;getClientsWithBotID(_0x56419b)[_0x5b3c1a(0x132)](_0x63b930=>{const _0x4f5720=_0x5b3c1a;getSocket(_0x63b930['id'])[_0x4f5720(0x1b8)](!![]),removeClient(_0x63b930['id']);}),dbConfig[_0x5b3c1a(0x16a)](_0x5b3c1a(0x19e))[_0x5b3c1a(0x1ff)]({'botID':_0x56419b})[_0x5b3c1a(0x110)](),logging(_0x5b3c1a(0x1b5)+_0x56419b),stopBot(_0x56419b);try{fs[_0x5b3c1a(0x13d)](path['join'](configpath,_0x5b3c1a(0xe0)+_0x56419b+_0x5b3c1a(0x126))),fs['unlinkSync'](path[_0x5b3c1a(0x186)](configpath,_0x5b3c1a(0xe0)+_0x56419b+'-events.json')),fs[_0x5b3c1a(0x13d)](path[_0x5b3c1a(0x186)](configpath,_0x5b3c1a(0xe0)+_0x56419b+'-performance.json')),fs[_0x5b3c1a(0x13d)](path[_0x5b3c1a(0x186)](configpath,_0x5b3c1a(0xe0)+_0x56419b+_0x5b3c1a(0xf4)));}catch(_0x4e0f0d){if(_0x4e0f0d)logging(_0x5b3c1a(0x1c4),_0x4e0f0d);}config=getConfiguration(),io['to']('botmanager')[_0x5b3c1a(0x1ba)]('bots',config);}function toggleBot(_0x8182e7,_0x199d40,_0x35a568){const _0x51ce35=_0x16c541;dbConfig[_0x51ce35(0x16a)]('bots')['find']({'botID':_0x8182e7})['assign']({'status':_0x199d40})[_0x51ce35(0x1cc)]({'live':_0x35a568})['write']();if(_0x199d40==_0x51ce35(0x1b4)||_0x199d40==_0x51ce35(0x138))logging('enabled\x20Bot\x20'+_0x8182e7),startBot([_0x8182e7,userID],{'cwd':bbpath},function(_0x7875cb){if(_0x7875cb)logging(_0x7875cb);});else(_0x199d40==_0x51ce35(0x1d5)||_0x199d40==_0x51ce35(0x12e))&&(logging(_0x51ce35(0x1f6)+_0x8182e7),stopBot(_0x8182e7));config=getConfiguration(),io['to'](_0x51ce35(0x1d0))['emit'](_0x51ce35(0x19e),config);}function toggleStatus(_0x52cd09){const _0x40684f=_0x16c541;let _0x14d867=dbConfig[_0x40684f(0x16a)](_0x40684f(0x19e))['find']({'botID':_0x52cd09})[_0x40684f(0x1ad)](),_0x302bdd;if(_0x14d867['status']===_0x40684f(0x1b4))_0x302bdd=_0x40684f(0x1d5);else{if(_0x14d867[_0x40684f(0xc2)]===_0x40684f(0x138))_0x302bdd='new-disabled';else{if(_0x14d867[_0x40684f(0xc2)]==='new-disabled')_0x302bdd=_0x40684f(0x138);else{if(_0x14d867[_0x40684f(0xc2)]==='disabled')_0x302bdd=_0x40684f(0x1b4);}}}return _0x302bdd;}function _0x2656(){const _0x2e2a93=['getTime','/status\x20-\x20show\x20bot(s)\x20status\x0a','includes','delete-bot','argv','https://hodlerhacks.com','store-settings','SIGINT','RSA-OAEP','stopPolling','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','uuid','disabled\x20Bot\x20','reload','verify','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','2596tPoYsW','Unauthorized\x20login\x20attempt\x20(timeout)','sortBy','Bot\x20','Crypt','remove','then','timestamp','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','update-bot','/disable\x20-\x20disable\x20notifications\x0a','parse','32441388tXoTPK','message','login\x20required','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Server','encryptedUuid','stringify','User\x20has\x20been\x20validated','</b>\x20?','set','sendMessage','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','match','Temporary\x20access\x20rejected','clientip','randomUUID','all','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','ipc','success','storeHeadless','started','toIPv4Address','Invalid\x20authentication\x20token\x20(2)','\x20mode','getDate','once','hybrid-crypto-js','Notifications\x20enabled\x0a','access','access\x20timeout','yes','::ffff:127.0.0.1','alias','telegramEvents','exit','Login\x20rejected','status','removeListener','jsonwebtoken','https://api.ipify.org?format=json','::1','kind','getFullYear','Unauthorized\x20attempt\x20to\x20add\x20bot','bb-config.json','args','build','fork','sha256','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Notifications\x20disabled\x0a','restarting\x20Bot\x20','127.0.0.1','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20update\x20settings','1856FbMgGK','<b>Telegram\x20Bot\x20Status:</b>\x0a','getSeconds','getUTCHours','axios','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','remoteAddress','\x20>\x20','telegramEnabled','defaults','emitHistory','bot-',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','clients','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','RSA','polling_error','Invalid\x20authentication\x20token\x20(1)','loginRequired','cancel-loading','analytics','2FA\x20required','function','copyFileSync','login','blacklist','hashSync','catch','temporary\x20access\x20timeout','bcryptjs','5\x20min','-results.json','Token\x20blacklisted','server','mode','host','/:bot/performance','No\x20authentication\x20token','toIPv4MappedAddress','show','telegram','cloneDeep','Notifications\x20enabled','invalid\x20credentials','secret','14cwMrAB','writeFileSync','Unauthorized\x20attempt\x20to\x20delete\x20alerts','privateKey','HTML','getMinutes','index.html','store','Unauthorized\x20attempt\x20to\x20get\x20logs','hasOwnProperty','removeAllListeners','publicKey','settings','All\x20bots\x20running\x20right\x20now','write','3000','apiKey','slice','cancelLoading','telegramChatId','updatebotmanager','createServer','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','telegrammsg','(((.+)+)+)+$','stopped','live','secure','/:bot/support','lowdb','reject','Unauthorized\x20attempt\x20to\x20delete\x20bot','inherit','6b67f3d61ee94b8f5c80b4affef4c4d9','push','referer','-config.json','-----------------------------------------------------------------------------------','botname','init','type','ipaddr.js','headless','send','new-disabled','15\x20min','ipv6','/help\x20-\x20show\x20available\x20commands\x0a','forEach','generateKeyPairAsync','password','All','\x20minutes','telegram2FaApproval','new','All\x20bots','notification','event','Ok,\x20will\x20send\x20alert\x20notifications\x20only','unlinkSync','crypto','deleteHistoryAlerts','logout','bb-secure.json','isIPv4MappedAddress','length','UA-192771731-1','get-logs','initclient','restart','max','11JtkQvU','auto','get-portfolio','3040110UrwFCL','data','mkdirSync','conn','177634cAevhm','answerCallbackQuery','telegramIpApproval','starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Login\x20accepted','readdirSync','reason','sendPortfolioTelegram','login\x20token\x20generated','51QUqwoZ','randomFillSync','backup/','Access\x20enabled\x20for\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','keys','log','split','uuid-random','@analytics/google-analytics-v3','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','toggle-bot-mode','1586118qrHfaQ','place-order','bot','NTBA_FIX_319','get','4446XeMAJL','apply','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','use','Password\x20reset\x20rejected','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','existsSync','env','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','get-starting-balances','2FA\x20login\x20required','temporary\x20token\x20generated','logged\x20out','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','yargs/yargs','2FA\x20login\x20token\x20generated','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','/:bot/portfolio','add','pidExpireLogin','whitelistEnabled','constructor','login\x20not\x20required','sockets','from','build2','allow','join','child_process','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','toString','bbUsername','bb-settings.json','isDirectory','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','name','showname','<b>Balance\x20Bot\x20Status:</b>\x0a','padStart','reset-password','chat','Unauthorized\x20attempt\x20to\x20store\x20configuration','stop','find','Invalid\x20IP\x20address','telegramUsername','sign','userid','config/','accept','decrypt','bots','404\x20Not\x20Found','order','getMonth','telegramToken','Orders','Ok,\x20will\x20send\x20order\x20notifications\x20only','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','path','398862bPJHBk','callback_query','connected','Bot\x20Mgr\x20>\x20','onText','search','value','node-telegram-bot-api','map','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','mixpanel','Unauthorized\x20attempt\x20to\x20log\x20out','timeshift','enabled','deleted\x20Bot\x20','Error:\x20Invalid\x20argument\x20','express','disconnect','11920EvMXcL','emit','manual','temporary\x20access\x20not\x20allowed','http','\x20|\x20','orders',':\x20Bot\x20Mgr\x20>\x20','Invalid\x20username\x20or\x20IP\x20address','token','/enable\x20-\x20enable\x20notifications\x0a','error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','api-eu.mixpanel.com','Invalid\x20Telegram\x20token','botID','expiry','headers','exp','assign','getHours','compareSync','f2aRequired','botmanager','************','static','filter','settings.','disabled','kill','username','date-fns','handshake','version','Balance\x20Bot','test','sendFile','\x20to\x20','update-bb','getPortfolio','alerts','storeConfiguration','pidRefreshToken','entries','Alerts','bbPassword','store-headless','getStartingBalances','starting\x20bot\x20|\x20Bot\x20'];_0x2656=function(){return _0x2e2a93;};return _0x2656();}function updateStatus(_0x322096,_0x2c926f){const _0x41b086=_0x16c541;dbConfig[_0x41b086(0x16a)]('bots')[_0x41b086(0x196)]({'botID':_0x322096})[_0x41b086(0x1cc)]({'status':_0x2c926f})[_0x41b086(0x110)](),config=getConfiguration(),io['to'](_0x41b086(0x1d0))['emit']('bots',config);}function updateLive(_0x521d74,_0x42d692){const _0x55c68b=_0x16c541;dbConfig[_0x55c68b(0x16a)]('bots')[_0x55c68b(0x196)]({'botID':_0x521d74})['assign']({'live':_0x42d692})[_0x55c68b(0x110)](),config=getConfiguration(),io['to'](_0x55c68b(0x1d0))[_0x55c68b(0x1ba)](_0x55c68b(0x19e),config);}function updateBotName(_0x4044ef,_0x2d634f){const _0x3bfbed=_0x16c541;dbConfig[_0x3bfbed(0x16a)]('bots')[_0x3bfbed(0x196)]({'botID':_0x4044ef})[_0x3bfbed(0x1cc)]({'botname':_0x2d634f})['write'](),config=getConfiguration(),io['to'](_0x3bfbed(0x1d0))[_0x3bfbed(0x1ba)](_0x3bfbed(0x19e),config);}function updateBotManager(){const _0x2f5141=_0x16c541;config=getConfiguration(),io['to']('botmanager')[_0x2f5141(0x1ba)](_0x2f5141(0x19e),config);}function toggleBotMode(_0x244076){const _0x284edc=_0x16c541;if(pid[_0x244076])pid[_0x244076][_0x284edc(0x12d)]({'function':'toggleBotMode','args':null});else{const _0x373a32=configpath+'bot-'+_0x244076+'-config.json',_0x2ace72=fs['readFileSync'](_0x373a32),_0x44d364=JSON[_0x284edc(0x205)](_0x2ace72),_0x2cebb1=_0x44d364[_0x284edc(0x168)][0x0]['headless'];_0x44d364[_0x284edc(0x168)][0x0][_0x284edc(0x12c)]=!_0x2cebb1;const _0x35219e=JSON[_0x284edc(0x20c)](_0x44d364,null,0x2);fs[_0x284edc(0x103)](_0x373a32,_0x35219e),config=getConfiguration(),io['to']('botmanager')[_0x284edc(0x1ba)](_0x284edc(0x19e),config);}}function telegramError(_0x2d7ec1){const _0x5ce90b=_0x16c541;console[_0x5ce90b(0x160)](getTimeStamp()+_0x5ce90b(0xe1));}function validateTelegram(_0x1f6744){const _0x4a3de0=_0x16c541;if(_0x1f6744[_0x4a3de0(0x183)]['username']!=settings[_0x4a3de0(0x198)]&&'@'+_0x1f6744[_0x4a3de0(0x183)][_0x4a3de0(0x1d7)]!=settings[_0x4a3de0(0x198)])return tgBot[_0x4a3de0(0x210)](_0x1f6744[_0x4a3de0(0x193)]['id'],_0x4a3de0(0x1c5),{'parse_mode':_0x4a3de0(0x106)})['catch'](_0x532aeb=>{telegramError(_0x532aeb);}),![];return!![];}async function initTelegram(){const _0x1f3b91=_0x16c541;if(tgBot)tgBot[_0x1f3b91(0x1f3)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1f3b91(0x1a2)],{'polling':!![]});let _0x5efedc=_0x1f3b91(0x213);_0x5efedc+='\x0a',_0x5efedc+=_0x1f3b91(0x1c3),_0x5efedc+=_0x1f3b91(0x204),_0x5efedc+=_0x1f3b91(0xae),_0x5efedc+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5efedc+='/on\x20-\x20start\x20bot(s)\x0a',_0x5efedc+='/off\x20-\x20stop\x20bot(s)\x0a',_0x5efedc+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x5efedc+='/names\x20-\x20show\x20bot\x20names\x0a',_0x5efedc+=_0x1f3b91(0x1eb),_0x5efedc+=_0x1f3b91(0x16d),_0x5efedc+=_0x1f3b91(0x131);let _0x200e8b=_0x1f3b91(0x18d);_0x200e8b+='\x0a',_0x200e8b+=_0x5efedc,tgBot[_0x1f3b91(0x1ab)](/\/start/,_0x41f7ab=>{const _0x1d75c1=_0x1f3b91;if(!validateTelegram(_0x41f7ab))return;if(settings['telegramChatId']!=_0x41f7ab[_0x1d75c1(0x193)]['id'])updateSetting('telegramChatId',_0x41f7ab[_0x1d75c1(0x193)]['id']);updateSetting(_0x1d75c1(0xdd),!![]),tgBot['sendMessage'](_0x41f7ab[_0x1d75c1(0x193)]['id'],_0x200e8b)[_0x1d75c1(0xf0)](_0x2efa0e=>{telegramError(_0x2efa0e);});}),tgBot[_0x1f3b91(0x1ab)](/\/enable/,_0x204e3c=>{const _0x5e6230=_0x1f3b91;if(!validateTelegram(_0x204e3c))return;if(settings[_0x5e6230(0x115)]!=_0x204e3c['chat']['id'])updateSetting(_0x5e6230(0x115),_0x204e3c[_0x5e6230(0x193)]['id']);updateSetting(_0x5e6230(0xdd),!![]),tgBot['sendMessage'](_0x204e3c[_0x5e6230(0x193)]['id'],_0x5e6230(0xff))['catch'](_0x125801=>{telegramError(_0x125801);});}),tgBot[_0x1f3b91(0x1ab)](/\/config/,async _0x12177a=>{const _0x1ba134=_0x1f3b91;if(!validateTelegram(_0x12177a))return;tgBot[_0x1ba134(0xc3)](_0x1ba134(0x1a8)),tgBot[_0x1ba134(0x210)](_0x12177a[_0x1ba134(0x193)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1ba134(0x1a3),'callback_data':_0x1ba134(0x1bf)},{'text':_0x1ba134(0x1e5),'callback_data':_0x1ba134(0x1e1)},{'text':_0x1ba134(0x135),'callback_data':_0x1ba134(0xab)}]]}})[_0x1ba134(0xf0)](_0x462358=>{telegramError(_0x462358);}),tgBot['on'](_0x1ba134(0x1a8),async _0x5230ab=>{const _0x52ed3c=_0x1ba134,_0x3030cc=_0x5230ab[_0x52ed3c(0x14d)],_0x13e714=_0x5230ab[_0x52ed3c(0x207)];tgBot[_0x52ed3c(0x151)](_0x5230ab['id'])[_0x52ed3c(0x200)](async()=>{const _0x5e627b=_0x52ed3c;_0x3030cc==_0x5e627b(0x1bf)&&(updateSetting('telegramEvents',_0x5e627b(0x1bf)),updateSetting(_0x5e627b(0xdd),!![]),await tgBot[_0x5e627b(0x210)](_0x13e714['chat']['id'],_0x5e627b(0x1a4))[_0x5e627b(0xf0)](_0x1084ee=>{telegramError(_0x1084ee);}));_0x3030cc==_0x5e627b(0x1e1)&&(updateSetting(_0x5e627b(0xbf),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x13e714[_0x5e627b(0x193)]['id'],_0x5e627b(0x13c))['catch'](_0x31e51c=>{telegramError(_0x31e51c);}));_0x3030cc==_0x5e627b(0xab)&&(updateSetting(_0x5e627b(0xbf),_0x5e627b(0xab)),updateSetting(_0x5e627b(0xdd),!![]),await tgBot['sendMessage'](_0x13e714[_0x5e627b(0x193)]['id'],_0x5e627b(0x164))[_0x5e627b(0xf0)](_0x21a781=>{telegramError(_0x21a781);}));if(!settings[_0x5e627b(0x115)])tgBot['sendMessage'](_0x13e714['chat']['id'],_0x5e627b(0x170))[_0x5e627b(0xf0)](_0x2f2007=>{telegramError(_0x2f2007);});}),tgBot[_0x52ed3c(0xc3)](_0x52ed3c(0x1a8));});}),tgBot['onText'](/\/status/,_0x51228e=>{const _0x244a79=_0x1f3b91;if(!validateTelegram(_0x51228e))return;const _0x42d49d=getBotsWithMode();let _0x44d2ca=_0x244a79(0x190);config['forEach'](_0x1f5410=>{const _0xfd5412=_0x244a79,_0x189318=_0x42d49d['find'](_0x58636f=>_0x58636f[_0xfd5412(0x1c8)]==_0x1f5410['botID'])[_0xfd5412(0xf7)];_0x44d2ca+='Bot\x20'+_0x1f5410[_0xfd5412(0x1c8)]+':\x20'+_0x1f5410[_0xfd5412(0xc2)]+'\x20|\x20'+_0x189318+_0xfd5412(0x1be)+_0x1f5410['live']+'\x0a';}),_0x44d2ca+='\x0a',_0x44d2ca+=_0x244a79(0xd6),_0x44d2ca+=!settings[_0x244a79(0xdd)]?_0x244a79(0xd0):_0x244a79(0xb9),_0x44d2ca+=settings['telegramEnabled']?settings[_0x244a79(0xbf)]==_0x244a79(0xab)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x244a79(0xbf)]+'\x20only\x0a':'',tgBot[_0x244a79(0x210)](_0x51228e['chat']['id'],_0x44d2ca,{'parse_mode':'HTML'})[_0x244a79(0xf0)](_0x253650=>{telegramError(_0x253650);});}),tgBot[_0x1f3b91(0x1ab)](/\/restart/,_0x14d1a6=>{const _0x34a7d1=_0x1f3b91;if(!validateTelegram(_0x14d1a6))return;tgBot[_0x34a7d1(0xc3)](_0x34a7d1(0x1a8));const _0x44cf5e=getEnabledBots();if(_0x44cf5e['length']==0x0)tgBot[_0x34a7d1(0x210)](_0x14d1a6[_0x34a7d1(0x193)]['id'],_0x34a7d1(0xd3))[_0x34a7d1(0xf0)](_0x330dfb=>{telegramError(_0x330dfb);});else{if(_0x44cf5e[_0x34a7d1(0x143)]>0x1)_0x44cf5e[_0x34a7d1(0x124)]({'botID':_0x34a7d1(0xab)});let _0x3d356d=[],_0xb2f8d=[];const _0x83e69c=_0x44cf5e[_0x34a7d1(0x143)]%0x4==0x0||_0x44cf5e['length']%0x4==0x3||_0x44cf5e[_0x34a7d1(0x143)]%0x3==0x1?0x4:0x3;let _0x54e39a=0x0;_0x44cf5e[_0x34a7d1(0x132)]((_0x1eb504,_0x434eb3)=>{const _0x1c8ec9=_0x34a7d1;if(_0x434eb3%_0x83e69c==0x0)_0xb2f8d=[];_0xb2f8d[_0x1c8ec9(0x124)]({'text':_0x1eb504[_0x1c8ec9(0x1c8)]==_0x1c8ec9(0xab)?_0x1c8ec9(0x139):_0x1c8ec9(0x1fd)+_0x1eb504['botID'],'callback_data':_0x1eb504[_0x1c8ec9(0x1c8)]}),_0x434eb3%_0x83e69c==0x0&&(_0x3d356d[_0x54e39a]=_0xb2f8d,_0x54e39a++);}),tgBot[_0x34a7d1(0x210)](_0x14d1a6['chat']['id'],_0x34a7d1(0x212),{'reply_markup':{'inline_keyboard':_0x3d356d}})[_0x34a7d1(0xf0)](_0x2df5bd=>{telegramError(_0x2df5bd);}),tgBot['on'](_0x34a7d1(0x1a8),async _0x203d0e=>{const _0xe5834a=_0x34a7d1,_0x32b0ae=_0x203d0e['data'],_0x3fbd96=_0x203d0e['message'];tgBot[_0xe5834a(0x151)](_0x203d0e['id'])[_0xe5834a(0x200)](async()=>{const _0x5e542f=_0xe5834a;_0x32b0ae=='all'?(tgBot[_0x5e542f(0x210)](_0x3fbd96[_0x5e542f(0x193)]['id'],_0x5e542f(0x173))['catch'](_0x3410a0=>{telegramError(_0x3410a0);}),config[_0x5e542f(0x132)](_0x3feb8b=>{const _0x5ea61f=_0x5e542f;restartBot(_0x3feb8b[_0x5ea61f(0x1c8)]);})):(tgBot['sendMessage'](_0x3fbd96['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x32b0ae)[_0x5e542f(0xf0)](_0x40122a=>{telegramError(_0x40122a);}),restartBot(_0x32b0ae));}),tgBot[_0xe5834a(0xc3)]('callback_query');});}}),tgBot[_0x1f3b91(0x1ab)](/\/on/,_0x295cfe=>{const _0x1fb280=_0x1f3b91;if(!validateTelegram(_0x295cfe))return;tgBot['removeListener'](_0x1fb280(0x1a8));const _0x5797f5=getDisabledBots();if(_0x5797f5[_0x1fb280(0x143)]==0x0)tgBot[_0x1fb280(0x210)](_0x295cfe[_0x1fb280(0x193)]['id'],_0x1fb280(0x10f))[_0x1fb280(0xf0)](_0x2088ff=>{telegramError(_0x2088ff);});else{if(_0x5797f5['length']>0x1)_0x5797f5['push']({'botID':_0x1fb280(0xab)});let _0x381e05=[],_0x55011c=[];const _0x224bee=_0x5797f5[_0x1fb280(0x143)]%0x4==0x0||_0x5797f5[_0x1fb280(0x143)]%0x4==0x3||_0x5797f5[_0x1fb280(0x143)]%0x3==0x1?0x4:0x3;let _0x30929e=0x0;_0x5797f5[_0x1fb280(0x132)]((_0x16ed39,_0x34d485)=>{const _0x405010=_0x1fb280;if(_0x34d485%_0x224bee==0x0)_0x55011c=[];_0x55011c[_0x405010(0x124)]({'text':_0x16ed39['botID']==_0x405010(0xab)?_0x405010(0x139):_0x405010(0x1fd)+_0x16ed39['botID'],'callback_data':_0x16ed39['botID']}),_0x34d485%_0x224bee==0x0&&(_0x381e05[_0x30929e]=_0x55011c,_0x30929e++);}),tgBot[_0x1fb280(0x210)](_0x295cfe[_0x1fb280(0x193)]['id'],_0x1fb280(0x211),{'reply_markup':{'inline_keyboard':_0x381e05}})[_0x1fb280(0xf0)](_0x46314a=>{telegramError(_0x46314a);}),tgBot['on'](_0x1fb280(0x1a8),async _0x2b1582=>{const _0x5981bb=_0x1fb280,_0x4abc9f=_0x2b1582[_0x5981bb(0x14d)],_0x326363=_0x2b1582['message'];tgBot[_0x5981bb(0x151)](_0x2b1582['id'])[_0x5981bb(0x200)](async()=>{const _0x298db7=_0x5981bb;_0x4abc9f==_0x298db7(0xab)?(tgBot[_0x298db7(0x210)](_0x326363[_0x298db7(0x193)]['id'],_0x298db7(0x118))['catch'](_0x243608=>{telegramError(_0x243608);}),_0x5797f5['forEach'](_0x3ea089=>{const _0x5b4b30=_0x298db7;if(_0x3ea089[_0x5b4b30(0x1c8)]!=_0x5b4b30(0xab))toggleBot(_0x3ea089[_0x5b4b30(0x1c8)],toggleStatus(_0x3ea089['botID']),_0x5b4b30(0x11b));})):(tgBot[_0x298db7(0x210)](_0x326363[_0x298db7(0x193)]['id'],_0x298db7(0x209)+_0x4abc9f)[_0x298db7(0xf0)](_0x36f6df=>{telegramError(_0x36f6df);}),toggleBot(_0x4abc9f,toggleStatus(_0x4abc9f),_0x298db7(0x11b)));}),tgBot[_0x5981bb(0xc3)](_0x5981bb(0x1a8));});}}),tgBot[_0x1f3b91(0x1ab)](/\/off/,_0x476ab9=>{const _0x16e7b8=_0x1f3b91;if(!validateTelegram(_0x476ab9))return;tgBot[_0x16e7b8(0xc3)](_0x16e7b8(0x1a8));const _0x1c9f93=getEnabledBots();if(_0x1c9f93[_0x16e7b8(0x143)]==0x0)tgBot[_0x16e7b8(0x210)](_0x476ab9[_0x16e7b8(0x193)]['id'],_0x16e7b8(0xd3))['catch'](_0x429e7e=>{telegramError(_0x429e7e);});else{if(_0x1c9f93[_0x16e7b8(0x143)]>0x1)_0x1c9f93['push']({'botID':_0x16e7b8(0xab)});let _0x41faba=[],_0x551cc1=[];const _0x12bc80=_0x1c9f93[_0x16e7b8(0x143)]%0x4==0x0||_0x1c9f93['length']%0x4==0x3||_0x1c9f93[_0x16e7b8(0x143)]%0x3==0x1?0x4:0x3;let _0x1337ef=0x0;_0x1c9f93['forEach']((_0xdcf175,_0xda3f4e)=>{const _0xe419ca=_0x16e7b8;if(_0xda3f4e%_0x12bc80==0x0)_0x551cc1=[];_0x551cc1['push']({'text':_0xdcf175[_0xe419ca(0x1c8)]==_0xe419ca(0xab)?'All\x20bots':_0xe419ca(0x1fd)+_0xdcf175[_0xe419ca(0x1c8)],'callback_data':_0xdcf175[_0xe419ca(0x1c8)]}),_0xda3f4e%_0x12bc80==0x0&&(_0x41faba[_0x1337ef]=_0x551cc1,_0x1337ef++);}),tgBot[_0x16e7b8(0x210)](_0x476ab9['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x41faba}})['catch'](_0x7c526d=>{telegramError(_0x7c526d);}),tgBot['on'](_0x16e7b8(0x1a8),async _0x293662=>{const _0x1d0658=_0x16e7b8,_0x2a1f26=_0x293662[_0x1d0658(0x14d)],_0x51b563=_0x293662[_0x1d0658(0x207)];tgBot['answerCallbackQuery'](_0x293662['id'])[_0x1d0658(0x200)](async()=>{const _0x3237e5=_0x1d0658;_0x2a1f26==_0x3237e5(0xab)?(tgBot[_0x3237e5(0x210)](_0x51b563[_0x3237e5(0x193)]['id'],_0x3237e5(0x154))[_0x3237e5(0xf0)](_0x133c6f=>{telegramError(_0x133c6f);}),_0x1c9f93[_0x3237e5(0x132)](_0x337337=>{const _0x21dcec=_0x3237e5;if(_0x337337[_0x21dcec(0x1c8)]!=_0x21dcec(0xab))toggleBot(_0x337337[_0x21dcec(0x1c8)],toggleStatus(_0x337337[_0x21dcec(0x1c8)]),_0x21dcec(0x11b));})):(tgBot[_0x3237e5(0x210)](_0x51b563[_0x3237e5(0x193)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2a1f26)[_0x3237e5(0xf0)](_0x1a2bbf=>{telegramError(_0x1a2bbf);}),toggleBot(_0x2a1f26,toggleStatus(_0x2a1f26),'stopped'));}),tgBot[_0x1d0658(0xc3)](_0x1d0658(0x1a8));});}}),tgBot[_0x1f3b91(0x1ab)](/\/portfolio/,_0x20cc6a=>{const _0x20b69a=_0x1f3b91;if(!validateTelegram(_0x20cc6a))return;tgBot['removeListener'](_0x20b69a(0x1a8));const _0x3c7fc4=getEnabledBots();if(_0x3c7fc4[_0x20b69a(0x143)]==0x0)tgBot[_0x20b69a(0x210)](_0x20cc6a[_0x20b69a(0x193)]['id'],_0x20b69a(0xd3))['catch'](_0x53b9b5=>{telegramError(_0x53b9b5);});else{if(_0x3c7fc4[_0x20b69a(0x143)]>0x1){let _0x51c82b=[],_0x189de4=[];const _0x4e10b7=_0x3c7fc4[_0x20b69a(0x143)]%0x4==0x0||_0x3c7fc4[_0x20b69a(0x143)]%0x4==0x3||_0x3c7fc4[_0x20b69a(0x143)]%0x3==0x1?0x4:0x3;let _0x3fd080=0x0;_0x3c7fc4[_0x20b69a(0x132)]((_0x494074,_0x98bb88)=>{const _0x52fe59=_0x20b69a;if(_0x98bb88%_0x4e10b7==0x0)_0x189de4=[];_0x189de4[_0x52fe59(0x124)]({'text':_0x52fe59(0x1fd)+_0x494074[_0x52fe59(0x1c8)],'callback_data':_0x494074[_0x52fe59(0x1c8)]}),_0x98bb88%_0x4e10b7==0x0&&(_0x51c82b[_0x3fd080]=_0x189de4,_0x3fd080++);}),tgBot[_0x20b69a(0x210)](_0x20cc6a['chat']['id'],_0x20b69a(0x202),{'reply_markup':{'inline_keyboard':_0x51c82b}})['catch'](_0x415043=>{telegramError(_0x415043);}),tgBot['on'](_0x20b69a(0x1a8),async _0x584a13=>{const _0x36bd5=_0x20b69a,_0x4bd995=_0x584a13['data'],_0x1a9340=_0x584a13[_0x36bd5(0x207)];tgBot[_0x36bd5(0x151)](_0x584a13['id'])['then'](async()=>{const _0x46a744=_0x36bd5;if(pid[_0x4bd995])pid[_0x4bd995][_0x46a744(0x12d)]({'function':_0x46a744(0x158),'args':null});}),tgBot[_0x36bd5(0xc3)](_0x36bd5(0x1a8));});}else{const _0x14cb3c=_0x3c7fc4[0x0][_0x20b69a(0x1c8)];if(pid[_0x14cb3c])pid[_0x14cb3c]['send']({'function':_0x20b69a(0x158),'args':null});}}}),tgBot[_0x1f3b91(0x1ab)](/\/toggle/,_0x2b778b=>{const _0x40685b=_0x1f3b91;if(!validateTelegram(_0x2b778b))return;tgBot[_0x40685b(0xc3)](_0x40685b(0x1a8));const _0x504a03=getBotsWithMode();if(_0x504a03[_0x40685b(0x143)]==0x0)tgBot[_0x40685b(0x210)](_0x2b778b[_0x40685b(0x193)]['id'],_0x40685b(0xd3))['catch'](_0x4f5f82=>{telegramError(_0x4f5f82);});else{let _0x571ad7=[],_0x23da8a=[];const _0x4e0ac5=0x2;let _0x5a5cc5=0x0;_0x504a03['forEach']((_0x3c5e1f,_0x29dbf4)=>{const _0x25456c=_0x40685b;if(_0x29dbf4%_0x4e0ac5==0x0)_0x23da8a=[];_0x23da8a[_0x25456c(0x124)]({'text':'Bot\x20'+_0x3c5e1f[_0x25456c(0x1c8)]+'\x20('+_0x3c5e1f['mode']+')','callback_data':_0x3c5e1f[_0x25456c(0x1c8)]}),_0x29dbf4%_0x4e0ac5==0x0&&(_0x571ad7[_0x5a5cc5]=_0x23da8a,_0x5a5cc5++);}),tgBot[_0x40685b(0x210)](_0x2b778b[_0x40685b(0x193)]['id'],_0x40685b(0xe3),{'reply_markup':{'inline_keyboard':_0x571ad7}})[_0x40685b(0xf0)](_0x20ff3d=>{telegramError(_0x20ff3d);}),tgBot['on'](_0x40685b(0x1a8),async _0x56c154=>{const _0x575b52=_0x40685b,_0x387ba5=_0x56c154[_0x575b52(0x14d)],_0x22e7c9=_0x56c154[_0x575b52(0x207)];tgBot[_0x575b52(0x151)](_0x56c154['id'])[_0x575b52(0x200)](async()=>{const _0xb6b97c=_0x575b52,_0x46fa81=_0x504a03[_0xb6b97c(0x196)](_0x5be1c0=>_0x5be1c0['botID']==_0x387ba5),_0x25b99a=_0x46fa81[_0xb6b97c(0xf7)]==_0xb6b97c(0x14a)?_0xb6b97c(0x1bb):_0xb6b97c(0x14a);tgBot['sendMessage'](_0x22e7c9[_0xb6b97c(0x193)]['id'],_0xb6b97c(0xad)+_0x387ba5+_0xb6b97c(0x1de)+_0x25b99a+_0xb6b97c(0xb5))[_0xb6b97c(0xf0)](_0x3fae6c=>{telegramError(_0x3fae6c);}),toggleBotMode(_0x387ba5);}),tgBot[_0x575b52(0xc3)](_0x575b52(0x1a8));});}}),tgBot[_0x1f3b91(0x1ab)](/\/names/,_0x52860b=>{const _0x46473a=_0x1f3b91;if(!validateTelegram(_0x52860b))return;let _0x402d2b='';config[_0x46473a(0x132)](_0x215325=>{const _0x38e058=_0x46473a;_0x402d2b+=_0x38e058(0x1fd)+_0x215325[_0x38e058(0x1c8)]+':\x20'+_0x215325[_0x38e058(0x128)]+'\x0a';}),tgBot[_0x46473a(0x210)](_0x52860b[_0x46473a(0x193)]['id'],_0x402d2b,{'parse_mode':_0x46473a(0x106)})[_0x46473a(0xf0)](_0x1e3bcb=>{telegramError(_0x1e3bcb);});}),tgBot[_0x1f3b91(0x1ab)](/\/disable/,_0x552304=>{const _0x5b4849=_0x1f3b91;if(!validateTelegram(_0x552304))return;tgBot['sendMessage'](_0x552304[_0x5b4849(0x193)]['id'],'Notifications\x20disabled')[_0x5b4849(0xf0)](_0x1cbf15=>{telegramError(_0x1cbf15);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x1f3b91(0x1ab)](/\/help/,_0x4b4c76=>{const _0x238dfe=_0x1f3b91;if(!validateTelegram(_0x4b4c76))return;tgBot[_0x238dfe(0x210)](_0x4b4c76[_0x238dfe(0x193)]['id'],_0x5efedc)[_0x238dfe(0xf0)](_0x6f8863=>{telegramError(_0x6f8863);});}),tgBot['on'](_0x1f3b91(0xe5),_0x3603cf=>{const _0x41f754=_0x1f3b91;_0x3603cf[_0x41f754(0x189)]()[_0x41f754(0x1ec)](_0x41f754(0x19f))&&(logging(_0x41f754(0x1c7)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x41f754(0x1ba)](_0x41f754(0x13a),_0x41f754(0x1c7)));}),process[_0x1f3b91(0xb7)](_0x1f3b91(0x1f1),()=>{const _0x3cc431=_0x1f3b91;if(tgBot)tgBot['stopPolling']();process[_0x3cc431(0xc0)](0x1);}),process['once']('SIGTERM',()=>{const _0x37502f=_0x1f3b91;if(tgBot)tgBot['stopPolling']();process[_0x37502f(0xc0)](0x1);});}}function disableTelegram(){const _0xcf801e=_0x16c541;tgBot&&(tgBot[_0xcf801e(0x1f3)](),tgBot=null);}function sendTelegram(_0x5d6953,_0x2da1b3){const _0x33d563=_0x16c541;if(settings[_0x33d563(0xdd)]){if(settings['telegramEvents']=='all'||(_0x2da1b3[_0x33d563(0x12a)]=='error'||_0x2da1b3[_0x33d563(0x12a)]==_0x33d563(0xb0))&&settings[_0x33d563(0xbf)]==_0x33d563(0x1e1)||_0x2da1b3[_0x33d563(0x12a)]==_0x33d563(0x1a0)&&settings['telegramEvents']==_0x33d563(0x1bf)){if(tgBot&&settings[_0x33d563(0x115)]){if(_0x2da1b3[_0x33d563(0x18f)])tgBot[_0x33d563(0x210)](settings[_0x33d563(0x115)],_0x2da1b3['botname']+_0x33d563(0xdc)+_0x2da1b3[_0x33d563(0x13b)])['catch'](_0x342300=>{telegramError(_0x342300);});else tgBot[_0x33d563(0x210)](settings['telegramChatId'],_0x33d563(0x1fd)+_0x5d6953+_0x33d563(0xdc)+_0x2da1b3[_0x33d563(0x13b)])[_0x33d563(0xf0)](_0x1b7d93=>{telegramError(_0x1b7d93);});}}}}function sendTelegramMsg(_0x4e189b){const _0x303270=_0x16c541;settings[_0x303270(0xdd)]&&(tgBot&&settings[_0x303270(0x115)]&&tgBot[_0x303270(0x210)](settings[_0x303270(0x115)],_0x4e189b,{'parse_mode':'HTML'})[_0x303270(0xf0)](_0x17ba95=>{telegramError(_0x17ba95);}));}function getDeviceWithIp(_0x4b6182){return devices['find'](_0x1cdcbd=>_0x1cdcbd['ip']===_0x4b6182);}function temporaryAccess2FA(_0x412312,_0x4b1729){const _0x160e98=_0x16c541;let _0x5df7cf=new Date(),_0x546b0e=![];if(lastIpApproval){if(_0x5df7cf-lastIpApproval<0x1388)_0x546b0e=!![];}lastIpApproval=new Date();if(_0x546b0e)return;tgBot&&settings[_0x160e98(0x115)]&&(tgBot['removeListener'](_0x160e98(0x1a8)),tgBot[_0x160e98(0x210)](settings['telegramChatId'],_0x160e98(0x188)+normalizeIP(_0x4b1729)['show']+_0x160e98(0x20e),{'parse_mode':_0x160e98(0x106),'reply_markup':{'inline_keyboard':[[{'text':_0x160e98(0xf3),'callback_data':'5'},{'text':_0x160e98(0x12f),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x160e98(0x120),'callback_data':_0x160e98(0x120)}]]}})['catch'](_0x1c8480=>{telegramError(_0x1c8480);}),tgBot['on'](_0x160e98(0x1a8),async _0x3c85aa=>{const _0x100855=_0x160e98,_0x47588c=_0x3c85aa['data'],_0x546ae3=_0x3c85aa[_0x100855(0x207)];tgBot['answerCallbackQuery'](_0x3c85aa['id'])[_0x100855(0x200)](async()=>{const _0x59e08e=_0x100855;devices[_0x412312]['telegramIpApproval']={'clientip':_0x4b1729,'timestamp':new Date()[_0x59e08e(0x1ea)](),'expiry':_0x47588c},_0x47588c!='reject'?(await tgBot[_0x59e08e(0x210)](_0x546ae3['chat']['id'],_0x59e08e(0x15d)+_0x47588c+_0x59e08e(0x136),{'parse_mode':'HTML'})['catch'](_0x525269=>{telegramError(_0x525269);}),io['to'](_0x412312)[_0x59e08e(0x1ba)](_0x59e08e(0xc2),{'access':{'allow':![],'reason':_0x59e08e(0x1f7),'token':null}})):(await tgBot[_0x59e08e(0x210)](_0x546ae3[_0x59e08e(0x193)]['id'],_0x59e08e(0xa8))[_0x59e08e(0xf0)](_0xaad535=>{telegramError(_0xaad535);}),io['to'](_0x412312)[_0x59e08e(0x1ba)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x100855(0xc3)](_0x100855(0x1a8));}));}function loginAccess2FA(_0x37c061,_0x27890c){const _0x1fd27b=_0x16c541;tgBot&&settings[_0x1fd27b(0x115)]&&(tgBot[_0x1fd27b(0xc3)](_0x1fd27b(0x1a8)),tgBot[_0x1fd27b(0x210)](settings[_0x1fd27b(0x115)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x27890c)[_0x1fd27b(0xfc)]+_0x1fd27b(0x20e),{'parse_mode':_0x1fd27b(0x106),'reply_markup':{'inline_keyboard':[[{'text':_0x1fd27b(0x19c),'callback_data':loginExpiry},{'text':_0x1fd27b(0x120),'callback_data':_0x1fd27b(0x120)}]]}})[_0x1fd27b(0xf0)](_0x197f60=>{telegramError(_0x197f60);}),tgBot['on'](_0x1fd27b(0x1a8),async _0xd97c6c=>{const _0x17c8e0=_0x1fd27b,_0x5ba21e=_0xd97c6c[_0x17c8e0(0x14d)],_0x1d895c=_0xd97c6c['message'];tgBot[_0x17c8e0(0x151)](_0xd97c6c['id'])[_0x17c8e0(0x200)](async()=>{const _0x5212a0=_0x17c8e0;devices[_0x37c061][_0x5212a0(0x137)]={'clientip':_0x27890c,'timestamp':new Date()[_0x5212a0(0x1ea)](),'expiry':_0x5ba21e},_0x5ba21e!=_0x5212a0(0x120)?(await tgBot['sendMessage'](_0x1d895c[_0x5212a0(0x193)]['id'],_0x5212a0(0x155),{'parse_mode':_0x5212a0(0x106)})[_0x5212a0(0xf0)](_0x3bd079=>{telegramError(_0x3bd079);}),io['to'](_0x37c061)[_0x5212a0(0x1ba)](_0x5212a0(0xc2),{'access':{'allow':![],'reason':_0x5212a0(0x1f7),'token':null}})):(await tgBot['sendMessage'](_0x1d895c[_0x5212a0(0x193)]['id'],_0x5212a0(0xc1))['catch'](_0xc599c7=>{telegramError(_0xc599c7);}),io['to'](_0x37c061)['emit']('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x17c8e0(0xc3)](_0x17c8e0(0x1a8));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1cd288=_0x16c541;return dbConfig[_0x1cd288(0x16a)](_0x1cd288(0x19e))[_0x1cd288(0x1fc)](_0x1cd288(0x1c8))[_0x1cd288(0x1d3)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x1e9d33=_0x16c541;return dbConfig[_0x1e9d33(0x16a)](_0x1e9d33(0x19e))[_0x1e9d33(0x1fc)](_0x1e9d33(0x1c8))['filter']({'status':_0x1e9d33(0x1d5)})[_0x1e9d33(0x1ad)]()||[];}function getBotsWithMode(){const _0x164f8e=_0x16c541,_0x331c61=dbConfig['get']('bots')['sortBy'](_0x164f8e(0x1c8))[_0x164f8e(0x1ad)]()||[];return _0x331c61[_0x164f8e(0x132)](_0x4874e8=>{const _0x7dc69=_0x164f8e,_0x3e4624=configpath+_0x7dc69(0xe0)+_0x4874e8[_0x7dc69(0x1c8)]+'-config.json',_0x2957a2=fs['existsSync'](_0x3e4624);if(_0x2957a2){const _0x25c84a=fs['readFileSync'](_0x3e4624);try{const _0x2c2d50=JSON[_0x7dc69(0x205)](_0x25c84a),_0x593f1c=_0x2c2d50?_0x2c2d50[_0x7dc69(0x168)][0x0][_0x7dc69(0x12c)]:![];_0x4874e8[_0x7dc69(0xf7)]=_0x593f1c?'auto':_0x7dc69(0x1bb);}catch(_0x1fdd34){_0x4874e8[_0x7dc69(0xf7)]=_0x7dc69(0x1bb);}}else _0x4874e8['mode']=_0x7dc69(0x1bb);}),_0x331c61;}function getSettings(){const _0x7319a2=_0x16c541;let _0x100cff=dbSettings[_0x7319a2(0x16a)](_0x7319a2(0x10e))['value']();if(!_0x100cff){const _0x3f620f=crypto[_0x7319a2(0xaa)]();mixpanel[_0x7319a2(0xbe)](_0x3f620f),_0x100cff={'timeshift':0x0,'userid':_0x3f620f},dbSettings[_0x7319a2(0x16a)](_0x7319a2(0x10e))[_0x7319a2(0x124)](_0x100cff)[_0x7319a2(0x110)]();}return _0x100cff;}function getSecure(){const _0x2be72b=_0x16c541;return dbSecure[_0x2be72b(0x16a)](_0x2be72b(0x11d))['value']()||{};}function getBlacklist(){const _0x2dfffc=_0x16c541;return dbSecure[_0x2dfffc(0x16a)](_0x2dfffc(0xee))[_0x2dfffc(0x1ad)]()||[];}function broadcastToBots(_0x3f936a,_0x3b1c21){const _0x3ccf66=_0x16c541;config[_0x3ccf66(0x132)](_0xaf096a=>{const _0x45b30f=_0x3ccf66;if(_0xaf096a['status']=='enabled'&&_0xaf096a[_0x45b30f(0x11c)]=='running'){if(pid[_0xaf096a[_0x45b30f(0x1c8)]])pid[_0xaf096a[_0x45b30f(0x1c8)]]['send']({[_0x3f936a]:_0x3b1c21});}});}function storeSettings(_0x11e976,_0x1de3da=![]){const _0x416282=_0x16c541;_0x11e976={...settings,..._0x11e976};if(_0x1de3da&&_0x11e976['bbPassword']!='************'&&_0x11e976['bbPassword']!=''){const _0x371a65=crypt[_0x416282(0x19d)](secure[_0x416282(0x105)],_0x11e976[_0x416282(0x1e6)])['message'][_0x416282(0x161)]('@')[0x0],_0x4087d3=bcrypt[_0x416282(0xef)](_0x371a65,saltRounds);_0x11e976={..._0x11e976,'bbPassword':_0x4087d3};}if(_0x1de3da&&_0x11e976[_0x416282(0x1a2)]!=_0x416282(0x1d1)&&_0x11e976[_0x416282(0x1a2)]!=''){const _0x120bd4=crypt[_0x416282(0x19d)](secure[_0x416282(0x105)],_0x11e976['telegramToken'])[_0x416282(0x207)][_0x416282(0x161)]('@')[0x0];_0x11e976={..._0x11e976,'telegramToken':_0x120bd4};}const _0x2e564a=_0x11e976['telegramToken']!=_0x416282(0x1d1)&&_0x11e976[_0x416282(0x1a2)]!=settings['telegramToken']||_0x11e976['telegramUsername']!=settings[_0x416282(0x198)],_0x1e1697=_0x11e976[_0x416282(0x1a2)]==''||_0x11e976['telegramUsername']=='';if(_0x2e564a)_0x11e976[_0x416282(0xbf)]=_0x416282(0xab);for(const [_0x4c8dcb,_0x49549c]of Object[_0x416282(0x1e4)](_0x11e976)){if(_0x4c8dcb==_0x416282(0x1a2)&&_0x49549c==_0x416282(0x1d1)){_0x11e976[_0x416282(0x1a2)]=settings[_0x416282(0x1a2)];continue;};if(_0x4c8dcb==_0x416282(0x1e6)&&_0x49549c==_0x416282(0x1d1)){_0x11e976['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x416282(0x20f)](_0x416282(0x1d4)+_0x4c8dcb,_0x49549c)['write']();}settings=_0x11e976,io['to']('botmanager')['emit'](_0x416282(0x10e),cleanSettings()),broadcastToBots(_0x416282(0x1b3),settings[_0x416282(0x1b3)]);if(_0x2e564a&&!_0x1e1697)initTelegram();if(_0x2e564a&&_0x1e1697)disableTelegram();getAllClients()[_0x416282(0x132)](_0x306a68=>{const _0x5ee710=_0x416282;getSocket(_0x306a68['id'])[_0x5ee710(0x1ba)](_0x5ee710(0xc2),{'access':{'allow':![],'reason':_0x5ee710(0x1f7),'token':null}});});}function updateSetting(_0x309eec,_0x56a187){const _0x5dc673=_0x16c541;dbSettings[_0x5dc673(0x20f)](_0x5dc673(0x1d4)+_0x309eec,_0x56a187)['write'](),settings=getSettings(),io['to'](_0x5dc673(0x1d0))['emit'](_0x5dc673(0x10e),cleanSettings());}function storeSecure(_0x53762b){const _0x3f979b=_0x16c541;dbSecure['get'](_0x3f979b(0x11d))[_0x3f979b(0x124)](_0x53762b)[_0x3f979b(0x110)](),secure=_0x53762b;}function addBlacklist(_0x43515b){const _0x2c80d5=_0x16c541;cleanBlacklist();let _0x50ee32;devices[_0x43515b][_0x2c80d5(0x152)]?_0x50ee32=Math[_0x2c80d5(0x148)](devices[_0x43515b][_0x2c80d5(0x152)][_0x2c80d5(0x1c9)],loginExpiry):_0x50ee32=loginExpiry,dbSecure[_0x2c80d5(0x16a)](_0x2c80d5(0xee))[_0x2c80d5(0x124)]({'expiry':new Date()[_0x2c80d5(0x1ea)]()+_0x50ee32*0x3c*0x3e8,'token':devices[_0x43515b][_0x2c80d5(0xba)][_0x2c80d5(0x1c2)]})[_0x2c80d5(0x110)](),blacklist=dbSecure[_0x2c80d5(0x16a)](_0x2c80d5(0xee))['value']();}function cleanBlacklist(){const _0x143120=_0x16c541;let _0x1cbb24=dbSecure[_0x143120(0x16a)](_0x143120(0xee))[_0x143120(0xfe)]()[_0x143120(0x1ad)](),_0x28c6ba=new Date()[_0x143120(0x1ea)]();_0x1cbb24[_0x143120(0x132)](_0x597f6f=>{const _0x3f6b7e=_0x143120;_0x597f6f[_0x3f6b7e(0x1c9)]<_0x28c6ba&&dbSecure[_0x3f6b7e(0x16a)]('blacklist')[_0x3f6b7e(0x1ff)]({'expiry':_0x597f6f['expiry']})['write']();});}function initStates(){let _0x199f25=getConfiguration();_0x199f25['forEach'](_0x1da6bd=>{const _0x1d6a4e=_0x1b7b;_0x1da6bd[_0x1d6a4e(0x11c)]=_0x1d6a4e(0x11b);}),storeConfiguration(_0x199f25);}function onKeys(){const _0x24af6f=new RSA();return new Promise(_0x781563=>{const _0x24c4c8=_0x1b7b;_0x24af6f[_0x24c4c8(0x133)]()[_0x24c4c8(0x200)](_0x9b2546=>{_0x781563(_0x9b2546);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x59ac16=_0x16c541;let _0x388393=getSettings(),_0x4dcba4=![];!_0x388393['hasOwnProperty']('userid')&&(_0x388393[_0x59ac16(0x19a)]=uuidRandom(),mixpanel['alias'](_0x388393['userid']),_0x4dcba4=!![]);if(_0x4dcba4)storeSettings(_0x388393);}function storeConfiguration(_0x2b5a94){const _0x296c14=_0x16c541;dbConfig[_0x296c14(0x16a)](_0x296c14(0x19e))[_0x296c14(0x1ff)]()[_0x296c14(0x110)](),_0x2b5a94[_0x296c14(0x132)](_0x10b5bb=>{delete _0x10b5bb['mode'];}),dbConfig[_0x296c14(0x16a)](_0x296c14(0x19e))['push'](..._0x2b5a94)[_0x296c14(0x110)](),config=_0x2b5a94;}function resetPassword(){const _0x12ef5e=_0x16c541;tgBot&&settings[_0x12ef5e(0x115)]&&(tgBot['removeListener'](_0x12ef5e(0x1a8)),tgBot[_0x12ef5e(0x210)](settings[_0x12ef5e(0x115)],_0x12ef5e(0x1b0),{'parse_mode':_0x12ef5e(0x106),'reply_markup':{'inline_keyboard':[[{'text':_0x12ef5e(0xbc),'callback_data':_0x12ef5e(0xbc)},{'text':'no','callback_data':'no'}]]}})[_0x12ef5e(0xf0)](_0x204129=>{telegramError(_0x204129);}),tgBot['on']('callback_query',async _0x38b670=>{const _0x50ed77=_0x12ef5e,_0x5a4ade=_0x38b670[_0x50ed77(0x14d)],_0x308be2=_0x38b670[_0x50ed77(0x207)];tgBot[_0x50ed77(0x151)](_0x38b670['id'])['then'](async()=>{const _0x2276fd=_0x50ed77;if(_0x5a4ade!='no'){const _0x118466=0xf,_0x261863=_0x2276fd(0xcf),_0x3ffc16=Array[_0x2276fd(0x183)](crypto[_0x2276fd(0x15b)](new Uint32Array(_0x118466)))[_0x2276fd(0x1af)](_0x5a123a=>_0x261863[_0x5a123a%_0x261863[_0x2276fd(0x143)]])[_0x2276fd(0x186)](''),_0x27df3b=bcrypt['hashSync'](_0x3ffc16,saltRounds);storeSettings({'bbPassword':_0x27df3b}),await tgBot[_0x2276fd(0x210)](_0x308be2[_0x2276fd(0x193)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3ffc16,{'parse_mode':'HTML'})[_0x2276fd(0xf0)](_0x5e4954=>{telegramError(_0x5e4954);});}else await tgBot[_0x2276fd(0x210)](_0x308be2[_0x2276fd(0x193)]['id'],_0x2276fd(0x16f))[_0x2276fd(0xf0)](_0x664bf7=>{telegramError(_0x664bf7);});}),tgBot[_0x50ed77(0xc3)]('callback_query');}));}function _0x1b7b(_0x58522c,_0x4e7cc3){const _0x3641e5=_0x2656();return _0x1b7b=function(_0x482cdc,_0x502b3b){_0x482cdc=_0x482cdc-0xa8;let _0x2656b7=_0x3641e5[_0x482cdc];return _0x2656b7;},_0x1b7b(_0x58522c,_0x4e7cc3);}function logging(_0x225fb9){const _0x1cd103=_0x16c541;console['log'](getTimeStamp()+_0x1cd103(0x1c0)+_0x225fb9);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!='orders')tgBot[_0x1cd103(0x210)](settings[_0x1cd103(0x115)],_0x1cd103(0x1aa)+_0x225fb9)[_0x1cd103(0xf0)](_0x1a97e8=>{telegramError(_0x1a97e8);});}function getServerTime(){const _0x42c390=_0x16c541,_0x2bd858=new Date();return _0x2bd858['getFullYear']()+'/'+(_0x2bd858[_0x42c390(0x1a1)]()+0x1)[_0x42c390(0x189)]()['padStart'](0x2,'0')+'/'+_0x2bd858['getDate']()['toString']()[_0x42c390(0x191)](0x2,'0')+'\x20'+_0x2bd858[_0x42c390(0x1cd)]()[_0x42c390(0x189)]()[_0x42c390(0x191)](0x2,'0')+':'+_0x2bd858[_0x42c390(0x107)]()['toString']()[_0x42c390(0x191)](0x2,'0')+':'+_0x2bd858['getSeconds']()[_0x42c390(0x189)]()[_0x42c390(0x191)](0x2,'0');}function getTimeStamp(){const _0x5abcf4=_0x16c541,_0x5dfbda=shiftedTime();return _0x5dfbda[_0x5abcf4(0xc8)]()+'/'+(_0x5dfbda[_0x5abcf4(0x1a1)]()+0x1)['toString']()[_0x5abcf4(0x191)](0x2,'0')+'/'+_0x5dfbda[_0x5abcf4(0xb6)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5dfbda[_0x5abcf4(0x1cd)]()[_0x5abcf4(0x189)]()[_0x5abcf4(0x191)](0x2,'0')+':'+_0x5dfbda['getMinutes']()[_0x5abcf4(0x189)]()[_0x5abcf4(0x191)](0x2,'0')+':'+_0x5dfbda[_0x5abcf4(0xd7)]()[_0x5abcf4(0x189)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x371f75=_0x16c541,_0x38a7ad=new Date();let _0x451c27=_0x38a7ad;if(settings[_0x371f75(0x1b3)]&&settings['timeshift']!==0x0)_0x451c27=fns[_0x371f75(0x17d)](_0x38a7ad,{'hours':settings[_0x371f75(0x1b3)]});return _0x451c27;}function startScheduler(){const _0x50c14f=_0x16c541;let _0x25800f=new Date()[_0x50c14f(0xd8)]();_0x25800f==0x1&&backupConfigFiles();_0x25800f==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x318750=_0x16c541;fs[_0x318750(0x156)](configpath,{'withFileTypes':!![]})[_0x318750(0x132)](_0x1af998=>{const _0x366a4e=_0x318750;if(!_0x1af998[_0x366a4e(0x18c)]())fs[_0x366a4e(0xec)](configpath+_0x1af998[_0x366a4e(0x18e)],configbackuppath+_0x1af998['name']);});}async function getPublicIp(){const _0x100c0b=_0x16c541;try{const _0x206fb7=await axios[_0x100c0b(0x16a)](_0x100c0b(0xc5));publicip=_0x206fb7[_0x100c0b(0x14d)]['ip'];}catch(_0x33f430){}}async function triggerAnalytics(_0xf42221=![]){const _0x575671=_0x16c541;if(!publicip)await getPublicIp();const _0x1f74eb=getBotsWithMode();let _0x442f7e=0x0;_0x1f74eb['forEach'](_0x3dd1a0=>{const _0x4dd498=_0x1b7b;if(_0x3dd1a0[_0x4dd498(0xc2)]===_0x4dd498(0x1b4))_0x442f7e++;}),mixpanel['track'](_0x575671(0x20a),{'distinct_id':settings[_0x575671(0x19a)],'ip':publicip,'version':serverversion,'numbots':_0x1f74eb[_0x575671(0x143)],'numbotsenabled':_0x442f7e}),!_0xf42221&&analytics['page']({'title':'Balance\x20Bot\x20Server','href':_0x575671(0x1ef),'path':'/v'+serverversion});}function validateCredentials(_0x48ae0c,_0x43b52f){const _0x40040a=_0x16c541;if(_0x48ae0c[_0x40040a(0x1d7)]==settings[_0x40040a(0x18a)]&&bcrypt[_0x40040a(0x1ce)](_0x48ae0c[_0x40040a(0x134)],settings['bbPassword'])){if(settings[_0x40040a(0x1cf)])return{'allow':![],'reason':_0x40040a(0x175),'token':null};else{const _0x214e0f=generateLoginToken(_0x43b52f);return{'allow':!![],'reason':_0x40040a(0x159),'token':_0x214e0f};}}else return{'allow':![],'reason':_0x40040a(0x100),'token':null};}function refreshToken(_0x416fe6){const _0x3b4aee=_0x16c541,_0x12a093=generateLoginToken(_0x416fe6);return{'allow':!![],'reason':_0x3b4aee(0x159),'token':_0x12a093};}function validateAccess(_0x1ebc6b,_0x4bb60c){const _0xa10ed5=_0x16c541;let _0x3ebed0=devices[_0x4bb60c]['ip'],_0x522a4a;const _0x20936a=_0x3b95f3=>{const _0x3316ee=_0x1b7b;if(settings[_0x3316ee(0xe7)]){if(settings[_0x3316ee(0x1cf)]){if(telegram2FaApproved(_0x4bb60c)){const _0x7fc3cd=generateLoginToken(_0x4bb60c);return{'allow':!![],'reason':_0x3316ee(0x17a),'token':_0x7fc3cd};}else return{'allow':![],'reason':_0x3316ee(0x208),'token':null};}else return _0x522a4a=validToken(_0x3b95f3,_0x4bb60c),_0x522a4a['hasOwnProperty']('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3b95f3}:{'allow':![],'reason':_0x3316ee(0x208),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0xa10ed5(0x17f)]){let _0x3e1ca9=[...settings['whitelist'],_0xa10ed5(0xc6),_0xa10ed5(0xbd),_0xa10ed5(0xd2)];if(_0x3e1ca9[_0xa10ed5(0x1ec)](_0x3ebed0))return _0x20936a(_0x1ebc6b);else{_0x522a4a=validToken(_0x1ebc6b,_0x4bb60c);if(_0x522a4a[_0xa10ed5(0x10b)]('success'))return _0x20936a(_0x1ebc6b);else{if(telegramIpApproved(_0x4bb60c)){const _0x43ceee=generateToken(_0x4bb60c);return _0x522a4a=_0x20936a(_0x1ebc6b),_0x522a4a[_0xa10ed5(0x185)]?{'allow':!![],'reason':_0xa10ed5(0x176),'token':_0x43ceee}:_0x522a4a;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0xa10ed5(0xea),'token':null}:{'allow':![],'reason':_0xa10ed5(0x1bc),'token':null};}}}else return _0x20936a(_0x1ebc6b);}function timelyDecrypt(_0x20e68d,_0x242b77=!![]){const _0x244ba9=_0x16c541;if(_0x20e68d)try{const _0x590b3a=crypt[_0x244ba9(0x19d)](secure[_0x244ba9(0x105)],_0x20e68d)[_0x244ba9(0x207)],_0x42b9b3=_0x590b3a[_0x244ba9(0x161)]('@')[0x0],_0x4d8a1f=_0x590b3a['split']('@')[0x1],_0x4dee17=new Date()['getTime']();if(_0x242b77){if(_0x4dee17-_0x4d8a1f<maxSecretAge*0x3e8)return _0x42b9b3;else return![];}else return _0x42b9b3;}catch(_0x1f6475){return![];}else return![];}const validToken=(_0x312997,_0xe64b9d)=>{const _0x214e30=_0x16c541,_0x2bf01c=devices[_0xe64b9d]['ip'];if(!_0x312997)return{'error':_0x214e30(0xfa)};for(let _0x404233 of blacklist){if(_0x404233[_0x214e30(0x1c2)]==_0x312997)return{'error':_0x214e30(0xf5)};}let _0x56f99c;try{_0x56f99c=jwt[_0x214e30(0x1f8)](_0x312997,secure['secret']+_0xe64b9d);}catch{return{'error':_0x214e30(0xe6)};}if(!_0x56f99c[_0x214e30(0x10b)](_0x214e30(0xa9))&&!_0x56f99c[_0x214e30(0x10b)]('username')||!_0x56f99c[_0x214e30(0x10b)](_0x214e30(0x1cb)))return{'error':_0x214e30(0xb4)};if(!_0x56f99c[_0x214e30(0x10b)](_0x214e30(0x1d7))&&_0x56f99c[_0x214e30(0x10b)](_0x214e30(0xa9))){const {clientip:_0x3dc6b4}=_0x56f99c;return _0x2bf01c==_0x3dc6b4?{'success':_0x214e30(0x20d)}:{'error':_0x214e30(0x197)};}else{if(_0x56f99c[_0x214e30(0x10b)](_0x214e30(0x1d7))&&_0x56f99c[_0x214e30(0x10b)]('clientip')){const {username:_0x220759,clientip:_0x10fac5}=_0x56f99c;return settings[_0x214e30(0x18a)]==_0x220759&&_0x2bf01c==_0x10fac5?{'success':_0x214e30(0x20d)}:{'error':_0x214e30(0x1c1)};}}},generateLoginToken=_0x4d8709=>{const _0x369871=_0x16c541;if(_0x4d8709){const _0x202567=devices[_0x4d8709]['ip'];return jwt[_0x369871(0x199)]({'username':settings[_0x369871(0x18a)],'clientip':_0x202567},secure[_0x369871(0x101)]+_0x4d8709,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x334fab=>{const _0x128aa9=_0x16c541;if(_0x334fab){const _0x25905f=devices[_0x334fab]['ip'];return jwt['sign']({'clientip':_0x25905f},secure['secret']+_0x334fab,{'expiresIn':devices[_0x334fab]['telegramIpApproval'][_0x128aa9(0x1c9)]*0x3c});}else return![];},telegramIpApproved=_0x3f64c9=>{const _0x57ca2e=_0x16c541;let _0x364057=![];return devices[_0x3f64c9]['telegramIpApproval']&&devices[_0x3f64c9]['telegramIpApproval'][_0x57ca2e(0x1c9)]!=_0x57ca2e(0x120)&&(_0x364057=devices[_0x3f64c9][_0x57ca2e(0x152)][_0x57ca2e(0xa9)]==devices[_0x3f64c9]['ip']&&new Date()[_0x57ca2e(0x1ea)]()-devices[_0x3f64c9]['telegramIpApproval'][_0x57ca2e(0x201)]<devices[_0x3f64c9][_0x57ca2e(0x152)]['expiry']*0x3c*0x3e8),_0x364057;},telegram2FaApproved=_0x5c97bf=>{const _0x4ec8de=_0x16c541;let _0x2ec28c=![];return devices[_0x5c97bf][_0x4ec8de(0x137)]&&devices[_0x5c97bf][_0x4ec8de(0x137)][_0x4ec8de(0x1c9)]!='reject'&&(_0x2ec28c=devices[_0x5c97bf][_0x4ec8de(0x137)]['clientip']==devices[_0x5c97bf]['ip']&&new Date()[_0x4ec8de(0x1ea)]()-devices[_0x5c97bf][_0x4ec8de(0x137)]['timestamp']<devices[_0x5c97bf]['telegram2FaApproval'][_0x4ec8de(0x1c9)]*0x3c*0x3e8),_0x2ec28c;},normalizeIP=_0x3aa9b4=>{const _0x3e25cd=_0x16c541;let _0x571c81=null,_0x47a466=null;if(ipaddr['isValid'](_0x3aa9b4)){const _0x3df734=ipaddr[_0x3e25cd(0x205)](_0x3aa9b4);_0x3df734[_0x3e25cd(0xc7)]()===_0x3e25cd(0x130)?(_0x3df734[_0x3e25cd(0x142)]()&&(_0x571c81=_0x3df734[_0x3e25cd(0xb3)]()['toString']()),_0x47a466=_0x3df734[_0x3e25cd(0x189)]()):(_0x571c81=_0x3df734[_0x3e25cd(0x189)](),_0x47a466=_0x3df734[_0x3e25cd(0xfb)]()[_0x3e25cd(0x189)]());}return{'show':_0x571c81?_0x571c81:_0x47a466,'store':_0x47a466};};