const _0x7d1e49=_0x1162;(function(_0x18af41,_0x52c3cb){const _0x26c255=_0x1162,_0x39fa2c=_0x18af41();while(!![]){try{const _0x2cc4c6=parseInt(_0x26c255(0x13f))/0x1+parseInt(_0x26c255(0x298))/0x2+parseInt(_0x26c255(0x24b))/0x3+parseInt(_0x26c255(0x207))/0x4+-parseInt(_0x26c255(0x299))/0x5*(-parseInt(_0x26c255(0x21d))/0x6)+parseInt(_0x26c255(0x302))/0x7+-parseInt(_0x26c255(0x161))/0x8*(parseInt(_0x26c255(0x2e8))/0x9);if(_0x2cc4c6===_0x52c3cb)break;else _0x39fa2c['push'](_0x39fa2c['shift']());}catch(_0x4771f4){_0x39fa2c['push'](_0x39fa2c['shift']());}}}(_0x4721,0x69032));const _0x408503=function(){let _0x5a09dc=!![];return function(_0x522a99,_0xf73f30){const _0x3b4386=_0x5a09dc?function(){const _0x220e80=_0x1162;if(_0xf73f30){const _0x47b329=_0xf73f30[_0x220e80(0x236)](_0x522a99,arguments);return _0xf73f30=null,_0x47b329;}}:function(){};return _0x5a09dc=![],_0x3b4386;};}(),_0x8abc01=_0x408503(this,function(){const _0x286eb0=_0x1162;return _0x8abc01[_0x286eb0(0x1d9)]()[_0x286eb0(0x1fd)]('(((.+)+)+)+$')[_0x286eb0(0x1d9)]()[_0x286eb0(0x162)](_0x8abc01)[_0x286eb0(0x1fd)](_0x286eb0(0x188));});_0x8abc01();'use strict';process[_0x7d1e49(0x249)][_0x7d1e49(0x141)]=0x1;const childProcess=require(_0x7d1e49(0x1a2)),fs=require('fs'),fns=require(_0x7d1e49(0x20e)),low=require(_0x7d1e49(0x2d0)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x7d1e49(0x18a)),crypto=require(_0x7d1e49(0x2a8)),Crypt=require(_0x7d1e49(0x16b))[_0x7d1e49(0x2ff)],RSA=require(_0x7d1e49(0x16b))[_0x7d1e49(0x29f)],bcrypt=require(_0x7d1e49(0x2ee)),jwt=require(_0x7d1e49(0x2f2)),ipaddr=require(_0x7d1e49(0x232)),argv=require('yargs/yargs')(process[_0x7d1e49(0x203)][_0x7d1e49(0x2d7)](0x2))[_0x7d1e49(0x203)],uuidRandom=require(_0x7d1e49(0x2d2)),{Telegraf,Markup}=require(_0x7d1e49(0x221)),Mixpanel=require(_0x7d1e49(0x17a)),axios=require('axios'),{GraphQLClient,gql}=require(_0x7d1e49(0x150)),util=require(_0x7d1e49(0x2f4)),fileUpload=require(_0x7d1e49(0x2b6)),{networkInterfaces}=require('os'),PORT=argv[_0x7d1e49(0x2f5)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x7d1e49(0x2e1)](PORT)&&(console['log'](_0x7d1e49(0x284)+PORT+_0x7d1e49(0x14f)),process[_0x7d1e49(0x1b9)](0x1));const HOST=argv['host']||null,userID=argv[_0x7d1e49(0x26e)]||'',debugging=argv['d']||![],nodeversion=process[_0x7d1e49(0x22c)]['node'];let bbpath=_0x7d1e49(0x136),bbpath2='';const botfile=_0x7d1e49(0x25a),configfile=_0x7d1e49(0x235),settingsfile=_0x7d1e49(0x273),securefile=_0x7d1e49(0x17d),environment=require('./'+bbpath2+_0x7d1e49(0x31f))[_0x7d1e49(0x1c4)]||_0x7d1e49(0x1ed),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x7d1e49(0x1e1)+userID+'/':bbpath+_0x7d1e49(0x1e1),configbackuppath=configpath+_0x7d1e49(0x1f2),logspath=userID?bbpath+_0x7d1e49(0x16a)+userID+'/':bbpath+_0x7d1e49(0x16a),zippath=userID?bbpath+_0x7d1e49(0x225)+userID+'/':bbpath+_0x7d1e49(0x225),loggerfile=fs[_0x7d1e49(0x309)](logspath+_0x7d1e49(0x308),{'flags':'a'}),temppath=userID?bbpath+_0x7d1e49(0x138)+userID+'/':bbpath+'temp/';!fs[_0x7d1e49(0x301)](configpath)&&fs[_0x7d1e49(0x228)](configpath);!fs[_0x7d1e49(0x301)](configbackuppath)&&fs[_0x7d1e49(0x228)](configbackuppath);!fs[_0x7d1e49(0x301)](logspath)&&fs[_0x7d1e49(0x228)](logspath);!fs[_0x7d1e49(0x301)](zippath)&&fs['mkdirSync'](zippath);function _0x1162(_0x235159,_0x367966){const _0x4c499a=_0x4721();return _0x1162=function(_0x8abc01,_0x408503){_0x8abc01=_0x8abc01-0x10a;let _0x47214a=_0x4c499a[_0x8abc01];return _0x47214a;},_0x1162(_0x235159,_0x367966);}!fs[_0x7d1e49(0x301)](temppath)&&fs[_0x7d1e49(0x228)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x7d1e49(0x279)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x7d1e49(0x279)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x7d1e49(0x181)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x7d1e49(0x279)]({'secure':{},'blacklist':[]})[_0x7d1e49(0x181)]();let crypt=new Crypt({'md':_0x7d1e49(0x26b),'rsaStandard':_0x7d1e49(0x1b6)});const saltRounds=0xa,mixpanel=Mixpanel[_0x7d1e49(0x1f3)](_0x7d1e49(0x1b4),{'host':_0x7d1e49(0x2a5)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x7d1e49(0x133)]&&(settings['telegramToken']!=''&&settings[_0x7d1e49(0x133)]!=_0x7d1e49(0x1d0))&&settings[_0x7d1e49(0x14c)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0xae5610,_0x259b45)=>{const _0x11003c=_0x7d1e49,_0x1c25ad=/#[A-Z]{3}#/g;if(typeof _0xae5610==_0x11003c(0x2d1)){!_0x259b45?_0xae5610=_0xae5610[_0x11003c(0x2f8)](_0x1c25ad,''):(_0xae5610=_0xae5610[_0x11003c(0x2f8)](/#BLU#/g,_0x11003c(0x257)),_0xae5610=_0xae5610[_0x11003c(0x2f8)](/#RED#/g,_0x11003c(0x280)),_0xae5610=_0xae5610[_0x11003c(0x2f8)](/#YEL#/g,'\x1b[33m'),_0xae5610=_0xae5610[_0x11003c(0x2f8)](/#MAG#/g,'\x1b[35m'),_0xae5610=_0xae5610['replace'](/#CYA#/g,_0x11003c(0x1b2)),_0xae5610=_0xae5610[_0x11003c(0x2f8)](/#RES#/g,_0x11003c(0x2cd)));;}return _0xae5610;},logger={'screen':_0x8aa019=>{const _0x12d874=_0x7d1e49;console[_0x12d874(0x31e)](parseColor(_0x8aa019,!![]));},'simple':_0x23f909=>{const _0x5850eb=_0x7d1e49;console[_0x5850eb(0x31e)](parseColor(_0x23f909,!![])),loggerfile[_0x5850eb(0x181)](util[_0x5850eb(0x31c)](parseColor(_0x23f909,![]))+'\x0a');},'full':async _0x1c5321=>{const _0x46f806=_0x7d1e49,_0x26d7f7=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x1c5321;console[_0x46f806(0x31e)](parseColor(_0x26d7f7,!![])),loggerfile[_0x46f806(0x181)](util[_0x46f806(0x31c)](parseColor(_0x26d7f7,![]))+'\x0a');if(tgBot&&settings[_0x46f806(0x23d)]&&settings[_0x46f806(0x139)]!=_0x46f806(0x317))await sendTelegram(settings[_0x46f806(0x23d)],_0x46f806(0x1ae)+parseColor(_0x1c5321,![]));},'debug':async(_0x1ad6b5,_0x1c0ee7='')=>{const _0x12cfb0=_0x7d1e49,_0x53174f=getTimeStamp()+_0x12cfb0(0x2bd)+_0x1ad6b5;if(debugging)console[_0x12cfb0(0x31e)](parseColor(_0x53174f,!![]));loggerfile[_0x12cfb0(0x181)](util['format'](parseColor(_0x53174f,![]))+'\x0a');if(_0x1c0ee7){if(debugging)console[_0x12cfb0(0x31e)](_0x1c0ee7);loggerfile['write'](util[_0x12cfb0(0x31c)](_0x1c0ee7)+'\x0a');}}};let terminating=![];process['on'](_0x7d1e49(0x27d),function(_0x5721f6){const _0x54a96b=_0x7d1e49;_0x5721f6['toString']()[_0x54a96b(0x2c6)](_0x54a96b(0x297))?(logger[_0x54a96b(0x15d)](_0x54a96b(0x29b)+_0x5721f6[_0x54a96b(0x2f5)]+_0x54a96b(0x270)),process[_0x54a96b(0x20f)]({'terminate':!![]},_0x395279=>{})):logger['simple'](_0x5721f6);}),process['on'](_0x7d1e49(0x1b9),()=>{const _0x553f2b=_0x7d1e49;stopAllBots(),process[_0x553f2b(0x1b9)](0x0);}),process['on'](_0x7d1e49(0x2e2),()=>{const _0x46cb5c=_0x7d1e49;stopAllBots(),process[_0x46cb5c(0x1b9)](0x0);}),process['on'](_0x7d1e49(0x2aa),()=>{const _0x86c6eb=_0x7d1e49;stopAllBots(),process[_0x86c6eb(0x1b9)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x7d1e49(0x31f))[_0x7d1e49(0x149)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x7d1e49(0x2a1))['createServer'](app);app[_0x7d1e49(0x1c6)](fileUpload({'useTempFiles':!![]})),app['get'](_0x7d1e49(0x21f),async(_0x562b8c,_0x1c307f)=>{const _0x5db246=_0x7d1e49,_0x1cb150=_0x562b8c[_0x5db246(0x17f)][_0x5db246(0x13b)],_0x327c67=getClientsWithBotID(_0x5db246(0x276)),_0x570b5d=_0x562b8c[_0x5db246(0x253)][_0x5db246(0x258)],_0x28bf09=timelyDecrypt(_0x570b5d,![]),_0x13ba00=_0x327c67[_0x5db246(0x2fb)](_0x15e812=>_0x15e812[_0x5db246(0x258)]==_0x28bf09);if(_0x13ba00){const _0x3771c8=normalizeIP(_0x562b8c['socket'][_0x5db246(0x23b)])[_0x5db246(0x28b)],_0x55bcdb=_0x562b8c[_0x5db246(0x253)]['tkn'];if(validateAccess(_0x55bcdb,_0x28bf09,_0x3771c8)[_0x5db246(0x1f5)])_0x1cb150==_0x5db246(0x2e6)&&await backupConfigFiles(),await zipFiles(_0x1cb150),_0x1c307f[_0x5db246(0x166)](zippath+(_0x1cb150+_0x5db246(0x122)),_0x16e89f=>{_0x16e89f&&(logger['full']('Failed\x20to\x20download\x20'+_0x1cb150),logger['simple'](_0x16e89f));});else logger['full'](_0x5db246(0x217)+_0x1cb150+'\x20(1)');}else logger[_0x5db246(0x318)](_0x5db246(0x217)+_0x1cb150+_0x5db246(0x1a6));}),app[_0x7d1e49(0x300)](_0x7d1e49(0x2b0),async(_0x357187,_0x4f16c0)=>{const _0x1fdf46=_0x7d1e49,_0x5ae2a3=getClientsWithBotID(_0x1fdf46(0x276)),_0x3be9c7=_0x357187['headers']['uuid'],_0x8daf0e=timelyDecrypt(_0x3be9c7,![]),_0x2d2a5c=_0x5ae2a3[_0x1fdf46(0x2fb)](_0x177558=>_0x177558['uuid']==_0x8daf0e);logger[_0x1fdf46(0x25e)](_0x1fdf46(0x202));if(_0x2d2a5c){const _0x2e9682=normalizeIP(_0x357187[_0x1fdf46(0x2ec)][_0x1fdf46(0x23b)])['store'],_0x18f764=_0x357187[_0x1fdf46(0x253)][_0x1fdf46(0x248)];if(validateAccess(_0x18f764,_0x8daf0e,_0x2e9682)['allow']){if(_0x357187[_0x1fdf46(0x1fe)]){const _0x4562f4=_0x357187[_0x1fdf46(0x1fe)][_0x1fdf46(0x2bb)];await _0x4562f4['mv'](temppath+_0x4562f4[_0x1fdf46(0x1f8)]),_0x4f16c0[_0x1fdf46(0x20f)]({'status':!![],'message':'File\x20uploaded'});const _0x3b6c93=getBotsWithMode();_0x3b6c93[_0x1fdf46(0x1df)]>0x0?confirmRestore(temppath,_0x4562f4[_0x1fdf46(0x1f8)]):unzipFile(temppath,_0x4562f4[_0x1fdf46(0x1f8)]);}}else logger[_0x1fdf46(0x318)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1fdf46(0x318)](_0x1fdf46(0x208));}),app[_0x7d1e49(0x1c6)](express[_0x7d1e49(0x1a7)](path[_0x7d1e49(0x20d)](__dirname,bbpath2,_0x7d1e49(0x1f9)))),app['use'](express[_0x7d1e49(0x1a7)](path['join'](__dirname,bbpath2,_0x7d1e49(0x2a0)))),app[_0x7d1e49(0x159)]('/',function(_0x30dad6,_0x4571a2){const _0x58d032=_0x7d1e49;_0x4571a2['sendFile'](path[_0x58d032(0x20d)](__dirname,bbpath2,_0x58d032(0x1f9),_0x58d032(0x28f)));}),app[_0x7d1e49(0x159)](_0x7d1e49(0x1a1),function(_0x32550e,_0x417d0c){const _0x741acd=_0x7d1e49;_0x417d0c[_0x741acd(0x191)](path[_0x741acd(0x20d)](__dirname,bbpath2,_0x741acd(0x2a0),'index.html'));}),app['get']('/:bot/portfolio',(_0x1eb27c,_0x1e1430)=>{const _0x416bd3=_0x7d1e49;_0x1e1430[_0x416bd3(0x191)](path['join'](__dirname,bbpath2,_0x416bd3(0x2a0),_0x416bd3(0x28f)));}),app[_0x7d1e49(0x159)](_0x7d1e49(0x15c),(_0x1bc8f7,_0x487164)=>{const _0x387ff8=_0x7d1e49;_0x487164[_0x387ff8(0x191)](path[_0x387ff8(0x20d)](__dirname,bbpath2,_0x387ff8(0x2a0),_0x387ff8(0x28f)));}),app['get']('/:bot/coins',(_0x264ce1,_0xfe0818)=>{const _0x4e56dd=_0x7d1e49;_0xfe0818[_0x4e56dd(0x191)](path[_0x4e56dd(0x20d)](__dirname,bbpath2,_0x4e56dd(0x2a0),_0x4e56dd(0x28f)));}),app[_0x7d1e49(0x159)](_0x7d1e49(0x285),(_0x599544,_0x3cba63)=>{_0x3cba63['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x7d1e49(0x159)](_0x7d1e49(0x2e3),(_0x4c6f1a,_0x2b65d6)=>{const _0x24c4f3=_0x7d1e49;_0x2b65d6[_0x24c4f3(0x191)](path['join'](__dirname,bbpath2,_0x24c4f3(0x2a0),_0x24c4f3(0x28f)));}),app[_0x7d1e49(0x159)]('/:bot/support',(_0xca9eaa,_0x5643dd)=>{const _0x4b09b3=_0x7d1e49;_0x5643dd[_0x4b09b3(0x191)](path['join'](__dirname,bbpath2,_0x4b09b3(0x2a0),_0x4b09b3(0x28f)));});if(HOST)http[_0x7d1e49(0x255)](PORT,HOST);else http['listen'](PORT);const io=require(_0x7d1e49(0x199))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x57c545=_0x7d1e49;let _0x301ac1=_0x57c545(0x12f);const _0x10db38=networkInterfaces(),_0x70112d={};for(const _0x4b6cb0 of Object[_0x57c545(0x290)](_0x10db38)){for(const _0x22803b of _0x10db38[_0x4b6cb0]){if((_0x22803b[_0x57c545(0x173)]==_0x57c545(0x12a)||_0x22803b[_0x57c545(0x173)]==0x4)&&!_0x22803b[_0x57c545(0x320)]){const _0x5b98c2=ipaddr[_0x57c545(0x291)](_0x22803b[_0x57c545(0x1cb)])[_0x57c545(0x319)]();_0x5b98c2!=_0x57c545(0x2b1)&&(!_0x70112d[_0x4b6cb0]&&(_0x70112d[_0x4b6cb0]=[]),_0x70112d[_0x4b6cb0]['push'](_0x22803b[_0x57c545(0x1cb)]),_0x301ac1=_0x22803b[_0x57c545(0x1cb)]);}}}return{'serverip':_0x301ac1,'netinterfaces':_0x70112d};}async function startServer(){const _0x79d858=_0x7d1e49,{serverip:_0x32b00d,netinterfaces:_0x36c540}=getServerIP();logger[_0x79d858(0x15d)](''),logger['simple'](_0x79d858(0x17c)),await logger[_0x79d858(0x318)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x79d858(0x2dc)+(environment==_0x79d858(0x242)?_0x79d858(0x13d):'')+'\x0a'+(_0x79d858(0x18c)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x79d858(0x2c4)+_0x32b00d+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger['simple'](_0x79d858(0x17c));if(config['length']!=0x0)for(const _0x4e160f of config){const _0x38d5a=_0x4e160f['mode']==_0x79d858(0x252)?'a':'m';if(_0x4e160f[_0x79d858(0x174)]=='enabled'||_0x4e160f[_0x79d858(0x174)]==_0x79d858(0x1c7))await logger[_0x79d858(0x318)](_0x79d858(0x1ee)+_0x38d5a+_0x79d858(0x17e)+_0x4e160f[_0x79d858(0x11a)]+_0x79d858(0x26d)+_0x4e160f[_0x79d858(0x2d6)]),startBot([_0x4e160f[_0x79d858(0x11a)],userID],{'cwd':bbpath},function(_0x3240d9){const _0x19ae79=_0x79d858;if(_0x3240d9)logger[_0x19ae79(0x318)](_0x3240d9);});else(_0x4e160f[_0x79d858(0x174)]==_0x79d858(0x118)||_0x4e160f[_0x79d858(0x174)]==_0x79d858(0x130))&&await logger[_0x79d858(0x318)](_0x79d858(0x312)+_0x38d5a+_0x79d858(0x1ff)+_0x4e160f[_0x79d858(0x11a)]+'\x20|\x20'+_0x4e160f['botname']);}else!newBot&&logger[_0x79d858(0x15d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x79d858(0x17c)),logger[_0x79d858(0x15d)](''),await logger[_0x79d858(0x25e)](_0x79d858(0x2d3)+nodeversion),await logger[_0x79d858(0x25e)]('Network\x20Interfaces:',_0x36c540);}function startSocket(){const _0x1c2c6b=_0x7d1e49;io['on'](_0x1c2c6b(0x18b),_0x4f0ae9=>{const _0x359c89=_0x1c2c6b;let _0x25a81f,_0x49eaf3,_0x2413c0,_0x349bd4,_0x5aead9;const _0x382f15=_0x4f0ae9[_0x359c89(0x190)][_0x359c89(0x253)][_0x359c89(0x132)];_0x49eaf3=_0x382f15[_0x359c89(0x19d)](/bot[0-9]{3}/);if(_0x49eaf3)_0x2413c0=_0x49eaf3[0x0][_0x359c89(0x19d)](/[0-9]{3}/);if(_0x2413c0)_0x25a81f=_0x2413c0[0x0];else _0x25a81f=_0x359c89(0x276);const _0x56a2af=_0x4f0ae9[_0x359c89(0x190)][_0x359c89(0x134)][_0x359c89(0x241)];if(!_0x56a2af)_0x4f0ae9[_0x359c89(0x211)]('status',{'publicKey':secure['publicKey']});else{_0x349bd4=timelyDecrypt(_0x56a2af,![]);if(!_0x349bd4)_0x4f0ae9[_0x359c89(0x211)](_0x359c89(0x174),{'publicKey':secure[_0x359c89(0x310)]});else{_0x5aead9=normalizeIP(_0x4f0ae9['conn'][_0x359c89(0x23b)])[_0x359c89(0x28b)];if(!devices[_0x349bd4])devices[_0x349bd4]={'uuid':_0x349bd4,'access':{'token':null}};devices[_0x349bd4]['ip']=_0x5aead9;const _0x55d83f=addClient(_0x4f0ae9['id'],_0x349bd4,_0x25a81f);setAccess(_0x55d83f),emitMessages(),_0x4f0ae9['on'](_0x359c89(0x148),_0x215f30=>{const _0x307b7d=_0x359c89,_0x53fa66=timelyDecrypt(_0x215f30[_0x307b7d(0x275)],!![],_0x307b7d(0x278));if(_0x53fa66){_0x215f30={'username':_0x215f30[_0x307b7d(0x2fe)],'password':_0x53fa66},devices[_0x349bd4][_0x307b7d(0x206)]=validateCredentials(_0x215f30,_0x349bd4);if(devices[_0x349bd4]['access']['allow']==![]&&devices[_0x349bd4][_0x307b7d(0x206)][_0x307b7d(0x194)]=='2FA\x20login\x20required')_0x4f0ae9[_0x307b7d(0x211)](_0x307b7d(0x174),{'access':devices[_0x349bd4][_0x307b7d(0x206)]}),loginAccess2FA(_0x349bd4,_0x5aead9);else{if(devices[_0x349bd4][_0x307b7d(0x206)][_0x307b7d(0x1f5)]==![]&&devices[_0x349bd4][_0x307b7d(0x206)][_0x307b7d(0x194)]==_0x307b7d(0x22d))_0x4f0ae9[_0x307b7d(0x211)](_0x307b7d(0x174),{'access':devices[_0x349bd4][_0x307b7d(0x206)]});else devices[_0x349bd4][_0x307b7d(0x206)]['allow']&&devices[_0x349bd4][_0x307b7d(0x206)][_0x307b7d(0x194)]==_0x307b7d(0x219)&&(getClientsWithUuid(_0x349bd4)['forEach'](_0x241834=>{setAccess(_0x241834);}),logger[_0x307b7d(0x25e)](_0x307b7d(0x233)+_0x349bd4['slice'](-0x8)),setTokenRefresh(_0x349bd4),setSessionTimeout(_0x307b7d(0x148),_0x349bd4));}}else logger[_0x307b7d(0x318)](_0x307b7d(0x19e));}),_0x4f0ae9['on'](_0x359c89(0x22a),()=>{resetPassword();}),_0x4f0ae9['on'](_0x359c89(0x15b),_0x331a40=>{removeClient(_0x4f0ae9['id']);}),_0x25a81f==_0x359c89(0x276)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x4bae84){const _0x632c17=_0x7d1e49;if(_0x4bae84!=_0x632c17(0x276)&&config[_0x632c17(0x28e)]!=''){if(pid[_0x4bae84])pid[_0x4bae84][_0x632c17(0x20f)]({'function':_0x632c17(0x1b0),'args':null});}_0x4bae84!=_0x632c17(0x276)&&broadcastToBots(_0x632c17(0x237),JSON['stringify'](config));}function reloadBotManager(){const _0x2c41bc=_0x7d1e49;getClientsWithBotID(_0x2c41bc(0x276))['forEach'](_0x4cd1be=>{const _0x5343a0=_0x2c41bc;getSocket(_0x4cd1be['id'])[_0x5343a0(0x211)]('status',{'access':{'allow':![],'reason':_0x5343a0(0x1ca),'token':null}});});}function getSocket(_0x479b34){const _0x5cc05c=_0x7d1e49;return io[_0x5cc05c(0x29e)]['sockets'][_0x5cc05c(0x159)](_0x479b34);}function setAccess(_0x419e85){const _0x11bb8d=_0x7d1e49,_0x3495a8=getSocket(_0x419e85['id']),_0x58e810=_0x419e85[_0x11bb8d(0x258)],_0x53a4c2=_0x419e85[_0x11bb8d(0x25f)];devices[_0x58e810]['access']=validateAccess(devices[_0x58e810][_0x11bb8d(0x206)]['token'],_0x58e810),logger[_0x11bb8d(0x25e)]('Setting\x20access:\x20'+devices[_0x58e810][_0x11bb8d(0x206)][_0x11bb8d(0x194)]+_0x11bb8d(0x116)+_0x419e85['id'][_0x11bb8d(0x2d7)](-0x8)+_0x11bb8d(0x135)+_0x58e810[_0x11bb8d(0x2d7)](-0x8)),_0x3495a8['join'](_0x58e810);if(devices[_0x58e810][_0x11bb8d(0x206)]['allow']){_0x3495a8['join'](_0x53a4c2);if(_0x53a4c2=='botmanager')initializeSocketBotManager(_0x3495a8);else initializeSocketBot(_0x3495a8);initClient(_0x53a4c2);}devices[_0x58e810][_0x11bb8d(0x206)][_0x11bb8d(0x2ab)]&&devices[_0x58e810]['access'][_0x11bb8d(0x194)]==_0x11bb8d(0x10c)&&setSessionTimeout(_0x11bb8d(0x251),_0x58e810),devices[_0x58e810][_0x11bb8d(0x206)]['token']&&devices[_0x58e810][_0x11bb8d(0x206)][_0x11bb8d(0x194)]==_0x11bb8d(0x1a5)&&setSessionTimeout(_0x11bb8d(0x148),_0x58e810),_0x3495a8[_0x11bb8d(0x211)]('status',{'status':_0x419e85[_0x11bb8d(0x1ec)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x58e810][_0x11bb8d(0x206)],'externalip':devices[_0x58e810]['ip'],'publicKey':secure[_0x11bb8d(0x310)],'userid':settings[_0x11bb8d(0x2c7)],'validInstallation':validInstallation}),devices[_0x58e810]['access'][_0x11bb8d(0x1f5)]==![]&&devices[_0x58e810]['access'][_0x11bb8d(0x194)]=='2FA\x20required'&&temporaryAccess2FA(_0x58e810,devices[_0x58e810]['ip']);}function setSessionTimeout(_0x2a399f,_0x3c9e8d){const _0x1d8270=_0x7d1e49;let _0x462049;if(_0x2a399f==_0x1d8270(0x148))_0x462049=loginExpiry*0x3c*0x3e8;else _0x462049=devices[_0x3c9e8d][_0x1d8270(0x1e5)][_0x1d8270(0x31b)]*0x3c*0x3e8-(new Date()[_0x1d8270(0x1ac)]()-devices[_0x3c9e8d][_0x1d8270(0x1e5)][_0x1d8270(0x2e9)]);if(devices[_0x3c9e8d][_0x1d8270(0x157)])clearTimeout(devices[_0x3c9e8d][_0x1d8270(0x157)]);devices[_0x3c9e8d][_0x1d8270(0x157)]=setTimeout(()=>{const _0x307e3c=_0x1d8270;if(devices[_0x3c9e8d][_0x307e3c(0x119)])clearTimeout(devices[_0x3c9e8d][_0x307e3c(0x119)]);removeSocketListeners(_0x3c9e8d),addBlacklist(_0x3c9e8d),devices[_0x3c9e8d][_0x307e3c(0x1e5)]=null,devices[_0x3c9e8d][_0x307e3c(0x167)]=null,devices[_0x3c9e8d][_0x307e3c(0x206)]['token']=null,logger[_0x307e3c(0x25e)]('Session\x20expired\x20for\x20user\x20...'+_0x3c9e8d[_0x307e3c(0x2d7)](-0x8)),devices[_0x3c9e8d][_0x307e3c(0x206)]=validateAccess(devices[_0x3c9e8d]['access'][_0x307e3c(0x2ab)],_0x3c9e8d),!(devices[_0x3c9e8d]['access'][_0x307e3c(0x1f5)]&&devices[_0x3c9e8d][_0x307e3c(0x206)][_0x307e3c(0x194)]==_0x307e3c(0x1ab))&&(_0x2a399f==_0x307e3c(0x148)?io['to'](_0x3c9e8d)[_0x307e3c(0x211)](_0x307e3c(0x174),{'access':{'allow':![],'reason':_0x307e3c(0x1ce),'token':null}}):io['to'](_0x3c9e8d)[_0x307e3c(0x211)](_0x307e3c(0x174),{'access':{'allow':![],'reason':_0x307e3c(0x147),'token':null}})),devices[_0x3c9e8d]['access'][_0x307e3c(0x2ab)]=null;},_0x462049);}function setTokenRefresh(_0x4c82b5){const _0x4954d4=_0x7d1e49;if(devices[_0x4c82b5][_0x4954d4(0x119)])clearTimeout(devices[_0x4c82b5][_0x4954d4(0x119)]);devices[_0x4c82b5][_0x4954d4(0x119)]=setTimeout(()=>{const _0xb7255=_0x4954d4;getClientsWithUuid(_0x4c82b5)[_0xb7255(0x1df)]!=0x0?(devices[_0x4c82b5][_0xb7255(0x206)]=refreshToken(_0x4c82b5),io['to'](_0x4c82b5)['emit']('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4c82b5]['access'],'externalip':devices[_0x4c82b5]['ip'],'publicKey':secure[_0xb7255(0x310)],'validInstallation':validInstallation}),setTokenRefresh(_0x4c82b5)):clearTimeout(devices[_0x4c82b5]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x404318){const _0x65fbac=_0x7d1e49,_0x5765a8=getClient(_0x404318['id'])['uuid'];_0x404318[_0x65fbac(0x211)](_0x65fbac(0x237),config),_0x404318[_0x65fbac(0x211)](_0x65fbac(0x281),cleanSettings()),_0x404318['on'](_0x65fbac(0x1cc),_0x54d67e=>{const _0x1e716b=_0x65fbac;if(validateAccess(_0x54d67e,_0x5765a8)[_0x1e716b(0x1f5)])addBot();else logger['full'](_0x1e716b(0x231));}),_0x404318['on'](_0x65fbac(0x29a),(_0x244569,_0x2cb09a)=>{const _0x5049eb=_0x65fbac;if(validateAccess(_0x2cb09a,_0x5765a8)['allow'])toggleBot(_0x244569[_0x5049eb(0x11a)],_0x244569[_0x5049eb(0x174)],_0x244569[_0x5049eb(0x1b5)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x404318['on'](_0x65fbac(0x11d),(_0x4a4320,_0x2d2881)=>{const _0x440f2f=_0x65fbac;if(validateAccess(_0x2d2881,_0x5765a8)[_0x440f2f(0x1f5)])toggleBotMode(_0x4a4320);else logger['full'](_0x440f2f(0x123));}),_0x404318['on'](_0x65fbac(0x156),(_0x5bc050,_0x2cc445)=>{const _0x30b6cc=_0x65fbac;if(validateAccess(_0x2cc445,_0x5765a8)[_0x30b6cc(0x1f5)])deleteBot(_0x5bc050);else logger['full'](_0x30b6cc(0x214));}),_0x404318['on'](_0x65fbac(0x10a),(_0x4f8160,_0x193b1c)=>{const _0x40a65d=_0x65fbac;if(validateAccess(_0x193b1c,_0x5765a8)[_0x40a65d(0x1f5)])storeSettings(_0x4f8160,!![]);else logger[_0x40a65d(0x318)](_0x40a65d(0x189));}),_0x404318['on'](_0x65fbac(0x1be),_0x49fac5=>{const _0x206925=_0x65fbac;if(validateAccess(_0x49fac5,_0x5765a8)[_0x206925(0x1f5)])updateBB(_0x206925(0x185));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x404318['on'](_0x65fbac(0x30a),_0x4d9442=>{const _0x205667=_0x65fbac;if(validateAccess(_0x4d9442,_0x5765a8)[_0x205667(0x1f5)])updateBB(_0x205667(0x2c0));else logger[_0x205667(0x318)](_0x205667(0x28d));}),_0x404318['on'](_0x65fbac(0x2ca),_0x1b4e91=>{const _0x1d6ae4=_0x65fbac;if(validateAccess(_0x1b4e91,_0x5765a8)[_0x1d6ae4(0x1f5)]){const _0x38af34=getClient(_0x404318['id']);if(_0x38af34)getBackupFiles(_0x38af34['uuid']);else logger['full'](_0x1d6ae4(0x287));}else logger['full'](_0x1d6ae4(0x230));}),_0x404318['on'](_0x65fbac(0x187),(_0x5692ba,_0x57bd97)=>{const _0x51a23e=_0x65fbac;if(validateAccess(_0x57bd97,_0x5765a8)[_0x51a23e(0x1f5)])restoreBackupFile(_0x5692ba);else logger[_0x51a23e(0x318)](_0x51a23e(0x2a2));}),_0x404318['on'](_0x65fbac(0x128),_0x588996=>{const _0xa0a95c=_0x65fbac;if(validateAccess(_0x588996,_0x5765a8)['allow'])getMessages();else logger[_0xa0a95c(0x318)](_0xa0a95c(0x292));}),_0x404318['on'](_0x65fbac(0x311),(_0x3c8d6a,_0x5ec497)=>{const _0x148d96=_0x65fbac;if(validateAccess(_0x5ec497,_0x5765a8)['allow'])confirmMessage(_0x3c8d6a);else logger['full'](_0x148d96(0x177));}),_0x404318['on'](_0x65fbac(0x1e6),_0x48550d=>{const _0x29b606=_0x65fbac;if(validateAccess(_0x48550d,_0x5765a8)[_0x29b606(0x1f5)]){if(devices[_0x5765a8][_0x29b606(0x119)])clearTimeout(devices[_0x5765a8][_0x29b606(0x119)]);if(devices[_0x5765a8][_0x29b606(0x157)])clearTimeout(devices[_0x5765a8][_0x29b606(0x157)]);removeSocketListeners(getClient(_0x404318['id'])[_0x29b606(0x258)]),addBlacklist(_0x5765a8),devices[_0x5765a8][_0x29b606(0x1e5)]=null,devices[_0x5765a8][_0x29b606(0x167)]=null,devices[_0x5765a8][_0x29b606(0x206)][_0x29b606(0x2ab)]=null,logger['debug'](_0x29b606(0x2f0)+_0x5765a8[_0x29b606(0x2d7)](-0x8)),io['to'](getClient(_0x404318['id'])[_0x29b606(0x258)])[_0x29b606(0x211)](_0x29b606(0x174),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x281339){const _0x58b52c=_0x7d1e49,_0x1642b3=getClient(_0x281339['id'])[_0x58b52c(0x25f)],_0x3694b9=getClient(_0x281339['id'])[_0x58b52c(0x258)];_0x281339['on'](_0x58b52c(0x1e0),(_0x1f4e16,_0x54a422)=>{const _0x5de7e6=_0x58b52c;if(validateAccess(_0x54a422,_0x3694b9)[_0x5de7e6(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x5de7e6(0x20f)]({'function':_0x5de7e6(0x224),'args':_0x1f4e16});}else logger[_0x5de7e6(0x318)](_0x5de7e6(0x14e));}),_0x281339['on'](_0x58b52c(0x1d2),(_0x106369,_0x138abd)=>{const _0x5d8387=_0x58b52c;if(validateAccess(_0x138abd,_0x3694b9)['allow']){if(pid[_0x1642b3])pid[_0x1642b3][_0x5d8387(0x20f)]({'function':'deleteHistoryAlerts','args':_0x106369});}else logger[_0x5d8387(0x318)](_0x5d8387(0x1d1));}),_0x281339['on'](_0x58b52c(0x30b),(_0x541b38,_0x2cd285)=>{const _0x289756=_0x58b52c;if(validateAccess(_0x2cd285,_0x3694b9)[_0x289756(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x289756(0x20f)]({'function':_0x289756(0x1b1),'args':_0x541b38});}else logger[_0x289756(0x318)](_0x289756(0x293));}),_0x281339['on']('store-configuration',(_0x381fb6,_0x38cd63)=>{const _0x24a241=_0x58b52c;if(validateAccess(_0x38cd63,_0x3694b9)[_0x24a241(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x24a241(0x20f)]({'function':_0x24a241(0x204),'args':_0x381fb6});}else logger[_0x24a241(0x318)](_0x24a241(0x246));}),_0x281339['on'](_0x58b52c(0x2d8),(_0x3b8ec8,_0x680912)=>{const _0x59b8e8=_0x58b52c;if(validateAccess(_0x680912,_0x3694b9)[_0x59b8e8(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x59b8e8(0x20f)]({'function':'storeHeadless','args':_0x3b8ec8});}else logger[_0x59b8e8(0x318)](_0x59b8e8(0x244));}),_0x281339['on'](_0x58b52c(0x263),(_0x86362d,_0x268992)=>{const _0x491ea6=_0x58b52c;if(validateAccess(_0x268992,_0x3694b9)[_0x491ea6(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x491ea6(0x20f)]({'function':'storeFiat','args':_0x86362d});}else logger[_0x491ea6(0x318)](_0x491ea6(0x24c));}),_0x281339['on'](_0x58b52c(0x315),_0x42eda8=>{const _0x15fc52=_0x58b52c;if(validateAccess(_0x42eda8,_0x3694b9)['allow']){if(pid[_0x1642b3])pid[_0x1642b3][_0x15fc52(0x20f)]({'function':_0x15fc52(0x1e2),'args':null});}else logger[_0x15fc52(0x318)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x281339['on'](_0x58b52c(0x24d),_0x102eaa=>{const _0x440e57=_0x58b52c;if(validateAccess(_0x102eaa,_0x3694b9)[_0x440e57(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x440e57(0x20f)]({'function':_0x440e57(0x2eb),'args':null});}else logger['full'](_0x440e57(0x11c));}),_0x281339['on'](_0x58b52c(0x182),(_0x48790d,_0x424585)=>{const _0x286a19=_0x58b52c;if(validateAccess(_0x424585,_0x3694b9)[_0x286a19(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x286a19(0x20f)]({'function':'placeOrder','args':_0x48790d});}else logger[_0x286a19(0x318)](_0x286a19(0x262));}),_0x281339['on'](_0x58b52c(0x209),_0xc900d8=>{const _0x28655f=_0x58b52c;if(validateAccess(_0xc900d8,_0x3694b9)[_0x28655f(0x1f5)]){if(pid[_0x1642b3])pid[_0x1642b3][_0x28655f(0x20f)]({'function':_0x28655f(0x2fd),'args':null});}else logger[_0x28655f(0x318)](_0x28655f(0x27f));}),_0x281339['on'](_0x58b52c(0x1d7),_0x1315ea=>{const _0x30b513=_0x58b52c;if(validateAccess(_0x1315ea,_0x3694b9)['allow']){if(pid[_0x1642b3])pid[_0x1642b3][_0x30b513(0x20f)]({'function':_0x30b513(0x129),'args':null});}else logger[_0x30b513(0x318)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x281339['on'](_0x58b52c(0x1be),_0x3d28fb=>{const _0x3ceb82=_0x58b52c;if(validateAccess(_0x3d28fb,_0x3694b9)[_0x3ceb82(0x1f5)])updateBB(_0x3ceb82(0x185));else logger['full'](_0x3ceb82(0x222));}),_0x281339['on']('get-messages',_0x3794f9=>{const _0x315ac2=_0x58b52c;if(validateAccess(_0x3794f9,_0x3694b9)['allow'])getMessages();else logger[_0x315ac2(0x318)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x281339['on'](_0x58b52c(0x311),(_0xf57a0b,_0x4c06e5)=>{const _0x62b27b=_0x58b52c;if(validateAccess(_0x4c06e5,_0x3694b9)['allow'])confirmMessage(_0xf57a0b);else logger[_0x62b27b(0x318)](_0x62b27b(0x177));}),_0x281339['on'](_0x58b52c(0x1e6),_0xaeb663=>{const _0x1d4393=_0x58b52c;if(validateAccess(_0xaeb663,_0x3694b9)[_0x1d4393(0x1f5)]){if(devices[_0x3694b9]['pidRefreshToken'])clearTimeout(devices[_0x3694b9]['pidRefreshToken']);if(devices[_0x3694b9][_0x1d4393(0x157)])clearTimeout(devices[_0x3694b9]['pidExpireLogin']);removeSocketListeners(getClient(_0x281339['id'])['uuid']),addBlacklist(_0x3694b9),devices[_0x3694b9][_0x1d4393(0x1e5)]=null,devices[_0x3694b9][_0x1d4393(0x167)]=null,devices[_0x3694b9][_0x1d4393(0x206)]['token']=null,logger[_0x1d4393(0x25e)](_0x1d4393(0x2f0)+_0x3694b9['slice'](-0x8)),io['to'](getClient(_0x281339['id'])[_0x1d4393(0x258)])[_0x1d4393(0x211)](_0x1d4393(0x174),{'access':{'allow':![],'reason':_0x1d4393(0x1b8),'token':null}});}else logger['full'](_0x1d4393(0x21c));});}function removeSocketListeners(_0x3da6c2){const _0x806231=_0x7d1e49;getClientsWithUuid(_0x3da6c2)[_0x806231(0x1f4)](_0x367701=>{const _0x81c5ca=_0x806231;getSocket(_0x367701['id'])[_0x81c5ca(0x1a4)]();});}function cleanSettings(){const _0xdaf5bb=_0x7d1e49;let _0x12a56f=settings;return settings[_0xdaf5bb(0x133)]&&settings[_0xdaf5bb(0x133)]!=''&&(_0x12a56f={..._0x12a56f,'telegramToken':'************'}),settings[_0xdaf5bb(0x1c2)]&&settings['bbPassword']!=''&&(_0x12a56f={..._0x12a56f,'bbPassword':_0xdaf5bb(0x268)}),settings[_0xdaf5bb(0x272)]&&settings[_0xdaf5bb(0x272)]!=''&&(_0x12a56f={..._0x12a56f,'marketcapApi':'************'}),(settings[_0xdaf5bb(0x1c2)]&&settings[_0xdaf5bb(0x1c2)]==_0xdaf5bb(0x1d0)||settings['telegramToken']&&settings[_0xdaf5bb(0x133)]==_0xdaf5bb(0x1d0)||settings[_0xdaf5bb(0x272)]&&settings[_0xdaf5bb(0x272)]=='***')&&(_0x12a56f={..._0x12a56f,'restored':{'password':settings[_0xdaf5bb(0x1c2)]=='***','telegram':settings[_0xdaf5bb(0x133)]==_0xdaf5bb(0x1d0),'marketcap':settings[_0xdaf5bb(0x272)]==_0xdaf5bb(0x1d0)}}),_0x12a56f;}async function updateBB(_0x2b6aaa){const _0xf2454d=_0x7d1e49;await backupConfigFiles(),installingUpdate=!![],config[_0xf2454d(0x1f4)](_0x50a826=>{const _0x29bb26=_0xf2454d;restartBot(_0x50a826[_0x29bb26(0x11a)]);});if(_0x2b6aaa==_0xf2454d(0x185))process[_0xf2454d(0x20f)]({'update':!![],'environment':environment},_0x26a44f=>{});else _0x2b6aaa=='reinstall'&&process[_0xf2454d(0x20f)]({'reinstall':!![],'environment':environment},_0x31455e=>{});}function startBot(_0x5eb658,_0x3c4f1f,_0x1c2323){const _0x4e802b=_0x7d1e49;if(debugging)_0x5eb658[_0x4e802b(0x2bf)]('-d');let _0x308c21=![];const _0x394a6f=_0x5eb658[0x0];_0x3c4f1f={..._0x3c4f1f,'stdio':[_0x4e802b(0x1c3),_0x4e802b(0x1c3),_0x4e802b(0x1c3),_0x4e802b(0x23e)]},pid[_0x394a6f]=childProcess['fork'](botfile,_0x5eb658,_0x3c4f1f),pid[_0x394a6f]['on'](_0x4e802b(0x271),_0x3ce861=>{const _0x3c48f1=_0x4e802b;switch(Object[_0x3c48f1(0x290)](_0x3ce861)[0x0]){case _0x3c48f1(0x2d6):updateBotName(_0x394a6f,_0x3ce861[_0x3c48f1(0x2d6)]);break;case _0x3c48f1(0x1a3):updateBotManager();break;case _0x3c48f1(0x174):updateStatus(_0x394a6f,_0x3ce861['status']);break;case _0x3c48f1(0x1b5):updateLive(_0x394a6f,_0x3ce861[_0x3c48f1(0x1b5)]);break;case _0x3c48f1(0x18e):updateLive(_0x394a6f,_0x3ce861[_0x3c48f1(0x18e)]),io['to'](_0x394a6f)[_0x3c48f1(0x211)]('status',{'access':{'allow':![],'reason':_0x3c48f1(0x1ca),'token':null}});break;case _0x3c48f1(0x16c):_0x3ce861['stop']==_0x3c48f1(0x22b)&&restartBot(_0x394a6f);_0x3ce861['stop']==_0x3c48f1(0x127)&&toggleBot(_0x394a6f,'disabled',_0x3c48f1(0x1ef));break;case'telegram':sendTelegramBot(_0x394a6f,_0x3ce861[_0x3c48f1(0x152)]);break;case'telegrammsg':sendTelegramMsg(_0x3ce861[_0x3c48f1(0x16f)]);break;case _0x3c48f1(0x282):io['to'](_0x394a6f)[_0x3c48f1(0x211)](_0x3ce861[_0x3c48f1(0x282)],_0x3ce861[_0x3c48f1(0x265)]);break;}}),pid[_0x394a6f]['on'](_0x4e802b(0x316),function(_0x40b043){if(_0x308c21)return;_0x308c21=!![],_0x1c2323(_0x40b043);}),pid[_0x394a6f]['on'](_0x4e802b(0x1b9),async function(_0x5ac26a){const _0x4ccff2=_0x4e802b;if(terminating)return;if(installingUpdate){logger[_0x4ccff2(0x25e)](_0x4ccff2(0x12b)),io[_0x4ccff2(0x289)]();return;}if(_0x308c21)return;_0x308c21=!![],_0x1c2323(null);const _0x473a00=dbConfig['get'](_0x4ccff2(0x237))['find']({'botID':_0x394a6f})[_0x4ccff2(0x1f7)]();_0x473a00&&(_0x473a00[_0x4ccff2(0x174)]=='enabled'||_0x473a00[_0x4ccff2(0x174)]==_0x4ccff2(0x1c7))&&(await sleep(0x3e8),updateLive(_0x394a6f,_0x4ccff2(0x1ef)),logger['full'](_0x4ccff2(0x17b)+_0x394a6f),startBot([_0x394a6f,userID],{'cwd':bbpath},function(_0x5bcb13){const _0x3ecbd8=_0x4ccff2;if(_0x5bcb13)logger[_0x3ecbd8(0x318)](_0x5bcb13);}));});}function stopBot(_0x302359){const _0x2b5ffd=_0x7d1e49;getClientsWithBotID(_0x302359)[_0x2b5ffd(0x1f4)](_0x530475=>{const _0x149f20=_0x2b5ffd;getSocket(_0x530475['id'])[_0x149f20(0x15b)](!![]),removeClient(_0x530475['id']);}),pid[_0x302359]&&(pid[_0x302359][_0x2b5ffd(0x127)](),pid[_0x302359]=null);}function stopAllBots(){const _0x5a4e89=_0x7d1e49;terminating=!![];const _0x1d4e10=getEnabledBots();_0x1d4e10[_0x5a4e89(0x1f4)](_0x6b753f=>{const _0x30d89e=_0x5a4e89;stopBot(_0x6b753f[_0x30d89e(0x11a)]);});}function restartBot(_0x3f9913){if(pid[_0x3f9913])pid[_0x3f9913]['kill']();}function addBot(){const _0x6e707=_0x7d1e49;let _0x2d1b67;for(let _0x5e2c71=0x1;_0x5e2c71<0x3e9;_0x5e2c71++){_0x2d1b67=_0x5e2c71[_0x6e707(0x1d9)]()[_0x6e707(0x296)](0x3,'0');let _0x1c2428=config[_0x6e707(0x2fb)](_0x2212d7=>_0x2212d7[_0x6e707(0x11a)]==_0x2d1b67);if(!_0x1c2428)break;}if(_0x2d1b67===_0x6e707(0x200)){logger[_0x6e707(0x318)](_0x6e707(0x288));return;}logger[_0x6e707(0x318)](_0x6e707(0x245)+_0x2d1b67),dbConfig[_0x6e707(0x159)](_0x6e707(0x237))[_0x6e707(0x2bf)]({'botID':_0x2d1b67,'botname':'Bot\x20'+_0x2d1b67,'status':_0x6e707(0x1c7),'live':''})[_0x6e707(0x181)](),startBot([_0x2d1b67,userID],{'cwd':bbpath},function(_0x186c08){const _0x1a9a31=_0x6e707;if(_0x186c08)logger[_0x1a9a31(0x318)](_0x186c08);}),config=getConfiguration(),io['to'](_0x6e707(0x276))[_0x6e707(0x211)](_0x6e707(0x237),config),broadcastToBots(_0x6e707(0x237),JSON[_0x6e707(0x18f)](config));}function deleteBot(_0x426025){const _0x4919df=_0x7d1e49;getClientsWithBotID(_0x426025)[_0x4919df(0x1f4)](_0x5cfc1=>{const _0x35331b=_0x4919df;getSocket(_0x5cfc1['id'])[_0x35331b(0x15b)](!![]),removeClient(_0x5cfc1['id']);}),dbConfig[_0x4919df(0x159)]('bots')[_0x4919df(0x2ef)]({'botID':_0x426025})[_0x4919df(0x181)](),logger[_0x4919df(0x318)](_0x4919df(0x266)+_0x426025),stopBot(_0x426025);try{if(fs[_0x4919df(0x301)](path[_0x4919df(0x20d)](configpath,_0x4919df(0x170)+_0x426025+_0x4919df(0x1eb))))fs['unlinkSync'](path[_0x4919df(0x20d)](configpath,_0x4919df(0x170)+_0x426025+_0x4919df(0x1eb)));if(fs[_0x4919df(0x301)](path[_0x4919df(0x20d)](configpath,_0x4919df(0x170)+_0x426025+_0x4919df(0x18d))))fs[_0x4919df(0x1dd)](path['join'](configpath,'bot-'+_0x426025+_0x4919df(0x18d)));if(fs['existsSync'](path[_0x4919df(0x20d)](configpath,_0x4919df(0x170)+_0x426025+'-performance.json')))fs[_0x4919df(0x1dd)](path[_0x4919df(0x20d)](configpath,'bot-'+_0x426025+_0x4919df(0x20c)));if(fs[_0x4919df(0x301)](path['join'](configpath,_0x4919df(0x170)+_0x426025+_0x4919df(0x171))))fs['unlinkSync'](path[_0x4919df(0x20d)](configpath,'bot-'+_0x426025+_0x4919df(0x171)));}catch(_0xc0521){if(_0xc0521)logger[_0x4919df(0x318)](_0x4919df(0x163),_0xc0521);}config=getConfiguration(),io['to'](_0x4919df(0x276))[_0x4919df(0x211)](_0x4919df(0x237),config),broadcastToBots(_0x4919df(0x237),JSON[_0x4919df(0x18f)](config));}function toggleBot(_0x5ab276,_0x289c17,_0x4fa8ed){const _0x572efb=_0x7d1e49;dbConfig['get'](_0x572efb(0x237))[_0x572efb(0x2fb)]({'botID':_0x5ab276})[_0x572efb(0x164)]({'status':_0x289c17})[_0x572efb(0x164)]({'live':_0x4fa8ed})['write']();if(_0x289c17==_0x572efb(0x19a)||_0x289c17==_0x572efb(0x1c7))logger['full']('Enabled\x20Bot\x20'+_0x5ab276),startBot([_0x5ab276,userID],{'cwd':bbpath},function(_0x49523f){if(_0x49523f)logger['full'](_0x49523f);});else(_0x289c17=='disabled'||_0x289c17=='new-disabled')&&(logger['full'](_0x572efb(0x21a)+_0x5ab276),stopBot(_0x5ab276));config=getConfiguration(),io['to']('botmanager')[_0x572efb(0x211)]('bots',config),broadcastToBots(_0x572efb(0x237),JSON[_0x572efb(0x18f)](config));}function toggleStatus(_0xcb2bc2){const _0x2aaa4a=_0x7d1e49;let _0x4185c8=dbConfig[_0x2aaa4a(0x159)](_0x2aaa4a(0x237))[_0x2aaa4a(0x2fb)]({'botID':_0xcb2bc2})[_0x2aaa4a(0x1f7)](),_0x2783cf;if(_0x4185c8[_0x2aaa4a(0x174)]===_0x2aaa4a(0x19a))_0x2783cf=_0x2aaa4a(0x118);else{if(_0x4185c8[_0x2aaa4a(0x174)]===_0x2aaa4a(0x1c7))_0x2783cf=_0x2aaa4a(0x130);else{if(_0x4185c8[_0x2aaa4a(0x174)]===_0x2aaa4a(0x130))_0x2783cf='new';else{if(_0x4185c8['status']===_0x2aaa4a(0x118))_0x2783cf=_0x2aaa4a(0x19a);}}}return _0x2783cf;}function updateStatus(_0x58603e,_0x80437a){const _0x7c63c6=_0x7d1e49;dbConfig[_0x7c63c6(0x159)](_0x7c63c6(0x237))[_0x7c63c6(0x2fb)]({'botID':_0x58603e})[_0x7c63c6(0x164)]({'status':_0x80437a})[_0x7c63c6(0x181)](),config=getConfiguration(),io['to']('botmanager')[_0x7c63c6(0x211)](_0x7c63c6(0x237),config),broadcastToBots(_0x7c63c6(0x237),JSON[_0x7c63c6(0x18f)](config));}function updateLive(_0x5e29cd,_0x19dee9){const _0x2182a8=_0x7d1e49;dbConfig['get']('bots')[_0x2182a8(0x2fb)]({'botID':_0x5e29cd})[_0x2182a8(0x164)]({'live':_0x19dee9})['write'](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x2182a8(0x237),JSON[_0x2182a8(0x18f)](config));}function updateBotName(_0x5f4ec5,_0xccf950){const _0x1456a3=_0x7d1e49;dbConfig[_0x1456a3(0x159)]('bots')[_0x1456a3(0x2fb)]({'botID':_0x5f4ec5})[_0x1456a3(0x164)]({'botname':_0xccf950})[_0x1456a3(0x181)](),config=getConfiguration(),io['to'](_0x1456a3(0x276))[_0x1456a3(0x211)]('bots',config),broadcastToBots('bots',JSON[_0x1456a3(0x18f)](config));}function updateBotManager(){const _0x3cdb22=_0x7d1e49;config=getConfiguration(),io['to']('botmanager')[_0x3cdb22(0x211)]('bots',config),broadcastToBots(_0x3cdb22(0x237),JSON[_0x3cdb22(0x18f)](config));}function toggleBotMode(_0x3acd19){const _0x49bf78=_0x7d1e49;if(pid[_0x3acd19])pid[_0x3acd19]['send']({'function':'toggleBotMode','args':null});else{const _0x458075=configpath+'bot-'+_0x3acd19+'-config.json',_0x50c7f9=fs[_0x49bf78(0x2db)](_0x458075),_0x3ce8df=JSON[_0x49bf78(0x291)](_0x50c7f9),_0x5b8f40=_0x3ce8df[_0x49bf78(0x25f)][0x0][_0x49bf78(0x1ad)];_0x3ce8df['bot'][0x0][_0x49bf78(0x1ad)]=!_0x5b8f40;const _0x2401b3=JSON['stringify'](_0x3ce8df,null,0x2);fs[_0x49bf78(0x1de)](_0x458075,_0x2401b3),config=getConfiguration(),io['to'](_0x49bf78(0x276))['emit'](_0x49bf78(0x237),config),broadcastToBots(_0x49bf78(0x237),JSON['stringify'](config));}}function validateTelegram(_0x8ed9a5){const _0x548bc8=_0x7d1e49;if(_0x8ed9a5['from']['username']!=settings[_0x548bc8(0x14c)]&&'@'+_0x8ed9a5[_0x548bc8(0x10e)][_0x548bc8(0x2fe)]!=settings['telegramUsername']||_0x8ed9a5['chat']['id']!=settings[_0x548bc8(0x23d)])return sendTelegram(_0x8ed9a5['chat']['id'],_0x548bc8(0x1d4),{'parse_mode':_0x548bc8(0x240)}),![];return!![];}async function initTelegram(){const _0x33d35a=_0x7d1e49;if(tgBot)tgBot[_0x33d35a(0x16c)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x33d35a(0x133)]);let _0x3f71be='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x3f71be+='\x0a',_0x3f71be+=_0x33d35a(0x1d6),_0x3f71be+=_0x33d35a(0x30c),_0x3f71be+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x3f71be+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3f71be+='/on\x20-\x20start\x20bot(s)\x0a',_0x3f71be+=_0x33d35a(0x23f),_0x3f71be+=_0x33d35a(0x2b8),_0x3f71be+=_0x33d35a(0x24e),_0x3f71be+=_0x33d35a(0x178),_0x3f71be+=_0x33d35a(0x175),_0x3f71be+=_0x33d35a(0x1a8),_0x3f71be+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3f71be+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x3f71be+=_0x33d35a(0x2d9);let _0x2226ed='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x2226ed+='\x0a',_0x2226ed+=_0x3f71be,tgBot[_0x33d35a(0x16e)]((_0x15e71a,_0x97cd03)=>{const _0x1099dd=_0x33d35a;logger['simple'](getTimeStamp()+_0x1099dd(0x11e)),logger['debug']('Telegraf\x20error:',_0x15e71a);}),tgBot[_0x33d35a(0x1c6)](async(_0x4adcfb,_0x1464ce)=>{const _0x1f33f4=_0x33d35a;if(!(!settings['telegramChatId']&&_0x4adcfb[_0x1f33f4(0x185)]['message'][_0x1f33f4(0x111)]==_0x1f33f4(0x1a0))){if(!validateTelegram(_0x4adcfb))return;}_0x1464ce();}),tgBot['command'](_0x33d35a(0x22e),async _0x323ac5=>{const _0x335a6f=_0x33d35a;if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x323ac5[_0x335a6f(0x21e)]['id']);updateSetting(_0x335a6f(0x2c3),!![]);if(!validateTelegram(_0x323ac5))return;await sendTelegram(_0x323ac5[_0x335a6f(0x21e)]['id'],_0x2226ed);}),tgBot['command'](_0x33d35a(0x1dc),async _0x4210a0=>{updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4210a0['chat']['id'],'Notifications\x20enabled');}),tgBot[_0x33d35a(0x259)]('disable',async _0x538b46=>{const _0x2eec37=_0x33d35a;await sendTelegram(_0x538b46[_0x2eec37(0x21e)]['id'],_0x2eec37(0x1d5)),updateSetting('telegramEnabled',![]);}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x243),async _0x86f9fa=>{const _0x488828=_0x33d35a,_0x23fc54=Markup[_0x488828(0x186)]([Markup[_0x488828(0x2ad)][_0x488828(0x2e5)]('Orders',_0x488828(0x15e)),Markup['button']['callback'](_0x488828(0x20b),_0x488828(0x321)),Markup['button'][_0x488828(0x2e5)](_0x488828(0x1e8),_0x488828(0x295))]);_0x86f9fa['reply']('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x23fc54);}),tgBot[_0x33d35a(0x15f)](_0x33d35a(0x15e),async _0x24d18e=>{const _0x5f5c69=_0x33d35a;_0x24d18e[_0x5f5c69(0x10d)](),updateSetting('telegramEvents',_0x5f5c69(0x317)),updateSetting(_0x5f5c69(0x2c3),!![]),await sendTelegram(_0x24d18e[_0x5f5c69(0x21e)]['id'],_0x5f5c69(0x1c5));}),tgBot[_0x33d35a(0x15f)](_0x33d35a(0x321),async _0x26b2fc=>{const _0x34212b=_0x33d35a;_0x26b2fc[_0x34212b(0x10d)](),updateSetting('telegramEvents',_0x34212b(0x153)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x26b2fc[_0x34212b(0x21e)]['id'],_0x34212b(0x1cf));}),tgBot[_0x33d35a(0x15f)]('config_all',async _0x2f8fd3=>{const _0x335b7c=_0x33d35a;_0x2f8fd3[_0x335b7c(0x10d)](),updateSetting(_0x335b7c(0x139),'all'),updateSetting(_0x335b7c(0x2c3),!![]),await sendTelegram(_0x2f8fd3[_0x335b7c(0x21e)]['id'],_0x335b7c(0x2be));}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x174),async _0x3ad2d8=>{const _0x52484e=_0x33d35a,_0x2cbea8=getBotsWithMode();let _0x1ac249=_0x52484e(0x313);config[_0x52484e(0x1f4)](_0x37e311=>{const _0x19d391=_0x52484e,_0xdcbc6b=_0x2cbea8[_0x19d391(0x2fb)](_0xb6a0a7=>_0xb6a0a7[_0x19d391(0x11a)]==_0x37e311[_0x19d391(0x11a)])[_0x19d391(0x154)];_0x1ac249+=_0x19d391(0x1fc)+_0x37e311['botID']+':\x20'+_0x37e311['status']+_0x19d391(0x26d)+_0xdcbc6b+_0x19d391(0x26d)+_0x37e311[_0x19d391(0x1b5)]+'\x0a';}),_0x1ac249+='\x0a',_0x1ac249+=_0x52484e(0x144),_0x1ac249+=!settings['telegramEnabled']?_0x52484e(0x168):'Notifications\x20enabled\x0a',_0x1ac249+=settings[_0x52484e(0x2c3)]?settings[_0x52484e(0x139)]==_0x52484e(0x234)?_0x52484e(0x27a):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x52484e(0x220):'',await sendTelegram(_0x3ad2d8[_0x52484e(0x21e)]['id'],_0x1ac249,{'parse_mode':_0x52484e(0x240)});}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x22b),async _0x3bc960=>{const _0x374ed6=_0x33d35a,_0x568daf=getEnabledBots();if(_0x568daf[_0x374ed6(0x1df)]==0x0)await sendTelegram(_0x3bc960[_0x374ed6(0x21e)]['id'],_0x374ed6(0x14d));else{if(_0x568daf[_0x374ed6(0x1df)]>0x1)_0x568daf['push']({'botID':_0x374ed6(0x234)});let _0x3297a9=[],_0x29a5ef=[];const _0x458a5c=_0x568daf[_0x374ed6(0x1df)]%0x4==0x0||_0x568daf[_0x374ed6(0x1df)]%0x4==0x3||_0x568daf[_0x374ed6(0x1df)]%0x3==0x1?0x4:0x3;let _0xca7f21=0x0;_0x568daf[_0x374ed6(0x1f4)]((_0x4465d5,_0x261bd2)=>{const _0x3a523b=_0x374ed6;if(_0x261bd2%_0x458a5c==0x0)_0x29a5ef=[];_0x29a5ef['push'](Markup['button'][_0x3a523b(0x2e5)](_0x4465d5[_0x3a523b(0x11a)]==_0x3a523b(0x234)?_0x3a523b(0x238):_0x3a523b(0x1fc)+_0x4465d5[_0x3a523b(0x11a)],_0x3a523b(0x131)+_0x4465d5[_0x3a523b(0x11a)])),_0x261bd2%_0x458a5c==0x0&&(_0x3297a9[_0xca7f21]=_0x29a5ef,_0xca7f21++);});const _0x87cd18=Markup['inlineKeyboard'](_0x3297a9);_0x3bc960[_0x374ed6(0x14a)](_0x374ed6(0x1da),_0x87cd18);}}),tgBot['action'](/restart_(.+)/,async _0x1d8857=>{const _0x157fae=_0x33d35a,_0x393456=_0x1d8857[_0x157fae(0x19d)][0x1];_0x1d8857[_0x157fae(0x10d)](),_0x393456==_0x157fae(0x234)?config[_0x157fae(0x1f4)](_0x476fbc=>{const _0x440d4c=_0x157fae;restartBot(_0x476fbc[_0x440d4c(0x11a)]);}):restartBot(_0x393456);}),tgBot[_0x33d35a(0x259)]('on',async _0xd6cfbe=>{const _0x205be2=_0x33d35a,_0x215d6a=getDisabledBots();if(_0x215d6a['length']==0x0)await sendTelegram(_0xd6cfbe[_0x205be2(0x21e)]['id'],_0x205be2(0x158));else{if(_0x215d6a[_0x205be2(0x1df)]>0x1)_0x215d6a['push']({'botID':_0x205be2(0x234)});let _0x470c12=[],_0x5f0772=[];const _0x33ab58=_0x215d6a['length']%0x4==0x0||_0x215d6a[_0x205be2(0x1df)]%0x4==0x3||_0x215d6a['length']%0x3==0x1?0x4:0x3;let _0x1607d3=0x0;_0x215d6a[_0x205be2(0x1f4)]((_0x24d230,_0xf3b965)=>{const _0x3b23d5=_0x205be2;if(_0xf3b965%_0x33ab58==0x0)_0x5f0772=[];_0x5f0772[_0x3b23d5(0x2bf)](Markup['button'][_0x3b23d5(0x2e5)](_0x24d230[_0x3b23d5(0x11a)]=='all'?_0x3b23d5(0x238):_0x3b23d5(0x1fc)+_0x24d230[_0x3b23d5(0x11a)],_0x3b23d5(0x2da)+_0x24d230[_0x3b23d5(0x11a)])),_0xf3b965%_0x33ab58==0x0&&(_0x470c12[_0x1607d3]=_0x5f0772,_0x1607d3++);});const _0x192ac4=Markup[_0x205be2(0x186)](_0x470c12);_0xd6cfbe[_0x205be2(0x14a)](_0x205be2(0x142),_0x192ac4);}}),tgBot['action'](/on_(.+)/,async _0x25f3bb=>{const _0x3795fd=_0x33d35a,_0x56a9a9=_0x25f3bb['match'][0x1];_0x25f3bb['editMessageReplyMarkup']();if(_0x56a9a9==_0x3795fd(0x234)){const _0x53bf49=getDisabledBots();await sendTelegram(_0x25f3bb['chat']['id'],_0x3795fd(0x113)),_0x53bf49[_0x3795fd(0x1f4)](_0x3ad065=>{const _0x3a72f3=_0x3795fd;if(_0x3ad065['botID']!='all')toggleBot(_0x3ad065[_0x3a72f3(0x11a)],toggleStatus(_0x3ad065[_0x3a72f3(0x11a)]),_0x3a72f3(0x1ef));});}else await sendTelegram(_0x25f3bb['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x56a9a9),toggleBot(_0x56a9a9,toggleStatus(_0x56a9a9),_0x3795fd(0x1ef));}),tgBot['command']('off',async _0x366c00=>{const _0x492f97=_0x33d35a,_0xf35bb4=getEnabledBots();if(_0xf35bb4[_0x492f97(0x1df)]==0x0)await sendTelegram(_0x366c00[_0x492f97(0x21e)]['id'],_0x492f97(0x14d));else{if(_0xf35bb4['length']>0x1)_0xf35bb4['push']({'botID':'all'});let _0x19f579=[],_0x15c20c=[];const _0x21828e=_0xf35bb4[_0x492f97(0x1df)]%0x4==0x0||_0xf35bb4[_0x492f97(0x1df)]%0x4==0x3||_0xf35bb4[_0x492f97(0x1df)]%0x3==0x1?0x4:0x3;let _0x3252a9=0x0;_0xf35bb4[_0x492f97(0x1f4)]((_0x28120e,_0x9a8851)=>{const _0x4546f2=_0x492f97;if(_0x9a8851%_0x21828e==0x0)_0x15c20c=[];_0x15c20c['push'](Markup['button'][_0x4546f2(0x2e5)](_0x28120e[_0x4546f2(0x11a)]==_0x4546f2(0x234)?'All\x20bots':_0x4546f2(0x1fc)+_0x28120e[_0x4546f2(0x11a)],_0x4546f2(0x176)+_0x28120e[_0x4546f2(0x11a)])),_0x9a8851%_0x21828e==0x0&&(_0x19f579[_0x3252a9]=_0x15c20c,_0x3252a9++);});const _0x526ce6=Markup[_0x492f97(0x186)](_0x19f579);_0x366c00[_0x492f97(0x14a)](_0x492f97(0x2c5),_0x526ce6);}}),tgBot[_0x33d35a(0x15f)](/off_(.+)/,async _0x18c591=>{const _0x207180=_0x33d35a,_0x5aab43=_0x18c591[_0x207180(0x19d)][0x1];_0x18c591['editMessageReplyMarkup']();if(_0x5aab43==_0x207180(0x234)){const _0x2a9a56=getEnabledBots();await sendTelegram(_0x18c591[_0x207180(0x21e)]['id'],_0x207180(0x169)),_0x2a9a56[_0x207180(0x1f4)](_0x31a015=>{const _0x637024=_0x207180;if(_0x31a015['botID']!=_0x637024(0x234))toggleBot(_0x31a015['botID'],toggleStatus(_0x31a015[_0x637024(0x11a)]),'stopped');});}else await sendTelegram(_0x18c591[_0x207180(0x21e)]['id'],_0x207180(0x2ea)+_0x5aab43),toggleBot(_0x5aab43,toggleStatus(_0x5aab43),'stopped');}),tgBot['command'](_0x33d35a(0x1e3),async _0x3d03fb=>{const _0x4eb4ff=_0x33d35a,_0x3ef502=getEnabledBots();if(_0x3ef502[_0x4eb4ff(0x1df)]==0x0)await sendTelegram(_0x3d03fb['chat']['id'],_0x4eb4ff(0x14d));else{if(_0x3ef502['length']>0x1){let _0x3a858f=[],_0x43837c=[];const _0x586d28=_0x3ef502['length']%0x4==0x0||_0x3ef502['length']%0x4==0x3||_0x3ef502['length']%0x3==0x1?0x4:0x3;let _0x298948=0x0;_0x3ef502[_0x4eb4ff(0x1f4)]((_0x2ec8e0,_0x19f39a)=>{const _0x42e1c4=_0x4eb4ff;if(_0x19f39a%_0x586d28==0x0)_0x43837c=[];_0x43837c['push'](Markup[_0x42e1c4(0x2ad)][_0x42e1c4(0x2e5)]('Bot\x20'+_0x2ec8e0[_0x42e1c4(0x11a)],_0x42e1c4(0x264)+_0x2ec8e0[_0x42e1c4(0x11a)])),_0x19f39a%_0x586d28==0x0&&(_0x3a858f[_0x298948]=_0x43837c,_0x298948++);});const _0x2e4435=Markup[_0x4eb4ff(0x186)](_0x3a858f);_0x3d03fb['reply'](_0x4eb4ff(0x193),_0x2e4435);}else{const _0x437dca=_0x3ef502[0x0][_0x4eb4ff(0x11a)];if(pid[_0x437dca])pid[_0x437dca]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x33d35a(0x15f)](/metrics_(.+)/,async _0x541f5d=>{const _0x4678b9=_0x33d35a,_0x54bc7a=_0x541f5d[_0x4678b9(0x19d)][0x1];_0x541f5d['editMessageReplyMarkup']();if(pid[_0x54bc7a])pid[_0x54bc7a]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot['command'](_0x33d35a(0x1bf),async _0x4a9e0c=>{const _0x32b4d4=_0x33d35a,_0x33dedb=getEnabledBots();if(_0x33dedb[_0x32b4d4(0x1df)]==0x0)await sendTelegram(_0x4a9e0c[_0x32b4d4(0x21e)]['id'],_0x32b4d4(0x14d));else{if(_0x33dedb[_0x32b4d4(0x1df)]>0x1){let _0x3de4fc=[],_0x49fe53=[];const _0x278e95=_0x33dedb[_0x32b4d4(0x1df)]%0x4==0x0||_0x33dedb[_0x32b4d4(0x1df)]%0x4==0x3||_0x33dedb['length']%0x3==0x1?0x4:0x3;let _0x4d5528=0x0;_0x33dedb['forEach']((_0x1f26b0,_0x10f5a0)=>{const _0x3dfa5e=_0x32b4d4;if(_0x10f5a0%_0x278e95==0x0)_0x49fe53=[];_0x49fe53[_0x3dfa5e(0x2bf)](Markup[_0x3dfa5e(0x2ad)]['callback'](_0x3dfa5e(0x1fc)+_0x1f26b0[_0x3dfa5e(0x11a)],_0x3dfa5e(0x145)+_0x1f26b0[_0x3dfa5e(0x11a)])),_0x10f5a0%_0x278e95==0x0&&(_0x3de4fc[_0x4d5528]=_0x49fe53,_0x4d5528++);});const _0x44e331=Markup['inlineKeyboard'](_0x3de4fc);_0x4a9e0c['reply'](_0x32b4d4(0x2c2),_0x44e331);}else{const _0x2dd1e6=_0x33dedb[0x0][_0x32b4d4(0x11a)];if(pid[_0x2dd1e6])pid[_0x2dd1e6][_0x32b4d4(0x20f)]({'function':_0x32b4d4(0x2ba),'args':null});}}}),tgBot[_0x33d35a(0x15f)](/portfolio_(.+)/,async _0x32c9c5=>{const _0x3c7900=_0x33d35a,_0x13c210=_0x32c9c5[_0x3c7900(0x19d)][0x1];_0x32c9c5[_0x3c7900(0x10d)]();if(pid[_0x13c210])pid[_0x13c210][_0x3c7900(0x20f)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x185),async _0x3e376d=>{const _0x57f7bb=_0x33d35a;await getMessages();if(!updateAvailable)await sendTelegram(_0x3e376d['chat']['id'],_0x57f7bb(0x126));else{if(!validInstallation)await sendTelegram(_0x3e376d[_0x57f7bb(0x21e)]['id'],_0x57f7bb(0x179));else{const _0x52165d=Markup[_0x57f7bb(0x186)]([Markup[_0x57f7bb(0x2ad)][_0x57f7bb(0x2e5)]('Yes','update_yes'),Markup[_0x57f7bb(0x2ad)][_0x57f7bb(0x2e5)]('No',_0x57f7bb(0x12c))]);_0x3e376d['reply'](_0x57f7bb(0x27c),_0x52165d);}}}),tgBot[_0x33d35a(0x15f)](/update_(.+)/,async _0x205350=>{const _0x3ab661=_0x33d35a,_0x44cb7a=_0x205350[_0x3ab661(0x19d)][0x1];_0x205350[_0x3ab661(0x10d)](),_0x44cb7a=='yes'&&(await sendTelegram(_0x205350[_0x3ab661(0x21e)]['id'],_0x3ab661(0x2ae)),updateBB(_0x3ab661(0x185))),_0x44cb7a=='no'&&await sendTelegram(_0x205350[_0x3ab661(0x21e)]['id'],_0x3ab661(0x2a9));}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x2c0),async _0x3ad374=>{const _0x6be2b5=_0x33d35a;if(!validInstallation)await sendTelegram(_0x3ad374[_0x6be2b5(0x21e)]['id'],_0x6be2b5(0x26a));else{const _0x5812cc=Markup[_0x6be2b5(0x186)]([Markup[_0x6be2b5(0x2ad)][_0x6be2b5(0x2e5)](_0x6be2b5(0x1bd),_0x6be2b5(0x151)),Markup[_0x6be2b5(0x2ad)]['callback']('No',_0x6be2b5(0x1f1))]);_0x3ad374[_0x6be2b5(0x14a)](_0x6be2b5(0x227),_0x5812cc);}}),tgBot[_0x33d35a(0x15f)](/reinstall_(.+)/,async _0x478ba5=>{const _0x1c936b=_0x33d35a,_0x3be8e6=_0x478ba5[_0x1c936b(0x19d)][0x1];_0x478ba5[_0x1c936b(0x10d)](),_0x3be8e6==_0x1c936b(0x20a)&&(await sendTelegram(_0x478ba5[_0x1c936b(0x21e)]['id'],_0x1c936b(0x121)),updateBB(_0x1c936b(0x2c0))),_0x3be8e6=='no'&&await sendTelegram(_0x478ba5[_0x1c936b(0x21e)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x112),async _0x3c527f=>{const _0x2bcc6f=_0x33d35a,_0x98064=getBotsWithMode();if(_0x98064[_0x2bcc6f(0x1df)]==0x0)await sendTelegram(_0x3c527f[_0x2bcc6f(0x21e)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x559498=[],_0x11fcfd=[];const _0x8e30a7=0x2;let _0x43ae92=0x0;_0x98064[_0x2bcc6f(0x1f4)]((_0x315806,_0x50ea99)=>{const _0x103b9c=_0x2bcc6f;if(_0x50ea99%_0x8e30a7==0x0)_0x11fcfd=[];_0x11fcfd['push'](Markup[_0x103b9c(0x2ad)][_0x103b9c(0x2e5)](_0x103b9c(0x1fc)+_0x315806['botID']+'\x20('+_0x315806[_0x103b9c(0x154)]+')',_0x103b9c(0x215)+_0x315806[_0x103b9c(0x11a)])),_0x50ea99%_0x8e30a7==0x0&&(_0x559498[_0x43ae92]=_0x11fcfd,_0x43ae92++);});const _0x15631d=Markup[_0x2bcc6f(0x186)](_0x559498);_0x3c527f[_0x2bcc6f(0x14a)](_0x2bcc6f(0x269),_0x15631d);}}),tgBot[_0x33d35a(0x15f)](/toggle_(.+)/,async _0x1468dd=>{const _0x29d82f=_0x33d35a,_0x16d087=_0x1468dd[_0x29d82f(0x19d)][0x1];_0x1468dd['editMessageReplyMarkup']();const _0x5cd4b8=getBotsWithMode(),_0x3873d3=_0x5cd4b8[_0x29d82f(0x2fb)](_0x25c2a7=>_0x25c2a7[_0x29d82f(0x11a)]==_0x16d087),_0x273c0f=_0x3873d3['mode']=='auto'?'manual':_0x29d82f(0x252);await sendTelegram(_0x1468dd['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x16d087+'\x20to\x20'+_0x273c0f+_0x29d82f(0x294)),toggleBotMode(_0x16d087);}),tgBot[_0x33d35a(0x259)](_0x33d35a(0x1ea),async _0x24b42d=>{const _0x257526=_0x33d35a;let _0x301a2c='';config[_0x257526(0x1f4)](_0x275813=>{const _0x4e00b9=_0x257526;_0x301a2c+='Bot\x20'+_0x275813[_0x4e00b9(0x11a)]+':\x20'+_0x275813[_0x4e00b9(0x2d6)]+'\x0a';}),await sendTelegram(_0x24b42d[_0x257526(0x21e)]['id'],_0x301a2c,{'parse_mode':_0x257526(0x240)});}),tgBot['command'](_0x33d35a(0x213),async _0x1cc537=>{const _0x349abd=_0x33d35a;await sendTelegram(_0x1cc537[_0x349abd(0x21e)]['id'],_0x3f71be);}),process[_0x33d35a(0x117)]('SIGINT',()=>tgBot[_0x33d35a(0x16c)](_0x33d35a(0x2aa))),process[_0x33d35a(0x117)](_0x33d35a(0x2e2),()=>tgBot['stop'](_0x33d35a(0x2e2))),tgBot[_0x33d35a(0x210)]();}}function disableTelegram(){const _0x2bf339=_0x7d1e49;tgBot&&tgBot[_0x2bf339(0x16c)]();}async function sendTelegram(_0x52bd18,_0x3f91c3,_0x1f572b){const _0xbb73f5=_0x7d1e49;_0x1f572b={..._0x1f572b,'disable_web_page_preview':!![]};try{await tgBot[_0xbb73f5(0x152)][_0xbb73f5(0x143)](_0x52bd18,_0x3f91c3,_0x1f572b);}catch(_0x46eb6c){console['log'](_0xbb73f5(0x2d5),_0x46eb6c);}}async function sendTelegramBot(_0x54fdea,_0x5e8711){const _0x168ee7=_0x7d1e49;if(settings['telegramEnabled']){if(settings[_0x168ee7(0x139)]==_0x168ee7(0x234)||(_0x5e8711['type']=='error'||_0x5e8711[_0x168ee7(0x13b)]=='warning'||_0x5e8711[_0x168ee7(0x13b)]==_0x168ee7(0x30d))&&settings[_0x168ee7(0x139)]==_0x168ee7(0x153)||_0x5e8711[_0x168ee7(0x13b)]==_0x168ee7(0x25c)&&settings[_0x168ee7(0x139)]==_0x168ee7(0x317)){if(tgBot&&settings[_0x168ee7(0x23d)]){if(_0x5e8711['showname'])await sendTelegram(settings[_0x168ee7(0x23d)],_0x5e8711[_0x168ee7(0x2d6)]+_0x168ee7(0x1bb)+_0x5e8711[_0x168ee7(0x115)]);else await sendTelegram(settings[_0x168ee7(0x23d)],_0x168ee7(0x1fc)+_0x54fdea+'\x20>\x20'+_0x5e8711[_0x168ee7(0x115)]);}}}}async function sendTelegramMsg(_0x31327f,_0x176857=_0x7d1e49(0x240)){const _0x173ac2=_0x7d1e49;return settings[_0x173ac2(0x2c3)]&&tgBot&&settings[_0x173ac2(0x23d)]?(await sendTelegram(settings[_0x173ac2(0x23d)],_0x31327f,{'parse_mode':_0x176857}),!![]):![];}function getDeviceWithIp(_0x42a0ee){const _0x51ce07=_0x7d1e49;return devices[_0x51ce07(0x2fb)](_0x1cda6c=>_0x1cda6c['ip']===_0x42a0ee);}async function temporaryAccess2FA(_0x54e128,_0x623bc2){const _0x36e51e=_0x7d1e49;let _0x217dca=new Date(),_0x1a4663=![];if(lastIpApproval){if(_0x217dca-lastIpApproval<0x1388)_0x1a4663=!![];}lastIpApproval=new Date();if(_0x1a4663)return;if(tgBot&&settings['telegramChatId']){const _0x1ae683=uuidRandom();tmpStorage[_0x1ae683]={'uuid':_0x54e128,'externalip':_0x623bc2};const _0x263acf=Markup[_0x36e51e(0x186)]([Markup[_0x36e51e(0x2ad)]['callback']('5\x20min','tempaccess_5_'+_0x1ae683),Markup[_0x36e51e(0x2ad)][_0x36e51e(0x2e5)](_0x36e51e(0x2b3),_0x36e51e(0x1c0)+_0x1ae683),Markup['button'][_0x36e51e(0x2e5)](_0x36e51e(0x13a),_0x36e51e(0x16d)+_0x1ae683),Markup[_0x36e51e(0x2ad)][_0x36e51e(0x2e5)](_0x36e51e(0x1c1),_0x36e51e(0x22f)+_0x1ae683)]);await sendTelegram(settings[_0x36e51e(0x23d)],_0x36e51e(0x160)+normalizeIP(_0x623bc2)[_0x36e51e(0x2b4)]+'\x20?',_0x263acf),tgBot[_0x36e51e(0x15f)](/tempaccess_(.+)_(.+)/,async _0x2f5589=>{const _0x47158e=_0x36e51e,_0x104171=_0x2f5589[_0x47158e(0x19d)][0x1],_0x227d5b=_0x2f5589[_0x47158e(0x19d)][0x2],{uuid:_0xd4f26c,externalip:_0x687189}=tmpStorage[_0x227d5b];delete tmpStorage[_0x227d5b],_0x2f5589['editMessageReplyMarkup'](),devices[_0xd4f26c]['telegramIpApproval']={'clientip':_0x687189,'timestamp':new Date()[_0x47158e(0x1ac)](),'expiry':_0x104171},_0x104171!='reject'?(await sendTelegram(_0x2f5589['chat']['id'],_0x47158e(0x19c)+_0x104171+_0x47158e(0x304),{'parse_mode':_0x47158e(0x240)}),io['to'](_0xd4f26c)['emit'](_0x47158e(0x174),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x2f5589['chat']['id'],_0x47158e(0x114)),io['to'](_0xd4f26c)[_0x47158e(0x211)](_0x47158e(0x174),{'access':{'allow':![],'reason':_0x47158e(0x226),'token':null}}));});}}async function loginAccess2FA(_0x412468,_0x48597d){const _0x2a813f=_0x7d1e49;if(tgBot&&settings[_0x2a813f(0x23d)]){const _0x18be22=uuidRandom();tmpStorage[_0x18be22]={'uuid':_0x412468,'externalip':_0x48597d};const _0x2141cc=Markup[_0x2a813f(0x186)]([Markup[_0x2a813f(0x2ad)][_0x2a813f(0x2e5)](_0x2a813f(0x256),_0x2a813f(0x2af)+loginExpiry+'_'+_0x18be22),Markup['button'][_0x2a813f(0x2e5)](_0x2a813f(0x1c1),_0x2a813f(0x19f)+_0x18be22)]);await sendTelegram(settings[_0x2a813f(0x23d)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x48597d)[_0x2a813f(0x2b4)]+'\x20?',_0x2141cc),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x2f2f26=>{const _0x4c5a0c=_0x2a813f,_0x5bdca5=_0x2f2f26[_0x4c5a0c(0x19d)][0x1],_0x220cea=_0x2f2f26[_0x4c5a0c(0x19d)][0x2],{uuid:_0x4e81f6,externalip:_0xdd05c}=tmpStorage[_0x220cea];delete tmpStorage[_0x220cea],_0x2f2f26[_0x4c5a0c(0x10d)](),devices[_0x4e81f6][_0x4c5a0c(0x167)]={'clientip':_0xdd05c,'timestamp':new Date()[_0x4c5a0c(0x1ac)](),'expiry':_0x5bdca5},_0x5bdca5!=_0x4c5a0c(0x1c1)?(await sendTelegram(_0x2f2f26[_0x4c5a0c(0x21e)]['id'],'Login\x20accepted',{'parse_mode':'HTML'}),io['to'](_0x4e81f6)['emit'](_0x4c5a0c(0x174),{'access':{'allow':![],'reason':_0x4c5a0c(0x1ca),'token':null}})):(await sendTelegram(_0x2f2f26[_0x4c5a0c(0x21e)]['id'],_0x4c5a0c(0x1cd)),io['to'](_0x4e81f6)[_0x4c5a0c(0x211)](_0x4c5a0c(0x174),{'access':{'allow':![],'reason':_0x4c5a0c(0x2c8),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xd9a87e=_0x7d1e49;return dbConfig[_0xd9a87e(0x159)](_0xd9a87e(0x237))[_0xd9a87e(0x229)](_0xd9a87e(0x11a))[_0xd9a87e(0x1f6)]({'status':_0xd9a87e(0x19a)})[_0xd9a87e(0x1f7)]()||[];}function getDisabledBots(){const _0x6624b6=_0x7d1e49;return dbConfig[_0x6624b6(0x159)]('bots')['sortBy'](_0x6624b6(0x11a))[_0x6624b6(0x1f6)]({'status':'disabled'})[_0x6624b6(0x1f7)]()||[];}function getBotAttributes(_0x124f46){const _0x54cb80=_0x7d1e49;let _0x9d56a5={};const _0x3ad042=configpath+_0x54cb80(0x170)+_0x124f46+_0x54cb80(0x1eb),_0x27698c=fs[_0x54cb80(0x301)](_0x3ad042);if(_0x27698c){const _0x185a47=fs[_0x54cb80(0x2db)](_0x3ad042);try{const _0x2e67cc=JSON[_0x54cb80(0x291)](_0x185a47),_0x3caf08=_0x2e67cc?_0x2e67cc[_0x54cb80(0x25f)][0x0][_0x54cb80(0x1ad)]:![];_0x9d56a5['mode']=_0x3caf08?_0x54cb80(0x252):_0x54cb80(0x2b5),_0x9d56a5[_0x54cb80(0x2d6)]=_0x2e67cc?_0x2e67cc[_0x54cb80(0x25f)][0x0][_0x54cb80(0x2d6)]:'Bot\x20'+_0x124f46;}catch(_0x52215f){_0x9d56a5[_0x54cb80(0x154)]=_0x54cb80(0x2b5),_0x9d56a5[_0x54cb80(0x2d6)]=_0x54cb80(0x1fc)+_0x124f46;}}else _0x9d56a5[_0x54cb80(0x154)]=_0x54cb80(0x2b5),_0x9d56a5[_0x54cb80(0x2d6)]='Bot\x20'+_0x124f46;return _0x9d56a5;}function getBotsWithMode(){const _0x5cd31b=_0x7d1e49,_0x4d7907=dbConfig[_0x5cd31b(0x159)]('bots')[_0x5cd31b(0x229)](_0x5cd31b(0x11a))[_0x5cd31b(0x1f7)]()||[];return _0x4d7907[_0x5cd31b(0x1f4)](_0xf93eda=>{const _0x1ada42=_0x5cd31b;let _0xaf6982=getBotAttributes(_0xf93eda[_0x1ada42(0x11a)]);_0xf93eda[_0x1ada42(0x154)]=_0xaf6982['mode'];}),_0x4d7907;}function getBotExchanges(){const _0x1c5f15=_0x7d1e49;let _0x5bd4fa=[];const _0x4a6bb3=dbConfig[_0x1c5f15(0x159)](_0x1c5f15(0x237))[_0x1c5f15(0x229)](_0x1c5f15(0x11a))[_0x1c5f15(0x1f7)]()||[];_0x4a6bb3['forEach'](_0x1a636b=>{const _0x177191=_0x1c5f15;if(_0x1a636b[_0x177191(0x174)]==_0x177191(0x19a)){const _0x531391=configpath+_0x177191(0x170)+_0x1a636b[_0x177191(0x11a)]+_0x177191(0x1eb),_0x53bc97=fs[_0x177191(0x301)](_0x531391);let _0x4bf4eb;if(_0x53bc97){const _0x247cd4=fs[_0x177191(0x2db)](_0x531391);try{const _0x4d86de=JSON[_0x177191(0x291)](_0x247cd4);_0x4bf4eb=_0x4d86de?_0x4d86de[_0x177191(0x25f)][0x0][_0x177191(0x2c1)]:null;}catch(_0x2da8fd){}}if(_0x4bf4eb)_0x5bd4fa[_0x177191(0x2bf)](_0x4bf4eb);}});const _0x5dbfa5=[...new Set(_0x5bd4fa)]['sort']();return _0x5dbfa5;}async function initUser(){const _0x42c8ae=_0x7d1e49;if(!settings[_0x42c8ae(0x2c7)]){const _0x5d20b2=uuidRandom();mixpanel[_0x42c8ae(0x2df)](_0x5d20b2),updateSetting(_0x42c8ae(0x2c7),_0x5d20b2);}}async function initSecure(){const _0x3c257b=_0x7d1e49;let _0x30e6bd=getSecure();if(!_0x30e6bd[_0x3c257b(0x1f0)](_0x3c257b(0x303))){let _0x59fbdd=await generateKeys();_0x30e6bd[_0x3c257b(0x310)]=_0x59fbdd[_0x3c257b(0x310)],_0x30e6bd[_0x3c257b(0x201)]=_0x59fbdd[_0x3c257b(0x201)],_0x30e6bd[_0x3c257b(0x303)]=crypto[_0x3c257b(0x277)](0x20)[_0x3c257b(0x1d9)]('hex');;storeSecure(_0x30e6bd);}}function getSettings(){const _0x508cca=_0x7d1e49;return dbSettings[_0x508cca(0x159)](_0x508cca(0x281))[_0x508cca(0x1f7)]()||{};}function getSecure(){const _0x4e6b60=_0x7d1e49;return dbSecure['get'](_0x4e6b60(0x183))[_0x4e6b60(0x1f7)]()||{};}function getBlacklist(){const _0x595103=_0x7d1e49;return dbSecure['get'](_0x595103(0x205))[_0x595103(0x1f7)]()||[];}function broadcastToBots(_0x452aa4,_0x35cf8c){const _0x198d0a=_0x7d1e49;config[_0x198d0a(0x1f4)](_0x47eae6=>{const _0x133836=_0x198d0a;if(_0x47eae6['status']==_0x133836(0x19a)&&_0x47eae6['live']==_0x133836(0x26f)||_0x47eae6[_0x133836(0x174)]==_0x133836(0x1c7)&&_0x47eae6[_0x133836(0x1b5)]==_0x133836(0x26f)){if(pid[_0x47eae6[_0x133836(0x11a)]])pid[_0x47eae6['botID']][_0x133836(0x20f)]({[_0x452aa4]:_0x35cf8c});}});}async function storeSettings(_0x2799cc,_0x51dd42=![]){const _0x5c6488=_0x7d1e49;_0x2799cc={...settings,..._0x2799cc};if(_0x51dd42&&_0x2799cc['bbPassword']!=_0x5c6488(0x268)&&_0x2799cc['bbPassword']!=_0x5c6488(0x1d0)&&_0x2799cc[_0x5c6488(0x1c2)]!=''){const _0x428049=crypt[_0x5c6488(0x2b9)](secure[_0x5c6488(0x201)],_0x2799cc[_0x5c6488(0x1c2)])[_0x5c6488(0x271)][_0x5c6488(0x11b)](_0x5c6488(0x278))[0x0],_0x365531=bcrypt['hashSync'](_0x428049,saltRounds);_0x2799cc={..._0x2799cc,'bbPassword':_0x365531};}if(_0x51dd42&&_0x2799cc['telegramToken']!='************'&&_0x2799cc[_0x5c6488(0x133)]!=_0x5c6488(0x1d0)&&_0x2799cc[_0x5c6488(0x133)]!=''){const _0x266fa9=crypt[_0x5c6488(0x2b9)](secure['privateKey'],_0x2799cc[_0x5c6488(0x133)])['message'][_0x5c6488(0x11b)](_0x5c6488(0x278))[0x0];_0x2799cc={..._0x2799cc,'telegramToken':_0x266fa9};}if(_0x51dd42&&_0x2799cc[_0x5c6488(0x272)]!=_0x5c6488(0x268)&&_0x2799cc[_0x5c6488(0x272)]!=_0x5c6488(0x1d0)&&_0x2799cc['marketcapApi']!=''){const _0x4854d2=crypt[_0x5c6488(0x2b9)](secure['privateKey'],_0x2799cc[_0x5c6488(0x272)])[_0x5c6488(0x271)][_0x5c6488(0x11b)]('|@|')[0x0];_0x2799cc={..._0x2799cc,'marketcapApi':_0x4854d2};}const _0x1b08d9=_0x2799cc['telegramToken']!='************'&&_0x2799cc['telegramToken']!=settings[_0x5c6488(0x133)]||_0x2799cc[_0x5c6488(0x14c)]!=settings[_0x5c6488(0x14c)],_0x400d93=_0x2799cc['telegramToken']==''||_0x2799cc['telegramUsername']=='',_0x502fcd=_0x2799cc[_0x5c6488(0x272)]&&_0x2799cc[_0x5c6488(0x272)]!='************'&&_0x2799cc[_0x5c6488(0x272)]!=settings[_0x5c6488(0x133)];_0x1b08d9&&(_0x2799cc['telegramChatId']=null,_0x2799cc[_0x5c6488(0x139)]=_0x5c6488(0x234));for(const [_0x40eb6b,_0x8ced02]of Object[_0x5c6488(0x2d4)](_0x2799cc)){if(_0x40eb6b=='telegramToken'&&_0x8ced02==_0x5c6488(0x268)){_0x2799cc[_0x5c6488(0x133)]=settings[_0x5c6488(0x133)];continue;};if(_0x40eb6b==_0x5c6488(0x1c2)&&_0x8ced02==_0x5c6488(0x268)){_0x2799cc['bbPassword']=settings[_0x5c6488(0x1c2)];continue;};if(_0x40eb6b==_0x5c6488(0x272)&&_0x8ced02==_0x5c6488(0x268)){_0x2799cc[_0x5c6488(0x272)]=settings['marketcapApi'];continue;};dbSettings[_0x5c6488(0x2f6)](_0x5c6488(0x125)+_0x40eb6b,_0x8ced02)['write']();}settings=_0x2799cc,io['to'](_0x5c6488(0x276))[_0x5c6488(0x211)](_0x5c6488(0x281),cleanSettings()),broadcastToBots(_0x5c6488(0x1b3),settings[_0x5c6488(0x1b3)]),broadcastToBots(_0x5c6488(0x2f9),settings[_0x5c6488(0x2f9)]),broadcastToBots(_0x5c6488(0x272),settings[_0x5c6488(0x272)]);if(_0x1b08d9&&!_0x400d93)initTelegram();if(_0x1b08d9&&_0x400d93)disableTelegram();getAllClients()[_0x5c6488(0x1f4)](_0x22f320=>{const _0x5e786c=_0x5c6488;getSocket(_0x22f320['id'])[_0x5e786c(0x211)](_0x5e786c(0x174),{'access':{'allow':![],'reason':_0x5e786c(0x1ca),'token':null}});}),_0x502fcd&&(await sleep(0xbb8),testMarketcapApi(_0x2799cc['marketcapApi']));}async function testMarketcapApi(_0x51143b){const _0x252f68=_0x7d1e49,_0x179c24=[_0x252f68(0x1b7),'ETH'];try{await axios[_0x252f68(0x159)](_0x252f68(0x12d),{'headers':{'X-CMC_PRO_API_KEY':_0x51143b},'params':{'symbol':_0x179c24['toString']()}});}catch(_0x82e8a4){_0x82e8a4['toString']()[_0x252f68(0x2c6)](_0x252f68(0x1fb))?(io['to'](_0x252f68(0x276))[_0x252f68(0x211)]('notification',_0x252f68(0x26c)),logger['full'](_0x252f68(0x26c))):(io['to'](_0x252f68(0x276))[_0x252f68(0x211)](_0x252f68(0x13e),_0x252f68(0x2e7)),logger[_0x252f68(0x318)](_0x252f68(0x2e7)),logger[_0x252f68(0x25e)](_0x252f68(0x21b),_0x82e8a4[_0x252f68(0x1d9)]()+_0x252f68(0x180)+_0x82e8a4['code']));return;}logger[_0x252f68(0x25e)](_0x252f68(0x2c9));}function updateSetting(_0x2de4b7,_0x1ee7cf){const _0x43ccea=_0x7d1e49;dbSettings[_0x43ccea(0x2f6)](_0x43ccea(0x125)+_0x2de4b7,_0x1ee7cf)['write'](),settings=getSettings(),io['to']('botmanager')['emit'](_0x43ccea(0x281),cleanSettings());}function storeSecure(_0x5b8d81){const _0x3d4e44=_0x7d1e49;dbSecure[_0x3d4e44(0x159)]('secure')[_0x3d4e44(0x2bf)](_0x5b8d81)[_0x3d4e44(0x181)](),secure=_0x5b8d81;}function addBlacklist(_0x4a66ff){const _0x2880cc=_0x7d1e49;cleanBlacklist();let _0x166f27;devices[_0x4a66ff][_0x2880cc(0x1e5)]?_0x166f27=Math[_0x2880cc(0x124)](devices[_0x4a66ff][_0x2880cc(0x1e5)]['expiry'],loginExpiry):_0x166f27=loginExpiry,dbSecure['get']('blacklist')[_0x2880cc(0x2bf)]({'expiry':new Date()['getTime']()+_0x166f27*0x3c*0x3e8,'token':devices[_0x4a66ff][_0x2880cc(0x206)]['token']})[_0x2880cc(0x181)](),blacklist=dbSecure['get'](_0x2880cc(0x205))[_0x2880cc(0x1f7)]();}function cleanBlacklist(){const _0x3b429=_0x7d1e49;let _0x21b7f5=dbSecure['get']('blacklist')[_0x3b429(0x2cc)]()['value'](),_0x37766e=new Date()[_0x3b429(0x1ac)]();_0x21b7f5['forEach'](_0x135efb=>{const _0x1c5d06=_0x3b429;_0x135efb['expiry']<_0x37766e&&dbSecure['get'](_0x1c5d06(0x205))['remove']({'expiry':_0x135efb['expiry']})['write']();});}function initStates(){const _0x5a10fd=_0x7d1e49;let _0x3f551a=getConfiguration();_0x3f551a[_0x5a10fd(0x1f4)](_0x4bda3a=>{const _0x286764=_0x5a10fd;_0x4bda3a[_0x286764(0x1b5)]=_0x286764(0x1ef);}),storeConfiguration(_0x3f551a);}function onKeys(){const _0x5b08bb=new RSA();return new Promise(_0x1f203a=>{const _0x198b70=_0x1162;_0x5b08bb[_0x198b70(0x15a)]()[_0x198b70(0x29c)](_0x204775=>{_0x1f203a(_0x204775);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x90440b=_0x7d1e49;let _0x2f057a=getSettings(),_0x4489db=![];!_0x2f057a[_0x90440b(0x1f0)](_0x90440b(0x2e4))&&(_0x2f057a[_0x90440b(0x2e4)]=0x0,_0x4489db=!![]);!_0x2f057a[_0x90440b(0x1f0)](_0x90440b(0x31a))&&(_0x2f057a[_0x90440b(0x31a)]=0x0,_0x4489db=!![]);!_0x2f057a[_0x90440b(0x1f0)](_0x90440b(0x192))&&(_0x2f057a['latestversion']=_0x90440b(0x1aa),_0x4489db=!![]);!_0x2f057a[_0x90440b(0x1f0)](_0x90440b(0x2f9))&&(_0x2f057a['onepagemode']=![],_0x4489db=!![]);!_0x2f057a['hasOwnProperty'](_0x90440b(0x272))&&(_0x2f057a[_0x90440b(0x272)]='',_0x4489db=!![]);if(_0x4489db)storeSettings(_0x2f057a);try{fs[_0x90440b(0x146)](configbackuppath,{'withFileTypes':!![]})[_0x90440b(0x1f4)](_0x1ae255=>{const _0x487fb2=_0x90440b;if(!_0x1ae255[_0x487fb2(0x2f1)]()){if(!_0x1ae255[_0x487fb2(0x1f8)][_0x487fb2(0x254)](_0x487fb2(0x2ce)))fs[_0x487fb2(0x1dd)](configbackuppath+_0x1ae255[_0x487fb2(0x1f8)]);}else fs[_0x487fb2(0x1a9)](configbackuppath+_0x1ae255['name'],{'recursive':!![]});});}catch(_0x1daa9c){logger[_0x90440b(0x25e)](_0x90440b(0x1db),_0x1daa9c);}}function storeConfiguration(_0x32ff21){const _0x55ff89=_0x7d1e49;dbConfig[_0x55ff89(0x159)](_0x55ff89(0x237))['remove']()[_0x55ff89(0x181)](),dbConfig['get'](_0x55ff89(0x237))[_0x55ff89(0x2bf)](..._0x32ff21)[_0x55ff89(0x181)](),config=_0x32ff21;}async function resetPassword(){const _0x2ba498=_0x7d1e49;if(tgBot&&settings['telegramChatId']){const _0x3c0595=Markup[_0x2ba498(0x186)]([Markup[_0x2ba498(0x2ad)]['callback']('yes','resetpw_yes'),Markup['button'][_0x2ba498(0x2e5)]('no',_0x2ba498(0x2b2))]);await sendTelegram(settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x3c0595),tgBot[_0x2ba498(0x15f)](/resetpw_(.+)/,async _0x2eb7e9=>{const _0x3f5e93=_0x2ba498,_0x9bd43a=_0x2eb7e9[_0x3f5e93(0x19d)][0x1];_0x2eb7e9[_0x3f5e93(0x10d)]();if(_0x9bd43a!='no'){const _0x4ac823=0xf,_0x3a94ea='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x3e9360=Array[_0x3f5e93(0x10e)](crypto['randomFillSync'](new Uint32Array(_0x4ac823)))[_0x3f5e93(0x11f)](_0x1adf6b=>_0x3a94ea[_0x1adf6b%_0x3a94ea['length']])[_0x3f5e93(0x20d)](''),_0xd8dddb=bcrypt['hashSync'](_0x3e9360,saltRounds);storeSettings({'bbPassword':_0xd8dddb}),await sendTelegram(_0x2eb7e9[_0x3f5e93(0x21e)]['id'],_0x3f5e93(0x120)+_0x3e9360,{'parse_mode':'HTML'});}else await sendTelegram(_0x2eb7e9[_0x3f5e93(0x21e)]['id'],_0x3f5e93(0x24a));});}}async function confirmRestore(_0x16cfe3,_0x3de6fd){const _0x3ae0a0=_0x7d1e49;io['to']('botmanager')[_0x3ae0a0(0x211)](_0x3ae0a0(0x13e),_0x3ae0a0(0x2de),_0x3ae0a0(0x30d));if(tgBot&&settings[_0x3ae0a0(0x23d)]){const _0xb6c04c=uuidRandom();tmpStorage[_0xb6c04c]={'path':_0x16cfe3,'filename':_0x3de6fd};const _0x26d203=Markup['inlineKeyboard']([Markup[_0x3ae0a0(0x2ad)][_0x3ae0a0(0x2e5)](_0x3ae0a0(0x20a),_0x3ae0a0(0x165)+_0xb6c04c),Markup[_0x3ae0a0(0x2ad)][_0x3ae0a0(0x2e5)]('no',_0x3ae0a0(0x1c9)+_0xb6c04c)]);await sendTelegram(settings['telegramChatId'],_0x3ae0a0(0x172),_0x26d203),tgBot[_0x3ae0a0(0x15f)](/restore_(.+)_(.+)/,async _0x5b94e2=>{const _0x5ab198=_0x3ae0a0,_0x491309=_0x5b94e2[_0x5ab198(0x19d)][0x1],_0x35f5e7=_0x5b94e2[_0x5ab198(0x19d)][0x2],{path:_0xde0e05,filename:_0x2c0462}=tmpStorage[_0x35f5e7];delete tmpStorage[_0x35f5e7],_0x5b94e2[_0x5ab198(0x10d)](),_0x491309=='yes'?(logger[_0x5ab198(0x25e)](_0x5ab198(0x31d)),await sendTelegram(_0x5b94e2[_0x5ab198(0x21e)]['id'],_0x5ab198(0x1fa),{'parse_mode':_0x5ab198(0x240)}),unzipFile(_0xde0e05,_0x2c0462)):(logger['debug']('Restore\x20process\x20aborted'),await sendTelegram(_0x5b94e2[_0x5ab198(0x21e)]['id'],_0x5ab198(0x2cb)));});}}function getServerTime(){const _0x333d44=_0x7d1e49,_0x126a8f=new Date();return _0x126a8f[_0x333d44(0x307)]()+'/'+(_0x126a8f[_0x333d44(0x1bc)]()+0x1)[_0x333d44(0x1d9)]()['padStart'](0x2,'0')+'/'+_0x126a8f[_0x333d44(0x2fc)]()[_0x333d44(0x1d9)]()[_0x333d44(0x296)](0x2,'0')+'\x20'+_0x126a8f['getHours']()[_0x333d44(0x1d9)]()[_0x333d44(0x296)](0x2,'0')+':'+_0x126a8f[_0x333d44(0x267)]()['toString']()[_0x333d44(0x296)](0x2,'0')+':'+_0x126a8f[_0x333d44(0x23c)]()['toString']()[_0x333d44(0x296)](0x2,'0');}function getTimeStamp(){const _0x12c973=_0x7d1e49,_0x485c75=shiftedTime();return _0x485c75[_0x12c973(0x307)]()+'/'+(_0x485c75['getMonth']()+0x1)[_0x12c973(0x1d9)]()[_0x12c973(0x296)](0x2,'0')+'/'+_0x485c75[_0x12c973(0x2fc)]()[_0x12c973(0x1d9)]()['padStart'](0x2,'0')+'\x20'+_0x485c75[_0x12c973(0x2a6)]()['toString']()[_0x12c973(0x296)](0x2,'0')+':'+_0x485c75[_0x12c973(0x267)]()['toString']()[_0x12c973(0x296)](0x2,'0')+':'+_0x485c75[_0x12c973(0x23c)]()[_0x12c973(0x1d9)]()[_0x12c973(0x296)](0x2,'0');}function getCleanTimeStamp(){const _0x3dbfe6=_0x7d1e49,_0x3a3eb2=shiftedTime();return _0x3a3eb2[_0x3dbfe6(0x307)]()+(_0x3a3eb2[_0x3dbfe6(0x1bc)]()+0x1)[_0x3dbfe6(0x1d9)]()[_0x3dbfe6(0x296)](0x2,'0')+_0x3a3eb2[_0x3dbfe6(0x2fc)]()[_0x3dbfe6(0x1d9)]()[_0x3dbfe6(0x296)](0x2,'0')+'-'+_0x3a3eb2[_0x3dbfe6(0x2a6)]()['toString']()['padStart'](0x2,'0')+_0x3a3eb2[_0x3dbfe6(0x267)]()[_0x3dbfe6(0x1d9)]()[_0x3dbfe6(0x296)](0x2,'0')+_0x3a3eb2[_0x3dbfe6(0x23c)]()['toString']()[_0x3dbfe6(0x296)](0x2,'0');}function shiftedTime(){const _0x4f8163=_0x7d1e49,_0x270eff=new Date();let _0x5e2cdf=_0x270eff;if(settings[_0x4f8163(0x1b3)]&&settings[_0x4f8163(0x1b3)]!==0x0)_0x5e2cdf=fns[_0x4f8163(0x25b)](_0x270eff,{'hours':settings[_0x4f8163(0x1b3)]});return _0x5e2cdf;}async function startScheduler(){const _0x321c9b=_0x7d1e49,_0x58b38d=new Date()['getUTCHours'](),_0x1ed68b=shiftedTime()[_0x321c9b(0x2a6)]();_0x1ed68b==0x4&&backupConfigFiles(),_0x1ed68b==0x0&&rotateLogFiles(),_0x58b38d%0x6==0x0&&triggerAnalytics(),_0x58b38d%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x21b979){const _0x13147=_0x7d1e49;logger[_0x13147(0x25e)]('Restore\x20backup\x20file\x20'+_0x21b979);const _0xc6cb70=getBotsWithMode();_0xc6cb70[_0x13147(0x1df)]>0x0?confirmRestore(configbackuppath,_0x21b979):unzipFile(configbackuppath,_0x21b979);}async function getBackupFiles(_0x4a7d49=null){const _0x40a109=_0x7d1e49;let _0x2c615f=[],_0x2e2c23=fs[_0x40a109(0x146)](configbackuppath,{'withFileTypes':!![]});_0x2e2c23['sort']((_0x432138,_0x31124b)=>_0x432138['name']<_0x31124b[_0x40a109(0x1f8)]?0x1:_0x31124b[_0x40a109(0x1f8)]<_0x432138[_0x40a109(0x1f8)]?-0x1:0x0),_0x2e2c23[_0x40a109(0x1f4)](_0x12552a=>{const _0x18915c=_0x40a109;if(!_0x12552a[_0x18915c(0x2f1)]()&&_0x12552a[_0x18915c(0x1f8)][_0x18915c(0x254)](_0x18915c(0x2ce))&&_0x12552a[_0x18915c(0x1f8)][_0x18915c(0x1e4)](_0x18915c(0x122))){const _0x1651d6=formatDate(fs[_0x18915c(0x2ed)](configbackuppath+_0x12552a[_0x18915c(0x1f8)])[_0x18915c(0x1d8)]);_0x2c615f['push']({'name':_0x12552a[_0x18915c(0x1f8)],'mtime':_0x1651d6});}});if(_0x4a7d49)io['to'](_0x4a7d49)['emit']('backup-files',_0x2c615f);else return _0x2c615f;}async function backupConfigFiles(){const _0x348a7d=_0x7d1e49;await zipFiles(_0x348a7d(0x2f3));const _0x423882=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x348a7d(0x140),configbackuppath+('backup-full@'+_0x423882+_0x348a7d(0x122)));let _0x4f339a=fs[_0x348a7d(0x146)](configbackuppath,{'withFileTypes':!![]});_0x4f339a['sort']((_0x5c3f98,_0x55f090)=>_0x5c3f98[_0x348a7d(0x1f8)]<_0x55f090[_0x348a7d(0x1f8)]?0x1:_0x55f090[_0x348a7d(0x1f8)]<_0x5c3f98[_0x348a7d(0x1f8)]?-0x1:0x0),_0x4f339a[_0x348a7d(0x1df)]>maxBackups&&fs[_0x348a7d(0x1dd)](configbackuppath+_0x4f339a[_0x4f339a[_0x348a7d(0x1df)]-0x1][_0x348a7d(0x1f8)]);}function rotateLogFiles(){const _0x42ea9f=_0x7d1e49,_0x251f65=fs['statSync'](logspath+_0x42ea9f(0x2a7)),_0x3519c9=_0x251f65['size']/0x400;if(_0x3519c9>0x64){let _0x4afe08=fs[_0x42ea9f(0x146)](logspath,{'withFileTypes':!![]});_0x4afe08[_0x42ea9f(0x25d)]((_0x854bbc,_0x2afbe6)=>_0x854bbc[_0x42ea9f(0x1f8)]<_0x2afbe6[_0x42ea9f(0x1f8)]?0x1:_0x2afbe6['name']<_0x854bbc[_0x42ea9f(0x1f8)]?-0x1:0x0),_0x4afe08[_0x42ea9f(0x1f4)](_0xb3c8cc=>{const _0x861d9=_0x42ea9f;if(_0xb3c8cc[_0x861d9(0x1f8)]==_0x861d9(0x212))fs['copyFileSync'](logspath+_0xb3c8cc['name'],logspath+'output-003.log');if(_0xb3c8cc[_0x861d9(0x1f8)]=='output-001.log')fs[_0x861d9(0x1e7)](logspath+_0xb3c8cc[_0x861d9(0x1f8)],logspath+_0x861d9(0x212));_0xb3c8cc['name']==_0x861d9(0x2a7)&&(fs['copyFileSync'](logspath+_0xb3c8cc[_0x861d9(0x1f8)],logspath+_0x861d9(0x28c)),fs[_0x861d9(0x1de)](logspath+_0xb3c8cc[_0x861d9(0x1f8)],''));});}}function _0x4721(){const _0x5a147a=['/:bot/history','login\x20required','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','close','Backup\x20file\x20unzipped\x20and\x20stored','store','output-001.log','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','apiKey','index.html','keys','parse','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20attempt\x20to\x20get\x20portfolio','\x20mode','config_all','padStart','address\x20already\x20in\x20use','766852NUsgdI','478885eOwWVv','update-bot','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','then','data','sockets','RSA','build','http','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','https://api.ipify.org?format=json','_data','api-eu.mixpanel.com','getHours','output-000.log','crypto','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','SIGINT','token','2FA\x20login\x20required','button','Starting\x20Balance\x20Bot\x20update','login2fa_','/upload-backup','private','resetpw_no','15\x20min','show','manual','express-fileupload','node-zip','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','decrypt','sendPortfolioTelegram','backupfile','number',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','push','reinstall','exchange','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','telegramEnabled','=>\x20Go\x20to\x20#CYA#http://','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','includes','userid','2FA\x20login\x20rejected','CoinMarketCap\x20API\x20key\x20validated','get-backup-files','Restore\x20process\x20aborted','cloneDeep','\x1b[0m','backup-full@','Invalid\x20authentication\x20token\x20(2)','lowdb','string','uuid-random','Node.js\x20v','entries','Telegram\x20error:','botname','slice','store-headless','/help\x20-\x20show\x20available\x20commands\x0a','on_','readFileSync','#RES#\x20','ipv6','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','alias','clientip','test','SIGTERM','/:bot/configuration','lastmsgtelegram','callback','backup','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','18GajASY','timestamp','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','getStartingBalances','socket','statSync','bcryptjs','remove','Logged\x20out\x20user\x20...','isDirectory','jsonwebtoken','backup-full','util','port','set','Server','replace','onepagemode','logs','find','getDate','cancelLoading','username','Crypt','post','existsSync','5545232RzhACA','secret','\x20minutes','2FA\x20required','compareSync','getFullYear','/output-000.log','createWriteStream','reinstall-bb','get-portfolio','/disable\x20-\x20disable\x20notifications\x0a','success','binary','Invalid\x20username\x20or\x20IP\x20address','publicKey','confirm-message','Idling\x20(','<b>Balance\x20Bot\x20Status:</b>\x0a','title','reset-history','error','orders','full','range','lastmsgemitted','expiry','format','Restore\x20process\x20confirmed','log','version.json','internal','config_alerts','store-settings','::1','temporary\x20token\x20generated','editMessageReplyMarkup','from','bbvReceive','temporaryAccessAllowed','text','toggle','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Temporary\x20access\x20rejected','event','\x20|\x20client:\x20...','once','disabled','pidRefreshToken','botID','split','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','toggle-bot-mode',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','map','Password\x20has\x20been\x20reset\x20to:\x20','Starting\x20Balance\x20Bot\x20reinstallation','.zip','Unauthorized\x20attempt\x20to\x20update\x20bot','max','settings.','Your\x20installation\x20is\x20already\x20up\x20to\x20date','kill','get-messages','showConfig','IPv4','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','update_no','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','DEFLATE','[ip-address]','new-disabled','restart_','referer','telegramToken','auth','\x20|\x20user:\x20...','bb/','Invalid\x20authentication\x20token\x20(1)','temp/','telegramEvents','30\x20min','type','User\x20has\x20been\x20validated','(staging)','notification','164910yRPFqa','backup-full.zip','NTBA_FIX_319','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','sendMessage','<b>Telegram\x20Bot\x20Status:</b>\x0a','portfolio_','readdirSync','temporary\x20access\x20timeout','login','version','reply','$1_$2_$3','telegramUsername','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20get\x20events',',\x20must\x20be\x20a\x204\x20digit\x20number','graphql-request','reinstall_yes','telegram','alerts','mode','exec','delete-bot','pidExpireLogin','All\x20bots\x20running\x20right\x20now','get','generateKeyPairAsync','disconnect','/:bot/performance','simple','config_orders','action','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','8977888hmCZpi','constructor','Error\x20while\x20deleting\x20config\x20files:\x20','assign','restore_yes_','download','telegram2FaApproval','Notifications\x20disabled\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','logs/','hybrid-crypto-js','stop','tempaccess_30_','catch','telegrammsg','bot-','-results.json','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','family','status','/metrics\x20-\x20show\x20bot\x20performance\x0a','off_','Unauthorized\x20attempt\x20to\x20confirm\x20message','/status\x20-\x20show\x20bot(s)\x20status\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','mixpanel','Restarting\x20Bot\x20','-----------------------------------------------------------------------------------','bb-secure.json',')\x20|\x20Bot\x20','params','\x20-\x20','write','place-order','secure','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','update','inlineKeyboard','restore-backup-file','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20update\x20settings','path','connection','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','-events.json','started','stringify','handshake','sendFile','latestversion','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','reason','isIPv4MappedAddress','temporary\x20access\x20not\x20allowed','apiPassword','apiSecret','socket.io','enabled','toIPv4MappedAddress','Access\x20enabled\x20for\x20','match','Unauthorized\x20login\x20attempt\x20(timeout)','login2fa_reject_','/start','/:bot','child_process','updatebotmanager','removeAllListeners','2FA\x20login\x20token\x20generated','\x20(2)','static','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','rmSync','0.0.0','login\x20not\x20required','getTime','headless','Bot\x20Mgr\x20>\x20','bbvNew','initclient','getPortfolio','\x1b[36m','timeshift','6b67f3d61ee94b8f5c80b4affef4c4d9','live','RSA-OAEP','BCT','logged\x20out','exit','min','\x20>\x20','getMonth','Yes','update-bb','portfolio','tempaccess_15_','reject','bbPassword','inherit','environment','Ok,\x20will\x20send\x20order\x20notifications\x20only','use','new','any','restore_no_','reload','address','add-bot','Login\x20rejected','access\x20timeout','Ok,\x20will\x20send\x20alert\x20notifications\x20only','***','Unauthorized\x20attempt\x20to\x20delete\x20alerts','delete-alerts','messages','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Notifications\x20disabled','/enable\x20-\x20enable\x20notifications\x0a','show-config','mtime','toString','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Error\x20removing\x20old\x20backup\x20files:','enable','unlinkSync','writeFileSync','length','get-logs','config/','resetHistory','metrics','endsWith','telegramIpApproval','logout','copyFileSync','All','sign','names','-config.json','server','production','Starting\x20(','stopped','hasOwnProperty','reinstall_no','backup/','init','forEach','allow','filter','value','name','build2','Restoring\x20bot(s)\x20from\x20backup','status\x20code\x20401','Bot\x20','search','files',')\x20\x20\x20|\x20Bot\x20','1000','privateKey','Backup\x20file\x20uploaded','argv','storeConfiguration','blacklist','access','785848cSAPdf','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','cancel-loading','yes','Alerts','-performance.json','join','date-fns','send','launch','emit','output-002.log','help','Unauthorized\x20attempt\x20to\x20delete\x20bot','toggle_','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20download\x20','Markdown','login\x20token\x20generated','Disabled\x20Bot\x20','Error\x20details:','Unauthorized\x20attempt\x20to\x20log\x20out','18oVWvQG','chat','/download/:type','\x20only\x0a','telegraf','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','track','emitHistory','zip/','temporary\x20access\x20rejected','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','mkdirSync','sortBy','reset-password','restart','versions','invalid\x20credentials','start','tempaccess_reject_','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20add\x20bot','ipaddr.js','Logged\x20in\x20user\x20...','all','bb-config.json','apply','bots','All\x20bots','kind','No\x20authentication\x20token','remoteAddress','getSeconds','telegramChatId','ipc','/off\x20-\x20stop\x20bot(s)\x0a','HTML','encryptedUuid','staging','config','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','toIPv4Address','tkn','env','Password\x20reset\x20rejected','2550891iOaJuC','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','get-starting-balances','/names\x20-\x20show\x20bot\x20names\x0a','isValid','request','2FA','auto','headers','startsWith','listen','accept','\x1b[34m','uuid','command','bot.js','add','order','sort','debug','bot','f2aRequired','generate','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','store-fiat','metrics_','args','Deleted\x20Bot\x20','getMinutes','************','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','sha256','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x20|\x20','user','running','#RES#','message','marketcapApi','bb-settings.json','*$1*','password','botmanager','randomBytes','|@|','defaults','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','loginRequired','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','uncaughtException','bbUsername','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','\x1b[31m','settings','function','verify','Error:\x20Invalid\x20argument\x20'];_0x4721=function(){return _0x5a147a;};return _0x4721();}async function zipFiles(_0x1416a3){const _0x159d61=_0x7d1e49;let _0x5aaeb5;if(_0x1416a3==_0x159d61(0x2fa))_0x5aaeb5=logspath;if(_0x1416a3=='backup')_0x5aaeb5=configpath;if(_0x1416a3==_0x159d61(0x2f3))_0x5aaeb5=configpath;let _0x44deaa=fs[_0x159d61(0x146)](_0x5aaeb5,{'withFileTypes':!![]});const _0x42e689=new require(_0x159d61(0x2b7))();_0x44deaa[_0x159d61(0x1f4)](_0x5a2bd2=>{const _0x15b92e=_0x159d61;if(!_0x5a2bd2[_0x15b92e(0x2f1)]()){let _0x5ed029=fs[_0x15b92e(0x2db)](_0x5aaeb5+_0x5a2bd2[_0x15b92e(0x1f8)]);if(_0x1416a3=='backup'){const _0x9683e8=/^bot-[0-9]{3}-config.json$/,_0x57a009=_0x9683e8['test'](_0x5a2bd2[_0x15b92e(0x1f8)]);if(_0x57a009){const _0x56a3f0=JSON[_0x15b92e(0x291)](_0x5ed029);if(_0x56a3f0['bot'][0x0]){_0x56a3f0[_0x15b92e(0x25f)][0x0][_0x15b92e(0x28e)]=_0x15b92e(0x1d0),_0x56a3f0[_0x15b92e(0x25f)][0x0][_0x15b92e(0x198)]='***';if(_0x56a3f0['bot'][0x0][_0x15b92e(0x197)])_0x56a3f0['bot'][0x0]['apiPassword']=_0x15b92e(0x1d0);}_0x5ed029=JSON[_0x15b92e(0x18f)](_0x56a3f0,null,0x2);}if(_0x5a2bd2['name']=='bb-settings.json'){const _0x2c4325=JSON['parse'](_0x5ed029);if(_0x2c4325[_0x15b92e(0x281)][_0x15b92e(0x27b)])_0x2c4325[_0x15b92e(0x281)][_0x15b92e(0x27b)]=![];if(_0x2c4325['settings'][_0x15b92e(0x1c2)])_0x2c4325[_0x15b92e(0x281)]['bbPassword']=_0x15b92e(0x1d0);if(_0x2c4325['settings'][_0x15b92e(0x133)])_0x2c4325[_0x15b92e(0x281)]['telegramToken']=_0x15b92e(0x1d0);if(_0x2c4325[_0x15b92e(0x281)][_0x15b92e(0x23d)])_0x2c4325['settings'][_0x15b92e(0x23d)]=null;if(_0x2c4325[_0x15b92e(0x281)][_0x15b92e(0x272)])_0x2c4325[_0x15b92e(0x281)]['marketcapApi']=_0x15b92e(0x1d0);_0x5ed029=JSON[_0x15b92e(0x18f)](_0x2c4325,null,0x2);}if(_0x5a2bd2[_0x15b92e(0x1f8)]!=_0x15b92e(0x17d))_0x42e689['file'](_0x5a2bd2[_0x15b92e(0x1f8)],_0x5ed029);}else _0x42e689['file'](_0x5a2bd2[_0x15b92e(0x1f8)],_0x5ed029);}});const _0x3adac3=_0x42e689[_0x159d61(0x261)]({'base64':![],'compression':_0x159d61(0x12e)});fs[_0x159d61(0x1de)](zippath+(_0x1416a3+_0x159d61(0x122)),_0x3adac3,_0x159d61(0x30e));}async function unzipFile(_0x300bc5,_0x2322ae){const _0x1c8cac=_0x7d1e49;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x1c8cac(0x1f4)](_0x4bb00f=>{const _0x246aba=_0x1c8cac;if(!_0x4bb00f[_0x246aba(0x2f1)]())fs[_0x246aba(0x1a9)](configpath+_0x4bb00f['name']);});const _0x1c41ea=fs[_0x1c8cac(0x2db)](_0x300bc5+_0x2322ae,_0x1c8cac(0x30e)),_0x5b6e7f=new require(_0x1c8cac(0x2b7))(_0x1c41ea,{'base64':![],'checkCRC32':!![]});Object[_0x1c8cac(0x290)](_0x5b6e7f[_0x1c8cac(0x1fe)])['forEach'](_0x3cd68e=>{const _0x6a7f3a=_0x1c8cac,_0x34cdc9=_0x5b6e7f[_0x6a7f3a(0x1fe)][_0x3cd68e];fs['writeFileSync'](configpath+_0x34cdc9[_0x6a7f3a(0x1f8)],_0x34cdc9[_0x6a7f3a(0x2a4)]);}),fs[_0x1c8cac(0x146)](temppath,{'withFileTypes':!![]})[_0x1c8cac(0x1f4)](_0xb3007e=>{const _0x721c76=_0x1c8cac;if(!_0xb3007e[_0x721c76(0x2f1)]())fs['rmSync'](temppath+_0xb3007e[_0x721c76(0x1f8)]);}),logger['debug'](_0x1c8cac(0x28a)),process[_0x1c8cac(0x20f)]({'restore':!![]},_0x3a9322=>{});}async function getPublicIp(){const _0x40fa35=_0x7d1e49;try{const _0x22b9e3=await axios['get'](_0x40fa35(0x2a3));publicip=_0x22b9e3[_0x40fa35(0x29d)]['ip'];}catch(_0x42f736){}}async function triggerAnalytics(){const _0x5593ec=_0x7d1e49;if(!publicip)await getPublicIp();const _0x276082=getBotsWithMode();let _0xabf92c=0x0;_0x276082['forEach'](_0x4c61cc=>{const _0x5a7a70=_0x1162;if(_0x4c61cc[_0x5a7a70(0x174)]===_0x5a7a70(0x19a))_0xabf92c++;});const _0x522d4b=getBotExchanges();mixpanel[_0x5593ec(0x223)](_0x5593ec(0x2f7),{'distinct_id':settings[_0x5593ec(0x2c7)],'ip':publicip,'version':serverversion,'numbots':_0x276082['length'],'numbotsenabled':_0xabf92c,'exchanges':_0x522d4b,'environment':environment});}async function getMessages(){const _0x2c4440=_0x7d1e49,_0x4801ea='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x476dc4=new GraphQLClient(_0x4801ea),_0x5b1323={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x25a55c=serverversion[_0x2c4440(0x11b)]('.'),_0x387e39=_0x25a55c[0x0]+'.'+_0x25a55c[0x1],_0x3aa96d=Math[_0x2c4440(0x1ba)](settings[_0x2c4440(0x2e4)],settings[_0x2c4440(0x31a)]),_0x3f9366={'last':parseInt(_0x3aa96d),'bbm':_0x387e39},_0x4b3094=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x571284;try{_0x571284=await _0x476dc4[_0x2c4440(0x250)](_0x4b3094,_0x3f9366,_0x5b1323);}catch(_0x2c8e22){}if(_0x571284&&_0x571284[_0x2c4440(0x1d3)]){let _0x331c06=settings[_0x2c4440(0x2e4)];newMessages=[];for(const _0x24ad3e of _0x571284[_0x2c4440(0x1d3)]){newMessages[_0x2c4440(0x2bf)](_0x24ad3e);let _0x8b8cae=![];_0x24ad3e[_0x2c4440(0x1af)]&&(updateSetting(_0x2c4440(0x192),_0x24ad3e[_0x2c4440(0x1af)]),_0x8b8cae=isNewerVersion(serverversion,_0x24ad3e[_0x2c4440(0x1af)])||serverversion==_0x24ad3e['bbvNew']);if(!_0x8b8cae&&_0x24ad3e[_0x2c4440(0x2bc)]>_0x331c06){if(_0x24ad3e[_0x2c4440(0x10f)]===_0x2c4440(0x1c8)||serverversion[_0x2c4440(0x254)](_0x24ad3e[_0x2c4440(0x10f)])){let _0x5c9ec5=''+_0x24ad3e[_0x2c4440(0x314)]+'\x0a\x0a'+_0x24ad3e['message'];const _0x1e6ab9=await sendTelegramMsg(toTelegramMarkdown(_0x5c9ec5),_0x2c4440(0x218));if(_0x1e6ab9)_0x331c06=_0x24ad3e[_0x2c4440(0x2bc)];}}}updateAvailable=isNewerVersion(settings[_0x2c4440(0x192)],serverversion),updateSetting('lastmsgtelegram',_0x331c06),emitMessages();}}function emitMessages(){const _0x521e9d=_0x7d1e49,_0x2a7d7d=settings[_0x521e9d(0x31a)];let _0x2f0c31=[];newMessages[_0x521e9d(0x1f4)](_0x3d74d7=>{const _0x38d6ce=_0x521e9d;_0x3d74d7[_0x38d6ce(0x2bc)]>_0x2a7d7d&&_0x2f0c31[_0x38d6ce(0x2bf)](_0x3d74d7);}),_0x2f0c31[_0x521e9d(0x1df)]>0x0&&getAllClients()['forEach'](_0x36f4f5=>{const _0x56bae2=_0x521e9d;getSocket(_0x36f4f5['id'])['emit'](_0x56bae2(0x271),_0x2f0c31);});}function confirmMessage(_0x28828d){const _0x133b5a=_0x7d1e49;updateSetting(_0x133b5a(0x31a),Number(_0x28828d));}function isNewerVersion(_0x22ec70,_0x4dc3ab){const _0x11d870=_0x7d1e49,_0x4888e=_0x4dc3ab[_0x11d870(0x11b)]('.'),_0x267d19=_0x22ec70[_0x11d870(0x11b)]('.');for(var _0x2a72fe=0x0;_0x2a72fe<_0x267d19[_0x11d870(0x1df)];_0x2a72fe++){const _0x33e2a0=~~_0x267d19[_0x2a72fe],_0x234e34=~~_0x4888e[_0x2a72fe];if(_0x33e2a0>_0x234e34)return!![];if(_0x33e2a0<_0x234e34)return![];}return![];}function toTelegramMarkdown(_0x2f7257){const _0x43ac8c=_0x7d1e49,_0x2e18f3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x39c7b7=/\*{2}(.+?)\*{2}/gim;return _0x2f7257=_0x2f7257[_0x43ac8c(0x2f8)](_0x2e18f3,_0x43ac8c(0x14b))[_0x43ac8c(0x2f8)](_0x39c7b7,_0x43ac8c(0x274)),_0x2f7257;}async function validateConfigFile(){const _0x53f9f7=_0x7d1e49,_0x31897d=dbConfig[_0x53f9f7(0x159)](_0x53f9f7(0x237))[_0x53f9f7(0x229)](_0x53f9f7(0x11a))[_0x53f9f7(0x1f7)]()||[];if(_0x31897d['length']==0x0){let _0x5785af=0x0,_0x241cc0=[];const _0x3eafee=/^bot-([0-9]{3})-config.json$/,_0x59b433=fs['readdirSync'](configpath);_0x59b433[_0x53f9f7(0x1f4)](_0x3b7367=>{const _0x458373=_0x53f9f7,_0x3d0df3=_0x3eafee[_0x458373(0x155)](_0x3b7367);if(_0x3d0df3){const _0x2da6ed=_0x3d0df3[0x1];let _0x2a2269=getBotAttributes(_0x2da6ed);_0x241cc0[_0x458373(0x2bf)]({'botID':_0x2da6ed,'botname':_0x2a2269[_0x458373(0x2d6)],'status':'disabled','live':_0x458373(0x1ef)}),_0x5785af++;}}),_0x5785af!=0x0&&(dbConfig['get']('bots')[_0x53f9f7(0x164)](_0x241cc0)[_0x53f9f7(0x181)](),config=_0x241cc0,restoredConfigFile=_0x5785af);}}async function restoreConfigNotify(_0xff05a6){const _0x51ebd=_0x7d1e49;let _0x557555;if(restoredConfigFile==0x1)_0x557555=_0x51ebd(0x184);else _0x557555=_0x51ebd(0x216);if(_0xff05a6)io['to']('botmanager')[_0x51ebd(0x211)](_0x51ebd(0x13e),_0x557555);else{logger['simple'](_0x51ebd(0x17c)),logger[_0x51ebd(0x15d)](_0x557555),logger['simple'](_0x51ebd(0x17c)),logger[_0x51ebd(0x15d)]('');if(tgBot&&settings[_0x51ebd(0x23d)]&&settings['telegramEvents']!=_0x51ebd(0x317))await sendTelegram(settings[_0x51ebd(0x23d)],'Bot\x20Mgr\x20>\x20'+_0x557555);}}function validateCredentials(_0x5bf154,_0x291639){const _0x2654d0=_0x7d1e49;if(_0x5bf154[_0x2654d0(0x2fe)]==settings[_0x2654d0(0x27e)]&&bcrypt[_0x2654d0(0x306)](_0x5bf154['password'],settings[_0x2654d0(0x1c2)])){if(settings[_0x2654d0(0x260)])return{'allow':![],'reason':_0x2654d0(0x2ac),'token':null};else{const _0x2b08eb=generateLoginToken(_0x291639);return{'allow':!![],'reason':_0x2654d0(0x219),'token':_0x2b08eb};}}else return{'allow':![],'reason':_0x2654d0(0x22d),'token':null};}function refreshToken(_0x89fb8){const _0x29cca8=_0x7d1e49,_0x5624ad=generateLoginToken(_0x89fb8);return{'allow':!![],'reason':_0x29cca8(0x219),'token':_0x5624ad};}function validateAccess(_0x173271,_0x2ff0f4,_0x1f09d0){const _0x5526d1=_0x7d1e49,_0x26d50f=_0x1f09d0?_0x1f09d0:devices[_0x2ff0f4]['ip'];let _0xe68729;const _0x4478b9=_0xf7031b=>{const _0x249e63=_0x1162;if(settings['loginRequired']){if(settings[_0x249e63(0x260)]){if(telegram2FaApproved(_0x2ff0f4)){const _0x8f545a=generateLoginToken(_0x2ff0f4);return{'allow':!![],'reason':_0x249e63(0x1a5),'token':_0x8f545a};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0xe68729=validToken(_0xf7031b,_0x2ff0f4),_0xe68729['hasOwnProperty'](_0x249e63(0x30d))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0xf7031b}:{'allow':![],'reason':_0x249e63(0x286),'token':null};}else return{'allow':!![],'reason':_0x249e63(0x1ab),'token':null};};if(settings['whitelistEnabled']){let _0x1a0569=[...settings['whitelist'],_0x5526d1(0x10b),'::ffff:127.0.0.1','127.0.0.1'];if(_0x1a0569[_0x5526d1(0x2c6)](_0x26d50f))return _0x4478b9(_0x173271);else{_0xe68729=validToken(_0x173271,_0x2ff0f4);if(_0xe68729['hasOwnProperty'](_0x5526d1(0x30d)))return _0x4478b9(_0x173271);else{if(telegramIpApproved(_0x2ff0f4)){const _0x565cd2=generateToken(_0x2ff0f4);return _0xe68729=_0x4478b9(_0x173271),_0xe68729['allow']?{'allow':!![],'reason':_0x5526d1(0x10c),'token':_0x565cd2}:_0xe68729;}else return settings[_0x5526d1(0x110)]?{'allow':![],'reason':_0x5526d1(0x305),'token':null}:{'allow':![],'reason':_0x5526d1(0x196),'token':null};}}}else return _0x4478b9(_0x173271);}function timelyDecrypt(_0x25caac,_0xdab2c,_0x2467a='@'){const _0x1aee0f=_0x7d1e49;if(_0x25caac)try{const _0x54fbca=crypt['decrypt'](secure[_0x1aee0f(0x201)],_0x25caac)[_0x1aee0f(0x271)],_0x1a539=_0x54fbca[_0x1aee0f(0x11b)](_0x2467a)[0x0],_0x351b48=_0x54fbca['split'](_0x2467a)[0x1],_0x163f42=new Date()[_0x1aee0f(0x1ac)]();if(_0xdab2c){if(_0x163f42-_0x351b48<maxSecretAge*0x3e8)return _0x1a539;else return![];}else return _0x1a539;}catch(_0x481cf2){return![];}else return![];}const validToken=(_0x2441c8,_0x469c55)=>{const _0x1bf844=_0x7d1e49,_0x4ef21b=devices[_0x469c55]['ip'];if(!_0x2441c8)return{'error':_0x1bf844(0x23a)};for(let _0x3acdaf of blacklist){if(_0x3acdaf[_0x1bf844(0x2ab)]==_0x2441c8)return{'error':'Token\x20blacklisted'};}let _0x4ec111;try{_0x4ec111=jwt[_0x1bf844(0x283)](_0x2441c8,secure[_0x1bf844(0x303)]+_0x469c55);}catch{return{'error':_0x1bf844(0x137)};}if(!_0x4ec111[_0x1bf844(0x1f0)]('clientip')&&!_0x4ec111[_0x1bf844(0x1f0)]('username')||!_0x4ec111[_0x1bf844(0x1f0)]('exp'))return{'error':_0x1bf844(0x2cf)};if(!_0x4ec111['hasOwnProperty']('username')&&_0x4ec111[_0x1bf844(0x1f0)](_0x1bf844(0x2e0))){const {clientip:_0x147b9f}=_0x4ec111;return _0x4ef21b==_0x147b9f?{'success':_0x1bf844(0x13c)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4ec111['hasOwnProperty']('username')&&_0x4ec111[_0x1bf844(0x1f0)](_0x1bf844(0x2e0))){const {username:_0x483cda,clientip:_0x1deb2a}=_0x4ec111;return settings[_0x1bf844(0x27e)]==_0x483cda&&_0x4ef21b==_0x1deb2a?{'success':_0x1bf844(0x13c)}:{'error':_0x1bf844(0x30f)};}}},generateLoginToken=_0x565fdb=>{const _0x585cc7=_0x7d1e49;if(_0x565fdb){const _0x1c4fc6=devices[_0x565fdb]['ip'];return jwt[_0x585cc7(0x1e9)]({'username':settings[_0x585cc7(0x27e)],'clientip':_0x1c4fc6},secure[_0x585cc7(0x303)]+_0x565fdb,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x2ba1b5=>{const _0xaa3755=_0x7d1e49;if(_0x2ba1b5){const _0x3eaeb6=devices[_0x2ba1b5]['ip'];return jwt[_0xaa3755(0x1e9)]({'clientip':_0x3eaeb6},secure[_0xaa3755(0x303)]+_0x2ba1b5,{'expiresIn':devices[_0x2ba1b5][_0xaa3755(0x1e5)][_0xaa3755(0x31b)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x4551a4=>{const _0x2542cd=_0x7d1e49;let _0x36df7a=![];return devices[_0x4551a4][_0x2542cd(0x1e5)]&&devices[_0x4551a4][_0x2542cd(0x1e5)][_0x2542cd(0x31b)]!='reject'&&(_0x36df7a=devices[_0x4551a4][_0x2542cd(0x1e5)][_0x2542cd(0x2e0)]==devices[_0x4551a4]['ip']&&new Date()[_0x2542cd(0x1ac)]()-devices[_0x4551a4]['telegramIpApproval'][_0x2542cd(0x2e9)]<devices[_0x4551a4]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x36df7a;},telegram2FaApproved=_0x5e226b=>{const _0x5c4f98=_0x7d1e49;let _0x3dd842=![];return devices[_0x5e226b]['telegram2FaApproval']&&devices[_0x5e226b][_0x5c4f98(0x167)][_0x5c4f98(0x31b)]!=_0x5c4f98(0x1c1)&&(_0x3dd842=devices[_0x5e226b][_0x5c4f98(0x167)][_0x5c4f98(0x2e0)]==devices[_0x5e226b]['ip']&&new Date()[_0x5c4f98(0x1ac)]()-devices[_0x5e226b][_0x5c4f98(0x167)][_0x5c4f98(0x2e9)]<devices[_0x5e226b][_0x5c4f98(0x167)][_0x5c4f98(0x31b)]*0x3c*0x3e8),_0x3dd842;},normalizeIP=_0x4c5837=>{const _0x41bfd=_0x7d1e49;let _0x4a4989=null,_0x1059af=null;if(ipaddr[_0x41bfd(0x24f)](_0x4c5837)){const _0x1b8ad6=ipaddr[_0x41bfd(0x291)](_0x4c5837);_0x1b8ad6[_0x41bfd(0x239)]()===_0x41bfd(0x2dd)?(_0x1b8ad6[_0x41bfd(0x195)]()&&(_0x4a4989=_0x1b8ad6[_0x41bfd(0x247)]()[_0x41bfd(0x1d9)]()),_0x1059af=_0x1b8ad6[_0x41bfd(0x1d9)]()):(_0x4a4989=_0x1b8ad6[_0x41bfd(0x1d9)](),_0x1059af=_0x1b8ad6[_0x41bfd(0x19b)]()[_0x41bfd(0x1d9)]());}return{'show':_0x4a4989?_0x4a4989:_0x1059af,'store':_0x1059af};};function formatDate(_0x1aee92){const _0x2f939f=_0x7d1e49;return _0x1aee92[_0x2f939f(0x307)]()+'/'+(_0x1aee92[_0x2f939f(0x1bc)]()+0x1)[_0x2f939f(0x1d9)]()[_0x2f939f(0x296)](0x2,'0')+'/'+_0x1aee92[_0x2f939f(0x2fc)]()[_0x2f939f(0x1d9)]()[_0x2f939f(0x296)](0x2,'0')+'\x20'+_0x1aee92[_0x2f939f(0x2a6)]()['toString']()[_0x2f939f(0x296)](0x2,'0')+':'+_0x1aee92['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x1aee92[_0x2f939f(0x23c)]()[_0x2f939f(0x1d9)]()[_0x2f939f(0x296)](0x2,'0');}function sleep(_0x4bff85){return new Promise(_0x2c5242=>setTimeout(_0x2c5242,_0x4bff85));}