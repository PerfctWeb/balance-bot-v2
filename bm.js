const _0x9e0e44=_0x1dff;(function(_0x5b9a07,_0xdcfccb){const _0x13c89f=_0x1dff,_0x48ef59=_0x5b9a07();while(!![]){try{const _0x40106e=-parseInt(_0x13c89f(0x17b))/0x1*(-parseInt(_0x13c89f(0xfb))/0x2)+parseInt(_0x13c89f(0x86))/0x3*(-parseInt(_0x13c89f(0x126))/0x4)+-parseInt(_0x13c89f(0xad))/0x5*(-parseInt(_0x13c89f(0xb2))/0x6)+-parseInt(_0x13c89f(0x12c))/0x7*(-parseInt(_0x13c89f(0xf7))/0x8)+parseInt(_0x13c89f(0xd0))/0x9*(-parseInt(_0x13c89f(0x1dd))/0xa)+-parseInt(_0x13c89f(0xcf))/0xb*(parseInt(_0x13c89f(0x129))/0xc)+-parseInt(_0x13c89f(0x1ac))/0xd*(-parseInt(_0x13c89f(0x12d))/0xe);if(_0x40106e===_0xdcfccb)break;else _0x48ef59['push'](_0x48ef59['shift']());}catch(_0x40921c){_0x48ef59['push'](_0x48ef59['shift']());}}}(_0x2c74,0xa660d));const _0x37154a=function(){let _0x5df9f1=!![];return function(_0x36d6da,_0x4850b5){const _0x206eee=_0x5df9f1?function(){if(_0x4850b5){const _0x4f98cf=_0x4850b5['apply'](_0x36d6da,arguments);return _0x4850b5=null,_0x4f98cf;}}:function(){};return _0x5df9f1=![],_0x206eee;};}(),_0xaa1210=_0x37154a(this,function(){const _0x7ce12c=_0x1dff;return _0xaa1210[_0x7ce12c(0x1d3)]()[_0x7ce12c(0x112)](_0x7ce12c(0x189))['toString']()[_0x7ce12c(0xde)](_0xaa1210)[_0x7ce12c(0x112)](_0x7ce12c(0x189));});_0xaa1210();'use strict';process[_0x9e0e44(0xda)][_0x9e0e44(0x1c1)]=0x1;const childProcess=require(_0x9e0e44(0xa1)),fs=require('fs'),fns=require(_0x9e0e44(0x10c)),low=require(_0x9e0e44(0x1d9)),FileSync=require(_0x9e0e44(0xeb)),path=require(_0x9e0e44(0x13f)),crypto=require(_0x9e0e44(0x170)),Crypt=require(_0x9e0e44(0x121))[_0x9e0e44(0xa5)],RSA=require(_0x9e0e44(0x121))[_0x9e0e44(0xc7)],bcrypt=require('bcryptjs'),jwt=require(_0x9e0e44(0x1f2)),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require(_0x9e0e44(0x136))[_0x9e0e44(0x169)],ipaddr=require(_0x9e0e44(0xf2)),argv=require(_0x9e0e44(0x164))(process['argv'][_0x9e0e44(0x1eb)](0x2))[_0x9e0e44(0x1d6)],uuidRandom=require('uuid-random'),Mixpanel=require(_0x9e0e44(0xba)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),PORT=argv[_0x9e0e44(0x177)]||_0x9e0e44(0x1ae),pattern=/^[0-9]{2,4}$/;!pattern[_0x9e0e44(0x10e)](PORT)&&(console['log'](_0x9e0e44(0xed)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv[_0x9e0e44(0xc6)]||null,userID=argv[_0x9e0e44(0xd9)]||'';let bbpath=_0x9e0e44(0xdb),bbpath2='';const botfile=_0x9e0e44(0x1a3),configfile=_0x9e0e44(0x196),settingsfile='bb-settings.json',securefile='bb-secure.json';let validInstallation=!![];!fs[_0x9e0e44(0xae)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x9e0e44(0xe2)),configpath=userID?bbpath+_0x9e0e44(0x8c)+userID+'/':bbpath+_0x9e0e44(0x8c),configbackuppath=configpath+_0x9e0e44(0x1e1);!fs[_0x9e0e44(0xae)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x9e0e44(0x1ab)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x9e0e44(0xdc)]({'bots':[]})[_0x9e0e44(0xb9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x9e0e44(0xdc)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x9e0e44(0x1cb)}})[_0x9e0e44(0xb9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x9e0e44(0xdc)]({'secure':{},'blacklist':[]})[_0x9e0e44(0xb9)]();let crypt=new Crypt({'md':_0x9e0e44(0x9a),'rsaStandard':_0x9e0e44(0x1bd)});const saltRounds=0xa,mixpanel=Mixpanel[_0x9e0e44(0xd1)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x9e0e44(0x1e7)}),analytics=Analytics({'app':_0x9e0e44(0x1c4),'plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});function _0x2c74(){const _0x4debbf=['static','lowdb/adapters/FileSync','\x20>\x20','Error:\x20Invalid\x20argument\x20','filter','Unauthorized\x20attempt\x20to\x20delete\x20alerts','\x20only\x0a','message','ipaddr.js','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20logs','Your\x20installation\x20is\x20already\x20up\x20to\x20date','padStart','3535960gADigM','place-order','login\x20token\x20generated','delete-alerts','2iCAkyh','/:bot/portfolio','unlinkSync','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','send','</b>\x20?','telegramChatId','toggle-bot-mode','login','remove','::1','headless','sign','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','stopPolling','success','date-fns','User\x20has\x20been\x20validated','test','/help\x20-\x20show\x20available\x20commands\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','onText','search','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','emit','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20log\x20out','404\x20Not\x20Found','started','headers','timeshift','updatebotmanager','telegramEvents','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','alias','/disable\x20-\x20disable\x20notifications\x0a','getMinutes','hybrid-crypto-js','Notifications\x20disabled\x0a','enabled\x20Bot\x20','randomBytes','Bot\x20Mgr\x20>\x20','2257252mVqCfq','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','getHours','258432wuULxJ','find','isDirectory','21bQUWGN','770cOsPpc','Unauthorized\x20attempt\x20to\x20update\x20settings','Temporary\x20access\x20rejected','starting\x20bot\x20|\x20Bot\x20','blacklist','temporary\x20access\x20not\x20allowed','getMonth','inherit','yes','@analytics/google-analytics-v3','************','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','removeAllListeners','order','server','privateKey','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','path','/:bot/configuration','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','alerts','settings','exit','reload','reset-password','add-bot','login\x20required','https://hodlerhacks.com','expiry','split','getDate','replace','5\x20min','Invalid\x20authentication\x20token\x20(2)','error','number','sortBy','chat','store-configuration','connected','bot','answerCallbackQuery','messages','notification','remoteAddress','Notifications\x20disabled','-performance.json','join','running','mode','createServer','getPortfolio','any','placeOrder','yargs/yargs','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','update-bb','isValid','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','default','type','status','Notifications\x20enabled\x0a','sendPortfolioTelegram','restarting\x20Bot\x20','pidExpireLogin','crypto','https://api.ipify.org?format=json','login\x20token\x20valid','all','accept','Allow\x20login\x20from\x20IP\x20address\x20<b>','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','port','referer','hex','disabled','716693eimbWr','telegram','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','removeListener','kill','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','writeFileSync','publicKey','bot-','invalid\x20credentials','30\x20min','getTime','Starting\x20Balance\x20Bot\x20update','apiKey','(((.+)+)+)+$','storeConfiguration','verify','callback_query','username','Token\x20blacklisted','botID','new-disabled','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','index.html','\x20|\x20','live','bb-config.json','Markdown','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Invalid\x20IP\x20address','name','-results.json','/status\x20-\x20show\x20bot(s)\x20status\x0a','copyFileSync','password','get','2FA\x20login\x20required','pidRefreshToken','$1_$2_$3','bot.js','disconnect','Orders','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20confirm\x20message','push','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','mkdirSync','167063HVHbZU','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','3000','toIPv4Address','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/off\x20-\x20stop\x20bot(s)\x0a','Notifications\x20types:\x20','value','request','reason','get-starting-balances','botname',':\x20Bot\x20Mgr\x20>\x20','from','access','get-messages','2FA','RSA-OAEP','bots','data','event','NTBA_FIX_319','once','showname','Balance\x20Bot','timestamp','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','readdirSync','sendFile','Login\x20rejected','cancelLoading','0.0.0','sendMessage','telegram2FaApproval','Password\x20reset\x20rejected','All\x20bots','version','get-logs','catch','toString','latestversion','token','argv','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','map','lowdb','hashSync','SIGTERM','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','10WSKQhK','exp','track','bbvNew','backup/','loginRequired','Invalid\x20Telegram\x20token','decrypt','telegramToken','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','api-eu.mixpanel.com','bbUsername','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','15\x20min','slice','bbvReceive','Bot\x20','/:bot','telegramEnabled','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','telegramUsername','jsonwebtoken','handshake','login\x20not\x20required','No\x20authentication\x20token','new','clientip','sockets','randomFillSync','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','2FA\x20required','socket.io','stop','build2','orders','access\x20timeout','/names\x20-\x20show\x20bot\x20names\x0a','1000','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','-----------------------------------------------------------------------------------','manual','compareSync','title','3zUBeAj','userid','show','Invalid\x20authentication\x20token\x20(1)','kind','allow','config/','log','logout','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20attempt\x20to\x20add\x20bot','update-bot','getSeconds','delete-bot','deleted\x20Bot\x20','conn','All\x20bots\x20running\x20right\x20now','function','isIPv4MappedAddress','add','sha256','node-telegram-bot-api','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','parse','secure','then','lastmsgtelegram','child_process','includes','Invalid\x20username\x20or\x20IP\x20address','Alerts','Crypt','build','readFileSync','assign','Ok,\x20will\x20send\x20alert\x20notifications\x20only','botmanager','idling\x20bot\x20\x20\x20|\x20Bot\x20','startsWith','5DtoRug','existsSync','cancel-loading','listen','telegramIpApproval','1266774dscFPx','length','Balance\x20Bot\x20Server','Unauthorized\x20attempt\x20to\x20get\x20portfolio','match','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','secret','write','mixpanel','error\x20while\x20deleting\x20config\x20files:\x20','enabled','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','restart','-config.json','settings.','bbPassword','generateKeyPairAsync','auto','storeHeadless','temporary\x20token\x20generated','host','RSA','min','args','use','f2aRequired','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','getFullYear','396YiHayF','8455662HeDOMm','init','reject','logged\x20out','No\x20bots\x20running\x20right\x20now','whitelist','forEach','hasOwnProperty','auth','user','env','bb/','defaults','disabled\x20Bot\x20','constructor','\x20minutes','HTML','uuid','clients','keys','\x20to\x20','lastmsgemitted','\x20mode','temporaryAccessAllowed','stopped','confirm-message'];_0x2c74=function(){return _0x4debbf;};return _0x2c74();}let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x9e0e44(0x1d0)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x9e0e44(0x160)](app);app[_0x9e0e44(0xca)](express[_0x9e0e44(0xea)](path['join'](__dirname,bbpath2,'build2'))),app[_0x9e0e44(0xca)](express[_0x9e0e44(0xea)](path[_0x9e0e44(0x15d)](__dirname,bbpath2,_0x9e0e44(0xa6)))),app[_0x9e0e44(0x19f)]('/',function(_0x56b430,_0x55325e){const _0x4c7c58=_0x9e0e44;_0x55325e[_0x4c7c58(0x1c8)](path[_0x4c7c58(0x15d)](__dirname,bbpath2,_0x4c7c58(0x1fe),_0x4c7c58(0x193)));}),app[_0x9e0e44(0x19f)](_0x9e0e44(0x1ee),function(_0x152045,_0x3e7a48){const _0x1f6ca8=_0x9e0e44;_0x3e7a48['sendFile'](path[_0x1f6ca8(0x15d)](__dirname,bbpath2,_0x1f6ca8(0xa6),_0x1f6ca8(0x193)));}),app['get'](_0x9e0e44(0xfc),(_0x4bb306,_0x2f7960)=>{const _0x23774e=_0x9e0e44;_0x2f7960[_0x23774e(0x1c8)](path[_0x23774e(0x15d)](__dirname,bbpath2,'build','index.html'));}),app[_0x9e0e44(0x19f)]('/:bot/performance',(_0x226ef7,_0x84f7a)=>{const _0x86279b=_0x9e0e44;_0x84f7a['sendFile'](path[_0x86279b(0x15d)](__dirname,bbpath2,_0x86279b(0xa6),_0x86279b(0x193)));}),app['get']('/:bot/coins',(_0x56273f,_0x30a723)=>{const _0x3ddccb=_0x9e0e44;_0x30a723['sendFile'](path[_0x3ddccb(0x15d)](__dirname,bbpath2,_0x3ddccb(0xa6),_0x3ddccb(0x193)));}),app[_0x9e0e44(0x19f)]('/:bot/history',(_0x863daa,_0x4c4c6b)=>{const _0x52489c=_0x9e0e44;_0x4c4c6b[_0x52489c(0x1c8)](path[_0x52489c(0x15d)](__dirname,bbpath2,_0x52489c(0xa6),'index.html'));}),app[_0x9e0e44(0x19f)](_0x9e0e44(0x140),(_0x3fade7,_0x2a12fc)=>{const _0x4ba0a3=_0x9e0e44;_0x2a12fc[_0x4ba0a3(0x1c8)](path[_0x4ba0a3(0x15d)](__dirname,bbpath2,'build',_0x4ba0a3(0x193)));}),app['get']('/:bot/support',(_0x5d8c4e,_0x573e34)=>{const _0x1eba7d=_0x9e0e44;_0x573e34[_0x1eba7d(0x1c8)](path[_0x1eba7d(0x15d)](__dirname,bbpath2,_0x1eba7d(0xa6),_0x1eba7d(0x193)));});if(HOST)http[_0x9e0e44(0xb0)](PORT,HOST);else http[_0x9e0e44(0xb0)](PORT);const io=require(_0x9e0e44(0x1fc))(http,{}),TelegramBot=require(_0x9e0e44(0x9b));let tgBot;if(settings[_0x9e0e44(0x1e5)]&&settings[_0x9e0e44(0x1e5)]!=''&&settings[_0x9e0e44(0x1f1)]&&settings['telegramUsername']!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x4af68d=_0x9e0e44;console[_0x4af68d(0x8d)](''),console[_0x4af68d(0x8d)](_0x4af68d(0x82)),logging(_0x4af68d(0x17d)+PORT),console[_0x4af68d(0x8d)](_0x4af68d(0x82));if(config['length']!=0x0)config[_0x4af68d(0xd6)](_0x408fc8=>{const _0x385334=_0x4af68d;if(_0x408fc8[_0x385334(0x16b)]==_0x385334(0xbc)||_0x408fc8[_0x385334(0x16b)]==_0x385334(0x1f6))logging(_0x385334(0x130)+_0x408fc8['botID']+'\x20|\x20'+_0x408fc8[_0x385334(0x1b7)]),startBot([_0x408fc8[_0x385334(0x18f)],userID],{'cwd':bbpath},function(_0x24e716){if(_0x24e716)logging(_0x24e716);});else(_0x408fc8[_0x385334(0x16b)]=='disabled'||_0x408fc8[_0x385334(0x16b)]=='new-disabled')&&logging(_0x385334(0xab)+_0x408fc8[_0x385334(0x18f)]+_0x385334(0x194)+_0x408fc8[_0x385334(0x1b7)]);});else!newBot&&console[_0x4af68d(0x8d)](_0x4af68d(0x1f0));if(newBot)addBot();console[_0x4af68d(0x8d)](_0x4af68d(0x82)),console[_0x4af68d(0x8d)]('');}function startSocket(){io['on']('connection',_0x31a072=>{const _0x278f21=_0x1dff;let _0x4cd141,_0x100239,_0x11daca,_0x53a18c,_0x5690c4;const _0x1f23cf=_0x31a072['handshake'][_0x278f21(0x119)][_0x278f21(0x178)];_0x100239=_0x1f23cf[_0x278f21(0xb6)](/bot[0-9]{3}/);if(_0x100239)_0x11daca=_0x100239[0x0][_0x278f21(0xb6)](/[0-9]{3}/);if(_0x11daca)_0x4cd141=_0x11daca[0x0];else _0x4cd141='botmanager';const _0x48146f=_0x31a072[_0x278f21(0x1f3)][_0x278f21(0xd8)]['encryptedUuid'];if(!_0x48146f)_0x31a072[_0x278f21(0x114)]('status',{'publicKey':secure[_0x278f21(0x182)]});else{_0x53a18c=timelyDecrypt(_0x48146f,![]);if(!_0x53a18c)_0x31a072['emit'](_0x278f21(0x16b),{'publicKey':secure[_0x278f21(0x182)]});else{_0x5690c4=normalizeIP(_0x31a072[_0x278f21(0x95)][_0x278f21(0x15a)])['store'];if(!devices[_0x53a18c])devices[_0x53a18c]={'uuid':_0x53a18c,'access':{'token':null}};devices[_0x53a18c]['ip']=_0x5690c4;const _0x5be2b0=addClient(_0x31a072['id'],_0x53a18c,_0x4cd141);setAccess(_0x5be2b0),emitMessages(),_0x31a072['on'](_0x278f21(0x103),_0x4d7eef=>{const _0x5f6dee=_0x278f21,_0x54e25e=timelyDecrypt(_0x4d7eef[_0x5f6dee(0x19e)]);if(_0x54e25e){_0x4d7eef={'username':_0x4d7eef[_0x5f6dee(0x18d)],'password':_0x54e25e},devices[_0x53a18c][_0x5f6dee(0x1ba)]=validateCredentials(_0x4d7eef,_0x53a18c);if(devices[_0x53a18c][_0x5f6dee(0x1ba)][_0x5f6dee(0x8b)]==![]&&devices[_0x53a18c]['access']['reason']==_0x5f6dee(0x1a0))_0x31a072[_0x5f6dee(0x114)]('status',{'access':devices[_0x53a18c][_0x5f6dee(0x1ba)]}),loginAccess2FA(_0x53a18c,_0x5690c4);else{if(devices[_0x53a18c][_0x5f6dee(0x1ba)][_0x5f6dee(0x8b)]==![]&&devices[_0x53a18c][_0x5f6dee(0x1ba)]['reason']=='invalid\x20credentials')_0x31a072['emit']('status',{'access':devices[_0x53a18c][_0x5f6dee(0x1ba)]});else devices[_0x53a18c][_0x5f6dee(0x1ba)]['allow']&&devices[_0x53a18c][_0x5f6dee(0x1ba)][_0x5f6dee(0x1b5)]==_0x5f6dee(0xf9)&&(getClientsWithUuid(_0x53a18c)[_0x5f6dee(0xd6)](_0x467cbe=>{setAccess(_0x467cbe);}),setTokenRefresh(_0x53a18c),setSessionTimeout(_0x5f6dee(0x103),_0x53a18c));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x31a072['on'](_0x278f21(0x146),()=>{resetPassword();}),_0x31a072['on'](_0x278f21(0x1a4),_0x3bad9f=>{removeClient(_0x31a072['id']);});}}});}function initClient(_0x249fed){const _0x16c17b=_0x9e0e44;if(_0x249fed!=_0x16c17b(0xaa)&&config[_0x16c17b(0x188)]!=''){if(pid[_0x249fed])pid[_0x249fed]['send']({'function':'initclient','args':null});}}function getSocket(_0x650e38){const _0x57ffea=_0x9e0e44;return io[_0x57ffea(0x1f8)][_0x57ffea(0x1f8)][_0x57ffea(0x19f)](_0x650e38);}function setAccess(_0xed8ba5){const _0x37da74=_0x9e0e44,_0x151eac=getSocket(_0xed8ba5['id']),_0x30b1cb=_0xed8ba5[_0x37da74(0xe1)],_0x4d7201=_0xed8ba5[_0x37da74(0x156)];devices[_0x30b1cb][_0x37da74(0x1ba)]=validateAccess(devices[_0x30b1cb]['access']['token'],_0x30b1cb),_0x151eac[_0x37da74(0x15d)](_0x30b1cb);if(devices[_0x30b1cb]['access'][_0x37da74(0x8b)]){_0x151eac[_0x37da74(0x15d)](_0x4d7201);if(_0x4d7201=='botmanager')initializeSocketBotManager(_0x151eac);else initializeSocketBot(_0x151eac);initClient(_0x4d7201);}devices[_0x30b1cb][_0x37da74(0x1ba)]['token']&&devices[_0x30b1cb][_0x37da74(0x1ba)][_0x37da74(0x1b5)]==_0x37da74(0xc5)&&setSessionTimeout(_0x37da74(0x1bc),_0x30b1cb),devices[_0x30b1cb]['access']['token']&&devices[_0x30b1cb][_0x37da74(0x1ba)][_0x37da74(0x1b5)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x37da74(0x103),_0x30b1cb),_0x151eac['emit'](_0x37da74(0x16b),{'status':_0xed8ba5[_0x37da74(0x13c)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x30b1cb][_0x37da74(0x1ba)],'externalip':devices[_0x30b1cb]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x37da74(0x87)],'validInstallation':validInstallation}),devices[_0x30b1cb][_0x37da74(0x1ba)][_0x37da74(0x8b)]==![]&&devices[_0x30b1cb][_0x37da74(0x1ba)]['reason']==_0x37da74(0x1fb)&&temporaryAccess2FA(_0x30b1cb,devices[_0x30b1cb]['ip']);}function setSessionTimeout(_0x56b41c,_0x32aea2){const _0x56df3e=_0x9e0e44;let _0xac039;if(_0x56b41c==_0x56df3e(0x103))_0xac039=loginExpiry*0x3c*0x3e8;else _0xac039=devices[_0x32aea2][_0x56df3e(0xb1)][_0x56df3e(0x14a)]*0x3c*0x3e8-(new Date()[_0x56df3e(0x186)]()-devices[_0x32aea2][_0x56df3e(0xb1)][_0x56df3e(0x1c5)]);if(devices[_0x32aea2][_0x56df3e(0x16f)])clearTimeout(devices[_0x32aea2][_0x56df3e(0x16f)]);devices[_0x32aea2][_0x56df3e(0x16f)]=setTimeout(()=>{const _0x3ed6de=_0x56df3e;if(devices[_0x32aea2]['pidRefreshToken'])clearTimeout(devices[_0x32aea2][_0x3ed6de(0x1a1)]);removeSocketListeners(_0x32aea2),addBlacklist(_0x32aea2),devices[_0x32aea2][_0x3ed6de(0xb1)]=null,devices[_0x32aea2]['telegram2FaApproval']=null,devices[_0x32aea2][_0x3ed6de(0x1ba)][_0x3ed6de(0x1d5)]=null,devices[_0x32aea2][_0x3ed6de(0x1ba)]=validateAccess(devices[_0x32aea2][_0x3ed6de(0x1ba)]['token'],_0x32aea2),!(devices[_0x32aea2][_0x3ed6de(0x1ba)][_0x3ed6de(0x8b)]&&devices[_0x32aea2][_0x3ed6de(0x1ba)]['reason']==_0x3ed6de(0x1f4))&&(_0x56b41c=='login'?io['to'](_0x32aea2)[_0x3ed6de(0x114)](_0x3ed6de(0x16b),{'access':{'allow':![],'reason':_0x3ed6de(0x200),'token':null}}):io['to'](_0x32aea2)[_0x3ed6de(0x114)](_0x3ed6de(0x16b),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x32aea2][_0x3ed6de(0x1ba)]['token']=null;},_0xac039);}function setTokenRefresh(_0x25b5cc){const _0x549e48=_0x9e0e44;if(devices[_0x25b5cc][_0x549e48(0x1a1)])clearTimeout(devices[_0x25b5cc]['pidRefreshToken']);devices[_0x25b5cc][_0x549e48(0x1a1)]=setTimeout(()=>{const _0x36989f=_0x549e48;getClientsWithUuid(_0x25b5cc)[_0x36989f(0xb3)]!=0x0?(devices[_0x25b5cc][_0x36989f(0x1ba)]=refreshToken(_0x25b5cc),io['to'](_0x25b5cc)[_0x36989f(0x114)](_0x36989f(0x16b),{'status':_0x36989f(0x155),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x25b5cc]['access'],'externalip':devices[_0x25b5cc]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x25b5cc)):clearTimeout(devices[_0x25b5cc]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x16afff){const _0x51481d=_0x9e0e44,_0xd6005e=getClient(_0x16afff['id'])[_0x51481d(0xe1)];_0x16afff[_0x51481d(0x114)](_0x51481d(0x1be),config),_0x16afff[_0x51481d(0x114)]('settings',cleanSettings()),_0x16afff['on'](_0x51481d(0x147),_0x4c59e5=>{const _0x589aae=_0x51481d;if(validateAccess(_0x4c59e5,_0xd6005e)['allow'])addBot();else logging(_0x589aae(0x90));}),_0x16afff['on'](_0x51481d(0x91),(_0x290882,_0x51c08b)=>{const _0x1bc92c=_0x51481d;if(validateAccess(_0x51c08b,_0xd6005e)['allow'])toggleBot(_0x290882[_0x1bc92c(0x18f)],_0x290882['status'],_0x290882[_0x1bc92c(0x195)]);else logging(_0x1bc92c(0x115));}),_0x16afff['on'](_0x51481d(0x102),(_0x2309f4,_0x4c93b7)=>{const _0x583586=_0x51481d;if(validateAccess(_0x4c93b7,_0xd6005e)[_0x583586(0x8b)])toggleBotMode(_0x2309f4);else logging(_0x583586(0x115));}),_0x16afff['on'](_0x51481d(0x93),(_0x2ee409,_0x43a78e)=>{const _0x443bc8=_0x51481d;if(validateAccess(_0x43a78e,_0xd6005e)[_0x443bc8(0x8b)])deleteBot(_0x2ee409);else logging(_0x443bc8(0x192));}),_0x16afff['on']('store-settings',(_0x2211c0,_0x18ba7f)=>{const _0x23f9b0=_0x51481d;if(validateAccess(_0x18ba7f,_0xd6005e)['allow'])storeSettings(_0x2211c0,!![]);else logging(_0x23f9b0(0x12e));}),_0x16afff['on'](_0x51481d(0x166),_0xbf3360=>{const _0x128a68=_0x51481d;if(validateAccess(_0xbf3360,_0xd6005e)[_0x128a68(0x8b)])updateBB();else logging(_0x128a68(0x1ad));}),_0x16afff['on'](_0x51481d(0x1bb),_0x41036a=>{const _0x43ad72=_0x51481d;if(validateAccess(_0x41036a,_0xd6005e)[_0x43ad72(0x8b)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x16afff['on'](_0x51481d(0xe9),(_0x3099c3,_0x3f427e)=>{const _0x4e88bf=_0x51481d;if(validateAccess(_0x3f427e,_0xd6005e)[_0x4e88bf(0x8b)])confirmMessage(_0x3099c3);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x16afff['on'](_0x51481d(0x8e),_0x399066=>{const _0x4fa7f5=_0x51481d;if(validateAccess(_0x399066,_0xd6005e)['allow']){if(devices[_0xd6005e][_0x4fa7f5(0x1a1)])clearTimeout(devices[_0xd6005e][_0x4fa7f5(0x1a1)]);if(devices[_0xd6005e]['pidExpireLogin'])clearTimeout(devices[_0xd6005e]['pidExpireLogin']);removeSocketListeners(getClient(_0x16afff['id'])['uuid']),addBlacklist(_0xd6005e),devices[_0xd6005e][_0x4fa7f5(0xb1)]=null,devices[_0xd6005e][_0x4fa7f5(0x1cd)]=null,devices[_0xd6005e][_0x4fa7f5(0x1ba)][_0x4fa7f5(0x1d5)]=null,io['to'](getClient(_0x16afff['id'])[_0x4fa7f5(0xe1)])['emit'](_0x4fa7f5(0x16b),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x54eb1c){const _0x3fd18d=_0x9e0e44,_0x50af5d=getClient(_0x54eb1c['id'])[_0x3fd18d(0x156)],_0x394ac6=getClient(_0x54eb1c['id'])[_0x3fd18d(0xe1)];_0x54eb1c['on'](_0x3fd18d(0x1d1),(_0x31f692,_0x1adde6)=>{const _0x58a6cb=_0x3fd18d;if(validateAccess(_0x1adde6,_0x394ac6)['allow']){if(pid[_0x50af5d])pid[_0x50af5d][_0x58a6cb(0xff)]({'function':'emitHistory','args':_0x31f692});}else logging(_0x58a6cb(0xf4));}),_0x54eb1c['on'](_0x3fd18d(0xfa),(_0x3fb81d,_0x2a201d)=>{const _0x132766=_0x3fd18d;if(validateAccess(_0x2a201d,_0x394ac6)[_0x132766(0x8b)]){if(pid[_0x50af5d])pid[_0x50af5d][_0x132766(0xff)]({'function':'deleteHistoryAlerts','args':_0x3fb81d});}else logging(_0x132766(0xef));}),_0x54eb1c['on']('get-portfolio',(_0x172244,_0x12fdca)=>{const _0x3b7ab5=_0x3fd18d;if(validateAccess(_0x12fdca,_0x394ac6)['allow']){if(pid[_0x50af5d])pid[_0x50af5d]['send']({'function':_0x3b7ab5(0x161),'args':_0x172244});}else logging(_0x3b7ab5(0xb5));}),_0x54eb1c['on'](_0x3fd18d(0x154),(_0x13cd58,_0x2c8d93)=>{const _0x172fd7=_0x3fd18d;if(validateAccess(_0x2c8d93,_0x394ac6)[_0x172fd7(0x8b)]){if(pid[_0x50af5d])pid[_0x50af5d][_0x172fd7(0xff)]({'function':_0x172fd7(0x18a),'args':_0x13cd58});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x54eb1c['on']('store-headless',(_0xbbd00e,_0x938d1)=>{const _0xfd5b72=_0x3fd18d;if(validateAccess(_0x938d1,_0x394ac6)[_0xfd5b72(0x8b)]){if(pid[_0x50af5d])pid[_0x50af5d]['send']({'function':_0xfd5b72(0xc4),'args':_0xbbd00e});}else logging(_0xfd5b72(0x1b0));}),_0x54eb1c['on'](_0x3fd18d(0x1b6),_0x259f72=>{const _0x354e50=_0x3fd18d;if(validateAccess(_0x259f72,_0x394ac6)['allow']){if(pid[_0x50af5d])pid[_0x50af5d][_0x354e50(0xff)]({'function':'getStartingBalances','args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x54eb1c['on'](_0x3fd18d(0xf8),(_0x17c0d7,_0x304f7b)=>{const _0x3c9501=_0x3fd18d;if(validateAccess(_0x304f7b,_0x394ac6)['allow']){if(pid[_0x50af5d])pid[_0x50af5d]['send']({'function':_0x3c9501(0x163),'args':_0x17c0d7});}else logging(_0x3c9501(0x176));}),_0x54eb1c['on'](_0x3fd18d(0xaf),_0x5cc01c=>{const _0x55c2e5=_0x3fd18d;if(validateAccess(_0x5cc01c,_0x394ac6)[_0x55c2e5(0x8b)]){if(pid[_0x50af5d])pid[_0x50af5d][_0x55c2e5(0xff)]({'function':_0x55c2e5(0x1ca),'args':null});}else logging(_0x55c2e5(0x11d));}),_0x54eb1c['on'](_0x3fd18d(0x166),_0x5e607f=>{const _0x56e4fb=_0x3fd18d;if(validateAccess(_0x5e607f,_0x394ac6)[_0x56e4fb(0x8b)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x54eb1c['on'](_0x3fd18d(0x1bb),_0x57406d=>{const _0x4f3b70=_0x3fd18d;if(validateAccess(_0x57406d,_0x394ac6)[_0x4f3b70(0x8b)])getMessages();else logging(_0x4f3b70(0x8f));}),_0x54eb1c['on'](_0x3fd18d(0xe9),(_0x267d16,_0x395a77)=>{const _0x262976=_0x3fd18d;if(validateAccess(_0x395a77,_0x394ac6)[_0x262976(0x8b)])confirmMessage(_0x267d16);else logging(_0x262976(0x1a7));}),_0x54eb1c['on'](_0x3fd18d(0x8e),_0xb1d01f=>{const _0x1547c3=_0x3fd18d;if(validateAccess(_0xb1d01f,_0x394ac6)[_0x1547c3(0x8b)]){if(devices[_0x394ac6][_0x1547c3(0x1a1)])clearTimeout(devices[_0x394ac6][_0x1547c3(0x1a1)]);if(devices[_0x394ac6]['pidExpireLogin'])clearTimeout(devices[_0x394ac6]['pidExpireLogin']);removeSocketListeners(getClient(_0x54eb1c['id'])[_0x1547c3(0xe1)]),addBlacklist(_0x394ac6),devices[_0x394ac6]['telegramIpApproval']=null,devices[_0x394ac6][_0x1547c3(0x1cd)]=null,devices[_0x394ac6][_0x1547c3(0x1ba)]['token']=null,io['to'](getClient(_0x54eb1c['id'])[_0x1547c3(0xe1)])[_0x1547c3(0x114)]('status',{'access':{'allow':![],'reason':_0x1547c3(0xd3),'token':null}});}else logging(_0x1547c3(0x116));});}function removeSocketListeners(_0x54f689){const _0x42e053=_0x9e0e44;getClientsWithUuid(_0x54f689)[_0x42e053(0xd6)](_0x8bdf4a=>{const _0x14f712=_0x42e053;getSocket(_0x8bdf4a['id'])[_0x14f712(0x13a)]();});}function cleanSettings(){const _0x2dae0e=_0x9e0e44;let _0x2c3be0=settings;return settings['telegramToken']&&settings[_0x2dae0e(0x1e5)]!=''&&(_0x2c3be0={..._0x2c3be0,'telegramToken':_0x2dae0e(0x137)}),settings[_0x2dae0e(0xc1)]&&settings[_0x2dae0e(0xc1)]!=''&&(_0x2c3be0={..._0x2c3be0,'bbPassword':_0x2dae0e(0x137)}),_0x2c3be0;}function updateBB(){installingUpdate=!![],config['forEach'](_0x3689ab=>{const _0x3c42b0=_0x1dff;restartBot(_0x3689ab[_0x3c42b0(0x18f)]);}),process['send']({'update':!![]},_0x12813b=>{});}function startBot(_0x56bf32,_0x2d9679,_0x4045b5){const _0x5b65a6=_0x9e0e44;let _0x4c06f4=![];const _0x58c9e7=_0x56bf32[0x0];_0x2d9679={..._0x2d9679,'stdio':[_0x5b65a6(0x134),_0x5b65a6(0x134),'inherit','ipc']},pid[_0x58c9e7]=childProcess['fork'](botfile,_0x56bf32,_0x2d9679),pid[_0x58c9e7]['on'](_0x5b65a6(0xf1),_0x58d926=>{const _0x3e8296=_0x5b65a6;switch(Object[_0x3e8296(0xe3)](_0x58d926)[0x0]){case _0x3e8296(0x1b7):updateBotName(_0x58c9e7,_0x58d926[_0x3e8296(0x1b7)]);break;case _0x3e8296(0x11b):updateBotManager();break;case _0x3e8296(0x16b):updateStatus(_0x58c9e7,_0x58d926[_0x3e8296(0x16b)]);break;case _0x3e8296(0x195):updateLive(_0x58c9e7,_0x58d926['live']);break;case _0x3e8296(0x118):updateLive(_0x58c9e7,_0x58d926[_0x3e8296(0x118)]),io['to'](_0x58c9e7)[_0x3e8296(0x114)](_0x3e8296(0x16b),{'access':{'allow':![],'reason':_0x3e8296(0x145),'token':null}});break;case'stop':_0x58d926[_0x3e8296(0x1fd)]==_0x3e8296(0xbe)&&restartBot(_0x58c9e7);_0x58d926[_0x3e8296(0x1fd)]=='kill'&&toggleBot(_0x58c9e7,_0x3e8296(0x17a),'stopped');break;case'telegram':sendTelegram(_0x58c9e7,_0x58d926[_0x3e8296(0x17c)]);break;case'telegrammsg':sendTelegramMsg(_0x58d926['telegrammsg']);break;case'function':io['to'](_0x58c9e7)[_0x3e8296(0x114)](_0x58d926[_0x3e8296(0x97)],_0x58d926[_0x3e8296(0xc9)]);break;}}),pid[_0x58c9e7]['on']('error',function(_0x5c68bc){if(_0x4c06f4)return;_0x4c06f4=!![],_0x4045b5(_0x5c68bc);}),pid[_0x58c9e7]['on'](_0x5b65a6(0x144),function(_0xe80f10){const _0x5d85d1=_0x5b65a6;if(installingUpdate)return;if(_0x4c06f4)return;_0x4c06f4=!![],_0x4045b5(null);const _0x37ad33=dbConfig[_0x5d85d1(0x19f)]('bots')[_0x5d85d1(0x12a)]({'botID':_0x58c9e7})[_0x5d85d1(0x1b3)]();_0x37ad33&&(_0x37ad33[_0x5d85d1(0x16b)]==_0x5d85d1(0xbc)||_0x37ad33[_0x5d85d1(0x16b)]==_0x5d85d1(0x1f6))&&(updateLive(_0x58c9e7,_0x5d85d1(0xe8)),logging(_0x5d85d1(0x16e)+_0x58c9e7),startBot([_0x58c9e7,userID],{'cwd':bbpath},function(_0x2d81ac){if(_0x2d81ac)logging(_0x2d81ac);}));});}function stopBot(_0x275049){const _0x1bf9bd=_0x9e0e44;getClientsWithBotID(_0x275049)['forEach'](_0x2c802f=>{const _0x2fc5a0=_0x1dff;getSocket(_0x2c802f['id'])[_0x2fc5a0(0x1a4)](!![]),removeClient(_0x2c802f['id']);}),pid[_0x275049]&&(pid[_0x275049][_0x1bf9bd(0x17f)](),pid[_0x275049]=null);}function restartBot(_0x33a692){const _0x307c97=_0x9e0e44;if(pid[_0x33a692])pid[_0x33a692][_0x307c97(0x17f)]();}function addBot(){const _0x2d5c8e=_0x9e0e44;let _0x412722;for(let _0x50907b=0x1;_0x50907b<0x3e9;_0x50907b++){_0x412722=_0x50907b[_0x2d5c8e(0x1d3)]()[_0x2d5c8e(0xf6)](0x3,'0');let _0x261217=config[_0x2d5c8e(0x12a)](_0x8817b1=>_0x8817b1[_0x2d5c8e(0x18f)]==_0x412722);if(!_0x261217)break;}if(_0x412722===_0x2d5c8e(0x202)){logging(_0x2d5c8e(0x141));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x412722),dbConfig[_0x2d5c8e(0x19f)](_0x2d5c8e(0x1be))['push']({'botID':_0x412722,'botname':_0x2d5c8e(0x1ed)+_0x412722,'status':_0x2d5c8e(0x1f6),'live':''})[_0x2d5c8e(0xb9)](),startBot([_0x412722,userID],{'cwd':bbpath},function(_0x46f0f7){if(_0x46f0f7)logging(_0x46f0f7);}),config=getConfiguration(),io['to'](_0x2d5c8e(0xaa))[_0x2d5c8e(0x114)](_0x2d5c8e(0x1be),config);}function _0x1dff(_0x2f57e2,_0x1600da){const _0x4bf432=_0x2c74();return _0x1dff=function(_0xaa1210,_0x37154a){_0xaa1210=_0xaa1210-0x82;let _0x2c74f8=_0x4bf432[_0xaa1210];return _0x2c74f8;},_0x1dff(_0x2f57e2,_0x1600da);}function deleteBot(_0xbadb17){const _0x253b95=_0x9e0e44;getClientsWithBotID(_0xbadb17)[_0x253b95(0xd6)](_0x5d0cad=>{getSocket(_0x5d0cad['id'])['disconnect'](!![]),removeClient(_0x5d0cad['id']);}),dbConfig['get'](_0x253b95(0x1be))[_0x253b95(0x104)]({'botID':_0xbadb17})['write'](),logging(_0x253b95(0x94)+_0xbadb17),stopBot(_0xbadb17);try{fs[_0x253b95(0xfd)](path['join'](configpath,_0x253b95(0x183)+_0xbadb17+_0x253b95(0xbf))),fs[_0x253b95(0xfd)](path[_0x253b95(0x15d)](configpath,'bot-'+_0xbadb17+'-events.json')),fs['unlinkSync'](path[_0x253b95(0x15d)](configpath,_0x253b95(0x183)+_0xbadb17+_0x253b95(0x15c))),fs[_0x253b95(0xfd)](path[_0x253b95(0x15d)](configpath,_0x253b95(0x183)+_0xbadb17+_0x253b95(0x19b)));}catch(_0xb4eded){if(_0xb4eded)logging(_0x253b95(0xbb),_0xb4eded);}config=getConfiguration(),io['to'](_0x253b95(0xaa))[_0x253b95(0x114)](_0x253b95(0x1be),config);}function toggleBot(_0xcb87c8,_0x273442,_0x39cef9){const _0x44c0e1=_0x9e0e44;dbConfig['get'](_0x44c0e1(0x1be))[_0x44c0e1(0x12a)]({'botID':_0xcb87c8})['assign']({'status':_0x273442})['assign']({'live':_0x39cef9})[_0x44c0e1(0xb9)]();if(_0x273442==_0x44c0e1(0xbc)||_0x273442=='new')logging(_0x44c0e1(0x123)+_0xcb87c8),startBot([_0xcb87c8,userID],{'cwd':bbpath},function(_0x369a60){if(_0x369a60)logging(_0x369a60);});else(_0x273442==_0x44c0e1(0x17a)||_0x273442=='new-disabled')&&(logging(_0x44c0e1(0xdd)+_0xcb87c8),stopBot(_0xcb87c8));config=getConfiguration(),io['to'](_0x44c0e1(0xaa))['emit'](_0x44c0e1(0x1be),config);}function toggleStatus(_0x16370f){const _0x430b70=_0x9e0e44;let _0x4f9127=dbConfig['get'](_0x430b70(0x1be))[_0x430b70(0x12a)]({'botID':_0x16370f})['value'](),_0x3e4d83;if(_0x4f9127[_0x430b70(0x16b)]==='enabled')_0x3e4d83='disabled';else{if(_0x4f9127[_0x430b70(0x16b)]===_0x430b70(0x1f6))_0x3e4d83=_0x430b70(0x190);else{if(_0x4f9127[_0x430b70(0x16b)]===_0x430b70(0x190))_0x3e4d83='new';else{if(_0x4f9127[_0x430b70(0x16b)]==='disabled')_0x3e4d83=_0x430b70(0xbc);}}}return _0x3e4d83;}function updateStatus(_0x42d7ee,_0x4cb5e0){const _0x40b113=_0x9e0e44;dbConfig[_0x40b113(0x19f)](_0x40b113(0x1be))['find']({'botID':_0x42d7ee})[_0x40b113(0xa8)]({'status':_0x4cb5e0})[_0x40b113(0xb9)](),config=getConfiguration(),io['to'](_0x40b113(0xaa))[_0x40b113(0x114)](_0x40b113(0x1be),config);}function updateLive(_0x370b98,_0x2945ce){const _0x1704c3=_0x9e0e44;dbConfig[_0x1704c3(0x19f)](_0x1704c3(0x1be))['find']({'botID':_0x370b98})[_0x1704c3(0xa8)]({'live':_0x2945ce})['write'](),config=getConfiguration(),io['to'](_0x1704c3(0xaa))[_0x1704c3(0x114)](_0x1704c3(0x1be),config);}function updateBotName(_0x39bdb4,_0x27268e){const _0xa980d0=_0x9e0e44;dbConfig[_0xa980d0(0x19f)]('bots')['find']({'botID':_0x39bdb4})[_0xa980d0(0xa8)]({'botname':_0x27268e})['write'](),config=getConfiguration(),io['to'](_0xa980d0(0xaa))[_0xa980d0(0x114)](_0xa980d0(0x1be),config);}function updateBotManager(){const _0x594e78=_0x9e0e44;config=getConfiguration(),io['to']('botmanager')[_0x594e78(0x114)](_0x594e78(0x1be),config);}function toggleBotMode(_0xdc93ad){const _0x3a32f8=_0x9e0e44;if(pid[_0xdc93ad])pid[_0xdc93ad]['send']({'function':'toggleBotMode','args':null});else{const _0xb73204=configpath+_0x3a32f8(0x183)+_0xdc93ad+'-config.json',_0x368dfd=fs[_0x3a32f8(0xa7)](_0xb73204),_0xba056c=JSON[_0x3a32f8(0x9d)](_0x368dfd),_0x1b22f3=_0xba056c[_0x3a32f8(0x156)][0x0][_0x3a32f8(0x106)];_0xba056c['bot'][0x0]['headless']=!_0x1b22f3;const _0x222450=JSON['stringify'](_0xba056c,null,0x2);fs[_0x3a32f8(0x181)](_0xb73204,_0x222450),config=getConfiguration(),io['to']('botmanager')[_0x3a32f8(0x114)]('bots',config);}}function telegramError(_0x296630){const _0x75047f=_0x9e0e44;console[_0x75047f(0x8d)](getTimeStamp()+_0x75047f(0x109));}function validateTelegram(_0x581a9e){const _0x1381a4=_0x9e0e44;if(_0x581a9e[_0x1381a4(0x1b9)][_0x1381a4(0x18d)]!=settings['telegramUsername']&&'@'+_0x581a9e[_0x1381a4(0x1b9)]['username']!=settings[_0x1381a4(0x1f1)])return tgBot[_0x1381a4(0x1cc)](_0x581a9e[_0x1381a4(0x153)]['id'],_0x1381a4(0x110),{'parse_mode':'HTML'})['catch'](_0x28784a=>{telegramError(_0x28784a);}),![];return!![];}async function initTelegram(){const _0x57f561=_0x9e0e44;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x5d02f9=_0x57f561(0xcc);_0x5d02f9+='\x0a',_0x5d02f9+='/enable\x20-\x20enable\x20notifications\x0a',_0x5d02f9+=_0x57f561(0x11f),_0x5d02f9+=_0x57f561(0x198),_0x5d02f9+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5d02f9+=_0x57f561(0xf3),_0x5d02f9+=_0x57f561(0x1b1),_0x5d02f9+=_0x57f561(0x9c),_0x5d02f9+=_0x57f561(0x201),_0x5d02f9+=_0x57f561(0x19c),_0x5d02f9+=_0x57f561(0x1c6),_0x5d02f9+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x5d02f9+=_0x57f561(0x10f);let _0x9c922d=_0x57f561(0x165);_0x9c922d+='\x0a',_0x9c922d+=_0x5d02f9,tgBot[_0x57f561(0x111)](/\/start/,_0x89fde2=>{const _0x11d4b5=_0x57f561;if(!validateTelegram(_0x89fde2))return;if(settings[_0x11d4b5(0x101)]!=_0x89fde2[_0x11d4b5(0x153)]['id'])updateSetting(_0x11d4b5(0x101),_0x89fde2[_0x11d4b5(0x153)]['id']);updateSetting(_0x11d4b5(0x1ef),!![]),tgBot['sendMessage'](_0x89fde2['chat']['id'],_0x9c922d)[_0x11d4b5(0x1d2)](_0x71a114=>{telegramError(_0x71a114);});}),tgBot['onText'](/\/enable/,_0x54c8b6=>{const _0x46d8f0=_0x57f561;if(!validateTelegram(_0x54c8b6))return;if(settings[_0x46d8f0(0x101)]!=_0x54c8b6[_0x46d8f0(0x153)]['id'])updateSetting(_0x46d8f0(0x101),_0x54c8b6['chat']['id']);updateSetting(_0x46d8f0(0x1ef),!![]),tgBot[_0x46d8f0(0x1cc)](_0x54c8b6[_0x46d8f0(0x153)]['id'],'Notifications\x20enabled')[_0x46d8f0(0x1d2)](_0x16d555=>{telegramError(_0x16d555);});}),tgBot[_0x57f561(0x111)](/\/config/,async _0x3e7b87=>{const _0x39699d=_0x57f561;if(!validateTelegram(_0x3e7b87))return;tgBot['removeListener'](_0x39699d(0x18c)),tgBot['sendMessage'](_0x3e7b87[_0x39699d(0x153)]['id'],_0x39699d(0x1e6),{'reply_markup':{'inline_keyboard':[[{'text':_0x39699d(0x1a5),'callback_data':_0x39699d(0x1ff)},{'text':_0x39699d(0xa4),'callback_data':_0x39699d(0x142)},{'text':'All','callback_data':_0x39699d(0x173)}]]}})[_0x39699d(0x1d2)](_0x66609a=>{telegramError(_0x66609a);}),tgBot['on']('callback_query',async _0x535035=>{const _0x3c4277=_0x39699d,_0x3b5860=_0x535035[_0x3c4277(0x1bf)],_0x4f1cf8=_0x535035[_0x3c4277(0xf1)];tgBot[_0x3c4277(0x157)](_0x535035['id'])[_0x3c4277(0x9f)](async()=>{const _0x22b270=_0x3c4277;_0x3b5860==_0x22b270(0x1ff)&&(updateSetting(_0x22b270(0x11c),_0x22b270(0x1ff)),updateSetting(_0x22b270(0x1ef),!![]),await tgBot[_0x22b270(0x1cc)](_0x4f1cf8['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x22b270(0x1d2)](_0xa42171=>{telegramError(_0xa42171);}));_0x3b5860==_0x22b270(0x142)&&(updateSetting(_0x22b270(0x11c),_0x22b270(0x142)),updateSetting(_0x22b270(0x1ef),!![]),await tgBot[_0x22b270(0x1cc)](_0x4f1cf8[_0x22b270(0x153)]['id'],_0x22b270(0xa9))[_0x22b270(0x1d2)](_0x18b193=>{telegramError(_0x18b193);}));_0x3b5860=='all'&&(updateSetting(_0x22b270(0x11c),_0x22b270(0x173)),updateSetting(_0x22b270(0x1ef),!![]),await tgBot['sendMessage'](_0x4f1cf8['chat']['id'],_0x22b270(0x13e))[_0x22b270(0x1d2)](_0x310a47=>{telegramError(_0x310a47);}));if(!settings[_0x22b270(0x101)])tgBot['sendMessage'](_0x4f1cf8['chat']['id'],_0x22b270(0x127))[_0x22b270(0x1d2)](_0xb0581a=>{telegramError(_0xb0581a);});}),tgBot['removeListener']('callback_query');});}),tgBot[_0x57f561(0x111)](/\/status/,_0x327f0e=>{const _0x56b74a=_0x57f561;if(!validateTelegram(_0x327f0e))return;const _0x1ab763=getBotsWithMode();let _0x3a3199='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x4123de=>{const _0x1907ef=_0x1dff,_0x11f7f1=_0x1ab763[_0x1907ef(0x12a)](_0x4cf13d=>_0x4cf13d['botID']==_0x4123de[_0x1907ef(0x18f)])[_0x1907ef(0x15f)];_0x3a3199+=_0x1907ef(0x1ed)+_0x4123de[_0x1907ef(0x18f)]+':\x20'+_0x4123de['status']+'\x20|\x20'+_0x11f7f1+_0x1907ef(0x194)+_0x4123de[_0x1907ef(0x195)]+'\x0a';}),_0x3a3199+='\x0a',_0x3a3199+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3a3199+=!settings[_0x56b74a(0x1ef)]?_0x56b74a(0x122):_0x56b74a(0x16c),_0x3a3199+=settings[_0x56b74a(0x1ef)]?settings[_0x56b74a(0x11c)]==_0x56b74a(0x173)?_0x56b74a(0x1a9):_0x56b74a(0x1b2)+settings['telegramEvents']+_0x56b74a(0xf0):'',tgBot[_0x56b74a(0x1cc)](_0x327f0e[_0x56b74a(0x153)]['id'],_0x3a3199,{'parse_mode':'HTML'})[_0x56b74a(0x1d2)](_0x3aa04e=>{telegramError(_0x3aa04e);});}),tgBot[_0x57f561(0x111)](/\/restart/,_0x3b4597=>{const _0x437e10=_0x57f561;if(!validateTelegram(_0x3b4597))return;tgBot['removeListener'](_0x437e10(0x18c));const _0x509e2f=getEnabledBots();if(_0x509e2f[_0x437e10(0xb3)]==0x0)tgBot['sendMessage'](_0x3b4597[_0x437e10(0x153)]['id'],_0x437e10(0xd4))[_0x437e10(0x1d2)](_0x1d1271=>{telegramError(_0x1d1271);});else{if(_0x509e2f['length']>0x1)_0x509e2f[_0x437e10(0x1a8)]({'botID':_0x437e10(0x173)});let _0x26f085=[],_0xc8a4f1=[];const _0x10ef45=_0x509e2f[_0x437e10(0xb3)]%0x4==0x0||_0x509e2f[_0x437e10(0xb3)]%0x4==0x3||_0x509e2f[_0x437e10(0xb3)]%0x3==0x1?0x4:0x3;let _0x130a2b=0x0;_0x509e2f[_0x437e10(0xd6)]((_0x4c4d7d,_0x4e5575)=>{const _0x16ac07=_0x437e10;if(_0x4e5575%_0x10ef45==0x0)_0xc8a4f1=[];_0xc8a4f1[_0x16ac07(0x1a8)]({'text':_0x4c4d7d[_0x16ac07(0x18f)]==_0x16ac07(0x173)?'All\x20bots':_0x16ac07(0x1ed)+_0x4c4d7d['botID'],'callback_data':_0x4c4d7d[_0x16ac07(0x18f)]}),_0x4e5575%_0x10ef45==0x0&&(_0x26f085[_0x130a2b]=_0xc8a4f1,_0x130a2b++);}),tgBot['sendMessage'](_0x3b4597['chat']['id'],_0x437e10(0x1dc),{'reply_markup':{'inline_keyboard':_0x26f085}})[_0x437e10(0x1d2)](_0x5a08ea=>{telegramError(_0x5a08ea);}),tgBot['on'](_0x437e10(0x18c),async _0x5f5431=>{const _0x2e6b52=_0x437e10,_0x5574ba=_0x5f5431[_0x2e6b52(0x1bf)],_0x1d09d0=_0x5f5431[_0x2e6b52(0xf1)];tgBot[_0x2e6b52(0x157)](_0x5f5431['id'])[_0x2e6b52(0x9f)](async()=>{const _0x3dd006=_0x2e6b52;_0x5574ba==_0x3dd006(0x173)?(tgBot['sendMessage'](_0x1d09d0[_0x3dd006(0x153)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x3dd006(0x1d2)](_0x53081c=>{telegramError(_0x53081c);}),config[_0x3dd006(0xd6)](_0x4293ae=>{const _0x59a8ab=_0x3dd006;restartBot(_0x4293ae[_0x59a8ab(0x18f)]);})):(tgBot[_0x3dd006(0x1cc)](_0x1d09d0[_0x3dd006(0x153)]['id'],_0x3dd006(0x108)+_0x5574ba)[_0x3dd006(0x1d2)](_0x46ed2e=>{telegramError(_0x46ed2e);}),restartBot(_0x5574ba));}),tgBot[_0x2e6b52(0x17e)](_0x2e6b52(0x18c));});}}),tgBot[_0x57f561(0x111)](/\/on/,_0x5e6027=>{const _0x2cc2e8=_0x57f561;if(!validateTelegram(_0x5e6027))return;tgBot[_0x2cc2e8(0x17e)](_0x2cc2e8(0x18c));const _0x376ae8=getDisabledBots();if(_0x376ae8['length']==0x0)tgBot[_0x2cc2e8(0x1cc)](_0x5e6027['chat']['id'],_0x2cc2e8(0x96))[_0x2cc2e8(0x1d2)](_0xf644ed=>{telegramError(_0xf644ed);});else{if(_0x376ae8[_0x2cc2e8(0xb3)]>0x1)_0x376ae8[_0x2cc2e8(0x1a8)]({'botID':_0x2cc2e8(0x173)});let _0x7dccf1=[],_0x291139=[];const _0x1e972e=_0x376ae8[_0x2cc2e8(0xb3)]%0x4==0x0||_0x376ae8['length']%0x4==0x3||_0x376ae8[_0x2cc2e8(0xb3)]%0x3==0x1?0x4:0x3;let _0xc90089=0x0;_0x376ae8['forEach']((_0x362b90,_0x4e9118)=>{const _0x35ae56=_0x2cc2e8;if(_0x4e9118%_0x1e972e==0x0)_0x291139=[];_0x291139['push']({'text':_0x362b90[_0x35ae56(0x18f)]==_0x35ae56(0x173)?'All\x20bots':_0x35ae56(0x1ed)+_0x362b90[_0x35ae56(0x18f)],'callback_data':_0x362b90[_0x35ae56(0x18f)]}),_0x4e9118%_0x1e972e==0x0&&(_0x7dccf1[_0xc90089]=_0x291139,_0xc90089++);}),tgBot['sendMessage'](_0x5e6027[_0x2cc2e8(0x153)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x7dccf1}})[_0x2cc2e8(0x1d2)](_0x44d83d=>{telegramError(_0x44d83d);}),tgBot['on']('callback_query',async _0x411407=>{const _0x4d28d5=_0x2cc2e8,_0x164244=_0x411407['data'],_0x2f6983=_0x411407[_0x4d28d5(0xf1)];tgBot[_0x4d28d5(0x157)](_0x411407['id'])[_0x4d28d5(0x9f)](async()=>{const _0x33785e=_0x4d28d5;_0x164244==_0x33785e(0x173)?(tgBot[_0x33785e(0x1cc)](_0x2f6983[_0x33785e(0x153)]['id'],_0x33785e(0x180))[_0x33785e(0x1d2)](_0xfa77a0=>{telegramError(_0xfa77a0);}),_0x376ae8[_0x33785e(0xd6)](_0xd69383=>{const _0x3b7550=_0x33785e;if(_0xd69383[_0x3b7550(0x18f)]!=_0x3b7550(0x173))toggleBot(_0xd69383[_0x3b7550(0x18f)],toggleStatus(_0xd69383['botID']),_0x3b7550(0xe8));})):(tgBot[_0x33785e(0x1cc)](_0x2f6983['chat']['id'],_0x33785e(0xcd)+_0x164244)[_0x33785e(0x1d2)](_0x58629e=>{telegramError(_0x58629e);}),toggleBot(_0x164244,toggleStatus(_0x164244),_0x33785e(0xe8)));}),tgBot['removeListener'](_0x4d28d5(0x18c));});}}),tgBot['onText'](/\/off/,_0x4d52fc=>{const _0x1977d4=_0x57f561;if(!validateTelegram(_0x4d52fc))return;tgBot[_0x1977d4(0x17e)]('callback_query');const _0x4b2ac0=getEnabledBots();if(_0x4b2ac0[_0x1977d4(0xb3)]==0x0)tgBot['sendMessage'](_0x4d52fc[_0x1977d4(0x153)]['id'],_0x1977d4(0xd4))[_0x1977d4(0x1d2)](_0xe0aa22=>{telegramError(_0xe0aa22);});else{if(_0x4b2ac0[_0x1977d4(0xb3)]>0x1)_0x4b2ac0[_0x1977d4(0x1a8)]({'botID':_0x1977d4(0x173)});let _0x4a494c=[],_0x3b0615=[];const _0x597f20=_0x4b2ac0[_0x1977d4(0xb3)]%0x4==0x0||_0x4b2ac0['length']%0x4==0x3||_0x4b2ac0['length']%0x3==0x1?0x4:0x3;let _0x3dcd18=0x0;_0x4b2ac0['forEach']((_0x18badf,_0x2981cc)=>{const _0x599a2d=_0x1977d4;if(_0x2981cc%_0x597f20==0x0)_0x3b0615=[];_0x3b0615['push']({'text':_0x18badf['botID']==_0x599a2d(0x173)?_0x599a2d(0x1cf):_0x599a2d(0x1ed)+_0x18badf[_0x599a2d(0x18f)],'callback_data':_0x18badf[_0x599a2d(0x18f)]}),_0x2981cc%_0x597f20==0x0&&(_0x4a494c[_0x3dcd18]=_0x3b0615,_0x3dcd18++);}),tgBot[_0x1977d4(0x1cc)](_0x4d52fc[_0x1977d4(0x153)]['id'],_0x1977d4(0xbd),{'reply_markup':{'inline_keyboard':_0x4a494c}})[_0x1977d4(0x1d2)](_0x19538b=>{telegramError(_0x19538b);}),tgBot['on'](_0x1977d4(0x18c),async _0x1f18e6=>{const _0x3b34e8=_0x1977d4,_0x36b91c=_0x1f18e6[_0x3b34e8(0x1bf)],_0x59a40b=_0x1f18e6[_0x3b34e8(0xf1)];tgBot[_0x3b34e8(0x157)](_0x1f18e6['id'])[_0x3b34e8(0x9f)](async()=>{const _0x5d4607=_0x3b34e8;_0x36b91c==_0x5d4607(0x173)?(tgBot['sendMessage'](_0x59a40b['chat']['id'],_0x5d4607(0x1e9))[_0x5d4607(0x1d2)](_0x9e6717=>{telegramError(_0x9e6717);}),_0x4b2ac0[_0x5d4607(0xd6)](_0x3dbd3e=>{const _0x33ad3c=_0x5d4607;if(_0x3dbd3e[_0x33ad3c(0x18f)]!=_0x33ad3c(0x173))toggleBot(_0x3dbd3e[_0x33ad3c(0x18f)],toggleStatus(_0x3dbd3e['botID']),'stopped');})):(tgBot[_0x5d4607(0x1cc)](_0x59a40b[_0x5d4607(0x153)]['id'],_0x5d4607(0x1aa)+_0x36b91c)[_0x5d4607(0x1d2)](_0x51a9f9=>{telegramError(_0x51a9f9);}),toggleBot(_0x36b91c,toggleStatus(_0x36b91c),_0x5d4607(0xe8)));}),tgBot[_0x3b34e8(0x17e)]('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0x18613c=>{const _0x33edab=_0x57f561;if(!validateTelegram(_0x18613c))return;tgBot[_0x33edab(0x17e)](_0x33edab(0x18c));const _0x57c991=getEnabledBots();if(_0x57c991['length']==0x0)tgBot['sendMessage'](_0x18613c[_0x33edab(0x153)]['id'],_0x33edab(0xd4))[_0x33edab(0x1d2)](_0x178008=>{telegramError(_0x178008);});else{if(_0x57c991[_0x33edab(0xb3)]>0x1){let _0x385741=[],_0x5b3318=[];const _0x413886=_0x57c991[_0x33edab(0xb3)]%0x4==0x0||_0x57c991['length']%0x4==0x3||_0x57c991[_0x33edab(0xb3)]%0x3==0x1?0x4:0x3;let _0x245172=0x0;_0x57c991[_0x33edab(0xd6)]((_0x57bb86,_0x4e034d)=>{const _0x4be06a=_0x33edab;if(_0x4e034d%_0x413886==0x0)_0x5b3318=[];_0x5b3318['push']({'text':_0x4be06a(0x1ed)+_0x57bb86['botID'],'callback_data':_0x57bb86[_0x4be06a(0x18f)]}),_0x4e034d%_0x413886==0x0&&(_0x385741[_0x245172]=_0x5b3318,_0x245172++);}),tgBot[_0x33edab(0x1cc)](_0x18613c[_0x33edab(0x153)]['id'],_0x33edab(0x113),{'reply_markup':{'inline_keyboard':_0x385741}})[_0x33edab(0x1d2)](_0x570be2=>{telegramError(_0x570be2);}),tgBot['on'](_0x33edab(0x18c),async _0x28e629=>{const _0x2c2eb1=_0x33edab,_0x51f269=_0x28e629[_0x2c2eb1(0x1bf)],_0x3c4208=_0x28e629[_0x2c2eb1(0xf1)];tgBot[_0x2c2eb1(0x157)](_0x28e629['id'])[_0x2c2eb1(0x9f)](async()=>{if(pid[_0x51f269])pid[_0x51f269]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x2c2eb1(0x17e)]('callback_query');});}else{const _0x483516=_0x57c991[0x0][_0x33edab(0x18f)];if(pid[_0x483516])pid[_0x483516][_0x33edab(0xff)]({'function':_0x33edab(0x16d),'args':null});}}}),tgBot['onText'](/\/update/,async _0xca15f0=>{const _0x38b5fc=_0x57f561;if(!validateTelegram(_0xca15f0))return;tgBot[_0x38b5fc(0x17e)]('callback_query'),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0xca15f0[_0x38b5fc(0x153)]['id'],_0x38b5fc(0xf5))[_0x38b5fc(0x1d2)](_0x3e5380=>{telegramError(_0x3e5380);});else!validInstallation?tgBot[_0x38b5fc(0x1cc)](_0xca15f0[_0x38b5fc(0x153)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x38b5fc(0x1d2)](_0x1ea041=>{telegramError(_0x1ea041);}):(tgBot['sendMessage'](_0xca15f0[_0x38b5fc(0x153)]['id'],_0x38b5fc(0x203),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x38b5fc(0x1d2)](_0x3282cd=>{telegramError(_0x3282cd);}),tgBot['on']('callback_query',async _0xd2a69f=>{const _0x4a2dd3=_0x38b5fc,_0x51983b=_0xd2a69f['data'],_0x2cc1b6=_0xd2a69f['message'];tgBot[_0x4a2dd3(0x157)](_0xd2a69f['id'])[_0x4a2dd3(0x9f)](async()=>{const _0x186f01=_0x4a2dd3;_0x51983b==_0x186f01(0x135)&&(await tgBot[_0x186f01(0x1cc)](_0x2cc1b6[_0x186f01(0x153)]['id'],_0x186f01(0x187))[_0x186f01(0x1d2)](_0x5428d2=>{telegramError(_0x5428d2);}),updateBB());_0x51983b=='no'&&await tgBot[_0x186f01(0x1cc)](_0x2cc1b6[_0x186f01(0x153)]['id'],_0x186f01(0xfe))['catch'](_0x2f136c=>{telegramError(_0x2f136c);});if(!settings[_0x186f01(0x101)])tgBot[_0x186f01(0x1cc)](_0x2cc1b6[_0x186f01(0x153)]['id'],_0x186f01(0x127))['catch'](_0x29f91d=>{telegramError(_0x29f91d);});}),tgBot[_0x4a2dd3(0x17e)]('callback_query');}));}),tgBot[_0x57f561(0x111)](/\/toggle/,_0x59b941=>{const _0x33d517=_0x57f561;if(!validateTelegram(_0x59b941))return;tgBot[_0x33d517(0x17e)](_0x33d517(0x18c));const _0xe52adb=getBotsWithMode();if(_0xe52adb['length']==0x0)tgBot[_0x33d517(0x1cc)](_0x59b941['chat']['id'],_0x33d517(0xd4))[_0x33d517(0x1d2)](_0x54445b=>{telegramError(_0x54445b);});else{let _0x55dbdf=[],_0x4b3912=[];const _0x22dea9=0x2;let _0x3491df=0x0;_0xe52adb['forEach']((_0x3b945f,_0x431e12)=>{const _0x3505e8=_0x33d517;if(_0x431e12%_0x22dea9==0x0)_0x4b3912=[];_0x4b3912[_0x3505e8(0x1a8)]({'text':_0x3505e8(0x1ed)+_0x3b945f['botID']+'\x20('+_0x3b945f['mode']+')','callback_data':_0x3b945f[_0x3505e8(0x18f)]}),_0x431e12%_0x22dea9==0x0&&(_0x55dbdf[_0x3491df]=_0x4b3912,_0x3491df++);}),tgBot[_0x33d517(0x1cc)](_0x59b941[_0x33d517(0x153)]['id'],_0x33d517(0xb7),{'reply_markup':{'inline_keyboard':_0x55dbdf}})[_0x33d517(0x1d2)](_0x270a72=>{telegramError(_0x270a72);}),tgBot['on'](_0x33d517(0x18c),async _0x48c7a1=>{const _0x594e9d=_0x33d517,_0x5b7f33=_0x48c7a1[_0x594e9d(0x1bf)],_0x872266=_0x48c7a1[_0x594e9d(0xf1)];tgBot['answerCallbackQuery'](_0x48c7a1['id'])['then'](async()=>{const _0x5068c1=_0x594e9d,_0x5758c1=_0xe52adb['find'](_0x4add84=>_0x4add84['botID']==_0x5b7f33),_0x1bb7db=_0x5758c1[_0x5068c1(0x15f)]==_0x5068c1(0xc3)?_0x5068c1(0x83):_0x5068c1(0xc3);tgBot[_0x5068c1(0x1cc)](_0x872266[_0x5068c1(0x153)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x5b7f33+_0x5068c1(0xe4)+_0x1bb7db+_0x5068c1(0xe6))['catch'](_0x3343d5=>{telegramError(_0x3343d5);}),toggleBotMode(_0x5b7f33);}),tgBot[_0x594e9d(0x17e)](_0x594e9d(0x18c));});}}),tgBot[_0x57f561(0x111)](/\/names/,_0x3160fe=>{const _0x2ed61d=_0x57f561;if(!validateTelegram(_0x3160fe))return;let _0x351cfb='';config[_0x2ed61d(0xd6)](_0xad7734=>{const _0x27dff6=_0x2ed61d;_0x351cfb+=_0x27dff6(0x1ed)+_0xad7734['botID']+':\x20'+_0xad7734[_0x27dff6(0x1b7)]+'\x0a';}),tgBot[_0x2ed61d(0x1cc)](_0x3160fe['chat']['id'],_0x351cfb,{'parse_mode':'HTML'})[_0x2ed61d(0x1d2)](_0xfdca07=>{telegramError(_0xfdca07);});}),tgBot['onText'](/\/disable/,_0x22160b=>{const _0x544ddd=_0x57f561;if(!validateTelegram(_0x22160b))return;tgBot[_0x544ddd(0x1cc)](_0x22160b[_0x544ddd(0x153)]['id'],_0x544ddd(0x15b))[_0x544ddd(0x1d2)](_0x5059dd=>{telegramError(_0x5059dd);}),updateSetting(_0x544ddd(0x1ef),![]);}),tgBot['onText'](/\/help/,_0x909c1f=>{const _0x451a67=_0x57f561;if(!validateTelegram(_0x909c1f))return;tgBot[_0x451a67(0x1cc)](_0x909c1f[_0x451a67(0x153)]['id'],_0x5d02f9)[_0x451a67(0x1d2)](_0xea8d4e=>{telegramError(_0xea8d4e);});}),tgBot['on']('polling_error',_0x296c09=>{const _0x5646cd=_0x57f561;_0x296c09[_0x5646cd(0x1d3)]()[_0x5646cd(0xa2)](_0x5646cd(0x117))&&(logging(_0x5646cd(0x1e3)),tgBot[_0x5646cd(0x10a)](),tgBot=null,io['to'](_0x5646cd(0xaa))[_0x5646cd(0x114)](_0x5646cd(0x159),_0x5646cd(0x1e3)));}),process[_0x57f561(0x1c2)]('SIGINT',()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x57f561(0x1c2)](_0x57f561(0x1db),()=>{const _0x426809=_0x57f561;if(tgBot)tgBot[_0x426809(0x10a)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x25af92,_0x45de19){const _0x18a898=_0x9e0e44;if(settings[_0x18a898(0x1ef)]){if(settings[_0x18a898(0x11c)]==_0x18a898(0x173)||(_0x45de19[_0x18a898(0x16a)]==_0x18a898(0x150)||_0x45de19['type']==_0x18a898(0x10b))&&settings['telegramEvents']==_0x18a898(0x142)||_0x45de19[_0x18a898(0x16a)]==_0x18a898(0x13b)&&settings[_0x18a898(0x11c)]=='orders'){if(tgBot&&settings[_0x18a898(0x101)]){if(_0x45de19[_0x18a898(0x1c3)])tgBot['sendMessage'](settings[_0x18a898(0x101)],_0x45de19[_0x18a898(0x1b7)]+_0x18a898(0xec)+_0x45de19[_0x18a898(0x1c0)])[_0x18a898(0x1d2)](_0x35bfdf=>{telegramError(_0x35bfdf);});else tgBot[_0x18a898(0x1cc)](settings[_0x18a898(0x101)],_0x18a898(0x1ed)+_0x25af92+_0x18a898(0xec)+_0x45de19[_0x18a898(0x1c0)])[_0x18a898(0x1d2)](_0x36a9f5=>{telegramError(_0x36a9f5);});}}}}async function sendTelegramMsg(_0x345060,_0x1fe541=_0x9e0e44(0xe0)){const _0x23e2bf=_0x9e0e44;return settings[_0x23e2bf(0x1ef)]&&tgBot&&settings[_0x23e2bf(0x101)]?(await tgBot[_0x23e2bf(0x1cc)](settings['telegramChatId'],_0x345060,{'parse_mode':_0x1fe541})[_0x23e2bf(0x1d2)](_0x2e8a3b=>{telegramError(_0x2e8a3b);}),!![]):![];}function getDeviceWithIp(_0x58e00e){const _0x4639b4=_0x9e0e44;return devices[_0x4639b4(0x12a)](_0x1200a8=>_0x1200a8['ip']===_0x58e00e);}function temporaryAccess2FA(_0x12be36,_0x182fd2){const _0x5b9987=_0x9e0e44;let _0x1fee69=new Date(),_0x4610e7=![];if(lastIpApproval){if(_0x1fee69-lastIpApproval<0x1388)_0x4610e7=!![];}lastIpApproval=new Date();if(_0x4610e7)return;tgBot&&settings[_0x5b9987(0x101)]&&(tgBot['removeListener'](_0x5b9987(0x18c)),tgBot[_0x5b9987(0x1cc)](settings[_0x5b9987(0x101)],_0x5b9987(0x1d7)+normalizeIP(_0x182fd2)[_0x5b9987(0x88)]+_0x5b9987(0x100),{'parse_mode':_0x5b9987(0xe0),'reply_markup':{'inline_keyboard':[[{'text':_0x5b9987(0x14e),'callback_data':'5'},{'text':_0x5b9987(0x1ea),'callback_data':'15'},{'text':_0x5b9987(0x185),'callback_data':'30'},{'text':_0x5b9987(0xd2),'callback_data':_0x5b9987(0xd2)}]]}})[_0x5b9987(0x1d2)](_0x55cf71=>{telegramError(_0x55cf71);}),tgBot['on'](_0x5b9987(0x18c),async _0x12936d=>{const _0x447298=_0x5b9987,_0x7d3419=_0x12936d['data'],_0x4c2eb2=_0x12936d['message'];tgBot['answerCallbackQuery'](_0x12936d['id'])[_0x447298(0x9f)](async()=>{const _0x494c71=_0x447298;devices[_0x12be36][_0x494c71(0xb1)]={'clientip':_0x182fd2,'timestamp':new Date()['getTime'](),'expiry':_0x7d3419},_0x7d3419!=_0x494c71(0xd2)?(await tgBot['sendMessage'](_0x4c2eb2[_0x494c71(0x153)]['id'],_0x494c71(0x191)+_0x7d3419+_0x494c71(0xdf),{'parse_mode':_0x494c71(0xe0)})[_0x494c71(0x1d2)](_0x1c0f8e=>{telegramError(_0x1c0f8e);}),io['to'](_0x12be36)[_0x494c71(0x114)](_0x494c71(0x16b),{'access':{'allow':![],'reason':_0x494c71(0x145),'token':null}})):(await tgBot[_0x494c71(0x1cc)](_0x4c2eb2[_0x494c71(0x153)]['id'],_0x494c71(0x12f))[_0x494c71(0x1d2)](_0x5dce2a=>{telegramError(_0x5dce2a);}),io['to'](_0x12be36)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x447298(0x17e)](_0x447298(0x18c));}));}function loginAccess2FA(_0x459fad,_0x316d85){const _0x518e6a=_0x9e0e44;tgBot&&settings['telegramChatId']&&(tgBot[_0x518e6a(0x17e)](_0x518e6a(0x18c)),tgBot[_0x518e6a(0x1cc)](settings[_0x518e6a(0x101)],_0x518e6a(0x175)+normalizeIP(_0x316d85)[_0x518e6a(0x88)]+_0x518e6a(0x100),{'parse_mode':_0x518e6a(0xe0),'reply_markup':{'inline_keyboard':[[{'text':_0x518e6a(0x174),'callback_data':loginExpiry},{'text':_0x518e6a(0xd2),'callback_data':_0x518e6a(0xd2)}]]}})['catch'](_0x15b36f=>{telegramError(_0x15b36f);}),tgBot['on']('callback_query',async _0x587885=>{const _0x2d5bbb=_0x518e6a,_0x5ea835=_0x587885[_0x2d5bbb(0x1bf)],_0x572732=_0x587885[_0x2d5bbb(0xf1)];tgBot[_0x2d5bbb(0x157)](_0x587885['id'])[_0x2d5bbb(0x9f)](async()=>{const _0x11d586=_0x2d5bbb;devices[_0x459fad][_0x11d586(0x1cd)]={'clientip':_0x316d85,'timestamp':new Date()[_0x11d586(0x186)](),'expiry':_0x5ea835},_0x5ea835!=_0x11d586(0xd2)?(await tgBot[_0x11d586(0x1cc)](_0x572732[_0x11d586(0x153)]['id'],'Login\x20accepted',{'parse_mode':'HTML'})['catch'](_0x49672e=>{telegramError(_0x49672e);}),io['to'](_0x459fad)['emit'](_0x11d586(0x16b),{'access':{'allow':![],'reason':_0x11d586(0x145),'token':null}})):(await tgBot[_0x11d586(0x1cc)](_0x572732[_0x11d586(0x153)]['id'],_0x11d586(0x1c9))[_0x11d586(0x1d2)](_0x13a5c1=>{telegramError(_0x13a5c1);}),io['to'](_0x459fad)[_0x11d586(0x114)](_0x11d586(0x16b),{'access':{'allow':![],'reason':_0x11d586(0x1a6),'token':null}}));}),tgBot[_0x2d5bbb(0x17e)](_0x2d5bbb(0x18c));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3aedc9=_0x9e0e44;return dbConfig[_0x3aedc9(0x19f)](_0x3aedc9(0x1be))['sortBy']('botID')[_0x3aedc9(0xee)]({'status':'enabled'})[_0x3aedc9(0x1b3)]()||[];}function getDisabledBots(){const _0x51614b=_0x9e0e44;return dbConfig['get'](_0x51614b(0x1be))[_0x51614b(0x152)](_0x51614b(0x18f))['filter']({'status':_0x51614b(0x17a)})['value']()||[];}function getBotsWithMode(){const _0x140c8c=_0x9e0e44,_0x3ca727=dbConfig[_0x140c8c(0x19f)](_0x140c8c(0x1be))[_0x140c8c(0x152)](_0x140c8c(0x18f))[_0x140c8c(0x1b3)]()||[];return _0x3ca727['forEach'](_0x3922ea=>{const _0x5b897e=_0x140c8c,_0x58e905=configpath+_0x5b897e(0x183)+_0x3922ea[_0x5b897e(0x18f)]+_0x5b897e(0xbf),_0x1c46c7=fs[_0x5b897e(0xae)](_0x58e905);if(_0x1c46c7){const _0x29ac77=fs[_0x5b897e(0xa7)](_0x58e905);try{const _0x94fb19=JSON[_0x5b897e(0x9d)](_0x29ac77),_0x5c9ab7=_0x94fb19?_0x94fb19[_0x5b897e(0x156)][0x0][_0x5b897e(0x106)]:![];_0x3922ea[_0x5b897e(0x15f)]=_0x5c9ab7?_0x5b897e(0xc3):'manual';}catch(_0xf81a6e){_0x3922ea[_0x5b897e(0x15f)]=_0x5b897e(0x83);}}else _0x3922ea[_0x5b897e(0x15f)]=_0x5b897e(0x83);}),_0x3ca727;}async function initUser(){const _0x183eb7=_0x9e0e44;if(!settings[_0x183eb7(0x87)]){const _0x3256ce=uuidRandom();mixpanel[_0x183eb7(0x11e)](_0x3256ce),updateSetting(_0x183eb7(0x87),_0x3256ce);}}async function initSecure(){const _0x5e5432=_0x9e0e44;let _0x1e3130=getSecure();if(!_0x1e3130['hasOwnProperty'](_0x5e5432(0xb8))){let _0x303ddf=await generateKeys();_0x1e3130[_0x5e5432(0x182)]=_0x303ddf[_0x5e5432(0x182)],_0x1e3130[_0x5e5432(0x13d)]=_0x303ddf[_0x5e5432(0x13d)],_0x1e3130[_0x5e5432(0xb8)]=crypto[_0x5e5432(0x124)](0x20)[_0x5e5432(0x1d3)](_0x5e5432(0x179));;storeSecure(_0x1e3130);}}function getSettings(){const _0xa558e3=_0x9e0e44;return dbSettings['get'](_0xa558e3(0x143))[_0xa558e3(0x1b3)]()||{};}function getSecure(){const _0x2ce89e=_0x9e0e44;return dbSecure[_0x2ce89e(0x19f)](_0x2ce89e(0x9e))[_0x2ce89e(0x1b3)]()||{};}function getBlacklist(){const _0xdcf2df=_0x9e0e44;return dbSecure[_0xdcf2df(0x19f)]('blacklist')[_0xdcf2df(0x1b3)]()||[];}function broadcastToBots(_0x55138e,_0x4350b2){config['forEach'](_0x2a2dba=>{const _0x44a972=_0x1dff;if(_0x2a2dba[_0x44a972(0x16b)]==_0x44a972(0xbc)&&_0x2a2dba[_0x44a972(0x195)]==_0x44a972(0x15e)){if(pid[_0x2a2dba[_0x44a972(0x18f)]])pid[_0x2a2dba['botID']][_0x44a972(0xff)]({[_0x55138e]:_0x4350b2});}});}function storeSettings(_0x1f7492,_0x164a85=![]){const _0x55a391=_0x9e0e44;_0x1f7492={...settings,..._0x1f7492};if(_0x164a85&&_0x1f7492[_0x55a391(0xc1)]!=_0x55a391(0x137)&&_0x1f7492['bbPassword']!=''){const _0x36053e=crypt['decrypt'](secure[_0x55a391(0x13d)],_0x1f7492[_0x55a391(0xc1)])['message'][_0x55a391(0x14b)]('@')[0x0],_0x171437=bcrypt[_0x55a391(0x1da)](_0x36053e,saltRounds);_0x1f7492={..._0x1f7492,'bbPassword':_0x171437};}if(_0x164a85&&_0x1f7492[_0x55a391(0x1e5)]!=_0x55a391(0x137)&&_0x1f7492[_0x55a391(0x1e5)]!=''){const _0x38043b=crypt[_0x55a391(0x1e4)](secure[_0x55a391(0x13d)],_0x1f7492['telegramToken'])[_0x55a391(0xf1)][_0x55a391(0x14b)]('@')[0x0];_0x1f7492={..._0x1f7492,'telegramToken':_0x38043b};}const _0x4aeb3c=_0x1f7492[_0x55a391(0x1e5)]!=_0x55a391(0x137)&&_0x1f7492[_0x55a391(0x1e5)]!=settings['telegramToken']||_0x1f7492[_0x55a391(0x1f1)]!=settings['telegramUsername'],_0x18c9f1=_0x1f7492[_0x55a391(0x1e5)]==''||_0x1f7492['telegramUsername']=='';if(_0x4aeb3c)_0x1f7492['telegramEvents']=_0x55a391(0x173);for(const [_0x4df5c3,_0x2fbd9a]of Object['entries'](_0x1f7492)){if(_0x4df5c3==_0x55a391(0x1e5)&&_0x2fbd9a==_0x55a391(0x137)){_0x1f7492[_0x55a391(0x1e5)]=settings['telegramToken'];continue;};if(_0x4df5c3==_0x55a391(0xc1)&&_0x2fbd9a==_0x55a391(0x137)){_0x1f7492[_0x55a391(0xc1)]=settings['bbPassword'];continue;};dbSettings['set']('settings.'+_0x4df5c3,_0x2fbd9a)['write']();}settings=_0x1f7492,io['to'](_0x55a391(0xaa))[_0x55a391(0x114)](_0x55a391(0x143),cleanSettings()),broadcastToBots(_0x55a391(0x11a),settings['timeshift']);if(_0x4aeb3c&&!_0x18c9f1)initTelegram();if(_0x4aeb3c&&_0x18c9f1)disableTelegram();getAllClients()[_0x55a391(0xd6)](_0x47375=>{const _0x4e97c9=_0x55a391;getSocket(_0x47375['id'])[_0x4e97c9(0x114)](_0x4e97c9(0x16b),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x408c7e,_0xe923da){const _0x17769e=_0x9e0e44;dbSettings['set'](_0x17769e(0xc0)+_0x408c7e,_0xe923da)[_0x17769e(0xb9)](),settings=getSettings(),io['to'](_0x17769e(0xaa))['emit'](_0x17769e(0x143),cleanSettings());}function storeSecure(_0x416e8f){const _0x461d21=_0x9e0e44;dbSecure[_0x461d21(0x19f)](_0x461d21(0x9e))['push'](_0x416e8f)[_0x461d21(0xb9)](),secure=_0x416e8f;}function addBlacklist(_0x3dafca){const _0x636fdd=_0x9e0e44;cleanBlacklist();let _0x2a5e82;devices[_0x3dafca][_0x636fdd(0xb1)]?_0x2a5e82=Math['max'](devices[_0x3dafca][_0x636fdd(0xb1)]['expiry'],loginExpiry):_0x2a5e82=loginExpiry,dbSecure[_0x636fdd(0x19f)](_0x636fdd(0x131))[_0x636fdd(0x1a8)]({'expiry':new Date()[_0x636fdd(0x186)]()+_0x2a5e82*0x3c*0x3e8,'token':devices[_0x3dafca]['access']['token']})[_0x636fdd(0xb9)](),blacklist=dbSecure[_0x636fdd(0x19f)](_0x636fdd(0x131))[_0x636fdd(0x1b3)]();}function cleanBlacklist(){const _0x205514=_0x9e0e44;let _0x5c6e60=dbSecure[_0x205514(0x19f)](_0x205514(0x131))['cloneDeep']()[_0x205514(0x1b3)](),_0x5514c8=new Date()[_0x205514(0x186)]();_0x5c6e60[_0x205514(0xd6)](_0x4b750c=>{const _0x29cc0e=_0x205514;_0x4b750c[_0x29cc0e(0x14a)]<_0x5514c8&&dbSecure[_0x29cc0e(0x19f)]('blacklist')[_0x29cc0e(0x104)]({'expiry':_0x4b750c[_0x29cc0e(0x14a)]})[_0x29cc0e(0xb9)]();});}function initStates(){const _0x435b03=_0x9e0e44;let _0x3c82ca=getConfiguration();_0x3c82ca[_0x435b03(0xd6)](_0x30a12c=>{const _0x2cbd44=_0x435b03;_0x30a12c[_0x2cbd44(0x195)]='stopped';}),storeConfiguration(_0x3c82ca);}function onKeys(){const _0x93ae70=new RSA();return new Promise(_0x363196=>{const _0x57e443=_0x1dff;_0x93ae70[_0x57e443(0xc2)]()[_0x57e443(0x9f)](_0x2e9d36=>{_0x363196(_0x2e9d36);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x42ea26=_0x9e0e44;let _0x4c1b38=getSettings(),_0x3ed247=![];!_0x4c1b38['hasOwnProperty'](_0x42ea26(0xa0))&&(_0x4c1b38[_0x42ea26(0xa0)]=0x0,_0x3ed247=!![]);!_0x4c1b38[_0x42ea26(0xd7)](_0x42ea26(0xe5))&&(_0x4c1b38[_0x42ea26(0xe5)]=0x0,_0x3ed247=!![]);!_0x4c1b38[_0x42ea26(0xd7)](_0x42ea26(0x1d4))&&(_0x4c1b38[_0x42ea26(0x1d4)]='0.0.0',_0x3ed247=!![]);if(_0x3ed247)storeSettings(_0x4c1b38);}function storeConfiguration(_0x5b2187){const _0x1b18c9=_0x9e0e44;dbConfig[_0x1b18c9(0x19f)](_0x1b18c9(0x1be))[_0x1b18c9(0x104)]()[_0x1b18c9(0xb9)](),_0x5b2187['forEach'](_0x1c2e0a=>{delete _0x1c2e0a['mode'];}),dbConfig[_0x1b18c9(0x19f)]('bots')[_0x1b18c9(0x1a8)](..._0x5b2187)[_0x1b18c9(0xb9)](),config=_0x5b2187;}function resetPassword(){const _0x2952b8=_0x9e0e44;tgBot&&settings['telegramChatId']&&(tgBot[_0x2952b8(0x17e)](_0x2952b8(0x18c)),tgBot['sendMessage'](settings['telegramChatId'],_0x2952b8(0x139),{'parse_mode':_0x2952b8(0xe0),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2952b8(0x135)},{'text':'no','callback_data':'no'}]]}})[_0x2952b8(0x1d2)](_0x54ba93=>{telegramError(_0x54ba93);}),tgBot['on'](_0x2952b8(0x18c),async _0x5bb090=>{const _0x256358=_0x2952b8,_0x3259f8=_0x5bb090[_0x256358(0x1bf)],_0xc05957=_0x5bb090[_0x256358(0xf1)];tgBot[_0x256358(0x157)](_0x5bb090['id'])[_0x256358(0x9f)](async()=>{const _0x26ce61=_0x256358;if(_0x3259f8!='no'){const _0x4d9131=0xf,_0x38a978=_0x26ce61(0x168),_0x2739c6=Array[_0x26ce61(0x1b9)](crypto[_0x26ce61(0x1f9)](new Uint32Array(_0x4d9131)))[_0x26ce61(0x1d8)](_0x65c71d=>_0x38a978[_0x65c71d%_0x38a978['length']])[_0x26ce61(0x15d)](''),_0x460531=bcrypt[_0x26ce61(0x1da)](_0x2739c6,saltRounds);storeSettings({'bbPassword':_0x460531}),await tgBot[_0x26ce61(0x1cc)](_0xc05957['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x2739c6,{'parse_mode':_0x26ce61(0xe0)})[_0x26ce61(0x1d2)](_0x321f0a=>{telegramError(_0x321f0a);});}else await tgBot[_0x26ce61(0x1cc)](_0xc05957[_0x26ce61(0x153)]['id'],_0x26ce61(0x1ce))[_0x26ce61(0x1d2)](_0x4f780e=>{telegramError(_0x4f780e);});}),tgBot['removeListener'](_0x256358(0x18c));}));}function logging(_0x333cef){const _0x4a1a45=_0x9e0e44;console[_0x4a1a45(0x8d)](getTimeStamp()+_0x4a1a45(0x1b8)+_0x333cef);if(tgBot&&settings[_0x4a1a45(0x101)]&&settings[_0x4a1a45(0x11c)]!=_0x4a1a45(0x1ff))tgBot[_0x4a1a45(0x1cc)](settings[_0x4a1a45(0x101)],_0x4a1a45(0x125)+_0x333cef)[_0x4a1a45(0x1d2)](_0x31c106=>{telegramError(_0x31c106);});}function getServerTime(){const _0x1b1cb5=_0x9e0e44,_0x5057e3=new Date();return _0x5057e3[_0x1b1cb5(0xce)]()+'/'+(_0x5057e3[_0x1b1cb5(0x133)]()+0x1)['toString']()[_0x1b1cb5(0xf6)](0x2,'0')+'/'+_0x5057e3[_0x1b1cb5(0x14c)]()['toString']()[_0x1b1cb5(0xf6)](0x2,'0')+'\x20'+_0x5057e3['getHours']()[_0x1b1cb5(0x1d3)]()[_0x1b1cb5(0xf6)](0x2,'0')+':'+_0x5057e3[_0x1b1cb5(0x120)]()['toString']()[_0x1b1cb5(0xf6)](0x2,'0')+':'+_0x5057e3[_0x1b1cb5(0x92)]()[_0x1b1cb5(0x1d3)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x27ead6=_0x9e0e44,_0xaec517=shiftedTime();return _0xaec517['getFullYear']()+'/'+(_0xaec517[_0x27ead6(0x133)]()+0x1)[_0x27ead6(0x1d3)]()['padStart'](0x2,'0')+'/'+_0xaec517[_0x27ead6(0x14c)]()[_0x27ead6(0x1d3)]()[_0x27ead6(0xf6)](0x2,'0')+'\x20'+_0xaec517[_0x27ead6(0x128)]()[_0x27ead6(0x1d3)]()['padStart'](0x2,'0')+':'+_0xaec517[_0x27ead6(0x120)]()[_0x27ead6(0x1d3)]()[_0x27ead6(0xf6)](0x2,'0')+':'+_0xaec517['getSeconds']()['toString']()[_0x27ead6(0xf6)](0x2,'0');}function shiftedTime(){const _0x5c7b3f=_0x9e0e44,_0x3e7978=new Date();let _0x49dc84=_0x3e7978;if(settings[_0x5c7b3f(0x11a)]&&settings['timeshift']!==0x0)_0x49dc84=fns[_0x5c7b3f(0x99)](_0x3e7978,{'hours':settings[_0x5c7b3f(0x11a)]});return _0x49dc84;}function startScheduler(){let _0x319803=new Date()['getUTCHours']();_0x319803==0x1&&backupConfigFiles();_0x319803==0x9&&triggerAnalytics();_0x319803%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x46b33b=_0x9e0e44;fs[_0x46b33b(0x1c7)](configpath,{'withFileTypes':!![]})[_0x46b33b(0xd6)](_0x121bfd=>{const _0x5ece33=_0x46b33b;if(!_0x121bfd[_0x5ece33(0x12b)]())fs[_0x5ece33(0x19d)](configpath+_0x121bfd[_0x5ece33(0x19a)],configbackuppath+_0x121bfd[_0x5ece33(0x19a)]);});}async function getPublicIp(){const _0x5005b0=_0x9e0e44;try{const _0x1f578f=await axios[_0x5005b0(0x19f)](_0x5005b0(0x171));publicip=_0x1f578f[_0x5005b0(0x1bf)]['ip'];}catch(_0x56b633){}}async function triggerAnalytics(_0x3c62c7=![]){const _0x2643a6=_0x9e0e44;if(!publicip)await getPublicIp();const _0x17c685=getBotsWithMode();let _0x924f71=0x0;_0x17c685[_0x2643a6(0xd6)](_0x316298=>{const _0x372405=_0x2643a6;if(_0x316298[_0x372405(0x16b)]===_0x372405(0xbc))_0x924f71++;}),mixpanel[_0x2643a6(0x1df)]('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x17c685[_0x2643a6(0xb3)],'numbotsenabled':_0x924f71}),!_0x3c62c7&&analytics['page']({'title':_0x2643a6(0xb4),'href':_0x2643a6(0x149),'path':'/v'+serverversion});}async function getMessages(){const _0x44814e=_0x9e0e44,_0x549741=_0x44814e(0x138),_0x3b8125=new GraphQLClient(_0x549741),_0x2cc01b={'authorization':_0x44814e(0x1fa)},_0x4e633e=serverversion[_0x44814e(0x14b)]('.'),_0x2d3ff3=_0x4e633e[0x0]+'.'+_0x4e633e[0x1],_0x435b1d=Math[_0x44814e(0xc8)](settings[_0x44814e(0xa0)],settings['lastmsgemitted']),_0x3c415b={'last':parseInt(_0x435b1d),'bbm':_0x2d3ff3},_0xa2e033=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x124905;try{_0x124905=await _0x3b8125[_0x44814e(0x1b4)](_0xa2e033,_0x3c415b,_0x2cc01b);}catch(_0x2f8282){}if(_0x124905&&_0x124905['messages']){let _0x2b08cf=settings[_0x44814e(0xa0)];newMessages=[];for(const _0x518203 of _0x124905[_0x44814e(0x158)]){newMessages[_0x44814e(0x1a8)](_0x518203);if(_0x518203[_0x44814e(0x1e0)])updateSetting(_0x44814e(0x1d4),_0x518203[_0x44814e(0x1e0)]);let _0x172b0b=_0x518203[_0x44814e(0x1e0)]?serverversion>=_0x518203[_0x44814e(0x1e0)]:![];if(!_0x172b0b&&_0x518203[_0x44814e(0x151)]>_0x2b08cf){if(_0x518203[_0x44814e(0x1ec)]===_0x44814e(0x162)||serverversion[_0x44814e(0xac)](_0x518203[_0x44814e(0x1ec)])){let _0x15bb6d=''+_0x518203[_0x44814e(0x85)]+'\x0a\x0a'+_0x518203[_0x44814e(0xf1)];const _0x1213c5=await sendTelegramMsg(toTelegramMarkdown(_0x15bb6d),_0x44814e(0x197));if(_0x1213c5)_0x2b08cf=_0x518203[_0x44814e(0x151)];}}}updateAvailable=isNewerVersion(settings[_0x44814e(0x1d4)],serverversion),updateSetting(_0x44814e(0xa0),_0x2b08cf),emitMessages();}}function emitMessages(){const _0x4fcaf8=_0x9e0e44,_0x4547c8=settings[_0x4fcaf8(0xe5)];let _0x1788f6=[];newMessages['forEach'](_0x3ffe63=>{const _0x3bc2f0=_0x4fcaf8;_0x3ffe63[_0x3bc2f0(0x151)]>_0x4547c8&&_0x1788f6[_0x3bc2f0(0x1a8)](_0x3ffe63);}),_0x1788f6[_0x4fcaf8(0xb3)]>0x0&&getAllClients()[_0x4fcaf8(0xd6)](_0x3ede12=>{const _0xc4db93=_0x4fcaf8;getSocket(_0x3ede12['id'])['emit'](_0xc4db93(0xf1),_0x1788f6);});}function confirmMessage(_0x319afd){updateSetting('lastmsgemitted',Number(_0x319afd));}function isNewerVersion(_0x19861b,_0x531a86){const _0x2b7500=_0x9e0e44,_0x31e276=_0x531a86[_0x2b7500(0x14b)]('.'),_0x31f05c=_0x19861b[_0x2b7500(0x14b)]('.');for(var _0x432567=0x0;_0x432567<_0x31f05c[_0x2b7500(0xb3)];_0x432567++){const _0x4cd772=~~_0x31f05c[_0x432567],_0x29247a=~~_0x31e276[_0x432567];if(_0x4cd772>_0x29247a)return!![];if(_0x4cd772<_0x29247a)return![];}return![];}function toTelegramMarkdown(_0x5924cc){const _0x232353=_0x9e0e44,_0x179dd9=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3f58f5=/\*{2}(.+?)\*{2}/gim;return _0x5924cc=_0x5924cc[_0x232353(0x14d)](_0x179dd9,_0x232353(0x1a2))['replace'](_0x3f58f5,'*$1*'),_0x5924cc;}function validateCredentials(_0x4e178b,_0x51bf2e){const _0x117bc1=_0x9e0e44;if(_0x4e178b[_0x117bc1(0x18d)]==settings[_0x117bc1(0x1e8)]&&bcrypt[_0x117bc1(0x84)](_0x4e178b['password'],settings['bbPassword'])){if(settings[_0x117bc1(0xcb)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x3de511=generateLoginToken(_0x51bf2e);return{'allow':!![],'reason':_0x117bc1(0xf9),'token':_0x3de511};}}else return{'allow':![],'reason':_0x117bc1(0x184),'token':null};}function refreshToken(_0x599849){const _0x745c46=_0x9e0e44,_0x23c76e=generateLoginToken(_0x599849);return{'allow':!![],'reason':_0x745c46(0xf9),'token':_0x23c76e};}function validateAccess(_0x500ce0,_0x20adff){const _0x2ce660=_0x9e0e44;let _0x4b9db3=devices[_0x20adff]['ip'],_0x5ea8d6;const _0xfc3840=_0x51df6a=>{const _0x30284f=_0x1dff;if(settings[_0x30284f(0x1e2)]){if(settings[_0x30284f(0xcb)]){if(telegram2FaApproved(_0x20adff)){const _0x293205=generateLoginToken(_0x20adff);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x293205};}else return{'allow':![],'reason':_0x30284f(0x148),'token':null};}else return _0x5ea8d6=validToken(_0x51df6a,_0x20adff),_0x5ea8d6[_0x30284f(0xd7)](_0x30284f(0x10b))?{'allow':!![],'reason':_0x30284f(0x172),'token':_0x51df6a}:{'allow':![],'reason':_0x30284f(0x148),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x204769=[...settings[_0x2ce660(0xd5)],_0x2ce660(0x105),'::ffff:127.0.0.1','127.0.0.1'];if(_0x204769[_0x2ce660(0xa2)](_0x4b9db3))return _0xfc3840(_0x500ce0);else{_0x5ea8d6=validToken(_0x500ce0,_0x20adff);if(_0x5ea8d6[_0x2ce660(0xd7)](_0x2ce660(0x10b)))return _0xfc3840(_0x500ce0);else{if(telegramIpApproved(_0x20adff)){const _0x263582=generateToken(_0x20adff);return _0x5ea8d6=_0xfc3840(_0x500ce0),_0x5ea8d6[_0x2ce660(0x8b)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x263582}:_0x5ea8d6;}else return settings[_0x2ce660(0xe7)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2ce660(0x132),'token':null};}}}else return _0xfc3840(_0x500ce0);}function timelyDecrypt(_0x54b9b0,_0x3ddc1f=!![]){const _0x111471=_0x9e0e44;if(_0x54b9b0)try{const _0x35ed44=crypt['decrypt'](secure[_0x111471(0x13d)],_0x54b9b0)[_0x111471(0xf1)],_0x4ca07c=_0x35ed44[_0x111471(0x14b)]('@')[0x0],_0x320059=_0x35ed44[_0x111471(0x14b)]('@')[0x1],_0x1434f1=new Date()[_0x111471(0x186)]();if(_0x3ddc1f){if(_0x1434f1-_0x320059<maxSecretAge*0x3e8)return _0x4ca07c;else return![];}else return _0x4ca07c;}catch(_0x1c1ed9){return![];}else return![];}const validToken=(_0x526e34,_0xf1e60b)=>{const _0x25fc63=_0x9e0e44,_0x58aa30=devices[_0xf1e60b]['ip'];if(!_0x526e34)return{'error':_0x25fc63(0x1f5)};for(let _0x5a08e9 of blacklist){if(_0x5a08e9[_0x25fc63(0x1d5)]==_0x526e34)return{'error':_0x25fc63(0x18e)};}let _0x21f941;try{_0x21f941=jwt[_0x25fc63(0x18b)](_0x526e34,secure['secret']+_0xf1e60b);}catch{return{'error':_0x25fc63(0x89)};}if(!_0x21f941['hasOwnProperty'](_0x25fc63(0x1f7))&&!_0x21f941['hasOwnProperty'](_0x25fc63(0x18d))||!_0x21f941[_0x25fc63(0xd7)](_0x25fc63(0x1de)))return{'error':_0x25fc63(0x14f)};if(!_0x21f941[_0x25fc63(0xd7)]('username')&&_0x21f941['hasOwnProperty'](_0x25fc63(0x1f7))){const {clientip:_0x848daf}=_0x21f941;return _0x58aa30==_0x848daf?{'success':_0x25fc63(0x10d)}:{'error':_0x25fc63(0x199)};}else{if(_0x21f941[_0x25fc63(0xd7)](_0x25fc63(0x18d))&&_0x21f941['hasOwnProperty']('clientip')){const {username:_0x20c9e7,clientip:_0x3f99c7}=_0x21f941;return settings[_0x25fc63(0x1e8)]==_0x20c9e7&&_0x58aa30==_0x3f99c7?{'success':_0x25fc63(0x10d)}:{'error':_0x25fc63(0xa3)};}}},generateLoginToken=_0x1077aa=>{const _0x5b4dc6=_0x9e0e44;if(_0x1077aa){const _0x3c8f76=devices[_0x1077aa]['ip'];return jwt[_0x5b4dc6(0x107)]({'username':settings[_0x5b4dc6(0x1e8)],'clientip':_0x3c8f76},secure['secret']+_0x1077aa,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3272b7=>{const _0x4d1a74=_0x9e0e44;if(_0x3272b7){const _0x44a745=devices[_0x3272b7]['ip'];return jwt[_0x4d1a74(0x107)]({'clientip':_0x44a745},secure['secret']+_0x3272b7,{'expiresIn':devices[_0x3272b7][_0x4d1a74(0xb1)][_0x4d1a74(0x14a)]*0x3c});}else return![];},telegramIpApproved=_0x38ef61=>{const _0x162dbc=_0x9e0e44;let _0x3dfcfe=![];return devices[_0x38ef61][_0x162dbc(0xb1)]&&devices[_0x38ef61][_0x162dbc(0xb1)][_0x162dbc(0x14a)]!=_0x162dbc(0xd2)&&(_0x3dfcfe=devices[_0x38ef61][_0x162dbc(0xb1)][_0x162dbc(0x1f7)]==devices[_0x38ef61]['ip']&&new Date()['getTime']()-devices[_0x38ef61]['telegramIpApproval'][_0x162dbc(0x1c5)]<devices[_0x38ef61][_0x162dbc(0xb1)][_0x162dbc(0x14a)]*0x3c*0x3e8),_0x3dfcfe;},telegram2FaApproved=_0x2b912e=>{const _0x571c00=_0x9e0e44;let _0x3428fb=![];return devices[_0x2b912e][_0x571c00(0x1cd)]&&devices[_0x2b912e][_0x571c00(0x1cd)]['expiry']!='reject'&&(_0x3428fb=devices[_0x2b912e][_0x571c00(0x1cd)]['clientip']==devices[_0x2b912e]['ip']&&new Date()['getTime']()-devices[_0x2b912e][_0x571c00(0x1cd)][_0x571c00(0x1c5)]<devices[_0x2b912e]['telegram2FaApproval'][_0x571c00(0x14a)]*0x3c*0x3e8),_0x3428fb;},normalizeIP=_0x5b5b3b=>{const _0x1b1ba9=_0x9e0e44;let _0x15a64c=null,_0x2de558=null;if(ipaddr[_0x1b1ba9(0x167)](_0x5b5b3b)){const _0x5b1786=ipaddr['parse'](_0x5b5b3b);_0x5b1786[_0x1b1ba9(0x8a)]()==='ipv6'?(_0x5b1786[_0x1b1ba9(0x98)]()&&(_0x15a64c=_0x5b1786[_0x1b1ba9(0x1af)]()[_0x1b1ba9(0x1d3)]()),_0x2de558=_0x5b1786[_0x1b1ba9(0x1d3)]()):(_0x15a64c=_0x5b1786['toString'](),_0x2de558=_0x5b1786['toIPv4MappedAddress']()[_0x1b1ba9(0x1d3)]());}return{'show':_0x15a64c?_0x15a64c:_0x2de558,'store':_0x2de558};};function sleep(_0x518b3d){return new Promise(_0x1d81ca=>setTimeout(_0x1d81ca,_0x518b3d));}