const _0x2f67b2=_0x463e;(function(_0x59198d,_0xfc849b){const _0x41de3b=_0x463e,_0x1a7f3d=_0x59198d();while(!![]){try{const _0x3db60f=parseInt(_0x41de3b(0x228))/0x1+-parseInt(_0x41de3b(0x1f1))/0x2+parseInt(_0x41de3b(0x1fd))/0x3*(parseInt(_0x41de3b(0x2a6))/0x4)+parseInt(_0x41de3b(0x246))/0x5*(parseInt(_0x41de3b(0x221))/0x6)+parseInt(_0x41de3b(0x1a0))/0x7*(-parseInt(_0x41de3b(0x279))/0x8)+parseInt(_0x41de3b(0x262))/0x9+-parseInt(_0x41de3b(0x237))/0xa;if(_0x3db60f===_0xfc849b)break;else _0x1a7f3d['push'](_0x1a7f3d['shift']());}catch(_0x3f2d50){_0x1a7f3d['push'](_0x1a7f3d['shift']());}}}(_0x7d06,0x3a35a));const _0x24817e=function(){let _0x554e54=!![];return function(_0xee3016,_0x4a34bd){const _0x124205=_0x554e54?function(){if(_0x4a34bd){const _0x3b78cf=_0x4a34bd['apply'](_0xee3016,arguments);return _0x4a34bd=null,_0x3b78cf;}}:function(){};return _0x554e54=![],_0x124205;};}(),_0x2cb9ce=_0x24817e(this,function(){const _0x229a5a=_0x463e;return _0x2cb9ce[_0x229a5a(0x205)]()['search']('(((.+)+)+)+$')[_0x229a5a(0x205)]()['constructor'](_0x2cb9ce)[_0x229a5a(0x2cd)](_0x229a5a(0x1f8));});_0x2cb9ce();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x2f67b2(0x23e)),FileSync=require(_0x2f67b2(0x1f2)),fs=require('fs'),fns=require(_0x2f67b2(0x276)),low=require(_0x2f67b2(0x271)),path=require(_0x2f67b2(0x1bf)),crypto=require(_0x2f67b2(0x25b)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x2f67b2(0x272))[_0x2f67b2(0x1eb)],bcrypt=require('bcryptjs'),jwt=require(_0x2f67b2(0x1ed)),analyticsLib=require('analytics')[_0x2f67b2(0x22d)],googleAnalytics=require(_0x2f67b2(0x277))[_0x2f67b2(0x22d)],ipaddr=require(_0x2f67b2(0x214)),argv=require(_0x2f67b2(0x26d))(process[_0x2f67b2(0x20d)]['slice'](0x2))[_0x2f67b2(0x20d)],PORT=argv[_0x2f67b2(0x2d1)]||_0x2f67b2(0x2cf),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x2f67b2(0x19d)](PORT))return console[_0x2f67b2(0x225)](_0x2f67b2(0x191)+PORT+_0x2f67b2(0x241)),process[_0x2f67b2(0x24d)](0x1);const HOST=argv['host']||null,userID=argv[_0x2f67b2(0x218)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x2f67b2(0x18f),configfile='bb-config.json',settingsfile=_0x2f67b2(0x2bb),securefile='bb-secure.json';!fs[_0x2f67b2(0x1ad)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2f67b2(0x2ae)),configpath=userID?bbpath+_0x2f67b2(0x196)+userID+'/':bbpath+_0x2f67b2(0x196),configbackuppath=configpath+_0x2f67b2(0x25d);!fs[_0x2f67b2(0x1ad)](configpath)&&fs[_0x2f67b2(0x2c7)](configpath);!fs[_0x2f67b2(0x1ad)](configbackuppath)&&fs[_0x2f67b2(0x2c7)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2f67b2(0x1da)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x2f67b2(0x29c)]();let crypt=new Crypt({'md':_0x2f67b2(0x2a8),'rsaStandard':_0x2f67b2(0x238)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2f67b2(0x1d8))[_0x2f67b2(0x1b0)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x2f67b2(0x20e))['createServer'](app);app[_0x2f67b2(0x26e)](express['static'](path['join'](__dirname,bbpath2,'build2'))),app[_0x2f67b2(0x26e)](express[_0x2f67b2(0x1d1)](path['join'](__dirname,bbpath2,_0x2f67b2(0x1cf)))),app[_0x2f67b2(0x2a7)]('/',function(_0x246b8d,_0x1f6e4d){const _0x544ba9=_0x2f67b2;_0x1f6e4d[_0x544ba9(0x239)](path['join'](__dirname,bbpath2,_0x544ba9(0x1dd),_0x544ba9(0x2c8)));}),app[_0x2f67b2(0x2a7)](_0x2f67b2(0x2c1),function(_0x2023d9,_0x59a083){const _0x36ac9e=_0x2f67b2;_0x59a083[_0x36ac9e(0x239)](path[_0x36ac9e(0x204)](__dirname,bbpath2,_0x36ac9e(0x1cf),_0x36ac9e(0x2c8)));}),app[_0x2f67b2(0x2a7)](_0x2f67b2(0x1cc),(_0x3cd3aa,_0x47bc5d)=>{const _0x163841=_0x2f67b2;_0x47bc5d[_0x163841(0x239)](path[_0x163841(0x204)](__dirname,bbpath2,_0x163841(0x1cf),'index.html'));}),app[_0x2f67b2(0x2a7)](_0x2f67b2(0x216),(_0x56faf0,_0x3a695b)=>{const _0x195d36=_0x2f67b2;_0x3a695b[_0x195d36(0x239)](path[_0x195d36(0x204)](__dirname,bbpath2,_0x195d36(0x1cf),_0x195d36(0x2c8)));}),app['get']('/:bot/coins',(_0x555d99,_0x47529c)=>{const _0x42ae9a=_0x2f67b2;_0x47529c['sendFile'](path['join'](__dirname,bbpath2,'build',_0x42ae9a(0x2c8)));}),app['get'](_0x2f67b2(0x24f),(_0x446e5a,_0x4f7986)=>{const _0xab7f05=_0x2f67b2;_0x4f7986[_0xab7f05(0x239)](path[_0xab7f05(0x204)](__dirname,bbpath2,_0xab7f05(0x1cf),_0xab7f05(0x2c8)));}),app[_0x2f67b2(0x2a7)]('/:bot/configuration',(_0x54ad98,_0x4d30af)=>{const _0x1f3d0c=_0x2f67b2;_0x4d30af['sendFile'](path['join'](__dirname,bbpath2,_0x1f3d0c(0x1cf),_0x1f3d0c(0x2c8)));}),app[_0x2f67b2(0x2a7)](_0x2f67b2(0x208),(_0x69339,_0x2cc326)=>{const _0x1d1392=_0x2f67b2;_0x2cc326[_0x1d1392(0x239)](path[_0x1d1392(0x204)](__dirname,bbpath2,_0x1d1392(0x1cf),_0x1d1392(0x2c8)));});if(HOST)http[_0x2f67b2(0x1f5)](PORT,HOST);else http[_0x2f67b2(0x1f5)](PORT);const io=require(_0x2f67b2(0x266))(http,{}),analytics=analyticsLib({'app':_0x2f67b2(0x1a7),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x2f67b2(0x22b));let tgBot;if(settings[_0x2f67b2(0x1a1)]&&settings[_0x2f67b2(0x1a1)]!=''&&settings[_0x2f67b2(0x1b3)]&&settings[_0x2f67b2(0x1b3)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2a46ee=_0x2f67b2;console['log'](''),console['log']('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x2a46ee(0x225)](_0x2a46ee(0x23d));if(config[_0x2a46ee(0x1c2)]!=0x0)config['forEach'](_0x51244f=>{const _0x10918f=_0x2a46ee;if(_0x51244f[_0x10918f(0x27a)]==_0x10918f(0x29f)||_0x51244f[_0x10918f(0x27a)]==_0x10918f(0x1d6))logging(_0x10918f(0x282)+_0x51244f[_0x10918f(0x2aa)]+_0x10918f(0x2af)+_0x51244f[_0x10918f(0x230)]),startBot([_0x51244f[_0x10918f(0x2aa)],userID],{'cwd':bbpath},function(_0x4a7f03){if(_0x4a7f03)logging(_0x4a7f03);});else(_0x51244f['status']==_0x10918f(0x2b3)||_0x51244f[_0x10918f(0x27a)]==_0x10918f(0x236))&&logging(_0x10918f(0x28e)+_0x51244f[_0x10918f(0x2aa)]+'\x20|\x20'+_0x51244f[_0x10918f(0x230)]);});else!newBot&&console[_0x2a46ee(0x225)](_0x2a46ee(0x212));if(newBot)addBot();console[_0x2a46ee(0x225)](_0x2a46ee(0x23d)),console['log']('');}function startSocket(){io['on']('connection',_0x56c04b=>{const _0x3e5071=_0x463e;let _0x32b2dd,_0x593205,_0x3a1d68,_0x5b582d,_0x51a533;const _0x2c2951=_0x56c04b[_0x3e5071(0x1a4)][_0x3e5071(0x2bd)][_0x3e5071(0x1a8)];_0x593205=_0x2c2951[_0x3e5071(0x2c4)](/bot[0-9]{3}/);if(_0x593205)_0x3a1d68=_0x593205[0x0][_0x3e5071(0x2c4)](/[0-9]{3}/);if(_0x3a1d68)_0x32b2dd=_0x3a1d68[0x0];else _0x32b2dd=_0x3e5071(0x294);const _0x2f00b2=_0x56c04b['handshake'][_0x3e5071(0x2b0)]['encryptedUuid'];if(!_0x2f00b2)_0x56c04b[_0x3e5071(0x25c)]('status',{'publicKey':secure[_0x3e5071(0x269)]});else{_0x5b582d=timelyDecrypt(_0x2f00b2,![]);if(!_0x5b582d)logging(_0x3e5071(0x233));else{_0x51a533=normalizeIP(_0x56c04b[_0x3e5071(0x200)][_0x3e5071(0x257)])[_0x3e5071(0x1cb)];if(!devices[_0x5b582d])devices[_0x5b582d]={'uuid':_0x5b582d,'access':{'token':null}};devices[_0x5b582d]['ip']=_0x51a533;const _0x3c11c1=addClient(_0x56c04b['id'],_0x5b582d,_0x32b2dd);setAccess(_0x3c11c1),_0x56c04b['on'](_0x3e5071(0x201),_0x36aa31=>{const _0x36b714=_0x3e5071,_0xd1537e=timelyDecrypt(_0x36aa31[_0x36b714(0x195)]);if(_0xd1537e){_0x36aa31={'username':_0x36aa31['username'],'password':_0xd1537e},devices[_0x5b582d][_0x36b714(0x2a9)]=validateCredentials(_0x36aa31,_0x5b582d);if(devices[_0x5b582d][_0x36b714(0x2a9)][_0x36b714(0x1c5)]==![]&&devices[_0x5b582d][_0x36b714(0x2a9)][_0x36b714(0x220)]==_0x36b714(0x1e5))_0x56c04b['emit'](_0x36b714(0x27a),{'access':devices[_0x5b582d][_0x36b714(0x2a9)]}),loginAccess2FA(_0x5b582d,_0x51a533);else{if(devices[_0x5b582d][_0x36b714(0x2a9)]['allow']==![]&&devices[_0x5b582d][_0x36b714(0x2a9)][_0x36b714(0x220)]==_0x36b714(0x1ce))_0x56c04b[_0x36b714(0x25c)](_0x36b714(0x27a),{'access':devices[_0x5b582d][_0x36b714(0x2a9)]});else devices[_0x5b582d][_0x36b714(0x2a9)][_0x36b714(0x1c5)]&&devices[_0x5b582d]['access']['reason']==_0x36b714(0x223)&&(getClientsWithUuid(_0x5b582d)['forEach'](_0x1047bd=>{setAccess(_0x1047bd);}),setTokenRefresh(_0x5b582d),setSessionTimeout(_0x36b714(0x201),_0x5b582d));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x56c04b['on'](_0x3e5071(0x27e),()=>{resetPassword();}),_0x56c04b['on']('disconnect',_0x2cb2c8=>{removeClient(_0x56c04b['id']);});}}});}function initClient(_0x4fef09){const _0x1d4db1=_0x2f67b2;if(_0x4fef09!=_0x1d4db1(0x294)&&config['apiKey']!=''){if(pid[_0x4fef09])pid[_0x4fef09][_0x1d4db1(0x1b6)]({'function':_0x1d4db1(0x267),'args':null});}}function getSocket(_0x3c687b){const _0x28954c=_0x2f67b2;return io[_0x28954c(0x24b)][_0x28954c(0x24b)]['get'](_0x3c687b);}function setAccess(_0x2f372f){const _0x3035cc=_0x2f67b2,_0x58dd55=getSocket(_0x2f372f['id']),_0x44ddc8=_0x2f372f[_0x3035cc(0x226)],_0x5b71cd=_0x2f372f['bot'];devices[_0x44ddc8][_0x3035cc(0x2a9)]=validateAccess(devices[_0x44ddc8][_0x3035cc(0x2a9)]['token'],_0x44ddc8),_0x58dd55[_0x3035cc(0x204)](_0x44ddc8);if(devices[_0x44ddc8][_0x3035cc(0x2a9)][_0x3035cc(0x1c5)]){_0x58dd55[_0x3035cc(0x204)](_0x5b71cd);if(_0x5b71cd==_0x3035cc(0x294))initializeSocketBotManager(_0x58dd55);else initializeSocketBot(_0x58dd55);initClient(_0x5b71cd);}devices[_0x44ddc8][_0x3035cc(0x2a9)][_0x3035cc(0x1e0)]&&devices[_0x44ddc8]['access']['reason']==_0x3035cc(0x1fa)&&setSessionTimeout(_0x3035cc(0x2ca),_0x44ddc8),devices[_0x44ddc8]['access'][_0x3035cc(0x1e0)]&&devices[_0x44ddc8][_0x3035cc(0x2a9)]['reason']==_0x3035cc(0x2b8)&&setSessionTimeout('login',_0x44ddc8),_0x58dd55[_0x3035cc(0x25c)](_0x3035cc(0x27a),{'status':_0x2f372f[_0x3035cc(0x1ee)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x44ddc8][_0x3035cc(0x2a9)],'externalip':devices[_0x44ddc8]['ip'],'publicKey':secure[_0x3035cc(0x269)]}),devices[_0x44ddc8][_0x3035cc(0x2a9)]['allow']==![]&&devices[_0x44ddc8][_0x3035cc(0x2a9)][_0x3035cc(0x220)]==_0x3035cc(0x1e8)&&temporaryAccess2FA(_0x44ddc8,devices[_0x44ddc8]['ip']);}function setSessionTimeout(_0x4e4450,_0x5c546b){const _0x1dccd3=_0x2f67b2;let _0x53b752;if(_0x4e4450==_0x1dccd3(0x201))_0x53b752=loginExpiry*0x3c*0x3e8;else _0x53b752=devices[_0x5c546b][_0x1dccd3(0x249)][_0x1dccd3(0x244)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x5c546b][_0x1dccd3(0x249)][_0x1dccd3(0x21a)]);if(devices[_0x5c546b][_0x1dccd3(0x1a6)])clearTimeout(devices[_0x5c546b][_0x1dccd3(0x1a6)]);devices[_0x5c546b][_0x1dccd3(0x1a6)]=setTimeout(()=>{const _0x27ccf4=_0x1dccd3;if(devices[_0x5c546b][_0x27ccf4(0x231)])clearTimeout(devices[_0x5c546b]['pidRefreshToken']);removeSocketListeners(_0x5c546b),addBlacklist(_0x5c546b),devices[_0x5c546b][_0x27ccf4(0x249)]=null,devices[_0x5c546b][_0x27ccf4(0x1f7)]=null,devices[_0x5c546b][_0x27ccf4(0x2a9)][_0x27ccf4(0x1e0)]=null,devices[_0x5c546b]['access']=validateAccess(devices[_0x5c546b]['access'][_0x27ccf4(0x1e0)],_0x5c546b),!(devices[_0x5c546b]['access'][_0x27ccf4(0x1c5)]&&devices[_0x5c546b][_0x27ccf4(0x2a9)][_0x27ccf4(0x220)]==_0x27ccf4(0x251))&&(_0x4e4450==_0x27ccf4(0x201)?io['to'](_0x5c546b)[_0x27ccf4(0x25c)](_0x27ccf4(0x27a),{'access':{'allow':![],'reason':_0x27ccf4(0x25f),'token':null}}):io['to'](_0x5c546b)[_0x27ccf4(0x25c)](_0x27ccf4(0x27a),{'access':{'allow':![],'reason':_0x27ccf4(0x222),'token':null}})),devices[_0x5c546b]['access'][_0x27ccf4(0x1e0)]=null;},_0x53b752);}function setTokenRefresh(_0x3ed5d2){const _0x21da2d=_0x2f67b2;if(devices[_0x3ed5d2][_0x21da2d(0x231)])clearTimeout(devices[_0x3ed5d2][_0x21da2d(0x231)]);devices[_0x3ed5d2]['pidRefreshToken']=setTimeout(()=>{const _0xdd1b63=_0x21da2d;getClientsWithUuid(_0x3ed5d2)[_0xdd1b63(0x1c2)]!=0x0?(devices[_0x3ed5d2][_0xdd1b63(0x2a9)]=refreshToken(_0x3ed5d2),io['to'](_0x3ed5d2)[_0xdd1b63(0x25c)](_0xdd1b63(0x27a),{'status':_0xdd1b63(0x289),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3ed5d2][_0xdd1b63(0x2a9)],'externalip':devices[_0x3ed5d2]['ip'],'publicKey':secure[_0xdd1b63(0x269)]}),setTokenRefresh(_0x3ed5d2)):clearTimeout(devices[_0x3ed5d2][_0xdd1b63(0x231)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x526fe0){const _0x7ac9aa=_0x2f67b2,_0x32a4b3=getClient(_0x526fe0['id'])['uuid'];_0x526fe0['emit']('bots',config),_0x526fe0[_0x7ac9aa(0x25c)](_0x7ac9aa(0x1be),cleanSettings()),_0x526fe0['on'](_0x7ac9aa(0x1f0),_0x545bdd=>{const _0xa7e69c=_0x7ac9aa;if(validateAccess(_0x545bdd,_0x32a4b3)['allow'])addBot();else logging(_0xa7e69c(0x1bc));}),_0x526fe0['on'](_0x7ac9aa(0x2b4),(_0xbc00ca,_0xbaf54)=>{const _0x17c6d9=_0x7ac9aa;if(validateAccess(_0xbaf54,_0x32a4b3)[_0x17c6d9(0x1c5)])toggleBot(_0xbc00ca[_0x17c6d9(0x2aa)],_0xbc00ca[_0x17c6d9(0x27a)],_0xbc00ca[_0x17c6d9(0x1b9)]);else logging(_0x17c6d9(0x1ec));}),_0x526fe0['on'](_0x7ac9aa(0x224),(_0x5c36b0,_0x2af718)=>{const _0x5d2daf=_0x7ac9aa;if(validateAccess(_0x2af718,_0x32a4b3)[_0x5d2daf(0x1c5)])deleteBot(_0x5c36b0);else logging(_0x5d2daf(0x19c));}),_0x526fe0['on'](_0x7ac9aa(0x1f3),(_0x3c95c8,_0x37afaa)=>{const _0x39b510=_0x7ac9aa;if(validateAccess(_0x37afaa,_0x32a4b3)[_0x39b510(0x1c5)])storeSettings(_0x3c95c8,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x526fe0['on'](_0x7ac9aa(0x19f),(_0x5d7fd0,_0x30b9ed)=>{const _0x432d9=_0x7ac9aa;if(validateAccess(_0x30b9ed,_0x32a4b3)[_0x432d9(0x1c5)])updateBB();else logging(_0x432d9(0x1fe));}),_0x526fe0['on'](_0x7ac9aa(0x1e3),_0x287406=>{const _0x3b773a=_0x7ac9aa;if(validateAccess(_0x287406,_0x32a4b3)[_0x3b773a(0x1c5)]){if(devices[_0x32a4b3][_0x3b773a(0x231)])clearTimeout(devices[_0x32a4b3][_0x3b773a(0x231)]);if(devices[_0x32a4b3]['pidExpireLogin'])clearTimeout(devices[_0x32a4b3][_0x3b773a(0x1a6)]);removeSocketListeners(getClient(_0x526fe0['id'])[_0x3b773a(0x226)]),addBlacklist(_0x32a4b3),devices[_0x32a4b3][_0x3b773a(0x249)]=null,devices[_0x32a4b3]['telegram2FaApproval']=null,devices[_0x32a4b3][_0x3b773a(0x2a9)][_0x3b773a(0x1e0)]=null,io['to'](getClient(_0x526fe0['id'])[_0x3b773a(0x226)])[_0x3b773a(0x25c)](_0x3b773a(0x27a),{'access':{'allow':![],'reason':_0x3b773a(0x1d2),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x3ff768){const _0x22d69b=_0x2f67b2,_0x33a075=getClient(_0x3ff768['id'])[_0x22d69b(0x286)],_0x2bdf15=getClient(_0x3ff768['id'])[_0x22d69b(0x226)];_0x3ff768['on'](_0x22d69b(0x2ce),(_0x34d1d4,_0x24fc78)=>{const _0x192f78=_0x22d69b;if(validateAccess(_0x24fc78,_0x2bdf15)[_0x192f78(0x1c5)]){if(pid[_0x33a075])pid[_0x33a075][_0x192f78(0x1b6)]({'function':'emitHistory','args':_0x34d1d4});}else logging(_0x192f78(0x2d0));}),_0x3ff768['on'](_0x22d69b(0x264),(_0x3d9944,_0x3aeeaf)=>{const _0x127a3d=_0x22d69b;if(validateAccess(_0x3aeeaf,_0x2bdf15)[_0x127a3d(0x1c5)]){if(pid[_0x33a075])pid[_0x33a075][_0x127a3d(0x1b6)]({'function':'getPortfolio','args':_0x3d9944});}else logging(_0x127a3d(0x1b4));}),_0x3ff768['on']('store-configuration',(_0x4af667,_0x8ba0ab)=>{if(validateAccess(_0x8ba0ab,_0x2bdf15)['allow']){if(pid[_0x33a075])pid[_0x33a075]['send']({'function':'storeConfiguration','args':_0x4af667});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3ff768['on'](_0x22d69b(0x2a4),(_0x4f5fca,_0x21ed2b)=>{const _0x481010=_0x22d69b;if(validateAccess(_0x21ed2b,_0x2bdf15)[_0x481010(0x1c5)]){if(pid[_0x33a075])pid[_0x33a075][_0x481010(0x1b6)]({'function':_0x481010(0x2a1),'args':_0x4f5fca});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3ff768['on'](_0x22d69b(0x23c),_0x443896=>{const _0x186721=_0x22d69b;if(validateAccess(_0x443896,_0x2bdf15)['allow']){if(pid[_0x33a075])pid[_0x33a075]['send']({'function':_0x186721(0x1bb),'args':null});}else logging(_0x186721(0x291));}),_0x3ff768['on'](_0x22d69b(0x19e),(_0x3b82aa,_0x2f344a)=>{const _0x242493=_0x22d69b;if(validateAccess(_0x2f344a,_0x2bdf15)[_0x242493(0x1c5)]){if(pid[_0x33a075])pid[_0x33a075]['send']({'function':_0x242493(0x1ca),'args':_0x3b82aa});}else logging(_0x242493(0x1d5));}),_0x3ff768['on']('cancel-loading',_0x13e0c9=>{const _0x1d242b=_0x22d69b;if(validateAccess(_0x13e0c9,_0x2bdf15)['allow']){if(pid[_0x33a075])pid[_0x33a075]['send']({'function':_0x1d242b(0x28a),'args':null});}else logging(_0x1d242b(0x1b1));}),_0x3ff768['on'](_0x22d69b(0x1e3),_0x2c5cb8=>{const _0x2d310c=_0x22d69b;if(validateAccess(_0x2c5cb8,_0x2bdf15)[_0x2d310c(0x1c5)]){if(devices[_0x2bdf15][_0x2d310c(0x231)])clearTimeout(devices[_0x2bdf15][_0x2d310c(0x231)]);if(devices[_0x2bdf15][_0x2d310c(0x1a6)])clearTimeout(devices[_0x2bdf15][_0x2d310c(0x1a6)]);removeSocketListeners(getClient(_0x3ff768['id'])['uuid']),addBlacklist(_0x2bdf15),devices[_0x2bdf15][_0x2d310c(0x249)]=null,devices[_0x2bdf15][_0x2d310c(0x1f7)]=null,devices[_0x2bdf15][_0x2d310c(0x2a9)][_0x2d310c(0x1e0)]=null,io['to'](getClient(_0x3ff768['id'])[_0x2d310c(0x226)])[_0x2d310c(0x25c)](_0x2d310c(0x27a),{'access':{'allow':![],'reason':_0x2d310c(0x1d2),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x566a50){const _0xd24b2a=_0x2f67b2;getClientsWithUuid(_0x566a50)[_0xd24b2a(0x274)](_0x1c83bf=>{const _0x4bce67=_0xd24b2a;getSocket(_0x1c83bf['id'])[_0x4bce67(0x2c0)]();});}function _0x463e(_0x19a70c,_0x566359){const _0x1b9249=_0x7d06();return _0x463e=function(_0x2cb9ce,_0x24817e){_0x2cb9ce=_0x2cb9ce-0x18f;let _0x7d06b8=_0x1b9249[_0x2cb9ce];return _0x7d06b8;},_0x463e(_0x19a70c,_0x566359);}function cleanSettings(){const _0x5754e2=_0x2f67b2;let _0xdf9dd5=settings;return settings['telegramToken']&&settings[_0x5754e2(0x1a1)]!=''&&(_0xdf9dd5={..._0xdf9dd5,'telegramToken':_0x5754e2(0x278)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0xdf9dd5={..._0xdf9dd5,'bbPassword':_0x5754e2(0x278)}),_0xdf9dd5;}function updateBB(){const _0x2786c1=_0x2f67b2;process[_0x2786c1(0x1b6)]({'update':!![]});}function startBot(_0x45494d,_0x65facf,_0x124bd5){const _0x55989e=_0x2f67b2;let _0x2ea9e1=![];const _0x22c102=_0x45494d[0x0];_0x65facf={..._0x65facf,'stdio':[_0x55989e(0x255),_0x55989e(0x255),_0x55989e(0x255),_0x55989e(0x213)]},pid[_0x22c102]=childProcess[_0x55989e(0x229)](botfile,_0x45494d,_0x65facf),pid[_0x22c102]['on'](_0x55989e(0x25a),_0x5e0874=>{const _0x23580a=_0x55989e;switch(Object[_0x23580a(0x253)](_0x5e0874)[0x0]){case _0x23580a(0x230):updateBotName(_0x22c102,_0x5e0874[_0x23580a(0x230)]);break;case'status':updateStatus(_0x22c102,_0x5e0874[_0x23580a(0x27a)]);break;case _0x23580a(0x1b9):updateLive(_0x22c102,_0x5e0874[_0x23580a(0x1b9)]);break;case _0x23580a(0x1ac):updateLive(_0x22c102,_0x5e0874[_0x23580a(0x1ac)]),io['to'](_0x22c102)[_0x23580a(0x25c)](_0x23580a(0x27a),{'access':{'allow':![],'reason':_0x23580a(0x1f4),'token':null}});break;case _0x23580a(0x22c):_0x5e0874[_0x23580a(0x22c)]==_0x23580a(0x2cb)&&stopBot(_0x22c102);_0x5e0874[_0x23580a(0x22c)]==_0x23580a(0x247)&&toggleBot(_0x22c102,_0x23580a(0x2b3),'stopped');break;case _0x23580a(0x21e):sendTelegram(_0x22c102,_0x5e0874[_0x23580a(0x21e)]);break;case _0x23580a(0x227):io['to'](_0x22c102)['emit'](_0x5e0874[_0x23580a(0x227)],_0x5e0874[_0x23580a(0x1a3)]);break;}}),pid[_0x22c102]['on'](_0x55989e(0x19a),function(_0x4f6f5f){if(_0x2ea9e1)return;_0x2ea9e1=!![],_0x124bd5(_0x4f6f5f);}),pid[_0x22c102]['on'](_0x55989e(0x24d),function(_0x3d9baf){const _0x5690b3=_0x55989e;if(_0x2ea9e1)return;_0x2ea9e1=!![],_0x124bd5(null);const _0x247082=dbConfig[_0x5690b3(0x2a7)]('bots')[_0x5690b3(0x202)]({'botID':_0x22c102})['value']();_0x247082&&(_0x247082[_0x5690b3(0x27a)]==_0x5690b3(0x29f)||_0x247082[_0x5690b3(0x27a)]==_0x5690b3(0x1d6))&&(updateLive(_0x22c102,_0x5690b3(0x1b2)),logging('restarting\x20Bot\x20'+_0x22c102),startBot([_0x22c102,userID],{'cwd':bbpath},function(_0x5bd47f){if(_0x5bd47f)logging(_0x5bd47f);}));});}function stopBot(_0x5d12d6){const _0x4922c1=_0x2f67b2;getClientsWithBotID(_0x5d12d6)[_0x4922c1(0x274)](_0x16f426=>{const _0x429dc2=_0x4922c1;getSocket(_0x16f426['id'])[_0x429dc2(0x1db)](!![]),removeClient(_0x16f426['id']);});if(pid[_0x5d12d6])pid[_0x5d12d6][_0x4922c1(0x247)]();}function addBot(){const _0x2db8f0=_0x2f67b2;let _0x31601e;for(let _0x3131b5=0x1;_0x3131b5<0x3e9;_0x3131b5++){_0x31601e=_0x3131b5[_0x2db8f0(0x205)]()[_0x2db8f0(0x297)](0x3,'0');let _0x260bc5=config[_0x2db8f0(0x202)](_0x4c7296=>_0x4c7296[_0x2db8f0(0x2aa)]==_0x31601e);if(!_0x260bc5)break;}if(_0x31601e===_0x2db8f0(0x2ad)){logging(_0x2db8f0(0x23a));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x31601e),dbConfig[_0x2db8f0(0x2a7)](_0x2db8f0(0x234))[_0x2db8f0(0x240)]({'botID':_0x31601e,'botname':'Bot\x20'+_0x31601e,'status':'new','live':''})[_0x2db8f0(0x29c)](),startBot([_0x31601e,userID],{'cwd':bbpath},function(_0x3ff2f6){if(_0x3ff2f6)logging(_0x3ff2f6);}),config=getConfiguration(),io['to'](_0x2db8f0(0x294))[_0x2db8f0(0x25c)]('bots',config);}function deleteBot(_0x51ce0a){const _0x1e8d80=_0x2f67b2;getClientsWithBotID(_0x51ce0a)['forEach'](_0x18076c=>{const _0x51d1e6=_0x463e;getSocket(_0x18076c['id'])[_0x51d1e6(0x1db)](!![]),removeClient(_0x18076c['id']);}),dbConfig[_0x1e8d80(0x2a7)]('bots')[_0x1e8d80(0x29a)]({'botID':_0x51ce0a})[_0x1e8d80(0x29c)](),logging(_0x1e8d80(0x219)+_0x51ce0a),stopBot(_0x51ce0a);try{fs[_0x1e8d80(0x21d)](path[_0x1e8d80(0x204)](configpath,'bot-'+_0x51ce0a+_0x1e8d80(0x22e))),fs['unlinkSync'](path[_0x1e8d80(0x204)](configpath,_0x1e8d80(0x258)+_0x51ce0a+'-events.json')),fs['unlinkSync'](path['join'](configpath,_0x1e8d80(0x258)+_0x51ce0a+'-performance.json')),fs['unlinkSync'](path[_0x1e8d80(0x204)](configpath,_0x1e8d80(0x258)+_0x51ce0a+_0x1e8d80(0x27d)));}catch(_0x9a6b56){if(_0x9a6b56)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x9a6b56);}config=getConfiguration(),io['to']('botmanager')[_0x1e8d80(0x25c)](_0x1e8d80(0x234),config);}function toggleBot(_0x1a614f,_0x2d8f32,_0x3c7700){const _0xdc22ce=_0x2f67b2;dbConfig[_0xdc22ce(0x2a7)](_0xdc22ce(0x234))[_0xdc22ce(0x202)]({'botID':_0x1a614f})[_0xdc22ce(0x2cc)]({'status':_0x2d8f32})[_0xdc22ce(0x2cc)]({'live':_0x3c7700})['write']();if(_0x2d8f32==_0xdc22ce(0x29f)||_0x2d8f32==_0xdc22ce(0x1d6))logging(_0xdc22ce(0x287)+_0x1a614f),startBot([_0x1a614f,userID],{'cwd':bbpath},function(_0x2296e2){if(_0x2296e2)logging(_0x2296e2);});else(_0x2d8f32=='disabled'||_0x2d8f32==_0xdc22ce(0x236))&&(logging('disabled\x20Bot\x20'+_0x1a614f),stopBot(_0x1a614f));config=getConfiguration(),io['to'](_0xdc22ce(0x294))[_0xdc22ce(0x25c)]('bots',config);}function toggleStatus(_0x256724){const _0x3416e1=_0x2f67b2;let _0x27aea8=dbConfig['get'](_0x3416e1(0x234))[_0x3416e1(0x202)]({'botID':_0x256724})[_0x3416e1(0x20a)](),_0x444447;if(_0x27aea8[_0x3416e1(0x27a)]==='enabled')_0x444447=_0x3416e1(0x2b3);else{if(_0x27aea8['status']==='new')_0x444447=_0x3416e1(0x236);else{if(_0x27aea8[_0x3416e1(0x27a)]===_0x3416e1(0x236))_0x444447=_0x3416e1(0x1d6);else{if(_0x27aea8[_0x3416e1(0x27a)]===_0x3416e1(0x2b3))_0x444447=_0x3416e1(0x29f);}}}return _0x444447;}function updateStatus(_0x4610ef,_0x324cc4){const _0x25eb3d=_0x2f67b2;dbConfig[_0x25eb3d(0x2a7)](_0x25eb3d(0x234))[_0x25eb3d(0x202)]({'botID':_0x4610ef})[_0x25eb3d(0x2cc)]({'status':_0x324cc4})[_0x25eb3d(0x29c)](),config=getConfiguration(),io['to'](_0x25eb3d(0x294))[_0x25eb3d(0x25c)](_0x25eb3d(0x234),config);}function updateLive(_0x18345c,_0x3c22f6){const _0x9bf11f=_0x2f67b2;dbConfig[_0x9bf11f(0x2a7)](_0x9bf11f(0x234))[_0x9bf11f(0x202)]({'botID':_0x18345c})[_0x9bf11f(0x2cc)]({'live':_0x3c22f6})['write'](),config=getConfiguration(),io['to'](_0x9bf11f(0x294))[_0x9bf11f(0x25c)](_0x9bf11f(0x234),config);}function updateBotName(_0x13c960,_0x22693e){const _0x159953=_0x2f67b2;dbConfig[_0x159953(0x2a7)](_0x159953(0x234))[_0x159953(0x202)]({'botID':_0x13c960})[_0x159953(0x2cc)]({'botname':_0x22693e})[_0x159953(0x29c)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x159953(0x234),config);}function telegramError(_0x2df72f){const _0x56923c=_0x2f67b2;console[_0x56923c(0x225)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x520314){const _0x1a0286=_0x2f67b2;if(_0x520314[_0x1a0286(0x250)][_0x1a0286(0x2b2)]!=settings[_0x1a0286(0x1b3)]&&'@'+_0x520314[_0x1a0286(0x250)][_0x1a0286(0x2b2)]!=settings[_0x1a0286(0x1b3)])return tgBot['sendMessage'](_0x520314[_0x1a0286(0x259)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1a0286(0x28c)})[_0x1a0286(0x1b7)](_0x1ce676=>{telegramError(_0x1ce676);}),![];return!![];}async function initTelegram(){const _0x1a9cc1=_0x2f67b2;if(tgBot)tgBot[_0x1a9cc1(0x1df)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1a9cc1(0x1a1)],{'polling':!![]});let _0x1fde85=_0x1a9cc1(0x265);_0x1fde85+='\x0a',_0x1fde85+=_0x1a9cc1(0x203),_0x1fde85+=_0x1a9cc1(0x192),_0x1fde85+=_0x1a9cc1(0x261),_0x1fde85+=_0x1a9cc1(0x1cd),_0x1fde85+=_0x1a9cc1(0x29b),_0x1fde85+=_0x1a9cc1(0x22a),_0x1fde85+=_0x1a9cc1(0x252),_0x1fde85+=_0x1a9cc1(0x1ae);let _0x45b772=_0x1a9cc1(0x19b);_0x45b772+='\x0a',_0x45b772+=_0x1fde85,tgBot[_0x1a9cc1(0x27c)](/\/start/,_0x542cd3=>{const _0x5a4dfa=_0x1a9cc1;if(!validateTelegram(_0x542cd3))return;if(settings[_0x5a4dfa(0x1a9)]!=_0x542cd3[_0x5a4dfa(0x259)]['id'])updateSetting('telegramChatId',_0x542cd3[_0x5a4dfa(0x259)]['id']);updateSetting(_0x5a4dfa(0x1c6),!![]),tgBot[_0x5a4dfa(0x1c4)](_0x542cd3[_0x5a4dfa(0x259)]['id'],_0x45b772)[_0x5a4dfa(0x1b7)](_0x7cd0ae=>{telegramError(_0x7cd0ae);});}),tgBot[_0x1a9cc1(0x27c)](/\/enable/,_0x21cd7d=>{const _0x1a8496=_0x1a9cc1;if(!validateTelegram(_0x21cd7d))return;if(settings[_0x1a8496(0x1a9)]!=_0x21cd7d[_0x1a8496(0x259)]['id'])updateSetting(_0x1a8496(0x1a9),_0x21cd7d[_0x1a8496(0x259)]['id']);updateSetting(_0x1a8496(0x1c6),!![]),tgBot[_0x1a8496(0x1c4)](_0x21cd7d[_0x1a8496(0x259)]['id'],'Notifications\x20enabled')['catch'](_0xf180b1=>{telegramError(_0xf180b1);});}),tgBot[_0x1a9cc1(0x27c)](/\/config/,async _0x182b4e=>{const _0x25a99d=_0x1a9cc1;if(!validateTelegram(_0x182b4e))return;tgBot[_0x25a99d(0x295)](_0x25a99d(0x193)),tgBot[_0x25a99d(0x1c4)](_0x182b4e[_0x25a99d(0x259)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x25a99d(0x24e),'callback_data':_0x25a99d(0x26f)},{'text':_0x25a99d(0x1af),'callback_data':_0x25a99d(0x2b5)},{'text':'All','callback_data':_0x25a99d(0x268)}]]}})[_0x25a99d(0x1b7)](_0x372b0d=>{telegramError(_0x372b0d);}),tgBot['on'](_0x25a99d(0x193),async _0x110bf4=>{const _0x3803c0=_0x25a99d,_0x26f2e8=_0x110bf4[_0x3803c0(0x280)],_0x444bb7=_0x110bf4[_0x3803c0(0x25a)];tgBot[_0x3803c0(0x273)](_0x110bf4['id'])[_0x3803c0(0x211)](async()=>{const _0x9257ee=_0x3803c0;_0x26f2e8==_0x9257ee(0x26f)&&(updateSetting(_0x9257ee(0x23f),_0x9257ee(0x26f)),updateSetting(_0x9257ee(0x1c6),!![]),await tgBot['sendMessage'](_0x444bb7[_0x9257ee(0x259)]['id'],_0x9257ee(0x1e6))[_0x9257ee(0x1b7)](_0x5eb5ac=>{telegramError(_0x5eb5ac);}));_0x26f2e8=='alerts'&&(updateSetting(_0x9257ee(0x23f),_0x9257ee(0x2b5)),updateSetting(_0x9257ee(0x1c6),!![]),await tgBot[_0x9257ee(0x1c4)](_0x444bb7[_0x9257ee(0x259)]['id'],_0x9257ee(0x275))[_0x9257ee(0x1b7)](_0x3c1727=>{telegramError(_0x3c1727);}));_0x26f2e8==_0x9257ee(0x268)&&(updateSetting(_0x9257ee(0x23f),_0x9257ee(0x268)),updateSetting('telegramEnabled',!![]),await tgBot[_0x9257ee(0x1c4)](_0x444bb7[_0x9257ee(0x259)]['id'],_0x9257ee(0x2b9))['catch'](_0x47a1d1=>{telegramError(_0x47a1d1);}));if(!settings[_0x9257ee(0x1a9)])tgBot['sendMessage'](_0x444bb7[_0x9257ee(0x259)]['id'],_0x9257ee(0x1b8))['catch'](_0x2fa5a7=>{telegramError(_0x2fa5a7);});}),tgBot[_0x3803c0(0x295)](_0x3803c0(0x193));});}),tgBot['onText'](/\/status/,_0x1bcec4=>{const _0x42500a=_0x1a9cc1;if(!validateTelegram(_0x1bcec4))return;let _0x574b46='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x42500a(0x274)](_0x4a5f01=>{const _0x5e4816=_0x42500a;_0x574b46+=_0x5e4816(0x292)+_0x4a5f01[_0x5e4816(0x2aa)]+_0x5e4816(0x2af)+_0x4a5f01[_0x5e4816(0x230)]+':\x20'+_0x4a5f01[_0x5e4816(0x27a)]+_0x5e4816(0x1d7)+_0x4a5f01[_0x5e4816(0x1b9)]+'\x0a';}),_0x574b46+='\x0a',_0x574b46+=_0x42500a(0x1b5),_0x574b46+=!settings[_0x42500a(0x1c6)]?_0x42500a(0x1bd):'Notifications\x20enabled\x0a',_0x574b46+=settings[_0x42500a(0x1c6)]?settings[_0x42500a(0x23f)]==_0x42500a(0x268)?_0x42500a(0x26b):_0x42500a(0x2a3)+settings[_0x42500a(0x23f)]+_0x42500a(0x1ab):'',tgBot[_0x42500a(0x1c4)](_0x1bcec4[_0x42500a(0x259)]['id'],_0x574b46,{'parse_mode':_0x42500a(0x28c)})['catch'](_0x201695=>{telegramError(_0x201695);});}),tgBot[_0x1a9cc1(0x27c)](/\/restart/,_0x312328=>{const _0x55cdec=_0x1a9cc1;if(!validateTelegram(_0x312328))return;tgBot[_0x55cdec(0x295)](_0x55cdec(0x193));const _0x2c09b5=getEnabledBots();if(_0x2c09b5['length']==0x0)tgBot[_0x55cdec(0x1c4)](_0x312328[_0x55cdec(0x259)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x55cdec(0x1b7)](_0x1a36af=>{telegramError(_0x1a36af);});else{if(_0x2c09b5[_0x55cdec(0x1c2)]>0x1)_0x2c09b5[_0x55cdec(0x240)]({'botID':_0x55cdec(0x268)});let _0x19aa59=[],_0x24c617=[];const _0x5a4045=_0x2c09b5[_0x55cdec(0x1c2)]%0x4==0x0||_0x2c09b5[_0x55cdec(0x1c2)]%0x4==0x3||_0x2c09b5['length']%0x3==0x1?0x4:0x3;let _0x37f69c=0x0;_0x2c09b5[_0x55cdec(0x274)]((_0x152280,_0x365d88)=>{const _0x554bc0=_0x55cdec;if(_0x365d88%_0x5a4045==0x0)_0x24c617=[];_0x24c617[_0x554bc0(0x240)]({'text':_0x152280[_0x554bc0(0x2aa)]==_0x554bc0(0x268)?_0x554bc0(0x285):_0x554bc0(0x292)+_0x152280[_0x554bc0(0x2aa)],'callback_data':_0x152280[_0x554bc0(0x2aa)]}),_0x365d88%_0x5a4045==0x0&&(_0x19aa59[_0x37f69c]=_0x24c617,_0x37f69c++);}),tgBot[_0x55cdec(0x1c4)](_0x312328[_0x55cdec(0x259)]['id'],_0x55cdec(0x21c),{'reply_markup':{'inline_keyboard':_0x19aa59}})[_0x55cdec(0x1b7)](_0x5c8ef9=>{telegramError(_0x5c8ef9);}),tgBot['on'](_0x55cdec(0x193),async _0x401e07=>{const _0x589d74=_0x55cdec,_0x1feed7=_0x401e07[_0x589d74(0x280)],_0x30f96c=_0x401e07[_0x589d74(0x25a)];tgBot[_0x589d74(0x273)](_0x401e07['id'])['then'](async()=>{const _0xdb45d6=_0x589d74;if(_0x1feed7==_0xdb45d6(0x268)){if(settings['telegramEvents']==_0xdb45d6(0x26f))tgBot['sendMessage'](_0x30f96c[_0xdb45d6(0x259)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x401d48=>{telegramError(_0x401d48);});config[_0xdb45d6(0x274)](_0x3b3291=>{const _0xc4e683=_0xdb45d6;stopBot(_0x3b3291[_0xc4e683(0x2aa)]);});}else{if(settings[_0xdb45d6(0x23f)]==_0xdb45d6(0x26f))tgBot[_0xdb45d6(0x1c4)](_0x30f96c['chat']['id'],_0xdb45d6(0x24a)+_0x1feed7)[_0xdb45d6(0x1b7)](_0x5558d9=>{telegramError(_0x5558d9);});stopBot(_0x1feed7);}}),tgBot[_0x589d74(0x295)](_0x589d74(0x193));});}}),tgBot[_0x1a9cc1(0x27c)](/\/on/,_0x4b5b05=>{const _0x3b1a10=_0x1a9cc1;if(!validateTelegram(_0x4b5b05))return;tgBot[_0x3b1a10(0x295)]('callback_query');const _0x57cfd2=getDisabledBots();if(_0x57cfd2[_0x3b1a10(0x1c2)]==0x0)tgBot[_0x3b1a10(0x1c4)](_0x4b5b05['chat']['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x5266b1=>{telegramError(_0x5266b1);});else{if(_0x57cfd2[_0x3b1a10(0x1c2)]>0x1)_0x57cfd2[_0x3b1a10(0x240)]({'botID':_0x3b1a10(0x268)});let _0x5d26a4=[],_0x1ebc4c=[];const _0x1b2a2b=_0x57cfd2[_0x3b1a10(0x1c2)]%0x4==0x0||_0x57cfd2['length']%0x4==0x3||_0x57cfd2[_0x3b1a10(0x1c2)]%0x3==0x1?0x4:0x3;let _0xa9ee10=0x0;_0x57cfd2[_0x3b1a10(0x274)]((_0x2545af,_0x4440ac)=>{const _0x4424b8=_0x3b1a10;if(_0x4440ac%_0x1b2a2b==0x0)_0x1ebc4c=[];_0x1ebc4c['push']({'text':_0x2545af[_0x4424b8(0x2aa)]==_0x4424b8(0x268)?_0x4424b8(0x285):_0x4424b8(0x292)+_0x2545af[_0x4424b8(0x2aa)],'callback_data':_0x2545af[_0x4424b8(0x2aa)]}),_0x4440ac%_0x1b2a2b==0x0&&(_0x5d26a4[_0xa9ee10]=_0x1ebc4c,_0xa9ee10++);}),tgBot[_0x3b1a10(0x1c4)](_0x4b5b05['chat']['id'],_0x3b1a10(0x198),{'reply_markup':{'inline_keyboard':_0x5d26a4}})['catch'](_0xbca13e=>{telegramError(_0xbca13e);}),tgBot['on'](_0x3b1a10(0x193),async _0x3aa207=>{const _0x1a5e40=_0x3b1a10,_0x4b43ef=_0x3aa207['data'],_0x3a03c4=_0x3aa207[_0x1a5e40(0x25a)];tgBot[_0x1a5e40(0x273)](_0x3aa207['id'])[_0x1a5e40(0x211)](async()=>{const _0x13bd41=_0x1a5e40;if(_0x4b43ef==_0x13bd41(0x268)){if(settings[_0x13bd41(0x23f)]==_0x13bd41(0x26f))tgBot['sendMessage'](_0x3a03c4[_0x13bd41(0x259)]['id'],_0x13bd41(0x209))[_0x13bd41(0x1b7)](_0x17af3a=>{telegramError(_0x17af3a);});_0x57cfd2[_0x13bd41(0x274)](_0x1431a7=>{const _0x5d9170=_0x13bd41;if(_0x1431a7[_0x5d9170(0x2aa)]!='all')toggleBot(_0x1431a7[_0x5d9170(0x2aa)],toggleStatus(_0x1431a7[_0x5d9170(0x2aa)]),'stopped');});}else{if(settings[_0x13bd41(0x23f)]=='orders')tgBot[_0x13bd41(0x1c4)](_0x3a03c4['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4b43ef)[_0x13bd41(0x1b7)](_0x17b7cd=>{telegramError(_0x17b7cd);});toggleBot(_0x4b43ef,toggleStatus(_0x4b43ef),'stopped');}}),tgBot[_0x1a5e40(0x295)](_0x1a5e40(0x193));});}}),tgBot[_0x1a9cc1(0x27c)](/\/off/,_0x35360e=>{const _0x2e5602=_0x1a9cc1;if(!validateTelegram(_0x35360e))return;tgBot[_0x2e5602(0x295)](_0x2e5602(0x193));const _0x2adde0=getEnabledBots();if(_0x2adde0[_0x2e5602(0x1c2)]==0x0)tgBot[_0x2e5602(0x1c4)](_0x35360e[_0x2e5602(0x259)]['id'],_0x2e5602(0x1c8))[_0x2e5602(0x1b7)](_0x3235cb=>{telegramError(_0x3235cb);});else{if(_0x2adde0[_0x2e5602(0x1c2)]>0x1)_0x2adde0[_0x2e5602(0x240)]({'botID':_0x2e5602(0x268)});let _0x19c1bd=[],_0x28a91b=[];const _0x464410=_0x2adde0[_0x2e5602(0x1c2)]%0x4==0x0||_0x2adde0[_0x2e5602(0x1c2)]%0x4==0x3||_0x2adde0[_0x2e5602(0x1c2)]%0x3==0x1?0x4:0x3;let _0xe0359c=0x0;_0x2adde0[_0x2e5602(0x274)]((_0x41e046,_0x21e612)=>{const _0x5ac647=_0x2e5602;if(_0x21e612%_0x464410==0x0)_0x28a91b=[];_0x28a91b[_0x5ac647(0x240)]({'text':_0x41e046[_0x5ac647(0x2aa)]==_0x5ac647(0x268)?_0x5ac647(0x285):_0x5ac647(0x292)+_0x41e046[_0x5ac647(0x2aa)],'callback_data':_0x41e046['botID']}),_0x21e612%_0x464410==0x0&&(_0x19c1bd[_0xe0359c]=_0x28a91b,_0xe0359c++);}),tgBot['sendMessage'](_0x35360e['chat']['id'],_0x2e5602(0x1d0),{'reply_markup':{'inline_keyboard':_0x19c1bd}})['catch'](_0xab472c=>{telegramError(_0xab472c);}),tgBot['on'](_0x2e5602(0x193),async _0x421365=>{const _0x29116c=_0x2e5602,_0x15b106=_0x421365[_0x29116c(0x280)],_0x580964=_0x421365[_0x29116c(0x25a)];tgBot[_0x29116c(0x273)](_0x421365['id'])[_0x29116c(0x211)](async()=>{const _0x445ae7=_0x29116c;if(_0x15b106=='all'){if(settings[_0x445ae7(0x23f)]==_0x445ae7(0x26f))tgBot[_0x445ae7(0x1c4)](_0x580964[_0x445ae7(0x259)]['id'],_0x445ae7(0x29e))[_0x445ae7(0x1b7)](_0x37ead5=>{telegramError(_0x37ead5);});_0x2adde0[_0x445ae7(0x274)](_0x4ad0a4=>{const _0x59af53=_0x445ae7;if(_0x4ad0a4[_0x59af53(0x2aa)]!=_0x59af53(0x268))toggleBot(_0x4ad0a4[_0x59af53(0x2aa)],toggleStatus(_0x4ad0a4[_0x59af53(0x2aa)]),_0x59af53(0x1b2));});}else{if(settings[_0x445ae7(0x23f)]==_0x445ae7(0x26f))tgBot[_0x445ae7(0x1c4)](_0x580964['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x15b106)[_0x445ae7(0x1b7)](_0x37cc9c=>{telegramError(_0x37cc9c);});toggleBot(_0x15b106,toggleStatus(_0x15b106),_0x445ae7(0x1b2));}}),tgBot[_0x29116c(0x295)](_0x29116c(0x193));});}}),tgBot[_0x1a9cc1(0x27c)](/\/disable/,_0x47742f=>{const _0x117887=_0x1a9cc1;if(!validateTelegram(_0x47742f))return;tgBot[_0x117887(0x1c4)](_0x47742f[_0x117887(0x259)]['id'],_0x117887(0x2c3))[_0x117887(0x1b7)](_0x7d962b=>{telegramError(_0x7d962b);}),updateSetting(_0x117887(0x1c6),![]);}),tgBot['onText'](/\/help/,_0x38a92b=>{if(!validateTelegram(_0x38a92b))return;tgBot['sendMessage'](_0x38a92b['chat']['id'],_0x1fde85)['catch'](_0x157c41=>{telegramError(_0x157c41);});}),tgBot['on'](_0x1a9cc1(0x1c0),_0x45f0be=>{const _0x505f44=_0x1a9cc1;_0x45f0be[_0x505f44(0x205)]()[_0x505f44(0x1dc)](_0x505f44(0x1de))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x505f44(0x1df)](),tgBot=null,io['to'](_0x505f44(0x294))[_0x505f44(0x25c)](_0x505f44(0x28f),'Invalid\x20Telegram\x20token'));}),process[_0x1a9cc1(0x22f)](_0x1a9cc1(0x24c),()=>{const _0x3b9060=_0x1a9cc1;if(tgBot)tgBot[_0x3b9060(0x1df)]();process[_0x3b9060(0x24d)](0x1);}),process['once'](_0x1a9cc1(0x254),()=>{const _0x4e0aae=_0x1a9cc1;if(tgBot)tgBot[_0x4e0aae(0x1df)]();process[_0x4e0aae(0x24d)](0x1);});}}function disableTelegram(){const _0x52bf6d=_0x2f67b2;tgBot&&(tgBot[_0x52bf6d(0x1df)](),tgBot=null);}function sendTelegram(_0xb38f61,_0x39e931){const _0x3696b8=_0x2f67b2;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x3696b8(0x268)||(_0x39e931['type']=='error'||_0x39e931[_0x3696b8(0x2b7)]=='success')&&settings[_0x3696b8(0x23f)]==_0x3696b8(0x2b5)||_0x39e931[_0x3696b8(0x2b7)]=='order'&&settings[_0x3696b8(0x23f)]=='orders'){if(tgBot&&settings[_0x3696b8(0x1a9)]){if(_0x39e931[_0x3696b8(0x1c7)])tgBot[_0x3696b8(0x1c4)](settings[_0x3696b8(0x1a9)],_0x39e931['botname']+_0x3696b8(0x2a2)+_0x39e931[_0x3696b8(0x1e2)])[_0x3696b8(0x1b7)](_0x57ff8c=>{telegramError(_0x57ff8c);});else tgBot['sendMessage'](settings['telegramChatId'],_0x3696b8(0x292)+_0xb38f61+_0x3696b8(0x2a2)+_0x39e931[_0x3696b8(0x1e2)])[_0x3696b8(0x1b7)](_0x304ddb=>{telegramError(_0x304ddb);});}}}}function getDeviceWithIp(_0x4aaa6b){const _0x35e3b0=_0x2f67b2;return devices[_0x35e3b0(0x202)](_0x488e62=>_0x488e62['ip']===_0x4aaa6b);}function temporaryAccess2FA(_0x5495b0,_0x542a2e){const _0x46f80a=_0x2f67b2;let _0x352b1f=new Date(),_0x67d274=![];if(lastIpApproval){if(_0x352b1f-lastIpApproval<0x1388)_0x67d274=!![];}lastIpApproval=new Date();if(_0x67d274)return;tgBot&&settings[_0x46f80a(0x1a9)]&&(tgBot[_0x46f80a(0x295)](_0x46f80a(0x193)),tgBot[_0x46f80a(0x1c4)](settings['telegramChatId'],_0x46f80a(0x1d9)+normalizeIP(_0x542a2e)[_0x46f80a(0x293)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x46f80a(0x2d2),'callback_data':'5'},{'text':_0x46f80a(0x290),'callback_data':'15'},{'text':_0x46f80a(0x2bf),'callback_data':'30'},{'text':_0x46f80a(0x206),'callback_data':'reject'}]]}})['catch'](_0x5b9391=>{telegramError(_0x5b9391);}),tgBot['on'](_0x46f80a(0x193),async _0x2f6025=>{const _0x36388f=_0x46f80a,_0x28ad19=_0x2f6025['data'],_0xe8ae3c=_0x2f6025[_0x36388f(0x25a)];tgBot[_0x36388f(0x273)](_0x2f6025['id'])[_0x36388f(0x211)](async()=>{const _0x10db1f=_0x36388f;devices[_0x5495b0][_0x10db1f(0x249)]={'clientip':_0x542a2e,'timestamp':new Date()[_0x10db1f(0x28d)](),'expiry':_0x28ad19},_0x28ad19!=_0x10db1f(0x206)?(await tgBot[_0x10db1f(0x1c4)](_0xe8ae3c[_0x10db1f(0x259)]['id'],_0x10db1f(0x260)+_0x28ad19+'\x20minutes',{'parse_mode':_0x10db1f(0x28c)})[_0x10db1f(0x1b7)](_0x11cd68=>{telegramError(_0x11cd68);}),io['to'](_0x5495b0)['emit'](_0x10db1f(0x27a),{'access':{'allow':![],'reason':_0x10db1f(0x1f4),'token':null}})):(await tgBot[_0x10db1f(0x1c4)](_0xe8ae3c[_0x10db1f(0x259)]['id'],_0x10db1f(0x2ab))[_0x10db1f(0x1b7)](_0x535220=>{telegramError(_0x535220);}),io['to'](_0x5495b0)['emit'](_0x10db1f(0x27a),{'access':{'allow':![],'reason':_0x10db1f(0x1c9),'token':null}}));}),tgBot[_0x36388f(0x295)]('callback_query');}));}function loginAccess2FA(_0x500786,_0x37cd4b){const _0x22f7de=_0x2f67b2;tgBot&&settings[_0x22f7de(0x1a9)]&&(tgBot[_0x22f7de(0x295)](_0x22f7de(0x193)),tgBot[_0x22f7de(0x1c4)](settings[_0x22f7de(0x1a9)],_0x22f7de(0x2a0)+normalizeIP(_0x37cd4b)['show']+_0x22f7de(0x298),{'parse_mode':_0x22f7de(0x28c),'reply_markup':{'inline_keyboard':[[{'text':_0x22f7de(0x1ff),'callback_data':loginExpiry},{'text':_0x22f7de(0x206),'callback_data':_0x22f7de(0x206)}]]}})[_0x22f7de(0x1b7)](_0x376d8a=>{telegramError(_0x376d8a);}),tgBot['on'](_0x22f7de(0x193),async _0x300b7c=>{const _0x3e458c=_0x22f7de,_0x13b5fb=_0x300b7c[_0x3e458c(0x280)],_0x52d7be=_0x300b7c[_0x3e458c(0x25a)];tgBot[_0x3e458c(0x273)](_0x300b7c['id'])['then'](async()=>{const _0xafc9c3=_0x3e458c;devices[_0x500786][_0xafc9c3(0x1f7)]={'clientip':_0x37cd4b,'timestamp':new Date()[_0xafc9c3(0x28d)](),'expiry':_0x13b5fb},_0x13b5fb!=_0xafc9c3(0x206)?(await tgBot[_0xafc9c3(0x1c4)](_0x52d7be[_0xafc9c3(0x259)]['id'],'Login\x20accepted',{'parse_mode':_0xafc9c3(0x28c)})['catch'](_0xba179e=>{telegramError(_0xba179e);}),io['to'](_0x500786)['emit']('status',{'access':{'allow':![],'reason':_0xafc9c3(0x1f4),'token':null}})):(await tgBot[_0xafc9c3(0x1c4)](_0x52d7be[_0xafc9c3(0x259)]['id'],_0xafc9c3(0x2a5))[_0xafc9c3(0x1b7)](_0x148fca=>{telegramError(_0x148fca);}),io['to'](_0x500786)[_0xafc9c3(0x25c)](_0xafc9c3(0x27a),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x3e458c(0x295)](_0x3e458c(0x193));}));}function getConfiguration(){const _0x17509c=_0x2f67b2;return dbConfig[_0x17509c(0x2a7)]('bots')[_0x17509c(0x27b)](_0x17509c(0x2aa))[_0x17509c(0x20a)]()||[];}function getEnabledBots(){const _0x4e7fac=_0x2f67b2;return dbConfig[_0x4e7fac(0x2a7)]('bots')[_0x4e7fac(0x27b)](_0x4e7fac(0x2aa))[_0x4e7fac(0x194)]({'status':_0x4e7fac(0x29f)})['value']()||[];}function getDisabledBots(){const _0x247607=_0x2f67b2;return dbConfig[_0x247607(0x2a7)]('bots')[_0x247607(0x27b)](_0x247607(0x2aa))[_0x247607(0x194)]({'status':'disabled'})['value']()||[];}function getSettings(){const _0x3d8ab6=_0x2f67b2;return dbSettings[_0x3d8ab6(0x2a7)](_0x3d8ab6(0x1be))[_0x3d8ab6(0x20a)]()||{'timeshift':0x0};}function getSecure(){const _0x236ac0=_0x2f67b2;return dbSecure[_0x236ac0(0x2a7)](_0x236ac0(0x20f))['value']()||{};}function getBlacklist(){const _0x49846e=_0x2f67b2;return dbSecure[_0x49846e(0x2a7)](_0x49846e(0x243))[_0x49846e(0x20a)]()||[];}function broadcastToBots(_0x10c4d8,_0x49b4f7){const _0xe6ea29=_0x2f67b2;config[_0xe6ea29(0x274)](_0x4c1da6=>{const _0x9a336d=_0xe6ea29;if(_0x4c1da6[_0x9a336d(0x27a)]==_0x9a336d(0x29f)&&_0x4c1da6['live']==_0x9a336d(0x1fb)){if(pid[_0x4c1da6[_0x9a336d(0x2aa)]])pid[_0x4c1da6[_0x9a336d(0x2aa)]][_0x9a336d(0x1b6)]({[_0x10c4d8]:_0x49b4f7});}});}function storeSettings(_0x20cebf,_0x3e929e=![]){const _0x3b8004=_0x2f67b2;_0x20cebf={...settings,..._0x20cebf};if(_0x3e929e&&_0x20cebf[_0x3b8004(0x288)]!=_0x3b8004(0x278)&&_0x20cebf[_0x3b8004(0x288)]!=''){const _0x39eadf=crypt[_0x3b8004(0x1a5)](secure[_0x3b8004(0x26a)],_0x20cebf[_0x3b8004(0x288)])['message'][_0x3b8004(0x299)]('@')[0x0],_0x3839f3=bcrypt[_0x3b8004(0x199)](_0x39eadf,saltRounds);_0x20cebf={..._0x20cebf,'bbPassword':_0x3839f3};}if(_0x3e929e&&_0x20cebf[_0x3b8004(0x1a1)]!='************'&&_0x20cebf['telegramToken']!=''){const _0x3a89d2=crypt[_0x3b8004(0x1a5)](secure[_0x3b8004(0x26a)],_0x20cebf[_0x3b8004(0x1a1)])[_0x3b8004(0x25a)][_0x3b8004(0x299)]('@')[0x0];_0x20cebf={..._0x20cebf,'telegramToken':_0x3a89d2};}const _0x21d25e=_0x20cebf[_0x3b8004(0x1a1)]!=_0x3b8004(0x278)&&_0x20cebf[_0x3b8004(0x1a1)]!=settings['telegramToken']||_0x20cebf['telegramUsername']!=settings[_0x3b8004(0x1b3)],_0x4e9203=_0x20cebf['telegramToken']==''||_0x20cebf[_0x3b8004(0x1b3)]=='';if(_0x21d25e)_0x20cebf['telegramEvents']=_0x3b8004(0x268);for(const [_0x64d19e,_0x4f171d]of Object[_0x3b8004(0x1fc)](_0x20cebf)){if(_0x64d19e==_0x3b8004(0x1a1)&&_0x4f171d==_0x3b8004(0x278)){_0x20cebf['telegramToken']=settings[_0x3b8004(0x1a1)];continue;};if(_0x64d19e==_0x3b8004(0x288)&&_0x4f171d==_0x3b8004(0x278)){_0x20cebf['bbPassword']=settings[_0x3b8004(0x288)];continue;};dbSettings[_0x3b8004(0x232)](_0x3b8004(0x235)+_0x64d19e,_0x4f171d)['write']();}settings=_0x20cebf,io['to'](_0x3b8004(0x294))[_0x3b8004(0x25c)](_0x3b8004(0x1be),cleanSettings()),broadcastToBots(_0x3b8004(0x248),settings[_0x3b8004(0x248)]);if(_0x21d25e&&!_0x4e9203)initTelegram();if(_0x21d25e&&_0x4e9203)disableTelegram();getAllClients()[_0x3b8004(0x274)](_0x1b58f2=>{const _0x543513=_0x3b8004;getSocket(_0x1b58f2['id'])[_0x543513(0x25c)](_0x543513(0x27a),{'access':{'allow':![],'reason':_0x543513(0x1f4),'token':null}});});}function updateSetting(_0x4b656a,_0x5515e0){const _0x3358d6=_0x2f67b2;dbSettings['set'](_0x3358d6(0x235)+_0x4b656a,_0x5515e0)[_0x3358d6(0x29c)](),settings=getSettings(),io['to'](_0x3358d6(0x294))[_0x3358d6(0x25c)](_0x3358d6(0x1be),cleanSettings());}function storeSecure(_0x38d755){const _0x44129e=_0x2f67b2;dbSecure[_0x44129e(0x2a7)]('secure')[_0x44129e(0x240)](_0x38d755)[_0x44129e(0x29c)](),secure=_0x38d755;}function addBlacklist(_0x490ec1){const _0x2fcd6a=_0x2f67b2;cleanBlacklist();let _0x33be68;devices[_0x490ec1][_0x2fcd6a(0x249)]?_0x33be68=Math[_0x2fcd6a(0x2ba)](devices[_0x490ec1]['telegramIpApproval']['expiry'],loginExpiry):_0x33be68=loginExpiry,dbSecure[_0x2fcd6a(0x2a7)](_0x2fcd6a(0x243))[_0x2fcd6a(0x240)]({'expiry':new Date()['getTime']()+_0x33be68*0x3c*0x3e8,'token':devices[_0x490ec1]['access']['token']})['write'](),blacklist=dbSecure[_0x2fcd6a(0x2a7)]('blacklist')['value']();}function cleanBlacklist(){const _0x1cb7af=_0x2f67b2;let _0x32be8b=dbSecure['get']('blacklist')[_0x1cb7af(0x1c1)]()[_0x1cb7af(0x20a)](),_0x5d2965=new Date()['getTime']();_0x32be8b[_0x1cb7af(0x274)](_0x152bc0=>{const _0x3689be=_0x1cb7af;_0x152bc0[_0x3689be(0x244)]<_0x5d2965&&dbSecure['get'](_0x3689be(0x243))[_0x3689be(0x29a)]({'expiry':_0x152bc0[_0x3689be(0x244)]})[_0x3689be(0x29c)]();});}function _0x7d06(){const _0x3d9ceb=['sockets','SIGINT','exit','Orders','/:bot/history','from','login\x20not\x20required','/status\x20-\x20show\x20bot(s)\x20status\x0a','keys','SIGTERM','inherit','loginRequired','remoteAddress','bot-','chat','message','crypto','emit','backup/','exp','access\x20timeout','Access\x20enabled\x20for\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','2484207DRwQCH',':\x20Bot\x20Mgr\x20>\x20','get-portfolio','You\x20can\x20use\x20the\x20following\x20commands:\x0a','socket.io','initclient','all','publicKey','privateKey','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','toIPv4Address','yargs/yargs','use','orders','success','lowdb','hybrid-crypto-js','answerCallbackQuery','forEach','Ok,\x20will\x20send\x20alert\x20notifications\x20only','date-fns','@analytics/google-analytics','************','8kUVLeo','status','sortBy','onText','-results.json','reset-password','map','data','randomFillSync','starting\x20bot\x20|\x20Bot\x20','secret','clientip','All\x20bots','bot','enabled\x20Bot\x20','bbPassword','connected','cancelLoading','User\x20has\x20been\x20validated','HTML','getTime','idling\x20bot\x20\x20\x20|\x20Bot\x20','notification','15\x20min','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Bot\x20','show','botmanager','removeListener','getMinutes','padStart','</b>\x20?','split','remove','/on\x20-\x20start\x20bot(s)\x0a','write','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','enabled','Allow\x20login\x20from\x20IP\x20address\x20<b>','storeHeadless','\x20>\x20','Notifications\x20types:\x20','store-headless','Login\x20rejected','76cfojJp','get','sha256','access','botID','Temporary\x20access\x20rejected','readdirSync','1000','clients','\x20|\x20','auth','randomBytes','username','disabled','update-bot','alerts','Password\x20has\x20been\x20reset\x20to:\x20','type','2FA\x20login\x20token\x20generated','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','max','bb-settings.json','hasOwnProperty','headers','Invalid\x20authentication\x20token\x20(1)','30\x20min','removeAllListeners','/:bot','add','Notifications\x20disabled','match','::1','whitelistEnabled','mkdirSync','index.html','Balance\x20Bot\x20Server','2FA','restart','assign','search','get-logs','3000','Unauthorized\x20attempt\x20to\x20get\x20logs','port','5\x20min','kind','bot.js','verify','Error:\x20Invalid\x20argument\x20','/disable\x20-\x20disable\x20notifications\x0a','callback_query','filter','password','config/','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','hashSync','error','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','test','place-order','update-bb','1487731DQtwaw','telegramToken','compareSync','args','handshake','decrypt','pidExpireLogin','Balance\x20Bot','referer','telegramChatId','temporary\x20access\x20not\x20allowed','\x20only\x0a','started','existsSync','/help\x20-\x20show\x20available\x20commands\x0a','Alerts','version','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','stopped','telegramUsername','Unauthorized\x20attempt\x20to\x20get\x20portfolio','<b>Telegram\x20bot\x20status:</b>\x0a','send','catch','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','live','bbUsername','getStartingBalances','Unauthorized\x20attempt\x20to\x20add\x20bot','Notifications\x20disabled\x0a','settings','path','polling_error','cloneDeep','length','https://hodlerhacks.com','sendMessage','allow','telegramEnabled','showname','No\x20bots\x20running\x20right\x20now','temporary\x20access\x20rejected','placeOrder','store','/:bot/portfolio','/restart\x20-\x20restart\x20bot(s)\x0a','invalid\x20credentials','build','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','static','logged\x20out','getDate','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','new','\x20/\x20','version.json','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','defaults','disconnect','includes','build2','404\x20Not\x20Found','stopPolling','token','Invalid\x20authentication\x20token\x20(2)','event','logout','f2aRequired','2FA\x20login\x20required','Ok,\x20will\x20send\x20order\x20notifications\x20only','whitelist','2FA\x20required','getHours','name','RSA','Unauthorized\x20attempt\x20to\x20update\x20bot','jsonwebtoken','server','isIPv4MappedAddress','add-bot','601682gXyJgR','lowdb/adapters/FileSync','store-settings','reload','listen','getFullYear','telegram2FaApproval','(((.+)+)+)+$','getMonth','temporary\x20token\x20generated','running','entries','14337tPDrxf','Unauthorized\x20attempt\x20to\x20update\x20settings','accept','conn','login','find','/enable\x20-\x20enable\x20notifications\x0a','join','toString','reject','temporaryAccessAllowed','/:bot/support','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','value','parse','login\x20token\x20valid','argv','http','secure','page','then','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','ipc','ipaddr.js','sign','/:bot/performance','127.0.0.1','user','deleted\x20Bot\x20','timestamp','Password\x20reset\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','unlinkSync','telegram','login\x20required','reason','670968gpZpDX','temporary\x20access\x20timeout','login\x20token\x20generated','delete-bot','log','uuid','function','97846EDMiCP','fork','/off\x20-\x20stop\x20bot(s)\x0a','node-telegram-bot-api','stop','default','-config.json','once','botname','pidRefreshToken','set','Unauthorized\x20login\x20attempt\x20(public\x20key)','bots','settings.','new-disabled','483540oZRprd','RSA-OAEP','sendFile','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','No\x20authentication\x20token','get-starting-balances','-----------------------------------------------------------------------------------','child_process','telegramEvents','push',',\x20must\x20be\x20a\x204\x20digit\x20number','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','blacklist','expiry','copyFileSync','15JKbNrJ','kill','timeshift','telegramIpApproval','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'];_0x7d06=function(){return _0x3d9ceb;};return _0x7d06();}function initStates(){const _0x36e606=_0x2f67b2;let _0x3d6ba0=getConfiguration();_0x3d6ba0[_0x36e606(0x274)](_0xa36448=>{const _0x93b12c=_0x36e606;_0xa36448[_0x93b12c(0x1b9)]=_0x93b12c(0x1b2);}),storeConfiguration(_0x3d6ba0);}function onKeys(){const _0x404030=new RSA();return new Promise(_0x160e02=>{const _0x1725fb=_0x463e;_0x404030['generateKeyPairAsync']()[_0x1725fb(0x211)](_0x149074=>{_0x160e02(_0x149074);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x108044=_0x2f67b2;let _0x2e69dd=getConfiguration(),_0x417d26=![];_0x2e69dd['forEach'](_0x17412f=>{const _0x10d870=_0x463e;if(_0x17412f['status']=='running')_0x17412f['status']=_0x10d870(0x29f),_0x417d26=!![];else _0x17412f['status']==_0x10d870(0x1b2)&&(_0x17412f[_0x10d870(0x27a)]=_0x10d870(0x2b3),_0x417d26=!![]);});if(_0x417d26)storeConfiguration(_0x2e69dd);let _0x56521=getSecure();if(!_0x56521[_0x108044(0x2bc)](_0x108044(0x283))){let _0x703ab7=await generateKeys();_0x56521[_0x108044(0x269)]=_0x703ab7[_0x108044(0x269)],_0x56521[_0x108044(0x26a)]=_0x703ab7['privateKey'],_0x56521[_0x108044(0x283)]=crypto[_0x108044(0x2b1)](0x20)[_0x108044(0x205)]('hex');;storeSecure(_0x56521);}let _0x381c74=getSettings();_0x417d26=![];!_0x381c74[_0x108044(0x2bc)](_0x108044(0x256))&&(_0x381c74[_0x108044(0x256)]=![],_0x381c74[_0x108044(0x1ba)]='',_0x381c74[_0x108044(0x288)]='',_0x381c74['f2aRequired']=![],_0x417d26=!![]);!_0x381c74['hasOwnProperty'](_0x108044(0x2c6))&&(_0x381c74[_0x108044(0x2c6)]=![],_0x381c74['whitelist']=[],_0x381c74['temporaryAccessAllowed']=![],_0x417d26=!![]);if(!_0x381c74[_0x108044(0x2bc)](_0x108044(0x1c6))){if(_0x381c74[_0x108044(0x1a9)])_0x381c74[_0x108044(0x1c6)]=!![];else _0x381c74['telegramEnabled']=![];_0x417d26=!![];}if(_0x417d26)storeSettings(_0x381c74);}function storeConfiguration(_0x35bbad){const _0x510065=_0x2f67b2;dbConfig[_0x510065(0x2a7)](_0x510065(0x234))['remove']()[_0x510065(0x29c)](),dbConfig[_0x510065(0x2a7)](_0x510065(0x234))[_0x510065(0x240)](..._0x35bbad)['write'](),config=_0x35bbad;}function resetPassword(){const _0x2ae888=_0x2f67b2;tgBot&&settings[_0x2ae888(0x1a9)]&&(tgBot['removeListener'](_0x2ae888(0x193)),tgBot[_0x2ae888(0x1c4)](settings[_0x2ae888(0x1a9)],_0x2ae888(0x197),{'parse_mode':_0x2ae888(0x28c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x2ae888(0x1b7)](_0x417eda=>{telegramError(_0x417eda);}),tgBot['on'](_0x2ae888(0x193),async _0x4b7cfd=>{const _0x4cd8b4=_0x2ae888,_0x36103a=_0x4b7cfd[_0x4cd8b4(0x280)],_0x5be121=_0x4b7cfd[_0x4cd8b4(0x25a)];tgBot[_0x4cd8b4(0x273)](_0x4b7cfd['id'])['then'](async()=>{const _0x31381c=_0x4cd8b4;if(_0x36103a!='no'){const _0x276f1d=0xf,_0xdad86=_0x31381c(0x242),_0x3c5a62=Array[_0x31381c(0x250)](crypto[_0x31381c(0x281)](new Uint32Array(_0x276f1d)))[_0x31381c(0x27f)](_0x2fe27d=>_0xdad86[_0x2fe27d%_0xdad86['length']])[_0x31381c(0x204)](''),_0x2c786c=bcrypt[_0x31381c(0x199)](_0x3c5a62,saltRounds);storeSettings({'bbPassword':_0x2c786c}),await tgBot[_0x31381c(0x1c4)](_0x5be121[_0x31381c(0x259)]['id'],_0x31381c(0x2b6)+_0x3c5a62,{'parse_mode':'HTML'})[_0x31381c(0x1b7)](_0xa0a1c8=>{telegramError(_0xa0a1c8);});}else await tgBot[_0x31381c(0x1c4)](_0x5be121['chat']['id'],_0x31381c(0x21b))[_0x31381c(0x1b7)](_0x3a39e2=>{telegramError(_0x3a39e2);});}),tgBot[_0x4cd8b4(0x295)](_0x4cd8b4(0x193));}));}function logging(_0x161e1f){const _0x29c1b3=_0x2f67b2;console['log'](getTimeStamp()+_0x29c1b3(0x263)+_0x161e1f);if(tgBot&&settings[_0x29c1b3(0x1a9)]&&settings['telegramEvents']!=_0x29c1b3(0x26f))tgBot['sendMessage'](settings[_0x29c1b3(0x1a9)],_0x29c1b3(0x1d4)+_0x161e1f)[_0x29c1b3(0x1b7)](_0x3422df=>{telegramError(_0x3422df);});}function getServerTime(){const _0x5bdc56=_0x2f67b2,_0x2f55e8=new Date();return _0x2f55e8[_0x5bdc56(0x1f6)]()+'/'+(_0x2f55e8[_0x5bdc56(0x1f9)]()+0x1)[_0x5bdc56(0x205)]()[_0x5bdc56(0x297)](0x2,'0')+'/'+_0x2f55e8[_0x5bdc56(0x1d3)]()[_0x5bdc56(0x205)]()[_0x5bdc56(0x297)](0x2,'0')+'\x20'+_0x2f55e8[_0x5bdc56(0x1e9)]()[_0x5bdc56(0x205)]()[_0x5bdc56(0x297)](0x2,'0')+':'+_0x2f55e8[_0x5bdc56(0x296)]()[_0x5bdc56(0x205)]()[_0x5bdc56(0x297)](0x2,'0')+':'+_0x2f55e8['getSeconds']()[_0x5bdc56(0x205)]()[_0x5bdc56(0x297)](0x2,'0');}function getTimeStamp(){const _0x4cc882=_0x2f67b2,_0x355dd9=shiftedTime();return _0x355dd9[_0x4cc882(0x1f6)]()+'/'+(_0x355dd9['getMonth']()+0x1)[_0x4cc882(0x205)]()[_0x4cc882(0x297)](0x2,'0')+'/'+_0x355dd9[_0x4cc882(0x1d3)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x355dd9[_0x4cc882(0x1e9)]()[_0x4cc882(0x205)]()[_0x4cc882(0x297)](0x2,'0')+':'+_0x355dd9['getMinutes']()[_0x4cc882(0x205)]()['padStart'](0x2,'0')+':'+_0x355dd9['getSeconds']()[_0x4cc882(0x205)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x6f6659=_0x2f67b2,_0x417f3c=new Date();let _0x39eb1e=_0x417f3c;if(settings[_0x6f6659(0x248)]&&settings['timeshift']!==0x0)_0x39eb1e=fns[_0x6f6659(0x2c2)](_0x417f3c,{'hours':settings[_0x6f6659(0x248)]});return _0x39eb1e;}function startScheduler(){let _0x474e7a=new Date()['getUTCHours']();_0x474e7a==0x1&&backupConfigFiles();_0x474e7a==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x316f78=_0x2f67b2;fs[_0x316f78(0x2ac)](configpath,{'withFileTypes':!![]})[_0x316f78(0x274)](_0x18af27=>{const _0x532096=_0x316f78;if(!_0x18af27['isDirectory']())fs[_0x532096(0x245)](configpath+_0x18af27[_0x532096(0x1ea)],configbackuppath+_0x18af27[_0x532096(0x1ea)]);});}function triggerAnalytics(){const _0x2109dc=_0x2f67b2;analytics[_0x2109dc(0x210)]({'title':_0x2109dc(0x2c9),'href':_0x2109dc(0x1c3),'path':'/v'+serverversion});}function validateCredentials(_0x3b55b0,_0x381648){const _0x359585=_0x2f67b2;if(_0x3b55b0[_0x359585(0x2b2)]==settings[_0x359585(0x1ba)]&&bcrypt[_0x359585(0x1a2)](_0x3b55b0[_0x359585(0x195)],settings[_0x359585(0x288)])){if(settings[_0x359585(0x1e4)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x56054c=generateLoginToken(_0x381648);return{'allow':!![],'reason':_0x359585(0x223),'token':_0x56054c};}}else return{'allow':![],'reason':_0x359585(0x1ce),'token':null};}function refreshToken(_0x247335){const _0x1f6d41=_0x2f67b2,_0x4c1457=generateLoginToken(_0x247335);return{'allow':!![],'reason':_0x1f6d41(0x223),'token':_0x4c1457};}function validateAccess(_0xe6fc04,_0x2fa015){const _0x42686a=_0x2f67b2;let _0x1d16fd=devices[_0x2fa015]['ip'],_0x1b4ecc;const _0x3230a7=_0x3ae92e=>{const _0x43d816=_0x463e;if(settings[_0x43d816(0x256)]){if(settings[_0x43d816(0x1e4)]){if(telegram2FaApproved(_0x2fa015)){const _0x580094=generateLoginToken(_0x2fa015);return{'allow':!![],'reason':_0x43d816(0x2b8),'token':_0x580094};}else return{'allow':![],'reason':_0x43d816(0x21f),'token':null};}else return _0x1b4ecc=validToken(_0x3ae92e,_0x2fa015),_0x1b4ecc['hasOwnProperty']('success')?{'allow':!![],'reason':_0x43d816(0x20c),'token':_0x3ae92e}:{'allow':![],'reason':_0x43d816(0x21f),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x42686a(0x2c6)]){let _0x3c7dae=[...settings[_0x42686a(0x1e7)],_0x42686a(0x2c5),'::ffff:127.0.0.1',_0x42686a(0x217)];if(_0x3c7dae[_0x42686a(0x1dc)](_0x1d16fd))return _0x3230a7(_0xe6fc04);else{_0x1b4ecc=validToken(_0xe6fc04,_0x2fa015);if(_0x1b4ecc[_0x42686a(0x2bc)](_0x42686a(0x270)))return _0x3230a7(_0xe6fc04);else{if(telegramIpApproved(_0x2fa015)){const _0x461c30=generateToken(_0x2fa015);return _0x1b4ecc=_0x3230a7(_0xe6fc04),_0x1b4ecc[_0x42686a(0x1c5)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x461c30}:_0x1b4ecc;}else return settings[_0x42686a(0x207)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x42686a(0x1aa),'token':null};}}}else return _0x3230a7(_0xe6fc04);}function timelyDecrypt(_0x1e5af5,_0x46560f=!![]){const _0x53ca3d=_0x2f67b2;if(_0x1e5af5)try{const _0x4872e2=crypt[_0x53ca3d(0x1a5)](secure[_0x53ca3d(0x26a)],_0x1e5af5)[_0x53ca3d(0x25a)],_0x2241bd=_0x4872e2[_0x53ca3d(0x299)]('@')[0x0],_0x2a38cc=_0x4872e2[_0x53ca3d(0x299)]('@')[0x1],_0x43f165=new Date()[_0x53ca3d(0x28d)]();if(_0x46560f){if(_0x43f165-_0x2a38cc<maxSecretAge*0x3e8)return _0x2241bd;else return![];}else return _0x2241bd;}catch(_0x316c92){return![];}else return![];}const validToken=(_0xe35aff,_0x2de1a6)=>{const _0x6bbd22=_0x2f67b2,_0x142b9c=devices[_0x2de1a6]['ip'];if(!_0xe35aff)return{'error':_0x6bbd22(0x23b)};for(let _0x378372 of blacklist){if(_0x378372[_0x6bbd22(0x1e0)]==_0xe35aff)return{'error':'Token\x20blacklisted'};}let _0x128789;try{_0x128789=jwt[_0x6bbd22(0x190)](_0xe35aff,secure['secret']+_0x2de1a6);}catch{return{'error':_0x6bbd22(0x2be)};}if(!_0x128789[_0x6bbd22(0x2bc)](_0x6bbd22(0x284))&&!_0x128789['hasOwnProperty'](_0x6bbd22(0x2b2))||!_0x128789[_0x6bbd22(0x2bc)](_0x6bbd22(0x25e)))return{'error':_0x6bbd22(0x1e1)};if(!_0x128789['hasOwnProperty'](_0x6bbd22(0x2b2))&&_0x128789[_0x6bbd22(0x2bc)](_0x6bbd22(0x284))){const {clientip:_0x4b866c}=_0x128789;return _0x142b9c==_0x4b866c?{'success':_0x6bbd22(0x28b)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x128789[_0x6bbd22(0x2bc)](_0x6bbd22(0x2b2))&&_0x128789[_0x6bbd22(0x2bc)]('clientip')){const {username:_0x15e7db,clientip:_0xb542ea}=_0x128789;return settings[_0x6bbd22(0x1ba)]==_0x15e7db&&_0x142b9c==_0xb542ea?{'success':_0x6bbd22(0x28b)}:{'error':_0x6bbd22(0x29d)};}}},generateLoginToken=_0x39f10d=>{const _0x8718f8=_0x2f67b2;if(_0x39f10d){const _0x1a66e5=devices[_0x39f10d]['ip'];return jwt[_0x8718f8(0x215)]({'username':settings[_0x8718f8(0x1ba)],'clientip':_0x1a66e5},secure[_0x8718f8(0x283)]+_0x39f10d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x592b2f=>{const _0x4f5cb5=_0x2f67b2;if(_0x592b2f){const _0x837f2f=devices[_0x592b2f]['ip'];return jwt[_0x4f5cb5(0x215)]({'clientip':_0x837f2f},secure[_0x4f5cb5(0x283)]+_0x592b2f,{'expiresIn':devices[_0x592b2f]['telegramIpApproval'][_0x4f5cb5(0x244)]*0x3c});}else return![];},telegramIpApproved=_0x502d33=>{const _0x1f44af=_0x2f67b2;let _0x10a401=![];return devices[_0x502d33][_0x1f44af(0x249)]&&devices[_0x502d33][_0x1f44af(0x249)][_0x1f44af(0x244)]!='reject'&&(_0x10a401=devices[_0x502d33][_0x1f44af(0x249)]['clientip']==devices[_0x502d33]['ip']&&new Date()[_0x1f44af(0x28d)]()-devices[_0x502d33]['telegramIpApproval'][_0x1f44af(0x21a)]<devices[_0x502d33][_0x1f44af(0x249)][_0x1f44af(0x244)]*0x3c*0x3e8),_0x10a401;},telegram2FaApproved=_0x376231=>{const _0x5b1fe5=_0x2f67b2;let _0x32ac3d=![];return devices[_0x376231]['telegram2FaApproval']&&devices[_0x376231][_0x5b1fe5(0x1f7)][_0x5b1fe5(0x244)]!=_0x5b1fe5(0x206)&&(_0x32ac3d=devices[_0x376231][_0x5b1fe5(0x1f7)]['clientip']==devices[_0x376231]['ip']&&new Date()['getTime']()-devices[_0x376231]['telegram2FaApproval'][_0x5b1fe5(0x21a)]<devices[_0x376231][_0x5b1fe5(0x1f7)][_0x5b1fe5(0x244)]*0x3c*0x3e8),_0x32ac3d;},normalizeIP=_0x465845=>{const _0x27481b=_0x2f67b2;let _0xdf1d2b=null,_0x58861d=null;if(ipaddr['isValid'](_0x465845)){const _0x40477e=ipaddr[_0x27481b(0x20b)](_0x465845);_0x40477e[_0x27481b(0x2d3)]()==='ipv6'?(_0x40477e[_0x27481b(0x1ef)]()&&(_0xdf1d2b=_0x40477e[_0x27481b(0x26c)]()[_0x27481b(0x205)]()),_0x58861d=_0x40477e[_0x27481b(0x205)]()):(_0xdf1d2b=_0x40477e[_0x27481b(0x205)](),_0x58861d=_0x40477e['toIPv4MappedAddress']()[_0x27481b(0x205)]());}return{'show':_0xdf1d2b?_0xdf1d2b:_0x58861d,'store':_0x58861d};};