const _0x148516=_0x437f;(function(_0x2ad2af,_0x215fff){const _0x4fb399=_0x437f,_0x54c268=_0x2ad2af();while(!![]){try{const _0x5c3425=parseInt(_0x4fb399(0x2b7))/0x1+parseInt(_0x4fb399(0x373))/0x2*(-parseInt(_0x4fb399(0x2af))/0x3)+parseInt(_0x4fb399(0x22d))/0x4*(-parseInt(_0x4fb399(0x388))/0x5)+parseInt(_0x4fb399(0x3b2))/0x6+-parseInt(_0x4fb399(0x2c2))/0x7+-parseInt(_0x4fb399(0x2ee))/0x8+parseInt(_0x4fb399(0x3ae))/0x9;if(_0x5c3425===_0x215fff)break;else _0x54c268['push'](_0x54c268['shift']());}catch(_0x411272){_0x54c268['push'](_0x54c268['shift']());}}}(_0x39a2,0x8cde9));const _0x1727af=function(){let _0x249ee8=!![];return function(_0x7fe3cd,_0xe1c9df){const _0x585b0f=_0x249ee8?function(){const _0x5c01b0=_0x437f;if(_0xe1c9df){const _0x31da57=_0xe1c9df[_0x5c01b0(0x259)](_0x7fe3cd,arguments);return _0xe1c9df=null,_0x31da57;}}:function(){};return _0x249ee8=![],_0x585b0f;};}(),_0x4e34e2=_0x1727af(this,function(){const _0x4b3e39=_0x437f;return _0x4e34e2[_0x4b3e39(0x350)]()[_0x4b3e39(0x386)]('(((.+)+)+)+$')[_0x4b3e39(0x350)]()[_0x4b3e39(0x299)](_0x4e34e2)[_0x4b3e39(0x386)]('(((.+)+)+)+$');});_0x4e34e2();'use strict';process[_0x148516(0x218)][_0x148516(0x3c5)]=0x1;const childProcess=require(_0x148516(0x2ca)),fs=require('fs'),fns=require(_0x148516(0x3d0)),low=require(_0x148516(0x32b)),FileSync=require(_0x148516(0x256)),path=require(_0x148516(0x2ac)),crypto=require('crypto'),Crypt=require(_0x148516(0x257))[_0x148516(0x3a6)],RSA=require(_0x148516(0x257))['RSA'],bcrypt=require(_0x148516(0x318)),jwt=require(_0x148516(0x296)),ipaddr=require(_0x148516(0x236)),argv=require(_0x148516(0x2eb))(process['argv']['slice'](0x2))[_0x148516(0x2d1)],uuidRandom=require(_0x148516(0x20d)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x148516(0x3b5)),axios=require('axios'),{GraphQLClient,gql}=require(_0x148516(0x303)),util=require(_0x148516(0x20c)),fileUpload=require(_0x148516(0x2a1)),{networkInterfaces}=require('os'),PORT=argv[_0x148516(0x2a0)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x148516(0x3dd)](PORT)&&(console[_0x148516(0x207)](_0x148516(0x260)+PORT+_0x148516(0x2e5)),process['exit'](0x1));const HOST=argv[_0x148516(0x1f4)]||null,userID=argv[_0x148516(0x3c9)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x148516(0x3ca)];let bbpath=_0x148516(0x35d),bbpath2='';const botfile=_0x148516(0x230),configfile='bb-config.json',settingsfile=_0x148516(0x3d1),securefile=_0x148516(0x399),environment=require('./'+bbpath2+_0x148516(0x3b7))['environment']||_0x148516(0x286),maxBackups=0xa;let validInstallation=!![];!fs[_0x148516(0x247)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x148516(0x311)),configpath=userID?bbpath+_0x148516(0x289)+userID+'/':bbpath+_0x148516(0x289),configbackuppath=configpath+_0x148516(0x31f),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x148516(0x33f),zippath=userID?bbpath+_0x148516(0x31b)+userID+'/':bbpath+_0x148516(0x31b),loggerfile=fs['createWriteStream'](logspath+_0x148516(0x39a),{'flags':'a'}),temppath=userID?bbpath+_0x148516(0x3d4)+userID+'/':bbpath+_0x148516(0x3d4);!fs['existsSync'](configpath)&&fs[_0x148516(0x215)](configpath);!fs[_0x148516(0x247)](configbackuppath)&&fs[_0x148516(0x215)](configbackuppath);!fs[_0x148516(0x247)](logspath)&&fs[_0x148516(0x215)](logspath);!fs[_0x148516(0x247)](zippath)&&fs[_0x148516(0x215)](zippath);!fs[_0x148516(0x247)](temppath)&&fs[_0x148516(0x215)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x148516(0x203)]({'bots':[]})[_0x148516(0x2bc)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x148516(0x203)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x148516(0x37d),'onepagemode':![],'marketcapApi':''}})[_0x148516(0x2bc)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x148516(0x2bc)]();let crypt=new Crypt({'md':_0x148516(0x33d),'rsaStandard':_0x148516(0x258)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x148516(0x2a2)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x148516(0x319)]!=''&&settings[_0x148516(0x319)]!='***')&&settings[_0x148516(0x25d)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x471bec,_0x56d75a)=>{const _0x29e006=_0x148516,_0x35cd05=/#[A-Z]{3}#/g;if(typeof _0x471bec==_0x29e006(0x2f2)){!_0x56d75a?_0x471bec=_0x471bec['replace'](_0x35cd05,''):(_0x471bec=_0x471bec[_0x29e006(0x334)](/#BLU#/g,_0x29e006(0x33e)),_0x471bec=_0x471bec[_0x29e006(0x334)](/#RED#/g,_0x29e006(0x231)),_0x471bec=_0x471bec[_0x29e006(0x334)](/#YEL#/g,'\x1b[33m'),_0x471bec=_0x471bec['replace'](/#MAG#/g,_0x29e006(0x3a7)),_0x471bec=_0x471bec[_0x29e006(0x334)](/#CYA#/g,_0x29e006(0x1fe)),_0x471bec=_0x471bec['replace'](/#RES#/g,_0x29e006(0x23d)));;}return _0x471bec;},logger={'screen':_0x50e127=>{const _0x4c99c3=_0x148516;console[_0x4c99c3(0x207)](parseColor(_0x50e127,!![]));},'simple':_0x1c6173=>{const _0x307232=_0x148516;console[_0x307232(0x207)](parseColor(_0x1c6173,!![])),loggerfile[_0x307232(0x2bc)](util['format'](parseColor(_0x1c6173,![]))+'\x0a');},'full':async _0x27fde0=>{const _0x38fea3=_0x148516,_0x435456=getTimeStamp()+_0x38fea3(0x1fb)+_0x27fde0;console['log'](parseColor(_0x435456,!![])),loggerfile['write'](util[_0x38fea3(0x355)](parseColor(_0x435456,![]))+'\x0a');if(tgBot&&settings[_0x38fea3(0x365)]&&settings['telegramEvents']!=_0x38fea3(0x3bc))await sendTelegram(settings[_0x38fea3(0x365)],_0x38fea3(0x2c4)+parseColor(_0x27fde0,![]));},'debug':async(_0x3c2112,_0x226068='')=>{const _0x25a0c1=_0x148516,_0xc35a3d=getTimeStamp()+_0x25a0c1(0x1f3)+_0x3c2112;if(debugging)console['log'](parseColor(_0xc35a3d,!![]));loggerfile[_0x25a0c1(0x2bc)](util[_0x25a0c1(0x355)](parseColor(_0xc35a3d,![]))+'\x0a');if(_0x226068){if(debugging)console[_0x25a0c1(0x207)](_0x226068);loggerfile[_0x25a0c1(0x2bc)](util['format'](_0x226068)+'\x0a');}}};let terminating=![];process['on'](_0x148516(0x396),function(_0x1cf4e4){const _0x521263=_0x148516;_0x1cf4e4['toString']()[_0x521263(0x221)]('address\x20already\x20in\x20use')?(logger[_0x521263(0x22f)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x1cf4e4[_0x521263(0x2a0)]+'#RES#'),process[_0x521263(0x1fa)]({'terminate':!![]},_0x4f78b2=>{})):logger[_0x521263(0x22f)](_0x1cf4e4);}),process['on'](_0x148516(0x2b4),()=>{const _0x534c4e=_0x148516;stopAllBots(),process[_0x534c4e(0x2b4)](0x0);}),process['on'](_0x148516(0x351),()=>{const _0x370a2d=_0x148516;stopAllBots(),process[_0x370a2d(0x2b4)](0x0);}),process['on'](_0x148516(0x2e6),()=>{const _0x490fe0=_0x148516;stopAllBots(),process[_0x490fe0(0x2b4)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x148516(0x3b7))[_0x148516(0x34a)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x148516(0x372)),app=express(),http=require(_0x148516(0x35a))[_0x148516(0x276)](app);app[_0x148516(0x1e3)](fileUpload({'useTempFiles':!![]})),app[_0x148516(0x329)](_0x148516(0x1e7),async(_0x3b0b3b,_0x4282af)=>{const _0x39a634=_0x148516,_0x3e444b=_0x3b0b3b[_0x39a634(0x2f8)][_0x39a634(0x21f)],_0x2968ed=getClientsWithBotID('botmanager'),_0x488d77=_0x3b0b3b[_0x39a634(0x235)][_0x39a634(0x2ea)],_0xadb1cf=timelyDecrypt(_0x488d77,![]),_0xbf7ed2=_0x2968ed[_0x39a634(0x34f)](_0x3fdf22=>_0x3fdf22[_0x39a634(0x2ea)]==_0xadb1cf);if(_0xbf7ed2){const _0x125795=normalizeIP(_0x3b0b3b[_0x39a634(0x2f7)][_0x39a634(0x38c)])[_0x39a634(0x2c5)],_0xe14507=_0x3b0b3b[_0x39a634(0x235)]['tkn'];if(validateAccess(_0xe14507,_0xadb1cf,_0x125795)['allow'])_0x3e444b==_0x39a634(0x26e)&&await backupConfigFiles(),await zipFiles(_0x3e444b),_0x4282af['download'](zippath+(_0x3e444b+_0x39a634(0x24b)),_0xb4b454=>{const _0x91933d=_0x39a634;_0xb4b454&&(logger[_0x91933d(0x298)](_0x91933d(0x2b3)+_0x3e444b),logger[_0x91933d(0x22f)](_0xb4b454));});else logger['full'](_0x39a634(0x2e1)+_0x3e444b+_0x39a634(0x3e1));}else logger[_0x39a634(0x298)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3e444b+_0x39a634(0x281));}),app[_0x148516(0x2f5)](_0x148516(0x2ad),async(_0x1cb29f,_0x4ecb23)=>{const _0x416173=_0x148516,_0x44dd10=getClientsWithBotID(_0x416173(0x297)),_0x401ac9=_0x1cb29f['headers'][_0x416173(0x2ea)],_0x3c0463=timelyDecrypt(_0x401ac9,![]),_0x53b5a5=_0x44dd10[_0x416173(0x34f)](_0x4e3230=>_0x4e3230[_0x416173(0x2ea)]==_0x3c0463);logger['debug']('Backup\x20file\x20uploaded');if(_0x53b5a5){const _0x1bda78=normalizeIP(_0x1cb29f[_0x416173(0x2f7)]['remoteAddress'])['store'],_0x218b00=_0x1cb29f[_0x416173(0x235)][_0x416173(0x37f)];if(validateAccess(_0x218b00,_0x3c0463,_0x1bda78)[_0x416173(0x250)]){if(_0x1cb29f[_0x416173(0x223)]){const _0x27e588=_0x1cb29f['files'][_0x416173(0x3bd)];await _0x27e588['mv'](temppath+_0x27e588[_0x416173(0x2d8)]),_0x4ecb23['send']({'status':!![],'message':_0x416173(0x3be)});const _0x469478=getBotsWithMode();_0x469478[_0x416173(0x3e4)]>0x0?confirmRestore(temppath,_0x27e588[_0x416173(0x2d8)]):unzipFile(temppath,_0x27e588['name']);}}else logger[_0x416173(0x298)](_0x416173(0x368));}else logger['full'](_0x416173(0x2b0));}),app[_0x148516(0x1e3)](express[_0x148516(0x3cc)](path[_0x148516(0x36d)](__dirname,bbpath2,_0x148516(0x36f)))),app[_0x148516(0x1e3)](express['static'](path[_0x148516(0x36d)](__dirname,bbpath2,_0x148516(0x35e)))),app[_0x148516(0x329)]('/',function(_0x29ad5e,_0x5afad1){const _0x489bd9=_0x148516;_0x5afad1[_0x489bd9(0x338)](path[_0x489bd9(0x36d)](__dirname,bbpath2,_0x489bd9(0x36f),_0x489bd9(0x3aa)));}),app[_0x148516(0x329)]('/:bot',function(_0x4ebfd5,_0x2106da){const _0x50dd86=_0x148516;_0x2106da[_0x50dd86(0x338)](path[_0x50dd86(0x36d)](__dirname,bbpath2,_0x50dd86(0x35e),_0x50dd86(0x3aa)));}),app[_0x148516(0x329)]('/:bot/portfolio',(_0x5dbb1d,_0x5c3b51)=>{const _0x4043ea=_0x148516;_0x5c3b51['sendFile'](path[_0x4043ea(0x36d)](__dirname,bbpath2,'build',_0x4043ea(0x3aa)));}),app[_0x148516(0x329)]('/:bot/performance',(_0x6dc178,_0x576369)=>{const _0x411284=_0x148516;_0x576369['sendFile'](path['join'](__dirname,bbpath2,_0x411284(0x35e),_0x411284(0x3aa)));}),app[_0x148516(0x329)](_0x148516(0x3a9),(_0x33575b,_0x57f007)=>{const _0x520ece=_0x148516;_0x57f007[_0x520ece(0x338)](path[_0x520ece(0x36d)](__dirname,bbpath2,_0x520ece(0x35e),_0x520ece(0x3aa)));}),app[_0x148516(0x329)](_0x148516(0x206),(_0x4ba0f7,_0x33a0d2)=>{const _0xeac1df=_0x148516;_0x33a0d2[_0xeac1df(0x338)](path[_0xeac1df(0x36d)](__dirname,bbpath2,_0xeac1df(0x35e),_0xeac1df(0x3aa)));}),app[_0x148516(0x329)](_0x148516(0x3b0),(_0x458ed8,_0x33201d)=>{const _0x24c203=_0x148516;_0x33201d['sendFile'](path[_0x24c203(0x36d)](__dirname,bbpath2,_0x24c203(0x35e),_0x24c203(0x3aa)));}),app[_0x148516(0x329)](_0x148516(0x27d),(_0x1c4cef,_0x30e604)=>{const _0x4af204=_0x148516;_0x30e604[_0x4af204(0x338)](path[_0x4af204(0x36d)](__dirname,bbpath2,_0x4af204(0x35e),_0x4af204(0x3aa)));});if(HOST)http['listen'](PORT,HOST);else http[_0x148516(0x2ab)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1bf9c4=_0x148516;let _0x3264e5=_0x1bf9c4(0x27b);const _0x3ab0e2=networkInterfaces(),_0x4bd7a6={};for(const _0x45c611 of Object['keys'](_0x3ab0e2)){for(const _0xa2c34e of _0x3ab0e2[_0x45c611]){if((_0xa2c34e[_0x1bf9c4(0x25b)]==_0x1bf9c4(0x29e)||_0xa2c34e[_0x1bf9c4(0x25b)]==0x4)&&!_0xa2c34e[_0x1bf9c4(0x29f)]){const _0x226a32=ipaddr[_0x1bf9c4(0x348)](_0xa2c34e[_0x1bf9c4(0x22e)])[_0x1bf9c4(0x374)]();_0x226a32!=_0x1bf9c4(0x371)&&(!_0x4bd7a6[_0x45c611]&&(_0x4bd7a6[_0x45c611]=[]),_0x4bd7a6[_0x45c611][_0x1bf9c4(0x27e)](_0xa2c34e['address']),_0x3264e5=_0xa2c34e[_0x1bf9c4(0x22e)]);}}}return{'serverip':_0x3264e5,'netinterfaces':_0x4bd7a6};}async function startServer(){const _0x3c3893=_0x148516,{serverip:_0x5b2988,netinterfaces:_0x5d9525}=getServerIP();logger[_0x3c3893(0x22f)](''),logger[_0x3c3893(0x22f)]('-----------------------------------------------------------------------------------'),await logger[_0x3c3893(0x298)](_0x3c3893(0x3c0)+serverversion+_0x3c3893(0x2bb)+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x3c3893(0x2bf)+PORT+_0x3c3893(0x268))+('=>\x20Go\x20to\x20#CYA#http://'+_0x5b2988+':'+PORT+_0x3c3893(0x340))),logger['simple'](_0x3c3893(0x2ed));if(config['length']!=0x0)for(const _0x222def of config){const _0x9c64a3=_0x222def['mode']=='auto'?'a':'m';if(_0x222def[_0x3c3893(0x28f)]==_0x3c3893(0x3bf)||_0x222def[_0x3c3893(0x28f)]=='new')await logger[_0x3c3893(0x298)](_0x3c3893(0x232)+_0x9c64a3+_0x3c3893(0x32d)+_0x222def[_0x3c3893(0x234)]+_0x3c3893(0x300)+_0x222def[_0x3c3893(0x261)]),startBot([_0x222def[_0x3c3893(0x234)],userID],{'cwd':bbpath},function(_0x296ba9){const _0x387c48=_0x3c3893;if(_0x296ba9)logger[_0x387c48(0x298)](_0x296ba9);});else(_0x222def['status']==_0x3c3893(0x2d3)||_0x222def[_0x3c3893(0x28f)]==_0x3c3893(0x20a))&&await logger['full'](_0x3c3893(0x3a1)+_0x9c64a3+_0x3c3893(0x35f)+_0x222def[_0x3c3893(0x234)]+'\x20|\x20'+_0x222def[_0x3c3893(0x261)]);}else!newBot&&logger[_0x3c3893(0x22f)](_0x3c3893(0x2a8));if(newBot)addBot();logger[_0x3c3893(0x22f)](_0x3c3893(0x2ed)),logger['simple'](''),await logger['debug']('Node.js\x20v'+nodeversion),await logger[_0x3c3893(0x3d6)]('Network\x20Interfaces:',_0x5d9525);}function startSocket(){const _0x10092a=_0x148516;io['on'](_0x10092a(0x291),_0x174e04=>{const _0x2a695c=_0x10092a;let _0x45221a,_0x6ad3f6,_0x33aaef,_0x39d926,_0x13c469;const _0x523067=_0x174e04['handshake'][_0x2a695c(0x235)][_0x2a695c(0x2d4)];_0x6ad3f6=_0x523067[_0x2a695c(0x367)](/bot[0-9]{3}/);if(_0x6ad3f6)_0x33aaef=_0x6ad3f6[0x0][_0x2a695c(0x367)](/[0-9]{3}/);if(_0x33aaef)_0x45221a=_0x33aaef[0x0];else _0x45221a=_0x2a695c(0x297);const _0x14f05f=_0x174e04['handshake'][_0x2a695c(0x24f)][_0x2a695c(0x238)];if(!_0x14f05f)_0x174e04[_0x2a695c(0x326)]('status',{'publicKey':secure[_0x2a695c(0x34d)]});else{_0x39d926=timelyDecrypt(_0x14f05f,![]);if(!_0x39d926)_0x174e04[_0x2a695c(0x326)](_0x2a695c(0x28f),{'publicKey':secure[_0x2a695c(0x34d)]});else{_0x13c469=normalizeIP(_0x174e04[_0x2a695c(0x37a)][_0x2a695c(0x38c)])[_0x2a695c(0x2c5)];if(!devices[_0x39d926])devices[_0x39d926]={'uuid':_0x39d926,'access':{'token':null}};devices[_0x39d926]['ip']=_0x13c469;const _0x38bad0=addClient(_0x174e04['id'],_0x39d926,_0x45221a);setAccess(_0x38bad0),emitMessages(),_0x174e04['on'](_0x2a695c(0x244),_0x1d9a68=>{const _0x2b2e83=_0x2a695c,_0x54e6c2=timelyDecrypt(_0x1d9a68[_0x2b2e83(0x29a)],!![],'|@|');if(_0x54e6c2){_0x1d9a68={'username':_0x1d9a68[_0x2b2e83(0x32e)],'password':_0x54e6c2},devices[_0x39d926][_0x2b2e83(0x225)]=validateCredentials(_0x1d9a68,_0x39d926);if(devices[_0x39d926][_0x2b2e83(0x225)][_0x2b2e83(0x250)]==![]&&devices[_0x39d926]['access'][_0x2b2e83(0x39c)]==_0x2b2e83(0x1ea))_0x174e04[_0x2b2e83(0x326)](_0x2b2e83(0x28f),{'access':devices[_0x39d926][_0x2b2e83(0x225)]}),loginAccess2FA(_0x39d926,_0x13c469);else{if(devices[_0x39d926]['access'][_0x2b2e83(0x250)]==![]&&devices[_0x39d926][_0x2b2e83(0x225)][_0x2b2e83(0x39c)]==_0x2b2e83(0x301))_0x174e04[_0x2b2e83(0x326)](_0x2b2e83(0x28f),{'access':devices[_0x39d926][_0x2b2e83(0x225)]});else devices[_0x39d926]['access'][_0x2b2e83(0x250)]&&devices[_0x39d926]['access'][_0x2b2e83(0x39c)]==_0x2b2e83(0x21d)&&(getClientsWithUuid(_0x39d926)[_0x2b2e83(0x2f0)](_0x36cbf8=>{setAccess(_0x36cbf8);}),logger['debug'](_0x2b2e83(0x253)+_0x39d926['slice'](-0x8)),setTokenRefresh(_0x39d926),setSessionTimeout(_0x2b2e83(0x244),_0x39d926));}}else logger[_0x2b2e83(0x298)](_0x2b2e83(0x307));}),_0x174e04['on'](_0x2a695c(0x3d2),()=>{resetPassword();}),_0x174e04['on'](_0x2a695c(0x2f4),_0xa06ef6=>{removeClient(_0x174e04['id']);}),_0x45221a=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3af4af){const _0x5a804e=_0x148516;if(_0x3af4af!=_0x5a804e(0x297)&&config[_0x5a804e(0x358)]!=''){if(pid[_0x3af4af])pid[_0x3af4af][_0x5a804e(0x1fa)]({'function':_0x5a804e(0x366),'args':null});}_0x3af4af!=_0x5a804e(0x297)&&broadcastToBots(_0x5a804e(0x208),JSON['stringify'](config));}function reloadBotManager(){const _0x2ad0fa=_0x148516;getClientsWithBotID(_0x2ad0fa(0x297))[_0x2ad0fa(0x2f0)](_0xe000fa=>{const _0x31b53d=_0x2ad0fa;getSocket(_0xe000fa['id'])['emit'](_0x31b53d(0x28f),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x2125ad){const _0x4df1dd=_0x148516;return io[_0x4df1dd(0x273)][_0x4df1dd(0x273)][_0x4df1dd(0x329)](_0x2125ad);}function setAccess(_0x2f42e2){const _0x220163=_0x148516,_0x4b5ea5=getSocket(_0x2f42e2['id']),_0xa3d27e=_0x2f42e2['uuid'],_0xb47072=_0x2f42e2[_0x220163(0x2b8)];devices[_0xa3d27e][_0x220163(0x225)]=validateAccess(devices[_0xa3d27e][_0x220163(0x225)]['token'],_0xa3d27e),logger['debug']('Setting\x20access:\x20'+devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x39c)]+'\x20|\x20client:\x20...'+_0x2f42e2['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0xa3d27e[_0x220163(0x3b1)](-0x8)),_0x4b5ea5[_0x220163(0x36d)](_0xa3d27e);if(devices[_0xa3d27e][_0x220163(0x225)]['allow']){_0x4b5ea5[_0x220163(0x36d)](_0xb47072);if(_0xb47072==_0x220163(0x297))initializeSocketBotManager(_0x4b5ea5);else initializeSocketBot(_0x4b5ea5);initClient(_0xb47072);}devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x240)]&&devices[_0xa3d27e]['access'][_0x220163(0x39c)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x220163(0x237),_0xa3d27e),devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x240)]&&devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x39c)]==_0x220163(0x39b)&&setSessionTimeout('login',_0xa3d27e),_0x4b5ea5[_0x220163(0x326)](_0x220163(0x28f),{'status':_0x2f42e2['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xa3d27e]['access'],'externalip':devices[_0xa3d27e]['ip'],'publicKey':secure[_0x220163(0x34d)],'userid':settings[_0x220163(0x262)],'validInstallation':validInstallation}),devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x250)]==![]&&devices[_0xa3d27e][_0x220163(0x225)][_0x220163(0x39c)]==_0x220163(0x275)&&temporaryAccess2FA(_0xa3d27e,devices[_0xa3d27e]['ip']);}function setSessionTimeout(_0x23d11c,_0x2d40fc){const _0x150305=_0x148516;let _0x5e7f38;if(_0x23d11c==_0x150305(0x244))_0x5e7f38=loginExpiry*0x3c*0x3e8;else _0x5e7f38=devices[_0x2d40fc][_0x150305(0x380)][_0x150305(0x360)]*0x3c*0x3e8-(new Date()[_0x150305(0x2e7)]()-devices[_0x2d40fc][_0x150305(0x380)][_0x150305(0x25f)]);if(devices[_0x2d40fc][_0x150305(0x328)])clearTimeout(devices[_0x2d40fc][_0x150305(0x328)]);devices[_0x2d40fc][_0x150305(0x328)]=setTimeout(()=>{const _0x2b6941=_0x150305;if(devices[_0x2d40fc][_0x2b6941(0x39e)])clearTimeout(devices[_0x2d40fc][_0x2b6941(0x39e)]);removeSocketListeners(_0x2d40fc),addBlacklist(_0x2d40fc),devices[_0x2d40fc][_0x2b6941(0x380)]=null,devices[_0x2d40fc][_0x2b6941(0x37b)]=null,devices[_0x2d40fc]['access'][_0x2b6941(0x240)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x2d40fc[_0x2b6941(0x3b1)](-0x8)),devices[_0x2d40fc][_0x2b6941(0x225)]=validateAccess(devices[_0x2d40fc][_0x2b6941(0x225)][_0x2b6941(0x240)],_0x2d40fc),!(devices[_0x2d40fc]['access']['allow']&&devices[_0x2d40fc]['access'][_0x2b6941(0x39c)]==_0x2b6941(0x219))&&(_0x23d11c==_0x2b6941(0x244)?io['to'](_0x2d40fc)[_0x2b6941(0x326)]('status',{'access':{'allow':![],'reason':_0x2b6941(0x246),'token':null}}):io['to'](_0x2d40fc)[_0x2b6941(0x326)](_0x2b6941(0x28f),{'access':{'allow':![],'reason':_0x2b6941(0x242),'token':null}})),devices[_0x2d40fc][_0x2b6941(0x225)][_0x2b6941(0x240)]=null;},_0x5e7f38);}function setTokenRefresh(_0x4dc6fd){const _0x3b48e0=_0x148516;if(devices[_0x4dc6fd][_0x3b48e0(0x39e)])clearTimeout(devices[_0x4dc6fd][_0x3b48e0(0x39e)]);devices[_0x4dc6fd]['pidRefreshToken']=setTimeout(()=>{const _0x17b060=_0x3b48e0;getClientsWithUuid(_0x4dc6fd)[_0x17b060(0x3e4)]!=0x0?(devices[_0x4dc6fd]['access']=refreshToken(_0x4dc6fd),io['to'](_0x4dc6fd)[_0x17b060(0x326)](_0x17b060(0x28f),{'status':_0x17b060(0x3de),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4dc6fd][_0x17b060(0x225)],'externalip':devices[_0x4dc6fd]['ip'],'publicKey':secure[_0x17b060(0x34d)],'validInstallation':validInstallation}),setTokenRefresh(_0x4dc6fd)):clearTimeout(devices[_0x4dc6fd][_0x17b060(0x39e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5025f7){const _0x3f7553=_0x148516,_0x1a77f1=getClient(_0x5025f7['id'])['uuid'];_0x5025f7[_0x3f7553(0x326)](_0x3f7553(0x208),config),_0x5025f7[_0x3f7553(0x326)](_0x3f7553(0x341),cleanSettings()),_0x5025f7['on'](_0x3f7553(0x2d2),_0x28f6b8=>{const _0x5d48ef=_0x3f7553;if(validateAccess(_0x28f6b8,_0x1a77f1)[_0x5d48ef(0x250)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5025f7['on'](_0x3f7553(0x339),(_0x2da4c8,_0x289edb)=>{const _0x3df5bf=_0x3f7553;if(validateAccess(_0x289edb,_0x1a77f1)[_0x3df5bf(0x250)])toggleBot(_0x2da4c8[_0x3df5bf(0x234)],_0x2da4c8['status'],_0x2da4c8[_0x3df5bf(0x31a)]);else logger[_0x3df5bf(0x298)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5025f7['on'](_0x3f7553(0x37c),(_0x58f2ae,_0x4c3400)=>{const _0x4a70f8=_0x3f7553;if(validateAccess(_0x4c3400,_0x1a77f1)[_0x4a70f8(0x250)])toggleBotMode(_0x58f2ae);else logger[_0x4a70f8(0x298)](_0x4a70f8(0x357));}),_0x5025f7['on'](_0x3f7553(0x23f),(_0x5b7d9a,_0x2a4ca1)=>{const _0x4fa350=_0x3f7553;if(validateAccess(_0x2a4ca1,_0x1a77f1)['allow'])deleteBot(_0x5b7d9a);else logger[_0x4fa350(0x298)](_0x4fa350(0x3c2));}),_0x5025f7['on'](_0x3f7553(0x354),(_0x4de7e4,_0x1d7da6)=>{const _0x8876bb=_0x3f7553;if(validateAccess(_0x1d7da6,_0x1a77f1)[_0x8876bb(0x250)])storeSettings(_0x4de7e4,!![]);else logger[_0x8876bb(0x298)](_0x8876bb(0x3a5));}),_0x5025f7['on']('update-bb',_0x54fb41=>{const _0x280710=_0x3f7553;if(validateAccess(_0x54fb41,_0x1a77f1)[_0x280710(0x250)])updateBB(_0x280710(0x24c));else logger[_0x280710(0x298)](_0x280710(0x2ce));}),_0x5025f7['on'](_0x3f7553(0x342),_0x39b738=>{const _0x472bd0=_0x3f7553;if(validateAccess(_0x39b738,_0x1a77f1)[_0x472bd0(0x250)])updateBB(_0x472bd0(0x3ac));else logger[_0x472bd0(0x298)](_0x472bd0(0x278));}),_0x5025f7['on'](_0x3f7553(0x315),_0x5445a5=>{const _0x4b9dba=_0x3f7553;if(validateAccess(_0x5445a5,_0x1a77f1)['allow']){const _0x570bec=getClient(_0x5025f7['id']);if(_0x570bec)getBackupFiles(_0x570bec['uuid']);else logger[_0x4b9dba(0x298)](_0x4b9dba(0x22b));}else logger[_0x4b9dba(0x298)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x5025f7['on'](_0x3f7553(0x1e4),(_0x2beb30,_0x46dd7a)=>{const _0x13247d=_0x3f7553;if(validateAccess(_0x46dd7a,_0x1a77f1)[_0x13247d(0x250)])restoreBackupFile(_0x2beb30);else logger[_0x13247d(0x298)](_0x13247d(0x3c4));}),_0x5025f7['on'](_0x3f7553(0x33c),_0x1b73d9=>{const _0x2ad4a4=_0x3f7553;if(validateAccess(_0x1b73d9,_0x1a77f1)[_0x2ad4a4(0x250)])getMessages();else logger[_0x2ad4a4(0x298)](_0x2ad4a4(0x2fa));}),_0x5025f7['on']('confirm-message',(_0x538ebb,_0x3a4903)=>{const _0x12ff12=_0x3f7553;if(validateAccess(_0x3a4903,_0x1a77f1)[_0x12ff12(0x250)])confirmMessage(_0x538ebb);else logger[_0x12ff12(0x298)](_0x12ff12(0x359));}),_0x5025f7['on']('logout',_0x322fb5=>{const _0x1fa43b=_0x3f7553;if(validateAccess(_0x322fb5,_0x1a77f1)[_0x1fa43b(0x250)]){if(devices[_0x1a77f1]['pidRefreshToken'])clearTimeout(devices[_0x1a77f1]['pidRefreshToken']);if(devices[_0x1a77f1][_0x1fa43b(0x328)])clearTimeout(devices[_0x1a77f1]['pidExpireLogin']);removeSocketListeners(getClient(_0x5025f7['id'])[_0x1fa43b(0x2ea)]),addBlacklist(_0x1a77f1),devices[_0x1a77f1][_0x1fa43b(0x380)]=null,devices[_0x1a77f1]['telegram2FaApproval']=null,devices[_0x1a77f1][_0x1fa43b(0x225)]['token']=null,logger[_0x1fa43b(0x3d6)]('Logged\x20out\x20user\x20...'+_0x1a77f1[_0x1fa43b(0x3b1)](-0x8)),io['to'](getClient(_0x5025f7['id'])[_0x1fa43b(0x2ea)])[_0x1fa43b(0x326)](_0x1fa43b(0x28f),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1fa43b(0x298)](_0x1fa43b(0x2f3));});}function initializeSocketBot(_0x416cd6){const _0x3f8624=_0x148516,_0x1128b1=getClient(_0x416cd6['id'])[_0x3f8624(0x2b8)],_0x76e507=getClient(_0x416cd6['id'])[_0x3f8624(0x2ea)];_0x416cd6['on']('get-logs',(_0x503cb7,_0x3c4a52)=>{const _0x3d3847=_0x3f8624;if(validateAccess(_0x3c4a52,_0x76e507)['allow']){if(pid[_0x1128b1])pid[_0x1128b1][_0x3d3847(0x1fa)]({'function':_0x3d3847(0x392),'args':_0x503cb7});}else logger[_0x3d3847(0x298)](_0x3d3847(0x28e));}),_0x416cd6['on'](_0x3f8624(0x369),(_0x24af5a,_0x534171)=>{const _0x3c0916=_0x3f8624;if(validateAccess(_0x534171,_0x76e507)[_0x3c0916(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1]['send']({'function':'deleteHistoryAlerts','args':_0x24af5a});}else logger[_0x3c0916(0x298)](_0x3c0916(0x2aa));}),_0x416cd6['on'](_0x3f8624(0x1e5),(_0x14b746,_0x244502)=>{const _0x38e468=_0x3f8624;if(validateAccess(_0x244502,_0x76e507)[_0x38e468(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1][_0x38e468(0x1fa)]({'function':_0x38e468(0x2de),'args':_0x14b746});}else logger['full'](_0x38e468(0x1e9));}),_0x416cd6['on'](_0x3f8624(0x3b6),(_0x267be1,_0x744dc5)=>{const _0x3bfe02=_0x3f8624;if(validateAccess(_0x744dc5,_0x76e507)[_0x3bfe02(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1]['send']({'function':_0x3bfe02(0x284),'args':_0x267be1});}else logger[_0x3bfe02(0x298)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x416cd6['on'](_0x3f8624(0x2e0),(_0x42701b,_0x56f4b1)=>{const _0x50ad05=_0x3f8624;if(validateAccess(_0x56f4b1,_0x76e507)[_0x50ad05(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1][_0x50ad05(0x1fa)]({'function':_0x50ad05(0x3d9),'args':_0x42701b});}else logger['full'](_0x50ad05(0x375));}),_0x416cd6['on'](_0x3f8624(0x2ec),(_0x197317,_0x1bc3ed)=>{const _0x4bfa81=_0x3f8624;if(validateAccess(_0x1bc3ed,_0x76e507)[_0x4bfa81(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1][_0x4bfa81(0x1fa)]({'function':_0x4bfa81(0x398),'args':_0x197317});}else logger['full'](_0x4bfa81(0x390));}),_0x416cd6['on'](_0x3f8624(0x267),_0x3f401d=>{const _0x3043bd=_0x3f8624;if(validateAccess(_0x3f401d,_0x76e507)['allow']){if(pid[_0x1128b1])pid[_0x1128b1][_0x3043bd(0x1fa)]({'function':_0x3043bd(0x3a8),'args':null});}else logger[_0x3043bd(0x298)](_0x3043bd(0x3c8));}),_0x416cd6['on']('get-starting-balances',_0xca7ca8=>{const _0x1d0029=_0x3f8624;if(validateAccess(_0xca7ca8,_0x76e507)[_0x1d0029(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1]['send']({'function':'getStartingBalances','args':null});}else logger['full'](_0x1d0029(0x1e1));}),_0x416cd6['on'](_0x3f8624(0x3d3),(_0x1f2280,_0x588c2e)=>{const _0x512a69=_0x3f8624;if(validateAccess(_0x588c2e,_0x76e507)['allow']){if(pid[_0x1128b1])pid[_0x1128b1][_0x512a69(0x1fa)]({'function':_0x512a69(0x25a),'args':_0x1f2280});}else logger['full'](_0x512a69(0x2da));}),_0x416cd6['on'](_0x3f8624(0x327),_0x8f6de7=>{const _0x4e9b26=_0x3f8624;if(validateAccess(_0x8f6de7,_0x76e507)[_0x4e9b26(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1][_0x4e9b26(0x1fa)]({'function':'cancelLoading','args':null});}else logger[_0x4e9b26(0x298)](_0x4e9b26(0x3a4));}),_0x416cd6['on'](_0x3f8624(0x2b2),_0x14492c=>{const _0x35c4b6=_0x3f8624;if(validateAccess(_0x14492c,_0x76e507)[_0x35c4b6(0x250)]){if(pid[_0x1128b1])pid[_0x1128b1][_0x35c4b6(0x1fa)]({'function':_0x35c4b6(0x3cf),'args':null});}else logger[_0x35c4b6(0x298)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x416cd6['on'](_0x3f8624(0x2b9),_0x30d795=>{const _0x1f5358=_0x3f8624;if(validateAccess(_0x30d795,_0x76e507)[_0x1f5358(0x250)])updateBB(_0x1f5358(0x24c));else logger[_0x1f5358(0x298)](_0x1f5358(0x2ce));}),_0x416cd6['on'](_0x3f8624(0x33c),_0x5f1588=>{const _0x4e8531=_0x3f8624;if(validateAccess(_0x5f1588,_0x76e507)[_0x4e8531(0x250)])getMessages();else logger['full'](_0x4e8531(0x2fa));}),_0x416cd6['on'](_0x3f8624(0x37e),(_0x4a50b0,_0x5c7e2d)=>{const _0x58a876=_0x3f8624;if(validateAccess(_0x5c7e2d,_0x76e507)[_0x58a876(0x250)])confirmMessage(_0x4a50b0);else logger['full'](_0x58a876(0x359));}),_0x416cd6['on'](_0x3f8624(0x30c),_0xc41acd=>{const _0x4f8704=_0x3f8624;if(validateAccess(_0xc41acd,_0x76e507)[_0x4f8704(0x250)]){if(devices[_0x76e507][_0x4f8704(0x39e)])clearTimeout(devices[_0x76e507][_0x4f8704(0x39e)]);if(devices[_0x76e507][_0x4f8704(0x328)])clearTimeout(devices[_0x76e507][_0x4f8704(0x328)]);removeSocketListeners(getClient(_0x416cd6['id'])[_0x4f8704(0x2ea)]),addBlacklist(_0x76e507),devices[_0x76e507][_0x4f8704(0x380)]=null,devices[_0x76e507][_0x4f8704(0x37b)]=null,devices[_0x76e507][_0x4f8704(0x225)]['token']=null,logger[_0x4f8704(0x3d6)](_0x4f8704(0x233)+_0x76e507['slice'](-0x8)),io['to'](getClient(_0x416cd6['id'])[_0x4f8704(0x2ea)])['emit']('status',{'access':{'allow':![],'reason':_0x4f8704(0x216),'token':null}});}else logger[_0x4f8704(0x298)](_0x4f8704(0x2f3));});}function removeSocketListeners(_0x52ca65){getClientsWithUuid(_0x52ca65)['forEach'](_0x296f2a=>{const _0x5e6b0b=_0x437f;getSocket(_0x296f2a['id'])[_0x5e6b0b(0x316)]();});}function cleanSettings(){const _0x2bf49a=_0x148516;let _0x6788da=settings;return settings[_0x2bf49a(0x319)]&&settings[_0x2bf49a(0x319)]!=''&&(_0x6788da={..._0x6788da,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x6788da={..._0x6788da,'bbPassword':_0x2bf49a(0x21c)}),settings['marketcapApi']&&settings[_0x2bf49a(0x25e)]!=''&&(_0x6788da={..._0x6788da,'marketcapApi':_0x2bf49a(0x21c)}),(settings['bbPassword']&&settings[_0x2bf49a(0x26d)]==_0x2bf49a(0x26f)||settings[_0x2bf49a(0x319)]&&settings[_0x2bf49a(0x319)]==_0x2bf49a(0x26f)||settings['marketcapApi']&&settings[_0x2bf49a(0x25e)]==_0x2bf49a(0x26f))&&(_0x6788da={..._0x6788da,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x2bf49a(0x319)]==_0x2bf49a(0x26f),'marketcap':settings[_0x2bf49a(0x25e)]==_0x2bf49a(0x26f)}}),_0x6788da;}async function updateBB(_0x10674e){const _0x3c3c0c=_0x148516;await backupConfigFiles(),installingUpdate=!![],config[_0x3c3c0c(0x2f0)](_0xfe27eb=>{const _0x561ad2=_0x3c3c0c;restartBot(_0xfe27eb[_0x561ad2(0x234)]);});if(_0x10674e==_0x3c3c0c(0x24c))process[_0x3c3c0c(0x1fa)]({'update':!![],'environment':environment},_0x44d145=>{});else _0x10674e=='reinstall'&&process[_0x3c3c0c(0x1fa)]({'reinstall':!![],'environment':environment},_0x30e5d5=>{});}function startBot(_0x3ce2da,_0x16cabb,_0xec7122){const _0x5eee6d=_0x148516;if(debugging)_0x3ce2da[_0x5eee6d(0x27e)]('-d');let _0x11eff2=![];const _0x12e859=_0x3ce2da[0x0];_0x16cabb={..._0x16cabb,'stdio':['inherit',_0x5eee6d(0x31d),_0x5eee6d(0x31d),_0x5eee6d(0x370)]},pid[_0x12e859]=childProcess['fork'](botfile,_0x3ce2da,_0x16cabb),pid[_0x12e859]['on'](_0x5eee6d(0x305),_0x1f4621=>{const _0x42693c=_0x5eee6d;switch(Object['keys'](_0x1f4621)[0x0]){case _0x42693c(0x261):updateBotName(_0x12e859,_0x1f4621['botname']);break;case _0x42693c(0x38b):updateBotManager();break;case _0x42693c(0x28f):updateStatus(_0x12e859,_0x1f4621[_0x42693c(0x28f)]);break;case _0x42693c(0x31a):updateLive(_0x12e859,_0x1f4621[_0x42693c(0x31a)]);break;case'started':updateLive(_0x12e859,_0x1f4621['started']),io['to'](_0x12e859)[_0x42693c(0x326)](_0x42693c(0x28f),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x42693c(0x217):_0x1f4621[_0x42693c(0x217)]=='restart'&&restartBot(_0x12e859);_0x1f4621[_0x42693c(0x217)]==_0x42693c(0x21a)&&toggleBot(_0x12e859,_0x42693c(0x2d3),_0x42693c(0x229));break;case'telegram':sendTelegramBot(_0x12e859,_0x1f4621[_0x42693c(0x2c3)]);break;case _0x42693c(0x2ef):sendTelegramMsg(_0x1f4621[_0x42693c(0x2ef)]);break;case'function':io['to'](_0x12e859)[_0x42693c(0x326)](_0x1f4621[_0x42693c(0x310)],_0x1f4621[_0x42693c(0x1e6)]);break;}}),pid[_0x12e859]['on'](_0x5eee6d(0x228),function(_0x1e7078){if(_0x11eff2)return;_0x11eff2=!![],_0xec7122(_0x1e7078);}),pid[_0x12e859]['on'](_0x5eee6d(0x2b4),async function(_0x1e9c7e){const _0x2a9183=_0x5eee6d;if(terminating)return;if(installingUpdate){logger['debug']('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io['close']();return;}if(_0x11eff2)return;_0x11eff2=!![],_0xec7122(null);const _0x49e55d=dbConfig[_0x2a9183(0x329)](_0x2a9183(0x208))[_0x2a9183(0x34f)]({'botID':_0x12e859})['value']();_0x49e55d&&(_0x49e55d[_0x2a9183(0x28f)]==_0x2a9183(0x3bf)||_0x49e55d[_0x2a9183(0x28f)]==_0x2a9183(0x34c))&&(await sleep(0x3e8),updateLive(_0x12e859,_0x2a9183(0x229)),logger['full']('Restarting\x20Bot\x20'+_0x12e859),startBot([_0x12e859,userID],{'cwd':bbpath},function(_0x38d282){const _0x5b570c=_0x2a9183;if(_0x38d282)logger[_0x5b570c(0x298)](_0x38d282);}));});}function stopBot(_0x3249f7){const _0x4c6dc1=_0x148516;getClientsWithBotID(_0x3249f7)[_0x4c6dc1(0x2f0)](_0x4cd0ac=>{const _0x18417e=_0x4c6dc1;getSocket(_0x4cd0ac['id'])[_0x18417e(0x2f4)](!![]),removeClient(_0x4cd0ac['id']);}),pid[_0x3249f7]&&(pid[_0x3249f7][_0x4c6dc1(0x21a)](),pid[_0x3249f7]=null);}function stopAllBots(){const _0x53a80e=_0x148516;terminating=!![];const _0x10ef93=getEnabledBots();_0x10ef93[_0x53a80e(0x2f0)](_0x2e36d1=>{const _0x1c6c7a=_0x53a80e;stopBot(_0x2e36d1[_0x1c6c7a(0x234)]);});}function _0x437f(_0x398a31,_0x1c40f2){const _0x1cf6c=_0x39a2();return _0x437f=function(_0x4e34e2,_0x1727af){_0x4e34e2=_0x4e34e2-0x1e0;let _0x39a2fe=_0x1cf6c[_0x4e34e2];return _0x39a2fe;},_0x437f(_0x398a31,_0x1c40f2);}function restartBot(_0x4a13be){const _0x5a4077=_0x148516;if(pid[_0x4a13be])pid[_0x4a13be][_0x5a4077(0x21a)]();}function addBot(){const _0x429b27=_0x148516;let _0x4ef558;for(let _0x3f2f61=0x1;_0x3f2f61<0x3e9;_0x3f2f61++){_0x4ef558=_0x3f2f61['toString']()[_0x429b27(0x34b)](0x3,'0');let _0x14935e=config[_0x429b27(0x34f)](_0x5ae552=>_0x5ae552['botID']==_0x4ef558);if(!_0x14935e)break;}if(_0x4ef558===_0x429b27(0x1f5)){logger[_0x429b27(0x298)](_0x429b27(0x3cd));return;}logger['full'](_0x429b27(0x31c)+_0x4ef558),dbConfig[_0x429b27(0x329)]('bots')[_0x429b27(0x27e)]({'botID':_0x4ef558,'botname':'Bot\x20'+_0x4ef558,'status':_0x429b27(0x34c),'live':''})[_0x429b27(0x2bc)](),startBot([_0x4ef558,userID],{'cwd':bbpath},function(_0x3e9d9b){const _0x9fb0cf=_0x429b27;if(_0x3e9d9b)logger[_0x9fb0cf(0x298)](_0x3e9d9b);}),config=getConfiguration(),io['to'](_0x429b27(0x297))[_0x429b27(0x326)](_0x429b27(0x208),config),broadcastToBots(_0x429b27(0x208),JSON[_0x429b27(0x265)](config));}function deleteBot(_0x166922){const _0x191e66=_0x148516;getClientsWithBotID(_0x166922)[_0x191e66(0x2f0)](_0x2f2216=>{const _0x11ac39=_0x191e66;getSocket(_0x2f2216['id'])[_0x11ac39(0x2f4)](!![]),removeClient(_0x2f2216['id']);}),dbConfig[_0x191e66(0x329)]('bots')[_0x191e66(0x24a)]({'botID':_0x166922})[_0x191e66(0x2bc)](),logger['full'](_0x191e66(0x224)+_0x166922),stopBot(_0x166922);try{if(fs[_0x191e66(0x247)](path[_0x191e66(0x36d)](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x1ed))))fs[_0x191e66(0x1f8)](path[_0x191e66(0x36d)](configpath,_0x191e66(0x2a6)+_0x166922+'-config.json'));if(fs['existsSync'](path[_0x191e66(0x36d)](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x1f6))))fs[_0x191e66(0x1f8)](path[_0x191e66(0x36d)](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x1f6)));if(fs[_0x191e66(0x247)](path[_0x191e66(0x36d)](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x1fc))))fs[_0x191e66(0x1f8)](path['join'](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x1fc)));if(fs[_0x191e66(0x247)](path['join'](configpath,_0x191e66(0x2a6)+_0x166922+_0x191e66(0x38a))))fs[_0x191e66(0x1f8)](path[_0x191e66(0x36d)](configpath,'bot-'+_0x166922+_0x191e66(0x38a)));}catch(_0x5057ac){if(_0x5057ac)logger[_0x191e66(0x298)](_0x191e66(0x2d0),_0x5057ac);}config=getConfiguration(),io['to'](_0x191e66(0x297))[_0x191e66(0x326)](_0x191e66(0x208),config),broadcastToBots('bots',JSON[_0x191e66(0x265)](config));}function toggleBot(_0x15f0d1,_0xecf312,_0x9a765a){const _0x2ff34b=_0x148516;dbConfig[_0x2ff34b(0x329)](_0x2ff34b(0x208))['find']({'botID':_0x15f0d1})[_0x2ff34b(0x322)]({'status':_0xecf312})[_0x2ff34b(0x322)]({'live':_0x9a765a})[_0x2ff34b(0x2bc)]();if(_0xecf312=='enabled'||_0xecf312=='new')logger[_0x2ff34b(0x298)](_0x2ff34b(0x39f)+_0x15f0d1),startBot([_0x15f0d1,userID],{'cwd':bbpath},function(_0x387a1f){const _0x16c9e9=_0x2ff34b;if(_0x387a1f)logger[_0x16c9e9(0x298)](_0x387a1f);});else(_0xecf312=='disabled'||_0xecf312==_0x2ff34b(0x20a))&&(logger[_0x2ff34b(0x298)](_0x2ff34b(0x314)+_0x15f0d1),stopBot(_0x15f0d1));config=getConfiguration(),io['to']('botmanager')[_0x2ff34b(0x326)]('bots',config),broadcastToBots(_0x2ff34b(0x208),JSON[_0x2ff34b(0x265)](config));}function toggleStatus(_0x56a2c8){const _0x355e1e=_0x148516;let _0x56a0ef=dbConfig[_0x355e1e(0x329)](_0x355e1e(0x208))[_0x355e1e(0x34f)]({'botID':_0x56a2c8})['value'](),_0x216a8b;if(_0x56a0ef[_0x355e1e(0x28f)]===_0x355e1e(0x3bf))_0x216a8b='disabled';else{if(_0x56a0ef[_0x355e1e(0x28f)]===_0x355e1e(0x34c))_0x216a8b=_0x355e1e(0x20a);else{if(_0x56a0ef['status']==='new-disabled')_0x216a8b=_0x355e1e(0x34c);else{if(_0x56a0ef[_0x355e1e(0x28f)]===_0x355e1e(0x2d3))_0x216a8b=_0x355e1e(0x3bf);}}}return _0x216a8b;}function updateStatus(_0xa7769c,_0x15695b){const _0x29d56f=_0x148516;dbConfig[_0x29d56f(0x329)]('bots')[_0x29d56f(0x34f)]({'botID':_0xa7769c})['assign']({'status':_0x15695b})[_0x29d56f(0x2bc)](),config=getConfiguration(),io['to']('botmanager')[_0x29d56f(0x326)](_0x29d56f(0x208),config),broadcastToBots(_0x29d56f(0x208),JSON[_0x29d56f(0x265)](config));}function updateLive(_0x399d8c,_0x24ab35){const _0xa7fd6a=_0x148516;dbConfig[_0xa7fd6a(0x329)](_0xa7fd6a(0x208))['find']({'botID':_0x399d8c})['assign']({'live':_0x24ab35})[_0xa7fd6a(0x2bc)](),config=getConfiguration(),io['to']('botmanager')[_0xa7fd6a(0x326)](_0xa7fd6a(0x208),config),broadcastToBots('bots',JSON[_0xa7fd6a(0x265)](config));}function updateBotName(_0x374e88,_0x4204d2){const _0x24996c=_0x148516;dbConfig['get']('bots')['find']({'botID':_0x374e88})['assign']({'botname':_0x4204d2})[_0x24996c(0x2bc)](),config=getConfiguration(),io['to']('botmanager')[_0x24996c(0x326)](_0x24996c(0x208),config),broadcastToBots('bots',JSON[_0x24996c(0x265)](config));}function updateBotManager(){const _0x74bcae=_0x148516;config=getConfiguration(),io['to'](_0x74bcae(0x297))[_0x74bcae(0x326)](_0x74bcae(0x208),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x28cdd2){const _0x4adfb2=_0x148516;if(pid[_0x28cdd2])pid[_0x28cdd2][_0x4adfb2(0x1fa)]({'function':_0x4adfb2(0x331),'args':null});else{const _0x4454c4=configpath+_0x4adfb2(0x2a6)+_0x28cdd2+'-config.json',_0x6a2cb7=fs[_0x4adfb2(0x3cb)](_0x4454c4),_0x207b80=JSON[_0x4adfb2(0x348)](_0x6a2cb7),_0x289dab=_0x207b80[_0x4adfb2(0x2b8)][0x0]['headless'];_0x207b80[_0x4adfb2(0x2b8)][0x0][_0x4adfb2(0x210)]=!_0x289dab;const _0x138582=JSON[_0x4adfb2(0x265)](_0x207b80,null,0x2);fs[_0x4adfb2(0x201)](_0x4454c4,_0x138582),config=getConfiguration(),io['to'](_0x4adfb2(0x297))['emit']('bots',config),broadcastToBots(_0x4adfb2(0x208),JSON[_0x4adfb2(0x265)](config));}}function validateTelegram(_0x4cf9bb){const _0x12ac44=_0x148516;if(_0x4cf9bb[_0x12ac44(0x277)][_0x12ac44(0x32e)]!=settings['telegramUsername']&&'@'+_0x4cf9bb['from'][_0x12ac44(0x32e)]!=settings[_0x12ac44(0x25d)]||_0x4cf9bb[_0x12ac44(0x293)]['id']!=settings[_0x12ac44(0x365)])return sendTelegram(_0x4cf9bb[_0x12ac44(0x293)]['id'],_0x12ac44(0x2fe),{'parse_mode':_0x12ac44(0x254)}),![];return!![];}async function initTelegram(){const _0x5e739a=_0x148516;if(tgBot)tgBot[_0x5e739a(0x217)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x5e739a(0x319)]);let _0x16ff88=_0x5e739a(0x384);_0x16ff88+='\x0a',_0x16ff88+='/enable\x20-\x20enable\x20notifications\x0a',_0x16ff88+='/disable\x20-\x20disable\x20notifications\x0a',_0x16ff88+=_0x5e739a(0x283),_0x16ff88+=_0x5e739a(0x2c6),_0x16ff88+=_0x5e739a(0x292),_0x16ff88+='/off\x20-\x20stop\x20bot(s)\x0a',_0x16ff88+=_0x5e739a(0x204),_0x16ff88+=_0x5e739a(0x391),_0x16ff88+=_0x5e739a(0x30a),_0x16ff88+=_0x5e739a(0x3af),_0x16ff88+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x16ff88+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x16ff88+=_0x5e739a(0x280),_0x16ff88+=_0x5e739a(0x27a);let _0x4794d3=_0x5e739a(0x211);_0x4794d3+='\x0a',_0x4794d3+=_0x16ff88,tgBot[_0x5e739a(0x2ae)]((_0x31af60,_0x38d5d7)=>{const _0x2c7c9f=_0x5e739a;logger[_0x2c7c9f(0x22f)](getTimeStamp()+_0x2c7c9f(0x26a)),logger[_0x2c7c9f(0x3d6)](_0x2c7c9f(0x269),_0x31af60);}),tgBot[_0x5e739a(0x1e3)](async(_0x49db51,_0x1478c0)=>{const _0x3a8e60=_0x5e739a;if(!(!settings[_0x3a8e60(0x365)]&&_0x49db51[_0x3a8e60(0x24c)][_0x3a8e60(0x305)]['text']=='/start')){if(!validateTelegram(_0x49db51))return;}_0x1478c0();}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x2fc),async _0x9c5721=>{const _0x4b886d=_0x5e739a;if(!settings[_0x4b886d(0x365)])updateSetting(_0x4b886d(0x365),_0x9c5721[_0x4b886d(0x293)]['id']);updateSetting(_0x4b886d(0x2cd),!![]);if(!validateTelegram(_0x9c5721))return;await sendTelegram(_0x9c5721['chat']['id'],_0x4794d3);}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x36b),async _0x49dcb8=>{const _0xa1ca10=_0x5e739a;updateSetting(_0xa1ca10(0x2cd),!![]),await sendTelegram(_0x49dcb8[_0xa1ca10(0x293)]['id'],'Notifications\x20enabled');}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x3e5),async _0xa3760c=>{const _0x5688fa=_0x5e739a;await sendTelegram(_0xa3760c['chat']['id'],_0x5688fa(0x21e)),updateSetting(_0x5688fa(0x2cd),![]);}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x3db),async _0x438f12=>{const _0x3b38d5=_0x5e739a,_0x406f59=Markup[_0x3b38d5(0x3b8)]([Markup[_0x3b38d5(0x382)][_0x3b38d5(0x336)](_0x3b38d5(0x2a4),_0x3b38d5(0x2e4)),Markup[_0x3b38d5(0x382)]['callback'](_0x3b38d5(0x20f),_0x3b38d5(0x2a5)),Markup[_0x3b38d5(0x382)][_0x3b38d5(0x336)](_0x3b38d5(0x212),_0x3b38d5(0x345))]);_0x438f12['reply'](_0x3b38d5(0x2dd),_0x406f59);}),tgBot['action'](_0x5e739a(0x2e4),async _0x96440e=>{const _0x5d522d=_0x5e739a;_0x96440e[_0x5d522d(0x312)](),updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x96440e[_0x5d522d(0x293)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot['action']('config_alerts',async _0x34db67=>{const _0x2c9cac=_0x5e739a;_0x34db67['editMessageReplyMarkup'](),updateSetting(_0x2c9cac(0x252),_0x2c9cac(0x23e)),updateSetting(_0x2c9cac(0x2cd),!![]),await sendTelegram(_0x34db67[_0x2c9cac(0x293)]['id'],_0x2c9cac(0x28b));}),tgBot[_0x5e739a(0x23a)](_0x5e739a(0x345),async _0x82e9ef=>{const _0x45f6e1=_0x5e739a;_0x82e9ef[_0x45f6e1(0x312)](),updateSetting('telegramEvents',_0x45f6e1(0x2d9)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x82e9ef[_0x45f6e1(0x293)]['id'],_0x45f6e1(0x35c));}),tgBot['command']('status',async _0x3e1ec2=>{const _0x26d4f7=_0x5e739a,_0x2f809a=getBotsWithMode();let _0x39df89=_0x26d4f7(0x376);config[_0x26d4f7(0x2f0)](_0x419701=>{const _0x6acfd0=_0x26d4f7,_0x18c8de=_0x2f809a[_0x6acfd0(0x34f)](_0x342030=>_0x342030[_0x6acfd0(0x234)]==_0x419701['botID'])[_0x6acfd0(0x36a)];_0x39df89+=_0x6acfd0(0x308)+_0x419701[_0x6acfd0(0x234)]+':\x20'+_0x419701[_0x6acfd0(0x28f)]+'\x20|\x20'+_0x18c8de+_0x6acfd0(0x300)+_0x419701[_0x6acfd0(0x31a)]+'\x0a';}),_0x39df89+='\x0a',_0x39df89+=_0x26d4f7(0x383),_0x39df89+=!settings['telegramEnabled']?_0x26d4f7(0x227):_0x26d4f7(0x377),_0x39df89+=settings[_0x26d4f7(0x2cd)]?settings[_0x26d4f7(0x252)]==_0x26d4f7(0x2d9)?_0x26d4f7(0x282):_0x26d4f7(0x2cb)+settings[_0x26d4f7(0x252)]+_0x26d4f7(0x2cc):'',await sendTelegram(_0x3e1ec2[_0x26d4f7(0x293)]['id'],_0x39df89,{'parse_mode':'HTML'});}),tgBot[_0x5e739a(0x245)]('restart',async _0x178132=>{const _0xab920=_0x5e739a,_0x5dc8dc=getEnabledBots();if(_0x5dc8dc['length']==0x0)await sendTelegram(_0x178132['chat']['id'],_0xab920(0x363));else{if(_0x5dc8dc[_0xab920(0x3e4)]>0x1)_0x5dc8dc['push']({'botID':_0xab920(0x2d9)});let _0x4e144c=[],_0x12815e=[];const _0x6b03d0=_0x5dc8dc[_0xab920(0x3e4)]%0x4==0x0||_0x5dc8dc[_0xab920(0x3e4)]%0x4==0x3||_0x5dc8dc[_0xab920(0x3e4)]%0x3==0x1?0x4:0x3;let _0x4b914b=0x0;_0x5dc8dc[_0xab920(0x2f0)]((_0x243d95,_0x1b7b4b)=>{const _0x39615d=_0xab920;if(_0x1b7b4b%_0x6b03d0==0x0)_0x12815e=[];_0x12815e[_0x39615d(0x27e)](Markup[_0x39615d(0x382)][_0x39615d(0x336)](_0x243d95[_0x39615d(0x234)]==_0x39615d(0x2d9)?'All\x20bots':_0x39615d(0x308)+_0x243d95[_0x39615d(0x234)],_0x39615d(0x220)+_0x243d95[_0x39615d(0x234)])),_0x1b7b4b%_0x6b03d0==0x0&&(_0x4e144c[_0x4b914b]=_0x12815e,_0x4b914b++);});const _0x8b6398=Markup[_0xab920(0x3b8)](_0x4e144c);_0x178132[_0xab920(0x356)](_0xab920(0x33b),_0x8b6398);}}),tgBot['action'](/restart_(.+)/,async _0x2a6f56=>{const _0x1a556d=_0x5e739a,_0x2e830a=_0x2a6f56[_0x1a556d(0x367)][0x1];_0x2a6f56[_0x1a556d(0x312)](),_0x2e830a==_0x1a556d(0x2d9)?config['forEach'](_0x31f0c8=>{const _0x314895=_0x1a556d;restartBot(_0x31f0c8[_0x314895(0x234)]);}):restartBot(_0x2e830a);}),tgBot[_0x5e739a(0x245)]('on',async _0x251ece=>{const _0x4a4e7e=_0x5e739a,_0x457ce3=getDisabledBots();if(_0x457ce3[_0x4a4e7e(0x3e4)]==0x0)await sendTelegram(_0x251ece['chat']['id'],_0x4a4e7e(0x263));else{if(_0x457ce3['length']>0x1)_0x457ce3[_0x4a4e7e(0x27e)]({'botID':'all'});let _0xe3445b=[],_0x183c41=[];const _0x47ad55=_0x457ce3[_0x4a4e7e(0x3e4)]%0x4==0x0||_0x457ce3[_0x4a4e7e(0x3e4)]%0x4==0x3||_0x457ce3[_0x4a4e7e(0x3e4)]%0x3==0x1?0x4:0x3;let _0x32b679=0x0;_0x457ce3[_0x4a4e7e(0x2f0)]((_0x3f77e0,_0x10eda4)=>{const _0x78817=_0x4a4e7e;if(_0x10eda4%_0x47ad55==0x0)_0x183c41=[];_0x183c41['push'](Markup[_0x78817(0x382)]['callback'](_0x3f77e0[_0x78817(0x234)]==_0x78817(0x2d9)?'All\x20bots':_0x78817(0x308)+_0x3f77e0[_0x78817(0x234)],_0x78817(0x361)+_0x3f77e0[_0x78817(0x234)])),_0x10eda4%_0x47ad55==0x0&&(_0xe3445b[_0x32b679]=_0x183c41,_0x32b679++);});const _0x12449b=Markup[_0x4a4e7e(0x3b8)](_0xe3445b);_0x251ece['reply'](_0x4a4e7e(0x2c0),_0x12449b);}}),tgBot[_0x5e739a(0x23a)](/on_(.+)/,async _0x3ac9d8=>{const _0x407e20=_0x5e739a,_0x256f4d=_0x3ac9d8[_0x407e20(0x367)][0x1];_0x3ac9d8[_0x407e20(0x312)]();if(_0x256f4d=='all'){const _0x6e8b52=getDisabledBots();await sendTelegram(_0x3ac9d8[_0x407e20(0x293)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x6e8b52[_0x407e20(0x2f0)](_0x4c469c=>{const _0x2651e4=_0x407e20;if(_0x4c469c[_0x2651e4(0x234)]!=_0x2651e4(0x2d9))toggleBot(_0x4c469c['botID'],toggleStatus(_0x4c469c['botID']),_0x2651e4(0x229));});}else await sendTelegram(_0x3ac9d8['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x256f4d),toggleBot(_0x256f4d,toggleStatus(_0x256f4d),_0x407e20(0x229));}),tgBot['command']('off',async _0x15a8e4=>{const _0x5333e8=_0x5e739a,_0x3ed012=getEnabledBots();if(_0x3ed012['length']==0x0)await sendTelegram(_0x15a8e4[_0x5333e8(0x293)]['id'],_0x5333e8(0x363));else{if(_0x3ed012[_0x5333e8(0x3e4)]>0x1)_0x3ed012[_0x5333e8(0x27e)]({'botID':_0x5333e8(0x2d9)});let _0x1290f4=[],_0x2653e0=[];const _0x3e4da9=_0x3ed012[_0x5333e8(0x3e4)]%0x4==0x0||_0x3ed012[_0x5333e8(0x3e4)]%0x4==0x3||_0x3ed012[_0x5333e8(0x3e4)]%0x3==0x1?0x4:0x3;let _0x4a21ed=0x0;_0x3ed012['forEach']((_0x1a3177,_0x32e422)=>{const _0x3fa009=_0x5333e8;if(_0x32e422%_0x3e4da9==0x0)_0x2653e0=[];_0x2653e0[_0x3fa009(0x27e)](Markup['button'][_0x3fa009(0x336)](_0x1a3177[_0x3fa009(0x234)]==_0x3fa009(0x2d9)?_0x3fa009(0x1e2):'Bot\x20'+_0x1a3177[_0x3fa009(0x234)],_0x3fa009(0x1e0)+_0x1a3177[_0x3fa009(0x234)])),_0x32e422%_0x3e4da9==0x0&&(_0x1290f4[_0x4a21ed]=_0x2653e0,_0x4a21ed++);});const _0x5e2780=Markup[_0x5333e8(0x3b8)](_0x1290f4);_0x15a8e4[_0x5333e8(0x356)](_0x5333e8(0x2b5),_0x5e2780);}}),tgBot[_0x5e739a(0x23a)](/off_(.+)/,async _0x457dff=>{const _0x3a178e=_0x5e739a,_0x576ca0=_0x457dff['match'][0x1];_0x457dff[_0x3a178e(0x312)]();if(_0x576ca0=='all'){const _0x5e51ee=getEnabledBots();await sendTelegram(_0x457dff['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x5e51ee[_0x3a178e(0x2f0)](_0x14be81=>{const _0x3f2f89=_0x3a178e;if(_0x14be81[_0x3f2f89(0x234)]!=_0x3f2f89(0x2d9))toggleBot(_0x14be81[_0x3f2f89(0x234)],toggleStatus(_0x14be81[_0x3f2f89(0x234)]),'stopped');});}else await sendTelegram(_0x457dff[_0x3a178e(0x293)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x576ca0),toggleBot(_0x576ca0,toggleStatus(_0x576ca0),'stopped');}),tgBot[_0x5e739a(0x245)]('metrics',async _0xb2949=>{const _0x1bb6de=_0x5e739a,_0x1d7929=getEnabledBots();if(_0x1d7929['length']==0x0)await sendTelegram(_0xb2949['chat']['id'],_0x1bb6de(0x363));else{if(_0x1d7929[_0x1bb6de(0x3e4)]>0x1){let _0x3cafbb=[],_0x57d13c=[];const _0x490b0a=_0x1d7929[_0x1bb6de(0x3e4)]%0x4==0x0||_0x1d7929['length']%0x4==0x3||_0x1d7929['length']%0x3==0x1?0x4:0x3;let _0x48a3d7=0x0;_0x1d7929[_0x1bb6de(0x2f0)]((_0x49270b,_0x57f042)=>{const _0x56f5e0=_0x1bb6de;if(_0x57f042%_0x490b0a==0x0)_0x57d13c=[];_0x57d13c['push'](Markup['button']['callback'](_0x56f5e0(0x308)+_0x49270b[_0x56f5e0(0x234)],_0x56f5e0(0x317)+_0x49270b[_0x56f5e0(0x234)])),_0x57f042%_0x490b0a==0x0&&(_0x3cafbb[_0x48a3d7]=_0x57d13c,_0x48a3d7++);});const _0x37c603=Markup['inlineKeyboard'](_0x3cafbb);_0xb2949[_0x1bb6de(0x356)](_0x1bb6de(0x287),_0x37c603);}else{const _0x2c4d19=_0x1d7929[0x0][_0x1bb6de(0x234)];if(pid[_0x2c4d19])pid[_0x2c4d19]['send']({'function':_0x1bb6de(0x3da),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x1c6edd=>{const _0x3e1808=_0x5e739a,_0x4ebce3=_0x1c6edd[_0x3e1808(0x367)][0x1];_0x1c6edd[_0x3e1808(0x312)]();if(pid[_0x4ebce3])pid[_0x4ebce3][_0x3e1808(0x1fa)]({'function':_0x3e1808(0x3da),'args':null});}),tgBot['command'](_0x5e739a(0x3e0),async _0x326b35=>{const _0x52b08d=_0x5e739a,_0x49bb49=getEnabledBots();if(_0x49bb49[_0x52b08d(0x3e4)]==0x0)await sendTelegram(_0x326b35[_0x52b08d(0x293)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x49bb49['length']>0x1){let _0x3da6c6=[],_0x1327c2=[];const _0x2001da=_0x49bb49[_0x52b08d(0x3e4)]%0x4==0x0||_0x49bb49[_0x52b08d(0x3e4)]%0x4==0x3||_0x49bb49[_0x52b08d(0x3e4)]%0x3==0x1?0x4:0x3;let _0x2634c7=0x0;_0x49bb49['forEach']((_0x5a2111,_0x1e305f)=>{const _0x32e668=_0x52b08d;if(_0x1e305f%_0x2001da==0x0)_0x1327c2=[];_0x1327c2[_0x32e668(0x27e)](Markup['button'][_0x32e668(0x336)](_0x32e668(0x308)+_0x5a2111[_0x32e668(0x234)],'portfolio_'+_0x5a2111[_0x32e668(0x234)])),_0x1e305f%_0x2001da==0x0&&(_0x3da6c6[_0x2634c7]=_0x1327c2,_0x2634c7++);});const _0x504ede=Markup[_0x52b08d(0x3b8)](_0x3da6c6);_0x326b35[_0x52b08d(0x356)](_0x52b08d(0x290),_0x504ede);}else{const _0x4b5d04=_0x49bb49[0x0]['botID'];if(pid[_0x4b5d04])pid[_0x4b5d04][_0x52b08d(0x1fa)]({'function':_0x52b08d(0x2f1),'args':null});}}}),tgBot[_0x5e739a(0x23a)](/portfolio_(.+)/,async _0x1c1091=>{const _0x22b853=_0x5e739a,_0x25e70e=_0x1c1091[_0x22b853(0x367)][0x1];_0x1c1091[_0x22b853(0x312)]();if(pid[_0x25e70e])pid[_0x25e70e]['send']({'function':_0x22b853(0x2f1),'args':null});}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x24c),async _0x137f33=>{const _0x2eda1b=_0x5e739a;await getMessages();if(!updateAvailable)await sendTelegram(_0x137f33[_0x2eda1b(0x293)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x137f33[_0x2eda1b(0x293)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x301f11=Markup[_0x2eda1b(0x3b8)]([Markup[_0x2eda1b(0x382)][_0x2eda1b(0x336)](_0x2eda1b(0x255),_0x2eda1b(0x1eb)),Markup[_0x2eda1b(0x382)][_0x2eda1b(0x336)]('No','update_no')]);_0x137f33[_0x2eda1b(0x356)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x301f11);}}}),tgBot['action'](/update_(.+)/,async _0x451c22=>{const _0x20a68b=_0x5e739a,_0x170274=_0x451c22[_0x20a68b(0x367)][0x1];_0x451c22['editMessageReplyMarkup'](),_0x170274==_0x20a68b(0x2dc)&&(await sendTelegram(_0x451c22[_0x20a68b(0x293)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x20a68b(0x24c))),_0x170274=='no'&&await sendTelegram(_0x451c22[_0x20a68b(0x293)]['id'],_0x20a68b(0x2bd));}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x3ac),async _0x580aef=>{const _0xab29cc=_0x5e739a;if(!validInstallation)await sendTelegram(_0x580aef[_0xab29cc(0x293)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x48770a=Markup[_0xab29cc(0x3b8)]([Markup['button'][_0xab29cc(0x336)]('Yes',_0xab29cc(0x304)),Markup[_0xab29cc(0x382)][_0xab29cc(0x336)]('No','reinstall_no')]);_0x580aef[_0xab29cc(0x356)](_0xab29cc(0x3b3),_0x48770a);}}),tgBot[_0x5e739a(0x23a)](/reinstall_(.+)/,async _0x38f958=>{const _0x9d87ac=_0x5e739a,_0x16769e=_0x38f958[_0x9d87ac(0x367)][0x1];_0x38f958['editMessageReplyMarkup'](),_0x16769e=='yes'&&(await sendTelegram(_0x38f958[_0x9d87ac(0x293)]['id'],_0x9d87ac(0x3c6)),updateBB(_0x9d87ac(0x3ac))),_0x16769e=='no'&&await sendTelegram(_0x38f958[_0x9d87ac(0x293)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command'](_0x5e739a(0x32a),async _0x150335=>{const _0x47e7e9=_0x5e739a,_0x32d897=getBotsWithMode();if(_0x32d897[_0x47e7e9(0x3e4)]==0x0)await sendTelegram(_0x150335[_0x47e7e9(0x293)]['id'],_0x47e7e9(0x363));else{let _0x3cf4af=[],_0x2af3aa=[];const _0x1a875c=0x2;let _0x347b75=0x0;_0x32d897[_0x47e7e9(0x2f0)]((_0x362b2a,_0xd493e0)=>{const _0x3fcd8c=_0x47e7e9;if(_0xd493e0%_0x1a875c==0x0)_0x2af3aa=[];_0x2af3aa[_0x3fcd8c(0x27e)](Markup[_0x3fcd8c(0x382)]['callback']('Bot\x20'+_0x362b2a[_0x3fcd8c(0x234)]+'\x20('+_0x362b2a[_0x3fcd8c(0x36a)]+')',_0x3fcd8c(0x2e8)+_0x362b2a['botID'])),_0xd493e0%_0x1a875c==0x0&&(_0x3cf4af[_0x347b75]=_0x2af3aa,_0x347b75++);});const _0x3b052d=Markup[_0x47e7e9(0x3b8)](_0x3cf4af);_0x150335[_0x47e7e9(0x356)](_0x47e7e9(0x214),_0x3b052d);}}),tgBot['action'](/toggle_(.+)/,async _0x3c03a3=>{const _0x43e3c7=_0x5e739a,_0x1edf64=_0x3c03a3[_0x43e3c7(0x367)][0x1];_0x3c03a3[_0x43e3c7(0x312)]();const _0x4d6bc4=getBotsWithMode(),_0x5dedff=_0x4d6bc4[_0x43e3c7(0x34f)](_0x5562c5=>_0x5562c5[_0x43e3c7(0x234)]==_0x1edf64),_0x37a4b6=_0x5dedff[_0x43e3c7(0x36a)]=='auto'?_0x43e3c7(0x213):_0x43e3c7(0x241);await sendTelegram(_0x3c03a3[_0x43e3c7(0x293)]['id'],_0x43e3c7(0x34e)+_0x1edf64+_0x43e3c7(0x3d8)+_0x37a4b6+_0x43e3c7(0x33a)),toggleBotMode(_0x1edf64);}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x343),async _0x959bc=>{const _0x127f15=_0x5e739a;let _0xdd05bb='';config[_0x127f15(0x2f0)](_0x574677=>{const _0xe6a90d=_0x127f15;_0xdd05bb+='Bot\x20'+_0x574677[_0xe6a90d(0x234)]+':\x20'+_0x574677['botname']+'\x0a';}),await sendTelegram(_0x959bc[_0x127f15(0x293)]['id'],_0xdd05bb,{'parse_mode':_0x127f15(0x254)});}),tgBot[_0x5e739a(0x245)](_0x5e739a(0x39d),async _0x3c1d91=>{const _0x56aee4=_0x5e739a;await sendTelegram(_0x3c1d91[_0x56aee4(0x293)]['id'],_0x16ff88);}),process[_0x5e739a(0x22c)](_0x5e739a(0x2e6),()=>tgBot['stop']('SIGINT')),process[_0x5e739a(0x22c)](_0x5e739a(0x351),()=>tgBot['stop']('SIGTERM')),tgBot[_0x5e739a(0x279)]();}}function disableTelegram(){const _0x1813de=_0x148516;tgBot&&tgBot[_0x1813de(0x217)]();}async function sendTelegram(_0x447900,_0x2125ba,_0x46d759){const _0x16d49b=_0x148516;_0x46d759={..._0x46d759,'disable_web_page_preview':!![]};try{await tgBot[_0x16d49b(0x2c3)][_0x16d49b(0x320)](_0x447900,_0x2125ba,_0x46d759);}catch(_0x50d357){console[_0x16d49b(0x207)](_0x16d49b(0x294),_0x50d357);}}async function sendTelegramBot(_0x2f0ee1,_0x10babe){const _0x11f451=_0x148516;if(settings[_0x11f451(0x2cd)]){if(settings[_0x11f451(0x252)]==_0x11f451(0x2d9)||(_0x10babe[_0x11f451(0x21f)]=='error'||_0x10babe[_0x11f451(0x21f)]=='warning'||_0x10babe[_0x11f451(0x21f)]=='success')&&settings[_0x11f451(0x252)]==_0x11f451(0x23e)||_0x10babe[_0x11f451(0x21f)]==_0x11f451(0x239)&&settings['telegramEvents']==_0x11f451(0x3bc)){if(tgBot&&settings[_0x11f451(0x365)]){if(_0x10babe['showname'])await sendTelegram(settings['telegramChatId'],_0x10babe['botname']+_0x11f451(0x347)+_0x10babe[_0x11f451(0x1f2)]);else await sendTelegram(settings[_0x11f451(0x365)],'Bot\x20'+_0x2f0ee1+_0x11f451(0x347)+_0x10babe['event']);}}}}async function sendTelegramMsg(_0x58d291,_0x373bb1=_0x148516(0x254)){const _0x1d7ec2=_0x148516;return settings[_0x1d7ec2(0x2cd)]&&tgBot&&settings[_0x1d7ec2(0x365)]?(await sendTelegram(settings[_0x1d7ec2(0x365)],_0x58d291,{'parse_mode':_0x373bb1}),!![]):![];}function getDeviceWithIp(_0x3321b9){const _0x23269f=_0x148516;return devices[_0x23269f(0x34f)](_0x32e768=>_0x32e768['ip']===_0x3321b9);}async function temporaryAccess2FA(_0x5459d5,_0x46f7d0){const _0x42c366=_0x148516;let _0xdb9d00=new Date(),_0x6bc4b2=![];if(lastIpApproval){if(_0xdb9d00-lastIpApproval<0x1388)_0x6bc4b2=!![];}lastIpApproval=new Date();if(_0x6bc4b2)return;if(tgBot&&settings[_0x42c366(0x365)]){const _0x6df930=uuidRandom();tmpStorage[_0x6df930]={'uuid':_0x5459d5,'externalip':_0x46f7d0};const _0x47422a=Markup[_0x42c366(0x3b8)]([Markup['button']['callback']('5\x20min','tempaccess_5_'+_0x6df930),Markup[_0x42c366(0x382)]['callback']('15\x20min','tempaccess_15_'+_0x6df930),Markup[_0x42c366(0x382)][_0x42c366(0x336)]('30\x20min',_0x42c366(0x2d5)+_0x6df930),Markup['button'][_0x42c366(0x336)](_0x42c366(0x38f),_0x42c366(0x29c)+_0x6df930)]);await sendTelegram(settings[_0x42c366(0x365)],_0x42c366(0x38d)+normalizeIP(_0x46f7d0)[_0x42c366(0x389)]+'\x20?',_0x47422a),tgBot[_0x42c366(0x23a)](/tempaccess_(.+)_(.+)/,async _0x1e301c=>{const _0x100878=_0x42c366,_0x3f72b2=_0x1e301c[_0x100878(0x367)][0x1],_0x25eb29=_0x1e301c[_0x100878(0x367)][0x2],{uuid:_0x19c4ff,externalip:_0x103bfd}=tmpStorage[_0x25eb29];delete tmpStorage[_0x25eb29],_0x1e301c['editMessageReplyMarkup'](),devices[_0x19c4ff][_0x100878(0x380)]={'clientip':_0x103bfd,'timestamp':new Date()[_0x100878(0x2e7)](),'expiry':_0x3f72b2},_0x3f72b2!='reject'?(await sendTelegram(_0x1e301c[_0x100878(0x293)]['id'],_0x100878(0x25c)+_0x3f72b2+'\x20minutes',{'parse_mode':_0x100878(0x254)}),io['to'](_0x19c4ff)[_0x100878(0x326)](_0x100878(0x28f),{'access':{'allow':![],'reason':_0x100878(0x2ff),'token':null}})):(await sendTelegram(_0x1e301c[_0x100878(0x293)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x19c4ff)['emit'](_0x100878(0x28f),{'access':{'allow':![],'reason':_0x100878(0x32c),'token':null}}));});}}async function loginAccess2FA(_0x565cb2,_0x4afd9e){const _0x1d2739=_0x148516;if(tgBot&&settings['telegramChatId']){const _0xbc98fa=uuidRandom();tmpStorage[_0xbc98fa]={'uuid':_0x565cb2,'externalip':_0x4afd9e};const _0x5add5c=Markup[_0x1d2739(0x3b8)]([Markup[_0x1d2739(0x382)][_0x1d2739(0x336)](_0x1d2739(0x2a3),_0x1d2739(0x3e2)+loginExpiry+'_'+_0xbc98fa),Markup[_0x1d2739(0x382)][_0x1d2739(0x336)]('reject','login2fa_reject_'+_0xbc98fa)]);await sendTelegram(settings[_0x1d2739(0x365)],_0x1d2739(0x332)+normalizeIP(_0x4afd9e)['show']+'\x20?',_0x5add5c),tgBot[_0x1d2739(0x23a)](/login2fa_(.+)_(.+)/,async _0x1b222e=>{const _0x4ae1e2=_0x1d2739,_0x4bc851=_0x1b222e[_0x4ae1e2(0x367)][0x1],_0x12bbdf=_0x1b222e[_0x4ae1e2(0x367)][0x2],{uuid:_0x410833,externalip:_0x1cb524}=tmpStorage[_0x12bbdf];delete tmpStorage[_0x12bbdf],_0x1b222e['editMessageReplyMarkup'](),devices[_0x410833][_0x4ae1e2(0x37b)]={'clientip':_0x1cb524,'timestamp':new Date()[_0x4ae1e2(0x2e7)](),'expiry':_0x4bc851},_0x4bc851!=_0x4ae1e2(0x38f)?(await sendTelegram(_0x1b222e['chat']['id'],_0x4ae1e2(0x28a),{'parse_mode':_0x4ae1e2(0x254)}),io['to'](_0x410833)[_0x4ae1e2(0x326)](_0x4ae1e2(0x28f),{'access':{'allow':![],'reason':_0x4ae1e2(0x2ff),'token':null}})):(await sendTelegram(_0x1b222e[_0x4ae1e2(0x293)]['id'],_0x4ae1e2(0x2d7)),io['to'](_0x410833)[_0x4ae1e2(0x326)]('status',{'access':{'allow':![],'reason':_0x4ae1e2(0x381),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5c09d0=_0x148516;return dbConfig[_0x5c09d0(0x329)]('bots')[_0x5c09d0(0x1ff)](_0x5c09d0(0x234))[_0x5c09d0(0x2c8)]({'status':'enabled'})[_0x5c09d0(0x249)]()||[];}function getDisabledBots(){const _0x5bd9c2=_0x148516;return dbConfig[_0x5bd9c2(0x329)](_0x5bd9c2(0x208))['sortBy'](_0x5bd9c2(0x234))[_0x5bd9c2(0x2c8)]({'status':_0x5bd9c2(0x2d3)})['value']()||[];}function getBotAttributes(_0x5169f1){const _0x3bec26=_0x148516;let _0x48212d={};const _0x49c2df=configpath+_0x3bec26(0x2a6)+_0x5169f1+'-config.json',_0x5060e4=fs[_0x3bec26(0x247)](_0x49c2df);if(_0x5060e4){const _0x44beab=fs[_0x3bec26(0x3cb)](_0x49c2df);try{const _0x54e6c5=JSON[_0x3bec26(0x348)](_0x44beab),_0x495298=_0x54e6c5?_0x54e6c5['bot'][0x0][_0x3bec26(0x210)]:![];_0x48212d['mode']=_0x495298?_0x3bec26(0x241):'manual',_0x48212d[_0x3bec26(0x261)]=_0x54e6c5?_0x54e6c5[_0x3bec26(0x2b8)][0x0][_0x3bec26(0x261)]:_0x3bec26(0x308)+_0x5169f1;}catch(_0x558648){_0x48212d['mode']='manual',_0x48212d[_0x3bec26(0x261)]=_0x3bec26(0x308)+_0x5169f1;}}else _0x48212d[_0x3bec26(0x36a)]='manual',_0x48212d[_0x3bec26(0x261)]=_0x3bec26(0x308)+_0x5169f1;return _0x48212d;}function getBotsWithMode(){const _0x5e26dd=_0x148516,_0x39206c=dbConfig[_0x5e26dd(0x329)]('bots')[_0x5e26dd(0x1ff)]('botID')['value']()||[];return _0x39206c[_0x5e26dd(0x2f0)](_0x1c6001=>{const _0x2d7c1b=_0x5e26dd;let _0x404756=getBotAttributes(_0x1c6001['botID']);_0x1c6001[_0x2d7c1b(0x36a)]=_0x404756[_0x2d7c1b(0x36a)];}),_0x39206c;}function getBotExchanges(){const _0x3197d6=_0x148516;let _0x523f04=[];const _0x205cd3=dbConfig[_0x3197d6(0x329)]('bots')['sortBy'](_0x3197d6(0x234))[_0x3197d6(0x249)]()||[];_0x205cd3[_0x3197d6(0x2f0)](_0x28cc3c=>{const _0x260ab0=_0x3197d6;if(_0x28cc3c['status']==_0x260ab0(0x3bf)){const _0x147e43=configpath+_0x260ab0(0x2a6)+_0x28cc3c['botID']+'-config.json',_0x4cb4cb=fs[_0x260ab0(0x247)](_0x147e43);let _0x145ac3;if(_0x4cb4cb){const _0x7a76=fs[_0x260ab0(0x3cb)](_0x147e43);try{const _0xce65f=JSON[_0x260ab0(0x348)](_0x7a76);_0x145ac3=_0xce65f?_0xce65f[_0x260ab0(0x2b8)][0x0]['exchange']:null;}catch(_0x2f2bf7){}}if(_0x145ac3)_0x523f04[_0x260ab0(0x27e)](_0x145ac3);}});const _0x457ba3=[...new Set(_0x523f04)]['sort']();return _0x457ba3;}async function initUser(){const _0x1f2b35=_0x148516;if(!settings[_0x1f2b35(0x262)]){const _0x5148c2=uuidRandom();mixpanel['alias'](_0x5148c2),updateSetting(_0x1f2b35(0x262),_0x5148c2);}}async function initSecure(){const _0x15a509=_0x148516;let _0x154e41=getSecure();if(!_0x154e41[_0x15a509(0x1ee)](_0x15a509(0x30d))){let _0x205278=await generateKeys();_0x154e41[_0x15a509(0x34d)]=_0x205278['publicKey'],_0x154e41[_0x15a509(0x222)]=_0x205278[_0x15a509(0x222)],_0x154e41[_0x15a509(0x30d)]=crypto[_0x15a509(0x205)](0x20)[_0x15a509(0x350)](_0x15a509(0x344));;storeSecure(_0x154e41);}}function getSettings(){const _0x2b8b34=_0x148516;return dbSettings[_0x2b8b34(0x329)](_0x2b8b34(0x341))[_0x2b8b34(0x249)]()||{};}function getSecure(){const _0x285250=_0x148516;return dbSecure[_0x285250(0x329)](_0x285250(0x248))[_0x285250(0x249)]()||{};}function getBlacklist(){const _0x133843=_0x148516;return dbSecure['get'](_0x133843(0x226))['value']()||[];}function broadcastToBots(_0x6b4539,_0x222c88){const _0xe27fa8=_0x148516;config[_0xe27fa8(0x2f0)](_0x90123b=>{const _0x254cad=_0xe27fa8;if(_0x90123b[_0x254cad(0x28f)]=='enabled'&&_0x90123b['live']==_0x254cad(0x394)||_0x90123b[_0x254cad(0x28f)]=='new'&&_0x90123b[_0x254cad(0x31a)]=='running'){if(pid[_0x90123b['botID']])pid[_0x90123b[_0x254cad(0x234)]][_0x254cad(0x1fa)]({[_0x6b4539]:_0x222c88});}});}async function storeSettings(_0x2c78f2,_0x1c864d=![]){const _0x5a9eb1=_0x148516;_0x2c78f2={...settings,..._0x2c78f2};if(_0x1c864d&&_0x2c78f2[_0x5a9eb1(0x26d)]!='************'&&_0x2c78f2[_0x5a9eb1(0x26d)]!=_0x5a9eb1(0x26f)&&_0x2c78f2[_0x5a9eb1(0x26d)]!=''){const _0x3fa361=crypt['decrypt'](secure[_0x5a9eb1(0x222)],_0x2c78f2[_0x5a9eb1(0x26d)])[_0x5a9eb1(0x305)][_0x5a9eb1(0x31e)]('|@|')[0x0],_0x25d079=bcrypt['hashSync'](_0x3fa361,saltRounds);_0x2c78f2={..._0x2c78f2,'bbPassword':_0x25d079};}if(_0x1c864d&&_0x2c78f2[_0x5a9eb1(0x319)]!=_0x5a9eb1(0x21c)&&_0x2c78f2[_0x5a9eb1(0x319)]!=_0x5a9eb1(0x26f)&&_0x2c78f2[_0x5a9eb1(0x319)]!=''){const _0x3f0009=crypt[_0x5a9eb1(0x266)](secure[_0x5a9eb1(0x222)],_0x2c78f2[_0x5a9eb1(0x319)])[_0x5a9eb1(0x305)][_0x5a9eb1(0x31e)](_0x5a9eb1(0x1f7))[0x0];_0x2c78f2={..._0x2c78f2,'telegramToken':_0x3f0009};}if(_0x1c864d&&_0x2c78f2['marketcapApi']!='************'&&_0x2c78f2['marketcapApi']!=_0x5a9eb1(0x26f)&&_0x2c78f2['marketcapApi']!=''){const _0xbc6080=crypt['decrypt'](secure[_0x5a9eb1(0x222)],_0x2c78f2['marketcapApi'])[_0x5a9eb1(0x305)][_0x5a9eb1(0x31e)]('|@|')[0x0];_0x2c78f2={..._0x2c78f2,'marketcapApi':_0xbc6080};}const _0x909d4e=_0x2c78f2[_0x5a9eb1(0x319)]!=_0x5a9eb1(0x21c)&&_0x2c78f2['telegramToken']!=settings[_0x5a9eb1(0x319)]||_0x2c78f2[_0x5a9eb1(0x25d)]!=settings['telegramUsername'],_0x16b1b7=_0x2c78f2['telegramToken']==''||_0x2c78f2[_0x5a9eb1(0x25d)]=='',_0x11b47d=_0x2c78f2[_0x5a9eb1(0x25e)]&&_0x2c78f2[_0x5a9eb1(0x25e)]!=_0x5a9eb1(0x21c)&&_0x2c78f2[_0x5a9eb1(0x25e)]!=settings[_0x5a9eb1(0x319)];_0x909d4e&&(_0x2c78f2[_0x5a9eb1(0x365)]=null,_0x2c78f2[_0x5a9eb1(0x252)]=_0x5a9eb1(0x2d9));for(const [_0x5c67aa,_0x17fcc3]of Object[_0x5a9eb1(0x21b)](_0x2c78f2)){if(_0x5c67aa=='telegramToken'&&_0x17fcc3=='************'){_0x2c78f2[_0x5a9eb1(0x319)]=settings[_0x5a9eb1(0x319)];continue;};if(_0x5c67aa==_0x5a9eb1(0x26d)&&_0x17fcc3=='************'){_0x2c78f2[_0x5a9eb1(0x26d)]=settings[_0x5a9eb1(0x26d)];continue;};if(_0x5c67aa==_0x5a9eb1(0x25e)&&_0x17fcc3==_0x5a9eb1(0x21c)){_0x2c78f2[_0x5a9eb1(0x25e)]=settings['marketcapApi'];continue;};dbSettings[_0x5a9eb1(0x24d)](_0x5a9eb1(0x3b4)+_0x5c67aa,_0x17fcc3)[_0x5a9eb1(0x2bc)]();}settings=_0x2c78f2,io['to'](_0x5a9eb1(0x297))[_0x5a9eb1(0x326)](_0x5a9eb1(0x341),cleanSettings()),broadcastToBots(_0x5a9eb1(0x1f9),settings[_0x5a9eb1(0x1f9)]),broadcastToBots(_0x5a9eb1(0x3c1),settings[_0x5a9eb1(0x3c1)]),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x909d4e&&!_0x16b1b7)initTelegram();if(_0x909d4e&&_0x16b1b7)disableTelegram();getAllClients()['forEach'](_0x3ba6b9=>{const _0x39d794=_0x5a9eb1;getSocket(_0x3ba6b9['id'])['emit'](_0x39d794(0x28f),{'access':{'allow':![],'reason':_0x39d794(0x2ff),'token':null}});}),_0x11b47d&&(await sleep(0xbb8),testMarketcapApi(_0x2c78f2[_0x5a9eb1(0x25e)]));}async function testMarketcapApi(_0x2c1afa){const _0x5d1110=_0x148516,_0x13996b=[_0x5d1110(0x288),_0x5d1110(0x2a7)];try{await axios[_0x5d1110(0x329)](_0x5d1110(0x1e8),{'headers':{'X-CMC_PRO_API_KEY':_0x2c1afa},'params':{'symbol':_0x13996b['toString']()}});}catch(_0x4ad460){_0x4ad460['toString']()[_0x5d1110(0x221)]('status\x20code\x20401')?(io['to'](_0x5d1110(0x297))['emit'](_0x5d1110(0x3ad),_0x5d1110(0x35b)),logger[_0x5d1110(0x298)](_0x5d1110(0x35b))):(io['to'](_0x5d1110(0x297))[_0x5d1110(0x326)]('notification',_0x5d1110(0x23c)),logger[_0x5d1110(0x298)](_0x5d1110(0x23c)),logger[_0x5d1110(0x3d6)](_0x5d1110(0x2fd),_0x4ad460[_0x5d1110(0x350)]()+_0x5d1110(0x2c7)+_0x4ad460[_0x5d1110(0x387)]));return;}logger[_0x5d1110(0x3d6)](_0x5d1110(0x27c));}function updateSetting(_0x38f812,_0x1739a0){const _0x114dea=_0x148516;dbSettings[_0x114dea(0x24d)](_0x114dea(0x3b4)+_0x38f812,_0x1739a0)[_0x114dea(0x2bc)](),settings=getSettings(),io['to'](_0x114dea(0x297))[_0x114dea(0x326)]('settings',cleanSettings());}function storeSecure(_0x27a200){const _0x2c627d=_0x148516;dbSecure[_0x2c627d(0x329)](_0x2c627d(0x248))['push'](_0x27a200)[_0x2c627d(0x2bc)](),secure=_0x27a200;}function addBlacklist(_0x11bb5b){const _0x2d5cde=_0x148516;cleanBlacklist();let _0x5e6d52;devices[_0x11bb5b][_0x2d5cde(0x380)]?_0x5e6d52=Math['max'](devices[_0x11bb5b][_0x2d5cde(0x380)][_0x2d5cde(0x360)],loginExpiry):_0x5e6d52=loginExpiry,dbSecure[_0x2d5cde(0x329)](_0x2d5cde(0x226))[_0x2d5cde(0x27e)]({'expiry':new Date()[_0x2d5cde(0x2e7)]()+_0x5e6d52*0x3c*0x3e8,'token':devices[_0x11bb5b][_0x2d5cde(0x225)][_0x2d5cde(0x240)]})[_0x2d5cde(0x2bc)](),blacklist=dbSecure['get']('blacklist')['value']();}function cleanBlacklist(){const _0x3a999c=_0x148516;let _0x1aaa18=dbSecure[_0x3a999c(0x329)](_0x3a999c(0x226))[_0x3a999c(0x251)]()[_0x3a999c(0x249)](),_0x1b72a9=new Date()[_0x3a999c(0x2e7)]();_0x1aaa18[_0x3a999c(0x2f0)](_0x4643c9=>{const _0x2c0fde=_0x3a999c;_0x4643c9[_0x2c0fde(0x360)]<_0x1b72a9&&dbSecure[_0x2c0fde(0x329)](_0x2c0fde(0x226))[_0x2c0fde(0x24a)]({'expiry':_0x4643c9[_0x2c0fde(0x360)]})[_0x2c0fde(0x2bc)]();});}function initStates(){const _0x50400c=_0x148516;let _0x50fb99=getConfiguration();_0x50fb99[_0x50400c(0x2f0)](_0x58c949=>{const _0x3e3013=_0x50400c;_0x58c949[_0x3e3013(0x31a)]=_0x3e3013(0x229);}),storeConfiguration(_0x50fb99);}function onKeys(){const _0x502c53=new RSA();return new Promise(_0x502741=>{const _0x402a2a=_0x437f;_0x502c53['generateKeyPairAsync']()[_0x402a2a(0x2c1)](_0x2adbe2=>{_0x502741(_0x2adbe2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x51d722=_0x148516;let _0xdc21bd=getSettings(),_0x5dec4c=![];!_0xdc21bd[_0x51d722(0x1ee)](_0x51d722(0x2db))&&(_0xdc21bd['lastmsgtelegram']=0x0,_0x5dec4c=!![]);!_0xdc21bd[_0x51d722(0x1ee)](_0x51d722(0x1f1))&&(_0xdc21bd[_0x51d722(0x1f1)]=0x0,_0x5dec4c=!![]);!_0xdc21bd[_0x51d722(0x1ee)]('latestversion')&&(_0xdc21bd[_0x51d722(0x353)]=_0x51d722(0x37d),_0x5dec4c=!![]);!_0xdc21bd['hasOwnProperty'](_0x51d722(0x3c1))&&(_0xdc21bd[_0x51d722(0x3c1)]=![],_0x5dec4c=!![]);!_0xdc21bd[_0x51d722(0x1ee)](_0x51d722(0x25e))&&(_0xdc21bd[_0x51d722(0x25e)]='',_0x5dec4c=!![]);if(_0x5dec4c)storeSettings(_0xdc21bd);try{fs[_0x51d722(0x36c)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x318d87=>{const _0x206da4=_0x51d722;if(!_0x318d87['isDirectory']()){if(!_0x318d87[_0x206da4(0x2d8)]['startsWith']('backup-full@'))fs['unlinkSync'](configbackuppath+_0x318d87['name']);}else fs['rmSync'](configbackuppath+_0x318d87[_0x206da4(0x2d8)],{'recursive':!![]});});}catch(_0x55ce11){logger['debug'](_0x51d722(0x1ef),_0x55ce11);}}function storeConfiguration(_0x3689ee){const _0x33520c=_0x148516;dbConfig['get'](_0x33520c(0x208))[_0x33520c(0x24a)]()[_0x33520c(0x2bc)](),dbConfig[_0x33520c(0x329)](_0x33520c(0x208))[_0x33520c(0x27e)](..._0x3689ee)[_0x33520c(0x2bc)](),config=_0x3689ee;}async function resetPassword(){const _0x36423e=_0x148516;if(tgBot&&settings[_0x36423e(0x365)]){const _0x11d3d2=Markup[_0x36423e(0x3b8)]([Markup[_0x36423e(0x382)]['callback'](_0x36423e(0x2dc),_0x36423e(0x22a)),Markup[_0x36423e(0x382)][_0x36423e(0x336)]('no',_0x36423e(0x28d))]);await sendTelegram(settings['telegramChatId'],_0x36423e(0x36e),_0x11d3d2),tgBot['action'](/resetpw_(.+)/,async _0x596f01=>{const _0xc561da=_0x36423e,_0x50a963=_0x596f01[_0xc561da(0x367)][0x1];_0x596f01['editMessageReplyMarkup']();if(_0x50a963!='no'){const _0xb0e40a=0xf,_0x3d45b1=_0xc561da(0x337),_0x5ea166=Array['from'](crypto[_0xc561da(0x209)](new Uint32Array(_0xb0e40a)))[_0xc561da(0x349)](_0x2f91e8=>_0x3d45b1[_0x2f91e8%_0x3d45b1[_0xc561da(0x3e4)]])['join'](''),_0x4769bd=bcrypt[_0xc561da(0x2d6)](_0x5ea166,saltRounds);storeSettings({'bbPassword':_0x4769bd}),await sendTelegram(_0x596f01['chat']['id'],_0xc561da(0x32f)+_0x5ea166,{'parse_mode':_0xc561da(0x254)});}else await sendTelegram(_0x596f01[_0xc561da(0x293)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x409ee6,_0x49413e){const _0x32a2ce=_0x148516;io['to']('botmanager')['emit']('notification',_0x32a2ce(0x378),_0x32a2ce(0x3a2));if(tgBot&&settings[_0x32a2ce(0x365)]){const _0x5b26ee=uuidRandom();tmpStorage[_0x5b26ee]={'path':_0x409ee6,'filename':_0x49413e};const _0x23c650=Markup['inlineKeyboard']([Markup[_0x32a2ce(0x382)][_0x32a2ce(0x336)]('yes',_0x32a2ce(0x20b)+_0x5b26ee),Markup[_0x32a2ce(0x382)]['callback']('no','restore_no_'+_0x5b26ee)]);await sendTelegram(settings[_0x32a2ce(0x365)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x23c650),tgBot[_0x32a2ce(0x23a)](/restore_(.+)_(.+)/,async _0x178138=>{const _0x3f99eb=_0x32a2ce,_0x242b29=_0x178138[_0x3f99eb(0x367)][0x1],_0x5691fc=_0x178138[_0x3f99eb(0x367)][0x2],{path:_0x13c68d,filename:_0x3ecc44}=tmpStorage[_0x5691fc];delete tmpStorage[_0x5691fc],_0x178138[_0x3f99eb(0x312)](),_0x242b29==_0x3f99eb(0x2dc)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x178138['chat']['id'],_0x3f99eb(0x3d7),{'parse_mode':'HTML'}),unzipFile(_0x13c68d,_0x3ecc44)):(logger[_0x3f99eb(0x3d6)]('Restore\x20process\x20aborted'),await sendTelegram(_0x178138['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x29dd16=_0x148516,_0x4a57df=new Date();return _0x4a57df[_0x29dd16(0x306)]()+'/'+(_0x4a57df[_0x29dd16(0x323)]()+0x1)['toString']()[_0x29dd16(0x34b)](0x2,'0')+'/'+_0x4a57df[_0x29dd16(0x26c)]()[_0x29dd16(0x350)]()[_0x29dd16(0x34b)](0x2,'0')+'\x20'+_0x4a57df[_0x29dd16(0x264)]()[_0x29dd16(0x350)]()[_0x29dd16(0x34b)](0x2,'0')+':'+_0x4a57df['getMinutes']()['toString']()[_0x29dd16(0x34b)](0x2,'0')+':'+_0x4a57df['getSeconds']()[_0x29dd16(0x350)]()[_0x29dd16(0x34b)](0x2,'0');}function getTimeStamp(){const _0x46a4be=_0x148516,_0x52fdc9=shiftedTime();return _0x52fdc9['getFullYear']()+'/'+(_0x52fdc9[_0x46a4be(0x323)]()+0x1)[_0x46a4be(0x350)]()['padStart'](0x2,'0')+'/'+_0x52fdc9[_0x46a4be(0x26c)]()[_0x46a4be(0x350)]()[_0x46a4be(0x34b)](0x2,'0')+'\x20'+_0x52fdc9[_0x46a4be(0x264)]()[_0x46a4be(0x350)]()['padStart'](0x2,'0')+':'+_0x52fdc9[_0x46a4be(0x3dc)]()['toString']()[_0x46a4be(0x34b)](0x2,'0')+':'+_0x52fdc9[_0x46a4be(0x3df)]()['toString']()[_0x46a4be(0x34b)](0x2,'0');}function getCleanTimeStamp(){const _0x2da16a=_0x148516,_0x5b1031=shiftedTime();return _0x5b1031['getFullYear']()+(_0x5b1031[_0x2da16a(0x323)]()+0x1)[_0x2da16a(0x350)]()[_0x2da16a(0x34b)](0x2,'0')+_0x5b1031[_0x2da16a(0x26c)]()[_0x2da16a(0x350)]()[_0x2da16a(0x34b)](0x2,'0')+'-'+_0x5b1031['getHours']()[_0x2da16a(0x350)]()[_0x2da16a(0x34b)](0x2,'0')+_0x5b1031[_0x2da16a(0x3dc)]()[_0x2da16a(0x350)]()['padStart'](0x2,'0')+_0x5b1031[_0x2da16a(0x3df)]()['toString']()[_0x2da16a(0x34b)](0x2,'0');}function shiftedTime(){const _0x50c545=_0x148516,_0x3e5f84=new Date();let _0x52d121=_0x3e5f84;if(settings[_0x50c545(0x1f9)]&&settings[_0x50c545(0x1f9)]!==0x0)_0x52d121=fns[_0x50c545(0x3d5)](_0x3e5f84,{'hours':settings[_0x50c545(0x1f9)]});return _0x52d121;}function startScheduler(){const _0x2e2860=_0x148516,_0x35d21d=new Date()[_0x2e2860(0x1f0)](),_0x3c1b75=shiftedTime()[_0x2e2860(0x264)]();_0x3c1b75==0x4&&backupConfigFiles();_0x3c1b75==0x0&&rotateLogFiles();_0x35d21d%0x6==0x0&&triggerAnalytics();_0x35d21d%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2a9368){const _0x39ea36=_0x148516;logger['debug'](_0x39ea36(0x352)+_0x2a9368);const _0x2fbd04=getBotsWithMode();_0x2fbd04['length']>0x0?confirmRestore(configbackuppath,_0x2a9368):unzipFile(configbackuppath,_0x2a9368);}async function getBackupFiles(_0x48e9e0=null){const _0xdf6370=_0x148516;let _0x3b7543=[],_0x12649c=fs[_0xdf6370(0x36c)](configbackuppath,{'withFileTypes':!![]});_0x12649c[_0xdf6370(0x3ce)]((_0x3ba4b3,_0x3456fb)=>_0x3ba4b3[_0xdf6370(0x2d8)]<_0x3456fb[_0xdf6370(0x2d8)]?0x1:_0x3456fb[_0xdf6370(0x2d8)]<_0x3ba4b3['name']?-0x1:0x0),_0x12649c['forEach'](_0x2682e6=>{const _0x12e100=_0xdf6370;if(!_0x2682e6[_0x12e100(0x2df)]()&&_0x2682e6[_0x12e100(0x2d8)][_0x12e100(0x3c3)](_0x12e100(0x285))&&_0x2682e6['name'][_0x12e100(0x29b)](_0x12e100(0x24b))){const _0x35990a=formatDate(fs[_0x12e100(0x2f6)](configbackuppath+_0x2682e6[_0x12e100(0x2d8)])[_0x12e100(0x3b9)]);_0x3b7543['push']({'name':_0x2682e6[_0x12e100(0x2d8)],'mtime':_0x35990a});}});if(_0x48e9e0)io['to'](_0x48e9e0)['emit'](_0xdf6370(0x346),_0x3b7543);else return _0x3b7543;}async function backupConfigFiles(){const _0x57664d=_0x148516;await zipFiles(_0x57664d(0x30f));const _0x76b20b=getCleanTimeStamp();fs[_0x57664d(0x302)](zippath+_0x57664d(0x24e),configbackuppath+(_0x57664d(0x285)+_0x76b20b+_0x57664d(0x24b)));let _0x3aebd8=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3aebd8[_0x57664d(0x3ce)]((_0x219a5b,_0x487cb5)=>_0x219a5b[_0x57664d(0x2d8)]<_0x487cb5[_0x57664d(0x2d8)]?0x1:_0x487cb5['name']<_0x219a5b[_0x57664d(0x2d8)]?-0x1:0x0),_0x3aebd8[_0x57664d(0x3e4)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3aebd8[_0x3aebd8[_0x57664d(0x3e4)]-0x1]['name']);}function rotateLogFiles(){const _0x584d3e=_0x148516,_0x27e524=fs[_0x584d3e(0x2f6)](logspath+_0x584d3e(0x2e9)),_0x4d1648=_0x27e524[_0x584d3e(0x30b)]/0x400;if(_0x4d1648>0x64){let _0x5a0139=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x5a0139[_0x584d3e(0x3ce)]((_0x23d671,_0x527c47)=>_0x23d671[_0x584d3e(0x2d8)]<_0x527c47[_0x584d3e(0x2d8)]?0x1:_0x527c47[_0x584d3e(0x2d8)]<_0x23d671[_0x584d3e(0x2d8)]?-0x1:0x0),_0x5a0139[_0x584d3e(0x2f0)](_0x2cc2dc=>{const _0x1f0c75=_0x584d3e;if(_0x2cc2dc[_0x1f0c75(0x2d8)]==_0x1f0c75(0x385))fs['copyFileSync'](logspath+_0x2cc2dc[_0x1f0c75(0x2d8)],logspath+_0x1f0c75(0x335));if(_0x2cc2dc[_0x1f0c75(0x2d8)]==_0x1f0c75(0x274))fs[_0x1f0c75(0x302)](logspath+_0x2cc2dc[_0x1f0c75(0x2d8)],logspath+_0x1f0c75(0x385));_0x2cc2dc[_0x1f0c75(0x2d8)]==_0x1f0c75(0x2e9)&&(fs['copyFileSync'](logspath+_0x2cc2dc[_0x1f0c75(0x2d8)],logspath+_0x1f0c75(0x274)),fs[_0x1f0c75(0x201)](logspath+_0x2cc2dc[_0x1f0c75(0x2d8)],''));});}}async function zipFiles(_0x151915){const _0x316379=_0x148516;let _0x148db1;if(_0x151915==_0x316379(0x313))_0x148db1=logspath;if(_0x151915=='backup')_0x148db1=configpath;if(_0x151915==_0x316379(0x30f))_0x148db1=configpath;let _0x2bfe80=fs[_0x316379(0x36c)](_0x148db1,{'withFileTypes':!![]});const _0x399a4f=new require('node-zip')();_0x2bfe80['forEach'](_0x59a46a=>{const _0x56b744=_0x316379;if(!_0x59a46a[_0x56b744(0x2df)]()){let _0x4cfdf1=fs[_0x56b744(0x3cb)](_0x148db1+_0x59a46a[_0x56b744(0x2d8)]);if(_0x151915==_0x56b744(0x26e)){const _0x35706e=/^bot-[0-9]{3}-config.json$/,_0x12dd92=_0x35706e['test'](_0x59a46a[_0x56b744(0x2d8)]);if(_0x12dd92){const _0x32a576=JSON[_0x56b744(0x348)](_0x4cfdf1);if(_0x32a576[_0x56b744(0x2b8)][0x0]){_0x32a576['bot'][0x0][_0x56b744(0x358)]=_0x56b744(0x26f),_0x32a576[_0x56b744(0x2b8)][0x0][_0x56b744(0x202)]=_0x56b744(0x26f);if(_0x32a576[_0x56b744(0x2b8)][0x0][_0x56b744(0x271)])_0x32a576[_0x56b744(0x2b8)][0x0][_0x56b744(0x271)]=_0x56b744(0x26f);}_0x4cfdf1=JSON[_0x56b744(0x265)](_0x32a576,null,0x2);}if(_0x59a46a[_0x56b744(0x2d8)]==_0x56b744(0x3d1)){const _0x4ec8e6=JSON['parse'](_0x4cfdf1);if(_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x20e)])_0x4ec8e6[_0x56b744(0x341)]['loginRequired']=![];if(_0x4ec8e6['settings'][_0x56b744(0x26d)])_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x26d)]=_0x56b744(0x26f);if(_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x319)])_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x319)]=_0x56b744(0x26f);if(_0x4ec8e6['settings']['telegramChatId'])_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x365)]=null;if(_0x4ec8e6[_0x56b744(0x341)][_0x56b744(0x25e)])_0x4ec8e6[_0x56b744(0x341)]['marketcapApi']=_0x56b744(0x26f);_0x4cfdf1=JSON[_0x56b744(0x265)](_0x4ec8e6,null,0x2);}if(_0x59a46a[_0x56b744(0x2d8)]!='bb-secure.json')_0x399a4f[_0x56b744(0x3e3)](_0x59a46a[_0x56b744(0x2d8)],_0x4cfdf1);}else _0x399a4f[_0x56b744(0x3e3)](_0x59a46a[_0x56b744(0x2d8)],_0x4cfdf1);}});const _0x1a3002=_0x399a4f[_0x316379(0x2e2)]({'base64':![],'compression':'DEFLATE'});fs[_0x316379(0x201)](zippath+(_0x151915+_0x316379(0x24b)),_0x1a3002,_0x316379(0x2b1));}async function unzipFile(_0x4bacb9,_0x4e65b7){const _0x3bfbb1=_0x148516;fs[_0x3bfbb1(0x36c)](configpath,{'withFileTypes':!![]})[_0x3bfbb1(0x2f0)](_0x2d17f9=>{const _0x24acb4=_0x3bfbb1;if(!_0x2d17f9[_0x24acb4(0x2df)]())fs[_0x24acb4(0x333)](configpath+_0x2d17f9[_0x24acb4(0x2d8)]);});const _0x4d8784=fs[_0x3bfbb1(0x3cb)](_0x4bacb9+_0x4e65b7,_0x3bfbb1(0x2b1)),_0x5b1c84=new require(_0x3bfbb1(0x1fd))(_0x4d8784,{'base64':![],'checkCRC32':!![]});Object[_0x3bfbb1(0x3e7)](_0x5b1c84['files'])[_0x3bfbb1(0x2f0)](_0x2fb19d=>{const _0x1ada0e=_0x3bfbb1,_0x1f93d6=_0x5b1c84[_0x1ada0e(0x223)][_0x2fb19d];fs['writeFileSync'](configpath+_0x1f93d6[_0x1ada0e(0x2d8)],_0x1f93d6[_0x1ada0e(0x2be)]);}),fs[_0x3bfbb1(0x36c)](temppath,{'withFileTypes':!![]})[_0x3bfbb1(0x2f0)](_0x40f577=>{const _0x5c2486=_0x3bfbb1;if(!_0x40f577[_0x5c2486(0x2df)]())fs['rmSync'](temppath+_0x40f577[_0x5c2486(0x2d8)]);}),logger[_0x3bfbb1(0x3d6)](_0x3bfbb1(0x364)),process[_0x3bfbb1(0x1fa)]({'restore':!![]},_0x1149c8=>{});}async function getPublicIp(){const _0x254f4a=_0x148516;try{const _0x388e4f=await axios[_0x254f4a(0x329)](_0x254f4a(0x243));publicip=_0x388e4f[_0x254f4a(0x379)]['ip'];}catch(_0x4e8f4e){}}async function triggerAnalytics(){const _0x2022cb=_0x148516;if(!publicip)await getPublicIp();const _0x2a9716=getBotsWithMode();let _0x3a2842=0x0;_0x2a9716[_0x2022cb(0x2f0)](_0x5c422d=>{const _0x49f905=_0x2022cb;if(_0x5c422d[_0x49f905(0x28f)]===_0x49f905(0x3bf))_0x3a2842++;});const _0x4c4d97=getBotExchanges();mixpanel[_0x2022cb(0x2fb)](_0x2022cb(0x28c),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x2a9716[_0x2022cb(0x3e4)],'numbotsenabled':_0x3a2842,'exchanges':_0x4c4d97,'environment':environment});}async function getMessages(){const _0x34c574=_0x148516,_0x34185e='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x446e19=new GraphQLClient(_0x34185e),_0x20008c={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x40a44d=serverversion[_0x34c574(0x31e)]('.'),_0x2eed0f=_0x40a44d[0x0]+'.'+_0x40a44d[0x1],_0x1d1d26=Math[_0x34c574(0x3a0)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x2c0133={'last':parseInt(_0x1d1d26),'bbm':_0x2eed0f},_0x594908=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x540bfc;try{_0x540bfc=await _0x446e19['request'](_0x594908,_0x2c0133,_0x20008c);}catch(_0xe91943){}if(_0x540bfc&&_0x540bfc[_0x34c574(0x3ba)]){let _0x29cae1=settings[_0x34c574(0x2db)];newMessages=[];for(const _0x1c0d09 of _0x540bfc[_0x34c574(0x3ba)]){newMessages['push'](_0x1c0d09);let _0x1751bc=![];_0x1c0d09[_0x34c574(0x325)]&&(updateSetting('latestversion',_0x1c0d09[_0x34c574(0x325)]),_0x1751bc=isNewerVersion(serverversion,_0x1c0d09['bbvNew'])||serverversion==_0x1c0d09['bbvNew']);if(!_0x1751bc&&_0x1c0d09['number']>_0x29cae1){if(_0x1c0d09[_0x34c574(0x3e8)]==='any'||serverversion[_0x34c574(0x3c3)](_0x1c0d09[_0x34c574(0x3e8)])){let _0x59e72f=''+_0x1c0d09[_0x34c574(0x2e3)]+'\x0a\x0a'+_0x1c0d09[_0x34c574(0x305)];const _0x1f3cf6=await sendTelegramMsg(toTelegramMarkdown(_0x59e72f),_0x34c574(0x295));if(_0x1f3cf6)_0x29cae1=_0x1c0d09[_0x34c574(0x324)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x34c574(0x2db),_0x29cae1),emitMessages();}}function emitMessages(){const _0x50300d=_0x148516,_0x52becd=settings['lastmsgemitted'];let _0x221cf5=[];newMessages['forEach'](_0xab85b2=>{const _0x2e4e05=_0x437f;_0xab85b2[_0x2e4e05(0x324)]>_0x52becd&&_0x221cf5[_0x2e4e05(0x27e)](_0xab85b2);}),_0x221cf5[_0x50300d(0x3e4)]>0x0&&getAllClients()[_0x50300d(0x2f0)](_0x4218a0=>{const _0x28c075=_0x50300d;getSocket(_0x4218a0['id'])[_0x28c075(0x326)](_0x28c075(0x305),_0x221cf5);});}function confirmMessage(_0x2b537f){const _0x881390=_0x148516;updateSetting(_0x881390(0x1f1),Number(_0x2b537f));}function isNewerVersion(_0x1d47c7,_0x5d7a37){const _0xfbcb76=_0x148516,_0x3831b0=_0x5d7a37[_0xfbcb76(0x31e)]('.'),_0x335391=_0x1d47c7[_0xfbcb76(0x31e)]('.');for(var _0x4627f9=0x0;_0x4627f9<_0x335391[_0xfbcb76(0x3e4)];_0x4627f9++){const _0x23794c=~~_0x335391[_0x4627f9],_0x4a90ff=~~_0x3831b0[_0x4627f9];if(_0x23794c>_0x4a90ff)return!![];if(_0x23794c<_0x4a90ff)return![];}return![];}function toTelegramMarkdown(_0x5c3acb){const _0x2e46bc=_0x148516,_0x20f9af=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x7d95=/\*{2}(.+?)\*{2}/gim;return _0x5c3acb=_0x5c3acb[_0x2e46bc(0x334)](_0x20f9af,_0x2e46bc(0x2b6))[_0x2e46bc(0x334)](_0x7d95,_0x2e46bc(0x29d)),_0x5c3acb;}async function validateConfigFile(){const _0x578037=_0x148516,_0x26afdf=dbConfig['get'](_0x578037(0x208))[_0x578037(0x1ff)](_0x578037(0x234))[_0x578037(0x249)]()||[];if(_0x26afdf[_0x578037(0x3e4)]==0x0){let _0x351e3c=0x0,_0x5115f7=[];const _0x1d77a9=/^bot-([0-9]{3})-config.json$/,_0x155d21=fs[_0x578037(0x36c)](configpath);_0x155d21[_0x578037(0x2f0)](_0x4443be=>{const _0x5f0339=_0x578037,_0x4c48ee=_0x1d77a9[_0x5f0339(0x27f)](_0x4443be);if(_0x4c48ee){const _0x599d06=_0x4c48ee[0x1];let _0x243984=getBotAttributes(_0x599d06);_0x5115f7['push']({'botID':_0x599d06,'botname':_0x243984['botname'],'status':_0x5f0339(0x2d3),'live':'stopped'}),_0x351e3c++;}}),_0x351e3c!=0x0&&(dbConfig[_0x578037(0x329)](_0x578037(0x208))[_0x578037(0x322)](_0x5115f7)[_0x578037(0x2bc)](),config=_0x5115f7,restoredConfigFile=_0x351e3c);}}async function restoreConfigNotify(_0x10e956){const _0xfb00ea=_0x148516;let _0x1e18b1;if(restoredConfigFile==0x1)_0x1e18b1=_0xfb00ea(0x23b);else _0x1e18b1=_0xfb00ea(0x2cf);if(_0x10e956)io['to'](_0xfb00ea(0x297))['emit'](_0xfb00ea(0x3ad),_0x1e18b1);else{logger[_0xfb00ea(0x22f)](_0xfb00ea(0x2ed)),logger[_0xfb00ea(0x22f)](_0x1e18b1),logger[_0xfb00ea(0x22f)](_0xfb00ea(0x2ed)),logger[_0xfb00ea(0x22f)]('');if(tgBot&&settings['telegramChatId']&&settings[_0xfb00ea(0x252)]!=_0xfb00ea(0x3bc))await sendTelegram(settings['telegramChatId'],_0xfb00ea(0x2c4)+_0x1e18b1);}}function validateCredentials(_0x1b7968,_0x22b2d3){const _0x1ecf18=_0x148516;if(_0x1b7968[_0x1ecf18(0x32e)]==settings[_0x1ecf18(0x3e6)]&&bcrypt[_0x1ecf18(0x3c7)](_0x1b7968['password'],settings[_0x1ecf18(0x26d)])){if(settings[_0x1ecf18(0x397)])return{'allow':![],'reason':_0x1ecf18(0x1ea),'token':null};else{const _0x4c4160=generateLoginToken(_0x22b2d3);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x4c4160};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x2615bb){const _0x5f1ec1=_0x148516,_0x68f312=generateLoginToken(_0x2615bb);return{'allow':!![],'reason':_0x5f1ec1(0x21d),'token':_0x68f312};}function _0x39a2(){const _0x27f0c5=['botname','userid','All\x20bots\x20running\x20right\x20now','getHours','stringify','decrypt','reset-history','#RES#\x20if\x20running\x20locally\x0a','Telegraf\x20error:',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','sign','getDate','bbPassword','backup','***','temporary\x20token\x20generated','apiPassword','toIPv4Address','sockets','output-001.log','2FA\x20required','createServer','from','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','launch','/help\x20-\x20show\x20available\x20commands\x0a','[ip-address]','CoinMarketCap\x20API\x20key\x20validated','/:bot/support','push','exec','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','\x20(2)','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','storeConfiguration','backup-full@','production','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','BCT','config/','Login\x20accepted','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Server','resetpw_no','Unauthorized\x20attempt\x20to\x20get\x20events','status','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','connection','/on\x20-\x20start\x20bot(s)\x0a','chat','Telegram\x20error:','Markdown','jsonwebtoken','botmanager','full','constructor','password','endsWith','tempaccess_reject_','*$1*','IPv4','internal','port','express-fileupload','api-eu.mixpanel.com','accept','Orders','config_alerts','bot-','ETH','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','login\x20required','Unauthorized\x20attempt\x20to\x20delete\x20alerts','listen','path','/upload-backup','catch','2742417bxUMgD','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','binary','show-config','Failed\x20to\x20download\x20','exit','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','$1_$2_$3','792020oRcCLH','bot','update-bb','Invalid\x20authentication\x20token\x20(2)','#RES#\x20','write','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','_data','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','then','125111AwwiEn','telegram','Bot\x20Mgr\x20>\x20','store','/restart\x20-\x20restart\x20bot(s)\x0a','\x20-\x20','filter','Invalid\x20IP\x20address','child_process','Notifications\x20types:\x20','\x20only\x0a','telegramEnabled','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Error\x20while\x20deleting\x20config\x20files:\x20','argv','add-bot','disabled','referer','tempaccess_30_','hashSync','Login\x20rejected','name','all','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','lastmsgtelegram','yes','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','getPortfolio','isDirectory','store-headless','Unauthorized\x20attempt\x20to\x20download\x20','generate','title','config_orders',',\x20must\x20be\x20a\x204\x20digit\x20number','SIGINT','getTime','toggle_','output-000.log','uuid','yargs/yargs','store-fiat','-----------------------------------------------------------------------------------','145328BocyLK','telegrammsg','forEach','sendPortfolioTelegram','string','Unauthorized\x20attempt\x20to\x20log\x20out','disconnect','post','statSync','socket','params','exp','Unauthorized\x20attempt\x20to\x20get\x20messages','track','start','Error\x20details:','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','reload','\x20|\x20','invalid\x20credentials','copyFileSync','graphql-request','reinstall_yes','message','getFullYear','Unauthorized\x20login\x20attempt\x20(timeout)','Bot\x20','::1','/status\x20-\x20show\x20bot(s)\x20status\x0a','size','logout','secret','whitelist','backup-full','function','clients','editMessageReplyMarkup','logs','Disabled\x20Bot\x20','get-backup-files','removeAllListeners','metrics_','bcryptjs','telegramToken','live','zip/','Starting\x20new\x20bot\x20|\x20Bot\x20','inherit','split','backup/','sendMessage','toIPv4MappedAddress','assign','getMonth','number','bbvNew','emit','cancel-loading','pidExpireLogin','get','toggle','lowdb','temporary\x20access\x20rejected',')\x20|\x20Bot\x20','username','Password\x20has\x20been\x20reset\x20to:\x20','kind','toggleBotMode','Allow\x20login\x20from\x20IP\x20address\x20','rmSync','replace','output-003.log','callback','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','sendFile','update-bot','\x20mode','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','get-messages','sha256','\x1b[34m','logs/','#RES#\x20if\x20running\x20on\x20server','settings','reinstall-bb','names','hex','config_all','backup-files','\x20>\x20','parse','map','version','padStart','new','publicKey','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','find','toString','SIGTERM','Restore\x20backup\x20file\x20','latestversion','store-settings','format','reply','Unauthorized\x20attempt\x20to\x20update\x20bot','apiKey','Unauthorized\x20attempt\x20to\x20confirm\x20message','http','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bb/','build',')\x20\x20\x20|\x20Bot\x20','expiry','on_','127.0.0.1','No\x20bots\x20running\x20right\x20now','Backup\x20file\x20unzipped\x20and\x20stored','telegramChatId','initclient','match','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','delete-alerts','mode','enable','readdirSync','join','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','build2','ipc','private','express','2yLEOzU','range','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','<b>Balance\x20Bot\x20Status:</b>\x0a','Notifications\x20enabled\x0a','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','data','conn','telegram2FaApproval','toggle-bot-mode','0.0.0','confirm-message','tkn','telegramIpApproval','2FA\x20login\x20rejected','button','<b>Telegram\x20Bot\x20Status:</b>\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','output-002.log','search','code','80VEbYzY','show','-results.json','updatebotmanager','remoteAddress','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Invalid\x20username\x20or\x20IP\x20address','reject','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','/names\x20-\x20show\x20bot\x20names\x0a','emitHistory','User\x20has\x20been\x20validated','running','isIPv4MappedAddress','uncaughtException','f2aRequired','storeFiat','bb-secure.json','/output-000.log','2FA\x20login\x20token\x20generated','reason','help','pidRefreshToken','Enabled\x20Bot\x20','min','Idling\x20(','success','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Unauthorized\x20attempt\x20to\x20update\x20settings','Crypt','\x1b[35m','resetHistory','/:bot/coins','index.html','clientip','reinstall','notification','12136230aahLAm','/metrics\x20-\x20show\x20bot\x20performance\x0a','/:bot/configuration','slice','497286AAcQYU','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','settings.','mixpanel','store-configuration','version.json','inlineKeyboard','mtime','messages','Invalid\x20authentication\x20token\x20(1)','orders','backupfile','File\x20uploaded','enabled','Starting\x20#RED#Balance\x20Bot\x20v','onepagemode','Unauthorized\x20attempt\x20to\x20delete\x20bot','startsWith','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','NTBA_FIX_319','Starting\x20Balance\x20Bot\x20reinstallation','compareSync','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','user','node','readFileSync','static','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','sort','showConfig','date-fns','bb-settings.json','reset-password','place-order','temp/','add','debug','Restoring\x20bot(s)\x20from\x20backup','\x20to\x20','storeHeadless','sendMetricsTelegram','config','getMinutes','test','connected','getSeconds','portfolio','\x20(1)','login2fa_','file','length','disable','bbUsername','keys','bbvReceive','off_','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','All\x20bots','use','restore-backup-file','get-portfolio','args','/download/:type','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Unauthorized\x20attempt\x20to\x20get\x20portfolio','2FA\x20login\x20required','update_yes','whitelistEnabled','-config.json','hasOwnProperty','Error\x20removing\x20old\x20backup\x20files:','getUTCHours','lastmsgemitted','event',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','host','1000','-events.json','|@|','unlinkSync','timeshift','send',':\x20Bot\x20Mgr\x20>\x20','-performance.json','node-zip','\x1b[36m','sortBy','verify','writeFileSync','apiSecret','defaults','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','randomBytes','/:bot/history','log','bots','randomFillSync','new-disabled','restore_yes_','util','uuid-random','loginRequired','Alerts','headless','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','All','manual','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','mkdirSync','logged\x20out','stop','env','login\x20not\x20required','kill','entries','************','login\x20token\x20generated','Notifications\x20disabled','type','restart_','includes','privateKey','files','Deleted\x20Bot\x20','access','blacklist','Notifications\x20disabled\x0a','error','stopped','resetpw_yes','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','once','174048fVwcsE','address','simple','bot.js','\x1b[31m','Starting\x20(','Logged\x20out\x20user\x20...','botID','headers','ipaddr.js','2FA','encryptedUuid','order','action','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','\x1b[0m','alerts','delete-bot','token','auto','temporary\x20access\x20timeout','https://api.ipify.org?format=json','login','command','access\x20timeout','existsSync','secure','value','remove','.zip','update','set','backup-full.zip','auth','allow','cloneDeep','telegramEvents','Logged\x20in\x20user\x20...','HTML','Yes','lowdb/adapters/FileSync','hybrid-crypto-js','RSA-OAEP','apply','placeOrder','family','Access\x20enabled\x20for\x20','telegramUsername','marketcapApi','timestamp','Error:\x20Invalid\x20argument\x20'];_0x39a2=function(){return _0x27f0c5;};return _0x39a2();}function validateAccess(_0x363753,_0x2a6b90,_0x3e7257){const _0x2ccafc=_0x148516,_0x46ca80=_0x3e7257?_0x3e7257:devices[_0x2a6b90]['ip'];let _0x3b1963;const _0x81286f=_0x483d94=>{const _0x24f60e=_0x437f;if(settings['loginRequired']){if(settings[_0x24f60e(0x397)]){if(telegram2FaApproved(_0x2a6b90)){const _0x222869=generateLoginToken(_0x2a6b90);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x222869};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3b1963=validToken(_0x483d94,_0x2a6b90),_0x3b1963[_0x24f60e(0x1ee)](_0x24f60e(0x3a2))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x483d94}:{'allow':![],'reason':_0x24f60e(0x2a9),'token':null};}else return{'allow':!![],'reason':_0x24f60e(0x219),'token':null};};if(settings[_0x2ccafc(0x1ec)]){let _0x482c94=[...settings[_0x2ccafc(0x30e)],_0x2ccafc(0x309),'::ffff:127.0.0.1',_0x2ccafc(0x362)];if(_0x482c94[_0x2ccafc(0x221)](_0x46ca80))return _0x81286f(_0x363753);else{_0x3b1963=validToken(_0x363753,_0x2a6b90);if(_0x3b1963[_0x2ccafc(0x1ee)](_0x2ccafc(0x3a2)))return _0x81286f(_0x363753);else{if(telegramIpApproved(_0x2a6b90)){const _0x3fad56=generateToken(_0x2a6b90);return _0x3b1963=_0x81286f(_0x363753),_0x3b1963[_0x2ccafc(0x250)]?{'allow':!![],'reason':_0x2ccafc(0x270),'token':_0x3fad56}:_0x3b1963;}else return settings[_0x2ccafc(0x3a3)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x81286f(_0x363753);}function timelyDecrypt(_0x2c6f00,_0x333766,_0xe82560='@'){const _0x28b09b=_0x148516;if(_0x2c6f00)try{const _0x443b41=crypt['decrypt'](secure[_0x28b09b(0x222)],_0x2c6f00)[_0x28b09b(0x305)],_0x4c9bea=_0x443b41[_0x28b09b(0x31e)](_0xe82560)[0x0],_0x306dd1=_0x443b41['split'](_0xe82560)[0x1],_0x39c701=new Date()[_0x28b09b(0x2e7)]();if(_0x333766){if(_0x39c701-_0x306dd1<maxSecretAge*0x3e8)return _0x4c9bea;else return![];}else return _0x4c9bea;}catch(_0x218dfb){return![];}else return![];}const validToken=(_0x10dfd6,_0x5a0e90)=>{const _0x49f089=_0x148516,_0x4444d1=devices[_0x5a0e90]['ip'];if(!_0x10dfd6)return{'error':'No\x20authentication\x20token'};for(let _0x844219 of blacklist){if(_0x844219['token']==_0x10dfd6)return{'error':'Token\x20blacklisted'};}let _0xd40437;try{_0xd40437=jwt[_0x49f089(0x200)](_0x10dfd6,secure[_0x49f089(0x30d)]+_0x5a0e90);}catch{return{'error':_0x49f089(0x3bb)};}if(!_0xd40437[_0x49f089(0x1ee)](_0x49f089(0x3ab))&&!_0xd40437['hasOwnProperty'](_0x49f089(0x32e))||!_0xd40437['hasOwnProperty'](_0x49f089(0x2f9)))return{'error':_0x49f089(0x2ba)};if(!_0xd40437[_0x49f089(0x1ee)](_0x49f089(0x32e))&&_0xd40437['hasOwnProperty'](_0x49f089(0x3ab))){const {clientip:_0x2059da}=_0xd40437;return _0x4444d1==_0x2059da?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x49f089(0x2c9)};}else{if(_0xd40437[_0x49f089(0x1ee)]('username')&&_0xd40437[_0x49f089(0x1ee)](_0x49f089(0x3ab))){const {username:_0x5a0d44,clientip:_0x100c14}=_0xd40437;return settings[_0x49f089(0x3e6)]==_0x5a0d44&&_0x4444d1==_0x100c14?{'success':_0x49f089(0x393)}:{'error':_0x49f089(0x38e)};}}},generateLoginToken=_0x4f8a21=>{const _0x5b85ab=_0x148516;if(_0x4f8a21){const _0x2f337e=devices[_0x4f8a21]['ip'];return jwt[_0x5b85ab(0x26b)]({'username':settings[_0x5b85ab(0x3e6)],'clientip':_0x2f337e},secure[_0x5b85ab(0x30d)]+_0x4f8a21,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1b5eef=>{const _0x33482d=_0x148516;if(_0x1b5eef){const _0x429e4d=devices[_0x1b5eef]['ip'];return jwt[_0x33482d(0x26b)]({'clientip':_0x429e4d},secure['secret']+_0x1b5eef,{'expiresIn':devices[_0x1b5eef]['telegramIpApproval'][_0x33482d(0x360)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x4ef9b4=>{const _0xb017c3=_0x148516;let _0x539701=![];return devices[_0x4ef9b4][_0xb017c3(0x380)]&&devices[_0x4ef9b4][_0xb017c3(0x380)][_0xb017c3(0x360)]!=_0xb017c3(0x38f)&&(_0x539701=devices[_0x4ef9b4][_0xb017c3(0x380)][_0xb017c3(0x3ab)]==devices[_0x4ef9b4]['ip']&&new Date()[_0xb017c3(0x2e7)]()-devices[_0x4ef9b4][_0xb017c3(0x380)][_0xb017c3(0x25f)]<devices[_0x4ef9b4][_0xb017c3(0x380)]['expiry']*0x3c*0x3e8),_0x539701;},telegram2FaApproved=_0x43286b=>{const _0x1da397=_0x148516;let _0x5e7494=![];return devices[_0x43286b]['telegram2FaApproval']&&devices[_0x43286b]['telegram2FaApproval'][_0x1da397(0x360)]!='reject'&&(_0x5e7494=devices[_0x43286b][_0x1da397(0x37b)][_0x1da397(0x3ab)]==devices[_0x43286b]['ip']&&new Date()[_0x1da397(0x2e7)]()-devices[_0x43286b][_0x1da397(0x37b)][_0x1da397(0x25f)]<devices[_0x43286b][_0x1da397(0x37b)][_0x1da397(0x360)]*0x3c*0x3e8),_0x5e7494;},normalizeIP=_0x22ee51=>{const _0x414e9c=_0x148516;let _0x472585=null,_0x191ec9=null;if(ipaddr['isValid'](_0x22ee51)){const _0x555612=ipaddr[_0x414e9c(0x348)](_0x22ee51);_0x555612[_0x414e9c(0x330)]()==='ipv6'?(_0x555612[_0x414e9c(0x395)]()&&(_0x472585=_0x555612[_0x414e9c(0x272)]()[_0x414e9c(0x350)]()),_0x191ec9=_0x555612[_0x414e9c(0x350)]()):(_0x472585=_0x555612[_0x414e9c(0x350)](),_0x191ec9=_0x555612[_0x414e9c(0x321)]()['toString']());}return{'show':_0x472585?_0x472585:_0x191ec9,'store':_0x191ec9};};function formatDate(_0xc82ea){const _0x30c2c9=_0x148516;return _0xc82ea[_0x30c2c9(0x306)]()+'/'+(_0xc82ea['getMonth']()+0x1)['toString']()[_0x30c2c9(0x34b)](0x2,'0')+'/'+_0xc82ea[_0x30c2c9(0x26c)]()[_0x30c2c9(0x350)]()[_0x30c2c9(0x34b)](0x2,'0')+'\x20'+_0xc82ea[_0x30c2c9(0x264)]()[_0x30c2c9(0x350)]()['padStart'](0x2,'0')+':'+_0xc82ea['getMinutes']()[_0x30c2c9(0x350)]()[_0x30c2c9(0x34b)](0x2,'0')+':'+_0xc82ea['getSeconds']()[_0x30c2c9(0x350)]()[_0x30c2c9(0x34b)](0x2,'0');}function sleep(_0x10f64c){return new Promise(_0x4612e6=>setTimeout(_0x4612e6,_0x10f64c));}