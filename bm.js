const _0x4e086b=_0xd360;(function(_0x634ea2,_0x5d3e3e){const _0x364e8b=_0xd360,_0x31a4b0=_0x634ea2();while(!![]){try{const _0x2b7b68=parseInt(_0x364e8b(0x2eb))/0x1+parseInt(_0x364e8b(0x236))/0x2*(-parseInt(_0x364e8b(0x2ae))/0x3)+parseInt(_0x364e8b(0x27b))/0x4*(-parseInt(_0x364e8b(0x153))/0x5)+parseInt(_0x364e8b(0x13a))/0x6*(parseInt(_0x364e8b(0x31f))/0x7)+parseInt(_0x364e8b(0x13b))/0x8*(-parseInt(_0x364e8b(0x15f))/0x9)+parseInt(_0x364e8b(0x175))/0xa*(-parseInt(_0x364e8b(0x241))/0xb)+parseInt(_0x364e8b(0x324))/0xc;if(_0x2b7b68===_0x5d3e3e)break;else _0x31a4b0['push'](_0x31a4b0['shift']());}catch(_0x1e2fb9){_0x31a4b0['push'](_0x31a4b0['shift']());}}}(_0x20d7,0x91749));const _0x63ff4d=function(){let _0x341004=!![];return function(_0x2aaefa,_0x5a4735){const _0x3116ba=_0x341004?function(){const _0x55b159=_0xd360;if(_0x5a4735){const _0x35514f=_0x5a4735[_0x55b159(0x171)](_0x2aaefa,arguments);return _0x5a4735=null,_0x35514f;}}:function(){};return _0x341004=![],_0x3116ba;};}(),_0x2bd55b=_0x63ff4d(this,function(){const _0x3bc73a=_0xd360;return _0x2bd55b[_0x3bc73a(0x16a)]()[_0x3bc73a(0x1d0)]('(((.+)+)+)+$')[_0x3bc73a(0x16a)]()[_0x3bc73a(0x249)](_0x2bd55b)[_0x3bc73a(0x1d0)](_0x3bc73a(0x2dc));});_0x2bd55b();'use strict';process[_0x4e086b(0x1a9)][_0x4e086b(0x219)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x4e086b(0x122)),low=require(_0x4e086b(0x12c)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x4e086b(0x26e)),crypto=require(_0x4e086b(0x2aa)),forge=require(_0x4e086b(0x2b8)),bcrypt=require('bcryptjs'),jwt=require(_0x4e086b(0x2dd)),ipaddr=require(_0x4e086b(0x23c)),argv=require(_0x4e086b(0x290))(process[_0x4e086b(0x2cc)][_0x4e086b(0x25a)](0x2))['argv'],uuidRandom=require(_0x4e086b(0x1e0)),{Telegraf,Markup}=require(_0x4e086b(0x174)),Mixpanel=require(_0x4e086b(0x29a)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x4e086b(0x14d)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x4e086b(0x271)),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x4e086b(0x24c)](PORT)&&(console[_0x4e086b(0x132)](_0x4e086b(0x25d)+PORT+_0x4e086b(0x23b)),process['exit'](0x1));const HOST=argv[_0x4e086b(0x19b)]||null,userID=argv[_0x4e086b(0x1fa)]||'',debugging=argv['d']||![],nodeversion=process[_0x4e086b(0x2c9)][_0x4e086b(0x303)];let bbpath=_0x4e086b(0x16c),bbpath2='';const botfile=_0x4e086b(0x158),configfile=_0x4e086b(0x212),settingsfile=_0x4e086b(0x25c),securefile=_0x4e086b(0x1fe),environment=require('./'+bbpath2+_0x4e086b(0x1f4))[_0x4e086b(0x24f)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x4e086b(0x169)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4e086b(0x1f9));let configpath=userID?bbpath+_0x4e086b(0x208)+userID+'/':bbpath+_0x4e086b(0x208);const configbackuppath=configpath+_0x4e086b(0x216),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x4e086b(0x137),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x4e086b(0x155)](logspath+_0x4e086b(0x29b),{'flags':'a'}),temppath=userID?bbpath+_0x4e086b(0x2bf)+userID+'/':bbpath+'temp/';!fs[_0x4e086b(0x169)](configpath)&&fs[_0x4e086b(0x2c3)](configpath);!fs[_0x4e086b(0x169)](configbackuppath)&&fs[_0x4e086b(0x2c3)](configbackuppath);!fs[_0x4e086b(0x169)](logspath)&&fs[_0x4e086b(0x2c3)](logspath);!fs[_0x4e086b(0x169)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x4e086b(0x169)](temppath)&&fs[_0x4e086b(0x2c3)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e086b(0x123)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4e086b(0x123)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4e086b(0x2c2),'onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4e086b(0x123)]({'secure':{},'blacklist':[]})[_0x4e086b(0x2f5)]();function _0x20d7(){const _0x4bca06=['127.0.0.1','login\x20token\x20generated','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Alerts','build','userid','generateKeyPair','/metrics\x20-\x20show\x20bot\x20performance\x0a','disconnect','1000','delete-alerts','Idling\x20(','getMonth','simple','find','privateKeyToPem','SIGINT','accept','update-bb','status','/help\x20-\x20show\x20available\x20commands\x0a','function','manual','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','bot','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','\x1b[34m','range','botname','Telegram\x20error:','search','compareSync','match','connection','invalid\x20credentials','length','reinstall_yes','-----------------------------------------------------------------------------------','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','telegramChatId','toggle_','push','apiSecret','headers','Unauthorized\x20attempt\x20to\x20delete\x20bot','restart_','uuid-random','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20attempt\x20to\x20update\x20bot','-config.json','backup-full','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','backup-full@','::ffff:127.0.0.1','join','Unauthorized\x20attempt\x20to\x20confirm\x20message','fork','cancelLoading','\x20mode','address\x20already\x20in\x20use','privateKey','-events.json','BCT','text','Restore\x20process\x20aborted','Password\x20has\x20been\x20reset\x20to:\x20','version.json','confirm-message','Unauthorized\x20attempt\x20to\x20download\x20','Bot\x20',':\x20Bot\x20Mgr\x20>\x20','clients','user','All\x20bots','restore_no_','config_all','bb-secure.json','Login\x20rejected','tempaccess_5_','password','padStart','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','assign','output-001.log',')\x20|\x20Bot\x20','type','config/','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','toggle','lastmsgemitted','messages','hasOwnProperty','send','Telegraf\x20error:','debug','pidRefreshToken','bb-config.json','sockets','getFullYear','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','backup/','from','getSeconds','NTBA_FIX_319','getUTCHours','sha256','storeHeadless','telegram','create','Backup\x20file\x20unzipped\x20and\x20stored','getStartingBalances','file','timeshift','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','mode','reload','value','remove','Your\x20installation\x20is\x20already\x20up\x20to\x20date','toIPv4Address','help','2FA\x20login\x20token\x20generated','exec','bbUsername','files','sendFile','tempaccess_30_','loginRequired','User\x20has\x20been\x20validated','Restoring\x20bot(s)\x20from\x20backup','/upload-backup','tempaccess_reject_','2WgoNKv','update_yes','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','allow','stopped',',\x20must\x20be\x20a\x204\x20digit\x20number','ipaddr.js','sign','getMinutes','access','includes','11jkZSqW','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','deleteHistoryAlerts','No\x20bots\x20running\x20right\x20now','telegramUsername','blacklist','string','isDirectory','constructor','get-logs','=>\x20Go\x20to\x20#CYA#http://','test','\x1b[35m','botmanager','environment','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','telegramEvents','internal','reject','\x20|\x20client:\x20...','portfolio_','Node.js\x20v','-results.json','storeConfiguration','tempaccess_15_','slice','generateAsync','bb-settings.json','Error:\x20Invalid\x20argument\x20','config_alerts','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','apiKey','*$1*','store-configuration','startsWith','bots','Unauthorized\x20attempt\x20to\x20delete\x20alerts','store-fiat','enable','Notifications\x20disabled\x0a','latestversion','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','use','apiPassword','2FA\x20login\x20required','path','backup-files','getHours','jszip','start','ipv6','initclient','handshake','You\x20can\x20use\x20the\x20following\x20commands:\x0a','getDate','button','keys','Unauthorized\x20attempt\x20to\x20get\x20portfolio','316fQqLjK','get-portfolio','botID','\x20only\x0a','.zip','$1_$2_$3','Markdown','secure','\x20(2)','pidExpireLogin','storeFiat','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','callback','stop','kind','stringify','getPortfolio','auth','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','telegramIpApproval','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','yargs/yargs','update_no','settings.','https://api.ipify.org?format=json','get-starting-balances','Unauthorized\x20attempt\x20to\x20log\x20out','************','f2aRequired','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','RSA-OAEP','mixpanel','/output-000.log','IPv4','mtime','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','All','delete-bot','uncaughtException','Enabled\x20Bot\x20','Starting\x20Balance\x20Bot\x20reinstallation','args','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','/restart\x20-\x20restart\x20bot(s)\x0a','success','Bot\x20Mgr\x20>\x20','logs','crypto','index.html','warning','any','1544373bUBilx','toggle-bot-mode','format','Failed\x20to\x20download\x20','File\x20uploaded','restore_yes_','marketcapApi',')\x20\x20\x20|\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','new','node-forge','/disable\x20-\x20disable\x20notifications\x0a','whitelist','/enable\x20-\x20enable\x20notifications\x0a','launch','enabled','endsWith','temp/','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20login\x20attempt\x20(timeout)','0.0.0','mkdirSync','static','store','#RES#\x20if\x20running\x20locally\x0a','telegramToken','track','versions','15\x20min','sortBy','argv','command','add-bot','sendMessage','-performance.json','Notifications\x20enabled\x0a','Starting\x20Balance\x20Bot\x20update','lastmsgtelegram','hashSync','telegramEnabled','close','Unauthorized\x20attempt\x20to\x20show\x20configuration','readdirSync','show-config','randomBytes','running','(((.+)+)+)+$','jsonwebtoken','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Server','full','config_orders','uuid','hex','Invalid\x20username\x20or\x20IP\x20address','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','onepagemode','inlineKeyboard','store-headless','writeFileSync','toIPv4MappedAddress','688854TUADeV','/off\x20-\x20stop\x20bot(s)\x0a','yes','removeAllListeners','metrics_','on_','verify','All\x20bots\x20running\x20right\x20now','/download/:type',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','write','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','readFileSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','chat','map','temporaryAccessAllowed','secret','\x20-\x20','login','\x20|\x20','clientip','SIGTERM','started','node','/:bot/coins','username','Access\x20enabled\x20for\x20','referer','names','login2fa_','(staging)','login\x20required','\x1b[33m','notification','#RES#\x20','add','catch','get-backup-files','reply','showname','address','/:bot/configuration','Login\x20accepted','once','\x20minutes','logged\x20out','statSync','download','order','DEFLATE','size','679gCDFdy','temporary\x20token\x20generated','2FA\x20login\x20rejected','Allow\x20login\x20from\x20IP\x20address\x20','reason','21640836cBKeQk','Ok,\x20will\x20send\x20order\x20notifications\x20only','data','/:bot/portfolio','headless','Session\x20expired\x20for\x20user\x20...','/:bot/history','settings','reset-password','disabled','date-fns','defaults','decode64','reinstall-bb','\x20|\x20user:\x20...','disable','http','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Logged\x20in\x20user\x20...','replace','lowdb','get','sort','Unauthorized\x20attempt\x20to\x20update\x20settings','bbvReceive','get-messages','log','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','\x1b[31m','5\x20min','orders','logs/','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','publicKeyToPem','61884FhJyJw','1420472qwrxeH','set','metrics','privateKeyFromPem','2FA\x20required','editMessageReplyMarkup','emitHistory','updatebotmanager','|@|','event','Setting\x20access:\x20','family','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','name','new-disabled','Deleted\x20Bot\x20','filter','loadAsync','util','Restore\x20process\x20confirmed','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','login\x20not\x20required','Error\x20details:','error','71885HSZcOZ','toggleBotMode','createWriteStream','\x20>\x20','output-000.log','bot.js','telegrammsg','telegram2FaApproval','inherit','action','pki','createServer','9pzxtdy','message','placeOrder','split','build2','remoteAddress','bbPassword','reinstall','forEach','update','existsSync','toString','backup-full.zip','bb/','title','private','show','publicKey','apply','Backup\x20file\x20uploaded','restart','telegraf','10687970AJjTAK','emit','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','***','conn','/:bot','copyFileSync','unlinkSync','HTML','socket','30\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Restore\x20backup\x20file\x20','Error\x20removing\x20old\x20backup\x20files:','parse','kill','auto','status\x20code\x20401','#RES#\x20if\x20running\x20on\x20server','live','bbvNew','bot-','showConfig','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Token\x20blacklisted','timestamp','Yes','rmSync','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','2FA','_nsps','::1','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','logout','getTime','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','alias','expiry','host','Invalid\x20IP\x20address','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','token','\x1b[36m','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','min','resetHistory','exit','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','restore-backup-file','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','all','env','6b67f3d61ee94b8f5c80b4affef4c4d9','temporary\x20access\x20not\x20allowed','Invalid\x20authentication\x20token\x20(2)','\x20to\x20','output-002.log','cloneDeep','store-settings','ipc'];_0x20d7=function(){return _0x4bca06;};return _0x20d7();}const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x4e086b(0x1aa),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x4e086b(0x2c7)]!=''&&settings['telegramToken']!=_0x4e086b(0x178))&&settings[_0x4e086b(0x245)]&&settings[_0x4e086b(0x245)]!='')initTelegram();const parseColor=(_0x15b0c1,_0x30e4ff)=>{const _0x41e50d=_0x4e086b,_0x3ec7e2=/#[A-Z]{3}#/g;if(typeof _0x15b0c1==_0x41e50d(0x247)){!_0x30e4ff?_0x15b0c1=_0x15b0c1['replace'](_0x3ec7e2,''):(_0x15b0c1=_0x15b0c1['replace'](/#BLU#/g,_0x41e50d(0x1cc)),_0x15b0c1=_0x15b0c1[_0x41e50d(0x12b)](/#RED#/g,_0x41e50d(0x134)),_0x15b0c1=_0x15b0c1[_0x41e50d(0x12b)](/#YEL#/g,_0x41e50d(0x30c)),_0x15b0c1=_0x15b0c1[_0x41e50d(0x12b)](/#MAG#/g,_0x41e50d(0x24d)),_0x15b0c1=_0x15b0c1[_0x41e50d(0x12b)](/#CYA#/g,_0x41e50d(0x1a0)),_0x15b0c1=_0x15b0c1[_0x41e50d(0x12b)](/#RES#/g,'\x1b[0m'));;}return _0x15b0c1;},logger={'screen':_0x4fee9a=>{console['log'](parseColor(_0x4fee9a,!![]));},'simple':_0x44b33a=>{const _0x524b09=_0x4e086b;console['log'](parseColor(_0x44b33a,!![])),loggerfile['write'](util[_0x524b09(0x2b0)](parseColor(_0x44b33a,![]))+'\x0a');},'full':async _0x5c4256=>{const _0xe095ca=_0x4e086b,_0x3e79b4=getTimeStamp()+_0xe095ca(0x1f8)+_0x5c4256;console[_0xe095ca(0x132)](parseColor(_0x3e79b4,!![])),loggerfile['write'](util[_0xe095ca(0x2b0)](parseColor(_0x3e79b4,![]))+'\x0a');if(tgBot&&settings[_0xe095ca(0x1d9)]&&settings[_0xe095ca(0x251)]!=_0xe095ca(0x136))await sendTelegram(settings[_0xe095ca(0x1d9)],_0xe095ca(0x2a8)+parseColor(_0x5c4256,![]));},'debug':async(_0xdefac4,_0x3a9781='')=>{const _0x1576a5=_0x4e086b,_0xefc04b=getTimeStamp()+_0x1576a5(0x2b6)+_0xdefac4;if(debugging)console['log'](parseColor(_0xefc04b,!![]));loggerfile['write'](util['format'](parseColor(_0xefc04b,![]))+'\x0a');if(_0x3a9781){if(debugging)console['log'](_0x3a9781);loggerfile['write'](util[_0x1576a5(0x2b0)](_0x3a9781)+'\x0a');}}};let terminating=![];process['on'](_0x4e086b(0x2a1),function(_0x4d8542){const _0x23c494=_0x4e086b;_0x4d8542[_0x23c494(0x16a)]()[_0x23c494(0x240)](_0x23c494(0x1ed))?(logger[_0x23c494(0x1bf)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x4d8542['port']+'#RES#'),process[_0x23c494(0x20e)]({'terminate':!![]},_0x40fc62=>{})):logger[_0x23c494(0x1bf)](_0x4d8542);}),process['on'](_0x4e086b(0x1a4),()=>{const _0x5e6c1a=_0x4e086b;stopAllBots(),process[_0x5e6c1a(0x1a4)](0x0);}),process['on'](_0x4e086b(0x301),()=>{const _0x3c690b=_0x4e086b;stopAllBots(),process[_0x3c690b(0x1a4)](0x0);}),process['on'](_0x4e086b(0x1c2),()=>{const _0x4e39b5=_0x4e086b;stopAllBots(),process[_0x4e39b5(0x1a4)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x4e086b(0x128))[_0x4e086b(0x15e)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x4e086b(0x12d)](_0x4e086b(0x2f3),async(_0x3b755d,_0x164f65)=>{const _0xda42af=_0x4e086b,_0x50cdba=_0x3b755d['params'][_0xda42af(0x207)],_0x3f5948=getClientsWithBotID(_0xda42af(0x24e)),_0x581918=_0x3b755d[_0xda42af(0x1dd)]['uuid'],_0x14b82c=timelyDecrypt(_0x581918,![]),_0x3427d4=_0x3f5948[_0xda42af(0x1c0)](_0x2ae04b=>_0x2ae04b[_0xda42af(0x2e2)]==_0x14b82c);if(_0x3427d4){const _0x7ecee6=normalizeIP(_0x3b755d['socket'][_0xda42af(0x164)])['store'],_0x4ef7e3=_0x3b755d[_0xda42af(0x1dd)]['tkn'];if(validateAccess(_0x4ef7e3,_0x14b82c,_0x7ecee6)[_0xda42af(0x239)])_0x50cdba=='backup'&&await backupConfigFiles(),await zipFiles(_0x50cdba),_0x164f65[_0xda42af(0x31b)](zippath+(_0x50cdba+_0xda42af(0x27f)),_0x185061=>{const _0x267600=_0xda42af;_0x185061&&(logger['full'](_0x267600(0x2b1)+_0x50cdba),logger['simple'](_0x185061));});else logger['full'](_0xda42af(0x1f6)+_0x50cdba+'\x20(1)');}else logger[_0xda42af(0x2e0)](_0xda42af(0x1f6)+_0x50cdba+_0xda42af(0x283));}),app['post'](_0x4e086b(0x234),async(_0xca57dd,_0xbd5f3c)=>{const _0x3bf9f7=_0x4e086b,_0x25344f=getClientsWithBotID(_0x3bf9f7(0x24e)),_0x575ca5=_0xca57dd[_0x3bf9f7(0x1dd)][_0x3bf9f7(0x2e2)],_0x225e2d=timelyDecrypt(_0x575ca5,![]),_0x4d3b39=_0x25344f[_0x3bf9f7(0x1c0)](_0x5abfa8=>_0x5abfa8[_0x3bf9f7(0x2e2)]==_0x225e2d);logger[_0x3bf9f7(0x210)](_0x3bf9f7(0x172));if(_0x4d3b39){const _0x4e20cf=normalizeIP(_0xca57dd[_0x3bf9f7(0x17e)][_0x3bf9f7(0x164)])[_0x3bf9f7(0x2c5)],_0x3b9997=_0xca57dd[_0x3bf9f7(0x1dd)]['tkn'];if(validateAccess(_0x3b9997,_0x225e2d,_0x4e20cf)[_0x3bf9f7(0x239)]){if(_0xca57dd[_0x3bf9f7(0x22e)]){const _0xce17d5=_0xca57dd[_0x3bf9f7(0x22e)]['backupfile'];await _0xce17d5['mv'](temppath+_0xce17d5[_0x3bf9f7(0x148)]),_0xbd5f3c['send']({'status':!![],'message':_0x3bf9f7(0x2b2)});const _0x181691=getBotsWithMode();_0x181691['length']>0x0?confirmRestore(temppath,_0xce17d5[_0x3bf9f7(0x148)]):unzipFile(temppath,_0xce17d5['name']);}}else logger[_0x3bf9f7(0x2e0)](_0x3bf9f7(0x1c9));}else logger[_0x3bf9f7(0x2e0)](_0x3bf9f7(0x1a1));}),app['use'](express[_0x4e086b(0x2c4)](path[_0x4e086b(0x1e8)](__dirname,bbpath2,_0x4e086b(0x163)))),app['use'](express[_0x4e086b(0x2c4)](path['join'](__dirname,bbpath2,'build'))),app[_0x4e086b(0x12d)]('/',function(_0x538d4c,_0x405e63){const _0x712cc9=_0x4e086b;_0x405e63['sendFile'](path[_0x712cc9(0x1e8)](__dirname,bbpath2,'build2',_0x712cc9(0x2ab)));}),app[_0x4e086b(0x12d)](_0x4e086b(0x17a),function(_0x4d2595,_0x250498){const _0x13bcf7=_0x4e086b;_0x250498['sendFile'](path[_0x13bcf7(0x1e8)](__dirname,bbpath2,'build',_0x13bcf7(0x2ab)));}),app[_0x4e086b(0x12d)](_0x4e086b(0x327),(_0x563035,_0x215b14)=>{const _0x224819=_0x4e086b;_0x215b14['sendFile'](path[_0x224819(0x1e8)](__dirname,bbpath2,_0x224819(0x1b6),_0x224819(0x2ab)));}),app['get']('/:bot/performance',(_0x7720b,_0x502ff3)=>{_0x502ff3['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x4e086b(0x12d)](_0x4e086b(0x304),(_0x1b86a4,_0x5a4886)=>{const _0x265f5c=_0x4e086b;_0x5a4886[_0x265f5c(0x22f)](path[_0x265f5c(0x1e8)](__dirname,bbpath2,_0x265f5c(0x1b6),'index.html'));}),app[_0x4e086b(0x12d)](_0x4e086b(0x11e),(_0x2c333e,_0x25ac07)=>{const _0x38b336=_0x4e086b;_0x25ac07[_0x38b336(0x22f)](path[_0x38b336(0x1e8)](__dirname,bbpath2,_0x38b336(0x1b6),'index.html'));}),app[_0x4e086b(0x12d)](_0x4e086b(0x315),(_0x2b1c9f,_0x15a7a0)=>{const _0x5b87f4=_0x4e086b;_0x15a7a0['sendFile'](path[_0x5b87f4(0x1e8)](__dirname,bbpath2,_0x5b87f4(0x1b6),_0x5b87f4(0x2ab)));}),app[_0x4e086b(0x12d)]('/:bot/support',(_0x5ba49d,_0x2d2df5)=>{const _0x1cb1bc=_0x4e086b;_0x2d2df5[_0x1cb1bc(0x22f)](path['join'](__dirname,bbpath2,_0x1cb1bc(0x1b6),_0x1cb1bc(0x2ab)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xeab235=_0x4e086b;let _0x213f44='[ip-address]';const _0x56bc32=networkInterfaces(),_0x76e114={};for(const _0x2774e1 of Object[_0xeab235(0x279)](_0x56bc32)){for(const _0x348ac8 of _0x56bc32[_0x2774e1]){if((_0x348ac8[_0xeab235(0x146)]==_0xeab235(0x29c)||_0x348ac8[_0xeab235(0x146)]==0x4)&&!_0x348ac8[_0xeab235(0x252)]){const _0x2f04a5=ipaddr[_0xeab235(0x183)](_0x348ac8[_0xeab235(0x314)])[_0xeab235(0x1cd)]();_0x2f04a5!=_0xeab235(0x16e)&&(!_0x76e114[_0x2774e1]&&(_0x76e114[_0x2774e1]=[]),_0x76e114[_0x2774e1][_0xeab235(0x1db)](_0x348ac8[_0xeab235(0x314)]),_0x213f44=_0x348ac8[_0xeab235(0x314)]);}}}return{'serverip':_0x213f44,'netinterfaces':_0x76e114};}async function startServer(){const _0x5ba144=_0x4e086b,{serverip:_0x1f5c10,netinterfaces:_0x550d05}=getServerIP();logger[_0x5ba144(0x1bf)](''),logger[_0x5ba144(0x1bf)](_0x5ba144(0x1d7)),await logger[_0x5ba144(0x2e0)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x5ba144(0x30e)+(environment=='staging'?_0x5ba144(0x30a):'')+'\x0a'+(_0x5ba144(0x138)+PORT+_0x5ba144(0x2c6))+(_0x5ba144(0x24b)+_0x1f5c10+':'+PORT+_0x5ba144(0x187))),logger['simple'](_0x5ba144(0x1d7));if(config['length']!=0x0)for(const _0x26e79c of config){const _0x5b85a6=_0x26e79c['mode']==_0x5ba144(0x185)?'a':'m';if(_0x26e79c[_0x5ba144(0x1c5)]==_0x5ba144(0x2bd)||_0x26e79c[_0x5ba144(0x1c5)]==_0x5ba144(0x2b7))await logger[_0x5ba144(0x2e0)]('Starting\x20('+_0x5b85a6+_0x5ba144(0x206)+_0x26e79c[_0x5ba144(0x27d)]+_0x5ba144(0x2ff)+_0x26e79c['botname']),startBot([_0x26e79c[_0x5ba144(0x27d)],userID],{'cwd':bbpath},function(_0x59d1c6){const _0x47b3d8=_0x5ba144;if(_0x59d1c6)logger[_0x47b3d8(0x2e0)](_0x59d1c6);});else(_0x26e79c[_0x5ba144(0x1c5)]==_0x5ba144(0x121)||_0x26e79c[_0x5ba144(0x1c5)]==_0x5ba144(0x149))&&await logger['full'](_0x5ba144(0x1bd)+_0x5b85a6+_0x5ba144(0x2b5)+_0x26e79c[_0x5ba144(0x27d)]+_0x5ba144(0x2ff)+_0x26e79c['botname']);}else!newBot&&logger[_0x5ba144(0x1bf)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x5ba144(0x1d7)),logger['simple'](''),await logger[_0x5ba144(0x210)](_0x5ba144(0x256)+nodeversion),await logger[_0x5ba144(0x210)]('Network\x20Interfaces:',_0x550d05);}function startSocket(){const _0x4286f5=_0x4e086b;io['on'](_0x4286f5(0x1d3),_0x2fe61a=>{const _0x2209ce=_0x4286f5;let _0x3ae116,_0x4d6c9a,_0x5c72d1,_0x4adfac,_0x4c61e4;const _0x4d35cb=_0x2fe61a[_0x2209ce(0x275)][_0x2209ce(0x1dd)][_0x2209ce(0x307)];_0x4d6c9a=_0x4d35cb[_0x2209ce(0x1d2)](/bot[0-9]{3}/);if(_0x4d6c9a)_0x5c72d1=_0x4d6c9a[0x0][_0x2209ce(0x1d2)](/[0-9]{3}/);if(_0x5c72d1)_0x3ae116=_0x5c72d1[0x0];else _0x3ae116=_0x2209ce(0x24e);const _0x36e38a=_0x2fe61a[_0x2209ce(0x275)][_0x2209ce(0x28c)]['encryptedUuid'];if(!_0x36e38a)_0x2fe61a[_0x2209ce(0x176)](_0x2209ce(0x1c5),{'publicKey':secure['publicKey']});else{_0x4adfac=timelyDecrypt(_0x36e38a,![]);if(!_0x4adfac)_0x2fe61a['emit'](_0x2209ce(0x1c5),{'publicKey':secure['publicKey']});else{_0x4c61e4=normalizeIP(_0x2fe61a[_0x2209ce(0x179)][_0x2209ce(0x164)])['store'];if(!devices[_0x4adfac])devices[_0x4adfac]={'uuid':_0x4adfac,'access':{'token':null}};devices[_0x4adfac]['ip']=_0x4c61e4;const _0xacb2f=addClient(_0x2fe61a['id'],_0x4adfac,_0x3ae116);setAccess(_0xacb2f),emitMessages(),_0x2fe61a['on'](_0x2209ce(0x2fe),_0x4562ba=>{const _0x50dd57=_0x2209ce,_0x57c2a0=timelyDecrypt(_0x4562ba[_0x50dd57(0x201)],!![],_0x50dd57(0x143));if(_0x57c2a0){_0x4562ba={'username':_0x4562ba[_0x50dd57(0x305)],'password':_0x57c2a0},devices[_0x4adfac][_0x50dd57(0x23f)]=validateCredentials(_0x4562ba,_0x4adfac);if(devices[_0x4adfac]['access']['allow']==![]&&devices[_0x4adfac][_0x50dd57(0x23f)]['reason']==_0x50dd57(0x26d))_0x2fe61a['emit'](_0x50dd57(0x1c5),{'access':devices[_0x4adfac]['access']}),loginAccess2FA(_0x4adfac,_0x4c61e4);else{if(devices[_0x4adfac]['access']['allow']==![]&&devices[_0x4adfac][_0x50dd57(0x23f)][_0x50dd57(0x323)]==_0x50dd57(0x1d4))_0x2fe61a['emit']('status',{'access':devices[_0x4adfac][_0x50dd57(0x23f)]});else devices[_0x4adfac][_0x50dd57(0x23f)]['allow']&&devices[_0x4adfac][_0x50dd57(0x23f)][_0x50dd57(0x323)]==_0x50dd57(0x1b3)&&(getClientsWithUuid(_0x4adfac)[_0x50dd57(0x167)](_0x21ddd6=>{setAccess(_0x21ddd6);}),logger[_0x50dd57(0x210)](_0x50dd57(0x12a)+_0x4adfac[_0x50dd57(0x25a)](-0x8)),setTokenRefresh(_0x4adfac),setSessionTimeout('login',_0x4adfac));}}else logger[_0x50dd57(0x2e0)](_0x50dd57(0x2c1));}),_0x2fe61a['on'](_0x2209ce(0x120),()=>{resetPassword();}),_0x2fe61a['on'](_0x2209ce(0x1ba),_0x15b2ab=>{removeClient(_0x2fe61a['id']);}),_0x3ae116=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x23f4bc){const _0xd582fe=_0x4e086b;if(_0x23f4bc!=_0xd582fe(0x24e)&&config[_0xd582fe(0x260)]!=''){if(pid[_0x23f4bc])pid[_0x23f4bc][_0xd582fe(0x20e)]({'function':_0xd582fe(0x274),'args':null});}_0x23f4bc!='botmanager'&&broadcastToBots('bots',JSON['stringify'](config));}function reloadBotManager(){const _0x2d0a26=_0x4e086b;getClientsWithBotID(_0x2d0a26(0x24e))['forEach'](_0x86d0dd=>{const _0x3645d7=_0x2d0a26;getSocket(_0x86d0dd['id'])[_0x3645d7(0x176)](_0x3645d7(0x1c5),{'access':{'allow':![],'reason':_0x3645d7(0x225),'token':null}});});}function getSocket(_0x1db2e1){const _0x4acd6a=_0x4e086b,_0x5923b9=io[_0x4acd6a(0x193)][_0x4acd6a(0x12d)]('/');return _0x5923b9[_0x4acd6a(0x213)][_0x4acd6a(0x12d)](_0x1db2e1);}function setAccess(_0x557561){const _0x5e15a2=_0x4e086b,_0x160b8e=getSocket(_0x557561['id']),_0x32bd86=_0x557561[_0x5e15a2(0x2e2)],_0x17edca=_0x557561[_0x5e15a2(0x1ca)];devices[_0x32bd86][_0x5e15a2(0x23f)]=validateAccess(devices[_0x32bd86][_0x5e15a2(0x23f)][_0x5e15a2(0x19f)],_0x32bd86),logger[_0x5e15a2(0x210)](_0x5e15a2(0x145)+devices[_0x32bd86][_0x5e15a2(0x23f)][_0x5e15a2(0x323)]+_0x5e15a2(0x254)+_0x557561['id']['slice'](-0x8)+_0x5e15a2(0x126)+_0x32bd86[_0x5e15a2(0x25a)](-0x8)),_0x160b8e[_0x5e15a2(0x1e8)](_0x32bd86);if(devices[_0x32bd86][_0x5e15a2(0x23f)]['allow']){_0x160b8e[_0x5e15a2(0x1e8)](_0x17edca);if(_0x17edca==_0x5e15a2(0x24e))initializeSocketBotManager(_0x160b8e);else initializeSocketBot(_0x160b8e);initClient(_0x17edca);}devices[_0x32bd86]['access']['token']&&devices[_0x32bd86]['access'][_0x5e15a2(0x323)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x5e15a2(0x192),_0x32bd86),devices[_0x32bd86][_0x5e15a2(0x23f)][_0x5e15a2(0x19f)]&&devices[_0x32bd86][_0x5e15a2(0x23f)]['reason']==_0x5e15a2(0x22b)&&setSessionTimeout(_0x5e15a2(0x2fe),_0x32bd86),_0x160b8e['emit']('status',{'status':_0x557561['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x32bd86][_0x5e15a2(0x23f)],'externalip':devices[_0x32bd86]['ip'],'publicKey':secure[_0x5e15a2(0x170)],'userid':settings[_0x5e15a2(0x1b7)],'validInstallation':validInstallation}),devices[_0x32bd86][_0x5e15a2(0x23f)][_0x5e15a2(0x239)]==![]&&devices[_0x32bd86][_0x5e15a2(0x23f)][_0x5e15a2(0x323)]==_0x5e15a2(0x13f)&&temporaryAccess2FA(_0x32bd86,devices[_0x32bd86]['ip']);}function setSessionTimeout(_0x407896,_0x39f619){const _0x49bd77=_0x4e086b;let _0x5980b8;if(_0x407896=='login')_0x5980b8=loginExpiry*0x3c*0x3e8;else _0x5980b8=devices[_0x39f619][_0x49bd77(0x28e)]['expiry']*0x3c*0x3e8-(new Date()[_0x49bd77(0x197)]()-devices[_0x39f619][_0x49bd77(0x28e)]['timestamp']);if(devices[_0x39f619][_0x49bd77(0x284)])clearTimeout(devices[_0x39f619][_0x49bd77(0x284)]);devices[_0x39f619]['pidExpireLogin']=setTimeout(()=>{const _0x5d8bd3=_0x49bd77;if(devices[_0x39f619]['pidRefreshToken'])clearTimeout(devices[_0x39f619][_0x5d8bd3(0x211)]);removeSocketListeners(_0x39f619),addBlacklist(_0x39f619),devices[_0x39f619][_0x5d8bd3(0x28e)]=null,devices[_0x39f619][_0x5d8bd3(0x15a)]=null,devices[_0x39f619][_0x5d8bd3(0x23f)][_0x5d8bd3(0x19f)]=null,logger[_0x5d8bd3(0x210)](_0x5d8bd3(0x11d)+_0x39f619[_0x5d8bd3(0x25a)](-0x8)),devices[_0x39f619][_0x5d8bd3(0x23f)]=validateAccess(devices[_0x39f619][_0x5d8bd3(0x23f)][_0x5d8bd3(0x19f)],_0x39f619),!(devices[_0x39f619][_0x5d8bd3(0x23f)]['allow']&&devices[_0x39f619][_0x5d8bd3(0x23f)]['reason']==_0x5d8bd3(0x150))&&(_0x407896==_0x5d8bd3(0x2fe)?io['to'](_0x39f619)[_0x5d8bd3(0x176)](_0x5d8bd3(0x1c5),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x39f619)[_0x5d8bd3(0x176)](_0x5d8bd3(0x1c5),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x39f619][_0x5d8bd3(0x23f)]['token']=null;},_0x5980b8);}function setTokenRefresh(_0x34783b){const _0x34348b=_0x4e086b;if(devices[_0x34783b][_0x34348b(0x211)])clearTimeout(devices[_0x34783b][_0x34348b(0x211)]);devices[_0x34783b][_0x34348b(0x211)]=setTimeout(()=>{const _0x6213f0=_0x34348b;getClientsWithUuid(_0x34783b)[_0x6213f0(0x1d5)]!=0x0?(devices[_0x34783b][_0x6213f0(0x23f)]=refreshToken(_0x34783b),io['to'](_0x34783b)[_0x6213f0(0x176)](_0x6213f0(0x1c5),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x34783b][_0x6213f0(0x23f)],'externalip':devices[_0x34783b]['ip'],'publicKey':secure[_0x6213f0(0x170)],'validInstallation':validInstallation}),setTokenRefresh(_0x34783b)):clearTimeout(devices[_0x34783b][_0x6213f0(0x211)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x55f15c){const _0x342db0=_0x4e086b,_0x2cab81=getClient(_0x55f15c['id'])[_0x342db0(0x2e2)];_0x55f15c[_0x342db0(0x176)]('bots',config),_0x55f15c[_0x342db0(0x176)](_0x342db0(0x11f),cleanSettings()),_0x55f15c['on'](_0x342db0(0x2ce),_0x42a133=>{const _0x51c396=_0x342db0;if(validateAccess(_0x42a133,_0x2cab81)[_0x51c396(0x239)])addBot();else logger[_0x51c396(0x2e0)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x55f15c['on']('update-bot',(_0x501d35,_0x46dce0)=>{const _0x2d2686=_0x342db0;if(validateAccess(_0x46dce0,_0x2cab81)[_0x2d2686(0x239)])toggleBot(_0x501d35['botID'],_0x501d35[_0x2d2686(0x1c5)],_0x501d35[_0x2d2686(0x188)]);else logger[_0x2d2686(0x2e0)](_0x2d2686(0x1e2));}),_0x55f15c['on'](_0x342db0(0x2af),(_0x1a1535,_0x14f3a9)=>{const _0x2928cf=_0x342db0;if(validateAccess(_0x14f3a9,_0x2cab81)[_0x2928cf(0x239)])toggleBotMode(_0x1a1535);else logger[_0x2928cf(0x2e0)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x55f15c['on'](_0x342db0(0x2a0),(_0x1c4c85,_0x25f783)=>{const _0x3e7fb5=_0x342db0;if(validateAccess(_0x25f783,_0x2cab81)[_0x3e7fb5(0x239)])deleteBot(_0x1c4c85);else logger[_0x3e7fb5(0x2e0)](_0x3e7fb5(0x1de));}),_0x55f15c['on'](_0x342db0(0x1b0),(_0x226a1d,_0x46ab37)=>{const _0x3a186d=_0x342db0;if(validateAccess(_0x46ab37,_0x2cab81)[_0x3a186d(0x239)])storeSettings(_0x226a1d,!![]);else logger['full'](_0x3a186d(0x12f));}),_0x55f15c['on'](_0x342db0(0x1c4),_0x3c59a6=>{const _0x567c5d=_0x342db0;if(validateAccess(_0x3c59a6,_0x2cab81)[_0x567c5d(0x239)])updateBB(_0x567c5d(0x168));else logger[_0x567c5d(0x2e0)](_0x567c5d(0x198));}),_0x55f15c['on'](_0x342db0(0x125),_0x335e99=>{const _0x388694=_0x342db0;if(validateAccess(_0x335e99,_0x2cab81)[_0x388694(0x239)])updateBB(_0x388694(0x166));else logger[_0x388694(0x2e0)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x55f15c['on'](_0x342db0(0x311),_0x2d5cbd=>{const _0x162105=_0x342db0;if(validateAccess(_0x2d5cbd,_0x2cab81)[_0x162105(0x239)]){const _0x216061=getClient(_0x55f15c['id']);if(_0x216061)getBackupFiles(_0x216061['uuid']);else logger[_0x162105(0x2e0)](_0x162105(0x209));}else logger[_0x162105(0x2e0)](_0x162105(0x2c0));}),_0x55f15c['on'](_0x342db0(0x1a6),(_0x4950ca,_0x596f4c)=>{const _0x2daee2=_0x342db0;if(validateAccess(_0x596f4c,_0x2cab81)[_0x2daee2(0x239)])restoreBackupFile(_0x4950ca);else logger['full'](_0x2daee2(0x1cb));}),_0x55f15c['on']('get-messages',_0x3f93e4=>{const _0x5ecdbb=_0x342db0;if(validateAccess(_0x3f93e4,_0x2cab81)[_0x5ecdbb(0x239)])getMessages();else logger[_0x5ecdbb(0x2e0)](_0x5ecdbb(0x1e1));}),_0x55f15c['on']('confirm-message',(_0x5717f8,_0x4ed0f5)=>{const _0x2101b3=_0x342db0;if(validateAccess(_0x4ed0f5,_0x2cab81)[_0x2101b3(0x239)])confirmMessage(_0x5717f8);else logger[_0x2101b3(0x2e0)](_0x2101b3(0x1e9));}),_0x55f15c['on'](_0x342db0(0x196),_0x46e764=>{const _0x461c86=_0x342db0;if(validateAccess(_0x46e764,_0x2cab81)[_0x461c86(0x239)]){if(devices[_0x2cab81][_0x461c86(0x211)])clearTimeout(devices[_0x2cab81][_0x461c86(0x211)]);if(devices[_0x2cab81][_0x461c86(0x284)])clearTimeout(devices[_0x2cab81][_0x461c86(0x284)]);removeSocketListeners(getClient(_0x55f15c['id'])[_0x461c86(0x2e2)]),addBlacklist(_0x2cab81),devices[_0x2cab81][_0x461c86(0x28e)]=null,devices[_0x2cab81][_0x461c86(0x15a)]=null,devices[_0x2cab81]['access'][_0x461c86(0x19f)]=null,logger[_0x461c86(0x210)]('Logged\x20out\x20user\x20...'+_0x2cab81[_0x461c86(0x25a)](-0x8)),io['to'](getClient(_0x55f15c['id'])[_0x461c86(0x2e2)])[_0x461c86(0x176)](_0x461c86(0x1c5),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x461c86(0x2e0)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x47361d){const _0x95c48=_0x4e086b,_0x3a73e9=getClient(_0x47361d['id'])[_0x95c48(0x1ca)],_0x435fef=getClient(_0x47361d['id'])['uuid'];_0x47361d['on'](_0x95c48(0x24a),(_0x428e8c,_0x300929)=>{const _0x3615e4=_0x95c48;if(validateAccess(_0x300929,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x3615e4(0x20e)]({'function':_0x3615e4(0x141),'args':_0x428e8c});}else logger[_0x3615e4(0x2e0)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x47361d['on'](_0x95c48(0x1bc),(_0x247075,_0x5f2753)=>{const _0x1e121b=_0x95c48;if(validateAccess(_0x5f2753,_0x435fef)[_0x1e121b(0x239)]){if(pid[_0x3a73e9])pid[_0x3a73e9]['send']({'function':_0x1e121b(0x243),'args':_0x247075});}else logger['full'](_0x1e121b(0x265));}),_0x47361d['on'](_0x95c48(0x27c),(_0x57450e,_0x10c24c)=>{const _0x5464b8=_0x95c48;if(validateAccess(_0x10c24c,_0x435fef)[_0x5464b8(0x239)]){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x5464b8(0x20e)]({'function':_0x5464b8(0x28b),'args':_0x57450e});}else logger[_0x5464b8(0x2e0)](_0x5464b8(0x27a));}),_0x47361d['on'](_0x95c48(0x262),(_0x58d012,_0x100e14)=>{const _0x2d56b4=_0x95c48;if(validateAccess(_0x100e14,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x2d56b4(0x20e)]({'function':_0x2d56b4(0x258),'args':_0x58d012});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x47361d['on'](_0x95c48(0x2e8),(_0x4888a4,_0x317188)=>{const _0x9d83c9=_0x95c48;if(validateAccess(_0x317188,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x9d83c9(0x20e)]({'function':_0x9d83c9(0x21c),'args':_0x4888a4});}else logger[_0x9d83c9(0x2e0)](_0x9d83c9(0x177));}),_0x47361d['on'](_0x95c48(0x266),(_0x54aca6,_0x4225f5)=>{const _0x5c110f=_0x95c48;if(validateAccess(_0x4225f5,_0x435fef)[_0x5c110f(0x239)]){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x5c110f(0x20e)]({'function':_0x5c110f(0x285),'args':_0x54aca6});}else logger['full'](_0x5c110f(0x1a5));}),_0x47361d['on']('reset-history',_0x47d2a9=>{const _0x35ce2a=_0x95c48;if(validateAccess(_0x47d2a9,_0x435fef)[_0x35ce2a(0x239)]){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x35ce2a(0x20e)]({'function':_0x35ce2a(0x1a3),'args':null});}else logger[_0x35ce2a(0x2e0)](_0x35ce2a(0x147));}),_0x47361d['on'](_0x95c48(0x294),_0x4b0535=>{const _0x469f36=_0x95c48;if(validateAccess(_0x4b0535,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x469f36(0x20e)]({'function':_0x469f36(0x220),'args':null});}else logger[_0x469f36(0x2e0)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x47361d['on']('place-order',(_0x525431,_0x4cf73b)=>{const _0x10a163=_0x95c48;if(validateAccess(_0x4cf73b,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x10a163(0x20e)]({'function':_0x10a163(0x161),'args':_0x525431});}else logger[_0x10a163(0x2e0)](_0x10a163(0x191));}),_0x47361d['on']('cancel-loading',_0x2aeb67=>{const _0x22433f=_0x95c48;if(validateAccess(_0x2aeb67,_0x435fef)['allow']){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x22433f(0x20e)]({'function':_0x22433f(0x1eb),'args':null});}else logger[_0x22433f(0x2e0)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x47361d['on'](_0x95c48(0x2d9),_0x2a7058=>{const _0x2c23f2=_0x95c48;if(validateAccess(_0x2a7058,_0x435fef)[_0x2c23f2(0x239)]){if(pid[_0x3a73e9])pid[_0x3a73e9][_0x2c23f2(0x20e)]({'function':_0x2c23f2(0x18b),'args':null});}else logger[_0x2c23f2(0x2e0)](_0x2c23f2(0x2d7));}),_0x47361d['on'](_0x95c48(0x1c4),_0x226243=>{const _0x4a0bd5=_0x95c48;if(validateAccess(_0x226243,_0x435fef)[_0x4a0bd5(0x239)])updateBB(_0x4a0bd5(0x168));else logger[_0x4a0bd5(0x2e0)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x47361d['on'](_0x95c48(0x131),_0x4cbd5f=>{const _0x79df2e=_0x95c48;if(validateAccess(_0x4cbd5f,_0x435fef)[_0x79df2e(0x239)])getMessages();else logger[_0x79df2e(0x2e0)](_0x79df2e(0x1e1));}),_0x47361d['on'](_0x95c48(0x1f5),(_0x54cc4f,_0x40ff72)=>{const _0x29370f=_0x95c48;if(validateAccess(_0x40ff72,_0x435fef)[_0x29370f(0x239)])confirmMessage(_0x54cc4f);else logger['full'](_0x29370f(0x1e9));}),_0x47361d['on'](_0x95c48(0x196),_0x3ea256=>{const _0x26027b=_0x95c48;if(validateAccess(_0x3ea256,_0x435fef)[_0x26027b(0x239)]){if(devices[_0x435fef][_0x26027b(0x211)])clearTimeout(devices[_0x435fef][_0x26027b(0x211)]);if(devices[_0x435fef][_0x26027b(0x284)])clearTimeout(devices[_0x435fef][_0x26027b(0x284)]);removeSocketListeners(getClient(_0x47361d['id'])[_0x26027b(0x2e2)]),addBlacklist(_0x435fef),devices[_0x435fef][_0x26027b(0x28e)]=null,devices[_0x435fef]['telegram2FaApproval']=null,devices[_0x435fef][_0x26027b(0x23f)]['token']=null,logger[_0x26027b(0x210)]('Logged\x20out\x20user\x20...'+_0x435fef['slice'](-0x8)),io['to'](getClient(_0x47361d['id'])[_0x26027b(0x2e2)])[_0x26027b(0x176)](_0x26027b(0x1c5),{'access':{'allow':![],'reason':_0x26027b(0x319),'token':null}});}else logger[_0x26027b(0x2e0)](_0x26027b(0x295));});}function removeSocketListeners(_0x4aeaef){const _0x7c2477=_0x4e086b;getClientsWithUuid(_0x4aeaef)[_0x7c2477(0x167)](_0x2a7697=>{const _0x5dc5a5=_0x7c2477;getSocket(_0x2a7697['id'])[_0x5dc5a5(0x2ee)]();});}function cleanSettings(){const _0x56a78a=_0x4e086b;let _0x54b0bb=settings;return settings[_0x56a78a(0x2c7)]&&settings[_0x56a78a(0x2c7)]!=''&&(_0x54b0bb={..._0x54b0bb,'telegramToken':_0x56a78a(0x296)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x54b0bb={..._0x54b0bb,'bbPassword':_0x56a78a(0x296)}),settings[_0x56a78a(0x2b4)]&&settings[_0x56a78a(0x2b4)]!=''&&(_0x54b0bb={..._0x54b0bb,'marketcapApi':_0x56a78a(0x296)}),(settings['bbPassword']&&settings['bbPassword']==_0x56a78a(0x178)||settings['telegramToken']&&settings['telegramToken']=='***'||settings[_0x56a78a(0x2b4)]&&settings[_0x56a78a(0x2b4)]==_0x56a78a(0x178))&&(_0x54b0bb={..._0x54b0bb,'restored':{'password':settings['bbPassword']==_0x56a78a(0x178),'telegram':settings['telegramToken']==_0x56a78a(0x178),'marketcap':settings['marketcapApi']==_0x56a78a(0x178)}}),_0x54b0bb;}async function updateBB(_0x36b4ca){const _0x4c635c=_0x4e086b;await backupConfigFiles(),installingUpdate=!![],config[_0x4c635c(0x167)](_0x1ea154=>{const _0x4e6393=_0x4c635c;restartBot(_0x1ea154[_0x4e6393(0x27d)]);});if(_0x36b4ca==_0x4c635c(0x168))process[_0x4c635c(0x20e)]({'update':!![],'environment':environment},_0xe405b0=>{});else _0x36b4ca==_0x4c635c(0x166)&&process[_0x4c635c(0x20e)]({'reinstall':!![],'environment':environment},_0x5f2801=>{});}function startBot(_0x267b06,_0x1bb1a3,_0x389b33){const _0x4f52fe=_0x4e086b;if(debugging)_0x267b06[_0x4f52fe(0x1db)]('-d');let _0x36285f=![];const _0x523f00=_0x267b06[0x0];_0x1bb1a3={..._0x1bb1a3,'stdio':[_0x4f52fe(0x15b),_0x4f52fe(0x15b),_0x4f52fe(0x15b),_0x4f52fe(0x1b1)]},pid[_0x523f00]=childProcess[_0x4f52fe(0x1ea)](botfile,_0x267b06,_0x1bb1a3),pid[_0x523f00]['on']('message',_0x5b3434=>{const _0x414c24=_0x4f52fe;switch(Object[_0x414c24(0x279)](_0x5b3434)[0x0]){case _0x414c24(0x1ce):updateBotName(_0x523f00,_0x5b3434[_0x414c24(0x1ce)]);break;case _0x414c24(0x142):updateBotManager();break;case _0x414c24(0x1c5):updateStatus(_0x523f00,_0x5b3434[_0x414c24(0x1c5)]);break;case'live':updateLive(_0x523f00,_0x5b3434[_0x414c24(0x188)]);break;case _0x414c24(0x302):updateLive(_0x523f00,_0x5b3434[_0x414c24(0x302)]),io['to'](_0x523f00)[_0x414c24(0x176)](_0x414c24(0x1c5),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x414c24(0x288):_0x5b3434[_0x414c24(0x288)]==_0x414c24(0x173)&&restartBot(_0x523f00);_0x5b3434[_0x414c24(0x288)]==_0x414c24(0x184)&&toggleBot(_0x523f00,_0x414c24(0x121),'stopped');break;case _0x414c24(0x21d):sendTelegramBot(_0x523f00,_0x5b3434[_0x414c24(0x21d)]);break;case _0x414c24(0x159):sendTelegramMsg(_0x5b3434['telegrammsg']);break;case _0x414c24(0x1c7):io['to'](_0x523f00)[_0x414c24(0x176)](_0x5b3434[_0x414c24(0x1c7)],_0x5b3434[_0x414c24(0x2a4)]);break;}}),pid[_0x523f00]['on'](_0x4f52fe(0x152),function(_0x267b36){if(_0x36285f)return;_0x36285f=!![],_0x389b33(_0x267b36);}),pid[_0x523f00]['on'](_0x4f52fe(0x1a4),async function(_0x3ac1e0){const _0x5b651b=_0x4f52fe;if(terminating)return;if(installingUpdate){logger[_0x5b651b(0x210)](_0x5b651b(0x2a5)),io[_0x5b651b(0x2d6)]();return;}if(_0x36285f)return;_0x36285f=!![],_0x389b33(null);const _0x54e169=dbConfig[_0x5b651b(0x12d)]('bots')[_0x5b651b(0x1c0)]({'botID':_0x523f00})[_0x5b651b(0x226)]();_0x54e169&&(_0x54e169[_0x5b651b(0x1c5)]==_0x5b651b(0x2bd)||_0x54e169[_0x5b651b(0x1c5)]==_0x5b651b(0x2b7))&&(await sleep(0x3e8),updateLive(_0x523f00,_0x5b651b(0x23a)),logger[_0x5b651b(0x2e0)]('Restarting\x20Bot\x20'+_0x523f00),startBot([_0x523f00,userID],{'cwd':bbpath},function(_0xfbc370){if(_0xfbc370)logger['full'](_0xfbc370);}));});}function stopBot(_0x57ee29){const _0x1d8c40=_0x4e086b;getClientsWithBotID(_0x57ee29)[_0x1d8c40(0x167)](_0x37dc27=>{getSocket(_0x37dc27['id'])['disconnect'](!![]),removeClient(_0x37dc27['id']);}),pid[_0x57ee29]&&(pid[_0x57ee29][_0x1d8c40(0x184)](),pid[_0x57ee29]=null);}function stopAllBots(){const _0x429155=_0x4e086b;terminating=!![];const _0xe5ea8f=getEnabledBots();_0xe5ea8f[_0x429155(0x167)](_0x500dcf=>{const _0x1d798a=_0x429155;stopBot(_0x500dcf[_0x1d798a(0x27d)]);});}function restartBot(_0x115936){if(pid[_0x115936])pid[_0x115936]['kill']();}function addBot(){const _0x3426a3=_0x4e086b;let _0x1ac87a;for(let _0x2076fc=0x1;_0x2076fc<0x3e9;_0x2076fc++){_0x1ac87a=_0x2076fc[_0x3426a3(0x16a)]()[_0x3426a3(0x202)](0x3,'0');let _0x3487c7=config[_0x3426a3(0x1c0)](_0x25f6e7=>_0x25f6e7['botID']==_0x1ac87a);if(!_0x3487c7)break;}if(_0x1ac87a===_0x3426a3(0x1bb)){logger[_0x3426a3(0x2e0)](_0x3426a3(0x223));return;}logger[_0x3426a3(0x2e0)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x1ac87a),dbConfig[_0x3426a3(0x12d)](_0x3426a3(0x264))[_0x3426a3(0x1db)]({'botID':_0x1ac87a,'botname':_0x3426a3(0x1f7)+_0x1ac87a,'status':_0x3426a3(0x2b7),'live':''})['write'](),startBot([_0x1ac87a,userID],{'cwd':bbpath},function(_0x68977b){const _0x43b402=_0x3426a3;if(_0x68977b)logger[_0x43b402(0x2e0)](_0x68977b);}),config=getConfiguration(),io['to'](_0x3426a3(0x24e))[_0x3426a3(0x176)](_0x3426a3(0x264),config),broadcastToBots(_0x3426a3(0x264),JSON[_0x3426a3(0x28a)](config));}function deleteBot(_0x464cfd){const _0x5ae6ae=_0x4e086b;getClientsWithBotID(_0x464cfd)[_0x5ae6ae(0x167)](_0x9ae9cd=>{const _0xb05f66=_0x5ae6ae;getSocket(_0x9ae9cd['id'])[_0xb05f66(0x1ba)](!![]),removeClient(_0x9ae9cd['id']);}),dbConfig[_0x5ae6ae(0x12d)](_0x5ae6ae(0x264))[_0x5ae6ae(0x227)]({'botID':_0x464cfd})['write'](),logger[_0x5ae6ae(0x2e0)](_0x5ae6ae(0x14a)+_0x464cfd),stopBot(_0x464cfd);try{if(fs[_0x5ae6ae(0x169)](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x1e3))))fs[_0x5ae6ae(0x17c)](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x1e3)));if(fs[_0x5ae6ae(0x169)](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x1ef))))fs[_0x5ae6ae(0x17c)](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x1ef)));if(fs['existsSync'](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x2d0))))fs['unlinkSync'](path['join'](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x2d0)));if(fs[_0x5ae6ae(0x169)](path[_0x5ae6ae(0x1e8)](configpath,'bot-'+_0x464cfd+_0x5ae6ae(0x257))))fs[_0x5ae6ae(0x17c)](path[_0x5ae6ae(0x1e8)](configpath,_0x5ae6ae(0x18a)+_0x464cfd+_0x5ae6ae(0x257)));}catch(_0xca5e91){if(_0xca5e91)logger[_0x5ae6ae(0x2e0)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0xca5e91);}config=getConfiguration(),io['to'](_0x5ae6ae(0x24e))[_0x5ae6ae(0x176)]('bots',config),broadcastToBots(_0x5ae6ae(0x264),JSON[_0x5ae6ae(0x28a)](config));}function toggleBot(_0x36abcf,_0x3a42e2,_0xae2b1a){const _0x2a632b=_0x4e086b;dbConfig[_0x2a632b(0x12d)](_0x2a632b(0x264))[_0x2a632b(0x1c0)]({'botID':_0x36abcf})[_0x2a632b(0x204)]({'status':_0x3a42e2})[_0x2a632b(0x204)]({'live':_0xae2b1a})[_0x2a632b(0x2f5)]();if(_0x3a42e2==_0x2a632b(0x2bd)||_0x3a42e2==_0x2a632b(0x2b7))logger['full'](_0x2a632b(0x2a2)+_0x36abcf),startBot([_0x36abcf,userID],{'cwd':bbpath},function(_0x4458fc){if(_0x4458fc)logger['full'](_0x4458fc);});else(_0x3a42e2=='disabled'||_0x3a42e2==_0x2a632b(0x149))&&(logger['full']('Disabled\x20Bot\x20'+_0x36abcf),stopBot(_0x36abcf));config=getConfiguration(),io['to'](_0x2a632b(0x24e))[_0x2a632b(0x176)](_0x2a632b(0x264),config),broadcastToBots(_0x2a632b(0x264),JSON[_0x2a632b(0x28a)](config));}function toggleStatus(_0x5a781b){const _0x4e537b=_0x4e086b;let _0x929b40=dbConfig[_0x4e537b(0x12d)](_0x4e537b(0x264))[_0x4e537b(0x1c0)]({'botID':_0x5a781b})[_0x4e537b(0x226)](),_0x14fc9b;if(_0x929b40[_0x4e537b(0x1c5)]===_0x4e537b(0x2bd))_0x14fc9b=_0x4e537b(0x121);else{if(_0x929b40[_0x4e537b(0x1c5)]==='new')_0x14fc9b=_0x4e537b(0x149);else{if(_0x929b40[_0x4e537b(0x1c5)]==='new-disabled')_0x14fc9b=_0x4e537b(0x2b7);else{if(_0x929b40[_0x4e537b(0x1c5)]===_0x4e537b(0x121))_0x14fc9b=_0x4e537b(0x2bd);}}}return _0x14fc9b;}function updateStatus(_0x48fd91,_0x352104){const _0x454843=_0x4e086b;dbConfig['get'](_0x454843(0x264))[_0x454843(0x1c0)]({'botID':_0x48fd91})['assign']({'status':_0x352104})[_0x454843(0x2f5)](),config=getConfiguration(),io['to'](_0x454843(0x24e))['emit'](_0x454843(0x264),config),broadcastToBots(_0x454843(0x264),JSON[_0x454843(0x28a)](config));}function updateLive(_0x182c6c,_0x102ce9){const _0x1b255e=_0x4e086b;dbConfig[_0x1b255e(0x12d)]('bots')[_0x1b255e(0x1c0)]({'botID':_0x182c6c})[_0x1b255e(0x204)]({'live':_0x102ce9})['write'](),config=getConfiguration(),io['to'](_0x1b255e(0x24e))[_0x1b255e(0x176)](_0x1b255e(0x264),config),broadcastToBots(_0x1b255e(0x264),JSON[_0x1b255e(0x28a)](config));}function updateBotName(_0x291869,_0x4fc43e){const _0x283789=_0x4e086b;dbConfig[_0x283789(0x12d)](_0x283789(0x264))[_0x283789(0x1c0)]({'botID':_0x291869})[_0x283789(0x204)]({'botname':_0x4fc43e})['write'](),config=getConfiguration(),io['to'](_0x283789(0x24e))[_0x283789(0x176)]('bots',config),broadcastToBots(_0x283789(0x264),JSON[_0x283789(0x28a)](config));}function updateBotManager(){const _0xb31ca0=_0x4e086b;config=getConfiguration(),io['to'](_0xb31ca0(0x24e))[_0xb31ca0(0x176)](_0xb31ca0(0x264),config),broadcastToBots('bots',JSON[_0xb31ca0(0x28a)](config));}function toggleBotMode(_0x1c99ab){const _0x1d8913=_0x4e086b;if(pid[_0x1c99ab])pid[_0x1c99ab][_0x1d8913(0x20e)]({'function':_0x1d8913(0x154),'args':null});else{const _0xdfa72f=configpath+_0x1d8913(0x18a)+_0x1c99ab+_0x1d8913(0x1e3),_0xdebb1d=fs[_0x1d8913(0x2f7)](_0xdfa72f),_0x33fc5b=JSON[_0x1d8913(0x183)](_0xdebb1d),_0x221d49=_0x33fc5b[_0x1d8913(0x1ca)][0x0]['headless'];_0x33fc5b[_0x1d8913(0x1ca)][0x0][_0x1d8913(0x11c)]=!_0x221d49;const _0x2ab5cc=JSON[_0x1d8913(0x28a)](_0x33fc5b,null,0x2);fs['writeFileSync'](_0xdfa72f,_0x2ab5cc),config=getConfiguration(),io['to'](_0x1d8913(0x24e))['emit'](_0x1d8913(0x264),config),broadcastToBots(_0x1d8913(0x264),JSON[_0x1d8913(0x28a)](config));}}function validateTelegram(_0x11906b){const _0x3ac6c3=_0x4e086b;if(_0x11906b[_0x3ac6c3(0x217)][_0x3ac6c3(0x305)]!=settings['telegramUsername']&&'@'+_0x11906b[_0x3ac6c3(0x217)][_0x3ac6c3(0x305)]!=settings['telegramUsername']||_0x11906b[_0x3ac6c3(0x2f9)]['id']!=settings[_0x3ac6c3(0x1d9)])return sendTelegram(_0x11906b[_0x3ac6c3(0x2f9)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x3ac6c3(0x17d)}),![];return!![];}async function initTelegram(){const _0x5b3860=_0x4e086b;if(tgBot)tgBot[_0x5b3860(0x288)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x5b3860(0x2c7)]);let _0x655f20=_0x5b3860(0x276);_0x655f20+='\x0a',_0x655f20+=_0x5b3860(0x2bb),_0x655f20+=_0x5b3860(0x2b9),_0x655f20+=_0x5b3860(0x1e5),_0x655f20+=_0x5b3860(0x2a6),_0x655f20+='/on\x20-\x20start\x20bot(s)\x0a',_0x655f20+=_0x5b3860(0x2ec),_0x655f20+=_0x5b3860(0x19d),_0x655f20+='/names\x20-\x20show\x20bot\x20names\x0a',_0x655f20+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x655f20+=_0x5b3860(0x1b9),_0x655f20+=_0x5b3860(0x26a),_0x655f20+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x655f20+=_0x5b3860(0x28f),_0x655f20+=_0x5b3860(0x1c6);let _0x940067=_0x5b3860(0x2f8);_0x940067+='\x0a',_0x940067+=_0x655f20,tgBot[_0x5b3860(0x310)]((_0x1a5335,_0x319a28)=>{const _0x414dee=_0x5b3860;logger['simple'](getTimeStamp()+_0x414dee(0x2f4)),logger['debug'](_0x414dee(0x20f),_0x1a5335);}),tgBot[_0x5b3860(0x26b)](async(_0x51176d,_0x3c7a18)=>{const _0x1f1215=_0x5b3860;if(!(!settings[_0x1f1215(0x1d9)]&&_0x51176d['update'][_0x1f1215(0x160)][_0x1f1215(0x1f1)]=='/start')){if(!validateTelegram(_0x51176d))return;}_0x3c7a18();}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x272),async _0x1452f2=>{const _0xc1c24b=_0x5b3860;if(!settings[_0xc1c24b(0x1d9)])updateSetting(_0xc1c24b(0x1d9),_0x1452f2[_0xc1c24b(0x2f9)]['id']);updateSetting(_0xc1c24b(0x2d5),!![]);if(!validateTelegram(_0x1452f2))return;await sendTelegram(_0x1452f2[_0xc1c24b(0x2f9)]['id'],_0x940067);}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x267),async _0x5c3306=>{const _0x38cc99=_0x5b3860;updateSetting(_0x38cc99(0x2d5),!![]),await sendTelegram(_0x5c3306['chat']['id'],'Notifications\x20enabled');}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x127),async _0x13316d=>{const _0x24c19b=_0x5b3860;await sendTelegram(_0x13316d[_0x24c19b(0x2f9)]['id'],'Notifications\x20disabled'),updateSetting(_0x24c19b(0x2d5),![]);}),tgBot[_0x5b3860(0x2cd)]('config',async _0x10288e=>{const _0xc9bcc2=_0x5b3860,_0x3791a5=Markup[_0xc9bcc2(0x2e7)]([Markup[_0xc9bcc2(0x278)][_0xc9bcc2(0x287)]('Orders',_0xc9bcc2(0x2e1)),Markup['button']['callback'](_0xc9bcc2(0x1b5),_0xc9bcc2(0x25e)),Markup[_0xc9bcc2(0x278)][_0xc9bcc2(0x287)](_0xc9bcc2(0x29f),_0xc9bcc2(0x1fd))]);_0x10288e[_0xc9bcc2(0x312)](_0xc9bcc2(0x28d),_0x3791a5);}),tgBot[_0x5b3860(0x15c)](_0x5b3860(0x2e1),async _0x1febce=>{const _0x5bb4b5=_0x5b3860;_0x1febce['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x5bb4b5(0x136)),updateSetting(_0x5bb4b5(0x2d5),!![]),await sendTelegram(_0x1febce[_0x5bb4b5(0x2f9)]['id'],_0x5bb4b5(0x325));}),tgBot['action']('config_alerts',async _0x568d74=>{const _0x230ebc=_0x5b3860;_0x568d74['editMessageReplyMarkup'](),updateSetting('telegramEvents','alerts'),updateSetting(_0x230ebc(0x2d5),!![]),await sendTelegram(_0x568d74[_0x230ebc(0x2f9)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot['action'](_0x5b3860(0x1fd),async _0x5dcf1e=>{const _0x3141d4=_0x5b3860;_0x5dcf1e[_0x3141d4(0x140)](),updateSetting(_0x3141d4(0x251),_0x3141d4(0x1a8)),updateSetting(_0x3141d4(0x2d5),!![]),await sendTelegram(_0x5dcf1e['chat']['id'],_0x3141d4(0x1a7));}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x1c5),async _0x219311=>{const _0x5c8eaf=_0x5b3860,_0x4599d7=getBotsWithMode();let _0x3fceec=_0x5c8eaf(0x19e);config[_0x5c8eaf(0x167)](_0x202329=>{const _0x46c401=_0x5c8eaf,_0x64b7e1=_0x4599d7[_0x46c401(0x1c0)](_0x2e258c=>_0x2e258c[_0x46c401(0x27d)]==_0x202329[_0x46c401(0x27d)])[_0x46c401(0x224)];_0x3fceec+=_0x46c401(0x1f7)+_0x202329[_0x46c401(0x27d)]+':\x20'+_0x202329[_0x46c401(0x1c5)]+_0x46c401(0x2ff)+_0x64b7e1+_0x46c401(0x2ff)+_0x202329[_0x46c401(0x188)]+'\x0a';}),_0x3fceec+='\x0a',_0x3fceec+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3fceec+=!settings['telegramEnabled']?_0x5c8eaf(0x268):_0x5c8eaf(0x2d1),_0x3fceec+=settings[_0x5c8eaf(0x2d5)]?settings[_0x5c8eaf(0x251)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings['telegramEvents']+_0x5c8eaf(0x27e):'',await sendTelegram(_0x219311[_0x5c8eaf(0x2f9)]['id'],_0x3fceec,{'parse_mode':_0x5c8eaf(0x17d)});}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x173),async _0x3c5110=>{const _0x716f51=_0x5b3860,_0x31c36b=getEnabledBots();if(_0x31c36b[_0x716f51(0x1d5)]==0x0)await sendTelegram(_0x3c5110[_0x716f51(0x2f9)]['id'],_0x716f51(0x244));else{if(_0x31c36b[_0x716f51(0x1d5)]>0x1)_0x31c36b[_0x716f51(0x1db)]({'botID':_0x716f51(0x1a8)});let _0x56e313=[],_0x5ac788=[];const _0x5c7495=_0x31c36b[_0x716f51(0x1d5)]%0x4==0x0||_0x31c36b[_0x716f51(0x1d5)]%0x4==0x3||_0x31c36b['length']%0x3==0x1?0x4:0x3;let _0x3f0ef3=0x0;_0x31c36b[_0x716f51(0x167)]((_0x18b76d,_0x2bbd24)=>{const _0x518c36=_0x716f51;if(_0x2bbd24%_0x5c7495==0x0)_0x5ac788=[];_0x5ac788[_0x518c36(0x1db)](Markup['button'][_0x518c36(0x287)](_0x18b76d['botID']==_0x518c36(0x1a8)?_0x518c36(0x1fb):_0x518c36(0x1f7)+_0x18b76d[_0x518c36(0x27d)],_0x518c36(0x1df)+_0x18b76d[_0x518c36(0x27d)])),_0x2bbd24%_0x5c7495==0x0&&(_0x56e313[_0x3f0ef3]=_0x5ac788,_0x3f0ef3++);});const _0x36a368=Markup['inlineKeyboard'](_0x56e313);_0x3c5110[_0x716f51(0x312)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x36a368);}}),tgBot[_0x5b3860(0x15c)](/restart_(.+)/,async _0x5201a0=>{const _0x1fb977=_0x5b3860,_0x4ef4f4=_0x5201a0[_0x1fb977(0x1d2)][0x1];_0x5201a0['editMessageReplyMarkup'](),_0x4ef4f4==_0x1fb977(0x1a8)?config['forEach'](_0x43e41e=>{const _0x3f2381=_0x1fb977;restartBot(_0x43e41e[_0x3f2381(0x27d)]);}):restartBot(_0x4ef4f4);}),tgBot[_0x5b3860(0x2cd)]('on',async _0x425a37=>{const _0x2d1c2d=_0x5b3860,_0x3285d7=getDisabledBots();if(_0x3285d7[_0x2d1c2d(0x1d5)]==0x0)await sendTelegram(_0x425a37[_0x2d1c2d(0x2f9)]['id'],_0x2d1c2d(0x2f2));else{if(_0x3285d7['length']>0x1)_0x3285d7[_0x2d1c2d(0x1db)]({'botID':_0x2d1c2d(0x1a8)});let _0x4d41fa=[],_0x52b110=[];const _0xbadf92=_0x3285d7[_0x2d1c2d(0x1d5)]%0x4==0x0||_0x3285d7[_0x2d1c2d(0x1d5)]%0x4==0x3||_0x3285d7['length']%0x3==0x1?0x4:0x3;let _0x4e31d7=0x0;_0x3285d7[_0x2d1c2d(0x167)]((_0x489132,_0x443762)=>{const _0x3847fc=_0x2d1c2d;if(_0x443762%_0xbadf92==0x0)_0x52b110=[];_0x52b110[_0x3847fc(0x1db)](Markup[_0x3847fc(0x278)]['callback'](_0x489132['botID']=='all'?_0x3847fc(0x1fb):_0x3847fc(0x1f7)+_0x489132[_0x3847fc(0x27d)],_0x3847fc(0x2f0)+_0x489132[_0x3847fc(0x27d)])),_0x443762%_0xbadf92==0x0&&(_0x4d41fa[_0x4e31d7]=_0x52b110,_0x4e31d7++);});const _0x483b69=Markup['inlineKeyboard'](_0x4d41fa);_0x425a37[_0x2d1c2d(0x312)](_0x2d1c2d(0x286),_0x483b69);}}),tgBot[_0x5b3860(0x15c)](/on_(.+)/,async _0x4ff4c9=>{const _0x1f44ba=_0x5b3860,_0x56729e=_0x4ff4c9[_0x1f44ba(0x1d2)][0x1];_0x4ff4c9['editMessageReplyMarkup']();if(_0x56729e==_0x1f44ba(0x1a8)){const _0x49429f=getDisabledBots();await sendTelegram(_0x4ff4c9[_0x1f44ba(0x2f9)]['id'],_0x1f44ba(0x203)),_0x49429f['forEach'](_0x3a9adf=>{const _0x17e19f=_0x1f44ba;if(_0x3a9adf[_0x17e19f(0x27d)]!=_0x17e19f(0x1a8))toggleBot(_0x3a9adf[_0x17e19f(0x27d)],toggleStatus(_0x3a9adf[_0x17e19f(0x27d)]),'stopped');});}else await sendTelegram(_0x4ff4c9[_0x1f44ba(0x2f9)]['id'],_0x1f44ba(0x215)+_0x56729e),toggleBot(_0x56729e,toggleStatus(_0x56729e),_0x1f44ba(0x23a));}),tgBot[_0x5b3860(0x2cd)]('off',async _0x361e84=>{const _0x12c8de=_0x5b3860,_0x4f2c21=getEnabledBots();if(_0x4f2c21[_0x12c8de(0x1d5)]==0x0)await sendTelegram(_0x361e84[_0x12c8de(0x2f9)]['id'],_0x12c8de(0x244));else{if(_0x4f2c21[_0x12c8de(0x1d5)]>0x1)_0x4f2c21['push']({'botID':_0x12c8de(0x1a8)});let _0x3fb161=[],_0x1937fa=[];const _0x4bb409=_0x4f2c21[_0x12c8de(0x1d5)]%0x4==0x0||_0x4f2c21[_0x12c8de(0x1d5)]%0x4==0x3||_0x4f2c21[_0x12c8de(0x1d5)]%0x3==0x1?0x4:0x3;let _0x1a2b26=0x0;_0x4f2c21[_0x12c8de(0x167)]((_0x1bb38b,_0x864ba6)=>{const _0x285701=_0x12c8de;if(_0x864ba6%_0x4bb409==0x0)_0x1937fa=[];_0x1937fa[_0x285701(0x1db)](Markup[_0x285701(0x278)][_0x285701(0x287)](_0x1bb38b[_0x285701(0x27d)]=='all'?_0x285701(0x1fb):'Bot\x20'+_0x1bb38b[_0x285701(0x27d)],'off_'+_0x1bb38b[_0x285701(0x27d)])),_0x864ba6%_0x4bb409==0x0&&(_0x3fb161[_0x1a2b26]=_0x1937fa,_0x1a2b26++);});const _0x4deb54=Markup[_0x12c8de(0x2e7)](_0x3fb161);_0x361e84['reply'](_0x12c8de(0x180),_0x4deb54);}}),tgBot[_0x5b3860(0x15c)](/off_(.+)/,async _0x2b806=>{const _0x47d703=_0x5b3860,_0x1ba603=_0x2b806[_0x47d703(0x1d2)][0x1];_0x2b806[_0x47d703(0x140)]();if(_0x1ba603==_0x47d703(0x1a8)){const _0x49486f=getEnabledBots();await sendTelegram(_0x2b806[_0x47d703(0x2f9)]['id'],_0x47d703(0x2f6)),_0x49486f[_0x47d703(0x167)](_0x46b621=>{const _0x47c9a7=_0x47d703;if(_0x46b621[_0x47c9a7(0x27d)]!=_0x47c9a7(0x1a8))toggleBot(_0x46b621[_0x47c9a7(0x27d)],toggleStatus(_0x46b621[_0x47c9a7(0x27d)]),_0x47c9a7(0x23a));});}else await sendTelegram(_0x2b806[_0x47d703(0x2f9)]['id'],_0x47d703(0x250)+_0x1ba603),toggleBot(_0x1ba603,toggleStatus(_0x1ba603),_0x47d703(0x23a));}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x13d),async _0x596c69=>{const _0x31fb39=_0x5b3860,_0x29c836=getEnabledBots();if(_0x29c836['length']==0x0)await sendTelegram(_0x596c69['chat']['id'],_0x31fb39(0x244));else{if(_0x29c836[_0x31fb39(0x1d5)]>0x1){let _0x2c7365=[],_0x35982e=[];const _0x4ffab2=_0x29c836[_0x31fb39(0x1d5)]%0x4==0x0||_0x29c836[_0x31fb39(0x1d5)]%0x4==0x3||_0x29c836[_0x31fb39(0x1d5)]%0x3==0x1?0x4:0x3;let _0x59b90d=0x0;_0x29c836[_0x31fb39(0x167)]((_0x48e6e7,_0x10ea2d)=>{const _0x147e4b=_0x31fb39;if(_0x10ea2d%_0x4ffab2==0x0)_0x35982e=[];_0x35982e[_0x147e4b(0x1db)](Markup[_0x147e4b(0x278)][_0x147e4b(0x287)](_0x147e4b(0x1f7)+_0x48e6e7[_0x147e4b(0x27d)],_0x147e4b(0x2ef)+_0x48e6e7['botID'])),_0x10ea2d%_0x4ffab2==0x0&&(_0x2c7365[_0x59b90d]=_0x35982e,_0x59b90d++);});const _0x264ca3=Markup[_0x31fb39(0x2e7)](_0x2c7365);_0x596c69[_0x31fb39(0x312)](_0x31fb39(0x29e),_0x264ca3);}else{const _0x239d24=_0x29c836[0x0][_0x31fb39(0x27d)];if(pid[_0x239d24])pid[_0x239d24][_0x31fb39(0x20e)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x5b3860(0x15c)](/metrics_(.+)/,async _0x5d1c74=>{const _0x5b31ed=_0x5b3860,_0x1121ad=_0x5d1c74[_0x5b31ed(0x1d2)][0x1];_0x5d1c74[_0x5b31ed(0x140)]();if(pid[_0x1121ad])pid[_0x1121ad][_0x5b31ed(0x20e)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x5b3860(0x2cd)]('portfolio',async _0xdc1a8d=>{const _0x2d2cad=_0x5b3860,_0x1d5eb8=getEnabledBots();if(_0x1d5eb8[_0x2d2cad(0x1d5)]==0x0)await sendTelegram(_0xdc1a8d[_0x2d2cad(0x2f9)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1d5eb8[_0x2d2cad(0x1d5)]>0x1){let _0x59094c=[],_0x32bfe1=[];const _0x3c55a4=_0x1d5eb8[_0x2d2cad(0x1d5)]%0x4==0x0||_0x1d5eb8[_0x2d2cad(0x1d5)]%0x4==0x3||_0x1d5eb8[_0x2d2cad(0x1d5)]%0x3==0x1?0x4:0x3;let _0x258808=0x0;_0x1d5eb8[_0x2d2cad(0x167)]((_0x40a44a,_0x593fc0)=>{const _0x86b0e9=_0x2d2cad;if(_0x593fc0%_0x3c55a4==0x0)_0x32bfe1=[];_0x32bfe1[_0x86b0e9(0x1db)](Markup[_0x86b0e9(0x278)]['callback'](_0x86b0e9(0x1f7)+_0x40a44a[_0x86b0e9(0x27d)],_0x86b0e9(0x255)+_0x40a44a['botID'])),_0x593fc0%_0x3c55a4==0x0&&(_0x59094c[_0x258808]=_0x32bfe1,_0x258808++);});const _0x1e0c4d=Markup[_0x2d2cad(0x2e7)](_0x59094c);_0xdc1a8d[_0x2d2cad(0x312)](_0x2d2cad(0x14f),_0x1e0c4d);}else{const _0x1ccae9=_0x1d5eb8[0x0][_0x2d2cad(0x27d)];if(pid[_0x1ccae9])pid[_0x1ccae9][_0x2d2cad(0x20e)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x5b3860(0x15c)](/portfolio_(.+)/,async _0x560fb3=>{const _0x1ac47a=_0x5b3860,_0x1509d1=_0x560fb3[_0x1ac47a(0x1d2)][0x1];_0x560fb3[_0x1ac47a(0x140)]();if(pid[_0x1509d1])pid[_0x1509d1][_0x1ac47a(0x20e)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x168),async _0x1257aa=>{const _0x23d096=_0x5b3860;await getMessages();if(!updateAvailable)await sendTelegram(_0x1257aa[_0x23d096(0x2f9)]['id'],_0x23d096(0x228));else{if(!validInstallation)await sendTelegram(_0x1257aa['chat']['id'],_0x23d096(0x195));else{const _0x31e39b=Markup[_0x23d096(0x2e7)]([Markup[_0x23d096(0x278)][_0x23d096(0x287)](_0x23d096(0x18f),_0x23d096(0x237)),Markup[_0x23d096(0x278)]['callback']('No',_0x23d096(0x291))]);_0x1257aa[_0x23d096(0x312)](_0x23d096(0x242),_0x31e39b);}}}),tgBot['action'](/update_(.+)/,async _0x392cae=>{const _0x5955d4=_0x5b3860,_0x1930da=_0x392cae[_0x5955d4(0x1d2)][0x1];_0x392cae[_0x5955d4(0x140)](),_0x1930da=='yes'&&(await sendTelegram(_0x392cae[_0x5955d4(0x2f9)]['id'],_0x5955d4(0x2d2)),updateBB(_0x5955d4(0x168))),_0x1930da=='no'&&await sendTelegram(_0x392cae[_0x5955d4(0x2f9)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x166),async _0x113537=>{const _0x5c7bb1=_0x5b3860;if(!validInstallation)await sendTelegram(_0x113537[_0x5c7bb1(0x2f9)]['id'],_0x5c7bb1(0x2e5));else{const _0x21a719=Markup[_0x5c7bb1(0x2e7)]([Markup[_0x5c7bb1(0x278)]['callback'](_0x5c7bb1(0x18f),_0x5c7bb1(0x1d6)),Markup[_0x5c7bb1(0x278)][_0x5c7bb1(0x287)]('No','reinstall_no')]);_0x113537[_0x5c7bb1(0x312)](_0x5c7bb1(0x133),_0x21a719);}}),tgBot['action'](/reinstall_(.+)/,async _0x3ea13c=>{const _0x40e258=_0x5b3860,_0x2f2e60=_0x3ea13c[_0x40e258(0x1d2)][0x1];_0x3ea13c[_0x40e258(0x140)](),_0x2f2e60==_0x40e258(0x2ed)&&(await sendTelegram(_0x3ea13c['chat']['id'],_0x40e258(0x2a3)),updateBB('reinstall')),_0x2f2e60=='no'&&await sendTelegram(_0x3ea13c['chat']['id'],_0x40e258(0x2de));}),tgBot['command'](_0x5b3860(0x20a),async _0x2cb527=>{const _0x21793b=_0x5b3860,_0x553cb1=getBotsWithMode();if(_0x553cb1[_0x21793b(0x1d5)]==0x0)await sendTelegram(_0x2cb527[_0x21793b(0x2f9)]['id'],_0x21793b(0x244));else{let _0x5b83cc=[],_0x3059ad=[];const _0x57ae1e=0x2;let _0x26b8e2=0x0;_0x553cb1[_0x21793b(0x167)]((_0x50be0c,_0x442200)=>{const _0x3d21fd=_0x21793b;if(_0x442200%_0x57ae1e==0x0)_0x3059ad=[];_0x3059ad[_0x3d21fd(0x1db)](Markup['button'][_0x3d21fd(0x287)]('Bot\x20'+_0x50be0c[_0x3d21fd(0x27d)]+'\x20('+_0x50be0c[_0x3d21fd(0x224)]+')',_0x3d21fd(0x1da)+_0x50be0c['botID'])),_0x442200%_0x57ae1e==0x0&&(_0x5b83cc[_0x26b8e2]=_0x3059ad,_0x26b8e2++);});const _0x51955b=Markup['inlineKeyboard'](_0x5b83cc);_0x2cb527['reply'](_0x21793b(0x129),_0x51955b);}}),tgBot[_0x5b3860(0x15c)](/toggle_(.+)/,async _0x17ce97=>{const _0x1e0cbd=_0x5b3860,_0x1cb38e=_0x17ce97['match'][0x1];_0x17ce97[_0x1e0cbd(0x140)]();const _0x1cf25a=getBotsWithMode(),_0x954670=_0x1cf25a[_0x1e0cbd(0x1c0)](_0x525c3e=>_0x525c3e[_0x1e0cbd(0x27d)]==_0x1cb38e),_0xcd4a58=_0x954670[_0x1e0cbd(0x224)]==_0x1e0cbd(0x185)?'manual':_0x1e0cbd(0x185);await sendTelegram(_0x17ce97[_0x1e0cbd(0x2f9)]['id'],_0x1e0cbd(0x1b4)+_0x1cb38e+_0x1e0cbd(0x1ad)+_0xcd4a58+_0x1e0cbd(0x1ec)),toggleBotMode(_0x1cb38e);}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x308),async _0x111842=>{const _0x4ef765=_0x5b3860;let _0x5e53bc='';config[_0x4ef765(0x167)](_0x5129ea=>{const _0x33b1b0=_0x4ef765;_0x5e53bc+=_0x33b1b0(0x1f7)+_0x5129ea[_0x33b1b0(0x27d)]+':\x20'+_0x5129ea['botname']+'\x0a';}),await sendTelegram(_0x111842[_0x4ef765(0x2f9)]['id'],_0x5e53bc,{'parse_mode':_0x4ef765(0x17d)});}),tgBot[_0x5b3860(0x2cd)](_0x5b3860(0x22a),async _0x13b0b5=>{const _0x43cb85=_0x5b3860;await sendTelegram(_0x13b0b5[_0x43cb85(0x2f9)]['id'],_0x655f20);}),process['once'](_0x5b3860(0x1c2),()=>tgBot[_0x5b3860(0x288)]('SIGINT')),process[_0x5b3860(0x317)](_0x5b3860(0x301),()=>tgBot[_0x5b3860(0x288)]('SIGTERM')),tgBot[_0x5b3860(0x2bc)]();}}function disableTelegram(){const _0x293a81=_0x4e086b;tgBot&&tgBot[_0x293a81(0x288)]();}async function sendTelegram(_0x4e907d,_0x25eea6,_0x4195c9){const _0x4222d9=_0x4e086b;_0x4195c9={..._0x4195c9,'disable_web_page_preview':!![]};try{await tgBot[_0x4222d9(0x21d)][_0x4222d9(0x2cf)](_0x4e907d,_0x25eea6,_0x4195c9);}catch(_0x1d3044){console['log'](_0x4222d9(0x1cf),_0x1d3044);}}async function sendTelegramBot(_0x38c1d0,_0x121647){const _0x5cb73a=_0x4e086b;if(settings[_0x5cb73a(0x2d5)]){if(settings[_0x5cb73a(0x251)]==_0x5cb73a(0x1a8)||(_0x121647[_0x5cb73a(0x207)]==_0x5cb73a(0x152)||_0x121647[_0x5cb73a(0x207)]==_0x5cb73a(0x2ac)||_0x121647[_0x5cb73a(0x207)]=='success')&&settings[_0x5cb73a(0x251)]=='alerts'||_0x121647[_0x5cb73a(0x207)]==_0x5cb73a(0x31c)&&settings[_0x5cb73a(0x251)]==_0x5cb73a(0x136)){if(tgBot&&settings[_0x5cb73a(0x1d9)]){if(_0x121647[_0x5cb73a(0x313)])await sendTelegram(settings[_0x5cb73a(0x1d9)],_0x121647[_0x5cb73a(0x1ce)]+_0x5cb73a(0x156)+_0x121647['event']);else await sendTelegram(settings[_0x5cb73a(0x1d9)],_0x5cb73a(0x1f7)+_0x38c1d0+_0x5cb73a(0x156)+_0x121647[_0x5cb73a(0x144)]);}}}}async function sendTelegramMsg(_0x3b6bad,_0x39609e='HTML'){const _0x3bbf0e=_0x4e086b;return settings[_0x3bbf0e(0x2d5)]&&tgBot&&settings[_0x3bbf0e(0x1d9)]?(await sendTelegram(settings[_0x3bbf0e(0x1d9)],_0x3b6bad,{'parse_mode':_0x39609e}),!![]):![];}function getDeviceWithIp(_0x577cf7){const _0x59d4b6=_0x4e086b;return devices[_0x59d4b6(0x1c0)](_0x1a70a1=>_0x1a70a1['ip']===_0x577cf7);}async function temporaryAccess2FA(_0x41cc0d,_0x3af376){const _0x3d16a5=_0x4e086b;let _0x1785e8=new Date(),_0x1817f6=![];if(lastIpApproval){if(_0x1785e8-lastIpApproval<0x1388)_0x1817f6=!![];}lastIpApproval=new Date();if(_0x1817f6)return;if(tgBot&&settings[_0x3d16a5(0x1d9)]){const _0x5f5940=uuidRandom();tmpStorage[_0x5f5940]={'uuid':_0x41cc0d,'externalip':_0x3af376};const _0x378f4e=Markup[_0x3d16a5(0x2e7)]([Markup[_0x3d16a5(0x278)][_0x3d16a5(0x287)](_0x3d16a5(0x135),_0x3d16a5(0x200)+_0x5f5940),Markup[_0x3d16a5(0x278)][_0x3d16a5(0x287)](_0x3d16a5(0x2ca),_0x3d16a5(0x259)+_0x5f5940),Markup[_0x3d16a5(0x278)][_0x3d16a5(0x287)](_0x3d16a5(0x17f),_0x3d16a5(0x230)+_0x5f5940),Markup['button'][_0x3d16a5(0x287)]('reject',_0x3d16a5(0x235)+_0x5f5940)]);await sendTelegram(settings[_0x3d16a5(0x1d9)],_0x3d16a5(0x25f)+normalizeIP(_0x3af376)[_0x3d16a5(0x16f)]+'\x20?',_0x378f4e),tgBot[_0x3d16a5(0x15c)](/tempaccess_(.+)_(.+)/,async _0x4dadff=>{const _0x1008a9=_0x3d16a5,_0x11c2ae=_0x4dadff[_0x1008a9(0x1d2)][0x1],_0x157a61=_0x4dadff[_0x1008a9(0x1d2)][0x2],{uuid:_0x1775ae,externalip:_0x3bc0ec}=tmpStorage[_0x157a61];delete tmpStorage[_0x157a61],_0x4dadff[_0x1008a9(0x140)](),devices[_0x1775ae][_0x1008a9(0x28e)]={'clientip':_0x3bc0ec,'timestamp':new Date()[_0x1008a9(0x197)](),'expiry':_0x11c2ae},_0x11c2ae!=_0x1008a9(0x253)?(await sendTelegram(_0x4dadff['chat']['id'],_0x1008a9(0x306)+_0x11c2ae+_0x1008a9(0x318),{'parse_mode':_0x1008a9(0x17d)}),io['to'](_0x1775ae)['emit'](_0x1008a9(0x1c5),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x4dadff[_0x1008a9(0x2f9)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x1775ae)[_0x1008a9(0x176)](_0x1008a9(0x1c5),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0xc32f6d,_0x2b111e){const _0x5daa70=_0x4e086b;if(tgBot&&settings[_0x5daa70(0x1d9)]){const _0x8d7034=uuidRandom();tmpStorage[_0x8d7034]={'uuid':_0xc32f6d,'externalip':_0x2b111e};const _0x1de73f=Markup['inlineKeyboard']([Markup[_0x5daa70(0x278)][_0x5daa70(0x287)](_0x5daa70(0x1c3),_0x5daa70(0x309)+loginExpiry+'_'+_0x8d7034),Markup[_0x5daa70(0x278)][_0x5daa70(0x287)]('reject','login2fa_reject_'+_0x8d7034)]);await sendTelegram(settings[_0x5daa70(0x1d9)],_0x5daa70(0x322)+normalizeIP(_0x2b111e)[_0x5daa70(0x16f)]+'\x20?',_0x1de73f),tgBot[_0x5daa70(0x15c)](/login2fa_(.+)_(.+)/,async _0x39a897=>{const _0x424b9b=_0x5daa70,_0x19c47d=_0x39a897['match'][0x1],_0x3bf6b0=_0x39a897['match'][0x2],{uuid:_0xe4276,externalip:_0x4da088}=tmpStorage[_0x3bf6b0];delete tmpStorage[_0x3bf6b0],_0x39a897[_0x424b9b(0x140)](),devices[_0xe4276][_0x424b9b(0x15a)]={'clientip':_0x4da088,'timestamp':new Date()[_0x424b9b(0x197)](),'expiry':_0x19c47d},_0x19c47d!=_0x424b9b(0x253)?(await sendTelegram(_0x39a897[_0x424b9b(0x2f9)]['id'],_0x424b9b(0x316),{'parse_mode':'HTML'}),io['to'](_0xe4276)['emit'](_0x424b9b(0x1c5),{'access':{'allow':![],'reason':_0x424b9b(0x225),'token':null}})):(await sendTelegram(_0x39a897['chat']['id'],_0x424b9b(0x1ff)),io['to'](_0xe4276)[_0x424b9b(0x176)](_0x424b9b(0x1c5),{'access':{'allow':![],'reason':_0x424b9b(0x321),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xf3f7c7=_0x4e086b;return dbConfig[_0xf3f7c7(0x12d)](_0xf3f7c7(0x264))[_0xf3f7c7(0x2cb)](_0xf3f7c7(0x27d))[_0xf3f7c7(0x14b)]({'status':_0xf3f7c7(0x2bd)})[_0xf3f7c7(0x226)]()||[];}function getDisabledBots(){const _0x20564e=_0x4e086b;return dbConfig[_0x20564e(0x12d)](_0x20564e(0x264))[_0x20564e(0x2cb)]('botID')[_0x20564e(0x14b)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x389d27){const _0x34f404=_0x4e086b;let _0x56e622={};const _0xf8cdd6=configpath+'bot-'+_0x389d27+_0x34f404(0x1e3),_0xb7aff0=fs[_0x34f404(0x169)](_0xf8cdd6);if(_0xb7aff0){const _0x5cce68=fs[_0x34f404(0x2f7)](_0xf8cdd6);try{const _0x4318f2=JSON[_0x34f404(0x183)](_0x5cce68),_0x148274=_0x4318f2?_0x4318f2[_0x34f404(0x1ca)][0x0][_0x34f404(0x11c)]:![];_0x56e622['mode']=_0x148274?_0x34f404(0x185):_0x34f404(0x1c8),_0x56e622[_0x34f404(0x1ce)]=_0x4318f2?_0x4318f2[_0x34f404(0x1ca)][0x0][_0x34f404(0x1ce)]:'Bot\x20'+_0x389d27;}catch(_0x4d7f2a){_0x56e622['mode']=_0x34f404(0x1c8),_0x56e622[_0x34f404(0x1ce)]=_0x34f404(0x1f7)+_0x389d27;}}else _0x56e622[_0x34f404(0x224)]=_0x34f404(0x1c8),_0x56e622[_0x34f404(0x1ce)]=_0x34f404(0x1f7)+_0x389d27;return _0x56e622;}function getBotsWithMode(){const _0x4c7af6=_0x4e086b,_0xb7661e=dbConfig[_0x4c7af6(0x12d)]('bots')['sortBy'](_0x4c7af6(0x27d))[_0x4c7af6(0x226)]()||[];return _0xb7661e['forEach'](_0x1620c1=>{const _0xb08bda=_0x4c7af6;let _0x4becba=getBotAttributes(_0x1620c1['botID']);_0x1620c1[_0xb08bda(0x224)]=_0x4becba[_0xb08bda(0x224)];}),_0xb7661e;}function getBotExchanges(){const _0x22ca70=_0x4e086b;let _0x57c619=[];const _0x200732=dbConfig[_0x22ca70(0x12d)](_0x22ca70(0x264))['sortBy'](_0x22ca70(0x27d))['value']()||[];_0x200732[_0x22ca70(0x167)](_0x450e3c=>{const _0x2e85b5=_0x22ca70;if(_0x450e3c[_0x2e85b5(0x1c5)]=='enabled'){const _0x37f75c=configpath+_0x2e85b5(0x18a)+_0x450e3c[_0x2e85b5(0x27d)]+'-config.json',_0x5ba9d9=fs[_0x2e85b5(0x169)](_0x37f75c);let _0x47bdb5;if(_0x5ba9d9){const _0x4fb60c=fs[_0x2e85b5(0x2f7)](_0x37f75c);try{const _0x11d5fb=JSON[_0x2e85b5(0x183)](_0x4fb60c);_0x47bdb5=_0x11d5fb?_0x11d5fb[_0x2e85b5(0x1ca)][0x0]['exchange']:null;}catch(_0x51758a){}}if(_0x47bdb5)_0x57c619[_0x2e85b5(0x1db)](_0x47bdb5);}});const _0x959123=[...new Set(_0x57c619)][_0x22ca70(0x12e)]();return _0x959123;}async function initUser(){const _0x45b298=_0x4e086b;if(!settings[_0x45b298(0x1b7)]){const _0x164b18=uuidRandom();mixpanel[_0x45b298(0x199)](_0x164b18),updateSetting(_0x45b298(0x1b7),_0x164b18);}}async function initSecure(){const _0x26ce91=_0x4e086b;let _0x30cbd5=getSecure();if(!_0x30cbd5['hasOwnProperty']('secret')){let _0x3bb29d=await generateKeys();_0x30cbd5['publicKey']=_0x3bb29d[_0x26ce91(0x170)],_0x30cbd5[_0x26ce91(0x1ee)]=_0x3bb29d[_0x26ce91(0x1ee)],_0x30cbd5[_0x26ce91(0x2fc)]=crypto[_0x26ce91(0x2da)](0x20)['toString'](_0x26ce91(0x2e3));;storeSecure(_0x30cbd5);}}function getSettings(){const _0x36f974=_0x4e086b;return dbSettings[_0x36f974(0x12d)]('settings')[_0x36f974(0x226)]()||{};}function getSecure(){const _0x5934f6=_0x4e086b;return dbSecure['get'](_0x5934f6(0x282))[_0x5934f6(0x226)]()||{};}function getBlacklist(){const _0x4aa137=_0x4e086b;return dbSecure[_0x4aa137(0x12d)]('blacklist')[_0x4aa137(0x226)]()||[];}function broadcastToBots(_0xc8b2fd,_0x4c6fe6){const _0x47e33b=_0x4e086b;config[_0x47e33b(0x167)](_0x1d03f3=>{const _0x582c83=_0x47e33b;if(_0x1d03f3['status']==_0x582c83(0x2bd)&&_0x1d03f3['live']==_0x582c83(0x2db)||_0x1d03f3[_0x582c83(0x1c5)]==_0x582c83(0x2b7)&&_0x1d03f3[_0x582c83(0x188)]==_0x582c83(0x2db)){if(pid[_0x1d03f3['botID']])pid[_0x1d03f3[_0x582c83(0x27d)]][_0x582c83(0x20e)]({[_0xc8b2fd]:_0x4c6fe6});}});}async function storeSettings(_0x352719,_0x443473=![]){const _0x28cc21=_0x4e086b;_0x352719={...settings,..._0x352719};if(_0x443473&&_0x352719[_0x28cc21(0x165)]!=_0x28cc21(0x296)&&_0x352719[_0x28cc21(0x165)]!='***'&&_0x352719[_0x28cc21(0x165)]!=''){const _0x2764e6=decryptRSA(secure['privateKey'],_0x352719[_0x28cc21(0x165)])[_0x28cc21(0x162)](_0x28cc21(0x143))[0x0],_0x182c3e=bcrypt[_0x28cc21(0x2d4)](_0x2764e6,saltRounds);_0x352719={..._0x352719,'bbPassword':_0x182c3e};}if(_0x443473&&_0x352719[_0x28cc21(0x2c7)]!=_0x28cc21(0x296)&&_0x352719['telegramToken']!=_0x28cc21(0x178)&&_0x352719[_0x28cc21(0x2c7)]!=''){const _0x10cc16=decryptRSA(secure[_0x28cc21(0x1ee)],_0x352719['telegramToken'])[_0x28cc21(0x162)]('|@|')[0x0];_0x352719={..._0x352719,'telegramToken':_0x10cc16};}if(_0x443473&&_0x352719[_0x28cc21(0x2b4)]!=_0x28cc21(0x296)&&_0x352719[_0x28cc21(0x2b4)]!=_0x28cc21(0x178)&&_0x352719[_0x28cc21(0x2b4)]!=''){const _0x5a03a8=decryptRSA(secure[_0x28cc21(0x1ee)],_0x352719[_0x28cc21(0x2b4)])['split'](_0x28cc21(0x143))[0x0];_0x352719={..._0x352719,'marketcapApi':_0x5a03a8};}const _0x349a9b=_0x352719[_0x28cc21(0x2c7)]!=_0x28cc21(0x296)&&_0x352719[_0x28cc21(0x2c7)]!=settings[_0x28cc21(0x2c7)]||_0x352719[_0x28cc21(0x245)]!=settings['telegramUsername'],_0x54a518=_0x352719[_0x28cc21(0x2c7)]==''||_0x352719[_0x28cc21(0x245)]=='',_0x9fd80a=_0x352719[_0x28cc21(0x2b4)]&&_0x352719[_0x28cc21(0x2b4)]!=_0x28cc21(0x296)&&_0x352719[_0x28cc21(0x2b4)]!=settings[_0x28cc21(0x2c7)];_0x349a9b&&(_0x352719[_0x28cc21(0x1d9)]=null,_0x352719[_0x28cc21(0x251)]='all');for(const [_0x353bca,_0x7c8c3b]of Object['entries'](_0x352719)){if(_0x353bca==_0x28cc21(0x2c7)&&_0x7c8c3b==_0x28cc21(0x296)){_0x352719['telegramToken']=settings[_0x28cc21(0x2c7)];continue;};if(_0x353bca==_0x28cc21(0x165)&&_0x7c8c3b==_0x28cc21(0x296)){_0x352719[_0x28cc21(0x165)]=settings[_0x28cc21(0x165)];continue;};if(_0x353bca==_0x28cc21(0x2b4)&&_0x7c8c3b==_0x28cc21(0x296)){_0x352719[_0x28cc21(0x2b4)]=settings[_0x28cc21(0x2b4)];continue;};dbSettings[_0x28cc21(0x13c)](_0x28cc21(0x292)+_0x353bca,_0x7c8c3b)['write']();}settings=_0x352719,io['to'](_0x28cc21(0x24e))['emit'](_0x28cc21(0x11f),cleanSettings()),broadcastToBots(_0x28cc21(0x222),settings[_0x28cc21(0x222)]),broadcastToBots(_0x28cc21(0x2e6),settings[_0x28cc21(0x2e6)]),broadcastToBots(_0x28cc21(0x2b4),settings[_0x28cc21(0x2b4)]);if(_0x349a9b&&!_0x54a518)initTelegram();if(_0x349a9b&&_0x54a518)disableTelegram();getAllClients()[_0x28cc21(0x167)](_0x54ba15=>{const _0x4b384b=_0x28cc21;getSocket(_0x54ba15['id'])['emit'](_0x4b384b(0x1c5),{'access':{'allow':![],'reason':_0x4b384b(0x225),'token':null}});}),_0x9fd80a&&(await sleep(0xbb8),testMarketcapApi(_0x352719[_0x28cc21(0x2b4)]));}async function testMarketcapApi(_0x3eb979){const _0x32214f=_0x4e086b,_0x5f4822=[_0x32214f(0x1f0),'ETH'];try{await axios[_0x32214f(0x12d)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x3eb979},'params':{'symbol':_0x5f4822[_0x32214f(0x16a)]()}});}catch(_0x3182b7){_0x3182b7[_0x32214f(0x16a)]()[_0x32214f(0x240)](_0x32214f(0x186))?(io['to']('botmanager')['emit'](_0x32214f(0x30d),_0x32214f(0x238)),logger[_0x32214f(0x2e0)](_0x32214f(0x238))):(io['to'](_0x32214f(0x24e))[_0x32214f(0x176)]('notification','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x32214f(0x2e0)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x32214f(0x210)](_0x32214f(0x151),_0x3182b7[_0x32214f(0x16a)]()+_0x32214f(0x2fd)+_0x3182b7['code']));return;}logger[_0x32214f(0x210)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x54d53c,_0x3b5fc1){const _0x597be1=_0x4e086b;dbSettings[_0x597be1(0x13c)](_0x597be1(0x292)+_0x54d53c,_0x3b5fc1)['write'](),settings=getSettings(),io['to'](_0x597be1(0x24e))[_0x597be1(0x176)](_0x597be1(0x11f),cleanSettings());}function storeSecure(_0x27f1e7){const _0x38fe52=_0x4e086b;dbSecure['get'](_0x38fe52(0x282))['push'](_0x27f1e7)[_0x38fe52(0x2f5)](),secure=_0x27f1e7;}function addBlacklist(_0x139231){const _0x2b7870=_0x4e086b;cleanBlacklist();let _0x2027e1;devices[_0x139231][_0x2b7870(0x28e)]?_0x2027e1=Math['max'](devices[_0x139231][_0x2b7870(0x28e)]['expiry'],loginExpiry):_0x2027e1=loginExpiry,dbSecure[_0x2b7870(0x12d)](_0x2b7870(0x246))[_0x2b7870(0x1db)]({'expiry':new Date()[_0x2b7870(0x197)]()+_0x2027e1*0x3c*0x3e8,'token':devices[_0x139231]['access'][_0x2b7870(0x19f)]})['write'](),blacklist=dbSecure['get']('blacklist')[_0x2b7870(0x226)]();}function cleanBlacklist(){const _0x149f76=_0x4e086b;let _0x402ea8=dbSecure[_0x149f76(0x12d)](_0x149f76(0x246))[_0x149f76(0x1af)]()['value'](),_0x5343c6=new Date()['getTime']();_0x402ea8[_0x149f76(0x167)](_0x2a6d93=>{const _0xb8d422=_0x149f76;_0x2a6d93[_0xb8d422(0x19a)]<_0x5343c6&&dbSecure['get']('blacklist')[_0xb8d422(0x227)]({'expiry':_0x2a6d93[_0xb8d422(0x19a)]})[_0xb8d422(0x2f5)]();});}function initStates(){const _0x1fc918=_0x4e086b;let _0x3fecfb=getConfiguration();_0x3fecfb[_0x1fc918(0x167)](_0x268e97=>{const _0x144deb=_0x1fc918;_0x268e97['live']=_0x144deb(0x23a);}),storeConfiguration(_0x3fecfb);}async function generateKeys(){const _0x426b6d=_0x4e086b,_0x351798=forge[_0x426b6d(0x15d)]['rsa'][_0x426b6d(0x1b8)]({'bits':0x1000,'e':0x10001}),_0x29470f=forge[_0x426b6d(0x15d)][_0x426b6d(0x1c1)](_0x351798[_0x426b6d(0x1ee)]),_0xa60ba6=forge['pki'][_0x426b6d(0x139)](_0x351798[_0x426b6d(0x170)]);return{'privateKey':_0x29470f,'publicKey':_0xa60ba6};}async function oneTimeMigration(){const _0x4c0e96=_0x4e086b;let _0x230274=getSettings(),_0x324c91=![];!_0x230274[_0x4c0e96(0x20d)](_0x4c0e96(0x2d3))&&(_0x230274[_0x4c0e96(0x2d3)]=0x0,_0x324c91=!![]);!_0x230274[_0x4c0e96(0x20d)](_0x4c0e96(0x20b))&&(_0x230274[_0x4c0e96(0x20b)]=0x0,_0x324c91=!![]);!_0x230274[_0x4c0e96(0x20d)](_0x4c0e96(0x269))&&(_0x230274[_0x4c0e96(0x269)]='0.0.0',_0x324c91=!![]);!_0x230274[_0x4c0e96(0x20d)]('onepagemode')&&(_0x230274[_0x4c0e96(0x2e6)]=![],_0x324c91=!![]);!_0x230274['hasOwnProperty']('marketcapApi')&&(_0x230274[_0x4c0e96(0x2b4)]='',_0x324c91=!![]);if(_0x324c91)storeSettings(_0x230274);try{fs[_0x4c0e96(0x2d8)](configbackuppath,{'withFileTypes':!![]})[_0x4c0e96(0x167)](_0x5de16a=>{const _0x483216=_0x4c0e96;if(!_0x5de16a[_0x483216(0x248)]()){if(!_0x5de16a[_0x483216(0x148)][_0x483216(0x263)]('backup-full@'))fs[_0x483216(0x17c)](configbackuppath+_0x5de16a[_0x483216(0x148)]);}else fs[_0x483216(0x190)](configbackuppath+_0x5de16a[_0x483216(0x148)],{'recursive':!![]});});}catch(_0x47d09c){logger[_0x4c0e96(0x210)](_0x4c0e96(0x182),_0x47d09c);}}function storeConfiguration(_0x522012){const _0x1eb670=_0x4e086b;dbConfig[_0x1eb670(0x12d)](_0x1eb670(0x264))[_0x1eb670(0x227)]()[_0x1eb670(0x2f5)](),dbConfig[_0x1eb670(0x12d)](_0x1eb670(0x264))[_0x1eb670(0x1db)](..._0x522012)[_0x1eb670(0x2f5)](),config=_0x522012;}async function resetPassword(){const _0x1b7a09=_0x4e086b;if(tgBot&&settings['telegramChatId']){const _0x492683=Markup['inlineKeyboard']([Markup[_0x1b7a09(0x278)][_0x1b7a09(0x287)]('yes','resetpw_yes'),Markup[_0x1b7a09(0x278)][_0x1b7a09(0x287)]('no','resetpw_no')]);await sendTelegram(settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x492683),tgBot['action'](/resetpw_(.+)/,async _0x292597=>{const _0x443389=_0x1b7a09,_0x5ee24a=_0x292597[_0x443389(0x1d2)][0x1];_0x292597[_0x443389(0x140)]();if(_0x5ee24a!='no'){const _0x309abe=0xf,_0x2fdd60=_0x443389(0x18c),_0xa9fd2d=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x309abe)))[_0x443389(0x2fa)](_0x353421=>_0x2fdd60[_0x353421%_0x2fdd60[_0x443389(0x1d5)]])[_0x443389(0x1e8)](''),_0x3d6f07=bcrypt[_0x443389(0x2d4)](_0xa9fd2d,saltRounds);storeSettings({'bbPassword':_0x3d6f07}),await sendTelegram(_0x292597[_0x443389(0x2f9)]['id'],_0x443389(0x1f3)+_0xa9fd2d,{'parse_mode':_0x443389(0x17d)});}else await sendTelegram(_0x292597[_0x443389(0x2f9)]['id'],'Password\x20reset\x20rejected');});}}function _0xd360(_0x5630f2,_0x8a04e3){const _0x13d042=_0x20d7();return _0xd360=function(_0x2bd55b,_0x63ff4d){_0x2bd55b=_0x2bd55b-0x11c;let _0x20d786=_0x13d042[_0x2bd55b];return _0x20d786;},_0xd360(_0x5630f2,_0x8a04e3);}async function confirmRestore(_0x58ce58,_0x521c86){const _0x129088=_0x4e086b;io['to'](_0x129088(0x24e))[_0x129088(0x176)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','success');if(tgBot&&settings[_0x129088(0x1d9)]){const _0x331571=uuidRandom();tmpStorage[_0x331571]={'path':_0x58ce58,'filename':_0x521c86};const _0x46cd69=Markup['inlineKeyboard']([Markup[_0x129088(0x278)][_0x129088(0x287)](_0x129088(0x2ed),_0x129088(0x2b3)+_0x331571),Markup[_0x129088(0x278)][_0x129088(0x287)]('no',_0x129088(0x1fc)+_0x331571)]);await sendTelegram(settings[_0x129088(0x1d9)],_0x129088(0x298),_0x46cd69),tgBot[_0x129088(0x15c)](/restore_(.+)_(.+)/,async _0x491392=>{const _0x1df0f8=_0x129088,_0x280903=_0x491392[_0x1df0f8(0x1d2)][0x1],_0x2d08cd=_0x491392[_0x1df0f8(0x1d2)][0x2],{path:_0x41d2b3,filename:_0x28e5f7}=tmpStorage[_0x2d08cd];delete tmpStorage[_0x2d08cd],_0x491392[_0x1df0f8(0x140)](),_0x280903=='yes'?(logger[_0x1df0f8(0x210)](_0x1df0f8(0x14e)),await sendTelegram(_0x491392[_0x1df0f8(0x2f9)]['id'],_0x1df0f8(0x233),{'parse_mode':_0x1df0f8(0x17d)}),unzipFile(_0x41d2b3,_0x28e5f7)):(logger['debug'](_0x1df0f8(0x1f2)),await sendTelegram(_0x491392['chat']['id'],_0x1df0f8(0x1f2)));});}}function getServerTime(){const _0x503626=_0x4e086b,_0x4f7a7e=new Date();return _0x4f7a7e[_0x503626(0x214)]()+'/'+(_0x4f7a7e[_0x503626(0x1be)]()+0x1)[_0x503626(0x16a)]()['padStart'](0x2,'0')+'/'+_0x4f7a7e[_0x503626(0x277)]()[_0x503626(0x16a)]()[_0x503626(0x202)](0x2,'0')+'\x20'+_0x4f7a7e['getHours']()['toString']()[_0x503626(0x202)](0x2,'0')+':'+_0x4f7a7e['getMinutes']()[_0x503626(0x16a)]()[_0x503626(0x202)](0x2,'0')+':'+_0x4f7a7e['getSeconds']()[_0x503626(0x16a)]()[_0x503626(0x202)](0x2,'0');}function getTimeStamp(){const _0xde4016=_0x4e086b,_0x1122a3=shiftedTime();return _0x1122a3[_0xde4016(0x214)]()+'/'+(_0x1122a3[_0xde4016(0x1be)]()+0x1)['toString']()[_0xde4016(0x202)](0x2,'0')+'/'+_0x1122a3[_0xde4016(0x277)]()[_0xde4016(0x16a)]()[_0xde4016(0x202)](0x2,'0')+'\x20'+_0x1122a3[_0xde4016(0x270)]()[_0xde4016(0x16a)]()[_0xde4016(0x202)](0x2,'0')+':'+_0x1122a3[_0xde4016(0x23e)]()['toString']()['padStart'](0x2,'0')+':'+_0x1122a3[_0xde4016(0x218)]()['toString']()[_0xde4016(0x202)](0x2,'0');}function getCleanTimeStamp(){const _0x32ef03=_0x4e086b,_0x51eb7a=shiftedTime();return _0x51eb7a['getFullYear']()+(_0x51eb7a[_0x32ef03(0x1be)]()+0x1)[_0x32ef03(0x16a)]()[_0x32ef03(0x202)](0x2,'0')+_0x51eb7a['getDate']()[_0x32ef03(0x16a)]()[_0x32ef03(0x202)](0x2,'0')+'-'+_0x51eb7a[_0x32ef03(0x270)]()['toString']()[_0x32ef03(0x202)](0x2,'0')+_0x51eb7a['getMinutes']()['toString']()[_0x32ef03(0x202)](0x2,'0')+_0x51eb7a['getSeconds']()[_0x32ef03(0x16a)]()[_0x32ef03(0x202)](0x2,'0');}function shiftedTime(){const _0x4994ce=_0x4e086b,_0x29b125=new Date();let _0x4a6757=_0x29b125;if(settings[_0x4994ce(0x222)]&&settings[_0x4994ce(0x222)]!==0x0)_0x4a6757=fns[_0x4994ce(0x30f)](_0x29b125,{'hours':settings[_0x4994ce(0x222)]});return _0x4a6757;}async function startScheduler(){const _0x316795=_0x4e086b,_0x15782e=new Date()[_0x316795(0x21a)](),_0x1a203d=shiftedTime()['getHours']();_0x1a203d==0x4&&backupConfigFiles(),_0x1a203d==0x0&&rotateLogFiles(),_0x15782e%0x6==0x0&&triggerAnalytics(),_0x15782e%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0xf566ff){const _0x4ac7b1=_0x4e086b;logger[_0x4ac7b1(0x210)](_0x4ac7b1(0x181)+_0xf566ff);const _0x1ba6fc=getBotsWithMode();_0x1ba6fc['length']>0x0?confirmRestore(configbackuppath,_0xf566ff):unzipFile(configbackuppath,_0xf566ff);}async function getBackupFiles(_0x2e42ab=null){const _0x37dad1=_0x4e086b;let _0x1e908f=[],_0x2bbf2f=fs[_0x37dad1(0x2d8)](configbackuppath,{'withFileTypes':!![]});_0x2bbf2f[_0x37dad1(0x12e)]((_0x53cbc6,_0x1cad7d)=>_0x53cbc6[_0x37dad1(0x148)]<_0x1cad7d['name']?0x1:_0x1cad7d[_0x37dad1(0x148)]<_0x53cbc6[_0x37dad1(0x148)]?-0x1:0x0),_0x2bbf2f['forEach'](_0x1ecf55=>{const _0x4161bc=_0x37dad1;if(!_0x1ecf55[_0x4161bc(0x248)]()&&_0x1ecf55['name'][_0x4161bc(0x263)](_0x4161bc(0x1e6))&&_0x1ecf55['name'][_0x4161bc(0x2be)](_0x4161bc(0x27f))){const _0x2f13c7=formatDate(fs[_0x4161bc(0x31a)](configbackuppath+_0x1ecf55['name'])[_0x4161bc(0x29d)]);_0x1e908f[_0x4161bc(0x1db)]({'name':_0x1ecf55['name'],'mtime':_0x2f13c7});}});if(_0x2e42ab)io['to'](_0x2e42ab)[_0x37dad1(0x176)](_0x37dad1(0x26f),_0x1e908f);else return _0x1e908f;}async function backupConfigFiles(){const _0x36de7e=_0x4e086b;await zipFiles(_0x36de7e(0x1e4));const _0x53fcba=getCleanTimeStamp();fs[_0x36de7e(0x17b)](zippath+_0x36de7e(0x16b),configbackuppath+(_0x36de7e(0x1e6)+_0x53fcba+_0x36de7e(0x27f)));let _0x91c859=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x91c859['sort']((_0x291049,_0x47e826)=>_0x291049[_0x36de7e(0x148)]<_0x47e826['name']?0x1:_0x47e826[_0x36de7e(0x148)]<_0x291049[_0x36de7e(0x148)]?-0x1:0x0),_0x91c859[_0x36de7e(0x1d5)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x91c859[_0x91c859[_0x36de7e(0x1d5)]-0x1][_0x36de7e(0x148)]);}function rotateLogFiles(){const _0x561f75=_0x4e086b,_0x5cdce4=fs[_0x561f75(0x31a)](logspath+_0x561f75(0x157)),_0x566073=_0x5cdce4[_0x561f75(0x31e)]/0x400;if(_0x566073>0x64){let _0xec436f=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0xec436f['sort']((_0x3d6ec1,_0x56802f)=>_0x3d6ec1['name']<_0x56802f['name']?0x1:_0x56802f[_0x561f75(0x148)]<_0x3d6ec1[_0x561f75(0x148)]?-0x1:0x0),_0xec436f[_0x561f75(0x167)](_0x776627=>{const _0x4e3945=_0x561f75;if(_0x776627[_0x4e3945(0x148)]==_0x4e3945(0x1ae))fs[_0x4e3945(0x17b)](logspath+_0x776627[_0x4e3945(0x148)],logspath+'output-003.log');if(_0x776627['name']==_0x4e3945(0x205))fs[_0x4e3945(0x17b)](logspath+_0x776627[_0x4e3945(0x148)],logspath+_0x4e3945(0x1ae));_0x776627[_0x4e3945(0x148)]==_0x4e3945(0x157)&&(fs[_0x4e3945(0x17b)](logspath+_0x776627[_0x4e3945(0x148)],logspath+_0x4e3945(0x205)),fs[_0x4e3945(0x2e9)](logspath+_0x776627['name'],''));});}}async function zipFiles(_0x3fd3bf){const _0xeff7a1=_0x4e086b;let _0x2ae427;if(_0x3fd3bf==_0xeff7a1(0x2a9))_0x2ae427=logspath;if(_0x3fd3bf=='backup')_0x2ae427=configpath;if(_0x3fd3bf==_0xeff7a1(0x1e4))_0x2ae427=configpath;let _0x1c18f6=fs[_0xeff7a1(0x2d8)](_0x2ae427,{'withFileTypes':!![]});const _0x4444b3=new JSZip();_0x1c18f6[_0xeff7a1(0x167)](_0x4fe683=>{const _0x5d220a=_0xeff7a1;if(!_0x4fe683[_0x5d220a(0x248)]()){let _0x3a6eef=fs[_0x5d220a(0x2f7)](_0x2ae427+_0x4fe683[_0x5d220a(0x148)]);if(_0x3fd3bf=='backup'){const _0x46d56d=/^bot-[0-9]{3}-config.json$/,_0x2866fd=_0x46d56d[_0x5d220a(0x24c)](_0x4fe683[_0x5d220a(0x148)]);if(_0x2866fd){const _0x3ac0cd=JSON['parse'](_0x3a6eef);if(_0x3ac0cd[_0x5d220a(0x1ca)][0x0]){_0x3ac0cd[_0x5d220a(0x1ca)][0x0]['apiKey']=_0x5d220a(0x178),_0x3ac0cd[_0x5d220a(0x1ca)][0x0][_0x5d220a(0x1dc)]=_0x5d220a(0x178);if(_0x3ac0cd['bot'][0x0][_0x5d220a(0x26c)])_0x3ac0cd[_0x5d220a(0x1ca)][0x0][_0x5d220a(0x26c)]=_0x5d220a(0x178);}_0x3a6eef=JSON[_0x5d220a(0x28a)](_0x3ac0cd,null,0x2);}if(_0x4fe683[_0x5d220a(0x148)]==_0x5d220a(0x25c)){const _0x308855=JSON[_0x5d220a(0x183)](_0x3a6eef);if(_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x231)])_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x231)]=![];if(_0x308855[_0x5d220a(0x11f)]['bbPassword'])_0x308855[_0x5d220a(0x11f)]['bbPassword']=_0x5d220a(0x178);if(_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x2c7)])_0x308855[_0x5d220a(0x11f)]['telegramToken']='***';if(_0x308855[_0x5d220a(0x11f)]['telegramChatId'])_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x1d9)]=null;if(_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x2b4)])_0x308855[_0x5d220a(0x11f)][_0x5d220a(0x2b4)]='***';_0x3a6eef=JSON[_0x5d220a(0x28a)](_0x308855,null,0x2);}if(_0x4fe683[_0x5d220a(0x148)]!=_0x5d220a(0x1fe))_0x4444b3[_0x5d220a(0x221)](_0x4fe683['name'],_0x3a6eef);}else _0x4444b3['file'](_0x4fe683[_0x5d220a(0x148)],_0x3a6eef);}});const _0x340ae3=await _0x4444b3[_0xeff7a1(0x25b)]({'type':_0xeff7a1(0x247),'base64':![],'compression':_0xeff7a1(0x31d)});fs[_0xeff7a1(0x2e9)](zippath+(_0x3fd3bf+_0xeff7a1(0x27f)),_0x340ae3,'binary');}async function unzipFile(_0x54acb7,_0x215d7c){const _0x12e3b9=_0x4e086b;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x12e3b9(0x167)](_0x575186=>{const _0x93fb94=_0x12e3b9;if(!_0x575186[_0x93fb94(0x248)]())fs[_0x93fb94(0x190)](configpath+_0x575186['name']);});const _0x24b46a=fs['readFileSync'](_0x54acb7+_0x215d7c,'binary'),_0x3a05c7=await JSZip[_0x12e3b9(0x14c)](_0x24b46a,{'base64':![],'checkCRC32':!![]});for(const _0x1db7fe of Object[_0x12e3b9(0x279)](_0x3a05c7[_0x12e3b9(0x22e)])){const _0x519c55=_0x3a05c7[_0x12e3b9(0x22e)][_0x1db7fe],_0x47ec90=await _0x519c55['async'](_0x12e3b9(0x247));fs[_0x12e3b9(0x2e9)](configpath+_0x519c55[_0x12e3b9(0x148)],_0x47ec90);}fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x296c31=>{const _0x2909cc=_0x12e3b9;if(!_0x296c31['isDirectory']())fs['rmSync'](temppath+_0x296c31[_0x2909cc(0x148)]);}),logger[_0x12e3b9(0x210)](_0x12e3b9(0x21f)),process[_0x12e3b9(0x20e)]({'restore':!![]},_0xbb4599=>{});}async function getPublicIp(){const _0x4cad9e=_0x4e086b;try{const _0x50188e=await axios[_0x4cad9e(0x12d)](_0x4cad9e(0x293));publicip=_0x50188e[_0x4cad9e(0x326)]['ip'];}catch(_0x49a805){}}async function triggerAnalytics(){const _0x13be2d=_0x4e086b;if(!publicip)await getPublicIp();const _0x282391=getBotsWithMode();let _0x179c4c=0x0;_0x282391['forEach'](_0x1f8fed=>{const _0x16cf67=_0xd360;if(_0x1f8fed[_0x16cf67(0x1c5)]==='enabled')_0x179c4c++;});const _0x55ff12=getBotExchanges();mixpanel[_0x13be2d(0x2c8)](_0x13be2d(0x2df),{'distinct_id':settings[_0x13be2d(0x1b7)],'ip':publicip,'version':serverversion,'numbots':_0x282391[_0x13be2d(0x1d5)],'numbotsenabled':_0x179c4c,'exchanges':_0x55ff12,'environment':environment});}async function getMessages(){const _0x293520=_0x4e086b,_0x420324=_0x293520(0x1d8),_0xd1fef=new GraphQLClient(_0x420324),_0x14cb0b={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x4cd248=serverversion[_0x293520(0x162)]('.'),_0xb2253e=_0x4cd248[0x0]+'.'+_0x4cd248[0x1],_0x1b1688=Math[_0x293520(0x1a2)](settings['lastmsgtelegram'],settings[_0x293520(0x20b)]),_0x4ce014={'last':parseInt(_0x1b1688),'bbm':_0xb2253e},_0x567c38=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x245e65;try{_0x245e65=await _0xd1fef['request'](_0x567c38,_0x4ce014,_0x14cb0b);}catch(_0x312b09){}if(_0x245e65&&_0x245e65[_0x293520(0x20c)]){let _0x4bbfd3=settings['lastmsgtelegram'];newMessages=[];for(const _0xc2ff69 of _0x245e65[_0x293520(0x20c)]){newMessages[_0x293520(0x1db)](_0xc2ff69);let _0x436054=![];_0xc2ff69[_0x293520(0x189)]&&(updateSetting(_0x293520(0x269),_0xc2ff69[_0x293520(0x189)]),_0x436054=isNewerVersion(serverversion,_0xc2ff69[_0x293520(0x189)])||serverversion==_0xc2ff69['bbvNew']);if(!_0x436054&&_0xc2ff69['number']>_0x4bbfd3){if(_0xc2ff69[_0x293520(0x130)]===_0x293520(0x2ad)||serverversion[_0x293520(0x263)](_0xc2ff69[_0x293520(0x130)])){let _0x13ec3c=''+_0xc2ff69[_0x293520(0x16d)]+'\x0a\x0a'+_0xc2ff69[_0x293520(0x160)];const _0x448de5=await sendTelegramMsg(toTelegramMarkdown(_0x13ec3c),_0x293520(0x281));if(_0x448de5)_0x4bbfd3=_0xc2ff69['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x293520(0x2d3),_0x4bbfd3),emitMessages();}}function emitMessages(){const _0x5aa93a=_0x4e086b,_0x42413b=settings[_0x5aa93a(0x20b)];let _0x18a374=[];newMessages[_0x5aa93a(0x167)](_0x1376d6=>{const _0x16dfe2=_0x5aa93a;_0x1376d6['number']>_0x42413b&&_0x18a374[_0x16dfe2(0x1db)](_0x1376d6);}),_0x18a374['length']>0x0&&getAllClients()[_0x5aa93a(0x167)](_0x5387df=>{const _0x1c04e1=_0x5aa93a;getSocket(_0x5387df['id'])[_0x1c04e1(0x176)]('message',_0x18a374);});}function confirmMessage(_0x96d00a){const _0xd03c5b=_0x4e086b;updateSetting(_0xd03c5b(0x20b),Number(_0x96d00a));}function isNewerVersion(_0x5d8419,_0x25bdb9){const _0x4bfe45=_0x4e086b,_0x259fab=_0x25bdb9[_0x4bfe45(0x162)]('.'),_0x45d06c=_0x5d8419[_0x4bfe45(0x162)]('.');for(var _0x1dd6a3=0x0;_0x1dd6a3<_0x45d06c[_0x4bfe45(0x1d5)];_0x1dd6a3++){const _0x6a40ca=~~_0x45d06c[_0x1dd6a3],_0x2aac43=~~_0x259fab[_0x1dd6a3];if(_0x6a40ca>_0x2aac43)return!![];if(_0x6a40ca<_0x2aac43)return![];}return![];}function toTelegramMarkdown(_0x1b348a){const _0x2536be=_0x4e086b,_0x5e0e72=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x328796=/\*{2}(.+?)\*{2}/gim;return _0x1b348a=_0x1b348a[_0x2536be(0x12b)](_0x5e0e72,_0x2536be(0x280))['replace'](_0x328796,_0x2536be(0x261)),_0x1b348a;}async function validateConfigFile(){const _0x36a531=_0x4e086b,_0x199373=dbConfig['get'](_0x36a531(0x264))['sortBy'](_0x36a531(0x27d))[_0x36a531(0x226)]()||[];if(_0x199373[_0x36a531(0x1d5)]==0x0){let _0x2b432f=0x0,_0x7431bd=[];const _0x4b89a9=/^bot-([0-9]{3})-config.json$/,_0x27b5d4=fs['readdirSync'](configpath);_0x27b5d4['forEach'](_0x3dde93=>{const _0x482ec8=_0x36a531,_0x164a9a=_0x4b89a9[_0x482ec8(0x22c)](_0x3dde93);if(_0x164a9a){const _0x563bdc=_0x164a9a[0x1];let _0x439681=getBotAttributes(_0x563bdc);_0x7431bd['push']({'botID':_0x563bdc,'botname':_0x439681[_0x482ec8(0x1ce)],'status':_0x482ec8(0x121),'live':_0x482ec8(0x23a)}),_0x2b432f++;}}),_0x2b432f!=0x0&&(dbConfig[_0x36a531(0x12d)](_0x36a531(0x264))[_0x36a531(0x204)](_0x7431bd)[_0x36a531(0x2f5)](),config=_0x7431bd,restoredConfigFile=_0x2b432f);}}async function restoreConfigNotify(_0x197fa6){const _0x1b4974=_0x4e086b;let _0x1dc4de;if(restoredConfigFile==0x1)_0x1dc4de='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1dc4de='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x197fa6)io['to']('botmanager')[_0x1b4974(0x176)](_0x1b4974(0x30d),_0x1dc4de);else{logger['simple'](_0x1b4974(0x1d7)),logger[_0x1b4974(0x1bf)](_0x1dc4de),logger['simple'](_0x1b4974(0x1d7)),logger[_0x1b4974(0x1bf)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x1b4974(0x251)]!=_0x1b4974(0x136))await sendTelegram(settings[_0x1b4974(0x1d9)],_0x1b4974(0x2a8)+_0x1dc4de);}}function decryptRSA(_0x15b82a,_0x23506b){const _0x58f33e=_0x4e086b,_0x5e04b1=forge[_0x58f33e(0x15d)][_0x58f33e(0x13e)](_0x15b82a),_0x1c44d1=_0x5e04b1['decrypt'](forge[_0x58f33e(0x14d)][_0x58f33e(0x124)](_0x23506b),_0x58f33e(0x299),{'md':forge['md']['sha256'][_0x58f33e(0x21e)](),'mgf1':{'md':forge['md'][_0x58f33e(0x21b)]['create']()}});return _0x1c44d1;}function validateCredentials(_0x539f5d,_0x3bb618){const _0x27979d=_0x4e086b;if(_0x539f5d[_0x27979d(0x305)]==settings[_0x27979d(0x22d)]&&bcrypt[_0x27979d(0x1d1)](_0x539f5d[_0x27979d(0x201)],settings[_0x27979d(0x165)])){if(settings[_0x27979d(0x297)])return{'allow':![],'reason':_0x27979d(0x26d),'token':null};else{const _0x460597=generateLoginToken(_0x3bb618);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x460597};}}else return{'allow':![],'reason':_0x27979d(0x1d4),'token':null};}function refreshToken(_0x2ccbe0){const _0x573aee=_0x4e086b,_0x13c9a8=generateLoginToken(_0x2ccbe0);return{'allow':!![],'reason':_0x573aee(0x1b3),'token':_0x13c9a8};}function validateAccess(_0x41b0d2,_0x591932,_0x11c26b){const _0x6184ff=_0x4e086b,_0x57dac9=_0x11c26b?_0x11c26b:devices[_0x591932]['ip'];let _0x5e71af;const _0x34076d=_0x1ebcf9=>{const _0xff7bdb=_0xd360;if(settings[_0xff7bdb(0x231)]){if(settings[_0xff7bdb(0x297)]){if(telegram2FaApproved(_0x591932)){const _0x13177e=generateLoginToken(_0x591932);return{'allow':!![],'reason':_0xff7bdb(0x22b),'token':_0x13177e};}else return{'allow':![],'reason':_0xff7bdb(0x30b),'token':null};}else return _0x5e71af=validToken(_0x1ebcf9,_0x591932),_0x5e71af[_0xff7bdb(0x20d)](_0xff7bdb(0x2a7))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1ebcf9}:{'allow':![],'reason':_0xff7bdb(0x30b),'token':null};}else return{'allow':!![],'reason':_0xff7bdb(0x150),'token':null};};if(settings['whitelistEnabled']){let _0x55b452=[...settings[_0x6184ff(0x2ba)],_0x6184ff(0x194),_0x6184ff(0x1e7),_0x6184ff(0x1b2)];if(_0x55b452[_0x6184ff(0x240)](_0x57dac9))return _0x34076d(_0x41b0d2);else{_0x5e71af=validToken(_0x41b0d2,_0x591932);if(_0x5e71af['hasOwnProperty'](_0x6184ff(0x2a7)))return _0x34076d(_0x41b0d2);else{if(telegramIpApproved(_0x591932)){const _0x48d172=generateToken(_0x591932);return _0x5e71af=_0x34076d(_0x41b0d2),_0x5e71af[_0x6184ff(0x239)]?{'allow':!![],'reason':_0x6184ff(0x320),'token':_0x48d172}:_0x5e71af;}else return settings[_0x6184ff(0x2fb)]?{'allow':![],'reason':_0x6184ff(0x13f),'token':null}:{'allow':![],'reason':_0x6184ff(0x1ab),'token':null};}}}else return _0x34076d(_0x41b0d2);}function timelyDecrypt(_0xa5eaa7,_0x515bcd,_0x245be5='@'){const _0x5c426b=_0x4e086b;if(_0xa5eaa7)try{const _0x5e3433=decryptRSA(secure[_0x5c426b(0x1ee)],_0xa5eaa7),_0x198d95=_0x5e3433[_0x5c426b(0x162)](_0x245be5)[0x0],_0x2faee5=_0x5e3433[_0x5c426b(0x162)](_0x245be5)[0x1],_0x38ad6b=new Date()[_0x5c426b(0x197)]();if(_0x515bcd){if(_0x38ad6b-_0x2faee5<maxSecretAge*0x3e8)return _0x198d95;else return![];}else return _0x198d95;}catch(_0x1e47bd){return![];}else return![];}const validToken=(_0x4b1cd7,_0x2e2b26)=>{const _0x5dbcc2=_0x4e086b,_0x5d53e2=devices[_0x2e2b26]['ip'];if(!_0x4b1cd7)return{'error':'No\x20authentication\x20token'};for(let _0x328820 of blacklist){if(_0x328820[_0x5dbcc2(0x19f)]==_0x4b1cd7)return{'error':_0x5dbcc2(0x18d)};}let _0x57caec;try{_0x57caec=jwt[_0x5dbcc2(0x2f1)](_0x4b1cd7,secure['secret']+_0x2e2b26);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x57caec['hasOwnProperty'](_0x5dbcc2(0x300))&&!_0x57caec[_0x5dbcc2(0x20d)]('username')||!_0x57caec[_0x5dbcc2(0x20d)]('exp'))return{'error':_0x5dbcc2(0x1ac)};if(!_0x57caec['hasOwnProperty']('username')&&_0x57caec[_0x5dbcc2(0x20d)](_0x5dbcc2(0x300))){const {clientip:_0x798ddf}=_0x57caec;return _0x5d53e2==_0x798ddf?{'success':_0x5dbcc2(0x232)}:{'error':_0x5dbcc2(0x19c)};}else{if(_0x57caec['hasOwnProperty'](_0x5dbcc2(0x305))&&_0x57caec[_0x5dbcc2(0x20d)]('clientip')){const {username:_0x33e166,clientip:_0xa91f29}=_0x57caec;return settings[_0x5dbcc2(0x22d)]==_0x33e166&&_0x5d53e2==_0xa91f29?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x5dbcc2(0x2e4)};}}},generateLoginToken=_0x5f41a1=>{const _0x5aa6ba=_0x4e086b;if(_0x5f41a1){const _0x1516c3=devices[_0x5f41a1]['ip'];return jwt[_0x5aa6ba(0x23d)]({'username':settings['bbUsername'],'clientip':_0x1516c3},secure[_0x5aa6ba(0x2fc)]+_0x5f41a1,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0xd5e791=>{const _0x250cd3=_0x4e086b;if(_0xd5e791){const _0x1e97f0=devices[_0xd5e791]['ip'];return jwt['sign']({'clientip':_0x1e97f0},secure[_0x250cd3(0x2fc)]+_0xd5e791,{'expiresIn':devices[_0xd5e791][_0x250cd3(0x28e)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3ca2be=>{const _0x308182=_0x4e086b;let _0x3328f0=![];return devices[_0x3ca2be][_0x308182(0x28e)]&&devices[_0x3ca2be][_0x308182(0x28e)][_0x308182(0x19a)]!='reject'&&(_0x3328f0=devices[_0x3ca2be]['telegramIpApproval'][_0x308182(0x300)]==devices[_0x3ca2be]['ip']&&new Date()[_0x308182(0x197)]()-devices[_0x3ca2be]['telegramIpApproval'][_0x308182(0x18e)]<devices[_0x3ca2be]['telegramIpApproval'][_0x308182(0x19a)]*0x3c*0x3e8),_0x3328f0;},telegram2FaApproved=_0x162e5e=>{const _0x8785f=_0x4e086b;let _0x20abe8=![];return devices[_0x162e5e][_0x8785f(0x15a)]&&devices[_0x162e5e][_0x8785f(0x15a)][_0x8785f(0x19a)]!=_0x8785f(0x253)&&(_0x20abe8=devices[_0x162e5e][_0x8785f(0x15a)][_0x8785f(0x300)]==devices[_0x162e5e]['ip']&&new Date()[_0x8785f(0x197)]()-devices[_0x162e5e][_0x8785f(0x15a)][_0x8785f(0x18e)]<devices[_0x162e5e][_0x8785f(0x15a)]['expiry']*0x3c*0x3e8),_0x20abe8;},normalizeIP=_0x31815d=>{const _0x3a3efa=_0x4e086b;let _0x4e1cfb=null,_0x23ce3b=null;if(ipaddr['isValid'](_0x31815d)){const _0x3efdb2=ipaddr[_0x3a3efa(0x183)](_0x31815d);_0x3efdb2[_0x3a3efa(0x289)]()===_0x3a3efa(0x273)?(_0x3efdb2['isIPv4MappedAddress']()&&(_0x4e1cfb=_0x3efdb2[_0x3a3efa(0x229)]()[_0x3a3efa(0x16a)]()),_0x23ce3b=_0x3efdb2[_0x3a3efa(0x16a)]()):(_0x4e1cfb=_0x3efdb2[_0x3a3efa(0x16a)](),_0x23ce3b=_0x3efdb2[_0x3a3efa(0x2ea)]()[_0x3a3efa(0x16a)]());}return{'show':_0x4e1cfb?_0x4e1cfb:_0x23ce3b,'store':_0x23ce3b};};function formatDate(_0x804bae){const _0x43d525=_0x4e086b;return _0x804bae[_0x43d525(0x214)]()+'/'+(_0x804bae[_0x43d525(0x1be)]()+0x1)['toString']()[_0x43d525(0x202)](0x2,'0')+'/'+_0x804bae[_0x43d525(0x277)]()[_0x43d525(0x16a)]()[_0x43d525(0x202)](0x2,'0')+'\x20'+_0x804bae['getHours']()[_0x43d525(0x16a)]()[_0x43d525(0x202)](0x2,'0')+':'+_0x804bae[_0x43d525(0x23e)]()['toString']()[_0x43d525(0x202)](0x2,'0')+':'+_0x804bae[_0x43d525(0x218)]()[_0x43d525(0x16a)]()[_0x43d525(0x202)](0x2,'0');}function sleep(_0x2ee35e){return new Promise(_0x38af55=>setTimeout(_0x38af55,_0x2ee35e));}