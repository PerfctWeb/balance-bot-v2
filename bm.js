const _0xaf525f=_0x2f67;(function(_0x16e547,_0x4c7ca5){const _0x50af4c=_0x2f67,_0xd3d77f=_0x16e547();while(!![]){try{const _0x57f49d=parseInt(_0x50af4c(0x1ae))/0x1+parseInt(_0x50af4c(0x1f3))/0x2*(-parseInt(_0x50af4c(0x1fe))/0x3)+parseInt(_0x50af4c(0x256))/0x4+parseInt(_0x50af4c(0x1b0))/0x5*(-parseInt(_0x50af4c(0x257))/0x6)+parseInt(_0x50af4c(0x210))/0x7*(parseInt(_0x50af4c(0x198))/0x8)+parseInt(_0x50af4c(0x2a8))/0x9+parseInt(_0x50af4c(0x251))/0xa*(-parseInt(_0x50af4c(0x1d3))/0xb);if(_0x57f49d===_0x4c7ca5)break;else _0xd3d77f['push'](_0xd3d77f['shift']());}catch(_0x2142ef){_0xd3d77f['push'](_0xd3d77f['shift']());}}}(_0x3ed8,0xeaa11));const _0x4b5506=function(){let _0x59bcf7=!![];return function(_0x52cf2a,_0x20f6a7){const _0x3630b8=_0x59bcf7?function(){const _0x57b4db=_0x2f67;if(_0x20f6a7){const _0x4ffdaf=_0x20f6a7[_0x57b4db(0x1dc)](_0x52cf2a,arguments);return _0x20f6a7=null,_0x4ffdaf;}}:function(){};return _0x59bcf7=![],_0x3630b8;};}(),_0x4d8d37=_0x4b5506(this,function(){const _0x6f4efe=_0x2f67;return _0x4d8d37[_0x6f4efe(0x2cf)]()[_0x6f4efe(0x1f5)](_0x6f4efe(0x1c7))[_0x6f4efe(0x2cf)]()[_0x6f4efe(0x19a)](_0x4d8d37)[_0x6f4efe(0x1f5)]('(((.+)+)+)+$');});_0x4d8d37();'use strict';process[_0xaf525f(0x1a5)][_0xaf525f(0x1bb)]=0x1;const childProcess=require(_0xaf525f(0x235)),FileSync=require(_0xaf525f(0x234)),fs=require('fs'),fns=require(_0xaf525f(0x2a6)),low=require(_0xaf525f(0x243)),path=require(_0xaf525f(0x280)),crypto=require(_0xaf525f(0x1da)),Crypt=require(_0xaf525f(0x240))['Crypt'],RSA=require(_0xaf525f(0x240))[_0xaf525f(0x289)],bcrypt=require(_0xaf525f(0x28b)),jwt=require('jsonwebtoken'),analyticsLib=require(_0xaf525f(0x268))['default'],googleAnalytics=require(_0xaf525f(0x1bd))[_0xaf525f(0x2cc)],ipaddr=require(_0xaf525f(0x1ee)),argv=require(_0xaf525f(0x233))(process[_0xaf525f(0x2a4)]['slice'](0x2))[_0xaf525f(0x2a4)],PORT=argv[_0xaf525f(0x1b7)]||_0xaf525f(0x2c5),pattern=/^[0-9]{2,4}$/;!pattern[_0xaf525f(0x1d6)](PORT)&&(console[_0xaf525f(0x1cf)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0xaf525f(0x1ce)](0x1));const HOST=argv[_0xaf525f(0x253)]||null,userID=argv[_0xaf525f(0x20c)]||'';let bbpath=_0xaf525f(0x252),bbpath2='';const botfile=_0xaf525f(0x1b8),configfile=_0xaf525f(0x1ea),settingsfile=_0xaf525f(0x20e),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xaf525f(0x20d)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0xaf525f(0x18d),configbackuppath=configpath+_0xaf525f(0x26a);!fs[_0xaf525f(0x1a3)](configpath)&&fs[_0xaf525f(0x245)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0xaf525f(0x245)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xaf525f(0x2c0)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xaf525f(0x2c0)]({'settings':{'timeshift':0x0}})[_0xaf525f(0x200)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xaf525f(0x2c0)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0xaf525f(0x283),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xaf525f(0x230))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0xaf525f(0x1e8))[_0xaf525f(0x270)](app);app[_0xaf525f(0x29c)](express[_0xaf525f(0x2d5)](path['join'](__dirname,bbpath2,_0xaf525f(0x1e5)))),app['use'](express[_0xaf525f(0x2d5)](path['join'](__dirname,bbpath2,_0xaf525f(0x1ef)))),app[_0xaf525f(0x2bc)]('/',function(_0xf11044,_0x21b61d){const _0x125938=_0xaf525f;_0x21b61d[_0x125938(0x22f)](path[_0x125938(0x2b3)](__dirname,bbpath2,_0x125938(0x1e5),_0x125938(0x1c9)));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x264),function(_0x1ff30b,_0x1db3c2){const _0x56f93a=_0xaf525f;_0x1db3c2['sendFile'](path[_0x56f93a(0x2b3)](__dirname,bbpath2,_0x56f93a(0x1ef),_0x56f93a(0x1c9)));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x2e0),(_0x29ebe5,_0x3ae8cd)=>{const _0x183b98=_0xaf525f;_0x3ae8cd[_0x183b98(0x22f)](path[_0x183b98(0x2b3)](__dirname,bbpath2,_0x183b98(0x1ef),'index.html'));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x260),(_0x462e9d,_0x5c9477)=>{const _0x47e477=_0xaf525f;_0x5c9477[_0x47e477(0x22f)](path['join'](__dirname,bbpath2,_0x47e477(0x1ef),_0x47e477(0x1c9)));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x22a),(_0x341be7,_0x1f7035)=>{const _0x15d694=_0xaf525f;_0x1f7035[_0x15d694(0x22f)](path[_0x15d694(0x2b3)](__dirname,bbpath2,_0x15d694(0x1ef),'index.html'));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x250),(_0x50bbbf,_0x115b03)=>{const _0x2784e0=_0xaf525f;_0x115b03[_0x2784e0(0x22f)](path[_0x2784e0(0x2b3)](__dirname,bbpath2,_0x2784e0(0x1ef),'index.html'));}),app[_0xaf525f(0x2bc)]('/:bot/configuration',(_0x94e8a7,_0x786d9f)=>{const _0x1495d2=_0xaf525f;_0x786d9f[_0x1495d2(0x22f)](path[_0x1495d2(0x2b3)](__dirname,bbpath2,_0x1495d2(0x1ef),_0x1495d2(0x1c9)));}),app[_0xaf525f(0x2bc)](_0xaf525f(0x28f),(_0x5f4144,_0x519f3e)=>{const _0x29c9b8=_0xaf525f;_0x519f3e['sendFile'](path[_0x29c9b8(0x2b3)](__dirname,bbpath2,_0x29c9b8(0x1ef),_0x29c9b8(0x1c9)));});if(HOST)http['listen'](PORT,HOST);else http[_0xaf525f(0x1c8)](PORT);function _0x2f67(_0x458411,_0x2e1815){const _0x535db4=_0x3ed8();return _0x2f67=function(_0x4d8d37,_0x4b5506){_0x4d8d37=_0x4d8d37-0x18a;let _0x3ed8db=_0x535db4[_0x4d8d37];return _0x3ed8db;},_0x2f67(_0x458411,_0x2e1815);}const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0xaf525f(0x1eb)]&&settings[_0xaf525f(0x1eb)]!=''&&settings[_0xaf525f(0x26e)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2cec25=_0xaf525f;console[_0x2cec25(0x1cf)](''),console[_0x2cec25(0x1cf)](_0x2cec25(0x2ce)),logging(_0x2cec25(0x29e)+PORT),console['log'](_0x2cec25(0x2ce));if(config[_0x2cec25(0x2ac)]!=0x0)config[_0x2cec25(0x2c4)](_0xfbaa3f=>{const _0x7c1a42=_0x2cec25;if(_0xfbaa3f[_0x7c1a42(0x2bf)]==_0x7c1a42(0x2dc)||_0xfbaa3f[_0x7c1a42(0x2bf)]==_0x7c1a42(0x1ed))logging(_0x7c1a42(0x18e)+_0xfbaa3f[_0x7c1a42(0x192)]+_0x7c1a42(0x2be)+_0xfbaa3f[_0x7c1a42(0x1b1)]),startBot([_0xfbaa3f['botID'],userID],{'cwd':bbpath},function(_0x9e8ddf){if(_0x9e8ddf)logging(_0x9e8ddf);});else(_0xfbaa3f[_0x7c1a42(0x2bf)]==_0x7c1a42(0x18b)||_0xfbaa3f['status']==_0x7c1a42(0x239))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0xfbaa3f[_0x7c1a42(0x192)]+_0x7c1a42(0x2be)+_0xfbaa3f['botname']);});else!newBot&&console['log'](_0x2cec25(0x2e1));if(newBot)addBot();console[_0x2cec25(0x1cf)]('-----------------------------------------------------------------------------------'),console[_0x2cec25(0x1cf)]('');}function startSocket(){io['on']('connection',_0x1fe791=>{const _0x4d9417=_0x2f67;let _0x563bff,_0x30a8d1,_0x3e1366,_0x36d0c9,_0x548cc5;const _0x53ef8c=_0x1fe791[_0x4d9417(0x2d1)][_0x4d9417(0x287)][_0x4d9417(0x208)];_0x30a8d1=_0x53ef8c[_0x4d9417(0x218)](/bot[0-9]{3}/);if(_0x30a8d1)_0x3e1366=_0x30a8d1[0x0]['match'](/[0-9]{3}/);if(_0x3e1366)_0x563bff=_0x3e1366[0x0];else _0x563bff=_0x4d9417(0x196);const _0x1997c1=_0x1fe791[_0x4d9417(0x2d1)]['auth'][_0x4d9417(0x1f4)];if(!_0x1997c1)_0x1fe791[_0x4d9417(0x201)]('status',{'publicKey':secure['publicKey']});else{_0x36d0c9=timelyDecrypt(_0x1997c1,![]);if(!_0x36d0c9)_0x1fe791[_0x4d9417(0x201)](_0x4d9417(0x2bf),{'publicKey':secure[_0x4d9417(0x2d0)]});else{_0x548cc5=normalizeIP(_0x1fe791[_0x4d9417(0x2af)]['remoteAddress'])[_0x4d9417(0x190)];if(!devices[_0x36d0c9])devices[_0x36d0c9]={'uuid':_0x36d0c9,'access':{'token':null}};devices[_0x36d0c9]['ip']=_0x548cc5;const _0x4f3c26=addClient(_0x1fe791['id'],_0x36d0c9,_0x563bff);setAccess(_0x4f3c26),_0x1fe791['on'](_0x4d9417(0x24a),_0x34d6d0=>{const _0x1bbd8a=_0x4d9417,_0x128bce=timelyDecrypt(_0x34d6d0['password']);if(_0x128bce){_0x34d6d0={'username':_0x34d6d0[_0x1bbd8a(0x20f)],'password':_0x128bce},devices[_0x36d0c9][_0x1bbd8a(0x21d)]=validateCredentials(_0x34d6d0,_0x36d0c9);if(devices[_0x36d0c9]['access'][_0x1bbd8a(0x2c9)]==![]&&devices[_0x36d0c9]['access']['reason']=='2FA\x20login\x20required')_0x1fe791['emit'](_0x1bbd8a(0x2bf),{'access':devices[_0x36d0c9][_0x1bbd8a(0x21d)]}),loginAccess2FA(_0x36d0c9,_0x548cc5);else{if(devices[_0x36d0c9][_0x1bbd8a(0x21d)][_0x1bbd8a(0x2c9)]==![]&&devices[_0x36d0c9][_0x1bbd8a(0x21d)][_0x1bbd8a(0x246)]==_0x1bbd8a(0x2b5))_0x1fe791[_0x1bbd8a(0x201)](_0x1bbd8a(0x2bf),{'access':devices[_0x36d0c9][_0x1bbd8a(0x21d)]});else devices[_0x36d0c9]['access'][_0x1bbd8a(0x2c9)]&&devices[_0x36d0c9][_0x1bbd8a(0x21d)][_0x1bbd8a(0x246)]==_0x1bbd8a(0x295)&&(getClientsWithUuid(_0x36d0c9)[_0x1bbd8a(0x2c4)](_0x1aa9ac=>{setAccess(_0x1aa9ac);}),setTokenRefresh(_0x36d0c9),setSessionTimeout(_0x1bbd8a(0x24a),_0x36d0c9));}}else logging(_0x1bbd8a(0x236));}),_0x1fe791['on'](_0x4d9417(0x1e1),()=>{resetPassword();}),_0x1fe791['on'](_0x4d9417(0x23c),_0x128fab=>{removeClient(_0x1fe791['id']);});}}});}function initClient(_0x2e650b){const _0xac9af2=_0xaf525f;if(_0x2e650b!=_0xac9af2(0x196)&&config[_0xac9af2(0x19c)]!=''){if(pid[_0x2e650b])pid[_0x2e650b]['send']({'function':_0xac9af2(0x28a),'args':null});}}function getSocket(_0x7467b8){const _0x150301=_0xaf525f;return io[_0x150301(0x21c)][_0x150301(0x21c)]['get'](_0x7467b8);}function setAccess(_0x56ac24){const _0x58f6c1=_0xaf525f,_0x536f30=getSocket(_0x56ac24['id']),_0x195c2d=_0x56ac24[_0x58f6c1(0x1e2)],_0x254144=_0x56ac24[_0x58f6c1(0x282)];devices[_0x195c2d][_0x58f6c1(0x21d)]=validateAccess(devices[_0x195c2d][_0x58f6c1(0x21d)][_0x58f6c1(0x272)],_0x195c2d),_0x536f30['join'](_0x195c2d);if(devices[_0x195c2d][_0x58f6c1(0x21d)][_0x58f6c1(0x2c9)]){_0x536f30['join'](_0x254144);if(_0x254144==_0x58f6c1(0x196))initializeSocketBotManager(_0x536f30);else initializeSocketBot(_0x536f30);initClient(_0x254144);}devices[_0x195c2d][_0x58f6c1(0x21d)][_0x58f6c1(0x272)]&&devices[_0x195c2d][_0x58f6c1(0x21d)][_0x58f6c1(0x246)]==_0x58f6c1(0x219)&&setSessionTimeout(_0x58f6c1(0x1f0),_0x195c2d),devices[_0x195c2d]['access'][_0x58f6c1(0x272)]&&devices[_0x195c2d][_0x58f6c1(0x21d)]['reason']==_0x58f6c1(0x19f)&&setSessionTimeout(_0x58f6c1(0x24a),_0x195c2d),_0x536f30['emit'](_0x58f6c1(0x2bf),{'status':_0x56ac24[_0x58f6c1(0x214)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x195c2d]['access'],'externalip':devices[_0x195c2d]['ip'],'publicKey':secure[_0x58f6c1(0x2d0)],'validInstallation':validInstallation}),devices[_0x195c2d][_0x58f6c1(0x21d)][_0x58f6c1(0x2c9)]==![]&&devices[_0x195c2d]['access'][_0x58f6c1(0x246)]==_0x58f6c1(0x28c)&&temporaryAccess2FA(_0x195c2d,devices[_0x195c2d]['ip']);}function setSessionTimeout(_0x27340f,_0x1bae0f){const _0x1a458e=_0xaf525f;let _0x3da57e;if(_0x27340f==_0x1a458e(0x24a))_0x3da57e=loginExpiry*0x3c*0x3e8;else _0x3da57e=devices[_0x1bae0f][_0x1a458e(0x1a4)][_0x1a458e(0x292)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x1bae0f][_0x1a458e(0x1a4)][_0x1a458e(0x24c)]);if(devices[_0x1bae0f][_0x1a458e(0x191)])clearTimeout(devices[_0x1bae0f]['pidExpireLogin']);devices[_0x1bae0f][_0x1a458e(0x191)]=setTimeout(()=>{const _0x1d4218=_0x1a458e;if(devices[_0x1bae0f][_0x1d4218(0x2e2)])clearTimeout(devices[_0x1bae0f][_0x1d4218(0x2e2)]);removeSocketListeners(_0x1bae0f),addBlacklist(_0x1bae0f),devices[_0x1bae0f]['telegramIpApproval']=null,devices[_0x1bae0f]['telegram2FaApproval']=null,devices[_0x1bae0f]['access'][_0x1d4218(0x272)]=null,devices[_0x1bae0f][_0x1d4218(0x21d)]=validateAccess(devices[_0x1bae0f][_0x1d4218(0x21d)][_0x1d4218(0x272)],_0x1bae0f),!(devices[_0x1bae0f][_0x1d4218(0x21d)][_0x1d4218(0x2c9)]&&devices[_0x1bae0f]['access']['reason']==_0x1d4218(0x1d4))&&(_0x27340f=='login'?io['to'](_0x1bae0f)['emit'](_0x1d4218(0x2bf),{'access':{'allow':![],'reason':_0x1d4218(0x2a0),'token':null}}):io['to'](_0x1bae0f)['emit'](_0x1d4218(0x2bf),{'access':{'allow':![],'reason':_0x1d4218(0x18f),'token':null}})),devices[_0x1bae0f][_0x1d4218(0x21d)][_0x1d4218(0x272)]=null;},_0x3da57e);}function setTokenRefresh(_0x34f96b){const _0x4e7884=_0xaf525f;if(devices[_0x34f96b][_0x4e7884(0x2e2)])clearTimeout(devices[_0x34f96b][_0x4e7884(0x2e2)]);devices[_0x34f96b][_0x4e7884(0x2e2)]=setTimeout(()=>{const _0x52fa1d=_0x4e7884;getClientsWithUuid(_0x34f96b)['length']!=0x0?(devices[_0x34f96b][_0x52fa1d(0x21d)]=refreshToken(_0x34f96b),io['to'](_0x34f96b)[_0x52fa1d(0x201)]('status',{'status':_0x52fa1d(0x24d),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x34f96b]['access'],'externalip':devices[_0x34f96b]['ip'],'publicKey':secure[_0x52fa1d(0x2d0)],'validInstallation':validInstallation}),setTokenRefresh(_0x34f96b)):clearTimeout(devices[_0x34f96b]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function _0x3ed8(){const _0x5801c9=['/:bot/portfolio','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','pidRefreshToken','stopPolling','compareSync','temporary\x20access\x20not\x20allowed','isIPv4MappedAddress','store-configuration','storeHeadless','getMinutes','disabled','once','config/','starting\x20bot\x20|\x20Bot\x20','temporary\x20access\x20timeout','store','pidExpireLogin','botID','live','hasOwnProperty','update-bb','botmanager','get-logs','16CxdkCW','function','constructor','No\x20bots\x20running\x20right\x20now','apiKey','filter','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','2FA\x20login\x20token\x20generated','restarting\x20Bot\x20','/restart\x20-\x20restart\x20bot(s)\x0a','get-portfolio','existsSync','telegramIpApproval','env','generateKeyPairAsync','entries','5\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','chat','alerts','store-headless','\x20only\x0a','1852886vcbFzo','onText','45baRzpA','botname','cancelLoading','stopped','decrypt','orders','Notifications\x20enabled','port','bot.js','\x20mode','getHours','NTBA_FIX_319','event','@analytics/google-analytics','/on\x20-\x20start\x20bot(s)\x0a','push','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Bot\x20Mgr\x20>\x20','Notifications\x20disabled\x0a','kill','settings','started','parse','(((.+)+)+)+$','listen','index.html','Notifications\x20disabled','auto','unlinkSync','blacklist','exit','log','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','starting\x20new\x20bot\x20|\x20Bot\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','10045629WVmHNW','login\x20not\x20required','hex','test','sortBy','/off\x20-\x20stop\x20bot(s)\x0a','bbUsername','crypto','set','apply','data','readFileSync','Unauthorized\x20attempt\x20to\x20add\x20bot','placeOrder','reset-password','uuid','all','1000','build2','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Notifications\x20types:\x20','http','enabled\x20Bot\x20','bb-config.json','telegramToken','type','new','ipaddr.js','build','2FA','add-bot','Login\x20accepted','1848692vrDetJ','encryptedUuid','search','deleted\x20Bot\x20','All\x20bots\x20running\x20right\x20now','settings.','No\x20authentication\x20token','updatebotmanager','temporary\x20access\x20rejected','2FA\x20login\x20required','secret','6CXLnBI','Bot\x20','write','emit','::ffff:127.0.0.1','Password\x20reset\x20rejected','disabled\x20Bot\x20','map','restart','show','referer','from','whitelist','order','user','clients','bb-settings.json','username','5753307fMNuou','args','telegramEnabled','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','server','removeAllListeners','login\x20token\x20valid','Unauthorized\x20attempt\x20to\x20delete\x20alerts','match','temporary\x20token\x20generated','telegramEvents','find','sockets','access','verify','Unauthorized\x20attempt\x20to\x20get\x20portfolio','storeConfiguration','<b>Telegram\x20Bot\x20Status:</b>\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','catch','running','/disable\x20-\x20disable\x20notifications\x0a','send','************',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Notifications\x20enabled\x0a','/:bot/coins','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Access\x20enabled\x20for\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','login\x20required','sendFile','version.json','cloneDeep','temporaryAccessAllowed','yargs/yargs','lowdb/adapters/FileSync','child_process','Unauthorized\x20login\x20attempt\x20(timeout)','telegramChatId','manual','new-disabled','getTime','removeListener','disconnect','padStart','getPortfolio','message','hybrid-crypto-js','notification','reject','lowdb','30\x20min','mkdirSync','reason','All\x20bots','getUTCHours','telegram','login','https://hodlerhacks.com','timestamp','connected','Invalid\x20Telegram\x20token','\x20>\x20','/:bot/history','10jfRBMN','bb/','host','then','callback_query','1551808wKXgyi','1209066IeOMSK','split','f2aRequired','getDate','inherit','clientip','Token\x20blacklisted','\x20to\x20','Balance\x20Bot\x20Server','/:bot/performance','-results.json','127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/:bot','toIPv4Address','delete-alerts','bbPassword','analytics','/names\x20-\x20show\x20bot\x20names\x0a','backup/','Invalid\x20username\x20or\x20IP\x20address','error\x20while\x20deleting\x20config\x20files:\x20','isValid','telegramUsername','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','createServer','readdirSync','token','telegram2FaApproval','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','headless','Password\x20has\x20been\x20reset\x20to:\x20','-performance.json','logout','</b>\x20?','User\x20has\x20been\x20validated','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Orders','Invalid\x20authentication\x20token\x20(1)','store-settings','max','path','name','bot','sha256','getFullYear','success','accept','headers','value','RSA','initclient','bcryptjs','2FA\x20required','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','whitelistEnabled','/:bot/support','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Alerts','expiry','error','getStartingBalances','login\x20token\x20generated','bot-','page','place-order','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','keys','404\x20Not\x20Found','use','add','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','hashSync','access\x20timeout','bots','password','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','argv','secure','date-fns','exp','14867379GPJoeS','remove','sendMessage','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','length','getMonth','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','conn','get-starting-balances','mode','stop','join','Unauthorized\x20attempt\x20to\x20update\x20bot','invalid\x20credentials','yes','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20update\x20settings','answerCallbackQuery','timeshift','15\x20min','get','deleteHistoryAlerts','\x20|\x20','status','defaults','-events.json','getSeconds','writeFileSync','forEach','3000','logged\x20out','ipv6','Unauthorized\x20attempt\x20to\x20store\x20configuration','allow','Invalid\x20IP\x20address','sign','default','loginRequired','-----------------------------------------------------------------------------------','toString','publicKey','handshake','reload','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','privateKey','static','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/help\x20-\x20show\x20available\x20commands\x0a','HTML','::1','Unauthorized\x20attempt\x20to\x20log\x20out','Temporary\x20access\x20rejected','enabled','includes','SIGTERM','assign'];_0x3ed8=function(){return _0x5801c9;};return _0x3ed8();}function initializeSocketBotManager(_0x546a6b){const _0x57bb54=_0xaf525f,_0x4b026e=getClient(_0x546a6b['id'])['uuid'];_0x546a6b[_0x57bb54(0x201)](_0x57bb54(0x2a1),config),_0x546a6b[_0x57bb54(0x201)](_0x57bb54(0x1c4),cleanSettings()),_0x546a6b['on'](_0x57bb54(0x1f1),_0x23ef15=>{const _0xe6753e=_0x57bb54;if(validateAccess(_0x23ef15,_0x4b026e)['allow'])addBot();else logging(_0xe6753e(0x1df));}),_0x546a6b['on']('update-bot',(_0x48f261,_0x5a9961)=>{const _0x4bcb70=_0x57bb54;if(validateAccess(_0x5a9961,_0x4b026e)[_0x4bcb70(0x2c9)])toggleBot(_0x48f261[_0x4bcb70(0x192)],_0x48f261[_0x4bcb70(0x2bf)],_0x48f261[_0x4bcb70(0x193)]);else logging(_0x4bcb70(0x2b4));}),_0x546a6b['on']('toggle-bot-mode',(_0x4beee8,_0x4b8f12)=>{const _0x48645d=_0x57bb54;if(validateAccess(_0x4b8f12,_0x4b026e)[_0x48645d(0x2c9)])toggleBotMode(_0x4beee8);else logging(_0x48645d(0x2b4));}),_0x546a6b['on']('delete-bot',(_0xfe310a,_0x4b41b8)=>{const _0x3f25db=_0x57bb54;if(validateAccess(_0x4b41b8,_0x4b026e)[_0x3f25db(0x2c9)])deleteBot(_0xfe310a);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x546a6b['on'](_0x57bb54(0x27e),(_0x253169,_0x5a6e92)=>{const _0x5686fb=_0x57bb54;if(validateAccess(_0x5a6e92,_0x4b026e)['allow'])storeSettings(_0x253169,!![]);else logging(_0x5686fb(0x2b8));}),_0x546a6b['on'](_0x57bb54(0x195),_0x4a801d=>{const _0x184075=_0x57bb54;if(validateAccess(_0x4a801d,_0x4b026e)[_0x184075(0x2c9)])updateBB();else logging(_0x184075(0x2a3));}),_0x546a6b['on'](_0x57bb54(0x278),_0x3c246e=>{const _0x400841=_0x57bb54;if(validateAccess(_0x3c246e,_0x4b026e)['allow']){if(devices[_0x4b026e][_0x400841(0x2e2)])clearTimeout(devices[_0x4b026e][_0x400841(0x2e2)]);if(devices[_0x4b026e]['pidExpireLogin'])clearTimeout(devices[_0x4b026e]['pidExpireLogin']);removeSocketListeners(getClient(_0x546a6b['id'])[_0x400841(0x1e2)]),addBlacklist(_0x4b026e),devices[_0x4b026e][_0x400841(0x1a4)]=null,devices[_0x4b026e]['telegram2FaApproval']=null,devices[_0x4b026e][_0x400841(0x21d)]['token']=null,io['to'](getClient(_0x546a6b['id'])['uuid'])['emit'](_0x400841(0x2bf),{'access':{'allow':![],'reason':_0x400841(0x2c6),'token':null}});}else logging(_0x400841(0x2da));});}function initializeSocketBot(_0x3430d8){const _0x2933d2=_0xaf525f,_0x5e88cd=getClient(_0x3430d8['id'])[_0x2933d2(0x282)],_0x12e38a=getClient(_0x3430d8['id'])[_0x2933d2(0x1e2)];_0x3430d8['on'](_0x2933d2(0x197),(_0x37d9d0,_0x4fa673)=>{const _0x1f475c=_0x2933d2;if(validateAccess(_0x4fa673,_0x12e38a)[_0x1f475c(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd][_0x1f475c(0x226)]({'function':'emitHistory','args':_0x37d9d0});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x3430d8['on'](_0x2933d2(0x266),(_0x376238,_0x248766)=>{const _0x1ca007=_0x2933d2;if(validateAccess(_0x248766,_0x12e38a)[_0x1ca007(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd]['send']({'function':_0x1ca007(0x2bd),'args':_0x376238});}else logging(_0x1ca007(0x217));}),_0x3430d8['on'](_0x2933d2(0x1a2),(_0x514440,_0x437545)=>{const _0x8f042d=_0x2933d2;if(validateAccess(_0x437545,_0x12e38a)[_0x8f042d(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd][_0x8f042d(0x226)]({'function':_0x8f042d(0x23e),'args':_0x514440});}else logging(_0x8f042d(0x21f));}),_0x3430d8['on'](_0x2933d2(0x2e7),(_0x295c93,_0x31cfde)=>{const _0x4b87f8=_0x2933d2;if(validateAccess(_0x31cfde,_0x12e38a)[_0x4b87f8(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd]['send']({'function':_0x4b87f8(0x220),'args':_0x295c93});}else logging(_0x4b87f8(0x2c8));}),_0x3430d8['on'](_0x2933d2(0x1ac),(_0x59b258,_0x309a50)=>{const _0x1e3978=_0x2933d2;if(validateAccess(_0x309a50,_0x12e38a)[_0x1e3978(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd][_0x1e3978(0x226)]({'function':_0x1e3978(0x2e8),'args':_0x59b258});}else logging(_0x1e3978(0x19e));}),_0x3430d8['on'](_0x2933d2(0x2b0),_0x4efc55=>{const _0x591deb=_0x2933d2;if(validateAccess(_0x4efc55,_0x12e38a)[_0x591deb(0x2c9)]){if(pid[_0x5e88cd])pid[_0x5e88cd]['send']({'function':_0x591deb(0x294),'args':null});}else logging(_0x591deb(0x1d0));}),_0x3430d8['on'](_0x2933d2(0x298),(_0x2280a3,_0x2a8b2b)=>{const _0x1a7d3b=_0x2933d2;if(validateAccess(_0x2a8b2b,_0x12e38a)['allow']){if(pid[_0x5e88cd])pid[_0x5e88cd]['send']({'function':_0x1a7d3b(0x1e0),'args':_0x2280a3});}else logging(_0x1a7d3b(0x290));}),_0x3430d8['on']('cancel-loading',_0x4a2b26=>{const _0x59c1f8=_0x2933d2;if(validateAccess(_0x4a2b26,_0x12e38a)['allow']){if(pid[_0x5e88cd])pid[_0x5e88cd][_0x59c1f8(0x226)]({'function':_0x59c1f8(0x1b2),'args':null});}else logging(_0x59c1f8(0x213));}),_0x3430d8['on'](_0x2933d2(0x278),_0x4f6f33=>{const _0x25a65a=_0x2933d2;if(validateAccess(_0x4f6f33,_0x12e38a)[_0x25a65a(0x2c9)]){if(devices[_0x12e38a][_0x25a65a(0x2e2)])clearTimeout(devices[_0x12e38a][_0x25a65a(0x2e2)]);if(devices[_0x12e38a][_0x25a65a(0x191)])clearTimeout(devices[_0x12e38a][_0x25a65a(0x191)]);removeSocketListeners(getClient(_0x3430d8['id'])['uuid']),addBlacklist(_0x12e38a),devices[_0x12e38a]['telegramIpApproval']=null,devices[_0x12e38a]['telegram2FaApproval']=null,devices[_0x12e38a]['access']['token']=null,io['to'](getClient(_0x3430d8['id'])[_0x25a65a(0x1e2)])[_0x25a65a(0x201)](_0x25a65a(0x2bf),{'access':{'allow':![],'reason':_0x25a65a(0x2c6),'token':null}});}else logging(_0x25a65a(0x2da));});}function removeSocketListeners(_0x2ff26b){getClientsWithUuid(_0x2ff26b)['forEach'](_0x4f837a=>{const _0x5c3aad=_0x2f67;getSocket(_0x4f837a['id'])[_0x5c3aad(0x215)]();});}function cleanSettings(){const _0x5ba675=_0xaf525f;let _0x4e7f84=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x4e7f84={..._0x4e7f84,'telegramToken':'************'}),settings[_0x5ba675(0x267)]&&settings['bbPassword']!=''&&(_0x4e7f84={..._0x4e7f84,'bbPassword':_0x5ba675(0x227)}),_0x4e7f84;}function updateBB(){const _0x1fef19=_0xaf525f;installingUpdate=!![],config[_0x1fef19(0x2c4)](_0x14578e=>{const _0x3d09e8=_0x1fef19;restartBot(_0x14578e[_0x3d09e8(0x192)]);}),process[_0x1fef19(0x226)]({'update':!![]},_0x536a97=>{});}function startBot(_0x1b207b,_0x2d91f9,_0x3f9a20){const _0x730ce3=_0xaf525f;let _0x104e66=![];const _0x657901=_0x1b207b[0x0];_0x2d91f9={..._0x2d91f9,'stdio':[_0x730ce3(0x25b),_0x730ce3(0x25b),_0x730ce3(0x25b),'ipc']},pid[_0x657901]=childProcess['fork'](botfile,_0x1b207b,_0x2d91f9),pid[_0x657901]['on'](_0x730ce3(0x23f),_0x5d0c28=>{const _0xe908f9=_0x730ce3;switch(Object[_0xe908f9(0x29a)](_0x5d0c28)[0x0]){case _0xe908f9(0x1b1):updateBotName(_0x657901,_0x5d0c28[_0xe908f9(0x1b1)]);break;case _0xe908f9(0x1fa):updateBotManager();break;case'status':updateStatus(_0x657901,_0x5d0c28['status']);break;case'live':updateLive(_0x657901,_0x5d0c28[_0xe908f9(0x193)]);break;case _0xe908f9(0x1c5):updateLive(_0x657901,_0x5d0c28[_0xe908f9(0x1c5)]),io['to'](_0x657901)[_0xe908f9(0x201)]('status',{'access':{'allow':![],'reason':_0xe908f9(0x2d2),'token':null}});break;case _0xe908f9(0x2b2):_0x5d0c28[_0xe908f9(0x2b2)]==_0xe908f9(0x206)&&restartBot(_0x657901);_0x5d0c28[_0xe908f9(0x2b2)]=='kill'&&toggleBot(_0x657901,'disabled','stopped');break;case _0xe908f9(0x249):sendTelegram(_0x657901,_0x5d0c28[_0xe908f9(0x249)]);break;case _0xe908f9(0x199):io['to'](_0x657901)[_0xe908f9(0x201)](_0x5d0c28[_0xe908f9(0x199)],_0x5d0c28[_0xe908f9(0x211)]);break;}}),pid[_0x657901]['on'](_0x730ce3(0x293),function(_0x7da9f7){if(_0x104e66)return;_0x104e66=!![],_0x3f9a20(_0x7da9f7);}),pid[_0x657901]['on'](_0x730ce3(0x1ce),function(_0x4bade4){const _0x20ba14=_0x730ce3;if(installingUpdate)return;if(_0x104e66)return;_0x104e66=!![],_0x3f9a20(null);const _0x11a81d=dbConfig[_0x20ba14(0x2bc)]('bots')['find']({'botID':_0x657901})['value']();_0x11a81d&&(_0x11a81d['status']==_0x20ba14(0x2dc)||_0x11a81d['status']==_0x20ba14(0x1ed))&&(updateLive(_0x657901,_0x20ba14(0x1b3)),logging(_0x20ba14(0x1a0)+_0x657901),startBot([_0x657901,userID],{'cwd':bbpath},function(_0x317ab9){if(_0x317ab9)logging(_0x317ab9);}));});}function stopBot(_0x1fe14f){getClientsWithBotID(_0x1fe14f)['forEach'](_0x2e0874=>{const _0x2a6909=_0x2f67;getSocket(_0x2e0874['id'])[_0x2a6909(0x23c)](!![]),removeClient(_0x2e0874['id']);}),pid[_0x1fe14f]&&(pid[_0x1fe14f]['kill'](),pid[_0x1fe14f]=null);}function restartBot(_0x2f491b){const _0x1a96bb=_0xaf525f;if(pid[_0x2f491b])pid[_0x2f491b][_0x1a96bb(0x1c3)]();}function addBot(){const _0x57319f=_0xaf525f;let _0x18ab2c;for(let _0x1e65ed=0x1;_0x1e65ed<0x3e9;_0x1e65ed++){_0x18ab2c=_0x1e65ed[_0x57319f(0x2cf)]()[_0x57319f(0x23d)](0x3,'0');let _0x5f09d9=config['find'](_0x3a02e5=>_0x3a02e5[_0x57319f(0x192)]==_0x18ab2c);if(!_0x5f09d9)break;}if(_0x18ab2c===_0x57319f(0x1e4)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x57319f(0x1d1)+_0x18ab2c),dbConfig[_0x57319f(0x2bc)](_0x57319f(0x2a1))[_0x57319f(0x1bf)]({'botID':_0x18ab2c,'botname':_0x57319f(0x1ff)+_0x18ab2c,'status':_0x57319f(0x1ed),'live':''})[_0x57319f(0x200)](),startBot([_0x18ab2c,userID],{'cwd':bbpath},function(_0x7d51f2){if(_0x7d51f2)logging(_0x7d51f2);}),config=getConfiguration(),io['to'](_0x57319f(0x196))[_0x57319f(0x201)](_0x57319f(0x2a1),config);}function deleteBot(_0x4d7b99){const _0x403079=_0xaf525f;getClientsWithBotID(_0x4d7b99)[_0x403079(0x2c4)](_0x309fed=>{const _0x39c851=_0x403079;getSocket(_0x309fed['id'])[_0x39c851(0x23c)](!![]),removeClient(_0x309fed['id']);}),dbConfig[_0x403079(0x2bc)](_0x403079(0x2a1))[_0x403079(0x2a9)]({'botID':_0x4d7b99})['write'](),logging(_0x403079(0x1f6)+_0x4d7b99),stopBot(_0x4d7b99);try{fs[_0x403079(0x1cc)](path[_0x403079(0x2b3)](configpath,'bot-'+_0x4d7b99+'-config.json')),fs[_0x403079(0x1cc)](path[_0x403079(0x2b3)](configpath,_0x403079(0x296)+_0x4d7b99+_0x403079(0x2c1))),fs[_0x403079(0x1cc)](path[_0x403079(0x2b3)](configpath,_0x403079(0x296)+_0x4d7b99+_0x403079(0x277))),fs['unlinkSync'](path[_0x403079(0x2b3)](configpath,_0x403079(0x296)+_0x4d7b99+_0x403079(0x261)));}catch(_0x5076a4){if(_0x5076a4)logging(_0x403079(0x26c),_0x5076a4);}config=getConfiguration(),io['to'](_0x403079(0x196))[_0x403079(0x201)]('bots',config);}function toggleBot(_0x5b795d,_0x54cfd0,_0x523bb8){const _0x31639e=_0xaf525f;dbConfig[_0x31639e(0x2bc)](_0x31639e(0x2a1))[_0x31639e(0x21b)]({'botID':_0x5b795d})['assign']({'status':_0x54cfd0})[_0x31639e(0x2df)]({'live':_0x523bb8})[_0x31639e(0x200)]();if(_0x54cfd0==_0x31639e(0x2dc)||_0x54cfd0==_0x31639e(0x1ed))logging(_0x31639e(0x1e9)+_0x5b795d),startBot([_0x5b795d,userID],{'cwd':bbpath},function(_0x3bce46){if(_0x3bce46)logging(_0x3bce46);});else(_0x54cfd0==_0x31639e(0x18b)||_0x54cfd0==_0x31639e(0x239))&&(logging(_0x31639e(0x204)+_0x5b795d),stopBot(_0x5b795d));config=getConfiguration(),io['to'](_0x31639e(0x196))['emit'](_0x31639e(0x2a1),config);}function toggleStatus(_0x24e80b){const _0x3950d4=_0xaf525f;let _0x55c444=dbConfig[_0x3950d4(0x2bc)]('bots')['find']({'botID':_0x24e80b})[_0x3950d4(0x288)](),_0x5ac0c6;if(_0x55c444[_0x3950d4(0x2bf)]===_0x3950d4(0x2dc))_0x5ac0c6=_0x3950d4(0x18b);else{if(_0x55c444[_0x3950d4(0x2bf)]==='new')_0x5ac0c6=_0x3950d4(0x239);else{if(_0x55c444[_0x3950d4(0x2bf)]==='new-disabled')_0x5ac0c6=_0x3950d4(0x1ed);else{if(_0x55c444[_0x3950d4(0x2bf)]===_0x3950d4(0x18b))_0x5ac0c6=_0x3950d4(0x2dc);}}}return _0x5ac0c6;}function updateStatus(_0x5a206b,_0x39c4d1){const _0x187c25=_0xaf525f;dbConfig[_0x187c25(0x2bc)](_0x187c25(0x2a1))[_0x187c25(0x21b)]({'botID':_0x5a206b})[_0x187c25(0x2df)]({'status':_0x39c4d1})[_0x187c25(0x200)](),config=getConfiguration(),io['to'](_0x187c25(0x196))['emit'](_0x187c25(0x2a1),config);}function updateLive(_0x938fb2,_0x936672){const _0x535a8c=_0xaf525f;dbConfig[_0x535a8c(0x2bc)](_0x535a8c(0x2a1))[_0x535a8c(0x21b)]({'botID':_0x938fb2})[_0x535a8c(0x2df)]({'live':_0x936672})[_0x535a8c(0x200)](),config=getConfiguration(),io['to'](_0x535a8c(0x196))[_0x535a8c(0x201)]('bots',config);}function updateBotName(_0x36dce1,_0xf3e7be){const _0x399379=_0xaf525f;dbConfig[_0x399379(0x2bc)](_0x399379(0x2a1))[_0x399379(0x21b)]({'botID':_0x36dce1})[_0x399379(0x2df)]({'botname':_0xf3e7be})[_0x399379(0x200)](),config=getConfiguration(),io['to']('botmanager')[_0x399379(0x201)]('bots',config);}function updateBotManager(){const _0x4e584f=_0xaf525f;config=getConfiguration(),io['to'](_0x4e584f(0x196))[_0x4e584f(0x201)]('bots',config);}function toggleBotMode(_0x53f6a5){const _0x118314=_0xaf525f;if(pid[_0x53f6a5])pid[_0x53f6a5][_0x118314(0x226)]({'function':'toggleBotMode','args':null});else{const _0x5bd6c5=configpath+_0x118314(0x296)+_0x53f6a5+'-config.json',_0x207e43=fs['readFileSync'](_0x5bd6c5),_0x154aa9=JSON[_0x118314(0x1c6)](_0x207e43),_0xda7781=_0x154aa9['bot'][0x0]['headless'];_0x154aa9[_0x118314(0x282)][0x0][_0x118314(0x275)]=!_0xda7781;const _0x1ab392=JSON['stringify'](_0x154aa9,null,0x2);fs[_0x118314(0x2c3)](_0x5bd6c5,_0x1ab392),config=getConfiguration(),io['to']('botmanager')['emit'](_0x118314(0x2a1),config);}}function telegramError(_0x41a71c){const _0x3aa057=_0xaf525f;console['log'](getTimeStamp()+_0x3aa057(0x228));}function validateTelegram(_0x4b633f){const _0x4812f8=_0xaf525f;if(_0x4b633f[_0x4812f8(0x209)][_0x4812f8(0x20f)]!=settings['telegramUsername']&&'@'+_0x4b633f[_0x4812f8(0x209)]['username']!=settings[_0x4812f8(0x26e)])return tgBot[_0x4812f8(0x2aa)](_0x4b633f[_0x4812f8(0x1aa)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x4812f8(0x2d8)})[_0x4812f8(0x223)](_0x220527=>{telegramError(_0x220527);}),![];return!![];}async function initTelegram(){const _0x4bb5df=_0xaf525f;if(tgBot)tgBot[_0x4bb5df(0x2e3)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4bb5df(0x1eb)],{'polling':!![]});let _0x20d13c=_0x4bb5df(0x222);_0x20d13c+='\x0a',_0x20d13c+='/enable\x20-\x20enable\x20notifications\x0a',_0x20d13c+=_0x4bb5df(0x225),_0x20d13c+=_0x4bb5df(0x27b),_0x20d13c+=_0x4bb5df(0x1a1),_0x20d13c+=_0x4bb5df(0x1be),_0x20d13c+=_0x4bb5df(0x1d8),_0x20d13c+=_0x4bb5df(0x28d),_0x20d13c+=_0x4bb5df(0x269),_0x20d13c+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x20d13c+=_0x4bb5df(0x2d7);let _0x55a6a3=_0x4bb5df(0x299);_0x55a6a3+='\x0a',_0x55a6a3+=_0x20d13c,tgBot[_0x4bb5df(0x1af)](/\/start/,_0x24b9f3=>{const _0x46d3ff=_0x4bb5df;if(!validateTelegram(_0x24b9f3))return;if(settings[_0x46d3ff(0x237)]!=_0x24b9f3[_0x46d3ff(0x1aa)]['id'])updateSetting(_0x46d3ff(0x237),_0x24b9f3['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x24b9f3[_0x46d3ff(0x1aa)]['id'],_0x55a6a3)[_0x46d3ff(0x223)](_0x448b8f=>{telegramError(_0x448b8f);});}),tgBot[_0x4bb5df(0x1af)](/\/enable/,_0x20cf66=>{const _0x144b88=_0x4bb5df;if(!validateTelegram(_0x20cf66))return;if(settings[_0x144b88(0x237)]!=_0x20cf66[_0x144b88(0x1aa)]['id'])updateSetting(_0x144b88(0x237),_0x20cf66['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x20cf66[_0x144b88(0x1aa)]['id'],_0x144b88(0x1b6))[_0x144b88(0x223)](_0x329994=>{telegramError(_0x329994);});}),tgBot['onText'](/\/config/,async _0x244a9c=>{const _0x49df45=_0x4bb5df;if(!validateTelegram(_0x244a9c))return;tgBot['removeListener']('callback_query'),tgBot['sendMessage'](_0x244a9c[_0x49df45(0x1aa)]['id'],_0x49df45(0x1e6),{'reply_markup':{'inline_keyboard':[[{'text':_0x49df45(0x27c),'callback_data':_0x49df45(0x1b5)},{'text':_0x49df45(0x291),'callback_data':_0x49df45(0x1ab)},{'text':'All','callback_data':'all'}]]}})['catch'](_0x47f366=>{telegramError(_0x47f366);}),tgBot['on'](_0x49df45(0x255),async _0x3c8b51=>{const _0x4ec22e=_0x49df45,_0x3ab380=_0x3c8b51[_0x4ec22e(0x1dd)],_0x5b4e06=_0x3c8b51[_0x4ec22e(0x23f)];tgBot[_0x4ec22e(0x2b9)](_0x3c8b51['id'])[_0x4ec22e(0x254)](async()=>{const _0x25650c=_0x4ec22e;_0x3ab380=='orders'&&(updateSetting(_0x25650c(0x21a),_0x25650c(0x1b5)),updateSetting(_0x25650c(0x212),!![]),await tgBot[_0x25650c(0x2aa)](_0x5b4e06['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x15890a=>{telegramError(_0x15890a);}));_0x3ab380==_0x25650c(0x1ab)&&(updateSetting(_0x25650c(0x21a),_0x25650c(0x1ab)),updateSetting(_0x25650c(0x212),!![]),await tgBot['sendMessage'](_0x5b4e06['chat']['id'],_0x25650c(0x1c0))[_0x25650c(0x223)](_0x63cbd2=>{telegramError(_0x63cbd2);}));_0x3ab380=='all'&&(updateSetting(_0x25650c(0x21a),_0x25650c(0x1e3)),updateSetting(_0x25650c(0x212),!![]),await tgBot[_0x25650c(0x2aa)](_0x5b4e06[_0x25650c(0x1aa)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x25650c(0x223)](_0x42acc3=>{telegramError(_0x42acc3);}));if(!settings[_0x25650c(0x237)])tgBot[_0x25650c(0x2aa)](_0x5b4e06['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x25650c(0x223)](_0x81b812=>{telegramError(_0x81b812);});}),tgBot['removeListener'](_0x4ec22e(0x255));});}),tgBot['onText'](/\/status/,_0x5e2876=>{const _0x5d8e25=_0x4bb5df;if(!validateTelegram(_0x5e2876))return;const _0x33434c=getBotsWithMode();let _0x597cc1='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x5d8e25(0x2c4)](_0x1b5bd6=>{const _0x5dfe42=_0x5d8e25,_0x3d054d=_0x33434c[_0x5dfe42(0x21b)](_0xcdfa38=>_0xcdfa38[_0x5dfe42(0x192)]==_0x1b5bd6[_0x5dfe42(0x192)])[_0x5dfe42(0x2b1)];_0x597cc1+='Bot\x20'+_0x1b5bd6['botID']+':\x20'+_0x1b5bd6[_0x5dfe42(0x2bf)]+_0x5dfe42(0x2be)+_0x3d054d+_0x5dfe42(0x2be)+_0x1b5bd6[_0x5dfe42(0x193)]+'\x0a';}),_0x597cc1+='\x0a',_0x597cc1+=_0x5d8e25(0x221),_0x597cc1+=!settings[_0x5d8e25(0x212)]?_0x5d8e25(0x1c2):_0x5d8e25(0x229),_0x597cc1+=settings['telegramEnabled']?settings['telegramEvents']=='all'?_0x5d8e25(0x1d2):_0x5d8e25(0x1e7)+settings[_0x5d8e25(0x21a)]+_0x5d8e25(0x1ad):'',tgBot[_0x5d8e25(0x2aa)](_0x5e2876[_0x5d8e25(0x1aa)]['id'],_0x597cc1,{'parse_mode':_0x5d8e25(0x2d8)})[_0x5d8e25(0x223)](_0x14b39a=>{telegramError(_0x14b39a);});}),tgBot[_0x4bb5df(0x1af)](/\/restart/,_0x592b0c=>{const _0x742597=_0x4bb5df;if(!validateTelegram(_0x592b0c))return;tgBot[_0x742597(0x23b)](_0x742597(0x255));const _0x2b0e62=getEnabledBots();if(_0x2b0e62[_0x742597(0x2ac)]==0x0)tgBot['sendMessage'](_0x592b0c[_0x742597(0x1aa)]['id'],_0x742597(0x19b))[_0x742597(0x223)](_0x107bf2=>{telegramError(_0x107bf2);});else{if(_0x2b0e62[_0x742597(0x2ac)]>0x1)_0x2b0e62[_0x742597(0x1bf)]({'botID':_0x742597(0x1e3)});let _0x46ce57=[],_0x30545f=[];const _0x3bb620=_0x2b0e62[_0x742597(0x2ac)]%0x4==0x0||_0x2b0e62[_0x742597(0x2ac)]%0x4==0x3||_0x2b0e62[_0x742597(0x2ac)]%0x3==0x1?0x4:0x3;let _0x316fd7=0x0;_0x2b0e62[_0x742597(0x2c4)]((_0x260904,_0x4dc28d)=>{const _0x46bd83=_0x742597;if(_0x4dc28d%_0x3bb620==0x0)_0x30545f=[];_0x30545f['push']({'text':_0x260904['botID']=='all'?_0x46bd83(0x247):'Bot\x20'+_0x260904[_0x46bd83(0x192)],'callback_data':_0x260904[_0x46bd83(0x192)]}),_0x4dc28d%_0x3bb620==0x0&&(_0x46ce57[_0x316fd7]=_0x30545f,_0x316fd7++);}),tgBot[_0x742597(0x2aa)](_0x592b0c[_0x742597(0x1aa)]['id'],_0x742597(0x263),{'reply_markup':{'inline_keyboard':_0x46ce57}})[_0x742597(0x223)](_0x5b01cd=>{telegramError(_0x5b01cd);}),tgBot['on'](_0x742597(0x255),async _0x3ed222=>{const _0x2562ae=_0x742597,_0x2a95aa=_0x3ed222[_0x2562ae(0x1dd)],_0x58ab6=_0x3ed222[_0x2562ae(0x23f)];tgBot[_0x2562ae(0x2b9)](_0x3ed222['id'])[_0x2562ae(0x254)](async()=>{const _0x30e9b3=_0x2562ae;_0x2a95aa==_0x30e9b3(0x1e3)?(tgBot['sendMessage'](_0x58ab6['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x19cbe6=>{telegramError(_0x19cbe6);}),config[_0x30e9b3(0x2c4)](_0x2ca778=>{restartBot(_0x2ca778['botID']);})):(tgBot[_0x30e9b3(0x2aa)](_0x58ab6[_0x30e9b3(0x1aa)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x2a95aa)[_0x30e9b3(0x223)](_0x5b2878=>{telegramError(_0x5b2878);}),restartBot(_0x2a95aa));}),tgBot[_0x2562ae(0x23b)](_0x2562ae(0x255));});}}),tgBot[_0x4bb5df(0x1af)](/\/on/,_0x43ff4e=>{const _0x348429=_0x4bb5df;if(!validateTelegram(_0x43ff4e))return;tgBot[_0x348429(0x23b)](_0x348429(0x255));const _0x401048=getDisabledBots();if(_0x401048[_0x348429(0x2ac)]==0x0)tgBot[_0x348429(0x2aa)](_0x43ff4e['chat']['id'],_0x348429(0x1f7))[_0x348429(0x223)](_0x206009=>{telegramError(_0x206009);});else{if(_0x401048[_0x348429(0x2ac)]>0x1)_0x401048[_0x348429(0x1bf)]({'botID':'all'});let _0x119bab=[],_0x469094=[];const _0xa7df97=_0x401048['length']%0x4==0x0||_0x401048[_0x348429(0x2ac)]%0x4==0x3||_0x401048['length']%0x3==0x1?0x4:0x3;let _0x736af3=0x0;_0x401048[_0x348429(0x2c4)]((_0xe21b11,_0x427868)=>{const _0x20cc0e=_0x348429;if(_0x427868%_0xa7df97==0x0)_0x469094=[];_0x469094[_0x20cc0e(0x1bf)]({'text':_0xe21b11[_0x20cc0e(0x192)]==_0x20cc0e(0x1e3)?_0x20cc0e(0x247):_0x20cc0e(0x1ff)+_0xe21b11[_0x20cc0e(0x192)],'callback_data':_0xe21b11[_0x20cc0e(0x192)]}),_0x427868%_0xa7df97==0x0&&(_0x119bab[_0x736af3]=_0x469094,_0x736af3++);}),tgBot[_0x348429(0x2aa)](_0x43ff4e[_0x348429(0x1aa)]['id'],_0x348429(0x2d6),{'reply_markup':{'inline_keyboard':_0x119bab}})['catch'](_0x2c3eac=>{telegramError(_0x2c3eac);}),tgBot['on']('callback_query',async _0x572001=>{const _0x11ef64=_0x348429,_0xdaaa4e=_0x572001[_0x11ef64(0x1dd)],_0x34f545=_0x572001[_0x11ef64(0x23f)];tgBot[_0x11ef64(0x2b9)](_0x572001['id'])[_0x11ef64(0x254)](async()=>{const _0x3ce043=_0x11ef64;_0xdaaa4e==_0x3ce043(0x1e3)?(tgBot['sendMessage'](_0x34f545[_0x3ce043(0x1aa)]['id'],_0x3ce043(0x2d3))[_0x3ce043(0x223)](_0x1dee5e=>{telegramError(_0x1dee5e);}),_0x401048[_0x3ce043(0x2c4)](_0x52fb4a=>{const _0x449d0b=_0x3ce043;if(_0x52fb4a[_0x449d0b(0x192)]!='all')toggleBot(_0x52fb4a[_0x449d0b(0x192)],toggleStatus(_0x52fb4a[_0x449d0b(0x192)]),_0x449d0b(0x1b3));})):(tgBot[_0x3ce043(0x2aa)](_0x34f545[_0x3ce043(0x1aa)]['id'],_0x3ce043(0x274)+_0xdaaa4e)[_0x3ce043(0x223)](_0x44cfb0=>{telegramError(_0x44cfb0);}),toggleBot(_0xdaaa4e,toggleStatus(_0xdaaa4e),_0x3ce043(0x1b3)));}),tgBot[_0x11ef64(0x23b)](_0x11ef64(0x255));});}}),tgBot[_0x4bb5df(0x1af)](/\/off/,_0x58007c=>{const _0xc54afc=_0x4bb5df;if(!validateTelegram(_0x58007c))return;tgBot[_0xc54afc(0x23b)](_0xc54afc(0x255));const _0x21a0ab=getEnabledBots();if(_0x21a0ab[_0xc54afc(0x2ac)]==0x0)tgBot[_0xc54afc(0x2aa)](_0x58007c[_0xc54afc(0x1aa)]['id'],_0xc54afc(0x19b))[_0xc54afc(0x223)](_0x5cf44e=>{telegramError(_0x5cf44e);});else{if(_0x21a0ab[_0xc54afc(0x2ac)]>0x1)_0x21a0ab[_0xc54afc(0x1bf)]({'botID':_0xc54afc(0x1e3)});let _0x164380=[],_0x444ee0=[];const _0x4ce4c4=_0x21a0ab['length']%0x4==0x0||_0x21a0ab[_0xc54afc(0x2ac)]%0x4==0x3||_0x21a0ab[_0xc54afc(0x2ac)]%0x3==0x1?0x4:0x3;let _0x4db18a=0x0;_0x21a0ab[_0xc54afc(0x2c4)]((_0x5f34c5,_0x445986)=>{const _0x4c5d55=_0xc54afc;if(_0x445986%_0x4ce4c4==0x0)_0x444ee0=[];_0x444ee0[_0x4c5d55(0x1bf)]({'text':_0x5f34c5[_0x4c5d55(0x192)]=='all'?'All\x20bots':_0x4c5d55(0x1ff)+_0x5f34c5[_0x4c5d55(0x192)],'callback_data':_0x5f34c5[_0x4c5d55(0x192)]}),_0x445986%_0x4ce4c4==0x0&&(_0x164380[_0x4db18a]=_0x444ee0,_0x4db18a++);}),tgBot[_0xc54afc(0x2aa)](_0x58007c['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x164380}})[_0xc54afc(0x223)](_0x28e85b=>{telegramError(_0x28e85b);}),tgBot['on'](_0xc54afc(0x255),async _0x25665f=>{const _0x3beb33=_0xc54afc,_0x47289b=_0x25665f[_0x3beb33(0x1dd)],_0x5ee2df=_0x25665f[_0x3beb33(0x23f)];tgBot['answerCallbackQuery'](_0x25665f['id'])[_0x3beb33(0x254)](async()=>{const _0x4b378b=_0x3beb33;_0x47289b==_0x4b378b(0x1e3)?(tgBot[_0x4b378b(0x2aa)](_0x5ee2df[_0x4b378b(0x1aa)]['id'],_0x4b378b(0x22d))[_0x4b378b(0x223)](_0x39f3a8=>{telegramError(_0x39f3a8);}),_0x21a0ab[_0x4b378b(0x2c4)](_0x510266=>{const _0x2f9716=_0x4b378b;if(_0x510266[_0x2f9716(0x192)]!=_0x2f9716(0x1e3))toggleBot(_0x510266[_0x2f9716(0x192)],toggleStatus(_0x510266[_0x2f9716(0x192)]),_0x2f9716(0x1b3));})):(tgBot[_0x4b378b(0x2aa)](_0x5ee2df[_0x4b378b(0x1aa)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x47289b)[_0x4b378b(0x223)](_0x4654d6=>{telegramError(_0x4654d6);}),toggleBot(_0x47289b,toggleStatus(_0x47289b),_0x4b378b(0x1b3)));}),tgBot[_0x3beb33(0x23b)]('callback_query');});}}),tgBot[_0x4bb5df(0x1af)](/\/toggle/,_0x86e81d=>{const _0x8e6d97=_0x4bb5df;if(!validateTelegram(_0x86e81d))return;tgBot[_0x8e6d97(0x23b)]('callback_query');const _0x415817=getBotsWithMode();if(_0x415817[_0x8e6d97(0x2ac)]==0x0)tgBot[_0x8e6d97(0x2aa)](_0x86e81d['chat']['id'],_0x8e6d97(0x19b))[_0x8e6d97(0x223)](_0x2bd876=>{telegramError(_0x2bd876);});else{let _0x54b602=[],_0x50e539=[];const _0x20a634=0x2;let _0xf94bfd=0x0;_0x415817[_0x8e6d97(0x2c4)]((_0x5dbdb8,_0x173eee)=>{const _0x2319fc=_0x8e6d97;if(_0x173eee%_0x20a634==0x0)_0x50e539=[];_0x50e539[_0x2319fc(0x1bf)]({'text':_0x2319fc(0x1ff)+_0x5dbdb8[_0x2319fc(0x192)]+'\x20('+_0x5dbdb8[_0x2319fc(0x2b1)]+')','callback_data':_0x5dbdb8[_0x2319fc(0x192)]}),_0x173eee%_0x20a634==0x0&&(_0x54b602[_0xf94bfd]=_0x50e539,_0xf94bfd++);}),tgBot[_0x8e6d97(0x2aa)](_0x86e81d[_0x8e6d97(0x1aa)]['id'],_0x8e6d97(0x1a9),{'reply_markup':{'inline_keyboard':_0x54b602}})[_0x8e6d97(0x223)](_0x247f43=>{telegramError(_0x247f43);}),tgBot['on'](_0x8e6d97(0x255),async _0x99e843=>{const _0x5e8f7f=_0x8e6d97,_0x3b6000=_0x99e843[_0x5e8f7f(0x1dd)],_0x167070=_0x99e843[_0x5e8f7f(0x23f)];tgBot[_0x5e8f7f(0x2b9)](_0x99e843['id'])['then'](async()=>{const _0x1add2f=_0x5e8f7f,_0x17043a=_0x415817[_0x1add2f(0x21b)](_0x24b73d=>_0x24b73d['botID']==_0x3b6000),_0x250740=_0x17043a[_0x1add2f(0x2b1)]==_0x1add2f(0x1cb)?_0x1add2f(0x238):_0x1add2f(0x1cb);tgBot['sendMessage'](_0x167070['chat']['id'],_0x1add2f(0x2ae)+_0x3b6000+_0x1add2f(0x25e)+_0x250740+_0x1add2f(0x1b9))[_0x1add2f(0x223)](_0x495cea=>{telegramError(_0x495cea);}),toggleBotMode(_0x3b6000);}),tgBot[_0x5e8f7f(0x23b)]('callback_query');});}}),tgBot[_0x4bb5df(0x1af)](/\/names/,_0x5eba36=>{const _0x4a2bb7=_0x4bb5df;if(!validateTelegram(_0x5eba36))return;let _0x3f0267='';config[_0x4a2bb7(0x2c4)](_0x35002d=>{const _0x3c9cf4=_0x4a2bb7;_0x3f0267+='Bot\x20'+_0x35002d['botID']+':\x20'+_0x35002d[_0x3c9cf4(0x1b1)]+'\x0a';}),tgBot[_0x4a2bb7(0x2aa)](_0x5eba36['chat']['id'],_0x3f0267,{'parse_mode':_0x4a2bb7(0x2d8)})[_0x4a2bb7(0x223)](_0x260ccc=>{telegramError(_0x260ccc);});}),tgBot[_0x4bb5df(0x1af)](/\/disable/,_0x438d0f=>{const _0x30e0cf=_0x4bb5df;if(!validateTelegram(_0x438d0f))return;tgBot[_0x30e0cf(0x2aa)](_0x438d0f[_0x30e0cf(0x1aa)]['id'],_0x30e0cf(0x1ca))[_0x30e0cf(0x223)](_0x2131e9=>{telegramError(_0x2131e9);}),updateSetting(_0x30e0cf(0x212),![]);}),tgBot[_0x4bb5df(0x1af)](/\/help/,_0xf7ef5d=>{const _0x298fa5=_0x4bb5df;if(!validateTelegram(_0xf7ef5d))return;tgBot['sendMessage'](_0xf7ef5d[_0x298fa5(0x1aa)]['id'],_0x20d13c)[_0x298fa5(0x223)](_0x37da95=>{telegramError(_0x37da95);});}),tgBot['on']('polling_error',_0x2ffb3e=>{const _0x7ad4d6=_0x4bb5df;_0x2ffb3e[_0x7ad4d6(0x2cf)]()[_0x7ad4d6(0x2dd)](_0x7ad4d6(0x29b))&&(logging(_0x7ad4d6(0x24e)),tgBot[_0x7ad4d6(0x2e3)](),tgBot=null,io['to'](_0x7ad4d6(0x196))[_0x7ad4d6(0x201)](_0x7ad4d6(0x241),_0x7ad4d6(0x24e)));}),process[_0x4bb5df(0x18c)]('SIGINT',()=>{const _0x1e3b9e=_0x4bb5df;if(tgBot)tgBot[_0x1e3b9e(0x2e3)]();process['exit'](0x1);}),process[_0x4bb5df(0x18c)](_0x4bb5df(0x2de),()=>{const _0x4f1c2f=_0x4bb5df;if(tgBot)tgBot[_0x4f1c2f(0x2e3)]();process['exit'](0x1);});}}function disableTelegram(){const _0x5e2479=_0xaf525f;tgBot&&(tgBot[_0x5e2479(0x2e3)](),tgBot=null);}function sendTelegram(_0x31b3ee,_0x4af9de){const _0x5e3901=_0xaf525f;if(settings['telegramEnabled']){if(settings['telegramEvents']=='all'||(_0x4af9de['type']==_0x5e3901(0x293)||_0x4af9de[_0x5e3901(0x1ec)]=='success')&&settings[_0x5e3901(0x21a)]==_0x5e3901(0x1ab)||_0x4af9de[_0x5e3901(0x1ec)]==_0x5e3901(0x20b)&&settings[_0x5e3901(0x21a)]==_0x5e3901(0x1b5)){if(tgBot&&settings[_0x5e3901(0x237)]){if(_0x4af9de['showname'])tgBot[_0x5e3901(0x2aa)](settings[_0x5e3901(0x237)],_0x4af9de[_0x5e3901(0x1b1)]+_0x5e3901(0x24f)+_0x4af9de[_0x5e3901(0x1bc)])[_0x5e3901(0x223)](_0x5695c8=>{telegramError(_0x5695c8);});else tgBot['sendMessage'](settings['telegramChatId'],_0x5e3901(0x1ff)+_0x31b3ee+_0x5e3901(0x24f)+_0x4af9de[_0x5e3901(0x1bc)])[_0x5e3901(0x223)](_0xd03d6f=>{telegramError(_0xd03d6f);});}}}}function getDeviceWithIp(_0x1ed71d){const _0x11d97a=_0xaf525f;return devices[_0x11d97a(0x21b)](_0x5e66f3=>_0x5e66f3['ip']===_0x1ed71d);}function temporaryAccess2FA(_0x21e84e,_0xdf5c19){const _0xef6cc6=_0xaf525f;let _0x47d570=new Date(),_0x59c8d1=![];if(lastIpApproval){if(_0x47d570-lastIpApproval<0x1388)_0x59c8d1=!![];}lastIpApproval=new Date();if(_0x59c8d1)return;tgBot&&settings['telegramChatId']&&(tgBot[_0xef6cc6(0x23b)](_0xef6cc6(0x255)),tgBot[_0xef6cc6(0x2aa)](settings[_0xef6cc6(0x237)],_0xef6cc6(0x22b)+normalizeIP(_0xdf5c19)[_0xef6cc6(0x207)]+_0xef6cc6(0x279),{'parse_mode':_0xef6cc6(0x2d8),'reply_markup':{'inline_keyboard':[[{'text':_0xef6cc6(0x1a8),'callback_data':'5'},{'text':_0xef6cc6(0x2bb),'callback_data':'15'},{'text':_0xef6cc6(0x244),'callback_data':'30'},{'text':_0xef6cc6(0x242),'callback_data':_0xef6cc6(0x242)}]]}})[_0xef6cc6(0x223)](_0x5068c6=>{telegramError(_0x5068c6);}),tgBot['on'](_0xef6cc6(0x255),async _0x231c28=>{const _0x3f0a9b=_0xef6cc6,_0x27893b=_0x231c28['data'],_0xeb41a4=_0x231c28['message'];tgBot[_0x3f0a9b(0x2b9)](_0x231c28['id'])[_0x3f0a9b(0x254)](async()=>{const _0x51184e=_0x3f0a9b;devices[_0x21e84e]['telegramIpApproval']={'clientip':_0xdf5c19,'timestamp':new Date()[_0x51184e(0x23a)](),'expiry':_0x27893b},_0x27893b!=_0x51184e(0x242)?(await tgBot['sendMessage'](_0xeb41a4['chat']['id'],_0x51184e(0x22c)+_0x27893b+'\x20minutes',{'parse_mode':_0x51184e(0x2d8)})[_0x51184e(0x223)](_0x3d3a34=>{telegramError(_0x3d3a34);}),io['to'](_0x21e84e)['emit'](_0x51184e(0x2bf),{'access':{'allow':![],'reason':_0x51184e(0x2d2),'token':null}})):(await tgBot[_0x51184e(0x2aa)](_0xeb41a4[_0x51184e(0x1aa)]['id'],_0x51184e(0x2db))[_0x51184e(0x223)](_0x1aded0=>{telegramError(_0x1aded0);}),io['to'](_0x21e84e)[_0x51184e(0x201)](_0x51184e(0x2bf),{'access':{'allow':![],'reason':_0x51184e(0x1fb),'token':null}}));}),tgBot[_0x3f0a9b(0x23b)](_0x3f0a9b(0x255));}));}function loginAccess2FA(_0x32ac87,_0x40cda3){const _0x387349=_0xaf525f;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x387349(0x237)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x40cda3)[_0x387349(0x207)]+_0x387349(0x279),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x387349(0x286),'callback_data':loginExpiry},{'text':_0x387349(0x242),'callback_data':'reject'}]]}})[_0x387349(0x223)](_0x358ada=>{telegramError(_0x358ada);}),tgBot['on']('callback_query',async _0x11898d=>{const _0x48c426=_0x387349,_0x143dc2=_0x11898d[_0x48c426(0x1dd)],_0x287064=_0x11898d[_0x48c426(0x23f)];tgBot[_0x48c426(0x2b9)](_0x11898d['id'])[_0x48c426(0x254)](async()=>{const _0x12be19=_0x48c426;devices[_0x32ac87][_0x12be19(0x273)]={'clientip':_0x40cda3,'timestamp':new Date()[_0x12be19(0x23a)](),'expiry':_0x143dc2},_0x143dc2!='reject'?(await tgBot[_0x12be19(0x2aa)](_0x287064[_0x12be19(0x1aa)]['id'],_0x12be19(0x1f2),{'parse_mode':'HTML'})[_0x12be19(0x223)](_0x437689=>{telegramError(_0x437689);}),io['to'](_0x32ac87)['emit']('status',{'access':{'allow':![],'reason':_0x12be19(0x2d2),'token':null}})):(await tgBot[_0x12be19(0x2aa)](_0x287064[_0x12be19(0x1aa)]['id'],'Login\x20rejected')[_0x12be19(0x223)](_0x382ef1=>{telegramError(_0x382ef1);}),io['to'](_0x32ac87)['emit'](_0x12be19(0x2bf),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x48c426(0x255));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x32ba4c=_0xaf525f;return dbConfig[_0x32ba4c(0x2bc)](_0x32ba4c(0x2a1))[_0x32ba4c(0x1d7)](_0x32ba4c(0x192))[_0x32ba4c(0x19d)]({'status':_0x32ba4c(0x2dc)})[_0x32ba4c(0x288)]()||[];}function getDisabledBots(){const _0x4bd7c1=_0xaf525f;return dbConfig['get'](_0x4bd7c1(0x2a1))[_0x4bd7c1(0x1d7)](_0x4bd7c1(0x192))[_0x4bd7c1(0x19d)]({'status':_0x4bd7c1(0x18b)})[_0x4bd7c1(0x288)]()||[];}function getBotsWithMode(){const _0x3d63fa=_0xaf525f,_0x105b76=dbConfig[_0x3d63fa(0x2bc)]('bots')[_0x3d63fa(0x1d7)](_0x3d63fa(0x192))[_0x3d63fa(0x288)]()||[];return _0x105b76[_0x3d63fa(0x2c4)](_0x2ad4be=>{const _0x428040=_0x3d63fa,_0x3d8762=configpath+_0x428040(0x296)+_0x2ad4be[_0x428040(0x192)]+'-config.json',_0x1151ec=fs[_0x428040(0x1a3)](_0x3d8762);if(_0x1151ec){const _0x1e8e40=fs[_0x428040(0x1de)](_0x3d8762);try{const _0x5dc2ef=JSON[_0x428040(0x1c6)](_0x1e8e40),_0x3951d0=_0x5dc2ef?_0x5dc2ef[_0x428040(0x282)][0x0][_0x428040(0x275)]:![];_0x2ad4be[_0x428040(0x2b1)]=_0x3951d0?'auto':_0x428040(0x238);}catch(_0x4c2495){_0x2ad4be[_0x428040(0x2b1)]=_0x428040(0x238);}}else _0x2ad4be[_0x428040(0x2b1)]=_0x428040(0x238);}),_0x105b76;}function getSettings(){const _0x3c93e1=_0xaf525f;return dbSettings[_0x3c93e1(0x2bc)](_0x3c93e1(0x1c4))[_0x3c93e1(0x288)]()||{'timeshift':0x0};}function getSecure(){const _0x53b732=_0xaf525f;return dbSecure[_0x53b732(0x2bc)]('secure')['value']()||{};}function getBlacklist(){const _0x22c2a0=_0xaf525f;return dbSecure[_0x22c2a0(0x2bc)](_0x22c2a0(0x1cd))[_0x22c2a0(0x288)]()||[];}function broadcastToBots(_0x30a942,_0x468a92){const _0x3cd23c=_0xaf525f;config[_0x3cd23c(0x2c4)](_0x3c3197=>{const _0x6e4e=_0x3cd23c;if(_0x3c3197[_0x6e4e(0x2bf)]==_0x6e4e(0x2dc)&&_0x3c3197['live']==_0x6e4e(0x224)){if(pid[_0x3c3197['botID']])pid[_0x3c3197['botID']]['send']({[_0x30a942]:_0x468a92});}});}function storeSettings(_0x11a4cf,_0x419c8b=![]){const _0x2ac28f=_0xaf525f;_0x11a4cf={...settings,..._0x11a4cf};if(_0x419c8b&&_0x11a4cf[_0x2ac28f(0x267)]!=_0x2ac28f(0x227)&&_0x11a4cf['bbPassword']!=''){const _0x465cf1=crypt[_0x2ac28f(0x1b4)](secure['privateKey'],_0x11a4cf[_0x2ac28f(0x267)])['message'][_0x2ac28f(0x258)]('@')[0x0],_0x120a62=bcrypt[_0x2ac28f(0x29f)](_0x465cf1,saltRounds);_0x11a4cf={..._0x11a4cf,'bbPassword':_0x120a62};}if(_0x419c8b&&_0x11a4cf[_0x2ac28f(0x1eb)]!=_0x2ac28f(0x227)&&_0x11a4cf[_0x2ac28f(0x1eb)]!=''){const _0x41b8d3=crypt[_0x2ac28f(0x1b4)](secure[_0x2ac28f(0x2d4)],_0x11a4cf[_0x2ac28f(0x1eb)])[_0x2ac28f(0x23f)][_0x2ac28f(0x258)]('@')[0x0];_0x11a4cf={..._0x11a4cf,'telegramToken':_0x41b8d3};}const _0x336ea1=_0x11a4cf[_0x2ac28f(0x1eb)]!='************'&&_0x11a4cf[_0x2ac28f(0x1eb)]!=settings[_0x2ac28f(0x1eb)]||_0x11a4cf[_0x2ac28f(0x26e)]!=settings[_0x2ac28f(0x26e)],_0x5a0831=_0x11a4cf[_0x2ac28f(0x1eb)]==''||_0x11a4cf[_0x2ac28f(0x26e)]=='';if(_0x336ea1)_0x11a4cf[_0x2ac28f(0x21a)]='all';for(const [_0x10979d,_0x68c4a4]of Object[_0x2ac28f(0x1a7)](_0x11a4cf)){if(_0x10979d==_0x2ac28f(0x1eb)&&_0x68c4a4=='************'){_0x11a4cf['telegramToken']=settings[_0x2ac28f(0x1eb)];continue;};if(_0x10979d==_0x2ac28f(0x267)&&_0x68c4a4==_0x2ac28f(0x227)){_0x11a4cf[_0x2ac28f(0x267)]=settings[_0x2ac28f(0x267)];continue;};dbSettings[_0x2ac28f(0x1db)](_0x2ac28f(0x1f8)+_0x10979d,_0x68c4a4)[_0x2ac28f(0x200)]();}settings=_0x11a4cf,io['to'](_0x2ac28f(0x196))[_0x2ac28f(0x201)](_0x2ac28f(0x1c4),cleanSettings()),broadcastToBots(_0x2ac28f(0x2ba),settings[_0x2ac28f(0x2ba)]);if(_0x336ea1&&!_0x5a0831)initTelegram();if(_0x336ea1&&_0x5a0831)disableTelegram();getAllClients()['forEach'](_0x6a3b95=>{const _0x51ccd5=_0x2ac28f;getSocket(_0x6a3b95['id'])[_0x51ccd5(0x201)](_0x51ccd5(0x2bf),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x2ae1e2,_0x360290){const _0x20bc1=_0xaf525f;dbSettings[_0x20bc1(0x1db)](_0x20bc1(0x1f8)+_0x2ae1e2,_0x360290)[_0x20bc1(0x200)](),settings=getSettings(),io['to']('botmanager')[_0x20bc1(0x201)](_0x20bc1(0x1c4),cleanSettings());}function storeSecure(_0x53e502){const _0x8cd347=_0xaf525f;dbSecure[_0x8cd347(0x2bc)](_0x8cd347(0x2a5))[_0x8cd347(0x1bf)](_0x53e502)[_0x8cd347(0x200)](),secure=_0x53e502;}function addBlacklist(_0x1c8231){const _0x57f14d=_0xaf525f;cleanBlacklist();let _0x3894b7;devices[_0x1c8231]['telegramIpApproval']?_0x3894b7=Math[_0x57f14d(0x27f)](devices[_0x1c8231][_0x57f14d(0x1a4)][_0x57f14d(0x292)],loginExpiry):_0x3894b7=loginExpiry,dbSecure[_0x57f14d(0x2bc)](_0x57f14d(0x1cd))[_0x57f14d(0x1bf)]({'expiry':new Date()[_0x57f14d(0x23a)]()+_0x3894b7*0x3c*0x3e8,'token':devices[_0x1c8231][_0x57f14d(0x21d)]['token']})[_0x57f14d(0x200)](),blacklist=dbSecure[_0x57f14d(0x2bc)](_0x57f14d(0x1cd))[_0x57f14d(0x288)]();}function cleanBlacklist(){const _0x5ddd8b=_0xaf525f;let _0x28c236=dbSecure['get'](_0x5ddd8b(0x1cd))[_0x5ddd8b(0x231)]()['value'](),_0xdbb3fc=new Date()[_0x5ddd8b(0x23a)]();_0x28c236[_0x5ddd8b(0x2c4)](_0x2e28c8=>{const _0x3a78a5=_0x5ddd8b;_0x2e28c8[_0x3a78a5(0x292)]<_0xdbb3fc&&dbSecure[_0x3a78a5(0x2bc)]('blacklist')[_0x3a78a5(0x2a9)]({'expiry':_0x2e28c8[_0x3a78a5(0x292)]})['write']();});}function initStates(){const _0x21dc97=_0xaf525f;let _0x5c1c6f=getConfiguration();_0x5c1c6f[_0x21dc97(0x2c4)](_0x2140b0=>{const _0x1f3ba5=_0x21dc97;_0x2140b0[_0x1f3ba5(0x193)]=_0x1f3ba5(0x1b3);}),storeConfiguration(_0x5c1c6f);}function onKeys(){const _0x9a11d4=new RSA();return new Promise(_0x1e4d6f=>{const _0x2e3d7d=_0x2f67;_0x9a11d4[_0x2e3d7d(0x1a6)]()[_0x2e3d7d(0x254)](_0x5db390=>{_0x1e4d6f(_0x5db390);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1bf280=_0xaf525f;let _0x2594bf=getConfiguration(),_0x5c2558=![];_0x2594bf['forEach'](_0x181afb=>{const _0x1bd24b=_0x2f67;if(_0x181afb['status']=='running')_0x181afb[_0x1bd24b(0x2bf)]=_0x1bd24b(0x2dc),_0x5c2558=!![];else _0x181afb['status']=='stopped'&&(_0x181afb[_0x1bd24b(0x2bf)]=_0x1bd24b(0x18b),_0x5c2558=!![]);});if(_0x5c2558)storeConfiguration(_0x2594bf);let _0x711d30=getSecure();if(!_0x711d30['hasOwnProperty']('secret')){let _0x5ded58=await generateKeys();_0x711d30['publicKey']=_0x5ded58[_0x1bf280(0x2d0)],_0x711d30[_0x1bf280(0x2d4)]=_0x5ded58[_0x1bf280(0x2d4)],_0x711d30[_0x1bf280(0x1fd)]=crypto['randomBytes'](0x20)['toString'](_0x1bf280(0x1d5));;storeSecure(_0x711d30);}let _0x52dbe8=getSettings();_0x5c2558=![];!_0x52dbe8['hasOwnProperty'](_0x1bf280(0x2cd))&&(_0x52dbe8[_0x1bf280(0x2cd)]=![],_0x52dbe8['bbUsername']='',_0x52dbe8[_0x1bf280(0x267)]='',_0x52dbe8[_0x1bf280(0x259)]=![],_0x5c2558=!![]);!_0x52dbe8['hasOwnProperty'](_0x1bf280(0x28e))&&(_0x52dbe8[_0x1bf280(0x28e)]=![],_0x52dbe8[_0x1bf280(0x20a)]=[],_0x52dbe8[_0x1bf280(0x232)]=![],_0x5c2558=!![]);if(!_0x52dbe8[_0x1bf280(0x194)](_0x1bf280(0x212))){if(_0x52dbe8[_0x1bf280(0x237)])_0x52dbe8['telegramEnabled']=!![];else _0x52dbe8[_0x1bf280(0x212)]=![];_0x5c2558=!![];}if(_0x5c2558)storeSettings(_0x52dbe8);}function storeConfiguration(_0xca7ea5){const _0xe47d6c=_0xaf525f;dbConfig[_0xe47d6c(0x2bc)](_0xe47d6c(0x2a1))['remove']()[_0xe47d6c(0x200)](),_0xca7ea5[_0xe47d6c(0x2c4)](_0x38d582=>{const _0x40e435=_0xe47d6c;delete _0x38d582[_0x40e435(0x2b1)];}),dbConfig[_0xe47d6c(0x2bc)](_0xe47d6c(0x2a1))[_0xe47d6c(0x1bf)](..._0xca7ea5)[_0xe47d6c(0x200)](),config=_0xca7ea5;}function resetPassword(){const _0x1c7242=_0xaf525f;tgBot&&settings[_0x1c7242(0x237)]&&(tgBot[_0x1c7242(0x23b)]('callback_query'),tgBot['sendMessage'](settings[_0x1c7242(0x237)],_0x1c7242(0x2ab),{'parse_mode':_0x1c7242(0x2d8),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x1c7242(0x2b6)},{'text':'no','callback_data':'no'}]]}})[_0x1c7242(0x223)](_0x2aaf86=>{telegramError(_0x2aaf86);}),tgBot['on'](_0x1c7242(0x255),async _0x20957b=>{const _0x29bda0=_0x1c7242,_0x81f6da=_0x20957b[_0x29bda0(0x1dd)],_0x103d47=_0x20957b['message'];tgBot[_0x29bda0(0x2b9)](_0x20957b['id'])[_0x29bda0(0x254)](async()=>{const _0x466a8f=_0x29bda0;if(_0x81f6da!='no'){const _0x537ac5=0xf,_0xce6b8d=_0x466a8f(0x26f),_0x1e9623=Array[_0x466a8f(0x209)](crypto['randomFillSync'](new Uint32Array(_0x537ac5)))[_0x466a8f(0x205)](_0x248923=>_0xce6b8d[_0x248923%_0xce6b8d['length']])[_0x466a8f(0x2b3)](''),_0x79a0e3=bcrypt[_0x466a8f(0x29f)](_0x1e9623,saltRounds);storeSettings({'bbPassword':_0x79a0e3}),await tgBot[_0x466a8f(0x2aa)](_0x103d47[_0x466a8f(0x1aa)]['id'],_0x466a8f(0x276)+_0x1e9623,{'parse_mode':_0x466a8f(0x2d8)})[_0x466a8f(0x223)](_0x49bd8c=>{telegramError(_0x49bd8c);});}else await tgBot[_0x466a8f(0x2aa)](_0x103d47[_0x466a8f(0x1aa)]['id'],_0x466a8f(0x203))['catch'](_0x1a2d69=>{telegramError(_0x1a2d69);});}),tgBot[_0x29bda0(0x23b)](_0x29bda0(0x255));}));}function logging(_0xb96d03){const _0x39580c=_0xaf525f;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0xb96d03);if(tgBot&&settings[_0x39580c(0x237)]&&settings['telegramEvents']!='orders')tgBot[_0x39580c(0x2aa)](settings[_0x39580c(0x237)],_0x39580c(0x1c1)+_0xb96d03)[_0x39580c(0x223)](_0x30a449=>{telegramError(_0x30a449);});}function getServerTime(){const _0x83768d=_0xaf525f,_0x38bb47=new Date();return _0x38bb47[_0x83768d(0x284)]()+'/'+(_0x38bb47[_0x83768d(0x2ad)]()+0x1)[_0x83768d(0x2cf)]()[_0x83768d(0x23d)](0x2,'0')+'/'+_0x38bb47[_0x83768d(0x25a)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x38bb47[_0x83768d(0x1ba)]()[_0x83768d(0x2cf)]()[_0x83768d(0x23d)](0x2,'0')+':'+_0x38bb47[_0x83768d(0x18a)]()[_0x83768d(0x2cf)]()[_0x83768d(0x23d)](0x2,'0')+':'+_0x38bb47[_0x83768d(0x2c2)]()[_0x83768d(0x2cf)]()[_0x83768d(0x23d)](0x2,'0');}function getTimeStamp(){const _0x55d93d=_0xaf525f,_0x43e749=shiftedTime();return _0x43e749[_0x55d93d(0x284)]()+'/'+(_0x43e749[_0x55d93d(0x2ad)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x43e749[_0x55d93d(0x25a)]()[_0x55d93d(0x2cf)]()['padStart'](0x2,'0')+'\x20'+_0x43e749[_0x55d93d(0x1ba)]()[_0x55d93d(0x2cf)]()[_0x55d93d(0x23d)](0x2,'0')+':'+_0x43e749['getMinutes']()[_0x55d93d(0x2cf)]()[_0x55d93d(0x23d)](0x2,'0')+':'+_0x43e749[_0x55d93d(0x2c2)]()[_0x55d93d(0x2cf)]()[_0x55d93d(0x23d)](0x2,'0');}function shiftedTime(){const _0x2526d8=_0xaf525f,_0x557c49=new Date();let _0x3d4c6c=_0x557c49;if(settings[_0x2526d8(0x2ba)]&&settings[_0x2526d8(0x2ba)]!==0x0)_0x3d4c6c=fns[_0x2526d8(0x29d)](_0x557c49,{'hours':settings[_0x2526d8(0x2ba)]});return _0x3d4c6c;}function startScheduler(){const _0x48ce71=_0xaf525f;let _0x546c04=new Date()[_0x48ce71(0x248)]();_0x546c04==0x1&&backupConfigFiles();_0x546c04==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x55c98d=_0xaf525f;fs[_0x55c98d(0x271)](configpath,{'withFileTypes':!![]})['forEach'](_0x424b5a=>{const _0x3b8e1b=_0x55c98d;if(!_0x424b5a['isDirectory']())fs['copyFileSync'](configpath+_0x424b5a['name'],configbackuppath+_0x424b5a[_0x3b8e1b(0x281)]);});}function triggerAnalytics(){const _0x877340=_0xaf525f;analytics[_0x877340(0x297)]({'title':_0x877340(0x25f),'href':_0x877340(0x24b),'path':'/v'+serverversion});}function validateCredentials(_0x12fc8f,_0x541bbd){const _0x275eda=_0xaf525f;if(_0x12fc8f[_0x275eda(0x20f)]==settings[_0x275eda(0x1d9)]&&bcrypt[_0x275eda(0x2e4)](_0x12fc8f[_0x275eda(0x2a2)],settings[_0x275eda(0x267)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x275eda(0x1fc),'token':null};else{const _0x2f3975=generateLoginToken(_0x541bbd);return{'allow':!![],'reason':_0x275eda(0x295),'token':_0x2f3975};}}else return{'allow':![],'reason':_0x275eda(0x2b5),'token':null};}function refreshToken(_0x1f1286){const _0x319c23=_0xaf525f,_0x29bcac=generateLoginToken(_0x1f1286);return{'allow':!![],'reason':_0x319c23(0x295),'token':_0x29bcac};}function validateAccess(_0x469030,_0x5e6d08){const _0x50db95=_0xaf525f;let _0x34d0da=devices[_0x5e6d08]['ip'],_0x37dc08;const _0x55e4fe=_0x5b0890=>{const _0x81f75b=_0x2f67;if(settings[_0x81f75b(0x2cd)]){if(settings[_0x81f75b(0x259)]){if(telegram2FaApproved(_0x5e6d08)){const _0x48af77=generateLoginToken(_0x5e6d08);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x48af77};}else return{'allow':![],'reason':_0x81f75b(0x22e),'token':null};}else return _0x37dc08=validToken(_0x5b0890,_0x5e6d08),_0x37dc08[_0x81f75b(0x194)](_0x81f75b(0x285))?{'allow':!![],'reason':_0x81f75b(0x216),'token':_0x5b0890}:{'allow':![],'reason':_0x81f75b(0x22e),'token':null};}else return{'allow':!![],'reason':_0x81f75b(0x1d4),'token':null};};if(settings[_0x50db95(0x28e)]){let _0x4e8e4e=[...settings[_0x50db95(0x20a)],_0x50db95(0x2d9),_0x50db95(0x202),_0x50db95(0x262)];if(_0x4e8e4e['includes'](_0x34d0da))return _0x55e4fe(_0x469030);else{_0x37dc08=validToken(_0x469030,_0x5e6d08);if(_0x37dc08[_0x50db95(0x194)]('success'))return _0x55e4fe(_0x469030);else{if(telegramIpApproved(_0x5e6d08)){const _0xbb3fce=generateToken(_0x5e6d08);return _0x37dc08=_0x55e4fe(_0x469030),_0x37dc08['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xbb3fce}:_0x37dc08;}else return settings[_0x50db95(0x232)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x50db95(0x2e5),'token':null};}}}else return _0x55e4fe(_0x469030);}function timelyDecrypt(_0x4c83a3,_0x150b71=!![]){const _0x29add1=_0xaf525f;if(_0x4c83a3)try{const _0x12b581=crypt[_0x29add1(0x1b4)](secure['privateKey'],_0x4c83a3)[_0x29add1(0x23f)],_0x11ec42=_0x12b581[_0x29add1(0x258)]('@')[0x0],_0x4b17ce=_0x12b581[_0x29add1(0x258)]('@')[0x1],_0x14655b=new Date()[_0x29add1(0x23a)]();if(_0x150b71){if(_0x14655b-_0x4b17ce<maxSecretAge*0x3e8)return _0x11ec42;else return![];}else return _0x11ec42;}catch(_0x195218){return![];}else return![];}const validToken=(_0x1f5536,_0x157c36)=>{const _0x364810=_0xaf525f,_0x362c33=devices[_0x157c36]['ip'];if(!_0x1f5536)return{'error':_0x364810(0x1f9)};for(let _0x4e5d01 of blacklist){if(_0x4e5d01['token']==_0x1f5536)return{'error':_0x364810(0x25d)};}let _0x262c79;try{_0x262c79=jwt[_0x364810(0x21e)](_0x1f5536,secure[_0x364810(0x1fd)]+_0x157c36);}catch{return{'error':_0x364810(0x27d)};}if(!_0x262c79[_0x364810(0x194)](_0x364810(0x25c))&&!_0x262c79[_0x364810(0x194)](_0x364810(0x20f))||!_0x262c79[_0x364810(0x194)](_0x364810(0x2a7)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x262c79[_0x364810(0x194)](_0x364810(0x20f))&&_0x262c79[_0x364810(0x194)](_0x364810(0x25c))){const {clientip:_0x5400ca}=_0x262c79;return _0x362c33==_0x5400ca?{'success':_0x364810(0x27a)}:{'error':_0x364810(0x2ca)};}else{if(_0x262c79[_0x364810(0x194)](_0x364810(0x20f))&&_0x262c79[_0x364810(0x194)](_0x364810(0x25c))){const {username:_0x1675b1,clientip:_0xed6ed7}=_0x262c79;return settings[_0x364810(0x1d9)]==_0x1675b1&&_0x362c33==_0xed6ed7?{'success':_0x364810(0x27a)}:{'error':_0x364810(0x26b)};}}},generateLoginToken=_0x4977c7=>{const _0x4b59c4=_0xaf525f;if(_0x4977c7){const _0x4ca23c=devices[_0x4977c7]['ip'];return jwt['sign']({'username':settings[_0x4b59c4(0x1d9)],'clientip':_0x4ca23c},secure[_0x4b59c4(0x1fd)]+_0x4977c7,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xdd00a4=>{const _0x1387d0=_0xaf525f;if(_0xdd00a4){const _0x4f56ca=devices[_0xdd00a4]['ip'];return jwt[_0x1387d0(0x2cb)]({'clientip':_0x4f56ca},secure[_0x1387d0(0x1fd)]+_0xdd00a4,{'expiresIn':devices[_0xdd00a4][_0x1387d0(0x1a4)][_0x1387d0(0x292)]*0x3c});}else return![];},telegramIpApproved=_0x4e4425=>{const _0x332989=_0xaf525f;let _0x34b6d2=![];return devices[_0x4e4425]['telegramIpApproval']&&devices[_0x4e4425][_0x332989(0x1a4)][_0x332989(0x292)]!=_0x332989(0x242)&&(_0x34b6d2=devices[_0x4e4425][_0x332989(0x1a4)][_0x332989(0x25c)]==devices[_0x4e4425]['ip']&&new Date()[_0x332989(0x23a)]()-devices[_0x4e4425]['telegramIpApproval']['timestamp']<devices[_0x4e4425][_0x332989(0x1a4)][_0x332989(0x292)]*0x3c*0x3e8),_0x34b6d2;},telegram2FaApproved=_0x3e9f65=>{const _0x389981=_0xaf525f;let _0x14c495=![];return devices[_0x3e9f65][_0x389981(0x273)]&&devices[_0x3e9f65]['telegram2FaApproval'][_0x389981(0x292)]!='reject'&&(_0x14c495=devices[_0x3e9f65][_0x389981(0x273)][_0x389981(0x25c)]==devices[_0x3e9f65]['ip']&&new Date()['getTime']()-devices[_0x3e9f65]['telegram2FaApproval'][_0x389981(0x24c)]<devices[_0x3e9f65]['telegram2FaApproval'][_0x389981(0x292)]*0x3c*0x3e8),_0x14c495;},normalizeIP=_0x3ca49b=>{const _0x222db4=_0xaf525f;let _0x159733=null,_0x5823e4=null;if(ipaddr[_0x222db4(0x26d)](_0x3ca49b)){const _0x2973c2=ipaddr[_0x222db4(0x1c6)](_0x3ca49b);_0x2973c2['kind']()===_0x222db4(0x2c7)?(_0x2973c2[_0x222db4(0x2e6)]()&&(_0x159733=_0x2973c2[_0x222db4(0x265)]()[_0x222db4(0x2cf)]()),_0x5823e4=_0x2973c2['toString']()):(_0x159733=_0x2973c2[_0x222db4(0x2cf)](),_0x5823e4=_0x2973c2[_0x222db4(0x2b7)]()[_0x222db4(0x2cf)]());}return{'show':_0x159733?_0x159733:_0x5823e4,'store':_0x5823e4};};