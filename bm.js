const _0x3a33c3=_0x24f7;(function(_0x5bccd7,_0x11167c){const _0x31ea56=_0x24f7,_0x4c37e9=_0x5bccd7();while(!![]){try{const _0x433356=parseInt(_0x31ea56(0x306))/0x1+parseInt(_0x31ea56(0x316))/0x2+-parseInt(_0x31ea56(0x2ca))/0x3+-parseInt(_0x31ea56(0x3ae))/0x4+parseInt(_0x31ea56(0x3e0))/0x5+parseInt(_0x31ea56(0x2df))/0x6*(-parseInt(_0x31ea56(0x2e7))/0x7)+parseInt(_0x31ea56(0x219))/0x8*(parseInt(_0x31ea56(0x319))/0x9);if(_0x433356===_0x11167c)break;else _0x4c37e9['push'](_0x4c37e9['shift']());}catch(_0x4a2968){_0x4c37e9['push'](_0x4c37e9['shift']());}}}(_0x1baf,0xc10c9));const _0x5b576b=function(){let _0x371a4b=!![];return function(_0x208176,_0x1d11d8){const _0x192f7b=_0x371a4b?function(){const _0x22eec7=_0x24f7;if(_0x1d11d8){const _0x4fa6ce=_0x1d11d8[_0x22eec7(0x28a)](_0x208176,arguments);return _0x1d11d8=null,_0x4fa6ce;}}:function(){};return _0x371a4b=![],_0x192f7b;};}(),_0x2d3977=_0x5b576b(this,function(){const _0x1bb2ad=_0x24f7;return _0x2d3977[_0x1bb2ad(0x1ed)]()[_0x1bb2ad(0x2d9)](_0x1bb2ad(0x3d8))['toString']()[_0x1bb2ad(0x334)](_0x2d3977)[_0x1bb2ad(0x2d9)](_0x1bb2ad(0x3d8));});_0x2d3977();'use strict';process[_0x3a33c3(0x327)][_0x3a33c3(0x277)]=0x1;const childProcess=require(_0x3a33c3(0x2fd)),fs=require('fs'),fns=require('date-fns'),low=require(_0x3a33c3(0x3e2)),FileSync=require(_0x3a33c3(0x297)),path=require('path'),crypto=require(_0x3a33c3(0x23e)),Crypt=require('hybrid-crypto-js')[_0x3a33c3(0x2fe)],RSA=require(_0x3a33c3(0x38a))[_0x3a33c3(0x302)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require(_0x3a33c3(0x30a)),argv=require(_0x3a33c3(0x291))(process[_0x3a33c3(0x314)][_0x3a33c3(0x392)](0x2))[_0x3a33c3(0x314)],uuidRandom=require(_0x3a33c3(0x390)),{Telegraf,Markup}=require(_0x3a33c3(0x202)),Mixpanel=require(_0x3a33c3(0x322)),axios=require('axios'),{GraphQLClient,gql}=require(_0x3a33c3(0x304)),util=require('util'),fileUpload=require(_0x3a33c3(0x3c0)),{networkInterfaces}=require('os'),PORT=argv[_0x3a33c3(0x35e)]||_0x3a33c3(0x326),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x3a33c3(0x3c9)](_0x3a33c3(0x342)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x3a33c3(0x29e)](0x1));const HOST=argv['host']||null,userID=argv[_0x3a33c3(0x37d)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x3a33c3(0x2d4)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x3a33c3(0x31d),settingsfile='bb-settings.json',securefile=_0x3a33c3(0x30e),environment=require('./'+bbpath2+_0x3a33c3(0x2e1))[_0x3a33c3(0x328)]||_0x3a33c3(0x36d),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x3a33c3(0x26d)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3a33c3(0x274)),configpath=userID?bbpath+_0x3a33c3(0x359)+userID+'/':bbpath+_0x3a33c3(0x359),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x3a33c3(0x2f2)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x3a33c3(0x29c),loggerfile=fs[_0x3a33c3(0x2eb)](logspath+_0x3a33c3(0x27b),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x3a33c3(0x37e);!fs['existsSync'](configpath)&&fs[_0x3a33c3(0x29b)](configpath);!fs[_0x3a33c3(0x26d)](configbackuppath)&&fs[_0x3a33c3(0x29b)](configbackuppath);!fs[_0x3a33c3(0x26d)](logspath)&&fs[_0x3a33c3(0x29b)](logspath);!fs[_0x3a33c3(0x26d)](zippath)&&fs[_0x3a33c3(0x29b)](zippath);!fs['existsSync'](temppath)&&fs[_0x3a33c3(0x29b)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3a33c3(0x272)]({'bots':[]})[_0x3a33c3(0x2f9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3a33c3(0x272)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3a33c3(0x344),'onepagemode':![],'marketcapApi':''}})[_0x3a33c3(0x2f9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x3a33c3(0x2f9)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x3a33c3(0x28b)});const saltRounds=0xa,mixpanel=Mixpanel[_0x3a33c3(0x2a6)](_0x3a33c3(0x32e),{'host':_0x3a33c3(0x364)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x3a33c3(0x31a)]&&(settings['telegramToken']!=''&&settings[_0x3a33c3(0x31a)]!=_0x3a33c3(0x39d))&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x3c833f,_0x1fa17b)=>{const _0x372fbd=_0x3a33c3,_0x935d1e=/#[A-Z]{3}#/g;if(typeof _0x3c833f=='string'){!_0x1fa17b?_0x3c833f=_0x3c833f['replace'](_0x935d1e,''):(_0x3c833f=_0x3c833f['replace'](/#BLU#/g,_0x372fbd(0x254)),_0x3c833f=_0x3c833f[_0x372fbd(0x2d7)](/#RED#/g,_0x372fbd(0x25f)),_0x3c833f=_0x3c833f[_0x372fbd(0x2d7)](/#YEL#/g,_0x372fbd(0x3b6)),_0x3c833f=_0x3c833f[_0x372fbd(0x2d7)](/#MAG#/g,_0x372fbd(0x211)),_0x3c833f=_0x3c833f[_0x372fbd(0x2d7)](/#CYA#/g,_0x372fbd(0x279)),_0x3c833f=_0x3c833f['replace'](/#RES#/g,_0x372fbd(0x264)));;}return _0x3c833f;},logger={'screen':_0x50df65=>{const _0x43b8ed=_0x3a33c3;console[_0x43b8ed(0x3c9)](parseColor(_0x50df65,!![]));},'simple':_0xe836f2=>{const _0x48777c=_0x3a33c3;console['log'](parseColor(_0xe836f2,!![])),loggerfile['write'](util[_0x48777c(0x2b4)](parseColor(_0xe836f2,![]))+'\x0a');},'full':async _0x4e748f=>{const _0x4c649b=_0x3a33c3,_0x50e6d3=getTimeStamp()+_0x4c649b(0x377)+_0x4e748f;console[_0x4c649b(0x3c9)](parseColor(_0x50e6d3,!![])),loggerfile[_0x4c649b(0x2f9)](util[_0x4c649b(0x2b4)](parseColor(_0x50e6d3,![]))+'\x0a');if(tgBot&&settings[_0x4c649b(0x3a5)]&&settings[_0x4c649b(0x2db)]!=_0x4c649b(0x361))await sendTelegram(settings['telegramChatId'],_0x4c649b(0x337)+parseColor(_0x4e748f,![]));},'debug':async(_0x154724,_0x2ee01f='')=>{const _0x1683c8=_0x3a33c3,_0x4b8e82=getTimeStamp()+_0x1683c8(0x204)+_0x154724;if(debugging)console['log'](parseColor(_0x4b8e82,!![]));loggerfile[_0x1683c8(0x2f9)](util[_0x1683c8(0x2b4)](parseColor(_0x4b8e82,![]))+'\x0a');if(_0x2ee01f){if(debugging)console['log'](_0x2ee01f);loggerfile[_0x1683c8(0x2f9)](util['format'](_0x2ee01f)+'\x0a');}}};let terminating=![];process['on'](_0x3a33c3(0x3e6),function(_0x5b1f53){const _0x4c5e9b=_0x3a33c3;_0x5b1f53[_0x4c5e9b(0x1ed)]()[_0x4c5e9b(0x343)](_0x4c5e9b(0x227))?(logger[_0x4c5e9b(0x3c6)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x5b1f53[_0x4c5e9b(0x35e)]+'#RES#'),process[_0x4c5e9b(0x210)]({'terminate':!![]},_0x3a25e7=>{})):logger[_0x4c5e9b(0x3c6)](_0x5b1f53);}),process['on']('exit',()=>{const _0x39b6f1=_0x3a33c3;stopAllBots(),process[_0x39b6f1(0x29e)](0x0);}),process['on'](_0x3a33c3(0x381),()=>{const _0x5e7f9f=_0x3a33c3;stopAllBots(),process[_0x5e7f9f(0x29e)](0x0);}),process['on'](_0x3a33c3(0x3c1),()=>{const _0x519f1c=_0x3a33c3;stopAllBots(),process[_0x519f1c(0x29e)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3a33c3(0x2e1))[_0x3a33c3(0x384)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3a33c3(0x2c2)),app=express(),http=require(_0x3a33c3(0x249))[_0x3a33c3(0x22f)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x3a33c3(0x324)](_0x3a33c3(0x3c4),async(_0x47633a,_0x42073e)=>{const _0x12a60d=_0x3a33c3,_0x33dfa2=_0x47633a[_0x12a60d(0x268)]['type'],_0x35ca25=getClientsWithBotID(_0x12a60d(0x2e2)),_0x583170=_0x47633a[_0x12a60d(0x317)][_0x12a60d(0x32f)],_0x497d28=timelyDecrypt(_0x583170,![]),_0x4ac26c=_0x35ca25[_0x12a60d(0x365)](_0x45c2f2=>_0x45c2f2[_0x12a60d(0x32f)]==_0x497d28);if(_0x4ac26c){const _0x174cde=normalizeIP(_0x47633a[_0x12a60d(0x1ec)]['remoteAddress'])[_0x12a60d(0x2ec)],_0x32fcb6=_0x47633a[_0x12a60d(0x317)][_0x12a60d(0x2b0)];if(validateAccess(_0x32fcb6,_0x497d28,_0x174cde)['allow'])_0x33dfa2==_0x12a60d(0x362)&&await backupConfigFiles(),await zipFiles(_0x33dfa2),_0x42073e[_0x12a60d(0x24d)](zippath+(_0x33dfa2+_0x12a60d(0x28c)),_0xfb09a4=>{const _0x4b5c71=_0x12a60d;_0xfb09a4&&(logger[_0x4b5c71(0x348)](_0x4b5c71(0x3bf)+_0x33dfa2),logger[_0x4b5c71(0x3c6)](_0xfb09a4));});else logger[_0x12a60d(0x348)](_0x12a60d(0x3c8)+_0x33dfa2+_0x12a60d(0x2cf));}else logger[_0x12a60d(0x348)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x33dfa2+_0x12a60d(0x201));}),app[_0x3a33c3(0x292)]('/upload-backup',async(_0x189ba2,_0x3770a6)=>{const _0x49af1f=_0x3a33c3,_0x30bee1=getClientsWithBotID('botmanager'),_0xab2aad=_0x189ba2[_0x49af1f(0x317)][_0x49af1f(0x32f)],_0x237bac=timelyDecrypt(_0xab2aad,![]),_0x49bd85=_0x30bee1['find'](_0x395afc=>_0x395afc[_0x49af1f(0x32f)]==_0x237bac);logger[_0x49af1f(0x21e)]('Backup\x20file\x20uploaded');if(_0x49bd85){const _0x142b25=normalizeIP(_0x189ba2['socket'][_0x49af1f(0x1e9)])['store'],_0x1a1f33=_0x189ba2['headers'][_0x49af1f(0x2b0)];if(validateAccess(_0x1a1f33,_0x237bac,_0x142b25)[_0x49af1f(0x3b8)]){if(_0x189ba2[_0x49af1f(0x2f5)]){const _0x2bf13f=_0x189ba2['files']['backupfile'];await _0x2bf13f['mv'](temppath+_0x2bf13f[_0x49af1f(0x237)]),_0x3770a6[_0x49af1f(0x210)]({'status':!![],'message':_0x49af1f(0x242)});const _0x4479be=getBotsWithMode();_0x4479be[_0x49af1f(0x3cd)]>0x0?confirmRestore(temppath,_0x2bf13f[_0x49af1f(0x237)]):unzipFile(temppath,_0x2bf13f[_0x49af1f(0x237)]);}}else logger['full'](_0x49af1f(0x2de));}else logger[_0x49af1f(0x348)](_0x49af1f(0x2b7));}),app[_0x3a33c3(0x2ed)](express['static'](path[_0x3a33c3(0x36a)](__dirname,bbpath2,_0x3a33c3(0x27a)))),app[_0x3a33c3(0x2ed)](express[_0x3a33c3(0x2c0)](path[_0x3a33c3(0x36a)](__dirname,bbpath2,_0x3a33c3(0x3cf)))),app[_0x3a33c3(0x324)]('/',function(_0x4b50a7,_0x4ed255){const _0x3152b7=_0x3a33c3;_0x4ed255[_0x3152b7(0x34b)](path[_0x3152b7(0x36a)](__dirname,bbpath2,_0x3152b7(0x27a),_0x3152b7(0x1fd)));}),app[_0x3a33c3(0x324)](_0x3a33c3(0x3a2),function(_0x389456,_0x5d6bcc){const _0x46d3d6=_0x3a33c3;_0x5d6bcc[_0x46d3d6(0x34b)](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x3a33c3(0x324)]('/:bot/portfolio',(_0x294a63,_0x2ba9ea)=>{const _0x31fbe5=_0x3a33c3;_0x2ba9ea[_0x31fbe5(0x34b)](path[_0x31fbe5(0x36a)](__dirname,bbpath2,_0x31fbe5(0x3cf),'index.html'));}),app['get'](_0x3a33c3(0x261),(_0x3e9a67,_0x353f5a)=>{const _0x4a9b37=_0x3a33c3;_0x353f5a[_0x4a9b37(0x34b)](path[_0x4a9b37(0x36a)](__dirname,bbpath2,'build',_0x4a9b37(0x1fd)));}),app[_0x3a33c3(0x324)](_0x3a33c3(0x300),(_0x972c39,_0x245545)=>{const _0x118d73=_0x3a33c3;_0x245545[_0x118d73(0x34b)](path[_0x118d73(0x36a)](__dirname,bbpath2,_0x118d73(0x3cf),'index.html'));}),app[_0x3a33c3(0x324)](_0x3a33c3(0x3b1),(_0x41a651,_0x2b1866)=>{const _0x368430=_0x3a33c3;_0x2b1866[_0x368430(0x34b)](path[_0x368430(0x36a)](__dirname,bbpath2,_0x368430(0x3cf),'index.html'));}),app[_0x3a33c3(0x324)](_0x3a33c3(0x239),(_0x535d69,_0x2b93da)=>{const _0x1b1264=_0x3a33c3;_0x2b93da[_0x1b1264(0x34b)](path[_0x1b1264(0x36a)](__dirname,bbpath2,_0x1b1264(0x3cf),_0x1b1264(0x1fd)));}),app[_0x3a33c3(0x324)](_0x3a33c3(0x24b),(_0x242d0c,_0x32e587)=>{const _0x1e3ee5=_0x3a33c3;_0x32e587[_0x1e3ee5(0x34b)](path[_0x1e3ee5(0x36a)](__dirname,bbpath2,_0x1e3ee5(0x3cf),_0x1e3ee5(0x1fd)));});if(HOST)http['listen'](PORT,HOST);else http[_0x3a33c3(0x311)](PORT);const io=require(_0x3a33c3(0x3a1))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function _0x24f7(_0x30dc8f,_0x5b777a){const _0x3bbc24=_0x1baf();return _0x24f7=function(_0x2d3977,_0x5b576b){_0x2d3977=_0x2d3977-0x1e4;let _0x1baf9a=_0x3bbc24[_0x2d3977];return _0x1baf9a;},_0x24f7(_0x30dc8f,_0x5b777a);}function getServerIP(){const _0x204444=_0x3a33c3;let _0x3f8460='[ip-address]';const _0x2a08e3=networkInterfaces(),_0x3cca1b={};for(const _0x32be80 of Object[_0x204444(0x212)](_0x2a08e3)){for(const _0x2dbeed of _0x2a08e3[_0x32be80]){if((_0x2dbeed[_0x204444(0x3b3)]=='IPv4'||_0x2dbeed[_0x204444(0x3b3)]==0x4)&&!_0x2dbeed[_0x204444(0x2bf)]){const _0x301747=ipaddr[_0x204444(0x3d3)](_0x2dbeed[_0x204444(0x374)])[_0x204444(0x30d)]();_0x301747!=_0x204444(0x2d6)&&(!_0x3cca1b[_0x32be80]&&(_0x3cca1b[_0x32be80]=[]),_0x3cca1b[_0x32be80][_0x204444(0x3d4)](_0x2dbeed[_0x204444(0x374)]),_0x3f8460=_0x2dbeed[_0x204444(0x374)]);}}}return{'serverip':_0x3f8460,'netinterfaces':_0x3cca1b};}async function startServer(){const _0x5bd546=_0x3a33c3,{serverip:_0x1b491c,netinterfaces:_0x543c8e}=getServerIP();logger[_0x5bd546(0x3c6)](''),logger[_0x5bd546(0x3c6)](_0x5bd546(0x236)),await logger[_0x5bd546(0x348)](_0x5bd546(0x280)+serverversion+_0x5bd546(0x385)+(environment==_0x5bd546(0x3ec)?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x5bd546(0x1fb)+_0x1b491c+':'+PORT+_0x5bd546(0x3d9))),logger[_0x5bd546(0x3c6)]('-----------------------------------------------------------------------------------');if(config[_0x5bd546(0x3cd)]!=0x0)for(const _0x563d3b of config){const _0x21b37f=_0x563d3b[_0x5bd546(0x214)]=='auto'?'a':'m';if(_0x563d3b[_0x5bd546(0x23d)]=='enabled'||_0x563d3b['status']==_0x5bd546(0x3e4))await logger[_0x5bd546(0x348)]('Starting\x20('+_0x21b37f+')\x20|\x20Bot\x20'+_0x563d3b[_0x5bd546(0x285)]+_0x5bd546(0x1eb)+_0x563d3b['botname']),startBot([_0x563d3b[_0x5bd546(0x285)],userID],{'cwd':bbpath},function(_0x104b43){if(_0x104b43)logger['full'](_0x104b43);});else(_0x563d3b[_0x5bd546(0x23d)]==_0x5bd546(0x1f3)||_0x563d3b[_0x5bd546(0x23d)]=='new-disabled')&&await logger['full'](_0x5bd546(0x3da)+_0x21b37f+_0x5bd546(0x38c)+_0x563d3b['botID']+_0x5bd546(0x1eb)+_0x563d3b['botname']);}else!newBot&&logger['simple'](_0x5bd546(0x3e5));if(newBot)addBot();logger['simple'](_0x5bd546(0x236)),logger['simple'](''),await logger['debug'](_0x5bd546(0x20b)+nodeversion),await logger[_0x5bd546(0x21e)](_0x5bd546(0x358),_0x543c8e);}function startSocket(){const _0x41df3d=_0x3a33c3;io['on'](_0x41df3d(0x253),_0x3b23c=>{const _0x5567cd=_0x41df3d;let _0x110a28,_0x5ee2f6,_0x1801fd,_0x5bca29,_0x27f54a;const _0x5e5f9c=_0x3b23c[_0x5567cd(0x28e)][_0x5567cd(0x317)]['referer'];_0x5ee2f6=_0x5e5f9c[_0x5567cd(0x3aa)](/bot[0-9]{3}/);if(_0x5ee2f6)_0x1801fd=_0x5ee2f6[0x0][_0x5567cd(0x3aa)](/[0-9]{3}/);if(_0x1801fd)_0x110a28=_0x1801fd[0x0];else _0x110a28=_0x5567cd(0x2e2);const _0x348346=_0x3b23c[_0x5567cd(0x28e)][_0x5567cd(0x2c5)][_0x5567cd(0x396)];if(!_0x348346)_0x3b23c['emit'](_0x5567cd(0x23d),{'publicKey':secure['publicKey']});else{_0x5bca29=timelyDecrypt(_0x348346,![]);if(!_0x5bca29)_0x3b23c[_0x5567cd(0x3a6)](_0x5567cd(0x23d),{'publicKey':secure[_0x5567cd(0x21d)]});else{_0x27f54a=normalizeIP(_0x3b23c[_0x5567cd(0x26b)][_0x5567cd(0x1e9)])[_0x5567cd(0x2ec)];if(!devices[_0x5bca29])devices[_0x5bca29]={'uuid':_0x5bca29,'access':{'token':null}};devices[_0x5bca29]['ip']=_0x27f54a;const _0x2e7553=addClient(_0x3b23c['id'],_0x5bca29,_0x110a28);setAccess(_0x2e7553),emitMessages(),_0x3b23c['on'](_0x5567cd(0x251),_0x25d270=>{const _0x5dc5b4=_0x5567cd,_0x48ad58=timelyDecrypt(_0x25d270[_0x5dc5b4(0x3c2)],!![],_0x5dc5b4(0x367));if(_0x48ad58){_0x25d270={'username':_0x25d270[_0x5dc5b4(0x347)],'password':_0x48ad58},devices[_0x5bca29][_0x5dc5b4(0x230)]=validateCredentials(_0x25d270,_0x5bca29);if(devices[_0x5bca29]['access']['allow']==![]&&devices[_0x5bca29][_0x5dc5b4(0x230)]['reason']==_0x5dc5b4(0x222))_0x3b23c[_0x5dc5b4(0x3a6)](_0x5dc5b4(0x23d),{'access':devices[_0x5bca29][_0x5dc5b4(0x230)]}),loginAccess2FA(_0x5bca29,_0x27f54a);else{if(devices[_0x5bca29][_0x5dc5b4(0x230)]['allow']==![]&&devices[_0x5bca29]['access'][_0x5dc5b4(0x241)]==_0x5dc5b4(0x338))_0x3b23c[_0x5dc5b4(0x3a6)]('status',{'access':devices[_0x5bca29][_0x5dc5b4(0x230)]});else devices[_0x5bca29][_0x5dc5b4(0x230)]['allow']&&devices[_0x5bca29][_0x5dc5b4(0x230)]['reason']==_0x5dc5b4(0x223)&&(getClientsWithUuid(_0x5bca29)[_0x5dc5b4(0x3b2)](_0x5e9dfe=>{setAccess(_0x5e9dfe);}),logger['debug']('Logged\x20in\x20user\x20...'+_0x5bca29[_0x5dc5b4(0x392)](-0x8)),setTokenRefresh(_0x5bca29),setSessionTimeout(_0x5dc5b4(0x251),_0x5bca29));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x3b23c['on']('reset-password',()=>{resetPassword();}),_0x3b23c['on'](_0x5567cd(0x276),_0x2209ff=>{removeClient(_0x3b23c['id']);}),_0x110a28=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x568732){const _0x1860bc=_0x3a33c3;if(_0x568732!=_0x1860bc(0x2e2)&&config['apiKey']!=''){if(pid[_0x568732])pid[_0x568732]['send']({'function':_0x1860bc(0x393),'args':null});}_0x568732!=_0x1860bc(0x2e2)&&broadcastToBots(_0x1860bc(0x22a),JSON[_0x1860bc(0x225)](config));}function reloadBotManager(){const _0x3f26be=_0x3a33c3;getClientsWithBotID(_0x3f26be(0x2e2))[_0x3f26be(0x3b2)](_0x45029a=>{const _0x435264=_0x3f26be;getSocket(_0x45029a['id'])[_0x435264(0x3a6)](_0x435264(0x23d),{'access':{'allow':![],'reason':_0x435264(0x1f1),'token':null}});});}function getSocket(_0x40ae5a){const _0x38f59a=_0x3a33c3;return io[_0x38f59a(0x380)][_0x38f59a(0x380)][_0x38f59a(0x324)](_0x40ae5a);}function setAccess(_0x4b094a){const _0x328ee5=_0x3a33c3,_0x19069c=getSocket(_0x4b094a['id']),_0x34befd=_0x4b094a[_0x328ee5(0x32f)],_0x182008=_0x4b094a[_0x328ee5(0x2be)];devices[_0x34befd][_0x328ee5(0x230)]=validateAccess(devices[_0x34befd]['access'][_0x328ee5(0x3e3)],_0x34befd),logger['debug'](_0x328ee5(0x2d3)+devices[_0x34befd]['access'][_0x328ee5(0x241)]+_0x328ee5(0x26e)+_0x4b094a['id'][_0x328ee5(0x392)](-0x8)+_0x328ee5(0x3b7)+_0x34befd[_0x328ee5(0x392)](-0x8)),_0x19069c[_0x328ee5(0x36a)](_0x34befd);if(devices[_0x34befd]['access'][_0x328ee5(0x3b8)]){_0x19069c[_0x328ee5(0x36a)](_0x182008);if(_0x182008==_0x328ee5(0x2e2))initializeSocketBotManager(_0x19069c);else initializeSocketBot(_0x19069c);initClient(_0x182008);}devices[_0x34befd][_0x328ee5(0x230)][_0x328ee5(0x3e3)]&&devices[_0x34befd][_0x328ee5(0x230)]['reason']==_0x328ee5(0x34c)&&setSessionTimeout(_0x328ee5(0x363),_0x34befd),devices[_0x34befd][_0x328ee5(0x230)][_0x328ee5(0x3e3)]&&devices[_0x34befd][_0x328ee5(0x230)]['reason']==_0x328ee5(0x39b)&&setSessionTimeout(_0x328ee5(0x251),_0x34befd),_0x19069c['emit'](_0x328ee5(0x23d),{'status':_0x4b094a['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x34befd][_0x328ee5(0x230)],'externalip':devices[_0x34befd]['ip'],'publicKey':secure[_0x328ee5(0x21d)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x34befd][_0x328ee5(0x230)][_0x328ee5(0x3b8)]==![]&&devices[_0x34befd][_0x328ee5(0x230)][_0x328ee5(0x241)]=='2FA\x20required'&&temporaryAccess2FA(_0x34befd,devices[_0x34befd]['ip']);}function setSessionTimeout(_0x3d8e2b,_0x301d62){const _0x58306e=_0x3a33c3;let _0x16f74c;if(_0x3d8e2b=='login')_0x16f74c=loginExpiry*0x3c*0x3e8;else _0x16f74c=devices[_0x301d62][_0x58306e(0x320)][_0x58306e(0x397)]*0x3c*0x3e8-(new Date()[_0x58306e(0x3d2)]()-devices[_0x301d62][_0x58306e(0x320)][_0x58306e(0x3c5)]);if(devices[_0x301d62][_0x58306e(0x26f)])clearTimeout(devices[_0x301d62]['pidExpireLogin']);devices[_0x301d62]['pidExpireLogin']=setTimeout(()=>{const _0x1482df=_0x58306e;if(devices[_0x301d62]['pidRefreshToken'])clearTimeout(devices[_0x301d62][_0x1482df(0x315)]);removeSocketListeners(_0x301d62),addBlacklist(_0x301d62),devices[_0x301d62][_0x1482df(0x320)]=null,devices[_0x301d62][_0x1482df(0x36f)]=null,devices[_0x301d62][_0x1482df(0x230)][_0x1482df(0x3e3)]=null,logger[_0x1482df(0x21e)](_0x1482df(0x39c)+_0x301d62['slice'](-0x8)),devices[_0x301d62][_0x1482df(0x230)]=validateAccess(devices[_0x301d62][_0x1482df(0x230)][_0x1482df(0x3e3)],_0x301d62),!(devices[_0x301d62]['access']['allow']&&devices[_0x301d62][_0x1482df(0x230)][_0x1482df(0x241)]==_0x1482df(0x22d))&&(_0x3d8e2b==_0x1482df(0x251)?io['to'](_0x301d62)[_0x1482df(0x3a6)]('status',{'access':{'allow':![],'reason':_0x1482df(0x296),'token':null}}):io['to'](_0x301d62)[_0x1482df(0x3a6)](_0x1482df(0x23d),{'access':{'allow':![],'reason':_0x1482df(0x37c),'token':null}})),devices[_0x301d62][_0x1482df(0x230)][_0x1482df(0x3e3)]=null;},_0x16f74c);}function setTokenRefresh(_0x45383e){const _0x31e449=_0x3a33c3;if(devices[_0x45383e][_0x31e449(0x315)])clearTimeout(devices[_0x45383e][_0x31e449(0x315)]);devices[_0x45383e][_0x31e449(0x315)]=setTimeout(()=>{const _0x40cc4d=_0x31e449;getClientsWithUuid(_0x45383e)[_0x40cc4d(0x3cd)]!=0x0?(devices[_0x45383e][_0x40cc4d(0x230)]=refreshToken(_0x45383e),io['to'](_0x45383e)[_0x40cc4d(0x3a6)](_0x40cc4d(0x23d),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x45383e][_0x40cc4d(0x230)],'externalip':devices[_0x45383e]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x45383e)):clearTimeout(devices[_0x45383e][_0x40cc4d(0x315)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1a30c8){const _0x1a289f=_0x3a33c3,_0xa238af=getClient(_0x1a30c8['id'])[_0x1a289f(0x32f)];_0x1a30c8[_0x1a289f(0x3a6)](_0x1a289f(0x22a),config),_0x1a30c8[_0x1a289f(0x3a6)](_0x1a289f(0x34d),cleanSettings()),_0x1a30c8['on'](_0x1a289f(0x2e6),_0x3a732b=>{const _0x8cb6c3=_0x1a289f;if(validateAccess(_0x3a732b,_0xa238af)['allow'])addBot();else logger['full'](_0x8cb6c3(0x2bb));}),_0x1a30c8['on'](_0x1a289f(0x3e8),(_0x1f93a3,_0x3f8f0c)=>{const _0x5f555c=_0x1a289f;if(validateAccess(_0x3f8f0c,_0xa238af)['allow'])toggleBot(_0x1f93a3[_0x5f555c(0x285)],_0x1f93a3[_0x5f555c(0x23d)],_0x1f93a3[_0x5f555c(0x1ee)]);else logger[_0x5f555c(0x348)](_0x5f555c(0x2b2));}),_0x1a30c8['on'](_0x1a289f(0x2fa),(_0x47190e,_0x294d1f)=>{const _0x515804=_0x1a289f;if(validateAccess(_0x294d1f,_0xa238af)[_0x515804(0x3b8)])toggleBotMode(_0x47190e);else logger[_0x515804(0x348)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1a30c8['on']('delete-bot',(_0x1a9f58,_0x1303d5)=>{const _0x43a871=_0x1a289f;if(validateAccess(_0x1303d5,_0xa238af)['allow'])deleteBot(_0x1a9f58);else logger[_0x43a871(0x348)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x1a30c8['on'](_0x1a289f(0x267),(_0x14906e,_0x29e59f)=>{const _0x44edb0=_0x1a289f;if(validateAccess(_0x29e59f,_0xa238af)[_0x44edb0(0x3b8)])storeSettings(_0x14906e,!![]);else logger[_0x44edb0(0x348)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1a30c8['on'](_0x1a289f(0x20f),_0x4db499=>{const _0x453483=_0x1a289f;if(validateAccess(_0x4db499,_0xa238af)[_0x453483(0x3b8)])updateBB(_0x453483(0x389));else logger['full'](_0x453483(0x375));}),_0x1a30c8['on'](_0x1a289f(0x284),_0x51eb62=>{const _0x2bffd9=_0x1a289f;if(validateAccess(_0x51eb62,_0xa238af)[_0x2bffd9(0x3b8)])updateBB('reinstall');else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x1a30c8['on'](_0x1a289f(0x2ef),_0x355dbc=>{const _0x5cec35=_0x1a289f;if(validateAccess(_0x355dbc,_0xa238af)[_0x5cec35(0x3b8)]){const _0x1a5e4e=getClient(_0x1a30c8['id']);if(_0x1a5e4e)getBackupFiles(_0x1a5e4e[_0x5cec35(0x32f)]);else logger[_0x5cec35(0x348)](_0x5cec35(0x2c4));}else logger[_0x5cec35(0x348)](_0x5cec35(0x352));}),_0x1a30c8['on'](_0x1a289f(0x255),(_0x3c2a83,_0x4bccbe)=>{const _0x38adb3=_0x1a289f;if(validateAccess(_0x4bccbe,_0xa238af)['allow'])restoreBackupFile(_0x3c2a83);else logger[_0x38adb3(0x348)](_0x38adb3(0x38d));}),_0x1a30c8['on'](_0x1a289f(0x228),_0x4c7e5b=>{const _0x3a8f63=_0x1a289f;if(validateAccess(_0x4c7e5b,_0xa238af)[_0x3a8f63(0x3b8)])getMessages();else logger['full'](_0x3a8f63(0x351));}),_0x1a30c8['on']('confirm-message',(_0x385486,_0x1e1207)=>{const _0x45e89f=_0x1a289f;if(validateAccess(_0x1e1207,_0xa238af)['allow'])confirmMessage(_0x385486);else logger[_0x45e89f(0x348)](_0x45e89f(0x32c));}),_0x1a30c8['on']('logout',_0x1b426c=>{const _0x40863e=_0x1a289f;if(validateAccess(_0x1b426c,_0xa238af)[_0x40863e(0x3b8)]){if(devices[_0xa238af][_0x40863e(0x315)])clearTimeout(devices[_0xa238af][_0x40863e(0x315)]);if(devices[_0xa238af]['pidExpireLogin'])clearTimeout(devices[_0xa238af]['pidExpireLogin']);removeSocketListeners(getClient(_0x1a30c8['id'])[_0x40863e(0x32f)]),addBlacklist(_0xa238af),devices[_0xa238af]['telegramIpApproval']=null,devices[_0xa238af]['telegram2FaApproval']=null,devices[_0xa238af]['access'][_0x40863e(0x3e3)]=null,logger['debug']('Logged\x20out\x20user\x20...'+_0xa238af[_0x40863e(0x392)](-0x8)),io['to'](getClient(_0x1a30c8['id'])[_0x40863e(0x32f)])[_0x40863e(0x3a6)](_0x40863e(0x23d),{'access':{'allow':![],'reason':_0x40863e(0x248),'token':null}});}else logger[_0x40863e(0x348)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x34c14b){const _0x3adea2=_0x3a33c3,_0x482b5e=getClient(_0x34c14b['id'])['bot'],_0x3e2868=getClient(_0x34c14b['id'])['uuid'];_0x34c14b['on'](_0x3adea2(0x3c3),(_0x566061,_0x4395dc)=>{const _0xc04221=_0x3adea2;if(validateAccess(_0x4395dc,_0x3e2868)['allow']){if(pid[_0x482b5e])pid[_0x482b5e][_0xc04221(0x210)]({'function':'emitHistory','args':_0x566061});}else logger[_0xc04221(0x348)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x34c14b['on'](_0x3adea2(0x370),(_0x44c1be,_0x37bed9)=>{const _0x4fcf88=_0x3adea2;if(validateAccess(_0x37bed9,_0x3e2868)[_0x4fcf88(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e][_0x4fcf88(0x210)]({'function':'deleteHistoryAlerts','args':_0x44c1be});}else logger[_0x4fcf88(0x348)](_0x4fcf88(0x3e7));}),_0x34c14b['on'](_0x3adea2(0x217),(_0x6ce898,_0x4a6592)=>{const _0x804993=_0x3adea2;if(validateAccess(_0x4a6592,_0x3e2868)[_0x804993(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e]['send']({'function':_0x804993(0x35c),'args':_0x6ce898});}else logger[_0x804993(0x348)](_0x804993(0x1e8));}),_0x34c14b['on'](_0x3adea2(0x25e),(_0x12bc6b,_0x51fe1b)=>{const _0x98d859=_0x3adea2;if(validateAccess(_0x51fe1b,_0x3e2868)[_0x98d859(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e][_0x98d859(0x210)]({'function':_0x98d859(0x27c),'args':_0x12bc6b});}else logger['full'](_0x98d859(0x398));}),_0x34c14b['on'](_0x3adea2(0x215),(_0x395767,_0xba5194)=>{const _0x10a8ee=_0x3adea2;if(validateAccess(_0xba5194,_0x3e2868)[_0x10a8ee(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e][_0x10a8ee(0x210)]({'function':'storeHeadless','args':_0x395767});}else logger[_0x10a8ee(0x348)](_0x10a8ee(0x357));}),_0x34c14b['on']('store-fiat',(_0x38277a,_0xb32a51)=>{const _0x5c5bbb=_0x3adea2;if(validateAccess(_0xb32a51,_0x3e2868)['allow']){if(pid[_0x482b5e])pid[_0x482b5e]['send']({'function':_0x5c5bbb(0x3b4),'args':_0x38277a});}else logger['full'](_0x5c5bbb(0x24c));}),_0x34c14b['on'](_0x3adea2(0x3ac),_0x557364=>{const _0x91cd7c=_0x3adea2;if(validateAccess(_0x557364,_0x3e2868)[_0x91cd7c(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e]['send']({'function':_0x91cd7c(0x1ef),'args':null});}else logger[_0x91cd7c(0x348)](_0x91cd7c(0x2a0));}),_0x34c14b['on'](_0x3adea2(0x2dd),_0x230fde=>{const _0x11e5fd=_0x3adea2;if(validateAccess(_0x230fde,_0x3e2868)['allow']){if(pid[_0x482b5e])pid[_0x482b5e]['send']({'function':_0x11e5fd(0x1f7),'args':null});}else logger[_0x11e5fd(0x348)](_0x11e5fd(0x2f4));}),_0x34c14b['on'](_0x3adea2(0x24e),(_0x2719da,_0x5e1ef9)=>{const _0x47b4be=_0x3adea2;if(validateAccess(_0x5e1ef9,_0x3e2868)[_0x47b4be(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e][_0x47b4be(0x210)]({'function':_0x47b4be(0x290),'args':_0x2719da});}else logger['full'](_0x47b4be(0x2ff));}),_0x34c14b['on'](_0x3adea2(0x36b),_0x4ddce1=>{const _0x350467=_0x3adea2;if(validateAccess(_0x4ddce1,_0x3e2868)['allow']){if(pid[_0x482b5e])pid[_0x482b5e][_0x350467(0x210)]({'function':'cancelLoading','args':null});}else logger[_0x350467(0x348)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x34c14b['on'](_0x3adea2(0x307),_0xa0d00a=>{const _0x11056c=_0x3adea2;if(validateAccess(_0xa0d00a,_0x3e2868)[_0x11056c(0x3b8)]){if(pid[_0x482b5e])pid[_0x482b5e]['send']({'function':_0x11056c(0x2c6),'args':null});}else logger[_0x11056c(0x348)](_0x11056c(0x33b));}),_0x34c14b['on']('update-bb',_0x390c16=>{const _0x41a108=_0x3adea2;if(validateAccess(_0x390c16,_0x3e2868)[_0x41a108(0x3b8)])updateBB(_0x41a108(0x389));else logger[_0x41a108(0x348)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x34c14b['on'](_0x3adea2(0x228),_0x3985a1=>{const _0x2fb644=_0x3adea2;if(validateAccess(_0x3985a1,_0x3e2868)[_0x2fb644(0x3b8)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x34c14b['on'](_0x3adea2(0x394),(_0x436c2c,_0x22ec7b)=>{const _0x5423c9=_0x3adea2;if(validateAccess(_0x22ec7b,_0x3e2868)[_0x5423c9(0x3b8)])confirmMessage(_0x436c2c);else logger[_0x5423c9(0x348)](_0x5423c9(0x32c));}),_0x34c14b['on'](_0x3adea2(0x269),_0x57f1ca=>{const _0x3bce25=_0x3adea2;if(validateAccess(_0x57f1ca,_0x3e2868)[_0x3bce25(0x3b8)]){if(devices[_0x3e2868][_0x3bce25(0x315)])clearTimeout(devices[_0x3e2868][_0x3bce25(0x315)]);if(devices[_0x3e2868][_0x3bce25(0x26f)])clearTimeout(devices[_0x3e2868][_0x3bce25(0x26f)]);removeSocketListeners(getClient(_0x34c14b['id'])[_0x3bce25(0x32f)]),addBlacklist(_0x3e2868),devices[_0x3e2868]['telegramIpApproval']=null,devices[_0x3e2868][_0x3bce25(0x36f)]=null,devices[_0x3e2868][_0x3bce25(0x230)]['token']=null,logger[_0x3bce25(0x21e)]('Logged\x20out\x20user\x20...'+_0x3e2868[_0x3bce25(0x392)](-0x8)),io['to'](getClient(_0x34c14b['id'])['uuid'])[_0x3bce25(0x3a6)](_0x3bce25(0x23d),{'access':{'allow':![],'reason':_0x3bce25(0x248),'token':null}});}else logger[_0x3bce25(0x348)](_0x3bce25(0x3ab));});}function removeSocketListeners(_0x480185){getClientsWithUuid(_0x480185)['forEach'](_0x3815ea=>{const _0xd6c582=_0x24f7;getSocket(_0x3815ea['id'])[_0xd6c582(0x368)]();});}function cleanSettings(){const _0x5cb215=_0x3a33c3;let _0x5d39eb=settings;return settings[_0x5cb215(0x31a)]&&settings[_0x5cb215(0x31a)]!=''&&(_0x5d39eb={..._0x5d39eb,'telegramToken':_0x5cb215(0x369)}),settings['bbPassword']&&settings[_0x5cb215(0x39f)]!=''&&(_0x5d39eb={..._0x5d39eb,'bbPassword':_0x5cb215(0x369)}),settings[_0x5cb215(0x2b3)]&&settings[_0x5cb215(0x2b3)]!=''&&(_0x5d39eb={..._0x5d39eb,'marketcapApi':_0x5cb215(0x369)}),(settings[_0x5cb215(0x39f)]&&settings[_0x5cb215(0x39f)]=='***'||settings[_0x5cb215(0x31a)]&&settings[_0x5cb215(0x31a)]==_0x5cb215(0x39d)||settings[_0x5cb215(0x2b3)]&&settings['marketcapApi']==_0x5cb215(0x39d))&&(_0x5d39eb={..._0x5d39eb,'restored':{'password':settings[_0x5cb215(0x39f)]=='***','telegram':settings[_0x5cb215(0x31a)]==_0x5cb215(0x39d),'marketcap':settings[_0x5cb215(0x2b3)]==_0x5cb215(0x39d)}}),_0x5d39eb;}async function updateBB(_0x2005b2){const _0x19885d=_0x3a33c3;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x4be248=>{restartBot(_0x4be248['botID']);});if(_0x2005b2==_0x19885d(0x389))process[_0x19885d(0x210)]({'update':!![],'environment':environment},_0x545466=>{});else _0x2005b2==_0x19885d(0x3f0)&&process['send']({'reinstall':!![],'environment':environment},_0x4375b8=>{});}function startBot(_0x1a5f2f,_0x106f1a,_0x4d022b){const _0x15db15=_0x3a33c3;if(debugging)_0x1a5f2f[_0x15db15(0x3d4)]('-d');let _0x4e8b74=![];const _0x4882be=_0x1a5f2f[0x0];_0x106f1a={..._0x106f1a,'stdio':[_0x15db15(0x3cc),_0x15db15(0x3cc),'inherit',_0x15db15(0x335)]},pid[_0x4882be]=childProcess[_0x15db15(0x339)](botfile,_0x1a5f2f,_0x106f1a),pid[_0x4882be]['on']('message',_0x45373a=>{const _0x27a74c=_0x15db15;switch(Object[_0x27a74c(0x212)](_0x45373a)[0x0]){case _0x27a74c(0x246):updateBotName(_0x4882be,_0x45373a[_0x27a74c(0x246)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x4882be,_0x45373a['status']);break;case _0x27a74c(0x1ee):updateLive(_0x4882be,_0x45373a[_0x27a74c(0x1ee)]);break;case _0x27a74c(0x355):updateLive(_0x4882be,_0x45373a['started']),io['to'](_0x4882be)[_0x27a74c(0x3a6)](_0x27a74c(0x23d),{'access':{'allow':![],'reason':_0x27a74c(0x1f1),'token':null}});break;case _0x27a74c(0x2af):_0x45373a['stop']==_0x27a74c(0x200)&&restartBot(_0x4882be);_0x45373a[_0x27a74c(0x2af)]==_0x27a74c(0x379)&&toggleBot(_0x4882be,'disabled',_0x27a74c(0x213));break;case _0x27a74c(0x2f7):sendTelegramBot(_0x4882be,_0x45373a['telegram']);break;case _0x27a74c(0x295):sendTelegramMsg(_0x45373a['telegrammsg']);break;case _0x27a74c(0x281):io['to'](_0x4882be)['emit'](_0x45373a[_0x27a74c(0x281)],_0x45373a[_0x27a74c(0x2cc)]);break;}}),pid[_0x4882be]['on'](_0x15db15(0x341),function(_0x5eb184){if(_0x4e8b74)return;_0x4e8b74=!![],_0x4d022b(_0x5eb184);}),pid[_0x4882be]['on'](_0x15db15(0x29e),async function(_0x1adf9f){const _0x37232b=_0x15db15;if(terminating)return;if(installingUpdate){logger[_0x37232b(0x21e)](_0x37232b(0x216)),io[_0x37232b(0x283)]();return;}if(_0x4e8b74)return;_0x4e8b74=!![],_0x4d022b(null);const _0x138fdf=dbConfig[_0x37232b(0x324)](_0x37232b(0x22a))['find']({'botID':_0x4882be})[_0x37232b(0x312)]();_0x138fdf&&(_0x138fdf[_0x37232b(0x23d)]==_0x37232b(0x2d5)||_0x138fdf[_0x37232b(0x23d)]==_0x37232b(0x3e4))&&(await sleep(0x3e8),updateLive(_0x4882be,_0x37232b(0x213)),_0x1adf9f==0x4d?logger[_0x37232b(0x21e)](_0x37232b(0x20c)+_0x4882be):logger[_0x37232b(0x348)]('Restarting\x20Bot\x20'+_0x4882be),startBot([_0x4882be,userID],{'cwd':bbpath},function(_0x241a1c){const _0x4e9b26=_0x37232b;if(_0x241a1c)logger[_0x4e9b26(0x348)](_0x241a1c);}));});}function stopBot(_0x4a82ea){const _0x2b6fb3=_0x3a33c3;getClientsWithBotID(_0x4a82ea)['forEach'](_0x381934=>{const _0xf444e6=_0x24f7;getSocket(_0x381934['id'])[_0xf444e6(0x276)](!![]),removeClient(_0x381934['id']);}),pid[_0x4a82ea]&&(pid[_0x4a82ea][_0x2b6fb3(0x379)](),pid[_0x4a82ea]=null);}function stopAllBots(){const _0xfe9bc0=_0x3a33c3;terminating=!![];const _0x83bf88=getEnabledBots();_0x83bf88[_0xfe9bc0(0x3b2)](_0x253a7d=>{const _0x35881a=_0xfe9bc0;stopBot(_0x253a7d[_0x35881a(0x285)]);});}function restartBot(_0x19b75f){const _0xd68d37=_0x3a33c3;if(pid[_0x19b75f])pid[_0x19b75f][_0xd68d37(0x379)]();}function addBot(){const _0x5ee45e=_0x3a33c3;let _0x526b2a;for(let _0x471b57=0x1;_0x471b57<0x3e9;_0x471b57++){_0x526b2a=_0x471b57[_0x5ee45e(0x1ed)]()[_0x5ee45e(0x258)](0x3,'0');let _0x5d3661=config[_0x5ee45e(0x365)](_0x2295d0=>_0x2295d0[_0x5ee45e(0x285)]==_0x526b2a);if(!_0x5d3661)break;}if(_0x526b2a==='1000'){logger[_0x5ee45e(0x348)](_0x5ee45e(0x3a8));return;}logger[_0x5ee45e(0x348)](_0x5ee45e(0x2b5)+_0x526b2a),dbConfig['get'](_0x5ee45e(0x22a))[_0x5ee45e(0x3d4)]({'botID':_0x526b2a,'botname':_0x5ee45e(0x2ab)+_0x526b2a,'status':'new','live':''})[_0x5ee45e(0x2f9)](),startBot([_0x526b2a,userID],{'cwd':bbpath},function(_0x59c513){if(_0x59c513)logger['full'](_0x59c513);}),config=getConfiguration(),io['to'](_0x5ee45e(0x2e2))[_0x5ee45e(0x3a6)](_0x5ee45e(0x22a),config),broadcastToBots(_0x5ee45e(0x22a),JSON[_0x5ee45e(0x225)](config));}function deleteBot(_0x49e85b){const _0x3e4210=_0x3a33c3;getClientsWithBotID(_0x49e85b)[_0x3e4210(0x3b2)](_0x46f73b=>{const _0x6d650c=_0x3e4210;getSocket(_0x46f73b['id'])[_0x6d650c(0x276)](!![]),removeClient(_0x46f73b['id']);}),dbConfig[_0x3e4210(0x324)](_0x3e4210(0x22a))[_0x3e4210(0x273)]({'botID':_0x49e85b})[_0x3e4210(0x2f9)](),logger[_0x3e4210(0x348)](_0x3e4210(0x22b)+_0x49e85b),stopBot(_0x49e85b);try{if(fs['existsSync'](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x29a))))fs[_0x3e4210(0x387)](path[_0x3e4210(0x36a)](configpath,'bot-'+_0x49e85b+_0x3e4210(0x29a)));if(fs[_0x3e4210(0x26d)](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x372))))fs[_0x3e4210(0x387)](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x372)));if(fs[_0x3e4210(0x26d)](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x3b9))))fs[_0x3e4210(0x387)](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x3b9)));if(fs['existsSync'](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x226))))fs[_0x3e4210(0x387)](path[_0x3e4210(0x36a)](configpath,_0x3e4210(0x3ed)+_0x49e85b+_0x3e4210(0x226)));}catch(_0x41908d){if(_0x41908d)logger[_0x3e4210(0x348)](_0x3e4210(0x38e),_0x41908d);}config=getConfiguration(),io['to']('botmanager')[_0x3e4210(0x3a6)](_0x3e4210(0x22a),config),broadcastToBots(_0x3e4210(0x22a),JSON[_0x3e4210(0x225)](config));}function toggleBot(_0x161390,_0x1e5836,_0x5220c8){const _0x491e21=_0x3a33c3;dbConfig[_0x491e21(0x324)](_0x491e21(0x22a))[_0x491e21(0x365)]({'botID':_0x161390})[_0x491e21(0x3c7)]({'status':_0x1e5836})[_0x491e21(0x3c7)]({'live':_0x5220c8})[_0x491e21(0x2f9)]();if(_0x1e5836==_0x491e21(0x2d5)||_0x1e5836==_0x491e21(0x3e4))logger[_0x491e21(0x348)]('Enabled\x20Bot\x20'+_0x161390),startBot([_0x161390,userID],{'cwd':bbpath},function(_0x28f472){const _0x8080b5=_0x491e21;if(_0x28f472)logger[_0x8080b5(0x348)](_0x28f472);});else(_0x1e5836==_0x491e21(0x1f3)||_0x1e5836==_0x491e21(0x2a5))&&(logger[_0x491e21(0x348)](_0x491e21(0x356)+_0x161390),stopBot(_0x161390));config=getConfiguration(),io['to']('botmanager')['emit'](_0x491e21(0x22a),config),broadcastToBots('bots',JSON[_0x491e21(0x225)](config));}function toggleStatus(_0x4137d0){const _0x578a2d=_0x3a33c3;let _0x43dc7d=dbConfig['get'](_0x578a2d(0x22a))['find']({'botID':_0x4137d0})[_0x578a2d(0x312)](),_0x314912;if(_0x43dc7d[_0x578a2d(0x23d)]==='enabled')_0x314912='disabled';else{if(_0x43dc7d[_0x578a2d(0x23d)]===_0x578a2d(0x3e4))_0x314912='new-disabled';else{if(_0x43dc7d[_0x578a2d(0x23d)]===_0x578a2d(0x2a5))_0x314912=_0x578a2d(0x3e4);else{if(_0x43dc7d['status']===_0x578a2d(0x1f3))_0x314912=_0x578a2d(0x2d5);}}}return _0x314912;}function updateStatus(_0x364553,_0x137253){const _0x242d4a=_0x3a33c3;dbConfig[_0x242d4a(0x324)]('bots')[_0x242d4a(0x365)]({'botID':_0x364553})[_0x242d4a(0x3c7)]({'status':_0x137253})['write'](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x242d4a(0x22a),config),broadcastToBots('bots',JSON[_0x242d4a(0x225)](config));}function updateLive(_0x17e99e,_0x4751dc){const _0x2c9d83=_0x3a33c3;dbConfig[_0x2c9d83(0x324)](_0x2c9d83(0x22a))[_0x2c9d83(0x365)]({'botID':_0x17e99e})[_0x2c9d83(0x3c7)]({'live':_0x4751dc})[_0x2c9d83(0x2f9)](),config=getConfiguration(),io['to'](_0x2c9d83(0x2e2))['emit'](_0x2c9d83(0x22a),config),broadcastToBots(_0x2c9d83(0x22a),JSON[_0x2c9d83(0x225)](config));}function updateBotName(_0x66b8b1,_0x5a354e){const _0x3ed026=_0x3a33c3;dbConfig[_0x3ed026(0x324)]('bots')[_0x3ed026(0x365)]({'botID':_0x66b8b1})[_0x3ed026(0x3c7)]({'botname':_0x5a354e})[_0x3ed026(0x2f9)](),config=getConfiguration(),io['to'](_0x3ed026(0x2e2))[_0x3ed026(0x3a6)]('bots',config),broadcastToBots(_0x3ed026(0x22a),JSON[_0x3ed026(0x225)](config));}function updateBotManager(){const _0x4692b4=_0x3a33c3;config=getConfiguration(),io['to'](_0x4692b4(0x2e2))[_0x4692b4(0x3a6)](_0x4692b4(0x22a),config),broadcastToBots(_0x4692b4(0x22a),JSON[_0x4692b4(0x225)](config));}function toggleBotMode(_0x5e687b){const _0x4b048b=_0x3a33c3;if(pid[_0x5e687b])pid[_0x5e687b][_0x4b048b(0x210)]({'function':_0x4b048b(0x231),'args':null});else{const _0x50fd94=configpath+'bot-'+_0x5e687b+'-config.json',_0x199d23=fs[_0x4b048b(0x399)](_0x50fd94),_0xe41cf6=JSON[_0x4b048b(0x3d3)](_0x199d23),_0x1c21e7=_0xe41cf6[_0x4b048b(0x2be)][0x0][_0x4b048b(0x2a7)];_0xe41cf6[_0x4b048b(0x2be)][0x0][_0x4b048b(0x2a7)]=!_0x1c21e7;const _0x33c46=JSON[_0x4b048b(0x225)](_0xe41cf6,null,0x2);fs[_0x4b048b(0x32b)](_0x50fd94,_0x33c46),config=getConfiguration(),io['to']('botmanager')[_0x4b048b(0x3a6)](_0x4b048b(0x22a),config),broadcastToBots('bots',JSON['stringify'](config));}}function validateTelegram(_0x396689){const _0x41b0ac=_0x3a33c3;if(_0x396689[_0x41b0ac(0x278)][_0x41b0ac(0x347)]!=settings[_0x41b0ac(0x208)]&&'@'+_0x396689[_0x41b0ac(0x278)]['username']!=settings[_0x41b0ac(0x208)]||_0x396689[_0x41b0ac(0x287)]['id']!=settings[_0x41b0ac(0x3a5)])return sendTelegram(_0x396689[_0x41b0ac(0x287)]['id'],_0x41b0ac(0x2f8),{'parse_mode':_0x41b0ac(0x378)}),![];return!![];}async function initTelegram(){const _0x4791dd=_0x3a33c3;if(tgBot)tgBot[_0x4791dd(0x2af)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x4791dd(0x31a)]);let _0x42fc29=_0x4791dd(0x373);_0x42fc29+='\x0a',_0x42fc29+=_0x4791dd(0x32a),_0x42fc29+=_0x4791dd(0x2b9),_0x42fc29+=_0x4791dd(0x2a1),_0x42fc29+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x42fc29+='/on\x20-\x20start\x20bot(s)\x0a',_0x42fc29+=_0x4791dd(0x22e),_0x42fc29+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x42fc29+='/names\x20-\x20show\x20bot\x20names\x0a',_0x42fc29+=_0x4791dd(0x21a),_0x42fc29+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x42fc29+=_0x4791dd(0x303),_0x42fc29+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x42fc29+=_0x4791dd(0x37f),_0x42fc29+=_0x4791dd(0x3e1);let _0x3c50b1=_0x4791dd(0x293);_0x3c50b1+='\x0a',_0x3c50b1+=_0x42fc29,tgBot['catch']((_0x1403a4,_0x22487f)=>{const _0x49b565=_0x4791dd;logger[_0x49b565(0x3c6)](getTimeStamp()+_0x49b565(0x238)),logger[_0x49b565(0x21e)](_0x49b565(0x350),_0x1403a4);}),tgBot[_0x4791dd(0x2ed)](async(_0x44b7b2,_0x21a60c)=>{const _0x8c515d=_0x4791dd;if(!(!settings[_0x8c515d(0x3a5)]&&_0x44b7b2[_0x8c515d(0x389)]['message']['text']=='/start')){if(!validateTelegram(_0x44b7b2))return;}_0x21a60c();}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x35d),async _0x15afec=>{const _0x9395b1=_0x4791dd;if(!settings[_0x9395b1(0x3a5)])updateSetting(_0x9395b1(0x3a5),_0x15afec[_0x9395b1(0x287)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x15afec))return;await sendTelegram(_0x15afec[_0x9395b1(0x287)]['id'],_0x3c50b1);}),tgBot['command']('enable',async _0x4aeffa=>{const _0x4c1b7d=_0x4791dd;updateSetting(_0x4c1b7d(0x2a2),!![]),await sendTelegram(_0x4aeffa[_0x4c1b7d(0x287)]['id'],_0x4c1b7d(0x247));}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x260),async _0x43ac3c=>{const _0x50fb4e=_0x4791dd;await sendTelegram(_0x43ac3c['chat']['id'],_0x50fb4e(0x22c)),updateSetting('telegramEnabled',![]);}),tgBot['command']('config',async _0x2bc5ed=>{const _0x19b762=_0x4791dd,_0x43415f=Markup[_0x19b762(0x345)]([Markup['button']['callback'](_0x19b762(0x2fb),_0x19b762(0x323)),Markup[_0x19b762(0x3cb)]['callback'](_0x19b762(0x257),_0x19b762(0x35a)),Markup['button'][_0x19b762(0x27d)](_0x19b762(0x2a9),_0x19b762(0x36e))]);_0x2bc5ed[_0x19b762(0x39a)](_0x19b762(0x203),_0x43415f);}),tgBot[_0x4791dd(0x33e)](_0x4791dd(0x323),async _0x1ca198=>{const _0x4d9dfc=_0x4791dd;_0x1ca198['editMessageReplyMarkup'](),updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x1ca198['chat']['id'],_0x4d9dfc(0x2c1));}),tgBot['action'](_0x4791dd(0x35a),async _0x4c89a3=>{const _0x1b366b=_0x4791dd;_0x4c89a3[_0x1b366b(0x205)](),updateSetting('telegramEvents','alerts'),updateSetting(_0x1b366b(0x2a2),!![]),await sendTelegram(_0x4c89a3[_0x1b366b(0x287)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot['action'](_0x4791dd(0x36e),async _0x5b2976=>{const _0xfce8c7=_0x4791dd;_0x5b2976['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0xfce8c7(0x2fc)),updateSetting(_0xfce8c7(0x2a2),!![]),await sendTelegram(_0x5b2976[_0xfce8c7(0x287)]['id'],_0xfce8c7(0x1fc));}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x23d),async _0x220649=>{const _0x25fa3d=_0x4791dd,_0x43cc80=getBotsWithMode();let _0x23d67b=_0x25fa3d(0x234);config['forEach'](_0x3c1990=>{const _0x1c7258=_0x25fa3d,_0x5f34d4=_0x43cc80['find'](_0x5cbcb0=>_0x5cbcb0[_0x1c7258(0x285)]==_0x3c1990[_0x1c7258(0x285)])[_0x1c7258(0x214)];_0x23d67b+=_0x1c7258(0x2ab)+_0x3c1990[_0x1c7258(0x285)]+':\x20'+_0x3c1990['status']+_0x1c7258(0x1eb)+_0x5f34d4+_0x1c7258(0x1eb)+_0x3c1990[_0x1c7258(0x1ee)]+'\x0a';}),_0x23d67b+='\x0a',_0x23d67b+=_0x25fa3d(0x3af),_0x23d67b+=!settings[_0x25fa3d(0x2a2)]?_0x25fa3d(0x310):_0x25fa3d(0x29f),_0x23d67b+=settings[_0x25fa3d(0x2a2)]?settings[_0x25fa3d(0x2db)]=='all'?_0x25fa3d(0x321):_0x25fa3d(0x331)+settings[_0x25fa3d(0x2db)]+'\x20only\x0a':'',await sendTelegram(_0x220649['chat']['id'],_0x23d67b,{'parse_mode':_0x25fa3d(0x378)});}),tgBot['command'](_0x4791dd(0x200),async _0x5a549c=>{const _0x576fe7=_0x4791dd,_0x411387=getEnabledBots();if(_0x411387[_0x576fe7(0x3cd)]==0x0)await sendTelegram(_0x5a549c[_0x576fe7(0x287)]['id'],_0x576fe7(0x3b5));else{if(_0x411387[_0x576fe7(0x3cd)]>0x1)_0x411387[_0x576fe7(0x3d4)]({'botID':_0x576fe7(0x2fc)});let _0xce8f7a=[],_0x338f58=[];const _0x3a88f0=_0x411387[_0x576fe7(0x3cd)]%0x4==0x0||_0x411387['length']%0x4==0x3||_0x411387[_0x576fe7(0x3cd)]%0x3==0x1?0x4:0x3;let _0x1b8551=0x0;_0x411387[_0x576fe7(0x3b2)]((_0x1cb546,_0x1b1a20)=>{const _0xdbbe4e=_0x576fe7;if(_0x1b1a20%_0x3a88f0==0x0)_0x338f58=[];_0x338f58[_0xdbbe4e(0x3d4)](Markup[_0xdbbe4e(0x3cb)][_0xdbbe4e(0x27d)](_0x1cb546[_0xdbbe4e(0x285)]==_0xdbbe4e(0x2fc)?_0xdbbe4e(0x395):_0xdbbe4e(0x2ab)+_0x1cb546[_0xdbbe4e(0x285)],_0xdbbe4e(0x259)+_0x1cb546[_0xdbbe4e(0x285)])),_0x1b1a20%_0x3a88f0==0x0&&(_0xce8f7a[_0x1b8551]=_0x338f58,_0x1b8551++);});const _0x1fe392=Markup['inlineKeyboard'](_0xce8f7a);_0x5a549c[_0x576fe7(0x39a)](_0x576fe7(0x262),_0x1fe392);}}),tgBot[_0x4791dd(0x33e)](/restart_(.+)/,async _0x3b4b2a=>{const _0x42ae72=_0x4791dd,_0xc2c605=_0x3b4b2a[_0x42ae72(0x3aa)][0x1];_0x3b4b2a[_0x42ae72(0x205)](),_0xc2c605==_0x42ae72(0x2fc)?config['forEach'](_0x545d11=>{restartBot(_0x545d11['botID']);}):restartBot(_0xc2c605);}),tgBot['command']('on',async _0x526eb6=>{const _0x378cd0=_0x4791dd,_0x5b6069=getDisabledBots();if(_0x5b6069['length']==0x0)await sendTelegram(_0x526eb6[_0x378cd0(0x287)]['id'],_0x378cd0(0x35f));else{if(_0x5b6069[_0x378cd0(0x3cd)]>0x1)_0x5b6069[_0x378cd0(0x3d4)]({'botID':_0x378cd0(0x2fc)});let _0x5775de=[],_0x2da5b8=[];const _0x223116=_0x5b6069[_0x378cd0(0x3cd)]%0x4==0x0||_0x5b6069[_0x378cd0(0x3cd)]%0x4==0x3||_0x5b6069[_0x378cd0(0x3cd)]%0x3==0x1?0x4:0x3;let _0x5defd3=0x0;_0x5b6069[_0x378cd0(0x3b2)]((_0x107819,_0x2f1cab)=>{const _0x4d92f5=_0x378cd0;if(_0x2f1cab%_0x223116==0x0)_0x2da5b8=[];_0x2da5b8[_0x4d92f5(0x3d4)](Markup[_0x4d92f5(0x3cb)][_0x4d92f5(0x27d)](_0x107819['botID']==_0x4d92f5(0x2fc)?_0x4d92f5(0x395):'Bot\x20'+_0x107819[_0x4d92f5(0x285)],_0x4d92f5(0x282)+_0x107819['botID'])),_0x2f1cab%_0x223116==0x0&&(_0x5775de[_0x5defd3]=_0x2da5b8,_0x5defd3++);});const _0x1391cc=Markup['inlineKeyboard'](_0x5775de);_0x526eb6['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x1391cc);}}),tgBot['action'](/on_(.+)/,async _0x5753ef=>{const _0x218f08=_0x4791dd,_0x408d3f=_0x5753ef[_0x218f08(0x3aa)][0x1];_0x5753ef['editMessageReplyMarkup']();if(_0x408d3f==_0x218f08(0x2fc)){const _0x166c8b=getDisabledBots();await sendTelegram(_0x5753ef[_0x218f08(0x287)]['id'],_0x218f08(0x224)),_0x166c8b[_0x218f08(0x3b2)](_0x3eaa25=>{const _0x5d3e1=_0x218f08;if(_0x3eaa25[_0x5d3e1(0x285)]!=_0x5d3e1(0x2fc))toggleBot(_0x3eaa25[_0x5d3e1(0x285)],toggleStatus(_0x3eaa25[_0x5d3e1(0x285)]),_0x5d3e1(0x213));});}else await sendTelegram(_0x5753ef[_0x218f08(0x287)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x408d3f),toggleBot(_0x408d3f,toggleStatus(_0x408d3f),_0x218f08(0x213));}),tgBot['command'](_0x4791dd(0x34a),async _0x56ea69=>{const _0x2999b8=_0x4791dd,_0x27edff=getEnabledBots();if(_0x27edff[_0x2999b8(0x3cd)]==0x0)await sendTelegram(_0x56ea69[_0x2999b8(0x287)]['id'],_0x2999b8(0x3b5));else{if(_0x27edff[_0x2999b8(0x3cd)]>0x1)_0x27edff[_0x2999b8(0x3d4)]({'botID':_0x2999b8(0x2fc)});let _0x52d142=[],_0x57692a=[];const _0x54eaea=_0x27edff[_0x2999b8(0x3cd)]%0x4==0x0||_0x27edff[_0x2999b8(0x3cd)]%0x4==0x3||_0x27edff[_0x2999b8(0x3cd)]%0x3==0x1?0x4:0x3;let _0xc60914=0x0;_0x27edff[_0x2999b8(0x3b2)]((_0x21f3ea,_0x51782b)=>{const _0x5c5c4f=_0x2999b8;if(_0x51782b%_0x54eaea==0x0)_0x57692a=[];_0x57692a[_0x5c5c4f(0x3d4)](Markup[_0x5c5c4f(0x3cb)][_0x5c5c4f(0x27d)](_0x21f3ea['botID']==_0x5c5c4f(0x2fc)?_0x5c5c4f(0x395):'Bot\x20'+_0x21f3ea[_0x5c5c4f(0x285)],_0x5c5c4f(0x25a)+_0x21f3ea[_0x5c5c4f(0x285)])),_0x51782b%_0x54eaea==0x0&&(_0x52d142[_0xc60914]=_0x57692a,_0xc60914++);});const _0x64bf72=Markup['inlineKeyboard'](_0x52d142);_0x56ea69['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x64bf72);}}),tgBot[_0x4791dd(0x33e)](/off_(.+)/,async _0x2a676e=>{const _0x2f6e6e=_0x4791dd,_0x3dd3ce=_0x2a676e[_0x2f6e6e(0x3aa)][0x1];_0x2a676e[_0x2f6e6e(0x205)]();if(_0x3dd3ce==_0x2f6e6e(0x2fc)){const _0x10b8be=getEnabledBots();await sendTelegram(_0x2a676e[_0x2f6e6e(0x287)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x10b8be[_0x2f6e6e(0x3b2)](_0x21396f=>{const _0x27980d=_0x2f6e6e;if(_0x21396f[_0x27980d(0x285)]!=_0x27980d(0x2fc))toggleBot(_0x21396f['botID'],toggleStatus(_0x21396f[_0x27980d(0x285)]),_0x27980d(0x213));});}else await sendTelegram(_0x2a676e[_0x2f6e6e(0x287)]['id'],_0x2f6e6e(0x2a3)+_0x3dd3ce),toggleBot(_0x3dd3ce,toggleStatus(_0x3dd3ce),_0x2f6e6e(0x213));}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x2d1),async _0x510f5b=>{const _0x104cde=_0x4791dd,_0x293c87=getEnabledBots();if(_0x293c87[_0x104cde(0x3cd)]==0x0)await sendTelegram(_0x510f5b['chat']['id'],_0x104cde(0x3b5));else{if(_0x293c87[_0x104cde(0x3cd)]>0x1){let _0x5a707e=[],_0x139734=[];const _0x56e431=_0x293c87['length']%0x4==0x0||_0x293c87['length']%0x4==0x3||_0x293c87[_0x104cde(0x3cd)]%0x3==0x1?0x4:0x3;let _0x124409=0x0;_0x293c87[_0x104cde(0x3b2)]((_0x5820b6,_0x38e2c8)=>{const _0x20b784=_0x104cde;if(_0x38e2c8%_0x56e431==0x0)_0x139734=[];_0x139734[_0x20b784(0x3d4)](Markup['button']['callback'](_0x20b784(0x2ab)+_0x5820b6[_0x20b784(0x285)],_0x20b784(0x31c)+_0x5820b6[_0x20b784(0x285)])),_0x38e2c8%_0x56e431==0x0&&(_0x5a707e[_0x124409]=_0x139734,_0x124409++);});const _0x430234=Markup['inlineKeyboard'](_0x5a707e);_0x510f5b[_0x104cde(0x39a)](_0x104cde(0x2d8),_0x430234);}else{const _0x20dc86=_0x293c87[0x0]['botID'];if(pid[_0x20dc86])pid[_0x20dc86][_0x104cde(0x210)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x44f248=>{const _0x453b84=_0x4791dd,_0x1c90cc=_0x44f248['match'][0x1];_0x44f248[_0x453b84(0x205)]();if(pid[_0x1c90cc])pid[_0x1c90cc][_0x453b84(0x210)]({'function':_0x453b84(0x354),'args':null});}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x3a7),async _0x1d7e20=>{const _0x32a64f=_0x4791dd,_0x57ed2b=getEnabledBots();if(_0x57ed2b[_0x32a64f(0x3cd)]==0x0)await sendTelegram(_0x1d7e20[_0x32a64f(0x287)]['id'],_0x32a64f(0x3b5));else{if(_0x57ed2b[_0x32a64f(0x3cd)]>0x1){let _0x29e91c=[],_0x80a844=[];const _0x28d4e2=_0x57ed2b[_0x32a64f(0x3cd)]%0x4==0x0||_0x57ed2b[_0x32a64f(0x3cd)]%0x4==0x3||_0x57ed2b[_0x32a64f(0x3cd)]%0x3==0x1?0x4:0x3;let _0x26c823=0x0;_0x57ed2b['forEach']((_0x4ebf87,_0x143987)=>{const _0x45f694=_0x32a64f;if(_0x143987%_0x28d4e2==0x0)_0x80a844=[];_0x80a844[_0x45f694(0x3d4)](Markup[_0x45f694(0x3cb)][_0x45f694(0x27d)](_0x45f694(0x2ab)+_0x4ebf87[_0x45f694(0x285)],_0x45f694(0x3eb)+_0x4ebf87[_0x45f694(0x285)])),_0x143987%_0x28d4e2==0x0&&(_0x29e91c[_0x26c823]=_0x80a844,_0x26c823++);});const _0x13cc00=Markup[_0x32a64f(0x345)](_0x29e91c);_0x1d7e20[_0x32a64f(0x39a)](_0x32a64f(0x336),_0x13cc00);}else{const _0x5a7dc9=_0x57ed2b[0x0]['botID'];if(pid[_0x5a7dc9])pid[_0x5a7dc9]['send']({'function':_0x32a64f(0x3d7),'args':null});}}}),tgBot[_0x4791dd(0x33e)](/portfolio_(.+)/,async _0x23ff36=>{const _0x51014f=_0x4791dd,_0x2236c3=_0x23ff36[_0x51014f(0x3aa)][0x1];_0x23ff36[_0x51014f(0x205)]();if(pid[_0x2236c3])pid[_0x2236c3][_0x51014f(0x210)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x4791dd(0x3ba)]('update',async _0x4b74c7=>{const _0x452700=_0x4791dd;await getMessages();if(!updateAvailable)await sendTelegram(_0x4b74c7['chat']['id'],_0x452700(0x299));else{if(!validInstallation)await sendTelegram(_0x4b74c7[_0x452700(0x287)]['id'],_0x452700(0x3a3));else{const _0x2cb36c=Markup[_0x452700(0x345)]([Markup[_0x452700(0x3cb)][_0x452700(0x27d)](_0x452700(0x2c3),'update_yes'),Markup[_0x452700(0x3cb)][_0x452700(0x27d)]('No','update_no')]);_0x4b74c7[_0x452700(0x39a)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x2cb36c);}}}),tgBot[_0x4791dd(0x33e)](/update_(.+)/,async _0x5deb5b=>{const _0x35963a=_0x4791dd,_0x5a1066=_0x5deb5b[_0x35963a(0x3aa)][0x1];_0x5deb5b[_0x35963a(0x205)](),_0x5a1066==_0x35963a(0x3a0)&&(await sendTelegram(_0x5deb5b[_0x35963a(0x287)]['id'],_0x35963a(0x371)),updateBB(_0x35963a(0x389))),_0x5a1066=='no'&&await sendTelegram(_0x5deb5b[_0x35963a(0x287)]['id'],_0x35963a(0x243));}),tgBot[_0x4791dd(0x3ba)](_0x4791dd(0x3f0),async _0x29e14a=>{const _0x5f0cc6=_0x4791dd;if(!validInstallation)await sendTelegram(_0x29e14a[_0x5f0cc6(0x287)]['id'],_0x5f0cc6(0x3dd));else{const _0x2845b4=Markup[_0x5f0cc6(0x345)]([Markup[_0x5f0cc6(0x3cb)]['callback'](_0x5f0cc6(0x2c3),'reinstall_yes'),Markup[_0x5f0cc6(0x3cb)][_0x5f0cc6(0x27d)]('No',_0x5f0cc6(0x1f4))]);_0x29e14a[_0x5f0cc6(0x39a)](_0x5f0cc6(0x21f),_0x2845b4);}}),tgBot[_0x4791dd(0x33e)](/reinstall_(.+)/,async _0x4be76d=>{const _0x252f23=_0x4791dd,_0x596356=_0x4be76d[_0x252f23(0x3aa)][0x1];_0x4be76d[_0x252f23(0x205)](),_0x596356==_0x252f23(0x3a0)&&(await sendTelegram(_0x4be76d['chat']['id'],_0x252f23(0x37a)),updateBB(_0x252f23(0x3f0))),_0x596356=='no'&&await sendTelegram(_0x4be76d[_0x252f23(0x287)]['id'],_0x252f23(0x2e3));}),tgBot[_0x4791dd(0x3ba)]('toggle',async _0x1a755a=>{const _0x6c48e7=_0x4791dd,_0x5905a9=getBotsWithMode();if(_0x5905a9['length']==0x0)await sendTelegram(_0x1a755a[_0x6c48e7(0x287)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x4afbc1=[],_0x7a667c=[];const _0x29716c=0x2;let _0xdbee=0x0;_0x5905a9['forEach']((_0x57396d,_0x2d3595)=>{const _0x247a8c=_0x6c48e7;if(_0x2d3595%_0x29716c==0x0)_0x7a667c=[];_0x7a667c[_0x247a8c(0x3d4)](Markup['button'][_0x247a8c(0x27d)](_0x247a8c(0x2ab)+_0x57396d[_0x247a8c(0x285)]+'\x20('+_0x57396d['mode']+')',_0x247a8c(0x206)+_0x57396d[_0x247a8c(0x285)])),_0x2d3595%_0x29716c==0x0&&(_0x4afbc1[_0xdbee]=_0x7a667c,_0xdbee++);});const _0x236e4a=Markup['inlineKeyboard'](_0x4afbc1);_0x1a755a['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x236e4a);}}),tgBot[_0x4791dd(0x33e)](/toggle_(.+)/,async _0x339ca4=>{const _0x100022=_0x4791dd,_0x1d4572=_0x339ca4['match'][0x1];_0x339ca4[_0x100022(0x205)]();const _0x57db50=getBotsWithMode(),_0x2be2dc=_0x57db50[_0x100022(0x365)](_0x562935=>_0x562935[_0x100022(0x285)]==_0x1d4572),_0x35ffff=_0x2be2dc[_0x100022(0x214)]=='auto'?_0x100022(0x23b):_0x100022(0x37b);await sendTelegram(_0x339ca4[_0x100022(0x287)]['id'],_0x100022(0x286)+_0x1d4572+'\x20to\x20'+_0x35ffff+_0x100022(0x2bc)),toggleBotMode(_0x1d4572);}),tgBot[_0x4791dd(0x3ba)]('names',async _0x2fc4e6=>{let _0x4c5e7b='';config['forEach'](_0x5c91ed=>{const _0x2a1912=_0x24f7;_0x4c5e7b+='Bot\x20'+_0x5c91ed[_0x2a1912(0x285)]+':\x20'+_0x5c91ed[_0x2a1912(0x246)]+'\x0a';}),await sendTelegram(_0x2fc4e6['chat']['id'],_0x4c5e7b,{'parse_mode':'HTML'});}),tgBot['command'](_0x4791dd(0x23c),async _0xd5708c=>{await sendTelegram(_0xd5708c['chat']['id'],_0x42fc29);}),process[_0x4791dd(0x309)](_0x4791dd(0x3c1),()=>tgBot[_0x4791dd(0x2af)](_0x4791dd(0x3c1))),process[_0x4791dd(0x309)](_0x4791dd(0x381),()=>tgBot['stop'](_0x4791dd(0x381))),tgBot[_0x4791dd(0x24a)]();}}function disableTelegram(){const _0x4689ce=_0x3a33c3;tgBot&&tgBot[_0x4689ce(0x2af)]();}async function sendTelegram(_0x378e32,_0x53f8cd,_0x9c5c74){const _0x45dfb5=_0x3a33c3;_0x9c5c74={..._0x9c5c74,'disable_web_page_preview':!![]};try{await tgBot[_0x45dfb5(0x2f7)][_0x45dfb5(0x376)](_0x378e32,_0x53f8cd,_0x9c5c74);}catch(_0x3a3e65){console[_0x45dfb5(0x3c9)](_0x45dfb5(0x330),_0x3a3e65);}}async function sendTelegramBot(_0x531ebf,_0x4e8ded){const _0xb9ec20=_0x3a33c3;if(settings[_0xb9ec20(0x2a2)]){if(settings['telegramEvents']==_0xb9ec20(0x2fc)||(_0x4e8ded['type']==_0xb9ec20(0x341)||_0x4e8ded['type']==_0xb9ec20(0x28d)||_0x4e8ded[_0xb9ec20(0x1fa)]==_0xb9ec20(0x3ad))&&settings[_0xb9ec20(0x2db)]==_0xb9ec20(0x3d0)||_0x4e8ded[_0xb9ec20(0x1fa)]==_0xb9ec20(0x3d1)&&settings[_0xb9ec20(0x2db)]==_0xb9ec20(0x361)){if(tgBot&&settings[_0xb9ec20(0x3a5)]){if(_0x4e8ded[_0xb9ec20(0x3ee)])await sendTelegram(settings['telegramChatId'],_0x4e8ded['botname']+'\x20>\x20'+_0x4e8ded[_0xb9ec20(0x39e)]);else await sendTelegram(settings[_0xb9ec20(0x3a5)],_0xb9ec20(0x2ab)+_0x531ebf+_0xb9ec20(0x3df)+_0x4e8ded['event']);}}}}async function sendTelegramMsg(_0x1e59e9,_0x1e5d52=_0x3a33c3(0x378)){const _0x430fb1=_0x3a33c3;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x430fb1(0x3a5)],_0x1e59e9,{'parse_mode':_0x1e5d52}),!![]):![];}function getDeviceWithIp(_0xe1512e){const _0x599d47=_0x3a33c3;return devices[_0x599d47(0x365)](_0x5d1d7f=>_0x5d1d7f['ip']===_0xe1512e);}async function temporaryAccess2FA(_0x50c008,_0x26159a){const _0x420aed=_0x3a33c3;let _0x54f38a=new Date(),_0x58f8a8=![];if(lastIpApproval){if(_0x54f38a-lastIpApproval<0x1388)_0x58f8a8=!![];}lastIpApproval=new Date();if(_0x58f8a8)return;if(tgBot&&settings[_0x420aed(0x3a5)]){const _0x4a08ad=uuidRandom();tmpStorage[_0x4a08ad]={'uuid':_0x50c008,'externalip':_0x26159a};const _0x5eda2a=Markup['inlineKeyboard']([Markup[_0x420aed(0x3cb)][_0x420aed(0x27d)](_0x420aed(0x240),_0x420aed(0x33d)+_0x4a08ad),Markup['button'][_0x420aed(0x27d)]('15\x20min','tempaccess_15_'+_0x4a08ad),Markup['button'][_0x420aed(0x27d)](_0x420aed(0x33a),'tempaccess_30_'+_0x4a08ad),Markup['button']['callback'](_0x420aed(0x3de),'tempaccess_reject_'+_0x4a08ad)]);await sendTelegram(settings[_0x420aed(0x3a5)],_0x420aed(0x33f)+normalizeIP(_0x26159a)[_0x420aed(0x2ea)]+'\x20?',_0x5eda2a),tgBot[_0x420aed(0x33e)](/tempaccess_(.+)_(.+)/,async _0x495b02=>{const _0x16873c=_0x420aed,_0x5a6f8a=_0x495b02[_0x16873c(0x3aa)][0x1],_0x16cf75=_0x495b02[_0x16873c(0x3aa)][0x2],{uuid:_0x576979,externalip:_0x10658}=tmpStorage[_0x16cf75];delete tmpStorage[_0x16cf75],_0x495b02['editMessageReplyMarkup'](),devices[_0x576979]['telegramIpApproval']={'clientip':_0x10658,'timestamp':new Date()[_0x16873c(0x3d2)](),'expiry':_0x5a6f8a},_0x5a6f8a!=_0x16873c(0x3de)?(await sendTelegram(_0x495b02[_0x16873c(0x287)]['id'],'Access\x20enabled\x20for\x20'+_0x5a6f8a+_0x16873c(0x3ce),{'parse_mode':'HTML'}),io['to'](_0x576979)[_0x16873c(0x3a6)](_0x16873c(0x23d),{'access':{'allow':![],'reason':_0x16873c(0x1f1),'token':null}})):(await sendTelegram(_0x495b02[_0x16873c(0x287)]['id'],_0x16873c(0x250)),io['to'](_0x576979)['emit'](_0x16873c(0x23d),{'access':{'allow':![],'reason':_0x16873c(0x209),'token':null}}));});}}async function loginAccess2FA(_0x455837,_0x43ced7){const _0x471460=_0x3a33c3;if(tgBot&&settings[_0x471460(0x3a5)]){const _0x555a0a=uuidRandom();tmpStorage[_0x555a0a]={'uuid':_0x455837,'externalip':_0x43ced7};const _0x482cca=Markup[_0x471460(0x345)]([Markup['button'][_0x471460(0x27d)](_0x471460(0x366),_0x471460(0x2b6)+loginExpiry+'_'+_0x555a0a),Markup[_0x471460(0x3cb)]['callback']('reject',_0x471460(0x32d)+_0x555a0a)]);await sendTelegram(settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x43ced7)['show']+'\x20?',_0x482cca),tgBot[_0x471460(0x33e)](/login2fa_(.+)_(.+)/,async _0x31e0da=>{const _0x650725=_0x471460,_0x3eae43=_0x31e0da[_0x650725(0x3aa)][0x1],_0x38100e=_0x31e0da['match'][0x2],{uuid:_0x4dfbda,externalip:_0x37296d}=tmpStorage[_0x38100e];delete tmpStorage[_0x38100e],_0x31e0da[_0x650725(0x205)](),devices[_0x4dfbda][_0x650725(0x36f)]={'clientip':_0x37296d,'timestamp':new Date()['getTime'](),'expiry':_0x3eae43},_0x3eae43!=_0x650725(0x3de)?(await sendTelegram(_0x31e0da[_0x650725(0x287)]['id'],_0x650725(0x34e),{'parse_mode':_0x650725(0x378)}),io['to'](_0x4dfbda)['emit'](_0x650725(0x23d),{'access':{'allow':![],'reason':_0x650725(0x1f1),'token':null}})):(await sendTelegram(_0x31e0da['chat']['id'],_0x650725(0x2a8)),io['to'](_0x4dfbda)[_0x650725(0x3a6)](_0x650725(0x23d),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x8aff33=_0x3a33c3;return dbConfig[_0x8aff33(0x324)](_0x8aff33(0x22a))[_0x8aff33(0x3bc)](_0x8aff33(0x285))[_0x8aff33(0x298)]({'status':_0x8aff33(0x2d5)})[_0x8aff33(0x312)]()||[];}function getDisabledBots(){const _0x4cf917=_0x3a33c3;return dbConfig['get']('bots')[_0x4cf917(0x3bc)]('botID')[_0x4cf917(0x298)]({'status':_0x4cf917(0x1f3)})[_0x4cf917(0x312)]()||[];}function getBotAttributes(_0x36354e){const _0x17bdfa=_0x3a33c3;let _0x1296f7={};const _0x13cfdd=configpath+'bot-'+_0x36354e+_0x17bdfa(0x29a),_0x475ccb=fs[_0x17bdfa(0x26d)](_0x13cfdd);if(_0x475ccb){const _0x19d460=fs[_0x17bdfa(0x399)](_0x13cfdd);try{const _0x50bd0c=JSON[_0x17bdfa(0x3d3)](_0x19d460),_0x252aec=_0x50bd0c?_0x50bd0c['bot'][0x0][_0x17bdfa(0x2a7)]:![];_0x1296f7[_0x17bdfa(0x214)]=_0x252aec?_0x17bdfa(0x37b):_0x17bdfa(0x23b),_0x1296f7[_0x17bdfa(0x246)]=_0x50bd0c?_0x50bd0c[_0x17bdfa(0x2be)][0x0]['botname']:_0x17bdfa(0x2ab)+_0x36354e;}catch(_0x165a08){_0x1296f7[_0x17bdfa(0x214)]=_0x17bdfa(0x23b),_0x1296f7['botname']='Bot\x20'+_0x36354e;}}else _0x1296f7[_0x17bdfa(0x214)]=_0x17bdfa(0x23b),_0x1296f7['botname']=_0x17bdfa(0x2ab)+_0x36354e;return _0x1296f7;}function getBotsWithMode(){const _0x109fdb=_0x3a33c3,_0x4b9147=dbConfig['get']('bots')['sortBy'](_0x109fdb(0x285))[_0x109fdb(0x312)]()||[];return _0x4b9147[_0x109fdb(0x3b2)](_0x334104=>{const _0x3ff314=_0x109fdb;let _0x3cf473=getBotAttributes(_0x334104[_0x3ff314(0x285)]);_0x334104[_0x3ff314(0x214)]=_0x3cf473['mode'];}),_0x4b9147;}function getBotExchanges(){const _0x5e851f=_0x3a33c3;let _0x2bb89b=[];const _0x46842f=dbConfig[_0x5e851f(0x324)](_0x5e851f(0x22a))[_0x5e851f(0x3bc)](_0x5e851f(0x285))[_0x5e851f(0x312)]()||[];_0x46842f[_0x5e851f(0x3b2)](_0x1b8328=>{const _0x25a8ef=_0x5e851f;if(_0x1b8328[_0x25a8ef(0x23d)]==_0x25a8ef(0x2d5)){const _0x4b4e9d=configpath+'bot-'+_0x1b8328['botID']+_0x25a8ef(0x29a),_0x3f0c9d=fs[_0x25a8ef(0x26d)](_0x4b4e9d);let _0x24b008;if(_0x3f0c9d){const _0x5d09bb=fs[_0x25a8ef(0x399)](_0x4b4e9d);try{const _0x2c694a=JSON[_0x25a8ef(0x3d3)](_0x5d09bb);_0x24b008=_0x2c694a?_0x2c694a['bot'][0x0]['exchange']:null;}catch(_0x48b9db){}}if(_0x24b008)_0x2bb89b[_0x25a8ef(0x3d4)](_0x24b008);}});const _0x6fc316=[...new Set(_0x2bb89b)][_0x5e851f(0x1e4)]();return _0x6fc316;}async function initUser(){const _0x25f82b=_0x3a33c3;if(!settings[_0x25f82b(0x244)]){const _0x52fb3b=uuidRandom();mixpanel['alias'](_0x52fb3b),updateSetting(_0x25f82b(0x244),_0x52fb3b);}}async function initSecure(){const _0x5e5a83=_0x3a33c3;let _0x343202=getSecure();if(!_0x343202[_0x5e5a83(0x220)]('secret')){let _0xa3fa02=await generateKeys();_0x343202[_0x5e5a83(0x21d)]=_0xa3fa02['publicKey'],_0x343202['privateKey']=_0xa3fa02['privateKey'],_0x343202[_0x5e5a83(0x34f)]=crypto[_0x5e5a83(0x332)](0x20)['toString'](_0x5e5a83(0x270));;storeSecure(_0x343202);}}function getSettings(){const _0x415880=_0x3a33c3;return dbSettings[_0x415880(0x324)]('settings')[_0x415880(0x312)]()||{};}function getSecure(){const _0x3351ed=_0x3a33c3;return dbSecure[_0x3351ed(0x324)](_0x3351ed(0x1f5))[_0x3351ed(0x312)]()||{};}function getBlacklist(){const _0x1ad463=_0x3a33c3;return dbSecure[_0x1ad463(0x324)](_0x1ad463(0x21c))[_0x1ad463(0x312)]()||[];}function broadcastToBots(_0x109557,_0x8e5022){config['forEach'](_0x5423db=>{const _0x4920aa=_0x24f7;if(_0x5423db[_0x4920aa(0x23d)]=='enabled'&&_0x5423db['live']==_0x4920aa(0x23a)||_0x5423db[_0x4920aa(0x23d)]==_0x4920aa(0x3e4)&&_0x5423db[_0x4920aa(0x1ee)]=='running'){if(pid[_0x5423db['botID']])pid[_0x5423db['botID']][_0x4920aa(0x210)]({[_0x109557]:_0x8e5022});}});}async function storeSettings(_0x2fa657,_0x42663d=![]){const _0x47fd29=_0x3a33c3;_0x2fa657={...settings,..._0x2fa657};if(_0x42663d&&_0x2fa657[_0x47fd29(0x39f)]!='************'&&_0x2fa657[_0x47fd29(0x39f)]!=_0x47fd29(0x39d)&&_0x2fa657[_0x47fd29(0x39f)]!=''){const _0x777fa8=crypt[_0x47fd29(0x2f3)](secure[_0x47fd29(0x1f8)],_0x2fa657['bbPassword'])[_0x47fd29(0x289)]['split']('|@|')[0x0],_0x5346ad=bcrypt[_0x47fd29(0x382)](_0x777fa8,saltRounds);_0x2fa657={..._0x2fa657,'bbPassword':_0x5346ad};}if(_0x42663d&&_0x2fa657[_0x47fd29(0x31a)]!=_0x47fd29(0x369)&&_0x2fa657['telegramToken']!=_0x47fd29(0x39d)&&_0x2fa657[_0x47fd29(0x31a)]!=''){const _0x447a45=crypt[_0x47fd29(0x2f3)](secure[_0x47fd29(0x1f8)],_0x2fa657[_0x47fd29(0x31a)])[_0x47fd29(0x289)][_0x47fd29(0x266)](_0x47fd29(0x367))[0x0];_0x2fa657={..._0x2fa657,'telegramToken':_0x447a45};}if(_0x42663d&&_0x2fa657['marketcapApi']!=_0x47fd29(0x369)&&_0x2fa657[_0x47fd29(0x2b3)]!=_0x47fd29(0x39d)&&_0x2fa657[_0x47fd29(0x2b3)]!=''){const _0x3b2981=crypt[_0x47fd29(0x2f3)](secure[_0x47fd29(0x1f8)],_0x2fa657[_0x47fd29(0x2b3)])[_0x47fd29(0x289)][_0x47fd29(0x266)](_0x47fd29(0x367))[0x0];_0x2fa657={..._0x2fa657,'marketcapApi':_0x3b2981};}const _0x4d48c6=_0x2fa657[_0x47fd29(0x31a)]!=_0x47fd29(0x369)&&_0x2fa657[_0x47fd29(0x31a)]!=settings[_0x47fd29(0x31a)]||_0x2fa657['telegramUsername']!=settings['telegramUsername'],_0x599415=_0x2fa657[_0x47fd29(0x31a)]==''||_0x2fa657[_0x47fd29(0x208)]=='',_0x3484b9=_0x2fa657['marketcapApi']&&_0x2fa657[_0x47fd29(0x2b3)]!=_0x47fd29(0x369)&&_0x2fa657[_0x47fd29(0x2b3)]!=settings['telegramToken'];_0x4d48c6&&(_0x2fa657[_0x47fd29(0x3a5)]=null,_0x2fa657['telegramEvents']='all');for(const [_0x1783e1,_0x552f2a]of Object['entries'](_0x2fa657)){if(_0x1783e1=='telegramToken'&&_0x552f2a=='************'){_0x2fa657[_0x47fd29(0x31a)]=settings[_0x47fd29(0x31a)];continue;};if(_0x1783e1==_0x47fd29(0x39f)&&_0x552f2a==_0x47fd29(0x369)){_0x2fa657[_0x47fd29(0x39f)]=settings[_0x47fd29(0x39f)];continue;};if(_0x1783e1==_0x47fd29(0x2b3)&&_0x552f2a==_0x47fd29(0x369)){_0x2fa657['marketcapApi']=settings['marketcapApi'];continue;};dbSettings[_0x47fd29(0x30f)](_0x47fd29(0x36c)+_0x1783e1,_0x552f2a)[_0x47fd29(0x2f9)]();}settings=_0x2fa657,io['to'](_0x47fd29(0x2e2))[_0x47fd29(0x3a6)](_0x47fd29(0x34d),cleanSettings()),broadcastToBots(_0x47fd29(0x2ae),settings[_0x47fd29(0x2ae)]),broadcastToBots(_0x47fd29(0x1f6),settings[_0x47fd29(0x1f6)]),broadcastToBots(_0x47fd29(0x2b3),settings[_0x47fd29(0x2b3)]);if(_0x4d48c6&&!_0x599415)initTelegram();if(_0x4d48c6&&_0x599415)disableTelegram();getAllClients()[_0x47fd29(0x3b2)](_0x2de14f=>{const _0x51bf2f=_0x47fd29;getSocket(_0x2de14f['id'])[_0x51bf2f(0x3a6)](_0x51bf2f(0x23d),{'access':{'allow':![],'reason':_0x51bf2f(0x1f1),'token':null}});}),_0x3484b9&&(await sleep(0xbb8),testMarketcapApi(_0x2fa657['marketcapApi']));}async function testMarketcapApi(_0x31a67b){const _0x210b00=_0x3a33c3,_0x3fde21=['BCT',_0x210b00(0x2da)];try{await axios['get'](_0x210b00(0x229),{'headers':{'X-CMC_PRO_API_KEY':_0x31a67b},'params':{'symbol':_0x3fde21['toString']()}});}catch(_0x4ee88c){_0x4ee88c[_0x210b00(0x1ed)]()[_0x210b00(0x343)](_0x210b00(0x1fe))?(io['to'](_0x210b00(0x2e2))['emit'](_0x210b00(0x30c),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger['full'](_0x210b00(0x2ee))):(io['to'](_0x210b00(0x2e2))['emit'](_0x210b00(0x30c),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x210b00(0x348)](_0x210b00(0x3ef)),logger['debug']('Error\x20details:',_0x4ee88c[_0x210b00(0x1ed)]()+'\x20-\x20'+_0x4ee88c[_0x210b00(0x1e6)]));return;}logger['debug'](_0x210b00(0x2cd));}function updateSetting(_0x43e3f1,_0x2a588b){const _0x5dba05=_0x3a33c3;dbSettings['set'](_0x5dba05(0x36c)+_0x43e3f1,_0x2a588b)[_0x5dba05(0x2f9)](),settings=getSettings(),io['to'](_0x5dba05(0x2e2))[_0x5dba05(0x3a6)](_0x5dba05(0x34d),cleanSettings());}function storeSecure(_0x223b40){const _0x4d01e8=_0x3a33c3;dbSecure[_0x4d01e8(0x324)](_0x4d01e8(0x1f5))['push'](_0x223b40)[_0x4d01e8(0x2f9)](),secure=_0x223b40;}function addBlacklist(_0x3e0f71){const _0x84a0c6=_0x3a33c3;cleanBlacklist();let _0x55bf67;devices[_0x3e0f71][_0x84a0c6(0x320)]?_0x55bf67=Math[_0x84a0c6(0x2ac)](devices[_0x3e0f71]['telegramIpApproval'][_0x84a0c6(0x397)],loginExpiry):_0x55bf67=loginExpiry,dbSecure[_0x84a0c6(0x324)](_0x84a0c6(0x21c))[_0x84a0c6(0x3d4)]({'expiry':new Date()[_0x84a0c6(0x3d2)]()+_0x55bf67*0x3c*0x3e8,'token':devices[_0x3e0f71][_0x84a0c6(0x230)]['token']})[_0x84a0c6(0x2f9)](),blacklist=dbSecure[_0x84a0c6(0x324)](_0x84a0c6(0x21c))[_0x84a0c6(0x312)]();}function cleanBlacklist(){const _0x37ac13=_0x3a33c3;let _0x5471b0=dbSecure[_0x37ac13(0x324)](_0x37ac13(0x21c))['cloneDeep']()[_0x37ac13(0x312)](),_0x1c3bdd=new Date()[_0x37ac13(0x3d2)]();_0x5471b0[_0x37ac13(0x3b2)](_0x526b4e=>{const _0x49e0c4=_0x37ac13;_0x526b4e[_0x49e0c4(0x397)]<_0x1c3bdd&&dbSecure[_0x49e0c4(0x324)](_0x49e0c4(0x21c))[_0x49e0c4(0x273)]({'expiry':_0x526b4e[_0x49e0c4(0x397)]})[_0x49e0c4(0x2f9)]();});}function initStates(){let _0x28dd9f=getConfiguration();_0x28dd9f['forEach'](_0x42b72b=>{const _0x3f0157=_0x24f7;_0x42b72b[_0x3f0157(0x1ee)]=_0x3f0157(0x213);}),storeConfiguration(_0x28dd9f);}function onKeys(){const _0x17cdce=new RSA();return new Promise(_0x5758a1=>{const _0x350277=_0x24f7;_0x17cdce[_0x350277(0x2e4)]()['then'](_0xb306d7=>{_0x5758a1(_0xb306d7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x272a7f=_0x3a33c3;let _0x19f433=getSettings(),_0x53f752=![];!_0x19f433[_0x272a7f(0x220)](_0x272a7f(0x3dc))&&(_0x19f433[_0x272a7f(0x3dc)]=0x0,_0x53f752=!![]);!_0x19f433[_0x272a7f(0x220)](_0x272a7f(0x3bb))&&(_0x19f433[_0x272a7f(0x3bb)]=0x0,_0x53f752=!![]);!_0x19f433['hasOwnProperty']('latestversion')&&(_0x19f433[_0x272a7f(0x2bd)]=_0x272a7f(0x344),_0x53f752=!![]);!_0x19f433['hasOwnProperty'](_0x272a7f(0x1f6))&&(_0x19f433[_0x272a7f(0x1f6)]=![],_0x53f752=!![]);!_0x19f433['hasOwnProperty'](_0x272a7f(0x2b3))&&(_0x19f433[_0x272a7f(0x2b3)]='',_0x53f752=!![]);if(_0x53f752)storeSettings(_0x19f433);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x272a7f(0x3b2)](_0x12b7a9=>{const _0x30f2cf=_0x272a7f;if(!_0x12b7a9[_0x30f2cf(0x38f)]()){if(!_0x12b7a9[_0x30f2cf(0x237)][_0x30f2cf(0x235)](_0x30f2cf(0x305)))fs[_0x30f2cf(0x387)](configbackuppath+_0x12b7a9[_0x30f2cf(0x237)]);}else fs[_0x30f2cf(0x1f9)](configbackuppath+_0x12b7a9['name'],{'recursive':!![]});});}catch(_0xe979d7){logger[_0x272a7f(0x21e)](_0x272a7f(0x28f),_0xe979d7);}}function storeConfiguration(_0x494d8f){const _0x47b905=_0x3a33c3;dbConfig[_0x47b905(0x324)](_0x47b905(0x22a))['remove']()[_0x47b905(0x2f9)](),dbConfig[_0x47b905(0x324)](_0x47b905(0x22a))[_0x47b905(0x3d4)](..._0x494d8f)['write'](),config=_0x494d8f;}async function resetPassword(){const _0x1e283d=_0x3a33c3;if(tgBot&&settings[_0x1e283d(0x3a5)]){const _0x2c56c0=Markup[_0x1e283d(0x345)]([Markup['button'][_0x1e283d(0x27d)](_0x1e283d(0x3a0),_0x1e283d(0x3d6)),Markup[_0x1e283d(0x3cb)]['callback']('no',_0x1e283d(0x207))]);await sendTelegram(settings[_0x1e283d(0x3a5)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x2c56c0),tgBot[_0x1e283d(0x33e)](/resetpw_(.+)/,async _0x151a4e=>{const _0x2c0e85=_0x1e283d,_0x7081b7=_0x151a4e['match'][0x1];_0x151a4e[_0x2c0e85(0x205)]();if(_0x7081b7!='no'){const _0x555331=0xf,_0x45f217=_0x2c0e85(0x263),_0x9fab7=Array[_0x2c0e85(0x278)](crypto[_0x2c0e85(0x21b)](new Uint32Array(_0x555331)))[_0x2c0e85(0x388)](_0x36e7cf=>_0x45f217[_0x36e7cf%_0x45f217[_0x2c0e85(0x3cd)]])[_0x2c0e85(0x36a)](''),_0x3a6073=bcrypt[_0x2c0e85(0x382)](_0x9fab7,saltRounds);storeSettings({'bbPassword':_0x3a6073}),await sendTelegram(_0x151a4e[_0x2c0e85(0x287)]['id'],_0x2c0e85(0x29d)+_0x9fab7,{'parse_mode':_0x2c0e85(0x378)});}else await sendTelegram(_0x151a4e['chat']['id'],_0x2c0e85(0x3a9));});}}async function confirmRestore(_0x20c5d6,_0x7fc900){const _0x1c1d75=_0x3a33c3;io['to'](_0x1c1d75(0x2e2))[_0x1c1d75(0x3a6)](_0x1c1d75(0x30c),_0x1c1d75(0x346),_0x1c1d75(0x3ad));if(tgBot&&settings[_0x1c1d75(0x3a5)]){const _0x443fb6=uuidRandom();tmpStorage[_0x443fb6]={'path':_0x20c5d6,'filename':_0x7fc900};const _0x26d082=Markup[_0x1c1d75(0x345)]([Markup[_0x1c1d75(0x3cb)][_0x1c1d75(0x27d)](_0x1c1d75(0x3a0),_0x1c1d75(0x3a4)+_0x443fb6),Markup[_0x1c1d75(0x3cb)][_0x1c1d75(0x27d)]('no',_0x1c1d75(0x221)+_0x443fb6)]);await sendTelegram(settings[_0x1c1d75(0x3a5)],_0x1c1d75(0x2f1),_0x26d082),tgBot['action'](/restore_(.+)_(.+)/,async _0x3d76df=>{const _0x2e7d8c=_0x1c1d75,_0x206afb=_0x3d76df['match'][0x1],_0x205ce5=_0x3d76df[_0x2e7d8c(0x3aa)][0x2],{path:_0x1c1d48,filename:_0x3d5b8b}=tmpStorage[_0x205ce5];delete tmpStorage[_0x205ce5],_0x3d76df[_0x2e7d8c(0x205)](),_0x206afb==_0x2e7d8c(0x3a0)?(logger[_0x2e7d8c(0x21e)](_0x2e7d8c(0x2f6)),await sendTelegram(_0x3d76df[_0x2e7d8c(0x287)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x2e7d8c(0x378)}),unzipFile(_0x1c1d48,_0x3d5b8b)):(logger['debug'](_0x2e7d8c(0x2aa)),await sendTelegram(_0x3d76df['chat']['id'],_0x2e7d8c(0x2aa)));});}}function getServerTime(){const _0x48cc98=_0x3a33c3,_0x46d273=new Date();return _0x46d273['getFullYear']()+'/'+(_0x46d273[_0x48cc98(0x245)]()+0x1)[_0x48cc98(0x1ed)]()['padStart'](0x2,'0')+'/'+_0x46d273[_0x48cc98(0x2a4)]()[_0x48cc98(0x1ed)]()[_0x48cc98(0x258)](0x2,'0')+'\x20'+_0x46d273[_0x48cc98(0x2e9)]()[_0x48cc98(0x1ed)]()[_0x48cc98(0x258)](0x2,'0')+':'+_0x46d273[_0x48cc98(0x275)]()[_0x48cc98(0x1ed)]()[_0x48cc98(0x258)](0x2,'0')+':'+_0x46d273['getSeconds']()[_0x48cc98(0x1ed)]()[_0x48cc98(0x258)](0x2,'0');}function getTimeStamp(){const _0x16eceb=_0x3a33c3,_0x3b4939=shiftedTime();return _0x3b4939[_0x16eceb(0x318)]()+'/'+(_0x3b4939[_0x16eceb(0x245)]()+0x1)[_0x16eceb(0x1ed)]()[_0x16eceb(0x258)](0x2,'0')+'/'+_0x3b4939['getDate']()[_0x16eceb(0x1ed)]()[_0x16eceb(0x258)](0x2,'0')+'\x20'+_0x3b4939[_0x16eceb(0x2e9)]()['toString']()[_0x16eceb(0x258)](0x2,'0')+':'+_0x3b4939[_0x16eceb(0x275)]()[_0x16eceb(0x1ed)]()[_0x16eceb(0x258)](0x2,'0')+':'+_0x3b4939['getSeconds']()[_0x16eceb(0x1ed)]()[_0x16eceb(0x258)](0x2,'0');}function getCleanTimeStamp(){const _0x486434=_0x3a33c3,_0x42293b=shiftedTime();return _0x42293b[_0x486434(0x318)]()+(_0x42293b[_0x486434(0x245)]()+0x1)[_0x486434(0x1ed)]()[_0x486434(0x258)](0x2,'0')+_0x42293b[_0x486434(0x2a4)]()[_0x486434(0x1ed)]()[_0x486434(0x258)](0x2,'0')+'-'+_0x42293b[_0x486434(0x2e9)]()[_0x486434(0x1ed)]()[_0x486434(0x258)](0x2,'0')+_0x42293b[_0x486434(0x275)]()[_0x486434(0x1ed)]()['padStart'](0x2,'0')+_0x42293b[_0x486434(0x1ea)]()[_0x486434(0x1ed)]()[_0x486434(0x258)](0x2,'0');}function shiftedTime(){const _0x56b118=_0x3a33c3,_0x402ff2=new Date();let _0x3c9069=_0x402ff2;if(settings[_0x56b118(0x2ae)]&&settings[_0x56b118(0x2ae)]!==0x0)_0x3c9069=fns[_0x56b118(0x2cb)](_0x402ff2,{'hours':settings[_0x56b118(0x2ae)]});return _0x3c9069;}async function startScheduler(){const _0x2a7f62=_0x3a33c3,_0x275a5e=new Date()[_0x2a7f62(0x20a)](),_0xd5d693=shiftedTime()[_0x2a7f62(0x2e9)]();_0xd5d693==0x4&&backupConfigFiles(),_0xd5d693==0x0&&rotateLogFiles(),_0x275a5e%0x6==0x0&&triggerAnalytics(),_0x275a5e%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0xe27a76){const _0x5e6934=_0x3a33c3;logger[_0x5e6934(0x21e)](_0x5e6934(0x313)+_0xe27a76);const _0x15d304=getBotsWithMode();_0x15d304['length']>0x0?confirmRestore(configbackuppath,_0xe27a76):unzipFile(configbackuppath,_0xe27a76);}async function getBackupFiles(_0xa9a69e=null){const _0x3525cf=_0x3a33c3;let _0x3caa2c=[],_0x56cfb2=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x56cfb2['sort']((_0x210430,_0x5cb340)=>_0x210430[_0x3525cf(0x237)]<_0x5cb340['name']?0x1:_0x5cb340[_0x3525cf(0x237)]<_0x210430[_0x3525cf(0x237)]?-0x1:0x0),_0x56cfb2['forEach'](_0x1af4b4=>{const _0x3b5ed0=_0x3525cf;if(!_0x1af4b4['isDirectory']()&&_0x1af4b4[_0x3b5ed0(0x237)][_0x3b5ed0(0x235)]('backup-full@')&&_0x1af4b4[_0x3b5ed0(0x237)]['endsWith'](_0x3b5ed0(0x28c))){const _0x2c593f=formatDate(fs[_0x3b5ed0(0x308)](configbackuppath+_0x1af4b4['name'])[_0x3b5ed0(0x1ff)]);_0x3caa2c['push']({'name':_0x1af4b4[_0x3b5ed0(0x237)],'mtime':_0x2c593f});}});if(_0xa9a69e)io['to'](_0xa9a69e)[_0x3525cf(0x3a6)]('backup-files',_0x3caa2c);else return _0x3caa2c;}async function backupConfigFiles(){const _0x480398=_0x3a33c3;await zipFiles(_0x480398(0x2c8));const _0x3b5cf9=getCleanTimeStamp();fs[_0x480398(0x2c7)](zippath+_0x480398(0x26a),configbackuppath+('backup-full@'+_0x3b5cf9+'.zip'));let _0x96d513=fs[_0x480398(0x233)](configbackuppath,{'withFileTypes':!![]});_0x96d513[_0x480398(0x1e4)]((_0x4f4a1e,_0x13338d)=>_0x4f4a1e[_0x480398(0x237)]<_0x13338d['name']?0x1:_0x13338d[_0x480398(0x237)]<_0x4f4a1e['name']?-0x1:0x0),_0x96d513[_0x480398(0x3cd)]>maxBackups&&fs[_0x480398(0x387)](configbackuppath+_0x96d513[_0x96d513[_0x480398(0x3cd)]-0x1]['name']);}function rotateLogFiles(){const _0x409b69=_0x3a33c3,_0x4a5304=fs[_0x409b69(0x308)](logspath+_0x409b69(0x2e8)),_0x4bc9cd=_0x4a5304[_0x409b69(0x25c)]/0x400;if(_0x4bc9cd>0x64){let _0x584031=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x584031['sort']((_0x490888,_0x52ec5d)=>_0x490888[_0x409b69(0x237)]<_0x52ec5d[_0x409b69(0x237)]?0x1:_0x52ec5d[_0x409b69(0x237)]<_0x490888['name']?-0x1:0x0),_0x584031['forEach'](_0x4c33fc=>{const _0x590c7c=_0x409b69;if(_0x4c33fc[_0x590c7c(0x237)]==_0x590c7c(0x38b))fs[_0x590c7c(0x2c7)](logspath+_0x4c33fc[_0x590c7c(0x237)],logspath+_0x590c7c(0x329));if(_0x4c33fc[_0x590c7c(0x237)]=='output-001.log')fs[_0x590c7c(0x2c7)](logspath+_0x4c33fc[_0x590c7c(0x237)],logspath+_0x590c7c(0x38b));_0x4c33fc[_0x590c7c(0x237)]=='output-000.log'&&(fs[_0x590c7c(0x2c7)](logspath+_0x4c33fc[_0x590c7c(0x237)],logspath+_0x590c7c(0x271)),fs['writeFileSync'](logspath+_0x4c33fc[_0x590c7c(0x237)],''));});}}async function zipFiles(_0x15b734){const _0x6226e9=_0x3a33c3;let _0x2551ad;if(_0x15b734==_0x6226e9(0x3ea))_0x2551ad=logspath;if(_0x15b734==_0x6226e9(0x362))_0x2551ad=configpath;if(_0x15b734==_0x6226e9(0x2c8))_0x2551ad=configpath;let _0x4ed29d=fs['readdirSync'](_0x2551ad,{'withFileTypes':!![]});const _0x5c6444=new require(_0x6226e9(0x353))();_0x4ed29d[_0x6226e9(0x3b2)](_0x2ff435=>{const _0x4e4021=_0x6226e9;if(!_0x2ff435[_0x4e4021(0x38f)]()){let _0x2a11fe=fs[_0x4e4021(0x399)](_0x2551ad+_0x2ff435['name']);if(_0x15b734==_0x4e4021(0x362)){const _0x312b9c=/^bot-[0-9]{3}-config.json$/,_0x14228a=_0x312b9c[_0x4e4021(0x3bd)](_0x2ff435[_0x4e4021(0x237)]);if(_0x14228a){const _0x28d112=JSON[_0x4e4021(0x3d3)](_0x2a11fe);if(_0x28d112[_0x4e4021(0x2be)][0x0]){_0x28d112[_0x4e4021(0x2be)][0x0][_0x4e4021(0x25b)]=_0x4e4021(0x39d),_0x28d112[_0x4e4021(0x2be)][0x0][_0x4e4021(0x20e)]=_0x4e4021(0x39d);if(_0x28d112[_0x4e4021(0x2be)][0x0][_0x4e4021(0x26c)])_0x28d112[_0x4e4021(0x2be)][0x0]['apiPassword']=_0x4e4021(0x39d);}_0x2a11fe=JSON[_0x4e4021(0x225)](_0x28d112,null,0x2);}if(_0x2ff435[_0x4e4021(0x237)]==_0x4e4021(0x2e5)){const _0x294e8d=JSON['parse'](_0x2a11fe);if(_0x294e8d['settings']['loginRequired'])_0x294e8d[_0x4e4021(0x34d)][_0x4e4021(0x386)]=![];if(_0x294e8d[_0x4e4021(0x34d)][_0x4e4021(0x39f)])_0x294e8d[_0x4e4021(0x34d)][_0x4e4021(0x39f)]=_0x4e4021(0x39d);if(_0x294e8d[_0x4e4021(0x34d)][_0x4e4021(0x31a)])_0x294e8d[_0x4e4021(0x34d)]['telegramToken']=_0x4e4021(0x39d);if(_0x294e8d['settings'][_0x4e4021(0x3a5)])_0x294e8d[_0x4e4021(0x34d)][_0x4e4021(0x3a5)]=null;if(_0x294e8d['settings'][_0x4e4021(0x2b3)])_0x294e8d['settings']['marketcapApi']=_0x4e4021(0x39d);_0x2a11fe=JSON['stringify'](_0x294e8d,null,0x2);}if(_0x2ff435[_0x4e4021(0x237)]!=_0x4e4021(0x30e))_0x5c6444[_0x4e4021(0x288)](_0x2ff435['name'],_0x2a11fe);}else _0x5c6444['file'](_0x2ff435['name'],_0x2a11fe);}});const _0x41daf2=_0x5c6444['generate']({'base64':![],'compression':_0x6226e9(0x1f0)});fs[_0x6226e9(0x32b)](zippath+(_0x15b734+'.zip'),_0x41daf2,'binary');}async function unzipFile(_0x370711,_0xf74c3c){const _0x8687=_0x3a33c3;fs[_0x8687(0x233)](configpath,{'withFileTypes':!![]})[_0x8687(0x3b2)](_0x48b6cb=>{const _0x2bdf33=_0x8687;if(!_0x48b6cb[_0x2bdf33(0x38f)]())fs[_0x2bdf33(0x1f9)](configpath+_0x48b6cb[_0x2bdf33(0x237)]);});const _0x4ee428=fs['readFileSync'](_0x370711+_0xf74c3c,_0x8687(0x2e0)),_0x8f3979=new require(_0x8687(0x353))(_0x4ee428,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x8f3979[_0x8687(0x2f5)])[_0x8687(0x3b2)](_0xf7e7ef=>{const _0x117bdb=_0x8687,_0x40e1dd=_0x8f3979[_0x117bdb(0x2f5)][_0xf7e7ef];fs[_0x117bdb(0x32b)](configpath+_0x40e1dd[_0x117bdb(0x237)],_0x40e1dd[_0x117bdb(0x218)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x8687(0x3b2)](_0x5a3bf4=>{const _0x3c861e=_0x8687;if(!_0x5a3bf4['isDirectory']())fs[_0x3c861e(0x1f9)](temppath+_0x5a3bf4[_0x3c861e(0x237)]);}),logger[_0x8687(0x21e)](_0x8687(0x27f)),process[_0x8687(0x210)]({'restore':!![]},_0x4e9379=>{});}async function getPublicIp(){const _0x6374b6=_0x3a33c3;try{const _0x81c3ab=await axios['get'](_0x6374b6(0x31b));publicip=_0x81c3ab[_0x6374b6(0x265)]['ip'];}catch(_0x1259a5){}}function _0x1baf(){const _0x1aa265=['update-bb','send','\x1b[35m','keys','stopped','mode','store-headless','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','get-portfolio','_data','5816ulNNuz','/status\x20-\x20show\x20bot(s)\x20status\x0a','randomFillSync','blacklist','publicKey','debug','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','hasOwnProperty','restore_no_','2FA\x20login\x20required','login\x20token\x20generated','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stringify','-results.json','address\x20already\x20in\x20use','get-messages','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','bots','Deleted\x20Bot\x20','Notifications\x20disabled','login\x20not\x20required','/off\x20-\x20stop\x20bot(s)\x0a','createServer','access','toggleBotMode','track','readdirSync','<b>Balance\x20Bot\x20Status:</b>\x0a','startsWith','-----------------------------------------------------------------------------------','name',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','/:bot/configuration','running','manual','help','status','crypto','exp','5\x20min','reason','File\x20uploaded','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','userid','getMonth','botname','Notifications\x20enabled','logged\x20out','http','launch','/:bot/support','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','download','place-order','User\x20has\x20been\x20validated','Temporary\x20access\x20rejected','login','No\x20authentication\x20token','connection','\x1b[34m','restore-backup-file','isIPv4MappedAddress','Alerts','padStart','restart_','off_','apiKey','size','f2aRequired','store-configuration','\x1b[31m','disable','/:bot/performance','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x1b[0m','data','split','store-settings','params','logout','backup-full.zip','conn','apiPassword','existsSync','\x20|\x20client:\x20...','pidExpireLogin','hex','output-001.log','defaults','remove','clients','getMinutes','disconnect','NTBA_FIX_319','from','\x1b[36m','build2','/output-000.log','storeConfiguration','callback','kind','Backup\x20file\x20unzipped\x20and\x20stored','Starting\x20#RED#Balance\x20Bot\x20v','function','on_','close','reinstall-bb','botID','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','chat','file','message','apply','RSA-OAEP','.zip','warning','handshake','Error\x20removing\x20old\x20backup\x20files:','placeOrder','yargs/yargs','post','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','127.0.0.1','telegrammsg','access\x20timeout','lowdb/adapters/FileSync','filter','Your\x20installation\x20is\x20already\x20up\x20to\x20date','-config.json','mkdirSync','zip/','Password\x20has\x20been\x20reset\x20to:\x20','exit','Notifications\x20enabled\x0a','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','telegramEnabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','getDate','new-disabled','init','headless','Login\x20rejected','All','Restore\x20process\x20aborted','Bot\x20','max','bbvNew','timeshift','stop','tkn','any','Unauthorized\x20attempt\x20to\x20update\x20bot','marketcapApi','format','Starting\x20new\x20bot\x20|\x20Bot\x20','login2fa_','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Token\x20blacklisted','/disable\x20-\x20disable\x20notifications\x0a','min','Unauthorized\x20attempt\x20to\x20add\x20bot','\x20mode','latestversion','bot','internal','static','Ok,\x20will\x20send\x20order\x20notifications\x20only','express','Yes','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','auth','showConfig','copyFileSync','backup-full','bbvReceive','144453jtJnOd','add','args','CoinMarketCap\x20API\x20key\x20validated','sign','\x20(1)','verify','metrics','Markdown','Setting\x20access:\x20','node','enabled','private','replace','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','search','ETH','telegramEvents','isValid','get-starting-balances','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','7325118PcuYmN','binary','version.json','botmanager','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','generateKeyPairAsync','bb-settings.json','add-bot','7YDMshM','output-000.log','getHours','show','createWriteStream','store','use','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','get-backup-files','toIPv4MappedAddress','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','logs/','decrypt','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','files','Restore\x20process\x20confirmed','telegram','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','write','toggle-bot-mode','Orders','all','child_process','Crypt','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/:bot/coins','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','RSA','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','graphql-request','backup-full@','1375207eaLKBx','show-config','statSync','once','ipaddr.js','bbUsername','notification','range','bb-secure.json','set','Notifications\x20disabled\x0a','listen','value','Restore\x20backup\x20file\x20','argv','pidRefreshToken','649064ezRTsK','headers','getFullYear','10134JdbOPS','telegramToken','https://api.ipify.org?format=json','metrics_','bb-config.json','Server','compareSync','telegramIpApproval','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','mixpanel','config_orders','get','whitelistEnabled','3000','env','environment','output-003.log','/enable\x20-\x20enable\x20notifications\x0a','writeFileSync','Unauthorized\x20attempt\x20to\x20confirm\x20message','login2fa_reject_','6b67f3d61ee94b8f5c80b4affef4c4d9','uuid','Telegram\x20error:','Notifications\x20types:\x20','randomBytes','Invalid\x20authentication\x20token\x20(1)','constructor','ipc','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Bot\x20Mgr\x20>\x20','invalid\x20credentials','fork','30\x20min','Unauthorized\x20attempt\x20to\x20show\x20configuration','login\x20required','tempaccess_5_','action','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','::ffff:127.0.0.1','error','Error:\x20Invalid\x20argument\x20','includes','0.0.0','inlineKeyboard','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','username','full','login\x20token\x20valid','off','sendFile','temporary\x20token\x20generated','settings','Login\x20accepted','secret','Telegraf\x20error:','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','node-zip','sendMetricsTelegram','started','Disabled\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Network\x20Interfaces:','config/','config_alerts','toIPv4Address','getPortfolio','start','port','All\x20bots\x20running\x20right\x20now','title','orders','backup','2FA','api-eu.mixpanel.com','find','accept','|@|','removeAllListeners','************','join','cancel-loading','settings.','production','config_all','telegram2FaApproval','delete-alerts','Starting\x20Balance\x20Bot\x20update','-events.json','You\x20can\x20use\x20the\x20following\x20commands:\x0a','address','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','sendMessage',':\x20Bot\x20Mgr\x20>\x20','HTML','kill','Starting\x20Balance\x20Bot\x20reinstallation','auto','temporary\x20access\x20timeout','user','temp/','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','sockets','SIGTERM','hashSync','messages','version','#RES#\x20','loginRequired','unlinkSync','map','update','hybrid-crypto-js','output-002.log',')\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Error\x20while\x20deleting\x20config\x20files:\x20','isDirectory','uuid-random','2FA\x20required','slice','initclient','confirm-message','All\x20bots','encryptedUuid','expiry','Unauthorized\x20attempt\x20to\x20store\x20configuration','readFileSync','reply','2FA\x20login\x20token\x20generated','Session\x20expired\x20for\x20user\x20...','***','event','bbPassword','yes','socket.io','/:bot','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','restore_yes_','telegramChatId','emit','portfolio','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Password\x20reset\x20rejected','match','Unauthorized\x20attempt\x20to\x20log\x20out','reset-history','success','3787300ZHwOvn','<b>Telegram\x20Bot\x20Status:</b>\x0a','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','/:bot/history','forEach','family','storeFiat','No\x20bots\x20running\x20right\x20now','\x1b[33m','\x20|\x20user:\x20...','allow','-performance.json','command','lastmsgemitted','sortBy','test','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Failed\x20to\x20download\x20','express-fileupload','SIGINT','password','get-logs','/download/:type','timestamp','simple','assign','Unauthorized\x20attempt\x20to\x20download\x20','log','clientip','button','inherit','length','\x20minutes','build','alerts','order','getTime','parse','push','Invalid\x20username\x20or\x20IP\x20address','resetpw_yes','sendPortfolioTelegram','(((.+)+)+)+$','#RES#\x20if\x20running\x20on\x20server','Idling\x20(','temporaryAccessAllowed','lastmsgtelegram','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','reject','\x20>\x20','2441085moZNYF','/help\x20-\x20show\x20available\x20commands\x0a','lowdb','token','new','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','uncaughtException','Unauthorized\x20attempt\x20to\x20delete\x20alerts','update-bot','request','logs','portfolio_','staging','bot-','showname','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','reinstall','sort','$1_$2_$3','code','*$1*','Unauthorized\x20attempt\x20to\x20get\x20portfolio','remoteAddress','getSeconds','\x20|\x20','socket','toString','live','resetHistory','DEFLATE','reload','Invalid\x20IP\x20address','disabled','reinstall_no','secure','onepagemode','getStartingBalances','privateKey','rmSync','type','=>\x20Go\x20to\x20#CYA#http://','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','index.html','status\x20code\x20401','mtime','restart','\x20(2)','telegraf','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','editMessageReplyMarkup','toggle_','resetpw_no','telegramUsername','temporary\x20access\x20rejected','getUTCHours','Node.js\x20v','Restarting\x20(silent)\x20Bot\x20','number','apiSecret'];_0x1baf=function(){return _0x1aa265;};return _0x1baf();}async function triggerAnalytics(){const _0x2b8883=_0x3a33c3;if(!publicip)await getPublicIp();const _0x190fb1=getBotsWithMode();let _0x28a5f4=0x0;_0x190fb1[_0x2b8883(0x3b2)](_0x5b7531=>{const _0xc95a9b=_0x2b8883;if(_0x5b7531[_0xc95a9b(0x23d)]==='enabled')_0x28a5f4++;});const _0x2d468c=getBotExchanges();mixpanel[_0x2b8883(0x232)](_0x2b8883(0x31e),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x190fb1[_0x2b8883(0x3cd)],'numbotsenabled':_0x28a5f4,'exchanges':_0x2d468c,'environment':environment});}async function getMessages(){const _0x4054db=_0x3a33c3,_0x3c95df=_0x4054db(0x3b0),_0x273878=new GraphQLClient(_0x3c95df),_0xb4911f={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x51979d=serverversion['split']('.'),_0x356de9=_0x51979d[0x0]+'.'+_0x51979d[0x1],_0x547f25=Math[_0x4054db(0x2ba)](settings['lastmsgtelegram'],settings[_0x4054db(0x3bb)]),_0x555890={'last':parseInt(_0x547f25),'bbm':_0x356de9},_0x8f8970=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2a1d0c;try{_0x2a1d0c=await _0x273878[_0x4054db(0x3e9)](_0x8f8970,_0x555890,_0xb4911f);}catch(_0x27e381){}if(_0x2a1d0c&&_0x2a1d0c['messages']){let _0x499f28=settings['lastmsgtelegram'];newMessages=[];for(const _0x1a03d7 of _0x2a1d0c[_0x4054db(0x383)]){newMessages[_0x4054db(0x3d4)](_0x1a03d7);let _0xaa90c5=![];_0x1a03d7['bbvNew']&&(updateSetting(_0x4054db(0x2bd),_0x1a03d7[_0x4054db(0x2ad)]),_0xaa90c5=isNewerVersion(serverversion,_0x1a03d7[_0x4054db(0x2ad)])||serverversion==_0x1a03d7[_0x4054db(0x2ad)]);if(!_0xaa90c5&&_0x1a03d7['number']>_0x499f28){if(_0x1a03d7[_0x4054db(0x2c9)]===_0x4054db(0x2b1)||serverversion[_0x4054db(0x235)](_0x1a03d7[_0x4054db(0x2c9)])){let _0x2ed5bb=''+_0x1a03d7[_0x4054db(0x360)]+'\x0a\x0a'+_0x1a03d7['message'];const _0x285d55=await sendTelegramMsg(toTelegramMarkdown(_0x2ed5bb),_0x4054db(0x2d2));if(_0x285d55)_0x499f28=_0x1a03d7['number'];}}}updateAvailable=isNewerVersion(settings[_0x4054db(0x2bd)],serverversion),updateSetting(_0x4054db(0x3dc),_0x499f28),emitMessages();}}function emitMessages(){const _0x255601=_0x3a33c3,_0x12f91c=settings['lastmsgemitted'];let _0x165891=[];newMessages[_0x255601(0x3b2)](_0x5ca0eb=>{const _0x3b9eed=_0x255601;_0x5ca0eb[_0x3b9eed(0x20d)]>_0x12f91c&&_0x165891[_0x3b9eed(0x3d4)](_0x5ca0eb);}),_0x165891['length']>0x0&&getAllClients()[_0x255601(0x3b2)](_0x30eda4=>{const _0x5f1cf5=_0x255601;getSocket(_0x30eda4['id'])[_0x5f1cf5(0x3a6)](_0x5f1cf5(0x289),_0x165891);});}function confirmMessage(_0x1099dd){const _0x35b5ed=_0x3a33c3;updateSetting(_0x35b5ed(0x3bb),Number(_0x1099dd));}function isNewerVersion(_0x4824c8,_0x25ec4c){const _0xf81957=_0x3a33c3,_0x5dec68=_0x25ec4c[_0xf81957(0x266)]('.'),_0x43eb60=_0x4824c8[_0xf81957(0x266)]('.');for(var _0x24317c=0x0;_0x24317c<_0x43eb60[_0xf81957(0x3cd)];_0x24317c++){const _0x362d8b=~~_0x43eb60[_0x24317c],_0x1dc29f=~~_0x5dec68[_0x24317c];if(_0x362d8b>_0x1dc29f)return!![];if(_0x362d8b<_0x1dc29f)return![];}return![];}function toTelegramMarkdown(_0x52a006){const _0x287f7a=_0x3a33c3,_0x576475=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x33101d=/\*{2}(.+?)\*{2}/gim;return _0x52a006=_0x52a006[_0x287f7a(0x2d7)](_0x576475,_0x287f7a(0x1e5))[_0x287f7a(0x2d7)](_0x33101d,_0x287f7a(0x1e7)),_0x52a006;}async function validateConfigFile(){const _0x70186b=_0x3a33c3,_0x2edaa9=dbConfig[_0x70186b(0x324)](_0x70186b(0x22a))['sortBy'](_0x70186b(0x285))[_0x70186b(0x312)]()||[];if(_0x2edaa9[_0x70186b(0x3cd)]==0x0){let _0x4a5478=0x0,_0x29dedb=[];const _0x5dcc71=/^bot-([0-9]{3})-config.json$/,_0x2b9004=fs['readdirSync'](configpath);_0x2b9004['forEach'](_0x3943a0=>{const _0x21988c=_0x70186b,_0x2a24aa=_0x5dcc71['exec'](_0x3943a0);if(_0x2a24aa){const _0x313ac2=_0x2a24aa[0x1];let _0x2b6648=getBotAttributes(_0x313ac2);_0x29dedb[_0x21988c(0x3d4)]({'botID':_0x313ac2,'botname':_0x2b6648[_0x21988c(0x246)],'status':'disabled','live':'stopped'}),_0x4a5478++;}}),_0x4a5478!=0x0&&(dbConfig[_0x70186b(0x324)]('bots')[_0x70186b(0x3c7)](_0x29dedb)[_0x70186b(0x2f9)](),config=_0x29dedb,restoredConfigFile=_0x4a5478);}}async function restoreConfigNotify(_0x423948){const _0xf5a07c=_0x3a33c3;let _0xc3e57c;if(restoredConfigFile==0x1)_0xc3e57c=_0xf5a07c(0x301);else _0xc3e57c=_0xf5a07c(0x3be);if(_0x423948)io['to']('botmanager')[_0xf5a07c(0x3a6)](_0xf5a07c(0x30c),_0xc3e57c);else{logger['simple'](_0xf5a07c(0x236)),logger['simple'](_0xc3e57c),logger[_0xf5a07c(0x3c6)](_0xf5a07c(0x236)),logger[_0xf5a07c(0x3c6)]('');if(tgBot&&settings[_0xf5a07c(0x3a5)]&&settings[_0xf5a07c(0x2db)]!='orders')await sendTelegram(settings[_0xf5a07c(0x3a5)],'Bot\x20Mgr\x20>\x20'+_0xc3e57c);}}function validateCredentials(_0x404ef9,_0x129d65){const _0x1e8a01=_0x3a33c3;if(_0x404ef9['username']==settings[_0x1e8a01(0x30b)]&&bcrypt[_0x1e8a01(0x31f)](_0x404ef9['password'],settings[_0x1e8a01(0x39f)])){if(settings[_0x1e8a01(0x25d)])return{'allow':![],'reason':_0x1e8a01(0x222),'token':null};else{const _0x1bfb40=generateLoginToken(_0x129d65);return{'allow':!![],'reason':_0x1e8a01(0x223),'token':_0x1bfb40};}}else return{'allow':![],'reason':_0x1e8a01(0x338),'token':null};}function refreshToken(_0x263e76){const _0x207720=_0x3a33c3,_0x4d2cfb=generateLoginToken(_0x263e76);return{'allow':!![],'reason':_0x207720(0x223),'token':_0x4d2cfb};}function validateAccess(_0x819d12,_0x14d521,_0xdda7a7){const _0x504c77=_0x3a33c3,_0x3fa1f9=_0xdda7a7?_0xdda7a7:devices[_0x14d521]['ip'];let _0x1e04d1;const _0x2c395f=_0x1a79ea=>{const _0x1a5bed=_0x24f7;if(settings['loginRequired']){if(settings[_0x1a5bed(0x25d)]){if(telegram2FaApproved(_0x14d521)){const _0x500945=generateLoginToken(_0x14d521);return{'allow':!![],'reason':_0x1a5bed(0x39b),'token':_0x500945};}else return{'allow':![],'reason':_0x1a5bed(0x33c),'token':null};}else return _0x1e04d1=validToken(_0x1a79ea,_0x14d521),_0x1e04d1[_0x1a5bed(0x220)](_0x1a5bed(0x3ad))?{'allow':!![],'reason':_0x1a5bed(0x349),'token':_0x1a79ea}:{'allow':![],'reason':_0x1a5bed(0x33c),'token':null};}else return{'allow':!![],'reason':_0x1a5bed(0x22d),'token':null};};if(settings[_0x504c77(0x325)]){let _0x4f0327=[...settings['whitelist'],'::1',_0x504c77(0x340),_0x504c77(0x294)];if(_0x4f0327['includes'](_0x3fa1f9))return _0x2c395f(_0x819d12);else{_0x1e04d1=validToken(_0x819d12,_0x14d521);if(_0x1e04d1['hasOwnProperty'](_0x504c77(0x3ad)))return _0x2c395f(_0x819d12);else{if(telegramIpApproved(_0x14d521)){const _0x4fecf9=generateToken(_0x14d521);return _0x1e04d1=_0x2c395f(_0x819d12),_0x1e04d1[_0x504c77(0x3b8)]?{'allow':!![],'reason':_0x504c77(0x34c),'token':_0x4fecf9}:_0x1e04d1;}else return settings[_0x504c77(0x3db)]?{'allow':![],'reason':_0x504c77(0x391),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x2c395f(_0x819d12);}function timelyDecrypt(_0x55678e,_0x1d7459,_0x600c30='@'){const _0x226c79=_0x3a33c3;if(_0x55678e)try{const _0x2bb56b=crypt[_0x226c79(0x2f3)](secure[_0x226c79(0x1f8)],_0x55678e)['message'],_0x5cd87e=_0x2bb56b[_0x226c79(0x266)](_0x600c30)[0x0],_0x29a16c=_0x2bb56b[_0x226c79(0x266)](_0x600c30)[0x1],_0x51cbdc=new Date()[_0x226c79(0x3d2)]();if(_0x1d7459){if(_0x51cbdc-_0x29a16c<maxSecretAge*0x3e8)return _0x5cd87e;else return![];}else return _0x5cd87e;}catch(_0x54baf8){return![];}else return![];}const validToken=(_0x23ef2f,_0x15d128)=>{const _0x2fabae=_0x3a33c3,_0x1779b4=devices[_0x15d128]['ip'];if(!_0x23ef2f)return{'error':_0x2fabae(0x252)};for(let _0x204b1d of blacklist){if(_0x204b1d[_0x2fabae(0x3e3)]==_0x23ef2f)return{'error':_0x2fabae(0x2b8)};}let _0x2c9b9c;try{_0x2c9b9c=jwt[_0x2fabae(0x2d0)](_0x23ef2f,secure[_0x2fabae(0x34f)]+_0x15d128);}catch{return{'error':_0x2fabae(0x333)};}if(!_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x3ca))&&!_0x2c9b9c['hasOwnProperty']('username')||!_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x23f)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x347))&&_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x3ca))){const {clientip:_0x5d7cec}=_0x2c9b9c;return _0x1779b4==_0x5d7cec?{'success':_0x2fabae(0x24f)}:{'error':_0x2fabae(0x1f2)};}else{if(_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x347))&&_0x2c9b9c[_0x2fabae(0x220)](_0x2fabae(0x3ca))){const {username:_0x38d205,clientip:_0x16a404}=_0x2c9b9c;return settings[_0x2fabae(0x30b)]==_0x38d205&&_0x1779b4==_0x16a404?{'success':_0x2fabae(0x24f)}:{'error':_0x2fabae(0x3d5)};}}},generateLoginToken=_0x358478=>{const _0x1900c0=_0x3a33c3;if(_0x358478){const _0x1a8a18=devices[_0x358478]['ip'];return jwt['sign']({'username':settings[_0x1900c0(0x30b)],'clientip':_0x1a8a18},secure[_0x1900c0(0x34f)]+_0x358478,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x416bb5=>{const _0x30ec0c=_0x3a33c3;if(_0x416bb5){const _0x3ced6c=devices[_0x416bb5]['ip'];return jwt[_0x30ec0c(0x2ce)]({'clientip':_0x3ced6c},secure['secret']+_0x416bb5,{'expiresIn':devices[_0x416bb5][_0x30ec0c(0x320)][_0x30ec0c(0x397)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xc3b4c=>{const _0x34ae2b=_0x3a33c3;let _0x7ed3bc=![];return devices[_0xc3b4c][_0x34ae2b(0x320)]&&devices[_0xc3b4c][_0x34ae2b(0x320)][_0x34ae2b(0x397)]!=_0x34ae2b(0x3de)&&(_0x7ed3bc=devices[_0xc3b4c][_0x34ae2b(0x320)][_0x34ae2b(0x3ca)]==devices[_0xc3b4c]['ip']&&new Date()[_0x34ae2b(0x3d2)]()-devices[_0xc3b4c]['telegramIpApproval'][_0x34ae2b(0x3c5)]<devices[_0xc3b4c]['telegramIpApproval'][_0x34ae2b(0x397)]*0x3c*0x3e8),_0x7ed3bc;},telegram2FaApproved=_0x1f6cef=>{const _0x595728=_0x3a33c3;let _0x4811dc=![];return devices[_0x1f6cef]['telegram2FaApproval']&&devices[_0x1f6cef]['telegram2FaApproval'][_0x595728(0x397)]!=_0x595728(0x3de)&&(_0x4811dc=devices[_0x1f6cef][_0x595728(0x36f)][_0x595728(0x3ca)]==devices[_0x1f6cef]['ip']&&new Date()[_0x595728(0x3d2)]()-devices[_0x1f6cef][_0x595728(0x36f)][_0x595728(0x3c5)]<devices[_0x1f6cef][_0x595728(0x36f)][_0x595728(0x397)]*0x3c*0x3e8),_0x4811dc;},normalizeIP=_0x3aa05f=>{const _0x4212bf=_0x3a33c3;let _0x520775=null,_0x77ad6d=null;if(ipaddr[_0x4212bf(0x2dc)](_0x3aa05f)){const _0xef171b=ipaddr['parse'](_0x3aa05f);_0xef171b[_0x4212bf(0x27e)]()==='ipv6'?(_0xef171b[_0x4212bf(0x256)]()&&(_0x520775=_0xef171b[_0x4212bf(0x35b)]()[_0x4212bf(0x1ed)]()),_0x77ad6d=_0xef171b[_0x4212bf(0x1ed)]()):(_0x520775=_0xef171b['toString'](),_0x77ad6d=_0xef171b[_0x4212bf(0x2f0)]()['toString']());}return{'show':_0x520775?_0x520775:_0x77ad6d,'store':_0x77ad6d};};function formatDate(_0x487466){const _0x18b632=_0x3a33c3;return _0x487466['getFullYear']()+'/'+(_0x487466[_0x18b632(0x245)]()+0x1)[_0x18b632(0x1ed)]()[_0x18b632(0x258)](0x2,'0')+'/'+_0x487466[_0x18b632(0x2a4)]()['toString']()[_0x18b632(0x258)](0x2,'0')+'\x20'+_0x487466[_0x18b632(0x2e9)]()['toString']()[_0x18b632(0x258)](0x2,'0')+':'+_0x487466[_0x18b632(0x275)]()[_0x18b632(0x1ed)]()[_0x18b632(0x258)](0x2,'0')+':'+_0x487466[_0x18b632(0x1ea)]()[_0x18b632(0x1ed)]()['padStart'](0x2,'0');}function sleep(_0x126ecb){return new Promise(_0x3554e8=>setTimeout(_0x3554e8,_0x126ecb));}