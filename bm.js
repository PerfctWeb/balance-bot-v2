const _0x126db1=_0x572a;(function(_0x158a07,_0x51cf22){const _0x3c592b=_0x572a,_0x28c456=_0x158a07();while(!![]){try{const _0x4ba474=parseInt(_0x3c592b(0x219))/0x1*(parseInt(_0x3c592b(0x261))/0x2)+-parseInt(_0x3c592b(0x2c3))/0x3*(-parseInt(_0x3c592b(0x224))/0x4)+parseInt(_0x3c592b(0x1d8))/0x5*(-parseInt(_0x3c592b(0x1fa))/0x6)+-parseInt(_0x3c592b(0x2fe))/0x7*(-parseInt(_0x3c592b(0x2fb))/0x8)+parseInt(_0x3c592b(0x287))/0x9*(parseInt(_0x3c592b(0x1da))/0xa)+-parseInt(_0x3c592b(0x226))/0xb*(-parseInt(_0x3c592b(0x220))/0xc)+parseInt(_0x3c592b(0x270))/0xd*(-parseInt(_0x3c592b(0x2ec))/0xe);if(_0x4ba474===_0x51cf22)break;else _0x28c456['push'](_0x28c456['shift']());}catch(_0x468f97){_0x28c456['push'](_0x28c456['shift']());}}}(_0xc02c,0x41850));const _0x2524d0=function(){let _0x2e27dc=!![];return function(_0x35f4f3,_0x1ac944){const _0x1b34b9=_0x2e27dc?function(){const _0x32258c=_0x572a;if(_0x1ac944){const _0x309cec=_0x1ac944[_0x32258c(0x20e)](_0x35f4f3,arguments);return _0x1ac944=null,_0x309cec;}}:function(){};return _0x2e27dc=![],_0x1b34b9;};}(),_0x58f558=_0x2524d0(this,function(){const _0x597bee=_0x572a;return _0x58f558['toString']()[_0x597bee(0x21c)](_0x597bee(0x258))[_0x597bee(0x259)]()['constructor'](_0x58f558)[_0x597bee(0x21c)](_0x597bee(0x258));});_0x58f558();'use strict';process['env'][_0x126db1(0x20b)]=0x1;const childProcess=require(_0x126db1(0x32e)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x126db1(0x1eb)),low=require(_0x126db1(0x1cb)),path=require(_0x126db1(0x267)),crypto=require(_0x126db1(0x2b8)),Crypt=require(_0x126db1(0x299))[_0x126db1(0x2d4)],RSA=require('hybrid-crypto-js')[_0x126db1(0x30f)],bcrypt=require(_0x126db1(0x1ee)),jwt=require(_0x126db1(0x24e)),{Analytics}=require(_0x126db1(0x2e3)),googleAnalyticsV3Plugin=require('@analytics/google-analytics-v3')[_0x126db1(0x25a)],googleAnalyticsPlugin=require(_0x126db1(0x237))[_0x126db1(0x25a)],ipaddr=require(_0x126db1(0x2f9)),argv=require(_0x126db1(0x28b))(process[_0x126db1(0x225)][_0x126db1(0x32f)](0x2))[_0x126db1(0x225)],PORT=argv[_0x126db1(0x31d)]||_0x126db1(0x2d7),pattern=/^[0-9]{2,4}$/;!pattern[_0x126db1(0x2db)](PORT)&&(console[_0x126db1(0x1e9)](_0x126db1(0x227)+PORT+_0x126db1(0x1cc)),process['exit'](0x1));const HOST=argv[_0x126db1(0x308)]||null,userID=argv['user']||'';let bbpath=_0x126db1(0x286),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x126db1(0x295),securefile=_0x126db1(0x269);let validInstallation=!![];!fs[_0x126db1(0x2e5)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x126db1(0x239)),configpath=userID?bbpath+_0x126db1(0x1d1)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x126db1(0x1f5);!fs[_0x126db1(0x2e5)](configpath)&&fs[_0x126db1(0x307)](configpath);!fs[_0x126db1(0x2e5)](configbackuppath)&&fs[_0x126db1(0x307)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x126db1(0x216)]({'settings':{'timeshift':0x0}})[_0x126db1(0x28d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x126db1(0x216)]({'secure':{},'blacklist':[]})[_0x126db1(0x28d)]();let crypt=new Crypt({'md':_0x126db1(0x315),'rsaStandard':_0x126db1(0x264)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];function _0x572a(_0x2473fd,_0x3f60b3){const _0x5b3e73=_0xc02c();return _0x572a=function(_0x58f558,_0x2524d0){_0x58f558=_0x58f558-0x1c7;let _0xc02c83=_0x5b3e73[_0x58f558];return _0xc02c83;},_0x572a(_0x2473fd,_0x3f60b3);}const serverversion=require('./'+bbpath2+'version.json')[_0x126db1(0x2a2)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x126db1(0x30b)),app=express(),http=require(_0x126db1(0x2ce))['createServer'](app);app[_0x126db1(0x298)](express[_0x126db1(0x2bf)](path[_0x126db1(0x1cf)](__dirname,bbpath2,_0x126db1(0x256)))),app[_0x126db1(0x298)](express['static'](path[_0x126db1(0x1cf)](__dirname,bbpath2,_0x126db1(0x1c7)))),app[_0x126db1(0x2c4)]('/',function(_0x1cad0a,_0x2e4b79){const _0x517be1=_0x126db1;_0x2e4b79[_0x517be1(0x30e)](path[_0x517be1(0x1cf)](__dirname,bbpath2,_0x517be1(0x256),'index.html'));}),app['get'](_0x126db1(0x252),function(_0x4366fd,_0x8e258b){const _0x2a9425=_0x126db1;_0x8e258b[_0x2a9425(0x30e)](path[_0x2a9425(0x1cf)](__dirname,bbpath2,_0x2a9425(0x1c7),_0x2a9425(0x279)));}),app[_0x126db1(0x2c4)](_0x126db1(0x2ee),(_0x583829,_0x34a9aa)=>{const _0x3f9ec5=_0x126db1;_0x34a9aa['sendFile'](path['join'](__dirname,bbpath2,_0x3f9ec5(0x1c7),'index.html'));}),app[_0x126db1(0x2c4)]('/:bot/performance',(_0x774969,_0x2fb6e5)=>{const _0x21d753=_0x126db1;_0x2fb6e5[_0x21d753(0x30e)](path['join'](__dirname,bbpath2,_0x21d753(0x1c7),_0x21d753(0x279)));}),app[_0x126db1(0x2c4)](_0x126db1(0x2a8),(_0x240e18,_0x38f97c)=>{const _0x4dba9f=_0x126db1;_0x38f97c['sendFile'](path[_0x4dba9f(0x1cf)](__dirname,bbpath2,_0x4dba9f(0x1c7),'index.html'));}),app[_0x126db1(0x2c4)](_0x126db1(0x207),(_0x224f15,_0x554c83)=>{const _0x83b5ac=_0x126db1;_0x554c83[_0x83b5ac(0x30e)](path[_0x83b5ac(0x1cf)](__dirname,bbpath2,_0x83b5ac(0x1c7),'index.html'));}),app[_0x126db1(0x2c4)]('/:bot/configuration',(_0x59e694,_0x433fa3)=>{const _0x20236c=_0x126db1;_0x433fa3['sendFile'](path['join'](__dirname,bbpath2,_0x20236c(0x1c7),_0x20236c(0x279)));}),app[_0x126db1(0x2c4)](_0x126db1(0x260),(_0x8b07a7,_0x26cc4a)=>{const _0x852d21=_0x126db1;_0x26cc4a[_0x852d21(0x30e)](path['join'](__dirname,bbpath2,_0x852d21(0x1c7),_0x852d21(0x279)));});if(HOST)http[_0x126db1(0x2da)](PORT,HOST);else http[_0x126db1(0x2da)](PORT);const io=require(_0x126db1(0x25d))(http,{}),analytics=Analytics({'app':_0x126db1(0x297),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x126db1(0x2f4)}),googleAnalyticsPlugin({'measurementIds':[_0x126db1(0x1ff)]})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x126db1(0x1f3)]&&settings[_0x126db1(0x1f3)]!=''&&settings[_0x126db1(0x2b0)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0xc4ca2e=_0x126db1;console[_0xc4ca2e(0x1e9)](''),console[_0xc4ca2e(0x1e9)](_0xc4ca2e(0x24f)),logging(_0xc4ca2e(0x1f8)+PORT),console[_0xc4ca2e(0x1e9)](_0xc4ca2e(0x24f));if(config['length']!=0x0)config[_0xc4ca2e(0x296)](_0x3c6c55=>{const _0x31c37c=_0xc4ca2e;if(_0x3c6c55['status']==_0x31c37c(0x324)||_0x3c6c55['status']==_0x31c37c(0x2e2))logging('starting\x20bot\x20|\x20Bot\x20'+_0x3c6c55[_0x31c37c(0x217)]+'\x20|\x20'+_0x3c6c55[_0x31c37c(0x311)]),startBot([_0x3c6c55[_0x31c37c(0x217)],userID],{'cwd':bbpath},function(_0x1fcf0f){if(_0x1fcf0f)logging(_0x1fcf0f);});else(_0x3c6c55[_0x31c37c(0x248)]=='disabled'||_0x3c6c55[_0x31c37c(0x248)]==_0x31c37c(0x2ca))&&logging(_0x31c37c(0x2a0)+_0x3c6c55['botID']+'\x20|\x20'+_0x3c6c55['botname']);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0xc4ca2e(0x1e9)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x5efd31=_0x126db1;io['on'](_0x5efd31(0x24c),_0x32dedc=>{const _0x53fe83=_0x5efd31;let _0x3b2700,_0x29ab9f,_0x44e63a,_0x2ee2c9,_0x239080;const _0x125a71=_0x32dedc['handshake'][_0x53fe83(0x2cd)][_0x53fe83(0x1d2)];_0x29ab9f=_0x125a71[_0x53fe83(0x2e1)](/bot[0-9]{3}/);if(_0x29ab9f)_0x44e63a=_0x29ab9f[0x0][_0x53fe83(0x2e1)](/[0-9]{3}/);if(_0x44e63a)_0x3b2700=_0x44e63a[0x0];else _0x3b2700=_0x53fe83(0x214);const _0x35e32f=_0x32dedc[_0x53fe83(0x238)][_0x53fe83(0x1db)][_0x53fe83(0x206)];if(!_0x35e32f)_0x32dedc[_0x53fe83(0x2a3)](_0x53fe83(0x248),{'publicKey':secure[_0x53fe83(0x249)]});else{_0x2ee2c9=timelyDecrypt(_0x35e32f,![]);if(!_0x2ee2c9)_0x32dedc[_0x53fe83(0x2a3)](_0x53fe83(0x248),{'publicKey':secure['publicKey']});else{_0x239080=normalizeIP(_0x32dedc[_0x53fe83(0x28e)][_0x53fe83(0x1e0)])[_0x53fe83(0x25b)];if(!devices[_0x2ee2c9])devices[_0x2ee2c9]={'uuid':_0x2ee2c9,'access':{'token':null}};devices[_0x2ee2c9]['ip']=_0x239080;const _0x2a26ef=addClient(_0x32dedc['id'],_0x2ee2c9,_0x3b2700);setAccess(_0x2a26ef),_0x32dedc['on'](_0x53fe83(0x25f),_0x38d374=>{const _0x51580a=_0x53fe83,_0x6844fb=timelyDecrypt(_0x38d374[_0x51580a(0x1d9)]);if(_0x6844fb){_0x38d374={'username':_0x38d374[_0x51580a(0x1d6)],'password':_0x6844fb},devices[_0x2ee2c9]['access']=validateCredentials(_0x38d374,_0x2ee2c9);if(devices[_0x2ee2c9][_0x51580a(0x2df)][_0x51580a(0x288)]==![]&&devices[_0x2ee2c9]['access']['reason']==_0x51580a(0x2cc))_0x32dedc[_0x51580a(0x2a3)](_0x51580a(0x248),{'access':devices[_0x2ee2c9]['access']}),loginAccess2FA(_0x2ee2c9,_0x239080);else{if(devices[_0x2ee2c9]['access'][_0x51580a(0x288)]==![]&&devices[_0x2ee2c9][_0x51580a(0x2df)][_0x51580a(0x2a7)]=='invalid\x20credentials')_0x32dedc[_0x51580a(0x2a3)](_0x51580a(0x248),{'access':devices[_0x2ee2c9][_0x51580a(0x2df)]});else devices[_0x2ee2c9][_0x51580a(0x2df)][_0x51580a(0x288)]&&devices[_0x2ee2c9][_0x51580a(0x2df)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2ee2c9)[_0x51580a(0x296)](_0x46baa5=>{setAccess(_0x46baa5);}),setTokenRefresh(_0x2ee2c9),setSessionTimeout(_0x51580a(0x25f),_0x2ee2c9));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x32dedc['on'](_0x53fe83(0x255),()=>{resetPassword();}),_0x32dedc['on'](_0x53fe83(0x2f5),_0x304633=>{removeClient(_0x32dedc['id']);});}}});}function initClient(_0x5dbb8d){const _0x26e81b=_0x126db1;if(_0x5dbb8d!=_0x26e81b(0x214)&&config[_0x26e81b(0x281)]!=''){if(pid[_0x5dbb8d])pid[_0x5dbb8d][_0x26e81b(0x236)]({'function':_0x26e81b(0x277),'args':null});}}function getSocket(_0xf631b8){const _0x434e7d=_0x126db1;return io[_0x434e7d(0x291)][_0x434e7d(0x291)][_0x434e7d(0x2c4)](_0xf631b8);}function setAccess(_0x126b95){const _0x5526b1=_0x126db1,_0x905e44=getSocket(_0x126b95['id']),_0x57b772=_0x126b95['uuid'],_0x1dec1c=_0x126b95[_0x5526b1(0x2b3)];devices[_0x57b772]['access']=validateAccess(devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x205)],_0x57b772),_0x905e44[_0x5526b1(0x1cf)](_0x57b772);if(devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x288)]){_0x905e44[_0x5526b1(0x1cf)](_0x1dec1c);if(_0x1dec1c==_0x5526b1(0x214))initializeSocketBotManager(_0x905e44);else initializeSocketBot(_0x905e44);initClient(_0x1dec1c);}devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x205)]&&devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x2a7)]==_0x5526b1(0x2ae)&&setSessionTimeout(_0x5526b1(0x1e8),_0x57b772),devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x205)]&&devices[_0x57b772][_0x5526b1(0x2df)][_0x5526b1(0x2a7)]==_0x5526b1(0x23b)&&setSessionTimeout(_0x5526b1(0x25f),_0x57b772),_0x905e44['emit']('status',{'status':_0x126b95[_0x5526b1(0x2dc)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x57b772][_0x5526b1(0x2df)],'externalip':devices[_0x57b772]['ip'],'publicKey':secure[_0x5526b1(0x249)],'validInstallation':validInstallation}),devices[_0x57b772]['access']['allow']==![]&&devices[_0x57b772][_0x5526b1(0x2df)]['reason']==_0x5526b1(0x1e1)&&temporaryAccess2FA(_0x57b772,devices[_0x57b772]['ip']);}function setSessionTimeout(_0x230208,_0x5e825e){const _0x2f9095=_0x126db1;let _0x4496e2;if(_0x230208==_0x2f9095(0x25f))_0x4496e2=loginExpiry*0x3c*0x3e8;else _0x4496e2=devices[_0x5e825e][_0x2f9095(0x245)][_0x2f9095(0x1d4)]*0x3c*0x3e8-(new Date()[_0x2f9095(0x329)]()-devices[_0x5e825e][_0x2f9095(0x245)][_0x2f9095(0x2cb)]);if(devices[_0x5e825e][_0x2f9095(0x27a)])clearTimeout(devices[_0x5e825e][_0x2f9095(0x27a)]);devices[_0x5e825e]['pidExpireLogin']=setTimeout(()=>{const _0x27a343=_0x2f9095;if(devices[_0x5e825e][_0x27a343(0x278)])clearTimeout(devices[_0x5e825e]['pidRefreshToken']);removeSocketListeners(_0x5e825e),addBlacklist(_0x5e825e),devices[_0x5e825e][_0x27a343(0x245)]=null,devices[_0x5e825e][_0x27a343(0x27c)]=null,devices[_0x5e825e][_0x27a343(0x2df)][_0x27a343(0x205)]=null,devices[_0x5e825e][_0x27a343(0x2df)]=validateAccess(devices[_0x5e825e][_0x27a343(0x2df)][_0x27a343(0x205)],_0x5e825e),!(devices[_0x5e825e][_0x27a343(0x2df)][_0x27a343(0x288)]&&devices[_0x5e825e]['access']['reason']==_0x27a343(0x305))&&(_0x230208==_0x27a343(0x25f)?io['to'](_0x5e825e)[_0x27a343(0x2a3)](_0x27a343(0x248),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x5e825e)['emit'](_0x27a343(0x248),{'access':{'allow':![],'reason':_0x27a343(0x22e),'token':null}})),devices[_0x5e825e][_0x27a343(0x2df)][_0x27a343(0x205)]=null;},_0x4496e2);}function setTokenRefresh(_0x3e7a65){const _0x519ba7=_0x126db1;if(devices[_0x3e7a65][_0x519ba7(0x278)])clearTimeout(devices[_0x3e7a65][_0x519ba7(0x278)]);devices[_0x3e7a65][_0x519ba7(0x278)]=setTimeout(()=>{const _0x8748d7=_0x519ba7;getClientsWithUuid(_0x3e7a65)[_0x8748d7(0x26f)]!=0x0?(devices[_0x3e7a65][_0x8748d7(0x2df)]=refreshToken(_0x3e7a65),io['to'](_0x3e7a65)[_0x8748d7(0x2a3)](_0x8748d7(0x248),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3e7a65][_0x8748d7(0x2df)],'externalip':devices[_0x3e7a65]['ip'],'publicKey':secure[_0x8748d7(0x249)],'validInstallation':validInstallation}),setTokenRefresh(_0x3e7a65)):clearTimeout(devices[_0x3e7a65][_0x8748d7(0x278)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x43ef9a){const _0x4e3d5b=_0x126db1,_0x5356dc=getClient(_0x43ef9a['id'])[_0x4e3d5b(0x2a1)];_0x43ef9a['emit'](_0x4e3d5b(0x29b),config),_0x43ef9a['emit'](_0x4e3d5b(0x21e),cleanSettings()),_0x43ef9a['on'](_0x4e3d5b(0x321),_0xea10c1=>{const _0x1d951c=_0x4e3d5b;if(validateAccess(_0xea10c1,_0x5356dc)[_0x1d951c(0x288)])addBot();else logging(_0x1d951c(0x213));}),_0x43ef9a['on'](_0x4e3d5b(0x274),(_0x2f49b7,_0x28be87)=>{const _0x1b8d99=_0x4e3d5b;if(validateAccess(_0x28be87,_0x5356dc)[_0x1b8d99(0x288)])toggleBot(_0x2f49b7[_0x1b8d99(0x217)],_0x2f49b7[_0x1b8d99(0x248)],_0x2f49b7[_0x1b8d99(0x1e3)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x43ef9a['on'](_0x4e3d5b(0x266),(_0xeef63a,_0x4f75f2)=>{const _0x6678a7=_0x4e3d5b;if(validateAccess(_0x4f75f2,_0x5356dc)['allow'])toggleBotMode(_0xeef63a);else logging(_0x6678a7(0x30a));}),_0x43ef9a['on'](_0x4e3d5b(0x265),(_0x284221,_0x4918f0)=>{const _0x592e8c=_0x4e3d5b;if(validateAccess(_0x4918f0,_0x5356dc)[_0x592e8c(0x288)])deleteBot(_0x284221);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x43ef9a['on'](_0x4e3d5b(0x1d7),(_0x194cc4,_0x101bb6)=>{const _0x9bedb5=_0x4e3d5b;if(validateAccess(_0x101bb6,_0x5356dc)['allow'])storeSettings(_0x194cc4,!![]);else logging(_0x9bedb5(0x26c));}),_0x43ef9a['on'](_0x4e3d5b(0x241),_0x45119a=>{const _0x5d3c53=_0x4e3d5b;if(validateAccess(_0x45119a,_0x5356dc)[_0x5d3c53(0x288)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x43ef9a['on'](_0x4e3d5b(0x289),_0x594c7c=>{const _0x5e1d82=_0x4e3d5b;if(validateAccess(_0x594c7c,_0x5356dc)[_0x5e1d82(0x288)]){if(devices[_0x5356dc][_0x5e1d82(0x278)])clearTimeout(devices[_0x5356dc][_0x5e1d82(0x278)]);if(devices[_0x5356dc][_0x5e1d82(0x27a)])clearTimeout(devices[_0x5356dc]['pidExpireLogin']);removeSocketListeners(getClient(_0x43ef9a['id'])[_0x5e1d82(0x2a1)]),addBlacklist(_0x5356dc),devices[_0x5356dc][_0x5e1d82(0x245)]=null,devices[_0x5356dc][_0x5e1d82(0x27c)]=null,devices[_0x5356dc][_0x5e1d82(0x2df)][_0x5e1d82(0x205)]=null,io['to'](getClient(_0x43ef9a['id'])[_0x5e1d82(0x2a1)])[_0x5e1d82(0x2a3)](_0x5e1d82(0x248),{'access':{'allow':![],'reason':_0x5e1d82(0x200),'token':null}});}else logging(_0x5e1d82(0x1df));});}function initializeSocketBot(_0x43ec02){const _0x23ea55=_0x126db1,_0x1aaa21=getClient(_0x43ec02['id'])[_0x23ea55(0x2b3)],_0x181210=getClient(_0x43ec02['id'])['uuid'];_0x43ec02['on'](_0x23ea55(0x27d),(_0x7b0766,_0xc71248)=>{const _0x4f3d6f=_0x23ea55;if(validateAccess(_0xc71248,_0x181210)['allow']){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x4f3d6f(0x236)]({'function':_0x4f3d6f(0x2c8),'args':_0x7b0766});}else logging(_0x4f3d6f(0x303));}),_0x43ec02['on'](_0x23ea55(0x23d),(_0x3754c1,_0x2d17b3)=>{const _0x399e92=_0x23ea55;if(validateAccess(_0x2d17b3,_0x181210)[_0x399e92(0x288)]){if(pid[_0x1aaa21])pid[_0x1aaa21]['send']({'function':_0x399e92(0x268),'args':_0x3754c1});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x43ec02['on'](_0x23ea55(0x2ed),(_0x3f2ba8,_0x1d05bd)=>{const _0x4d5911=_0x23ea55;if(validateAccess(_0x1d05bd,_0x181210)[_0x4d5911(0x288)]){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x4d5911(0x236)]({'function':'getPortfolio','args':_0x3f2ba8});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x43ec02['on'](_0x23ea55(0x30c),(_0x56d72a,_0x15db7b)=>{const _0x591cbb=_0x23ea55;if(validateAccess(_0x15db7b,_0x181210)[_0x591cbb(0x288)]){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x591cbb(0x236)]({'function':_0x591cbb(0x229),'args':_0x56d72a});}else logging(_0x591cbb(0x2d0));}),_0x43ec02['on'](_0x23ea55(0x23a),(_0x190b7b,_0x47dde9)=>{const _0x1a5622=_0x23ea55;if(validateAccess(_0x47dde9,_0x181210)[_0x1a5622(0x288)]){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x1a5622(0x236)]({'function':_0x1a5622(0x32a),'args':_0x190b7b});}else logging(_0x1a5622(0x304));}),_0x43ec02['on']('get-starting-balances',_0x45549a=>{const _0x592e95=_0x23ea55;if(validateAccess(_0x45549a,_0x181210)['allow']){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x592e95(0x236)]({'function':'getStartingBalances','args':null});}else logging(_0x592e95(0x309));}),_0x43ec02['on'](_0x23ea55(0x244),(_0x3f8c07,_0x2cd2e3)=>{const _0xa60684=_0x23ea55;if(validateAccess(_0x2cd2e3,_0x181210)['allow']){if(pid[_0x1aaa21])pid[_0x1aaa21][_0xa60684(0x236)]({'function':_0xa60684(0x257),'args':_0x3f8c07});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x43ec02['on']('cancel-loading',_0x41dc83=>{const _0x34841d=_0x23ea55;if(validateAccess(_0x41dc83,_0x181210)[_0x34841d(0x288)]){if(pid[_0x1aaa21])pid[_0x1aaa21][_0x34841d(0x236)]({'function':'cancelLoading','args':null});}else logging(_0x34841d(0x319));}),_0x43ec02['on'](_0x23ea55(0x289),_0x2074f7=>{const _0x31f1b0=_0x23ea55;if(validateAccess(_0x2074f7,_0x181210)[_0x31f1b0(0x288)]){if(devices[_0x181210]['pidRefreshToken'])clearTimeout(devices[_0x181210][_0x31f1b0(0x278)]);if(devices[_0x181210][_0x31f1b0(0x27a)])clearTimeout(devices[_0x181210][_0x31f1b0(0x27a)]);removeSocketListeners(getClient(_0x43ec02['id'])[_0x31f1b0(0x2a1)]),addBlacklist(_0x181210),devices[_0x181210][_0x31f1b0(0x245)]=null,devices[_0x181210][_0x31f1b0(0x27c)]=null,devices[_0x181210][_0x31f1b0(0x2df)][_0x31f1b0(0x205)]=null,io['to'](getClient(_0x43ec02['id'])['uuid'])[_0x31f1b0(0x2a3)](_0x31f1b0(0x248),{'access':{'allow':![],'reason':_0x31f1b0(0x200),'token':null}});}else logging(_0x31f1b0(0x1df));});}function removeSocketListeners(_0x4f063c){const _0x4e6013=_0x126db1;getClientsWithUuid(_0x4f063c)[_0x4e6013(0x296)](_0x3a67c4=>{const _0x382082=_0x4e6013;getSocket(_0x3a67c4['id'])[_0x382082(0x327)]();});}function cleanSettings(){const _0x4dc757=_0x126db1;let _0x138622=settings;return settings[_0x4dc757(0x1f3)]&&settings[_0x4dc757(0x1f3)]!=''&&(_0x138622={..._0x138622,'telegramToken':'************'}),settings[_0x4dc757(0x2d9)]&&settings[_0x4dc757(0x2d9)]!=''&&(_0x138622={..._0x138622,'bbPassword':'************'}),_0x138622;}function updateBB(){const _0x550e94=_0x126db1;installingUpdate=!![],config[_0x550e94(0x296)](_0x1dd2f0=>{const _0x56edb4=_0x550e94;restartBot(_0x1dd2f0[_0x56edb4(0x217)]);}),process[_0x550e94(0x236)]({'update':!![]},_0x59045b=>{});}function startBot(_0x4cccab,_0x39724c,_0x24c2e7){const _0x5cdb5a=_0x126db1;let _0x22a158=![];const _0x502d8f=_0x4cccab[0x0];_0x39724c={..._0x39724c,'stdio':[_0x5cdb5a(0x2d6),'inherit',_0x5cdb5a(0x2d6),_0x5cdb5a(0x21f)]},pid[_0x502d8f]=childProcess[_0x5cdb5a(0x2f2)](botfile,_0x4cccab,_0x39724c),pid[_0x502d8f]['on'](_0x5cdb5a(0x272),_0x482dd6=>{const _0x382915=_0x5cdb5a;switch(Object[_0x382915(0x2ab)](_0x482dd6)[0x0]){case _0x382915(0x311):updateBotName(_0x502d8f,_0x482dd6[_0x382915(0x311)]);break;case _0x382915(0x2b4):updateBotManager();break;case'status':updateStatus(_0x502d8f,_0x482dd6['status']);break;case _0x382915(0x1e3):updateLive(_0x502d8f,_0x482dd6[_0x382915(0x1e3)]);break;case _0x382915(0x201):updateLive(_0x502d8f,_0x482dd6['started']),io['to'](_0x502d8f)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x382915(0x1c9):_0x482dd6['stop']=='restart'&&restartBot(_0x502d8f);_0x482dd6['stop']=='kill'&&toggleBot(_0x502d8f,'disabled',_0x382915(0x28f));break;case _0x382915(0x30d):sendTelegram(_0x502d8f,_0x482dd6['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x482dd6[_0x382915(0x2fa)]);break;case _0x382915(0x2e6):io['to'](_0x502d8f)[_0x382915(0x2a3)](_0x482dd6[_0x382915(0x2e6)],_0x482dd6['args']);break;}}),pid[_0x502d8f]['on'](_0x5cdb5a(0x1ec),function(_0x18736f){if(_0x22a158)return;_0x22a158=!![],_0x24c2e7(_0x18736f);}),pid[_0x502d8f]['on'](_0x5cdb5a(0x23e),function(_0x1e3684){const _0x1a982d=_0x5cdb5a;if(installingUpdate)return;if(_0x22a158)return;_0x22a158=!![],_0x24c2e7(null);const _0x41c2da=dbConfig[_0x1a982d(0x2c4)](_0x1a982d(0x29b))[_0x1a982d(0x208)]({'botID':_0x502d8f})[_0x1a982d(0x246)]();_0x41c2da&&(_0x41c2da['status']==_0x1a982d(0x324)||_0x41c2da['status']==_0x1a982d(0x2e2))&&(updateLive(_0x502d8f,_0x1a982d(0x28f)),logging(_0x1a982d(0x218)+_0x502d8f),startBot([_0x502d8f,userID],{'cwd':bbpath},function(_0x1c432f){if(_0x1c432f)logging(_0x1c432f);}));});}function stopBot(_0x380143){const _0xee4c84=_0x126db1;getClientsWithBotID(_0x380143)['forEach'](_0x3afa17=>{getSocket(_0x3afa17['id'])['disconnect'](!![]),removeClient(_0x3afa17['id']);}),pid[_0x380143]&&(pid[_0x380143][_0xee4c84(0x2c5)](),pid[_0x380143]=null);}function restartBot(_0x5490a6){const _0x50a834=_0x126db1;if(pid[_0x5490a6])pid[_0x5490a6][_0x50a834(0x2c5)]();}function addBot(){const _0x8e1c1d=_0x126db1;let _0x3f4004;for(let _0x3f6c6b=0x1;_0x3f6c6b<0x3e9;_0x3f6c6b++){_0x3f4004=_0x3f6c6b[_0x8e1c1d(0x259)]()[_0x8e1c1d(0x21b)](0x3,'0');let _0x29d051=config[_0x8e1c1d(0x208)](_0x94be4=>_0x94be4[_0x8e1c1d(0x217)]==_0x3f4004);if(!_0x29d051)break;}if(_0x3f4004==='1000'){logging(_0x8e1c1d(0x26e));return;}logging(_0x8e1c1d(0x29e)+_0x3f4004),dbConfig[_0x8e1c1d(0x2c4)]('bots')[_0x8e1c1d(0x1cd)]({'botID':_0x3f4004,'botname':_0x8e1c1d(0x2ea)+_0x3f4004,'status':_0x8e1c1d(0x2e2),'live':''})[_0x8e1c1d(0x28d)](),startBot([_0x3f4004,userID],{'cwd':bbpath},function(_0x2c81b0){if(_0x2c81b0)logging(_0x2c81b0);}),config=getConfiguration(),io['to']('botmanager')[_0x8e1c1d(0x2a3)](_0x8e1c1d(0x29b),config);}function deleteBot(_0x5227b2){const _0x1ce18d=_0x126db1;getClientsWithBotID(_0x5227b2)[_0x1ce18d(0x296)](_0x5b53f4=>{getSocket(_0x5b53f4['id'])['disconnect'](!![]),removeClient(_0x5b53f4['id']);}),dbConfig[_0x1ce18d(0x2c4)]('bots')[_0x1ce18d(0x2a6)]({'botID':_0x5227b2})[_0x1ce18d(0x28d)](),logging(_0x1ce18d(0x250)+_0x5227b2),stopBot(_0x5227b2);try{fs[_0x1ce18d(0x21a)](path[_0x1ce18d(0x1cf)](configpath,_0x1ce18d(0x263)+_0x5227b2+_0x1ce18d(0x27b))),fs[_0x1ce18d(0x21a)](path[_0x1ce18d(0x1cf)](configpath,_0x1ce18d(0x263)+_0x5227b2+_0x1ce18d(0x1e4))),fs[_0x1ce18d(0x21a)](path[_0x1ce18d(0x1cf)](configpath,'bot-'+_0x5227b2+_0x1ce18d(0x251))),fs['unlinkSync'](path['join'](configpath,_0x1ce18d(0x263)+_0x5227b2+_0x1ce18d(0x2bb)));}catch(_0x33c7b0){if(_0x33c7b0)logging(_0x1ce18d(0x32b),_0x33c7b0);}config=getConfiguration(),io['to'](_0x1ce18d(0x214))[_0x1ce18d(0x2a3)](_0x1ce18d(0x29b),config);}function toggleBot(_0x2c1513,_0x54d682,_0x4960b1){const _0x565709=_0x126db1;dbConfig[_0x565709(0x2c4)](_0x565709(0x29b))[_0x565709(0x208)]({'botID':_0x2c1513})[_0x565709(0x221)]({'status':_0x54d682})[_0x565709(0x221)]({'live':_0x4960b1})[_0x565709(0x28d)]();if(_0x54d682==_0x565709(0x324)||_0x54d682==_0x565709(0x2e2))logging(_0x565709(0x1fe)+_0x2c1513),startBot([_0x2c1513,userID],{'cwd':bbpath},function(_0x498023){if(_0x498023)logging(_0x498023);});else(_0x54d682==_0x565709(0x2d8)||_0x54d682==_0x565709(0x2ca))&&(logging(_0x565709(0x232)+_0x2c1513),stopBot(_0x2c1513));config=getConfiguration(),io['to'](_0x565709(0x214))[_0x565709(0x2a3)](_0x565709(0x29b),config);}function toggleStatus(_0x56295d){const _0x5300ef=_0x126db1;let _0x1e5918=dbConfig[_0x5300ef(0x2c4)](_0x5300ef(0x29b))[_0x5300ef(0x208)]({'botID':_0x56295d})[_0x5300ef(0x246)](),_0x51c9e1;if(_0x1e5918[_0x5300ef(0x248)]===_0x5300ef(0x324))_0x51c9e1=_0x5300ef(0x2d8);else{if(_0x1e5918['status']===_0x5300ef(0x2e2))_0x51c9e1='new-disabled';else{if(_0x1e5918[_0x5300ef(0x248)]==='new-disabled')_0x51c9e1=_0x5300ef(0x2e2);else{if(_0x1e5918[_0x5300ef(0x248)]===_0x5300ef(0x2d8))_0x51c9e1='enabled';}}}return _0x51c9e1;}function updateStatus(_0x59837d,_0x304759){const _0x34c95d=_0x126db1;dbConfig[_0x34c95d(0x2c4)](_0x34c95d(0x29b))[_0x34c95d(0x208)]({'botID':_0x59837d})['assign']({'status':_0x304759})[_0x34c95d(0x28d)](),config=getConfiguration(),io['to'](_0x34c95d(0x214))[_0x34c95d(0x2a3)](_0x34c95d(0x29b),config);}function updateLive(_0x3eb794,_0x4d4fb4){const _0x22f908=_0x126db1;dbConfig['get'](_0x22f908(0x29b))[_0x22f908(0x208)]({'botID':_0x3eb794})['assign']({'live':_0x4d4fb4})['write'](),config=getConfiguration(),io['to'](_0x22f908(0x214))[_0x22f908(0x2a3)](_0x22f908(0x29b),config);}function updateBotName(_0x3e4fde,_0x16f468){const _0x43478b=_0x126db1;dbConfig[_0x43478b(0x2c4)](_0x43478b(0x29b))[_0x43478b(0x208)]({'botID':_0x3e4fde})['assign']({'botname':_0x16f468})['write'](),config=getConfiguration(),io['to'](_0x43478b(0x214))['emit'](_0x43478b(0x29b),config);}function updateBotManager(){const _0x513fea=_0x126db1;config=getConfiguration(),io['to'](_0x513fea(0x214))[_0x513fea(0x2a3)]('bots',config);}function toggleBotMode(_0x36db3e){const _0x4aa838=_0x126db1;if(pid[_0x36db3e])pid[_0x36db3e]['send']({'function':_0x4aa838(0x285),'args':null});else{const _0x566631=configpath+_0x4aa838(0x263)+_0x36db3e+'-config.json',_0x45154d=fs['readFileSync'](_0x566631),_0x5e596c=JSON[_0x4aa838(0x1e2)](_0x45154d),_0x5ce457=_0x5e596c[_0x4aa838(0x2b3)][0x0][_0x4aa838(0x209)];_0x5e596c['bot'][0x0][_0x4aa838(0x209)]=!_0x5ce457;const _0x495772=JSON[_0x4aa838(0x1f1)](_0x5e596c,null,0x2);fs[_0x4aa838(0x1f9)](_0x566631,_0x495772),config=getConfiguration(),io['to'](_0x4aa838(0x214))['emit'](_0x4aa838(0x29b),config);}}function telegramError(_0x38e029){const _0x1bf9c9=_0x126db1;console['log'](getTimeStamp()+_0x1bf9c9(0x247));}function validateTelegram(_0x32c7c1){const _0x260312=_0x126db1;if(_0x32c7c1[_0x260312(0x1d0)][_0x260312(0x1d6)]!=settings[_0x260312(0x2b0)]&&'@'+_0x32c7c1[_0x260312(0x1d0)][_0x260312(0x1d6)]!=settings[_0x260312(0x2b0)])return tgBot[_0x260312(0x31a)](_0x32c7c1[_0x260312(0x235)]['id'],_0x260312(0x28c),{'parse_mode':_0x260312(0x2b5)})[_0x260312(0x273)](_0x46318f=>{telegramError(_0x46318f);}),![];return!![];}async function initTelegram(){const _0x506e90=_0x126db1;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x1ed7e8=_0x506e90(0x306);_0x1ed7e8+='\x0a',_0x1ed7e8+=_0x506e90(0x202),_0x1ed7e8+=_0x506e90(0x1ca),_0x1ed7e8+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x1ed7e8+=_0x506e90(0x29d),_0x1ed7e8+='/on\x20-\x20start\x20bot(s)\x0a',_0x1ed7e8+=_0x506e90(0x240),_0x1ed7e8+=_0x506e90(0x2a9),_0x1ed7e8+='/names\x20-\x20show\x20bot\x20names\x0a',_0x1ed7e8+=_0x506e90(0x26d),_0x1ed7e8+=_0x506e90(0x2f6),_0x1ed7e8+=_0x506e90(0x22a);let _0x376372=_0x506e90(0x325);_0x376372+='\x0a',_0x376372+=_0x1ed7e8,tgBot[_0x506e90(0x2ff)](/\/start/,_0x2a8afa=>{const _0x5a80b5=_0x506e90;if(!validateTelegram(_0x2a8afa))return;if(settings[_0x5a80b5(0x1e5)]!=_0x2a8afa[_0x5a80b5(0x235)]['id'])updateSetting(_0x5a80b5(0x1e5),_0x2a8afa[_0x5a80b5(0x235)]['id']);updateSetting(_0x5a80b5(0x2ac),!![]),tgBot[_0x5a80b5(0x31a)](_0x2a8afa['chat']['id'],_0x376372)[_0x5a80b5(0x273)](_0x523022=>{telegramError(_0x523022);});}),tgBot[_0x506e90(0x2ff)](/\/enable/,_0x5ced20=>{const _0x586522=_0x506e90;if(!validateTelegram(_0x5ced20))return;if(settings['telegramChatId']!=_0x5ced20[_0x586522(0x235)]['id'])updateSetting(_0x586522(0x1e5),_0x5ced20[_0x586522(0x235)]['id']);updateSetting(_0x586522(0x2ac),!![]),tgBot[_0x586522(0x31a)](_0x5ced20['chat']['id'],_0x586522(0x2e8))[_0x586522(0x273)](_0x5ee93d=>{telegramError(_0x5ee93d);});}),tgBot[_0x506e90(0x2ff)](/\/config/,async _0x4bba05=>{const _0x13dafc=_0x506e90;if(!validateTelegram(_0x4bba05))return;tgBot[_0x13dafc(0x29c)]('callback_query'),tgBot[_0x13dafc(0x31a)](_0x4bba05['chat']['id'],_0x13dafc(0x2fc),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x13dafc(0x328)},{'text':_0x13dafc(0x1dd),'callback_data':_0x13dafc(0x310)},{'text':_0x13dafc(0x1f4),'callback_data':'all'}]]}})[_0x13dafc(0x273)](_0x4c52ec=>{telegramError(_0x4c52ec);}),tgBot['on']('callback_query',async _0x336ba2=>{const _0x4c4973=_0x13dafc,_0x534541=_0x336ba2[_0x4c4973(0x318)],_0x4c7133=_0x336ba2['message'];tgBot[_0x4c4973(0x275)](_0x336ba2['id'])['then'](async()=>{const _0x2b77ef=_0x4c4973;_0x534541==_0x2b77ef(0x328)&&(updateSetting(_0x2b77ef(0x280),_0x2b77ef(0x328)),updateSetting(_0x2b77ef(0x2ac),!![]),await tgBot[_0x2b77ef(0x31a)](_0x4c7133[_0x2b77ef(0x235)]['id'],_0x2b77ef(0x243))['catch'](_0x16cc49=>{telegramError(_0x16cc49);}));_0x534541==_0x2b77ef(0x310)&&(updateSetting('telegramEvents','alerts'),updateSetting(_0x2b77ef(0x2ac),!![]),await tgBot[_0x2b77ef(0x31a)](_0x4c7133['chat']['id'],_0x2b77ef(0x326))[_0x2b77ef(0x273)](_0x201590=>{telegramError(_0x201590);}));_0x534541==_0x2b77ef(0x24d)&&(updateSetting(_0x2b77ef(0x280),_0x2b77ef(0x24d)),updateSetting(_0x2b77ef(0x2ac),!![]),await tgBot[_0x2b77ef(0x31a)](_0x4c7133[_0x2b77ef(0x235)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x2b77ef(0x273)](_0x47e9b1=>{telegramError(_0x47e9b1);}));if(!settings[_0x2b77ef(0x1e5)])tgBot[_0x2b77ef(0x31a)](_0x4c7133['chat']['id'],_0x2b77ef(0x210))['catch'](_0xce8b5e=>{telegramError(_0xce8b5e);});}),tgBot[_0x4c4973(0x29c)](_0x4c4973(0x292));});}),tgBot['onText'](/\/status/,_0x342489=>{const _0x2f9bbb=_0x506e90;if(!validateTelegram(_0x342489))return;const _0x111c67=getBotsWithMode();let _0x3bc203='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x2f9bbb(0x296)](_0x5b72d9=>{const _0x9bf810=_0x2f9bbb,_0x502775=_0x111c67['find'](_0x20c17e=>_0x20c17e[_0x9bf810(0x217)]==_0x5b72d9[_0x9bf810(0x217)])[_0x9bf810(0x1de)];_0x3bc203+=_0x9bf810(0x2ea)+_0x5b72d9[_0x9bf810(0x217)]+':\x20'+_0x5b72d9[_0x9bf810(0x248)]+'\x20|\x20'+_0x502775+_0x9bf810(0x290)+_0x5b72d9[_0x9bf810(0x1e3)]+'\x0a';}),_0x3bc203+='\x0a',_0x3bc203+=_0x2f9bbb(0x228),_0x3bc203+=!settings[_0x2f9bbb(0x2ac)]?_0x2f9bbb(0x28a):_0x2f9bbb(0x23c),_0x3bc203+=settings['telegramEnabled']?settings[_0x2f9bbb(0x280)]=='all'?_0x2f9bbb(0x2cf):_0x2f9bbb(0x20d)+settings[_0x2f9bbb(0x280)]+_0x2f9bbb(0x2f7):'',tgBot[_0x2f9bbb(0x31a)](_0x342489[_0x2f9bbb(0x235)]['id'],_0x3bc203,{'parse_mode':'HTML'})[_0x2f9bbb(0x273)](_0x375ab9=>{telegramError(_0x375ab9);});}),tgBot[_0x506e90(0x2ff)](/\/restart/,_0x4127fe=>{const _0x57401d=_0x506e90;if(!validateTelegram(_0x4127fe))return;tgBot['removeListener']('callback_query');const _0x33723d=getEnabledBots();if(_0x33723d['length']==0x0)tgBot[_0x57401d(0x31a)](_0x4127fe['chat']['id'],_0x57401d(0x2c0))[_0x57401d(0x273)](_0x219106=>{telegramError(_0x219106);});else{if(_0x33723d[_0x57401d(0x26f)]>0x1)_0x33723d[_0x57401d(0x1cd)]({'botID':_0x57401d(0x24d)});let _0x5be69f=[],_0x49d184=[];const _0x1f7c08=_0x33723d[_0x57401d(0x26f)]%0x4==0x0||_0x33723d[_0x57401d(0x26f)]%0x4==0x3||_0x33723d[_0x57401d(0x26f)]%0x3==0x1?0x4:0x3;let _0x1aa7c5=0x0;_0x33723d[_0x57401d(0x296)]((_0x2e8f92,_0x57a2ba)=>{const _0x3867cb=_0x57401d;if(_0x57a2ba%_0x1f7c08==0x0)_0x49d184=[];_0x49d184[_0x3867cb(0x1cd)]({'text':_0x2e8f92['botID']==_0x3867cb(0x24d)?'All\x20bots':_0x3867cb(0x2ea)+_0x2e8f92[_0x3867cb(0x217)],'callback_data':_0x2e8f92[_0x3867cb(0x217)]}),_0x57a2ba%_0x1f7c08==0x0&&(_0x5be69f[_0x1aa7c5]=_0x49d184,_0x1aa7c5++);}),tgBot['sendMessage'](_0x4127fe[_0x57401d(0x235)]['id'],_0x57401d(0x1c8),{'reply_markup':{'inline_keyboard':_0x5be69f}})[_0x57401d(0x273)](_0x71460a=>{telegramError(_0x71460a);}),tgBot['on']('callback_query',async _0x4713e1=>{const _0x396ebc=_0x57401d,_0x1e864c=_0x4713e1[_0x396ebc(0x318)],_0x15a363=_0x4713e1[_0x396ebc(0x272)];tgBot[_0x396ebc(0x275)](_0x4713e1['id'])[_0x396ebc(0x2bd)](async()=>{const _0x169e5c=_0x396ebc;_0x1e864c==_0x169e5c(0x24d)?(tgBot[_0x169e5c(0x31a)](_0x15a363[_0x169e5c(0x235)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x169e5c(0x273)](_0x4dbdb7=>{telegramError(_0x4dbdb7);}),config[_0x169e5c(0x296)](_0x441576=>{const _0x161c91=_0x169e5c;restartBot(_0x441576[_0x161c91(0x217)]);})):(tgBot[_0x169e5c(0x31a)](_0x15a363['chat']['id'],_0x169e5c(0x223)+_0x1e864c)[_0x169e5c(0x273)](_0x3b02a4=>{telegramError(_0x3b02a4);}),restartBot(_0x1e864c));}),tgBot[_0x396ebc(0x29c)](_0x396ebc(0x292));});}}),tgBot['onText'](/\/on/,_0x534cc0=>{const _0x3174a8=_0x506e90;if(!validateTelegram(_0x534cc0))return;tgBot[_0x3174a8(0x29c)](_0x3174a8(0x292));const _0x1941e3=getDisabledBots();if(_0x1941e3['length']==0x0)tgBot[_0x3174a8(0x31a)](_0x534cc0[_0x3174a8(0x235)]['id'],_0x3174a8(0x254))[_0x3174a8(0x273)](_0x40673c=>{telegramError(_0x40673c);});else{if(_0x1941e3[_0x3174a8(0x26f)]>0x1)_0x1941e3[_0x3174a8(0x1cd)]({'botID':_0x3174a8(0x24d)});let _0x2a6798=[],_0x2c02b6=[];const _0x1cc50b=_0x1941e3[_0x3174a8(0x26f)]%0x4==0x0||_0x1941e3[_0x3174a8(0x26f)]%0x4==0x3||_0x1941e3[_0x3174a8(0x26f)]%0x3==0x1?0x4:0x3;let _0xaaf92d=0x0;_0x1941e3[_0x3174a8(0x296)]((_0x3fab98,_0x407a29)=>{const _0x5d9af1=_0x3174a8;if(_0x407a29%_0x1cc50b==0x0)_0x2c02b6=[];_0x2c02b6['push']({'text':_0x3fab98['botID']=='all'?_0x5d9af1(0x20a):_0x5d9af1(0x2ea)+_0x3fab98['botID'],'callback_data':_0x3fab98[_0x5d9af1(0x217)]}),_0x407a29%_0x1cc50b==0x0&&(_0x2a6798[_0xaaf92d]=_0x2c02b6,_0xaaf92d++);}),tgBot['sendMessage'](_0x534cc0[_0x3174a8(0x235)]['id'],_0x3174a8(0x29f),{'reply_markup':{'inline_keyboard':_0x2a6798}})[_0x3174a8(0x273)](_0x4a5016=>{telegramError(_0x4a5016);}),tgBot['on'](_0x3174a8(0x292),async _0x1d2dbb=>{const _0x3af530=_0x3174a8,_0x240825=_0x1d2dbb[_0x3af530(0x318)],_0x45f8ba=_0x1d2dbb[_0x3af530(0x272)];tgBot['answerCallbackQuery'](_0x1d2dbb['id'])['then'](async()=>{const _0x3f9375=_0x3af530;_0x240825=='all'?(tgBot[_0x3f9375(0x31a)](_0x45f8ba[_0x3f9375(0x235)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x3f9375(0x273)](_0x5d436d=>{telegramError(_0x5d436d);}),_0x1941e3[_0x3f9375(0x296)](_0x64ab19=>{const _0x14727f=_0x3f9375;if(_0x64ab19[_0x14727f(0x217)]!='all')toggleBot(_0x64ab19[_0x14727f(0x217)],toggleStatus(_0x64ab19[_0x14727f(0x217)]),'stopped');})):(tgBot[_0x3f9375(0x31a)](_0x45f8ba[_0x3f9375(0x235)]['id'],_0x3f9375(0x2c2)+_0x240825)[_0x3f9375(0x273)](_0x542c2a=>{telegramError(_0x542c2a);}),toggleBot(_0x240825,toggleStatus(_0x240825),_0x3f9375(0x28f)));}),tgBot['removeListener'](_0x3af530(0x292));});}}),tgBot[_0x506e90(0x2ff)](/\/off/,_0x53c4c1=>{const _0x5ea518=_0x506e90;if(!validateTelegram(_0x53c4c1))return;tgBot['removeListener'](_0x5ea518(0x292));const _0x24b4c9=getEnabledBots();if(_0x24b4c9[_0x5ea518(0x26f)]==0x0)tgBot[_0x5ea518(0x31a)](_0x53c4c1['chat']['id'],_0x5ea518(0x2c0))[_0x5ea518(0x273)](_0x28937d=>{telegramError(_0x28937d);});else{if(_0x24b4c9[_0x5ea518(0x26f)]>0x1)_0x24b4c9[_0x5ea518(0x1cd)]({'botID':_0x5ea518(0x24d)});let _0x53b075=[],_0x3836b9=[];const _0x4c4566=_0x24b4c9['length']%0x4==0x0||_0x24b4c9[_0x5ea518(0x26f)]%0x4==0x3||_0x24b4c9[_0x5ea518(0x26f)]%0x3==0x1?0x4:0x3;let _0xd87e75=0x0;_0x24b4c9['forEach']((_0x1f40d6,_0x3bc420)=>{const _0x28ca8e=_0x5ea518;if(_0x3bc420%_0x4c4566==0x0)_0x3836b9=[];_0x3836b9[_0x28ca8e(0x1cd)]({'text':_0x1f40d6[_0x28ca8e(0x217)]=='all'?_0x28ca8e(0x20a):_0x28ca8e(0x2ea)+_0x1f40d6[_0x28ca8e(0x217)],'callback_data':_0x1f40d6[_0x28ca8e(0x217)]}),_0x3bc420%_0x4c4566==0x0&&(_0x53b075[_0xd87e75]=_0x3836b9,_0xd87e75++);}),tgBot[_0x5ea518(0x31a)](_0x53c4c1[_0x5ea518(0x235)]['id'],_0x5ea518(0x29a),{'reply_markup':{'inline_keyboard':_0x53b075}})[_0x5ea518(0x273)](_0x43da70=>{telegramError(_0x43da70);}),tgBot['on'](_0x5ea518(0x292),async _0x4443b6=>{const _0x41a077=_0x5ea518,_0x4cbdb7=_0x4443b6['data'],_0x102ec6=_0x4443b6[_0x41a077(0x272)];tgBot[_0x41a077(0x275)](_0x4443b6['id'])['then'](async()=>{const _0x2f03fd=_0x41a077;_0x4cbdb7==_0x2f03fd(0x24d)?(tgBot[_0x2f03fd(0x31a)](_0x102ec6[_0x2f03fd(0x235)]['id'],_0x2f03fd(0x31e))[_0x2f03fd(0x273)](_0x48a988=>{telegramError(_0x48a988);}),_0x24b4c9[_0x2f03fd(0x296)](_0x15a480=>{const _0x5cf20c=_0x2f03fd;if(_0x15a480[_0x5cf20c(0x217)]!='all')toggleBot(_0x15a480['botID'],toggleStatus(_0x15a480[_0x5cf20c(0x217)]),_0x5cf20c(0x28f));})):(tgBot[_0x2f03fd(0x31a)](_0x102ec6['chat']['id'],_0x2f03fd(0x21d)+_0x4cbdb7)['catch'](_0x534552=>{telegramError(_0x534552);}),toggleBot(_0x4cbdb7,toggleStatus(_0x4cbdb7),_0x2f03fd(0x28f)));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0x408e38=>{const _0x362781=_0x506e90;if(!validateTelegram(_0x408e38))return;tgBot['removeListener'](_0x362781(0x292));const _0x3798f5=getEnabledBots();if(_0x3798f5[_0x362781(0x26f)]==0x0)tgBot[_0x362781(0x31a)](_0x408e38[_0x362781(0x235)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x362781(0x273)](_0x1964f0=>{telegramError(_0x1964f0);});else{if(_0x3798f5[_0x362781(0x26f)]>0x1){let _0x1d250c=[],_0x37c8eb=[];const _0x24f2de=_0x3798f5[_0x362781(0x26f)]%0x4==0x0||_0x3798f5['length']%0x4==0x3||_0x3798f5['length']%0x3==0x1?0x4:0x3;let _0x1d3d24=0x0;_0x3798f5[_0x362781(0x296)]((_0x2b2f5c,_0x116cae)=>{const _0x536ea3=_0x362781;if(_0x116cae%_0x24f2de==0x0)_0x37c8eb=[];_0x37c8eb[_0x536ea3(0x1cd)]({'text':_0x536ea3(0x2ea)+_0x2b2f5c[_0x536ea3(0x217)],'callback_data':_0x2b2f5c['botID']}),_0x116cae%_0x24f2de==0x0&&(_0x1d250c[_0x1d3d24]=_0x37c8eb,_0x1d3d24++);}),tgBot[_0x362781(0x31a)](_0x408e38[_0x362781(0x235)]['id'],_0x362781(0x1fb),{'reply_markup':{'inline_keyboard':_0x1d250c}})[_0x362781(0x273)](_0x4ef600=>{telegramError(_0x4ef600);}),tgBot['on'](_0x362781(0x292),async _0x1e52f9=>{const _0x5c0259=_0x362781,_0xce9e74=_0x1e52f9[_0x5c0259(0x318)],_0x2ecf4c=_0x1e52f9[_0x5c0259(0x272)];tgBot['answerCallbackQuery'](_0x1e52f9['id'])[_0x5c0259(0x2bd)](async()=>{const _0x4714de=_0x5c0259;if(pid[_0xce9e74])pid[_0xce9e74][_0x4714de(0x236)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x5c0259(0x29c)](_0x5c0259(0x292));});}else{const _0x34f4fd=_0x3798f5[0x0]['botID'];if(pid[_0x34f4fd])pid[_0x34f4fd]['send']({'function':_0x362781(0x2b6),'args':null});}}}),tgBot[_0x506e90(0x2ff)](/\/toggle/,_0x5462cd=>{const _0x53e352=_0x506e90;if(!validateTelegram(_0x5462cd))return;tgBot['removeListener']('callback_query');const _0x11ade9=getBotsWithMode();if(_0x11ade9['length']==0x0)tgBot[_0x53e352(0x31a)](_0x5462cd['chat']['id'],_0x53e352(0x2c0))[_0x53e352(0x273)](_0x2e9fe5=>{telegramError(_0x2e9fe5);});else{let _0x256905=[],_0x3d9aea=[];const _0x29064d=0x2;let _0x2bb623=0x0;_0x11ade9[_0x53e352(0x296)]((_0xd1de3,_0x265631)=>{const _0x5edf28=_0x53e352;if(_0x265631%_0x29064d==0x0)_0x3d9aea=[];_0x3d9aea[_0x5edf28(0x1cd)]({'text':_0x5edf28(0x2ea)+_0xd1de3[_0x5edf28(0x217)]+'\x20('+_0xd1de3[_0x5edf28(0x1de)]+')','callback_data':_0xd1de3['botID']}),_0x265631%_0x29064d==0x0&&(_0x256905[_0x2bb623]=_0x3d9aea,_0x2bb623++);}),tgBot[_0x53e352(0x31a)](_0x5462cd[_0x53e352(0x235)]['id'],_0x53e352(0x1ea),{'reply_markup':{'inline_keyboard':_0x256905}})[_0x53e352(0x273)](_0x408b05=>{telegramError(_0x408b05);}),tgBot['on'](_0x53e352(0x292),async _0x28525d=>{const _0x5cb221=_0x53e352,_0x48fe2d=_0x28525d[_0x5cb221(0x318)],_0x34a85d=_0x28525d[_0x5cb221(0x272)];tgBot[_0x5cb221(0x275)](_0x28525d['id'])['then'](async()=>{const _0x4dd1ae=_0x5cb221,_0x40634c=_0x11ade9['find'](_0x960d4a=>_0x960d4a[_0x4dd1ae(0x217)]==_0x48fe2d),_0x4dc130=_0x40634c['mode']==_0x4dd1ae(0x2b1)?'manual':'auto';tgBot[_0x4dd1ae(0x31a)](_0x34a85d[_0x4dd1ae(0x235)]['id'],_0x4dd1ae(0x301)+_0x48fe2d+'\x20to\x20'+_0x4dc130+_0x4dd1ae(0x271))[_0x4dd1ae(0x273)](_0x2f386=>{telegramError(_0x2f386);}),toggleBotMode(_0x48fe2d);}),tgBot['removeListener'](_0x5cb221(0x292));});}}),tgBot[_0x506e90(0x2ff)](/\/names/,_0x47bd98=>{const _0x21534c=_0x506e90;if(!validateTelegram(_0x47bd98))return;let _0x5d631e='';config[_0x21534c(0x296)](_0x45d92a=>{const _0x14dbdb=_0x21534c;_0x5d631e+=_0x14dbdb(0x2ea)+_0x45d92a[_0x14dbdb(0x217)]+':\x20'+_0x45d92a[_0x14dbdb(0x311)]+'\x0a';}),tgBot[_0x21534c(0x31a)](_0x47bd98[_0x21534c(0x235)]['id'],_0x5d631e,{'parse_mode':_0x21534c(0x2b5)})[_0x21534c(0x273)](_0x247129=>{telegramError(_0x247129);});}),tgBot[_0x506e90(0x2ff)](/\/disable/,_0x4725ec=>{const _0x11b74d=_0x506e90;if(!validateTelegram(_0x4725ec))return;tgBot[_0x11b74d(0x31a)](_0x4725ec[_0x11b74d(0x235)]['id'],_0x11b74d(0x26b))[_0x11b74d(0x273)](_0xc1bcd6=>{telegramError(_0xc1bcd6);}),updateSetting(_0x11b74d(0x2ac),![]);}),tgBot['onText'](/\/help/,_0x53f6ce=>{const _0x18bfa9=_0x506e90;if(!validateTelegram(_0x53f6ce))return;tgBot[_0x18bfa9(0x31a)](_0x53f6ce[_0x18bfa9(0x235)]['id'],_0x1ed7e8)[_0x18bfa9(0x273)](_0x264202=>{telegramError(_0x264202);});}),tgBot['on'](_0x506e90(0x316),_0x269933=>{const _0x2e2c89=_0x506e90;_0x269933['toString']()[_0x2e2c89(0x1ce)](_0x2e2c89(0x22c))&&(logging(_0x2e2c89(0x2fd)),tgBot[_0x2e2c89(0x234)](),tgBot=null,io['to']('botmanager')['emit'](_0x2e2c89(0x1d5),'Invalid\x20Telegram\x20token'));}),process['once'](_0x506e90(0x2c7),()=>{const _0x35fb48=_0x506e90;if(tgBot)tgBot[_0x35fb48(0x234)]();process[_0x35fb48(0x23e)](0x1);}),process[_0x506e90(0x1f6)](_0x506e90(0x320),()=>{const _0x285094=_0x506e90;if(tgBot)tgBot[_0x285094(0x234)]();process[_0x285094(0x23e)](0x1);});}}function disableTelegram(){const _0xad74c9=_0x126db1;tgBot&&(tgBot[_0xad74c9(0x234)](),tgBot=null);}function sendTelegram(_0x10ea33,_0x264542){const _0x371e56=_0x126db1;if(settings[_0x371e56(0x2ac)]){if(settings[_0x371e56(0x280)]==_0x371e56(0x24d)||(_0x264542[_0x371e56(0x314)]==_0x371e56(0x1ec)||_0x264542[_0x371e56(0x314)]=='success')&&settings['telegramEvents']==_0x371e56(0x310)||_0x264542[_0x371e56(0x314)]=='order'&&settings[_0x371e56(0x280)]==_0x371e56(0x328)){if(tgBot&&settings[_0x371e56(0x1e5)]){if(_0x264542[_0x371e56(0x2e4)])tgBot[_0x371e56(0x31a)](settings[_0x371e56(0x1e5)],_0x264542[_0x371e56(0x311)]+'\x20>\x20'+_0x264542[_0x371e56(0x294)])[_0x371e56(0x273)](_0x500ab6=>{telegramError(_0x500ab6);});else tgBot['sendMessage'](settings['telegramChatId'],_0x371e56(0x2ea)+_0x10ea33+_0x371e56(0x317)+_0x264542['event'])[_0x371e56(0x273)](_0x521620=>{telegramError(_0x521620);});}}}}function sendTelegramMsg(_0x4ad0f6){const _0x2b8b91=_0x126db1;settings[_0x2b8b91(0x2ac)]&&(tgBot&&settings['telegramChatId']&&tgBot[_0x2b8b91(0x31a)](settings[_0x2b8b91(0x1e5)],_0x4ad0f6,{'parse_mode':_0x2b8b91(0x2b5)})['catch'](_0x48fcb4=>{telegramError(_0x48fcb4);}));}function getDeviceWithIp(_0x67fc77){const _0x1b8b1f=_0x126db1;return devices[_0x1b8b1f(0x208)](_0x41ab99=>_0x41ab99['ip']===_0x67fc77);}function temporaryAccess2FA(_0x2226ca,_0x41e09e){const _0xddb801=_0x126db1;let _0x437aba=new Date(),_0x4321ee=![];if(lastIpApproval){if(_0x437aba-lastIpApproval<0x1388)_0x4321ee=!![];}lastIpApproval=new Date();if(_0x4321ee)return;tgBot&&settings[_0xddb801(0x1e5)]&&(tgBot['removeListener'](_0xddb801(0x292)),tgBot[_0xddb801(0x31a)](settings[_0xddb801(0x1e5)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x41e09e)[_0xddb801(0x242)]+'</b>\x20?',{'parse_mode':_0xddb801(0x2b5),'reply_markup':{'inline_keyboard':[[{'text':_0xddb801(0x2f3),'callback_data':'5'},{'text':_0xddb801(0x2a4),'callback_data':'15'},{'text':_0xddb801(0x203),'callback_data':'30'},{'text':_0xddb801(0x2e0),'callback_data':'reject'}]]}})['catch'](_0x509d1c=>{telegramError(_0x509d1c);}),tgBot['on']('callback_query',async _0x2db5e5=>{const _0x264852=_0xddb801,_0x49daf5=_0x2db5e5[_0x264852(0x318)],_0x5684d0=_0x2db5e5['message'];tgBot[_0x264852(0x275)](_0x2db5e5['id'])[_0x264852(0x2bd)](async()=>{const _0x22fe99=_0x264852;devices[_0x2226ca][_0x22fe99(0x245)]={'clientip':_0x41e09e,'timestamp':new Date()[_0x22fe99(0x329)](),'expiry':_0x49daf5},_0x49daf5!='reject'?(await tgBot['sendMessage'](_0x5684d0['chat']['id'],_0x22fe99(0x323)+_0x49daf5+_0x22fe99(0x2d2),{'parse_mode':_0x22fe99(0x2b5)})[_0x22fe99(0x273)](_0x7164b4=>{telegramError(_0x7164b4);}),io['to'](_0x2226ca)[_0x22fe99(0x2a3)](_0x22fe99(0x248),{'access':{'allow':![],'reason':_0x22fe99(0x26a),'token':null}})):(await tgBot[_0x22fe99(0x31a)](_0x5684d0[_0x22fe99(0x235)]['id'],_0x22fe99(0x1fc))['catch'](_0x37a629=>{telegramError(_0x37a629);}),io['to'](_0x2226ca)[_0x22fe99(0x2a3)](_0x22fe99(0x248),{'access':{'allow':![],'reason':_0x22fe99(0x300),'token':null}}));}),tgBot[_0x264852(0x29c)](_0x264852(0x292));}));}function loginAccess2FA(_0xbf8207,_0x526d82){const _0x335ec0=_0x126db1;tgBot&&settings[_0x335ec0(0x1e5)]&&(tgBot[_0x335ec0(0x29c)]('callback_query'),tgBot['sendMessage'](settings[_0x335ec0(0x1e5)],_0x335ec0(0x2dd)+normalizeIP(_0x526d82)[_0x335ec0(0x242)]+'</b>\x20?',{'parse_mode':_0x335ec0(0x2b5),'reply_markup':{'inline_keyboard':[[{'text':_0x335ec0(0x1ef),'callback_data':loginExpiry},{'text':_0x335ec0(0x2e0),'callback_data':_0x335ec0(0x2e0)}]]}})[_0x335ec0(0x273)](_0x14b8ce=>{telegramError(_0x14b8ce);}),tgBot['on'](_0x335ec0(0x292),async _0x1e854b=>{const _0x23b0a7=_0x335ec0,_0xb2550a=_0x1e854b[_0x23b0a7(0x318)],_0x4c2370=_0x1e854b['message'];tgBot[_0x23b0a7(0x275)](_0x1e854b['id'])[_0x23b0a7(0x2bd)](async()=>{const _0x22aa46=_0x23b0a7;devices[_0xbf8207][_0x22aa46(0x27c)]={'clientip':_0x526d82,'timestamp':new Date()[_0x22aa46(0x329)](),'expiry':_0xb2550a},_0xb2550a!=_0x22aa46(0x2e0)?(await tgBot[_0x22aa46(0x31a)](_0x4c2370['chat']['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0x22aa46(0x273)](_0x1bd347=>{telegramError(_0x1bd347);}),io['to'](_0xbf8207)[_0x22aa46(0x2a3)](_0x22aa46(0x248),{'access':{'allow':![],'reason':_0x22aa46(0x26a),'token':null}})):(await tgBot[_0x22aa46(0x31a)](_0x4c2370[_0x22aa46(0x235)]['id'],_0x22aa46(0x1dc))['catch'](_0x14d0be=>{telegramError(_0x14d0be);}),io['to'](_0xbf8207)['emit'](_0x22aa46(0x248),{'access':{'allow':![],'reason':_0x22aa46(0x2e7),'token':null}}));}),tgBot[_0x23b0a7(0x29c)](_0x23b0a7(0x292));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x6b5257=_0x126db1;return dbConfig[_0x6b5257(0x2c4)](_0x6b5257(0x29b))['sortBy'](_0x6b5257(0x217))[_0x6b5257(0x2f1)]({'status':_0x6b5257(0x324)})[_0x6b5257(0x246)]()||[];}function getDisabledBots(){const _0x537f83=_0x126db1;return dbConfig[_0x537f83(0x2c4)]('bots')[_0x537f83(0x2ef)](_0x537f83(0x217))[_0x537f83(0x2f1)]({'status':_0x537f83(0x2d8)})[_0x537f83(0x246)]()||[];}function getBotsWithMode(){const _0x29e768=_0x126db1,_0x5bc67f=dbConfig[_0x29e768(0x2c4)]('bots')[_0x29e768(0x2ef)](_0x29e768(0x217))[_0x29e768(0x246)]()||[];return _0x5bc67f[_0x29e768(0x296)](_0x38b69e=>{const _0x3f5e86=_0x29e768,_0x41a80b=configpath+_0x3f5e86(0x263)+_0x38b69e[_0x3f5e86(0x217)]+'-config.json',_0x156242=fs[_0x3f5e86(0x2e5)](_0x41a80b);if(_0x156242){const _0xa8c173=fs[_0x3f5e86(0x2b2)](_0x41a80b);try{const _0x41ff3d=JSON['parse'](_0xa8c173),_0xafb7ae=_0x41ff3d?_0x41ff3d[_0x3f5e86(0x2b3)][0x0][_0x3f5e86(0x209)]:![];_0x38b69e[_0x3f5e86(0x1de)]=_0xafb7ae?_0x3f5e86(0x2b1):_0x3f5e86(0x284);}catch(_0x267426){_0x38b69e['mode']=_0x3f5e86(0x284);}}else _0x38b69e[_0x3f5e86(0x1de)]=_0x3f5e86(0x284);}),_0x5bc67f;}function getSettings(){const _0x59cdf2=_0x126db1;return dbSettings[_0x59cdf2(0x2c4)]('settings')[_0x59cdf2(0x246)]()||{'timeshift':0x0};}function getSecure(){const _0x30a9b3=_0x126db1;return dbSecure[_0x30a9b3(0x2c4)](_0x30a9b3(0x2af))['value']()||{};}function getBlacklist(){const _0x3f541a=_0x126db1;return dbSecure[_0x3f541a(0x2c4)](_0x3f541a(0x262))[_0x3f541a(0x246)]()||[];}function broadcastToBots(_0x217c75,_0x3e4cae){config['forEach'](_0xb2b9cc=>{const _0x4c9e59=_0x572a;if(_0xb2b9cc[_0x4c9e59(0x248)]==_0x4c9e59(0x324)&&_0xb2b9cc[_0x4c9e59(0x1e3)]=='running'){if(pid[_0xb2b9cc['botID']])pid[_0xb2b9cc[_0x4c9e59(0x217)]][_0x4c9e59(0x236)]({[_0x217c75]:_0x3e4cae});}});}function storeSettings(_0x3a639d,_0x47f136=![]){const _0x49c858=_0x126db1;_0x3a639d={...settings,..._0x3a639d};if(_0x47f136&&_0x3a639d[_0x49c858(0x2d9)]!=_0x49c858(0x2de)&&_0x3a639d[_0x49c858(0x2d9)]!=''){const _0x30cc71=crypt[_0x49c858(0x2a5)](secure['privateKey'],_0x3a639d[_0x49c858(0x2d9)])['message'][_0x49c858(0x1e7)]('@')[0x0],_0x35e971=bcrypt[_0x49c858(0x330)](_0x30cc71,saltRounds);_0x3a639d={..._0x3a639d,'bbPassword':_0x35e971};}if(_0x47f136&&_0x3a639d[_0x49c858(0x1f3)]!=_0x49c858(0x2de)&&_0x3a639d['telegramToken']!=''){const _0x3bc7b4=crypt[_0x49c858(0x2a5)](secure['privateKey'],_0x3a639d[_0x49c858(0x1f3)])[_0x49c858(0x272)][_0x49c858(0x1e7)]('@')[0x0];_0x3a639d={..._0x3a639d,'telegramToken':_0x3bc7b4};}const _0x325b83=_0x3a639d['telegramToken']!=_0x49c858(0x2de)&&_0x3a639d[_0x49c858(0x1f3)]!=settings[_0x49c858(0x1f3)]||_0x3a639d[_0x49c858(0x2b0)]!=settings[_0x49c858(0x2b0)],_0x342a17=_0x3a639d['telegramToken']==''||_0x3a639d[_0x49c858(0x2b0)]=='';if(_0x325b83)_0x3a639d[_0x49c858(0x280)]=_0x49c858(0x24d);for(const [_0x4d0f1e,_0x4de925]of Object[_0x49c858(0x1f0)](_0x3a639d)){if(_0x4d0f1e==_0x49c858(0x1f3)&&_0x4de925==_0x49c858(0x2de)){_0x3a639d[_0x49c858(0x1f3)]=settings[_0x49c858(0x1f3)];continue;};if(_0x4d0f1e==_0x49c858(0x2d9)&&_0x4de925==_0x49c858(0x2de)){_0x3a639d[_0x49c858(0x2d9)]=settings[_0x49c858(0x2d9)];continue;};dbSettings[_0x49c858(0x20f)]('settings.'+_0x4d0f1e,_0x4de925)[_0x49c858(0x28d)]();}settings=_0x3a639d,io['to'](_0x49c858(0x214))[_0x49c858(0x2a3)](_0x49c858(0x21e),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x325b83&&!_0x342a17)initTelegram();if(_0x325b83&&_0x342a17)disableTelegram();getAllClients()[_0x49c858(0x296)](_0x48a845=>{const _0x2d7907=_0x49c858;getSocket(_0x48a845['id'])[_0x2d7907(0x2a3)]('status',{'access':{'allow':![],'reason':_0x2d7907(0x26a),'token':null}});});}function updateSetting(_0x58ac35,_0x335753){const _0x3889fb=_0x126db1;dbSettings['set'](_0x3889fb(0x1f2)+_0x58ac35,_0x335753)[_0x3889fb(0x28d)](),settings=getSettings(),io['to']('botmanager')[_0x3889fb(0x2a3)](_0x3889fb(0x21e),cleanSettings());}function storeSecure(_0x2e758f){const _0x54e469=_0x126db1;dbSecure['get']('secure')['push'](_0x2e758f)[_0x54e469(0x28d)](),secure=_0x2e758f;}function addBlacklist(_0x4fe37){const _0x1ab4f6=_0x126db1;cleanBlacklist();let _0x4782b8;devices[_0x4fe37][_0x1ab4f6(0x245)]?_0x4782b8=Math[_0x1ab4f6(0x2b9)](devices[_0x4fe37][_0x1ab4f6(0x245)]['expiry'],loginExpiry):_0x4782b8=loginExpiry,dbSecure[_0x1ab4f6(0x2c4)](_0x1ab4f6(0x262))[_0x1ab4f6(0x1cd)]({'expiry':new Date()[_0x1ab4f6(0x329)]()+_0x4782b8*0x3c*0x3e8,'token':devices[_0x4fe37]['access'][_0x1ab4f6(0x205)]})[_0x1ab4f6(0x28d)](),blacklist=dbSecure[_0x1ab4f6(0x2c4)](_0x1ab4f6(0x262))[_0x1ab4f6(0x246)]();}function cleanBlacklist(){const _0x265267=_0x126db1;let _0x8a458=dbSecure['get'](_0x265267(0x262))[_0x265267(0x24b)]()[_0x265267(0x246)](),_0x45ed39=new Date()[_0x265267(0x329)]();_0x8a458[_0x265267(0x296)](_0x4d599e=>{const _0x1ed01a=_0x265267;_0x4d599e[_0x1ed01a(0x1d4)]<_0x45ed39&&dbSecure[_0x1ed01a(0x2c4)]('blacklist')[_0x1ed01a(0x2a6)]({'expiry':_0x4d599e['expiry']})['write']();});}function initStates(){let _0x3e44c7=getConfiguration();_0x3e44c7['forEach'](_0x456b44=>{const _0x1840ba=_0x572a;_0x456b44[_0x1840ba(0x1e3)]=_0x1840ba(0x28f);}),storeConfiguration(_0x3e44c7);}function onKeys(){const _0x1af2dc=new RSA();return new Promise(_0x1bb811=>{const _0x2142e5=_0x572a;_0x1af2dc[_0x2142e5(0x31c)]()['then'](_0x15dd21=>{_0x1bb811(_0x15dd21);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1c193e=_0x126db1;let _0x3e8b55=getConfiguration(),_0x3202f7=![];_0x3e8b55[_0x1c193e(0x296)](_0x1ca5d4=>{const _0x5d3011=_0x1c193e;if(_0x1ca5d4[_0x5d3011(0x248)]==_0x5d3011(0x1fd))_0x1ca5d4['status']=_0x5d3011(0x324),_0x3202f7=!![];else _0x1ca5d4[_0x5d3011(0x248)]==_0x5d3011(0x28f)&&(_0x1ca5d4[_0x5d3011(0x248)]=_0x5d3011(0x2d8),_0x3202f7=!![]);});if(_0x3202f7)storeConfiguration(_0x3e8b55);let _0x46e713=getSecure();if(!_0x46e713['hasOwnProperty']('secret')){let _0x2f95f7=await generateKeys();_0x46e713['publicKey']=_0x2f95f7[_0x1c193e(0x249)],_0x46e713[_0x1c193e(0x2aa)]=_0x2f95f7[_0x1c193e(0x2aa)],_0x46e713['secret']=crypto['randomBytes'](0x20)[_0x1c193e(0x259)](_0x1c193e(0x25e));;storeSecure(_0x46e713);}let _0x5ebd93=getSettings();_0x3202f7=![];!_0x5ebd93['hasOwnProperty'](_0x1c193e(0x2ba))&&(_0x5ebd93[_0x1c193e(0x2ba)]=![],_0x5ebd93[_0x1c193e(0x22b)]='',_0x5ebd93['bbPassword']='',_0x5ebd93[_0x1c193e(0x2f8)]=![],_0x3202f7=!![]);!_0x5ebd93[_0x1c193e(0x276)](_0x1c193e(0x27f))&&(_0x5ebd93[_0x1c193e(0x27f)]=![],_0x5ebd93['whitelist']=[],_0x5ebd93[_0x1c193e(0x282)]=![],_0x3202f7=!![]);if(!_0x5ebd93[_0x1c193e(0x276)](_0x1c193e(0x2ac))){if(_0x5ebd93[_0x1c193e(0x1e5)])_0x5ebd93[_0x1c193e(0x2ac)]=!![];else _0x5ebd93['telegramEnabled']=![];_0x3202f7=!![];}if(_0x3202f7)storeSettings(_0x5ebd93);}function storeConfiguration(_0x95d40c){const _0x2f28c2=_0x126db1;dbConfig[_0x2f28c2(0x2c4)](_0x2f28c2(0x29b))[_0x2f28c2(0x2a6)]()[_0x2f28c2(0x28d)](),_0x95d40c[_0x2f28c2(0x296)](_0x42d212=>{const _0x2c8ff8=_0x2f28c2;delete _0x42d212[_0x2c8ff8(0x1de)];}),dbConfig['get'](_0x2f28c2(0x29b))[_0x2f28c2(0x1cd)](..._0x95d40c)[_0x2f28c2(0x28d)](),config=_0x95d40c;}function resetPassword(){const _0x576414=_0x126db1;tgBot&&settings[_0x576414(0x1e5)]&&(tgBot[_0x576414(0x29c)](_0x576414(0x292)),tgBot['sendMessage'](settings[_0x576414(0x1e5)],_0x576414(0x233),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x576414(0x20c),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x576414(0x273)](_0x1d2dfd=>{telegramError(_0x1d2dfd);}),tgBot['on'](_0x576414(0x292),async _0x119f23=>{const _0xa45332=_0x576414,_0x44d622=_0x119f23[_0xa45332(0x318)],_0x367da1=_0x119f23[_0xa45332(0x272)];tgBot[_0xa45332(0x275)](_0x119f23['id'])['then'](async()=>{const _0x382f11=_0xa45332;if(_0x44d622!='no'){const _0x393598=0xf,_0x405333=_0x382f11(0x293),_0x1c9e39=Array[_0x382f11(0x1d0)](crypto['randomFillSync'](new Uint32Array(_0x393598)))[_0x382f11(0x2c6)](_0x377fa5=>_0x405333[_0x377fa5%_0x405333['length']])[_0x382f11(0x1cf)](''),_0x351647=bcrypt['hashSync'](_0x1c9e39,saltRounds);storeSettings({'bbPassword':_0x351647}),await tgBot[_0x382f11(0x31a)](_0x367da1[_0x382f11(0x235)]['id'],_0x382f11(0x1d3)+_0x1c9e39,{'parse_mode':'HTML'})[_0x382f11(0x273)](_0x464305=>{telegramError(_0x464305);});}else await tgBot[_0x382f11(0x31a)](_0x367da1[_0x382f11(0x235)]['id'],_0x382f11(0x1e6))[_0x382f11(0x273)](_0x32a16b=>{telegramError(_0x32a16b);});}),tgBot[_0xa45332(0x29c)](_0xa45332(0x292));}));}function logging(_0x2dc58e){const _0x27bdbd=_0x126db1;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2dc58e);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!='orders')tgBot[_0x27bdbd(0x31a)](settings[_0x27bdbd(0x1e5)],_0x27bdbd(0x204)+_0x2dc58e)['catch'](_0x121365=>{telegramError(_0x121365);});}function getServerTime(){const _0x4b7352=_0x126db1,_0x28fec4=new Date();return _0x28fec4[_0x4b7352(0x2c9)]()+'/'+(_0x28fec4['getMonth']()+0x1)[_0x4b7352(0x259)]()['padStart'](0x2,'0')+'/'+_0x28fec4[_0x4b7352(0x22d)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x28fec4[_0x4b7352(0x31f)]()['toString']()[_0x4b7352(0x21b)](0x2,'0')+':'+_0x28fec4['getMinutes']()[_0x4b7352(0x259)]()[_0x4b7352(0x21b)](0x2,'0')+':'+_0x28fec4[_0x4b7352(0x1ed)]()[_0x4b7352(0x259)]()[_0x4b7352(0x21b)](0x2,'0');}function getTimeStamp(){const _0x36e85d=_0x126db1,_0x528302=shiftedTime();return _0x528302[_0x36e85d(0x2c9)]()+'/'+(_0x528302[_0x36e85d(0x24a)]()+0x1)[_0x36e85d(0x259)]()['padStart'](0x2,'0')+'/'+_0x528302[_0x36e85d(0x22d)]()[_0x36e85d(0x259)]()['padStart'](0x2,'0')+'\x20'+_0x528302[_0x36e85d(0x31f)]()[_0x36e85d(0x259)]()[_0x36e85d(0x21b)](0x2,'0')+':'+_0x528302[_0x36e85d(0x32c)]()['toString']()[_0x36e85d(0x21b)](0x2,'0')+':'+_0x528302[_0x36e85d(0x1ed)]()[_0x36e85d(0x259)]()[_0x36e85d(0x21b)](0x2,'0');}function shiftedTime(){const _0x7512b1=_0x126db1,_0x596173=new Date();let _0x309e14=_0x596173;if(settings['timeshift']&&settings[_0x7512b1(0x2f0)]!==0x0)_0x309e14=fns[_0x7512b1(0x27e)](_0x596173,{'hours':settings['timeshift']});return _0x309e14;}function startScheduler(){const _0x3a7187=_0x126db1;let _0x2ee2f3=new Date()[_0x3a7187(0x1f7)]();_0x2ee2f3==0x1&&backupConfigFiles();_0x2ee2f3==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x29b9ea=_0x126db1;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x29b9ea(0x296)](_0x470941=>{const _0x18e790=_0x29b9ea;if(!_0x470941[_0x18e790(0x312)]())fs['copyFileSync'](configpath+_0x470941['name'],configbackuppath+_0x470941[_0x18e790(0x2b7)]);});}function triggerAnalytics(){const _0x32d529=_0x126db1;analytics[_0x32d529(0x2d1)]({'title':_0x32d529(0x2d5),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x4d7680,_0x2a9486){const _0x554f6a=_0x126db1;if(_0x4d7680[_0x554f6a(0x1d6)]==settings[_0x554f6a(0x22b)]&&bcrypt['compareSync'](_0x4d7680[_0x554f6a(0x1d9)],settings[_0x554f6a(0x2d9)])){if(settings[_0x554f6a(0x2f8)])return{'allow':![],'reason':_0x554f6a(0x2cc),'token':null};else{const _0x579e19=generateLoginToken(_0x2a9486);return{'allow':!![],'reason':_0x554f6a(0x23f),'token':_0x579e19};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function _0xc02c(){const _0x3b0ec6=['stopPolling','chat','send','@analytics/google-analytics','handshake','clients','store-headless','2FA\x20login\x20token\x20generated','Notifications\x20enabled\x0a','delete-alerts','exit','login\x20token\x20generated','/off\x20-\x20stop\x20bot(s)\x0a','update-bb','show','Ok,\x20will\x20send\x20order\x20notifications\x20only','place-order','telegramIpApproval','value',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','status','publicKey','getMonth','cloneDeep','connection','all','jsonwebtoken','-----------------------------------------------------------------------------------','deleted\x20Bot\x20','-performance.json','/:bot','isIPv4MappedAddress','All\x20bots\x20running\x20right\x20now','reset-password','build2','placeOrder','(((.+)+)+)+$','toString','default','store','verify','socket.io','hex','login','/:bot/support','190OqDtzq','blacklist','bot-','RSA-OAEP','delete-bot','toggle-bot-mode','path','deleteHistoryAlerts','bb-secure.json','reload','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20update\x20settings','/status\x20-\x20show\x20bot(s)\x20status\x0a','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','length','13imFfVc','\x20mode','message','catch','update-bot','answerCallbackQuery','hasOwnProperty','initclient','pidRefreshToken','index.html','pidExpireLogin','-config.json','telegram2FaApproval','get-logs','add','whitelistEnabled','telegramEvents','apiKey','temporaryAccessAllowed','Invalid\x20authentication\x20token\x20(2)','manual','toggleBotMode','bb/','9GOeAOq','allow','logout','Notifications\x20disabled\x0a','yargs/yargs','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','write','conn','stopped','\x20|\x20','sockets','callback_query','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','event','bb-settings.json','forEach','Balance\x20Bot','use','hybrid-crypto-js','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','bots','removeListener','/restart\x20-\x20restart\x20bot(s)\x0a','starting\x20new\x20bot\x20|\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','idling\x20bot\x20\x20\x20|\x20Bot\x20','uuid','version','emit','15\x20min','decrypt','remove','reason','/:bot/coins','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','privateKey','keys','telegramEnabled','No\x20authentication\x20token','temporary\x20token\x20generated','secure','telegramUsername','auto','readFileSync','bot','updatebotmanager','HTML','sendPortfolioTelegram','name','crypto','max','loginRequired','-results.json','exp','then','secret','static','No\x20bots\x20running\x20right\x20now','Invalid\x20authentication\x20token\x20(1)','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','8979xcEIpK','get','kill','map','SIGINT','emitHistory','getFullYear','new-disabled','timestamp','2FA\x20login\x20required','headers','http','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Unauthorized\x20attempt\x20to\x20store\x20configuration','page','\x20minutes','login\x20required','Crypt','Balance\x20Bot\x20Server','inherit','3000','disabled','bbPassword','listen','test','server','Allow\x20login\x20from\x20IP\x20address\x20<b>','************','access','reject','match','new','analytics','showname','existsSync','function','2FA\x20login\x20rejected','Notifications\x20enabled','toIPv4MappedAddress','Bot\x20','whitelist','9043706iAbVaD','get-portfolio','/:bot/portfolio','sortBy','timeshift','filter','fork','5\x20min','UA-192771731-1','disconnect','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','\x20only\x0a','f2aRequired','ipaddr.js','telegrammsg','218200TIOSmN','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Invalid\x20Telegram\x20token','112enzINa','onText','temporary\x20access\x20rejected','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','temporary\x20access\x20not\x20allowed','Unauthorized\x20attempt\x20to\x20get\x20logs','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','login\x20not\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','mkdirSync','host','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20update\x20bot','express','store-configuration','telegram','sendFile','RSA','alerts','botname','isDirectory','success','type','sha256','polling_error','\x20>\x20','data','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','sendMessage','login\x20token\x20valid','generateKeyPairAsync','port','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','getHours','SIGTERM','add-bot','toIPv4Address','Access\x20enabled\x20for\x20','enabled','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Ok,\x20will\x20send\x20alert\x20notifications\x20only','removeAllListeners','orders','getTime','storeHeadless','error\x20while\x20deleting\x20config\x20files:\x20','getMinutes','kind','child_process','slice','hashSync','build','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','stop','/disable\x20-\x20disable\x20notifications\x0a','lowdb',',\x20must\x20be\x20a\x204\x20digit\x20number','push','includes','join','from','config/','referer','Password\x20has\x20been\x20reset\x20to:\x20','expiry','notification','username','store-settings','45EItabW','password','1572370XfLNPQ','auth','Login\x20rejected','Alerts','mode','Unauthorized\x20attempt\x20to\x20log\x20out','remoteAddress','2FA\x20required','parse','live','-events.json','telegramChatId','Password\x20reset\x20rejected','split','2FA','log','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','date-fns','error','getSeconds','bcryptjs','accept','entries','stringify','settings.','telegramToken','All','backup/','once','getUTCHours','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','writeFileSync','89004IKfMND','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Temporary\x20access\x20rejected','running','enabled\x20Bot\x20','G-1KEE5V4K7S','logged\x20out','started','/enable\x20-\x20enable\x20notifications\x0a','30\x20min','Bot\x20Mgr\x20>\x20','token','encryptedUuid','/:bot/history','find','headless','All\x20bots','NTBA_FIX_319','yes','Notifications\x20types:\x20','apply','set','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','sign','Token\x20blacklisted','Unauthorized\x20attempt\x20to\x20add\x20bot','botmanager','Invalid\x20IP\x20address','defaults','botID','restarting\x20Bot\x20','2445YeKOsX','unlinkSync','padStart','search','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','settings','ipc','192dGNkpd','assign','::1','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','212KwxJOx','argv','43527IZKTfr','Error:\x20Invalid\x20argument\x20','<b>Telegram\x20Bot\x20Status:</b>\x0a','storeConfiguration','/help\x20-\x20show\x20available\x20commands\x0a','bbUsername','404\x20Not\x20Found','getDate','temporary\x20access\x20timeout','Invalid\x20username\x20or\x20IP\x20address','::ffff:127.0.0.1','clientip','disabled\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?'];_0xc02c=function(){return _0x3b0ec6;};return _0xc02c();}function refreshToken(_0x219ef8){const _0x2d0e5b=_0x126db1,_0x55d81e=generateLoginToken(_0x219ef8);return{'allow':!![],'reason':_0x2d0e5b(0x23f),'token':_0x55d81e};}function validateAccess(_0x48a300,_0x17c940){const _0xe03be3=_0x126db1;let _0x8dcfd6=devices[_0x17c940]['ip'],_0x220681;const _0x353f85=_0x5202c7=>{const _0x236094=_0x572a;if(settings[_0x236094(0x2ba)]){if(settings[_0x236094(0x2f8)]){if(telegram2FaApproved(_0x17c940)){const _0x36bdc0=generateLoginToken(_0x17c940);return{'allow':!![],'reason':_0x236094(0x23b),'token':_0x36bdc0};}else return{'allow':![],'reason':_0x236094(0x2d3),'token':null};}else return _0x220681=validToken(_0x5202c7,_0x17c940),_0x220681[_0x236094(0x276)](_0x236094(0x313))?{'allow':!![],'reason':_0x236094(0x31b),'token':_0x5202c7}:{'allow':![],'reason':_0x236094(0x2d3),'token':null};}else return{'allow':!![],'reason':_0x236094(0x305),'token':null};};if(settings[_0xe03be3(0x27f)]){let _0xfe94af=[...settings[_0xe03be3(0x2eb)],_0xe03be3(0x222),_0xe03be3(0x230),'127.0.0.1'];if(_0xfe94af[_0xe03be3(0x1ce)](_0x8dcfd6))return _0x353f85(_0x48a300);else{_0x220681=validToken(_0x48a300,_0x17c940);if(_0x220681['hasOwnProperty']('success'))return _0x353f85(_0x48a300);else{if(telegramIpApproved(_0x17c940)){const _0x477a66=generateToken(_0x17c940);return _0x220681=_0x353f85(_0x48a300),_0x220681[_0xe03be3(0x288)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x477a66}:_0x220681;}else return settings[_0xe03be3(0x282)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0xe03be3(0x302),'token':null};}}}else return _0x353f85(_0x48a300);}function timelyDecrypt(_0x5137aa,_0x59d505=!![]){const _0x412c69=_0x126db1;if(_0x5137aa)try{const _0x252286=crypt[_0x412c69(0x2a5)](secure[_0x412c69(0x2aa)],_0x5137aa)[_0x412c69(0x272)],_0x2195d2=_0x252286[_0x412c69(0x1e7)]('@')[0x0],_0x2e1c0a=_0x252286[_0x412c69(0x1e7)]('@')[0x1],_0x2f2def=new Date()[_0x412c69(0x329)]();if(_0x59d505){if(_0x2f2def-_0x2e1c0a<maxSecretAge*0x3e8)return _0x2195d2;else return![];}else return _0x2195d2;}catch(_0x511a54){return![];}else return![];}const validToken=(_0x129cf0,_0xee437d)=>{const _0x1e6f4e=_0x126db1,_0x5d6d39=devices[_0xee437d]['ip'];if(!_0x129cf0)return{'error':_0x1e6f4e(0x2ad)};for(let _0x541c6d of blacklist){if(_0x541c6d['token']==_0x129cf0)return{'error':_0x1e6f4e(0x212)};}let _0x1ac701;try{_0x1ac701=jwt[_0x1e6f4e(0x25c)](_0x129cf0,secure[_0x1e6f4e(0x2be)]+_0xee437d);}catch{return{'error':_0x1e6f4e(0x2c1)};}if(!_0x1ac701['hasOwnProperty'](_0x1e6f4e(0x231))&&!_0x1ac701['hasOwnProperty'](_0x1e6f4e(0x1d6))||!_0x1ac701[_0x1e6f4e(0x276)](_0x1e6f4e(0x2bc)))return{'error':_0x1e6f4e(0x283)};if(!_0x1ac701[_0x1e6f4e(0x276)]('username')&&_0x1ac701[_0x1e6f4e(0x276)](_0x1e6f4e(0x231))){const {clientip:_0x48d541}=_0x1ac701;return _0x5d6d39==_0x48d541?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1e6f4e(0x215)};}else{if(_0x1ac701[_0x1e6f4e(0x276)]('username')&&_0x1ac701[_0x1e6f4e(0x276)]('clientip')){const {username:_0x3eaf37,clientip:_0x2e5714}=_0x1ac701;return settings[_0x1e6f4e(0x22b)]==_0x3eaf37&&_0x5d6d39==_0x2e5714?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1e6f4e(0x22f)};}}},generateLoginToken=_0x5e32e2=>{const _0x220299=_0x126db1;if(_0x5e32e2){const _0x52b6f9=devices[_0x5e32e2]['ip'];return jwt[_0x220299(0x211)]({'username':settings[_0x220299(0x22b)],'clientip':_0x52b6f9},secure[_0x220299(0x2be)]+_0x5e32e2,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x10329c=>{const _0x232d8c=_0x126db1;if(_0x10329c){const _0x17a6ea=devices[_0x10329c]['ip'];return jwt[_0x232d8c(0x211)]({'clientip':_0x17a6ea},secure[_0x232d8c(0x2be)]+_0x10329c,{'expiresIn':devices[_0x10329c]['telegramIpApproval'][_0x232d8c(0x1d4)]*0x3c});}else return![];},telegramIpApproved=_0x5dcdf9=>{const _0x575be0=_0x126db1;let _0x3c4383=![];return devices[_0x5dcdf9][_0x575be0(0x245)]&&devices[_0x5dcdf9][_0x575be0(0x245)][_0x575be0(0x1d4)]!=_0x575be0(0x2e0)&&(_0x3c4383=devices[_0x5dcdf9][_0x575be0(0x245)][_0x575be0(0x231)]==devices[_0x5dcdf9]['ip']&&new Date()[_0x575be0(0x329)]()-devices[_0x5dcdf9]['telegramIpApproval'][_0x575be0(0x2cb)]<devices[_0x5dcdf9][_0x575be0(0x245)][_0x575be0(0x1d4)]*0x3c*0x3e8),_0x3c4383;},telegram2FaApproved=_0x4f2e1c=>{const _0x226f2f=_0x126db1;let _0x3e5311=![];return devices[_0x4f2e1c]['telegram2FaApproval']&&devices[_0x4f2e1c][_0x226f2f(0x27c)][_0x226f2f(0x1d4)]!=_0x226f2f(0x2e0)&&(_0x3e5311=devices[_0x4f2e1c][_0x226f2f(0x27c)][_0x226f2f(0x231)]==devices[_0x4f2e1c]['ip']&&new Date()[_0x226f2f(0x329)]()-devices[_0x4f2e1c]['telegram2FaApproval'][_0x226f2f(0x2cb)]<devices[_0x4f2e1c]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x3e5311;},normalizeIP=_0x8705b4=>{const _0x445b0f=_0x126db1;let _0x24a16d=null,_0x4332b1=null;if(ipaddr['isValid'](_0x8705b4)){const _0x36aedb=ipaddr[_0x445b0f(0x1e2)](_0x8705b4);_0x36aedb[_0x445b0f(0x32d)]()==='ipv6'?(_0x36aedb[_0x445b0f(0x253)]()&&(_0x24a16d=_0x36aedb[_0x445b0f(0x322)]()[_0x445b0f(0x259)]()),_0x4332b1=_0x36aedb[_0x445b0f(0x259)]()):(_0x24a16d=_0x36aedb['toString'](),_0x4332b1=_0x36aedb[_0x445b0f(0x2e9)]()[_0x445b0f(0x259)]());}return{'show':_0x24a16d?_0x24a16d:_0x4332b1,'store':_0x4332b1};};