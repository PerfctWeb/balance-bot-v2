const _0x53cc86=_0x2cab;(function(_0x1e1a6d,_0x1b9296){const _0x25530e=_0x2cab,_0x21acab=_0x1e1a6d();while(!![]){try{const _0xdfd0e6=parseInt(_0x25530e(0x7c))/0x1+-parseInt(_0x25530e(0x183))/0x2+parseInt(_0x25530e(0x141))/0x3*(parseInt(_0x25530e(0x117))/0x4)+parseInt(_0x25530e(0xa6))/0x5*(parseInt(_0x25530e(0x109))/0x6)+-parseInt(_0x25530e(0x16c))/0x7+parseInt(_0x25530e(0x113))/0x8+-parseInt(_0x25530e(0x1e4))/0x9;if(_0xdfd0e6===_0x1b9296)break;else _0x21acab['push'](_0x21acab['shift']());}catch(_0x4bbccd){_0x21acab['push'](_0x21acab['shift']());}}}(_0x3a4b,0x46c41));const _0x18aba9=function(){let _0xfc6db0=!![];return function(_0x3f23f6,_0x35c31f){const _0x449d88=_0xfc6db0?function(){const _0x31eeb5=_0x2cab;if(_0x35c31f){const _0xa7aac2=_0x35c31f[_0x31eeb5(0x12a)](_0x3f23f6,arguments);return _0x35c31f=null,_0xa7aac2;}}:function(){};return _0xfc6db0=![],_0x449d88;};}(),_0x4263a7=_0x18aba9(this,function(){const _0x324799=_0x2cab;return _0x4263a7['toString']()[_0x324799(0xfe)](_0x324799(0xaa))[_0x324799(0x1e6)]()[_0x324799(0x13a)](_0x4263a7)[_0x324799(0xfe)]('(((.+)+)+)+$');});_0x4263a7();'use strict';process[_0x53cc86(0x20e)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x53cc86(0x145)),fs=require('fs'),fns=require(_0x53cc86(0x171)),low=require(_0x53cc86(0xbb)),FileSync=require(_0x53cc86(0x18b)),path=require(_0x53cc86(0x22b)),crypto=require('crypto'),Crypt=require(_0x53cc86(0x15e))[_0x53cc86(0x7f)],RSA=require(_0x53cc86(0x15e))[_0x53cc86(0xd2)],bcrypt=require(_0x53cc86(0x111)),jwt=require(_0x53cc86(0x21b)),ipaddr=require(_0x53cc86(0x208)),argv=require('yargs/yargs')(process[_0x53cc86(0x1cb)][_0x53cc86(0xac)](0x2))[_0x53cc86(0x1cb)],uuidRandom=require(_0x53cc86(0x7a)),TelegramBot=require(_0x53cc86(0x1ce)),Mixpanel=require(_0x53cc86(0x1ea)),axios=require(_0x53cc86(0x114)),{GraphQLClient,gql}=require(_0x53cc86(0xf2)),util=require(_0x53cc86(0x1fd)),fileUpload=require(_0x53cc86(0x101)),{networkInterfaces}=require('os'),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x53cc86(0xad)](PORT)&&(console[_0x53cc86(0x1df)](_0x53cc86(0xee)+PORT+_0x53cc86(0x20b)),process['exit'](0x1));const HOST=argv[_0x53cc86(0x225)]||null,userID=argv[_0x53cc86(0x18c)]||'',debugging=argv['d']||![],nodeversion=process[_0x53cc86(0xa7)]['node'];let bbpath=_0x53cc86(0x1ed),bbpath2='';const botfile='bot.js',configfile=_0x53cc86(0xed),settingsfile=_0x53cc86(0x112),securefile=_0x53cc86(0x75),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x53cc86(0x1d4)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x53cc86(0xa8),configbackuppath=configpath+_0x53cc86(0x1a0),logspath=userID?bbpath+_0x53cc86(0x174)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x53cc86(0x195)+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+_0x53cc86(0x107),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x53cc86(0xb0);!fs[_0x53cc86(0xe5)](configpath)&&fs[_0x53cc86(0x211)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x53cc86(0xe5)](logspath)&&fs[_0x53cc86(0x211)](logspath);!fs[_0x53cc86(0xe5)](zippath)&&fs[_0x53cc86(0x211)](zippath);!fs['existsSync'](temppath)&&fs[_0x53cc86(0x211)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x53cc86(0x1f3)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x53cc86(0x1e0)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x53cc86(0x1f3)]({'secure':{},'blacklist':[]})[_0x53cc86(0x1e0)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x53cc86(0x135),{'host':_0x53cc86(0x17d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x53cc86(0xc2)]&&settings[_0x53cc86(0xc2)]!=''&&settings[_0x53cc86(0x1af)]&&settings[_0x53cc86(0x1af)]!='')initTelegram();const parseColor=(_0x4890d5,_0x55951a)=>{const _0x1128d1=_0x53cc86,_0x4b6e79=/#[A-Z]{3}#/g;if(typeof _0x4890d5==_0x1128d1(0x1f1)){!_0x55951a?_0x4890d5=_0x4890d5[_0x1128d1(0x159)](_0x4b6e79,''):(_0x4890d5=_0x4890d5['replace'](/#BLU#/g,_0x1128d1(0xe1)),_0x4890d5=_0x4890d5[_0x1128d1(0x159)](/#RED#/g,_0x1128d1(0x193)),_0x4890d5=_0x4890d5['replace'](/#YEL#/g,'\x1b[33m'),_0x4890d5=_0x4890d5[_0x1128d1(0x159)](/#MAG#/g,_0x1128d1(0x8b)),_0x4890d5=_0x4890d5[_0x1128d1(0x159)](/#CYA#/g,'\x1b[36m'),_0x4890d5=_0x4890d5['replace'](/#RES#/g,_0x1128d1(0x1ca)));;}return _0x4890d5;},logger={'screen':_0x879c4b=>{console['log'](parseColor(_0x879c4b,!![]));},'simple':_0x5550d7=>{const _0x393c97=_0x53cc86;console['log'](parseColor(_0x5550d7,!![])),loggerfile[_0x393c97(0x1e0)](util[_0x393c97(0x1a3)](parseColor(_0x5550d7,![]))+'\x0a');},'full':async _0x58001f=>{const _0x140503=_0x53cc86,_0x272ef5=getTimeStamp()+_0x140503(0x115)+_0x58001f;console[_0x140503(0x1df)](parseColor(_0x272ef5,!![])),loggerfile[_0x140503(0x1e0)](util[_0x140503(0x1a3)](parseColor(_0x272ef5,![]))+'\x0a');if(tgBot&&settings[_0x140503(0x228)]&&settings['telegramEvents']!=_0x140503(0xb4))await tgBot['sendMessage'](settings[_0x140503(0x228)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x58001f,![]))[_0x140503(0x1b0)](_0x3fc135=>{telegramError(_0x3fc135);});},'debug':async(_0x156b77,_0x37a59f='')=>{const _0x42acee=_0x53cc86,_0x280a3d=getTimeStamp()+_0x42acee(0x197)+_0x156b77;if(debugging)console[_0x42acee(0x1df)](parseColor(_0x280a3d,!![]));loggerfile[_0x42acee(0x1e0)](util['format'](parseColor(_0x280a3d,![]))+'\x0a');if(_0x37a59f){if(debugging)console[_0x42acee(0x1df)](_0x37a59f);loggerfile[_0x42acee(0x1e0)](util[_0x42acee(0x1a3)](_0x37a59f)+'\x0a');}}};process['on']('uncaughtException',function(_0x4d8bed){const _0x4b1f7f=_0x53cc86;logger[_0x4b1f7f(0xa2)](_0x4d8bed);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x53cc86(0x19f))[_0x53cc86(0x97)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')['createServer'](app);app[_0x53cc86(0x132)](fileUpload({'useTempFiles':!![]})),app[_0x53cc86(0x100)]('/download/:type',async(_0x54c080,_0xa0fea9)=>{const _0x5e9b14=_0x53cc86,_0x570930=_0x54c080[_0x5e9b14(0x1da)][_0x5e9b14(0x80)],_0x126092=getClientsWithBotID(_0x5e9b14(0x108)),_0x5175ad=_0x54c080['headers'][_0x5e9b14(0x190)],_0x677398=timelyDecrypt(_0x5175ad,![]),_0x4a2f7b=_0x126092[_0x5e9b14(0x1a4)](_0x4a8db3=>_0x4a8db3['uuid']==_0x677398);if(_0x4a2f7b){const _0x383133=normalizeIP(_0x54c080[_0x5e9b14(0x1cf)][_0x5e9b14(0x10a)])[_0x5e9b14(0x1a1)],_0xabd44f=_0x54c080[_0x5e9b14(0x1a2)]['tkn'];if(validateAccess(_0xabd44f,_0x677398,_0x383133)[_0x5e9b14(0x221)])_0x570930=='backup'&&await backupConfigFiles(),await zipFiles(_0x570930),_0xa0fea9[_0x5e9b14(0x16a)](zippath+(_0x570930+_0x5e9b14(0x21d)),_0x433a8a=>{const _0x517435=_0x5e9b14;_0x433a8a&&(logger[_0x517435(0x15a)](_0x517435(0x12c)+_0x570930),logger[_0x517435(0xa2)](_0x433a8a));});else logger[_0x5e9b14(0x15a)](_0x5e9b14(0x9f)+_0x570930+_0x5e9b14(0xec));}else logger[_0x5e9b14(0x15a)](_0x5e9b14(0x9f)+_0x570930+'\x20(2)');}),app[_0x53cc86(0x182)](_0x53cc86(0x14f),async(_0x1e054d,_0x5bd117)=>{const _0xd0f242=_0x53cc86,_0x356024=getClientsWithBotID(_0xd0f242(0x108)),_0x22c4d8=_0x1e054d[_0xd0f242(0x1a2)][_0xd0f242(0x190)],_0x1d00bf=timelyDecrypt(_0x22c4d8,![]),_0x2e9c88=_0x356024[_0xd0f242(0x1a4)](_0x3bb907=>_0x3bb907['uuid']==_0x1d00bf);logger['debug'](_0xd0f242(0x89));if(_0x2e9c88){const _0x4c36ed=normalizeIP(_0x1e054d['socket'][_0xd0f242(0x10a)])[_0xd0f242(0x1a1)],_0x3415fd=_0x1e054d['headers']['tkn'];if(validateAccess(_0x3415fd,_0x1d00bf,_0x4c36ed)['allow']){if(_0x1e054d[_0xd0f242(0x94)]){const _0x285932=_0x1e054d[_0xd0f242(0x94)][_0xd0f242(0x176)];await _0x285932['mv'](temppath+_0x285932['name']),_0x5bd117[_0xd0f242(0x1e3)]({'status':!![],'message':'File\x20uploaded'});const _0x2ae3f9=getBotsWithMode();_0x2ae3f9[_0xd0f242(0x140)]>0x0?confirmRestore(temppath,_0x285932[_0xd0f242(0x1d5)]):unzipFile(temppath,_0x285932[_0xd0f242(0x1d5)]);}}else logger['full'](_0xd0f242(0x1f5));}else logger[_0xd0f242(0x15a)](_0xd0f242(0x204));}),app[_0x53cc86(0x132)](express[_0x53cc86(0x7d)](path[_0x53cc86(0x1b3)](__dirname,bbpath2,_0x53cc86(0xde)))),app[_0x53cc86(0x132)](express[_0x53cc86(0x7d)](path[_0x53cc86(0x1b3)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x86a8fe,_0x32d3b0){const _0x484c15=_0x53cc86;_0x32d3b0[_0x484c15(0x1aa)](path[_0x484c15(0x1b3)](__dirname,bbpath2,_0x484c15(0xde),'index.html'));}),app[_0x53cc86(0x100)](_0x53cc86(0xd9),function(_0x32f322,_0x212388){const _0x4fcd26=_0x53cc86;_0x212388[_0x4fcd26(0x1aa)](path['join'](__dirname,bbpath2,_0x4fcd26(0xd0),'index.html'));}),app['get']('/:bot/portfolio',(_0x54ec3f,_0xd9d9d)=>{const _0x1f0330=_0x53cc86;_0xd9d9d[_0x1f0330(0x1aa)](path[_0x1f0330(0x1b3)](__dirname,bbpath2,_0x1f0330(0xd0),_0x1f0330(0x1c3)));}),app[_0x53cc86(0x100)]('/:bot/performance',(_0x1c4715,_0x12e880)=>{const _0x27726d=_0x53cc86;_0x12e880['sendFile'](path[_0x27726d(0x1b3)](__dirname,bbpath2,_0x27726d(0xd0),_0x27726d(0x1c3)));}),app[_0x53cc86(0x100)](_0x53cc86(0x10d),(_0x4c4118,_0x254a94)=>{const _0x57d892=_0x53cc86;_0x254a94[_0x57d892(0x1aa)](path[_0x57d892(0x1b3)](__dirname,bbpath2,_0x57d892(0xd0),_0x57d892(0x1c3)));}),app['get']('/:bot/history',(_0x43188c,_0x2062c2)=>{const _0x47a8ab=_0x53cc86;_0x2062c2[_0x47a8ab(0x1aa)](path['join'](__dirname,bbpath2,_0x47a8ab(0xd0),'index.html'));}),app[_0x53cc86(0x100)](_0x53cc86(0x85),(_0xc5cea0,_0x3be4cf)=>{const _0x2efa05=_0x53cc86;_0x3be4cf[_0x2efa05(0x1aa)](path[_0x2efa05(0x1b3)](__dirname,bbpath2,_0x2efa05(0xd0),_0x2efa05(0x1c3)));}),app[_0x53cc86(0x100)]('/:bot/support',(_0x148ad6,_0x3f7e70)=>{const _0x379a46=_0x53cc86;_0x3f7e70[_0x379a46(0x1aa)](path[_0x379a46(0x1b3)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x53cc86(0x148)](PORT,HOST);else http[_0x53cc86(0x148)](PORT);const io=require(_0x53cc86(0xcf))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4c4e1e=_0x53cc86;let _0x2d0ce1=_0x4c4e1e(0xcd);const _0x346afc=networkInterfaces(),_0x2029b3={};for(const _0x12d3ce of Object[_0x4c4e1e(0x17c)](_0x346afc)){for(const _0x2b5dc6 of _0x346afc[_0x12d3ce]){if((_0x2b5dc6[_0x4c4e1e(0x102)]==_0x4c4e1e(0x218)||_0x2b5dc6[_0x4c4e1e(0x102)]==0x4)&&!_0x2b5dc6[_0x4c4e1e(0xf1)]){const _0x2e6c78=ipaddr[_0x4c4e1e(0xe3)](_0x2b5dc6[_0x4c4e1e(0x18f)])[_0x4c4e1e(0xa5)]();_0x2e6c78!=_0x4c4e1e(0x15c)&&(!_0x2029b3[_0x12d3ce]&&(_0x2029b3[_0x12d3ce]=[]),_0x2029b3[_0x12d3ce]['push'](_0x2b5dc6[_0x4c4e1e(0x18f)]),_0x2d0ce1=_0x2b5dc6[_0x4c4e1e(0x18f)]);}}}return{'serverip':_0x2d0ce1,'netinterfaces':_0x2029b3};}async function startServer(){const _0x160f92=_0x53cc86,{serverip:_0xa9537a,netinterfaces:_0x1d55bf}=getServerIP();logger[_0x160f92(0xa2)](''),logger[_0x160f92(0xa2)](_0x160f92(0xe0)),await logger[_0x160f92(0x15a)](_0x160f92(0x1bd)+serverversion+_0x160f92(0x142)+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0xa9537a+':'+PORT+_0x160f92(0xc4))),logger[_0x160f92(0xa2)](_0x160f92(0xe0));if(config['length']!=0x0)for(const _0x109317 of config){if(_0x109317[_0x160f92(0x21c)]=='enabled'||_0x109317[_0x160f92(0x21c)]==_0x160f92(0xb2))await logger[_0x160f92(0x15a)](_0x160f92(0xe7)+_0x109317[_0x160f92(0xd4)]+_0x160f92(0x146)+_0x109317[_0x160f92(0x1bb)]),startBot([_0x109317[_0x160f92(0xd4)],userID],{'cwd':bbpath},function(_0x2b9f3d){if(_0x2b9f3d)logger['full'](_0x2b9f3d);});else(_0x109317['status']==_0x160f92(0x1d9)||_0x109317[_0x160f92(0x21c)]=='new-disabled')&&await logger[_0x160f92(0x15a)](_0x160f92(0x81)+_0x109317[_0x160f92(0xd4)]+'\x20|\x20'+_0x109317[_0x160f92(0x1bb)]);}else!newBot&&logger[_0x160f92(0xa2)](_0x160f92(0x120));if(newBot)addBot();logger[_0x160f92(0xa2)](_0x160f92(0xe0)),logger[_0x160f92(0xa2)](''),await logger[_0x160f92(0xe2)]('Node.js\x20v'+nodeversion),await logger['debug'](_0x160f92(0x79),_0x1d55bf);}function startSocket(){const _0x5603d1=_0x53cc86;io['on'](_0x5603d1(0x222),_0xe23837=>{const _0x13d935=_0x5603d1;let _0x14e97a,_0x6e6b5c,_0x24eb67,_0x1a6767,_0x5c49a7;const _0x49a9df=_0xe23837['handshake']['headers'][_0x13d935(0xf6)];_0x6e6b5c=_0x49a9df[_0x13d935(0xb7)](/bot[0-9]{3}/);if(_0x6e6b5c)_0x24eb67=_0x6e6b5c[0x0]['match'](/[0-9]{3}/);if(_0x24eb67)_0x14e97a=_0x24eb67[0x0];else _0x14e97a=_0x13d935(0x108);const _0x3be513=_0xe23837['handshake']['auth'][_0x13d935(0xc8)];if(!_0x3be513)_0xe23837['emit'](_0x13d935(0x21c),{'publicKey':secure[_0x13d935(0x14b)]});else{_0x1a6767=timelyDecrypt(_0x3be513,![]);if(!_0x1a6767)_0xe23837[_0x13d935(0xeb)](_0x13d935(0x21c),{'publicKey':secure[_0x13d935(0x14b)]});else{_0x5c49a7=normalizeIP(_0xe23837['conn'][_0x13d935(0x10a)])[_0x13d935(0x1a1)];if(!devices[_0x1a6767])devices[_0x1a6767]={'uuid':_0x1a6767,'access':{'token':null}};devices[_0x1a6767]['ip']=_0x5c49a7;const _0x18326c=addClient(_0xe23837['id'],_0x1a6767,_0x14e97a);setAccess(_0x18326c),emitMessages(),_0xe23837['on']('login',_0x381e31=>{const _0xf022c0=_0x13d935,_0xb3e38b=timelyDecrypt(_0x381e31[_0xf022c0(0x10f)]);if(_0xb3e38b){_0x381e31={'username':_0x381e31[_0xf022c0(0xaf)],'password':_0xb3e38b},devices[_0x1a6767][_0xf022c0(0x23a)]=validateCredentials(_0x381e31,_0x1a6767);if(devices[_0x1a6767][_0xf022c0(0x23a)][_0xf022c0(0x221)]==![]&&devices[_0x1a6767][_0xf022c0(0x23a)][_0xf022c0(0x172)]==_0xf022c0(0x1d3))_0xe23837[_0xf022c0(0xeb)]('status',{'access':devices[_0x1a6767][_0xf022c0(0x23a)]}),loginAccess2FA(_0x1a6767,_0x5c49a7);else{if(devices[_0x1a6767][_0xf022c0(0x23a)]['allow']==![]&&devices[_0x1a6767][_0xf022c0(0x23a)][_0xf022c0(0x172)]==_0xf022c0(0x123))_0xe23837[_0xf022c0(0xeb)](_0xf022c0(0x21c),{'access':devices[_0x1a6767][_0xf022c0(0x23a)]});else devices[_0x1a6767][_0xf022c0(0x23a)][_0xf022c0(0x221)]&&devices[_0x1a6767]['access'][_0xf022c0(0x172)]==_0xf022c0(0x11c)&&(getClientsWithUuid(_0x1a6767)[_0xf022c0(0xab)](_0x11d817=>{setAccess(_0x11d817);}),logger[_0xf022c0(0xe2)](_0xf022c0(0x230)+_0x1a6767[_0xf022c0(0xac)](-0x8)),setTokenRefresh(_0x1a6767),setSessionTimeout(_0xf022c0(0x1b1),_0x1a6767));}}else logger[_0xf022c0(0x15a)](_0xf022c0(0xbd));}),_0xe23837['on'](_0x13d935(0x19e),()=>{resetPassword();}),_0xe23837['on'](_0x13d935(0x10b),_0x10d887=>{removeClient(_0xe23837['id']);}),_0x14e97a==_0x13d935(0x108)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3430e3){const _0x3ea968=_0x53cc86;if(_0x3430e3!='botmanager'&&config['apiKey']!=''){if(pid[_0x3430e3])pid[_0x3430e3][_0x3ea968(0x1e3)]({'function':_0x3ea968(0xa1),'args':null});}_0x3430e3!=_0x3ea968(0x108)&&broadcastToBots(_0x3ea968(0x90),JSON[_0x3ea968(0x8a)](config));}function reloadBotManager(){const _0x17c0eb=_0x53cc86;getClientsWithBotID(_0x17c0eb(0x108))[_0x17c0eb(0xab)](_0x2451db=>{const _0x59c75a=_0x17c0eb;getSocket(_0x2451db['id'])[_0x59c75a(0xeb)](_0x59c75a(0x21c),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x5ab463){const _0x41e724=_0x53cc86;return io['sockets'][_0x41e724(0x93)]['get'](_0x5ab463);}function _0x3a4b(){const _0x634ba5=['forEach','slice','test','request','username','temp/','whitelist','new','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','orders','https://api.ipify.org?format=json','pidExpireLogin','match','message','assign','polling_error','lowdb','restore-backup-file','Unauthorized\x20login\x20attempt\x20(timeout)','max','get-starting-balances','messages','apiPassword','telegramToken','Restarting\x20Bot\x20','#RES#\x20if\x20running\x20on\x20server','Ok,\x20will\x20send\x20alert\x20notifications\x20only','\x20>\x20','statSync','encryptedUuid','-performance.json','isIPv4MappedAddress','function','_data','[ip-address]','2FA\x20required','socket.io','build','Alerts','RSA','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','botID','Unauthorized\x20attempt\x20to\x20get\x20messages','latestversion','rmSync','fork','/:bot','data','/disable\x20-\x20disable\x20notifications\x0a','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','showname','build2','timeshift','-----------------------------------------------------------------------------------','\x1b[34m','debug','parse','Unauthorized\x20attempt\x20to\x20get\x20portfolio','existsSync','reject','Starting\x20bot\x20|\x20Bot\x20','alias','store-configuration','delete-alerts','emit','\x20(1)','bb-config.json','Error:\x20Invalid\x20argument\x20','new-disabled','connected','internal','graphql-request','Bot\x20','get-backup-files','telegramIpApproval','referer','running','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','sendMessage','reinstall-bb','node-zip','Allow\x20login\x20from\x20IP\x20address\x20<b>','randomBytes','search','clientip','get','express-fileupload','family','privateKey','getFullYear','cloneDeep','Restore\x20process\x20aborted','/output-000.log','botmanager','11208rmjhOj','remoteAddress','disconnect','exit','/:bot/coins','***','password','backup-full@','bcryptjs','bb-settings.json','2303328buDGLx','axios',':\x20Bot\x20Mgr\x20>\x20','unlinkSync','4eaabYq','warning','getUTCHours','Token\x20blacklisted','manual','login\x20token\x20generated','hashSync','Notifications\x20enabled','readdirSync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','add-bot','toIPv4Address','invalid\x20credentials','timestamp','Error\x20removing\x20old\x20backup\x20files:','pidRefreshToken','\x20|\x20user:\x20...','output-001.log','Backup\x20file\x20unzipped\x20and\x20stored','apply','number','Failed\x20to\x20download\x20','show-config','login\x20required','bot-','127.0.0.1','inherit','use','/help\x20-\x20show\x20available\x20commands\x0a','Unauthorized\x20attempt\x20to\x20update\x20bot','6b67f3d61ee94b8f5c80b4affef4c4d9','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Yes','generate','sortBy','constructor','secure','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','logs','/on\x20-\x20start\x20bot(s)\x0a','length','1154283RPskpm','#RES#\x0a','Starting\x20Balance\x20Bot\x20','resetHistory','child_process','\x20|\x20','mtime','listen','copyFileSync','secret','publicKey','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','removeAllListeners','/upload-backup','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20delete\x20alerts','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Logged\x20out\x20user\x20...','push','yes','Bot\x20Mgr\x20>\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','logout','replace','full','token','private','SIGTERM','hybrid-crypto-js','args','event','showConfig','backup-full','sort','value','randomFillSync','entries','SIGINT','alerts','from','download','reinstall','2440900AhIUOW','-config.json','compareSync','updatebotmanager','5\x20min','date-fns','reason','temporary\x20token\x20generated','logs/','Your\x20installation\x20is\x20already\x20up\x20to\x20date','backupfile','delete-bot','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','startsWith','remove','keys','api-eu.mixpanel.com','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','title','-events.json','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','post','305078QHcjCW','logged\x20out','storeHeadless','output-003.log','chat',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','answerCallbackQuery','lowdb/adapters/FileSync','user','decrypt','<b>Balance\x20Bot\x20Status:</b>\x0a','address','uuid','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegramEnabled','\x1b[31m','telegram','zip/','accept',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','stopped','track','hasOwnProperty','userid','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/off\x20-\x20stop\x20bot(s)\x0a','reset-password','version.json','backup/','store','headers','format','find','enabled','getHours','getSeconds','then','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','sendFile','::1','getTime','removeListener','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','telegramUsername','catch','login','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','join','binary','all','telegramEvents','Notifications\x20types:\x20','error','Invalid\x20authentication\x20token\x20(1)','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','botname','No\x20authentication\x20token','Starting\x20#RED#Balance\x20Bot\x20v','access\x20timeout','Orders','bbPassword','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','index.html','success','update','backup','*$1*','/update\x20-\x20update\x20Balance\x20Bot\x0a','includes','\x1b[0m','argv','Markdown','\x20minutes','node-telegram-bot-api','socket','f2aRequired','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','2FA\x20login\x20required','clients','name','</b>\x20?','expiry','toggle-bot-mode','disabled','params','Invalid\x20Telegram\x20token','Invalid\x20authentication\x20token\x20(2)','ipc','onText','log','write','output-002.log','Enabled\x20Bot\x20','send','3351321oPpUAx','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','toString','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','any','notification','mixpanel','add','ipv6','bb/','login\x20not\x20required','No\x20bots\x20running\x20right\x20now','Starting\x20Balance\x20Bot\x20reinstallation','string','All\x20bots','defaults','/names\x20-\x20show\x20bot\x20names\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','live','kill','bot','isDirectory','lastmsgemitted','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','reload','util','set','All\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','getMonth','/status\x20-\x20show\x20bot(s)\x20status\x0a','store-headless','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','get-messages','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','restart','ipaddr.js','order','Restoring\x20bot(s)\x20from\x20backup',',\x20must\x20be\x20a\x204\x20digit\x20number','writeFileSync','sendMetricsTelegram','env','Invalid\x20username\x20or\x20IP\x20address','headless','mkdirSync','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','15\x20min','confirm-message','callback_query','getDate','storeFiat','IPv4','size','Unauthorized\x20attempt\x20to\x20confirm\x20message','jsonwebtoken','status','.zip','Starting\x20Balance\x20Bot\x20update','split','bbUsername','allow','connection','Password\x20reset\x20rejected','************','host','once','0.0.0','telegramChatId','file','temporaryAccessAllowed','path','Unauthorized\x20attempt\x20to\x20add\x20bot','place-order','map','whitelistEnabled','Logged\x20in\x20user\x20...','DEFLATE','Disabled\x20Bot\x20','readFileSync','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Ok,\x20will\x20send\x20order\x20notifications\x20only','-results.json','Access\x20enabled\x20for\x20','sign','User\x20has\x20been\x20validated','access','telegrammsg','You\x20can\x20use\x20the\x20following\x20commands:\x0a','bb-secure.json','sendPortfolioTelegram','verify','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Network\x20Interfaces:','uuid-random','stopPolling','191908QkaYqk','static','started','Crypt','type','Idling\x20bot\x20\x20\x20|\x20Bot\x20','blacklist','\x20mode','onepagemode','/:bot/configuration','loginRequired','$1_$2_$3','auto','Backup\x20file\x20uploaded','stringify','\x1b[35m','Unauthorized\x20attempt\x20to\x20show\x20configuration','Notifications\x20disabled','backup-full.zip','HTML','bots','settings','Starting\x20new\x20bot\x20|\x20Bot\x20','sockets','files','Server','getMinutes','version','mode','output-000.log','lastmsgtelegram','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','min','padStart','bbvNew','Unauthorized\x20attempt\x20to\x20download\x20','stop','initclient','simple','show','telegram2FaApproval','range','800qOXQJt','versions','config/','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','(((.+)+)+)+$'];_0x3a4b=function(){return _0x634ba5;};return _0x3a4b();}function setAccess(_0x3083b4){const _0x34e2d8=_0x53cc86,_0x15fb34=getSocket(_0x3083b4['id']),_0x51294e=_0x3083b4['uuid'],_0x3756cd=_0x3083b4[_0x34e2d8(0x1f8)];devices[_0x51294e][_0x34e2d8(0x23a)]=validateAccess(devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x15b)],_0x51294e),logger[_0x34e2d8(0xe2)]('Setting\x20access:\x20'+devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x172)]+'\x20|\x20client:\x20...'+_0x3083b4['id'][_0x34e2d8(0xac)](-0x8)+_0x34e2d8(0x127)+_0x51294e[_0x34e2d8(0xac)](-0x8)),_0x15fb34['join'](_0x51294e);if(devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x221)]){_0x15fb34['join'](_0x3756cd);if(_0x3756cd=='botmanager')initializeSocketBotManager(_0x15fb34);else initializeSocketBot(_0x15fb34);initClient(_0x3756cd);}devices[_0x51294e]['access'][_0x34e2d8(0x15b)]&&devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x172)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x51294e),devices[_0x51294e][_0x34e2d8(0x23a)]['token']&&devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x172)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x51294e),_0x15fb34[_0x34e2d8(0xeb)](_0x34e2d8(0x21c),{'status':_0x3083b4['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x51294e][_0x34e2d8(0x23a)],'externalip':devices[_0x51294e]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x34e2d8(0x19b)],'validInstallation':validInstallation}),devices[_0x51294e]['access']['allow']==![]&&devices[_0x51294e][_0x34e2d8(0x23a)][_0x34e2d8(0x172)]=='2FA\x20required'&&temporaryAccess2FA(_0x51294e,devices[_0x51294e]['ip']);}function setSessionTimeout(_0x118669,_0x39709f){const _0x27548d=_0x53cc86;let _0x396134;if(_0x118669==_0x27548d(0x1b1))_0x396134=loginExpiry*0x3c*0x3e8;else _0x396134=devices[_0x39709f][_0x27548d(0xf5)][_0x27548d(0x1d7)]*0x3c*0x3e8-(new Date()[_0x27548d(0x1ac)]()-devices[_0x39709f][_0x27548d(0xf5)][_0x27548d(0x124)]);if(devices[_0x39709f][_0x27548d(0xb6)])clearTimeout(devices[_0x39709f][_0x27548d(0xb6)]);devices[_0x39709f][_0x27548d(0xb6)]=setTimeout(()=>{const _0x548d85=_0x27548d;if(devices[_0x39709f][_0x548d85(0x126)])clearTimeout(devices[_0x39709f][_0x548d85(0x126)]);removeSocketListeners(_0x39709f),addBlacklist(_0x39709f),devices[_0x39709f][_0x548d85(0xf5)]=null,devices[_0x39709f][_0x548d85(0xa4)]=null,devices[_0x39709f]['access'][_0x548d85(0x15b)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x39709f[_0x548d85(0xac)](-0x8)),devices[_0x39709f][_0x548d85(0x23a)]=validateAccess(devices[_0x39709f]['access'][_0x548d85(0x15b)],_0x39709f),!(devices[_0x39709f][_0x548d85(0x23a)]['allow']&&devices[_0x39709f][_0x548d85(0x23a)][_0x548d85(0x172)]==_0x548d85(0x1ee))&&(_0x118669==_0x548d85(0x1b1)?io['to'](_0x39709f)[_0x548d85(0xeb)](_0x548d85(0x21c),{'access':{'allow':![],'reason':_0x548d85(0x1be),'token':null}}):io['to'](_0x39709f)[_0x548d85(0xeb)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x39709f][_0x548d85(0x23a)][_0x548d85(0x15b)]=null;},_0x396134);}function setTokenRefresh(_0x1f2c03){const _0x4398e2=_0x53cc86;if(devices[_0x1f2c03][_0x4398e2(0x126)])clearTimeout(devices[_0x1f2c03][_0x4398e2(0x126)]);devices[_0x1f2c03][_0x4398e2(0x126)]=setTimeout(()=>{const _0xedce57=_0x4398e2;getClientsWithUuid(_0x1f2c03)[_0xedce57(0x140)]!=0x0?(devices[_0x1f2c03][_0xedce57(0x23a)]=refreshToken(_0x1f2c03),io['to'](_0x1f2c03)['emit'](_0xedce57(0x21c),{'status':_0xedce57(0xf0),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1f2c03][_0xedce57(0x23a)],'externalip':devices[_0x1f2c03]['ip'],'publicKey':secure[_0xedce57(0x14b)],'validInstallation':validInstallation}),setTokenRefresh(_0x1f2c03)):clearTimeout(devices[_0x1f2c03][_0xedce57(0x126)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x53711e){const _0x4001f4=_0x53cc86,_0x2d614b=getClient(_0x53711e['id'])[_0x4001f4(0x190)];_0x53711e[_0x4001f4(0xeb)](_0x4001f4(0x90),config),_0x53711e[_0x4001f4(0xeb)](_0x4001f4(0x91),cleanSettings()),_0x53711e['on'](_0x4001f4(0x121),_0x1bbd55=>{const _0x18dc20=_0x4001f4;if(validateAccess(_0x1bbd55,_0x2d614b)['allow'])addBot();else logger[_0x18dc20(0x15a)](_0x18dc20(0x22c));}),_0x53711e['on']('update-bot',(_0x18a002,_0x5f1c62)=>{const _0x11e486=_0x4001f4;if(validateAccess(_0x5f1c62,_0x2d614b)[_0x11e486(0x221)])toggleBot(_0x18a002[_0x11e486(0xd4)],_0x18a002[_0x11e486(0x21c)],_0x18a002[_0x11e486(0x1f6)]);else logger['full'](_0x11e486(0x134));}),_0x53711e['on'](_0x4001f4(0x1d8),(_0x1bf7a1,_0x594bde)=>{const _0x205833=_0x4001f4;if(validateAccess(_0x594bde,_0x2d614b)[_0x205833(0x221)])toggleBotMode(_0x1bf7a1);else logger[_0x205833(0x15a)](_0x205833(0x134));}),_0x53711e['on'](_0x4001f4(0x177),(_0x294247,_0x19225e)=>{const _0x7861da=_0x4001f4;if(validateAccess(_0x19225e,_0x2d614b)[_0x7861da(0x221)])deleteBot(_0x294247);else logger[_0x7861da(0x15a)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x53711e['on']('store-settings',(_0x313e04,_0x58a4ee)=>{const _0x3f59bd=_0x4001f4;if(validateAccess(_0x58a4ee,_0x2d614b)['allow'])storeSettings(_0x313e04,!![]);else logger[_0x3f59bd(0x15a)](_0x3f59bd(0x150));}),_0x53711e['on']('update-bb',_0x382154=>{const _0x2b362d=_0x4001f4;if(validateAccess(_0x382154,_0x2d614b)[_0x2b362d(0x221)])updateBB(_0x2b362d(0x1c5));else logger[_0x2b362d(0x15a)](_0x2b362d(0x200));}),_0x53711e['on'](_0x4001f4(0xfa),_0x434292=>{const _0xb6acfd=_0x4001f4;if(validateAccess(_0x434292,_0x2d614b)[_0xb6acfd(0x221)])updateBB(_0xb6acfd(0x16b));else logger[_0xb6acfd(0x15a)](_0xb6acfd(0xf8));}),_0x53711e['on'](_0x4001f4(0xf4),_0x279116=>{const _0x125a61=_0x4001f4;if(validateAccess(_0x279116,_0x2d614b)[_0x125a61(0x221)]){const _0x10d566=getClient(_0x53711e['id']);if(_0x10d566)getBackupFiles(_0x10d566['uuid']);else logger['full'](_0x125a61(0x14c));}else logger[_0x125a61(0x15a)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x53711e['on'](_0x4001f4(0xbc),(_0x2e069b,_0x2e681c)=>{const _0x21176a=_0x4001f4;if(validateAccess(_0x2e681c,_0x2d614b)[_0x21176a(0x221)])restoreBackupFile(_0x2e069b);else logger[_0x21176a(0x15a)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x53711e['on'](_0x4001f4(0x205),_0x559da3=>{const _0x34d38a=_0x4001f4;if(validateAccess(_0x559da3,_0x2d614b)[_0x34d38a(0x221)])getMessages();else logger[_0x34d38a(0x15a)](_0x34d38a(0xd5));}),_0x53711e['on'](_0x4001f4(0x214),(_0x8a892,_0x57dbd0)=>{const _0xc8b742=_0x4001f4;if(validateAccess(_0x57dbd0,_0x2d614b)[_0xc8b742(0x221)])confirmMessage(_0x8a892);else logger[_0xc8b742(0x15a)](_0xc8b742(0x21a));}),_0x53711e['on']('logout',_0x1c885f=>{const _0x40b2fe=_0x4001f4;if(validateAccess(_0x1c885f,_0x2d614b)['allow']){if(devices[_0x2d614b]['pidRefreshToken'])clearTimeout(devices[_0x2d614b][_0x40b2fe(0x126)]);if(devices[_0x2d614b][_0x40b2fe(0xb6)])clearTimeout(devices[_0x2d614b][_0x40b2fe(0xb6)]);removeSocketListeners(getClient(_0x53711e['id'])['uuid']),addBlacklist(_0x2d614b),devices[_0x2d614b][_0x40b2fe(0xf5)]=null,devices[_0x2d614b]['telegram2FaApproval']=null,devices[_0x2d614b][_0x40b2fe(0x23a)][_0x40b2fe(0x15b)]=null,logger[_0x40b2fe(0xe2)]('Logged\x20out\x20user\x20...'+_0x2d614b['slice'](-0x8)),io['to'](getClient(_0x53711e['id'])['uuid'])[_0x40b2fe(0xeb)](_0x40b2fe(0x21c),{'access':{'allow':![],'reason':_0x40b2fe(0x184),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x5690cb){const _0x2152b5=_0x53cc86,_0x4ff624=getClient(_0x5690cb['id'])[_0x2152b5(0x1f8)],_0x6ad652=getClient(_0x5690cb['id'])['uuid'];_0x5690cb['on']('get-logs',(_0x26a11f,_0x114ead)=>{const _0x109938=_0x2152b5;if(validateAccess(_0x114ead,_0x6ad652)[_0x109938(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624][_0x109938(0x1e3)]({'function':'emitHistory','args':_0x26a11f});}else logger[_0x109938(0x15a)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x5690cb['on'](_0x2152b5(0xea),(_0x1f7139,_0x506a1c)=>{const _0x116918=_0x2152b5;if(validateAccess(_0x506a1c,_0x6ad652)[_0x116918(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624][_0x116918(0x1e3)]({'function':'deleteHistoryAlerts','args':_0x1f7139});}else logger['full'](_0x116918(0x151));}),_0x5690cb['on']('get-portfolio',(_0x594e44,_0x553c51)=>{const _0xddca75=_0x2152b5;if(validateAccess(_0x553c51,_0x6ad652)['allow']){if(pid[_0x4ff624])pid[_0x4ff624][_0xddca75(0x1e3)]({'function':'getPortfolio','args':_0x594e44});}else logger[_0xddca75(0x15a)](_0xddca75(0xe4));}),_0x5690cb['on'](_0x2152b5(0xe9),(_0x2d2d6b,_0x489e02)=>{const _0xa939a7=_0x2152b5;if(validateAccess(_0x489e02,_0x6ad652)[_0xa939a7(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624]['send']({'function':'storeConfiguration','args':_0x2d2d6b});}else logger[_0xa939a7(0x15a)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x5690cb['on'](_0x2152b5(0x203),(_0x1b405a,_0xabf590)=>{const _0x141e08=_0x2152b5;if(validateAccess(_0xabf590,_0x6ad652)['allow']){if(pid[_0x4ff624])pid[_0x4ff624][_0x141e08(0x1e3)]({'function':_0x141e08(0x185),'args':_0x1b405a});}else logger[_0x141e08(0x15a)](_0x141e08(0x14d));}),_0x5690cb['on']('store-fiat',(_0x35f939,_0x3690c6)=>{const _0x338ff3=_0x2152b5;if(validateAccess(_0x3690c6,_0x6ad652)[_0x338ff3(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624][_0x338ff3(0x1e3)]({'function':_0x338ff3(0x217),'args':_0x35f939});}else logger[_0x338ff3(0x15a)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x5690cb['on']('reset-history',_0x3e02ea=>{const _0x2ddd3c=_0x2152b5;if(validateAccess(_0x3e02ea,_0x6ad652)[_0x2ddd3c(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624][_0x2ddd3c(0x1e3)]({'function':_0x2ddd3c(0x144),'args':null});}else logger[_0x2ddd3c(0x15a)](_0x2ddd3c(0x1c1));}),_0x5690cb['on'](_0x2152b5(0xbf),_0x1ee3d0=>{const _0x1ba047=_0x2152b5;if(validateAccess(_0x1ee3d0,_0x6ad652)[_0x1ba047(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624][_0x1ba047(0x1e3)]({'function':'getStartingBalances','args':null});}else logger[_0x1ba047(0x15a)](_0x1ba047(0x1fb));}),_0x5690cb['on'](_0x2152b5(0x22d),(_0x416692,_0x16cf41)=>{const _0x218bfa=_0x2152b5;if(validateAccess(_0x16cf41,_0x6ad652)[_0x218bfa(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624]['send']({'function':'placeOrder','args':_0x416692});}else logger[_0x218bfa(0x15a)](_0x218bfa(0x13c));}),_0x5690cb['on']('cancel-loading',_0x7bb5da=>{const _0x38241c=_0x2152b5;if(validateAccess(_0x7bb5da,_0x6ad652)[_0x38241c(0x221)]){if(pid[_0x4ff624])pid[_0x4ff624]['send']({'function':'cancelLoading','args':null});}else logger['full'](_0x38241c(0x1d1));}),_0x5690cb['on'](_0x2152b5(0x12d),_0x5799f2=>{const _0x5dfabd=_0x2152b5;if(validateAccess(_0x5799f2,_0x6ad652)['allow']){if(pid[_0x4ff624])pid[_0x4ff624]['send']({'function':_0x5dfabd(0x161),'args':null});}else logger[_0x5dfabd(0x15a)](_0x5dfabd(0x8c));}),_0x5690cb['on']('update-bb',_0x4c2eb5=>{const _0x40986f=_0x2152b5;if(validateAccess(_0x4c2eb5,_0x6ad652)[_0x40986f(0x221)])updateBB(_0x40986f(0x1c5));else logger[_0x40986f(0x15a)](_0x40986f(0x200));}),_0x5690cb['on']('get-messages',_0x351a90=>{const _0x45f5a8=_0x2152b5;if(validateAccess(_0x351a90,_0x6ad652)['allow'])getMessages();else logger[_0x45f5a8(0x15a)](_0x45f5a8(0xd5));}),_0x5690cb['on'](_0x2152b5(0x214),(_0x274a4b,_0x470837)=>{const _0x3d2ed5=_0x2152b5;if(validateAccess(_0x470837,_0x6ad652)[_0x3d2ed5(0x221)])confirmMessage(_0x274a4b);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5690cb['on'](_0x2152b5(0x158),_0x460574=>{const _0x53c3d9=_0x2152b5;if(validateAccess(_0x460574,_0x6ad652)[_0x53c3d9(0x221)]){if(devices[_0x6ad652][_0x53c3d9(0x126)])clearTimeout(devices[_0x6ad652]['pidRefreshToken']);if(devices[_0x6ad652]['pidExpireLogin'])clearTimeout(devices[_0x6ad652]['pidExpireLogin']);removeSocketListeners(getClient(_0x5690cb['id'])[_0x53c3d9(0x190)]),addBlacklist(_0x6ad652),devices[_0x6ad652][_0x53c3d9(0xf5)]=null,devices[_0x6ad652][_0x53c3d9(0xa4)]=null,devices[_0x6ad652][_0x53c3d9(0x23a)][_0x53c3d9(0x15b)]=null,logger['debug'](_0x53c3d9(0x153)+_0x6ad652[_0x53c3d9(0xac)](-0x8)),io['to'](getClient(_0x5690cb['id'])[_0x53c3d9(0x190)])[_0x53c3d9(0xeb)](_0x53c3d9(0x21c),{'access':{'allow':![],'reason':_0x53c3d9(0x184),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x3ea641){getClientsWithUuid(_0x3ea641)['forEach'](_0x46ddf0=>{const _0x22b147=_0x2cab;getSocket(_0x46ddf0['id'])[_0x22b147(0x14e)]();});}function cleanSettings(){const _0xd9e780=_0x53cc86;let _0x51f45c=settings;return settings[_0xd9e780(0xc2)]&&settings[_0xd9e780(0xc2)]!=''&&(_0x51f45c={..._0x51f45c,'telegramToken':'************'}),settings[_0xd9e780(0x1c0)]&&settings[_0xd9e780(0x1c0)]!=''&&(_0x51f45c={..._0x51f45c,'bbPassword':_0xd9e780(0x224)}),(settings[_0xd9e780(0x1c0)]&&settings[_0xd9e780(0x1c0)]==_0xd9e780(0x10e)||settings[_0xd9e780(0xc2)]&&settings[_0xd9e780(0xc2)]==_0xd9e780(0x10e))&&(_0x51f45c={..._0x51f45c,'restored':{'password':settings[_0xd9e780(0x1c0)]==_0xd9e780(0x10e),'telegram':settings[_0xd9e780(0xc2)]==_0xd9e780(0x10e)}}),_0x51f45c;}async function updateBB(_0x4f298c){const _0x1500ea=_0x53cc86;await backupConfigFiles(),installingUpdate=!![],config[_0x1500ea(0xab)](_0x3a6a68=>{const _0x3f1d9f=_0x1500ea;restartBot(_0x3a6a68[_0x3f1d9f(0xd4)]);}),logger[_0x1500ea(0xe2)](_0x1500ea(0x143)+_0x4f298c);if(_0x4f298c=='update')process[_0x1500ea(0x1e3)]({'update':!![]},_0x2f4ae4=>{});else _0x4f298c==_0x1500ea(0x16b)&&process[_0x1500ea(0x1e3)]({'reinstall':!![]},_0x351c4=>{});}function startBot(_0x5eb1b4,_0x258da4,_0x2e4dc2){const _0x32288c=_0x53cc86;if(debugging)_0x5eb1b4[_0x32288c(0x154)]('-d');let _0x27c396=![];const _0x24a463=_0x5eb1b4[0x0];_0x258da4={..._0x258da4,'stdio':[_0x32288c(0x131),_0x32288c(0x131),_0x32288c(0x131),_0x32288c(0x1dd)]},pid[_0x24a463]=childProcess[_0x32288c(0xd8)](botfile,_0x5eb1b4,_0x258da4),pid[_0x24a463]['on']('message',_0x50ed9d=>{const _0x2cd4ec=_0x32288c;switch(Object[_0x2cd4ec(0x17c)](_0x50ed9d)[0x0]){case _0x2cd4ec(0x1bb):updateBotName(_0x24a463,_0x50ed9d['botname']);break;case _0x2cd4ec(0x16f):updateBotManager();break;case _0x2cd4ec(0x21c):updateStatus(_0x24a463,_0x50ed9d['status']);break;case _0x2cd4ec(0x1f6):updateLive(_0x24a463,_0x50ed9d[_0x2cd4ec(0x1f6)]);break;case _0x2cd4ec(0x7e):updateLive(_0x24a463,_0x50ed9d[_0x2cd4ec(0x7e)]),io['to'](_0x24a463)[_0x2cd4ec(0xeb)](_0x2cd4ec(0x21c),{'access':{'allow':![],'reason':_0x2cd4ec(0x1fc),'token':null}});break;case _0x2cd4ec(0xa0):_0x50ed9d['stop']==_0x2cd4ec(0x207)&&restartBot(_0x24a463);_0x50ed9d[_0x2cd4ec(0xa0)]=='kill'&&toggleBot(_0x24a463,_0x2cd4ec(0x1d9),_0x2cd4ec(0x198));break;case _0x2cd4ec(0x194):sendTelegram(_0x24a463,_0x50ed9d['telegram']);break;case _0x2cd4ec(0x23b):sendTelegramMsg(_0x50ed9d['telegrammsg']);break;case'function':io['to'](_0x24a463)[_0x2cd4ec(0xeb)](_0x50ed9d[_0x2cd4ec(0xcb)],_0x50ed9d[_0x2cd4ec(0x15f)]);break;}}),pid[_0x24a463]['on'](_0x32288c(0x1b8),function(_0x11cbb3){if(_0x27c396)return;_0x27c396=!![],_0x2e4dc2(_0x11cbb3);}),pid[_0x24a463]['on'](_0x32288c(0x10c),async function(_0x1c8a95){const _0x43878f=_0x32288c;if(installingUpdate)return;if(_0x27c396)return;_0x27c396=!![],_0x2e4dc2(null);const _0x95b720=dbConfig[_0x43878f(0x100)](_0x43878f(0x90))[_0x43878f(0x1a4)]({'botID':_0x24a463})['value']();_0x95b720&&(_0x95b720[_0x43878f(0x21c)]=='enabled'||_0x95b720[_0x43878f(0x21c)]=='new')&&(await sleep(0x3e8),updateLive(_0x24a463,_0x43878f(0x198)),logger['full'](_0x43878f(0xc3)+_0x24a463),startBot([_0x24a463,userID],{'cwd':bbpath},function(_0x502d10){if(_0x502d10)logger['full'](_0x502d10);}));});}function stopBot(_0x4fa095){getClientsWithBotID(_0x4fa095)['forEach'](_0x5cc247=>{getSocket(_0x5cc247['id'])['disconnect'](!![]),removeClient(_0x5cc247['id']);}),pid[_0x4fa095]&&(pid[_0x4fa095]['kill'](),pid[_0x4fa095]=null);}function restartBot(_0x345366){const _0x15b981=_0x53cc86;if(pid[_0x345366])pid[_0x345366][_0x15b981(0x1f7)]();}function addBot(){const _0x2b5bc2=_0x53cc86;let _0x23e4ef;for(let _0x5114fc=0x1;_0x5114fc<0x3e9;_0x5114fc++){_0x23e4ef=_0x5114fc[_0x2b5bc2(0x1e6)]()[_0x2b5bc2(0x9d)](0x3,'0');let _0x2a068b=config['find'](_0x47c30c=>_0x47c30c[_0x2b5bc2(0xd4)]==_0x23e4ef);if(!_0x2a068b)break;}if(_0x23e4ef==='1000'){logger[_0x2b5bc2(0x15a)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x2b5bc2(0x15a)](_0x2b5bc2(0x92)+_0x23e4ef),dbConfig[_0x2b5bc2(0x100)](_0x2b5bc2(0x90))[_0x2b5bc2(0x154)]({'botID':_0x23e4ef,'botname':_0x2b5bc2(0xf3)+_0x23e4ef,'status':_0x2b5bc2(0xb2),'live':''})[_0x2b5bc2(0x1e0)](),startBot([_0x23e4ef,userID],{'cwd':bbpath},function(_0x53502f){const _0x5acff9=_0x2b5bc2;if(_0x53502f)logger[_0x5acff9(0x15a)](_0x53502f);}),config=getConfiguration(),io['to'](_0x2b5bc2(0x108))[_0x2b5bc2(0xeb)](_0x2b5bc2(0x90),config),broadcastToBots(_0x2b5bc2(0x90),JSON['stringify'](config));}function deleteBot(_0x271f90){const _0x258f6b=_0x53cc86;getClientsWithBotID(_0x271f90)[_0x258f6b(0xab)](_0x925e7a=>{const _0x448ca9=_0x258f6b;getSocket(_0x925e7a['id'])[_0x448ca9(0x10b)](!![]),removeClient(_0x925e7a['id']);}),dbConfig['get'](_0x258f6b(0x90))['remove']({'botID':_0x271f90})['write'](),logger[_0x258f6b(0x15a)]('Deleted\x20Bot\x20'+_0x271f90),stopBot(_0x271f90);try{if(fs[_0x258f6b(0xe5)](path[_0x258f6b(0x1b3)](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x16d))))fs[_0x258f6b(0x116)](path['join'](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x16d)));if(fs[_0x258f6b(0xe5)](path[_0x258f6b(0x1b3)](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x180))))fs[_0x258f6b(0x116)](path[_0x258f6b(0x1b3)](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x180)));if(fs['existsSync'](path[_0x258f6b(0x1b3)](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0xc9))))fs[_0x258f6b(0x116)](path[_0x258f6b(0x1b3)](configpath,'bot-'+_0x271f90+_0x258f6b(0xc9)));if(fs[_0x258f6b(0xe5)](path['join'](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x236))))fs[_0x258f6b(0x116)](path[_0x258f6b(0x1b3)](configpath,_0x258f6b(0x12f)+_0x271f90+_0x258f6b(0x236)));}catch(_0x15a628){if(_0x15a628)logger[_0x258f6b(0x15a)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x15a628);}config=getConfiguration(),io['to'](_0x258f6b(0x108))[_0x258f6b(0xeb)](_0x258f6b(0x90),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x15abe4,_0xfbb225,_0x554ddc){const _0x221b4f=_0x53cc86;dbConfig[_0x221b4f(0x100)](_0x221b4f(0x90))[_0x221b4f(0x1a4)]({'botID':_0x15abe4})[_0x221b4f(0xb9)]({'status':_0xfbb225})[_0x221b4f(0xb9)]({'live':_0x554ddc})[_0x221b4f(0x1e0)]();if(_0xfbb225==_0x221b4f(0x1a5)||_0xfbb225==_0x221b4f(0xb2))logger[_0x221b4f(0x15a)](_0x221b4f(0x1e2)+_0x15abe4),startBot([_0x15abe4,userID],{'cwd':bbpath},function(_0x140e7a){const _0x4add61=_0x221b4f;if(_0x140e7a)logger[_0x4add61(0x15a)](_0x140e7a);});else(_0xfbb225==_0x221b4f(0x1d9)||_0xfbb225==_0x221b4f(0xef))&&(logger[_0x221b4f(0x15a)](_0x221b4f(0x232)+_0x15abe4),stopBot(_0x15abe4));config=getConfiguration(),io['to'](_0x221b4f(0x108))[_0x221b4f(0xeb)]('bots',config),broadcastToBots(_0x221b4f(0x90),JSON[_0x221b4f(0x8a)](config));}function toggleStatus(_0x310a4d){const _0x5317e8=_0x53cc86;let _0x38e719=dbConfig[_0x5317e8(0x100)]('bots')[_0x5317e8(0x1a4)]({'botID':_0x310a4d})[_0x5317e8(0x164)](),_0x30092a;if(_0x38e719['status']===_0x5317e8(0x1a5))_0x30092a=_0x5317e8(0x1d9);else{if(_0x38e719[_0x5317e8(0x21c)]===_0x5317e8(0xb2))_0x30092a='new-disabled';else{if(_0x38e719['status']===_0x5317e8(0xef))_0x30092a='new';else{if(_0x38e719['status']===_0x5317e8(0x1d9))_0x30092a='enabled';}}}return _0x30092a;}function updateStatus(_0x23d355,_0x1278af){const _0x4610ef=_0x53cc86;dbConfig[_0x4610ef(0x100)](_0x4610ef(0x90))[_0x4610ef(0x1a4)]({'botID':_0x23d355})['assign']({'status':_0x1278af})[_0x4610ef(0x1e0)](),config=getConfiguration(),io['to'](_0x4610ef(0x108))[_0x4610ef(0xeb)](_0x4610ef(0x90),config),broadcastToBots('bots',JSON[_0x4610ef(0x8a)](config));}function updateLive(_0x265e31,_0x279f39){const _0xda5811=_0x53cc86;dbConfig[_0xda5811(0x100)]('bots')[_0xda5811(0x1a4)]({'botID':_0x265e31})[_0xda5811(0xb9)]({'live':_0x279f39})[_0xda5811(0x1e0)](),config=getConfiguration(),io['to'](_0xda5811(0x108))['emit'](_0xda5811(0x90),config),broadcastToBots(_0xda5811(0x90),JSON[_0xda5811(0x8a)](config));}function updateBotName(_0x213e7a,_0x318dfa){const _0xe796c8=_0x53cc86;dbConfig['get'](_0xe796c8(0x90))[_0xe796c8(0x1a4)]({'botID':_0x213e7a})[_0xe796c8(0xb9)]({'botname':_0x318dfa})[_0xe796c8(0x1e0)](),config=getConfiguration(),io['to'](_0xe796c8(0x108))[_0xe796c8(0xeb)](_0xe796c8(0x90),config),broadcastToBots(_0xe796c8(0x90),JSON[_0xe796c8(0x8a)](config));}function updateBotManager(){const _0x1aecf9=_0x53cc86;config=getConfiguration(),io['to']('botmanager')[_0x1aecf9(0xeb)](_0x1aecf9(0x90),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x995df9){const _0x551739=_0x53cc86;if(pid[_0x995df9])pid[_0x995df9]['send']({'function':'toggleBotMode','args':null});else{const _0x35ee86=configpath+_0x551739(0x12f)+_0x995df9+'-config.json',_0x383d8e=fs['readFileSync'](_0x35ee86),_0x423481=JSON[_0x551739(0xe3)](_0x383d8e),_0x450ec1=_0x423481['bot'][0x0]['headless'];_0x423481['bot'][0x0]['headless']=!_0x450ec1;const _0x506270=JSON[_0x551739(0x8a)](_0x423481,null,0x2);fs[_0x551739(0x20c)](_0x35ee86,_0x506270),config=getConfiguration(),io['to']('botmanager')[_0x551739(0xeb)]('bots',config),broadcastToBots('bots',JSON[_0x551739(0x8a)](config));}}function telegramError(_0xe0b84b){const _0x56513e=_0x53cc86;logger['simple'](getTimeStamp()+_0x56513e(0x188));}function validateTelegram(_0x45dec8){const _0xe11b76=_0x53cc86;if(_0x45dec8[_0xe11b76(0x169)][_0xe11b76(0xaf)]!=settings[_0xe11b76(0x1af)]&&'@'+_0x45dec8['from'][_0xe11b76(0xaf)]!=settings[_0xe11b76(0x1af)])return tgBot[_0xe11b76(0xf9)](_0x45dec8[_0xe11b76(0x187)]['id'],_0xe11b76(0x13d),{'parse_mode':_0xe11b76(0x8f)})[_0xe11b76(0x1b0)](_0x29dba8=>{telegramError(_0x29dba8);}),![];return!![];}async function initTelegram(){const _0x560c3d=_0x53cc86;if(tgBot)tgBot[_0x560c3d(0x7b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x560c3d(0xc2)],{'polling':!![]});let _0x5e87db=_0x560c3d(0x23c);_0x5e87db+='\x0a',_0x5e87db+='/enable\x20-\x20enable\x20notifications\x0a',_0x5e87db+=_0x560c3d(0xdb),_0x5e87db+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5e87db+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5e87db+=_0x560c3d(0x13f),_0x5e87db+=_0x560c3d(0x19d),_0x5e87db+=_0x560c3d(0xdc),_0x5e87db+=_0x560c3d(0x1f4),_0x5e87db+=_0x560c3d(0x202),_0x5e87db+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x5e87db+=_0x560c3d(0x212),_0x5e87db+=_0x560c3d(0x1c8),_0x5e87db+=_0x560c3d(0x78),_0x5e87db+=_0x560c3d(0x133);let _0x4df237=_0x560c3d(0x179);_0x4df237+='\x0a',_0x4df237+=_0x5e87db,tgBot[_0x560c3d(0x1de)](/\/start/,_0x435fa5=>{const _0x1f1d62=_0x560c3d;if(!validateTelegram(_0x435fa5))return;if(settings[_0x1f1d62(0x228)]!=_0x435fa5[_0x1f1d62(0x187)]['id'])updateSetting(_0x1f1d62(0x228),_0x435fa5[_0x1f1d62(0x187)]['id']);updateSetting(_0x1f1d62(0x192),!![]),tgBot[_0x1f1d62(0xf9)](_0x435fa5[_0x1f1d62(0x187)]['id'],_0x4df237)[_0x1f1d62(0x1b0)](_0x50cce9=>{telegramError(_0x50cce9);});}),tgBot[_0x560c3d(0x1de)](/\/enable/,_0x2854fb=>{const _0xba6b78=_0x560c3d;if(!validateTelegram(_0x2854fb))return;if(settings[_0xba6b78(0x228)]!=_0x2854fb['chat']['id'])updateSetting(_0xba6b78(0x228),_0x2854fb[_0xba6b78(0x187)]['id']);updateSetting(_0xba6b78(0x192),!![]),tgBot[_0xba6b78(0xf9)](_0x2854fb[_0xba6b78(0x187)]['id'],_0xba6b78(0x11e))[_0xba6b78(0x1b0)](_0x20bb76=>{telegramError(_0x20bb76);});}),tgBot[_0x560c3d(0x1de)](/\/config/,async _0x6c7015=>{const _0x359bf1=_0x560c3d;if(!validateTelegram(_0x6c7015))return;tgBot[_0x359bf1(0x1ad)](_0x359bf1(0x215)),tgBot[_0x359bf1(0xf9)](_0x6c7015['chat']['id'],_0x359bf1(0x19c),{'reply_markup':{'inline_keyboard':[[{'text':_0x359bf1(0x1bf),'callback_data':_0x359bf1(0xb4)},{'text':_0x359bf1(0xd1),'callback_data':'alerts'},{'text':'All','callback_data':'all'}]]}})['catch'](_0x2917c5=>{telegramError(_0x2917c5);}),tgBot['on'](_0x359bf1(0x215),async _0x5ae3ac=>{const _0x5c4587=_0x359bf1,_0x16a762=_0x5ae3ac[_0x5c4587(0xda)],_0x28dac6=_0x5ae3ac[_0x5c4587(0xb8)];tgBot['answerCallbackQuery'](_0x5ae3ac['id'])[_0x5c4587(0x1a8)](async()=>{const _0x5a9906=_0x5c4587;_0x16a762=='orders'&&(updateSetting(_0x5a9906(0x1b6),_0x5a9906(0xb4)),updateSetting(_0x5a9906(0x192),!![]),await tgBot['sendMessage'](_0x28dac6[_0x5a9906(0x187)]['id'],_0x5a9906(0x235))[_0x5a9906(0x1b0)](_0x250c22=>{telegramError(_0x250c22);}));_0x16a762==_0x5a9906(0x168)&&(updateSetting(_0x5a9906(0x1b6),_0x5a9906(0x168)),updateSetting(_0x5a9906(0x192),!![]),await tgBot['sendMessage'](_0x28dac6['chat']['id'],_0x5a9906(0xc5))['catch'](_0xdd8aed=>{telegramError(_0xdd8aed);}));_0x16a762==_0x5a9906(0x1b5)&&(updateSetting(_0x5a9906(0x1b6),_0x5a9906(0x1b5)),updateSetting(_0x5a9906(0x192),!![]),await tgBot[_0x5a9906(0xf9)](_0x28dac6['chat']['id'],_0x5a9906(0x1c2))[_0x5a9906(0x1b0)](_0x5a0da2=>{telegramError(_0x5a0da2);}));if(!settings['telegramChatId'])tgBot[_0x5a9906(0xf9)](_0x28dac6[_0x5a9906(0x187)]['id'],_0x5a9906(0x1e7))[_0x5a9906(0x1b0)](_0x17d9d2=>{telegramError(_0x17d9d2);});}),tgBot['removeListener'](_0x5c4587(0x215));});}),tgBot[_0x560c3d(0x1de)](/\/status/,_0x76d03e=>{const _0x306318=_0x560c3d;if(!validateTelegram(_0x76d03e))return;const _0x2c96a3=getBotsWithMode();let _0x3a677a=_0x306318(0x18e);config['forEach'](_0x1ca1ad=>{const _0x47b358=_0x306318,_0x2fa2ae=_0x2c96a3[_0x47b358(0x1a4)](_0x2215cd=>_0x2215cd[_0x47b358(0xd4)]==_0x1ca1ad[_0x47b358(0xd4)])[_0x47b358(0x98)];_0x3a677a+=_0x47b358(0xf3)+_0x1ca1ad['botID']+':\x20'+_0x1ca1ad[_0x47b358(0x21c)]+_0x47b358(0x146)+_0x2fa2ae+_0x47b358(0x146)+_0x1ca1ad['live']+'\x0a';}),_0x3a677a+='\x0a',_0x3a677a+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3a677a+=!settings[_0x306318(0x192)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x3a677a+=settings[_0x306318(0x192)]?settings[_0x306318(0x1b6)]=='all'?_0x306318(0x181):_0x306318(0x1b7)+settings[_0x306318(0x1b6)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x76d03e[_0x306318(0x187)]['id'],_0x3a677a,{'parse_mode':_0x306318(0x8f)})[_0x306318(0x1b0)](_0x253ed9=>{telegramError(_0x253ed9);});}),tgBot[_0x560c3d(0x1de)](/\/restart/,_0x1d3873=>{const _0x42ce02=_0x560c3d;if(!validateTelegram(_0x1d3873))return;tgBot[_0x42ce02(0x1ad)](_0x42ce02(0x215));const _0x27a1dc=getEnabledBots();if(_0x27a1dc['length']==0x0)tgBot['sendMessage'](_0x1d3873[_0x42ce02(0x187)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x42ce02(0x1b0)](_0xe224c4=>{telegramError(_0xe224c4);});else{if(_0x27a1dc[_0x42ce02(0x140)]>0x1)_0x27a1dc[_0x42ce02(0x154)]({'botID':_0x42ce02(0x1b5)});let _0x194cb1=[],_0x228d51=[];const _0x17ba89=_0x27a1dc['length']%0x4==0x0||_0x27a1dc['length']%0x4==0x3||_0x27a1dc['length']%0x3==0x1?0x4:0x3;let _0x19ae7a=0x0;_0x27a1dc[_0x42ce02(0xab)]((_0x681b5,_0x19b035)=>{const _0x4fd2ea=_0x42ce02;if(_0x19b035%_0x17ba89==0x0)_0x228d51=[];_0x228d51[_0x4fd2ea(0x154)]({'text':_0x681b5['botID']=='all'?'All\x20bots':'Bot\x20'+_0x681b5['botID'],'callback_data':_0x681b5['botID']}),_0x19b035%_0x17ba89==0x0&&(_0x194cb1[_0x19ae7a]=_0x228d51,_0x19ae7a++);}),tgBot[_0x42ce02(0xf9)](_0x1d3873[_0x42ce02(0x187)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x194cb1}})[_0x42ce02(0x1b0)](_0x16f603=>{telegramError(_0x16f603);}),tgBot['on'](_0x42ce02(0x215),async _0x3316f9=>{const _0x24091d=_0x42ce02,_0x669f49=_0x3316f9[_0x24091d(0xda)],_0x1eaf5f=_0x3316f9[_0x24091d(0xb8)];tgBot[_0x24091d(0x18a)](_0x3316f9['id'])[_0x24091d(0x1a8)](async()=>{const _0xa4a037=_0x24091d;_0x669f49==_0xa4a037(0x1b5)?config[_0xa4a037(0xab)](_0x8aee2b=>{const _0x44955f=_0xa4a037;restartBot(_0x8aee2b[_0x44955f(0xd4)]);}):restartBot(_0x669f49);}),tgBot[_0x24091d(0x1ad)](_0x24091d(0x215));});}}),tgBot[_0x560c3d(0x1de)](/\/on/,_0xf83dae=>{const _0x2ef905=_0x560c3d;if(!validateTelegram(_0xf83dae))return;tgBot[_0x2ef905(0x1ad)](_0x2ef905(0x215));const _0x2c7d2f=getDisabledBots();if(_0x2c7d2f[_0x2ef905(0x140)]==0x0)tgBot['sendMessage'](_0xf83dae[_0x2ef905(0x187)]['id'],_0x2ef905(0x1ff))['catch'](_0x2ec326=>{telegramError(_0x2ec326);});else{if(_0x2c7d2f['length']>0x1)_0x2c7d2f['push']({'botID':_0x2ef905(0x1b5)});let _0x265225=[],_0x72ec9f=[];const _0x24b4cb=_0x2c7d2f[_0x2ef905(0x140)]%0x4==0x0||_0x2c7d2f[_0x2ef905(0x140)]%0x4==0x3||_0x2c7d2f['length']%0x3==0x1?0x4:0x3;let _0x377246=0x0;_0x2c7d2f[_0x2ef905(0xab)]((_0xa5ff8,_0x2b719f)=>{const _0x5a811c=_0x2ef905;if(_0x2b719f%_0x24b4cb==0x0)_0x72ec9f=[];_0x72ec9f[_0x5a811c(0x154)]({'text':_0xa5ff8['botID']==_0x5a811c(0x1b5)?_0x5a811c(0x1f2):'Bot\x20'+_0xa5ff8[_0x5a811c(0xd4)],'callback_data':_0xa5ff8[_0x5a811c(0xd4)]}),_0x2b719f%_0x24b4cb==0x0&&(_0x265225[_0x377246]=_0x72ec9f,_0x377246++);}),tgBot['sendMessage'](_0xf83dae[_0x2ef905(0x187)]['id'],_0x2ef905(0x189),{'reply_markup':{'inline_keyboard':_0x265225}})[_0x2ef905(0x1b0)](_0x556fa5=>{telegramError(_0x556fa5);}),tgBot['on'](_0x2ef905(0x215),async _0x515242=>{const _0x11c5a4=_0x2ef905,_0xe2bb80=_0x515242[_0x11c5a4(0xda)],_0x149f21=_0x515242[_0x11c5a4(0xb8)];tgBot[_0x11c5a4(0x18a)](_0x515242['id'])['then'](async()=>{const _0x23bb78=_0x11c5a4;_0xe2bb80==_0x23bb78(0x1b5)?(tgBot[_0x23bb78(0xf9)](_0x149f21[_0x23bb78(0x187)]['id'],_0x23bb78(0x9b))[_0x23bb78(0x1b0)](_0x5d0dbc=>{telegramError(_0x5d0dbc);}),_0x2c7d2f[_0x23bb78(0xab)](_0xa7b04e=>{const _0x1f03e8=_0x23bb78;if(_0xa7b04e[_0x1f03e8(0xd4)]!=_0x1f03e8(0x1b5))toggleBot(_0xa7b04e['botID'],toggleStatus(_0xa7b04e[_0x1f03e8(0xd4)]),'stopped');})):(tgBot[_0x23bb78(0xf9)](_0x149f21[_0x23bb78(0x187)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0xe2bb80)[_0x23bb78(0x1b0)](_0x2c238f=>{telegramError(_0x2c238f);}),toggleBot(_0xe2bb80,toggleStatus(_0xe2bb80),_0x23bb78(0x198)));}),tgBot[_0x11c5a4(0x1ad)](_0x11c5a4(0x215));});}}),tgBot['onText'](/\/off/,_0x54cbce=>{const _0x274c56=_0x560c3d;if(!validateTelegram(_0x54cbce))return;tgBot[_0x274c56(0x1ad)](_0x274c56(0x215));const _0x1ce284=getEnabledBots();if(_0x1ce284[_0x274c56(0x140)]==0x0)tgBot[_0x274c56(0xf9)](_0x54cbce[_0x274c56(0x187)]['id'],_0x274c56(0x1ef))['catch'](_0x52fda4=>{telegramError(_0x52fda4);});else{if(_0x1ce284[_0x274c56(0x140)]>0x1)_0x1ce284['push']({'botID':_0x274c56(0x1b5)});let _0x45eba0=[],_0x3d9152=[];const _0x3bab12=_0x1ce284[_0x274c56(0x140)]%0x4==0x0||_0x1ce284['length']%0x4==0x3||_0x1ce284[_0x274c56(0x140)]%0x3==0x1?0x4:0x3;let _0x777f27=0x0;_0x1ce284[_0x274c56(0xab)]((_0x20b382,_0x45fcf5)=>{const _0x275993=_0x274c56;if(_0x45fcf5%_0x3bab12==0x0)_0x3d9152=[];_0x3d9152[_0x275993(0x154)]({'text':_0x20b382[_0x275993(0xd4)]==_0x275993(0x1b5)?_0x275993(0x1f2):_0x275993(0xf3)+_0x20b382['botID'],'callback_data':_0x20b382[_0x275993(0xd4)]}),_0x45fcf5%_0x3bab12==0x0&&(_0x45eba0[_0x777f27]=_0x3d9152,_0x777f27++);}),tgBot['sendMessage'](_0x54cbce[_0x274c56(0x187)]['id'],_0x274c56(0x1e5),{'reply_markup':{'inline_keyboard':_0x45eba0}})[_0x274c56(0x1b0)](_0x4e6f3e=>{telegramError(_0x4e6f3e);}),tgBot['on'](_0x274c56(0x215),async _0x5674aa=>{const _0x39eca0=_0x274c56,_0x355709=_0x5674aa[_0x39eca0(0xda)],_0x1b438e=_0x5674aa[_0x39eca0(0xb8)];tgBot[_0x39eca0(0x18a)](_0x5674aa['id'])[_0x39eca0(0x1a8)](async()=>{const _0x4bea7e=_0x39eca0;_0x355709==_0x4bea7e(0x1b5)?(tgBot[_0x4bea7e(0xf9)](_0x1b438e[_0x4bea7e(0x187)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4bea7e(0x1b0)](_0x36edb4=>{telegramError(_0x36edb4);}),_0x1ce284['forEach'](_0x580f3c=>{const _0xe082b2=_0x4bea7e;if(_0x580f3c[_0xe082b2(0xd4)]!=_0xe082b2(0x1b5))toggleBot(_0x580f3c[_0xe082b2(0xd4)],toggleStatus(_0x580f3c['botID']),'stopped');})):(tgBot[_0x4bea7e(0xf9)](_0x1b438e[_0x4bea7e(0x187)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x355709)[_0x4bea7e(0x1b0)](_0x32aa62=>{telegramError(_0x32aa62);}),toggleBot(_0x355709,toggleStatus(_0x355709),'stopped'));}),tgBot[_0x39eca0(0x1ad)]('callback_query');});}}),tgBot[_0x560c3d(0x1de)](/\/metrics/,_0x5c63e5=>{const _0x5521da=_0x560c3d;if(!validateTelegram(_0x5c63e5))return;tgBot[_0x5521da(0x1ad)](_0x5521da(0x215));const _0x1c7013=getEnabledBots();if(_0x1c7013['length']==0x0)tgBot[_0x5521da(0xf9)](_0x5c63e5[_0x5521da(0x187)]['id'],_0x5521da(0x1ef))['catch'](_0x333b71=>{telegramError(_0x333b71);});else{if(_0x1c7013['length']>0x1){let _0x1efc0f=[],_0x1be674=[];const _0x1fe22=_0x1c7013[_0x5521da(0x140)]%0x4==0x0||_0x1c7013[_0x5521da(0x140)]%0x4==0x3||_0x1c7013['length']%0x3==0x1?0x4:0x3;let _0x529d4b=0x0;_0x1c7013[_0x5521da(0xab)]((_0x22c646,_0x40d725)=>{const _0x4c35da=_0x5521da;if(_0x40d725%_0x1fe22==0x0)_0x1be674=[];_0x1be674[_0x4c35da(0x154)]({'text':'Bot\x20'+_0x22c646['botID'],'callback_data':_0x22c646['botID']}),_0x40d725%_0x1fe22==0x0&&(_0x1efc0f[_0x529d4b]=_0x1be674,_0x529d4b++);}),tgBot['sendMessage'](_0x5c63e5[_0x5521da(0x187)]['id'],_0x5521da(0x152),{'reply_markup':{'inline_keyboard':_0x1efc0f}})[_0x5521da(0x1b0)](_0x2411cd=>{telegramError(_0x2411cd);}),tgBot['on'](_0x5521da(0x215),async _0x37094e=>{const _0x5e1c97=_0x5521da,_0xb345f2=_0x37094e['data'],_0x1ea8c1=_0x37094e[_0x5e1c97(0xb8)];tgBot['answerCallbackQuery'](_0x37094e['id'])[_0x5e1c97(0x1a8)](async()=>{const _0x1842b5=_0x5e1c97;if(pid[_0xb345f2])pid[_0xb345f2]['send']({'function':_0x1842b5(0x20d),'args':null});}),tgBot[_0x5e1c97(0x1ad)](_0x5e1c97(0x215));});}else{const _0x219cca=_0x1c7013[0x0][_0x5521da(0xd4)];if(pid[_0x219cca])pid[_0x219cca][_0x5521da(0x1e3)]({'function':_0x5521da(0x20d),'args':null});}}}),tgBot[_0x560c3d(0x1de)](/\/portfolio/,_0x41cbd9=>{const _0x1328ee=_0x560c3d;if(!validateTelegram(_0x41cbd9))return;tgBot['removeListener'](_0x1328ee(0x215));const _0x3ee115=getEnabledBots();if(_0x3ee115[_0x1328ee(0x140)]==0x0)tgBot[_0x1328ee(0xf9)](_0x41cbd9[_0x1328ee(0x187)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x1328ee(0x1b0)](_0x2a0e82=>{telegramError(_0x2a0e82);});else{if(_0x3ee115[_0x1328ee(0x140)]>0x1){let _0x597b58=[],_0x2ab2de=[];const _0x1ab543=_0x3ee115[_0x1328ee(0x140)]%0x4==0x0||_0x3ee115[_0x1328ee(0x140)]%0x4==0x3||_0x3ee115['length']%0x3==0x1?0x4:0x3;let _0x17f16=0x0;_0x3ee115[_0x1328ee(0xab)]((_0x394873,_0x120f96)=>{const _0x1c0d2c=_0x1328ee;if(_0x120f96%_0x1ab543==0x0)_0x2ab2de=[];_0x2ab2de[_0x1c0d2c(0x154)]({'text':'Bot\x20'+_0x394873['botID'],'callback_data':_0x394873['botID']}),_0x120f96%_0x1ab543==0x0&&(_0x597b58[_0x17f16]=_0x2ab2de,_0x17f16++);}),tgBot[_0x1328ee(0xf9)](_0x41cbd9[_0x1328ee(0x187)]['id'],_0x1328ee(0x178),{'reply_markup':{'inline_keyboard':_0x597b58}})['catch'](_0x35bb1c=>{telegramError(_0x35bb1c);}),tgBot['on'](_0x1328ee(0x215),async _0x19b486=>{const _0x27c76a=_0x1328ee,_0x794f2a=_0x19b486[_0x27c76a(0xda)],_0x2d2b98=_0x19b486[_0x27c76a(0xb8)];tgBot[_0x27c76a(0x18a)](_0x19b486['id'])[_0x27c76a(0x1a8)](async()=>{const _0x1ee50d=_0x27c76a;if(pid[_0x794f2a])pid[_0x794f2a][_0x1ee50d(0x1e3)]({'function':_0x1ee50d(0x76),'args':null});}),tgBot[_0x27c76a(0x1ad)]('callback_query');});}else{const _0x50ae36=_0x3ee115[0x0][_0x1328ee(0xd4)];if(pid[_0x50ae36])pid[_0x50ae36]['send']({'function':_0x1328ee(0x76),'args':null});}}}),tgBot[_0x560c3d(0x1de)](/\/update/,async _0x48c9f4=>{const _0x18198a=_0x560c3d;if(!validateTelegram(_0x48c9f4))return;tgBot[_0x18198a(0x1ad)](_0x18198a(0x215)),await getMessages();if(!updateAvailable)tgBot[_0x18198a(0xf9)](_0x48c9f4[_0x18198a(0x187)]['id'],_0x18198a(0x175))[_0x18198a(0x1b0)](_0x256142=>{telegramError(_0x256142);});else!validInstallation?tgBot[_0x18198a(0xf9)](_0x48c9f4[_0x18198a(0x187)]['id'],_0x18198a(0x1ae))['catch'](_0x1fe088=>{telegramError(_0x1fe088);}):(tgBot[_0x18198a(0xf9)](_0x48c9f4[_0x18198a(0x187)]['id'],_0x18198a(0x17e),{'reply_markup':{'inline_keyboard':[[{'text':_0x18198a(0x137),'callback_data':_0x18198a(0x155)},{'text':'No','callback_data':'no'}]]}})[_0x18198a(0x1b0)](_0x49f60a=>{telegramError(_0x49f60a);}),tgBot['on']('callback_query',async _0x1fd76d=>{const _0x55e4e8=_0x1fd76d['data'],_0x4eb567=_0x1fd76d['message'];tgBot['answerCallbackQuery'](_0x1fd76d['id'])['then'](async()=>{const _0x3bf103=_0x2cab;_0x55e4e8=='yes'&&(await tgBot[_0x3bf103(0xf9)](_0x4eb567[_0x3bf103(0x187)]['id'],_0x3bf103(0x21e))['catch'](_0x2498e6=>{telegramError(_0x2498e6);}),updateBB('update')),_0x55e4e8=='no'&&await tgBot['sendMessage'](_0x4eb567[_0x3bf103(0x187)]['id'],_0x3bf103(0x1d2))['catch'](_0x1dcf33=>{telegramError(_0x1dcf33);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0x560c3d(0x1de)](/\/reinstall/,async _0x38861f=>{const _0x680f9d=_0x560c3d;if(!validateTelegram(_0x38861f))return;tgBot[_0x680f9d(0x1ad)](_0x680f9d(0x215)),!validInstallation?tgBot[_0x680f9d(0xf9)](_0x38861f[_0x680f9d(0x187)]['id'],_0x680f9d(0x234))[_0x680f9d(0x1b0)](_0x49c861=>{telegramError(_0x49c861);}):(tgBot[_0x680f9d(0xf9)](_0x38861f[_0x680f9d(0x187)]['id'],_0x680f9d(0xd3),{'reply_markup':{'inline_keyboard':[[{'text':_0x680f9d(0x137),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x680f9d(0x1b0)](_0x445714=>{telegramError(_0x445714);}),tgBot['on']('callback_query',async _0x2d246a=>{const _0x3f1306=_0x680f9d,_0x58ccc2=_0x2d246a[_0x3f1306(0xda)],_0x11bf97=_0x2d246a['message'];tgBot['answerCallbackQuery'](_0x2d246a['id'])[_0x3f1306(0x1a8)](async()=>{const _0x185a08=_0x3f1306;_0x58ccc2=='yes'&&(await tgBot['sendMessage'](_0x11bf97[_0x185a08(0x187)]['id'],_0x185a08(0x1f0))['catch'](_0x387d45=>{telegramError(_0x387d45);}),updateBB(_0x185a08(0x16b))),_0x58ccc2=='no'&&await tgBot['sendMessage'](_0x11bf97[_0x185a08(0x187)]['id'],_0x185a08(0xb3))['catch'](_0x259df2=>{telegramError(_0x259df2);});}),tgBot['removeListener'](_0x3f1306(0x215));}));}),tgBot[_0x560c3d(0x1de)](/\/toggle/,_0xf2cdeb=>{const _0x14f19c=_0x560c3d;if(!validateTelegram(_0xf2cdeb))return;tgBot[_0x14f19c(0x1ad)]('callback_query');const _0x455861=getBotsWithMode();if(_0x455861['length']==0x0)tgBot[_0x14f19c(0xf9)](_0xf2cdeb[_0x14f19c(0x187)]['id'],_0x14f19c(0x1ef))[_0x14f19c(0x1b0)](_0x522bcb=>{telegramError(_0x522bcb);});else{let _0x5dd58e=[],_0x545a7b=[];const _0x278f5f=0x2;let _0x4907de=0x0;_0x455861[_0x14f19c(0xab)]((_0x39c035,_0x5e8b91)=>{const _0x15ea03=_0x14f19c;if(_0x5e8b91%_0x278f5f==0x0)_0x545a7b=[];_0x545a7b[_0x15ea03(0x154)]({'text':_0x15ea03(0xf3)+_0x39c035[_0x15ea03(0xd4)]+'\x20('+_0x39c035[_0x15ea03(0x98)]+')','callback_data':_0x39c035['botID']}),_0x5e8b91%_0x278f5f==0x0&&(_0x5dd58e[_0x4907de]=_0x545a7b,_0x4907de++);}),tgBot[_0x14f19c(0xf9)](_0xf2cdeb[_0x14f19c(0x187)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x5dd58e}})['catch'](_0xb1ebc1=>{telegramError(_0xb1ebc1);}),tgBot['on']('callback_query',async _0x3a277a=>{const _0x2b2f04=_0x14f19c,_0x37cf20=_0x3a277a[_0x2b2f04(0xda)],_0x89b5c2=_0x3a277a[_0x2b2f04(0xb8)];tgBot['answerCallbackQuery'](_0x3a277a['id'])['then'](async()=>{const _0x2e841d=_0x2b2f04,_0x4f4a6e=_0x455861[_0x2e841d(0x1a4)](_0x27f3d7=>_0x27f3d7['botID']==_0x37cf20),_0x546597=_0x4f4a6e[_0x2e841d(0x98)]==_0x2e841d(0x88)?_0x2e841d(0x11b):_0x2e841d(0x88);tgBot[_0x2e841d(0xf9)](_0x89b5c2[_0x2e841d(0x187)]['id'],_0x2e841d(0xa9)+_0x37cf20+'\x20to\x20'+_0x546597+_0x2e841d(0x83))[_0x2e841d(0x1b0)](_0x334a25=>{telegramError(_0x334a25);}),toggleBotMode(_0x37cf20);}),tgBot[_0x2b2f04(0x1ad)](_0x2b2f04(0x215));});}}),tgBot[_0x560c3d(0x1de)](/\/names/,_0x40360b=>{const _0x3c3dfb=_0x560c3d;if(!validateTelegram(_0x40360b))return;let _0x23bda5='';config[_0x3c3dfb(0xab)](_0x4c38f2=>{const _0x2107e7=_0x3c3dfb;_0x23bda5+=_0x2107e7(0xf3)+_0x4c38f2[_0x2107e7(0xd4)]+':\x20'+_0x4c38f2[_0x2107e7(0x1bb)]+'\x0a';}),tgBot[_0x3c3dfb(0xf9)](_0x40360b[_0x3c3dfb(0x187)]['id'],_0x23bda5,{'parse_mode':_0x3c3dfb(0x8f)})['catch'](_0x2dc592=>{telegramError(_0x2dc592);});}),tgBot[_0x560c3d(0x1de)](/\/disable/,_0x5feff8=>{const _0x29a868=_0x560c3d;if(!validateTelegram(_0x5feff8))return;tgBot[_0x29a868(0xf9)](_0x5feff8[_0x29a868(0x187)]['id'],_0x29a868(0x8d))[_0x29a868(0x1b0)](_0x2d5669=>{telegramError(_0x2d5669);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x2fbc7a=>{if(!validateTelegram(_0x2fbc7a))return;tgBot['sendMessage'](_0x2fbc7a['chat']['id'],_0x5e87db)['catch'](_0x222c54=>{telegramError(_0x222c54);});}),tgBot['on'](_0x560c3d(0xba),_0x3cfc02=>{const _0x37c998=_0x560c3d;_0x3cfc02[_0x37c998(0x1e6)]()[_0x37c998(0x1c9)]('404\x20Not\x20Found')&&(logger[_0x37c998(0x15a)](_0x37c998(0x1db)),tgBot[_0x37c998(0x7b)](),tgBot=null,io['to']('botmanager')[_0x37c998(0xeb)]('notification',_0x37c998(0x1db)));}),process[_0x560c3d(0x226)](_0x560c3d(0x167),()=>{const _0xbf03e2=_0x560c3d;if(tgBot)tgBot[_0xbf03e2(0x7b)]();process[_0xbf03e2(0x10c)](0x1);}),process[_0x560c3d(0x226)](_0x560c3d(0x15d),()=>{const _0x1d1d2b=_0x560c3d;if(tgBot)tgBot[_0x1d1d2b(0x7b)]();process[_0x1d1d2b(0x10c)](0x1);});}}function disableTelegram(){const _0x46a4bc=_0x53cc86;tgBot&&(tgBot[_0x46a4bc(0x7b)](),tgBot=null);}function sendTelegram(_0x15c7f2,_0xc19908){const _0x27b30e=_0x53cc86;if(settings[_0x27b30e(0x192)]){if(settings[_0x27b30e(0x1b6)]==_0x27b30e(0x1b5)||(_0xc19908[_0x27b30e(0x80)]==_0x27b30e(0x1b8)||_0xc19908[_0x27b30e(0x80)]==_0x27b30e(0x118)||_0xc19908['type']==_0x27b30e(0x1c4))&&settings[_0x27b30e(0x1b6)]==_0x27b30e(0x168)||_0xc19908[_0x27b30e(0x80)]==_0x27b30e(0x209)&&settings[_0x27b30e(0x1b6)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0xc19908[_0x27b30e(0xdd)])tgBot[_0x27b30e(0xf9)](settings[_0x27b30e(0x228)],_0xc19908['botname']+_0x27b30e(0xc6)+_0xc19908['event'])['catch'](_0x1cf548=>{telegramError(_0x1cf548);});else tgBot[_0x27b30e(0xf9)](settings[_0x27b30e(0x228)],_0x27b30e(0xf3)+_0x15c7f2+'\x20>\x20'+_0xc19908[_0x27b30e(0x160)])[_0x27b30e(0x1b0)](_0x4e3671=>{telegramError(_0x4e3671);});}}}}async function sendTelegramMsg(_0x3d4aa5,_0x3652f5=_0x53cc86(0x8f)){const _0x100003=_0x53cc86;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await tgBot[_0x100003(0xf9)](settings[_0x100003(0x228)],_0x3d4aa5,{'parse_mode':_0x3652f5})[_0x100003(0x1b0)](_0x11dc95=>{telegramError(_0x11dc95);}),!![]):![];}function getDeviceWithIp(_0x51b7e2){const _0x502cbc=_0x53cc86;return devices[_0x502cbc(0x1a4)](_0x25db27=>_0x25db27['ip']===_0x51b7e2);}function temporaryAccess2FA(_0x11c449,_0x5fe832){const _0x401197=_0x53cc86;let _0x4fbbc9=new Date(),_0x60474=![];if(lastIpApproval){if(_0x4fbbc9-lastIpApproval<0x1388)_0x60474=!![];}lastIpApproval=new Date();if(_0x60474)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x401197(0x1ad)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5fe832)[_0x401197(0xa3)]+_0x401197(0x1d6),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x401197(0x170),'callback_data':'5'},{'text':_0x401197(0x213),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x401197(0xe6),'callback_data':_0x401197(0xe6)}]]}})[_0x401197(0x1b0)](_0xd431a0=>{telegramError(_0xd431a0);}),tgBot['on'](_0x401197(0x215),async _0x3d80a3=>{const _0x201858=_0x401197,_0x2fd390=_0x3d80a3[_0x201858(0xda)],_0x2bbae2=_0x3d80a3[_0x201858(0xb8)];tgBot['answerCallbackQuery'](_0x3d80a3['id'])['then'](async()=>{const _0x2b9d02=_0x201858;devices[_0x11c449][_0x2b9d02(0xf5)]={'clientip':_0x5fe832,'timestamp':new Date()[_0x2b9d02(0x1ac)](),'expiry':_0x2fd390},_0x2fd390!=_0x2b9d02(0xe6)?(await tgBot[_0x2b9d02(0xf9)](_0x2bbae2[_0x2b9d02(0x187)]['id'],_0x2b9d02(0x237)+_0x2fd390+_0x2b9d02(0x1cd),{'parse_mode':_0x2b9d02(0x8f)})[_0x2b9d02(0x1b0)](_0x14e321=>{telegramError(_0x14e321);}),io['to'](_0x11c449)['emit']('status',{'access':{'allow':![],'reason':_0x2b9d02(0x1fc),'token':null}})):(await tgBot[_0x2b9d02(0xf9)](_0x2bbae2[_0x2b9d02(0x187)]['id'],'Temporary\x20access\x20rejected')[_0x2b9d02(0x1b0)](_0x3a8826=>{telegramError(_0x3a8826);}),io['to'](_0x11c449)['emit'](_0x2b9d02(0x21c),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x201858(0x1ad)](_0x201858(0x215));}));}function loginAccess2FA(_0x1594d8,_0x564b8c){const _0x34355c=_0x53cc86;tgBot&&settings[_0x34355c(0x228)]&&(tgBot['removeListener'](_0x34355c(0x215)),tgBot[_0x34355c(0xf9)](settings[_0x34355c(0x228)],_0x34355c(0xfc)+normalizeIP(_0x564b8c)['show']+'</b>\x20?',{'parse_mode':_0x34355c(0x8f),'reply_markup':{'inline_keyboard':[[{'text':_0x34355c(0x196),'callback_data':loginExpiry},{'text':_0x34355c(0xe6),'callback_data':_0x34355c(0xe6)}]]}})[_0x34355c(0x1b0)](_0x32611b=>{telegramError(_0x32611b);}),tgBot['on'](_0x34355c(0x215),async _0x5eb7df=>{const _0x23f755=_0x34355c,_0x4418a8=_0x5eb7df[_0x23f755(0xda)],_0x15aed6=_0x5eb7df[_0x23f755(0xb8)];tgBot[_0x23f755(0x18a)](_0x5eb7df['id'])[_0x23f755(0x1a8)](async()=>{const _0x463fc4=_0x23f755;devices[_0x1594d8][_0x463fc4(0xa4)]={'clientip':_0x564b8c,'timestamp':new Date()[_0x463fc4(0x1ac)](),'expiry':_0x4418a8},_0x4418a8!=_0x463fc4(0xe6)?(await tgBot[_0x463fc4(0xf9)](_0x15aed6[_0x463fc4(0x187)]['id'],'Login\x20accepted',{'parse_mode':_0x463fc4(0x8f)})[_0x463fc4(0x1b0)](_0x11e99c=>{telegramError(_0x11e99c);}),io['to'](_0x1594d8)['emit'](_0x463fc4(0x21c),{'access':{'allow':![],'reason':_0x463fc4(0x1fc),'token':null}})):(await tgBot['sendMessage'](_0x15aed6['chat']['id'],'Login\x20rejected')[_0x463fc4(0x1b0)](_0x2e8843=>{telegramError(_0x2e8843);}),io['to'](_0x1594d8)[_0x463fc4(0xeb)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x23f755(0x215));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x52046f=_0x53cc86;return dbConfig[_0x52046f(0x100)](_0x52046f(0x90))[_0x52046f(0x139)](_0x52046f(0xd4))['filter']({'status':_0x52046f(0x1a5)})[_0x52046f(0x164)]()||[];}function getDisabledBots(){const _0x5e535f=_0x53cc86;return dbConfig[_0x5e535f(0x100)](_0x5e535f(0x90))['sortBy'](_0x5e535f(0xd4))['filter']({'status':_0x5e535f(0x1d9)})['value']()||[];}function getBotAttributes(_0x265d75){const _0x3d1055=_0x53cc86;let _0x43852c={};const _0x31b7bb=configpath+'bot-'+_0x265d75+'-config.json',_0x60e8d2=fs['existsSync'](_0x31b7bb);if(_0x60e8d2){const _0x48811d=fs[_0x3d1055(0x233)](_0x31b7bb);try{const _0x4b36be=JSON[_0x3d1055(0xe3)](_0x48811d),_0xc39990=_0x4b36be?_0x4b36be[_0x3d1055(0x1f8)][0x0][_0x3d1055(0x210)]:![];_0x43852c['mode']=_0xc39990?_0x3d1055(0x88):_0x3d1055(0x11b),_0x43852c[_0x3d1055(0x1bb)]=_0x4b36be?_0x4b36be[_0x3d1055(0x1f8)][0x0][_0x3d1055(0x1bb)]:_0x3d1055(0xf3)+_0x265d75;}catch(_0x13f043){_0x43852c['mode']=_0x3d1055(0x11b),_0x43852c[_0x3d1055(0x1bb)]=_0x3d1055(0xf3)+_0x265d75;}}else _0x43852c['mode']='manual',_0x43852c[_0x3d1055(0x1bb)]=_0x3d1055(0xf3)+_0x265d75;return _0x43852c;}function getBotsWithMode(){const _0x56e5ec=_0x53cc86,_0x4f5d20=dbConfig[_0x56e5ec(0x100)](_0x56e5ec(0x90))['sortBy']('botID')[_0x56e5ec(0x164)]()||[];return _0x4f5d20[_0x56e5ec(0xab)](_0x6795fa=>{const _0xb1fe7b=_0x56e5ec;let _0x458ab5=getBotAttributes(_0x6795fa[_0xb1fe7b(0xd4)]);_0x6795fa[_0xb1fe7b(0x98)]=_0x458ab5[_0xb1fe7b(0x98)];}),_0x4f5d20;}function getBotExchanges(){const _0x329a54=_0x53cc86;let _0x2a4009=[];const _0x4e8f76=dbConfig[_0x329a54(0x100)](_0x329a54(0x90))[_0x329a54(0x139)](_0x329a54(0xd4))[_0x329a54(0x164)]()||[];_0x4e8f76['forEach'](_0x3a49a8=>{const _0x1f6c6e=_0x329a54;if(_0x3a49a8[_0x1f6c6e(0x21c)]==_0x1f6c6e(0x1a5)){const _0x359364=configpath+_0x1f6c6e(0x12f)+_0x3a49a8[_0x1f6c6e(0xd4)]+_0x1f6c6e(0x16d),_0x5c2add=fs['existsSync'](_0x359364);let _0x2fc1f2;if(_0x5c2add){const _0x4bea05=fs[_0x1f6c6e(0x233)](_0x359364);try{const _0x23653a=JSON[_0x1f6c6e(0xe3)](_0x4bea05);_0x2fc1f2=_0x23653a?_0x23653a[_0x1f6c6e(0x1f8)][0x0]['exchange']:null;}catch(_0x396f3d){}}if(_0x2fc1f2)_0x2a4009['push'](_0x2fc1f2);}});const _0x4e6755=[...new Set(_0x2a4009)]['sort']();return _0x4e6755;}async function initUser(){const _0x280416=_0x53cc86;if(!settings[_0x280416(0x19b)]){const _0x4de3af=uuidRandom();mixpanel[_0x280416(0xe8)](_0x4de3af),updateSetting(_0x280416(0x19b),_0x4de3af);}}async function initSecure(){const _0x252e8c=_0x53cc86;let _0x23cbb5=getSecure();if(!_0x23cbb5[_0x252e8c(0x19a)]('secret')){let _0x55e6fa=await generateKeys();_0x23cbb5['publicKey']=_0x55e6fa['publicKey'],_0x23cbb5['privateKey']=_0x55e6fa[_0x252e8c(0x103)],_0x23cbb5[_0x252e8c(0x14a)]=crypto[_0x252e8c(0xfd)](0x20)[_0x252e8c(0x1e6)]('hex');;storeSecure(_0x23cbb5);}}function getSettings(){const _0xf378dc=_0x53cc86;return dbSettings[_0xf378dc(0x100)](_0xf378dc(0x91))[_0xf378dc(0x164)]()||{};}function getSecure(){const _0x35a8b7=_0x53cc86;return dbSecure[_0x35a8b7(0x100)](_0x35a8b7(0x13b))[_0x35a8b7(0x164)]()||{};}function getBlacklist(){const _0x5a0a07=_0x53cc86;return dbSecure[_0x5a0a07(0x100)]('blacklist')[_0x5a0a07(0x164)]()||[];}function broadcastToBots(_0x3163c0,_0x10519b){const _0x36554f=_0x53cc86;config[_0x36554f(0xab)](_0x2657ec=>{const _0x4ac20a=_0x36554f;if(_0x2657ec[_0x4ac20a(0x21c)]==_0x4ac20a(0x1a5)&&_0x2657ec[_0x4ac20a(0x1f6)]==_0x4ac20a(0xf7)||_0x2657ec[_0x4ac20a(0x21c)]=='new'&&_0x2657ec['live']==_0x4ac20a(0xf7)){if(pid[_0x2657ec[_0x4ac20a(0xd4)]])pid[_0x2657ec['botID']][_0x4ac20a(0x1e3)]({[_0x3163c0]:_0x10519b});}});}function storeSettings(_0x23477d,_0x1b150c=![]){const _0x1d8fa4=_0x53cc86;_0x23477d={...settings,..._0x23477d};if(_0x1b150c&&_0x23477d['bbPassword']!=_0x1d8fa4(0x224)&&_0x23477d[_0x1d8fa4(0x1c0)]!='***'&&_0x23477d[_0x1d8fa4(0x1c0)]!=''){const _0x14faf5=crypt[_0x1d8fa4(0x18d)](secure[_0x1d8fa4(0x103)],_0x23477d['bbPassword'])[_0x1d8fa4(0xb8)][_0x1d8fa4(0x21f)]('@')[0x0],_0x21a4af=bcrypt[_0x1d8fa4(0x11d)](_0x14faf5,saltRounds);_0x23477d={..._0x23477d,'bbPassword':_0x21a4af};}if(_0x1b150c&&_0x23477d[_0x1d8fa4(0xc2)]!='************'&&_0x23477d[_0x1d8fa4(0xc2)]!=_0x1d8fa4(0x10e)&&_0x23477d[_0x1d8fa4(0xc2)]!=''){const _0x53f25d=crypt[_0x1d8fa4(0x18d)](secure[_0x1d8fa4(0x103)],_0x23477d[_0x1d8fa4(0xc2)])[_0x1d8fa4(0xb8)][_0x1d8fa4(0x21f)]('@')[0x0];_0x23477d={..._0x23477d,'telegramToken':_0x53f25d};}const _0x59a461=_0x23477d[_0x1d8fa4(0xc2)]!=_0x1d8fa4(0x224)&&_0x23477d[_0x1d8fa4(0xc2)]!=settings[_0x1d8fa4(0xc2)]||_0x23477d['telegramUsername']!=settings[_0x1d8fa4(0x1af)],_0x168af4=_0x23477d['telegramToken']==''||_0x23477d[_0x1d8fa4(0x1af)]=='';if(_0x59a461)_0x23477d['telegramEvents']=_0x1d8fa4(0x1b5);for(const [_0x4714b3,_0xa80fa]of Object[_0x1d8fa4(0x166)](_0x23477d)){if(_0x4714b3==_0x1d8fa4(0xc2)&&_0xa80fa==_0x1d8fa4(0x224)){_0x23477d[_0x1d8fa4(0xc2)]=settings[_0x1d8fa4(0xc2)];continue;};if(_0x4714b3==_0x1d8fa4(0x1c0)&&_0xa80fa=='************'){_0x23477d[_0x1d8fa4(0x1c0)]=settings['bbPassword'];continue;};dbSettings[_0x1d8fa4(0x1fe)]('settings.'+_0x4714b3,_0xa80fa)['write']();}settings=_0x23477d,io['to'](_0x1d8fa4(0x108))['emit'](_0x1d8fa4(0x91),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']),broadcastToBots(_0x1d8fa4(0x84),settings[_0x1d8fa4(0x84)]);if(_0x59a461&&!_0x168af4)initTelegram();if(_0x59a461&&_0x168af4)disableTelegram();getAllClients()[_0x1d8fa4(0xab)](_0x179c91=>{const _0x2eb657=_0x1d8fa4;getSocket(_0x179c91['id'])[_0x2eb657(0xeb)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0xa7eb9f,_0x50f85f){const _0x59dee0=_0x53cc86;dbSettings[_0x59dee0(0x1fe)]('settings.'+_0xa7eb9f,_0x50f85f)[_0x59dee0(0x1e0)](),settings=getSettings(),io['to'](_0x59dee0(0x108))[_0x59dee0(0xeb)](_0x59dee0(0x91),cleanSettings());}function storeSecure(_0xf6e22f){const _0x253755=_0x53cc86;dbSecure[_0x253755(0x100)]('secure')[_0x253755(0x154)](_0xf6e22f)[_0x253755(0x1e0)](),secure=_0xf6e22f;}function addBlacklist(_0x31879d){const _0x416e27=_0x53cc86;cleanBlacklist();let _0xdc15f2;devices[_0x31879d][_0x416e27(0xf5)]?_0xdc15f2=Math[_0x416e27(0xbe)](devices[_0x31879d][_0x416e27(0xf5)][_0x416e27(0x1d7)],loginExpiry):_0xdc15f2=loginExpiry,dbSecure[_0x416e27(0x100)]('blacklist')['push']({'expiry':new Date()[_0x416e27(0x1ac)]()+_0xdc15f2*0x3c*0x3e8,'token':devices[_0x31879d]['access'][_0x416e27(0x15b)]})[_0x416e27(0x1e0)](),blacklist=dbSecure['get'](_0x416e27(0x82))[_0x416e27(0x164)]();}function cleanBlacklist(){const _0x13319e=_0x53cc86;let _0x5a2d21=dbSecure[_0x13319e(0x100)](_0x13319e(0x82))[_0x13319e(0x105)]()['value'](),_0x2ddc9a=new Date()[_0x13319e(0x1ac)]();_0x5a2d21[_0x13319e(0xab)](_0x40499d=>{const _0x494357=_0x13319e;_0x40499d[_0x494357(0x1d7)]<_0x2ddc9a&&dbSecure[_0x494357(0x100)](_0x494357(0x82))[_0x494357(0x17b)]({'expiry':_0x40499d['expiry']})[_0x494357(0x1e0)]();});}function initStates(){const _0x1a2c61=_0x53cc86;let _0x131eb4=getConfiguration();_0x131eb4[_0x1a2c61(0xab)](_0x4183cc=>{const _0x1391e1=_0x1a2c61;_0x4183cc[_0x1391e1(0x1f6)]='stopped';}),storeConfiguration(_0x131eb4);}function onKeys(){const _0x63c067=new RSA();return new Promise(_0x11f5f9=>{_0x63c067['generateKeyPairAsync']()['then'](_0x56428d=>{_0x11f5f9(_0x56428d);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5f2900=_0x53cc86;let _0x266b2f=getSettings(),_0xf40bd9=![];!_0x266b2f[_0x5f2900(0x19a)](_0x5f2900(0x9a))&&(_0x266b2f[_0x5f2900(0x9a)]=0x0,_0xf40bd9=!![]);!_0x266b2f[_0x5f2900(0x19a)](_0x5f2900(0x1fa))&&(_0x266b2f[_0x5f2900(0x1fa)]=0x0,_0xf40bd9=!![]);!_0x266b2f['hasOwnProperty']('latestversion')&&(_0x266b2f[_0x5f2900(0xd6)]=_0x5f2900(0x227),_0xf40bd9=!![]);!_0x266b2f['hasOwnProperty']('onepagemode')&&(_0x266b2f[_0x5f2900(0x84)]=![],_0xf40bd9=!![]);if(_0xf40bd9)storeSettings(_0x266b2f);try{fs[_0x5f2900(0x11f)](configbackuppath,{'withFileTypes':!![]})[_0x5f2900(0xab)](_0x47ac0a=>{const _0x54e1e8=_0x5f2900;if(!_0x47ac0a[_0x54e1e8(0x1f9)]()){if(!_0x47ac0a[_0x54e1e8(0x1d5)][_0x54e1e8(0x17a)]('backup-full@'))fs[_0x54e1e8(0x116)](configbackuppath+_0x47ac0a[_0x54e1e8(0x1d5)]);}else fs[_0x54e1e8(0xd7)](configbackuppath+_0x47ac0a[_0x54e1e8(0x1d5)],{'recursive':!![]});});}catch(_0x324b02){logger[_0x5f2900(0xe2)](_0x5f2900(0x125),_0x324b02);}}function storeConfiguration(_0x50a462){const _0x67084f=_0x53cc86;dbConfig[_0x67084f(0x100)](_0x67084f(0x90))[_0x67084f(0x17b)]()[_0x67084f(0x1e0)](),_0x50a462['forEach'](_0x36a5c4=>{const _0x264981=_0x67084f;delete _0x36a5c4[_0x264981(0x98)];}),dbConfig['get'](_0x67084f(0x90))[_0x67084f(0x154)](..._0x50a462)['write'](),config=_0x50a462;}function resetPassword(){const _0x4477b9=_0x53cc86;tgBot&&settings[_0x4477b9(0x228)]&&(tgBot[_0x4477b9(0x1ad)]('callback_query'),tgBot['sendMessage'](settings[_0x4477b9(0x228)],_0x4477b9(0x191),{'parse_mode':_0x4477b9(0x8f),'reply_markup':{'inline_keyboard':[[{'text':_0x4477b9(0x155),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x4477b9(0x1b0)](_0x1bd2a4=>{telegramError(_0x1bd2a4);}),tgBot['on'](_0x4477b9(0x215),async _0x5cd500=>{const _0x540911=_0x4477b9,_0x1c92f0=_0x5cd500[_0x540911(0xda)],_0x448f43=_0x5cd500[_0x540911(0xb8)];tgBot[_0x540911(0x18a)](_0x5cd500['id'])[_0x540911(0x1a8)](async()=>{const _0x21020a=_0x540911;if(_0x1c92f0!='no'){const _0x47dec6=0xf,_0x2e8a72=_0x21020a(0x1ba),_0x14856=Array[_0x21020a(0x169)](crypto[_0x21020a(0x165)](new Uint32Array(_0x47dec6)))[_0x21020a(0x22e)](_0x4ff33f=>_0x2e8a72[_0x4ff33f%_0x2e8a72['length']])[_0x21020a(0x1b3)](''),_0x2d4acd=bcrypt[_0x21020a(0x11d)](_0x14856,saltRounds);storeSettings({'bbPassword':_0x2d4acd}),await tgBot[_0x21020a(0xf9)](_0x448f43[_0x21020a(0x187)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x14856,{'parse_mode':_0x21020a(0x8f)})['catch'](_0x1f386d=>{telegramError(_0x1f386d);});}else await tgBot[_0x21020a(0xf9)](_0x448f43[_0x21020a(0x187)]['id'],_0x21020a(0x223))[_0x21020a(0x1b0)](_0x532b16=>{telegramError(_0x532b16);});}),tgBot['removeListener'](_0x540911(0x215));}));}async function confirmRestore(_0xd37e5e,_0x346a61){const _0x34ed4c=_0x53cc86;io['to']('botmanager')[_0x34ed4c(0xeb)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x34ed4c(0x1c4)),tgBot&&settings[_0x34ed4c(0x228)]&&(tgBot[_0x34ed4c(0x1ad)](_0x34ed4c(0x215)),await tgBot['sendMessage'](settings['telegramChatId'],_0x34ed4c(0x136),{'parse_mode':_0x34ed4c(0x8f),'reply_markup':{'inline_keyboard':[[{'text':_0x34ed4c(0x155),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x34ed4c(0x1b0)](_0x4aab14=>{telegramError(_0x4aab14);}),tgBot['on']('callback_query',async _0x297fcb=>{const _0x14eef5=_0x34ed4c,_0x1dc95b=_0x297fcb['data'],_0x2c96a7=_0x297fcb['message'];tgBot[_0x14eef5(0x18a)](_0x297fcb['id'])[_0x14eef5(0x1a8)](async()=>{const _0x26c160=_0x14eef5;_0x1dc95b==_0x26c160(0x155)?(await tgBot[_0x26c160(0xf9)](_0x2c96a7['chat']['id'],_0x26c160(0x20a),{'parse_mode':_0x26c160(0x8f)})[_0x26c160(0x1b0)](_0x30fa60=>{telegramError(_0x30fa60);}),unzipFile(_0xd37e5e,_0x346a61)):(logger[_0x26c160(0xe2)]('Restore\x20process\x20aborted'),await tgBot[_0x26c160(0xf9)](_0x2c96a7['chat']['id'],_0x26c160(0x106))[_0x26c160(0x1b0)](_0x4676fe=>{telegramError(_0x4676fe);}));}),tgBot[_0x14eef5(0x1ad)](_0x14eef5(0x215));}));}function getServerTime(){const _0x2bb36e=_0x53cc86,_0x5e9dd6=new Date();return _0x5e9dd6[_0x2bb36e(0x104)]()+'/'+(_0x5e9dd6[_0x2bb36e(0x201)]()+0x1)[_0x2bb36e(0x1e6)]()[_0x2bb36e(0x9d)](0x2,'0')+'/'+_0x5e9dd6[_0x2bb36e(0x216)]()[_0x2bb36e(0x1e6)]()[_0x2bb36e(0x9d)](0x2,'0')+'\x20'+_0x5e9dd6['getHours']()['toString']()[_0x2bb36e(0x9d)](0x2,'0')+':'+_0x5e9dd6[_0x2bb36e(0x96)]()[_0x2bb36e(0x1e6)]()[_0x2bb36e(0x9d)](0x2,'0')+':'+_0x5e9dd6['getSeconds']()[_0x2bb36e(0x1e6)]()[_0x2bb36e(0x9d)](0x2,'0');}function getTimeStamp(){const _0x316d21=_0x53cc86,_0x392e65=shiftedTime();return _0x392e65[_0x316d21(0x104)]()+'/'+(_0x392e65['getMonth']()+0x1)['toString']()[_0x316d21(0x9d)](0x2,'0')+'/'+_0x392e65['getDate']()['toString']()[_0x316d21(0x9d)](0x2,'0')+'\x20'+_0x392e65['getHours']()[_0x316d21(0x1e6)]()[_0x316d21(0x9d)](0x2,'0')+':'+_0x392e65[_0x316d21(0x96)]()['toString']()['padStart'](0x2,'0')+':'+_0x392e65['getSeconds']()[_0x316d21(0x1e6)]()[_0x316d21(0x9d)](0x2,'0');}function getCleanTimeStamp(){const _0x3878bb=_0x53cc86,_0x441c51=shiftedTime();return _0x441c51['getFullYear']()+(_0x441c51[_0x3878bb(0x201)]()+0x1)[_0x3878bb(0x1e6)]()['padStart'](0x2,'0')+_0x441c51['getDate']()[_0x3878bb(0x1e6)]()[_0x3878bb(0x9d)](0x2,'0')+'-'+_0x441c51[_0x3878bb(0x1a6)]()[_0x3878bb(0x1e6)]()[_0x3878bb(0x9d)](0x2,'0')+_0x441c51[_0x3878bb(0x96)]()['toString']()['padStart'](0x2,'0')+_0x441c51[_0x3878bb(0x1a7)]()[_0x3878bb(0x1e6)]()[_0x3878bb(0x9d)](0x2,'0');}function shiftedTime(){const _0x40d0be=_0x53cc86,_0x56d042=new Date();let _0x3f0a92=_0x56d042;if(settings['timeshift']&&settings[_0x40d0be(0xdf)]!==0x0)_0x3f0a92=fns[_0x40d0be(0x1eb)](_0x56d042,{'hours':settings['timeshift']});return _0x3f0a92;}function startScheduler(){const _0xbd36d2=_0x53cc86,_0x14bae9=new Date()[_0xbd36d2(0x119)](),_0x1da0c6=shiftedTime()[_0xbd36d2(0x1a6)]();_0x1da0c6==0x4&&backupConfigFiles();_0x1da0c6==0x0&&rotateLogFiles();_0x14bae9%0x6==0x0&&triggerAnalytics();_0x14bae9%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x417f09){const _0x425b5c=_0x53cc86;logger['debug']('Restore\x20backup\x20file\x20'+_0x417f09);const _0x2db780=getBotsWithMode();_0x2db780[_0x425b5c(0x140)]>0x0?confirmRestore(configbackuppath,_0x417f09):unzipFile(configbackuppath,_0x417f09);}async function getBackupFiles(_0x140c13=null){const _0x2c6914=_0x53cc86;let _0x2b3341=[],_0x476302=fs[_0x2c6914(0x11f)](configbackuppath,{'withFileTypes':!![]});_0x476302['sort']((_0x38c212,_0x32f8be)=>_0x38c212[_0x2c6914(0x1d5)]<_0x32f8be[_0x2c6914(0x1d5)]?0x1:_0x32f8be[_0x2c6914(0x1d5)]<_0x38c212['name']?-0x1:0x0),_0x476302[_0x2c6914(0xab)](_0x33aca6=>{const _0x579805=_0x2c6914;if(!_0x33aca6['isDirectory']()&&_0x33aca6['name']['startsWith'](_0x579805(0x110))&&_0x33aca6['name']['endsWith'](_0x579805(0x21d))){const _0x20c878=formatDate(fs[_0x579805(0xc7)](configbackuppath+_0x33aca6[_0x579805(0x1d5)])[_0x579805(0x147)]);_0x2b3341['push']({'name':_0x33aca6['name'],'mtime':_0x20c878});}});if(_0x140c13)io['to'](_0x140c13)[_0x2c6914(0xeb)]('backup-files',_0x2b3341);else return _0x2b3341;}async function backupConfigFiles(){const _0x4cadd7=_0x53cc86;await zipFiles(_0x4cadd7(0x162));const _0x1e20ae=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x4cadd7(0x8e),configbackuppath+('backup-full@'+_0x1e20ae+_0x4cadd7(0x21d)));let _0x230a3d=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x230a3d[_0x4cadd7(0x163)]((_0x41d10d,_0x5b3234)=>_0x41d10d[_0x4cadd7(0x1d5)]<_0x5b3234[_0x4cadd7(0x1d5)]?0x1:_0x5b3234[_0x4cadd7(0x1d5)]<_0x41d10d[_0x4cadd7(0x1d5)]?-0x1:0x0),_0x230a3d[_0x4cadd7(0x140)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x230a3d[_0x230a3d['length']-0x1][_0x4cadd7(0x1d5)]);}function rotateLogFiles(){const _0x44f3b5=_0x53cc86,_0x35af16=fs[_0x44f3b5(0xc7)](logspath+_0x44f3b5(0x99)),_0x3a5b93=_0x35af16[_0x44f3b5(0x219)]/0x400;if(_0x3a5b93>0x64){let _0x16cf04=fs[_0x44f3b5(0x11f)](logspath,{'withFileTypes':!![]});_0x16cf04['sort']((_0x2d6bb8,_0x1dfe76)=>_0x2d6bb8['name']<_0x1dfe76[_0x44f3b5(0x1d5)]?0x1:_0x1dfe76[_0x44f3b5(0x1d5)]<_0x2d6bb8[_0x44f3b5(0x1d5)]?-0x1:0x0),_0x16cf04[_0x44f3b5(0xab)](_0x15208d=>{const _0x1a0f19=_0x44f3b5;if(_0x15208d[_0x1a0f19(0x1d5)]=='output-002.log')fs[_0x1a0f19(0x149)](logspath+_0x15208d[_0x1a0f19(0x1d5)],logspath+_0x1a0f19(0x186));if(_0x15208d[_0x1a0f19(0x1d5)]=='output-001.log')fs[_0x1a0f19(0x149)](logspath+_0x15208d['name'],logspath+_0x1a0f19(0x1e1));_0x15208d[_0x1a0f19(0x1d5)]==_0x1a0f19(0x99)&&(fs[_0x1a0f19(0x149)](logspath+_0x15208d[_0x1a0f19(0x1d5)],logspath+_0x1a0f19(0x128)),fs[_0x1a0f19(0x20c)](logspath+_0x15208d[_0x1a0f19(0x1d5)],''));});}}async function zipFiles(_0x95239b){const _0x318b44=_0x53cc86;let _0x3b0297;if(_0x95239b==_0x318b44(0x13e))_0x3b0297=logspath;if(_0x95239b==_0x318b44(0x1c6))_0x3b0297=configpath;if(_0x95239b=='backup-full')_0x3b0297=configpath;let _0x513385=fs[_0x318b44(0x11f)](_0x3b0297,{'withFileTypes':!![]});const _0x133058=new require(_0x318b44(0xfb))();_0x513385[_0x318b44(0xab)](_0x11fe0a=>{const _0x436cea=_0x318b44;if(!_0x11fe0a[_0x436cea(0x1f9)]()){let _0x36c172=fs[_0x436cea(0x233)](_0x3b0297+_0x11fe0a['name']);if(_0x95239b==_0x436cea(0x1c6)){const _0x28fdce=/^bot-[0-9]{3}-config.json$/,_0x4eedd2=_0x28fdce[_0x436cea(0xad)](_0x11fe0a[_0x436cea(0x1d5)]);if(_0x4eedd2){const _0x3c34b8=JSON[_0x436cea(0xe3)](_0x36c172);if(_0x3c34b8[_0x436cea(0x1f8)][0x0]){_0x3c34b8['bot'][0x0]['apiKey']=_0x436cea(0x10e),_0x3c34b8['bot'][0x0]['apiSecret']=_0x436cea(0x10e);if(_0x3c34b8[_0x436cea(0x1f8)][0x0][_0x436cea(0xc1)])_0x3c34b8[_0x436cea(0x1f8)][0x0][_0x436cea(0xc1)]='***';}_0x36c172=JSON[_0x436cea(0x8a)](_0x3c34b8,null,0x2);}if(_0x11fe0a[_0x436cea(0x1d5)]==_0x436cea(0x112)){const _0x3677b8=JSON[_0x436cea(0xe3)](_0x36c172);if(_0x3677b8['settings'][_0x436cea(0x86)])_0x3677b8[_0x436cea(0x91)][_0x436cea(0x86)]=![];if(_0x3677b8['settings'][_0x436cea(0x1c0)])_0x3677b8[_0x436cea(0x91)][_0x436cea(0x1c0)]=_0x436cea(0x10e);if(_0x3677b8[_0x436cea(0x91)][_0x436cea(0xc2)])_0x3677b8[_0x436cea(0x91)][_0x436cea(0xc2)]='***';if(_0x3677b8[_0x436cea(0x91)][_0x436cea(0x228)])_0x3677b8[_0x436cea(0x91)][_0x436cea(0x228)]=null;_0x36c172=JSON[_0x436cea(0x8a)](_0x3677b8,null,0x2);}if(_0x11fe0a[_0x436cea(0x1d5)]!=_0x436cea(0x75))_0x133058[_0x436cea(0x229)](_0x11fe0a['name'],_0x36c172);}else _0x133058[_0x436cea(0x229)](_0x11fe0a[_0x436cea(0x1d5)],_0x36c172);}});const _0x592367=_0x133058[_0x318b44(0x138)]({'base64':![],'compression':_0x318b44(0x231)});fs[_0x318b44(0x20c)](zippath+(_0x95239b+'.zip'),_0x592367,_0x318b44(0x1b4));}async function unzipFile(_0x29a13f,_0x42b3f8){const _0x42cfde=_0x53cc86;fs[_0x42cfde(0x11f)](configpath,{'withFileTypes':!![]})[_0x42cfde(0xab)](_0x55727b=>{const _0x38a272=_0x42cfde;if(!_0x55727b['isDirectory']())fs[_0x38a272(0xd7)](configpath+_0x55727b[_0x38a272(0x1d5)]);});const _0x18d086=fs[_0x42cfde(0x233)](_0x29a13f+_0x42b3f8,_0x42cfde(0x1b4)),_0x48a503=new require(_0x42cfde(0xfb))(_0x18d086,{'base64':![],'checkCRC32':!![]});Object[_0x42cfde(0x17c)](_0x48a503[_0x42cfde(0x94)])[_0x42cfde(0xab)](_0x19dc15=>{const _0x27435b=_0x42cfde,_0x549e39=_0x48a503[_0x27435b(0x94)][_0x19dc15];fs[_0x27435b(0x20c)](configpath+_0x549e39['name'],_0x549e39[_0x27435b(0xcc)]);}),fs[_0x42cfde(0x11f)](temppath,{'withFileTypes':!![]})[_0x42cfde(0xab)](_0x1c7bab=>{const _0x48cca7=_0x42cfde;if(!_0x1c7bab[_0x48cca7(0x1f9)]())fs['rmSync'](temppath+_0x1c7bab[_0x48cca7(0x1d5)]);}),logger[_0x42cfde(0xe2)](_0x42cfde(0x129)),process[_0x42cfde(0x1e3)]({'restore':!![]},_0x39652b=>{});}async function getPublicIp(){const _0x25b2b5=_0x53cc86;try{const _0x1d11c2=await axios['get'](_0x25b2b5(0xb5));publicip=_0x1d11c2[_0x25b2b5(0xda)]['ip'];}catch(_0x3194d4){}}async function triggerAnalytics(){const _0x45c193=_0x53cc86;if(!publicip)await getPublicIp();const _0x388eb1=getBotsWithMode();let _0x6ac5f0=0x0;_0x388eb1[_0x45c193(0xab)](_0x22c27b=>{if(_0x22c27b['status']==='enabled')_0x6ac5f0++;});const _0xbfe69a=getBotExchanges();mixpanel[_0x45c193(0x199)](_0x45c193(0x95),{'distinct_id':settings[_0x45c193(0x19b)],'ip':publicip,'version':serverversion,'numbots':_0x388eb1[_0x45c193(0x140)],'numbotsenabled':_0x6ac5f0,'exchanges':_0xbfe69a});}async function getMessages(){const _0x5129f5=_0x53cc86,_0x3031f7=_0x5129f5(0x1b2),_0x5b98bf=new GraphQLClient(_0x3031f7),_0xf95deb={'authorization':_0x5129f5(0x157)},_0x561c1e=serverversion[_0x5129f5(0x21f)]('.'),_0x6f8424=_0x561c1e[0x0]+'.'+_0x561c1e[0x1],_0x372925=Math[_0x5129f5(0x9c)](settings[_0x5129f5(0x9a)],settings[_0x5129f5(0x1fa)]),_0x32d4be={'last':parseInt(_0x372925),'bbm':_0x6f8424},_0x401d84=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x43c789;try{_0x43c789=await _0x5b98bf[_0x5129f5(0xae)](_0x401d84,_0x32d4be,_0xf95deb);}catch(_0x880b2f){}if(_0x43c789&&_0x43c789[_0x5129f5(0xc0)]){let _0x2bb038=settings[_0x5129f5(0x9a)];newMessages=[];for(const _0x37efc6 of _0x43c789['messages']){newMessages[_0x5129f5(0x154)](_0x37efc6);if(_0x37efc6[_0x5129f5(0x9e)])updateSetting('latestversion',_0x37efc6[_0x5129f5(0x9e)]);let _0x50e855=_0x37efc6[_0x5129f5(0x9e)]?serverversion>=_0x37efc6['bbvNew']:![];if(!_0x50e855&&_0x37efc6[_0x5129f5(0x12b)]>_0x2bb038){if(_0x37efc6['bbvReceive']===_0x5129f5(0x1e8)||serverversion['startsWith'](_0x37efc6['bbvReceive'])){let _0x4a481a=''+_0x37efc6[_0x5129f5(0x17f)]+'\x0a\x0a'+_0x37efc6[_0x5129f5(0xb8)];const _0x53edee=await sendTelegramMsg(toTelegramMarkdown(_0x4a481a),_0x5129f5(0x1cc));if(_0x53edee)_0x2bb038=_0x37efc6[_0x5129f5(0x12b)];}}}updateAvailable=isNewerVersion(settings[_0x5129f5(0xd6)],serverversion),updateSetting(_0x5129f5(0x9a),_0x2bb038),emitMessages();}}function emitMessages(){const _0x4eeaa9=_0x53cc86,_0x58b3a7=settings[_0x4eeaa9(0x1fa)];let _0x5f5834=[];newMessages[_0x4eeaa9(0xab)](_0x3975e9=>{const _0x5ac35e=_0x4eeaa9;_0x3975e9[_0x5ac35e(0x12b)]>_0x58b3a7&&_0x5f5834[_0x5ac35e(0x154)](_0x3975e9);}),_0x5f5834[_0x4eeaa9(0x140)]>0x0&&getAllClients()[_0x4eeaa9(0xab)](_0x66abd3=>{const _0x5f37b2=_0x4eeaa9;getSocket(_0x66abd3['id'])[_0x5f37b2(0xeb)]('message',_0x5f5834);});}function confirmMessage(_0x4eab38){updateSetting('lastmsgemitted',Number(_0x4eab38));}function isNewerVersion(_0x28e077,_0x1f7d07){const _0x200fc8=_0x53cc86,_0x112535=_0x1f7d07[_0x200fc8(0x21f)]('.'),_0x10c221=_0x28e077[_0x200fc8(0x21f)]('.');for(var _0x5943b9=0x0;_0x5943b9<_0x10c221[_0x200fc8(0x140)];_0x5943b9++){const _0x2704dc=~~_0x10c221[_0x5943b9],_0x1ba515=~~_0x112535[_0x5943b9];if(_0x2704dc>_0x1ba515)return!![];if(_0x2704dc<_0x1ba515)return![];}return![];}function _0x2cab(_0x907ef8,_0x360bd8){const _0x2b23b5=_0x3a4b();return _0x2cab=function(_0x4263a7,_0x18aba9){_0x4263a7=_0x4263a7-0x75;let _0x3a4b36=_0x2b23b5[_0x4263a7];return _0x3a4b36;},_0x2cab(_0x907ef8,_0x360bd8);}function toTelegramMarkdown(_0xbaa691){const _0x278465=_0x53cc86,_0x4f2de6=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x341ee2=/\*{2}(.+?)\*{2}/gim;return _0xbaa691=_0xbaa691['replace'](_0x4f2de6,_0x278465(0x87))[_0x278465(0x159)](_0x341ee2,_0x278465(0x1c7)),_0xbaa691;}async function validateConfigFile(){const _0xd6357d=_0x53cc86,_0x572d96=dbConfig[_0xd6357d(0x100)]('bots')[_0xd6357d(0x139)]('botID')['value']()||[];if(_0x572d96[_0xd6357d(0x140)]==0x0){let _0x5bb907=0x0,_0x1ad282=[];const _0x59cffb=/^bot-([0-9]{3})-config.json$/,_0x9f153=fs['readdirSync'](configpath);_0x9f153['forEach'](_0x291ded=>{const _0x56b79d=_0xd6357d,_0xd817dd=_0x59cffb['exec'](_0x291ded);if(_0xd817dd){const _0x55f639=_0xd817dd[0x1];let _0x3f4925=getBotAttributes(_0x55f639);_0x1ad282[_0x56b79d(0x154)]({'botID':_0x55f639,'botname':_0x3f4925[_0x56b79d(0x1bb)],'status':'disabled','live':_0x56b79d(0x198)}),_0x5bb907++;}}),_0x5bb907!=0x0&&(dbConfig['get'](_0xd6357d(0x90))[_0xd6357d(0xb9)](_0x1ad282)[_0xd6357d(0x1e0)](),config=_0x1ad282,restoredConfigFile=_0x5bb907);}}async function restoreConfigNotify(_0x17432d){const _0x3c5d85=_0x53cc86;let _0x16fa66;if(restoredConfigFile==0x1)_0x16fa66=_0x3c5d85(0x1a9);else _0x16fa66=_0x3c5d85(0x206);if(_0x17432d)io['to']('botmanager')[_0x3c5d85(0xeb)](_0x3c5d85(0x1e9),_0x16fa66);else{logger['simple']('-----------------------------------------------------------------------------------'),logger['simple'](_0x16fa66),logger['simple'](_0x3c5d85(0xe0)),logger[_0x3c5d85(0xa2)]('');if(tgBot&&settings[_0x3c5d85(0x228)]&&settings['telegramEvents']!=_0x3c5d85(0xb4))tgBot[_0x3c5d85(0xf9)](settings[_0x3c5d85(0x228)],_0x3c5d85(0x156)+_0x16fa66)[_0x3c5d85(0x1b0)](_0x10a604=>{telegramError(_0x10a604);});}}function validateCredentials(_0x5d2009,_0x47c92f){const _0x58c4a8=_0x53cc86;if(_0x5d2009['username']==settings['bbUsername']&&bcrypt[_0x58c4a8(0x16e)](_0x5d2009['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x7b6653=generateLoginToken(_0x47c92f);return{'allow':!![],'reason':_0x58c4a8(0x11c),'token':_0x7b6653};}}else return{'allow':![],'reason':_0x58c4a8(0x123),'token':null};}function refreshToken(_0x269017){const _0x142196=_0x53cc86,_0x120d96=generateLoginToken(_0x269017);return{'allow':!![],'reason':_0x142196(0x11c),'token':_0x120d96};}function validateAccess(_0x4176d0,_0x3d01fe,_0x5f26e0){const _0xe2f70f=_0x53cc86,_0x2ed698=_0x5f26e0?_0x5f26e0:devices[_0x3d01fe]['ip'];let _0x32c565;const _0x22e9e7=_0x15a5c7=>{const _0x5d663e=_0x2cab;if(settings[_0x5d663e(0x86)]){if(settings[_0x5d663e(0x1d0)]){if(telegram2FaApproved(_0x3d01fe)){const _0xa18d04=generateLoginToken(_0x3d01fe);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0xa18d04};}else return{'allow':![],'reason':_0x5d663e(0x12e),'token':null};}else return _0x32c565=validToken(_0x15a5c7,_0x3d01fe),_0x32c565[_0x5d663e(0x19a)](_0x5d663e(0x1c4))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x15a5c7}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x5d663e(0x1ee),'token':null};};if(settings[_0xe2f70f(0x22f)]){let _0x18d83b=[...settings[_0xe2f70f(0xb1)],_0xe2f70f(0x1ab),'::ffff:127.0.0.1',_0xe2f70f(0x130)];if(_0x18d83b['includes'](_0x2ed698))return _0x22e9e7(_0x4176d0);else{_0x32c565=validToken(_0x4176d0,_0x3d01fe);if(_0x32c565[_0xe2f70f(0x19a)](_0xe2f70f(0x1c4)))return _0x22e9e7(_0x4176d0);else{if(telegramIpApproved(_0x3d01fe)){const _0x5772e2=generateToken(_0x3d01fe);return _0x32c565=_0x22e9e7(_0x4176d0),_0x32c565[_0xe2f70f(0x221)]?{'allow':!![],'reason':_0xe2f70f(0x173),'token':_0x5772e2}:_0x32c565;}else return settings[_0xe2f70f(0x22a)]?{'allow':![],'reason':_0xe2f70f(0xce),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x22e9e7(_0x4176d0);}function timelyDecrypt(_0x1e905a,_0x58aabf=!![]){const _0x4ada40=_0x53cc86;if(_0x1e905a)try{const _0x544c28=crypt[_0x4ada40(0x18d)](secure[_0x4ada40(0x103)],_0x1e905a)[_0x4ada40(0xb8)],_0x2420f7=_0x544c28[_0x4ada40(0x21f)]('@')[0x0],_0x280ec9=_0x544c28['split']('@')[0x1],_0x1d0986=new Date()[_0x4ada40(0x1ac)]();if(_0x58aabf){if(_0x1d0986-_0x280ec9<maxSecretAge*0x3e8)return _0x2420f7;else return![];}else return _0x2420f7;}catch(_0x3ffd82){return![];}else return![];}const validToken=(_0x187a50,_0x40e0cc)=>{const _0x2720a0=_0x53cc86,_0x51c9b9=devices[_0x40e0cc]['ip'];if(!_0x187a50)return{'error':_0x2720a0(0x1bc)};for(let _0x15a4d8 of blacklist){if(_0x15a4d8[_0x2720a0(0x15b)]==_0x187a50)return{'error':_0x2720a0(0x11a)};}let _0x3b06cd;try{_0x3b06cd=jwt[_0x2720a0(0x77)](_0x187a50,secure[_0x2720a0(0x14a)]+_0x40e0cc);}catch{return{'error':_0x2720a0(0x1b9)};}if(!_0x3b06cd[_0x2720a0(0x19a)]('clientip')&&!_0x3b06cd[_0x2720a0(0x19a)](_0x2720a0(0xaf))||!_0x3b06cd['hasOwnProperty']('exp'))return{'error':_0x2720a0(0x1dc)};if(!_0x3b06cd['hasOwnProperty'](_0x2720a0(0xaf))&&_0x3b06cd[_0x2720a0(0x19a)](_0x2720a0(0xff))){const {clientip:_0x5c124c}=_0x3b06cd;return _0x51c9b9==_0x5c124c?{'success':_0x2720a0(0x239)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x3b06cd[_0x2720a0(0x19a)](_0x2720a0(0xaf))&&_0x3b06cd['hasOwnProperty'](_0x2720a0(0xff))){const {username:_0x4ab255,clientip:_0x50a3ab}=_0x3b06cd;return settings[_0x2720a0(0x220)]==_0x4ab255&&_0x51c9b9==_0x50a3ab?{'success':_0x2720a0(0x239)}:{'error':_0x2720a0(0x20f)};}}},generateLoginToken=_0x48316a=>{const _0xf17d14=_0x53cc86;if(_0x48316a){const _0x309ac1=devices[_0x48316a]['ip'];return jwt[_0xf17d14(0x238)]({'username':settings[_0xf17d14(0x220)],'clientip':_0x309ac1},secure[_0xf17d14(0x14a)]+_0x48316a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x51cfaf=>{const _0x550165=_0x53cc86;if(_0x51cfaf){const _0x5d5301=devices[_0x51cfaf]['ip'];return jwt[_0x550165(0x238)]({'clientip':_0x5d5301},secure[_0x550165(0x14a)]+_0x51cfaf,{'expiresIn':devices[_0x51cfaf][_0x550165(0xf5)][_0x550165(0x1d7)]*0x3c});}else return![];},telegramIpApproved=_0x3ffb00=>{const _0x562cce=_0x53cc86;let _0x337684=![];return devices[_0x3ffb00][_0x562cce(0xf5)]&&devices[_0x3ffb00]['telegramIpApproval']['expiry']!=_0x562cce(0xe6)&&(_0x337684=devices[_0x3ffb00]['telegramIpApproval'][_0x562cce(0xff)]==devices[_0x3ffb00]['ip']&&new Date()[_0x562cce(0x1ac)]()-devices[_0x3ffb00][_0x562cce(0xf5)][_0x562cce(0x124)]<devices[_0x3ffb00][_0x562cce(0xf5)][_0x562cce(0x1d7)]*0x3c*0x3e8),_0x337684;},telegram2FaApproved=_0x4f2f91=>{const _0x19333e=_0x53cc86;let _0x20d83e=![];return devices[_0x4f2f91][_0x19333e(0xa4)]&&devices[_0x4f2f91]['telegram2FaApproval'][_0x19333e(0x1d7)]!=_0x19333e(0xe6)&&(_0x20d83e=devices[_0x4f2f91]['telegram2FaApproval'][_0x19333e(0xff)]==devices[_0x4f2f91]['ip']&&new Date()['getTime']()-devices[_0x4f2f91][_0x19333e(0xa4)][_0x19333e(0x124)]<devices[_0x4f2f91]['telegram2FaApproval'][_0x19333e(0x1d7)]*0x3c*0x3e8),_0x20d83e;},normalizeIP=_0x2de2e2=>{const _0x5de1ac=_0x53cc86;let _0x5f8ecc=null,_0x2b39f0=null;if(ipaddr['isValid'](_0x2de2e2)){const _0x3be53a=ipaddr['parse'](_0x2de2e2);_0x3be53a['kind']()===_0x5de1ac(0x1ec)?(_0x3be53a[_0x5de1ac(0xca)]()&&(_0x5f8ecc=_0x3be53a[_0x5de1ac(0x122)]()[_0x5de1ac(0x1e6)]()),_0x2b39f0=_0x3be53a[_0x5de1ac(0x1e6)]()):(_0x5f8ecc=_0x3be53a[_0x5de1ac(0x1e6)](),_0x2b39f0=_0x3be53a['toIPv4MappedAddress']()[_0x5de1ac(0x1e6)]());}return{'show':_0x5f8ecc?_0x5f8ecc:_0x2b39f0,'store':_0x2b39f0};};function formatDate(_0x593586){const _0x1704aa=_0x53cc86;return _0x593586[_0x1704aa(0x104)]()+'/'+(_0x593586[_0x1704aa(0x201)]()+0x1)['toString']()[_0x1704aa(0x9d)](0x2,'0')+'/'+_0x593586[_0x1704aa(0x216)]()[_0x1704aa(0x1e6)]()[_0x1704aa(0x9d)](0x2,'0')+'\x20'+_0x593586[_0x1704aa(0x1a6)]()[_0x1704aa(0x1e6)]()[_0x1704aa(0x9d)](0x2,'0')+':'+_0x593586[_0x1704aa(0x96)]()[_0x1704aa(0x1e6)]()[_0x1704aa(0x9d)](0x2,'0')+':'+_0x593586['getSeconds']()[_0x1704aa(0x1e6)]()[_0x1704aa(0x9d)](0x2,'0');}function sleep(_0x2df01f){return new Promise(_0x55b9f6=>setTimeout(_0x55b9f6,_0x2df01f));}