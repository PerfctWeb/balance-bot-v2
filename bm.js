const _0x32bb9d=_0x1ab7;(function(_0xd8dc85,_0x41cbf1){const _0x47a7dd=_0x1ab7,_0x138d60=_0xd8dc85();while(!![]){try{const _0x244ad9=parseInt(_0x47a7dd(0x253))/0x1+-parseInt(_0x47a7dd(0x204))/0x2*(-parseInt(_0x47a7dd(0x365))/0x3)+parseInt(_0x47a7dd(0x280))/0x4+-parseInt(_0x47a7dd(0x2c1))/0x5+parseInt(_0x47a7dd(0x263))/0x6+-parseInt(_0x47a7dd(0x3a9))/0x7*(parseInt(_0x47a7dd(0x20d))/0x8)+-parseInt(_0x47a7dd(0x278))/0x9;if(_0x244ad9===_0x41cbf1)break;else _0x138d60['push'](_0x138d60['shift']());}catch(_0x33a524){_0x138d60['push'](_0x138d60['shift']());}}}(_0x5ec1,0x6da3e));const _0x47dfb6=function(){let _0x1f847b=!![];return function(_0x33957f,_0xc244f7){const _0x2bfecc=_0x1f847b?function(){const _0x20028c=_0x1ab7;if(_0xc244f7){const _0x556e20=_0xc244f7[_0x20028c(0x2f3)](_0x33957f,arguments);return _0xc244f7=null,_0x556e20;}}:function(){};return _0x1f847b=![],_0x2bfecc;};}(),_0xd8afca=_0x47dfb6(this,function(){const _0x519b48=_0x1ab7;return _0xd8afca[_0x519b48(0x28a)]()[_0x519b48(0x23e)]('(((.+)+)+)+$')[_0x519b48(0x28a)]()[_0x519b48(0x25a)](_0xd8afca)[_0x519b48(0x23e)](_0x519b48(0x3b4));});_0xd8afca();'use strict';process['env'][_0x32bb9d(0x243)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x32bb9d(0x35c)),low=require('lowdb'),FileSync=require(_0x32bb9d(0x341)),path=require(_0x32bb9d(0x33d)),crypto=require(_0x32bb9d(0x394)),Crypt=require('hybrid-crypto-js')[_0x32bb9d(0x398)],RSA=require(_0x32bb9d(0x3ae))[_0x32bb9d(0x200)],bcrypt=require(_0x32bb9d(0x373)),jwt=require(_0x32bb9d(0x2a6)),ipaddr=require(_0x32bb9d(0x241)),argv=require(_0x32bb9d(0x223))(process[_0x32bb9d(0x3a1)]['slice'](0x2))[_0x32bb9d(0x3a1)],uuidRandom=require(_0x32bb9d(0x307)),TelegramBot=require(_0x32bb9d(0x3b5)),Mixpanel=require(_0x32bb9d(0x1f2)),axios=require(_0x32bb9d(0x3d3)),{GraphQLClient,gql}=require(_0x32bb9d(0x3be)),util=require('util'),fileUpload=require(_0x32bb9d(0x32d)),{networkInterfaces}=require('os'),PORT=argv['port']||_0x32bb9d(0x30f),pattern=/^[0-9]{2,4}$/;!pattern[_0x32bb9d(0x237)](PORT)&&(console[_0x32bb9d(0x24c)](_0x32bb9d(0x27a)+PORT+_0x32bb9d(0x28f)),process[_0x32bb9d(0x385)](0x1));const HOST=argv['host']||null,userID=argv[_0x32bb9d(0x2cb)]||'',debugging=argv['d']||![],nodeversion=process[_0x32bb9d(0x2db)]['node'];let bbpath=_0x32bb9d(0x330),bbpath2='';function _0x1ab7(_0x5d3d67,_0x1db7d0){const _0xcda33e=_0x5ec1();return _0x1ab7=function(_0xd8afca,_0x47dfb6){_0xd8afca=_0xd8afca-0x1eb;let _0x5ec191=_0xcda33e[_0xd8afca];return _0x5ec191;},_0x1ab7(_0x5d3d67,_0x1db7d0);}const botfile=_0x32bb9d(0x392),configfile='bb-config.json',settingsfile=_0x32bb9d(0x215),securefile=_0x32bb9d(0x20e),maxBackups=0xa;let validInstallation=!![];!fs[_0x32bb9d(0x2a7)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x32bb9d(0x25f)),configpath=userID?bbpath+_0x32bb9d(0x2ee)+userID+'/':bbpath+_0x32bb9d(0x2ee),configbackuppath=configpath+_0x32bb9d(0x21b),logspath=userID?bbpath+_0x32bb9d(0x324)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x32bb9d(0x308)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x32bb9d(0x258)](logspath+_0x32bb9d(0x240),{'flags':'a'}),temppath=userID?bbpath+_0x32bb9d(0x29f)+userID+'/':bbpath+_0x32bb9d(0x29f);!fs[_0x32bb9d(0x2a7)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x32bb9d(0x2a7)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x32bb9d(0x2a7)](logspath)&&fs[_0x32bb9d(0x283)](logspath);!fs[_0x32bb9d(0x2a7)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x32bb9d(0x2a7)](temppath)&&fs[_0x32bb9d(0x283)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x32bb9d(0x2b5)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x32bb9d(0x2b5)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x32bb9d(0x397),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x32bb9d(0x2b5)]({'secure':{},'blacklist':[]})[_0x32bb9d(0x2a1)]();let crypt=new Crypt({'md':_0x32bb9d(0x29d),'rsaStandard':_0x32bb9d(0x262)});const saltRounds=0xa,mixpanel=Mixpanel[_0x32bb9d(0x245)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x32bb9d(0x2ad)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x32bb9d(0x340)]!=''&&settings[_0x32bb9d(0x315)]&&settings[_0x32bb9d(0x315)]!='')initTelegram();const parseColor=(_0x317462,_0x17477d)=>{const _0x1b5dd4=_0x32bb9d,_0xafe0d4=/#[A-Z]{3}#/g;if(typeof _0x317462==_0x1b5dd4(0x29a)){!_0x17477d?_0x317462=_0x317462[_0x1b5dd4(0x3d4)](_0xafe0d4,''):(_0x317462=_0x317462[_0x1b5dd4(0x3d4)](/#BLU#/g,_0x1b5dd4(0x286)),_0x317462=_0x317462[_0x1b5dd4(0x3d4)](/#RED#/g,_0x1b5dd4(0x3ad)),_0x317462=_0x317462['replace'](/#YEL#/g,_0x1b5dd4(0x270)),_0x317462=_0x317462[_0x1b5dd4(0x3d4)](/#MAG#/g,_0x1b5dd4(0x2c6)),_0x317462=_0x317462[_0x1b5dd4(0x3d4)](/#CYA#/g,_0x1b5dd4(0x27d)),_0x317462=_0x317462[_0x1b5dd4(0x3d4)](/#RES#/g,_0x1b5dd4(0x34e)));;}return _0x317462;},logger={'screen':_0x18e76f=>{const _0x29b11f=_0x32bb9d;console[_0x29b11f(0x24c)](parseColor(_0x18e76f,!![]));},'simple':_0x398f97=>{const _0x46abef=_0x32bb9d;console[_0x46abef(0x24c)](parseColor(_0x398f97,!![])),loggerfile['write'](util['format'](parseColor(_0x398f97,![]))+'\x0a');},'full':async _0x8cf57a=>{const _0xd21eab=_0x32bb9d,_0x5d1e2b=getTimeStamp()+_0xd21eab(0x214)+_0x8cf57a;console[_0xd21eab(0x24c)](parseColor(_0x5d1e2b,!![])),loggerfile['write'](util[_0xd21eab(0x2d2)](parseColor(_0x5d1e2b,![]))+'\x0a');if(tgBot&&settings[_0xd21eab(0x345)]&&settings[_0xd21eab(0x305)]!='orders')await tgBot[_0xd21eab(0x325)](settings[_0xd21eab(0x345)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x8cf57a,![]))[_0xd21eab(0x226)](_0x19ad5b=>{telegramError(_0x19ad5b);});},'debug':async(_0xdc935b,_0x2dafbc='')=>{const _0x563fbe=_0x32bb9d,_0x126798=getTimeStamp()+_0x563fbe(0x388)+_0xdc935b;if(debugging)console[_0x563fbe(0x24c)](parseColor(_0x126798,!![]));loggerfile[_0x563fbe(0x2a1)](util['format'](parseColor(_0x126798,![]))+'\x0a');if(_0x2dafbc){if(debugging)console['log'](_0x2dafbc);loggerfile[_0x563fbe(0x2a1)](util[_0x563fbe(0x2d2)](_0x2dafbc)+'\x0a');}}};process['on'](_0x32bb9d(0x2d9),function(_0x5b1109){logger['simple'](_0x5b1109);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x32bb9d(0x3cc))[_0x32bb9d(0x37e)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x32bb9d(0x288)),app=express(),http=require(_0x32bb9d(0x3ca))[_0x32bb9d(0x3cb)](app);app[_0x32bb9d(0x218)](fileUpload({'useTempFiles':!![]})),app[_0x32bb9d(0x2b7)](_0x32bb9d(0x322),async(_0x1f5212,_0x3985cc)=>{const _0x12fa7a=_0x32bb9d,_0x4c78c4=_0x1f5212['params'][_0x12fa7a(0x25b)],_0x1b58df=getClientsWithBotID(_0x12fa7a(0x30b)),_0x244e90=_0x1f5212[_0x12fa7a(0x339)][_0x12fa7a(0x306)],_0x328846=timelyDecrypt(_0x244e90,![]),_0x6e27e0=_0x1b58df['find'](_0x1de9f8=>_0x1de9f8[_0x12fa7a(0x306)]==_0x328846);if(_0x6e27e0){const _0x3ad8f4=normalizeIP(_0x1f5212[_0x12fa7a(0x3c2)][_0x12fa7a(0x372)])[_0x12fa7a(0x2a2)],_0x1c9367=_0x1f5212[_0x12fa7a(0x339)][_0x12fa7a(0x359)];if(validateAccess(_0x1c9367,_0x328846,_0x3ad8f4)[_0x12fa7a(0x27f)])_0x4c78c4==_0x12fa7a(0x39c)&&await backupConfigFiles(),await zipFiles(_0x4c78c4),_0x3985cc[_0x12fa7a(0x2bf)](zippath+(_0x4c78c4+_0x12fa7a(0x287)),_0x5520ca=>{const _0x10e4a2=_0x12fa7a;_0x5520ca&&(logger[_0x10e4a2(0x333)](_0x10e4a2(0x37c)+_0x4c78c4),logger[_0x10e4a2(0x3a8)](_0x5520ca));});else logger[_0x12fa7a(0x333)](_0x12fa7a(0x2af)+_0x4c78c4+_0x12fa7a(0x277));}else logger[_0x12fa7a(0x333)](_0x12fa7a(0x2af)+_0x4c78c4+_0x12fa7a(0x39f));}),app[_0x32bb9d(0x366)]('/upload-backup',async(_0x4d4545,_0x5645d6)=>{const _0x1e871f=_0x32bb9d,_0x40224a=getClientsWithBotID(_0x1e871f(0x30b)),_0x4f4ce5=_0x4d4545[_0x1e871f(0x339)][_0x1e871f(0x306)],_0x3587ec=timelyDecrypt(_0x4f4ce5,![]),_0x4215bb=_0x40224a[_0x1e871f(0x37a)](_0x1d0529=>_0x1d0529[_0x1e871f(0x306)]==_0x3587ec);logger['debug']('Backup\x20file\x20uploaded');if(_0x4215bb){const _0x4c25b3=normalizeIP(_0x4d4545[_0x1e871f(0x3c2)][_0x1e871f(0x372)])[_0x1e871f(0x2a2)],_0x148c79=_0x4d4545[_0x1e871f(0x339)]['tkn'];if(validateAccess(_0x148c79,_0x3587ec,_0x4c25b3)[_0x1e871f(0x27f)]){if(_0x4d4545[_0x1e871f(0x3b9)]){const _0x242d28=_0x4d4545['files']['backupfile'];await _0x242d28['mv'](temppath+_0x242d28[_0x1e871f(0x300)]),_0x5645d6[_0x1e871f(0x298)]({'status':!![],'message':_0x1e871f(0x3a6)});const _0x533b4a=getBotsWithMode();_0x533b4a[_0x1e871f(0x3b0)]>0x0?confirmRestore(temppath,_0x242d28[_0x1e871f(0x300)]):unzipFile(temppath,_0x242d28['name']);}}else logger[_0x1e871f(0x333)](_0x1e871f(0x251));}else logger[_0x1e871f(0x333)](_0x1e871f(0x367));}),app[_0x32bb9d(0x218)](express['static'](path[_0x32bb9d(0x351)](__dirname,bbpath2,_0x32bb9d(0x319)))),app['use'](express['static'](path['join'](__dirname,bbpath2,_0x32bb9d(0x3b2)))),app[_0x32bb9d(0x2b7)]('/',function(_0x440fce,_0xc5e291){const _0x52731c=_0x32bb9d;_0xc5e291[_0x52731c(0x29c)](path[_0x52731c(0x351)](__dirname,bbpath2,_0x52731c(0x319),_0x52731c(0x391)));}),app[_0x32bb9d(0x2b7)]('/:bot',function(_0x42c095,_0x4db48e){const _0x36d84c=_0x32bb9d;_0x4db48e['sendFile'](path[_0x36d84c(0x351)](__dirname,bbpath2,_0x36d84c(0x3b2),'index.html'));}),app[_0x32bb9d(0x2b7)](_0x32bb9d(0x266),(_0x59d65b,_0x5b7c02)=>{const _0x3e247c=_0x32bb9d;_0x5b7c02['sendFile'](path[_0x3e247c(0x351)](__dirname,bbpath2,'build','index.html'));}),app[_0x32bb9d(0x2b7)](_0x32bb9d(0x27c),(_0x119a7b,_0x52a921)=>{const _0x5dea41=_0x32bb9d;_0x52a921[_0x5dea41(0x29c)](path[_0x5dea41(0x351)](__dirname,bbpath2,_0x5dea41(0x3b2),'index.html'));}),app[_0x32bb9d(0x2b7)](_0x32bb9d(0x39d),(_0x146452,_0x23af25)=>{const _0x31bd96=_0x32bb9d;_0x23af25['sendFile'](path[_0x31bd96(0x351)](__dirname,bbpath2,'build',_0x31bd96(0x391)));}),app['get'](_0x32bb9d(0x2c5),(_0x202006,_0x7b510e)=>{const _0x3143b9=_0x32bb9d;_0x7b510e[_0x3143b9(0x29c)](path['join'](__dirname,bbpath2,_0x3143b9(0x3b2),_0x3143b9(0x391)));}),app[_0x32bb9d(0x2b7)](_0x32bb9d(0x3bf),(_0x24731e,_0x321d22)=>{const _0x339fcf=_0x32bb9d;_0x321d22[_0x339fcf(0x29c)](path['join'](__dirname,bbpath2,'build',_0x339fcf(0x391)));}),app['get'](_0x32bb9d(0x354),(_0x39fcbd,_0x1d4605)=>{const _0xeccf21=_0x32bb9d;_0x1d4605[_0xeccf21(0x29c)](path[_0xeccf21(0x351)](__dirname,bbpath2,'build',_0xeccf21(0x391)));});if(HOST)http[_0x32bb9d(0x2fd)](PORT,HOST);else http[_0x32bb9d(0x2fd)](PORT);const io=require(_0x32bb9d(0x271))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5d9465=_0x32bb9d;let _0x13b349=_0x5d9465(0x3a7);const _0x20c15a=networkInterfaces(),_0x3f0c3e={};for(const _0x2ebeb4 of Object['keys'](_0x20c15a)){for(const _0x1225da of _0x20c15a[_0x2ebeb4]){if((_0x1225da[_0x5d9465(0x247)]==_0x5d9465(0x36d)||_0x1225da[_0x5d9465(0x247)]==0x4)&&!_0x1225da[_0x5d9465(0x360)]){const _0x6765ce=ipaddr[_0x5d9465(0x289)](_0x1225da[_0x5d9465(0x2ce)])[_0x5d9465(0x3ba)]();_0x6765ce!=_0x5d9465(0x202)&&(!_0x3f0c3e[_0x2ebeb4]&&(_0x3f0c3e[_0x2ebeb4]=[]),_0x3f0c3e[_0x2ebeb4][_0x5d9465(0x2ac)](_0x1225da[_0x5d9465(0x2ce)]),_0x13b349=_0x1225da[_0x5d9465(0x2ce)]);}}}return{'serverip':_0x13b349,'netinterfaces':_0x3f0c3e};}async function startServer(){const _0x363a94=_0x32bb9d,{serverip:_0x5b1ec8,netinterfaces:_0x23371b}=getServerIP();logger[_0x363a94(0x3a8)](''),logger[_0x363a94(0x3a8)](_0x363a94(0x335)),await logger[_0x363a94(0x333)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x363a94(0x1eb)+(_0x363a94(0x2a3)+PORT+_0x363a94(0x3cf))+('=>\x20Go\x20to\x20#CYA#http://'+_0x5b1ec8+':'+PORT+_0x363a94(0x296))),logger[_0x363a94(0x3a8)](_0x363a94(0x335));if(config[_0x363a94(0x3b0)]!=0x0)for(const _0x392ffc of config){if(_0x392ffc[_0x363a94(0x3a4)]==_0x363a94(0x265)||_0x392ffc[_0x363a94(0x3a4)]==_0x363a94(0x294))await logger['full'](_0x363a94(0x3c7)+_0x392ffc['botID']+'\x20|\x20'+_0x392ffc[_0x363a94(0x320)]),startBot([_0x392ffc[_0x363a94(0x370)],userID],{'cwd':bbpath},function(_0x2b7349){if(_0x2b7349)logger['full'](_0x2b7349);});else(_0x392ffc[_0x363a94(0x3a4)]=='disabled'||_0x392ffc['status']==_0x363a94(0x252))&&await logger[_0x363a94(0x333)](_0x363a94(0x329)+_0x392ffc[_0x363a94(0x370)]+_0x363a94(0x20b)+_0x392ffc[_0x363a94(0x320)]);}else!newBot&&logger['simple'](_0x363a94(0x248));if(newBot)addBot();logger[_0x363a94(0x3a8)](_0x363a94(0x335)),logger['simple'](''),await logger[_0x363a94(0x357)](_0x363a94(0x309)+nodeversion),await logger[_0x363a94(0x357)](_0x363a94(0x272),_0x23371b);}function startSocket(){const _0x44a835=_0x32bb9d;io['on'](_0x44a835(0x230),_0xefc0cd=>{const _0x12b0da=_0x44a835;let _0x259e0f,_0x23f319,_0x3c0f65,_0x5261b6,_0x5442dd;const _0x1fa7d0=_0xefc0cd[_0x12b0da(0x2a4)][_0x12b0da(0x339)][_0x12b0da(0x3c4)];_0x23f319=_0x1fa7d0[_0x12b0da(0x244)](/bot[0-9]{3}/);if(_0x23f319)_0x3c0f65=_0x23f319[0x0][_0x12b0da(0x244)](/[0-9]{3}/);if(_0x3c0f65)_0x259e0f=_0x3c0f65[0x0];else _0x259e0f='botmanager';const _0x2c25a1=_0xefc0cd[_0x12b0da(0x2a4)][_0x12b0da(0x225)][_0x12b0da(0x3a3)];if(!_0x2c25a1)_0xefc0cd['emit'](_0x12b0da(0x3a4),{'publicKey':secure[_0x12b0da(0x2dc)]});else{_0x5261b6=timelyDecrypt(_0x2c25a1,![]);if(!_0x5261b6)_0xefc0cd[_0x12b0da(0x389)](_0x12b0da(0x3a4),{'publicKey':secure[_0x12b0da(0x2dc)]});else{_0x5442dd=normalizeIP(_0xefc0cd['conn'][_0x12b0da(0x372)])[_0x12b0da(0x2a2)];if(!devices[_0x5261b6])devices[_0x5261b6]={'uuid':_0x5261b6,'access':{'token':null}};devices[_0x5261b6]['ip']=_0x5442dd;const _0x1ea6f9=addClient(_0xefc0cd['id'],_0x5261b6,_0x259e0f);setAccess(_0x1ea6f9),emitMessages(),_0xefc0cd['on'](_0x12b0da(0x2a5),_0x5429f1=>{const _0x4480d0=_0x12b0da,_0x4faa82=timelyDecrypt(_0x5429f1[_0x4480d0(0x256)]);if(_0x4faa82){_0x5429f1={'username':_0x5429f1[_0x4480d0(0x1f6)],'password':_0x4faa82},devices[_0x5261b6][_0x4480d0(0x316)]=validateCredentials(_0x5429f1,_0x5261b6);if(devices[_0x5261b6][_0x4480d0(0x316)]['allow']==![]&&devices[_0x5261b6][_0x4480d0(0x316)][_0x4480d0(0x35d)]==_0x4480d0(0x2b2))_0xefc0cd[_0x4480d0(0x389)](_0x4480d0(0x3a4),{'access':devices[_0x5261b6][_0x4480d0(0x316)]}),loginAccess2FA(_0x5261b6,_0x5442dd);else{if(devices[_0x5261b6]['access'][_0x4480d0(0x27f)]==![]&&devices[_0x5261b6][_0x4480d0(0x316)][_0x4480d0(0x35d)]==_0x4480d0(0x2df))_0xefc0cd[_0x4480d0(0x389)](_0x4480d0(0x3a4),{'access':devices[_0x5261b6]['access']});else devices[_0x5261b6][_0x4480d0(0x316)][_0x4480d0(0x27f)]&&devices[_0x5261b6][_0x4480d0(0x316)][_0x4480d0(0x35d)]==_0x4480d0(0x3d2)&&(getClientsWithUuid(_0x5261b6)['forEach'](_0x561888=>{setAccess(_0x561888);}),logger[_0x4480d0(0x357)](_0x4480d0(0x3d6)+_0x5261b6[_0x4480d0(0x3aa)](-0x8)),setTokenRefresh(_0x5261b6),setSessionTimeout(_0x4480d0(0x2a5),_0x5261b6));}}else logger[_0x4480d0(0x333)](_0x4480d0(0x355));}),_0xefc0cd['on'](_0x12b0da(0x208),()=>{resetPassword();}),_0xefc0cd['on'](_0x12b0da(0x1ec),_0x57821d=>{removeClient(_0xefc0cd['id']);}),_0x259e0f==_0x12b0da(0x30b)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x236b0e){const _0x53d3a8=_0x32bb9d;if(_0x236b0e!=_0x53d3a8(0x30b)&&config[_0x53d3a8(0x317)]!=''){if(pid[_0x236b0e])pid[_0x236b0e][_0x53d3a8(0x298)]({'function':_0x53d3a8(0x2b1),'args':null});}_0x236b0e!=_0x53d3a8(0x30b)&&broadcastToBots(_0x53d3a8(0x2d5),JSON[_0x53d3a8(0x2e9)](config));}function reloadBotManager(){const _0x4fcb4a=_0x32bb9d;getClientsWithBotID(_0x4fcb4a(0x30b))[_0x4fcb4a(0x362)](_0x45dde7=>{const _0x1619f1=_0x4fcb4a;getSocket(_0x45dde7['id'])['emit'](_0x1619f1(0x3a4),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x55bdd6){const _0x45ddff=_0x32bb9d;return io['sockets'][_0x45ddff(0x27b)][_0x45ddff(0x2b7)](_0x55bdd6);}function setAccess(_0x30b490){const _0x1ed42e=_0x32bb9d,_0x488de3=getSocket(_0x30b490['id']),_0xd5765=_0x30b490[_0x1ed42e(0x306)],_0x175603=_0x30b490[_0x1ed42e(0x38c)];devices[_0xd5765][_0x1ed42e(0x316)]=validateAccess(devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x39e)],_0xd5765),logger['debug'](_0x1ed42e(0x30a)+devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x35d)]+'\x20|\x20client:\x20...'+_0x30b490['id'][_0x1ed42e(0x3aa)](-0x8)+_0x1ed42e(0x2a9)+_0xd5765[_0x1ed42e(0x3aa)](-0x8)),_0x488de3['join'](_0xd5765);if(devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x27f)]){_0x488de3[_0x1ed42e(0x351)](_0x175603);if(_0x175603==_0x1ed42e(0x30b))initializeSocketBotManager(_0x488de3);else initializeSocketBot(_0x488de3);initClient(_0x175603);}devices[_0xd5765]['access']['token']&&devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x35d)]==_0x1ed42e(0x26f)&&setSessionTimeout('2FA',_0xd5765),devices[_0xd5765]['access']['token']&&devices[_0xd5765]['access'][_0x1ed42e(0x35d)]==_0x1ed42e(0x364)&&setSessionTimeout(_0x1ed42e(0x2a5),_0xd5765),_0x488de3[_0x1ed42e(0x389)](_0x1ed42e(0x3a4),{'status':_0x30b490[_0x1ed42e(0x2a0)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xd5765][_0x1ed42e(0x316)],'externalip':devices[_0xd5765]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x27f)]==![]&&devices[_0xd5765][_0x1ed42e(0x316)][_0x1ed42e(0x35d)]==_0x1ed42e(0x32e)&&temporaryAccess2FA(_0xd5765,devices[_0xd5765]['ip']);}function setSessionTimeout(_0x313a1e,_0x46f8e0){const _0x26d00f=_0x32bb9d;let _0x3a6a98;if(_0x313a1e==_0x26d00f(0x2a5))_0x3a6a98=loginExpiry*0x3c*0x3e8;else _0x3a6a98=devices[_0x46f8e0]['telegramIpApproval'][_0x26d00f(0x1fd)]*0x3c*0x3e8-(new Date()[_0x26d00f(0x21e)]()-devices[_0x46f8e0]['telegramIpApproval'][_0x26d00f(0x358)]);if(devices[_0x46f8e0][_0x26d00f(0x2e2)])clearTimeout(devices[_0x46f8e0][_0x26d00f(0x2e2)]);devices[_0x46f8e0][_0x26d00f(0x2e2)]=setTimeout(()=>{const _0x1d4172=_0x26d00f;if(devices[_0x46f8e0][_0x1d4172(0x25c)])clearTimeout(devices[_0x46f8e0][_0x1d4172(0x25c)]);removeSocketListeners(_0x46f8e0),addBlacklist(_0x46f8e0),devices[_0x46f8e0][_0x1d4172(0x2cc)]=null,devices[_0x46f8e0]['telegram2FaApproval']=null,devices[_0x46f8e0][_0x1d4172(0x316)]['token']=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x46f8e0['slice'](-0x8)),devices[_0x46f8e0]['access']=validateAccess(devices[_0x46f8e0]['access']['token'],_0x46f8e0),!(devices[_0x46f8e0][_0x1d4172(0x316)][_0x1d4172(0x27f)]&&devices[_0x46f8e0][_0x1d4172(0x316)][_0x1d4172(0x35d)]==_0x1d4172(0x3c5))&&(_0x313a1e==_0x1d4172(0x2a5)?io['to'](_0x46f8e0)['emit'](_0x1d4172(0x3a4),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x46f8e0)[_0x1d4172(0x389)](_0x1d4172(0x3a4),{'access':{'allow':![],'reason':_0x1d4172(0x3af),'token':null}})),devices[_0x46f8e0]['access'][_0x1d4172(0x39e)]=null;},_0x3a6a98);}function setTokenRefresh(_0x2fdf80){const _0x492761=_0x32bb9d;if(devices[_0x2fdf80][_0x492761(0x25c)])clearTimeout(devices[_0x2fdf80][_0x492761(0x25c)]);devices[_0x2fdf80][_0x492761(0x25c)]=setTimeout(()=>{const _0x2d4616=_0x492761;getClientsWithUuid(_0x2fdf80)[_0x2d4616(0x3b0)]!=0x0?(devices[_0x2fdf80][_0x2d4616(0x316)]=refreshToken(_0x2fdf80),io['to'](_0x2fdf80)['emit'](_0x2d4616(0x3a4),{'status':_0x2d4616(0x36f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2fdf80][_0x2d4616(0x316)],'externalip':devices[_0x2fdf80]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x2fdf80)):clearTimeout(devices[_0x2fdf80][_0x2d4616(0x25c)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1040b2){const _0x1f2ebf=_0x32bb9d,_0x2d6a0d=getClient(_0x1040b2['id'])[_0x1f2ebf(0x306)];_0x1040b2[_0x1f2ebf(0x389)](_0x1f2ebf(0x2d5),config),_0x1040b2[_0x1f2ebf(0x389)](_0x1f2ebf(0x33e),cleanSettings()),_0x1040b2['on'](_0x1f2ebf(0x34d),_0xb8513c=>{const _0x26f5ce=_0x1f2ebf;if(validateAccess(_0xb8513c,_0x2d6a0d)[_0x26f5ce(0x27f)])addBot();else logger[_0x26f5ce(0x333)](_0x26f5ce(0x2f5));}),_0x1040b2['on'](_0x1f2ebf(0x3b7),(_0x387e16,_0x2df207)=>{const _0xb4d398=_0x1f2ebf;if(validateAccess(_0x2df207,_0x2d6a0d)[_0xb4d398(0x27f)])toggleBot(_0x387e16[_0xb4d398(0x370)],_0x387e16['status'],_0x387e16[_0xb4d398(0x2b4)]);else logger[_0xb4d398(0x333)](_0xb4d398(0x269));}),_0x1040b2['on']('toggle-bot-mode',(_0x6d5382,_0x39be3f)=>{const _0x2d6306=_0x1f2ebf;if(validateAccess(_0x39be3f,_0x2d6a0d)[_0x2d6306(0x27f)])toggleBotMode(_0x6d5382);else logger[_0x2d6306(0x333)](_0x2d6306(0x269));}),_0x1040b2['on'](_0x1f2ebf(0x28c),(_0x3a35a5,_0x1afd5f)=>{const _0x92ddeb=_0x1f2ebf;if(validateAccess(_0x1afd5f,_0x2d6a0d)[_0x92ddeb(0x27f)])deleteBot(_0x3a35a5);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x1040b2['on'](_0x1f2ebf(0x342),(_0x3ec3d4,_0x4d52b0)=>{const _0x465729=_0x1f2ebf;if(validateAccess(_0x4d52b0,_0x2d6a0d)[_0x465729(0x27f)])storeSettings(_0x3ec3d4,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1040b2['on']('update-bb',_0x2ef381=>{const _0xfde58e=_0x1f2ebf;if(validateAccess(_0x2ef381,_0x2d6a0d)[_0xfde58e(0x27f)])updateBB(_0xfde58e(0x2f2));else logger[_0xfde58e(0x333)](_0xfde58e(0x2e8));}),_0x1040b2['on']('reinstall-bb',_0x2a6a0e=>{const _0x4675c5=_0x1f2ebf;if(validateAccess(_0x2a6a0e,_0x2d6a0d)['allow'])updateBB(_0x4675c5(0x290));else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x1040b2['on'](_0x1f2ebf(0x347),_0x4f8daf=>{const _0x386424=_0x1f2ebf;if(validateAccess(_0x4f8daf,_0x2d6a0d)[_0x386424(0x27f)]){const _0x195434=getClient(_0x1040b2['id']);if(_0x195434)getBackupFiles(_0x195434[_0x386424(0x306)]);else logger['full'](_0x386424(0x382));}else logger[_0x386424(0x333)](_0x386424(0x22e));}),_0x1040b2['on']('restore-backup-file',(_0xfe5c0b,_0x1a9d73)=>{const _0x1d95d3=_0x1f2ebf;if(validateAccess(_0x1a9d73,_0x2d6a0d)[_0x1d95d3(0x27f)])restoreBackupFile(_0xfe5c0b);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x1040b2['on']('get-messages',_0x16bac9=>{const _0x708a07=_0x1f2ebf;if(validateAccess(_0x16bac9,_0x2d6a0d)[_0x708a07(0x27f)])getMessages();else logger[_0x708a07(0x333)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1040b2['on'](_0x1f2ebf(0x229),(_0x2728a8,_0x5e561b)=>{const _0x518537=_0x1f2ebf;if(validateAccess(_0x5e561b,_0x2d6a0d)[_0x518537(0x27f)])confirmMessage(_0x2728a8);else logger[_0x518537(0x333)](_0x518537(0x1f1));}),_0x1040b2['on'](_0x1f2ebf(0x3d7),_0x51f36a=>{const _0x2ed875=_0x1f2ebf;if(validateAccess(_0x51f36a,_0x2d6a0d)[_0x2ed875(0x27f)]){if(devices[_0x2d6a0d][_0x2ed875(0x25c)])clearTimeout(devices[_0x2d6a0d]['pidRefreshToken']);if(devices[_0x2d6a0d][_0x2ed875(0x2e2)])clearTimeout(devices[_0x2d6a0d][_0x2ed875(0x2e2)]);removeSocketListeners(getClient(_0x1040b2['id'])['uuid']),addBlacklist(_0x2d6a0d),devices[_0x2d6a0d][_0x2ed875(0x2cc)]=null,devices[_0x2d6a0d][_0x2ed875(0x2ab)]=null,devices[_0x2d6a0d][_0x2ed875(0x316)][_0x2ed875(0x39e)]=null,logger[_0x2ed875(0x357)](_0x2ed875(0x28b)+_0x2d6a0d[_0x2ed875(0x3aa)](-0x8)),io['to'](getClient(_0x1040b2['id'])[_0x2ed875(0x306)])[_0x2ed875(0x389)](_0x2ed875(0x3a4),{'access':{'allow':![],'reason':_0x2ed875(0x2d6),'token':null}});}else logger[_0x2ed875(0x333)](_0x2ed875(0x2d8));});}function initializeSocketBot(_0x205739){const _0x125a12=_0x32bb9d,_0x45b6ad=getClient(_0x205739['id'])[_0x125a12(0x38c)],_0x25cbba=getClient(_0x205739['id'])[_0x125a12(0x306)];_0x205739['on'](_0x125a12(0x375),(_0x5026b4,_0x2c57d8)=>{const _0x24892b=_0x125a12;if(validateAccess(_0x2c57d8,_0x25cbba)[_0x24892b(0x27f)]){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x24892b(0x298)]({'function':'emitHistory','args':_0x5026b4});}else logger[_0x24892b(0x333)](_0x24892b(0x22c));}),_0x205739['on'](_0x125a12(0x26c),(_0x297a03,_0x3dcfc8)=>{const _0x430986=_0x125a12;if(validateAccess(_0x3dcfc8,_0x25cbba)[_0x430986(0x27f)]){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x430986(0x298)]({'function':_0x430986(0x350),'args':_0x297a03});}else logger[_0x430986(0x333)](_0x430986(0x383));}),_0x205739['on'](_0x125a12(0x3d5),(_0x71f51d,_0x337029)=>{const _0x4f6a35=_0x125a12;if(validateAccess(_0x337029,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x4f6a35(0x298)]({'function':_0x4f6a35(0x34c),'args':_0x71f51d});}else logger[_0x4f6a35(0x333)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x205739['on'](_0x125a12(0x205),(_0x3179bd,_0x291814)=>{const _0x226561=_0x125a12;if(validateAccess(_0x291814,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x226561(0x298)]({'function':'storeConfiguration','args':_0x3179bd});}else logger[_0x226561(0x333)](_0x226561(0x33f));}),_0x205739['on'](_0x125a12(0x3c6),(_0x3bfe5f,_0x3b5795)=>{const _0x475908=_0x125a12;if(validateAccess(_0x3b5795,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x475908(0x298)]({'function':_0x475908(0x28d),'args':_0x3bfe5f});}else logger[_0x475908(0x333)](_0x475908(0x3ac));}),_0x205739['on'](_0x125a12(0x2d3),(_0x150e31,_0x496efe)=>{const _0x11c2f=_0x125a12;if(validateAccess(_0x496efe,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad]['send']({'function':_0x11c2f(0x2f6),'args':_0x150e31});}else logger['full'](_0x11c2f(0x31e));}),_0x205739['on'](_0x125a12(0x346),_0x1c5d2a=>{const _0x4b098b=_0x125a12;if(validateAccess(_0x1c5d2a,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x4b098b(0x298)]({'function':_0x4b098b(0x1f5),'args':null});}else logger[_0x4b098b(0x333)](_0x4b098b(0x2dd));}),_0x205739['on'](_0x125a12(0x2bb),_0xfbcd0c=>{const _0x5bbebd=_0x125a12;if(validateAccess(_0xfbcd0c,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x5bbebd(0x298)]({'function':'getStartingBalances','args':null});}else logger[_0x5bbebd(0x333)](_0x5bbebd(0x3b1));}),_0x205739['on'](_0x125a12(0x336),(_0x46b4ab,_0x285bfa)=>{const _0x1012b4=_0x125a12;if(validateAccess(_0x285bfa,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x1012b4(0x298)]({'function':_0x1012b4(0x348),'args':_0x46b4ab});}else logger[_0x1012b4(0x333)](_0x1012b4(0x35b));}),_0x205739['on'](_0x125a12(0x22f),_0xe532e6=>{const _0x32bd57=_0x125a12;if(validateAccess(_0xe532e6,_0x25cbba)['allow']){if(pid[_0x45b6ad])pid[_0x45b6ad][_0x32bd57(0x298)]({'function':'cancelLoading','args':null});}else logger[_0x32bd57(0x333)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x205739['on'](_0x125a12(0x21f),_0x5b7914=>{const _0xc850d8=_0x125a12;if(validateAccess(_0x5b7914,_0x25cbba)[_0xc850d8(0x27f)]){if(pid[_0x45b6ad])pid[_0x45b6ad][_0xc850d8(0x298)]({'function':_0xc850d8(0x313),'args':null});}else logger[_0xc850d8(0x333)](_0xc850d8(0x356));}),_0x205739['on'](_0x125a12(0x3c8),_0x4b0de3=>{const _0x42a9=_0x125a12;if(validateAccess(_0x4b0de3,_0x25cbba)[_0x42a9(0x27f)])updateBB(_0x42a9(0x2f2));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x205739['on'](_0x125a12(0x254),_0x198080=>{const _0x172d3b=_0x125a12;if(validateAccess(_0x198080,_0x25cbba)[_0x172d3b(0x27f)])getMessages();else logger[_0x172d3b(0x333)](_0x172d3b(0x31a));}),_0x205739['on'](_0x125a12(0x229),(_0x279c1a,_0x2c6261)=>{const _0x5d650d=_0x125a12;if(validateAccess(_0x2c6261,_0x25cbba)[_0x5d650d(0x27f)])confirmMessage(_0x279c1a);else logger['full'](_0x5d650d(0x1f1));}),_0x205739['on'](_0x125a12(0x3d7),_0x351d7c=>{const _0x412862=_0x125a12;if(validateAccess(_0x351d7c,_0x25cbba)[_0x412862(0x27f)]){if(devices[_0x25cbba]['pidRefreshToken'])clearTimeout(devices[_0x25cbba][_0x412862(0x25c)]);if(devices[_0x25cbba][_0x412862(0x2e2)])clearTimeout(devices[_0x25cbba][_0x412862(0x2e2)]);removeSocketListeners(getClient(_0x205739['id'])[_0x412862(0x306)]),addBlacklist(_0x25cbba),devices[_0x25cbba][_0x412862(0x2cc)]=null,devices[_0x25cbba][_0x412862(0x2ab)]=null,devices[_0x25cbba][_0x412862(0x316)]['token']=null,logger[_0x412862(0x357)](_0x412862(0x28b)+_0x25cbba['slice'](-0x8)),io['to'](getClient(_0x205739['id'])[_0x412862(0x306)])[_0x412862(0x389)]('status',{'access':{'allow':![],'reason':_0x412862(0x2d6),'token':null}});}else logger[_0x412862(0x333)](_0x412862(0x2d8));});}function removeSocketListeners(_0x30adf8){getClientsWithUuid(_0x30adf8)['forEach'](_0x2ed8c4=>{getSocket(_0x2ed8c4['id'])['removeAllListeners']();});}function cleanSettings(){const _0x46c04b=_0x32bb9d;let _0x41e7b5=settings;return settings['telegramToken']&&settings[_0x46c04b(0x340)]!=''&&(_0x41e7b5={..._0x41e7b5,'telegramToken':_0x46c04b(0x255)}),settings['bbPassword']&&settings[_0x46c04b(0x27e)]!=''&&(_0x41e7b5={..._0x41e7b5,'bbPassword':'************'}),(settings[_0x46c04b(0x27e)]&&settings[_0x46c04b(0x27e)]==_0x46c04b(0x1ed)||settings[_0x46c04b(0x340)]&&settings[_0x46c04b(0x340)]=='***')&&(_0x41e7b5={..._0x41e7b5,'restored':{'password':settings[_0x46c04b(0x27e)]=='***','telegram':settings[_0x46c04b(0x340)]==_0x46c04b(0x1ed)}}),_0x41e7b5;}async function updateBB(_0x5dbec5){const _0x55d48a=_0x32bb9d;await backupConfigFiles(),installingUpdate=!![],config[_0x55d48a(0x362)](_0x2be6ba=>{restartBot(_0x2be6ba['botID']);}),logger[_0x55d48a(0x357)](_0x55d48a(0x217)+_0x5dbec5);if(_0x5dbec5==_0x55d48a(0x2f2))process[_0x55d48a(0x298)]({'update':!![]},_0x81bf6f=>{});else _0x5dbec5==_0x55d48a(0x290)&&process[_0x55d48a(0x298)]({'reinstall':!![]},_0x4a6967=>{});}function startBot(_0x23dbd4,_0x56fcab,_0xdef639){const _0x4e04e4=_0x32bb9d;if(debugging)_0x23dbd4[_0x4e04e4(0x2ac)]('-d');let _0x2dc984=![];const _0x124a39=_0x23dbd4[0x0];_0x56fcab={..._0x56fcab,'stdio':[_0x4e04e4(0x235),_0x4e04e4(0x235),_0x4e04e4(0x235),_0x4e04e4(0x212)]},pid[_0x124a39]=childProcess[_0x4e04e4(0x303)](botfile,_0x23dbd4,_0x56fcab),pid[_0x124a39]['on'](_0x4e04e4(0x23f),_0x1b9f28=>{const _0x106625=_0x4e04e4;switch(Object[_0x106625(0x31d)](_0x1b9f28)[0x0]){case _0x106625(0x320):updateBotName(_0x124a39,_0x1b9f28['botname']);break;case _0x106625(0x2c0):updateBotManager();break;case _0x106625(0x3a4):updateStatus(_0x124a39,_0x1b9f28[_0x106625(0x3a4)]);break;case _0x106625(0x2b4):updateLive(_0x124a39,_0x1b9f28[_0x106625(0x2b4)]);break;case _0x106625(0x285):updateLive(_0x124a39,_0x1b9f28[_0x106625(0x285)]),io['to'](_0x124a39)[_0x106625(0x389)](_0x106625(0x3a4),{'access':{'allow':![],'reason':_0x106625(0x3d0),'token':null}});break;case _0x106625(0x3a5):_0x1b9f28['stop']==_0x106625(0x377)&&restartBot(_0x124a39);_0x1b9f28[_0x106625(0x3a5)]==_0x106625(0x3c1)&&toggleBot(_0x124a39,_0x106625(0x234),_0x106625(0x38d));break;case _0x106625(0x323):sendTelegram(_0x124a39,_0x1b9f28[_0x106625(0x323)]);break;case _0x106625(0x292):sendTelegramMsg(_0x1b9f28[_0x106625(0x292)]);break;case _0x106625(0x3c0):io['to'](_0x124a39)[_0x106625(0x389)](_0x1b9f28['function'],_0x1b9f28[_0x106625(0x380)]);break;}}),pid[_0x124a39]['on'](_0x4e04e4(0x259),function(_0x1da4aa){if(_0x2dc984)return;_0x2dc984=!![],_0xdef639(_0x1da4aa);}),pid[_0x124a39]['on']('exit',async function(_0x303dd9){const _0x4714ba=_0x4e04e4;if(installingUpdate)return;if(_0x2dc984)return;_0x2dc984=!![],_0xdef639(null);const _0xb79fc3=dbConfig['get'](_0x4714ba(0x2d5))[_0x4714ba(0x37a)]({'botID':_0x124a39})['value']();_0xb79fc3&&(_0xb79fc3[_0x4714ba(0x3a4)]==_0x4714ba(0x265)||_0xb79fc3['status']==_0x4714ba(0x294))&&(await sleep(0x3e8),updateLive(_0x124a39,_0x4714ba(0x38d)),logger[_0x4714ba(0x333)](_0x4714ba(0x3a0)+_0x124a39),startBot([_0x124a39,userID],{'cwd':bbpath},function(_0x2e6fb1){const _0x311160=_0x4714ba;if(_0x2e6fb1)logger[_0x311160(0x333)](_0x2e6fb1);}));});}function stopBot(_0xc1bd45){const _0x2e2ac9=_0x32bb9d;getClientsWithBotID(_0xc1bd45)[_0x2e2ac9(0x362)](_0x174e8f=>{const _0x420d6e=_0x2e2ac9;getSocket(_0x174e8f['id'])[_0x420d6e(0x1ec)](!![]),removeClient(_0x174e8f['id']);}),pid[_0xc1bd45]&&(pid[_0xc1bd45][_0x2e2ac9(0x3c1)](),pid[_0xc1bd45]=null);}function restartBot(_0x2a5325){const _0x163751=_0x32bb9d;if(pid[_0x2a5325])pid[_0x2a5325][_0x163751(0x3c1)]();}function addBot(){const _0x3db1f5=_0x32bb9d;let _0x4dc437;for(let _0x157c04=0x1;_0x157c04<0x3e9;_0x157c04++){_0x4dc437=_0x157c04['toString']()['padStart'](0x3,'0');let _0x58c70c=config[_0x3db1f5(0x37a)](_0xd58003=>_0xd58003[_0x3db1f5(0x370)]==_0x4dc437);if(!_0x58c70c)break;}if(_0x4dc437==='1000'){logger[_0x3db1f5(0x333)](_0x3db1f5(0x2bd));return;}logger[_0x3db1f5(0x333)](_0x3db1f5(0x232)+_0x4dc437),dbConfig[_0x3db1f5(0x2b7)]('bots')[_0x3db1f5(0x2ac)]({'botID':_0x4dc437,'botname':_0x3db1f5(0x21d)+_0x4dc437,'status':'new','live':''})['write'](),startBot([_0x4dc437,userID],{'cwd':bbpath},function(_0x42b9af){const _0x2e7449=_0x3db1f5;if(_0x42b9af)logger[_0x2e7449(0x333)](_0x42b9af);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x3db1f5(0x2d5),config),broadcastToBots(_0x3db1f5(0x2d5),JSON[_0x3db1f5(0x2e9)](config));}function deleteBot(_0x1b9248){const _0x27464b=_0x32bb9d;getClientsWithBotID(_0x1b9248)[_0x27464b(0x362)](_0x42480c=>{const _0x3ea083=_0x27464b;getSocket(_0x42480c['id'])[_0x3ea083(0x1ec)](!![]),removeClient(_0x42480c['id']);}),dbConfig[_0x27464b(0x2b7)](_0x27464b(0x2d5))['remove']({'botID':_0x1b9248})[_0x27464b(0x2a1)](),logger['full'](_0x27464b(0x3b3)+_0x1b9248),stopBot(_0x1b9248);try{if(fs[_0x27464b(0x2a7)](path[_0x27464b(0x351)](configpath,_0x27464b(0x1f0)+_0x1b9248+'-config.json')))fs[_0x27464b(0x3d1)](path['join'](configpath,_0x27464b(0x1f0)+_0x1b9248+_0x27464b(0x1ef)));if(fs[_0x27464b(0x2a7)](path[_0x27464b(0x351)](configpath,_0x27464b(0x1f0)+_0x1b9248+_0x27464b(0x1f3))))fs[_0x27464b(0x3d1)](path['join'](configpath,_0x27464b(0x1f0)+_0x1b9248+_0x27464b(0x1f3)));if(fs[_0x27464b(0x2a7)](path[_0x27464b(0x351)](configpath,'bot-'+_0x1b9248+'-performance.json')))fs[_0x27464b(0x3d1)](path[_0x27464b(0x351)](configpath,'bot-'+_0x1b9248+_0x27464b(0x326)));if(fs[_0x27464b(0x2a7)](path[_0x27464b(0x351)](configpath,_0x27464b(0x1f0)+_0x1b9248+_0x27464b(0x22d))))fs[_0x27464b(0x3d1)](path[_0x27464b(0x351)](configpath,'bot-'+_0x1b9248+_0x27464b(0x22d)));}catch(_0xfada7f){if(_0xfada7f)logger[_0x27464b(0x333)](_0x27464b(0x2ea),_0xfada7f);}config=getConfiguration(),io['to'](_0x27464b(0x30b))[_0x27464b(0x389)](_0x27464b(0x2d5),config),broadcastToBots('bots',JSON[_0x27464b(0x2e9)](config));}function toggleBot(_0x2f583d,_0x1d8524,_0x361ae5){const _0x3de9f1=_0x32bb9d;dbConfig[_0x3de9f1(0x2b7)]('bots')[_0x3de9f1(0x37a)]({'botID':_0x2f583d})['assign']({'status':_0x1d8524})[_0x3de9f1(0x304)]({'live':_0x361ae5})[_0x3de9f1(0x2a1)]();if(_0x1d8524==_0x3de9f1(0x265)||_0x1d8524==_0x3de9f1(0x294))logger[_0x3de9f1(0x333)](_0x3de9f1(0x353)+_0x2f583d),startBot([_0x2f583d,userID],{'cwd':bbpath},function(_0x5dbe95){const _0x541885=_0x3de9f1;if(_0x5dbe95)logger[_0x541885(0x333)](_0x5dbe95);});else(_0x1d8524=='disabled'||_0x1d8524==_0x3de9f1(0x252))&&(logger['full'](_0x3de9f1(0x276)+_0x2f583d),stopBot(_0x2f583d));config=getConfiguration(),io['to']('botmanager')[_0x3de9f1(0x389)](_0x3de9f1(0x2d5),config),broadcastToBots(_0x3de9f1(0x2d5),JSON[_0x3de9f1(0x2e9)](config));}function toggleStatus(_0x500af5){const _0x2308a6=_0x32bb9d;let _0x4edda2=dbConfig[_0x2308a6(0x2b7)](_0x2308a6(0x2d5))['find']({'botID':_0x500af5})[_0x2308a6(0x20f)](),_0x36b719;if(_0x4edda2[_0x2308a6(0x3a4)]===_0x2308a6(0x265))_0x36b719=_0x2308a6(0x234);else{if(_0x4edda2[_0x2308a6(0x3a4)]===_0x2308a6(0x294))_0x36b719=_0x2308a6(0x252);else{if(_0x4edda2[_0x2308a6(0x3a4)]===_0x2308a6(0x252))_0x36b719='new';else{if(_0x4edda2[_0x2308a6(0x3a4)]===_0x2308a6(0x234))_0x36b719='enabled';}}}return _0x36b719;}function updateStatus(_0x298d82,_0x4896e5){const _0x2284a5=_0x32bb9d;dbConfig[_0x2284a5(0x2b7)]('bots')['find']({'botID':_0x298d82})['assign']({'status':_0x4896e5})[_0x2284a5(0x2a1)](),config=getConfiguration(),io['to'](_0x2284a5(0x30b))[_0x2284a5(0x389)](_0x2284a5(0x2d5),config),broadcastToBots(_0x2284a5(0x2d5),JSON[_0x2284a5(0x2e9)](config));}function updateLive(_0x322aba,_0x4aefef){const _0x34e9c6=_0x32bb9d;dbConfig[_0x34e9c6(0x2b7)](_0x34e9c6(0x2d5))[_0x34e9c6(0x37a)]({'botID':_0x322aba})[_0x34e9c6(0x304)]({'live':_0x4aefef})['write'](),config=getConfiguration(),io['to'](_0x34e9c6(0x30b))[_0x34e9c6(0x389)](_0x34e9c6(0x2d5),config),broadcastToBots(_0x34e9c6(0x2d5),JSON[_0x34e9c6(0x2e9)](config));}function updateBotName(_0x56d677,_0x4eac29){const _0x1be4b7=_0x32bb9d;dbConfig[_0x1be4b7(0x2b7)]('bots')[_0x1be4b7(0x37a)]({'botID':_0x56d677})[_0x1be4b7(0x304)]({'botname':_0x4eac29})[_0x1be4b7(0x2a1)](),config=getConfiguration(),io['to'](_0x1be4b7(0x30b))[_0x1be4b7(0x389)](_0x1be4b7(0x2d5),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0x2e0055=_0x32bb9d;config=getConfiguration(),io['to'](_0x2e0055(0x30b))[_0x2e0055(0x389)](_0x2e0055(0x2d5),config),broadcastToBots('bots',JSON[_0x2e0055(0x2e9)](config));}function toggleBotMode(_0x45af4e){const _0x477b18=_0x32bb9d;if(pid[_0x45af4e])pid[_0x45af4e][_0x477b18(0x298)]({'function':_0x477b18(0x3c9),'args':null});else{const _0x230023=configpath+'bot-'+_0x45af4e+_0x477b18(0x1ef),_0x377342=fs[_0x477b18(0x37f)](_0x230023),_0x344ee4=JSON[_0x477b18(0x289)](_0x377342),_0x4ee44f=_0x344ee4['bot'][0x0][_0x477b18(0x32a)];_0x344ee4[_0x477b18(0x38c)][0x0][_0x477b18(0x32a)]=!_0x4ee44f;const _0xd1fa75=JSON[_0x477b18(0x2e9)](_0x344ee4,null,0x2);fs['writeFileSync'](_0x230023,_0xd1fa75),config=getConfiguration(),io['to'](_0x477b18(0x30b))[_0x477b18(0x389)]('bots',config),broadcastToBots('bots',JSON[_0x477b18(0x2e9)](config));}}function telegramError(_0x3465a9){const _0x1bbaa5=_0x32bb9d;logger[_0x1bbaa5(0x3a8)](getTimeStamp()+_0x1bbaa5(0x210));}function validateTelegram(_0x281a47){const _0x2c4798=_0x32bb9d;if(_0x281a47['from'][_0x2c4798(0x1f6)]!=settings[_0x2c4798(0x315)]&&'@'+_0x281a47[_0x2c4798(0x38a)][_0x2c4798(0x1f6)]!=settings[_0x2c4798(0x315)])return tgBot[_0x2c4798(0x325)](_0x281a47[_0x2c4798(0x25e)]['id'],_0x2c4798(0x2c3),{'parse_mode':_0x2c4798(0x35a)})[_0x2c4798(0x226)](_0x2b3c38=>{telegramError(_0x2b3c38);}),![];return!![];}async function initTelegram(){const _0x3c5032=_0x32bb9d;if(tgBot)tgBot[_0x3c5032(0x220)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3c5032(0x340)],{'polling':!![]});let _0x2ab088=_0x3c5032(0x1fe);_0x2ab088+='\x0a',_0x2ab088+=_0x3c5032(0x2ae),_0x2ab088+=_0x3c5032(0x33a),_0x2ab088+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2ab088+=_0x3c5032(0x264),_0x2ab088+=_0x3c5032(0x231),_0x2ab088+=_0x3c5032(0x318),_0x2ab088+=_0x3c5032(0x36e),_0x2ab088+=_0x3c5032(0x1f4),_0x2ab088+=_0x3c5032(0x26a),_0x2ab088+=_0x3c5032(0x2c2),_0x2ab088+=_0x3c5032(0x24e),_0x2ab088+=_0x3c5032(0x390),_0x2ab088+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x2ab088+=_0x3c5032(0x2ca);let _0x3db265=_0x3c5032(0x20a);_0x3db265+='\x0a',_0x3db265+=_0x2ab088,tgBot[_0x3c5032(0x203)](/\/start/,_0x5c3e68=>{const _0x1b4db6=_0x3c5032;if(!validateTelegram(_0x5c3e68))return;if(settings['telegramChatId']!=_0x5c3e68[_0x1b4db6(0x25e)]['id'])updateSetting(_0x1b4db6(0x345),_0x5c3e68[_0x1b4db6(0x25e)]['id']);updateSetting(_0x1b4db6(0x216),!![]),tgBot[_0x1b4db6(0x325)](_0x5c3e68['chat']['id'],_0x3db265)[_0x1b4db6(0x226)](_0x187b80=>{telegramError(_0x187b80);});}),tgBot[_0x3c5032(0x203)](/\/enable/,_0x773665=>{const _0x153d4c=_0x3c5032;if(!validateTelegram(_0x773665))return;if(settings['telegramChatId']!=_0x773665[_0x153d4c(0x25e)]['id'])updateSetting('telegramChatId',_0x773665[_0x153d4c(0x25e)]['id']);updateSetting(_0x153d4c(0x216),!![]),tgBot['sendMessage'](_0x773665[_0x153d4c(0x25e)]['id'],_0x153d4c(0x24d))[_0x153d4c(0x226)](_0x35344c=>{telegramError(_0x35344c);});}),tgBot[_0x3c5032(0x203)](/\/config/,async _0xbddc3b=>{const _0x41f07f=_0x3c5032;if(!validateTelegram(_0xbddc3b))return;tgBot['removeListener'](_0x41f07f(0x249)),tgBot[_0x41f07f(0x325)](_0xbddc3b[_0x41f07f(0x25e)]['id'],_0x41f07f(0x396),{'reply_markup':{'inline_keyboard':[[{'text':_0x41f07f(0x222),'callback_data':_0x41f07f(0x2bc)},{'text':_0x41f07f(0x39b),'callback_data':_0x41f07f(0x1ee)},{'text':_0x41f07f(0x337),'callback_data':_0x41f07f(0x201)}]]}})[_0x41f07f(0x226)](_0x13f9c1=>{telegramError(_0x13f9c1);}),tgBot['on']('callback_query',async _0x38400b=>{const _0x13e2c4=_0x41f07f,_0x28b43c=_0x38400b['data'],_0x4c762a=_0x38400b['message'];tgBot[_0x13e2c4(0x23c)](_0x38400b['id'])[_0x13e2c4(0x395)](async()=>{const _0x3df519=_0x13e2c4;_0x28b43c=='orders'&&(updateSetting(_0x3df519(0x305),_0x3df519(0x2bc)),updateSetting(_0x3df519(0x216),!![]),await tgBot[_0x3df519(0x325)](_0x4c762a[_0x3df519(0x25e)]['id'],_0x3df519(0x21c))[_0x3df519(0x226)](_0x56ee4b=>{telegramError(_0x56ee4b);}));_0x28b43c==_0x3df519(0x1ee)&&(updateSetting('telegramEvents','alerts'),updateSetting(_0x3df519(0x216),!![]),await tgBot['sendMessage'](_0x4c762a[_0x3df519(0x25e)]['id'],_0x3df519(0x343))[_0x3df519(0x226)](_0xee8f72=>{telegramError(_0xee8f72);}));_0x28b43c==_0x3df519(0x201)&&(updateSetting(_0x3df519(0x305),_0x3df519(0x201)),updateSetting(_0x3df519(0x216),!![]),await tgBot['sendMessage'](_0x4c762a[_0x3df519(0x25e)]['id'],_0x3df519(0x38f))[_0x3df519(0x226)](_0x2fa1c6=>{telegramError(_0x2fa1c6);}));if(!settings[_0x3df519(0x345)])tgBot['sendMessage'](_0x4c762a[_0x3df519(0x25e)]['id'],_0x3df519(0x2b0))[_0x3df519(0x226)](_0x4f92e5=>{telegramError(_0x4f92e5);});}),tgBot[_0x13e2c4(0x2d0)](_0x13e2c4(0x249));});}),tgBot['onText'](/\/status/,_0x4a4798=>{const _0x1cea70=_0x3c5032;if(!validateTelegram(_0x4a4798))return;const _0x1b0ab2=getBotsWithMode();let _0x9d6861='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x1cea70(0x362)](_0x329089=>{const _0x3c57b8=_0x1cea70,_0x269f41=_0x1b0ab2['find'](_0x7abe8d=>_0x7abe8d['botID']==_0x329089[_0x3c57b8(0x370)])[_0x3c57b8(0x302)];_0x9d6861+=_0x3c57b8(0x21d)+_0x329089[_0x3c57b8(0x370)]+':\x20'+_0x329089[_0x3c57b8(0x3a4)]+_0x3c57b8(0x20b)+_0x269f41+'\x20|\x20'+_0x329089[_0x3c57b8(0x2b4)]+'\x0a';}),_0x9d6861+='\x0a',_0x9d6861+=_0x1cea70(0x387),_0x9d6861+=!settings[_0x1cea70(0x216)]?_0x1cea70(0x242):'Notifications\x20enabled\x0a',_0x9d6861+=settings[_0x1cea70(0x216)]?settings['telegramEvents']==_0x1cea70(0x201)?_0x1cea70(0x206):'Notifications\x20types:\x20'+settings[_0x1cea70(0x305)]+_0x1cea70(0x29b):'',tgBot[_0x1cea70(0x325)](_0x4a4798[_0x1cea70(0x25e)]['id'],_0x9d6861,{'parse_mode':_0x1cea70(0x35a)})[_0x1cea70(0x226)](_0x34826b=>{telegramError(_0x34826b);});}),tgBot['onText'](/\/restart/,_0x4c3db2=>{const _0x245720=_0x3c5032;if(!validateTelegram(_0x4c3db2))return;tgBot[_0x245720(0x2d0)](_0x245720(0x249));const _0x2221e1=getEnabledBots();if(_0x2221e1['length']==0x0)tgBot[_0x245720(0x325)](_0x4c3db2[_0x245720(0x25e)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x34a0d9=>{telegramError(_0x34a0d9);});else{if(_0x2221e1[_0x245720(0x3b0)]>0x1)_0x2221e1[_0x245720(0x2ac)]({'botID':_0x245720(0x201)});let _0x21d8bb=[],_0x2f646f=[];const _0x779a62=_0x2221e1['length']%0x4==0x0||_0x2221e1[_0x245720(0x3b0)]%0x4==0x3||_0x2221e1[_0x245720(0x3b0)]%0x3==0x1?0x4:0x3;let _0xb0b80f=0x0;_0x2221e1['forEach']((_0x28a8e5,_0x1c7921)=>{const _0x4ee1af=_0x245720;if(_0x1c7921%_0x779a62==0x0)_0x2f646f=[];_0x2f646f['push']({'text':_0x28a8e5[_0x4ee1af(0x370)]==_0x4ee1af(0x201)?_0x4ee1af(0x238):_0x4ee1af(0x21d)+_0x28a8e5[_0x4ee1af(0x370)],'callback_data':_0x28a8e5['botID']}),_0x1c7921%_0x779a62==0x0&&(_0x21d8bb[_0xb0b80f]=_0x2f646f,_0xb0b80f++);}),tgBot[_0x245720(0x325)](_0x4c3db2[_0x245720(0x25e)]['id'],_0x245720(0x369),{'reply_markup':{'inline_keyboard':_0x21d8bb}})['catch'](_0x396b28=>{telegramError(_0x396b28);}),tgBot['on'](_0x245720(0x249),async _0x26b2e8=>{const _0x4d40f2=_0x245720,_0x234543=_0x26b2e8[_0x4d40f2(0x1f9)],_0x6930ea=_0x26b2e8['message'];tgBot[_0x4d40f2(0x23c)](_0x26b2e8['id'])[_0x4d40f2(0x395)](async()=>{const _0xae76b0=_0x4d40f2;_0x234543==_0xae76b0(0x201)?config[_0xae76b0(0x362)](_0x16f57f=>{restartBot(_0x16f57f['botID']);}):restartBot(_0x234543);}),tgBot[_0x4d40f2(0x2d0)](_0x4d40f2(0x249));});}}),tgBot[_0x3c5032(0x203)](/\/on/,_0x313713=>{const _0x5d8d08=_0x3c5032;if(!validateTelegram(_0x313713))return;tgBot[_0x5d8d08(0x2d0)]('callback_query');const _0x4996b0=getDisabledBots();if(_0x4996b0[_0x5d8d08(0x3b0)]==0x0)tgBot[_0x5d8d08(0x325)](_0x313713[_0x5d8d08(0x25e)]['id'],_0x5d8d08(0x2a8))[_0x5d8d08(0x226)](_0x228ddb=>{telegramError(_0x228ddb);});else{if(_0x4996b0[_0x5d8d08(0x3b0)]>0x1)_0x4996b0['push']({'botID':_0x5d8d08(0x201)});let _0x42f1ce=[],_0x45a934=[];const _0x25cd12=_0x4996b0[_0x5d8d08(0x3b0)]%0x4==0x0||_0x4996b0['length']%0x4==0x3||_0x4996b0[_0x5d8d08(0x3b0)]%0x3==0x1?0x4:0x3;let _0x2c0c5a=0x0;_0x4996b0[_0x5d8d08(0x362)]((_0x41f2c1,_0x19484a)=>{const _0x4f0530=_0x5d8d08;if(_0x19484a%_0x25cd12==0x0)_0x45a934=[];_0x45a934['push']({'text':_0x41f2c1[_0x4f0530(0x370)]==_0x4f0530(0x201)?_0x4f0530(0x238):_0x4f0530(0x21d)+_0x41f2c1['botID'],'callback_data':_0x41f2c1['botID']}),_0x19484a%_0x25cd12==0x0&&(_0x42f1ce[_0x2c0c5a]=_0x45a934,_0x2c0c5a++);}),tgBot[_0x5d8d08(0x325)](_0x313713[_0x5d8d08(0x25e)]['id'],_0x5d8d08(0x399),{'reply_markup':{'inline_keyboard':_0x42f1ce}})['catch'](_0x2d134a=>{telegramError(_0x2d134a);}),tgBot['on'](_0x5d8d08(0x249),async _0x4725cb=>{const _0x5cfb9f=_0x5d8d08,_0x29af9d=_0x4725cb[_0x5cfb9f(0x1f9)],_0x3f4258=_0x4725cb[_0x5cfb9f(0x23f)];tgBot[_0x5cfb9f(0x23c)](_0x4725cb['id'])[_0x5cfb9f(0x395)](async()=>{const _0x28b5c7=_0x5cfb9f;_0x29af9d==_0x28b5c7(0x201)?(tgBot['sendMessage'](_0x3f4258[_0x28b5c7(0x25e)]['id'],_0x28b5c7(0x1f7))[_0x28b5c7(0x226)](_0x580ec4=>{telegramError(_0x580ec4);}),_0x4996b0[_0x28b5c7(0x362)](_0x35ef11=>{const _0x465d82=_0x28b5c7;if(_0x35ef11[_0x465d82(0x370)]!=_0x465d82(0x201))toggleBot(_0x35ef11[_0x465d82(0x370)],toggleStatus(_0x35ef11['botID']),_0x465d82(0x38d));})):(tgBot['sendMessage'](_0x3f4258[_0x28b5c7(0x25e)]['id'],_0x28b5c7(0x3bd)+_0x29af9d)[_0x28b5c7(0x226)](_0x55cd7f=>{telegramError(_0x55cd7f);}),toggleBot(_0x29af9d,toggleStatus(_0x29af9d),_0x28b5c7(0x38d)));}),tgBot['removeListener'](_0x5cfb9f(0x249));});}}),tgBot[_0x3c5032(0x203)](/\/off/,_0x3e36de=>{const _0x5abb43=_0x3c5032;if(!validateTelegram(_0x3e36de))return;tgBot['removeListener']('callback_query');const _0x22950a=getEnabledBots();if(_0x22950a['length']==0x0)tgBot[_0x5abb43(0x325)](_0x3e36de[_0x5abb43(0x25e)]['id'],_0x5abb43(0x2b3))[_0x5abb43(0x226)](_0x1e5806=>{telegramError(_0x1e5806);});else{if(_0x22950a['length']>0x1)_0x22950a[_0x5abb43(0x2ac)]({'botID':'all'});let _0x350680=[],_0x4b81e6=[];const _0x2be6ca=_0x22950a['length']%0x4==0x0||_0x22950a['length']%0x4==0x3||_0x22950a['length']%0x3==0x1?0x4:0x3;let _0xb32673=0x0;_0x22950a[_0x5abb43(0x362)]((_0x990938,_0x1d4dac)=>{const _0xa8cbb0=_0x5abb43;if(_0x1d4dac%_0x2be6ca==0x0)_0x4b81e6=[];_0x4b81e6[_0xa8cbb0(0x2ac)]({'text':_0x990938[_0xa8cbb0(0x370)]==_0xa8cbb0(0x201)?_0xa8cbb0(0x238):_0xa8cbb0(0x21d)+_0x990938[_0xa8cbb0(0x370)],'callback_data':_0x990938[_0xa8cbb0(0x370)]}),_0x1d4dac%_0x2be6ca==0x0&&(_0x350680[_0xb32673]=_0x4b81e6,_0xb32673++);}),tgBot[_0x5abb43(0x325)](_0x3e36de[_0x5abb43(0x25e)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x350680}})['catch'](_0x192548=>{telegramError(_0x192548);}),tgBot['on'](_0x5abb43(0x249),async _0x2ee99a=>{const _0xc6bf8=_0x5abb43,_0x130985=_0x2ee99a['data'],_0x103d63=_0x2ee99a[_0xc6bf8(0x23f)];tgBot[_0xc6bf8(0x23c)](_0x2ee99a['id'])['then'](async()=>{const _0x4a75d6=_0xc6bf8;_0x130985==_0x4a75d6(0x201)?(tgBot[_0x4a75d6(0x325)](_0x103d63[_0x4a75d6(0x25e)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4a75d6(0x226)](_0x4c4360=>{telegramError(_0x4c4360);}),_0x22950a[_0x4a75d6(0x362)](_0x14c430=>{const _0x453f4d=_0x4a75d6;if(_0x14c430[_0x453f4d(0x370)]!=_0x453f4d(0x201))toggleBot(_0x14c430[_0x453f4d(0x370)],toggleStatus(_0x14c430[_0x453f4d(0x370)]),_0x453f4d(0x38d));})):(tgBot[_0x4a75d6(0x325)](_0x103d63['chat']['id'],_0x4a75d6(0x213)+_0x130985)[_0x4a75d6(0x226)](_0x596d8c=>{telegramError(_0x596d8c);}),toggleBot(_0x130985,toggleStatus(_0x130985),_0x4a75d6(0x38d)));}),tgBot[_0xc6bf8(0x2d0)](_0xc6bf8(0x249));});}}),tgBot[_0x3c5032(0x203)](/\/metrics/,_0x292e3d=>{const _0x29d611=_0x3c5032;if(!validateTelegram(_0x292e3d))return;tgBot[_0x29d611(0x2d0)](_0x29d611(0x249));const _0x2e1cd3=getEnabledBots();if(_0x2e1cd3[_0x29d611(0x3b0)]==0x0)tgBot[_0x29d611(0x325)](_0x292e3d['chat']['id'],_0x29d611(0x2b3))[_0x29d611(0x226)](_0x5ecc4a=>{telegramError(_0x5ecc4a);});else{if(_0x2e1cd3[_0x29d611(0x3b0)]>0x1){let _0x1b3d23=[],_0x302277=[];const _0x2d9bb9=_0x2e1cd3[_0x29d611(0x3b0)]%0x4==0x0||_0x2e1cd3['length']%0x4==0x3||_0x2e1cd3[_0x29d611(0x3b0)]%0x3==0x1?0x4:0x3;let _0x1e7261=0x0;_0x2e1cd3[_0x29d611(0x362)]((_0x21a495,_0xc02ad9)=>{const _0x10680d=_0x29d611;if(_0xc02ad9%_0x2d9bb9==0x0)_0x302277=[];_0x302277[_0x10680d(0x2ac)]({'text':_0x10680d(0x21d)+_0x21a495[_0x10680d(0x370)],'callback_data':_0x21a495[_0x10680d(0x370)]}),_0xc02ad9%_0x2d9bb9==0x0&&(_0x1b3d23[_0x1e7261]=_0x302277,_0x1e7261++);}),tgBot[_0x29d611(0x325)](_0x292e3d[_0x29d611(0x25e)]['id'],_0x29d611(0x3ab),{'reply_markup':{'inline_keyboard':_0x1b3d23}})['catch'](_0x523953=>{telegramError(_0x523953);}),tgBot['on']('callback_query',async _0x6e90b2=>{const _0x2318f8=_0x29d611,_0x500d54=_0x6e90b2[_0x2318f8(0x1f9)],_0x539d04=_0x6e90b2[_0x2318f8(0x23f)];tgBot[_0x2318f8(0x23c)](_0x6e90b2['id'])[_0x2318f8(0x395)](async()=>{const _0x3c1c1a=_0x2318f8;if(pid[_0x500d54])pid[_0x500d54][_0x3c1c1a(0x298)]({'function':_0x3c1c1a(0x393),'args':null});}),tgBot[_0x2318f8(0x2d0)](_0x2318f8(0x249));});}else{const _0x3a95eb=_0x2e1cd3[0x0][_0x29d611(0x370)];if(pid[_0x3a95eb])pid[_0x3a95eb][_0x29d611(0x298)]({'function':_0x29d611(0x393),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x48943d=>{const _0x2c274c=_0x3c5032;if(!validateTelegram(_0x48943d))return;tgBot[_0x2c274c(0x2d0)](_0x2c274c(0x249));const _0x4cccdb=getEnabledBots();if(_0x4cccdb['length']==0x0)tgBot[_0x2c274c(0x325)](_0x48943d[_0x2c274c(0x25e)]['id'],_0x2c274c(0x2b3))['catch'](_0x1b55b7=>{telegramError(_0x1b55b7);});else{if(_0x4cccdb[_0x2c274c(0x3b0)]>0x1){let _0x520c82=[],_0x4a858b=[];const _0x8d207c=_0x4cccdb[_0x2c274c(0x3b0)]%0x4==0x0||_0x4cccdb['length']%0x4==0x3||_0x4cccdb[_0x2c274c(0x3b0)]%0x3==0x1?0x4:0x3;let _0x1c3692=0x0;_0x4cccdb[_0x2c274c(0x362)]((_0x40a8c5,_0x58da4d)=>{const _0x544e5c=_0x2c274c;if(_0x58da4d%_0x8d207c==0x0)_0x4a858b=[];_0x4a858b[_0x544e5c(0x2ac)]({'text':_0x544e5c(0x21d)+_0x40a8c5['botID'],'callback_data':_0x40a8c5[_0x544e5c(0x370)]}),_0x58da4d%_0x8d207c==0x0&&(_0x520c82[_0x1c3692]=_0x4a858b,_0x1c3692++);}),tgBot[_0x2c274c(0x325)](_0x48943d[_0x2c274c(0x25e)]['id'],_0x2c274c(0x23a),{'reply_markup':{'inline_keyboard':_0x520c82}})['catch'](_0x34475f=>{telegramError(_0x34475f);}),tgBot['on']('callback_query',async _0x3914c6=>{const _0x128142=_0x2c274c,_0x299870=_0x3914c6[_0x128142(0x1f9)],_0x137e1a=_0x3914c6['message'];tgBot[_0x128142(0x23c)](_0x3914c6['id'])[_0x128142(0x395)](async()=>{const _0x586c0f=_0x128142;if(pid[_0x299870])pid[_0x299870][_0x586c0f(0x298)]({'function':_0x586c0f(0x2d1),'args':null});}),tgBot[_0x128142(0x2d0)](_0x128142(0x249));});}else{const _0xef9a99=_0x4cccdb[0x0]['botID'];if(pid[_0xef9a99])pid[_0xef9a99][_0x2c274c(0x298)]({'function':_0x2c274c(0x2d1),'args':null});}}}),tgBot[_0x3c5032(0x203)](/\/update/,async _0x42c38a=>{const _0x191cec=_0x3c5032;if(!validateTelegram(_0x42c38a))return;tgBot[_0x191cec(0x2d0)](_0x191cec(0x249)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x42c38a['chat']['id'],_0x191cec(0x2fb))['catch'](_0x2cf412=>{telegramError(_0x2cf412);});else!validInstallation?tgBot['sendMessage'](_0x42c38a[_0x191cec(0x25e)]['id'],_0x191cec(0x328))[_0x191cec(0x226)](_0x1e1eea=>{telegramError(_0x1e1eea);}):(tgBot[_0x191cec(0x325)](_0x42c38a[_0x191cec(0x25e)]['id'],_0x191cec(0x2ef),{'reply_markup':{'inline_keyboard':[[{'text':_0x191cec(0x386),'callback_data':_0x191cec(0x327)},{'text':'No','callback_data':'no'}]]}})[_0x191cec(0x226)](_0x387be3=>{telegramError(_0x387be3);}),tgBot['on'](_0x191cec(0x249),async _0x26fc2f=>{const _0x111816=_0x191cec,_0x43e2d1=_0x26fc2f[_0x111816(0x1f9)],_0x4aed80=_0x26fc2f[_0x111816(0x23f)];tgBot['answerCallbackQuery'](_0x26fc2f['id'])[_0x111816(0x395)](async()=>{const _0x5a6cd1=_0x111816;_0x43e2d1=='yes'&&(await tgBot['sendMessage'](_0x4aed80[_0x5a6cd1(0x25e)]['id'],'Starting\x20Balance\x20Bot\x20update')[_0x5a6cd1(0x226)](_0x44abfd=>{telegramError(_0x44abfd);}),updateBB('update')),_0x43e2d1=='no'&&await tgBot[_0x5a6cd1(0x325)](_0x4aed80['chat']['id'],_0x5a6cd1(0x338))[_0x5a6cd1(0x226)](_0x5d023c=>{telegramError(_0x5d023c);});}),tgBot[_0x111816(0x2d0)]('callback_query');}));}),tgBot['onText'](/\/reinstall/,async _0x2aed33=>{const _0x325ea3=_0x3c5032;if(!validateTelegram(_0x2aed33))return;tgBot[_0x325ea3(0x2d0)]('callback_query'),!validInstallation?tgBot[_0x325ea3(0x325)](_0x2aed33[_0x325ea3(0x25e)]['id'],_0x325ea3(0x24a))['catch'](_0x4f847f=>{telegramError(_0x4f847f);}):(tgBot[_0x325ea3(0x325)](_0x2aed33[_0x325ea3(0x25e)]['id'],_0x325ea3(0x361),{'reply_markup':{'inline_keyboard':[[{'text':_0x325ea3(0x386),'callback_data':_0x325ea3(0x327)},{'text':'No','callback_data':'no'}]]}})[_0x325ea3(0x226)](_0x413315=>{telegramError(_0x413315);}),tgBot['on'](_0x325ea3(0x249),async _0x298ca6=>{const _0x249450=_0x325ea3,_0x35df2d=_0x298ca6[_0x249450(0x1f9)],_0x3feffd=_0x298ca6[_0x249450(0x23f)];tgBot[_0x249450(0x23c)](_0x298ca6['id'])[_0x249450(0x395)](async()=>{const _0x3f4a49=_0x249450;_0x35df2d==_0x3f4a49(0x327)&&(await tgBot['sendMessage'](_0x3feffd[_0x3f4a49(0x25e)]['id'],_0x3f4a49(0x3c3))[_0x3f4a49(0x226)](_0x443dd0=>{telegramError(_0x443dd0);}),updateBB('reinstall')),_0x35df2d=='no'&&await tgBot['sendMessage'](_0x3feffd['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x3f4a49(0x226)](_0x21e6ef=>{telegramError(_0x21e6ef);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0x3c5032(0x203)](/\/toggle/,_0x1ea102=>{const _0x48aebb=_0x3c5032;if(!validateTelegram(_0x1ea102))return;tgBot[_0x48aebb(0x2d0)]('callback_query');const _0x78ad89=getBotsWithMode();if(_0x78ad89[_0x48aebb(0x3b0)]==0x0)tgBot[_0x48aebb(0x325)](_0x1ea102[_0x48aebb(0x25e)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x48aebb(0x226)](_0x4effea=>{telegramError(_0x4effea);});else{let _0x2ccb1b=[],_0x894986=[];const _0x343b69=0x2;let _0x11bf0e=0x0;_0x78ad89[_0x48aebb(0x362)]((_0x3e67d3,_0x25fda4)=>{const _0x46e225=_0x48aebb;if(_0x25fda4%_0x343b69==0x0)_0x894986=[];_0x894986['push']({'text':_0x46e225(0x21d)+_0x3e67d3[_0x46e225(0x370)]+'\x20('+_0x3e67d3[_0x46e225(0x302)]+')','callback_data':_0x3e67d3[_0x46e225(0x370)]}),_0x25fda4%_0x343b69==0x0&&(_0x2ccb1b[_0x11bf0e]=_0x894986,_0x11bf0e++);}),tgBot[_0x48aebb(0x325)](_0x1ea102[_0x48aebb(0x25e)]['id'],_0x48aebb(0x35f),{'reply_markup':{'inline_keyboard':_0x2ccb1b}})[_0x48aebb(0x226)](_0xc87f2d=>{telegramError(_0xc87f2d);}),tgBot['on']('callback_query',async _0x181691=>{const _0x2aeef9=_0x48aebb,_0x2d0134=_0x181691['data'],_0x458b09=_0x181691[_0x2aeef9(0x23f)];tgBot['answerCallbackQuery'](_0x181691['id'])[_0x2aeef9(0x395)](async()=>{const _0x302828=_0x2aeef9,_0x458862=_0x78ad89['find'](_0x713234=>_0x713234['botID']==_0x2d0134),_0x2a4098=_0x458862[_0x302828(0x302)]==_0x302828(0x267)?_0x302828(0x1fc):'auto';tgBot[_0x302828(0x325)](_0x458b09[_0x302828(0x25e)]['id'],_0x302828(0x3ce)+_0x2d0134+_0x302828(0x301)+_0x2a4098+_0x302828(0x297))[_0x302828(0x226)](_0x1b1b55=>{telegramError(_0x1b1b55);}),toggleBotMode(_0x2d0134);}),tgBot[_0x2aeef9(0x2d0)]('callback_query');});}}),tgBot[_0x3c5032(0x203)](/\/names/,_0x1b2142=>{const _0x364ff3=_0x3c5032;if(!validateTelegram(_0x1b2142))return;let _0x3ca672='';config[_0x364ff3(0x362)](_0x336851=>{const _0x55784e=_0x364ff3;_0x3ca672+='Bot\x20'+_0x336851[_0x55784e(0x370)]+':\x20'+_0x336851['botname']+'\x0a';}),tgBot[_0x364ff3(0x325)](_0x1b2142['chat']['id'],_0x3ca672,{'parse_mode':_0x364ff3(0x35a)})['catch'](_0x36ff72=>{telegramError(_0x36ff72);});}),tgBot[_0x3c5032(0x203)](/\/disable/,_0x490a33=>{const _0x5d73be=_0x3c5032;if(!validateTelegram(_0x490a33))return;tgBot['sendMessage'](_0x490a33['chat']['id'],'Notifications\x20disabled')['catch'](_0x35290d=>{telegramError(_0x35290d);}),updateSetting(_0x5d73be(0x216),![]);}),tgBot[_0x3c5032(0x203)](/\/help/,_0x45a866=>{const _0x47cd7a=_0x3c5032;if(!validateTelegram(_0x45a866))return;tgBot[_0x47cd7a(0x325)](_0x45a866[_0x47cd7a(0x25e)]['id'],_0x2ab088)[_0x47cd7a(0x226)](_0x3f2f88=>{telegramError(_0x3f2f88);});}),tgBot['on'](_0x3c5032(0x282),_0x579ff0=>{const _0x4e4164=_0x3c5032;_0x579ff0[_0x4e4164(0x28a)]()['includes'](_0x4e4164(0x268))&&(logger[_0x4e4164(0x333)]('Invalid\x20Telegram\x20token'),tgBot[_0x4e4164(0x220)](),tgBot=null,io['to'](_0x4e4164(0x30b))['emit'](_0x4e4164(0x314),_0x4e4164(0x3b8)));}),process[_0x3c5032(0x36b)](_0x3c5032(0x2c8),()=>{const _0x5547fa=_0x3c5032;if(tgBot)tgBot[_0x5547fa(0x220)]();process[_0x5547fa(0x385)](0x1);}),process['once'](_0x3c5032(0x36a),()=>{const _0x126b7c=_0x3c5032;if(tgBot)tgBot[_0x126b7c(0x220)]();process[_0x126b7c(0x385)](0x1);});}}function disableTelegram(){const _0x380d83=_0x32bb9d;tgBot&&(tgBot[_0x380d83(0x220)](),tgBot=null);}function sendTelegram(_0x14c6d2,_0x1375a3){const _0x59f2aa=_0x32bb9d;if(settings['telegramEnabled']){if(settings[_0x59f2aa(0x305)]==_0x59f2aa(0x201)||(_0x1375a3[_0x59f2aa(0x25b)]==_0x59f2aa(0x259)||_0x1375a3[_0x59f2aa(0x25b)]=='warning'||_0x1375a3['type']==_0x59f2aa(0x310))&&settings[_0x59f2aa(0x305)]==_0x59f2aa(0x1ee)||_0x1375a3[_0x59f2aa(0x25b)]==_0x59f2aa(0x2ba)&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x59f2aa(0x345)]){if(_0x1375a3[_0x59f2aa(0x2f9)])tgBot[_0x59f2aa(0x325)](settings[_0x59f2aa(0x345)],_0x1375a3[_0x59f2aa(0x320)]+_0x59f2aa(0x334)+_0x1375a3[_0x59f2aa(0x261)])[_0x59f2aa(0x226)](_0x50ae95=>{telegramError(_0x50ae95);});else tgBot[_0x59f2aa(0x325)](settings['telegramChatId'],'Bot\x20'+_0x14c6d2+_0x59f2aa(0x334)+_0x1375a3[_0x59f2aa(0x261)])[_0x59f2aa(0x226)](_0x319d06=>{telegramError(_0x319d06);});}}}}async function sendTelegramMsg(_0x26c69d,_0x478559=_0x32bb9d(0x35a)){const _0x3fb2e6=_0x32bb9d;return settings['telegramEnabled']&&tgBot&&settings[_0x3fb2e6(0x345)]?(await tgBot[_0x3fb2e6(0x325)](settings[_0x3fb2e6(0x345)],_0x26c69d,{'parse_mode':_0x478559})[_0x3fb2e6(0x226)](_0x6c0868=>{telegramError(_0x6c0868);}),!![]):![];}function getDeviceWithIp(_0x592948){return devices['find'](_0x4d6d3d=>_0x4d6d3d['ip']===_0x592948);}function temporaryAccess2FA(_0x1df038,_0x2dd868){const _0x4a41a=_0x32bb9d;let _0x585c0b=new Date(),_0x2d9355=![];if(lastIpApproval){if(_0x585c0b-lastIpApproval<0x1388)_0x2d9355=!![];}lastIpApproval=new Date();if(_0x2d9355)return;tgBot&&settings[_0x4a41a(0x345)]&&(tgBot[_0x4a41a(0x2d0)](_0x4a41a(0x249)),tgBot[_0x4a41a(0x325)](settings['telegramChatId'],_0x4a41a(0x2fe)+normalizeIP(_0x2dd868)['show']+_0x4a41a(0x221),{'parse_mode':_0x4a41a(0x35a),'reply_markup':{'inline_keyboard':[[{'text':_0x4a41a(0x32b),'callback_data':'5'},{'text':_0x4a41a(0x279),'callback_data':'15'},{'text':_0x4a41a(0x23b),'callback_data':'30'},{'text':_0x4a41a(0x39a),'callback_data':'reject'}]]}})[_0x4a41a(0x226)](_0x28a00d=>{telegramError(_0x28a00d);}),tgBot['on'](_0x4a41a(0x249),async _0x2e1eb9=>{const _0x261622=_0x4a41a,_0x3f697e=_0x2e1eb9[_0x261622(0x1f9)],_0x3f5665=_0x2e1eb9['message'];tgBot[_0x261622(0x23c)](_0x2e1eb9['id'])[_0x261622(0x395)](async()=>{const _0x1819ab=_0x261622;devices[_0x1df038][_0x1819ab(0x2cc)]={'clientip':_0x2dd868,'timestamp':new Date()['getTime'](),'expiry':_0x3f697e},_0x3f697e!=_0x1819ab(0x39a)?(await tgBot[_0x1819ab(0x325)](_0x3f5665[_0x1819ab(0x25e)]['id'],_0x1819ab(0x219)+_0x3f697e+_0x1819ab(0x2f4),{'parse_mode':_0x1819ab(0x35a)})[_0x1819ab(0x226)](_0x2c417e=>{telegramError(_0x2c417e);}),io['to'](_0x1df038)[_0x1819ab(0x389)](_0x1819ab(0x3a4),{'access':{'allow':![],'reason':_0x1819ab(0x3d0),'token':null}})):(await tgBot[_0x1819ab(0x325)](_0x3f5665[_0x1819ab(0x25e)]['id'],_0x1819ab(0x379))['catch'](_0xd4d7e5=>{telegramError(_0xd4d7e5);}),io['to'](_0x1df038)[_0x1819ab(0x389)]('status',{'access':{'allow':![],'reason':_0x1819ab(0x2f1),'token':null}}));}),tgBot[_0x261622(0x2d0)](_0x261622(0x249));}));}function loginAccess2FA(_0x573c3e,_0x254146){const _0x525b50=_0x32bb9d;tgBot&&settings[_0x525b50(0x345)]&&(tgBot[_0x525b50(0x2d0)]('callback_query'),tgBot[_0x525b50(0x325)](settings[_0x525b50(0x345)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x254146)['show']+_0x525b50(0x221),{'parse_mode':_0x525b50(0x35a),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x525b50(0x226)](_0x102253=>{telegramError(_0x102253);}),tgBot['on'](_0x525b50(0x249),async _0x484db3=>{const _0x39e2eb=_0x525b50,_0x39b4a2=_0x484db3[_0x39e2eb(0x1f9)],_0x49f6aa=_0x484db3[_0x39e2eb(0x23f)];tgBot[_0x39e2eb(0x23c)](_0x484db3['id'])[_0x39e2eb(0x395)](async()=>{const _0x121b83=_0x39e2eb;devices[_0x573c3e][_0x121b83(0x2ab)]={'clientip':_0x254146,'timestamp':new Date()[_0x121b83(0x21e)](),'expiry':_0x39b4a2},_0x39b4a2!='reject'?(await tgBot[_0x121b83(0x325)](_0x49f6aa[_0x121b83(0x25e)]['id'],_0x121b83(0x371),{'parse_mode':_0x121b83(0x35a)})[_0x121b83(0x226)](_0x46ef7a=>{telegramError(_0x46ef7a);}),io['to'](_0x573c3e)[_0x121b83(0x389)](_0x121b83(0x3a4),{'access':{'allow':![],'reason':_0x121b83(0x3d0),'token':null}})):(await tgBot['sendMessage'](_0x49f6aa[_0x121b83(0x25e)]['id'],_0x121b83(0x384))['catch'](_0x1ba15c=>{telegramError(_0x1ba15c);}),io['to'](_0x573c3e)['emit'](_0x121b83(0x3a4),{'access':{'allow':![],'reason':_0x121b83(0x21a),'token':null}}));}),tgBot[_0x39e2eb(0x2d0)](_0x39e2eb(0x249));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xcc5c21=_0x32bb9d;return dbConfig[_0xcc5c21(0x2b7)](_0xcc5c21(0x2d5))['sortBy'](_0xcc5c21(0x370))['filter']({'status':_0xcc5c21(0x265)})['value']()||[];}function getDisabledBots(){const _0x551237=_0x32bb9d;return dbConfig['get'](_0x551237(0x2d5))[_0x551237(0x24b)](_0x551237(0x370))[_0x551237(0x2d4)]({'status':_0x551237(0x234)})[_0x551237(0x20f)]()||[];}function getBotAttributes(_0x46690e){const _0x36aa6c=_0x32bb9d;let _0x36f586={};const _0x2eab27=configpath+_0x36aa6c(0x1f0)+_0x46690e+_0x36aa6c(0x1ef),_0x240ae1=fs[_0x36aa6c(0x2a7)](_0x2eab27);if(_0x240ae1){const _0x16c865=fs[_0x36aa6c(0x37f)](_0x2eab27);try{const _0xd44a5b=JSON['parse'](_0x16c865),_0x2296d3=_0xd44a5b?_0xd44a5b[_0x36aa6c(0x38c)][0x0][_0x36aa6c(0x32a)]:![];_0x36f586['mode']=_0x2296d3?_0x36aa6c(0x267):_0x36aa6c(0x1fc),_0x36f586[_0x36aa6c(0x320)]=_0xd44a5b?_0xd44a5b[_0x36aa6c(0x38c)][0x0][_0x36aa6c(0x320)]:_0x36aa6c(0x21d)+_0x46690e;}catch(_0x1b8dfc){_0x36f586[_0x36aa6c(0x302)]=_0x36aa6c(0x1fc),_0x36f586[_0x36aa6c(0x320)]=_0x36aa6c(0x21d)+_0x46690e;}}else _0x36f586[_0x36aa6c(0x302)]='manual',_0x36f586[_0x36aa6c(0x320)]=_0x36aa6c(0x21d)+_0x46690e;return _0x36f586;}function getBotsWithMode(){const _0x20e201=_0x32bb9d,_0x3af624=dbConfig['get'](_0x20e201(0x2d5))[_0x20e201(0x24b)](_0x20e201(0x370))[_0x20e201(0x20f)]()||[];return _0x3af624[_0x20e201(0x362)](_0x4242bd=>{const _0x1cbe50=_0x20e201;let _0x5951e5=getBotAttributes(_0x4242bd[_0x1cbe50(0x370)]);_0x4242bd[_0x1cbe50(0x302)]=_0x5951e5[_0x1cbe50(0x302)];}),_0x3af624;}function getBotExchanges(){const _0x5bb99a=_0x32bb9d;let _0x5e99c2=[];const _0x3d507a=dbConfig[_0x5bb99a(0x2b7)]('bots')[_0x5bb99a(0x24b)](_0x5bb99a(0x370))['value']()||[];_0x3d507a[_0x5bb99a(0x362)](_0x43399f=>{const _0x4bfbfa=_0x5bb99a;if(_0x43399f['status']=='enabled'){const _0x35825d=configpath+'bot-'+_0x43399f[_0x4bfbfa(0x370)]+_0x4bfbfa(0x1ef),_0xee9812=fs[_0x4bfbfa(0x2a7)](_0x35825d);let _0x36be4d;if(_0xee9812){const _0x47fc4f=fs[_0x4bfbfa(0x37f)](_0x35825d);try{const _0x25ca71=JSON['parse'](_0x47fc4f);_0x36be4d=_0x25ca71?_0x25ca71[_0x4bfbfa(0x38c)][0x0][_0x4bfbfa(0x3bb)]:null;}catch(_0x5440a6){}}if(_0x36be4d)_0x5e99c2['push'](_0x36be4d);}});const _0x1ac44e=[...new Set(_0x5e99c2)][_0x5bb99a(0x260)]();return _0x1ac44e;}async function initUser(){const _0x332d15=_0x32bb9d;if(!settings[_0x332d15(0x2e7)]){const _0x57f201=uuidRandom();mixpanel['alias'](_0x57f201),updateSetting('userid',_0x57f201);}}async function initSecure(){const _0x3c58f7=_0x32bb9d;let _0x563994=getSecure();if(!_0x563994[_0x3c58f7(0x33c)](_0x3c58f7(0x2c9))){let _0x263b77=await generateKeys();_0x563994[_0x3c58f7(0x2dc)]=_0x263b77[_0x3c58f7(0x2dc)],_0x563994['privateKey']=_0x263b77[_0x3c58f7(0x31c)],_0x563994[_0x3c58f7(0x2c9)]=crypto[_0x3c58f7(0x2de)](0x20)[_0x3c58f7(0x28a)](_0x3c58f7(0x250));;storeSecure(_0x563994);}}function getSettings(){const _0x107659=_0x32bb9d;return dbSettings[_0x107659(0x2b7)]('settings')['value']()||{};}function getSecure(){const _0x5d2ccb=_0x32bb9d;return dbSecure['get'](_0x5d2ccb(0x28e))[_0x5d2ccb(0x20f)]()||{};}function getBlacklist(){const _0x58c63e=_0x32bb9d;return dbSecure['get'](_0x58c63e(0x26d))[_0x58c63e(0x20f)]()||[];}function broadcastToBots(_0x29ff09,_0xa1d26b){const _0xf6c4e7=_0x32bb9d;config[_0xf6c4e7(0x362)](_0xd7b560=>{const _0x4b2d05=_0xf6c4e7;if(_0xd7b560['status']==_0x4b2d05(0x265)&&_0xd7b560[_0x4b2d05(0x2b4)]==_0x4b2d05(0x2aa)||_0xd7b560[_0x4b2d05(0x3a4)]==_0x4b2d05(0x294)&&_0xd7b560[_0x4b2d05(0x2b4)]=='running'){if(pid[_0xd7b560[_0x4b2d05(0x370)]])pid[_0xd7b560[_0x4b2d05(0x370)]]['send']({[_0x29ff09]:_0xa1d26b});}});}function storeSettings(_0x5ecb48,_0x165da0=![]){const _0xd4533d=_0x32bb9d;_0x5ecb48={...settings,..._0x5ecb48};if(_0x165da0&&_0x5ecb48[_0xd4533d(0x27e)]!=_0xd4533d(0x255)&&_0x5ecb48['bbPassword']!=_0xd4533d(0x1ed)&&_0x5ecb48[_0xd4533d(0x27e)]!=''){const _0x58bca0=crypt[_0xd4533d(0x2b8)](secure['privateKey'],_0x5ecb48['bbPassword'])[_0xd4533d(0x23f)][_0xd4533d(0x30c)]('@')[0x0],_0x1de1de=bcrypt[_0xd4533d(0x299)](_0x58bca0,saltRounds);_0x5ecb48={..._0x5ecb48,'bbPassword':_0x1de1de};}if(_0x165da0&&_0x5ecb48['telegramToken']!=_0xd4533d(0x255)&&_0x5ecb48[_0xd4533d(0x340)]!=_0xd4533d(0x1ed)&&_0x5ecb48['telegramToken']!=''){const _0x324f17=crypt[_0xd4533d(0x2b8)](secure['privateKey'],_0x5ecb48['telegramToken'])['message']['split']('@')[0x0];_0x5ecb48={..._0x5ecb48,'telegramToken':_0x324f17};}const _0x10b6a9=_0x5ecb48[_0xd4533d(0x340)]!=_0xd4533d(0x255)&&_0x5ecb48[_0xd4533d(0x340)]!=settings[_0xd4533d(0x340)]||_0x5ecb48[_0xd4533d(0x315)]!=settings['telegramUsername'],_0x5a3db9=_0x5ecb48[_0xd4533d(0x340)]==''||_0x5ecb48[_0xd4533d(0x315)]=='';if(_0x10b6a9)_0x5ecb48[_0xd4533d(0x305)]=_0xd4533d(0x201);for(const [_0x4cf65f,_0x2a42a4]of Object[_0xd4533d(0x2d7)](_0x5ecb48)){if(_0x4cf65f==_0xd4533d(0x340)&&_0x2a42a4==_0xd4533d(0x255)){_0x5ecb48[_0xd4533d(0x340)]=settings[_0xd4533d(0x340)];continue;};if(_0x4cf65f==_0xd4533d(0x27e)&&_0x2a42a4==_0xd4533d(0x255)){_0x5ecb48[_0xd4533d(0x27e)]=settings[_0xd4533d(0x27e)];continue;};dbSettings[_0xd4533d(0x209)](_0xd4533d(0x35e)+_0x4cf65f,_0x2a42a4)[_0xd4533d(0x2a1)]();}settings=_0x5ecb48,io['to']('botmanager')[_0xd4533d(0x389)]('settings',cleanSettings()),broadcastToBots(_0xd4533d(0x2b9),settings[_0xd4533d(0x2b9)]),broadcastToBots(_0xd4533d(0x32c),settings['onepagemode']);if(_0x10b6a9&&!_0x5a3db9)initTelegram();if(_0x10b6a9&&_0x5a3db9)disableTelegram();getAllClients()[_0xd4533d(0x362)](_0x3d6620=>{const _0x31f153=_0xd4533d;getSocket(_0x3d6620['id'])[_0x31f153(0x389)](_0x31f153(0x3a4),{'access':{'allow':![],'reason':_0x31f153(0x3d0),'token':null}});});}function updateSetting(_0x5c0144,_0x4e4f8d){const _0x557fa4=_0x32bb9d;dbSettings[_0x557fa4(0x209)](_0x557fa4(0x35e)+_0x5c0144,_0x4e4f8d)[_0x557fa4(0x2a1)](),settings=getSettings(),io['to'](_0x557fa4(0x30b))[_0x557fa4(0x389)](_0x557fa4(0x33e),cleanSettings());}function storeSecure(_0x5e6ff0){const _0x1e71d3=_0x32bb9d;dbSecure[_0x1e71d3(0x2b7)](_0x1e71d3(0x28e))['push'](_0x5e6ff0)[_0x1e71d3(0x2a1)](),secure=_0x5e6ff0;}function addBlacklist(_0x3350b9){const _0xfa35b6=_0x32bb9d;cleanBlacklist();let _0x5548fd;devices[_0x3350b9]['telegramIpApproval']?_0x5548fd=Math[_0xfa35b6(0x2e6)](devices[_0x3350b9][_0xfa35b6(0x2cc)]['expiry'],loginExpiry):_0x5548fd=loginExpiry,dbSecure[_0xfa35b6(0x2b7)](_0xfa35b6(0x26d))['push']({'expiry':new Date()['getTime']()+_0x5548fd*0x3c*0x3e8,'token':devices[_0x3350b9][_0xfa35b6(0x316)][_0xfa35b6(0x39e)]})[_0xfa35b6(0x2a1)](),blacklist=dbSecure[_0xfa35b6(0x2b7)](_0xfa35b6(0x26d))['value']();}function cleanBlacklist(){const _0x1fbffc=_0x32bb9d;let _0x3c90d6=dbSecure[_0x1fbffc(0x2b7)](_0x1fbffc(0x26d))[_0x1fbffc(0x378)]()['value'](),_0x5ac3b9=new Date()['getTime']();_0x3c90d6['forEach'](_0xbe9c84=>{const _0x396a19=_0x1fbffc;_0xbe9c84['expiry']<_0x5ac3b9&&dbSecure[_0x396a19(0x2b7)](_0x396a19(0x26d))[_0x396a19(0x295)]({'expiry':_0xbe9c84[_0x396a19(0x1fd)]})[_0x396a19(0x2a1)]();});}function initStates(){const _0x536328=_0x32bb9d;let _0x49335b=getConfiguration();_0x49335b[_0x536328(0x362)](_0x29a20a=>{const _0x5154be=_0x536328;_0x29a20a[_0x5154be(0x2b4)]=_0x5154be(0x38d);}),storeConfiguration(_0x49335b);}function onKeys(){const _0x13cc81=new RSA();return new Promise(_0x2672dd=>{const _0x5f28bb=_0x1ab7;_0x13cc81[_0x5f28bb(0x363)]()[_0x5f28bb(0x395)](_0xcbfe0b=>{_0x2672dd(_0xcbfe0b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x11944f=_0x32bb9d;let _0x30f6e7=getSettings(),_0x3e1259=![];!_0x30f6e7[_0x11944f(0x33c)]('lastmsgtelegram')&&(_0x30f6e7[_0x11944f(0x31f)]=0x0,_0x3e1259=!![]);!_0x30f6e7['hasOwnProperty'](_0x11944f(0x211))&&(_0x30f6e7[_0x11944f(0x211)]=0x0,_0x3e1259=!![]);!_0x30f6e7['hasOwnProperty'](_0x11944f(0x311))&&(_0x30f6e7['latestversion']='0.0.0',_0x3e1259=!![]);!_0x30f6e7[_0x11944f(0x33c)](_0x11944f(0x32c))&&(_0x30f6e7['onepagemode']=![],_0x3e1259=!![]);if(_0x3e1259)storeSettings(_0x30f6e7);try{fs[_0x11944f(0x30d)](configbackuppath,{'withFileTypes':!![]})[_0x11944f(0x362)](_0x5f2ab2=>{const _0x12a37a=_0x11944f;if(!_0x5f2ab2[_0x12a37a(0x2e4)]()){if(!_0x5f2ab2[_0x12a37a(0x300)][_0x12a37a(0x3b6)](_0x12a37a(0x344)))fs[_0x12a37a(0x3d1)](configbackuppath+_0x5f2ab2[_0x12a37a(0x300)]);}else fs[_0x12a37a(0x3bc)](configbackuppath+_0x5f2ab2['name'],{'recursive':!![]});});}catch(_0x8c0deb){logger[_0x11944f(0x357)]('Error\x20removing\x20old\x20backup\x20files:',_0x8c0deb);}}function storeConfiguration(_0x1aedb4){const _0x5eb2a8=_0x32bb9d;dbConfig[_0x5eb2a8(0x2b7)](_0x5eb2a8(0x2d5))[_0x5eb2a8(0x295)]()[_0x5eb2a8(0x2a1)](),_0x1aedb4['forEach'](_0x4e7232=>{const _0x2255c6=_0x5eb2a8;delete _0x4e7232[_0x2255c6(0x302)];}),dbConfig[_0x5eb2a8(0x2b7)](_0x5eb2a8(0x2d5))[_0x5eb2a8(0x2ac)](..._0x1aedb4)[_0x5eb2a8(0x2a1)](),config=_0x1aedb4;}function resetPassword(){const _0x2f6668=_0x32bb9d;tgBot&&settings['telegramChatId']&&(tgBot[_0x2f6668(0x2d0)](_0x2f6668(0x249)),tgBot[_0x2f6668(0x325)](settings[_0x2f6668(0x345)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2f6668(0x35a),'reply_markup':{'inline_keyboard':[[{'text':_0x2f6668(0x327),'callback_data':_0x2f6668(0x327)},{'text':'no','callback_data':'no'}]]}})[_0x2f6668(0x226)](_0x3b0688=>{telegramError(_0x3b0688);}),tgBot['on'](_0x2f6668(0x249),async _0x212372=>{const _0x23b86e=_0x2f6668,_0x211fc3=_0x212372[_0x23b86e(0x1f9)],_0x14a86f=_0x212372[_0x23b86e(0x23f)];tgBot[_0x23b86e(0x23c)](_0x212372['id'])['then'](async()=>{const _0x22419b=_0x23b86e;if(_0x211fc3!='no'){const _0x492f17=0xf,_0x4e8596='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x10cd28=Array[_0x22419b(0x38a)](crypto[_0x22419b(0x34b)](new Uint32Array(_0x492f17)))['map'](_0x282a7c=>_0x4e8596[_0x282a7c%_0x4e8596[_0x22419b(0x3b0)]])['join'](''),_0x51357b=bcrypt[_0x22419b(0x299)](_0x10cd28,saltRounds);storeSettings({'bbPassword':_0x51357b}),await tgBot[_0x22419b(0x325)](_0x14a86f[_0x22419b(0x25e)]['id'],_0x22419b(0x321)+_0x10cd28,{'parse_mode':_0x22419b(0x35a)})[_0x22419b(0x226)](_0x103fab=>{telegramError(_0x103fab);});}else await tgBot[_0x22419b(0x325)](_0x14a86f[_0x22419b(0x25e)]['id'],'Password\x20reset\x20rejected')['catch'](_0xf6c10e=>{telegramError(_0xf6c10e);});}),tgBot['removeListener'](_0x23b86e(0x249));}));}async function confirmRestore(_0x7d8297,_0x129751){const _0x395789=_0x32bb9d;io['to'](_0x395789(0x30b))[_0x395789(0x389)](_0x395789(0x314),_0x395789(0x274),_0x395789(0x310)),tgBot&&settings[_0x395789(0x345)]&&(tgBot[_0x395789(0x2d0)](_0x395789(0x249)),await tgBot[_0x395789(0x325)](settings[_0x395789(0x345)],_0x395789(0x32f),{'parse_mode':_0x395789(0x35a),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x395789(0x226)](_0x3e8067=>{telegramError(_0x3e8067);}),tgBot['on'](_0x395789(0x249),async _0x40ddc2=>{const _0x5e1059=_0x395789,_0x594384=_0x40ddc2['data'],_0x1ba7b1=_0x40ddc2[_0x5e1059(0x23f)];tgBot[_0x5e1059(0x23c)](_0x40ddc2['id'])['then'](async()=>{const _0x239155=_0x5e1059;_0x594384==_0x239155(0x327)?(await tgBot[_0x239155(0x325)](_0x1ba7b1[_0x239155(0x25e)]['id'],_0x239155(0x2cf),{'parse_mode':'HTML'})[_0x239155(0x226)](_0x51927c=>{telegramError(_0x51927c);}),unzipFile(_0x7d8297,_0x129751)):(logger[_0x239155(0x357)](_0x239155(0x3a2)),await tgBot['sendMessage'](_0x1ba7b1['chat']['id'],_0x239155(0x3a2))[_0x239155(0x226)](_0x43bdaa=>{telegramError(_0x43bdaa);}));}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x4d9e59=_0x32bb9d,_0xcbffa5=new Date();return _0xcbffa5['getFullYear']()+'/'+(_0xcbffa5[_0x4d9e59(0x2fa)]()+0x1)[_0x4d9e59(0x28a)]()[_0x4d9e59(0x1f8)](0x2,'0')+'/'+_0xcbffa5[_0x4d9e59(0x374)]()[_0x4d9e59(0x28a)]()[_0x4d9e59(0x1f8)](0x2,'0')+'\x20'+_0xcbffa5[_0x4d9e59(0x2e0)]()[_0x4d9e59(0x28a)]()['padStart'](0x2,'0')+':'+_0xcbffa5[_0x4d9e59(0x236)]()[_0x4d9e59(0x28a)]()['padStart'](0x2,'0')+':'+_0xcbffa5['getSeconds']()[_0x4d9e59(0x28a)]()[_0x4d9e59(0x1f8)](0x2,'0');}function getTimeStamp(){const _0x31d233=_0x32bb9d,_0x350557=shiftedTime();return _0x350557['getFullYear']()+'/'+(_0x350557[_0x31d233(0x2fa)]()+0x1)['toString']()[_0x31d233(0x1f8)](0x2,'0')+'/'+_0x350557['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x350557[_0x31d233(0x2e0)]()[_0x31d233(0x28a)]()[_0x31d233(0x1f8)](0x2,'0')+':'+_0x350557[_0x31d233(0x236)]()[_0x31d233(0x28a)]()[_0x31d233(0x1f8)](0x2,'0')+':'+_0x350557[_0x31d233(0x376)]()['toString']()[_0x31d233(0x1f8)](0x2,'0');}function getCleanTimeStamp(){const _0x8a2b86=_0x32bb9d,_0x2ef391=shiftedTime();return _0x2ef391[_0x8a2b86(0x293)]()+(_0x2ef391[_0x8a2b86(0x2fa)]()+0x1)[_0x8a2b86(0x28a)]()[_0x8a2b86(0x1f8)](0x2,'0')+_0x2ef391['getDate']()[_0x8a2b86(0x28a)]()[_0x8a2b86(0x1f8)](0x2,'0')+'-'+_0x2ef391[_0x8a2b86(0x2e0)]()[_0x8a2b86(0x28a)]()[_0x8a2b86(0x1f8)](0x2,'0')+_0x2ef391[_0x8a2b86(0x236)]()['toString']()['padStart'](0x2,'0')+_0x2ef391[_0x8a2b86(0x376)]()[_0x8a2b86(0x28a)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x5d2891=_0x32bb9d,_0x1afac3=new Date();let _0x525ccf=_0x1afac3;if(settings['timeshift']&&settings[_0x5d2891(0x2b9)]!==0x0)_0x525ccf=fns[_0x5d2891(0x2e3)](_0x1afac3,{'hours':settings[_0x5d2891(0x2b9)]});return _0x525ccf;}function startScheduler(){const _0x20e2e8=_0x32bb9d,_0x809005=new Date()['getUTCHours'](),_0x3dea2f=shiftedTime()[_0x20e2e8(0x2e0)]();_0x3dea2f==0x4&&backupConfigFiles();_0x3dea2f==0x0&&rotateLogFiles();_0x809005%0x6==0x0&&triggerAnalytics();_0x809005%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x4324ef){const _0x2be62d=_0x32bb9d;logger[_0x2be62d(0x357)](_0x2be62d(0x38e)+_0x4324ef);const _0x2a7e7c=getBotsWithMode();_0x2a7e7c[_0x2be62d(0x3b0)]>0x0?confirmRestore(configbackuppath,_0x4324ef):unzipFile(configbackuppath,_0x4324ef);}async function getBackupFiles(_0x3bdefe=null){const _0x40ed15=_0x32bb9d;let _0x53d4a8=[],_0x2930b1=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2930b1[_0x40ed15(0x260)]((_0x409f5c,_0x3d09f0)=>_0x409f5c[_0x40ed15(0x300)]<_0x3d09f0[_0x40ed15(0x300)]?0x1:_0x3d09f0[_0x40ed15(0x300)]<_0x409f5c[_0x40ed15(0x300)]?-0x1:0x0),_0x2930b1[_0x40ed15(0x362)](_0x16daae=>{const _0x5b9929=_0x40ed15;if(!_0x16daae[_0x5b9929(0x2e4)]()&&_0x16daae['name']['startsWith'](_0x5b9929(0x344))&&_0x16daae[_0x5b9929(0x300)][_0x5b9929(0x2ed)](_0x5b9929(0x287))){const _0x281678=formatDate(fs[_0x5b9929(0x331)](configbackuppath+_0x16daae[_0x5b9929(0x300)])['mtime']);_0x53d4a8['push']({'name':_0x16daae[_0x5b9929(0x300)],'mtime':_0x281678});}});if(_0x3bdefe)io['to'](_0x3bdefe)[_0x40ed15(0x389)](_0x40ed15(0x2ec),_0x53d4a8);else return _0x53d4a8;}async function backupConfigFiles(){const _0xf0551b=_0x32bb9d;await zipFiles(_0xf0551b(0x312));const _0x252e5b=getCleanTimeStamp();fs['copyFileSync'](zippath+_0xf0551b(0x281),configbackuppath+('backup-full@'+_0x252e5b+_0xf0551b(0x287)));let _0x48789d=fs[_0xf0551b(0x30d)](configbackuppath,{'withFileTypes':!![]});_0x48789d['sort']((_0x2dc725,_0x4193aa)=>_0x2dc725['name']<_0x4193aa[_0xf0551b(0x300)]?0x1:_0x4193aa[_0xf0551b(0x300)]<_0x2dc725[_0xf0551b(0x300)]?-0x1:0x0),_0x48789d[_0xf0551b(0x3b0)]>maxBackups&&fs[_0xf0551b(0x3d1)](configbackuppath+_0x48789d[_0x48789d['length']-0x1][_0xf0551b(0x300)]);}function rotateLogFiles(){const _0x3bacf0=_0x32bb9d,_0xdc84fb=fs[_0x3bacf0(0x331)](logspath+_0x3bacf0(0x273)),_0x2e8e46=_0xdc84fb[_0x3bacf0(0x22a)]/0x400;if(_0x2e8e46>0x64){let _0x38010f=fs[_0x3bacf0(0x30d)](logspath,{'withFileTypes':!![]});_0x38010f[_0x3bacf0(0x260)]((_0x36a8ea,_0x204f9a)=>_0x36a8ea[_0x3bacf0(0x300)]<_0x204f9a[_0x3bacf0(0x300)]?0x1:_0x204f9a[_0x3bacf0(0x300)]<_0x36a8ea[_0x3bacf0(0x300)]?-0x1:0x0),_0x38010f[_0x3bacf0(0x362)](_0x1eb7c2=>{const _0x44b71f=_0x3bacf0;if(_0x1eb7c2[_0x44b71f(0x300)]==_0x44b71f(0x2fc))fs[_0x44b71f(0x3cd)](logspath+_0x1eb7c2[_0x44b71f(0x300)],logspath+_0x44b71f(0x1ff));if(_0x1eb7c2[_0x44b71f(0x300)]==_0x44b71f(0x2f8))fs[_0x44b71f(0x3cd)](logspath+_0x1eb7c2[_0x44b71f(0x300)],logspath+'output-002.log');_0x1eb7c2[_0x44b71f(0x300)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x1eb7c2['name'],logspath+_0x44b71f(0x2f8)),fs['writeFileSync'](logspath+_0x1eb7c2[_0x44b71f(0x300)],''));});}}async function zipFiles(_0x4db980){const _0x532812=_0x32bb9d;let _0x5b3782;if(_0x4db980=='logs')_0x5b3782=logspath;if(_0x4db980=='backup')_0x5b3782=configpath;if(_0x4db980==_0x532812(0x312))_0x5b3782=configpath;let _0x299a50=fs[_0x532812(0x30d)](_0x5b3782,{'withFileTypes':!![]});const _0x5f06b8=new require(_0x532812(0x34a))();_0x299a50[_0x532812(0x362)](_0x73d6a5=>{const _0x5ef84c=_0x532812;if(!_0x73d6a5['isDirectory']()){let _0x1c8c2e=fs[_0x5ef84c(0x37f)](_0x5b3782+_0x73d6a5[_0x5ef84c(0x300)]);if(_0x4db980==_0x5ef84c(0x39c)){const _0x3594c6=/^bot-[0-9]{3}-config.json$/,_0x12fe63=_0x3594c6[_0x5ef84c(0x237)](_0x73d6a5['name']);if(_0x12fe63){const _0x15694c=JSON[_0x5ef84c(0x289)](_0x1c8c2e);if(_0x15694c['bot'][0x0]){_0x15694c[_0x5ef84c(0x38c)][0x0][_0x5ef84c(0x317)]=_0x5ef84c(0x1ed),_0x15694c[_0x5ef84c(0x38c)][0x0][_0x5ef84c(0x2be)]=_0x5ef84c(0x1ed);if(_0x15694c[_0x5ef84c(0x38c)][0x0][_0x5ef84c(0x227)])_0x15694c[_0x5ef84c(0x38c)][0x0][_0x5ef84c(0x227)]='***';}_0x1c8c2e=JSON['stringify'](_0x15694c,null,0x2);}if(_0x73d6a5['name']==_0x5ef84c(0x215)){const _0x11feb6=JSON[_0x5ef84c(0x289)](_0x1c8c2e);if(_0x11feb6[_0x5ef84c(0x33e)][_0x5ef84c(0x2c4)])_0x11feb6['settings'][_0x5ef84c(0x2c4)]=![];if(_0x11feb6[_0x5ef84c(0x33e)][_0x5ef84c(0x27e)])_0x11feb6[_0x5ef84c(0x33e)][_0x5ef84c(0x27e)]=_0x5ef84c(0x1ed);if(_0x11feb6[_0x5ef84c(0x33e)]['telegramToken'])_0x11feb6['settings'][_0x5ef84c(0x340)]=_0x5ef84c(0x1ed);if(_0x11feb6['settings']['telegramChatId'])_0x11feb6[_0x5ef84c(0x33e)]['telegramChatId']=null;_0x1c8c2e=JSON[_0x5ef84c(0x2e9)](_0x11feb6,null,0x2);}if(_0x73d6a5[_0x5ef84c(0x300)]!='bb-secure.json')_0x5f06b8[_0x5ef84c(0x22b)](_0x73d6a5['name'],_0x1c8c2e);}else _0x5f06b8[_0x5ef84c(0x22b)](_0x73d6a5[_0x5ef84c(0x300)],_0x1c8c2e);}});const _0x13ae41=_0x5f06b8[_0x532812(0x1fa)]({'base64':![],'compression':'DEFLATE'});fs[_0x532812(0x352)](zippath+(_0x4db980+_0x532812(0x287)),_0x13ae41,'binary');}async function unzipFile(_0x78a470,_0x50bdbf){const _0x3e6540=_0x32bb9d;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3e6540(0x362)](_0x2c2eb5=>{const _0x13f34c=_0x3e6540;if(!_0x2c2eb5[_0x13f34c(0x2e4)]())fs[_0x13f34c(0x3bc)](configpath+_0x2c2eb5[_0x13f34c(0x300)]);});const _0x32e0c2=fs[_0x3e6540(0x37f)](_0x78a470+_0x50bdbf,_0x3e6540(0x2cd)),_0x1b34ea=new require(_0x3e6540(0x34a))(_0x32e0c2,{'base64':![],'checkCRC32':!![]});Object[_0x3e6540(0x31d)](_0x1b34ea[_0x3e6540(0x3b9)])[_0x3e6540(0x362)](_0x425961=>{const _0xac0dab=_0x3e6540,_0x1387cb=_0x1b34ea['files'][_0x425961];fs[_0xac0dab(0x352)](configpath+_0x1387cb['name'],_0x1387cb[_0xac0dab(0x291)]);}),fs[_0x3e6540(0x30d)](temppath,{'withFileTypes':!![]})['forEach'](_0x5b0324=>{const _0x1ec9b9=_0x3e6540;if(!_0x5b0324[_0x1ec9b9(0x2e4)]())fs['rmSync'](temppath+_0x5b0324[_0x1ec9b9(0x300)]);}),logger[_0x3e6540(0x357)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x3e6540(0x298)]({'restore':!![]},_0x487be9=>{});}async function getPublicIp(){const _0x46437d=_0x32bb9d;try{const _0x37d4f7=await axios[_0x46437d(0x2b7)]('https://api.ipify.org?format=json');publicip=_0x37d4f7[_0x46437d(0x1f9)]['ip'];}catch(_0x1780c3){}}async function triggerAnalytics(){const _0x2a66f6=_0x32bb9d;if(!publicip)await getPublicIp();const _0x436cfe=getBotsWithMode();let _0x4fafff=0x0;_0x436cfe[_0x2a66f6(0x362)](_0x34da85=>{const _0x1fde27=_0x2a66f6;if(_0x34da85[_0x1fde27(0x3a4)]===_0x1fde27(0x265))_0x4fafff++;});const _0x17e8b5=getBotExchanges();mixpanel['track'](_0x2a66f6(0x37d),{'distinct_id':settings[_0x2a66f6(0x2e7)],'ip':publicip,'version':serverversion,'numbots':_0x436cfe[_0x2a66f6(0x3b0)],'numbotsenabled':_0x4fafff,'exchanges':_0x17e8b5});}async function getMessages(){const _0x4c0e55=_0x32bb9d,_0x43993c=_0x4c0e55(0x2b6),_0x3e754e=new GraphQLClient(_0x43993c),_0x38af81={'authorization':_0x4c0e55(0x20c)},_0x2cd296=serverversion[_0x4c0e55(0x30c)]('.'),_0x777f8f=_0x2cd296[0x0]+'.'+_0x2cd296[0x1],_0x39c6a3=Math['min'](settings[_0x4c0e55(0x31f)],settings[_0x4c0e55(0x211)]),_0x37104f={'last':parseInt(_0x39c6a3),'bbm':_0x777f8f},_0x3f773d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5555c0;try{_0x5555c0=await _0x3e754e[_0x4c0e55(0x381)](_0x3f773d,_0x37104f,_0x38af81);}catch(_0x3b6e70){}if(_0x5555c0&&_0x5555c0[_0x4c0e55(0x30e)]){let _0x579c00=settings[_0x4c0e55(0x31f)];newMessages=[];for(const _0x4b74dc of _0x5555c0[_0x4c0e55(0x30e)]){newMessages[_0x4c0e55(0x2ac)](_0x4b74dc);if(_0x4b74dc['bbvNew'])updateSetting('latestversion',_0x4b74dc[_0x4c0e55(0x257)]);let _0x3e5f63=_0x4b74dc['bbvNew']?serverversion>=_0x4b74dc[_0x4c0e55(0x257)]:![];if(!_0x3e5f63&&_0x4b74dc[_0x4c0e55(0x38b)]>_0x579c00){if(_0x4b74dc[_0x4c0e55(0x34f)]===_0x4c0e55(0x26e)||serverversion[_0x4c0e55(0x3b6)](_0x4b74dc[_0x4c0e55(0x34f)])){let _0x401b9b=''+_0x4b74dc['title']+'\x0a\x0a'+_0x4b74dc['message'];const _0x66c70b=await sendTelegramMsg(toTelegramMarkdown(_0x401b9b),_0x4c0e55(0x2e1));if(_0x66c70b)_0x579c00=_0x4b74dc[_0x4c0e55(0x38b)];}}}updateAvailable=isNewerVersion(settings[_0x4c0e55(0x311)],serverversion),updateSetting(_0x4c0e55(0x31f),_0x579c00),emitMessages();}}function emitMessages(){const _0x12c0b4=_0x32bb9d,_0x5f08a5=settings[_0x12c0b4(0x211)];let _0xe03ea7=[];newMessages[_0x12c0b4(0x362)](_0x37c50f=>{const _0x92f887=_0x12c0b4;_0x37c50f['number']>_0x5f08a5&&_0xe03ea7[_0x92f887(0x2ac)](_0x37c50f);}),_0xe03ea7[_0x12c0b4(0x3b0)]>0x0&&getAllClients()[_0x12c0b4(0x362)](_0x222f95=>{const _0x10a8ad=_0x12c0b4;getSocket(_0x222f95['id'])['emit'](_0x10a8ad(0x23f),_0xe03ea7);});}function confirmMessage(_0x51661b){const _0xa1fb2=_0x32bb9d;updateSetting(_0xa1fb2(0x211),Number(_0x51661b));}function isNewerVersion(_0x338f46,_0x55b511){const _0x4987bd=_0x32bb9d,_0x5d8389=_0x55b511[_0x4987bd(0x30c)]('.'),_0x3f335a=_0x338f46[_0x4987bd(0x30c)]('.');for(var _0x4a2cb3=0x0;_0x4a2cb3<_0x3f335a[_0x4987bd(0x3b0)];_0x4a2cb3++){const _0x4a9594=~~_0x3f335a[_0x4a2cb3],_0xf4a705=~~_0x5d8389[_0x4a2cb3];if(_0x4a9594>_0xf4a705)return!![];if(_0x4a9594<_0xf4a705)return![];}return![];}function toTelegramMarkdown(_0x467027){const _0x362ee5=_0x32bb9d,_0x32a44b=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xcbda7c=/\*{2}(.+?)\*{2}/gim;return _0x467027=_0x467027[_0x362ee5(0x3d4)](_0x32a44b,_0x362ee5(0x207))[_0x362ee5(0x3d4)](_0xcbda7c,_0x362ee5(0x2eb)),_0x467027;}async function validateConfigFile(){const _0x4925d3=_0x32bb9d,_0x375cd1=dbConfig['get'](_0x4925d3(0x2d5))[_0x4925d3(0x24b)](_0x4925d3(0x370))['value']()||[];if(_0x375cd1['length']==0x0){let _0x5388e9=0x0,_0x442303=[];const _0x11da0c=/^bot-([0-9]{3})-config.json$/,_0x1d3559=fs[_0x4925d3(0x30d)](configpath);_0x1d3559[_0x4925d3(0x362)](_0x57d2bb=>{const _0x4fc709=_0x4925d3,_0x56e52f=_0x11da0c['exec'](_0x57d2bb);if(_0x56e52f){const _0x1aca9a=_0x56e52f[0x1];let _0xb7d7a2=getBotAttributes(_0x1aca9a);_0x442303[_0x4fc709(0x2ac)]({'botID':_0x1aca9a,'botname':_0xb7d7a2['botname'],'status':'disabled','live':'stopped'}),_0x5388e9++;}}),_0x5388e9!=0x0&&(dbConfig['get'](_0x4925d3(0x2d5))[_0x4925d3(0x304)](_0x442303)[_0x4925d3(0x2a1)](),config=_0x442303,restoredConfigFile=_0x5388e9);}}function _0x5ec1(){const _0x1f3817=['value',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','lastmsgemitted','ipc','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20','bb-settings.json','telegramEnabled','Starting\x20Balance\x20Bot\x20','use','Access\x20enabled\x20for\x20','2FA\x20login\x20rejected','backup/','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20','getTime','show-config','stopPolling','</b>\x20?','Orders','yargs/yargs','Bot\x20Mgr\x20>\x20','auth','catch','apiPassword','ipv6','confirm-message','size','file','Unauthorized\x20attempt\x20to\x20get\x20events','-results.json','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','cancel-loading','connection','/on\x20-\x20start\x20bot(s)\x0a','Starting\x20new\x20bot\x20|\x20Bot\x20','temporaryAccessAllowed','disabled','inherit','getMinutes','test','All\x20bots','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','30\x20min','answerCallbackQuery','compareSync','search','message','/output-000.log','ipaddr.js','Notifications\x20disabled\x0a','NTBA_FIX_319','match','init','Invalid\x20username\x20or\x20IP\x20address','family','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','callback_query','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','sortBy','log','Notifications\x20enabled','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','No\x20authentication\x20token','hex','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','new-disabled','663477VrCBRI','get-messages','************','password','bbvNew','createWriteStream','error','constructor','type','pidRefreshToken','toIPv4MappedAddress','chat','clients','sort','event','RSA-OAEP','3772176MmibRc','/restart\x20-\x20restart\x20bot(s)\x0a','enabled','/:bot/portfolio','auto','404\x20Not\x20Found','Unauthorized\x20attempt\x20to\x20update\x20bot','/status\x20-\x20show\x20bot(s)\x20status\x0a','temporary\x20access\x20not\x20allowed','delete-alerts','blacklist','any','temporary\x20token\x20generated','\x1b[33m','socket.io','Network\x20Interfaces:','output-000.log','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','::1','Disabled\x20Bot\x20','\x20(1)','9445257CMzTaB','15\x20min','Error:\x20Invalid\x20argument\x20','sockets','/:bot/performance','\x1b[36m','bbPassword','allow','2287084FCYoVi','backup-full.zip','polling_error','mkdirSync','isIPv4MappedAddress','started','\x1b[34m','.zip','express','parse','toString','Logged\x20out\x20user\x20...','delete-bot','storeHeadless','secure',',\x20must\x20be\x20a\x204\x20digit\x20number','reinstall','_data','telegrammsg','getFullYear','new','remove','#RES#\x20if\x20running\x20on\x20server','\x20mode','send','hashSync','string','\x20only\x0a','sendFile','sha256','login\x20token\x20valid','temp/','server','write','store','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','handshake','login','jsonwebtoken','existsSync','All\x20bots\x20running\x20right\x20now','\x20|\x20user:\x20...','running','telegram2FaApproval','push','api-eu.mixpanel.com','/enable\x20-\x20enable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20download\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','initclient','2FA\x20login\x20required','No\x20bots\x20running\x20right\x20now','live','defaults','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','get','decrypt','timeshift','order','get-starting-balances','orders','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','apiSecret','download','updatebotmanager','192865bYINgR','/metrics\x20-\x20show\x20bot\x20performance\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','loginRequired','/:bot/history','\x1b[35m','toIPv4Address','SIGINT','secret','/help\x20-\x20show\x20available\x20commands\x0a','user','telegramIpApproval','binary','address','Restoring\x20bot(s)\x20from\x20backup','removeListener','sendPortfolioTelegram','format','store-fiat','filter','bots','logged\x20out','entries','Unauthorized\x20attempt\x20to\x20log\x20out','uncaughtException','User\x20has\x20been\x20validated','versions','publicKey','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','randomBytes','invalid\x20credentials','getHours','Markdown','pidExpireLogin','add','isDirectory','sign','max','userid','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','stringify','Error\x20while\x20deleting\x20config\x20files:\x20','*$1*','backup-files','endsWith','config/','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Invalid\x20authentication\x20token\x20(2)','temporary\x20access\x20rejected','update','apply','\x20minutes','Unauthorized\x20attempt\x20to\x20add\x20bot','storeFiat','bbUsername','output-001.log','showname','getMonth','Your\x20installation\x20is\x20already\x20up\x20to\x20date','output-002.log','listen','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','whitelist','name','\x20to\x20','mode','fork','assign','telegramEvents','uuid','uuid-random','zip/','Node.js\x20v','Setting\x20access:\x20','botmanager','split','readdirSync','messages','3000','success','latestversion','backup-full','showConfig','notification','telegramUsername','access','apiKey','/off\x20-\x20stop\x20bot(s)\x0a','build2','Unauthorized\x20attempt\x20to\x20get\x20messages','kind','privateKey','keys','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','lastmsgtelegram','botname','Password\x20has\x20been\x20reset\x20to:\x20','/download/:type','telegram','logs/','sendMessage','-performance.json','yes','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Idling\x20bot\x20\x20\x20|\x20Bot\x20','headless','5\x20min','onepagemode','express-fileupload','2FA\x20required','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','bb/','statSync','login\x20required','full','\x20>\x20','-----------------------------------------------------------------------------------','place-order','All','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','headers','/disable\x20-\x20disable\x20notifications\x0a','clientip','hasOwnProperty','path','settings','Unauthorized\x20attempt\x20to\x20store\x20configuration','telegramToken','lowdb/adapters/FileSync','store-settings','Ok,\x20will\x20send\x20alert\x20notifications\x20only','backup-full@','telegramChatId','reset-history','get-backup-files','placeOrder','whitelistEnabled','node-zip','randomFillSync','getPortfolio','add-bot','\x1b[0m','bbvReceive','deleteHistoryAlerts','join','writeFileSync','Enabled\x20Bot\x20','/:bot/support','Unauthorized\x20login\x20attempt\x20(timeout)','Unauthorized\x20attempt\x20to\x20show\x20configuration','debug','timestamp','tkn','HTML','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','date-fns','reason','settings.','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','internal','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','forEach','generateKeyPairAsync','2FA\x20login\x20token\x20generated','132JAfzDZ','post','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Invalid\x20authentication\x20token\x20(1)','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','SIGTERM','once','f2aRequired','IPv4','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','connected','botID','Login\x20accepted','remoteAddress','bcryptjs','getDate','get-logs','getSeconds','restart','cloneDeep','Temporary\x20access\x20rejected','find','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Failed\x20to\x20download\x20','Server','version','readFileSync','args','request','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Login\x20rejected','exit','Yes','<b>Telegram\x20Bot\x20Status:</b>\x0a',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','emit','from','number','bot','stopped','Restore\x20backup\x20file\x20','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','/update\x20-\x20update\x20Balance\x20Bot\x0a','index.html','bot.js','sendMetricsTelegram','crypto','then','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','0.0.0','Crypt','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reject','Alerts','backup','/:bot/coins','token','\x20(2)','Restarting\x20Bot\x20','argv','Restore\x20process\x20aborted','encryptedUuid','status','stop','File\x20uploaded','[ip-address]','simple','1008973SzwpGl','slice','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','\x1b[31m','hybrid-crypto-js','temporary\x20access\x20timeout','length','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','build','Deleted\x20Bot\x20','(((.+)+)+)+$','node-telegram-bot-api','startsWith','update-bot','Invalid\x20Telegram\x20token','files','range','exchange','rmSync','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','graphql-request','/:bot/configuration','function','kill','socket','Starting\x20Balance\x20Bot\x20reinstallation','referer','login\x20not\x20required','store-headless','Starting\x20bot\x20|\x20Bot\x20','update-bb','toggleBotMode','http','createServer','version.json','copyFileSync','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','#RES#\x20if\x20running\x20locally\x0a','reload','unlinkSync','login\x20token\x20generated','axios','replace','get-portfolio','Logged\x20in\x20user\x20...','logout','#RES#\x0a','disconnect','***','alerts','-config.json','bot-','Unauthorized\x20attempt\x20to\x20confirm\x20message','mixpanel','-events.json','/names\x20-\x20show\x20bot\x20names\x0a','resetHistory','username','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','padStart','data','generate','127.0.0.1','manual','expiry','You\x20can\x20use\x20the\x20following\x20commands:\x0a','output-003.log','RSA','all','private','onText','11352aQmRes','store-configuration','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','$1_$2_$3','reset-password','set','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','\x20|\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','32uCUwjq','bb-secure.json'];_0x5ec1=function(){return _0x1f3817;};return _0x5ec1();}async function restoreConfigNotify(_0x112dbf){const _0x49e9af=_0x32bb9d;let _0x41dd0d;if(restoredConfigFile==0x1)_0x41dd0d=_0x49e9af(0x37b);else _0x41dd0d=_0x49e9af(0x239);if(_0x112dbf)io['to'](_0x49e9af(0x30b))[_0x49e9af(0x389)](_0x49e9af(0x314),_0x41dd0d);else{logger[_0x49e9af(0x3a8)](_0x49e9af(0x335)),logger['simple'](_0x41dd0d),logger['simple'](_0x49e9af(0x335)),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings[_0x49e9af(0x305)]!=_0x49e9af(0x2bc))tgBot[_0x49e9af(0x325)](settings[_0x49e9af(0x345)],_0x49e9af(0x224)+_0x41dd0d)[_0x49e9af(0x226)](_0x4b42ce=>{telegramError(_0x4b42ce);});}}function validateCredentials(_0x5c79fb,_0x37e965){const _0x558633=_0x32bb9d;if(_0x5c79fb[_0x558633(0x1f6)]==settings['bbUsername']&&bcrypt[_0x558633(0x23d)](_0x5c79fb[_0x558633(0x256)],settings[_0x558633(0x27e)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x450825=generateLoginToken(_0x37e965);return{'allow':!![],'reason':_0x558633(0x3d2),'token':_0x450825};}}else return{'allow':![],'reason':_0x558633(0x2df),'token':null};}function refreshToken(_0x2aadb0){const _0x2cc957=_0x32bb9d,_0x5c4d6b=generateLoginToken(_0x2aadb0);return{'allow':!![],'reason':_0x2cc957(0x3d2),'token':_0x5c4d6b};}function validateAccess(_0x3099ed,_0x4b298d,_0xdff72b){const _0x277812=_0x32bb9d,_0x4f92ff=_0xdff72b?_0xdff72b:devices[_0x4b298d]['ip'];let _0x4ccd48;const _0x6e5f06=_0xc34a90=>{const _0x4ea5bf=_0x1ab7;if(settings['loginRequired']){if(settings[_0x4ea5bf(0x36c)]){if(telegram2FaApproved(_0x4b298d)){const _0x33f8ae=generateLoginToken(_0x4b298d);return{'allow':!![],'reason':_0x4ea5bf(0x364),'token':_0x33f8ae};}else return{'allow':![],'reason':_0x4ea5bf(0x332),'token':null};}else return _0x4ccd48=validToken(_0xc34a90,_0x4b298d),_0x4ccd48[_0x4ea5bf(0x33c)](_0x4ea5bf(0x310))?{'allow':!![],'reason':_0x4ea5bf(0x29e),'token':_0xc34a90}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4ea5bf(0x3c5),'token':null};};if(settings[_0x277812(0x349)]){let _0x8c4703=[...settings[_0x277812(0x2ff)],_0x277812(0x275),'::ffff:127.0.0.1',_0x277812(0x1fb)];if(_0x8c4703['includes'](_0x4f92ff))return _0x6e5f06(_0x3099ed);else{_0x4ccd48=validToken(_0x3099ed,_0x4b298d);if(_0x4ccd48['hasOwnProperty']('success'))return _0x6e5f06(_0x3099ed);else{if(telegramIpApproved(_0x4b298d)){const _0x58d1e8=generateToken(_0x4b298d);return _0x4ccd48=_0x6e5f06(_0x3099ed),_0x4ccd48[_0x277812(0x27f)]?{'allow':!![],'reason':_0x277812(0x26f),'token':_0x58d1e8}:_0x4ccd48;}else return settings[_0x277812(0x233)]?{'allow':![],'reason':_0x277812(0x32e),'token':null}:{'allow':![],'reason':_0x277812(0x26b),'token':null};}}}else return _0x6e5f06(_0x3099ed);}function timelyDecrypt(_0x37ac37,_0x4be629=!![]){const _0x586848=_0x32bb9d;if(_0x37ac37)try{const _0x540be1=crypt[_0x586848(0x2b8)](secure[_0x586848(0x31c)],_0x37ac37)[_0x586848(0x23f)],_0x12cb12=_0x540be1['split']('@')[0x0],_0x305dfc=_0x540be1['split']('@')[0x1],_0x21f3ff=new Date()[_0x586848(0x21e)]();if(_0x4be629){if(_0x21f3ff-_0x305dfc<maxSecretAge*0x3e8)return _0x12cb12;else return![];}else return _0x12cb12;}catch(_0x5f4bed){return![];}else return![];}const validToken=(_0xdcbea4,_0x20e3ee)=>{const _0x457a09=_0x32bb9d,_0x57681c=devices[_0x20e3ee]['ip'];if(!_0xdcbea4)return{'error':_0x457a09(0x24f)};for(let _0x19ea09 of blacklist){if(_0x19ea09[_0x457a09(0x39e)]==_0xdcbea4)return{'error':'Token\x20blacklisted'};}let _0x42452a;try{_0x42452a=jwt['verify'](_0xdcbea4,secure['secret']+_0x20e3ee);}catch{return{'error':_0x457a09(0x368)};}if(!_0x42452a['hasOwnProperty'](_0x457a09(0x33b))&&!_0x42452a[_0x457a09(0x33c)](_0x457a09(0x1f6))||!_0x42452a[_0x457a09(0x33c)]('exp'))return{'error':_0x457a09(0x2f0)};if(!_0x42452a['hasOwnProperty']('username')&&_0x42452a[_0x457a09(0x33c)](_0x457a09(0x33b))){const {clientip:_0x5aef38}=_0x42452a;return _0x57681c==_0x5aef38?{'success':_0x457a09(0x2da)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x42452a['hasOwnProperty'](_0x457a09(0x1f6))&&_0x42452a[_0x457a09(0x33c)](_0x457a09(0x33b))){const {username:_0x392e75,clientip:_0x1799a8}=_0x42452a;return settings[_0x457a09(0x2f7)]==_0x392e75&&_0x57681c==_0x1799a8?{'success':_0x457a09(0x2da)}:{'error':_0x457a09(0x246)};}}},generateLoginToken=_0x47813f=>{const _0x123e78=_0x32bb9d;if(_0x47813f){const _0x54cd47=devices[_0x47813f]['ip'];return jwt[_0x123e78(0x2e5)]({'username':settings[_0x123e78(0x2f7)],'clientip':_0x54cd47},secure['secret']+_0x47813f,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x139fe2=>{const _0x9fd541=_0x32bb9d;if(_0x139fe2){const _0x219867=devices[_0x139fe2]['ip'];return jwt[_0x9fd541(0x2e5)]({'clientip':_0x219867},secure['secret']+_0x139fe2,{'expiresIn':devices[_0x139fe2][_0x9fd541(0x2cc)][_0x9fd541(0x1fd)]*0x3c});}else return![];},telegramIpApproved=_0x395132=>{const _0x20b6e5=_0x32bb9d;let _0x449f71=![];return devices[_0x395132][_0x20b6e5(0x2cc)]&&devices[_0x395132][_0x20b6e5(0x2cc)][_0x20b6e5(0x1fd)]!=_0x20b6e5(0x39a)&&(_0x449f71=devices[_0x395132][_0x20b6e5(0x2cc)][_0x20b6e5(0x33b)]==devices[_0x395132]['ip']&&new Date()[_0x20b6e5(0x21e)]()-devices[_0x395132][_0x20b6e5(0x2cc)][_0x20b6e5(0x358)]<devices[_0x395132][_0x20b6e5(0x2cc)][_0x20b6e5(0x1fd)]*0x3c*0x3e8),_0x449f71;},telegram2FaApproved=_0x6bed0=>{const _0x54906=_0x32bb9d;let _0x315bb6=![];return devices[_0x6bed0][_0x54906(0x2ab)]&&devices[_0x6bed0][_0x54906(0x2ab)][_0x54906(0x1fd)]!=_0x54906(0x39a)&&(_0x315bb6=devices[_0x6bed0][_0x54906(0x2ab)][_0x54906(0x33b)]==devices[_0x6bed0]['ip']&&new Date()[_0x54906(0x21e)]()-devices[_0x6bed0][_0x54906(0x2ab)][_0x54906(0x358)]<devices[_0x6bed0][_0x54906(0x2ab)][_0x54906(0x1fd)]*0x3c*0x3e8),_0x315bb6;},normalizeIP=_0x383b8c=>{const _0x5c1fe3=_0x32bb9d;let _0x3bd237=null,_0x3f8454=null;if(ipaddr['isValid'](_0x383b8c)){const _0xaa956e=ipaddr[_0x5c1fe3(0x289)](_0x383b8c);_0xaa956e[_0x5c1fe3(0x31b)]()===_0x5c1fe3(0x228)?(_0xaa956e[_0x5c1fe3(0x284)]()&&(_0x3bd237=_0xaa956e[_0x5c1fe3(0x2c7)]()[_0x5c1fe3(0x28a)]()),_0x3f8454=_0xaa956e[_0x5c1fe3(0x28a)]()):(_0x3bd237=_0xaa956e[_0x5c1fe3(0x28a)](),_0x3f8454=_0xaa956e[_0x5c1fe3(0x25d)]()[_0x5c1fe3(0x28a)]());}return{'show':_0x3bd237?_0x3bd237:_0x3f8454,'store':_0x3f8454};};function formatDate(_0x2b3c5f){const _0x544b9d=_0x32bb9d;return _0x2b3c5f[_0x544b9d(0x293)]()+'/'+(_0x2b3c5f[_0x544b9d(0x2fa)]()+0x1)[_0x544b9d(0x28a)]()[_0x544b9d(0x1f8)](0x2,'0')+'/'+_0x2b3c5f['getDate']()[_0x544b9d(0x28a)]()[_0x544b9d(0x1f8)](0x2,'0')+'\x20'+_0x2b3c5f[_0x544b9d(0x2e0)]()['toString']()[_0x544b9d(0x1f8)](0x2,'0')+':'+_0x2b3c5f[_0x544b9d(0x236)]()['toString']()[_0x544b9d(0x1f8)](0x2,'0')+':'+_0x2b3c5f['getSeconds']()[_0x544b9d(0x28a)]()['padStart'](0x2,'0');}function sleep(_0x11393f){return new Promise(_0x3bbc8b=>setTimeout(_0x3bbc8b,_0x11393f));}