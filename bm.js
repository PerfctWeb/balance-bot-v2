const _0x1bee0e=_0x5288;(function(_0x4604b7,_0x221af3){const _0x36e6b4=_0x5288,_0x2b749d=_0x4604b7();while(!![]){try{const _0x599fc6=parseInt(_0x36e6b4(0x234))/0x1+-parseInt(_0x36e6b4(0xdd))/0x2+-parseInt(_0x36e6b4(0x84))/0x3*(parseInt(_0x36e6b4(0x19b))/0x4)+parseInt(_0x36e6b4(0x22c))/0x5*(-parseInt(_0x36e6b4(0xaa))/0x6)+-parseInt(_0x36e6b4(0xde))/0x7*(parseInt(_0x36e6b4(0x1da))/0x8)+parseInt(_0x36e6b4(0x107))/0x9*(parseInt(_0x36e6b4(0x145))/0xa)+parseInt(_0x36e6b4(0x206))/0xb;if(_0x599fc6===_0x221af3)break;else _0x2b749d['push'](_0x2b749d['shift']());}catch(_0xb5d67a){_0x2b749d['push'](_0x2b749d['shift']());}}}(_0x36f4,0xecfb8));const _0xe0f39a=function(){let _0x47bbdd=!![];return function(_0x1e80b4,_0x183e0a){const _0x39a83e=_0x47bbdd?function(){const _0xbbc886=_0x5288;if(_0x183e0a){const _0x4f77af=_0x183e0a[_0xbbc886(0x9c)](_0x1e80b4,arguments);return _0x183e0a=null,_0x4f77af;}}:function(){};return _0x47bbdd=![],_0x39a83e;};}(),_0x4e84c9=_0xe0f39a(this,function(){const _0x5815f3=_0x5288;return _0x4e84c9[_0x5815f3(0x228)]()[_0x5815f3(0x239)](_0x5815f3(0x161))[_0x5815f3(0x228)]()['constructor'](_0x4e84c9)[_0x5815f3(0x239)]('(((.+)+)+)+$');});_0x4e84c9();'use strict';process[_0x1bee0e(0x119)][_0x1bee0e(0x225)]=0x1;const childProcess=require(_0x1bee0e(0x153)),fs=require('fs'),fns=require(_0x1bee0e(0xac)),low=require('lowdb'),FileSync=require(_0x1bee0e(0x220)),path=require(_0x1bee0e(0x1b5)),crypto=require(_0x1bee0e(0x23a)),Crypt=require(_0x1bee0e(0x1b3))[_0x1bee0e(0x1d1)],RSA=require(_0x1bee0e(0x1b3))[_0x1bee0e(0xbe)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x1bee0e(0x88))(process[_0x1bee0e(0x261)][_0x1bee0e(0x103)](0x2))['argv'],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x1bee0e(0xf8)),Mixpanel=require(_0x1bee0e(0xa5)),axios=require(_0x1bee0e(0x26c)),{GraphQLClient,gql}=require(_0x1bee0e(0xad)),util=require('util'),fileUpload=require(_0x1bee0e(0x25f)),{networkInterfaces}=require('os'),PORT=argv[_0x1bee0e(0x1df)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x1bee0e(0xf9)](PORT)&&(console[_0x1bee0e(0xfe)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x1bee0e(0x1aa)](0x1));const HOST=argv[_0x1bee0e(0x74)]||null,userID=argv[_0x1bee0e(0xb2)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x1bee0e(0x1e8)];let bbpath=_0x1bee0e(0x26d),bbpath2='';const botfile=_0x1bee0e(0x226),configfile='bb-config.json',settingsfile=_0x1bee0e(0x127),securefile=_0x1bee0e(0x251),environment=require('./'+bbpath2+_0x1bee0e(0x1c2))[_0x1bee0e(0x19e)]||_0x1bee0e(0xfa),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x1bee0e(0xe4)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1bee0e(0x10d)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x1bee0e(0xc2),logspath=userID?bbpath+_0x1bee0e(0x1b6)+userID+'/':bbpath+_0x1bee0e(0x1b6),zippath=userID?bbpath+_0x1bee0e(0x10b)+userID+'/':bbpath+_0x1bee0e(0x10b),loggerfile=fs[_0x1bee0e(0xe0)](logspath+_0x1bee0e(0x216),{'flags':'a'}),temppath=userID?bbpath+_0x1bee0e(0x97)+userID+'/':bbpath+_0x1bee0e(0x97);!fs['existsSync'](configpath)&&fs[_0x1bee0e(0x1fb)](configpath);!fs[_0x1bee0e(0xe4)](configbackuppath)&&fs[_0x1bee0e(0x1fb)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x1bee0e(0x1fb)](logspath);!fs[_0x1bee0e(0xe4)](zippath)&&fs[_0x1bee0e(0x1fb)](zippath);!fs[_0x1bee0e(0xe4)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x1bee0e(0x8b)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1bee0e(0x1c1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1bee0e(0xcf),'onepagemode':![],'marketcapApi':''}})[_0x1bee0e(0x8b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1bee0e(0x1c1)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x1bee0e(0xcc)](_0x1bee0e(0x76),{'host':_0x1bee0e(0x194)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings['telegramToken']!=''&&settings['telegramToken']!=_0x1bee0e(0x18a))&&settings['telegramUsername']&&settings[_0x1bee0e(0x99)]!='')initTelegram();const parseColor=(_0x363bf3,_0x544a0d)=>{const _0x5d1231=_0x1bee0e,_0x59104f=/#[A-Z]{3}#/g;if(typeof _0x363bf3==_0x5d1231(0xc7)){!_0x544a0d?_0x363bf3=_0x363bf3['replace'](_0x59104f,''):(_0x363bf3=_0x363bf3['replace'](/#BLU#/g,_0x5d1231(0x21f)),_0x363bf3=_0x363bf3[_0x5d1231(0x1ba)](/#RED#/g,_0x5d1231(0x152)),_0x363bf3=_0x363bf3['replace'](/#YEL#/g,_0x5d1231(0x1b4)),_0x363bf3=_0x363bf3[_0x5d1231(0x1ba)](/#MAG#/g,_0x5d1231(0x185)),_0x363bf3=_0x363bf3[_0x5d1231(0x1ba)](/#CYA#/g,_0x5d1231(0x71)),_0x363bf3=_0x363bf3[_0x5d1231(0x1ba)](/#RES#/g,'\x1b[0m'));;}return _0x363bf3;},logger={'screen':_0x4271e4=>{console['log'](parseColor(_0x4271e4,!![]));},'simple':_0x4ab5a9=>{const _0x46a26a=_0x1bee0e;console[_0x46a26a(0xfe)](parseColor(_0x4ab5a9,!![])),loggerfile[_0x46a26a(0x8b)](util[_0x46a26a(0x210)](parseColor(_0x4ab5a9,![]))+'\x0a');},'full':async _0x59bfde=>{const _0x4aec84=_0x1bee0e,_0x36a72b=getTimeStamp()+_0x4aec84(0x9d)+_0x59bfde;console[_0x4aec84(0xfe)](parseColor(_0x36a72b,!![])),loggerfile[_0x4aec84(0x8b)](util['format'](parseColor(_0x36a72b,![]))+'\x0a');if(tgBot&&settings[_0x4aec84(0x172)]&&settings[_0x4aec84(0x269)]!=_0x4aec84(0x117))await sendTelegram(settings[_0x4aec84(0x172)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x59bfde,![]));},'debug':async(_0x365476,_0x36d2f1='')=>{const _0x2c689f=_0x1bee0e,_0x1fc0ea=getTimeStamp()+_0x2c689f(0x222)+_0x365476;if(debugging)console[_0x2c689f(0xfe)](parseColor(_0x1fc0ea,!![]));loggerfile[_0x2c689f(0x8b)](util[_0x2c689f(0x210)](parseColor(_0x1fc0ea,![]))+'\x0a');if(_0x36d2f1){if(debugging)console['log'](_0x36d2f1);loggerfile[_0x2c689f(0x8b)](util[_0x2c689f(0x210)](_0x36d2f1)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0xcc3fb6){const _0x832a9d=_0x1bee0e;_0xcc3fb6[_0x832a9d(0x228)]()[_0x832a9d(0xb3)](_0x832a9d(0x1bb))?(logger[_0x832a9d(0x1f5)](_0x832a9d(0x20f)+_0xcc3fb6[_0x832a9d(0x1df)]+_0x832a9d(0x24f)),process['send']({'terminate':!![]},_0x49e3f0=>{})):logger[_0x832a9d(0x1f5)](_0xcc3fb6);}),process['on']('exit',()=>{const _0x4599dd=_0x1bee0e;stopAllBots(),process[_0x4599dd(0x1aa)](0x0);}),process['on'](_0x1bee0e(0x203),()=>{const _0x13bd8e=_0x1bee0e;stopAllBots(),process[_0x13bd8e(0x1aa)](0x0);}),process['on']('SIGINT',()=>{const _0x109ff5=_0x1bee0e;stopAllBots(),process[_0x109ff5(0x1aa)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1bee0e(0x1c2))[_0x1bee0e(0x11d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1bee0e(0x235)),app=express(),http=require(_0x1bee0e(0x18d))[_0x1bee0e(0x113)](app);app[_0x1bee0e(0x154)](fileUpload({'useTempFiles':!![]})),app[_0x1bee0e(0x215)]('/download/:type',async(_0x21c18e,_0x518239)=>{const _0xf8a11d=_0x1bee0e,_0x146a74=_0x21c18e[_0xf8a11d(0x257)]['type'],_0xb3dd42=getClientsWithBotID(_0xf8a11d(0x1e2)),_0x532c8f=_0x21c18e[_0xf8a11d(0x254)][_0xf8a11d(0xbd)],_0x3e61c8=timelyDecrypt(_0x532c8f,![]),_0x51b907=_0xb3dd42[_0xf8a11d(0x13b)](_0x382fb6=>_0x382fb6[_0xf8a11d(0xbd)]==_0x3e61c8);if(_0x51b907){const _0xb97087=normalizeIP(_0x21c18e[_0xf8a11d(0x124)][_0xf8a11d(0x1a6)])[_0xf8a11d(0x21b)],_0x5ceb6d=_0x21c18e[_0xf8a11d(0x254)][_0xf8a11d(0x10a)];if(validateAccess(_0x5ceb6d,_0x3e61c8,_0xb97087)[_0xf8a11d(0x126)])_0x146a74==_0xf8a11d(0xb4)&&await backupConfigFiles(),await zipFiles(_0x146a74),_0x518239['download'](zippath+(_0x146a74+'.zip'),_0x4abc2b=>{const _0x5e109e=_0xf8a11d;_0x4abc2b&&(logger['full'](_0x5e109e(0x174)+_0x146a74),logger[_0x5e109e(0x1f5)](_0x4abc2b));});else logger[_0xf8a11d(0x195)](_0xf8a11d(0x17b)+_0x146a74+_0xf8a11d(0xe2));}else logger[_0xf8a11d(0x195)](_0xf8a11d(0x17b)+_0x146a74+'\x20(2)');}),app[_0x1bee0e(0x177)](_0x1bee0e(0x1fe),async(_0x4c382f,_0x481ed1)=>{const _0x4ae699=_0x1bee0e,_0x2ef373=getClientsWithBotID(_0x4ae699(0x1e2)),_0x36701f=_0x4c382f['headers'][_0x4ae699(0xbd)],_0x370147=timelyDecrypt(_0x36701f,![]),_0x5b63d9=_0x2ef373[_0x4ae699(0x13b)](_0x10357c=>_0x10357c[_0x4ae699(0xbd)]==_0x370147);logger[_0x4ae699(0x11e)](_0x4ae699(0x229));if(_0x5b63d9){const _0x28938f=normalizeIP(_0x4c382f[_0x4ae699(0x124)][_0x4ae699(0x1a6)])[_0x4ae699(0x21b)],_0x26c12b=_0x4c382f[_0x4ae699(0x254)][_0x4ae699(0x10a)];if(validateAccess(_0x26c12b,_0x370147,_0x28938f)['allow']){if(_0x4c382f[_0x4ae699(0x15b)]){const _0x20b397=_0x4c382f[_0x4ae699(0x15b)]['backupfile'];await _0x20b397['mv'](temppath+_0x20b397['name']),_0x481ed1[_0x4ae699(0x13d)]({'status':!![],'message':_0x4ae699(0x227)});const _0x1d5f80=getBotsWithMode();_0x1d5f80[_0x4ae699(0x150)]>0x0?confirmRestore(temppath,_0x20b397[_0x4ae699(0x13a)]):unzipFile(temppath,_0x20b397[_0x4ae699(0x13a)]);}}else logger['full'](_0x4ae699(0x93));}else logger[_0x4ae699(0x195)](_0x4ae699(0x23c));}),app[_0x1bee0e(0x154)](express[_0x1bee0e(0x160)](path[_0x1bee0e(0x7b)](__dirname,bbpath2,_0x1bee0e(0x1b2)))),app[_0x1bee0e(0x154)](express[_0x1bee0e(0x160)](path['join'](__dirname,bbpath2,_0x1bee0e(0xeb)))),app[_0x1bee0e(0x215)]('/',function(_0x5b51d7,_0x5e47c7){const _0x28cf0f=_0x1bee0e;_0x5e47c7[_0x28cf0f(0xe5)](path['join'](__dirname,bbpath2,_0x28cf0f(0x1b2),'index.html'));}),app[_0x1bee0e(0x215)](_0x1bee0e(0x23d),function(_0x13ab18,_0x373e6f){const _0x32dc0e=_0x1bee0e;_0x373e6f[_0x32dc0e(0xe5)](path[_0x32dc0e(0x7b)](__dirname,bbpath2,_0x32dc0e(0xeb),_0x32dc0e(0xd7)));}),app[_0x1bee0e(0x215)](_0x1bee0e(0x184),(_0x2e3230,_0x32e9a3)=>{const _0x271c64=_0x1bee0e;_0x32e9a3[_0x271c64(0xe5)](path['join'](__dirname,bbpath2,_0x271c64(0xeb),_0x271c64(0xd7)));}),app[_0x1bee0e(0x215)]('/:bot/performance',(_0x237b31,_0x37e838)=>{const _0x148ffa=_0x1bee0e;_0x37e838[_0x148ffa(0xe5)](path[_0x148ffa(0x7b)](__dirname,bbpath2,'build',_0x148ffa(0xd7)));}),app[_0x1bee0e(0x215)](_0x1bee0e(0x1f7),(_0x521189,_0x33b29b)=>{const _0x1adeb1=_0x1bee0e;_0x33b29b[_0x1adeb1(0xe5)](path[_0x1adeb1(0x7b)](__dirname,bbpath2,_0x1adeb1(0xeb),_0x1adeb1(0xd7)));}),app['get'](_0x1bee0e(0x22a),(_0x598c10,_0x1012de)=>{const _0x4da50a=_0x1bee0e;_0x1012de[_0x4da50a(0xe5)](path[_0x4da50a(0x7b)](__dirname,bbpath2,_0x4da50a(0xeb),_0x4da50a(0xd7)));}),app[_0x1bee0e(0x215)](_0x1bee0e(0x70),(_0x13def5,_0x6b3911)=>{const _0x3a7d9d=_0x1bee0e;_0x6b3911[_0x3a7d9d(0xe5)](path['join'](__dirname,bbpath2,_0x3a7d9d(0xeb),'index.html'));}),app[_0x1bee0e(0x215)](_0x1bee0e(0x246),(_0x4c9942,_0x34a3c9)=>{const _0x1dcb89=_0x1bee0e;_0x34a3c9[_0x1dcb89(0xe5)](path[_0x1dcb89(0x7b)](__dirname,bbpath2,_0x1dcb89(0xeb),_0x1dcb89(0xd7)));});if(HOST)http['listen'](PORT,HOST);else http[_0x1bee0e(0x1f2)](PORT);const io=require(_0x1bee0e(0x98))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x55f6fd=_0x1bee0e;let _0x5421c8='[ip-address]';const _0x450a73=networkInterfaces(),_0x350a99={};for(const _0x578d07 of Object[_0x55f6fd(0x1a3)](_0x450a73)){for(const _0x104246 of _0x450a73[_0x578d07]){if((_0x104246[_0x55f6fd(0xa7)]==_0x55f6fd(0x1f8)||_0x104246[_0x55f6fd(0xa7)]==0x4)&&!_0x104246[_0x55f6fd(0x175)]){const _0x120521=ipaddr[_0x55f6fd(0x18b)](_0x104246[_0x55f6fd(0x24d)])[_0x55f6fd(0x16b)]();_0x120521!=_0x55f6fd(0x81)&&(!_0x350a99[_0x578d07]&&(_0x350a99[_0x578d07]=[]),_0x350a99[_0x578d07][_0x55f6fd(0x1ae)](_0x104246[_0x55f6fd(0x24d)]),_0x5421c8=_0x104246[_0x55f6fd(0x24d)]);}}}return{'serverip':_0x5421c8,'netinterfaces':_0x350a99};}async function startServer(){const _0x54f504=_0x1bee0e,{serverip:_0x467e46,netinterfaces:_0x2a5bb5}=getServerIP();logger[_0x54f504(0x1f5)](''),logger['simple'](_0x54f504(0x1c9)),await logger[_0x54f504(0x195)](_0x54f504(0x1f4)+serverversion+'#RES#\x20'+(environment==_0x54f504(0x11a)?'(staging)':'')+'\x0a'+(_0x54f504(0xc1)+PORT+_0x54f504(0x1e9))+(_0x54f504(0x17f)+_0x467e46+':'+PORT+_0x54f504(0x1a9))),logger[_0x54f504(0x1f5)](_0x54f504(0x1c9));if(config[_0x54f504(0x150)]!=0x0)for(const _0x3e942d of config){const _0x335005=_0x3e942d[_0x54f504(0x1fd)]==_0x54f504(0xd9)?'a':'m';if(_0x3e942d[_0x54f504(0x1d6)]==_0x54f504(0xd2)||_0x3e942d[_0x54f504(0x1d6)]=='new')await logger['full'](_0x54f504(0x8e)+_0x335005+_0x54f504(0xfb)+_0x3e942d['botID']+_0x54f504(0x77)+_0x3e942d[_0x54f504(0xc5)]),startBot([_0x3e942d[_0x54f504(0x8a)],userID],{'cwd':bbpath},function(_0x1b47b0){const _0x54d921=_0x54f504;if(_0x1b47b0)logger[_0x54d921(0x195)](_0x1b47b0);});else(_0x3e942d[_0x54f504(0x1d6)]==_0x54f504(0x19c)||_0x3e942d[_0x54f504(0x1d6)]=='new-disabled')&&await logger['full'](_0x54f504(0x167)+_0x335005+_0x54f504(0x248)+_0x3e942d['botID']+'\x20|\x20'+_0x3e942d['botname']);}else!newBot&&logger[_0x54f504(0x1f5)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x54f504(0x1f5)](_0x54f504(0x1c9)),logger[_0x54f504(0x1f5)](''),await logger['debug']('Node.js\x20v'+nodeversion),await logger[_0x54f504(0x11e)](_0x54f504(0xb0),_0x2a5bb5);}function startSocket(){const _0x1a5221=_0x1bee0e;io['on'](_0x1a5221(0x1d8),_0x30f405=>{const _0x2ff4f6=_0x1a5221;let _0x4b9c97,_0xac5681,_0x58003d,_0x500cf3,_0x111883;const _0x1d38bf=_0x30f405[_0x2ff4f6(0x16c)][_0x2ff4f6(0x254)]['referer'];_0xac5681=_0x1d38bf['match'](/bot[0-9]{3}/);if(_0xac5681)_0x58003d=_0xac5681[0x0][_0x2ff4f6(0x100)](/[0-9]{3}/);if(_0x58003d)_0x4b9c97=_0x58003d[0x0];else _0x4b9c97='botmanager';const _0x10b786=_0x30f405['handshake'][_0x2ff4f6(0xca)][_0x2ff4f6(0x163)];if(!_0x10b786)_0x30f405[_0x2ff4f6(0xa8)](_0x2ff4f6(0x1d6),{'publicKey':secure[_0x2ff4f6(0x137)]});else{_0x500cf3=timelyDecrypt(_0x10b786,![]);if(!_0x500cf3)_0x30f405['emit'](_0x2ff4f6(0x1d6),{'publicKey':secure[_0x2ff4f6(0x137)]});else{_0x111883=normalizeIP(_0x30f405[_0x2ff4f6(0x15e)][_0x2ff4f6(0x1a6)])[_0x2ff4f6(0x21b)];if(!devices[_0x500cf3])devices[_0x500cf3]={'uuid':_0x500cf3,'access':{'token':null}};devices[_0x500cf3]['ip']=_0x111883;const _0x36ef65=addClient(_0x30f405['id'],_0x500cf3,_0x4b9c97);setAccess(_0x36ef65),emitMessages(),_0x30f405['on']('login',_0x363881=>{const _0x5481f2=_0x2ff4f6,_0x1ee30c=timelyDecrypt(_0x363881[_0x5481f2(0x1ac)],!![],_0x5481f2(0x22b));if(_0x1ee30c){_0x363881={'username':_0x363881['username'],'password':_0x1ee30c},devices[_0x500cf3][_0x5481f2(0xa4)]=validateCredentials(_0x363881,_0x500cf3);if(devices[_0x500cf3]['access']['allow']==![]&&devices[_0x500cf3][_0x5481f2(0xa4)]['reason']==_0x5481f2(0xb5))_0x30f405[_0x5481f2(0xa8)](_0x5481f2(0x1d6),{'access':devices[_0x500cf3][_0x5481f2(0xa4)]}),loginAccess2FA(_0x500cf3,_0x111883);else{if(devices[_0x500cf3]['access']['allow']==![]&&devices[_0x500cf3][_0x5481f2(0xa4)]['reason']==_0x5481f2(0x12d))_0x30f405[_0x5481f2(0xa8)](_0x5481f2(0x1d6),{'access':devices[_0x500cf3][_0x5481f2(0xa4)]});else devices[_0x500cf3][_0x5481f2(0xa4)][_0x5481f2(0x126)]&&devices[_0x500cf3][_0x5481f2(0xa4)][_0x5481f2(0x20c)]==_0x5481f2(0x24e)&&(getClientsWithUuid(_0x500cf3)[_0x5481f2(0x265)](_0x58d320=>{setAccess(_0x58d320);}),logger[_0x5481f2(0x11e)]('Logged\x20in\x20user\x20...'+_0x500cf3['slice'](-0x8)),setTokenRefresh(_0x500cf3),setSessionTimeout(_0x5481f2(0x80),_0x500cf3));}}else logger[_0x5481f2(0x195)](_0x5481f2(0x13f));}),_0x30f405['on'](_0x2ff4f6(0x8d),()=>{resetPassword();}),_0x30f405['on'](_0x2ff4f6(0x13e),_0x4ddd73=>{removeClient(_0x30f405['id']);}),_0x4b9c97==_0x2ff4f6(0x1e2)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x4f9390){const _0x237d04=_0x1bee0e;if(_0x4f9390!='botmanager'&&config['apiKey']!=''){if(pid[_0x4f9390])pid[_0x4f9390][_0x237d04(0x13d)]({'function':_0x237d04(0x1e4),'args':null});}_0x4f9390!=_0x237d04(0x1e2)&&broadcastToBots(_0x237d04(0x20d),JSON['stringify'](config));}function reloadBotManager(){const _0x5548dc=_0x1bee0e;getClientsWithBotID(_0x5548dc(0x1e2))[_0x5548dc(0x265)](_0x440612=>{const _0x3e2109=_0x5548dc;getSocket(_0x440612['id'])[_0x3e2109(0xa8)]('status',{'access':{'allow':![],'reason':_0x3e2109(0x1b7),'token':null}});});}function getSocket(_0x57f741){const _0x1eed4c=_0x1bee0e;return io[_0x1eed4c(0x244)][_0x1eed4c(0x244)][_0x1eed4c(0x215)](_0x57f741);}function setAccess(_0x281481){const _0x5547b9=_0x1bee0e,_0x4981b=getSocket(_0x281481['id']),_0x19ea0a=_0x281481[_0x5547b9(0xbd)],_0x27718b=_0x281481[_0x5547b9(0x102)];devices[_0x19ea0a][_0x5547b9(0xa4)]=validateAccess(devices[_0x19ea0a][_0x5547b9(0xa4)][_0x5547b9(0xd1)],_0x19ea0a),logger[_0x5547b9(0x11e)]('Setting\x20access:\x20'+devices[_0x19ea0a]['access'][_0x5547b9(0x20c)]+_0x5547b9(0xbc)+_0x281481['id'][_0x5547b9(0x103)](-0x8)+_0x5547b9(0x110)+_0x19ea0a['slice'](-0x8)),_0x4981b[_0x5547b9(0x7b)](_0x19ea0a);if(devices[_0x19ea0a][_0x5547b9(0xa4)][_0x5547b9(0x126)]){_0x4981b[_0x5547b9(0x7b)](_0x27718b);if(_0x27718b=='botmanager')initializeSocketBotManager(_0x4981b);else initializeSocketBot(_0x4981b);initClient(_0x27718b);}devices[_0x19ea0a]['access'][_0x5547b9(0xd1)]&&devices[_0x19ea0a][_0x5547b9(0xa4)][_0x5547b9(0x20c)]==_0x5547b9(0x82)&&setSessionTimeout(_0x5547b9(0x237),_0x19ea0a),devices[_0x19ea0a][_0x5547b9(0xa4)][_0x5547b9(0xd1)]&&devices[_0x19ea0a]['access']['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x19ea0a),_0x4981b[_0x5547b9(0xa8)](_0x5547b9(0x1d6),{'status':_0x281481[_0x5547b9(0x236)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x19ea0a][_0x5547b9(0xa4)],'externalip':devices[_0x19ea0a]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x5547b9(0x259)],'validInstallation':validInstallation}),devices[_0x19ea0a][_0x5547b9(0xa4)]['allow']==![]&&devices[_0x19ea0a][_0x5547b9(0xa4)]['reason']==_0x5547b9(0x1de)&&temporaryAccess2FA(_0x19ea0a,devices[_0x19ea0a]['ip']);}function _0x36f4(){const _0x2fc78a=['new-disabled','reset-history','botmanager','editMessageReplyMarkup','initclient','delete-alerts','logout','2FA\x20login\x20token\x20generated','node','#RES#\x20if\x20running\x20locally\x0a','add-bot','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Starting\x20Balance\x20Bot\x20reinstallation','blacklist','get-messages','removeAllListeners','reinstall','tempaccess_5_','listen','f2aRequired','Starting\x20#RED#Balance\x20Bot\x20v','simple','telegramEnabled','/:bot/coins','IPv4','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','clientip','mkdirSync','kill','mode','/upload-backup','isIPv4MappedAddress','Notifications\x20disabled','button','catch','SIGTERM','readFileSync','expiry','32583859PGwgJx','sortBy','Allow\x20login\x20from\x20IP\x20address\x20','whitelist','store-fiat','update-bot','reason','bots','Backup\x20file\x20unzipped\x20and\x20stored','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','format','once','*$1*','store-configuration','https://api.ipify.org?format=json','get','/output-000.log','bbvReceive','Notifications\x20enabled\x0a','Bot\x20','config_orders','store','launch','Invalid\x20IP\x20address','secure','\x1b[34m','lowdb/adapters/FileSync','ipc',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Restarting\x20Bot\x20','generate','NTBA_FIX_319','bot.js','File\x20uploaded','toString','Backup\x20file\x20uploaded','/:bot/history','|@|','562790iZkFIg','start','update_yes','notification','action','rmSync','reinstall_no','tempaccess_reject_','1444752eMfsEE','express','server','2FA','telegram','search','crypto','size','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','/:bot','-events.json','data','started','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','running','Error\x20removing\x20old\x20backup\x20files:','sockets','/restart\x20-\x20restart\x20bot(s)\x0a','/:bot/support','Token\x20blacklisted',')\x20\x20\x20|\x20Bot\x20','Invalid\x20authentication\x20token\x20(1)','metrics_','toggle-bot-mode','on_','address','login\x20token\x20generated','#RES#','any','bb-secure.json','ipv6','Invalid\x20username\x20or\x20IP\x20address','headers','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20add\x20bot','params','login\x20required','userid','restore_yes_','tempaccess_30_','startsWith','telegramToken','tempaccess_15_','express-fileupload','sendMessage','argv','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','file','Password\x20has\x20been\x20reset\x20to:\x20','forEach','function','show-config','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','telegramEvents','Telegram\x20error:','/on\x20-\x20start\x20bot(s)\x0a','axios','bb/','portfolio','resetpw_yes','Unauthorized\x20attempt\x20to\x20update\x20settings','portfolio_','reject','sign','marketcapApi','fork','Password\x20reset\x20rejected','exec','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','isDirectory','privateKey','bot-','login2fa_reject_','/:bot/configuration','\x1b[36m','lastmsgemitted','Notifications\x20disabled\x0a','host','node-zip','6b67f3d61ee94b8f5c80b4affef4c4d9','\x20|\x20','logs','statSync','get-backup-files','join','$1_$2_$3','place-order','toggle','logged\x20out','login','private','temporary\x20token\x20generated','config','6MtXnHD','confirm-message','/names\x20-\x20show\x20bot\x20names\x0a','login\x20not\x20required','yargs/yargs','Ok,\x20will\x20send\x20order\x20notifications\x20only','botID','write','/disable\x20-\x20disable\x20notifications\x0a','reset-password','Starting\x20(','sendPortfolioTelegram','warning','bbPassword','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','writeFileSync','temporary\x20access\x20not\x20allowed','args','temp/','socket.io','telegramUsername','Telegraf\x20error:','output-001.log','apply',':\x20Bot\x20Mgr\x20>\x20','inlineKeyboard','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','backup-files','config_alerts','headless','getUTCHours','access','mixpanel','timeshift','family','emit','text','102YhalJC','No\x20authentication\x20token','date-fns','graphql-request','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','success','Network\x20Interfaces:','telegrammsg','user','includes','backup','2FA\x20login\x20required','assign','All','getStartingBalances','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','names','30\x20min','\x20|\x20client:\x20...','uuid','RSA','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','-config.json','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','backup/','/update\x20-\x20update\x20Balance\x20Bot\x0a','BCT','botname','deleteHistoryAlerts','string','Markdown','storeConfiguration','auth','pidRefreshToken','init','settings','All\x20bots\x20running\x20right\x20now','0.0.0','verify','token','enabled','Deleted\x20Bot\x20','15\x20min','toIPv4MappedAddress','telegramIpApproval','index.html','filter','auto','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Notifications\x20enabled',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','3121698TGOucH','1072939teSpim','************','createWriteStream','-performance.json','\x20(1)','Unauthorized\x20attempt\x20to\x20get\x20messages','existsSync','sendFile','HTML','getTime','order','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','build','stringify','cloneDeep','Unauthorized\x20attempt\x20to\x20log\x20out','onepagemode','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','command','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Logged\x20out\x20user\x20...','ETH','/off\x20-\x20stop\x20bot(s)\x0a','restore_no_','binary','telegraf','test','production',')\x20|\x20Bot\x20','split','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','log','username','match','number','bot','slice','\x20>\x20','loginRequired','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','9tDuGJT','config_all','alerts','tkn','zip/','getSeconds','clients','inherit','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','\x20|\x20user:\x20...','messages','backup-full','createServer','stop','Unauthorized\x20attempt\x20to\x20delete\x20bot','output-000.log','orders','manual','env','staging','type','<b>Balance\x20Bot\x20Status:</b>\x0a','version','debug','live','DEFLATE','showname','/enable\x20-\x20enable\x20notifications\x0a','alias','socket','settings.','allow','bb-settings.json','latestversion','pidExpireLogin','update-bb','randomFillSync','secret','invalid\x20credentials','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','from','.zip','get-starting-balances','User\x20has\x20been\x20validated','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','delete-bot','bbvNew','showConfig','publicKey','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','name','find','lastmsgtelegram','send','disconnect','Unauthorized\x20login\x20attempt\x20(timeout)','value','SIGINT','No\x20bots\x20running\x20right\x20now','bbUsername','update','2027810kXqbDD','code','all','apiPassword','new','remove','All\x20bots','set','backup-full.zip','Enabled\x20Bot\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','length','then','\x1b[31m','child_process','use','Orders','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','reinstall_yes','access\x20timeout','getDate','getMinutes','files','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','yes','conn','apiSecret','static','(((.+)+)+)+$','sendMetricsTelegram','encryptedUuid','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','resetpw_no','randomBytes','Idling\x20(','cancel-loading','Unauthorized\x20attempt\x20to\x20get\x20events','-results.json','range','handshake','Starting\x20new\x20bot\x20|\x20Bot\x20','\x20mode','\x20to\x20','decrypt','127.0.0.1','telegramChatId','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Failed\x20to\x20download\x20','internal','telegram2FaApproval','post','restore-backup-file','reply','Restore\x20process\x20aborted','Unauthorized\x20attempt\x20to\x20download\x20','::1','off_','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','=>\x20Go\x20to\x20#CYA#http://','getPortfolio','update_no','error','/metrics\x20-\x20show\x20bot\x20performance\x0a','/:bot/portfolio','\x1b[35m','get-portfolio','Error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','timestamp','***','parse','Yes','http','Unauthorized\x20attempt\x20to\x20store\x20configuration','callback','accept','Restore\x20process\x20confirmed','readdirSync','toggle_','api-eu.mixpanel.com','full','show','title','store-settings','resetHistory','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','22820sjCCMk','disabled','getFullYear','environment','generateKeyPairAsync','Login\x20rejected','getHours','isValid','keys','hasOwnProperty','Unauthorized\x20attempt\x20to\x20confirm\x20message','remoteAddress','CoinMarketCap\x20API\x20key\x20validated','max','#RES#\x20if\x20running\x20on\x20server','exit','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','password','sort','push','/help\x20-\x20show\x20available\x20commands\x0a','backup-full@','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','build2','hybrid-crypto-js','\x1b[33m','path','logs/','reload','Access\x20enabled\x20for\x20','padStart','replace','address\x20already\x20in\x20use','apiKey','track','placeOrder','restart','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','defaults','version.json','request','getMonth','message','stopped','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','hashSync','-----------------------------------------------------------------------------------','chat','event','<b>Telegram\x20Bot\x20Status:</b>\x0a','5\x20min','connected','storeFiat','output-002.log','Crypt','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Login\x20accepted','copyFileSync','entries','status','toggleBotMode','connection','1000','8VQQafS','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','unlinkSync','2FA\x20required','port'];_0x36f4=function(){return _0x2fc78a;};return _0x36f4();}function setSessionTimeout(_0x4659e6,_0x4fa601){const _0x2cb32c=_0x1bee0e;let _0x87b6b1;if(_0x4659e6==_0x2cb32c(0x80))_0x87b6b1=loginExpiry*0x3c*0x3e8;else _0x87b6b1=devices[_0x4fa601][_0x2cb32c(0xd6)][_0x2cb32c(0x205)]*0x3c*0x3e8-(new Date()[_0x2cb32c(0xe7)]()-devices[_0x4fa601][_0x2cb32c(0xd6)][_0x2cb32c(0x189)]);if(devices[_0x4fa601][_0x2cb32c(0x129)])clearTimeout(devices[_0x4fa601]['pidExpireLogin']);devices[_0x4fa601][_0x2cb32c(0x129)]=setTimeout(()=>{const _0x819978=_0x2cb32c;if(devices[_0x4fa601][_0x819978(0xcb)])clearTimeout(devices[_0x4fa601][_0x819978(0xcb)]);removeSocketListeners(_0x4fa601),addBlacklist(_0x4fa601),devices[_0x4fa601][_0x819978(0xd6)]=null,devices[_0x4fa601]['telegram2FaApproval']=null,devices[_0x4fa601][_0x819978(0xa4)]['token']=null,logger[_0x819978(0x11e)]('Session\x20expired\x20for\x20user\x20...'+_0x4fa601[_0x819978(0x103)](-0x8)),devices[_0x4fa601][_0x819978(0xa4)]=validateAccess(devices[_0x4fa601][_0x819978(0xa4)][_0x819978(0xd1)],_0x4fa601),!(devices[_0x4fa601][_0x819978(0xa4)]['allow']&&devices[_0x4fa601][_0x819978(0xa4)][_0x819978(0x20c)]==_0x819978(0x87))&&(_0x4659e6==_0x819978(0x80)?io['to'](_0x4fa601)[_0x819978(0xa8)](_0x819978(0x1d6),{'access':{'allow':![],'reason':_0x819978(0x158),'token':null}}):io['to'](_0x4fa601)[_0x819978(0xa8)](_0x819978(0x1d6),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x4fa601][_0x819978(0xa4)][_0x819978(0xd1)]=null;},_0x87b6b1);}function setTokenRefresh(_0x19a78f){const _0xff739d=_0x1bee0e;if(devices[_0x19a78f][_0xff739d(0xcb)])clearTimeout(devices[_0x19a78f][_0xff739d(0xcb)]);devices[_0x19a78f][_0xff739d(0xcb)]=setTimeout(()=>{const _0x3a547b=_0xff739d;getClientsWithUuid(_0x19a78f)['length']!=0x0?(devices[_0x19a78f][_0x3a547b(0xa4)]=refreshToken(_0x19a78f),io['to'](_0x19a78f)['emit']('status',{'status':_0x3a547b(0x1ce),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x19a78f]['access'],'externalip':devices[_0x19a78f]['ip'],'publicKey':secure[_0x3a547b(0x137)],'validInstallation':validInstallation}),setTokenRefresh(_0x19a78f)):clearTimeout(devices[_0x19a78f][_0x3a547b(0xcb)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x7920ed){const _0xe7cf06=_0x1bee0e,_0x598b27=getClient(_0x7920ed['id'])['uuid'];_0x7920ed[_0xe7cf06(0xa8)](_0xe7cf06(0x20d),config),_0x7920ed[_0xe7cf06(0xa8)](_0xe7cf06(0xcd),cleanSettings()),_0x7920ed['on'](_0xe7cf06(0x1ea),_0xc4a68f=>{const _0x51bda0=_0xe7cf06;if(validateAccess(_0xc4a68f,_0x598b27)[_0x51bda0(0x126)])addBot();else logger['full'](_0x51bda0(0x256));}),_0x7920ed['on'](_0xe7cf06(0x20b),(_0x111bec,_0x460d36)=>{const _0x1f188f=_0xe7cf06;if(validateAccess(_0x460d36,_0x598b27)[_0x1f188f(0x126)])toggleBot(_0x111bec[_0x1f188f(0x8a)],_0x111bec[_0x1f188f(0x1d6)],_0x111bec[_0x1f188f(0x11f)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x7920ed['on'](_0xe7cf06(0x24b),(_0x5bd0ae,_0x442eef)=>{const _0x3fdbc6=_0xe7cf06;if(validateAccess(_0x442eef,_0x598b27)[_0x3fdbc6(0x126)])toggleBotMode(_0x5bd0ae);else logger[_0x3fdbc6(0x195)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x7920ed['on'](_0xe7cf06(0x134),(_0x5cb444,_0x3fc829)=>{const _0x40b289=_0xe7cf06;if(validateAccess(_0x3fc829,_0x598b27)[_0x40b289(0x126)])deleteBot(_0x5cb444);else logger['full'](_0x40b289(0x115));}),_0x7920ed['on'](_0xe7cf06(0x198),(_0x3261ce,_0x17047c)=>{const _0x13b8f5=_0xe7cf06;if(validateAccess(_0x17047c,_0x598b27)[_0x13b8f5(0x126)])storeSettings(_0x3261ce,!![]);else logger['full'](_0x13b8f5(0x270));}),_0x7920ed['on'](_0xe7cf06(0x12a),_0x1395fa=>{const _0x34178b=_0xe7cf06;if(validateAccess(_0x1395fa,_0x598b27)[_0x34178b(0x126)])updateBB(_0x34178b(0x144));else logger[_0x34178b(0x195)](_0x34178b(0x268));}),_0x7920ed['on']('reinstall-bb',_0x100aa0=>{const _0x284eae=_0xe7cf06;if(validateAccess(_0x100aa0,_0x598b27)['allow'])updateBB(_0x284eae(0x1f0));else logger[_0x284eae(0x195)](_0x284eae(0x10f));}),_0x7920ed['on'](_0xe7cf06(0x7a),_0x16a23c=>{const _0x15e85d=_0xe7cf06;if(validateAccess(_0x16a23c,_0x598b27)[_0x15e85d(0x126)]){const _0x54af23=getClient(_0x7920ed['id']);if(_0x54af23)getBackupFiles(_0x54af23['uuid']);else logger[_0x15e85d(0x195)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x15e85d(0x195)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x7920ed['on'](_0xe7cf06(0x178),(_0x3d76d8,_0x4bce66)=>{const _0x3a76d9=_0xe7cf06;if(validateAccess(_0x4bce66,_0x598b27)[_0x3a76d9(0x126)])restoreBackupFile(_0x3d76d8);else logger[_0x3a76d9(0x195)](_0x3a76d9(0x9f));}),_0x7920ed['on'](_0xe7cf06(0x1ee),_0x14f6c8=>{const _0x1553b3=_0xe7cf06;if(validateAccess(_0x14f6c8,_0x598b27)[_0x1553b3(0x126)])getMessages();else logger[_0x1553b3(0x195)](_0x1553b3(0xe3));}),_0x7920ed['on']('confirm-message',(_0x1646ef,_0x1bf4e6)=>{const _0x40a1b2=_0xe7cf06;if(validateAccess(_0x1bf4e6,_0x598b27)[_0x40a1b2(0x126)])confirmMessage(_0x1646ef);else logger['full'](_0x40a1b2(0x1a5));}),_0x7920ed['on'](_0xe7cf06(0x1e6),_0x5486ed=>{const _0x133781=_0xe7cf06;if(validateAccess(_0x5486ed,_0x598b27)['allow']){if(devices[_0x598b27][_0x133781(0xcb)])clearTimeout(devices[_0x598b27][_0x133781(0xcb)]);if(devices[_0x598b27][_0x133781(0x129)])clearTimeout(devices[_0x598b27]['pidExpireLogin']);removeSocketListeners(getClient(_0x7920ed['id'])['uuid']),addBlacklist(_0x598b27),devices[_0x598b27]['telegramIpApproval']=null,devices[_0x598b27][_0x133781(0x176)]=null,devices[_0x598b27][_0x133781(0xa4)]['token']=null,logger[_0x133781(0x11e)](_0x133781(0xf3)+_0x598b27['slice'](-0x8)),io['to'](getClient(_0x7920ed['id'])[_0x133781(0xbd)])['emit']('status',{'access':{'allow':![],'reason':_0x133781(0x7f),'token':null}});}else logger[_0x133781(0x195)](_0x133781(0xee));});}function initializeSocketBot(_0x3111b2){const _0x3e6024=_0x1bee0e,_0x1bf764=getClient(_0x3111b2['id'])[_0x3e6024(0x102)],_0x41d1ba=getClient(_0x3111b2['id'])['uuid'];_0x3111b2['on']('get-logs',(_0x9ef6c,_0x5123cb)=>{const _0x1a688b=_0x3e6024;if(validateAccess(_0x5123cb,_0x41d1ba)[_0x1a688b(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764][_0x1a688b(0x13d)]({'function':'emitHistory','args':_0x9ef6c});}else logger[_0x1a688b(0x195)](_0x1a688b(0x169));}),_0x3111b2['on'](_0x3e6024(0x1e5),(_0x3193b9,_0x4dbf65)=>{const _0x4f904c=_0x3e6024;if(validateAccess(_0x4dbf65,_0x41d1ba)[_0x4f904c(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764]['send']({'function':_0x4f904c(0xc6),'args':_0x3193b9});}else logger[_0x4f904c(0x195)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x3111b2['on'](_0x3e6024(0x186),(_0x3779c7,_0x3a060a)=>{const _0x57baf7=_0x3e6024;if(validateAccess(_0x3a060a,_0x41d1ba)[_0x57baf7(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764]['send']({'function':_0x57baf7(0x180),'args':_0x3779c7});}else logger['full'](_0x57baf7(0x188));}),_0x3111b2['on'](_0x3e6024(0x213),(_0x3ac3fd,_0xb6f218)=>{const _0x387114=_0x3e6024;if(validateAccess(_0xb6f218,_0x41d1ba)[_0x387114(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764]['send']({'function':_0x387114(0xc9),'args':_0x3ac3fd});}else logger[_0x387114(0x195)](_0x387114(0x18e));}),_0x3111b2['on']('store-headless',(_0x261c37,_0x2372cb)=>{const _0x2d69ec=_0x3e6024;if(validateAccess(_0x2372cb,_0x41d1ba)['allow']){if(pid[_0x1bf764])pid[_0x1bf764]['send']({'function':'storeHeadless','args':_0x261c37});}else logger[_0x2d69ec(0x195)](_0x2d69ec(0x1b1));}),_0x3111b2['on'](_0x3e6024(0x20a),(_0x1a3067,_0x34cd4b)=>{const _0x179eaa=_0x3e6024;if(validateAccess(_0x34cd4b,_0x41d1ba)[_0x179eaa(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764][_0x179eaa(0x13d)]({'function':_0x179eaa(0x1cf),'args':_0x1a3067});}else logger[_0x179eaa(0x195)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x3111b2['on'](_0x3e6024(0x1e1),_0xb5fcb7=>{const _0x1e675d=_0x3e6024;if(validateAccess(_0xb5fcb7,_0x41d1ba)[_0x1e675d(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764][_0x1e675d(0x13d)]({'function':_0x1e675d(0x199),'args':null});}else logger[_0x1e675d(0x195)](_0x1e675d(0x1eb));}),_0x3111b2['on'](_0x3e6024(0x131),_0x3e5614=>{const _0x1a5fa8=_0x3e6024;if(validateAccess(_0x3e5614,_0x41d1ba)[_0x1a5fa8(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764][_0x1a5fa8(0x13d)]({'function':_0x1a5fa8(0xb8),'args':null});}else logger[_0x1a5fa8(0x195)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3111b2['on'](_0x3e6024(0x7d),(_0x43eafa,_0x594a94)=>{const _0x483b9b=_0x3e6024;if(validateAccess(_0x594a94,_0x41d1ba)['allow']){if(pid[_0x1bf764])pid[_0x1bf764][_0x483b9b(0x13d)]({'function':_0x483b9b(0x1be),'args':_0x43eafa});}else logger['full'](_0x483b9b(0x17e));}),_0x3111b2['on'](_0x3e6024(0x168),_0x5d5b05=>{const _0xfb6678=_0x3e6024;if(validateAccess(_0x5d5b05,_0x41d1ba)[_0xfb6678(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764][_0xfb6678(0x13d)]({'function':'cancelLoading','args':null});}else logger[_0xfb6678(0x195)](_0xfb6678(0xda));}),_0x3111b2['on'](_0x3e6024(0x267),_0x4114fe=>{const _0x105229=_0x3e6024;if(validateAccess(_0x4114fe,_0x41d1ba)[_0x105229(0x126)]){if(pid[_0x1bf764])pid[_0x1bf764]['send']({'function':_0x105229(0x136),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x3111b2['on']('update-bb',_0x55525b=>{const _0x23a189=_0x3e6024;if(validateAccess(_0x55525b,_0x41d1ba)[_0x23a189(0x126)])updateBB(_0x23a189(0x144));else logger[_0x23a189(0x195)](_0x23a189(0x268));}),_0x3111b2['on']('get-messages',_0x4dea70=>{const _0x31ec0f=_0x3e6024;if(validateAccess(_0x4dea70,_0x41d1ba)[_0x31ec0f(0x126)])getMessages();else logger[_0x31ec0f(0x195)](_0x31ec0f(0xe3));}),_0x3111b2['on'](_0x3e6024(0x85),(_0x496f34,_0x5f36a9)=>{const _0x3778c5=_0x3e6024;if(validateAccess(_0x5f36a9,_0x41d1ba)[_0x3778c5(0x126)])confirmMessage(_0x496f34);else logger['full'](_0x3778c5(0x1a5));}),_0x3111b2['on'](_0x3e6024(0x1e6),_0x2150f0=>{const _0x330a6b=_0x3e6024;if(validateAccess(_0x2150f0,_0x41d1ba)[_0x330a6b(0x126)]){if(devices[_0x41d1ba][_0x330a6b(0xcb)])clearTimeout(devices[_0x41d1ba][_0x330a6b(0xcb)]);if(devices[_0x41d1ba][_0x330a6b(0x129)])clearTimeout(devices[_0x41d1ba][_0x330a6b(0x129)]);removeSocketListeners(getClient(_0x3111b2['id'])[_0x330a6b(0xbd)]),addBlacklist(_0x41d1ba),devices[_0x41d1ba][_0x330a6b(0xd6)]=null,devices[_0x41d1ba]['telegram2FaApproval']=null,devices[_0x41d1ba][_0x330a6b(0xa4)][_0x330a6b(0xd1)]=null,logger[_0x330a6b(0x11e)](_0x330a6b(0xf3)+_0x41d1ba['slice'](-0x8)),io['to'](getClient(_0x3111b2['id'])[_0x330a6b(0xbd)])[_0x330a6b(0xa8)](_0x330a6b(0x1d6),{'access':{'allow':![],'reason':_0x330a6b(0x7f),'token':null}});}else logger[_0x330a6b(0x195)](_0x330a6b(0xee));});}function removeSocketListeners(_0xd8e82f){getClientsWithUuid(_0xd8e82f)['forEach'](_0x4840a5=>{const _0x4ac39f=_0x5288;getSocket(_0x4840a5['id'])[_0x4ac39f(0x1ef)]();});}function cleanSettings(){const _0x11e973=_0x1bee0e;let _0x30d7a6=settings;return settings['telegramToken']&&settings[_0x11e973(0x25d)]!=''&&(_0x30d7a6={..._0x30d7a6,'telegramToken':_0x11e973(0xdf)}),settings['bbPassword']&&settings[_0x11e973(0x91)]!=''&&(_0x30d7a6={..._0x30d7a6,'bbPassword':_0x11e973(0xdf)}),settings[_0x11e973(0x274)]&&settings['marketcapApi']!=''&&(_0x30d7a6={..._0x30d7a6,'marketcapApi':'************'}),(settings['bbPassword']&&settings[_0x11e973(0x91)]=='***'||settings[_0x11e973(0x25d)]&&settings[_0x11e973(0x25d)]=='***'||settings[_0x11e973(0x274)]&&settings[_0x11e973(0x274)]=='***')&&(_0x30d7a6={..._0x30d7a6,'restored':{'password':settings['bbPassword']==_0x11e973(0x18a),'telegram':settings[_0x11e973(0x25d)]==_0x11e973(0x18a),'marketcap':settings[_0x11e973(0x274)]==_0x11e973(0x18a)}}),_0x30d7a6;}async function updateBB(_0x3d031b){const _0xa1e031=_0x1bee0e;await backupConfigFiles(),installingUpdate=!![],config[_0xa1e031(0x265)](_0x2ce99b=>{const _0x3c3891=_0xa1e031;restartBot(_0x2ce99b[_0x3c3891(0x8a)]);});if(_0x3d031b==_0xa1e031(0x144))process[_0xa1e031(0x13d)]({'update':!![],'environment':environment},_0x439e0a=>{});else _0x3d031b==_0xa1e031(0x1f0)&&process[_0xa1e031(0x13d)]({'reinstall':!![],'environment':environment},_0x5146a1=>{});}function startBot(_0x351ca5,_0x2e85b9,_0x39d105){const _0x390bb3=_0x1bee0e;if(debugging)_0x351ca5['push']('-d');let _0x33e972=![];const _0x3e7533=_0x351ca5[0x0];_0x2e85b9={..._0x2e85b9,'stdio':[_0x390bb3(0x10e),'inherit','inherit',_0x390bb3(0x221)]},pid[_0x3e7533]=childProcess[_0x390bb3(0x275)](botfile,_0x351ca5,_0x2e85b9),pid[_0x3e7533]['on'](_0x390bb3(0x1c5),_0x44cecf=>{const _0x4560b2=_0x390bb3;switch(Object[_0x4560b2(0x1a3)](_0x44cecf)[0x0]){case'botname':updateBotName(_0x3e7533,_0x44cecf[_0x4560b2(0xc5)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x3e7533,_0x44cecf['status']);break;case _0x4560b2(0x11f):updateLive(_0x3e7533,_0x44cecf[_0x4560b2(0x11f)]);break;case'started':updateLive(_0x3e7533,_0x44cecf[_0x4560b2(0x240)]),io['to'](_0x3e7533)[_0x4560b2(0xa8)](_0x4560b2(0x1d6),{'access':{'allow':![],'reason':_0x4560b2(0x1b7),'token':null}});break;case'stop':_0x44cecf[_0x4560b2(0x114)]==_0x4560b2(0x1bf)&&restartBot(_0x3e7533);_0x44cecf[_0x4560b2(0x114)]==_0x4560b2(0x1fc)&&toggleBot(_0x3e7533,_0x4560b2(0x19c),_0x4560b2(0x1c6));break;case _0x4560b2(0x238):sendTelegramBot(_0x3e7533,_0x44cecf['telegram']);break;case _0x4560b2(0xb1):sendTelegramMsg(_0x44cecf[_0x4560b2(0xb1)]);break;case _0x4560b2(0x266):io['to'](_0x3e7533)[_0x4560b2(0xa8)](_0x44cecf['function'],_0x44cecf[_0x4560b2(0x96)]);break;}}),pid[_0x3e7533]['on'](_0x390bb3(0x182),function(_0xaf4817){if(_0x33e972)return;_0x33e972=!![],_0x39d105(_0xaf4817);}),pid[_0x3e7533]['on']('exit',async function(_0xdaa12c){const _0x2f1980=_0x390bb3;if(terminating)return;if(installingUpdate){logger['debug']('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io['close']();return;}if(_0x33e972)return;_0x33e972=!![],_0x39d105(null);const _0x265fcb=dbConfig[_0x2f1980(0x215)](_0x2f1980(0x20d))[_0x2f1980(0x13b)]({'botID':_0x3e7533})[_0x2f1980(0x140)]();_0x265fcb&&(_0x265fcb[_0x2f1980(0x1d6)]==_0x2f1980(0xd2)||_0x265fcb['status']=='new')&&(await sleep(0x3e8),updateLive(_0x3e7533,_0x2f1980(0x1c6)),logger['full'](_0x2f1980(0x223)+_0x3e7533),startBot([_0x3e7533,userID],{'cwd':bbpath},function(_0x18123d){const _0x2b03c0=_0x2f1980;if(_0x18123d)logger[_0x2b03c0(0x195)](_0x18123d);}));});}function stopBot(_0x4f05c0){const _0x50a3e0=_0x1bee0e;getClientsWithBotID(_0x4f05c0)['forEach'](_0x1f8e41=>{const _0x4f4889=_0x5288;getSocket(_0x1f8e41['id'])[_0x4f4889(0x13e)](!![]),removeClient(_0x1f8e41['id']);}),pid[_0x4f05c0]&&(pid[_0x4f05c0][_0x50a3e0(0x1fc)](),pid[_0x4f05c0]=null);}function stopAllBots(){const _0x318012=_0x1bee0e;terminating=!![];const _0x553bfd=getEnabledBots();_0x553bfd[_0x318012(0x265)](_0x41b32d=>{const _0x54629c=_0x318012;stopBot(_0x41b32d[_0x54629c(0x8a)]);});}function restartBot(_0x4a4f2d){if(pid[_0x4a4f2d])pid[_0x4a4f2d]['kill']();}function addBot(){const _0x239ae7=_0x1bee0e;let _0x11cad5;for(let _0x4ed52c=0x1;_0x4ed52c<0x3e9;_0x4ed52c++){_0x11cad5=_0x4ed52c[_0x239ae7(0x228)]()[_0x239ae7(0x1b9)](0x3,'0');let _0x47ad54=config['find'](_0x3413a3=>_0x3413a3['botID']==_0x11cad5);if(!_0x47ad54)break;}if(_0x11cad5===_0x239ae7(0x1d9)){logger[_0x239ae7(0x195)](_0x239ae7(0x139));return;}logger[_0x239ae7(0x195)](_0x239ae7(0x16d)+_0x11cad5),dbConfig['get']('bots')[_0x239ae7(0x1ae)]({'botID':_0x11cad5,'botname':_0x239ae7(0x219)+_0x11cad5,'status':_0x239ae7(0x149),'live':''})[_0x239ae7(0x8b)](),startBot([_0x11cad5,userID],{'cwd':bbpath},function(_0x113871){if(_0x113871)logger['full'](_0x113871);}),config=getConfiguration(),io['to']('botmanager')[_0x239ae7(0xa8)](_0x239ae7(0x20d),config),broadcastToBots(_0x239ae7(0x20d),JSON[_0x239ae7(0xec)](config));}function deleteBot(_0x37b9dd){const _0x84ea8e=_0x1bee0e;getClientsWithBotID(_0x37b9dd)[_0x84ea8e(0x265)](_0xb6a786=>{const _0x3890b1=_0x84ea8e;getSocket(_0xb6a786['id'])[_0x3890b1(0x13e)](!![]),removeClient(_0xb6a786['id']);}),dbConfig['get'](_0x84ea8e(0x20d))[_0x84ea8e(0x14a)]({'botID':_0x37b9dd})[_0x84ea8e(0x8b)](),logger[_0x84ea8e(0x195)](_0x84ea8e(0xd3)+_0x37b9dd),stopBot(_0x37b9dd);try{if(fs[_0x84ea8e(0xe4)](path[_0x84ea8e(0x7b)](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0xc0))))fs['unlinkSync'](path[_0x84ea8e(0x7b)](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0xc0)));if(fs[_0x84ea8e(0xe4)](path[_0x84ea8e(0x7b)](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0x23e))))fs['unlinkSync'](path[_0x84ea8e(0x7b)](configpath,_0x84ea8e(0x6e)+_0x37b9dd+_0x84ea8e(0x23e)));if(fs[_0x84ea8e(0xe4)](path['join'](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0xe1))))fs[_0x84ea8e(0x1dd)](path[_0x84ea8e(0x7b)](configpath,_0x84ea8e(0x6e)+_0x37b9dd+_0x84ea8e(0xe1)));if(fs[_0x84ea8e(0xe4)](path[_0x84ea8e(0x7b)](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0x16a))))fs[_0x84ea8e(0x1dd)](path['join'](configpath,'bot-'+_0x37b9dd+_0x84ea8e(0x16a)));}catch(_0x20c48f){if(_0x20c48f)logger['full'](_0x84ea8e(0x187),_0x20c48f);}config=getConfiguration(),io['to'](_0x84ea8e(0x1e2))[_0x84ea8e(0xa8)](_0x84ea8e(0x20d),config),broadcastToBots('bots',JSON[_0x84ea8e(0xec)](config));}function toggleBot(_0xd147f,_0x1e3249,_0x5b22db){const _0x2927d2=_0x1bee0e;dbConfig[_0x2927d2(0x215)]('bots')[_0x2927d2(0x13b)]({'botID':_0xd147f})[_0x2927d2(0xb6)]({'status':_0x1e3249})[_0x2927d2(0xb6)]({'live':_0x5b22db})['write']();if(_0x1e3249==_0x2927d2(0xd2)||_0x1e3249=='new')logger[_0x2927d2(0x195)](_0x2927d2(0x14e)+_0xd147f),startBot([_0xd147f,userID],{'cwd':bbpath},function(_0x42acf9){const _0xa5a653=_0x2927d2;if(_0x42acf9)logger[_0xa5a653(0x195)](_0x42acf9);});else(_0x1e3249==_0x2927d2(0x19c)||_0x1e3249==_0x2927d2(0x1e0))&&(logger[_0x2927d2(0x195)]('Disabled\x20Bot\x20'+_0xd147f),stopBot(_0xd147f));config=getConfiguration(),io['to']('botmanager')[_0x2927d2(0xa8)](_0x2927d2(0x20d),config),broadcastToBots(_0x2927d2(0x20d),JSON[_0x2927d2(0xec)](config));}function toggleStatus(_0x2375ba){const _0x11854a=_0x1bee0e;let _0x2b59f5=dbConfig[_0x11854a(0x215)](_0x11854a(0x20d))[_0x11854a(0x13b)]({'botID':_0x2375ba})[_0x11854a(0x140)](),_0x10bc0b;if(_0x2b59f5[_0x11854a(0x1d6)]===_0x11854a(0xd2))_0x10bc0b=_0x11854a(0x19c);else{if(_0x2b59f5[_0x11854a(0x1d6)]==='new')_0x10bc0b=_0x11854a(0x1e0);else{if(_0x2b59f5['status']==='new-disabled')_0x10bc0b=_0x11854a(0x149);else{if(_0x2b59f5[_0x11854a(0x1d6)]===_0x11854a(0x19c))_0x10bc0b=_0x11854a(0xd2);}}}return _0x10bc0b;}function updateStatus(_0x5972b1,_0x295d3e){const _0x13d46e=_0x1bee0e;dbConfig[_0x13d46e(0x215)](_0x13d46e(0x20d))[_0x13d46e(0x13b)]({'botID':_0x5972b1})[_0x13d46e(0xb6)]({'status':_0x295d3e})[_0x13d46e(0x8b)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x13d46e(0x20d),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x330bfb,_0x320b99){const _0x1166db=_0x1bee0e;dbConfig[_0x1166db(0x215)]('bots')[_0x1166db(0x13b)]({'botID':_0x330bfb})[_0x1166db(0xb6)]({'live':_0x320b99})['write'](),config=getConfiguration(),io['to'](_0x1166db(0x1e2))[_0x1166db(0xa8)](_0x1166db(0x20d),config),broadcastToBots('bots',JSON[_0x1166db(0xec)](config));}function updateBotName(_0x59f30f,_0x10b55f){const _0x904095=_0x1bee0e;dbConfig[_0x904095(0x215)](_0x904095(0x20d))[_0x904095(0x13b)]({'botID':_0x59f30f})[_0x904095(0xb6)]({'botname':_0x10b55f})['write'](),config=getConfiguration(),io['to'](_0x904095(0x1e2))[_0x904095(0xa8)](_0x904095(0x20d),config),broadcastToBots(_0x904095(0x20d),JSON[_0x904095(0xec)](config));}function updateBotManager(){const _0x4bcbd9=_0x1bee0e;config=getConfiguration(),io['to'](_0x4bcbd9(0x1e2))['emit']('bots',config),broadcastToBots(_0x4bcbd9(0x20d),JSON[_0x4bcbd9(0xec)](config));}function toggleBotMode(_0x53dc99){const _0x4818c9=_0x1bee0e;if(pid[_0x53dc99])pid[_0x53dc99][_0x4818c9(0x13d)]({'function':_0x4818c9(0x1d7),'args':null});else{const _0x3ee63d=configpath+_0x4818c9(0x6e)+_0x53dc99+_0x4818c9(0xc0),_0xff7be7=fs[_0x4818c9(0x204)](_0x3ee63d),_0x3b2c15=JSON[_0x4818c9(0x18b)](_0xff7be7),_0x1d7e26=_0x3b2c15[_0x4818c9(0x102)][0x0][_0x4818c9(0xa2)];_0x3b2c15['bot'][0x0][_0x4818c9(0xa2)]=!_0x1d7e26;const _0x21c9c9=JSON[_0x4818c9(0xec)](_0x3b2c15,null,0x2);fs[_0x4818c9(0x94)](_0x3ee63d,_0x21c9c9),config=getConfiguration(),io['to'](_0x4818c9(0x1e2))[_0x4818c9(0xa8)]('bots',config),broadcastToBots(_0x4818c9(0x20d),JSON[_0x4818c9(0xec)](config));}}function validateTelegram(_0x36553a){const _0x30c388=_0x1bee0e;if(_0x36553a[_0x30c388(0x12f)][_0x30c388(0xff)]!=settings[_0x30c388(0x99)]&&'@'+_0x36553a['from'][_0x30c388(0xff)]!=settings['telegramUsername']||_0x36553a[_0x30c388(0x1ca)]['id']!=settings[_0x30c388(0x172)])return sendTelegram(_0x36553a[_0x30c388(0x1ca)]['id'],_0x30c388(0x1c0),{'parse_mode':_0x30c388(0xe6)}),![];return!![];}async function initTelegram(){const _0x1db4f0=_0x1bee0e;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x1db4f0(0x25d)]);let _0xb3ae7e=_0x1db4f0(0x92);_0xb3ae7e+='\x0a',_0xb3ae7e+=_0x1db4f0(0x122),_0xb3ae7e+=_0x1db4f0(0x8c),_0xb3ae7e+=_0x1db4f0(0x14f),_0xb3ae7e+=_0x1db4f0(0x245),_0xb3ae7e+=_0x1db4f0(0x26b),_0xb3ae7e+=_0x1db4f0(0xf5),_0xb3ae7e+=_0x1db4f0(0x173),_0xb3ae7e+=_0x1db4f0(0x86),_0xb3ae7e+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0xb3ae7e+=_0x1db4f0(0x183),_0xb3ae7e+=_0x1db4f0(0x133),_0xb3ae7e+=_0x1db4f0(0xc3),_0xb3ae7e+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0xb3ae7e+=_0x1db4f0(0x1af);let _0x1c7064='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x1c7064+='\x0a',_0x1c7064+=_0xb3ae7e,tgBot[_0x1db4f0(0x202)]((_0x31b494,_0x4358b2)=>{const _0x2e79a5=_0x1db4f0;logger[_0x2e79a5(0x1f5)](getTimeStamp()+_0x2e79a5(0xdc)),logger[_0x2e79a5(0x11e)](_0x2e79a5(0x9a),_0x31b494);}),tgBot['use'](async(_0x3192c6,_0x15d61d)=>{const _0xbba86f=_0x1db4f0;if(!(!settings['telegramChatId']&&_0x3192c6[_0xbba86f(0x144)][_0xbba86f(0x1c5)][_0xbba86f(0xa9)]=='/start')){if(!validateTelegram(_0x3192c6))return;}_0x15d61d();}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x22d),async _0x5a9617=>{const _0x47a2bc=_0x1db4f0;if(!settings[_0x47a2bc(0x172)])updateSetting(_0x47a2bc(0x172),_0x5a9617['chat']['id']);updateSetting(_0x47a2bc(0x1f6),!![]);if(!validateTelegram(_0x5a9617))return;await sendTelegram(_0x5a9617[_0x47a2bc(0x1ca)]['id'],_0x1c7064);}),tgBot[_0x1db4f0(0xf1)]('enable',async _0x5ecba1=>{const _0x4397fd=_0x1db4f0;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5ecba1[_0x4397fd(0x1ca)]['id'],_0x4397fd(0xdb));}),tgBot[_0x1db4f0(0xf1)]('disable',async _0x34f395=>{const _0x5149ed=_0x1db4f0;await sendTelegram(_0x34f395[_0x5149ed(0x1ca)]['id'],_0x5149ed(0x200)),updateSetting(_0x5149ed(0x1f6),![]);}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x83),async _0x5e990a=>{const _0x2c2516=_0x1db4f0,_0x2a9350=Markup['inlineKeyboard']([Markup[_0x2c2516(0x201)]['callback'](_0x2c2516(0x155),_0x2c2516(0x21a)),Markup[_0x2c2516(0x201)][_0x2c2516(0x18f)]('Alerts',_0x2c2516(0xa1)),Markup[_0x2c2516(0x201)][_0x2c2516(0x18f)](_0x2c2516(0xb7),_0x2c2516(0x108))]);_0x5e990a[_0x2c2516(0x179)](_0x2c2516(0x19a),_0x2a9350);}),tgBot['action'](_0x1db4f0(0x21a),async _0x3da790=>{const _0x2e5f76=_0x1db4f0;_0x3da790[_0x2e5f76(0x1e3)](),updateSetting(_0x2e5f76(0x269),_0x2e5f76(0x117)),updateSetting(_0x2e5f76(0x1f6),!![]),await sendTelegram(_0x3da790[_0x2e5f76(0x1ca)]['id'],_0x2e5f76(0x89));}),tgBot[_0x1db4f0(0x230)](_0x1db4f0(0xa1),async _0x8e822e=>{const _0x1f7001=_0x1db4f0;_0x8e822e[_0x1f7001(0x1e3)](),updateSetting(_0x1f7001(0x269),_0x1f7001(0x109)),updateSetting(_0x1f7001(0x1f6),!![]),await sendTelegram(_0x8e822e[_0x1f7001(0x1ca)]['id'],_0x1f7001(0x255));}),tgBot[_0x1db4f0(0x230)](_0x1db4f0(0x108),async _0x388644=>{const _0x41f0f5=_0x1db4f0;_0x388644[_0x41f0f5(0x1e3)](),updateSetting(_0x41f0f5(0x269),_0x41f0f5(0x147)),updateSetting(_0x41f0f5(0x1f6),!![]),await sendTelegram(_0x388644[_0x41f0f5(0x1ca)]['id'],_0x41f0f5(0x1c7));}),tgBot[_0x1db4f0(0xf1)]('status',async _0x292c47=>{const _0x491d7a=_0x1db4f0,_0x5dcc9e=getBotsWithMode();let _0x55fb0c=_0x491d7a(0x11c);config[_0x491d7a(0x265)](_0x26d6f1=>{const _0x4af4a7=_0x491d7a,_0x4ac1ca=_0x5dcc9e[_0x4af4a7(0x13b)](_0x374f40=>_0x374f40[_0x4af4a7(0x8a)]==_0x26d6f1[_0x4af4a7(0x8a)])[_0x4af4a7(0x1fd)];_0x55fb0c+=_0x4af4a7(0x219)+_0x26d6f1['botID']+':\x20'+_0x26d6f1['status']+'\x20|\x20'+_0x4ac1ca+_0x4af4a7(0x77)+_0x26d6f1[_0x4af4a7(0x11f)]+'\x0a';}),_0x55fb0c+='\x0a',_0x55fb0c+=_0x491d7a(0x1cc),_0x55fb0c+=!settings[_0x491d7a(0x1f6)]?_0x491d7a(0x73):_0x491d7a(0x218),_0x55fb0c+=settings[_0x491d7a(0x1f6)]?settings[_0x491d7a(0x269)]==_0x491d7a(0x147)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x491d7a(0x269)]+'\x20only\x0a':'',await sendTelegram(_0x292c47[_0x491d7a(0x1ca)]['id'],_0x55fb0c,{'parse_mode':_0x491d7a(0xe6)});}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x1bf),async _0x28e216=>{const _0x3840d9=_0x1db4f0,_0x4c48d0=getEnabledBots();if(_0x4c48d0[_0x3840d9(0x150)]==0x0)await sendTelegram(_0x28e216[_0x3840d9(0x1ca)]['id'],_0x3840d9(0x142));else{if(_0x4c48d0[_0x3840d9(0x150)]>0x1)_0x4c48d0['push']({'botID':_0x3840d9(0x147)});let _0x3eb42=[],_0x59a0f4=[];const _0xb5ab64=_0x4c48d0[_0x3840d9(0x150)]%0x4==0x0||_0x4c48d0[_0x3840d9(0x150)]%0x4==0x3||_0x4c48d0['length']%0x3==0x1?0x4:0x3;let _0x3d957d=0x0;_0x4c48d0[_0x3840d9(0x265)]((_0x5eb7a0,_0x2348db)=>{const _0x3f432f=_0x3840d9;if(_0x2348db%_0xb5ab64==0x0)_0x59a0f4=[];_0x59a0f4[_0x3f432f(0x1ae)](Markup[_0x3f432f(0x201)]['callback'](_0x5eb7a0[_0x3f432f(0x8a)]==_0x3f432f(0x147)?'All\x20bots':_0x3f432f(0x219)+_0x5eb7a0[_0x3f432f(0x8a)],'restart_'+_0x5eb7a0[_0x3f432f(0x8a)])),_0x2348db%_0xb5ab64==0x0&&(_0x3eb42[_0x3d957d]=_0x59a0f4,_0x3d957d++);});const _0x23cb1f=Markup[_0x3840d9(0x9e)](_0x3eb42);_0x28e216['reply'](_0x3840d9(0xbf),_0x23cb1f);}}),tgBot[_0x1db4f0(0x230)](/restart_(.+)/,async _0x2eea27=>{const _0xb99952=_0x1db4f0,_0x41d93d=_0x2eea27[_0xb99952(0x100)][0x1];_0x2eea27[_0xb99952(0x1e3)](),_0x41d93d==_0xb99952(0x147)?config[_0xb99952(0x265)](_0x415af=>{const _0x11beb8=_0xb99952;restartBot(_0x415af[_0x11beb8(0x8a)]);}):restartBot(_0x41d93d);}),tgBot[_0x1db4f0(0xf1)]('on',async _0x2dd170=>{const _0x5dc4ab=_0x1db4f0,_0x257972=getDisabledBots();if(_0x257972['length']==0x0)await sendTelegram(_0x2dd170['chat']['id'],_0x5dc4ab(0xce));else{if(_0x257972[_0x5dc4ab(0x150)]>0x1)_0x257972['push']({'botID':_0x5dc4ab(0x147)});let _0x1f5802=[],_0x4770c9=[];const _0x2ad49e=_0x257972[_0x5dc4ab(0x150)]%0x4==0x0||_0x257972[_0x5dc4ab(0x150)]%0x4==0x3||_0x257972['length']%0x3==0x1?0x4:0x3;let _0x207859=0x0;_0x257972[_0x5dc4ab(0x265)]((_0x378214,_0x469301)=>{const _0x1b7a89=_0x5dc4ab;if(_0x469301%_0x2ad49e==0x0)_0x4770c9=[];_0x4770c9[_0x1b7a89(0x1ae)](Markup[_0x1b7a89(0x201)][_0x1b7a89(0x18f)](_0x378214[_0x1b7a89(0x8a)]==_0x1b7a89(0x147)?_0x1b7a89(0x14b):_0x1b7a89(0x219)+_0x378214[_0x1b7a89(0x8a)],_0x1b7a89(0x24c)+_0x378214[_0x1b7a89(0x8a)])),_0x469301%_0x2ad49e==0x0&&(_0x1f5802[_0x207859]=_0x4770c9,_0x207859++);});const _0xfd364c=Markup[_0x5dc4ab(0x9e)](_0x1f5802);_0x2dd170[_0x5dc4ab(0x179)](_0x5dc4ab(0x1ab),_0xfd364c);}}),tgBot[_0x1db4f0(0x230)](/on_(.+)/,async _0xaa668b=>{const _0x3568c3=_0x1db4f0,_0x43928a=_0xaa668b[_0x3568c3(0x100)][0x1];_0xaa668b['editMessageReplyMarkup']();if(_0x43928a==_0x3568c3(0x147)){const _0x38dfc1=getDisabledBots();await sendTelegram(_0xaa668b[_0x3568c3(0x1ca)]['id'],_0x3568c3(0x15c)),_0x38dfc1['forEach'](_0x37dbf2=>{const _0x17962a=_0x3568c3;if(_0x37dbf2['botID']!=_0x17962a(0x147))toggleBot(_0x37dbf2['botID'],toggleStatus(_0x37dbf2['botID']),_0x17962a(0x1c6));});}else await sendTelegram(_0xaa668b[_0x3568c3(0x1ca)]['id'],_0x3568c3(0x12e)+_0x43928a),toggleBot(_0x43928a,toggleStatus(_0x43928a),'stopped');}),tgBot['command']('off',async _0x286152=>{const _0x4df98d=_0x1db4f0,_0x56fe81=getEnabledBots();if(_0x56fe81[_0x4df98d(0x150)]==0x0)await sendTelegram(_0x286152['chat']['id'],_0x4df98d(0x142));else{if(_0x56fe81[_0x4df98d(0x150)]>0x1)_0x56fe81[_0x4df98d(0x1ae)]({'botID':_0x4df98d(0x147)});let _0x37f7b1=[],_0x822338=[];const _0x29c5e0=_0x56fe81[_0x4df98d(0x150)]%0x4==0x0||_0x56fe81[_0x4df98d(0x150)]%0x4==0x3||_0x56fe81[_0x4df98d(0x150)]%0x3==0x1?0x4:0x3;let _0x48b133=0x0;_0x56fe81['forEach']((_0x1ef0a6,_0x2d267b)=>{const _0x1f4a5c=_0x4df98d;if(_0x2d267b%_0x29c5e0==0x0)_0x822338=[];_0x822338[_0x1f4a5c(0x1ae)](Markup['button']['callback'](_0x1ef0a6['botID']==_0x1f4a5c(0x147)?_0x1f4a5c(0x14b):_0x1f4a5c(0x219)+_0x1ef0a6[_0x1f4a5c(0x8a)],_0x1f4a5c(0x17d)+_0x1ef0a6[_0x1f4a5c(0x8a)])),_0x2d267b%_0x29c5e0==0x0&&(_0x37f7b1[_0x48b133]=_0x822338,_0x48b133++);});const _0x2fe17f=Markup[_0x4df98d(0x9e)](_0x37f7b1);_0x286152[_0x4df98d(0x179)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x2fe17f);}}),tgBot[_0x1db4f0(0x230)](/off_(.+)/,async _0x122837=>{const _0x46d033=_0x1db4f0,_0x226cdc=_0x122837[_0x46d033(0x100)][0x1];_0x122837['editMessageReplyMarkup']();if(_0x226cdc=='all'){const _0x31657c=getEnabledBots();await sendTelegram(_0x122837[_0x46d033(0x1ca)]['id'],_0x46d033(0x106)),_0x31657c['forEach'](_0x2dbe90=>{const _0x5e388c=_0x46d033;if(_0x2dbe90[_0x5e388c(0x8a)]!=_0x5e388c(0x147))toggleBot(_0x2dbe90[_0x5e388c(0x8a)],toggleStatus(_0x2dbe90[_0x5e388c(0x8a)]),_0x5e388c(0x1c6));});}else await sendTelegram(_0x122837[_0x46d033(0x1ca)]['id'],_0x46d033(0xf2)+_0x226cdc),toggleBot(_0x226cdc,toggleStatus(_0x226cdc),_0x46d033(0x1c6));}),tgBot['command']('metrics',async _0xdc4b23=>{const _0x27a26f=_0x1db4f0,_0x43e134=getEnabledBots();if(_0x43e134['length']==0x0)await sendTelegram(_0xdc4b23['chat']['id'],_0x27a26f(0x142));else{if(_0x43e134[_0x27a26f(0x150)]>0x1){let _0x133ade=[],_0x33a018=[];const _0x112df6=_0x43e134[_0x27a26f(0x150)]%0x4==0x0||_0x43e134['length']%0x4==0x3||_0x43e134['length']%0x3==0x1?0x4:0x3;let _0x5c7100=0x0;_0x43e134['forEach']((_0x23f3f5,_0x5cd3d7)=>{const _0x3b2bfe=_0x27a26f;if(_0x5cd3d7%_0x112df6==0x0)_0x33a018=[];_0x33a018['push'](Markup['button'][_0x3b2bfe(0x18f)](_0x3b2bfe(0x219)+_0x23f3f5[_0x3b2bfe(0x8a)],_0x3b2bfe(0x24a)+_0x23f3f5[_0x3b2bfe(0x8a)])),_0x5cd3d7%_0x112df6==0x0&&(_0x133ade[_0x5c7100]=_0x33a018,_0x5c7100++);});const _0x2bc82f=Markup[_0x27a26f(0x9e)](_0x133ade);_0xdc4b23['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x2bc82f);}else{const _0x5076cd=_0x43e134[0x0][_0x27a26f(0x8a)];if(pid[_0x5076cd])pid[_0x5076cd][_0x27a26f(0x13d)]({'function':_0x27a26f(0x162),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x351c6c=>{const _0x2c20df=_0x1db4f0,_0x787f74=_0x351c6c[_0x2c20df(0x100)][0x1];_0x351c6c[_0x2c20df(0x1e3)]();if(pid[_0x787f74])pid[_0x787f74]['send']({'function':_0x2c20df(0x162),'args':null});}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x26e),async _0x26abc4=>{const _0x4f9683=_0x1db4f0,_0x123af8=getEnabledBots();if(_0x123af8[_0x4f9683(0x150)]==0x0)await sendTelegram(_0x26abc4[_0x4f9683(0x1ca)]['id'],_0x4f9683(0x142));else{if(_0x123af8[_0x4f9683(0x150)]>0x1){let _0x403b9a=[],_0x4da8df=[];const _0x141f7f=_0x123af8[_0x4f9683(0x150)]%0x4==0x0||_0x123af8['length']%0x4==0x3||_0x123af8[_0x4f9683(0x150)]%0x3==0x1?0x4:0x3;let _0x3986e9=0x0;_0x123af8[_0x4f9683(0x265)]((_0x5831b2,_0x26e0e0)=>{const _0x5839ef=_0x4f9683;if(_0x26e0e0%_0x141f7f==0x0)_0x4da8df=[];_0x4da8df[_0x5839ef(0x1ae)](Markup['button'][_0x5839ef(0x18f)](_0x5839ef(0x219)+_0x5831b2[_0x5839ef(0x8a)],_0x5839ef(0x271)+_0x5831b2[_0x5839ef(0x8a)])),_0x26e0e0%_0x141f7f==0x0&&(_0x403b9a[_0x3986e9]=_0x4da8df,_0x3986e9++);});const _0x34fdd6=Markup[_0x4f9683(0x9e)](_0x403b9a);_0x26abc4[_0x4f9683(0x179)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x34fdd6);}else{const _0x13d644=_0x123af8[0x0][_0x4f9683(0x8a)];if(pid[_0x13d644])pid[_0x13d644][_0x4f9683(0x13d)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x1db4f0(0x230)](/portfolio_(.+)/,async _0x5e4f85=>{const _0x5a14a2=_0x1db4f0,_0x424404=_0x5e4f85[_0x5a14a2(0x100)][0x1];_0x5e4f85[_0x5a14a2(0x1e3)]();if(pid[_0x424404])pid[_0x424404][_0x5a14a2(0x13d)]({'function':_0x5a14a2(0x8f),'args':null});}),tgBot[_0x1db4f0(0xf1)]('update',async _0xa277ad=>{const _0x3e92f0=_0x1db4f0;await getMessages();if(!updateAvailable)await sendTelegram(_0xa277ad[_0x3e92f0(0x1ca)]['id'],_0x3e92f0(0xea));else{if(!validInstallation)await sendTelegram(_0xa277ad[_0x3e92f0(0x1ca)]['id'],_0x3e92f0(0xfd));else{const _0x30b0ee=Markup[_0x3e92f0(0x9e)]([Markup[_0x3e92f0(0x201)][_0x3e92f0(0x18f)]('Yes',_0x3e92f0(0x22e)),Markup[_0x3e92f0(0x201)]['callback']('No',_0x3e92f0(0x181))]);_0xa277ad['reply'](_0x3e92f0(0x138),_0x30b0ee);}}}),tgBot[_0x1db4f0(0x230)](/update_(.+)/,async _0x5abefc=>{const _0x28819b=_0x1db4f0,_0x3d7d53=_0x5abefc[_0x28819b(0x100)][0x1];_0x5abefc[_0x28819b(0x1e3)](),_0x3d7d53==_0x28819b(0x15d)&&(await sendTelegram(_0x5abefc[_0x28819b(0x1ca)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x28819b(0x144))),_0x3d7d53=='no'&&await sendTelegram(_0x5abefc[_0x28819b(0x1ca)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x1f0),async _0xadf19b=>{const _0x2ce7a7=_0x1db4f0;if(!validInstallation)await sendTelegram(_0xadf19b[_0x2ce7a7(0x1ca)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x46a856=Markup['inlineKeyboard']([Markup[_0x2ce7a7(0x201)][_0x2ce7a7(0x18f)](_0x2ce7a7(0x18c),_0x2ce7a7(0x157)),Markup[_0x2ce7a7(0x201)][_0x2ce7a7(0x18f)]('No',_0x2ce7a7(0x232))]);_0xadf19b[_0x2ce7a7(0x179)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x46a856);}}),tgBot[_0x1db4f0(0x230)](/reinstall_(.+)/,async _0x5b425c=>{const _0x3d17fc=_0x1db4f0,_0x79e3af=_0x5b425c[_0x3d17fc(0x100)][0x1];_0x5b425c[_0x3d17fc(0x1e3)](),_0x79e3af=='yes'&&(await sendTelegram(_0x5b425c[_0x3d17fc(0x1ca)]['id'],_0x3d17fc(0x1ec)),updateBB('reinstall')),_0x79e3af=='no'&&await sendTelegram(_0x5b425c[_0x3d17fc(0x1ca)]['id'],_0x3d17fc(0x156));}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0x7e),async _0x52c381=>{const _0x41dd02=_0x1db4f0,_0x59c11f=getBotsWithMode();if(_0x59c11f[_0x41dd02(0x150)]==0x0)await sendTelegram(_0x52c381[_0x41dd02(0x1ca)]['id'],_0x41dd02(0x142));else{let _0x266651=[],_0x156c86=[];const _0xcf1807=0x2;let _0x260635=0x0;_0x59c11f['forEach']((_0x33836c,_0x38c27a)=>{const _0x5eccc0=_0x41dd02;if(_0x38c27a%_0xcf1807==0x0)_0x156c86=[];_0x156c86[_0x5eccc0(0x1ae)](Markup[_0x5eccc0(0x201)][_0x5eccc0(0x18f)]('Bot\x20'+_0x33836c[_0x5eccc0(0x8a)]+'\x20('+_0x33836c[_0x5eccc0(0x1fd)]+')',_0x5eccc0(0x193)+_0x33836c[_0x5eccc0(0x8a)])),_0x38c27a%_0xcf1807==0x0&&(_0x266651[_0x260635]=_0x156c86,_0x260635++);});const _0x1e9ffb=Markup[_0x41dd02(0x9e)](_0x266651);_0x52c381[_0x41dd02(0x179)](_0x41dd02(0x262),_0x1e9ffb);}}),tgBot['action'](/toggle_(.+)/,async _0x39227c=>{const _0x2f45d1=_0x1db4f0,_0x42885d=_0x39227c[_0x2f45d1(0x100)][0x1];_0x39227c['editMessageReplyMarkup']();const _0xd44ad1=getBotsWithMode(),_0x169201=_0xd44ad1[_0x2f45d1(0x13b)](_0xd3d9e=>_0xd3d9e[_0x2f45d1(0x8a)]==_0x42885d),_0x5c7ae9=_0x169201['mode']==_0x2f45d1(0xd9)?_0x2f45d1(0x118):_0x2f45d1(0xd9);await sendTelegram(_0x39227c[_0x2f45d1(0x1ca)]['id'],_0x2f45d1(0xe9)+_0x42885d+_0x2f45d1(0x16f)+_0x5c7ae9+_0x2f45d1(0x16e)),toggleBotMode(_0x42885d);}),tgBot[_0x1db4f0(0xf1)](_0x1db4f0(0xba),async _0x44224b=>{const _0x422739=_0x1db4f0;let _0x50a4e7='';config[_0x422739(0x265)](_0x27f479=>{const _0x29b6d6=_0x422739;_0x50a4e7+=_0x29b6d6(0x219)+_0x27f479[_0x29b6d6(0x8a)]+':\x20'+_0x27f479[_0x29b6d6(0xc5)]+'\x0a';}),await sendTelegram(_0x44224b[_0x422739(0x1ca)]['id'],_0x50a4e7,{'parse_mode':_0x422739(0xe6)});}),tgBot['command']('help',async _0x122e2d=>{const _0x2a00b7=_0x1db4f0;await sendTelegram(_0x122e2d[_0x2a00b7(0x1ca)]['id'],_0xb3ae7e);}),process[_0x1db4f0(0x211)](_0x1db4f0(0x141),()=>tgBot[_0x1db4f0(0x114)](_0x1db4f0(0x141))),process[_0x1db4f0(0x211)]('SIGTERM',()=>tgBot[_0x1db4f0(0x114)](_0x1db4f0(0x203))),tgBot[_0x1db4f0(0x21c)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x8240f3,_0x423765,_0x543510){const _0x167516=_0x1bee0e;_0x543510={..._0x543510,'disable_web_page_preview':!![]};try{await tgBot[_0x167516(0x238)][_0x167516(0x260)](_0x8240f3,_0x423765,_0x543510);}catch(_0x2bb3e0){console[_0x167516(0xfe)](_0x167516(0x26a),_0x2bb3e0);}}async function sendTelegramBot(_0x10ae67,_0x59bd8e){const _0x59d85f=_0x1bee0e;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x59d85f(0x147)||(_0x59bd8e[_0x59d85f(0x11b)]==_0x59d85f(0x182)||_0x59bd8e['type']==_0x59d85f(0x90)||_0x59bd8e[_0x59d85f(0x11b)]==_0x59d85f(0xaf))&&settings['telegramEvents']==_0x59d85f(0x109)||_0x59bd8e[_0x59d85f(0x11b)]==_0x59d85f(0xe8)&&settings['telegramEvents']==_0x59d85f(0x117)){if(tgBot&&settings[_0x59d85f(0x172)]){if(_0x59bd8e[_0x59d85f(0x121)])await sendTelegram(settings[_0x59d85f(0x172)],_0x59bd8e[_0x59d85f(0xc5)]+'\x20>\x20'+_0x59bd8e[_0x59d85f(0x1cb)]);else await sendTelegram(settings[_0x59d85f(0x172)],_0x59d85f(0x219)+_0x10ae67+_0x59d85f(0x104)+_0x59bd8e[_0x59d85f(0x1cb)]);}}}}async function sendTelegramMsg(_0xf90434,_0x3abf0b=_0x1bee0e(0xe6)){const _0x48783f=_0x1bee0e;return settings[_0x48783f(0x1f6)]&&tgBot&&settings[_0x48783f(0x172)]?(await sendTelegram(settings[_0x48783f(0x172)],_0xf90434,{'parse_mode':_0x3abf0b}),!![]):![];}function _0x5288(_0x2f8b75,_0x3e4813){const _0x3a3390=_0x36f4();return _0x5288=function(_0x4e84c9,_0xe0f39a){_0x4e84c9=_0x4e84c9-0x6c;let _0x36f42c=_0x3a3390[_0x4e84c9];return _0x36f42c;},_0x5288(_0x2f8b75,_0x3e4813);}function getDeviceWithIp(_0x2110d1){return devices['find'](_0x5d4a31=>_0x5d4a31['ip']===_0x2110d1);}async function temporaryAccess2FA(_0x2bfdab,_0x476c68){const _0x151ba2=_0x1bee0e;let _0x4e94a4=new Date(),_0xda048e=![];if(lastIpApproval){if(_0x4e94a4-lastIpApproval<0x1388)_0xda048e=!![];}lastIpApproval=new Date();if(_0xda048e)return;if(tgBot&&settings[_0x151ba2(0x172)]){const _0x2cb41a=uuidRandom();tmpStorage[_0x2cb41a]={'uuid':_0x2bfdab,'externalip':_0x476c68};const _0x4ee6f3=Markup[_0x151ba2(0x9e)]([Markup[_0x151ba2(0x201)][_0x151ba2(0x18f)](_0x151ba2(0x1cd),_0x151ba2(0x1f1)+_0x2cb41a),Markup[_0x151ba2(0x201)]['callback'](_0x151ba2(0xd4),_0x151ba2(0x25e)+_0x2cb41a),Markup[_0x151ba2(0x201)][_0x151ba2(0x18f)](_0x151ba2(0xbb),_0x151ba2(0x25b)+_0x2cb41a),Markup[_0x151ba2(0x201)][_0x151ba2(0x18f)](_0x151ba2(0x272),_0x151ba2(0x233)+_0x2cb41a)]);await sendTelegram(settings[_0x151ba2(0x172)],_0x151ba2(0x1f9)+normalizeIP(_0x476c68)['show']+'\x20?',_0x4ee6f3),tgBot[_0x151ba2(0x230)](/tempaccess_(.+)_(.+)/,async _0x5124f2=>{const _0x4b3d11=_0x151ba2,_0x213402=_0x5124f2['match'][0x1],_0x2e7db3=_0x5124f2[_0x4b3d11(0x100)][0x2],{uuid:_0xccd465,externalip:_0x5d40ad}=tmpStorage[_0x2e7db3];delete tmpStorage[_0x2e7db3],_0x5124f2[_0x4b3d11(0x1e3)](),devices[_0xccd465]['telegramIpApproval']={'clientip':_0x5d40ad,'timestamp':new Date()[_0x4b3d11(0xe7)](),'expiry':_0x213402},_0x213402!=_0x4b3d11(0x272)?(await sendTelegram(_0x5124f2['chat']['id'],_0x4b3d11(0x1b8)+_0x213402+'\x20minutes',{'parse_mode':_0x4b3d11(0xe6)}),io['to'](_0xccd465)[_0x4b3d11(0xa8)]('status',{'access':{'allow':![],'reason':_0x4b3d11(0x1b7),'token':null}})):(await sendTelegram(_0x5124f2['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0xccd465)[_0x4b3d11(0xa8)](_0x4b3d11(0x1d6),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x337108,_0x253401){const _0x5dc95e=_0x1bee0e;if(tgBot&&settings['telegramChatId']){const _0x3b78c2=uuidRandom();tmpStorage[_0x3b78c2]={'uuid':_0x337108,'externalip':_0x253401};const _0x5a3686=Markup[_0x5dc95e(0x9e)]([Markup[_0x5dc95e(0x201)][_0x5dc95e(0x18f)](_0x5dc95e(0x190),'login2fa_'+loginExpiry+'_'+_0x3b78c2),Markup[_0x5dc95e(0x201)][_0x5dc95e(0x18f)]('reject',_0x5dc95e(0x6f)+_0x3b78c2)]);await sendTelegram(settings[_0x5dc95e(0x172)],_0x5dc95e(0x208)+normalizeIP(_0x253401)[_0x5dc95e(0x196)]+'\x20?',_0x5a3686),tgBot[_0x5dc95e(0x230)](/login2fa_(.+)_(.+)/,async _0x45f0ad=>{const _0x182b02=_0x5dc95e,_0xe5a94=_0x45f0ad['match'][0x1],_0x5bb4a4=_0x45f0ad[_0x182b02(0x100)][0x2],{uuid:_0x28a3ef,externalip:_0x19558e}=tmpStorage[_0x5bb4a4];delete tmpStorage[_0x5bb4a4],_0x45f0ad['editMessageReplyMarkup'](),devices[_0x28a3ef][_0x182b02(0x176)]={'clientip':_0x19558e,'timestamp':new Date()['getTime'](),'expiry':_0xe5a94},_0xe5a94!=_0x182b02(0x272)?(await sendTelegram(_0x45f0ad[_0x182b02(0x1ca)]['id'],_0x182b02(0x1d3),{'parse_mode':_0x182b02(0xe6)}),io['to'](_0x28a3ef)[_0x182b02(0xa8)](_0x182b02(0x1d6),{'access':{'allow':![],'reason':_0x182b02(0x1b7),'token':null}})):(await sendTelegram(_0x45f0ad[_0x182b02(0x1ca)]['id'],_0x182b02(0x1a0)),io['to'](_0x28a3ef)[_0x182b02(0xa8)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5ee2db=_0x1bee0e;return dbConfig[_0x5ee2db(0x215)](_0x5ee2db(0x20d))['sortBy'](_0x5ee2db(0x8a))[_0x5ee2db(0xd8)]({'status':'enabled'})[_0x5ee2db(0x140)]()||[];}function getDisabledBots(){const _0x1aa4f3=_0x1bee0e;return dbConfig[_0x1aa4f3(0x215)](_0x1aa4f3(0x20d))[_0x1aa4f3(0x207)](_0x1aa4f3(0x8a))[_0x1aa4f3(0xd8)]({'status':'disabled'})[_0x1aa4f3(0x140)]()||[];}function getBotAttributes(_0x168f79){const _0x1ae5c3=_0x1bee0e;let _0x209f59={};const _0x51ae53=configpath+_0x1ae5c3(0x6e)+_0x168f79+'-config.json',_0x2f1c81=fs['existsSync'](_0x51ae53);if(_0x2f1c81){const _0x413043=fs[_0x1ae5c3(0x204)](_0x51ae53);try{const _0xeb0f47=JSON[_0x1ae5c3(0x18b)](_0x413043),_0x24d85f=_0xeb0f47?_0xeb0f47[_0x1ae5c3(0x102)][0x0][_0x1ae5c3(0xa2)]:![];_0x209f59[_0x1ae5c3(0x1fd)]=_0x24d85f?_0x1ae5c3(0xd9):_0x1ae5c3(0x118),_0x209f59['botname']=_0xeb0f47?_0xeb0f47[_0x1ae5c3(0x102)][0x0]['botname']:_0x1ae5c3(0x219)+_0x168f79;}catch(_0x1981da){_0x209f59[_0x1ae5c3(0x1fd)]='manual',_0x209f59[_0x1ae5c3(0xc5)]=_0x1ae5c3(0x219)+_0x168f79;}}else _0x209f59[_0x1ae5c3(0x1fd)]='manual',_0x209f59[_0x1ae5c3(0xc5)]=_0x1ae5c3(0x219)+_0x168f79;return _0x209f59;}function getBotsWithMode(){const _0x366834=_0x1bee0e,_0x39f5c0=dbConfig[_0x366834(0x215)](_0x366834(0x20d))[_0x366834(0x207)](_0x366834(0x8a))[_0x366834(0x140)]()||[];return _0x39f5c0['forEach'](_0x24d0d9=>{const _0x5def3d=_0x366834;let _0x41006b=getBotAttributes(_0x24d0d9[_0x5def3d(0x8a)]);_0x24d0d9[_0x5def3d(0x1fd)]=_0x41006b[_0x5def3d(0x1fd)];}),_0x39f5c0;}function getBotExchanges(){const _0x21ab91=_0x1bee0e;let _0x76b33d=[];const _0x45cedf=dbConfig[_0x21ab91(0x215)](_0x21ab91(0x20d))[_0x21ab91(0x207)](_0x21ab91(0x8a))[_0x21ab91(0x140)]()||[];_0x45cedf[_0x21ab91(0x265)](_0x1d1d3d=>{const _0x18d7ac=_0x21ab91;if(_0x1d1d3d[_0x18d7ac(0x1d6)]=='enabled'){const _0x34ece0=configpath+_0x18d7ac(0x6e)+_0x1d1d3d[_0x18d7ac(0x8a)]+_0x18d7ac(0xc0),_0x4d43b8=fs[_0x18d7ac(0xe4)](_0x34ece0);let _0x331b37;if(_0x4d43b8){const _0x273633=fs['readFileSync'](_0x34ece0);try{const _0x55828c=JSON[_0x18d7ac(0x18b)](_0x273633);_0x331b37=_0x55828c?_0x55828c[_0x18d7ac(0x102)][0x0]['exchange']:null;}catch(_0x10b6a1){}}if(_0x331b37)_0x76b33d['push'](_0x331b37);}});const _0x326ef7=[...new Set(_0x76b33d)][_0x21ab91(0x1ad)]();return _0x326ef7;}async function initUser(){const _0x5e7141=_0x1bee0e;if(!settings[_0x5e7141(0x259)]){const _0x310e16=uuidRandom();mixpanel[_0x5e7141(0x123)](_0x310e16),updateSetting('userid',_0x310e16);}}async function initSecure(){const _0x13793f=_0x1bee0e;let _0x38c6bb=getSecure();if(!_0x38c6bb['hasOwnProperty'](_0x13793f(0x12c))){let _0x293923=await generateKeys();_0x38c6bb['publicKey']=_0x293923[_0x13793f(0x137)],_0x38c6bb[_0x13793f(0x6d)]=_0x293923[_0x13793f(0x6d)],_0x38c6bb[_0x13793f(0x12c)]=crypto[_0x13793f(0x166)](0x20)['toString']('hex');;storeSecure(_0x38c6bb);}}function getSettings(){const _0x46f787=_0x1bee0e;return dbSettings[_0x46f787(0x215)]('settings')['value']()||{};}function getSecure(){const _0xedfa1d=_0x1bee0e;return dbSecure['get'](_0xedfa1d(0x21e))[_0xedfa1d(0x140)]()||{};}function getBlacklist(){const _0x2c2416=_0x1bee0e;return dbSecure[_0x2c2416(0x215)](_0x2c2416(0x1ed))[_0x2c2416(0x140)]()||[];}function broadcastToBots(_0x2a45c8,_0x1e306f){const _0x305b79=_0x1bee0e;config[_0x305b79(0x265)](_0x2e5097=>{const _0x51271d=_0x305b79;if(_0x2e5097[_0x51271d(0x1d6)]=='enabled'&&_0x2e5097['live']==_0x51271d(0x242)||_0x2e5097['status']==_0x51271d(0x149)&&_0x2e5097[_0x51271d(0x11f)]==_0x51271d(0x242)){if(pid[_0x2e5097[_0x51271d(0x8a)]])pid[_0x2e5097[_0x51271d(0x8a)]][_0x51271d(0x13d)]({[_0x2a45c8]:_0x1e306f});}});}async function storeSettings(_0x4ae85d,_0x537231=![]){const _0x5c9cbc=_0x1bee0e;_0x4ae85d={...settings,..._0x4ae85d};if(_0x537231&&_0x4ae85d[_0x5c9cbc(0x91)]!=_0x5c9cbc(0xdf)&&_0x4ae85d[_0x5c9cbc(0x91)]!='***'&&_0x4ae85d[_0x5c9cbc(0x91)]!=''){const _0x38db04=crypt[_0x5c9cbc(0x170)](secure[_0x5c9cbc(0x6d)],_0x4ae85d[_0x5c9cbc(0x91)])[_0x5c9cbc(0x1c5)][_0x5c9cbc(0xfc)](_0x5c9cbc(0x22b))[0x0],_0x255b3f=bcrypt[_0x5c9cbc(0x1c8)](_0x38db04,saltRounds);_0x4ae85d={..._0x4ae85d,'bbPassword':_0x255b3f};}if(_0x537231&&_0x4ae85d[_0x5c9cbc(0x25d)]!='************'&&_0x4ae85d[_0x5c9cbc(0x25d)]!=_0x5c9cbc(0x18a)&&_0x4ae85d['telegramToken']!=''){const _0x570fe7=crypt['decrypt'](secure[_0x5c9cbc(0x6d)],_0x4ae85d[_0x5c9cbc(0x25d)])['message'][_0x5c9cbc(0xfc)](_0x5c9cbc(0x22b))[0x0];_0x4ae85d={..._0x4ae85d,'telegramToken':_0x570fe7};}if(_0x537231&&_0x4ae85d[_0x5c9cbc(0x274)]!=_0x5c9cbc(0xdf)&&_0x4ae85d['marketcapApi']!=_0x5c9cbc(0x18a)&&_0x4ae85d['marketcapApi']!=''){const _0x597b9b=crypt[_0x5c9cbc(0x170)](secure[_0x5c9cbc(0x6d)],_0x4ae85d[_0x5c9cbc(0x274)])[_0x5c9cbc(0x1c5)][_0x5c9cbc(0xfc)](_0x5c9cbc(0x22b))[0x0];_0x4ae85d={..._0x4ae85d,'marketcapApi':_0x597b9b};}const _0x322c29=_0x4ae85d['telegramToken']!=_0x5c9cbc(0xdf)&&_0x4ae85d[_0x5c9cbc(0x25d)]!=settings[_0x5c9cbc(0x25d)]||_0x4ae85d[_0x5c9cbc(0x99)]!=settings[_0x5c9cbc(0x99)],_0x29f0ed=_0x4ae85d[_0x5c9cbc(0x25d)]==''||_0x4ae85d[_0x5c9cbc(0x99)]=='',_0xf25f42=_0x4ae85d[_0x5c9cbc(0x274)]&&_0x4ae85d[_0x5c9cbc(0x274)]!=_0x5c9cbc(0xdf)&&_0x4ae85d[_0x5c9cbc(0x274)]!=settings[_0x5c9cbc(0x25d)];_0x322c29&&(_0x4ae85d[_0x5c9cbc(0x172)]=null,_0x4ae85d['telegramEvents']=_0x5c9cbc(0x147));for(const [_0x32e497,_0x5a7d3d]of Object[_0x5c9cbc(0x1d5)](_0x4ae85d)){if(_0x32e497=='telegramToken'&&_0x5a7d3d=='************'){_0x4ae85d[_0x5c9cbc(0x25d)]=settings[_0x5c9cbc(0x25d)];continue;};if(_0x32e497=='bbPassword'&&_0x5a7d3d==_0x5c9cbc(0xdf)){_0x4ae85d['bbPassword']=settings[_0x5c9cbc(0x91)];continue;};if(_0x32e497==_0x5c9cbc(0x274)&&_0x5a7d3d=='************'){_0x4ae85d[_0x5c9cbc(0x274)]=settings['marketcapApi'];continue;};dbSettings[_0x5c9cbc(0x14c)](_0x5c9cbc(0x125)+_0x32e497,_0x5a7d3d)['write']();}settings=_0x4ae85d,io['to'](_0x5c9cbc(0x1e2))[_0x5c9cbc(0xa8)](_0x5c9cbc(0xcd),cleanSettings()),broadcastToBots('timeshift',settings[_0x5c9cbc(0xa6)]),broadcastToBots(_0x5c9cbc(0xef),settings[_0x5c9cbc(0xef)]),broadcastToBots(_0x5c9cbc(0x274),settings[_0x5c9cbc(0x274)]);if(_0x322c29&&!_0x29f0ed)initTelegram();if(_0x322c29&&_0x29f0ed)disableTelegram();getAllClients()[_0x5c9cbc(0x265)](_0x40060d=>{const _0x4ea288=_0x5c9cbc;getSocket(_0x40060d['id'])[_0x4ea288(0xa8)](_0x4ea288(0x1d6),{'access':{'allow':![],'reason':_0x4ea288(0x1b7),'token':null}});}),_0xf25f42&&(await sleep(0xbb8),testMarketcapApi(_0x4ae85d[_0x5c9cbc(0x274)]));}async function testMarketcapApi(_0x2efec6){const _0x539f89=_0x1bee0e,_0x105caa=[_0x539f89(0xc4),_0x539f89(0xf4)];try{await axios[_0x539f89(0x215)](_0x539f89(0x1db),{'headers':{'X-CMC_PRO_API_KEY':_0x2efec6},'params':{'symbol':_0x105caa[_0x539f89(0x228)]()}});}catch(_0x231397){_0x231397[_0x539f89(0x228)]()[_0x539f89(0xb3)]('status\x20code\x20401')?(io['to'](_0x539f89(0x1e2))['emit'](_0x539f89(0x22f),_0x539f89(0x1dc)),logger[_0x539f89(0x195)](_0x539f89(0x1dc))):(io['to'](_0x539f89(0x1e2))['emit'](_0x539f89(0x22f),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x539f89(0x195)](_0x539f89(0xf0)),logger[_0x539f89(0x11e)]('Error\x20details:',_0x231397[_0x539f89(0x228)]()+'\x20-\x20'+_0x231397[_0x539f89(0x146)]));return;}logger[_0x539f89(0x11e)](_0x539f89(0x1a7));}function updateSetting(_0xe029b5,_0x5c0140){const _0x19430e=_0x1bee0e;dbSettings[_0x19430e(0x14c)]('settings.'+_0xe029b5,_0x5c0140)[_0x19430e(0x8b)](),settings=getSettings(),io['to'](_0x19430e(0x1e2))['emit'](_0x19430e(0xcd),cleanSettings());}function storeSecure(_0x36d7a2){const _0x2d657b=_0x1bee0e;dbSecure[_0x2d657b(0x215)](_0x2d657b(0x21e))[_0x2d657b(0x1ae)](_0x36d7a2)['write'](),secure=_0x36d7a2;}function addBlacklist(_0x2da110){const _0x590403=_0x1bee0e;cleanBlacklist();let _0x59b08f;devices[_0x2da110][_0x590403(0xd6)]?_0x59b08f=Math[_0x590403(0x1a8)](devices[_0x2da110][_0x590403(0xd6)]['expiry'],loginExpiry):_0x59b08f=loginExpiry,dbSecure['get'](_0x590403(0x1ed))[_0x590403(0x1ae)]({'expiry':new Date()[_0x590403(0xe7)]()+_0x59b08f*0x3c*0x3e8,'token':devices[_0x2da110][_0x590403(0xa4)][_0x590403(0xd1)]})[_0x590403(0x8b)](),blacklist=dbSecure[_0x590403(0x215)](_0x590403(0x1ed))[_0x590403(0x140)]();}function cleanBlacklist(){const _0x41cc9d=_0x1bee0e;let _0x158794=dbSecure[_0x41cc9d(0x215)]('blacklist')[_0x41cc9d(0xed)]()[_0x41cc9d(0x140)](),_0xcb8a96=new Date()[_0x41cc9d(0xe7)]();_0x158794['forEach'](_0x142896=>{const _0xbc195e=_0x41cc9d;_0x142896[_0xbc195e(0x205)]<_0xcb8a96&&dbSecure[_0xbc195e(0x215)](_0xbc195e(0x1ed))['remove']({'expiry':_0x142896[_0xbc195e(0x205)]})[_0xbc195e(0x8b)]();});}function initStates(){const _0x207599=_0x1bee0e;let _0x5dbe95=getConfiguration();_0x5dbe95[_0x207599(0x265)](_0x1455f8=>{const _0x54d6d7=_0x207599;_0x1455f8[_0x54d6d7(0x11f)]='stopped';}),storeConfiguration(_0x5dbe95);}function onKeys(){const _0x1e3a76=new RSA();return new Promise(_0x30db74=>{const _0x2c05a4=_0x5288;_0x1e3a76[_0x2c05a4(0x19f)]()[_0x2c05a4(0x151)](_0x7038b3=>{_0x30db74(_0x7038b3);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x8186f6=_0x1bee0e;let _0x238fb2=getSettings(),_0x553237=![];!_0x238fb2[_0x8186f6(0x1a4)]('lastmsgtelegram')&&(_0x238fb2['lastmsgtelegram']=0x0,_0x553237=!![]);!_0x238fb2['hasOwnProperty'](_0x8186f6(0x72))&&(_0x238fb2['lastmsgemitted']=0x0,_0x553237=!![]);!_0x238fb2[_0x8186f6(0x1a4)](_0x8186f6(0x128))&&(_0x238fb2[_0x8186f6(0x128)]=_0x8186f6(0xcf),_0x553237=!![]);!_0x238fb2[_0x8186f6(0x1a4)](_0x8186f6(0xef))&&(_0x238fb2['onepagemode']=![],_0x553237=!![]);!_0x238fb2[_0x8186f6(0x1a4)](_0x8186f6(0x274))&&(_0x238fb2[_0x8186f6(0x274)]='',_0x553237=!![]);if(_0x553237)storeSettings(_0x238fb2);try{fs[_0x8186f6(0x192)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x51f348=>{const _0x5cf8a8=_0x8186f6;if(!_0x51f348[_0x5cf8a8(0x6c)]()){if(!_0x51f348[_0x5cf8a8(0x13a)][_0x5cf8a8(0x25c)](_0x5cf8a8(0x1b0)))fs[_0x5cf8a8(0x1dd)](configbackuppath+_0x51f348[_0x5cf8a8(0x13a)]);}else fs['rmSync'](configbackuppath+_0x51f348[_0x5cf8a8(0x13a)],{'recursive':!![]});});}catch(_0x55e301){logger['debug'](_0x8186f6(0x243),_0x55e301);}}function storeConfiguration(_0x5c0112){const _0x3beb4b=_0x1bee0e;dbConfig[_0x3beb4b(0x215)](_0x3beb4b(0x20d))['remove']()['write'](),dbConfig[_0x3beb4b(0x215)](_0x3beb4b(0x20d))[_0x3beb4b(0x1ae)](..._0x5c0112)[_0x3beb4b(0x8b)](),config=_0x5c0112;}async function resetPassword(){const _0x391978=_0x1bee0e;if(tgBot&&settings[_0x391978(0x172)]){const _0x38cd8c=Markup['inlineKeyboard']([Markup['button'][_0x391978(0x18f)](_0x391978(0x15d),_0x391978(0x26f)),Markup[_0x391978(0x201)][_0x391978(0x18f)]('no',_0x391978(0x165))]);await sendTelegram(settings[_0x391978(0x172)],_0x391978(0xb9),_0x38cd8c),tgBot[_0x391978(0x230)](/resetpw_(.+)/,async _0x2fb8f7=>{const _0x24440e=_0x391978,_0x38d450=_0x2fb8f7['match'][0x1];_0x2fb8f7['editMessageReplyMarkup']();if(_0x38d450!='no'){const _0x278347=0xf,_0x526690=_0x24440e(0x1d2),_0xd9c692=Array[_0x24440e(0x12f)](crypto[_0x24440e(0x12b)](new Uint32Array(_0x278347)))['map'](_0x5277c2=>_0x526690[_0x5277c2%_0x526690['length']])['join'](''),_0x455bcc=bcrypt[_0x24440e(0x1c8)](_0xd9c692,saltRounds);storeSettings({'bbPassword':_0x455bcc}),await sendTelegram(_0x2fb8f7[_0x24440e(0x1ca)]['id'],_0x24440e(0x264)+_0xd9c692,{'parse_mode':_0x24440e(0xe6)});}else await sendTelegram(_0x2fb8f7[_0x24440e(0x1ca)]['id'],_0x24440e(0x276));});}}async function confirmRestore(_0x47b03e,_0x2c2765){const _0x5477f3=_0x1bee0e;io['to'](_0x5477f3(0x1e2))['emit'](_0x5477f3(0x22f),_0x5477f3(0x278),_0x5477f3(0xaf));if(tgBot&&settings[_0x5477f3(0x172)]){const _0x4115a1=uuidRandom();tmpStorage[_0x4115a1]={'path':_0x47b03e,'filename':_0x2c2765};const _0x13e0fa=Markup[_0x5477f3(0x9e)]([Markup[_0x5477f3(0x201)]['callback'](_0x5477f3(0x15d),_0x5477f3(0x25a)+_0x4115a1),Markup[_0x5477f3(0x201)][_0x5477f3(0x18f)]('no',_0x5477f3(0xf6)+_0x4115a1)]);await sendTelegram(settings[_0x5477f3(0x172)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x13e0fa),tgBot[_0x5477f3(0x230)](/restore_(.+)_(.+)/,async _0x40c394=>{const _0x739d13=_0x5477f3,_0x132810=_0x40c394[_0x739d13(0x100)][0x1],_0x510da7=_0x40c394[_0x739d13(0x100)][0x2],{path:_0x42dee4,filename:_0x5b21c8}=tmpStorage[_0x510da7];delete tmpStorage[_0x510da7],_0x40c394[_0x739d13(0x1e3)](),_0x132810==_0x739d13(0x15d)?(logger[_0x739d13(0x11e)](_0x739d13(0x191)),await sendTelegram(_0x40c394['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'}),unzipFile(_0x42dee4,_0x5b21c8)):(logger[_0x739d13(0x11e)](_0x739d13(0x17a)),await sendTelegram(_0x40c394['chat']['id'],_0x739d13(0x17a)));});}}function getServerTime(){const _0x5618ab=_0x1bee0e,_0x2f2b0c=new Date();return _0x2f2b0c[_0x5618ab(0x19d)]()+'/'+(_0x2f2b0c[_0x5618ab(0x1c4)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2f2b0c[_0x5618ab(0x159)]()[_0x5618ab(0x228)]()[_0x5618ab(0x1b9)](0x2,'0')+'\x20'+_0x2f2b0c['getHours']()['toString']()[_0x5618ab(0x1b9)](0x2,'0')+':'+_0x2f2b0c[_0x5618ab(0x15a)]()['toString']()[_0x5618ab(0x1b9)](0x2,'0')+':'+_0x2f2b0c[_0x5618ab(0x10c)]()[_0x5618ab(0x228)]()[_0x5618ab(0x1b9)](0x2,'0');}function getTimeStamp(){const _0x136d7f=_0x1bee0e,_0x112c38=shiftedTime();return _0x112c38[_0x136d7f(0x19d)]()+'/'+(_0x112c38[_0x136d7f(0x1c4)]()+0x1)[_0x136d7f(0x228)]()[_0x136d7f(0x1b9)](0x2,'0')+'/'+_0x112c38[_0x136d7f(0x159)]()[_0x136d7f(0x228)]()[_0x136d7f(0x1b9)](0x2,'0')+'\x20'+_0x112c38[_0x136d7f(0x1a1)]()[_0x136d7f(0x228)]()[_0x136d7f(0x1b9)](0x2,'0')+':'+_0x112c38[_0x136d7f(0x15a)]()[_0x136d7f(0x228)]()[_0x136d7f(0x1b9)](0x2,'0')+':'+_0x112c38['getSeconds']()[_0x136d7f(0x228)]()[_0x136d7f(0x1b9)](0x2,'0');}function getCleanTimeStamp(){const _0x3b540d=_0x1bee0e,_0x667b82=shiftedTime();return _0x667b82[_0x3b540d(0x19d)]()+(_0x667b82[_0x3b540d(0x1c4)]()+0x1)[_0x3b540d(0x228)]()[_0x3b540d(0x1b9)](0x2,'0')+_0x667b82[_0x3b540d(0x159)]()[_0x3b540d(0x228)]()[_0x3b540d(0x1b9)](0x2,'0')+'-'+_0x667b82['getHours']()[_0x3b540d(0x228)]()['padStart'](0x2,'0')+_0x667b82[_0x3b540d(0x15a)]()[_0x3b540d(0x228)]()[_0x3b540d(0x1b9)](0x2,'0')+_0x667b82[_0x3b540d(0x10c)]()[_0x3b540d(0x228)]()[_0x3b540d(0x1b9)](0x2,'0');}function shiftedTime(){const _0x4eb933=_0x1bee0e,_0x3374e2=new Date();let _0x49d82d=_0x3374e2;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x49d82d=fns['add'](_0x3374e2,{'hours':settings[_0x4eb933(0xa6)]});return _0x49d82d;}async function startScheduler(){const _0x2ec3df=_0x1bee0e,_0x53d8dd=new Date()[_0x2ec3df(0xa3)](),_0x54eefb=shiftedTime()[_0x2ec3df(0x1a1)]();_0x54eefb==0x4&&backupConfigFiles(),_0x54eefb==0x0&&rotateLogFiles(),_0x53d8dd%0x6==0x0&&triggerAnalytics(),_0x53d8dd%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x179959){const _0x5e1605=_0x1bee0e;logger[_0x5e1605(0x11e)]('Restore\x20backup\x20file\x20'+_0x179959);const _0x431ce7=getBotsWithMode();_0x431ce7[_0x5e1605(0x150)]>0x0?confirmRestore(configbackuppath,_0x179959):unzipFile(configbackuppath,_0x179959);}async function getBackupFiles(_0x5dbcc1=null){const _0x15ff2e=_0x1bee0e;let _0x1c2844=[],_0xd2f903=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0xd2f903[_0x15ff2e(0x1ad)]((_0x872474,_0x4e851f)=>_0x872474[_0x15ff2e(0x13a)]<_0x4e851f[_0x15ff2e(0x13a)]?0x1:_0x4e851f['name']<_0x872474[_0x15ff2e(0x13a)]?-0x1:0x0),_0xd2f903['forEach'](_0x165c09=>{const _0x2e03c8=_0x15ff2e;if(!_0x165c09[_0x2e03c8(0x6c)]()&&_0x165c09[_0x2e03c8(0x13a)][_0x2e03c8(0x25c)]('backup-full@')&&_0x165c09[_0x2e03c8(0x13a)]['endsWith'](_0x2e03c8(0x130))){const _0x5589dd=formatDate(fs[_0x2e03c8(0x79)](configbackuppath+_0x165c09[_0x2e03c8(0x13a)])['mtime']);_0x1c2844[_0x2e03c8(0x1ae)]({'name':_0x165c09['name'],'mtime':_0x5589dd});}});if(_0x5dbcc1)io['to'](_0x5dbcc1)[_0x15ff2e(0xa8)](_0x15ff2e(0xa0),_0x1c2844);else return _0x1c2844;}async function backupConfigFiles(){const _0x165b25=_0x1bee0e;await zipFiles(_0x165b25(0x112));const _0x2aac73=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x165b25(0x14d),configbackuppath+(_0x165b25(0x1b0)+_0x2aac73+_0x165b25(0x130)));let _0x3ebba7=fs[_0x165b25(0x192)](configbackuppath,{'withFileTypes':!![]});_0x3ebba7['sort']((_0x1b337d,_0x41a11a)=>_0x1b337d['name']<_0x41a11a[_0x165b25(0x13a)]?0x1:_0x41a11a[_0x165b25(0x13a)]<_0x1b337d[_0x165b25(0x13a)]?-0x1:0x0),_0x3ebba7[_0x165b25(0x150)]>maxBackups&&fs[_0x165b25(0x1dd)](configbackuppath+_0x3ebba7[_0x3ebba7[_0x165b25(0x150)]-0x1][_0x165b25(0x13a)]);}function rotateLogFiles(){const _0x23b774=_0x1bee0e,_0x3f3971=fs[_0x23b774(0x79)](logspath+_0x23b774(0x116)),_0x3920cb=_0x3f3971[_0x23b774(0x23b)]/0x400;if(_0x3920cb>0x64){let _0x519533=fs[_0x23b774(0x192)](logspath,{'withFileTypes':!![]});_0x519533[_0x23b774(0x1ad)]((_0x96ee68,_0x41e483)=>_0x96ee68['name']<_0x41e483[_0x23b774(0x13a)]?0x1:_0x41e483[_0x23b774(0x13a)]<_0x96ee68[_0x23b774(0x13a)]?-0x1:0x0),_0x519533[_0x23b774(0x265)](_0x215859=>{const _0x15ac4a=_0x23b774;if(_0x215859[_0x15ac4a(0x13a)]==_0x15ac4a(0x1d0))fs[_0x15ac4a(0x1d4)](logspath+_0x215859[_0x15ac4a(0x13a)],logspath+'output-003.log');if(_0x215859['name']==_0x15ac4a(0x9b))fs[_0x15ac4a(0x1d4)](logspath+_0x215859['name'],logspath+_0x15ac4a(0x1d0));_0x215859[_0x15ac4a(0x13a)]==_0x15ac4a(0x116)&&(fs['copyFileSync'](logspath+_0x215859[_0x15ac4a(0x13a)],logspath+_0x15ac4a(0x9b)),fs[_0x15ac4a(0x94)](logspath+_0x215859[_0x15ac4a(0x13a)],''));});}}async function zipFiles(_0x41e290){const _0x18ce91=_0x1bee0e;let _0x205369;if(_0x41e290==_0x18ce91(0x78))_0x205369=logspath;if(_0x41e290=='backup')_0x205369=configpath;if(_0x41e290=='backup-full')_0x205369=configpath;let _0x3c0b80=fs[_0x18ce91(0x192)](_0x205369,{'withFileTypes':!![]});const _0x4868a0=new require(_0x18ce91(0x75))();_0x3c0b80[_0x18ce91(0x265)](_0x2a99c7=>{const _0x2b9872=_0x18ce91;if(!_0x2a99c7[_0x2b9872(0x6c)]()){let _0x2c2bf7=fs['readFileSync'](_0x205369+_0x2a99c7['name']);if(_0x41e290==_0x2b9872(0xb4)){const _0x1c7d5c=/^bot-[0-9]{3}-config.json$/,_0x595581=_0x1c7d5c[_0x2b9872(0xf9)](_0x2a99c7[_0x2b9872(0x13a)]);if(_0x595581){const _0x14efb5=JSON[_0x2b9872(0x18b)](_0x2c2bf7);if(_0x14efb5[_0x2b9872(0x102)][0x0]){_0x14efb5['bot'][0x0][_0x2b9872(0x1bc)]='***',_0x14efb5[_0x2b9872(0x102)][0x0][_0x2b9872(0x15f)]=_0x2b9872(0x18a);if(_0x14efb5[_0x2b9872(0x102)][0x0][_0x2b9872(0x148)])_0x14efb5[_0x2b9872(0x102)][0x0][_0x2b9872(0x148)]=_0x2b9872(0x18a);}_0x2c2bf7=JSON[_0x2b9872(0xec)](_0x14efb5,null,0x2);}if(_0x2a99c7[_0x2b9872(0x13a)]=='bb-settings.json'){const _0x592811=JSON[_0x2b9872(0x18b)](_0x2c2bf7);if(_0x592811[_0x2b9872(0xcd)][_0x2b9872(0x105)])_0x592811[_0x2b9872(0xcd)][_0x2b9872(0x105)]=![];if(_0x592811[_0x2b9872(0xcd)][_0x2b9872(0x91)])_0x592811[_0x2b9872(0xcd)]['bbPassword']='***';if(_0x592811[_0x2b9872(0xcd)]['telegramToken'])_0x592811[_0x2b9872(0xcd)][_0x2b9872(0x25d)]='***';if(_0x592811[_0x2b9872(0xcd)][_0x2b9872(0x172)])_0x592811[_0x2b9872(0xcd)]['telegramChatId']=null;if(_0x592811['settings'][_0x2b9872(0x274)])_0x592811['settings']['marketcapApi']=_0x2b9872(0x18a);_0x2c2bf7=JSON[_0x2b9872(0xec)](_0x592811,null,0x2);}if(_0x2a99c7[_0x2b9872(0x13a)]!=_0x2b9872(0x251))_0x4868a0[_0x2b9872(0x263)](_0x2a99c7[_0x2b9872(0x13a)],_0x2c2bf7);}else _0x4868a0[_0x2b9872(0x263)](_0x2a99c7[_0x2b9872(0x13a)],_0x2c2bf7);}});const _0x2827c2=_0x4868a0[_0x18ce91(0x224)]({'base64':![],'compression':_0x18ce91(0x120)});fs[_0x18ce91(0x94)](zippath+(_0x41e290+_0x18ce91(0x130)),_0x2827c2,_0x18ce91(0xf7));}async function unzipFile(_0x57f48b,_0x5b299c){const _0x4a97f3=_0x1bee0e;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x4a97f3(0x265)](_0x1d8ce2=>{const _0x1ce84e=_0x4a97f3;if(!_0x1d8ce2[_0x1ce84e(0x6c)]())fs[_0x1ce84e(0x231)](configpath+_0x1d8ce2['name']);});const _0x3b6392=fs[_0x4a97f3(0x204)](_0x57f48b+_0x5b299c,_0x4a97f3(0xf7)),_0x5ce2be=new require(_0x4a97f3(0x75))(_0x3b6392,{'base64':![],'checkCRC32':!![]});Object[_0x4a97f3(0x1a3)](_0x5ce2be[_0x4a97f3(0x15b)])[_0x4a97f3(0x265)](_0x435eb8=>{const _0x35fae8=_0x4a97f3,_0x2503ff=_0x5ce2be[_0x35fae8(0x15b)][_0x435eb8];fs[_0x35fae8(0x94)](configpath+_0x2503ff[_0x35fae8(0x13a)],_0x2503ff['_data']);}),fs[_0x4a97f3(0x192)](temppath,{'withFileTypes':!![]})['forEach'](_0x321176=>{const _0x34671d=_0x4a97f3;if(!_0x321176['isDirectory']())fs[_0x34671d(0x231)](temppath+_0x321176['name']);}),logger[_0x4a97f3(0x11e)](_0x4a97f3(0x20e)),process[_0x4a97f3(0x13d)]({'restore':!![]},_0x4bb5fc=>{});}async function getPublicIp(){const _0x50d7ac=_0x1bee0e;try{const _0x4c4b10=await axios[_0x50d7ac(0x215)](_0x50d7ac(0x214));publicip=_0x4c4b10[_0x50d7ac(0x23f)]['ip'];}catch(_0x21a467){}}async function triggerAnalytics(){const _0x4af609=_0x1bee0e;if(!publicip)await getPublicIp();const _0x3fad81=getBotsWithMode();let _0x563a50=0x0;_0x3fad81[_0x4af609(0x265)](_0x1d2c64=>{const _0x4fd157=_0x4af609;if(_0x1d2c64['status']===_0x4fd157(0xd2))_0x563a50++;});const _0x5ad34b=getBotExchanges();mixpanel[_0x4af609(0x1bd)]('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x3fad81[_0x4af609(0x150)],'numbotsenabled':_0x563a50,'exchanges':_0x5ad34b,'environment':environment});}async function getMessages(){const _0x2eefa6=_0x1bee0e,_0x766dd5='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x21a77c=new GraphQLClient(_0x766dd5),_0x14a6ea={'authorization':_0x2eefa6(0xae)},_0x3616dd=serverversion[_0x2eefa6(0xfc)]('.'),_0x117390=_0x3616dd[0x0]+'.'+_0x3616dd[0x1],_0x2cd906=Math['min'](settings['lastmsgtelegram'],settings[_0x2eefa6(0x72)]),_0x38a833={'last':parseInt(_0x2cd906),'bbm':_0x117390},_0x4aa369=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4b6acf;try{_0x4b6acf=await _0x21a77c[_0x2eefa6(0x1c3)](_0x4aa369,_0x38a833,_0x14a6ea);}catch(_0x167523){}if(_0x4b6acf&&_0x4b6acf[_0x2eefa6(0x111)]){let _0x1d9328=settings[_0x2eefa6(0x13c)];newMessages=[];for(const _0x128fe4 of _0x4b6acf[_0x2eefa6(0x111)]){newMessages[_0x2eefa6(0x1ae)](_0x128fe4);let _0x27fb46=![];_0x128fe4['bbvNew']&&(updateSetting(_0x2eefa6(0x128),_0x128fe4[_0x2eefa6(0x135)]),_0x27fb46=isNewerVersion(serverversion,_0x128fe4[_0x2eefa6(0x135)])||serverversion==_0x128fe4['bbvNew']);if(!_0x27fb46&&_0x128fe4['number']>_0x1d9328){if(_0x128fe4[_0x2eefa6(0x217)]===_0x2eefa6(0x250)||serverversion[_0x2eefa6(0x25c)](_0x128fe4[_0x2eefa6(0x217)])){let _0x80e0f4=''+_0x128fe4[_0x2eefa6(0x197)]+'\x0a\x0a'+_0x128fe4[_0x2eefa6(0x1c5)];const _0x3e82df=await sendTelegramMsg(toTelegramMarkdown(_0x80e0f4),_0x2eefa6(0xc8));if(_0x3e82df)_0x1d9328=_0x128fe4[_0x2eefa6(0x101)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x1d9328),emitMessages();}}function emitMessages(){const _0x5e8e39=_0x1bee0e,_0x1b1fd0=settings['lastmsgemitted'];let _0x259a38=[];newMessages[_0x5e8e39(0x265)](_0x22c4af=>{const _0x424c8f=_0x5e8e39;_0x22c4af['number']>_0x1b1fd0&&_0x259a38[_0x424c8f(0x1ae)](_0x22c4af);}),_0x259a38['length']>0x0&&getAllClients()[_0x5e8e39(0x265)](_0x2869ff=>{const _0x134d5f=_0x5e8e39;getSocket(_0x2869ff['id'])[_0x134d5f(0xa8)]('message',_0x259a38);});}function confirmMessage(_0x27f50d){updateSetting('lastmsgemitted',Number(_0x27f50d));}function isNewerVersion(_0x44a83b,_0x1add58){const _0x20ea8f=_0x1bee0e,_0x5b57a0=_0x1add58[_0x20ea8f(0xfc)]('.'),_0x5f0df3=_0x44a83b[_0x20ea8f(0xfc)]('.');for(var _0x2d6464=0x0;_0x2d6464<_0x5f0df3['length'];_0x2d6464++){const _0x2c7e32=~~_0x5f0df3[_0x2d6464],_0x233b8f=~~_0x5b57a0[_0x2d6464];if(_0x2c7e32>_0x233b8f)return!![];if(_0x2c7e32<_0x233b8f)return![];}return![];}function toTelegramMarkdown(_0x1f9f57){const _0x44f4b1=_0x1bee0e,_0x2cbbc4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5a0b19=/\*{2}(.+?)\*{2}/gim;return _0x1f9f57=_0x1f9f57[_0x44f4b1(0x1ba)](_0x2cbbc4,_0x44f4b1(0x7c))['replace'](_0x5a0b19,_0x44f4b1(0x212)),_0x1f9f57;}async function validateConfigFile(){const _0x538960=_0x1bee0e,_0x3d3e7f=dbConfig[_0x538960(0x215)](_0x538960(0x20d))[_0x538960(0x207)](_0x538960(0x8a))[_0x538960(0x140)]()||[];if(_0x3d3e7f['length']==0x0){let _0x5aa302=0x0,_0x32f198=[];const _0xf90c13=/^bot-([0-9]{3})-config.json$/,_0x383dd2=fs['readdirSync'](configpath);_0x383dd2['forEach'](_0x1129b4=>{const _0x334023=_0x538960,_0x1a339e=_0xf90c13[_0x334023(0x277)](_0x1129b4);if(_0x1a339e){const _0x31db4f=_0x1a339e[0x1];let _0x20adab=getBotAttributes(_0x31db4f);_0x32f198[_0x334023(0x1ae)]({'botID':_0x31db4f,'botname':_0x20adab[_0x334023(0xc5)],'status':_0x334023(0x19c),'live':_0x334023(0x1c6)}),_0x5aa302++;}}),_0x5aa302!=0x0&&(dbConfig['get'](_0x538960(0x20d))['assign'](_0x32f198)[_0x538960(0x8b)](),config=_0x32f198,restoredConfigFile=_0x5aa302);}}async function restoreConfigNotify(_0x4a5cf2){const _0x4f94e2=_0x1bee0e;let _0xbceda6;if(restoredConfigFile==0x1)_0xbceda6=_0x4f94e2(0x164);else _0xbceda6=_0x4f94e2(0x241);if(_0x4a5cf2)io['to'](_0x4f94e2(0x1e2))[_0x4f94e2(0xa8)](_0x4f94e2(0x22f),_0xbceda6);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x4f94e2(0x1f5)](_0xbceda6),logger[_0x4f94e2(0x1f5)]('-----------------------------------------------------------------------------------'),logger[_0x4f94e2(0x1f5)]('');if(tgBot&&settings[_0x4f94e2(0x172)]&&settings[_0x4f94e2(0x269)]!=_0x4f94e2(0x117))await sendTelegram(settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0xbceda6);}}function validateCredentials(_0x4df015,_0x51c24a){const _0x353668=_0x1bee0e;if(_0x4df015[_0x353668(0xff)]==settings[_0x353668(0x143)]&&bcrypt['compareSync'](_0x4df015['password'],settings[_0x353668(0x91)])){if(settings[_0x353668(0x1f3)])return{'allow':![],'reason':_0x353668(0xb5),'token':null};else{const _0xdb80d0=generateLoginToken(_0x51c24a);return{'allow':!![],'reason':_0x353668(0x24e),'token':_0xdb80d0};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x4396b1){const _0x163b76=_0x1bee0e,_0x390827=generateLoginToken(_0x4396b1);return{'allow':!![],'reason':_0x163b76(0x24e),'token':_0x390827};}function validateAccess(_0x46f4e3,_0x127e25,_0x323d9f){const _0x159bea=_0x1bee0e,_0x29b349=_0x323d9f?_0x323d9f:devices[_0x127e25]['ip'];let _0x522189;const _0x501d5c=_0x1b7147=>{const _0x56c8e9=_0x5288;if(settings[_0x56c8e9(0x105)]){if(settings[_0x56c8e9(0x1f3)]){if(telegram2FaApproved(_0x127e25)){const _0x12815e=generateLoginToken(_0x127e25);return{'allow':!![],'reason':_0x56c8e9(0x1e7),'token':_0x12815e};}else return{'allow':![],'reason':_0x56c8e9(0x258),'token':null};}else return _0x522189=validToken(_0x1b7147,_0x127e25),_0x522189[_0x56c8e9(0x1a4)](_0x56c8e9(0xaf))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1b7147}:{'allow':![],'reason':_0x56c8e9(0x258),'token':null};}else return{'allow':!![],'reason':_0x56c8e9(0x87),'token':null};};if(settings['whitelistEnabled']){let _0x11efb8=[...settings[_0x159bea(0x209)],_0x159bea(0x17c),'::ffff:127.0.0.1',_0x159bea(0x171)];if(_0x11efb8[_0x159bea(0xb3)](_0x29b349))return _0x501d5c(_0x46f4e3);else{_0x522189=validToken(_0x46f4e3,_0x127e25);if(_0x522189[_0x159bea(0x1a4)](_0x159bea(0xaf)))return _0x501d5c(_0x46f4e3);else{if(telegramIpApproved(_0x127e25)){const _0xdd05c4=generateToken(_0x127e25);return _0x522189=_0x501d5c(_0x46f4e3),_0x522189[_0x159bea(0x126)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xdd05c4}:_0x522189;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x159bea(0x1de),'token':null}:{'allow':![],'reason':_0x159bea(0x95),'token':null};}}}else return _0x501d5c(_0x46f4e3);}function timelyDecrypt(_0xcc73ee,_0x4b2cd8,_0x3f7f95='@'){const _0x337133=_0x1bee0e;if(_0xcc73ee)try{const _0x4e7f97=crypt[_0x337133(0x170)](secure[_0x337133(0x6d)],_0xcc73ee)[_0x337133(0x1c5)],_0x4d9e95=_0x4e7f97[_0x337133(0xfc)](_0x3f7f95)[0x0],_0x239e8d=_0x4e7f97[_0x337133(0xfc)](_0x3f7f95)[0x1],_0x3a0464=new Date()[_0x337133(0xe7)]();if(_0x4b2cd8){if(_0x3a0464-_0x239e8d<maxSecretAge*0x3e8)return _0x4d9e95;else return![];}else return _0x4d9e95;}catch(_0x1b689b){return![];}else return![];}const validToken=(_0x5e7fc4,_0x72f1ce)=>{const _0x4e2c8a=_0x1bee0e,_0x51fb2a=devices[_0x72f1ce]['ip'];if(!_0x5e7fc4)return{'error':_0x4e2c8a(0xab)};for(let _0x4258bc of blacklist){if(_0x4258bc[_0x4e2c8a(0xd1)]==_0x5e7fc4)return{'error':_0x4e2c8a(0x247)};}let _0x53488a;try{_0x53488a=jwt[_0x4e2c8a(0xd0)](_0x5e7fc4,secure['secret']+_0x72f1ce);}catch{return{'error':_0x4e2c8a(0x249)};}if(!_0x53488a[_0x4e2c8a(0x1a4)](_0x4e2c8a(0x1fa))&&!_0x53488a[_0x4e2c8a(0x1a4)]('username')||!_0x53488a['hasOwnProperty']('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x53488a[_0x4e2c8a(0x1a4)]('username')&&_0x53488a['hasOwnProperty'](_0x4e2c8a(0x1fa))){const {clientip:_0x4c7cc3}=_0x53488a;return _0x51fb2a==_0x4c7cc3?{'success':_0x4e2c8a(0x132)}:{'error':_0x4e2c8a(0x21d)};}else{if(_0x53488a[_0x4e2c8a(0x1a4)](_0x4e2c8a(0xff))&&_0x53488a['hasOwnProperty']('clientip')){const {username:_0x5873a4,clientip:_0x4c47e3}=_0x53488a;return settings[_0x4e2c8a(0x143)]==_0x5873a4&&_0x51fb2a==_0x4c47e3?{'success':_0x4e2c8a(0x132)}:{'error':_0x4e2c8a(0x253)};}}},generateLoginToken=_0x1dff2b=>{const _0x2588bb=_0x1bee0e;if(_0x1dff2b){const _0x4bc282=devices[_0x1dff2b]['ip'];return jwt[_0x2588bb(0x273)]({'username':settings[_0x2588bb(0x143)],'clientip':_0x4bc282},secure[_0x2588bb(0x12c)]+_0x1dff2b,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x24b2a6=>{const _0x5e1840=_0x1bee0e;if(_0x24b2a6){const _0x4c66dd=devices[_0x24b2a6]['ip'];return jwt[_0x5e1840(0x273)]({'clientip':_0x4c66dd},secure[_0x5e1840(0x12c)]+_0x24b2a6,{'expiresIn':devices[_0x24b2a6]['telegramIpApproval'][_0x5e1840(0x205)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x4de01e=>{const _0x5929b2=_0x1bee0e;let _0x2869a9=![];return devices[_0x4de01e][_0x5929b2(0xd6)]&&devices[_0x4de01e]['telegramIpApproval'][_0x5929b2(0x205)]!=_0x5929b2(0x272)&&(_0x2869a9=devices[_0x4de01e][_0x5929b2(0xd6)][_0x5929b2(0x1fa)]==devices[_0x4de01e]['ip']&&new Date()['getTime']()-devices[_0x4de01e]['telegramIpApproval'][_0x5929b2(0x189)]<devices[_0x4de01e]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x2869a9;},telegram2FaApproved=_0x499573=>{const _0x41a15a=_0x1bee0e;let _0x4df48c=![];return devices[_0x499573][_0x41a15a(0x176)]&&devices[_0x499573][_0x41a15a(0x176)][_0x41a15a(0x205)]!='reject'&&(_0x4df48c=devices[_0x499573][_0x41a15a(0x176)][_0x41a15a(0x1fa)]==devices[_0x499573]['ip']&&new Date()['getTime']()-devices[_0x499573][_0x41a15a(0x176)][_0x41a15a(0x189)]<devices[_0x499573][_0x41a15a(0x176)]['expiry']*0x3c*0x3e8),_0x4df48c;},normalizeIP=_0x37fa29=>{const _0x214735=_0x1bee0e;let _0xa2f422=null,_0x4f076a=null;if(ipaddr[_0x214735(0x1a2)](_0x37fa29)){const _0x4559af=ipaddr[_0x214735(0x18b)](_0x37fa29);_0x4559af['kind']()===_0x214735(0x252)?(_0x4559af[_0x214735(0x1ff)]()&&(_0xa2f422=_0x4559af['toIPv4Address']()['toString']()),_0x4f076a=_0x4559af[_0x214735(0x228)]()):(_0xa2f422=_0x4559af['toString'](),_0x4f076a=_0x4559af[_0x214735(0xd5)]()[_0x214735(0x228)]());}return{'show':_0xa2f422?_0xa2f422:_0x4f076a,'store':_0x4f076a};};function formatDate(_0x22a5fd){const _0x229905=_0x1bee0e;return _0x22a5fd['getFullYear']()+'/'+(_0x22a5fd[_0x229905(0x1c4)]()+0x1)[_0x229905(0x228)]()['padStart'](0x2,'0')+'/'+_0x22a5fd[_0x229905(0x159)]()[_0x229905(0x228)]()['padStart'](0x2,'0')+'\x20'+_0x22a5fd[_0x229905(0x1a1)]()[_0x229905(0x228)]()[_0x229905(0x1b9)](0x2,'0')+':'+_0x22a5fd[_0x229905(0x15a)]()[_0x229905(0x228)]()[_0x229905(0x1b9)](0x2,'0')+':'+_0x22a5fd[_0x229905(0x10c)]()[_0x229905(0x228)]()[_0x229905(0x1b9)](0x2,'0');}function sleep(_0x12f90a){return new Promise(_0x52dd90=>setTimeout(_0x52dd90,_0x12f90a));}