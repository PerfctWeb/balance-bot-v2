const _0xcf7e33=_0x2108;(function(_0x2981c7,_0x59b387){const _0x234162=_0x2108,_0x41cf3c=_0x2981c7();while(!![]){try{const _0x25c180=parseInt(_0x234162(0x1d5))/0x1*(parseInt(_0x234162(0x1cf))/0x2)+parseInt(_0x234162(0xe6))/0x3+parseInt(_0x234162(0x21c))/0x4*(-parseInt(_0x234162(0x10e))/0x5)+-parseInt(_0x234162(0x241))/0x6+-parseInt(_0x234162(0x11a))/0x7*(parseInt(_0x234162(0x23b))/0x8)+parseInt(_0x234162(0x100))/0x9*(parseInt(_0x234162(0x1e7))/0xa)+-parseInt(_0x234162(0xe4))/0xb*(parseInt(_0x234162(0x252))/0xc);if(_0x25c180===_0x59b387)break;else _0x41cf3c['push'](_0x41cf3c['shift']());}catch(_0x365af9){_0x41cf3c['push'](_0x41cf3c['shift']());}}}(_0x35f5,0x967eb));const _0x193a2d=function(){let _0x1a50ba=!![];return function(_0xb21982,_0x42176f){const _0x5cf8a2=_0x1a50ba?function(){const _0x4108b6=_0x2108;if(_0x42176f){const _0x835f6c=_0x42176f[_0x4108b6(0x20e)](_0xb21982,arguments);return _0x42176f=null,_0x835f6c;}}:function(){};return _0x1a50ba=![],_0x5cf8a2;};}(),_0x298986=_0x193a2d(this,function(){const _0x3aba64=_0x2108;return _0x298986[_0x3aba64(0x159)]()[_0x3aba64(0x25e)](_0x3aba64(0xe2))[_0x3aba64(0x159)]()[_0x3aba64(0x12a)](_0x298986)[_0x3aba64(0x25e)]('(((.+)+)+)+$');});_0x298986();'use strict';function _0x2108(_0x344fc9,_0x30cbda){const _0x56a293=_0x35f5();return _0x2108=function(_0x298986,_0x193a2d){_0x298986=_0x298986-0xc6;let _0x35f554=_0x56a293[_0x298986];return _0x35f554;},_0x2108(_0x344fc9,_0x30cbda);}process[_0xcf7e33(0x1ec)][_0xcf7e33(0xe7)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0xcf7e33(0x261)),low=require(_0xcf7e33(0x1fa)),FileSync=require(_0xcf7e33(0x1ed)),path=require(_0xcf7e33(0x20f)),crypto=require(_0xcf7e33(0x1b2)),Crypt=require(_0xcf7e33(0x246))[_0xcf7e33(0xd5)],RSA=require(_0xcf7e33(0x246))['RSA'],bcrypt=require(_0xcf7e33(0x24c)),jwt=require(_0xcf7e33(0xe3)),ipaddr=require(_0xcf7e33(0xf0)),argv=require('yargs/yargs')(process[_0xcf7e33(0x181)][_0xcf7e33(0x13e)](0x2))[_0xcf7e33(0x181)],uuidRandom=require('uuid-random'),TelegramBot=require(_0xcf7e33(0x20c)),Mixpanel=require(_0xcf7e33(0x14c)),axios=require(_0xcf7e33(0x198)),{GraphQLClient,gql}=require(_0xcf7e33(0xfd)),util=require('util'),PORT=argv[_0xcf7e33(0x209)]||_0xcf7e33(0x113),pattern=/^[0-9]{2,4}$/;!pattern[_0xcf7e33(0xdc)](PORT)&&(console[_0xcf7e33(0x1b7)](_0xcf7e33(0x1d6)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0xcf7e33(0x210)](0x1));const HOST=argv[_0xcf7e33(0x11d)]||null,userID=argv['user']||'';let bbpath=_0xcf7e33(0xed),bbpath2='';const botfile=_0xcf7e33(0x217),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0xcf7e33(0x1cd);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xcf7e33(0x1cc)),configpath=userID?bbpath+_0xcf7e33(0xee)+userID+'/':bbpath+_0xcf7e33(0xee),configbackuppath=configpath+_0xcf7e33(0x1dc),logspath=userID?bbpath+_0xcf7e33(0x1a1)+userID+'/':bbpath+_0xcf7e33(0x1a1),zippath=userID?bbpath+_0xcf7e33(0x141)+userID+'/':bbpath+_0xcf7e33(0x141),loggerfile=fs[_0xcf7e33(0x19a)](logspath+'/output-000.log',{'flags':'a'});!fs[_0xcf7e33(0x10c)](configpath)&&fs['mkdirSync'](configpath);!fs[_0xcf7e33(0x10c)](configbackuppath)&&fs[_0xcf7e33(0x13c)](configbackuppath);!fs[_0xcf7e33(0x10c)](logspath)&&fs[_0xcf7e33(0x13c)](logspath);!fs[_0xcf7e33(0x10c)](zippath)&&fs[_0xcf7e33(0x13c)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xcf7e33(0xe8)]({'bots':[]})[_0xcf7e33(0x174)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xcf7e33(0xe8)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xcf7e33(0x120)}})[_0xcf7e33(0x174)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xcf7e33(0xe8)]({'secure':{},'blacklist':[]})[_0xcf7e33(0x174)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0xcf7e33(0x12c)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xcf7e33(0xdd)]&&settings['telegramToken']!=''&&settings[_0xcf7e33(0x11e)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x1e3e0d=>{const _0x49afa5=_0xcf7e33;console[_0x49afa5(0x1b7)](_0x1e3e0d);},'simple':_0x275916=>{const _0x2856ba=_0xcf7e33;console['log'](_0x275916),loggerfile['write'](util[_0x2856ba(0x106)](_0x275916)+'\x0a');},'full':async _0x2e822b=>{const _0x25236f=_0xcf7e33,_0x3d876a=getTimeStamp()+_0x25236f(0x1a2)+_0x2e822b;console[_0x25236f(0x1b7)](_0x3d876a),loggerfile[_0x25236f(0x174)](util[_0x25236f(0x106)](_0x3d876a)+'\x0a');if(tgBot&&settings[_0x25236f(0x1ff)]&&settings[_0x25236f(0x107)]!='orders')await tgBot[_0x25236f(0x249)](settings['telegramChatId'],_0x25236f(0x17d)+_0x2e822b)['catch'](_0x477ee6=>{telegramError(_0x477ee6);});}};process['on'](_0xcf7e33(0x257),function(_0x4172bf){const _0x30651b=_0xcf7e33;logger[_0x30651b(0x17f)](_0x4172bf);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0xcf7e33(0x1fd)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xcf7e33(0x134)),app=express(),http=require(_0xcf7e33(0x1a8))['createServer'](app);app[_0xcf7e33(0x225)]('/download/:type',async(_0x1a545f,_0x476c77)=>{const _0x207c7d=_0xcf7e33,_0x240e8c=_0x1a545f[_0x207c7d(0x1c0)][_0x207c7d(0x1ad)],_0x1729a6=getClientsWithBotID('botmanager'),_0x3fc57d=_0x1a545f['headers'][_0x207c7d(0xf7)],_0x1f5809=timelyDecrypt(_0x3fc57d,![]),_0xf6e38b=_0x1729a6[_0x207c7d(0x177)](_0x3dac91=>_0x3dac91[_0x207c7d(0xf7)]==_0x1f5809);if(_0xf6e38b){const _0x16f284=normalizeIP(_0x1a545f[_0x207c7d(0x158)][_0x207c7d(0x129)])[_0x207c7d(0x15f)],_0x4c8fd7=_0x1a545f[_0x207c7d(0x231)][_0x207c7d(0x1bd)];if(validateAccess(_0x4c8fd7,_0x1f5809,_0x16f284)[_0x207c7d(0x21e)])await zipFiles(_0x240e8c),_0x476c77['download'](zippath+(_0x240e8c+_0x207c7d(0xef)),_0x45bc13=>{const _0x1d7711=_0x207c7d;_0x45bc13&&(logger[_0x1d7711(0x254)]('Failed\x20to\x20download\x20'+_0x240e8c),logger['simple'](_0x45bc13));});else logger[_0x207c7d(0x254)](_0x207c7d(0x14a)+_0x240e8c+_0x207c7d(0x144));}else logger[_0x207c7d(0x254)](_0x207c7d(0x14a)+_0x240e8c+'\x20(2)');}),app[_0xcf7e33(0x220)](express[_0xcf7e33(0x21d)](path[_0xcf7e33(0x167)](__dirname,bbpath2,_0xcf7e33(0x101)))),app[_0xcf7e33(0x220)](express[_0xcf7e33(0x21d)](path[_0xcf7e33(0x167)](__dirname,bbpath2,_0xcf7e33(0x1b3)))),app[_0xcf7e33(0x225)]('/',function(_0x1dcb90,_0x110a6f){const _0xafa362=_0xcf7e33;_0x110a6f[_0xafa362(0x25b)](path[_0xafa362(0x167)](__dirname,bbpath2,'build2','index.html'));}),app[_0xcf7e33(0x225)]('/:bot',function(_0xea51b5,_0x59c8bf){const _0x12311a=_0xcf7e33;_0x59c8bf[_0x12311a(0x25b)](path[_0x12311a(0x167)](__dirname,bbpath2,'build','index.html'));}),app[_0xcf7e33(0x225)](_0xcf7e33(0x16e),(_0x1b1f7d,_0x50e71b)=>{const _0x3cfdbd=_0xcf7e33;_0x50e71b[_0x3cfdbd(0x25b)](path[_0x3cfdbd(0x167)](__dirname,bbpath2,_0x3cfdbd(0x1b3),_0x3cfdbd(0x1ce)));}),app['get'](_0xcf7e33(0xd6),(_0x426933,_0x56d4b2)=>{const _0x518afe=_0xcf7e33;_0x56d4b2[_0x518afe(0x25b)](path[_0x518afe(0x167)](__dirname,bbpath2,_0x518afe(0x1b3),'index.html'));}),app[_0xcf7e33(0x225)](_0xcf7e33(0xdf),(_0x23494f,_0x49da5d)=>{const _0x4136d9=_0xcf7e33;_0x49da5d[_0x4136d9(0x25b)](path[_0x4136d9(0x167)](__dirname,bbpath2,'build',_0x4136d9(0x1ce)));}),app[_0xcf7e33(0x225)]('/:bot/history',(_0x32e7a2,_0x2e9155)=>{const _0x50f736=_0xcf7e33;_0x2e9155['sendFile'](path['join'](__dirname,bbpath2,_0x50f736(0x1b3),_0x50f736(0x1ce)));}),app['get'](_0xcf7e33(0x102),(_0x26b7f7,_0xa3736e)=>{const _0x4a396c=_0xcf7e33;_0xa3736e[_0x4a396c(0x25b)](path[_0x4a396c(0x167)](__dirname,bbpath2,_0x4a396c(0x1b3),_0x4a396c(0x1ce)));}),app[_0xcf7e33(0x225)](_0xcf7e33(0x19f),(_0x556be7,_0x257eb6)=>{const _0x42d541=_0xcf7e33;_0x257eb6['sendFile'](path[_0x42d541(0x167)](__dirname,bbpath2,_0x42d541(0x1b3),_0x42d541(0x1ce)));});if(HOST)http[_0xcf7e33(0x1f4)](PORT,HOST);else http[_0xcf7e33(0x1f4)](PORT);const io=require(_0xcf7e33(0x18c))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x135b43=_0xcf7e33;logger[_0x135b43(0x17f)](''),logger[_0x135b43(0x17f)](_0x135b43(0x15a)),await logger['full'](_0x135b43(0x227)+PORT),logger['simple'](_0x135b43(0x15a));if(config[_0x135b43(0x152)]!=0x0)for(const _0x334498 of config){if(_0x334498[_0x135b43(0x233)]==_0x135b43(0x110)||_0x334498['status']==_0x135b43(0x151))await logger[_0x135b43(0x254)](_0x135b43(0x16f)+_0x334498[_0x135b43(0x25f)]+_0x135b43(0x1fe)+_0x334498[_0x135b43(0x111)]),startBot([_0x334498[_0x135b43(0x25f)],userID],{'cwd':bbpath},function(_0x44efa7){const _0x97d19f=_0x135b43;if(_0x44efa7)logger[_0x97d19f(0x254)](_0x44efa7);});else(_0x334498[_0x135b43(0x233)]==_0x135b43(0x25c)||_0x334498['status']==_0x135b43(0x1d8))&&await logger[_0x135b43(0x254)](_0x135b43(0x24e)+_0x334498[_0x135b43(0x25f)]+'\x20|\x20'+_0x334498[_0x135b43(0x111)]);}else!newBot&&logger[_0x135b43(0x17f)](_0x135b43(0x170));if(newBot)addBot();logger['simple'](_0x135b43(0x15a)),logger['simple']('');}function startSocket(){const _0x2e1c24=_0xcf7e33;io['on'](_0x2e1c24(0xc8),_0x59b88b=>{const _0x5e6978=_0x2e1c24;let _0x1fd4ae,_0x341bb8,_0x34d45e,_0x2ac604,_0x502808;const _0x5ae19d=_0x59b88b['handshake'][_0x5e6978(0x231)][_0x5e6978(0x172)];_0x341bb8=_0x5ae19d['match'](/bot[0-9]{3}/);if(_0x341bb8)_0x34d45e=_0x341bb8[0x0]['match'](/[0-9]{3}/);if(_0x34d45e)_0x1fd4ae=_0x34d45e[0x0];else _0x1fd4ae=_0x5e6978(0xfa);const _0x109137=_0x59b88b[_0x5e6978(0xde)][_0x5e6978(0xf6)][_0x5e6978(0x22c)];if(!_0x109137)_0x59b88b['emit'](_0x5e6978(0x233),{'publicKey':secure[_0x5e6978(0x13f)]});else{_0x2ac604=timelyDecrypt(_0x109137,![]);if(!_0x2ac604)_0x59b88b[_0x5e6978(0xf1)](_0x5e6978(0x233),{'publicKey':secure[_0x5e6978(0x13f)]});else{_0x502808=normalizeIP(_0x59b88b[_0x5e6978(0x1a7)][_0x5e6978(0x129)])[_0x5e6978(0x15f)];if(!devices[_0x2ac604])devices[_0x2ac604]={'uuid':_0x2ac604,'access':{'token':null}};devices[_0x2ac604]['ip']=_0x502808;const _0x17476e=addClient(_0x59b88b['id'],_0x2ac604,_0x1fd4ae);setAccess(_0x17476e),emitMessages(),_0x59b88b['on'](_0x5e6978(0xf3),_0x2a30fd=>{const _0xab169b=_0x5e6978,_0x41c438=timelyDecrypt(_0x2a30fd[_0xab169b(0x122)]);if(_0x41c438){_0x2a30fd={'username':_0x2a30fd[_0xab169b(0x11b)],'password':_0x41c438},devices[_0x2ac604][_0xab169b(0x173)]=validateCredentials(_0x2a30fd,_0x2ac604);if(devices[_0x2ac604][_0xab169b(0x173)][_0xab169b(0x21e)]==![]&&devices[_0x2ac604][_0xab169b(0x173)][_0xab169b(0xd9)]==_0xab169b(0xd7))_0x59b88b[_0xab169b(0xf1)](_0xab169b(0x233),{'access':devices[_0x2ac604]['access']}),loginAccess2FA(_0x2ac604,_0x502808);else{if(devices[_0x2ac604][_0xab169b(0x173)][_0xab169b(0x21e)]==![]&&devices[_0x2ac604][_0xab169b(0x173)][_0xab169b(0xd9)]==_0xab169b(0x161))_0x59b88b['emit'](_0xab169b(0x233),{'access':devices[_0x2ac604][_0xab169b(0x173)]});else devices[_0x2ac604]['access'][_0xab169b(0x21e)]&&devices[_0x2ac604][_0xab169b(0x173)][_0xab169b(0xd9)]==_0xab169b(0x14f)&&(getClientsWithUuid(_0x2ac604)['forEach'](_0x4553e0=>{setAccess(_0x4553e0);}),setTokenRefresh(_0x2ac604),setSessionTimeout(_0xab169b(0xf3),_0x2ac604));}}else logger[_0xab169b(0x254)](_0xab169b(0x128));}),_0x59b88b['on'](_0x5e6978(0x13a),()=>{resetPassword();}),_0x59b88b['on'](_0x5e6978(0x11f),_0x5617b3=>{removeClient(_0x59b88b['id']);}),_0x1fd4ae==_0x5e6978(0xfa)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x196b9c){const _0xe702eb=_0xcf7e33;if(_0x196b9c!='botmanager'&&config[_0xe702eb(0x1b6)]!=''){if(pid[_0x196b9c])pid[_0x196b9c][_0xe702eb(0x1c6)]({'function':_0xe702eb(0x116),'args':null});}}function getSocket(_0x284826){const _0x328a99=_0xcf7e33;return io[_0x328a99(0xea)][_0x328a99(0xea)]['get'](_0x284826);}function setAccess(_0x5e361f){const _0x3d4495=_0xcf7e33,_0xa59d39=getSocket(_0x5e361f['id']),_0x13eb2e=_0x5e361f[_0x3d4495(0xf7)],_0x569910=_0x5e361f[_0x3d4495(0x175)];devices[_0x13eb2e]['access']=validateAccess(devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0x226)],_0x13eb2e),_0xa59d39[_0x3d4495(0x167)](_0x13eb2e);if(devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0x21e)]){_0xa59d39[_0x3d4495(0x167)](_0x569910);if(_0x569910=='botmanager')initializeSocketBotManager(_0xa59d39);else initializeSocketBot(_0xa59d39);initClient(_0x569910);}devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0x226)]&&devices[_0x13eb2e]['access'][_0x3d4495(0xd9)]==_0x3d4495(0x1a6)&&setSessionTimeout(_0x3d4495(0x16b),_0x13eb2e),devices[_0x13eb2e]['access'][_0x3d4495(0x226)]&&devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0xd9)]==_0x3d4495(0x1c5)&&setSessionTimeout('login',_0x13eb2e),_0xa59d39['emit'](_0x3d4495(0x233),{'status':_0x5e361f[_0x3d4495(0x1e3)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x13eb2e][_0x3d4495(0x173)],'externalip':devices[_0x13eb2e]['ip'],'publicKey':secure[_0x3d4495(0x13f)],'userid':settings[_0x3d4495(0x17e)],'validInstallation':validInstallation}),devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0x21e)]==![]&&devices[_0x13eb2e][_0x3d4495(0x173)][_0x3d4495(0xd9)]=='2FA\x20required'&&temporaryAccess2FA(_0x13eb2e,devices[_0x13eb2e]['ip']);}function setSessionTimeout(_0x2af30e,_0x101710){const _0x25f371=_0xcf7e33;let _0x2da9e1;if(_0x2af30e==_0x25f371(0xf3))_0x2da9e1=loginExpiry*0x3c*0x3e8;else _0x2da9e1=devices[_0x101710][_0x25f371(0x248)][_0x25f371(0xd0)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x101710][_0x25f371(0x248)][_0x25f371(0x18a)]);if(devices[_0x101710][_0x25f371(0x212)])clearTimeout(devices[_0x101710][_0x25f371(0x212)]);devices[_0x101710]['pidExpireLogin']=setTimeout(()=>{const _0x599528=_0x25f371;if(devices[_0x101710]['pidRefreshToken'])clearTimeout(devices[_0x101710][_0x599528(0x1d3)]);removeSocketListeners(_0x101710),addBlacklist(_0x101710),devices[_0x101710][_0x599528(0x248)]=null,devices[_0x101710][_0x599528(0x228)]=null,devices[_0x101710][_0x599528(0x173)][_0x599528(0x226)]=null,devices[_0x101710][_0x599528(0x173)]=validateAccess(devices[_0x101710][_0x599528(0x173)][_0x599528(0x226)],_0x101710),!(devices[_0x101710][_0x599528(0x173)]['allow']&&devices[_0x101710][_0x599528(0x173)][_0x599528(0xd9)]==_0x599528(0x103))&&(_0x2af30e==_0x599528(0xf3)?io['to'](_0x101710)[_0x599528(0xf1)]('status',{'access':{'allow':![],'reason':_0x599528(0x15d),'token':null}}):io['to'](_0x101710)[_0x599528(0xf1)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x101710][_0x599528(0x173)][_0x599528(0x226)]=null;},_0x2da9e1);}function setTokenRefresh(_0x38003e){const _0x5b87cf=_0xcf7e33;if(devices[_0x38003e][_0x5b87cf(0x1d3)])clearTimeout(devices[_0x38003e][_0x5b87cf(0x1d3)]);devices[_0x38003e][_0x5b87cf(0x1d3)]=setTimeout(()=>{const _0x10c0be=_0x5b87cf;getClientsWithUuid(_0x38003e)[_0x10c0be(0x152)]!=0x0?(devices[_0x38003e]['access']=refreshToken(_0x38003e),io['to'](_0x38003e)[_0x10c0be(0xf1)]('status',{'status':_0x10c0be(0x112),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x38003e]['access'],'externalip':devices[_0x38003e]['ip'],'publicKey':secure[_0x10c0be(0x13f)],'validInstallation':validInstallation}),setTokenRefresh(_0x38003e)):clearTimeout(devices[_0x38003e][_0x10c0be(0x1d3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x18741a){const _0x11c43e=_0xcf7e33,_0x132100=getClient(_0x18741a['id'])['uuid'];_0x18741a[_0x11c43e(0xf1)](_0x11c43e(0x12d),config),_0x18741a[_0x11c43e(0xf1)](_0x11c43e(0x176),cleanSettings()),_0x18741a['on'](_0x11c43e(0xc9),_0x446e87=>{const _0x324f75=_0x11c43e;if(validateAccess(_0x446e87,_0x132100)[_0x324f75(0x21e)])addBot();else logger['full'](_0x324f75(0x183));}),_0x18741a['on']('update-bot',(_0x2c1e99,_0x2abc72)=>{const _0x35b6be=_0x11c43e;if(validateAccess(_0x2abc72,_0x132100)[_0x35b6be(0x21e)])toggleBot(_0x2c1e99[_0x35b6be(0x25f)],_0x2c1e99[_0x35b6be(0x233)],_0x2c1e99[_0x35b6be(0x169)]);else logger[_0x35b6be(0x254)](_0x35b6be(0x12f));}),_0x18741a['on'](_0x11c43e(0x242),(_0x18f5bb,_0x5a6135)=>{const _0xf43078=_0x11c43e;if(validateAccess(_0x5a6135,_0x132100)[_0xf43078(0x21e)])toggleBotMode(_0x18f5bb);else logger[_0xf43078(0x254)](_0xf43078(0x12f));}),_0x18741a['on']('delete-bot',(_0x4e0851,_0x2a759c)=>{const _0x4f43a3=_0x11c43e;if(validateAccess(_0x2a759c,_0x132100)[_0x4f43a3(0x21e)])deleteBot(_0x4e0851);else logger[_0x4f43a3(0x254)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x18741a['on'](_0x11c43e(0x148),(_0x353033,_0x2cab56)=>{const _0x4f379e=_0x11c43e;if(validateAccess(_0x2cab56,_0x132100)[_0x4f379e(0x21e)])storeSettings(_0x353033,!![]);else logger[_0x4f379e(0x254)](_0x4f379e(0x1c2));}),_0x18741a['on']('update-bb',_0x27bb8d=>{const _0xa3c260=_0x11c43e;if(validateAccess(_0x27bb8d,_0x132100)['allow'])updateBB();else logger[_0xa3c260(0x254)](_0xa3c260(0x24b));}),_0x18741a['on'](_0x11c43e(0xd4),_0x155122=>{const _0x2c48ff=_0x11c43e;if(validateAccess(_0x155122,_0x132100)['allow'])getMessages();else logger[_0x2c48ff(0x254)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x18741a['on']('confirm-message',(_0xa26d49,_0x422c51)=>{const _0x4f380a=_0x11c43e;if(validateAccess(_0x422c51,_0x132100)[_0x4f380a(0x21e)])confirmMessage(_0xa26d49);else logger[_0x4f380a(0x254)](_0x4f380a(0x125));}),_0x18741a['on']('logout',_0x2c45f6=>{const _0x617b83=_0x11c43e;if(validateAccess(_0x2c45f6,_0x132100)[_0x617b83(0x21e)]){if(devices[_0x132100][_0x617b83(0x1d3)])clearTimeout(devices[_0x132100][_0x617b83(0x1d3)]);if(devices[_0x132100][_0x617b83(0x212)])clearTimeout(devices[_0x132100][_0x617b83(0x212)]);removeSocketListeners(getClient(_0x18741a['id'])['uuid']),addBlacklist(_0x132100),devices[_0x132100][_0x617b83(0x248)]=null,devices[_0x132100]['telegram2FaApproval']=null,devices[_0x132100]['access'][_0x617b83(0x226)]=null,io['to'](getClient(_0x18741a['id'])[_0x617b83(0xf7)])[_0x617b83(0xf1)](_0x617b83(0x233),{'access':{'allow':![],'reason':_0x617b83(0xcd),'token':null}});}else logger[_0x617b83(0x254)](_0x617b83(0x256));});}function _0x35f5(){const _0x1169bc=['full','reject','Unauthorized\x20attempt\x20to\x20log\x20out','uncaughtException','getSeconds','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','running','sendFile','disabled','getStartingBalances','search','botID','Token\x20blacklisted','date-fns','stopPolling','All','connection','add-bot','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','temporary\x20access\x20rejected','set','logged\x20out','get-starting-balances','hex','expiry','/update\x20-\x20update\x20Balance\x20Bot\x0a','2FA\x20required','Markdown','get-messages','Crypt','/:bot/performance','2FA\x20login\x20required','Allow\x20login\x20from\x20IP\x20address\x20<b>','reason','temporary\x20access\x20not\x20allowed','auto','test','telegramToken','handshake','/:bot/coins','https://api.ipify.org?format=json','login\x20token\x20valid','(((.+)+)+)+$','jsonwebtoken','55NNcwKa','Password\x20has\x20been\x20reset\x20to:\x20','3666540yeWNfv','NTBA_FIX_319','defaults','then','sockets','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','1000','bb/','config/','.zip','ipaddr.js','emit','\x20minutes','login','filter','toIPv4Address','auth','uuid','Access\x20enabled\x20for\x20','add','botmanager','SIGTERM','randomBytes','graphql-request','bbPassword','toIPv4MappedAddress','408096GsCKpB','build2','/:bot/configuration','login\x20not\x20required','answerCallbackQuery','Starting\x20Balance\x20Bot\x20update','format','telegramEvents','remove','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','-config.json','30\x20min','existsSync','Login\x20accepted','5hPUjMb','kind','enabled','botname','connected','3000','bbvNew','/off\x20-\x20stop\x20bot(s)\x0a','initclient','alerts','apiSecret','forEach','10745YBrYYU','username','mode','host','telegramUsername','disconnect','0.0.0','lastmsgemitted','password','hashSync','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Unauthorized\x20attempt\x20to\x20confirm\x20message','emitHistory','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20login\x20attempt\x20(timeout)','remoteAddress','constructor','\x20>\x20','RSA-OAEP','bots','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20update\x20bot','messages','output-002.log','update-bb','stop','express','place-order','<b>Telegram\x20Bot\x20Status:</b>\x0a','/names\x20-\x20show\x20bot\x20names\x0a','output-003.log','chat','reset-password','logout','mkdirSync','store-headless','slice','publicKey','headless','zip/','<b>Balance\x20Bot\x20Status:</b>\x0a','function','\x20(1)','*$1*','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','bbUsername','store-settings','output-000.log','Unauthorized\x20attempt\x20to\x20download\x20','split','mixpanel','cancel-loading','deleted\x20Bot\x20','login\x20token\x20generated','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','new','length','fork','keys','All\x20bots\x20running\x20right\x20now','getMinutes','file','socket','toString','-----------------------------------------------------------------------------------','/restart\x20-\x20restart\x20bot(s)\x0a','yes','access\x20timeout','secure','store','getFullYear','invalid\x20credentials','binary','-events.json','any','::ffff:127.0.0.1','inherit','join','generate','live','event','2FA','restart','push','/:bot/portfolio','starting\x20bot\x20|\x20Bot\x20','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','\x20only\x0a','referer','access','write','bot','settings','find','max','readdirSync','assign','args','sort','Bot\x20Mgr\x20>\x20','userid','simple','get-portfolio','argv','placeOrder','Unauthorized\x20attempt\x20to\x20add\x20bot','replace','Bot\x20','request','Temporary\x20access\x20rejected','cloneDeep','readFileSync','timestamp','timeshift','socket.io','secret','error\x20while\x20deleting\x20config\x20files:\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/disable\x20-\x20disable\x20notifications\x0a','$1_$2_$3','onText','login\x20required','Invalid\x20username\x20or\x20IP\x20address','You\x20can\x20use\x20the\x20following\x20commands:\x0a','************','</b>\x20?','axios','store-configuration','createWriteStream','127.0.0.1','telegrammsg','sendPortfolioTelegram','telegramEnabled','/:bot/support','Notifications\x20disabled','logs/',':\x20Bot\x20Mgr\x20>\x20','catch','No\x20authentication\x20token','Ok,\x20will\x20send\x20alert\x20notifications\x20only','temporary\x20token\x20generated','conn','http','f2aRequired','User\x20has\x20been\x20validated','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','show','type','lastmsgtelegram','logs','stringify','showname','crypto','build','sign','DEFLATE','apiKey','log','orders','Notifications\x20disabled\x0a','copyFileSync','output-001.log','telegram','tkn','track','backup','params','getDate','Unauthorized\x20attempt\x20to\x20update\x20settings','getTime','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','2FA\x20login\x20token\x20generated','send','No\x20bots\x20running\x20right\x20now','Invalid\x20authentication\x20token\x20(1)','verify','-performance.json','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','clients','bb-secure.json','index.html','19558KjpzZw','min','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20get\x20portfolio','pidRefreshToken','parse','85yzybiX','Error:\x20Invalid\x20argument\x20','storeConfiguration','new-disabled','error','all','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','backup/','success','message','startsWith','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','2FA\x20login\x20rejected','Alerts','server','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','whitelist','node-zip','190EjBXbH','isValid','padStart','started','\x20mode','env','lowdb/adapters/FileSync','decrypt','polling_error','exp','15\x20min','disabled\x20Bot\x20','enabled\x20Bot\x20','listen','stopped','removeListener','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','confirm-message','once','lowdb','number','Orders','version','\x20|\x20','telegramChatId','Unauthorized\x20attempt\x20to\x20get\x20logs','bbvReceive','isDirectory','name','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','ipc','exec','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','whitelistEnabled','port','/help\x20-\x20show\x20available\x20commands\x0a','cancelLoading','node-telegram-bot-api','settings.','apply','path','exit','value','pidExpireLogin','Unauthorized\x20attempt\x20to\x20delete\x20alerts','All\x20bots','::1','\x20to\x20','bot.js','privateKey','bot-','writeFileSync','storeHeadless','495980HfTvhk','static','allow','kill','use','includes','/status\x20-\x20show\x20bot(s)\x20status\x0a','Yes','sortBy','get','token','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','telegram2FaApproval','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','manual','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','encryptedUuid','/on\x20-\x20start\x20bot(s)\x0a','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','data','-results.json','headers','getPortfolio','status','removeAllListeners','Invalid\x20IP\x20address','blacklist','latestversion','HTML','Invalid\x20Telegram\x20token','ipv6','280dHBNok','unlinkSync','loginRequired','from','***','updatebotmanager','847794TXjIPy','toggle-bot-mode','hasOwnProperty','callback_query','404\x20Not\x20Found','hybrid-crypto-js','Notifications\x20enabled\x0a','telegramIpApproval','sendMessage','5\x20min','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','bcryptjs','reload','idling\x20bot\x20\x20\x20|\x20Bot\x20','clientip','getUTCHours',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','4750764piphWw','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'];_0x35f5=function(){return _0x1169bc;};return _0x35f5();}function initializeSocketBot(_0x7318be){const _0x44658c=_0xcf7e33,_0x2dee85=getClient(_0x7318be['id'])[_0x44658c(0x175)],_0x4b628b=getClient(_0x7318be['id'])['uuid'];_0x7318be['on']('get-logs',(_0x3778d0,_0xd81b73)=>{const _0x5c5967=_0x44658c;if(validateAccess(_0xd81b73,_0x4b628b)['allow']){if(pid[_0x2dee85])pid[_0x2dee85][_0x5c5967(0x1c6)]({'function':_0x5c5967(0x126),'args':_0x3778d0});}else logger[_0x5c5967(0x254)](_0x5c5967(0x200));}),_0x7318be['on']('delete-alerts',(_0x5835d4,_0x2b11d3)=>{const _0x5f35c6=_0x44658c;if(validateAccess(_0x2b11d3,_0x4b628b)[_0x5f35c6(0x21e)]){if(pid[_0x2dee85])pid[_0x2dee85][_0x5f35c6(0x1c6)]({'function':'deleteHistoryAlerts','args':_0x5835d4});}else logger['full'](_0x5f35c6(0x213));}),_0x7318be['on'](_0x44658c(0x180),(_0x128b67,_0xc90cf)=>{const _0x5ec90e=_0x44658c;if(validateAccess(_0xc90cf,_0x4b628b)['allow']){if(pid[_0x2dee85])pid[_0x2dee85][_0x5ec90e(0x1c6)]({'function':_0x5ec90e(0x232),'args':_0x128b67});}else logger['full'](_0x5ec90e(0x1d2));}),_0x7318be['on'](_0x44658c(0x199),(_0x41a7cb,_0x200fc1)=>{const _0x5187be=_0x44658c;if(validateAccess(_0x200fc1,_0x4b628b)['allow']){if(pid[_0x2dee85])pid[_0x2dee85][_0x5187be(0x1c6)]({'function':_0x5187be(0x1d7),'args':_0x41a7cb});}else logger[_0x5187be(0x254)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x7318be['on'](_0x44658c(0x13d),(_0x236ed3,_0x2525b1)=>{const _0x58bf71=_0x44658c;if(validateAccess(_0x2525b1,_0x4b628b)['allow']){if(pid[_0x2dee85])pid[_0x2dee85][_0x58bf71(0x1c6)]({'function':_0x58bf71(0x21b),'args':_0x236ed3});}else logger[_0x58bf71(0x254)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x7318be['on'](_0x44658c(0xce),_0x26ab34=>{const _0x40d0f0=_0x44658c;if(validateAccess(_0x26ab34,_0x4b628b)[_0x40d0f0(0x21e)]){if(pid[_0x2dee85])pid[_0x2dee85][_0x40d0f0(0x1c6)]({'function':_0x40d0f0(0x25d),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x7318be['on'](_0x44658c(0x135),(_0x62db3b,_0x45978d)=>{const _0x2bcf70=_0x44658c;if(validateAccess(_0x45978d,_0x4b628b)[_0x2bcf70(0x21e)]){if(pid[_0x2dee85])pid[_0x2dee85]['send']({'function':_0x2bcf70(0x182),'args':_0x62db3b});}else logger[_0x2bcf70(0x254)](_0x2bcf70(0x109));}),_0x7318be['on'](_0x44658c(0x14d),_0x353895=>{const _0x39e120=_0x44658c;if(validateAccess(_0x353895,_0x4b628b)[_0x39e120(0x21e)]){if(pid[_0x2dee85])pid[_0x2dee85]['send']({'function':_0x39e120(0x20b),'args':null});}else logger['full'](_0x39e120(0x207));}),_0x7318be['on'](_0x44658c(0x132),_0x47f7d8=>{const _0x8f30f3=_0x44658c;if(validateAccess(_0x47f7d8,_0x4b628b)[_0x8f30f3(0x21e)])updateBB();else logger[_0x8f30f3(0x254)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x7318be['on']('get-messages',_0xab6110=>{const _0x4960c1=_0x44658c;if(validateAccess(_0xab6110,_0x4b628b)[_0x4960c1(0x21e)])getMessages();else logger[_0x4960c1(0x254)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x7318be['on'](_0x44658c(0x1f8),(_0x51d370,_0x45d13d)=>{const _0x1eefd0=_0x44658c;if(validateAccess(_0x45d13d,_0x4b628b)[_0x1eefd0(0x21e)])confirmMessage(_0x51d370);else logger['full'](_0x1eefd0(0x125));}),_0x7318be['on'](_0x44658c(0x13b),_0x1729be=>{const _0x397d03=_0x44658c;if(validateAccess(_0x1729be,_0x4b628b)[_0x397d03(0x21e)]){if(devices[_0x4b628b][_0x397d03(0x1d3)])clearTimeout(devices[_0x4b628b][_0x397d03(0x1d3)]);if(devices[_0x4b628b]['pidExpireLogin'])clearTimeout(devices[_0x4b628b][_0x397d03(0x212)]);removeSocketListeners(getClient(_0x7318be['id'])[_0x397d03(0xf7)]),addBlacklist(_0x4b628b),devices[_0x4b628b][_0x397d03(0x248)]=null,devices[_0x4b628b][_0x397d03(0x228)]=null,devices[_0x4b628b][_0x397d03(0x173)][_0x397d03(0x226)]=null,io['to'](getClient(_0x7318be['id'])[_0x397d03(0xf7)])[_0x397d03(0xf1)](_0x397d03(0x233),{'access':{'allow':![],'reason':_0x397d03(0xcd),'token':null}});}else logger['full'](_0x397d03(0x256));});}function removeSocketListeners(_0x36e98c){const _0x5e49b1=_0xcf7e33;getClientsWithUuid(_0x36e98c)[_0x5e49b1(0x119)](_0x1c82f2=>{const _0x39eab3=_0x5e49b1;getSocket(_0x1c82f2['id'])[_0x39eab3(0x234)]();});}function cleanSettings(){const _0x36d759=_0xcf7e33;let _0x4e23a8=settings;return settings['telegramToken']&&settings[_0x36d759(0xdd)]!=''&&(_0x4e23a8={..._0x4e23a8,'telegramToken':_0x36d759(0x196)}),settings[_0x36d759(0xfe)]&&settings[_0x36d759(0xfe)]!=''&&(_0x4e23a8={..._0x4e23a8,'bbPassword':_0x36d759(0x196)}),_0x4e23a8;}function updateBB(){const _0x6a94b8=_0xcf7e33;installingUpdate=!![],config[_0x6a94b8(0x119)](_0x2a5ea0=>{const _0x51ccfc=_0x6a94b8;restartBot(_0x2a5ea0[_0x51ccfc(0x25f)]);}),process[_0x6a94b8(0x1c6)]({'update':!![]},_0x5a8cd1=>{});}function startBot(_0x117458,_0x3856c7,_0x221f9d){const _0x55b5dd=_0xcf7e33;let _0x4580a2=![];const _0xd82d16=_0x117458[0x0];_0x3856c7={..._0x3856c7,'stdio':['inherit',_0x55b5dd(0x166),_0x55b5dd(0x166),_0x55b5dd(0x205)]},pid[_0xd82d16]=childProcess[_0x55b5dd(0x153)](botfile,_0x117458,_0x3856c7),pid[_0xd82d16]['on'](_0x55b5dd(0x1de),_0x2ea641=>{const _0x1f97c0=_0x55b5dd;switch(Object[_0x1f97c0(0x154)](_0x2ea641)[0x0]){case'botname':updateBotName(_0xd82d16,_0x2ea641[_0x1f97c0(0x111)]);break;case _0x1f97c0(0x240):updateBotManager();break;case _0x1f97c0(0x233):updateStatus(_0xd82d16,_0x2ea641[_0x1f97c0(0x233)]);break;case _0x1f97c0(0x169):updateLive(_0xd82d16,_0x2ea641['live']);break;case _0x1f97c0(0x1ea):updateLive(_0xd82d16,_0x2ea641[_0x1f97c0(0x1ea)]),io['to'](_0xd82d16)[_0x1f97c0(0xf1)](_0x1f97c0(0x233),{'access':{'allow':![],'reason':_0x1f97c0(0x24d),'token':null}});break;case _0x1f97c0(0x133):_0x2ea641[_0x1f97c0(0x133)]==_0x1f97c0(0x16c)&&restartBot(_0xd82d16);_0x2ea641['stop']==_0x1f97c0(0x21f)&&toggleBot(_0xd82d16,_0x1f97c0(0x25c),'stopped');break;case _0x1f97c0(0x1bc):sendTelegram(_0xd82d16,_0x2ea641[_0x1f97c0(0x1bc)]);break;case _0x1f97c0(0x19c):sendTelegramMsg(_0x2ea641[_0x1f97c0(0x19c)]);break;case _0x1f97c0(0x143):io['to'](_0xd82d16)[_0x1f97c0(0xf1)](_0x2ea641[_0x1f97c0(0x143)],_0x2ea641[_0x1f97c0(0x17b)]);break;}}),pid[_0xd82d16]['on'](_0x55b5dd(0x1d9),function(_0x5772cb){if(_0x4580a2)return;_0x4580a2=!![],_0x221f9d(_0x5772cb);}),pid[_0xd82d16]['on']('exit',async function(_0x2983ce){const _0x48f6e6=_0x55b5dd;if(installingUpdate)return;if(_0x4580a2)return;_0x4580a2=!![],_0x221f9d(null);const _0x26d915=dbConfig[_0x48f6e6(0x225)](_0x48f6e6(0x12d))[_0x48f6e6(0x177)]({'botID':_0xd82d16})['value']();_0x26d915&&(_0x26d915[_0x48f6e6(0x233)]=='enabled'||_0x26d915[_0x48f6e6(0x233)]=='new')&&(await sleep(0x3e8),updateLive(_0xd82d16,_0x48f6e6(0x1f5)),logger['full']('restarting\x20Bot\x20'+_0xd82d16),startBot([_0xd82d16,userID],{'cwd':bbpath},function(_0x15dde7){const _0x4bf5fb=_0x48f6e6;if(_0x15dde7)logger[_0x4bf5fb(0x254)](_0x15dde7);}));});}function stopBot(_0x52cdfa){getClientsWithBotID(_0x52cdfa)['forEach'](_0x2fddd4=>{const _0x4697e7=_0x2108;getSocket(_0x2fddd4['id'])[_0x4697e7(0x11f)](!![]),removeClient(_0x2fddd4['id']);}),pid[_0x52cdfa]&&(pid[_0x52cdfa]['kill'](),pid[_0x52cdfa]=null);}function restartBot(_0x5488a4){if(pid[_0x5488a4])pid[_0x5488a4]['kill']();}function addBot(){const _0x1d5e33=_0xcf7e33;let _0xb02172;for(let _0x9fb745=0x1;_0x9fb745<0x3e9;_0x9fb745++){_0xb02172=_0x9fb745[_0x1d5e33(0x159)]()[_0x1d5e33(0x1e9)](0x3,'0');let _0x208f70=config['find'](_0x80c738=>_0x80c738[_0x1d5e33(0x25f)]==_0xb02172);if(!_0x208f70)break;}if(_0xb02172===_0x1d5e33(0xec)){logger['full']('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x1d5e33(0x254)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0xb02172),dbConfig[_0x1d5e33(0x225)](_0x1d5e33(0x12d))[_0x1d5e33(0x16d)]({'botID':_0xb02172,'botname':_0x1d5e33(0x185)+_0xb02172,'status':_0x1d5e33(0x151),'live':''})[_0x1d5e33(0x174)](),startBot([_0xb02172,userID],{'cwd':bbpath},function(_0x7185a4){const _0x52b311=_0x1d5e33;if(_0x7185a4)logger[_0x52b311(0x254)](_0x7185a4);}),config=getConfiguration(),io['to']('botmanager')[_0x1d5e33(0xf1)](_0x1d5e33(0x12d),config);}function deleteBot(_0x557cc2){const _0x2cd7eb=_0xcf7e33;getClientsWithBotID(_0x557cc2)['forEach'](_0x362f02=>{const _0x37c29e=_0x2108;getSocket(_0x362f02['id'])[_0x37c29e(0x11f)](!![]),removeClient(_0x362f02['id']);}),dbConfig[_0x2cd7eb(0x225)](_0x2cd7eb(0x12d))[_0x2cd7eb(0x108)]({'botID':_0x557cc2})[_0x2cd7eb(0x174)](),logger[_0x2cd7eb(0x254)](_0x2cd7eb(0x14e)+_0x557cc2),stopBot(_0x557cc2);try{fs['unlinkSync'](path[_0x2cd7eb(0x167)](configpath,'bot-'+_0x557cc2+_0x2cd7eb(0x10a))),fs[_0x2cd7eb(0x23c)](path[_0x2cd7eb(0x167)](configpath,_0x2cd7eb(0x219)+_0x557cc2+_0x2cd7eb(0x163))),fs[_0x2cd7eb(0x23c)](path[_0x2cd7eb(0x167)](configpath,_0x2cd7eb(0x219)+_0x557cc2+_0x2cd7eb(0x1ca))),fs[_0x2cd7eb(0x23c)](path['join'](configpath,_0x2cd7eb(0x219)+_0x557cc2+_0x2cd7eb(0x230)));}catch(_0xebc23f){if(_0xebc23f)logger[_0x2cd7eb(0x254)](_0x2cd7eb(0x18e),_0xebc23f);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x2cd7eb(0x12d),config);}function toggleBot(_0x551e1e,_0x3db26a,_0x1a8e40){const _0x45a178=_0xcf7e33;dbConfig[_0x45a178(0x225)](_0x45a178(0x12d))['find']({'botID':_0x551e1e})['assign']({'status':_0x3db26a})['assign']({'live':_0x1a8e40})['write']();if(_0x3db26a==_0x45a178(0x110)||_0x3db26a==_0x45a178(0x151))logger['full'](_0x45a178(0x1f3)+_0x551e1e),startBot([_0x551e1e,userID],{'cwd':bbpath},function(_0x4e255a){if(_0x4e255a)logger['full'](_0x4e255a);});else(_0x3db26a==_0x45a178(0x25c)||_0x3db26a==_0x45a178(0x1d8))&&(logger[_0x45a178(0x254)](_0x45a178(0x1f2)+_0x551e1e),stopBot(_0x551e1e));config=getConfiguration(),io['to']('botmanager')[_0x45a178(0xf1)](_0x45a178(0x12d),config);}function toggleStatus(_0x3d6cbc){const _0x16f9e8=_0xcf7e33;let _0x289a06=dbConfig[_0x16f9e8(0x225)](_0x16f9e8(0x12d))[_0x16f9e8(0x177)]({'botID':_0x3d6cbc})['value'](),_0xc163e0;if(_0x289a06['status']===_0x16f9e8(0x110))_0xc163e0=_0x16f9e8(0x25c);else{if(_0x289a06[_0x16f9e8(0x233)]==='new')_0xc163e0=_0x16f9e8(0x1d8);else{if(_0x289a06['status']===_0x16f9e8(0x1d8))_0xc163e0=_0x16f9e8(0x151);else{if(_0x289a06[_0x16f9e8(0x233)]===_0x16f9e8(0x25c))_0xc163e0=_0x16f9e8(0x110);}}}return _0xc163e0;}function updateStatus(_0x8f873f,_0x2608b9){const _0x4abc08=_0xcf7e33;dbConfig[_0x4abc08(0x225)](_0x4abc08(0x12d))[_0x4abc08(0x177)]({'botID':_0x8f873f})[_0x4abc08(0x17a)]({'status':_0x2608b9})[_0x4abc08(0x174)](),config=getConfiguration(),io['to'](_0x4abc08(0xfa))[_0x4abc08(0xf1)](_0x4abc08(0x12d),config);}function updateLive(_0x2ec5a9,_0x120b60){const _0x590518=_0xcf7e33;dbConfig['get'](_0x590518(0x12d))[_0x590518(0x177)]({'botID':_0x2ec5a9})[_0x590518(0x17a)]({'live':_0x120b60})[_0x590518(0x174)](),config=getConfiguration(),io['to'](_0x590518(0xfa))[_0x590518(0xf1)](_0x590518(0x12d),config);}function updateBotName(_0x376891,_0x508856){const _0x27494a=_0xcf7e33;dbConfig['get'](_0x27494a(0x12d))[_0x27494a(0x177)]({'botID':_0x376891})['assign']({'botname':_0x508856})[_0x27494a(0x174)](),config=getConfiguration(),io['to']('botmanager')[_0x27494a(0xf1)](_0x27494a(0x12d),config);}function updateBotManager(){const _0x2dad4e=_0xcf7e33;config=getConfiguration(),io['to']('botmanager')[_0x2dad4e(0xf1)]('bots',config);}function toggleBotMode(_0x521f26){const _0x9ff050=_0xcf7e33;if(pid[_0x521f26])pid[_0x521f26][_0x9ff050(0x1c6)]({'function':'toggleBotMode','args':null});else{const _0x360898=configpath+'bot-'+_0x521f26+_0x9ff050(0x10a),_0x4ab082=fs[_0x9ff050(0x189)](_0x360898),_0x7ea394=JSON[_0x9ff050(0x1d4)](_0x4ab082),_0x33e45f=_0x7ea394[_0x9ff050(0x175)][0x0][_0x9ff050(0x140)];_0x7ea394[_0x9ff050(0x175)][0x0][_0x9ff050(0x140)]=!_0x33e45f;const _0x405bac=JSON[_0x9ff050(0x1b0)](_0x7ea394,null,0x2);fs[_0x9ff050(0x21a)](_0x360898,_0x405bac),config=getConfiguration(),io['to'](_0x9ff050(0xfa))[_0x9ff050(0xf1)](_0x9ff050(0x12d),config);}}function telegramError(_0x4ff0d3){const _0x3fe226=_0xcf7e33;logger[_0x3fe226(0x17f)](getTimeStamp()+_0x3fe226(0x251));}function validateTelegram(_0x4445f6){const _0x1dbc6a=_0xcf7e33;if(_0x4445f6['from']['username']!=settings[_0x1dbc6a(0x11e)]&&'@'+_0x4445f6[_0x1dbc6a(0x23e)][_0x1dbc6a(0x11b)]!=settings[_0x1dbc6a(0x11e)])return tgBot['sendMessage'](_0x4445f6[_0x1dbc6a(0x139)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1dbc6a(0x238)})[_0x1dbc6a(0x1a3)](_0x4982c3=>{telegramError(_0x4982c3);}),![];return!![];}async function initTelegram(){const _0x2e6056=_0xcf7e33;if(tgBot)tgBot[_0x2e6056(0xc6)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2e6056(0xdd)],{'polling':!![]});let _0x562dfa=_0x2e6056(0x195);_0x562dfa+='\x0a',_0x562dfa+='/enable\x20-\x20enable\x20notifications\x0a',_0x562dfa+=_0x2e6056(0x190),_0x562dfa+=_0x2e6056(0x229),_0x562dfa+=_0x2e6056(0x15b),_0x562dfa+=_0x2e6056(0x22d),_0x562dfa+=_0x2e6056(0x115),_0x562dfa+=_0x2e6056(0x22e),_0x562dfa+=_0x2e6056(0x137),_0x562dfa+=_0x2e6056(0x222),_0x562dfa+=_0x2e6056(0x1cb),_0x562dfa+=_0x2e6056(0xd1),_0x562dfa+=_0x2e6056(0x20a);let _0x498508=_0x2e6056(0x22b);_0x498508+='\x0a',_0x498508+=_0x562dfa,tgBot[_0x2e6056(0x192)](/\/start/,_0x11e39a=>{const _0x29d51a=_0x2e6056;if(!validateTelegram(_0x11e39a))return;if(settings[_0x29d51a(0x1ff)]!=_0x11e39a['chat']['id'])updateSetting('telegramChatId',_0x11e39a[_0x29d51a(0x139)]['id']);updateSetting(_0x29d51a(0x19e),!![]),tgBot['sendMessage'](_0x11e39a[_0x29d51a(0x139)]['id'],_0x498508)[_0x29d51a(0x1a3)](_0x135e34=>{telegramError(_0x135e34);});}),tgBot[_0x2e6056(0x192)](/\/enable/,_0x48cff8=>{const _0x3e0cd7=_0x2e6056;if(!validateTelegram(_0x48cff8))return;if(settings[_0x3e0cd7(0x1ff)]!=_0x48cff8[_0x3e0cd7(0x139)]['id'])updateSetting(_0x3e0cd7(0x1ff),_0x48cff8['chat']['id']);updateSetting(_0x3e0cd7(0x19e),!![]),tgBot[_0x3e0cd7(0x249)](_0x48cff8[_0x3e0cd7(0x139)]['id'],'Notifications\x20enabled')[_0x3e0cd7(0x1a3)](_0x42e2de=>{telegramError(_0x42e2de);});}),tgBot['onText'](/\/config/,async _0x39bc0d=>{const _0x55c048=_0x2e6056;if(!validateTelegram(_0x39bc0d))return;tgBot[_0x55c048(0x1f6)](_0x55c048(0x244)),tgBot[_0x55c048(0x249)](_0x39bc0d['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x55c048(0x1fc),'callback_data':_0x55c048(0x1b8)},{'text':_0x55c048(0x1e2),'callback_data':'alerts'},{'text':_0x55c048(0xc7),'callback_data':_0x55c048(0x1da)}]]}})[_0x55c048(0x1a3)](_0x521ac4=>{telegramError(_0x521ac4);}),tgBot['on'](_0x55c048(0x244),async _0x2e32ec=>{const _0xc6242d=_0x55c048,_0x2bd470=_0x2e32ec[_0xc6242d(0x22f)],_0x3a7377=_0x2e32ec[_0xc6242d(0x1de)];tgBot['answerCallbackQuery'](_0x2e32ec['id'])[_0xc6242d(0xe9)](async()=>{const _0x8b1d91=_0xc6242d;_0x2bd470==_0x8b1d91(0x1b8)&&(updateSetting('telegramEvents',_0x8b1d91(0x1b8)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3a7377[_0x8b1d91(0x139)]['id'],_0x8b1d91(0x12e))[_0x8b1d91(0x1a3)](_0x535261=>{telegramError(_0x535261);}));_0x2bd470==_0x8b1d91(0x117)&&(updateSetting(_0x8b1d91(0x107),_0x8b1d91(0x117)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3a7377[_0x8b1d91(0x139)]['id'],_0x8b1d91(0x1a5))['catch'](_0x2f3eb0=>{telegramError(_0x2f3eb0);}));_0x2bd470==_0x8b1d91(0x1da)&&(updateSetting('telegramEvents',_0x8b1d91(0x1da)),updateSetting(_0x8b1d91(0x19e),!![]),await tgBot[_0x8b1d91(0x249)](_0x3a7377[_0x8b1d91(0x139)]['id'],_0x8b1d91(0x1d1))[_0x8b1d91(0x1a3)](_0x36d826=>{telegramError(_0x36d826);}));if(!settings[_0x8b1d91(0x1ff)])tgBot['sendMessage'](_0x3a7377['chat']['id'],_0x8b1d91(0x1e0))[_0x8b1d91(0x1a3)](_0x31c4cb=>{telegramError(_0x31c4cb);});}),tgBot[_0xc6242d(0x1f6)]('callback_query');});}),tgBot[_0x2e6056(0x192)](/\/status/,_0x2e0ed8=>{const _0x862cdb=_0x2e6056;if(!validateTelegram(_0x2e0ed8))return;const _0x246711=getBotsWithMode();let _0x294358=_0x862cdb(0x142);config[_0x862cdb(0x119)](_0x10f8c5=>{const _0x49c769=_0x862cdb,_0x5b5c21=_0x246711[_0x49c769(0x177)](_0x5f1110=>_0x5f1110[_0x49c769(0x25f)]==_0x10f8c5[_0x49c769(0x25f)])['mode'];_0x294358+=_0x49c769(0x185)+_0x10f8c5[_0x49c769(0x25f)]+':\x20'+_0x10f8c5[_0x49c769(0x233)]+_0x49c769(0x1fe)+_0x5b5c21+_0x49c769(0x1fe)+_0x10f8c5[_0x49c769(0x169)]+'\x0a';}),_0x294358+='\x0a',_0x294358+=_0x862cdb(0x136),_0x294358+=!settings[_0x862cdb(0x19e)]?_0x862cdb(0x1b9):_0x862cdb(0x247),_0x294358+=settings['telegramEnabled']?settings['telegramEvents']==_0x862cdb(0x1da)?_0x862cdb(0x18f):'Notifications\x20types:\x20'+settings[_0x862cdb(0x107)]+_0x862cdb(0x171):'',tgBot[_0x862cdb(0x249)](_0x2e0ed8[_0x862cdb(0x139)]['id'],_0x294358,{'parse_mode':_0x862cdb(0x238)})[_0x862cdb(0x1a3)](_0x5c8a80=>{telegramError(_0x5c8a80);});}),tgBot['onText'](/\/restart/,_0x5275b3=>{const _0x1f4365=_0x2e6056;if(!validateTelegram(_0x5275b3))return;tgBot['removeListener'](_0x1f4365(0x244));const _0xef3132=getEnabledBots();if(_0xef3132['length']==0x0)tgBot[_0x1f4365(0x249)](_0x5275b3['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x1f4365(0x1a3)](_0x2d8ac2=>{telegramError(_0x2d8ac2);});else{if(_0xef3132[_0x1f4365(0x152)]>0x1)_0xef3132[_0x1f4365(0x16d)]({'botID':'all'});let _0x508a0c=[],_0x487611=[];const _0x578568=_0xef3132[_0x1f4365(0x152)]%0x4==0x0||_0xef3132[_0x1f4365(0x152)]%0x4==0x3||_0xef3132[_0x1f4365(0x152)]%0x3==0x1?0x4:0x3;let _0x428f40=0x0;_0xef3132[_0x1f4365(0x119)]((_0x13160b,_0x12dc64)=>{const _0x50fa62=_0x1f4365;if(_0x12dc64%_0x578568==0x0)_0x487611=[];_0x487611[_0x50fa62(0x16d)]({'text':_0x13160b[_0x50fa62(0x25f)]==_0x50fa62(0x1da)?_0x50fa62(0x214):_0x50fa62(0x185)+_0x13160b[_0x50fa62(0x25f)],'callback_data':_0x13160b['botID']}),_0x12dc64%_0x578568==0x0&&(_0x508a0c[_0x428f40]=_0x487611,_0x428f40++);}),tgBot[_0x1f4365(0x249)](_0x5275b3[_0x1f4365(0x139)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x508a0c}})[_0x1f4365(0x1a3)](_0xb7e7b7=>{telegramError(_0xb7e7b7);}),tgBot['on']('callback_query',async _0x185ddd=>{const _0x12f36a=_0x1f4365,_0x39ec8b=_0x185ddd['data'],_0x40a5d3=_0x185ddd[_0x12f36a(0x1de)];tgBot['answerCallbackQuery'](_0x185ddd['id'])[_0x12f36a(0xe9)](async()=>{const _0x51faae=_0x12f36a;_0x39ec8b=='all'?config[_0x51faae(0x119)](_0x2ef9ab=>{const _0x4d4a53=_0x51faae;restartBot(_0x2ef9ab[_0x4d4a53(0x25f)]);}):restartBot(_0x39ec8b);}),tgBot['removeListener'](_0x12f36a(0x244));});}}),tgBot['onText'](/\/on/,_0x5424be=>{const _0x569481=_0x2e6056;if(!validateTelegram(_0x5424be))return;tgBot[_0x569481(0x1f6)](_0x569481(0x244));const _0x324c50=getDisabledBots();if(_0x324c50[_0x569481(0x152)]==0x0)tgBot[_0x569481(0x249)](_0x5424be[_0x569481(0x139)]['id'],_0x569481(0x155))['catch'](_0x58a035=>{telegramError(_0x58a035);});else{if(_0x324c50['length']>0x1)_0x324c50[_0x569481(0x16d)]({'botID':_0x569481(0x1da)});let _0x14ded8=[],_0x3b550a=[];const _0x395b3e=_0x324c50[_0x569481(0x152)]%0x4==0x0||_0x324c50[_0x569481(0x152)]%0x4==0x3||_0x324c50[_0x569481(0x152)]%0x3==0x1?0x4:0x3;let _0x3fb382=0x0;_0x324c50['forEach']((_0x57decf,_0x10daca)=>{const _0x21da58=_0x569481;if(_0x10daca%_0x395b3e==0x0)_0x3b550a=[];_0x3b550a['push']({'text':_0x57decf[_0x21da58(0x25f)]==_0x21da58(0x1da)?_0x21da58(0x214):_0x21da58(0x185)+_0x57decf[_0x21da58(0x25f)],'callback_data':_0x57decf[_0x21da58(0x25f)]}),_0x10daca%_0x395b3e==0x0&&(_0x14ded8[_0x3fb382]=_0x3b550a,_0x3fb382++);}),tgBot[_0x569481(0x249)](_0x5424be[_0x569481(0x139)]['id'],_0x569481(0x127),{'reply_markup':{'inline_keyboard':_0x14ded8}})[_0x569481(0x1a3)](_0xec31e2=>{telegramError(_0xec31e2);}),tgBot['on']('callback_query',async _0x36f676=>{const _0x59151c=_0x569481,_0x5db857=_0x36f676[_0x59151c(0x22f)],_0x4abc65=_0x36f676[_0x59151c(0x1de)];tgBot[_0x59151c(0x104)](_0x36f676['id'])['then'](async()=>{const _0x52090a=_0x59151c;_0x5db857=='all'?(tgBot[_0x52090a(0x249)](_0x4abc65[_0x52090a(0x139)]['id'],_0x52090a(0x150))['catch'](_0x22c8cb=>{telegramError(_0x22c8cb);}),_0x324c50[_0x52090a(0x119)](_0x318233=>{const _0x3dfe5f=_0x52090a;if(_0x318233[_0x3dfe5f(0x25f)]!=_0x3dfe5f(0x1da))toggleBot(_0x318233[_0x3dfe5f(0x25f)],toggleStatus(_0x318233[_0x3dfe5f(0x25f)]),'stopped');})):(tgBot[_0x52090a(0x249)](_0x4abc65[_0x52090a(0x139)]['id'],_0x52090a(0x1f7)+_0x5db857)['catch'](_0x2e07cd=>{telegramError(_0x2e07cd);}),toggleBot(_0x5db857,toggleStatus(_0x5db857),_0x52090a(0x1f5)));}),tgBot[_0x59151c(0x1f6)](_0x59151c(0x244));});}}),tgBot[_0x2e6056(0x192)](/\/off/,_0x3ad6f6=>{const _0x5ad7a3=_0x2e6056;if(!validateTelegram(_0x3ad6f6))return;tgBot[_0x5ad7a3(0x1f6)](_0x5ad7a3(0x244));const _0x472eff=getEnabledBots();if(_0x472eff['length']==0x0)tgBot[_0x5ad7a3(0x249)](_0x3ad6f6[_0x5ad7a3(0x139)]['id'],_0x5ad7a3(0x1c7))[_0x5ad7a3(0x1a3)](_0x21387d=>{telegramError(_0x21387d);});else{if(_0x472eff[_0x5ad7a3(0x152)]>0x1)_0x472eff[_0x5ad7a3(0x16d)]({'botID':'all'});let _0x10af2c=[],_0x3b9834=[];const _0x342165=_0x472eff[_0x5ad7a3(0x152)]%0x4==0x0||_0x472eff[_0x5ad7a3(0x152)]%0x4==0x3||_0x472eff[_0x5ad7a3(0x152)]%0x3==0x1?0x4:0x3;let _0x3b940a=0x0;_0x472eff[_0x5ad7a3(0x119)]((_0x3e58c2,_0x4610c7)=>{const _0x5f2fc8=_0x5ad7a3;if(_0x4610c7%_0x342165==0x0)_0x3b9834=[];_0x3b9834['push']({'text':_0x3e58c2[_0x5f2fc8(0x25f)]==_0x5f2fc8(0x1da)?_0x5f2fc8(0x214):'Bot\x20'+_0x3e58c2[_0x5f2fc8(0x25f)],'callback_data':_0x3e58c2['botID']}),_0x4610c7%_0x342165==0x0&&(_0x10af2c[_0x3b940a]=_0x3b9834,_0x3b940a++);}),tgBot[_0x5ad7a3(0x249)](_0x3ad6f6[_0x5ad7a3(0x139)]['id'],_0x5ad7a3(0x124),{'reply_markup':{'inline_keyboard':_0x10af2c}})[_0x5ad7a3(0x1a3)](_0x5d51cf=>{telegramError(_0x5d51cf);}),tgBot['on'](_0x5ad7a3(0x244),async _0x2b1d3d=>{const _0x2629b3=_0x5ad7a3,_0x43effe=_0x2b1d3d[_0x2629b3(0x22f)],_0x3db617=_0x2b1d3d[_0x2629b3(0x1de)];tgBot[_0x2629b3(0x104)](_0x2b1d3d['id'])[_0x2629b3(0xe9)](async()=>{const _0x28cbea=_0x2629b3;_0x43effe==_0x28cbea(0x1da)?(tgBot[_0x28cbea(0x249)](_0x3db617[_0x28cbea(0x139)]['id'],_0x28cbea(0x259))[_0x28cbea(0x1a3)](_0x838587=>{telegramError(_0x838587);}),_0x472eff[_0x28cbea(0x119)](_0x2512e1=>{const _0x59d806=_0x28cbea;if(_0x2512e1[_0x59d806(0x25f)]!=_0x59d806(0x1da))toggleBot(_0x2512e1['botID'],toggleStatus(_0x2512e1[_0x59d806(0x25f)]),_0x59d806(0x1f5));})):(tgBot[_0x28cbea(0x249)](_0x3db617['chat']['id'],_0x28cbea(0xca)+_0x43effe)[_0x28cbea(0x1a3)](_0x15d05e=>{telegramError(_0x15d05e);}),toggleBot(_0x43effe,toggleStatus(_0x43effe),_0x28cbea(0x1f5)));}),tgBot['removeListener'](_0x2629b3(0x244));});}}),tgBot[_0x2e6056(0x192)](/\/portfolio/,_0x46b4d3=>{const _0x5ef2ea=_0x2e6056;if(!validateTelegram(_0x46b4d3))return;tgBot['removeListener'](_0x5ef2ea(0x244));const _0x1da1bb=getEnabledBots();if(_0x1da1bb[_0x5ef2ea(0x152)]==0x0)tgBot[_0x5ef2ea(0x249)](_0x46b4d3[_0x5ef2ea(0x139)]['id'],_0x5ef2ea(0x1c7))['catch'](_0x449232=>{telegramError(_0x449232);});else{if(_0x1da1bb[_0x5ef2ea(0x152)]>0x1){let _0x5e83e5=[],_0x5478c5=[];const _0x46ef46=_0x1da1bb[_0x5ef2ea(0x152)]%0x4==0x0||_0x1da1bb['length']%0x4==0x3||_0x1da1bb[_0x5ef2ea(0x152)]%0x3==0x1?0x4:0x3;let _0x58554d=0x0;_0x1da1bb[_0x5ef2ea(0x119)]((_0x11e759,_0x87689)=>{const _0x2ab1c1=_0x5ef2ea;if(_0x87689%_0x46ef46==0x0)_0x5478c5=[];_0x5478c5[_0x2ab1c1(0x16d)]({'text':_0x2ab1c1(0x185)+_0x11e759[_0x2ab1c1(0x25f)],'callback_data':_0x11e759[_0x2ab1c1(0x25f)]}),_0x87689%_0x46ef46==0x0&&(_0x5e83e5[_0x58554d]=_0x5478c5,_0x58554d++);}),tgBot[_0x5ef2ea(0x249)](_0x46b4d3[_0x5ef2ea(0x139)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x5e83e5}})[_0x5ef2ea(0x1a3)](_0x41bab6=>{telegramError(_0x41bab6);}),tgBot['on'](_0x5ef2ea(0x244),async _0x262633=>{const _0x5a88f6=_0x5ef2ea,_0x24b490=_0x262633[_0x5a88f6(0x22f)],_0x34f4d0=_0x262633[_0x5a88f6(0x1de)];tgBot[_0x5a88f6(0x104)](_0x262633['id'])[_0x5a88f6(0xe9)](async()=>{const _0x2061d8=_0x5a88f6;if(pid[_0x24b490])pid[_0x24b490][_0x2061d8(0x1c6)]({'function':_0x2061d8(0x19d),'args':null});}),tgBot['removeListener'](_0x5a88f6(0x244));});}else{const _0x32118d=_0x1da1bb[0x0][_0x5ef2ea(0x25f)];if(pid[_0x32118d])pid[_0x32118d][_0x5ef2ea(0x1c6)]({'function':_0x5ef2ea(0x19d),'args':null});}}}),tgBot[_0x2e6056(0x192)](/\/update/,async _0x3d1037=>{const _0x2a96b7=_0x2e6056;if(!validateTelegram(_0x3d1037))return;tgBot[_0x2a96b7(0x1f6)](_0x2a96b7(0x244)),await getMessages();if(!updateAvailable)tgBot[_0x2a96b7(0x249)](_0x3d1037['chat']['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x2a96b7(0x1a3)](_0x389460=>{telegramError(_0x389460);});else!validInstallation?tgBot[_0x2a96b7(0x249)](_0x3d1037[_0x2a96b7(0x139)]['id'],_0x2a96b7(0x1ab))[_0x2a96b7(0x1a3)](_0x12493f=>{telegramError(_0x12493f);}):(tgBot[_0x2a96b7(0x249)](_0x3d1037[_0x2a96b7(0x139)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2a96b7(0x223),'callback_data':_0x2a96b7(0x15c)},{'text':'No','callback_data':'no'}]]}})[_0x2a96b7(0x1a3)](_0x5953c1=>{telegramError(_0x5953c1);}),tgBot['on'](_0x2a96b7(0x244),async _0x1c78a3=>{const _0x276721=_0x2a96b7,_0x3e71ca=_0x1c78a3[_0x276721(0x22f)],_0x39aad7=_0x1c78a3[_0x276721(0x1de)];tgBot['answerCallbackQuery'](_0x1c78a3['id'])[_0x276721(0xe9)](async()=>{const _0x5d57bf=_0x276721;_0x3e71ca==_0x5d57bf(0x15c)&&(await tgBot['sendMessage'](_0x39aad7[_0x5d57bf(0x139)]['id'],_0x5d57bf(0x105))[_0x5d57bf(0x1a3)](_0x20c901=>{telegramError(_0x20c901);}),updateBB());_0x3e71ca=='no'&&await tgBot[_0x5d57bf(0x249)](_0x39aad7[_0x5d57bf(0x139)]['id'],_0x5d57bf(0x1e4))[_0x5d57bf(0x1a3)](_0x434024=>{telegramError(_0x434024);});if(!settings['telegramChatId'])tgBot[_0x5d57bf(0x249)](_0x39aad7[_0x5d57bf(0x139)]['id'],_0x5d57bf(0x1e0))[_0x5d57bf(0x1a3)](_0x5bf5ab=>{telegramError(_0x5bf5ab);});}),tgBot['removeListener'](_0x276721(0x244));}));}),tgBot['onText'](/\/toggle/,_0x2820f3=>{const _0x59d16c=_0x2e6056;if(!validateTelegram(_0x2820f3))return;tgBot['removeListener'](_0x59d16c(0x244));const _0x100d91=getBotsWithMode();if(_0x100d91[_0x59d16c(0x152)]==0x0)tgBot['sendMessage'](_0x2820f3['chat']['id'],_0x59d16c(0x1c7))[_0x59d16c(0x1a3)](_0xcf880b=>{telegramError(_0xcf880b);});else{let _0x16e188=[],_0x541641=[];const _0x33558c=0x2;let _0x4babc4=0x0;_0x100d91['forEach']((_0x180d0c,_0x1a0a99)=>{const _0x455cbc=_0x59d16c;if(_0x1a0a99%_0x33558c==0x0)_0x541641=[];_0x541641['push']({'text':'Bot\x20'+_0x180d0c['botID']+'\x20('+_0x180d0c[_0x455cbc(0x11c)]+')','callback_data':_0x180d0c[_0x455cbc(0x25f)]}),_0x1a0a99%_0x33558c==0x0&&(_0x16e188[_0x4babc4]=_0x541641,_0x4babc4++);}),tgBot[_0x59d16c(0x249)](_0x2820f3[_0x59d16c(0x139)]['id'],_0x59d16c(0xeb),{'reply_markup':{'inline_keyboard':_0x16e188}})[_0x59d16c(0x1a3)](_0x5d9303=>{telegramError(_0x5d9303);}),tgBot['on'](_0x59d16c(0x244),async _0x596416=>{const _0x24a943=_0x59d16c,_0x5ce84f=_0x596416['data'],_0x4a3c9f=_0x596416[_0x24a943(0x1de)];tgBot[_0x24a943(0x104)](_0x596416['id'])[_0x24a943(0xe9)](async()=>{const _0x353815=_0x24a943,_0x2f18c4=_0x100d91['find'](_0x55a8ef=>_0x55a8ef[_0x353815(0x25f)]==_0x5ce84f),_0x12c138=_0x2f18c4[_0x353815(0x11c)]==_0x353815(0xdb)?_0x353815(0x22a):_0x353815(0xdb);tgBot['sendMessage'](_0x4a3c9f['chat']['id'],_0x353815(0x253)+_0x5ce84f+_0x353815(0x216)+_0x12c138+_0x353815(0x1eb))[_0x353815(0x1a3)](_0xa45faa=>{telegramError(_0xa45faa);}),toggleBotMode(_0x5ce84f);}),tgBot[_0x24a943(0x1f6)](_0x24a943(0x244));});}}),tgBot[_0x2e6056(0x192)](/\/names/,_0x1dbf65=>{const _0x4580c7=_0x2e6056;if(!validateTelegram(_0x1dbf65))return;let _0x39b753='';config['forEach'](_0x4ce262=>{const _0x7d3f91=_0x2108;_0x39b753+='Bot\x20'+_0x4ce262['botID']+':\x20'+_0x4ce262[_0x7d3f91(0x111)]+'\x0a';}),tgBot[_0x4580c7(0x249)](_0x1dbf65[_0x4580c7(0x139)]['id'],_0x39b753,{'parse_mode':_0x4580c7(0x238)})[_0x4580c7(0x1a3)](_0x6b02f3=>{telegramError(_0x6b02f3);});}),tgBot[_0x2e6056(0x192)](/\/disable/,_0x49e1c5=>{const _0x502274=_0x2e6056;if(!validateTelegram(_0x49e1c5))return;tgBot['sendMessage'](_0x49e1c5[_0x502274(0x139)]['id'],_0x502274(0x1a0))[_0x502274(0x1a3)](_0x4c28c5=>{telegramError(_0x4c28c5);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2e6056(0x192)](/\/help/,_0xbe2ed=>{const _0x7ee29d=_0x2e6056;if(!validateTelegram(_0xbe2ed))return;tgBot['sendMessage'](_0xbe2ed[_0x7ee29d(0x139)]['id'],_0x562dfa)['catch'](_0x1ca218=>{telegramError(_0x1ca218);});}),tgBot['on'](_0x2e6056(0x1ef),_0x3344cb=>{const _0x4c74da=_0x2e6056;_0x3344cb[_0x4c74da(0x159)]()[_0x4c74da(0x221)](_0x4c74da(0x245))&&(logger[_0x4c74da(0x254)]('Invalid\x20Telegram\x20token'),tgBot[_0x4c74da(0xc6)](),tgBot=null,io['to'](_0x4c74da(0xfa))[_0x4c74da(0xf1)]('notification',_0x4c74da(0x239)));}),process[_0x2e6056(0x1f9)]('SIGINT',()=>{const _0x2fb1a1=_0x2e6056;if(tgBot)tgBot[_0x2fb1a1(0xc6)]();process[_0x2fb1a1(0x210)](0x1);}),process[_0x2e6056(0x1f9)](_0x2e6056(0xfb),()=>{const _0x4d9ea0=_0x2e6056;if(tgBot)tgBot[_0x4d9ea0(0xc6)]();process[_0x4d9ea0(0x210)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x36c32e,_0x3f8742){const _0x4ec099=_0xcf7e33;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x4ec099(0x1da)||(_0x3f8742[_0x4ec099(0x1ad)]=='error'||_0x3f8742[_0x4ec099(0x1ad)]==_0x4ec099(0x1dd))&&settings[_0x4ec099(0x107)]==_0x4ec099(0x117)||_0x3f8742['type']=='order'&&settings[_0x4ec099(0x107)]==_0x4ec099(0x1b8)){if(tgBot&&settings[_0x4ec099(0x1ff)]){if(_0x3f8742[_0x4ec099(0x1b1)])tgBot['sendMessage'](settings[_0x4ec099(0x1ff)],_0x3f8742[_0x4ec099(0x111)]+_0x4ec099(0x12b)+_0x3f8742[_0x4ec099(0x16a)])[_0x4ec099(0x1a3)](_0x3c9e45=>{telegramError(_0x3c9e45);});else tgBot['sendMessage'](settings[_0x4ec099(0x1ff)],'Bot\x20'+_0x36c32e+_0x4ec099(0x12b)+_0x3f8742[_0x4ec099(0x16a)])[_0x4ec099(0x1a3)](_0x4b5a8e=>{telegramError(_0x4b5a8e);});}}}}async function sendTelegramMsg(_0x4ff260,_0x4fcd4f=_0xcf7e33(0x238)){const _0x22e38d=_0xcf7e33;return settings[_0x22e38d(0x19e)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x22e38d(0x249)](settings['telegramChatId'],_0x4ff260,{'parse_mode':_0x4fcd4f})[_0x22e38d(0x1a3)](_0x4368ae=>{telegramError(_0x4368ae);}),!![]):![];}function getDeviceWithIp(_0x33235b){const _0x4eb2c4=_0xcf7e33;return devices[_0x4eb2c4(0x177)](_0x63cc07=>_0x63cc07['ip']===_0x33235b);}function temporaryAccess2FA(_0x11640f,_0x17f0dc){const _0x226d7c=_0xcf7e33;let _0x2be0e9=new Date(),_0x5c0cb5=![];if(lastIpApproval){if(_0x2be0e9-lastIpApproval<0x1388)_0x5c0cb5=!![];}lastIpApproval=new Date();if(_0x5c0cb5)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x226d7c(0x1f6)](_0x226d7c(0x244)),tgBot[_0x226d7c(0x249)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x17f0dc)[_0x226d7c(0x1ac)]+_0x226d7c(0x197),{'parse_mode':_0x226d7c(0x238),'reply_markup':{'inline_keyboard':[[{'text':_0x226d7c(0x24a),'callback_data':'5'},{'text':_0x226d7c(0x1f1),'callback_data':'15'},{'text':_0x226d7c(0x10b),'callback_data':'30'},{'text':_0x226d7c(0x255),'callback_data':_0x226d7c(0x255)}]]}})[_0x226d7c(0x1a3)](_0x3c8f26=>{telegramError(_0x3c8f26);}),tgBot['on']('callback_query',async _0x58e97f=>{const _0x34dba0=_0x226d7c,_0x35f75c=_0x58e97f['data'],_0x209fee=_0x58e97f['message'];tgBot[_0x34dba0(0x104)](_0x58e97f['id'])['then'](async()=>{const _0xa7cad4=_0x34dba0;devices[_0x11640f][_0xa7cad4(0x248)]={'clientip':_0x17f0dc,'timestamp':new Date()[_0xa7cad4(0x1c3)](),'expiry':_0x35f75c},_0x35f75c!=_0xa7cad4(0x255)?(await tgBot[_0xa7cad4(0x249)](_0x209fee[_0xa7cad4(0x139)]['id'],_0xa7cad4(0xf8)+_0x35f75c+_0xa7cad4(0xf2),{'parse_mode':_0xa7cad4(0x238)})[_0xa7cad4(0x1a3)](_0x18ee23=>{telegramError(_0x18ee23);}),io['to'](_0x11640f)['emit'](_0xa7cad4(0x233),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0xa7cad4(0x249)](_0x209fee['chat']['id'],_0xa7cad4(0x187))[_0xa7cad4(0x1a3)](_0x3e9102=>{telegramError(_0x3e9102);}),io['to'](_0x11640f)['emit'](_0xa7cad4(0x233),{'access':{'allow':![],'reason':_0xa7cad4(0xcb),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x5e0b81,_0xf230cf){const _0xd809c9=_0xcf7e33;tgBot&&settings[_0xd809c9(0x1ff)]&&(tgBot[_0xd809c9(0x1f6)](_0xd809c9(0x244)),tgBot[_0xd809c9(0x249)](settings[_0xd809c9(0x1ff)],_0xd809c9(0xd8)+normalizeIP(_0xf230cf)[_0xd809c9(0x1ac)]+_0xd809c9(0x197),{'parse_mode':_0xd809c9(0x238),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':_0xd809c9(0x255)}]]}})['catch'](_0x3c7833=>{telegramError(_0x3c7833);}),tgBot['on'](_0xd809c9(0x244),async _0x18dd7f=>{const _0x57f993=_0xd809c9,_0x237bdb=_0x18dd7f[_0x57f993(0x22f)],_0x38856f=_0x18dd7f[_0x57f993(0x1de)];tgBot[_0x57f993(0x104)](_0x18dd7f['id'])[_0x57f993(0xe9)](async()=>{const _0x3f3a2e=_0x57f993;devices[_0x5e0b81][_0x3f3a2e(0x228)]={'clientip':_0xf230cf,'timestamp':new Date()[_0x3f3a2e(0x1c3)](),'expiry':_0x237bdb},_0x237bdb!='reject'?(await tgBot[_0x3f3a2e(0x249)](_0x38856f[_0x3f3a2e(0x139)]['id'],_0x3f3a2e(0x10d),{'parse_mode':_0x3f3a2e(0x238)})[_0x3f3a2e(0x1a3)](_0x56d947=>{telegramError(_0x56d947);}),io['to'](_0x5e0b81)[_0x3f3a2e(0xf1)](_0x3f3a2e(0x233),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3f3a2e(0x249)](_0x38856f['chat']['id'],'Login\x20rejected')[_0x3f3a2e(0x1a3)](_0x311a2f=>{telegramError(_0x311a2f);}),io['to'](_0x5e0b81)['emit'](_0x3f3a2e(0x233),{'access':{'allow':![],'reason':_0x3f3a2e(0x1e1),'token':null}}));}),tgBot[_0x57f993(0x1f6)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x42d7a4=_0xcf7e33;return dbConfig['get'](_0x42d7a4(0x12d))[_0x42d7a4(0x224)](_0x42d7a4(0x25f))[_0x42d7a4(0xf4)]({'status':_0x42d7a4(0x110)})['value']()||[];}function getDisabledBots(){const _0x4d91ad=_0xcf7e33;return dbConfig[_0x4d91ad(0x225)](_0x4d91ad(0x12d))[_0x4d91ad(0x224)]('botID')[_0x4d91ad(0xf4)]({'status':'disabled'})[_0x4d91ad(0x211)]()||[];}function getBotAttributes(_0x9ee5b2){const _0x3686da=_0xcf7e33;let _0x50ce0d={};const _0x477d7c=configpath+_0x3686da(0x219)+_0x9ee5b2+_0x3686da(0x10a),_0x2121d3=fs[_0x3686da(0x10c)](_0x477d7c);if(_0x2121d3){const _0x435a03=fs[_0x3686da(0x189)](_0x477d7c);try{const _0x1e52cb=JSON['parse'](_0x435a03),_0x1a0221=_0x1e52cb?_0x1e52cb[_0x3686da(0x175)][0x0][_0x3686da(0x140)]:![];_0x50ce0d[_0x3686da(0x11c)]=_0x1a0221?'auto':_0x3686da(0x22a),_0x50ce0d['botname']=_0x1e52cb?_0x1e52cb['bot'][0x0][_0x3686da(0x111)]:'Bot\x20'+_0x9ee5b2;}catch(_0x404207){_0x50ce0d['mode']='manual',_0x50ce0d[_0x3686da(0x111)]=_0x3686da(0x185)+_0x9ee5b2;}}else _0x50ce0d['mode']='manual',_0x50ce0d[_0x3686da(0x111)]='Bot\x20'+_0x9ee5b2;return _0x50ce0d;}function getBotsWithMode(){const _0x2ef8b4=_0xcf7e33,_0x446185=dbConfig[_0x2ef8b4(0x225)](_0x2ef8b4(0x12d))[_0x2ef8b4(0x224)]('botID')[_0x2ef8b4(0x211)]()||[];return _0x446185[_0x2ef8b4(0x119)](_0x4027cd=>{const _0x311a13=_0x2ef8b4;let _0x446d13=getBotAttributes(_0x4027cd[_0x311a13(0x25f)]);_0x4027cd['mode']=_0x446d13['mode'];}),_0x446185;}async function initUser(){const _0x33ac25=_0xcf7e33;if(!settings[_0x33ac25(0x17e)]){const _0x5987b1=uuidRandom();mixpanel['alias'](_0x5987b1),updateSetting('userid',_0x5987b1);}}async function initSecure(){const _0x55e704=_0xcf7e33;let _0x5ed82a=getSecure();if(!_0x5ed82a[_0x55e704(0x243)](_0x55e704(0x18d))){let _0x4aa8c6=await generateKeys();_0x5ed82a[_0x55e704(0x13f)]=_0x4aa8c6[_0x55e704(0x13f)],_0x5ed82a['privateKey']=_0x4aa8c6[_0x55e704(0x218)],_0x5ed82a[_0x55e704(0x18d)]=crypto[_0x55e704(0xfc)](0x20)['toString'](_0x55e704(0xcf));;storeSecure(_0x5ed82a);}}function getSettings(){const _0x4fad84=_0xcf7e33;return dbSettings[_0x4fad84(0x225)](_0x4fad84(0x176))[_0x4fad84(0x211)]()||{};}function getSecure(){const _0x20d899=_0xcf7e33;return dbSecure['get'](_0x20d899(0x15e))[_0x20d899(0x211)]()||{};}function getBlacklist(){const _0x12a72e=_0xcf7e33;return dbSecure[_0x12a72e(0x225)]('blacklist')[_0x12a72e(0x211)]()||[];}function broadcastToBots(_0x183df6,_0x1b28d8){const _0x3907ae=_0xcf7e33;config[_0x3907ae(0x119)](_0x1cb85d=>{const _0x47aa33=_0x3907ae;if(_0x1cb85d['status']==_0x47aa33(0x110)&&_0x1cb85d[_0x47aa33(0x169)]==_0x47aa33(0x25a)){if(pid[_0x1cb85d[_0x47aa33(0x25f)]])pid[_0x1cb85d[_0x47aa33(0x25f)]]['send']({[_0x183df6]:_0x1b28d8});}});}function storeSettings(_0x124ec4,_0x57b079=![]){const _0x2472fe=_0xcf7e33;_0x124ec4={...settings,..._0x124ec4};if(_0x57b079&&_0x124ec4[_0x2472fe(0xfe)]!='************'&&_0x124ec4[_0x2472fe(0xfe)]!=''){const _0x16c82d=crypt[_0x2472fe(0x1ee)](secure[_0x2472fe(0x218)],_0x124ec4[_0x2472fe(0xfe)])[_0x2472fe(0x1de)][_0x2472fe(0x14b)]('@')[0x0],_0x153a4e=bcrypt[_0x2472fe(0x123)](_0x16c82d,saltRounds);_0x124ec4={..._0x124ec4,'bbPassword':_0x153a4e};}if(_0x57b079&&_0x124ec4['telegramToken']!=_0x2472fe(0x196)&&_0x124ec4[_0x2472fe(0xdd)]!=''){const _0x5bc0ef=crypt['decrypt'](secure[_0x2472fe(0x218)],_0x124ec4[_0x2472fe(0xdd)])[_0x2472fe(0x1de)][_0x2472fe(0x14b)]('@')[0x0];_0x124ec4={..._0x124ec4,'telegramToken':_0x5bc0ef};}const _0x337c3f=_0x124ec4[_0x2472fe(0xdd)]!='************'&&_0x124ec4[_0x2472fe(0xdd)]!=settings[_0x2472fe(0xdd)]||_0x124ec4[_0x2472fe(0x11e)]!=settings[_0x2472fe(0x11e)],_0x5291df=_0x124ec4[_0x2472fe(0xdd)]==''||_0x124ec4['telegramUsername']=='';if(_0x337c3f)_0x124ec4['telegramEvents']=_0x2472fe(0x1da);for(const [_0x1abf26,_0xc3e142]of Object['entries'](_0x124ec4)){if(_0x1abf26==_0x2472fe(0xdd)&&_0xc3e142==_0x2472fe(0x196)){_0x124ec4[_0x2472fe(0xdd)]=settings[_0x2472fe(0xdd)];continue;};if(_0x1abf26==_0x2472fe(0xfe)&&_0xc3e142==_0x2472fe(0x196)){_0x124ec4['bbPassword']=settings[_0x2472fe(0xfe)];continue;};dbSettings[_0x2472fe(0xcc)]('settings.'+_0x1abf26,_0xc3e142)[_0x2472fe(0x174)]();}settings=_0x124ec4,io['to'](_0x2472fe(0xfa))['emit'](_0x2472fe(0x176),cleanSettings()),broadcastToBots(_0x2472fe(0x18b),settings[_0x2472fe(0x18b)]);if(_0x337c3f&&!_0x5291df)initTelegram();if(_0x337c3f&&_0x5291df)disableTelegram();getAllClients()[_0x2472fe(0x119)](_0x505c84=>{const _0x3a9767=_0x2472fe;getSocket(_0x505c84['id'])[_0x3a9767(0xf1)](_0x3a9767(0x233),{'access':{'allow':![],'reason':_0x3a9767(0x24d),'token':null}});});}function updateSetting(_0x4615d4,_0x13df88){const _0x426aea=_0xcf7e33;dbSettings[_0x426aea(0xcc)](_0x426aea(0x20d)+_0x4615d4,_0x13df88)[_0x426aea(0x174)](),settings=getSettings(),io['to'](_0x426aea(0xfa))[_0x426aea(0xf1)](_0x426aea(0x176),cleanSettings());}function storeSecure(_0x2bc1ad){const _0x448245=_0xcf7e33;dbSecure[_0x448245(0x225)]('secure')[_0x448245(0x16d)](_0x2bc1ad)[_0x448245(0x174)](),secure=_0x2bc1ad;}function addBlacklist(_0x286754){const _0x5bf777=_0xcf7e33;cleanBlacklist();let _0x45ef97;devices[_0x286754]['telegramIpApproval']?_0x45ef97=Math[_0x5bf777(0x178)](devices[_0x286754]['telegramIpApproval']['expiry'],loginExpiry):_0x45ef97=loginExpiry,dbSecure['get'](_0x5bf777(0x236))['push']({'expiry':new Date()[_0x5bf777(0x1c3)]()+_0x45ef97*0x3c*0x3e8,'token':devices[_0x286754][_0x5bf777(0x173)][_0x5bf777(0x226)]})['write'](),blacklist=dbSecure[_0x5bf777(0x225)](_0x5bf777(0x236))[_0x5bf777(0x211)]();}function cleanBlacklist(){const _0x4a4372=_0xcf7e33;let _0x19e43c=dbSecure[_0x4a4372(0x225)]('blacklist')[_0x4a4372(0x188)]()['value'](),_0x3411ac=new Date()[_0x4a4372(0x1c3)]();_0x19e43c[_0x4a4372(0x119)](_0xa52998=>{const _0x171423=_0x4a4372;_0xa52998[_0x171423(0xd0)]<_0x3411ac&&dbSecure[_0x171423(0x225)](_0x171423(0x236))[_0x171423(0x108)]({'expiry':_0xa52998['expiry']})[_0x171423(0x174)]();});}function initStates(){const _0x1584e4=_0xcf7e33;let _0x12c3e7=getConfiguration();_0x12c3e7[_0x1584e4(0x119)](_0x4c6699=>{const _0x1fd6fb=_0x1584e4;_0x4c6699[_0x1fd6fb(0x169)]='stopped';}),storeConfiguration(_0x12c3e7);}function onKeys(){const _0x44708d=new RSA();return new Promise(_0x27d3a6=>{const _0x6da483=_0x2108;_0x44708d['generateKeyPairAsync']()[_0x6da483(0xe9)](_0x498bc4=>{_0x27d3a6(_0x498bc4);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xbce6fd=_0xcf7e33;let _0x5464ad=getSettings(),_0x10afef=![];!_0x5464ad['hasOwnProperty'](_0xbce6fd(0x1ae))&&(_0x5464ad[_0xbce6fd(0x1ae)]=0x0,_0x10afef=!![]);!_0x5464ad[_0xbce6fd(0x243)](_0xbce6fd(0x121))&&(_0x5464ad[_0xbce6fd(0x121)]=0x0,_0x10afef=!![]);!_0x5464ad[_0xbce6fd(0x243)](_0xbce6fd(0x237))&&(_0x5464ad[_0xbce6fd(0x237)]=_0xbce6fd(0x120),_0x10afef=!![]);if(_0x10afef)storeSettings(_0x5464ad);}function storeConfiguration(_0x45430e){const _0x35c01b=_0xcf7e33;dbConfig[_0x35c01b(0x225)](_0x35c01b(0x12d))[_0x35c01b(0x108)]()['write'](),_0x45430e[_0x35c01b(0x119)](_0x5d772f=>{delete _0x5d772f['mode'];}),dbConfig[_0x35c01b(0x225)](_0x35c01b(0x12d))['push'](..._0x45430e)['write'](),config=_0x45430e;}function resetPassword(){const _0x504e79=_0xcf7e33;tgBot&&settings['telegramChatId']&&(tgBot[_0x504e79(0x1f6)]('callback_query'),tgBot[_0x504e79(0x249)](settings[_0x504e79(0x1ff)],_0x504e79(0x1c4),{'parse_mode':_0x504e79(0x238),'reply_markup':{'inline_keyboard':[[{'text':_0x504e79(0x15c),'callback_data':_0x504e79(0x15c)},{'text':'no','callback_data':'no'}]]}})[_0x504e79(0x1a3)](_0x135e1a=>{telegramError(_0x135e1a);}),tgBot['on']('callback_query',async _0x522c51=>{const _0x3e7767=_0x504e79,_0x459f3d=_0x522c51[_0x3e7767(0x22f)],_0x4834b7=_0x522c51[_0x3e7767(0x1de)];tgBot['answerCallbackQuery'](_0x522c51['id'])[_0x3e7767(0xe9)](async()=>{const _0x1a01b3=_0x3e7767;if(_0x459f3d!='no'){const _0x5abcd2=0xf,_0x35cf52=_0x1a01b3(0x1db),_0x1de6d4=Array[_0x1a01b3(0x23e)](crypto['randomFillSync'](new Uint32Array(_0x5abcd2)))['map'](_0x10d88e=>_0x35cf52[_0x10d88e%_0x35cf52[_0x1a01b3(0x152)]])[_0x1a01b3(0x167)](''),_0xed35d0=bcrypt[_0x1a01b3(0x123)](_0x1de6d4,saltRounds);storeSettings({'bbPassword':_0xed35d0}),await tgBot[_0x1a01b3(0x249)](_0x4834b7[_0x1a01b3(0x139)]['id'],_0x1a01b3(0xe5)+_0x1de6d4,{'parse_mode':'HTML'})[_0x1a01b3(0x1a3)](_0x21698b=>{telegramError(_0x21698b);});}else await tgBot[_0x1a01b3(0x249)](_0x4834b7['chat']['id'],'Password\x20reset\x20rejected')['catch'](_0x2b45c3=>{telegramError(_0x2b45c3);});}),tgBot[_0x3e7767(0x1f6)](_0x3e7767(0x244));}));}function getServerTime(){const _0x5198ab=_0xcf7e33,_0xd58b83=new Date();return _0xd58b83[_0x5198ab(0x160)]()+'/'+(_0xd58b83['getMonth']()+0x1)['toString']()[_0x5198ab(0x1e9)](0x2,'0')+'/'+_0xd58b83[_0x5198ab(0x1c1)]()[_0x5198ab(0x159)]()[_0x5198ab(0x1e9)](0x2,'0')+'\x20'+_0xd58b83['getHours']()['toString']()[_0x5198ab(0x1e9)](0x2,'0')+':'+_0xd58b83[_0x5198ab(0x156)]()[_0x5198ab(0x159)]()[_0x5198ab(0x1e9)](0x2,'0')+':'+_0xd58b83['getSeconds']()[_0x5198ab(0x159)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3502a6=_0xcf7e33,_0x47944c=shiftedTime();return _0x47944c[_0x3502a6(0x160)]()+'/'+(_0x47944c['getMonth']()+0x1)['toString']()[_0x3502a6(0x1e9)](0x2,'0')+'/'+_0x47944c[_0x3502a6(0x1c1)]()[_0x3502a6(0x159)]()[_0x3502a6(0x1e9)](0x2,'0')+'\x20'+_0x47944c['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x47944c['getMinutes']()[_0x3502a6(0x159)]()[_0x3502a6(0x1e9)](0x2,'0')+':'+_0x47944c[_0x3502a6(0x258)]()['toString']()[_0x3502a6(0x1e9)](0x2,'0');}function shiftedTime(){const _0x4eec7b=_0xcf7e33,_0x34a723=new Date();let _0xa44c6a=_0x34a723;if(settings[_0x4eec7b(0x18b)]&&settings[_0x4eec7b(0x18b)]!==0x0)_0xa44c6a=fns[_0x4eec7b(0xf9)](_0x34a723,{'hours':settings['timeshift']});return _0xa44c6a;}function startScheduler(){const _0x470996=_0xcf7e33,_0x5a065f=new Date()[_0x470996(0x250)](),_0xb3159c=new Date()['getHours']()+settings[_0x470996(0x18b)];_0xb3159c==0x4&&backupConfigFiles();_0xb3159c==0x0&&rotateLogFiles();_0x5a065f%0x6==0x0&&triggerAnalytics();_0x5a065f%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x254079=_0xcf7e33;fs[_0x254079(0x179)](configpath,{'withFileTypes':!![]})[_0x254079(0x119)](_0x97c87c=>{const _0x1e50e2=_0x254079;if(!_0x97c87c[_0x1e50e2(0x202)]())fs['copyFileSync'](configpath+_0x97c87c[_0x1e50e2(0x203)],configbackuppath+_0x97c87c[_0x1e50e2(0x203)]);});}function rotateLogFiles(){const _0x1778f0=_0xcf7e33;let _0x2d9f1b=fs[_0x1778f0(0x179)](logspath,{'withFileTypes':!![]});_0x2d9f1b[_0x1778f0(0x17c)]((_0x1ad4a3,_0xa748cb)=>_0x1ad4a3['name']<_0xa748cb[_0x1778f0(0x203)]?0x1:_0xa748cb[_0x1778f0(0x203)]<_0x1ad4a3[_0x1778f0(0x203)]?-0x1:0x0),_0x2d9f1b[_0x1778f0(0x119)](_0x275de0=>{const _0x14e66a=_0x1778f0;if(_0x275de0[_0x14e66a(0x203)]==_0x14e66a(0x131))fs[_0x14e66a(0x1ba)](logspath+_0x275de0[_0x14e66a(0x203)],logspath+_0x14e66a(0x138));if(_0x275de0[_0x14e66a(0x203)]=='output-001.log')fs[_0x14e66a(0x1ba)](logspath+_0x275de0[_0x14e66a(0x203)],logspath+_0x14e66a(0x131));_0x275de0['name']==_0x14e66a(0x149)&&(fs[_0x14e66a(0x1ba)](logspath+_0x275de0[_0x14e66a(0x203)],logspath+_0x14e66a(0x1bb)),fs[_0x14e66a(0x21a)](logspath+_0x275de0[_0x14e66a(0x203)],''));});}async function zipFiles(_0x4de5f5){const _0x1884e4=_0xcf7e33;let _0x2882b1;if(_0x4de5f5==_0x1884e4(0x1af))_0x2882b1=logspath;if(_0x4de5f5==_0x1884e4(0x1bf))_0x2882b1=configpath;let _0x5e8050=fs[_0x1884e4(0x179)](_0x2882b1,{'withFileTypes':!![]});const _0x1c10fb=new require(_0x1884e4(0x1e6))();_0x5e8050['forEach'](_0x3b3201=>{const _0x136a48=_0x1884e4;if(!_0x3b3201['isDirectory']()){let _0x501d96=fs['readFileSync'](_0x2882b1+_0x3b3201['name']);const _0x538b20=/^bot-[0-9]{3}-config.json$/,_0x52b282=_0x538b20[_0x136a48(0xdc)](_0x3b3201['name']);if(_0x52b282){const _0x39ad33=JSON[_0x136a48(0x1d4)](_0x501d96);_0x39ad33['bot'][0x0][_0x136a48(0x1b6)]=_0x136a48(0x23f),_0x39ad33[_0x136a48(0x175)][0x0][_0x136a48(0x118)]=_0x136a48(0x23f),_0x501d96=JSON[_0x136a48(0x1b0)](_0x39ad33,null,0x2);}if(_0x3b3201[_0x136a48(0x203)]=='bb-settings.json'){const _0x2979e4=JSON[_0x136a48(0x1d4)](_0x501d96);if(_0x2979e4['settings'][_0x136a48(0x23d)])_0x2979e4[_0x136a48(0x176)][_0x136a48(0x23d)]=![];if(_0x2979e4[_0x136a48(0x176)][_0x136a48(0xfe)])_0x2979e4[_0x136a48(0x176)][_0x136a48(0xfe)]='***';if(_0x2979e4[_0x136a48(0x176)][_0x136a48(0xdd)])_0x2979e4['settings'][_0x136a48(0xdd)]='';if(_0x2979e4[_0x136a48(0x176)][_0x136a48(0x1ff)])_0x2979e4[_0x136a48(0x176)]['telegramChatId']='';_0x501d96=JSON['stringify'](_0x2979e4,null,0x2);}if(_0x3b3201[_0x136a48(0x203)]!=_0x136a48(0x1cd))_0x1c10fb[_0x136a48(0x157)](_0x3b3201[_0x136a48(0x203)],_0x501d96);}});const _0x50df06=_0x1c10fb[_0x1884e4(0x168)]({'base64':![],'compression':_0x1884e4(0x1b5)});fs[_0x1884e4(0x21a)](zippath+(_0x4de5f5+_0x1884e4(0xef)),_0x50df06,_0x1884e4(0x162));}async function getPublicIp(){const _0x45001a=_0xcf7e33;try{const _0x33ede1=await axios[_0x45001a(0x225)](_0x45001a(0xe0));publicip=_0x33ede1['data']['ip'];}catch(_0x6cd097){}}async function triggerAnalytics(){const _0x33cab4=_0xcf7e33;if(!publicip)await getPublicIp();const _0x332fb0=getBotsWithMode();let _0x29cb3a=0x0;_0x332fb0['forEach'](_0x4b0463=>{const _0x3ccd2a=_0x2108;if(_0x4b0463[_0x3ccd2a(0x233)]==='enabled')_0x29cb3a++;}),mixpanel[_0x33cab4(0x1be)]('Server',{'distinct_id':settings[_0x33cab4(0x17e)],'ip':publicip,'version':serverversion,'numbots':_0x332fb0['length'],'numbotsenabled':_0x29cb3a});}async function getMessages(){const _0x15dda1=_0xcf7e33,_0x522887='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x19b555=new GraphQLClient(_0x522887),_0x53c737={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0xae75fd=serverversion[_0x15dda1(0x14b)]('.'),_0xef7cd3=_0xae75fd[0x0]+'.'+_0xae75fd[0x1],_0x12675c=Math[_0x15dda1(0x1d0)](settings[_0x15dda1(0x1ae)],settings[_0x15dda1(0x121)]),_0x5204a5={'last':parseInt(_0x12675c),'bbm':_0xef7cd3},_0x4f331d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1e4121;try{_0x1e4121=await _0x19b555[_0x15dda1(0x186)](_0x4f331d,_0x5204a5,_0x53c737);}catch(_0x11ec03){}if(_0x1e4121&&_0x1e4121[_0x15dda1(0x130)]){let _0xee7f2f=settings[_0x15dda1(0x1ae)];newMessages=[];for(const _0xdfd07d of _0x1e4121[_0x15dda1(0x130)]){newMessages[_0x15dda1(0x16d)](_0xdfd07d);if(_0xdfd07d[_0x15dda1(0x114)])updateSetting('latestversion',_0xdfd07d['bbvNew']);let _0x2b72ae=_0xdfd07d[_0x15dda1(0x114)]?serverversion>=_0xdfd07d[_0x15dda1(0x114)]:![];if(!_0x2b72ae&&_0xdfd07d[_0x15dda1(0x1fb)]>_0xee7f2f){if(_0xdfd07d['bbvReceive']===_0x15dda1(0x164)||serverversion[_0x15dda1(0x1df)](_0xdfd07d[_0x15dda1(0x201)])){let _0x5f0637=''+_0xdfd07d['title']+'\x0a\x0a'+_0xdfd07d[_0x15dda1(0x1de)];const _0x17ae54=await sendTelegramMsg(toTelegramMarkdown(_0x5f0637),_0x15dda1(0xd3));if(_0x17ae54)_0xee7f2f=_0xdfd07d[_0x15dda1(0x1fb)];}}}updateAvailable=isNewerVersion(settings[_0x15dda1(0x237)],serverversion),updateSetting(_0x15dda1(0x1ae),_0xee7f2f),emitMessages();}}function emitMessages(){const _0x4d760a=_0xcf7e33,_0x5b4ffd=settings[_0x4d760a(0x121)];let _0x1b7a42=[];newMessages[_0x4d760a(0x119)](_0xe07e56=>{const _0x4e29a4=_0x4d760a;_0xe07e56[_0x4e29a4(0x1fb)]>_0x5b4ffd&&_0x1b7a42[_0x4e29a4(0x16d)](_0xe07e56);}),_0x1b7a42[_0x4d760a(0x152)]>0x0&&getAllClients()[_0x4d760a(0x119)](_0x27b65f=>{const _0x440e1a=_0x4d760a;getSocket(_0x27b65f['id'])['emit'](_0x440e1a(0x1de),_0x1b7a42);});}function confirmMessage(_0x353465){const _0x46ab2b=_0xcf7e33;updateSetting(_0x46ab2b(0x121),Number(_0x353465));}function isNewerVersion(_0x442f87,_0x4a8cc1){const _0x31fab9=_0xcf7e33,_0x22e33a=_0x4a8cc1[_0x31fab9(0x14b)]('.'),_0x15d618=_0x442f87['split']('.');for(var _0x1b14f4=0x0;_0x1b14f4<_0x15d618[_0x31fab9(0x152)];_0x1b14f4++){const _0x5a9e07=~~_0x15d618[_0x1b14f4],_0x9d244c=~~_0x22e33a[_0x1b14f4];if(_0x5a9e07>_0x9d244c)return!![];if(_0x5a9e07<_0x9d244c)return![];}return![];}function toTelegramMarkdown(_0x50d78e){const _0x3422ee=_0xcf7e33,_0x5c896d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x52ee59=/\*{2}(.+?)\*{2}/gim;return _0x50d78e=_0x50d78e[_0x3422ee(0x184)](_0x5c896d,_0x3422ee(0x191))['replace'](_0x52ee59,_0x3422ee(0x145)),_0x50d78e;}async function validateConfigFile(){const _0x1fe6bd=_0xcf7e33,_0x1b9df9=dbConfig['get']('bots')[_0x1fe6bd(0x224)](_0x1fe6bd(0x25f))[_0x1fe6bd(0x211)]()||[];if(_0x1b9df9[_0x1fe6bd(0x152)]==0x0){let _0x2ded80=0x0,_0x44d535=[];const _0x52d205=/^bot-([0-9]{3})-config.json$/,_0x50a1e7=fs['readdirSync'](configpath);_0x50a1e7['forEach'](_0x354765=>{const _0x2eda6c=_0x1fe6bd,_0x21d23c=_0x52d205[_0x2eda6c(0x206)](_0x354765);if(_0x21d23c){const _0x9e7ea7=_0x21d23c[0x1];let _0x25dc10=getBotAttributes(_0x9e7ea7);_0x44d535['push']({'botID':_0x9e7ea7,'botname':_0x25dc10[_0x2eda6c(0x111)],'status':'disabled','live':_0x2eda6c(0x1f5)}),_0x2ded80++;}}),_0x2ded80!=0x0&&(dbConfig[_0x1fe6bd(0x225)]('bots')[_0x1fe6bd(0x17a)](_0x44d535)['write'](),config=_0x44d535,restoredConfigFile=_0x2ded80);}}async function restoreConfigNotify(_0x1af3ce){const _0x16a3a4=_0xcf7e33;let _0x1a058e;if(restoredConfigFile==0x1)_0x1a058e=_0x16a3a4(0x204);else _0x1a058e=_0x16a3a4(0x146);if(_0x1af3ce)io['to']('botmanager')['emit']('notification',_0x1a058e);else{logger['simple'](_0x16a3a4(0x15a)),logger[_0x16a3a4(0x17f)](_0x1a058e),logger['simple'](_0x16a3a4(0x15a)),logger[_0x16a3a4(0x17f)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x16a3a4(0x107)]!='orders')tgBot[_0x16a3a4(0x249)](settings[_0x16a3a4(0x1ff)],_0x16a3a4(0x17d)+_0x1a058e)[_0x16a3a4(0x1a3)](_0x390a87=>{telegramError(_0x390a87);});}}function validateCredentials(_0x40a2e1,_0x3d15fc){const _0x3ffdea=_0xcf7e33;if(_0x40a2e1['username']==settings[_0x3ffdea(0x147)]&&bcrypt['compareSync'](_0x40a2e1[_0x3ffdea(0x122)],settings[_0x3ffdea(0xfe)])){if(settings[_0x3ffdea(0x1a9)])return{'allow':![],'reason':_0x3ffdea(0xd7),'token':null};else{const _0x129706=generateLoginToken(_0x3d15fc);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x129706};}}else return{'allow':![],'reason':_0x3ffdea(0x161),'token':null};}function refreshToken(_0x3362c3){const _0x3d893f=_0xcf7e33,_0x394f4c=generateLoginToken(_0x3362c3);return{'allow':!![],'reason':_0x3d893f(0x14f),'token':_0x394f4c};}function validateAccess(_0x59af80,_0x148399,_0x3082a2){const _0x51baef=_0xcf7e33,_0x3e9bc2=_0x3082a2?_0x3082a2:devices[_0x148399]['ip'];let _0x15fb38;const _0x2a2dca=_0x2a54c0=>{const _0x481969=_0x2108;if(settings[_0x481969(0x23d)]){if(settings[_0x481969(0x1a9)]){if(telegram2FaApproved(_0x148399)){const _0x35ba89=generateLoginToken(_0x148399);return{'allow':!![],'reason':_0x481969(0x1c5),'token':_0x35ba89};}else return{'allow':![],'reason':_0x481969(0x193),'token':null};}else return _0x15fb38=validToken(_0x2a54c0,_0x148399),_0x15fb38[_0x481969(0x243)](_0x481969(0x1dd))?{'allow':!![],'reason':_0x481969(0xe1),'token':_0x2a54c0}:{'allow':![],'reason':_0x481969(0x193),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x51baef(0x208)]){let _0x2834f6=[...settings[_0x51baef(0x1e5)],_0x51baef(0x215),_0x51baef(0x165),_0x51baef(0x19b)];if(_0x2834f6[_0x51baef(0x221)](_0x3e9bc2))return _0x2a2dca(_0x59af80);else{_0x15fb38=validToken(_0x59af80,_0x148399);if(_0x15fb38[_0x51baef(0x243)](_0x51baef(0x1dd)))return _0x2a2dca(_0x59af80);else{if(telegramIpApproved(_0x148399)){const _0x93aee1=generateToken(_0x148399);return _0x15fb38=_0x2a2dca(_0x59af80),_0x15fb38[_0x51baef(0x21e)]?{'allow':!![],'reason':_0x51baef(0x1a6),'token':_0x93aee1}:_0x15fb38;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x51baef(0xd2),'token':null}:{'allow':![],'reason':_0x51baef(0xda),'token':null};}}}else return _0x2a2dca(_0x59af80);}function timelyDecrypt(_0xf47bd4,_0x2d48c4=!![]){const _0x4ea2de=_0xcf7e33;if(_0xf47bd4)try{const _0x369a66=crypt[_0x4ea2de(0x1ee)](secure[_0x4ea2de(0x218)],_0xf47bd4)[_0x4ea2de(0x1de)],_0x19654d=_0x369a66['split']('@')[0x0],_0x4cffe7=_0x369a66[_0x4ea2de(0x14b)]('@')[0x1],_0x5e7970=new Date()[_0x4ea2de(0x1c3)]();if(_0x2d48c4){if(_0x5e7970-_0x4cffe7<maxSecretAge*0x3e8)return _0x19654d;else return![];}else return _0x19654d;}catch(_0x38d71d){return![];}else return![];}const validToken=(_0x21e9c3,_0x58d18)=>{const _0x387327=_0xcf7e33,_0x2901d5=devices[_0x58d18]['ip'];if(!_0x21e9c3)return{'error':_0x387327(0x1a4)};for(let _0x1363ef of blacklist){if(_0x1363ef[_0x387327(0x226)]==_0x21e9c3)return{'error':_0x387327(0x260)};}let _0x215394;try{_0x215394=jwt[_0x387327(0x1c9)](_0x21e9c3,secure[_0x387327(0x18d)]+_0x58d18);}catch{return{'error':_0x387327(0x1c8)};}if(!_0x215394[_0x387327(0x243)](_0x387327(0x24f))&&!_0x215394[_0x387327(0x243)](_0x387327(0x11b))||!_0x215394[_0x387327(0x243)](_0x387327(0x1f0)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x215394[_0x387327(0x243)](_0x387327(0x11b))&&_0x215394[_0x387327(0x243)]('clientip')){const {clientip:_0x59598b}=_0x215394;return _0x2901d5==_0x59598b?{'success':_0x387327(0x1aa)}:{'error':_0x387327(0x235)};}else{if(_0x215394[_0x387327(0x243)](_0x387327(0x11b))&&_0x215394[_0x387327(0x243)](_0x387327(0x24f))){const {username:_0x580164,clientip:_0x8475b0}=_0x215394;return settings[_0x387327(0x147)]==_0x580164&&_0x2901d5==_0x8475b0?{'success':_0x387327(0x1aa)}:{'error':_0x387327(0x194)};}}},generateLoginToken=_0x1dee90=>{const _0x1bf6e1=_0xcf7e33;if(_0x1dee90){const _0x2a369a=devices[_0x1dee90]['ip'];return jwt[_0x1bf6e1(0x1b4)]({'username':settings[_0x1bf6e1(0x147)],'clientip':_0x2a369a},secure[_0x1bf6e1(0x18d)]+_0x1dee90,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xce7a52=>{const _0x4d7174=_0xcf7e33;if(_0xce7a52){const _0x374224=devices[_0xce7a52]['ip'];return jwt[_0x4d7174(0x1b4)]({'clientip':_0x374224},secure['secret']+_0xce7a52,{'expiresIn':devices[_0xce7a52][_0x4d7174(0x248)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x10e96d=>{const _0x57eace=_0xcf7e33;let _0x1d7777=![];return devices[_0x10e96d][_0x57eace(0x248)]&&devices[_0x10e96d][_0x57eace(0x248)][_0x57eace(0xd0)]!=_0x57eace(0x255)&&(_0x1d7777=devices[_0x10e96d][_0x57eace(0x248)][_0x57eace(0x24f)]==devices[_0x10e96d]['ip']&&new Date()['getTime']()-devices[_0x10e96d][_0x57eace(0x248)]['timestamp']<devices[_0x10e96d]['telegramIpApproval'][_0x57eace(0xd0)]*0x3c*0x3e8),_0x1d7777;},telegram2FaApproved=_0x40f80c=>{const _0x1cfd5f=_0xcf7e33;let _0x1d4ce7=![];return devices[_0x40f80c][_0x1cfd5f(0x228)]&&devices[_0x40f80c]['telegram2FaApproval'][_0x1cfd5f(0xd0)]!='reject'&&(_0x1d4ce7=devices[_0x40f80c][_0x1cfd5f(0x228)]['clientip']==devices[_0x40f80c]['ip']&&new Date()[_0x1cfd5f(0x1c3)]()-devices[_0x40f80c]['telegram2FaApproval'][_0x1cfd5f(0x18a)]<devices[_0x40f80c][_0x1cfd5f(0x228)][_0x1cfd5f(0xd0)]*0x3c*0x3e8),_0x1d4ce7;},normalizeIP=_0x412349=>{const _0x34e4c7=_0xcf7e33;let _0x2c84f9=null,_0x28bad0=null;if(ipaddr[_0x34e4c7(0x1e8)](_0x412349)){const _0x38f025=ipaddr['parse'](_0x412349);_0x38f025[_0x34e4c7(0x10f)]()===_0x34e4c7(0x23a)?(_0x38f025['isIPv4MappedAddress']()&&(_0x2c84f9=_0x38f025[_0x34e4c7(0xf5)]()[_0x34e4c7(0x159)]()),_0x28bad0=_0x38f025[_0x34e4c7(0x159)]()):(_0x2c84f9=_0x38f025[_0x34e4c7(0x159)](),_0x28bad0=_0x38f025[_0x34e4c7(0xff)]()[_0x34e4c7(0x159)]());}return{'show':_0x2c84f9?_0x2c84f9:_0x28bad0,'store':_0x28bad0};};function sleep(_0x44be75){return new Promise(_0x5c9c7d=>setTimeout(_0x5c9c7d,_0x44be75));}