const _0x29a2eb=_0x29f5;(function(_0x3bc5a5,_0x1d5fdf){const _0x555a12=_0x29f5,_0x18c0fe=_0x3bc5a5();while(!![]){try{const _0x924922=-parseInt(_0x555a12(0xd4))/0x1+-parseInt(_0x555a12(0x240))/0x2+parseInt(_0x555a12(0x22b))/0x3+parseInt(_0x555a12(0x1e8))/0x4+-parseInt(_0x555a12(0x269))/0x5*(parseInt(_0x555a12(0x174))/0x6)+parseInt(_0x555a12(0x9d))/0x7+parseInt(_0x555a12(0x216))/0x8*(-parseInt(_0x555a12(0x18e))/0x9);if(_0x924922===_0x1d5fdf)break;else _0x18c0fe['push'](_0x18c0fe['shift']());}catch(_0x4781f4){_0x18c0fe['push'](_0x18c0fe['shift']());}}}(_0x7374,0xa7f78));const _0x247013=function(){let _0x377378=!![];return function(_0x1f5177,_0x511419){const _0x38c898=_0x377378?function(){const _0x1625d4=_0x29f5;if(_0x511419){const _0xec5c48=_0x511419[_0x1625d4(0x263)](_0x1f5177,arguments);return _0x511419=null,_0xec5c48;}}:function(){};return _0x377378=![],_0x38c898;};}(),_0x116fab=_0x247013(this,function(){const _0x5a4b50=_0x29f5;return _0x116fab['toString']()[_0x5a4b50(0x246)](_0x5a4b50(0x109))['toString']()[_0x5a4b50(0x1aa)](_0x116fab)[_0x5a4b50(0x246)](_0x5a4b50(0x109));});_0x116fab();'use strict';process[_0x29a2eb(0x160)][_0x29a2eb(0x135)]=0x1;const childProcess=require(_0x29a2eb(0x1c7)),fs=require('fs'),fns=require(_0x29a2eb(0x164)),low=require(_0x29a2eb(0x150)),FileSync=require(_0x29a2eb(0x14a)),path=require(_0x29a2eb(0x233)),crypto=require(_0x29a2eb(0xfb)),Crypt=require(_0x29a2eb(0x245))[_0x29a2eb(0xad)],RSA=require(_0x29a2eb(0x245))[_0x29a2eb(0x25b)],bcrypt=require(_0x29a2eb(0x244)),jwt=require(_0x29a2eb(0x15a)),ipaddr=require(_0x29a2eb(0x229)),argv=require('yargs/yargs')(process[_0x29a2eb(0xef)][_0x29a2eb(0x116)](0x2))['argv'],uuidRandom=require(_0x29a2eb(0x11c)),TelegramBot=require(_0x29a2eb(0xfc)),Mixpanel=require('mixpanel'),axios=require(_0x29a2eb(0xb1)),{GraphQLClient,gql}=require(_0x29a2eb(0x1da)),util=require(_0x29a2eb(0x1c8)),fileUpload=require(_0x29a2eb(0x162)),{networkInterfaces}=require('os'),PORT=argv[_0x29a2eb(0x1af)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x29a2eb(0x242)](PORT)&&(console[_0x29a2eb(0xf1)](_0x29a2eb(0x166)+PORT+_0x29a2eb(0x100)),process[_0x29a2eb(0x22d)](0x1));const HOST=argv[_0x29a2eb(0x183)]||null,userID=argv[_0x29a2eb(0x1d1)]||'',debugging=argv['d']||![],nodeversion=process[_0x29a2eb(0xa0)][_0x29a2eb(0xc6)];let bbpath='bb/',bbpath2='';const botfile=_0x29a2eb(0x1ea),configfile=_0x29a2eb(0x1c2),settingsfile=_0x29a2eb(0x122),securefile='bb-secure.json',maxBackups=0xa;let validInstallation=!![];!fs[_0x29a2eb(0x206)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x29a2eb(0x243)+userID+'/':bbpath+_0x29a2eb(0x243),configbackuppath=configpath+_0x29a2eb(0x215),logspath=userID?bbpath+_0x29a2eb(0x25e)+userID+'/':bbpath+_0x29a2eb(0x25e),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x29a2eb(0x165)](logspath+_0x29a2eb(0x1b7),{'flags':'a'}),temppath=userID?bbpath+_0x29a2eb(0x218)+userID+'/':bbpath+'temp/';!fs[_0x29a2eb(0x206)](configpath)&&fs[_0x29a2eb(0xf7)](configpath);!fs[_0x29a2eb(0x206)](configbackuppath)&&fs[_0x29a2eb(0xf7)](configbackuppath);!fs[_0x29a2eb(0x206)](logspath)&&fs[_0x29a2eb(0xf7)](logspath);function _0x29f5(_0x4bd12d,_0x2b1744){const _0x3f9c36=_0x7374();return _0x29f5=function(_0x116fab,_0x247013){_0x116fab=_0x116fab-0x97;let _0x737448=_0x3f9c36[_0x116fab];return _0x737448;},_0x29f5(_0x4bd12d,_0x2b1744);}!fs[_0x29a2eb(0x206)](zippath)&&fs['mkdirSync'](zippath);!fs['existsSync'](temppath)&&fs[_0x29a2eb(0xf7)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x29a2eb(0x202)]({'bots':[]})[_0x29a2eb(0x200)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x29a2eb(0x202)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x29a2eb(0x200)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x29a2eb(0x202)]({'secure':{},'blacklist':[]})[_0x29a2eb(0x200)]();let crypt=new Crypt({'md':_0x29a2eb(0x101),'rsaStandard':_0x29a2eb(0x236)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x29a2eb(0x1fe)]&&settings[_0x29a2eb(0x1fe)]!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x575fe7,_0x247b06)=>{const _0x5d7ba9=_0x29a2eb,_0x109100=/#[A-Z]{3}#/g;!_0x247b06?_0x575fe7=_0x575fe7[_0x5d7ba9(0xde)](_0x109100,''):(_0x575fe7=_0x575fe7[_0x5d7ba9(0xde)](/#BLU#/g,_0x5d7ba9(0xdb)),_0x575fe7=_0x575fe7[_0x5d7ba9(0xde)](/#RED#/g,'\x1b[31m'),_0x575fe7=_0x575fe7[_0x5d7ba9(0xde)](/#YEL#/g,'\x1b[33m'),_0x575fe7=_0x575fe7['replace'](/#RES#/g,_0x5d7ba9(0xb5)));;return _0x575fe7;},logger={'screen':_0x154ca3=>{const _0x3b81e7=_0x29a2eb;console[_0x3b81e7(0xf1)](parseColor(_0x154ca3,!![]));},'simple':_0x5d0c97=>{const _0x4de68e=_0x29a2eb;console[_0x4de68e(0xf1)](parseColor(_0x5d0c97,!![])),loggerfile[_0x4de68e(0x200)](util[_0x4de68e(0x1e5)](parseColor(_0x5d0c97,![]))+'\x0a');},'full':async _0x48ec85=>{const _0x5ec711=_0x29a2eb,_0x4d51a9=getTimeStamp()+_0x5ec711(0x1db)+_0x48ec85;console[_0x5ec711(0xf1)](parseColor(_0x4d51a9,!![])),loggerfile['write'](util[_0x5ec711(0x1e5)](parseColor(_0x4d51a9,![]))+'\x0a');if(tgBot&&settings[_0x5ec711(0x179)]&&settings[_0x5ec711(0xd7)]!=_0x5ec711(0x234))await tgBot[_0x5ec711(0x255)](settings['telegramChatId'],_0x5ec711(0x16a)+parseColor(_0x48ec85,![]))['catch'](_0x3be428=>{telegramError(_0x3be428);});},'debug':async(_0x55b093,_0xdb3036='')=>{const _0x3f952a=_0x29a2eb,_0x82d00f=getTimeStamp()+_0x3f952a(0x1ae)+_0x55b093;if(debugging)console[_0x3f952a(0xf1)](parseColor(_0x82d00f,!![]));loggerfile[_0x3f952a(0x200)](util['format'](parseColor(_0x82d00f,![]))+'\x0a');if(_0xdb3036){if(debugging)console[_0x3f952a(0xf1)](_0xdb3036);loggerfile['write'](util[_0x3f952a(0x1e5)](_0xdb3036)+'\x0a');}}};process['on'](_0x29a2eb(0x154),function(_0x69be78){const _0x487aef=_0x29a2eb;logger[_0x487aef(0x194)](_0x69be78);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x29a2eb(0x11d))[_0x29a2eb(0x124)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x29a2eb(0x159))[_0x29a2eb(0x22f)](app);app[_0x29a2eb(0xd2)](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x59a104,_0x490a9f)=>{const _0x8d9d8=_0x29a2eb,_0xc3e44=_0x59a104['params'][_0x8d9d8(0x211)],_0x150644=getClientsWithBotID('botmanager'),_0x9e16c1=_0x59a104[_0x8d9d8(0x10c)][_0x8d9d8(0x1d6)],_0x42d712=timelyDecrypt(_0x9e16c1,![]),_0x11d9c9=_0x150644[_0x8d9d8(0x16d)](_0x3d79ba=>_0x3d79ba[_0x8d9d8(0x1d6)]==_0x42d712);if(_0x11d9c9){const _0x4bef59=normalizeIP(_0x59a104[_0x8d9d8(0x1ff)][_0x8d9d8(0x235)])['store'],_0x5c5847=_0x59a104[_0x8d9d8(0x10c)][_0x8d9d8(0x22a)];if(validateAccess(_0x5c5847,_0x42d712,_0x4bef59)[_0x8d9d8(0xec)])_0xc3e44=='backup'&&await backupConfigFiles(),await zipFiles(_0xc3e44),_0x490a9f['download'](zippath+(_0xc3e44+_0x8d9d8(0x144)),_0x201e89=>{const _0x5b5b93=_0x8d9d8;_0x201e89&&(logger['full']('Failed\x20to\x20download\x20'+_0xc3e44),logger[_0x5b5b93(0x194)](_0x201e89));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0xc3e44+_0x8d9d8(0x17c));}else logger[_0x8d9d8(0xf8)](_0x8d9d8(0xc7)+_0xc3e44+_0x8d9d8(0x117));}),app['post'](_0x29a2eb(0x163),async(_0x4dae69,_0x40cc3c)=>{const _0xfb811d=_0x29a2eb,_0x123fd3=getClientsWithBotID(_0xfb811d(0x1b1)),_0xcc14de=_0x4dae69[_0xfb811d(0x10c)][_0xfb811d(0x1d6)],_0x45743=timelyDecrypt(_0xcc14de,![]),_0x288bfc=_0x123fd3[_0xfb811d(0x16d)](_0x593e65=>_0x593e65[_0xfb811d(0x1d6)]==_0x45743);logger[_0xfb811d(0x1c4)](_0xfb811d(0x1a9));if(_0x288bfc){const _0xf3a28e=normalizeIP(_0x4dae69[_0xfb811d(0x1ff)][_0xfb811d(0x235)])[_0xfb811d(0x172)],_0x1bc6b0=_0x4dae69[_0xfb811d(0x10c)][_0xfb811d(0x22a)];if(validateAccess(_0x1bc6b0,_0x45743,_0xf3a28e)['allow']){if(_0x4dae69[_0xfb811d(0x152)]){const _0x28278d=_0x4dae69[_0xfb811d(0x152)][_0xfb811d(0x232)];await _0x28278d['mv'](temppath+_0x28278d[_0xfb811d(0xd9)]),_0x40cc3c[_0xfb811d(0x22c)]({'status':!![],'message':_0xfb811d(0x137)});const _0x3d0409=getBotsWithMode();_0x3d0409[_0xfb811d(0xd0)]>0x0?confirmRestore(temppath,_0x28278d[_0xfb811d(0xd9)]):unzipFile(temppath,_0x28278d[_0xfb811d(0xd9)]);}}else logger[_0xfb811d(0xf8)](_0xfb811d(0x155));}else logger['full'](_0xfb811d(0xa3));}),app[_0x29a2eb(0xd2)](express[_0x29a2eb(0x25d)](path['join'](__dirname,bbpath2,'build2'))),app[_0x29a2eb(0xd2)](express[_0x29a2eb(0x25d)](path[_0x29a2eb(0xa6)](__dirname,bbpath2,_0x29a2eb(0x1bc)))),app['get']('/',function(_0x3a1427,_0x32eed8){const _0x1083b2=_0x29a2eb;_0x32eed8[_0x1083b2(0x128)](path[_0x1083b2(0xa6)](__dirname,bbpath2,'build2',_0x1083b2(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x14f),function(_0x5d578b,_0xf998a6){const _0x32fe92=_0x29a2eb;_0xf998a6[_0x32fe92(0x128)](path['join'](__dirname,bbpath2,_0x32fe92(0x1bc),_0x32fe92(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x223),(_0x545bf5,_0x2c701c)=>{const _0x3aad7a=_0x29a2eb;_0x2c701c['sendFile'](path[_0x3aad7a(0xa6)](__dirname,bbpath2,_0x3aad7a(0x1bc),_0x3aad7a(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x222),(_0x2e1ebd,_0x1a2146)=>{const _0x4a4f17=_0x29a2eb;_0x1a2146[_0x4a4f17(0x128)](path['join'](__dirname,bbpath2,'build',_0x4a4f17(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x156),(_0xe27c6e,_0x4de7cd)=>{const _0xc266f3=_0x29a2eb;_0x4de7cd[_0xc266f3(0x128)](path[_0xc266f3(0xa6)](__dirname,bbpath2,_0xc266f3(0x1bc),_0xc266f3(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x1c6),(_0x12f641,_0x28f27e)=>{const _0x4b8b2b=_0x29a2eb;_0x28f27e['sendFile'](path[_0x4b8b2b(0xa6)](__dirname,bbpath2,'build',_0x4b8b2b(0xb3)));}),app[_0x29a2eb(0x181)](_0x29a2eb(0x204),(_0x29c6e3,_0x1c1a6f)=>{const _0x21d51d=_0x29a2eb;_0x1c1a6f[_0x21d51d(0x128)](path[_0x21d51d(0xa6)](__dirname,bbpath2,_0x21d51d(0x1bc),'index.html'));}),app['get'](_0x29a2eb(0xcb),(_0x4ebd81,_0xc7e143)=>{const _0x35960d=_0x29a2eb;_0xc7e143['sendFile'](path[_0x35960d(0xa6)](__dirname,bbpath2,_0x35960d(0x1bc),_0x35960d(0xb3)));});if(HOST)http[_0x29a2eb(0x199)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x36e31a=_0x29a2eb;let _0x49f589=_0x36e31a(0x13f);const _0x5b9209=networkInterfaces(),_0x4c5f14={};for(const _0x52c81c of Object['keys'](_0x5b9209)){for(const _0x517f94 of _0x5b9209[_0x52c81c]){if((_0x517f94[_0x36e31a(0xeb)]==_0x36e31a(0x23e)||_0x517f94[_0x36e31a(0xeb)]==0x4)&&!_0x517f94['internal']){const _0x2906c0=ipaddr[_0x36e31a(0x143)](_0x517f94[_0x36e31a(0xdf)])[_0x36e31a(0x1d8)]();_0x2906c0!='private'&&(!_0x4c5f14[_0x52c81c]&&(_0x4c5f14[_0x52c81c]=[]),_0x4c5f14[_0x52c81c][_0x36e31a(0xf4)](_0x517f94['address']),_0x49f589=_0x517f94[_0x36e31a(0xdf)]);}}}return logger[_0x36e31a(0x1c4)](_0x36e31a(0x9a),_0x4c5f14),_0x49f589;}async function startServer(){const _0x4d1366=_0x29a2eb;logger['simple'](''),logger['simple'](_0x4d1366(0x266)),await logger[_0x4d1366(0xf8)](_0x4d1366(0x170)+serverversion+'#RES#\x0a'+('>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://localhost:'+PORT+_0x4d1366(0x13d))+(_0x4d1366(0x136)+getServerIP()+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),await logger[_0x4d1366(0x1c4)]('Node.js\x20v'+nodeversion),logger[_0x4d1366(0x194)](_0x4d1366(0x266));if(config[_0x4d1366(0xd0)]!=0x0)for(const _0x3a69ec of config){if(_0x3a69ec[_0x4d1366(0xb2)]==_0x4d1366(0x17a)||_0x3a69ec[_0x4d1366(0xb2)]==_0x4d1366(0xe6))await logger[_0x4d1366(0xf8)](_0x4d1366(0xf5)+_0x3a69ec[_0x4d1366(0x253)]+'\x20|\x20'+_0x3a69ec[_0x4d1366(0xdc)]),startBot([_0x3a69ec[_0x4d1366(0x253)],userID],{'cwd':bbpath},function(_0xf48152){const _0x5096e2=_0x4d1366;if(_0xf48152)logger[_0x5096e2(0xf8)](_0xf48152);});else(_0x3a69ec[_0x4d1366(0xb2)]==_0x4d1366(0x157)||_0x3a69ec[_0x4d1366(0xb2)]==_0x4d1366(0x1fd))&&await logger['full'](_0x4d1366(0xb4)+_0x3a69ec['botID']+_0x4d1366(0x146)+_0x3a69ec[_0x4d1366(0xdc)]);}else!newBot&&logger['simple'](_0x4d1366(0x12d));if(newBot)addBot();logger[_0x4d1366(0x194)](_0x4d1366(0x266)),logger[_0x4d1366(0x194)]('');}function startSocket(){io['on']('connection',_0x213e0b=>{const _0x894549=_0x29f5;let _0x217d14,_0x3be1df,_0x233d3f,_0x23e97e,_0x209edd;const _0x8a92df=_0x213e0b[_0x894549(0x12f)][_0x894549(0x10c)][_0x894549(0x19a)];_0x3be1df=_0x8a92df['match'](/bot[0-9]{3}/);if(_0x3be1df)_0x233d3f=_0x3be1df[0x0][_0x894549(0x103)](/[0-9]{3}/);if(_0x233d3f)_0x217d14=_0x233d3f[0x0];else _0x217d14=_0x894549(0x1b1);const _0x15137a=_0x213e0b[_0x894549(0x12f)][_0x894549(0x1ad)][_0x894549(0x261)];if(!_0x15137a)_0x213e0b[_0x894549(0x198)](_0x894549(0xb2),{'publicKey':secure[_0x894549(0x1a5)]});else{_0x23e97e=timelyDecrypt(_0x15137a,![]);if(!_0x23e97e)_0x213e0b[_0x894549(0x198)](_0x894549(0xb2),{'publicKey':secure['publicKey']});else{_0x209edd=normalizeIP(_0x213e0b[_0x894549(0x1e6)][_0x894549(0x235)])[_0x894549(0x172)];if(!devices[_0x23e97e])devices[_0x23e97e]={'uuid':_0x23e97e,'access':{'token':null}};devices[_0x23e97e]['ip']=_0x209edd;const _0x2a2ef2=addClient(_0x213e0b['id'],_0x23e97e,_0x217d14);setAccess(_0x2a2ef2),emitMessages(),_0x213e0b['on'](_0x894549(0xa9),_0x2e28e3=>{const _0x171836=_0x894549,_0x29f160=timelyDecrypt(_0x2e28e3['password']);if(_0x29f160){_0x2e28e3={'username':_0x2e28e3[_0x171836(0x201)],'password':_0x29f160},devices[_0x23e97e][_0x171836(0x176)]=validateCredentials(_0x2e28e3,_0x23e97e);if(devices[_0x23e97e][_0x171836(0x176)][_0x171836(0xec)]==![]&&devices[_0x23e97e]['access'][_0x171836(0xf2)]=='2FA\x20login\x20required')_0x213e0b[_0x171836(0x198)]('status',{'access':devices[_0x23e97e][_0x171836(0x176)]}),loginAccess2FA(_0x23e97e,_0x209edd);else{if(devices[_0x23e97e]['access']['allow']==![]&&devices[_0x23e97e][_0x171836(0x176)][_0x171836(0xf2)]==_0x171836(0xbb))_0x213e0b[_0x171836(0x198)](_0x171836(0xb2),{'access':devices[_0x23e97e]['access']});else devices[_0x23e97e]['access'][_0x171836(0xec)]&&devices[_0x23e97e][_0x171836(0x176)][_0x171836(0xf2)]==_0x171836(0x171)&&(getClientsWithUuid(_0x23e97e)[_0x171836(0x1c5)](_0x3bbd65=>{setAccess(_0x3bbd65);}),logger['debug'](_0x171836(0xd1)+_0x23e97e[_0x171836(0x116)](-0x8)),setTokenRefresh(_0x23e97e),setSessionTimeout(_0x171836(0xa9),_0x23e97e));}}else logger[_0x171836(0xf8)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x213e0b['on'](_0x894549(0x125),()=>{resetPassword();}),_0x213e0b['on'](_0x894549(0x110),_0x2fda70=>{removeClient(_0x213e0b['id']);}),_0x217d14==_0x894549(0x1b1)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x291951){const _0x521da6=_0x29a2eb;if(_0x291951!='botmanager'&&config['apiKey']!=''){if(pid[_0x291951])pid[_0x291951][_0x521da6(0x22c)]({'function':_0x521da6(0x1cb),'args':null});}_0x291951!=_0x521da6(0x1b1)&&broadcastToBots(_0x521da6(0xa7),JSON['stringify'](config));}function reloadBotManager(){const _0x2478f8=_0x29a2eb;getClientsWithBotID(_0x2478f8(0x1b1))[_0x2478f8(0x1c5)](_0x204da6=>{const _0x9f89ba=_0x2478f8;getSocket(_0x204da6['id'])[_0x9f89ba(0x198)]('status',{'access':{'allow':![],'reason':_0x9f89ba(0x133),'token':null}});});}function getSocket(_0x2d34a9){const _0x843eb1=_0x29a2eb;return io[_0x843eb1(0xbc)][_0x843eb1(0xbc)][_0x843eb1(0x181)](_0x2d34a9);}function setAccess(_0x31e377){const _0x306a1c=_0x29a2eb,_0x552e21=getSocket(_0x31e377['id']),_0x9bdc11=_0x31e377[_0x306a1c(0x1d6)],_0x30a79a=_0x31e377[_0x306a1c(0x1f3)];devices[_0x9bdc11]['access']=validateAccess(devices[_0x9bdc11]['access']['token'],_0x9bdc11),logger['debug'](_0x306a1c(0x188)+devices[_0x9bdc11][_0x306a1c(0x176)][_0x306a1c(0xf2)]+_0x306a1c(0x186)+_0x31e377['id'][_0x306a1c(0x116)](-0x8)+_0x306a1c(0xc9)+_0x9bdc11[_0x306a1c(0x116)](-0x8)),_0x552e21[_0x306a1c(0xa6)](_0x9bdc11);if(devices[_0x9bdc11]['access']['allow']){_0x552e21['join'](_0x30a79a);if(_0x30a79a=='botmanager')initializeSocketBotManager(_0x552e21);else initializeSocketBot(_0x552e21);initClient(_0x30a79a);}devices[_0x9bdc11][_0x306a1c(0x176)][_0x306a1c(0x26f)]&&devices[_0x9bdc11][_0x306a1c(0x176)][_0x306a1c(0xf2)]==_0x306a1c(0x1eb)&&setSessionTimeout('2FA',_0x9bdc11),devices[_0x9bdc11][_0x306a1c(0x176)][_0x306a1c(0x26f)]&&devices[_0x9bdc11][_0x306a1c(0x176)][_0x306a1c(0xf2)]==_0x306a1c(0x249)&&setSessionTimeout('login',_0x9bdc11),_0x552e21['emit'](_0x306a1c(0xb2),{'status':_0x31e377[_0x306a1c(0x148)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x9bdc11][_0x306a1c(0x176)],'externalip':devices[_0x9bdc11]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x306a1c(0x114)],'validInstallation':validInstallation}),devices[_0x9bdc11]['access']['allow']==![]&&devices[_0x9bdc11][_0x306a1c(0x176)]['reason']==_0x306a1c(0x1d7)&&temporaryAccess2FA(_0x9bdc11,devices[_0x9bdc11]['ip']);}function setSessionTimeout(_0x169c10,_0x488307){const _0x5b2f69=_0x29a2eb;let _0x11361b;if(_0x169c10==_0x5b2f69(0xa9))_0x11361b=loginExpiry*0x3c*0x3e8;else _0x11361b=devices[_0x488307][_0x5b2f69(0x1b0)][_0x5b2f69(0x108)]*0x3c*0x3e8-(new Date()[_0x5b2f69(0x24e)]()-devices[_0x488307]['telegramIpApproval']['timestamp']);if(devices[_0x488307][_0x5b2f69(0x19e)])clearTimeout(devices[_0x488307]['pidExpireLogin']);devices[_0x488307][_0x5b2f69(0x19e)]=setTimeout(()=>{const _0x3e4005=_0x5b2f69;if(devices[_0x488307][_0x3e4005(0x1e2)])clearTimeout(devices[_0x488307][_0x3e4005(0x1e2)]);removeSocketListeners(_0x488307),addBlacklist(_0x488307),devices[_0x488307]['telegramIpApproval']=null,devices[_0x488307][_0x3e4005(0x130)]=null,devices[_0x488307][_0x3e4005(0x176)][_0x3e4005(0x26f)]=null,logger['debug'](_0x3e4005(0x1ba)+_0x488307[_0x3e4005(0x116)](-0x8)),devices[_0x488307][_0x3e4005(0x176)]=validateAccess(devices[_0x488307][_0x3e4005(0x176)][_0x3e4005(0x26f)],_0x488307),!(devices[_0x488307][_0x3e4005(0x176)][_0x3e4005(0xec)]&&devices[_0x488307][_0x3e4005(0x176)][_0x3e4005(0xf2)]==_0x3e4005(0x180))&&(_0x169c10==_0x3e4005(0xa9)?io['to'](_0x488307)[_0x3e4005(0x198)]('status',{'access':{'allow':![],'reason':_0x3e4005(0xfe),'token':null}}):io['to'](_0x488307)[_0x3e4005(0x198)](_0x3e4005(0xb2),{'access':{'allow':![],'reason':_0x3e4005(0x118),'token':null}})),devices[_0x488307]['access'][_0x3e4005(0x26f)]=null;},_0x11361b);}function setTokenRefresh(_0x4e3ac7){const _0x523ef1=_0x29a2eb;if(devices[_0x4e3ac7][_0x523ef1(0x1e2)])clearTimeout(devices[_0x4e3ac7][_0x523ef1(0x1e2)]);devices[_0x4e3ac7][_0x523ef1(0x1e2)]=setTimeout(()=>{const _0x36edb3=_0x523ef1;getClientsWithUuid(_0x4e3ac7)[_0x36edb3(0xd0)]!=0x0?(devices[_0x4e3ac7][_0x36edb3(0x176)]=refreshToken(_0x4e3ac7),io['to'](_0x4e3ac7)['emit'](_0x36edb3(0xb2),{'status':_0x36edb3(0x1f1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4e3ac7]['access'],'externalip':devices[_0x4e3ac7]['ip'],'publicKey':secure[_0x36edb3(0x1a5)],'validInstallation':validInstallation}),setTokenRefresh(_0x4e3ac7)):clearTimeout(devices[_0x4e3ac7]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x39ebfe){const _0x4111a5=_0x29a2eb,_0x5a09eb=getClient(_0x39ebfe['id'])[_0x4111a5(0x1d6)];_0x39ebfe['emit'](_0x4111a5(0xa7),config),_0x39ebfe[_0x4111a5(0x198)](_0x4111a5(0x23c),cleanSettings()),_0x39ebfe['on'](_0x4111a5(0x11a),_0x5ceea7=>{const _0x5e2017=_0x4111a5;if(validateAccess(_0x5ceea7,_0x5a09eb)['allow'])addBot();else logger[_0x5e2017(0xf8)](_0x5e2017(0x21d));}),_0x39ebfe['on']('update-bot',(_0x4a9714,_0x9f404d)=>{const _0x455c59=_0x4111a5;if(validateAccess(_0x9f404d,_0x5a09eb)[_0x455c59(0xec)])toggleBot(_0x4a9714[_0x455c59(0x253)],_0x4a9714['status'],_0x4a9714[_0x455c59(0x106)]);else logger[_0x455c59(0xf8)](_0x455c59(0xd3));}),_0x39ebfe['on'](_0x4111a5(0x115),(_0x2c0a62,_0x5cf3c8)=>{const _0x41e3fc=_0x4111a5;if(validateAccess(_0x5cf3c8,_0x5a09eb)['allow'])toggleBotMode(_0x2c0a62);else logger[_0x41e3fc(0xf8)](_0x41e3fc(0xd3));}),_0x39ebfe['on'](_0x4111a5(0x167),(_0x114f43,_0x5e7e40)=>{const _0x33bf0d=_0x4111a5;if(validateAccess(_0x5e7e40,_0x5a09eb)[_0x33bf0d(0xec)])deleteBot(_0x114f43);else logger[_0x33bf0d(0xf8)](_0x33bf0d(0x259));}),_0x39ebfe['on']('store-settings',(_0x28bfc3,_0x33f70e)=>{const _0x4a02ae=_0x4111a5;if(validateAccess(_0x33f70e,_0x5a09eb)[_0x4a02ae(0xec)])storeSettings(_0x28bfc3,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x39ebfe['on'](_0x4111a5(0x208),_0x3ff4da=>{const _0x278e3d=_0x4111a5;if(validateAccess(_0x3ff4da,_0x5a09eb)[_0x278e3d(0xec)])updateBB('update');else logger[_0x278e3d(0xf8)](_0x278e3d(0x151));}),_0x39ebfe['on']('reinstall-bb',_0x468d12=>{const _0x4cb9fc=_0x4111a5;if(validateAccess(_0x468d12,_0x5a09eb)['allow'])updateBB(_0x4cb9fc(0xcc));else logger[_0x4cb9fc(0xf8)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x39ebfe['on'](_0x4111a5(0x1b6),_0x2d21e7=>{const _0xb2e7c9=_0x4111a5;if(validateAccess(_0x2d21e7,_0x5a09eb)[_0xb2e7c9(0xec)]){const _0x359634=getClient(_0x39ebfe['id']);if(_0x359634)getBackupFiles(_0x359634['uuid']);else logger['full'](_0xb2e7c9(0x18b));}else logger[_0xb2e7c9(0xf8)](_0xb2e7c9(0xe4));}),_0x39ebfe['on']('restore-backup-file',(_0xf2e257,_0x56745c)=>{const _0x371418=_0x4111a5;if(validateAccess(_0x56745c,_0x5a09eb)[_0x371418(0xec)])restoreBackupFile(_0xf2e257);else logger[_0x371418(0xf8)](_0x371418(0x19f));}),_0x39ebfe['on'](_0x4111a5(0xe8),_0x1e2742=>{const _0x167f7c=_0x4111a5;if(validateAccess(_0x1e2742,_0x5a09eb)['allow'])getMessages();else logger[_0x167f7c(0xf8)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x39ebfe['on'](_0x4111a5(0xb9),(_0x509e62,_0x565912)=>{if(validateAccess(_0x565912,_0x5a09eb)['allow'])confirmMessage(_0x509e62);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x39ebfe['on'](_0x4111a5(0x129),_0x38d032=>{const _0x3b5e3f=_0x4111a5;if(validateAccess(_0x38d032,_0x5a09eb)['allow']){if(devices[_0x5a09eb]['pidRefreshToken'])clearTimeout(devices[_0x5a09eb][_0x3b5e3f(0x1e2)]);if(devices[_0x5a09eb]['pidExpireLogin'])clearTimeout(devices[_0x5a09eb]['pidExpireLogin']);removeSocketListeners(getClient(_0x39ebfe['id'])[_0x3b5e3f(0x1d6)]),addBlacklist(_0x5a09eb),devices[_0x5a09eb][_0x3b5e3f(0x1b0)]=null,devices[_0x5a09eb][_0x3b5e3f(0x130)]=null,devices[_0x5a09eb][_0x3b5e3f(0x176)]['token']=null,logger[_0x3b5e3f(0x1c4)](_0x3b5e3f(0x12b)+_0x5a09eb['slice'](-0x8)),io['to'](getClient(_0x39ebfe['id'])[_0x3b5e3f(0x1d6)])['emit'](_0x3b5e3f(0xb2),{'access':{'allow':![],'reason':_0x3b5e3f(0x14b),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x1562ce){const _0x5611c0=_0x29a2eb,_0x582b96=getClient(_0x1562ce['id'])[_0x5611c0(0x1f3)],_0x366f0b=getClient(_0x1562ce['id'])[_0x5611c0(0x1d6)];_0x1562ce['on'](_0x5611c0(0x13a),(_0x3739b8,_0x2b8a7d)=>{const _0x316ca3=_0x5611c0;if(validateAccess(_0x2b8a7d,_0x366f0b)['allow']){if(pid[_0x582b96])pid[_0x582b96][_0x316ca3(0x22c)]({'function':_0x316ca3(0xe5),'args':_0x3739b8});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x1562ce['on'](_0x5611c0(0x138),(_0x243ded,_0x2b787c)=>{const _0x1a0631=_0x5611c0;if(validateAccess(_0x2b787c,_0x366f0b)['allow']){if(pid[_0x582b96])pid[_0x582b96][_0x1a0631(0x22c)]({'function':'deleteHistoryAlerts','args':_0x243ded});}else logger[_0x1a0631(0xf8)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x1562ce['on'](_0x5611c0(0xed),(_0x5308db,_0x1ab887)=>{const _0x5b2c6b=_0x5611c0;if(validateAccess(_0x1ab887,_0x366f0b)['allow']){if(pid[_0x582b96])pid[_0x582b96]['send']({'function':_0x5b2c6b(0x16c),'args':_0x5308db});}else logger[_0x5b2c6b(0xf8)](_0x5b2c6b(0xfd));}),_0x1562ce['on'](_0x5611c0(0x14e),(_0x47d02b,_0x41067a)=>{const _0x1c5166=_0x5611c0;if(validateAccess(_0x41067a,_0x366f0b)[_0x1c5166(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x1c5166(0x22c)]({'function':_0x1c5166(0x1cd),'args':_0x47d02b});}else logger[_0x1c5166(0xf8)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x1562ce['on']('store-headless',(_0x89b92f,_0x1ed682)=>{const _0x1dcd7e=_0x5611c0;if(validateAccess(_0x1ed682,_0x366f0b)[_0x1dcd7e(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x1dcd7e(0x22c)]({'function':_0x1dcd7e(0x237),'args':_0x89b92f});}else logger[_0x1dcd7e(0xf8)](_0x1dcd7e(0xe0));}),_0x1562ce['on'](_0x5611c0(0x1e3),(_0x5046ce,_0xe4fbd3)=>{const _0x3cd3f3=_0x5611c0;if(validateAccess(_0xe4fbd3,_0x366f0b)[_0x3cd3f3(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x3cd3f3(0x22c)]({'function':_0x3cd3f3(0x126),'args':_0x5046ce});}else logger[_0x3cd3f3(0xf8)](_0x3cd3f3(0x231));}),_0x1562ce['on']('reset-history',_0x269fef=>{const _0x50f701=_0x5611c0;if(validateAccess(_0x269fef,_0x366f0b)[_0x50f701(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x50f701(0x22c)]({'function':_0x50f701(0x169),'args':null});}else logger[_0x50f701(0xf8)](_0x50f701(0x20b));}),_0x1562ce['on'](_0x5611c0(0x238),_0x5f14a8=>{const _0xb81da=_0x5611c0;if(validateAccess(_0x5f14a8,_0x366f0b)[_0xb81da(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0xb81da(0x22c)]({'function':_0xb81da(0x9b),'args':null});}else logger[_0xb81da(0xf8)](_0xb81da(0x1e7));}),_0x1562ce['on'](_0x5611c0(0x15c),(_0x306589,_0x2c9382)=>{const _0x419829=_0x5611c0;if(validateAccess(_0x2c9382,_0x366f0b)[_0x419829(0xec)]){if(pid[_0x582b96])pid[_0x582b96]['send']({'function':'placeOrder','args':_0x306589});}else logger['full'](_0x419829(0x1de));}),_0x1562ce['on'](_0x5611c0(0xd5),_0x2fe25f=>{const _0x245bb2=_0x5611c0;if(validateAccess(_0x2fe25f,_0x366f0b)[_0x245bb2(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x245bb2(0x22c)]({'function':_0x245bb2(0x23a),'args':null});}else logger[_0x245bb2(0xf8)](_0x245bb2(0x262));}),_0x1562ce['on'](_0x5611c0(0xa8),_0x352aaa=>{const _0x4d82fa=_0x5611c0;if(validateAccess(_0x352aaa,_0x366f0b)[_0x4d82fa(0xec)]){if(pid[_0x582b96])pid[_0x582b96][_0x4d82fa(0x22c)]({'function':_0x4d82fa(0xd8),'args':null});}else logger[_0x4d82fa(0xf8)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x1562ce['on']('update-bb',_0x528009=>{const _0x3c2414=_0x5611c0;if(validateAccess(_0x528009,_0x366f0b)['allow'])updateBB(_0x3c2414(0x1f7));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1562ce['on'](_0x5611c0(0xe8),_0x3e8be9=>{const _0x38d08f=_0x5611c0;if(validateAccess(_0x3e8be9,_0x366f0b)['allow'])getMessages();else logger[_0x38d08f(0xf8)](_0x38d08f(0x15d));}),_0x1562ce['on'](_0x5611c0(0xb9),(_0x1b7cfa,_0xd34613)=>{const _0x4fda05=_0x5611c0;if(validateAccess(_0xd34613,_0x366f0b)[_0x4fda05(0xec)])confirmMessage(_0x1b7cfa);else logger[_0x4fda05(0xf8)](_0x4fda05(0xbd));}),_0x1562ce['on']('logout',_0x133d5d=>{const _0x1889b1=_0x5611c0;if(validateAccess(_0x133d5d,_0x366f0b)[_0x1889b1(0xec)]){if(devices[_0x366f0b][_0x1889b1(0x1e2)])clearTimeout(devices[_0x366f0b][_0x1889b1(0x1e2)]);if(devices[_0x366f0b]['pidExpireLogin'])clearTimeout(devices[_0x366f0b]['pidExpireLogin']);removeSocketListeners(getClient(_0x1562ce['id'])[_0x1889b1(0x1d6)]),addBlacklist(_0x366f0b),devices[_0x366f0b][_0x1889b1(0x1b0)]=null,devices[_0x366f0b][_0x1889b1(0x130)]=null,devices[_0x366f0b][_0x1889b1(0x176)]['token']=null,logger[_0x1889b1(0x1c4)](_0x1889b1(0x12b)+_0x366f0b[_0x1889b1(0x116)](-0x8)),io['to'](getClient(_0x1562ce['id'])[_0x1889b1(0x1d6)])[_0x1889b1(0x198)](_0x1889b1(0xb2),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0xc76f0a){const _0x399b38=_0x29a2eb;getClientsWithUuid(_0xc76f0a)[_0x399b38(0x1c5)](_0x2ccde8=>{getSocket(_0x2ccde8['id'])['removeAllListeners']();});}function cleanSettings(){const _0x3db55c=_0x29a2eb;let _0x6e7cc3=settings;return settings[_0x3db55c(0x1fe)]&&settings[_0x3db55c(0x1fe)]!=''&&(_0x6e7cc3={..._0x6e7cc3,'telegramToken':_0x3db55c(0x22e)}),settings[_0x3db55c(0x23f)]&&settings[_0x3db55c(0x23f)]!=''&&(_0x6e7cc3={..._0x6e7cc3,'bbPassword':_0x3db55c(0x22e)}),(settings[_0x3db55c(0x23f)]&&settings[_0x3db55c(0x23f)]=='***'||settings['telegramToken']&&settings[_0x3db55c(0x1fe)]==_0x3db55c(0x1fb))&&(_0x6e7cc3={..._0x6e7cc3,'restored':{'password':settings[_0x3db55c(0x23f)]==_0x3db55c(0x1fb),'telegram':settings[_0x3db55c(0x1fe)]==_0x3db55c(0x1fb)}}),_0x6e7cc3;}async function updateBB(_0x38a0c5){const _0x10722b=_0x29a2eb;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x14abe5=>{const _0x8b3469=_0x29f5;restartBot(_0x14abe5[_0x8b3469(0x253)]);}),logger[_0x10722b(0x1c4)]('Starting\x20Balance\x20Bot\x20'+_0x38a0c5);if(_0x38a0c5==_0x10722b(0x1f7))process[_0x10722b(0x22c)]({'update':!![]},_0x16067f=>{});else _0x38a0c5==_0x10722b(0xcc)&&process[_0x10722b(0x22c)]({'reinstall':!![]},_0x5e3425=>{});}function startBot(_0x2f3700,_0x28e330,_0x2d0d58){const _0x578e3d=_0x29a2eb;if(debugging)_0x2f3700[_0x578e3d(0xf4)]('-d');let _0x14021c=![];const _0x24abfe=_0x2f3700[0x0];_0x28e330={..._0x28e330,'stdio':[_0x578e3d(0xc1),_0x578e3d(0xc1),_0x578e3d(0xc1),'ipc']},pid[_0x24abfe]=childProcess[_0x578e3d(0x26a)](botfile,_0x2f3700,_0x28e330),pid[_0x24abfe]['on'](_0x578e3d(0x21c),_0x2bee8f=>{const _0x5c62bb=_0x578e3d;switch(Object['keys'](_0x2bee8f)[0x0]){case _0x5c62bb(0xdc):updateBotName(_0x24abfe,_0x2bee8f['botname']);break;case _0x5c62bb(0x134):updateBotManager();break;case _0x5c62bb(0xb2):updateStatus(_0x24abfe,_0x2bee8f[_0x5c62bb(0xb2)]);break;case _0x5c62bb(0x106):updateLive(_0x24abfe,_0x2bee8f['live']);break;case _0x5c62bb(0xfa):updateLive(_0x24abfe,_0x2bee8f[_0x5c62bb(0xfa)]),io['to'](_0x24abfe)[_0x5c62bb(0x198)](_0x5c62bb(0xb2),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x2bee8f['stop']==_0x5c62bb(0x1bb)&&restartBot(_0x24abfe);_0x2bee8f[_0x5c62bb(0x127)]==_0x5c62bb(0x210)&&toggleBot(_0x24abfe,'disabled',_0x5c62bb(0x123));break;case _0x5c62bb(0x1b9):sendTelegram(_0x24abfe,_0x2bee8f[_0x5c62bb(0x1b9)]);break;case _0x5c62bb(0x178):sendTelegramMsg(_0x2bee8f[_0x5c62bb(0x178)]);break;case'function':io['to'](_0x24abfe)['emit'](_0x2bee8f[_0x5c62bb(0xbe)],_0x2bee8f['args']);break;}}),pid[_0x24abfe]['on'](_0x578e3d(0x19c),function(_0x48c3bc){if(_0x14021c)return;_0x14021c=!![],_0x2d0d58(_0x48c3bc);}),pid[_0x24abfe]['on']('exit',async function(_0x403aae){const _0x49c19f=_0x578e3d;if(installingUpdate)return;if(_0x14021c)return;_0x14021c=!![],_0x2d0d58(null);const _0x48586f=dbConfig[_0x49c19f(0x181)](_0x49c19f(0xa7))['find']({'botID':_0x24abfe})[_0x49c19f(0x1ed)]();_0x48586f&&(_0x48586f[_0x49c19f(0xb2)]=='enabled'||_0x48586f['status']==_0x49c19f(0xe6))&&(await sleep(0x3e8),updateLive(_0x24abfe,'stopped'),logger[_0x49c19f(0xf8)]('Restarting\x20Bot\x20'+_0x24abfe),startBot([_0x24abfe,userID],{'cwd':bbpath},function(_0x3e4290){const _0x54516d=_0x49c19f;if(_0x3e4290)logger[_0x54516d(0xf8)](_0x3e4290);}));});}function stopBot(_0x46ec2d){const _0x80159=_0x29a2eb;getClientsWithBotID(_0x46ec2d)[_0x80159(0x1c5)](_0x2f2c70=>{const _0x5c7572=_0x80159;getSocket(_0x2f2c70['id'])[_0x5c7572(0x110)](!![]),removeClient(_0x2f2c70['id']);}),pid[_0x46ec2d]&&(pid[_0x46ec2d][_0x80159(0x210)](),pid[_0x46ec2d]=null);}function restartBot(_0x5d309e){const _0x460947=_0x29a2eb;if(pid[_0x5d309e])pid[_0x5d309e][_0x460947(0x210)]();}function addBot(){const _0xa251f8=_0x29a2eb;let _0x4b87ca;for(let _0x2aa434=0x1;_0x2aa434<0x3e9;_0x2aa434++){_0x4b87ca=_0x2aa434[_0xa251f8(0x9e)]()['padStart'](0x3,'0');let _0x1c9d1a=config[_0xa251f8(0x16d)](_0x2a6778=>_0x2a6778[_0xa251f8(0x253)]==_0x4b87ca);if(!_0x1c9d1a)break;}if(_0x4b87ca===_0xa251f8(0x21a)){logger[_0xa251f8(0xf8)](_0xa251f8(0x12c));return;}logger[_0xa251f8(0xf8)](_0xa251f8(0x132)+_0x4b87ca),dbConfig[_0xa251f8(0x181)](_0xa251f8(0xa7))[_0xa251f8(0xf4)]({'botID':_0x4b87ca,'botname':_0xa251f8(0x1b8)+_0x4b87ca,'status':'new','live':''})[_0xa251f8(0x200)](),startBot([_0x4b87ca,userID],{'cwd':bbpath},function(_0x5b3597){const _0x3ec42e=_0xa251f8;if(_0x5b3597)logger[_0x3ec42e(0xf8)](_0x5b3597);}),config=getConfiguration(),io['to'](_0xa251f8(0x1b1))[_0xa251f8(0x198)](_0xa251f8(0xa7),config),broadcastToBots('bots',JSON[_0xa251f8(0x18d)](config));}function deleteBot(_0x4fe21e){const _0x175ae0=_0x29a2eb;getClientsWithBotID(_0x4fe21e)['forEach'](_0x5877f7=>{getSocket(_0x5877f7['id'])['disconnect'](!![]),removeClient(_0x5877f7['id']);}),dbConfig[_0x175ae0(0x181)](_0x175ae0(0xa7))[_0x175ae0(0x16e)]({'botID':_0x4fe21e})[_0x175ae0(0x200)](),logger[_0x175ae0(0xf8)]('Deleted\x20Bot\x20'+_0x4fe21e),stopBot(_0x4fe21e);try{if(fs[_0x175ae0(0x206)](path[_0x175ae0(0xa6)](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x184))))fs[_0x175ae0(0x190)](path['join'](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x184)));if(fs['existsSync'](path[_0x175ae0(0xa6)](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x247))))fs['unlinkSync'](path['join'](configpath,_0x175ae0(0x1c0)+_0x4fe21e+'-events.json'));if(fs[_0x175ae0(0x206)](path['join'](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x141))))fs[_0x175ae0(0x190)](path[_0x175ae0(0xa6)](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x141)));if(fs['existsSync'](path[_0x175ae0(0xa6)](configpath,_0x175ae0(0x1c0)+_0x4fe21e+_0x175ae0(0x10d))))fs[_0x175ae0(0x190)](path[_0x175ae0(0xa6)](configpath,'bot-'+_0x4fe21e+_0x175ae0(0x10d)));}catch(_0x2672f1){if(_0x2672f1)logger[_0x175ae0(0xf8)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x2672f1);}config=getConfiguration(),io['to'](_0x175ae0(0x1b1))[_0x175ae0(0x198)](_0x175ae0(0xa7),config),broadcastToBots('bots',JSON[_0x175ae0(0x18d)](config));}function toggleBot(_0x13f857,_0x597ba4,_0x2853fe){const _0x379926=_0x29a2eb;dbConfig[_0x379926(0x181)](_0x379926(0xa7))[_0x379926(0x16d)]({'botID':_0x13f857})[_0x379926(0x177)]({'status':_0x597ba4})['assign']({'live':_0x2853fe})[_0x379926(0x200)]();if(_0x597ba4=='enabled'||_0x597ba4==_0x379926(0xe6))logger[_0x379926(0xf8)]('Enabled\x20Bot\x20'+_0x13f857),startBot([_0x13f857,userID],{'cwd':bbpath},function(_0x596ab3){const _0x4752d5=_0x379926;if(_0x596ab3)logger[_0x4752d5(0xf8)](_0x596ab3);});else(_0x597ba4==_0x379926(0x157)||_0x597ba4==_0x379926(0x1fd))&&(logger[_0x379926(0xf8)]('Disabled\x20Bot\x20'+_0x13f857),stopBot(_0x13f857));config=getConfiguration(),io['to'](_0x379926(0x1b1))['emit'](_0x379926(0xa7),config),broadcastToBots(_0x379926(0xa7),JSON['stringify'](config));}function toggleStatus(_0x21af35){const _0x3dd94f=_0x29a2eb;let _0xfbf27=dbConfig[_0x3dd94f(0x181)](_0x3dd94f(0xa7))[_0x3dd94f(0x16d)]({'botID':_0x21af35})[_0x3dd94f(0x1ed)](),_0x35483d;if(_0xfbf27[_0x3dd94f(0xb2)]===_0x3dd94f(0x17a))_0x35483d=_0x3dd94f(0x157);else{if(_0xfbf27[_0x3dd94f(0xb2)]===_0x3dd94f(0xe6))_0x35483d=_0x3dd94f(0x1fd);else{if(_0xfbf27[_0x3dd94f(0xb2)]===_0x3dd94f(0x1fd))_0x35483d=_0x3dd94f(0xe6);else{if(_0xfbf27[_0x3dd94f(0xb2)]==='disabled')_0x35483d=_0x3dd94f(0x17a);}}}return _0x35483d;}function updateStatus(_0x599fee,_0x4109c2){const _0x3d8fd7=_0x29a2eb;dbConfig['get'](_0x3d8fd7(0xa7))[_0x3d8fd7(0x16d)]({'botID':_0x599fee})[_0x3d8fd7(0x177)]({'status':_0x4109c2})[_0x3d8fd7(0x200)](),config=getConfiguration(),io['to']('botmanager')[_0x3d8fd7(0x198)](_0x3d8fd7(0xa7),config),broadcastToBots('bots',JSON[_0x3d8fd7(0x18d)](config));}function updateLive(_0x1c79d7,_0x56f9b5){const _0x1e7b6f=_0x29a2eb;dbConfig[_0x1e7b6f(0x181)]('bots')[_0x1e7b6f(0x16d)]({'botID':_0x1c79d7})[_0x1e7b6f(0x177)]({'live':_0x56f9b5})[_0x1e7b6f(0x200)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x1e7b6f(0xa7),config),broadcastToBots(_0x1e7b6f(0xa7),JSON['stringify'](config));}function updateBotName(_0x2467fc,_0x3cf9e5){const _0x5ccf6b=_0x29a2eb;dbConfig[_0x5ccf6b(0x181)](_0x5ccf6b(0xa7))[_0x5ccf6b(0x16d)]({'botID':_0x2467fc})[_0x5ccf6b(0x177)]({'botname':_0x3cf9e5})['write'](),config=getConfiguration(),io['to'](_0x5ccf6b(0x1b1))[_0x5ccf6b(0x198)](_0x5ccf6b(0xa7),config),broadcastToBots(_0x5ccf6b(0xa7),JSON[_0x5ccf6b(0x18d)](config));}function updateBotManager(){const _0x259f56=_0x29a2eb;config=getConfiguration(),io['to'](_0x259f56(0x1b1))['emit'](_0x259f56(0xa7),config),broadcastToBots('bots',JSON[_0x259f56(0x18d)](config));}function toggleBotMode(_0x1650a2){const _0x50cdef=_0x29a2eb;if(pid[_0x1650a2])pid[_0x1650a2][_0x50cdef(0x22c)]({'function':_0x50cdef(0x1c3),'args':null});else{const _0x17d8eb=configpath+_0x50cdef(0x1c0)+_0x1650a2+_0x50cdef(0x184),_0x40c4cf=fs['readFileSync'](_0x17d8eb),_0x4bbadb=JSON[_0x50cdef(0x143)](_0x40c4cf),_0x3ea928=_0x4bbadb[_0x50cdef(0x1f3)][0x0]['headless'];_0x4bbadb[_0x50cdef(0x1f3)][0x0][_0x50cdef(0x11b)]=!_0x3ea928;const _0x381950=JSON[_0x50cdef(0x18d)](_0x4bbadb,null,0x2);fs[_0x50cdef(0x1b2)](_0x17d8eb,_0x381950),config=getConfiguration(),io['to'](_0x50cdef(0x1b1))['emit'](_0x50cdef(0xa7),config),broadcastToBots(_0x50cdef(0xa7),JSON[_0x50cdef(0x18d)](config));}}function telegramError(_0x1315e4){const _0x4be2aa=_0x29a2eb;logger[_0x4be2aa(0x194)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x5510d4){const _0x137047=_0x29a2eb;if(_0x5510d4['from'][_0x137047(0x201)]!=settings[_0x137047(0x1a6)]&&'@'+_0x5510d4[_0x137047(0xc4)][_0x137047(0x201)]!=settings[_0x137047(0x1a6)])return tgBot[_0x137047(0x255)](_0x5510d4[_0x137047(0x24b)]['id'],_0x137047(0xa4),{'parse_mode':_0x137047(0xb6)})[_0x137047(0x99)](_0x223f07=>{telegramError(_0x223f07);}),![];return!![];}async function initTelegram(){const _0x14dd14=_0x29a2eb;if(tgBot)tgBot[_0x14dd14(0xa5)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x4c1f02=_0x14dd14(0x1fc);_0x4c1f02+='\x0a',_0x4c1f02+='/enable\x20-\x20enable\x20notifications\x0a',_0x4c1f02+='/disable\x20-\x20disable\x20notifications\x0a',_0x4c1f02+=_0x14dd14(0x1d0),_0x4c1f02+=_0x14dd14(0x105),_0x4c1f02+=_0x14dd14(0x1ac),_0x4c1f02+='/off\x20-\x20stop\x20bot(s)\x0a',_0x4c1f02+=_0x14dd14(0x16f),_0x4c1f02+=_0x14dd14(0xc2),_0x4c1f02+=_0x14dd14(0x142),_0x4c1f02+=_0x14dd14(0x207),_0x4c1f02+=_0x14dd14(0x10f),_0x4c1f02+=_0x14dd14(0x25a),_0x4c1f02+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x4c1f02+=_0x14dd14(0x1dc);let _0x3714b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x3714b+='\x0a',_0x3714b+=_0x4c1f02,tgBot[_0x14dd14(0x252)](/\/start/,_0x29ddac=>{const _0x596c5c=_0x14dd14;if(!validateTelegram(_0x29ddac))return;if(settings[_0x596c5c(0x179)]!=_0x29ddac[_0x596c5c(0x24b)]['id'])updateSetting('telegramChatId',_0x29ddac[_0x596c5c(0x24b)]['id']);updateSetting(_0x596c5c(0x9f),!![]),tgBot['sendMessage'](_0x29ddac[_0x596c5c(0x24b)]['id'],_0x3714b)[_0x596c5c(0x99)](_0x345408=>{telegramError(_0x345408);});}),tgBot['onText'](/\/enable/,_0x34cdb7=>{const _0x3ffe77=_0x14dd14;if(!validateTelegram(_0x34cdb7))return;if(settings[_0x3ffe77(0x179)]!=_0x34cdb7[_0x3ffe77(0x24b)]['id'])updateSetting(_0x3ffe77(0x179),_0x34cdb7[_0x3ffe77(0x24b)]['id']);updateSetting(_0x3ffe77(0x9f),!![]),tgBot[_0x3ffe77(0x255)](_0x34cdb7[_0x3ffe77(0x24b)]['id'],_0x3ffe77(0x224))[_0x3ffe77(0x99)](_0x23e53a=>{telegramError(_0x23e53a);});}),tgBot[_0x14dd14(0x252)](/\/config/,async _0x41b6e5=>{const _0xf6a852=_0x14dd14;if(!validateTelegram(_0x41b6e5))return;tgBot[_0xf6a852(0xe7)](_0xf6a852(0x1f2)),tgBot['sendMessage'](_0x41b6e5[_0xf6a852(0x24b)]['id'],_0xf6a852(0x1a1),{'reply_markup':{'inline_keyboard':[[{'text':_0xf6a852(0x26b),'callback_data':_0xf6a852(0x234)},{'text':_0xf6a852(0x1f8),'callback_data':'alerts'},{'text':'All','callback_data':'all'}]]}})[_0xf6a852(0x99)](_0x10a75b=>{telegramError(_0x10a75b);}),tgBot['on'](_0xf6a852(0x1f2),async _0x19501f=>{const _0x58df35=_0xf6a852,_0xa56531=_0x19501f[_0x58df35(0x9c)],_0x844b28=_0x19501f[_0x58df35(0x21c)];tgBot[_0x58df35(0x214)](_0x19501f['id'])[_0x58df35(0xee)](async()=>{const _0xd149ef=_0x58df35;_0xa56531==_0xd149ef(0x234)&&(updateSetting(_0xd149ef(0xd7),'orders'),updateSetting(_0xd149ef(0x9f),!![]),await tgBot[_0xd149ef(0x255)](_0x844b28[_0xd149ef(0x24b)]['id'],_0xd149ef(0x1bd))[_0xd149ef(0x99)](_0x1a5fb8=>{telegramError(_0x1a5fb8);}));_0xa56531=='alerts'&&(updateSetting('telegramEvents',_0xd149ef(0xa1)),updateSetting('telegramEnabled',!![]),await tgBot[_0xd149ef(0x255)](_0x844b28[_0xd149ef(0x24b)]['id'],_0xd149ef(0x1a7))[_0xd149ef(0x99)](_0x883e5a=>{telegramError(_0x883e5a);}));_0xa56531=='all'&&(updateSetting(_0xd149ef(0xd7),'all'),updateSetting(_0xd149ef(0x9f),!![]),await tgBot['sendMessage'](_0x844b28[_0xd149ef(0x24b)]['id'],_0xd149ef(0x13b))['catch'](_0x5cccc9=>{telegramError(_0x5cccc9);}));if(!settings[_0xd149ef(0x179)])tgBot[_0xd149ef(0x255)](_0x844b28[_0xd149ef(0x24b)]['id'],_0xd149ef(0x193))[_0xd149ef(0x99)](_0x2cc1e5=>{telegramError(_0x2cc1e5);});}),tgBot['removeListener'](_0x58df35(0x1f2));});}),tgBot[_0x14dd14(0x252)](/\/status/,_0x2045bf=>{const _0x4b8428=_0x14dd14;if(!validateTelegram(_0x2045bf))return;const _0x971613=getBotsWithMode();let _0x17063c=_0x4b8428(0x1cc);config[_0x4b8428(0x1c5)](_0x152a8b=>{const _0x21e95e=_0x4b8428,_0x204d03=_0x971613[_0x21e95e(0x16d)](_0x4ee6bc=>_0x4ee6bc[_0x21e95e(0x253)]==_0x152a8b['botID'])[_0x21e95e(0xa2)];_0x17063c+='Bot\x20'+_0x152a8b[_0x21e95e(0x253)]+':\x20'+_0x152a8b[_0x21e95e(0xb2)]+'\x20|\x20'+_0x204d03+_0x21e95e(0x146)+_0x152a8b[_0x21e95e(0x106)]+'\x0a';}),_0x17063c+='\x0a',_0x17063c+=_0x4b8428(0x24c),_0x17063c+=!settings['telegramEnabled']?_0x4b8428(0x256):_0x4b8428(0xaa),_0x17063c+=settings[_0x4b8428(0x9f)]?settings[_0x4b8428(0xd7)]==_0x4b8428(0x98)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x4b8428(0xd7)]+'\x20only\x0a':'',tgBot[_0x4b8428(0x255)](_0x2045bf[_0x4b8428(0x24b)]['id'],_0x17063c,{'parse_mode':_0x4b8428(0xb6)})[_0x4b8428(0x99)](_0x147c63=>{telegramError(_0x147c63);});}),tgBot['onText'](/\/restart/,_0x1f4bce=>{const _0x293493=_0x14dd14;if(!validateTelegram(_0x1f4bce))return;tgBot[_0x293493(0xe7)](_0x293493(0x1f2));const _0x5b81b5=getEnabledBots();if(_0x5b81b5[_0x293493(0xd0)]==0x0)tgBot[_0x293493(0x255)](_0x1f4bce['chat']['id'],_0x293493(0x149))['catch'](_0x176786=>{telegramError(_0x176786);});else{if(_0x5b81b5[_0x293493(0xd0)]>0x1)_0x5b81b5[_0x293493(0xf4)]({'botID':'all'});let _0x483b90=[],_0x45e9ef=[];const _0x33b0b9=_0x5b81b5[_0x293493(0xd0)]%0x4==0x0||_0x5b81b5[_0x293493(0xd0)]%0x4==0x3||_0x5b81b5[_0x293493(0xd0)]%0x3==0x1?0x4:0x3;let _0x1773ea=0x0;_0x5b81b5['forEach']((_0xc2feef,_0x5345d1)=>{const _0x3ae931=_0x293493;if(_0x5345d1%_0x33b0b9==0x0)_0x45e9ef=[];_0x45e9ef[_0x3ae931(0xf4)]({'text':_0xc2feef[_0x3ae931(0x253)]==_0x3ae931(0x98)?'All\x20bots':_0x3ae931(0x1b8)+_0xc2feef['botID'],'callback_data':_0xc2feef[_0x3ae931(0x253)]}),_0x5345d1%_0x33b0b9==0x0&&(_0x483b90[_0x1773ea]=_0x45e9ef,_0x1773ea++);}),tgBot[_0x293493(0x255)](_0x1f4bce[_0x293493(0x24b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x483b90}})[_0x293493(0x99)](_0x3e1bb7=>{telegramError(_0x3e1bb7);}),tgBot['on'](_0x293493(0x1f2),async _0x45f2db=>{const _0x5da1d4=_0x293493,_0x4e2b74=_0x45f2db['data'],_0x1ebba4=_0x45f2db[_0x5da1d4(0x21c)];tgBot['answerCallbackQuery'](_0x45f2db['id'])[_0x5da1d4(0xee)](async()=>{const _0x1800ad=_0x5da1d4;_0x4e2b74=='all'?config[_0x1800ad(0x1c5)](_0x1843ef=>{restartBot(_0x1843ef['botID']);}):restartBot(_0x4e2b74);}),tgBot[_0x5da1d4(0xe7)](_0x5da1d4(0x1f2));});}}),tgBot['onText'](/\/on/,_0x3ddd1a=>{const _0x44d366=_0x14dd14;if(!validateTelegram(_0x3ddd1a))return;tgBot[_0x44d366(0xe7)](_0x44d366(0x1f2));const _0x3e9e59=getDisabledBots();if(_0x3e9e59[_0x44d366(0xd0)]==0x0)tgBot[_0x44d366(0x255)](_0x3ddd1a[_0x44d366(0x24b)]['id'],_0x44d366(0xc8))[_0x44d366(0x99)](_0x28014b=>{telegramError(_0x28014b);});else{if(_0x3e9e59['length']>0x1)_0x3e9e59['push']({'botID':_0x44d366(0x98)});let _0x273303=[],_0x30e543=[];const _0x23d0a6=_0x3e9e59[_0x44d366(0xd0)]%0x4==0x0||_0x3e9e59[_0x44d366(0xd0)]%0x4==0x3||_0x3e9e59['length']%0x3==0x1?0x4:0x3;let _0x397f7d=0x0;_0x3e9e59[_0x44d366(0x1c5)]((_0x1ec627,_0xec1357)=>{const _0x6a9c97=_0x44d366;if(_0xec1357%_0x23d0a6==0x0)_0x30e543=[];_0x30e543[_0x6a9c97(0xf4)]({'text':_0x1ec627[_0x6a9c97(0x253)]==_0x6a9c97(0x98)?_0x6a9c97(0xb7):_0x6a9c97(0x1b8)+_0x1ec627['botID'],'callback_data':_0x1ec627[_0x6a9c97(0x253)]}),_0xec1357%_0x23d0a6==0x0&&(_0x273303[_0x397f7d]=_0x30e543,_0x397f7d++);}),tgBot[_0x44d366(0x255)](_0x3ddd1a[_0x44d366(0x24b)]['id'],_0x44d366(0x1b3),{'reply_markup':{'inline_keyboard':_0x273303}})[_0x44d366(0x99)](_0x1f7eb3=>{telegramError(_0x1f7eb3);}),tgBot['on'](_0x44d366(0x1f2),async _0x3281d2=>{const _0x4a7d1b=_0x44d366,_0x3179e4=_0x3281d2['data'],_0x147358=_0x3281d2[_0x4a7d1b(0x21c)];tgBot[_0x4a7d1b(0x214)](_0x3281d2['id'])['then'](async()=>{const _0x345382=_0x4a7d1b;_0x3179e4==_0x345382(0x98)?(tgBot[_0x345382(0x255)](_0x147358[_0x345382(0x24b)]['id'],_0x345382(0x20f))[_0x345382(0x99)](_0x1bd616=>{telegramError(_0x1bd616);}),_0x3e9e59[_0x345382(0x1c5)](_0x5abad0=>{const _0x358bed=_0x345382;if(_0x5abad0['botID']!='all')toggleBot(_0x5abad0[_0x358bed(0x253)],toggleStatus(_0x5abad0[_0x358bed(0x253)]),'stopped');})):(tgBot['sendMessage'](_0x147358['chat']['id'],_0x345382(0x1a4)+_0x3179e4)[_0x345382(0x99)](_0x189a94=>{telegramError(_0x189a94);}),toggleBot(_0x3179e4,toggleStatus(_0x3179e4),'stopped'));}),tgBot[_0x4a7d1b(0xe7)](_0x4a7d1b(0x1f2));});}}),tgBot[_0x14dd14(0x252)](/\/off/,_0x51dd73=>{const _0x1b4729=_0x14dd14;if(!validateTelegram(_0x51dd73))return;tgBot[_0x1b4729(0xe7)]('callback_query');const _0x3f2866=getEnabledBots();if(_0x3f2866[_0x1b4729(0xd0)]==0x0)tgBot[_0x1b4729(0x255)](_0x51dd73['chat']['id'],_0x1b4729(0x149))[_0x1b4729(0x99)](_0xeda40a=>{telegramError(_0xeda40a);});else{if(_0x3f2866[_0x1b4729(0xd0)]>0x1)_0x3f2866[_0x1b4729(0xf4)]({'botID':_0x1b4729(0x98)});let _0x2ae131=[],_0x17a056=[];const _0x37ca07=_0x3f2866[_0x1b4729(0xd0)]%0x4==0x0||_0x3f2866[_0x1b4729(0xd0)]%0x4==0x3||_0x3f2866[_0x1b4729(0xd0)]%0x3==0x1?0x4:0x3;let _0x5ef630=0x0;_0x3f2866['forEach']((_0x11c6a7,_0x45c6b5)=>{const _0x1dc7cd=_0x1b4729;if(_0x45c6b5%_0x37ca07==0x0)_0x17a056=[];_0x17a056[_0x1dc7cd(0xf4)]({'text':_0x11c6a7['botID']=='all'?'All\x20bots':_0x1dc7cd(0x1b8)+_0x11c6a7[_0x1dc7cd(0x253)],'callback_data':_0x11c6a7[_0x1dc7cd(0x253)]}),_0x45c6b5%_0x37ca07==0x0&&(_0x2ae131[_0x5ef630]=_0x17a056,_0x5ef630++);}),tgBot[_0x1b4729(0x255)](_0x51dd73[_0x1b4729(0x24b)]['id'],_0x1b4729(0x1e0),{'reply_markup':{'inline_keyboard':_0x2ae131}})[_0x1b4729(0x99)](_0x34e570=>{telegramError(_0x34e570);}),tgBot['on'](_0x1b4729(0x1f2),async _0x37e47e=>{const _0x37a9a6=_0x1b4729,_0x58f015=_0x37e47e[_0x37a9a6(0x9c)],_0x168e70=_0x37e47e[_0x37a9a6(0x21c)];tgBot['answerCallbackQuery'](_0x37e47e['id'])[_0x37a9a6(0xee)](async()=>{const _0x3e7aea=_0x37a9a6;_0x58f015==_0x3e7aea(0x98)?(tgBot[_0x3e7aea(0x255)](_0x168e70[_0x3e7aea(0x24b)]['id'],_0x3e7aea(0x220))[_0x3e7aea(0x99)](_0x1b664f=>{telegramError(_0x1b664f);}),_0x3f2866[_0x3e7aea(0x1c5)](_0x37c1fc=>{const _0x356628=_0x3e7aea;if(_0x37c1fc[_0x356628(0x253)]!=_0x356628(0x98))toggleBot(_0x37c1fc[_0x356628(0x253)],toggleStatus(_0x37c1fc[_0x356628(0x253)]),_0x356628(0x123));})):(tgBot[_0x3e7aea(0x255)](_0x168e70['chat']['id'],_0x3e7aea(0x158)+_0x58f015)[_0x3e7aea(0x99)](_0x342f1c=>{telegramError(_0x342f1c);}),toggleBot(_0x58f015,toggleStatus(_0x58f015),_0x3e7aea(0x123)));}),tgBot[_0x37a9a6(0xe7)](_0x37a9a6(0x1f2));});}}),tgBot[_0x14dd14(0x252)](/\/metrics/,_0x301fc0=>{const _0x3efa11=_0x14dd14;if(!validateTelegram(_0x301fc0))return;tgBot[_0x3efa11(0xe7)](_0x3efa11(0x1f2));const _0x3a9700=getEnabledBots();if(_0x3a9700[_0x3efa11(0xd0)]==0x0)tgBot[_0x3efa11(0x255)](_0x301fc0['chat']['id'],_0x3efa11(0x149))[_0x3efa11(0x99)](_0x28fac7=>{telegramError(_0x28fac7);});else{if(_0x3a9700[_0x3efa11(0xd0)]>0x1){let _0x2756d1=[],_0x27bb34=[];const _0x5daeee=_0x3a9700['length']%0x4==0x0||_0x3a9700[_0x3efa11(0xd0)]%0x4==0x3||_0x3a9700[_0x3efa11(0xd0)]%0x3==0x1?0x4:0x3;let _0x189bbb=0x0;_0x3a9700[_0x3efa11(0x1c5)]((_0x1497b2,_0x40ab49)=>{const _0x5a65b0=_0x3efa11;if(_0x40ab49%_0x5daeee==0x0)_0x27bb34=[];_0x27bb34[_0x5a65b0(0xf4)]({'text':_0x5a65b0(0x1b8)+_0x1497b2[_0x5a65b0(0x253)],'callback_data':_0x1497b2[_0x5a65b0(0x253)]}),_0x40ab49%_0x5daeee==0x0&&(_0x2756d1[_0x189bbb]=_0x27bb34,_0x189bbb++);}),tgBot[_0x3efa11(0x255)](_0x301fc0[_0x3efa11(0x24b)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x2756d1}})['catch'](_0x16fc45=>{telegramError(_0x16fc45);}),tgBot['on'](_0x3efa11(0x1f2),async _0xbaa3f9=>{const _0x509dd5=_0x3efa11,_0x150f4e=_0xbaa3f9['data'],_0x4576d8=_0xbaa3f9[_0x509dd5(0x21c)];tgBot['answerCallbackQuery'](_0xbaa3f9['id'])[_0x509dd5(0xee)](async()=>{const _0xc4349=_0x509dd5;if(pid[_0x150f4e])pid[_0x150f4e][_0xc4349(0x22c)]({'function':_0xc4349(0xd6),'args':null});}),tgBot[_0x509dd5(0xe7)](_0x509dd5(0x1f2));});}else{const _0x2954f4=_0x3a9700[0x0][_0x3efa11(0x253)];if(pid[_0x2954f4])pid[_0x2954f4][_0x3efa11(0x22c)]({'function':_0x3efa11(0xd6),'args':null});}}}),tgBot[_0x14dd14(0x252)](/\/portfolio/,_0xb5d867=>{const _0x473ce2=_0x14dd14;if(!validateTelegram(_0xb5d867))return;tgBot[_0x473ce2(0xe7)]('callback_query');const _0x1a9886=getEnabledBots();if(_0x1a9886['length']==0x0)tgBot[_0x473ce2(0x255)](_0xb5d867['chat']['id'],_0x473ce2(0x149))[_0x473ce2(0x99)](_0x239fb8=>{telegramError(_0x239fb8);});else{if(_0x1a9886[_0x473ce2(0xd0)]>0x1){let _0x4c94f1=[],_0x9a79a4=[];const _0x2e4e1c=_0x1a9886[_0x473ce2(0xd0)]%0x4==0x0||_0x1a9886[_0x473ce2(0xd0)]%0x4==0x3||_0x1a9886[_0x473ce2(0xd0)]%0x3==0x1?0x4:0x3;let _0x5870ac=0x0;_0x1a9886[_0x473ce2(0x1c5)]((_0x305d1e,_0x40a465)=>{const _0x534ad2=_0x473ce2;if(_0x40a465%_0x2e4e1c==0x0)_0x9a79a4=[];_0x9a79a4['push']({'text':_0x534ad2(0x1b8)+_0x305d1e[_0x534ad2(0x253)],'callback_data':_0x305d1e[_0x534ad2(0x253)]}),_0x40a465%_0x2e4e1c==0x0&&(_0x4c94f1[_0x5870ac]=_0x9a79a4,_0x5870ac++);}),tgBot['sendMessage'](_0xb5d867[_0x473ce2(0x24b)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x4c94f1}})[_0x473ce2(0x99)](_0x202159=>{telegramError(_0x202159);}),tgBot['on']('callback_query',async _0x1f2b76=>{const _0x38a6b1=_0x473ce2,_0x143202=_0x1f2b76['data'],_0x5d8dc1=_0x1f2b76['message'];tgBot['answerCallbackQuery'](_0x1f2b76['id'])['then'](async()=>{const _0x3ff390=_0x29f5;if(pid[_0x143202])pid[_0x143202][_0x3ff390(0x22c)]({'function':_0x3ff390(0x25f),'args':null});}),tgBot[_0x38a6b1(0xe7)]('callback_query');});}else{const _0x2702cb=_0x1a9886[0x0]['botID'];if(pid[_0x2702cb])pid[_0x2702cb][_0x473ce2(0x22c)]({'function':_0x473ce2(0x25f),'args':null});}}}),tgBot['onText'](/\/update/,async _0x27b471=>{const _0x14ce08=_0x14dd14;if(!validateTelegram(_0x27b471))return;tgBot['removeListener'](_0x14ce08(0x1f2)),await getMessages();if(!updateAvailable)tgBot[_0x14ce08(0x255)](_0x27b471[_0x14ce08(0x24b)]['id'],_0x14ce08(0x1c1))[_0x14ce08(0x99)](_0x2ef409=>{telegramError(_0x2ef409);});else!validInstallation?tgBot['sendMessage'](_0x27b471[_0x14ce08(0x24b)]['id'],_0x14ce08(0x205))[_0x14ce08(0x99)](_0x521c8a=>{telegramError(_0x521c8a);}):(tgBot['sendMessage'](_0x27b471['chat']['id'],_0x14ce08(0x153),{'reply_markup':{'inline_keyboard':[[{'text':_0x14ce08(0x19b),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0xc441e3=>{telegramError(_0xc441e3);}),tgBot['on'](_0x14ce08(0x1f2),async _0x3c9a7f=>{const _0x1aa535=_0x14ce08,_0xcbe6e4=_0x3c9a7f[_0x1aa535(0x9c)],_0x2ec720=_0x3c9a7f[_0x1aa535(0x21c)];tgBot[_0x1aa535(0x214)](_0x3c9a7f['id'])[_0x1aa535(0xee)](async()=>{const _0x3ab136=_0x1aa535;_0xcbe6e4==_0x3ab136(0x191)&&(await tgBot['sendMessage'](_0x2ec720['chat']['id'],'Starting\x20Balance\x20Bot\x20update')[_0x3ab136(0x99)](_0x4ac5cf=>{telegramError(_0x4ac5cf);}),updateBB(_0x3ab136(0x1f7))),_0xcbe6e4=='no'&&await tgBot[_0x3ab136(0x255)](_0x2ec720[_0x3ab136(0x24b)]['id'],_0x3ab136(0x17d))[_0x3ab136(0x99)](_0x3ad736=>{telegramError(_0x3ad736);});}),tgBot[_0x1aa535(0xe7)]('callback_query');}));}),tgBot[_0x14dd14(0x252)](/\/reinstall/,async _0x456064=>{const _0x19b882=_0x14dd14;if(!validateTelegram(_0x456064))return;tgBot[_0x19b882(0xe7)](_0x19b882(0x1f2)),!validInstallation?tgBot[_0x19b882(0x255)](_0x456064[_0x19b882(0x24b)]['id'],_0x19b882(0xdd))[_0x19b882(0x99)](_0x1d9933=>{telegramError(_0x1d9933);}):(tgBot['sendMessage'](_0x456064[_0x19b882(0x24b)]['id'],_0x19b882(0xc3),{'reply_markup':{'inline_keyboard':[[{'text':_0x19b882(0x19b),'callback_data':_0x19b882(0x191)},{'text':'No','callback_data':'no'}]]}})[_0x19b882(0x99)](_0x4a5199=>{telegramError(_0x4a5199);}),tgBot['on'](_0x19b882(0x1f2),async _0x47e6a8=>{const _0x5cb6eb=_0x19b882,_0x2a5888=_0x47e6a8[_0x5cb6eb(0x9c)],_0x293a7c=_0x47e6a8[_0x5cb6eb(0x21c)];tgBot['answerCallbackQuery'](_0x47e6a8['id'])[_0x5cb6eb(0xee)](async()=>{const _0x27df59=_0x5cb6eb;_0x2a5888==_0x27df59(0x191)&&(await tgBot[_0x27df59(0x255)](_0x293a7c[_0x27df59(0x24b)]['id'],_0x27df59(0x104))[_0x27df59(0x99)](_0x22bae4=>{telegramError(_0x22bae4);}),updateBB(_0x27df59(0xcc))),_0x2a5888=='no'&&await tgBot[_0x27df59(0x255)](_0x293a7c[_0x27df59(0x24b)]['id'],_0x27df59(0x26e))[_0x27df59(0x99)](_0x339111=>{telegramError(_0x339111);});}),tgBot[_0x5cb6eb(0xe7)](_0x5cb6eb(0x1f2));}));}),tgBot[_0x14dd14(0x252)](/\/toggle/,_0xbaef17=>{const _0x52a0fe=_0x14dd14;if(!validateTelegram(_0xbaef17))return;tgBot['removeListener'](_0x52a0fe(0x1f2));const _0x2bf4f8=getBotsWithMode();if(_0x2bf4f8[_0x52a0fe(0xd0)]==0x0)tgBot[_0x52a0fe(0x255)](_0xbaef17[_0x52a0fe(0x24b)]['id'],_0x52a0fe(0x149))[_0x52a0fe(0x99)](_0x10bcf9=>{telegramError(_0x10bcf9);});else{let _0x2b017a=[],_0x62fdcd=[];const _0x15d437=0x2;let _0x495ea0=0x0;_0x2bf4f8[_0x52a0fe(0x1c5)]((_0x5faabb,_0x4f277f)=>{const _0x13f062=_0x52a0fe;if(_0x4f277f%_0x15d437==0x0)_0x62fdcd=[];_0x62fdcd[_0x13f062(0xf4)]({'text':_0x13f062(0x1b8)+_0x5faabb[_0x13f062(0x253)]+'\x20('+_0x5faabb[_0x13f062(0xa2)]+')','callback_data':_0x5faabb[_0x13f062(0x253)]}),_0x4f277f%_0x15d437==0x0&&(_0x2b017a[_0x495ea0]=_0x62fdcd,_0x495ea0++);}),tgBot['sendMessage'](_0xbaef17[_0x52a0fe(0x24b)]['id'],_0x52a0fe(0x119),{'reply_markup':{'inline_keyboard':_0x2b017a}})[_0x52a0fe(0x99)](_0x3e3b5d=>{telegramError(_0x3e3b5d);}),tgBot['on']('callback_query',async _0xf2f731=>{const _0x40e1a2=_0x52a0fe,_0x147527=_0xf2f731['data'],_0x1c3372=_0xf2f731['message'];tgBot['answerCallbackQuery'](_0xf2f731['id'])[_0x40e1a2(0xee)](async()=>{const _0x37d70a=_0x40e1a2,_0x5a93d4=_0x2bf4f8[_0x37d70a(0x16d)](_0x524830=>_0x524830[_0x37d70a(0x253)]==_0x147527),_0x39849a=_0x5a93d4[_0x37d70a(0xa2)]=='auto'?_0x37d70a(0x20c):_0x37d70a(0x10b);tgBot[_0x37d70a(0x255)](_0x1c3372[_0x37d70a(0x24b)]['id'],_0x37d70a(0x1be)+_0x147527+_0x37d70a(0x17b)+_0x39849a+_0x37d70a(0x230))[_0x37d70a(0x99)](_0x1605d6=>{telegramError(_0x1605d6);}),toggleBotMode(_0x147527);}),tgBot['removeListener'](_0x40e1a2(0x1f2));});}}),tgBot[_0x14dd14(0x252)](/\/names/,_0xb7a8b6=>{const _0x52ef2b=_0x14dd14;if(!validateTelegram(_0xb7a8b6))return;let _0xf2c309='';config['forEach'](_0x54acc9=>{const _0x1bc555=_0x29f5;_0xf2c309+=_0x1bc555(0x1b8)+_0x54acc9['botID']+':\x20'+_0x54acc9[_0x1bc555(0xdc)]+'\x0a';}),tgBot[_0x52ef2b(0x255)](_0xb7a8b6[_0x52ef2b(0x24b)]['id'],_0xf2c309,{'parse_mode':_0x52ef2b(0xb6)})['catch'](_0x3c39f2=>{telegramError(_0x3c39f2);});}),tgBot[_0x14dd14(0x252)](/\/disable/,_0x594633=>{const _0x2972c7=_0x14dd14;if(!validateTelegram(_0x594633))return;tgBot[_0x2972c7(0x255)](_0x594633['chat']['id'],_0x2972c7(0xab))[_0x2972c7(0x99)](_0xa336fe=>{telegramError(_0xa336fe);}),updateSetting(_0x2972c7(0x9f),![]);}),tgBot['onText'](/\/help/,_0x193d4b=>{const _0x40cb16=_0x14dd14;if(!validateTelegram(_0x193d4b))return;tgBot[_0x40cb16(0x255)](_0x193d4b['chat']['id'],_0x4c1f02)[_0x40cb16(0x99)](_0x1e3450=>{telegramError(_0x1e3450);});}),tgBot['on'](_0x14dd14(0x113),_0xe16888=>{const _0xfa729c=_0x14dd14;_0xe16888['toString']()[_0xfa729c(0x250)](_0xfa729c(0xf6))&&(logger[_0xfa729c(0xf8)]('Invalid\x20Telegram\x20token'),tgBot[_0xfa729c(0xa5)](),tgBot=null,io['to'](_0xfa729c(0x1b1))[_0xfa729c(0x198)](_0xfa729c(0xe9),'Invalid\x20Telegram\x20token'));}),process['once'](_0x14dd14(0x17e),()=>{const _0x23524b=_0x14dd14;if(tgBot)tgBot['stopPolling']();process[_0x23524b(0x22d)](0x1);}),process[_0x14dd14(0x1ee)](_0x14dd14(0x248),()=>{const _0x343505=_0x14dd14;if(tgBot)tgBot[_0x343505(0xa5)]();process['exit'](0x1);});}}function disableTelegram(){const _0x5268f1=_0x29a2eb;tgBot&&(tgBot[_0x5268f1(0xa5)](),tgBot=null);}function sendTelegram(_0x2b0f4f,_0x3df88f){const _0x2704d7=_0x29a2eb;if(settings[_0x2704d7(0x9f)]){if(settings['telegramEvents']=='all'||(_0x3df88f['type']=='error'||_0x3df88f[_0x2704d7(0x211)]==_0x2704d7(0x264)||_0x3df88f[_0x2704d7(0x211)]==_0x2704d7(0x187))&&settings[_0x2704d7(0xd7)]==_0x2704d7(0xa1)||_0x3df88f['type']==_0x2704d7(0x1ec)&&settings[_0x2704d7(0xd7)]==_0x2704d7(0x234)){if(tgBot&&settings[_0x2704d7(0x179)]){if(_0x3df88f[_0x2704d7(0x111)])tgBot[_0x2704d7(0x255)](settings[_0x2704d7(0x179)],_0x3df88f[_0x2704d7(0xdc)]+_0x2704d7(0x1d5)+_0x3df88f[_0x2704d7(0x26d)])[_0x2704d7(0x99)](_0x369a90=>{telegramError(_0x369a90);});else tgBot['sendMessage'](settings[_0x2704d7(0x179)],_0x2704d7(0x1b8)+_0x2b0f4f+_0x2704d7(0x1d5)+_0x3df88f[_0x2704d7(0x26d)])[_0x2704d7(0x99)](_0x16e295=>{telegramError(_0x16e295);});}}}}async function sendTelegramMsg(_0x37c433,_0x5dc104=_0x29a2eb(0xb6)){const _0x5ba932=_0x29a2eb;return settings['telegramEnabled']&&tgBot&&settings[_0x5ba932(0x179)]?(await tgBot[_0x5ba932(0x255)](settings[_0x5ba932(0x179)],_0x37c433,{'parse_mode':_0x5dc104})[_0x5ba932(0x99)](_0x1283e6=>{telegramError(_0x1283e6);}),!![]):![];}function getDeviceWithIp(_0x32e6b1){const _0x3cebba=_0x29a2eb;return devices[_0x3cebba(0x16d)](_0x281578=>_0x281578['ip']===_0x32e6b1);}function temporaryAccess2FA(_0x55bbef,_0x9fdb9){const _0x59ad1f=_0x29a2eb;let _0x454b39=new Date(),_0x83295a=![];if(lastIpApproval){if(_0x454b39-lastIpApproval<0x1388)_0x83295a=!![];}lastIpApproval=new Date();if(_0x83295a)return;tgBot&&settings[_0x59ad1f(0x179)]&&(tgBot[_0x59ad1f(0xe7)](_0x59ad1f(0x1f2)),tgBot[_0x59ad1f(0x255)](settings[_0x59ad1f(0x179)],_0x59ad1f(0x12a)+normalizeIP(_0x9fdb9)[_0x59ad1f(0x131)]+_0x59ad1f(0x251),{'parse_mode':_0x59ad1f(0xb6),'reply_markup':{'inline_keyboard':[[{'text':_0x59ad1f(0x11e),'callback_data':'5'},{'text':_0x59ad1f(0x260),'callback_data':'15'},{'text':_0x59ad1f(0x18a),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x59ad1f(0x99)](_0xb6940e=>{telegramError(_0xb6940e);}),tgBot['on'](_0x59ad1f(0x1f2),async _0x6d929d=>{const _0x1a6501=_0x59ad1f,_0x552590=_0x6d929d[_0x1a6501(0x9c)],_0x2db671=_0x6d929d[_0x1a6501(0x21c)];tgBot[_0x1a6501(0x214)](_0x6d929d['id'])[_0x1a6501(0xee)](async()=>{const _0x144f6d=_0x1a6501;devices[_0x55bbef][_0x144f6d(0x1b0)]={'clientip':_0x9fdb9,'timestamp':new Date()[_0x144f6d(0x24e)](),'expiry':_0x552590},_0x552590!=_0x144f6d(0x140)?(await tgBot[_0x144f6d(0x255)](_0x2db671[_0x144f6d(0x24b)]['id'],_0x144f6d(0x1f6)+_0x552590+_0x144f6d(0x1ce),{'parse_mode':'HTML'})[_0x144f6d(0x99)](_0x4551d8=>{telegramError(_0x4551d8);}),io['to'](_0x55bbef)[_0x144f6d(0x198)](_0x144f6d(0xb2),{'access':{'allow':![],'reason':_0x144f6d(0x133),'token':null}})):(await tgBot['sendMessage'](_0x2db671[_0x144f6d(0x24b)]['id'],_0x144f6d(0x254))[_0x144f6d(0x99)](_0x3f74db=>{telegramError(_0x3f74db);}),io['to'](_0x55bbef)[_0x144f6d(0x198)](_0x144f6d(0xb2),{'access':{'allow':![],'reason':_0x144f6d(0x1f4),'token':null}}));}),tgBot[_0x1a6501(0xe7)](_0x1a6501(0x1f2));}));}function loginAccess2FA(_0x1c6e45,_0x1bc1a4){const _0x3e1269=_0x29a2eb;tgBot&&settings[_0x3e1269(0x179)]&&(tgBot[_0x3e1269(0xe7)](_0x3e1269(0x1f2)),tgBot['sendMessage'](settings['telegramChatId'],_0x3e1269(0x10a)+normalizeIP(_0x1bc1a4)[_0x3e1269(0x131)]+_0x3e1269(0x251),{'parse_mode':_0x3e1269(0xb6),'reply_markup':{'inline_keyboard':[[{'text':_0x3e1269(0x212),'callback_data':loginExpiry},{'text':_0x3e1269(0x140),'callback_data':_0x3e1269(0x140)}]]}})[_0x3e1269(0x99)](_0x2fd511=>{telegramError(_0x2fd511);}),tgBot['on']('callback_query',async _0x2b65ea=>{const _0x18e9ca=_0x3e1269,_0xde014d=_0x2b65ea[_0x18e9ca(0x9c)],_0x1067e7=_0x2b65ea['message'];tgBot['answerCallbackQuery'](_0x2b65ea['id'])['then'](async()=>{const _0xc789c1=_0x18e9ca;devices[_0x1c6e45]['telegram2FaApproval']={'clientip':_0x1bc1a4,'timestamp':new Date()[_0xc789c1(0x24e)](),'expiry':_0xde014d},_0xde014d!=_0xc789c1(0x140)?(await tgBot[_0xc789c1(0x255)](_0x1067e7['chat']['id'],_0xc789c1(0x21f),{'parse_mode':_0xc789c1(0xb6)})[_0xc789c1(0x99)](_0x286678=>{telegramError(_0x286678);}),io['to'](_0x1c6e45)[_0xc789c1(0x198)](_0xc789c1(0xb2),{'access':{'allow':![],'reason':_0xc789c1(0x133),'token':null}})):(await tgBot[_0xc789c1(0x255)](_0x1067e7[_0xc789c1(0x24b)]['id'],_0xc789c1(0xf0))[_0xc789c1(0x99)](_0x11af02=>{telegramError(_0x11af02);}),io['to'](_0x1c6e45)[_0xc789c1(0x198)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x18e9ca(0x1f2));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3aa990=_0x29a2eb;return dbConfig[_0x3aa990(0x181)](_0x3aa990(0xa7))[_0x3aa990(0x225)](_0x3aa990(0x253))[_0x3aa990(0x14d)]({'status':_0x3aa990(0x17a)})[_0x3aa990(0x1ed)]()||[];}function getDisabledBots(){const _0x15ada0=_0x29a2eb;return dbConfig[_0x15ada0(0x181)](_0x15ada0(0xa7))[_0x15ada0(0x225)](_0x15ada0(0x253))[_0x15ada0(0x14d)]({'status':_0x15ada0(0x157)})[_0x15ada0(0x1ed)]()||[];}function getBotAttributes(_0x5ef256){const _0x2b6a18=_0x29a2eb;let _0x140b54={};const _0x38f9d4=configpath+'bot-'+_0x5ef256+_0x2b6a18(0x184),_0x46a643=fs[_0x2b6a18(0x206)](_0x38f9d4);if(_0x46a643){const _0xc6c805=fs[_0x2b6a18(0x1ab)](_0x38f9d4);try{const _0x580f5a=JSON['parse'](_0xc6c805),_0x32ecfe=_0x580f5a?_0x580f5a[_0x2b6a18(0x1f3)][0x0][_0x2b6a18(0x11b)]:![];_0x140b54['mode']=_0x32ecfe?_0x2b6a18(0x10b):_0x2b6a18(0x20c),_0x140b54[_0x2b6a18(0xdc)]=_0x580f5a?_0x580f5a[_0x2b6a18(0x1f3)][0x0]['botname']:_0x2b6a18(0x1b8)+_0x5ef256;}catch(_0x36f36d){_0x140b54['mode']=_0x2b6a18(0x20c),_0x140b54[_0x2b6a18(0xdc)]='Bot\x20'+_0x5ef256;}}else _0x140b54[_0x2b6a18(0xa2)]=_0x2b6a18(0x20c),_0x140b54[_0x2b6a18(0xdc)]='Bot\x20'+_0x5ef256;return _0x140b54;}function getBotsWithMode(){const _0x5b0270=_0x29a2eb,_0x1c62cf=dbConfig['get'](_0x5b0270(0xa7))[_0x5b0270(0x225)]('botID')['value']()||[];return _0x1c62cf[_0x5b0270(0x1c5)](_0x32209e=>{const _0x22a0aa=_0x5b0270;let _0x34eb0f=getBotAttributes(_0x32209e[_0x22a0aa(0x253)]);_0x32209e[_0x22a0aa(0xa2)]=_0x34eb0f[_0x22a0aa(0xa2)];}),_0x1c62cf;}function getBotExchanges(){const _0x26251e=_0x29a2eb;let _0x127c21=[];const _0x54802b=dbConfig[_0x26251e(0x181)](_0x26251e(0xa7))[_0x26251e(0x225)](_0x26251e(0x253))[_0x26251e(0x1ed)]()||[];_0x54802b['forEach'](_0xe7fb34=>{const _0x5a1a3d=_0x26251e;if(_0xe7fb34[_0x5a1a3d(0xb2)]=='enabled'){const _0x4a1699=configpath+_0x5a1a3d(0x1c0)+_0xe7fb34[_0x5a1a3d(0x253)]+_0x5a1a3d(0x184),_0x9516b4=fs[_0x5a1a3d(0x206)](_0x4a1699);let _0x1bf3b1;if(_0x9516b4){const _0x5075f2=fs['readFileSync'](_0x4a1699);try{const _0x56e67f=JSON[_0x5a1a3d(0x143)](_0x5075f2);_0x1bf3b1=_0x56e67f?_0x56e67f[_0x5a1a3d(0x1f3)][0x0]['exchange']:null;}catch(_0x215c79){}}if(_0x1bf3b1)_0x127c21[_0x5a1a3d(0xf4)](_0x1bf3b1);}});const _0x145026=[...new Set(_0x127c21)]['sort']();return _0x145026;}async function initUser(){const _0x21dbfa=_0x29a2eb;if(!settings[_0x21dbfa(0x114)]){const _0xe5dfae=uuidRandom();mixpanel[_0x21dbfa(0x1f9)](_0xe5dfae),updateSetting(_0x21dbfa(0x114),_0xe5dfae);}}async function initSecure(){const _0x34eb7a=_0x29a2eb;let _0x456620=getSecure();if(!_0x456620[_0x34eb7a(0x241)](_0x34eb7a(0x15b))){let _0x5cdcc2=await generateKeys();_0x456620[_0x34eb7a(0x1a5)]=_0x5cdcc2[_0x34eb7a(0x1a5)],_0x456620[_0x34eb7a(0x267)]=_0x5cdcc2[_0x34eb7a(0x267)],_0x456620[_0x34eb7a(0x15b)]=crypto[_0x34eb7a(0x189)](0x20)['toString']('hex');;storeSecure(_0x456620);}}function getSettings(){const _0x6e3ef3=_0x29a2eb;return dbSettings[_0x6e3ef3(0x181)]('settings')['value']()||{};}function getSecure(){const _0xea0e51=_0x29a2eb;return dbSecure[_0xea0e51(0x181)](_0xea0e51(0x1dd))[_0xea0e51(0x1ed)]()||{};}function getBlacklist(){const _0x4aea4d=_0x29a2eb;return dbSecure[_0x4aea4d(0x181)](_0x4aea4d(0x182))[_0x4aea4d(0x1ed)]()||[];}function broadcastToBots(_0x2e5415,_0x253520){const _0x1066f9=_0x29a2eb;config[_0x1066f9(0x1c5)](_0x56af3c=>{const _0x2b9725=_0x1066f9;if(_0x56af3c[_0x2b9725(0xb2)]==_0x2b9725(0x17a)&&_0x56af3c[_0x2b9725(0x106)]==_0x2b9725(0x12e)||_0x56af3c[_0x2b9725(0xb2)]=='new'&&_0x56af3c[_0x2b9725(0x106)]==_0x2b9725(0x12e)){if(pid[_0x56af3c[_0x2b9725(0x253)]])pid[_0x56af3c[_0x2b9725(0x253)]][_0x2b9725(0x22c)]({[_0x2e5415]:_0x253520});}});}function storeSettings(_0x38461f,_0x101b36=![]){const _0x2d6677=_0x29a2eb;_0x38461f={...settings,..._0x38461f};if(_0x101b36&&_0x38461f[_0x2d6677(0x23f)]!=_0x2d6677(0x22e)&&_0x38461f[_0x2d6677(0x23f)]!='***'&&_0x38461f[_0x2d6677(0x23f)]!=''){const _0xab54a7=crypt[_0x2d6677(0x227)](secure['privateKey'],_0x38461f[_0x2d6677(0x23f)])[_0x2d6677(0x21c)][_0x2d6677(0x25c)]('@')[0x0],_0x5b03f7=bcrypt['hashSync'](_0xab54a7,saltRounds);_0x38461f={..._0x38461f,'bbPassword':_0x5b03f7};}if(_0x101b36&&_0x38461f[_0x2d6677(0x1fe)]!=_0x2d6677(0x22e)&&_0x38461f[_0x2d6677(0x1fe)]!=_0x2d6677(0x1fb)&&_0x38461f[_0x2d6677(0x1fe)]!=''){const _0x58e7c5=crypt[_0x2d6677(0x227)](secure[_0x2d6677(0x267)],_0x38461f['telegramToken'])['message'][_0x2d6677(0x25c)]('@')[0x0];_0x38461f={..._0x38461f,'telegramToken':_0x58e7c5};}const _0x30884c=_0x38461f['telegramToken']!='************'&&_0x38461f[_0x2d6677(0x1fe)]!=settings[_0x2d6677(0x1fe)]||_0x38461f[_0x2d6677(0x1a6)]!=settings[_0x2d6677(0x1a6)],_0x1f0161=_0x38461f[_0x2d6677(0x1fe)]==''||_0x38461f[_0x2d6677(0x1a6)]=='';if(_0x30884c)_0x38461f[_0x2d6677(0xd7)]=_0x2d6677(0x98);for(const [_0x2adb3f,_0x21d1ef]of Object['entries'](_0x38461f)){if(_0x2adb3f==_0x2d6677(0x1fe)&&_0x21d1ef=='************'){_0x38461f[_0x2d6677(0x1fe)]=settings[_0x2d6677(0x1fe)];continue;};if(_0x2adb3f==_0x2d6677(0x23f)&&_0x21d1ef==_0x2d6677(0x22e)){_0x38461f[_0x2d6677(0x23f)]=settings[_0x2d6677(0x23f)];continue;};dbSettings[_0x2d6677(0x1a8)](_0x2d6677(0x1df)+_0x2adb3f,_0x21d1ef)['write']();}settings=_0x38461f,io['to'](_0x2d6677(0x1b1))['emit'](_0x2d6677(0x23c),cleanSettings()),broadcastToBots(_0x2d6677(0x1f5),settings[_0x2d6677(0x1f5)]),broadcastToBots(_0x2d6677(0xda),settings[_0x2d6677(0xda)]);if(_0x30884c&&!_0x1f0161)initTelegram();if(_0x30884c&&_0x1f0161)disableTelegram();getAllClients()[_0x2d6677(0x1c5)](_0x32d1fd=>{const _0x275b1b=_0x2d6677;getSocket(_0x32d1fd['id'])[_0x275b1b(0x198)](_0x275b1b(0xb2),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x214321,_0x15dc1c){const _0x479080=_0x29a2eb;dbSettings[_0x479080(0x1a8)]('settings.'+_0x214321,_0x15dc1c)[_0x479080(0x200)](),settings=getSettings(),io['to'](_0x479080(0x1b1))['emit']('settings',cleanSettings());}function storeSecure(_0x34d8e4){const _0x2a5781=_0x29a2eb;dbSecure[_0x2a5781(0x181)](_0x2a5781(0x1dd))[_0x2a5781(0xf4)](_0x34d8e4)[_0x2a5781(0x200)](),secure=_0x34d8e4;}function addBlacklist(_0x49aa80){const _0x323fba=_0x29a2eb;cleanBlacklist();let _0x2baac1;devices[_0x49aa80][_0x323fba(0x1b0)]?_0x2baac1=Math['max'](devices[_0x49aa80][_0x323fba(0x1b0)][_0x323fba(0x108)],loginExpiry):_0x2baac1=loginExpiry,dbSecure['get'](_0x323fba(0x182))['push']({'expiry':new Date()[_0x323fba(0x24e)]()+_0x2baac1*0x3c*0x3e8,'token':devices[_0x49aa80]['access'][_0x323fba(0x26f)]})[_0x323fba(0x200)](),blacklist=dbSecure[_0x323fba(0x181)]('blacklist')[_0x323fba(0x1ed)]();}function cleanBlacklist(){const _0x570901=_0x29a2eb;let _0x1b7a8b=dbSecure[_0x570901(0x181)](_0x570901(0x182))[_0x570901(0xc0)]()[_0x570901(0x1ed)](),_0x378326=new Date()[_0x570901(0x24e)]();_0x1b7a8b[_0x570901(0x1c5)](_0x502f29=>{const _0xd2772=_0x570901;_0x502f29[_0xd2772(0x108)]<_0x378326&&dbSecure[_0xd2772(0x181)](_0xd2772(0x182))[_0xd2772(0x16e)]({'expiry':_0x502f29[_0xd2772(0x108)]})[_0xd2772(0x200)]();});}function initStates(){const _0x14c594=_0x29a2eb;let _0x108c57=getConfiguration();_0x108c57[_0x14c594(0x1c5)](_0x239b6d=>{const _0x1aa7c0=_0x14c594;_0x239b6d[_0x1aa7c0(0x106)]=_0x1aa7c0(0x123);}),storeConfiguration(_0x108c57);}function onKeys(){const _0x36b877=new RSA();return new Promise(_0x42bbbc=>{const _0xee5954=_0x29f5;_0x36b877[_0xee5954(0x21e)]()['then'](_0xb682de=>{_0x42bbbc(_0xb682de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x24b14e=_0x29a2eb;let _0x12a23c=getSettings(),_0x1bbb90=![];!_0x12a23c[_0x24b14e(0x241)](_0x24b14e(0xea))&&(_0x12a23c[_0x24b14e(0xea)]=0x0,_0x1bbb90=!![]);!_0x12a23c[_0x24b14e(0x241)](_0x24b14e(0x1bf))&&(_0x12a23c[_0x24b14e(0x1bf)]=0x0,_0x1bbb90=!![]);!_0x12a23c[_0x24b14e(0x241)](_0x24b14e(0xca))&&(_0x12a23c[_0x24b14e(0xca)]='0.0.0',_0x1bbb90=!![]);!_0x12a23c[_0x24b14e(0x241)](_0x24b14e(0xda))&&(_0x12a23c[_0x24b14e(0xda)]=![],_0x1bbb90=!![]);if(_0x1bbb90)storeSettings(_0x12a23c);}function storeConfiguration(_0x4211f2){const _0x207eca=_0x29a2eb;dbConfig[_0x207eca(0x181)](_0x207eca(0xa7))[_0x207eca(0x16e)]()[_0x207eca(0x200)](),_0x4211f2[_0x207eca(0x1c5)](_0xb09e4d=>{const _0x313146=_0x207eca;delete _0xb09e4d[_0x313146(0xa2)];}),dbConfig[_0x207eca(0x181)](_0x207eca(0xa7))[_0x207eca(0xf4)](..._0x4211f2)[_0x207eca(0x200)](),config=_0x4211f2;}function resetPassword(){const _0x2e9909=_0x29a2eb;tgBot&&settings['telegramChatId']&&(tgBot[_0x2e9909(0xe7)](_0x2e9909(0x1f2)),tgBot[_0x2e9909(0x255)](settings[_0x2e9909(0x179)],_0x2e9909(0x161),{'parse_mode':_0x2e9909(0xb6),'reply_markup':{'inline_keyboard':[[{'text':_0x2e9909(0x191),'callback_data':_0x2e9909(0x191)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x566761=>{telegramError(_0x566761);}),tgBot['on']('callback_query',async _0x15c130=>{const _0xb4faa3=_0x2e9909,_0x3490da=_0x15c130[_0xb4faa3(0x9c)],_0x1e37db=_0x15c130[_0xb4faa3(0x21c)];tgBot['answerCallbackQuery'](_0x15c130['id'])[_0xb4faa3(0xee)](async()=>{const _0x2ef9d7=_0xb4faa3;if(_0x3490da!='no'){const _0xdfeeec=0xf,_0x47539f=_0x2ef9d7(0x185),_0x6bb9a7=Array['from'](crypto[_0x2ef9d7(0x102)](new Uint32Array(_0xdfeeec)))[_0x2ef9d7(0x20d)](_0x1eb35=>_0x47539f[_0x1eb35%_0x47539f['length']])[_0x2ef9d7(0xa6)](''),_0x161a82=bcrypt[_0x2ef9d7(0x221)](_0x6bb9a7,saltRounds);storeSettings({'bbPassword':_0x161a82}),await tgBot[_0x2ef9d7(0x255)](_0x1e37db[_0x2ef9d7(0x24b)]['id'],_0x2ef9d7(0x23d)+_0x6bb9a7,{'parse_mode':_0x2ef9d7(0xb6)})[_0x2ef9d7(0x99)](_0x18ca33=>{telegramError(_0x18ca33);});}else await tgBot['sendMessage'](_0x1e37db[_0x2ef9d7(0x24b)]['id'],_0x2ef9d7(0x14c))[_0x2ef9d7(0x99)](_0x2c2d4d=>{telegramError(_0x2c2d4d);});}),tgBot[_0xb4faa3(0xe7)](_0xb4faa3(0x1f2));}));}async function confirmRestore(_0x247ac3,_0x185bce){const _0x4b2c22=_0x29a2eb;io['to']('botmanager')['emit']('notification',_0x4b2c22(0x15e),_0x4b2c22(0x187)),tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),await tgBot['sendMessage'](settings[_0x4b2c22(0x179)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x4b2c22(0xb6),'reply_markup':{'inline_keyboard':[[{'text':_0x4b2c22(0x191),'callback_data':_0x4b2c22(0x191)},{'text':'no','callback_data':'no'}]]}})[_0x4b2c22(0x99)](_0x25e682=>{telegramError(_0x25e682);}),tgBot['on'](_0x4b2c22(0x1f2),async _0x420fb1=>{const _0x2cb711=_0x4b2c22,_0x1800a6=_0x420fb1[_0x2cb711(0x9c)],_0x12193b=_0x420fb1[_0x2cb711(0x21c)];tgBot['answerCallbackQuery'](_0x420fb1['id'])[_0x2cb711(0xee)](async()=>{const _0x2f8fd0=_0x2cb711;_0x1800a6==_0x2f8fd0(0x191)?(await tgBot['sendMessage'](_0x12193b[_0x2f8fd0(0x24b)]['id'],_0x2f8fd0(0x228),{'parse_mode':_0x2f8fd0(0xb6)})[_0x2f8fd0(0x99)](_0x583435=>{telegramError(_0x583435);}),unzipFile(_0x247ac3,_0x185bce)):(logger[_0x2f8fd0(0x1c4)](_0x2f8fd0(0x11f)),await tgBot[_0x2f8fd0(0x255)](_0x12193b[_0x2f8fd0(0x24b)]['id'],'Restore\x20process\x20aborted')[_0x2f8fd0(0x99)](_0x5c6f46=>{telegramError(_0x5c6f46);}));}),tgBot[_0x2cb711(0xe7)](_0x2cb711(0x1f2));}));}function _0x7374(){const _0x1a9049=['sendMetricsTelegram','telegramEvents','showConfig','name','onepagemode','\x1b[34m','botname','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','replace','address','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','127.0.0.1','sort','padStart','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','emitHistory','new','removeListener','get-messages','notification','lastmsgtelegram','family','allow','get-portfolio','then','argv','Login\x20rejected','log','reason','whitelist','push','Starting\x20bot\x20|\x20Bot\x20','404\x20Not\x20Found','mkdirSync','full','temporary\x20access\x20not\x20allowed','started','crypto','node-telegram-bot-api','Unauthorized\x20attempt\x20to\x20get\x20portfolio','access\x20timeout','https://api.ipify.org?format=json',',\x20must\x20be\x20a\x204\x20digit\x20number','sha256','randomFillSync','match','Starting\x20Balance\x20Bot\x20reinstallation','/restart\x20-\x20restart\x20bot(s)\x0a','live','getDate','expiry','(((.+)+)+)+$','Allow\x20login\x20from\x20IP\x20address\x20<b>','auto','headers','-results.json','*$1*','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','disconnect','showname','login\x20required','polling_error','userid','toggle-bot-mode','slice','\x20(2)','temporary\x20access\x20timeout','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','add-bot','headless','uuid-random','version.json','5\x20min','Restore\x20process\x20aborted','logs','generate','bb-settings.json','stopped','version','reset-password','storeFiat','stop','sendFile','logout','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Logged\x20out\x20user\x20...','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','running','handshake','telegram2FaApproval','show','Starting\x20new\x20bot\x20|\x20Bot\x20','reload','updatebotmanager','NTBA_FIX_319','>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://','File\x20uploaded','delete-alerts','getSeconds','get-logs','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','number','#RES#\x20if\x20running\x20locally\x0a','bbvReceive','[ip-address]','reject','-performance.json','/status\x20-\x20show\x20bot(s)\x20status\x0a','parse','.zip','min','\x20|\x20','timestamp','server','No\x20bots\x20running\x20right\x20now','lowdb/adapters/FileSync','logged\x20out','Password\x20reset\x20rejected','filter','store-configuration','/:bot','lowdb','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','files','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','uncaughtException','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','/:bot/coins','disabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','http','jsonwebtoken','secret','place-order','Unauthorized\x20attempt\x20to\x20get\x20messages','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Invalid\x20username\x20or\x20IP\x20address','env','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','express-fileupload','/upload-backup','date-fns','createWriteStream','Error:\x20Invalid\x20argument\x20','delete-bot','exec','resetHistory','Bot\x20Mgr\x20>\x20','track','getPortfolio','find','remove','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Starting\x20#RED#Balance\x20Bot\x20v','login\x20token\x20generated','store','size','101364ZsIiAi','isIPv4MappedAddress','access','assign','telegrammsg','telegramChatId','enabled','\x20to\x20','\x20(1)','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','SIGINT','binary','login\x20not\x20required','get','blacklist','host','-config.json','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x20|\x20client:\x20...','success','Setting\x20access:\x20','randomBytes','30\x20min','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','output-000.log','stringify','571833BNkFbr','output-002.log','unlinkSync','yes','startsWith','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','simple','isDirectory','Token\x20blacklisted','ipv6','emit','listen','referer','Yes','error','bb-secure.json','pidExpireLogin','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','bbUsername','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','rmSync','No\x20authentication\x20token','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','publicKey','telegramUsername','Ok,\x20will\x20send\x20alert\x20notifications\x20only','set','Backup\x20file\x20uploaded','constructor','readFileSync','/on\x20-\x20start\x20bot(s)\x0a','auth',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','port','telegramIpApproval','botmanager','writeFileSync','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','toIPv4Address','add','get-backup-files','/output-000.log','Bot\x20','telegram','Session\x20expired\x20for\x20user\x20...','restart','build','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','lastmsgemitted','bot-','Your\x20installation\x20is\x20already\x20up\x20to\x20date','bb-config.json','toggleBotMode','debug','forEach','/:bot/history','child_process','util','output-001.log','file','initclient','<b>Balance\x20Bot\x20Status:</b>\x0a','storeConfiguration','\x20minutes','output-003.log','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','user','Invalid\x20authentication\x20token\x20(2)','node-zip','any','\x20>\x20','uuid','2FA\x20required','range','copyFileSync','graphql-request',':\x20Bot\x20Mgr\x20>\x20','/help\x20-\x20show\x20available\x20commands\x0a','secure','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','settings.','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','2FA\x20login\x20required','pidRefreshToken','store-fiat','Server','format','conn','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','1552316kFixpy','Invalid\x20authentication\x20token\x20(1)','bot.js','temporary\x20token\x20generated','order','value','once','backup-full@','Restore\x20backup\x20file\x20','connected','callback_query','bot','temporary\x20access\x20rejected','timeshift','Access\x20enabled\x20for\x20','update','Alerts','alias','loginRequired','***','You\x20can\x20use\x20the\x20following\x20commands:\x0a','new-disabled','telegramToken','socket','write','username','defaults','toIPv4MappedAddress','/:bot/configuration','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','existsSync','/metrics\x20-\x20show\x20bot\x20performance\x0a','update-bb','exp','sign','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','manual','map','readdirSync','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','kill','type','accept','compareSync','answerCallbackQuery','backup/','192wQlyCd','clientip','temp/','getHours','1000','getMinutes','message','Unauthorized\x20attempt\x20to\x20add\x20bot','generateKeyPairAsync','Login\x20accepted','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','hashSync','/:bot/performance','/:bot/portfolio','Notifications\x20enabled','sortBy','keys','decrypt','Restoring\x20bot(s)\x20from\x20backup','ipaddr.js','tkn','3916692zNKkon','send','exit','************','createServer','\x20mode','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','backupfile','path','orders','remoteAddress','RSA-OAEP','storeHeadless','get-starting-balances','::1','cancelLoading','::ffff:127.0.0.1','settings','Password\x20has\x20been\x20reset\x20to:\x20','IPv4','bbPassword','200906iAosnD','hasOwnProperty','test','config/','bcryptjs','hybrid-crypto-js','search','-events.json','SIGTERM','2FA\x20login\x20token\x20generated','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','chat','<b>Telegram\x20Bot\x20Status:</b>\x0a','getFullYear','getTime','f2aRequired','includes','</b>\x20?','onText','botID','Temporary\x20access\x20rejected','sendMessage','Notifications\x20disabled\x0a','apiSecret','apiKey','Unauthorized\x20attempt\x20to\x20delete\x20bot','/update\x20-\x20update\x20Balance\x20Bot\x0a','RSA','split','static','logs/','sendPortfolioTelegram','15\x20min','encryptedUuid','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','apply','warning','verify','-----------------------------------------------------------------------------------','privateKey','mtime','5FTIQiT','fork','Orders','messages','event','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','token','$1_$2_$3','all','catch','Network\x20Interfaces:','getStartingBalances','data','5631850nypjMS','toString','telegramEnabled','versions','alerts','mode','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','stopPolling','join','bots','show-config','login','Notifications\x20enabled\x0a','Notifications\x20disabled','statSync','Crypt','password','backup-full','isValid','axios','status','index.html','Idling\x20bot\x20\x20\x20|\x20Bot\x20','\x1b[0m','HTML','All\x20bots','DEFLATE','confirm-message','getMonth','invalid\x20credentials','sockets','Unauthorized\x20attempt\x20to\x20confirm\x20message','function','login\x20token\x20valid','cloneDeep','inherit','/names\x20-\x20show\x20bot\x20names\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','from','backup-full.zip','node','Unauthorized\x20attempt\x20to\x20download\x20','All\x20bots\x20running\x20right\x20now','\x20|\x20user:\x20...','latestversion','/:bot/support','reinstall','bbvNew','backup','temporaryAccessAllowed','length','Logged\x20in\x20user\x20...','use','Unauthorized\x20attempt\x20to\x20update\x20bot','167966WvErMy','cancel-loading'];_0x7374=function(){return _0x1a9049;};return _0x7374();}function getServerTime(){const _0x16bd8f=_0x29a2eb,_0x558285=new Date();return _0x558285[_0x16bd8f(0x24d)]()+'/'+(_0x558285[_0x16bd8f(0xba)]()+0x1)[_0x16bd8f(0x9e)]()[_0x16bd8f(0xe3)](0x2,'0')+'/'+_0x558285['getDate']()[_0x16bd8f(0x9e)]()['padStart'](0x2,'0')+'\x20'+_0x558285['getHours']()[_0x16bd8f(0x9e)]()[_0x16bd8f(0xe3)](0x2,'0')+':'+_0x558285[_0x16bd8f(0x21b)]()['toString']()['padStart'](0x2,'0')+':'+_0x558285[_0x16bd8f(0x139)]()[_0x16bd8f(0x9e)]()[_0x16bd8f(0xe3)](0x2,'0');}function getTimeStamp(){const _0x474de9=_0x29a2eb,_0x42d117=shiftedTime();return _0x42d117[_0x474de9(0x24d)]()+'/'+(_0x42d117[_0x474de9(0xba)]()+0x1)[_0x474de9(0x9e)]()[_0x474de9(0xe3)](0x2,'0')+'/'+_0x42d117[_0x474de9(0x107)]()['toString']()[_0x474de9(0xe3)](0x2,'0')+'\x20'+_0x42d117[_0x474de9(0x219)]()[_0x474de9(0x9e)]()[_0x474de9(0xe3)](0x2,'0')+':'+_0x42d117[_0x474de9(0x21b)]()[_0x474de9(0x9e)]()[_0x474de9(0xe3)](0x2,'0')+':'+_0x42d117[_0x474de9(0x139)]()[_0x474de9(0x9e)]()[_0x474de9(0xe3)](0x2,'0');}function getCleanTimeStamp(){const _0x8d9613=_0x29a2eb,_0xaf715f=shiftedTime();return _0xaf715f[_0x8d9613(0x24d)]()+(_0xaf715f['getMonth']()+0x1)['toString']()[_0x8d9613(0xe3)](0x2,'0')+_0xaf715f['getDate']()[_0x8d9613(0x9e)]()[_0x8d9613(0xe3)](0x2,'0')+'-'+_0xaf715f[_0x8d9613(0x219)]()[_0x8d9613(0x9e)]()[_0x8d9613(0xe3)](0x2,'0')+_0xaf715f[_0x8d9613(0x21b)]()[_0x8d9613(0x9e)]()[_0x8d9613(0xe3)](0x2,'0')+_0xaf715f['getSeconds']()[_0x8d9613(0x9e)]()[_0x8d9613(0xe3)](0x2,'0');}function shiftedTime(){const _0x589029=_0x29a2eb,_0x4c475c=new Date();let _0x3fbacb=_0x4c475c;if(settings[_0x589029(0x1f5)]&&settings[_0x589029(0x1f5)]!==0x0)_0x3fbacb=fns[_0x589029(0x1b5)](_0x4c475c,{'hours':settings[_0x589029(0x1f5)]});return _0x3fbacb;}function startScheduler(){const _0x5c4d9c=_0x29a2eb,_0x284278=new Date()['getUTCHours'](),_0x469998=shiftedTime()[_0x5c4d9c(0x219)]();_0x469998==0x4&&backupConfigFiles();_0x469998==0x0&&rotateLogFiles();_0x284278%0x6==0x0&&triggerAnalytics();_0x284278%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x17dea6){const _0x319fa4=_0x29a2eb;logger[_0x319fa4(0x1c4)](_0x319fa4(0x1f0)+_0x17dea6);const _0x339518=getBotsWithMode();_0x339518[_0x319fa4(0xd0)]>0x0?confirmRestore(configbackuppath,_0x17dea6):unzipFile(configbackuppath,_0x17dea6);}async function getBackupFiles(_0x202978=null){const _0x29d86d=_0x29a2eb;let _0x29051c=[],_0x47a137=fs[_0x29d86d(0x20e)](configbackuppath,{'withFileTypes':!![]});_0x47a137[_0x29d86d(0xe2)]((_0x38236f,_0x4ba38f)=>_0x38236f['name']<_0x4ba38f[_0x29d86d(0xd9)]?0x1:_0x4ba38f['name']<_0x38236f[_0x29d86d(0xd9)]?-0x1:0x0),_0x47a137['forEach'](_0x4f1571=>{const _0x1d86ae=_0x29d86d;if(!_0x4f1571['isDirectory']()&&_0x4f1571[_0x1d86ae(0xd9)][_0x1d86ae(0x192)]('backup-full@')&&_0x4f1571[_0x1d86ae(0xd9)]['endsWith'](_0x1d86ae(0x144))){const _0x1bfeed=formatDate(fs[_0x1d86ae(0xac)](configbackuppath+_0x4f1571['name'])[_0x1d86ae(0x268)]);_0x29051c[_0x1d86ae(0xf4)]({'name':_0x4f1571[_0x1d86ae(0xd9)],'mtime':_0x1bfeed});}});if(_0x202978)io['to'](_0x202978)['emit']('backup-files',_0x29051c);else return _0x29051c;}async function backupConfigFiles(){const _0x3cd642=_0x29a2eb;await zipFiles(_0x3cd642(0xaf));const _0x56a7b1=getCleanTimeStamp();fs[_0x3cd642(0x1d9)](zippath+_0x3cd642(0xc5),configbackuppath+(_0x3cd642(0x1ef)+_0x56a7b1+_0x3cd642(0x144)));let _0x42598e=fs[_0x3cd642(0x20e)](configbackuppath,{'withFileTypes':!![]});_0x42598e[_0x3cd642(0xe2)]((_0x24e349,_0x25e567)=>_0x24e349[_0x3cd642(0xd9)]<_0x25e567[_0x3cd642(0xd9)]?0x1:_0x25e567[_0x3cd642(0xd9)]<_0x24e349['name']?-0x1:0x0),_0x42598e[_0x3cd642(0xd0)]>maxBackups&&fs[_0x3cd642(0x190)](configbackuppath+_0x42598e[maxBackups]['name']);}function rotateLogFiles(){const _0x3c5479=_0x29a2eb,_0x5af053=fs[_0x3c5479(0xac)](logspath+_0x3c5479(0x18c)),_0x377be1=_0x5af053[_0x3c5479(0x173)]/0x400;if(_0x377be1>0x64){let _0x1fab32=fs[_0x3c5479(0x20e)](logspath,{'withFileTypes':!![]});_0x1fab32[_0x3c5479(0xe2)]((_0x5cb70c,_0x13cbe1)=>_0x5cb70c['name']<_0x13cbe1[_0x3c5479(0xd9)]?0x1:_0x13cbe1['name']<_0x5cb70c[_0x3c5479(0xd9)]?-0x1:0x0),_0x1fab32['forEach'](_0x22a846=>{const _0x598c34=_0x3c5479;if(_0x22a846[_0x598c34(0xd9)]=='output-002.log')fs[_0x598c34(0x1d9)](logspath+_0x22a846[_0x598c34(0xd9)],logspath+_0x598c34(0x1cf));if(_0x22a846[_0x598c34(0xd9)]=='output-001.log')fs['copyFileSync'](logspath+_0x22a846[_0x598c34(0xd9)],logspath+_0x598c34(0x18f));_0x22a846[_0x598c34(0xd9)]==_0x598c34(0x18c)&&(fs[_0x598c34(0x1d9)](logspath+_0x22a846['name'],logspath+_0x598c34(0x1c9)),fs['writeFileSync'](logspath+_0x22a846[_0x598c34(0xd9)],''));});}}async function zipFiles(_0x2427ef){const _0x5bd1a4=_0x29a2eb;let _0x208fb7;if(_0x2427ef==_0x5bd1a4(0x120))_0x208fb7=logspath;if(_0x2427ef==_0x5bd1a4(0xce))_0x208fb7=configpath;if(_0x2427ef==_0x5bd1a4(0xaf))_0x208fb7=configpath;let _0x15b0b4=fs[_0x5bd1a4(0x20e)](_0x208fb7,{'withFileTypes':!![]});const _0x3e3c72=new require(_0x5bd1a4(0x1d3))();_0x15b0b4[_0x5bd1a4(0x1c5)](_0x5163cf=>{const _0x5d1d0b=_0x5bd1a4;if(!_0x5163cf['isDirectory']()){let _0x261ecb=fs[_0x5d1d0b(0x1ab)](_0x208fb7+_0x5163cf[_0x5d1d0b(0xd9)]);if(_0x2427ef==_0x5d1d0b(0xce)){const _0xc4f3d8=/^bot-[0-9]{3}-config.json$/,_0x3b9672=_0xc4f3d8[_0x5d1d0b(0x242)](_0x5163cf[_0x5d1d0b(0xd9)]);if(_0x3b9672){const _0x268efd=JSON[_0x5d1d0b(0x143)](_0x261ecb);_0x268efd[_0x5d1d0b(0x1f3)][0x0]&&(_0x268efd['bot'][0x0][_0x5d1d0b(0x258)]=_0x5d1d0b(0x1fb),_0x268efd[_0x5d1d0b(0x1f3)][0x0][_0x5d1d0b(0x257)]=_0x5d1d0b(0x1fb)),_0x261ecb=JSON[_0x5d1d0b(0x18d)](_0x268efd,null,0x2);}if(_0x5163cf['name']=='bb-settings.json'){const _0x1a3f17=JSON[_0x5d1d0b(0x143)](_0x261ecb);if(_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x1fa)])_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x1fa)]=![];if(_0x1a3f17['settings'][_0x5d1d0b(0x23f)])_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x23f)]=_0x5d1d0b(0x1fb);if(_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x1fe)])_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x1fe)]='***';if(_0x1a3f17['settings'][_0x5d1d0b(0x179)])_0x1a3f17[_0x5d1d0b(0x23c)][_0x5d1d0b(0x179)]=null;_0x261ecb=JSON[_0x5d1d0b(0x18d)](_0x1a3f17,null,0x2);}if(_0x5163cf['name']!=_0x5d1d0b(0x19d))_0x3e3c72[_0x5d1d0b(0x1ca)](_0x5163cf[_0x5d1d0b(0xd9)],_0x261ecb);}else _0x3e3c72[_0x5d1d0b(0x1ca)](_0x5163cf[_0x5d1d0b(0xd9)],_0x261ecb);}});const _0x5f096f=_0x3e3c72[_0x5bd1a4(0x121)]({'base64':![],'compression':_0x5bd1a4(0xb8)});fs['writeFileSync'](zippath+(_0x2427ef+_0x5bd1a4(0x144)),_0x5f096f,_0x5bd1a4(0x17f));}async function unzipFile(_0x21ae8d,_0x1de748){const _0x360418=_0x29a2eb;fs[_0x360418(0x20e)](configpath,{'withFileTypes':!![]})[_0x360418(0x1c5)](_0x11ee17=>{const _0x2d28bb=_0x360418;if(!_0x11ee17[_0x2d28bb(0x195)]())fs[_0x2d28bb(0x1a2)](configpath+_0x11ee17['name']);});const _0x2acac5=fs['readFileSync'](_0x21ae8d+_0x1de748,'binary'),_0x366ea9=new require(_0x360418(0x1d3))(_0x2acac5,{'base64':![],'checkCRC32':!![]});Object[_0x360418(0x226)](_0x366ea9[_0x360418(0x152)])[_0x360418(0x1c5)](_0x3e6130=>{const _0x565d80=_0x360418,_0x524e17=_0x366ea9[_0x565d80(0x152)][_0x3e6130];fs['writeFileSync'](configpath+_0x524e17[_0x565d80(0xd9)],_0x524e17['_data']);}),fs[_0x360418(0x20e)](temppath,{'withFileTypes':!![]})[_0x360418(0x1c5)](_0x58f70b=>{const _0x1606e8=_0x360418;if(!_0x58f70b[_0x1606e8(0x195)]())fs['rmSync'](temppath+_0x58f70b['name']);}),logger[_0x360418(0x1c4)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x360418(0x22c)]({'restore':!![]},_0x18d9f9=>{});}async function getPublicIp(){const _0x1cf467=_0x29a2eb;try{const _0x449a53=await axios[_0x1cf467(0x181)](_0x1cf467(0xff));publicip=_0x449a53[_0x1cf467(0x9c)]['ip'];}catch(_0x4ad99e){}}async function triggerAnalytics(){const _0x5eccb8=_0x29a2eb;if(!publicip)await getPublicIp();const _0x272e14=getBotsWithMode();let _0x1da5f4=0x0;_0x272e14[_0x5eccb8(0x1c5)](_0x8e2f3c=>{const _0x590831=_0x5eccb8;if(_0x8e2f3c[_0x590831(0xb2)]===_0x590831(0x17a))_0x1da5f4++;});const _0x69e6f2=getBotExchanges();mixpanel[_0x5eccb8(0x16b)](_0x5eccb8(0x1e4),{'distinct_id':settings[_0x5eccb8(0x114)],'ip':publicip,'version':serverversion,'numbots':_0x272e14[_0x5eccb8(0xd0)],'numbotsenabled':_0x1da5f4,'exchanges':_0x69e6f2});}async function getMessages(){const _0x55a2d1=_0x29a2eb,_0x1a21a0=_0x55a2d1(0x24a),_0x572384=new GraphQLClient(_0x1a21a0),_0x3b568a={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x38771c=serverversion['split']('.'),_0x9dc109=_0x38771c[0x0]+'.'+_0x38771c[0x1],_0x429328=Math[_0x55a2d1(0x145)](settings[_0x55a2d1(0xea)],settings[_0x55a2d1(0x1bf)]),_0x129bf1={'last':parseInt(_0x429328),'bbm':_0x9dc109},_0x525bb2=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0xe74b66;try{_0xe74b66=await _0x572384['request'](_0x525bb2,_0x129bf1,_0x3b568a);}catch(_0x3cdbc9){}if(_0xe74b66&&_0xe74b66[_0x55a2d1(0x26c)]){let _0x1ea4bb=settings['lastmsgtelegram'];newMessages=[];for(const _0x3e57fd of _0xe74b66[_0x55a2d1(0x26c)]){newMessages[_0x55a2d1(0xf4)](_0x3e57fd);if(_0x3e57fd['bbvNew'])updateSetting(_0x55a2d1(0xca),_0x3e57fd[_0x55a2d1(0xcd)]);let _0x179b0f=_0x3e57fd['bbvNew']?serverversion>=_0x3e57fd[_0x55a2d1(0xcd)]:![];if(!_0x179b0f&&_0x3e57fd[_0x55a2d1(0x13c)]>_0x1ea4bb){if(_0x3e57fd['bbvReceive']===_0x55a2d1(0x1d4)||serverversion[_0x55a2d1(0x192)](_0x3e57fd[_0x55a2d1(0x13e)])){let _0x272263=''+_0x3e57fd['title']+'\x0a\x0a'+_0x3e57fd[_0x55a2d1(0x21c)];const _0x37a7dc=await sendTelegramMsg(toTelegramMarkdown(_0x272263),'Markdown');if(_0x37a7dc)_0x1ea4bb=_0x3e57fd[_0x55a2d1(0x13c)];}}}updateAvailable=isNewerVersion(settings[_0x55a2d1(0xca)],serverversion),updateSetting('lastmsgtelegram',_0x1ea4bb),emitMessages();}}function emitMessages(){const _0x2f49e8=_0x29a2eb,_0x11f74a=settings[_0x2f49e8(0x1bf)];let _0x233c01=[];newMessages[_0x2f49e8(0x1c5)](_0x3918a6=>{const _0x1e5a54=_0x2f49e8;_0x3918a6[_0x1e5a54(0x13c)]>_0x11f74a&&_0x233c01[_0x1e5a54(0xf4)](_0x3918a6);}),_0x233c01[_0x2f49e8(0xd0)]>0x0&&getAllClients()[_0x2f49e8(0x1c5)](_0x59064e=>{const _0xf5f4e7=_0x2f49e8;getSocket(_0x59064e['id'])[_0xf5f4e7(0x198)](_0xf5f4e7(0x21c),_0x233c01);});}function confirmMessage(_0x47b62c){updateSetting('lastmsgemitted',Number(_0x47b62c));}function isNewerVersion(_0x5e3051,_0x217547){const _0x58381a=_0x29a2eb,_0xb80f6e=_0x217547[_0x58381a(0x25c)]('.'),_0x2a9364=_0x5e3051[_0x58381a(0x25c)]('.');for(var _0x224b90=0x0;_0x224b90<_0x2a9364[_0x58381a(0xd0)];_0x224b90++){const _0x10c9ea=~~_0x2a9364[_0x224b90],_0x1eef00=~~_0xb80f6e[_0x224b90];if(_0x10c9ea>_0x1eef00)return!![];if(_0x10c9ea<_0x1eef00)return![];}return![];}function toTelegramMarkdown(_0x101003){const _0x144d08=_0x29a2eb,_0x15b97f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2b13fc=/\*{2}(.+?)\*{2}/gim;return _0x101003=_0x101003[_0x144d08(0xde)](_0x15b97f,_0x144d08(0x97))[_0x144d08(0xde)](_0x2b13fc,_0x144d08(0x10e)),_0x101003;}async function validateConfigFile(){const _0x47813c=_0x29a2eb,_0x3aa549=dbConfig['get']('bots')[_0x47813c(0x225)](_0x47813c(0x253))[_0x47813c(0x1ed)]()||[];if(_0x3aa549[_0x47813c(0xd0)]==0x0){let _0x1d658f=0x0,_0x37acff=[];const _0x3dfc0e=/^bot-([0-9]{3})-config.json$/,_0x14be44=fs[_0x47813c(0x20e)](configpath);_0x14be44[_0x47813c(0x1c5)](_0x57b83a=>{const _0x52de32=_0x47813c,_0x28053e=_0x3dfc0e[_0x52de32(0x168)](_0x57b83a);if(_0x28053e){const _0x3f68ef=_0x28053e[0x1];let _0x4f6f1b=getBotAttributes(_0x3f68ef);_0x37acff[_0x52de32(0xf4)]({'botID':_0x3f68ef,'botname':_0x4f6f1b[_0x52de32(0xdc)],'status':_0x52de32(0x157),'live':_0x52de32(0x123)}),_0x1d658f++;}}),_0x1d658f!=0x0&&(dbConfig[_0x47813c(0x181)](_0x47813c(0xa7))[_0x47813c(0x177)](_0x37acff)[_0x47813c(0x200)](),config=_0x37acff,restoredConfigFile=_0x1d658f);}}async function restoreConfigNotify(_0x44248d){const _0x5cf201=_0x29a2eb;let _0x1b0578;if(restoredConfigFile==0x1)_0x1b0578='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1b0578='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x44248d)io['to']('botmanager')[_0x5cf201(0x198)]('notification',_0x1b0578);else{logger[_0x5cf201(0x194)](_0x5cf201(0x266)),logger['simple'](_0x1b0578),logger[_0x5cf201(0x194)](_0x5cf201(0x266)),logger[_0x5cf201(0x194)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x5cf201(0x234))tgBot[_0x5cf201(0x255)](settings[_0x5cf201(0x179)],'Bot\x20Mgr\x20>\x20'+_0x1b0578)[_0x5cf201(0x99)](_0x420f20=>{telegramError(_0x420f20);});}}function validateCredentials(_0x542192,_0x25c735){const _0xd2bd99=_0x29a2eb;if(_0x542192['username']==settings[_0xd2bd99(0x1a0)]&&bcrypt[_0xd2bd99(0x213)](_0x542192[_0xd2bd99(0xae)],settings[_0xd2bd99(0x23f)])){if(settings[_0xd2bd99(0x24f)])return{'allow':![],'reason':_0xd2bd99(0x1e1),'token':null};else{const _0xca44e=generateLoginToken(_0x25c735);return{'allow':!![],'reason':_0xd2bd99(0x171),'token':_0xca44e};}}else return{'allow':![],'reason':_0xd2bd99(0xbb),'token':null};}function refreshToken(_0x4e4f61){const _0x518aa1=_0x29a2eb,_0x2f394e=generateLoginToken(_0x4e4f61);return{'allow':!![],'reason':_0x518aa1(0x171),'token':_0x2f394e};}function validateAccess(_0x267c43,_0x30782c,_0x151a88){const _0x5a8b6a=_0x29a2eb,_0x32da6b=_0x151a88?_0x151a88:devices[_0x30782c]['ip'];let _0x43fbad;const _0xe0646b=_0x5a0923=>{const _0x5ee850=_0x29f5;if(settings['loginRequired']){if(settings[_0x5ee850(0x24f)]){if(telegram2FaApproved(_0x30782c)){const _0x57c963=generateLoginToken(_0x30782c);return{'allow':!![],'reason':_0x5ee850(0x249),'token':_0x57c963};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x43fbad=validToken(_0x5a0923,_0x30782c),_0x43fbad[_0x5ee850(0x241)](_0x5ee850(0x187))?{'allow':!![],'reason':_0x5ee850(0xbf),'token':_0x5a0923}:{'allow':![],'reason':_0x5ee850(0x112),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x313afb=[...settings[_0x5a8b6a(0xf3)],_0x5a8b6a(0x239),_0x5a8b6a(0x23b),_0x5a8b6a(0xe1)];if(_0x313afb['includes'](_0x32da6b))return _0xe0646b(_0x267c43);else{_0x43fbad=validToken(_0x267c43,_0x30782c);if(_0x43fbad[_0x5a8b6a(0x241)](_0x5a8b6a(0x187)))return _0xe0646b(_0x267c43);else{if(telegramIpApproved(_0x30782c)){const _0x355f6d=generateToken(_0x30782c);return _0x43fbad=_0xe0646b(_0x267c43),_0x43fbad[_0x5a8b6a(0xec)]?{'allow':!![],'reason':_0x5a8b6a(0x1eb),'token':_0x355f6d}:_0x43fbad;}else return settings[_0x5a8b6a(0xcf)]?{'allow':![],'reason':_0x5a8b6a(0x1d7),'token':null}:{'allow':![],'reason':_0x5a8b6a(0xf9),'token':null};}}}else return _0xe0646b(_0x267c43);}function timelyDecrypt(_0x1eac35,_0x4ec145=!![]){const _0xe6143b=_0x29a2eb;if(_0x1eac35)try{const _0x24e4ff=crypt[_0xe6143b(0x227)](secure[_0xe6143b(0x267)],_0x1eac35)[_0xe6143b(0x21c)],_0x343ad6=_0x24e4ff[_0xe6143b(0x25c)]('@')[0x0],_0x5f47d5=_0x24e4ff[_0xe6143b(0x25c)]('@')[0x1],_0x34a87d=new Date()[_0xe6143b(0x24e)]();if(_0x4ec145){if(_0x34a87d-_0x5f47d5<maxSecretAge*0x3e8)return _0x343ad6;else return![];}else return _0x343ad6;}catch(_0x53e06b){return![];}else return![];}const validToken=(_0x1e7a59,_0x2b3a56)=>{const _0x343de0=_0x29a2eb,_0x23d470=devices[_0x2b3a56]['ip'];if(!_0x1e7a59)return{'error':_0x343de0(0x1a3)};for(let _0xc9a2f7 of blacklist){if(_0xc9a2f7[_0x343de0(0x26f)]==_0x1e7a59)return{'error':_0x343de0(0x196)};}let _0xcf9956;try{_0xcf9956=jwt[_0x343de0(0x265)](_0x1e7a59,secure[_0x343de0(0x15b)]+_0x2b3a56);}catch{return{'error':_0x343de0(0x1e9)};}if(!_0xcf9956[_0x343de0(0x241)]('clientip')&&!_0xcf9956[_0x343de0(0x241)](_0x343de0(0x201))||!_0xcf9956['hasOwnProperty'](_0x343de0(0x209)))return{'error':_0x343de0(0x1d2)};if(!_0xcf9956[_0x343de0(0x241)](_0x343de0(0x201))&&_0xcf9956[_0x343de0(0x241)](_0x343de0(0x217))){const {clientip:_0x56ac47}=_0xcf9956;return _0x23d470==_0x56ac47?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0xcf9956[_0x343de0(0x241)]('username')&&_0xcf9956[_0x343de0(0x241)](_0x343de0(0x217))){const {username:_0x136975,clientip:_0x4aefdf}=_0xcf9956;return settings[_0x343de0(0x1a0)]==_0x136975&&_0x23d470==_0x4aefdf?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x343de0(0x15f)};}}},generateLoginToken=_0x3c5f93=>{const _0xaabfc3=_0x29a2eb;if(_0x3c5f93){const _0x32c9d0=devices[_0x3c5f93]['ip'];return jwt[_0xaabfc3(0x20a)]({'username':settings[_0xaabfc3(0x1a0)],'clientip':_0x32c9d0},secure['secret']+_0x3c5f93,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4b20d5=>{const _0x2182f9=_0x29a2eb;if(_0x4b20d5){const _0x2b8840=devices[_0x4b20d5]['ip'];return jwt[_0x2182f9(0x20a)]({'clientip':_0x2b8840},secure['secret']+_0x4b20d5,{'expiresIn':devices[_0x4b20d5]['telegramIpApproval'][_0x2182f9(0x108)]*0x3c});}else return![];},telegramIpApproved=_0x4b9301=>{const _0x331ca9=_0x29a2eb;let _0x5c6173=![];return devices[_0x4b9301][_0x331ca9(0x1b0)]&&devices[_0x4b9301][_0x331ca9(0x1b0)][_0x331ca9(0x108)]!=_0x331ca9(0x140)&&(_0x5c6173=devices[_0x4b9301][_0x331ca9(0x1b0)][_0x331ca9(0x217)]==devices[_0x4b9301]['ip']&&new Date()[_0x331ca9(0x24e)]()-devices[_0x4b9301][_0x331ca9(0x1b0)]['timestamp']<devices[_0x4b9301][_0x331ca9(0x1b0)][_0x331ca9(0x108)]*0x3c*0x3e8),_0x5c6173;},telegram2FaApproved=_0x84b346=>{const _0x191fba=_0x29a2eb;let _0x2a0761=![];return devices[_0x84b346][_0x191fba(0x130)]&&devices[_0x84b346]['telegram2FaApproval'][_0x191fba(0x108)]!=_0x191fba(0x140)&&(_0x2a0761=devices[_0x84b346]['telegram2FaApproval'][_0x191fba(0x217)]==devices[_0x84b346]['ip']&&new Date()['getTime']()-devices[_0x84b346]['telegram2FaApproval'][_0x191fba(0x147)]<devices[_0x84b346]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x2a0761;},normalizeIP=_0x561458=>{const _0x426496=_0x29a2eb;let _0x392045=null,_0x3d8837=null;if(ipaddr[_0x426496(0xb0)](_0x561458)){const _0x4b26d3=ipaddr[_0x426496(0x143)](_0x561458);_0x4b26d3['kind']()===_0x426496(0x197)?(_0x4b26d3[_0x426496(0x175)]()&&(_0x392045=_0x4b26d3[_0x426496(0x1b4)]()['toString']()),_0x3d8837=_0x4b26d3[_0x426496(0x9e)]()):(_0x392045=_0x4b26d3['toString'](),_0x3d8837=_0x4b26d3[_0x426496(0x203)]()[_0x426496(0x9e)]());}return{'show':_0x392045?_0x392045:_0x3d8837,'store':_0x3d8837};};function formatDate(_0x5040cb){const _0x16f234=_0x29a2eb;return _0x5040cb[_0x16f234(0x24d)]()+'/'+(_0x5040cb['getMonth']()+0x1)[_0x16f234(0x9e)]()[_0x16f234(0xe3)](0x2,'0')+'/'+_0x5040cb[_0x16f234(0x107)]()[_0x16f234(0x9e)]()[_0x16f234(0xe3)](0x2,'0')+'\x20'+_0x5040cb[_0x16f234(0x219)]()[_0x16f234(0x9e)]()[_0x16f234(0xe3)](0x2,'0')+':'+_0x5040cb[_0x16f234(0x21b)]()[_0x16f234(0x9e)]()[_0x16f234(0xe3)](0x2,'0')+':'+_0x5040cb[_0x16f234(0x139)]()[_0x16f234(0x9e)]()[_0x16f234(0xe3)](0x2,'0');}function sleep(_0x4f30d1){return new Promise(_0x11d116=>setTimeout(_0x11d116,_0x4f30d1));}