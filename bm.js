const _0x4e7f62=_0x4ba0;(function(_0x14a145,_0x220c72){const _0x1d51e8=_0x4ba0,_0x2a1608=_0x14a145();while(!![]){try{const _0x4bcea9=-parseInt(_0x1d51e8(0x14a))/0x1+-parseInt(_0x1d51e8(0xc7))/0x2+-parseInt(_0x1d51e8(0xd5))/0x3*(parseInt(_0x1d51e8(0x1c0))/0x4)+-parseInt(_0x1d51e8(0xde))/0x5+parseInt(_0x1d51e8(0x191))/0x6+-parseInt(_0x1d51e8(0xbc))/0x7+parseInt(_0x1d51e8(0xc1))/0x8*(parseInt(_0x1d51e8(0x11a))/0x9);if(_0x4bcea9===_0x220c72)break;else _0x2a1608['push'](_0x2a1608['shift']());}catch(_0x3e0e37){_0x2a1608['push'](_0x2a1608['shift']());}}}(_0x2c59,0x9a989));const _0x2bbf70=function(){let _0x4979fb=!![];return function(_0x513d2f,_0x45209f){const _0x1f4185=_0x4979fb?function(){const _0x1b306d=_0x4ba0;if(_0x45209f){const _0x43d967=_0x45209f[_0x1b306d(0x19a)](_0x513d2f,arguments);return _0x45209f=null,_0x43d967;}}:function(){};return _0x4979fb=![],_0x1f4185;};}(),_0x29f99e=_0x2bbf70(this,function(){const _0x1e17b5=_0x4ba0;return _0x29f99e['toString']()[_0x1e17b5(0xea)](_0x1e17b5(0x1c3))[_0x1e17b5(0x96)]()[_0x1e17b5(0x19e)](_0x29f99e)[_0x1e17b5(0xea)](_0x1e17b5(0x1c3));});_0x29f99e();'use strict';process[_0x4e7f62(0x94)][_0x4e7f62(0xca)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x4e7f62(0xa5)),fs=require('fs'),fns=require(_0x4e7f62(0x1a2)),low=require('lowdb'),path=require(_0x4e7f62(0x123)),crypto=require(_0x4e7f62(0x1c1)),Crypt=require(_0x4e7f62(0x10a))[_0x4e7f62(0x10e)],RSA=require(_0x4e7f62(0x10a))['RSA'],bcrypt=require(_0x4e7f62(0x119)),jwt=require(_0x4e7f62(0x1a9)),analyticsLib=require(_0x4e7f62(0x121))[_0x4e7f62(0xd3)],googleAnalytics=require(_0x4e7f62(0x13a))[_0x4e7f62(0xd3)],ipaddr=require(_0x4e7f62(0x1a3)),argv=require('yargs/yargs')(process[_0x4e7f62(0xd0)][_0x4e7f62(0xf7)](0x2))[_0x4e7f62(0xd0)],PORT=argv['port']||_0x4e7f62(0xef),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4e7f62(0x17a)](PORT))return console[_0x4e7f62(0xa8)](_0x4e7f62(0x101)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x4e7f62(0x153)](0x1);const HOST=argv[_0x4e7f62(0x1b8)]||null,userID=argv[_0x4e7f62(0x82)]||'';let bbpath=_0x4e7f62(0x165),bbpath2='';const botfile=_0x4e7f62(0xb5),configfile='bb-config.json',settingsfile=_0x4e7f62(0x155),securefile=_0x4e7f62(0x15b);let validInstallation=!![];!fs[_0x4e7f62(0x100)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4e7f62(0x12e)),configpath=userID?bbpath+_0x4e7f62(0x1a0)+userID+'/':bbpath+_0x4e7f62(0x1a0),configbackuppath=configpath+_0x4e7f62(0x173);!fs[_0x4e7f62(0x100)](configpath)&&fs[_0x4e7f62(0x183)](configpath);!fs[_0x4e7f62(0x100)](configbackuppath)&&fs[_0x4e7f62(0x183)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e7f62(0xa6)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4e7f62(0xa6)]({'settings':{'timeshift':0x0}})[_0x4e7f62(0x7b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x4e7f62(0x7b)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x4e7f62(0x1af)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4e7f62(0x1a7))[_0x4e7f62(0x18b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4e7f62(0x168)),app=express(),http=require(_0x4e7f62(0x9e))[_0x4e7f62(0x152)](app);app[_0x4e7f62(0x102)](express[_0x4e7f62(0x182)](path[_0x4e7f62(0x87)](__dirname,bbpath2,_0x4e7f62(0xe9)))),app[_0x4e7f62(0x102)](express[_0x4e7f62(0x182)](path['join'](__dirname,bbpath2,_0x4e7f62(0xc8)))),app['get']('/',function(_0x5d2feb,_0x27b192){const _0x57d167=_0x4e7f62;_0x27b192['sendFile'](path[_0x57d167(0x87)](__dirname,bbpath2,_0x57d167(0xe9),_0x57d167(0x106)));}),app[_0x4e7f62(0x150)]('/:bot',function(_0x2cf6c0,_0x26a56e){const _0x591c55=_0x4e7f62;_0x26a56e[_0x591c55(0x80)](path[_0x591c55(0x87)](__dirname,bbpath2,_0x591c55(0xc8),_0x591c55(0x106)));}),app['get'](_0x4e7f62(0x157),(_0x117d79,_0x59d602)=>{const _0x1caa27=_0x4e7f62;_0x59d602[_0x1caa27(0x80)](path[_0x1caa27(0x87)](__dirname,bbpath2,_0x1caa27(0xc8),_0x1caa27(0x106)));}),app[_0x4e7f62(0x150)](_0x4e7f62(0x120),(_0x286729,_0x463186)=>{const _0x4e0abe=_0x4e7f62;_0x463186['sendFile'](path[_0x4e0abe(0x87)](__dirname,bbpath2,'build',_0x4e0abe(0x106)));}),app[_0x4e7f62(0x150)](_0x4e7f62(0x1b0),(_0xa9c8dc,_0x15b4a9)=>{const _0x226e12=_0x4e7f62;_0x15b4a9[_0x226e12(0x80)](path['join'](__dirname,bbpath2,_0x226e12(0xc8),_0x226e12(0x106)));}),app[_0x4e7f62(0x150)](_0x4e7f62(0x1ba),(_0x1015a2,_0x26dc1f)=>{const _0x4496e1=_0x4e7f62;_0x26dc1f[_0x4496e1(0x80)](path[_0x4496e1(0x87)](__dirname,bbpath2,_0x4496e1(0xc8),_0x4496e1(0x106)));}),app[_0x4e7f62(0x150)](_0x4e7f62(0xb3),(_0x5c485d,_0x116180)=>{const _0x4192f5=_0x4e7f62;_0x116180['sendFile'](path[_0x4192f5(0x87)](__dirname,bbpath2,'build','index.html'));}),app[_0x4e7f62(0x150)](_0x4e7f62(0x163),(_0x3cd9d9,_0x135149)=>{const _0x5d4585=_0x4e7f62;_0x135149[_0x5d4585(0x80)](path['join'](__dirname,bbpath2,'build',_0x5d4585(0x106)));});if(HOST)http[_0x4e7f62(0xe2)](PORT,HOST);else http[_0x4e7f62(0xe2)](PORT);const io=require(_0x4e7f62(0x11c))(http,{}),analytics=analyticsLib({'app':_0x4e7f62(0x190),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x4e7f62(0x181));let tgBot;if(settings[_0x4e7f62(0x198)]&&settings[_0x4e7f62(0x198)]!=''&&settings[_0x4e7f62(0x16e)]&&settings[_0x4e7f62(0x16e)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x50b4f3=_0x4e7f62;console[_0x50b4f3(0xa8)](''),console[_0x50b4f3(0xa8)](_0x50b4f3(0xf2)),logging(_0x50b4f3(0x1bf)+PORT),console[_0x50b4f3(0xa8)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x50b4f3(0x1ae)](_0x446e87=>{const _0x3a9e10=_0x50b4f3;if(_0x446e87[_0x3a9e10(0x84)]==_0x3a9e10(0x13c)||_0x446e87[_0x3a9e10(0x84)]==_0x3a9e10(0xa0))logging(_0x3a9e10(0x174)+_0x446e87['botID']+_0x3a9e10(0x135)+_0x446e87['botname']),startBot([_0x446e87[_0x3a9e10(0xb7)],userID],{'cwd':bbpath},function(_0x20f0af){if(_0x20f0af)logging(_0x20f0af);});else(_0x446e87[_0x3a9e10(0x84)]=='disabled'||_0x446e87[_0x3a9e10(0x84)]==_0x3a9e10(0x149))&&logging(_0x3a9e10(0xa1)+_0x446e87[_0x3a9e10(0xb7)]+_0x3a9e10(0x135)+_0x446e87[_0x3a9e10(0xfa)]);});else!newBot&&console[_0x50b4f3(0xa8)](_0x50b4f3(0xfd));if(newBot)addBot();console['log'](_0x50b4f3(0xf2)),console[_0x50b4f3(0xa8)]('');}function startSocket(){const _0x50ee1f=_0x4e7f62;io['on'](_0x50ee1f(0x1a4),_0x4ccbb0=>{const _0x13f460=_0x50ee1f;let _0x26b153,_0x1ac192,_0x57618e,_0xbb29a1,_0x47638f;const _0x48b618=_0x4ccbb0[_0x13f460(0x17c)][_0x13f460(0x187)][_0x13f460(0x13b)];_0x1ac192=_0x48b618[_0x13f460(0xae)](/bot[0-9]{3}/);if(_0x1ac192)_0x57618e=_0x1ac192[0x0][_0x13f460(0xae)](/[0-9]{3}/);if(_0x57618e)_0x26b153=_0x57618e[0x0];else _0x26b153='botmanager';const _0x46f758=_0x4ccbb0['handshake'][_0x13f460(0x148)][_0x13f460(0x16d)];if(!_0x46f758)_0x4ccbb0[_0x13f460(0xac)](_0x13f460(0x84),{'publicKey':secure[_0x13f460(0x164)]});else{_0xbb29a1=timelyDecrypt(_0x46f758,![]);if(!_0xbb29a1)_0x4ccbb0[_0x13f460(0xac)](_0x13f460(0x84),{'publicKey':secure[_0x13f460(0x164)]});else{_0x47638f=normalizeIP(_0x4ccbb0[_0x13f460(0xf6)]['remoteAddress'])[_0x13f460(0xe6)];if(!devices[_0xbb29a1])devices[_0xbb29a1]={'uuid':_0xbb29a1,'access':{'token':null}};devices[_0xbb29a1]['ip']=_0x47638f;const _0x39ea6d=addClient(_0x4ccbb0['id'],_0xbb29a1,_0x26b153);setAccess(_0x39ea6d),_0x4ccbb0['on'](_0x13f460(0xe0),_0x43dac0=>{const _0x212d1e=_0x13f460,_0x199b8b=timelyDecrypt(_0x43dac0['password']);if(_0x199b8b){_0x43dac0={'username':_0x43dac0[_0x212d1e(0x194)],'password':_0x199b8b},devices[_0xbb29a1][_0x212d1e(0xb4)]=validateCredentials(_0x43dac0,_0xbb29a1);if(devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xf5)]==![]&&devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xd8)]==_0x212d1e(0x1ac))_0x4ccbb0[_0x212d1e(0xac)](_0x212d1e(0x84),{'access':devices[_0xbb29a1][_0x212d1e(0xb4)]}),loginAccess2FA(_0xbb29a1,_0x47638f);else{if(devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xf5)]==![]&&devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xd8)]==_0x212d1e(0x10c))_0x4ccbb0[_0x212d1e(0xac)](_0x212d1e(0x84),{'access':devices[_0xbb29a1][_0x212d1e(0xb4)]});else devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xf5)]&&devices[_0xbb29a1][_0x212d1e(0xb4)][_0x212d1e(0xd8)]==_0x212d1e(0x95)&&(getClientsWithUuid(_0xbb29a1)[_0x212d1e(0x1ae)](_0x1ac90e=>{setAccess(_0x1ac90e);}),setTokenRefresh(_0xbb29a1),setSessionTimeout(_0x212d1e(0xe0),_0xbb29a1));}}else logging(_0x212d1e(0x136));}),_0x4ccbb0['on'](_0x13f460(0xb0),()=>{resetPassword();}),_0x4ccbb0['on'](_0x13f460(0xe1),_0x828d86=>{removeClient(_0x4ccbb0['id']);});}}});}function initClient(_0x189e37){const _0x4684c3=_0x4e7f62;if(_0x189e37!=_0x4684c3(0x193)&&config[_0x4684c3(0xd9)]!=''){if(pid[_0x189e37])pid[_0x189e37][_0x4684c3(0xd4)]({'function':_0x4684c3(0xf9),'args':null});}}function getSocket(_0x3ae20f){const _0x150b45=_0x4e7f62;return io[_0x150b45(0x14b)][_0x150b45(0x14b)][_0x150b45(0x150)](_0x3ae20f);}function setAccess(_0x37831d){const _0x2eece6=_0x4e7f62,_0x415a1e=getSocket(_0x37831d['id']),_0x46a050=_0x37831d['uuid'],_0x46bf30=_0x37831d[_0x2eece6(0x1b7)];devices[_0x46a050][_0x2eece6(0xb4)]=validateAccess(devices[_0x46a050][_0x2eece6(0xb4)][_0x2eece6(0x18a)],_0x46a050),_0x415a1e[_0x2eece6(0x87)](_0x46a050);if(devices[_0x46a050]['access'][_0x2eece6(0xf5)]){_0x415a1e[_0x2eece6(0x87)](_0x46bf30);if(_0x46bf30=='botmanager')initializeSocketBotManager(_0x415a1e);else initializeSocketBot(_0x415a1e);initClient(_0x46bf30);}devices[_0x46a050][_0x2eece6(0xb4)]['token']&&devices[_0x46a050][_0x2eece6(0xb4)][_0x2eece6(0xd8)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x46a050),devices[_0x46a050][_0x2eece6(0xb4)]['token']&&devices[_0x46a050][_0x2eece6(0xb4)][_0x2eece6(0xd8)]==_0x2eece6(0x8e)&&setSessionTimeout(_0x2eece6(0xe0),_0x46a050),_0x415a1e[_0x2eece6(0xac)]('status',{'status':_0x37831d[_0x2eece6(0xf0)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x46a050][_0x2eece6(0xb4)],'externalip':devices[_0x46a050]['ip'],'publicKey':secure[_0x2eece6(0x164)],'validInstallation':validInstallation}),devices[_0x46a050]['access']['allow']==![]&&devices[_0x46a050][_0x2eece6(0xb4)][_0x2eece6(0xd8)]=='2FA\x20required'&&temporaryAccess2FA(_0x46a050,devices[_0x46a050]['ip']);}function setSessionTimeout(_0x531a54,_0x480809){const _0x57236c=_0x4e7f62;let _0x3d180a;if(_0x531a54==_0x57236c(0xe0))_0x3d180a=loginExpiry*0x3c*0x3e8;else _0x3d180a=devices[_0x480809][_0x57236c(0xaa)][_0x57236c(0x1bb)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x480809][_0x57236c(0xaa)][_0x57236c(0x98)]);if(devices[_0x480809][_0x57236c(0x86)])clearTimeout(devices[_0x480809][_0x57236c(0x86)]);devices[_0x480809]['pidExpireLogin']=setTimeout(()=>{const _0x30a640=_0x57236c;if(devices[_0x480809][_0x30a640(0x171)])clearTimeout(devices[_0x480809]['pidRefreshToken']);removeSocketListeners(_0x480809),addBlacklist(_0x480809),devices[_0x480809][_0x30a640(0xaa)]=null,devices[_0x480809][_0x30a640(0x125)]=null,devices[_0x480809][_0x30a640(0xb4)]['token']=null,devices[_0x480809][_0x30a640(0xb4)]=validateAccess(devices[_0x480809][_0x30a640(0xb4)][_0x30a640(0x18a)],_0x480809),!(devices[_0x480809][_0x30a640(0xb4)][_0x30a640(0xf5)]&&devices[_0x480809]['access'][_0x30a640(0xd8)]=='login\x20not\x20required')&&(_0x531a54==_0x30a640(0xe0)?io['to'](_0x480809)[_0x30a640(0xac)](_0x30a640(0x84),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x480809)[_0x30a640(0xac)](_0x30a640(0x84),{'access':{'allow':![],'reason':_0x30a640(0xce),'token':null}})),devices[_0x480809][_0x30a640(0xb4)][_0x30a640(0x18a)]=null;},_0x3d180a);}function setTokenRefresh(_0xe3ff17){const _0xcda75=_0x4e7f62;if(devices[_0xe3ff17][_0xcda75(0x171)])clearTimeout(devices[_0xe3ff17][_0xcda75(0x171)]);devices[_0xe3ff17][_0xcda75(0x171)]=setTimeout(()=>{const _0x53c184=_0xcda75;getClientsWithUuid(_0xe3ff17)[_0x53c184(0x177)]!=0x0?(devices[_0xe3ff17][_0x53c184(0xb4)]=refreshToken(_0xe3ff17),io['to'](_0xe3ff17)[_0x53c184(0xac)](_0x53c184(0x84),{'status':_0x53c184(0x17f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xe3ff17][_0x53c184(0xb4)],'externalip':devices[_0xe3ff17]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xe3ff17)):clearTimeout(devices[_0xe3ff17][_0x53c184(0x171)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4ac79f){const _0x382c9f=_0x4e7f62,_0x422b2a=getClient(_0x4ac79f['id'])[_0x382c9f(0x129)];_0x4ac79f[_0x382c9f(0xac)](_0x382c9f(0x14d),config),_0x4ac79f[_0x382c9f(0xac)](_0x382c9f(0x130),cleanSettings()),_0x4ac79f['on'](_0x382c9f(0x12c),_0x5340a6=>{const _0x2f385f=_0x382c9f;if(validateAccess(_0x5340a6,_0x422b2a)['allow'])addBot();else logging(_0x2f385f(0xf3));}),_0x4ac79f['on'](_0x382c9f(0x8f),(_0x364678,_0x1effd7)=>{const _0x3ea15e=_0x382c9f;if(validateAccess(_0x1effd7,_0x422b2a)['allow'])toggleBot(_0x364678[_0x3ea15e(0xb7)],_0x364678[_0x3ea15e(0x84)],_0x364678[_0x3ea15e(0xdb)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4ac79f['on'](_0x382c9f(0x131),(_0x3e9306,_0x4e74f3)=>{const _0x416ac4=_0x382c9f;if(validateAccess(_0x4e74f3,_0x422b2a)[_0x416ac4(0xf5)])deleteBot(_0x3e9306);else logging(_0x416ac4(0x1ad));}),_0x4ac79f['on'](_0x382c9f(0x167),(_0x5f39e3,_0x350d1f)=>{const _0x453039=_0x382c9f;if(validateAccess(_0x350d1f,_0x422b2a)[_0x453039(0xf5)])storeSettings(_0x5f39e3,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4ac79f['on'](_0x382c9f(0x7f),(_0x57bff7,_0x2a0584)=>{const _0x564a8f=_0x382c9f;if(validateAccess(_0x2a0584,_0x422b2a)['allow'])updateBB();else logging(_0x564a8f(0x107));}),_0x4ac79f['on'](_0x382c9f(0xe3),_0x13ce51=>{const _0x2a0439=_0x382c9f;if(validateAccess(_0x13ce51,_0x422b2a)[_0x2a0439(0xf5)]){if(devices[_0x422b2a][_0x2a0439(0x171)])clearTimeout(devices[_0x422b2a][_0x2a0439(0x171)]);if(devices[_0x422b2a][_0x2a0439(0x86)])clearTimeout(devices[_0x422b2a][_0x2a0439(0x86)]);removeSocketListeners(getClient(_0x4ac79f['id'])[_0x2a0439(0x129)]),addBlacklist(_0x422b2a),devices[_0x422b2a][_0x2a0439(0xaa)]=null,devices[_0x422b2a][_0x2a0439(0x125)]=null,devices[_0x422b2a][_0x2a0439(0xb4)]['token']=null,io['to'](getClient(_0x4ac79f['id'])['uuid'])['emit'](_0x2a0439(0x84),{'access':{'allow':![],'reason':_0x2a0439(0xa3),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x19ace8){const _0x48c824=_0x4e7f62,_0x55f325=getClient(_0x19ace8['id'])[_0x48c824(0x1b7)],_0x461c23=getClient(_0x19ace8['id'])[_0x48c824(0x129)];_0x19ace8['on'](_0x48c824(0x11f),(_0x317afb,_0x516a5c)=>{const _0x5c41c0=_0x48c824;if(validateAccess(_0x516a5c,_0x461c23)[_0x5c41c0(0xf5)]){if(pid[_0x55f325])pid[_0x55f325][_0x5c41c0(0xd4)]({'function':_0x5c41c0(0x154),'args':_0x317afb});}else logging(_0x5c41c0(0x9f));}),_0x19ace8['on'](_0x48c824(0x118),(_0xdabe61,_0x1e0555)=>{const _0x414250=_0x48c824;if(validateAccess(_0x1e0555,_0x461c23)['allow']){if(pid[_0x55f325])pid[_0x55f325][_0x414250(0xd4)]({'function':'deleteHistoryAlerts','args':_0xdabe61});}else logging(_0x414250(0x16c));}),_0x19ace8['on'](_0x48c824(0x124),(_0x3df74f,_0x52e9e1)=>{const _0x9639ab=_0x48c824;if(validateAccess(_0x52e9e1,_0x461c23)[_0x9639ab(0xf5)]){if(pid[_0x55f325])pid[_0x55f325][_0x9639ab(0xd4)]({'function':_0x9639ab(0x144),'args':_0x3df74f});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x19ace8['on'](_0x48c824(0x105),(_0x460e6e,_0x5441e1)=>{const _0x130bfc=_0x48c824;if(validateAccess(_0x5441e1,_0x461c23)[_0x130bfc(0xf5)]){if(pid[_0x55f325])pid[_0x55f325][_0x130bfc(0xd4)]({'function':_0x130bfc(0xdf),'args':_0x460e6e});}else logging(_0x130bfc(0xa7));}),_0x19ace8['on'](_0x48c824(0x9c),(_0x455383,_0x270f87)=>{const _0x2615ef=_0x48c824;if(validateAccess(_0x270f87,_0x461c23)['allow']){if(pid[_0x55f325])pid[_0x55f325][_0x2615ef(0xd4)]({'function':'storeHeadless','args':_0x455383});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x19ace8['on'](_0x48c824(0x112),_0x1940d9=>{const _0x28b9c5=_0x48c824;if(validateAccess(_0x1940d9,_0x461c23)[_0x28b9c5(0xf5)]){if(pid[_0x55f325])pid[_0x55f325]['send']({'function':_0x28b9c5(0x10b),'args':null});}else logging(_0x28b9c5(0x140));}),_0x19ace8['on'](_0x48c824(0x18c),(_0x33a894,_0x58806c)=>{const _0x29b1ef=_0x48c824;if(validateAccess(_0x58806c,_0x461c23)[_0x29b1ef(0xf5)]){if(pid[_0x55f325])pid[_0x55f325][_0x29b1ef(0xd4)]({'function':_0x29b1ef(0x13d),'args':_0x33a894});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x19ace8['on'](_0x48c824(0x9a),_0x3edfa3=>{const _0x444b5f=_0x48c824;if(validateAccess(_0x3edfa3,_0x461c23)['allow']){if(pid[_0x55f325])pid[_0x55f325][_0x444b5f(0xd4)]({'function':_0x444b5f(0x18e),'args':null});}else logging(_0x444b5f(0xbb));}),_0x19ace8['on'](_0x48c824(0xe3),_0x9524e5=>{const _0x9afdfe=_0x48c824;if(validateAccess(_0x9524e5,_0x461c23)[_0x9afdfe(0xf5)]){if(devices[_0x461c23][_0x9afdfe(0x171)])clearTimeout(devices[_0x461c23][_0x9afdfe(0x171)]);if(devices[_0x461c23][_0x9afdfe(0x86)])clearTimeout(devices[_0x461c23]['pidExpireLogin']);removeSocketListeners(getClient(_0x19ace8['id'])[_0x9afdfe(0x129)]),addBlacklist(_0x461c23),devices[_0x461c23]['telegramIpApproval']=null,devices[_0x461c23][_0x9afdfe(0x125)]=null,devices[_0x461c23][_0x9afdfe(0xb4)][_0x9afdfe(0x18a)]=null,io['to'](getClient(_0x19ace8['id'])['uuid'])[_0x9afdfe(0xac)](_0x9afdfe(0x84),{'access':{'allow':![],'reason':_0x9afdfe(0xa3),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x371d0d){getClientsWithUuid(_0x371d0d)['forEach'](_0x4fd155=>{getSocket(_0x4fd155['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4a8331=_0x4e7f62;let _0xb0695b=settings;return settings['telegramToken']&&settings[_0x4a8331(0x198)]!=''&&(_0xb0695b={..._0xb0695b,'telegramToken':_0x4a8331(0x1aa)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0xb0695b={..._0xb0695b,'bbPassword':'************'}),_0xb0695b;}function updateBB(){const _0x29034b=_0x4e7f62;installingUpdate=!![],config['forEach'](_0x2cf3dd=>{const _0xf247cc=_0x4ba0;restartBot(_0x2cf3dd[_0xf247cc(0xb7)]);}),process[_0x29034b(0xd4)]({'update':!![]},_0x5c7e3e=>{});}function startBot(_0x47799c,_0x12cc72,_0x47b080){const _0x44adfb=_0x4e7f62;let _0x3cccd7=![];const _0x51a421=_0x47799c[0x0];_0x12cc72={..._0x12cc72,'stdio':[_0x44adfb(0x186),'inherit',_0x44adfb(0x186),_0x44adfb(0x109)]},pid[_0x51a421]=childProcess[_0x44adfb(0xbf)](botfile,_0x47799c,_0x12cc72),pid[_0x51a421]['on']('message',_0x169517=>{const _0x55c298=_0x44adfb;switch(Object['keys'](_0x169517)[0x0]){case _0x55c298(0xfa):updateBotName(_0x51a421,_0x169517[_0x55c298(0xfa)]);break;case _0x55c298(0x84):updateStatus(_0x51a421,_0x169517[_0x55c298(0x84)]);break;case _0x55c298(0xdb):updateLive(_0x51a421,_0x169517[_0x55c298(0xdb)]);break;case _0x55c298(0x97):updateLive(_0x51a421,_0x169517['started']),io['to'](_0x51a421)[_0x55c298(0xac)](_0x55c298(0x84),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x55c298(0x11d):_0x169517[_0x55c298(0x11d)]==_0x55c298(0x158)&&restartBot(_0x51a421);_0x169517[_0x55c298(0x11d)]==_0x55c298(0x132)&&toggleBot(_0x51a421,_0x55c298(0xe8),_0x55c298(0x15a));break;case _0x55c298(0x17b):sendTelegram(_0x51a421,_0x169517[_0x55c298(0x17b)]);break;case _0x55c298(0xb9):io['to'](_0x51a421)[_0x55c298(0xac)](_0x169517['function'],_0x169517[_0x55c298(0xe5)]);break;}}),pid[_0x51a421]['on'](_0x44adfb(0x15e),function(_0x440224){if(_0x3cccd7)return;_0x3cccd7=!![],_0x47b080(_0x440224);}),pid[_0x51a421]['on'](_0x44adfb(0x153),function(_0x4a609b){const _0x1f9c63=_0x44adfb;if(installingUpdate)return;if(_0x3cccd7)return;_0x3cccd7=!![],_0x47b080(null);const _0x514c19=dbConfig[_0x1f9c63(0x150)](_0x1f9c63(0x14d))[_0x1f9c63(0x188)]({'botID':_0x51a421})['value']();_0x514c19&&(_0x514c19[_0x1f9c63(0x84)]==_0x1f9c63(0x13c)||_0x514c19['status']==_0x1f9c63(0xa0))&&(updateLive(_0x51a421,'stopped'),logging('restarting\x20Bot\x20'+_0x51a421),startBot([_0x51a421,userID],{'cwd':bbpath},function(_0x5c1f43){if(_0x5c1f43)logging(_0x5c1f43);}));});}function stopBot(_0x3efe12){const _0x380527=_0x4e7f62;getClientsWithBotID(_0x3efe12)[_0x380527(0x1ae)](_0x581a9c=>{const _0xa88de6=_0x380527;getSocket(_0x581a9c['id'])[_0xa88de6(0xe1)](!![]),removeClient(_0x581a9c['id']);});if(pid[_0x3efe12])pid[_0x3efe12]['kill']();}function restartBot(_0x4d5b4c){const _0x438827=_0x4e7f62;if(pid[_0x4d5b4c])pid[_0x4d5b4c][_0x438827(0x132)]();}function addBot(){const _0x4130e6=_0x4e7f62;let _0x54fcc6;for(let _0x2bdf7d=0x1;_0x2bdf7d<0x3e9;_0x2bdf7d++){_0x54fcc6=_0x2bdf7d[_0x4130e6(0x96)]()[_0x4130e6(0x15c)](0x3,'0');let _0x22de80=config[_0x4130e6(0x188)](_0x3230f0=>_0x3230f0[_0x4130e6(0xb7)]==_0x54fcc6);if(!_0x22de80)break;}if(_0x54fcc6==='1000'){logging(_0x4130e6(0xc3));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x54fcc6),dbConfig[_0x4130e6(0x150)](_0x4130e6(0x14d))[_0x4130e6(0xb6)]({'botID':_0x54fcc6,'botname':'Bot\x20'+_0x54fcc6,'status':_0x4130e6(0xa0),'live':''})['write'](),startBot([_0x54fcc6,userID],{'cwd':bbpath},function(_0x2bed83){if(_0x2bed83)logging(_0x2bed83);}),config=getConfiguration(),io['to']('botmanager')[_0x4130e6(0xac)](_0x4130e6(0x14d),config);}function _0x2c59(){const _0x2a74eb=['Bot\x20Mgr\x20>\x20','reason','apiKey','\x20only\x0a','live','deleted\x20Bot\x20','Login\x20rejected','713005gEeiVJ','storeConfiguration','login','disconnect','listen','logout','show','args','store','SIGINT','disabled','build2','search','settings.','message','Access\x20enabled\x20for\x20','reject','3000','server','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20add\x20bot','temporaryAccessAllowed','allow','conn','slice','bot-','initclient','botname','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','filter','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','assign','existsSync','Error:\x20Invalid\x20argument\x20','use','isDirectory','/off\x20-\x20stop\x20bot(s)\x0a','store-configuration','index.html','Unauthorized\x20attempt\x20to\x20update\x20settings','Temporary\x20access\x20rejected','ipc','hybrid-crypto-js','getStartingBalances','invalid\x20credentials','generateKeyPairAsync','Crypt','30\x20min','remove','from','get-starting-balances','data','cloneDeep','telegramEnabled','disabled\x20Bot\x20','randomFillSync','delete-alerts','bcryptjs','15381WdYZED','404\x20Not\x20Found','socket.io','stop','readdirSync','get-logs','/:bot/performance','analytics','Bot\x20','path','get-portfolio','telegram2FaApproval','verify','secret','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','uuid','decrypt','Ok,\x20will\x20send\x20alert\x20notifications\x20only','add-bot','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','clients','map','settings','delete-bot','kill','-events.json','privateKey','\x20|\x20','Unauthorized\x20login\x20attempt\x20(timeout)','then','Invalid\x20authentication\x20token\x20(2)','Password\x20reset\x20rejected','@analytics/google-analytics','referer','enabled','placeOrder','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bbPassword','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','exp','getUTCHours','Invalid\x20Telegram\x20token','getPortfolio','ipv6','</b>\x20?','Ok,\x20will\x20send\x20order\x20notifications\x20only','auth','new-disabled','333120WfHfaC','sockets','includes','bots','Allow\x20login\x20from\x20IP\x20address\x20<b>','orders','get','callback_query','createServer','exit','emitHistory','bb-settings.json','enabled\x20Bot\x20','/:bot/portfolio','restart','2FA\x20login\x20rejected','stopped','bb-secure.json','padStart','randomBytes','error','all','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','temporary\x20token\x20generated','timeshift','/:bot/support','publicKey','bb/','Token\x20blacklisted','store-settings','express','stopPolling','error\x20while\x20deleting\x20config\x20files:\x20','removeListener','Unauthorized\x20attempt\x20to\x20delete\x20alerts','encryptedUuid','telegramUsername','Orders','-config.json','pidRefreshToken',':\x20Bot\x20Mgr\x20>\x20','backup/','starting\x20bot\x20|\x20Bot\x20','copyFileSync','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','length','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','blacklist','test','telegram','handshake','Notifications\x20disabled\x0a','showname','connected','sortBy','node-telegram-bot-api','static','mkdirSync','yes','Notifications\x20enabled\x0a','inherit','headers','find','::ffff:127.0.0.1','token','version','place-order','sendMessage','cancelLoading','No\x20bots\x20running\x20right\x20now','Balance\x20Bot','7309134UaZYZA','2FA\x20required','botmanager','username','clientip','entries','telegramEvents','telegramToken','You\x20can\x20use\x20the\x20following\x20commands:\x0a','apply','isValid','getDate','/status\x20-\x20show\x20bot(s)\x20status\x0a','constructor','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','config/','secure','date-fns','ipaddr.js','connection','\x20/\x20','Invalid\x20IP\x20address','version.json','getSeconds','jsonwebtoken','************','answerCallbackQuery','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20delete\x20bot','forEach','RSA-OAEP','/:bot/coins','Invalid\x20authentication\x20token\x20(1)','hashSync','reload','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Login\x20accepted','-results.json','bot','host','catch','/:bot/history','expiry','/on\x20-\x20start\x20bot(s)\x0a','isIPv4MappedAddress','login\x20not\x20required','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','40444eijymf','crypto','User\x20has\x20been\x20validated','(((.+)+)+)+$','whitelistEnabled','write','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','event','value','update-bb','sendFile','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','user','parse','status','/enable\x20-\x20enable\x20notifications\x0a','pidExpireLogin','join','Notifications\x20enabled','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','add','temporary\x20access\x20not\x20allowed','running','5\x20min','2FA\x20login\x20token\x20generated','update-bot','hasOwnProperty','polling_error','All\x20bots','127.0.0.1','env','login\x20token\x20generated','toString','started','timestamp','alerts','cancel-loading','bbUsername','store-headless','No\x20authentication\x20token','http','Unauthorized\x20attempt\x20to\x20get\x20logs','new','idling\x20bot\x20\x20\x20|\x20Bot\x20','getTime','logged\x20out','login\x20token\x20valid','lowdb/adapters/FileSync','defaults','Unauthorized\x20attempt\x20to\x20store\x20configuration','log','Alerts','telegramIpApproval','getMinutes','emit','unlinkSync','match','split','reset-password','notification','telegramChatId','/:bot/configuration','access','bot.js','push','botID','<b>Balance\x20Bot\x20status:</b>\x0a','function','whitelist','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','4632670aqrnlv','name','HTML','fork','kind','6648GyIvBy','type','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getMonth','\x20>\x20','login\x20required','36576FgMlWP','build','order','NTBA_FIX_319','-performance.json','onText','set','temporary\x20access\x20timeout','getHours','argv','accept','f2aRequired','default','send','252yDYbpy','chat'];_0x2c59=function(){return _0x2a74eb;};return _0x2c59();}function deleteBot(_0x5b3371){const _0x1edbbf=_0x4e7f62;getClientsWithBotID(_0x5b3371)['forEach'](_0x29f9e9=>{getSocket(_0x29f9e9['id'])['disconnect'](!![]),removeClient(_0x29f9e9['id']);}),dbConfig[_0x1edbbf(0x150)]('bots')[_0x1edbbf(0x110)]({'botID':_0x5b3371})[_0x1edbbf(0x7b)](),logging(_0x1edbbf(0xdc)+_0x5b3371),stopBot(_0x5b3371);try{fs[_0x1edbbf(0xad)](path[_0x1edbbf(0x87)](configpath,_0x1edbbf(0xf8)+_0x5b3371+_0x1edbbf(0x170))),fs[_0x1edbbf(0xad)](path['join'](configpath,_0x1edbbf(0xf8)+_0x5b3371+_0x1edbbf(0x133))),fs['unlinkSync'](path[_0x1edbbf(0x87)](configpath,'bot-'+_0x5b3371+_0x1edbbf(0xcb))),fs[_0x1edbbf(0xad)](path[_0x1edbbf(0x87)](configpath,_0x1edbbf(0xf8)+_0x5b3371+_0x1edbbf(0x1b6)));}catch(_0x4ff099){if(_0x4ff099)logging(_0x1edbbf(0x16a),_0x4ff099);}config=getConfiguration(),io['to'](_0x1edbbf(0x193))['emit']('bots',config);}function toggleBot(_0x3b2e8c,_0x1537d1,_0x279827){const _0x324236=_0x4e7f62;dbConfig[_0x324236(0x150)](_0x324236(0x14d))[_0x324236(0x188)]({'botID':_0x3b2e8c})[_0x324236(0xff)]({'status':_0x1537d1})['assign']({'live':_0x279827})[_0x324236(0x7b)]();if(_0x1537d1==_0x324236(0x13c)||_0x1537d1=='new')logging(_0x324236(0x156)+_0x3b2e8c),startBot([_0x3b2e8c,userID],{'cwd':bbpath},function(_0x1c3c13){if(_0x1c3c13)logging(_0x1c3c13);});else(_0x1537d1==_0x324236(0xe8)||_0x1537d1==_0x324236(0x149))&&(logging(_0x324236(0x116)+_0x3b2e8c),stopBot(_0x3b2e8c));config=getConfiguration(),io['to'](_0x324236(0x193))[_0x324236(0xac)](_0x324236(0x14d),config);}function toggleStatus(_0x379520){const _0x1af911=_0x4e7f62;let _0x3b6b1e=dbConfig['get'](_0x1af911(0x14d))[_0x1af911(0x188)]({'botID':_0x379520})[_0x1af911(0x7e)](),_0x35b1d9;if(_0x3b6b1e[_0x1af911(0x84)]==='enabled')_0x35b1d9='disabled';else{if(_0x3b6b1e[_0x1af911(0x84)]===_0x1af911(0xa0))_0x35b1d9=_0x1af911(0x149);else{if(_0x3b6b1e[_0x1af911(0x84)]===_0x1af911(0x149))_0x35b1d9=_0x1af911(0xa0);else{if(_0x3b6b1e['status']===_0x1af911(0xe8))_0x35b1d9=_0x1af911(0x13c);}}}return _0x35b1d9;}function updateStatus(_0xdf3276,_0x30b737){const _0x151ce1=_0x4e7f62;dbConfig['get']('bots')['find']({'botID':_0xdf3276})[_0x151ce1(0xff)]({'status':_0x30b737})[_0x151ce1(0x7b)](),config=getConfiguration(),io['to'](_0x151ce1(0x193))['emit']('bots',config);}function updateLive(_0x1b75e9,_0x506610){const _0x5ee4f9=_0x4e7f62;dbConfig[_0x5ee4f9(0x150)](_0x5ee4f9(0x14d))['find']({'botID':_0x1b75e9})['assign']({'live':_0x506610})[_0x5ee4f9(0x7b)](),config=getConfiguration(),io['to']('botmanager')[_0x5ee4f9(0xac)](_0x5ee4f9(0x14d),config);}function updateBotName(_0x79122d,_0x42703d){const _0x1c99ec=_0x4e7f62;dbConfig[_0x1c99ec(0x150)]('bots')['find']({'botID':_0x79122d})[_0x1c99ec(0xff)]({'botname':_0x42703d})['write'](),config=getConfiguration(),io['to'](_0x1c99ec(0x193))[_0x1c99ec(0xac)](_0x1c99ec(0x14d),config);}function telegramError(_0x4c7c5e){console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x571c2c){const _0x5cf958=_0x4e7f62;if(_0x571c2c[_0x5cf958(0x111)][_0x5cf958(0x194)]!=settings[_0x5cf958(0x16e)]&&'@'+_0x571c2c['from']['username']!=settings[_0x5cf958(0x16e)])return tgBot[_0x5cf958(0x18d)](_0x571c2c[_0x5cf958(0xd6)]['id'],_0x5cf958(0x7c),{'parse_mode':'HTML'})[_0x5cf958(0x1b9)](_0xad5b08=>{telegramError(_0xad5b08);}),![];return!![];}async function initTelegram(){const _0x27aeb6=_0x4e7f62;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x4537ae=_0x27aeb6(0x199);_0x4537ae+='\x0a',_0x4537ae+=_0x27aeb6(0x85),_0x4537ae+='/disable\x20-\x20disable\x20notifications\x0a',_0x4537ae+=_0x27aeb6(0x13e),_0x4537ae+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x4537ae+=_0x27aeb6(0x1bc),_0x4537ae+=_0x27aeb6(0x104),_0x4537ae+=_0x27aeb6(0x19d),_0x4537ae+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x147377=_0x27aeb6(0x81);_0x147377+='\x0a',_0x147377+=_0x4537ae,tgBot[_0x27aeb6(0xcc)](/\/start/,_0x294ad2=>{const _0x27623b=_0x27aeb6;if(!validateTelegram(_0x294ad2))return;if(settings[_0x27623b(0xb2)]!=_0x294ad2[_0x27623b(0xd6)]['id'])updateSetting(_0x27623b(0xb2),_0x294ad2[_0x27623b(0xd6)]['id']);updateSetting(_0x27623b(0x115),!![]),tgBot[_0x27623b(0x18d)](_0x294ad2['chat']['id'],_0x147377)['catch'](_0x58c446=>{telegramError(_0x58c446);});}),tgBot[_0x27aeb6(0xcc)](/\/enable/,_0x3325f=>{const _0x34e456=_0x27aeb6;if(!validateTelegram(_0x3325f))return;if(settings[_0x34e456(0xb2)]!=_0x3325f[_0x34e456(0xd6)]['id'])updateSetting(_0x34e456(0xb2),_0x3325f[_0x34e456(0xd6)]['id']);updateSetting(_0x34e456(0x115),!![]),tgBot[_0x34e456(0x18d)](_0x3325f[_0x34e456(0xd6)]['id'],_0x34e456(0x88))['catch'](_0x13d305=>{telegramError(_0x13d305);});}),tgBot['onText'](/\/config/,async _0x3506d8=>{const _0x1155aa=_0x27aeb6;if(!validateTelegram(_0x3506d8))return;tgBot['removeListener'](_0x1155aa(0x151)),tgBot['sendMessage'](_0x3506d8[_0x1155aa(0xd6)]['id'],_0x1155aa(0x1b4),{'reply_markup':{'inline_keyboard':[[{'text':_0x1155aa(0x16f),'callback_data':_0x1155aa(0x14f)},{'text':_0x1155aa(0xa9),'callback_data':_0x1155aa(0x99)},{'text':'All','callback_data':'all'}]]}})['catch'](_0x3bab8c=>{telegramError(_0x3bab8c);}),tgBot['on'](_0x1155aa(0x151),async _0x5e2dc1=>{const _0x47f7d6=_0x1155aa,_0x4058ae=_0x5e2dc1[_0x47f7d6(0x113)],_0x5c805b=_0x5e2dc1[_0x47f7d6(0xec)];tgBot[_0x47f7d6(0x1ab)](_0x5e2dc1['id'])[_0x47f7d6(0x137)](async()=>{const _0x517a21=_0x47f7d6;_0x4058ae==_0x517a21(0x14f)&&(updateSetting('telegramEvents',_0x517a21(0x14f)),updateSetting(_0x517a21(0x115),!![]),await tgBot['sendMessage'](_0x5c805b[_0x517a21(0xd6)]['id'],_0x517a21(0x147))[_0x517a21(0x1b9)](_0x3d1b12=>{telegramError(_0x3d1b12);}));_0x4058ae==_0x517a21(0x99)&&(updateSetting(_0x517a21(0x197),_0x517a21(0x99)),updateSetting(_0x517a21(0x115),!![]),await tgBot['sendMessage'](_0x5c805b[_0x517a21(0xd6)]['id'],_0x517a21(0x12b))['catch'](_0x377115=>{telegramError(_0x377115);}));_0x4058ae=='all'&&(updateSetting(_0x517a21(0x197),_0x517a21(0x15f)),updateSetting(_0x517a21(0x115),!![]),await tgBot[_0x517a21(0x18d)](_0x5c805b[_0x517a21(0xd6)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x517a21(0x1b9)](_0x163c66=>{telegramError(_0x163c66);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x5c805b['chat']['id'],_0x517a21(0x89))[_0x517a21(0x1b9)](_0x52a627=>{telegramError(_0x52a627);});}),tgBot['removeListener'](_0x47f7d6(0x151));});}),tgBot[_0x27aeb6(0xcc)](/\/status/,_0x7ad7b3=>{const _0x4c5c75=_0x27aeb6;if(!validateTelegram(_0x7ad7b3))return;let _0x36ca28=_0x4c5c75(0xb8);config[_0x4c5c75(0x1ae)](_0x5bba76=>{const _0x367ee9=_0x4c5c75;_0x36ca28+=_0x367ee9(0x122)+_0x5bba76['botID']+'\x20|\x20'+_0x5bba76[_0x367ee9(0xfa)]+':\x20'+_0x5bba76[_0x367ee9(0x84)]+_0x367ee9(0x1a5)+_0x5bba76[_0x367ee9(0xdb)]+'\x0a';}),_0x36ca28+='\x0a',_0x36ca28+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x36ca28+=!settings[_0x4c5c75(0x115)]?_0x4c5c75(0x17d):_0x4c5c75(0x185),_0x36ca28+=settings[_0x4c5c75(0x115)]?settings['telegramEvents']==_0x4c5c75(0x15f)?_0x4c5c75(0x128):'Notifications\x20types:\x20'+settings[_0x4c5c75(0x197)]+_0x4c5c75(0xda):'',tgBot[_0x4c5c75(0x18d)](_0x7ad7b3[_0x4c5c75(0xd6)]['id'],_0x36ca28,{'parse_mode':_0x4c5c75(0xbe)})[_0x4c5c75(0x1b9)](_0x2a0bfc=>{telegramError(_0x2a0bfc);});}),tgBot[_0x27aeb6(0xcc)](/\/restart/,_0x4f2061=>{const _0x4f4881=_0x27aeb6;if(!validateTelegram(_0x4f2061))return;tgBot[_0x4f4881(0x16b)](_0x4f4881(0x151));const _0xf81aa4=getEnabledBots();if(_0xf81aa4[_0x4f4881(0x177)]==0x0)tgBot['sendMessage'](_0x4f2061[_0x4f4881(0xd6)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x4f4881(0x1b9)](_0x42647e=>{telegramError(_0x42647e);});else{if(_0xf81aa4[_0x4f4881(0x177)]>0x1)_0xf81aa4[_0x4f4881(0xb6)]({'botID':_0x4f4881(0x15f)});let _0x5c5e5a=[],_0x19a831=[];const _0x18de06=_0xf81aa4[_0x4f4881(0x177)]%0x4==0x0||_0xf81aa4[_0x4f4881(0x177)]%0x4==0x3||_0xf81aa4[_0x4f4881(0x177)]%0x3==0x1?0x4:0x3;let _0x1e9a82=0x0;_0xf81aa4[_0x4f4881(0x1ae)]((_0x42af87,_0x4ca9d2)=>{const _0x4b03b5=_0x4f4881;if(_0x4ca9d2%_0x18de06==0x0)_0x19a831=[];_0x19a831[_0x4b03b5(0xb6)]({'text':_0x42af87['botID']==_0x4b03b5(0x15f)?'All\x20bots':_0x4b03b5(0x122)+_0x42af87[_0x4b03b5(0xb7)],'callback_data':_0x42af87[_0x4b03b5(0xb7)]}),_0x4ca9d2%_0x18de06==0x0&&(_0x5c5e5a[_0x1e9a82]=_0x19a831,_0x1e9a82++);}),tgBot[_0x4f4881(0x18d)](_0x4f2061[_0x4f4881(0xd6)]['id'],_0x4f4881(0xfe),{'reply_markup':{'inline_keyboard':_0x5c5e5a}})[_0x4f4881(0x1b9)](_0x352d4e=>{telegramError(_0x352d4e);}),tgBot['on'](_0x4f4881(0x151),async _0x12f819=>{const _0x1f185d=_0x4f4881,_0x4b535c=_0x12f819[_0x1f185d(0x113)],_0x85ceeb=_0x12f819[_0x1f185d(0xec)];tgBot[_0x1f185d(0x1ab)](_0x12f819['id'])['then'](async()=>{const _0x32a811=_0x1f185d;if(_0x4b535c==_0x32a811(0x15f)){if(settings[_0x32a811(0x197)]==_0x32a811(0x14f))tgBot[_0x32a811(0x18d)](_0x85ceeb[_0x32a811(0xd6)]['id'],_0x32a811(0xf1))[_0x32a811(0x1b9)](_0x209a6e=>{telegramError(_0x209a6e);});config[_0x32a811(0x1ae)](_0x3b506d=>{const _0x2087c8=_0x32a811;restartBot(_0x3b506d[_0x2087c8(0xb7)]);});}else{if(settings['telegramEvents']==_0x32a811(0x14f))tgBot[_0x32a811(0x18d)](_0x85ceeb[_0x32a811(0xd6)]['id'],_0x32a811(0x176)+_0x4b535c)[_0x32a811(0x1b9)](_0x9e4dab=>{telegramError(_0x9e4dab);});restartBot(_0x4b535c);}}),tgBot[_0x1f185d(0x16b)]('callback_query');});}}),tgBot[_0x27aeb6(0xcc)](/\/on/,_0x157c45=>{const _0x34bc2a=_0x27aeb6;if(!validateTelegram(_0x157c45))return;tgBot[_0x34bc2a(0x16b)](_0x34bc2a(0x151));const _0x59c3e2=getDisabledBots();if(_0x59c3e2['length']==0x0)tgBot['sendMessage'](_0x157c45['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0x34bc2a(0x1b9)](_0x48a358=>{telegramError(_0x48a358);});else{if(_0x59c3e2[_0x34bc2a(0x177)]>0x1)_0x59c3e2['push']({'botID':_0x34bc2a(0x15f)});let _0x4e860c=[],_0x4df2e2=[];const _0x37d8b6=_0x59c3e2['length']%0x4==0x0||_0x59c3e2[_0x34bc2a(0x177)]%0x4==0x3||_0x59c3e2[_0x34bc2a(0x177)]%0x3==0x1?0x4:0x3;let _0x27c8ee=0x0;_0x59c3e2[_0x34bc2a(0x1ae)]((_0x506704,_0x1f3a59)=>{const _0xf770a5=_0x34bc2a;if(_0x1f3a59%_0x37d8b6==0x0)_0x4df2e2=[];_0x4df2e2[_0xf770a5(0xb6)]({'text':_0x506704[_0xf770a5(0xb7)]==_0xf770a5(0x15f)?_0xf770a5(0x92):_0xf770a5(0x122)+_0x506704[_0xf770a5(0xb7)],'callback_data':_0x506704[_0xf770a5(0xb7)]}),_0x1f3a59%_0x37d8b6==0x0&&(_0x4e860c[_0x27c8ee]=_0x4df2e2,_0x27c8ee++);}),tgBot['sendMessage'](_0x157c45[_0x34bc2a(0xd6)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x4e860c}})[_0x34bc2a(0x1b9)](_0xae6b16=>{telegramError(_0xae6b16);}),tgBot['on'](_0x34bc2a(0x151),async _0x5118be=>{const _0x1d8f94=_0x34bc2a,_0x598f71=_0x5118be[_0x1d8f94(0x113)],_0x305391=_0x5118be[_0x1d8f94(0xec)];tgBot[_0x1d8f94(0x1ab)](_0x5118be['id'])[_0x1d8f94(0x137)](async()=>{const _0x34fbc0=_0x1d8f94;if(_0x598f71=='all'){if(settings[_0x34fbc0(0x197)]==_0x34fbc0(0x14f))tgBot[_0x34fbc0(0x18d)](_0x305391['chat']['id'],_0x34fbc0(0xfb))[_0x34fbc0(0x1b9)](_0x43f3a3=>{telegramError(_0x43f3a3);});_0x59c3e2[_0x34fbc0(0x1ae)](_0x5eb283=>{const _0x2c9ff5=_0x34fbc0;if(_0x5eb283[_0x2c9ff5(0xb7)]!=_0x2c9ff5(0x15f))toggleBot(_0x5eb283[_0x2c9ff5(0xb7)],toggleStatus(_0x5eb283[_0x2c9ff5(0xb7)]),'stopped');});}else{if(settings[_0x34fbc0(0x197)]==_0x34fbc0(0x14f))tgBot['sendMessage'](_0x305391['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x598f71)[_0x34fbc0(0x1b9)](_0x74fe8a=>{telegramError(_0x74fe8a);});toggleBot(_0x598f71,toggleStatus(_0x598f71),_0x34fbc0(0x15a));}}),tgBot['removeListener'](_0x1d8f94(0x151));});}}),tgBot[_0x27aeb6(0xcc)](/\/off/,_0x4b8eeb=>{const _0x16d061=_0x27aeb6;if(!validateTelegram(_0x4b8eeb))return;tgBot['removeListener']('callback_query');const _0x3427a5=getEnabledBots();if(_0x3427a5[_0x16d061(0x177)]==0x0)tgBot[_0x16d061(0x18d)](_0x4b8eeb[_0x16d061(0xd6)]['id'],_0x16d061(0x18f))['catch'](_0xc7a3ef=>{telegramError(_0xc7a3ef);});else{if(_0x3427a5[_0x16d061(0x177)]>0x1)_0x3427a5[_0x16d061(0xb6)]({'botID':'all'});let _0x50c3f9=[],_0x59b043=[];const _0x3afa59=_0x3427a5[_0x16d061(0x177)]%0x4==0x0||_0x3427a5['length']%0x4==0x3||_0x3427a5[_0x16d061(0x177)]%0x3==0x1?0x4:0x3;let _0x4e73c3=0x0;_0x3427a5[_0x16d061(0x1ae)]((_0x28c512,_0x2c607b)=>{const _0x2f2caa=_0x16d061;if(_0x2c607b%_0x3afa59==0x0)_0x59b043=[];_0x59b043['push']({'text':_0x28c512[_0x2f2caa(0xb7)]=='all'?'All\x20bots':_0x2f2caa(0x122)+_0x28c512[_0x2f2caa(0xb7)],'callback_data':_0x28c512[_0x2f2caa(0xb7)]}),_0x2c607b%_0x3afa59==0x0&&(_0x50c3f9[_0x4e73c3]=_0x59b043,_0x4e73c3++);}),tgBot[_0x16d061(0x18d)](_0x4b8eeb['chat']['id'],_0x16d061(0x19f),{'reply_markup':{'inline_keyboard':_0x50c3f9}})[_0x16d061(0x1b9)](_0x3c0ef5=>{telegramError(_0x3c0ef5);}),tgBot['on']('callback_query',async _0x2ed6ee=>{const _0x482218=_0x16d061,_0x2f14e6=_0x2ed6ee[_0x482218(0x113)],_0xbb0a4d=_0x2ed6ee[_0x482218(0xec)];tgBot[_0x482218(0x1ab)](_0x2ed6ee['id'])[_0x482218(0x137)](async()=>{const _0x564021=_0x482218;if(_0x2f14e6==_0x564021(0x15f)){if(settings['telegramEvents']==_0x564021(0x14f))tgBot[_0x564021(0x18d)](_0xbb0a4d[_0x564021(0xd6)]['id'],_0x564021(0x178))[_0x564021(0x1b9)](_0x1977b3=>{telegramError(_0x1977b3);});_0x3427a5[_0x564021(0x1ae)](_0x5a2a5f=>{const _0xef0b0e=_0x564021;if(_0x5a2a5f['botID']!='all')toggleBot(_0x5a2a5f['botID'],toggleStatus(_0x5a2a5f[_0xef0b0e(0xb7)]),_0xef0b0e(0x15a));});}else{if(settings['telegramEvents']=='orders')tgBot['sendMessage'](_0xbb0a4d[_0x564021(0xd6)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2f14e6)[_0x564021(0x1b9)](_0x2caea4=>{telegramError(_0x2caea4);});toggleBot(_0x2f14e6,toggleStatus(_0x2f14e6),_0x564021(0x15a));}}),tgBot[_0x482218(0x16b)](_0x482218(0x151));});}}),tgBot[_0x27aeb6(0xcc)](/\/disable/,_0x24ddbe=>{const _0x1f59f3=_0x27aeb6;if(!validateTelegram(_0x24ddbe))return;tgBot[_0x1f59f3(0x18d)](_0x24ddbe[_0x1f59f3(0xd6)]['id'],'Notifications\x20disabled')[_0x1f59f3(0x1b9)](_0x262a0f=>{telegramError(_0x262a0f);}),updateSetting(_0x1f59f3(0x115),![]);}),tgBot[_0x27aeb6(0xcc)](/\/help/,_0x10d924=>{const _0x1b1d8e=_0x27aeb6;if(!validateTelegram(_0x10d924))return;tgBot[_0x1b1d8e(0x18d)](_0x10d924[_0x1b1d8e(0xd6)]['id'],_0x4537ae)[_0x1b1d8e(0x1b9)](_0x4c1268=>{telegramError(_0x4c1268);});}),tgBot['on'](_0x27aeb6(0x91),_0x14d9a0=>{const _0x4bc59b=_0x27aeb6;_0x14d9a0[_0x4bc59b(0x96)]()[_0x4bc59b(0x14c)](_0x4bc59b(0x11b))&&(logging(_0x4bc59b(0x143)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x4bc59b(0x193))[_0x4bc59b(0xac)](_0x4bc59b(0xb1),_0x4bc59b(0x143)));}),process['once'](_0x27aeb6(0xe7),()=>{const _0x5062a8=_0x27aeb6;if(tgBot)tgBot[_0x5062a8(0x169)]();process[_0x5062a8(0x153)](0x1);}),process['once']('SIGTERM',()=>{const _0x4a0c3b=_0x27aeb6;if(tgBot)tgBot['stopPolling']();process[_0x4a0c3b(0x153)](0x1);});}}function disableTelegram(){const _0x2ccc8d=_0x4e7f62;tgBot&&(tgBot[_0x2ccc8d(0x169)](),tgBot=null);}function sendTelegram(_0x41bd2b,_0x1bfb84){const _0x32d287=_0x4e7f62;if(settings[_0x32d287(0x115)]){if(settings[_0x32d287(0x197)]=='all'||(_0x1bfb84['type']==_0x32d287(0x15e)||_0x1bfb84[_0x32d287(0xc2)]=='success')&&settings[_0x32d287(0x197)]==_0x32d287(0x99)||_0x1bfb84[_0x32d287(0xc2)]==_0x32d287(0xc9)&&settings[_0x32d287(0x197)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x1bfb84[_0x32d287(0x17e)])tgBot[_0x32d287(0x18d)](settings['telegramChatId'],_0x1bfb84[_0x32d287(0xfa)]+_0x32d287(0xc5)+_0x1bfb84['event'])[_0x32d287(0x1b9)](_0x5249f9=>{telegramError(_0x5249f9);});else tgBot[_0x32d287(0x18d)](settings[_0x32d287(0xb2)],'Bot\x20'+_0x41bd2b+'\x20>\x20'+_0x1bfb84[_0x32d287(0x7d)])[_0x32d287(0x1b9)](_0x2fd619=>{telegramError(_0x2fd619);});}}}}function getDeviceWithIp(_0x3037b7){const _0x299b06=_0x4e7f62;return devices[_0x299b06(0x188)](_0x411fb8=>_0x411fb8['ip']===_0x3037b7);}function temporaryAccess2FA(_0x230375,_0x7a0b02){const _0x2c28f5=_0x4e7f62;let _0x1ffc77=new Date(),_0x337bb6=![];if(lastIpApproval){if(_0x1ffc77-lastIpApproval<0x1388)_0x337bb6=!![];}lastIpApproval=new Date();if(_0x337bb6)return;tgBot&&settings[_0x2c28f5(0xb2)]&&(tgBot[_0x2c28f5(0x16b)](_0x2c28f5(0x151)),tgBot[_0x2c28f5(0x18d)](settings[_0x2c28f5(0xb2)],_0x2c28f5(0x160)+normalizeIP(_0x7a0b02)[_0x2c28f5(0xe4)]+_0x2c28f5(0x146),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2c28f5(0x8d),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2c28f5(0x10f),'callback_data':'30'},{'text':'reject','callback_data':_0x2c28f5(0xee)}]]}})['catch'](_0x5250e9=>{telegramError(_0x5250e9);}),tgBot['on'](_0x2c28f5(0x151),async _0x3a99cb=>{const _0x1e29e0=_0x2c28f5,_0x41a966=_0x3a99cb['data'],_0x477520=_0x3a99cb[_0x1e29e0(0xec)];tgBot[_0x1e29e0(0x1ab)](_0x3a99cb['id'])[_0x1e29e0(0x137)](async()=>{const _0x383ef0=_0x1e29e0;devices[_0x230375][_0x383ef0(0xaa)]={'clientip':_0x7a0b02,'timestamp':new Date()[_0x383ef0(0xa2)](),'expiry':_0x41a966},_0x41a966!='reject'?(await tgBot[_0x383ef0(0x18d)](_0x477520[_0x383ef0(0xd6)]['id'],_0x383ef0(0xed)+_0x41a966+'\x20minutes',{'parse_mode':_0x383ef0(0xbe)})[_0x383ef0(0x1b9)](_0x1c6fd5=>{telegramError(_0x1c6fd5);}),io['to'](_0x230375)[_0x383ef0(0xac)]('status',{'access':{'allow':![],'reason':_0x383ef0(0x1b3),'token':null}})):(await tgBot['sendMessage'](_0x477520[_0x383ef0(0xd6)]['id'],_0x383ef0(0x108))['catch'](_0x34eb27=>{telegramError(_0x34eb27);}),io['to'](_0x230375)[_0x383ef0(0xac)](_0x383ef0(0x84),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x1e29e0(0x16b)](_0x1e29e0(0x151));}));}function loginAccess2FA(_0x203bb1,_0x48e01a){const _0x4c6e44=_0x4e7f62;tgBot&&settings[_0x4c6e44(0xb2)]&&(tgBot[_0x4c6e44(0x16b)](_0x4c6e44(0x151)),tgBot['sendMessage'](settings[_0x4c6e44(0xb2)],_0x4c6e44(0x14e)+normalizeIP(_0x48e01a)[_0x4c6e44(0xe4)]+_0x4c6e44(0x146),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4c6e44(0xd1),'callback_data':loginExpiry},{'text':_0x4c6e44(0xee),'callback_data':_0x4c6e44(0xee)}]]}})[_0x4c6e44(0x1b9)](_0x384d1c=>{telegramError(_0x384d1c);}),tgBot['on'](_0x4c6e44(0x151),async _0x3e875a=>{const _0x3e41e3=_0x4c6e44,_0x41e8da=_0x3e875a[_0x3e41e3(0x113)],_0x4f6423=_0x3e875a[_0x3e41e3(0xec)];tgBot[_0x3e41e3(0x1ab)](_0x3e875a['id'])[_0x3e41e3(0x137)](async()=>{const _0xf35109=_0x3e41e3;devices[_0x203bb1][_0xf35109(0x125)]={'clientip':_0x48e01a,'timestamp':new Date()['getTime'](),'expiry':_0x41e8da},_0x41e8da!=_0xf35109(0xee)?(await tgBot[_0xf35109(0x18d)](_0x4f6423[_0xf35109(0xd6)]['id'],_0xf35109(0x1b5),{'parse_mode':'HTML'})['catch'](_0x466a2a=>{telegramError(_0x466a2a);}),io['to'](_0x203bb1)[_0xf35109(0xac)](_0xf35109(0x84),{'access':{'allow':![],'reason':_0xf35109(0x1b3),'token':null}})):(await tgBot[_0xf35109(0x18d)](_0x4f6423['chat']['id'],_0xf35109(0xdd))['catch'](_0x3e3f45=>{telegramError(_0x3e3f45);}),io['to'](_0x203bb1)[_0xf35109(0xac)](_0xf35109(0x84),{'access':{'allow':![],'reason':_0xf35109(0x159),'token':null}}));}),tgBot['removeListener'](_0x3e41e3(0x151));}));}function getConfiguration(){const _0x2023d1=_0x4e7f62;return dbConfig[_0x2023d1(0x150)](_0x2023d1(0x14d))[_0x2023d1(0x180)]('botID')[_0x2023d1(0x7e)]()||[];}function getEnabledBots(){const _0x31d95e=_0x4e7f62;return dbConfig[_0x31d95e(0x150)](_0x31d95e(0x14d))[_0x31d95e(0x180)](_0x31d95e(0xb7))[_0x31d95e(0xfc)]({'status':_0x31d95e(0x13c)})[_0x31d95e(0x7e)]()||[];}function _0x4ba0(_0x39bec6,_0x340ca9){const _0x25f242=_0x2c59();return _0x4ba0=function(_0x29f99e,_0x2bbf70){_0x29f99e=_0x29f99e-0x7b;let _0x2c5932=_0x25f242[_0x29f99e];return _0x2c5932;},_0x4ba0(_0x39bec6,_0x340ca9);}function getDisabledBots(){const _0x483608=_0x4e7f62;return dbConfig['get'](_0x483608(0x14d))[_0x483608(0x180)](_0x483608(0xb7))['filter']({'status':'disabled'})[_0x483608(0x7e)]()||[];}function getSettings(){const _0x19c854=_0x4e7f62;return dbSettings[_0x19c854(0x150)]('settings')[_0x19c854(0x7e)]()||{'timeshift':0x0};}function getSecure(){const _0x2858ee=_0x4e7f62;return dbSecure['get'](_0x2858ee(0x1a1))[_0x2858ee(0x7e)]()||{};}function getBlacklist(){const _0x10a08c=_0x4e7f62;return dbSecure['get'](_0x10a08c(0x179))['value']()||[];}function broadcastToBots(_0x45cfad,_0x4bf54f){const _0x49cfbe=_0x4e7f62;config[_0x49cfbe(0x1ae)](_0x53e86e=>{const _0x17a67f=_0x49cfbe;if(_0x53e86e[_0x17a67f(0x84)]=='enabled'&&_0x53e86e[_0x17a67f(0xdb)]==_0x17a67f(0x8c)){if(pid[_0x53e86e['botID']])pid[_0x53e86e['botID']]['send']({[_0x45cfad]:_0x4bf54f});}});}function storeSettings(_0x15edd8,_0x18cdb1=![]){const _0x1ba348=_0x4e7f62;_0x15edd8={...settings,..._0x15edd8};if(_0x18cdb1&&_0x15edd8['bbPassword']!=_0x1ba348(0x1aa)&&_0x15edd8[_0x1ba348(0x13f)]!=''){const _0xaeb91d=crypt[_0x1ba348(0x12a)](secure[_0x1ba348(0x134)],_0x15edd8[_0x1ba348(0x13f)])['message'][_0x1ba348(0xaf)]('@')[0x0],_0x2aed4d=bcrypt[_0x1ba348(0x1b2)](_0xaeb91d,saltRounds);_0x15edd8={..._0x15edd8,'bbPassword':_0x2aed4d};}if(_0x18cdb1&&_0x15edd8['telegramToken']!=_0x1ba348(0x1aa)&&_0x15edd8[_0x1ba348(0x198)]!=''){const _0x48e773=crypt[_0x1ba348(0x12a)](secure[_0x1ba348(0x134)],_0x15edd8['telegramToken'])[_0x1ba348(0xec)][_0x1ba348(0xaf)]('@')[0x0];_0x15edd8={..._0x15edd8,'telegramToken':_0x48e773};}const _0xe3b963=_0x15edd8[_0x1ba348(0x198)]!=_0x1ba348(0x1aa)&&_0x15edd8[_0x1ba348(0x198)]!=settings[_0x1ba348(0x198)]||_0x15edd8[_0x1ba348(0x16e)]!=settings[_0x1ba348(0x16e)],_0x3cfa79=_0x15edd8[_0x1ba348(0x198)]==''||_0x15edd8[_0x1ba348(0x16e)]=='';if(_0xe3b963)_0x15edd8['telegramEvents']=_0x1ba348(0x15f);for(const [_0x40124e,_0x5246ef]of Object[_0x1ba348(0x196)](_0x15edd8)){if(_0x40124e==_0x1ba348(0x198)&&_0x5246ef==_0x1ba348(0x1aa)){_0x15edd8[_0x1ba348(0x198)]=settings[_0x1ba348(0x198)];continue;};if(_0x40124e==_0x1ba348(0x13f)&&_0x5246ef==_0x1ba348(0x1aa)){_0x15edd8[_0x1ba348(0x13f)]=settings[_0x1ba348(0x13f)];continue;};dbSettings[_0x1ba348(0xcd)](_0x1ba348(0xeb)+_0x40124e,_0x5246ef)[_0x1ba348(0x7b)]();}settings=_0x15edd8,io['to'](_0x1ba348(0x193))['emit'](_0x1ba348(0x130),cleanSettings()),broadcastToBots(_0x1ba348(0x162),settings['timeshift']);if(_0xe3b963&&!_0x3cfa79)initTelegram();if(_0xe3b963&&_0x3cfa79)disableTelegram();getAllClients()['forEach'](_0x87f35e=>{const _0x10214e=_0x1ba348;getSocket(_0x87f35e['id'])['emit'](_0x10214e(0x84),{'access':{'allow':![],'reason':_0x10214e(0x1b3),'token':null}});});}function updateSetting(_0x55ab39,_0x472bbc){const _0x10e5e7=_0x4e7f62;dbSettings[_0x10e5e7(0xcd)](_0x10e5e7(0xeb)+_0x55ab39,_0x472bbc)[_0x10e5e7(0x7b)](),settings=getSettings(),io['to'](_0x10e5e7(0x193))['emit'](_0x10e5e7(0x130),cleanSettings());}function storeSecure(_0x3c4f81){const _0xe90418=_0x4e7f62;dbSecure['get']('secure')[_0xe90418(0xb6)](_0x3c4f81)['write'](),secure=_0x3c4f81;}function addBlacklist(_0x48a1ea){const _0x16498a=_0x4e7f62;cleanBlacklist();let _0x503ede;devices[_0x48a1ea][_0x16498a(0xaa)]?_0x503ede=Math['max'](devices[_0x48a1ea]['telegramIpApproval']['expiry'],loginExpiry):_0x503ede=loginExpiry,dbSecure[_0x16498a(0x150)](_0x16498a(0x179))[_0x16498a(0xb6)]({'expiry':new Date()[_0x16498a(0xa2)]()+_0x503ede*0x3c*0x3e8,'token':devices[_0x48a1ea]['access'][_0x16498a(0x18a)]})['write'](),blacklist=dbSecure['get'](_0x16498a(0x179))[_0x16498a(0x7e)]();}function cleanBlacklist(){const _0x773738=_0x4e7f62;let _0x24a1e5=dbSecure[_0x773738(0x150)](_0x773738(0x179))[_0x773738(0x114)]()[_0x773738(0x7e)](),_0x2b3d29=new Date()['getTime']();_0x24a1e5['forEach'](_0x4324c5=>{const _0x4b648c=_0x773738;_0x4324c5[_0x4b648c(0x1bb)]<_0x2b3d29&&dbSecure[_0x4b648c(0x150)](_0x4b648c(0x179))[_0x4b648c(0x110)]({'expiry':_0x4324c5[_0x4b648c(0x1bb)]})[_0x4b648c(0x7b)]();});}function initStates(){const _0x80e85d=_0x4e7f62;let _0x313aa0=getConfiguration();_0x313aa0[_0x80e85d(0x1ae)](_0x3fe4e2=>{const _0x278c3f=_0x80e85d;_0x3fe4e2['live']=_0x278c3f(0x15a);}),storeConfiguration(_0x313aa0);}function onKeys(){const _0x4a404f=new RSA();return new Promise(_0x5c8320=>{const _0x22ff8c=_0x4ba0;_0x4a404f[_0x22ff8c(0x10d)]()[_0x22ff8c(0x137)](_0x3bb956=>{_0x5c8320(_0x3bb956);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2d04bc=_0x4e7f62;let _0x10e542=getConfiguration(),_0x2658ea=![];_0x10e542['forEach'](_0x9a535a=>{const _0x253d20=_0x4ba0;if(_0x9a535a[_0x253d20(0x84)]==_0x253d20(0x8c))_0x9a535a[_0x253d20(0x84)]=_0x253d20(0x13c),_0x2658ea=!![];else _0x9a535a[_0x253d20(0x84)]=='stopped'&&(_0x9a535a[_0x253d20(0x84)]=_0x253d20(0xe8),_0x2658ea=!![]);});if(_0x2658ea)storeConfiguration(_0x10e542);let _0x56254f=getSecure();if(!_0x56254f[_0x2d04bc(0x90)](_0x2d04bc(0x127))){let _0xcb1e74=await generateKeys();_0x56254f[_0x2d04bc(0x164)]=_0xcb1e74[_0x2d04bc(0x164)],_0x56254f['privateKey']=_0xcb1e74[_0x2d04bc(0x134)],_0x56254f[_0x2d04bc(0x127)]=crypto[_0x2d04bc(0x15d)](0x20)['toString']('hex');;storeSecure(_0x56254f);}let _0x497f12=getSettings();_0x2658ea=![];!_0x497f12[_0x2d04bc(0x90)]('loginRequired')&&(_0x497f12['loginRequired']=![],_0x497f12[_0x2d04bc(0x9b)]='',_0x497f12[_0x2d04bc(0x13f)]='',_0x497f12[_0x2d04bc(0xd2)]=![],_0x2658ea=!![]);!_0x497f12[_0x2d04bc(0x90)]('whitelistEnabled')&&(_0x497f12[_0x2d04bc(0x1c4)]=![],_0x497f12[_0x2d04bc(0xba)]=[],_0x497f12[_0x2d04bc(0xf4)]=![],_0x2658ea=!![]);if(!_0x497f12[_0x2d04bc(0x90)](_0x2d04bc(0x115))){if(_0x497f12['telegramChatId'])_0x497f12[_0x2d04bc(0x115)]=!![];else _0x497f12['telegramEnabled']=![];_0x2658ea=!![];}if(_0x2658ea)storeSettings(_0x497f12);}function storeConfiguration(_0x7d4a99){const _0x57eee7=_0x4e7f62;dbConfig['get'](_0x57eee7(0x14d))['remove']()['write'](),dbConfig['get'](_0x57eee7(0x14d))['push'](..._0x7d4a99)['write'](),config=_0x7d4a99;}function resetPassword(){const _0x10d355=_0x4e7f62;tgBot&&settings[_0x10d355(0xb2)]&&(tgBot[_0x10d355(0x16b)](_0x10d355(0x151)),tgBot[_0x10d355(0x18d)](settings[_0x10d355(0xb2)],_0x10d355(0x12d),{'parse_mode':_0x10d355(0xbe),'reply_markup':{'inline_keyboard':[[{'text':_0x10d355(0x184),'callback_data':_0x10d355(0x184)},{'text':'no','callback_data':'no'}]]}})['catch'](_0xfcdad3=>{telegramError(_0xfcdad3);}),tgBot['on']('callback_query',async _0x51f4be=>{const _0x35b87f=_0x10d355,_0x54a761=_0x51f4be[_0x35b87f(0x113)],_0x165d5b=_0x51f4be['message'];tgBot[_0x35b87f(0x1ab)](_0x51f4be['id'])['then'](async()=>{const _0x2922f7=_0x35b87f;if(_0x54a761!='no'){const _0x3a8cdd=0xf,_0x2443f8='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x361c69=Array[_0x2922f7(0x111)](crypto[_0x2922f7(0x117)](new Uint32Array(_0x3a8cdd)))[_0x2922f7(0x12f)](_0x2f58d4=>_0x2443f8[_0x2f58d4%_0x2443f8[_0x2922f7(0x177)]])[_0x2922f7(0x87)](''),_0x119673=bcrypt[_0x2922f7(0x1b2)](_0x361c69,saltRounds);storeSettings({'bbPassword':_0x119673}),await tgBot[_0x2922f7(0x18d)](_0x165d5b[_0x2922f7(0xd6)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x361c69,{'parse_mode':'HTML'})[_0x2922f7(0x1b9)](_0x441b2c=>{telegramError(_0x441b2c);});}else await tgBot[_0x2922f7(0x18d)](_0x165d5b['chat']['id'],_0x2922f7(0x139))[_0x2922f7(0x1b9)](_0xc5725e=>{telegramError(_0xc5725e);});}),tgBot[_0x35b87f(0x16b)](_0x35b87f(0x151));}));}function logging(_0x2554bf){const _0x3c2de7=_0x4e7f62;console['log'](getTimeStamp()+_0x3c2de7(0x172)+_0x2554bf);if(tgBot&&settings['telegramChatId']&&settings[_0x3c2de7(0x197)]!=_0x3c2de7(0x14f))tgBot[_0x3c2de7(0x18d)](settings[_0x3c2de7(0xb2)],_0x3c2de7(0xd7)+_0x2554bf)[_0x3c2de7(0x1b9)](_0x22a2cf=>{telegramError(_0x22a2cf);});}function getServerTime(){const _0x1a08a9=_0x4e7f62,_0x220c35=new Date();return _0x220c35['getFullYear']()+'/'+(_0x220c35[_0x1a08a9(0xc4)]()+0x1)[_0x1a08a9(0x96)]()[_0x1a08a9(0x15c)](0x2,'0')+'/'+_0x220c35[_0x1a08a9(0x19c)]()['toString']()[_0x1a08a9(0x15c)](0x2,'0')+'\x20'+_0x220c35[_0x1a08a9(0xcf)]()[_0x1a08a9(0x96)]()['padStart'](0x2,'0')+':'+_0x220c35[_0x1a08a9(0xab)]()['toString']()[_0x1a08a9(0x15c)](0x2,'0')+':'+_0x220c35[_0x1a08a9(0x1a8)]()[_0x1a08a9(0x96)]()[_0x1a08a9(0x15c)](0x2,'0');}function getTimeStamp(){const _0x12aff7=_0x4e7f62,_0x2ef7bc=shiftedTime();return _0x2ef7bc['getFullYear']()+'/'+(_0x2ef7bc['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2ef7bc[_0x12aff7(0x19c)]()[_0x12aff7(0x96)]()['padStart'](0x2,'0')+'\x20'+_0x2ef7bc[_0x12aff7(0xcf)]()[_0x12aff7(0x96)]()[_0x12aff7(0x15c)](0x2,'0')+':'+_0x2ef7bc[_0x12aff7(0xab)]()[_0x12aff7(0x96)]()[_0x12aff7(0x15c)](0x2,'0')+':'+_0x2ef7bc[_0x12aff7(0x1a8)]()[_0x12aff7(0x96)]()['padStart'](0x2,'0');}function shiftedTime(){const _0xc918dc=_0x4e7f62,_0x3007bf=new Date();let _0x5a3180=_0x3007bf;if(settings[_0xc918dc(0x162)]&&settings[_0xc918dc(0x162)]!==0x0)_0x5a3180=fns[_0xc918dc(0x8a)](_0x3007bf,{'hours':settings[_0xc918dc(0x162)]});return _0x5a3180;}function startScheduler(){const _0x330252=_0x4e7f62;let _0x502e15=new Date()[_0x330252(0x142)]();_0x502e15==0x1&&backupConfigFiles();_0x502e15==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1bb4af=_0x4e7f62;fs[_0x1bb4af(0x11e)](configpath,{'withFileTypes':!![]})[_0x1bb4af(0x1ae)](_0x2c84b1=>{const _0x29b2e7=_0x1bb4af;if(!_0x2c84b1[_0x29b2e7(0x103)]())fs[_0x29b2e7(0x175)](configpath+_0x2c84b1[_0x29b2e7(0xbd)],configbackuppath+_0x2c84b1['name']);});}function triggerAnalytics(){analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x1f2678,_0x350d34){const _0x228b46=_0x4e7f62;if(_0x1f2678[_0x228b46(0x194)]==settings[_0x228b46(0x9b)]&&bcrypt['compareSync'](_0x1f2678['password'],settings[_0x228b46(0x13f)])){if(settings[_0x228b46(0xd2)])return{'allow':![],'reason':_0x228b46(0x1ac),'token':null};else{const _0x1478a0=generateLoginToken(_0x350d34);return{'allow':!![],'reason':_0x228b46(0x95),'token':_0x1478a0};}}else return{'allow':![],'reason':_0x228b46(0x10c),'token':null};}function refreshToken(_0x4c96ef){const _0x48746f=generateLoginToken(_0x4c96ef);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x48746f};}function validateAccess(_0x1f43de,_0x3a47ac){const _0x2315a0=_0x4e7f62;let _0x20e9c0=devices[_0x3a47ac]['ip'],_0x4076cc;const _0xab5e3f=_0x55abb1=>{const _0x22e3e3=_0x4ba0;if(settings['loginRequired']){if(settings[_0x22e3e3(0xd2)]){if(telegram2FaApproved(_0x3a47ac)){const _0x229306=generateLoginToken(_0x3a47ac);return{'allow':!![],'reason':_0x22e3e3(0x8e),'token':_0x229306};}else return{'allow':![],'reason':_0x22e3e3(0xc6),'token':null};}else return _0x4076cc=validToken(_0x55abb1,_0x3a47ac),_0x4076cc[_0x22e3e3(0x90)]('success')?{'allow':!![],'reason':_0x22e3e3(0xa4),'token':_0x55abb1}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x22e3e3(0x1be),'token':null};};if(settings[_0x2315a0(0x1c4)]){let _0xafa565=[...settings['whitelist'],'::1',_0x2315a0(0x189),_0x2315a0(0x93)];if(_0xafa565['includes'](_0x20e9c0))return _0xab5e3f(_0x1f43de);else{_0x4076cc=validToken(_0x1f43de,_0x3a47ac);if(_0x4076cc[_0x2315a0(0x90)]('success'))return _0xab5e3f(_0x1f43de);else{if(telegramIpApproved(_0x3a47ac)){const _0x1f2016=generateToken(_0x3a47ac);return _0x4076cc=_0xab5e3f(_0x1f43de),_0x4076cc['allow']?{'allow':!![],'reason':_0x2315a0(0x161),'token':_0x1f2016}:_0x4076cc;}else return settings[_0x2315a0(0xf4)]?{'allow':![],'reason':_0x2315a0(0x192),'token':null}:{'allow':![],'reason':_0x2315a0(0x8b),'token':null};}}}else return _0xab5e3f(_0x1f43de);}function timelyDecrypt(_0xe8b808,_0x3eaf50=!![]){const _0x1c747f=_0x4e7f62;if(_0xe8b808)try{const _0x1bb885=crypt[_0x1c747f(0x12a)](secure[_0x1c747f(0x134)],_0xe8b808)[_0x1c747f(0xec)],_0x1a6729=_0x1bb885[_0x1c747f(0xaf)]('@')[0x0],_0x15f0ae=_0x1bb885['split']('@')[0x1],_0x1051c3=new Date()['getTime']();if(_0x3eaf50){if(_0x1051c3-_0x15f0ae<maxSecretAge*0x3e8)return _0x1a6729;else return![];}else return _0x1a6729;}catch(_0x5836fe){return![];}else return![];}const validToken=(_0x8d120f,_0x482b51)=>{const _0x26c3fc=_0x4e7f62,_0x47eadc=devices[_0x482b51]['ip'];if(!_0x8d120f)return{'error':_0x26c3fc(0x9d)};for(let _0x4e6a53 of blacklist){if(_0x4e6a53[_0x26c3fc(0x18a)]==_0x8d120f)return{'error':_0x26c3fc(0x166)};}let _0x360fd6;try{_0x360fd6=jwt[_0x26c3fc(0x126)](_0x8d120f,secure[_0x26c3fc(0x127)]+_0x482b51);}catch{return{'error':_0x26c3fc(0x1b1)};}if(!_0x360fd6[_0x26c3fc(0x90)](_0x26c3fc(0x195))&&!_0x360fd6[_0x26c3fc(0x90)](_0x26c3fc(0x194))||!_0x360fd6[_0x26c3fc(0x90)](_0x26c3fc(0x141)))return{'error':_0x26c3fc(0x138)};if(!_0x360fd6[_0x26c3fc(0x90)]('username')&&_0x360fd6['hasOwnProperty'](_0x26c3fc(0x195))){const {clientip:_0x4fe0bc}=_0x360fd6;return _0x47eadc==_0x4fe0bc?{'success':_0x26c3fc(0x1c2)}:{'error':_0x26c3fc(0x1a6)};}else{if(_0x360fd6['hasOwnProperty'](_0x26c3fc(0x194))&&_0x360fd6['hasOwnProperty'](_0x26c3fc(0x195))){const {username:_0x3aeb05,clientip:_0x5bb57e}=_0x360fd6;return settings['bbUsername']==_0x3aeb05&&_0x47eadc==_0x5bb57e?{'success':_0x26c3fc(0x1c2)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x2259bf=>{const _0x427e74=_0x4e7f62;if(_0x2259bf){const _0x3db0cb=devices[_0x2259bf]['ip'];return jwt['sign']({'username':settings[_0x427e74(0x9b)],'clientip':_0x3db0cb},secure['secret']+_0x2259bf,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2caaec=>{const _0x50600c=_0x4e7f62;if(_0x2caaec){const _0x22baa8=devices[_0x2caaec]['ip'];return jwt['sign']({'clientip':_0x22baa8},secure[_0x50600c(0x127)]+_0x2caaec,{'expiresIn':devices[_0x2caaec]['telegramIpApproval'][_0x50600c(0x1bb)]*0x3c});}else return![];},telegramIpApproved=_0x1fcd3e=>{const _0x146055=_0x4e7f62;let _0x1f07f2=![];return devices[_0x1fcd3e][_0x146055(0xaa)]&&devices[_0x1fcd3e][_0x146055(0xaa)][_0x146055(0x1bb)]!=_0x146055(0xee)&&(_0x1f07f2=devices[_0x1fcd3e][_0x146055(0xaa)][_0x146055(0x195)]==devices[_0x1fcd3e]['ip']&&new Date()[_0x146055(0xa2)]()-devices[_0x1fcd3e]['telegramIpApproval']['timestamp']<devices[_0x1fcd3e]['telegramIpApproval'][_0x146055(0x1bb)]*0x3c*0x3e8),_0x1f07f2;},telegram2FaApproved=_0x61d117=>{const _0x460c13=_0x4e7f62;let _0x20affd=![];return devices[_0x61d117][_0x460c13(0x125)]&&devices[_0x61d117][_0x460c13(0x125)]['expiry']!=_0x460c13(0xee)&&(_0x20affd=devices[_0x61d117]['telegram2FaApproval'][_0x460c13(0x195)]==devices[_0x61d117]['ip']&&new Date()[_0x460c13(0xa2)]()-devices[_0x61d117]['telegram2FaApproval'][_0x460c13(0x98)]<devices[_0x61d117][_0x460c13(0x125)][_0x460c13(0x1bb)]*0x3c*0x3e8),_0x20affd;},normalizeIP=_0x31aaba=>{const _0x3210a3=_0x4e7f62;let _0x395a6f=null,_0x3f56ec=null;if(ipaddr[_0x3210a3(0x19b)](_0x31aaba)){const _0x340ff8=ipaddr[_0x3210a3(0x83)](_0x31aaba);_0x340ff8[_0x3210a3(0xc0)]()===_0x3210a3(0x145)?(_0x340ff8[_0x3210a3(0x1bd)]()&&(_0x395a6f=_0x340ff8['toIPv4Address']()[_0x3210a3(0x96)]()),_0x3f56ec=_0x340ff8['toString']()):(_0x395a6f=_0x340ff8[_0x3210a3(0x96)](),_0x3f56ec=_0x340ff8['toIPv4MappedAddress']()[_0x3210a3(0x96)]());}return{'show':_0x395a6f?_0x395a6f:_0x3f56ec,'store':_0x3f56ec};};