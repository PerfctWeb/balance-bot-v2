const _0x68082f=_0x4546;(function(_0x25da86,_0x2d8178){const _0x3a90eb=_0x4546,_0x563fc9=_0x25da86();while(!![]){try{const _0x49744d=-parseInt(_0x3a90eb(0x1d7))/0x1*(-parseInt(_0x3a90eb(0x2d6))/0x2)+parseInt(_0x3a90eb(0x20e))/0x3+-parseInt(_0x3a90eb(0x1b8))/0x4+parseInt(_0x3a90eb(0x1fb))/0x5*(-parseInt(_0x3a90eb(0x328))/0x6)+-parseInt(_0x3a90eb(0x19c))/0x7+parseInt(_0x3a90eb(0x166))/0x8*(-parseInt(_0x3a90eb(0x25f))/0x9)+-parseInt(_0x3a90eb(0x14e))/0xa*(-parseInt(_0x3a90eb(0x273))/0xb);if(_0x49744d===_0x2d8178)break;else _0x563fc9['push'](_0x563fc9['shift']());}catch(_0x5d51e1){_0x563fc9['push'](_0x563fc9['shift']());}}}(_0x430c,0xc730f));const _0x74f17=function(){let _0x493d57=!![];return function(_0x29e7a9,_0x4003f3){const _0xc939d6=_0x493d57?function(){if(_0x4003f3){const _0x238f3f=_0x4003f3['apply'](_0x29e7a9,arguments);return _0x4003f3=null,_0x238f3f;}}:function(){};return _0x493d57=![],_0xc939d6;};}(),_0x48bc18=_0x74f17(this,function(){const _0x472b2e=_0x4546;return _0x48bc18[_0x472b2e(0x25b)]()[_0x472b2e(0x33b)](_0x472b2e(0x2b2))[_0x472b2e(0x25b)]()[_0x472b2e(0x23d)](_0x48bc18)[_0x472b2e(0x33b)](_0x472b2e(0x2b2));});_0x48bc18();'use strict';process[_0x68082f(0x321)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x68082f(0x2ad)),fs=require('fs'),fns=require(_0x68082f(0x2aa)),low=require(_0x68082f(0x2f8)),FileSync=require(_0x68082f(0x2a0)),path=require(_0x68082f(0x29e)),crypto=require(_0x68082f(0x21f)),Crypt=require(_0x68082f(0x226))[_0x68082f(0x31f)],RSA=require(_0x68082f(0x226))[_0x68082f(0x1e1)],bcrypt=require(_0x68082f(0x1e5)),jwt=require('jsonwebtoken'),ipaddr=require(_0x68082f(0x25d)),argv=require('yargs/yargs')(process[_0x68082f(0x182)][_0x68082f(0x301)](0x2))[_0x68082f(0x182)],uuidRandom=require(_0x68082f(0x196)),{Telegraf,Markup}=require(_0x68082f(0x2af)),Mixpanel=require('mixpanel'),axios=require(_0x68082f(0x280)),{GraphQLClient,gql}=require(_0x68082f(0x185)),util=require(_0x68082f(0x17b)),fileUpload=require(_0x68082f(0x259)),{networkInterfaces}=require('os'),PORT=argv[_0x68082f(0x244)]||_0x68082f(0x342),pattern=/^[0-9]{2,4}$/;!pattern[_0x68082f(0x2ea)](PORT)&&(console[_0x68082f(0x33e)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x68082f(0x1cf)),process['exit'](0x1));const HOST=argv[_0x68082f(0x1ef)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x68082f(0x149)]['node'];let bbpath=_0x68082f(0x2ae),bbpath2='';const botfile='bot.js',configfile=_0x68082f(0x1ed),settingsfile=_0x68082f(0x1e4),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x68082f(0x312))[_0x68082f(0x28a)]||'production',maxBackups=0xa;let validInstallation=!![];!fs[_0x68082f(0x18f)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x68082f(0x234)),configpath=userID?bbpath+_0x68082f(0x22c)+userID+'/':bbpath+_0x68082f(0x22c),configbackuppath=configpath+_0x68082f(0x326),logspath=userID?bbpath+_0x68082f(0x1a0)+userID+'/':bbpath+_0x68082f(0x1a0),zippath=userID?bbpath+_0x68082f(0x2dd)+userID+'/':bbpath+_0x68082f(0x2dd),loggerfile=fs[_0x68082f(0x172)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x68082f(0x21d)+userID+'/':bbpath+'temp/';!fs[_0x68082f(0x18f)](configpath)&&fs[_0x68082f(0x30f)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x68082f(0x18f)](logspath)&&fs[_0x68082f(0x30f)](logspath);!fs[_0x68082f(0x18f)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x68082f(0x18f)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x68082f(0x23b)]({'bots':[]})[_0x68082f(0x2b9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x68082f(0x23b)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x68082f(0x33a),'onepagemode':![]}})[_0x68082f(0x2b9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x68082f(0x23b)]({'secure':{},'blacklist':[]})[_0x68082f(0x2b9)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x68082f(0x198)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x68082f(0x1d8)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x68082f(0x290)]&&(settings['telegramToken']!=''&&settings[_0x68082f(0x290)]!=_0x68082f(0x21a))&&settings[_0x68082f(0x16b)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x39927f,_0x3d04d7)=>{const _0x249f79=_0x68082f,_0x5b9a14=/#[A-Z]{3}#/g;if(typeof _0x39927f==_0x249f79(0x338)){!_0x3d04d7?_0x39927f=_0x39927f[_0x249f79(0x274)](_0x5b9a14,''):(_0x39927f=_0x39927f[_0x249f79(0x274)](/#BLU#/g,'\x1b[34m'),_0x39927f=_0x39927f[_0x249f79(0x274)](/#RED#/g,_0x249f79(0x1de)),_0x39927f=_0x39927f[_0x249f79(0x274)](/#YEL#/g,'\x1b[33m'),_0x39927f=_0x39927f[_0x249f79(0x274)](/#MAG#/g,'\x1b[35m'),_0x39927f=_0x39927f['replace'](/#CYA#/g,_0x249f79(0x2e4)),_0x39927f=_0x39927f[_0x249f79(0x274)](/#RES#/g,_0x249f79(0x1a4)));;}return _0x39927f;},logger={'screen':_0x5b1cc7=>{const _0x351320=_0x68082f;console[_0x351320(0x33e)](parseColor(_0x5b1cc7,!![]));},'simple':_0x1890c8=>{const _0x568d76=_0x68082f;console['log'](parseColor(_0x1890c8,!![])),loggerfile[_0x568d76(0x2b9)](util['format'](parseColor(_0x1890c8,![]))+'\x0a');},'full':async _0xd4d863=>{const _0x50a64d=_0x68082f,_0x360835=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0xd4d863;console[_0x50a64d(0x33e)](parseColor(_0x360835,!![])),loggerfile[_0x50a64d(0x2b9)](util['format'](parseColor(_0x360835,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x50a64d(0x211)]!='orders')await sendTelegram(settings['telegramChatId'],_0x50a64d(0x1fc)+parseColor(_0xd4d863,![]));},'debug':async(_0x4a615b,_0x1a90e0='')=>{const _0x122397=_0x68082f,_0x57e90a=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x4a615b;if(debugging)console[_0x122397(0x33e)](parseColor(_0x57e90a,!![]));loggerfile[_0x122397(0x2b9)](util[_0x122397(0x158)](parseColor(_0x57e90a,![]))+'\x0a');if(_0x1a90e0){if(debugging)console[_0x122397(0x33e)](_0x1a90e0);loggerfile[_0x122397(0x2b9)](util[_0x122397(0x158)](_0x1a90e0)+'\x0a');}}};let terminating=![];process['on'](_0x68082f(0x189),function(_0x466ab6){const _0x29962d=_0x68082f;logger[_0x29962d(0x271)](_0x466ab6);}),process['on'](_0x68082f(0x2fb),()=>{const _0x322f5c=_0x68082f;stopAllBots(),process[_0x322f5c(0x2fb)](0x0);}),process['on'](_0x68082f(0x2fe),()=>{stopAllBots(),process['exit'](0x0);}),process['on']('SIGINT',()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x68082f(0x312))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x68082f(0x2a5)),app=express(),http=require(_0x68082f(0x1a9))['createServer'](app);app[_0x68082f(0x197)](fileUpload({'useTempFiles':!![]})),app[_0x68082f(0x187)](_0x68082f(0x204),async(_0x871df5,_0x58c9e6)=>{const _0x3341ac=_0x68082f,_0x585e5c=_0x871df5[_0x3341ac(0x1df)]['type'],_0x505df2=getClientsWithBotID(_0x3341ac(0x16f)),_0x25d299=_0x871df5[_0x3341ac(0x1e3)][_0x3341ac(0x1ae)],_0x157e0c=timelyDecrypt(_0x25d299,![]),_0x28175d=_0x505df2[_0x3341ac(0x269)](_0x2d6336=>_0x2d6336[_0x3341ac(0x1ae)]==_0x157e0c);if(_0x28175d){const _0x109a2e=normalizeIP(_0x871df5['socket']['remoteAddress'])[_0x3341ac(0x2b4)],_0x3ef032=_0x871df5['headers'][_0x3341ac(0x1f1)];if(validateAccess(_0x3ef032,_0x157e0c,_0x109a2e)[_0x3341ac(0x1d3)])_0x585e5c=='backup'&&await backupConfigFiles(),await zipFiles(_0x585e5c),_0x58c9e6[_0x3341ac(0x1a6)](zippath+(_0x585e5c+_0x3341ac(0x1f9)),_0x4280b9=>{const _0x52c1b2=_0x3341ac;_0x4280b9&&(logger[_0x52c1b2(0x161)]('Failed\x20to\x20download\x20'+_0x585e5c),logger[_0x52c1b2(0x271)](_0x4280b9));});else logger[_0x3341ac(0x161)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x585e5c+_0x3341ac(0x1c7));}else logger[_0x3341ac(0x161)](_0x3341ac(0x2e9)+_0x585e5c+_0x3341ac(0x1f6));}),app[_0x68082f(0x173)](_0x68082f(0x2be),async(_0x5c789c,_0x51e3fb)=>{const _0x18b175=_0x68082f,_0x202dde=getClientsWithBotID('botmanager'),_0x3e3a7f=_0x5c789c[_0x18b175(0x1e3)][_0x18b175(0x1ae)],_0x59b220=timelyDecrypt(_0x3e3a7f,![]),_0xf7230=_0x202dde[_0x18b175(0x269)](_0x2f0dc0=>_0x2f0dc0[_0x18b175(0x1ae)]==_0x59b220);logger[_0x18b175(0x26d)](_0x18b175(0x2d9));if(_0xf7230){const _0x47f825=normalizeIP(_0x5c789c[_0x18b175(0x15a)]['remoteAddress'])[_0x18b175(0x2b4)],_0x4917e5=_0x5c789c[_0x18b175(0x1e3)][_0x18b175(0x1f1)];if(validateAccess(_0x4917e5,_0x59b220,_0x47f825)['allow']){if(_0x5c789c[_0x18b175(0x21c)]){const _0x29afdf=_0x5c789c[_0x18b175(0x21c)][_0x18b175(0x16c)];await _0x29afdf['mv'](temppath+_0x29afdf['name']),_0x51e3fb['send']({'status':!![],'message':_0x18b175(0x15f)});const _0x4ebb32=getBotsWithMode();_0x4ebb32[_0x18b175(0x20a)]>0x0?confirmRestore(temppath,_0x29afdf[_0x18b175(0x15c)]):unzipFile(temppath,_0x29afdf[_0x18b175(0x15c)]);}}else logger[_0x18b175(0x161)](_0x18b175(0x1dd));}else logger[_0x18b175(0x161)](_0x18b175(0x1d2));}),app[_0x68082f(0x197)](express['static'](path[_0x68082f(0x24f)](__dirname,bbpath2,_0x68082f(0x153)))),app[_0x68082f(0x197)](express[_0x68082f(0x230)](path[_0x68082f(0x24f)](__dirname,bbpath2,_0x68082f(0x1ff)))),app['get']('/',function(_0x1fe6cd,_0x3e2fdd){const _0x5c8db3=_0x68082f;_0x3e2fdd[_0x5c8db3(0x179)](path[_0x5c8db3(0x24f)](__dirname,bbpath2,'build2','index.html'));}),app[_0x68082f(0x187)](_0x68082f(0x267),function(_0x1e8128,_0x3cb423){const _0x4f63da=_0x68082f;_0x3cb423[_0x4f63da(0x179)](path['join'](__dirname,bbpath2,_0x4f63da(0x1ff),_0x4f63da(0x1f3)));}),app[_0x68082f(0x187)](_0x68082f(0x195),(_0x26c489,_0x216c3b)=>{const _0x53b0ca=_0x68082f;_0x216c3b[_0x53b0ca(0x179)](path[_0x53b0ca(0x24f)](__dirname,bbpath2,_0x53b0ca(0x1ff),_0x53b0ca(0x1f3)));}),app[_0x68082f(0x187)](_0x68082f(0x284),(_0x3d4639,_0x5350d4)=>{const _0x430ab6=_0x68082f;_0x5350d4[_0x430ab6(0x179)](path[_0x430ab6(0x24f)](__dirname,bbpath2,_0x430ab6(0x1ff),_0x430ab6(0x1f3)));}),app[_0x68082f(0x187)](_0x68082f(0x2b5),(_0x55a3f3,_0x52c7e1)=>{const _0x57388f=_0x68082f;_0x52c7e1[_0x57388f(0x179)](path[_0x57388f(0x24f)](__dirname,bbpath2,_0x57388f(0x1ff),'index.html'));}),app['get'](_0x68082f(0x1d0),(_0x3d08cd,_0x520cf5)=>{const _0x1125f9=_0x68082f;_0x520cf5[_0x1125f9(0x179)](path['join'](__dirname,bbpath2,'build',_0x1125f9(0x1f3)));}),app['get']('/:bot/configuration',(_0x54bb11,_0x969e90)=>{const _0x78987f=_0x68082f;_0x969e90[_0x78987f(0x179)](path[_0x78987f(0x24f)](__dirname,bbpath2,_0x78987f(0x1ff),'index.html'));}),app['get'](_0x68082f(0x26a),(_0x5fec40,_0x2cd7f7)=>{const _0xeed270=_0x68082f;_0x2cd7f7['sendFile'](path[_0xeed270(0x24f)](__dirname,bbpath2,_0xeed270(0x1ff),_0xeed270(0x1f3)));});if(HOST)http[_0x68082f(0x32d)](PORT,HOST);else http[_0x68082f(0x32d)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4167f8=_0x68082f;let _0x392f0c=_0x4167f8(0x152);const _0x8012bf=networkInterfaces(),_0x29a124={};for(const _0x25e765 of Object[_0x4167f8(0x220)](_0x8012bf)){for(const _0x56a809 of _0x8012bf[_0x25e765]){if((_0x56a809['family']==_0x4167f8(0x1bd)||_0x56a809[_0x4167f8(0x346)]==0x4)&&!_0x56a809[_0x4167f8(0x238)]){const _0xfcd011=ipaddr[_0x4167f8(0x250)](_0x56a809[_0x4167f8(0x32b)])['range']();_0xfcd011!=_0x4167f8(0x1b0)&&(!_0x29a124[_0x25e765]&&(_0x29a124[_0x25e765]=[]),_0x29a124[_0x25e765][_0x4167f8(0x18e)](_0x56a809[_0x4167f8(0x32b)]),_0x392f0c=_0x56a809['address']);}}}return{'serverip':_0x392f0c,'netinterfaces':_0x29a124};}function _0x4546(_0x183ba6,_0x481a7f){const _0x2b5450=_0x430c();return _0x4546=function(_0x48bc18,_0x74f17){_0x48bc18=_0x48bc18-0x149;let _0x430c7f=_0x2b5450[_0x48bc18];return _0x430c7f;},_0x4546(_0x183ba6,_0x481a7f);}async function startServer(){const _0x344631=_0x68082f,{serverip:_0x1f567b,netinterfaces:_0x233783}=getServerIP();logger[_0x344631(0x271)](''),logger[_0x344631(0x271)](_0x344631(0x232)),await logger[_0x344631(0x161)](_0x344631(0x2b8)+serverversion+'#RES#\x20'+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x344631(0x318)+PORT+_0x344631(0x302))+(_0x344631(0x1dc)+_0x1f567b+':'+PORT+_0x344631(0x2c0))),logger[_0x344631(0x271)](_0x344631(0x232));if(config[_0x344631(0x20a)]!=0x0)for(const _0x1e77a8 of config){const _0x3f6cd9=_0x1e77a8['mode']==_0x344631(0x2ca)?'a':'m';if(_0x1e77a8[_0x344631(0x2d0)]=='enabled'||_0x1e77a8[_0x344631(0x2d0)]==_0x344631(0x1f0))await logger[_0x344631(0x161)](_0x344631(0x31b)+_0x3f6cd9+_0x344631(0x27f)+_0x1e77a8[_0x344631(0x2f9)]+_0x344631(0x2b3)+_0x1e77a8[_0x344631(0x22a)]),startBot([_0x1e77a8['botID'],userID],{'cwd':bbpath},function(_0x3855f6){const _0x2af1d2=_0x344631;if(_0x3855f6)logger[_0x2af1d2(0x161)](_0x3855f6);});else(_0x1e77a8[_0x344631(0x2d0)]==_0x344631(0x1e6)||_0x1e77a8['status']==_0x344631(0x1c2))&&await logger[_0x344631(0x161)]('Idling\x20('+_0x3f6cd9+')\x20\x20\x20|\x20Bot\x20'+_0x1e77a8[_0x344631(0x2f9)]+_0x344631(0x2b3)+_0x1e77a8[_0x344631(0x22a)]);}else!newBot&&logger['simple'](_0x344631(0x181));if(newBot)addBot();logger['simple'](_0x344631(0x232)),logger[_0x344631(0x271)](''),await logger[_0x344631(0x26d)](_0x344631(0x165)+nodeversion),await logger[_0x344631(0x26d)](_0x344631(0x268),_0x233783);}function startSocket(){const _0x15c3b4=_0x68082f;io['on'](_0x15c3b4(0x160),_0xbef044=>{const _0x37ac32=_0x15c3b4;let _0x5c4166,_0x25a6c5,_0x43d097,_0xbd02f9,_0x191752;const _0x2c2e04=_0xbef044[_0x37ac32(0x28e)][_0x37ac32(0x1e3)][_0x37ac32(0x222)];_0x25a6c5=_0x2c2e04['match'](/bot[0-9]{3}/);if(_0x25a6c5)_0x43d097=_0x25a6c5[0x0]['match'](/[0-9]{3}/);if(_0x43d097)_0x5c4166=_0x43d097[0x0];else _0x5c4166=_0x37ac32(0x16f);const _0x3d5291=_0xbef044[_0x37ac32(0x28e)]['auth'][_0x37ac32(0x18b)];if(!_0x3d5291)_0xbef044[_0x37ac32(0x2bc)](_0x37ac32(0x2d0),{'publicKey':secure[_0x37ac32(0x2a4)]});else{_0xbd02f9=timelyDecrypt(_0x3d5291,![]);if(!_0xbd02f9)_0xbef044[_0x37ac32(0x2bc)]('status',{'publicKey':secure[_0x37ac32(0x2a4)]});else{_0x191752=normalizeIP(_0xbef044[_0x37ac32(0x314)][_0x37ac32(0x23f)])[_0x37ac32(0x2b4)];if(!devices[_0xbd02f9])devices[_0xbd02f9]={'uuid':_0xbd02f9,'access':{'token':null}};devices[_0xbd02f9]['ip']=_0x191752;const _0x19629b=addClient(_0xbef044['id'],_0xbd02f9,_0x5c4166);setAccess(_0x19629b),emitMessages(),_0xbef044['on']('login',_0x3707ea=>{const _0x9ad40=_0x37ac32,_0x8e4ae3=timelyDecrypt(_0x3707ea['password']);if(_0x8e4ae3){_0x3707ea={'username':_0x3707ea[_0x9ad40(0x297)],'password':_0x8e4ae3},devices[_0xbd02f9][_0x9ad40(0x1cb)]=validateCredentials(_0x3707ea,_0xbd02f9);if(devices[_0xbd02f9][_0x9ad40(0x1cb)]['allow']==![]&&devices[_0xbd02f9][_0x9ad40(0x1cb)][_0x9ad40(0x332)]=='2FA\x20login\x20required')_0xbef044[_0x9ad40(0x2bc)](_0x9ad40(0x2d0),{'access':devices[_0xbd02f9]['access']}),loginAccess2FA(_0xbd02f9,_0x191752);else{if(devices[_0xbd02f9]['access'][_0x9ad40(0x1d3)]==![]&&devices[_0xbd02f9][_0x9ad40(0x1cb)][_0x9ad40(0x332)]==_0x9ad40(0x180))_0xbef044[_0x9ad40(0x2bc)](_0x9ad40(0x2d0),{'access':devices[_0xbd02f9]['access']});else devices[_0xbd02f9][_0x9ad40(0x1cb)]['allow']&&devices[_0xbd02f9]['access'][_0x9ad40(0x332)]==_0x9ad40(0x207)&&(getClientsWithUuid(_0xbd02f9)[_0x9ad40(0x14d)](_0xe10d6d=>{setAccess(_0xe10d6d);}),logger[_0x9ad40(0x26d)](_0x9ad40(0x2a3)+_0xbd02f9['slice'](-0x8)),setTokenRefresh(_0xbd02f9),setSessionTimeout('login',_0xbd02f9));}}else logger[_0x9ad40(0x161)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0xbef044['on'](_0x37ac32(0x178),()=>{resetPassword();}),_0xbef044['on']('disconnect',_0x307443=>{removeClient(_0xbef044['id']);}),_0x5c4166==_0x37ac32(0x16f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x55518e){const _0x1777f2=_0x68082f;if(_0x55518e!=_0x1777f2(0x16f)&&config[_0x1777f2(0x1ea)]!=''){if(pid[_0x55518e])pid[_0x55518e][_0x1777f2(0x256)]({'function':'initclient','args':null});}_0x55518e!=_0x1777f2(0x16f)&&broadcastToBots(_0x1777f2(0x2e2),JSON[_0x1777f2(0x1a1)](config));}function reloadBotManager(){const _0x22cbd4=_0x68082f;getClientsWithBotID(_0x22cbd4(0x16f))[_0x22cbd4(0x14d)](_0x48c2b9=>{const _0xfa4689=_0x22cbd4;getSocket(_0x48c2b9['id'])[_0xfa4689(0x2bc)](_0xfa4689(0x2d0),{'access':{'allow':![],'reason':_0xfa4689(0x279),'token':null}});});}function getSocket(_0x160391){const _0x4426a1=_0x68082f;return io['sockets'][_0x4426a1(0x306)]['get'](_0x160391);}function setAccess(_0x3590db){const _0x11e415=_0x68082f,_0x57bf3b=getSocket(_0x3590db['id']),_0x149d2c=_0x3590db['uuid'],_0x59d505=_0x3590db[_0x11e415(0x240)];devices[_0x149d2c][_0x11e415(0x1cb)]=validateAccess(devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x1f2)],_0x149d2c),logger['debug'](_0x11e415(0x174)+devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x332)]+_0x11e415(0x17c)+_0x3590db['id']['slice'](-0x8)+_0x11e415(0x29b)+_0x149d2c[_0x11e415(0x301)](-0x8)),_0x57bf3b[_0x11e415(0x24f)](_0x149d2c);if(devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x1d3)]){_0x57bf3b[_0x11e415(0x24f)](_0x59d505);if(_0x59d505=='botmanager')initializeSocketBotManager(_0x57bf3b);else initializeSocketBot(_0x57bf3b);initClient(_0x59d505);}devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x1f2)]&&devices[_0x149d2c][_0x11e415(0x1cb)]['reason']==_0x11e415(0x30a)&&setSessionTimeout(_0x11e415(0x177),_0x149d2c),devices[_0x149d2c]['access'][_0x11e415(0x1f2)]&&devices[_0x149d2c][_0x11e415(0x1cb)]['reason']==_0x11e415(0x2cd)&&setSessionTimeout(_0x11e415(0x1b7),_0x149d2c),_0x57bf3b[_0x11e415(0x2bc)](_0x11e415(0x2d0),{'status':_0x3590db[_0x11e415(0x1d6)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x149d2c]['access'],'externalip':devices[_0x149d2c]['ip'],'publicKey':secure[_0x11e415(0x2a4)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x1d3)]==![]&&devices[_0x149d2c][_0x11e415(0x1cb)][_0x11e415(0x332)]==_0x11e415(0x1b4)&&temporaryAccess2FA(_0x149d2c,devices[_0x149d2c]['ip']);}function setSessionTimeout(_0x543f13,_0xb8ee50){const _0x399c53=_0x68082f;let _0x22d9c2;if(_0x543f13==_0x399c53(0x1b7))_0x22d9c2=loginExpiry*0x3c*0x3e8;else _0x22d9c2=devices[_0xb8ee50]['telegramIpApproval'][_0x399c53(0x19b)]*0x3c*0x3e8-(new Date()[_0x399c53(0x287)]()-devices[_0xb8ee50][_0x399c53(0x2da)][_0x399c53(0x1d5)]);if(devices[_0xb8ee50][_0x399c53(0x20d)])clearTimeout(devices[_0xb8ee50][_0x399c53(0x20d)]);devices[_0xb8ee50]['pidExpireLogin']=setTimeout(()=>{const _0x4b178d=_0x399c53;if(devices[_0xb8ee50][_0x4b178d(0x27c)])clearTimeout(devices[_0xb8ee50][_0x4b178d(0x27c)]);removeSocketListeners(_0xb8ee50),addBlacklist(_0xb8ee50),devices[_0xb8ee50]['telegramIpApproval']=null,devices[_0xb8ee50][_0x4b178d(0x315)]=null,devices[_0xb8ee50]['access']['token']=null,logger[_0x4b178d(0x26d)](_0x4b178d(0x23e)+_0xb8ee50[_0x4b178d(0x301)](-0x8)),devices[_0xb8ee50][_0x4b178d(0x1cb)]=validateAccess(devices[_0xb8ee50]['access'][_0x4b178d(0x1f2)],_0xb8ee50),!(devices[_0xb8ee50]['access']['allow']&&devices[_0xb8ee50]['access'][_0x4b178d(0x332)]=='login\x20not\x20required')&&(_0x543f13==_0x4b178d(0x1b7)?io['to'](_0xb8ee50)[_0x4b178d(0x2bc)](_0x4b178d(0x2d0),{'access':{'allow':![],'reason':_0x4b178d(0x1ba),'token':null}}):io['to'](_0xb8ee50)[_0x4b178d(0x2bc)](_0x4b178d(0x2d0),{'access':{'allow':![],'reason':_0x4b178d(0x2fd),'token':null}})),devices[_0xb8ee50][_0x4b178d(0x1cb)][_0x4b178d(0x1f2)]=null;},_0x22d9c2);}function setTokenRefresh(_0x4c6ed2){const _0x5f1021=_0x68082f;if(devices[_0x4c6ed2][_0x5f1021(0x27c)])clearTimeout(devices[_0x4c6ed2][_0x5f1021(0x27c)]);devices[_0x4c6ed2][_0x5f1021(0x27c)]=setTimeout(()=>{const _0x1923d8=_0x5f1021;getClientsWithUuid(_0x4c6ed2)[_0x1923d8(0x20a)]!=0x0?(devices[_0x4c6ed2][_0x1923d8(0x1cb)]=refreshToken(_0x4c6ed2),io['to'](_0x4c6ed2)[_0x1923d8(0x2bc)](_0x1923d8(0x2d0),{'status':_0x1923d8(0x1c4),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4c6ed2][_0x1923d8(0x1cb)],'externalip':devices[_0x4c6ed2]['ip'],'publicKey':secure[_0x1923d8(0x2a4)],'validInstallation':validInstallation}),setTokenRefresh(_0x4c6ed2)):clearTimeout(devices[_0x4c6ed2][_0x1923d8(0x27c)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x189e6b){const _0x388bb3=_0x68082f,_0x284246=getClient(_0x189e6b['id'])['uuid'];_0x189e6b[_0x388bb3(0x2bc)](_0x388bb3(0x2e2),config),_0x189e6b[_0x388bb3(0x2bc)]('settings',cleanSettings()),_0x189e6b['on']('add-bot',_0x43b38d=>{const _0x5d8554=_0x388bb3;if(validateAccess(_0x43b38d,_0x284246)['allow'])addBot();else logger[_0x5d8554(0x161)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x189e6b['on'](_0x388bb3(0x343),(_0x2c61a8,_0x3e14fd)=>{const _0x4534ae=_0x388bb3;if(validateAccess(_0x3e14fd,_0x284246)[_0x4534ae(0x1d3)])toggleBot(_0x2c61a8['botID'],_0x2c61a8['status'],_0x2c61a8[_0x4534ae(0x1e7)]);else logger['full'](_0x4534ae(0x22b));}),_0x189e6b['on']('toggle-bot-mode',(_0x38377e,_0x5e123e)=>{const _0x51174e=_0x388bb3;if(validateAccess(_0x5e123e,_0x284246)['allow'])toggleBotMode(_0x38377e);else logger[_0x51174e(0x161)](_0x51174e(0x22b));}),_0x189e6b['on'](_0x388bb3(0x2d8),(_0x5a64b6,_0x486a78)=>{const _0x5affff=_0x388bb3;if(validateAccess(_0x486a78,_0x284246)[_0x5affff(0x1d3)])deleteBot(_0x5a64b6);else logger[_0x5affff(0x161)](_0x5affff(0x156));}),_0x189e6b['on']('store-settings',(_0x4179bc,_0x1d634c)=>{const _0x2f4121=_0x388bb3;if(validateAccess(_0x1d634c,_0x284246)['allow'])storeSettings(_0x4179bc,!![]);else logger[_0x2f4121(0x161)](_0x2f4121(0x1d4));}),_0x189e6b['on']('update-bb',_0xe28a40=>{const _0x52e198=_0x388bb3;if(validateAccess(_0xe28a40,_0x284246)[_0x52e198(0x1d3)])updateBB('update');else logger['full'](_0x52e198(0x327));}),_0x189e6b['on'](_0x388bb3(0x215),_0x2e6ca5=>{const _0x8e11ab=_0x388bb3;if(validateAccess(_0x2e6ca5,_0x284246)[_0x8e11ab(0x1d3)])updateBB(_0x8e11ab(0x292));else logger[_0x8e11ab(0x161)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x189e6b['on']('get-backup-files',_0x3f7e52=>{const _0x25b107=_0x388bb3;if(validateAccess(_0x3f7e52,_0x284246)[_0x25b107(0x1d3)]){const _0x24d5f5=getClient(_0x189e6b['id']);if(_0x24d5f5)getBackupFiles(_0x24d5f5['uuid']);else logger['full'](_0x25b107(0x1bb));}else logger[_0x25b107(0x161)](_0x25b107(0x254));}),_0x189e6b['on'](_0x388bb3(0x307),(_0x53ee07,_0x1c7eb2)=>{const _0x20f5fb=_0x388bb3;if(validateAccess(_0x1c7eb2,_0x284246)['allow'])restoreBackupFile(_0x53ee07);else logger[_0x20f5fb(0x161)](_0x20f5fb(0x2c8));}),_0x189e6b['on']('get-messages',_0x733472=>{const _0x466af6=_0x388bb3;if(validateAccess(_0x733472,_0x284246)[_0x466af6(0x1d3)])getMessages();else logger[_0x466af6(0x161)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x189e6b['on']('confirm-message',(_0x2bfd84,_0x25fe67)=>{if(validateAccess(_0x25fe67,_0x284246)['allow'])confirmMessage(_0x2bfd84);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x189e6b['on'](_0x388bb3(0x216),_0x10bc91=>{const _0x1d605b=_0x388bb3;if(validateAccess(_0x10bc91,_0x284246)['allow']){if(devices[_0x284246][_0x1d605b(0x27c)])clearTimeout(devices[_0x284246][_0x1d605b(0x27c)]);if(devices[_0x284246][_0x1d605b(0x20d)])clearTimeout(devices[_0x284246]['pidExpireLogin']);removeSocketListeners(getClient(_0x189e6b['id'])['uuid']),addBlacklist(_0x284246),devices[_0x284246][_0x1d605b(0x2da)]=null,devices[_0x284246]['telegram2FaApproval']=null,devices[_0x284246]['access'][_0x1d605b(0x1f2)]=null,logger[_0x1d605b(0x26d)](_0x1d605b(0x2e5)+_0x284246[_0x1d605b(0x301)](-0x8)),io['to'](getClient(_0x189e6b['id'])[_0x1d605b(0x1ae)])[_0x1d605b(0x2bc)](_0x1d605b(0x2d0),{'access':{'allow':![],'reason':_0x1d605b(0x29d),'token':null}});}else logger[_0x1d605b(0x161)](_0x1d605b(0x1bc));});}function initializeSocketBot(_0x16c8b2){const _0x130149=_0x68082f,_0x59a62d=getClient(_0x16c8b2['id'])['bot'],_0x3da98d=getClient(_0x16c8b2['id'])['uuid'];_0x16c8b2['on'](_0x130149(0x1fa),(_0x29e63a,_0x3c5cad)=>{const _0x421a84=_0x130149;if(validateAccess(_0x3c5cad,_0x3da98d)[_0x421a84(0x1d3)]){if(pid[_0x59a62d])pid[_0x59a62d][_0x421a84(0x256)]({'function':_0x421a84(0x237),'args':_0x29e63a});}else logger[_0x421a84(0x161)](_0x421a84(0x202));}),_0x16c8b2['on'](_0x130149(0x155),(_0x397436,_0x5a1ecc)=>{const _0x525ba0=_0x130149;if(validateAccess(_0x5a1ecc,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x525ba0(0x256)]({'function':_0x525ba0(0x224),'args':_0x397436});}else logger['full'](_0x525ba0(0x2e3));}),_0x16c8b2['on']('get-portfolio',(_0x4452a8,_0xee63b2)=>{const _0x198c91=_0x130149;if(validateAccess(_0xee63b2,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x198c91(0x256)]({'function':'getPortfolio','args':_0x4452a8});}else logger[_0x198c91(0x161)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x16c8b2['on'](_0x130149(0x26b),(_0x557cdb,_0x28cafd)=>{const _0x1b2785=_0x130149;if(validateAccess(_0x28cafd,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x1b2785(0x256)]({'function':_0x1b2785(0x1c1),'args':_0x557cdb});}else logger[_0x1b2785(0x161)](_0x1b2785(0x310));}),_0x16c8b2['on'](_0x130149(0x225),(_0x2ef8fc,_0x48ae14)=>{const _0x41e51f=_0x130149;if(validateAccess(_0x48ae14,_0x3da98d)[_0x41e51f(0x1d3)]){if(pid[_0x59a62d])pid[_0x59a62d][_0x41e51f(0x256)]({'function':_0x41e51f(0x2ac),'args':_0x2ef8fc});}else logger['full'](_0x41e51f(0x164));}),_0x16c8b2['on'](_0x130149(0x248),(_0x37f7ad,_0x105f93)=>{const _0xfb00a5=_0x130149;if(validateAccess(_0x105f93,_0x3da98d)[_0xfb00a5(0x1d3)]){if(pid[_0x59a62d])pid[_0x59a62d][_0xfb00a5(0x256)]({'function':_0xfb00a5(0x262),'args':_0x37f7ad});}else logger['full'](_0xfb00a5(0x22d));}),_0x16c8b2['on'](_0x130149(0x1be),_0x49def0=>{const _0x5cde8e=_0x130149;if(validateAccess(_0x49def0,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x5cde8e(0x256)]({'function':_0x5cde8e(0x163),'args':null});}else logger[_0x5cde8e(0x161)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x16c8b2['on'](_0x130149(0x2c9),_0x41ec81=>{const _0x598adb=_0x130149;if(validateAccess(_0x41ec81,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x598adb(0x256)]({'function':_0x598adb(0x2fc),'args':null});}else logger['full'](_0x598adb(0x316));}),_0x16c8b2['on'](_0x130149(0x2d3),(_0x2acac5,_0x1ca5b9)=>{const _0x527305=_0x130149;if(validateAccess(_0x1ca5b9,_0x3da98d)[_0x527305(0x1d3)]){if(pid[_0x59a62d])pid[_0x59a62d]['send']({'function':_0x527305(0x14f),'args':_0x2acac5});}else logger[_0x527305(0x161)](_0x527305(0x27a));}),_0x16c8b2['on'](_0x130149(0x17e),_0x1388e0=>{const _0x263043=_0x130149;if(validateAccess(_0x1388e0,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x263043(0x256)]({'function':_0x263043(0x331),'args':null});}else logger[_0x263043(0x161)](_0x263043(0x298));}),_0x16c8b2['on']('show-config',_0x5756ab=>{const _0x400f79=_0x130149;if(validateAccess(_0x5756ab,_0x3da98d)['allow']){if(pid[_0x59a62d])pid[_0x59a62d][_0x400f79(0x256)]({'function':_0x400f79(0x228),'args':null});}else logger[_0x400f79(0x161)](_0x400f79(0x15d));}),_0x16c8b2['on'](_0x130149(0x2c2),_0x5a50e9=>{const _0x40a0b3=_0x130149;if(validateAccess(_0x5a50e9,_0x3da98d)[_0x40a0b3(0x1d3)])updateBB(_0x40a0b3(0x28d));else logger[_0x40a0b3(0x161)](_0x40a0b3(0x327));}),_0x16c8b2['on']('get-messages',_0x247d95=>{const _0x38a05e=_0x130149;if(validateAccess(_0x247d95,_0x3da98d)[_0x38a05e(0x1d3)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x16c8b2['on'](_0x130149(0x272),(_0x159400,_0x4aee47)=>{const _0x3505db=_0x130149;if(validateAccess(_0x4aee47,_0x3da98d)[_0x3505db(0x1d3)])confirmMessage(_0x159400);else logger[_0x3505db(0x161)](_0x3505db(0x28b));}),_0x16c8b2['on']('logout',_0x942f48=>{const _0xad668e=_0x130149;if(validateAccess(_0x942f48,_0x3da98d)[_0xad668e(0x1d3)]){if(devices[_0x3da98d][_0xad668e(0x27c)])clearTimeout(devices[_0x3da98d][_0xad668e(0x27c)]);if(devices[_0x3da98d][_0xad668e(0x20d)])clearTimeout(devices[_0x3da98d][_0xad668e(0x20d)]);removeSocketListeners(getClient(_0x16c8b2['id'])[_0xad668e(0x1ae)]),addBlacklist(_0x3da98d),devices[_0x3da98d][_0xad668e(0x2da)]=null,devices[_0x3da98d][_0xad668e(0x315)]=null,devices[_0x3da98d][_0xad668e(0x1cb)][_0xad668e(0x1f2)]=null,logger[_0xad668e(0x26d)](_0xad668e(0x2e5)+_0x3da98d[_0xad668e(0x301)](-0x8)),io['to'](getClient(_0x16c8b2['id'])[_0xad668e(0x1ae)])[_0xad668e(0x2bc)](_0xad668e(0x2d0),{'access':{'allow':![],'reason':_0xad668e(0x29d),'token':null}});}else logger[_0xad668e(0x161)](_0xad668e(0x1bc));});}function removeSocketListeners(_0x47191f){const _0x41d1d9=_0x68082f;getClientsWithUuid(_0x47191f)[_0x41d1d9(0x14d)](_0x3aa91f=>{const _0x2d0f91=_0x41d1d9;getSocket(_0x3aa91f['id'])[_0x2d0f91(0x15b)]();});}function cleanSettings(){const _0x5197eb=_0x68082f;let _0x3672fd=settings;return settings['telegramToken']&&settings[_0x5197eb(0x290)]!=''&&(_0x3672fd={..._0x3672fd,'telegramToken':_0x5197eb(0x206)}),settings[_0x5197eb(0x168)]&&settings[_0x5197eb(0x168)]!=''&&(_0x3672fd={..._0x3672fd,'bbPassword':'************'}),(settings[_0x5197eb(0x168)]&&settings[_0x5197eb(0x168)]==_0x5197eb(0x21a)||settings[_0x5197eb(0x290)]&&settings[_0x5197eb(0x290)]==_0x5197eb(0x21a))&&(_0x3672fd={..._0x3672fd,'restored':{'password':settings[_0x5197eb(0x168)]=='***','telegram':settings[_0x5197eb(0x290)]==_0x5197eb(0x21a)}}),_0x3672fd;}async function updateBB(_0x6ebe49){const _0x587ba6=_0x68082f;await backupConfigFiles(),installingUpdate=!![],config[_0x587ba6(0x14d)](_0x69a953=>{const _0x414da5=_0x587ba6;restartBot(_0x69a953[_0x414da5(0x2f9)]);});if(_0x6ebe49==_0x587ba6(0x28d))process[_0x587ba6(0x256)]({'update':!![],'environment':environment},_0x18f6f6=>{});else _0x6ebe49==_0x587ba6(0x292)&&process[_0x587ba6(0x256)]({'reinstall':!![],'environment':environment},_0x124fb7=>{});}function startBot(_0x4b28cd,_0x49bce6,_0x18800c){const _0x3bb01f=_0x68082f;if(debugging)_0x4b28cd[_0x3bb01f(0x18e)]('-d');let _0xbb2fa5=![];const _0x15e727=_0x4b28cd[0x0];_0x49bce6={..._0x49bce6,'stdio':['inherit','inherit','inherit','ipc']},pid[_0x15e727]=childProcess[_0x3bb01f(0x28f)](botfile,_0x4b28cd,_0x49bce6),pid[_0x15e727]['on']('message',_0x62faa4=>{const _0x2f8b97=_0x3bb01f;switch(Object[_0x2f8b97(0x220)](_0x62faa4)[0x0]){case'botname':updateBotName(_0x15e727,_0x62faa4[_0x2f8b97(0x22a)]);break;case _0x2f8b97(0x1a8):updateBotManager();break;case'status':updateStatus(_0x15e727,_0x62faa4[_0x2f8b97(0x2d0)]);break;case _0x2f8b97(0x1e7):updateLive(_0x15e727,_0x62faa4['live']);break;case _0x2f8b97(0x31c):updateLive(_0x15e727,_0x62faa4[_0x2f8b97(0x31c)]),io['to'](_0x15e727)[_0x2f8b97(0x2bc)](_0x2f8b97(0x2d0),{'access':{'allow':![],'reason':_0x2f8b97(0x279),'token':null}});break;case _0x2f8b97(0x278):_0x62faa4[_0x2f8b97(0x278)]==_0x2f8b97(0x283)&&restartBot(_0x15e727);_0x62faa4[_0x2f8b97(0x278)]==_0x2f8b97(0x203)&&toggleBot(_0x15e727,_0x2f8b97(0x1e6),_0x2f8b97(0x194));break;case'telegram':sendTelegramBot(_0x15e727,_0x62faa4[_0x2f8b97(0x24b)]);break;case _0x2f8b97(0x1f4):sendTelegramMsg(_0x62faa4[_0x2f8b97(0x1f4)]);break;case _0x2f8b97(0x1a3):io['to'](_0x15e727)[_0x2f8b97(0x2bc)](_0x62faa4[_0x2f8b97(0x1a3)],_0x62faa4[_0x2f8b97(0x210)]);break;}}),pid[_0x15e727]['on'](_0x3bb01f(0x1d1),function(_0x4573c8){if(_0xbb2fa5)return;_0xbb2fa5=!![],_0x18800c(_0x4573c8);}),pid[_0x15e727]['on']('exit',async function(_0x1f614f){const _0x42e8fb=_0x3bb01f;if(terminating)return;if(installingUpdate){logger[_0x42e8fb(0x26d)](_0x42e8fb(0x16a)),io[_0x42e8fb(0x319)]();return;}if(_0xbb2fa5)return;_0xbb2fa5=!![],_0x18800c(null);const _0x300772=dbConfig['get'](_0x42e8fb(0x2e2))[_0x42e8fb(0x269)]({'botID':_0x15e727})[_0x42e8fb(0x2c6)]();_0x300772&&(_0x300772[_0x42e8fb(0x2d0)]=='enabled'||_0x300772[_0x42e8fb(0x2d0)]==_0x42e8fb(0x1f0))&&(await sleep(0x3e8),updateLive(_0x15e727,'stopped'),logger['full'](_0x42e8fb(0x24d)+_0x15e727),startBot([_0x15e727,userID],{'cwd':bbpath},function(_0x303d84){const _0x177f79=_0x42e8fb;if(_0x303d84)logger[_0x177f79(0x161)](_0x303d84);}));});}function stopBot(_0x2a6a51){const _0x5551ab=_0x68082f;getClientsWithBotID(_0x2a6a51)['forEach'](_0x5a7966=>{const _0x55fd2f=_0x4546;getSocket(_0x5a7966['id'])[_0x55fd2f(0x2bd)](!![]),removeClient(_0x5a7966['id']);}),pid[_0x2a6a51]&&(pid[_0x2a6a51][_0x5551ab(0x203)](),pid[_0x2a6a51]=null);}function stopAllBots(){const _0x22c78b=_0x68082f;terminating=!![];const _0x399dbd=getEnabledBots();_0x399dbd[_0x22c78b(0x14d)](_0x3bdaac=>{stopBot(_0x3bdaac['botID']);});}function restartBot(_0x54b285){if(pid[_0x54b285])pid[_0x54b285]['kill']();}function addBot(){const _0x2956b0=_0x68082f;let _0x10fbc6;for(let _0x407436=0x1;_0x407436<0x3e9;_0x407436++){_0x10fbc6=_0x407436[_0x2956b0(0x25b)]()['padStart'](0x3,'0');let _0x2ff898=config['find'](_0x19283c=>_0x19283c[_0x2956b0(0x2f9)]==_0x10fbc6);if(!_0x2ff898)break;}if(_0x10fbc6===_0x2956b0(0x335)){logger[_0x2956b0(0x161)](_0x2956b0(0x2a1));return;}logger[_0x2956b0(0x161)](_0x2956b0(0x243)+_0x10fbc6),dbConfig[_0x2956b0(0x187)](_0x2956b0(0x2e2))[_0x2956b0(0x18e)]({'botID':_0x10fbc6,'botname':_0x2956b0(0x276)+_0x10fbc6,'status':_0x2956b0(0x1f0),'live':''})['write'](),startBot([_0x10fbc6,userID],{'cwd':bbpath},function(_0x33ccc5){const _0x48289f=_0x2956b0;if(_0x33ccc5)logger[_0x48289f(0x161)](_0x33ccc5);}),config=getConfiguration(),io['to'](_0x2956b0(0x16f))['emit'](_0x2956b0(0x2e2),config),broadcastToBots(_0x2956b0(0x2e2),JSON[_0x2956b0(0x1a1)](config));}function deleteBot(_0x352f6c){const _0x56fa65=_0x68082f;getClientsWithBotID(_0x352f6c)[_0x56fa65(0x14d)](_0x1aff03=>{const _0xede34=_0x56fa65;getSocket(_0x1aff03['id'])[_0xede34(0x2bd)](!![]),removeClient(_0x1aff03['id']);}),dbConfig['get']('bots')[_0x56fa65(0x1c5)]({'botID':_0x352f6c})[_0x56fa65(0x2b9)](),logger[_0x56fa65(0x161)](_0x56fa65(0x221)+_0x352f6c),stopBot(_0x352f6c);try{if(fs['existsSync'](path[_0x56fa65(0x24f)](configpath,_0x56fa65(0x22f)+_0x352f6c+'-config.json')))fs[_0x56fa65(0x2c4)](path[_0x56fa65(0x24f)](configpath,_0x56fa65(0x22f)+_0x352f6c+_0x56fa65(0x27d)));if(fs[_0x56fa65(0x18f)](path[_0x56fa65(0x24f)](configpath,_0x56fa65(0x22f)+_0x352f6c+_0x56fa65(0x33f))))fs[_0x56fa65(0x2c4)](path[_0x56fa65(0x24f)](configpath,_0x56fa65(0x22f)+_0x352f6c+_0x56fa65(0x33f)));if(fs[_0x56fa65(0x18f)](path[_0x56fa65(0x24f)](configpath,'bot-'+_0x352f6c+_0x56fa65(0x309))))fs['unlinkSync'](path[_0x56fa65(0x24f)](configpath,'bot-'+_0x352f6c+_0x56fa65(0x309)));if(fs['existsSync'](path['join'](configpath,_0x56fa65(0x22f)+_0x352f6c+'-results.json')))fs['unlinkSync'](path[_0x56fa65(0x24f)](configpath,'bot-'+_0x352f6c+_0x56fa65(0x150)));}catch(_0x16c827){if(_0x16c827)logger[_0x56fa65(0x161)](_0x56fa65(0x1e0),_0x16c827);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x56fa65(0x2e2),config),broadcastToBots(_0x56fa65(0x2e2),JSON[_0x56fa65(0x1a1)](config));}function toggleBot(_0x34c7b1,_0x1b2973,_0x5dc481){const _0x45f62b=_0x68082f;dbConfig['get'](_0x45f62b(0x2e2))[_0x45f62b(0x269)]({'botID':_0x34c7b1})['assign']({'status':_0x1b2973})[_0x45f62b(0x33c)]({'live':_0x5dc481})[_0x45f62b(0x2b9)]();if(_0x1b2973==_0x45f62b(0x200)||_0x1b2973==_0x45f62b(0x1f0))logger[_0x45f62b(0x161)](_0x45f62b(0x27e)+_0x34c7b1),startBot([_0x34c7b1,userID],{'cwd':bbpath},function(_0x1ec86e){if(_0x1ec86e)logger['full'](_0x1ec86e);});else(_0x1b2973==_0x45f62b(0x1e6)||_0x1b2973==_0x45f62b(0x1c2))&&(logger[_0x45f62b(0x161)](_0x45f62b(0x1b1)+_0x34c7b1),stopBot(_0x34c7b1));config=getConfiguration(),io['to'](_0x45f62b(0x16f))[_0x45f62b(0x2bc)]('bots',config),broadcastToBots(_0x45f62b(0x2e2),JSON[_0x45f62b(0x1a1)](config));}function toggleStatus(_0x421ab3){const _0x198ba3=_0x68082f;let _0x57ca7a=dbConfig[_0x198ba3(0x187)](_0x198ba3(0x2e2))['find']({'botID':_0x421ab3})[_0x198ba3(0x2c6)](),_0x2a532f;if(_0x57ca7a['status']===_0x198ba3(0x200))_0x2a532f=_0x198ba3(0x1e6);else{if(_0x57ca7a[_0x198ba3(0x2d0)]==='new')_0x2a532f=_0x198ba3(0x1c2);else{if(_0x57ca7a[_0x198ba3(0x2d0)]===_0x198ba3(0x1c2))_0x2a532f=_0x198ba3(0x1f0);else{if(_0x57ca7a[_0x198ba3(0x2d0)]===_0x198ba3(0x1e6))_0x2a532f=_0x198ba3(0x200);}}}return _0x2a532f;}function updateStatus(_0x49f0be,_0x47caf4){const _0x2d1ae6=_0x68082f;dbConfig['get'](_0x2d1ae6(0x2e2))[_0x2d1ae6(0x269)]({'botID':_0x49f0be})['assign']({'status':_0x47caf4})[_0x2d1ae6(0x2b9)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x2d1ae6(0x2e2),config),broadcastToBots(_0x2d1ae6(0x2e2),JSON['stringify'](config));}function updateLive(_0x5eb91c,_0x59a5b4){const _0x27c6fe=_0x68082f;dbConfig[_0x27c6fe(0x187)](_0x27c6fe(0x2e2))[_0x27c6fe(0x269)]({'botID':_0x5eb91c})[_0x27c6fe(0x33c)]({'live':_0x59a5b4})[_0x27c6fe(0x2b9)](),config=getConfiguration(),io['to'](_0x27c6fe(0x16f))[_0x27c6fe(0x2bc)](_0x27c6fe(0x2e2),config),broadcastToBots(_0x27c6fe(0x2e2),JSON[_0x27c6fe(0x1a1)](config));}function updateBotName(_0x1b1498,_0x22ec79){const _0x1f04e0=_0x68082f;dbConfig['get']('bots')['find']({'botID':_0x1b1498})['assign']({'botname':_0x22ec79})[_0x1f04e0(0x2b9)](),config=getConfiguration(),io['to']('botmanager')[_0x1f04e0(0x2bc)]('bots',config),broadcastToBots(_0x1f04e0(0x2e2),JSON[_0x1f04e0(0x1a1)](config));}function updateBotManager(){const _0x12e382=_0x68082f;config=getConfiguration(),io['to']('botmanager')['emit'](_0x12e382(0x2e2),config),broadcastToBots(_0x12e382(0x2e2),JSON[_0x12e382(0x1a1)](config));}function toggleBotMode(_0x205ff3){const _0x1861b9=_0x68082f;if(pid[_0x205ff3])pid[_0x205ff3]['send']({'function':_0x1861b9(0x1af),'args':null});else{const _0x424f73=configpath+_0x1861b9(0x22f)+_0x205ff3+_0x1861b9(0x27d),_0x1ee925=fs[_0x1861b9(0x18c)](_0x424f73),_0x25834b=JSON[_0x1861b9(0x250)](_0x1ee925),_0x5820be=_0x25834b[_0x1861b9(0x240)][0x0][_0x1861b9(0x281)];_0x25834b[_0x1861b9(0x240)][0x0][_0x1861b9(0x281)]=!_0x5820be;const _0x21db0f=JSON[_0x1861b9(0x1a1)](_0x25834b,null,0x2);fs[_0x1861b9(0x201)](_0x424f73,_0x21db0f),config=getConfiguration(),io['to'](_0x1861b9(0x16f))[_0x1861b9(0x2bc)]('bots',config),broadcastToBots(_0x1861b9(0x2e2),JSON[_0x1861b9(0x1a1)](config));}}function validateTelegram(_0x2c0c25){const _0xb9dd15=_0x68082f;if(_0x2c0c25[_0xb9dd15(0x2fa)]['username']!=settings[_0xb9dd15(0x16b)]&&'@'+_0x2c0c25['from'][_0xb9dd15(0x297)]!=settings[_0xb9dd15(0x16b)]||_0x2c0c25[_0xb9dd15(0x286)]['id']!=settings['telegramChatId'])return sendTelegram(_0x2c0c25[_0xb9dd15(0x286)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0xb9dd15(0x344)}),![];return!![];}async function initTelegram(){const _0x1fcd91=_0x68082f;if(tgBot)tgBot[_0x1fcd91(0x278)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x1fcd91(0x290)]);let _0x5a65da=_0x1fcd91(0x1ab);_0x5a65da+='\x0a',_0x5a65da+=_0x1fcd91(0x305),_0x5a65da+=_0x1fcd91(0x30c),_0x5a65da+=_0x1fcd91(0x19a),_0x5a65da+=_0x1fcd91(0x333),_0x5a65da+=_0x1fcd91(0x299),_0x5a65da+='/off\x20-\x20stop\x20bot(s)\x0a',_0x5a65da+=_0x1fcd91(0x22e),_0x5a65da+=_0x1fcd91(0x205),_0x5a65da+=_0x1fcd91(0x311),_0x5a65da+=_0x1fcd91(0x2b1),_0x5a65da+=_0x1fcd91(0x231),_0x5a65da+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x5a65da+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x5a65da+=_0x1fcd91(0x2a2);let _0x1f1631=_0x1fcd91(0x14a);_0x1f1631+='\x0a',_0x1f1631+=_0x5a65da,tgBot[_0x1fcd91(0x20f)]((_0x13468c,_0x16285c)=>{const _0x45a87d=_0x1fcd91;logger[_0x45a87d(0x271)](getTimeStamp()+_0x45a87d(0x2d5)),logger['debug'](_0x45a87d(0x31a),_0x13468c);}),tgBot[_0x1fcd91(0x197)](async(_0x255633,_0x3a8036)=>{const _0x1fe4db=_0x1fcd91;if(!(!settings[_0x1fe4db(0x282)]&&_0x255633['update'][_0x1fe4db(0x2d4)][_0x1fe4db(0x296)]==_0x1fe4db(0x2c7))){if(!validateTelegram(_0x255633))return;}_0x3a8036();}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x242),async _0xb23fda=>{const _0x1ed7a4=_0x1fcd91;if(!settings[_0x1ed7a4(0x282)])updateSetting(_0x1ed7a4(0x282),_0xb23fda['chat']['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0xb23fda))return;await sendTelegram(_0xb23fda[_0x1ed7a4(0x286)]['id'],_0x1f1631);}),tgBot['command'](_0x1fcd91(0x1ce),async _0x28bc04=>{const _0x589b19=_0x1fcd91;updateSetting(_0x589b19(0x336),!![]),await sendTelegram(_0x28bc04['chat']['id'],'Notifications\x20enabled');}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x169),async _0x5287f9=>{const _0x53d18d=_0x1fcd91;await sendTelegram(_0x5287f9[_0x53d18d(0x286)]['id'],_0x53d18d(0x18d)),updateSetting('telegramEnabled',![]);}),tgBot['command'](_0x1fcd91(0x289),async _0x46a3da=>{const _0x3bcf54=_0x1fcd91,_0x167f71=Markup['inlineKeyboard']([Markup[_0x3bcf54(0x1fe)][_0x3bcf54(0x337)](_0x3bcf54(0x260),'config_orders'),Markup[_0x3bcf54(0x1fe)][_0x3bcf54(0x337)]('Alerts','config_alerts'),Markup[_0x3bcf54(0x1fe)][_0x3bcf54(0x337)](_0x3bcf54(0x334),'config_all')]);_0x46a3da['reply'](_0x3bcf54(0x2e0),_0x167f71);}),tgBot[_0x1fcd91(0x2f1)](_0x1fcd91(0x258),async _0x51e193=>{const _0x58e46a=_0x1fcd91;_0x51e193[_0x58e46a(0x175)](),updateSetting(_0x58e46a(0x211),_0x58e46a(0x23c)),updateSetting(_0x58e46a(0x336),!![]),await sendTelegram(_0x51e193[_0x58e46a(0x286)]['id'],_0x58e46a(0x1cc));}),tgBot[_0x1fcd91(0x2f1)](_0x1fcd91(0x16e),async _0x3c036d=>{const _0x5d089a=_0x1fcd91;_0x3c036d[_0x5d089a(0x175)](),updateSetting(_0x5d089a(0x211),_0x5d089a(0x277)),updateSetting(_0x5d089a(0x336),!![]),await sendTelegram(_0x3c036d[_0x5d089a(0x286)]['id'],_0x5d089a(0x28c));}),tgBot[_0x1fcd91(0x2f1)](_0x1fcd91(0x341),async _0x2012a6=>{const _0x7eba45=_0x1fcd91;_0x2012a6[_0x7eba45(0x175)](),updateSetting(_0x7eba45(0x211),_0x7eba45(0x167)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2012a6[_0x7eba45(0x286)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x2d0),async _0x2ca145=>{const _0x56747a=_0x1fcd91,_0x46e643=getBotsWithMode();let _0x35817c=_0x56747a(0x2cf);config[_0x56747a(0x14d)](_0x130c15=>{const _0x33c7f8=_0x56747a,_0xc6bd5d=_0x46e643[_0x33c7f8(0x269)](_0x2a7138=>_0x2a7138[_0x33c7f8(0x2f9)]==_0x130c15[_0x33c7f8(0x2f9)])[_0x33c7f8(0x320)];_0x35817c+=_0x33c7f8(0x276)+_0x130c15[_0x33c7f8(0x2f9)]+':\x20'+_0x130c15[_0x33c7f8(0x2d0)]+'\x20|\x20'+_0xc6bd5d+_0x33c7f8(0x2b3)+_0x130c15['live']+'\x0a';}),_0x35817c+='\x0a',_0x35817c+=_0x56747a(0x1c8),_0x35817c+=!settings[_0x56747a(0x336)]?_0x56747a(0x325):_0x56747a(0x1a7),_0x35817c+=settings[_0x56747a(0x336)]?settings['telegramEvents']==_0x56747a(0x167)?_0x56747a(0x19e):_0x56747a(0x247)+settings[_0x56747a(0x211)]+'\x20only\x0a':'',await sendTelegram(_0x2ca145[_0x56747a(0x286)]['id'],_0x35817c,{'parse_mode':_0x56747a(0x344)});}),tgBot['command'](_0x1fcd91(0x283),async _0x294afb=>{const _0x4e0395=_0x1fcd91,_0x17028c=getEnabledBots();if(_0x17028c[_0x4e0395(0x20a)]==0x0)await sendTelegram(_0x294afb[_0x4e0395(0x286)]['id'],_0x4e0395(0x1ca));else{if(_0x17028c[_0x4e0395(0x20a)]>0x1)_0x17028c[_0x4e0395(0x18e)]({'botID':_0x4e0395(0x167)});let _0xceda33=[],_0x164208=[];const _0x28d840=_0x17028c[_0x4e0395(0x20a)]%0x4==0x0||_0x17028c[_0x4e0395(0x20a)]%0x4==0x3||_0x17028c[_0x4e0395(0x20a)]%0x3==0x1?0x4:0x3;let _0x450c62=0x0;_0x17028c[_0x4e0395(0x14d)]((_0x531e39,_0x27cd5d)=>{const _0x5568c4=_0x4e0395;if(_0x27cd5d%_0x28d840==0x0)_0x164208=[];_0x164208['push'](Markup[_0x5568c4(0x1fe)]['callback'](_0x531e39[_0x5568c4(0x2f9)]==_0x5568c4(0x167)?_0x5568c4(0x257):_0x5568c4(0x276)+_0x531e39[_0x5568c4(0x2f9)],'restart_'+_0x531e39['botID'])),_0x27cd5d%_0x28d840==0x0&&(_0xceda33[_0x450c62]=_0x164208,_0x450c62++);});const _0x2d5f46=Markup['inlineKeyboard'](_0xceda33);_0x294afb[_0x4e0395(0x324)](_0x4e0395(0x264),_0x2d5f46);}}),tgBot[_0x1fcd91(0x2f1)](/restart_(.+)/,async _0xd7495c=>{const _0x34fb9b=_0x1fcd91,_0x21e7bd=_0xd7495c[_0x34fb9b(0x1ad)][0x1];_0xd7495c[_0x34fb9b(0x175)](),_0x21e7bd==_0x34fb9b(0x167)?config[_0x34fb9b(0x14d)](_0x503394=>{const _0x69f9ff=_0x34fb9b;restartBot(_0x503394[_0x69f9ff(0x2f9)]);}):restartBot(_0x21e7bd);}),tgBot[_0x1fcd91(0x30d)]('on',async _0x50957a=>{const _0x4fe311=_0x1fcd91,_0x485db0=getDisabledBots();if(_0x485db0[_0x4fe311(0x20a)]==0x0)await sendTelegram(_0x50957a[_0x4fe311(0x286)]['id'],_0x4fe311(0x345));else{if(_0x485db0['length']>0x1)_0x485db0[_0x4fe311(0x18e)]({'botID':_0x4fe311(0x167)});let _0x26dcbe=[],_0x52643c=[];const _0x3998da=_0x485db0[_0x4fe311(0x20a)]%0x4==0x0||_0x485db0[_0x4fe311(0x20a)]%0x4==0x3||_0x485db0['length']%0x3==0x1?0x4:0x3;let _0x46fa22=0x0;_0x485db0[_0x4fe311(0x14d)]((_0x4694d8,_0x43d597)=>{const _0x337e92=_0x4fe311;if(_0x43d597%_0x3998da==0x0)_0x52643c=[];_0x52643c[_0x337e92(0x18e)](Markup[_0x337e92(0x1fe)][_0x337e92(0x337)](_0x4694d8['botID']==_0x337e92(0x167)?_0x337e92(0x257):_0x337e92(0x276)+_0x4694d8['botID'],_0x337e92(0x2d1)+_0x4694d8[_0x337e92(0x2f9)])),_0x43d597%_0x3998da==0x0&&(_0x26dcbe[_0x46fa22]=_0x52643c,_0x46fa22++);});const _0x5b2540=Markup['inlineKeyboard'](_0x26dcbe);_0x50957a['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x5b2540);}}),tgBot['action'](/on_(.+)/,async _0x14869d=>{const _0x56f515=_0x1fcd91,_0x48bd77=_0x14869d['match'][0x1];_0x14869d[_0x56f515(0x175)]();if(_0x48bd77==_0x56f515(0x167)){const _0x26cf35=getDisabledBots();await sendTelegram(_0x14869d[_0x56f515(0x286)]['id'],_0x56f515(0x252)),_0x26cf35[_0x56f515(0x14d)](_0x21b666=>{const _0x3447e4=_0x56f515;if(_0x21b666['botID']!=_0x3447e4(0x167))toggleBot(_0x21b666['botID'],toggleStatus(_0x21b666[_0x3447e4(0x2f9)]),_0x3447e4(0x194));});}else await sendTelegram(_0x14869d[_0x56f515(0x286)]['id'],_0x56f515(0x293)+_0x48bd77),toggleBot(_0x48bd77,toggleStatus(_0x48bd77),'stopped');}),tgBot[_0x1fcd91(0x30d)]('off',async _0x3f27da=>{const _0xb7534e=_0x1fcd91,_0x5be2d8=getEnabledBots();if(_0x5be2d8[_0xb7534e(0x20a)]==0x0)await sendTelegram(_0x3f27da['chat']['id'],_0xb7534e(0x1ca));else{if(_0x5be2d8[_0xb7534e(0x20a)]>0x1)_0x5be2d8[_0xb7534e(0x18e)]({'botID':_0xb7534e(0x167)});let _0x240dc7=[],_0x12a5a6=[];const _0x52832b=_0x5be2d8[_0xb7534e(0x20a)]%0x4==0x0||_0x5be2d8[_0xb7534e(0x20a)]%0x4==0x3||_0x5be2d8[_0xb7534e(0x20a)]%0x3==0x1?0x4:0x3;let _0x1e3226=0x0;_0x5be2d8['forEach']((_0x37ab89,_0x5eb0aa)=>{const _0x4bef70=_0xb7534e;if(_0x5eb0aa%_0x52832b==0x0)_0x12a5a6=[];_0x12a5a6[_0x4bef70(0x18e)](Markup[_0x4bef70(0x1fe)][_0x4bef70(0x337)](_0x37ab89[_0x4bef70(0x2f9)]=='all'?_0x4bef70(0x257):_0x4bef70(0x276)+_0x37ab89['botID'],'off_'+_0x37ab89[_0x4bef70(0x2f9)])),_0x5eb0aa%_0x52832b==0x0&&(_0x240dc7[_0x1e3226]=_0x12a5a6,_0x1e3226++);});const _0x2ceda6=Markup[_0xb7534e(0x1f8)](_0x240dc7);_0x3f27da[_0xb7534e(0x324)](_0xb7534e(0x2db),_0x2ceda6);}}),tgBot[_0x1fcd91(0x2f1)](/off_(.+)/,async _0x2c9fa2=>{const _0x4820a6=_0x1fcd91,_0x15b57f=_0x2c9fa2[_0x4820a6(0x1ad)][0x1];_0x2c9fa2[_0x4820a6(0x175)]();if(_0x15b57f==_0x4820a6(0x167)){const _0x1ca841=getEnabledBots();await sendTelegram(_0x2c9fa2[_0x4820a6(0x286)]['id'],_0x4820a6(0x2a6)),_0x1ca841[_0x4820a6(0x14d)](_0x49a0b0=>{const _0x5592c8=_0x4820a6;if(_0x49a0b0['botID']!=_0x5592c8(0x167))toggleBot(_0x49a0b0[_0x5592c8(0x2f9)],toggleStatus(_0x49a0b0[_0x5592c8(0x2f9)]),_0x5592c8(0x194));});}else await sendTelegram(_0x2c9fa2[_0x4820a6(0x286)]['id'],_0x4820a6(0x1cd)+_0x15b57f),toggleBot(_0x15b57f,toggleStatus(_0x15b57f),_0x4820a6(0x194));}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x24a),async _0x1993b3=>{const _0x4ebbe5=_0x1fcd91,_0x23e1d6=getEnabledBots();if(_0x23e1d6[_0x4ebbe5(0x20a)]==0x0)await sendTelegram(_0x1993b3[_0x4ebbe5(0x286)]['id'],_0x4ebbe5(0x1ca));else{if(_0x23e1d6[_0x4ebbe5(0x20a)]>0x1){let _0x389cb6=[],_0x3749d9=[];const _0x1d7cae=_0x23e1d6[_0x4ebbe5(0x20a)]%0x4==0x0||_0x23e1d6['length']%0x4==0x3||_0x23e1d6[_0x4ebbe5(0x20a)]%0x3==0x1?0x4:0x3;let _0x5e3d60=0x0;_0x23e1d6[_0x4ebbe5(0x14d)]((_0x5054b2,_0x4bad54)=>{const _0x174410=_0x4ebbe5;if(_0x4bad54%_0x1d7cae==0x0)_0x3749d9=[];_0x3749d9[_0x174410(0x18e)](Markup[_0x174410(0x1fe)][_0x174410(0x337)](_0x174410(0x276)+_0x5054b2[_0x174410(0x2f9)],_0x174410(0x295)+_0x5054b2[_0x174410(0x2f9)])),_0x4bad54%_0x1d7cae==0x0&&(_0x389cb6[_0x5e3d60]=_0x3749d9,_0x5e3d60++);});const _0x208008=Markup[_0x4ebbe5(0x1f8)](_0x389cb6);_0x1993b3[_0x4ebbe5(0x324)](_0x4ebbe5(0x30e),_0x208008);}else{const _0x208861=_0x23e1d6[0x0][_0x4ebbe5(0x2f9)];if(pid[_0x208861])pid[_0x208861]['send']({'function':_0x4ebbe5(0x32c),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x538fda=>{const _0x209a8d=_0x1fcd91,_0x324ab4=_0x538fda[_0x209a8d(0x1ad)][0x1];_0x538fda[_0x209a8d(0x175)]();if(pid[_0x324ab4])pid[_0x324ab4][_0x209a8d(0x256)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x1fcd91(0x30d)]('portfolio',async _0x1960f5=>{const _0x4a33e3=_0x1fcd91,_0x16a718=getEnabledBots();if(_0x16a718[_0x4a33e3(0x20a)]==0x0)await sendTelegram(_0x1960f5[_0x4a33e3(0x286)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x16a718['length']>0x1){let _0x333561=[],_0x55b768=[];const _0x1b7289=_0x16a718[_0x4a33e3(0x20a)]%0x4==0x0||_0x16a718[_0x4a33e3(0x20a)]%0x4==0x3||_0x16a718['length']%0x3==0x1?0x4:0x3;let _0x1e8609=0x0;_0x16a718['forEach']((_0x44ac31,_0x4e1d57)=>{const _0x329b44=_0x4a33e3;if(_0x4e1d57%_0x1b7289==0x0)_0x55b768=[];_0x55b768['push'](Markup[_0x329b44(0x1fe)][_0x329b44(0x337)](_0x329b44(0x276)+_0x44ac31[_0x329b44(0x2f9)],_0x329b44(0x218)+_0x44ac31[_0x329b44(0x2f9)])),_0x4e1d57%_0x1b7289==0x0&&(_0x333561[_0x1e8609]=_0x55b768,_0x1e8609++);});const _0x29aeed=Markup[_0x4a33e3(0x1f8)](_0x333561);_0x1960f5[_0x4a33e3(0x324)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x29aeed);}else{const _0x24a941=_0x16a718[0x0]['botID'];if(pid[_0x24a941])pid[_0x24a941]['send']({'function':_0x4a33e3(0x29f),'args':null});}}}),tgBot[_0x1fcd91(0x2f1)](/portfolio_(.+)/,async _0x4aa994=>{const _0x3376fb=_0x1fcd91,_0xd3c9b1=_0x4aa994[_0x3376fb(0x1ad)][0x1];_0x4aa994[_0x3376fb(0x175)]();if(pid[_0xd3c9b1])pid[_0xd3c9b1][_0x3376fb(0x256)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x28d),async _0x345ce1=>{const _0x2b1498=_0x1fcd91;await getMessages();if(!updateAvailable)await sendTelegram(_0x345ce1[_0x2b1498(0x286)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x345ce1[_0x2b1498(0x286)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x54e6b7=Markup[_0x2b1498(0x1f8)]([Markup['button'][_0x2b1498(0x337)]('Yes','update_yes'),Markup[_0x2b1498(0x1fe)][_0x2b1498(0x337)]('No',_0x2b1498(0x1c9))]);_0x345ce1[_0x2b1498(0x324)](_0x2b1498(0x2ee),_0x54e6b7);}}}),tgBot[_0x1fcd91(0x2f1)](/update_(.+)/,async _0x5de579=>{const _0x21c33c=_0x1fcd91,_0x125176=_0x5de579[_0x21c33c(0x1ad)][0x1];_0x5de579[_0x21c33c(0x175)](),_0x125176==_0x21c33c(0x2f2)&&(await sendTelegram(_0x5de579[_0x21c33c(0x286)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB('update')),_0x125176=='no'&&await sendTelegram(_0x5de579[_0x21c33c(0x286)]['id'],_0x21c33c(0x17f));}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x292),async _0x2da821=>{const _0x47ce7b=_0x1fcd91;if(!validInstallation)await sendTelegram(_0x2da821['chat']['id'],_0x47ce7b(0x157));else{const _0x3bd48d=Markup['inlineKeyboard']([Markup[_0x47ce7b(0x1fe)][_0x47ce7b(0x337)](_0x47ce7b(0x1e9),_0x47ce7b(0x214)),Markup['button'][_0x47ce7b(0x337)]('No',_0x47ce7b(0x27b))]);_0x2da821[_0x47ce7b(0x324)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x3bd48d);}}),tgBot['action'](/reinstall_(.+)/,async _0x1824da=>{const _0x51a8bb=_0x1fcd91,_0x32f0a8=_0x1824da[_0x51a8bb(0x1ad)][0x1];_0x1824da['editMessageReplyMarkup'](),_0x32f0a8=='yes'&&(await sendTelegram(_0x1824da[_0x51a8bb(0x286)]['id'],_0x51a8bb(0x229)),updateBB('reinstall')),_0x32f0a8=='no'&&await sendTelegram(_0x1824da['chat']['id'],_0x51a8bb(0x270));}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x285),async _0x467cb0=>{const _0x5002ba=_0x1fcd91,_0x4987e3=getBotsWithMode();if(_0x4987e3[_0x5002ba(0x20a)]==0x0)await sendTelegram(_0x467cb0[_0x5002ba(0x286)]['id'],_0x5002ba(0x1ca));else{let _0xe341d=[],_0x4d2839=[];const _0x27b0dc=0x2;let _0x223b88=0x0;_0x4987e3['forEach']((_0x34ca2d,_0xfd333)=>{const _0x107991=_0x5002ba;if(_0xfd333%_0x27b0dc==0x0)_0x4d2839=[];_0x4d2839[_0x107991(0x18e)](Markup[_0x107991(0x1fe)]['callback'](_0x107991(0x276)+_0x34ca2d[_0x107991(0x2f9)]+'\x20('+_0x34ca2d[_0x107991(0x320)]+')','toggle_'+_0x34ca2d[_0x107991(0x2f9)])),_0xfd333%_0x27b0dc==0x0&&(_0xe341d[_0x223b88]=_0x4d2839,_0x223b88++);});const _0x35194c=Markup[_0x5002ba(0x1f8)](_0xe341d);_0x467cb0['reply'](_0x5002ba(0x322),_0x35194c);}}),tgBot[_0x1fcd91(0x2f1)](/toggle_(.+)/,async _0x331dd4=>{const _0x40a847=_0x1fcd91,_0x271a01=_0x331dd4['match'][0x1];_0x331dd4[_0x40a847(0x175)]();const _0x8e1bed=getBotsWithMode(),_0x1d4f51=_0x8e1bed['find'](_0x378429=>_0x378429[_0x40a847(0x2f9)]==_0x271a01),_0x3278de=_0x1d4f51[_0x40a847(0x320)]==_0x40a847(0x2ca)?_0x40a847(0x1f7):'auto';await sendTelegram(_0x331dd4['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x271a01+_0x40a847(0x313)+_0x3278de+'\x20mode'),toggleBotMode(_0x271a01);}),tgBot[_0x1fcd91(0x30d)](_0x1fcd91(0x171),async _0x5116a4=>{const _0x1d7c34=_0x1fcd91;let _0x472b24='';config[_0x1d7c34(0x14d)](_0x406417=>{const _0x2899fe=_0x1d7c34;_0x472b24+='Bot\x20'+_0x406417[_0x2899fe(0x2f9)]+':\x20'+_0x406417['botname']+'\x0a';}),await sendTelegram(_0x5116a4[_0x1d7c34(0x286)]['id'],_0x472b24,{'parse_mode':'HTML'});}),tgBot['command'](_0x1fcd91(0x340),async _0x1f87ca=>{const _0x33e1fe=_0x1fcd91;await sendTelegram(_0x1f87ca[_0x33e1fe(0x286)]['id'],_0x5a65da);}),process['once'](_0x1fcd91(0x1da),()=>tgBot[_0x1fcd91(0x278)](_0x1fcd91(0x1da))),process[_0x1fcd91(0x1ac)]('SIGTERM',()=>tgBot[_0x1fcd91(0x278)]('SIGTERM')),tgBot[_0x1fcd91(0x239)]();}}function disableTelegram(){const _0x3fffa4=_0x68082f;tgBot&&tgBot[_0x3fffa4(0x278)]();}async function sendTelegram(_0x3330c2,_0x5343c6,_0x36d360){const _0x421905=_0x68082f;_0x36d360={..._0x36d360,'disable_web_page_preview':!![]};try{await tgBot[_0x421905(0x24b)][_0x421905(0x2e7)](_0x3330c2,_0x5343c6,_0x36d360);}catch(_0x4ad462){console['log']('Telegram\x20error:',_0x4ad462);}}async function sendTelegramBot(_0x4206b7,_0xaedaf8){const _0x58e53a=_0x68082f;if(settings[_0x58e53a(0x336)]){if(settings[_0x58e53a(0x211)]==_0x58e53a(0x167)||(_0xaedaf8[_0x58e53a(0x308)]=='error'||_0xaedaf8[_0x58e53a(0x308)]=='warning'||_0xaedaf8['type']==_0x58e53a(0x1fd))&&settings[_0x58e53a(0x211)]==_0x58e53a(0x277)||_0xaedaf8['type']==_0x58e53a(0x19d)&&settings[_0x58e53a(0x211)]==_0x58e53a(0x23c)){if(tgBot&&settings[_0x58e53a(0x282)]){if(_0xaedaf8[_0x58e53a(0x339)])await sendTelegram(settings['telegramChatId'],_0xaedaf8['botname']+_0x58e53a(0x233)+_0xaedaf8[_0x58e53a(0x2a8)]);else await sendTelegram(settings[_0x58e53a(0x282)],_0x58e53a(0x276)+_0x4206b7+'\x20>\x20'+_0xaedaf8[_0x58e53a(0x2a8)]);}}}}async function sendTelegramMsg(_0x129b1e,_0xe46861='HTML'){const _0x41a040=_0x68082f;return settings[_0x41a040(0x336)]&&tgBot&&settings[_0x41a040(0x282)]?(await sendTelegram(settings[_0x41a040(0x282)],_0x129b1e,{'parse_mode':_0xe46861}),!![]):![];}function getDeviceWithIp(_0x18be3c){return devices['find'](_0x25eb39=>_0x25eb39['ip']===_0x18be3c);}async function temporaryAccess2FA(_0x46743e,_0x20f42b){const _0x30b05c=_0x68082f;let _0x2fbc1c=new Date(),_0x490a72=![];if(lastIpApproval){if(_0x2fbc1c-lastIpApproval<0x1388)_0x490a72=!![];}lastIpApproval=new Date();if(_0x490a72)return;if(tgBot&&settings[_0x30b05c(0x282)]){const _0xaf63df=uuidRandom();tmpStorage[_0xaf63df]={'uuid':_0x46743e,'externalip':_0x20f42b};const _0x5bf5cb=Markup[_0x30b05c(0x1f8)]([Markup[_0x30b05c(0x1fe)][_0x30b05c(0x337)](_0x30b05c(0x24c),_0x30b05c(0x2ab)+_0xaf63df),Markup['button'][_0x30b05c(0x337)](_0x30b05c(0x249),_0x30b05c(0x188)+_0xaf63df),Markup[_0x30b05c(0x1fe)][_0x30b05c(0x337)]('30\x20min',_0x30b05c(0x2c1)+_0xaf63df),Markup['button'][_0x30b05c(0x337)](_0x30b05c(0x1b6),_0x30b05c(0x19f)+_0xaf63df)]);await sendTelegram(settings['telegramChatId'],_0x30b05c(0x288)+normalizeIP(_0x20f42b)[_0x30b05c(0x25c)]+'\x20?',_0x5bf5cb),tgBot[_0x30b05c(0x2f1)](/tempaccess_(.+)_(.+)/,async _0x5dd1ac=>{const _0x14d374=_0x30b05c,_0x540a60=_0x5dd1ac[_0x14d374(0x1ad)][0x1],_0x56c3e8=_0x5dd1ac[_0x14d374(0x1ad)][0x2],{uuid:_0x53ba25,externalip:_0x4a41f5}=tmpStorage[_0x56c3e8];delete tmpStorage[_0x56c3e8],_0x5dd1ac[_0x14d374(0x175)](),devices[_0x53ba25][_0x14d374(0x2da)]={'clientip':_0x4a41f5,'timestamp':new Date()['getTime'](),'expiry':_0x540a60},_0x540a60!=_0x14d374(0x1b6)?(await sendTelegram(_0x5dd1ac['chat']['id'],_0x14d374(0x190)+_0x540a60+_0x14d374(0x1ee),{'parse_mode':'HTML'}),io['to'](_0x53ba25)[_0x14d374(0x2bc)](_0x14d374(0x2d0),{'access':{'allow':![],'reason':_0x14d374(0x279),'token':null}})):(await sendTelegram(_0x5dd1ac[_0x14d374(0x286)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x53ba25)[_0x14d374(0x2bc)](_0x14d374(0x2d0),{'access':{'allow':![],'reason':_0x14d374(0x291),'token':null}}));});}}async function loginAccess2FA(_0x510187,_0x532727){const _0x13cbd3=_0x68082f;if(tgBot&&settings['telegramChatId']){const _0x4c812b=uuidRandom();tmpStorage[_0x4c812b]={'uuid':_0x510187,'externalip':_0x532727};const _0x5ec243=Markup[_0x13cbd3(0x1f8)]([Markup[_0x13cbd3(0x1fe)]['callback'](_0x13cbd3(0x2b0),_0x13cbd3(0x151)+loginExpiry+'_'+_0x4c812b),Markup[_0x13cbd3(0x1fe)][_0x13cbd3(0x337)](_0x13cbd3(0x1b6),'login2fa_reject_'+_0x4c812b)]);await sendTelegram(settings[_0x13cbd3(0x282)],_0x13cbd3(0x2d2)+normalizeIP(_0x532727)[_0x13cbd3(0x25c)]+'\x20?',_0x5ec243),tgBot[_0x13cbd3(0x2f1)](/login2fa_(.+)_(.+)/,async _0x106318=>{const _0x51c472=_0x13cbd3,_0x104fa0=_0x106318['match'][0x1],_0xdcd739=_0x106318[_0x51c472(0x1ad)][0x2],{uuid:_0x568469,externalip:_0x20daac}=tmpStorage[_0xdcd739];delete tmpStorage[_0xdcd739],_0x106318['editMessageReplyMarkup'](),devices[_0x568469][_0x51c472(0x315)]={'clientip':_0x20daac,'timestamp':new Date()[_0x51c472(0x287)](),'expiry':_0x104fa0},_0x104fa0!=_0x51c472(0x1b6)?(await sendTelegram(_0x106318[_0x51c472(0x286)]['id'],_0x51c472(0x29a),{'parse_mode':_0x51c472(0x344)}),io['to'](_0x568469)[_0x51c472(0x2bc)]('status',{'access':{'allow':![],'reason':_0x51c472(0x279),'token':null}})):(await sendTelegram(_0x106318[_0x51c472(0x286)]['id'],'Login\x20rejected'),io['to'](_0x568469)[_0x51c472(0x2bc)](_0x51c472(0x2d0),{'access':{'allow':![],'reason':_0x51c472(0x246),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5b7f36=_0x68082f;return dbConfig['get'](_0x5b7f36(0x2e2))[_0x5b7f36(0x329)](_0x5b7f36(0x2f9))[_0x5b7f36(0x2f0)]({'status':_0x5b7f36(0x200)})[_0x5b7f36(0x2c6)]()||[];}function getDisabledBots(){const _0x3fecaf=_0x68082f;return dbConfig['get'](_0x3fecaf(0x2e2))[_0x3fecaf(0x329)](_0x3fecaf(0x2f9))[_0x3fecaf(0x2f0)]({'status':'disabled'})[_0x3fecaf(0x2c6)]()||[];}function getBotAttributes(_0x3d68b0){const _0x1f1544=_0x68082f;let _0x5a8a0b={};const _0x105e4e=configpath+'bot-'+_0x3d68b0+'-config.json',_0x4df920=fs[_0x1f1544(0x18f)](_0x105e4e);if(_0x4df920){const _0x164598=fs[_0x1f1544(0x18c)](_0x105e4e);try{const _0x1fd780=JSON[_0x1f1544(0x250)](_0x164598),_0x501a63=_0x1fd780?_0x1fd780[_0x1f1544(0x240)][0x0]['headless']:![];_0x5a8a0b[_0x1f1544(0x320)]=_0x501a63?_0x1f1544(0x2ca):_0x1f1544(0x1f7),_0x5a8a0b[_0x1f1544(0x22a)]=_0x1fd780?_0x1fd780[_0x1f1544(0x240)][0x0][_0x1f1544(0x22a)]:_0x1f1544(0x276)+_0x3d68b0;}catch(_0x1b9b91){_0x5a8a0b['mode']='manual',_0x5a8a0b[_0x1f1544(0x22a)]=_0x1f1544(0x276)+_0x3d68b0;}}else _0x5a8a0b[_0x1f1544(0x320)]='manual',_0x5a8a0b['botname']='Bot\x20'+_0x3d68b0;return _0x5a8a0b;}function getBotsWithMode(){const _0x450677=_0x68082f,_0x864b15=dbConfig[_0x450677(0x187)](_0x450677(0x2e2))[_0x450677(0x329)](_0x450677(0x2f9))[_0x450677(0x2c6)]()||[];return _0x864b15['forEach'](_0x28850c=>{const _0x1d8302=_0x450677;let _0x46a349=getBotAttributes(_0x28850c[_0x1d8302(0x2f9)]);_0x28850c[_0x1d8302(0x320)]=_0x46a349[_0x1d8302(0x320)];}),_0x864b15;}function _0x430c(){const _0x465ff5=['storeFiat','cloneDeep','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','statSync','login\x20required','/:bot','Network\x20Interfaces:','find','/:bot/support','store-configuration','getDate','debug','notification','endsWith','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','simple','confirm-message','1507RNuAzp','replace','lastmsgtelegram','Bot\x20','alerts','stop','reload','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','reinstall_no','pidRefreshToken','-config.json','Enabled\x20Bot\x20',')\x20|\x20Bot\x20','axios','headless','telegramChatId','restart','/:bot/performance','toggle','chat','getTime','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','config','environment','Unauthorized\x20attempt\x20to\x20confirm\x20message','Ok,\x20will\x20send\x20alert\x20notifications\x20only','update','handshake','fork','telegramToken','temporary\x20access\x20rejected','reinstall','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','data','metrics_','text','username','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/on\x20-\x20start\x20bot(s)\x0a','Login\x20accepted','\x20|\x20user:\x20...','Restore\x20process\x20aborted','logged\x20out','path','sendPortfolioTelegram','lowdb/adapters/FileSync','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/help\x20-\x20show\x20available\x20commands\x0a','Logged\x20in\x20user\x20...','publicKey','express','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','output-003.log','event','max','date-fns','tempaccess_5_','storeHeadless','child_process','bb/','telegraf','accept','/metrics\x20-\x20show\x20bot\x20performance\x0a','(((.+)+)+)+$','\x20|\x20','store','/:bot/coins','ipv6','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Starting\x20#RED#Balance\x20Bot\x20v','write','getHours','node-zip','emit','disconnect','/upload-backup','Invalid\x20username\x20or\x20IP\x20address','#RES#\x20if\x20running\x20on\x20server','tempaccess_30_','update-bb','exp','unlinkSync','lastmsgemitted','value','/start','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','get-starting-balances','auto','_data','https://api.ipify.org?format=json','2FA\x20login\x20token\x20generated','map','<b>Balance\x20Bot\x20Status:</b>\x0a','status','on_','Allow\x20login\x20from\x20IP\x20address\x20','place-order','message',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','27238hmONiI','copyFileSync','delete-bot','Backup\x20file\x20uploaded','telegramIpApproval','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','loginRequired','zip/','privateKey','bbvNew','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','bbUsername','bots','Unauthorized\x20attempt\x20to\x20delete\x20alerts','\x1b[36m','Logged\x20out\x20user\x20...','Invalid\x20authentication\x20token\x20(1)','sendMessage','resetpw_yes','Unauthorized\x20attempt\x20to\x20download\x20','test','User\x20has\x20been\x20validated','request','output-000.log','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','apiSecret','filter','action','yes','mtime','hashSync','getMinutes','Password\x20has\x20been\x20reset\x20to:\x20','No\x20authentication\x20token','lowdb','botID','from','exit','getStartingBalances','temporary\x20access\x20timeout','SIGTERM','bbvReceive','padStart','slice','#RES#\x20if\x20running\x20locally\x0a','hasOwnProperty','sign','/enable\x20-\x20enable\x20notifications\x0a','sockets','restore-backup-file','type','-performance.json','temporary\x20token\x20generated','isDirectory','/disable\x20-\x20disable\x20notifications\x0a','command','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','mkdirSync','Unauthorized\x20attempt\x20to\x20store\x20configuration','/status\x20-\x20show\x20bot(s)\x20status\x0a','version.json','\x20to\x20','conn','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','secure','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','close','Telegraf\x20error:','Starting\x20(','started','kind','DEFLATE','Crypt','mode','env','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','hex','reply','Notifications\x20disabled\x0a','backup/','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','166794xfCIrp','sortBy','track','address','sendMetricsTelegram','listen','settings.','temporary\x20access\x20not\x20allowed','whitelistEnabled','cancelLoading','reason','/restart\x20-\x20restart\x20bot(s)\x0a','All','1000','telegramEnabled','callback','string','showname','0.0.0','search','assign','userid','log','-events.json','help','config_all','3000','update-bot','HTML','All\x20bots\x20running\x20right\x20now','family','versions','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','backup-full','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','forEach','150550NwMueC','placeOrder','-results.json','login2fa_','[ip-address]','build2','f2aRequired','delete-alerts','Unauthorized\x20attempt\x20to\x20delete\x20bot','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','format','number','socket','removeAllListeners','name','Unauthorized\x20attempt\x20to\x20show\x20configuration','generateKeyPairAsync','File\x20uploaded','connection','full','binary','resetHistory','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Node.js\x20v','181096aFwtHs','all','bbPassword','disable','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','telegramUsername','backupfile','getFullYear','config_alerts','botmanager','login\x20token\x20valid','names','createWriteStream','post','Setting\x20access:\x20','editMessageReplyMarkup','Token\x20blacklisted','2FA','reset-password','sendFile','size','util','\x20|\x20client:\x20...','startsWith','cancel-loading','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','invalid\x20credentials','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','argv','verify','127.0.0.1','graphql-request','latestversion','get','tempaccess_15_','uncaughtException','Restoring\x20bot(s)\x20from\x20backup','encryptedUuid','readFileSync','Notifications\x20disabled','push','existsSync','Access\x20enabled\x20for\x20','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','exchange','sort','stopped','/:bot/portfolio','uuid-random','use','RSA-OAEP','Password\x20reset\x20rejected','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','expiry','10060911FjwaWu','order','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','tempaccess_reject_','logs/','stringify','2FA\x20login\x20required','function','\x1b[0m','apiPassword','download','Notifications\x20enabled\x0a','updatebotmanager','http','blacklist','You\x20can\x20use\x20the\x20following\x20commands:\x0a','once','match','uuid','toggleBotMode','private','Disabled\x20Bot\x20','backup','exec','2FA\x20required','rmSync','reject','login','3085808NvFrsf','Error\x20removing\x20old\x20backup\x20files:','access\x20timeout','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20attempt\x20to\x20log\x20out','IPv4','reset-history','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','messages','storeConfiguration','new-disabled','login\x20not\x20required','connected','remove','backup-files','\x20(1)','<b>Telegram\x20Bot\x20Status:</b>\x0a','update_no','No\x20bots\x20running\x20right\x20now','access','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','enable',',\x20must\x20be\x20a\x204\x20digit\x20number','/:bot/history','error','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','allow','Unauthorized\x20attempt\x20to\x20update\x20settings','timestamp','server','65SVsTAr','api-eu.mixpanel.com','secret','SIGINT','onepagemode','=>\x20Go\x20to\x20#CYA#http://','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','\x1b[31m','params','Error\x20while\x20deleting\x20config\x20files:\x20','RSA','file','headers','bb-settings.json','bcryptjs','disabled','live','decrypt','Yes','apiKey','*$1*','whitelist','bb-config.json','\x20minutes','host','new','tkn','token','index.html','telegrammsg','settings','\x20(2)','manual','inlineKeyboard','.zip','get-logs','185FfEZWB','Bot\x20Mgr\x20>\x20','success','button','build','enabled','writeFileSync','Unauthorized\x20attempt\x20to\x20get\x20events','kill','/download/:type','/names\x20-\x20show\x20bot\x20names\x0a','************','login\x20token\x20generated','getSeconds','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','length','Backup\x20file\x20unzipped\x20and\x20stored','toIPv4MappedAddress','pidExpireLogin','4063236ERKdGm','catch','args','telegramEvents','output-001.log','::1','reinstall_yes','reinstall-bb','logout','resetpw_no','portfolio_','Restore\x20backup\x20file\x20','***','backup-full@','files','temp/','Markdown','crypto','keys','Deleted\x20Bot\x20','referer','timeshift','deleteHistoryAlerts','store-headless','hybrid-crypto-js','split','showConfig','Starting\x20Balance\x20Bot\x20reinstallation','botname','Unauthorized\x20attempt\x20to\x20update\x20bot','config/','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','bot-','static','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','-----------------------------------------------------------------------------------','\x20>\x20','clients','clientip','readdirSync','emitHistory','internal','launch','running','defaults','orders','constructor','Session\x20expired\x20for\x20user\x20...','remoteAddress','bot','then','start','Starting\x20new\x20bot\x20|\x20Bot\x20','port','any','2FA\x20login\x20rejected','Notifications\x20types:\x20','store-fiat','15\x20min','metrics','telegram','5\x20min','Restarting\x20Bot\x20','::ffff:127.0.0.1','join','parse','randomFillSync','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','randomBytes','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','set','send','All\x20bots','config_orders','express-fileupload','restore_no_','toString','show','ipaddr.js','Invalid\x20IP\x20address','99bcZGIp','Orders','getMonth'];_0x430c=function(){return _0x465ff5;};return _0x430c();}function getBotExchanges(){const _0x2e5c65=_0x68082f;let _0x174ec1=[];const _0x329e5a=dbConfig[_0x2e5c65(0x187)](_0x2e5c65(0x2e2))[_0x2e5c65(0x329)](_0x2e5c65(0x2f9))[_0x2e5c65(0x2c6)]()||[];_0x329e5a[_0x2e5c65(0x14d)](_0x11898c=>{const _0x471730=_0x2e5c65;if(_0x11898c['status']==_0x471730(0x200)){const _0x44d040=configpath+_0x471730(0x22f)+_0x11898c[_0x471730(0x2f9)]+'-config.json',_0x48e54f=fs[_0x471730(0x18f)](_0x44d040);let _0x1414d4;if(_0x48e54f){const _0x57d4ce=fs[_0x471730(0x18c)](_0x44d040);try{const _0x5df042=JSON[_0x471730(0x250)](_0x57d4ce);_0x1414d4=_0x5df042?_0x5df042[_0x471730(0x240)][0x0][_0x471730(0x192)]:null;}catch(_0x273c1a){}}if(_0x1414d4)_0x174ec1[_0x471730(0x18e)](_0x1414d4);}});const _0xb39797=[...new Set(_0x174ec1)]['sort']();return _0xb39797;}async function initUser(){if(!settings['userid']){const _0x1312df=uuidRandom();mixpanel['alias'](_0x1312df),updateSetting('userid',_0x1312df);}}async function initSecure(){const _0x3a30d9=_0x68082f;let _0x49a300=getSecure();if(!_0x49a300[_0x3a30d9(0x303)](_0x3a30d9(0x1d9))){let _0x39f3ca=await generateKeys();_0x49a300[_0x3a30d9(0x2a4)]=_0x39f3ca[_0x3a30d9(0x2a4)],_0x49a300[_0x3a30d9(0x2de)]=_0x39f3ca[_0x3a30d9(0x2de)],_0x49a300['secret']=crypto[_0x3a30d9(0x253)](0x20)['toString'](_0x3a30d9(0x323));;storeSecure(_0x49a300);}}function getSettings(){const _0x478350=_0x68082f;return dbSettings[_0x478350(0x187)](_0x478350(0x1f5))[_0x478350(0x2c6)]()||{};}function getSecure(){const _0x3e4f66=_0x68082f;return dbSecure['get'](_0x3e4f66(0x317))[_0x3e4f66(0x2c6)]()||{};}function getBlacklist(){const _0x1c7536=_0x68082f;return dbSecure[_0x1c7536(0x187)]('blacklist')[_0x1c7536(0x2c6)]()||[];}function broadcastToBots(_0x1f535c,_0x167d4f){const _0xd78f9a=_0x68082f;config[_0xd78f9a(0x14d)](_0x411e90=>{const _0x3bbc78=_0xd78f9a;if(_0x411e90[_0x3bbc78(0x2d0)]==_0x3bbc78(0x200)&&_0x411e90[_0x3bbc78(0x1e7)]==_0x3bbc78(0x23a)||_0x411e90[_0x3bbc78(0x2d0)]==_0x3bbc78(0x1f0)&&_0x411e90[_0x3bbc78(0x1e7)]=='running'){if(pid[_0x411e90['botID']])pid[_0x411e90[_0x3bbc78(0x2f9)]][_0x3bbc78(0x256)]({[_0x1f535c]:_0x167d4f});}});}function storeSettings(_0x4bccf2,_0x2b5daa=![]){const _0x476f73=_0x68082f;_0x4bccf2={...settings,..._0x4bccf2};if(_0x2b5daa&&_0x4bccf2[_0x476f73(0x168)]!=_0x476f73(0x206)&&_0x4bccf2[_0x476f73(0x168)]!=_0x476f73(0x21a)&&_0x4bccf2['bbPassword']!=''){const _0x456696=crypt[_0x476f73(0x1e8)](secure[_0x476f73(0x2de)],_0x4bccf2[_0x476f73(0x168)])[_0x476f73(0x2d4)][_0x476f73(0x227)]('@')[0x0],_0x3489c6=bcrypt[_0x476f73(0x2f4)](_0x456696,saltRounds);_0x4bccf2={..._0x4bccf2,'bbPassword':_0x3489c6};}if(_0x2b5daa&&_0x4bccf2[_0x476f73(0x290)]!=_0x476f73(0x206)&&_0x4bccf2[_0x476f73(0x290)]!=_0x476f73(0x21a)&&_0x4bccf2[_0x476f73(0x290)]!=''){const _0xcd7e6f=crypt[_0x476f73(0x1e8)](secure[_0x476f73(0x2de)],_0x4bccf2['telegramToken'])['message']['split']('@')[0x0];_0x4bccf2={..._0x4bccf2,'telegramToken':_0xcd7e6f};}const _0x456e69=_0x4bccf2[_0x476f73(0x290)]!=_0x476f73(0x206)&&_0x4bccf2[_0x476f73(0x290)]!=settings['telegramToken']||_0x4bccf2[_0x476f73(0x16b)]!=settings[_0x476f73(0x16b)],_0x358025=_0x4bccf2[_0x476f73(0x290)]==''||_0x4bccf2[_0x476f73(0x16b)]=='';_0x456e69&&(_0x4bccf2[_0x476f73(0x282)]=null,_0x4bccf2['telegramEvents']=_0x476f73(0x167));for(const [_0x5d15bc,_0x37a232]of Object['entries'](_0x4bccf2)){if(_0x5d15bc==_0x476f73(0x290)&&_0x37a232==_0x476f73(0x206)){_0x4bccf2[_0x476f73(0x290)]=settings['telegramToken'];continue;};if(_0x5d15bc==_0x476f73(0x168)&&_0x37a232==_0x476f73(0x206)){_0x4bccf2[_0x476f73(0x168)]=settings[_0x476f73(0x168)];continue;};dbSettings[_0x476f73(0x255)](_0x476f73(0x32e)+_0x5d15bc,_0x37a232)[_0x476f73(0x2b9)]();}settings=_0x4bccf2,io['to'](_0x476f73(0x16f))[_0x476f73(0x2bc)](_0x476f73(0x1f5),cleanSettings()),broadcastToBots(_0x476f73(0x223),settings[_0x476f73(0x223)]),broadcastToBots(_0x476f73(0x1db),settings[_0x476f73(0x1db)]);if(_0x456e69&&!_0x358025)initTelegram();if(_0x456e69&&_0x358025)disableTelegram();getAllClients()[_0x476f73(0x14d)](_0x178d6c=>{const _0x5085e2=_0x476f73;getSocket(_0x178d6c['id'])[_0x5085e2(0x2bc)](_0x5085e2(0x2d0),{'access':{'allow':![],'reason':_0x5085e2(0x279),'token':null}});});}function updateSetting(_0x1816a9,_0x465515){const _0x5a0a86=_0x68082f;dbSettings[_0x5a0a86(0x255)](_0x5a0a86(0x32e)+_0x1816a9,_0x465515)['write'](),settings=getSettings(),io['to'](_0x5a0a86(0x16f))[_0x5a0a86(0x2bc)](_0x5a0a86(0x1f5),cleanSettings());}function storeSecure(_0x497930){const _0x182545=_0x68082f;dbSecure[_0x182545(0x187)](_0x182545(0x317))[_0x182545(0x18e)](_0x497930)[_0x182545(0x2b9)](),secure=_0x497930;}function addBlacklist(_0x2311f7){const _0x21eb7f=_0x68082f;cleanBlacklist();let _0x3cb6e1;devices[_0x2311f7][_0x21eb7f(0x2da)]?_0x3cb6e1=Math[_0x21eb7f(0x2a9)](devices[_0x2311f7]['telegramIpApproval']['expiry'],loginExpiry):_0x3cb6e1=loginExpiry,dbSecure[_0x21eb7f(0x187)](_0x21eb7f(0x1aa))[_0x21eb7f(0x18e)]({'expiry':new Date()[_0x21eb7f(0x287)]()+_0x3cb6e1*0x3c*0x3e8,'token':devices[_0x2311f7][_0x21eb7f(0x1cb)][_0x21eb7f(0x1f2)]})[_0x21eb7f(0x2b9)](),blacklist=dbSecure[_0x21eb7f(0x187)](_0x21eb7f(0x1aa))['value']();}function cleanBlacklist(){const _0x2d8256=_0x68082f;let _0x5dbea7=dbSecure[_0x2d8256(0x187)](_0x2d8256(0x1aa))[_0x2d8256(0x263)]()['value'](),_0x3bdbc8=new Date()[_0x2d8256(0x287)]();_0x5dbea7[_0x2d8256(0x14d)](_0x4cfe5b=>{const _0x53dd7f=_0x2d8256;_0x4cfe5b['expiry']<_0x3bdbc8&&dbSecure[_0x53dd7f(0x187)](_0x53dd7f(0x1aa))[_0x53dd7f(0x1c5)]({'expiry':_0x4cfe5b[_0x53dd7f(0x19b)]})['write']();});}function initStates(){const _0x3a96b7=_0x68082f;let _0x5f2517=getConfiguration();_0x5f2517[_0x3a96b7(0x14d)](_0x3d6cac=>{const _0x5311bd=_0x3a96b7;_0x3d6cac['live']=_0x5311bd(0x194);}),storeConfiguration(_0x5f2517);}function onKeys(){const _0x45b33b=new RSA();return new Promise(_0x234174=>{const _0x3c2ab6=_0x4546;_0x45b33b[_0x3c2ab6(0x15e)]()[_0x3c2ab6(0x241)](_0x54bd0a=>{_0x234174(_0x54bd0a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x824d0c=_0x68082f;let _0xda642c=getSettings(),_0x36d456=![];!_0xda642c[_0x824d0c(0x303)](_0x824d0c(0x275))&&(_0xda642c[_0x824d0c(0x275)]=0x0,_0x36d456=!![]);!_0xda642c[_0x824d0c(0x303)](_0x824d0c(0x2c5))&&(_0xda642c[_0x824d0c(0x2c5)]=0x0,_0x36d456=!![]);!_0xda642c[_0x824d0c(0x303)](_0x824d0c(0x186))&&(_0xda642c[_0x824d0c(0x186)]='0.0.0',_0x36d456=!![]);!_0xda642c[_0x824d0c(0x303)]('onepagemode')&&(_0xda642c[_0x824d0c(0x1db)]=![],_0x36d456=!![]);if(_0x36d456)storeSettings(_0xda642c);try{fs[_0x824d0c(0x236)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0xb820a4=>{const _0x11a6ea=_0x824d0c;if(!_0xb820a4[_0x11a6ea(0x30b)]()){if(!_0xb820a4[_0x11a6ea(0x15c)][_0x11a6ea(0x17d)](_0x11a6ea(0x21b)))fs[_0x11a6ea(0x2c4)](configbackuppath+_0xb820a4[_0x11a6ea(0x15c)]);}else fs['rmSync'](configbackuppath+_0xb820a4['name'],{'recursive':!![]});});}catch(_0x4d50a3){logger[_0x824d0c(0x26d)](_0x824d0c(0x1b9),_0x4d50a3);}}function storeConfiguration(_0x1f590e){const _0x3824bb=_0x68082f;dbConfig['get'](_0x3824bb(0x2e2))[_0x3824bb(0x1c5)]()[_0x3824bb(0x2b9)](),dbConfig[_0x3824bb(0x187)](_0x3824bb(0x2e2))[_0x3824bb(0x18e)](..._0x1f590e)[_0x3824bb(0x2b9)](),config=_0x1f590e;}async function resetPassword(){const _0x5cd8cf=_0x68082f;if(tgBot&&settings['telegramChatId']){const _0x14d8ce=Markup['inlineKeyboard']([Markup['button']['callback'](_0x5cd8cf(0x2f2),_0x5cd8cf(0x2e8)),Markup['button'][_0x5cd8cf(0x337)]('no',_0x5cd8cf(0x217))]);await sendTelegram(settings[_0x5cd8cf(0x282)],_0x5cd8cf(0x1bf),_0x14d8ce),tgBot[_0x5cd8cf(0x2f1)](/resetpw_(.+)/,async _0x5e4bb0=>{const _0xd97833=_0x5cd8cf,_0x429ffb=_0x5e4bb0['match'][0x1];_0x5e4bb0['editMessageReplyMarkup']();if(_0x429ffb!='no'){const _0x17ce10=0xf,_0x3d6290=_0xd97833(0x14c),_0x5abad7=Array[_0xd97833(0x2fa)](crypto[_0xd97833(0x251)](new Uint32Array(_0x17ce10)))[_0xd97833(0x2ce)](_0x59e480=>_0x3d6290[_0x59e480%_0x3d6290[_0xd97833(0x20a)]])[_0xd97833(0x24f)](''),_0xea6500=bcrypt[_0xd97833(0x2f4)](_0x5abad7,saltRounds);storeSettings({'bbPassword':_0xea6500}),await sendTelegram(_0x5e4bb0[_0xd97833(0x286)]['id'],_0xd97833(0x2f6)+_0x5abad7,{'parse_mode':_0xd97833(0x344)});}else await sendTelegram(_0x5e4bb0['chat']['id'],_0xd97833(0x199));});}}async function confirmRestore(_0x4202dd,_0x347dd6){const _0x25cd79=_0x68082f;io['to'](_0x25cd79(0x16f))[_0x25cd79(0x2bc)](_0x25cd79(0x26e),_0x25cd79(0x191),_0x25cd79(0x1fd));if(tgBot&&settings['telegramChatId']){const _0x449855=uuidRandom();tmpStorage[_0x449855]={'path':_0x4202dd,'filename':_0x347dd6};const _0x3b3c78=Markup['inlineKeyboard']([Markup[_0x25cd79(0x1fe)][_0x25cd79(0x337)](_0x25cd79(0x2f2),'restore_yes_'+_0x449855),Markup[_0x25cd79(0x1fe)][_0x25cd79(0x337)]('no',_0x25cd79(0x25a)+_0x449855)]);await sendTelegram(settings[_0x25cd79(0x282)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x3b3c78),tgBot[_0x25cd79(0x2f1)](/restore_(.+)_(.+)/,async _0x455be7=>{const _0x4bb5da=_0x25cd79,_0x3240cd=_0x455be7[_0x4bb5da(0x1ad)][0x1],_0x26f957=_0x455be7['match'][0x2],{path:_0x3c2c10,filename:_0x310203}=tmpStorage[_0x26f957];delete tmpStorage[_0x26f957],_0x455be7[_0x4bb5da(0x175)](),_0x3240cd==_0x4bb5da(0x2f2)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x455be7[_0x4bb5da(0x286)]['id'],_0x4bb5da(0x18a),{'parse_mode':'HTML'}),unzipFile(_0x3c2c10,_0x310203)):(logger['debug'](_0x4bb5da(0x29c)),await sendTelegram(_0x455be7[_0x4bb5da(0x286)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x3314c2=_0x68082f,_0x231d5d=new Date();return _0x231d5d[_0x3314c2(0x16d)]()+'/'+(_0x231d5d[_0x3314c2(0x261)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x231d5d[_0x3314c2(0x26c)]()[_0x3314c2(0x25b)]()[_0x3314c2(0x300)](0x2,'0')+'\x20'+_0x231d5d['getHours']()[_0x3314c2(0x25b)]()[_0x3314c2(0x300)](0x2,'0')+':'+_0x231d5d[_0x3314c2(0x2f5)]()[_0x3314c2(0x25b)]()[_0x3314c2(0x300)](0x2,'0')+':'+_0x231d5d[_0x3314c2(0x208)]()[_0x3314c2(0x25b)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2c788e=_0x68082f,_0xf0a1ff=shiftedTime();return _0xf0a1ff[_0x2c788e(0x16d)]()+'/'+(_0xf0a1ff['getMonth']()+0x1)[_0x2c788e(0x25b)]()[_0x2c788e(0x300)](0x2,'0')+'/'+_0xf0a1ff[_0x2c788e(0x26c)]()['toString']()[_0x2c788e(0x300)](0x2,'0')+'\x20'+_0xf0a1ff[_0x2c788e(0x2ba)]()[_0x2c788e(0x25b)]()[_0x2c788e(0x300)](0x2,'0')+':'+_0xf0a1ff[_0x2c788e(0x2f5)]()[_0x2c788e(0x25b)]()[_0x2c788e(0x300)](0x2,'0')+':'+_0xf0a1ff['getSeconds']()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x2faca6=_0x68082f,_0x5501ee=shiftedTime();return _0x5501ee[_0x2faca6(0x16d)]()+(_0x5501ee[_0x2faca6(0x261)]()+0x1)[_0x2faca6(0x25b)]()[_0x2faca6(0x300)](0x2,'0')+_0x5501ee[_0x2faca6(0x26c)]()[_0x2faca6(0x25b)]()[_0x2faca6(0x300)](0x2,'0')+'-'+_0x5501ee[_0x2faca6(0x2ba)]()[_0x2faca6(0x25b)]()[_0x2faca6(0x300)](0x2,'0')+_0x5501ee['getMinutes']()[_0x2faca6(0x25b)]()[_0x2faca6(0x300)](0x2,'0')+_0x5501ee[_0x2faca6(0x208)]()[_0x2faca6(0x25b)]()[_0x2faca6(0x300)](0x2,'0');}function shiftedTime(){const _0x4db539=_0x68082f,_0x3dc4c3=new Date();let _0xd01af1=_0x3dc4c3;if(settings[_0x4db539(0x223)]&&settings[_0x4db539(0x223)]!==0x0)_0xd01af1=fns['add'](_0x3dc4c3,{'hours':settings[_0x4db539(0x223)]});return _0xd01af1;}function startScheduler(){const _0x58daca=new Date()['getUTCHours'](),_0x86adb3=shiftedTime()['getHours']();_0x86adb3==0x4&&backupConfigFiles();_0x86adb3==0x0&&rotateLogFiles();_0x58daca%0x6==0x0&&triggerAnalytics();_0x58daca%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x591ba3){const _0x18a88e=_0x68082f;logger[_0x18a88e(0x26d)](_0x18a88e(0x219)+_0x591ba3);const _0xc83ae9=getBotsWithMode();_0xc83ae9[_0x18a88e(0x20a)]>0x0?confirmRestore(configbackuppath,_0x591ba3):unzipFile(configbackuppath,_0x591ba3);}async function getBackupFiles(_0x42cfff=null){const _0xf5abe0=_0x68082f;let _0x488770=[],_0x463ce8=fs[_0xf5abe0(0x236)](configbackuppath,{'withFileTypes':!![]});_0x463ce8[_0xf5abe0(0x193)]((_0x339b3e,_0x221eb5)=>_0x339b3e[_0xf5abe0(0x15c)]<_0x221eb5['name']?0x1:_0x221eb5[_0xf5abe0(0x15c)]<_0x339b3e[_0xf5abe0(0x15c)]?-0x1:0x0),_0x463ce8[_0xf5abe0(0x14d)](_0x422829=>{const _0x501b6b=_0xf5abe0;if(!_0x422829[_0x501b6b(0x30b)]()&&_0x422829[_0x501b6b(0x15c)][_0x501b6b(0x17d)](_0x501b6b(0x21b))&&_0x422829[_0x501b6b(0x15c)][_0x501b6b(0x26f)](_0x501b6b(0x1f9))){const _0x79d565=formatDate(fs[_0x501b6b(0x265)](configbackuppath+_0x422829[_0x501b6b(0x15c)])[_0x501b6b(0x2f3)]);_0x488770[_0x501b6b(0x18e)]({'name':_0x422829[_0x501b6b(0x15c)],'mtime':_0x79d565});}});if(_0x42cfff)io['to'](_0x42cfff)[_0xf5abe0(0x2bc)](_0xf5abe0(0x1c6),_0x488770);else return _0x488770;}async function backupConfigFiles(){const _0x3375c3=_0x68082f;await zipFiles(_0x3375c3(0x14b));const _0x220873=getCleanTimeStamp();fs[_0x3375c3(0x2d7)](zippath+'backup-full.zip',configbackuppath+(_0x3375c3(0x21b)+_0x220873+_0x3375c3(0x1f9)));let _0x454b66=fs[_0x3375c3(0x236)](configbackuppath,{'withFileTypes':!![]});_0x454b66[_0x3375c3(0x193)]((_0x14d6a4,_0x22beef)=>_0x14d6a4['name']<_0x22beef[_0x3375c3(0x15c)]?0x1:_0x22beef['name']<_0x14d6a4[_0x3375c3(0x15c)]?-0x1:0x0),_0x454b66['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x454b66[_0x454b66['length']-0x1]['name']);}function rotateLogFiles(){const _0x6930e5=_0x68082f,_0x1211ed=fs['statSync'](logspath+_0x6930e5(0x2ed)),_0x44429b=_0x1211ed[_0x6930e5(0x17a)]/0x400;if(_0x44429b>0x64){let _0x33df86=fs[_0x6930e5(0x236)](logspath,{'withFileTypes':!![]});_0x33df86[_0x6930e5(0x193)]((_0xe5f8f,_0xff490a)=>_0xe5f8f[_0x6930e5(0x15c)]<_0xff490a['name']?0x1:_0xff490a['name']<_0xe5f8f['name']?-0x1:0x0),_0x33df86[_0x6930e5(0x14d)](_0xef89ab=>{const _0x4d2ec4=_0x6930e5;if(_0xef89ab[_0x4d2ec4(0x15c)]=='output-002.log')fs[_0x4d2ec4(0x2d7)](logspath+_0xef89ab[_0x4d2ec4(0x15c)],logspath+_0x4d2ec4(0x2a7));if(_0xef89ab[_0x4d2ec4(0x15c)]==_0x4d2ec4(0x212))fs[_0x4d2ec4(0x2d7)](logspath+_0xef89ab[_0x4d2ec4(0x15c)],logspath+'output-002.log');_0xef89ab[_0x4d2ec4(0x15c)]==_0x4d2ec4(0x2ed)&&(fs[_0x4d2ec4(0x2d7)](logspath+_0xef89ab[_0x4d2ec4(0x15c)],logspath+'output-001.log'),fs[_0x4d2ec4(0x201)](logspath+_0xef89ab[_0x4d2ec4(0x15c)],''));});}}async function zipFiles(_0x1da3f5){const _0x377c24=_0x68082f;let _0x541198;if(_0x1da3f5=='logs')_0x541198=logspath;if(_0x1da3f5==_0x377c24(0x1b2))_0x541198=configpath;if(_0x1da3f5=='backup-full')_0x541198=configpath;let _0x46b322=fs[_0x377c24(0x236)](_0x541198,{'withFileTypes':!![]});const _0x5ec992=new require('node-zip')();_0x46b322[_0x377c24(0x14d)](_0x3515dd=>{const _0x4e8bc6=_0x377c24;if(!_0x3515dd[_0x4e8bc6(0x30b)]()){let _0x23c20d=fs[_0x4e8bc6(0x18c)](_0x541198+_0x3515dd[_0x4e8bc6(0x15c)]);if(_0x1da3f5=='backup'){const _0x657c62=/^bot-[0-9]{3}-config.json$/,_0x190ee4=_0x657c62['test'](_0x3515dd['name']);if(_0x190ee4){const _0x2c7504=JSON['parse'](_0x23c20d);if(_0x2c7504[_0x4e8bc6(0x240)][0x0]){_0x2c7504[_0x4e8bc6(0x240)][0x0][_0x4e8bc6(0x1ea)]='***',_0x2c7504['bot'][0x0][_0x4e8bc6(0x2ef)]=_0x4e8bc6(0x21a);if(_0x2c7504['bot'][0x0][_0x4e8bc6(0x1a5)])_0x2c7504[_0x4e8bc6(0x240)][0x0][_0x4e8bc6(0x1a5)]=_0x4e8bc6(0x21a);}_0x23c20d=JSON['stringify'](_0x2c7504,null,0x2);}if(_0x3515dd[_0x4e8bc6(0x15c)]==_0x4e8bc6(0x1e4)){const _0x9f7949=JSON['parse'](_0x23c20d);if(_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x2dc)])_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x2dc)]=![];if(_0x9f7949['settings'][_0x4e8bc6(0x168)])_0x9f7949['settings']['bbPassword']=_0x4e8bc6(0x21a);if(_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x290)])_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x290)]='***';if(_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x282)])_0x9f7949[_0x4e8bc6(0x1f5)][_0x4e8bc6(0x282)]=null;_0x23c20d=JSON[_0x4e8bc6(0x1a1)](_0x9f7949,null,0x2);}if(_0x3515dd[_0x4e8bc6(0x15c)]!='bb-secure.json')_0x5ec992[_0x4e8bc6(0x1e2)](_0x3515dd['name'],_0x23c20d);}else _0x5ec992[_0x4e8bc6(0x1e2)](_0x3515dd[_0x4e8bc6(0x15c)],_0x23c20d);}});const _0x45e41a=_0x5ec992['generate']({'base64':![],'compression':_0x377c24(0x31e)});fs[_0x377c24(0x201)](zippath+(_0x1da3f5+_0x377c24(0x1f9)),_0x45e41a,_0x377c24(0x162));}async function unzipFile(_0x1d10a3,_0xd93226){const _0x2a4317=_0x68082f;fs[_0x2a4317(0x236)](configpath,{'withFileTypes':!![]})[_0x2a4317(0x14d)](_0x404466=>{const _0x4faee5=_0x2a4317;if(!_0x404466[_0x4faee5(0x30b)]())fs['rmSync'](configpath+_0x404466['name']);});const _0x148c59=fs[_0x2a4317(0x18c)](_0x1d10a3+_0xd93226,'binary'),_0x3f820d=new require(_0x2a4317(0x2bb))(_0x148c59,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x3f820d[_0x2a4317(0x21c)])['forEach'](_0x5bc4fb=>{const _0x2e7f89=_0x2a4317,_0x22e2fc=_0x3f820d[_0x2e7f89(0x21c)][_0x5bc4fb];fs[_0x2e7f89(0x201)](configpath+_0x22e2fc[_0x2e7f89(0x15c)],_0x22e2fc[_0x2e7f89(0x2cb)]);}),fs[_0x2a4317(0x236)](temppath,{'withFileTypes':!![]})['forEach'](_0x514eb9=>{const _0x3672ab=_0x2a4317;if(!_0x514eb9[_0x3672ab(0x30b)]())fs[_0x3672ab(0x1b5)](temppath+_0x514eb9[_0x3672ab(0x15c)]);}),logger[_0x2a4317(0x26d)](_0x2a4317(0x20b)),process[_0x2a4317(0x256)]({'restore':!![]},_0x4cc15b=>{});}async function getPublicIp(){const _0x5a3fc6=_0x68082f;try{const _0x2bef69=await axios[_0x5a3fc6(0x187)](_0x5a3fc6(0x2cc));publicip=_0x2bef69[_0x5a3fc6(0x294)]['ip'];}catch(_0x6c5e89){}}async function triggerAnalytics(){const _0x1dabb4=_0x68082f;if(!publicip)await getPublicIp();const _0x380965=getBotsWithMode();let _0xa18dea=0x0;_0x380965[_0x1dabb4(0x14d)](_0x369561=>{const _0x26cf7c=_0x1dabb4;if(_0x369561[_0x26cf7c(0x2d0)]===_0x26cf7c(0x200))_0xa18dea++;});const _0x23c74b=getBotExchanges();mixpanel[_0x1dabb4(0x32a)]('Server',{'distinct_id':settings[_0x1dabb4(0x33d)],'ip':publicip,'version':serverversion,'numbots':_0x380965['length'],'numbotsenabled':_0xa18dea,'exchanges':_0x23c74b,'environment':environment});}async function getMessages(){const _0x3806af=_0x68082f,_0x4d2fb6=_0x3806af(0x209),_0x11732c=new GraphQLClient(_0x4d2fb6),_0x50e053={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x55af05=serverversion['split']('.'),_0x413bf7=_0x55af05[0x0]+'.'+_0x55af05[0x1],_0x258ab5=Math['min'](settings[_0x3806af(0x275)],settings[_0x3806af(0x2c5)]),_0x3b9846={'last':parseInt(_0x258ab5),'bbm':_0x413bf7},_0x50a611=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3a085e;try{_0x3a085e=await _0x11732c[_0x3806af(0x2ec)](_0x50a611,_0x3b9846,_0x50e053);}catch(_0x4ce3b6){}if(_0x3a085e&&_0x3a085e[_0x3806af(0x1c0)]){let _0x5a2460=settings[_0x3806af(0x275)];newMessages=[];for(const _0x3449de of _0x3a085e[_0x3806af(0x1c0)]){newMessages['push'](_0x3449de);let _0x53ef00=![];_0x3449de[_0x3806af(0x2df)]&&(updateSetting(_0x3806af(0x186),_0x3449de[_0x3806af(0x2df)]),_0x53ef00=isNewerVersion(serverversion,_0x3449de[_0x3806af(0x2df)])||serverversion==_0x3449de[_0x3806af(0x2df)]);if(!_0x53ef00&&_0x3449de[_0x3806af(0x159)]>_0x5a2460){if(_0x3449de['bbvReceive']===_0x3806af(0x245)||serverversion[_0x3806af(0x17d)](_0x3449de[_0x3806af(0x2ff)])){let _0x48e6ff=''+_0x3449de['title']+'\x0a\x0a'+_0x3449de[_0x3806af(0x2d4)];const _0x32b5da=await sendTelegramMsg(toTelegramMarkdown(_0x48e6ff),_0x3806af(0x21e));if(_0x32b5da)_0x5a2460=_0x3449de[_0x3806af(0x159)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x5a2460),emitMessages();}}function emitMessages(){const _0x3e5e94=_0x68082f,_0x3192d0=settings[_0x3e5e94(0x2c5)];let _0x5a3e28=[];newMessages['forEach'](_0x26ad60=>{const _0x35e379=_0x3e5e94;_0x26ad60[_0x35e379(0x159)]>_0x3192d0&&_0x5a3e28[_0x35e379(0x18e)](_0x26ad60);}),_0x5a3e28[_0x3e5e94(0x20a)]>0x0&&getAllClients()[_0x3e5e94(0x14d)](_0x3381fe=>{const _0x418e14=_0x3e5e94;getSocket(_0x3381fe['id'])[_0x418e14(0x2bc)](_0x418e14(0x2d4),_0x5a3e28);});}function confirmMessage(_0x2e8cce){const _0x4c4ed5=_0x68082f;updateSetting(_0x4c4ed5(0x2c5),Number(_0x2e8cce));}function isNewerVersion(_0xb2fe88,_0x11dbdd){const _0x55f22d=_0x68082f,_0x5c491b=_0x11dbdd[_0x55f22d(0x227)]('.'),_0x518b42=_0xb2fe88[_0x55f22d(0x227)]('.');for(var _0x5c1901=0x0;_0x5c1901<_0x518b42[_0x55f22d(0x20a)];_0x5c1901++){const _0x11ad4e=~~_0x518b42[_0x5c1901],_0x2cef47=~~_0x5c491b[_0x5c1901];if(_0x11ad4e>_0x2cef47)return!![];if(_0x11ad4e<_0x2cef47)return![];}return![];}function toTelegramMarkdown(_0x3476ff){const _0x376ecb=_0x68082f,_0x33f5d7=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x45c30c=/\*{2}(.+?)\*{2}/gim;return _0x3476ff=_0x3476ff[_0x376ecb(0x274)](_0x33f5d7,'$1_$2_$3')[_0x376ecb(0x274)](_0x45c30c,_0x376ecb(0x1eb)),_0x3476ff;}async function validateConfigFile(){const _0x38f4cb=_0x68082f,_0x1ee7ce=dbConfig['get'](_0x38f4cb(0x2e2))[_0x38f4cb(0x329)]('botID')[_0x38f4cb(0x2c6)]()||[];if(_0x1ee7ce[_0x38f4cb(0x20a)]==0x0){let _0xf58a7c=0x0,_0x463126=[];const _0x5eaf8d=/^bot-([0-9]{3})-config.json$/,_0x37e7e9=fs[_0x38f4cb(0x236)](configpath);_0x37e7e9[_0x38f4cb(0x14d)](_0x58c2ec=>{const _0x59a9df=_0x38f4cb,_0x38ab34=_0x5eaf8d[_0x59a9df(0x1b3)](_0x58c2ec);if(_0x38ab34){const _0x3f36c8=_0x38ab34[0x1];let _0x55804b=getBotAttributes(_0x3f36c8);_0x463126[_0x59a9df(0x18e)]({'botID':_0x3f36c8,'botname':_0x55804b[_0x59a9df(0x22a)],'status':_0x59a9df(0x1e6),'live':_0x59a9df(0x194)}),_0xf58a7c++;}}),_0xf58a7c!=0x0&&(dbConfig[_0x38f4cb(0x187)](_0x38f4cb(0x2e2))[_0x38f4cb(0x33c)](_0x463126)[_0x38f4cb(0x2b9)](),config=_0x463126,restoredConfigFile=_0xf58a7c);}}async function restoreConfigNotify(_0x128ad5){const _0x4ae893=_0x68082f;let _0x5bc337;if(restoredConfigFile==0x1)_0x5bc337=_0x4ae893(0x2b7);else _0x5bc337='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x128ad5)io['to'](_0x4ae893(0x16f))[_0x4ae893(0x2bc)]('notification',_0x5bc337);else{logger[_0x4ae893(0x271)]('-----------------------------------------------------------------------------------'),logger['simple'](_0x5bc337),logger[_0x4ae893(0x271)](_0x4ae893(0x232)),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings[_0x4ae893(0x211)]!=_0x4ae893(0x23c))await sendTelegram(settings[_0x4ae893(0x282)],_0x4ae893(0x1fc)+_0x5bc337);}}function validateCredentials(_0x46e0de,_0x33db04){const _0x1103eb=_0x68082f;if(_0x46e0de[_0x1103eb(0x297)]==settings[_0x1103eb(0x2e1)]&&bcrypt['compareSync'](_0x46e0de['password'],settings[_0x1103eb(0x168)])){if(settings[_0x1103eb(0x154)])return{'allow':![],'reason':_0x1103eb(0x1a2),'token':null};else{const _0x3213f4=generateLoginToken(_0x33db04);return{'allow':!![],'reason':_0x1103eb(0x207),'token':_0x3213f4};}}else return{'allow':![],'reason':_0x1103eb(0x180),'token':null};}function refreshToken(_0x47480e){const _0x474273=_0x68082f,_0x2aa9a9=generateLoginToken(_0x47480e);return{'allow':!![],'reason':_0x474273(0x207),'token':_0x2aa9a9};}function validateAccess(_0x63c94,_0x329f1f,_0xd49249){const _0x1d5d36=_0x68082f,_0x30028d=_0xd49249?_0xd49249:devices[_0x329f1f]['ip'];let _0x2cab31;const _0x128417=_0x6fcb73=>{const _0x5d5306=_0x4546;if(settings[_0x5d5306(0x2dc)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x329f1f)){const _0x40eb66=generateLoginToken(_0x329f1f);return{'allow':!![],'reason':_0x5d5306(0x2cd),'token':_0x40eb66};}else return{'allow':![],'reason':_0x5d5306(0x266),'token':null};}else return _0x2cab31=validToken(_0x6fcb73,_0x329f1f),_0x2cab31[_0x5d5306(0x303)](_0x5d5306(0x1fd))?{'allow':!![],'reason':_0x5d5306(0x170),'token':_0x6fcb73}:{'allow':![],'reason':_0x5d5306(0x266),'token':null};}else return{'allow':!![],'reason':_0x5d5306(0x1c3),'token':null};};if(settings[_0x1d5d36(0x330)]){let _0x32b652=[...settings[_0x1d5d36(0x1ec)],_0x1d5d36(0x213),_0x1d5d36(0x24e),_0x1d5d36(0x184)];if(_0x32b652['includes'](_0x30028d))return _0x128417(_0x63c94);else{_0x2cab31=validToken(_0x63c94,_0x329f1f);if(_0x2cab31['hasOwnProperty']('success'))return _0x128417(_0x63c94);else{if(telegramIpApproved(_0x329f1f)){const _0x4e6b51=generateToken(_0x329f1f);return _0x2cab31=_0x128417(_0x63c94),_0x2cab31[_0x1d5d36(0x1d3)]?{'allow':!![],'reason':_0x1d5d36(0x30a),'token':_0x4e6b51}:_0x2cab31;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x1d5d36(0x1b4),'token':null}:{'allow':![],'reason':_0x1d5d36(0x32f),'token':null};}}}else return _0x128417(_0x63c94);}function timelyDecrypt(_0x3de9aa,_0xc489ec=!![]){const _0x285eb8=_0x68082f;if(_0x3de9aa)try{const _0x379827=crypt[_0x285eb8(0x1e8)](secure['privateKey'],_0x3de9aa)['message'],_0x4e3f02=_0x379827[_0x285eb8(0x227)]('@')[0x0],_0x5a3314=_0x379827['split']('@')[0x1],_0x134b2d=new Date()[_0x285eb8(0x287)]();if(_0xc489ec){if(_0x134b2d-_0x5a3314<maxSecretAge*0x3e8)return _0x4e3f02;else return![];}else return _0x4e3f02;}catch(_0x1be045){return![];}else return![];}const validToken=(_0x245fba,_0xcf9e95)=>{const _0x10fa77=_0x68082f,_0x51cd07=devices[_0xcf9e95]['ip'];if(!_0x245fba)return{'error':_0x10fa77(0x2f7)};for(let _0x656d70 of blacklist){if(_0x656d70[_0x10fa77(0x1f2)]==_0x245fba)return{'error':_0x10fa77(0x176)};}let _0x507fb8;try{_0x507fb8=jwt[_0x10fa77(0x183)](_0x245fba,secure['secret']+_0xcf9e95);}catch{return{'error':_0x10fa77(0x2e6)};}if(!_0x507fb8[_0x10fa77(0x303)]('clientip')&&!_0x507fb8[_0x10fa77(0x303)](_0x10fa77(0x297))||!_0x507fb8['hasOwnProperty'](_0x10fa77(0x2c3)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x507fb8[_0x10fa77(0x303)](_0x10fa77(0x297))&&_0x507fb8[_0x10fa77(0x303)](_0x10fa77(0x235))){const {clientip:_0x177729}=_0x507fb8;return _0x51cd07==_0x177729?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x10fa77(0x25e)};}else{if(_0x507fb8[_0x10fa77(0x303)](_0x10fa77(0x297))&&_0x507fb8[_0x10fa77(0x303)](_0x10fa77(0x235))){const {username:_0x28f09e,clientip:_0x1574f2}=_0x507fb8;return settings[_0x10fa77(0x2e1)]==_0x28f09e&&_0x51cd07==_0x1574f2?{'success':_0x10fa77(0x2eb)}:{'error':_0x10fa77(0x2bf)};}}},generateLoginToken=_0x135e5a=>{const _0x54e92b=_0x68082f;if(_0x135e5a){const _0x35008f=devices[_0x135e5a]['ip'];return jwt[_0x54e92b(0x304)]({'username':settings[_0x54e92b(0x2e1)],'clientip':_0x35008f},secure[_0x54e92b(0x1d9)]+_0x135e5a,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x35f42b=>{const _0x2dcc6f=_0x68082f;if(_0x35f42b){const _0x4bef87=devices[_0x35f42b]['ip'];return jwt[_0x2dcc6f(0x304)]({'clientip':_0x4bef87},secure['secret']+_0x35f42b,{'expiresIn':devices[_0x35f42b]['telegramIpApproval'][_0x2dcc6f(0x19b)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x52653e=>{const _0x221504=_0x68082f;let _0x16c77d=![];return devices[_0x52653e][_0x221504(0x2da)]&&devices[_0x52653e][_0x221504(0x2da)]['expiry']!='reject'&&(_0x16c77d=devices[_0x52653e][_0x221504(0x2da)][_0x221504(0x235)]==devices[_0x52653e]['ip']&&new Date()[_0x221504(0x287)]()-devices[_0x52653e][_0x221504(0x2da)][_0x221504(0x1d5)]<devices[_0x52653e][_0x221504(0x2da)][_0x221504(0x19b)]*0x3c*0x3e8),_0x16c77d;},telegram2FaApproved=_0x188e73=>{const _0x168fa9=_0x68082f;let _0x4fe9c5=![];return devices[_0x188e73][_0x168fa9(0x315)]&&devices[_0x188e73]['telegram2FaApproval'][_0x168fa9(0x19b)]!=_0x168fa9(0x1b6)&&(_0x4fe9c5=devices[_0x188e73][_0x168fa9(0x315)][_0x168fa9(0x235)]==devices[_0x188e73]['ip']&&new Date()[_0x168fa9(0x287)]()-devices[_0x188e73]['telegram2FaApproval'][_0x168fa9(0x1d5)]<devices[_0x188e73]['telegram2FaApproval'][_0x168fa9(0x19b)]*0x3c*0x3e8),_0x4fe9c5;},normalizeIP=_0x380a20=>{const _0x49a6ba=_0x68082f;let _0x21495b=null,_0x41b902=null;if(ipaddr['isValid'](_0x380a20)){const _0x1c1c32=ipaddr[_0x49a6ba(0x250)](_0x380a20);_0x1c1c32[_0x49a6ba(0x31d)]()===_0x49a6ba(0x2b6)?(_0x1c1c32['isIPv4MappedAddress']()&&(_0x21495b=_0x1c1c32['toIPv4Address']()[_0x49a6ba(0x25b)]()),_0x41b902=_0x1c1c32['toString']()):(_0x21495b=_0x1c1c32[_0x49a6ba(0x25b)](),_0x41b902=_0x1c1c32[_0x49a6ba(0x20c)]()[_0x49a6ba(0x25b)]());}return{'show':_0x21495b?_0x21495b:_0x41b902,'store':_0x41b902};};function formatDate(_0x2ecb3a){const _0x5a9792=_0x68082f;return _0x2ecb3a[_0x5a9792(0x16d)]()+'/'+(_0x2ecb3a[_0x5a9792(0x261)]()+0x1)[_0x5a9792(0x25b)]()[_0x5a9792(0x300)](0x2,'0')+'/'+_0x2ecb3a['getDate']()[_0x5a9792(0x25b)]()[_0x5a9792(0x300)](0x2,'0')+'\x20'+_0x2ecb3a[_0x5a9792(0x2ba)]()[_0x5a9792(0x25b)]()['padStart'](0x2,'0')+':'+_0x2ecb3a[_0x5a9792(0x2f5)]()[_0x5a9792(0x25b)]()[_0x5a9792(0x300)](0x2,'0')+':'+_0x2ecb3a[_0x5a9792(0x208)]()[_0x5a9792(0x25b)]()['padStart'](0x2,'0');}function sleep(_0x5ef378){return new Promise(_0x2e6878=>setTimeout(_0x2e6878,_0x5ef378));}