const _0xa8905c=_0x2364;(function(_0x418926,_0x5dbe5f){const _0x309ee8=_0x2364,_0x246f78=_0x418926();while(!![]){try{const _0x5749ec=parseInt(_0x309ee8(0x2cc))/0x1+parseInt(_0x309ee8(0x2d5))/0x2*(parseInt(_0x309ee8(0x20f))/0x3)+-parseInt(_0x309ee8(0x252))/0x4*(-parseInt(_0x309ee8(0x1fe))/0x5)+parseInt(_0x309ee8(0x300))/0x6+-parseInt(_0x309ee8(0x318))/0x7*(-parseInt(_0x309ee8(0x1db))/0x8)+-parseInt(_0x309ee8(0x23f))/0x9+parseInt(_0x309ee8(0x2f5))/0xa*(-parseInt(_0x309ee8(0x21f))/0xb);if(_0x5749ec===_0x5dbe5f)break;else _0x246f78['push'](_0x246f78['shift']());}catch(_0x499e1c){_0x246f78['push'](_0x246f78['shift']());}}}(_0x1349,0x8dd03));const _0x5b6abf=function(){let _0x4eda49=!![];return function(_0x5e9a44,_0xa1494a){const _0x529c82=_0x4eda49?function(){const _0x7b4dab=_0x2364;if(_0xa1494a){const _0x2bb22c=_0xa1494a[_0x7b4dab(0x287)](_0x5e9a44,arguments);return _0xa1494a=null,_0x2bb22c;}}:function(){};return _0x4eda49=![],_0x529c82;};}(),_0x2cf1f9=_0x5b6abf(this,function(){const _0x480f10=_0x2364;return _0x2cf1f9[_0x480f10(0x1e5)]()[_0x480f10(0x2b5)](_0x480f10(0x340))[_0x480f10(0x1e5)]()[_0x480f10(0x2f8)](_0x2cf1f9)[_0x480f10(0x2b5)](_0x480f10(0x340));});_0x2cf1f9();'use strict';process[_0xa8905c(0x261)][_0xa8905c(0x29a)]=0x1;const childProcess=require(_0xa8905c(0x1e2)),fs=require('fs'),fns=require(_0xa8905c(0x345)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require('crypto'),Crypt=require(_0xa8905c(0x30e))['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0xa8905c(0x2d2)),jwt=require('jsonwebtoken'),ipaddr=require(_0xa8905c(0x207)),argv=require('yargs/yargs')(process[_0xa8905c(0x31f)][_0xa8905c(0x211)](0x2))[_0xa8905c(0x31f)],uuidRandom=require('uuid-random'),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require(_0xa8905c(0x33e)),fileUpload=require('express-fileupload'),PORT=argv[_0xa8905c(0x26d)]||_0xa8905c(0x1d3),pattern=/^[0-9]{2,4}$/;!pattern[_0xa8905c(0x1d8)](PORT)&&(console[_0xa8905c(0x2cb)]('Error:\x20Invalid\x20argument\x20'+PORT+_0xa8905c(0x314)),process[_0xa8905c(0x304)](0x1));const HOST=argv[_0xa8905c(0x1ed)]||null,userID=argv[_0xa8905c(0x1c2)]||'';let bbpath='bb/',bbpath2='';const botfile=_0xa8905c(0x2e3),configfile=_0xa8905c(0x2f7),settingsfile=_0xa8905c(0x2c4),securefile=_0xa8905c(0x26a);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xa8905c(0x2f9)),configpath=userID?bbpath+_0xa8905c(0x1ca)+userID+'/':bbpath+_0xa8905c(0x1ca),configbackuppath=configpath+_0xa8905c(0x33f),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0xa8905c(0x289),zippath=userID?bbpath+_0xa8905c(0x2cf)+userID+'/':bbpath+_0xa8905c(0x2cf),loggerfile=fs[_0xa8905c(0x30f)](logspath+_0xa8905c(0x22a),{'flags':'a'}),temppath=userID?bbpath+_0xa8905c(0x240)+userID+'/':bbpath+'temp/';!fs[_0xa8905c(0x238)](configpath)&&fs[_0xa8905c(0x2d0)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0xa8905c(0x2d0)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0xa8905c(0x2d0)](logspath);!fs['existsSync'](zippath)&&fs[_0xa8905c(0x2d0)](zippath);!fs['existsSync'](temppath)&&fs[_0xa8905c(0x2d0)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xa8905c(0x1cf)]({'bots':[]})[_0xa8905c(0x1de)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xa8905c(0x1cf)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xa8905c(0x31b)}})[_0xa8905c(0x1de)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0xa8905c(0x1de)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0xa8905c(0x204)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xa8905c(0x20e)]&&settings['telegramToken']!=''&&settings[_0xa8905c(0x32c)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x3feb88=>{const _0x276114=_0xa8905c;console[_0x276114(0x2cb)](_0x3feb88);},'simple':_0x5d9aeb=>{const _0x348b77=_0xa8905c;console[_0x348b77(0x2cb)](_0x5d9aeb),loggerfile['write'](util['format'](_0x5d9aeb)+'\x0a');},'full':async _0x5d401b=>{const _0x543feb=_0xa8905c,_0x4ace54=getTimeStamp()+_0x543feb(0x1ee)+_0x5d401b;console[_0x543feb(0x2cb)](_0x4ace54),loggerfile[_0x543feb(0x1de)](util[_0x543feb(0x31d)](_0x4ace54)+'\x0a');if(tgBot&&settings[_0x543feb(0x2d8)]&&settings[_0x543feb(0x280)]!=_0x543feb(0x264))await tgBot[_0x543feb(0x2ac)](settings[_0x543feb(0x2d8)],_0x543feb(0x1d0)+_0x5d401b)[_0x543feb(0x1df)](_0x578848=>{telegramError(_0x578848);});}};process['on'](_0xa8905c(0x26f),function(_0x4c0469){const _0x172278=_0xa8905c;logger[_0x172278(0x218)](_0x4c0469);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xa8905c(0x222))[_0xa8905c(0x2ff)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xa8905c(0x2c3)),app=express(),http=require(_0xa8905c(0x25f))['createServer'](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0xa8905c(0x2d9)](_0xa8905c(0x21c),async(_0x5ba13f,_0x9dca89)=>{const _0x40cf7d=_0xa8905c,_0xba1900=_0x5ba13f[_0x40cf7d(0x347)][_0x40cf7d(0x26b)],_0x378d2c=getClientsWithBotID('botmanager'),_0x4ba5bd=_0x5ba13f[_0x40cf7d(0x241)][_0x40cf7d(0x215)],_0x2c302a=timelyDecrypt(_0x4ba5bd,![]),_0x1c7edd=_0x378d2c[_0x40cf7d(0x24e)](_0x7ea14f=>_0x7ea14f[_0x40cf7d(0x215)]==_0x2c302a);if(_0x1c7edd){const _0x5874a1=normalizeIP(_0x5ba13f[_0x40cf7d(0x25a)][_0x40cf7d(0x2bf)])[_0x40cf7d(0x326)],_0x129aa3=_0x5ba13f[_0x40cf7d(0x241)]['tkn'];if(validateAccess(_0x129aa3,_0x2c302a,_0x5874a1)[_0x40cf7d(0x2a9)])await zipFiles(_0xba1900),_0x9dca89[_0x40cf7d(0x2ec)](zippath+(_0xba1900+_0x40cf7d(0x303)),_0x917699=>{const _0xf4f579=_0x40cf7d;_0x917699&&(logger[_0xf4f579(0x2a5)]('Failed\x20to\x20download\x20'+_0xba1900),logger['simple'](_0x917699));});else logger[_0x40cf7d(0x2a5)](_0x40cf7d(0x1c4)+_0xba1900+_0x40cf7d(0x291));}else logger[_0x40cf7d(0x2a5)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0xba1900+_0x40cf7d(0x2d7));}),app['post'](_0xa8905c(0x27e),async(_0x2832c1,_0x4978cd)=>{const _0x43d37f=_0xa8905c,_0x48c03a=getClientsWithBotID('botmanager'),_0x5814b5=_0x2832c1['headers'][_0x43d37f(0x215)],_0x57889f=timelyDecrypt(_0x5814b5,![]),_0x20e191=_0x48c03a[_0x43d37f(0x24e)](_0x5ae292=>_0x5ae292['uuid']==_0x57889f);if(_0x20e191){const _0x2f1a5f=normalizeIP(_0x2832c1[_0x43d37f(0x25a)][_0x43d37f(0x2bf)])[_0x43d37f(0x326)],_0x5ca0fe=_0x2832c1[_0x43d37f(0x241)][_0x43d37f(0x295)];if(validateAccess(_0x5ca0fe,_0x57889f,_0x2f1a5f)[_0x43d37f(0x2a9)]){if(_0x2832c1['files']){const _0x5d00da=_0x2832c1[_0x43d37f(0x1dc)][_0x43d37f(0x274)];await _0x5d00da['mv'](temppath+_0x5d00da[_0x43d37f(0x333)]),_0x4978cd[_0x43d37f(0x299)]({'status':!![],'message':'File\x20uploaded'});const _0x2ba31f=getBotsWithMode();_0x2ba31f['length']>0x0?confirmRestore(temppath,_0x5d00da[_0x43d37f(0x333)]):unzipFile(temppath,_0x5d00da['name']);}}else logger['full'](_0x43d37f(0x308));}else logger[_0x43d37f(0x2a5)](_0x43d37f(0x2fb));}),app['use'](express[_0xa8905c(0x1fc)](path[_0xa8905c(0x2bb)](__dirname,bbpath2,_0xa8905c(0x29f)))),app[_0xa8905c(0x1c8)](express[_0xa8905c(0x1fc)](path[_0xa8905c(0x2bb)](__dirname,bbpath2,_0xa8905c(0x27b)))),app[_0xa8905c(0x2d9)]('/',function(_0x164c93,_0x236ad9){const _0x1301f8=_0xa8905c;_0x236ad9['sendFile'](path[_0x1301f8(0x2bb)](__dirname,bbpath2,_0x1301f8(0x29f),'index.html'));}),app[_0xa8905c(0x2d9)](_0xa8905c(0x24c),function(_0x5d12f2,_0x1753b4){const _0x1e22be=_0xa8905c;_0x1753b4['sendFile'](path[_0x1e22be(0x2bb)](__dirname,bbpath2,'build',_0x1e22be(0x311)));}),app[_0xa8905c(0x2d9)]('/:bot/portfolio',(_0x4466ec,_0x5d76f0)=>{const _0x37ba12=_0xa8905c;_0x5d76f0[_0x37ba12(0x271)](path['join'](__dirname,bbpath2,_0x37ba12(0x27b),_0x37ba12(0x311)));}),app[_0xa8905c(0x2d9)](_0xa8905c(0x2de),(_0x2a7f6a,_0x26cd1b)=>{const _0x225ff6=_0xa8905c;_0x26cd1b[_0x225ff6(0x271)](path[_0x225ff6(0x2bb)](__dirname,bbpath2,_0x225ff6(0x27b),_0x225ff6(0x311)));}),app[_0xa8905c(0x2d9)](_0xa8905c(0x32f),(_0x3dfcdd,_0x1ad8a8)=>{const _0x65d9d1=_0xa8905c;_0x1ad8a8['sendFile'](path[_0x65d9d1(0x2bb)](__dirname,bbpath2,_0x65d9d1(0x27b),_0x65d9d1(0x311)));}),app[_0xa8905c(0x2d9)]('/:bot/history',(_0x46957a,_0x1df465)=>{const _0x38dd41=_0xa8905c;_0x1df465['sendFile'](path[_0x38dd41(0x2bb)](__dirname,bbpath2,_0x38dd41(0x27b),'index.html'));}),app[_0xa8905c(0x2d9)](_0xa8905c(0x1f5),(_0x2f67e7,_0x3c5c87)=>{const _0x2a2360=_0xa8905c;_0x3c5c87[_0x2a2360(0x271)](path[_0x2a2360(0x2bb)](__dirname,bbpath2,'build',_0x2a2360(0x311)));}),app['get'](_0xa8905c(0x2ce),(_0x2aad43,_0xd5edd7)=>{const _0x3250dd=_0xa8905c;_0xd5edd7[_0x3250dd(0x271)](path['join'](__dirname,bbpath2,_0x3250dd(0x27b),_0x3250dd(0x311)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x4c34cf=_0xa8905c;logger[_0x4c34cf(0x218)](''),logger[_0x4c34cf(0x218)](_0x4c34cf(0x1e7)),await logger['full'](_0x4c34cf(0x34f)+PORT),logger[_0x4c34cf(0x218)]('-----------------------------------------------------------------------------------');if(config[_0x4c34cf(0x250)]!=0x0)for(const _0x35b92d of config){if(_0x35b92d[_0x4c34cf(0x2ba)]==_0x4c34cf(0x22c)||_0x35b92d[_0x4c34cf(0x2ba)]==_0x4c34cf(0x2f3))await logger['full'](_0x4c34cf(0x32b)+_0x35b92d[_0x4c34cf(0x2c7)]+_0x4c34cf(0x2b7)+_0x35b92d[_0x4c34cf(0x272)]),startBot([_0x35b92d['botID'],userID],{'cwd':bbpath},function(_0x41c2be){const _0x13a2f9=_0x4c34cf;if(_0x41c2be)logger[_0x13a2f9(0x2a5)](_0x41c2be);});else(_0x35b92d['status']=='disabled'||_0x35b92d[_0x4c34cf(0x2ba)]=='new-disabled')&&await logger['full'](_0x4c34cf(0x275)+_0x35b92d['botID']+_0x4c34cf(0x2b7)+_0x35b92d[_0x4c34cf(0x272)]);}else!newBot&&logger[_0x4c34cf(0x218)](_0x4c34cf(0x34c));if(newBot)addBot();logger[_0x4c34cf(0x218)](_0x4c34cf(0x1e7)),logger[_0x4c34cf(0x218)]('');}function startSocket(){const _0x352746=_0xa8905c;io['on'](_0x352746(0x29d),_0x1b59fa=>{const _0xe6cd9f=_0x352746;let _0x2174f3,_0x4f1e8f,_0x128244,_0xa4a52d,_0x517921;const _0x411910=_0x1b59fa['handshake'][_0xe6cd9f(0x241)]['referer'];_0x4f1e8f=_0x411910[_0xe6cd9f(0x200)](/bot[0-9]{3}/);if(_0x4f1e8f)_0x128244=_0x4f1e8f[0x0]['match'](/[0-9]{3}/);if(_0x128244)_0x2174f3=_0x128244[0x0];else _0x2174f3='botmanager';const _0xf28789=_0x1b59fa[_0xe6cd9f(0x1ff)][_0xe6cd9f(0x32a)][_0xe6cd9f(0x1d4)];if(!_0xf28789)_0x1b59fa[_0xe6cd9f(0x21e)](_0xe6cd9f(0x2ba),{'publicKey':secure[_0xe6cd9f(0x31c)]});else{_0xa4a52d=timelyDecrypt(_0xf28789,![]);if(!_0xa4a52d)_0x1b59fa[_0xe6cd9f(0x21e)](_0xe6cd9f(0x2ba),{'publicKey':secure[_0xe6cd9f(0x31c)]});else{_0x517921=normalizeIP(_0x1b59fa[_0xe6cd9f(0x315)][_0xe6cd9f(0x2bf)])[_0xe6cd9f(0x326)];if(!devices[_0xa4a52d])devices[_0xa4a52d]={'uuid':_0xa4a52d,'access':{'token':null}};devices[_0xa4a52d]['ip']=_0x517921;const _0x3c9287=addClient(_0x1b59fa['id'],_0xa4a52d,_0x2174f3);setAccess(_0x3c9287),emitMessages(),_0x1b59fa['on'](_0xe6cd9f(0x225),_0x3db2e8=>{const _0x4a91ac=_0xe6cd9f,_0x3ca1ed=timelyDecrypt(_0x3db2e8[_0x4a91ac(0x2b1)]);if(_0x3ca1ed){_0x3db2e8={'username':_0x3db2e8['username'],'password':_0x3ca1ed},devices[_0xa4a52d]['access']=validateCredentials(_0x3db2e8,_0xa4a52d);if(devices[_0xa4a52d][_0x4a91ac(0x2cd)][_0x4a91ac(0x2a9)]==![]&&devices[_0xa4a52d][_0x4a91ac(0x2cd)][_0x4a91ac(0x228)]==_0x4a91ac(0x1e4))_0x1b59fa['emit'](_0x4a91ac(0x2ba),{'access':devices[_0xa4a52d][_0x4a91ac(0x2cd)]}),loginAccess2FA(_0xa4a52d,_0x517921);else{if(devices[_0xa4a52d]['access']['allow']==![]&&devices[_0xa4a52d][_0x4a91ac(0x2cd)][_0x4a91ac(0x228)]=='invalid\x20credentials')_0x1b59fa[_0x4a91ac(0x21e)](_0x4a91ac(0x2ba),{'access':devices[_0xa4a52d]['access']});else devices[_0xa4a52d][_0x4a91ac(0x2cd)]['allow']&&devices[_0xa4a52d][_0x4a91ac(0x2cd)][_0x4a91ac(0x228)]==_0x4a91ac(0x310)&&(getClientsWithUuid(_0xa4a52d)[_0x4a91ac(0x2e6)](_0x2a247e=>{setAccess(_0x2a247e);}),setTokenRefresh(_0xa4a52d),setSessionTimeout(_0x4a91ac(0x225),_0xa4a52d));}}else logger[_0x4a91ac(0x2a5)](_0x4a91ac(0x1e8));}),_0x1b59fa['on'](_0xe6cd9f(0x251),()=>{resetPassword();}),_0x1b59fa['on'](_0xe6cd9f(0x334),_0xe33bcf=>{removeClient(_0x1b59fa['id']);}),_0x2174f3==_0xe6cd9f(0x1f1)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2b4162){const _0x5cfa1f=_0xa8905c;if(_0x2b4162!='botmanager'&&config[_0x5cfa1f(0x1c3)]!=''){if(pid[_0x2b4162])pid[_0x2b4162][_0x5cfa1f(0x299)]({'function':_0x5cfa1f(0x209),'args':null});}}function reloadBotManager(){const _0x3b7952=_0xa8905c;getClientsWithBotID(_0x3b7952(0x1f1))['forEach'](_0x1f25ff=>{const _0x35ff5c=_0x3b7952;getSocket(_0x1f25ff['id'])[_0x35ff5c(0x21e)](_0x35ff5c(0x2ba),{'access':{'allow':![],'reason':_0x35ff5c(0x2da),'token':null}});});}function getSocket(_0x58827d){const _0x53ea7d=_0xa8905c;return io[_0x53ea7d(0x1fa)][_0x53ea7d(0x1fa)]['get'](_0x58827d);}function setAccess(_0x16c470){const _0x4948e8=_0xa8905c,_0x523f20=getSocket(_0x16c470['id']),_0x5e0f8a=_0x16c470[_0x4948e8(0x215)],_0x5a16e2=_0x16c470[_0x4948e8(0x246)];devices[_0x5e0f8a]['access']=validateAccess(devices[_0x5e0f8a]['access'][_0x4948e8(0x2a6)],_0x5e0f8a),_0x523f20['join'](_0x5e0f8a);if(devices[_0x5e0f8a]['access'][_0x4948e8(0x2a9)]){_0x523f20[_0x4948e8(0x2bb)](_0x5a16e2);if(_0x5a16e2==_0x4948e8(0x1f1))initializeSocketBotManager(_0x523f20);else initializeSocketBot(_0x523f20);initClient(_0x5a16e2);}devices[_0x5e0f8a][_0x4948e8(0x2cd)][_0x4948e8(0x2a6)]&&devices[_0x5e0f8a][_0x4948e8(0x2cd)]['reason']==_0x4948e8(0x1ec)&&setSessionTimeout(_0x4948e8(0x1f8),_0x5e0f8a),devices[_0x5e0f8a][_0x4948e8(0x2cd)][_0x4948e8(0x2a6)]&&devices[_0x5e0f8a][_0x4948e8(0x2cd)][_0x4948e8(0x228)]==_0x4948e8(0x235)&&setSessionTimeout(_0x4948e8(0x225),_0x5e0f8a),_0x523f20[_0x4948e8(0x21e)](_0x4948e8(0x2ba),{'status':_0x16c470['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5e0f8a][_0x4948e8(0x2cd)],'externalip':devices[_0x5e0f8a]['ip'],'publicKey':secure[_0x4948e8(0x31c)],'userid':settings[_0x4948e8(0x267)],'validInstallation':validInstallation}),devices[_0x5e0f8a]['access'][_0x4948e8(0x2a9)]==![]&&devices[_0x5e0f8a][_0x4948e8(0x2cd)][_0x4948e8(0x228)]==_0x4948e8(0x229)&&temporaryAccess2FA(_0x5e0f8a,devices[_0x5e0f8a]['ip']);}function setSessionTimeout(_0x3d8894,_0x1d7db2){const _0x480ff3=_0xa8905c;let _0x39f346;if(_0x3d8894=='login')_0x39f346=loginExpiry*0x3c*0x3e8;else _0x39f346=devices[_0x1d7db2][_0x480ff3(0x1e3)][_0x480ff3(0x26c)]*0x3c*0x3e8-(new Date()[_0x480ff3(0x290)]()-devices[_0x1d7db2][_0x480ff3(0x1e3)][_0x480ff3(0x2b6)]);if(devices[_0x1d7db2][_0x480ff3(0x29e)])clearTimeout(devices[_0x1d7db2]['pidExpireLogin']);devices[_0x1d7db2][_0x480ff3(0x29e)]=setTimeout(()=>{const _0x3403bf=_0x480ff3;if(devices[_0x1d7db2][_0x3403bf(0x237)])clearTimeout(devices[_0x1d7db2][_0x3403bf(0x237)]);removeSocketListeners(_0x1d7db2),addBlacklist(_0x1d7db2),devices[_0x1d7db2]['telegramIpApproval']=null,devices[_0x1d7db2][_0x3403bf(0x2e9)]=null,devices[_0x1d7db2][_0x3403bf(0x2cd)][_0x3403bf(0x2a6)]=null,devices[_0x1d7db2][_0x3403bf(0x2cd)]=validateAccess(devices[_0x1d7db2][_0x3403bf(0x2cd)][_0x3403bf(0x2a6)],_0x1d7db2),!(devices[_0x1d7db2][_0x3403bf(0x2cd)]['allow']&&devices[_0x1d7db2][_0x3403bf(0x2cd)][_0x3403bf(0x228)]==_0x3403bf(0x221))&&(_0x3d8894=='login'?io['to'](_0x1d7db2)['emit']('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x1d7db2)[_0x3403bf(0x21e)](_0x3403bf(0x2ba),{'access':{'allow':![],'reason':_0x3403bf(0x1d5),'token':null}})),devices[_0x1d7db2][_0x3403bf(0x2cd)][_0x3403bf(0x2a6)]=null;},_0x39f346);}function setTokenRefresh(_0x32a513){const _0x48d20b=_0xa8905c;if(devices[_0x32a513]['pidRefreshToken'])clearTimeout(devices[_0x32a513][_0x48d20b(0x237)]);devices[_0x32a513][_0x48d20b(0x237)]=setTimeout(()=>{const _0x3e9209=_0x48d20b;getClientsWithUuid(_0x32a513)[_0x3e9209(0x250)]!=0x0?(devices[_0x32a513][_0x3e9209(0x2cd)]=refreshToken(_0x32a513),io['to'](_0x32a513)[_0x3e9209(0x21e)](_0x3e9209(0x2ba),{'status':_0x3e9209(0x2b0),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x32a513][_0x3e9209(0x2cd)],'externalip':devices[_0x32a513]['ip'],'publicKey':secure[_0x3e9209(0x31c)],'validInstallation':validInstallation}),setTokenRefresh(_0x32a513)):clearTimeout(devices[_0x32a513][_0x3e9209(0x237)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xcebbc7){const _0x2478d1=_0xa8905c,_0x18c068=getClient(_0xcebbc7['id'])[_0x2478d1(0x215)];_0xcebbc7['emit'](_0x2478d1(0x22b),config),_0xcebbc7[_0x2478d1(0x21e)](_0x2478d1(0x312),cleanSettings()),_0xcebbc7['on'](_0x2478d1(0x2c2),_0x2332ce=>{const _0xa451d4=_0x2478d1;if(validateAccess(_0x2332ce,_0x18c068)[_0xa451d4(0x2a9)])addBot();else logger[_0xa451d4(0x2a5)](_0xa451d4(0x1fb));}),_0xcebbc7['on'](_0x2478d1(0x2ad),(_0x2f1c8a,_0x448e7d)=>{const _0x3bfeb5=_0x2478d1;if(validateAccess(_0x448e7d,_0x18c068)[_0x3bfeb5(0x2a9)])toggleBot(_0x2f1c8a['botID'],_0x2f1c8a['status'],_0x2f1c8a[_0x3bfeb5(0x2bc)]);else logger[_0x3bfeb5(0x2a5)](_0x3bfeb5(0x20b));}),_0xcebbc7['on'](_0x2478d1(0x324),(_0x401a0d,_0x1ddda5)=>{const _0x281e6e=_0x2478d1;if(validateAccess(_0x1ddda5,_0x18c068)[_0x281e6e(0x2a9)])toggleBotMode(_0x401a0d);else logger[_0x281e6e(0x2a5)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0xcebbc7['on'](_0x2478d1(0x301),(_0x1516de,_0x44fc25)=>{const _0x1801b6=_0x2478d1;if(validateAccess(_0x44fc25,_0x18c068)[_0x1801b6(0x2a9)])deleteBot(_0x1516de);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0xcebbc7['on'](_0x2478d1(0x2e1),(_0x3d3e91,_0x3f27f3)=>{const _0x3d922f=_0x2478d1;if(validateAccess(_0x3f27f3,_0x18c068)[_0x3d922f(0x2a9)])storeSettings(_0x3d3e91,!![]);else logger[_0x3d922f(0x2a5)](_0x3d922f(0x33b));}),_0xcebbc7['on'](_0x2478d1(0x1f6),_0x5c0746=>{const _0x184df1=_0x2478d1;if(validateAccess(_0x5c0746,_0x18c068)[_0x184df1(0x2a9)])updateBB();else logger[_0x184df1(0x2a5)](_0x184df1(0x2c1));}),_0xcebbc7['on'](_0x2478d1(0x331),_0x2efbcc=>{const _0x3386da=_0x2478d1;if(validateAccess(_0x2efbcc,_0x18c068)[_0x3386da(0x2a9)])getMessages();else logger['full'](_0x3386da(0x2f1));}),_0xcebbc7['on'](_0x2478d1(0x2d4),(_0x15d0de,_0x553e57)=>{const _0x132111=_0x2478d1;if(validateAccess(_0x553e57,_0x18c068)[_0x132111(0x2a9)])confirmMessage(_0x15d0de);else logger[_0x132111(0x2a5)](_0x132111(0x286));}),_0xcebbc7['on'](_0x2478d1(0x213),_0x51e0c9=>{const _0x25ef0f=_0x2478d1;if(validateAccess(_0x51e0c9,_0x18c068)[_0x25ef0f(0x2a9)]){if(devices[_0x18c068]['pidRefreshToken'])clearTimeout(devices[_0x18c068][_0x25ef0f(0x237)]);if(devices[_0x18c068][_0x25ef0f(0x29e)])clearTimeout(devices[_0x18c068]['pidExpireLogin']);removeSocketListeners(getClient(_0xcebbc7['id'])[_0x25ef0f(0x215)]),addBlacklist(_0x18c068),devices[_0x18c068][_0x25ef0f(0x1e3)]=null,devices[_0x18c068][_0x25ef0f(0x2e9)]=null,devices[_0x18c068][_0x25ef0f(0x2cd)][_0x25ef0f(0x2a6)]=null,io['to'](getClient(_0xcebbc7['id'])[_0x25ef0f(0x215)])[_0x25ef0f(0x21e)](_0x25ef0f(0x2ba),{'access':{'allow':![],'reason':_0x25ef0f(0x1cd),'token':null}});}else logger[_0x25ef0f(0x2a5)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x113dde){const _0x2ae71a=_0xa8905c,_0x5e8141=getClient(_0x113dde['id'])[_0x2ae71a(0x246)],_0x26b067=getClient(_0x113dde['id'])['uuid'];_0x113dde['on']('get-logs',(_0x4a6174,_0x37f340)=>{const _0x1ef234=_0x2ae71a;if(validateAccess(_0x37f340,_0x26b067)[_0x1ef234(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141][_0x1ef234(0x299)]({'function':_0x1ef234(0x2e2),'args':_0x4a6174});}else logger[_0x1ef234(0x2a5)](_0x1ef234(0x2d1));}),_0x113dde['on'](_0x2ae71a(0x34e),(_0x2fa4df,_0xfcfd94)=>{const _0x5c7d75=_0x2ae71a;if(validateAccess(_0xfcfd94,_0x26b067)['allow']){if(pid[_0x5e8141])pid[_0x5e8141][_0x5c7d75(0x299)]({'function':'deleteHistoryAlerts','args':_0x2fa4df});}else logger[_0x5c7d75(0x2a5)](_0x5c7d75(0x305));}),_0x113dde['on'](_0x2ae71a(0x298),(_0x303d71,_0x468600)=>{const _0x411620=_0x2ae71a;if(validateAccess(_0x468600,_0x26b067)[_0x411620(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141]['send']({'function':'getPortfolio','args':_0x303d71});}else logger['full'](_0x411620(0x1f2));}),_0x113dde['on'](_0x2ae71a(0x217),(_0xad953c,_0x50760d)=>{const _0x278701=_0x2ae71a;if(validateAccess(_0x50760d,_0x26b067)[_0x278701(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141]['send']({'function':_0x278701(0x342),'args':_0xad953c});}else logger[_0x278701(0x2a5)](_0x278701(0x216));}),_0x113dde['on']('store-headless',(_0x3d9819,_0x8d1f33)=>{const _0x2c8ae8=_0x2ae71a;if(validateAccess(_0x8d1f33,_0x26b067)['allow']){if(pid[_0x5e8141])pid[_0x5e8141][_0x2c8ae8(0x299)]({'function':_0x2c8ae8(0x330),'args':_0x3d9819});}else logger[_0x2c8ae8(0x2a5)](_0x2c8ae8(0x278));}),_0x113dde['on']('get-starting-balances',_0x88fcba=>{const _0x365568=_0x2ae71a;if(validateAccess(_0x88fcba,_0x26b067)[_0x365568(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141][_0x365568(0x299)]({'function':_0x365568(0x2a0),'args':null});}else logger['full'](_0x365568(0x2b8));}),_0x113dde['on'](_0x2ae71a(0x2e8),(_0x356792,_0x4466f5)=>{const _0x475b7d=_0x2ae71a;if(validateAccess(_0x4466f5,_0x26b067)['allow']){if(pid[_0x5e8141])pid[_0x5e8141][_0x475b7d(0x299)]({'function':_0x475b7d(0x31e),'args':_0x356792});}else logger[_0x475b7d(0x2a5)](_0x475b7d(0x2b4));}),_0x113dde['on'](_0x2ae71a(0x29b),_0x3473f2=>{const _0x59cbf9=_0x2ae71a;if(validateAccess(_0x3473f2,_0x26b067)[_0x59cbf9(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141]['send']({'function':_0x59cbf9(0x337),'args':null});}else logger[_0x59cbf9(0x2a5)](_0x59cbf9(0x313));}),_0x113dde['on'](_0x2ae71a(0x1c1),_0x1ba76b=>{const _0x1f1918=_0x2ae71a;if(validateAccess(_0x1ba76b,_0x26b067)[_0x1f1918(0x2a9)]){if(pid[_0x5e8141])pid[_0x5e8141][_0x1f1918(0x299)]({'function':'showConfig','args':null});}else logger['full'](_0x1f1918(0x1ce));}),_0x113dde['on'](_0x2ae71a(0x1f6),_0x170848=>{const _0xebe766=_0x2ae71a;if(validateAccess(_0x170848,_0x26b067)[_0xebe766(0x2a9)])updateBB();else logger[_0xebe766(0x2a5)](_0xebe766(0x2c1));}),_0x113dde['on'](_0x2ae71a(0x331),_0x2e4790=>{const _0x1de6f9=_0x2ae71a;if(validateAccess(_0x2e4790,_0x26b067)[_0x1de6f9(0x2a9)])getMessages();else logger[_0x1de6f9(0x2a5)](_0x1de6f9(0x2f1));}),_0x113dde['on'](_0x2ae71a(0x2d4),(_0x1aa133,_0x8ff225)=>{const _0x143572=_0x2ae71a;if(validateAccess(_0x8ff225,_0x26b067)['allow'])confirmMessage(_0x1aa133);else logger[_0x143572(0x2a5)](_0x143572(0x286));}),_0x113dde['on'](_0x2ae71a(0x213),_0x64135d=>{const _0x5f0a19=_0x2ae71a;if(validateAccess(_0x64135d,_0x26b067)[_0x5f0a19(0x2a9)]){if(devices[_0x26b067][_0x5f0a19(0x237)])clearTimeout(devices[_0x26b067][_0x5f0a19(0x237)]);if(devices[_0x26b067][_0x5f0a19(0x29e)])clearTimeout(devices[_0x26b067][_0x5f0a19(0x29e)]);removeSocketListeners(getClient(_0x113dde['id'])['uuid']),addBlacklist(_0x26b067),devices[_0x26b067][_0x5f0a19(0x1e3)]=null,devices[_0x26b067][_0x5f0a19(0x2e9)]=null,devices[_0x26b067][_0x5f0a19(0x2cd)][_0x5f0a19(0x2a6)]=null,io['to'](getClient(_0x113dde['id'])[_0x5f0a19(0x215)])['emit'](_0x5f0a19(0x2ba),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x5f0a19(0x2a5)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x571961){const _0x56e009=_0xa8905c;getClientsWithUuid(_0x571961)[_0x56e009(0x2e6)](_0x2276bb=>{const _0x54d41b=_0x56e009;getSocket(_0x2276bb['id'])[_0x54d41b(0x248)]();});}function cleanSettings(){const _0x646fd5=_0xa8905c;let _0x18b6f9=settings;return settings[_0x646fd5(0x20e)]&&settings[_0x646fd5(0x20e)]!=''&&(_0x18b6f9={..._0x18b6f9,'telegramToken':_0x646fd5(0x2c8)}),settings[_0x646fd5(0x227)]&&settings[_0x646fd5(0x227)]!=''&&(_0x18b6f9={..._0x18b6f9,'bbPassword':_0x646fd5(0x2c8)}),(settings[_0x646fd5(0x227)]&&settings[_0x646fd5(0x227)]==_0x646fd5(0x258)||settings[_0x646fd5(0x20e)]&&settings[_0x646fd5(0x20e)]==_0x646fd5(0x258))&&(_0x18b6f9={..._0x18b6f9,'restored':{'password':settings['bbPassword']==_0x646fd5(0x258),'telegram':settings['telegramToken']=='***'}}),_0x18b6f9;}function updateBB(){const _0x1231d8=_0xa8905c;installingUpdate=!![],config[_0x1231d8(0x2e6)](_0x54d7d2=>{const _0x23284e=_0x1231d8;restartBot(_0x54d7d2[_0x23284e(0x2c7)]);}),process[_0x1231d8(0x299)]({'update':!![]},_0x5a1499=>{});}function startBot(_0x1e3644,_0x4387cb,_0x4ffa34){const _0x225cea=_0xa8905c;let _0x43fc7f=![];const _0x428f95=_0x1e3644[0x0];_0x4387cb={..._0x4387cb,'stdio':['inherit',_0x225cea(0x336),_0x225cea(0x336),_0x225cea(0x223)]},pid[_0x428f95]=childProcess['fork'](botfile,_0x1e3644,_0x4387cb),pid[_0x428f95]['on'](_0x225cea(0x2df),_0x2dbc9c=>{const _0x217e84=_0x225cea;switch(Object['keys'](_0x2dbc9c)[0x0]){case'botname':updateBotName(_0x428f95,_0x2dbc9c[_0x217e84(0x272)]);break;case _0x217e84(0x2d3):updateBotManager();break;case _0x217e84(0x2ba):updateStatus(_0x428f95,_0x2dbc9c[_0x217e84(0x2ba)]);break;case _0x217e84(0x2bc):updateLive(_0x428f95,_0x2dbc9c[_0x217e84(0x2bc)]);break;case _0x217e84(0x20d):updateLive(_0x428f95,_0x2dbc9c[_0x217e84(0x20d)]),io['to'](_0x428f95)[_0x217e84(0x21e)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x217e84(0x284):_0x2dbc9c[_0x217e84(0x284)]=='restart'&&restartBot(_0x428f95);_0x2dbc9c[_0x217e84(0x284)]==_0x217e84(0x30a)&&toggleBot(_0x428f95,_0x217e84(0x28b),_0x217e84(0x259));break;case _0x217e84(0x2ca):sendTelegram(_0x428f95,_0x2dbc9c[_0x217e84(0x2ca)]);break;case _0x217e84(0x23d):sendTelegramMsg(_0x2dbc9c[_0x217e84(0x23d)]);break;case _0x217e84(0x220):io['to'](_0x428f95)[_0x217e84(0x21e)](_0x2dbc9c[_0x217e84(0x220)],_0x2dbc9c[_0x217e84(0x2f6)]);break;}}),pid[_0x428f95]['on']('error',function(_0x302f26){if(_0x43fc7f)return;_0x43fc7f=!![],_0x4ffa34(_0x302f26);}),pid[_0x428f95]['on'](_0x225cea(0x304),async function(_0x5c5a47){const _0x5e93bf=_0x225cea;if(installingUpdate)return;if(_0x43fc7f)return;_0x43fc7f=!![],_0x4ffa34(null);const _0x285a3f=dbConfig['get'](_0x5e93bf(0x22b))[_0x5e93bf(0x24e)]({'botID':_0x428f95})[_0x5e93bf(0x1c7)]();_0x285a3f&&(_0x285a3f[_0x5e93bf(0x2ba)]=='enabled'||_0x285a3f[_0x5e93bf(0x2ba)]==_0x5e93bf(0x2f3))&&(await sleep(0x3e8),updateLive(_0x428f95,'stopped'),logger[_0x5e93bf(0x2a5)](_0x5e93bf(0x2f2)+_0x428f95),startBot([_0x428f95,userID],{'cwd':bbpath},function(_0x3e2cf9){if(_0x3e2cf9)logger['full'](_0x3e2cf9);}));});}function _0x2364(_0xca6a41,_0x2e3180){const _0x37cd1a=_0x1349();return _0x2364=function(_0x2cf1f9,_0x5b6abf){_0x2cf1f9=_0x2cf1f9-0x1c1;let _0x1349ce=_0x37cd1a[_0x2cf1f9];return _0x1349ce;},_0x2364(_0xca6a41,_0x2e3180);}function stopBot(_0x22ca90){const _0x341438=_0xa8905c;getClientsWithBotID(_0x22ca90)[_0x341438(0x2e6)](_0xdd1e60=>{const _0x2b1a82=_0x341438;getSocket(_0xdd1e60['id'])[_0x2b1a82(0x334)](!![]),removeClient(_0xdd1e60['id']);}),pid[_0x22ca90]&&(pid[_0x22ca90][_0x341438(0x30a)](),pid[_0x22ca90]=null);}function restartBot(_0x1bbb8b){if(pid[_0x1bbb8b])pid[_0x1bbb8b]['kill']();}function addBot(){const _0x54db41=_0xa8905c;let _0x565325;for(let _0x5b29fd=0x1;_0x5b29fd<0x3e9;_0x5b29fd++){_0x565325=_0x5b29fd['toString']()['padStart'](0x3,'0');let _0x33ab1f=config[_0x54db41(0x24e)](_0x189047=>_0x189047['botID']==_0x565325);if(!_0x33ab1f)break;}if(_0x565325===_0x54db41(0x23a)){logger['full'](_0x54db41(0x273));return;}logger[_0x54db41(0x2a5)](_0x54db41(0x21a)+_0x565325),dbConfig[_0x54db41(0x2d9)](_0x54db41(0x22b))['push']({'botID':_0x565325,'botname':_0x54db41(0x27a)+_0x565325,'status':_0x54db41(0x2f3),'live':''})[_0x54db41(0x1de)](),startBot([_0x565325,userID],{'cwd':bbpath},function(_0x57acfd){const _0x5724c4=_0x54db41;if(_0x57acfd)logger[_0x5724c4(0x2a5)](_0x57acfd);}),config=getConfiguration(),io['to'](_0x54db41(0x1f1))['emit'](_0x54db41(0x22b),config);}function deleteBot(_0x1d3598){const _0x5945df=_0xa8905c;getClientsWithBotID(_0x1d3598)[_0x5945df(0x2e6)](_0x4cd97c=>{getSocket(_0x4cd97c['id'])['disconnect'](!![]),removeClient(_0x4cd97c['id']);}),dbConfig[_0x5945df(0x2d9)]('bots')[_0x5945df(0x321)]({'botID':_0x1d3598})['write'](),logger['full']('deleted\x20Bot\x20'+_0x1d3598),stopBot(_0x1d3598);try{if(fs['existsSync'](path[_0x5945df(0x2bb)](configpath,'bot-'+_0x1d3598+'-config.json')))fs[_0x5945df(0x2f4)](path['join'](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x317)));if(fs['existsSync'](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x226))))fs[_0x5945df(0x2f4)](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x226)));if(fs[_0x5945df(0x238)](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+'-performance.json')))fs[_0x5945df(0x2f4)](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x281)));if(fs['existsSync'](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x341))))fs[_0x5945df(0x2f4)](path[_0x5945df(0x2bb)](configpath,_0x5945df(0x302)+_0x1d3598+_0x5945df(0x341)));}catch(_0x1fe1ab){if(_0x1fe1ab)logger[_0x5945df(0x2a5)](_0x5945df(0x1cb),_0x1fe1ab);}config=getConfiguration(),io['to']('botmanager')[_0x5945df(0x21e)](_0x5945df(0x22b),config);}function toggleBot(_0x474091,_0x3f8bc8,_0x1235a2){const _0x3b3471=_0xa8905c;dbConfig[_0x3b3471(0x2d9)]('bots')['find']({'botID':_0x474091})[_0x3b3471(0x255)]({'status':_0x3f8bc8})['assign']({'live':_0x1235a2})[_0x3b3471(0x1de)]();if(_0x3f8bc8==_0x3b3471(0x22c)||_0x3f8bc8==_0x3b3471(0x2f3))logger[_0x3b3471(0x2a5)](_0x3b3471(0x2e0)+_0x474091),startBot([_0x474091,userID],{'cwd':bbpath},function(_0x56bf24){const _0x26f02e=_0x3b3471;if(_0x56bf24)logger[_0x26f02e(0x2a5)](_0x56bf24);});else(_0x3f8bc8=='disabled'||_0x3f8bc8==_0x3b3471(0x2fa))&&(logger[_0x3b3471(0x2a5)](_0x3b3471(0x344)+_0x474091),stopBot(_0x474091));config=getConfiguration(),io['to'](_0x3b3471(0x1f1))[_0x3b3471(0x21e)](_0x3b3471(0x22b),config);}function toggleStatus(_0x47e259){const _0xc18eca=_0xa8905c;let _0x52175e=dbConfig[_0xc18eca(0x2d9)]('bots')[_0xc18eca(0x24e)]({'botID':_0x47e259})[_0xc18eca(0x1c7)](),_0x1b5597;if(_0x52175e[_0xc18eca(0x2ba)]===_0xc18eca(0x22c))_0x1b5597=_0xc18eca(0x28b);else{if(_0x52175e[_0xc18eca(0x2ba)]===_0xc18eca(0x2f3))_0x1b5597=_0xc18eca(0x2fa);else{if(_0x52175e['status']==='new-disabled')_0x1b5597='new';else{if(_0x52175e[_0xc18eca(0x2ba)]===_0xc18eca(0x28b))_0x1b5597=_0xc18eca(0x22c);}}}return _0x1b5597;}function updateStatus(_0x50981c,_0x49363c){const _0x40846a=_0xa8905c;dbConfig[_0x40846a(0x2d9)](_0x40846a(0x22b))['find']({'botID':_0x50981c})[_0x40846a(0x255)]({'status':_0x49363c})['write'](),config=getConfiguration(),io['to'](_0x40846a(0x1f1))[_0x40846a(0x21e)](_0x40846a(0x22b),config);}function updateLive(_0x2d6bf1,_0x1e8096){const _0x193ccf=_0xa8905c;dbConfig[_0x193ccf(0x2d9)](_0x193ccf(0x22b))[_0x193ccf(0x24e)]({'botID':_0x2d6bf1})[_0x193ccf(0x255)]({'live':_0x1e8096})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x193ccf(0x21e)](_0x193ccf(0x22b),config);}function _0x1349(){const _0x3c12f6=['sockets','Unauthorized\x20attempt\x20to\x20add\x20bot','static','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','5FLSFYj','handshake','match','success','isDirectory','compareSync','RSA-OAEP','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','polling_error','ipaddr.js','getFullYear','initclient','login\x20token\x20valid','Unauthorized\x20attempt\x20to\x20update\x20bot','chat','started','telegramToken','305991MdqSuH','Restoring\x20bot(s)\x20from\x20backup','slice','replace','logout','settings.','uuid','Unauthorized\x20attempt\x20to\x20store\x20configuration','store-configuration','simple','Password\x20reset\x20rejected','starting\x20new\x20bot\x20|\x20Bot\x20','hashSync','/download/:type','headless','emit','616DVZMiW','function','login\x20not\x20required','version.json','ipc','set','login','-events.json','bbPassword','reason','2FA\x20required','/output-000.log','bots','enabled','order','Restore\x20process\x20aborted','secure','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','secret','output-001.log','decrypt','readFileSync','2FA\x20login\x20token\x20generated','event','pidRefreshToken','existsSync','randomBytes','1000','getMinutes','error','telegrammsg','logs','2584296beiZVi','temp/','headers','No\x20bots\x20running\x20right\x20now','$1_$2_$3','Invalid\x20username\x20or\x20IP\x20address','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bot','accept','removeAllListeners','privateKey','_data','Access\x20enabled\x20for\x20','/:bot','backup','find','stringify','length','reset-password','852172QeVqUZ','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','number','assign','Ok,\x20will\x20send\x20order\x20notifications\x20only','generate','***','stopped','socket','kind','removeListener','2FA\x20login\x20rejected','from','http','All\x20bots','env','\x20>\x20','/on\x20-\x20start\x20bot(s)\x0a','orders','f2aRequired','toggleBotMode','userid','title','/restart\x20-\x20restart\x20bot(s)\x0a','bb-secure.json','type','expiry','port','then','uncaughtException','User\x20has\x20been\x20validated','sendFile','botname','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','backupfile','idling\x20bot\x20\x20\x20|\x20Bot\x20','mode','auto','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','getDate','Bot\x20','build','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/upload-backup','sendPortfolioTelegram','telegramEvents','-performance.json','bbvReceive','size','stop','all','Unauthorized\x20attempt\x20to\x20confirm\x20message','apply','getHours','logs/','All\x20bots\x20running\x20right\x20now','disabled','*$1*','toIPv4MappedAddress','login\x20required','Invalid\x20authentication\x20token\x20(1)','getTime','\x20(1)','onText','getMonth','any','tkn','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','binary','get-portfolio','send','NTBA_FIX_319','cancel-loading','lastmsgemitted','connection','pidExpireLogin','build2','getStartingBalances','username','temporary\x20access\x20rejected','Notifications\x20types:\x20','once','full','token','output-002.log','stopPolling','allow','hex','bbUsername','sendMessage','update-bot','manual','showname','connected','password','15\x20min','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','search','timestamp','\x20|\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','sort','status','join','live','split','toIPv4Address','remoteAddress','No\x20authentication\x20token','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','add-bot','express','bb-settings.json','Starting\x20Balance\x20Bot\x20update','lastmsgtelegram','botID','************','ipv6','telegram','log','545570pmwLDk','access','/:bot/support','zip/','mkdirSync','Unauthorized\x20attempt\x20to\x20get\x20logs','bcryptjs','updatebotmanager','confirm-message','2nldKrq','callback_query','\x20(2)','telegramChatId','get','reload','alerts','file','/update\x20-\x20update\x20Balance\x20Bot\x0a','/:bot/performance','message','enabled\x20Bot\x20','store-settings','emitHistory','bot.js','SIGTERM','timeshift','forEach','reject','place-order','telegram2FaApproval','Alerts','<b>Telegram\x20Bot\x20Status:</b>\x0a','download','sign','startsWith','Server','bbvNew','Unauthorized\x20attempt\x20to\x20get\x20messages','restarting\x20Bot\x20','new','unlinkSync','268960hLZSqE','args','bb-config.json','constructor','clients','new-disabled','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','latestversion','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','version','2270862hFofei','delete-bot','bot-','.zip','exit','Unauthorized\x20attempt\x20to\x20delete\x20alerts','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','parse','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','getSeconds','kill','cloneDeep','yes','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','hybrid-crypto-js','createWriteStream','login\x20token\x20generated','index.html','settings','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins',',\x20must\x20be\x20a\x204\x20digit\x20number','conn','running','-config.json','35OQUqRp','/status\x20-\x20show\x20bot(s)\x20status\x0a','filter','0.0.0','publicKey','format','placeOrder','argv','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','remove','output-000.log','randomFillSync','toggle-bot-mode','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','store','temporaryAccessAllowed','::ffff:127.0.0.1','clientip','auth','starting\x20bot\x20|\x20Bot\x20','telegramUsername','generateKeyPairAsync','keys','/:bot/coins','storeHeadless','get-messages','Login\x20rejected','name','disconnect','Orders','inherit','cancelLoading','Notifications\x20disabled','max','track','Unauthorized\x20attempt\x20to\x20update\x20settings','answerCallbackQuery','isValid','util','backup/','(((.+)+)+)+$','-results.json','storeConfiguration','notification','disabled\x20Bot\x20','date-fns','messages','params','show','All','blacklist','hasOwnProperty','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','sortBy','delete-alerts','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Notifications\x20enabled\x0a','show-config','user','apiKey','Unauthorized\x20attempt\x20to\x20download\x20','Login\x20accepted','Invalid\x20Telegram\x20token','value','use','HTML','config/','error\x20while\x20deleting\x20config\x20files:\x20','\x20only\x0a','logged\x20out','Unauthorized\x20attempt\x20to\x20show\x20configuration','defaults','Bot\x20Mgr\x20>\x20','data','includes','3000','encryptedUuid','temporary\x20access\x20timeout','add','</b>\x20?','test','loginRequired','/names\x20-\x20show\x20bot\x20names\x0a','1816160bBdfyF','files','padStart','write','catch','copyFileSync','Password\x20has\x20been\x20reset\x20to:\x20','child_process','telegramIpApproval','2FA\x20login\x20required','toString','writeFileSync','-----------------------------------------------------------------------------------','Unauthorized\x20login\x20attempt\x20(timeout)','getUTCHours','node-zip','push','temporary\x20token\x20generated','host',':\x20Bot\x20Mgr\x20>\x20','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','botmanager','Unauthorized\x20attempt\x20to\x20get\x20portfolio','rmSync','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/:bot/configuration','update-bb','telegramEnabled','2FA','readdirSync'];_0x1349=function(){return _0x3c12f6;};return _0x1349();}function updateBotName(_0x4bffc2,_0x482578){const _0x3d5702=_0xa8905c;dbConfig[_0x3d5702(0x2d9)](_0x3d5702(0x22b))['find']({'botID':_0x4bffc2})['assign']({'botname':_0x482578})[_0x3d5702(0x1de)](),config=getConfiguration(),io['to'](_0x3d5702(0x1f1))[_0x3d5702(0x21e)](_0x3d5702(0x22b),config);}function updateBotManager(){const _0x11a1ab=_0xa8905c;config=getConfiguration(),io['to'](_0x11a1ab(0x1f1))['emit']('bots',config);}function toggleBotMode(_0x23027e){const _0x545381=_0xa8905c;if(pid[_0x23027e])pid[_0x23027e]['send']({'function':_0x545381(0x266),'args':null});else{const _0x5052d6=configpath+'bot-'+_0x23027e+_0x545381(0x317),_0x1f2e94=fs[_0x545381(0x234)](_0x5052d6),_0xd5002f=JSON['parse'](_0x1f2e94),_0x15cc50=_0xd5002f[_0x545381(0x246)][0x0][_0x545381(0x21d)];_0xd5002f[_0x545381(0x246)][0x0]['headless']=!_0x15cc50;const _0x3d5855=JSON[_0x545381(0x24f)](_0xd5002f,null,0x2);fs[_0x545381(0x1e6)](_0x5052d6,_0x3d5855),config=getConfiguration(),io['to'](_0x545381(0x1f1))['emit']('bots',config);}}function telegramError(_0x5430af){const _0x5abeb1=_0xa8905c;logger[_0x5abeb1(0x218)](getTimeStamp()+_0x5abeb1(0x1f0));}function validateTelegram(_0x49b385){const _0x53734e=_0xa8905c;if(_0x49b385[_0x53734e(0x25e)][_0x53734e(0x2a1)]!=settings['telegramUsername']&&'@'+_0x49b385[_0x53734e(0x25e)][_0x53734e(0x2a1)]!=settings[_0x53734e(0x32c)])return tgBot[_0x53734e(0x2ac)](_0x49b385[_0x53734e(0x20c)]['id'],_0x53734e(0x2b3),{'parse_mode':_0x53734e(0x1c9)})[_0x53734e(0x1df)](_0x5fe6e=>{telegramError(_0x5fe6e);}),![];return!![];}async function initTelegram(){const _0x283eac=_0xa8905c;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x283eac(0x20e)],{'polling':!![]});let _0x46eee2='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x46eee2+='\x0a',_0x46eee2+='/enable\x20-\x20enable\x20notifications\x0a',_0x46eee2+='/disable\x20-\x20disable\x20notifications\x0a',_0x46eee2+=_0x283eac(0x2fe),_0x46eee2+=_0x283eac(0x269),_0x46eee2+=_0x283eac(0x263),_0x46eee2+='/off\x20-\x20stop\x20bot(s)\x0a',_0x46eee2+=_0x283eac(0x320),_0x46eee2+=_0x283eac(0x1da),_0x46eee2+=_0x283eac(0x319),_0x46eee2+=_0x283eac(0x296),_0x46eee2+=_0x283eac(0x2dd),_0x46eee2+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x32e268='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x32e268+='\x0a',_0x32e268+=_0x46eee2,tgBot[_0x283eac(0x292)](/\/start/,_0x7a36bc=>{const _0x48674f=_0x283eac;if(!validateTelegram(_0x7a36bc))return;if(settings['telegramChatId']!=_0x7a36bc[_0x48674f(0x20c)]['id'])updateSetting(_0x48674f(0x2d8),_0x7a36bc[_0x48674f(0x20c)]['id']);updateSetting(_0x48674f(0x1f7),!![]),tgBot[_0x48674f(0x2ac)](_0x7a36bc[_0x48674f(0x20c)]['id'],_0x32e268)[_0x48674f(0x1df)](_0x4e4b24=>{telegramError(_0x4e4b24);});}),tgBot['onText'](/\/enable/,_0x2c31e8=>{const _0x4d5faf=_0x283eac;if(!validateTelegram(_0x2c31e8))return;if(settings[_0x4d5faf(0x2d8)]!=_0x2c31e8[_0x4d5faf(0x20c)]['id'])updateSetting(_0x4d5faf(0x2d8),_0x2c31e8['chat']['id']);updateSetting(_0x4d5faf(0x1f7),!![]),tgBot['sendMessage'](_0x2c31e8['chat']['id'],'Notifications\x20enabled')['catch'](_0x5c5854=>{telegramError(_0x5c5854);});}),tgBot['onText'](/\/config/,async _0x51cc11=>{const _0x32e26a=_0x283eac;if(!validateTelegram(_0x51cc11))return;tgBot[_0x32e26a(0x25c)](_0x32e26a(0x2d6)),tgBot[_0x32e26a(0x2ac)](_0x51cc11[_0x32e26a(0x20c)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x32e26a(0x335),'callback_data':'orders'},{'text':_0x32e26a(0x2ea),'callback_data':_0x32e26a(0x2db)},{'text':_0x32e26a(0x349),'callback_data':'all'}]]}})[_0x32e26a(0x1df)](_0x2ef69e=>{telegramError(_0x2ef69e);}),tgBot['on'](_0x32e26a(0x2d6),async _0x551ad6=>{const _0x505f0e=_0x32e26a,_0x157705=_0x551ad6['data'],_0xf7b7e6=_0x551ad6[_0x505f0e(0x2df)];tgBot[_0x505f0e(0x33c)](_0x551ad6['id'])['then'](async()=>{const _0x55008a=_0x505f0e;_0x157705==_0x55008a(0x264)&&(updateSetting(_0x55008a(0x280),_0x55008a(0x264)),updateSetting('telegramEnabled',!![]),await tgBot[_0x55008a(0x2ac)](_0xf7b7e6[_0x55008a(0x20c)]['id'],_0x55008a(0x256))[_0x55008a(0x1df)](_0x2e9988=>{telegramError(_0x2e9988);}));_0x157705==_0x55008a(0x2db)&&(updateSetting('telegramEvents',_0x55008a(0x2db)),updateSetting(_0x55008a(0x1f7),!![]),await tgBot[_0x55008a(0x2ac)](_0xf7b7e6[_0x55008a(0x20c)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x55008a(0x1df)](_0x4b0158=>{telegramError(_0x4b0158);}));_0x157705==_0x55008a(0x285)&&(updateSetting(_0x55008a(0x280),_0x55008a(0x285)),updateSetting(_0x55008a(0x1f7),!![]),await tgBot[_0x55008a(0x2ac)](_0xf7b7e6['chat']['id'],_0x55008a(0x245))[_0x55008a(0x1df)](_0x10e981=>{telegramError(_0x10e981);}));if(!settings[_0x55008a(0x2d8)])tgBot[_0x55008a(0x2ac)](_0xf7b7e6['chat']['id'],_0x55008a(0x27c))[_0x55008a(0x1df)](_0x20968f=>{telegramError(_0x20968f);});}),tgBot['removeListener'](_0x505f0e(0x2d6));});}),tgBot['onText'](/\/status/,_0x3d71a7=>{const _0x229adf=_0x283eac;if(!validateTelegram(_0x3d71a7))return;const _0x2c4eb1=getBotsWithMode();let _0x34b649='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x229adf(0x2e6)](_0x789285=>{const _0x8c19c0=_0x229adf,_0x48242a=_0x2c4eb1[_0x8c19c0(0x24e)](_0x17d4b0=>_0x17d4b0[_0x8c19c0(0x2c7)]==_0x789285['botID'])[_0x8c19c0(0x276)];_0x34b649+=_0x8c19c0(0x27a)+_0x789285[_0x8c19c0(0x2c7)]+':\x20'+_0x789285[_0x8c19c0(0x2ba)]+_0x8c19c0(0x2b7)+_0x48242a+'\x20|\x20'+_0x789285[_0x8c19c0(0x2bc)]+'\x0a';}),_0x34b649+='\x0a',_0x34b649+=_0x229adf(0x2eb),_0x34b649+=!settings[_0x229adf(0x1f7)]?'Notifications\x20disabled\x0a':_0x229adf(0x350),_0x34b649+=settings[_0x229adf(0x1f7)]?settings[_0x229adf(0x280)]=='all'?_0x229adf(0x2fd):_0x229adf(0x2a3)+settings[_0x229adf(0x280)]+_0x229adf(0x1cc):'',tgBot[_0x229adf(0x2ac)](_0x3d71a7[_0x229adf(0x20c)]['id'],_0x34b649,{'parse_mode':'HTML'})[_0x229adf(0x1df)](_0x1b3539=>{telegramError(_0x1b3539);});}),tgBot['onText'](/\/restart/,_0x5b777e=>{const _0x4fdf72=_0x283eac;if(!validateTelegram(_0x5b777e))return;tgBot['removeListener'](_0x4fdf72(0x2d6));const _0x334531=getEnabledBots();if(_0x334531[_0x4fdf72(0x250)]==0x0)tgBot[_0x4fdf72(0x2ac)](_0x5b777e['chat']['id'],_0x4fdf72(0x242))[_0x4fdf72(0x1df)](_0x1fc565=>{telegramError(_0x1fc565);});else{if(_0x334531[_0x4fdf72(0x250)]>0x1)_0x334531[_0x4fdf72(0x1eb)]({'botID':_0x4fdf72(0x285)});let _0x54d106=[],_0x2e4610=[];const _0x2c70b8=_0x334531[_0x4fdf72(0x250)]%0x4==0x0||_0x334531[_0x4fdf72(0x250)]%0x4==0x3||_0x334531[_0x4fdf72(0x250)]%0x3==0x1?0x4:0x3;let _0x5e1002=0x0;_0x334531[_0x4fdf72(0x2e6)]((_0x583a47,_0x1ff582)=>{const _0x573d7d=_0x4fdf72;if(_0x1ff582%_0x2c70b8==0x0)_0x2e4610=[];_0x2e4610['push']({'text':_0x583a47[_0x573d7d(0x2c7)]==_0x573d7d(0x285)?'All\x20bots':_0x573d7d(0x27a)+_0x583a47[_0x573d7d(0x2c7)],'callback_data':_0x583a47['botID']}),_0x1ff582%_0x2c70b8==0x0&&(_0x54d106[_0x5e1002]=_0x2e4610,_0x5e1002++);}),tgBot[_0x4fdf72(0x2ac)](_0x5b777e[_0x4fdf72(0x20c)]['id'],_0x4fdf72(0x1fd),{'reply_markup':{'inline_keyboard':_0x54d106}})[_0x4fdf72(0x1df)](_0x1945b0=>{telegramError(_0x1945b0);}),tgBot['on'](_0x4fdf72(0x2d6),async _0x3a2a8d=>{const _0x320c89=_0x4fdf72,_0x2f7e01=_0x3a2a8d[_0x320c89(0x1d1)],_0x4bcc66=_0x3a2a8d['message'];tgBot[_0x320c89(0x33c)](_0x3a2a8d['id'])[_0x320c89(0x26e)](async()=>{const _0x31ce81=_0x320c89;_0x2f7e01==_0x31ce81(0x285)?config[_0x31ce81(0x2e6)](_0x3e2d20=>{const _0x24fa3b=_0x31ce81;restartBot(_0x3e2d20[_0x24fa3b(0x2c7)]);}):restartBot(_0x2f7e01);}),tgBot[_0x320c89(0x25c)](_0x320c89(0x2d6));});}}),tgBot[_0x283eac(0x292)](/\/on/,_0x539ba3=>{const _0x2bc7fc=_0x283eac;if(!validateTelegram(_0x539ba3))return;tgBot[_0x2bc7fc(0x25c)](_0x2bc7fc(0x2d6));const _0x30782f=getDisabledBots();if(_0x30782f[_0x2bc7fc(0x250)]==0x0)tgBot[_0x2bc7fc(0x2ac)](_0x539ba3[_0x2bc7fc(0x20c)]['id'],_0x2bc7fc(0x28a))[_0x2bc7fc(0x1df)](_0x3f2e7c=>{telegramError(_0x3f2e7c);});else{if(_0x30782f[_0x2bc7fc(0x250)]>0x1)_0x30782f[_0x2bc7fc(0x1eb)]({'botID':_0x2bc7fc(0x285)});let _0x3d1682=[],_0x53c551=[];const _0x523648=_0x30782f['length']%0x4==0x0||_0x30782f['length']%0x4==0x3||_0x30782f[_0x2bc7fc(0x250)]%0x3==0x1?0x4:0x3;let _0x2120f9=0x0;_0x30782f['forEach']((_0x42cf50,_0x1ebd6d)=>{const _0x5d4123=_0x2bc7fc;if(_0x1ebd6d%_0x523648==0x0)_0x53c551=[];_0x53c551[_0x5d4123(0x1eb)]({'text':_0x42cf50[_0x5d4123(0x2c7)]==_0x5d4123(0x285)?_0x5d4123(0x260):'Bot\x20'+_0x42cf50[_0x5d4123(0x2c7)],'callback_data':_0x42cf50[_0x5d4123(0x2c7)]}),_0x1ebd6d%_0x523648==0x0&&(_0x3d1682[_0x2120f9]=_0x53c551,_0x2120f9++);}),tgBot[_0x2bc7fc(0x2ac)](_0x539ba3[_0x2bc7fc(0x20c)]['id'],_0x2bc7fc(0x1f4),{'reply_markup':{'inline_keyboard':_0x3d1682}})[_0x2bc7fc(0x1df)](_0x27ae7e=>{telegramError(_0x27ae7e);}),tgBot['on'](_0x2bc7fc(0x2d6),async _0x5f46e0=>{const _0x537b3c=_0x2bc7fc,_0x50bbe6=_0x5f46e0[_0x537b3c(0x1d1)],_0x20fe24=_0x5f46e0[_0x537b3c(0x2df)];tgBot[_0x537b3c(0x33c)](_0x5f46e0['id'])[_0x537b3c(0x26e)](async()=>{const _0x219c1c=_0x537b3c;_0x50bbe6==_0x219c1c(0x285)?(tgBot[_0x219c1c(0x2ac)](_0x20fe24[_0x219c1c(0x20c)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x219c1c(0x1df)](_0xaa0f29=>{telegramError(_0xaa0f29);}),_0x30782f[_0x219c1c(0x2e6)](_0x348e71=>{const _0x3e6820=_0x219c1c;if(_0x348e71[_0x3e6820(0x2c7)]!='all')toggleBot(_0x348e71[_0x3e6820(0x2c7)],toggleStatus(_0x348e71[_0x3e6820(0x2c7)]),_0x3e6820(0x259));})):(tgBot[_0x219c1c(0x2ac)](_0x20fe24[_0x219c1c(0x20c)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x50bbe6)[_0x219c1c(0x1df)](_0x53a7a8=>{telegramError(_0x53a7a8);}),toggleBot(_0x50bbe6,toggleStatus(_0x50bbe6),_0x219c1c(0x259)));}),tgBot[_0x537b3c(0x25c)](_0x537b3c(0x2d6));});}}),tgBot[_0x283eac(0x292)](/\/off/,_0x23c04e=>{const _0x3ff314=_0x283eac;if(!validateTelegram(_0x23c04e))return;tgBot[_0x3ff314(0x25c)](_0x3ff314(0x2d6));const _0x4d5f20=getEnabledBots();if(_0x4d5f20['length']==0x0)tgBot[_0x3ff314(0x2ac)](_0x23c04e['chat']['id'],_0x3ff314(0x242))[_0x3ff314(0x1df)](_0x519b8d=>{telegramError(_0x519b8d);});else{if(_0x4d5f20['length']>0x1)_0x4d5f20[_0x3ff314(0x1eb)]({'botID':_0x3ff314(0x285)});let _0x3fa823=[],_0x2b0bce=[];const _0x20d42f=_0x4d5f20['length']%0x4==0x0||_0x4d5f20[_0x3ff314(0x250)]%0x4==0x3||_0x4d5f20[_0x3ff314(0x250)]%0x3==0x1?0x4:0x3;let _0x32b26a=0x0;_0x4d5f20['forEach']((_0x51d9f5,_0x7c83ae)=>{const _0x2b7291=_0x3ff314;if(_0x7c83ae%_0x20d42f==0x0)_0x2b0bce=[];_0x2b0bce[_0x2b7291(0x1eb)]({'text':_0x51d9f5[_0x2b7291(0x2c7)]==_0x2b7291(0x285)?_0x2b7291(0x260):_0x2b7291(0x27a)+_0x51d9f5['botID'],'callback_data':_0x51d9f5['botID']}),_0x7c83ae%_0x20d42f==0x0&&(_0x3fa823[_0x32b26a]=_0x2b0bce,_0x32b26a++);}),tgBot[_0x3ff314(0x2ac)](_0x23c04e['chat']['id'],_0x3ff314(0x253),{'reply_markup':{'inline_keyboard':_0x3fa823}})[_0x3ff314(0x1df)](_0x296733=>{telegramError(_0x296733);}),tgBot['on'](_0x3ff314(0x2d6),async _0x1585f6=>{const _0x1e61bb=_0x3ff314,_0x4fe405=_0x1585f6[_0x1e61bb(0x1d1)],_0x577b0c=_0x1585f6['message'];tgBot[_0x1e61bb(0x33c)](_0x1585f6['id'])[_0x1e61bb(0x26e)](async()=>{const _0x185512=_0x1e61bb;_0x4fe405==_0x185512(0x285)?(tgBot['sendMessage'](_0x577b0c[_0x185512(0x20c)]['id'],_0x185512(0x27d))[_0x185512(0x1df)](_0x51bea0=>{telegramError(_0x51bea0);}),_0x4d5f20[_0x185512(0x2e6)](_0x28fcc7=>{const _0x1e5179=_0x185512;if(_0x28fcc7[_0x1e5179(0x2c7)]!=_0x1e5179(0x285))toggleBot(_0x28fcc7['botID'],toggleStatus(_0x28fcc7[_0x1e5179(0x2c7)]),'stopped');})):(tgBot['sendMessage'](_0x577b0c[_0x185512(0x20c)]['id'],_0x185512(0x325)+_0x4fe405)[_0x185512(0x1df)](_0x13c2e0=>{telegramError(_0x13c2e0);}),toggleBot(_0x4fe405,toggleStatus(_0x4fe405),_0x185512(0x259)));}),tgBot['removeListener'](_0x1e61bb(0x2d6));});}}),tgBot[_0x283eac(0x292)](/\/portfolio/,_0x408680=>{const _0x25ef7a=_0x283eac;if(!validateTelegram(_0x408680))return;tgBot['removeListener'](_0x25ef7a(0x2d6));const _0x2d09b1=getEnabledBots();if(_0x2d09b1[_0x25ef7a(0x250)]==0x0)tgBot[_0x25ef7a(0x2ac)](_0x408680[_0x25ef7a(0x20c)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x25ef7a(0x1df)](_0x20d63e=>{telegramError(_0x20d63e);});else{if(_0x2d09b1[_0x25ef7a(0x250)]>0x1){let _0x31a152=[],_0x1652a1=[];const _0x43ef08=_0x2d09b1[_0x25ef7a(0x250)]%0x4==0x0||_0x2d09b1[_0x25ef7a(0x250)]%0x4==0x3||_0x2d09b1[_0x25ef7a(0x250)]%0x3==0x1?0x4:0x3;let _0x8132a3=0x0;_0x2d09b1[_0x25ef7a(0x2e6)]((_0x78c899,_0x5e4471)=>{const _0x5988d3=_0x25ef7a;if(_0x5e4471%_0x43ef08==0x0)_0x1652a1=[];_0x1652a1[_0x5988d3(0x1eb)]({'text':_0x5988d3(0x27a)+_0x78c899[_0x5988d3(0x2c7)],'callback_data':_0x78c899[_0x5988d3(0x2c7)]}),_0x5e4471%_0x43ef08==0x0&&(_0x31a152[_0x8132a3]=_0x1652a1,_0x8132a3++);}),tgBot[_0x25ef7a(0x2ac)](_0x408680['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x31a152}})[_0x25ef7a(0x1df)](_0x3c0633=>{telegramError(_0x3c0633);}),tgBot['on'](_0x25ef7a(0x2d6),async _0xc9944a=>{const _0xd598ed=_0x25ef7a,_0x3c7d2d=_0xc9944a[_0xd598ed(0x1d1)],_0x5491c1=_0xc9944a[_0xd598ed(0x2df)];tgBot[_0xd598ed(0x33c)](_0xc9944a['id'])[_0xd598ed(0x26e)](async()=>{const _0x3b99a4=_0xd598ed;if(pid[_0x3c7d2d])pid[_0x3c7d2d][_0x3b99a4(0x299)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0xd598ed(0x25c)](_0xd598ed(0x2d6));});}else{const _0x432e76=_0x2d09b1[0x0][_0x25ef7a(0x2c7)];if(pid[_0x432e76])pid[_0x432e76][_0x25ef7a(0x299)]({'function':_0x25ef7a(0x27f),'args':null});}}}),tgBot[_0x283eac(0x292)](/\/update/,async _0x230d2f=>{const _0x38ab88=_0x283eac;if(!validateTelegram(_0x230d2f))return;tgBot[_0x38ab88(0x25c)](_0x38ab88(0x2d6)),await getMessages();if(!updateAvailable)tgBot[_0x38ab88(0x2ac)](_0x230d2f[_0x38ab88(0x20c)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')['catch'](_0x1e7a34=>{telegramError(_0x1e7a34);});else!validInstallation?tgBot[_0x38ab88(0x2ac)](_0x230d2f['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x38ab88(0x1df)](_0x33f2f8=>{telegramError(_0x33f2f8);}):(tgBot[_0x38ab88(0x2ac)](_0x230d2f[_0x38ab88(0x20c)]['id'],_0x38ab88(0x30d),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x38ab88(0x30c)},{'text':'No','callback_data':'no'}]]}})[_0x38ab88(0x1df)](_0x58b071=>{telegramError(_0x58b071);}),tgBot['on'](_0x38ab88(0x2d6),async _0x3aa734=>{const _0x423c7f=_0x38ab88,_0xb34cc9=_0x3aa734[_0x423c7f(0x1d1)],_0x3950e8=_0x3aa734[_0x423c7f(0x2df)];tgBot[_0x423c7f(0x33c)](_0x3aa734['id'])[_0x423c7f(0x26e)](async()=>{const _0x23f69d=_0x423c7f;_0xb34cc9==_0x23f69d(0x30c)&&(await tgBot[_0x23f69d(0x2ac)](_0x3950e8['chat']['id'],_0x23f69d(0x2c5))[_0x23f69d(0x1df)](_0xe339f5=>{telegramError(_0xe339f5);}),updateBB());_0xb34cc9=='no'&&await tgBot[_0x23f69d(0x2ac)](_0x3950e8['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')['catch'](_0x9109a7=>{telegramError(_0x9109a7);});if(!settings[_0x23f69d(0x2d8)])tgBot[_0x23f69d(0x2ac)](_0x3950e8[_0x23f69d(0x20c)]['id'],_0x23f69d(0x27c))[_0x23f69d(0x1df)](_0x2352f6=>{telegramError(_0x2352f6);});}),tgBot[_0x423c7f(0x25c)](_0x423c7f(0x2d6));}));}),tgBot[_0x283eac(0x292)](/\/toggle/,_0x34cfaa=>{const _0x1b48dd=_0x283eac;if(!validateTelegram(_0x34cfaa))return;tgBot['removeListener'](_0x1b48dd(0x2d6));const _0x90448b=getBotsWithMode();if(_0x90448b[_0x1b48dd(0x250)]==0x0)tgBot['sendMessage'](_0x34cfaa[_0x1b48dd(0x20c)]['id'],_0x1b48dd(0x242))['catch'](_0x5b616d=>{telegramError(_0x5b616d);});else{let _0x15a93a=[],_0x6725c9=[];const _0x28051f=0x2;let _0x19115c=0x0;_0x90448b[_0x1b48dd(0x2e6)]((_0x15bc15,_0xa1888e)=>{const _0x18dd49=_0x1b48dd;if(_0xa1888e%_0x28051f==0x0)_0x6725c9=[];_0x6725c9['push']({'text':_0x18dd49(0x27a)+_0x15bc15[_0x18dd49(0x2c7)]+'\x20('+_0x15bc15[_0x18dd49(0x276)]+')','callback_data':_0x15bc15[_0x18dd49(0x2c7)]}),_0xa1888e%_0x28051f==0x0&&(_0x15a93a[_0x19115c]=_0x6725c9,_0x19115c++);}),tgBot['sendMessage'](_0x34cfaa['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x15a93a}})[_0x1b48dd(0x1df)](_0x4f59a7=>{telegramError(_0x4f59a7);}),tgBot['on'](_0x1b48dd(0x2d6),async _0x44c674=>{const _0x337006=_0x1b48dd,_0xe60b8b=_0x44c674['data'],_0x2990ab=_0x44c674[_0x337006(0x2df)];tgBot[_0x337006(0x33c)](_0x44c674['id'])['then'](async()=>{const _0x59b25d=_0x337006,_0x4391e6=_0x90448b['find'](_0x48ccca=>_0x48ccca[_0x59b25d(0x2c7)]==_0xe60b8b),_0x2b2b77=_0x4391e6[_0x59b25d(0x276)]==_0x59b25d(0x277)?'manual':_0x59b25d(0x277);tgBot[_0x59b25d(0x2ac)](_0x2990ab[_0x59b25d(0x20c)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0xe60b8b+'\x20to\x20'+_0x2b2b77+'\x20mode')[_0x59b25d(0x1df)](_0x399ecf=>{telegramError(_0x399ecf);}),toggleBotMode(_0xe60b8b);}),tgBot[_0x337006(0x25c)](_0x337006(0x2d6));});}}),tgBot[_0x283eac(0x292)](/\/names/,_0x2be207=>{const _0x2e36ce=_0x283eac;if(!validateTelegram(_0x2be207))return;let _0x3b7551='';config[_0x2e36ce(0x2e6)](_0x19e225=>{const _0x2a9fb1=_0x2e36ce;_0x3b7551+=_0x2a9fb1(0x27a)+_0x19e225['botID']+':\x20'+_0x19e225[_0x2a9fb1(0x272)]+'\x0a';}),tgBot[_0x2e36ce(0x2ac)](_0x2be207[_0x2e36ce(0x20c)]['id'],_0x3b7551,{'parse_mode':_0x2e36ce(0x1c9)})[_0x2e36ce(0x1df)](_0x407418=>{telegramError(_0x407418);});}),tgBot[_0x283eac(0x292)](/\/disable/,_0x646275=>{const _0x319760=_0x283eac;if(!validateTelegram(_0x646275))return;tgBot['sendMessage'](_0x646275[_0x319760(0x20c)]['id'],_0x319760(0x338))[_0x319760(0x1df)](_0x2ab561=>{telegramError(_0x2ab561);}),updateSetting(_0x319760(0x1f7),![]);}),tgBot[_0x283eac(0x292)](/\/help/,_0x23afee=>{const _0x4ac0d7=_0x283eac;if(!validateTelegram(_0x23afee))return;tgBot[_0x4ac0d7(0x2ac)](_0x23afee[_0x4ac0d7(0x20c)]['id'],_0x46eee2)[_0x4ac0d7(0x1df)](_0x694d6f=>{telegramError(_0x694d6f);});}),tgBot['on'](_0x283eac(0x206),_0x464e0c=>{const _0xdf0347=_0x283eac;_0x464e0c['toString']()[_0xdf0347(0x1d2)]('404\x20Not\x20Found')&&(logger[_0xdf0347(0x2a5)](_0xdf0347(0x1c6)),tgBot[_0xdf0347(0x2a8)](),tgBot=null,io['to'](_0xdf0347(0x1f1))[_0xdf0347(0x21e)](_0xdf0347(0x343),_0xdf0347(0x1c6)));}),process[_0x283eac(0x2a4)]('SIGINT',()=>{const _0x5590a4=_0x283eac;if(tgBot)tgBot['stopPolling']();process[_0x5590a4(0x304)](0x1);}),process[_0x283eac(0x2a4)](_0x283eac(0x2e4),()=>{const _0xe77380=_0x283eac;if(tgBot)tgBot['stopPolling']();process[_0xe77380(0x304)](0x1);});}}function disableTelegram(){const _0x2ae2ff=_0xa8905c;tgBot&&(tgBot[_0x2ae2ff(0x2a8)](),tgBot=null);}function sendTelegram(_0x49cbdc,_0x2db388){const _0x2a3da2=_0xa8905c;if(settings['telegramEnabled']){if(settings[_0x2a3da2(0x280)]==_0x2a3da2(0x285)||(_0x2db388['type']==_0x2a3da2(0x23c)||_0x2db388[_0x2a3da2(0x26b)]=='warning'||_0x2db388['type']==_0x2a3da2(0x201))&&settings[_0x2a3da2(0x280)]==_0x2a3da2(0x2db)||_0x2db388[_0x2a3da2(0x26b)]==_0x2a3da2(0x22d)&&settings[_0x2a3da2(0x280)]==_0x2a3da2(0x264)){if(tgBot&&settings[_0x2a3da2(0x2d8)]){if(_0x2db388[_0x2a3da2(0x2af)])tgBot[_0x2a3da2(0x2ac)](settings[_0x2a3da2(0x2d8)],_0x2db388[_0x2a3da2(0x272)]+_0x2a3da2(0x262)+_0x2db388['event'])[_0x2a3da2(0x1df)](_0x11e0c4=>{telegramError(_0x11e0c4);});else tgBot['sendMessage'](settings[_0x2a3da2(0x2d8)],_0x2a3da2(0x27a)+_0x49cbdc+_0x2a3da2(0x262)+_0x2db388[_0x2a3da2(0x236)])[_0x2a3da2(0x1df)](_0x2efd3f=>{telegramError(_0x2efd3f);});}}}}async function sendTelegramMsg(_0x2ab3d7,_0x5a2cfa=_0xa8905c(0x1c9)){const _0x4a297c=_0xa8905c;return settings[_0x4a297c(0x1f7)]&&tgBot&&settings[_0x4a297c(0x2d8)]?(await tgBot[_0x4a297c(0x2ac)](settings['telegramChatId'],_0x2ab3d7,{'parse_mode':_0x5a2cfa})[_0x4a297c(0x1df)](_0x52d4f3=>{telegramError(_0x52d4f3);}),!![]):![];}function getDeviceWithIp(_0x3b0758){const _0x13c937=_0xa8905c;return devices[_0x13c937(0x24e)](_0x30875c=>_0x30875c['ip']===_0x3b0758);}function temporaryAccess2FA(_0x10b320,_0x3508ed){const _0x23014d=_0xa8905c;let _0x47d493=new Date(),_0x126047=![];if(lastIpApproval){if(_0x47d493-lastIpApproval<0x1388)_0x126047=!![];}lastIpApproval=new Date();if(_0x126047)return;tgBot&&settings[_0x23014d(0x2d8)]&&(tgBot[_0x23014d(0x25c)](_0x23014d(0x2d6)),tgBot[_0x23014d(0x2ac)](settings[_0x23014d(0x2d8)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3508ed)[_0x23014d(0x348)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x23014d(0x2b2),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x23014d(0x2e7)}]]}})[_0x23014d(0x1df)](_0x48d74a=>{telegramError(_0x48d74a);}),tgBot['on']('callback_query',async _0x1ba9e1=>{const _0x1ab34b=_0x23014d,_0x722b83=_0x1ba9e1[_0x1ab34b(0x1d1)],_0x169d6f=_0x1ba9e1['message'];tgBot[_0x1ab34b(0x33c)](_0x1ba9e1['id'])['then'](async()=>{const _0x76be15=_0x1ab34b;devices[_0x10b320][_0x76be15(0x1e3)]={'clientip':_0x3508ed,'timestamp':new Date()[_0x76be15(0x290)](),'expiry':_0x722b83},_0x722b83!=_0x76be15(0x2e7)?(await tgBot['sendMessage'](_0x169d6f[_0x76be15(0x20c)]['id'],_0x76be15(0x24b)+_0x722b83+'\x20minutes',{'parse_mode':_0x76be15(0x1c9)})['catch'](_0x428d43=>{telegramError(_0x428d43);}),io['to'](_0x10b320)[_0x76be15(0x21e)](_0x76be15(0x2ba),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x76be15(0x2ac)](_0x169d6f['chat']['id'],'Temporary\x20access\x20rejected')[_0x76be15(0x1df)](_0x214a28=>{telegramError(_0x214a28);}),io['to'](_0x10b320)[_0x76be15(0x21e)](_0x76be15(0x2ba),{'access':{'allow':![],'reason':_0x76be15(0x2a2),'token':null}}));}),tgBot[_0x1ab34b(0x25c)](_0x1ab34b(0x2d6));}));}function loginAccess2FA(_0x292eaf,_0x51cb1d){const _0x2674ae=_0xa8905c;tgBot&&settings[_0x2674ae(0x2d8)]&&(tgBot['removeListener'](_0x2674ae(0x2d6)),tgBot[_0x2674ae(0x2ac)](settings[_0x2674ae(0x2d8)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x51cb1d)[_0x2674ae(0x348)]+_0x2674ae(0x1d7),{'parse_mode':_0x2674ae(0x1c9),'reply_markup':{'inline_keyboard':[[{'text':_0x2674ae(0x247),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x2674ae(0x2e7)}]]}})['catch'](_0x2892cf=>{telegramError(_0x2892cf);}),tgBot['on'](_0x2674ae(0x2d6),async _0x512b0c=>{const _0x1d5d0a=_0x2674ae,_0x4d5adf=_0x512b0c[_0x1d5d0a(0x1d1)],_0x16f80b=_0x512b0c[_0x1d5d0a(0x2df)];tgBot[_0x1d5d0a(0x33c)](_0x512b0c['id'])[_0x1d5d0a(0x26e)](async()=>{const _0x4d6623=_0x1d5d0a;devices[_0x292eaf][_0x4d6623(0x2e9)]={'clientip':_0x51cb1d,'timestamp':new Date()[_0x4d6623(0x290)](),'expiry':_0x4d5adf},_0x4d5adf!=_0x4d6623(0x2e7)?(await tgBot['sendMessage'](_0x16f80b[_0x4d6623(0x20c)]['id'],_0x4d6623(0x1c5),{'parse_mode':'HTML'})[_0x4d6623(0x1df)](_0x304176=>{telegramError(_0x304176);}),io['to'](_0x292eaf)[_0x4d6623(0x21e)]('status',{'access':{'allow':![],'reason':_0x4d6623(0x2da),'token':null}})):(await tgBot[_0x4d6623(0x2ac)](_0x16f80b['chat']['id'],_0x4d6623(0x332))[_0x4d6623(0x1df)](_0x5c6748=>{telegramError(_0x5c6748);}),io['to'](_0x292eaf)[_0x4d6623(0x21e)](_0x4d6623(0x2ba),{'access':{'allow':![],'reason':_0x4d6623(0x25d),'token':null}}));}),tgBot[_0x1d5d0a(0x25c)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x30cc74=_0xa8905c;return dbConfig[_0x30cc74(0x2d9)](_0x30cc74(0x22b))['sortBy'](_0x30cc74(0x2c7))[_0x30cc74(0x31a)]({'status':'enabled'})[_0x30cc74(0x1c7)]()||[];}function getDisabledBots(){const _0x2b6132=_0xa8905c;return dbConfig['get'](_0x2b6132(0x22b))[_0x2b6132(0x34d)]('botID')[_0x2b6132(0x31a)]({'status':_0x2b6132(0x28b)})[_0x2b6132(0x1c7)]()||[];}function getBotAttributes(_0x4b832f){const _0x13d6bc=_0xa8905c;let _0x5111c1={};const _0x54ec22=configpath+_0x13d6bc(0x302)+_0x4b832f+_0x13d6bc(0x317),_0x335836=fs[_0x13d6bc(0x238)](_0x54ec22);if(_0x335836){const _0x2f0895=fs[_0x13d6bc(0x234)](_0x54ec22);try{const _0x1f4bd9=JSON[_0x13d6bc(0x307)](_0x2f0895),_0x88ea34=_0x1f4bd9?_0x1f4bd9[_0x13d6bc(0x246)][0x0][_0x13d6bc(0x21d)]:![];_0x5111c1['mode']=_0x88ea34?_0x13d6bc(0x277):_0x13d6bc(0x2ae),_0x5111c1[_0x13d6bc(0x272)]=_0x1f4bd9?_0x1f4bd9['bot'][0x0][_0x13d6bc(0x272)]:'Bot\x20'+_0x4b832f;}catch(_0xba5b3b){_0x5111c1[_0x13d6bc(0x276)]='manual',_0x5111c1['botname']=_0x13d6bc(0x27a)+_0x4b832f;}}else _0x5111c1['mode']=_0x13d6bc(0x2ae),_0x5111c1[_0x13d6bc(0x272)]=_0x13d6bc(0x27a)+_0x4b832f;return _0x5111c1;}function getBotsWithMode(){const _0x586a26=_0xa8905c,_0x19a5b0=dbConfig['get'](_0x586a26(0x22b))[_0x586a26(0x34d)](_0x586a26(0x2c7))[_0x586a26(0x1c7)]()||[];return _0x19a5b0[_0x586a26(0x2e6)](_0x30b7d7=>{const _0xf65c=_0x586a26;let _0x3ceed0=getBotAttributes(_0x30b7d7[_0xf65c(0x2c7)]);_0x30b7d7[_0xf65c(0x276)]=_0x3ceed0[_0xf65c(0x276)];}),_0x19a5b0;}function getBotExchanges(){const _0x249206=_0xa8905c;let _0x377788=[];const _0x29419f=dbConfig['get']('bots')[_0x249206(0x34d)](_0x249206(0x2c7))['value']()||[];_0x29419f[_0x249206(0x2e6)](_0x133643=>{const _0x5140f2=_0x249206;if(_0x133643['status']==_0x5140f2(0x22c)){const _0x49f28f=configpath+_0x5140f2(0x302)+_0x133643[_0x5140f2(0x2c7)]+'-config.json',_0x3a1fd0=fs['existsSync'](_0x49f28f);let _0x42f607;if(_0x3a1fd0){const _0x5ceb76=fs['readFileSync'](_0x49f28f);try{const _0x562b2f=JSON['parse'](_0x5ceb76);_0x42f607=_0x562b2f?_0x562b2f[_0x5140f2(0x246)][0x0]['exchange']:null;}catch(_0x5a2938){}}if(_0x42f607)_0x377788[_0x5140f2(0x1eb)](_0x42f607);}});const _0x4b4cec=[...new Set(_0x377788)]['sort']();return _0x4b4cec;}async function initUser(){const _0x5769ef=_0xa8905c;if(!settings[_0x5769ef(0x267)]){const _0x36ed93=uuidRandom();mixpanel['alias'](_0x36ed93),updateSetting(_0x5769ef(0x267),_0x36ed93);}}async function initSecure(){const _0x1e05cc=_0xa8905c;let _0x20bc02=getSecure();if(!_0x20bc02[_0x1e05cc(0x34b)](_0x1e05cc(0x231))){let _0xb18dec=await generateKeys();_0x20bc02['publicKey']=_0xb18dec[_0x1e05cc(0x31c)],_0x20bc02[_0x1e05cc(0x249)]=_0xb18dec[_0x1e05cc(0x249)],_0x20bc02[_0x1e05cc(0x231)]=crypto[_0x1e05cc(0x239)](0x20)[_0x1e05cc(0x1e5)](_0x1e05cc(0x2aa));;storeSecure(_0x20bc02);}}function getSettings(){const _0x45119e=_0xa8905c;return dbSettings['get'](_0x45119e(0x312))[_0x45119e(0x1c7)]()||{};}function getSecure(){const _0x58167b=_0xa8905c;return dbSecure[_0x58167b(0x2d9)](_0x58167b(0x22f))[_0x58167b(0x1c7)]()||{};}function getBlacklist(){const _0x1d11ca=_0xa8905c;return dbSecure[_0x1d11ca(0x2d9)](_0x1d11ca(0x34a))[_0x1d11ca(0x1c7)]()||[];}function broadcastToBots(_0x2af245,_0x5b7d8f){const _0x3fc8c9=_0xa8905c;config[_0x3fc8c9(0x2e6)](_0x25a052=>{const _0x51647d=_0x3fc8c9;if(_0x25a052[_0x51647d(0x2ba)]==_0x51647d(0x22c)&&_0x25a052[_0x51647d(0x2bc)]==_0x51647d(0x316)){if(pid[_0x25a052[_0x51647d(0x2c7)]])pid[_0x25a052['botID']]['send']({[_0x2af245]:_0x5b7d8f});}});}function storeSettings(_0x4f9bce,_0x9d711a=![]){const _0x256033=_0xa8905c;_0x4f9bce={...settings,..._0x4f9bce};if(_0x9d711a&&_0x4f9bce[_0x256033(0x227)]!=_0x256033(0x2c8)&&_0x4f9bce[_0x256033(0x227)]!=_0x256033(0x258)&&_0x4f9bce[_0x256033(0x227)]!=''){const _0x1e0b0f=crypt[_0x256033(0x233)](secure['privateKey'],_0x4f9bce[_0x256033(0x227)])['message'][_0x256033(0x2bd)]('@')[0x0],_0x26f622=bcrypt[_0x256033(0x21b)](_0x1e0b0f,saltRounds);_0x4f9bce={..._0x4f9bce,'bbPassword':_0x26f622};}if(_0x9d711a&&_0x4f9bce[_0x256033(0x20e)]!='************'&&_0x4f9bce[_0x256033(0x20e)]!='***'&&_0x4f9bce[_0x256033(0x20e)]!=''){const _0x2ac943=crypt[_0x256033(0x233)](secure[_0x256033(0x249)],_0x4f9bce[_0x256033(0x20e)])[_0x256033(0x2df)][_0x256033(0x2bd)]('@')[0x0];_0x4f9bce={..._0x4f9bce,'telegramToken':_0x2ac943};}const _0x50ebee=_0x4f9bce[_0x256033(0x20e)]!=_0x256033(0x2c8)&&_0x4f9bce['telegramToken']!=settings[_0x256033(0x20e)]||_0x4f9bce[_0x256033(0x32c)]!=settings[_0x256033(0x32c)],_0x22df2e=_0x4f9bce[_0x256033(0x20e)]==''||_0x4f9bce[_0x256033(0x32c)]=='';if(_0x50ebee)_0x4f9bce[_0x256033(0x280)]='all';for(const [_0x5bc034,_0x4f53ef]of Object['entries'](_0x4f9bce)){if(_0x5bc034=='telegramToken'&&_0x4f53ef==_0x256033(0x2c8)){_0x4f9bce[_0x256033(0x20e)]=settings[_0x256033(0x20e)];continue;};if(_0x5bc034==_0x256033(0x227)&&_0x4f53ef=='************'){_0x4f9bce[_0x256033(0x227)]=settings[_0x256033(0x227)];continue;};dbSettings[_0x256033(0x224)](_0x256033(0x214)+_0x5bc034,_0x4f53ef)[_0x256033(0x1de)]();}settings=_0x4f9bce,io['to'](_0x256033(0x1f1))[_0x256033(0x21e)](_0x256033(0x312),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x50ebee&&!_0x22df2e)initTelegram();if(_0x50ebee&&_0x22df2e)disableTelegram();getAllClients()[_0x256033(0x2e6)](_0x5d4ccc=>{const _0x348dad=_0x256033;getSocket(_0x5d4ccc['id'])[_0x348dad(0x21e)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x247fa9,_0x389020){const _0x359e33=_0xa8905c;dbSettings[_0x359e33(0x224)]('settings.'+_0x247fa9,_0x389020)['write'](),settings=getSettings(),io['to'](_0x359e33(0x1f1))[_0x359e33(0x21e)](_0x359e33(0x312),cleanSettings());}function storeSecure(_0x263709){const _0x25627f=_0xa8905c;dbSecure[_0x25627f(0x2d9)](_0x25627f(0x22f))[_0x25627f(0x1eb)](_0x263709)[_0x25627f(0x1de)](),secure=_0x263709;}function addBlacklist(_0x2f8cc5){const _0x50e102=_0xa8905c;cleanBlacklist();let _0x224b6b;devices[_0x2f8cc5][_0x50e102(0x1e3)]?_0x224b6b=Math[_0x50e102(0x339)](devices[_0x2f8cc5][_0x50e102(0x1e3)][_0x50e102(0x26c)],loginExpiry):_0x224b6b=loginExpiry,dbSecure[_0x50e102(0x2d9)]('blacklist')[_0x50e102(0x1eb)]({'expiry':new Date()[_0x50e102(0x290)]()+_0x224b6b*0x3c*0x3e8,'token':devices[_0x2f8cc5][_0x50e102(0x2cd)]['token']})[_0x50e102(0x1de)](),blacklist=dbSecure[_0x50e102(0x2d9)](_0x50e102(0x34a))[_0x50e102(0x1c7)]();}function cleanBlacklist(){const _0x2d5ef5=_0xa8905c;let _0x1a38bd=dbSecure[_0x2d5ef5(0x2d9)](_0x2d5ef5(0x34a))[_0x2d5ef5(0x30b)]()[_0x2d5ef5(0x1c7)](),_0x47c3aa=new Date()[_0x2d5ef5(0x290)]();_0x1a38bd['forEach'](_0x4e97a1=>{const _0x41371e=_0x2d5ef5;_0x4e97a1[_0x41371e(0x26c)]<_0x47c3aa&&dbSecure[_0x41371e(0x2d9)](_0x41371e(0x34a))[_0x41371e(0x321)]({'expiry':_0x4e97a1[_0x41371e(0x26c)]})[_0x41371e(0x1de)]();});}function initStates(){const _0x1db9ba=_0xa8905c;let _0xf73116=getConfiguration();_0xf73116[_0x1db9ba(0x2e6)](_0x2aba77=>{const _0x34e862=_0x1db9ba;_0x2aba77[_0x34e862(0x2bc)]=_0x34e862(0x259);}),storeConfiguration(_0xf73116);}function onKeys(){const _0xd133e5=new RSA();return new Promise(_0x415fcd=>{const _0x5e7b82=_0x2364;_0xd133e5[_0x5e7b82(0x32d)]()[_0x5e7b82(0x26e)](_0x4c3a40=>{_0x415fcd(_0x4c3a40);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x506edb=_0xa8905c;let _0x63d83a=getSettings(),_0x1c419c=![];!_0x63d83a[_0x506edb(0x34b)](_0x506edb(0x2c6))&&(_0x63d83a[_0x506edb(0x2c6)]=0x0,_0x1c419c=!![]);!_0x63d83a[_0x506edb(0x34b)]('lastmsgemitted')&&(_0x63d83a[_0x506edb(0x29c)]=0x0,_0x1c419c=!![]);!_0x63d83a[_0x506edb(0x34b)](_0x506edb(0x2fc))&&(_0x63d83a[_0x506edb(0x2fc)]=_0x506edb(0x31b),_0x1c419c=!![]);if(_0x1c419c)storeSettings(_0x63d83a);}function storeConfiguration(_0x44cf9f){const _0x6bcd4a=_0xa8905c;dbConfig[_0x6bcd4a(0x2d9)](_0x6bcd4a(0x22b))[_0x6bcd4a(0x321)]()[_0x6bcd4a(0x1de)](),_0x44cf9f['forEach'](_0x2540f7=>{delete _0x2540f7['mode'];}),dbConfig['get'](_0x6bcd4a(0x22b))['push'](..._0x44cf9f)[_0x6bcd4a(0x1de)](),config=_0x44cf9f;}function resetPassword(){const _0x189680=_0xa8905c;tgBot&&settings[_0x189680(0x2d8)]&&(tgBot[_0x189680(0x25c)]('callback_query'),tgBot[_0x189680(0x2ac)](settings[_0x189680(0x2d8)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x189680(0x30c),'callback_data':_0x189680(0x30c)},{'text':'no','callback_data':'no'}]]}})[_0x189680(0x1df)](_0x175b8f=>{telegramError(_0x175b8f);}),tgBot['on'](_0x189680(0x2d6),async _0x264ac2=>{const _0x4ab07d=_0x189680,_0x57eaa2=_0x264ac2[_0x4ab07d(0x1d1)],_0x33eafe=_0x264ac2[_0x4ab07d(0x2df)];tgBot['answerCallbackQuery'](_0x264ac2['id'])[_0x4ab07d(0x26e)](async()=>{const _0x695b1a=_0x4ab07d;if(_0x57eaa2!='no'){const _0x2a0a0c=0xf,_0x8faa53=_0x695b1a(0x230),_0x5800a3=Array[_0x695b1a(0x25e)](crypto[_0x695b1a(0x323)](new Uint32Array(_0x2a0a0c)))['map'](_0x41d84f=>_0x8faa53[_0x41d84f%_0x8faa53[_0x695b1a(0x250)]])[_0x695b1a(0x2bb)](''),_0x4dbe9e=bcrypt[_0x695b1a(0x21b)](_0x5800a3,saltRounds);storeSettings({'bbPassword':_0x4dbe9e}),await tgBot[_0x695b1a(0x2ac)](_0x33eafe[_0x695b1a(0x20c)]['id'],_0x695b1a(0x1e1)+_0x5800a3,{'parse_mode':'HTML'})[_0x695b1a(0x1df)](_0x45d1f7=>{telegramError(_0x45d1f7);});}else await tgBot[_0x695b1a(0x2ac)](_0x33eafe[_0x695b1a(0x20c)]['id'],_0x695b1a(0x219))[_0x695b1a(0x1df)](_0x583e5d=>{telegramError(_0x583e5d);});}),tgBot[_0x4ab07d(0x25c)](_0x4ab07d(0x2d6));}));}async function confirmRestore(_0x4ced18,_0x1cbd6d){const _0x5f1372=_0xa8905c;tgBot&&settings[_0x5f1372(0x2d8)]&&(tgBot[_0x5f1372(0x25c)](_0x5f1372(0x2d6)),await tgBot[_0x5f1372(0x2ac)](settings[_0x5f1372(0x2d8)],_0x5f1372(0x1ef),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x5f1372(0x30c)},{'text':'no','callback_data':'no'}]]}})[_0x5f1372(0x1df)](_0x26e282=>{telegramError(_0x26e282);}),tgBot['on'](_0x5f1372(0x2d6),async _0x76380c=>{const _0x1e07a4=_0x5f1372,_0x36e35b=_0x76380c['data'],_0x3b97c8=_0x76380c[_0x1e07a4(0x2df)];tgBot['answerCallbackQuery'](_0x76380c['id'])[_0x1e07a4(0x26e)](async()=>{const _0x3960c0=_0x1e07a4;_0x36e35b=='yes'?(await tgBot[_0x3960c0(0x2ac)](_0x3b97c8['chat']['id'],_0x3960c0(0x210),{'parse_mode':_0x3960c0(0x1c9)})[_0x3960c0(0x1df)](_0x138d13=>{telegramError(_0x138d13);}),unzipFile(_0x4ced18,_0x1cbd6d)):await tgBot[_0x3960c0(0x2ac)](_0x3b97c8[_0x3960c0(0x20c)]['id'],_0x3960c0(0x22e))['catch'](_0x9dfe4f=>{telegramError(_0x9dfe4f);});}),tgBot[_0x1e07a4(0x25c)](_0x1e07a4(0x2d6));}));}function getServerTime(){const _0x26ea25=_0xa8905c,_0x460a3b=new Date();return _0x460a3b[_0x26ea25(0x208)]()+'/'+(_0x460a3b['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x460a3b[_0x26ea25(0x279)]()[_0x26ea25(0x1e5)]()[_0x26ea25(0x1dd)](0x2,'0')+'\x20'+_0x460a3b[_0x26ea25(0x288)]()[_0x26ea25(0x1e5)]()[_0x26ea25(0x1dd)](0x2,'0')+':'+_0x460a3b[_0x26ea25(0x23b)]()[_0x26ea25(0x1e5)]()['padStart'](0x2,'0')+':'+_0x460a3b['getSeconds']()['toString']()[_0x26ea25(0x1dd)](0x2,'0');}function getTimeStamp(){const _0x4d8373=_0xa8905c,_0x2e596f=shiftedTime();return _0x2e596f['getFullYear']()+'/'+(_0x2e596f[_0x4d8373(0x293)]()+0x1)[_0x4d8373(0x1e5)]()[_0x4d8373(0x1dd)](0x2,'0')+'/'+_0x2e596f['getDate']()['toString']()[_0x4d8373(0x1dd)](0x2,'0')+'\x20'+_0x2e596f[_0x4d8373(0x288)]()['toString']()[_0x4d8373(0x1dd)](0x2,'0')+':'+_0x2e596f[_0x4d8373(0x23b)]()[_0x4d8373(0x1e5)]()[_0x4d8373(0x1dd)](0x2,'0')+':'+_0x2e596f[_0x4d8373(0x309)]()[_0x4d8373(0x1e5)]()[_0x4d8373(0x1dd)](0x2,'0');}function shiftedTime(){const _0xe13f5f=_0xa8905c,_0x42c2e5=new Date();let _0x16b754=_0x42c2e5;if(settings['timeshift']&&settings[_0xe13f5f(0x2e5)]!==0x0)_0x16b754=fns[_0xe13f5f(0x1d6)](_0x42c2e5,{'hours':settings['timeshift']});return _0x16b754;}function startScheduler(){const _0x247982=_0xa8905c,_0x58e08e=new Date()[_0x247982(0x1e9)](),_0x234176=shiftedTime()[_0x247982(0x288)]();_0x234176==0x4&&backupConfigFiles();_0x234176==0x0&&rotateLogFiles();_0x58e08e%0x6==0x0&&triggerAnalytics();_0x58e08e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x10a9da=_0xa8905c;fs[_0x10a9da(0x1f9)](configpath,{'withFileTypes':!![]})[_0x10a9da(0x2e6)](_0x2eeed2=>{const _0x39526e=_0x10a9da;if(!_0x2eeed2[_0x39526e(0x202)]())fs[_0x39526e(0x1e0)](configpath+_0x2eeed2[_0x39526e(0x333)],configbackuppath+_0x2eeed2[_0x39526e(0x333)]);});}function rotateLogFiles(){const _0x5c35e8=_0xa8905c,_0x34d9b0=fs['statSync'](logspath+'output-000.log'),_0x206720=_0x34d9b0[_0x5c35e8(0x283)]/0x400;if(_0x206720>0x32){let _0x2a5888=fs[_0x5c35e8(0x1f9)](logspath,{'withFileTypes':!![]});_0x2a5888[_0x5c35e8(0x2b9)]((_0x2d9ae3,_0x313d8c)=>_0x2d9ae3['name']<_0x313d8c[_0x5c35e8(0x333)]?0x1:_0x313d8c['name']<_0x2d9ae3[_0x5c35e8(0x333)]?-0x1:0x0),_0x2a5888[_0x5c35e8(0x2e6)](_0x238519=>{const _0x935514=_0x5c35e8;if(_0x238519[_0x935514(0x333)]==_0x935514(0x2a7))fs[_0x935514(0x1e0)](logspath+_0x238519[_0x935514(0x333)],logspath+'output-003.log');if(_0x238519[_0x935514(0x333)]=='output-001.log')fs[_0x935514(0x1e0)](logspath+_0x238519[_0x935514(0x333)],logspath+_0x935514(0x2a7));_0x238519[_0x935514(0x333)]==_0x935514(0x322)&&(fs['copyFileSync'](logspath+_0x238519['name'],logspath+_0x935514(0x232)),fs[_0x935514(0x1e6)](logspath+_0x238519[_0x935514(0x333)],''));});}}async function zipFiles(_0x61c7de){const _0x231df7=_0xa8905c;let _0x3bb974;if(_0x61c7de==_0x231df7(0x23e))_0x3bb974=logspath;if(_0x61c7de==_0x231df7(0x24d))_0x3bb974=configpath;let _0x36d667=fs['readdirSync'](_0x3bb974,{'withFileTypes':!![]});const _0x218c84=new require(_0x231df7(0x1ea))();_0x36d667['forEach'](_0x34a6cb=>{const _0x5136be=_0x231df7;if(!_0x34a6cb[_0x5136be(0x202)]()){let _0x567e7f=fs[_0x5136be(0x234)](_0x3bb974+_0x34a6cb['name']);const _0x18419c=/^bot-[0-9]{3}-config.json$/,_0xcea8cc=_0x18419c['test'](_0x34a6cb[_0x5136be(0x333)]);if(_0xcea8cc){const _0x51747b=JSON['parse'](_0x567e7f);_0x51747b[_0x5136be(0x246)][0x0][_0x5136be(0x1c3)]=_0x5136be(0x258),_0x51747b[_0x5136be(0x246)][0x0]['apiSecret']=_0x5136be(0x258),_0x567e7f=JSON[_0x5136be(0x24f)](_0x51747b,null,0x2);}if(_0x34a6cb[_0x5136be(0x333)]=='bb-settings.json'){const _0x464509=JSON['parse'](_0x567e7f);if(_0x464509['settings'][_0x5136be(0x1d9)])_0x464509[_0x5136be(0x312)][_0x5136be(0x1d9)]=![];if(_0x464509[_0x5136be(0x312)][_0x5136be(0x227)])_0x464509['settings']['bbPassword']=_0x5136be(0x258);if(_0x464509[_0x5136be(0x312)][_0x5136be(0x20e)])_0x464509[_0x5136be(0x312)]['telegramToken']=_0x5136be(0x258);if(_0x464509['settings']['telegramChatId'])_0x464509[_0x5136be(0x312)][_0x5136be(0x2d8)]=null;_0x567e7f=JSON[_0x5136be(0x24f)](_0x464509,null,0x2);}if(_0x34a6cb[_0x5136be(0x333)]!='bb-secure.json')_0x218c84[_0x5136be(0x2dc)](_0x34a6cb[_0x5136be(0x333)],_0x567e7f);}});const _0x5c6437=_0x218c84[_0x231df7(0x257)]({'base64':![],'compression':'DEFLATE'});fs[_0x231df7(0x1e6)](zippath+(_0x61c7de+_0x231df7(0x303)),_0x5c6437,_0x231df7(0x297));}async function unzipFile(_0x4bbcd1,_0xb7c595){const _0x17cbb7=_0xa8905c;await backupConfigFiles(),fs[_0x17cbb7(0x1f9)](configpath,{'withFileTypes':!![]})[_0x17cbb7(0x2e6)](_0x25d8b0=>{const _0x55a555=_0x17cbb7;if(!_0x25d8b0['isDirectory']())fs[_0x55a555(0x1f3)](configpath+_0x25d8b0['name']);});const _0x141a4e=fs[_0x17cbb7(0x234)](_0x4bbcd1+_0xb7c595,_0x17cbb7(0x297)),_0x499672=new require('node-zip')(_0x141a4e,{'base64':![],'checkCRC32':!![]});Object[_0x17cbb7(0x32e)](_0x499672[_0x17cbb7(0x1dc)])[_0x17cbb7(0x2e6)](_0x15a473=>{const _0x8ebfec=_0x17cbb7,_0x3cc1f4=_0x499672[_0x8ebfec(0x1dc)][_0x15a473];fs['writeFileSync'](configpath+_0x3cc1f4[_0x8ebfec(0x333)],_0x3cc1f4[_0x8ebfec(0x24a)]);}),fs[_0x17cbb7(0x1f9)](temppath,{'withFileTypes':!![]})[_0x17cbb7(0x2e6)](_0x513a29=>{const _0x20c948=_0x17cbb7;if(!_0x513a29['isDirectory']())fs[_0x20c948(0x1f3)](temppath+_0x513a29[_0x20c948(0x333)]);}),process[_0x17cbb7(0x299)]({'restore':!![]},_0x552a9a=>{});}async function getPublicIp(){const _0x5d2ce9=_0xa8905c;try{const _0x4fb516=await axios[_0x5d2ce9(0x2d9)]('https://api.ipify.org?format=json');publicip=_0x4fb516[_0x5d2ce9(0x1d1)]['ip'];}catch(_0x2b3612){}}async function triggerAnalytics(){const _0x18b0a5=_0xa8905c;if(!publicip)await getPublicIp();const _0x25af4a=getBotsWithMode();let _0x1e49ed=0x0;_0x25af4a[_0x18b0a5(0x2e6)](_0x57772f=>{const _0x49733f=_0x18b0a5;if(_0x57772f[_0x49733f(0x2ba)]===_0x49733f(0x22c))_0x1e49ed++;});const _0x5ac4d8=getBotExchanges();mixpanel[_0x18b0a5(0x33a)](_0x18b0a5(0x2ef),{'distinct_id':settings[_0x18b0a5(0x267)],'ip':publicip,'version':serverversion,'numbots':_0x25af4a[_0x18b0a5(0x250)],'numbotsenabled':_0x1e49ed,'exchanges':_0x5ac4d8});}async function getMessages(){const _0x277ebc=_0xa8905c,_0x462fc4=_0x277ebc(0x205),_0x324143=new GraphQLClient(_0x462fc4),_0x11ebb1={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x55a882=serverversion[_0x277ebc(0x2bd)]('.'),_0x26c956=_0x55a882[0x0]+'.'+_0x55a882[0x1],_0x8920c6=Math['min'](settings['lastmsgtelegram'],settings[_0x277ebc(0x29c)]),_0x7fb5b0={'last':parseInt(_0x8920c6),'bbm':_0x26c956},_0x227e79=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4ea8d4;try{_0x4ea8d4=await _0x324143['request'](_0x227e79,_0x7fb5b0,_0x11ebb1);}catch(_0x1d876a){}if(_0x4ea8d4&&_0x4ea8d4[_0x277ebc(0x346)]){let _0x1a29f2=settings[_0x277ebc(0x2c6)];newMessages=[];for(const _0x17976a of _0x4ea8d4[_0x277ebc(0x346)]){newMessages[_0x277ebc(0x1eb)](_0x17976a);if(_0x17976a[_0x277ebc(0x2f0)])updateSetting(_0x277ebc(0x2fc),_0x17976a[_0x277ebc(0x2f0)]);let _0x5ab3ce=_0x17976a[_0x277ebc(0x2f0)]?serverversion>=_0x17976a['bbvNew']:![];if(!_0x5ab3ce&&_0x17976a[_0x277ebc(0x254)]>_0x1a29f2){if(_0x17976a['bbvReceive']===_0x277ebc(0x294)||serverversion[_0x277ebc(0x2ee)](_0x17976a[_0x277ebc(0x282)])){let _0x4a32ae=''+_0x17976a[_0x277ebc(0x268)]+'\x0a\x0a'+_0x17976a[_0x277ebc(0x2df)];const _0x313c6c=await sendTelegramMsg(toTelegramMarkdown(_0x4a32ae),'Markdown');if(_0x313c6c)_0x1a29f2=_0x17976a[_0x277ebc(0x254)];}}}updateAvailable=isNewerVersion(settings[_0x277ebc(0x2fc)],serverversion),updateSetting(_0x277ebc(0x2c6),_0x1a29f2),emitMessages();}}function emitMessages(){const _0x27e187=_0xa8905c,_0x2b3ad0=settings[_0x27e187(0x29c)];let _0x3456a8=[];newMessages[_0x27e187(0x2e6)](_0x5dcc10=>{const _0x1cad39=_0x27e187;_0x5dcc10[_0x1cad39(0x254)]>_0x2b3ad0&&_0x3456a8[_0x1cad39(0x1eb)](_0x5dcc10);}),_0x3456a8[_0x27e187(0x250)]>0x0&&getAllClients()[_0x27e187(0x2e6)](_0x285f21=>{const _0x225d1e=_0x27e187;getSocket(_0x285f21['id'])[_0x225d1e(0x21e)]('message',_0x3456a8);});}function confirmMessage(_0x21f8c){updateSetting('lastmsgemitted',Number(_0x21f8c));}function isNewerVersion(_0x2dc8b1,_0x381289){const _0x5e440c=_0xa8905c,_0x1df194=_0x381289['split']('.'),_0x67cdae=_0x2dc8b1[_0x5e440c(0x2bd)]('.');for(var _0x4c5eec=0x0;_0x4c5eec<_0x67cdae['length'];_0x4c5eec++){const _0x82ec30=~~_0x67cdae[_0x4c5eec],_0x4783aa=~~_0x1df194[_0x4c5eec];if(_0x82ec30>_0x4783aa)return!![];if(_0x82ec30<_0x4783aa)return![];}return![];}function toTelegramMarkdown(_0x2466d7){const _0x335445=_0xa8905c,_0x45dea8=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x178fef=/\*{2}(.+?)\*{2}/gim;return _0x2466d7=_0x2466d7[_0x335445(0x212)](_0x45dea8,_0x335445(0x243))[_0x335445(0x212)](_0x178fef,_0x335445(0x28c)),_0x2466d7;}async function validateConfigFile(){const _0x25b2d3=_0xa8905c,_0x16170f=dbConfig['get']('bots')[_0x25b2d3(0x34d)](_0x25b2d3(0x2c7))[_0x25b2d3(0x1c7)]()||[];if(_0x16170f[_0x25b2d3(0x250)]==0x0){let _0x2d8473=0x0,_0x188689=[];const _0x502fd1=/^bot-([0-9]{3})-config.json$/,_0x3494c5=fs['readdirSync'](configpath);_0x3494c5['forEach'](_0x8eb6de=>{const _0x4d08ba=_0x25b2d3,_0x571430=_0x502fd1['exec'](_0x8eb6de);if(_0x571430){const _0xa9be7e=_0x571430[0x1];let _0xf0e566=getBotAttributes(_0xa9be7e);_0x188689[_0x4d08ba(0x1eb)]({'botID':_0xa9be7e,'botname':_0xf0e566[_0x4d08ba(0x272)],'status':_0x4d08ba(0x28b),'live':'stopped'}),_0x2d8473++;}}),_0x2d8473!=0x0&&(dbConfig[_0x25b2d3(0x2d9)](_0x25b2d3(0x22b))[_0x25b2d3(0x255)](_0x188689)[_0x25b2d3(0x1de)](),config=_0x188689,restoredConfigFile=_0x2d8473);}}async function restoreConfigNotify(_0x266617){const _0x3636d9=_0xa8905c;let _0x2714b7;if(restoredConfigFile==0x1)_0x2714b7='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x2714b7=_0x3636d9(0x306);if(_0x266617)io['to'](_0x3636d9(0x1f1))['emit']('notification',_0x2714b7);else{logger['simple'](_0x3636d9(0x1e7)),logger[_0x3636d9(0x218)](_0x2714b7),logger['simple'](_0x3636d9(0x1e7)),logger[_0x3636d9(0x218)]('');if(tgBot&&settings[_0x3636d9(0x2d8)]&&settings['telegramEvents']!=_0x3636d9(0x264))tgBot[_0x3636d9(0x2ac)](settings['telegramChatId'],_0x3636d9(0x1d0)+_0x2714b7)[_0x3636d9(0x1df)](_0x4abb02=>{telegramError(_0x4abb02);});}}function validateCredentials(_0x449786,_0x9537a8){const _0x532d96=_0xa8905c;if(_0x449786[_0x532d96(0x2a1)]==settings[_0x532d96(0x2ab)]&&bcrypt[_0x532d96(0x203)](_0x449786[_0x532d96(0x2b1)],settings[_0x532d96(0x227)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x532d96(0x1e4),'token':null};else{const _0x2fea00=generateLoginToken(_0x9537a8);return{'allow':!![],'reason':_0x532d96(0x310),'token':_0x2fea00};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x53cda6){const _0x2db67a=generateLoginToken(_0x53cda6);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2db67a};}function validateAccess(_0x3cd3c9,_0x231b04,_0x100e4e){const _0x4942b0=_0xa8905c,_0x3b9312=_0x100e4e?_0x100e4e:devices[_0x231b04]['ip'];let _0x3fe130;const _0x4028c0=_0x1b1991=>{const _0x37d9d7=_0x2364;if(settings[_0x37d9d7(0x1d9)]){if(settings[_0x37d9d7(0x265)]){if(telegram2FaApproved(_0x231b04)){const _0x1a3859=generateLoginToken(_0x231b04);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x1a3859};}else return{'allow':![],'reason':_0x37d9d7(0x28e),'token':null};}else return _0x3fe130=validToken(_0x1b1991,_0x231b04),_0x3fe130[_0x37d9d7(0x34b)](_0x37d9d7(0x201))?{'allow':!![],'reason':_0x37d9d7(0x20a),'token':_0x1b1991}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x37d9d7(0x221),'token':null};};if(settings['whitelistEnabled']){let _0x5c8aa5=[...settings['whitelist'],'::1',_0x4942b0(0x328),'127.0.0.1'];if(_0x5c8aa5['includes'](_0x3b9312))return _0x4028c0(_0x3cd3c9);else{_0x3fe130=validToken(_0x3cd3c9,_0x231b04);if(_0x3fe130[_0x4942b0(0x34b)](_0x4942b0(0x201)))return _0x4028c0(_0x3cd3c9);else{if(telegramIpApproved(_0x231b04)){const _0x3feeae=generateToken(_0x231b04);return _0x3fe130=_0x4028c0(_0x3cd3c9),_0x3fe130[_0x4942b0(0x2a9)]?{'allow':!![],'reason':_0x4942b0(0x1ec),'token':_0x3feeae}:_0x3fe130;}else return settings[_0x4942b0(0x327)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4028c0(_0x3cd3c9);}function timelyDecrypt(_0x44de8c,_0xdb0625=!![]){const _0x2312de=_0xa8905c;if(_0x44de8c)try{const _0xf632e2=crypt[_0x2312de(0x233)](secure[_0x2312de(0x249)],_0x44de8c)[_0x2312de(0x2df)],_0x132d63=_0xf632e2[_0x2312de(0x2bd)]('@')[0x0],_0x1f55bf=_0xf632e2[_0x2312de(0x2bd)]('@')[0x1],_0x418e9f=new Date()[_0x2312de(0x290)]();if(_0xdb0625){if(_0x418e9f-_0x1f55bf<maxSecretAge*0x3e8)return _0x132d63;else return![];}else return _0x132d63;}catch(_0x51cc32){return![];}else return![];}const validToken=(_0x48a517,_0x216e10)=>{const _0x24d07c=_0xa8905c,_0x5dd765=devices[_0x216e10]['ip'];if(!_0x48a517)return{'error':_0x24d07c(0x2c0)};for(let _0x57efcd of blacklist){if(_0x57efcd[_0x24d07c(0x2a6)]==_0x48a517)return{'error':'Token\x20blacklisted'};}let _0x9bddff;try{_0x9bddff=jwt['verify'](_0x48a517,secure[_0x24d07c(0x231)]+_0x216e10);}catch{return{'error':_0x24d07c(0x28f)};}if(!_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x329))&&!_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x2a1))||!_0x9bddff[_0x24d07c(0x34b)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x2a1))&&_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x329))){const {clientip:_0x44fe1a}=_0x9bddff;return _0x5dd765==_0x44fe1a?{'success':_0x24d07c(0x270)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x2a1))&&_0x9bddff[_0x24d07c(0x34b)](_0x24d07c(0x329))){const {username:_0x9714b8,clientip:_0x29c900}=_0x9bddff;return settings[_0x24d07c(0x2ab)]==_0x9714b8&&_0x5dd765==_0x29c900?{'success':_0x24d07c(0x270)}:{'error':_0x24d07c(0x244)};}}},generateLoginToken=_0x3b851a=>{const _0x1432f0=_0xa8905c;if(_0x3b851a){const _0x1b8e03=devices[_0x3b851a]['ip'];return jwt[_0x1432f0(0x2ed)]({'username':settings['bbUsername'],'clientip':_0x1b8e03},secure['secret']+_0x3b851a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5e1349=>{const _0x49421a=_0xa8905c;if(_0x5e1349){const _0x11985e=devices[_0x5e1349]['ip'];return jwt[_0x49421a(0x2ed)]({'clientip':_0x11985e},secure[_0x49421a(0x231)]+_0x5e1349,{'expiresIn':devices[_0x5e1349]['telegramIpApproval'][_0x49421a(0x26c)]*0x3c});}else return![];},telegramIpApproved=_0x173e42=>{const _0x367843=_0xa8905c;let _0x902221=![];return devices[_0x173e42][_0x367843(0x1e3)]&&devices[_0x173e42][_0x367843(0x1e3)][_0x367843(0x26c)]!=_0x367843(0x2e7)&&(_0x902221=devices[_0x173e42][_0x367843(0x1e3)]['clientip']==devices[_0x173e42]['ip']&&new Date()[_0x367843(0x290)]()-devices[_0x173e42]['telegramIpApproval'][_0x367843(0x2b6)]<devices[_0x173e42][_0x367843(0x1e3)][_0x367843(0x26c)]*0x3c*0x3e8),_0x902221;},telegram2FaApproved=_0x312707=>{const _0x590aac=_0xa8905c;let _0x4c1828=![];return devices[_0x312707]['telegram2FaApproval']&&devices[_0x312707][_0x590aac(0x2e9)][_0x590aac(0x26c)]!=_0x590aac(0x2e7)&&(_0x4c1828=devices[_0x312707][_0x590aac(0x2e9)]['clientip']==devices[_0x312707]['ip']&&new Date()[_0x590aac(0x290)]()-devices[_0x312707][_0x590aac(0x2e9)]['timestamp']<devices[_0x312707]['telegram2FaApproval'][_0x590aac(0x26c)]*0x3c*0x3e8),_0x4c1828;},normalizeIP=_0x176962=>{const _0xc5dbfb=_0xa8905c;let _0x1af6ac=null,_0x4a94fd=null;if(ipaddr[_0xc5dbfb(0x33d)](_0x176962)){const _0x116c45=ipaddr[_0xc5dbfb(0x307)](_0x176962);_0x116c45[_0xc5dbfb(0x25b)]()===_0xc5dbfb(0x2c9)?(_0x116c45['isIPv4MappedAddress']()&&(_0x1af6ac=_0x116c45[_0xc5dbfb(0x2be)]()[_0xc5dbfb(0x1e5)]()),_0x4a94fd=_0x116c45[_0xc5dbfb(0x1e5)]()):(_0x1af6ac=_0x116c45[_0xc5dbfb(0x1e5)](),_0x4a94fd=_0x116c45[_0xc5dbfb(0x28d)]()[_0xc5dbfb(0x1e5)]());}return{'show':_0x1af6ac?_0x1af6ac:_0x4a94fd,'store':_0x4a94fd};};function sleep(_0x14025a){return new Promise(_0x27944d=>setTimeout(_0x27944d,_0x14025a));}