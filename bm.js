const _0x322528=_0x1d16;(function(_0x46aa30,_0x15d40f){const _0x584fdc=_0x1d16,_0x1553a0=_0x46aa30();while(!![]){try{const _0x463fb6=parseInt(_0x584fdc(0x330))/0x1+-parseInt(_0x584fdc(0x1b5))/0x2+parseInt(_0x584fdc(0x1d0))/0x3*(parseInt(_0x584fdc(0x145))/0x4)+-parseInt(_0x584fdc(0x227))/0x5*(-parseInt(_0x584fdc(0x247))/0x6)+parseInt(_0x584fdc(0x304))/0x7*(parseInt(_0x584fdc(0x17a))/0x8)+-parseInt(_0x584fdc(0x27e))/0x9*(-parseInt(_0x584fdc(0x2f7))/0xa)+-parseInt(_0x584fdc(0x13d))/0xb;if(_0x463fb6===_0x15d40f)break;else _0x1553a0['push'](_0x1553a0['shift']());}catch(_0x441674){_0x1553a0['push'](_0x1553a0['shift']());}}}(_0x2d54,0x48814));const _0x55c09e=function(){let _0x5a8555=!![];return function(_0x511951,_0x2a822d){const _0x46d4c5=_0x5a8555?function(){const _0x33c620=_0x1d16;if(_0x2a822d){const _0x46069f=_0x2a822d[_0x33c620(0x33c)](_0x511951,arguments);return _0x2a822d=null,_0x46069f;}}:function(){};return _0x5a8555=![],_0x46d4c5;};}(),_0x2ebcf1=_0x55c09e(this,function(){const _0x541067=_0x1d16;return _0x2ebcf1[_0x541067(0x1d4)]()['search'](_0x541067(0x139))[_0x541067(0x1d4)]()[_0x541067(0x32d)](_0x2ebcf1)[_0x541067(0x2ba)]('(((.+)+)+)+$');});_0x2ebcf1();'use strict';process[_0x322528(0x1a8)][_0x322528(0x245)]=0x1;const childProcess=require(_0x322528(0x27c)),fs=require('fs'),fns=require(_0x322528(0x1c9)),low=require(_0x322528(0x160)),FileSync=require(_0x322528(0x198)),path=require('path'),crypto=require(_0x322528(0x17e)),forge=require(_0x322528(0x30d)),bcrypt=require('bcryptjs'),jwt=require(_0x322528(0x1ad)),ipaddr=require(_0x322528(0x33d)),argv=require(_0x322528(0x1c7))(process[_0x322528(0x26a)]['slice'](0x2))[_0x322528(0x26a)],uuidRandom=require(_0x322528(0x29a)),{Telegraf,Markup}=require(_0x322528(0x251)),Mixpanel=require(_0x322528(0x21d)),axios=require(_0x322528(0x30e)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x322528(0x2a2)),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x322528(0x291)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x322528(0x14b)](_0x322528(0x1fe)+PORT+_0x322528(0x201)),process[_0x322528(0x270)](0x1));const HOST=argv[_0x322528(0x265)]||null,userID=argv[_0x322528(0x178)]||'',debugging=argv['d']||![],nodeversion=process[_0x322528(0x157)][_0x322528(0x18f)];let bbpath=_0x322528(0x266),bbpath2='';const botfile=_0x322528(0x239),configfile=_0x322528(0x1d8),settingsfile='bb-settings.json',securefile='bb-secure.json',environment=require('./'+bbpath2+_0x322528(0x2f1))[_0x322528(0x1cb)]||_0x322528(0x2c1),maxBackups=0xa;function _0x1d16(_0x3d8633,_0x3476ec){const _0x3dc2e0=_0x2d54();return _0x1d16=function(_0x2ebcf1,_0x55c09e){_0x2ebcf1=_0x2ebcf1-0x12f;let _0x2d549a=_0x3dc2e0[_0x2ebcf1];return _0x2d549a;},_0x1d16(_0x3d8633,_0x3476ec);}let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x322528(0x269)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x322528(0x29e));let configpath=userID?bbpath+_0x322528(0x212)+userID+'/':bbpath+_0x322528(0x212);const configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x322528(0x12f)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x322528(0x258)+userID+'/':bbpath+_0x322528(0x258),loggerfile=fs['createWriteStream'](logspath+_0x322528(0x2e9),{'flags':'a'}),temppath=userID?bbpath+_0x322528(0x2de)+userID+'/':bbpath+_0x322528(0x2de);!fs['existsSync'](configpath)&&fs[_0x322528(0x339)](configpath);!fs[_0x322528(0x269)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x322528(0x339)](logspath);!fs[_0x322528(0x269)](zippath)&&fs[_0x322528(0x339)](zippath);!fs[_0x322528(0x269)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x322528(0x161)]({'bots':[]})[_0x322528(0x1e9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x322528(0x161)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x322528(0x197),'onepagemode':![],'marketcapApi':''}})[_0x322528(0x1e9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x322528(0x161)]({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x322528(0x1c6)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x322528(0x2db)]!=''&&settings[_0x322528(0x2db)]!=_0x322528(0x25f))&&settings[_0x322528(0x133)]&&settings[_0x322528(0x133)]!='')initTelegram();const parseColor=(_0x34d9ad,_0x49a862)=>{const _0x2b03ca=_0x322528,_0x4c1398=/#[A-Z]{3}#/g;if(typeof _0x34d9ad==_0x2b03ca(0x264)){!_0x49a862?_0x34d9ad=_0x34d9ad['replace'](_0x4c1398,''):(_0x34d9ad=_0x34d9ad['replace'](/#BLU#/g,_0x2b03ca(0x26c)),_0x34d9ad=_0x34d9ad['replace'](/#RED#/g,'\x1b[31m'),_0x34d9ad=_0x34d9ad[_0x2b03ca(0x2bb)](/#YEL#/g,'\x1b[33m'),_0x34d9ad=_0x34d9ad[_0x2b03ca(0x2bb)](/#MAG#/g,'\x1b[35m'),_0x34d9ad=_0x34d9ad[_0x2b03ca(0x2bb)](/#CYA#/g,_0x2b03ca(0x228)),_0x34d9ad=_0x34d9ad[_0x2b03ca(0x2bb)](/#RES#/g,_0x2b03ca(0x163)));;}return _0x34d9ad;},logger={'screen':_0x229072=>{const _0x295e24=_0x322528;console[_0x295e24(0x14b)](parseColor(_0x229072,!![]));},'simple':_0xb9b74b=>{const _0x5753d7=_0x322528;console[_0x5753d7(0x14b)](parseColor(_0xb9b74b,!![])),loggerfile[_0x5753d7(0x1e9)](util[_0x5753d7(0x241)](parseColor(_0xb9b74b,![]))+'\x0a');},'full':async _0x53a3b7=>{const _0x29a0e4=_0x322528,_0x4163ce=getTimeStamp()+_0x29a0e4(0x21b)+_0x53a3b7;console[_0x29a0e4(0x14b)](parseColor(_0x4163ce,!![])),loggerfile[_0x29a0e4(0x1e9)](util['format'](parseColor(_0x4163ce,![]))+'\x0a');if(tgBot&&settings[_0x29a0e4(0x2c2)]&&settings[_0x29a0e4(0x267)]!=_0x29a0e4(0x214))await sendTelegram(settings[_0x29a0e4(0x2c2)],_0x29a0e4(0x24a)+parseColor(_0x53a3b7,![]));},'debug':async(_0x93e87c,_0x4052fd='')=>{const _0x2f761b=_0x322528,_0x5c8eac=getTimeStamp()+_0x2f761b(0x184)+_0x93e87c;if(debugging)console[_0x2f761b(0x14b)](parseColor(_0x5c8eac,!![]));loggerfile['write'](util['format'](parseColor(_0x5c8eac,![]))+'\x0a');if(_0x4052fd){if(debugging)console[_0x2f761b(0x14b)](_0x4052fd);loggerfile['write'](util[_0x2f761b(0x241)](_0x4052fd)+'\x0a');}}};let terminating=![];process['on'](_0x322528(0x14f),function(_0x1840f7){const _0x31a4a6=_0x322528;_0x1840f7[_0x31a4a6(0x1d4)]()[_0x31a4a6(0x243)](_0x31a4a6(0x28b))?(logger[_0x31a4a6(0x1e7)](_0x31a4a6(0x20d)+_0x1840f7[_0x31a4a6(0x291)]+'#RES#'),process['send']({'terminate':!![]},_0x30d418=>{})):logger[_0x31a4a6(0x1e7)](_0x1840f7);}),process['on']('exit',()=>{const _0x4d98be=_0x322528;stopAllBots(),process[_0x4d98be(0x270)](0x0);}),process['on'](_0x322528(0x2c3),()=>{const _0xf51e76=_0x322528;stopAllBots(),process[_0xf51e76(0x270)](0x0);}),process['on'](_0x322528(0x1bb),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x322528(0x2f1))[_0x322528(0x289)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x322528(0x206)),app=express(),http=require(_0x322528(0x290))[_0x322528(0x320)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x322528(0x210),async(_0x3dbbb0,_0x214df2)=>{const _0x514821=_0x322528,_0x2f9be6=_0x3dbbb0[_0x514821(0x334)]['type'],_0x1adde1=getClientsWithBotID(_0x514821(0x2f4)),_0x58253a=_0x3dbbb0[_0x514821(0x1c2)][_0x514821(0x2ff)],_0x186470=timelyDecrypt(_0x58253a,![]),_0x366e73=_0x1adde1['find'](_0x1efdac=>_0x1efdac[_0x514821(0x2ff)]==_0x186470);if(_0x366e73){const _0x1c2800=normalizeIP(_0x3dbbb0[_0x514821(0x2e0)][_0x514821(0x303)])[_0x514821(0x2ce)],_0x102f6c=_0x3dbbb0[_0x514821(0x1c2)][_0x514821(0x1c3)];if(validateAccess(_0x102f6c,_0x186470,_0x1c2800)['allow'])_0x2f9be6==_0x514821(0x316)&&await backupConfigFiles(),await zipFiles(_0x2f9be6),_0x214df2[_0x514821(0x2c4)](zippath+(_0x2f9be6+_0x514821(0x27a)),_0x2b5481=>{const _0x8b6192=_0x514821;_0x2b5481&&(logger[_0x8b6192(0x158)](_0x8b6192(0x1f8)+_0x2f9be6),logger[_0x8b6192(0x1e7)](_0x2b5481));});else logger[_0x514821(0x158)](_0x514821(0x25c)+_0x2f9be6+'\x20(1)');}else logger['full'](_0x514821(0x25c)+_0x2f9be6+_0x514821(0x340));}),app['post'](_0x322528(0x22e),async(_0x575d8c,_0x4dc2dd)=>{const _0x2b3a5b=_0x322528,_0x315ce9=getClientsWithBotID(_0x2b3a5b(0x2f4)),_0x41abe=_0x575d8c[_0x2b3a5b(0x1c2)][_0x2b3a5b(0x2ff)],_0x495c87=timelyDecrypt(_0x41abe,![]),_0x4b6d5d=_0x315ce9['find'](_0x50e6cc=>_0x50e6cc['uuid']==_0x495c87);logger[_0x2b3a5b(0x2be)](_0x2b3a5b(0x2a3));if(_0x4b6d5d){const _0x456830=normalizeIP(_0x575d8c['socket'][_0x2b3a5b(0x303)])[_0x2b3a5b(0x2ce)],_0x1df5b0=_0x575d8c[_0x2b3a5b(0x1c2)]['tkn'];if(validateAccess(_0x1df5b0,_0x495c87,_0x456830)[_0x2b3a5b(0x30c)]){if(_0x575d8c[_0x2b3a5b(0x17f)]){const _0x588e78=_0x575d8c[_0x2b3a5b(0x17f)][_0x2b3a5b(0x342)];await _0x588e78['mv'](temppath+_0x588e78[_0x2b3a5b(0x1f1)]),_0x4dc2dd[_0x2b3a5b(0x153)]({'status':!![],'message':_0x2b3a5b(0x19f)});const _0x207909=getBotsWithMode();_0x207909['length']>0x0?confirmRestore(temppath,_0x588e78['name']):unzipFile(temppath,_0x588e78['name']);}}else logger[_0x2b3a5b(0x158)](_0x2b3a5b(0x24d));}else logger[_0x2b3a5b(0x158)](_0x2b3a5b(0x148));}),app[_0x322528(0x1c0)](express[_0x322528(0x1ee)](path['join'](__dirname,bbpath2,_0x322528(0x1da)))),app[_0x322528(0x1c0)](express[_0x322528(0x1ee)](path[_0x322528(0x2bd)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x217603,_0x5446e2){const _0x24447d=_0x322528;_0x5446e2[_0x24447d(0x155)](path[_0x24447d(0x2bd)](__dirname,bbpath2,_0x24447d(0x1da),_0x24447d(0x318)));}),app[_0x322528(0x2ec)](_0x322528(0x279),function(_0x1cc1a1,_0x1f5f31){const _0x4d4d83=_0x322528;_0x1f5f31[_0x4d4d83(0x155)](path[_0x4d4d83(0x2bd)](__dirname,bbpath2,_0x4d4d83(0x168),_0x4d4d83(0x318)));}),app[_0x322528(0x2ec)](_0x322528(0x154),(_0x16aec8,_0x23f7a4)=>{const _0x390f5b=_0x322528;_0x23f7a4[_0x390f5b(0x155)](path['join'](__dirname,bbpath2,_0x390f5b(0x168),'index.html'));}),app[_0x322528(0x2ec)](_0x322528(0x162),(_0x513a05,_0x172475)=>{const _0x7ce3b0=_0x322528;_0x172475['sendFile'](path[_0x7ce3b0(0x2bd)](__dirname,bbpath2,_0x7ce3b0(0x168),_0x7ce3b0(0x318)));}),app[_0x322528(0x2ec)](_0x322528(0x2cc),(_0xcee2ec,_0x46dbeb)=>{const _0x25be9f=_0x322528;_0x46dbeb['sendFile'](path['join'](__dirname,bbpath2,_0x25be9f(0x168),_0x25be9f(0x318)));}),app['get'](_0x322528(0x309),(_0x474e79,_0x40a453)=>{const _0x4e62b5=_0x322528;_0x40a453['sendFile'](path['join'](__dirname,bbpath2,_0x4e62b5(0x168),'index.html'));}),app[_0x322528(0x2ec)](_0x322528(0x2ad),(_0x44c7aa,_0x2f8063)=>{const _0x267b8d=_0x322528;_0x2f8063[_0x267b8d(0x155)](path[_0x267b8d(0x2bd)](__dirname,bbpath2,_0x267b8d(0x168),_0x267b8d(0x318)));}),app['get'](_0x322528(0x1a6),(_0x457220,_0x44ed56)=>{const _0x62a449=_0x322528;_0x44ed56[_0x62a449(0x155)](path[_0x62a449(0x2bd)](__dirname,bbpath2,_0x62a449(0x168),_0x62a449(0x318)));});if(HOST)http['listen'](PORT,HOST);else http[_0x322528(0x14e)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x50aa94=_0x322528;let _0xa60863=_0x50aa94(0x301);const _0xab45cf=networkInterfaces(),_0x512d08={};for(const _0x351412 of Object['keys'](_0xab45cf)){for(const _0x5a6e1f of _0xab45cf[_0x351412]){if((_0x5a6e1f[_0x50aa94(0x312)]==_0x50aa94(0x2ed)||_0x5a6e1f[_0x50aa94(0x312)]==0x4)&&!_0x5a6e1f[_0x50aa94(0x2a1)]){const _0x55c49a=ipaddr['parse'](_0x5a6e1f[_0x50aa94(0x32f)])[_0x50aa94(0x244)]();_0x55c49a!=_0x50aa94(0x17d)&&(!_0x512d08[_0x351412]&&(_0x512d08[_0x351412]=[]),_0x512d08[_0x351412][_0x50aa94(0x22a)](_0x5a6e1f[_0x50aa94(0x32f)]),_0xa60863=_0x5a6e1f[_0x50aa94(0x32f)]);}}}return{'serverip':_0xa60863,'netinterfaces':_0x512d08};}async function startServer(){const _0x522a98=_0x322528,{serverip:_0x355afc,netinterfaces:_0x369e60}=getServerIP();logger[_0x522a98(0x1e7)](''),logger[_0x522a98(0x1e7)]('-----------------------------------------------------------------------------------'),await logger[_0x522a98(0x158)](_0x522a98(0x2ac)+serverversion+_0x522a98(0x1d5)+(environment==_0x522a98(0x255)?_0x522a98(0x2e8):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x522a98(0x18d))+(_0x522a98(0x29b)+_0x355afc+':'+PORT+_0x522a98(0x16c))),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x522a98(0x16a)]!=0x0)for(const _0x221b30 of config){const _0x2bd16c=_0x221b30[_0x522a98(0x175)]==_0x522a98(0x190)?'a':'m';if(_0x221b30[_0x522a98(0x32a)]=='enabled'||_0x221b30[_0x522a98(0x32a)]==_0x522a98(0x246))await logger['full'](_0x522a98(0x27d)+_0x2bd16c+_0x522a98(0x20f)+_0x221b30[_0x522a98(0x2fa)]+'\x20|\x20'+_0x221b30[_0x522a98(0x252)]),startBot([_0x221b30[_0x522a98(0x2fa)],userID],{'cwd':bbpath},function(_0x438001){const _0x57204a=_0x522a98;if(_0x438001)logger[_0x57204a(0x158)](_0x438001);});else(_0x221b30[_0x522a98(0x32a)]==_0x522a98(0x2aa)||_0x221b30[_0x522a98(0x32a)]=='new-disabled')&&await logger[_0x522a98(0x158)](_0x522a98(0x276)+_0x2bd16c+')\x20\x20\x20|\x20Bot\x20'+_0x221b30[_0x522a98(0x2fa)]+_0x522a98(0x250)+_0x221b30[_0x522a98(0x252)]);}else!newBot&&logger[_0x522a98(0x1e7)](_0x522a98(0x323));if(newBot)addBot();logger['simple'](_0x522a98(0x1b4)),logger[_0x522a98(0x1e7)](''),await logger['debug']('Node.js\x20v'+nodeversion),await logger[_0x522a98(0x2be)](_0x522a98(0x33b),_0x369e60);}function startSocket(){const _0x365de8=_0x322528;io['on'](_0x365de8(0x1dd),_0x197fb5=>{const _0x2b02dc=_0x365de8;let _0x49aa81,_0x1dd685,_0x5b15b9,_0x4a00d4,_0x4cb58f;const _0x1679a1=_0x197fb5[_0x2b02dc(0x27b)]['headers']['referer'];_0x1dd685=_0x1679a1[_0x2b02dc(0x1f5)](/bot[0-9]{3}/);if(_0x1dd685)_0x5b15b9=_0x1dd685[0x0][_0x2b02dc(0x1f5)](/[0-9]{3}/);if(_0x5b15b9)_0x49aa81=_0x5b15b9[0x0];else _0x49aa81=_0x2b02dc(0x2f4);const _0x5b91b1=_0x197fb5[_0x2b02dc(0x27b)][_0x2b02dc(0x1db)][_0x2b02dc(0x1d6)];if(!_0x5b91b1)_0x197fb5[_0x2b02dc(0x33a)](_0x2b02dc(0x32a),{'publicKey':secure[_0x2b02dc(0x1f3)]});else{_0x4a00d4=timelyDecrypt(_0x5b91b1,![]);if(!_0x4a00d4)_0x197fb5['emit'](_0x2b02dc(0x32a),{'publicKey':secure[_0x2b02dc(0x1f3)]});else{_0x4cb58f=normalizeIP(_0x197fb5['conn']['remoteAddress'])[_0x2b02dc(0x2ce)];if(!devices[_0x4a00d4])devices[_0x4a00d4]={'uuid':_0x4a00d4,'access':{'token':null}};devices[_0x4a00d4]['ip']=_0x4cb58f;const _0x2a9229=addClient(_0x197fb5['id'],_0x4a00d4,_0x49aa81);setAccess(_0x2a9229),emitMessages(),_0x197fb5['on'](_0x2b02dc(0x1fb),_0x3e3aa1=>{const _0x5026c7=_0x2b02dc,_0x25d992=timelyDecrypt(_0x3e3aa1[_0x5026c7(0x1f6)],!![],_0x5026c7(0x2c9));if(_0x25d992){_0x3e3aa1={'username':_0x3e3aa1[_0x5026c7(0x31e)],'password':_0x25d992},devices[_0x4a00d4][_0x5026c7(0x166)]=validateCredentials(_0x3e3aa1,_0x4a00d4);if(devices[_0x4a00d4]['access'][_0x5026c7(0x30c)]==![]&&devices[_0x4a00d4][_0x5026c7(0x166)][_0x5026c7(0x2b0)]==_0x5026c7(0x1e5))_0x197fb5['emit'](_0x5026c7(0x32a),{'access':devices[_0x4a00d4][_0x5026c7(0x166)]}),loginAccess2FA(_0x4a00d4,_0x4cb58f);else{if(devices[_0x4a00d4][_0x5026c7(0x166)][_0x5026c7(0x30c)]==![]&&devices[_0x4a00d4]['access'][_0x5026c7(0x2b0)]=='invalid\x20credentials')_0x197fb5[_0x5026c7(0x33a)](_0x5026c7(0x32a),{'access':devices[_0x4a00d4][_0x5026c7(0x166)]});else devices[_0x4a00d4][_0x5026c7(0x166)][_0x5026c7(0x30c)]&&devices[_0x4a00d4][_0x5026c7(0x166)][_0x5026c7(0x2b0)]==_0x5026c7(0x262)&&(getClientsWithUuid(_0x4a00d4)['forEach'](_0x59d34d=>{setAccess(_0x59d34d);}),logger[_0x5026c7(0x2be)](_0x5026c7(0x204)+_0x4a00d4[_0x5026c7(0x233)](-0x8)),setTokenRefresh(_0x4a00d4),setSessionTimeout('login',_0x4a00d4));}}else logger['full'](_0x5026c7(0x29f));}),_0x197fb5['on']('reset-password',()=>{resetPassword();}),_0x197fb5['on']('disconnect',_0x20e2f1=>{removeClient(_0x197fb5['id']);}),_0x49aa81==_0x2b02dc(0x2f4)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3e8d05){const _0x41e6bd=_0x322528;if(_0x3e8d05!=_0x41e6bd(0x2f4)&&config[_0x41e6bd(0x19e)]!=''){if(pid[_0x3e8d05])pid[_0x3e8d05][_0x41e6bd(0x153)]({'function':_0x41e6bd(0x285),'args':null});}_0x3e8d05!=_0x41e6bd(0x2f4)&&broadcastToBots('bots',JSON[_0x41e6bd(0x134)](config));}function reloadBotManager(){const _0x44b906=_0x322528;getClientsWithBotID(_0x44b906(0x2f4))[_0x44b906(0x1af)](_0xca63fa=>{const _0x13c0c6=_0x44b906;getSocket(_0xca63fa['id'])[_0x13c0c6(0x33a)](_0x13c0c6(0x32a),{'access':{'allow':![],'reason':_0x13c0c6(0x16d),'token':null}});});}function getSocket(_0x5cba3c){const _0x3c1acc=_0x322528,_0x3fc53e=io[_0x3c1acc(0x1e8)][_0x3c1acc(0x2ec)]('/');return _0x3fc53e['sockets']['get'](_0x5cba3c);}function setAccess(_0x4de5d2){const _0x4972ae=_0x322528,_0x265fc6=getSocket(_0x4de5d2['id']),_0x59ef6b=_0x4de5d2[_0x4972ae(0x2ff)],_0x4e5cde=_0x4de5d2[_0x4972ae(0x2e7)];devices[_0x59ef6b][_0x4972ae(0x166)]=validateAccess(devices[_0x59ef6b]['access'][_0x4972ae(0x22f)],_0x59ef6b),logger[_0x4972ae(0x2be)](_0x4972ae(0x1b9)+devices[_0x59ef6b]['access'][_0x4972ae(0x2b0)]+_0x4972ae(0x2ab)+_0x4de5d2['id']['slice'](-0x8)+_0x4972ae(0x1f4)+_0x59ef6b[_0x4972ae(0x233)](-0x8)),_0x265fc6[_0x4972ae(0x2bd)](_0x59ef6b);if(devices[_0x59ef6b]['access'][_0x4972ae(0x30c)]){_0x265fc6[_0x4972ae(0x2bd)](_0x4e5cde);if(_0x4e5cde==_0x4972ae(0x2f4))initializeSocketBotManager(_0x265fc6);else initializeSocketBot(_0x265fc6);initClient(_0x4e5cde);}devices[_0x59ef6b][_0x4972ae(0x166)][_0x4972ae(0x22f)]&&devices[_0x59ef6b][_0x4972ae(0x166)][_0x4972ae(0x2b0)]==_0x4972ae(0x2c5)&&setSessionTimeout(_0x4972ae(0x1d3),_0x59ef6b),devices[_0x59ef6b][_0x4972ae(0x166)][_0x4972ae(0x22f)]&&devices[_0x59ef6b][_0x4972ae(0x166)]['reason']==_0x4972ae(0x295)&&setSessionTimeout(_0x4972ae(0x1fb),_0x59ef6b),_0x265fc6[_0x4972ae(0x33a)](_0x4972ae(0x32a),{'status':_0x4de5d2[_0x4972ae(0x306)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x59ef6b][_0x4972ae(0x166)],'externalip':devices[_0x59ef6b]['ip'],'publicKey':secure[_0x4972ae(0x1f3)],'userid':settings[_0x4972ae(0x2a6)],'validInstallation':validInstallation}),devices[_0x59ef6b]['access'][_0x4972ae(0x30c)]==![]&&devices[_0x59ef6b][_0x4972ae(0x166)][_0x4972ae(0x2b0)]==_0x4972ae(0x2a4)&&temporaryAccess2FA(_0x59ef6b,devices[_0x59ef6b]['ip']);}function setSessionTimeout(_0x34fd0b,_0x13ceb4){const _0x2d41ae=_0x322528;let _0x784098;if(_0x34fd0b=='login')_0x784098=loginExpiry*0x3c*0x3e8;else _0x784098=devices[_0x13ceb4][_0x2d41ae(0x20e)][_0x2d41ae(0x17c)]*0x3c*0x3e8-(new Date()[_0x2d41ae(0x1b7)]()-devices[_0x13ceb4][_0x2d41ae(0x20e)][_0x2d41ae(0x1de)]);if(devices[_0x13ceb4][_0x2d41ae(0x199)])clearTimeout(devices[_0x13ceb4][_0x2d41ae(0x199)]);devices[_0x13ceb4][_0x2d41ae(0x199)]=setTimeout(()=>{const _0x4184a7=_0x2d41ae;if(devices[_0x13ceb4]['pidRefreshToken'])clearTimeout(devices[_0x13ceb4][_0x4184a7(0x188)]);removeSocketListeners(_0x13ceb4),addBlacklist(_0x13ceb4),devices[_0x13ceb4]['telegramIpApproval']=null,devices[_0x13ceb4]['telegram2FaApproval']=null,devices[_0x13ceb4][_0x4184a7(0x166)][_0x4184a7(0x22f)]=null,logger['debug'](_0x4184a7(0x2ef)+_0x13ceb4[_0x4184a7(0x233)](-0x8)),devices[_0x13ceb4][_0x4184a7(0x166)]=validateAccess(devices[_0x13ceb4][_0x4184a7(0x166)][_0x4184a7(0x22f)],_0x13ceb4),!(devices[_0x13ceb4][_0x4184a7(0x166)]['allow']&&devices[_0x13ceb4][_0x4184a7(0x166)][_0x4184a7(0x2b0)]==_0x4184a7(0x322))&&(_0x34fd0b=='login'?io['to'](_0x13ceb4)[_0x4184a7(0x33a)](_0x4184a7(0x32a),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x13ceb4)['emit'](_0x4184a7(0x32a),{'access':{'allow':![],'reason':_0x4184a7(0x2eb),'token':null}})),devices[_0x13ceb4][_0x4184a7(0x166)][_0x4184a7(0x22f)]=null;},_0x784098);}function setTokenRefresh(_0x2f446f){const _0x5936e8=_0x322528;if(devices[_0x2f446f][_0x5936e8(0x188)])clearTimeout(devices[_0x2f446f][_0x5936e8(0x188)]);devices[_0x2f446f]['pidRefreshToken']=setTimeout(()=>{const _0x1c2fdb=_0x5936e8;getClientsWithUuid(_0x2f446f)[_0x1c2fdb(0x16a)]!=0x0?(devices[_0x2f446f]['access']=refreshToken(_0x2f446f),io['to'](_0x2f446f)[_0x1c2fdb(0x33a)](_0x1c2fdb(0x32a),{'status':_0x1c2fdb(0x159),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2f446f][_0x1c2fdb(0x166)],'externalip':devices[_0x2f446f]['ip'],'publicKey':secure[_0x1c2fdb(0x1f3)],'validInstallation':validInstallation}),setTokenRefresh(_0x2f446f)):clearTimeout(devices[_0x2f446f]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3dbc20){const _0x5d7d69=_0x322528,_0x14a562=getClient(_0x3dbc20['id'])[_0x5d7d69(0x2ff)];_0x3dbc20[_0x5d7d69(0x33a)](_0x5d7d69(0x225),config),_0x3dbc20[_0x5d7d69(0x33a)](_0x5d7d69(0x2d0),cleanSettings()),_0x3dbc20['on'](_0x5d7d69(0x208),_0x1ee747=>{const _0x14c32b=_0x5d7d69;if(validateAccess(_0x1ee747,_0x14a562)['allow'])addBot();else logger['full'](_0x14c32b(0x1e4));}),_0x3dbc20['on'](_0x5d7d69(0x311),(_0x204e2c,_0x465c19)=>{const _0x2f3111=_0x5d7d69;if(validateAccess(_0x465c19,_0x14a562)[_0x2f3111(0x30c)])toggleBot(_0x204e2c[_0x2f3111(0x2fa)],_0x204e2c[_0x2f3111(0x32a)],_0x204e2c[_0x2f3111(0x1be)]);else logger['full'](_0x2f3111(0x142));}),_0x3dbc20['on'](_0x5d7d69(0x21f),(_0x359026,_0x503ad9)=>{const _0x285400=_0x5d7d69;if(validateAccess(_0x503ad9,_0x14a562)['allow'])toggleBotMode(_0x359026);else logger[_0x285400(0x158)](_0x285400(0x142));}),_0x3dbc20['on'](_0x5d7d69(0x1c8),(_0x291cbc,_0x445fd7)=>{const _0x43e848=_0x5d7d69;if(validateAccess(_0x445fd7,_0x14a562)[_0x43e848(0x30c)])deleteBot(_0x291cbc);else logger[_0x43e848(0x158)](_0x43e848(0x13f));}),_0x3dbc20['on'](_0x5d7d69(0x193),(_0x321b2d,_0x38e9f3)=>{const _0x311f98=_0x5d7d69;if(validateAccess(_0x38e9f3,_0x14a562)[_0x311f98(0x30c)])storeSettings(_0x321b2d,!![]);else logger['full'](_0x311f98(0x1fc));}),_0x3dbc20['on']('update-bb',_0x23544f=>{const _0x1cdc0b=_0x5d7d69;if(validateAccess(_0x23544f,_0x14a562)[_0x1cdc0b(0x30c)])updateBB('update');else logger[_0x1cdc0b(0x158)](_0x1cdc0b(0x2b3));}),_0x3dbc20['on'](_0x5d7d69(0x15c),_0x2a0ea6=>{const _0x1c1334=_0x5d7d69;if(validateAccess(_0x2a0ea6,_0x14a562)['allow'])updateBB(_0x1c1334(0x170));else logger[_0x1c1334(0x158)](_0x1c1334(0x32b));}),_0x3dbc20['on'](_0x5d7d69(0x305),_0x359428=>{const _0x4bbe74=_0x5d7d69;if(validateAccess(_0x359428,_0x14a562)[_0x4bbe74(0x30c)]){const _0x15483b=getClient(_0x3dbc20['id']);if(_0x15483b)getBackupFiles(_0x15483b[_0x4bbe74(0x2ff)]);else logger[_0x4bbe74(0x158)](_0x4bbe74(0x20c));}else logger[_0x4bbe74(0x158)](_0x4bbe74(0x221));}),_0x3dbc20['on'](_0x5d7d69(0x29d),(_0x65f4c6,_0xb97719)=>{const _0x4d1983=_0x5d7d69;if(validateAccess(_0xb97719,_0x14a562)['allow'])restoreBackupFile(_0x65f4c6);else logger[_0x4d1983(0x158)](_0x4d1983(0x1f7));}),_0x3dbc20['on']('get-messages',_0x27ce2d=>{const _0x56c01f=_0x5d7d69;if(validateAccess(_0x27ce2d,_0x14a562)[_0x56c01f(0x30c)])getMessages();else logger['full'](_0x56c01f(0x18a));}),_0x3dbc20['on'](_0x5d7d69(0x25a),(_0x4a593b,_0x1f14c5)=>{const _0x47e68e=_0x5d7d69;if(validateAccess(_0x1f14c5,_0x14a562)[_0x47e68e(0x30c)])confirmMessage(_0x4a593b);else logger[_0x47e68e(0x158)](_0x47e68e(0x25b));}),_0x3dbc20['on'](_0x5d7d69(0x1aa),_0x4428d5=>{const _0x2cebf0=_0x5d7d69;if(validateAccess(_0x4428d5,_0x14a562)[_0x2cebf0(0x30c)]){if(devices[_0x14a562][_0x2cebf0(0x188)])clearTimeout(devices[_0x14a562]['pidRefreshToken']);if(devices[_0x14a562][_0x2cebf0(0x199)])clearTimeout(devices[_0x14a562][_0x2cebf0(0x199)]);removeSocketListeners(getClient(_0x3dbc20['id'])[_0x2cebf0(0x2ff)]),addBlacklist(_0x14a562),devices[_0x14a562][_0x2cebf0(0x20e)]=null,devices[_0x14a562][_0x2cebf0(0x248)]=null,devices[_0x14a562][_0x2cebf0(0x166)][_0x2cebf0(0x22f)]=null,logger[_0x2cebf0(0x2be)](_0x2cebf0(0x2b2)+_0x14a562[_0x2cebf0(0x233)](-0x8)),io['to'](getClient(_0x3dbc20['id'])[_0x2cebf0(0x2ff)])[_0x2cebf0(0x33a)](_0x2cebf0(0x32a),{'access':{'allow':![],'reason':_0x2cebf0(0x2d5),'token':null}});}else logger[_0x2cebf0(0x158)](_0x2cebf0(0x240));});}function initializeSocketBot(_0x11c7be){const _0x227242=_0x322528,_0x2ae738=getClient(_0x11c7be['id'])[_0x227242(0x2e7)],_0x18627b=getClient(_0x11c7be['id'])[_0x227242(0x2ff)];_0x11c7be['on'](_0x227242(0x30a),(_0xa1f8d8,_0x5807a0)=>{const _0x1d260f=_0x227242;if(validateAccess(_0x5807a0,_0x18627b)[_0x1d260f(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0x1d260f(0x153)]({'function':'emitHistory','args':_0xa1f8d8});}else logger[_0x1d260f(0x158)](_0x1d260f(0x20a));}),_0x11c7be['on']('delete-alerts',(_0x14b4a2,_0xc6c94f)=>{const _0x1aa014=_0x227242;if(validateAccess(_0xc6c94f,_0x18627b)[_0x1aa014(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0x1aa014(0x153)]({'function':_0x1aa014(0x2fc),'args':_0x14b4a2});}else logger['full'](_0x1aa014(0x32e));}),_0x11c7be['on']('get-portfolio',(_0x403a03,_0x3d0475)=>{const _0x480249=_0x227242;if(validateAccess(_0x3d0475,_0x18627b)[_0x480249(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738]['send']({'function':_0x480249(0x1ec),'args':_0x403a03});}else logger[_0x480249(0x158)](_0x480249(0x242));}),_0x11c7be['on']('store-configuration',(_0x588dc3,_0x48495b)=>{const _0xf4765c=_0x227242;if(validateAccess(_0x48495b,_0x18627b)[_0xf4765c(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0xf4765c(0x153)]({'function':_0xf4765c(0x1b1),'args':_0x588dc3});}else logger[_0xf4765c(0x158)](_0xf4765c(0x23c));}),_0x11c7be['on']('store-headless',(_0x5502a7,_0x3d842f)=>{const _0x3df29b=_0x227242;if(validateAccess(_0x3d842f,_0x18627b)[_0x3df29b(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0x3df29b(0x153)]({'function':_0x3df29b(0x329),'args':_0x5502a7});}else logger[_0x3df29b(0x158)](_0x3df29b(0x28a));}),_0x11c7be['on'](_0x227242(0x2e1),(_0x2e3567,_0x4b38b7)=>{const _0x5deda3=_0x227242;if(validateAccess(_0x4b38b7,_0x18627b)[_0x5deda3(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738]['send']({'function':'storeFiat','args':_0x2e3567});}else logger[_0x5deda3(0x158)](_0x5deda3(0x23a));}),_0x11c7be['on'](_0x227242(0x1d9),_0x1907d8=>{const _0x5bb344=_0x227242;if(validateAccess(_0x1907d8,_0x18627b)['allow']){if(pid[_0x2ae738])pid[_0x2ae738][_0x5bb344(0x153)]({'function':'resetHistory','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x11c7be['on'](_0x227242(0x310),_0x234d28=>{const _0x225363=_0x227242;if(validateAccess(_0x234d28,_0x18627b)['allow']){if(pid[_0x2ae738])pid[_0x2ae738][_0x225363(0x153)]({'function':_0x225363(0x19b),'args':null});}else logger[_0x225363(0x158)](_0x225363(0x1f9));}),_0x11c7be['on'](_0x227242(0x211),(_0x513d2f,_0x3a14b2)=>{const _0x2344eb=_0x227242;if(validateAccess(_0x3a14b2,_0x18627b)[_0x2344eb(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0x2344eb(0x153)]({'function':'placeOrder','args':_0x513d2f});}else logger[_0x2344eb(0x158)](_0x2344eb(0x24c));}),_0x11c7be['on'](_0x227242(0x254),_0x2205ad=>{const _0x1e1494=_0x227242;if(validateAccess(_0x2205ad,_0x18627b)['allow']){if(pid[_0x2ae738])pid[_0x2ae738][_0x1e1494(0x153)]({'function':_0x1e1494(0x31b),'args':null});}else logger[_0x1e1494(0x158)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x11c7be['on']('show-config',_0x31332e=>{const _0x5777fb=_0x227242;if(validateAccess(_0x31332e,_0x18627b)[_0x5777fb(0x30c)]){if(pid[_0x2ae738])pid[_0x2ae738][_0x5777fb(0x153)]({'function':_0x5777fb(0x13c),'args':null});}else logger[_0x5777fb(0x158)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x11c7be['on']('update-bb',_0xd6a2cd=>{const _0x216ef8=_0x227242;if(validateAccess(_0xd6a2cd,_0x18627b)[_0x216ef8(0x30c)])updateBB(_0x216ef8(0x1d1));else logger[_0x216ef8(0x158)](_0x216ef8(0x2b3));}),_0x11c7be['on']('get-messages',_0x582545=>{const _0x883ae7=_0x227242;if(validateAccess(_0x582545,_0x18627b)['allow'])getMessages();else logger[_0x883ae7(0x158)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x11c7be['on'](_0x227242(0x25a),(_0x46eb23,_0x183845)=>{const _0x296e9e=_0x227242;if(validateAccess(_0x183845,_0x18627b)[_0x296e9e(0x30c)])confirmMessage(_0x46eb23);else logger[_0x296e9e(0x158)](_0x296e9e(0x25b));}),_0x11c7be['on'](_0x227242(0x1aa),_0x4fb0b1=>{const _0x8680ea=_0x227242;if(validateAccess(_0x4fb0b1,_0x18627b)['allow']){if(devices[_0x18627b][_0x8680ea(0x188)])clearTimeout(devices[_0x18627b]['pidRefreshToken']);if(devices[_0x18627b]['pidExpireLogin'])clearTimeout(devices[_0x18627b][_0x8680ea(0x199)]);removeSocketListeners(getClient(_0x11c7be['id'])[_0x8680ea(0x2ff)]),addBlacklist(_0x18627b),devices[_0x18627b][_0x8680ea(0x20e)]=null,devices[_0x18627b][_0x8680ea(0x248)]=null,devices[_0x18627b][_0x8680ea(0x166)][_0x8680ea(0x22f)]=null,logger[_0x8680ea(0x2be)](_0x8680ea(0x2b2)+_0x18627b[_0x8680ea(0x233)](-0x8)),io['to'](getClient(_0x11c7be['id'])['uuid'])[_0x8680ea(0x33a)](_0x8680ea(0x32a),{'access':{'allow':![],'reason':_0x8680ea(0x2d5),'token':null}});}else logger[_0x8680ea(0x158)](_0x8680ea(0x240));});}function removeSocketListeners(_0x56e32){const _0x2778fa=_0x322528;getClientsWithUuid(_0x56e32)[_0x2778fa(0x1af)](_0x1608e6=>{getSocket(_0x1608e6['id'])['removeAllListeners']();});}function cleanSettings(){const _0x20ccf4=_0x322528;let _0x2324a0=settings;return settings[_0x20ccf4(0x2db)]&&settings[_0x20ccf4(0x2db)]!=''&&(_0x2324a0={..._0x2324a0,'telegramToken':_0x20ccf4(0x147)}),settings['bbPassword']&&settings[_0x20ccf4(0x194)]!=''&&(_0x2324a0={..._0x2324a0,'bbPassword':_0x20ccf4(0x147)}),settings[_0x20ccf4(0x31d)]&&settings[_0x20ccf4(0x31d)]!=''&&(_0x2324a0={..._0x2324a0,'marketcapApi':_0x20ccf4(0x147)}),(settings['bbPassword']&&settings['bbPassword']==_0x20ccf4(0x25f)||settings['telegramToken']&&settings['telegramToken']=='***'||settings[_0x20ccf4(0x31d)]&&settings['marketcapApi']=='***')&&(_0x2324a0={..._0x2324a0,'restored':{'password':settings['bbPassword']==_0x20ccf4(0x25f),'telegram':settings[_0x20ccf4(0x2db)]==_0x20ccf4(0x25f),'marketcap':settings[_0x20ccf4(0x31d)]=='***'}}),_0x2324a0;}async function updateBB(_0x560542){const _0xf9a433=_0x322528;await backupConfigFiles(),installingUpdate=!![],config[_0xf9a433(0x1af)](_0x4f522b=>{const _0x13fbb3=_0xf9a433;restartBot(_0x4f522b[_0x13fbb3(0x2fa)]);});if(_0x560542==_0xf9a433(0x1d1))process[_0xf9a433(0x153)]({'update':!![],'environment':environment},_0x5038ca=>{});else _0x560542==_0xf9a433(0x170)&&process[_0xf9a433(0x153)]({'reinstall':!![],'environment':environment},_0x2a2df8=>{});}function startBot(_0x2ad236,_0x4005c0,_0x4a5423){const _0x1ec1a4=_0x322528;if(debugging)_0x2ad236[_0x1ec1a4(0x22a)]('-d');let _0x1d9c24=![];const _0x362f45=_0x2ad236[0x0];_0x4005c0={..._0x4005c0,'stdio':['inherit',_0x1ec1a4(0x2ea),_0x1ec1a4(0x2ea),_0x1ec1a4(0x2b8)]},pid[_0x362f45]=childProcess[_0x1ec1a4(0x25e)](botfile,_0x2ad236,_0x4005c0),pid[_0x362f45]['on'](_0x1ec1a4(0x237),_0x33fad1=>{const _0xd943ed=_0x1ec1a4;switch(Object[_0xd943ed(0x268)](_0x33fad1)[0x0]){case'botname':updateBotName(_0x362f45,_0x33fad1[_0xd943ed(0x252)]);break;case _0xd943ed(0x1cf):updateBotManager();break;case _0xd943ed(0x32a):updateStatus(_0x362f45,_0x33fad1[_0xd943ed(0x32a)]);break;case _0xd943ed(0x1be):updateLive(_0x362f45,_0x33fad1[_0xd943ed(0x1be)]);break;case _0xd943ed(0x2d4):updateLive(_0x362f45,_0x33fad1[_0xd943ed(0x2d4)]),io['to'](_0x362f45)[_0xd943ed(0x33a)]('status',{'access':{'allow':![],'reason':_0xd943ed(0x16d),'token':null}});break;case'stop':_0x33fad1[_0xd943ed(0x187)]==_0xd943ed(0x1e2)&&restartBot(_0x362f45);_0x33fad1[_0xd943ed(0x187)]=='kill'&&toggleBot(_0x362f45,_0xd943ed(0x2aa),_0xd943ed(0x209));break;case'telegram':sendTelegramBot(_0x362f45,_0x33fad1[_0xd943ed(0x21a)]);break;case _0xd943ed(0x293):sendTelegramMsg(_0x33fad1[_0xd943ed(0x293)]);break;case _0xd943ed(0x16e):io['to'](_0x362f45)[_0xd943ed(0x33a)](_0x33fad1[_0xd943ed(0x16e)],_0x33fad1[_0xd943ed(0x1ac)]);break;}}),pid[_0x362f45]['on']('error',function(_0x103550){if(_0x1d9c24)return;_0x1d9c24=!![],_0x4a5423(_0x103550);}),pid[_0x362f45]['on']('exit',async function(_0x2e67b4){const _0x5ec4a6=_0x1ec1a4;if(terminating)return;if(installingUpdate){logger[_0x5ec4a6(0x2be)](_0x5ec4a6(0x143)),io[_0x5ec4a6(0x278)]();return;}if(_0x1d9c24)return;_0x1d9c24=!![],_0x4a5423(null);const _0x50b951=dbConfig[_0x5ec4a6(0x2ec)](_0x5ec4a6(0x225))[_0x5ec4a6(0x275)]({'botID':_0x362f45})[_0x5ec4a6(0x236)]();_0x50b951&&(_0x50b951[_0x5ec4a6(0x32a)]=='enabled'||_0x50b951['status']==_0x5ec4a6(0x246))&&(await sleep(0x3e8),updateLive(_0x362f45,_0x5ec4a6(0x209)),logger[_0x5ec4a6(0x158)](_0x5ec4a6(0x2b5)+_0x362f45),startBot([_0x362f45,userID],{'cwd':bbpath},function(_0x1a3679){const _0x468fa6=_0x5ec4a6;if(_0x1a3679)logger[_0x468fa6(0x158)](_0x1a3679);}));});}function stopBot(_0x2e9937){const _0x43edb3=_0x322528;getClientsWithBotID(_0x2e9937)[_0x43edb3(0x1af)](_0x4e80a0=>{const _0x375909=_0x43edb3;getSocket(_0x4e80a0['id'])[_0x375909(0x21e)](!![]),removeClient(_0x4e80a0['id']);}),pid[_0x2e9937]&&(pid[_0x2e9937]['kill'](),pid[_0x2e9937]=null);}function stopAllBots(){terminating=!![];const _0x1adf93=getEnabledBots();_0x1adf93['forEach'](_0x462c3c=>{const _0x27ebbb=_0x1d16;stopBot(_0x462c3c[_0x27ebbb(0x2fa)]);});}function restartBot(_0x5985a2){const _0x2895c6=_0x322528;if(pid[_0x5985a2])pid[_0x5985a2][_0x2895c6(0x202)]();}function addBot(){const _0x5a1165=_0x322528;let _0x39c136;for(let _0x2650cb=0x1;_0x2650cb<0x3e9;_0x2650cb++){_0x39c136=_0x2650cb[_0x5a1165(0x1d4)]()['padStart'](0x3,'0');let _0x177a89=config['find'](_0x31da7c=>_0x31da7c[_0x5a1165(0x2fa)]==_0x39c136);if(!_0x177a89)break;}if(_0x39c136===_0x5a1165(0x203)){logger['full'](_0x5a1165(0x174));return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x39c136),dbConfig['get']('bots')[_0x5a1165(0x22a)]({'botID':_0x39c136,'botname':_0x5a1165(0x282)+_0x39c136,'status':_0x5a1165(0x246),'live':''})[_0x5a1165(0x1e9)](),startBot([_0x39c136,userID],{'cwd':bbpath},function(_0x26220a){if(_0x26220a)logger['full'](_0x26220a);}),config=getConfiguration(),io['to'](_0x5a1165(0x2f4))[_0x5a1165(0x33a)](_0x5a1165(0x225),config),broadcastToBots(_0x5a1165(0x225),JSON[_0x5a1165(0x134)](config));}function deleteBot(_0xa27bf4){const _0x410eb8=_0x322528;getClientsWithBotID(_0xa27bf4)[_0x410eb8(0x1af)](_0x105b29=>{const _0x31f415=_0x410eb8;getSocket(_0x105b29['id'])[_0x31f415(0x21e)](!![]),removeClient(_0x105b29['id']);}),dbConfig[_0x410eb8(0x2ec)]('bots')[_0x410eb8(0x1cc)]({'botID':_0xa27bf4})['write'](),logger[_0x410eb8(0x158)]('Deleted\x20Bot\x20'+_0xa27bf4),stopBot(_0xa27bf4);try{if(fs['existsSync'](path[_0x410eb8(0x2bd)](configpath,'bot-'+_0xa27bf4+'-config.json')))fs[_0x410eb8(0x216)](path[_0x410eb8(0x2bd)](configpath,'bot-'+_0xa27bf4+_0x410eb8(0x215)));if(fs[_0x410eb8(0x269)](path[_0x410eb8(0x2bd)](configpath,_0x410eb8(0x27f)+_0xa27bf4+_0x410eb8(0x17b))))fs[_0x410eb8(0x216)](path[_0x410eb8(0x2bd)](configpath,_0x410eb8(0x27f)+_0xa27bf4+_0x410eb8(0x17b)));if(fs['existsSync'](path[_0x410eb8(0x2bd)](configpath,_0x410eb8(0x27f)+_0xa27bf4+'-performance.json')))fs['unlinkSync'](path[_0x410eb8(0x2bd)](configpath,_0x410eb8(0x27f)+_0xa27bf4+_0x410eb8(0x18c)));if(fs[_0x410eb8(0x269)](path[_0x410eb8(0x2bd)](configpath,_0x410eb8(0x27f)+_0xa27bf4+'-results.json')))fs[_0x410eb8(0x216)](path['join'](configpath,_0x410eb8(0x27f)+_0xa27bf4+'-results.json'));}catch(_0x34959c){if(_0x34959c)logger[_0x410eb8(0x158)](_0x410eb8(0x20b),_0x34959c);}config=getConfiguration(),io['to'](_0x410eb8(0x2f4))[_0x410eb8(0x33a)]('bots',config),broadcastToBots(_0x410eb8(0x225),JSON[_0x410eb8(0x134)](config));}function toggleBot(_0x7f7834,_0x20f622,_0x2fc15d){const _0x596e3a=_0x322528;dbConfig[_0x596e3a(0x2ec)](_0x596e3a(0x225))[_0x596e3a(0x275)]({'botID':_0x7f7834})[_0x596e3a(0x1a7)]({'status':_0x20f622})[_0x596e3a(0x1a7)]({'live':_0x2fc15d})[_0x596e3a(0x1e9)]();if(_0x20f622=='enabled'||_0x20f622==_0x596e3a(0x246))logger[_0x596e3a(0x158)](_0x596e3a(0x1bf)+_0x7f7834),startBot([_0x7f7834,userID],{'cwd':bbpath},function(_0x3819b8){if(_0x3819b8)logger['full'](_0x3819b8);});else(_0x20f622==_0x596e3a(0x2aa)||_0x20f622==_0x596e3a(0x13a))&&(logger['full'](_0x596e3a(0x2e6)+_0x7f7834),stopBot(_0x7f7834));config=getConfiguration(),io['to'](_0x596e3a(0x2f4))['emit']('bots',config),broadcastToBots('bots',JSON[_0x596e3a(0x134)](config));}function toggleStatus(_0x14f1af){const _0x4d1201=_0x322528;let _0x22e2a2=dbConfig[_0x4d1201(0x2ec)]('bots')['find']({'botID':_0x14f1af})['value'](),_0x3235ea;if(_0x22e2a2['status']===_0x4d1201(0x2b9))_0x3235ea=_0x4d1201(0x2aa);else{if(_0x22e2a2[_0x4d1201(0x32a)]===_0x4d1201(0x246))_0x3235ea='new-disabled';else{if(_0x22e2a2['status']===_0x4d1201(0x13a))_0x3235ea=_0x4d1201(0x246);else{if(_0x22e2a2[_0x4d1201(0x32a)]===_0x4d1201(0x2aa))_0x3235ea=_0x4d1201(0x2b9);}}}return _0x3235ea;}function updateStatus(_0x3be31f,_0x4a07bf){const _0x4113aa=_0x322528;dbConfig[_0x4113aa(0x2ec)](_0x4113aa(0x225))[_0x4113aa(0x275)]({'botID':_0x3be31f})[_0x4113aa(0x1a7)]({'status':_0x4a07bf})['write'](),config=getConfiguration(),io['to'](_0x4113aa(0x2f4))[_0x4113aa(0x33a)](_0x4113aa(0x225),config),broadcastToBots(_0x4113aa(0x225),JSON[_0x4113aa(0x134)](config));}function updateLive(_0x5d7e1c,_0x22693b){const _0x19cafe=_0x322528;dbConfig[_0x19cafe(0x2ec)](_0x19cafe(0x225))[_0x19cafe(0x275)]({'botID':_0x5d7e1c})[_0x19cafe(0x1a7)]({'live':_0x22693b})[_0x19cafe(0x1e9)](),config=getConfiguration(),io['to'](_0x19cafe(0x2f4))['emit'](_0x19cafe(0x225),config),broadcastToBots(_0x19cafe(0x225),JSON['stringify'](config));}function updateBotName(_0x3e835a,_0x5131ee){const _0x4d88b9=_0x322528;dbConfig[_0x4d88b9(0x2ec)](_0x4d88b9(0x225))[_0x4d88b9(0x275)]({'botID':_0x3e835a})[_0x4d88b9(0x1a7)]({'botname':_0x5131ee})[_0x4d88b9(0x1e9)](),config=getConfiguration(),io['to'](_0x4d88b9(0x2f4))['emit'](_0x4d88b9(0x225),config),broadcastToBots('bots',JSON[_0x4d88b9(0x134)](config));}function updateBotManager(){const _0x3a49d7=_0x322528;config=getConfiguration(),io['to'](_0x3a49d7(0x2f4))[_0x3a49d7(0x33a)]('bots',config),broadcastToBots('bots',JSON[_0x3a49d7(0x134)](config));}function toggleBotMode(_0x13d310){const _0xc61a24=_0x322528;if(pid[_0x13d310])pid[_0x13d310][_0xc61a24(0x153)]({'function':_0xc61a24(0x173),'args':null});else{const _0x1a5961=configpath+'bot-'+_0x13d310+'-config.json',_0xf3744e=fs[_0xc61a24(0x271)](_0x1a5961),_0x563c1c=JSON[_0xc61a24(0x2dc)](_0xf3744e),_0x16f201=_0x563c1c[_0xc61a24(0x2e7)][0x0][_0xc61a24(0x249)];_0x563c1c[_0xc61a24(0x2e7)][0x0][_0xc61a24(0x249)]=!_0x16f201;const _0x2721d5=JSON[_0xc61a24(0x134)](_0x563c1c,null,0x2);fs[_0xc61a24(0x261)](_0x1a5961,_0x2721d5),config=getConfiguration(),io['to']('botmanager')[_0xc61a24(0x33a)](_0xc61a24(0x225),config),broadcastToBots(_0xc61a24(0x225),JSON['stringify'](config));}}function validateTelegram(_0x131ba2){const _0x5054a5=_0x322528;if(_0x131ba2['from'][_0x5054a5(0x31e)]!=settings[_0x5054a5(0x133)]&&'@'+_0x131ba2[_0x5054a5(0x1e3)]['username']!=settings['telegramUsername']||_0x131ba2['chat']['id']!=settings[_0x5054a5(0x2c2)])return sendTelegram(_0x131ba2[_0x5054a5(0x23f)]['id'],_0x5054a5(0x137),{'parse_mode':_0x5054a5(0x296)}),![];return!![];}async function initTelegram(){const _0x5394d9=_0x322528;if(tgBot)tgBot[_0x5394d9(0x187)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x5394d9(0x2db)]);let _0x3cd474=_0x5394d9(0x15f);_0x3cd474+='\x0a',_0x3cd474+=_0x5394d9(0x167),_0x3cd474+=_0x5394d9(0x2ae),_0x3cd474+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x3cd474+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3cd474+=_0x5394d9(0x1a2),_0x3cd474+='/off\x20-\x20stop\x20bot(s)\x0a',_0x3cd474+=_0x5394d9(0x302),_0x3cd474+='/names\x20-\x20show\x20bot\x20names\x0a',_0x3cd474+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x3cd474+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x3cd474+=_0x5394d9(0x196),_0x3cd474+=_0x5394d9(0x335),_0x3cd474+=_0x5394d9(0x2e5),_0x3cd474+=_0x5394d9(0x238);let _0x1c4fdf='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x1c4fdf+='\x0a',_0x1c4fdf+=_0x3cd474,tgBot[_0x5394d9(0x151)]((_0x2259c2,_0x3edb32)=>{const _0x5975c5=_0x5394d9;logger[_0x5975c5(0x1e7)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x5975c5(0x2be)]('Telegraf\x20error:',_0x2259c2);}),tgBot[_0x5394d9(0x1c0)](async(_0x133f40,_0x1784f7)=>{const _0x1c14f9=_0x5394d9;if(!(!settings[_0x1c14f9(0x2c2)]&&_0x133f40[_0x1c14f9(0x1d1)][_0x1c14f9(0x237)]['text']=='/start')){if(!validateTelegram(_0x133f40))return;}_0x1784f7();}),tgBot['command'](_0x5394d9(0x164),async _0x16c4d3=>{const _0x4bfaac=_0x5394d9;if(!settings[_0x4bfaac(0x2c2)])updateSetting(_0x4bfaac(0x2c2),_0x16c4d3[_0x4bfaac(0x23f)]['id']);updateSetting(_0x4bfaac(0x1b0),!![]);if(!validateTelegram(_0x16c4d3))return;await sendTelegram(_0x16c4d3[_0x4bfaac(0x23f)]['id'],_0x1c4fdf);}),tgBot['command'](_0x5394d9(0x1a5),async _0x4d471=>{const _0xac37ff=_0x5394d9;updateSetting(_0xac37ff(0x1b0),!![]),await sendTelegram(_0x4d471['chat']['id'],_0xac37ff(0x207));}),tgBot['command'](_0x5394d9(0x14a),async _0x34b8bc=>{const _0x1fc52c=_0x5394d9;await sendTelegram(_0x34b8bc[_0x1fc52c(0x23f)]['id'],'Notifications\x20disabled'),updateSetting(_0x1fc52c(0x1b0),![]);}),tgBot[_0x5394d9(0x253)](_0x5394d9(0x230),async _0x137b13=>{const _0x590154=_0x5394d9,_0x5c2540=Markup[_0x590154(0x1b8)]([Markup[_0x590154(0x25d)][_0x590154(0x21c)](_0x590154(0x22c),'config_orders'),Markup[_0x590154(0x25d)]['callback'](_0x590154(0x327),_0x590154(0x1a1)),Markup[_0x590154(0x25d)][_0x590154(0x21c)]('All','config_all')]);_0x137b13['reply'](_0x590154(0x132),_0x5c2540);}),tgBot['action'](_0x5394d9(0x338),async _0x2e298d=>{const _0x1300f4=_0x5394d9;_0x2e298d[_0x1300f4(0x217)](),updateSetting(_0x1300f4(0x267),_0x1300f4(0x214)),updateSetting(_0x1300f4(0x1b0),!![]),await sendTelegram(_0x2e298d[_0x1300f4(0x23f)]['id'],_0x1300f4(0x22b));}),tgBot[_0x5394d9(0x292)]('config_alerts',async _0x276e3d=>{const _0x4359d1=_0x5394d9;_0x276e3d['editMessageReplyMarkup'](),updateSetting(_0x4359d1(0x267),_0x4359d1(0x2df)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x276e3d[_0x4359d1(0x23f)]['id'],_0x4359d1(0x231));}),tgBot[_0x5394d9(0x292)]('config_all',async _0x54b6e1=>{const _0x3353db=_0x5394d9;_0x54b6e1[_0x3353db(0x217)](),updateSetting(_0x3353db(0x267),_0x3353db(0x286)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x54b6e1['chat']['id'],_0x3353db(0x1b2));}),tgBot['command'](_0x5394d9(0x32a),async _0x50956f=>{const _0x3d69fc=_0x5394d9,_0x2456b3=getBotsWithMode();let _0x269077=_0x3d69fc(0x2cf);config['forEach'](_0xe3acbe=>{const _0x54b1e2=_0x3d69fc,_0x23b2af=_0x2456b3[_0x54b1e2(0x275)](_0x5560c0=>_0x5560c0[_0x54b1e2(0x2fa)]==_0xe3acbe[_0x54b1e2(0x2fa)])[_0x54b1e2(0x175)];_0x269077+='Bot\x20'+_0xe3acbe[_0x54b1e2(0x2fa)]+':\x20'+_0xe3acbe[_0x54b1e2(0x32a)]+_0x54b1e2(0x250)+_0x23b2af+'\x20|\x20'+_0xe3acbe['live']+'\x0a';}),_0x269077+='\x0a',_0x269077+=_0x3d69fc(0x138),_0x269077+=!settings[_0x3d69fc(0x1b0)]?_0x3d69fc(0x2f0):_0x3d69fc(0x1cd),_0x269077+=settings[_0x3d69fc(0x1b0)]?settings[_0x3d69fc(0x267)]==_0x3d69fc(0x286)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3d69fc(0x2d6)+settings[_0x3d69fc(0x267)]+_0x3d69fc(0x2a7):'',await sendTelegram(_0x50956f[_0x3d69fc(0x23f)]['id'],_0x269077,{'parse_mode':_0x3d69fc(0x296)});}),tgBot['command'](_0x5394d9(0x1e2),async _0x426124=>{const _0x1b2997=_0x5394d9,_0x13cb70=getEnabledBots();if(_0x13cb70[_0x1b2997(0x16a)]==0x0)await sendTelegram(_0x426124[_0x1b2997(0x23f)]['id'],_0x1b2997(0x2c8));else{if(_0x13cb70[_0x1b2997(0x16a)]>0x1)_0x13cb70[_0x1b2997(0x22a)]({'botID':'all'});let _0x92d6b8=[],_0x1d46f0=[];const _0x4d51e2=_0x13cb70[_0x1b2997(0x16a)]%0x4==0x0||_0x13cb70[_0x1b2997(0x16a)]%0x4==0x3||_0x13cb70['length']%0x3==0x1?0x4:0x3;let _0x214cdb=0x0;_0x13cb70[_0x1b2997(0x1af)]((_0xb8cdcd,_0x1c5577)=>{const _0x1e0a69=_0x1b2997;if(_0x1c5577%_0x4d51e2==0x0)_0x1d46f0=[];_0x1d46f0['push'](Markup[_0x1e0a69(0x25d)][_0x1e0a69(0x21c)](_0xb8cdcd[_0x1e0a69(0x2fa)]==_0x1e0a69(0x286)?_0x1e0a69(0x180):_0x1e0a69(0x282)+_0xb8cdcd[_0x1e0a69(0x2fa)],_0x1e0a69(0x2b6)+_0xb8cdcd[_0x1e0a69(0x2fa)])),_0x1c5577%_0x4d51e2==0x0&&(_0x92d6b8[_0x214cdb]=_0x1d46f0,_0x214cdb++);});const _0x5485d4=Markup['inlineKeyboard'](_0x92d6b8);_0x426124[_0x1b2997(0x2e2)](_0x1b2997(0x149),_0x5485d4);}}),tgBot[_0x5394d9(0x292)](/restart_(.+)/,async _0x2da57d=>{const _0x184797=_0x5394d9,_0x74715d=_0x2da57d[_0x184797(0x1f5)][0x1];_0x2da57d['editMessageReplyMarkup'](),_0x74715d==_0x184797(0x286)?config[_0x184797(0x1af)](_0x25c31d=>{restartBot(_0x25c31d['botID']);}):restartBot(_0x74715d);}),tgBot[_0x5394d9(0x253)]('on',async _0x2cea48=>{const _0x3a4078=_0x5394d9,_0xd7d7e7=getDisabledBots();if(_0xd7d7e7['length']==0x0)await sendTelegram(_0x2cea48['chat']['id'],_0x3a4078(0x2d9));else{if(_0xd7d7e7['length']>0x1)_0xd7d7e7['push']({'botID':_0x3a4078(0x286)});let _0xdb3aea=[],_0x9a192d=[];const _0x3ae0af=_0xd7d7e7[_0x3a4078(0x16a)]%0x4==0x0||_0xd7d7e7['length']%0x4==0x3||_0xd7d7e7[_0x3a4078(0x16a)]%0x3==0x1?0x4:0x3;let _0x2b3666=0x0;_0xd7d7e7['forEach']((_0x591d5f,_0x5abb68)=>{const _0x5db75a=_0x3a4078;if(_0x5abb68%_0x3ae0af==0x0)_0x9a192d=[];_0x9a192d[_0x5db75a(0x22a)](Markup['button'][_0x5db75a(0x21c)](_0x591d5f['botID']==_0x5db75a(0x286)?'All\x20bots':_0x5db75a(0x282)+_0x591d5f[_0x5db75a(0x2fa)],_0x5db75a(0x2bf)+_0x591d5f['botID'])),_0x5abb68%_0x3ae0af==0x0&&(_0xdb3aea[_0x2b3666]=_0x9a192d,_0x2b3666++);});const _0x2b67fd=Markup[_0x3a4078(0x1b8)](_0xdb3aea);_0x2cea48[_0x3a4078(0x2e2)](_0x3a4078(0x30f),_0x2b67fd);}}),tgBot[_0x5394d9(0x292)](/on_(.+)/,async _0x1ac65b=>{const _0x34247c=_0x5394d9,_0x5b0140=_0x1ac65b[_0x34247c(0x1f5)][0x1];_0x1ac65b['editMessageReplyMarkup']();if(_0x5b0140==_0x34247c(0x286)){const _0x414d2c=getDisabledBots();await sendTelegram(_0x1ac65b[_0x34247c(0x23f)]['id'],_0x34247c(0x186)),_0x414d2c[_0x34247c(0x1af)](_0x27d1cd=>{const _0xf410e6=_0x34247c;if(_0x27d1cd['botID']!=_0xf410e6(0x286))toggleBot(_0x27d1cd[_0xf410e6(0x2fa)],toggleStatus(_0x27d1cd['botID']),_0xf410e6(0x209));});}else await sendTelegram(_0x1ac65b[_0x34247c(0x23f)]['id'],_0x34247c(0x272)+_0x5b0140),toggleBot(_0x5b0140,toggleStatus(_0x5b0140),'stopped');}),tgBot[_0x5394d9(0x253)](_0x5394d9(0x150),async _0x19751c=>{const _0x4a9b76=_0x5394d9,_0x14b511=getEnabledBots();if(_0x14b511[_0x4a9b76(0x16a)]==0x0)await sendTelegram(_0x19751c[_0x4a9b76(0x23f)]['id'],_0x4a9b76(0x2c8));else{if(_0x14b511[_0x4a9b76(0x16a)]>0x1)_0x14b511[_0x4a9b76(0x22a)]({'botID':_0x4a9b76(0x286)});let _0xd66e27=[],_0x128747=[];const _0x1a561e=_0x14b511[_0x4a9b76(0x16a)]%0x4==0x0||_0x14b511[_0x4a9b76(0x16a)]%0x4==0x3||_0x14b511[_0x4a9b76(0x16a)]%0x3==0x1?0x4:0x3;let _0x1fee6f=0x0;_0x14b511[_0x4a9b76(0x1af)]((_0x510691,_0xd52b57)=>{const _0x41b633=_0x4a9b76;if(_0xd52b57%_0x1a561e==0x0)_0x128747=[];_0x128747[_0x41b633(0x22a)](Markup[_0x41b633(0x25d)][_0x41b633(0x21c)](_0x510691[_0x41b633(0x2fa)]==_0x41b633(0x286)?_0x41b633(0x180):_0x41b633(0x282)+_0x510691[_0x41b633(0x2fa)],_0x41b633(0x31f)+_0x510691[_0x41b633(0x2fa)])),_0xd52b57%_0x1a561e==0x0&&(_0xd66e27[_0x1fee6f]=_0x128747,_0x1fee6f++);});const _0x52da84=Markup[_0x4a9b76(0x1b8)](_0xd66e27);_0x19751c[_0x4a9b76(0x2e2)](_0x4a9b76(0x219),_0x52da84);}}),tgBot[_0x5394d9(0x292)](/off_(.+)/,async _0x471043=>{const _0x4fe55e=_0x5394d9,_0x1bcb7b=_0x471043[_0x4fe55e(0x1f5)][0x1];_0x471043[_0x4fe55e(0x217)]();if(_0x1bcb7b=='all'){const _0x5d2cfb=getEnabledBots();await sendTelegram(_0x471043['chat']['id'],_0x4fe55e(0x2b7)),_0x5d2cfb[_0x4fe55e(0x1af)](_0x47623e=>{const _0x139c35=_0x4fe55e;if(_0x47623e['botID']!=_0x139c35(0x286))toggleBot(_0x47623e[_0x139c35(0x2fa)],toggleStatus(_0x47623e[_0x139c35(0x2fa)]),'stopped');});}else await sendTelegram(_0x471043[_0x4fe55e(0x23f)]['id'],_0x4fe55e(0x172)+_0x1bcb7b),toggleBot(_0x1bcb7b,toggleStatus(_0x1bcb7b),_0x4fe55e(0x209));}),tgBot[_0x5394d9(0x253)]('metrics',async _0x463cca=>{const _0x375775=_0x5394d9,_0x4f9b3b=getEnabledBots();if(_0x4f9b3b[_0x375775(0x16a)]==0x0)await sendTelegram(_0x463cca[_0x375775(0x23f)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x4f9b3b[_0x375775(0x16a)]>0x1){let _0x50c5ec=[],_0x42f12d=[];const _0x4a8cb9=_0x4f9b3b[_0x375775(0x16a)]%0x4==0x0||_0x4f9b3b[_0x375775(0x16a)]%0x4==0x3||_0x4f9b3b[_0x375775(0x16a)]%0x3==0x1?0x4:0x3;let _0x2c2435=0x0;_0x4f9b3b[_0x375775(0x1af)]((_0x3a412b,_0x4d77fc)=>{const _0x8d9266=_0x375775;if(_0x4d77fc%_0x4a8cb9==0x0)_0x42f12d=[];_0x42f12d[_0x8d9266(0x22a)](Markup[_0x8d9266(0x25d)]['callback'](_0x8d9266(0x282)+_0x3a412b[_0x8d9266(0x2fa)],_0x8d9266(0x19a)+_0x3a412b[_0x8d9266(0x2fa)])),_0x4d77fc%_0x4a8cb9==0x0&&(_0x50c5ec[_0x2c2435]=_0x42f12d,_0x2c2435++);});const _0x944a76=Markup['inlineKeyboard'](_0x50c5ec);_0x463cca['reply'](_0x375775(0x1a9),_0x944a76);}else{const _0x30cc41=_0x4f9b3b[0x0][_0x375775(0x2fa)];if(pid[_0x30cc41])pid[_0x30cc41][_0x375775(0x153)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x5394d9(0x292)](/metrics_(.+)/,async _0x1eb222=>{const _0x18a998=_0x5394d9,_0x311f9c=_0x1eb222['match'][0x1];_0x1eb222[_0x18a998(0x217)]();if(pid[_0x311f9c])pid[_0x311f9c][_0x18a998(0x153)]({'function':_0x18a998(0x1c4),'args':null});}),tgBot[_0x5394d9(0x253)](_0x5394d9(0x1ae),async _0x5626b6=>{const _0x3eb1a5=_0x5394d9,_0x4d92bd=getEnabledBots();if(_0x4d92bd[_0x3eb1a5(0x16a)]==0x0)await sendTelegram(_0x5626b6['chat']['id'],_0x3eb1a5(0x2c8));else{if(_0x4d92bd[_0x3eb1a5(0x16a)]>0x1){let _0x3ee638=[],_0x491e43=[];const _0x57509e=_0x4d92bd[_0x3eb1a5(0x16a)]%0x4==0x0||_0x4d92bd[_0x3eb1a5(0x16a)]%0x4==0x3||_0x4d92bd['length']%0x3==0x1?0x4:0x3;let _0x359eba=0x0;_0x4d92bd[_0x3eb1a5(0x1af)]((_0x4f163b,_0x33a59c)=>{const _0x1e0db9=_0x3eb1a5;if(_0x33a59c%_0x57509e==0x0)_0x491e43=[];_0x491e43[_0x1e0db9(0x22a)](Markup[_0x1e0db9(0x25d)][_0x1e0db9(0x21c)](_0x1e0db9(0x282)+_0x4f163b['botID'],_0x1e0db9(0x2e3)+_0x4f163b[_0x1e0db9(0x2fa)])),_0x33a59c%_0x57509e==0x0&&(_0x3ee638[_0x359eba]=_0x491e43,_0x359eba++);});const _0xe1602b=Markup[_0x3eb1a5(0x1b8)](_0x3ee638);_0x5626b6[_0x3eb1a5(0x2e2)](_0x3eb1a5(0x229),_0xe1602b);}else{const _0x5dbbc9=_0x4d92bd[0x0][_0x3eb1a5(0x2fa)];if(pid[_0x5dbbc9])pid[_0x5dbbc9][_0x3eb1a5(0x153)]({'function':_0x3eb1a5(0x315),'args':null});}}}),tgBot[_0x5394d9(0x292)](/portfolio_(.+)/,async _0x206d21=>{const _0x59f508=_0x5394d9,_0x4f6c92=_0x206d21[_0x59f508(0x1f5)][0x1];_0x206d21[_0x59f508(0x217)]();if(pid[_0x4f6c92])pid[_0x4f6c92][_0x59f508(0x153)]({'function':_0x59f508(0x315),'args':null});}),tgBot[_0x5394d9(0x253)](_0x5394d9(0x1d1),async _0xe54e=>{const _0x4c87b1=_0x5394d9;await getMessages();if(!updateAvailable)await sendTelegram(_0xe54e[_0x4c87b1(0x23f)]['id'],_0x4c87b1(0x1ff));else{if(!validInstallation)await sendTelegram(_0xe54e[_0x4c87b1(0x23f)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x41e021=Markup[_0x4c87b1(0x1b8)]([Markup[_0x4c87b1(0x25d)][_0x4c87b1(0x21c)](_0x4c87b1(0x232),'update_yes'),Markup['button']['callback']('No','update_no')]);_0xe54e['reply'](_0x4c87b1(0x287),_0x41e021);}}}),tgBot[_0x5394d9(0x292)](/update_(.+)/,async _0x76b4dd=>{const _0x2c975a=_0x5394d9,_0x39bda0=_0x76b4dd['match'][0x1];_0x76b4dd['editMessageReplyMarkup'](),_0x39bda0==_0x2c975a(0x1dc)&&(await sendTelegram(_0x76b4dd[_0x2c975a(0x23f)]['id'],_0x2c975a(0x1fd)),updateBB('update')),_0x39bda0=='no'&&await sendTelegram(_0x76b4dd[_0x2c975a(0x23f)]['id'],_0x2c975a(0x2b1));}),tgBot['command']('reinstall',async _0x3b0247=>{const _0x143bb2=_0x5394d9;if(!validInstallation)await sendTelegram(_0x3b0247[_0x143bb2(0x23f)]['id'],_0x143bb2(0x259));else{const _0x47ec5b=Markup[_0x143bb2(0x1b8)]([Markup[_0x143bb2(0x25d)][_0x143bb2(0x21c)](_0x143bb2(0x232),_0x143bb2(0x1ba)),Markup[_0x143bb2(0x25d)]['callback']('No',_0x143bb2(0x263))]);_0x3b0247[_0x143bb2(0x2e2)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x47ec5b);}}),tgBot[_0x5394d9(0x292)](/reinstall_(.+)/,async _0x3348c3=>{const _0x3a609f=_0x5394d9,_0xbb73c2=_0x3348c3['match'][0x1];_0x3348c3[_0x3a609f(0x217)](),_0xbb73c2==_0x3a609f(0x1dc)&&(await sendTelegram(_0x3348c3[_0x3a609f(0x23f)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB('reinstall')),_0xbb73c2=='no'&&await sendTelegram(_0x3348c3[_0x3a609f(0x23f)]['id'],_0x3a609f(0x336));}),tgBot['command'](_0x5394d9(0x2ca),async _0x472b18=>{const _0x4fe1f7=_0x5394d9,_0x4da73b=getBotsWithMode();if(_0x4da73b[_0x4fe1f7(0x16a)]==0x0)await sendTelegram(_0x472b18['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x40934f=[],_0x1ceb0b=[];const _0xe0f0f2=0x2;let _0x27b686=0x0;_0x4da73b['forEach']((_0x40ae70,_0x39b8f0)=>{const _0x455c9d=_0x4fe1f7;if(_0x39b8f0%_0xe0f0f2==0x0)_0x1ceb0b=[];_0x1ceb0b[_0x455c9d(0x22a)](Markup[_0x455c9d(0x25d)][_0x455c9d(0x21c)]('Bot\x20'+_0x40ae70[_0x455c9d(0x2fa)]+'\x20('+_0x40ae70[_0x455c9d(0x175)]+')','toggle_'+_0x40ae70[_0x455c9d(0x2fa)])),_0x39b8f0%_0xe0f0f2==0x0&&(_0x40934f[_0x27b686]=_0x1ceb0b,_0x27b686++);});const _0x3b2495=Markup[_0x4fe1f7(0x1b8)](_0x40934f);_0x472b18[_0x4fe1f7(0x2e2)](_0x4fe1f7(0x28c),_0x3b2495);}}),tgBot[_0x5394d9(0x292)](/toggle_(.+)/,async _0x32669e=>{const _0x1cd359=_0x5394d9,_0x1e9c71=_0x32669e['match'][0x1];_0x32669e['editMessageReplyMarkup']();const _0x630fa3=getBotsWithMode(),_0x109b11=_0x630fa3['find'](_0x2c418d=>_0x2c418d['botID']==_0x1e9c71),_0x36e1f6=_0x109b11[_0x1cd359(0x175)]==_0x1cd359(0x190)?'manual':_0x1cd359(0x190);await sendTelegram(_0x32669e['chat']['id'],_0x1cd359(0x2d2)+_0x1e9c71+_0x1cd359(0x26f)+_0x36e1f6+_0x1cd359(0x136)),toggleBotMode(_0x1e9c71);}),tgBot[_0x5394d9(0x253)](_0x5394d9(0x280),async _0x5c730a=>{const _0x33055e=_0x5394d9;let _0x4fde54='';config[_0x33055e(0x1af)](_0x245c64=>{const _0x354ad3=_0x33055e;_0x4fde54+=_0x354ad3(0x282)+_0x245c64[_0x354ad3(0x2fa)]+':\x20'+_0x245c64[_0x354ad3(0x252)]+'\x0a';}),await sendTelegram(_0x5c730a[_0x33055e(0x23f)]['id'],_0x4fde54,{'parse_mode':_0x33055e(0x296)});}),tgBot[_0x5394d9(0x253)]('help',async _0x7d64eb=>{const _0x2872b3=_0x5394d9;await sendTelegram(_0x7d64eb[_0x2872b3(0x23f)]['id'],_0x3cd474);}),process[_0x5394d9(0x15a)]('SIGINT',()=>tgBot[_0x5394d9(0x187)](_0x5394d9(0x1bb))),process[_0x5394d9(0x15a)](_0x5394d9(0x2c3),()=>tgBot[_0x5394d9(0x187)]('SIGTERM')),tgBot[_0x5394d9(0x29c)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x4f010b,_0x2310ef,_0x146fbe){const _0x24fdc4=_0x322528;_0x146fbe={..._0x146fbe,'disable_web_page_preview':!![]};try{await tgBot[_0x24fdc4(0x21a)]['sendMessage'](_0x4f010b,_0x2310ef,_0x146fbe);}catch(_0x41b3c9){console[_0x24fdc4(0x14b)](_0x24fdc4(0x299),_0x41b3c9);}}async function sendTelegramBot(_0x31b8fd,_0x2d238b){const _0x549fd8=_0x322528;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x549fd8(0x286)||(_0x2d238b[_0x549fd8(0x141)]==_0x549fd8(0x1d2)||_0x2d238b[_0x549fd8(0x141)]==_0x549fd8(0x317)||_0x2d238b[_0x549fd8(0x141)]=='success')&&settings[_0x549fd8(0x267)]=='alerts'||_0x2d238b[_0x549fd8(0x141)]=='order'&&settings[_0x549fd8(0x267)]==_0x549fd8(0x214)){if(tgBot&&settings[_0x549fd8(0x2c2)]){if(_0x2d238b['showname'])await sendTelegram(settings[_0x549fd8(0x2c2)],_0x2d238b[_0x549fd8(0x252)]+_0x549fd8(0x2bc)+_0x2d238b[_0x549fd8(0x220)]);else await sendTelegram(settings[_0x549fd8(0x2c2)],_0x549fd8(0x282)+_0x31b8fd+'\x20>\x20'+_0x2d238b[_0x549fd8(0x220)]);}}}}async function sendTelegramMsg(_0x2d39ee,_0x36467f=_0x322528(0x296)){const _0x75c06d=_0x322528;return settings[_0x75c06d(0x1b0)]&&tgBot&&settings[_0x75c06d(0x2c2)]?(await sendTelegram(settings[_0x75c06d(0x2c2)],_0x2d39ee,{'parse_mode':_0x36467f}),!![]):![];}function getDeviceWithIp(_0x5bc1f0){return devices['find'](_0x2f80ed=>_0x2f80ed['ip']===_0x5bc1f0);}async function temporaryAccess2FA(_0x613a64,_0x73a916){const _0x23eb3e=_0x322528;let _0x759509=new Date(),_0x24940f=![];if(lastIpApproval){if(_0x759509-lastIpApproval<0x1388)_0x24940f=!![];}lastIpApproval=new Date();if(_0x24940f)return;if(tgBot&&settings['telegramChatId']){const _0x209f69=uuidRandom();tmpStorage[_0x209f69]={'uuid':_0x613a64,'externalip':_0x73a916};const _0x112d7b=Markup[_0x23eb3e(0x1b8)]([Markup[_0x23eb3e(0x25d)]['callback']('5\x20min',_0x23eb3e(0x273)+_0x209f69),Markup[_0x23eb3e(0x25d)][_0x23eb3e(0x21c)](_0x23eb3e(0x2c7),_0x23eb3e(0x33e)+_0x209f69),Markup['button']['callback'](_0x23eb3e(0x1e0),'tempaccess_30_'+_0x209f69),Markup[_0x23eb3e(0x25d)][_0x23eb3e(0x21c)]('reject','tempaccess_reject_'+_0x209f69)]);await sendTelegram(settings['telegramChatId'],_0x23eb3e(0x24f)+normalizeIP(_0x73a916)['show']+'\x20?',_0x112d7b),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x2a585f=>{const _0x234c62=_0x23eb3e,_0x16faea=_0x2a585f['match'][0x1],_0x5c6209=_0x2a585f[_0x234c62(0x1f5)][0x2],{uuid:_0x21a075,externalip:_0x8dbc70}=tmpStorage[_0x5c6209];delete tmpStorage[_0x5c6209],_0x2a585f['editMessageReplyMarkup'](),devices[_0x21a075][_0x234c62(0x20e)]={'clientip':_0x8dbc70,'timestamp':new Date()[_0x234c62(0x1b7)](),'expiry':_0x16faea},_0x16faea!=_0x234c62(0x181)?(await sendTelegram(_0x2a585f['chat']['id'],'Access\x20enabled\x20for\x20'+_0x16faea+'\x20minutes',{'parse_mode':_0x234c62(0x296)}),io['to'](_0x21a075)[_0x234c62(0x33a)](_0x234c62(0x32a),{'access':{'allow':![],'reason':_0x234c62(0x16d),'token':null}})):(await sendTelegram(_0x2a585f[_0x234c62(0x23f)]['id'],_0x234c62(0x2f8)),io['to'](_0x21a075)[_0x234c62(0x33a)]('status',{'access':{'allow':![],'reason':_0x234c62(0x135),'token':null}}));});}}async function loginAccess2FA(_0x4ffc0c,_0x5c0915){const _0x30fc4e=_0x322528;if(tgBot&&settings['telegramChatId']){const _0xd8cefd=uuidRandom();tmpStorage[_0xd8cefd]={'uuid':_0x4ffc0c,'externalip':_0x5c0915};const _0x5a5ed1=Markup['inlineKeyboard']([Markup['button']['callback'](_0x30fc4e(0x16b),_0x30fc4e(0x31a)+loginExpiry+'_'+_0xd8cefd),Markup['button'][_0x30fc4e(0x21c)](_0x30fc4e(0x181),'login2fa_reject_'+_0xd8cefd)]);await sendTelegram(settings[_0x30fc4e(0x2c2)],_0x30fc4e(0x1e6)+normalizeIP(_0x5c0915)[_0x30fc4e(0x2d3)]+'\x20?',_0x5a5ed1),tgBot[_0x30fc4e(0x292)](/login2fa_(.+)_(.+)/,async _0x3012c5=>{const _0x21b230=_0x30fc4e,_0x130877=_0x3012c5[_0x21b230(0x1f5)][0x1],_0x40a58e=_0x3012c5[_0x21b230(0x1f5)][0x2],{uuid:_0x102aac,externalip:_0x4ce1d5}=tmpStorage[_0x40a58e];delete tmpStorage[_0x40a58e],_0x3012c5[_0x21b230(0x217)](),devices[_0x102aac][_0x21b230(0x248)]={'clientip':_0x4ce1d5,'timestamp':new Date()['getTime'](),'expiry':_0x130877},_0x130877!=_0x21b230(0x181)?(await sendTelegram(_0x3012c5['chat']['id'],_0x21b230(0x218),{'parse_mode':'HTML'}),io['to'](_0x102aac)[_0x21b230(0x33a)]('status',{'access':{'allow':![],'reason':_0x21b230(0x16d),'token':null}})):(await sendTelegram(_0x3012c5[_0x21b230(0x23f)]['id'],_0x21b230(0x131)),io['to'](_0x102aac)[_0x21b230(0x33a)](_0x21b230(0x32a),{'access':{'allow':![],'reason':_0x21b230(0x140),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x88dd7b=_0x322528;return dbConfig[_0x88dd7b(0x2ec)](_0x88dd7b(0x225))[_0x88dd7b(0x24b)]('botID')['filter']({'status':_0x88dd7b(0x2b9)})['value']()||[];}function getDisabledBots(){const _0x53148b=_0x322528;return dbConfig[_0x53148b(0x2ec)](_0x53148b(0x225))['sortBy'](_0x53148b(0x2fa))[_0x53148b(0x1b3)]({'status':_0x53148b(0x2aa)})['value']()||[];}function getBotAttributes(_0x3aa4a9){const _0x1980bb=_0x322528;let _0x4fe5b0={};const _0x5c06e4=configpath+'bot-'+_0x3aa4a9+_0x1980bb(0x215),_0xac8792=fs['existsSync'](_0x5c06e4);if(_0xac8792){const _0x39c48f=fs['readFileSync'](_0x5c06e4);try{const _0x4da0f0=JSON[_0x1980bb(0x2dc)](_0x39c48f),_0x395237=_0x4da0f0?_0x4da0f0[_0x1980bb(0x2e7)][0x0]['headless']:![];_0x4fe5b0[_0x1980bb(0x175)]=_0x395237?'auto':_0x1980bb(0x337),_0x4fe5b0[_0x1980bb(0x252)]=_0x4da0f0?_0x4da0f0[_0x1980bb(0x2e7)][0x0][_0x1980bb(0x252)]:_0x1980bb(0x282)+_0x3aa4a9;}catch(_0x3b0bc9){_0x4fe5b0['mode']=_0x1980bb(0x337),_0x4fe5b0[_0x1980bb(0x252)]=_0x1980bb(0x282)+_0x3aa4a9;}}else _0x4fe5b0[_0x1980bb(0x175)]=_0x1980bb(0x337),_0x4fe5b0[_0x1980bb(0x252)]='Bot\x20'+_0x3aa4a9;return _0x4fe5b0;}function getBotsWithMode(){const _0x5439a7=_0x322528,_0x1f3520=dbConfig[_0x5439a7(0x2ec)](_0x5439a7(0x225))[_0x5439a7(0x24b)](_0x5439a7(0x2fa))[_0x5439a7(0x236)]()||[];return _0x1f3520[_0x5439a7(0x1af)](_0x320fad=>{const _0x18a764=_0x5439a7;let _0x4961d8=getBotAttributes(_0x320fad[_0x18a764(0x2fa)]);_0x320fad[_0x18a764(0x175)]=_0x4961d8[_0x18a764(0x175)];}),_0x1f3520;}function getBotExchanges(){const _0x5378a0=_0x322528;let _0x2ba1b3=[];const _0x28003f=dbConfig['get'](_0x5378a0(0x225))[_0x5378a0(0x24b)](_0x5378a0(0x2fa))[_0x5378a0(0x236)]()||[];_0x28003f[_0x5378a0(0x1af)](_0x544bd2=>{const _0x2be8a7=_0x5378a0;if(_0x544bd2[_0x2be8a7(0x32a)]==_0x2be8a7(0x2b9)){const _0x5a76b6=configpath+'bot-'+_0x544bd2[_0x2be8a7(0x2fa)]+_0x2be8a7(0x215),_0xe9a5c1=fs['existsSync'](_0x5a76b6);let _0x3a66b9;if(_0xe9a5c1){const _0x439a05=fs['readFileSync'](_0x5a76b6);try{const _0x2de9f1=JSON[_0x2be8a7(0x2dc)](_0x439a05);_0x3a66b9=_0x2de9f1?_0x2de9f1[_0x2be8a7(0x2e7)][0x0][_0x2be8a7(0x23b)]:null;}catch(_0x483083){}}if(_0x3a66b9)_0x2ba1b3['push'](_0x3a66b9);}});const _0xda8663=[...new Set(_0x2ba1b3)][_0x5378a0(0x1e1)]();return _0xda8663;}async function initUser(){const _0xda64d=_0x322528;if(!settings[_0xda64d(0x2a6)]){const _0x1237b0=uuidRandom();mixpanel[_0xda64d(0x325)](_0x1237b0),updateSetting(_0xda64d(0x2a6),_0x1237b0);}}async function initSecure(){const _0x4ba06d=_0x322528;let _0x3f2581=getSecure();if(!_0x3f2581[_0x4ba06d(0x333)](_0x4ba06d(0x1eb))){let _0x2e8806=await generateKeys();_0x3f2581[_0x4ba06d(0x1f3)]=_0x2e8806[_0x4ba06d(0x1f3)],_0x3f2581[_0x4ba06d(0x1ea)]=_0x2e8806['privateKey'],_0x3f2581['secret']=crypto['randomBytes'](0x20)['toString'](_0x4ba06d(0x31c));;storeSecure(_0x3f2581);}}function getSettings(){const _0xa9cb86=_0x322528;return dbSettings[_0xa9cb86(0x2ec)]('settings')[_0xa9cb86(0x236)]()||{};}function getSecure(){const _0x29cc2b=_0x322528;return dbSecure[_0x29cc2b(0x2ec)](_0x29cc2b(0x2b4))['value']()||{};}function getBlacklist(){const _0x5a5269=_0x322528;return dbSecure[_0x5a5269(0x2ec)](_0x5a5269(0x192))[_0x5a5269(0x236)]()||[];}function broadcastToBots(_0x61cda3,_0x57163c){const _0x474ee9=_0x322528;config[_0x474ee9(0x1af)](_0x3d04aa=>{const _0x3b41c0=_0x474ee9;if(_0x3d04aa[_0x3b41c0(0x32a)]==_0x3b41c0(0x2b9)&&_0x3d04aa[_0x3b41c0(0x1be)]=='running'||_0x3d04aa[_0x3b41c0(0x32a)]==_0x3b41c0(0x246)&&_0x3d04aa['live']==_0x3b41c0(0x308)){if(pid[_0x3d04aa[_0x3b41c0(0x2fa)]])pid[_0x3d04aa['botID']]['send']({[_0x61cda3]:_0x57163c});}});}async function storeSettings(_0x2608e0,_0x26aa7d=![]){const _0x175514=_0x322528;_0x2608e0={...settings,..._0x2608e0};if(_0x26aa7d&&_0x2608e0[_0x175514(0x194)]!=_0x175514(0x147)&&_0x2608e0[_0x175514(0x194)]!=_0x175514(0x25f)&&_0x2608e0['bbPassword']!=''){const _0x4fa96e=decryptRSA(secure[_0x175514(0x1ea)],_0x2608e0['bbPassword'])[_0x175514(0x130)](_0x175514(0x2c9))[0x0],_0x273b0e=bcrypt['hashSync'](_0x4fa96e,saltRounds);_0x2608e0={..._0x2608e0,'bbPassword':_0x273b0e};}if(_0x26aa7d&&_0x2608e0[_0x175514(0x2db)]!='************'&&_0x2608e0[_0x175514(0x2db)]!=_0x175514(0x25f)&&_0x2608e0[_0x175514(0x2db)]!=''){const _0x45663b=decryptRSA(secure['privateKey'],_0x2608e0['telegramToken'])['split'](_0x175514(0x2c9))[0x0];_0x2608e0={..._0x2608e0,'telegramToken':_0x45663b};}if(_0x26aa7d&&_0x2608e0[_0x175514(0x31d)]!=_0x175514(0x147)&&_0x2608e0['marketcapApi']!=_0x175514(0x25f)&&_0x2608e0[_0x175514(0x31d)]!=''){const _0x508998=decryptRSA(secure[_0x175514(0x1ea)],_0x2608e0[_0x175514(0x31d)])['split'](_0x175514(0x2c9))[0x0];_0x2608e0={..._0x2608e0,'marketcapApi':_0x508998};}const _0x578efa=_0x2608e0[_0x175514(0x2db)]!=_0x175514(0x147)&&_0x2608e0[_0x175514(0x2db)]!=settings[_0x175514(0x2db)]||_0x2608e0[_0x175514(0x133)]!=settings['telegramUsername'],_0x1d2442=_0x2608e0[_0x175514(0x2db)]==''||_0x2608e0['telegramUsername']=='',_0x2fbda5=_0x2608e0[_0x175514(0x31d)]&&_0x2608e0[_0x175514(0x31d)]!='************'&&_0x2608e0[_0x175514(0x31d)]!=settings[_0x175514(0x2db)];_0x578efa&&(_0x2608e0['telegramChatId']=null,_0x2608e0[_0x175514(0x267)]='all');for(const [_0x7f2dd,_0x2ef534]of Object['entries'](_0x2608e0)){if(_0x7f2dd==_0x175514(0x2db)&&_0x2ef534==_0x175514(0x147)){_0x2608e0[_0x175514(0x2db)]=settings['telegramToken'];continue;};if(_0x7f2dd==_0x175514(0x194)&&_0x2ef534==_0x175514(0x147)){_0x2608e0[_0x175514(0x194)]=settings[_0x175514(0x194)];continue;};if(_0x7f2dd=='marketcapApi'&&_0x2ef534=='************'){_0x2608e0[_0x175514(0x31d)]=settings[_0x175514(0x31d)];continue;};dbSettings[_0x175514(0x2ee)](_0x175514(0x1a0)+_0x7f2dd,_0x2ef534)[_0x175514(0x1e9)]();}settings=_0x2608e0,io['to'](_0x175514(0x2f4))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x175514(0x294)]),broadcastToBots('onepagemode',settings['onepagemode']),broadcastToBots('marketcapApi',settings[_0x175514(0x31d)]);if(_0x578efa&&!_0x1d2442)initTelegram();if(_0x578efa&&_0x1d2442)disableTelegram();getAllClients()[_0x175514(0x1af)](_0x12bef7=>{const _0x450476=_0x175514;getSocket(_0x12bef7['id'])['emit'](_0x450476(0x32a),{'access':{'allow':![],'reason':_0x450476(0x16d),'token':null}});}),_0x2fbda5&&(await sleep(0xbb8),testMarketcapApi(_0x2608e0[_0x175514(0x31d)]));}async function testMarketcapApi(_0x596aef){const _0x31f860=_0x322528,_0x36c2fc=[_0x31f860(0x223),_0x31f860(0x13b)];try{await axios[_0x31f860(0x2ec)](_0x31f860(0x2a0),{'headers':{'X-CMC_PRO_API_KEY':_0x596aef},'params':{'symbol':_0x36c2fc[_0x31f860(0x1d4)]()}});}catch(_0x31d012){_0x31d012[_0x31f860(0x1d4)]()[_0x31f860(0x243)]('status\x20code\x20401')?(io['to'](_0x31f860(0x2f4))['emit']('notification','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x31f860(0x158)]('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x31f860(0x2f4))[_0x31f860(0x33a)](_0x31f860(0x332),_0x31f860(0x2c6)),logger[_0x31f860(0x158)](_0x31f860(0x2c6)),logger[_0x31f860(0x2be)](_0x31f860(0x28d),_0x31d012[_0x31f860(0x1d4)]()+'\x20-\x20'+_0x31d012[_0x31f860(0x2fd)]));return;}logger[_0x31f860(0x2be)](_0x31f860(0x30b));}function updateSetting(_0x24bb1b,_0x36b8aa){const _0x3df1b5=_0x322528;dbSettings[_0x3df1b5(0x2ee)](_0x3df1b5(0x1a0)+_0x24bb1b,_0x36b8aa)[_0x3df1b5(0x1e9)](),settings=getSettings(),io['to'](_0x3df1b5(0x2f4))[_0x3df1b5(0x33a)](_0x3df1b5(0x2d0),cleanSettings());}function storeSecure(_0x2fc995){const _0x15c967=_0x322528;dbSecure['get'](_0x15c967(0x2b4))[_0x15c967(0x22a)](_0x2fc995)[_0x15c967(0x1e9)](),secure=_0x2fc995;}function addBlacklist(_0x69d90){const _0x52c485=_0x322528;cleanBlacklist();let _0x5e9f2b;devices[_0x69d90]['telegramIpApproval']?_0x5e9f2b=Math[_0x52c485(0x2d1)](devices[_0x69d90][_0x52c485(0x20e)][_0x52c485(0x17c)],loginExpiry):_0x5e9f2b=loginExpiry,dbSecure[_0x52c485(0x2ec)]('blacklist')[_0x52c485(0x22a)]({'expiry':new Date()[_0x52c485(0x1b7)]()+_0x5e9f2b*0x3c*0x3e8,'token':devices[_0x69d90]['access'][_0x52c485(0x22f)]})['write'](),blacklist=dbSecure[_0x52c485(0x2ec)]('blacklist')[_0x52c485(0x236)]();}function cleanBlacklist(){const _0x18a206=_0x322528;let _0x2ddd8e=dbSecure[_0x18a206(0x2ec)]('blacklist')['cloneDeep']()[_0x18a206(0x236)](),_0xbefd32=new Date()[_0x18a206(0x1b7)]();_0x2ddd8e[_0x18a206(0x1af)](_0x4e597f=>{const _0xe7a3a4=_0x18a206;_0x4e597f[_0xe7a3a4(0x17c)]<_0xbefd32&&dbSecure[_0xe7a3a4(0x2ec)](_0xe7a3a4(0x192))['remove']({'expiry':_0x4e597f[_0xe7a3a4(0x17c)]})[_0xe7a3a4(0x1e9)]();});}function initStates(){const _0x19479d=_0x322528;let _0xef75ca=getConfiguration();_0xef75ca[_0x19479d(0x1af)](_0x3d975b=>{const _0x35f568=_0x19479d;_0x3d975b[_0x35f568(0x1be)]=_0x35f568(0x209);}),storeConfiguration(_0xef75ca);}async function generateKeys(){const _0x4d9e81=_0x322528,_0x374c68=forge[_0x4d9e81(0x1bd)]['rsa'][_0x4d9e81(0x26d)]({'bits':0x1000,'e':0x10001}),_0x1a0cb8=forge['pki'][_0x4d9e81(0x2fe)](_0x374c68[_0x4d9e81(0x1ea)]),_0x2d58aa=forge[_0x4d9e81(0x1bd)]['publicKeyToPem'](_0x374c68[_0x4d9e81(0x1f3)]);return{'privateKey':_0x1a0cb8,'publicKey':_0x2d58aa};}async function oneTimeMigration(){const _0x526eb9=_0x322528;let _0x19b81a=getSettings(),_0xc554ed=![];!_0x19b81a[_0x526eb9(0x333)](_0x526eb9(0x326))&&(_0x19b81a[_0x526eb9(0x326)]=0x0,_0xc554ed=!![]);!_0x19b81a[_0x526eb9(0x333)](_0x526eb9(0x18b))&&(_0x19b81a[_0x526eb9(0x18b)]=0x0,_0xc554ed=!![]);!_0x19b81a['hasOwnProperty'](_0x526eb9(0x1bc))&&(_0x19b81a['latestversion']=_0x526eb9(0x197),_0xc554ed=!![]);!_0x19b81a[_0x526eb9(0x333)](_0x526eb9(0x19c))&&(_0x19b81a[_0x526eb9(0x19c)]=![],_0xc554ed=!![]);!_0x19b81a[_0x526eb9(0x333)]('marketcapApi')&&(_0x19b81a[_0x526eb9(0x31d)]='',_0xc554ed=!![]);if(_0xc554ed)storeSettings(_0x19b81a);try{fs[_0x526eb9(0x183)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x1d9503=>{const _0x13ebe8=_0x526eb9;if(!_0x1d9503[_0x13ebe8(0x2af)]()){if(!_0x1d9503['name']['startsWith'](_0x13ebe8(0x2f6)))fs[_0x13ebe8(0x216)](configbackuppath+_0x1d9503[_0x13ebe8(0x1f1)]);}else fs[_0x13ebe8(0x23d)](configbackuppath+_0x1d9503[_0x13ebe8(0x1f1)],{'recursive':!![]});});}catch(_0xd34e5d){logger[_0x526eb9(0x2be)](_0x526eb9(0x274),_0xd34e5d);}}function storeConfiguration(_0x40ddbe){const _0x451fd7=_0x322528;dbConfig['get']('bots')['remove']()[_0x451fd7(0x1e9)](),dbConfig['get'](_0x451fd7(0x225))[_0x451fd7(0x22a)](..._0x40ddbe)[_0x451fd7(0x1e9)](),config=_0x40ddbe;}async function resetPassword(){const _0x212a45=_0x322528;if(tgBot&&settings[_0x212a45(0x2c2)]){const _0x58abf0=Markup[_0x212a45(0x1b8)]([Markup['button']['callback']('yes','resetpw_yes'),Markup[_0x212a45(0x25d)][_0x212a45(0x21c)]('no',_0x212a45(0x177))]);await sendTelegram(settings['telegramChatId'],_0x212a45(0x2f5),_0x58abf0),tgBot[_0x212a45(0x292)](/resetpw_(.+)/,async _0x11ec6a=>{const _0x377fcc=_0x212a45,_0x4f88e6=_0x11ec6a[_0x377fcc(0x1f5)][0x1];_0x11ec6a[_0x377fcc(0x217)]();if(_0x4f88e6!='no'){const _0x768ffd=0xf,_0x2d6526=_0x377fcc(0x26b),_0x3c4685=Array[_0x377fcc(0x1e3)](crypto[_0x377fcc(0x2d8)](new Uint32Array(_0x768ffd)))['map'](_0x50f3a5=>_0x2d6526[_0x50f3a5%_0x2d6526[_0x377fcc(0x16a)]])[_0x377fcc(0x2bd)](''),_0x32fb9f=bcrypt[_0x377fcc(0x1ca)](_0x3c4685,saltRounds);storeSettings({'bbPassword':_0x32fb9f}),await sendTelegram(_0x11ec6a[_0x377fcc(0x23f)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3c4685,{'parse_mode':_0x377fcc(0x296)});}else await sendTelegram(_0x11ec6a['chat']['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x1171fe,_0x1498ea){const _0x400045=_0x322528;io['to']('botmanager')[_0x400045(0x33a)](_0x400045(0x332),_0x400045(0x1fa),_0x400045(0x319));if(tgBot&&settings[_0x400045(0x2c2)]){const _0x54b651=uuidRandom();tmpStorage[_0x54b651]={'path':_0x1171fe,'filename':_0x1498ea};const _0x2a4a2b=Markup[_0x400045(0x1b8)]([Markup[_0x400045(0x25d)][_0x400045(0x21c)](_0x400045(0x1dc),'restore_yes_'+_0x54b651),Markup[_0x400045(0x25d)][_0x400045(0x21c)]('no',_0x400045(0x235)+_0x54b651)]);await sendTelegram(settings[_0x400045(0x2c2)],_0x400045(0x1ed),_0x2a4a2b),tgBot['action'](/restore_(.+)_(.+)/,async _0x31408b=>{const _0x1ce649=_0x400045,_0x4cbbac=_0x31408b[_0x1ce649(0x1f5)][0x1],_0x2bdf20=_0x31408b['match'][0x2],{path:_0x4ffb43,filename:_0x197d2d}=tmpStorage[_0x2bdf20];delete tmpStorage[_0x2bdf20],_0x31408b[_0x1ce649(0x217)](),_0x4cbbac==_0x1ce649(0x1dc)?(logger['debug'](_0x1ce649(0x2a5)),await sendTelegram(_0x31408b[_0x1ce649(0x23f)]['id'],_0x1ce649(0x213),{'parse_mode':'HTML'}),unzipFile(_0x4ffb43,_0x197d2d)):(logger[_0x1ce649(0x2be)](_0x1ce649(0x283)),await sendTelegram(_0x31408b[_0x1ce649(0x23f)]['id'],_0x1ce649(0x283)));});}}function getServerTime(){const _0x325523=_0x322528,_0xe36f29=new Date();return _0xe36f29[_0x325523(0x1a3)]()+'/'+(_0xe36f29[_0x325523(0x16f)]()+0x1)[_0x325523(0x1d4)]()[_0x325523(0x2d7)](0x2,'0')+'/'+_0xe36f29[_0x325523(0x314)]()[_0x325523(0x1d4)]()['padStart'](0x2,'0')+'\x20'+_0xe36f29[_0x325523(0x179)]()[_0x325523(0x1d4)]()[_0x325523(0x2d7)](0x2,'0')+':'+_0xe36f29['getMinutes']()[_0x325523(0x1d4)]()[_0x325523(0x2d7)](0x2,'0')+':'+_0xe36f29[_0x325523(0x23e)]()['toString']()[_0x325523(0x2d7)](0x2,'0');}function getTimeStamp(){const _0x169e30=_0x322528,_0x521ea2=shiftedTime();return _0x521ea2[_0x169e30(0x1a3)]()+'/'+(_0x521ea2[_0x169e30(0x16f)]()+0x1)[_0x169e30(0x1d4)]()[_0x169e30(0x2d7)](0x2,'0')+'/'+_0x521ea2[_0x169e30(0x314)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x521ea2[_0x169e30(0x179)]()[_0x169e30(0x1d4)]()[_0x169e30(0x2d7)](0x2,'0')+':'+_0x521ea2[_0x169e30(0x2c0)]()[_0x169e30(0x1d4)]()[_0x169e30(0x2d7)](0x2,'0')+':'+_0x521ea2[_0x169e30(0x23e)]()[_0x169e30(0x1d4)]()[_0x169e30(0x2d7)](0x2,'0');}function getCleanTimeStamp(){const _0x271956=_0x322528,_0x31f302=shiftedTime();return _0x31f302[_0x271956(0x1a3)]()+(_0x31f302[_0x271956(0x16f)]()+0x1)['toString']()[_0x271956(0x2d7)](0x2,'0')+_0x31f302[_0x271956(0x314)]()[_0x271956(0x1d4)]()[_0x271956(0x2d7)](0x2,'0')+'-'+_0x31f302['getHours']()['toString']()['padStart'](0x2,'0')+_0x31f302[_0x271956(0x2c0)]()[_0x271956(0x1d4)]()[_0x271956(0x2d7)](0x2,'0')+_0x31f302[_0x271956(0x23e)]()[_0x271956(0x1d4)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x5a07d0=_0x322528,_0x1133e5=new Date();let _0x36f977=_0x1133e5;if(settings['timeshift']&&settings[_0x5a07d0(0x294)]!==0x0)_0x36f977=fns[_0x5a07d0(0x307)](_0x1133e5,{'hours':settings[_0x5a07d0(0x294)]});return _0x36f977;}async function startScheduler(){const _0x4fdf7a=_0x322528,_0x40abaf=new Date()[_0x4fdf7a(0x277)](),_0x3a8c1d=shiftedTime()[_0x4fdf7a(0x179)]();_0x3a8c1d==0x4&&backupConfigFiles(),_0x3a8c1d==0x0&&rotateLogFiles(),_0x40abaf%0x6==0x0&&triggerAnalytics(),_0x40abaf%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x5168ee){const _0x33ef68=_0x322528;logger[_0x33ef68(0x2be)](_0x33ef68(0x33f)+_0x5168ee);const _0x3becf7=getBotsWithMode();_0x3becf7[_0x33ef68(0x16a)]>0x0?confirmRestore(configbackuppath,_0x5168ee):unzipFile(configbackuppath,_0x5168ee);}async function getBackupFiles(_0x28f522=null){const _0x40818f=_0x322528;let _0x4b7691=[],_0x1de73a=fs[_0x40818f(0x183)](configbackuppath,{'withFileTypes':!![]});_0x1de73a['sort']((_0x17302a,_0x35cffd)=>_0x17302a[_0x40818f(0x1f1)]<_0x35cffd[_0x40818f(0x1f1)]?0x1:_0x35cffd['name']<_0x17302a[_0x40818f(0x1f1)]?-0x1:0x0),_0x1de73a[_0x40818f(0x1af)](_0x43e68b=>{const _0x3a22e9=_0x40818f;if(!_0x43e68b[_0x3a22e9(0x2af)]()&&_0x43e68b[_0x3a22e9(0x1f1)][_0x3a22e9(0x321)](_0x3a22e9(0x2f6))&&_0x43e68b[_0x3a22e9(0x1f1)][_0x3a22e9(0x1ab)](_0x3a22e9(0x27a))){const _0x314cf3=formatDate(fs[_0x3a22e9(0x224)](configbackuppath+_0x43e68b[_0x3a22e9(0x1f1)])[_0x3a22e9(0x260)]);_0x4b7691[_0x3a22e9(0x22a)]({'name':_0x43e68b['name'],'mtime':_0x314cf3});}});if(_0x28f522)io['to'](_0x28f522)[_0x40818f(0x33a)](_0x40818f(0x15e),_0x4b7691);else return _0x4b7691;}async function backupConfigFiles(){const _0x42be98=_0x322528;await zipFiles(_0x42be98(0x14c));const _0x2c0e60=getCleanTimeStamp();fs[_0x42be98(0x152)](zippath+_0x42be98(0x28e),configbackuppath+(_0x42be98(0x2f6)+_0x2c0e60+_0x42be98(0x27a)));let _0x201a7f=fs[_0x42be98(0x183)](configbackuppath,{'withFileTypes':!![]});_0x201a7f[_0x42be98(0x1e1)]((_0x5720a1,_0x1ba974)=>_0x5720a1[_0x42be98(0x1f1)]<_0x1ba974[_0x42be98(0x1f1)]?0x1:_0x1ba974[_0x42be98(0x1f1)]<_0x5720a1[_0x42be98(0x1f1)]?-0x1:0x0),_0x201a7f[_0x42be98(0x16a)]>maxBackups&&fs[_0x42be98(0x216)](configbackuppath+_0x201a7f[_0x201a7f['length']-0x1][_0x42be98(0x1f1)]);}function rotateLogFiles(){const _0x4417f6=_0x322528,_0x452d2a=fs['statSync'](logspath+_0x4417f6(0x300)),_0x3713a3=_0x452d2a['size']/0x400;if(_0x3713a3>0x64){let _0x4eb13d=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x4eb13d[_0x4417f6(0x1e1)]((_0x40816b,_0x277140)=>_0x40816b[_0x4417f6(0x1f1)]<_0x277140[_0x4417f6(0x1f1)]?0x1:_0x277140[_0x4417f6(0x1f1)]<_0x40816b['name']?-0x1:0x0),_0x4eb13d[_0x4417f6(0x1af)](_0x7cb345=>{const _0x2d2250=_0x4417f6;if(_0x7cb345[_0x2d2250(0x1f1)]==_0x2d2250(0x156))fs[_0x2d2250(0x152)](logspath+_0x7cb345['name'],logspath+_0x2d2250(0x2a9));if(_0x7cb345['name']==_0x2d2250(0x169))fs[_0x2d2250(0x152)](logspath+_0x7cb345['name'],logspath+_0x2d2250(0x156));_0x7cb345[_0x2d2250(0x1f1)]==_0x2d2250(0x300)&&(fs[_0x2d2250(0x152)](logspath+_0x7cb345[_0x2d2250(0x1f1)],logspath+_0x2d2250(0x169)),fs[_0x2d2250(0x261)](logspath+_0x7cb345[_0x2d2250(0x1f1)],''));});}}async function zipFiles(_0x3a4c7c){const _0x1b7ef4=_0x322528;let _0x4f39f9;if(_0x3a4c7c==_0x1b7ef4(0x176))_0x4f39f9=logspath;if(_0x3a4c7c==_0x1b7ef4(0x316))_0x4f39f9=configpath;if(_0x3a4c7c==_0x1b7ef4(0x14c))_0x4f39f9=configpath;let _0x1f42be=fs['readdirSync'](_0x4f39f9,{'withFileTypes':!![]});const _0x3b9727=new JSZip();_0x1f42be[_0x1b7ef4(0x1af)](_0x366335=>{const _0x1c8ea5=_0x1b7ef4;if(!_0x366335[_0x1c8ea5(0x2af)]()){let _0x57d513=fs[_0x1c8ea5(0x271)](_0x4f39f9+_0x366335[_0x1c8ea5(0x1f1)]);if(_0x3a4c7c==_0x1c8ea5(0x316)){const _0x74d2e=/^bot-[0-9]{3}-config.json$/,_0x369070=_0x74d2e['test'](_0x366335[_0x1c8ea5(0x1f1)]);if(_0x369070){const _0x200c2d=JSON[_0x1c8ea5(0x2dc)](_0x57d513);if(_0x200c2d['bot'][0x0]){_0x200c2d[_0x1c8ea5(0x2e7)][0x0][_0x1c8ea5(0x19e)]=_0x1c8ea5(0x25f),_0x200c2d[_0x1c8ea5(0x2e7)][0x0][_0x1c8ea5(0x324)]=_0x1c8ea5(0x25f);if(_0x200c2d[_0x1c8ea5(0x2e7)][0x0][_0x1c8ea5(0x288)])_0x200c2d[_0x1c8ea5(0x2e7)][0x0][_0x1c8ea5(0x288)]=_0x1c8ea5(0x25f);}_0x57d513=JSON[_0x1c8ea5(0x134)](_0x200c2d,null,0x2);}if(_0x366335['name']==_0x1c8ea5(0x2f9)){const _0x4817de=JSON[_0x1c8ea5(0x2dc)](_0x57d513);if(_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x189)])_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x189)]=![];if(_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x194)])_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x194)]=_0x1c8ea5(0x25f);if(_0x4817de[_0x1c8ea5(0x2d0)]['telegramToken'])_0x4817de[_0x1c8ea5(0x2d0)]['telegramToken']=_0x1c8ea5(0x25f);if(_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x2c2)])_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x2c2)]=null;if(_0x4817de['settings'][_0x1c8ea5(0x31d)])_0x4817de[_0x1c8ea5(0x2d0)][_0x1c8ea5(0x31d)]=_0x1c8ea5(0x25f);_0x57d513=JSON[_0x1c8ea5(0x134)](_0x4817de,null,0x2);}if(_0x366335[_0x1c8ea5(0x1f1)]!='bb-secure.json')_0x3b9727[_0x1c8ea5(0x18e)](_0x366335[_0x1c8ea5(0x1f1)],_0x57d513);}else _0x3b9727['file'](_0x366335[_0x1c8ea5(0x1f1)],_0x57d513);}});const _0x14f209=await _0x3b9727['generateAsync']({'type':_0x1b7ef4(0x264),'base64':![],'compression':_0x1b7ef4(0x1b6)});fs[_0x1b7ef4(0x261)](zippath+(_0x3a4c7c+_0x1b7ef4(0x27a)),_0x14f209,_0x1b7ef4(0x26e));}async function unzipFile(_0x2e307,_0x24ab2d){const _0x38d0b9=_0x322528;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x38d0b9(0x1af)](_0x1d9a2f=>{const _0x38e773=_0x38d0b9;if(!_0x1d9a2f['isDirectory']())fs[_0x38e773(0x23d)](configpath+_0x1d9a2f[_0x38e773(0x1f1)]);});const _0xc7cef9=fs[_0x38d0b9(0x271)](_0x2e307+_0x24ab2d,_0x38d0b9(0x26e)),_0x360210=await JSZip[_0x38d0b9(0x171)](_0xc7cef9,{'base64':![],'checkCRC32':!![]});for(const _0xb9b610 of Object['keys'](_0x360210[_0x38d0b9(0x17f)])){const _0x4a87bd=_0x360210['files'][_0xb9b610],_0x50103a=await _0x4a87bd['async'](_0x38d0b9(0x264));fs['writeFileSync'](configpath+_0x4a87bd[_0x38d0b9(0x1f1)],_0x50103a);}fs[_0x38d0b9(0x183)](temppath,{'withFileTypes':!![]})[_0x38d0b9(0x1af)](_0x2351cf=>{const _0x8f8c71=_0x38d0b9;if(!_0x2351cf[_0x8f8c71(0x2af)]())fs['rmSync'](temppath+_0x2351cf['name']);}),logger[_0x38d0b9(0x2be)](_0x38d0b9(0x200)),process['send']({'restore':!![]},_0x7377c4=>{});}async function getPublicIp(){const _0x3b5922=_0x322528;try{const _0x2ec996=await axios[_0x3b5922(0x2ec)]('https://api.ipify.org?format=json');publicip=_0x2ec996[_0x3b5922(0x185)]['ip'];}catch(_0x33428a){}}async function triggerAnalytics(){const _0x294f3b=_0x322528;if(!publicip)await getPublicIp();const _0x1257aa=getBotsWithMode();let _0x491a99=0x0;_0x1257aa[_0x294f3b(0x1af)](_0x3c53a3=>{const _0x3381e9=_0x294f3b;if(_0x3c53a3[_0x3381e9(0x32a)]==='enabled')_0x491a99++;});const _0xc5896=getBotExchanges();mixpanel[_0x294f3b(0x1f2)](_0x294f3b(0x15b),{'distinct_id':settings[_0x294f3b(0x2a6)],'ip':publicip,'version':serverversion,'numbots':_0x1257aa[_0x294f3b(0x16a)],'numbotsenabled':_0x491a99,'exchanges':_0xc5896,'environment':environment});}async function getMessages(){const _0x4222d1=_0x322528,_0x26cd1b=_0x4222d1(0x257),_0x29521e=new GraphQLClient(_0x26cd1b),_0x4174ed={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x5e1f8e=serverversion[_0x4222d1(0x130)]('.'),_0x4d468b=_0x5e1f8e[0x0]+'.'+_0x5e1f8e[0x1],_0x39e06e=Math[_0x4222d1(0x2cd)](settings['lastmsgtelegram'],settings[_0x4222d1(0x18b)]),_0x1bc95a={'last':parseInt(_0x39e06e),'bbm':_0x4d468b},_0x2cfc5c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3040cd;try{_0x3040cd=await _0x29521e[_0x4222d1(0x182)](_0x2cfc5c,_0x1bc95a,_0x4174ed);}catch(_0x8d827b){}if(_0x3040cd&&_0x3040cd['messages']){let _0x526f2a=settings[_0x4222d1(0x326)];newMessages=[];for(const _0x345748 of _0x3040cd[_0x4222d1(0x14d)]){newMessages[_0x4222d1(0x22a)](_0x345748);let _0x44d141=![];_0x345748[_0x4222d1(0x1c5)]&&(updateSetting(_0x4222d1(0x1bc),_0x345748[_0x4222d1(0x1c5)]),_0x44d141=isNewerVersion(serverversion,_0x345748['bbvNew'])||serverversion==_0x345748[_0x4222d1(0x1c5)]);if(!_0x44d141&&_0x345748['number']>_0x526f2a){if(_0x345748[_0x4222d1(0x1d7)]===_0x4222d1(0x2f3)||serverversion['startsWith'](_0x345748[_0x4222d1(0x1d7)])){let _0x5d1d6=''+_0x345748[_0x4222d1(0x13e)]+'\x0a\x0a'+_0x345748[_0x4222d1(0x237)];const _0x5dfa11=await sendTelegramMsg(toTelegramMarkdown(_0x5d1d6),_0x4222d1(0x1f0));if(_0x5dfa11)_0x526f2a=_0x345748[_0x4222d1(0x32c)];}}}updateAvailable=isNewerVersion(settings[_0x4222d1(0x1bc)],serverversion),updateSetting('lastmsgtelegram',_0x526f2a),emitMessages();}}function emitMessages(){const _0x13a97a=_0x322528,_0x2de002=settings[_0x13a97a(0x18b)];let _0x4a94e7=[];newMessages['forEach'](_0x22498d=>{const _0x4e9431=_0x13a97a;_0x22498d['number']>_0x2de002&&_0x4a94e7[_0x4e9431(0x22a)](_0x22498d);}),_0x4a94e7['length']>0x0&&getAllClients()[_0x13a97a(0x1af)](_0x4259dc=>{const _0xb10a26=_0x13a97a;getSocket(_0x4259dc['id'])[_0xb10a26(0x33a)](_0xb10a26(0x237),_0x4a94e7);});}function confirmMessage(_0x4ac01d){const _0x267f61=_0x322528;updateSetting(_0x267f61(0x18b),Number(_0x4ac01d));}function isNewerVersion(_0x1fb7ce,_0x35790b){const _0x49bbb0=_0x322528,_0x4cf08b=_0x35790b[_0x49bbb0(0x130)]('.'),_0x3128c8=_0x1fb7ce[_0x49bbb0(0x130)]('.');for(var _0x169f8d=0x0;_0x169f8d<_0x3128c8[_0x49bbb0(0x16a)];_0x169f8d++){const _0x410831=~~_0x3128c8[_0x169f8d],_0x6a8d89=~~_0x4cf08b[_0x169f8d];if(_0x410831>_0x6a8d89)return!![];if(_0x410831<_0x6a8d89)return![];}return![];}function toTelegramMarkdown(_0x329645){const _0x39e2d2=_0x322528,_0x5e1ee7=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xd768fb=/\*{2}(.+?)\*{2}/gim;return _0x329645=_0x329645[_0x39e2d2(0x2bb)](_0x5e1ee7,_0x39e2d2(0x328))['replace'](_0xd768fb,_0x39e2d2(0x2a8)),_0x329645;}async function validateConfigFile(){const _0x301d92=_0x322528,_0x1f725f=dbConfig['get'](_0x301d92(0x225))[_0x301d92(0x24b)](_0x301d92(0x2fa))['value']()||[];if(_0x1f725f[_0x301d92(0x16a)]==0x0){let _0x4086af=0x0,_0x5650ad=[];const _0x32567d=/^bot-([0-9]{3})-config.json$/,_0x15c317=fs['readdirSync'](configpath);_0x15c317[_0x301d92(0x1af)](_0x4fdd4e=>{const _0x152240=_0x301d92,_0x2c51c2=_0x32567d[_0x152240(0x146)](_0x4fdd4e);if(_0x2c51c2){const _0x5297b0=_0x2c51c2[0x1];let _0x28db08=getBotAttributes(_0x5297b0);_0x5650ad[_0x152240(0x22a)]({'botID':_0x5297b0,'botname':_0x28db08[_0x152240(0x252)],'status':_0x152240(0x2aa),'live':_0x152240(0x209)}),_0x4086af++;}}),_0x4086af!=0x0&&(dbConfig[_0x301d92(0x2ec)](_0x301d92(0x225))[_0x301d92(0x1a7)](_0x5650ad)['write'](),config=_0x5650ad,restoredConfigFile=_0x4086af);}}async function restoreConfigNotify(_0x45f4d5){const _0x3ef407=_0x322528;let _0x24208b;if(restoredConfigFile==0x1)_0x24208b=_0x3ef407(0x165);else _0x24208b='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x45f4d5)io['to']('botmanager')[_0x3ef407(0x33a)](_0x3ef407(0x332),_0x24208b);else{logger[_0x3ef407(0x1e7)](_0x3ef407(0x1b4)),logger[_0x3ef407(0x1e7)](_0x24208b),logger[_0x3ef407(0x1e7)]('-----------------------------------------------------------------------------------'),logger[_0x3ef407(0x1e7)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x3ef407(0x267)]!=_0x3ef407(0x214))await sendTelegram(settings[_0x3ef407(0x2c2)],_0x3ef407(0x24a)+_0x24208b);}}function decryptRSA(_0xd16ec8,_0x6e0db4){const _0x540389=_0x322528,_0x1f48ed=forge['pki'][_0x540389(0x281)](_0xd16ec8),_0x118edd=_0x1f48ed[_0x540389(0x234)](forge[_0x540389(0x205)][_0x540389(0x331)](_0x6e0db4),'RSA-OAEP',{'md':forge['md'][_0x540389(0x2cb)]['create'](),'mgf1':{'md':forge['md'][_0x540389(0x2cb)][_0x540389(0x19d)]()}});return _0x118edd;}function validateCredentials(_0x4bb695,_0x6f9f96){const _0x5eaafb=_0x322528;if(_0x4bb695[_0x5eaafb(0x31e)]==settings[_0x5eaafb(0x256)]&&bcrypt[_0x5eaafb(0x1ef)](_0x4bb695[_0x5eaafb(0x1f6)],settings['bbPassword'])){if(settings[_0x5eaafb(0x24e)])return{'allow':![],'reason':_0x5eaafb(0x1e5),'token':null};else{const _0x1568f2=generateLoginToken(_0x6f9f96);return{'allow':!![],'reason':_0x5eaafb(0x262),'token':_0x1568f2};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x5b7cbd){const _0x576a5b=_0x322528,_0xa71912=generateLoginToken(_0x5b7cbd);return{'allow':!![],'reason':_0x576a5b(0x262),'token':_0xa71912};}function _0x2d54(){const _0xf1f9c7=[':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','data','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stop','pidRefreshToken','loginRequired','Unauthorized\x20attempt\x20to\x20get\x20messages','lastmsgemitted','-performance.json','#RES#\x20if\x20running\x20locally\x0a','file','node','auto','temporary\x20access\x20not\x20allowed','blacklist','store-settings','bbPassword','whitelistEnabled','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','0.0.0','lowdb/adapters/FileSync','pidExpireLogin','metrics_','getStartingBalances','onepagemode','create','apiKey','File\x20uploaded','settings.','config_alerts','/on\x20-\x20start\x20bot(s)\x0a','getFullYear','Invalid\x20authentication\x20token\x20(2)','enable','/:bot/support','assign','env','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','logout','endsWith','args','jsonwebtoken','portfolio','forEach','telegramEnabled','storeConfiguration','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','filter','-----------------------------------------------------------------------------------','1064084npehWe','DEFLATE','getTime','inlineKeyboard','Setting\x20access:\x20','reinstall_yes','SIGINT','latestversion','pki','live','Enabled\x20Bot\x20','use','Token\x20blacklisted','headers','tkn','sendMetricsTelegram','bbvNew','api-eu.mixpanel.com','yargs/yargs','delete-bot','date-fns','hashSync','environment','remove','Notifications\x20enabled\x0a','sign','updatebotmanager','785136mPvkJa','update','error','2FA','toString','#RES#\x20','encryptedUuid','bbvReceive','bb-config.json','reset-history','build2','auth','yes','connection','timestamp','No\x20authentication\x20token','30\x20min','sort','restart','from','Unauthorized\x20attempt\x20to\x20add\x20bot','2FA\x20login\x20required','Allow\x20login\x20from\x20IP\x20address\x20','simple','_nsps','write','privateKey','secret','getPortfolio','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','static','compareSync','Markdown','name','track','publicKey','\x20|\x20user:\x20...','match','password','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Failed\x20to\x20download\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','login','Unauthorized\x20attempt\x20to\x20update\x20settings','Starting\x20Balance\x20Bot\x20update','Error:\x20Invalid\x20argument\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Backup\x20file\x20unzipped\x20and\x20stored',',\x20must\x20be\x20a\x204\x20digit\x20number','kill','1000','Logged\x20in\x20user\x20...','util','express','Notifications\x20enabled','add-bot','stopped','Unauthorized\x20attempt\x20to\x20get\x20events','Error\x20while\x20deleting\x20config\x20files:\x20','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','telegramIpApproval',')\x20|\x20Bot\x20','/download/:type','place-order','config/','Restoring\x20bot(s)\x20from\x20backup','orders','-config.json','unlinkSync','editMessageReplyMarkup','Login\x20accepted','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','telegram',':\x20Bot\x20Mgr\x20>\x20','callback','mixpanel','disconnect','toggle-bot-mode','event','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','login\x20token\x20valid','BCT','statSync','bots','login\x20required','5rDkxHr','\x1b[36m','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','push','Ok,\x20will\x20send\x20order\x20notifications\x20only','Orders','temporaryAccessAllowed','/upload-backup','token','config','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Yes','slice','decrypt','restore_no_','value','message','/help\x20-\x20show\x20available\x20commands\x0a','bot.js','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','exchange','Unauthorized\x20attempt\x20to\x20store\x20configuration','rmSync','getSeconds','chat','Unauthorized\x20attempt\x20to\x20log\x20out','format','Unauthorized\x20attempt\x20to\x20get\x20portfolio','includes','range','NTBA_FIX_319','new','3293010AzBHFJ','telegram2FaApproval','headless','Bot\x20Mgr\x20>\x20','sortBy','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','f2aRequired','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','\x20|\x20','telegraf','botname','command','cancel-loading','staging','bbUsername','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','zip/','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','confirm-message','Unauthorized\x20attempt\x20to\x20confirm\x20message','Unauthorized\x20attempt\x20to\x20download\x20','button','fork','***','mtime','writeFileSync','login\x20token\x20generated','reinstall_no','string','host','bb/','telegramEvents','keys','existsSync','argv','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x1b[34m','generateKeyPair','binary','\x20to\x20','exit','readFileSync','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','tempaccess_5_','Error\x20removing\x20old\x20backup\x20files:','find','Idling\x20(','getUTCHours','close','/:bot','.zip','handshake','child_process','Starting\x20(','45yzfdZg','bot-','names','privateKeyFromPem','Bot\x20','Restore\x20process\x20aborted','Invalid\x20IP\x20address','initclient','all','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','apiPassword','version','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','address\x20already\x20in\x20use','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Error\x20details:','backup-full.zip','ipv6','http','port','action','telegrammsg','timeshift','2FA\x20login\x20token\x20generated','HTML','toIPv4MappedAddress','::1','Telegram\x20error:','uuid-random','=>\x20Go\x20to\x20#CYA#http://','launch','restore-backup-file','clients','Unauthorized\x20login\x20attempt\x20(timeout)','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','internal','express-fileupload','Backup\x20file\x20uploaded','2FA\x20required','Restore\x20process\x20confirmed','userid','\x20only\x0a','*$1*','output-003.log','disabled','\x20|\x20client:\x20...','Starting\x20#RED#Balance\x20Bot\x20v','/:bot/configuration','/disable\x20-\x20disable\x20notifications\x0a','isDirectory','reason','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Logged\x20out\x20user\x20...','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','secure','Restarting\x20Bot\x20','restart_','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','ipc','enabled','search','replace','\x20>\x20','join','debug','on_','getMinutes','production','telegramChatId','SIGTERM','download','temporary\x20token\x20generated','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','15\x20min','No\x20bots\x20running\x20right\x20now','|@|','toggle','sha256','/:bot/coins','min','store','<b>Balance\x20Bot\x20Status:</b>\x0a','settings','max','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','show','started','logged\x20out','Notifications\x20types:\x20','padStart','randomFillSync','All\x20bots\x20running\x20right\x20now','verify','telegramToken','parse','toIPv4Address','temp/','alerts','socket','store-fiat','reply','portfolio_','isIPv4MappedAddress','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Disabled\x20Bot\x20','bot','(staging)','/output-000.log','inherit','temporary\x20access\x20timeout','get','IPv4','set','Session\x20expired\x20for\x20user\x20...','Notifications\x20disabled\x0a','version.json','whitelist','any','botmanager','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','backup-full@','727060zwJseW','Temporary\x20access\x20rejected','bb-settings.json','botID','clientip','deleteHistoryAlerts','code','privateKeyToPem','uuid','output-000.log','[ip-address]','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','remoteAddress','3282783QfRPaB','get-backup-files','server','add','running','/:bot/history','get-logs','CoinMarketCap\x20API\x20key\x20validated','allow','node-forge','axios','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','get-starting-balances','update-bot','family','User\x20has\x20been\x20validated','getDate','sendPortfolioTelegram','backup','warning','index.html','success','login2fa_','cancelLoading','hex','marketcapApi','username','off_','createServer','startsWith','login\x20not\x20required','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','apiSecret','alias','lastmsgtelegram','Alerts','$1_$2_$3','storeHeadless','status','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','number','constructor','Unauthorized\x20attempt\x20to\x20delete\x20alerts','address','184347avMupN','decode64','notification','hasOwnProperty','params','/update\x20-\x20update\x20Balance\x20Bot\x0a','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','manual','config_orders','mkdirSync','emit','Network\x20Interfaces:','apply','ipaddr.js','tempaccess_15_','Restore\x20backup\x20file\x20','\x20(2)','Invalid\x20username\x20or\x20IP\x20address','backupfile','logs/','split','Login\x20rejected','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','telegramUsername','stringify','temporary\x20access\x20rejected','\x20mode','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','<b>Telegram\x20Bot\x20Status:</b>\x0a','(((.+)+)+)+$','new-disabled','ETH','showConfig','10982081nhMToK','title','Unauthorized\x20attempt\x20to\x20delete\x20bot','2FA\x20login\x20rejected','type','Unauthorized\x20attempt\x20to\x20update\x20bot','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','kind','4aXFQwo','exec','************','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','disable','log','backup-full','messages','listen','uncaughtException','off','catch','copyFileSync','send','/:bot/portfolio','sendFile','output-002.log','versions','full','connected','once','Server','reinstall-bb','isValid','backup-files','You\x20can\x20use\x20the\x20following\x20commands:\x0a','lowdb','defaults','/:bot/performance','\x1b[0m','start','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','access','/enable\x20-\x20enable\x20notifications\x0a','build','output-001.log','length','accept','#RES#\x20if\x20running\x20on\x20server','reload','function','getMonth','reinstall','loadAsync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','toggleBotMode','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','mode','logs','resetpw_no','user','getHours','8DRJluw','-events.json','expiry','private','crypto','files','All\x20bots','reject','request','readdirSync'];_0x2d54=function(){return _0xf1f9c7;};return _0x2d54();}function validateAccess(_0x6d7c31,_0x4d0ce5,_0x16acae){const _0x27d6ca=_0x322528,_0x3aa737=_0x16acae?_0x16acae:devices[_0x4d0ce5]['ip'];let _0x28631f;const _0x2de77c=_0x228004=>{const _0x213e0c=_0x1d16;if(settings[_0x213e0c(0x189)]){if(settings[_0x213e0c(0x24e)]){if(telegram2FaApproved(_0x4d0ce5)){const _0x5b5f95=generateLoginToken(_0x4d0ce5);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x5b5f95};}else return{'allow':![],'reason':_0x213e0c(0x226),'token':null};}else return _0x28631f=validToken(_0x228004,_0x4d0ce5),_0x28631f['hasOwnProperty'](_0x213e0c(0x319))?{'allow':!![],'reason':_0x213e0c(0x222),'token':_0x228004}:{'allow':![],'reason':_0x213e0c(0x226),'token':null};}else return{'allow':!![],'reason':_0x213e0c(0x322),'token':null};};if(settings[_0x27d6ca(0x195)]){let _0x12c0b2=[...settings[_0x27d6ca(0x2f2)],_0x27d6ca(0x298),'::ffff:127.0.0.1','127.0.0.1'];if(_0x12c0b2[_0x27d6ca(0x243)](_0x3aa737))return _0x2de77c(_0x6d7c31);else{_0x28631f=validToken(_0x6d7c31,_0x4d0ce5);if(_0x28631f[_0x27d6ca(0x333)]('success'))return _0x2de77c(_0x6d7c31);else{if(telegramIpApproved(_0x4d0ce5)){const _0x1c119d=generateToken(_0x4d0ce5);return _0x28631f=_0x2de77c(_0x6d7c31),_0x28631f['allow']?{'allow':!![],'reason':_0x27d6ca(0x2c5),'token':_0x1c119d}:_0x28631f;}else return settings[_0x27d6ca(0x22d)]?{'allow':![],'reason':_0x27d6ca(0x2a4),'token':null}:{'allow':![],'reason':_0x27d6ca(0x191),'token':null};}}}else return _0x2de77c(_0x6d7c31);}function timelyDecrypt(_0x3461d8,_0x3f4436,_0x6e467b='@'){const _0x1e5ff5=_0x322528;if(_0x3461d8)try{const _0x5538d9=decryptRSA(secure[_0x1e5ff5(0x1ea)],_0x3461d8),_0xa4447a=_0x5538d9['split'](_0x6e467b)[0x0],_0x218fe0=_0x5538d9[_0x1e5ff5(0x130)](_0x6e467b)[0x1],_0x21a635=new Date()[_0x1e5ff5(0x1b7)]();if(_0x3f4436){if(_0x21a635-_0x218fe0<maxSecretAge*0x3e8)return _0xa4447a;else return![];}else return _0xa4447a;}catch(_0x496b0c){return![];}else return![];}const validToken=(_0x536760,_0x2a584b)=>{const _0x504f94=_0x322528,_0x301c1f=devices[_0x2a584b]['ip'];if(!_0x536760)return{'error':_0x504f94(0x1df)};for(let _0x3b3d43 of blacklist){if(_0x3b3d43['token']==_0x536760)return{'error':_0x504f94(0x1c1)};}let _0x583a3d;try{_0x583a3d=jwt[_0x504f94(0x2da)](_0x536760,secure['secret']+_0x2a584b);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x583a3d[_0x504f94(0x333)](_0x504f94(0x2fb))&&!_0x583a3d[_0x504f94(0x333)](_0x504f94(0x31e))||!_0x583a3d[_0x504f94(0x333)]('exp'))return{'error':_0x504f94(0x1a4)};if(!_0x583a3d[_0x504f94(0x333)](_0x504f94(0x31e))&&_0x583a3d[_0x504f94(0x333)](_0x504f94(0x2fb))){const {clientip:_0x39a7a7}=_0x583a3d;return _0x301c1f==_0x39a7a7?{'success':_0x504f94(0x313)}:{'error':_0x504f94(0x284)};}else{if(_0x583a3d[_0x504f94(0x333)](_0x504f94(0x31e))&&_0x583a3d[_0x504f94(0x333)]('clientip')){const {username:_0x9263e7,clientip:_0x376c7f}=_0x583a3d;return settings[_0x504f94(0x256)]==_0x9263e7&&_0x301c1f==_0x376c7f?{'success':_0x504f94(0x313)}:{'error':_0x504f94(0x341)};}}},generateLoginToken=_0xc5ca2f=>{const _0x1cae88=_0x322528;if(_0xc5ca2f){const _0x48ae68=devices[_0xc5ca2f]['ip'];return jwt[_0x1cae88(0x1ce)]({'username':settings[_0x1cae88(0x256)],'clientip':_0x48ae68},secure[_0x1cae88(0x1eb)]+_0xc5ca2f,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x5e6176=>{const _0x25240c=_0x322528;if(_0x5e6176){const _0x4be5db=devices[_0x5e6176]['ip'];return jwt[_0x25240c(0x1ce)]({'clientip':_0x4be5db},secure[_0x25240c(0x1eb)]+_0x5e6176,{'expiresIn':devices[_0x5e6176]['telegramIpApproval'][_0x25240c(0x17c)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x49be59=>{const _0x4f50dd=_0x322528;let _0x2d1ee1=![];return devices[_0x49be59][_0x4f50dd(0x20e)]&&devices[_0x49be59]['telegramIpApproval']['expiry']!=_0x4f50dd(0x181)&&(_0x2d1ee1=devices[_0x49be59]['telegramIpApproval']['clientip']==devices[_0x49be59]['ip']&&new Date()['getTime']()-devices[_0x49be59]['telegramIpApproval'][_0x4f50dd(0x1de)]<devices[_0x49be59]['telegramIpApproval'][_0x4f50dd(0x17c)]*0x3c*0x3e8),_0x2d1ee1;},telegram2FaApproved=_0x23c82e=>{const _0x98262a=_0x322528;let _0x45199e=![];return devices[_0x23c82e][_0x98262a(0x248)]&&devices[_0x23c82e][_0x98262a(0x248)]['expiry']!=_0x98262a(0x181)&&(_0x45199e=devices[_0x23c82e][_0x98262a(0x248)][_0x98262a(0x2fb)]==devices[_0x23c82e]['ip']&&new Date()['getTime']()-devices[_0x23c82e][_0x98262a(0x248)]['timestamp']<devices[_0x23c82e]['telegram2FaApproval'][_0x98262a(0x17c)]*0x3c*0x3e8),_0x45199e;},normalizeIP=_0x540b5b=>{const _0x44790d=_0x322528;let _0x47fc6c=null,_0xbe0715=null;if(ipaddr[_0x44790d(0x15d)](_0x540b5b)){const _0x319e49=ipaddr['parse'](_0x540b5b);_0x319e49[_0x44790d(0x144)]()===_0x44790d(0x28f)?(_0x319e49[_0x44790d(0x2e4)]()&&(_0x47fc6c=_0x319e49[_0x44790d(0x2dd)]()[_0x44790d(0x1d4)]()),_0xbe0715=_0x319e49['toString']()):(_0x47fc6c=_0x319e49[_0x44790d(0x1d4)](),_0xbe0715=_0x319e49[_0x44790d(0x297)]()['toString']());}return{'show':_0x47fc6c?_0x47fc6c:_0xbe0715,'store':_0xbe0715};};function formatDate(_0x450945){const _0xc64c13=_0x322528;return _0x450945[_0xc64c13(0x1a3)]()+'/'+(_0x450945[_0xc64c13(0x16f)]()+0x1)[_0xc64c13(0x1d4)]()['padStart'](0x2,'0')+'/'+_0x450945['getDate']()[_0xc64c13(0x1d4)]()[_0xc64c13(0x2d7)](0x2,'0')+'\x20'+_0x450945['getHours']()['toString']()[_0xc64c13(0x2d7)](0x2,'0')+':'+_0x450945[_0xc64c13(0x2c0)]()[_0xc64c13(0x1d4)]()['padStart'](0x2,'0')+':'+_0x450945[_0xc64c13(0x23e)]()['toString']()[_0xc64c13(0x2d7)](0x2,'0');}function sleep(_0x8faafd){return new Promise(_0xfbbbd8=>setTimeout(_0xfbbbd8,_0x8faafd));}