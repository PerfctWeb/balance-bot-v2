const _0x194689=_0xc8f0;(function(_0x1d0a1e,_0x3b2306){const _0x358e87=_0xc8f0,_0x22fc8c=_0x1d0a1e();while(!![]){try{const _0x2e2b74=parseInt(_0x358e87(0x176))/0x1*(parseInt(_0x358e87(0x108))/0x2)+-parseInt(_0x358e87(0x2ba))/0x3*(parseInt(_0x358e87(0x298))/0x4)+-parseInt(_0x358e87(0x121))/0x5*(-parseInt(_0x358e87(0x2a1))/0x6)+-parseInt(_0x358e87(0x2cc))/0x7+parseInt(_0x358e87(0x105))/0x8*(parseInt(_0x358e87(0x126))/0x9)+-parseInt(_0x358e87(0x1c8))/0xa*(-parseInt(_0x358e87(0x1be))/0xb)+parseInt(_0x358e87(0x1d9))/0xc*(-parseInt(_0x358e87(0x230))/0xd);if(_0x2e2b74===_0x3b2306)break;else _0x22fc8c['push'](_0x22fc8c['shift']());}catch(_0x2f1d82){_0x22fc8c['push'](_0x22fc8c['shift']());}}}(_0x1df2,0xbee24));const _0x430350=function(){let _0x17a3c5=!![];return function(_0x54b8bb,_0x56b0ac){const _0x27dfec=_0x17a3c5?function(){const _0x24a3b8=_0xc8f0;if(_0x56b0ac){const _0x494e6a=_0x56b0ac[_0x24a3b8(0x2a4)](_0x54b8bb,arguments);return _0x56b0ac=null,_0x494e6a;}}:function(){};return _0x17a3c5=![],_0x27dfec;};}(),_0x46d7a3=_0x430350(this,function(){const _0x1bc99f=_0xc8f0;return _0x46d7a3[_0x1bc99f(0x224)]()[_0x1bc99f(0x181)](_0x1bc99f(0x19d))[_0x1bc99f(0x224)]()[_0x1bc99f(0x15b)](_0x46d7a3)['search'](_0x1bc99f(0x19d));});_0x46d7a3();'use strict';process[_0x194689(0x290)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x194689(0xef)),fs=require('fs'),fns=require(_0x194689(0x203)),low=require('lowdb'),FileSync=require(_0x194689(0xdd)),path=require(_0x194689(0x129)),crypto=require(_0x194689(0x10e)),Crypt=require(_0x194689(0x2b3))['Crypt'],RSA=require(_0x194689(0x2b3))['RSA'],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require(_0x194689(0x219)),argv=require(_0x194689(0x1eb))(process['argv'][_0x194689(0x193)](0x2))[_0x194689(0xec)],uuidRandom=require(_0x194689(0xee)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x194689(0x162)),axios=require(_0x194689(0x2a2)),{GraphQLClient,gql}=require(_0x194689(0x2ae)),util=require(_0x194689(0x1fc)),fileUpload=require(_0x194689(0x231)),{networkInterfaces}=require('os'),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x194689(0x25d)](PORT)&&(console[_0x194689(0x271)](_0x194689(0x212)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv[_0x194689(0x150)]||null,userID=argv[_0x194689(0x20c)]||'',debugging=argv['d']||![],nodeversion=process[_0x194689(0x250)][_0x194689(0x20f)];let bbpath=_0x194689(0x23c),bbpath2='';const botfile=_0x194689(0x26a),configfile=_0x194689(0x2af),settingsfile=_0x194689(0x1f7),securefile='bb-secure.json',environment=require('./'+bbpath2+'version.json')[_0x194689(0x151)]||_0x194689(0x13f),maxBackups=0xa;let validInstallation=!![];!fs[_0x194689(0x27d)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x194689(0x116)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x194689(0x2c8),configbackuppath=configpath+_0x194689(0xf1),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x194689(0x1e0)+userID+'/':bbpath+_0x194689(0x1e0),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+'temp/';!fs[_0x194689(0x27d)](configpath)&&fs[_0x194689(0x227)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x194689(0x227)](configbackuppath);!fs[_0x194689(0x27d)](logspath)&&fs[_0x194689(0x227)](logspath);!fs['existsSync'](zippath)&&fs[_0x194689(0x227)](zippath);!fs[_0x194689(0x27d)](temppath)&&fs[_0x194689(0x227)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x194689(0x2a7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x194689(0x2a3)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x194689(0x2a7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x194689(0x2a7)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x194689(0x237)](_0x194689(0x1d1),{'host':_0x194689(0x137)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x194689(0x117)]&&(settings[_0x194689(0x117)]!=''&&settings[_0x194689(0x117)]!=_0x194689(0x21a))&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0xdb8ce9,_0x4bc84a)=>{const _0x7ade82=_0x194689,_0x2fda9a=/#[A-Z]{3}#/g;if(typeof _0xdb8ce9==_0x7ade82(0x283)){!_0x4bc84a?_0xdb8ce9=_0xdb8ce9[_0x7ade82(0x278)](_0x2fda9a,''):(_0xdb8ce9=_0xdb8ce9['replace'](/#BLU#/g,'\x1b[34m'),_0xdb8ce9=_0xdb8ce9['replace'](/#RED#/g,_0x7ade82(0x11f)),_0xdb8ce9=_0xdb8ce9[_0x7ade82(0x278)](/#YEL#/g,_0x7ade82(0x1a2)),_0xdb8ce9=_0xdb8ce9[_0x7ade82(0x278)](/#MAG#/g,_0x7ade82(0x1a1)),_0xdb8ce9=_0xdb8ce9[_0x7ade82(0x278)](/#CYA#/g,_0x7ade82(0x2cd)),_0xdb8ce9=_0xdb8ce9[_0x7ade82(0x278)](/#RES#/g,_0x7ade82(0x2c3)));;}return _0xdb8ce9;},logger={'screen':_0x5535f5=>{const _0xcc89a5=_0x194689;console[_0xcc89a5(0x271)](parseColor(_0x5535f5,!![]));},'simple':_0x3302d4=>{console['log'](parseColor(_0x3302d4,!![])),loggerfile['write'](util['format'](parseColor(_0x3302d4,![]))+'\x0a');},'full':async _0x52f99c=>{const _0x1954c3=_0x194689,_0x29fa5d=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x52f99c;console['log'](parseColor(_0x29fa5d,!![])),loggerfile[_0x1954c3(0x2a7)](util[_0x1954c3(0x1cf)](parseColor(_0x29fa5d,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x1954c3(0x22a)]!=_0x1954c3(0x1fe))await sendTelegram(settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+parseColor(_0x52f99c,![]));},'debug':async(_0x10e8a8,_0x211f51='')=>{const _0x577913=_0x194689,_0x47e9ec=getTimeStamp()+_0x577913(0x25c)+_0x10e8a8;if(debugging)console['log'](parseColor(_0x47e9ec,!![]));loggerfile['write'](util[_0x577913(0x1cf)](parseColor(_0x47e9ec,![]))+'\x0a');if(_0x211f51){if(debugging)console[_0x577913(0x271)](_0x211f51);loggerfile[_0x577913(0x2a7)](util[_0x577913(0x1cf)](_0x211f51)+'\x0a');}}};let terminating=![];process['on'](_0x194689(0x1b4),function(_0x42a668){const _0x2a3884=_0x194689;_0x42a668[_0x2a3884(0x224)]()[_0x2a3884(0x157)](_0x2a3884(0x184))?(logger['simple'](_0x2a3884(0x1f9)+_0x42a668[_0x2a3884(0x1ec)]+_0x2a3884(0x217)),process['send']({'terminate':!![]},_0x3fd60a=>{})):logger[_0x2a3884(0xf0)](_0x42a668);}),process['on'](_0x194689(0x146),()=>{const _0x32749d=_0x194689;stopAllBots(),process[_0x32749d(0x146)](0x0);}),process['on']('SIGTERM',()=>{const _0x35efc1=_0x194689;stopAllBots(),process[_0x35efc1(0x146)](0x0);}),process['on'](_0x194689(0x23d),()=>{const _0x3da0f7=_0x194689;stopAllBots(),process[_0x3da0f7(0x146)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x194689(0x242)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x194689(0x27f)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x194689(0x210)]('/download/:type',async(_0x3bd08d,_0x3011c0)=>{const _0x388c10=_0x194689,_0x28a6e7=_0x3bd08d[_0x388c10(0x2a9)][_0x388c10(0x2bc)],_0x34f003=getClientsWithBotID(_0x388c10(0x245)),_0x13dc90=_0x3bd08d[_0x388c10(0x1fb)][_0x388c10(0x179)],_0x48bbfa=timelyDecrypt(_0x13dc90,![]),_0x395b1b=_0x34f003[_0x388c10(0x1a6)](_0x4227d5=>_0x4227d5[_0x388c10(0x179)]==_0x48bbfa);if(_0x395b1b){const _0x3ac14b=normalizeIP(_0x3bd08d[_0x388c10(0x11a)][_0x388c10(0x135)])[_0x388c10(0x1d0)],_0x314a09=_0x3bd08d['headers']['tkn'];if(validateAccess(_0x314a09,_0x48bbfa,_0x3ac14b)[_0x388c10(0x1c0)])_0x28a6e7==_0x388c10(0x25f)&&await backupConfigFiles(),await zipFiles(_0x28a6e7),_0x3011c0['download'](zippath+(_0x28a6e7+_0x388c10(0x226)),_0x2c12fb=>{const _0x5e7e8a=_0x388c10;_0x2c12fb&&(logger[_0x5e7e8a(0x1c9)](_0x5e7e8a(0x27a)+_0x28a6e7),logger[_0x5e7e8a(0xf0)](_0x2c12fb));});else logger[_0x388c10(0x1c9)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x28a6e7+_0x388c10(0x1c7));}else logger['full'](_0x388c10(0x1b2)+_0x28a6e7+'\x20(2)');}),app[_0x194689(0x215)]('/upload-backup',async(_0x410381,_0x2cb9d6)=>{const _0x34a4ad=_0x194689,_0x4eb34d=getClientsWithBotID(_0x34a4ad(0x245)),_0x109030=_0x410381['headers'][_0x34a4ad(0x179)],_0x287131=timelyDecrypt(_0x109030,![]),_0x57be5b=_0x4eb34d[_0x34a4ad(0x1a6)](_0x50f011=>_0x50f011[_0x34a4ad(0x179)]==_0x287131);logger[_0x34a4ad(0x12b)](_0x34a4ad(0x1ea));if(_0x57be5b){const _0x342426=normalizeIP(_0x410381[_0x34a4ad(0x11a)]['remoteAddress'])[_0x34a4ad(0x1d0)],_0x4fc422=_0x410381[_0x34a4ad(0x1fb)]['tkn'];if(validateAccess(_0x4fc422,_0x287131,_0x342426)[_0x34a4ad(0x1c0)]){if(_0x410381[_0x34a4ad(0x16d)]){const _0x34005d=_0x410381['files'][_0x34a4ad(0x292)];await _0x34005d['mv'](temppath+_0x34005d['name']),_0x2cb9d6['send']({'status':!![],'message':'File\x20uploaded'});const _0x44e094=getBotsWithMode();_0x44e094[_0x34a4ad(0x244)]>0x0?confirmRestore(temppath,_0x34005d[_0x34a4ad(0x214)]):unzipFile(temppath,_0x34005d[_0x34a4ad(0x214)]);}}else logger[_0x34a4ad(0x1c9)](_0x34a4ad(0x293));}else logger[_0x34a4ad(0x1c9)](_0x34a4ad(0x187));}),app[_0x194689(0x186)](express[_0x194689(0x218)](path[_0x194689(0x21c)](__dirname,bbpath2,'build2'))),app[_0x194689(0x186)](express[_0x194689(0x218)](path[_0x194689(0x21c)](__dirname,bbpath2,_0x194689(0x2b8)))),app[_0x194689(0x210)]('/',function(_0x4cc7cf,_0x288d69){const _0x5ce1bc=_0x194689;_0x288d69[_0x5ce1bc(0x17e)](path['join'](__dirname,bbpath2,_0x5ce1bc(0x2c6),_0x5ce1bc(0x28e)));}),app[_0x194689(0x210)](_0x194689(0x13b),function(_0xab7bb3,_0x2c5cb9){const _0x489aad=_0x194689;_0x2c5cb9[_0x489aad(0x17e)](path[_0x489aad(0x21c)](__dirname,bbpath2,_0x489aad(0x2b8),_0x489aad(0x28e)));}),app['get']('/:bot/portfolio',(_0x2dbc0b,_0x5edc58)=>{const _0xedf70b=_0x194689;_0x5edc58[_0xedf70b(0x17e)](path[_0xedf70b(0x21c)](__dirname,bbpath2,_0xedf70b(0x2b8),_0xedf70b(0x28e)));}),app['get'](_0x194689(0x1ca),(_0x52ac6d,_0x35e114)=>{const _0x4f2a05=_0x194689;_0x35e114['sendFile'](path[_0x4f2a05(0x21c)](__dirname,bbpath2,'build',_0x4f2a05(0x28e)));}),app['get'](_0x194689(0x1f2),(_0xdd1647,_0x5d1319)=>{const _0x3df1a3=_0x194689;_0x5d1319[_0x3df1a3(0x17e)](path[_0x3df1a3(0x21c)](__dirname,bbpath2,_0x3df1a3(0x2b8),_0x3df1a3(0x28e)));}),app[_0x194689(0x210)](_0x194689(0x21f),(_0x3e33b0,_0x339f22)=>{const _0x9fe510=_0x194689;_0x339f22[_0x9fe510(0x17e)](path[_0x9fe510(0x21c)](__dirname,bbpath2,_0x9fe510(0x2b8),'index.html'));}),app[_0x194689(0x210)](_0x194689(0x28f),(_0x2312fb,_0x2b5a90)=>{const _0x2ec1e0=_0x194689;_0x2b5a90[_0x2ec1e0(0x17e)](path[_0x2ec1e0(0x21c)](__dirname,bbpath2,_0x2ec1e0(0x2b8),'index.html'));}),app[_0x194689(0x210)](_0x194689(0x1e6),(_0xe64e7e,_0x3a73c2)=>{const _0x39d0f4=_0x194689;_0x3a73c2[_0x39d0f4(0x17e)](path[_0x39d0f4(0x21c)](__dirname,bbpath2,_0x39d0f4(0x2b8),_0x39d0f4(0x28e)));});if(HOST)http[_0x194689(0x205)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xf4dc63=_0x194689;let _0x22aef5=_0xf4dc63(0x208);const _0x4d04fe=networkInterfaces(),_0x333c0a={};for(const _0x5ea2fd of Object[_0xf4dc63(0x183)](_0x4d04fe)){for(const _0x2f417f of _0x4d04fe[_0x5ea2fd]){if((_0x2f417f['family']==_0xf4dc63(0x192)||_0x2f417f[_0xf4dc63(0x266)]==0x4)&&!_0x2f417f[_0xf4dc63(0x12a)]){const _0x188845=ipaddr[_0xf4dc63(0x1ce)](_0x2f417f[_0xf4dc63(0x20d)])['range']();_0x188845!='private'&&(!_0x333c0a[_0x5ea2fd]&&(_0x333c0a[_0x5ea2fd]=[]),_0x333c0a[_0x5ea2fd][_0xf4dc63(0x1a8)](_0x2f417f[_0xf4dc63(0x20d)]),_0x22aef5=_0x2f417f[_0xf4dc63(0x20d)]);}}}return{'serverip':_0x22aef5,'netinterfaces':_0x333c0a};}async function startServer(){const _0x837606=_0x194689,{serverip:_0x2658b2,netinterfaces:_0xaee6ea}=getServerIP();logger[_0x837606(0xf0)](''),logger['simple'](_0x837606(0x2bd)),await logger[_0x837606(0x1c9)](_0x837606(0x115)+serverversion+'#RES#\x20'+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x837606(0x16e)+PORT+_0x837606(0x103))+(_0x837606(0x284)+_0x2658b2+':'+PORT+_0x837606(0x1e8))),logger[_0x837606(0xf0)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x44a3b9 of config){const _0x3f346a=_0x44a3b9['mode']==_0x837606(0x1ac)?'a':'m';if(_0x44a3b9['status']==_0x837606(0x200)||_0x44a3b9['status']==_0x837606(0x14c))await logger['full'](_0x837606(0x132)+_0x3f346a+')\x20|\x20Bot\x20'+_0x44a3b9[_0x837606(0x262)]+_0x837606(0x229)+_0x44a3b9[_0x837606(0x287)]),startBot([_0x44a3b9[_0x837606(0x262)],userID],{'cwd':bbpath},function(_0xa5bb99){const _0x1e0c5c=_0x837606;if(_0xa5bb99)logger[_0x1e0c5c(0x1c9)](_0xa5bb99);});else(_0x44a3b9[_0x837606(0x1e1)]==_0x837606(0x18b)||_0x44a3b9['status']==_0x837606(0x1cb))&&await logger[_0x837606(0x1c9)](_0x837606(0x141)+_0x3f346a+_0x837606(0x1e9)+_0x44a3b9['botID']+'\x20|\x20'+_0x44a3b9['botname']);}else!newBot&&logger['simple'](_0x837606(0x18f));if(newBot)addBot();logger[_0x837606(0xf0)]('-----------------------------------------------------------------------------------'),logger['simple'](''),await logger[_0x837606(0x12b)](_0x837606(0x177)+nodeversion),await logger[_0x837606(0x12b)](_0x837606(0x127),_0xaee6ea);}function startSocket(){io['on']('connection',_0x30d8c0=>{const _0x705503=_0xc8f0;let _0x53c2dc,_0x31b151,_0x154717,_0x46b1de,_0x461beb;const _0x719e7b=_0x30d8c0[_0x705503(0x2d3)][_0x705503(0x1fb)][_0x705503(0xe7)];_0x31b151=_0x719e7b['match'](/bot[0-9]{3}/);if(_0x31b151)_0x154717=_0x31b151[0x0][_0x705503(0x1d6)](/[0-9]{3}/);if(_0x154717)_0x53c2dc=_0x154717[0x0];else _0x53c2dc='botmanager';const _0x1482e5=_0x30d8c0[_0x705503(0x2d3)][_0x705503(0x2c2)][_0x705503(0x1b1)];if(!_0x1482e5)_0x30d8c0['emit'](_0x705503(0x1e1),{'publicKey':secure['publicKey']});else{_0x46b1de=timelyDecrypt(_0x1482e5,![]);if(!_0x46b1de)_0x30d8c0['emit'](_0x705503(0x1e1),{'publicKey':secure[_0x705503(0xf8)]});else{_0x461beb=normalizeIP(_0x30d8c0[_0x705503(0x2bb)]['remoteAddress'])['store'];if(!devices[_0x46b1de])devices[_0x46b1de]={'uuid':_0x46b1de,'access':{'token':null}};devices[_0x46b1de]['ip']=_0x461beb;const _0x73b15d=addClient(_0x30d8c0['id'],_0x46b1de,_0x53c2dc);setAccess(_0x73b15d),emitMessages(),_0x30d8c0['on'](_0x705503(0x167),_0x56ed35=>{const _0x5c6597=_0x705503,_0x52ec62=timelyDecrypt(_0x56ed35['password'],!![],_0x5c6597(0x1d5));if(_0x52ec62){_0x56ed35={'username':_0x56ed35[_0x5c6597(0x25e)],'password':_0x52ec62},devices[_0x46b1de][_0x5c6597(0x19a)]=validateCredentials(_0x56ed35,_0x46b1de);if(devices[_0x46b1de]['access'][_0x5c6597(0x1c0)]==![]&&devices[_0x46b1de][_0x5c6597(0x19a)][_0x5c6597(0x190)]==_0x5c6597(0xf9))_0x30d8c0[_0x5c6597(0x280)]('status',{'access':devices[_0x46b1de]['access']}),loginAccess2FA(_0x46b1de,_0x461beb);else{if(devices[_0x46b1de][_0x5c6597(0x19a)][_0x5c6597(0x1c0)]==![]&&devices[_0x46b1de][_0x5c6597(0x19a)][_0x5c6597(0x190)]==_0x5c6597(0x1e4))_0x30d8c0[_0x5c6597(0x280)]('status',{'access':devices[_0x46b1de]['access']});else devices[_0x46b1de]['access'][_0x5c6597(0x1c0)]&&devices[_0x46b1de][_0x5c6597(0x19a)][_0x5c6597(0x190)]==_0x5c6597(0x233)&&(getClientsWithUuid(_0x46b1de)[_0x5c6597(0x257)](_0x3424b3=>{setAccess(_0x3424b3);}),logger['debug']('Logged\x20in\x20user\x20...'+_0x46b1de['slice'](-0x8)),setTokenRefresh(_0x46b1de),setSessionTimeout(_0x5c6597(0x167),_0x46b1de));}}else logger[_0x5c6597(0x1c9)](_0x5c6597(0x1ee));}),_0x30d8c0['on'](_0x705503(0x2a6),()=>{resetPassword();}),_0x30d8c0['on']('disconnect',_0x409258=>{removeClient(_0x30d8c0['id']);}),_0x53c2dc==_0x705503(0x245)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x471c75){const _0x4815d3=_0x194689;if(_0x471c75!='botmanager'&&config[_0x4815d3(0xe1)]!=''){if(pid[_0x471c75])pid[_0x471c75][_0x4815d3(0xf2)]({'function':'initclient','args':null});}_0x471c75!=_0x4815d3(0x245)&&broadcastToBots(_0x4815d3(0xe5),JSON[_0x4815d3(0x1ed)](config));}function reloadBotManager(){const _0x1e4f57=_0x194689;getClientsWithBotID(_0x1e4f57(0x245))['forEach'](_0x59dd6b=>{const _0x2f6187=_0x1e4f57;getSocket(_0x59dd6b['id'])['emit']('status',{'access':{'allow':![],'reason':_0x2f6187(0x2b0),'token':null}});});}function getSocket(_0x116ac4){const _0x3b477e=_0x194689;return io[_0x3b477e(0x240)][_0x3b477e(0x240)]['get'](_0x116ac4);}function setAccess(_0x27944f){const _0xfdc7bf=_0x194689,_0x56b387=getSocket(_0x27944f['id']),_0x9053a5=_0x27944f[_0xfdc7bf(0x179)],_0x9acfb9=_0x27944f['bot'];devices[_0x9053a5][_0xfdc7bf(0x19a)]=validateAccess(devices[_0x9053a5]['access'][_0xfdc7bf(0x15d)],_0x9053a5),logger[_0xfdc7bf(0x12b)](_0xfdc7bf(0x221)+devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x190)]+_0xfdc7bf(0x1cc)+_0x27944f['id'][_0xfdc7bf(0x193)](-0x8)+'\x20|\x20user:\x20...'+_0x9053a5['slice'](-0x8)),_0x56b387[_0xfdc7bf(0x21c)](_0x9053a5);if(devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x1c0)]){_0x56b387[_0xfdc7bf(0x21c)](_0x9acfb9);if(_0x9acfb9=='botmanager')initializeSocketBotManager(_0x56b387);else initializeSocketBot(_0x56b387);initClient(_0x9acfb9);}devices[_0x9053a5][_0xfdc7bf(0x19a)]['token']&&devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x190)]==_0xfdc7bf(0x20b)&&setSessionTimeout(_0xfdc7bf(0x123),_0x9053a5),devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x15d)]&&devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x190)]==_0xfdc7bf(0xea)&&setSessionTimeout(_0xfdc7bf(0x167),_0x9053a5),_0x56b387[_0xfdc7bf(0x280)](_0xfdc7bf(0x1e1),{'status':_0x27944f['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x9053a5][_0xfdc7bf(0x19a)],'externalip':devices[_0x9053a5]['ip'],'publicKey':secure[_0xfdc7bf(0xf8)],'userid':settings[_0xfdc7bf(0x252)],'validInstallation':validInstallation}),devices[_0x9053a5][_0xfdc7bf(0x19a)][_0xfdc7bf(0x1c0)]==![]&&devices[_0x9053a5]['access'][_0xfdc7bf(0x190)]==_0xfdc7bf(0x180)&&temporaryAccess2FA(_0x9053a5,devices[_0x9053a5]['ip']);}function setSessionTimeout(_0x914d48,_0x2488c5){const _0x341371=_0x194689;let _0x3dee56;if(_0x914d48==_0x341371(0x167))_0x3dee56=loginExpiry*0x3c*0x3e8;else _0x3dee56=devices[_0x2488c5][_0x341371(0x1b7)][_0x341371(0x164)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x2488c5]['telegramIpApproval'][_0x341371(0x28b)]);if(devices[_0x2488c5][_0x341371(0x169)])clearTimeout(devices[_0x2488c5][_0x341371(0x169)]);devices[_0x2488c5]['pidExpireLogin']=setTimeout(()=>{const _0x1480cc=_0x341371;if(devices[_0x2488c5]['pidRefreshToken'])clearTimeout(devices[_0x2488c5]['pidRefreshToken']);removeSocketListeners(_0x2488c5),addBlacklist(_0x2488c5),devices[_0x2488c5]['telegramIpApproval']=null,devices[_0x2488c5]['telegram2FaApproval']=null,devices[_0x2488c5]['access'][_0x1480cc(0x15d)]=null,logger[_0x1480cc(0x12b)](_0x1480cc(0x264)+_0x2488c5[_0x1480cc(0x193)](-0x8)),devices[_0x2488c5][_0x1480cc(0x19a)]=validateAccess(devices[_0x2488c5][_0x1480cc(0x19a)][_0x1480cc(0x15d)],_0x2488c5),!(devices[_0x2488c5][_0x1480cc(0x19a)]['allow']&&devices[_0x2488c5][_0x1480cc(0x19a)]['reason']==_0x1480cc(0x14a))&&(_0x914d48==_0x1480cc(0x167)?io['to'](_0x2488c5)['emit']('status',{'access':{'allow':![],'reason':_0x1480cc(0x161),'token':null}}):io['to'](_0x2488c5)[_0x1480cc(0x280)]('status',{'access':{'allow':![],'reason':_0x1480cc(0x22c),'token':null}})),devices[_0x2488c5][_0x1480cc(0x19a)]['token']=null;},_0x3dee56);}function setTokenRefresh(_0x24f960){const _0x2773c0=_0x194689;if(devices[_0x24f960][_0x2773c0(0x1c1)])clearTimeout(devices[_0x24f960]['pidRefreshToken']);devices[_0x24f960][_0x2773c0(0x1c1)]=setTimeout(()=>{const _0x3a2de2=_0x2773c0;getClientsWithUuid(_0x24f960)['length']!=0x0?(devices[_0x24f960][_0x3a2de2(0x19a)]=refreshToken(_0x24f960),io['to'](_0x24f960)[_0x3a2de2(0x280)]('status',{'status':_0x3a2de2(0x17b),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x24f960][_0x3a2de2(0x19a)],'externalip':devices[_0x24f960]['ip'],'publicKey':secure[_0x3a2de2(0xf8)],'validInstallation':validInstallation}),setTokenRefresh(_0x24f960)):clearTimeout(devices[_0x24f960]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x223234){const _0x1f99b1=_0x194689,_0xa91a47=getClient(_0x223234['id'])['uuid'];_0x223234['emit']('bots',config),_0x223234[_0x1f99b1(0x280)](_0x1f99b1(0x12c),cleanSettings()),_0x223234['on'](_0x1f99b1(0x10b),_0x32808c=>{const _0x3480fe=_0x1f99b1;if(validateAccess(_0x32808c,_0xa91a47)[_0x3480fe(0x1c0)])addBot();else logger[_0x3480fe(0x1c9)](_0x3480fe(0x112));}),_0x223234['on'](_0x1f99b1(0x175),(_0x1c2727,_0x3720bf)=>{const _0x58027d=_0x1f99b1;if(validateAccess(_0x3720bf,_0xa91a47)[_0x58027d(0x1c0)])toggleBot(_0x1c2727[_0x58027d(0x262)],_0x1c2727[_0x58027d(0x1e1)],_0x1c2727[_0x58027d(0x29b)]);else logger[_0x58027d(0x1c9)](_0x58027d(0x2b5));}),_0x223234['on']('toggle-bot-mode',(_0x53ba73,_0x19cc61)=>{const _0x345da3=_0x1f99b1;if(validateAccess(_0x19cc61,_0xa91a47)[_0x345da3(0x1c0)])toggleBotMode(_0x53ba73);else logger[_0x345da3(0x1c9)](_0x345da3(0x2b5));}),_0x223234['on']('delete-bot',(_0x4ea050,_0x1a2504)=>{const _0x2a4504=_0x1f99b1;if(validateAccess(_0x1a2504,_0xa91a47)[_0x2a4504(0x1c0)])deleteBot(_0x4ea050);else logger[_0x2a4504(0x1c9)](_0x2a4504(0x2d2));}),_0x223234['on'](_0x1f99b1(0x299),(_0x192da3,_0xe0c4e9)=>{const _0x464ff8=_0x1f99b1;if(validateAccess(_0xe0c4e9,_0xa91a47)[_0x464ff8(0x1c0)])storeSettings(_0x192da3,!![]);else logger[_0x464ff8(0x1c9)](_0x464ff8(0x24d));}),_0x223234['on'](_0x1f99b1(0x20a),_0x17a2d3=>{const _0x4cb718=_0x1f99b1;if(validateAccess(_0x17a2d3,_0xa91a47)[_0x4cb718(0x1c0)])updateBB(_0x4cb718(0x194));else logger[_0x4cb718(0x1c9)](_0x4cb718(0x172));}),_0x223234['on'](_0x1f99b1(0x23f),_0x462f6d=>{const _0x1942cc=_0x1f99b1;if(validateAccess(_0x462f6d,_0xa91a47)[_0x1942cc(0x1c0)])updateBB(_0x1942cc(0x288));else logger['full'](_0x1942cc(0x26c));}),_0x223234['on'](_0x1f99b1(0x2c1),_0x463310=>{const _0x2e92ac=_0x1f99b1;if(validateAccess(_0x463310,_0xa91a47)[_0x2e92ac(0x1c0)]){const _0x544f2c=getClient(_0x223234['id']);if(_0x544f2c)getBackupFiles(_0x544f2c[_0x2e92ac(0x179)]);else logger['full'](_0x2e92ac(0x13a));}else logger[_0x2e92ac(0x1c9)](_0x2e92ac(0x20e));}),_0x223234['on']('restore-backup-file',(_0x5b59fb,_0x9779bf)=>{const _0x52a92a=_0x1f99b1;if(validateAccess(_0x9779bf,_0xa91a47)[_0x52a92a(0x1c0)])restoreBackupFile(_0x5b59fb);else logger['full'](_0x52a92a(0x1e3));}),_0x223234['on']('get-messages',_0x452674=>{const _0x3965f1=_0x1f99b1;if(validateAccess(_0x452674,_0xa91a47)['allow'])getMessages();else logger[_0x3965f1(0x1c9)](_0x3965f1(0xe9));}),_0x223234['on'](_0x1f99b1(0xeb),(_0x33b109,_0x36d37f)=>{const _0x2a0240=_0x1f99b1;if(validateAccess(_0x36d37f,_0xa91a47)[_0x2a0240(0x1c0)])confirmMessage(_0x33b109);else logger[_0x2a0240(0x1c9)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x223234['on'](_0x1f99b1(0x12f),_0x2d539e=>{const _0x112934=_0x1f99b1;if(validateAccess(_0x2d539e,_0xa91a47)[_0x112934(0x1c0)]){if(devices[_0xa91a47]['pidRefreshToken'])clearTimeout(devices[_0xa91a47][_0x112934(0x1c1)]);if(devices[_0xa91a47][_0x112934(0x169)])clearTimeout(devices[_0xa91a47][_0x112934(0x169)]);removeSocketListeners(getClient(_0x223234['id'])[_0x112934(0x179)]),addBlacklist(_0xa91a47),devices[_0xa91a47][_0x112934(0x1b7)]=null,devices[_0xa91a47][_0x112934(0x107)]=null,devices[_0xa91a47]['access']['token']=null,logger[_0x112934(0x12b)]('Logged\x20out\x20user\x20...'+_0xa91a47[_0x112934(0x193)](-0x8)),io['to'](getClient(_0x223234['id'])[_0x112934(0x179)])[_0x112934(0x280)](_0x112934(0x1e1),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x112934(0xf7));});}function initializeSocketBot(_0x583ca9){const _0x491ea5=_0x194689,_0xf08a16=getClient(_0x583ca9['id'])[_0x491ea5(0x273)],_0x408c6f=getClient(_0x583ca9['id'])[_0x491ea5(0x179)];_0x583ca9['on']('get-logs',(_0x3eea31,_0x5b888c)=>{const _0x1948d3=_0x491ea5;if(validateAccess(_0x5b888c,_0x408c6f)[_0x1948d3(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16]['send']({'function':_0x1948d3(0x131),'args':_0x3eea31});}else logger[_0x1948d3(0x1c9)](_0x1948d3(0x23a));}),_0x583ca9['on'](_0x491ea5(0x10d),(_0x2d556d,_0x37ab91)=>{const _0x362200=_0x491ea5;if(validateAccess(_0x37ab91,_0x408c6f)[_0x362200(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x362200(0xf2)]({'function':_0x362200(0x11e),'args':_0x2d556d});}else logger[_0x362200(0x1c9)](_0x362200(0x134));}),_0x583ca9['on']('get-portfolio',(_0x43dbbd,_0x473d66)=>{const _0x2b0465=_0x491ea5;if(validateAccess(_0x473d66,_0x408c6f)[_0x2b0465(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16]['send']({'function':'getPortfolio','args':_0x43dbbd});}else logger[_0x2b0465(0x1c9)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x583ca9['on'](_0x491ea5(0x260),(_0x51c87f,_0x42dc9c)=>{const _0x4bb0ae=_0x491ea5;if(validateAccess(_0x42dc9c,_0x408c6f)['allow']){if(pid[_0xf08a16])pid[_0xf08a16]['send']({'function':_0x4bb0ae(0x12d),'args':_0x51c87f});}else logger[_0x4bb0ae(0x1c9)](_0x4bb0ae(0x1b8));}),_0x583ca9['on'](_0x491ea5(0x2cb),(_0x3d9fe4,_0x5b8bfb)=>{const _0x2b3072=_0x491ea5;if(validateAccess(_0x5b8bfb,_0x408c6f)[_0x2b3072(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x2b3072(0xf2)]({'function':'storeHeadless','args':_0x3d9fe4});}else logger[_0x2b3072(0x1c9)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x583ca9['on'](_0x491ea5(0x16b),(_0x35e677,_0x52d254)=>{const _0x5d30dc=_0x491ea5;if(validateAccess(_0x52d254,_0x408c6f)[_0x5d30dc(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x5d30dc(0xf2)]({'function':'storeFiat','args':_0x35e677});}else logger[_0x5d30dc(0x1c9)](_0x5d30dc(0x1b9));}),_0x583ca9['on']('reset-history',_0x318cc3=>{const _0x405495=_0x491ea5;if(validateAccess(_0x318cc3,_0x408c6f)[_0x405495(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x405495(0xf2)]({'function':'resetHistory','args':null});}else logger[_0x405495(0x1c9)](_0x405495(0x113));}),_0x583ca9['on'](_0x491ea5(0x29f),_0x2b324d=>{const _0x46ef80=_0x491ea5;if(validateAccess(_0x2b324d,_0x408c6f)[_0x46ef80(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x46ef80(0xf2)]({'function':_0x46ef80(0x198),'args':null});}else logger['full'](_0x46ef80(0x25a));}),_0x583ca9['on']('place-order',(_0x37555e,_0x8f9d21)=>{const _0x1a0d05=_0x491ea5;if(validateAccess(_0x8f9d21,_0x408c6f)[_0x1a0d05(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x1a0d05(0xf2)]({'function':'placeOrder','args':_0x37555e});}else logger[_0x1a0d05(0x1c9)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x583ca9['on'](_0x491ea5(0x272),_0x50ae24=>{const _0x79ec62=_0x491ea5;if(validateAccess(_0x50ae24,_0x408c6f)[_0x79ec62(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x79ec62(0xf2)]({'function':_0x79ec62(0x261),'args':null});}else logger[_0x79ec62(0x1c9)](_0x79ec62(0x174));}),_0x583ca9['on'](_0x491ea5(0x1b6),_0xdb0bdf=>{const _0x20e0d3=_0x491ea5;if(validateAccess(_0xdb0bdf,_0x408c6f)[_0x20e0d3(0x1c0)]){if(pid[_0xf08a16])pid[_0xf08a16][_0x20e0d3(0xf2)]({'function':_0x20e0d3(0x24b),'args':null});}else logger[_0x20e0d3(0x1c9)](_0x20e0d3(0x1d3));}),_0x583ca9['on'](_0x491ea5(0x20a),_0x1c6eb0=>{const _0x4b372a=_0x491ea5;if(validateAccess(_0x1c6eb0,_0x408c6f)[_0x4b372a(0x1c0)])updateBB(_0x4b372a(0x194));else logger[_0x4b372a(0x1c9)](_0x4b372a(0x172));}),_0x583ca9['on']('get-messages',_0x9de3e2=>{const _0x50eef8=_0x491ea5;if(validateAccess(_0x9de3e2,_0x408c6f)['allow'])getMessages();else logger['full'](_0x50eef8(0xe9));}),_0x583ca9['on'](_0x491ea5(0xeb),(_0x3f10e9,_0x3e032f)=>{const _0x3083eb=_0x491ea5;if(validateAccess(_0x3e032f,_0x408c6f)[_0x3083eb(0x1c0)])confirmMessage(_0x3f10e9);else logger[_0x3083eb(0x1c9)](_0x3083eb(0x248));}),_0x583ca9['on'](_0x491ea5(0x12f),_0x3804f2=>{const _0x3fd812=_0x491ea5;if(validateAccess(_0x3804f2,_0x408c6f)[_0x3fd812(0x1c0)]){if(devices[_0x408c6f][_0x3fd812(0x1c1)])clearTimeout(devices[_0x408c6f][_0x3fd812(0x1c1)]);if(devices[_0x408c6f][_0x3fd812(0x169)])clearTimeout(devices[_0x408c6f][_0x3fd812(0x169)]);removeSocketListeners(getClient(_0x583ca9['id'])[_0x3fd812(0x179)]),addBlacklist(_0x408c6f),devices[_0x408c6f]['telegramIpApproval']=null,devices[_0x408c6f][_0x3fd812(0x107)]=null,devices[_0x408c6f][_0x3fd812(0x19a)][_0x3fd812(0x15d)]=null,logger[_0x3fd812(0x12b)](_0x3fd812(0x297)+_0x408c6f[_0x3fd812(0x193)](-0x8)),io['to'](getClient(_0x583ca9['id'])[_0x3fd812(0x179)])[_0x3fd812(0x280)](_0x3fd812(0x1e1),{'access':{'allow':![],'reason':_0x3fd812(0x1c3),'token':null}});}else logger[_0x3fd812(0x1c9)](_0x3fd812(0xf7));});}function removeSocketListeners(_0x318dea){getClientsWithUuid(_0x318dea)['forEach'](_0xff081e=>{const _0x5e985b=_0xc8f0;getSocket(_0xff081e['id'])[_0x5e985b(0x274)]();});}function cleanSettings(){const _0x1b074e=_0x194689;let _0x366aaa=settings;return settings[_0x1b074e(0x117)]&&settings[_0x1b074e(0x117)]!=''&&(_0x366aaa={..._0x366aaa,'telegramToken':_0x1b074e(0x1bf)}),settings['bbPassword']&&settings[_0x1b074e(0x26e)]!=''&&(_0x366aaa={..._0x366aaa,'bbPassword':_0x1b074e(0x1bf)}),settings[_0x1b074e(0x1a0)]&&settings[_0x1b074e(0x1a0)]!=''&&(_0x366aaa={..._0x366aaa,'marketcapApi':_0x1b074e(0x1bf)}),(settings[_0x1b074e(0x26e)]&&settings['bbPassword']==_0x1b074e(0x21a)||settings['telegramToken']&&settings[_0x1b074e(0x117)]==_0x1b074e(0x21a)||settings[_0x1b074e(0x1a0)]&&settings['marketcapApi']=='***')&&(_0x366aaa={..._0x366aaa,'restored':{'password':settings[_0x1b074e(0x26e)]=='***','telegram':settings[_0x1b074e(0x117)]==_0x1b074e(0x21a),'marketcap':settings[_0x1b074e(0x1a0)]==_0x1b074e(0x21a)}}),_0x366aaa;}async function updateBB(_0x674d42){const _0x118e2b=_0x194689;await backupConfigFiles(),installingUpdate=!![],config[_0x118e2b(0x257)](_0x26aa35=>{restartBot(_0x26aa35['botID']);});if(_0x674d42==_0x118e2b(0x194))process[_0x118e2b(0xf2)]({'update':!![],'environment':environment},_0x10c6c6=>{});else _0x674d42==_0x118e2b(0x288)&&process['send']({'reinstall':!![],'environment':environment},_0xb6d2bf=>{});}function startBot(_0x254552,_0x44b847,_0x55100c){const _0x419eff=_0x194689;if(debugging)_0x254552[_0x419eff(0x1a8)]('-d');let _0x120ed0=![];const _0x5cc328=_0x254552[0x0];_0x44b847={..._0x44b847,'stdio':[_0x419eff(0x27c),'inherit','inherit',_0x419eff(0x22b)]},pid[_0x5cc328]=childProcess[_0x419eff(0x202)](botfile,_0x254552,_0x44b847),pid[_0x5cc328]['on'](_0x419eff(0x1b0),_0x360783=>{const _0x3e039a=_0x419eff;switch(Object[_0x3e039a(0x183)](_0x360783)[0x0]){case _0x3e039a(0x287):updateBotName(_0x5cc328,_0x360783[_0x3e039a(0x287)]);break;case _0x3e039a(0x16f):updateBotManager();break;case _0x3e039a(0x1e1):updateStatus(_0x5cc328,_0x360783['status']);break;case _0x3e039a(0x29b):updateLive(_0x5cc328,_0x360783[_0x3e039a(0x29b)]);break;case _0x3e039a(0x196):updateLive(_0x5cc328,_0x360783[_0x3e039a(0x196)]),io['to'](_0x5cc328)[_0x3e039a(0x280)](_0x3e039a(0x1e1),{'access':{'allow':![],'reason':_0x3e039a(0x2b0),'token':null}});break;case _0x3e039a(0x1bb):_0x360783[_0x3e039a(0x1bb)]==_0x3e039a(0xf3)&&restartBot(_0x5cc328);_0x360783[_0x3e039a(0x1bb)]=='kill'&&toggleBot(_0x5cc328,'disabled','stopped');break;case _0x3e039a(0x29a):sendTelegramBot(_0x5cc328,_0x360783[_0x3e039a(0x29a)]);break;case _0x3e039a(0x1cd):sendTelegramMsg(_0x360783['telegrammsg']);break;case _0x3e039a(0x1ba):io['to'](_0x5cc328)[_0x3e039a(0x280)](_0x360783['function'],_0x360783[_0x3e039a(0x17a)]);break;}}),pid[_0x5cc328]['on']('error',function(_0x5d30d5){if(_0x120ed0)return;_0x120ed0=!![],_0x55100c(_0x5d30d5);}),pid[_0x5cc328]['on'](_0x419eff(0x146),async function(_0xf857b){const _0x3e87f6=_0x419eff;if(terminating)return;if(installingUpdate){logger[_0x3e87f6(0x12b)](_0x3e87f6(0x11b)),io[_0x3e87f6(0x120)]();return;}if(_0x120ed0)return;_0x120ed0=!![],_0x55100c(null);const _0x1e38b2=dbConfig[_0x3e87f6(0x210)]('bots')[_0x3e87f6(0x1a6)]({'botID':_0x5cc328})[_0x3e87f6(0x228)]();_0x1e38b2&&(_0x1e38b2[_0x3e87f6(0x1e1)]==_0x3e87f6(0x200)||_0x1e38b2[_0x3e87f6(0x1e1)]=='new')&&(await sleep(0x3e8),updateLive(_0x5cc328,_0x3e87f6(0x256)),logger['full'](_0x3e87f6(0x101)+_0x5cc328),startBot([_0x5cc328,userID],{'cwd':bbpath},function(_0x264b9b){const _0x4590f9=_0x3e87f6;if(_0x264b9b)logger[_0x4590f9(0x1c9)](_0x264b9b);}));});}function stopBot(_0x2302ba){const _0x58a8c2=_0x194689;getClientsWithBotID(_0x2302ba)[_0x58a8c2(0x257)](_0x4793e3=>{const _0x4bf5fd=_0x58a8c2;getSocket(_0x4793e3['id'])[_0x4bf5fd(0x213)](!![]),removeClient(_0x4793e3['id']);}),pid[_0x2302ba]&&(pid[_0x2302ba][_0x58a8c2(0x199)](),pid[_0x2302ba]=null);}function stopAllBots(){const _0x4c347a=_0x194689;terminating=!![];const _0x2278b6=getEnabledBots();_0x2278b6[_0x4c347a(0x257)](_0x3fb836=>{const _0x1390ee=_0x4c347a;stopBot(_0x3fb836[_0x1390ee(0x262)]);});}function restartBot(_0x31cdba){if(pid[_0x31cdba])pid[_0x31cdba]['kill']();}function addBot(){const _0x45b23f=_0x194689;let _0x3c4ffb;for(let _0x4ac190=0x1;_0x4ac190<0x3e9;_0x4ac190++){_0x3c4ffb=_0x4ac190[_0x45b23f(0x224)]()[_0x45b23f(0x158)](0x3,'0');let _0x7f34de=config[_0x45b23f(0x1a6)](_0x42a367=>_0x42a367['botID']==_0x3c4ffb);if(!_0x7f34de)break;}if(_0x3c4ffb==='1000'){logger[_0x45b23f(0x1c9)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x45b23f(0x1c9)](_0x45b23f(0xed)+_0x3c4ffb),dbConfig['get'](_0x45b23f(0xe5))[_0x45b23f(0x1a8)]({'botID':_0x3c4ffb,'botname':_0x45b23f(0x265)+_0x3c4ffb,'status':_0x45b23f(0x14c),'live':''})[_0x45b23f(0x2a7)](),startBot([_0x3c4ffb,userID],{'cwd':bbpath},function(_0x42e307){const _0x283418=_0x45b23f;if(_0x42e307)logger[_0x283418(0x1c9)](_0x42e307);}),config=getConfiguration(),io['to'](_0x45b23f(0x245))['emit'](_0x45b23f(0xe5),config),broadcastToBots('bots',JSON[_0x45b23f(0x1ed)](config));}function deleteBot(_0x53488b){const _0x5ab98b=_0x194689;getClientsWithBotID(_0x53488b)[_0x5ab98b(0x257)](_0x9f6d98=>{const _0xd85e61=_0x5ab98b;getSocket(_0x9f6d98['id'])[_0xd85e61(0x213)](!![]),removeClient(_0x9f6d98['id']);}),dbConfig[_0x5ab98b(0x210)](_0x5ab98b(0xe5))[_0x5ab98b(0x15f)]({'botID':_0x53488b})[_0x5ab98b(0x2a7)](),logger[_0x5ab98b(0x1c9)](_0x5ab98b(0x16c)+_0x53488b),stopBot(_0x53488b);try{if(fs[_0x5ab98b(0x27d)](path[_0x5ab98b(0x21c)](configpath,_0x5ab98b(0xf4)+_0x53488b+'-config.json')))fs['unlinkSync'](path[_0x5ab98b(0x21c)](configpath,'bot-'+_0x53488b+'-config.json'));if(fs[_0x5ab98b(0x27d)](path[_0x5ab98b(0x21c)](configpath,_0x5ab98b(0xf4)+_0x53488b+_0x5ab98b(0x24f))))fs[_0x5ab98b(0x1b5)](path['join'](configpath,'bot-'+_0x53488b+_0x5ab98b(0x24f)));if(fs[_0x5ab98b(0x27d)](path[_0x5ab98b(0x21c)](configpath,_0x5ab98b(0xf4)+_0x53488b+_0x5ab98b(0x148))))fs[_0x5ab98b(0x1b5)](path[_0x5ab98b(0x21c)](configpath,_0x5ab98b(0xf4)+_0x53488b+_0x5ab98b(0x148)));if(fs[_0x5ab98b(0x27d)](path['join'](configpath,_0x5ab98b(0xf4)+_0x53488b+_0x5ab98b(0x2ad))))fs[_0x5ab98b(0x1b5)](path[_0x5ab98b(0x21c)](configpath,_0x5ab98b(0xf4)+_0x53488b+_0x5ab98b(0x2ad)));}catch(_0x34379b){if(_0x34379b)logger[_0x5ab98b(0x1c9)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x34379b);}config=getConfiguration(),io['to'](_0x5ab98b(0x245))[_0x5ab98b(0x280)](_0x5ab98b(0xe5),config),broadcastToBots(_0x5ab98b(0xe5),JSON['stringify'](config));}function toggleBot(_0x320154,_0x2f46d3,_0x20aa42){const _0x56ecd6=_0x194689;dbConfig[_0x56ecd6(0x210)]('bots')[_0x56ecd6(0x1a6)]({'botID':_0x320154})[_0x56ecd6(0x138)]({'status':_0x2f46d3})[_0x56ecd6(0x138)]({'live':_0x20aa42})['write']();if(_0x2f46d3=='enabled'||_0x2f46d3==_0x56ecd6(0x14c))logger[_0x56ecd6(0x1c9)](_0x56ecd6(0x2c5)+_0x320154),startBot([_0x320154,userID],{'cwd':bbpath},function(_0x3270ce){const _0x3d4213=_0x56ecd6;if(_0x3270ce)logger[_0x3d4213(0x1c9)](_0x3270ce);});else(_0x2f46d3==_0x56ecd6(0x18b)||_0x2f46d3==_0x56ecd6(0x1cb))&&(logger[_0x56ecd6(0x1c9)]('Disabled\x20Bot\x20'+_0x320154),stopBot(_0x320154));config=getConfiguration(),io['to'](_0x56ecd6(0x245))[_0x56ecd6(0x280)](_0x56ecd6(0xe5),config),broadcastToBots('bots',JSON[_0x56ecd6(0x1ed)](config));}function toggleStatus(_0x104add){const _0x47bfdf=_0x194689;let _0x441ea7=dbConfig[_0x47bfdf(0x210)](_0x47bfdf(0xe5))['find']({'botID':_0x104add})[_0x47bfdf(0x228)](),_0x4223e1;if(_0x441ea7[_0x47bfdf(0x1e1)]==='enabled')_0x4223e1=_0x47bfdf(0x18b);else{if(_0x441ea7[_0x47bfdf(0x1e1)]===_0x47bfdf(0x14c))_0x4223e1=_0x47bfdf(0x1cb);else{if(_0x441ea7[_0x47bfdf(0x1e1)]===_0x47bfdf(0x1cb))_0x4223e1=_0x47bfdf(0x14c);else{if(_0x441ea7['status']===_0x47bfdf(0x18b))_0x4223e1=_0x47bfdf(0x200);}}}return _0x4223e1;}function updateStatus(_0x234781,_0x378ec3){const _0x36d88e=_0x194689;dbConfig[_0x36d88e(0x210)](_0x36d88e(0xe5))[_0x36d88e(0x1a6)]({'botID':_0x234781})[_0x36d88e(0x138)]({'status':_0x378ec3})[_0x36d88e(0x2a7)](),config=getConfiguration(),io['to'](_0x36d88e(0x245))[_0x36d88e(0x280)](_0x36d88e(0xe5),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x50a836,_0x24c4ef){const _0x5be5ae=_0x194689;dbConfig[_0x5be5ae(0x210)](_0x5be5ae(0xe5))['find']({'botID':_0x50a836})[_0x5be5ae(0x138)]({'live':_0x24c4ef})[_0x5be5ae(0x2a7)](),config=getConfiguration(),io['to'](_0x5be5ae(0x245))[_0x5be5ae(0x280)](_0x5be5ae(0xe5),config),broadcastToBots('bots',JSON[_0x5be5ae(0x1ed)](config));}function updateBotName(_0xc6de6f,_0x5e526e){const _0x4fecd7=_0x194689;dbConfig['get'](_0x4fecd7(0xe5))['find']({'botID':_0xc6de6f})['assign']({'botname':_0x5e526e})[_0x4fecd7(0x2a7)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4fecd7(0xe5),config),broadcastToBots(_0x4fecd7(0xe5),JSON[_0x4fecd7(0x1ed)](config));}function updateBotManager(){const _0x1c8d50=_0x194689;config=getConfiguration(),io['to'](_0x1c8d50(0x245))[_0x1c8d50(0x280)]('bots',config),broadcastToBots('bots',JSON[_0x1c8d50(0x1ed)](config));}function toggleBotMode(_0x75fb9f){const _0x2676cb=_0x194689;if(pid[_0x75fb9f])pid[_0x75fb9f]['send']({'function':'toggleBotMode','args':null});else{const _0xe7645c=configpath+_0x2676cb(0xf4)+_0x75fb9f+_0x2676cb(0x24c),_0x39f202=fs[_0x2676cb(0x1da)](_0xe7645c),_0x2e0fc7=JSON['parse'](_0x39f202),_0x2c936f=_0x2e0fc7[_0x2676cb(0x273)][0x0][_0x2676cb(0x10a)];_0x2e0fc7[_0x2676cb(0x273)][0x0][_0x2676cb(0x10a)]=!_0x2c936f;const _0x1250c4=JSON[_0x2676cb(0x1ed)](_0x2e0fc7,null,0x2);fs[_0x2676cb(0x19f)](_0xe7645c,_0x1250c4),config=getConfiguration(),io['to'](_0x2676cb(0x245))['emit'](_0x2676cb(0xe5),config),broadcastToBots(_0x2676cb(0xe5),JSON[_0x2676cb(0x1ed)](config));}}function validateTelegram(_0x313d44){const _0x259659=_0x194689;if(_0x313d44[_0x259659(0x1d2)]['username']!=settings[_0x259659(0x16a)]&&'@'+_0x313d44['from'][_0x259659(0x25e)]!=settings[_0x259659(0x16a)]||_0x313d44[_0x259659(0x17f)]['id']!=settings['telegramChatId'])return sendTelegram(_0x313d44['chat']['id'],_0x259659(0x10c),{'parse_mode':_0x259659(0x1bc)}),![];return!![];}async function initTelegram(){const _0x56ffbd=_0x194689;if(tgBot)tgBot[_0x56ffbd(0x1bb)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x56ffbd(0x117)]);let _0x45160e=_0x56ffbd(0x2ab);_0x45160e+='\x0a',_0x45160e+=_0x56ffbd(0x294),_0x45160e+='/disable\x20-\x20disable\x20notifications\x0a',_0x45160e+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x45160e+=_0x56ffbd(0x236),_0x45160e+=_0x56ffbd(0x136),_0x45160e+='/off\x20-\x20stop\x20bot(s)\x0a',_0x45160e+=_0x56ffbd(0x2d4),_0x45160e+=_0x56ffbd(0x251),_0x45160e+=_0x56ffbd(0x156),_0x45160e+=_0x56ffbd(0x1de),_0x45160e+=_0x56ffbd(0x2a0),_0x45160e+=_0x56ffbd(0x14d),_0x45160e+=_0x56ffbd(0x21d),_0x45160e+=_0x56ffbd(0x17d);let _0x1a6eda=_0x56ffbd(0x28c);_0x1a6eda+='\x0a',_0x1a6eda+=_0x45160e,tgBot[_0x56ffbd(0x2aa)]((_0x2068bf,_0x120128)=>{const _0x27a3fc=_0x56ffbd;logger[_0x27a3fc(0xf0)](getTimeStamp()+_0x27a3fc(0x211)),logger[_0x27a3fc(0x12b)](_0x27a3fc(0x104),_0x2068bf);}),tgBot[_0x56ffbd(0x186)](async(_0x5d99ac,_0x567e06)=>{const _0x199e82=_0x56ffbd;if(!(!settings[_0x199e82(0x267)]&&_0x5d99ac[_0x199e82(0x194)][_0x199e82(0x1b0)]['text']==_0x199e82(0x2a5))){if(!validateTelegram(_0x5d99ac))return;}_0x567e06();}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0x171),async _0x5c7418=>{const _0x220374=_0x56ffbd;if(!settings['telegramChatId'])updateSetting(_0x220374(0x267),_0x5c7418[_0x220374(0x17f)]['id']);updateSetting(_0x220374(0x22d),!![]);if(!validateTelegram(_0x5c7418))return;await sendTelegram(_0x5c7418[_0x220374(0x17f)]['id'],_0x1a6eda);}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0x2ce),async _0x4f5813=>{const _0x158512=_0x56ffbd;updateSetting(_0x158512(0x22d),!![]),await sendTelegram(_0x4f5813['chat']['id'],_0x158512(0x1db));}),tgBot['command'](_0x56ffbd(0x1c5),async _0xd80940=>{const _0x5b0206=_0x56ffbd;await sendTelegram(_0xd80940[_0x5b0206(0x17f)]['id'],_0x5b0206(0xde)),updateSetting('telegramEnabled',![]);}),tgBot[_0x56ffbd(0x145)]('config',async _0x5b4e4e=>{const _0x49ec1f=_0x56ffbd,_0xf62f8b=Markup[_0x49ec1f(0x246)]([Markup[_0x49ec1f(0x286)][_0x49ec1f(0x1a4)](_0x49ec1f(0x124),'config_orders'),Markup[_0x49ec1f(0x286)][_0x49ec1f(0x1a4)]('Alerts',_0x49ec1f(0x114)),Markup[_0x49ec1f(0x286)][_0x49ec1f(0x1a4)]('All',_0x49ec1f(0x239))]);_0x5b4e4e[_0x49ec1f(0x209)](_0x49ec1f(0x220),_0xf62f8b);}),tgBot['action'](_0x56ffbd(0x28d),async _0x165ca5=>{const _0x2ded94=_0x56ffbd;_0x165ca5[_0x2ded94(0x232)](),updateSetting(_0x2ded94(0x22a),_0x2ded94(0x1fe)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x165ca5[_0x2ded94(0x17f)]['id'],_0x2ded94(0x1f6));}),tgBot['action'](_0x56ffbd(0x114),async _0x32d36f=>{const _0x34943b=_0x56ffbd;_0x32d36f[_0x34943b(0x232)](),updateSetting('telegramEvents',_0x34943b(0x178)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x32d36f['chat']['id'],_0x34943b(0x1d4));}),tgBot[_0x56ffbd(0x182)](_0x56ffbd(0x239),async _0x5f6a08=>{const _0x4ba787=_0x56ffbd;_0x5f6a08[_0x4ba787(0x232)](),updateSetting('telegramEvents',_0x4ba787(0x18d)),updateSetting(_0x4ba787(0x22d),!![]),await sendTelegram(_0x5f6a08[_0x4ba787(0x17f)]['id'],_0x4ba787(0x201));}),tgBot[_0x56ffbd(0x145)]('status',async _0x25886e=>{const _0x46b3fa=_0x56ffbd,_0x245d90=getBotsWithMode();let _0x6176bc=_0x46b3fa(0x21b);config[_0x46b3fa(0x257)](_0x49e734=>{const _0x57ddbc=_0x46b3fa,_0x12f34c=_0x245d90[_0x57ddbc(0x1a6)](_0x544c75=>_0x544c75[_0x57ddbc(0x262)]==_0x49e734[_0x57ddbc(0x262)])[_0x57ddbc(0x207)];_0x6176bc+='Bot\x20'+_0x49e734[_0x57ddbc(0x262)]+':\x20'+_0x49e734[_0x57ddbc(0x1e1)]+_0x57ddbc(0x229)+_0x12f34c+_0x57ddbc(0x229)+_0x49e734['live']+'\x0a';}),_0x6176bc+='\x0a',_0x6176bc+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x6176bc+=!settings[_0x46b3fa(0x22d)]?_0x46b3fa(0x24a):_0x46b3fa(0x1f3),_0x6176bc+=settings[_0x46b3fa(0x22d)]?settings[_0x46b3fa(0x22a)]==_0x46b3fa(0x18d)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x46b3fa(0x168)+settings['telegramEvents']+_0x46b3fa(0x277):'',await sendTelegram(_0x25886e[_0x46b3fa(0x17f)]['id'],_0x6176bc,{'parse_mode':_0x46b3fa(0x1bc)});}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0xf3),async _0x570c71=>{const _0x390c54=_0x56ffbd,_0x154011=getEnabledBots();if(_0x154011[_0x390c54(0x244)]==0x0)await sendTelegram(_0x570c71[_0x390c54(0x17f)]['id'],_0x390c54(0x19e));else{if(_0x154011['length']>0x1)_0x154011[_0x390c54(0x1a8)]({'botID':_0x390c54(0x18d)});let _0x39395b=[],_0x3e1977=[];const _0x26c241=_0x154011[_0x390c54(0x244)]%0x4==0x0||_0x154011['length']%0x4==0x3||_0x154011[_0x390c54(0x244)]%0x3==0x1?0x4:0x3;let _0x3dee1b=0x0;_0x154011[_0x390c54(0x257)]((_0x30c931,_0x4f74b1)=>{const _0x4c15a9=_0x390c54;if(_0x4f74b1%_0x26c241==0x0)_0x3e1977=[];_0x3e1977[_0x4c15a9(0x1a8)](Markup[_0x4c15a9(0x286)][_0x4c15a9(0x1a4)](_0x30c931['botID']=='all'?'All\x20bots':_0x4c15a9(0x265)+_0x30c931['botID'],_0x4c15a9(0x281)+_0x30c931[_0x4c15a9(0x262)])),_0x4f74b1%_0x26c241==0x0&&(_0x39395b[_0x3dee1b]=_0x3e1977,_0x3dee1b++);});const _0x421bff=Markup[_0x390c54(0x246)](_0x39395b);_0x570c71[_0x390c54(0x209)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x421bff);}}),tgBot[_0x56ffbd(0x182)](/restart_(.+)/,async _0x45ae2b=>{const _0x32a4b0=_0x56ffbd,_0x29f619=_0x45ae2b[_0x32a4b0(0x1d6)][0x1];_0x45ae2b[_0x32a4b0(0x232)](),_0x29f619=='all'?config[_0x32a4b0(0x257)](_0x46302a=>{const _0x20385c=_0x32a4b0;restartBot(_0x46302a[_0x20385c(0x262)]);}):restartBot(_0x29f619);}),tgBot[_0x56ffbd(0x145)]('on',async _0x344eff=>{const _0x417f17=_0x56ffbd,_0x3e6964=getDisabledBots();if(_0x3e6964[_0x417f17(0x244)]==0x0)await sendTelegram(_0x344eff[_0x417f17(0x17f)]['id'],_0x417f17(0x1df));else{if(_0x3e6964[_0x417f17(0x244)]>0x1)_0x3e6964[_0x417f17(0x1a8)]({'botID':'all'});let _0x1d3594=[],_0x108087=[];const _0x3b18d6=_0x3e6964['length']%0x4==0x0||_0x3e6964[_0x417f17(0x244)]%0x4==0x3||_0x3e6964[_0x417f17(0x244)]%0x3==0x1?0x4:0x3;let _0x12d698=0x0;_0x3e6964[_0x417f17(0x257)]((_0x47344e,_0x6c2e74)=>{const _0x144ee1=_0x417f17;if(_0x6c2e74%_0x3b18d6==0x0)_0x108087=[];_0x108087[_0x144ee1(0x1a8)](Markup['button']['callback'](_0x47344e['botID']==_0x144ee1(0x18d)?_0x144ee1(0xfb):'Bot\x20'+_0x47344e[_0x144ee1(0x262)],_0x144ee1(0xff)+_0x47344e[_0x144ee1(0x262)])),_0x6c2e74%_0x3b18d6==0x0&&(_0x1d3594[_0x12d698]=_0x108087,_0x12d698++);});const _0x2ccb01=Markup['inlineKeyboard'](_0x1d3594);_0x344eff['reply'](_0x417f17(0x149),_0x2ccb01);}}),tgBot[_0x56ffbd(0x182)](/on_(.+)/,async _0x5adb98=>{const _0x48a949=_0x56ffbd,_0x3b0190=_0x5adb98[_0x48a949(0x1d6)][0x1];_0x5adb98[_0x48a949(0x232)]();if(_0x3b0190==_0x48a949(0x18d)){const _0x45ee3b=getDisabledBots();await sendTelegram(_0x5adb98['chat']['id'],_0x48a949(0x163)),_0x45ee3b[_0x48a949(0x257)](_0x39de86=>{const _0x14f03e=_0x48a949;if(_0x39de86[_0x14f03e(0x262)]!=_0x14f03e(0x18d))toggleBot(_0x39de86[_0x14f03e(0x262)],toggleStatus(_0x39de86[_0x14f03e(0x262)]),'stopped');});}else await sendTelegram(_0x5adb98[_0x48a949(0x17f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x3b0190),toggleBot(_0x3b0190,toggleStatus(_0x3b0190),'stopped');}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0x1ab),async _0xda80b6=>{const _0x1df8d3=_0x56ffbd,_0x5b2abd=getEnabledBots();if(_0x5b2abd[_0x1df8d3(0x244)]==0x0)await sendTelegram(_0xda80b6[_0x1df8d3(0x17f)]['id'],_0x1df8d3(0x19e));else{if(_0x5b2abd[_0x1df8d3(0x244)]>0x1)_0x5b2abd[_0x1df8d3(0x1a8)]({'botID':'all'});let _0x55b839=[],_0x3c9c77=[];const _0x3fc8f7=_0x5b2abd[_0x1df8d3(0x244)]%0x4==0x0||_0x5b2abd[_0x1df8d3(0x244)]%0x4==0x3||_0x5b2abd[_0x1df8d3(0x244)]%0x3==0x1?0x4:0x3;let _0x4f165a=0x0;_0x5b2abd['forEach']((_0x3ce997,_0x4b7062)=>{const _0x2f08dc=_0x1df8d3;if(_0x4b7062%_0x3fc8f7==0x0)_0x3c9c77=[];_0x3c9c77['push'](Markup['button']['callback'](_0x3ce997[_0x2f08dc(0x262)]==_0x2f08dc(0x18d)?_0x2f08dc(0xfb):_0x2f08dc(0x265)+_0x3ce997[_0x2f08dc(0x262)],_0x2f08dc(0x11c)+_0x3ce997['botID'])),_0x4b7062%_0x3fc8f7==0x0&&(_0x55b839[_0x4f165a]=_0x3c9c77,_0x4f165a++);});const _0x345c26=Markup[_0x1df8d3(0x246)](_0x55b839);_0xda80b6[_0x1df8d3(0x209)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x345c26);}}),tgBot[_0x56ffbd(0x182)](/off_(.+)/,async _0x1d479b=>{const _0x12a8e5=_0x56ffbd,_0x24fd7d=_0x1d479b[_0x12a8e5(0x1d6)][0x1];_0x1d479b['editMessageReplyMarkup']();if(_0x24fd7d==_0x12a8e5(0x18d)){const _0x93f38e=getEnabledBots();await sendTelegram(_0x1d479b[_0x12a8e5(0x17f)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x93f38e['forEach'](_0x320bef=>{const _0x229cbe=_0x12a8e5;if(_0x320bef[_0x229cbe(0x262)]!='all')toggleBot(_0x320bef[_0x229cbe(0x262)],toggleStatus(_0x320bef['botID']),_0x229cbe(0x256));});}else await sendTelegram(_0x1d479b[_0x12a8e5(0x17f)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x24fd7d),toggleBot(_0x24fd7d,toggleStatus(_0x24fd7d),_0x12a8e5(0x256));}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0x26b),async _0x260853=>{const _0x5c1a52=_0x56ffbd,_0x2f16a7=getEnabledBots();if(_0x2f16a7[_0x5c1a52(0x244)]==0x0)await sendTelegram(_0x260853[_0x5c1a52(0x17f)]['id'],_0x5c1a52(0x19e));else{if(_0x2f16a7[_0x5c1a52(0x244)]>0x1){let _0xa6ced=[],_0x1c122c=[];const _0x247cb1=_0x2f16a7['length']%0x4==0x0||_0x2f16a7['length']%0x4==0x3||_0x2f16a7[_0x5c1a52(0x244)]%0x3==0x1?0x4:0x3;let _0x42d721=0x0;_0x2f16a7[_0x5c1a52(0x257)]((_0x19e2c6,_0x205a38)=>{const _0xce910=_0x5c1a52;if(_0x205a38%_0x247cb1==0x0)_0x1c122c=[];_0x1c122c[_0xce910(0x1a8)](Markup[_0xce910(0x286)][_0xce910(0x1a4)](_0xce910(0x265)+_0x19e2c6[_0xce910(0x262)],_0xce910(0x18a)+_0x19e2c6[_0xce910(0x262)])),_0x205a38%_0x247cb1==0x0&&(_0xa6ced[_0x42d721]=_0x1c122c,_0x42d721++);});const _0x10dee6=Markup[_0x5c1a52(0x246)](_0xa6ced);_0x260853['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x10dee6);}else{const _0x5ebc63=_0x2f16a7[0x0]['botID'];if(pid[_0x5ebc63])pid[_0x5ebc63][_0x5c1a52(0xf2)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x56ffbd(0x182)](/metrics_(.+)/,async _0x2b56e3=>{const _0x2f9c3b=_0x56ffbd,_0x21824c=_0x2b56e3[_0x2f9c3b(0x1d6)][0x1];_0x2b56e3[_0x2f9c3b(0x232)]();if(pid[_0x21824c])pid[_0x21824c][_0x2f9c3b(0xf2)]({'function':_0x2f9c3b(0x29e),'args':null});}),tgBot[_0x56ffbd(0x145)]('portfolio',async _0x166e9d=>{const _0x36660e=_0x56ffbd,_0x3952c1=getEnabledBots();if(_0x3952c1['length']==0x0)await sendTelegram(_0x166e9d[_0x36660e(0x17f)]['id'],_0x36660e(0x19e));else{if(_0x3952c1[_0x36660e(0x244)]>0x1){let _0x25597f=[],_0x18d605=[];const _0x161384=_0x3952c1[_0x36660e(0x244)]%0x4==0x0||_0x3952c1[_0x36660e(0x244)]%0x4==0x3||_0x3952c1['length']%0x3==0x1?0x4:0x3;let _0x5be53c=0x0;_0x3952c1[_0x36660e(0x257)]((_0x4a9c61,_0x39899f)=>{const _0x13bfbe=_0x36660e;if(_0x39899f%_0x161384==0x0)_0x18d605=[];_0x18d605['push'](Markup[_0x13bfbe(0x286)]['callback']('Bot\x20'+_0x4a9c61[_0x13bfbe(0x262)],_0x13bfbe(0x206)+_0x4a9c61['botID'])),_0x39899f%_0x161384==0x0&&(_0x25597f[_0x5be53c]=_0x18d605,_0x5be53c++);});const _0x3b1452=Markup['inlineKeyboard'](_0x25597f);_0x166e9d[_0x36660e(0x209)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x3b1452);}else{const _0xb44246=_0x3952c1[0x0][_0x36660e(0x262)];if(pid[_0xb44246])pid[_0xb44246]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x519a1c=>{const _0x4ee76a=_0x56ffbd,_0x50e10c=_0x519a1c['match'][0x1];_0x519a1c[_0x4ee76a(0x232)]();if(pid[_0x50e10c])pid[_0x50e10c][_0x4ee76a(0xf2)]({'function':_0x4ee76a(0xe8),'args':null});}),tgBot['command'](_0x56ffbd(0x194),async _0x379410=>{const _0x147eef=_0x56ffbd;await getMessages();if(!updateAvailable)await sendTelegram(_0x379410['chat']['id'],_0x147eef(0x1f5));else{if(!validInstallation)await sendTelegram(_0x379410[_0x147eef(0x17f)]['id'],_0x147eef(0x1f4));else{const _0x1dea24=Markup['inlineKeyboard']([Markup[_0x147eef(0x286)][_0x147eef(0x1a4)]('Yes','update_yes'),Markup[_0x147eef(0x286)][_0x147eef(0x1a4)]('No',_0x147eef(0x2b7))]);_0x379410['reply'](_0x147eef(0x18c),_0x1dea24);}}}),tgBot[_0x56ffbd(0x182)](/update_(.+)/,async _0x359c26=>{const _0x3cd07b=_0x56ffbd,_0x326c52=_0x359c26['match'][0x1];_0x359c26['editMessageReplyMarkup'](),_0x326c52=='yes'&&(await sendTelegram(_0x359c26[_0x3cd07b(0x17f)]['id'],_0x3cd07b(0x1a5)),updateBB('update')),_0x326c52=='no'&&await sendTelegram(_0x359c26['chat']['id'],_0x3cd07b(0x222));}),tgBot['command'](_0x56ffbd(0x288),async _0x4dd8bf=>{const _0x13ca68=_0x56ffbd;if(!validInstallation)await sendTelegram(_0x4dd8bf[_0x13ca68(0x17f)]['id'],_0x13ca68(0x247));else{const _0x1c5e2c=Markup['inlineKeyboard']([Markup[_0x13ca68(0x286)][_0x13ca68(0x1a4)](_0x13ca68(0xfa),_0x13ca68(0x29c)),Markup[_0x13ca68(0x286)]['callback']('No',_0x13ca68(0x2cf))]);_0x4dd8bf['reply'](_0x13ca68(0x1bd),_0x1c5e2c);}}),tgBot['action'](/reinstall_(.+)/,async _0x27afb9=>{const _0xeac0cb=_0x56ffbd,_0xf8d908=_0x27afb9[_0xeac0cb(0x1d6)][0x1];_0x27afb9[_0xeac0cb(0x232)](),_0xf8d908=='yes'&&(await sendTelegram(_0x27afb9[_0xeac0cb(0x17f)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0xeac0cb(0x288))),_0xf8d908=='no'&&await sendTelegram(_0x27afb9[_0xeac0cb(0x17f)]['id'],_0xeac0cb(0x2d1));}),tgBot[_0x56ffbd(0x145)](_0x56ffbd(0x1a3),async _0xbfad6f=>{const _0x12083b=_0x56ffbd,_0x31230c=getBotsWithMode();if(_0x31230c['length']==0x0)await sendTelegram(_0xbfad6f['chat']['id'],_0x12083b(0x19e));else{let _0x31e183=[],_0x2210ca=[];const _0x2221e2=0x2;let _0x5298be=0x0;_0x31230c[_0x12083b(0x257)]((_0x211dfa,_0xa4589d)=>{const _0x5d783a=_0x12083b;if(_0xa4589d%_0x2221e2==0x0)_0x2210ca=[];_0x2210ca[_0x5d783a(0x1a8)](Markup[_0x5d783a(0x286)][_0x5d783a(0x1a4)]('Bot\x20'+_0x211dfa[_0x5d783a(0x262)]+'\x20('+_0x211dfa[_0x5d783a(0x207)]+')','toggle_'+_0x211dfa[_0x5d783a(0x262)])),_0xa4589d%_0x2221e2==0x0&&(_0x31e183[_0x5298be]=_0x2210ca,_0x5298be++);});const _0x41da56=Markup[_0x12083b(0x246)](_0x31e183);_0xbfad6f[_0x12083b(0x209)](_0x12083b(0xfd),_0x41da56);}}),tgBot['action'](/toggle_(.+)/,async _0x105411=>{const _0x133ddd=_0x56ffbd,_0x1946c6=_0x105411[_0x133ddd(0x1d6)][0x1];_0x105411[_0x133ddd(0x232)]();const _0x20fc7e=getBotsWithMode(),_0x1854e0=_0x20fc7e[_0x133ddd(0x1a6)](_0x388191=>_0x388191[_0x133ddd(0x262)]==_0x1946c6),_0x286be3=_0x1854e0['mode']==_0x133ddd(0x1ac)?_0x133ddd(0x14f):_0x133ddd(0x1ac);await sendTelegram(_0x105411[_0x133ddd(0x17f)]['id'],_0x133ddd(0x279)+_0x1946c6+_0x133ddd(0x258)+_0x286be3+'\x20mode'),toggleBotMode(_0x1946c6);}),tgBot[_0x56ffbd(0x145)]('names',async _0x57ca93=>{const _0x5ce9f3=_0x56ffbd;let _0x2001e0='';config[_0x5ce9f3(0x257)](_0x26ba38=>{const _0x5aca57=_0x5ce9f3;_0x2001e0+=_0x5aca57(0x265)+_0x26ba38[_0x5aca57(0x262)]+':\x20'+_0x26ba38[_0x5aca57(0x287)]+'\x0a';}),await sendTelegram(_0x57ca93[_0x5ce9f3(0x17f)]['id'],_0x2001e0,{'parse_mode':_0x5ce9f3(0x1bc)});}),tgBot[_0x56ffbd(0x145)]('help',async _0x568a33=>{await sendTelegram(_0x568a33['chat']['id'],_0x45160e);}),process['once'](_0x56ffbd(0x23d),()=>tgBot['stop']('SIGINT')),process[_0x56ffbd(0x142)]('SIGTERM',()=>tgBot['stop']('SIGTERM')),tgBot['launch']();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x58eb1d,_0x55cbe6,_0x4502e3){const _0x2c66d7=_0x194689;_0x4502e3={..._0x4502e3,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x2c66d7(0x291)](_0x58eb1d,_0x55cbe6,_0x4502e3);}catch(_0x1a6f86){console['log']('Telegram\x20error:',_0x1a6f86);}}async function sendTelegramBot(_0x17f30f,_0x49ec12){const _0x3a833e=_0x194689;if(settings[_0x3a833e(0x22d)]){if(settings[_0x3a833e(0x22a)]=='all'||(_0x49ec12[_0x3a833e(0x2bc)]==_0x3a833e(0x119)||_0x49ec12[_0x3a833e(0x2bc)]==_0x3a833e(0x189)||_0x49ec12[_0x3a833e(0x2bc)]==_0x3a833e(0x24e))&&settings[_0x3a833e(0x22a)]==_0x3a833e(0x178)||_0x49ec12[_0x3a833e(0x2bc)]=='order'&&settings[_0x3a833e(0x22a)]==_0x3a833e(0x1fe)){if(tgBot&&settings['telegramChatId']){if(_0x49ec12['showname'])await sendTelegram(settings['telegramChatId'],_0x49ec12[_0x3a833e(0x287)]+_0x3a833e(0x1af)+_0x49ec12[_0x3a833e(0x1c4)]);else await sendTelegram(settings[_0x3a833e(0x267)],_0x3a833e(0x265)+_0x17f30f+_0x3a833e(0x1af)+_0x49ec12[_0x3a833e(0x1c4)]);}}}}async function sendTelegramMsg(_0x1184b3,_0x221e89=_0x194689(0x1bc)){const _0x1b5adc=_0x194689;return settings[_0x1b5adc(0x22d)]&&tgBot&&settings[_0x1b5adc(0x267)]?(await sendTelegram(settings[_0x1b5adc(0x267)],_0x1184b3,{'parse_mode':_0x221e89}),!![]):![];}function getDeviceWithIp(_0x4fb2f9){return devices['find'](_0x4a65a1=>_0x4a65a1['ip']===_0x4fb2f9);}async function temporaryAccess2FA(_0xcaf7c3,_0x4637a5){const _0x4437d2=_0x194689;let _0x280ddc=new Date(),_0xfbacba=![];if(lastIpApproval){if(_0x280ddc-lastIpApproval<0x1388)_0xfbacba=!![];}lastIpApproval=new Date();if(_0xfbacba)return;if(tgBot&&settings[_0x4437d2(0x267)]){const _0x3a2e37=uuidRandom();tmpStorage[_0x3a2e37]={'uuid':_0xcaf7c3,'externalip':_0x4637a5};const _0x31f66c=Markup[_0x4437d2(0x246)]([Markup[_0x4437d2(0x286)][_0x4437d2(0x1a4)](_0x4437d2(0x195),'tempaccess_5_'+_0x3a2e37),Markup['button'][_0x4437d2(0x1a4)]('15\x20min',_0x4437d2(0x2d0)+_0x3a2e37),Markup[_0x4437d2(0x286)][_0x4437d2(0x1a4)](_0x4437d2(0x1d7),_0x4437d2(0x100)+_0x3a2e37),Markup['button'][_0x4437d2(0x1a4)]('reject',_0x4437d2(0x173)+_0x3a2e37)]);await sendTelegram(settings['telegramChatId'],_0x4437d2(0x1b3)+normalizeIP(_0x4637a5)[_0x4437d2(0x27e)]+'\x20?',_0x31f66c),tgBot[_0x4437d2(0x182)](/tempaccess_(.+)_(.+)/,async _0x5d6062=>{const _0x4a4f4d=_0x4437d2,_0x1b1920=_0x5d6062[_0x4a4f4d(0x1d6)][0x1],_0x11fac3=_0x5d6062[_0x4a4f4d(0x1d6)][0x2],{uuid:_0x5e1ca0,externalip:_0x16c7cb}=tmpStorage[_0x11fac3];delete tmpStorage[_0x11fac3],_0x5d6062[_0x4a4f4d(0x232)](),devices[_0x5e1ca0][_0x4a4f4d(0x1b7)]={'clientip':_0x16c7cb,'timestamp':new Date()[_0x4a4f4d(0x166)](),'expiry':_0x1b1920},_0x1b1920!='reject'?(await sendTelegram(_0x5d6062[_0x4a4f4d(0x17f)]['id'],_0x4a4f4d(0x2ac)+_0x1b1920+'\x20minutes',{'parse_mode':_0x4a4f4d(0x1bc)}),io['to'](_0x5e1ca0)['emit']('status',{'access':{'allow':![],'reason':_0x4a4f4d(0x2b0),'token':null}})):(await sendTelegram(_0x5d6062[_0x4a4f4d(0x17f)]['id'],_0x4a4f4d(0xe4)),io['to'](_0x5e1ca0)['emit']('status',{'access':{'allow':![],'reason':_0x4a4f4d(0x282),'token':null}}));});}}function _0xc8f0(_0x46103a,_0x57919b){const _0x43944a=_0x1df2();return _0xc8f0=function(_0x46d7a3,_0x430350){_0x46d7a3=_0x46d7a3-0xdd;let _0x1df2e5=_0x43944a[_0x46d7a3];return _0x1df2e5;},_0xc8f0(_0x46103a,_0x57919b);}async function loginAccess2FA(_0x4011f4,_0x442e31){const _0xd218ac=_0x194689;if(tgBot&&settings[_0xd218ac(0x267)]){const _0x543b41=uuidRandom();tmpStorage[_0x543b41]={'uuid':_0x4011f4,'externalip':_0x442e31};const _0x541d99=Markup[_0xd218ac(0x246)]([Markup['button'][_0xd218ac(0x1a4)](_0xd218ac(0x1ad),_0xd218ac(0x1e2)+loginExpiry+'_'+_0x543b41),Markup[_0xd218ac(0x286)][_0xd218ac(0x1a4)]('reject',_0xd218ac(0x253)+_0x543b41)]);await sendTelegram(settings[_0xd218ac(0x267)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x442e31)[_0xd218ac(0x27e)]+'\x20?',_0x541d99),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x24545a=>{const _0x4db7d6=_0xd218ac,_0x297b71=_0x24545a[_0x4db7d6(0x1d6)][0x1],_0x1bb2ec=_0x24545a['match'][0x2],{uuid:_0x536205,externalip:_0x41276d}=tmpStorage[_0x1bb2ec];delete tmpStorage[_0x1bb2ec],_0x24545a[_0x4db7d6(0x232)](),devices[_0x536205][_0x4db7d6(0x107)]={'clientip':_0x41276d,'timestamp':new Date()['getTime'](),'expiry':_0x297b71},_0x297b71!=_0x4db7d6(0x285)?(await sendTelegram(_0x24545a[_0x4db7d6(0x17f)]['id'],_0x4db7d6(0x2b6),{'parse_mode':_0x4db7d6(0x1bc)}),io['to'](_0x536205)[_0x4db7d6(0x280)](_0x4db7d6(0x1e1),{'access':{'allow':![],'reason':_0x4db7d6(0x2b0),'token':null}})):(await sendTelegram(_0x24545a[_0x4db7d6(0x17f)]['id'],_0x4db7d6(0xf6)),io['to'](_0x536205)['emit'](_0x4db7d6(0x1e1),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4f3252=_0x194689;return dbConfig[_0x4f3252(0x210)]('bots')[_0x4f3252(0x14b)](_0x4f3252(0x262))[_0x4f3252(0x234)]({'status':_0x4f3252(0x200)})['value']()||[];}function getDisabledBots(){const _0x540105=_0x194689;return dbConfig[_0x540105(0x210)]('bots')[_0x540105(0x14b)]('botID')[_0x540105(0x234)]({'status':_0x540105(0x18b)})[_0x540105(0x228)]()||[];}function getBotAttributes(_0x4f0200){const _0x9e8b2e=_0x194689;let _0x1ebe64={};const _0x2da1f3=configpath+_0x9e8b2e(0xf4)+_0x4f0200+_0x9e8b2e(0x24c),_0x2872d2=fs[_0x9e8b2e(0x27d)](_0x2da1f3);if(_0x2872d2){const _0x4d07fa=fs['readFileSync'](_0x2da1f3);try{const _0x27115b=JSON[_0x9e8b2e(0x1ce)](_0x4d07fa),_0x5cb6b3=_0x27115b?_0x27115b[_0x9e8b2e(0x273)][0x0]['headless']:![];_0x1ebe64['mode']=_0x5cb6b3?_0x9e8b2e(0x1ac):_0x9e8b2e(0x14f),_0x1ebe64[_0x9e8b2e(0x287)]=_0x27115b?_0x27115b[_0x9e8b2e(0x273)][0x0][_0x9e8b2e(0x287)]:_0x9e8b2e(0x265)+_0x4f0200;}catch(_0x14e8b4){_0x1ebe64[_0x9e8b2e(0x207)]='manual',_0x1ebe64[_0x9e8b2e(0x287)]=_0x9e8b2e(0x265)+_0x4f0200;}}else _0x1ebe64['mode']='manual',_0x1ebe64[_0x9e8b2e(0x287)]=_0x9e8b2e(0x265)+_0x4f0200;return _0x1ebe64;}function getBotsWithMode(){const _0x414916=_0x194689,_0x5157c1=dbConfig[_0x414916(0x210)](_0x414916(0xe5))['sortBy'](_0x414916(0x262))[_0x414916(0x228)]()||[];return _0x5157c1[_0x414916(0x257)](_0xa5011e=>{const _0xa37358=_0x414916;let _0x395e3b=getBotAttributes(_0xa5011e[_0xa37358(0x262)]);_0xa5011e[_0xa37358(0x207)]=_0x395e3b[_0xa37358(0x207)];}),_0x5157c1;}function getBotExchanges(){const _0x12918d=_0x194689;let _0x4e8ffa=[];const _0x122576=dbConfig[_0x12918d(0x210)](_0x12918d(0xe5))[_0x12918d(0x14b)](_0x12918d(0x262))[_0x12918d(0x228)]()||[];_0x122576[_0x12918d(0x257)](_0x3a303b=>{const _0x52d833=_0x12918d;if(_0x3a303b[_0x52d833(0x1e1)]==_0x52d833(0x200)){const _0x4e322e=configpath+'bot-'+_0x3a303b['botID']+'-config.json',_0x57c2ff=fs[_0x52d833(0x27d)](_0x4e322e);let _0x707515;if(_0x57c2ff){const _0x47a7d3=fs[_0x52d833(0x1da)](_0x4e322e);try{const _0x5083de=JSON['parse'](_0x47a7d3);_0x707515=_0x5083de?_0x5083de[_0x52d833(0x273)][0x0][_0x52d833(0x18e)]:null;}catch(_0x40da78){}}if(_0x707515)_0x4e8ffa[_0x52d833(0x1a8)](_0x707515);}});const _0x342b25=[...new Set(_0x4e8ffa)]['sort']();return _0x342b25;}async function initUser(){const _0xdcec88=_0x194689;if(!settings[_0xdcec88(0x252)]){const _0x1d3a77=uuidRandom();mixpanel[_0xdcec88(0x118)](_0x1d3a77),updateSetting(_0xdcec88(0x252),_0x1d3a77);}}async function initSecure(){const _0x50bfcb=_0x194689;let _0x5de827=getSecure();if(!_0x5de827[_0x50bfcb(0x130)]('secret')){let _0x364528=await generateKeys();_0x5de827[_0x50bfcb(0xf8)]=_0x364528[_0x50bfcb(0xf8)],_0x5de827[_0x50bfcb(0x2b9)]=_0x364528[_0x50bfcb(0x2b9)],_0x5de827['secret']=crypto['randomBytes'](0x20)[_0x50bfcb(0x224)](_0x50bfcb(0x19c));;storeSecure(_0x5de827);}}function getSettings(){const _0x4a2e20=_0x194689;return dbSettings[_0x4a2e20(0x210)]('settings')[_0x4a2e20(0x228)]()||{};}function getSecure(){const _0x4eaa07=_0x194689;return dbSecure[_0x4eaa07(0x210)]('secure')[_0x4eaa07(0x228)]()||{};}function getBlacklist(){const _0x2d3da6=_0x194689;return dbSecure['get'](_0x2d3da6(0x1c2))[_0x2d3da6(0x228)]()||[];}function broadcastToBots(_0xa48741,_0x197526){const _0x387edd=_0x194689;config[_0x387edd(0x257)](_0x42340d=>{const _0x1c8c85=_0x387edd;if(_0x42340d[_0x1c8c85(0x1e1)]==_0x1c8c85(0x200)&&_0x42340d['live']==_0x1c8c85(0x1ff)||_0x42340d[_0x1c8c85(0x1e1)]==_0x1c8c85(0x14c)&&_0x42340d['live']==_0x1c8c85(0x1ff)){if(pid[_0x42340d[_0x1c8c85(0x262)]])pid[_0x42340d['botID']][_0x1c8c85(0xf2)]({[_0xa48741]:_0x197526});}});}function _0x1df2(){const _0x589889=['Token\x20blacklisted','remove','yes','access\x20timeout','mixpanel','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','expiry','any','getTime','login','Notifications\x20types:\x20','pidExpireLogin','telegramUsername','store-fiat','Deleted\x20Bot\x20','files','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','updatebotmanager','Bot\x20Mgr\x20>\x20','start','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','tempaccess_reject_','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','update-bot','5NjAMAZ','Node.js\x20v','alerts','uuid','args','connected','output-000.log','/help\x20-\x20show\x20available\x20commands\x0a','sendFile','chat','2FA\x20required','search','action','keys','address\x20already\x20in\x20use','backup-full','use','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','warning','metrics_','disabled','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','all','exchange','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','reason','exec','IPv4','slice','update','5\x20min','started','isValid','getStartingBalances','kill','access','Restoring\x20bot(s)\x20from\x20backup','hex','(((.+)+)+)+$','No\x20bots\x20running\x20right\x20now','writeFileSync','marketcapApi','\x1b[35m','\x1b[33m','toggle','callback','Starting\x20Balance\x20Bot\x20update','find','status\x20code\x20401','push','restore_yes_','output-001.log','off','auto','accept','apiPassword','\x20>\x20','message','encryptedUuid','Unauthorized\x20attempt\x20to\x20download\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','uncaughtException','unlinkSync','show-config','telegramIpApproval','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','function','stop','HTML','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','880yndUea','************','allow','pidRefreshToken','blacklist','logged\x20out','event','disable','getFullYear','\x20(1)','183070DsRNGD','full','/:bot/performance','new-disabled','\x20|\x20client:\x20...','telegrammsg','parse','format','store','6b67f3d61ee94b8f5c80b4affef4c4d9','from','Unauthorized\x20attempt\x20to\x20show\x20configuration','Ok,\x20will\x20send\x20alert\x20notifications\x20only','|@|','match','30\x20min','isIPv4MappedAddress','17861196dXNMXE','readFileSync','Notifications\x20enabled','Restore\x20backup\x20file\x20','getMonth','/metrics\x20-\x20show\x20bot\x20performance\x0a','All\x20bots\x20running\x20right\x20now','zip/','status','login2fa_','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','invalid\x20credentials','loginRequired','/:bot/support','file','#RES#\x20if\x20running\x20on\x20server',')\x20\x20\x20|\x20Bot\x20','Backup\x20file\x20uploaded','yargs/yargs','port','stringify','Unauthorized\x20login\x20attempt\x20(timeout)','Markdown','sort','CoinMarketCap\x20API\x20key\x20validated','/:bot/coins','Notifications\x20enabled\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Ok,\x20will\x20send\x20order\x20notifications\x20only','bb-settings.json','clientip','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','Password\x20reset\x20rejected','headers','util','settings.','orders','running','enabled','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','fork','date-fns','ipv6','listen','portfolio_','mode','[ip-address]','reply','update-bb','temporary\x20token\x20generated','user','address','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','node','get',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','Error:\x20Invalid\x20argument\x20','disconnect','name','post','add','#RES#','static','ipaddr.js','***','<b>Balance\x20Bot\x20Status:</b>\x0a','join','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','output-003.log','/:bot/history','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Setting\x20access:\x20','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','output-002.log','toString','temporaryAccessAllowed','.zip','mkdirSync','value','\x20|\x20','telegramEvents','ipc','temporary\x20access\x20timeout','telegramEnabled','::ffff:127.0.0.1','min','13XzPdpS','express-fileupload','editMessageReplyMarkup','login\x20token\x20generated','filter','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','/restart\x20-\x20restart\x20bot(s)\x0a','init','readdirSync','config_all','Unauthorized\x20attempt\x20to\x20get\x20events','ETH','bb/','SIGINT','Error\x20removing\x20old\x20backup\x20files:','reinstall-bb','sockets','Restore\x20process\x20confirmed','version','rmSync','length','botmanager','inlineKeyboard','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20confirm\x20message','Invalid\x20username\x20or\x20IP\x20address','Notifications\x20disabled\x0a','showConfig','-config.json','Unauthorized\x20attempt\x20to\x20update\x20settings','success','-events.json','versions','/names\x20-\x20show\x20bot\x20names\x0a','userid','login2fa_reject_','backup-full@','lastmsgemitted','stopped','forEach','\x20to\x20','password','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','verify',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','test','username','backup','store-configuration','cancelLoading','botID','whitelistEnabled','Session\x20expired\x20for\x20user\x20...','Bot\x20','family','telegramChatId','lastmsgtelegram','split','bot.js','metrics','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','0.0.0','bbPassword','exp','temporary\x20access\x20not\x20allowed','log','cancel-loading','bot','removeAllListeners','secret','hashSync','\x20only\x0a','replace','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Failed\x20to\x20download\x20','randomFillSync','inherit','existsSync','show','createServer','emit','restart_','temporary\x20access\x20rejected','string','=>\x20Go\x20to\x20#CYA#http://','reject','button','botname','reinstall','Server','bbvReceive','timestamp','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','config_orders','index.html','/:bot/configuration','env','sendMessage','backupfile','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','/enable\x20-\x20enable\x20notifications\x0a','getHours','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Logged\x20out\x20user\x20...','5811124rUUsNn','store-settings','telegram','live','reinstall_yes','onepagemode','sendMetricsTelegram','get-starting-balances','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','66GWIqVG','axios','defaults','apply','/start','reset-password','write','notification','params','catch','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Access\x20enabled\x20for\x20','-results.json','graphql-request','bb-config.json','reload','Restore\x20process\x20aborted','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','hybrid-crypto-js','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20update\x20bot','Login\x20accepted','update_no','build','privateKey','3lLwCAd','conn','type','-----------------------------------------------------------------------------------','track','toIPv4Address','Invalid\x20IP\x20address','get-backup-files','auth','\x1b[0m','bbUsername','Enabled\x20Bot\x20','build2','data','config/','generateKeyPairAsync','isDirectory','store-headless','7233912VfKTKY','\x1b[36m','enable','reinstall_no','tempaccess_15_','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Unauthorized\x20attempt\x20to\x20delete\x20bot','handshake','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','lowdb/adapters/FileSync','Notifications\x20disabled','statSync','User\x20has\x20been\x20validated','apiKey','BCT','bbvNew','Temporary\x20access\x20rejected','bots','copyFileSync','referer','sendPortfolioTelegram','Unauthorized\x20attempt\x20to\x20get\x20messages','2FA\x20login\x20token\x20generated','confirm-message','argv','Starting\x20new\x20bot\x20|\x20Bot\x20','uuid-random','child_process','simple','backup/','send','restart','bot-','binary','Login\x20rejected','Unauthorized\x20attempt\x20to\x20log\x20out','publicKey','2FA\x20login\x20required','Yes','All\x20bots','latestversion','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','getDate','on_','tempaccess_30_','Restarting\x20Bot\x20','resetpw_no','#RES#\x20if\x20running\x20locally\x0a','Telegraf\x20error:','152mUQXVm','node-zip','telegram2FaApproval','380654koXMYJ','whitelist','headless','add-bot','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','delete-alerts','crypto','messages','compareSync','startsWith','Unauthorized\x20attempt\x20to\x20add\x20bot','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','config_alerts','Starting\x20#RED#Balance\x20Bot\x20v','clients','telegramToken','alias','error','socket','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','off_','logs','deleteHistoryAlerts','\x1b[31m','close','657870pcRVMw','getSeconds','2FA','Orders','timeshift','422991zzlyHk','Network\x20Interfaces:','$1_$2_$3','path','internal','debug','settings','storeConfiguration','entries','logout','hasOwnProperty','emitHistory','Starting\x20(','getMinutes','Unauthorized\x20attempt\x20to\x20delete\x20alerts','remoteAddress','/on\x20-\x20start\x20bot(s)\x0a','api-eu.mixpanel.com','assign','secure','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','/:bot','toIPv4MappedAddress','number','bb-secure.json','production','login\x20required','Idling\x20(','once','getUTCHours','sign','command','exit','mtime','-performance.json','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','login\x20not\x20required','sortBy','new','/update\x20-\x20update\x20Balance\x20Bot\x0a','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','manual','host','environment','decrypt','Error\x20details:','f2aRequired','apiSecret','/status\x20-\x20show\x20bot(s)\x20status\x0a','includes','padStart','endsWith','No\x20authentication\x20token','constructor','127.0.0.1','token'];_0x1df2=function(){return _0x589889;};return _0x1df2();}async function storeSettings(_0x54d0e4,_0x530450=![]){const _0x24539b=_0x194689;_0x54d0e4={...settings,..._0x54d0e4};if(_0x530450&&_0x54d0e4['bbPassword']!='************'&&_0x54d0e4[_0x24539b(0x26e)]!=_0x24539b(0x21a)&&_0x54d0e4[_0x24539b(0x26e)]!=''){const _0x28f270=crypt['decrypt'](secure['privateKey'],_0x54d0e4[_0x24539b(0x26e)])[_0x24539b(0x1b0)][_0x24539b(0x269)](_0x24539b(0x1d5))[0x0],_0x1b4c0c=bcrypt['hashSync'](_0x28f270,saltRounds);_0x54d0e4={..._0x54d0e4,'bbPassword':_0x1b4c0c};}if(_0x530450&&_0x54d0e4[_0x24539b(0x117)]!=_0x24539b(0x1bf)&&_0x54d0e4[_0x24539b(0x117)]!=_0x24539b(0x21a)&&_0x54d0e4[_0x24539b(0x117)]!=''){const _0x14aa18=crypt[_0x24539b(0x152)](secure[_0x24539b(0x2b9)],_0x54d0e4[_0x24539b(0x117)])[_0x24539b(0x1b0)][_0x24539b(0x269)](_0x24539b(0x1d5))[0x0];_0x54d0e4={..._0x54d0e4,'telegramToken':_0x14aa18};}if(_0x530450&&_0x54d0e4[_0x24539b(0x1a0)]!=_0x24539b(0x1bf)&&_0x54d0e4[_0x24539b(0x1a0)]!=_0x24539b(0x21a)&&_0x54d0e4[_0x24539b(0x1a0)]!=''){const _0x4dae6f=crypt[_0x24539b(0x152)](secure[_0x24539b(0x2b9)],_0x54d0e4[_0x24539b(0x1a0)])[_0x24539b(0x1b0)][_0x24539b(0x269)](_0x24539b(0x1d5))[0x0];_0x54d0e4={..._0x54d0e4,'marketcapApi':_0x4dae6f};}const _0x529555=_0x54d0e4['telegramToken']!=_0x24539b(0x1bf)&&_0x54d0e4[_0x24539b(0x117)]!=settings[_0x24539b(0x117)]||_0x54d0e4[_0x24539b(0x16a)]!=settings['telegramUsername'],_0x481fa2=_0x54d0e4['telegramToken']==''||_0x54d0e4[_0x24539b(0x16a)]=='',_0xd6c41=_0x54d0e4['marketcapApi']&&_0x54d0e4[_0x24539b(0x1a0)]!=_0x24539b(0x1bf)&&_0x54d0e4[_0x24539b(0x1a0)]!=settings[_0x24539b(0x117)];_0x529555&&(_0x54d0e4[_0x24539b(0x267)]=null,_0x54d0e4['telegramEvents']=_0x24539b(0x18d));for(const [_0x1777a6,_0x42e921]of Object[_0x24539b(0x12e)](_0x54d0e4)){if(_0x1777a6==_0x24539b(0x117)&&_0x42e921==_0x24539b(0x1bf)){_0x54d0e4[_0x24539b(0x117)]=settings[_0x24539b(0x117)];continue;};if(_0x1777a6==_0x24539b(0x26e)&&_0x42e921==_0x24539b(0x1bf)){_0x54d0e4[_0x24539b(0x26e)]=settings['bbPassword'];continue;};if(_0x1777a6==_0x24539b(0x1a0)&&_0x42e921=='************'){_0x54d0e4[_0x24539b(0x1a0)]=settings['marketcapApi'];continue;};dbSettings['set'](_0x24539b(0x1fd)+_0x1777a6,_0x42e921)[_0x24539b(0x2a7)]();}settings=_0x54d0e4,io['to']('botmanager')[_0x24539b(0x280)](_0x24539b(0x12c),cleanSettings()),broadcastToBots('timeshift',settings[_0x24539b(0x125)]),broadcastToBots(_0x24539b(0x29d),settings[_0x24539b(0x29d)]),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x529555&&!_0x481fa2)initTelegram();if(_0x529555&&_0x481fa2)disableTelegram();getAllClients()[_0x24539b(0x257)](_0x407d24=>{const _0x3110f0=_0x24539b;getSocket(_0x407d24['id'])['emit'](_0x3110f0(0x1e1),{'access':{'allow':![],'reason':_0x3110f0(0x2b0),'token':null}});}),_0xd6c41&&(await sleep(0xbb8),testMarketcapApi(_0x54d0e4[_0x24539b(0x1a0)]));}async function testMarketcapApi(_0x533cee){const _0xc26f6d=_0x194689,_0x5a823c=[_0xc26f6d(0xe2),_0xc26f6d(0x23b)];try{await axios['get'](_0xc26f6d(0x14e),{'headers':{'X-CMC_PRO_API_KEY':_0x533cee},'params':{'symbol':_0x5a823c[_0xc26f6d(0x224)]()}});}catch(_0x9d5bae){_0x9d5bae[_0xc26f6d(0x224)]()[_0xc26f6d(0x157)](_0xc26f6d(0x1a7))?(io['to'](_0xc26f6d(0x245))[_0xc26f6d(0x280)]('notification',_0xc26f6d(0x2b2)),logger['full'](_0xc26f6d(0x2b2))):(io['to'](_0xc26f6d(0x245))[_0xc26f6d(0x280)](_0xc26f6d(0x2a8),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0xc26f6d(0x1c9)](_0xc26f6d(0x188)),logger['debug'](_0xc26f6d(0x153),_0x9d5bae[_0xc26f6d(0x224)]()+'\x20-\x20'+_0x9d5bae['code']));return;}logger['debug'](_0xc26f6d(0x1f1));}function updateSetting(_0x4bc63c,_0x4a7a6a){const _0x142013=_0x194689;dbSettings['set'](_0x142013(0x1fd)+_0x4bc63c,_0x4a7a6a)['write'](),settings=getSettings(),io['to'](_0x142013(0x245))[_0x142013(0x280)](_0x142013(0x12c),cleanSettings());}function storeSecure(_0x12378a){const _0x27a074=_0x194689;dbSecure[_0x27a074(0x210)](_0x27a074(0x139))[_0x27a074(0x1a8)](_0x12378a)[_0x27a074(0x2a7)](),secure=_0x12378a;}function addBlacklist(_0x38406b){const _0x241693=_0x194689;cleanBlacklist();let _0x1e2d75;devices[_0x38406b][_0x241693(0x1b7)]?_0x1e2d75=Math['max'](devices[_0x38406b][_0x241693(0x1b7)]['expiry'],loginExpiry):_0x1e2d75=loginExpiry,dbSecure[_0x241693(0x210)](_0x241693(0x1c2))[_0x241693(0x1a8)]({'expiry':new Date()['getTime']()+_0x1e2d75*0x3c*0x3e8,'token':devices[_0x38406b][_0x241693(0x19a)][_0x241693(0x15d)]})['write'](),blacklist=dbSecure[_0x241693(0x210)](_0x241693(0x1c2))[_0x241693(0x228)]();}function cleanBlacklist(){const _0x8b5d9=_0x194689;let _0x5633a3=dbSecure[_0x8b5d9(0x210)](_0x8b5d9(0x1c2))['cloneDeep']()[_0x8b5d9(0x228)](),_0x66f798=new Date()['getTime']();_0x5633a3[_0x8b5d9(0x257)](_0x58f301=>{const _0x5769bd=_0x8b5d9;_0x58f301[_0x5769bd(0x164)]<_0x66f798&&dbSecure[_0x5769bd(0x210)](_0x5769bd(0x1c2))[_0x5769bd(0x15f)]({'expiry':_0x58f301[_0x5769bd(0x164)]})[_0x5769bd(0x2a7)]();});}function initStates(){const _0x20a5a5=_0x194689;let _0x18fbee=getConfiguration();_0x18fbee[_0x20a5a5(0x257)](_0x48d431=>{const _0x4a778d=_0x20a5a5;_0x48d431['live']=_0x4a778d(0x256);}),storeConfiguration(_0x18fbee);}function onKeys(){const _0x6d295a=new RSA();return new Promise(_0x3004be=>{const _0x16e9a1=_0xc8f0;_0x6d295a[_0x16e9a1(0x2c9)]()['then'](_0x1aa37a=>{_0x3004be(_0x1aa37a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xa6ccee=_0x194689;let _0x127840=getSettings(),_0x6ea967=![];!_0x127840[_0xa6ccee(0x130)](_0xa6ccee(0x268))&&(_0x127840[_0xa6ccee(0x268)]=0x0,_0x6ea967=!![]);!_0x127840['hasOwnProperty']('lastmsgemitted')&&(_0x127840['lastmsgemitted']=0x0,_0x6ea967=!![]);!_0x127840['hasOwnProperty'](_0xa6ccee(0xfc))&&(_0x127840[_0xa6ccee(0xfc)]=_0xa6ccee(0x26d),_0x6ea967=!![]);!_0x127840['hasOwnProperty'](_0xa6ccee(0x29d))&&(_0x127840[_0xa6ccee(0x29d)]=![],_0x6ea967=!![]);!_0x127840[_0xa6ccee(0x130)](_0xa6ccee(0x1a0))&&(_0x127840[_0xa6ccee(0x1a0)]='',_0x6ea967=!![]);if(_0x6ea967)storeSettings(_0x127840);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0xa6ccee(0x257)](_0x133850=>{const _0x359c1b=_0xa6ccee;if(!_0x133850['isDirectory']()){if(!_0x133850[_0x359c1b(0x214)][_0x359c1b(0x111)]('backup-full@'))fs['unlinkSync'](configbackuppath+_0x133850['name']);}else fs['rmSync'](configbackuppath+_0x133850['name'],{'recursive':!![]});});}catch(_0x3ae278){logger[_0xa6ccee(0x12b)](_0xa6ccee(0x23e),_0x3ae278);}}function storeConfiguration(_0x366058){const _0x293533=_0x194689;dbConfig['get'](_0x293533(0xe5))['remove']()[_0x293533(0x2a7)](),dbConfig[_0x293533(0x210)](_0x293533(0xe5))['push'](..._0x366058)[_0x293533(0x2a7)](),config=_0x366058;}async function resetPassword(){const _0x33727d=_0x194689;if(tgBot&&settings[_0x33727d(0x267)]){const _0x15b14d=Markup[_0x33727d(0x246)]([Markup[_0x33727d(0x286)][_0x33727d(0x1a4)](_0x33727d(0x160),'resetpw_yes'),Markup[_0x33727d(0x286)][_0x33727d(0x1a4)]('no',_0x33727d(0x102))]);await sendTelegram(settings[_0x33727d(0x267)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x15b14d),tgBot[_0x33727d(0x182)](/resetpw_(.+)/,async _0x1e08cc=>{const _0x202e91=_0x33727d,_0x3b377b=_0x1e08cc['match'][0x1];_0x1e08cc[_0x202e91(0x232)]();if(_0x3b377b!='no'){const _0x3b9c19=0xf,_0x5f2e2d='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x460085=Array[_0x202e91(0x1d2)](crypto[_0x202e91(0x27b)](new Uint32Array(_0x3b9c19)))['map'](_0x247737=>_0x5f2e2d[_0x247737%_0x5f2e2d['length']])[_0x202e91(0x21c)](''),_0x5d5960=bcrypt[_0x202e91(0x276)](_0x460085,saltRounds);storeSettings({'bbPassword':_0x5d5960}),await sendTelegram(_0x1e08cc[_0x202e91(0x17f)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x460085,{'parse_mode':_0x202e91(0x1bc)});}else await sendTelegram(_0x1e08cc[_0x202e91(0x17f)]['id'],_0x202e91(0x1fa));});}}async function confirmRestore(_0x44c331,_0x4b12c8){const _0x3d5e11=_0x194689;io['to'](_0x3d5e11(0x245))[_0x3d5e11(0x280)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x3d5e11(0x24e));if(tgBot&&settings['telegramChatId']){const _0xc898e2=uuidRandom();tmpStorage[_0xc898e2]={'path':_0x44c331,'filename':_0x4b12c8};const _0x5390d1=Markup[_0x3d5e11(0x246)]([Markup['button'][_0x3d5e11(0x1a4)](_0x3d5e11(0x160),_0x3d5e11(0x1a9)+_0xc898e2),Markup['button'][_0x3d5e11(0x1a4)]('no','restore_no_'+_0xc898e2)]);await sendTelegram(settings['telegramChatId'],_0x3d5e11(0x296),_0x5390d1),tgBot[_0x3d5e11(0x182)](/restore_(.+)_(.+)/,async _0x2a86c1=>{const _0x527e82=_0x3d5e11,_0x89f27f=_0x2a86c1[_0x527e82(0x1d6)][0x1],_0x112a9e=_0x2a86c1['match'][0x2],{path:_0x2b3e73,filename:_0xe8ab23}=tmpStorage[_0x112a9e];delete tmpStorage[_0x112a9e],_0x2a86c1[_0x527e82(0x232)](),_0x89f27f==_0x527e82(0x160)?(logger[_0x527e82(0x12b)](_0x527e82(0x241)),await sendTelegram(_0x2a86c1[_0x527e82(0x17f)]['id'],_0x527e82(0x19b),{'parse_mode':_0x527e82(0x1bc)}),unzipFile(_0x2b3e73,_0xe8ab23)):(logger[_0x527e82(0x12b)]('Restore\x20process\x20aborted'),await sendTelegram(_0x2a86c1[_0x527e82(0x17f)]['id'],_0x527e82(0x2b1)));});}}function getServerTime(){const _0x33c1d1=_0x194689,_0x41452f=new Date();return _0x41452f[_0x33c1d1(0x1c6)]()+'/'+(_0x41452f[_0x33c1d1(0x1dd)]()+0x1)[_0x33c1d1(0x224)]()[_0x33c1d1(0x158)](0x2,'0')+'/'+_0x41452f[_0x33c1d1(0xfe)]()[_0x33c1d1(0x224)]()[_0x33c1d1(0x158)](0x2,'0')+'\x20'+_0x41452f[_0x33c1d1(0x295)]()[_0x33c1d1(0x224)]()[_0x33c1d1(0x158)](0x2,'0')+':'+_0x41452f[_0x33c1d1(0x133)]()['toString']()[_0x33c1d1(0x158)](0x2,'0')+':'+_0x41452f[_0x33c1d1(0x122)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x16412e=_0x194689,_0x20ff4a=shiftedTime();return _0x20ff4a[_0x16412e(0x1c6)]()+'/'+(_0x20ff4a[_0x16412e(0x1dd)]()+0x1)[_0x16412e(0x224)]()[_0x16412e(0x158)](0x2,'0')+'/'+_0x20ff4a['getDate']()[_0x16412e(0x224)]()[_0x16412e(0x158)](0x2,'0')+'\x20'+_0x20ff4a[_0x16412e(0x295)]()['toString']()[_0x16412e(0x158)](0x2,'0')+':'+_0x20ff4a[_0x16412e(0x133)]()[_0x16412e(0x224)]()[_0x16412e(0x158)](0x2,'0')+':'+_0x20ff4a[_0x16412e(0x122)]()[_0x16412e(0x224)]()[_0x16412e(0x158)](0x2,'0');}function getCleanTimeStamp(){const _0x1a8f93=_0x194689,_0x3c4df3=shiftedTime();return _0x3c4df3[_0x1a8f93(0x1c6)]()+(_0x3c4df3[_0x1a8f93(0x1dd)]()+0x1)[_0x1a8f93(0x224)]()[_0x1a8f93(0x158)](0x2,'0')+_0x3c4df3['getDate']()['toString']()[_0x1a8f93(0x158)](0x2,'0')+'-'+_0x3c4df3[_0x1a8f93(0x295)]()[_0x1a8f93(0x224)]()[_0x1a8f93(0x158)](0x2,'0')+_0x3c4df3[_0x1a8f93(0x133)]()[_0x1a8f93(0x224)]()[_0x1a8f93(0x158)](0x2,'0')+_0x3c4df3[_0x1a8f93(0x122)]()[_0x1a8f93(0x224)]()[_0x1a8f93(0x158)](0x2,'0');}function shiftedTime(){const _0x2d25d5=_0x194689,_0x16bbf1=new Date();let _0x1646c8=_0x16bbf1;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x1646c8=fns[_0x2d25d5(0x216)](_0x16bbf1,{'hours':settings[_0x2d25d5(0x125)]});return _0x1646c8;}function startScheduler(){const _0x35b26a=_0x194689,_0x26c50e=new Date()[_0x35b26a(0x143)](),_0x45cffd=shiftedTime()[_0x35b26a(0x295)]();_0x45cffd==0x4&&backupConfigFiles();_0x45cffd==0x0&&rotateLogFiles();_0x26c50e%0x6==0x0&&triggerAnalytics();_0x26c50e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x513f27){const _0x33664c=_0x194689;logger['debug'](_0x33664c(0x1dc)+_0x513f27);const _0xc0a5e4=getBotsWithMode();_0xc0a5e4[_0x33664c(0x244)]>0x0?confirmRestore(configbackuppath,_0x513f27):unzipFile(configbackuppath,_0x513f27);}async function getBackupFiles(_0x3ab7de=null){const _0x24ed2c=_0x194689;let _0x5b6002=[],_0x2e663e=fs[_0x24ed2c(0x238)](configbackuppath,{'withFileTypes':!![]});_0x2e663e[_0x24ed2c(0x1f0)]((_0x15b714,_0x4b2a33)=>_0x15b714['name']<_0x4b2a33[_0x24ed2c(0x214)]?0x1:_0x4b2a33['name']<_0x15b714[_0x24ed2c(0x214)]?-0x1:0x0),_0x2e663e[_0x24ed2c(0x257)](_0x72cd2d=>{const _0x4420ab=_0x24ed2c;if(!_0x72cd2d[_0x4420ab(0x2ca)]()&&_0x72cd2d[_0x4420ab(0x214)]['startsWith'](_0x4420ab(0x254))&&_0x72cd2d[_0x4420ab(0x214)][_0x4420ab(0x159)]('.zip')){const _0xddc9db=formatDate(fs[_0x4420ab(0xdf)](configbackuppath+_0x72cd2d[_0x4420ab(0x214)])[_0x4420ab(0x147)]);_0x5b6002['push']({'name':_0x72cd2d['name'],'mtime':_0xddc9db});}});if(_0x3ab7de)io['to'](_0x3ab7de)[_0x24ed2c(0x280)]('backup-files',_0x5b6002);else return _0x5b6002;}async function backupConfigFiles(){const _0x5d439d=_0x194689;await zipFiles(_0x5d439d(0x185));const _0x204c2c=getCleanTimeStamp();fs[_0x5d439d(0xe6)](zippath+'backup-full.zip',configbackuppath+(_0x5d439d(0x254)+_0x204c2c+_0x5d439d(0x226)));let _0x4870d5=fs[_0x5d439d(0x238)](configbackuppath,{'withFileTypes':!![]});_0x4870d5[_0x5d439d(0x1f0)]((_0x403487,_0x3c3b60)=>_0x403487[_0x5d439d(0x214)]<_0x3c3b60[_0x5d439d(0x214)]?0x1:_0x3c3b60['name']<_0x403487['name']?-0x1:0x0),_0x4870d5[_0x5d439d(0x244)]>maxBackups&&fs[_0x5d439d(0x1b5)](configbackuppath+_0x4870d5[_0x4870d5[_0x5d439d(0x244)]-0x1][_0x5d439d(0x214)]);}function rotateLogFiles(){const _0x2813d3=_0x194689,_0x53119e=fs[_0x2813d3(0xdf)](logspath+_0x2813d3(0x17c)),_0x2d5a40=_0x53119e['size']/0x400;if(_0x2d5a40>0x64){let _0x3f1324=fs[_0x2813d3(0x238)](logspath,{'withFileTypes':!![]});_0x3f1324[_0x2813d3(0x1f0)]((_0x5fe1eb,_0x524b97)=>_0x5fe1eb[_0x2813d3(0x214)]<_0x524b97['name']?0x1:_0x524b97[_0x2813d3(0x214)]<_0x5fe1eb[_0x2813d3(0x214)]?-0x1:0x0),_0x3f1324['forEach'](_0x1c2bd5=>{const _0x1d31af=_0x2813d3;if(_0x1c2bd5[_0x1d31af(0x214)]==_0x1d31af(0x223))fs['copyFileSync'](logspath+_0x1c2bd5[_0x1d31af(0x214)],logspath+_0x1d31af(0x21e));if(_0x1c2bd5[_0x1d31af(0x214)]==_0x1d31af(0x1aa))fs[_0x1d31af(0xe6)](logspath+_0x1c2bd5['name'],logspath+_0x1d31af(0x223));_0x1c2bd5[_0x1d31af(0x214)]==_0x1d31af(0x17c)&&(fs[_0x1d31af(0xe6)](logspath+_0x1c2bd5[_0x1d31af(0x214)],logspath+_0x1d31af(0x1aa)),fs[_0x1d31af(0x19f)](logspath+_0x1c2bd5['name'],''));});}}async function zipFiles(_0x1074f3){const _0xc4dbc5=_0x194689;let _0x5a8788;if(_0x1074f3==_0xc4dbc5(0x11d))_0x5a8788=logspath;if(_0x1074f3=='backup')_0x5a8788=configpath;if(_0x1074f3==_0xc4dbc5(0x185))_0x5a8788=configpath;let _0x5c9c18=fs['readdirSync'](_0x5a8788,{'withFileTypes':!![]});const _0x438d66=new require(_0xc4dbc5(0x106))();_0x5c9c18[_0xc4dbc5(0x257)](_0xbe176=>{const _0x4f43ae=_0xc4dbc5;if(!_0xbe176['isDirectory']()){let _0x2a9663=fs[_0x4f43ae(0x1da)](_0x5a8788+_0xbe176[_0x4f43ae(0x214)]);if(_0x1074f3==_0x4f43ae(0x25f)){const _0xb90d6e=/^bot-[0-9]{3}-config.json$/,_0xe749b6=_0xb90d6e['test'](_0xbe176[_0x4f43ae(0x214)]);if(_0xe749b6){const _0x4133b5=JSON[_0x4f43ae(0x1ce)](_0x2a9663);if(_0x4133b5[_0x4f43ae(0x273)][0x0]){_0x4133b5[_0x4f43ae(0x273)][0x0][_0x4f43ae(0xe1)]=_0x4f43ae(0x21a),_0x4133b5['bot'][0x0][_0x4f43ae(0x155)]=_0x4f43ae(0x21a);if(_0x4133b5['bot'][0x0]['apiPassword'])_0x4133b5[_0x4f43ae(0x273)][0x0][_0x4f43ae(0x1ae)]='***';}_0x2a9663=JSON['stringify'](_0x4133b5,null,0x2);}if(_0xbe176[_0x4f43ae(0x214)]==_0x4f43ae(0x1f7)){const _0x166e44=JSON[_0x4f43ae(0x1ce)](_0x2a9663);if(_0x166e44['settings']['loginRequired'])_0x166e44['settings'][_0x4f43ae(0x1e5)]=![];if(_0x166e44['settings']['bbPassword'])_0x166e44[_0x4f43ae(0x12c)][_0x4f43ae(0x26e)]=_0x4f43ae(0x21a);if(_0x166e44[_0x4f43ae(0x12c)][_0x4f43ae(0x117)])_0x166e44[_0x4f43ae(0x12c)][_0x4f43ae(0x117)]=_0x4f43ae(0x21a);if(_0x166e44[_0x4f43ae(0x12c)][_0x4f43ae(0x267)])_0x166e44[_0x4f43ae(0x12c)]['telegramChatId']=null;if(_0x166e44[_0x4f43ae(0x12c)][_0x4f43ae(0x1a0)])_0x166e44['settings']['marketcapApi']='***';_0x2a9663=JSON[_0x4f43ae(0x1ed)](_0x166e44,null,0x2);}if(_0xbe176[_0x4f43ae(0x214)]!=_0x4f43ae(0x13e))_0x438d66[_0x4f43ae(0x1e7)](_0xbe176[_0x4f43ae(0x214)],_0x2a9663);}else _0x438d66[_0x4f43ae(0x1e7)](_0xbe176[_0x4f43ae(0x214)],_0x2a9663);}});const _0x404309=_0x438d66['generate']({'base64':![],'compression':'DEFLATE'});fs['writeFileSync'](zippath+(_0x1074f3+_0xc4dbc5(0x226)),_0x404309,_0xc4dbc5(0xf5));}async function unzipFile(_0x4287de,_0xc58db4){const _0x2f5d47=_0x194689;fs[_0x2f5d47(0x238)](configpath,{'withFileTypes':!![]})[_0x2f5d47(0x257)](_0xf29022=>{const _0xbcbd39=_0x2f5d47;if(!_0xf29022[_0xbcbd39(0x2ca)]())fs[_0xbcbd39(0x243)](configpath+_0xf29022['name']);});const _0x33b392=fs[_0x2f5d47(0x1da)](_0x4287de+_0xc58db4,_0x2f5d47(0xf5)),_0x25872a=new require('node-zip')(_0x33b392,{'base64':![],'checkCRC32':!![]});Object[_0x2f5d47(0x183)](_0x25872a[_0x2f5d47(0x16d)])[_0x2f5d47(0x257)](_0x587773=>{const _0x5af52e=_0x2f5d47,_0x42f73c=_0x25872a[_0x5af52e(0x16d)][_0x587773];fs['writeFileSync'](configpath+_0x42f73c[_0x5af52e(0x214)],_0x42f73c['_data']);}),fs[_0x2f5d47(0x238)](temppath,{'withFileTypes':!![]})[_0x2f5d47(0x257)](_0x3a5d4e=>{const _0x93bcc6=_0x2f5d47;if(!_0x3a5d4e['isDirectory']())fs[_0x93bcc6(0x243)](temppath+_0x3a5d4e[_0x93bcc6(0x214)]);}),logger[_0x2f5d47(0x12b)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x2f5d47(0xf2)]({'restore':!![]},_0x19b993=>{});}async function getPublicIp(){const _0x45c73d=_0x194689;try{const _0x212db1=await axios[_0x45c73d(0x210)]('https://api.ipify.org?format=json');publicip=_0x212db1[_0x45c73d(0x2c7)]['ip'];}catch(_0x5cf1ae){}}async function triggerAnalytics(){const _0x37e03b=_0x194689;if(!publicip)await getPublicIp();const _0x3bed96=getBotsWithMode();let _0x329618=0x0;_0x3bed96[_0x37e03b(0x257)](_0x39e7e1=>{const _0x287e07=_0x37e03b;if(_0x39e7e1['status']===_0x287e07(0x200))_0x329618++;});const _0x4365de=getBotExchanges();mixpanel[_0x37e03b(0x2be)](_0x37e03b(0x289),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x3bed96['length'],'numbotsenabled':_0x329618,'exchanges':_0x4365de,'environment':environment});}async function getMessages(){const _0x161775=_0x194689,_0x4e347b=_0x161775(0x235),_0x45ed9f=new GraphQLClient(_0x4e347b),_0x2b0402={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x2f251c=serverversion[_0x161775(0x269)]('.'),_0x609d5b=_0x2f251c[0x0]+'.'+_0x2f251c[0x1],_0x293b1c=Math[_0x161775(0x22f)](settings[_0x161775(0x268)],settings['lastmsgemitted']),_0x561495={'last':parseInt(_0x293b1c),'bbm':_0x609d5b},_0xd4675c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x215f75;try{_0x215f75=await _0x45ed9f['request'](_0xd4675c,_0x561495,_0x2b0402);}catch(_0x30ba3b){}if(_0x215f75&&_0x215f75['messages']){let _0xfb6876=settings[_0x161775(0x268)];newMessages=[];for(const _0x4d0633 of _0x215f75[_0x161775(0x10f)]){newMessages[_0x161775(0x1a8)](_0x4d0633);let _0x4da5b5=![];_0x4d0633[_0x161775(0xe3)]&&(updateSetting(_0x161775(0xfc),_0x4d0633['bbvNew']),_0x4da5b5=isNewerVersion(serverversion,_0x4d0633['bbvNew'])||serverversion==_0x4d0633[_0x161775(0xe3)]);if(!_0x4da5b5&&_0x4d0633['number']>_0xfb6876){if(_0x4d0633[_0x161775(0x28a)]===_0x161775(0x165)||serverversion['startsWith'](_0x4d0633['bbvReceive'])){let _0x5d84dc=''+_0x4d0633['title']+'\x0a\x0a'+_0x4d0633[_0x161775(0x1b0)];const _0x54055f=await sendTelegramMsg(toTelegramMarkdown(_0x5d84dc),_0x161775(0x1ef));if(_0x54055f)_0xfb6876=_0x4d0633[_0x161775(0x13d)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0xfb6876),emitMessages();}}function emitMessages(){const _0x3aeec4=_0x194689,_0x2b37c0=settings['lastmsgemitted'];let _0x26a4c4=[];newMessages[_0x3aeec4(0x257)](_0x3ff868=>{const _0x22fdec=_0x3aeec4;_0x3ff868[_0x22fdec(0x13d)]>_0x2b37c0&&_0x26a4c4[_0x22fdec(0x1a8)](_0x3ff868);}),_0x26a4c4[_0x3aeec4(0x244)]>0x0&&getAllClients()['forEach'](_0x5d512c=>{const _0x59caa6=_0x3aeec4;getSocket(_0x5d512c['id'])[_0x59caa6(0x280)](_0x59caa6(0x1b0),_0x26a4c4);});}function confirmMessage(_0x3e2592){const _0xc7ab7b=_0x194689;updateSetting(_0xc7ab7b(0x255),Number(_0x3e2592));}function isNewerVersion(_0x9153f1,_0x5c71c5){const _0x543c27=_0x194689,_0x36ff81=_0x5c71c5[_0x543c27(0x269)]('.'),_0x12d42f=_0x9153f1[_0x543c27(0x269)]('.');for(var _0x3ce7ad=0x0;_0x3ce7ad<_0x12d42f['length'];_0x3ce7ad++){const _0x1a0582=~~_0x12d42f[_0x3ce7ad],_0x37f53f=~~_0x36ff81[_0x3ce7ad];if(_0x1a0582>_0x37f53f)return!![];if(_0x1a0582<_0x37f53f)return![];}return![];}function toTelegramMarkdown(_0x2c0d44){const _0x18c1c1=_0x194689,_0x4c2915=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1cd01a=/\*{2}(.+?)\*{2}/gim;return _0x2c0d44=_0x2c0d44[_0x18c1c1(0x278)](_0x4c2915,_0x18c1c1(0x128))[_0x18c1c1(0x278)](_0x1cd01a,'*$1*'),_0x2c0d44;}async function validateConfigFile(){const _0x14a96b=_0x194689,_0x385570=dbConfig[_0x14a96b(0x210)]('bots')['sortBy']('botID')['value']()||[];if(_0x385570[_0x14a96b(0x244)]==0x0){let _0x1dd8b1=0x0,_0x53182a=[];const _0x114ab4=/^bot-([0-9]{3})-config.json$/,_0x2703ed=fs[_0x14a96b(0x238)](configpath);_0x2703ed['forEach'](_0x4d3cd3=>{const _0x29e17d=_0x14a96b,_0x83999b=_0x114ab4[_0x29e17d(0x191)](_0x4d3cd3);if(_0x83999b){const _0x336685=_0x83999b[0x1];let _0x1a8478=getBotAttributes(_0x336685);_0x53182a['push']({'botID':_0x336685,'botname':_0x1a8478[_0x29e17d(0x287)],'status':_0x29e17d(0x18b),'live':_0x29e17d(0x256)}),_0x1dd8b1++;}}),_0x1dd8b1!=0x0&&(dbConfig[_0x14a96b(0x210)]('bots')[_0x14a96b(0x138)](_0x53182a)[_0x14a96b(0x2a7)](),config=_0x53182a,restoredConfigFile=_0x1dd8b1);}}async function restoreConfigNotify(_0x221104){const _0x2b0c3a=_0x194689;let _0x1cd263;if(restoredConfigFile==0x1)_0x1cd263='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1cd263=_0x2b0c3a(0x2b4);if(_0x221104)io['to'](_0x2b0c3a(0x245))[_0x2b0c3a(0x280)](_0x2b0c3a(0x2a8),_0x1cd263);else{logger[_0x2b0c3a(0xf0)]('-----------------------------------------------------------------------------------'),logger[_0x2b0c3a(0xf0)](_0x1cd263),logger[_0x2b0c3a(0xf0)](_0x2b0c3a(0x2bd)),logger[_0x2b0c3a(0xf0)]('');if(tgBot&&settings[_0x2b0c3a(0x267)]&&settings['telegramEvents']!=_0x2b0c3a(0x1fe))await sendTelegram(settings[_0x2b0c3a(0x267)],_0x2b0c3a(0x170)+_0x1cd263);}}function validateCredentials(_0x23bb76,_0x3dcba6){const _0x4c1877=_0x194689;if(_0x23bb76[_0x4c1877(0x25e)]==settings[_0x4c1877(0x2c4)]&&bcrypt[_0x4c1877(0x110)](_0x23bb76[_0x4c1877(0x259)],settings['bbPassword'])){if(settings[_0x4c1877(0x154)])return{'allow':![],'reason':_0x4c1877(0xf9),'token':null};else{const _0x25eeb5=generateLoginToken(_0x3dcba6);return{'allow':!![],'reason':_0x4c1877(0x233),'token':_0x25eeb5};}}else return{'allow':![],'reason':_0x4c1877(0x1e4),'token':null};}function refreshToken(_0x20e78c){const _0x1f46ba=generateLoginToken(_0x20e78c);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1f46ba};}function validateAccess(_0x3b990f,_0x262a60,_0x5cfb0f){const _0x364658=_0x194689,_0x4a3640=_0x5cfb0f?_0x5cfb0f:devices[_0x262a60]['ip'];let _0x4e1559;const _0x177078=_0x1afec8=>{const _0x19bec4=_0xc8f0;if(settings['loginRequired']){if(settings[_0x19bec4(0x154)]){if(telegram2FaApproved(_0x262a60)){const _0x1b9ff7=generateLoginToken(_0x262a60);return{'allow':!![],'reason':_0x19bec4(0xea),'token':_0x1b9ff7};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4e1559=validToken(_0x1afec8,_0x262a60),_0x4e1559['hasOwnProperty'](_0x19bec4(0x24e))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1afec8}:{'allow':![],'reason':_0x19bec4(0x140),'token':null};}else return{'allow':!![],'reason':_0x19bec4(0x14a),'token':null};};if(settings[_0x364658(0x263)]){let _0xdd4765=[...settings[_0x364658(0x109)],'::1',_0x364658(0x22e),_0x364658(0x15c)];if(_0xdd4765['includes'](_0x4a3640))return _0x177078(_0x3b990f);else{_0x4e1559=validToken(_0x3b990f,_0x262a60);if(_0x4e1559[_0x364658(0x130)](_0x364658(0x24e)))return _0x177078(_0x3b990f);else{if(telegramIpApproved(_0x262a60)){const _0x59a5f7=generateToken(_0x262a60);return _0x4e1559=_0x177078(_0x3b990f),_0x4e1559[_0x364658(0x1c0)]?{'allow':!![],'reason':_0x364658(0x20b),'token':_0x59a5f7}:_0x4e1559;}else return settings[_0x364658(0x225)]?{'allow':![],'reason':_0x364658(0x180),'token':null}:{'allow':![],'reason':_0x364658(0x270),'token':null};}}}else return _0x177078(_0x3b990f);}function timelyDecrypt(_0x16144b,_0x5f45d7,_0x13ba9a='@'){const _0xe0c04f=_0x194689;if(_0x16144b)try{const _0x1928f5=crypt[_0xe0c04f(0x152)](secure[_0xe0c04f(0x2b9)],_0x16144b)[_0xe0c04f(0x1b0)],_0x35aa50=_0x1928f5['split'](_0x13ba9a)[0x0],_0x31f4f8=_0x1928f5[_0xe0c04f(0x269)](_0x13ba9a)[0x1],_0xf071e1=new Date()['getTime']();if(_0x5f45d7){if(_0xf071e1-_0x31f4f8<maxSecretAge*0x3e8)return _0x35aa50;else return![];}else return _0x35aa50;}catch(_0x2cd15c){return![];}else return![];}const validToken=(_0x15fb24,_0x5529b8)=>{const _0x5978fa=_0x194689,_0x2eeaf0=devices[_0x5529b8]['ip'];if(!_0x15fb24)return{'error':_0x5978fa(0x15a)};for(let _0x3a6b35 of blacklist){if(_0x3a6b35[_0x5978fa(0x15d)]==_0x15fb24)return{'error':_0x5978fa(0x15e)};}let _0x3726f1;try{_0x3726f1=jwt[_0x5978fa(0x25b)](_0x15fb24,secure['secret']+_0x5529b8);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3726f1[_0x5978fa(0x130)](_0x5978fa(0x1f8))&&!_0x3726f1['hasOwnProperty'](_0x5978fa(0x25e))||!_0x3726f1[_0x5978fa(0x130)](_0x5978fa(0x26f)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3726f1[_0x5978fa(0x130)]('username')&&_0x3726f1['hasOwnProperty'](_0x5978fa(0x1f8))){const {clientip:_0x2f6cd2}=_0x3726f1;return _0x2eeaf0==_0x2f6cd2?{'success':_0x5978fa(0xe0)}:{'error':_0x5978fa(0x2c0)};}else{if(_0x3726f1[_0x5978fa(0x130)]('username')&&_0x3726f1['hasOwnProperty']('clientip')){const {username:_0x48c675,clientip:_0x40f774}=_0x3726f1;return settings[_0x5978fa(0x2c4)]==_0x48c675&&_0x2eeaf0==_0x40f774?{'success':_0x5978fa(0xe0)}:{'error':_0x5978fa(0x249)};}}},generateLoginToken=_0x4be1db=>{const _0x1bb7da=_0x194689;if(_0x4be1db){const _0x5cd61e=devices[_0x4be1db]['ip'];return jwt[_0x1bb7da(0x144)]({'username':settings[_0x1bb7da(0x2c4)],'clientip':_0x5cd61e},secure[_0x1bb7da(0x275)]+_0x4be1db,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x29758e=>{const _0x5497df=_0x194689;if(_0x29758e){const _0x316ece=devices[_0x29758e]['ip'];return jwt['sign']({'clientip':_0x316ece},secure[_0x5497df(0x275)]+_0x29758e,{'expiresIn':devices[_0x29758e][_0x5497df(0x1b7)][_0x5497df(0x164)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x26392a=>{const _0x323184=_0x194689;let _0x4abe1d=![];return devices[_0x26392a]['telegramIpApproval']&&devices[_0x26392a][_0x323184(0x1b7)][_0x323184(0x164)]!=_0x323184(0x285)&&(_0x4abe1d=devices[_0x26392a][_0x323184(0x1b7)][_0x323184(0x1f8)]==devices[_0x26392a]['ip']&&new Date()[_0x323184(0x166)]()-devices[_0x26392a]['telegramIpApproval']['timestamp']<devices[_0x26392a][_0x323184(0x1b7)][_0x323184(0x164)]*0x3c*0x3e8),_0x4abe1d;},telegram2FaApproved=_0x34e763=>{const _0x572a36=_0x194689;let _0x39be2e=![];return devices[_0x34e763][_0x572a36(0x107)]&&devices[_0x34e763][_0x572a36(0x107)][_0x572a36(0x164)]!=_0x572a36(0x285)&&(_0x39be2e=devices[_0x34e763][_0x572a36(0x107)]['clientip']==devices[_0x34e763]['ip']&&new Date()[_0x572a36(0x166)]()-devices[_0x34e763][_0x572a36(0x107)][_0x572a36(0x28b)]<devices[_0x34e763][_0x572a36(0x107)]['expiry']*0x3c*0x3e8),_0x39be2e;},normalizeIP=_0x3c9f92=>{const _0x1b2092=_0x194689;let _0x13a6f5=null,_0x33e232=null;if(ipaddr[_0x1b2092(0x197)](_0x3c9f92)){const _0x53feb7=ipaddr[_0x1b2092(0x1ce)](_0x3c9f92);_0x53feb7['kind']()===_0x1b2092(0x204)?(_0x53feb7[_0x1b2092(0x1d8)]()&&(_0x13a6f5=_0x53feb7[_0x1b2092(0x2bf)]()[_0x1b2092(0x224)]()),_0x33e232=_0x53feb7[_0x1b2092(0x224)]()):(_0x13a6f5=_0x53feb7['toString'](),_0x33e232=_0x53feb7[_0x1b2092(0x13c)]()[_0x1b2092(0x224)]());}return{'show':_0x13a6f5?_0x13a6f5:_0x33e232,'store':_0x33e232};};function formatDate(_0x295bd2){const _0x1c8935=_0x194689;return _0x295bd2[_0x1c8935(0x1c6)]()+'/'+(_0x295bd2[_0x1c8935(0x1dd)]()+0x1)[_0x1c8935(0x224)]()[_0x1c8935(0x158)](0x2,'0')+'/'+_0x295bd2[_0x1c8935(0xfe)]()[_0x1c8935(0x224)]()[_0x1c8935(0x158)](0x2,'0')+'\x20'+_0x295bd2[_0x1c8935(0x295)]()[_0x1c8935(0x224)]()[_0x1c8935(0x158)](0x2,'0')+':'+_0x295bd2[_0x1c8935(0x133)]()[_0x1c8935(0x224)]()[_0x1c8935(0x158)](0x2,'0')+':'+_0x295bd2['getSeconds']()['toString']()[_0x1c8935(0x158)](0x2,'0');}function sleep(_0x8511ed){return new Promise(_0x3ce492=>setTimeout(_0x3ce492,_0x8511ed));}