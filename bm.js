const _0x3edd8a=_0x10ae;(function(_0x3b134d,_0x464ee6){const _0x533bfc=_0x10ae,_0x31476f=_0x3b134d();while(!![]){try{const _0x987a1=parseInt(_0x533bfc(0x1ad))/0x1+-parseInt(_0x533bfc(0x123))/0x2+-parseInt(_0x533bfc(0x1d0))/0x3+-parseInt(_0x533bfc(0x135))/0x4*(-parseInt(_0x533bfc(0x230))/0x5)+-parseInt(_0x533bfc(0x1d6))/0x6*(parseInt(_0x533bfc(0x231))/0x7)+-parseInt(_0x533bfc(0x1c7))/0x8+parseInt(_0x533bfc(0x22e))/0x9*(parseInt(_0x533bfc(0x1f6))/0xa);if(_0x987a1===_0x464ee6)break;else _0x31476f['push'](_0x31476f['shift']());}catch(_0x1352aa){_0x31476f['push'](_0x31476f['shift']());}}}(_0x37be,0x30b6e));function _0x10ae(_0x26b0db,_0x2ee891){const _0x2069dd=_0x37be();return _0x10ae=function(_0x3ee1f1,_0x31dafa){_0x3ee1f1=_0x3ee1f1-0xfa;let _0x37bea8=_0x2069dd[_0x3ee1f1];return _0x37bea8;},_0x10ae(_0x26b0db,_0x2ee891);}const _0x31dafa=function(){let _0x408563=!![];return function(_0x4d386d,_0x40d30b){const _0x40e3f6=_0x408563?function(){const _0x1521b1=_0x10ae;if(_0x40d30b){const _0x124258=_0x40d30b[_0x1521b1(0x17b)](_0x4d386d,arguments);return _0x40d30b=null,_0x124258;}}:function(){};return _0x408563=![],_0x40e3f6;};}(),_0x3ee1f1=_0x31dafa(this,function(){const _0x4e811d=_0x10ae;return _0x3ee1f1[_0x4e811d(0x119)]()['search'](_0x4e811d(0x219))[_0x4e811d(0x119)]()[_0x4e811d(0x1f3)](_0x3ee1f1)[_0x4e811d(0x226)](_0x4e811d(0x219));});_0x3ee1f1();'use strict';process[_0x3edd8a(0xfc)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x3edd8a(0x1c0)),FileSync=require(_0x3edd8a(0x116)),fs=require('fs'),fns=require('date-fns'),low=require(_0x3edd8a(0x122)),path=require('path'),crypto=require(_0x3edd8a(0x20f)),Crypt=require('hybrid-crypto-js')[_0x3edd8a(0x1b5)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x3edd8a(0x117)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x3edd8a(0x178))[_0x3edd8a(0x18e)],googleAnalytics=require(_0x3edd8a(0x165))[_0x3edd8a(0x18e)],ipaddr=require(_0x3edd8a(0x22b)),argv=require(_0x3edd8a(0x1d2))(process[_0x3edd8a(0x169)][_0x3edd8a(0x161)](0x2))['argv'],PORT=argv['port']||_0x3edd8a(0x16a),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log']('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x3edd8a(0x1e4)](0x1);const HOST=argv['host']||null,userID=argv[_0x3edd8a(0x1c5)]||'';let bbpath=_0x3edd8a(0x18b),bbpath2='';const botfile='bot.js',configfile=_0x3edd8a(0x1b7),settingsfile=_0x3edd8a(0x1c4),securefile=_0x3edd8a(0x1a7);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3edd8a(0x18c)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x3edd8a(0x1b8),configbackuppath=configpath+_0x3edd8a(0x150);!fs[_0x3edd8a(0x228)](configpath)&&fs[_0x3edd8a(0x17d)](configpath);!fs[_0x3edd8a(0x228)](configbackuppath)&&fs[_0x3edd8a(0x17d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3edd8a(0x192)]({'bots':[]})[_0x3edd8a(0x121)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3edd8a(0x192)]({'settings':{'timeshift':0x0}})[_0x3edd8a(0x121)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3edd8a(0x192)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x3edd8a(0x124),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x3edd8a(0x196)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x3edd8a(0x155)),app=express(),http=require(_0x3edd8a(0x186))[_0x3edd8a(0x1d4)](app);app[_0x3edd8a(0x1dd)](express[_0x3edd8a(0x140)](path[_0x3edd8a(0x239)](__dirname,bbpath2,_0x3edd8a(0x14b)))),app['use'](express['static'](path[_0x3edd8a(0x239)](__dirname,bbpath2,'build'))),app[_0x3edd8a(0x137)]('/',function(_0x240a90,_0x550915){const _0x4c884a=_0x3edd8a;_0x550915[_0x4c884a(0x23a)](path['join'](__dirname,bbpath2,_0x4c884a(0x14b),_0x4c884a(0x189)));}),app[_0x3edd8a(0x137)](_0x3edd8a(0x175),function(_0x460414,_0x20b69e){const _0x4a7dac=_0x3edd8a;_0x20b69e[_0x4a7dac(0x23a)](path['join'](__dirname,bbpath2,_0x4a7dac(0x19b),'index.html'));}),app[_0x3edd8a(0x137)](_0x3edd8a(0x1a5),(_0x1f0da2,_0x3c6cd5)=>{const _0x46698e=_0x3edd8a;_0x3c6cd5[_0x46698e(0x23a)](path[_0x46698e(0x239)](__dirname,bbpath2,_0x46698e(0x19b),_0x46698e(0x189)));}),app[_0x3edd8a(0x137)]('/:bot/performance',(_0x19743a,_0xedbb3f)=>{const _0x342e23=_0x3edd8a;_0xedbb3f[_0x342e23(0x23a)](path['join'](__dirname,bbpath2,_0x342e23(0x19b),'index.html'));}),app[_0x3edd8a(0x137)](_0x3edd8a(0x19d),(_0x38cb62,_0x2c585f)=>{const _0x182eae=_0x3edd8a;_0x2c585f[_0x182eae(0x23a)](path[_0x182eae(0x239)](__dirname,bbpath2,_0x182eae(0x19b),'index.html'));}),app[_0x3edd8a(0x137)](_0x3edd8a(0x203),(_0x477a76,_0x1b99b8)=>{const _0x3bf832=_0x3edd8a;_0x1b99b8[_0x3bf832(0x23a)](path['join'](__dirname,bbpath2,_0x3bf832(0x19b),_0x3bf832(0x189)));}),app[_0x3edd8a(0x137)](_0x3edd8a(0x1e3),(_0x4b76b4,_0x3cb2a9)=>{const _0x148af4=_0x3edd8a;_0x3cb2a9[_0x148af4(0x23a)](path[_0x148af4(0x239)](__dirname,bbpath2,_0x148af4(0x19b),_0x148af4(0x189)));}),app['get']('/:bot/support',(_0x1ea237,_0x3bcb35)=>{const _0x17b0ea=_0x3edd8a;_0x3bcb35[_0x17b0ea(0x23a)](path['join'](__dirname,bbpath2,_0x17b0ea(0x19b),_0x17b0ea(0x189)));});if(HOST)http[_0x3edd8a(0x15c)](PORT,HOST);else http[_0x3edd8a(0x15c)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x3edd8a(0x179),'plugins':[googleAnalytics({'trackingId':_0x3edd8a(0x114)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings[_0x3edd8a(0x211)]!=''&&settings[_0x3edd8a(0x13c)]&&settings[_0x3edd8a(0x13c)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x588213=_0x3edd8a;console['log'](''),console[_0x588213(0x13e)](_0x588213(0x212)),logging(_0x588213(0x1e8)+PORT),console[_0x588213(0x13e)](_0x588213(0x212));if(config[_0x588213(0x184)]!=0x0)config[_0x588213(0x1f1)](_0x502b09=>{const _0x2415a4=_0x588213;if(_0x502b09[_0x2415a4(0x1bf)]==_0x2415a4(0x166)||_0x502b09[_0x2415a4(0x1bf)]==_0x2415a4(0x167))logging('starting\x20bot\x20|\x20Bot\x20'+_0x502b09['botID']+_0x2415a4(0x12d)+_0x502b09['botname']),startBot([_0x502b09['botID'],userID],{'cwd':bbpath},function(_0x1df118){if(_0x1df118)logging(_0x1df118);});else(_0x502b09[_0x2415a4(0x1bf)]==_0x2415a4(0x1ec)||_0x502b09[_0x2415a4(0x1bf)]==_0x2415a4(0x1d5))&&logging(_0x2415a4(0x12e)+_0x502b09['botID']+_0x2415a4(0x12d)+_0x502b09[_0x2415a4(0x1a3)]);});else!newBot&&console[_0x588213(0x13e)](_0x588213(0x21c));if(newBot)addBot();console[_0x588213(0x13e)]('-----------------------------------------------------------------------------------'),console[_0x588213(0x13e)]('');}function startSocket(){io['on']('connection',_0x4d3940=>{const _0x13d40e=_0x10ae;let _0x3480a6,_0x3a074f,_0x573d10,_0x11a705,_0x4781d0;const _0x426e9b=_0x4d3940[_0x13d40e(0x109)][_0x13d40e(0x206)]['referer'];_0x3a074f=_0x426e9b['match'](/bot[0-9]{3}/);if(_0x3a074f)_0x573d10=_0x3a074f[0x0][_0x13d40e(0x144)](/[0-9]{3}/);if(_0x573d10)_0x3480a6=_0x573d10[0x0];else _0x3480a6='botmanager';const _0x564858=_0x4d3940[_0x13d40e(0x109)][_0x13d40e(0x1c3)][_0x13d40e(0x235)];if(!_0x564858)_0x4d3940[_0x13d40e(0x177)](_0x13d40e(0x1bf),{'publicKey':secure[_0x13d40e(0x106)]});else{_0x11a705=timelyDecrypt(_0x564858,![]);if(!_0x11a705)_0x4d3940[_0x13d40e(0x177)](_0x13d40e(0x1bf),{'publicKey':secure[_0x13d40e(0x106)]});else{_0x4781d0=normalizeIP(_0x4d3940[_0x13d40e(0x202)]['remoteAddress'])[_0x13d40e(0x15f)];if(!devices[_0x11a705])devices[_0x11a705]={'uuid':_0x11a705,'access':{'token':null}};devices[_0x11a705]['ip']=_0x4781d0;const _0x5dac8d=addClient(_0x4d3940['id'],_0x11a705,_0x3480a6);setAccess(_0x5dac8d),_0x4d3940['on']('login',_0x70fbcb=>{const _0x7ab241=_0x13d40e,_0x54aec1=timelyDecrypt(_0x70fbcb[_0x7ab241(0xfd)]);if(_0x54aec1){_0x70fbcb={'username':_0x70fbcb[_0x7ab241(0x15a)],'password':_0x54aec1},devices[_0x11a705][_0x7ab241(0x113)]=validateCredentials(_0x70fbcb,_0x11a705);if(devices[_0x11a705][_0x7ab241(0x113)]['allow']==![]&&devices[_0x11a705]['access'][_0x7ab241(0x152)]==_0x7ab241(0x11e))_0x4d3940['emit']('status',{'access':devices[_0x11a705][_0x7ab241(0x113)]}),loginAccess2FA(_0x11a705,_0x4781d0);else{if(devices[_0x11a705][_0x7ab241(0x113)][_0x7ab241(0x1cd)]==![]&&devices[_0x11a705]['access'][_0x7ab241(0x152)]==_0x7ab241(0x225))_0x4d3940[_0x7ab241(0x177)](_0x7ab241(0x1bf),{'access':devices[_0x11a705]['access']});else devices[_0x11a705][_0x7ab241(0x113)]['allow']&&devices[_0x11a705]['access'][_0x7ab241(0x152)]==_0x7ab241(0x194)&&(getClientsWithUuid(_0x11a705)[_0x7ab241(0x1f1)](_0x2da12a=>{setAccess(_0x2da12a);}),setTokenRefresh(_0x11a705),setSessionTimeout(_0x7ab241(0x12b),_0x11a705));}}else logging(_0x7ab241(0x103));}),_0x4d3940['on'](_0x13d40e(0x22d),()=>{resetPassword();}),_0x4d3940['on'](_0x13d40e(0x205),_0x557aa4=>{removeClient(_0x4d3940['id']);});}}});}function initClient(_0x44997c){const _0x1ebd39=_0x3edd8a;if(_0x44997c!=_0x1ebd39(0x1de)&&config['apiKey']!=''){if(pid[_0x44997c])pid[_0x44997c][_0x1ebd39(0x141)]({'function':'initclient','args':null});}}function getSocket(_0xea8b35){const _0x58f3ed=_0x3edd8a;return io[_0x58f3ed(0x1a6)][_0x58f3ed(0x1a6)][_0x58f3ed(0x137)](_0xea8b35);}function setAccess(_0x2ee04e){const _0x15d34f=_0x3edd8a,_0xa5a103=getSocket(_0x2ee04e['id']),_0x2de292=_0x2ee04e[_0x15d34f(0x20e)],_0x18d785=_0x2ee04e[_0x15d34f(0x12c)];devices[_0x2de292][_0x15d34f(0x113)]=validateAccess(devices[_0x2de292][_0x15d34f(0x113)][_0x15d34f(0x131)],_0x2de292),_0xa5a103[_0x15d34f(0x239)](_0x2de292);if(devices[_0x2de292][_0x15d34f(0x113)][_0x15d34f(0x1cd)]){_0xa5a103[_0x15d34f(0x239)](_0x18d785);if(_0x18d785==_0x15d34f(0x1de))initializeSocketBotManager(_0xa5a103);else initializeSocketBot(_0xa5a103);initClient(_0x18d785);}devices[_0x2de292][_0x15d34f(0x113)]['token']&&devices[_0x2de292][_0x15d34f(0x113)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x2de292),devices[_0x2de292][_0x15d34f(0x113)][_0x15d34f(0x131)]&&devices[_0x2de292][_0x15d34f(0x113)][_0x15d34f(0x152)]==_0x15d34f(0x234)&&setSessionTimeout('login',_0x2de292),_0xa5a103[_0x15d34f(0x177)](_0x15d34f(0x1bf),{'status':_0x2ee04e[_0x15d34f(0x227)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2de292]['access'],'externalip':devices[_0x2de292]['ip'],'publicKey':secure['publicKey']}),devices[_0x2de292][_0x15d34f(0x113)]['allow']==![]&&devices[_0x2de292][_0x15d34f(0x113)][_0x15d34f(0x152)]=='2FA\x20required'&&temporaryAccess2FA(_0x2de292,devices[_0x2de292]['ip']);}function setSessionTimeout(_0x4f16a6,_0x340eb3){const _0x1e818b=_0x3edd8a;let _0x1ff6c9;if(_0x4f16a6==_0x1e818b(0x12b))_0x1ff6c9=loginExpiry*0x3c*0x3e8;else _0x1ff6c9=devices[_0x340eb3][_0x1e818b(0x216)][_0x1e818b(0x14c)]*0x3c*0x3e8-(new Date()[_0x1e818b(0x198)]()-devices[_0x340eb3][_0x1e818b(0x216)][_0x1e818b(0x1c1)]);if(devices[_0x340eb3][_0x1e818b(0x10f)])clearTimeout(devices[_0x340eb3][_0x1e818b(0x10f)]);devices[_0x340eb3][_0x1e818b(0x10f)]=setTimeout(()=>{const _0x33a96f=_0x1e818b;if(devices[_0x340eb3]['pidRefreshToken'])clearTimeout(devices[_0x340eb3][_0x33a96f(0x233)]);removeSocketListeners(_0x340eb3),addBlacklist(_0x340eb3),devices[_0x340eb3]['telegramIpApproval']=null,devices[_0x340eb3]['telegram2FaApproval']=null,devices[_0x340eb3][_0x33a96f(0x113)][_0x33a96f(0x131)]=null,devices[_0x340eb3][_0x33a96f(0x113)]=validateAccess(devices[_0x340eb3]['access'][_0x33a96f(0x131)],_0x340eb3),!(devices[_0x340eb3][_0x33a96f(0x113)]['allow']&&devices[_0x340eb3][_0x33a96f(0x113)][_0x33a96f(0x152)]=='login\x20not\x20required')&&(_0x4f16a6=='login'?io['to'](_0x340eb3)[_0x33a96f(0x177)](_0x33a96f(0x1bf),{'access':{'allow':![],'reason':_0x33a96f(0x171),'token':null}}):io['to'](_0x340eb3)[_0x33a96f(0x177)](_0x33a96f(0x1bf),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x340eb3]['access'][_0x33a96f(0x131)]=null;},_0x1ff6c9);}function setTokenRefresh(_0x3aadeb){const _0x486b77=_0x3edd8a;if(devices[_0x3aadeb][_0x486b77(0x233)])clearTimeout(devices[_0x3aadeb][_0x486b77(0x233)]);devices[_0x3aadeb][_0x486b77(0x233)]=setTimeout(()=>{const _0x276695=_0x486b77;getClientsWithUuid(_0x3aadeb)[_0x276695(0x184)]!=0x0?(devices[_0x3aadeb][_0x276695(0x113)]=refreshToken(_0x3aadeb),io['to'](_0x3aadeb)[_0x276695(0x177)](_0x276695(0x1bf),{'status':_0x276695(0x1f7),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3aadeb]['access'],'externalip':devices[_0x3aadeb]['ip'],'publicKey':secure['publicKey']}),setTokenRefresh(_0x3aadeb)):clearTimeout(devices[_0x3aadeb][_0x276695(0x233)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5dd125){const _0x422304=_0x3edd8a,_0x15d508=getClient(_0x5dd125['id'])[_0x422304(0x20e)];_0x5dd125['emit'](_0x422304(0x146),config),_0x5dd125['emit'](_0x422304(0x1a0),cleanSettings()),_0x5dd125['on']('add-bot',_0x48bc96=>{const _0x1e2b78=_0x422304;if(validateAccess(_0x48bc96,_0x15d508)['allow'])addBot();else logging(_0x1e2b78(0x1bc));}),_0x5dd125['on'](_0x422304(0x1e7),(_0x476c5,_0x399dea)=>{const _0x40adb7=_0x422304;if(validateAccess(_0x399dea,_0x15d508)['allow'])toggleBot(_0x476c5['botID'],_0x476c5[_0x40adb7(0x1bf)],_0x476c5[_0x40adb7(0x18a)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5dd125['on'](_0x422304(0x187),(_0x3b5218,_0x4effef)=>{const _0x52b64c=_0x422304;if(validateAccess(_0x4effef,_0x15d508)[_0x52b64c(0x1cd)])deleteBot(_0x3b5218);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5dd125['on'](_0x422304(0x16e),(_0x4f99ec,_0x505708)=>{const _0x237817=_0x422304;if(validateAccess(_0x505708,_0x15d508)[_0x237817(0x1cd)])storeSettings(_0x4f99ec,!![]);else logging(_0x237817(0x20d));}),_0x5dd125['on']('update-bb',(_0x732a9f,_0x99de59)=>{const _0x1f1112=_0x422304;if(validateAccess(_0x99de59,_0x15d508)[_0x1f1112(0x1cd)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5dd125['on'](_0x422304(0x1ff),_0x214a6a=>{const _0x4d6549=_0x422304;if(validateAccess(_0x214a6a,_0x15d508)[_0x4d6549(0x1cd)]){if(devices[_0x15d508][_0x4d6549(0x233)])clearTimeout(devices[_0x15d508]['pidRefreshToken']);if(devices[_0x15d508][_0x4d6549(0x10f)])clearTimeout(devices[_0x15d508][_0x4d6549(0x10f)]);removeSocketListeners(getClient(_0x5dd125['id'])[_0x4d6549(0x20e)]),addBlacklist(_0x15d508),devices[_0x15d508][_0x4d6549(0x216)]=null,devices[_0x15d508][_0x4d6549(0x1d8)]=null,devices[_0x15d508][_0x4d6549(0x113)][_0x4d6549(0x131)]=null,io['to'](getClient(_0x5dd125['id'])[_0x4d6549(0x20e)])[_0x4d6549(0x177)]('status',{'access':{'allow':![],'reason':_0x4d6549(0x1df),'token':null}});}else logging(_0x4d6549(0x157));});}function initializeSocketBot(_0x126908){const _0x5034b5=_0x3edd8a,_0x27475c=getClient(_0x126908['id'])[_0x5034b5(0x12c)],_0x26f82e=getClient(_0x126908['id'])['uuid'];_0x126908['on']('get-logs',(_0x516b08,_0x2696d4)=>{const _0x7cba31=_0x5034b5;if(validateAccess(_0x2696d4,_0x26f82e)[_0x7cba31(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c]['send']({'function':_0x7cba31(0x218),'args':_0x516b08});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x126908['on'](_0x5034b5(0x12f),(_0x120c4c,_0x3241c8)=>{const _0x540e64=_0x5034b5;if(validateAccess(_0x3241c8,_0x26f82e)[_0x540e64(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c]['send']({'function':_0x540e64(0x10a),'args':_0x120c4c});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x126908['on'](_0x5034b5(0x11d),(_0x1676c1,_0x22b292)=>{const _0x60d5a1=_0x5034b5;if(validateAccess(_0x22b292,_0x26f82e)[_0x60d5a1(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c][_0x60d5a1(0x141)]({'function':_0x60d5a1(0x172),'args':_0x1676c1});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x126908['on'](_0x5034b5(0x213),(_0x18083f,_0x2476d9)=>{const _0x5ae48c=_0x5034b5;if(validateAccess(_0x2476d9,_0x26f82e)[_0x5ae48c(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c][_0x5ae48c(0x141)]({'function':_0x5ae48c(0x201),'args':_0x18083f});}else logging(_0x5ae48c(0x21d));}),_0x126908['on'](_0x5034b5(0x1d9),_0x23620f=>{const _0xdd3282=_0x5034b5;if(validateAccess(_0x23620f,_0x26f82e)['allow']){if(pid[_0x27475c])pid[_0x27475c][_0xdd3282(0x141)]({'function':_0xdd3282(0x104),'args':null});}else logging(_0xdd3282(0x17f));}),_0x126908['on'](_0x5034b5(0x16b),(_0x16c6b4,_0x25050f)=>{const _0x5d9b40=_0x5034b5;if(validateAccess(_0x25050f,_0x26f82e)[_0x5d9b40(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c][_0x5d9b40(0x141)]({'function':_0x5d9b40(0x130),'args':_0x16c6b4});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x126908['on'](_0x5034b5(0x17e),_0xf891a8=>{const _0x48fce8=_0x5034b5;if(validateAccess(_0xf891a8,_0x26f82e)[_0x48fce8(0x1cd)]){if(pid[_0x27475c])pid[_0x27475c]['send']({'function':_0x48fce8(0x1c6),'args':null});}else logging(_0x48fce8(0x153));}),_0x126908['on']('logout',_0x3a50bb=>{const _0x93dcf=_0x5034b5;if(validateAccess(_0x3a50bb,_0x26f82e)[_0x93dcf(0x1cd)]){if(devices[_0x26f82e][_0x93dcf(0x233)])clearTimeout(devices[_0x26f82e][_0x93dcf(0x233)]);if(devices[_0x26f82e][_0x93dcf(0x10f)])clearTimeout(devices[_0x26f82e]['pidExpireLogin']);removeSocketListeners(getClient(_0x126908['id'])[_0x93dcf(0x20e)]),addBlacklist(_0x26f82e),devices[_0x26f82e]['telegramIpApproval']=null,devices[_0x26f82e][_0x93dcf(0x1d8)]=null,devices[_0x26f82e]['access'][_0x93dcf(0x131)]=null,io['to'](getClient(_0x126908['id'])[_0x93dcf(0x20e)])['emit'](_0x93dcf(0x1bf),{'access':{'allow':![],'reason':_0x93dcf(0x1df),'token':null}});}else logging(_0x93dcf(0x157));});}function removeSocketListeners(_0x5317c9){const _0x1f0313=_0x3edd8a;getClientsWithUuid(_0x5317c9)[_0x1f0313(0x1f1)](_0x31308d=>{getSocket(_0x31308d['id'])['removeAllListeners']();});}function cleanSettings(){const _0x538606=_0x3edd8a;let _0x497998=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x497998={..._0x497998,'telegramToken':_0x538606(0x1ac)}),settings[_0x538606(0x1be)]&&settings['bbPassword']!=''&&(_0x497998={..._0x497998,'bbPassword':_0x538606(0x1ac)}),_0x497998;}function updateBB(){const _0x32439c=_0x3edd8a;installingUpdate=!![],config[_0x32439c(0x1f1)](_0x5976a2=>{stopBot(_0x5976a2);}),process['send']({'update':!![]},_0x2f7688=>{});}function startBot(_0x5d24fd,_0x381280,_0x46b415){const _0x3ff198=_0x3edd8a;let _0x52663a=![];const _0x474421=_0x5d24fd[0x0];_0x381280={..._0x381280,'stdio':['inherit',_0x3ff198(0x13d),'inherit','ipc']},pid[_0x474421]=childProcess[_0x3ff198(0x193)](botfile,_0x5d24fd,_0x381280),pid[_0x474421]['on'](_0x3ff198(0x176),_0x3155a1=>{const _0x592561=_0x3ff198;switch(Object[_0x592561(0x208)](_0x3155a1)[0x0]){case _0x592561(0x1a3):updateBotName(_0x474421,_0x3155a1[_0x592561(0x1a3)]);break;case _0x592561(0x1bf):updateStatus(_0x474421,_0x3155a1[_0x592561(0x1bf)]);break;case _0x592561(0x18a):updateLive(_0x474421,_0x3155a1['live']);break;case _0x592561(0x110):updateLive(_0x474421,_0x3155a1['started']),io['to'](_0x474421)['emit']('status',{'access':{'allow':![],'reason':_0x592561(0x214),'token':null}});break;case'stop':_0x3155a1['stop']=='restart'&&stopBot(_0x474421);_0x3155a1[_0x592561(0x1ce)]==_0x592561(0x129)&&toggleBot(_0x474421,'disabled',_0x592561(0x1f2));break;case _0x592561(0x115):sendTelegram(_0x474421,_0x3155a1[_0x592561(0x115)]);break;case'function':io['to'](_0x474421)[_0x592561(0x177)](_0x3155a1['function'],_0x3155a1[_0x592561(0x1fd)]);break;}}),pid[_0x474421]['on']('error',function(_0x4ba7ac){if(_0x52663a)return;_0x52663a=!![],_0x46b415(_0x4ba7ac);}),pid[_0x474421]['on'](_0x3ff198(0x1e4),function(_0x19169b){const _0x151c35=_0x3ff198;if(installingUpdate)return;if(_0x52663a)return;_0x52663a=!![],_0x46b415(null);const _0x4d3421=dbConfig['get'](_0x151c35(0x146))['find']({'botID':_0x474421})[_0x151c35(0x180)]();_0x4d3421&&(_0x4d3421[_0x151c35(0x1bf)]==_0x151c35(0x166)||_0x4d3421[_0x151c35(0x1bf)]=='new')&&(updateLive(_0x474421,_0x151c35(0x1f2)),logging(_0x151c35(0x1f8)+_0x474421),startBot([_0x474421,userID],{'cwd':bbpath},function(_0x20787e){if(_0x20787e)logging(_0x20787e);}));});}function stopBot(_0x1ab3eb){const _0x52c619=_0x3edd8a;getClientsWithBotID(_0x1ab3eb)[_0x52c619(0x1f1)](_0x5a98e4=>{const _0x8980e7=_0x52c619;getSocket(_0x5a98e4['id'])[_0x8980e7(0x205)](!![]),removeClient(_0x5a98e4['id']);});if(pid[_0x1ab3eb])pid[_0x1ab3eb]['kill']();}function addBot(){const _0x5187d9=_0x3edd8a;let _0x124c46;for(let _0x5e35ed=0x1;_0x5e35ed<0x3e9;_0x5e35ed++){_0x124c46=_0x5e35ed[_0x5187d9(0x119)]()[_0x5187d9(0x21f)](0x3,'0');let _0x288378=config[_0x5187d9(0x19f)](_0x4090ea=>_0x4090ea[_0x5187d9(0x207)]==_0x124c46);if(!_0x288378)break;}if(_0x124c46===_0x5187d9(0x1b3)){logging(_0x5187d9(0x13b));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x124c46),dbConfig['get']('bots')[_0x5187d9(0x1d1)]({'botID':_0x124c46,'botname':_0x5187d9(0x133)+_0x124c46,'status':_0x5187d9(0x167),'live':''})[_0x5187d9(0x121)](),startBot([_0x124c46,userID],{'cwd':bbpath},function(_0x5c6921){if(_0x5c6921)logging(_0x5c6921);}),config=getConfiguration(),io['to'](_0x5187d9(0x1de))[_0x5187d9(0x177)]('bots',config);}function deleteBot(_0x3c6036){const _0x548ae9=_0x3edd8a;getClientsWithBotID(_0x3c6036)[_0x548ae9(0x1f1)](_0x59814c=>{getSocket(_0x59814c['id'])['disconnect'](!![]),removeClient(_0x59814c['id']);}),dbConfig[_0x548ae9(0x137)]('bots')['remove']({'botID':_0x3c6036})[_0x548ae9(0x121)](),logging('deleted\x20Bot\x20'+_0x3c6036),stopBot(_0x3c6036);try{fs[_0x548ae9(0x195)](path[_0x548ae9(0x239)](configpath,_0x548ae9(0x1bd)+_0x3c6036+_0x548ae9(0x120))),fs[_0x548ae9(0x195)](path[_0x548ae9(0x239)](configpath,'bot-'+_0x3c6036+_0x548ae9(0x105))),fs['unlinkSync'](path[_0x548ae9(0x239)](configpath,_0x548ae9(0x1bd)+_0x3c6036+_0x548ae9(0x19a))),fs[_0x548ae9(0x195)](path['join'](configpath,_0x548ae9(0x1bd)+_0x3c6036+_0x548ae9(0x1ed)));}catch(_0x3cb140){if(_0x3cb140)logging(_0x548ae9(0x1cc),_0x3cb140);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x548ae9(0x146),config);}function toggleBot(_0xa6a00b,_0x487bdc,_0x3767ed){const _0x2c680e=_0x3edd8a;dbConfig[_0x2c680e(0x137)](_0x2c680e(0x146))[_0x2c680e(0x19f)]({'botID':_0xa6a00b})[_0x2c680e(0x1a4)]({'status':_0x487bdc})[_0x2c680e(0x1a4)]({'live':_0x3767ed})[_0x2c680e(0x121)]();if(_0x487bdc==_0x2c680e(0x166)||_0x487bdc==_0x2c680e(0x167))logging(_0x2c680e(0x108)+_0xa6a00b),startBot([_0xa6a00b,userID],{'cwd':bbpath},function(_0x267f8c){if(_0x267f8c)logging(_0x267f8c);});else(_0x487bdc==_0x2c680e(0x1ec)||_0x487bdc==_0x2c680e(0x1d5))&&(logging(_0x2c680e(0x19e)+_0xa6a00b),stopBot(_0xa6a00b));config=getConfiguration(),io['to'](_0x2c680e(0x1de))[_0x2c680e(0x177)](_0x2c680e(0x146),config);}function toggleStatus(_0x45fe1c){const _0x2659af=_0x3edd8a;let _0x29909a=dbConfig['get'](_0x2659af(0x146))[_0x2659af(0x19f)]({'botID':_0x45fe1c})['value'](),_0x54b587;if(_0x29909a[_0x2659af(0x1bf)]===_0x2659af(0x166))_0x54b587='disabled';else{if(_0x29909a['status']===_0x2659af(0x167))_0x54b587=_0x2659af(0x1d5);else{if(_0x29909a[_0x2659af(0x1bf)]==='new-disabled')_0x54b587=_0x2659af(0x167);else{if(_0x29909a[_0x2659af(0x1bf)]==='disabled')_0x54b587=_0x2659af(0x166);}}}return _0x54b587;}function updateStatus(_0x576eba,_0x4b0d2c){const _0x4a302e=_0x3edd8a;dbConfig['get']('bots')[_0x4a302e(0x19f)]({'botID':_0x576eba})[_0x4a302e(0x1a4)]({'status':_0x4b0d2c})[_0x4a302e(0x121)](),config=getConfiguration(),io['to'](_0x4a302e(0x1de))[_0x4a302e(0x177)](_0x4a302e(0x146),config);}function updateLive(_0x1446f3,_0x57911f){const _0x2af6ed=_0x3edd8a;dbConfig[_0x2af6ed(0x137)](_0x2af6ed(0x146))[_0x2af6ed(0x19f)]({'botID':_0x1446f3})[_0x2af6ed(0x1a4)]({'live':_0x57911f})[_0x2af6ed(0x121)](),config=getConfiguration(),io['to'](_0x2af6ed(0x1de))['emit']('bots',config);}function updateBotName(_0x1ca498,_0x2f0fb7){const _0x204f36=_0x3edd8a;dbConfig[_0x204f36(0x137)](_0x204f36(0x146))[_0x204f36(0x19f)]({'botID':_0x1ca498})[_0x204f36(0x1a4)]({'botname':_0x2f0fb7})[_0x204f36(0x121)](),config=getConfiguration(),io['to']('botmanager')[_0x204f36(0x177)]('bots',config);}function telegramError(_0x59d364){const _0x1eddb1=_0x3edd8a;console['log'](getTimeStamp()+_0x1eddb1(0x1b6));}function validateTelegram(_0x475516){const _0x51cd54=_0x3edd8a;if(_0x475516[_0x51cd54(0x143)][_0x51cd54(0x15a)]!=settings[_0x51cd54(0x13c)]&&'@'+_0x475516['from'][_0x51cd54(0x15a)]!=settings['telegramUsername'])return tgBot[_0x51cd54(0x22f)](_0x475516[_0x51cd54(0x15d)]['id'],_0x51cd54(0x111),{'parse_mode':_0x51cd54(0x1b4)})[_0x51cd54(0x1ea)](_0x299ef1=>{telegramError(_0x299ef1);}),![];return!![];}async function initTelegram(){const _0x4568f0=_0x3edd8a;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4568f0(0x211)],{'polling':!![]});let _0x1767db=_0x4568f0(0x15b);_0x1767db+='\x0a',_0x1767db+='/enable\x20-\x20enable\x20notifications\x0a',_0x1767db+='/disable\x20-\x20disable\x20notifications\x0a',_0x1767db+=_0x4568f0(0x14a),_0x1767db+=_0x4568f0(0x15e),_0x1767db+=_0x4568f0(0x190),_0x1767db+=_0x4568f0(0x21e),_0x1767db+=_0x4568f0(0x160),_0x1767db+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x5e33e4=_0x4568f0(0x210);_0x5e33e4+='\x0a',_0x5e33e4+=_0x1767db,tgBot[_0x4568f0(0x17c)](/\/start/,_0x4944d9=>{const _0x29d89b=_0x4568f0;if(!validateTelegram(_0x4944d9))return;if(settings['telegramChatId']!=_0x4944d9[_0x29d89b(0x15d)]['id'])updateSetting('telegramChatId',_0x4944d9[_0x29d89b(0x15d)]['id']);updateSetting(_0x29d89b(0x1dc),!![]),tgBot[_0x29d89b(0x22f)](_0x4944d9[_0x29d89b(0x15d)]['id'],_0x5e33e4)[_0x29d89b(0x1ea)](_0x4773af=>{telegramError(_0x4773af);});}),tgBot[_0x4568f0(0x17c)](/\/enable/,_0xe2eb89=>{const _0x4a563f=_0x4568f0;if(!validateTelegram(_0xe2eb89))return;if(settings[_0x4a563f(0x100)]!=_0xe2eb89[_0x4a563f(0x15d)]['id'])updateSetting(_0x4a563f(0x100),_0xe2eb89[_0x4a563f(0x15d)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4a563f(0x22f)](_0xe2eb89[_0x4a563f(0x15d)]['id'],_0x4a563f(0x1e6))[_0x4a563f(0x1ea)](_0x41e31b=>{telegramError(_0x41e31b);});}),tgBot[_0x4568f0(0x17c)](/\/config/,async _0x196a7c=>{const _0x49b6b4=_0x4568f0;if(!validateTelegram(_0x196a7c))return;tgBot[_0x49b6b4(0x125)](_0x49b6b4(0x188)),tgBot['sendMessage'](_0x196a7c[_0x49b6b4(0x15d)]['id'],_0x49b6b4(0x132),{'reply_markup':{'inline_keyboard':[[{'text':_0x49b6b4(0x199),'callback_data':_0x49b6b4(0xfa)},{'text':_0x49b6b4(0x217),'callback_data':_0x49b6b4(0x1d7)},{'text':'All','callback_data':'all'}]]}})[_0x49b6b4(0x1ea)](_0x70a373=>{telegramError(_0x70a373);}),tgBot['on'](_0x49b6b4(0x188),async _0x25a2e3=>{const _0xdc8a0a=_0x49b6b4,_0x9576f3=_0x25a2e3[_0xdc8a0a(0x183)],_0x206abf=_0x25a2e3[_0xdc8a0a(0x176)];tgBot[_0xdc8a0a(0x1a1)](_0x25a2e3['id'])[_0xdc8a0a(0x159)](async()=>{const _0x4f8331=_0xdc8a0a;_0x9576f3==_0x4f8331(0xfa)&&(updateSetting('telegramEvents',_0x4f8331(0xfa)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4f8331(0x22f)](_0x206abf[_0x4f8331(0x15d)]['id'],_0x4f8331(0x154))[_0x4f8331(0x1ea)](_0xad710c=>{telegramError(_0xad710c);}));_0x9576f3=='alerts'&&(updateSetting(_0x4f8331(0x1c8),_0x4f8331(0x1d7)),updateSetting(_0x4f8331(0x1dc),!![]),await tgBot['sendMessage'](_0x206abf[_0x4f8331(0x15d)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x4f8331(0x1ea)](_0x258f5a=>{telegramError(_0x258f5a);}));_0x9576f3=='all'&&(updateSetting(_0x4f8331(0x1c8),_0x4f8331(0x191)),updateSetting(_0x4f8331(0x1dc),!![]),await tgBot['sendMessage'](_0x206abf[_0x4f8331(0x15d)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x1b460c=>{telegramError(_0x1b460c);}));if(!settings[_0x4f8331(0x100)])tgBot[_0x4f8331(0x22f)](_0x206abf[_0x4f8331(0x15d)]['id'],_0x4f8331(0x1e0))['catch'](_0x5b90c8=>{telegramError(_0x5b90c8);});}),tgBot[_0xdc8a0a(0x125)](_0xdc8a0a(0x188));});}),tgBot['onText'](/\/status/,_0x42035a=>{const _0x27ca1c=_0x4568f0;if(!validateTelegram(_0x42035a))return;let _0x4895bc=_0x27ca1c(0x164);config['forEach'](_0x2e1651=>{const _0x97d590=_0x27ca1c;_0x4895bc+='Bot\x20'+_0x2e1651[_0x97d590(0x207)]+_0x97d590(0x12d)+_0x2e1651[_0x97d590(0x1a3)]+':\x20'+_0x2e1651[_0x97d590(0x1bf)]+_0x97d590(0x1eb)+_0x2e1651[_0x97d590(0x18a)]+'\x0a';}),_0x4895bc+='\x0a',_0x4895bc+=_0x27ca1c(0x1f0),_0x4895bc+=!settings[_0x27ca1c(0x1dc)]?_0x27ca1c(0x1ae):_0x27ca1c(0x112),_0x4895bc+=settings[_0x27ca1c(0x1dc)]?settings[_0x27ca1c(0x1c8)]==_0x27ca1c(0x191)?_0x27ca1c(0xff):_0x27ca1c(0x1e2)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x27ca1c(0x22f)](_0x42035a['chat']['id'],_0x4895bc,{'parse_mode':_0x27ca1c(0x1b4)})['catch'](_0x28e45d=>{telegramError(_0x28e45d);});}),tgBot[_0x4568f0(0x17c)](/\/restart/,_0x3291f3=>{const _0x36bdd2=_0x4568f0;if(!validateTelegram(_0x3291f3))return;tgBot[_0x36bdd2(0x125)](_0x36bdd2(0x188));const _0x350c33=getEnabledBots();if(_0x350c33['length']==0x0)tgBot[_0x36bdd2(0x22f)](_0x3291f3[_0x36bdd2(0x15d)]['id'],_0x36bdd2(0x209))['catch'](_0x44a20f=>{telegramError(_0x44a20f);});else{if(_0x350c33[_0x36bdd2(0x184)]>0x1)_0x350c33[_0x36bdd2(0x1d1)]({'botID':_0x36bdd2(0x191)});let _0x4c70c7=[],_0x10a6ba=[];const _0x39793f=_0x350c33[_0x36bdd2(0x184)]%0x4==0x0||_0x350c33[_0x36bdd2(0x184)]%0x4==0x3||_0x350c33[_0x36bdd2(0x184)]%0x3==0x1?0x4:0x3;let _0x490adf=0x0;_0x350c33['forEach']((_0x1ffca1,_0x2696b6)=>{const _0xea7ba3=_0x36bdd2;if(_0x2696b6%_0x39793f==0x0)_0x10a6ba=[];_0x10a6ba[_0xea7ba3(0x1d1)]({'text':_0x1ffca1['botID']==_0xea7ba3(0x191)?'All\x20bots':_0xea7ba3(0x133)+_0x1ffca1['botID'],'callback_data':_0x1ffca1['botID']}),_0x2696b6%_0x39793f==0x0&&(_0x4c70c7[_0x490adf]=_0x10a6ba,_0x490adf++);}),tgBot[_0x36bdd2(0x22f)](_0x3291f3[_0x36bdd2(0x15d)]['id'],_0x36bdd2(0x102),{'reply_markup':{'inline_keyboard':_0x4c70c7}})['catch'](_0x2c96b7=>{telegramError(_0x2c96b7);}),tgBot['on'](_0x36bdd2(0x188),async _0x2efcac=>{const _0x497fdd=_0x36bdd2,_0x1235de=_0x2efcac[_0x497fdd(0x183)],_0x1e4b24=_0x2efcac[_0x497fdd(0x176)];tgBot[_0x497fdd(0x1a1)](_0x2efcac['id'])[_0x497fdd(0x159)](async()=>{const _0x2e717a=_0x497fdd;if(_0x1235de==_0x2e717a(0x191)){if(settings[_0x2e717a(0x1c8)]==_0x2e717a(0xfa))tgBot[_0x2e717a(0x22f)](_0x1e4b24[_0x2e717a(0x15d)]['id'],_0x2e717a(0x10e))[_0x2e717a(0x1ea)](_0x130329=>{telegramError(_0x130329);});config[_0x2e717a(0x1f1)](_0x16baa3=>{stopBot(_0x16baa3['botID']);});}else{if(settings[_0x2e717a(0x1c8)]=='orders')tgBot[_0x2e717a(0x22f)](_0x1e4b24[_0x2e717a(0x15d)]['id'],_0x2e717a(0x156)+_0x1235de)[_0x2e717a(0x1ea)](_0xdeb0b6=>{telegramError(_0xdeb0b6);});stopBot(_0x1235de);}}),tgBot[_0x497fdd(0x125)](_0x497fdd(0x188));});}}),tgBot[_0x4568f0(0x17c)](/\/on/,_0x58b9ca=>{const _0x15aae0=_0x4568f0;if(!validateTelegram(_0x58b9ca))return;tgBot[_0x15aae0(0x125)](_0x15aae0(0x188));const _0x191a79=getDisabledBots();if(_0x191a79[_0x15aae0(0x184)]==0x0)tgBot['sendMessage'](_0x58b9ca['chat']['id'],_0x15aae0(0x236))['catch'](_0x2fe98c=>{telegramError(_0x2fe98c);});else{if(_0x191a79[_0x15aae0(0x184)]>0x1)_0x191a79[_0x15aae0(0x1d1)]({'botID':_0x15aae0(0x191)});let _0x5a9d9f=[],_0x400285=[];const _0x11609a=_0x191a79[_0x15aae0(0x184)]%0x4==0x0||_0x191a79[_0x15aae0(0x184)]%0x4==0x3||_0x191a79[_0x15aae0(0x184)]%0x3==0x1?0x4:0x3;let _0x99a9d1=0x0;_0x191a79[_0x15aae0(0x1f1)]((_0x286e0f,_0x5ddd99)=>{const _0x9e4b61=_0x15aae0;if(_0x5ddd99%_0x11609a==0x0)_0x400285=[];_0x400285[_0x9e4b61(0x1d1)]({'text':_0x286e0f[_0x9e4b61(0x207)]=='all'?'All\x20bots':_0x9e4b61(0x133)+_0x286e0f[_0x9e4b61(0x207)],'callback_data':_0x286e0f[_0x9e4b61(0x207)]}),_0x5ddd99%_0x11609a==0x0&&(_0x5a9d9f[_0x99a9d1]=_0x400285,_0x99a9d1++);}),tgBot[_0x15aae0(0x22f)](_0x58b9ca[_0x15aae0(0x15d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x5a9d9f}})[_0x15aae0(0x1ea)](_0x5a0c18=>{telegramError(_0x5a0c18);}),tgBot['on']('callback_query',async _0x5e5910=>{const _0xf8f73=_0x15aae0,_0x116338=_0x5e5910[_0xf8f73(0x183)],_0x305144=_0x5e5910[_0xf8f73(0x176)];tgBot['answerCallbackQuery'](_0x5e5910['id'])[_0xf8f73(0x159)](async()=>{const _0x2a0ca3=_0xf8f73;if(_0x116338=='all'){if(settings[_0x2a0ca3(0x1c8)]=='orders')tgBot['sendMessage'](_0x305144[_0x2a0ca3(0x15d)]['id'],_0x2a0ca3(0x1e9))[_0x2a0ca3(0x1ea)](_0x377c06=>{telegramError(_0x377c06);});_0x191a79[_0x2a0ca3(0x1f1)](_0x54591d=>{const _0x1d9ecc=_0x2a0ca3;if(_0x54591d[_0x1d9ecc(0x207)]!=_0x1d9ecc(0x191))toggleBot(_0x54591d[_0x1d9ecc(0x207)],toggleStatus(_0x54591d[_0x1d9ecc(0x207)]),'stopped');});}else{if(settings[_0x2a0ca3(0x1c8)]==_0x2a0ca3(0xfa))tgBot[_0x2a0ca3(0x22f)](_0x305144[_0x2a0ca3(0x15d)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x116338)[_0x2a0ca3(0x1ea)](_0x1397a5=>{telegramError(_0x1397a5);});toggleBot(_0x116338,toggleStatus(_0x116338),_0x2a0ca3(0x1f2));}}),tgBot[_0xf8f73(0x125)](_0xf8f73(0x188));});}}),tgBot['onText'](/\/off/,_0x4ef906=>{const _0x3d472b=_0x4568f0;if(!validateTelegram(_0x4ef906))return;tgBot[_0x3d472b(0x125)]('callback_query');const _0x4f491b=getEnabledBots();if(_0x4f491b[_0x3d472b(0x184)]==0x0)tgBot[_0x3d472b(0x22f)](_0x4ef906[_0x3d472b(0x15d)]['id'],_0x3d472b(0x209))[_0x3d472b(0x1ea)](_0x43f4cc=>{telegramError(_0x43f4cc);});else{if(_0x4f491b['length']>0x1)_0x4f491b[_0x3d472b(0x1d1)]({'botID':_0x3d472b(0x191)});let _0x5881b7=[],_0xff31c=[];const _0x405ea8=_0x4f491b[_0x3d472b(0x184)]%0x4==0x0||_0x4f491b[_0x3d472b(0x184)]%0x4==0x3||_0x4f491b[_0x3d472b(0x184)]%0x3==0x1?0x4:0x3;let _0x20fc4a=0x0;_0x4f491b['forEach']((_0x4142e9,_0x1b0c7a)=>{const _0x3885fe=_0x3d472b;if(_0x1b0c7a%_0x405ea8==0x0)_0xff31c=[];_0xff31c[_0x3885fe(0x1d1)]({'text':_0x4142e9['botID']=='all'?_0x3885fe(0x107):_0x3885fe(0x133)+_0x4142e9[_0x3885fe(0x207)],'callback_data':_0x4142e9[_0x3885fe(0x207)]}),_0x1b0c7a%_0x405ea8==0x0&&(_0x5881b7[_0x20fc4a]=_0xff31c,_0x20fc4a++);}),tgBot[_0x3d472b(0x22f)](_0x4ef906[_0x3d472b(0x15d)]['id'],_0x3d472b(0x13f),{'reply_markup':{'inline_keyboard':_0x5881b7}})['catch'](_0x339daa=>{telegramError(_0x339daa);}),tgBot['on'](_0x3d472b(0x188),async _0x1bc227=>{const _0x5147dc=_0x3d472b,_0x1dba86=_0x1bc227[_0x5147dc(0x183)],_0x56a0d1=_0x1bc227[_0x5147dc(0x176)];tgBot[_0x5147dc(0x1a1)](_0x1bc227['id'])[_0x5147dc(0x159)](async()=>{const _0x45d0f8=_0x5147dc;if(_0x1dba86==_0x45d0f8(0x191)){if(settings[_0x45d0f8(0x1c8)]==_0x45d0f8(0xfa))tgBot[_0x45d0f8(0x22f)](_0x56a0d1[_0x45d0f8(0x15d)]['id'],_0x45d0f8(0x18d))[_0x45d0f8(0x1ea)](_0x41e951=>{telegramError(_0x41e951);});_0x4f491b[_0x45d0f8(0x1f1)](_0x35c890=>{const _0x54fd7b=_0x45d0f8;if(_0x35c890['botID']!=_0x54fd7b(0x191))toggleBot(_0x35c890[_0x54fd7b(0x207)],toggleStatus(_0x35c890[_0x54fd7b(0x207)]),_0x54fd7b(0x1f2));});}else{if(settings['telegramEvents']==_0x45d0f8(0xfa))tgBot[_0x45d0f8(0x22f)](_0x56a0d1[_0x45d0f8(0x15d)]['id'],_0x45d0f8(0x134)+_0x1dba86)[_0x45d0f8(0x1ea)](_0x3f8eeb=>{telegramError(_0x3f8eeb);});toggleBot(_0x1dba86,toggleStatus(_0x1dba86),_0x45d0f8(0x1f2));}}),tgBot[_0x5147dc(0x125)](_0x5147dc(0x188));});}}),tgBot['onText'](/\/disable/,_0x51895a=>{const _0x5ae17c=_0x4568f0;if(!validateTelegram(_0x51895a))return;tgBot['sendMessage'](_0x51895a[_0x5ae17c(0x15d)]['id'],'Notifications\x20disabled')['catch'](_0x241579=>{telegramError(_0x241579);}),updateSetting(_0x5ae17c(0x1dc),![]);}),tgBot[_0x4568f0(0x17c)](/\/help/,_0x2a69b3=>{const _0x325203=_0x4568f0;if(!validateTelegram(_0x2a69b3))return;tgBot[_0x325203(0x22f)](_0x2a69b3[_0x325203(0x15d)]['id'],_0x1767db)[_0x325203(0x1ea)](_0x35f615=>{telegramError(_0x35f615);});}),tgBot['on'](_0x4568f0(0x162),_0x412a8a=>{const _0x544759=_0x4568f0;_0x412a8a[_0x544759(0x119)]()[_0x544759(0x200)](_0x544759(0x168))&&(logging(_0x544759(0x20a)),tgBot[_0x544759(0x1ee)](),tgBot=null,io['to'](_0x544759(0x1de))[_0x544759(0x177)](_0x544759(0x174),_0x544759(0x20a)));}),process['once'](_0x4568f0(0x139),()=>{const _0x27856b=_0x4568f0;if(tgBot)tgBot[_0x27856b(0x1ee)]();process[_0x27856b(0x1e4)](0x1);}),process[_0x4568f0(0x237)](_0x4568f0(0x223),()=>{const _0x305142=_0x4568f0;if(tgBot)tgBot[_0x305142(0x1ee)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x45ffeb,_0x5f29ae){const _0x28250f=_0x3edd8a;if(settings[_0x28250f(0x1dc)]){if(settings[_0x28250f(0x1c8)]==_0x28250f(0x191)||(_0x5f29ae[_0x28250f(0x127)]==_0x28250f(0x16c)||_0x5f29ae[_0x28250f(0x127)]==_0x28250f(0x220))&&settings[_0x28250f(0x1c8)]==_0x28250f(0x1d7)||_0x5f29ae['type']==_0x28250f(0x148)&&settings[_0x28250f(0x1c8)]==_0x28250f(0xfa)){if(tgBot&&settings[_0x28250f(0x100)]){if(_0x5f29ae['showname'])tgBot['sendMessage'](settings[_0x28250f(0x100)],_0x5f29ae[_0x28250f(0x1a3)]+_0x28250f(0x1cf)+_0x5f29ae[_0x28250f(0x128)])[_0x28250f(0x1ea)](_0x2ab48e=>{telegramError(_0x2ab48e);});else tgBot[_0x28250f(0x22f)](settings[_0x28250f(0x100)],_0x28250f(0x133)+_0x45ffeb+_0x28250f(0x1cf)+_0x5f29ae[_0x28250f(0x128)])[_0x28250f(0x1ea)](_0x5c083d=>{telegramError(_0x5c083d);});}}}}function getDeviceWithIp(_0x1d5a7f){return devices['find'](_0xe2edf6=>_0xe2edf6['ip']===_0x1d5a7f);}function temporaryAccess2FA(_0x134430,_0x117d11){const _0x253141=_0x3edd8a;let _0x5c34bf=new Date(),_0x2663ec=![];if(lastIpApproval){if(_0x5c34bf-lastIpApproval<0x1388)_0x2663ec=!![];}lastIpApproval=new Date();if(_0x2663ec)return;tgBot&&settings[_0x253141(0x100)]&&(tgBot[_0x253141(0x125)]('callback_query'),tgBot[_0x253141(0x22f)](settings[_0x253141(0x100)],_0x253141(0x142)+normalizeIP(_0x117d11)[_0x253141(0x11b)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x253141(0x181),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x253141(0x13a),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x253141(0x1ea)](_0xa63d51=>{telegramError(_0xa63d51);}),tgBot['on'](_0x253141(0x188),async _0x122f0a=>{const _0x2bb24a=_0x253141,_0x13db74=_0x122f0a[_0x2bb24a(0x183)],_0x43b87d=_0x122f0a[_0x2bb24a(0x176)];tgBot[_0x2bb24a(0x1a1)](_0x122f0a['id'])[_0x2bb24a(0x159)](async()=>{const _0x1b7a74=_0x2bb24a;devices[_0x134430][_0x1b7a74(0x216)]={'clientip':_0x117d11,'timestamp':new Date()[_0x1b7a74(0x198)](),'expiry':_0x13db74},_0x13db74!=_0x1b7a74(0x1f9)?(await tgBot['sendMessage'](_0x43b87d[_0x1b7a74(0x15d)]['id'],_0x1b7a74(0x1f5)+_0x13db74+_0x1b7a74(0x170),{'parse_mode':_0x1b7a74(0x1b4)})[_0x1b7a74(0x1ea)](_0x5d4e38=>{telegramError(_0x5d4e38);}),io['to'](_0x134430)[_0x1b7a74(0x177)](_0x1b7a74(0x1bf),{'access':{'allow':![],'reason':_0x1b7a74(0x214),'token':null}})):(await tgBot[_0x1b7a74(0x22f)](_0x43b87d['chat']['id'],'Temporary\x20access\x20rejected')['catch'](_0x485e5e=>{telegramError(_0x485e5e);}),io['to'](_0x134430)['emit'](_0x1b7a74(0x1bf),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x2bb24a(0x125)](_0x2bb24a(0x188));}));}function loginAccess2FA(_0x34e866,_0x1beb38){const _0xc0e502=_0x3edd8a;tgBot&&settings[_0xc0e502(0x100)]&&(tgBot['removeListener'](_0xc0e502(0x188)),tgBot[_0xc0e502(0x22f)](settings['telegramChatId'],_0xc0e502(0x1a9)+normalizeIP(_0x1beb38)[_0xc0e502(0x11b)]+_0xc0e502(0x222),{'parse_mode':_0xc0e502(0x1b4),'reply_markup':{'inline_keyboard':[[{'text':_0xc0e502(0x10b),'callback_data':loginExpiry},{'text':'reject','callback_data':_0xc0e502(0x1f9)}]]}})[_0xc0e502(0x1ea)](_0x827ee7=>{telegramError(_0x827ee7);}),tgBot['on'](_0xc0e502(0x188),async _0x1c42b4=>{const _0x2f31e7=_0xc0e502,_0xad2ea=_0x1c42b4[_0x2f31e7(0x183)],_0x481ec1=_0x1c42b4[_0x2f31e7(0x176)];tgBot[_0x2f31e7(0x1a1)](_0x1c42b4['id'])[_0x2f31e7(0x159)](async()=>{const _0x521078=_0x2f31e7;devices[_0x34e866][_0x521078(0x1d8)]={'clientip':_0x1beb38,'timestamp':new Date()[_0x521078(0x198)](),'expiry':_0xad2ea},_0xad2ea!=_0x521078(0x1f9)?(await tgBot[_0x521078(0x22f)](_0x481ec1[_0x521078(0x15d)]['id'],_0x521078(0x20b),{'parse_mode':'HTML'})[_0x521078(0x1ea)](_0xcf1e06=>{telegramError(_0xcf1e06);}),io['to'](_0x34e866)[_0x521078(0x177)](_0x521078(0x1bf),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x481ec1[_0x521078(0x15d)]['id'],_0x521078(0x11a))[_0x521078(0x1ea)](_0x23e9fa=>{telegramError(_0x23e9fa);}),io['to'](_0x34e866)[_0x521078(0x177)](_0x521078(0x1bf),{'access':{'allow':![],'reason':_0x521078(0x19c),'token':null}}));}),tgBot[_0x2f31e7(0x125)](_0x2f31e7(0x188));}));}function getConfiguration(){const _0x5b9e17=_0x3edd8a;return dbConfig[_0x5b9e17(0x137)]('bots')[_0x5b9e17(0x1e5)](_0x5b9e17(0x207))[_0x5b9e17(0x180)]()||[];}function getEnabledBots(){const _0x304c6b=_0x3edd8a;return dbConfig['get'](_0x304c6b(0x146))['sortBy'](_0x304c6b(0x207))[_0x304c6b(0x173)]({'status':_0x304c6b(0x166)})['value']()||[];}function getDisabledBots(){const _0xa2b2de=_0x3edd8a;return dbConfig['get']('bots')[_0xa2b2de(0x1e5)](_0xa2b2de(0x207))['filter']({'status':_0xa2b2de(0x1ec)})[_0xa2b2de(0x180)]()||[];}function getSettings(){const _0x44c83c=_0x3edd8a;return dbSettings[_0x44c83c(0x137)](_0x44c83c(0x1a0))['value']()||{'timeshift':0x0};}function getSecure(){const _0x1a8e3f=_0x3edd8a;return dbSecure[_0x1a8e3f(0x137)](_0x1a8e3f(0x16d))[_0x1a8e3f(0x180)]()||{};}function getBlacklist(){const _0x4a8455=_0x3edd8a;return dbSecure[_0x4a8455(0x137)](_0x4a8455(0x204))['value']()||[];}function broadcastToBots(_0x3c0242,_0x183b35){const _0x3fba1b=_0x3edd8a;config[_0x3fba1b(0x1f1)](_0x5b407f=>{const _0x3d09b6=_0x3fba1b;if(_0x5b407f[_0x3d09b6(0x1bf)]==_0x3d09b6(0x166)&&_0x5b407f[_0x3d09b6(0x18a)]==_0x3d09b6(0x1c2)){if(pid[_0x5b407f[_0x3d09b6(0x207)]])pid[_0x5b407f[_0x3d09b6(0x207)]][_0x3d09b6(0x141)]({[_0x3c0242]:_0x183b35});}});}function storeSettings(_0x443a4e,_0x3d15b6=![]){const _0x122af1=_0x3edd8a;_0x443a4e={...settings,..._0x443a4e};if(_0x3d15b6&&_0x443a4e[_0x122af1(0x1be)]!=_0x122af1(0x1ac)&&_0x443a4e[_0x122af1(0x1be)]!=''){const _0x44e6d8=crypt[_0x122af1(0x1fe)](secure[_0x122af1(0x10d)],_0x443a4e[_0x122af1(0x1be)])[_0x122af1(0x176)][_0x122af1(0x11c)]('@')[0x0],_0xc8155a=bcrypt[_0x122af1(0x22c)](_0x44e6d8,saltRounds);_0x443a4e={..._0x443a4e,'bbPassword':_0xc8155a};}if(_0x3d15b6&&_0x443a4e[_0x122af1(0x211)]!=_0x122af1(0x1ac)&&_0x443a4e[_0x122af1(0x211)]!=''){const _0x30096c=crypt[_0x122af1(0x1fe)](secure[_0x122af1(0x10d)],_0x443a4e[_0x122af1(0x211)])[_0x122af1(0x176)]['split']('@')[0x0];_0x443a4e={..._0x443a4e,'telegramToken':_0x30096c};}const _0x42fa2a=_0x443a4e[_0x122af1(0x211)]!=_0x122af1(0x1ac)&&_0x443a4e[_0x122af1(0x211)]!=settings[_0x122af1(0x211)]||_0x443a4e[_0x122af1(0x13c)]!=settings[_0x122af1(0x13c)],_0x1a4490=_0x443a4e[_0x122af1(0x211)]==''||_0x443a4e['telegramUsername']=='';if(_0x42fa2a)_0x443a4e['telegramEvents']=_0x122af1(0x191);for(const [_0x2e9fe2,_0x6dfc38]of Object['entries'](_0x443a4e)){if(_0x2e9fe2=='telegramToken'&&_0x6dfc38==_0x122af1(0x1ac)){_0x443a4e[_0x122af1(0x211)]=settings['telegramToken'];continue;};if(_0x2e9fe2==_0x122af1(0x1be)&&_0x6dfc38==_0x122af1(0x1ac)){_0x443a4e[_0x122af1(0x1be)]=settings[_0x122af1(0x1be)];continue;};dbSettings['set']('settings.'+_0x2e9fe2,_0x6dfc38)[_0x122af1(0x121)]();}settings=_0x443a4e,io['to'](_0x122af1(0x1de))[_0x122af1(0x177)]('settings',cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x42fa2a&&!_0x1a4490)initTelegram();if(_0x42fa2a&&_0x1a4490)disableTelegram();getAllClients()[_0x122af1(0x1f1)](_0x6d4b05=>{const _0x583641=_0x122af1;getSocket(_0x6d4b05['id'])[_0x583641(0x177)](_0x583641(0x1bf),{'access':{'allow':![],'reason':_0x583641(0x214),'token':null}});});}function updateSetting(_0xed8583,_0x4196ca){const _0x49e570=_0x3edd8a;dbSettings[_0x49e570(0x151)](_0x49e570(0x22a)+_0xed8583,_0x4196ca)[_0x49e570(0x121)](),settings=getSettings(),io['to'](_0x49e570(0x1de))['emit'](_0x49e570(0x1a0),cleanSettings());}function storeSecure(_0x17a813){const _0x32c649=_0x3edd8a;dbSecure['get'](_0x32c649(0x16d))[_0x32c649(0x1d1)](_0x17a813)[_0x32c649(0x121)](),secure=_0x17a813;}function addBlacklist(_0x2ff627){const _0x4c2816=_0x3edd8a;cleanBlacklist();let _0x236c7f;devices[_0x2ff627][_0x4c2816(0x216)]?_0x236c7f=Math['max'](devices[_0x2ff627][_0x4c2816(0x216)][_0x4c2816(0x14c)],loginExpiry):_0x236c7f=loginExpiry,dbSecure[_0x4c2816(0x137)](_0x4c2816(0x204))['push']({'expiry':new Date()[_0x4c2816(0x198)]()+_0x236c7f*0x3c*0x3e8,'token':devices[_0x2ff627][_0x4c2816(0x113)][_0x4c2816(0x131)]})[_0x4c2816(0x121)](),blacklist=dbSecure[_0x4c2816(0x137)](_0x4c2816(0x204))['value']();}function cleanBlacklist(){const _0x1eed33=_0x3edd8a;let _0x23117a=dbSecure[_0x1eed33(0x137)]('blacklist')[_0x1eed33(0x1af)]()['value'](),_0x28a602=new Date()[_0x1eed33(0x198)]();_0x23117a['forEach'](_0x50fb5c=>{const _0x4ccfee=_0x1eed33;_0x50fb5c['expiry']<_0x28a602&&dbSecure['get'](_0x4ccfee(0x204))[_0x4ccfee(0x1d3)]({'expiry':_0x50fb5c['expiry']})[_0x4ccfee(0x121)]();});}function initStates(){const _0x8ef431=_0x3edd8a;let _0x3d7d56=getConfiguration();_0x3d7d56[_0x8ef431(0x1f1)](_0x15828b=>{const _0xd9aaa4=_0x8ef431;_0x15828b['live']=_0xd9aaa4(0x1f2);}),storeConfiguration(_0x3d7d56);}function onKeys(){const _0x177185=new RSA();return new Promise(_0x91986f=>{const _0x3bd7c9=_0x10ae;_0x177185[_0x3bd7c9(0x1b0)]()[_0x3bd7c9(0x159)](_0x210a35=>{_0x91986f(_0x210a35);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xe114f0=_0x3edd8a;let _0x2d7262=getConfiguration(),_0x63a18c=![];_0x2d7262[_0xe114f0(0x1f1)](_0x1c65d1=>{const _0x17d7bd=_0xe114f0;if(_0x1c65d1['status']==_0x17d7bd(0x1c2))_0x1c65d1[_0x17d7bd(0x1bf)]=_0x17d7bd(0x166),_0x63a18c=!![];else _0x1c65d1[_0x17d7bd(0x1bf)]==_0x17d7bd(0x1f2)&&(_0x1c65d1['status']=_0x17d7bd(0x1ec),_0x63a18c=!![]);});if(_0x63a18c)storeConfiguration(_0x2d7262);let _0x56b82d=getSecure();if(!_0x56b82d[_0xe114f0(0x1ca)](_0xe114f0(0x11f))){let _0x120798=await generateKeys();_0x56b82d['publicKey']=_0x120798[_0xe114f0(0x106)],_0x56b82d['privateKey']=_0x120798[_0xe114f0(0x10d)],_0x56b82d[_0xe114f0(0x11f)]=crypto[_0xe114f0(0x224)](0x20)[_0xe114f0(0x119)]('hex');;storeSecure(_0x56b82d);}let _0x73edcd=getSettings();_0x63a18c=![];!_0x73edcd[_0xe114f0(0x1ca)](_0xe114f0(0x149))&&(_0x73edcd[_0xe114f0(0x149)]=![],_0x73edcd[_0xe114f0(0x14e)]='',_0x73edcd[_0xe114f0(0x1be)]='',_0x73edcd[_0xe114f0(0x1ab)]=![],_0x63a18c=!![]);!_0x73edcd[_0xe114f0(0x1ca)](_0xe114f0(0x18f))&&(_0x73edcd[_0xe114f0(0x18f)]=![],_0x73edcd[_0xe114f0(0x1db)]=[],_0x73edcd[_0xe114f0(0xfe)]=![],_0x63a18c=!![]);if(!_0x73edcd['hasOwnProperty'](_0xe114f0(0x1dc))){if(_0x73edcd[_0xe114f0(0x100)])_0x73edcd[_0xe114f0(0x1dc)]=!![];else _0x73edcd[_0xe114f0(0x1dc)]=![];_0x63a18c=!![];}if(_0x63a18c)storeSettings(_0x73edcd);}function storeConfiguration(_0x1e661d){const _0x5d0adb=_0x3edd8a;dbConfig[_0x5d0adb(0x137)](_0x5d0adb(0x146))['remove']()[_0x5d0adb(0x121)](),dbConfig[_0x5d0adb(0x137)](_0x5d0adb(0x146))['push'](..._0x1e661d)[_0x5d0adb(0x121)](),config=_0x1e661d;}function resetPassword(){const _0x1dc173=_0x3edd8a;tgBot&&settings[_0x1dc173(0x100)]&&(tgBot['removeListener'](_0x1dc173(0x188)),tgBot[_0x1dc173(0x22f)](settings[_0x1dc173(0x100)],_0x1dc173(0x126),{'parse_mode':_0x1dc173(0x1b4),'reply_markup':{'inline_keyboard':[[{'text':_0x1dc173(0x215),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1dc173(0x1ea)](_0x94f7e5=>{telegramError(_0x94f7e5);}),tgBot['on']('callback_query',async _0x21f4d5=>{const _0x42a62f=_0x1dc173,_0xd83692=_0x21f4d5[_0x42a62f(0x183)],_0x5e6d72=_0x21f4d5['message'];tgBot[_0x42a62f(0x1a1)](_0x21f4d5['id'])[_0x42a62f(0x159)](async()=>{const _0x2c61d6=_0x42a62f;if(_0xd83692!='no'){const _0x13c291=0xf,_0x23b396=_0x2c61d6(0x1fb),_0x166e7b=Array['from'](crypto[_0x2c61d6(0x1a8)](new Uint32Array(_0x13c291)))[_0x2c61d6(0x10c)](_0x599c39=>_0x23b396[_0x599c39%_0x23b396[_0x2c61d6(0x184)]])['join'](''),_0x267ab3=bcrypt[_0x2c61d6(0x22c)](_0x166e7b,saltRounds);storeSettings({'bbPassword':_0x267ab3}),await tgBot[_0x2c61d6(0x22f)](_0x5e6d72[_0x2c61d6(0x15d)]['id'],_0x2c61d6(0x16f)+_0x166e7b,{'parse_mode':'HTML'})['catch'](_0x5f349b=>{telegramError(_0x5f349b);});}else await tgBot[_0x2c61d6(0x22f)](_0x5e6d72[_0x2c61d6(0x15d)]['id'],_0x2c61d6(0x163))[_0x2c61d6(0x1ea)](_0xd5f628=>{telegramError(_0xd5f628);});}),tgBot['removeListener'](_0x42a62f(0x188));}));}function logging(_0x50ce03){const _0x44c897=_0x3edd8a;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x50ce03);if(tgBot&&settings[_0x44c897(0x100)]&&settings[_0x44c897(0x1c8)]!=_0x44c897(0xfa))tgBot[_0x44c897(0x22f)](settings['telegramChatId'],_0x44c897(0x182)+_0x50ce03)['catch'](_0x4c0490=>{telegramError(_0x4c0490);});}function getServerTime(){const _0xb701b5=_0x3edd8a,_0x3511e5=new Date();return _0x3511e5[_0xb701b5(0x197)]()+'/'+(_0x3511e5[_0xb701b5(0x136)]()+0x1)['toString']()[_0xb701b5(0x21f)](0x2,'0')+'/'+_0x3511e5[_0xb701b5(0x1c9)]()['toString']()[_0xb701b5(0x21f)](0x2,'0')+'\x20'+_0x3511e5['getHours']()['toString']()[_0xb701b5(0x21f)](0x2,'0')+':'+_0x3511e5[_0xb701b5(0x1ef)]()[_0xb701b5(0x119)]()['padStart'](0x2,'0')+':'+_0x3511e5['getSeconds']()[_0xb701b5(0x119)]()[_0xb701b5(0x21f)](0x2,'0');}function getTimeStamp(){const _0x2a651f=_0x3edd8a,_0x4bdeb1=shiftedTime();return _0x4bdeb1[_0x2a651f(0x197)]()+'/'+(_0x4bdeb1[_0x2a651f(0x136)]()+0x1)['toString']()[_0x2a651f(0x21f)](0x2,'0')+'/'+_0x4bdeb1['getDate']()[_0x2a651f(0x119)]()[_0x2a651f(0x21f)](0x2,'0')+'\x20'+_0x4bdeb1[_0x2a651f(0x147)]()[_0x2a651f(0x119)]()[_0x2a651f(0x21f)](0x2,'0')+':'+_0x4bdeb1['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x4bdeb1['getSeconds']()[_0x2a651f(0x119)]()[_0x2a651f(0x21f)](0x2,'0');}function shiftedTime(){const _0x2d61f9=_0x3edd8a,_0x56f15e=new Date();let _0x35b1e7=_0x56f15e;if(settings[_0x2d61f9(0x1cb)]&&settings[_0x2d61f9(0x1cb)]!==0x0)_0x35b1e7=fns[_0x2d61f9(0x1a2)](_0x56f15e,{'hours':settings[_0x2d61f9(0x1cb)]});return _0x35b1e7;}function startScheduler(){const _0x23bce7=_0x3edd8a;let _0x4808e9=new Date()[_0x23bce7(0x238)]();_0x4808e9==0x1&&backupConfigFiles();_0x4808e9==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x16d53c=_0x3edd8a;fs[_0x16d53c(0x1fc)](configpath,{'withFileTypes':!![]})[_0x16d53c(0x1f1)](_0x24ba73=>{const _0x2bc87e=_0x16d53c;if(!_0x24ba73['isDirectory']())fs[_0x2bc87e(0x21b)](configpath+_0x24ba73[_0x2bc87e(0x118)],configbackuppath+_0x24ba73['name']);});}function triggerAnalytics(){const _0xcff55c=_0x3edd8a;analytics['page']({'title':_0xcff55c(0x101),'href':_0xcff55c(0x1da),'path':'/v'+serverversion});}function validateCredentials(_0x2d2730,_0x3df46b){const _0x2c7918=_0x3edd8a;if(_0x2d2730['username']==settings[_0x2c7918(0x14e)]&&bcrypt[_0x2c7918(0x185)](_0x2d2730[_0x2c7918(0xfd)],settings[_0x2c7918(0x1be)])){if(settings[_0x2c7918(0x1ab)])return{'allow':![],'reason':_0x2c7918(0x11e),'token':null};else{const _0x3315d2=generateLoginToken(_0x3df46b);return{'allow':!![],'reason':_0x2c7918(0x194),'token':_0x3315d2};}}else return{'allow':![],'reason':_0x2c7918(0x225),'token':null};}function refreshToken(_0x631746){const _0x1fe171=_0x3edd8a,_0x56070d=generateLoginToken(_0x631746);return{'allow':!![],'reason':_0x1fe171(0x194),'token':_0x56070d};}function _0x37be(){const _0x20ca5e=['yargs/yargs','remove','createServer','new-disabled','1547802iLcGYf','alerts','telegram2FaApproval','get-starting-balances','https://hodlerhacks.com','whitelist','telegramEnabled','use','botmanager','logged\x20out','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','exp','Notifications\x20types:\x20','/:bot/configuration','exit','sortBy','Notifications\x20enabled','update-bot','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','catch','\x20/\x20','disabled','-results.json','stopPolling','getMinutes','<b>Telegram\x20bot\x20status:</b>\x0a','forEach','stopped','constructor','clientip','Access\x20enabled\x20for\x20','60GcLytB','connected','restarting\x20Bot\x20','reject','login\x20not\x20required','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','readdirSync','args','decrypt','logout','includes','storeHeadless','conn','/:bot/history','blacklist','disconnect','headers','botID','keys','No\x20bots\x20running\x20right\x20now','Invalid\x20Telegram\x20token','Login\x20accepted','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20update\x20settings','uuid','crypto','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','telegramToken','-----------------------------------------------------------------------------------','store-headless','reload','yes','telegramIpApproval','Alerts','emitHistory','(((.+)+)+)+$','toIPv4MappedAddress','copyFileSync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/off\x20-\x20stop\x20bot(s)\x0a','padStart','success','kind','</b>\x20?','SIGTERM','randomBytes','invalid\x20credentials','search','server','existsSync','Invalid\x20authentication\x20token\x20(2)','settings.','ipaddr.js','hashSync','reset-password','1154970gsUVdF','sendMessage','8105tiwlkE','7brMDiz','User\x20has\x20been\x20validated','pidRefreshToken','2FA\x20login\x20token\x20generated','encryptedUuid','All\x20bots\x20running\x20right\x20now','once','getUTCHours','join','sendFile','orders','Invalid\x20username\x20or\x20IP\x20address','env','password','temporaryAccessAllowed','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','telegramChatId','Balance\x20Bot\x20Server','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20login\x20attempt\x20(timeout)','getStartingBalances','-events.json','publicKey','All\x20bots','enabled\x20Bot\x20','handshake','getPortfolio','accept','map','privateKey','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','pidExpireLogin','started','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Notifications\x20enabled\x0a','access','UA-192771731-1','telegram','lowdb/adapters/FileSync','bcryptjs','name','toString','Login\x20rejected','show','split','store-configuration','2FA\x20login\x20required','secret','-config.json','write','lowdb','269990JNiFss','sha256','removeListener','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','type','event','kill','temporary\x20access\x20not\x20allowed','login','bot','\x20|\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','get-portfolio','placeOrder','token','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','356ZchcLY','getMonth','get','127.0.0.1','SIGINT','30\x20min','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','telegramUsername','inherit','log','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','static','send','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','from','match','toIPv4Address','bots','getHours','order','loginRequired','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','build2','expiry','sign','bbUsername','2FA\x20required','backup/','set','reason','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Ok,\x20will\x20send\x20order\x20notifications\x20only','express','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20log\x20out','Invalid\x20authentication\x20token\x20(1)','then','username','You\x20can\x20use\x20the\x20following\x20commands:\x0a','listen','chat','/restart\x20-\x20restart\x20bot(s)\x0a','store','/status\x20-\x20show\x20bot(s)\x20status\x0a','slice','polling_error','Password\x20reset\x20rejected','<b>Balance\x20Bot\x20status:</b>\x0a','@analytics/google-analytics','enabled','new','404\x20Not\x20Found','argv','3000','place-order','error','secure','store-settings','Password\x20has\x20been\x20reset\x20to:\x20','\x20minutes','access\x20timeout','storeConfiguration','filter','notification','/:bot','message','emit','analytics','Balance\x20Bot','Token\x20blacklisted','apply','onText','mkdirSync','cancel-loading','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','value','5\x20min','Bot\x20Mgr\x20>\x20','data','length','compareSync','http','delete-bot','callback_query','index.html','live','bb/','clients','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','default','whitelistEnabled','/on\x20-\x20start\x20bot(s)\x0a','all','defaults','fork','login\x20token\x20generated','unlinkSync','version','getFullYear','getTime','Orders','-performance.json','build','2FA\x20login\x20rejected','/:bot/coins','disabled\x20Bot\x20','find','settings','answerCallbackQuery','add','botname','assign','/:bot/portfolio','sockets','bb-secure.json','randomFillSync','Allow\x20login\x20from\x20IP\x20address\x20<b>','login\x20required','f2aRequired','************','53086yUvftM','Notifications\x20disabled\x0a','cloneDeep','generateKeyPairAsync','ipv6','verify','1000','HTML','Crypt',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','bb-config.json','config/','parse','::ffff:127.0.0.1','::1','Unauthorized\x20attempt\x20to\x20add\x20bot','bot-','bbPassword','status','child_process','timestamp','running','auth','bb-settings.json','user','cancelLoading','1712728IWigSX','telegramEvents','getDate','hasOwnProperty','timeshift','error\x20while\x20deleting\x20config\x20files:\x20','allow','stop','\x20>\x20','482244PPIaIL','push'];_0x37be=function(){return _0x20ca5e;};return _0x37be();}function validateAccess(_0x4a10a1,_0x577ac5){const _0x32fbe7=_0x3edd8a;let _0x29c2e2=devices[_0x577ac5]['ip'],_0x2c8450;const _0x2c3476=_0xa9a555=>{const _0x12da78=_0x10ae;if(settings[_0x12da78(0x149)]){if(settings[_0x12da78(0x1ab)]){if(telegram2FaApproved(_0x577ac5)){const _0x3badef=generateLoginToken(_0x577ac5);return{'allow':!![],'reason':_0x12da78(0x234),'token':_0x3badef};}else return{'allow':![],'reason':_0x12da78(0x1aa),'token':null};}else return _0x2c8450=validToken(_0xa9a555,_0x577ac5),_0x2c8450[_0x12da78(0x1ca)](_0x12da78(0x220))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0xa9a555}:{'allow':![],'reason':_0x12da78(0x1aa),'token':null};}else return{'allow':!![],'reason':_0x12da78(0x1fa),'token':null};};if(settings[_0x32fbe7(0x18f)]){let _0x2dc678=[...settings[_0x32fbe7(0x1db)],_0x32fbe7(0x1bb),_0x32fbe7(0x1ba),_0x32fbe7(0x138)];if(_0x2dc678[_0x32fbe7(0x200)](_0x29c2e2))return _0x2c3476(_0x4a10a1);else{_0x2c8450=validToken(_0x4a10a1,_0x577ac5);if(_0x2c8450['hasOwnProperty'](_0x32fbe7(0x220)))return _0x2c3476(_0x4a10a1);else{if(telegramIpApproved(_0x577ac5)){const _0x464293=generateToken(_0x577ac5);return _0x2c8450=_0x2c3476(_0x4a10a1),_0x2c8450['allow']?{'allow':!![],'reason':_0x32fbe7(0x20c),'token':_0x464293}:_0x2c8450;}else return settings[_0x32fbe7(0xfe)]?{'allow':![],'reason':_0x32fbe7(0x14f),'token':null}:{'allow':![],'reason':_0x32fbe7(0x12a),'token':null};}}}else return _0x2c3476(_0x4a10a1);}function timelyDecrypt(_0x298ce3,_0x22b233=!![]){const _0x44059a=_0x3edd8a;if(_0x298ce3)try{const _0x21d850=crypt[_0x44059a(0x1fe)](secure[_0x44059a(0x10d)],_0x298ce3)[_0x44059a(0x176)],_0x125e82=_0x21d850[_0x44059a(0x11c)]('@')[0x0],_0x3b83bb=_0x21d850['split']('@')[0x1],_0x1a4b80=new Date()[_0x44059a(0x198)]();if(_0x22b233){if(_0x1a4b80-_0x3b83bb<maxSecretAge*0x3e8)return _0x125e82;else return![];}else return _0x125e82;}catch(_0x6d3279){return![];}else return![];}const validToken=(_0x5eb409,_0x114397)=>{const _0x44c899=_0x3edd8a,_0x4d3c1f=devices[_0x114397]['ip'];if(!_0x5eb409)return{'error':'No\x20authentication\x20token'};for(let _0x5de286 of blacklist){if(_0x5de286[_0x44c899(0x131)]==_0x5eb409)return{'error':_0x44c899(0x17a)};}let _0x287d72;try{_0x287d72=jwt[_0x44c899(0x1b2)](_0x5eb409,secure[_0x44c899(0x11f)]+_0x114397);}catch{return{'error':_0x44c899(0x158)};}if(!_0x287d72[_0x44c899(0x1ca)](_0x44c899(0x1f4))&&!_0x287d72[_0x44c899(0x1ca)](_0x44c899(0x15a))||!_0x287d72[_0x44c899(0x1ca)](_0x44c899(0x1e1)))return{'error':_0x44c899(0x229)};if(!_0x287d72[_0x44c899(0x1ca)](_0x44c899(0x15a))&&_0x287d72['hasOwnProperty'](_0x44c899(0x1f4))){const {clientip:_0x1cdd57}=_0x287d72;return _0x4d3c1f==_0x1cdd57?{'success':_0x44c899(0x232)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x287d72['hasOwnProperty'](_0x44c899(0x15a))&&_0x287d72[_0x44c899(0x1ca)](_0x44c899(0x1f4))){const {username:_0x5a53cf,clientip:_0x29bcd0}=_0x287d72;return settings[_0x44c899(0x14e)]==_0x5a53cf&&_0x4d3c1f==_0x29bcd0?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x44c899(0xfb)};}}},generateLoginToken=_0x4b017d=>{const _0x1ac584=_0x3edd8a;if(_0x4b017d){const _0x59a7a1=devices[_0x4b017d]['ip'];return jwt[_0x1ac584(0x14d)]({'username':settings[_0x1ac584(0x14e)],'clientip':_0x59a7a1},secure[_0x1ac584(0x11f)]+_0x4b017d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x160934=>{const _0x58ccd6=_0x3edd8a;if(_0x160934){const _0x2c341b=devices[_0x160934]['ip'];return jwt['sign']({'clientip':_0x2c341b},secure[_0x58ccd6(0x11f)]+_0x160934,{'expiresIn':devices[_0x160934][_0x58ccd6(0x216)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x29fc11=>{const _0x103427=_0x3edd8a;let _0x2627e9=![];return devices[_0x29fc11][_0x103427(0x216)]&&devices[_0x29fc11][_0x103427(0x216)][_0x103427(0x14c)]!=_0x103427(0x1f9)&&(_0x2627e9=devices[_0x29fc11][_0x103427(0x216)][_0x103427(0x1f4)]==devices[_0x29fc11]['ip']&&new Date()['getTime']()-devices[_0x29fc11][_0x103427(0x216)]['timestamp']<devices[_0x29fc11][_0x103427(0x216)]['expiry']*0x3c*0x3e8),_0x2627e9;},telegram2FaApproved=_0x2583fe=>{const _0x40e33e=_0x3edd8a;let _0x1de591=![];return devices[_0x2583fe][_0x40e33e(0x1d8)]&&devices[_0x2583fe][_0x40e33e(0x1d8)][_0x40e33e(0x14c)]!=_0x40e33e(0x1f9)&&(_0x1de591=devices[_0x2583fe][_0x40e33e(0x1d8)][_0x40e33e(0x1f4)]==devices[_0x2583fe]['ip']&&new Date()[_0x40e33e(0x198)]()-devices[_0x2583fe][_0x40e33e(0x1d8)][_0x40e33e(0x1c1)]<devices[_0x2583fe][_0x40e33e(0x1d8)][_0x40e33e(0x14c)]*0x3c*0x3e8),_0x1de591;},normalizeIP=_0x9173f8=>{const _0x1a7943=_0x3edd8a;let _0x2e3fe6=null,_0x1504e6=null;if(ipaddr['isValid'](_0x9173f8)){const _0x5c9bd8=ipaddr[_0x1a7943(0x1b9)](_0x9173f8);_0x5c9bd8[_0x1a7943(0x221)]()===_0x1a7943(0x1b1)?(_0x5c9bd8['isIPv4MappedAddress']()&&(_0x2e3fe6=_0x5c9bd8[_0x1a7943(0x145)]()[_0x1a7943(0x119)]()),_0x1504e6=_0x5c9bd8['toString']()):(_0x2e3fe6=_0x5c9bd8[_0x1a7943(0x119)](),_0x1504e6=_0x5c9bd8[_0x1a7943(0x21a)]()[_0x1a7943(0x119)]());}return{'show':_0x2e3fe6?_0x2e3fe6:_0x1504e6,'store':_0x1504e6};};