const _0x440a84=_0x429f;(function(_0x27d710,_0x17419b){const _0x1c837c=_0x429f,_0x257dd7=_0x27d710();while(!![]){try{const _0x282cae=-parseInt(_0x1c837c(0x365))/0x1*(parseInt(_0x1c837c(0x1f5))/0x2)+-parseInt(_0x1c837c(0x28c))/0x3+-parseInt(_0x1c837c(0x290))/0x4+parseInt(_0x1c837c(0x280))/0x5+parseInt(_0x1c837c(0x28b))/0x6*(-parseInt(_0x1c837c(0x1fc))/0x7)+-parseInt(_0x1c837c(0x311))/0x8*(parseInt(_0x1c837c(0x1ac))/0x9)+parseInt(_0x1c837c(0x25e))/0xa;if(_0x282cae===_0x17419b)break;else _0x257dd7['push'](_0x257dd7['shift']());}catch(_0x234c05){_0x257dd7['push'](_0x257dd7['shift']());}}}(_0xdac0,0xadb3d));const _0x48467e=function(){let _0x4af842=!![];return function(_0x51feec,_0x3323f1){const _0x34d1c0=_0x4af842?function(){const _0x2bbb74=_0x429f;if(_0x3323f1){const _0x8698c2=_0x3323f1[_0x2bbb74(0x2bb)](_0x51feec,arguments);return _0x3323f1=null,_0x8698c2;}}:function(){};return _0x4af842=![],_0x34d1c0;};}(),_0x2e1843=_0x48467e(this,function(){const _0x3d9cf6=_0x429f;return _0x2e1843[_0x3d9cf6(0x276)]()[_0x3d9cf6(0x2c8)](_0x3d9cf6(0x2ea))['toString']()[_0x3d9cf6(0x2c1)](_0x2e1843)['search'](_0x3d9cf6(0x2ea));});_0x2e1843();'use strict';process['env'][_0x440a84(0x199)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require(_0x440a84(0x220)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x440a84(0x333))[_0x440a84(0x277)],RSA=require('hybrid-crypto-js')[_0x440a84(0x343)],bcrypt=require(_0x440a84(0x25a)),jwt=require(_0x440a84(0x303)),ipaddr=require(_0x440a84(0x232)),argv=require('yargs/yargs')(process[_0x440a84(0x1c2)][_0x440a84(0x291)](0x2))[_0x440a84(0x1c2)],uuidRandom=require(_0x440a84(0x29b)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require('mixpanel'),axios=require(_0x440a84(0x356)),{GraphQLClient,gql}=require(_0x440a84(0x281)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x440a84(0x308)]||_0x440a84(0x1c6),pattern=/^[0-9]{2,4}$/;!pattern[_0x440a84(0x22b)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x440a84(0x1e0)](0x1));const HOST=argv[_0x440a84(0x344)]||null,userID=argv[_0x440a84(0x288)]||'',debugging=argv['d']||![],nodeversion=process[_0x440a84(0x309)]['node'];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x440a84(0x1ea),settingsfile=_0x440a84(0x386),securefile=_0x440a84(0x1cf),environment=require('./'+bbpath2+_0x440a84(0x1d4))[_0x440a84(0x338)]||_0x440a84(0x227),maxBackups=0xa;let validInstallation=!![];!fs[_0x440a84(0x26e)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x440a84(0x245)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x440a84(0x218),configbackuppath=configpath+_0x440a84(0x229),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x440a84(0x278),loggerfile=fs[_0x440a84(0x2b6)](logspath+_0x440a84(0x24f),{'flags':'a'}),temppath=userID?bbpath+_0x440a84(0x300)+userID+'/':bbpath+_0x440a84(0x300);!fs[_0x440a84(0x26e)](configpath)&&fs[_0x440a84(0x1fa)](configpath);!fs[_0x440a84(0x26e)](configbackuppath)&&fs[_0x440a84(0x1fa)](configbackuppath);!fs[_0x440a84(0x26e)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x440a84(0x26e)](zippath)&&fs[_0x440a84(0x1fa)](zippath);!fs[_0x440a84(0x26e)](temppath)&&fs[_0x440a84(0x1fa)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x440a84(0x348)]({'bots':[]})[_0x440a84(0x194)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x440a84(0x348)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x440a84(0x2bd),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x440a84(0x348)]({'secure':{},'blacklist':[]})[_0x440a84(0x194)]();let crypt=new Crypt({'md':_0x440a84(0x262),'rsaStandard':_0x440a84(0x25b)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x440a84(0x211)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x440a84(0x1fd)]&&(settings[_0x440a84(0x1fd)]!=''&&settings['telegramToken']!=_0x440a84(0x2df))&&settings['telegramUsername']&&settings[_0x440a84(0x351)]!='')initTelegram();const parseColor=(_0x2cc00b,_0xb4312e)=>{const _0xd8beab=_0x440a84,_0x39b751=/#[A-Z]{3}#/g;if(typeof _0x2cc00b==_0xd8beab(0x2a6)){!_0xb4312e?_0x2cc00b=_0x2cc00b[_0xd8beab(0x33c)](_0x39b751,''):(_0x2cc00b=_0x2cc00b[_0xd8beab(0x33c)](/#BLU#/g,_0xd8beab(0x1b4)),_0x2cc00b=_0x2cc00b[_0xd8beab(0x33c)](/#RED#/g,_0xd8beab(0x30c)),_0x2cc00b=_0x2cc00b['replace'](/#YEL#/g,_0xd8beab(0x376)),_0x2cc00b=_0x2cc00b[_0xd8beab(0x33c)](/#MAG#/g,_0xd8beab(0x23e)),_0x2cc00b=_0x2cc00b['replace'](/#CYA#/g,_0xd8beab(0x263)),_0x2cc00b=_0x2cc00b[_0xd8beab(0x33c)](/#RES#/g,'\x1b[0m'));;}return _0x2cc00b;},logger={'screen':_0x4bf409=>{const _0x550b53=_0x440a84;console[_0x550b53(0x23a)](parseColor(_0x4bf409,!![]));},'simple':_0x47d7e8=>{const _0xf99d48=_0x440a84;console[_0xf99d48(0x23a)](parseColor(_0x47d7e8,!![])),loggerfile[_0xf99d48(0x194)](util[_0xf99d48(0x26d)](parseColor(_0x47d7e8,![]))+'\x0a');},'full':async _0x38fa99=>{const _0x580075=_0x440a84,_0x847c5c=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x38fa99;console['log'](parseColor(_0x847c5c,!![])),loggerfile[_0x580075(0x194)](util[_0x580075(0x26d)](parseColor(_0x847c5c,![]))+'\x0a');if(tgBot&&settings[_0x580075(0x20f)]&&settings['telegramEvents']!=_0x580075(0x274))await sendTelegram(settings[_0x580075(0x20f)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x38fa99,![]));},'debug':async(_0x39f2e2,_0x6df5e1='')=>{const _0xc78f03=_0x440a84,_0x106467=getTimeStamp()+_0xc78f03(0x2fe)+_0x39f2e2;if(debugging)console['log'](parseColor(_0x106467,!![]));loggerfile[_0xc78f03(0x194)](util[_0xc78f03(0x26d)](parseColor(_0x106467,![]))+'\x0a');if(_0x6df5e1){if(debugging)console[_0xc78f03(0x23a)](_0x6df5e1);loggerfile[_0xc78f03(0x194)](util[_0xc78f03(0x26d)](_0x6df5e1)+'\x0a');}}};process['on']('uncaughtException',function(_0x168b19){logger['simple'](_0x168b19);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x440a84(0x1d4))[_0x440a84(0x234)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x440a84(0x19b)),app=express(),http=require(_0x440a84(0x1b6))[_0x440a84(0x22c)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x7999ec,_0x5d7ebe)=>{const _0x4e53d4=_0x440a84,_0x193ad8=_0x7999ec[_0x4e53d4(0x1ff)][_0x4e53d4(0x259)],_0x59dd24=getClientsWithBotID(_0x4e53d4(0x2c4)),_0x36d6c7=_0x7999ec[_0x4e53d4(0x323)][_0x4e53d4(0x24c)],_0x5b6c4f=timelyDecrypt(_0x36d6c7,![]),_0x1313a5=_0x59dd24['find'](_0x3c7d92=>_0x3c7d92[_0x4e53d4(0x24c)]==_0x5b6c4f);if(_0x1313a5){const _0x1b946d=normalizeIP(_0x7999ec[_0x4e53d4(0x2ed)][_0x4e53d4(0x2bc)])[_0x4e53d4(0x28d)],_0x3be683=_0x7999ec[_0x4e53d4(0x323)][_0x4e53d4(0x378)];if(validateAccess(_0x3be683,_0x5b6c4f,_0x1b946d)['allow'])_0x193ad8==_0x4e53d4(0x1d8)&&await backupConfigFiles(),await zipFiles(_0x193ad8),_0x5d7ebe[_0x4e53d4(0x2b0)](zippath+(_0x193ad8+_0x4e53d4(0x371)),_0x1fce1c=>{const _0x1e1971=_0x4e53d4;_0x1fce1c&&(logger[_0x1e1971(0x2d3)](_0x1e1971(0x1ad)+_0x193ad8),logger['simple'](_0x1fce1c));});else logger[_0x4e53d4(0x2d3)](_0x4e53d4(0x317)+_0x193ad8+_0x4e53d4(0x27d));}else logger[_0x4e53d4(0x2d3)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x193ad8+_0x4e53d4(0x1e7));}),app[_0x440a84(0x2e4)](_0x440a84(0x336),async(_0x583758,_0x3c5871)=>{const _0x44ed54=_0x440a84,_0x4eddbc=getClientsWithBotID('botmanager'),_0x5869e1=_0x583758['headers'][_0x44ed54(0x24c)],_0x1fb01c=timelyDecrypt(_0x5869e1,![]),_0x405522=_0x4eddbc[_0x44ed54(0x2d1)](_0x27fb46=>_0x27fb46['uuid']==_0x1fb01c);logger['debug'](_0x44ed54(0x2ac));if(_0x405522){const _0x1fb78e=normalizeIP(_0x583758[_0x44ed54(0x2ed)]['remoteAddress'])[_0x44ed54(0x28d)],_0x1d741e=_0x583758[_0x44ed54(0x323)][_0x44ed54(0x378)];if(validateAccess(_0x1d741e,_0x1fb01c,_0x1fb78e)['allow']){if(_0x583758[_0x44ed54(0x1c9)]){const _0x3e7f89=_0x583758['files'][_0x44ed54(0x1a7)];await _0x3e7f89['mv'](temppath+_0x3e7f89[_0x44ed54(0x1af)]),_0x3c5871[_0x44ed54(0x253)]({'status':!![],'message':'File\x20uploaded'});const _0x37268f=getBotsWithMode();_0x37268f[_0x44ed54(0x1d6)]>0x0?confirmRestore(temppath,_0x3e7f89[_0x44ed54(0x1af)]):unzipFile(temppath,_0x3e7f89[_0x44ed54(0x1af)]);}}else logger['full'](_0x44ed54(0x287));}else logger[_0x44ed54(0x2d3)](_0x44ed54(0x2f2));}),app[_0x440a84(0x32f)](express['static'](path[_0x440a84(0x1f0)](__dirname,bbpath2,_0x440a84(0x21b)))),app['use'](express[_0x440a84(0x28e)](path['join'](__dirname,bbpath2,_0x440a84(0x1b0)))),app['get']('/',function(_0x459f4a,_0x70da3a){const _0x5e0be5=_0x440a84;_0x70da3a[_0x5e0be5(0x2ca)](path[_0x5e0be5(0x1f0)](__dirname,bbpath2,_0x5e0be5(0x21b),_0x5e0be5(0x2d4)));}),app[_0x440a84(0x272)](_0x440a84(0x1a5),function(_0x4b9563,_0x1c6e20){const _0x17693c=_0x440a84;_0x1c6e20[_0x17693c(0x2ca)](path[_0x17693c(0x1f0)](__dirname,bbpath2,_0x17693c(0x1b0),_0x17693c(0x2d4)));}),app['get'](_0x440a84(0x2b2),(_0x697cb6,_0x426f0a)=>{const _0x45f4c8=_0x440a84;_0x426f0a['sendFile'](path[_0x45f4c8(0x1f0)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x440a84(0x283),(_0x5f5d8d,_0x36db1e)=>{const _0x45937b=_0x440a84;_0x36db1e[_0x45937b(0x2ca)](path[_0x45937b(0x1f0)](__dirname,bbpath2,_0x45937b(0x1b0),_0x45937b(0x2d4)));}),app['get'](_0x440a84(0x243),(_0x1f7c22,_0x4f687d)=>{const _0x38799d=_0x440a84;_0x4f687d['sendFile'](path[_0x38799d(0x1f0)](__dirname,bbpath2,_0x38799d(0x1b0),_0x38799d(0x2d4)));}),app[_0x440a84(0x272)]('/:bot/history',(_0x5afc6d,_0x4df177)=>{const _0x53b04a=_0x440a84;_0x4df177[_0x53b04a(0x2ca)](path[_0x53b04a(0x1f0)](__dirname,bbpath2,'build','index.html'));}),app[_0x440a84(0x272)]('/:bot/configuration',(_0x4fe144,_0x37ac46)=>{const _0x232be9=_0x440a84;_0x37ac46[_0x232be9(0x2ca)](path['join'](__dirname,bbpath2,_0x232be9(0x1b0),'index.html'));}),app[_0x440a84(0x272)](_0x440a84(0x327),(_0x199b23,_0x14ee34)=>{const _0x62c2af=_0x440a84;_0x14ee34[_0x62c2af(0x2ca)](path[_0x62c2af(0x1f0)](__dirname,bbpath2,_0x62c2af(0x1b0),'index.html'));});if(HOST)http[_0x440a84(0x1ce)](PORT,HOST);else http[_0x440a84(0x1ce)](PORT);const io=require(_0x440a84(0x2f0))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x325fce=_0x440a84;let _0x28649d=_0x325fce(0x2a0);const _0xb1b83e=networkInterfaces(),_0x1018c6={};for(const _0x1592e1 of Object[_0x325fce(0x24e)](_0xb1b83e)){for(const _0x4400f2 of _0xb1b83e[_0x1592e1]){if((_0x4400f2['family']==_0x325fce(0x361)||_0x4400f2[_0x325fce(0x212)]==0x4)&&!_0x4400f2[_0x325fce(0x22e)]){const _0x1db9d3=ipaddr[_0x325fce(0x273)](_0x4400f2[_0x325fce(0x23d)])[_0x325fce(0x252)]();_0x1db9d3!='private'&&(!_0x1018c6[_0x1592e1]&&(_0x1018c6[_0x1592e1]=[]),_0x1018c6[_0x1592e1][_0x325fce(0x29d)](_0x4400f2['address']),_0x28649d=_0x4400f2[_0x325fce(0x23d)]);}}}return{'serverip':_0x28649d,'netinterfaces':_0x1018c6};}async function startServer(){const _0x20da97=_0x440a84,{serverip:_0x33f856,netinterfaces:_0x11fda6}=getServerIP();logger[_0x20da97(0x2b1)](''),logger['simple'](_0x20da97(0x285)),await logger[_0x20da97(0x2d3)](_0x20da97(0x223)+serverversion+_0x20da97(0x331)+(environment==_0x20da97(0x1d2)?'(staging)':'')+'\x0a'+(_0x20da97(0x32c)+PORT+_0x20da97(0x2a9))+(_0x20da97(0x36f)+_0x33f856+':'+PORT+_0x20da97(0x222))),logger[_0x20da97(0x2b1)](_0x20da97(0x285));if(config[_0x20da97(0x1d6)]!=0x0)for(const _0x182c74 of config){const _0xd9594d=_0x182c74['mode']=='auto'?'a':'m';if(_0x182c74[_0x20da97(0x23f)]==_0x20da97(0x2dc)||_0x182c74[_0x20da97(0x23f)]==_0x20da97(0x1f1))await logger[_0x20da97(0x2d3)](_0x20da97(0x1b3)+_0xd9594d+')\x20|\x20Bot\x20'+_0x182c74[_0x20da97(0x25f)]+'\x20|\x20'+_0x182c74[_0x20da97(0x1c4)]),startBot([_0x182c74[_0x20da97(0x25f)],userID],{'cwd':bbpath},function(_0xaa146e){const _0x1a5ff0=_0x20da97;if(_0xaa146e)logger[_0x1a5ff0(0x2d3)](_0xaa146e);});else(_0x182c74[_0x20da97(0x23f)]==_0x20da97(0x2ba)||_0x182c74[_0x20da97(0x23f)]==_0x20da97(0x355))&&await logger[_0x20da97(0x2d3)](_0x20da97(0x18f)+_0xd9594d+')\x20\x20\x20|\x20Bot\x20'+_0x182c74[_0x20da97(0x25f)]+_0x20da97(0x249)+_0x182c74[_0x20da97(0x1c4)]);}else!newBot&&logger['simple'](_0x20da97(0x1a9));if(newBot)addBot();logger[_0x20da97(0x2b1)]('-----------------------------------------------------------------------------------'),logger[_0x20da97(0x2b1)](''),await logger[_0x20da97(0x221)](_0x20da97(0x1d0)+nodeversion),await logger[_0x20da97(0x221)](_0x20da97(0x269),_0x11fda6);}function startSocket(){io['on']('connection',_0xf39f11=>{const _0x4140f6=_0x429f;let _0x591c10,_0x3b502b,_0x36ed61,_0x36c440,_0x590c11;const _0x31e700=_0xf39f11[_0x4140f6(0x35c)][_0x4140f6(0x323)][_0x4140f6(0x383)];_0x3b502b=_0x31e700[_0x4140f6(0x1bf)](/bot[0-9]{3}/);if(_0x3b502b)_0x36ed61=_0x3b502b[0x0][_0x4140f6(0x1bf)](/[0-9]{3}/);if(_0x36ed61)_0x591c10=_0x36ed61[0x0];else _0x591c10=_0x4140f6(0x2c4);const _0x1c4b6f=_0xf39f11[_0x4140f6(0x35c)][_0x4140f6(0x2f1)][_0x4140f6(0x2d0)];if(!_0x1c4b6f)_0xf39f11[_0x4140f6(0x2b5)]('status',{'publicKey':secure[_0x4140f6(0x261)]});else{_0x36c440=timelyDecrypt(_0x1c4b6f,![]);if(!_0x36c440)_0xf39f11[_0x4140f6(0x2b5)]('status',{'publicKey':secure[_0x4140f6(0x261)]});else{_0x590c11=normalizeIP(_0xf39f11[_0x4140f6(0x385)][_0x4140f6(0x2bc)])['store'];if(!devices[_0x36c440])devices[_0x36c440]={'uuid':_0x36c440,'access':{'token':null}};devices[_0x36c440]['ip']=_0x590c11;const _0x1ce784=addClient(_0xf39f11['id'],_0x36c440,_0x591c10);setAccess(_0x1ce784),emitMessages(),_0xf39f11['on'](_0x4140f6(0x1a0),_0x51fa70=>{const _0x5554ed=_0x4140f6,_0x43d66d=timelyDecrypt(_0x51fa70[_0x5554ed(0x1b5)]);if(_0x43d66d){_0x51fa70={'username':_0x51fa70['username'],'password':_0x43d66d},devices[_0x36c440][_0x5554ed(0x1e5)]=validateCredentials(_0x51fa70,_0x36c440);if(devices[_0x36c440][_0x5554ed(0x1e5)]['allow']==![]&&devices[_0x36c440][_0x5554ed(0x1e5)][_0x5554ed(0x339)]=='2FA\x20login\x20required')_0xf39f11[_0x5554ed(0x2b5)]('status',{'access':devices[_0x36c440][_0x5554ed(0x1e5)]}),loginAccess2FA(_0x36c440,_0x590c11);else{if(devices[_0x36c440][_0x5554ed(0x1e5)]['allow']==![]&&devices[_0x36c440][_0x5554ed(0x1e5)][_0x5554ed(0x339)]==_0x5554ed(0x1a3))_0xf39f11[_0x5554ed(0x2b5)](_0x5554ed(0x23f),{'access':devices[_0x36c440][_0x5554ed(0x1e5)]});else devices[_0x36c440][_0x5554ed(0x1e5)][_0x5554ed(0x332)]&&devices[_0x36c440][_0x5554ed(0x1e5)][_0x5554ed(0x339)]==_0x5554ed(0x2cc)&&(getClientsWithUuid(_0x36c440)[_0x5554ed(0x34b)](_0x1d3672=>{setAccess(_0x1d3672);}),logger[_0x5554ed(0x221)](_0x5554ed(0x2e8)+_0x36c440[_0x5554ed(0x291)](-0x8)),setTokenRefresh(_0x36c440),setSessionTimeout(_0x5554ed(0x1a0),_0x36c440));}}else logger[_0x5554ed(0x2d3)](_0x5554ed(0x2ad));}),_0xf39f11['on'](_0x4140f6(0x353),()=>{resetPassword();}),_0xf39f11['on'](_0x4140f6(0x384),_0x4bbacf=>{removeClient(_0xf39f11['id']);}),_0x591c10==_0x4140f6(0x2c4)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3cf546){const _0x200ed2=_0x440a84;if(_0x3cf546!=_0x200ed2(0x2c4)&&config[_0x200ed2(0x26a)]!=''){if(pid[_0x3cf546])pid[_0x3cf546]['send']({'function':_0x200ed2(0x32e),'args':null});}_0x3cf546!=_0x200ed2(0x2c4)&&broadcastToBots(_0x200ed2(0x217),JSON[_0x200ed2(0x382)](config));}function reloadBotManager(){const _0x32f55b=_0x440a84;getClientsWithBotID('botmanager')[_0x32f55b(0x34b)](_0x88af0a=>{const _0x334336=_0x32f55b;getSocket(_0x88af0a['id'])[_0x334336(0x2b5)]('status',{'access':{'allow':![],'reason':_0x334336(0x30a),'token':null}});});}function getSocket(_0x50b3d9){const _0x2fa2d7=_0x440a84;return io[_0x2fa2d7(0x1a1)][_0x2fa2d7(0x1a1)][_0x2fa2d7(0x272)](_0x50b3d9);}function setAccess(_0x1c367d){const _0x40fb61=_0x440a84,_0x99498e=getSocket(_0x1c367d['id']),_0x5a878c=_0x1c367d['uuid'],_0x56b85a=_0x1c367d[_0x40fb61(0x20c)];devices[_0x5a878c][_0x40fb61(0x1e5)]=validateAccess(devices[_0x5a878c]['access']['token'],_0x5a878c),logger[_0x40fb61(0x221)](_0x40fb61(0x313)+devices[_0x5a878c][_0x40fb61(0x1e5)]['reason']+_0x40fb61(0x1ed)+_0x1c367d['id']['slice'](-0x8)+_0x40fb61(0x1bd)+_0x5a878c[_0x40fb61(0x291)](-0x8)),_0x99498e['join'](_0x5a878c);if(devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x332)]){_0x99498e[_0x40fb61(0x1f0)](_0x56b85a);if(_0x56b85a==_0x40fb61(0x2c4))initializeSocketBotManager(_0x99498e);else initializeSocketBot(_0x99498e);initClient(_0x56b85a);}devices[_0x5a878c]['access'][_0x40fb61(0x1b9)]&&devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x339)]==_0x40fb61(0x296)&&setSessionTimeout(_0x40fb61(0x210),_0x5a878c),devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x1b9)]&&devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x339)]==_0x40fb61(0x2de)&&setSessionTimeout(_0x40fb61(0x1a0),_0x5a878c),_0x99498e[_0x40fb61(0x2b5)]('status',{'status':_0x1c367d[_0x40fb61(0x205)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5a878c][_0x40fb61(0x1e5)],'externalip':devices[_0x5a878c]['ip'],'publicKey':secure[_0x40fb61(0x261)],'userid':settings[_0x40fb61(0x341)],'validInstallation':validInstallation}),devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x332)]==![]&&devices[_0x5a878c][_0x40fb61(0x1e5)][_0x40fb61(0x339)]=='2FA\x20required'&&temporaryAccess2FA(_0x5a878c,devices[_0x5a878c]['ip']);}function setSessionTimeout(_0x5413d7,_0x2741e2){const _0x4f73ab=_0x440a84;let _0x5b7b2c;if(_0x5413d7==_0x4f73ab(0x1a0))_0x5b7b2c=loginExpiry*0x3c*0x3e8;else _0x5b7b2c=devices[_0x2741e2][_0x4f73ab(0x242)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x2741e2][_0x4f73ab(0x242)][_0x4f73ab(0x2ae)]);if(devices[_0x2741e2][_0x4f73ab(0x29e)])clearTimeout(devices[_0x2741e2][_0x4f73ab(0x29e)]);devices[_0x2741e2]['pidExpireLogin']=setTimeout(()=>{const _0x1f74a9=_0x4f73ab;if(devices[_0x2741e2][_0x1f74a9(0x1f4)])clearTimeout(devices[_0x2741e2][_0x1f74a9(0x1f4)]);removeSocketListeners(_0x2741e2),addBlacklist(_0x2741e2),devices[_0x2741e2][_0x1f74a9(0x242)]=null,devices[_0x2741e2][_0x1f74a9(0x2d9)]=null,devices[_0x2741e2][_0x1f74a9(0x1e5)]['token']=null,logger[_0x1f74a9(0x221)]('Session\x20expired\x20for\x20user\x20...'+_0x2741e2[_0x1f74a9(0x291)](-0x8)),devices[_0x2741e2][_0x1f74a9(0x1e5)]=validateAccess(devices[_0x2741e2][_0x1f74a9(0x1e5)][_0x1f74a9(0x1b9)],_0x2741e2),!(devices[_0x2741e2][_0x1f74a9(0x1e5)][_0x1f74a9(0x332)]&&devices[_0x2741e2][_0x1f74a9(0x1e5)]['reason']==_0x1f74a9(0x2a5))&&(_0x5413d7=='login'?io['to'](_0x2741e2)[_0x1f74a9(0x2b5)]('status',{'access':{'allow':![],'reason':_0x1f74a9(0x1d7),'token':null}}):io['to'](_0x2741e2)[_0x1f74a9(0x2b5)](_0x1f74a9(0x23f),{'access':{'allow':![],'reason':_0x1f74a9(0x27c),'token':null}})),devices[_0x2741e2][_0x1f74a9(0x1e5)][_0x1f74a9(0x1b9)]=null;},_0x5b7b2c);}function setTokenRefresh(_0x5e87b3){const _0x2df83c=_0x440a84;if(devices[_0x5e87b3][_0x2df83c(0x1f4)])clearTimeout(devices[_0x5e87b3][_0x2df83c(0x1f4)]);devices[_0x5e87b3][_0x2df83c(0x1f4)]=setTimeout(()=>{const _0xa1d396=_0x2df83c;getClientsWithUuid(_0x5e87b3)['length']!=0x0?(devices[_0x5e87b3]['access']=refreshToken(_0x5e87b3),io['to'](_0x5e87b3)['emit'](_0xa1d396(0x23f),{'status':_0xa1d396(0x36d),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5e87b3][_0xa1d396(0x1e5)],'externalip':devices[_0x5e87b3]['ip'],'publicKey':secure[_0xa1d396(0x261)],'validInstallation':validInstallation}),setTokenRefresh(_0x5e87b3)):clearTimeout(devices[_0x5e87b3][_0xa1d396(0x1f4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x55f3c5){const _0x4daed9=_0x440a84,_0xb73061=getClient(_0x55f3c5['id'])[_0x4daed9(0x24c)];_0x55f3c5['emit'](_0x4daed9(0x217),config),_0x55f3c5['emit'](_0x4daed9(0x1f9),cleanSettings()),_0x55f3c5['on'](_0x4daed9(0x19f),_0x5e8999=>{const _0x3a3316=_0x4daed9;if(validateAccess(_0x5e8999,_0xb73061)[_0x3a3316(0x332)])addBot();else logger[_0x3a3316(0x2d3)](_0x3a3316(0x1b2));}),_0x55f3c5['on'](_0x4daed9(0x1df),(_0x517a3d,_0x56f0a4)=>{const _0x2e5110=_0x4daed9;if(validateAccess(_0x56f0a4,_0xb73061)[_0x2e5110(0x332)])toggleBot(_0x517a3d[_0x2e5110(0x25f)],_0x517a3d[_0x2e5110(0x23f)],_0x517a3d[_0x2e5110(0x235)]);else logger[_0x2e5110(0x2d3)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x55f3c5['on'](_0x4daed9(0x1e4),(_0x536e72,_0x54902a)=>{const _0x6e328c=_0x4daed9;if(validateAccess(_0x54902a,_0xb73061)[_0x6e328c(0x332)])toggleBotMode(_0x536e72);else logger[_0x6e328c(0x2d3)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x55f3c5['on'](_0x4daed9(0x1fe),(_0x4e5c89,_0x5924af)=>{const _0x484f9b=_0x4daed9;if(validateAccess(_0x5924af,_0xb73061)[_0x484f9b(0x332)])deleteBot(_0x4e5c89);else logger[_0x484f9b(0x2d3)](_0x484f9b(0x31a));}),_0x55f3c5['on'](_0x4daed9(0x1bb),(_0x57d82f,_0x5975f2)=>{const _0x39f9a1=_0x4daed9;if(validateAccess(_0x5975f2,_0xb73061)['allow'])storeSettings(_0x57d82f,!![]);else logger[_0x39f9a1(0x2d3)](_0x39f9a1(0x31c));}),_0x55f3c5['on'](_0x4daed9(0x1f6),_0xec5ef1=>{const _0x2c3fec=_0x4daed9;if(validateAccess(_0xec5ef1,_0xb73061)[_0x2c3fec(0x332)])updateBB(_0x2c3fec(0x2f5));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x55f3c5['on'](_0x4daed9(0x1be),_0x176aa6=>{const _0x1f559d=_0x4daed9;if(validateAccess(_0x176aa6,_0xb73061)[_0x1f559d(0x332)])updateBB('reinstall');else logger[_0x1f559d(0x2d3)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x55f3c5['on'](_0x4daed9(0x2ee),_0x2067c2=>{const _0x4511a7=_0x4daed9;if(validateAccess(_0x2067c2,_0xb73061)[_0x4511a7(0x332)]){const _0x38471b=getClient(_0x55f3c5['id']);if(_0x38471b)getBackupFiles(_0x38471b['uuid']);else logger[_0x4511a7(0x2d3)](_0x4511a7(0x35e));}else logger[_0x4511a7(0x2d3)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x55f3c5['on'](_0x4daed9(0x236),(_0x4ddc27,_0x6fd92c)=>{const _0x517f8e=_0x4daed9;if(validateAccess(_0x6fd92c,_0xb73061)['allow'])restoreBackupFile(_0x4ddc27);else logger[_0x517f8e(0x2d3)](_0x517f8e(0x368));}),_0x55f3c5['on']('get-messages',_0x3e2c2d=>{if(validateAccess(_0x3e2c2d,_0xb73061)['allow'])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x55f3c5['on']('confirm-message',(_0x1f8d06,_0xa66f8e)=>{const _0x514b64=_0x4daed9;if(validateAccess(_0xa66f8e,_0xb73061)[_0x514b64(0x332)])confirmMessage(_0x1f8d06);else logger[_0x514b64(0x2d3)](_0x514b64(0x1dd));}),_0x55f3c5['on']('logout',_0x2d2786=>{const _0x11e0dc=_0x4daed9;if(validateAccess(_0x2d2786,_0xb73061)[_0x11e0dc(0x332)]){if(devices[_0xb73061]['pidRefreshToken'])clearTimeout(devices[_0xb73061][_0x11e0dc(0x1f4)]);if(devices[_0xb73061][_0x11e0dc(0x29e)])clearTimeout(devices[_0xb73061][_0x11e0dc(0x29e)]);removeSocketListeners(getClient(_0x55f3c5['id'])[_0x11e0dc(0x24c)]),addBlacklist(_0xb73061),devices[_0xb73061]['telegramIpApproval']=null,devices[_0xb73061][_0x11e0dc(0x2d9)]=null,devices[_0xb73061][_0x11e0dc(0x1e5)][_0x11e0dc(0x1b9)]=null,logger[_0x11e0dc(0x221)]('Logged\x20out\x20user\x20...'+_0xb73061[_0x11e0dc(0x291)](-0x8)),io['to'](getClient(_0x55f3c5['id'])['uuid'])[_0x11e0dc(0x2b5)](_0x11e0dc(0x23f),{'access':{'allow':![],'reason':_0x11e0dc(0x2f7),'token':null}});}else logger[_0x11e0dc(0x2d3)](_0x11e0dc(0x1e3));});}function _0xdac0(){const _0x31ef22=['Deleted\x20Bot\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','sort','split','Unauthorized\x20attempt\x20to\x20confirm\x20message','Password\x20reset\x20rejected','update-bot','exit','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20log\x20out','toggle-bot-mode','access','portfolio_','\x20(2)','then','User\x20has\x20been\x20validated','bb-config.json','apiSecret','data','\x20|\x20client:\x20...','isValid','No\x20bots\x20running\x20right\x20now','join','new','remove','metrics_','pidRefreshToken','511486ryiXXo','update-bb','getHours','headless','settings','mkdirSync','hasOwnProperty','7GclXAh','telegramToken','delete-bot','params','ipc','Password\x20has\x20been\x20reset\x20to:\x20','2FA\x20login\x20required','SIGINT','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','server','login\x20token\x20valid','bbvNew','place-order','Token\x20blacklisted','decrypt','Notifications\x20types:\x20','bot','started','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','telegramChatId','2FA','api-eu.mixpanel.com','family','No\x20authentication\x20token','getStartingBalances','Login\x20rejected','clientip','bots','config/','startsWith','Invalid\x20username\x20or\x20IP\x20address','build2','messages','chat','settings.','Restoring\x20bot(s)\x20from\x20backup','lowdb/adapters/FileSync','debug','#RES#\x20if\x20running\x20on\x20server','Starting\x20#RED#Balance\x20Bot\x20v','Bot\x20','showname','stop','production','Restore\x20backup\x20file\x20','backup/','isDirectory','test','createServer','sendPortfolioTelegram','internal','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','backup-full','Notifications\x20disabled\x0a','ipaddr.js','\x20>\x20','version','live','restore-backup-file','reinstall','Invalid\x20authentication\x20token\x20(2)','function','log','bbUsername','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','address','\x1b[35m','status','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','telegramIpApproval','/:bot/coins','add','clients','order','logs','HTML','\x20|\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','uuid','loginRequired','keys','/output-000.log','1000','/off\x20-\x20stop\x20bot(s)\x0a','range','send','secret','resetpw_yes','Alerts','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','storeConfiguration','type','bcryptjs','RSA-OAEP','config_all','15\x20min','24352930wwPwiO','botID','\x20mode','publicKey','sha256','\x1b[36m','All\x20bots\x20running\x20right\x20now','privateKey','showConfig','get-starting-balances','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Network\x20Interfaces:','apiKey','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','get-portfolio','format','existsSync','launch','all','2FA\x20required','get','parse','orders','getFullYear','toString','Crypt','zip/','success','assign','temporary\x20access\x20rejected','temporary\x20access\x20timeout','\x20(1)','statSync','get-logs','2528195VyTJuH','graphql-request','logout','/:bot/performance','backup-full.zip','-----------------------------------------------------------------------------------','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','user','Error\x20while\x20deleting\x20config\x20files:\x20','output-000.log','5684190ZomCuX','1566333MEZFGz','store','static','output-001.log','667956NsrSzU','slice','/disable\x20-\x20disable\x20notifications\x0a','store-fiat','latestversion','config_alerts','temporary\x20token\x20generated','Yes','readdirSync','Starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20','uuid-random','Notifications\x20enabled','push','pidExpireLogin','Markdown','[ip-address]','/on\x20-\x20start\x20bot(s)\x0a','button','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','resetHistory','login\x20not\x20required','string','command','reinstall_yes','#RES#\x20if\x20running\x20locally\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','-config.json','Backup\x20file\x20uploaded','Unauthorized\x20login\x20attempt\x20(timeout)','timestamp','30\x20min','download','simple','/:bot/portfolio','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','getTime','emit','createWriteStream','catch','toIPv4Address','_data','disabled','apply','remoteAddress','0.0.0','hashSync','auto','username','constructor','Ok,\x20will\x20send\x20alert\x20notifications\x20only','accept','botmanager','restore_no','Ok,\x20will\x20send\x20order\x20notifications\x20only','config_orders','search','args','sendFile','node-zip','login\x20token\x20generated','Telegraf\x20error:','running','set','encryptedUuid','find','telegrammsg','full','index.html','whitelistEnabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','randomFillSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','telegram2FaApproval','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','secure','enabled','************','2FA\x20login\x20token\x20generated','***','off_','mtime','map','/status\x20-\x20show\x20bot(s)\x20status\x0a','post','placeOrder','writeFileSync','tempaccess_5','Logged\x20in\x20user\x20...','names','(((.+)+)+)+$','action','blacklist','socket','get-backup-files','Temporary\x20access\x20rejected','socket.io','auth','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Notifications\x20disabled','cancelLoading','update','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','logged\x20out','127.0.0.1','sendMessage','/restart\x20-\x20restart\x20bot(s)\x0a','store-headless','Enabled\x20Bot\x20','getPortfolio',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','manual','temp/','config','Unauthorized\x20attempt\x20to\x20show\x20configuration','jsonwebtoken','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','mode','telegram','Starting\x20Balance\x20Bot\x20update','port','versions','reload','request','\x1b[31m','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','/help\x20-\x20show\x20available\x20commands\x0a','Unauthorized\x20attempt\x20to\x20store\x20configuration','confirm-message','5344AzhfaY','kill','Setting\x20access:\x20','Access\x20enabled\x20for\x20','fork','output-002.log','Unauthorized\x20attempt\x20to\x20download\x20','Error\x20removing\x20old\x20backup\x20files:','Backup\x20file\x20unzipped\x20and\x20stored','Unauthorized\x20attempt\x20to\x20delete\x20bot','Server','Unauthorized\x20attempt\x20to\x20update\x20settings','lastmsgemitted','temporaryAccessAllowed','\x20to\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','<b>Balance\x20Bot\x20Status:</b>\x0a','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','headers','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','store-configuration','stopped','/:bot/support','-performance.json','close','callback','Orders','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','kind','initclient','use','getDate','#RES#\x20','allow','hybrid-crypto-js','login\x20required','resetpw_no','/upload-backup','track','environment','reason','copyFileSync','size','replace','rmSync','onepagemode','All','backup-full@','userid','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','RSA','host','once','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','restart_','defaults','expiry','timeshift','forEach','::1','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','apiPassword','SIGTERM','output-003.log','telegramUsername','number','reset-password','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','new-disabled','axios','login2fa_','filter','reject','Restore\x20process\x20aborted','toIPv4MappedAddress','handshake','getUTCHours','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','metrics','exec','IPv4','tempaccess_reject','*$1*','\x20only\x0a','2GjgrGa','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','toggle','Restore\x20process\x20confirmed','reply','getMinutes','connected','randomBytes','=>\x20Go\x20to\x20#CYA#http://','getMonth','.zip','help','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','padStart','show-config','\x1b[33m','alerts','tkn','telegramEnabled','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','toggle_','telegramEvents','inlineKeyboard','file','lastmsgtelegram','sendMetricsTelegram','yes','stringify','referer','disconnect','conn','bb-settings.json','Idling\x20(','value','Telegram\x20error:','inherit','hex','write','update_yes','disable','restore_yes','bbPassword','NTBA_FIX_319','getSeconds','express','DEFLATE','notification','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','add-bot','login','sockets','warning','invalid\x20credentials','2FA\x20login\x20rejected','/:bot','deleteHistoryAlerts','backupfile','f2aRequired','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','::ffff:127.0.0.1','bbvReceive','1098zniZwo','Failed\x20to\x20download\x20','ipv6','name','build','exp','Unauthorized\x20attempt\x20to\x20add\x20bot','Starting\x20(','\x1b[34m','password','http','binary','from','token','storeFiat','store-settings','event','\x20|\x20user:\x20...','reinstall-bb','match','unlinkSync','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','argv','reset-history','botname','bot-','3000','editMessageReplyMarkup','sortBy','files','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','message','max','All\x20bots','listen','bb-secure.json','Node.js\x20v','-results.json','staging','readFileSync','version.json','Logged\x20out\x20user\x20...','length','access\x20timeout','backup'];_0xdac0=function(){return _0x31ef22;};return _0xdac0();}function initializeSocketBot(_0x4c96fb){const _0x287b9b=_0x440a84,_0x1a49b6=getClient(_0x4c96fb['id'])[_0x287b9b(0x20c)],_0x2b541a=getClient(_0x4c96fb['id'])[_0x287b9b(0x24c)];_0x4c96fb['on'](_0x287b9b(0x27f),(_0x569160,_0x4b1cdd)=>{const _0x6f053c=_0x287b9b;if(validateAccess(_0x4b1cdd,_0x2b541a)['allow']){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x6f053c(0x253)]({'function':'emitHistory','args':_0x569160});}else logger[_0x6f053c(0x2d3)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x4c96fb['on']('delete-alerts',(_0x3b15fe,_0x3870f0)=>{const _0x14439e=_0x287b9b;if(validateAccess(_0x3870f0,_0x2b541a)['allow']){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x14439e(0x253)]({'function':_0x14439e(0x1a6),'args':_0x3b15fe});}else logger[_0x14439e(0x2d3)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x4c96fb['on'](_0x287b9b(0x26c),(_0x1b99f1,_0x192a74)=>{const _0x388491=_0x287b9b;if(validateAccess(_0x192a74,_0x2b541a)[_0x388491(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x388491(0x253)]({'function':_0x388491(0x2fd),'args':_0x1b99f1});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x4c96fb['on'](_0x287b9b(0x325),(_0x241cb5,_0x403732)=>{const _0x4fd9c1=_0x287b9b;if(validateAccess(_0x403732,_0x2b541a)[_0x4fd9c1(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x4fd9c1(0x253)]({'function':_0x4fd9c1(0x258),'args':_0x241cb5});}else logger['full'](_0x4fd9c1(0x30f));}),_0x4c96fb['on'](_0x287b9b(0x2fb),(_0x41b40b,_0x13f83c)=>{const _0x47420e=_0x287b9b;if(validateAccess(_0x13f83c,_0x2b541a)[_0x47420e(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6]['send']({'function':'storeHeadless','args':_0x41b40b});}else logger[_0x47420e(0x2d3)](_0x47420e(0x268));}),_0x4c96fb['on'](_0x287b9b(0x293),(_0x63a673,_0x5e7bce)=>{const _0x57a4d9=_0x287b9b;if(validateAccess(_0x5e7bce,_0x2b541a)['allow']){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x57a4d9(0x253)]({'function':_0x57a4d9(0x1ba),'args':_0x63a673});}else logger[_0x57a4d9(0x2d3)](_0x57a4d9(0x240));}),_0x4c96fb['on'](_0x287b9b(0x1c3),_0x5d72a7=>{const _0x544166=_0x287b9b;if(validateAccess(_0x5d72a7,_0x2b541a)['allow']){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x544166(0x253)]({'function':_0x544166(0x2a4),'args':null});}else logger[_0x544166(0x2d3)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x4c96fb['on'](_0x287b9b(0x267),_0x416e24=>{const _0x56dbf8=_0x287b9b;if(validateAccess(_0x416e24,_0x2b541a)[_0x56dbf8(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6]['send']({'function':_0x56dbf8(0x214),'args':null});}else logger['full'](_0x56dbf8(0x354));}),_0x4c96fb['on'](_0x287b9b(0x208),(_0x15cc6e,_0x4c315f)=>{const _0x5905bd=_0x287b9b;if(validateAccess(_0x4c315f,_0x2b541a)['allow']){if(pid[_0x1a49b6])pid[_0x1a49b6]['send']({'function':_0x5905bd(0x2e5),'args':_0x15cc6e});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x4c96fb['on']('cancel-loading',_0x4f8321=>{const _0x4dad59=_0x287b9b;if(validateAccess(_0x4f8321,_0x2b541a)[_0x4dad59(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x4dad59(0x253)]({'function':_0x4dad59(0x2f4),'args':null});}else logger[_0x4dad59(0x2d3)](_0x4dad59(0x23c));}),_0x4c96fb['on'](_0x287b9b(0x375),_0x27b1b8=>{const _0x1e179d=_0x287b9b;if(validateAccess(_0x27b1b8,_0x2b541a)[_0x1e179d(0x332)]){if(pid[_0x1a49b6])pid[_0x1a49b6][_0x1e179d(0x253)]({'function':_0x1e179d(0x266),'args':null});}else logger[_0x1e179d(0x2d3)](_0x1e179d(0x302));}),_0x4c96fb['on'](_0x287b9b(0x1f6),_0x22b0dc=>{const _0x344482=_0x287b9b;if(validateAccess(_0x22b0dc,_0x2b541a)[_0x344482(0x332)])updateBB('update');else logger[_0x344482(0x2d3)](_0x344482(0x24a));}),_0x4c96fb['on']('get-messages',_0x4a2057=>{const _0x2a2724=_0x287b9b;if(validateAccess(_0x4a2057,_0x2b541a)[_0x2a2724(0x332)])getMessages();else logger[_0x2a2724(0x2d3)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4c96fb['on'](_0x287b9b(0x310),(_0x5f1f2,_0x16987c)=>{const _0x2e72cf=_0x287b9b;if(validateAccess(_0x16987c,_0x2b541a)[_0x2e72cf(0x332)])confirmMessage(_0x5f1f2);else logger['full'](_0x2e72cf(0x1dd));}),_0x4c96fb['on'](_0x287b9b(0x282),_0x17f2f6=>{const _0x2a0716=_0x287b9b;if(validateAccess(_0x17f2f6,_0x2b541a)[_0x2a0716(0x332)]){if(devices[_0x2b541a]['pidRefreshToken'])clearTimeout(devices[_0x2b541a][_0x2a0716(0x1f4)]);if(devices[_0x2b541a][_0x2a0716(0x29e)])clearTimeout(devices[_0x2b541a][_0x2a0716(0x29e)]);removeSocketListeners(getClient(_0x4c96fb['id'])[_0x2a0716(0x24c)]),addBlacklist(_0x2b541a),devices[_0x2b541a]['telegramIpApproval']=null,devices[_0x2b541a]['telegram2FaApproval']=null,devices[_0x2b541a][_0x2a0716(0x1e5)][_0x2a0716(0x1b9)]=null,logger[_0x2a0716(0x221)](_0x2a0716(0x1d5)+_0x2b541a[_0x2a0716(0x291)](-0x8)),io['to'](getClient(_0x4c96fb['id'])[_0x2a0716(0x24c)])[_0x2a0716(0x2b5)](_0x2a0716(0x23f),{'access':{'allow':![],'reason':_0x2a0716(0x2f7),'token':null}});}else logger[_0x2a0716(0x2d3)](_0x2a0716(0x1e3));});}function removeSocketListeners(_0xfdd523){const _0xd71f8a=_0x440a84;getClientsWithUuid(_0xfdd523)[_0xd71f8a(0x34b)](_0x274892=>{getSocket(_0x274892['id'])['removeAllListeners']();});}function cleanSettings(){const _0xa5c761=_0x440a84;let _0x2fa817=settings;return settings[_0xa5c761(0x1fd)]&&settings[_0xa5c761(0x1fd)]!=''&&(_0x2fa817={..._0x2fa817,'telegramToken':'************'}),settings[_0xa5c761(0x198)]&&settings[_0xa5c761(0x198)]!=''&&(_0x2fa817={..._0x2fa817,'bbPassword':'************'}),(settings[_0xa5c761(0x198)]&&settings[_0xa5c761(0x198)]==_0xa5c761(0x2df)||settings['telegramToken']&&settings[_0xa5c761(0x1fd)]==_0xa5c761(0x2df))&&(_0x2fa817={..._0x2fa817,'restored':{'password':settings[_0xa5c761(0x198)]==_0xa5c761(0x2df),'telegram':settings['telegramToken']==_0xa5c761(0x2df)}}),_0x2fa817;}async function updateBB(_0x133e17){const _0x527a3e=_0x440a84;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x3517d3=>{const _0x12faba=_0x429f;restartBot(_0x3517d3[_0x12faba(0x25f)]);});if(_0x133e17==_0x527a3e(0x2f5))process[_0x527a3e(0x253)]({'update':!![],'environment':environment},_0x4c8cdf=>{});else _0x133e17==_0x527a3e(0x237)&&process[_0x527a3e(0x253)]({'reinstall':!![],'environment':environment},_0x2fbb0a=>{});}function startBot(_0x4b828e,_0x608a8f,_0x2d439a){const _0x2c9b44=_0x440a84;if(debugging)_0x4b828e[_0x2c9b44(0x29d)]('-d');let _0x3fda19=![];const _0x2be005=_0x4b828e[0x0];_0x608a8f={..._0x608a8f,'stdio':[_0x2c9b44(0x192),'inherit',_0x2c9b44(0x192),_0x2c9b44(0x200)]},pid[_0x2be005]=childProcess[_0x2c9b44(0x315)](botfile,_0x4b828e,_0x608a8f),pid[_0x2be005]['on']('message',_0x299a3f=>{const _0x5843c7=_0x2c9b44;switch(Object['keys'](_0x299a3f)[0x0]){case _0x5843c7(0x1c4):updateBotName(_0x2be005,_0x299a3f['botname']);break;case'updatebotmanager':updateBotManager();break;case _0x5843c7(0x23f):updateStatus(_0x2be005,_0x299a3f[_0x5843c7(0x23f)]);break;case _0x5843c7(0x235):updateLive(_0x2be005,_0x299a3f[_0x5843c7(0x235)]);break;case _0x5843c7(0x20d):updateLive(_0x2be005,_0x299a3f['started']),io['to'](_0x2be005)[_0x5843c7(0x2b5)](_0x5843c7(0x23f),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x5843c7(0x226):_0x299a3f[_0x5843c7(0x226)]=='restart'&&restartBot(_0x2be005);_0x299a3f[_0x5843c7(0x226)]==_0x5843c7(0x312)&&toggleBot(_0x2be005,'disabled',_0x5843c7(0x326));break;case _0x5843c7(0x306):sendTelegramBot(_0x2be005,_0x299a3f[_0x5843c7(0x306)]);break;case _0x5843c7(0x2d2):sendTelegramMsg(_0x299a3f['telegrammsg']);break;case'function':io['to'](_0x2be005)['emit'](_0x299a3f[_0x5843c7(0x239)],_0x299a3f[_0x5843c7(0x2c9)]);break;}}),pid[_0x2be005]['on']('error',function(_0x50ea95){if(_0x3fda19)return;_0x3fda19=!![],_0x2d439a(_0x50ea95);}),pid[_0x2be005]['on'](_0x2c9b44(0x1e0),async function(_0xcfd20){const _0x3f2a56=_0x2c9b44;if(installingUpdate){logger[_0x3f2a56(0x221)](_0x3f2a56(0x322)),io[_0x3f2a56(0x329)]();return;}if(_0x3fda19)return;_0x3fda19=!![],_0x2d439a(null);const _0xf12bfa=dbConfig[_0x3f2a56(0x272)](_0x3f2a56(0x217))[_0x3f2a56(0x2d1)]({'botID':_0x2be005})['value']();_0xf12bfa&&(_0xf12bfa['status']==_0x3f2a56(0x2dc)||_0xf12bfa[_0x3f2a56(0x23f)]==_0x3f2a56(0x1f1))&&(await sleep(0x3e8),updateLive(_0x2be005,_0x3f2a56(0x326)),logger[_0x3f2a56(0x2d3)]('Restarting\x20Bot\x20'+_0x2be005),startBot([_0x2be005,userID],{'cwd':bbpath},function(_0x3cab12){const _0x52c9f8=_0x3f2a56;if(_0x3cab12)logger[_0x52c9f8(0x2d3)](_0x3cab12);}));});}function stopBot(_0x4f77df){const _0x1f6c74=_0x440a84;getClientsWithBotID(_0x4f77df)[_0x1f6c74(0x34b)](_0x1decf2=>{const _0x2d6c01=_0x1f6c74;getSocket(_0x1decf2['id'])[_0x2d6c01(0x384)](!![]),removeClient(_0x1decf2['id']);}),pid[_0x4f77df]&&(pid[_0x4f77df]['kill'](),pid[_0x4f77df]=null);}function restartBot(_0x1d1e70){const _0x5df284=_0x440a84;if(pid[_0x1d1e70])pid[_0x1d1e70][_0x5df284(0x312)]();}function addBot(){const _0x4fe1bf=_0x440a84;let _0xd64b0;for(let _0x2fb090=0x1;_0x2fb090<0x3e9;_0x2fb090++){_0xd64b0=_0x2fb090[_0x4fe1bf(0x276)]()[_0x4fe1bf(0x374)](0x3,'0');let _0x1291e8=config['find'](_0x1b1e33=>_0x1b1e33[_0x4fe1bf(0x25f)]==_0xd64b0);if(!_0x1291e8)break;}if(_0xd64b0===_0x4fe1bf(0x250)){logger[_0x4fe1bf(0x2d3)](_0x4fe1bf(0x257));return;}logger[_0x4fe1bf(0x2d3)](_0x4fe1bf(0x299)+_0xd64b0),dbConfig['get']('bots')[_0x4fe1bf(0x29d)]({'botID':_0xd64b0,'botname':_0x4fe1bf(0x224)+_0xd64b0,'status':_0x4fe1bf(0x1f1),'live':''})[_0x4fe1bf(0x194)](),startBot([_0xd64b0,userID],{'cwd':bbpath},function(_0x247ca5){const _0x791a7=_0x4fe1bf;if(_0x247ca5)logger[_0x791a7(0x2d3)](_0x247ca5);}),config=getConfiguration(),io['to'](_0x4fe1bf(0x2c4))[_0x4fe1bf(0x2b5)](_0x4fe1bf(0x217),config),broadcastToBots(_0x4fe1bf(0x217),JSON['stringify'](config));}function deleteBot(_0x1059a1){const _0x26c752=_0x440a84;getClientsWithBotID(_0x1059a1)['forEach'](_0x1bc1c2=>{const _0xc0f10a=_0x429f;getSocket(_0x1bc1c2['id'])[_0xc0f10a(0x384)](!![]),removeClient(_0x1bc1c2['id']);}),dbConfig[_0x26c752(0x272)](_0x26c752(0x217))[_0x26c752(0x1f2)]({'botID':_0x1059a1})['write'](),logger[_0x26c752(0x2d3)](_0x26c752(0x1d9)+_0x1059a1),stopBot(_0x1059a1);try{if(fs[_0x26c752(0x26e)](path['join'](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x2ab))))fs[_0x26c752(0x1c0)](path['join'](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x2ab)));if(fs[_0x26c752(0x26e)](path[_0x26c752(0x1f0)](configpath,_0x26c752(0x1c5)+_0x1059a1+'-events.json')))fs[_0x26c752(0x1c0)](path[_0x26c752(0x1f0)](configpath,_0x26c752(0x1c5)+_0x1059a1+'-events.json'));if(fs['existsSync'](path[_0x26c752(0x1f0)](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x328))))fs[_0x26c752(0x1c0)](path[_0x26c752(0x1f0)](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x328)));if(fs['existsSync'](path[_0x26c752(0x1f0)](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x1d1))))fs[_0x26c752(0x1c0)](path['join'](configpath,_0x26c752(0x1c5)+_0x1059a1+_0x26c752(0x1d1)));}catch(_0xc623cb){if(_0xc623cb)logger[_0x26c752(0x2d3)](_0x26c752(0x289),_0xc623cb);}config=getConfiguration(),io['to'](_0x26c752(0x2c4))[_0x26c752(0x2b5)](_0x26c752(0x217),config),broadcastToBots(_0x26c752(0x217),JSON['stringify'](config));}function toggleBot(_0x597852,_0x532858,_0x2b2a3a){const _0x44d09e=_0x440a84;dbConfig[_0x44d09e(0x272)](_0x44d09e(0x217))[_0x44d09e(0x2d1)]({'botID':_0x597852})[_0x44d09e(0x27a)]({'status':_0x532858})['assign']({'live':_0x2b2a3a})['write']();if(_0x532858=='enabled'||_0x532858==_0x44d09e(0x1f1))logger[_0x44d09e(0x2d3)](_0x44d09e(0x2fc)+_0x597852),startBot([_0x597852,userID],{'cwd':bbpath},function(_0xb9b130){const _0x54d3f5=_0x44d09e;if(_0xb9b130)logger[_0x54d3f5(0x2d3)](_0xb9b130);});else(_0x532858==_0x44d09e(0x2ba)||_0x532858=='new-disabled')&&(logger[_0x44d09e(0x2d3)]('Disabled\x20Bot\x20'+_0x597852),stopBot(_0x597852));config=getConfiguration(),io['to'](_0x44d09e(0x2c4))[_0x44d09e(0x2b5)](_0x44d09e(0x217),config),broadcastToBots(_0x44d09e(0x217),JSON[_0x44d09e(0x382)](config));}function toggleStatus(_0xa2151c){const _0x44f752=_0x440a84;let _0x220e7c=dbConfig[_0x44f752(0x272)](_0x44f752(0x217))['find']({'botID':_0xa2151c})[_0x44f752(0x190)](),_0x3eae75;if(_0x220e7c[_0x44f752(0x23f)]===_0x44f752(0x2dc))_0x3eae75=_0x44f752(0x2ba);else{if(_0x220e7c[_0x44f752(0x23f)]===_0x44f752(0x1f1))_0x3eae75=_0x44f752(0x355);else{if(_0x220e7c[_0x44f752(0x23f)]==='new-disabled')_0x3eae75=_0x44f752(0x1f1);else{if(_0x220e7c[_0x44f752(0x23f)]===_0x44f752(0x2ba))_0x3eae75=_0x44f752(0x2dc);}}}return _0x3eae75;}function updateStatus(_0x54d5bf,_0xfd0a32){const _0x503f9e=_0x440a84;dbConfig[_0x503f9e(0x272)](_0x503f9e(0x217))[_0x503f9e(0x2d1)]({'botID':_0x54d5bf})[_0x503f9e(0x27a)]({'status':_0xfd0a32})[_0x503f9e(0x194)](),config=getConfiguration(),io['to'](_0x503f9e(0x2c4))[_0x503f9e(0x2b5)](_0x503f9e(0x217),config),broadcastToBots(_0x503f9e(0x217),JSON[_0x503f9e(0x382)](config));}function updateLive(_0x379db1,_0x1b2f7e){const _0x29a5ef=_0x440a84;dbConfig[_0x29a5ef(0x272)](_0x29a5ef(0x217))[_0x29a5ef(0x2d1)]({'botID':_0x379db1})['assign']({'live':_0x1b2f7e})[_0x29a5ef(0x194)](),config=getConfiguration(),io['to'](_0x29a5ef(0x2c4))['emit'](_0x29a5ef(0x217),config),broadcastToBots(_0x29a5ef(0x217),JSON['stringify'](config));}function updateBotName(_0x5d13a8,_0x155f75){const _0x153e44=_0x440a84;dbConfig[_0x153e44(0x272)](_0x153e44(0x217))[_0x153e44(0x2d1)]({'botID':_0x5d13a8})[_0x153e44(0x27a)]({'botname':_0x155f75})['write'](),config=getConfiguration(),io['to'](_0x153e44(0x2c4))[_0x153e44(0x2b5)](_0x153e44(0x217),config),broadcastToBots('bots',JSON[_0x153e44(0x382)](config));}function updateBotManager(){const _0x4285c1=_0x440a84;config=getConfiguration(),io['to']('botmanager')[_0x4285c1(0x2b5)](_0x4285c1(0x217),config),broadcastToBots(_0x4285c1(0x217),JSON[_0x4285c1(0x382)](config));}function toggleBotMode(_0x6a3c47){const _0x5ba8f8=_0x440a84;if(pid[_0x6a3c47])pid[_0x6a3c47][_0x5ba8f8(0x253)]({'function':'toggleBotMode','args':null});else{const _0x3bbcb1=configpath+_0x5ba8f8(0x1c5)+_0x6a3c47+'-config.json',_0x95c30c=fs[_0x5ba8f8(0x1d3)](_0x3bbcb1),_0x190067=JSON[_0x5ba8f8(0x273)](_0x95c30c),_0x59b75d=_0x190067[_0x5ba8f8(0x20c)][0x0]['headless'];_0x190067[_0x5ba8f8(0x20c)][0x0][_0x5ba8f8(0x1f8)]=!_0x59b75d;const _0x437764=JSON['stringify'](_0x190067,null,0x2);fs['writeFileSync'](_0x3bbcb1,_0x437764),config=getConfiguration(),io['to'](_0x5ba8f8(0x2c4))['emit'](_0x5ba8f8(0x217),config),broadcastToBots(_0x5ba8f8(0x217),JSON['stringify'](config));}}function validateTelegram(_0x2aaf5d){const _0x1615f4=_0x440a84;if(_0x2aaf5d[_0x1615f4(0x1b8)][_0x1615f4(0x2c0)]!=settings[_0x1615f4(0x351)]&&'@'+_0x2aaf5d['from'][_0x1615f4(0x2c0)]!=settings[_0x1615f4(0x351)]||_0x2aaf5d[_0x1615f4(0x21d)]['id']!=settings[_0x1615f4(0x20f)])return sendTelegram(_0x2aaf5d[_0x1615f4(0x21d)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x1b6a80=_0x440a84;if(tgBot)tgBot[_0x1b6a80(0x226)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x1b6a80(0x1fd)]);let _0x57a4e8='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x57a4e8+='\x0a',_0x57a4e8+='/enable\x20-\x20enable\x20notifications\x0a',_0x57a4e8+=_0x1b6a80(0x292),_0x57a4e8+=_0x1b6a80(0x1da),_0x57a4e8+=_0x1b6a80(0x2fa),_0x57a4e8+=_0x1b6a80(0x2a1),_0x57a4e8+=_0x1b6a80(0x251),_0x57a4e8+=_0x1b6a80(0x34d),_0x57a4e8+='/names\x20-\x20show\x20bot\x20names\x0a',_0x57a4e8+=_0x1b6a80(0x2e3),_0x57a4e8+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x57a4e8+=_0x1b6a80(0x342),_0x57a4e8+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x57a4e8+=_0x1b6a80(0x1ca),_0x57a4e8+=_0x1b6a80(0x30e);let _0x45f55e=_0x1b6a80(0x2d8);_0x45f55e+='\x0a',_0x45f55e+=_0x57a4e8,tgBot[_0x1b6a80(0x2b7)]((_0x3d175f,_0x4739bf)=>{const _0x2ac2a0=_0x1b6a80;logger[_0x2ac2a0(0x2b1)](getTimeStamp()+_0x2ac2a0(0x24b)),logger['debug'](_0x2ac2a0(0x2cd),_0x3d175f);}),tgBot[_0x1b6a80(0x32f)](async(_0x26084a,_0x177c91)=>{const _0x32d14b=_0x1b6a80;if(!(!settings[_0x32d14b(0x20f)]&&_0x26084a['update']['message']['text']=='/start')){if(!validateTelegram(_0x26084a))return;}_0x177c91();}),tgBot[_0x1b6a80(0x2a7)]('start',async _0x344a68=>{const _0x2ef65c=_0x1b6a80;if(!settings[_0x2ef65c(0x20f)])updateSetting(_0x2ef65c(0x20f),_0x344a68['chat']['id']);updateSetting(_0x2ef65c(0x379),!![]);if(!validateTelegram(_0x344a68))return;await sendTelegram(_0x344a68['chat']['id'],_0x45f55e);}),tgBot[_0x1b6a80(0x2a7)]('enable',async _0x1d4d06=>{const _0x298b74=_0x1b6a80;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x1d4d06[_0x298b74(0x21d)]['id'],_0x298b74(0x29c));}),tgBot['command'](_0x1b6a80(0x196),async _0x19e9ff=>{const _0xce91e2=_0x1b6a80;await sendTelegram(_0x19e9ff['chat']['id'],_0xce91e2(0x2f3)),updateSetting(_0xce91e2(0x379),![]);}),tgBot[_0x1b6a80(0x2a7)](_0x1b6a80(0x301),async _0x17ab31=>{const _0x19c93b=_0x1b6a80,_0x4871ee=Markup['inlineKeyboard']([Markup[_0x19c93b(0x2a2)][_0x19c93b(0x32a)](_0x19c93b(0x32b),_0x19c93b(0x2c7)),Markup['button'][_0x19c93b(0x32a)](_0x19c93b(0x256),_0x19c93b(0x295)),Markup[_0x19c93b(0x2a2)][_0x19c93b(0x32a)](_0x19c93b(0x33f),_0x19c93b(0x25c))]);_0x17ab31[_0x19c93b(0x36b)](_0x19c93b(0x346),_0x4871ee);}),tgBot['action'](_0x1b6a80(0x2c7),async _0x4f3a73=>{const _0x4c38c0=_0x1b6a80;_0x4f3a73['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x4c38c0(0x274)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4f3a73['chat']['id'],_0x4c38c0(0x2c6));}),tgBot[_0x1b6a80(0x2eb)]('config_alerts',async _0x34913a=>{const _0x741029=_0x1b6a80;_0x34913a[_0x741029(0x1c7)](),updateSetting(_0x741029(0x37c),_0x741029(0x377)),updateSetting(_0x741029(0x379),!![]),await sendTelegram(_0x34913a['chat']['id'],_0x741029(0x2c2));}),tgBot['action'](_0x1b6a80(0x25c),async _0x53e6dd=>{const _0x3ce976=_0x1b6a80;_0x53e6dd[_0x3ce976(0x1c7)](),updateSetting('telegramEvents',_0x3ce976(0x270)),updateSetting(_0x3ce976(0x379),!![]),await sendTelegram(_0x53e6dd[_0x3ce976(0x21d)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x1b6a80(0x2a7)]('status',async _0x1c36c7=>{const _0x26d034=_0x1b6a80,_0x2a2be1=getBotsWithMode();let _0x4aafb1=_0x26d034(0x321);config[_0x26d034(0x34b)](_0x3928cd=>{const _0x218852=_0x26d034,_0x1356b8=_0x2a2be1[_0x218852(0x2d1)](_0x5034b0=>_0x5034b0[_0x218852(0x25f)]==_0x3928cd[_0x218852(0x25f)])[_0x218852(0x305)];_0x4aafb1+=_0x218852(0x224)+_0x3928cd[_0x218852(0x25f)]+':\x20'+_0x3928cd[_0x218852(0x23f)]+_0x218852(0x249)+_0x1356b8+_0x218852(0x249)+_0x3928cd[_0x218852(0x235)]+'\x0a';}),_0x4aafb1+='\x0a',_0x4aafb1+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x4aafb1+=!settings[_0x26d034(0x379)]?_0x26d034(0x231):'Notifications\x20enabled\x0a',_0x4aafb1+=settings[_0x26d034(0x379)]?settings[_0x26d034(0x37c)]=='all'?_0x26d034(0x324):_0x26d034(0x20b)+settings[_0x26d034(0x37c)]+_0x26d034(0x364):'',await sendTelegram(_0x1c36c7[_0x26d034(0x21d)]['id'],_0x4aafb1,{'parse_mode':_0x26d034(0x248)});}),tgBot['command']('restart',async _0xdee40=>{const _0x5a590c=_0x1b6a80,_0x1cbd53=getEnabledBots();if(_0x1cbd53['length']==0x0)await sendTelegram(_0xdee40['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1cbd53['length']>0x1)_0x1cbd53[_0x5a590c(0x29d)]({'botID':_0x5a590c(0x270)});let _0x120efb=[],_0x572346=[];const _0x3db249=_0x1cbd53[_0x5a590c(0x1d6)]%0x4==0x0||_0x1cbd53[_0x5a590c(0x1d6)]%0x4==0x3||_0x1cbd53[_0x5a590c(0x1d6)]%0x3==0x1?0x4:0x3;let _0x583eb8=0x0;_0x1cbd53[_0x5a590c(0x34b)]((_0xbe7ea5,_0x477d78)=>{const _0x4e0db0=_0x5a590c;if(_0x477d78%_0x3db249==0x0)_0x572346=[];_0x572346[_0x4e0db0(0x29d)](Markup[_0x4e0db0(0x2a2)][_0x4e0db0(0x32a)](_0xbe7ea5[_0x4e0db0(0x25f)]==_0x4e0db0(0x270)?_0x4e0db0(0x1cd):'Bot\x20'+_0xbe7ea5[_0x4e0db0(0x25f)],_0x4e0db0(0x347)+_0xbe7ea5[_0x4e0db0(0x25f)])),_0x477d78%_0x3db249==0x0&&(_0x120efb[_0x583eb8]=_0x572346,_0x583eb8++);});const _0x966572=Markup['inlineKeyboard'](_0x120efb);_0xdee40[_0x5a590c(0x36b)](_0x5a590c(0x2f6),_0x966572);}}),tgBot[_0x1b6a80(0x2eb)](/restart_(.+)/,async _0x73a226=>{const _0x4e314e=_0x1b6a80,_0x3ba638=_0x73a226[_0x4e314e(0x1bf)][0x1];_0x73a226['editMessageReplyMarkup'](),_0x3ba638==_0x4e314e(0x270)?config[_0x4e314e(0x34b)](_0x229b08=>{const _0x15dd48=_0x4e314e;restartBot(_0x229b08[_0x15dd48(0x25f)]);}):restartBot(_0x3ba638);}),tgBot['command']('on',async _0x5a6ad3=>{const _0x175848=_0x1b6a80,_0x47194f=getDisabledBots();if(_0x47194f[_0x175848(0x1d6)]==0x0)await sendTelegram(_0x5a6ad3[_0x175848(0x21d)]['id'],_0x175848(0x264));else{if(_0x47194f['length']>0x1)_0x47194f[_0x175848(0x29d)]({'botID':_0x175848(0x270)});let _0x2988b9=[],_0x4dfd43=[];const _0x1a4d3f=_0x47194f[_0x175848(0x1d6)]%0x4==0x0||_0x47194f[_0x175848(0x1d6)]%0x4==0x3||_0x47194f[_0x175848(0x1d6)]%0x3==0x1?0x4:0x3;let _0x3f5ffa=0x0;_0x47194f['forEach']((_0x2a754e,_0x35e743)=>{const _0x478460=_0x175848;if(_0x35e743%_0x1a4d3f==0x0)_0x4dfd43=[];_0x4dfd43[_0x478460(0x29d)](Markup['button'][_0x478460(0x32a)](_0x2a754e[_0x478460(0x25f)]==_0x478460(0x270)?_0x478460(0x1cd):_0x478460(0x224)+_0x2a754e['botID'],'on_'+_0x2a754e[_0x478460(0x25f)])),_0x35e743%_0x1a4d3f==0x0&&(_0x2988b9[_0x3f5ffa]=_0x4dfd43,_0x3f5ffa++);});const _0x27738d=Markup['inlineKeyboard'](_0x2988b9);_0x5a6ad3[_0x175848(0x36b)](_0x175848(0x1e1),_0x27738d);}}),tgBot[_0x1b6a80(0x2eb)](/on_(.+)/,async _0x503abf=>{const _0x2c4099=_0x1b6a80,_0x2737d9=_0x503abf[_0x2c4099(0x1bf)][0x1];_0x503abf[_0x2c4099(0x1c7)]();if(_0x2737d9==_0x2c4099(0x270)){const _0x2e96f2=getDisabledBots();await sendTelegram(_0x503abf[_0x2c4099(0x21d)]['id'],_0x2c4099(0x366)),_0x2e96f2[_0x2c4099(0x34b)](_0x216398=>{const _0x5e9a12=_0x2c4099;if(_0x216398['botID']!=_0x5e9a12(0x270))toggleBot(_0x216398['botID'],toggleStatus(_0x216398['botID']),_0x5e9a12(0x326));});}else await sendTelegram(_0x503abf[_0x2c4099(0x21d)]['id'],_0x2c4099(0x304)+_0x2737d9),toggleBot(_0x2737d9,toggleStatus(_0x2737d9),_0x2c4099(0x326));}),tgBot['command']('off',async _0x28ea94=>{const _0x237ae3=_0x1b6a80,_0x1ed1e8=getEnabledBots();if(_0x1ed1e8[_0x237ae3(0x1d6)]==0x0)await sendTelegram(_0x28ea94[_0x237ae3(0x21d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1ed1e8[_0x237ae3(0x1d6)]>0x1)_0x1ed1e8[_0x237ae3(0x29d)]({'botID':_0x237ae3(0x270)});let _0x2760f0=[],_0x58c0c2=[];const _0xfd8e5f=_0x1ed1e8[_0x237ae3(0x1d6)]%0x4==0x0||_0x1ed1e8['length']%0x4==0x3||_0x1ed1e8[_0x237ae3(0x1d6)]%0x3==0x1?0x4:0x3;let _0x33ef6a=0x0;_0x1ed1e8[_0x237ae3(0x34b)]((_0x2d0a5b,_0x48ded6)=>{const _0x1d1b64=_0x237ae3;if(_0x48ded6%_0xfd8e5f==0x0)_0x58c0c2=[];_0x58c0c2[_0x1d1b64(0x29d)](Markup[_0x1d1b64(0x2a2)]['callback'](_0x2d0a5b[_0x1d1b64(0x25f)]==_0x1d1b64(0x270)?_0x1d1b64(0x1cd):'Bot\x20'+_0x2d0a5b[_0x1d1b64(0x25f)],_0x1d1b64(0x2e0)+_0x2d0a5b[_0x1d1b64(0x25f)])),_0x48ded6%_0xfd8e5f==0x0&&(_0x2760f0[_0x33ef6a]=_0x58c0c2,_0x33ef6a++);});const _0x317860=Markup[_0x237ae3(0x37d)](_0x2760f0);_0x28ea94[_0x237ae3(0x36b)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x317860);}}),tgBot[_0x1b6a80(0x2eb)](/off_(.+)/,async _0x3a13a4=>{const _0x5d090c=_0x1b6a80,_0x16a571=_0x3a13a4['match'][0x1];_0x3a13a4['editMessageReplyMarkup']();if(_0x16a571=='all'){const _0x35f45d=getEnabledBots();await sendTelegram(_0x3a13a4[_0x5d090c(0x21d)]['id'],_0x5d090c(0x19e)),_0x35f45d[_0x5d090c(0x34b)](_0x53ae55=>{const _0x5a4040=_0x5d090c;if(_0x53ae55['botID']!='all')toggleBot(_0x53ae55[_0x5a4040(0x25f)],toggleStatus(_0x53ae55['botID']),_0x5a4040(0x326));});}else await sendTelegram(_0x3a13a4[_0x5d090c(0x21d)]['id'],_0x5d090c(0x2d6)+_0x16a571),toggleBot(_0x16a571,toggleStatus(_0x16a571),_0x5d090c(0x326));}),tgBot[_0x1b6a80(0x2a7)](_0x1b6a80(0x35f),async _0x2d84d5=>{const _0x219786=_0x1b6a80,_0xd7860a=getEnabledBots();if(_0xd7860a[_0x219786(0x1d6)]==0x0)await sendTelegram(_0x2d84d5['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0xd7860a[_0x219786(0x1d6)]>0x1){let _0x2dc2c8=[],_0x31d0e8=[];const _0x2633cb=_0xd7860a[_0x219786(0x1d6)]%0x4==0x0||_0xd7860a['length']%0x4==0x3||_0xd7860a[_0x219786(0x1d6)]%0x3==0x1?0x4:0x3;let _0x2be62e=0x0;_0xd7860a[_0x219786(0x34b)]((_0x15309f,_0x146ab0)=>{const _0x480d92=_0x219786;if(_0x146ab0%_0x2633cb==0x0)_0x31d0e8=[];_0x31d0e8[_0x480d92(0x29d)](Markup[_0x480d92(0x2a2)][_0x480d92(0x32a)](_0x480d92(0x224)+_0x15309f['botID'],_0x480d92(0x1f3)+_0x15309f[_0x480d92(0x25f)])),_0x146ab0%_0x2633cb==0x0&&(_0x2dc2c8[_0x2be62e]=_0x31d0e8,_0x2be62e++);});const _0x25755a=Markup[_0x219786(0x37d)](_0x2dc2c8);_0x2d84d5[_0x219786(0x36b)](_0x219786(0x30d),_0x25755a);}else{const _0x3947fb=_0xd7860a[0x0]['botID'];if(pid[_0x3947fb])pid[_0x3947fb][_0x219786(0x253)]({'function':_0x219786(0x380),'args':null});}}}),tgBot[_0x1b6a80(0x2eb)](/metrics_(.+)/,async _0x2d7132=>{const _0x4becf1=_0x1b6a80,_0x3c18fc=_0x2d7132[_0x4becf1(0x1bf)][0x1];_0x2d7132[_0x4becf1(0x1c7)]();if(pid[_0x3c18fc])pid[_0x3c18fc][_0x4becf1(0x253)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x1b6a80(0x2a7)]('portfolio',async _0x57bd59=>{const _0x51ca42=_0x1b6a80,_0x3a9ecf=getEnabledBots();if(_0x3a9ecf[_0x51ca42(0x1d6)]==0x0)await sendTelegram(_0x57bd59[_0x51ca42(0x21d)]['id'],_0x51ca42(0x1ef));else{if(_0x3a9ecf[_0x51ca42(0x1d6)]>0x1){let _0x22a94c=[],_0x4485fb=[];const _0x149f72=_0x3a9ecf[_0x51ca42(0x1d6)]%0x4==0x0||_0x3a9ecf[_0x51ca42(0x1d6)]%0x4==0x3||_0x3a9ecf[_0x51ca42(0x1d6)]%0x3==0x1?0x4:0x3;let _0x32a59d=0x0;_0x3a9ecf[_0x51ca42(0x34b)]((_0x4eb23f,_0x11d9f5)=>{const _0x2d5f4b=_0x51ca42;if(_0x11d9f5%_0x149f72==0x0)_0x4485fb=[];_0x4485fb[_0x2d5f4b(0x29d)](Markup['button']['callback'](_0x2d5f4b(0x224)+_0x4eb23f['botID'],_0x2d5f4b(0x1e6)+_0x4eb23f[_0x2d5f4b(0x25f)])),_0x11d9f5%_0x149f72==0x0&&(_0x22a94c[_0x32a59d]=_0x4485fb,_0x32a59d++);});const _0xda5762=Markup[_0x51ca42(0x37d)](_0x22a94c);_0x57bd59[_0x51ca42(0x36b)](_0x51ca42(0x2b3),_0xda5762);}else{const _0x4415ce=_0x3a9ecf[0x0][_0x51ca42(0x25f)];if(pid[_0x4415ce])pid[_0x4415ce]['send']({'function':_0x51ca42(0x22d),'args':null});}}}),tgBot[_0x1b6a80(0x2eb)](/portfolio_(.+)/,async _0x435196=>{const _0x4e8f89=_0x1b6a80,_0x572ba2=_0x435196[_0x4e8f89(0x1bf)][0x1];_0x435196[_0x4e8f89(0x1c7)]();if(pid[_0x572ba2])pid[_0x572ba2][_0x4e8f89(0x253)]({'function':_0x4e8f89(0x22d),'args':null});}),tgBot[_0x1b6a80(0x2a7)]('update',async _0x32290d=>{const _0x211cb9=_0x1b6a80;await getMessages();if(!updateAvailable)await sendTelegram(_0x32290d[_0x211cb9(0x21d)]['id'],_0x211cb9(0x320));else{if(!validInstallation)await sendTelegram(_0x32290d[_0x211cb9(0x21d)]['id'],_0x211cb9(0x2aa));else{const _0x1428fe=Markup['inlineKeyboard']([Markup[_0x211cb9(0x2a2)][_0x211cb9(0x32a)](_0x211cb9(0x297),_0x211cb9(0x195)),Markup['button']['callback']('No','update_no')]);_0x32290d[_0x211cb9(0x36b)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x1428fe);}}}),tgBot['action'](/update_(.+)/,async _0x2d52b7=>{const _0x8f4995=_0x1b6a80,_0xdbe81d=_0x2d52b7[_0x8f4995(0x1bf)][0x1];_0x2d52b7[_0x8f4995(0x1c7)](),_0xdbe81d==_0x8f4995(0x381)&&(await sendTelegram(_0x2d52b7[_0x8f4995(0x21d)]['id'],_0x8f4995(0x307)),updateBB(_0x8f4995(0x2f5))),_0xdbe81d=='no'&&await sendTelegram(_0x2d52b7[_0x8f4995(0x21d)]['id'],_0x8f4995(0x20e));}),tgBot[_0x1b6a80(0x2a7)]('reinstall',async _0x774ba8=>{const _0x55da2e=_0x1b6a80;if(!validInstallation)await sendTelegram(_0x774ba8[_0x55da2e(0x21d)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x49e934=Markup[_0x55da2e(0x37d)]([Markup[_0x55da2e(0x2a2)][_0x55da2e(0x32a)](_0x55da2e(0x297),_0x55da2e(0x2a8)),Markup[_0x55da2e(0x2a2)][_0x55da2e(0x32a)]('No','reinstall_no')]);_0x774ba8[_0x55da2e(0x36b)](_0x55da2e(0x2a3),_0x49e934);}}),tgBot[_0x1b6a80(0x2eb)](/reinstall_(.+)/,async _0x5c2b99=>{const _0xa438d=_0x1b6a80,_0x51d609=_0x5c2b99[_0xa438d(0x1bf)][0x1];_0x5c2b99['editMessageReplyMarkup'](),_0x51d609==_0xa438d(0x381)&&(await sendTelegram(_0x5c2b99['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0xa438d(0x237))),_0x51d609=='no'&&await sendTelegram(_0x5c2b99[_0xa438d(0x21d)]['id'],_0xa438d(0x204));}),tgBot[_0x1b6a80(0x2a7)](_0x1b6a80(0x369),async _0x206dfe=>{const _0x5e0f30=_0x1b6a80,_0xebc814=getBotsWithMode();if(_0xebc814[_0x5e0f30(0x1d6)]==0x0)await sendTelegram(_0x206dfe['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x34f2f5=[],_0x4ce7ce=[];const _0x42b6aa=0x2;let _0x7cfcd0=0x0;_0xebc814[_0x5e0f30(0x34b)]((_0x47c271,_0x3a5764)=>{const _0x4c5706=_0x5e0f30;if(_0x3a5764%_0x42b6aa==0x0)_0x4ce7ce=[];_0x4ce7ce['push'](Markup[_0x4c5706(0x2a2)][_0x4c5706(0x32a)](_0x4c5706(0x224)+_0x47c271['botID']+'\x20('+_0x47c271[_0x4c5706(0x305)]+')',_0x4c5706(0x37b)+_0x47c271[_0x4c5706(0x25f)])),_0x3a5764%_0x42b6aa==0x0&&(_0x34f2f5[_0x7cfcd0]=_0x4ce7ce,_0x7cfcd0++);});const _0x4d4dcd=Markup[_0x5e0f30(0x37d)](_0x34f2f5);_0x206dfe['reply'](_0x5e0f30(0x1e2),_0x4d4dcd);}}),tgBot[_0x1b6a80(0x2eb)](/toggle_(.+)/,async _0x2938cc=>{const _0x4954a2=_0x1b6a80,_0x408546=_0x2938cc['match'][0x1];_0x2938cc['editMessageReplyMarkup']();const _0x5d8d3a=getBotsWithMode(),_0x3ad648=_0x5d8d3a['find'](_0x49857d=>_0x49857d[_0x4954a2(0x25f)]==_0x408546),_0x1fb955=_0x3ad648[_0x4954a2(0x305)]==_0x4954a2(0x2bf)?_0x4954a2(0x2ff):_0x4954a2(0x2bf);await sendTelegram(_0x2938cc[_0x4954a2(0x21d)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x408546+_0x4954a2(0x31f)+_0x1fb955+_0x4954a2(0x260)),toggleBotMode(_0x408546);}),tgBot['command'](_0x1b6a80(0x2e9),async _0x49b6dd=>{const _0x57f289=_0x1b6a80;let _0x183f41='';config[_0x57f289(0x34b)](_0x2c9ee4=>{const _0x54885f=_0x57f289;_0x183f41+=_0x54885f(0x224)+_0x2c9ee4[_0x54885f(0x25f)]+':\x20'+_0x2c9ee4['botname']+'\x0a';}),await sendTelegram(_0x49b6dd['chat']['id'],_0x183f41,{'parse_mode':'HTML'});}),tgBot[_0x1b6a80(0x2a7)](_0x1b6a80(0x372),async _0xea55d1=>{const _0x1eb1fd=_0x1b6a80;await sendTelegram(_0xea55d1[_0x1eb1fd(0x21d)]['id'],_0x57a4e8);}),process[_0x1b6a80(0x345)](_0x1b6a80(0x203),()=>tgBot['stop'](_0x1b6a80(0x203))),process[_0x1b6a80(0x345)](_0x1b6a80(0x34f),()=>tgBot[_0x1b6a80(0x226)]('SIGTERM')),tgBot[_0x1b6a80(0x26f)]();}}function disableTelegram(){const _0x72ed72=_0x440a84;tgBot&&tgBot[_0x72ed72(0x226)]();}async function sendTelegram(_0x158dca,_0x7251c,_0x3b968b){const _0x4399da=_0x440a84;try{await tgBot[_0x4399da(0x306)][_0x4399da(0x2f9)](_0x158dca,_0x7251c,_0x3b968b);}catch(_0x2b1d1e){console[_0x4399da(0x23a)](_0x4399da(0x191),_0x2b1d1e);}}async function sendTelegramBot(_0x3fe120,_0x56555e){const _0x39ed9b=_0x440a84;if(settings[_0x39ed9b(0x379)]){if(settings[_0x39ed9b(0x37c)]==_0x39ed9b(0x270)||(_0x56555e[_0x39ed9b(0x259)]=='error'||_0x56555e['type']==_0x39ed9b(0x1a2)||_0x56555e[_0x39ed9b(0x259)]==_0x39ed9b(0x279))&&settings['telegramEvents']==_0x39ed9b(0x377)||_0x56555e[_0x39ed9b(0x259)]==_0x39ed9b(0x246)&&settings[_0x39ed9b(0x37c)]==_0x39ed9b(0x274)){if(tgBot&&settings[_0x39ed9b(0x20f)]){if(_0x56555e[_0x39ed9b(0x225)])await sendTelegram(settings['telegramChatId'],_0x56555e['botname']+_0x39ed9b(0x233)+_0x56555e[_0x39ed9b(0x1bc)]);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0x3fe120+_0x39ed9b(0x233)+_0x56555e[_0x39ed9b(0x1bc)]);}}}}async function sendTelegramMsg(_0x55d15c,_0x56f0bc=_0x440a84(0x248)){const _0x595ccf=_0x440a84;return settings[_0x595ccf(0x379)]&&tgBot&&settings[_0x595ccf(0x20f)]?(await sendTelegram(settings['telegramChatId'],_0x55d15c,{'parse_mode':_0x56f0bc}),!![]):![];}function getDeviceWithIp(_0x516cb8){const _0x39aa7c=_0x440a84;return devices[_0x39aa7c(0x2d1)](_0x1f2fd4=>_0x1f2fd4['ip']===_0x516cb8);}async function temporaryAccess2FA(_0x4585ae,_0x27d26a){const _0x1a1409=_0x440a84;let _0xba2fce=new Date(),_0x1274ac=![];if(lastIpApproval){if(_0xba2fce-lastIpApproval<0x1388)_0x1274ac=!![];}lastIpApproval=new Date();if(_0x1274ac)return;if(tgBot&&settings[_0x1a1409(0x20f)]){const _0x7cb0d2=Markup['inlineKeyboard']([Markup[_0x1a1409(0x2a2)]['callback']('5\x20min',_0x1a1409(0x2e7)),Markup[_0x1a1409(0x2a2)][_0x1a1409(0x32a)](_0x1a1409(0x25d),'tempaccess_15'),Markup['button'][_0x1a1409(0x32a)](_0x1a1409(0x2af),'tempaccess_30'),Markup['button'][_0x1a1409(0x32a)]('reject',_0x1a1409(0x362))]);await sendTelegram(settings[_0x1a1409(0x20f)],_0x1a1409(0x241)+normalizeIP(_0x27d26a)['show']+'\x20?',_0x7cb0d2),tgBot['action'](/tempaccess_(.+)/,async _0x3b5fa6=>{const _0x202ca5=_0x1a1409,_0x217b0c=_0x3b5fa6[_0x202ca5(0x1bf)][0x1];_0x3b5fa6[_0x202ca5(0x1c7)](),devices[_0x4585ae]['telegramIpApproval']={'clientip':_0x27d26a,'timestamp':new Date()[_0x202ca5(0x2b4)](),'expiry':_0x217b0c},_0x217b0c!=_0x202ca5(0x359)?(await sendTelegram(_0x3b5fa6[_0x202ca5(0x21d)]['id'],_0x202ca5(0x314)+_0x217b0c+'\x20minutes',{'parse_mode':_0x202ca5(0x248)}),io['to'](_0x4585ae)[_0x202ca5(0x2b5)](_0x202ca5(0x23f),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x3b5fa6[_0x202ca5(0x21d)]['id'],_0x202ca5(0x2ef)),io['to'](_0x4585ae)[_0x202ca5(0x2b5)](_0x202ca5(0x23f),{'access':{'allow':![],'reason':_0x202ca5(0x27b),'token':null}}));});}}function _0x429f(_0x3b5fe9,_0x2de55d){const _0x67a475=_0xdac0();return _0x429f=function(_0x2e1843,_0x48467e){_0x2e1843=_0x2e1843-0x18f;let _0xdac0d8=_0x67a475[_0x2e1843];return _0xdac0d8;},_0x429f(_0x3b5fe9,_0x2de55d);}async function loginAccess2FA(_0x452fe4,_0x2cb0c0){const _0x1422fd=_0x440a84;if(tgBot&&settings['telegramChatId']){const _0x10f186=Markup[_0x1422fd(0x37d)]([Markup[_0x1422fd(0x2a2)][_0x1422fd(0x32a)](_0x1422fd(0x2c3),_0x1422fd(0x357)+loginExpiry),Markup[_0x1422fd(0x2a2)][_0x1422fd(0x32a)](_0x1422fd(0x359),'login2fa_reject')]);await sendTelegram(settings[_0x1422fd(0x20f)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x2cb0c0)['show']+'\x20?',_0x10f186),tgBot[_0x1422fd(0x2eb)](/login2fa_(.+)/,async _0x4344af=>{const _0x13e8f0=_0x1422fd,_0x32af03=_0x4344af['match'][0x1];_0x4344af[_0x13e8f0(0x1c7)](),devices[_0x452fe4]['telegram2FaApproval']={'clientip':_0x2cb0c0,'timestamp':new Date()[_0x13e8f0(0x2b4)](),'expiry':_0x32af03},_0x32af03!=_0x13e8f0(0x359)?(await sendTelegram(_0x4344af[_0x13e8f0(0x21d)]['id'],'Login\x20accepted',{'parse_mode':'HTML'}),io['to'](_0x452fe4)[_0x13e8f0(0x2b5)](_0x13e8f0(0x23f),{'access':{'allow':![],'reason':_0x13e8f0(0x30a),'token':null}})):(await sendTelegram(_0x4344af[_0x13e8f0(0x21d)]['id'],_0x13e8f0(0x215)),io['to'](_0x452fe4)['emit'](_0x13e8f0(0x23f),{'access':{'allow':![],'reason':_0x13e8f0(0x1a4),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xd15c8b=_0x440a84;return dbConfig[_0xd15c8b(0x272)](_0xd15c8b(0x217))[_0xd15c8b(0x1c8)]('botID')[_0xd15c8b(0x358)]({'status':'enabled'})[_0xd15c8b(0x190)]()||[];}function getDisabledBots(){const _0x578e23=_0x440a84;return dbConfig[_0x578e23(0x272)](_0x578e23(0x217))[_0x578e23(0x1c8)](_0x578e23(0x25f))[_0x578e23(0x358)]({'status':_0x578e23(0x2ba)})['value']()||[];}function getBotAttributes(_0x3e278c){const _0x323c19=_0x440a84;let _0xf3b48a={};const _0x2aea3d=configpath+_0x323c19(0x1c5)+_0x3e278c+_0x323c19(0x2ab),_0x563081=fs[_0x323c19(0x26e)](_0x2aea3d);if(_0x563081){const _0x4883fd=fs[_0x323c19(0x1d3)](_0x2aea3d);try{const _0x55d462=JSON['parse'](_0x4883fd),_0x20849d=_0x55d462?_0x55d462[_0x323c19(0x20c)][0x0]['headless']:![];_0xf3b48a[_0x323c19(0x305)]=_0x20849d?'auto':'manual',_0xf3b48a[_0x323c19(0x1c4)]=_0x55d462?_0x55d462[_0x323c19(0x20c)][0x0]['botname']:_0x323c19(0x224)+_0x3e278c;}catch(_0x376ac2){_0xf3b48a[_0x323c19(0x305)]='manual',_0xf3b48a[_0x323c19(0x1c4)]='Bot\x20'+_0x3e278c;}}else _0xf3b48a[_0x323c19(0x305)]=_0x323c19(0x2ff),_0xf3b48a[_0x323c19(0x1c4)]='Bot\x20'+_0x3e278c;return _0xf3b48a;}function getBotsWithMode(){const _0x443048=_0x440a84,_0x254e68=dbConfig['get'](_0x443048(0x217))[_0x443048(0x1c8)]('botID')[_0x443048(0x190)]()||[];return _0x254e68[_0x443048(0x34b)](_0x5df99a=>{const _0x5de2f2=_0x443048;let _0x2e8e5f=getBotAttributes(_0x5df99a['botID']);_0x5df99a[_0x5de2f2(0x305)]=_0x2e8e5f[_0x5de2f2(0x305)];}),_0x254e68;}function getBotExchanges(){const _0x660bf5=_0x440a84;let _0x5b2ffb=[];const _0x533807=dbConfig[_0x660bf5(0x272)](_0x660bf5(0x217))['sortBy'](_0x660bf5(0x25f))[_0x660bf5(0x190)]()||[];_0x533807['forEach'](_0xfc43e7=>{const _0x2203f4=_0x660bf5;if(_0xfc43e7[_0x2203f4(0x23f)]==_0x2203f4(0x2dc)){const _0x1244ec=configpath+_0x2203f4(0x1c5)+_0xfc43e7[_0x2203f4(0x25f)]+_0x2203f4(0x2ab),_0x338dcd=fs[_0x2203f4(0x26e)](_0x1244ec);let _0x530be6;if(_0x338dcd){const _0x488f65=fs[_0x2203f4(0x1d3)](_0x1244ec);try{const _0x591266=JSON[_0x2203f4(0x273)](_0x488f65);_0x530be6=_0x591266?_0x591266[_0x2203f4(0x20c)][0x0]['exchange']:null;}catch(_0x2e391e){}}if(_0x530be6)_0x5b2ffb[_0x2203f4(0x29d)](_0x530be6);}});const _0x3f4ee7=[...new Set(_0x5b2ffb)][_0x660bf5(0x1db)]();return _0x3f4ee7;}async function initUser(){const _0x11512e=_0x440a84;if(!settings[_0x11512e(0x341)]){const _0x142914=uuidRandom();mixpanel['alias'](_0x142914),updateSetting(_0x11512e(0x341),_0x142914);}}async function initSecure(){const _0x31278d=_0x440a84;let _0x47db72=getSecure();if(!_0x47db72[_0x31278d(0x1fb)]('secret')){let _0x3abdf2=await generateKeys();_0x47db72[_0x31278d(0x261)]=_0x3abdf2[_0x31278d(0x261)],_0x47db72[_0x31278d(0x265)]=_0x3abdf2['privateKey'],_0x47db72[_0x31278d(0x254)]=crypto[_0x31278d(0x36e)](0x20)[_0x31278d(0x276)](_0x31278d(0x193));;storeSecure(_0x47db72);}}function getSettings(){const _0x33ab1f=_0x440a84;return dbSettings[_0x33ab1f(0x272)]('settings')[_0x33ab1f(0x190)]()||{};}function getSecure(){const _0x92305f=_0x440a84;return dbSecure['get'](_0x92305f(0x2db))[_0x92305f(0x190)]()||{};}function getBlacklist(){const _0x2eedf4=_0x440a84;return dbSecure[_0x2eedf4(0x272)]('blacklist')[_0x2eedf4(0x190)]()||[];}function broadcastToBots(_0x49c411,_0x1ff175){config['forEach'](_0xbbd46=>{const _0x843ee6=_0x429f;if(_0xbbd46[_0x843ee6(0x23f)]==_0x843ee6(0x2dc)&&_0xbbd46[_0x843ee6(0x235)]==_0x843ee6(0x2ce)||_0xbbd46['status']==_0x843ee6(0x1f1)&&_0xbbd46[_0x843ee6(0x235)]==_0x843ee6(0x2ce)){if(pid[_0xbbd46[_0x843ee6(0x25f)]])pid[_0xbbd46['botID']][_0x843ee6(0x253)]({[_0x49c411]:_0x1ff175});}});}function storeSettings(_0x1cd97d,_0x1ce1c0=![]){const _0x2fddee=_0x440a84;_0x1cd97d={...settings,..._0x1cd97d};if(_0x1ce1c0&&_0x1cd97d[_0x2fddee(0x198)]!='************'&&_0x1cd97d[_0x2fddee(0x198)]!=_0x2fddee(0x2df)&&_0x1cd97d[_0x2fddee(0x198)]!=''){const _0x327cf3=crypt[_0x2fddee(0x20a)](secure[_0x2fddee(0x265)],_0x1cd97d[_0x2fddee(0x198)])[_0x2fddee(0x1cb)][_0x2fddee(0x1dc)]('@')[0x0],_0xdc259e=bcrypt[_0x2fddee(0x2be)](_0x327cf3,saltRounds);_0x1cd97d={..._0x1cd97d,'bbPassword':_0xdc259e};}if(_0x1ce1c0&&_0x1cd97d[_0x2fddee(0x1fd)]!='************'&&_0x1cd97d[_0x2fddee(0x1fd)]!=_0x2fddee(0x2df)&&_0x1cd97d[_0x2fddee(0x1fd)]!=''){const _0x537733=crypt[_0x2fddee(0x20a)](secure[_0x2fddee(0x265)],_0x1cd97d['telegramToken'])[_0x2fddee(0x1cb)]['split']('@')[0x0];_0x1cd97d={..._0x1cd97d,'telegramToken':_0x537733};}const _0x5450b2=_0x1cd97d[_0x2fddee(0x1fd)]!=_0x2fddee(0x2dd)&&_0x1cd97d['telegramToken']!=settings[_0x2fddee(0x1fd)]||_0x1cd97d[_0x2fddee(0x351)]!=settings['telegramUsername'],_0x338a51=_0x1cd97d[_0x2fddee(0x1fd)]==''||_0x1cd97d[_0x2fddee(0x351)]=='';_0x5450b2&&(_0x1cd97d[_0x2fddee(0x20f)]=null,_0x1cd97d[_0x2fddee(0x37c)]=_0x2fddee(0x270));for(const [_0x3f5be2,_0x4d008e]of Object['entries'](_0x1cd97d)){if(_0x3f5be2=='telegramToken'&&_0x4d008e==_0x2fddee(0x2dd)){_0x1cd97d[_0x2fddee(0x1fd)]=settings[_0x2fddee(0x1fd)];continue;};if(_0x3f5be2==_0x2fddee(0x198)&&_0x4d008e=='************'){_0x1cd97d['bbPassword']=settings[_0x2fddee(0x198)];continue;};dbSettings[_0x2fddee(0x2cf)](_0x2fddee(0x21e)+_0x3f5be2,_0x4d008e)['write']();}settings=_0x1cd97d,io['to'](_0x2fddee(0x2c4))[_0x2fddee(0x2b5)](_0x2fddee(0x1f9),cleanSettings()),broadcastToBots(_0x2fddee(0x34a),settings[_0x2fddee(0x34a)]),broadcastToBots(_0x2fddee(0x33e),settings[_0x2fddee(0x33e)]);if(_0x5450b2&&!_0x338a51)initTelegram();if(_0x5450b2&&_0x338a51)disableTelegram();getAllClients()[_0x2fddee(0x34b)](_0x40bfeb=>{const _0x258256=_0x2fddee;getSocket(_0x40bfeb['id'])['emit'](_0x258256(0x23f),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x500abb,_0x5ef60e){const _0x3b0ce=_0x440a84;dbSettings[_0x3b0ce(0x2cf)]('settings.'+_0x500abb,_0x5ef60e)['write'](),settings=getSettings(),io['to']('botmanager')[_0x3b0ce(0x2b5)](_0x3b0ce(0x1f9),cleanSettings());}function storeSecure(_0x5bdd0f){const _0x367e52=_0x440a84;dbSecure[_0x367e52(0x272)](_0x367e52(0x2db))['push'](_0x5bdd0f)[_0x367e52(0x194)](),secure=_0x5bdd0f;}function addBlacklist(_0x442ad0){const _0x1a7df6=_0x440a84;cleanBlacklist();let _0x1331c9;devices[_0x442ad0][_0x1a7df6(0x242)]?_0x1331c9=Math[_0x1a7df6(0x1cc)](devices[_0x442ad0][_0x1a7df6(0x242)]['expiry'],loginExpiry):_0x1331c9=loginExpiry,dbSecure['get'](_0x1a7df6(0x2ec))[_0x1a7df6(0x29d)]({'expiry':new Date()[_0x1a7df6(0x2b4)]()+_0x1331c9*0x3c*0x3e8,'token':devices[_0x442ad0][_0x1a7df6(0x1e5)]['token']})['write'](),blacklist=dbSecure[_0x1a7df6(0x272)]('blacklist')[_0x1a7df6(0x190)]();}function cleanBlacklist(){const _0x35a120=_0x440a84;let _0x1364b4=dbSecure['get'](_0x35a120(0x2ec))['cloneDeep']()[_0x35a120(0x190)](),_0x4b59b1=new Date()['getTime']();_0x1364b4['forEach'](_0x1c2152=>{const _0x215f7f=_0x35a120;_0x1c2152[_0x215f7f(0x349)]<_0x4b59b1&&dbSecure[_0x215f7f(0x272)](_0x215f7f(0x2ec))[_0x215f7f(0x1f2)]({'expiry':_0x1c2152[_0x215f7f(0x349)]})[_0x215f7f(0x194)]();});}function initStates(){const _0x41ccd5=_0x440a84;let _0xb53225=getConfiguration();_0xb53225[_0x41ccd5(0x34b)](_0x5ca23c=>{const _0xa50fda=_0x41ccd5;_0x5ca23c['live']=_0xa50fda(0x326);}),storeConfiguration(_0xb53225);}function onKeys(){const _0x4a4030=new RSA();return new Promise(_0x197874=>{const _0x3ddb94=_0x429f;_0x4a4030['generateKeyPairAsync']()[_0x3ddb94(0x1e8)](_0x4cafea=>{_0x197874(_0x4cafea);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x21cacf=_0x440a84;let _0x760ee7=getSettings(),_0x4b633e=![];!_0x760ee7[_0x21cacf(0x1fb)](_0x21cacf(0x37f))&&(_0x760ee7['lastmsgtelegram']=0x0,_0x4b633e=!![]);!_0x760ee7['hasOwnProperty'](_0x21cacf(0x31d))&&(_0x760ee7[_0x21cacf(0x31d)]=0x0,_0x4b633e=!![]);!_0x760ee7[_0x21cacf(0x1fb)](_0x21cacf(0x294))&&(_0x760ee7[_0x21cacf(0x294)]='0.0.0',_0x4b633e=!![]);!_0x760ee7[_0x21cacf(0x1fb)](_0x21cacf(0x33e))&&(_0x760ee7[_0x21cacf(0x33e)]=![],_0x4b633e=!![]);if(_0x4b633e)storeSettings(_0x760ee7);try{fs[_0x21cacf(0x298)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x26bc42=>{const _0x3735d0=_0x21cacf;if(!_0x26bc42['isDirectory']()){if(!_0x26bc42[_0x3735d0(0x1af)][_0x3735d0(0x219)]('backup-full@'))fs[_0x3735d0(0x1c0)](configbackuppath+_0x26bc42['name']);}else fs[_0x3735d0(0x33d)](configbackuppath+_0x26bc42[_0x3735d0(0x1af)],{'recursive':!![]});});}catch(_0x323cf6){logger[_0x21cacf(0x221)](_0x21cacf(0x318),_0x323cf6);}}function storeConfiguration(_0x304b25){const _0x2feb4a=_0x440a84;dbConfig[_0x2feb4a(0x272)](_0x2feb4a(0x217))['remove']()[_0x2feb4a(0x194)](),dbConfig[_0x2feb4a(0x272)](_0x2feb4a(0x217))['push'](..._0x304b25)[_0x2feb4a(0x194)](),config=_0x304b25;}async function resetPassword(){const _0x2bf502=_0x440a84;if(tgBot&&settings['telegramChatId']){const _0x22fbeb=Markup[_0x2bf502(0x37d)]([Markup[_0x2bf502(0x2a2)]['callback'](_0x2bf502(0x381),_0x2bf502(0x255)),Markup['button'][_0x2bf502(0x32a)]('no',_0x2bf502(0x335))]);await sendTelegram(settings['telegramChatId'],_0x2bf502(0x22f),_0x22fbeb),tgBot['action'](/resetpw_(.+)/,async _0x782dd5=>{const _0xade223=_0x2bf502,_0x54af55=_0x782dd5[_0xade223(0x1bf)][0x1];_0x782dd5[_0xade223(0x1c7)]();if(_0x54af55!='no'){const _0x16f263=0xf,_0x1c0002=_0xade223(0x1c1),_0x41f5af=Array[_0xade223(0x1b8)](crypto[_0xade223(0x2d7)](new Uint32Array(_0x16f263)))[_0xade223(0x2e2)](_0x3cbfdc=>_0x1c0002[_0x3cbfdc%_0x1c0002[_0xade223(0x1d6)]])['join'](''),_0x1ed0d1=bcrypt[_0xade223(0x2be)](_0x41f5af,saltRounds);storeSettings({'bbPassword':_0x1ed0d1}),await sendTelegram(_0x782dd5['chat']['id'],_0xade223(0x201)+_0x41f5af,{'parse_mode':'HTML'});}else await sendTelegram(_0x782dd5[_0xade223(0x21d)]['id'],_0xade223(0x1de));});}}async function confirmRestore(_0x14c698,_0x1b9440){const _0x57860e=_0x440a84;io['to']('botmanager')[_0x57860e(0x2b5)](_0x57860e(0x19d),_0x57860e(0x37a),'success');if(tgBot&&settings['telegramChatId']){const _0x378b98=Markup[_0x57860e(0x37d)]([Markup[_0x57860e(0x2a2)][_0x57860e(0x32a)](_0x57860e(0x381),_0x57860e(0x197)),Markup['button'][_0x57860e(0x32a)]('no',_0x57860e(0x2c5))]);await sendTelegram(settings['telegramChatId'],_0x57860e(0x2da),_0x378b98),tgBot[_0x57860e(0x2eb)](/restore_(.+)/,async _0x2f5d35=>{const _0x4467e0=_0x57860e,_0x4b4222=_0x2f5d35['match'][0x1];_0x2f5d35[_0x4467e0(0x1c7)](),_0x4b4222==_0x4467e0(0x381)?(logger[_0x4467e0(0x221)](_0x4467e0(0x36a)),await sendTelegram(_0x2f5d35[_0x4467e0(0x21d)]['id'],_0x4467e0(0x21f),{'parse_mode':_0x4467e0(0x248)}),unzipFile(_0x14c698,_0x1b9440)):(logger['debug'](_0x4467e0(0x35a)),await sendTelegram(_0x2f5d35[_0x4467e0(0x21d)]['id'],_0x4467e0(0x35a)));});}}function getServerTime(){const _0xe0d92=_0x440a84,_0x494d6e=new Date();return _0x494d6e[_0xe0d92(0x275)]()+'/'+(_0x494d6e['getMonth']()+0x1)[_0xe0d92(0x276)]()[_0xe0d92(0x374)](0x2,'0')+'/'+_0x494d6e[_0xe0d92(0x330)]()[_0xe0d92(0x276)]()[_0xe0d92(0x374)](0x2,'0')+'\x20'+_0x494d6e[_0xe0d92(0x1f7)]()['toString']()[_0xe0d92(0x374)](0x2,'0')+':'+_0x494d6e[_0xe0d92(0x36c)]()[_0xe0d92(0x276)]()[_0xe0d92(0x374)](0x2,'0')+':'+_0x494d6e['getSeconds']()[_0xe0d92(0x276)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1c9cd8=_0x440a84,_0x451eee=shiftedTime();return _0x451eee[_0x1c9cd8(0x275)]()+'/'+(_0x451eee[_0x1c9cd8(0x370)]()+0x1)[_0x1c9cd8(0x276)]()[_0x1c9cd8(0x374)](0x2,'0')+'/'+_0x451eee['getDate']()['toString']()[_0x1c9cd8(0x374)](0x2,'0')+'\x20'+_0x451eee[_0x1c9cd8(0x1f7)]()[_0x1c9cd8(0x276)]()[_0x1c9cd8(0x374)](0x2,'0')+':'+_0x451eee['getMinutes']()['toString']()[_0x1c9cd8(0x374)](0x2,'0')+':'+_0x451eee['getSeconds']()[_0x1c9cd8(0x276)]()[_0x1c9cd8(0x374)](0x2,'0');}function getCleanTimeStamp(){const _0x556e79=_0x440a84,_0x222118=shiftedTime();return _0x222118[_0x556e79(0x275)]()+(_0x222118[_0x556e79(0x370)]()+0x1)[_0x556e79(0x276)]()[_0x556e79(0x374)](0x2,'0')+_0x222118['getDate']()[_0x556e79(0x276)]()[_0x556e79(0x374)](0x2,'0')+'-'+_0x222118[_0x556e79(0x1f7)]()[_0x556e79(0x276)]()[_0x556e79(0x374)](0x2,'0')+_0x222118[_0x556e79(0x36c)]()[_0x556e79(0x276)]()[_0x556e79(0x374)](0x2,'0')+_0x222118[_0x556e79(0x19a)]()['toString']()[_0x556e79(0x374)](0x2,'0');}function shiftedTime(){const _0x507ecf=_0x440a84,_0xcde7d4=new Date();let _0x29c8b4=_0xcde7d4;if(settings['timeshift']&&settings[_0x507ecf(0x34a)]!==0x0)_0x29c8b4=fns[_0x507ecf(0x244)](_0xcde7d4,{'hours':settings[_0x507ecf(0x34a)]});return _0x29c8b4;}function startScheduler(){const _0x18228c=_0x440a84,_0xd0accf=new Date()[_0x18228c(0x35d)](),_0x50ac4d=shiftedTime()['getHours']();_0x50ac4d==0x4&&backupConfigFiles();_0x50ac4d==0x0&&rotateLogFiles();_0xd0accf%0x6==0x0&&triggerAnalytics();_0xd0accf%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2dc96a){const _0x183a22=_0x440a84;logger['debug'](_0x183a22(0x228)+_0x2dc96a);const _0x1f65c5=getBotsWithMode();_0x1f65c5[_0x183a22(0x1d6)]>0x0?confirmRestore(configbackuppath,_0x2dc96a):unzipFile(configbackuppath,_0x2dc96a);}async function getBackupFiles(_0x20818c=null){const _0x44a640=_0x440a84;let _0x452e08=[],_0x222c72=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x222c72[_0x44a640(0x1db)]((_0x39b4c6,_0x22138a)=>_0x39b4c6['name']<_0x22138a[_0x44a640(0x1af)]?0x1:_0x22138a['name']<_0x39b4c6[_0x44a640(0x1af)]?-0x1:0x0),_0x222c72['forEach'](_0x222586=>{const _0x380cd4=_0x44a640;if(!_0x222586[_0x380cd4(0x22a)]()&&_0x222586[_0x380cd4(0x1af)][_0x380cd4(0x219)]('backup-full@')&&_0x222586[_0x380cd4(0x1af)]['endsWith']('.zip')){const _0x1e0bc5=formatDate(fs[_0x380cd4(0x27e)](configbackuppath+_0x222586[_0x380cd4(0x1af)])[_0x380cd4(0x2e1)]);_0x452e08['push']({'name':_0x222586['name'],'mtime':_0x1e0bc5});}});if(_0x20818c)io['to'](_0x20818c)[_0x44a640(0x2b5)]('backup-files',_0x452e08);else return _0x452e08;}async function backupConfigFiles(){const _0x12a815=_0x440a84;await zipFiles(_0x12a815(0x230));const _0x2d3467=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x12a815(0x284),configbackuppath+(_0x12a815(0x340)+_0x2d3467+_0x12a815(0x371)));let _0x21a376=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x21a376['sort']((_0x4d0163,_0x39076a)=>_0x4d0163[_0x12a815(0x1af)]<_0x39076a['name']?0x1:_0x39076a[_0x12a815(0x1af)]<_0x4d0163[_0x12a815(0x1af)]?-0x1:0x0),_0x21a376[_0x12a815(0x1d6)]>maxBackups&&fs[_0x12a815(0x1c0)](configbackuppath+_0x21a376[_0x21a376[_0x12a815(0x1d6)]-0x1][_0x12a815(0x1af)]);}function rotateLogFiles(){const _0x290936=_0x440a84,_0x307db5=fs[_0x290936(0x27e)](logspath+_0x290936(0x28a)),_0x1c02c8=_0x307db5[_0x290936(0x33b)]/0x400;if(_0x1c02c8>0x64){let _0xc841=fs[_0x290936(0x298)](logspath,{'withFileTypes':!![]});_0xc841[_0x290936(0x1db)]((_0x211a31,_0x311520)=>_0x211a31[_0x290936(0x1af)]<_0x311520[_0x290936(0x1af)]?0x1:_0x311520[_0x290936(0x1af)]<_0x211a31[_0x290936(0x1af)]?-0x1:0x0),_0xc841[_0x290936(0x34b)](_0x1155ef=>{const _0x10e232=_0x290936;if(_0x1155ef[_0x10e232(0x1af)]==_0x10e232(0x316))fs[_0x10e232(0x33a)](logspath+_0x1155ef[_0x10e232(0x1af)],logspath+_0x10e232(0x350));if(_0x1155ef[_0x10e232(0x1af)]==_0x10e232(0x28f))fs[_0x10e232(0x33a)](logspath+_0x1155ef[_0x10e232(0x1af)],logspath+'output-002.log');_0x1155ef['name']==_0x10e232(0x28a)&&(fs['copyFileSync'](logspath+_0x1155ef[_0x10e232(0x1af)],logspath+_0x10e232(0x28f)),fs[_0x10e232(0x2e6)](logspath+_0x1155ef['name'],''));});}}async function zipFiles(_0x561572){const _0x4f2bfa=_0x440a84;let _0x196b3d;if(_0x561572==_0x4f2bfa(0x247))_0x196b3d=logspath;if(_0x561572==_0x4f2bfa(0x1d8))_0x196b3d=configpath;if(_0x561572=='backup-full')_0x196b3d=configpath;let _0x3733f9=fs[_0x4f2bfa(0x298)](_0x196b3d,{'withFileTypes':!![]});const _0x340d44=new require('node-zip')();_0x3733f9['forEach'](_0x4fdf17=>{const _0x4c279c=_0x4f2bfa;if(!_0x4fdf17[_0x4c279c(0x22a)]()){let _0x4f9df5=fs[_0x4c279c(0x1d3)](_0x196b3d+_0x4fdf17['name']);if(_0x561572==_0x4c279c(0x1d8)){const _0x15e3be=/^bot-[0-9]{3}-config.json$/,_0x2be166=_0x15e3be['test'](_0x4fdf17['name']);if(_0x2be166){const _0x47e8dc=JSON[_0x4c279c(0x273)](_0x4f9df5);if(_0x47e8dc['bot'][0x0]){_0x47e8dc['bot'][0x0]['apiKey']=_0x4c279c(0x2df),_0x47e8dc[_0x4c279c(0x20c)][0x0][_0x4c279c(0x1eb)]=_0x4c279c(0x2df);if(_0x47e8dc['bot'][0x0][_0x4c279c(0x34e)])_0x47e8dc[_0x4c279c(0x20c)][0x0][_0x4c279c(0x34e)]=_0x4c279c(0x2df);}_0x4f9df5=JSON[_0x4c279c(0x382)](_0x47e8dc,null,0x2);}if(_0x4fdf17[_0x4c279c(0x1af)]==_0x4c279c(0x386)){const _0x4d76d4=JSON[_0x4c279c(0x273)](_0x4f9df5);if(_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x24d)])_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x24d)]=![];if(_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x198)])_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x198)]=_0x4c279c(0x2df);if(_0x4d76d4[_0x4c279c(0x1f9)]['telegramToken'])_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x1fd)]=_0x4c279c(0x2df);if(_0x4d76d4[_0x4c279c(0x1f9)][_0x4c279c(0x20f)])_0x4d76d4['settings']['telegramChatId']=null;_0x4f9df5=JSON[_0x4c279c(0x382)](_0x4d76d4,null,0x2);}if(_0x4fdf17[_0x4c279c(0x1af)]!=_0x4c279c(0x1cf))_0x340d44[_0x4c279c(0x37e)](_0x4fdf17[_0x4c279c(0x1af)],_0x4f9df5);}else _0x340d44[_0x4c279c(0x37e)](_0x4fdf17[_0x4c279c(0x1af)],_0x4f9df5);}});const _0xdd96ba=_0x340d44['generate']({'base64':![],'compression':_0x4f2bfa(0x19c)});fs[_0x4f2bfa(0x2e6)](zippath+(_0x561572+'.zip'),_0xdd96ba,_0x4f2bfa(0x1b7));}async function unzipFile(_0x13eead,_0x2267c0){const _0x4309e1=_0x440a84;fs[_0x4309e1(0x298)](configpath,{'withFileTypes':!![]})['forEach'](_0x3de234=>{const _0x52ec71=_0x4309e1;if(!_0x3de234[_0x52ec71(0x22a)]())fs[_0x52ec71(0x33d)](configpath+_0x3de234[_0x52ec71(0x1af)]);});const _0xa6232=fs[_0x4309e1(0x1d3)](_0x13eead+_0x2267c0,_0x4309e1(0x1b7)),_0x2fec64=new require(_0x4309e1(0x2cb))(_0xa6232,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x2fec64[_0x4309e1(0x1c9)])[_0x4309e1(0x34b)](_0x23c202=>{const _0x5dc650=_0x4309e1,_0xc7e821=_0x2fec64['files'][_0x23c202];fs[_0x5dc650(0x2e6)](configpath+_0xc7e821['name'],_0xc7e821[_0x5dc650(0x2b9)]);}),fs[_0x4309e1(0x298)](temppath,{'withFileTypes':!![]})[_0x4309e1(0x34b)](_0x23b628=>{const _0x403d54=_0x4309e1;if(!_0x23b628['isDirectory']())fs[_0x403d54(0x33d)](temppath+_0x23b628[_0x403d54(0x1af)]);}),logger[_0x4309e1(0x221)](_0x4309e1(0x319)),process[_0x4309e1(0x253)]({'restore':!![]},_0x17e74b=>{});}async function getPublicIp(){const _0x5e44c5=_0x440a84;try{const _0x518e37=await axios[_0x5e44c5(0x272)]('https://api.ipify.org?format=json');publicip=_0x518e37[_0x5e44c5(0x1ec)]['ip'];}catch(_0x253007){}}async function triggerAnalytics(){const _0x15d210=_0x440a84;if(!publicip)await getPublicIp();const _0xf78f66=getBotsWithMode();let _0xe2fbf3=0x0;_0xf78f66[_0x15d210(0x34b)](_0xc3c978=>{const _0x3b6e69=_0x15d210;if(_0xc3c978[_0x3b6e69(0x23f)]===_0x3b6e69(0x2dc))_0xe2fbf3++;});const _0x3ef99d=getBotExchanges();mixpanel[_0x15d210(0x337)](_0x15d210(0x31b),{'distinct_id':settings[_0x15d210(0x341)],'ip':publicip,'version':serverversion,'numbots':_0xf78f66[_0x15d210(0x1d6)],'numbotsenabled':_0xe2fbf3,'exchanges':_0x3ef99d,'environment':environment});}async function getMessages(){const _0x3aee13=_0x440a84,_0x32f3c7=_0x3aee13(0x373),_0x3d30db=new GraphQLClient(_0x32f3c7),_0x57756a={'authorization':_0x3aee13(0x26b)},_0x398528=serverversion[_0x3aee13(0x1dc)]('.'),_0x327f72=_0x398528[0x0]+'.'+_0x398528[0x1],_0xb99e1d=Math['min'](settings[_0x3aee13(0x37f)],settings[_0x3aee13(0x31d)]),_0x2f3541={'last':parseInt(_0xb99e1d),'bbm':_0x327f72},_0x5b5890=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2e525d;try{_0x2e525d=await _0x3d30db[_0x3aee13(0x30b)](_0x5b5890,_0x2f3541,_0x57756a);}catch(_0x2692b5){}if(_0x2e525d&&_0x2e525d[_0x3aee13(0x21c)]){let _0x4e318e=settings['lastmsgtelegram'];newMessages=[];for(const _0x3da101 of _0x2e525d[_0x3aee13(0x21c)]){newMessages['push'](_0x3da101);let _0x483b0c=![];_0x3da101[_0x3aee13(0x207)]&&(updateSetting(_0x3aee13(0x294),_0x3da101[_0x3aee13(0x207)]),_0x483b0c=isNewerVersion(serverversion,_0x3da101[_0x3aee13(0x207)])||serverversion==_0x3da101[_0x3aee13(0x207)]);if(!_0x483b0c&&_0x3da101[_0x3aee13(0x352)]>_0x4e318e){if(_0x3da101[_0x3aee13(0x1ab)]==='any'||serverversion['startsWith'](_0x3da101['bbvReceive'])){let _0x2bd452=''+_0x3da101['title']+'\x0a\x0a'+_0x3da101['message'];const _0x1a9fc1=await sendTelegramMsg(toTelegramMarkdown(_0x2bd452),_0x3aee13(0x29f));if(_0x1a9fc1)_0x4e318e=_0x3da101[_0x3aee13(0x352)];}}}updateAvailable=isNewerVersion(settings[_0x3aee13(0x294)],serverversion),updateSetting('lastmsgtelegram',_0x4e318e),emitMessages();}}function emitMessages(){const _0x48057f=_0x440a84,_0x15a8d9=settings[_0x48057f(0x31d)];let _0x720e94=[];newMessages[_0x48057f(0x34b)](_0x432426=>{const _0x468943=_0x48057f;_0x432426[_0x468943(0x352)]>_0x15a8d9&&_0x720e94[_0x468943(0x29d)](_0x432426);}),_0x720e94[_0x48057f(0x1d6)]>0x0&&getAllClients()[_0x48057f(0x34b)](_0x5a2c2f=>{const _0x266a4b=_0x48057f;getSocket(_0x5a2c2f['id'])[_0x266a4b(0x2b5)](_0x266a4b(0x1cb),_0x720e94);});}function confirmMessage(_0x6f6769){const _0x346bbe=_0x440a84;updateSetting(_0x346bbe(0x31d),Number(_0x6f6769));}function isNewerVersion(_0x75cff2,_0x20560d){const _0x19e9db=_0x440a84,_0x580a64=_0x20560d['split']('.'),_0x340ebd=_0x75cff2[_0x19e9db(0x1dc)]('.');for(var _0x3c470c=0x0;_0x3c470c<_0x340ebd[_0x19e9db(0x1d6)];_0x3c470c++){const _0x87999d=~~_0x340ebd[_0x3c470c],_0x176cf6=~~_0x580a64[_0x3c470c];if(_0x87999d>_0x176cf6)return!![];if(_0x87999d<_0x176cf6)return![];}return![];}function toTelegramMarkdown(_0x57b573){const _0x24b089=_0x440a84,_0x3b53f3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1dd415=/\*{2}(.+?)\*{2}/gim;return _0x57b573=_0x57b573[_0x24b089(0x33c)](_0x3b53f3,'$1_$2_$3')[_0x24b089(0x33c)](_0x1dd415,_0x24b089(0x363)),_0x57b573;}async function validateConfigFile(){const _0x554a58=_0x440a84,_0x58e981=dbConfig[_0x554a58(0x272)]('bots')['sortBy'](_0x554a58(0x25f))[_0x554a58(0x190)]()||[];if(_0x58e981['length']==0x0){let _0x419811=0x0,_0x41cab3=[];const _0x43fb11=/^bot-([0-9]{3})-config.json$/,_0x1cc8b8=fs[_0x554a58(0x298)](configpath);_0x1cc8b8[_0x554a58(0x34b)](_0x418bb3=>{const _0x394907=_0x554a58,_0x468b42=_0x43fb11[_0x394907(0x360)](_0x418bb3);if(_0x468b42){const _0x101bfc=_0x468b42[0x1];let _0x5f5c31=getBotAttributes(_0x101bfc);_0x41cab3[_0x394907(0x29d)]({'botID':_0x101bfc,'botname':_0x5f5c31['botname'],'status':_0x394907(0x2ba),'live':_0x394907(0x326)}),_0x419811++;}}),_0x419811!=0x0&&(dbConfig[_0x554a58(0x272)]('bots')['assign'](_0x41cab3)[_0x554a58(0x194)](),config=_0x41cab3,restoredConfigFile=_0x419811);}}async function restoreConfigNotify(_0x2ff0a5){const _0x35e7b8=_0x440a84;let _0x9a16ae;if(restoredConfigFile==0x1)_0x9a16ae=_0x35e7b8(0x367);else _0x9a16ae=_0x35e7b8(0x286);if(_0x2ff0a5)io['to'](_0x35e7b8(0x2c4))[_0x35e7b8(0x2b5)](_0x35e7b8(0x19d),_0x9a16ae);else{logger['simple'](_0x35e7b8(0x285)),logger['simple'](_0x9a16ae),logger[_0x35e7b8(0x2b1)]('-----------------------------------------------------------------------------------'),logger[_0x35e7b8(0x2b1)]('');if(tgBot&&settings[_0x35e7b8(0x20f)]&&settings[_0x35e7b8(0x37c)]!=_0x35e7b8(0x274))await sendTelegram(settings[_0x35e7b8(0x20f)],_0x35e7b8(0x29a)+_0x9a16ae);}}function validateCredentials(_0x396fa4,_0x3049bb){const _0x19066f=_0x440a84;if(_0x396fa4[_0x19066f(0x2c0)]==settings[_0x19066f(0x23b)]&&bcrypt['compareSync'](_0x396fa4[_0x19066f(0x1b5)],settings[_0x19066f(0x198)])){if(settings[_0x19066f(0x1a8)])return{'allow':![],'reason':_0x19066f(0x202),'token':null};else{const _0x1cbd5b=generateLoginToken(_0x3049bb);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1cbd5b};}}else return{'allow':![],'reason':_0x19066f(0x1a3),'token':null};}function refreshToken(_0x2738d2){const _0x11c513=_0x440a84,_0x49e15c=generateLoginToken(_0x2738d2);return{'allow':!![],'reason':_0x11c513(0x2cc),'token':_0x49e15c};}function validateAccess(_0x550f73,_0x4b3d6c,_0x36004a){const _0x40a5a0=_0x440a84,_0x3b2e44=_0x36004a?_0x36004a:devices[_0x4b3d6c]['ip'];let _0x1fe65a;const _0x5ad9f7=_0x493d8b=>{const _0x477972=_0x429f;if(settings[_0x477972(0x24d)]){if(settings[_0x477972(0x1a8)]){if(telegram2FaApproved(_0x4b3d6c)){const _0xf7734f=generateLoginToken(_0x4b3d6c);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0xf7734f};}else return{'allow':![],'reason':_0x477972(0x334),'token':null};}else return _0x1fe65a=validToken(_0x493d8b,_0x4b3d6c),_0x1fe65a[_0x477972(0x1fb)](_0x477972(0x279))?{'allow':!![],'reason':_0x477972(0x206),'token':_0x493d8b}:{'allow':![],'reason':_0x477972(0x334),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x40a5a0(0x2d5)]){let _0x2e1224=[...settings['whitelist'],_0x40a5a0(0x34c),_0x40a5a0(0x1aa),_0x40a5a0(0x2f8)];if(_0x2e1224['includes'](_0x3b2e44))return _0x5ad9f7(_0x550f73);else{_0x1fe65a=validToken(_0x550f73,_0x4b3d6c);if(_0x1fe65a[_0x40a5a0(0x1fb)](_0x40a5a0(0x279)))return _0x5ad9f7(_0x550f73);else{if(telegramIpApproved(_0x4b3d6c)){const _0x16685f=generateToken(_0x4b3d6c);return _0x1fe65a=_0x5ad9f7(_0x550f73),_0x1fe65a[_0x40a5a0(0x332)]?{'allow':!![],'reason':_0x40a5a0(0x296),'token':_0x16685f}:_0x1fe65a;}else return settings[_0x40a5a0(0x31e)]?{'allow':![],'reason':_0x40a5a0(0x271),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x5ad9f7(_0x550f73);}function timelyDecrypt(_0x4fdce8,_0x40f2d1=!![]){const _0x4bb157=_0x440a84;if(_0x4fdce8)try{const _0x27f587=crypt['decrypt'](secure[_0x4bb157(0x265)],_0x4fdce8)[_0x4bb157(0x1cb)],_0x8539aa=_0x27f587[_0x4bb157(0x1dc)]('@')[0x0],_0x467213=_0x27f587[_0x4bb157(0x1dc)]('@')[0x1],_0x5ea2f4=new Date()[_0x4bb157(0x2b4)]();if(_0x40f2d1){if(_0x5ea2f4-_0x467213<maxSecretAge*0x3e8)return _0x8539aa;else return![];}else return _0x8539aa;}catch(_0x220531){return![];}else return![];}const validToken=(_0x3b8c91,_0x1d76d7)=>{const _0x437265=_0x440a84,_0x21d7db=devices[_0x1d76d7]['ip'];if(!_0x3b8c91)return{'error':_0x437265(0x213)};for(let _0x2fd150 of blacklist){if(_0x2fd150[_0x437265(0x1b9)]==_0x3b8c91)return{'error':_0x437265(0x209)};}let _0x25438a;try{_0x25438a=jwt['verify'](_0x3b8c91,secure[_0x437265(0x254)]+_0x1d76d7);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x25438a['hasOwnProperty'](_0x437265(0x216))&&!_0x25438a[_0x437265(0x1fb)](_0x437265(0x2c0))||!_0x25438a[_0x437265(0x1fb)](_0x437265(0x1b1)))return{'error':_0x437265(0x238)};if(!_0x25438a[_0x437265(0x1fb)](_0x437265(0x2c0))&&_0x25438a['hasOwnProperty']('clientip')){const {clientip:_0x3d839d}=_0x25438a;return _0x21d7db==_0x3d839d?{'success':_0x437265(0x1e9)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x25438a[_0x437265(0x1fb)](_0x437265(0x2c0))&&_0x25438a[_0x437265(0x1fb)](_0x437265(0x216))){const {username:_0xfabad7,clientip:_0x1742e1}=_0x25438a;return settings[_0x437265(0x23b)]==_0xfabad7&&_0x21d7db==_0x1742e1?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x437265(0x21a)};}}},generateLoginToken=_0x38376b=>{const _0x3edf3e=_0x440a84;if(_0x38376b){const _0x50744e=devices[_0x38376b]['ip'];return jwt['sign']({'username':settings[_0x3edf3e(0x23b)],'clientip':_0x50744e},secure['secret']+_0x38376b,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1987eb=>{const _0x3e63e7=_0x440a84;if(_0x1987eb){const _0x5eea3e=devices[_0x1987eb]['ip'];return jwt['sign']({'clientip':_0x5eea3e},secure[_0x3e63e7(0x254)]+_0x1987eb,{'expiresIn':devices[_0x1987eb][_0x3e63e7(0x242)][_0x3e63e7(0x349)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3b5d3e=>{const _0xc0e8eb=_0x440a84;let _0x1cfd17=![];return devices[_0x3b5d3e][_0xc0e8eb(0x242)]&&devices[_0x3b5d3e][_0xc0e8eb(0x242)]['expiry']!='reject'&&(_0x1cfd17=devices[_0x3b5d3e][_0xc0e8eb(0x242)]['clientip']==devices[_0x3b5d3e]['ip']&&new Date()[_0xc0e8eb(0x2b4)]()-devices[_0x3b5d3e][_0xc0e8eb(0x242)][_0xc0e8eb(0x2ae)]<devices[_0x3b5d3e]['telegramIpApproval'][_0xc0e8eb(0x349)]*0x3c*0x3e8),_0x1cfd17;},telegram2FaApproved=_0x15ef4e=>{const _0x4375d9=_0x440a84;let _0x62b55d=![];return devices[_0x15ef4e][_0x4375d9(0x2d9)]&&devices[_0x15ef4e]['telegram2FaApproval'][_0x4375d9(0x349)]!=_0x4375d9(0x359)&&(_0x62b55d=devices[_0x15ef4e]['telegram2FaApproval']['clientip']==devices[_0x15ef4e]['ip']&&new Date()[_0x4375d9(0x2b4)]()-devices[_0x15ef4e][_0x4375d9(0x2d9)]['timestamp']<devices[_0x15ef4e][_0x4375d9(0x2d9)][_0x4375d9(0x349)]*0x3c*0x3e8),_0x62b55d;},normalizeIP=_0x265046=>{const _0x5eccd3=_0x440a84;let _0x5dfd97=null,_0x316664=null;if(ipaddr[_0x5eccd3(0x1ee)](_0x265046)){const _0x54004a=ipaddr[_0x5eccd3(0x273)](_0x265046);_0x54004a[_0x5eccd3(0x32d)]()===_0x5eccd3(0x1ae)?(_0x54004a['isIPv4MappedAddress']()&&(_0x5dfd97=_0x54004a[_0x5eccd3(0x2b8)]()[_0x5eccd3(0x276)]()),_0x316664=_0x54004a[_0x5eccd3(0x276)]()):(_0x5dfd97=_0x54004a[_0x5eccd3(0x276)](),_0x316664=_0x54004a[_0x5eccd3(0x35b)]()[_0x5eccd3(0x276)]());}return{'show':_0x5dfd97?_0x5dfd97:_0x316664,'store':_0x316664};};function formatDate(_0x38a6e6){const _0x1c7197=_0x440a84;return _0x38a6e6[_0x1c7197(0x275)]()+'/'+(_0x38a6e6[_0x1c7197(0x370)]()+0x1)[_0x1c7197(0x276)]()[_0x1c7197(0x374)](0x2,'0')+'/'+_0x38a6e6[_0x1c7197(0x330)]()[_0x1c7197(0x276)]()[_0x1c7197(0x374)](0x2,'0')+'\x20'+_0x38a6e6['getHours']()[_0x1c7197(0x276)]()['padStart'](0x2,'0')+':'+_0x38a6e6['getMinutes']()[_0x1c7197(0x276)]()[_0x1c7197(0x374)](0x2,'0')+':'+_0x38a6e6['getSeconds']()['toString']()['padStart'](0x2,'0');}function sleep(_0x7cf8d7){return new Promise(_0x1a1399=>setTimeout(_0x1a1399,_0x7cf8d7));}