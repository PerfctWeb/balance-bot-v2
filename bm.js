const _0x5d8331=_0x20bb;(function(_0x49bb0f,_0x4124a6){const _0x7fa646=_0x20bb,_0x4333bc=_0x49bb0f();while(!![]){try{const _0x493fdd=parseInt(_0x7fa646(0xdd))/0x1+parseInt(_0x7fa646(0x1cd))/0x2*(-parseInt(_0x7fa646(0x88))/0x3)+-parseInt(_0x7fa646(0x82))/0x4+parseInt(_0x7fa646(0x15a))/0x5*(parseInt(_0x7fa646(0xc1))/0x6)+parseInt(_0x7fa646(0x9f))/0x7+parseInt(_0x7fa646(0x1c1))/0x8*(parseInt(_0x7fa646(0xaa))/0x9)+-parseInt(_0x7fa646(0x214))/0xa;if(_0x493fdd===_0x4124a6)break;else _0x4333bc['push'](_0x4333bc['shift']());}catch(_0xcd2671){_0x4333bc['push'](_0x4333bc['shift']());}}}(_0x2e4c,0xdcf72));const _0x3f4026=function(){let _0x1285ff=!![];return function(_0x5516d8,_0x476098){const _0x5137c9=_0x1285ff?function(){const _0x556c9c=_0x20bb;if(_0x476098){const _0x50bc8e=_0x476098[_0x556c9c(0x1b2)](_0x5516d8,arguments);return _0x476098=null,_0x50bc8e;}}:function(){};return _0x1285ff=![],_0x5137c9;};}(),_0xf36edd=_0x3f4026(this,function(){const _0x8797c=_0x20bb;return _0xf36edd[_0x8797c(0x1b8)]()[_0x8797c(0x1f4)](_0x8797c(0x134))[_0x8797c(0x1b8)]()['constructor'](_0xf36edd)['search']('(((.+)+)+)+$');});_0xf36edd();'use strict';process[_0x5d8331(0x23c)][_0x5d8331(0x243)]=0x1;function _0x20bb(_0x15efca,_0x25cf19){const _0x540d7d=_0x2e4c();return _0x20bb=function(_0xf36edd,_0x3f4026){_0xf36edd=_0xf36edd-0x71;let _0x2e4c5a=_0x540d7d[_0xf36edd];return _0x2e4c5a;},_0x20bb(_0x15efca,_0x25cf19);}const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x5d8331(0xf6)),low=require(_0x5d8331(0x1f3)),FileSync=require(_0x5d8331(0xd6)),path=require(_0x5d8331(0x246)),crypto=require(_0x5d8331(0x106)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x5d8331(0x157))[_0x5d8331(0x241)],bcrypt=require(_0x5d8331(0xa7)),jwt=require(_0x5d8331(0xa0)),ipaddr=require(_0x5d8331(0x14a)),argv=require(_0x5d8331(0x229))(process[_0x5d8331(0x19f)][_0x5d8331(0xef)](0x2))[_0x5d8331(0x19f)],uuidRandom=require(_0x5d8331(0x1a1)),TelegramBot=require(_0x5d8331(0xb1)),Mixpanel=require(_0x5d8331(0xed)),axios=require(_0x5d8331(0x115)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x5d8331(0x161)),{networkInterfaces}=require('os'),PORT=argv[_0x5d8331(0x145)]||_0x5d8331(0x121),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x5d8331(0x1d7)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv[_0x5d8331(0xbe)]||null,userID=argv[_0x5d8331(0x149)]||'',debugging=argv['d']||![],nodeversion=process[_0x5d8331(0x211)][_0x5d8331(0x13e)];let bbpath='bb/',bbpath2='';const botfile=_0x5d8331(0x190),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x5d8331(0x156),maxBackups=0xa;let validInstallation=!![];!fs[_0x5d8331(0x10d)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x5d8331(0x14c)+userID+'/':bbpath+_0x5d8331(0x14c),configbackuppath=configpath+_0x5d8331(0x7b),logspath=userID?bbpath+_0x5d8331(0x193)+userID+'/':bbpath+_0x5d8331(0x193),zippath=userID?bbpath+_0x5d8331(0x12b)+userID+'/':bbpath+_0x5d8331(0x12b),loggerfile=fs[_0x5d8331(0x20b)](logspath+_0x5d8331(0x251),{'flags':'a'}),temppath=userID?bbpath+_0x5d8331(0xbc)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs[_0x5d8331(0x139)](configpath);!fs[_0x5d8331(0x10d)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x5d8331(0x10d)](logspath)&&fs[_0x5d8331(0x139)](logspath);!fs[_0x5d8331(0x10d)](zippath)&&fs[_0x5d8331(0x139)](zippath);!fs[_0x5d8331(0x10d)](temppath)&&fs[_0x5d8331(0x139)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5d8331(0xb7)]({'bots':[]})[_0x5d8331(0xe0)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5d8331(0xb7)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5d8331(0x1ff),'onepagemode':![]}})[_0x5d8331(0xe0)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5d8331(0xb7)]({'secure':{},'blacklist':[]})[_0x5d8331(0xe0)]();let crypt=new Crypt({'md':_0x5d8331(0xc5),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x5d8331(0xe5),{'host':_0x5d8331(0x1af)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x2b009e,_0x2ae612)=>{const _0x1a8969=_0x5d8331,_0x5334b3=/#[A-Z]{3}#/g;!_0x2ae612?_0x2b009e=_0x2b009e[_0x1a8969(0x1dd)](_0x5334b3,''):(_0x2b009e=_0x2b009e[_0x1a8969(0x1dd)](/#BLU#/g,_0x1a8969(0xdb)),_0x2b009e=_0x2b009e['replace'](/#RED#/g,_0x1a8969(0xdc)),_0x2b009e=_0x2b009e[_0x1a8969(0x1dd)](/#YEL#/g,_0x1a8969(0x8b)),_0x2b009e=_0x2b009e[_0x1a8969(0x1dd)](/#RES#/g,_0x1a8969(0xb6)));;return _0x2b009e;},logger={'screen':_0x2c58a1=>{const _0x328c5c=_0x5d8331;console[_0x328c5c(0x1d7)](parseColor(_0x2c58a1,!![]));},'simple':_0x5c44c1=>{const _0x1ffb9e=_0x5d8331;console[_0x1ffb9e(0x1d7)](parseColor(_0x5c44c1,!![])),loggerfile['write'](util['format'](parseColor(_0x5c44c1,![]))+'\x0a');},'full':async _0xf2394f=>{const _0x1054f3=_0x5d8331,_0x3ec3a8=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0xf2394f;console[_0x1054f3(0x1d7)](parseColor(_0x3ec3a8,!![])),loggerfile[_0x1054f3(0xe0)](util[_0x1054f3(0x1de)](parseColor(_0x3ec3a8,![]))+'\x0a');if(tgBot&&settings[_0x1054f3(0x14f)]&&settings[_0x1054f3(0xe9)]!=_0x1054f3(0x79))await tgBot[_0x1054f3(0x1ba)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+parseColor(_0xf2394f,![]))[_0x1054f3(0x155)](_0x190ecc=>{telegramError(_0x190ecc);});},'debug':async(_0x2e83e4,_0x86e59='')=>{const _0x4367c6=_0x5d8331,_0x945ad=getTimeStamp()+_0x4367c6(0x166)+_0x2e83e4;if(debugging)console[_0x4367c6(0x1d7)](parseColor(_0x945ad,!![]));loggerfile['write'](util['format'](parseColor(_0x945ad,![]))+'\x0a');if(_0x86e59){if(debugging)console[_0x4367c6(0x1d7)](_0x86e59);loggerfile[_0x4367c6(0xe0)](util[_0x4367c6(0x1de)](_0x86e59)+'\x0a');}}};process['on'](_0x5d8331(0xd1),function(_0x4dacb9){const _0x4046b6=_0x5d8331;logger[_0x4046b6(0x8a)](_0x4dacb9);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5d8331(0x1c7))[_0x5d8331(0x1c3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5d8331(0x1b1)),app=express(),http=require(_0x5d8331(0x182))[_0x5d8331(0x1ef)](app);app[_0x5d8331(0xd3)](fileUpload({'useTempFiles':!![]})),app[_0x5d8331(0x1ec)]('/download/:type',async(_0x171432,_0x554b1a)=>{const _0x2d571a=_0x5d8331,_0x288349=_0x171432[_0x2d571a(0x237)][_0x2d571a(0x185)],_0x573471=getClientsWithBotID(_0x2d571a(0x142)),_0x2d7d5c=_0x171432[_0x2d571a(0x1e6)][_0x2d571a(0x1b4)],_0x43a83d=timelyDecrypt(_0x2d7d5c,![]),_0x3e363f=_0x573471[_0x2d571a(0x13d)](_0x548590=>_0x548590[_0x2d571a(0x1b4)]==_0x43a83d);if(_0x3e363f){const _0x1127f3=normalizeIP(_0x171432['socket'][_0x2d571a(0x168)])[_0x2d571a(0xde)],_0x3587d6=_0x171432[_0x2d571a(0x1e6)][_0x2d571a(0x1c4)];if(validateAccess(_0x3587d6,_0x43a83d,_0x1127f3)[_0x2d571a(0x247)])_0x288349==_0x2d571a(0xd2)&&await backupConfigFiles(),await zipFiles(_0x288349),_0x554b1a[_0x2d571a(0x1c2)](zippath+(_0x288349+_0x2d571a(0x13a)),_0x4a7d94=>{const _0x1a6a8c=_0x2d571a;_0x4a7d94&&(logger[_0x1a6a8c(0xc7)](_0x1a6a8c(0x233)+_0x288349),logger[_0x1a6a8c(0x8a)](_0x4a7d94));});else logger[_0x2d571a(0xc7)](_0x2d571a(0x11c)+_0x288349+_0x2d571a(0x1ed));}else logger[_0x2d571a(0xc7)](_0x2d571a(0x11c)+_0x288349+_0x2d571a(0x120));}),app[_0x5d8331(0x116)](_0x5d8331(0x81),async(_0x403568,_0x2e1662)=>{const _0x48a753=_0x5d8331,_0x38c2b4=getClientsWithBotID(_0x48a753(0x142)),_0x313076=_0x403568['headers'][_0x48a753(0x1b4)],_0x4b79ac=timelyDecrypt(_0x313076,![]),_0x961a47=_0x38c2b4[_0x48a753(0x13d)](_0x83063f=>_0x83063f[_0x48a753(0x1b4)]==_0x4b79ac);logger[_0x48a753(0x1ce)](_0x48a753(0xa3));if(_0x961a47){const _0x2cbcdb=normalizeIP(_0x403568['socket'][_0x48a753(0x168)])['store'],_0x59f89c=_0x403568['headers'][_0x48a753(0x1c4)];if(validateAccess(_0x59f89c,_0x4b79ac,_0x2cbcdb)[_0x48a753(0x247)]){if(_0x403568['files']){const _0x4ef5f6=_0x403568[_0x48a753(0x1c5)][_0x48a753(0x163)];await _0x4ef5f6['mv'](temppath+_0x4ef5f6[_0x48a753(0x181)]),_0x2e1662[_0x48a753(0x235)]({'status':!![],'message':_0x48a753(0x12c)});const _0x32aa9c=getBotsWithMode();_0x32aa9c['length']>0x0?confirmRestore(temppath,_0x4ef5f6[_0x48a753(0x181)]):unzipFile(temppath,_0x4ef5f6[_0x48a753(0x181)]);}}else logger[_0x48a753(0xc7)](_0x48a753(0x253));}else logger[_0x48a753(0xc7)](_0x48a753(0x92));}),app[_0x5d8331(0xd3)](express[_0x5d8331(0x18a)](path['join'](__dirname,bbpath2,_0x5d8331(0x24e)))),app[_0x5d8331(0xd3)](express[_0x5d8331(0x18a)](path['join'](__dirname,bbpath2,_0x5d8331(0x10e)))),app['get']('/',function(_0x57dfb9,_0x2013d9){const _0x5b9cdc=_0x5d8331;_0x2013d9[_0x5b9cdc(0x1be)](path[_0x5b9cdc(0x9d)](__dirname,bbpath2,_0x5b9cdc(0x24e),_0x5b9cdc(0x21b)));}),app[_0x5d8331(0x1ec)](_0x5d8331(0x17e),function(_0x355fa8,_0x4cb0a5){const _0xb45a83=_0x5d8331;_0x4cb0a5[_0xb45a83(0x1be)](path[_0xb45a83(0x9d)](__dirname,bbpath2,_0xb45a83(0x10e),_0xb45a83(0x21b)));}),app['get'](_0x5d8331(0x195),(_0x28e66a,_0x2b97ab)=>{const _0x2b2440=_0x5d8331;_0x2b97ab['sendFile'](path[_0x2b2440(0x9d)](__dirname,bbpath2,_0x2b2440(0x10e),'index.html'));}),app[_0x5d8331(0x1ec)]('/:bot/performance',(_0x52736c,_0xe3f179)=>{const _0x28ae44=_0x5d8331;_0xe3f179[_0x28ae44(0x1be)](path[_0x28ae44(0x9d)](__dirname,bbpath2,'build',_0x28ae44(0x21b)));}),app[_0x5d8331(0x1ec)]('/:bot/coins',(_0x39121d,_0x5254ce)=>{const _0x3c2186=_0x5d8331;_0x5254ce[_0x3c2186(0x1be)](path[_0x3c2186(0x9d)](__dirname,bbpath2,_0x3c2186(0x10e),'index.html'));}),app[_0x5d8331(0x1ec)](_0x5d8331(0xb5),(_0x462f98,_0x10d1ab)=>{const _0x117d61=_0x5d8331;_0x10d1ab[_0x117d61(0x1be)](path[_0x117d61(0x9d)](__dirname,bbpath2,'build',_0x117d61(0x21b)));}),app[_0x5d8331(0x1ec)](_0x5d8331(0xd5),(_0x364078,_0x25a1e8)=>{const _0x1fd6c9=_0x5d8331;_0x25a1e8[_0x1fd6c9(0x1be)](path[_0x1fd6c9(0x9d)](__dirname,bbpath2,'build',_0x1fd6c9(0x21b)));}),app['get'](_0x5d8331(0x97),(_0x56d73c,_0x4c4157)=>{const _0x1a6613=_0x5d8331;_0x4c4157[_0x1a6613(0x1be)](path[_0x1a6613(0x9d)](__dirname,bbpath2,_0x1a6613(0x10e),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x5d8331(0x257))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x429492=_0x5d8331;let _0x34ab52='[ip-address]';const _0x13e97d=networkInterfaces(),_0x365bec={};for(const _0x405d2f of Object['keys'](_0x13e97d)){for(const _0x8cb52f of _0x13e97d[_0x405d2f]){if((_0x8cb52f[_0x429492(0x129)]==_0x429492(0x1e2)||_0x8cb52f[_0x429492(0x129)]==0x4)&&!_0x8cb52f[_0x429492(0xfe)]){const _0x5a3307=ipaddr[_0x429492(0x123)](_0x8cb52f[_0x429492(0x141)])[_0x429492(0x1aa)]();_0x5a3307!='private'&&(!_0x365bec[_0x405d2f]&&(_0x365bec[_0x405d2f]=[]),_0x365bec[_0x405d2f][_0x429492(0x256)](_0x8cb52f[_0x429492(0x141)]),_0x34ab52=_0x8cb52f[_0x429492(0x141)]);}}}return{'serverip':_0x34ab52,'netinterfaces':_0x365bec};}async function startServer(){const _0x30d62f=_0x5d8331,{serverip:_0x7ba696,netinterfaces:_0x57da4e}=getServerIP();logger[_0x30d62f(0x8a)](''),logger[_0x30d62f(0x8a)](_0x30d62f(0x11e)),await logger[_0x30d62f(0xc7)](_0x30d62f(0xb3)+serverversion+_0x30d62f(0x232)+(_0x30d62f(0x18e)+PORT+_0x30d62f(0x143))+(_0x30d62f(0x194)+_0x7ba696+':'+PORT+_0x30d62f(0x1e1))),logger[_0x30d62f(0x8a)](_0x30d62f(0x11e));if(config[_0x30d62f(0x131)]!=0x0)for(const _0x135dcc of config){if(_0x135dcc[_0x30d62f(0x159)]==_0x30d62f(0xb0)||_0x135dcc[_0x30d62f(0x159)]==_0x30d62f(0x20c))await logger[_0x30d62f(0xc7)](_0x30d62f(0xf3)+_0x135dcc[_0x30d62f(0x132)]+_0x30d62f(0x187)+_0x135dcc[_0x30d62f(0x8d)]),startBot([_0x135dcc[_0x30d62f(0x132)],userID],{'cwd':bbpath},function(_0x679c79){const _0x3f8950=_0x30d62f;if(_0x679c79)logger[_0x3f8950(0xc7)](_0x679c79);});else(_0x135dcc[_0x30d62f(0x159)]==_0x30d62f(0x196)||_0x135dcc[_0x30d62f(0x159)]==_0x30d62f(0x179))&&await logger[_0x30d62f(0xc7)](_0x30d62f(0x16d)+_0x135dcc[_0x30d62f(0x132)]+'\x20|\x20'+_0x135dcc['botname']);}else!newBot&&logger['simple'](_0x30d62f(0x217));if(newBot)addBot();logger[_0x30d62f(0x8a)](_0x30d62f(0x11e)),logger[_0x30d62f(0x8a)](''),await logger[_0x30d62f(0x1ce)](_0x30d62f(0x1a9)+nodeversion),await logger[_0x30d62f(0x1ce)](_0x30d62f(0x1e4),_0x57da4e);}function startSocket(){const _0x296af4=_0x5d8331;io['on'](_0x296af4(0x98),_0x5017d6=>{const _0x4912fb=_0x296af4;let _0x1ea346,_0x31e40d,_0x8ade03,_0x1c0f66,_0x501205;const _0x1a9b28=_0x5017d6[_0x4912fb(0xad)][_0x4912fb(0x1e6)][_0x4912fb(0x17a)];_0x31e40d=_0x1a9b28[_0x4912fb(0xa2)](/bot[0-9]{3}/);if(_0x31e40d)_0x8ade03=_0x31e40d[0x0][_0x4912fb(0xa2)](/[0-9]{3}/);if(_0x8ade03)_0x1ea346=_0x8ade03[0x0];else _0x1ea346='botmanager';const _0x380e86=_0x5017d6[_0x4912fb(0xad)][_0x4912fb(0x234)]['encryptedUuid'];if(!_0x380e86)_0x5017d6['emit'](_0x4912fb(0x159),{'publicKey':secure[_0x4912fb(0x1bd)]});else{_0x1c0f66=timelyDecrypt(_0x380e86,![]);if(!_0x1c0f66)_0x5017d6[_0x4912fb(0x126)](_0x4912fb(0x159),{'publicKey':secure['publicKey']});else{_0x501205=normalizeIP(_0x5017d6[_0x4912fb(0x1cb)][_0x4912fb(0x168)])[_0x4912fb(0xde)];if(!devices[_0x1c0f66])devices[_0x1c0f66]={'uuid':_0x1c0f66,'access':{'token':null}};devices[_0x1c0f66]['ip']=_0x501205;const _0x422d0b=addClient(_0x5017d6['id'],_0x1c0f66,_0x1ea346);setAccess(_0x422d0b),emitMessages(),_0x5017d6['on'](_0x4912fb(0x76),_0x592b07=>{const _0xd64f06=_0x4912fb,_0x8276e2=timelyDecrypt(_0x592b07[_0xd64f06(0xf2)]);if(_0x8276e2){_0x592b07={'username':_0x592b07[_0xd64f06(0xcf)],'password':_0x8276e2},devices[_0x1c0f66]['access']=validateCredentials(_0x592b07,_0x1c0f66);if(devices[_0x1c0f66]['access'][_0xd64f06(0x247)]==![]&&devices[_0x1c0f66][_0xd64f06(0x255)]['reason']==_0xd64f06(0xda))_0x5017d6[_0xd64f06(0x126)]('status',{'access':devices[_0x1c0f66][_0xd64f06(0x255)]}),loginAccess2FA(_0x1c0f66,_0x501205);else{if(devices[_0x1c0f66][_0xd64f06(0x255)][_0xd64f06(0x247)]==![]&&devices[_0x1c0f66]['access'][_0xd64f06(0x15d)]=='invalid\x20credentials')_0x5017d6[_0xd64f06(0x126)]('status',{'access':devices[_0x1c0f66]['access']});else devices[_0x1c0f66][_0xd64f06(0x255)][_0xd64f06(0x247)]&&devices[_0x1c0f66][_0xd64f06(0x255)]['reason']==_0xd64f06(0xca)&&(getClientsWithUuid(_0x1c0f66)[_0xd64f06(0x254)](_0x2f2ffe=>{setAccess(_0x2f2ffe);}),logger['debug'](_0xd64f06(0x200)+_0x1c0f66[_0xd64f06(0xef)](-0x8)),setTokenRefresh(_0x1c0f66),setSessionTimeout(_0xd64f06(0x76),_0x1c0f66));}}else logger['full'](_0xd64f06(0x1b0));}),_0x5017d6['on'](_0x4912fb(0xbb),()=>{resetPassword();}),_0x5017d6['on'](_0x4912fb(0xd9),_0x59d4ff=>{removeClient(_0x5017d6['id']);}),_0x1ea346==_0x4912fb(0x142)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1904cf){const _0x27cc3d=_0x5d8331;if(_0x1904cf!='botmanager'&&config['apiKey']!=''){if(pid[_0x1904cf])pid[_0x1904cf][_0x27cc3d(0x235)]({'function':_0x27cc3d(0x1f7),'args':null});}_0x1904cf!=_0x27cc3d(0x142)&&broadcastToBots('bots',JSON[_0x27cc3d(0x1da)](config));}function reloadBotManager(){const _0x4e09e5=_0x5d8331;getClientsWithBotID(_0x4e09e5(0x142))['forEach'](_0x3330b1=>{const _0x4f137d=_0x4e09e5;getSocket(_0x3330b1['id'])[_0x4f137d(0x126)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x12d8ba){const _0x5dfeb1=_0x5d8331;return io['sockets']['sockets'][_0x5dfeb1(0x1ec)](_0x12d8ba);}function setAccess(_0x3a2571){const _0x1c5316=_0x5d8331,_0x519b52=getSocket(_0x3a2571['id']),_0x1a4827=_0x3a2571[_0x1c5316(0x1b4)],_0x347339=_0x3a2571[_0x1c5316(0x99)];devices[_0x1a4827][_0x1c5316(0x255)]=validateAccess(devices[_0x1a4827]['access']['token'],_0x1a4827),logger['debug'](_0x1c5316(0xf7)+devices[_0x1a4827][_0x1c5316(0x255)]['reason']+_0x1c5316(0x162)+_0x3a2571['id'][_0x1c5316(0xef)](-0x8)+_0x1c5316(0x7a)+_0x1a4827[_0x1c5316(0xef)](-0x8)),_0x519b52[_0x1c5316(0x9d)](_0x1a4827);if(devices[_0x1a4827]['access']['allow']){_0x519b52[_0x1c5316(0x9d)](_0x347339);if(_0x347339==_0x1c5316(0x142))initializeSocketBotManager(_0x519b52);else initializeSocketBot(_0x519b52);initClient(_0x347339);}devices[_0x1a4827][_0x1c5316(0x255)][_0x1c5316(0x1bc)]&&devices[_0x1a4827][_0x1c5316(0x255)][_0x1c5316(0x15d)]==_0x1c5316(0x1c6)&&setSessionTimeout('2FA',_0x1a4827),devices[_0x1a4827][_0x1c5316(0x255)][_0x1c5316(0x1bc)]&&devices[_0x1a4827][_0x1c5316(0x255)][_0x1c5316(0x15d)]==_0x1c5316(0x1bb)&&setSessionTimeout(_0x1c5316(0x76),_0x1a4827),_0x519b52[_0x1c5316(0x126)](_0x1c5316(0x159),{'status':_0x3a2571[_0x1c5316(0x124)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1a4827][_0x1c5316(0x255)],'externalip':devices[_0x1a4827]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x1c5316(0x1f2)],'validInstallation':validInstallation}),devices[_0x1a4827][_0x1c5316(0x255)][_0x1c5316(0x247)]==![]&&devices[_0x1a4827][_0x1c5316(0x255)]['reason']==_0x1c5316(0x1ad)&&temporaryAccess2FA(_0x1a4827,devices[_0x1a4827]['ip']);}function setSessionTimeout(_0x2a29c5,_0x1d0c1){const _0x5e1b23=_0x5d8331;let _0x4ab688;if(_0x2a29c5==_0x5e1b23(0x76))_0x4ab688=loginExpiry*0x3c*0x3e8;else _0x4ab688=devices[_0x1d0c1][_0x5e1b23(0x236)][_0x5e1b23(0x11a)]*0x3c*0x3e8-(new Date()[_0x5e1b23(0x12d)]()-devices[_0x1d0c1][_0x5e1b23(0x236)]['timestamp']);if(devices[_0x1d0c1][_0x5e1b23(0x128)])clearTimeout(devices[_0x1d0c1]['pidExpireLogin']);devices[_0x1d0c1][_0x5e1b23(0x128)]=setTimeout(()=>{const _0x2c3fa3=_0x5e1b23;if(devices[_0x1d0c1][_0x2c3fa3(0x1e3)])clearTimeout(devices[_0x1d0c1][_0x2c3fa3(0x1e3)]);removeSocketListeners(_0x1d0c1),addBlacklist(_0x1d0c1),devices[_0x1d0c1][_0x2c3fa3(0x236)]=null,devices[_0x1d0c1]['telegram2FaApproval']=null,devices[_0x1d0c1][_0x2c3fa3(0x255)][_0x2c3fa3(0x1bc)]=null,logger[_0x2c3fa3(0x1ce)]('Session\x20expired\x20for\x20user\x20...'+_0x1d0c1['slice'](-0x8)),devices[_0x1d0c1][_0x2c3fa3(0x255)]=validateAccess(devices[_0x1d0c1][_0x2c3fa3(0x255)][_0x2c3fa3(0x1bc)],_0x1d0c1),!(devices[_0x1d0c1][_0x2c3fa3(0x255)][_0x2c3fa3(0x247)]&&devices[_0x1d0c1][_0x2c3fa3(0x255)]['reason']=='login\x20not\x20required')&&(_0x2a29c5==_0x2c3fa3(0x76)?io['to'](_0x1d0c1)[_0x2c3fa3(0x126)]('status',{'access':{'allow':![],'reason':_0x2c3fa3(0x18d),'token':null}}):io['to'](_0x1d0c1)[_0x2c3fa3(0x126)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x1d0c1][_0x2c3fa3(0x255)][_0x2c3fa3(0x1bc)]=null;},_0x4ab688);}function setTokenRefresh(_0x11d05c){if(devices[_0x11d05c]['pidRefreshToken'])clearTimeout(devices[_0x11d05c]['pidRefreshToken']);devices[_0x11d05c]['pidRefreshToken']=setTimeout(()=>{const _0xbb9ea9=_0x20bb;getClientsWithUuid(_0x11d05c)[_0xbb9ea9(0x131)]!=0x0?(devices[_0x11d05c]['access']=refreshToken(_0x11d05c),io['to'](_0x11d05c)[_0xbb9ea9(0x126)](_0xbb9ea9(0x159),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x11d05c]['access'],'externalip':devices[_0x11d05c]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x11d05c)):clearTimeout(devices[_0x11d05c][_0xbb9ea9(0x1e3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5228b4){const _0x5c4afd=_0x5d8331,_0xb98690=getClient(_0x5228b4['id'])[_0x5c4afd(0x1b4)];_0x5228b4[_0x5c4afd(0x126)](_0x5c4afd(0x171),config),_0x5228b4[_0x5c4afd(0x126)](_0x5c4afd(0x250),cleanSettings()),_0x5228b4['on']('add-bot',_0x52ee92=>{const _0x3cce91=_0x5c4afd;if(validateAccess(_0x52ee92,_0xb98690)[_0x3cce91(0x247)])addBot();else logger[_0x3cce91(0xc7)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5228b4['on'](_0x5c4afd(0x15c),(_0x45b980,_0x433741)=>{const _0x2a6f90=_0x5c4afd;if(validateAccess(_0x433741,_0xb98690)[_0x2a6f90(0x247)])toggleBot(_0x45b980[_0x2a6f90(0x132)],_0x45b980['status'],_0x45b980['live']);else logger[_0x2a6f90(0xc7)](_0x2a6f90(0xfb));}),_0x5228b4['on'](_0x5c4afd(0x21f),(_0x3e32d2,_0x1f8543)=>{const _0x249805=_0x5c4afd;if(validateAccess(_0x1f8543,_0xb98690)['allow'])toggleBotMode(_0x3e32d2);else logger[_0x249805(0xc7)](_0x249805(0xfb));}),_0x5228b4['on'](_0x5c4afd(0x87),(_0x23ecdc,_0xbc65cf)=>{const _0x20b59b=_0x5c4afd;if(validateAccess(_0xbc65cf,_0xb98690)['allow'])deleteBot(_0x23ecdc);else logger['full'](_0x20b59b(0x144));}),_0x5228b4['on']('store-settings',(_0x1655e5,_0x2d6fbd)=>{const _0x4c30f1=_0x5c4afd;if(validateAccess(_0x2d6fbd,_0xb98690)[_0x4c30f1(0x247)])storeSettings(_0x1655e5,!![]);else logger[_0x4c30f1(0xc7)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5228b4['on'](_0x5c4afd(0xec),_0x4189c2=>{const _0xbd80a2=_0x5c4afd;if(validateAccess(_0x4189c2,_0xb98690)[_0xbd80a2(0x247)])updateBB(_0xbd80a2(0x13f));else logger[_0xbd80a2(0xc7)](_0xbd80a2(0x204));}),_0x5228b4['on']('reinstall-bb',_0x536d5b=>{const _0x14e9b2=_0x5c4afd;if(validateAccess(_0x536d5b,_0xb98690)[_0x14e9b2(0x247)])updateBB(_0x14e9b2(0x72));else logger[_0x14e9b2(0xc7)](_0x14e9b2(0x21a));}),_0x5228b4['on'](_0x5c4afd(0x12e),_0x32ebad=>{const _0x291980=_0x5c4afd;if(validateAccess(_0x32ebad,_0xb98690)[_0x291980(0x247)]){const _0x1e9aba=getClient(_0x5228b4['id']);if(_0x1e9aba)getBackupFiles(_0x1e9aba[_0x291980(0x1b4)]);else logger[_0x291980(0xc7)](_0x291980(0x113));}else logger['full']('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x5228b4['on'](_0x5c4afd(0x114),(_0x508534,_0x4d309e)=>{const _0x402969=_0x5c4afd;if(validateAccess(_0x4d309e,_0xb98690)[_0x402969(0x247)])restoreBackupFile(_0x508534);else logger['full'](_0x402969(0x183));}),_0x5228b4['on']('get-messages',_0x41479a=>{const _0x285d04=_0x5c4afd;if(validateAccess(_0x41479a,_0xb98690)[_0x285d04(0x247)])getMessages();else logger[_0x285d04(0xc7)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5228b4['on'](_0x5c4afd(0x17b),(_0x1ace67,_0x12ba81)=>{const _0x5931c7=_0x5c4afd;if(validateAccess(_0x12ba81,_0xb98690)[_0x5931c7(0x247)])confirmMessage(_0x1ace67);else logger[_0x5931c7(0xc7)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5228b4['on']('logout',_0xf13fad=>{const _0x5e2169=_0x5c4afd;if(validateAccess(_0xf13fad,_0xb98690)[_0x5e2169(0x247)]){if(devices[_0xb98690]['pidRefreshToken'])clearTimeout(devices[_0xb98690][_0x5e2169(0x1e3)]);if(devices[_0xb98690]['pidExpireLogin'])clearTimeout(devices[_0xb98690][_0x5e2169(0x128)]);removeSocketListeners(getClient(_0x5228b4['id'])[_0x5e2169(0x1b4)]),addBlacklist(_0xb98690),devices[_0xb98690][_0x5e2169(0x236)]=null,devices[_0xb98690][_0x5e2169(0x1fb)]=null,devices[_0xb98690][_0x5e2169(0x255)]['token']=null,logger[_0x5e2169(0x1ce)]('Logged\x20out\x20user\x20...'+_0xb98690['slice'](-0x8)),io['to'](getClient(_0x5228b4['id'])[_0x5e2169(0x1b4)])[_0x5e2169(0x126)](_0x5e2169(0x159),{'access':{'allow':![],'reason':_0x5e2169(0x249),'token':null}});}else logger['full'](_0x5e2169(0x127));});}function initializeSocketBot(_0x1de735){const _0x1cdaeb=_0x5d8331,_0x3ca49a=getClient(_0x1de735['id'])['bot'],_0x1c3965=getClient(_0x1de735['id'])[_0x1cdaeb(0x1b4)];_0x1de735['on'](_0x1cdaeb(0x7e),(_0x512a24,_0x2fddf4)=>{const _0x3e51e8=_0x1cdaeb;if(validateAccess(_0x2fddf4,_0x1c3965)['allow']){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x3e51e8(0x235)]({'function':'emitHistory','args':_0x512a24});}else logger[_0x3e51e8(0xc7)](_0x3e51e8(0x1bf));}),_0x1de735['on'](_0x1cdaeb(0xbf),(_0x5bd149,_0xdd5a54)=>{const _0x1bb79a=_0x1cdaeb;if(validateAccess(_0xdd5a54,_0x1c3965)[_0x1bb79a(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a]['send']({'function':_0x1bb79a(0x80),'args':_0x5bd149});}else logger[_0x1bb79a(0xc7)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x1de735['on'](_0x1cdaeb(0x96),(_0x360986,_0x36bc09)=>{const _0x54ff96=_0x1cdaeb;if(validateAccess(_0x36bc09,_0x1c3965)['allow']){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x54ff96(0x235)]({'function':_0x54ff96(0x95),'args':_0x360986});}else logger[_0x54ff96(0xc7)](_0x54ff96(0x20f));}),_0x1de735['on'](_0x1cdaeb(0xdf),(_0x3266e4,_0x4b8ec)=>{const _0x4a96bb=_0x1cdaeb;if(validateAccess(_0x4b8ec,_0x1c3965)[_0x4a96bb(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x4a96bb(0x235)]({'function':_0x4a96bb(0xcb),'args':_0x3266e4});}else logger[_0x4a96bb(0xc7)](_0x4a96bb(0xae));}),_0x1de735['on'](_0x1cdaeb(0x203),(_0x931cc0,_0x319c10)=>{const _0x21c56a=_0x1cdaeb;if(validateAccess(_0x319c10,_0x1c3965)[_0x21c56a(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a]['send']({'function':_0x21c56a(0x24a),'args':_0x931cc0});}else logger['full'](_0x21c56a(0x180));}),_0x1de735['on'](_0x1cdaeb(0x1c8),(_0x451438,_0x14583f)=>{const _0x57e470=_0x1cdaeb;if(validateAccess(_0x14583f,_0x1c3965)[_0x57e470(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x57e470(0x235)]({'function':_0x57e470(0x77),'args':_0x451438});}else logger[_0x57e470(0xc7)](_0x57e470(0x199));}),_0x1de735['on'](_0x1cdaeb(0xee),_0x336c38=>{const _0x1a5a6a=_0x1cdaeb;if(validateAccess(_0x336c38,_0x1c3965)[_0x1a5a6a(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x1a5a6a(0x235)]({'function':_0x1a5a6a(0x22e),'args':null});}else logger[_0x1a5a6a(0xc7)](_0x1a5a6a(0x146));}),_0x1de735['on']('get-starting-balances',_0x1a3404=>{const _0x288f13=_0x1cdaeb;if(validateAccess(_0x1a3404,_0x1c3965)[_0x288f13(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x288f13(0x235)]({'function':_0x288f13(0x1f5),'args':null});}else logger[_0x288f13(0xc7)](_0x288f13(0x222));}),_0x1de735['on'](_0x1cdaeb(0x12f),(_0x4126ae,_0x582696)=>{const _0x61f010=_0x1cdaeb;if(validateAccess(_0x582696,_0x1c3965)[_0x61f010(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x61f010(0x235)]({'function':_0x61f010(0xff),'args':_0x4126ae});}else logger[_0x61f010(0xc7)](_0x61f010(0x170));}),_0x1de735['on'](_0x1cdaeb(0x84),_0x1264f0=>{const _0x1c155c=_0x1cdaeb;if(validateAccess(_0x1264f0,_0x1c3965)[_0x1c155c(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x1c155c(0x235)]({'function':_0x1c155c(0x244),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x1de735['on'](_0x1cdaeb(0x1a4),_0x51cd98=>{const _0x4c875d=_0x1cdaeb;if(validateAccess(_0x51cd98,_0x1c3965)[_0x4c875d(0x247)]){if(pid[_0x3ca49a])pid[_0x3ca49a][_0x4c875d(0x235)]({'function':_0x4c875d(0x1f0),'args':null});}else logger[_0x4c875d(0xc7)](_0x4c875d(0x188));}),_0x1de735['on'](_0x1cdaeb(0xec),_0x4b39b8=>{const _0x5ece81=_0x1cdaeb;if(validateAccess(_0x4b39b8,_0x1c3965)[_0x5ece81(0x247)])updateBB(_0x5ece81(0x13f));else logger[_0x5ece81(0xc7)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1de735['on'](_0x1cdaeb(0x19e),_0x157df0=>{const _0x713445=_0x1cdaeb;if(validateAccess(_0x157df0,_0x1c3965)[_0x713445(0x247)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1de735['on'](_0x1cdaeb(0x17b),(_0xa39b21,_0x4da157)=>{const _0x5c5683=_0x1cdaeb;if(validateAccess(_0x4da157,_0x1c3965)[_0x5c5683(0x247)])confirmMessage(_0xa39b21);else logger[_0x5c5683(0xc7)](_0x5c5683(0x223));}),_0x1de735['on'](_0x1cdaeb(0xa1),_0x26e3b8=>{const _0x28a91b=_0x1cdaeb;if(validateAccess(_0x26e3b8,_0x1c3965)['allow']){if(devices[_0x1c3965][_0x28a91b(0x1e3)])clearTimeout(devices[_0x1c3965][_0x28a91b(0x1e3)]);if(devices[_0x1c3965][_0x28a91b(0x128)])clearTimeout(devices[_0x1c3965][_0x28a91b(0x128)]);removeSocketListeners(getClient(_0x1de735['id'])[_0x28a91b(0x1b4)]),addBlacklist(_0x1c3965),devices[_0x1c3965][_0x28a91b(0x236)]=null,devices[_0x1c3965][_0x28a91b(0x1fb)]=null,devices[_0x1c3965][_0x28a91b(0x255)]['token']=null,logger[_0x28a91b(0x1ce)](_0x28a91b(0x1cc)+_0x1c3965[_0x28a91b(0xef)](-0x8)),io['to'](getClient(_0x1de735['id'])[_0x28a91b(0x1b4)])[_0x28a91b(0x126)](_0x28a91b(0x159),{'access':{'allow':![],'reason':_0x28a91b(0x249),'token':null}});}else logger[_0x28a91b(0xc7)](_0x28a91b(0x127));});}function removeSocketListeners(_0x16fd74){const _0x2ffe7a=_0x5d8331;getClientsWithUuid(_0x16fd74)[_0x2ffe7a(0x254)](_0x4996e6=>{getSocket(_0x4996e6['id'])['removeAllListeners']();});}function cleanSettings(){const _0x528f99=_0x5d8331;let _0x3754b4=settings;return settings[_0x528f99(0x151)]&&settings[_0x528f99(0x151)]!=''&&(_0x3754b4={..._0x3754b4,'telegramToken':'************'}),settings[_0x528f99(0x1ab)]&&settings[_0x528f99(0x1ab)]!=''&&(_0x3754b4={..._0x3754b4,'bbPassword':'************'}),(settings['bbPassword']&&settings['bbPassword']==_0x528f99(0xa4)||settings[_0x528f99(0x151)]&&settings['telegramToken']==_0x528f99(0xa4))&&(_0x3754b4={..._0x3754b4,'restored':{'password':settings[_0x528f99(0x1ab)]==_0x528f99(0xa4),'telegram':settings['telegramToken']==_0x528f99(0xa4)}}),_0x3754b4;}async function updateBB(_0x395246){const _0x199d1e=_0x5d8331;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x2a835b=>{const _0x210e16=_0x20bb;restartBot(_0x2a835b[_0x210e16(0x132)]);}),logger['debug'](_0x199d1e(0x117)+_0x395246);if(_0x395246==_0x199d1e(0x13f))process[_0x199d1e(0x235)]({'update':!![]},_0x1539e8=>{});else _0x395246==_0x199d1e(0x72)&&process[_0x199d1e(0x235)]({'reinstall':!![]},_0x3ab6a2=>{});}function startBot(_0x1c6398,_0x17e821,_0x3fb321){const _0x598e7e=_0x5d8331;if(debugging)_0x1c6398[_0x598e7e(0x256)]('-d');let _0x57da8d=![];const _0x59be04=_0x1c6398[0x0];_0x17e821={..._0x17e821,'stdio':[_0x598e7e(0x140),'inherit',_0x598e7e(0x140),_0x598e7e(0xce)]},pid[_0x59be04]=childProcess[_0x598e7e(0xfa)](botfile,_0x1c6398,_0x17e821),pid[_0x59be04]['on']('message',_0x2844d9=>{const _0x4a652a=_0x598e7e;switch(Object[_0x4a652a(0xf4)](_0x2844d9)[0x0]){case'botname':updateBotName(_0x59be04,_0x2844d9[_0x4a652a(0x8d)]);break;case _0x4a652a(0x1f9):updateBotManager();break;case _0x4a652a(0x159):updateStatus(_0x59be04,_0x2844d9[_0x4a652a(0x159)]);break;case'live':updateLive(_0x59be04,_0x2844d9['live']);break;case _0x4a652a(0x112):updateLive(_0x59be04,_0x2844d9[_0x4a652a(0x112)]),io['to'](_0x59be04)[_0x4a652a(0x126)](_0x4a652a(0x159),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x4a652a(0x18b):_0x2844d9[_0x4a652a(0x18b)]==_0x4a652a(0xf5)&&restartBot(_0x59be04);_0x2844d9[_0x4a652a(0x18b)]=='kill'&&toggleBot(_0x59be04,_0x4a652a(0x196),_0x4a652a(0x1a2));break;case _0x4a652a(0x1fd):sendTelegram(_0x59be04,_0x2844d9['telegram']);break;case _0x4a652a(0x1ae):sendTelegramMsg(_0x2844d9[_0x4a652a(0x1ae)]);break;case _0x4a652a(0x137):io['to'](_0x59be04)['emit'](_0x2844d9[_0x4a652a(0x137)],_0x2844d9[_0x4a652a(0x1d4)]);break;}}),pid[_0x59be04]['on']('error',function(_0x468a73){if(_0x57da8d)return;_0x57da8d=!![],_0x3fb321(_0x468a73);}),pid[_0x59be04]['on']('exit',async function(_0x4a44bf){const _0x564f2a=_0x598e7e;if(installingUpdate)return;if(_0x57da8d)return;_0x57da8d=!![],_0x3fb321(null);const _0x4d1b96=dbConfig[_0x564f2a(0x1ec)](_0x564f2a(0x171))[_0x564f2a(0x13d)]({'botID':_0x59be04})['value']();_0x4d1b96&&(_0x4d1b96[_0x564f2a(0x159)]=='enabled'||_0x4d1b96[_0x564f2a(0x159)]==_0x564f2a(0x20c))&&(await sleep(0x3e8),updateLive(_0x59be04,'stopped'),logger[_0x564f2a(0xc7)](_0x564f2a(0x13b)+_0x59be04),startBot([_0x59be04,userID],{'cwd':bbpath},function(_0x1269f2){const _0x59caa5=_0x564f2a;if(_0x1269f2)logger[_0x59caa5(0xc7)](_0x1269f2);}));});}function stopBot(_0x5cb210){const _0x1bbea0=_0x5d8331;getClientsWithBotID(_0x5cb210)[_0x1bbea0(0x254)](_0x4efd29=>{const _0x15b544=_0x1bbea0;getSocket(_0x4efd29['id'])[_0x15b544(0xd9)](!![]),removeClient(_0x4efd29['id']);}),pid[_0x5cb210]&&(pid[_0x5cb210][_0x1bbea0(0x102)](),pid[_0x5cb210]=null);}function restartBot(_0x111ec3){const _0xa1eb6a=_0x5d8331;if(pid[_0x111ec3])pid[_0x111ec3][_0xa1eb6a(0x102)]();}function addBot(){const _0xedaa7c=_0x5d8331;let _0x44ec50;for(let _0x5ae9fd=0x1;_0x5ae9fd<0x3e9;_0x5ae9fd++){_0x44ec50=_0x5ae9fd[_0xedaa7c(0x1b8)]()[_0xedaa7c(0x221)](0x3,'0');let _0x3a78b3=config['find'](_0x1663d=>_0x1663d[_0xedaa7c(0x132)]==_0x44ec50);if(!_0x3a78b3)break;}if(_0x44ec50==='1000'){logger['full'](_0xedaa7c(0x9e));return;}logger['full'](_0xedaa7c(0x219)+_0x44ec50),dbConfig['get'](_0xedaa7c(0x171))[_0xedaa7c(0x256)]({'botID':_0x44ec50,'botname':_0xedaa7c(0x226)+_0x44ec50,'status':_0xedaa7c(0x20c),'live':''})[_0xedaa7c(0xe0)](),startBot([_0x44ec50,userID],{'cwd':bbpath},function(_0x482909){if(_0x482909)logger['full'](_0x482909);}),config=getConfiguration(),io['to'](_0xedaa7c(0x142))[_0xedaa7c(0x126)]('bots',config),broadcastToBots(_0xedaa7c(0x171),JSON[_0xedaa7c(0x1da)](config));}function deleteBot(_0x29ef6b){const _0x559d7d=_0x5d8331;getClientsWithBotID(_0x29ef6b)[_0x559d7d(0x254)](_0x314fa8=>{const _0x3f7e9f=_0x559d7d;getSocket(_0x314fa8['id'])[_0x3f7e9f(0xd9)](!![]),removeClient(_0x314fa8['id']);}),dbConfig['get'](_0x559d7d(0x171))[_0x559d7d(0x1eb)]({'botID':_0x29ef6b})['write'](),logger['full'](_0x559d7d(0xa9)+_0x29ef6b),stopBot(_0x29ef6b);try{if(fs['existsSync'](path['join'](configpath,_0x559d7d(0x1a5)+_0x29ef6b+'-config.json')))fs[_0x559d7d(0x207)](path[_0x559d7d(0x9d)](configpath,_0x559d7d(0x1a5)+_0x29ef6b+_0x559d7d(0xe2)));if(fs[_0x559d7d(0x10d)](path[_0x559d7d(0x9d)](configpath,_0x559d7d(0x1a5)+_0x29ef6b+'-events.json')))fs['unlinkSync'](path[_0x559d7d(0x9d)](configpath,'bot-'+_0x29ef6b+_0x559d7d(0x153)));if(fs[_0x559d7d(0x10d)](path[_0x559d7d(0x9d)](configpath,_0x559d7d(0x1a5)+_0x29ef6b+_0x559d7d(0x213))))fs[_0x559d7d(0x207)](path[_0x559d7d(0x9d)](configpath,_0x559d7d(0x1a5)+_0x29ef6b+_0x559d7d(0x213)));if(fs[_0x559d7d(0x10d)](path['join'](configpath,_0x559d7d(0x1a5)+_0x29ef6b+_0x559d7d(0x1fa))))fs[_0x559d7d(0x207)](path[_0x559d7d(0x9d)](configpath,'bot-'+_0x29ef6b+_0x559d7d(0x1fa)));}catch(_0x2c835c){if(_0x2c835c)logger[_0x559d7d(0xc7)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x2c835c);}config=getConfiguration(),io['to'](_0x559d7d(0x142))[_0x559d7d(0x126)](_0x559d7d(0x171),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x5e663d,_0x37e77b,_0x3bbc5a){const _0x3180c8=_0x5d8331;dbConfig[_0x3180c8(0x1ec)](_0x3180c8(0x171))[_0x3180c8(0x13d)]({'botID':_0x5e663d})[_0x3180c8(0xc3)]({'status':_0x37e77b})[_0x3180c8(0xc3)]({'live':_0x3bbc5a})[_0x3180c8(0xe0)]();if(_0x37e77b=='enabled'||_0x37e77b==_0x3180c8(0x20c))logger[_0x3180c8(0xc7)]('Enabled\x20Bot\x20'+_0x5e663d),startBot([_0x5e663d,userID],{'cwd':bbpath},function(_0x3f779b){const _0x1da4b5=_0x3180c8;if(_0x3f779b)logger[_0x1da4b5(0xc7)](_0x3f779b);});else(_0x37e77b=='disabled'||_0x37e77b=='new-disabled')&&(logger[_0x3180c8(0xc7)](_0x3180c8(0x7d)+_0x5e663d),stopBot(_0x5e663d));config=getConfiguration(),io['to'](_0x3180c8(0x142))[_0x3180c8(0x126)](_0x3180c8(0x171),config),broadcastToBots('bots',JSON[_0x3180c8(0x1da)](config));}function toggleStatus(_0x14e2dd){const _0x52c554=_0x5d8331;let _0x2d629d=dbConfig[_0x52c554(0x1ec)](_0x52c554(0x171))['find']({'botID':_0x14e2dd})['value'](),_0x64a558;if(_0x2d629d['status']===_0x52c554(0xb0))_0x64a558=_0x52c554(0x196);else{if(_0x2d629d[_0x52c554(0x159)]===_0x52c554(0x20c))_0x64a558=_0x52c554(0x179);else{if(_0x2d629d['status']===_0x52c554(0x179))_0x64a558=_0x52c554(0x20c);else{if(_0x2d629d[_0x52c554(0x159)]===_0x52c554(0x196))_0x64a558='enabled';}}}return _0x64a558;}function updateStatus(_0x5ccff2,_0x1750f2){const _0x9bcba2=_0x5d8331;dbConfig[_0x9bcba2(0x1ec)](_0x9bcba2(0x171))[_0x9bcba2(0x13d)]({'botID':_0x5ccff2})[_0x9bcba2(0xc3)]({'status':_0x1750f2})['write'](),config=getConfiguration(),io['to'](_0x9bcba2(0x142))['emit']('bots',config),broadcastToBots(_0x9bcba2(0x171),JSON[_0x9bcba2(0x1da)](config));}function updateLive(_0x5ded7c,_0x3eb1ec){const _0x4856c2=_0x5d8331;dbConfig[_0x4856c2(0x1ec)](_0x4856c2(0x171))[_0x4856c2(0x13d)]({'botID':_0x5ded7c})[_0x4856c2(0xc3)]({'live':_0x3eb1ec})[_0x4856c2(0xe0)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4856c2(0x171),config),broadcastToBots(_0x4856c2(0x171),JSON[_0x4856c2(0x1da)](config));}function updateBotName(_0x45de13,_0x597253){const _0x3a248b=_0x5d8331;dbConfig['get']('bots')['find']({'botID':_0x45de13})[_0x3a248b(0xc3)]({'botname':_0x597253})[_0x3a248b(0xe0)](),config=getConfiguration(),io['to'](_0x3a248b(0x142))['emit'](_0x3a248b(0x171),config),broadcastToBots(_0x3a248b(0x171),JSON[_0x3a248b(0x1da)](config));}function _0x2e4c(){const _0x5771e6=['disconnect','2FA\x20login\x20required','\x1b[34m','\x1b[31m','1241307aiUzlq','store','store-configuration','write','login\x20not\x20required','-config.json','telegramEnabled','\x20to\x20','6b67f3d61ee94b8f5c80b4affef4c4d9','getDate','<b>Telegram\x20Bot\x20Status:</b>\x0a','warning','telegramEvents','settings.','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','update-bb','mixpanel','reset-history','slice','mode','lastmsgtelegram','password','Starting\x20bot\x20|\x20Bot\x20','keys','restart','date-fns','Setting\x20access:\x20','success','Markdown','fork','Unauthorized\x20attempt\x20to\x20update\x20bot','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','internal','placeOrder','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','readdirSync','kill','max','sendMetricsTelegram','/restart\x20-\x20restart\x20bot(s)\x0a','crypto','error','filter','All\x20bots\x20running\x20right\x20now','temporary\x20access\x20not\x20allowed','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','existsSync','build','\x20>\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','sign','started','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','restore-backup-file','axios','post','Starting\x20Balance\x20Bot\x20','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','timeshift','expiry','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20download\x20','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','-----------------------------------------------------------------------------------','bbvNew','\x20(2)','3000','HTML','parse','server','blacklist','emit','Unauthorized\x20attempt\x20to\x20log\x20out','pidExpireLogin','family','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','zip/','File\x20uploaded','getTime','get-backup-files','place-order','backup-full.zip','length','botID','\x20mode','(((.+)+)+)+$','No\x20authentication\x20token','statSync','function','all','mkdirSync','.zip','Restarting\x20Bot\x20','clientip','find','node','update','inherit','address','botmanager','#RES#\x20if\x20running\x20locally\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','port','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','compareSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','user','ipaddr.js','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','config/','reload','SIGTERM','telegramChatId','/update\x20-\x20update\x20Balance\x20Bot\x0a','telegramToken','You\x20can\x20use\x20the\x20following\x20commands:\x0a','-events.json','/off\x20-\x20stop\x20bot(s)\x0a','catch','bb-secure.json','hybrid-crypto-js','add','status','5uaPJgd','$1_$2_$3','update-bot','reason','latestversion','rmSync','Password\x20has\x20been\x20reset\x20to:\x20','express-fileupload','\x20|\x20client:\x20...','backupfile','binary','yes',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','getHours','remoteAddress','Backup\x20file\x20unzipped\x20and\x20stored','polling_error','toIPv4MappedAddress','order','Idling\x20bot\x20\x20\x20|\x20Bot\x20','exit','manual','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','bots','Login\x20rejected','split','running','lastmsgemitted','Server','any','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','new-disabled','referer','confirm-message','kind','output-000.log','/:bot','bbUsername','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','name','http','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','/metrics\x20-\x20show\x20bot\x20performance\x0a','type','alias','\x20|\x20','Unauthorized\x20attempt\x20to\x20show\x20configuration','size','static','stop','login\x20token\x20valid','access\x20timeout','=>\x20Go\x20to\x20#BLU#http://127.0.0.1:','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','bot.js','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','getMonth','logs/','=>\x20Go\x20to\x20#BLU#http://','/:bot/portfolio','disabled','generate','randomFillSync','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','privateKey','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20alert\x20notifications\x20only','includes','get-messages','argv','whitelist','uuid-random','stopped','exp','show-config','bot-','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','apiPassword','f2aRequired','Node.js\x20v','range','bbPassword','stopPolling','2FA\x20required','telegrammsg','api-eu.mixpanel.com','Unauthorized\x20login\x20attempt\x20(timeout)','express','apply','ipv6','uuid','30\x20min','generateKeyPairAsync','reject','toString','secure','sendMessage','2FA\x20login\x20token\x20generated','token','publicKey','sendFile','Unauthorized\x20attempt\x20to\x20get\x20events','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','1624tCHbPk','download','version','tkn','files','temporary\x20token\x20generated','version.json','store-fiat','DEFLATE','data','conn','Logged\x20out\x20user\x20...','1734dyjKNM','debug','then','sendPortfolioTelegram','Invalid\x20authentication\x20token\x20(1)','show','temporaryAccessAllowed','args','file','request','log','\x20only\x0a','exec','stringify','hasOwnProperty','loginRequired','replace','format','message','headless','#RES#\x20if\x20running\x20on\x20server','IPv4','pidRefreshToken','Network\x20Interfaces:','copyFileSync','headers','Notifications\x20enabled','::1','Invalid\x20Telegram\x20token','login\x20required','remove','get','\x20(1)','toggleBotMode','createServer','showConfig','hex','userid','lowdb','search','getStartingBalances','notification','initclient','Bot\x20Mgr\x20>\x20','updatebotmanager','-results.json','telegram2FaApproval','Invalid\x20authentication\x20token\x20(2)','telegram','Yes','0.0.0','Logged\x20in\x20user\x20...','</b>\x20?','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','store-headless','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','unlinkSync','backup-full@','isValid','Notifications\x20disabled','createWriteStream','new','https://api.ipify.org?format=json','bbvReceive','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Invalid\x20username\x20or\x20IP\x20address','versions','/status\x20-\x20show\x20bot(s)\x20status\x0a','-performance.json','537850JUxypV','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Login\x20accepted','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','backup-files','Starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','index.html','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Notifications\x20disabled\x0a','output-001.log','toggle-bot-mode','chat','padStart','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20confirm\x20message','backup-full','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Bot\x20','getMinutes','live','yargs/yargs','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','randomBytes','node-zip','No\x20bots\x20running\x20right\x20now','resetHistory','************','All\x20bots','All','#RES#\x0a','Failed\x20to\x20download\x20','auth','send','telegramIpApproval','params','value','Password\x20reset\x20rejected','callback_query','once','env','secret','Allow\x20login\x20from\x20IP\x20address\x20<b>','timestamp','isDirectory','RSA','apiKey','NTBA_FIX_319','cancelLoading','onepagemode','path','allow','title','logged\x20out','storeHeadless',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','alerts','accept','build2','whitelistEnabled','settings','/output-000.log','Orders','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','forEach','access','push','socket.io','answerCallbackQuery','hashSync','reinstall','Token\x20blacklisted','getSeconds','/enable\x20-\x20enable\x20notifications\x0a','login','storeFiat','Starting\x20Balance\x20Bot\x20reinstallation','orders','\x20|\x20user:\x20...','backup/','removeListener','Disabled\x20Bot\x20','get-logs','telegramUsername','deleteHistoryAlerts','/upload-backup','5598760HCaKzZ','getFullYear','cancel-loading','output-003.log','Notifications\x20enabled\x0a','delete-bot','2391FofYnL','event','simple','\x1b[33m','test','botname','Restore\x20process\x20aborted','toIPv4Address','readFileSync','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','output-002.log','getPortfolio','get-portfolio','/:bot/support','connection','bot','messages','mtime','writeFileSync','join','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','3402707jBOSIJ','jsonwebtoken','logout','match','Backup\x20file\x20uploaded','***','/help\x20-\x20show\x20available\x20commands\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','bcryptjs','auto','Deleted\x20Bot\x20','4167TgHxnC','::ffff:127.0.0.1','invalid\x20credentials','handshake','Unauthorized\x20attempt\x20to\x20store\x20configuration','onText','enabled','node-telegram-bot-api','verify','Starting\x20#RED#Balance\x20Bot\x20v','set','/:bot/history','\x1b[0m','defaults','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sortBy','reset-password','temp/','404\x20Not\x20Found','host','delete-alerts','min','7368906kyaHYs','sort','assign','cloneDeep','sha256','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','full','track','from','login\x20token\x20generated','storeConfiguration','User\x20has\x20been\x20validated','Starting\x20Balance\x20Bot\x20update','ipc','username','startsWith','uncaughtException','backup','use','number','/:bot/configuration','lowdb/adapters/FileSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','decrypt'];_0x2e4c=function(){return _0x5771e6;};return _0x2e4c();}function updateBotManager(){const _0x5e6565=_0x5d8331;config=getConfiguration(),io['to']('botmanager')[_0x5e6565(0x126)](_0x5e6565(0x171),config),broadcastToBots(_0x5e6565(0x171),JSON[_0x5e6565(0x1da)](config));}function toggleBotMode(_0x35c23e){const _0x548629=_0x5d8331;if(pid[_0x35c23e])pid[_0x35c23e][_0x548629(0x235)]({'function':_0x548629(0x1ee),'args':null});else{const _0x503993=configpath+'bot-'+_0x35c23e+_0x548629(0xe2),_0x5bb1d6=fs[_0x548629(0x90)](_0x503993),_0x160214=JSON[_0x548629(0x123)](_0x5bb1d6),_0x551a2d=_0x160214[_0x548629(0x99)][0x0][_0x548629(0x1e0)];_0x160214['bot'][0x0][_0x548629(0x1e0)]=!_0x551a2d;const _0x47f16d=JSON[_0x548629(0x1da)](_0x160214,null,0x2);fs['writeFileSync'](_0x503993,_0x47f16d),config=getConfiguration(),io['to']('botmanager')[_0x548629(0x126)](_0x548629(0x171),config),broadcastToBots('bots',JSON[_0x548629(0x1da)](config));}}function telegramError(_0xb62b79){const _0x374963=_0x5d8331;logger[_0x374963(0x8a)](getTimeStamp()+_0x374963(0x24b));}function validateTelegram(_0x30453b){const _0x28c71b=_0x5d8331;if(_0x30453b[_0x28c71b(0xc9)]['username']!=settings[_0x28c71b(0x7f)]&&'@'+_0x30453b[_0x28c71b(0xc9)]['username']!=settings[_0x28c71b(0x7f)])return tgBot[_0x28c71b(0x1ba)](_0x30453b[_0x28c71b(0x220)]['id'],_0x28c71b(0x110),{'parse_mode':'HTML'})[_0x28c71b(0x155)](_0x328f44=>{telegramError(_0x328f44);}),![];return!![];}async function initTelegram(){const _0x5bcd23=_0x5d8331;if(tgBot)tgBot[_0x5bcd23(0x1ac)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5bcd23(0x151)],{'polling':!![]});let _0x5e03d2=_0x5bcd23(0x152);_0x5e03d2+='\x0a',_0x5e03d2+=_0x5bcd23(0x75),_0x5e03d2+='/disable\x20-\x20disable\x20notifications\x0a',_0x5e03d2+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5e03d2+=_0x5bcd23(0x105),_0x5e03d2+='/on\x20-\x20start\x20bot(s)\x0a',_0x5e03d2+=_0x5bcd23(0x154),_0x5e03d2+=_0x5bcd23(0x118),_0x5e03d2+='/names\x20-\x20show\x20bot\x20names\x0a',_0x5e03d2+=_0x5bcd23(0x212),_0x5e03d2+=_0x5bcd23(0x184),_0x5e03d2+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x5e03d2+=_0x5bcd23(0x150),_0x5e03d2+=_0x5bcd23(0x12a),_0x5e03d2+=_0x5bcd23(0xa5);let _0x5c7bbc=_0x5bcd23(0x1a6);_0x5c7bbc+='\x0a',_0x5c7bbc+=_0x5e03d2,tgBot[_0x5bcd23(0xaf)](/\/start/,_0xf9a1cb=>{const _0x16bb3f=_0x5bcd23;if(!validateTelegram(_0xf9a1cb))return;if(settings[_0x16bb3f(0x14f)]!=_0xf9a1cb[_0x16bb3f(0x220)]['id'])updateSetting(_0x16bb3f(0x14f),_0xf9a1cb[_0x16bb3f(0x220)]['id']);updateSetting(_0x16bb3f(0xe3),!![]),tgBot[_0x16bb3f(0x1ba)](_0xf9a1cb[_0x16bb3f(0x220)]['id'],_0x5c7bbc)[_0x16bb3f(0x155)](_0x883425=>{telegramError(_0x883425);});}),tgBot[_0x5bcd23(0xaf)](/\/enable/,_0xf35951=>{const _0x3890e3=_0x5bcd23;if(!validateTelegram(_0xf35951))return;if(settings[_0x3890e3(0x14f)]!=_0xf35951[_0x3890e3(0x220)]['id'])updateSetting(_0x3890e3(0x14f),_0xf35951['chat']['id']);updateSetting(_0x3890e3(0xe3),!![]),tgBot[_0x3890e3(0x1ba)](_0xf35951[_0x3890e3(0x220)]['id'],_0x3890e3(0x1e7))[_0x3890e3(0x155)](_0xed4c84=>{telegramError(_0xed4c84);});}),tgBot[_0x5bcd23(0xaf)](/\/config/,async _0x307ad0=>{const _0x22e559=_0x5bcd23;if(!validateTelegram(_0x307ad0))return;tgBot[_0x22e559(0x7c)](_0x22e559(0x23a)),tgBot[_0x22e559(0x1ba)](_0x307ad0['chat']['id'],_0x22e559(0xb8),{'reply_markup':{'inline_keyboard':[[{'text':_0x22e559(0x252),'callback_data':_0x22e559(0x79)},{'text':'Alerts','callback_data':_0x22e559(0x24c)},{'text':_0x22e559(0x231),'callback_data':_0x22e559(0x138)}]]}})[_0x22e559(0x155)](_0x1587eb=>{telegramError(_0x1587eb);}),tgBot['on'](_0x22e559(0x23a),async _0xe081ad=>{const _0x59e572=_0x22e559,_0x1ae0f3=_0xe081ad['data'],_0x4140a9=_0xe081ad[_0x59e572(0x1df)];tgBot[_0x59e572(0x258)](_0xe081ad['id'])[_0x59e572(0x1cf)](async()=>{const _0x641ff2=_0x59e572;_0x1ae0f3=='orders'&&(updateSetting('telegramEvents',_0x641ff2(0x79)),updateSetting(_0x641ff2(0xe3),!![]),await tgBot[_0x641ff2(0x1ba)](_0x4140a9[_0x641ff2(0x220)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x641ff2(0x155)](_0x3f9574=>{telegramError(_0x3f9574);}));_0x1ae0f3=='alerts'&&(updateSetting('telegramEvents',_0x641ff2(0x24c)),updateSetting('telegramEnabled',!![]),await tgBot[_0x641ff2(0x1ba)](_0x4140a9[_0x641ff2(0x220)]['id'],_0x641ff2(0x19c))['catch'](_0x3530e2=>{telegramError(_0x3530e2);}));_0x1ae0f3==_0x641ff2(0x138)&&(updateSetting('telegramEvents',_0x641ff2(0x138)),updateSetting('telegramEnabled',!![]),await tgBot[_0x641ff2(0x1ba)](_0x4140a9[_0x641ff2(0x220)]['id'],_0x641ff2(0xb9))['catch'](_0x1d6b75=>{telegramError(_0x1d6b75);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x4140a9[_0x641ff2(0x220)]['id'],_0x641ff2(0x178))[_0x641ff2(0x155)](_0x4b189e=>{telegramError(_0x4b189e);});}),tgBot[_0x59e572(0x7c)]('callback_query');});}),tgBot[_0x5bcd23(0xaf)](/\/status/,_0x2992a1=>{const _0x1543af=_0x5bcd23;if(!validateTelegram(_0x2992a1))return;const _0x4539cd=getBotsWithMode();let _0x2be957='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x1543af(0x254)](_0x1442fc=>{const _0x4d50ac=_0x1543af,_0x11100d=_0x4539cd[_0x4d50ac(0x13d)](_0x2df7b5=>_0x2df7b5[_0x4d50ac(0x132)]==_0x1442fc[_0x4d50ac(0x132)])[_0x4d50ac(0xf0)];_0x2be957+=_0x4d50ac(0x226)+_0x1442fc['botID']+':\x20'+_0x1442fc[_0x4d50ac(0x159)]+_0x4d50ac(0x187)+_0x11100d+'\x20|\x20'+_0x1442fc['live']+'\x0a';}),_0x2be957+='\x0a',_0x2be957+=_0x1543af(0xe7),_0x2be957+=!settings[_0x1543af(0xe3)]?_0x1543af(0x21d):_0x1543af(0x86),_0x2be957+=settings[_0x1543af(0xe3)]?settings[_0x1543af(0xe9)]==_0x1543af(0x138)?_0x1543af(0x206):'Notifications\x20types:\x20'+settings[_0x1543af(0xe9)]+_0x1543af(0x1d8):'',tgBot[_0x1543af(0x1ba)](_0x2992a1[_0x1543af(0x220)]['id'],_0x2be957,{'parse_mode':_0x1543af(0x122)})[_0x1543af(0x155)](_0x72f890=>{telegramError(_0x72f890);});}),tgBot['onText'](/\/restart/,_0x259a47=>{const _0x42d03=_0x5bcd23;if(!validateTelegram(_0x259a47))return;tgBot[_0x42d03(0x7c)](_0x42d03(0x23a));const _0x5b5448=getEnabledBots();if(_0x5b5448[_0x42d03(0x131)]==0x0)tgBot['sendMessage'](_0x259a47[_0x42d03(0x220)]['id'],_0x42d03(0x22d))['catch'](_0xe863f8=>{telegramError(_0xe863f8);});else{if(_0x5b5448[_0x42d03(0x131)]>0x1)_0x5b5448[_0x42d03(0x256)]({'botID':_0x42d03(0x138)});let _0x52e75d=[],_0x33996c=[];const _0x2dccc8=_0x5b5448['length']%0x4==0x0||_0x5b5448['length']%0x4==0x3||_0x5b5448['length']%0x3==0x1?0x4:0x3;let _0x26897f=0x0;_0x5b5448[_0x42d03(0x254)]((_0xea776e,_0x1e3b8b)=>{const _0x27cbcd=_0x42d03;if(_0x1e3b8b%_0x2dccc8==0x0)_0x33996c=[];_0x33996c[_0x27cbcd(0x256)]({'text':_0xea776e[_0x27cbcd(0x132)]==_0x27cbcd(0x138)?_0x27cbcd(0x230):'Bot\x20'+_0xea776e['botID'],'callback_data':_0xea776e[_0x27cbcd(0x132)]}),_0x1e3b8b%_0x2dccc8==0x0&&(_0x52e75d[_0x26897f]=_0x33996c,_0x26897f++);}),tgBot[_0x42d03(0x1ba)](_0x259a47[_0x42d03(0x220)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x52e75d}})[_0x42d03(0x155)](_0x4e7e1e=>{telegramError(_0x4e7e1e);}),tgBot['on']('callback_query',async _0x537288=>{const _0x30f601=_0x42d03,_0x24dc63=_0x537288[_0x30f601(0x1ca)],_0x2798b9=_0x537288[_0x30f601(0x1df)];tgBot[_0x30f601(0x258)](_0x537288['id'])['then'](async()=>{const _0x5dc218=_0x30f601;_0x24dc63==_0x5dc218(0x138)?config[_0x5dc218(0x254)](_0x27ba9b=>{restartBot(_0x27ba9b['botID']);}):restartBot(_0x24dc63);}),tgBot[_0x30f601(0x7c)]('callback_query');});}}),tgBot[_0x5bcd23(0xaf)](/\/on/,_0x1f027d=>{const _0x4dd118=_0x5bcd23;if(!validateTelegram(_0x1f027d))return;tgBot[_0x4dd118(0x7c)](_0x4dd118(0x23a));const _0x4ac32a=getDisabledBots();if(_0x4ac32a[_0x4dd118(0x131)]==0x0)tgBot[_0x4dd118(0x1ba)](_0x1f027d['chat']['id'],_0x4dd118(0x109))[_0x4dd118(0x155)](_0x4e1650=>{telegramError(_0x4e1650);});else{if(_0x4ac32a[_0x4dd118(0x131)]>0x1)_0x4ac32a[_0x4dd118(0x256)]({'botID':_0x4dd118(0x138)});let _0xefdb81=[],_0x1e8a87=[];const _0x2640f7=_0x4ac32a[_0x4dd118(0x131)]%0x4==0x0||_0x4ac32a[_0x4dd118(0x131)]%0x4==0x3||_0x4ac32a['length']%0x3==0x1?0x4:0x3;let _0x4ccff3=0x0;_0x4ac32a[_0x4dd118(0x254)]((_0x37261e,_0x49491a)=>{const _0x2ae089=_0x4dd118;if(_0x49491a%_0x2640f7==0x0)_0x1e8a87=[];_0x1e8a87[_0x2ae089(0x256)]({'text':_0x37261e[_0x2ae089(0x132)]==_0x2ae089(0x138)?_0x2ae089(0x230):_0x2ae089(0x226)+_0x37261e[_0x2ae089(0x132)],'callback_data':_0x37261e[_0x2ae089(0x132)]}),_0x49491a%_0x2640f7==0x0&&(_0xefdb81[_0x4ccff3]=_0x1e8a87,_0x4ccff3++);}),tgBot[_0x4dd118(0x1ba)](_0x1f027d[_0x4dd118(0x220)]['id'],_0x4dd118(0x202),{'reply_markup':{'inline_keyboard':_0xefdb81}})[_0x4dd118(0x155)](_0x2b7cb7=>{telegramError(_0x2b7cb7);}),tgBot['on'](_0x4dd118(0x23a),async _0x312ea4=>{const _0x3c8b61=_0x4dd118,_0x1e6a94=_0x312ea4[_0x3c8b61(0x1ca)],_0x17ba9b=_0x312ea4['message'];tgBot[_0x3c8b61(0x258)](_0x312ea4['id'])[_0x3c8b61(0x1cf)](async()=>{const _0x5e771b=_0x3c8b61;_0x1e6a94=='all'?(tgBot['sendMessage'](_0x17ba9b[_0x5e771b(0x220)]['id'],_0x5e771b(0x21c))['catch'](_0x2b3553=>{telegramError(_0x2b3553);}),_0x4ac32a[_0x5e771b(0x254)](_0x5ac964=>{const _0x164103=_0x5e771b;if(_0x5ac964['botID']!=_0x164103(0x138))toggleBot(_0x5ac964['botID'],toggleStatus(_0x5ac964['botID']),_0x164103(0x1a2));})):(tgBot[_0x5e771b(0x1ba)](_0x17ba9b[_0x5e771b(0x220)]['id'],_0x5e771b(0x215)+_0x1e6a94)['catch'](_0x4af7a9=>{telegramError(_0x4af7a9);}),toggleBot(_0x1e6a94,toggleStatus(_0x1e6a94),'stopped'));}),tgBot[_0x3c8b61(0x7c)](_0x3c8b61(0x23a));});}}),tgBot[_0x5bcd23(0xaf)](/\/off/,_0x13b755=>{const _0x4f9312=_0x5bcd23;if(!validateTelegram(_0x13b755))return;tgBot[_0x4f9312(0x7c)](_0x4f9312(0x23a));const _0x6e3b39=getEnabledBots();if(_0x6e3b39[_0x4f9312(0x131)]==0x0)tgBot['sendMessage'](_0x13b755[_0x4f9312(0x220)]['id'],_0x4f9312(0x22d))[_0x4f9312(0x155)](_0xe73b6c=>{telegramError(_0xe73b6c);});else{if(_0x6e3b39[_0x4f9312(0x131)]>0x1)_0x6e3b39[_0x4f9312(0x256)]({'botID':_0x4f9312(0x138)});let _0x1e5f7b=[],_0x166f63=[];const _0x52f666=_0x6e3b39[_0x4f9312(0x131)]%0x4==0x0||_0x6e3b39[_0x4f9312(0x131)]%0x4==0x3||_0x6e3b39[_0x4f9312(0x131)]%0x3==0x1?0x4:0x3;let _0x1d565b=0x0;_0x6e3b39['forEach']((_0x23e042,_0x4a8c05)=>{const _0x383978=_0x4f9312;if(_0x4a8c05%_0x52f666==0x0)_0x166f63=[];_0x166f63[_0x383978(0x256)]({'text':_0x23e042[_0x383978(0x132)]==_0x383978(0x138)?'All\x20bots':_0x383978(0x226)+_0x23e042[_0x383978(0x132)],'callback_data':_0x23e042[_0x383978(0x132)]}),_0x4a8c05%_0x52f666==0x0&&(_0x1e5f7b[_0x1d565b]=_0x166f63,_0x1d565b++);}),tgBot['sendMessage'](_0x13b755[_0x4f9312(0x220)]['id'],_0x4f9312(0x10c),{'reply_markup':{'inline_keyboard':_0x1e5f7b}})[_0x4f9312(0x155)](_0x5a871a=>{telegramError(_0x5a871a);}),tgBot['on'](_0x4f9312(0x23a),async _0x2551eb=>{const _0x2832dc=_0x4f9312,_0x1544ec=_0x2551eb[_0x2832dc(0x1ca)],_0x562911=_0x2551eb[_0x2832dc(0x1df)];tgBot[_0x2832dc(0x258)](_0x2551eb['id'])[_0x2832dc(0x1cf)](async()=>{const _0x4d734e=_0x2832dc;_0x1544ec=='all'?(tgBot['sendMessage'](_0x562911[_0x4d734e(0x220)]['id'],_0x4d734e(0xc6))[_0x4d734e(0x155)](_0x3b6051=>{telegramError(_0x3b6051);}),_0x6e3b39[_0x4d734e(0x254)](_0x5b505a=>{const _0x56855e=_0x4d734e;if(_0x5b505a[_0x56855e(0x132)]!=_0x56855e(0x138))toggleBot(_0x5b505a[_0x56855e(0x132)],toggleStatus(_0x5b505a[_0x56855e(0x132)]),_0x56855e(0x1a2));})):(tgBot[_0x4d734e(0x1ba)](_0x562911[_0x4d734e(0x220)]['id'],_0x4d734e(0x14b)+_0x1544ec)[_0x4d734e(0x155)](_0x261932=>{telegramError(_0x261932);}),toggleBot(_0x1544ec,toggleStatus(_0x1544ec),_0x4d734e(0x1a2)));}),tgBot['removeListener'](_0x2832dc(0x23a));});}}),tgBot[_0x5bcd23(0xaf)](/\/metrics/,_0x1305e6=>{const _0x12c808=_0x5bcd23;if(!validateTelegram(_0x1305e6))return;tgBot[_0x12c808(0x7c)]('callback_query');const _0x2f0c27=getEnabledBots();if(_0x2f0c27[_0x12c808(0x131)]==0x0)tgBot[_0x12c808(0x1ba)](_0x1305e6[_0x12c808(0x220)]['id'],_0x12c808(0x22d))['catch'](_0x33a2ca=>{telegramError(_0x33a2ca);});else{if(_0x2f0c27[_0x12c808(0x131)]>0x1){let _0x4ef8ce=[],_0x1e3462=[];const _0x15c1d9=_0x2f0c27[_0x12c808(0x131)]%0x4==0x0||_0x2f0c27[_0x12c808(0x131)]%0x4==0x3||_0x2f0c27['length']%0x3==0x1?0x4:0x3;let _0x30d0e5=0x0;_0x2f0c27[_0x12c808(0x254)]((_0x5f5723,_0x3fa453)=>{const _0x68f348=_0x12c808;if(_0x3fa453%_0x15c1d9==0x0)_0x1e3462=[];_0x1e3462['push']({'text':_0x68f348(0x226)+_0x5f5723[_0x68f348(0x132)],'callback_data':_0x5f5723['botID']}),_0x3fa453%_0x15c1d9==0x0&&(_0x4ef8ce[_0x30d0e5]=_0x1e3462,_0x30d0e5++);}),tgBot[_0x12c808(0x1ba)](_0x1305e6[_0x12c808(0x220)]['id'],_0x12c808(0x93),{'reply_markup':{'inline_keyboard':_0x4ef8ce}})[_0x12c808(0x155)](_0x4c017b=>{telegramError(_0x4c017b);}),tgBot['on']('callback_query',async _0xa78571=>{const _0x343588=_0x12c808,_0x53b7f1=_0xa78571['data'],_0x23c9fa=_0xa78571[_0x343588(0x1df)];tgBot[_0x343588(0x258)](_0xa78571['id'])[_0x343588(0x1cf)](async()=>{const _0x216a43=_0x343588;if(pid[_0x53b7f1])pid[_0x53b7f1]['send']({'function':_0x216a43(0x104),'args':null});}),tgBot[_0x343588(0x7c)]('callback_query');});}else{const _0x3e8352=_0x2f0c27[0x0]['botID'];if(pid[_0x3e8352])pid[_0x3e8352][_0x12c808(0x235)]({'function':_0x12c808(0x104),'args':null});}}}),tgBot[_0x5bcd23(0xaf)](/\/portfolio/,_0x144b69=>{const _0x343900=_0x5bcd23;if(!validateTelegram(_0x144b69))return;tgBot[_0x343900(0x7c)](_0x343900(0x23a));const _0x3f974b=getEnabledBots();if(_0x3f974b[_0x343900(0x131)]==0x0)tgBot[_0x343900(0x1ba)](_0x144b69[_0x343900(0x220)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x343900(0x155)](_0x4e85dd=>{telegramError(_0x4e85dd);});else{if(_0x3f974b['length']>0x1){let _0x32b7c2=[],_0x31b3b5=[];const _0x40e43f=_0x3f974b[_0x343900(0x131)]%0x4==0x0||_0x3f974b[_0x343900(0x131)]%0x4==0x3||_0x3f974b['length']%0x3==0x1?0x4:0x3;let _0x1dde5d=0x0;_0x3f974b['forEach']((_0x4249d5,_0x37733e)=>{const _0x4a9c5a=_0x343900;if(_0x37733e%_0x40e43f==0x0)_0x31b3b5=[];_0x31b3b5[_0x4a9c5a(0x256)]({'text':'Bot\x20'+_0x4249d5[_0x4a9c5a(0x132)],'callback_data':_0x4249d5[_0x4a9c5a(0x132)]}),_0x37733e%_0x40e43f==0x0&&(_0x32b7c2[_0x1dde5d]=_0x31b3b5,_0x1dde5d++);}),tgBot[_0x343900(0x1ba)](_0x144b69[_0x343900(0x220)]['id'],_0x343900(0xfc),{'reply_markup':{'inline_keyboard':_0x32b7c2}})[_0x343900(0x155)](_0x25e17e=>{telegramError(_0x25e17e);}),tgBot['on']('callback_query',async _0x544f00=>{const _0x714d5c=_0x343900,_0x5636d8=_0x544f00[_0x714d5c(0x1ca)],_0x4cff93=_0x544f00['message'];tgBot['answerCallbackQuery'](_0x544f00['id'])['then'](async()=>{const _0x32697b=_0x714d5c;if(pid[_0x5636d8])pid[_0x5636d8][_0x32697b(0x235)]({'function':_0x32697b(0x1d0),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x4d4d1f=_0x3f974b[0x0][_0x343900(0x132)];if(pid[_0x4d4d1f])pid[_0x4d4d1f][_0x343900(0x235)]({'function':_0x343900(0x1d0),'args':null});}}}),tgBot[_0x5bcd23(0xaf)](/\/update/,async _0x6743a0=>{const _0x5808ca=_0x5bcd23;if(!validateTelegram(_0x6743a0))return;tgBot[_0x5808ca(0x7c)](_0x5808ca(0x23a)),await getMessages();if(!updateAvailable)tgBot[_0x5808ca(0x1ba)](_0x6743a0[_0x5808ca(0x220)]['id'],_0x5808ca(0x10b))[_0x5808ca(0x155)](_0x1ab042=>{telegramError(_0x1ab042);});else!validInstallation?tgBot[_0x5808ca(0x1ba)](_0x6743a0[_0x5808ca(0x220)]['id'],_0x5808ca(0xa6))[_0x5808ca(0x155)](_0x59a6a0=>{telegramError(_0x59a6a0);}):(tgBot[_0x5808ca(0x1ba)](_0x6743a0[_0x5808ca(0x220)]['id'],_0x5808ca(0x22a),{'reply_markup':{'inline_keyboard':[[{'text':_0x5808ca(0x1fe),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x5808ca(0x155)](_0x40cd75=>{telegramError(_0x40cd75);}),tgBot['on'](_0x5808ca(0x23a),async _0x3413f8=>{const _0x24d2bf=_0x5808ca,_0x5e77c7=_0x3413f8['data'],_0x7638ac=_0x3413f8[_0x24d2bf(0x1df)];tgBot[_0x24d2bf(0x258)](_0x3413f8['id'])[_0x24d2bf(0x1cf)](async()=>{const _0x17834d=_0x24d2bf;_0x5e77c7=='yes'&&(await tgBot[_0x17834d(0x1ba)](_0x7638ac[_0x17834d(0x220)]['id'],_0x17834d(0xcd))[_0x17834d(0x155)](_0x4d8ca8=>{telegramError(_0x4d8ca8);}),updateBB(_0x17834d(0x13f))),_0x5e77c7=='no'&&await tgBot[_0x17834d(0x1ba)](_0x7638ac[_0x17834d(0x220)]['id'],_0x17834d(0x225))['catch'](_0x5bdb13=>{telegramError(_0x5bdb13);});}),tgBot[_0x24d2bf(0x7c)](_0x24d2bf(0x23a));}));}),tgBot['onText'](/\/reinstall/,async _0x4c60a6=>{const _0x1db093=_0x5bcd23;if(!validateTelegram(_0x4c60a6))return;tgBot[_0x1db093(0x7c)](_0x1db093(0x23a)),!validInstallation?tgBot['sendMessage'](_0x4c60a6[_0x1db093(0x220)]['id'],_0x1db093(0x205))[_0x1db093(0x155)](_0x4676d=>{telegramError(_0x4676d);}):(tgBot['sendMessage'](_0x4c60a6[_0x1db093(0x220)]['id'],_0x1db093(0x100),{'reply_markup':{'inline_keyboard':[[{'text':_0x1db093(0x1fe),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x130b7b=>{telegramError(_0x130b7b);}),tgBot['on']('callback_query',async _0x907cd4=>{const _0x23e0bb=_0x1db093,_0x3579d9=_0x907cd4[_0x23e0bb(0x1ca)],_0x3f0e0d=_0x907cd4['message'];tgBot['answerCallbackQuery'](_0x907cd4['id'])[_0x23e0bb(0x1cf)](async()=>{const _0x1ba9bc=_0x23e0bb;_0x3579d9=='yes'&&(await tgBot[_0x1ba9bc(0x1ba)](_0x3f0e0d[_0x1ba9bc(0x220)]['id'],_0x1ba9bc(0x78))[_0x1ba9bc(0x155)](_0x3d4086=>{telegramError(_0x3d4086);}),updateBB(_0x1ba9bc(0x72))),_0x3579d9=='no'&&await tgBot[_0x1ba9bc(0x1ba)](_0x3f0e0d['chat']['id'],_0x1ba9bc(0x11d))['catch'](_0xe2538e=>{telegramError(_0xe2538e);});}),tgBot[_0x23e0bb(0x7c)](_0x23e0bb(0x23a));}));}),tgBot[_0x5bcd23(0xaf)](/\/toggle/,_0x3e4942=>{const _0x58cb12=_0x5bcd23;if(!validateTelegram(_0x3e4942))return;tgBot[_0x58cb12(0x7c)](_0x58cb12(0x23a));const _0x2049eb=getBotsWithMode();if(_0x2049eb['length']==0x0)tgBot[_0x58cb12(0x1ba)](_0x3e4942[_0x58cb12(0x220)]['id'],_0x58cb12(0x22d))[_0x58cb12(0x155)](_0x5a21ce=>{telegramError(_0x5a21ce);});else{let _0x37c0e3=[],_0x1f3409=[];const _0x381f34=0x2;let _0x525d28=0x0;_0x2049eb['forEach']((_0xcf9131,_0x40c675)=>{const _0x2490aa=_0x58cb12;if(_0x40c675%_0x381f34==0x0)_0x1f3409=[];_0x1f3409[_0x2490aa(0x256)]({'text':'Bot\x20'+_0xcf9131[_0x2490aa(0x132)]+'\x20('+_0xcf9131[_0x2490aa(0xf0)]+')','callback_data':_0xcf9131[_0x2490aa(0x132)]}),_0x40c675%_0x381f34==0x0&&(_0x37c0e3[_0x525d28]=_0x1f3409,_0x525d28++);}),tgBot[_0x58cb12(0x1ba)](_0x3e4942[_0x58cb12(0x220)]['id'],_0x58cb12(0x91),{'reply_markup':{'inline_keyboard':_0x37c0e3}})[_0x58cb12(0x155)](_0x273e7e=>{telegramError(_0x273e7e);}),tgBot['on'](_0x58cb12(0x23a),async _0x48509c=>{const _0x4fc07c=_0x58cb12,_0x574807=_0x48509c[_0x4fc07c(0x1ca)],_0x3d22a0=_0x48509c[_0x4fc07c(0x1df)];tgBot['answerCallbackQuery'](_0x48509c['id'])[_0x4fc07c(0x1cf)](async()=>{const _0x7d22a8=_0x4fc07c,_0x5edd08=_0x2049eb['find'](_0x33b767=>_0x33b767[_0x7d22a8(0x132)]==_0x574807),_0x2acb81=_0x5edd08[_0x7d22a8(0xf0)]==_0x7d22a8(0xa8)?_0x7d22a8(0x16f):_0x7d22a8(0xa8);tgBot[_0x7d22a8(0x1ba)](_0x3d22a0[_0x7d22a8(0x220)]['id'],_0x7d22a8(0x191)+_0x574807+_0x7d22a8(0xe4)+_0x2acb81+_0x7d22a8(0x133))[_0x7d22a8(0x155)](_0x579ca5=>{telegramError(_0x579ca5);}),toggleBotMode(_0x574807);}),tgBot[_0x4fc07c(0x7c)](_0x4fc07c(0x23a));});}}),tgBot[_0x5bcd23(0xaf)](/\/names/,_0x285b53=>{const _0x21b509=_0x5bcd23;if(!validateTelegram(_0x285b53))return;let _0x54cf58='';config[_0x21b509(0x254)](_0x7f2f6e=>{const _0x592dc6=_0x21b509;_0x54cf58+=_0x592dc6(0x226)+_0x7f2f6e[_0x592dc6(0x132)]+':\x20'+_0x7f2f6e[_0x592dc6(0x8d)]+'\x0a';}),tgBot[_0x21b509(0x1ba)](_0x285b53[_0x21b509(0x220)]['id'],_0x54cf58,{'parse_mode':_0x21b509(0x122)})[_0x21b509(0x155)](_0x4671f0=>{telegramError(_0x4671f0);});}),tgBot[_0x5bcd23(0xaf)](/\/disable/,_0x3cff07=>{const _0x14da55=_0x5bcd23;if(!validateTelegram(_0x3cff07))return;tgBot[_0x14da55(0x1ba)](_0x3cff07[_0x14da55(0x220)]['id'],_0x14da55(0x20a))[_0x14da55(0x155)](_0x505372=>{telegramError(_0x505372);}),updateSetting(_0x14da55(0xe3),![]);}),tgBot[_0x5bcd23(0xaf)](/\/help/,_0x3b9ba3=>{const _0x66c23e=_0x5bcd23;if(!validateTelegram(_0x3b9ba3))return;tgBot[_0x66c23e(0x1ba)](_0x3b9ba3['chat']['id'],_0x5e03d2)[_0x66c23e(0x155)](_0x699401=>{telegramError(_0x699401);});}),tgBot['on'](_0x5bcd23(0x16a),_0x5c4764=>{const _0x37fbf4=_0x5bcd23;_0x5c4764[_0x37fbf4(0x1b8)]()[_0x37fbf4(0x19d)](_0x37fbf4(0xbd))&&(logger[_0x37fbf4(0xc7)](_0x37fbf4(0x1e9)),tgBot[_0x37fbf4(0x1ac)](),tgBot=null,io['to']('botmanager')[_0x37fbf4(0x126)](_0x37fbf4(0x1f6),_0x37fbf4(0x1e9)));}),process[_0x5bcd23(0x23b)]('SIGINT',()=>{const _0x12783e=_0x5bcd23;if(tgBot)tgBot[_0x12783e(0x1ac)]();process[_0x12783e(0x16e)](0x1);}),process[_0x5bcd23(0x23b)](_0x5bcd23(0x14e),()=>{const _0x57f598=_0x5bcd23;if(tgBot)tgBot[_0x57f598(0x1ac)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x5694fa,_0x4e360f){const _0x3d62bd=_0x5d8331;if(settings[_0x3d62bd(0xe3)]){if(settings[_0x3d62bd(0xe9)]==_0x3d62bd(0x138)||(_0x4e360f[_0x3d62bd(0x185)]==_0x3d62bd(0x107)||_0x4e360f['type']==_0x3d62bd(0xe8)||_0x4e360f[_0x3d62bd(0x185)]==_0x3d62bd(0xf8))&&settings[_0x3d62bd(0xe9)]==_0x3d62bd(0x24c)||_0x4e360f[_0x3d62bd(0x185)]==_0x3d62bd(0x16c)&&settings[_0x3d62bd(0xe9)]=='orders'){if(tgBot&&settings[_0x3d62bd(0x14f)]){if(_0x4e360f['showname'])tgBot[_0x3d62bd(0x1ba)](settings[_0x3d62bd(0x14f)],_0x4e360f[_0x3d62bd(0x8d)]+_0x3d62bd(0x10f)+_0x4e360f[_0x3d62bd(0x89)])[_0x3d62bd(0x155)](_0x2e9a09=>{telegramError(_0x2e9a09);});else tgBot[_0x3d62bd(0x1ba)](settings[_0x3d62bd(0x14f)],_0x3d62bd(0x226)+_0x5694fa+_0x3d62bd(0x10f)+_0x4e360f[_0x3d62bd(0x89)])[_0x3d62bd(0x155)](_0x5066c2=>{telegramError(_0x5066c2);});}}}}async function sendTelegramMsg(_0x1de807,_0x331f47=_0x5d8331(0x122)){const _0xc9a6e7=_0x5d8331;return settings['telegramEnabled']&&tgBot&&settings[_0xc9a6e7(0x14f)]?(await tgBot[_0xc9a6e7(0x1ba)](settings['telegramChatId'],_0x1de807,{'parse_mode':_0x331f47})[_0xc9a6e7(0x155)](_0x30a3a7=>{telegramError(_0x30a3a7);}),!![]):![];}function getDeviceWithIp(_0x5e15cf){const _0x14c5f7=_0x5d8331;return devices[_0x14c5f7(0x13d)](_0x5e982a=>_0x5e982a['ip']===_0x5e15cf);}function temporaryAccess2FA(_0x4ed211,_0x140716){const _0x37a307=_0x5d8331;let _0x1d554a=new Date(),_0x17e0ec=![];if(lastIpApproval){if(_0x1d554a-lastIpApproval<0x1388)_0x17e0ec=!![];}lastIpApproval=new Date();if(_0x17e0ec)return;tgBot&&settings[_0x37a307(0x14f)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x37a307(0x148)+normalizeIP(_0x140716)[_0x37a307(0x1d2)]+'</b>\x20?',{'parse_mode':_0x37a307(0x122),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x37a307(0x1b5),'callback_data':'30'},{'text':'reject','callback_data':_0x37a307(0x1b7)}]]}})[_0x37a307(0x155)](_0x328c38=>{telegramError(_0x328c38);}),tgBot['on'](_0x37a307(0x23a),async _0x43829a=>{const _0xcc92f=_0x37a307,_0x5d37da=_0x43829a[_0xcc92f(0x1ca)],_0x5c770f=_0x43829a[_0xcc92f(0x1df)];tgBot[_0xcc92f(0x258)](_0x43829a['id'])['then'](async()=>{const _0x57d755=_0xcc92f;devices[_0x4ed211][_0x57d755(0x236)]={'clientip':_0x140716,'timestamp':new Date()[_0x57d755(0x12d)](),'expiry':_0x5d37da},_0x5d37da!=_0x57d755(0x1b7)?(await tgBot[_0x57d755(0x1ba)](_0x5c770f['chat']['id'],'Access\x20enabled\x20for\x20'+_0x5d37da+'\x20minutes',{'parse_mode':'HTML'})[_0x57d755(0x155)](_0x17acb5=>{telegramError(_0x17acb5);}),io['to'](_0x4ed211)[_0x57d755(0x126)](_0x57d755(0x159),{'access':{'allow':![],'reason':_0x57d755(0x14d),'token':null}})):(await tgBot[_0x57d755(0x1ba)](_0x5c770f[_0x57d755(0x220)]['id'],_0x57d755(0x19b))[_0x57d755(0x155)](_0x3b8be3=>{telegramError(_0x3b8be3);}),io['to'](_0x4ed211)['emit'](_0x57d755(0x159),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0xcc92f(0x23a));}));}function loginAccess2FA(_0x332ce9,_0x16d8fc){const _0x177b7e=_0x5d8331;tgBot&&settings[_0x177b7e(0x14f)]&&(tgBot[_0x177b7e(0x7c)]('callback_query'),tgBot[_0x177b7e(0x1ba)](settings['telegramChatId'],_0x177b7e(0x23e)+normalizeIP(_0x16d8fc)[_0x177b7e(0x1d2)]+_0x177b7e(0x201),{'parse_mode':_0x177b7e(0x122),'reply_markup':{'inline_keyboard':[[{'text':_0x177b7e(0x24d),'callback_data':loginExpiry},{'text':_0x177b7e(0x1b7),'callback_data':_0x177b7e(0x1b7)}]]}})[_0x177b7e(0x155)](_0x23518e=>{telegramError(_0x23518e);}),tgBot['on']('callback_query',async _0x3cebec=>{const _0x17311d=_0x177b7e,_0x183fb1=_0x3cebec['data'],_0x2f9ef4=_0x3cebec[_0x17311d(0x1df)];tgBot[_0x17311d(0x258)](_0x3cebec['id'])[_0x17311d(0x1cf)](async()=>{const _0x3d175f=_0x17311d;devices[_0x332ce9]['telegram2FaApproval']={'clientip':_0x16d8fc,'timestamp':new Date()[_0x3d175f(0x12d)](),'expiry':_0x183fb1},_0x183fb1!=_0x3d175f(0x1b7)?(await tgBot[_0x3d175f(0x1ba)](_0x2f9ef4[_0x3d175f(0x220)]['id'],_0x3d175f(0x216),{'parse_mode':_0x3d175f(0x122)})['catch'](_0x4b9030=>{telegramError(_0x4b9030);}),io['to'](_0x332ce9)[_0x3d175f(0x126)](_0x3d175f(0x159),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x2f9ef4[_0x3d175f(0x220)]['id'],_0x3d175f(0x172))['catch'](_0x5de78a=>{telegramError(_0x5de78a);}),io['to'](_0x332ce9)[_0x3d175f(0x126)](_0x3d175f(0x159),{'access':{'allow':![],'reason':_0x3d175f(0x11b),'token':null}}));}),tgBot['removeListener'](_0x17311d(0x23a));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3c45a5=_0x5d8331;return dbConfig[_0x3c45a5(0x1ec)](_0x3c45a5(0x171))['sortBy'](_0x3c45a5(0x132))[_0x3c45a5(0x108)]({'status':_0x3c45a5(0xb0)})[_0x3c45a5(0x238)]()||[];}function getDisabledBots(){const _0x43ed6d=_0x5d8331;return dbConfig[_0x43ed6d(0x1ec)]('bots')[_0x43ed6d(0xba)](_0x43ed6d(0x132))[_0x43ed6d(0x108)]({'status':_0x43ed6d(0x196)})[_0x43ed6d(0x238)]()||[];}function getBotAttributes(_0x1f656b){const _0x11e63d=_0x5d8331;let _0x2cf572={};const _0x535218=configpath+_0x11e63d(0x1a5)+_0x1f656b+'-config.json',_0x3211f8=fs[_0x11e63d(0x10d)](_0x535218);if(_0x3211f8){const _0x39812d=fs[_0x11e63d(0x90)](_0x535218);try{const _0x1f8f2f=JSON[_0x11e63d(0x123)](_0x39812d),_0x2fa481=_0x1f8f2f?_0x1f8f2f['bot'][0x0][_0x11e63d(0x1e0)]:![];_0x2cf572[_0x11e63d(0xf0)]=_0x2fa481?_0x11e63d(0xa8):_0x11e63d(0x16f),_0x2cf572[_0x11e63d(0x8d)]=_0x1f8f2f?_0x1f8f2f[_0x11e63d(0x99)][0x0][_0x11e63d(0x8d)]:'Bot\x20'+_0x1f656b;}catch(_0x8c82d4){_0x2cf572[_0x11e63d(0xf0)]=_0x11e63d(0x16f),_0x2cf572[_0x11e63d(0x8d)]=_0x11e63d(0x226)+_0x1f656b;}}else _0x2cf572[_0x11e63d(0xf0)]=_0x11e63d(0x16f),_0x2cf572[_0x11e63d(0x8d)]=_0x11e63d(0x226)+_0x1f656b;return _0x2cf572;}function getBotsWithMode(){const _0x3e55ad=_0x5d8331,_0x141c64=dbConfig['get'](_0x3e55ad(0x171))[_0x3e55ad(0xba)](_0x3e55ad(0x132))[_0x3e55ad(0x238)]()||[];return _0x141c64[_0x3e55ad(0x254)](_0x51aedc=>{const _0x2e7983=_0x3e55ad;let _0x20ba22=getBotAttributes(_0x51aedc[_0x2e7983(0x132)]);_0x51aedc[_0x2e7983(0xf0)]=_0x20ba22[_0x2e7983(0xf0)];}),_0x141c64;}function getBotExchanges(){let _0x4e558a=[];const _0x345e85=dbConfig['get']('bots')['sortBy']('botID')['value']()||[];_0x345e85['forEach'](_0x783c1=>{const _0x163d2e=_0x20bb;if(_0x783c1[_0x163d2e(0x159)]=='enabled'){const _0x56e04e=configpath+'bot-'+_0x783c1[_0x163d2e(0x132)]+_0x163d2e(0xe2),_0x15fdca=fs['existsSync'](_0x56e04e);let _0x186688;if(_0x15fdca){const _0x4e4ff6=fs['readFileSync'](_0x56e04e);try{const _0x2df7f3=JSON[_0x163d2e(0x123)](_0x4e4ff6);_0x186688=_0x2df7f3?_0x2df7f3[_0x163d2e(0x99)][0x0]['exchange']:null;}catch(_0x413901){}}if(_0x186688)_0x4e558a[_0x163d2e(0x256)](_0x186688);}});const _0x3316fa=[...new Set(_0x4e558a)]['sort']();return _0x3316fa;}async function initUser(){const _0x115653=_0x5d8331;if(!settings[_0x115653(0x1f2)]){const _0x301f54=uuidRandom();mixpanel[_0x115653(0x186)](_0x301f54),updateSetting(_0x115653(0x1f2),_0x301f54);}}async function initSecure(){const _0xd3c580=_0x5d8331;let _0x23c04e=getSecure();if(!_0x23c04e['hasOwnProperty'](_0xd3c580(0x23d))){let _0x22d261=await generateKeys();_0x23c04e[_0xd3c580(0x1bd)]=_0x22d261[_0xd3c580(0x1bd)],_0x23c04e[_0xd3c580(0x19a)]=_0x22d261[_0xd3c580(0x19a)],_0x23c04e[_0xd3c580(0x23d)]=crypto[_0xd3c580(0x22b)](0x20)[_0xd3c580(0x1b8)](_0xd3c580(0x1f1));;storeSecure(_0x23c04e);}}function getSettings(){const _0x2093fc=_0x5d8331;return dbSettings['get'](_0x2093fc(0x250))['value']()||{};}function getSecure(){const _0x4c727f=_0x5d8331;return dbSecure[_0x4c727f(0x1ec)](_0x4c727f(0x1b9))[_0x4c727f(0x238)]()||{};}function getBlacklist(){const _0x2d9e7e=_0x5d8331;return dbSecure[_0x2d9e7e(0x1ec)](_0x2d9e7e(0x125))[_0x2d9e7e(0x238)]()||[];}function broadcastToBots(_0x3f25c9,_0x2fb51e){const _0x20437f=_0x5d8331;config[_0x20437f(0x254)](_0x1b3564=>{const _0x470422=_0x20437f;if(_0x1b3564[_0x470422(0x159)]=='enabled'&&_0x1b3564[_0x470422(0x228)]=='running'||_0x1b3564[_0x470422(0x159)]==_0x470422(0x20c)&&_0x1b3564[_0x470422(0x228)]==_0x470422(0x174)){if(pid[_0x1b3564['botID']])pid[_0x1b3564[_0x470422(0x132)]][_0x470422(0x235)]({[_0x3f25c9]:_0x2fb51e});}});}function storeSettings(_0x26b9b8,_0x5348d9=![]){const _0x3dd9ce=_0x5d8331;_0x26b9b8={...settings,..._0x26b9b8};if(_0x5348d9&&_0x26b9b8[_0x3dd9ce(0x1ab)]!=_0x3dd9ce(0x22f)&&_0x26b9b8['bbPassword']!=_0x3dd9ce(0xa4)&&_0x26b9b8[_0x3dd9ce(0x1ab)]!=''){const _0xb79593=crypt[_0x3dd9ce(0xd8)](secure[_0x3dd9ce(0x19a)],_0x26b9b8[_0x3dd9ce(0x1ab)])[_0x3dd9ce(0x1df)][_0x3dd9ce(0x173)]('@')[0x0],_0x2eee81=bcrypt[_0x3dd9ce(0x71)](_0xb79593,saltRounds);_0x26b9b8={..._0x26b9b8,'bbPassword':_0x2eee81};}if(_0x5348d9&&_0x26b9b8['telegramToken']!='************'&&_0x26b9b8['telegramToken']!='***'&&_0x26b9b8[_0x3dd9ce(0x151)]!=''){const _0x4f4dbb=crypt[_0x3dd9ce(0xd8)](secure[_0x3dd9ce(0x19a)],_0x26b9b8['telegramToken'])['message']['split']('@')[0x0];_0x26b9b8={..._0x26b9b8,'telegramToken':_0x4f4dbb};}const _0xc5b336=_0x26b9b8[_0x3dd9ce(0x151)]!=_0x3dd9ce(0x22f)&&_0x26b9b8[_0x3dd9ce(0x151)]!=settings['telegramToken']||_0x26b9b8['telegramUsername']!=settings[_0x3dd9ce(0x7f)],_0x2dc514=_0x26b9b8['telegramToken']==''||_0x26b9b8['telegramUsername']=='';if(_0xc5b336)_0x26b9b8[_0x3dd9ce(0xe9)]='all';for(const [_0x18b366,_0x221906]of Object['entries'](_0x26b9b8)){if(_0x18b366=='telegramToken'&&_0x221906==_0x3dd9ce(0x22f)){_0x26b9b8[_0x3dd9ce(0x151)]=settings[_0x3dd9ce(0x151)];continue;};if(_0x18b366==_0x3dd9ce(0x1ab)&&_0x221906=='************'){_0x26b9b8['bbPassword']=settings[_0x3dd9ce(0x1ab)];continue;};dbSettings['set'](_0x3dd9ce(0xea)+_0x18b366,_0x221906)['write']();}settings=_0x26b9b8,io['to'](_0x3dd9ce(0x142))[_0x3dd9ce(0x126)](_0x3dd9ce(0x250),cleanSettings()),broadcastToBots(_0x3dd9ce(0x119),settings['timeshift']),broadcastToBots(_0x3dd9ce(0x245),settings['onepagemode']);if(_0xc5b336&&!_0x2dc514)initTelegram();if(_0xc5b336&&_0x2dc514)disableTelegram();getAllClients()[_0x3dd9ce(0x254)](_0x2f7177=>{const _0xf5395=_0x3dd9ce;getSocket(_0x2f7177['id'])[_0xf5395(0x126)]('status',{'access':{'allow':![],'reason':_0xf5395(0x14d),'token':null}});});}function updateSetting(_0x1244c0,_0x1c4b47){const _0x2848a0=_0x5d8331;dbSettings[_0x2848a0(0xb4)]('settings.'+_0x1244c0,_0x1c4b47)[_0x2848a0(0xe0)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x2848a0(0x250),cleanSettings());}function storeSecure(_0x49919e){const _0x1c4799=_0x5d8331;dbSecure[_0x1c4799(0x1ec)](_0x1c4799(0x1b9))[_0x1c4799(0x256)](_0x49919e)['write'](),secure=_0x49919e;}function addBlacklist(_0x3f0309){const _0x20aa50=_0x5d8331;cleanBlacklist();let _0x5c46ed;devices[_0x3f0309][_0x20aa50(0x236)]?_0x5c46ed=Math[_0x20aa50(0x103)](devices[_0x3f0309][_0x20aa50(0x236)][_0x20aa50(0x11a)],loginExpiry):_0x5c46ed=loginExpiry,dbSecure['get'](_0x20aa50(0x125))['push']({'expiry':new Date()[_0x20aa50(0x12d)]()+_0x5c46ed*0x3c*0x3e8,'token':devices[_0x3f0309][_0x20aa50(0x255)][_0x20aa50(0x1bc)]})['write'](),blacklist=dbSecure[_0x20aa50(0x1ec)](_0x20aa50(0x125))[_0x20aa50(0x238)]();}function cleanBlacklist(){const _0x5d5817=_0x5d8331;let _0x43126d=dbSecure[_0x5d5817(0x1ec)](_0x5d5817(0x125))[_0x5d5817(0xc4)]()[_0x5d5817(0x238)](),_0x41825d=new Date()[_0x5d5817(0x12d)]();_0x43126d[_0x5d5817(0x254)](_0x3ffb44=>{const _0x16bf5d=_0x5d5817;_0x3ffb44[_0x16bf5d(0x11a)]<_0x41825d&&dbSecure[_0x16bf5d(0x1ec)](_0x16bf5d(0x125))['remove']({'expiry':_0x3ffb44[_0x16bf5d(0x11a)]})['write']();});}function initStates(){let _0x3ea1c7=getConfiguration();_0x3ea1c7['forEach'](_0x4215a1=>{const _0x2196df=_0x20bb;_0x4215a1[_0x2196df(0x228)]=_0x2196df(0x1a2);}),storeConfiguration(_0x3ea1c7);}function onKeys(){const _0xa1e0a3=new RSA();return new Promise(_0x2eab13=>{const _0x3e1f89=_0x20bb;_0xa1e0a3[_0x3e1f89(0x1b6)]()[_0x3e1f89(0x1cf)](_0x2633de=>{_0x2eab13(_0x2633de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5ed5f4=_0x5d8331;let _0x19b821=getSettings(),_0x11ea6=![];!_0x19b821['hasOwnProperty'](_0x5ed5f4(0xf1))&&(_0x19b821[_0x5ed5f4(0xf1)]=0x0,_0x11ea6=!![]);!_0x19b821[_0x5ed5f4(0x1db)](_0x5ed5f4(0x175))&&(_0x19b821[_0x5ed5f4(0x175)]=0x0,_0x11ea6=!![]);!_0x19b821[_0x5ed5f4(0x1db)]('latestversion')&&(_0x19b821[_0x5ed5f4(0x15e)]=_0x5ed5f4(0x1ff),_0x11ea6=!![]);!_0x19b821['hasOwnProperty'](_0x5ed5f4(0x245))&&(_0x19b821[_0x5ed5f4(0x245)]=![],_0x11ea6=!![]);if(_0x11ea6)storeSettings(_0x19b821);}function storeConfiguration(_0x207ad8){const _0x18d5f7=_0x5d8331;dbConfig[_0x18d5f7(0x1ec)](_0x18d5f7(0x171))['remove']()[_0x18d5f7(0xe0)](),_0x207ad8['forEach'](_0x263234=>{const _0x20aef6=_0x18d5f7;delete _0x263234[_0x20aef6(0xf0)];}),dbConfig[_0x18d5f7(0x1ec)](_0x18d5f7(0x171))[_0x18d5f7(0x256)](..._0x207ad8)[_0x18d5f7(0xe0)](),config=_0x207ad8;}function resetPassword(){const _0x228f76=_0x5d8331;tgBot&&settings['telegramChatId']&&(tgBot[_0x228f76(0x7c)](_0x228f76(0x23a)),tgBot['sendMessage'](settings[_0x228f76(0x14f)],_0x228f76(0xfd),{'parse_mode':_0x228f76(0x122),'reply_markup':{'inline_keyboard':[[{'text':_0x228f76(0x165),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x228f76(0x155)](_0x11fc83=>{telegramError(_0x11fc83);}),tgBot['on'](_0x228f76(0x23a),async _0x57b4c5=>{const _0x29c018=_0x228f76,_0xe1f745=_0x57b4c5[_0x29c018(0x1ca)],_0x46b26b=_0x57b4c5['message'];tgBot[_0x29c018(0x258)](_0x57b4c5['id'])['then'](async()=>{const _0x47d22e=_0x29c018;if(_0xe1f745!='no'){const _0x3664bd=0xf,_0xd0c019=_0x47d22e(0xeb),_0x33d06f=Array[_0x47d22e(0xc9)](crypto[_0x47d22e(0x198)](new Uint32Array(_0x3664bd)))['map'](_0x5f3331=>_0xd0c019[_0x5f3331%_0xd0c019[_0x47d22e(0x131)]])[_0x47d22e(0x9d)](''),_0x5319d7=bcrypt['hashSync'](_0x33d06f,saltRounds);storeSettings({'bbPassword':_0x5319d7}),await tgBot[_0x47d22e(0x1ba)](_0x46b26b[_0x47d22e(0x220)]['id'],_0x47d22e(0x160)+_0x33d06f,{'parse_mode':_0x47d22e(0x122)})[_0x47d22e(0x155)](_0x313b94=>{telegramError(_0x313b94);});}else await tgBot[_0x47d22e(0x1ba)](_0x46b26b[_0x47d22e(0x220)]['id'],_0x47d22e(0x239))[_0x47d22e(0x155)](_0x127757=>{telegramError(_0x127757);});}),tgBot['removeListener'](_0x29c018(0x23a));}));}async function confirmRestore(_0x4a7a38,_0x126935){const _0x36d38b=_0x5d8331;io['to'](_0x36d38b(0x142))['emit'](_0x36d38b(0x1f6),_0x36d38b(0x18f),_0x36d38b(0xf8)),tgBot&&settings[_0x36d38b(0x14f)]&&(tgBot[_0x36d38b(0x7c)](_0x36d38b(0x23a)),await tgBot[_0x36d38b(0x1ba)](settings[_0x36d38b(0x14f)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x36d38b(0x122),'reply_markup':{'inline_keyboard':[[{'text':_0x36d38b(0x165),'callback_data':_0x36d38b(0x165)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4e2c2a=>{telegramError(_0x4e2c2a);}),tgBot['on'](_0x36d38b(0x23a),async _0xe1303f=>{const _0x1ab232=_0x36d38b,_0x283455=_0xe1303f[_0x1ab232(0x1ca)],_0x2bceaf=_0xe1303f[_0x1ab232(0x1df)];tgBot[_0x1ab232(0x258)](_0xe1303f['id'])['then'](async()=>{const _0x535735=_0x1ab232;_0x283455==_0x535735(0x165)?(await tgBot[_0x535735(0x1ba)](_0x2bceaf[_0x535735(0x220)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x535735(0x122)})[_0x535735(0x155)](_0x36c872=>{telegramError(_0x36c872);}),unzipFile(_0x4a7a38,_0x126935)):(logger['debug'](_0x535735(0x8e)),await tgBot[_0x535735(0x1ba)](_0x2bceaf['chat']['id'],_0x535735(0x8e))[_0x535735(0x155)](_0x9a073a=>{telegramError(_0x9a073a);}));}),tgBot[_0x1ab232(0x7c)](_0x1ab232(0x23a));}));}function getServerTime(){const _0x485558=_0x5d8331,_0x10b36d=new Date();return _0x10b36d['getFullYear']()+'/'+(_0x10b36d[_0x485558(0x192)]()+0x1)[_0x485558(0x1b8)]()[_0x485558(0x221)](0x2,'0')+'/'+_0x10b36d[_0x485558(0xe6)]()[_0x485558(0x1b8)]()[_0x485558(0x221)](0x2,'0')+'\x20'+_0x10b36d['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x10b36d[_0x485558(0x227)]()['toString']()[_0x485558(0x221)](0x2,'0')+':'+_0x10b36d[_0x485558(0x74)]()[_0x485558(0x1b8)]()[_0x485558(0x221)](0x2,'0');}function getTimeStamp(){const _0x99b886=_0x5d8331,_0x32d7d3=shiftedTime();return _0x32d7d3[_0x99b886(0x83)]()+'/'+(_0x32d7d3['getMonth']()+0x1)[_0x99b886(0x1b8)]()[_0x99b886(0x221)](0x2,'0')+'/'+_0x32d7d3[_0x99b886(0xe6)]()[_0x99b886(0x1b8)]()[_0x99b886(0x221)](0x2,'0')+'\x20'+_0x32d7d3[_0x99b886(0x167)]()[_0x99b886(0x1b8)]()[_0x99b886(0x221)](0x2,'0')+':'+_0x32d7d3[_0x99b886(0x227)]()[_0x99b886(0x1b8)]()[_0x99b886(0x221)](0x2,'0')+':'+_0x32d7d3[_0x99b886(0x74)]()[_0x99b886(0x1b8)]()[_0x99b886(0x221)](0x2,'0');}function getCleanTimeStamp(){const _0x4c5ebf=_0x5d8331,_0x40b971=shiftedTime();return _0x40b971[_0x4c5ebf(0x83)]()+(_0x40b971[_0x4c5ebf(0x192)]()+0x1)[_0x4c5ebf(0x1b8)]()[_0x4c5ebf(0x221)](0x2,'0')+_0x40b971[_0x4c5ebf(0xe6)]()[_0x4c5ebf(0x1b8)]()[_0x4c5ebf(0x221)](0x2,'0')+'-'+_0x40b971[_0x4c5ebf(0x167)]()[_0x4c5ebf(0x1b8)]()[_0x4c5ebf(0x221)](0x2,'0')+_0x40b971[_0x4c5ebf(0x227)]()['toString']()['padStart'](0x2,'0')+_0x40b971[_0x4c5ebf(0x74)]()['toString']()[_0x4c5ebf(0x221)](0x2,'0');}function shiftedTime(){const _0x1d40ae=_0x5d8331,_0x4f4d94=new Date();let _0x173a7a=_0x4f4d94;if(settings[_0x1d40ae(0x119)]&&settings[_0x1d40ae(0x119)]!==0x0)_0x173a7a=fns[_0x1d40ae(0x158)](_0x4f4d94,{'hours':settings[_0x1d40ae(0x119)]});return _0x173a7a;}function startScheduler(){const _0x79294d=_0x5d8331,_0x208d45=new Date()['getUTCHours'](),_0xaa9a8d=shiftedTime()[_0x79294d(0x167)]();_0xaa9a8d==0x4&&backupConfigFiles();_0xaa9a8d==0x0&&rotateLogFiles();_0x208d45%0x6==0x0&&triggerAnalytics();_0x208d45%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x11d93c){const _0x2e4022=_0x5d8331;logger[_0x2e4022(0x1ce)]('Restore\x20backup\x20file\x20'+_0x11d93c);const _0x268e8f=getBotsWithMode();_0x268e8f[_0x2e4022(0x131)]>0x0?confirmRestore(configbackuppath,_0x11d93c):unzipFile(configbackuppath,_0x11d93c);}async function getBackupFiles(_0x43e04b=null){const _0x111a02=_0x5d8331;let _0x4a43d1=[],_0x1172dd=fs[_0x111a02(0x101)](configbackuppath,{'withFileTypes':!![]});_0x1172dd[_0x111a02(0xc2)]((_0x417e84,_0x3c325b)=>_0x417e84[_0x111a02(0x181)]<_0x3c325b['name']?0x1:_0x3c325b[_0x111a02(0x181)]<_0x417e84['name']?-0x1:0x0),_0x1172dd[_0x111a02(0x254)](_0x26f317=>{const _0x1d1aa0=_0x111a02;if(!_0x26f317[_0x1d1aa0(0x240)]()&&_0x26f317[_0x1d1aa0(0x181)]['startsWith'](_0x1d1aa0(0x208))&&_0x26f317[_0x1d1aa0(0x181)]['endsWith'](_0x1d1aa0(0x13a))){const _0x2dc30f=formatDate(fs[_0x1d1aa0(0x136)](configbackuppath+_0x26f317[_0x1d1aa0(0x181)])[_0x1d1aa0(0x9b)]);_0x4a43d1[_0x1d1aa0(0x256)]({'name':_0x26f317[_0x1d1aa0(0x181)],'mtime':_0x2dc30f});}});if(_0x43e04b)io['to'](_0x43e04b)['emit'](_0x111a02(0x218),_0x4a43d1);else return _0x4a43d1;}async function backupConfigFiles(){const _0x123106=_0x5d8331;await zipFiles(_0x123106(0x224));const _0x56a8c4=getCleanTimeStamp();fs[_0x123106(0x1e5)](zippath+_0x123106(0x130),configbackuppath+(_0x123106(0x208)+_0x56a8c4+_0x123106(0x13a)));let _0x5f5309=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x5f5309['sort']((_0x4d5c81,_0x3e2080)=>_0x4d5c81[_0x123106(0x181)]<_0x3e2080[_0x123106(0x181)]?0x1:_0x3e2080[_0x123106(0x181)]<_0x4d5c81[_0x123106(0x181)]?-0x1:0x0),_0x5f5309[_0x123106(0x131)]>maxBackups&&fs[_0x123106(0x207)](configbackuppath+_0x5f5309[maxBackups]['name']);}function rotateLogFiles(){const _0x1ad643=_0x5d8331,_0x369f24=fs[_0x1ad643(0x136)](logspath+_0x1ad643(0x17d)),_0x535e15=_0x369f24[_0x1ad643(0x189)]/0x400;if(_0x535e15>0x64){let _0x54dda1=fs[_0x1ad643(0x101)](logspath,{'withFileTypes':!![]});_0x54dda1[_0x1ad643(0xc2)]((_0x1ac1fc,_0x411a18)=>_0x1ac1fc[_0x1ad643(0x181)]<_0x411a18['name']?0x1:_0x411a18[_0x1ad643(0x181)]<_0x1ac1fc[_0x1ad643(0x181)]?-0x1:0x0),_0x54dda1['forEach'](_0x282d46=>{const _0x438233=_0x1ad643;if(_0x282d46[_0x438233(0x181)]=='output-002.log')fs[_0x438233(0x1e5)](logspath+_0x282d46[_0x438233(0x181)],logspath+_0x438233(0x85));if(_0x282d46[_0x438233(0x181)]==_0x438233(0x21e))fs['copyFileSync'](logspath+_0x282d46[_0x438233(0x181)],logspath+_0x438233(0x94));_0x282d46[_0x438233(0x181)]==_0x438233(0x17d)&&(fs[_0x438233(0x1e5)](logspath+_0x282d46['name'],logspath+_0x438233(0x21e)),fs[_0x438233(0x9c)](logspath+_0x282d46['name'],''));});}}async function zipFiles(_0x50d7bd){const _0x4765c3=_0x5d8331;let _0x572060;if(_0x50d7bd=='logs')_0x572060=logspath;if(_0x50d7bd==_0x4765c3(0xd2))_0x572060=configpath;if(_0x50d7bd==_0x4765c3(0x224))_0x572060=configpath;let _0x42e579=fs[_0x4765c3(0x101)](_0x572060,{'withFileTypes':!![]});const _0x14a2f6=new require(_0x4765c3(0x22c))();_0x42e579['forEach'](_0x2fb807=>{const _0x1ce34c=_0x4765c3;if(!_0x2fb807[_0x1ce34c(0x240)]()){let _0x411f16=fs[_0x1ce34c(0x90)](_0x572060+_0x2fb807[_0x1ce34c(0x181)]);if(_0x50d7bd==_0x1ce34c(0xd2)){const _0xeb769c=/^bot-[0-9]{3}-config.json$/,_0x41fe89=_0xeb769c[_0x1ce34c(0x8c)](_0x2fb807['name']);if(_0x41fe89){const _0x156148=JSON[_0x1ce34c(0x123)](_0x411f16);if(_0x156148[_0x1ce34c(0x99)][0x0]){_0x156148['bot'][0x0][_0x1ce34c(0x242)]=_0x1ce34c(0xa4),_0x156148['bot'][0x0]['apiSecret']=_0x1ce34c(0xa4);if(_0x156148['bot'][0x0][_0x1ce34c(0x1a7)])_0x156148[_0x1ce34c(0x99)][0x0][_0x1ce34c(0x1a7)]=_0x1ce34c(0xa4);}_0x411f16=JSON[_0x1ce34c(0x1da)](_0x156148,null,0x2);}if(_0x2fb807[_0x1ce34c(0x181)]=='bb-settings.json'){const _0x561574=JSON[_0x1ce34c(0x123)](_0x411f16);if(_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x1dc)])_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x1dc)]=![];if(_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x1ab)])_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x1ab)]=_0x1ce34c(0xa4);if(_0x561574['settings']['telegramToken'])_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x151)]=_0x1ce34c(0xa4);if(_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x14f)])_0x561574[_0x1ce34c(0x250)][_0x1ce34c(0x14f)]=null;_0x411f16=JSON[_0x1ce34c(0x1da)](_0x561574,null,0x2);}if(_0x2fb807['name']!=_0x1ce34c(0x156))_0x14a2f6['file'](_0x2fb807[_0x1ce34c(0x181)],_0x411f16);}else _0x14a2f6[_0x1ce34c(0x1d5)](_0x2fb807[_0x1ce34c(0x181)],_0x411f16);}});const _0x32e348=_0x14a2f6[_0x4765c3(0x197)]({'base64':![],'compression':_0x4765c3(0x1c9)});fs[_0x4765c3(0x9c)](zippath+(_0x50d7bd+_0x4765c3(0x13a)),_0x32e348,_0x4765c3(0x164));}async function unzipFile(_0x1e376a,_0x544af3){const _0x224c7d=_0x5d8331;fs[_0x224c7d(0x101)](configpath,{'withFileTypes':!![]})[_0x224c7d(0x254)](_0x3043d=>{const _0x4e7ce1=_0x224c7d;if(!_0x3043d['isDirectory']())fs[_0x4e7ce1(0x15f)](configpath+_0x3043d[_0x4e7ce1(0x181)]);});const _0x3787b7=fs[_0x224c7d(0x90)](_0x1e376a+_0x544af3,_0x224c7d(0x164)),_0x4e22b2=new require(_0x224c7d(0x22c))(_0x3787b7,{'base64':![],'checkCRC32':!![]});Object[_0x224c7d(0xf4)](_0x4e22b2[_0x224c7d(0x1c5)])[_0x224c7d(0x254)](_0x229f59=>{const _0x45e5fd=_0x224c7d,_0x3ee872=_0x4e22b2[_0x45e5fd(0x1c5)][_0x229f59];fs[_0x45e5fd(0x9c)](configpath+_0x3ee872['name'],_0x3ee872['_data']);}),fs[_0x224c7d(0x101)](temppath,{'withFileTypes':!![]})[_0x224c7d(0x254)](_0x4accff=>{const _0x213a0e=_0x224c7d;if(!_0x4accff['isDirectory']())fs[_0x213a0e(0x15f)](temppath+_0x4accff[_0x213a0e(0x181)]);}),logger[_0x224c7d(0x1ce)](_0x224c7d(0x169)),process[_0x224c7d(0x235)]({'restore':!![]},_0x544175=>{});}async function getPublicIp(){const _0x594b58=_0x5d8331;try{const _0x1f3a2a=await axios['get'](_0x594b58(0x20d));publicip=_0x1f3a2a[_0x594b58(0x1ca)]['ip'];}catch(_0x6e68b7){}}async function triggerAnalytics(){const _0x4afbe1=_0x5d8331;if(!publicip)await getPublicIp();const _0x1beb40=getBotsWithMode();let _0x45485e=0x0;_0x1beb40[_0x4afbe1(0x254)](_0x89f63b=>{if(_0x89f63b['status']==='enabled')_0x45485e++;});const _0x14de36=getBotExchanges();mixpanel[_0x4afbe1(0xc8)](_0x4afbe1(0x176),{'distinct_id':settings[_0x4afbe1(0x1f2)],'ip':publicip,'version':serverversion,'numbots':_0x1beb40[_0x4afbe1(0x131)],'numbotsenabled':_0x45485e,'exchanges':_0x14de36});}async function getMessages(){const _0x3cec64=_0x5d8331,_0x3d1f0f='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x1cc6e5=new GraphQLClient(_0x3d1f0f),_0x2bd7f9={'authorization':_0x3cec64(0x1c0)},_0x4c07d2=serverversion[_0x3cec64(0x173)]('.'),_0x376b31=_0x4c07d2[0x0]+'.'+_0x4c07d2[0x1],_0xdac7cb=Math[_0x3cec64(0xc0)](settings['lastmsgtelegram'],settings[_0x3cec64(0x175)]),_0x4d1c32={'last':parseInt(_0xdac7cb),'bbm':_0x376b31},_0x147b78=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x589645;try{_0x589645=await _0x1cc6e5[_0x3cec64(0x1d6)](_0x147b78,_0x4d1c32,_0x2bd7f9);}catch(_0x50cbee){}if(_0x589645&&_0x589645[_0x3cec64(0x9a)]){let _0x57219d=settings['lastmsgtelegram'];newMessages=[];for(const _0x1917bb of _0x589645[_0x3cec64(0x9a)]){newMessages['push'](_0x1917bb);if(_0x1917bb['bbvNew'])updateSetting(_0x3cec64(0x15e),_0x1917bb[_0x3cec64(0x11f)]);let _0x20efe6=_0x1917bb['bbvNew']?serverversion>=_0x1917bb[_0x3cec64(0x11f)]:![];if(!_0x20efe6&&_0x1917bb[_0x3cec64(0xd4)]>_0x57219d){if(_0x1917bb[_0x3cec64(0x20e)]===_0x3cec64(0x177)||serverversion[_0x3cec64(0xd0)](_0x1917bb[_0x3cec64(0x20e)])){let _0x29f3e2=''+_0x1917bb[_0x3cec64(0x248)]+'\x0a\x0a'+_0x1917bb[_0x3cec64(0x1df)];const _0x508a52=await sendTelegramMsg(toTelegramMarkdown(_0x29f3e2),_0x3cec64(0xf9));if(_0x508a52)_0x57219d=_0x1917bb['number'];}}}updateAvailable=isNewerVersion(settings[_0x3cec64(0x15e)],serverversion),updateSetting(_0x3cec64(0xf1),_0x57219d),emitMessages();}}function emitMessages(){const _0x433543=_0x5d8331,_0x5817fd=settings[_0x433543(0x175)];let _0x5a95a5=[];newMessages[_0x433543(0x254)](_0x276d81=>{const _0xa536c4=_0x433543;_0x276d81[_0xa536c4(0xd4)]>_0x5817fd&&_0x5a95a5['push'](_0x276d81);}),_0x5a95a5[_0x433543(0x131)]>0x0&&getAllClients()[_0x433543(0x254)](_0x3d9eec=>{const _0x573c31=_0x433543;getSocket(_0x3d9eec['id'])[_0x573c31(0x126)](_0x573c31(0x1df),_0x5a95a5);});}function confirmMessage(_0x4a9f4e){const _0x48c14e=_0x5d8331;updateSetting(_0x48c14e(0x175),Number(_0x4a9f4e));}function isNewerVersion(_0x51370e,_0x2d189f){const _0x1209d8=_0x5d8331,_0x29d27b=_0x2d189f[_0x1209d8(0x173)]('.'),_0x356bc0=_0x51370e[_0x1209d8(0x173)]('.');for(var _0x532fed=0x0;_0x532fed<_0x356bc0[_0x1209d8(0x131)];_0x532fed++){const _0x8bc204=~~_0x356bc0[_0x532fed],_0x18cf43=~~_0x29d27b[_0x532fed];if(_0x8bc204>_0x18cf43)return!![];if(_0x8bc204<_0x18cf43)return![];}return![];}function toTelegramMarkdown(_0x2715fc){const _0x42ce99=_0x5d8331,_0x1c7166=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x534f89=/\*{2}(.+?)\*{2}/gim;return _0x2715fc=_0x2715fc[_0x42ce99(0x1dd)](_0x1c7166,_0x42ce99(0x15b))[_0x42ce99(0x1dd)](_0x534f89,'*$1*'),_0x2715fc;}async function validateConfigFile(){const _0x21390c=_0x5d8331,_0x4f43bc=dbConfig[_0x21390c(0x1ec)]('bots')[_0x21390c(0xba)](_0x21390c(0x132))[_0x21390c(0x238)]()||[];if(_0x4f43bc[_0x21390c(0x131)]==0x0){let _0x5983d5=0x0,_0xa877b6=[];const _0x1ba9ba=/^bot-([0-9]{3})-config.json$/,_0x5e4040=fs['readdirSync'](configpath);_0x5e4040[_0x21390c(0x254)](_0x6c1d7e=>{const _0x160fcd=_0x21390c,_0x48084f=_0x1ba9ba[_0x160fcd(0x1d9)](_0x6c1d7e);if(_0x48084f){const _0xaad253=_0x48084f[0x1];let _0x486c78=getBotAttributes(_0xaad253);_0xa877b6['push']({'botID':_0xaad253,'botname':_0x486c78['botname'],'status':_0x160fcd(0x196),'live':_0x160fcd(0x1a2)}),_0x5983d5++;}}),_0x5983d5!=0x0&&(dbConfig[_0x21390c(0x1ec)](_0x21390c(0x171))[_0x21390c(0xc3)](_0xa877b6)['write'](),config=_0xa877b6,restoredConfigFile=_0x5983d5);}}async function restoreConfigNotify(_0x1834dc){const _0x57af59=_0x5d8331;let _0x346f2c;if(restoredConfigFile==0x1)_0x346f2c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x346f2c=_0x57af59(0xd7);if(_0x1834dc)io['to'](_0x57af59(0x142))[_0x57af59(0x126)]('notification',_0x346f2c);else{logger[_0x57af59(0x8a)](_0x57af59(0x11e)),logger[_0x57af59(0x8a)](_0x346f2c),logger[_0x57af59(0x8a)]('-----------------------------------------------------------------------------------'),logger[_0x57af59(0x8a)]('');if(tgBot&&settings[_0x57af59(0x14f)]&&settings['telegramEvents']!=_0x57af59(0x79))tgBot[_0x57af59(0x1ba)](settings['telegramChatId'],_0x57af59(0x1f8)+_0x346f2c)[_0x57af59(0x155)](_0x42aa6c=>{telegramError(_0x42aa6c);});}}function validateCredentials(_0x6eed64,_0x1a5f33){const _0x34807b=_0x5d8331;if(_0x6eed64[_0x34807b(0xcf)]==settings[_0x34807b(0x17f)]&&bcrypt[_0x34807b(0x147)](_0x6eed64[_0x34807b(0xf2)],settings[_0x34807b(0x1ab)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x5adb06=generateLoginToken(_0x1a5f33);return{'allow':!![],'reason':_0x34807b(0xca),'token':_0x5adb06};}}else return{'allow':![],'reason':_0x34807b(0xac),'token':null};}function refreshToken(_0xe4caab){const _0x38008e=_0x5d8331,_0x5aa0c9=generateLoginToken(_0xe4caab);return{'allow':!![],'reason':_0x38008e(0xca),'token':_0x5aa0c9};}function validateAccess(_0x40a8cd,_0x523e7f,_0x2bef60){const _0x486939=_0x5d8331,_0x2e104a=_0x2bef60?_0x2bef60:devices[_0x523e7f]['ip'];let _0x5df6e6;const _0x5420a6=_0x11ec45=>{const _0x274018=_0x20bb;if(settings['loginRequired']){if(settings[_0x274018(0x1a8)]){if(telegram2FaApproved(_0x523e7f)){const _0x508545=generateLoginToken(_0x523e7f);return{'allow':!![],'reason':_0x274018(0x1bb),'token':_0x508545};}else return{'allow':![],'reason':_0x274018(0x1ea),'token':null};}else return _0x5df6e6=validToken(_0x11ec45,_0x523e7f),_0x5df6e6[_0x274018(0x1db)](_0x274018(0xf8))?{'allow':!![],'reason':_0x274018(0x18c),'token':_0x11ec45}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x274018(0xe1),'token':null};};if(settings[_0x486939(0x24f)]){let _0x37125a=[...settings[_0x486939(0x1a0)],_0x486939(0x1e8),_0x486939(0xab),'127.0.0.1'];if(_0x37125a[_0x486939(0x19d)](_0x2e104a))return _0x5420a6(_0x40a8cd);else{_0x5df6e6=validToken(_0x40a8cd,_0x523e7f);if(_0x5df6e6[_0x486939(0x1db)](_0x486939(0xf8)))return _0x5420a6(_0x40a8cd);else{if(telegramIpApproved(_0x523e7f)){const _0x4c9240=generateToken(_0x523e7f);return _0x5df6e6=_0x5420a6(_0x40a8cd),_0x5df6e6['allow']?{'allow':!![],'reason':_0x486939(0x1c6),'token':_0x4c9240}:_0x5df6e6;}else return settings[_0x486939(0x1d3)]?{'allow':![],'reason':_0x486939(0x1ad),'token':null}:{'allow':![],'reason':_0x486939(0x10a),'token':null};}}}else return _0x5420a6(_0x40a8cd);}function timelyDecrypt(_0x282082,_0x496c7b=!![]){const _0x15c626=_0x5d8331;if(_0x282082)try{const _0x1be44b=crypt[_0x15c626(0xd8)](secure[_0x15c626(0x19a)],_0x282082)[_0x15c626(0x1df)],_0x5c55de=_0x1be44b[_0x15c626(0x173)]('@')[0x0],_0x5d54fa=_0x1be44b['split']('@')[0x1],_0x208c39=new Date()[_0x15c626(0x12d)]();if(_0x496c7b){if(_0x208c39-_0x5d54fa<maxSecretAge*0x3e8)return _0x5c55de;else return![];}else return _0x5c55de;}catch(_0x318d12){return![];}else return![];}const validToken=(_0x178a85,_0x3cd63b)=>{const _0x51b7b9=_0x5d8331,_0x1aeb1e=devices[_0x3cd63b]['ip'];if(!_0x178a85)return{'error':_0x51b7b9(0x135)};for(let _0x20d7de of blacklist){if(_0x20d7de[_0x51b7b9(0x1bc)]==_0x178a85)return{'error':_0x51b7b9(0x73)};}let _0x9f5511;try{_0x9f5511=jwt[_0x51b7b9(0xb2)](_0x178a85,secure[_0x51b7b9(0x23d)]+_0x3cd63b);}catch{return{'error':_0x51b7b9(0x1d1)};}if(!_0x9f5511[_0x51b7b9(0x1db)]('clientip')&&!_0x9f5511[_0x51b7b9(0x1db)](_0x51b7b9(0xcf))||!_0x9f5511[_0x51b7b9(0x1db)](_0x51b7b9(0x1a3)))return{'error':_0x51b7b9(0x1fc)};if(!_0x9f5511['hasOwnProperty'](_0x51b7b9(0xcf))&&_0x9f5511[_0x51b7b9(0x1db)]('clientip')){const {clientip:_0x1582c1}=_0x9f5511;return _0x1aeb1e==_0x1582c1?{'success':_0x51b7b9(0xcc)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x9f5511[_0x51b7b9(0x1db)](_0x51b7b9(0xcf))&&_0x9f5511[_0x51b7b9(0x1db)](_0x51b7b9(0x13c))){const {username:_0x227ed7,clientip:_0x3656ca}=_0x9f5511;return settings['bbUsername']==_0x227ed7&&_0x1aeb1e==_0x3656ca?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x51b7b9(0x210)};}}},generateLoginToken=_0x5ce7e5=>{const _0x9d6b76=_0x5d8331;if(_0x5ce7e5){const _0x3b7160=devices[_0x5ce7e5]['ip'];return jwt[_0x9d6b76(0x111)]({'username':settings[_0x9d6b76(0x17f)],'clientip':_0x3b7160},secure[_0x9d6b76(0x23d)]+_0x5ce7e5,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4269f6=>{const _0x5c92e2=_0x5d8331;if(_0x4269f6){const _0x28647e=devices[_0x4269f6]['ip'];return jwt['sign']({'clientip':_0x28647e},secure['secret']+_0x4269f6,{'expiresIn':devices[_0x4269f6][_0x5c92e2(0x236)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x146dd7=>{const _0x4ecde9=_0x5d8331;let _0x4141ae=![];return devices[_0x146dd7][_0x4ecde9(0x236)]&&devices[_0x146dd7][_0x4ecde9(0x236)][_0x4ecde9(0x11a)]!=_0x4ecde9(0x1b7)&&(_0x4141ae=devices[_0x146dd7][_0x4ecde9(0x236)]['clientip']==devices[_0x146dd7]['ip']&&new Date()[_0x4ecde9(0x12d)]()-devices[_0x146dd7]['telegramIpApproval'][_0x4ecde9(0x23f)]<devices[_0x146dd7][_0x4ecde9(0x236)][_0x4ecde9(0x11a)]*0x3c*0x3e8),_0x4141ae;},telegram2FaApproved=_0x2dfcf8=>{const _0x17bde3=_0x5d8331;let _0x144ae0=![];return devices[_0x2dfcf8][_0x17bde3(0x1fb)]&&devices[_0x2dfcf8]['telegram2FaApproval']['expiry']!=_0x17bde3(0x1b7)&&(_0x144ae0=devices[_0x2dfcf8][_0x17bde3(0x1fb)][_0x17bde3(0x13c)]==devices[_0x2dfcf8]['ip']&&new Date()[_0x17bde3(0x12d)]()-devices[_0x2dfcf8][_0x17bde3(0x1fb)][_0x17bde3(0x23f)]<devices[_0x2dfcf8][_0x17bde3(0x1fb)][_0x17bde3(0x11a)]*0x3c*0x3e8),_0x144ae0;},normalizeIP=_0x4a850b=>{const _0x256b29=_0x5d8331;let _0x5a473e=null,_0x2158a5=null;if(ipaddr[_0x256b29(0x209)](_0x4a850b)){const _0x1140eb=ipaddr[_0x256b29(0x123)](_0x4a850b);_0x1140eb[_0x256b29(0x17c)]()===_0x256b29(0x1b3)?(_0x1140eb['isIPv4MappedAddress']()&&(_0x5a473e=_0x1140eb[_0x256b29(0x8f)]()[_0x256b29(0x1b8)]()),_0x2158a5=_0x1140eb['toString']()):(_0x5a473e=_0x1140eb['toString'](),_0x2158a5=_0x1140eb[_0x256b29(0x16b)]()['toString']());}return{'show':_0x5a473e?_0x5a473e:_0x2158a5,'store':_0x2158a5};};function formatDate(_0x5104d2){const _0x555de5=_0x5d8331;return _0x5104d2[_0x555de5(0x83)]()+'/'+(_0x5104d2[_0x555de5(0x192)]()+0x1)[_0x555de5(0x1b8)]()['padStart'](0x2,'0')+'/'+_0x5104d2['getDate']()[_0x555de5(0x1b8)]()[_0x555de5(0x221)](0x2,'0')+'\x20'+_0x5104d2[_0x555de5(0x167)]()[_0x555de5(0x1b8)]()[_0x555de5(0x221)](0x2,'0')+':'+_0x5104d2[_0x555de5(0x227)]()['toString']()[_0x555de5(0x221)](0x2,'0')+':'+_0x5104d2[_0x555de5(0x74)]()[_0x555de5(0x1b8)]()[_0x555de5(0x221)](0x2,'0');}function sleep(_0x46dc51){return new Promise(_0x348f05=>setTimeout(_0x348f05,_0x46dc51));}