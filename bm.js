const _0x1b168a=_0xbf39;(function(_0x572e67,_0x104be0){const _0x4d2c2b=_0xbf39,_0x354a4e=_0x572e67();while(!![]){try{const _0xba9fa0=parseInt(_0x4d2c2b(0x33a))/0x1+parseInt(_0x4d2c2b(0x31f))/0x2+-parseInt(_0x4d2c2b(0x151))/0x3*(-parseInt(_0x4d2c2b(0x2aa))/0x4)+parseInt(_0x4d2c2b(0x26a))/0x5+parseInt(_0x4d2c2b(0x156))/0x6*(parseInt(_0x4d2c2b(0x288))/0x7)+parseInt(_0x4d2c2b(0x291))/0x8*(parseInt(_0x4d2c2b(0x2dd))/0x9)+-parseInt(_0x4d2c2b(0x1bc))/0xa*(parseInt(_0x4d2c2b(0x1cd))/0xb);if(_0xba9fa0===_0x104be0)break;else _0x354a4e['push'](_0x354a4e['shift']());}catch(_0x55f27c){_0x354a4e['push'](_0x354a4e['shift']());}}}(_0x4cec,0xb48f8));const _0x1be7f6=function(){let _0x5df7ed=!![];return function(_0x14b1e6,_0xd1b3e4){const _0x9304f6=_0x5df7ed?function(){const _0x569d55=_0xbf39;if(_0xd1b3e4){const _0x45c7cd=_0xd1b3e4[_0x569d55(0x27f)](_0x14b1e6,arguments);return _0xd1b3e4=null,_0x45c7cd;}}:function(){};return _0x5df7ed=![],_0x9304f6;};}(),_0x3b1bcb=_0x1be7f6(this,function(){const _0x45647f=_0xbf39;return _0x3b1bcb[_0x45647f(0x2b7)]()[_0x45647f(0x1e6)]('(((.+)+)+)+$')[_0x45647f(0x2b7)]()[_0x45647f(0x322)](_0x3b1bcb)['search'](_0x45647f(0x21c));});_0x3b1bcb();'use strict';process[_0x1b168a(0x1e5)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x1b168a(0x15b)),fs=require('fs'),fns=require(_0x1b168a(0x331)),low=require('lowdb'),FileSync=require(_0x1b168a(0x1da)),path=require(_0x1b168a(0x1c1)),crypto=require('crypto'),Crypt=require(_0x1b168a(0x28c))[_0x1b168a(0x2d7)],RSA=require(_0x1b168a(0x28c))['RSA'],bcrypt=require(_0x1b168a(0x33e)),jwt=require(_0x1b168a(0x216)),ipaddr=require('ipaddr.js'),argv=require(_0x1b168a(0x2b8))(process[_0x1b168a(0x241)][_0x1b168a(0x211)](0x2))[_0x1b168a(0x241)],uuidRandom=require(_0x1b168a(0x326)),{Telegraf,Markup}=require(_0x1b168a(0x30a)),Mixpanel=require(_0x1b168a(0x30d)),axios=require(_0x1b168a(0x2c7)),{GraphQLClient,gql}=require(_0x1b168a(0x2e2)),util=require(_0x1b168a(0x24b)),fileUpload=require(_0x1b168a(0x1f9)),{networkInterfaces}=require('os'),PORT=argv[_0x1b168a(0x1d8)]||_0x1b168a(0x24d),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x1b168a(0x14e)](_0x1b168a(0x25b)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x1b168a(0x283)](0x1));const HOST=argv[_0x1b168a(0x2bc)]||null,userID=argv[_0x1b168a(0x272)]||'',debugging=argv['d']||![],nodeversion=process[_0x1b168a(0x281)][_0x1b168a(0x2e8)];let bbpath=_0x1b168a(0x207),bbpath2='';const botfile=_0x1b168a(0x344),configfile=_0x1b168a(0x2a5),settingsfile='bb-settings.json',securefile=_0x1b168a(0x2af),environment=require('./'+bbpath2+_0x1b168a(0x1b5))[_0x1b168a(0x1d6)]||_0x1b168a(0x235),maxBackups=0xa;let validInstallation=!![];!fs[_0x1b168a(0x178)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1b168a(0x14a)),configpath=userID?bbpath+_0x1b168a(0x1ef)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x1b168a(0x258),zippath=userID?bbpath+_0x1b168a(0x1c3)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x1b168a(0x252)](logspath+_0x1b168a(0x245),{'flags':'a'}),temppath=userID?bbpath+_0x1b168a(0x2d0)+userID+'/':bbpath+_0x1b168a(0x2d0);!fs[_0x1b168a(0x178)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1b168a(0x178)](configbackuppath)&&fs[_0x1b168a(0x185)](configbackuppath);!fs[_0x1b168a(0x178)](logspath)&&fs[_0x1b168a(0x185)](logspath);!fs[_0x1b168a(0x178)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x1b168a(0x178)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1b168a(0x209)]({'bots':[]})[_0x1b168a(0x1cf)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1b168a(0x209)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1b168a(0x243),'onepagemode':![]}})[_0x1b168a(0x1cf)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1b168a(0x209)]({'secure':{},'blacklist':[]})[_0x1b168a(0x1cf)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x1b168a(0x2c2)](_0x1b168a(0x230),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1b168a(0x33b)]&&(settings[_0x1b168a(0x33b)]!=''&&settings[_0x1b168a(0x33b)]!=_0x1b168a(0x22a))&&settings[_0x1b168a(0x1aa)]&&settings[_0x1b168a(0x1aa)]!='')initTelegram();const parseColor=(_0x4ccf3d,_0x2d9ab4)=>{const _0x30e9f6=_0x1b168a,_0x1668ea=/#[A-Z]{3}#/g;if(typeof _0x4ccf3d==_0x30e9f6(0x20d)){!_0x2d9ab4?_0x4ccf3d=_0x4ccf3d['replace'](_0x1668ea,''):(_0x4ccf3d=_0x4ccf3d['replace'](/#BLU#/g,_0x30e9f6(0x180)),_0x4ccf3d=_0x4ccf3d[_0x30e9f6(0x33d)](/#RED#/g,_0x30e9f6(0x171)),_0x4ccf3d=_0x4ccf3d[_0x30e9f6(0x33d)](/#YEL#/g,_0x30e9f6(0x200)),_0x4ccf3d=_0x4ccf3d[_0x30e9f6(0x33d)](/#MAG#/g,_0x30e9f6(0x299)),_0x4ccf3d=_0x4ccf3d[_0x30e9f6(0x33d)](/#CYA#/g,_0x30e9f6(0x2c3)),_0x4ccf3d=_0x4ccf3d[_0x30e9f6(0x33d)](/#RES#/g,'\x1b[0m'));;}return _0x4ccf3d;},logger={'screen':_0x500c38=>{const _0x1d6541=_0x1b168a;console[_0x1d6541(0x14e)](parseColor(_0x500c38,!![]));},'simple':_0x45f214=>{const _0x5f3bc2=_0x1b168a;console[_0x5f3bc2(0x14e)](parseColor(_0x45f214,!![])),loggerfile[_0x5f3bc2(0x1cf)](util['format'](parseColor(_0x45f214,![]))+'\x0a');},'full':async _0x22741a=>{const _0x4702e9=_0x1b168a,_0x4c49ad=getTimeStamp()+_0x4702e9(0x2fd)+_0x22741a;console[_0x4702e9(0x14e)](parseColor(_0x4c49ad,!![])),loggerfile[_0x4702e9(0x1cf)](util[_0x4702e9(0x223)](parseColor(_0x4c49ad,![]))+'\x0a');if(tgBot&&settings[_0x4702e9(0x15f)]&&settings[_0x4702e9(0x1af)]!=_0x4702e9(0x296))await sendTelegram(settings[_0x4702e9(0x15f)],_0x4702e9(0x2d2)+parseColor(_0x22741a,![]));},'debug':async(_0xa12312,_0x17d73a='')=>{const _0x34790b=_0x1b168a,_0x1712fa=getTimeStamp()+_0x34790b(0x1fd)+_0xa12312;if(debugging)console[_0x34790b(0x14e)](parseColor(_0x1712fa,!![]));loggerfile['write'](util[_0x34790b(0x223)](parseColor(_0x1712fa,![]))+'\x0a');if(_0x17d73a){if(debugging)console['log'](_0x17d73a);loggerfile['write'](util[_0x34790b(0x223)](_0x17d73a)+'\x0a');}}};process['on'](_0x1b168a(0x1e1),function(_0x1fa98d){const _0x29ac6d=_0x1b168a;logger[_0x29ac6d(0x19d)](_0x1fa98d);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1b168a(0x1b5))[_0x1b168a(0x2b5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1b168a(0x2c6)),app=express(),http=require(_0x1b168a(0x254))[_0x1b168a(0x242)](app);app[_0x1b168a(0x14c)](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x27f402,_0xda21dd)=>{const _0x4b8010=_0x1b168a,_0x598223=_0x27f402['params'][_0x4b8010(0x24c)],_0x540e15=getClientsWithBotID(_0x4b8010(0x2dc)),_0x21b14a=_0x27f402[_0x4b8010(0x1be)][_0x4b8010(0x1dd)],_0x58aa20=timelyDecrypt(_0x21b14a,![]),_0x3f8b35=_0x540e15[_0x4b8010(0x1c7)](_0x53eefc=>_0x53eefc['uuid']==_0x58aa20);if(_0x3f8b35){const _0x5dd13b=normalizeIP(_0x27f402['socket'][_0x4b8010(0x2a0)])[_0x4b8010(0x2ef)],_0x3f2a8f=_0x27f402[_0x4b8010(0x1be)][_0x4b8010(0x31c)];if(validateAccess(_0x3f2a8f,_0x58aa20,_0x5dd13b)['allow'])_0x598223=='backup'&&await backupConfigFiles(),await zipFiles(_0x598223),_0xda21dd[_0x4b8010(0x1d3)](zippath+(_0x598223+_0x4b8010(0x320)),_0x308951=>{const _0x2582e9=_0x4b8010;_0x308951&&(logger[_0x2582e9(0x21e)](_0x2582e9(0x298)+_0x598223),logger[_0x2582e9(0x19d)](_0x308951));});else logger[_0x4b8010(0x21e)](_0x4b8010(0x165)+_0x598223+'\x20(1)');}else logger[_0x4b8010(0x21e)](_0x4b8010(0x165)+_0x598223+'\x20(2)');}),app[_0x1b168a(0x2cd)](_0x1b168a(0x23f),async(_0x5a5e7a,_0x23a72b)=>{const _0x4887d8=_0x1b168a,_0x11ea8d=getClientsWithBotID(_0x4887d8(0x2dc)),_0x2566e1=_0x5a5e7a[_0x4887d8(0x1be)][_0x4887d8(0x1dd)],_0x5a929=timelyDecrypt(_0x2566e1,![]),_0x47e777=_0x11ea8d['find'](_0x414521=>_0x414521[_0x4887d8(0x1dd)]==_0x5a929);logger[_0x4887d8(0x29a)]('Backup\x20file\x20uploaded');if(_0x47e777){const _0x346b5c=normalizeIP(_0x5a5e7a[_0x4887d8(0x173)][_0x4887d8(0x2a0)])[_0x4887d8(0x2ef)],_0x2c670a=_0x5a5e7a[_0x4887d8(0x1be)]['tkn'];if(validateAccess(_0x2c670a,_0x5a929,_0x346b5c)['allow']){if(_0x5a5e7a['files']){const _0x1b18ca=_0x5a5e7a[_0x4887d8(0x30e)][_0x4887d8(0x1bf)];await _0x1b18ca['mv'](temppath+_0x1b18ca[_0x4887d8(0x244)]),_0x23a72b['send']({'status':!![],'message':_0x4887d8(0x26c)});const _0x216bf1=getBotsWithMode();_0x216bf1['length']>0x0?confirmRestore(temppath,_0x1b18ca[_0x4887d8(0x244)]):unzipFile(temppath,_0x1b18ca[_0x4887d8(0x244)]);}}else logger[_0x4887d8(0x21e)](_0x4887d8(0x1f1));}else logger[_0x4887d8(0x21e)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x1b168a(0x14c)](express[_0x1b168a(0x340)](path[_0x1b168a(0x2f6)](__dirname,bbpath2,'build2'))),app[_0x1b168a(0x14c)](express[_0x1b168a(0x340)](path[_0x1b168a(0x2f6)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x147635,_0x23bfd3){const _0xeea8db=_0x1b168a;_0x23bfd3[_0xeea8db(0x308)](path[_0xeea8db(0x2f6)](__dirname,bbpath2,_0xeea8db(0x2f9),_0xeea8db(0x16c)));}),app['get'](_0x1b168a(0x229),function(_0x52c9ba,_0x20b222){const _0x2c13f6=_0x1b168a;_0x20b222[_0x2c13f6(0x308)](path[_0x2c13f6(0x2f6)](__dirname,bbpath2,_0x2c13f6(0x1d4),_0x2c13f6(0x16c)));}),app[_0x1b168a(0x237)]('/:bot/portfolio',(_0x113671,_0x5b2435)=>{const _0x39b709=_0x1b168a;_0x5b2435[_0x39b709(0x308)](path[_0x39b709(0x2f6)](__dirname,bbpath2,_0x39b709(0x1d4),_0x39b709(0x16c)));}),app[_0x1b168a(0x237)](_0x1b168a(0x2ec),(_0x46b269,_0x22b08a)=>{const _0x1a90a8=_0x1b168a;_0x22b08a[_0x1a90a8(0x308)](path['join'](__dirname,bbpath2,'build',_0x1a90a8(0x16c)));}),app[_0x1b168a(0x237)](_0x1b168a(0x24e),(_0x2d8c62,_0xcb2961)=>{const _0x5dc0c1=_0x1b168a;_0xcb2961[_0x5dc0c1(0x308)](path[_0x5dc0c1(0x2f6)](__dirname,bbpath2,_0x5dc0c1(0x1d4),_0x5dc0c1(0x16c)));}),app[_0x1b168a(0x237)]('/:bot/history',(_0x19fe1d,_0x43d1c0)=>{const _0x31563e=_0x1b168a;_0x43d1c0[_0x31563e(0x308)](path['join'](__dirname,bbpath2,'build',_0x31563e(0x16c)));}),app[_0x1b168a(0x237)]('/:bot/configuration',(_0x121160,_0x5c35b0)=>{const _0x3fcea8=_0x1b168a;_0x5c35b0[_0x3fcea8(0x308)](path[_0x3fcea8(0x2f6)](__dirname,bbpath2,_0x3fcea8(0x1d4),_0x3fcea8(0x16c)));}),app[_0x1b168a(0x237)](_0x1b168a(0x148),(_0x24cc00,_0x71af3f)=>{const _0x14a571=_0x1b168a;_0x71af3f['sendFile'](path[_0x14a571(0x2f6)](__dirname,bbpath2,_0x14a571(0x1d4),_0x14a571(0x16c)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x1b168a(0x1ca))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5be5ab=_0x1b168a;let _0x1b0e10='[ip-address]';const _0xd55129=networkInterfaces(),_0x44d959={};for(const _0x49c6b4 of Object['keys'](_0xd55129)){for(const _0x14706e of _0xd55129[_0x49c6b4]){if((_0x14706e[_0x5be5ab(0x327)]==_0x5be5ab(0x218)||_0x14706e[_0x5be5ab(0x327)]==0x4)&&!_0x14706e[_0x5be5ab(0x217)]){const _0x3af226=ipaddr['parse'](_0x14706e[_0x5be5ab(0x179)])[_0x5be5ab(0x15a)]();_0x3af226!='private'&&(!_0x44d959[_0x49c6b4]&&(_0x44d959[_0x49c6b4]=[]),_0x44d959[_0x49c6b4]['push'](_0x14706e[_0x5be5ab(0x179)]),_0x1b0e10=_0x14706e[_0x5be5ab(0x179)]);}}}return{'serverip':_0x1b0e10,'netinterfaces':_0x44d959};}async function startServer(){const _0xbcf4c2=_0x1b168a,{serverip:_0xd4a86c,netinterfaces:_0x4f3526}=getServerIP();logger[_0xbcf4c2(0x19d)](''),logger[_0xbcf4c2(0x19d)](_0xbcf4c2(0x2d5)),await logger[_0xbcf4c2(0x21e)](_0xbcf4c2(0x2ca)+serverversion+_0xbcf4c2(0x1d1)+(environment==_0xbcf4c2(0x2db)?_0xbcf4c2(0x1c6):'')+'\x0a'+(_0xbcf4c2(0x2f2)+PORT+_0xbcf4c2(0x305))+(_0xbcf4c2(0x301)+_0xd4a86c+':'+PORT+_0xbcf4c2(0x307))),logger[_0xbcf4c2(0x19d)]('-----------------------------------------------------------------------------------');if(config[_0xbcf4c2(0x167)]!=0x0)for(const _0xb8e467 of config){const _0x211519=_0xb8e467[_0xbcf4c2(0x189)]=='auto'?'a':'m';if(_0xb8e467[_0xbcf4c2(0x1f8)]=='enabled'||_0xb8e467[_0xbcf4c2(0x1f8)]=='new')await logger[_0xbcf4c2(0x21e)](_0xbcf4c2(0x198)+_0x211519+')\x20|\x20Bot\x20'+_0xb8e467[_0xbcf4c2(0x33f)]+_0xbcf4c2(0x22e)+_0xb8e467[_0xbcf4c2(0x232)]),startBot([_0xb8e467['botID'],userID],{'cwd':bbpath},function(_0x125b6f){const _0x1fed4d=_0xbcf4c2;if(_0x125b6f)logger[_0x1fed4d(0x21e)](_0x125b6f);});else(_0xb8e467['status']==_0xbcf4c2(0x339)||_0xb8e467[_0xbcf4c2(0x1f8)]==_0xbcf4c2(0x2a6))&&await logger[_0xbcf4c2(0x21e)](_0xbcf4c2(0x2f3)+_0x211519+_0xbcf4c2(0x1a0)+_0xb8e467['botID']+_0xbcf4c2(0x22e)+_0xb8e467[_0xbcf4c2(0x232)]);}else!newBot&&logger['simple'](_0xbcf4c2(0x181));if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger['simple'](''),await logger[_0xbcf4c2(0x29a)]('Node.js\x20v'+nodeversion),await logger[_0xbcf4c2(0x29a)](_0xbcf4c2(0x317),_0x4f3526);}function startSocket(){const _0x2ff79b=_0x1b168a;io['on'](_0x2ff79b(0x1c9),_0x3d6a36=>{const _0x411e58=_0x2ff79b;let _0x43ab67,_0x15b7ba,_0x38189d,_0x3b65d6,_0x22d4f7;const _0x208a8c=_0x3d6a36[_0x411e58(0x1f0)][_0x411e58(0x1be)][_0x411e58(0x2f4)];_0x15b7ba=_0x208a8c[_0x411e58(0x1de)](/bot[0-9]{3}/);if(_0x15b7ba)_0x38189d=_0x15b7ba[0x0][_0x411e58(0x1de)](/[0-9]{3}/);if(_0x38189d)_0x43ab67=_0x38189d[0x0];else _0x43ab67=_0x411e58(0x2dc);const _0x276e6c=_0x3d6a36[_0x411e58(0x1f0)][_0x411e58(0x1c5)][_0x411e58(0x32f)];if(!_0x276e6c)_0x3d6a36[_0x411e58(0x2d4)](_0x411e58(0x1f8),{'publicKey':secure['publicKey']});else{_0x3b65d6=timelyDecrypt(_0x276e6c,![]);if(!_0x3b65d6)_0x3d6a36['emit'](_0x411e58(0x1f8),{'publicKey':secure['publicKey']});else{_0x22d4f7=normalizeIP(_0x3d6a36[_0x411e58(0x1b7)][_0x411e58(0x2a0)])[_0x411e58(0x2ef)];if(!devices[_0x3b65d6])devices[_0x3b65d6]={'uuid':_0x3b65d6,'access':{'token':null}};devices[_0x3b65d6]['ip']=_0x22d4f7;const _0x18e9b2=addClient(_0x3d6a36['id'],_0x3b65d6,_0x43ab67);setAccess(_0x18e9b2),emitMessages(),_0x3d6a36['on'](_0x411e58(0x29f),_0xfea18d=>{const _0x4f607f=_0x411e58,_0x3774ca=timelyDecrypt(_0xfea18d[_0x4f607f(0x29e)]);if(_0x3774ca){_0xfea18d={'username':_0xfea18d[_0x4f607f(0x25d)],'password':_0x3774ca},devices[_0x3b65d6][_0x4f607f(0x2e6)]=validateCredentials(_0xfea18d,_0x3b65d6);if(devices[_0x3b65d6][_0x4f607f(0x2e6)][_0x4f607f(0x292)]==![]&&devices[_0x3b65d6][_0x4f607f(0x2e6)][_0x4f607f(0x226)]==_0x4f607f(0x310))_0x3d6a36[_0x4f607f(0x2d4)](_0x4f607f(0x1f8),{'access':devices[_0x3b65d6]['access']}),loginAccess2FA(_0x3b65d6,_0x22d4f7);else{if(devices[_0x3b65d6][_0x4f607f(0x2e6)][_0x4f607f(0x292)]==![]&&devices[_0x3b65d6][_0x4f607f(0x2e6)][_0x4f607f(0x226)]==_0x4f607f(0x202))_0x3d6a36[_0x4f607f(0x2d4)](_0x4f607f(0x1f8),{'access':devices[_0x3b65d6]['access']});else devices[_0x3b65d6][_0x4f607f(0x2e6)]['allow']&&devices[_0x3b65d6][_0x4f607f(0x2e6)]['reason']==_0x4f607f(0x17d)&&(getClientsWithUuid(_0x3b65d6)[_0x4f607f(0x239)](_0x92f5e5=>{setAccess(_0x92f5e5);}),logger[_0x4f607f(0x29a)](_0x4f607f(0x312)+_0x3b65d6[_0x4f607f(0x211)](-0x8)),setTokenRefresh(_0x3b65d6),setSessionTimeout(_0x4f607f(0x29f),_0x3b65d6));}}else logger[_0x4f607f(0x21e)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x3d6a36['on'](_0x411e58(0x336),()=>{resetPassword();}),_0x3d6a36['on'](_0x411e58(0x23c),_0x186d80=>{removeClient(_0x3d6a36['id']);}),_0x43ab67==_0x411e58(0x2dc)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x317a57){const _0x2e59c9=_0x1b168a;if(_0x317a57!=_0x2e59c9(0x2dc)&&config[_0x2e59c9(0x203)]!=''){if(pid[_0x317a57])pid[_0x317a57][_0x2e59c9(0x2b3)]({'function':_0x2e59c9(0x271),'args':null});}_0x317a57!=_0x2e59c9(0x2dc)&&broadcastToBots(_0x2e59c9(0x268),JSON[_0x2e59c9(0x1b9)](config));}function reloadBotManager(){const _0x5f4817=_0x1b168a;getClientsWithBotID(_0x5f4817(0x2dc))[_0x5f4817(0x239)](_0x3958b7=>{const _0x17fc70=_0x5f4817;getSocket(_0x3958b7['id'])['emit'](_0x17fc70(0x1f8),{'access':{'allow':![],'reason':_0x17fc70(0x1b8),'token':null}});});}function getSocket(_0x336e04){const _0x29e5f2=_0x1b168a;return io[_0x29e5f2(0x16d)][_0x29e5f2(0x16d)][_0x29e5f2(0x237)](_0x336e04);}function setAccess(_0x4e23d6){const _0x50c6a0=_0x1b168a,_0x454e5b=getSocket(_0x4e23d6['id']),_0x17b85c=_0x4e23d6['uuid'],_0x392a66=_0x4e23d6['bot'];devices[_0x17b85c]['access']=validateAccess(devices[_0x17b85c][_0x50c6a0(0x2e6)]['token'],_0x17b85c),logger[_0x50c6a0(0x29a)](_0x50c6a0(0x315)+devices[_0x17b85c][_0x50c6a0(0x2e6)]['reason']+'\x20|\x20client:\x20...'+_0x4e23d6['id'][_0x50c6a0(0x211)](-0x8)+_0x50c6a0(0x319)+_0x17b85c[_0x50c6a0(0x211)](-0x8)),_0x454e5b[_0x50c6a0(0x2f6)](_0x17b85c);if(devices[_0x17b85c][_0x50c6a0(0x2e6)][_0x50c6a0(0x292)]){_0x454e5b[_0x50c6a0(0x2f6)](_0x392a66);if(_0x392a66==_0x50c6a0(0x2dc))initializeSocketBotManager(_0x454e5b);else initializeSocketBot(_0x454e5b);initClient(_0x392a66);}devices[_0x17b85c][_0x50c6a0(0x2e6)]['token']&&devices[_0x17b85c]['access'][_0x50c6a0(0x226)]==_0x50c6a0(0x206)&&setSessionTimeout('2FA',_0x17b85c),devices[_0x17b85c][_0x50c6a0(0x2e6)][_0x50c6a0(0x2ba)]&&devices[_0x17b85c][_0x50c6a0(0x2e6)][_0x50c6a0(0x226)]==_0x50c6a0(0x14d)&&setSessionTimeout(_0x50c6a0(0x29f),_0x17b85c),_0x454e5b['emit']('status',{'status':_0x4e23d6['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x17b85c]['access'],'externalip':devices[_0x17b85c]['ip'],'publicKey':secure[_0x50c6a0(0x22d)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x17b85c][_0x50c6a0(0x2e6)][_0x50c6a0(0x292)]==![]&&devices[_0x17b85c]['access'][_0x50c6a0(0x226)]==_0x50c6a0(0x1ec)&&temporaryAccess2FA(_0x17b85c,devices[_0x17b85c]['ip']);}function setSessionTimeout(_0x1719dd,_0x3d7734){const _0x5917d4=_0x1b168a;let _0x1e9d3c;if(_0x1719dd==_0x5917d4(0x29f))_0x1e9d3c=loginExpiry*0x3c*0x3e8;else _0x1e9d3c=devices[_0x3d7734]['telegramIpApproval'][_0x5917d4(0x201)]*0x3c*0x3e8-(new Date()[_0x5917d4(0x193)]()-devices[_0x3d7734]['telegramIpApproval']['timestamp']);if(devices[_0x3d7734][_0x5917d4(0x1ed)])clearTimeout(devices[_0x3d7734][_0x5917d4(0x1ed)]);devices[_0x3d7734]['pidExpireLogin']=setTimeout(()=>{const _0x4a5742=_0x5917d4;if(devices[_0x3d7734][_0x4a5742(0x1b3)])clearTimeout(devices[_0x3d7734]['pidRefreshToken']);removeSocketListeners(_0x3d7734),addBlacklist(_0x3d7734),devices[_0x3d7734][_0x4a5742(0x21a)]=null,devices[_0x3d7734]['telegram2FaApproval']=null,devices[_0x3d7734]['access'][_0x4a5742(0x2ba)]=null,logger[_0x4a5742(0x29a)](_0x4a5742(0x154)+_0x3d7734['slice'](-0x8)),devices[_0x3d7734][_0x4a5742(0x2e6)]=validateAccess(devices[_0x3d7734][_0x4a5742(0x2e6)][_0x4a5742(0x2ba)],_0x3d7734),!(devices[_0x3d7734][_0x4a5742(0x2e6)][_0x4a5742(0x292)]&&devices[_0x3d7734][_0x4a5742(0x2e6)]['reason']==_0x4a5742(0x294))&&(_0x1719dd=='login'?io['to'](_0x3d7734)['emit'](_0x4a5742(0x1f8),{'access':{'allow':![],'reason':_0x4a5742(0x233),'token':null}}):io['to'](_0x3d7734)['emit'](_0x4a5742(0x1f8),{'access':{'allow':![],'reason':_0x4a5742(0x2b9),'token':null}})),devices[_0x3d7734][_0x4a5742(0x2e6)][_0x4a5742(0x2ba)]=null;},_0x1e9d3c);}function setTokenRefresh(_0x4cffd9){const _0xcddae9=_0x1b168a;if(devices[_0x4cffd9][_0xcddae9(0x1b3)])clearTimeout(devices[_0x4cffd9][_0xcddae9(0x1b3)]);devices[_0x4cffd9][_0xcddae9(0x1b3)]=setTimeout(()=>{const _0x2ca80c=_0xcddae9;getClientsWithUuid(_0x4cffd9)[_0x2ca80c(0x167)]!=0x0?(devices[_0x4cffd9]['access']=refreshToken(_0x4cffd9),io['to'](_0x4cffd9)['emit'](_0x2ca80c(0x1f8),{'status':_0x2ca80c(0x311),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4cffd9]['access'],'externalip':devices[_0x4cffd9]['ip'],'publicKey':secure[_0x2ca80c(0x22d)],'validInstallation':validInstallation}),setTokenRefresh(_0x4cffd9)):clearTimeout(devices[_0x4cffd9][_0x2ca80c(0x1b3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4f8151){const _0x398372=_0x1b168a,_0x1b78fc=getClient(_0x4f8151['id'])[_0x398372(0x1dd)];_0x4f8151[_0x398372(0x2d4)](_0x398372(0x268),config),_0x4f8151[_0x398372(0x2d4)](_0x398372(0x278),cleanSettings()),_0x4f8151['on'](_0x398372(0x276),_0x6cfe53=>{const _0x40a467=_0x398372;if(validateAccess(_0x6cfe53,_0x1b78fc)[_0x40a467(0x292)])addBot();else logger[_0x40a467(0x21e)](_0x40a467(0x28f));}),_0x4f8151['on'](_0x398372(0x1f6),(_0x18678d,_0xe90259)=>{const _0x3443a3=_0x398372;if(validateAccess(_0xe90259,_0x1b78fc)['allow'])toggleBot(_0x18678d[_0x3443a3(0x33f)],_0x18678d['status'],_0x18678d[_0x3443a3(0x197)]);else logger[_0x3443a3(0x21e)](_0x3443a3(0x22f));}),_0x4f8151['on'](_0x398372(0x2e9),(_0x8f1602,_0x484cd0)=>{const _0x36ea77=_0x398372;if(validateAccess(_0x484cd0,_0x1b78fc)[_0x36ea77(0x292)])toggleBotMode(_0x8f1602);else logger[_0x36ea77(0x21e)](_0x36ea77(0x22f));}),_0x4f8151['on'](_0x398372(0x2ab),(_0x25b515,_0x48972c)=>{const _0x33e4e8=_0x398372;if(validateAccess(_0x48972c,_0x1b78fc)['allow'])deleteBot(_0x25b515);else logger['full'](_0x33e4e8(0x1fa));}),_0x4f8151['on'](_0x398372(0x17a),(_0x5a39cf,_0x235e8c)=>{const _0x136bb0=_0x398372;if(validateAccess(_0x235e8c,_0x1b78fc)['allow'])storeSettings(_0x5a39cf,!![]);else logger[_0x136bb0(0x21e)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4f8151['on'](_0x398372(0x20e),_0x3fe659=>{const _0x10a1ad=_0x398372;if(validateAccess(_0x3fe659,_0x1b78fc)[_0x10a1ad(0x292)])updateBB(_0x10a1ad(0x1f5));else logger[_0x10a1ad(0x21e)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4f8151['on']('reinstall-bb',_0x2258b6=>{const _0x204bff=_0x398372;if(validateAccess(_0x2258b6,_0x1b78fc)[_0x204bff(0x292)])updateBB(_0x204bff(0x1ea));else logger[_0x204bff(0x21e)](_0x204bff(0x14b));}),_0x4f8151['on'](_0x398372(0x27e),_0x14477d=>{const _0x4007ad=_0x398372;if(validateAccess(_0x14477d,_0x1b78fc)[_0x4007ad(0x292)]){const _0x59bf47=getClient(_0x4f8151['id']);if(_0x59bf47)getBackupFiles(_0x59bf47[_0x4007ad(0x1dd)]);else logger['full'](_0x4007ad(0x2de));}else logger[_0x4007ad(0x21e)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x4f8151['on']('restore-backup-file',(_0x309a07,_0x2b27bf)=>{const _0xc2c863=_0x398372;if(validateAccess(_0x2b27bf,_0x1b78fc)[_0xc2c863(0x292)])restoreBackupFile(_0x309a07);else logger['full'](_0xc2c863(0x2c9));}),_0x4f8151['on']('get-messages',_0x24e55d=>{const _0x135e83=_0x398372;if(validateAccess(_0x24e55d,_0x1b78fc)['allow'])getMessages();else logger[_0x135e83(0x21e)](_0x135e83(0x20c));}),_0x4f8151['on'](_0x398372(0x1b4),(_0x506bd9,_0x3d5dad)=>{const _0x177360=_0x398372;if(validateAccess(_0x3d5dad,_0x1b78fc)['allow'])confirmMessage(_0x506bd9);else logger[_0x177360(0x21e)](_0x177360(0x23a));}),_0x4f8151['on']('logout',_0xb5d078=>{const _0x265aa3=_0x398372;if(validateAccess(_0xb5d078,_0x1b78fc)['allow']){if(devices[_0x1b78fc][_0x265aa3(0x1b3)])clearTimeout(devices[_0x1b78fc]['pidRefreshToken']);if(devices[_0x1b78fc][_0x265aa3(0x1ed)])clearTimeout(devices[_0x1b78fc][_0x265aa3(0x1ed)]);removeSocketListeners(getClient(_0x4f8151['id'])[_0x265aa3(0x1dd)]),addBlacklist(_0x1b78fc),devices[_0x1b78fc][_0x265aa3(0x21a)]=null,devices[_0x1b78fc][_0x265aa3(0x1ad)]=null,devices[_0x1b78fc][_0x265aa3(0x2e6)][_0x265aa3(0x2ba)]=null,logger[_0x265aa3(0x29a)]('Logged\x20out\x20user\x20...'+_0x1b78fc['slice'](-0x8)),io['to'](getClient(_0x4f8151['id'])['uuid'])[_0x265aa3(0x2d4)](_0x265aa3(0x1f8),{'access':{'allow':![],'reason':_0x265aa3(0x17b),'token':null}});}else logger[_0x265aa3(0x21e)](_0x265aa3(0x313));});}function initializeSocketBot(_0x395e97){const _0x30ddb5=_0x1b168a,_0x5d1d5f=getClient(_0x395e97['id'])['bot'],_0x30c7d0=getClient(_0x395e97['id'])[_0x30ddb5(0x1dd)];_0x395e97['on'](_0x30ddb5(0x1d9),(_0x102df8,_0x4a5aba)=>{const _0x4c506b=_0x30ddb5;if(validateAccess(_0x4a5aba,_0x30c7d0)[_0x4c506b(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x4c506b(0x2b3)]({'function':_0x4c506b(0x2c1),'args':_0x102df8});}else logger[_0x4c506b(0x21e)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x395e97['on'](_0x30ddb5(0x191),(_0x374d47,_0x33f7c5)=>{const _0xb6ade2=_0x30ddb5;if(validateAccess(_0x33f7c5,_0x30c7d0)[_0xb6ade2(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0xb6ade2(0x2b3)]({'function':'deleteHistoryAlerts','args':_0x374d47});}else logger[_0xb6ade2(0x21e)](_0xb6ade2(0x23d));}),_0x395e97['on'](_0x30ddb5(0x29c),(_0x4e2e3f,_0x336028)=>{const _0x20b01f=_0x30ddb5;if(validateAccess(_0x336028,_0x30c7d0)['allow']){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x20b01f(0x2b3)]({'function':_0x20b01f(0x159),'args':_0x4e2e3f});}else logger[_0x20b01f(0x21e)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x395e97['on'](_0x30ddb5(0x24a),(_0x1939b8,_0x1a9e1a)=>{const _0x2af2d0=_0x30ddb5;if(validateAccess(_0x1a9e1a,_0x30c7d0)['allow']){if(pid[_0x5d1d5f])pid[_0x5d1d5f]['send']({'function':_0x2af2d0(0x26f),'args':_0x1939b8});}else logger['full'](_0x2af2d0(0x1ee));}),_0x395e97['on'](_0x30ddb5(0x1dc),(_0x30191e,_0x4ace44)=>{const _0x529ca6=_0x30ddb5;if(validateAccess(_0x4ace44,_0x30c7d0)['allow']){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x529ca6(0x2b3)]({'function':'storeHeadless','args':_0x30191e});}else logger[_0x529ca6(0x21e)](_0x529ca6(0x24f));}),_0x395e97['on'](_0x30ddb5(0x265),(_0x526c5a,_0x5b6444)=>{const _0xe060e0=_0x30ddb5;if(validateAccess(_0x5b6444,_0x30c7d0)[_0xe060e0(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0xe060e0(0x2b3)]({'function':_0xe060e0(0x2fa),'args':_0x526c5a});}else logger[_0xe060e0(0x21e)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x395e97['on'](_0x30ddb5(0x29b),_0x23cca2=>{const _0x49cddc=_0x30ddb5;if(validateAccess(_0x23cca2,_0x30c7d0)[_0x49cddc(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x49cddc(0x2b3)]({'function':_0x49cddc(0x212),'args':null});}else logger[_0x49cddc(0x21e)](_0x49cddc(0x1a7));}),_0x395e97['on']('get-starting-balances',_0x8c4cae=>{const _0x2ad4d8=_0x30ddb5;if(validateAccess(_0x8c4cae,_0x30c7d0)[_0x2ad4d8(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f]['send']({'function':_0x2ad4d8(0x1f2),'args':null});}else logger[_0x2ad4d8(0x21e)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x395e97['on'](_0x30ddb5(0x2be),(_0x5aebfb,_0x25756f)=>{const _0x5a0670=_0x30ddb5;if(validateAccess(_0x25756f,_0x30c7d0)[_0x5a0670(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x5a0670(0x2b3)]({'function':_0x5a0670(0x1e8),'args':_0x5aebfb});}else logger[_0x5a0670(0x21e)](_0x5a0670(0x149));}),_0x395e97['on']('cancel-loading',_0x8fef9b=>{const _0x1a45ab=_0x30ddb5;if(validateAccess(_0x8fef9b,_0x30c7d0)[_0x1a45ab(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x1a45ab(0x2b3)]({'function':_0x1a45ab(0x18b),'args':null});}else logger[_0x1a45ab(0x21e)](_0x1a45ab(0x187));}),_0x395e97['on'](_0x30ddb5(0x325),_0x24560b=>{const _0x28a8b2=_0x30ddb5;if(validateAccess(_0x24560b,_0x30c7d0)[_0x28a8b2(0x292)]){if(pid[_0x5d1d5f])pid[_0x5d1d5f][_0x28a8b2(0x2b3)]({'function':_0x28a8b2(0x22b),'args':null});}else logger['full'](_0x28a8b2(0x32d));}),_0x395e97['on'](_0x30ddb5(0x20e),_0x5270e6=>{const _0x918439=_0x30ddb5;if(validateAccess(_0x5270e6,_0x30c7d0)[_0x918439(0x292)])updateBB('update');else logger[_0x918439(0x21e)](_0x918439(0x158));}),_0x395e97['on'](_0x30ddb5(0x25c),_0x93df9f=>{const _0x129364=_0x30ddb5;if(validateAccess(_0x93df9f,_0x30c7d0)[_0x129364(0x292)])getMessages();else logger[_0x129364(0x21e)](_0x129364(0x20c));}),_0x395e97['on']('confirm-message',(_0x5011b4,_0x549e85)=>{const _0x23e5da=_0x30ddb5;if(validateAccess(_0x549e85,_0x30c7d0)[_0x23e5da(0x292)])confirmMessage(_0x5011b4);else logger[_0x23e5da(0x21e)](_0x23e5da(0x23a));}),_0x395e97['on'](_0x30ddb5(0x204),_0x33bff0=>{const _0x1e651f=_0x30ddb5;if(validateAccess(_0x33bff0,_0x30c7d0)[_0x1e651f(0x292)]){if(devices[_0x30c7d0][_0x1e651f(0x1b3)])clearTimeout(devices[_0x30c7d0][_0x1e651f(0x1b3)]);if(devices[_0x30c7d0][_0x1e651f(0x1ed)])clearTimeout(devices[_0x30c7d0]['pidExpireLogin']);removeSocketListeners(getClient(_0x395e97['id'])[_0x1e651f(0x1dd)]),addBlacklist(_0x30c7d0),devices[_0x30c7d0][_0x1e651f(0x21a)]=null,devices[_0x30c7d0][_0x1e651f(0x1ad)]=null,devices[_0x30c7d0][_0x1e651f(0x2e6)][_0x1e651f(0x2ba)]=null,logger[_0x1e651f(0x29a)](_0x1e651f(0x168)+_0x30c7d0[_0x1e651f(0x211)](-0x8)),io['to'](getClient(_0x395e97['id'])['uuid'])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x1e651f(0x313));});}function removeSocketListeners(_0x77702a){const _0x3cfe36=_0x1b168a;getClientsWithUuid(_0x77702a)[_0x3cfe36(0x239)](_0x5ce179=>{getSocket(_0x5ce179['id'])['removeAllListeners']();});}function cleanSettings(){const _0x532444=_0x1b168a;let _0x2a853f=settings;return settings[_0x532444(0x33b)]&&settings['telegramToken']!=''&&(_0x2a853f={..._0x2a853f,'telegramToken':_0x532444(0x343)}),settings[_0x532444(0x335)]&&settings['bbPassword']!=''&&(_0x2a853f={..._0x2a853f,'bbPassword':_0x532444(0x343)}),(settings['bbPassword']&&settings[_0x532444(0x335)]==_0x532444(0x22a)||settings[_0x532444(0x33b)]&&settings[_0x532444(0x33b)]==_0x532444(0x22a))&&(_0x2a853f={..._0x2a853f,'restored':{'password':settings['bbPassword']==_0x532444(0x22a),'telegram':settings[_0x532444(0x33b)]==_0x532444(0x22a)}}),_0x2a853f;}async function updateBB(_0x324b2d){const _0x53c5bc=_0x1b168a;await backupConfigFiles(),installingUpdate=!![],config[_0x53c5bc(0x239)](_0x1bf21f=>{const _0x52dd1f=_0x53c5bc;restartBot(_0x1bf21f[_0x52dd1f(0x33f)]);});if(_0x324b2d==_0x53c5bc(0x1f5))process[_0x53c5bc(0x2b3)]({'update':!![],'environment':environment},_0x234db7=>{});else _0x324b2d==_0x53c5bc(0x1ea)&&process[_0x53c5bc(0x2b3)]({'reinstall':!![],'environment':environment},_0x2d0ce7=>{});}function startBot(_0x41f1c0,_0x1862f8,_0x1c09b4){const _0x28742e=_0x1b168a;if(debugging)_0x41f1c0['push']('-d');let _0x51c025=![];const _0x1e4dc0=_0x41f1c0[0x0];_0x1862f8={..._0x1862f8,'stdio':[_0x28742e(0x2df),_0x28742e(0x2df),'inherit',_0x28742e(0x2c8)]},pid[_0x1e4dc0]=childProcess[_0x28742e(0x30b)](botfile,_0x41f1c0,_0x1862f8),pid[_0x1e4dc0]['on'](_0x28742e(0x27c),_0x1be8f6=>{const _0x5f67ba=_0x28742e;switch(Object[_0x5f67ba(0x2b2)](_0x1be8f6)[0x0]){case _0x5f67ba(0x232):updateBotName(_0x1e4dc0,_0x1be8f6[_0x5f67ba(0x232)]);break;case _0x5f67ba(0x1b0):updateBotManager();break;case _0x5f67ba(0x1f8):updateStatus(_0x1e4dc0,_0x1be8f6[_0x5f67ba(0x1f8)]);break;case _0x5f67ba(0x197):updateLive(_0x1e4dc0,_0x1be8f6[_0x5f67ba(0x197)]);break;case _0x5f67ba(0x2a4):updateLive(_0x1e4dc0,_0x1be8f6[_0x5f67ba(0x2a4)]),io['to'](_0x1e4dc0)['emit'](_0x5f67ba(0x1f8),{'access':{'allow':![],'reason':_0x5f67ba(0x1b8),'token':null}});break;case _0x5f67ba(0x1a6):_0x1be8f6[_0x5f67ba(0x1a6)]=='restart'&&restartBot(_0x1e4dc0);_0x1be8f6['stop']==_0x5f67ba(0x210)&&toggleBot(_0x1e4dc0,_0x5f67ba(0x339),_0x5f67ba(0x31d));break;case _0x5f67ba(0x152):sendTelegramBot(_0x1e4dc0,_0x1be8f6[_0x5f67ba(0x152)]);break;case _0x5f67ba(0x2bb):sendTelegramMsg(_0x1be8f6[_0x5f67ba(0x2bb)]);break;case _0x5f67ba(0x262):io['to'](_0x1e4dc0)[_0x5f67ba(0x2d4)](_0x1be8f6[_0x5f67ba(0x262)],_0x1be8f6['args']);break;}}),pid[_0x1e4dc0]['on']('error',function(_0x2356ad){if(_0x51c025)return;_0x51c025=!![],_0x1c09b4(_0x2356ad);}),pid[_0x1e4dc0]['on'](_0x28742e(0x283),async function(_0xc98456){const _0x49a748=_0x28742e;if(installingUpdate)return;if(_0x51c025)return;_0x51c025=!![],_0x1c09b4(null);const _0x54aebb=dbConfig[_0x49a748(0x237)](_0x49a748(0x268))[_0x49a748(0x1c7)]({'botID':_0x1e4dc0})[_0x49a748(0x2c5)]();_0x54aebb&&(_0x54aebb[_0x49a748(0x1f8)]==_0x49a748(0x1cc)||_0x54aebb['status']=='new')&&(await sleep(0x3e8),updateLive(_0x1e4dc0,'stopped'),logger[_0x49a748(0x21e)](_0x49a748(0x256)+_0x1e4dc0),startBot([_0x1e4dc0,userID],{'cwd':bbpath},function(_0x42b35c){if(_0x42b35c)logger['full'](_0x42b35c);}));});}function stopBot(_0x279bd7){const _0x468d48=_0x1b168a;getClientsWithBotID(_0x279bd7)[_0x468d48(0x239)](_0x160dc5=>{const _0x11011b=_0x468d48;getSocket(_0x160dc5['id'])[_0x11011b(0x23c)](!![]),removeClient(_0x160dc5['id']);}),pid[_0x279bd7]&&(pid[_0x279bd7][_0x468d48(0x210)](),pid[_0x279bd7]=null);}function restartBot(_0x1f81c7){const _0x2c65ce=_0x1b168a;if(pid[_0x1f81c7])pid[_0x1f81c7][_0x2c65ce(0x210)]();}function addBot(){const _0x34d053=_0x1b168a;let _0x237302;for(let _0x152c38=0x1;_0x152c38<0x3e9;_0x152c38++){_0x237302=_0x152c38[_0x34d053(0x2b7)]()['padStart'](0x3,'0');let _0x40f7e0=config[_0x34d053(0x1c7)](_0x54b4aa=>_0x54b4aa[_0x34d053(0x33f)]==_0x237302);if(!_0x40f7e0)break;}if(_0x237302===_0x34d053(0x169)){logger[_0x34d053(0x21e)](_0x34d053(0x2b0));return;}logger[_0x34d053(0x21e)](_0x34d053(0x2e7)+_0x237302),dbConfig[_0x34d053(0x237)](_0x34d053(0x268))[_0x34d053(0x175)]({'botID':_0x237302,'botname':_0x34d053(0x261)+_0x237302,'status':_0x34d053(0x221),'live':''})[_0x34d053(0x1cf)](),startBot([_0x237302,userID],{'cwd':bbpath},function(_0x1a710f){if(_0x1a710f)logger['full'](_0x1a710f);}),config=getConfiguration(),io['to'](_0x34d053(0x2dc))['emit'](_0x34d053(0x268),config),broadcastToBots(_0x34d053(0x268),JSON[_0x34d053(0x1b9)](config));}function deleteBot(_0x5a5900){const _0x5b1860=_0x1b168a;getClientsWithBotID(_0x5a5900)['forEach'](_0x1c0fa4=>{const _0x71ddc2=_0xbf39;getSocket(_0x1c0fa4['id'])[_0x71ddc2(0x23c)](!![]),removeClient(_0x1c0fa4['id']);}),dbConfig[_0x5b1860(0x237)]('bots')[_0x5b1860(0x172)]({'botID':_0x5a5900})[_0x5b1860(0x1cf)](),logger[_0x5b1860(0x21e)](_0x5b1860(0x15d)+_0x5a5900),stopBot(_0x5a5900);try{if(fs[_0x5b1860(0x178)](path[_0x5b1860(0x2f6)](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x1c8))))fs[_0x5b1860(0x2bf)](path['join'](configpath,'bot-'+_0x5a5900+'-config.json'));if(fs[_0x5b1860(0x178)](path[_0x5b1860(0x2f6)](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x14f))))fs[_0x5b1860(0x2bf)](path[_0x5b1860(0x2f6)](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x14f)));if(fs[_0x5b1860(0x178)](path['join'](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x277))))fs['unlinkSync'](path[_0x5b1860(0x2f6)](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x277)));if(fs['existsSync'](path['join'](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x1df))))fs['unlinkSync'](path[_0x5b1860(0x2f6)](configpath,_0x5b1860(0x31b)+_0x5a5900+_0x5b1860(0x1df)));}catch(_0x4b6b4b){if(_0x4b6b4b)logger['full'](_0x5b1860(0x192),_0x4b6b4b);}config=getConfiguration(),io['to'](_0x5b1860(0x2dc))['emit'](_0x5b1860(0x268),config),broadcastToBots(_0x5b1860(0x268),JSON['stringify'](config));}function toggleBot(_0x38cda1,_0x41beff,_0x2d18cc){const _0x85605a=_0x1b168a;dbConfig[_0x85605a(0x237)](_0x85605a(0x268))['find']({'botID':_0x38cda1})[_0x85605a(0x20a)]({'status':_0x41beff})['assign']({'live':_0x2d18cc})['write']();if(_0x41beff==_0x85605a(0x1cc)||_0x41beff==_0x85605a(0x221))logger[_0x85605a(0x21e)]('Enabled\x20Bot\x20'+_0x38cda1),startBot([_0x38cda1,userID],{'cwd':bbpath},function(_0xe6b1f1){const _0x305e3c=_0x85605a;if(_0xe6b1f1)logger[_0x305e3c(0x21e)](_0xe6b1f1);});else(_0x41beff==_0x85605a(0x339)||_0x41beff==_0x85605a(0x2a6))&&(logger['full'](_0x85605a(0x2f7)+_0x38cda1),stopBot(_0x38cda1));config=getConfiguration(),io['to'](_0x85605a(0x2dc))[_0x85605a(0x2d4)]('bots',config),broadcastToBots(_0x85605a(0x268),JSON['stringify'](config));}function toggleStatus(_0x1a1466){const _0x45dd8c=_0x1b168a;let _0x4841e5=dbConfig[_0x45dd8c(0x237)](_0x45dd8c(0x268))[_0x45dd8c(0x1c7)]({'botID':_0x1a1466})['value'](),_0x118380;if(_0x4841e5[_0x45dd8c(0x1f8)]===_0x45dd8c(0x1cc))_0x118380=_0x45dd8c(0x339);else{if(_0x4841e5[_0x45dd8c(0x1f8)]===_0x45dd8c(0x221))_0x118380=_0x45dd8c(0x2a6);else{if(_0x4841e5[_0x45dd8c(0x1f8)]===_0x45dd8c(0x2a6))_0x118380='new';else{if(_0x4841e5[_0x45dd8c(0x1f8)]===_0x45dd8c(0x339))_0x118380=_0x45dd8c(0x1cc);}}}return _0x118380;}function updateStatus(_0x25eba8,_0xbd1433){const _0x519698=_0x1b168a;dbConfig[_0x519698(0x237)]('bots')[_0x519698(0x1c7)]({'botID':_0x25eba8})[_0x519698(0x20a)]({'status':_0xbd1433})[_0x519698(0x1cf)](),config=getConfiguration(),io['to'](_0x519698(0x2dc))[_0x519698(0x2d4)]('bots',config),broadcastToBots(_0x519698(0x268),JSON['stringify'](config));}function updateLive(_0x5703e0,_0x32a5d9){const _0x5e6e5=_0x1b168a;dbConfig[_0x5e6e5(0x237)](_0x5e6e5(0x268))[_0x5e6e5(0x1c7)]({'botID':_0x5703e0})[_0x5e6e5(0x20a)]({'live':_0x32a5d9})[_0x5e6e5(0x1cf)](),config=getConfiguration(),io['to'](_0x5e6e5(0x2dc))[_0x5e6e5(0x2d4)](_0x5e6e5(0x268),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x38a135,_0x538473){const _0x53d112=_0x1b168a;dbConfig[_0x53d112(0x237)]('bots')[_0x53d112(0x1c7)]({'botID':_0x38a135})['assign']({'botname':_0x538473})[_0x53d112(0x1cf)](),config=getConfiguration(),io['to'](_0x53d112(0x2dc))['emit']('bots',config),broadcastToBots(_0x53d112(0x268),JSON[_0x53d112(0x1b9)](config));}function updateBotManager(){const _0x2ed554=_0x1b168a;config=getConfiguration(),io['to'](_0x2ed554(0x2dc))['emit'](_0x2ed554(0x268),config),broadcastToBots(_0x2ed554(0x268),JSON[_0x2ed554(0x1b9)](config));}function toggleBotMode(_0x520bef){const _0x2f1b91=_0x1b168a;if(pid[_0x520bef])pid[_0x520bef]['send']({'function':_0x2f1b91(0x157),'args':null});else{const _0x111edf=configpath+_0x2f1b91(0x31b)+_0x520bef+_0x2f1b91(0x1c8),_0x3dfbad=fs[_0x2f1b91(0x2a3)](_0x111edf),_0xdf922a=JSON[_0x2f1b91(0x32a)](_0x3dfbad),_0x38ab51=_0xdf922a['bot'][0x0][_0x2f1b91(0x345)];_0xdf922a[_0x2f1b91(0x2f0)][0x0][_0x2f1b91(0x345)]=!_0x38ab51;const _0x53622d=JSON['stringify'](_0xdf922a,null,0x2);fs[_0x2f1b91(0x260)](_0x111edf,_0x53622d),config=getConfiguration(),io['to'](_0x2f1b91(0x2dc))[_0x2f1b91(0x2d4)](_0x2f1b91(0x268),config),broadcastToBots('bots',JSON['stringify'](config));}}function _0xbf39(_0x577e3f,_0x2ad7a9){const _0x398831=_0x4cec();return _0xbf39=function(_0x3b1bcb,_0x1be7f6){_0x3b1bcb=_0x3b1bcb-0x147;let _0x4cecb8=_0x398831[_0x3b1bcb];return _0x4cecb8;},_0xbf39(_0x577e3f,_0x2ad7a9);}function validateTelegram(_0xbc3e43){const _0x15796d=_0x1b168a;if(_0xbc3e43[_0x15796d(0x227)][_0x15796d(0x25d)]!=settings[_0x15796d(0x1aa)]&&'@'+_0xbc3e43['from']['username']!=settings[_0x15796d(0x1aa)]||_0xbc3e43[_0x15796d(0x2cb)]['id']!=settings[_0x15796d(0x15f)])return sendTelegram(_0xbc3e43[_0x15796d(0x2cb)]['id'],_0x15796d(0x2a2),{'parse_mode':_0x15796d(0x297)}),![];return!![];}async function initTelegram(){const _0x15691f=_0x1b168a;if(tgBot)tgBot[_0x15691f(0x1a6)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x15691f(0x33b)]);let _0x1b54b3=_0x15691f(0x304);_0x1b54b3+='\x0a',_0x1b54b3+=_0x15691f(0x2d1),_0x1b54b3+=_0x15691f(0x164),_0x1b54b3+=_0x15691f(0x251),_0x1b54b3+=_0x15691f(0x248),_0x1b54b3+='/on\x20-\x20start\x20bot(s)\x0a',_0x1b54b3+=_0x15691f(0x1e4),_0x1b54b3+=_0x15691f(0x190),_0x1b54b3+=_0x15691f(0x213),_0x1b54b3+=_0x15691f(0x196),_0x1b54b3+=_0x15691f(0x25a),_0x1b54b3+=_0x15691f(0x155),_0x1b54b3+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x1b54b3+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x1b54b3+=_0x15691f(0x2ea);let _0x300b87=_0x15691f(0x25e);_0x300b87+='\x0a',_0x300b87+=_0x1b54b3,tgBot[_0x15691f(0x236)]((_0x527146,_0x58f1da)=>{const _0x1e1b20=_0x15691f;logger[_0x1e1b20(0x19d)](getTimeStamp()+_0x1e1b20(0x1e7)),logger[_0x1e1b20(0x29a)](_0x1e1b20(0x32b),_0x527146);}),tgBot[_0x15691f(0x14c)](async(_0x8fe111,_0x43ac45)=>{const _0x431129=_0x15691f;if(!(!settings['telegramChatId']&&_0x8fe111['update'][_0x431129(0x27c)][_0x431129(0x17e)]==_0x431129(0x32c))){if(!validateTelegram(_0x8fe111))return;}_0x43ac45();}),tgBot[_0x15691f(0x15c)](_0x15691f(0x2e5),async _0xbeeafd=>{const _0x7465b1=_0x15691f;if(!settings[_0x7465b1(0x15f)])updateSetting(_0x7465b1(0x15f),_0xbeeafd[_0x7465b1(0x2cb)]['id']);updateSetting(_0x7465b1(0x1e2),!![]);if(!validateTelegram(_0xbeeafd))return;sendTelegram(_0xbeeafd[_0x7465b1(0x2cb)]['id'],_0x300b87);}),tgBot[_0x15691f(0x15c)](_0x15691f(0x2b6),async _0x40eeef=>{const _0x3babbb=_0x15691f;updateSetting(_0x3babbb(0x1e2),!![]),sendTelegram(_0x40eeef[_0x3babbb(0x2cb)]['id'],_0x3babbb(0x324));}),tgBot[_0x15691f(0x15c)](_0x15691f(0x2b1),async _0xa661c3=>{const _0x53dc75=_0x15691f;sendTelegram(_0xa661c3['chat']['id'],_0x53dc75(0x348)),updateSetting(_0x53dc75(0x1e2),![]);}),tgBot['command'](_0x15691f(0x2da),async _0x2fbd9a=>{const _0x2a82e7=_0x15691f,_0x3de887=Markup[_0x2a82e7(0x194)]([Markup[_0x2a82e7(0x314)]['callback']('Orders',_0x2a82e7(0x1c4)),Markup[_0x2a82e7(0x314)][_0x2a82e7(0x2a7)](_0x2a82e7(0x267),_0x2a82e7(0x23e)),Markup[_0x2a82e7(0x314)][_0x2a82e7(0x2a7)](_0x2a82e7(0x280),_0x2a82e7(0x162))]);_0x2fbd9a['reply'](_0x2a82e7(0x2d8),_0x3de887);}),tgBot[_0x15691f(0x186)](_0x15691f(0x1c4),async _0x16b937=>{const _0x1f2b20=_0x15691f;_0x16b937['editMessageReplyMarkup'](),updateSetting(_0x1f2b20(0x1af),_0x1f2b20(0x296)),updateSetting(_0x1f2b20(0x1e2),!![]),await sendTelegram(_0x16b937[_0x1f2b20(0x2cb)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x15691f(0x186)](_0x15691f(0x23e),async _0x365619=>{const _0x3c0288=_0x15691f;_0x365619['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x3c0288(0x27d)),updateSetting(_0x3c0288(0x1e2),!![]),await sendTelegram(_0x365619['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x15691f(0x186)]('config_all',async _0xfad6bc=>{const _0x5456da=_0x15691f;_0xfad6bc[_0x5456da(0x318)](),updateSetting(_0x5456da(0x1af),_0x5456da(0x15e)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xfad6bc[_0x5456da(0x2cb)]['id'],_0x5456da(0x26b));}),tgBot['command'](_0x15691f(0x1f8),async _0x3273c2=>{const _0x507ba5=_0x15691f,_0xfb6ba=getBotsWithMode();let _0x93bcd0=_0x507ba5(0x2e1);config[_0x507ba5(0x239)](_0x3c2e59=>{const _0x1cafab=_0x507ba5,_0x193a0a=_0xfb6ba[_0x1cafab(0x1c7)](_0x591120=>_0x591120[_0x1cafab(0x33f)]==_0x3c2e59[_0x1cafab(0x33f)])[_0x1cafab(0x189)];_0x93bcd0+=_0x1cafab(0x261)+_0x3c2e59[_0x1cafab(0x33f)]+':\x20'+_0x3c2e59[_0x1cafab(0x1f8)]+'\x20|\x20'+_0x193a0a+_0x1cafab(0x22e)+_0x3c2e59[_0x1cafab(0x197)]+'\x0a';}),_0x93bcd0+='\x0a',_0x93bcd0+=_0x507ba5(0x1a9),_0x93bcd0+=!settings['telegramEnabled']?_0x507ba5(0x1ab):'Notifications\x20enabled\x0a',_0x93bcd0+=settings[_0x507ba5(0x1e2)]?settings[_0x507ba5(0x1af)]==_0x507ba5(0x15e)?_0x507ba5(0x1ba):'Notifications\x20types:\x20'+settings[_0x507ba5(0x1af)]+'\x20only\x0a':'',sendTelegram(_0x3273c2[_0x507ba5(0x2cb)]['id'],_0x93bcd0,{'parse_mode':_0x507ba5(0x297)});}),tgBot[_0x15691f(0x15c)]('restart',async _0x55e5ad=>{const _0x22977=_0x15691f,_0x3f28b3=getEnabledBots();if(_0x3f28b3[_0x22977(0x167)]==0x0)sendTelegram(_0x55e5ad[_0x22977(0x2cb)]['id'],_0x22977(0x19b));else{if(_0x3f28b3[_0x22977(0x167)]>0x1)_0x3f28b3[_0x22977(0x175)]({'botID':_0x22977(0x15e)});let _0x2a6a68=[],_0x5dcb57=[];const _0x16ea59=_0x3f28b3['length']%0x4==0x0||_0x3f28b3[_0x22977(0x167)]%0x4==0x3||_0x3f28b3[_0x22977(0x167)]%0x3==0x1?0x4:0x3;let _0x18d42f=0x0;_0x3f28b3[_0x22977(0x239)]((_0x42df5a,_0x2aaaf8)=>{const _0x30eac9=_0x22977;if(_0x2aaaf8%_0x16ea59==0x0)_0x5dcb57=[];_0x5dcb57[_0x30eac9(0x175)](Markup[_0x30eac9(0x314)][_0x30eac9(0x2a7)](_0x42df5a['botID']==_0x30eac9(0x15e)?_0x30eac9(0x334):'Bot\x20'+_0x42df5a[_0x30eac9(0x33f)],_0x30eac9(0x333)+_0x42df5a[_0x30eac9(0x33f)])),_0x2aaaf8%_0x16ea59==0x0&&(_0x2a6a68[_0x18d42f]=_0x5dcb57,_0x18d42f++);});const _0x237c81=Markup[_0x22977(0x194)](_0x2a6a68);_0x55e5ad['reply'](_0x22977(0x214),_0x237c81);}}),tgBot[_0x15691f(0x186)](/restart_(.+)/,async _0x36521a=>{const _0x76deca=_0x15691f,_0x48a070=_0x36521a[_0x76deca(0x1de)][0x1];_0x36521a[_0x76deca(0x318)](),_0x48a070=='all'?config[_0x76deca(0x239)](_0x110a30=>{const _0x591452=_0x76deca;restartBot(_0x110a30[_0x591452(0x33f)]);}):restartBot(_0x48a070);}),tgBot['command']('on',async _0x3f951e=>{const _0x5678be=_0x15691f,_0x208012=getDisabledBots();if(_0x208012[_0x5678be(0x167)]==0x0)sendTelegram(_0x3f951e[_0x5678be(0x2cb)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x208012[_0x5678be(0x167)]>0x1)_0x208012[_0x5678be(0x175)]({'botID':'all'});let _0x231889=[],_0x424257=[];const _0x17c6b8=_0x208012[_0x5678be(0x167)]%0x4==0x0||_0x208012[_0x5678be(0x167)]%0x4==0x3||_0x208012[_0x5678be(0x167)]%0x3==0x1?0x4:0x3;let _0x35c749=0x0;_0x208012[_0x5678be(0x239)]((_0x4006aa,_0x1aeddc)=>{const _0x4d4911=_0x5678be;if(_0x1aeddc%_0x17c6b8==0x0)_0x424257=[];_0x424257['push'](Markup[_0x4d4911(0x314)][_0x4d4911(0x2a7)](_0x4006aa[_0x4d4911(0x33f)]=='all'?_0x4d4911(0x334):_0x4d4911(0x261)+_0x4006aa[_0x4d4911(0x33f)],'on_'+_0x4006aa[_0x4d4911(0x33f)])),_0x1aeddc%_0x17c6b8==0x0&&(_0x231889[_0x35c749]=_0x424257,_0x35c749++);});const _0x3ab58c=Markup[_0x5678be(0x194)](_0x231889);_0x3f951e['reply'](_0x5678be(0x2ad),_0x3ab58c);}}),tgBot[_0x15691f(0x186)](/on_(.+)/,async _0x20d207=>{const _0x4682c1=_0x15691f,_0x5ab713=_0x20d207[_0x4682c1(0x1de)][0x1];_0x20d207[_0x4682c1(0x318)]();if(_0x5ab713==_0x4682c1(0x15e)){const _0x1d1241=getDisabledBots();sendTelegram(_0x20d207['chat']['id'],_0x4682c1(0x300)),_0x1d1241[_0x4682c1(0x239)](_0x38fa81=>{const _0xa13da=_0x4682c1;if(_0x38fa81[_0xa13da(0x33f)]!=_0xa13da(0x15e))toggleBot(_0x38fa81[_0xa13da(0x33f)],toggleStatus(_0x38fa81[_0xa13da(0x33f)]),_0xa13da(0x31d));});}else sendTelegram(_0x20d207['chat']['id'],_0x4682c1(0x269)+_0x5ab713),toggleBot(_0x5ab713,toggleStatus(_0x5ab713),_0x4682c1(0x31d));}),tgBot[_0x15691f(0x15c)](_0x15691f(0x238),async _0x2673c2=>{const _0xc51b12=_0x15691f,_0x547b73=getEnabledBots();if(_0x547b73[_0xc51b12(0x167)]==0x0)sendTelegram(_0x2673c2[_0xc51b12(0x2cb)]['id'],_0xc51b12(0x19b));else{if(_0x547b73[_0xc51b12(0x167)]>0x1)_0x547b73[_0xc51b12(0x175)]({'botID':_0xc51b12(0x15e)});let _0xe8f82b=[],_0x19d966=[];const _0x9887a5=_0x547b73['length']%0x4==0x0||_0x547b73[_0xc51b12(0x167)]%0x4==0x3||_0x547b73[_0xc51b12(0x167)]%0x3==0x1?0x4:0x3;let _0x40b85f=0x0;_0x547b73[_0xc51b12(0x239)]((_0x454a33,_0x2b2142)=>{const _0x98ceaa=_0xc51b12;if(_0x2b2142%_0x9887a5==0x0)_0x19d966=[];_0x19d966['push'](Markup[_0x98ceaa(0x314)][_0x98ceaa(0x2a7)](_0x454a33[_0x98ceaa(0x33f)]==_0x98ceaa(0x15e)?_0x98ceaa(0x334):_0x98ceaa(0x261)+_0x454a33[_0x98ceaa(0x33f)],'off_'+_0x454a33['botID'])),_0x2b2142%_0x9887a5==0x0&&(_0xe8f82b[_0x40b85f]=_0x19d966,_0x40b85f++);});const _0x42a25b=Markup[_0xc51b12(0x194)](_0xe8f82b);_0x2673c2['reply'](_0xc51b12(0x2fb),_0x42a25b);}}),tgBot[_0x15691f(0x186)](/off_(.+)/,async _0x1e4c08=>{const _0x4438fc=_0x15691f,_0x4fa107=_0x1e4c08[_0x4438fc(0x1de)][0x1];_0x1e4c08[_0x4438fc(0x318)]();if(_0x4fa107=='all'){const _0x331a74=getEnabledBots();sendTelegram(_0x1e4c08['chat']['id'],_0x4438fc(0x309)),_0x331a74[_0x4438fc(0x239)](_0x71f685=>{const _0x4b72bc=_0x4438fc;if(_0x71f685[_0x4b72bc(0x33f)]!=_0x4b72bc(0x15e))toggleBot(_0x71f685['botID'],toggleStatus(_0x71f685['botID']),_0x4b72bc(0x31d));});}else sendTelegram(_0x1e4c08[_0x4438fc(0x2cb)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x4fa107),toggleBot(_0x4fa107,toggleStatus(_0x4fa107),_0x4438fc(0x31d));}),tgBot['command'](_0x15691f(0x1fc),async _0xa2dc95=>{const _0x194b08=_0x15691f,_0x953746=getEnabledBots();if(_0x953746[_0x194b08(0x167)]==0x0)sendTelegram(_0xa2dc95[_0x194b08(0x2cb)]['id'],_0x194b08(0x19b));else{if(_0x953746['length']>0x1){let _0x5d64be=[],_0x62f897=[];const _0xab1343=_0x953746[_0x194b08(0x167)]%0x4==0x0||_0x953746['length']%0x4==0x3||_0x953746[_0x194b08(0x167)]%0x3==0x1?0x4:0x3;let _0x194577=0x0;_0x953746[_0x194b08(0x239)]((_0x1c5792,_0x2d6746)=>{const _0x1f4309=_0x194b08;if(_0x2d6746%_0xab1343==0x0)_0x62f897=[];_0x62f897[_0x1f4309(0x175)](Markup[_0x1f4309(0x314)][_0x1f4309(0x2a7)](_0x1f4309(0x261)+_0x1c5792[_0x1f4309(0x33f)],_0x1f4309(0x1b6)+_0x1c5792[_0x1f4309(0x33f)])),_0x2d6746%_0xab1343==0x0&&(_0x5d64be[_0x194577]=_0x62f897,_0x194577++);});const _0x477993=Markup[_0x194b08(0x194)](_0x5d64be);_0xa2dc95['reply'](_0x194b08(0x266),_0x477993);}else{const _0x1e22a7=_0x953746[0x0]['botID'];if(pid[_0x1e22a7])pid[_0x1e22a7][_0x194b08(0x2b3)]({'function':_0x194b08(0x2c4),'args':null});}}}),tgBot[_0x15691f(0x186)](/metrics_(.+)/,async _0x246b36=>{const _0x458a03=_0x15691f,_0x4d148e=_0x246b36[_0x458a03(0x1de)][0x1];_0x246b36[_0x458a03(0x318)]();if(pid[_0x4d148e])pid[_0x4d148e][_0x458a03(0x2b3)]({'function':_0x458a03(0x2c4),'args':null});}),tgBot['command'](_0x15691f(0x222),async _0x53070f=>{const _0x1cd9f5=_0x15691f,_0x2d4e9f=getEnabledBots();if(_0x2d4e9f[_0x1cd9f5(0x167)]==0x0)sendTelegram(_0x53070f['chat']['id'],_0x1cd9f5(0x19b));else{if(_0x2d4e9f[_0x1cd9f5(0x167)]>0x1){let _0x2ec29f=[],_0x9f61e8=[];const _0x391359=_0x2d4e9f[_0x1cd9f5(0x167)]%0x4==0x0||_0x2d4e9f[_0x1cd9f5(0x167)]%0x4==0x3||_0x2d4e9f[_0x1cd9f5(0x167)]%0x3==0x1?0x4:0x3;let _0x41de4a=0x0;_0x2d4e9f[_0x1cd9f5(0x239)]((_0x1f3b80,_0x143fb7)=>{const _0x3f09f4=_0x1cd9f5;if(_0x143fb7%_0x391359==0x0)_0x9f61e8=[];_0x9f61e8[_0x3f09f4(0x175)](Markup['button'][_0x3f09f4(0x2a7)](_0x3f09f4(0x261)+_0x1f3b80[_0x3f09f4(0x33f)],_0x3f09f4(0x29d)+_0x1f3b80[_0x3f09f4(0x33f)])),_0x143fb7%_0x391359==0x0&&(_0x2ec29f[_0x41de4a]=_0x9f61e8,_0x41de4a++);});const _0x1e7f03=Markup[_0x1cd9f5(0x194)](_0x2ec29f);_0x53070f[_0x1cd9f5(0x2fc)](_0x1cd9f5(0x31a),_0x1e7f03);}else{const _0x1a215c=_0x2d4e9f[0x0][_0x1cd9f5(0x33f)];if(pid[_0x1a215c])pid[_0x1a215c][_0x1cd9f5(0x2b3)]({'function':_0x1cd9f5(0x329),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x1a5bc7=>{const _0x1c377a=_0x15691f,_0x27b0ca=_0x1a5bc7[_0x1c377a(0x1de)][0x1];_0x1a5bc7[_0x1c377a(0x318)]();if(pid[_0x27b0ca])pid[_0x27b0ca][_0x1c377a(0x2b3)]({'function':_0x1c377a(0x329),'args':null});}),tgBot[_0x15691f(0x15c)]('update',async _0x45f8f2=>{const _0x41adff=_0x15691f;await getMessages();if(!updateAvailable)sendTelegram(_0x45f8f2[_0x41adff(0x2cb)]['id'],_0x41adff(0x1b1));else{if(!validInstallation)sendTelegram(_0x45f8f2[_0x41adff(0x2cb)]['id'],_0x41adff(0x26e));else{const _0x4e68fb=Markup[_0x41adff(0x194)]([Markup['button'][_0x41adff(0x2a7)](_0x41adff(0x1d7),_0x41adff(0x23b)),Markup[_0x41adff(0x314)][_0x41adff(0x2a7)]('No',_0x41adff(0x16e))]);_0x45f8f2[_0x41adff(0x2fc)](_0x41adff(0x321),_0x4e68fb);}}}),tgBot[_0x15691f(0x186)](/update_(.+)/,async _0x1f00af=>{const _0x344c61=_0x15691f,_0x3bf305=_0x1f00af[_0x344c61(0x1de)][0x1];_0x1f00af['editMessageReplyMarkup'](),_0x3bf305==_0x344c61(0x1e9)&&(await sendTelegram(_0x1f00af[_0x344c61(0x2cb)]['id'],_0x344c61(0x1ce)),updateBB(_0x344c61(0x1f5))),_0x3bf305=='no'&&await sendTelegram(_0x1f00af[_0x344c61(0x2cb)]['id'],_0x344c61(0x20f));}),tgBot['command'](_0x15691f(0x1ea),async _0x11166e=>{const _0x11ec8a=_0x15691f;if(!validInstallation)sendTelegram(_0x11166e['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x172b84=Markup['inlineKeyboard']([Markup[_0x11ec8a(0x314)][_0x11ec8a(0x2a7)](_0x11ec8a(0x1d7),_0x11ec8a(0x2ae)),Markup['button'][_0x11ec8a(0x2a7)]('No','reinstall_no')]);_0x11166e[_0x11ec8a(0x2fc)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x172b84);}}),tgBot[_0x15691f(0x186)](/reinstall_(.+)/,async _0x3b5f6a=>{const _0x420fdc=_0x15691f,_0x59d6f8=_0x3b5f6a[_0x420fdc(0x1de)][0x1];_0x3b5f6a[_0x420fdc(0x318)](),_0x59d6f8==_0x420fdc(0x1e9)&&(await sendTelegram(_0x3b5f6a[_0x420fdc(0x2cb)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x420fdc(0x1ea))),_0x59d6f8=='no'&&await sendTelegram(_0x3b5f6a[_0x420fdc(0x2cb)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command'](_0x15691f(0x2cc),async _0x277cd6=>{const _0x3e96a9=_0x15691f,_0x34e841=getBotsWithMode();if(_0x34e841[_0x3e96a9(0x167)]==0x0)sendTelegram(_0x277cd6[_0x3e96a9(0x2cb)]['id'],_0x3e96a9(0x19b));else{let _0x123b4f=[],_0x498c62=[];const _0x38deca=0x2;let _0x1aa8c1=0x0;_0x34e841[_0x3e96a9(0x239)]((_0x3612ab,_0x8bf83d)=>{const _0x11ed74=_0x3e96a9;if(_0x8bf83d%_0x38deca==0x0)_0x498c62=[];_0x498c62[_0x11ed74(0x175)](Markup[_0x11ed74(0x314)]['callback'](_0x11ed74(0x261)+_0x3612ab[_0x11ed74(0x33f)]+'\x20('+_0x3612ab['mode']+')',_0x11ed74(0x199)+_0x3612ab['botID'])),_0x8bf83d%_0x38deca==0x0&&(_0x123b4f[_0x1aa8c1]=_0x498c62,_0x1aa8c1++);});const _0x45cc84=Markup[_0x3e96a9(0x194)](_0x123b4f);_0x277cd6[_0x3e96a9(0x2fc)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x45cc84);}}),tgBot['action'](/toggle_(.+)/,async _0x9ca9e9=>{const _0x1bc985=_0x15691f,_0x12ff99=_0x9ca9e9[_0x1bc985(0x1de)][0x1];_0x9ca9e9['editMessageReplyMarkup']();const _0x2fedee=getBotsWithMode(),_0x3cd709=_0x2fedee[_0x1bc985(0x1c7)](_0x1bb765=>_0x1bb765['botID']==_0x12ff99),_0x4640e4=_0x3cd709[_0x1bc985(0x189)]==_0x1bc985(0x1a4)?_0x1bc985(0x2ed):_0x1bc985(0x1a4);sendTelegram(_0x9ca9e9[_0x1bc985(0x2cb)]['id'],_0x1bc985(0x293)+_0x12ff99+_0x1bc985(0x1f7)+_0x4640e4+_0x1bc985(0x295)),toggleBotMode(_0x12ff99);}),tgBot[_0x15691f(0x15c)]('names',async _0x1e8600=>{let _0x29e956='';config['forEach'](_0x18fcf6=>{const _0x4d1791=_0xbf39;_0x29e956+=_0x4d1791(0x261)+_0x18fcf6[_0x4d1791(0x33f)]+':\x20'+_0x18fcf6['botname']+'\x0a';}),sendTelegram(_0x1e8600['chat']['id'],_0x29e956,{'parse_mode':'HTML'});}),tgBot[_0x15691f(0x15c)](_0x15691f(0x302),async _0x195358=>{const _0x49d9db=_0x15691f;sendTelegram(_0x195358[_0x49d9db(0x2cb)]['id'],_0x1b54b3);}),process[_0x15691f(0x184)]('SIGINT',()=>tgBot['stop']('SIGINT')),process[_0x15691f(0x184)]('SIGTERM',()=>tgBot[_0x15691f(0x1a6)]('SIGTERM')),tgBot['launch']();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x55f5f3,_0x3a8cd9,_0x2f95c8){const _0x253e8b=_0x1b168a;try{await tgBot[_0x253e8b(0x152)][_0x253e8b(0x2ff)](_0x55f5f3,_0x3a8cd9,_0x2f95c8);}catch(_0x3fe6b9){console[_0x253e8b(0x14e)](_0x253e8b(0x253),_0x3fe6b9);}}function sendTelegramBot(_0xebb378,_0x392ec0){const _0x1d07a6=_0x1b168a;if(settings[_0x1d07a6(0x1e2)]){if(settings[_0x1d07a6(0x1af)]=='all'||(_0x392ec0[_0x1d07a6(0x24c)]==_0x1d07a6(0x2eb)||_0x392ec0[_0x1d07a6(0x24c)]=='warning'||_0x392ec0[_0x1d07a6(0x24c)]==_0x1d07a6(0x1fe))&&settings[_0x1d07a6(0x1af)]==_0x1d07a6(0x27d)||_0x392ec0[_0x1d07a6(0x24c)]==_0x1d07a6(0x19c)&&settings[_0x1d07a6(0x1af)]==_0x1d07a6(0x296)){if(tgBot&&settings['telegramChatId']){if(_0x392ec0[_0x1d07a6(0x1a3)])sendTelegram(settings[_0x1d07a6(0x15f)],_0x392ec0[_0x1d07a6(0x232)]+_0x1d07a6(0x1a2)+_0x392ec0['event']);else sendTelegram(settings[_0x1d07a6(0x15f)],_0x1d07a6(0x261)+_0xebb378+_0x1d07a6(0x1a2)+_0x392ec0[_0x1d07a6(0x177)]);}}}}async function sendTelegramMsg(_0x10017e,_0x31a1ae='HTML'){const _0x296946=_0x1b168a;return settings[_0x296946(0x1e2)]&&tgBot&&settings[_0x296946(0x15f)]?(await sendTelegram(settings[_0x296946(0x15f)],_0x10017e,{'parse_mode':_0x31a1ae}),!![]):![];}function getDeviceWithIp(_0x2589b1){const _0x5925b1=_0x1b168a;return devices[_0x5925b1(0x1c7)](_0x1b9dd3=>_0x1b9dd3['ip']===_0x2589b1);}function temporaryAccess2FA(_0x437669,_0x4b8d54){const _0x251096=_0x1b168a;let _0xc0dfad=new Date(),_0x304014=![];if(lastIpApproval){if(_0xc0dfad-lastIpApproval<0x1388)_0x304014=!![];}lastIpApproval=new Date();if(_0x304014)return;if(tgBot&&settings[_0x251096(0x15f)]){const _0x4bc6ca=Markup['inlineKeyboard']([Markup['button']['callback'](_0x251096(0x346),_0x251096(0x2e4)),Markup[_0x251096(0x314)][_0x251096(0x2a7)](_0x251096(0x289),_0x251096(0x150)),Markup['button']['callback'](_0x251096(0x279),_0x251096(0x1bd)),Markup[_0x251096(0x314)][_0x251096(0x2a7)](_0x251096(0x1db),'tempaccess_reject')]);sendTelegram(settings[_0x251096(0x15f)],_0x251096(0x2a1)+normalizeIP(_0x4b8d54)[_0x251096(0x195)]+'\x20?',_0x4bc6ca),tgBot[_0x251096(0x186)](/tempaccess_(.+)/,async _0x519c2e=>{const _0x5016d7=_0x251096,_0x31d3e1=_0x519c2e[_0x5016d7(0x1de)][0x1];_0x519c2e[_0x5016d7(0x318)](),devices[_0x437669][_0x5016d7(0x21a)]={'clientip':_0x4b8d54,'timestamp':new Date()[_0x5016d7(0x193)](),'expiry':_0x31d3e1},_0x31d3e1!=_0x5016d7(0x1db)?(await sendTelegram(_0x519c2e[_0x5016d7(0x2cb)]['id'],_0x5016d7(0x2cf)+_0x31d3e1+'\x20minutes',{'parse_mode':_0x5016d7(0x297)}),io['to'](_0x437669)[_0x5016d7(0x2d4)](_0x5016d7(0x1f8),{'access':{'allow':![],'reason':_0x5016d7(0x1b8),'token':null}})):(await sendTelegram(_0x519c2e[_0x5016d7(0x2cb)]['id'],_0x5016d7(0x2a8)),io['to'](_0x437669)['emit'](_0x5016d7(0x1f8),{'access':{'allow':![],'reason':_0x5016d7(0x2d9),'token':null}}));});}}function loginAccess2FA(_0x570d14,_0xee4189){const _0x417642=_0x1b168a;if(tgBot&&settings[_0x417642(0x15f)]){const _0x22f274=Markup[_0x417642(0x194)]([Markup[_0x417642(0x314)]['callback'](_0x417642(0x285),_0x417642(0x27a)+loginExpiry),Markup[_0x417642(0x314)]['callback']('reject','login2fa_reject')]);sendTelegram(settings[_0x417642(0x15f)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0xee4189)[_0x417642(0x195)]+'\x20?',_0x22f274),tgBot[_0x417642(0x186)](/login2fa_(.+)/,async _0x48b1c8=>{const _0x3b6f35=_0x417642,_0xf4c762=_0x48b1c8[_0x3b6f35(0x1de)][0x1];_0x48b1c8[_0x3b6f35(0x318)](),devices[_0x570d14]['telegram2FaApproval']={'clientip':_0xee4189,'timestamp':new Date()[_0x3b6f35(0x193)](),'expiry':_0xf4c762},_0xf4c762!=_0x3b6f35(0x1db)?(await sendTelegram(_0x48b1c8[_0x3b6f35(0x2cb)]['id'],_0x3b6f35(0x1d0),{'parse_mode':_0x3b6f35(0x297)}),io['to'](_0x570d14)[_0x3b6f35(0x2d4)](_0x3b6f35(0x1f8),{'access':{'allow':![],'reason':_0x3b6f35(0x1b8),'token':null}})):(await sendTelegram(_0x48b1c8[_0x3b6f35(0x2cb)]['id'],_0x3b6f35(0x22c)),io['to'](_0x570d14)[_0x3b6f35(0x2d4)](_0x3b6f35(0x1f8),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3c71c6=_0x1b168a;return dbConfig[_0x3c71c6(0x237)](_0x3c71c6(0x268))[_0x3c71c6(0x1d5)](_0x3c71c6(0x33f))[_0x3c71c6(0x21b)]({'status':_0x3c71c6(0x1cc)})[_0x3c71c6(0x2c5)]()||[];}function getDisabledBots(){const _0x3bc094=_0x1b168a;return dbConfig[_0x3bc094(0x237)](_0x3bc094(0x268))['sortBy']('botID')[_0x3bc094(0x21b)]({'status':_0x3bc094(0x339)})[_0x3bc094(0x2c5)]()||[];}function getBotAttributes(_0x3162b0){const _0x490b7f=_0x1b168a;let _0x2b28f6={};const _0x1c8c70=configpath+_0x490b7f(0x31b)+_0x3162b0+'-config.json',_0x516699=fs[_0x490b7f(0x178)](_0x1c8c70);if(_0x516699){const _0x235e6b=fs[_0x490b7f(0x2a3)](_0x1c8c70);try{const _0x33ccaf=JSON[_0x490b7f(0x32a)](_0x235e6b),_0x352ed6=_0x33ccaf?_0x33ccaf[_0x490b7f(0x2f0)][0x0][_0x490b7f(0x345)]:![];_0x2b28f6['mode']=_0x352ed6?_0x490b7f(0x1a4):_0x490b7f(0x2ed),_0x2b28f6[_0x490b7f(0x232)]=_0x33ccaf?_0x33ccaf[_0x490b7f(0x2f0)][0x0][_0x490b7f(0x232)]:'Bot\x20'+_0x3162b0;}catch(_0x25b692){_0x2b28f6['mode']=_0x490b7f(0x2ed),_0x2b28f6[_0x490b7f(0x232)]=_0x490b7f(0x261)+_0x3162b0;}}else _0x2b28f6['mode']='manual',_0x2b28f6[_0x490b7f(0x232)]=_0x490b7f(0x261)+_0x3162b0;return _0x2b28f6;}function getBotsWithMode(){const _0x23054e=_0x1b168a,_0x5e1c13=dbConfig[_0x23054e(0x237)](_0x23054e(0x268))[_0x23054e(0x1d5)](_0x23054e(0x33f))[_0x23054e(0x2c5)]()||[];return _0x5e1c13[_0x23054e(0x239)](_0x4b4ad4=>{const _0x2ac87c=_0x23054e;let _0x1c373a=getBotAttributes(_0x4b4ad4[_0x2ac87c(0x33f)]);_0x4b4ad4['mode']=_0x1c373a[_0x2ac87c(0x189)];}),_0x5e1c13;}function getBotExchanges(){const _0xc96afe=_0x1b168a;let _0x298021=[];const _0x4f20f1=dbConfig[_0xc96afe(0x237)]('bots')['sortBy'](_0xc96afe(0x33f))[_0xc96afe(0x2c5)]()||[];_0x4f20f1['forEach'](_0x502dbe=>{const _0x164b47=_0xc96afe;if(_0x502dbe[_0x164b47(0x1f8)]=='enabled'){const _0x3104a9=configpath+'bot-'+_0x502dbe[_0x164b47(0x33f)]+_0x164b47(0x1c8),_0x493852=fs[_0x164b47(0x178)](_0x3104a9);let _0x47c995;if(_0x493852){const _0x17412e=fs['readFileSync'](_0x3104a9);try{const _0x4d1173=JSON['parse'](_0x17412e);_0x47c995=_0x4d1173?_0x4d1173[_0x164b47(0x2f0)][0x0][_0x164b47(0x284)]:null;}catch(_0x2738d7){}}if(_0x47c995)_0x298021[_0x164b47(0x175)](_0x47c995);}});const _0x5e3fc6=[...new Set(_0x298021)]['sort']();return _0x5e3fc6;}async function initUser(){const _0x10d06=_0x1b168a;if(!settings[_0x10d06(0x1f3)]){const _0x53949d=uuidRandom();mixpanel[_0x10d06(0x275)](_0x53949d),updateSetting('userid',_0x53949d);}}async function initSecure(){const _0x4f1576=_0x1b168a;let _0x35b9a3=getSecure();if(!_0x35b9a3[_0x4f1576(0x25f)](_0x4f1576(0x18a))){let _0x450527=await generateKeys();_0x35b9a3[_0x4f1576(0x22d)]=_0x450527[_0x4f1576(0x22d)],_0x35b9a3[_0x4f1576(0x2a9)]=_0x450527['privateKey'],_0x35b9a3[_0x4f1576(0x18a)]=crypto[_0x4f1576(0x1eb)](0x20)[_0x4f1576(0x2b7)](_0x4f1576(0x1b2));;storeSecure(_0x35b9a3);}}function getSettings(){const _0xb6ee0a=_0x1b168a;return dbSettings['get'](_0xb6ee0a(0x278))['value']()||{};}function getSecure(){const _0x1da110=_0x1b168a;return dbSecure[_0x1da110(0x237)](_0x1da110(0x290))[_0x1da110(0x2c5)]()||{};}function _0x4cec(){const _0x1ecfc9=['auth','(staging)','find','-config.json','connection','socket.io','DEFLATE','enabled','30481FLiAqU','Starting\x20Balance\x20Bot\x20update','write','Login\x20accepted','#RES#\x20','login\x20required','download','build','sortBy','environment','Yes','port','get-logs','lowdb/adapters/FileSync','reject','store-headless','uuid','match','-results.json','$1_$2_$3','uncaughtException','telegramEnabled','temporaryAccessAllowed','/off\x20-\x20stop\x20bot(s)\x0a','env','search',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','placeOrder','yes','reinstall','randomBytes','2FA\x20required','pidExpireLogin','Unauthorized\x20attempt\x20to\x20store\x20configuration','config/','handshake','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','getStartingBalances','userid','timeshift','update','update-bot','\x20to\x20','status','express-fileupload','Unauthorized\x20attempt\x20to\x20delete\x20bot','isIPv4MappedAddress','metrics',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','success','exp','\x1b[33m','expiry','invalid\x20credentials','apiKey','logout','whitelist','temporary\x20token\x20generated','bb/','backup-full','defaults','assign','_data','Unauthorized\x20attempt\x20to\x20get\x20messages','string','update-bb','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','kill','slice','resetHistory','/names\x20-\x20show\x20bot\x20names\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getMonth','jsonwebtoken','internal','IPv4','mtime','telegramIpApproval','filter','(((.+)+)+)+$','verify','full','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','any','new','portfolio','format','127.0.0.1','entries','reason','from','add','/:bot','***','showConfig','Login\x20rejected','publicKey','\x20|\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','6b67f3d61ee94b8f5c80b4affef4c4d9','bbUsername','botname','access\x20timeout','binary','production','catch','get','off','forEach','Unauthorized\x20attempt\x20to\x20confirm\x20message','update_yes','disconnect','Unauthorized\x20attempt\x20to\x20delete\x20alerts','config_alerts','/upload-backup','Password\x20has\x20been\x20reset\x20to:\x20','argv','createServer','0.0.0','name','/output-000.log','getHours','sort','/restart\x20-\x20restart\x20bot(s)\x0a','running','store-configuration','util','type','3000','/:bot/coins','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Invalid\x20IP\x20address','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','createWriteStream','Telegram\x20error:','http','bb-settings.json','Restarting\x20Bot\x20','statSync','logs/','max','/metrics\x20-\x20show\x20bot\x20performance\x0a','Error:\x20Invalid\x20argument\x20','get-messages','username','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','hasOwnProperty','writeFileSync','Bot\x20','function','getFullYear','generateKeyPairAsync','store-fiat','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Alerts','bots','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','6747635qHOJxV','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','File\x20uploaded','Restoring\x20bot(s)\x20from\x20backup','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','storeConfiguration','loginRequired','initclient','user','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Restore\x20backup\x20file\x20','alias','add-bot','-performance.json','settings','30\x20min','login2fa_','exec','message','alerts','get-backup-files','apply','All','versions','Server','exit','exchange','accept','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','rmSync','7bIXqVz','15\x20min','toIPv4MappedAddress','copyFileSync','hybrid-crypto-js','getDate','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20add\x20bot','secure','1573832MzgwXj','allow','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','login\x20not\x20required','\x20mode','orders','HTML','Failed\x20to\x20download\x20','\x1b[35m','debug','reset-history','get-portfolio','portfolio_','password','login','remoteAddress','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','readFileSync','started','bb-config.json','new-disabled','callback','Temporary\x20access\x20rejected','privateKey','111324gPQQjc','delete-bot','User\x20has\x20been\x20validated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reinstall_yes','bb-secure.json','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','disable','keys','send','Restore\x20process\x20confirmed','version','enable','toString','yargs/yargs','temporary\x20access\x20timeout','token','telegrammsg','host','bbvNew','place-order','unlinkSync','request','emitHistory','init','\x1b[36m','sendMetricsTelegram','value','express','axios','ipc','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Starting\x20#RED#Balance\x20Bot\x20v','chat','toggle','post','min','Access\x20enabled\x20for\x20','temp/','/enable\x20-\x20enable\x20notifications\x0a','Bot\x20Mgr\x20>\x20','whitelistEnabled','emit','-----------------------------------------------------------------------------------','sign','Crypt','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','temporary\x20access\x20rejected','config','staging','botmanager','9ceAIfP','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','inherit','timestamp','<b>Balance\x20Bot\x20Status:</b>\x0a','graphql-request','decrypt','tempaccess_5','start','access','Starting\x20new\x20bot\x20|\x20Bot\x20','node','toggle-bot-mode','/help\x20-\x20show\x20available\x20commands\x0a','error','/:bot/performance','manual','compareSync','store','bot','number','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Idling\x20(','referer','generate','join','Disabled\x20Bot\x20','kind','build2','storeFiat','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','reply',':\x20Bot\x20Mgr\x20>\x20','title','sendMessage','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','=>\x20Go\x20to\x20#CYA#http://','help','Error\x20removing\x20old\x20backup\x20files:','You\x20can\x20use\x20the\x20following\x20commands:\x0a','#RES#\x20if\x20running\x20locally\x0a','Markdown','#RES#\x20if\x20running\x20on\x20server','sendFile','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','telegraf','fork','restore_yes','mixpanel','files','output-002.log','2FA\x20login\x20required','connected','Logged\x20in\x20user\x20...','Unauthorized\x20attempt\x20to\x20log\x20out','button','Setting\x20access:\x20','Token\x20blacklisted','Network\x20Interfaces:','editMessageReplyMarkup','\x20|\x20user:\x20...','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','bot-','tkn','stopped','notification','2507266FeZDBR','.zip','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','constructor','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Notifications\x20enabled','show-config','uuid-random','family','settings.','sendPortfolioTelegram','parse','Telegraf\x20error:','/start','Unauthorized\x20attempt\x20to\x20show\x20configuration','map','encryptedUuid','size','date-fns','node-zip','restart_','All\x20bots','bbPassword','reset-password','track','resetpw_yes','disabled','1112512ksrDRZ','telegramToken','apiPassword','replace','bcryptjs','botID','static','logs','lastmsgemitted','************','bot.js','headless','5\x20min','getMinutes','Notifications\x20disabled','clientip','No\x20authentication\x20token','file','/:bot/support','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','clients','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','use','2FA\x20login\x20token\x20generated','log','-events.json','tempaccess_15','27ZhQPYJ','telegram','resetpw_no','Session\x20expired\x20for\x20user\x20...','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','4698444TPUwmW','toggleBotMode','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','getPortfolio','range','child_process','command','Deleted\x20Bot\x20','all','telegramChatId','Invalid\x20authentication\x20token\x20(2)','output-000.log','config_all','Restore\x20process\x20aborted','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20download\x20','readdirSync','length','Logged\x20out\x20user\x20...','1000','isDirectory','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','index.html','sockets','update_no','Password\x20reset\x20rejected','split','\x1b[31m','remove','socket','blacklist','push','backup','event','existsSync','address','store-settings','logged\x20out','set','login\x20token\x20generated','text','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x1b[34m','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','cloneDeep','onepagemode','once','mkdirSync','action','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','f2aRequired','mode','secret','cancelLoading','test','padStart','::1','latestversion','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','delete-alerts','Error\x20while\x20deleting\x20config\x20files:\x20','getTime','inlineKeyboard','show','/status\x20-\x20show\x20bot(s)\x20status\x0a','live','Starting\x20(','toggle_','startsWith','No\x20bots\x20running\x20right\x20now','order','simple','isValid','endsWith',')\x20\x20\x20|\x20Bot\x20','apiSecret','\x20>\x20','showname','auto','output-001.log','stop','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Invalid\x20authentication\x20token\x20(1)','<b>Telegram\x20Bot\x20Status:</b>\x0a','telegramUsername','Notifications\x20disabled\x0a','backup-full@','telegram2FaApproval','includes','telegramEvents','updatebotmanager','Your\x20installation\x20is\x20already\x20up\x20to\x20date','hex','pidRefreshToken','confirm-message','version.json','metrics_','conn','reload','stringify','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','messages','15180nBJpde','tempaccess_30','headers','backupfile','getSeconds','path','hashSync','zip/','config_orders'];_0x4cec=function(){return _0x1ecfc9;};return _0x4cec();}function getBlacklist(){const _0x2419c4=_0x1b168a;return dbSecure[_0x2419c4(0x237)](_0x2419c4(0x174))[_0x2419c4(0x2c5)]()||[];}function broadcastToBots(_0x5b7925,_0x1724a3){const _0x1ec207=_0x1b168a;config[_0x1ec207(0x239)](_0x42c9d2=>{const _0x4659a1=_0x1ec207;if(_0x42c9d2['status']==_0x4659a1(0x1cc)&&_0x42c9d2['live']==_0x4659a1(0x249)||_0x42c9d2[_0x4659a1(0x1f8)]==_0x4659a1(0x221)&&_0x42c9d2[_0x4659a1(0x197)]=='running'){if(pid[_0x42c9d2[_0x4659a1(0x33f)]])pid[_0x42c9d2[_0x4659a1(0x33f)]]['send']({[_0x5b7925]:_0x1724a3});}});}function storeSettings(_0x3510d3,_0xef31bb=![]){const _0x50b97c=_0x1b168a;_0x3510d3={...settings,..._0x3510d3};if(_0xef31bb&&_0x3510d3[_0x50b97c(0x335)]!=_0x50b97c(0x343)&&_0x3510d3[_0x50b97c(0x335)]!='***'&&_0x3510d3['bbPassword']!=''){const _0x1e04e9=crypt[_0x50b97c(0x2e3)](secure[_0x50b97c(0x2a9)],_0x3510d3[_0x50b97c(0x335)])[_0x50b97c(0x27c)][_0x50b97c(0x170)]('@')[0x0],_0x44a0b1=bcrypt['hashSync'](_0x1e04e9,saltRounds);_0x3510d3={..._0x3510d3,'bbPassword':_0x44a0b1};}if(_0xef31bb&&_0x3510d3[_0x50b97c(0x33b)]!=_0x50b97c(0x343)&&_0x3510d3[_0x50b97c(0x33b)]!=_0x50b97c(0x22a)&&_0x3510d3['telegramToken']!=''){const _0x103d4f=crypt[_0x50b97c(0x2e3)](secure[_0x50b97c(0x2a9)],_0x3510d3['telegramToken'])[_0x50b97c(0x27c)][_0x50b97c(0x170)]('@')[0x0];_0x3510d3={..._0x3510d3,'telegramToken':_0x103d4f};}const _0x47ac75=_0x3510d3['telegramToken']!=_0x50b97c(0x343)&&_0x3510d3[_0x50b97c(0x33b)]!=settings[_0x50b97c(0x33b)]||_0x3510d3[_0x50b97c(0x1aa)]!=settings[_0x50b97c(0x1aa)],_0x33dca2=_0x3510d3['telegramToken']==''||_0x3510d3[_0x50b97c(0x1aa)]=='';_0x47ac75&&(_0x3510d3['telegramChatId']=null,_0x3510d3[_0x50b97c(0x1af)]=_0x50b97c(0x15e));for(const [_0x4d3707,_0x4211fb]of Object[_0x50b97c(0x225)](_0x3510d3)){if(_0x4d3707=='telegramToken'&&_0x4211fb=='************'){_0x3510d3[_0x50b97c(0x33b)]=settings[_0x50b97c(0x33b)];continue;};if(_0x4d3707==_0x50b97c(0x335)&&_0x4211fb==_0x50b97c(0x343)){_0x3510d3['bbPassword']=settings[_0x50b97c(0x335)];continue;};dbSettings[_0x50b97c(0x17c)](_0x50b97c(0x328)+_0x4d3707,_0x4211fb)[_0x50b97c(0x1cf)]();}settings=_0x3510d3,io['to'](_0x50b97c(0x2dc))[_0x50b97c(0x2d4)]('settings',cleanSettings()),broadcastToBots(_0x50b97c(0x1f4),settings['timeshift']),broadcastToBots(_0x50b97c(0x183),settings[_0x50b97c(0x183)]);if(_0x47ac75&&!_0x33dca2)initTelegram();if(_0x47ac75&&_0x33dca2)disableTelegram();getAllClients()[_0x50b97c(0x239)](_0x2aff24=>{const _0x2d90df=_0x50b97c;getSocket(_0x2aff24['id'])['emit'](_0x2d90df(0x1f8),{'access':{'allow':![],'reason':_0x2d90df(0x1b8),'token':null}});});}function updateSetting(_0x75f977,_0x26eae2){const _0x13fb09=_0x1b168a;dbSettings[_0x13fb09(0x17c)]('settings.'+_0x75f977,_0x26eae2)[_0x13fb09(0x1cf)](),settings=getSettings(),io['to'](_0x13fb09(0x2dc))[_0x13fb09(0x2d4)]('settings',cleanSettings());}function storeSecure(_0x41a249){const _0x48d75a=_0x1b168a;dbSecure['get'](_0x48d75a(0x290))[_0x48d75a(0x175)](_0x41a249)[_0x48d75a(0x1cf)](),secure=_0x41a249;}function addBlacklist(_0x33079d){const _0x1bcd43=_0x1b168a;cleanBlacklist();let _0xa104e9;devices[_0x33079d][_0x1bcd43(0x21a)]?_0xa104e9=Math[_0x1bcd43(0x259)](devices[_0x33079d][_0x1bcd43(0x21a)][_0x1bcd43(0x201)],loginExpiry):_0xa104e9=loginExpiry,dbSecure[_0x1bcd43(0x237)](_0x1bcd43(0x174))['push']({'expiry':new Date()[_0x1bcd43(0x193)]()+_0xa104e9*0x3c*0x3e8,'token':devices[_0x33079d][_0x1bcd43(0x2e6)]['token']})[_0x1bcd43(0x1cf)](),blacklist=dbSecure[_0x1bcd43(0x237)](_0x1bcd43(0x174))['value']();}function cleanBlacklist(){const _0x10a49a=_0x1b168a;let _0x384f3c=dbSecure[_0x10a49a(0x237)](_0x10a49a(0x174))[_0x10a49a(0x182)]()[_0x10a49a(0x2c5)](),_0x13e7f2=new Date()[_0x10a49a(0x193)]();_0x384f3c[_0x10a49a(0x239)](_0x5a66fc=>{const _0x59364a=_0x10a49a;_0x5a66fc['expiry']<_0x13e7f2&&dbSecure[_0x59364a(0x237)](_0x59364a(0x174))[_0x59364a(0x172)]({'expiry':_0x5a66fc[_0x59364a(0x201)]})[_0x59364a(0x1cf)]();});}function initStates(){const _0xc25174=_0x1b168a;let _0x44ba7a=getConfiguration();_0x44ba7a[_0xc25174(0x239)](_0xe24f8b=>{const _0x1cfae5=_0xc25174;_0xe24f8b[_0x1cfae5(0x197)]=_0x1cfae5(0x31d);}),storeConfiguration(_0x44ba7a);}function onKeys(){const _0x588a9a=new RSA();return new Promise(_0x4e8be6=>{const _0x33a0a8=_0xbf39;_0x588a9a[_0x33a0a8(0x264)]()['then'](_0x302880=>{_0x4e8be6(_0x302880);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4e4633=_0x1b168a;let _0x48c79=getSettings(),_0x5f3e2e=![];!_0x48c79[_0x4e4633(0x25f)](_0x4e4633(0x28e))&&(_0x48c79[_0x4e4633(0x28e)]=0x0,_0x5f3e2e=!![]);!_0x48c79[_0x4e4633(0x25f)](_0x4e4633(0x342))&&(_0x48c79[_0x4e4633(0x342)]=0x0,_0x5f3e2e=!![]);!_0x48c79[_0x4e4633(0x25f)]('latestversion')&&(_0x48c79[_0x4e4633(0x18f)]=_0x4e4633(0x243),_0x5f3e2e=!![]);!_0x48c79[_0x4e4633(0x25f)](_0x4e4633(0x183))&&(_0x48c79[_0x4e4633(0x183)]=![],_0x5f3e2e=!![]);if(_0x5f3e2e)storeSettings(_0x48c79);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x4e4633(0x239)](_0x23f5cb=>{const _0x3432c7=_0x4e4633;if(!_0x23f5cb[_0x3432c7(0x16a)]()){if(!_0x23f5cb['name'][_0x3432c7(0x19a)](_0x3432c7(0x1ac)))fs[_0x3432c7(0x2bf)](configbackuppath+_0x23f5cb[_0x3432c7(0x244)]);}else fs[_0x3432c7(0x287)](configbackuppath+_0x23f5cb[_0x3432c7(0x244)],{'recursive':!![]});});}catch(_0xea69fb){logger[_0x4e4633(0x29a)](_0x4e4633(0x303),_0xea69fb);}}function storeConfiguration(_0x2b709a){const _0x1ab324=_0x1b168a;dbConfig['get'](_0x1ab324(0x268))['remove']()[_0x1ab324(0x1cf)](),dbConfig[_0x1ab324(0x237)](_0x1ab324(0x268))[_0x1ab324(0x175)](..._0x2b709a)[_0x1ab324(0x1cf)](),config=_0x2b709a;}function resetPassword(){const _0x54b515=_0x1b168a;if(tgBot&&settings[_0x54b515(0x15f)]){const _0x2a7db2=Markup[_0x54b515(0x194)]([Markup['button']['callback']('yes',_0x54b515(0x338)),Markup[_0x54b515(0x314)][_0x54b515(0x2a7)]('no',_0x54b515(0x153))]);sendTelegram(settings[_0x54b515(0x15f)],_0x54b515(0x16b),_0x2a7db2),tgBot[_0x54b515(0x186)](/resetpw_(.+)/,async _0x475307=>{const _0x442599=_0x54b515,_0x502c7e=_0x475307['match'][0x1];_0x475307[_0x442599(0x318)]();if(_0x502c7e!='no'){const _0x171ba2=0xf,_0x4bd6a5=_0x442599(0x17f),_0x992b44=Array[_0x442599(0x227)](crypto['randomFillSync'](new Uint32Array(_0x171ba2)))[_0x442599(0x32e)](_0x1431fe=>_0x4bd6a5[_0x1431fe%_0x4bd6a5[_0x442599(0x167)]])[_0x442599(0x2f6)](''),_0x588865=bcrypt[_0x442599(0x1c2)](_0x992b44,saltRounds);storeSettings({'bbPassword':_0x588865}),await sendTelegram(_0x475307['chat']['id'],_0x442599(0x240)+_0x992b44,{'parse_mode':_0x442599(0x297)});}else await sendTelegram(_0x475307[_0x442599(0x2cb)]['id'],_0x442599(0x16f));});}}async function confirmRestore(_0xf0834e,_0x22e18c){const _0x378ca1=_0x1b168a;io['to'](_0x378ca1(0x2dc))['emit'](_0x378ca1(0x31e),_0x378ca1(0x21f),'success');if(tgBot&&settings['telegramChatId']){const _0x55fb9c=Markup[_0x378ca1(0x194)]([Markup['button'][_0x378ca1(0x2a7)](_0x378ca1(0x1e9),_0x378ca1(0x30c)),Markup[_0x378ca1(0x314)][_0x378ca1(0x2a7)]('no','restore_no')]);sendTelegram(settings[_0x378ca1(0x15f)],_0x378ca1(0x323),_0x55fb9c),tgBot['action'](/restore_(.+)/,async _0x39eb53=>{const _0x529e52=_0x378ca1,_0x2b4fda=_0x39eb53[_0x529e52(0x1de)][0x1];_0x39eb53[_0x529e52(0x318)](),_0x2b4fda==_0x529e52(0x1e9)?(logger[_0x529e52(0x29a)](_0x529e52(0x2b4)),await sendTelegram(_0x39eb53[_0x529e52(0x2cb)]['id'],_0x529e52(0x26d),{'parse_mode':_0x529e52(0x297)}),unzipFile(_0xf0834e,_0x22e18c)):(logger[_0x529e52(0x29a)](_0x529e52(0x163)),await sendTelegram(_0x39eb53['chat']['id'],_0x529e52(0x163)));});}}function getServerTime(){const _0x4ef392=_0x1b168a,_0x31df20=new Date();return _0x31df20[_0x4ef392(0x263)]()+'/'+(_0x31df20[_0x4ef392(0x215)]()+0x1)[_0x4ef392(0x2b7)]()[_0x4ef392(0x18d)](0x2,'0')+'/'+_0x31df20[_0x4ef392(0x28d)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x31df20[_0x4ef392(0x246)]()[_0x4ef392(0x2b7)]()[_0x4ef392(0x18d)](0x2,'0')+':'+_0x31df20[_0x4ef392(0x347)]()[_0x4ef392(0x2b7)]()[_0x4ef392(0x18d)](0x2,'0')+':'+_0x31df20[_0x4ef392(0x1c0)]()[_0x4ef392(0x2b7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5eb0f1=_0x1b168a,_0x444567=shiftedTime();return _0x444567[_0x5eb0f1(0x263)]()+'/'+(_0x444567[_0x5eb0f1(0x215)]()+0x1)[_0x5eb0f1(0x2b7)]()['padStart'](0x2,'0')+'/'+_0x444567['getDate']()[_0x5eb0f1(0x2b7)]()['padStart'](0x2,'0')+'\x20'+_0x444567[_0x5eb0f1(0x246)]()[_0x5eb0f1(0x2b7)]()[_0x5eb0f1(0x18d)](0x2,'0')+':'+_0x444567[_0x5eb0f1(0x347)]()[_0x5eb0f1(0x2b7)]()[_0x5eb0f1(0x18d)](0x2,'0')+':'+_0x444567[_0x5eb0f1(0x1c0)]()[_0x5eb0f1(0x2b7)]()[_0x5eb0f1(0x18d)](0x2,'0');}function getCleanTimeStamp(){const _0x1d6574=_0x1b168a,_0x4744ce=shiftedTime();return _0x4744ce[_0x1d6574(0x263)]()+(_0x4744ce[_0x1d6574(0x215)]()+0x1)['toString']()[_0x1d6574(0x18d)](0x2,'0')+_0x4744ce[_0x1d6574(0x28d)]()['toString']()['padStart'](0x2,'0')+'-'+_0x4744ce[_0x1d6574(0x246)]()['toString']()[_0x1d6574(0x18d)](0x2,'0')+_0x4744ce[_0x1d6574(0x347)]()[_0x1d6574(0x2b7)]()[_0x1d6574(0x18d)](0x2,'0')+_0x4744ce[_0x1d6574(0x1c0)]()[_0x1d6574(0x2b7)]()[_0x1d6574(0x18d)](0x2,'0');}function shiftedTime(){const _0x2765ff=_0x1b168a,_0x567136=new Date();let _0x24a489=_0x567136;if(settings[_0x2765ff(0x1f4)]&&settings[_0x2765ff(0x1f4)]!==0x0)_0x24a489=fns[_0x2765ff(0x228)](_0x567136,{'hours':settings[_0x2765ff(0x1f4)]});return _0x24a489;}function startScheduler(){const _0xb149a9=new Date()['getUTCHours'](),_0x55d012=shiftedTime()['getHours']();_0x55d012==0x4&&backupConfigFiles();_0x55d012==0x0&&rotateLogFiles();_0xb149a9%0x6==0x0&&triggerAnalytics();_0xb149a9%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2509fe){const _0x39f755=_0x1b168a;logger[_0x39f755(0x29a)](_0x39f755(0x274)+_0x2509fe);const _0x5b0563=getBotsWithMode();_0x5b0563[_0x39f755(0x167)]>0x0?confirmRestore(configbackuppath,_0x2509fe):unzipFile(configbackuppath,_0x2509fe);}async function getBackupFiles(_0x20fed9=null){const _0x2f28bd=_0x1b168a;let _0x2010d7=[],_0x7fbfeb=fs[_0x2f28bd(0x166)](configbackuppath,{'withFileTypes':!![]});_0x7fbfeb[_0x2f28bd(0x247)]((_0x4c5eb5,_0x44488f)=>_0x4c5eb5[_0x2f28bd(0x244)]<_0x44488f[_0x2f28bd(0x244)]?0x1:_0x44488f[_0x2f28bd(0x244)]<_0x4c5eb5['name']?-0x1:0x0),_0x7fbfeb['forEach'](_0x2900f8=>{const _0x1541ba=_0x2f28bd;if(!_0x2900f8[_0x1541ba(0x16a)]()&&_0x2900f8['name'][_0x1541ba(0x19a)]('backup-full@')&&_0x2900f8[_0x1541ba(0x244)][_0x1541ba(0x19f)]('.zip')){const _0x529104=formatDate(fs[_0x1541ba(0x257)](configbackuppath+_0x2900f8['name'])[_0x1541ba(0x219)]);_0x2010d7[_0x1541ba(0x175)]({'name':_0x2900f8['name'],'mtime':_0x529104});}});if(_0x20fed9)io['to'](_0x20fed9)['emit']('backup-files',_0x2010d7);else return _0x2010d7;}async function backupConfigFiles(){const _0x175358=_0x1b168a;await zipFiles(_0x175358(0x208));const _0x3348dd=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+(_0x175358(0x1ac)+_0x3348dd+_0x175358(0x320)));let _0x5159fd=fs[_0x175358(0x166)](configbackuppath,{'withFileTypes':!![]});_0x5159fd[_0x175358(0x247)]((_0x308e2d,_0x4efc8d)=>_0x308e2d[_0x175358(0x244)]<_0x4efc8d[_0x175358(0x244)]?0x1:_0x4efc8d[_0x175358(0x244)]<_0x308e2d['name']?-0x1:0x0),_0x5159fd['length']>maxBackups&&fs[_0x175358(0x2bf)](configbackuppath+_0x5159fd[_0x5159fd[_0x175358(0x167)]-0x1][_0x175358(0x244)]);}function rotateLogFiles(){const _0x2ee2e9=_0x1b168a,_0x558519=fs[_0x2ee2e9(0x257)](logspath+_0x2ee2e9(0x161)),_0x2baafe=_0x558519[_0x2ee2e9(0x330)]/0x400;if(_0x2baafe>0x64){let _0x443a9d=fs[_0x2ee2e9(0x166)](logspath,{'withFileTypes':!![]});_0x443a9d['sort']((_0x23958a,_0x4454d1)=>_0x23958a['name']<_0x4454d1[_0x2ee2e9(0x244)]?0x1:_0x4454d1[_0x2ee2e9(0x244)]<_0x23958a[_0x2ee2e9(0x244)]?-0x1:0x0),_0x443a9d[_0x2ee2e9(0x239)](_0x426ed0=>{const _0x568a71=_0x2ee2e9;if(_0x426ed0[_0x568a71(0x244)]==_0x568a71(0x30f))fs['copyFileSync'](logspath+_0x426ed0[_0x568a71(0x244)],logspath+'output-003.log');if(_0x426ed0[_0x568a71(0x244)]==_0x568a71(0x1a5))fs[_0x568a71(0x28b)](logspath+_0x426ed0[_0x568a71(0x244)],logspath+'output-002.log');_0x426ed0[_0x568a71(0x244)]=='output-000.log'&&(fs[_0x568a71(0x28b)](logspath+_0x426ed0['name'],logspath+_0x568a71(0x1a5)),fs[_0x568a71(0x260)](logspath+_0x426ed0[_0x568a71(0x244)],''));});}}async function zipFiles(_0x7d38ea){const _0x35cb8c=_0x1b168a;let _0x3d86d1;if(_0x7d38ea==_0x35cb8c(0x341))_0x3d86d1=logspath;if(_0x7d38ea=='backup')_0x3d86d1=configpath;if(_0x7d38ea=='backup-full')_0x3d86d1=configpath;let _0x5d6c4e=fs[_0x35cb8c(0x166)](_0x3d86d1,{'withFileTypes':!![]});const _0xb3f037=new require(_0x35cb8c(0x332))();_0x5d6c4e[_0x35cb8c(0x239)](_0x2d66f6=>{const _0x53b0ee=_0x35cb8c;if(!_0x2d66f6[_0x53b0ee(0x16a)]()){let _0x2f3eb5=fs[_0x53b0ee(0x2a3)](_0x3d86d1+_0x2d66f6[_0x53b0ee(0x244)]);if(_0x7d38ea==_0x53b0ee(0x176)){const _0x3a0323=/^bot-[0-9]{3}-config.json$/,_0x517e09=_0x3a0323[_0x53b0ee(0x18c)](_0x2d66f6[_0x53b0ee(0x244)]);if(_0x517e09){const _0x7a1b15=JSON[_0x53b0ee(0x32a)](_0x2f3eb5);if(_0x7a1b15[_0x53b0ee(0x2f0)][0x0]){_0x7a1b15[_0x53b0ee(0x2f0)][0x0][_0x53b0ee(0x203)]=_0x53b0ee(0x22a),_0x7a1b15[_0x53b0ee(0x2f0)][0x0][_0x53b0ee(0x1a1)]=_0x53b0ee(0x22a);if(_0x7a1b15['bot'][0x0]['apiPassword'])_0x7a1b15[_0x53b0ee(0x2f0)][0x0][_0x53b0ee(0x33c)]=_0x53b0ee(0x22a);}_0x2f3eb5=JSON[_0x53b0ee(0x1b9)](_0x7a1b15,null,0x2);}if(_0x2d66f6['name']==_0x53b0ee(0x255)){const _0x25144b=JSON[_0x53b0ee(0x32a)](_0x2f3eb5);if(_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x270)])_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x270)]=![];if(_0x25144b['settings'][_0x53b0ee(0x335)])_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x335)]=_0x53b0ee(0x22a);if(_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x33b)])_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x33b)]=_0x53b0ee(0x22a);if(_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x15f)])_0x25144b[_0x53b0ee(0x278)][_0x53b0ee(0x15f)]=null;_0x2f3eb5=JSON[_0x53b0ee(0x1b9)](_0x25144b,null,0x2);}if(_0x2d66f6[_0x53b0ee(0x244)]!='bb-secure.json')_0xb3f037['file'](_0x2d66f6['name'],_0x2f3eb5);}else _0xb3f037[_0x53b0ee(0x147)](_0x2d66f6[_0x53b0ee(0x244)],_0x2f3eb5);}});const _0x4f9491=_0xb3f037[_0x35cb8c(0x2f5)]({'base64':![],'compression':_0x35cb8c(0x1cb)});fs[_0x35cb8c(0x260)](zippath+(_0x7d38ea+_0x35cb8c(0x320)),_0x4f9491,'binary');}async function unzipFile(_0x2ffb86,_0x569ef7){const _0x3c892d=_0x1b168a;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3c892d(0x239)](_0x483f8b=>{const _0x1fbf0a=_0x3c892d;if(!_0x483f8b[_0x1fbf0a(0x16a)]())fs['rmSync'](configpath+_0x483f8b['name']);});const _0x243750=fs['readFileSync'](_0x2ffb86+_0x569ef7,_0x3c892d(0x234)),_0x5ef3ae=new require(_0x3c892d(0x332))(_0x243750,{'base64':![],'checkCRC32':!![]});Object[_0x3c892d(0x2b2)](_0x5ef3ae[_0x3c892d(0x30e)])['forEach'](_0x5dfdec=>{const _0x383a2f=_0x3c892d,_0x5e217c=_0x5ef3ae[_0x383a2f(0x30e)][_0x5dfdec];fs[_0x383a2f(0x260)](configpath+_0x5e217c[_0x383a2f(0x244)],_0x5e217c[_0x383a2f(0x20b)]);}),fs[_0x3c892d(0x166)](temppath,{'withFileTypes':!![]})[_0x3c892d(0x239)](_0x44250c=>{const _0x3edef8=_0x3c892d;if(!_0x44250c[_0x3edef8(0x16a)]())fs[_0x3edef8(0x287)](temppath+_0x44250c[_0x3edef8(0x244)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x3c892d(0x2b3)]({'restore':!![]},_0x55fb67=>{});}async function getPublicIp(){const _0x536976=_0x1b168a;try{const _0x3a66d9=await axios[_0x536976(0x237)]('https://api.ipify.org?format=json');publicip=_0x3a66d9['data']['ip'];}catch(_0x8782d2){}}async function triggerAnalytics(){const _0x14a200=_0x1b168a;if(!publicip)await getPublicIp();const _0x5c4337=getBotsWithMode();let _0x4ca2cc=0x0;_0x5c4337[_0x14a200(0x239)](_0x3e576b=>{const _0x2bfc88=_0x14a200;if(_0x3e576b[_0x2bfc88(0x1f8)]===_0x2bfc88(0x1cc))_0x4ca2cc++;});const _0x5d2bb4=getBotExchanges();mixpanel[_0x14a200(0x337)](_0x14a200(0x282),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x5c4337['length'],'numbotsenabled':_0x4ca2cc,'exchanges':_0x5d2bb4,'environment':environment});}async function getMessages(){const _0x513e16=_0x1b168a,_0x11b070=_0x513e16(0x273),_0x338d23=new GraphQLClient(_0x11b070),_0x29af1a={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x580892=serverversion[_0x513e16(0x170)]('.'),_0x64c3b2=_0x580892[0x0]+'.'+_0x580892[0x1],_0x4cee97=Math[_0x513e16(0x2ce)](settings[_0x513e16(0x28e)],settings[_0x513e16(0x342)]),_0x4ad33f={'last':parseInt(_0x4cee97),'bbm':_0x64c3b2},_0x227a6a=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1ba34e;try{_0x1ba34e=await _0x338d23[_0x513e16(0x2c0)](_0x227a6a,_0x4ad33f,_0x29af1a);}catch(_0x9d1742){}if(_0x1ba34e&&_0x1ba34e[_0x513e16(0x1bb)]){let _0x4b8fb3=settings[_0x513e16(0x28e)];newMessages=[];for(const _0x1ffaec of _0x1ba34e[_0x513e16(0x1bb)]){newMessages[_0x513e16(0x175)](_0x1ffaec);let _0x14cd71=![];_0x1ffaec['bbvNew']&&(updateSetting('latestversion',_0x1ffaec[_0x513e16(0x2bd)]),_0x14cd71=isNewerVersion(serverversion,_0x1ffaec['bbvNew'])||serverversion==_0x1ffaec['bbvNew']);if(!_0x14cd71&&_0x1ffaec[_0x513e16(0x2f1)]>_0x4b8fb3){if(_0x1ffaec['bbvReceive']===_0x513e16(0x220)||serverversion['startsWith'](_0x1ffaec['bbvReceive'])){let _0x5a8d52=''+_0x1ffaec[_0x513e16(0x2fe)]+'\x0a\x0a'+_0x1ffaec[_0x513e16(0x27c)];const _0x57dce8=await sendTelegramMsg(toTelegramMarkdown(_0x5a8d52),_0x513e16(0x306));if(_0x57dce8)_0x4b8fb3=_0x1ffaec[_0x513e16(0x2f1)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x513e16(0x28e),_0x4b8fb3),emitMessages();}}function emitMessages(){const _0x1d3230=_0x1b168a,_0x432a7d=settings[_0x1d3230(0x342)];let _0x21922a=[];newMessages['forEach'](_0x401259=>{const _0x3e18d6=_0x1d3230;_0x401259[_0x3e18d6(0x2f1)]>_0x432a7d&&_0x21922a[_0x3e18d6(0x175)](_0x401259);}),_0x21922a['length']>0x0&&getAllClients()[_0x1d3230(0x239)](_0x26ec05=>{const _0x527199=_0x1d3230;getSocket(_0x26ec05['id'])[_0x527199(0x2d4)]('message',_0x21922a);});}function confirmMessage(_0x4912bc){const _0x3c7ccf=_0x1b168a;updateSetting(_0x3c7ccf(0x342),Number(_0x4912bc));}function isNewerVersion(_0x4917d9,_0x405780){const _0x2d4c04=_0x1b168a,_0x233c2d=_0x405780[_0x2d4c04(0x170)]('.'),_0xef391e=_0x4917d9[_0x2d4c04(0x170)]('.');for(var _0x324d48=0x0;_0x324d48<_0xef391e['length'];_0x324d48++){const _0x3387ef=~~_0xef391e[_0x324d48],_0x2a3c08=~~_0x233c2d[_0x324d48];if(_0x3387ef>_0x2a3c08)return!![];if(_0x3387ef<_0x2a3c08)return![];}return![];}function toTelegramMarkdown(_0xe711af){const _0x14ffd9=_0x1b168a,_0x1fb7bc=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5bf3b1=/\*{2}(.+?)\*{2}/gim;return _0xe711af=_0xe711af['replace'](_0x1fb7bc,_0x14ffd9(0x1e0))['replace'](_0x5bf3b1,'*$1*'),_0xe711af;}async function validateConfigFile(){const _0x2cc567=_0x1b168a,_0x1839e3=dbConfig[_0x2cc567(0x237)](_0x2cc567(0x268))[_0x2cc567(0x1d5)](_0x2cc567(0x33f))['value']()||[];if(_0x1839e3[_0x2cc567(0x167)]==0x0){let _0x109c5f=0x0,_0xf9b406=[];const _0xd06b1a=/^bot-([0-9]{3})-config.json$/,_0x3932d=fs[_0x2cc567(0x166)](configpath);_0x3932d[_0x2cc567(0x239)](_0x38f2b8=>{const _0x5e3908=_0x2cc567,_0x5529b5=_0xd06b1a[_0x5e3908(0x27b)](_0x38f2b8);if(_0x5529b5){const _0x45f1c8=_0x5529b5[0x1];let _0x21d8fc=getBotAttributes(_0x45f1c8);_0xf9b406[_0x5e3908(0x175)]({'botID':_0x45f1c8,'botname':_0x21d8fc[_0x5e3908(0x232)],'status':_0x5e3908(0x339),'live':_0x5e3908(0x31d)}),_0x109c5f++;}}),_0x109c5f!=0x0&&(dbConfig[_0x2cc567(0x237)](_0x2cc567(0x268))[_0x2cc567(0x20a)](_0xf9b406)[_0x2cc567(0x1cf)](),config=_0xf9b406,restoredConfigFile=_0x109c5f);}}async function restoreConfigNotify(_0x42dc01){const _0xeb3ab6=_0x1b168a;let _0x2ff88a;if(restoredConfigFile==0x1)_0x2ff88a='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x2ff88a=_0xeb3ab6(0x286);if(_0x42dc01)io['to'](_0xeb3ab6(0x2dc))[_0xeb3ab6(0x2d4)](_0xeb3ab6(0x31e),_0x2ff88a);else{logger['simple'](_0xeb3ab6(0x2d5)),logger[_0xeb3ab6(0x19d)](_0x2ff88a),logger['simple'](_0xeb3ab6(0x2d5)),logger['simple']('');if(tgBot&&settings[_0xeb3ab6(0x15f)]&&settings[_0xeb3ab6(0x1af)]!=_0xeb3ab6(0x296))sendTelegram(settings[_0xeb3ab6(0x15f)],_0xeb3ab6(0x2d2)+_0x2ff88a);}}function validateCredentials(_0xf932f5,_0x2c38ba){const _0x2c8e86=_0x1b168a;if(_0xf932f5[_0x2c8e86(0x25d)]==settings['bbUsername']&&bcrypt[_0x2c8e86(0x2ee)](_0xf932f5[_0x2c8e86(0x29e)],settings['bbPassword'])){if(settings[_0x2c8e86(0x188)])return{'allow':![],'reason':_0x2c8e86(0x310),'token':null};else{const _0x187250=generateLoginToken(_0x2c38ba);return{'allow':!![],'reason':_0x2c8e86(0x17d),'token':_0x187250};}}else return{'allow':![],'reason':_0x2c8e86(0x202),'token':null};}function refreshToken(_0x16cd10){const _0x3f172c=generateLoginToken(_0x16cd10);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3f172c};}function validateAccess(_0x56febd,_0xdf8127,_0x52808e){const _0x4bec69=_0x1b168a,_0x25f9bb=_0x52808e?_0x52808e:devices[_0xdf8127]['ip'];let _0x34c560;const _0x288422=_0x1865e0=>{const _0x43931f=_0xbf39;if(settings[_0x43931f(0x270)]){if(settings[_0x43931f(0x188)]){if(telegram2FaApproved(_0xdf8127)){const _0x37ea40=generateLoginToken(_0xdf8127);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x37ea40};}else return{'allow':![],'reason':_0x43931f(0x1d2),'token':null};}else return _0x34c560=validToken(_0x1865e0,_0xdf8127),_0x34c560[_0x43931f(0x25f)](_0x43931f(0x1fe))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1865e0}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x43931f(0x294),'token':null};};if(settings[_0x4bec69(0x2d3)]){let _0x3db5ac=[...settings[_0x4bec69(0x205)],_0x4bec69(0x18e),'::ffff:127.0.0.1',_0x4bec69(0x224)];if(_0x3db5ac[_0x4bec69(0x1ae)](_0x25f9bb))return _0x288422(_0x56febd);else{_0x34c560=validToken(_0x56febd,_0xdf8127);if(_0x34c560[_0x4bec69(0x25f)](_0x4bec69(0x1fe)))return _0x288422(_0x56febd);else{if(telegramIpApproved(_0xdf8127)){const _0x980fc6=generateToken(_0xdf8127);return _0x34c560=_0x288422(_0x56febd),_0x34c560[_0x4bec69(0x292)]?{'allow':!![],'reason':_0x4bec69(0x206),'token':_0x980fc6}:_0x34c560;}else return settings[_0x4bec69(0x1e3)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x288422(_0x56febd);}function timelyDecrypt(_0x1a2923,_0x194935=!![]){const _0x2d0bea=_0x1b168a;if(_0x1a2923)try{const _0x247714=crypt[_0x2d0bea(0x2e3)](secure[_0x2d0bea(0x2a9)],_0x1a2923)[_0x2d0bea(0x27c)],_0x40ecf3=_0x247714[_0x2d0bea(0x170)]('@')[0x0],_0x17f078=_0x247714[_0x2d0bea(0x170)]('@')[0x1],_0x52359e=new Date()['getTime']();if(_0x194935){if(_0x52359e-_0x17f078<maxSecretAge*0x3e8)return _0x40ecf3;else return![];}else return _0x40ecf3;}catch(_0x19d070){return![];}else return![];}const validToken=(_0x3f0eac,_0x5da86b)=>{const _0x2266d4=_0x1b168a,_0x3970c3=devices[_0x5da86b]['ip'];if(!_0x3f0eac)return{'error':_0x2266d4(0x34a)};for(let _0x17b2aa of blacklist){if(_0x17b2aa[_0x2266d4(0x2ba)]==_0x3f0eac)return{'error':_0x2266d4(0x316)};}let _0x3c400f;try{_0x3c400f=jwt[_0x2266d4(0x21d)](_0x3f0eac,secure[_0x2266d4(0x18a)]+_0x5da86b);}catch{return{'error':_0x2266d4(0x1a8)};}if(!_0x3c400f['hasOwnProperty'](_0x2266d4(0x349))&&!_0x3c400f[_0x2266d4(0x25f)](_0x2266d4(0x25d))||!_0x3c400f[_0x2266d4(0x25f)](_0x2266d4(0x1ff)))return{'error':_0x2266d4(0x160)};if(!_0x3c400f['hasOwnProperty'](_0x2266d4(0x25d))&&_0x3c400f[_0x2266d4(0x25f)](_0x2266d4(0x349))){const {clientip:_0x19a13c}=_0x3c400f;return _0x3970c3==_0x19a13c?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2266d4(0x250)};}else{if(_0x3c400f[_0x2266d4(0x25f)](_0x2266d4(0x25d))&&_0x3c400f[_0x2266d4(0x25f)](_0x2266d4(0x349))){const {username:_0x9de856,clientip:_0x20e720}=_0x3c400f;return settings[_0x2266d4(0x231)]==_0x9de856&&_0x3970c3==_0x20e720?{'success':_0x2266d4(0x2ac)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x273419=>{const _0xed3d7d=_0x1b168a;if(_0x273419){const _0x2f5ed3=devices[_0x273419]['ip'];return jwt[_0xed3d7d(0x2d6)]({'username':settings['bbUsername'],'clientip':_0x2f5ed3},secure[_0xed3d7d(0x18a)]+_0x273419,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x597e30=>{const _0xe10191=_0x1b168a;if(_0x597e30){const _0xa2e39c=devices[_0x597e30]['ip'];return jwt['sign']({'clientip':_0xa2e39c},secure[_0xe10191(0x18a)]+_0x597e30,{'expiresIn':devices[_0x597e30][_0xe10191(0x21a)][_0xe10191(0x201)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x22802b=>{const _0x3ad88a=_0x1b168a;let _0x564e84=![];return devices[_0x22802b][_0x3ad88a(0x21a)]&&devices[_0x22802b][_0x3ad88a(0x21a)]['expiry']!='reject'&&(_0x564e84=devices[_0x22802b][_0x3ad88a(0x21a)]['clientip']==devices[_0x22802b]['ip']&&new Date()['getTime']()-devices[_0x22802b][_0x3ad88a(0x21a)][_0x3ad88a(0x2e0)]<devices[_0x22802b][_0x3ad88a(0x21a)]['expiry']*0x3c*0x3e8),_0x564e84;},telegram2FaApproved=_0x3a2749=>{const _0x5f4f14=_0x1b168a;let _0x535840=![];return devices[_0x3a2749][_0x5f4f14(0x1ad)]&&devices[_0x3a2749][_0x5f4f14(0x1ad)]['expiry']!='reject'&&(_0x535840=devices[_0x3a2749]['telegram2FaApproval'][_0x5f4f14(0x349)]==devices[_0x3a2749]['ip']&&new Date()[_0x5f4f14(0x193)]()-devices[_0x3a2749]['telegram2FaApproval'][_0x5f4f14(0x2e0)]<devices[_0x3a2749][_0x5f4f14(0x1ad)][_0x5f4f14(0x201)]*0x3c*0x3e8),_0x535840;},normalizeIP=_0x3a076a=>{const _0x5bd187=_0x1b168a;let _0x405fe8=null,_0x34240c=null;if(ipaddr[_0x5bd187(0x19e)](_0x3a076a)){const _0x1f829b=ipaddr[_0x5bd187(0x32a)](_0x3a076a);_0x1f829b[_0x5bd187(0x2f8)]()==='ipv6'?(_0x1f829b[_0x5bd187(0x1fb)]()&&(_0x405fe8=_0x1f829b['toIPv4Address']()[_0x5bd187(0x2b7)]()),_0x34240c=_0x1f829b[_0x5bd187(0x2b7)]()):(_0x405fe8=_0x1f829b[_0x5bd187(0x2b7)](),_0x34240c=_0x1f829b[_0x5bd187(0x28a)]()[_0x5bd187(0x2b7)]());}return{'show':_0x405fe8?_0x405fe8:_0x34240c,'store':_0x34240c};};function formatDate(_0x2fad72){const _0x472510=_0x1b168a;return _0x2fad72['getFullYear']()+'/'+(_0x2fad72[_0x472510(0x215)]()+0x1)[_0x472510(0x2b7)]()['padStart'](0x2,'0')+'/'+_0x2fad72[_0x472510(0x28d)]()[_0x472510(0x2b7)]()[_0x472510(0x18d)](0x2,'0')+'\x20'+_0x2fad72[_0x472510(0x246)]()[_0x472510(0x2b7)]()['padStart'](0x2,'0')+':'+_0x2fad72[_0x472510(0x347)]()['toString']()['padStart'](0x2,'0')+':'+_0x2fad72['getSeconds']()[_0x472510(0x2b7)]()[_0x472510(0x18d)](0x2,'0');}function sleep(_0x44826e){return new Promise(_0x195003=>setTimeout(_0x195003,_0x44826e));}