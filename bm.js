const _0x43ee73=_0x38d3;(function(_0x5973ab,_0xf33eba){const _0x4ba8c8=_0x38d3,_0x549a40=_0x5973ab();while(!![]){try{const _0x4dfa26=parseInt(_0x4ba8c8(0x23e))/0x1*(-parseInt(_0x4ba8c8(0x178))/0x2)+parseInt(_0x4ba8c8(0x1a6))/0x3+-parseInt(_0x4ba8c8(0x15e))/0x4+-parseInt(_0x4ba8c8(0x189))/0x5+-parseInt(_0x4ba8c8(0x1ea))/0x6+-parseInt(_0x4ba8c8(0x1d2))/0x7*(parseInt(_0x4ba8c8(0x1e5))/0x8)+-parseInt(_0x4ba8c8(0x22a))/0x9*(-parseInt(_0x4ba8c8(0x1b6))/0xa);if(_0x4dfa26===_0xf33eba)break;else _0x549a40['push'](_0x549a40['shift']());}catch(_0x3cb1b2){_0x549a40['push'](_0x549a40['shift']());}}}(_0x1b8e,0xc5314));const _0x262166=function(){let _0x2bf5be=!![];return function(_0x59602d,_0x5805fd){const _0x1c4d39=_0x2bf5be?function(){if(_0x5805fd){const _0x23dc59=_0x5805fd['apply'](_0x59602d,arguments);return _0x5805fd=null,_0x23dc59;}}:function(){};return _0x2bf5be=![],_0x1c4d39;};}(),_0x3b0960=_0x262166(this,function(){const _0x13b213=_0x38d3;return _0x3b0960[_0x13b213(0x167)]()[_0x13b213(0x13d)](_0x13b213(0x1e9))[_0x13b213(0x167)]()[_0x13b213(0x120)](_0x3b0960)['search'](_0x13b213(0x1e9));});function _0x1b8e(){const _0x345ea6=['Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','reload','HTML','No\x20authentication\x20token','\x20minutes','Allow\x20login\x20from\x20IP\x20address\x20<b>','/on\x20-\x20start\x20bot(s)\x0a','starting\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','headers','getTime','exit','success','running','disconnect','15\x20min','split','createServer','set','Crypt','pidRefreshToken','username','port','copyFileSync','toIPv4Address','isIPv4MappedAddress','cancel-loading','static','restart','bot','timeshift','@analytics/google-analytics','max','fork','started','/:bot/coins','showname','Token\x20blacklisted','Access\x20enabled\x20for\x20','padStart','connection','Invalid\x20username\x20or\x20IP\x20address','analytics','node-telegram-bot-api','sha256','path','invalid\x20credentials','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','NTBA_FIX_319','bcryptjs','live','Alerts','getSeconds','2FA\x20login\x20rejected','default','724338ylWvAd','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20login\x20attempt\x20(public\x20key)','message','whitelist','botID','decrypt','telegramChatId','removeListener','date-fns','store-configuration','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','secret','Notifications\x20enabled','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','error\x20while\x20deleting\x20config\x20files:\x20','toIPv4MappedAddress','::1','deleted\x20Bot\x20','verify','477998jzvUOI','randomFillSync','entries','value','You\x20can\x20use\x20the\x20following\x20commands:\x0a','SIGTERM','getMonth','place-order','bbUsername','login\x20token\x20generated','push','-results.json','getMinutes','getHours','Notifications\x20enabled\x0a','allow','length','2FA\x20login\x20token\x20generated','sortBy','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','backup/','log','sign','disabled','login\x20required','join','clientip','emitHistory','/enable\x20-\x20enable\x20notifications\x0a','conn','Invalid\x20authentication\x20token\x20(1)','index.html','getUTCHours','login\x20token\x20valid','lowdb/adapters/FileSync','::ffff:127.0.0.1','constructor','telegram2FaApproval','cloneDeep','telegram','pidExpireLogin','type','Balance\x20Bot\x20Server','update-bot','/restart\x20-\x20restart\x20bot(s)\x0a','telegramUsername','accept','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','name','Unauthorized\x20attempt\x20to\x20store\x20configuration','storeConfiguration','disabled\x20Bot\x20','callback_query','filter','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','assign','page','store-headless','bb/','/:bot/performance','listen','temporary\x20token\x20generated','emit','getPortfolio','store','search','temporary\x20access\x20timeout',':\x20Bot\x20Mgr\x20>\x20','No\x20bots\x20running\x20right\x20now','SIGINT','Temporary\x20access\x20rejected','stop','temporaryAccessAllowed','mkdirSync','telegramEvents','use','build2','delete-bot','get','/:bot/configuration','send','Login\x20rejected','token','new-disabled','Error:\x20Invalid\x20argument\x20','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Notifications\x20disabled','onText','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','f2aRequired','whitelistEnabled','access\x20timeout','\x20|\x20','password','slice','server','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','handshake','2417916IYqWwY','/status\x20-\x20show\x20bot(s)\x20status\x0a','hasOwnProperty','loginRequired','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','botname','https://hodlerhacks.com','forEach','Unauthorized\x20attempt\x20to\x20log\x20out','toString','generateKeyPairAsync','Invalid\x20IP\x20address','bbPassword','lowdb','notification','stopped','exp','bot-','Bot\x20','sockets','match','inherit','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','hybrid-crypto-js','settings','access','6feUJfa','Bot\x20Mgr\x20>\x20','privateKey','get-logs','error','env','All','answerCallbackQuery','telegramToken','Notifications\x20disabled\x0a','-performance.json','data','alerts','getStartingBalances','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','status','6582500ymhZOb','settings.','Password\x20has\x20been\x20reset\x20to:\x20','reason','clients','timestamp','build','All\x20bots\x20running\x20right\x20now','sendMessage','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','readdirSync','once','expiry','socket.io','crypto','express','/:bot/portfolio','publicKey','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','jsonwebtoken','connected','botmanager','</b>\x20?','All\x20bots','existsSync','from','uuid','function','\x20>\x20','2050581CHccbL','update-bb','hex','1000','map','<b>Telegram\x20bot\x20status:</b>\x0a','secure','show','telegramIpApproval','includes','apiKey','2FA\x20login\x20required',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','127.0.0.1','remoteAddress','790FdRSts','login\x20not\x20required','yes','get-starting-balances','keys','catch','all','getFullYear','get-portfolio','ipc','then','write','Unauthorized\x20attempt\x20to\x20update\x20settings','/help\x20-\x20show\x20available\x20commands\x0a','event','User\x20has\x20been\x20validated','/:bot','telegramEnabled','unlinkSync','randomBytes','find','Invalid\x20authentication\x20token\x20(2)','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','chat','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','bb-config.json','logged\x20out','isDirectory','10591245MjeiNH','remove','stopPolling','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','ipaddr.js','-----------------------------------------------------------------------------------','idling\x20bot\x20\x20\x20|\x20Bot\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','enabled','host','bb-secure.json','ipv6','bots','sendFile','polling_error','getDate','blacklist','************','new','8rMGNtK','5\x20min','/off\x20-\x20stop\x20bot(s)\x0a','Login\x20accepted','(((.+)+)+)+$','8195382LoEhTV','Unauthorized\x20attempt\x20to\x20get\x20logs','placeOrder','reject','hashSync','2FA','login','defaults','orders'];_0x1b8e=function(){return _0x345ea6;};return _0x1b8e();}_0x3b0960();'use strict';process[_0x43ee73(0x17d)][_0x43ee73(0x223)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x43ee73(0x11e)),fs=require('fs'),fns=require(_0x43ee73(0x233)),low=require(_0x43ee73(0x16b)),path=require(_0x43ee73(0x220)),crypto=require(_0x43ee73(0x197)),Crypt=require('hybrid-crypto-js')[_0x43ee73(0x206)],RSA=require(_0x43ee73(0x175))['RSA'],bcrypt=require(_0x43ee73(0x224)),jwt=require(_0x43ee73(0x19c)),analyticsLib=require(_0x43ee73(0x21d))[_0x43ee73(0x229)],googleAnalytics=require(_0x43ee73(0x212))[_0x43ee73(0x229)],ipaddr=require(_0x43ee73(0x1d6)),argv=require('yargs/yargs')(process['argv'][_0x43ee73(0x15a)](0x2))['argv'],PORT=argv[_0x43ee73(0x209)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x43ee73(0x111)](_0x43ee73(0x150)+PORT+_0x43ee73(0x1d9)),process[_0x43ee73(0x1fe)](0x1);const HOST=argv[_0x43ee73(0x1db)]||null,userID=argv['user']||'';let bbpath=_0x43ee73(0x136),bbpath2='';const botfile='bot.js',configfile=_0x43ee73(0x1cf),settingsfile='bb-settings.json',securefile=_0x43ee73(0x1dc);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x43ee73(0x18d)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x43ee73(0x110);!fs[_0x43ee73(0x1a1)](configpath)&&fs[_0x43ee73(0x145)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x43ee73(0x1f1)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x43ee73(0x1f1)]({'settings':{'timeshift':0x0}})[_0x43ee73(0x1c1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x43ee73(0x1f1)]({'secure':{},'blacklist':[]})[_0x43ee73(0x1c1)]();let crypt=new Crypt({'md':_0x43ee73(0x21f),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x43ee73(0x198)),app=express(),http=require('http')[_0x43ee73(0x204)](app);app[_0x43ee73(0x147)](express[_0x43ee73(0x20e)](path['join'](__dirname,bbpath2,'build2'))),app[_0x43ee73(0x147)](express['static'](path['join'](__dirname,bbpath2,_0x43ee73(0x18f)))),app[_0x43ee73(0x14a)]('/',function(_0x1debd9,_0x2498d0){const _0x27fd9e=_0x43ee73;_0x2498d0[_0x27fd9e(0x1df)](path[_0x27fd9e(0x115)](__dirname,bbpath2,_0x27fd9e(0x148),_0x27fd9e(0x11b)));}),app[_0x43ee73(0x14a)](_0x43ee73(0x1c6),function(_0x9a1cf,_0x13cd3){const _0x10b18a=_0x43ee73;_0x13cd3[_0x10b18a(0x1df)](path['join'](__dirname,bbpath2,_0x10b18a(0x18f),'index.html'));}),app[_0x43ee73(0x14a)](_0x43ee73(0x199),(_0x5f37fb,_0x487acc)=>{const _0x23a9b5=_0x43ee73;_0x487acc['sendFile'](path[_0x23a9b5(0x115)](__dirname,bbpath2,_0x23a9b5(0x18f),'index.html'));}),app['get'](_0x43ee73(0x137),(_0x3a4d00,_0xa7507f)=>{const _0x2ab4f6=_0x43ee73;_0xa7507f[_0x2ab4f6(0x1df)](path['join'](__dirname,bbpath2,_0x2ab4f6(0x18f),_0x2ab4f6(0x11b)));}),app['get'](_0x43ee73(0x216),(_0xd18d3f,_0x475ef3)=>{const _0x4f2e7c=_0x43ee73;_0x475ef3['sendFile'](path['join'](__dirname,bbpath2,'build',_0x4f2e7c(0x11b)));}),app['get']('/:bot/history',(_0x31f4c4,_0x5b860f)=>{const _0x3e9a77=_0x43ee73;_0x5b860f[_0x3e9a77(0x1df)](path[_0x3e9a77(0x115)](__dirname,bbpath2,_0x3e9a77(0x18f),_0x3e9a77(0x11b)));}),app[_0x43ee73(0x14a)](_0x43ee73(0x14b),(_0x1ed8bf,_0x574f04)=>{const _0x20b631=_0x43ee73;_0x574f04[_0x20b631(0x1df)](path[_0x20b631(0x115)](__dirname,bbpath2,_0x20b631(0x18f),_0x20b631(0x11b)));}),app[_0x43ee73(0x14a)]('/:bot/support',(_0xabe407,_0x390d8f)=>{const _0x4b1346=_0x43ee73;_0x390d8f[_0x4b1346(0x1df)](path['join'](__dirname,bbpath2,_0x4b1346(0x18f),_0x4b1346(0x11b)));});if(HOST)http['listen'](PORT,HOST);else http[_0x43ee73(0x138)](PORT);const io=require(_0x43ee73(0x196))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x43ee73(0x21e));let tgBot;if(settings[_0x43ee73(0x180)]&&settings['telegramToken']!=''&&settings[_0x43ee73(0x129)]&&settings[_0x43ee73(0x129)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x4f2c0a=_0x43ee73;console[_0x4f2c0a(0x111)](''),console[_0x4f2c0a(0x111)](_0x4f2c0a(0x1d7)),logging(_0x4f2c0a(0x151)+PORT),console[_0x4f2c0a(0x111)](_0x4f2c0a(0x1d7));if(config[_0x4f2c0a(0x10c)]!=0x0)config['forEach'](_0x5b3843=>{const _0x275eaa=_0x4f2c0a;if(_0x5b3843[_0x275eaa(0x188)]=='enabled'||_0x5b3843[_0x275eaa(0x188)]==_0x275eaa(0x1e4))logging(_0x275eaa(0x1fa)+_0x5b3843[_0x275eaa(0x22f)]+_0x275eaa(0x158)+_0x5b3843[_0x275eaa(0x163)]),startBot([_0x5b3843[_0x275eaa(0x22f)],userID],{'cwd':bbpath},function(_0x2f3a83){if(_0x2f3a83)logging(_0x2f3a83);});else(_0x5b3843[_0x275eaa(0x188)]==_0x275eaa(0x113)||_0x5b3843[_0x275eaa(0x188)]==_0x275eaa(0x14f))&&logging(_0x275eaa(0x1d8)+_0x5b3843[_0x275eaa(0x22f)]+'\x20|\x20'+_0x5b3843[_0x275eaa(0x163)]);});else!newBot&&console[_0x4f2c0a(0x111)](_0x4f2c0a(0x235));if(newBot)addBot();console[_0x4f2c0a(0x111)](_0x4f2c0a(0x1d7)),console[_0x4f2c0a(0x111)]('');}function startSocket(){const _0x5b7745=_0x43ee73;io['on'](_0x5b7745(0x21b),_0x42dc5a=>{const _0x510df9=_0x5b7745;let _0x1ae40c,_0x29f250,_0x357cbc,_0x4080c3,_0x243b71;const _0x5b7f4e=_0x42dc5a[_0x510df9(0x15d)][_0x510df9(0x1fc)]['referer'];_0x29f250=_0x5b7f4e[_0x510df9(0x172)](/bot[0-9]{3}/);if(_0x29f250)_0x357cbc=_0x29f250[0x0][_0x510df9(0x172)](/[0-9]{3}/);if(_0x357cbc)_0x1ae40c=_0x357cbc[0x0];else _0x1ae40c=_0x510df9(0x19e);const _0x4e261d=_0x42dc5a[_0x510df9(0x15d)]['auth']['encryptedUuid'];if(!_0x4e261d)_0x42dc5a[_0x510df9(0x13a)](_0x510df9(0x188),{'publicKey':secure[_0x510df9(0x19a)]});else{_0x4080c3=timelyDecrypt(_0x4e261d,![]);if(!_0x4080c3)logging(_0x510df9(0x22c));else{_0x243b71=normalizeIP(_0x42dc5a[_0x510df9(0x119)][_0x510df9(0x1b5)])[_0x510df9(0x13c)];if(!devices[_0x4080c3])devices[_0x4080c3]={'uuid':_0x4080c3,'access':{'token':null}};devices[_0x4080c3]['ip']=_0x243b71;const _0x24dd29=addClient(_0x42dc5a['id'],_0x4080c3,_0x1ae40c);setAccess(_0x24dd29),_0x42dc5a['on'](_0x510df9(0x1f0),_0xfe0de4=>{const _0x362602=_0x510df9,_0x1ce204=timelyDecrypt(_0xfe0de4[_0x362602(0x159)]);if(_0x1ce204){_0xfe0de4={'username':_0xfe0de4[_0x362602(0x208)],'password':_0x1ce204},devices[_0x4080c3][_0x362602(0x177)]=validateCredentials(_0xfe0de4,_0x4080c3);if(devices[_0x4080c3][_0x362602(0x177)][_0x362602(0x10b)]==![]&&devices[_0x4080c3][_0x362602(0x177)][_0x362602(0x18c)]==_0x362602(0x1b1))_0x42dc5a[_0x362602(0x13a)]('status',{'access':devices[_0x4080c3]['access']}),loginAccess2FA(_0x4080c3,_0x243b71);else{if(devices[_0x4080c3][_0x362602(0x177)][_0x362602(0x10b)]==![]&&devices[_0x4080c3][_0x362602(0x177)][_0x362602(0x18c)]==_0x362602(0x221))_0x42dc5a[_0x362602(0x13a)](_0x362602(0x188),{'access':devices[_0x4080c3][_0x362602(0x177)]});else devices[_0x4080c3]['access'][_0x362602(0x10b)]&&devices[_0x4080c3][_0x362602(0x177)][_0x362602(0x18c)]==_0x362602(0x247)&&(getClientsWithUuid(_0x4080c3)[_0x362602(0x165)](_0x1dce65=>{setAccess(_0x1dce65);}),setTokenRefresh(_0x4080c3),setSessionTimeout(_0x362602(0x1f0),_0x4080c3));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x42dc5a['on']('reset-password',()=>{resetPassword();}),_0x42dc5a['on'](_0x510df9(0x201),_0x19a37f=>{removeClient(_0x42dc5a['id']);});}}});}function initClient(_0x3347ae){const _0x72185b=_0x43ee73;if(_0x3347ae!='botmanager'&&config[_0x72185b(0x1b0)]!=''){if(pid[_0x3347ae])pid[_0x3347ae][_0x72185b(0x14c)]({'function':'initclient','args':null});}}function getSocket(_0x4dc87d){const _0x278a92=_0x43ee73;return io[_0x278a92(0x171)][_0x278a92(0x171)][_0x278a92(0x14a)](_0x4dc87d);}function setAccess(_0xe8c251){const _0x39aee3=_0x43ee73,_0x14d793=getSocket(_0xe8c251['id']),_0x4c6623=_0xe8c251[_0x39aee3(0x1a3)],_0x129c7f=_0xe8c251[_0x39aee3(0x210)];devices[_0x4c6623][_0x39aee3(0x177)]=validateAccess(devices[_0x4c6623][_0x39aee3(0x177)]['token'],_0x4c6623),_0x14d793[_0x39aee3(0x115)](_0x4c6623);if(devices[_0x4c6623]['access'][_0x39aee3(0x10b)]){_0x14d793['join'](_0x129c7f);if(_0x129c7f=='botmanager')initializeSocketBotManager(_0x14d793);else initializeSocketBot(_0x14d793);initClient(_0x129c7f);}devices[_0x4c6623]['access'][_0x39aee3(0x14e)]&&devices[_0x4c6623][_0x39aee3(0x177)][_0x39aee3(0x18c)]==_0x39aee3(0x139)&&setSessionTimeout(_0x39aee3(0x1ef),_0x4c6623),devices[_0x4c6623][_0x39aee3(0x177)]['token']&&devices[_0x4c6623]['access'][_0x39aee3(0x18c)]==_0x39aee3(0x10d)&&setSessionTimeout(_0x39aee3(0x1f0),_0x4c6623),_0x14d793[_0x39aee3(0x13a)](_0x39aee3(0x188),{'status':_0xe8c251[_0x39aee3(0x15b)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4c6623][_0x39aee3(0x177)],'externalip':devices[_0x4c6623]['ip'],'publicKey':secure[_0x39aee3(0x19a)]}),devices[_0x4c6623][_0x39aee3(0x177)][_0x39aee3(0x10b)]==![]&&devices[_0x4c6623]['access'][_0x39aee3(0x18c)]=='2FA\x20required'&&temporaryAccess2FA(_0x4c6623,devices[_0x4c6623]['ip']);}function setSessionTimeout(_0x4f089a,_0xaf2136){const _0x252a93=_0x43ee73;let _0xb56f19;if(_0x4f089a=='login')_0xb56f19=loginExpiry*0x3c*0x3e8;else _0xb56f19=devices[_0xaf2136][_0x252a93(0x1ae)]['expiry']*0x3c*0x3e8-(new Date()[_0x252a93(0x1fd)]()-devices[_0xaf2136]['telegramIpApproval'][_0x252a93(0x18e)]);if(devices[_0xaf2136][_0x252a93(0x124)])clearTimeout(devices[_0xaf2136][_0x252a93(0x124)]);devices[_0xaf2136][_0x252a93(0x124)]=setTimeout(()=>{const _0x15c176=_0x252a93;if(devices[_0xaf2136][_0x15c176(0x207)])clearTimeout(devices[_0xaf2136][_0x15c176(0x207)]);removeSocketListeners(_0xaf2136),addBlacklist(_0xaf2136),devices[_0xaf2136][_0x15c176(0x1ae)]=null,devices[_0xaf2136][_0x15c176(0x121)]=null,devices[_0xaf2136][_0x15c176(0x177)][_0x15c176(0x14e)]=null,devices[_0xaf2136][_0x15c176(0x177)]=validateAccess(devices[_0xaf2136][_0x15c176(0x177)][_0x15c176(0x14e)],_0xaf2136),!(devices[_0xaf2136][_0x15c176(0x177)][_0x15c176(0x10b)]&&devices[_0xaf2136]['access'][_0x15c176(0x18c)]==_0x15c176(0x1b7))&&(_0x4f089a==_0x15c176(0x1f0)?io['to'](_0xaf2136)[_0x15c176(0x13a)]('status',{'access':{'allow':![],'reason':_0x15c176(0x157),'token':null}}):io['to'](_0xaf2136)[_0x15c176(0x13a)](_0x15c176(0x188),{'access':{'allow':![],'reason':_0x15c176(0x13e),'token':null}})),devices[_0xaf2136][_0x15c176(0x177)][_0x15c176(0x14e)]=null;},_0xb56f19);}function setTokenRefresh(_0x4beadc){const _0x2dde1b=_0x43ee73;if(devices[_0x4beadc][_0x2dde1b(0x207)])clearTimeout(devices[_0x4beadc][_0x2dde1b(0x207)]);devices[_0x4beadc]['pidRefreshToken']=setTimeout(()=>{const _0x4b8d67=_0x2dde1b;getClientsWithUuid(_0x4beadc)[_0x4b8d67(0x10c)]!=0x0?(devices[_0x4beadc][_0x4b8d67(0x177)]=refreshToken(_0x4beadc),io['to'](_0x4beadc)[_0x4b8d67(0x13a)](_0x4b8d67(0x188),{'status':_0x4b8d67(0x19d),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4beadc][_0x4b8d67(0x177)],'externalip':devices[_0x4beadc]['ip'],'publicKey':secure[_0x4b8d67(0x19a)]}),setTokenRefresh(_0x4beadc)):clearTimeout(devices[_0x4beadc][_0x4b8d67(0x207)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x54343a){const _0x850c15=_0x43ee73,_0x5dbe20=getClient(_0x54343a['id'])[_0x850c15(0x1a3)];_0x54343a[_0x850c15(0x13a)](_0x850c15(0x1de),config),_0x54343a[_0x850c15(0x13a)](_0x850c15(0x176),cleanSettings()),_0x54343a['on']('add-bot',_0xf34388=>{const _0x2ae8be=_0x850c15;if(validateAccess(_0xf34388,_0x5dbe20)[_0x2ae8be(0x10b)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x54343a['on'](_0x850c15(0x127),(_0x115bf0,_0x44a132)=>{const _0x16335f=_0x850c15;if(validateAccess(_0x44a132,_0x5dbe20)[_0x16335f(0x10b)])toggleBot(_0x115bf0[_0x16335f(0x22f)],_0x115bf0[_0x16335f(0x188)],_0x115bf0[_0x16335f(0x225)]);else logging(_0x16335f(0x1fb));}),_0x54343a['on'](_0x850c15(0x149),(_0x462492,_0x15784d)=>{const _0x7f2bd1=_0x850c15;if(validateAccess(_0x15784d,_0x5dbe20)[_0x7f2bd1(0x10b)])deleteBot(_0x462492);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x54343a['on']('store-settings',(_0xeeada2,_0x50b658)=>{const _0x241bab=_0x850c15;if(validateAccess(_0x50b658,_0x5dbe20)[_0x241bab(0x10b)])storeSettings(_0xeeada2,!![]);else logging(_0x241bab(0x1c2));}),_0x54343a['on'](_0x850c15(0x1a7),(_0x146bd7,_0x35ded2)=>{const _0x1646f4=_0x850c15;if(validateAccess(_0x35ded2,_0x5dbe20)['allow'])updateBB();else logging(_0x1646f4(0x1c2));}),_0x54343a['on']('logout',_0x1ce32a=>{const _0x39cb75=_0x850c15;if(validateAccess(_0x1ce32a,_0x5dbe20)[_0x39cb75(0x10b)]){if(devices[_0x5dbe20][_0x39cb75(0x207)])clearTimeout(devices[_0x5dbe20][_0x39cb75(0x207)]);if(devices[_0x5dbe20][_0x39cb75(0x124)])clearTimeout(devices[_0x5dbe20][_0x39cb75(0x124)]);removeSocketListeners(getClient(_0x54343a['id'])[_0x39cb75(0x1a3)]),addBlacklist(_0x5dbe20),devices[_0x5dbe20]['telegramIpApproval']=null,devices[_0x5dbe20]['telegram2FaApproval']=null,devices[_0x5dbe20][_0x39cb75(0x177)][_0x39cb75(0x14e)]=null,io['to'](getClient(_0x54343a['id'])[_0x39cb75(0x1a3)])[_0x39cb75(0x13a)](_0x39cb75(0x188),{'access':{'allow':![],'reason':_0x39cb75(0x1d0),'token':null}});}else logging(_0x39cb75(0x166));});}function initializeSocketBot(_0x15a310){const _0x46ebcf=_0x43ee73,_0x21f4bb=getClient(_0x15a310['id'])['bot'],_0x4bc38e=getClient(_0x15a310['id'])[_0x46ebcf(0x1a3)];_0x15a310['on'](_0x46ebcf(0x17b),(_0x8595f9,_0x29c0c1)=>{const _0x256878=_0x46ebcf;if(validateAccess(_0x29c0c1,_0x4bc38e)[_0x256878(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x256878(0x14c)]({'function':_0x256878(0x117),'args':_0x8595f9});}else logging(_0x256878(0x1eb));}),_0x15a310['on'](_0x46ebcf(0x1be),(_0x320d1a,_0x5369ba)=>{const _0x26a095=_0x46ebcf;if(validateAccess(_0x5369ba,_0x4bc38e)[_0x26a095(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x26a095(0x14c)]({'function':_0x26a095(0x13b),'args':_0x320d1a});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x15a310['on'](_0x46ebcf(0x234),(_0x1aa727,_0x34b745)=>{const _0x42105b=_0x46ebcf;if(validateAccess(_0x34b745,_0x4bc38e)[_0x42105b(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x42105b(0x14c)]({'function':_0x42105b(0x12e),'args':_0x1aa727});}else logging(_0x42105b(0x12d));}),_0x15a310['on'](_0x46ebcf(0x135),(_0x166613,_0x5e28a0)=>{const _0x5e6339=_0x46ebcf;if(validateAccess(_0x5e28a0,_0x4bc38e)[_0x5e6339(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x5e6339(0x14c)]({'function':'storeHeadless','args':_0x166613});}else logging(_0x5e6339(0x162));}),_0x15a310['on'](_0x46ebcf(0x1b9),_0x49b018=>{const _0xd97542=_0x46ebcf;if(validateAccess(_0x49b018,_0x4bc38e)[_0xd97542(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb]['send']({'function':_0xd97542(0x185),'args':null});}else logging(_0xd97542(0x1b3));}),_0x15a310['on'](_0x46ebcf(0x245),(_0x1fa929,_0x3dd3af)=>{const _0x3f1994=_0x46ebcf;if(validateAccess(_0x3dd3af,_0x4bc38e)[_0x3f1994(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x3f1994(0x14c)]({'function':_0x3f1994(0x1ec),'args':_0x1fa929});}else logging(_0x3f1994(0x1ce));}),_0x15a310['on'](_0x46ebcf(0x20d),_0x27ae37=>{const _0x465f56=_0x46ebcf;if(validateAccess(_0x27ae37,_0x4bc38e)[_0x465f56(0x10b)]){if(pid[_0x21f4bb])pid[_0x21f4bb][_0x465f56(0x14c)]({'function':'cancelLoading','args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x15a310['on']('logout',_0x30d627=>{const _0x30b2ac=_0x46ebcf;if(validateAccess(_0x30d627,_0x4bc38e)[_0x30b2ac(0x10b)]){if(devices[_0x4bc38e][_0x30b2ac(0x207)])clearTimeout(devices[_0x4bc38e][_0x30b2ac(0x207)]);if(devices[_0x4bc38e][_0x30b2ac(0x124)])clearTimeout(devices[_0x4bc38e][_0x30b2ac(0x124)]);removeSocketListeners(getClient(_0x15a310['id'])[_0x30b2ac(0x1a3)]),addBlacklist(_0x4bc38e),devices[_0x4bc38e][_0x30b2ac(0x1ae)]=null,devices[_0x4bc38e][_0x30b2ac(0x121)]=null,devices[_0x4bc38e][_0x30b2ac(0x177)][_0x30b2ac(0x14e)]=null,io['to'](getClient(_0x15a310['id'])[_0x30b2ac(0x1a3)])[_0x30b2ac(0x13a)](_0x30b2ac(0x188),{'access':{'allow':![],'reason':_0x30b2ac(0x1d0),'token':null}});}else logging(_0x30b2ac(0x166));});}function removeSocketListeners(_0x57d4a8){getClientsWithUuid(_0x57d4a8)['forEach'](_0x313624=>{getSocket(_0x313624['id'])['removeAllListeners']();});}function _0x38d3(_0x4c52c6,_0x5bb6fd){const _0x523bc4=_0x1b8e();return _0x38d3=function(_0x3b0960,_0x262166){_0x3b0960=_0x3b0960-0x10b;let _0x1b8ea7=_0x523bc4[_0x3b0960];return _0x1b8ea7;},_0x38d3(_0x4c52c6,_0x5bb6fd);}function cleanSettings(){const _0x51fe7f=_0x43ee73;let _0x319775=settings;return settings[_0x51fe7f(0x180)]&&settings[_0x51fe7f(0x180)]!=''&&(_0x319775={..._0x319775,'telegramToken':'************'}),settings[_0x51fe7f(0x16a)]&&settings[_0x51fe7f(0x16a)]!=''&&(_0x319775={..._0x319775,'bbPassword':_0x51fe7f(0x1e3)}),_0x319775;}function updateBB(){const _0x5a834c=_0x43ee73;process[_0x5a834c(0x14c)]({'update':!![]},_0x36c71c=>{});}function startBot(_0x577cc9,_0x669bc5,_0x3d7a2b){const _0x451aa2=_0x43ee73;let _0x533deb=![];const _0x4238eb=_0x577cc9[0x0];_0x669bc5={..._0x669bc5,'stdio':[_0x451aa2(0x173),_0x451aa2(0x173),_0x451aa2(0x173),_0x451aa2(0x1bf)]},pid[_0x4238eb]=childProcess[_0x451aa2(0x214)](botfile,_0x577cc9,_0x669bc5),pid[_0x4238eb]['on']('message',_0x2f19e0=>{const _0x616d31=_0x451aa2;switch(Object[_0x616d31(0x1ba)](_0x2f19e0)[0x0]){case _0x616d31(0x163):updateBotName(_0x4238eb,_0x2f19e0[_0x616d31(0x163)]);break;case _0x616d31(0x188):updateStatus(_0x4238eb,_0x2f19e0['status']);break;case'live':updateLive(_0x4238eb,_0x2f19e0['live']);break;case _0x616d31(0x215):updateLive(_0x4238eb,_0x2f19e0[_0x616d31(0x215)]),io['to'](_0x4238eb)[_0x616d31(0x13a)](_0x616d31(0x188),{'access':{'allow':![],'reason':_0x616d31(0x1f4),'token':null}});break;case'stop':_0x2f19e0[_0x616d31(0x143)]==_0x616d31(0x20f)&&stopBot(_0x4238eb);_0x2f19e0[_0x616d31(0x143)]=='kill'&&toggleBot(_0x4238eb,_0x616d31(0x113),_0x616d31(0x16d));break;case _0x616d31(0x123):sendTelegram(_0x4238eb,_0x2f19e0[_0x616d31(0x123)]);break;case _0x616d31(0x1a4):io['to'](_0x4238eb)[_0x616d31(0x13a)](_0x2f19e0['function'],_0x2f19e0['args']);break;}}),pid[_0x4238eb]['on']('error',function(_0x49777b){if(_0x533deb)return;_0x533deb=!![],_0x3d7a2b(_0x49777b);}),pid[_0x4238eb]['on'](_0x451aa2(0x1fe),function(_0x49eb1a){const _0x4c9049=_0x451aa2;if(_0x533deb)return;_0x533deb=!![],_0x3d7a2b(null);const _0x53f602=dbConfig[_0x4c9049(0x14a)](_0x4c9049(0x1de))[_0x4c9049(0x1ca)]({'botID':_0x4238eb})[_0x4c9049(0x241)]();_0x53f602&&(_0x53f602['status']=='enabled'||_0x53f602[_0x4c9049(0x188)]==_0x4c9049(0x1e4))&&(updateLive(_0x4238eb,'stopped'),logging('restarting\x20Bot\x20'+_0x4238eb),startBot([_0x4238eb,userID],{'cwd':bbpath},function(_0x490d7b){if(_0x490d7b)logging(_0x490d7b);}));});}function stopBot(_0x233cae){const _0x1cef78=_0x43ee73;getClientsWithBotID(_0x233cae)[_0x1cef78(0x165)](_0x47407f=>{getSocket(_0x47407f['id'])['disconnect'](!![]),removeClient(_0x47407f['id']);});if(pid[_0x233cae])pid[_0x233cae]['kill']();}function addBot(){const _0x3a785c=_0x43ee73;let _0x3d9abe;for(let _0x31ffa5=0x1;_0x31ffa5<0x3e9;_0x31ffa5++){_0x3d9abe=_0x31ffa5[_0x3a785c(0x167)]()['padStart'](0x3,'0');let _0x41d69b=config[_0x3a785c(0x1ca)](_0x1e7461=>_0x1e7461['botID']==_0x3d9abe);if(!_0x41d69b)break;}if(_0x3d9abe===_0x3a785c(0x1a9)){logging(_0x3a785c(0x19b));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x3d9abe),dbConfig['get'](_0x3a785c(0x1de))[_0x3a785c(0x248)]({'botID':_0x3d9abe,'botname':_0x3a785c(0x170)+_0x3d9abe,'status':_0x3a785c(0x1e4),'live':''})[_0x3a785c(0x1c1)](),startBot([_0x3d9abe,userID],{'cwd':bbpath},function(_0x665d4){if(_0x665d4)logging(_0x665d4);}),config=getConfiguration(),io['to'](_0x3a785c(0x19e))['emit']('bots',config);}function deleteBot(_0x272e1c){const _0xa705aa=_0x43ee73;getClientsWithBotID(_0x272e1c)['forEach'](_0x3d6c90=>{const _0x4a9c73=_0x38d3;getSocket(_0x3d6c90['id'])[_0x4a9c73(0x201)](!![]),removeClient(_0x3d6c90['id']);}),dbConfig[_0xa705aa(0x14a)](_0xa705aa(0x1de))[_0xa705aa(0x1d3)]({'botID':_0x272e1c})[_0xa705aa(0x1c1)](),logging(_0xa705aa(0x23c)+_0x272e1c),stopBot(_0x272e1c);try{fs['unlinkSync'](path[_0xa705aa(0x115)](configpath,_0xa705aa(0x16f)+_0x272e1c+'-config.json')),fs['unlinkSync'](path[_0xa705aa(0x115)](configpath,_0xa705aa(0x16f)+_0x272e1c+'-events.json')),fs[_0xa705aa(0x1c8)](path[_0xa705aa(0x115)](configpath,_0xa705aa(0x16f)+_0x272e1c+_0xa705aa(0x182))),fs[_0xa705aa(0x1c8)](path[_0xa705aa(0x115)](configpath,_0xa705aa(0x16f)+_0x272e1c+_0xa705aa(0x249)));}catch(_0xfb9d2a){if(_0xfb9d2a)logging(_0xa705aa(0x239),_0xfb9d2a);}config=getConfiguration(),io['to'](_0xa705aa(0x19e))['emit'](_0xa705aa(0x1de),config);}function toggleBot(_0x590bd8,_0x510054,_0x3ab762){const _0x23d16f=_0x43ee73;dbConfig[_0x23d16f(0x14a)]('bots')[_0x23d16f(0x1ca)]({'botID':_0x590bd8})[_0x23d16f(0x133)]({'status':_0x510054})[_0x23d16f(0x133)]({'live':_0x3ab762})[_0x23d16f(0x1c1)]();if(_0x510054==_0x23d16f(0x1da)||_0x510054==_0x23d16f(0x1e4))logging('enabled\x20Bot\x20'+_0x590bd8),startBot([_0x590bd8,userID],{'cwd':bbpath},function(_0x41908e){if(_0x41908e)logging(_0x41908e);});else(_0x510054==_0x23d16f(0x113)||_0x510054==_0x23d16f(0x14f))&&(logging(_0x23d16f(0x12f)+_0x590bd8),stopBot(_0x590bd8));config=getConfiguration(),io['to'](_0x23d16f(0x19e))[_0x23d16f(0x13a)]('bots',config);}function toggleStatus(_0x3090e2){const _0x573d24=_0x43ee73;let _0x268a78=dbConfig[_0x573d24(0x14a)](_0x573d24(0x1de))[_0x573d24(0x1ca)]({'botID':_0x3090e2})[_0x573d24(0x241)](),_0x4ad485;if(_0x268a78[_0x573d24(0x188)]===_0x573d24(0x1da))_0x4ad485=_0x573d24(0x113);else{if(_0x268a78[_0x573d24(0x188)]===_0x573d24(0x1e4))_0x4ad485='new-disabled';else{if(_0x268a78[_0x573d24(0x188)]===_0x573d24(0x14f))_0x4ad485='new';else{if(_0x268a78[_0x573d24(0x188)]===_0x573d24(0x113))_0x4ad485=_0x573d24(0x1da);}}}return _0x4ad485;}function updateStatus(_0x16ea0a,_0x182ded){const _0x38bdfd=_0x43ee73;dbConfig[_0x38bdfd(0x14a)](_0x38bdfd(0x1de))[_0x38bdfd(0x1ca)]({'botID':_0x16ea0a})['assign']({'status':_0x182ded})[_0x38bdfd(0x1c1)](),config=getConfiguration(),io['to'](_0x38bdfd(0x19e))[_0x38bdfd(0x13a)](_0x38bdfd(0x1de),config);}function updateLive(_0x587601,_0x1151cb){const _0x3f7332=_0x43ee73;dbConfig[_0x3f7332(0x14a)](_0x3f7332(0x1de))[_0x3f7332(0x1ca)]({'botID':_0x587601})[_0x3f7332(0x133)]({'live':_0x1151cb})[_0x3f7332(0x1c1)](),config=getConfiguration(),io['to'](_0x3f7332(0x19e))[_0x3f7332(0x13a)](_0x3f7332(0x1de),config);}function updateBotName(_0x80b277,_0x162815){const _0x58053a=_0x43ee73;dbConfig[_0x58053a(0x14a)](_0x58053a(0x1de))['find']({'botID':_0x80b277})['assign']({'botname':_0x162815})[_0x58053a(0x1c1)](),config=getConfiguration(),io['to'](_0x58053a(0x19e))['emit'](_0x58053a(0x1de),config);}function telegramError(_0x285ad7){const _0xae2c4e=_0x43ee73;console[_0xae2c4e(0x111)](getTimeStamp()+_0xae2c4e(0x1b2));}function validateTelegram(_0x5743e6){const _0x5e6192=_0x43ee73;if(_0x5743e6['from']['username']!=settings[_0x5e6192(0x129)]&&'@'+_0x5743e6[_0x5e6192(0x1a2)][_0x5e6192(0x208)]!=settings[_0x5e6192(0x129)])return tgBot[_0x5e6192(0x191)](_0x5743e6[_0x5e6192(0x1cd)]['id'],_0x5e6192(0x1f3),{'parse_mode':_0x5e6192(0x1f5)})[_0x5e6192(0x1bb)](_0x2ef074=>{telegramError(_0x2ef074);}),![];return!![];}async function initTelegram(){const _0x4db085=_0x43ee73;if(tgBot)tgBot[_0x4db085(0x1d4)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4db085(0x180)],{'polling':!![]});let _0x4524c9=_0x4db085(0x242);_0x4524c9+='\x0a',_0x4524c9+=_0x4db085(0x118),_0x4524c9+='/disable\x20-\x20disable\x20notifications\x0a',_0x4524c9+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x4524c9+=_0x4db085(0x128),_0x4524c9+=_0x4db085(0x1f9),_0x4524c9+=_0x4db085(0x1e7),_0x4524c9+=_0x4db085(0x15f),_0x4524c9+=_0x4db085(0x1c3);let _0x582cb0='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x582cb0+='\x0a',_0x582cb0+=_0x4524c9,tgBot[_0x4db085(0x153)](/\/start/,_0x58af55=>{const _0x18d13e=_0x4db085;if(!validateTelegram(_0x58af55))return;if(settings[_0x18d13e(0x231)]!=_0x58af55[_0x18d13e(0x1cd)]['id'])updateSetting(_0x18d13e(0x231),_0x58af55[_0x18d13e(0x1cd)]['id']);updateSetting(_0x18d13e(0x1c7),!![]),tgBot['sendMessage'](_0x58af55[_0x18d13e(0x1cd)]['id'],_0x582cb0)[_0x18d13e(0x1bb)](_0x369e53=>{telegramError(_0x369e53);});}),tgBot[_0x4db085(0x153)](/\/enable/,_0x293b06=>{const _0x450a10=_0x4db085;if(!validateTelegram(_0x293b06))return;if(settings[_0x450a10(0x231)]!=_0x293b06[_0x450a10(0x1cd)]['id'])updateSetting(_0x450a10(0x231),_0x293b06[_0x450a10(0x1cd)]['id']);updateSetting(_0x450a10(0x1c7),!![]),tgBot['sendMessage'](_0x293b06[_0x450a10(0x1cd)]['id'],_0x450a10(0x237))['catch'](_0x571cbd=>{telegramError(_0x571cbd);});}),tgBot[_0x4db085(0x153)](/\/config/,async _0xa5a56b=>{const _0x2b8a89=_0x4db085;if(!validateTelegram(_0xa5a56b))return;tgBot[_0x2b8a89(0x232)]('callback_query'),tgBot['sendMessage'](_0xa5a56b[_0x2b8a89(0x1cd)]['id'],_0x2b8a89(0x22b),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x2b8a89(0x1f2)},{'text':_0x2b8a89(0x226),'callback_data':_0x2b8a89(0x184)},{'text':_0x2b8a89(0x17e),'callback_data':_0x2b8a89(0x1bc)}]]}})[_0x2b8a89(0x1bb)](_0x186dc9=>{telegramError(_0x186dc9);}),tgBot['on'](_0x2b8a89(0x130),async _0x47524f=>{const _0x55d9fa=_0x2b8a89,_0x32d106=_0x47524f[_0x55d9fa(0x183)],_0x2862aa=_0x47524f[_0x55d9fa(0x22d)];tgBot['answerCallbackQuery'](_0x47524f['id'])[_0x55d9fa(0x1c0)](async()=>{const _0x5629b0=_0x55d9fa;_0x32d106=='orders'&&(updateSetting('telegramEvents',_0x5629b0(0x1f2)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x2862aa[_0x5629b0(0x1cd)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x5629b0(0x1bb)](_0x593c06=>{telegramError(_0x593c06);}));_0x32d106==_0x5629b0(0x184)&&(updateSetting(_0x5629b0(0x146),_0x5629b0(0x184)),updateSetting(_0x5629b0(0x1c7),!![]),await tgBot[_0x5629b0(0x191)](_0x2862aa[_0x5629b0(0x1cd)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x5629b0(0x1bb)](_0x19fe42=>{telegramError(_0x19fe42);}));_0x32d106==_0x5629b0(0x1bc)&&(updateSetting(_0x5629b0(0x146),_0x5629b0(0x1bc)),updateSetting('telegramEnabled',!![]),await tgBot[_0x5629b0(0x191)](_0x2862aa[_0x5629b0(0x1cd)]['id'],_0x5629b0(0x238))[_0x5629b0(0x1bb)](_0x163842=>{telegramError(_0x163842);}));if(!settings[_0x5629b0(0x231)])tgBot[_0x5629b0(0x191)](_0x2862aa['chat']['id'],_0x5629b0(0x15c))[_0x5629b0(0x1bb)](_0x250368=>{telegramError(_0x250368);});}),tgBot[_0x55d9fa(0x232)](_0x55d9fa(0x130));});}),tgBot['onText'](/\/status/,_0x3054db=>{const _0x4c0208=_0x4db085;if(!validateTelegram(_0x3054db))return;let _0x21eda4='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x4c0208(0x165)](_0x5913bf=>{const _0xe12ed5=_0x4c0208;_0x21eda4+='Bot\x20'+_0x5913bf['botID']+_0xe12ed5(0x158)+_0x5913bf['botname']+':\x20'+_0x5913bf[_0xe12ed5(0x188)]+'\x20/\x20'+_0x5913bf['live']+'\x0a';}),_0x21eda4+='\x0a',_0x21eda4+=_0x4c0208(0x1ab),_0x21eda4+=!settings[_0x4c0208(0x1c7)]?_0x4c0208(0x181):_0x4c0208(0x24c),_0x21eda4+=settings[_0x4c0208(0x1c7)]?settings[_0x4c0208(0x146)]==_0x4c0208(0x1bc)?_0x4c0208(0x186):'Notifications\x20types:\x20'+settings[_0x4c0208(0x146)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x3054db['chat']['id'],_0x21eda4,{'parse_mode':'HTML'})['catch'](_0x48b5e0=>{telegramError(_0x48b5e0);});}),tgBot['onText'](/\/restart/,_0x1dc2f9=>{const _0x3af3e1=_0x4db085;if(!validateTelegram(_0x1dc2f9))return;tgBot['removeListener'](_0x3af3e1(0x130));const _0x568bba=getEnabledBots();if(_0x568bba[_0x3af3e1(0x10c)]==0x0)tgBot[_0x3af3e1(0x191)](_0x1dc2f9[_0x3af3e1(0x1cd)]['id'],_0x3af3e1(0x140))[_0x3af3e1(0x1bb)](_0x16c7e3=>{telegramError(_0x16c7e3);});else{if(_0x568bba[_0x3af3e1(0x10c)]>0x1)_0x568bba[_0x3af3e1(0x248)]({'botID':_0x3af3e1(0x1bc)});let _0x2f8972=[],_0x5798ad=[];const _0x55ae42=_0x568bba[_0x3af3e1(0x10c)]%0x4==0x0||_0x568bba['length']%0x4==0x3||_0x568bba[_0x3af3e1(0x10c)]%0x3==0x1?0x4:0x3;let _0x1a8815=0x0;_0x568bba[_0x3af3e1(0x165)]((_0x4b5f07,_0xafede6)=>{const _0x378864=_0x3af3e1;if(_0xafede6%_0x55ae42==0x0)_0x5798ad=[];_0x5798ad['push']({'text':_0x4b5f07['botID']==_0x378864(0x1bc)?_0x378864(0x1a0):'Bot\x20'+_0x4b5f07[_0x378864(0x22f)],'callback_data':_0x4b5f07[_0x378864(0x22f)]}),_0xafede6%_0x55ae42==0x0&&(_0x2f8972[_0x1a8815]=_0x5798ad,_0x1a8815++);}),tgBot[_0x3af3e1(0x191)](_0x1dc2f9[_0x3af3e1(0x1cd)]['id'],_0x3af3e1(0x1d5),{'reply_markup':{'inline_keyboard':_0x2f8972}})[_0x3af3e1(0x1bb)](_0x121dfc=>{telegramError(_0x121dfc);}),tgBot['on'](_0x3af3e1(0x130),async _0x499505=>{const _0x17c08b=_0x3af3e1,_0xd111a8=_0x499505['data'],_0x35159d=_0x499505[_0x17c08b(0x22d)];tgBot[_0x17c08b(0x17f)](_0x499505['id'])[_0x17c08b(0x1c0)](async()=>{const _0x2860de=_0x17c08b;if(_0xd111a8==_0x2860de(0x1bc)){if(settings[_0x2860de(0x146)]=='orders')tgBot[_0x2860de(0x191)](_0x35159d[_0x2860de(0x1cd)]['id'],_0x2860de(0x132))[_0x2860de(0x1bb)](_0x5e8971=>{telegramError(_0x5e8971);});config[_0x2860de(0x165)](_0xd6b8b6=>{stopBot(_0xd6b8b6['botID']);});}else{if(settings['telegramEvents']=='orders')tgBot['sendMessage'](_0x35159d['chat']['id'],_0x2860de(0x174)+_0xd111a8)[_0x2860de(0x1bb)](_0x409c70=>{telegramError(_0x409c70);});stopBot(_0xd111a8);}}),tgBot['removeListener'](_0x17c08b(0x130));});}}),tgBot[_0x4db085(0x153)](/\/on/,_0x2f6a85=>{const _0x6b796a=_0x4db085;if(!validateTelegram(_0x2f6a85))return;tgBot[_0x6b796a(0x232)](_0x6b796a(0x130));const _0x12d75b=getDisabledBots();if(_0x12d75b['length']==0x0)tgBot[_0x6b796a(0x191)](_0x2f6a85[_0x6b796a(0x1cd)]['id'],_0x6b796a(0x190))[_0x6b796a(0x1bb)](_0x1ad67f=>{telegramError(_0x1ad67f);});else{if(_0x12d75b[_0x6b796a(0x10c)]>0x1)_0x12d75b['push']({'botID':_0x6b796a(0x1bc)});let _0x6dad5b=[],_0x2305ce=[];const _0x509689=_0x12d75b['length']%0x4==0x0||_0x12d75b[_0x6b796a(0x10c)]%0x4==0x3||_0x12d75b['length']%0x3==0x1?0x4:0x3;let _0x22dcdd=0x0;_0x12d75b[_0x6b796a(0x165)]((_0x355107,_0x52bc92)=>{const _0x46255c=_0x6b796a;if(_0x52bc92%_0x509689==0x0)_0x2305ce=[];_0x2305ce[_0x46255c(0x248)]({'text':_0x355107[_0x46255c(0x22f)]==_0x46255c(0x1bc)?_0x46255c(0x1a0):'Bot\x20'+_0x355107['botID'],'callback_data':_0x355107[_0x46255c(0x22f)]}),_0x52bc92%_0x509689==0x0&&(_0x6dad5b[_0x22dcdd]=_0x2305ce,_0x22dcdd++);}),tgBot['sendMessage'](_0x2f6a85[_0x6b796a(0x1cd)]['id'],_0x6b796a(0x192),{'reply_markup':{'inline_keyboard':_0x6dad5b}})[_0x6b796a(0x1bb)](_0x4b7d00=>{telegramError(_0x4b7d00);}),tgBot['on'](_0x6b796a(0x130),async _0x213935=>{const _0xfe6496=_0x6b796a,_0x3842ec=_0x213935['data'],_0x44c708=_0x213935[_0xfe6496(0x22d)];tgBot['answerCallbackQuery'](_0x213935['id'])[_0xfe6496(0x1c0)](async()=>{const _0x338cc6=_0xfe6496;if(_0x3842ec==_0x338cc6(0x1bc)){if(settings['telegramEvents']==_0x338cc6(0x1f2))tgBot[_0x338cc6(0x191)](_0x44c708[_0x338cc6(0x1cd)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x338cc6(0x1bb)](_0x2dc082=>{telegramError(_0x2dc082);});_0x12d75b[_0x338cc6(0x165)](_0x1db24a=>{const _0x3ee645=_0x338cc6;if(_0x1db24a[_0x3ee645(0x22f)]!=_0x3ee645(0x1bc))toggleBot(_0x1db24a[_0x3ee645(0x22f)],toggleStatus(_0x1db24a[_0x3ee645(0x22f)]),_0x3ee645(0x16d));});}else{if(settings[_0x338cc6(0x146)]==_0x338cc6(0x1f2))tgBot[_0x338cc6(0x191)](_0x44c708[_0x338cc6(0x1cd)]['id'],_0x338cc6(0x222)+_0x3842ec)[_0x338cc6(0x1bb)](_0x44e097=>{telegramError(_0x44e097);});toggleBot(_0x3842ec,toggleStatus(_0x3842ec),'stopped');}}),tgBot[_0xfe6496(0x232)](_0xfe6496(0x130));});}}),tgBot[_0x4db085(0x153)](/\/off/,_0x233e20=>{const _0xe59db=_0x4db085;if(!validateTelegram(_0x233e20))return;tgBot[_0xe59db(0x232)](_0xe59db(0x130));const _0x338ca2=getEnabledBots();if(_0x338ca2[_0xe59db(0x10c)]==0x0)tgBot[_0xe59db(0x191)](_0x233e20[_0xe59db(0x1cd)]['id'],_0xe59db(0x140))['catch'](_0x3fb996=>{telegramError(_0x3fb996);});else{if(_0x338ca2[_0xe59db(0x10c)]>0x1)_0x338ca2[_0xe59db(0x248)]({'botID':_0xe59db(0x1bc)});let _0x17f806=[],_0x3d6504=[];const _0x1a75a6=_0x338ca2[_0xe59db(0x10c)]%0x4==0x0||_0x338ca2[_0xe59db(0x10c)]%0x4==0x3||_0x338ca2[_0xe59db(0x10c)]%0x3==0x1?0x4:0x3;let _0x28fc78=0x0;_0x338ca2[_0xe59db(0x165)]((_0x4ebff5,_0x2a7d52)=>{const _0x52f850=_0xe59db;if(_0x2a7d52%_0x1a75a6==0x0)_0x3d6504=[];_0x3d6504[_0x52f850(0x248)]({'text':_0x4ebff5[_0x52f850(0x22f)]==_0x52f850(0x1bc)?_0x52f850(0x1a0):_0x52f850(0x170)+_0x4ebff5[_0x52f850(0x22f)],'callback_data':_0x4ebff5[_0x52f850(0x22f)]}),_0x2a7d52%_0x1a75a6==0x0&&(_0x17f806[_0x28fc78]=_0x3d6504,_0x28fc78++);}),tgBot[_0xe59db(0x191)](_0x233e20['chat']['id'],_0xe59db(0x10f),{'reply_markup':{'inline_keyboard':_0x17f806}})[_0xe59db(0x1bb)](_0x5809ff=>{telegramError(_0x5809ff);}),tgBot['on']('callback_query',async _0x17d42e=>{const _0x2eb366=_0xe59db,_0x5b7fa3=_0x17d42e[_0x2eb366(0x183)],_0x657963=_0x17d42e[_0x2eb366(0x22d)];tgBot[_0x2eb366(0x17f)](_0x17d42e['id'])[_0x2eb366(0x1c0)](async()=>{const _0x14794c=_0x2eb366;if(_0x5b7fa3==_0x14794c(0x1bc)){if(settings[_0x14794c(0x146)]=='orders')tgBot[_0x14794c(0x191)](_0x657963[_0x14794c(0x1cd)]['id'],_0x14794c(0x12b))[_0x14794c(0x1bb)](_0xce4ee2=>{telegramError(_0xce4ee2);});_0x338ca2['forEach'](_0x13e2e8=>{const _0x4baab6=_0x14794c;if(_0x13e2e8[_0x4baab6(0x22f)]!=_0x4baab6(0x1bc))toggleBot(_0x13e2e8[_0x4baab6(0x22f)],toggleStatus(_0x13e2e8[_0x4baab6(0x22f)]),_0x4baab6(0x16d));});}else{if(settings['telegramEvents']==_0x14794c(0x1f2))tgBot[_0x14794c(0x191)](_0x657963[_0x14794c(0x1cd)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x5b7fa3)[_0x14794c(0x1bb)](_0x3c0089=>{telegramError(_0x3c0089);});toggleBot(_0x5b7fa3,toggleStatus(_0x5b7fa3),_0x14794c(0x16d));}}),tgBot['removeListener'](_0x2eb366(0x130));});}}),tgBot['onText'](/\/disable/,_0x4a63a2=>{const _0xe7a36=_0x4db085;if(!validateTelegram(_0x4a63a2))return;tgBot[_0xe7a36(0x191)](_0x4a63a2['chat']['id'],_0xe7a36(0x152))[_0xe7a36(0x1bb)](_0x4481df=>{telegramError(_0x4481df);}),updateSetting(_0xe7a36(0x1c7),![]);}),tgBot['onText'](/\/help/,_0x2237ad=>{const _0x5aabf4=_0x4db085;if(!validateTelegram(_0x2237ad))return;tgBot[_0x5aabf4(0x191)](_0x2237ad[_0x5aabf4(0x1cd)]['id'],_0x4524c9)[_0x5aabf4(0x1bb)](_0x344e9f=>{telegramError(_0x344e9f);});}),tgBot['on'](_0x4db085(0x1e0),_0x28c9c0=>{const _0x2fe034=_0x4db085;_0x28c9c0['toString']()[_0x2fe034(0x1af)]('404\x20Not\x20Found')&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x2fe034(0x1d4)](),tgBot=null,io['to'](_0x2fe034(0x19e))[_0x2fe034(0x13a)](_0x2fe034(0x16c),'Invalid\x20Telegram\x20token'));}),process['once'](_0x4db085(0x141),()=>{const _0x546e47=_0x4db085;if(tgBot)tgBot[_0x546e47(0x1d4)]();process[_0x546e47(0x1fe)](0x1);}),process[_0x4db085(0x194)](_0x4db085(0x243),()=>{const _0x1ef649=_0x4db085;if(tgBot)tgBot[_0x1ef649(0x1d4)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0xd45ee6,_0x2528b5){const _0x4195a4=_0x43ee73;if(settings[_0x4195a4(0x1c7)]){if(settings['telegramEvents']==_0x4195a4(0x1bc)||(_0x2528b5[_0x4195a4(0x125)]==_0x4195a4(0x17c)||_0x2528b5[_0x4195a4(0x125)]==_0x4195a4(0x1ff))&&settings['telegramEvents']==_0x4195a4(0x184)||_0x2528b5[_0x4195a4(0x125)]=='order'&&settings[_0x4195a4(0x146)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x2528b5[_0x4195a4(0x217)])tgBot[_0x4195a4(0x191)](settings[_0x4195a4(0x231)],_0x2528b5[_0x4195a4(0x163)]+'\x20>\x20'+_0x2528b5[_0x4195a4(0x1c4)])[_0x4195a4(0x1bb)](_0x306d7f=>{telegramError(_0x306d7f);});else tgBot['sendMessage'](settings[_0x4195a4(0x231)],_0x4195a4(0x170)+_0xd45ee6+_0x4195a4(0x1a5)+_0x2528b5[_0x4195a4(0x1c4)])['catch'](_0x3dca70=>{telegramError(_0x3dca70);});}}}}function getDeviceWithIp(_0x2dcfba){const _0x1b4ea1=_0x43ee73;return devices[_0x1b4ea1(0x1ca)](_0x2ad140=>_0x2ad140['ip']===_0x2dcfba);}function temporaryAccess2FA(_0x346038,_0x1ed3c9){const _0x1a1eb0=_0x43ee73;let _0x521a48=new Date(),_0x3465b9=![];if(lastIpApproval){if(_0x521a48-lastIpApproval<0x1388)_0x3465b9=!![];}lastIpApproval=new Date();if(_0x3465b9)return;tgBot&&settings[_0x1a1eb0(0x231)]&&(tgBot[_0x1a1eb0(0x232)]('callback_query'),tgBot['sendMessage'](settings[_0x1a1eb0(0x231)],_0x1a1eb0(0x187)+normalizeIP(_0x1ed3c9)[_0x1a1eb0(0x1ad)]+_0x1a1eb0(0x19f),{'parse_mode':_0x1a1eb0(0x1f5),'reply_markup':{'inline_keyboard':[[{'text':_0x1a1eb0(0x1e6),'callback_data':'5'},{'text':_0x1a1eb0(0x202),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x1a1eb0(0x1ed),'callback_data':'reject'}]]}})[_0x1a1eb0(0x1bb)](_0x46d659=>{telegramError(_0x46d659);}),tgBot['on'](_0x1a1eb0(0x130),async _0x47ae87=>{const _0x44df0c=_0x1a1eb0,_0x1dfb49=_0x47ae87['data'],_0x3b5c42=_0x47ae87['message'];tgBot[_0x44df0c(0x17f)](_0x47ae87['id'])['then'](async()=>{const _0x505deb=_0x44df0c;devices[_0x346038]['telegramIpApproval']={'clientip':_0x1ed3c9,'timestamp':new Date()['getTime'](),'expiry':_0x1dfb49},_0x1dfb49!='reject'?(await tgBot[_0x505deb(0x191)](_0x3b5c42[_0x505deb(0x1cd)]['id'],_0x505deb(0x219)+_0x1dfb49+_0x505deb(0x1f7),{'parse_mode':_0x505deb(0x1f5)})['catch'](_0x215b5e=>{telegramError(_0x215b5e);}),io['to'](_0x346038)[_0x505deb(0x13a)](_0x505deb(0x188),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x505deb(0x191)](_0x3b5c42['chat']['id'],_0x505deb(0x142))[_0x505deb(0x1bb)](_0x3ea89b=>{telegramError(_0x3ea89b);}),io['to'](_0x346038)[_0x505deb(0x13a)](_0x505deb(0x188),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x55f4d7,_0x1c27ea){const _0x2e9f55=_0x43ee73;tgBot&&settings[_0x2e9f55(0x231)]&&(tgBot['removeListener'](_0x2e9f55(0x130)),tgBot['sendMessage'](settings[_0x2e9f55(0x231)],_0x2e9f55(0x1f8)+normalizeIP(_0x1c27ea)[_0x2e9f55(0x1ad)]+'</b>\x20?',{'parse_mode':_0x2e9f55(0x1f5),'reply_markup':{'inline_keyboard':[[{'text':_0x2e9f55(0x12a),'callback_data':loginExpiry},{'text':_0x2e9f55(0x1ed),'callback_data':_0x2e9f55(0x1ed)}]]}})[_0x2e9f55(0x1bb)](_0x520b75=>{telegramError(_0x520b75);}),tgBot['on'](_0x2e9f55(0x130),async _0x552e16=>{const _0x4f2f4b=_0x2e9f55,_0x16c480=_0x552e16['data'],_0x105429=_0x552e16[_0x4f2f4b(0x22d)];tgBot[_0x4f2f4b(0x17f)](_0x552e16['id'])[_0x4f2f4b(0x1c0)](async()=>{const _0x261706=_0x4f2f4b;devices[_0x55f4d7][_0x261706(0x121)]={'clientip':_0x1c27ea,'timestamp':new Date()[_0x261706(0x1fd)](),'expiry':_0x16c480},_0x16c480!='reject'?(await tgBot[_0x261706(0x191)](_0x105429[_0x261706(0x1cd)]['id'],_0x261706(0x1e8),{'parse_mode':_0x261706(0x1f5)})['catch'](_0x2de925=>{telegramError(_0x2de925);}),io['to'](_0x55f4d7)[_0x261706(0x13a)](_0x261706(0x188),{'access':{'allow':![],'reason':_0x261706(0x1f4),'token':null}})):(await tgBot[_0x261706(0x191)](_0x105429[_0x261706(0x1cd)]['id'],_0x261706(0x14d))['catch'](_0x60f936=>{telegramError(_0x60f936);}),io['to'](_0x55f4d7)[_0x261706(0x13a)]('status',{'access':{'allow':![],'reason':_0x261706(0x228),'token':null}}));}),tgBot[_0x4f2f4b(0x232)]('callback_query');}));}function getConfiguration(){const _0x88fd46=_0x43ee73;return dbConfig[_0x88fd46(0x14a)](_0x88fd46(0x1de))[_0x88fd46(0x10e)](_0x88fd46(0x22f))[_0x88fd46(0x241)]()||[];}function getEnabledBots(){const _0x69b22e=_0x43ee73;return dbConfig[_0x69b22e(0x14a)](_0x69b22e(0x1de))[_0x69b22e(0x10e)]('botID')['filter']({'status':_0x69b22e(0x1da)})[_0x69b22e(0x241)]()||[];}function getDisabledBots(){const _0x3900b7=_0x43ee73;return dbConfig[_0x3900b7(0x14a)](_0x3900b7(0x1de))[_0x3900b7(0x10e)]('botID')[_0x3900b7(0x131)]({'status':'disabled'})[_0x3900b7(0x241)]()||[];}function getSettings(){const _0x201044=_0x43ee73;return dbSettings[_0x201044(0x14a)]('settings')['value']()||{'timeshift':0x0};}function getSecure(){const _0x1078a6=_0x43ee73;return dbSecure['get'](_0x1078a6(0x1ac))[_0x1078a6(0x241)]()||{};}function getBlacklist(){const _0x208cb9=_0x43ee73;return dbSecure['get'](_0x208cb9(0x1e2))['value']()||[];}function broadcastToBots(_0x51193b,_0x556ce8){const _0x2c3e3c=_0x43ee73;config[_0x2c3e3c(0x165)](_0x241447=>{const _0x5ac544=_0x2c3e3c;if(_0x241447[_0x5ac544(0x188)]==_0x5ac544(0x1da)&&_0x241447['live']==_0x5ac544(0x200)){if(pid[_0x241447[_0x5ac544(0x22f)]])pid[_0x241447['botID']][_0x5ac544(0x14c)]({[_0x51193b]:_0x556ce8});}});}function storeSettings(_0x96cc1b,_0x5929ef=![]){const _0xc2ca56=_0x43ee73;_0x96cc1b={...settings,..._0x96cc1b};if(_0x5929ef&&_0x96cc1b[_0xc2ca56(0x16a)]!='************'&&_0x96cc1b[_0xc2ca56(0x16a)]!=''){const _0x493fc6=crypt[_0xc2ca56(0x230)](secure[_0xc2ca56(0x17a)],_0x96cc1b[_0xc2ca56(0x16a)])['message'][_0xc2ca56(0x203)]('@')[0x0],_0x2e1cd6=bcrypt['hashSync'](_0x493fc6,saltRounds);_0x96cc1b={..._0x96cc1b,'bbPassword':_0x2e1cd6};}if(_0x5929ef&&_0x96cc1b[_0xc2ca56(0x180)]!=_0xc2ca56(0x1e3)&&_0x96cc1b[_0xc2ca56(0x180)]!=''){const _0x388e0c=crypt[_0xc2ca56(0x230)](secure['privateKey'],_0x96cc1b[_0xc2ca56(0x180)])['message'][_0xc2ca56(0x203)]('@')[0x0];_0x96cc1b={..._0x96cc1b,'telegramToken':_0x388e0c};}const _0x12924b=_0x96cc1b['telegramToken']!=_0xc2ca56(0x1e3)&&_0x96cc1b[_0xc2ca56(0x180)]!=settings['telegramToken']||_0x96cc1b[_0xc2ca56(0x129)]!=settings[_0xc2ca56(0x129)],_0x26c550=_0x96cc1b[_0xc2ca56(0x180)]==''||_0x96cc1b[_0xc2ca56(0x129)]=='';if(_0x12924b)_0x96cc1b[_0xc2ca56(0x146)]=_0xc2ca56(0x1bc);for(const [_0x4a1be2,_0x4761c4]of Object[_0xc2ca56(0x240)](_0x96cc1b)){if(_0x4a1be2==_0xc2ca56(0x180)&&_0x4761c4=='************'){_0x96cc1b[_0xc2ca56(0x180)]=settings[_0xc2ca56(0x180)];continue;};if(_0x4a1be2==_0xc2ca56(0x16a)&&_0x4761c4=='************'){_0x96cc1b[_0xc2ca56(0x16a)]=settings[_0xc2ca56(0x16a)];continue;};dbSettings[_0xc2ca56(0x205)](_0xc2ca56(0x18a)+_0x4a1be2,_0x4761c4)[_0xc2ca56(0x1c1)]();}settings=_0x96cc1b,io['to']('botmanager')[_0xc2ca56(0x13a)](_0xc2ca56(0x176),cleanSettings()),broadcastToBots(_0xc2ca56(0x211),settings[_0xc2ca56(0x211)]);if(_0x12924b&&!_0x26c550)initTelegram();if(_0x12924b&&_0x26c550)disableTelegram();getAllClients()[_0xc2ca56(0x165)](_0x27f558=>{const _0x42d4d8=_0xc2ca56;getSocket(_0x27f558['id'])[_0x42d4d8(0x13a)](_0x42d4d8(0x188),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x431f84,_0x22f682){const _0x5db7cb=_0x43ee73;dbSettings[_0x5db7cb(0x205)]('settings.'+_0x431f84,_0x22f682)[_0x5db7cb(0x1c1)](),settings=getSettings(),io['to'](_0x5db7cb(0x19e))[_0x5db7cb(0x13a)](_0x5db7cb(0x176),cleanSettings());}function storeSecure(_0x3628bd){const _0x274a1e=_0x43ee73;dbSecure['get']('secure')['push'](_0x3628bd)[_0x274a1e(0x1c1)](),secure=_0x3628bd;}function addBlacklist(_0x22d93b){const _0x56b483=_0x43ee73;cleanBlacklist();let _0x13d706;devices[_0x22d93b][_0x56b483(0x1ae)]?_0x13d706=Math[_0x56b483(0x213)](devices[_0x22d93b][_0x56b483(0x1ae)]['expiry'],loginExpiry):_0x13d706=loginExpiry,dbSecure['get'](_0x56b483(0x1e2))[_0x56b483(0x248)]({'expiry':new Date()[_0x56b483(0x1fd)]()+_0x13d706*0x3c*0x3e8,'token':devices[_0x22d93b][_0x56b483(0x177)]['token']})[_0x56b483(0x1c1)](),blacklist=dbSecure['get'](_0x56b483(0x1e2))[_0x56b483(0x241)]();}function cleanBlacklist(){const _0x273cfe=_0x43ee73;let _0x2ef38a=dbSecure[_0x273cfe(0x14a)]('blacklist')[_0x273cfe(0x122)]()[_0x273cfe(0x241)](),_0x242575=new Date()[_0x273cfe(0x1fd)]();_0x2ef38a[_0x273cfe(0x165)](_0xd6c5c9=>{const _0x309986=_0x273cfe;_0xd6c5c9[_0x309986(0x195)]<_0x242575&&dbSecure[_0x309986(0x14a)]('blacklist')[_0x309986(0x1d3)]({'expiry':_0xd6c5c9[_0x309986(0x195)]})[_0x309986(0x1c1)]();});}function initStates(){const _0xc64e04=_0x43ee73;let _0x28abbb=getConfiguration();_0x28abbb[_0xc64e04(0x165)](_0x510097=>{const _0x5bb5a1=_0xc64e04;_0x510097[_0x5bb5a1(0x225)]=_0x5bb5a1(0x16d);}),storeConfiguration(_0x28abbb);}function onKeys(){const _0x84acf5=new RSA();return new Promise(_0x528847=>{const _0x1fb25b=_0x38d3;_0x84acf5[_0x1fb25b(0x168)]()[_0x1fb25b(0x1c0)](_0x388c34=>{_0x528847(_0x388c34);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x8b806a=_0x43ee73;let _0x5dc846=getConfiguration(),_0x15d653=![];_0x5dc846[_0x8b806a(0x165)](_0x432e03=>{const _0x32d1f2=_0x8b806a;if(_0x432e03[_0x32d1f2(0x188)]==_0x32d1f2(0x200))_0x432e03[_0x32d1f2(0x188)]=_0x32d1f2(0x1da),_0x15d653=!![];else _0x432e03[_0x32d1f2(0x188)]==_0x32d1f2(0x16d)&&(_0x432e03[_0x32d1f2(0x188)]='disabled',_0x15d653=!![]);});if(_0x15d653)storeConfiguration(_0x5dc846);let _0x4c863b=getSecure();if(!_0x4c863b[_0x8b806a(0x160)]('secret')){let _0x201dcc=await generateKeys();_0x4c863b['publicKey']=_0x201dcc[_0x8b806a(0x19a)],_0x4c863b[_0x8b806a(0x17a)]=_0x201dcc[_0x8b806a(0x17a)],_0x4c863b['secret']=crypto[_0x8b806a(0x1c9)](0x20)['toString'](_0x8b806a(0x1a8));;storeSecure(_0x4c863b);}let _0x1df22c=getSettings();_0x15d653=![];!_0x1df22c[_0x8b806a(0x160)](_0x8b806a(0x161))&&(_0x1df22c[_0x8b806a(0x161)]=![],_0x1df22c['bbUsername']='',_0x1df22c['bbPassword']='',_0x1df22c[_0x8b806a(0x155)]=![],_0x15d653=!![]);!_0x1df22c[_0x8b806a(0x160)](_0x8b806a(0x156))&&(_0x1df22c[_0x8b806a(0x156)]=![],_0x1df22c[_0x8b806a(0x22e)]=[],_0x1df22c['temporaryAccessAllowed']=![],_0x15d653=!![]);if(!_0x1df22c[_0x8b806a(0x160)](_0x8b806a(0x1c7))){if(_0x1df22c[_0x8b806a(0x231)])_0x1df22c[_0x8b806a(0x1c7)]=!![];else _0x1df22c[_0x8b806a(0x1c7)]=![];_0x15d653=!![];}if(_0x15d653)storeSettings(_0x1df22c);}function storeConfiguration(_0x6fee55){const _0x380c40=_0x43ee73;dbConfig[_0x380c40(0x14a)](_0x380c40(0x1de))[_0x380c40(0x1d3)]()[_0x380c40(0x1c1)](),dbConfig[_0x380c40(0x14a)](_0x380c40(0x1de))[_0x380c40(0x248)](..._0x6fee55)[_0x380c40(0x1c1)](),config=_0x6fee55;}function resetPassword(){const _0xafc8aa=_0x43ee73;tgBot&&settings[_0xafc8aa(0x231)]&&(tgBot[_0xafc8aa(0x232)](_0xafc8aa(0x130)),tgBot['sendMessage'](settings[_0xafc8aa(0x231)],_0xafc8aa(0x1cc),{'parse_mode':_0xafc8aa(0x1f5),'reply_markup':{'inline_keyboard':[[{'text':_0xafc8aa(0x1b8),'callback_data':_0xafc8aa(0x1b8)},{'text':'no','callback_data':'no'}]]}})[_0xafc8aa(0x1bb)](_0x5b8820=>{telegramError(_0x5b8820);}),tgBot['on'](_0xafc8aa(0x130),async _0x32b558=>{const _0x46f6a3=_0xafc8aa,_0x2b48eb=_0x32b558[_0x46f6a3(0x183)],_0x5934ee=_0x32b558['message'];tgBot[_0x46f6a3(0x17f)](_0x32b558['id'])[_0x46f6a3(0x1c0)](async()=>{const _0x16da05=_0x46f6a3;if(_0x2b48eb!='no'){const _0x1acec2=0xf,_0xc27891=_0x16da05(0x154),_0x35ecfe=Array[_0x16da05(0x1a2)](crypto[_0x16da05(0x23f)](new Uint32Array(_0x1acec2)))[_0x16da05(0x1aa)](_0x1c4e00=>_0xc27891[_0x1c4e00%_0xc27891[_0x16da05(0x10c)]])[_0x16da05(0x115)](''),_0x2f1522=bcrypt[_0x16da05(0x1ee)](_0x35ecfe,saltRounds);storeSettings({'bbPassword':_0x2f1522}),await tgBot[_0x16da05(0x191)](_0x5934ee[_0x16da05(0x1cd)]['id'],_0x16da05(0x18b)+_0x35ecfe,{'parse_mode':_0x16da05(0x1f5)})[_0x16da05(0x1bb)](_0x241849=>{telegramError(_0x241849);});}else await tgBot[_0x16da05(0x191)](_0x5934ee[_0x16da05(0x1cd)]['id'],'Password\x20reset\x20rejected')[_0x16da05(0x1bb)](_0xe3a706=>{telegramError(_0xe3a706);});}),tgBot[_0x46f6a3(0x232)](_0x46f6a3(0x130));}));}function logging(_0x5760ad){const _0x38e698=_0x43ee73;console[_0x38e698(0x111)](getTimeStamp()+_0x38e698(0x13f)+_0x5760ad);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!='orders')tgBot[_0x38e698(0x191)](settings[_0x38e698(0x231)],_0x38e698(0x179)+_0x5760ad)[_0x38e698(0x1bb)](_0x4c414f=>{telegramError(_0x4c414f);});}function getServerTime(){const _0x58ea0b=_0x43ee73,_0x4ee5a5=new Date();return _0x4ee5a5[_0x58ea0b(0x1bd)]()+'/'+(_0x4ee5a5[_0x58ea0b(0x244)]()+0x1)[_0x58ea0b(0x167)]()[_0x58ea0b(0x21a)](0x2,'0')+'/'+_0x4ee5a5[_0x58ea0b(0x1e1)]()[_0x58ea0b(0x167)]()[_0x58ea0b(0x21a)](0x2,'0')+'\x20'+_0x4ee5a5['getHours']()[_0x58ea0b(0x167)]()['padStart'](0x2,'0')+':'+_0x4ee5a5['getMinutes']()['toString']()[_0x58ea0b(0x21a)](0x2,'0')+':'+_0x4ee5a5[_0x58ea0b(0x227)]()[_0x58ea0b(0x167)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x259f08=_0x43ee73,_0x4e23fd=shiftedTime();return _0x4e23fd['getFullYear']()+'/'+(_0x4e23fd[_0x259f08(0x244)]()+0x1)[_0x259f08(0x167)]()['padStart'](0x2,'0')+'/'+_0x4e23fd[_0x259f08(0x1e1)]()[_0x259f08(0x167)]()['padStart'](0x2,'0')+'\x20'+_0x4e23fd[_0x259f08(0x24b)]()[_0x259f08(0x167)]()[_0x259f08(0x21a)](0x2,'0')+':'+_0x4e23fd[_0x259f08(0x24a)]()[_0x259f08(0x167)]()[_0x259f08(0x21a)](0x2,'0')+':'+_0x4e23fd['getSeconds']()[_0x259f08(0x167)]()[_0x259f08(0x21a)](0x2,'0');}function shiftedTime(){const _0x57fd64=_0x43ee73,_0x359aa2=new Date();let _0x409c0d=_0x359aa2;if(settings[_0x57fd64(0x211)]&&settings[_0x57fd64(0x211)]!==0x0)_0x409c0d=fns['add'](_0x359aa2,{'hours':settings[_0x57fd64(0x211)]});return _0x409c0d;}function startScheduler(){const _0x1c74f5=_0x43ee73;let _0x472497=new Date()[_0x1c74f5(0x11c)]();_0x472497==0x1&&backupConfigFiles();_0x472497==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5c14b4=_0x43ee73;fs[_0x5c14b4(0x193)](configpath,{'withFileTypes':!![]})[_0x5c14b4(0x165)](_0x38246a=>{const _0x10b7e1=_0x5c14b4;if(!_0x38246a[_0x10b7e1(0x1d1)]())fs[_0x10b7e1(0x20a)](configpath+_0x38246a[_0x10b7e1(0x12c)],configbackuppath+_0x38246a[_0x10b7e1(0x12c)]);});}function triggerAnalytics(){const _0x2fa0cf=_0x43ee73;analytics[_0x2fa0cf(0x134)]({'title':_0x2fa0cf(0x126),'href':_0x2fa0cf(0x164),'path':'/v'+serverversion});}function validateCredentials(_0x583739,_0x6524ab){const _0x12c425=_0x43ee73;if(_0x583739['username']==settings[_0x12c425(0x246)]&&bcrypt['compareSync'](_0x583739[_0x12c425(0x159)],settings[_0x12c425(0x16a)])){if(settings[_0x12c425(0x155)])return{'allow':![],'reason':_0x12c425(0x1b1),'token':null};else{const _0x373b4f=generateLoginToken(_0x6524ab);return{'allow':!![],'reason':_0x12c425(0x247),'token':_0x373b4f};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x3db43b){const _0x12960d=_0x43ee73,_0x4e299b=generateLoginToken(_0x3db43b);return{'allow':!![],'reason':_0x12960d(0x247),'token':_0x4e299b};}function validateAccess(_0x1afe53,_0xdc41bb){const _0x5a4957=_0x43ee73;let _0x247c57=devices[_0xdc41bb]['ip'],_0xc6834;const _0x42150f=_0x28fdd4=>{const _0x3af489=_0x38d3;if(settings[_0x3af489(0x161)]){if(settings[_0x3af489(0x155)]){if(telegram2FaApproved(_0xdc41bb)){const _0x3c4940=generateLoginToken(_0xdc41bb);return{'allow':!![],'reason':_0x3af489(0x10d),'token':_0x3c4940};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0xc6834=validToken(_0x28fdd4,_0xdc41bb),_0xc6834[_0x3af489(0x160)](_0x3af489(0x1ff))?{'allow':!![],'reason':_0x3af489(0x11d),'token':_0x28fdd4}:{'allow':![],'reason':_0x3af489(0x114),'token':null};}else return{'allow':!![],'reason':_0x3af489(0x1b7),'token':null};};if(settings[_0x5a4957(0x156)]){let _0x5bb4af=[...settings[_0x5a4957(0x22e)],_0x5a4957(0x23b),_0x5a4957(0x11f),_0x5a4957(0x1b4)];if(_0x5bb4af[_0x5a4957(0x1af)](_0x247c57))return _0x42150f(_0x1afe53);else{_0xc6834=validToken(_0x1afe53,_0xdc41bb);if(_0xc6834[_0x5a4957(0x160)](_0x5a4957(0x1ff)))return _0x42150f(_0x1afe53);else{if(telegramIpApproved(_0xdc41bb)){const _0x2bf5a8=generateToken(_0xdc41bb);return _0xc6834=_0x42150f(_0x1afe53),_0xc6834[_0x5a4957(0x10b)]?{'allow':!![],'reason':_0x5a4957(0x139),'token':_0x2bf5a8}:_0xc6834;}else return settings[_0x5a4957(0x144)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x42150f(_0x1afe53);}function timelyDecrypt(_0x357596,_0x5acad8=!![]){const _0x5139ac=_0x43ee73;if(_0x357596)try{const _0x51d5a5=crypt[_0x5139ac(0x230)](secure['privateKey'],_0x357596)[_0x5139ac(0x22d)],_0x16ed8c=_0x51d5a5[_0x5139ac(0x203)]('@')[0x0],_0x103018=_0x51d5a5[_0x5139ac(0x203)]('@')[0x1],_0x4ea354=new Date()['getTime']();if(_0x5acad8){if(_0x4ea354-_0x103018<maxSecretAge*0x3e8)return _0x16ed8c;else return![];}else return _0x16ed8c;}catch(_0x35e95d){return![];}else return![];}const validToken=(_0x25dfb6,_0x44d662)=>{const _0x41c70b=_0x43ee73,_0x2878e1=devices[_0x44d662]['ip'];if(!_0x25dfb6)return{'error':_0x41c70b(0x1f6)};for(let _0x535ce6 of blacklist){if(_0x535ce6[_0x41c70b(0x14e)]==_0x25dfb6)return{'error':_0x41c70b(0x218)};}let _0x583bd1;try{_0x583bd1=jwt[_0x41c70b(0x23d)](_0x25dfb6,secure['secret']+_0x44d662);}catch{return{'error':_0x41c70b(0x11a)};}if(!_0x583bd1[_0x41c70b(0x160)](_0x41c70b(0x116))&&!_0x583bd1[_0x41c70b(0x160)]('username')||!_0x583bd1['hasOwnProperty'](_0x41c70b(0x16e)))return{'error':_0x41c70b(0x1cb)};if(!_0x583bd1[_0x41c70b(0x160)](_0x41c70b(0x208))&&_0x583bd1['hasOwnProperty']('clientip')){const {clientip:_0x2ef195}=_0x583bd1;return _0x2878e1==_0x2ef195?{'success':_0x41c70b(0x1c5)}:{'error':_0x41c70b(0x169)};}else{if(_0x583bd1[_0x41c70b(0x160)](_0x41c70b(0x208))&&_0x583bd1[_0x41c70b(0x160)](_0x41c70b(0x116))){const {username:_0x153205,clientip:_0x4ff780}=_0x583bd1;return settings[_0x41c70b(0x246)]==_0x153205&&_0x2878e1==_0x4ff780?{'success':_0x41c70b(0x1c5)}:{'error':_0x41c70b(0x21c)};}}},generateLoginToken=_0x188735=>{const _0x484e75=_0x43ee73;if(_0x188735){const _0x38ce0e=devices[_0x188735]['ip'];return jwt[_0x484e75(0x112)]({'username':settings['bbUsername'],'clientip':_0x38ce0e},secure[_0x484e75(0x236)]+_0x188735,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2ef9e6=>{const _0x29f921=_0x43ee73;if(_0x2ef9e6){const _0x4f9d81=devices[_0x2ef9e6]['ip'];return jwt[_0x29f921(0x112)]({'clientip':_0x4f9d81},secure[_0x29f921(0x236)]+_0x2ef9e6,{'expiresIn':devices[_0x2ef9e6][_0x29f921(0x1ae)][_0x29f921(0x195)]*0x3c});}else return![];},telegramIpApproved=_0x51e4b7=>{const _0x337e4f=_0x43ee73;let _0x525c68=![];return devices[_0x51e4b7][_0x337e4f(0x1ae)]&&devices[_0x51e4b7][_0x337e4f(0x1ae)][_0x337e4f(0x195)]!='reject'&&(_0x525c68=devices[_0x51e4b7][_0x337e4f(0x1ae)][_0x337e4f(0x116)]==devices[_0x51e4b7]['ip']&&new Date()[_0x337e4f(0x1fd)]()-devices[_0x51e4b7]['telegramIpApproval']['timestamp']<devices[_0x51e4b7][_0x337e4f(0x1ae)][_0x337e4f(0x195)]*0x3c*0x3e8),_0x525c68;},telegram2FaApproved=_0x3872df=>{const _0x19cc29=_0x43ee73;let _0x3503bd=![];return devices[_0x3872df][_0x19cc29(0x121)]&&devices[_0x3872df][_0x19cc29(0x121)]['expiry']!='reject'&&(_0x3503bd=devices[_0x3872df][_0x19cc29(0x121)][_0x19cc29(0x116)]==devices[_0x3872df]['ip']&&new Date()[_0x19cc29(0x1fd)]()-devices[_0x3872df][_0x19cc29(0x121)][_0x19cc29(0x18e)]<devices[_0x3872df]['telegram2FaApproval'][_0x19cc29(0x195)]*0x3c*0x3e8),_0x3503bd;},normalizeIP=_0x6c5416=>{const _0x2c428d=_0x43ee73;let _0x4fff2b=null,_0x3f1371=null;if(ipaddr['isValid'](_0x6c5416)){const _0x157c79=ipaddr['parse'](_0x6c5416);_0x157c79['kind']()===_0x2c428d(0x1dd)?(_0x157c79[_0x2c428d(0x20c)]()&&(_0x4fff2b=_0x157c79[_0x2c428d(0x20b)]()[_0x2c428d(0x167)]()),_0x3f1371=_0x157c79[_0x2c428d(0x167)]()):(_0x4fff2b=_0x157c79['toString'](),_0x3f1371=_0x157c79[_0x2c428d(0x23a)]()[_0x2c428d(0x167)]());}return{'show':_0x4fff2b?_0x4fff2b:_0x3f1371,'store':_0x3f1371};};