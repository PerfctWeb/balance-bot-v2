const _0x40c769=_0x5aea;(function(_0x353620,_0x43e3d7){const _0x4c4a7a=_0x5aea,_0x3fcef7=_0x353620();while(!![]){try{const _0xa7be96=parseInt(_0x4c4a7a(0x22c))/0x1*(-parseInt(_0x4c4a7a(0x168))/0x2)+parseInt(_0x4c4a7a(0x20b))/0x3*(-parseInt(_0x4c4a7a(0x1af))/0x4)+parseInt(_0x4c4a7a(0x174))/0x5*(-parseInt(_0x4c4a7a(0x1aa))/0x6)+parseInt(_0x4c4a7a(0x285))/0x7+parseInt(_0x4c4a7a(0x1de))/0x8*(-parseInt(_0x4c4a7a(0x176))/0x9)+-parseInt(_0x4c4a7a(0x16b))/0xa+-parseInt(_0x4c4a7a(0x19b))/0xb*(-parseInt(_0x4c4a7a(0x29b))/0xc);if(_0xa7be96===_0x43e3d7)break;else _0x3fcef7['push'](_0x3fcef7['shift']());}catch(_0x37fe33){_0x3fcef7['push'](_0x3fcef7['shift']());}}}(_0x1523,0x95732));const _0x561177=function(){let _0x523a90=!![];return function(_0x4858d2,_0x1205ba){const _0x48a655=_0x523a90?function(){if(_0x1205ba){const _0x1d4db2=_0x1205ba['apply'](_0x4858d2,arguments);return _0x1205ba=null,_0x1d4db2;}}:function(){};return _0x523a90=![],_0x48a655;};}(),_0x3f238e=_0x561177(this,function(){const _0x47fd0a=_0x5aea;return _0x3f238e[_0x47fd0a(0x290)]()[_0x47fd0a(0x21d)](_0x47fd0a(0x1c1))['toString']()[_0x47fd0a(0x258)](_0x3f238e)['search'](_0x47fd0a(0x1c1));});_0x3f238e();'use strict';process['env'][_0x40c769(0x237)]=0x1;const childProcess=require('child_process'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x40c769(0x204)),low=require(_0x40c769(0x257)),path=require(_0x40c769(0x1f7)),crypto=require(_0x40c769(0x25e)),Crypt=require(_0x40c769(0x271))[_0x40c769(0x277)],RSA=require(_0x40c769(0x271))['RSA'],bcrypt=require(_0x40c769(0x24f)),jwt=require(_0x40c769(0x280)),analyticsLib=require('analytics')[_0x40c769(0x25f)],googleAnalytics=require('@analytics/google-analytics')[_0x40c769(0x25f)],ipaddr=require(_0x40c769(0x1ad)),argv=require(_0x40c769(0x214))(process[_0x40c769(0x262)]['slice'](0x2))[_0x40c769(0x262)],PORT=argv[_0x40c769(0x18a)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x40c769(0x184)](_0x40c769(0x19a)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x40c769(0x164)](0x1);const HOST=argv['host']||null,userID=argv[_0x40c769(0x1e9)]||'';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x40c769(0x21b),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x40c769(0x193)),configpath=userID?bbpath+_0x40c769(0x264)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x40c769(0x23f);!fs[_0x40c769(0x29a)](configpath)&&fs[_0x40c769(0x183)](configpath);!fs[_0x40c769(0x29a)](configbackuppath)&&fs[_0x40c769(0x183)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x40c769(0x26b)]({'bots':[]})[_0x40c769(0x244)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x40c769(0x26b)]({'settings':{'timeshift':0x0}})[_0x40c769(0x244)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x40c769(0x26b)]({'secure':{},'blacklist':[]})[_0x40c769(0x244)]();let crypt=new Crypt({'md':_0x40c769(0x288),'rsaStandard':_0x40c769(0x185)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x40c769(0x239))[_0x40c769(0x279)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x40c769(0x230)),app=express(),http=require(_0x40c769(0x19e))['createServer'](app);app['use'](express['static'](path['join'](__dirname,bbpath2,_0x40c769(0x18c)))),app[_0x40c769(0x1f4)](express['static'](path[_0x40c769(0x281)](__dirname,bbpath2,_0x40c769(0x17d)))),app[_0x40c769(0x1da)]('/',function(_0x5a10e3,_0x1d9280){const _0x4e3d4d=_0x40c769;_0x1d9280[_0x4e3d4d(0x245)](path['join'](__dirname,bbpath2,_0x4e3d4d(0x18c),'index.html'));}),app['get']('/:bot',function(_0x10f16e,_0x19aa23){const _0x569b72=_0x40c769;_0x19aa23['sendFile'](path['join'](__dirname,bbpath2,_0x569b72(0x17d),_0x569b72(0x1f5)));}),app[_0x40c769(0x1da)](_0x40c769(0x1a7),(_0x44bc0a,_0x232c9a)=>{const _0x493ec8=_0x40c769;_0x232c9a[_0x493ec8(0x245)](path['join'](__dirname,bbpath2,_0x493ec8(0x17d),_0x493ec8(0x1f5)));}),app[_0x40c769(0x1da)](_0x40c769(0x25d),(_0x24fbe2,_0x4e1b3a)=>{const _0x1f5ae4=_0x40c769;_0x4e1b3a[_0x1f5ae4(0x245)](path['join'](__dirname,bbpath2,'build',_0x1f5ae4(0x1f5)));}),app[_0x40c769(0x1da)]('/:bot/coins',(_0x430e6d,_0x1897f1)=>{const _0x173663=_0x40c769;_0x1897f1[_0x173663(0x245)](path[_0x173663(0x281)](__dirname,bbpath2,'build',_0x173663(0x1f5)));}),app[_0x40c769(0x1da)](_0x40c769(0x1f2),(_0x11249a,_0x310791)=>{const _0x23ed28=_0x40c769;_0x310791[_0x23ed28(0x245)](path[_0x23ed28(0x281)](__dirname,bbpath2,_0x23ed28(0x17d),_0x23ed28(0x1f5)));}),app[_0x40c769(0x1da)]('/:bot/configuration',(_0x55fd8b,_0xad40ff)=>{const _0x5116f6=_0x40c769;_0xad40ff[_0x5116f6(0x245)](path['join'](__dirname,bbpath2,_0x5116f6(0x17d),_0x5116f6(0x1f5)));}),app[_0x40c769(0x1da)](_0x40c769(0x1c2),(_0x4f90f7,_0x4d2310)=>{const _0x466470=_0x40c769;_0x4d2310[_0x466470(0x245)](path['join'](__dirname,bbpath2,_0x466470(0x17d),_0x466470(0x1f5)));});if(HOST)http[_0x40c769(0x282)](PORT,HOST);else http[_0x40c769(0x282)](PORT);const io=require(_0x40c769(0x27f))(http,{}),analytics=analyticsLib({'app':_0x40c769(0x163),'plugins':[googleAnalytics({'trackingId':_0x40c769(0x272)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x40c769(0x1a0)]&&settings[_0x40c769(0x1a0)]!=''&&settings[_0x40c769(0x201)]&&settings[_0x40c769(0x201)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x13dee0=_0x40c769;console[_0x13dee0(0x184)](''),console['log'](_0x13dee0(0x221)),logging(_0x13dee0(0x1e1)+PORT),console[_0x13dee0(0x184)](_0x13dee0(0x221));if(config[_0x13dee0(0x211)]!=0x0)config[_0x13dee0(0x1d2)](_0xe19f15=>{const _0x3ef03b=_0x13dee0;if(_0xe19f15['status']==_0x3ef03b(0x1d6)||_0xe19f15['status']==_0x3ef03b(0x212))logging(_0x3ef03b(0x28c)+_0xe19f15[_0x3ef03b(0x195)]+_0x3ef03b(0x1c4)+_0xe19f15[_0x3ef03b(0x23d)]),startBot([_0xe19f15[_0x3ef03b(0x195)],userID],{'cwd':bbpath},function(_0x53782b){if(_0x53782b)logging(_0x53782b);});else(_0xe19f15['status']==_0x3ef03b(0x27d)||_0xe19f15[_0x3ef03b(0x1b8)]=='new-disabled')&&logging(_0x3ef03b(0x1f3)+_0xe19f15[_0x3ef03b(0x195)]+_0x3ef03b(0x1c4)+_0xe19f15[_0x3ef03b(0x23d)]);});else!newBot&&console['log'](_0x13dee0(0x1a3));if(newBot)addBot();console[_0x13dee0(0x184)](_0x13dee0(0x221)),console[_0x13dee0(0x184)]('');}function startSocket(){const _0x43fad7=_0x40c769;io['on'](_0x43fad7(0x23b),_0x1ac41c=>{const _0x990976=_0x43fad7;let _0xc63392,_0x236593,_0x4fed5e,_0x38e366,_0x52067b;const _0xfda9cd=_0x1ac41c[_0x990976(0x215)]['headers']['referer'];_0x236593=_0xfda9cd[_0x990976(0x22d)](/bot[0-9]{3}/);if(_0x236593)_0x4fed5e=_0x236593[0x0][_0x990976(0x22d)](/[0-9]{3}/);if(_0x4fed5e)_0xc63392=_0x4fed5e[0x0];else _0xc63392=_0x990976(0x169);const _0x2880ed=_0x1ac41c['handshake'][_0x990976(0x217)][_0x990976(0x205)];if(!_0x2880ed)_0x1ac41c[_0x990976(0x291)]('status',{'publicKey':secure[_0x990976(0x1b7)]});else{_0x38e366=timelyDecrypt(_0x2880ed,![]);if(!_0x38e366)_0x1ac41c[_0x990976(0x291)](_0x990976(0x1b8),{'publicKey':secure[_0x990976(0x1b7)]});else{_0x52067b=normalizeIP(_0x1ac41c[_0x990976(0x286)][_0x990976(0x26d)])[_0x990976(0x1b5)];if(!devices[_0x38e366])devices[_0x38e366]={'uuid':_0x38e366,'access':{'token':null}};devices[_0x38e366]['ip']=_0x52067b;const _0x1c5ec0=addClient(_0x1ac41c['id'],_0x38e366,_0xc63392);setAccess(_0x1c5ec0),_0x1ac41c['on']('login',_0xab4789=>{const _0x11f538=_0x990976,_0x411acd=timelyDecrypt(_0xab4789[_0x11f538(0x1d7)]);if(_0x411acd){_0xab4789={'username':_0xab4789[_0x11f538(0x17f)],'password':_0x411acd},devices[_0x38e366][_0x11f538(0x17b)]=validateCredentials(_0xab4789,_0x38e366);if(devices[_0x38e366][_0x11f538(0x17b)][_0x11f538(0x27a)]==![]&&devices[_0x38e366][_0x11f538(0x17b)][_0x11f538(0x1c5)]==_0x11f538(0x23e))_0x1ac41c['emit'](_0x11f538(0x1b8),{'access':devices[_0x38e366]['access']}),loginAccess2FA(_0x38e366,_0x52067b);else{if(devices[_0x38e366]['access'][_0x11f538(0x27a)]==![]&&devices[_0x38e366][_0x11f538(0x17b)][_0x11f538(0x1c5)]=='invalid\x20credentials')_0x1ac41c[_0x11f538(0x291)](_0x11f538(0x1b8),{'access':devices[_0x38e366]['access']});else devices[_0x38e366][_0x11f538(0x17b)][_0x11f538(0x27a)]&&devices[_0x38e366][_0x11f538(0x17b)][_0x11f538(0x1c5)]==_0x11f538(0x289)&&(getClientsWithUuid(_0x38e366)[_0x11f538(0x1d2)](_0x3491eb=>{setAccess(_0x3491eb);}),setTokenRefresh(_0x38e366),setSessionTimeout('login',_0x38e366));}}else logging(_0x11f538(0x162));}),_0x1ac41c['on'](_0x990976(0x188),()=>{resetPassword();}),_0x1ac41c['on']('disconnect',_0x138852=>{removeClient(_0x1ac41c['id']);});}}});}function initClient(_0xb81e9e){const _0x417769=_0x40c769;if(_0xb81e9e!=_0x417769(0x169)&&config[_0x417769(0x20a)]!=''){if(pid[_0xb81e9e])pid[_0xb81e9e][_0x417769(0x26e)]({'function':_0x417769(0x270),'args':null});}}function getSocket(_0x3ecee7){const _0xd4654b=_0x40c769;return io[_0xd4654b(0x1c9)][_0xd4654b(0x1c9)][_0xd4654b(0x1da)](_0x3ecee7);}function setAccess(_0x1f2638){const _0x30836d=_0x40c769,_0x3c0b0b=getSocket(_0x1f2638['id']),_0x5c2b87=_0x1f2638[_0x30836d(0x28e)],_0xae0350=_0x1f2638[_0x30836d(0x1b3)];devices[_0x5c2b87]['access']=validateAccess(devices[_0x5c2b87][_0x30836d(0x17b)][_0x30836d(0x27e)],_0x5c2b87),_0x3c0b0b[_0x30836d(0x281)](_0x5c2b87);if(devices[_0x5c2b87][_0x30836d(0x17b)][_0x30836d(0x27a)]){_0x3c0b0b[_0x30836d(0x281)](_0xae0350);if(_0xae0350=='botmanager')initializeSocketBotManager(_0x3c0b0b);else initializeSocketBot(_0x3c0b0b);initClient(_0xae0350);}devices[_0x5c2b87][_0x30836d(0x17b)][_0x30836d(0x27e)]&&devices[_0x5c2b87]['access'][_0x30836d(0x1c5)]==_0x30836d(0x295)&&setSessionTimeout(_0x30836d(0x254),_0x5c2b87),devices[_0x5c2b87][_0x30836d(0x17b)]['token']&&devices[_0x5c2b87][_0x30836d(0x17b)][_0x30836d(0x1c5)]==_0x30836d(0x28f)&&setSessionTimeout('login',_0x5c2b87),_0x3c0b0b['emit'](_0x30836d(0x1b8),{'status':_0x1f2638['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5c2b87][_0x30836d(0x17b)],'externalip':devices[_0x5c2b87]['ip'],'publicKey':secure[_0x30836d(0x1b7)],'validInstallation':validInstallation}),devices[_0x5c2b87][_0x30836d(0x17b)][_0x30836d(0x27a)]==![]&&devices[_0x5c2b87]['access'][_0x30836d(0x1c5)]==_0x30836d(0x24c)&&temporaryAccess2FA(_0x5c2b87,devices[_0x5c2b87]['ip']);}function setSessionTimeout(_0x11ed91,_0x47cd0f){const _0x350853=_0x40c769;let _0x54a2f7;if(_0x11ed91=='login')_0x54a2f7=loginExpiry*0x3c*0x3e8;else _0x54a2f7=devices[_0x47cd0f][_0x350853(0x236)][_0x350853(0x171)]*0x3c*0x3e8-(new Date()[_0x350853(0x21c)]()-devices[_0x47cd0f][_0x350853(0x236)][_0x350853(0x1a5)]);if(devices[_0x47cd0f]['pidExpireLogin'])clearTimeout(devices[_0x47cd0f][_0x350853(0x25c)]);devices[_0x47cd0f][_0x350853(0x25c)]=setTimeout(()=>{const _0x28c8be=_0x350853;if(devices[_0x47cd0f][_0x28c8be(0x198)])clearTimeout(devices[_0x47cd0f][_0x28c8be(0x198)]);removeSocketListeners(_0x47cd0f),addBlacklist(_0x47cd0f),devices[_0x47cd0f]['telegramIpApproval']=null,devices[_0x47cd0f][_0x28c8be(0x20f)]=null,devices[_0x47cd0f][_0x28c8be(0x17b)]['token']=null,devices[_0x47cd0f]['access']=validateAccess(devices[_0x47cd0f][_0x28c8be(0x17b)][_0x28c8be(0x27e)],_0x47cd0f),!(devices[_0x47cd0f][_0x28c8be(0x17b)][_0x28c8be(0x27a)]&&devices[_0x47cd0f][_0x28c8be(0x17b)][_0x28c8be(0x1c5)]==_0x28c8be(0x20e))&&(_0x11ed91==_0x28c8be(0x186)?io['to'](_0x47cd0f)[_0x28c8be(0x291)]('status',{'access':{'allow':![],'reason':_0x28c8be(0x251),'token':null}}):io['to'](_0x47cd0f)[_0x28c8be(0x291)](_0x28c8be(0x1b8),{'access':{'allow':![],'reason':_0x28c8be(0x250),'token':null}})),devices[_0x47cd0f][_0x28c8be(0x17b)][_0x28c8be(0x27e)]=null;},_0x54a2f7);}function setTokenRefresh(_0x272981){const _0x43899d=_0x40c769;if(devices[_0x272981]['pidRefreshToken'])clearTimeout(devices[_0x272981][_0x43899d(0x198)]);devices[_0x272981][_0x43899d(0x198)]=setTimeout(()=>{const _0x2b7c93=_0x43899d;getClientsWithUuid(_0x272981)['length']!=0x0?(devices[_0x272981][_0x2b7c93(0x17b)]=refreshToken(_0x272981),io['to'](_0x272981)['emit'](_0x2b7c93(0x1b8),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x272981]['access'],'externalip':devices[_0x272981]['ip'],'publicKey':secure[_0x2b7c93(0x1b7)],'validInstallation':validInstallation}),setTokenRefresh(_0x272981)):clearTimeout(devices[_0x272981][_0x2b7c93(0x198)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4390d2){const _0xc103bd=_0x40c769,_0xcbad2b=getClient(_0x4390d2['id'])[_0xc103bd(0x28e)];_0x4390d2[_0xc103bd(0x291)](_0xc103bd(0x1a1),config),_0x4390d2[_0xc103bd(0x291)](_0xc103bd(0x21a),cleanSettings()),_0x4390d2['on'](_0xc103bd(0x220),_0x285b24=>{const _0xd70c77=_0xc103bd;if(validateAccess(_0x285b24,_0xcbad2b)['allow'])addBot();else logging(_0xd70c77(0x1c3));}),_0x4390d2['on'](_0xc103bd(0x1e6),(_0x3ad74d,_0x545942)=>{const _0x14187d=_0xc103bd;if(validateAccess(_0x545942,_0xcbad2b)[_0x14187d(0x27a)])toggleBot(_0x3ad74d[_0x14187d(0x195)],_0x3ad74d[_0x14187d(0x1b8)],_0x3ad74d[_0x14187d(0x1c7)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4390d2['on'](_0xc103bd(0x234),(_0x35e086,_0x4d8922)=>{const _0x44ca9b=_0xc103bd;if(validateAccess(_0x4d8922,_0xcbad2b)[_0x44ca9b(0x27a)])deleteBot(_0x35e086);else logging(_0x44ca9b(0x16f));}),_0x4390d2['on'](_0xc103bd(0x197),(_0x414b81,_0x3f20e7)=>{if(validateAccess(_0x3f20e7,_0xcbad2b)['allow'])storeSettings(_0x414b81,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4390d2['on']('update-bb',(_0x4d50df,_0x12af6e)=>{const _0x3ae317=_0xc103bd;if(validateAccess(_0x12af6e,_0xcbad2b)[_0x3ae317(0x27a)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4390d2['on']('logout',_0x452b7e=>{const _0x474e2f=_0xc103bd;if(validateAccess(_0x452b7e,_0xcbad2b)['allow']){if(devices[_0xcbad2b][_0x474e2f(0x198)])clearTimeout(devices[_0xcbad2b][_0x474e2f(0x198)]);if(devices[_0xcbad2b]['pidExpireLogin'])clearTimeout(devices[_0xcbad2b][_0x474e2f(0x25c)]);removeSocketListeners(getClient(_0x4390d2['id'])[_0x474e2f(0x28e)]),addBlacklist(_0xcbad2b),devices[_0xcbad2b][_0x474e2f(0x236)]=null,devices[_0xcbad2b][_0x474e2f(0x20f)]=null,devices[_0xcbad2b][_0x474e2f(0x17b)]['token']=null,io['to'](getClient(_0x4390d2['id'])[_0x474e2f(0x28e)])[_0x474e2f(0x291)](_0x474e2f(0x1b8),{'access':{'allow':![],'reason':_0x474e2f(0x287),'token':null}});}else logging(_0x474e2f(0x268));});}function initializeSocketBot(_0x17267d){const _0x3a7b3a=_0x40c769,_0x4e2315=getClient(_0x17267d['id'])['bot'],_0x5b8010=getClient(_0x17267d['id'])[_0x3a7b3a(0x28e)];_0x17267d['on'](_0x3a7b3a(0x207),(_0x61de95,_0x14a786)=>{const _0x477d65=_0x3a7b3a;if(validateAccess(_0x14a786,_0x5b8010)[_0x477d65(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315][_0x477d65(0x26e)]({'function':_0x477d65(0x223),'args':_0x61de95});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x17267d['on'](_0x3a7b3a(0x293),(_0x476b5f,_0x1f2429)=>{const _0x41d0f6=_0x3a7b3a;if(validateAccess(_0x1f2429,_0x5b8010)[_0x41d0f6(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315][_0x41d0f6(0x26e)]({'function':'deleteHistoryAlerts','args':_0x476b5f});}else logging(_0x41d0f6(0x1d4));}),_0x17267d['on'](_0x3a7b3a(0x1ea),(_0x331e71,_0x39674c)=>{const _0x2de56d=_0x3a7b3a;if(validateAccess(_0x39674c,_0x5b8010)[_0x2de56d(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315][_0x2de56d(0x26e)]({'function':_0x2de56d(0x1dc),'args':_0x331e71});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x17267d['on'](_0x3a7b3a(0x299),(_0x4a3aaf,_0x38d364)=>{const _0xe291d0=_0x3a7b3a;if(validateAccess(_0x38d364,_0x5b8010)[_0xe291d0(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315][_0xe291d0(0x26e)]({'function':_0xe291d0(0x23c),'args':_0x4a3aaf});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x17267d['on'](_0x3a7b3a(0x1e5),(_0x10ae93,_0x2251b3)=>{const _0x2dd02d=_0x3a7b3a;if(validateAccess(_0x2251b3,_0x5b8010)['allow']){if(pid[_0x4e2315])pid[_0x4e2315][_0x2dd02d(0x26e)]({'function':_0x2dd02d(0x1f6),'args':_0x10ae93});}else logging(_0x2dd02d(0x1fc));}),_0x17267d['on'](_0x3a7b3a(0x209),_0x4f97b2=>{const _0x1e5254=_0x3a7b3a;if(validateAccess(_0x4f97b2,_0x5b8010)['allow']){if(pid[_0x4e2315])pid[_0x4e2315]['send']({'function':'getStartingBalances','args':null});}else logging(_0x1e5254(0x260));}),_0x17267d['on']('place-order',(_0x5db932,_0x444065)=>{const _0xa88c77=_0x3a7b3a;if(validateAccess(_0x444065,_0x5b8010)[_0xa88c77(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315][_0xa88c77(0x26e)]({'function':_0xa88c77(0x1f8),'args':_0x5db932});}else logging(_0xa88c77(0x1b0));}),_0x17267d['on']('cancel-loading',_0x3baac5=>{const _0x12334f=_0x3a7b3a;if(validateAccess(_0x3baac5,_0x5b8010)[_0x12334f(0x27a)]){if(pid[_0x4e2315])pid[_0x4e2315]['send']({'function':_0x12334f(0x249),'args':null});}else logging(_0x12334f(0x1e7));}),_0x17267d['on'](_0x3a7b3a(0x206),_0x3858d7=>{const _0x6e6d83=_0x3a7b3a;if(validateAccess(_0x3858d7,_0x5b8010)[_0x6e6d83(0x27a)]){if(devices[_0x5b8010][_0x6e6d83(0x198)])clearTimeout(devices[_0x5b8010][_0x6e6d83(0x198)]);if(devices[_0x5b8010][_0x6e6d83(0x25c)])clearTimeout(devices[_0x5b8010][_0x6e6d83(0x25c)]);removeSocketListeners(getClient(_0x17267d['id'])[_0x6e6d83(0x28e)]),addBlacklist(_0x5b8010),devices[_0x5b8010][_0x6e6d83(0x236)]=null,devices[_0x5b8010][_0x6e6d83(0x20f)]=null,devices[_0x5b8010]['access'][_0x6e6d83(0x27e)]=null,io['to'](getClient(_0x17267d['id'])[_0x6e6d83(0x28e)])[_0x6e6d83(0x291)](_0x6e6d83(0x1b8),{'access':{'allow':![],'reason':_0x6e6d83(0x287),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x26dc25){getClientsWithUuid(_0x26dc25)['forEach'](_0x40c740=>{const _0x461294=_0x5aea;getSocket(_0x40c740['id'])[_0x461294(0x25b)]();});}function cleanSettings(){const _0x8bd654=_0x40c769;let _0x448dba=settings;return settings[_0x8bd654(0x1a0)]&&settings[_0x8bd654(0x1a0)]!=''&&(_0x448dba={..._0x448dba,'telegramToken':_0x8bd654(0x1e2)}),settings[_0x8bd654(0x1cc)]&&settings['bbPassword']!=''&&(_0x448dba={..._0x448dba,'bbPassword':_0x8bd654(0x1e2)}),_0x448dba;}function updateBB(){const _0x2e7a68=_0x40c769;installingUpdate=!![],config[_0x2e7a68(0x1d2)](_0x5c76e9=>{restartBot(_0x5c76e9['botID']);}),process[_0x2e7a68(0x26e)]({'update':!![]},_0x4ba830=>{});}function startBot(_0x313244,_0x46c94b,_0x3cd0d3){const _0x3c1564=_0x40c769;let _0x323a1c=![];const _0x29fa38=_0x313244[0x0];_0x46c94b={..._0x46c94b,'stdio':[_0x3c1564(0x263),_0x3c1564(0x263),_0x3c1564(0x263),_0x3c1564(0x1e4)]},pid[_0x29fa38]=childProcess['fork'](botfile,_0x313244,_0x46c94b),pid[_0x29fa38]['on']('message',_0x333969=>{const _0x54de0b=_0x3c1564;switch(Object['keys'](_0x333969)[0x0]){case _0x54de0b(0x23d):updateBotName(_0x29fa38,_0x333969[_0x54de0b(0x23d)]);break;case'status':updateStatus(_0x29fa38,_0x333969['status']);break;case _0x54de0b(0x1c7):updateLive(_0x29fa38,_0x333969['live']);break;case'started':updateLive(_0x29fa38,_0x333969[_0x54de0b(0x1ff)]),io['to'](_0x29fa38)[_0x54de0b(0x291)](_0x54de0b(0x1b8),{'access':{'allow':![],'reason':_0x54de0b(0x170),'token':null}});break;case _0x54de0b(0x296):_0x333969['stop']==_0x54de0b(0x226)&&restartBot(_0x29fa38);_0x333969[_0x54de0b(0x296)]==_0x54de0b(0x261)&&toggleBot(_0x29fa38,'disabled',_0x54de0b(0x19c));break;case _0x54de0b(0x172):sendTelegram(_0x29fa38,_0x333969['telegram']);break;case _0x54de0b(0x17a):io['to'](_0x29fa38)[_0x54de0b(0x291)](_0x333969[_0x54de0b(0x17a)],_0x333969[_0x54de0b(0x166)]);break;}}),pid[_0x29fa38]['on'](_0x3c1564(0x1f9),function(_0x24d04e){if(_0x323a1c)return;_0x323a1c=!![],_0x3cd0d3(_0x24d04e);}),pid[_0x29fa38]['on'](_0x3c1564(0x164),function(_0x4d7e39){const _0x4a7c72=_0x3c1564;if(installingUpdate)return;if(_0x323a1c)return;_0x323a1c=!![],_0x3cd0d3(null);const _0x36a88d=dbConfig[_0x4a7c72(0x1da)]('bots')[_0x4a7c72(0x1cb)]({'botID':_0x29fa38})['value']();_0x36a88d&&(_0x36a88d[_0x4a7c72(0x1b8)]==_0x4a7c72(0x1d6)||_0x36a88d['status']=='new')&&(updateLive(_0x29fa38,_0x4a7c72(0x19c)),logging(_0x4a7c72(0x1c0)+_0x29fa38),startBot([_0x29fa38,userID],{'cwd':bbpath},function(_0x3229bb){if(_0x3229bb)logging(_0x3229bb);}));});}function stopBot(_0x439f5a){const _0x49ce49=_0x40c769;getClientsWithBotID(_0x439f5a)[_0x49ce49(0x1d2)](_0x5e513e=>{const _0x29b92c=_0x49ce49;getSocket(_0x5e513e['id'])[_0x29b92c(0x22b)](!![]),removeClient(_0x5e513e['id']);});if(pid[_0x439f5a])pid[_0x439f5a][_0x49ce49(0x261)]();}function restartBot(_0x4fbfd5){const _0x419d51=_0x40c769;if(pid[_0x4fbfd5])pid[_0x4fbfd5][_0x419d51(0x261)]();}function addBot(){const _0x52a6c9=_0x40c769;let _0x17cd0d;for(let _0xbd9b61=0x1;_0xbd9b61<0x3e9;_0xbd9b61++){_0x17cd0d=_0xbd9b61['toString']()[_0x52a6c9(0x1f0)](0x3,'0');let _0x3971c1=config[_0x52a6c9(0x1cb)](_0x5f15b8=>_0x5f15b8[_0x52a6c9(0x195)]==_0x17cd0d);if(!_0x3971c1)break;}if(_0x17cd0d==='1000'){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x52a6c9(0x256)+_0x17cd0d),dbConfig[_0x52a6c9(0x1da)](_0x52a6c9(0x1a1))[_0x52a6c9(0x15d)]({'botID':_0x17cd0d,'botname':_0x52a6c9(0x218)+_0x17cd0d,'status':_0x52a6c9(0x212),'live':''})[_0x52a6c9(0x244)](),startBot([_0x17cd0d,userID],{'cwd':bbpath},function(_0xc905b3){if(_0xc905b3)logging(_0xc905b3);}),config=getConfiguration(),io['to']('botmanager')[_0x52a6c9(0x291)](_0x52a6c9(0x1a1),config);}function deleteBot(_0x12569c){const _0x53799e=_0x40c769;getClientsWithBotID(_0x12569c)['forEach'](_0xbbff9e=>{const _0x4bf8f7=_0x5aea;getSocket(_0xbbff9e['id'])[_0x4bf8f7(0x22b)](!![]),removeClient(_0xbbff9e['id']);}),dbConfig['get'](_0x53799e(0x1a1))[_0x53799e(0x266)]({'botID':_0x12569c})['write'](),logging(_0x53799e(0x233)+_0x12569c),stopBot(_0x12569c);try{fs[_0x53799e(0x276)](path[_0x53799e(0x281)](configpath,_0x53799e(0x1eb)+_0x12569c+_0x53799e(0x160))),fs['unlinkSync'](path['join'](configpath,_0x53799e(0x1eb)+_0x12569c+_0x53799e(0x210))),fs['unlinkSync'](path[_0x53799e(0x281)](configpath,'bot-'+_0x12569c+_0x53799e(0x1ee))),fs[_0x53799e(0x276)](path[_0x53799e(0x281)](configpath,_0x53799e(0x1eb)+_0x12569c+_0x53799e(0x24b)));}catch(_0x3ede16){if(_0x3ede16)logging(_0x53799e(0x20c),_0x3ede16);}config=getConfiguration(),io['to'](_0x53799e(0x169))[_0x53799e(0x291)](_0x53799e(0x1a1),config);}function _0x1523(){const _0x24cf40=['9206960vCLIDc','Invalid\x20authentication\x20token\x20(1)','name','\x20minutes','Unauthorized\x20attempt\x20to\x20delete\x20bot','reload','expiry','telegram','type','2941990YBgbCY','whitelistEnabled','4664691lPNRXB','<b>Telegram\x20bot\x20status:</b>\x0a','\x20/\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','function','access','randomFillSync','build','127.0.0.1','username','hashSync','User\x20has\x20been\x20validated','value','mkdirSync','log','RSA-OAEP','login','polling_error','reset-password','Token\x20blacklisted','port','decrypt','build2','Alerts','telegramChatId','running','Orders','temporary\x20access\x20rejected','Notifications\x20types:\x20','clients','callback_query','botID',':\x20Bot\x20Mgr\x20>\x20','store-settings','pidRefreshToken','catch','Error:\x20Invalid\x20argument\x20','23254121OxnUPQ','stopped','readdirSync','http','Invalid\x20username\x20or\x20IP\x20address','telegramToken','bots','Invalid\x20Telegram\x20token','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','SIGINT','timestamp','kind','/:bot/portfolio','Ok,\x20will\x20send\x20order\x20notifications\x20only','Notifications\x20disabled\x0a','6nTgVVq','cloneDeep','blacklist','ipaddr.js','then','1763592jAAKjH','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','message','chat','bot','map','store','hasOwnProperty','publicKey','status','getFullYear','/disable\x20-\x20disable\x20notifications\x0a','yes','HTML','login\x20token\x20valid','No\x20bots\x20running\x20right\x20now','filter','restarting\x20Bot\x20','(((.+)+)+)+$','/:bot/support','Unauthorized\x20attempt\x20to\x20add\x20bot','\x20|\x20','reason','parse','live','add','sockets','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','find','bbPassword','getUTCHours','set','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','https://hodlerhacks.com','hex','forEach','clientip','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Notifications\x20disabled','enabled','password','success','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','get','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','getPortfolio','stopPolling','16REQCJI','secret','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','************','onText','ipc','store-headless','update-bot','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','isValid','user','get-portfolio','bot-','\x20>\x20','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','-performance.json','accept','padStart','answerCallbackQuery','/:bot/history','idling\x20bot\x20\x20\x20|\x20Bot\x20','use','index.html','storeHeadless','path','placeOrder','error','includes','getMinutes','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/restart\x20-\x20restart\x20bot(s)\x0a','getHours','started','/off\x20-\x20stop\x20bot(s)\x0a','telegramUsername','new-disabled','alerts','date-fns','encryptedUuid','logout','get-logs','event','get-starting-balances','apiKey','6anbbMN','error\x20while\x20deleting\x20config\x20files:\x20','Password\x20reset\x20rejected','login\x20not\x20required','telegram2FaApproval','-events.json','length','new','Invalid\x20authentication\x20token\x20(2)','yargs/yargs','handshake','Login\x20rejected','auth','Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','settings','bb-settings.json','getTime','search','getDate','getSeconds','add-bot','-----------------------------------------------------------------------------------','sendMessage','emitHistory','Balance\x20Bot\x20Server','from','restart','all','temporary\x20access\x20not\x20allowed','showname','getMonth','disconnect','139iKdDuV','match','telegramEnabled','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','express','Temporary\x20access\x20rejected','once','deleted\x20Bot\x20','delete-bot','30\x20min','telegramIpApproval','NTBA_FIX_319','isIPv4MappedAddress','version.json','f2aRequired','connection','storeConfiguration','botname','2FA\x20login\x20required','backup/','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Access\x20enabled\x20for\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','timeshift','write','sendFile','removeListener',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Notifications\x20enabled\x0a','cancelLoading','temporaryAccessAllowed','-results.json','2FA\x20required','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','All\x20bots','bcryptjs','temporary\x20access\x20timeout','access\x20timeout','show','sortBy','2FA','bbUsername','starting\x20new\x20bot\x20|\x20Bot\x20','lowdb','constructor','</b>\x20?','ipv6','removeAllListeners','pidExpireLogin','/:bot/performance','crypto','default','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','kill','argv','inherit','config/','SIGTERM','remove','whitelist','Unauthorized\x20attempt\x20to\x20log\x20out','reject','login\x20required','defaults','secure','remoteAddress','send','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','initclient','hybrid-crypto-js','UA-192771731-1','loginRequired','settings.','notification','unlinkSync','Crypt','isDirectory','version','allow','orders','order','disabled','token','socket.io','jsonwebtoken','join','listen','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','telegramEvents','459928WZfJjv','conn','logged\x20out','sha256','login\x20token\x20generated','privateKey','data','starting\x20bot\x20|\x20Bot\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','uuid','2FA\x20login\x20token\x20generated','toString','emit','compareSync','delete-alerts','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','temporary\x20token\x20generated','stop','split','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','store-configuration','existsSync','24LIrNzx','push','assign','disabled\x20Bot\x20','-config.json','<b>Balance\x20Bot\x20status:</b>\x0a','Unauthorized\x20login\x20attempt\x20(timeout)','Balance\x20Bot','exit','exp','args','You\x20can\x20use\x20the\x20following\x20commands:\x0a','3656cnhXlS','botmanager','toIPv4MappedAddress'];_0x1523=function(){return _0x24cf40;};return _0x1523();}function toggleBot(_0x335620,_0x4b5ec8,_0x57ef7a){const _0x1dfcfe=_0x40c769;dbConfig[_0x1dfcfe(0x1da)](_0x1dfcfe(0x1a1))['find']({'botID':_0x335620})['assign']({'status':_0x4b5ec8})[_0x1dfcfe(0x15e)]({'live':_0x57ef7a})[_0x1dfcfe(0x244)]();if(_0x4b5ec8==_0x1dfcfe(0x1d6)||_0x4b5ec8==_0x1dfcfe(0x212))logging('enabled\x20Bot\x20'+_0x335620),startBot([_0x335620,userID],{'cwd':bbpath},function(_0x46f82f){if(_0x46f82f)logging(_0x46f82f);});else(_0x4b5ec8=='disabled'||_0x4b5ec8==_0x1dfcfe(0x202))&&(logging(_0x1dfcfe(0x15f)+_0x335620),stopBot(_0x335620));config=getConfiguration(),io['to'](_0x1dfcfe(0x169))[_0x1dfcfe(0x291)]('bots',config);}function toggleStatus(_0x532ccc){const _0x811b46=_0x40c769;let _0xb8ca36=dbConfig[_0x811b46(0x1da)](_0x811b46(0x1a1))['find']({'botID':_0x532ccc})[_0x811b46(0x182)](),_0x85ec4b;if(_0xb8ca36[_0x811b46(0x1b8)]===_0x811b46(0x1d6))_0x85ec4b='disabled';else{if(_0xb8ca36[_0x811b46(0x1b8)]==='new')_0x85ec4b='new-disabled';else{if(_0xb8ca36[_0x811b46(0x1b8)]===_0x811b46(0x202))_0x85ec4b=_0x811b46(0x212);else{if(_0xb8ca36['status']==='disabled')_0x85ec4b=_0x811b46(0x1d6);}}}return _0x85ec4b;}function updateStatus(_0x18c45a,_0x60c439){const _0xcaead8=_0x40c769;dbConfig['get'](_0xcaead8(0x1a1))['find']({'botID':_0x18c45a})[_0xcaead8(0x15e)]({'status':_0x60c439})['write'](),config=getConfiguration(),io['to'](_0xcaead8(0x169))[_0xcaead8(0x291)](_0xcaead8(0x1a1),config);}function updateLive(_0x4840f7,_0x2923d2){const _0x4ccd2d=_0x40c769;dbConfig['get'](_0x4ccd2d(0x1a1))['find']({'botID':_0x4840f7})['assign']({'live':_0x2923d2})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x4ccd2d(0x291)](_0x4ccd2d(0x1a1),config);}function updateBotName(_0x3bbfb1,_0x4f2051){const _0x519103=_0x40c769;dbConfig[_0x519103(0x1da)](_0x519103(0x1a1))[_0x519103(0x1cb)]({'botID':_0x3bbfb1})[_0x519103(0x15e)]({'botname':_0x4f2051})[_0x519103(0x244)](),config=getConfiguration(),io['to'](_0x519103(0x169))[_0x519103(0x291)](_0x519103(0x1a1),config);}function telegramError(_0x209f27){const _0x491c0f=_0x40c769;console[_0x491c0f(0x184)](getTimeStamp()+_0x491c0f(0x247));}function validateTelegram(_0x548efe){const _0x5a947e=_0x40c769;if(_0x548efe[_0x5a947e(0x225)][_0x5a947e(0x17f)]!=settings[_0x5a947e(0x201)]&&'@'+_0x548efe[_0x5a947e(0x225)]['username']!=settings['telegramUsername'])return tgBot[_0x5a947e(0x222)](_0x548efe[_0x5a947e(0x1b2)]['id'],_0x5a947e(0x294),{'parse_mode':'HTML'})[_0x5a947e(0x199)](_0x5b09d1=>{telegramError(_0x5b09d1);}),![];return!![];}async function initTelegram(){const _0x2384d4=_0x40c769;if(tgBot)tgBot[_0x2384d4(0x1dd)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x29da7b=_0x2384d4(0x167);_0x29da7b+='\x0a',_0x29da7b+='/enable\x20-\x20enable\x20notifications\x0a',_0x29da7b+=_0x2384d4(0x1ba),_0x29da7b+=_0x2384d4(0x24d),_0x29da7b+=_0x2384d4(0x1fd),_0x29da7b+='/on\x20-\x20start\x20bot(s)\x0a',_0x29da7b+=_0x2384d4(0x200),_0x29da7b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x29da7b+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x24adc1=_0x2384d4(0x283);_0x24adc1+='\x0a',_0x24adc1+=_0x29da7b,tgBot['onText'](/\/start/,_0x1aaa72=>{const _0xd1d34a=_0x2384d4;if(!validateTelegram(_0x1aaa72))return;if(settings[_0xd1d34a(0x18e)]!=_0x1aaa72[_0xd1d34a(0x1b2)]['id'])updateSetting('telegramChatId',_0x1aaa72[_0xd1d34a(0x1b2)]['id']);updateSetting(_0xd1d34a(0x22e),!![]),tgBot['sendMessage'](_0x1aaa72[_0xd1d34a(0x1b2)]['id'],_0x24adc1)[_0xd1d34a(0x199)](_0x3c5687=>{telegramError(_0x3c5687);});}),tgBot[_0x2384d4(0x1e3)](/\/enable/,_0x19536d=>{const _0x1e5470=_0x2384d4;if(!validateTelegram(_0x19536d))return;if(settings[_0x1e5470(0x18e)]!=_0x19536d['chat']['id'])updateSetting(_0x1e5470(0x18e),_0x19536d[_0x1e5470(0x1b2)]['id']);updateSetting(_0x1e5470(0x22e),!![]),tgBot[_0x1e5470(0x222)](_0x19536d[_0x1e5470(0x1b2)]['id'],'Notifications\x20enabled')[_0x1e5470(0x199)](_0x5da165=>{telegramError(_0x5da165);});}),tgBot[_0x2384d4(0x1e3)](/\/config/,async _0x825a29=>{const _0xd675f4=_0x2384d4;if(!validateTelegram(_0x825a29))return;tgBot[_0xd675f4(0x246)](_0xd675f4(0x194)),tgBot['sendMessage'](_0x825a29[_0xd675f4(0x1b2)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0xd675f4(0x190),'callback_data':_0xd675f4(0x27b)},{'text':_0xd675f4(0x18d),'callback_data':_0xd675f4(0x203)},{'text':'All','callback_data':'all'}]]}})[_0xd675f4(0x199)](_0x2af6f5=>{telegramError(_0x2af6f5);}),tgBot['on'](_0xd675f4(0x194),async _0x3785ca=>{const _0x36c857=_0xd675f4,_0x1a1d28=_0x3785ca[_0x36c857(0x28b)],_0x203f2e=_0x3785ca[_0x36c857(0x1b1)];tgBot[_0x36c857(0x1f1)](_0x3785ca['id'])[_0x36c857(0x1ae)](async()=>{const _0x105ef5=_0x36c857;_0x1a1d28==_0x105ef5(0x27b)&&(updateSetting(_0x105ef5(0x284),_0x105ef5(0x27b)),updateSetting(_0x105ef5(0x22e),!![]),await tgBot[_0x105ef5(0x222)](_0x203f2e[_0x105ef5(0x1b2)]['id'],_0x105ef5(0x1a8))[_0x105ef5(0x199)](_0x5982a2=>{telegramError(_0x5982a2);}));_0x1a1d28==_0x105ef5(0x203)&&(updateSetting('telegramEvents',_0x105ef5(0x203)),updateSetting(_0x105ef5(0x22e),!![]),await tgBot[_0x105ef5(0x222)](_0x203f2e['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x39b0ca=>{telegramError(_0x39b0ca);}));_0x1a1d28==_0x105ef5(0x227)&&(updateSetting(_0x105ef5(0x284),_0x105ef5(0x227)),updateSetting(_0x105ef5(0x22e),!![]),await tgBot['sendMessage'](_0x203f2e[_0x105ef5(0x1b2)]['id'],_0x105ef5(0x1ed))['catch'](_0x7fb69=>{telegramError(_0x7fb69);}));if(!settings['telegramChatId'])tgBot[_0x105ef5(0x222)](_0x203f2e[_0x105ef5(0x1b2)]['id'],_0x105ef5(0x1e0))[_0x105ef5(0x199)](_0x10c636=>{telegramError(_0x10c636);});}),tgBot['removeListener'](_0x36c857(0x194));});}),tgBot['onText'](/\/status/,_0x136d77=>{const _0xf51524=_0x2384d4;if(!validateTelegram(_0x136d77))return;let _0x237ebc=_0xf51524(0x161);config['forEach'](_0x3bfda9=>{const _0x5444fc=_0xf51524;_0x237ebc+='Bot\x20'+_0x3bfda9[_0x5444fc(0x195)]+_0x5444fc(0x1c4)+_0x3bfda9[_0x5444fc(0x23d)]+':\x20'+_0x3bfda9[_0x5444fc(0x1b8)]+_0x5444fc(0x178)+_0x3bfda9['live']+'\x0a';}),_0x237ebc+='\x0a',_0x237ebc+=_0xf51524(0x177),_0x237ebc+=!settings[_0xf51524(0x22e)]?_0xf51524(0x1a9):_0xf51524(0x248),_0x237ebc+=settings[_0xf51524(0x22e)]?settings[_0xf51524(0x284)]==_0xf51524(0x227)?_0xf51524(0x1db):_0xf51524(0x192)+settings[_0xf51524(0x284)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x136d77[_0xf51524(0x1b2)]['id'],_0x237ebc,{'parse_mode':_0xf51524(0x1bc)})[_0xf51524(0x199)](_0x377f86=>{telegramError(_0x377f86);});}),tgBot[_0x2384d4(0x1e3)](/\/restart/,_0x5a6c32=>{const _0x4d9ae3=_0x2384d4;if(!validateTelegram(_0x5a6c32))return;tgBot[_0x4d9ae3(0x246)](_0x4d9ae3(0x194));const _0x347cda=getEnabledBots();if(_0x347cda[_0x4d9ae3(0x211)]==0x0)tgBot[_0x4d9ae3(0x222)](_0x5a6c32[_0x4d9ae3(0x1b2)]['id'],_0x4d9ae3(0x1be))[_0x4d9ae3(0x199)](_0x2d35ef=>{telegramError(_0x2d35ef);});else{if(_0x347cda[_0x4d9ae3(0x211)]>0x1)_0x347cda[_0x4d9ae3(0x15d)]({'botID':_0x4d9ae3(0x227)});let _0x4d080e=[],_0x4d3440=[];const _0x55451d=_0x347cda[_0x4d9ae3(0x211)]%0x4==0x0||_0x347cda[_0x4d9ae3(0x211)]%0x4==0x3||_0x347cda[_0x4d9ae3(0x211)]%0x3==0x1?0x4:0x3;let _0x1c54ec=0x0;_0x347cda[_0x4d9ae3(0x1d2)]((_0x30d4b7,_0x58fbb8)=>{const _0x15bb9a=_0x4d9ae3;if(_0x58fbb8%_0x55451d==0x0)_0x4d3440=[];_0x4d3440['push']({'text':_0x30d4b7[_0x15bb9a(0x195)]==_0x15bb9a(0x227)?_0x15bb9a(0x24e):_0x15bb9a(0x218)+_0x30d4b7[_0x15bb9a(0x195)],'callback_data':_0x30d4b7[_0x15bb9a(0x195)]}),_0x58fbb8%_0x55451d==0x0&&(_0x4d080e[_0x1c54ec]=_0x4d3440,_0x1c54ec++);}),tgBot[_0x4d9ae3(0x222)](_0x5a6c32['chat']['id'],_0x4d9ae3(0x26f),{'reply_markup':{'inline_keyboard':_0x4d080e}})[_0x4d9ae3(0x199)](_0xb05bb3=>{telegramError(_0xb05bb3);}),tgBot['on']('callback_query',async _0x332e98=>{const _0x2f6203=_0x4d9ae3,_0x155ed0=_0x332e98[_0x2f6203(0x28b)],_0xa9a392=_0x332e98['message'];tgBot[_0x2f6203(0x1f1)](_0x332e98['id'])['then'](async()=>{const _0x33d154=_0x2f6203;if(_0x155ed0==_0x33d154(0x227)){if(settings['telegramEvents']==_0x33d154(0x27b))tgBot[_0x33d154(0x222)](_0xa9a392['chat']['id'],_0x33d154(0x1ca))[_0x33d154(0x199)](_0x11be56=>{telegramError(_0x11be56);});config[_0x33d154(0x1d2)](_0x2aeb33=>{const _0x2ef2=_0x33d154;restartBot(_0x2aeb33[_0x2ef2(0x195)]);});}else{if(settings[_0x33d154(0x284)]==_0x33d154(0x27b))tgBot[_0x33d154(0x222)](_0xa9a392['chat']['id'],_0x33d154(0x1cf)+_0x155ed0)[_0x33d154(0x199)](_0x5a6b70=>{telegramError(_0x5a6b70);});restartBot(_0x155ed0);}}),tgBot[_0x2f6203(0x246)](_0x2f6203(0x194));});}}),tgBot[_0x2384d4(0x1e3)](/\/on/,_0x5340a4=>{const _0x158e71=_0x2384d4;if(!validateTelegram(_0x5340a4))return;tgBot[_0x158e71(0x246)](_0x158e71(0x194));const _0x2c0b41=getDisabledBots();if(_0x2c0b41[_0x158e71(0x211)]==0x0)tgBot['sendMessage'](_0x5340a4[_0x158e71(0x1b2)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x158e71(0x199)](_0x42ceeb=>{telegramError(_0x42ceeb);});else{if(_0x2c0b41[_0x158e71(0x211)]>0x1)_0x2c0b41[_0x158e71(0x15d)]({'botID':_0x158e71(0x227)});let _0x1c59d7=[],_0x48c580=[];const _0x525ced=_0x2c0b41[_0x158e71(0x211)]%0x4==0x0||_0x2c0b41[_0x158e71(0x211)]%0x4==0x3||_0x2c0b41[_0x158e71(0x211)]%0x3==0x1?0x4:0x3;let _0x470de9=0x0;_0x2c0b41[_0x158e71(0x1d2)]((_0x30170f,_0x4a1781)=>{const _0x314dee=_0x158e71;if(_0x4a1781%_0x525ced==0x0)_0x48c580=[];_0x48c580['push']({'text':_0x30170f['botID']==_0x314dee(0x227)?_0x314dee(0x24e):_0x314dee(0x218)+_0x30170f[_0x314dee(0x195)],'callback_data':_0x30170f[_0x314dee(0x195)]}),_0x4a1781%_0x525ced==0x0&&(_0x1c59d7[_0x470de9]=_0x48c580,_0x470de9++);}),tgBot[_0x158e71(0x222)](_0x5340a4[_0x158e71(0x1b2)]['id'],_0x158e71(0x22f),{'reply_markup':{'inline_keyboard':_0x1c59d7}})['catch'](_0x1044c6=>{telegramError(_0x1044c6);}),tgBot['on'](_0x158e71(0x194),async _0xf6ba1b=>{const _0x2105b7=_0x158e71,_0x5c0bfd=_0xf6ba1b['data'],_0x3b75f2=_0xf6ba1b[_0x2105b7(0x1b1)];tgBot['answerCallbackQuery'](_0xf6ba1b['id'])['then'](async()=>{const _0x1407cb=_0x2105b7;if(_0x5c0bfd==_0x1407cb(0x227)){if(settings[_0x1407cb(0x284)]=='orders')tgBot[_0x1407cb(0x222)](_0x3b75f2['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x1407cb(0x199)](_0xc563f2=>{telegramError(_0xc563f2);});_0x2c0b41[_0x1407cb(0x1d2)](_0x4ba4c2=>{const _0x5da6af=_0x1407cb;if(_0x4ba4c2[_0x5da6af(0x195)]!=_0x5da6af(0x227))toggleBot(_0x4ba4c2[_0x5da6af(0x195)],toggleStatus(_0x4ba4c2[_0x5da6af(0x195)]),_0x5da6af(0x19c));});}else{if(settings[_0x1407cb(0x284)]=='orders')tgBot[_0x1407cb(0x222)](_0x3b75f2['chat']['id'],_0x1407cb(0x1d9)+_0x5c0bfd)['catch'](_0x372482=>{telegramError(_0x372482);});toggleBot(_0x5c0bfd,toggleStatus(_0x5c0bfd),_0x1407cb(0x19c));}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x2384d4(0x1e3)](/\/off/,_0x2e4348=>{const _0xf4b506=_0x2384d4;if(!validateTelegram(_0x2e4348))return;tgBot[_0xf4b506(0x246)](_0xf4b506(0x194));const _0x16dff0=getEnabledBots();if(_0x16dff0[_0xf4b506(0x211)]==0x0)tgBot[_0xf4b506(0x222)](_0x2e4348[_0xf4b506(0x1b2)]['id'],_0xf4b506(0x1be))[_0xf4b506(0x199)](_0x491478=>{telegramError(_0x491478);});else{if(_0x16dff0[_0xf4b506(0x211)]>0x1)_0x16dff0['push']({'botID':'all'});let _0x12cb94=[],_0x24eb9b=[];const _0x350768=_0x16dff0['length']%0x4==0x0||_0x16dff0[_0xf4b506(0x211)]%0x4==0x3||_0x16dff0[_0xf4b506(0x211)]%0x3==0x1?0x4:0x3;let _0x18e13a=0x0;_0x16dff0[_0xf4b506(0x1d2)]((_0x14036d,_0x103360)=>{const _0x5c64b9=_0xf4b506;if(_0x103360%_0x350768==0x0)_0x24eb9b=[];_0x24eb9b['push']({'text':_0x14036d[_0x5c64b9(0x195)]=='all'?'All\x20bots':_0x5c64b9(0x218)+_0x14036d[_0x5c64b9(0x195)],'callback_data':_0x14036d['botID']}),_0x103360%_0x350768==0x0&&(_0x12cb94[_0x18e13a]=_0x24eb9b,_0x18e13a++);}),tgBot[_0xf4b506(0x222)](_0x2e4348[_0xf4b506(0x1b2)]['id'],_0xf4b506(0x219),{'reply_markup':{'inline_keyboard':_0x12cb94}})['catch'](_0x52415c=>{telegramError(_0x52415c);}),tgBot['on'](_0xf4b506(0x194),async _0x4414c7=>{const _0x139518=_0xf4b506,_0x871666=_0x4414c7[_0x139518(0x28b)],_0x1922b4=_0x4414c7['message'];tgBot[_0x139518(0x1f1)](_0x4414c7['id'])[_0x139518(0x1ae)](async()=>{const _0x4822b8=_0x139518;if(_0x871666=='all'){if(settings[_0x4822b8(0x284)]=='orders')tgBot[_0x4822b8(0x222)](_0x1922b4['chat']['id'],_0x4822b8(0x179))['catch'](_0x31ebc3=>{telegramError(_0x31ebc3);});_0x16dff0[_0x4822b8(0x1d2)](_0xea0242=>{const _0x43ebaa=_0x4822b8;if(_0xea0242[_0x43ebaa(0x195)]!=_0x43ebaa(0x227))toggleBot(_0xea0242[_0x43ebaa(0x195)],toggleStatus(_0xea0242[_0x43ebaa(0x195)]),'stopped');});}else{if(settings[_0x4822b8(0x284)]==_0x4822b8(0x27b))tgBot[_0x4822b8(0x222)](_0x1922b4[_0x4822b8(0x1b2)]['id'],_0x4822b8(0x240)+_0x871666)[_0x4822b8(0x199)](_0x44d580=>{telegramError(_0x44d580);});toggleBot(_0x871666,toggleStatus(_0x871666),_0x4822b8(0x19c));}}),tgBot[_0x139518(0x246)](_0x139518(0x194));});}}),tgBot[_0x2384d4(0x1e3)](/\/disable/,_0x3fc0c8=>{const _0x73a8c3=_0x2384d4;if(!validateTelegram(_0x3fc0c8))return;tgBot[_0x73a8c3(0x222)](_0x3fc0c8[_0x73a8c3(0x1b2)]['id'],_0x73a8c3(0x1d5))[_0x73a8c3(0x199)](_0xb24253=>{telegramError(_0xb24253);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2384d4(0x1e3)](/\/help/,_0x2d3441=>{const _0x1877dc=_0x2384d4;if(!validateTelegram(_0x2d3441))return;tgBot[_0x1877dc(0x222)](_0x2d3441['chat']['id'],_0x29da7b)[_0x1877dc(0x199)](_0x3214ca=>{telegramError(_0x3214ca);});}),tgBot['on'](_0x2384d4(0x187),_0xffd059=>{const _0x4e1081=_0x2384d4;_0xffd059[_0x4e1081(0x290)]()[_0x4e1081(0x1fa)]('404\x20Not\x20Found')&&(logging(_0x4e1081(0x1a2)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x4e1081(0x291)](_0x4e1081(0x275),_0x4e1081(0x1a2)));}),process['once'](_0x2384d4(0x1a4),()=>{const _0x2ad04d=_0x2384d4;if(tgBot)tgBot[_0x2ad04d(0x1dd)]();process[_0x2ad04d(0x164)](0x1);}),process[_0x2384d4(0x232)](_0x2384d4(0x265),()=>{const _0x4af845=_0x2384d4;if(tgBot)tgBot[_0x4af845(0x1dd)]();process[_0x4af845(0x164)](0x1);});}}function disableTelegram(){const _0x30b9b7=_0x40c769;tgBot&&(tgBot[_0x30b9b7(0x1dd)](),tgBot=null);}function sendTelegram(_0x244d89,_0x3d7673){const _0x3725ea=_0x40c769;if(settings[_0x3725ea(0x22e)]){if(settings[_0x3725ea(0x284)]==_0x3725ea(0x227)||(_0x3d7673[_0x3725ea(0x173)]==_0x3725ea(0x1f9)||_0x3d7673[_0x3725ea(0x173)]==_0x3725ea(0x1d8))&&settings['telegramEvents']==_0x3725ea(0x203)||_0x3d7673[_0x3725ea(0x173)]==_0x3725ea(0x27c)&&settings[_0x3725ea(0x284)]=='orders'){if(tgBot&&settings[_0x3725ea(0x18e)]){if(_0x3d7673[_0x3725ea(0x229)])tgBot[_0x3725ea(0x222)](settings[_0x3725ea(0x18e)],_0x3d7673[_0x3725ea(0x23d)]+_0x3725ea(0x1ec)+_0x3d7673[_0x3725ea(0x208)])['catch'](_0x4c5bc0=>{telegramError(_0x4c5bc0);});else tgBot[_0x3725ea(0x222)](settings[_0x3725ea(0x18e)],_0x3725ea(0x218)+_0x244d89+_0x3725ea(0x1ec)+_0x3d7673[_0x3725ea(0x208)])['catch'](_0x3f9dae=>{telegramError(_0x3f9dae);});}}}}function getDeviceWithIp(_0x364dc9){const _0x36e00e=_0x40c769;return devices[_0x36e00e(0x1cb)](_0x41c66d=>_0x41c66d['ip']===_0x364dc9);}function temporaryAccess2FA(_0x2fe965,_0x176faa){const _0x4b87a1=_0x40c769;let _0x1e25fb=new Date(),_0x57578a=![];if(lastIpApproval){if(_0x1e25fb-lastIpApproval<0x1388)_0x57578a=!![];}lastIpApproval=new Date();if(_0x57578a)return;tgBot&&settings[_0x4b87a1(0x18e)]&&(tgBot[_0x4b87a1(0x246)](_0x4b87a1(0x194)),tgBot['sendMessage'](settings[_0x4b87a1(0x18e)],_0x4b87a1(0x298)+normalizeIP(_0x176faa)['show']+_0x4b87a1(0x259),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x4b87a1(0x235),'callback_data':'30'},{'text':_0x4b87a1(0x269),'callback_data':_0x4b87a1(0x269)}]]}})['catch'](_0x4dd639=>{telegramError(_0x4dd639);}),tgBot['on'](_0x4b87a1(0x194),async _0xca533=>{const _0x22c455=_0x4b87a1,_0x1e0c0c=_0xca533[_0x22c455(0x28b)],_0x42bc0a=_0xca533['message'];tgBot[_0x22c455(0x1f1)](_0xca533['id'])[_0x22c455(0x1ae)](async()=>{const _0x55f635=_0x22c455;devices[_0x2fe965][_0x55f635(0x236)]={'clientip':_0x176faa,'timestamp':new Date()[_0x55f635(0x21c)](),'expiry':_0x1e0c0c},_0x1e0c0c!='reject'?(await tgBot[_0x55f635(0x222)](_0x42bc0a['chat']['id'],_0x55f635(0x241)+_0x1e0c0c+_0x55f635(0x16e),{'parse_mode':'HTML'})[_0x55f635(0x199)](_0x31e564=>{telegramError(_0x31e564);}),io['to'](_0x2fe965)[_0x55f635(0x291)](_0x55f635(0x1b8),{'access':{'allow':![],'reason':_0x55f635(0x170),'token':null}})):(await tgBot[_0x55f635(0x222)](_0x42bc0a[_0x55f635(0x1b2)]['id'],_0x55f635(0x231))['catch'](_0x1b4b03=>{telegramError(_0x1b4b03);}),io['to'](_0x2fe965)[_0x55f635(0x291)](_0x55f635(0x1b8),{'access':{'allow':![],'reason':_0x55f635(0x191),'token':null}}));}),tgBot[_0x22c455(0x246)](_0x22c455(0x194));}));}function loginAccess2FA(_0x286824,_0x9b52f2){const _0xe3a4eb=_0x40c769;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0xe3a4eb(0x194)),tgBot[_0xe3a4eb(0x222)](settings[_0xe3a4eb(0x18e)],_0xe3a4eb(0x28d)+normalizeIP(_0x9b52f2)[_0xe3a4eb(0x252)]+'</b>\x20?',{'parse_mode':_0xe3a4eb(0x1bc),'reply_markup':{'inline_keyboard':[[{'text':_0xe3a4eb(0x1ef),'callback_data':loginExpiry},{'text':'reject','callback_data':_0xe3a4eb(0x269)}]]}})[_0xe3a4eb(0x199)](_0x339c61=>{telegramError(_0x339c61);}),tgBot['on'](_0xe3a4eb(0x194),async _0x42538b=>{const _0x58bc49=_0xe3a4eb,_0x3fe960=_0x42538b['data'],_0x47f960=_0x42538b[_0x58bc49(0x1b1)];tgBot[_0x58bc49(0x1f1)](_0x42538b['id'])[_0x58bc49(0x1ae)](async()=>{const _0x2a51f5=_0x58bc49;devices[_0x286824][_0x2a51f5(0x20f)]={'clientip':_0x9b52f2,'timestamp':new Date()[_0x2a51f5(0x21c)](),'expiry':_0x3fe960},_0x3fe960!=_0x2a51f5(0x269)?(await tgBot[_0x2a51f5(0x222)](_0x47f960[_0x2a51f5(0x1b2)]['id'],'Login\x20accepted',{'parse_mode':_0x2a51f5(0x1bc)})[_0x2a51f5(0x199)](_0x5b4ff4=>{telegramError(_0x5b4ff4);}),io['to'](_0x286824)[_0x2a51f5(0x291)](_0x2a51f5(0x1b8),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x2a51f5(0x222)](_0x47f960[_0x2a51f5(0x1b2)]['id'],_0x2a51f5(0x216))['catch'](_0xa0c681=>{telegramError(_0xa0c681);}),io['to'](_0x286824)[_0x2a51f5(0x291)](_0x2a51f5(0x1b8),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x58bc49(0x246)](_0x58bc49(0x194));}));}function getConfiguration(){const _0x9fabb6=_0x40c769;return dbConfig[_0x9fabb6(0x1da)](_0x9fabb6(0x1a1))[_0x9fabb6(0x253)](_0x9fabb6(0x195))[_0x9fabb6(0x182)]()||[];}function getEnabledBots(){const _0x4e735e=_0x40c769;return dbConfig[_0x4e735e(0x1da)](_0x4e735e(0x1a1))[_0x4e735e(0x253)](_0x4e735e(0x195))[_0x4e735e(0x1bf)]({'status':'enabled'})[_0x4e735e(0x182)]()||[];}function getDisabledBots(){const _0x42da9e=_0x40c769;return dbConfig[_0x42da9e(0x1da)]('bots')['sortBy'](_0x42da9e(0x195))[_0x42da9e(0x1bf)]({'status':_0x42da9e(0x27d)})[_0x42da9e(0x182)]()||[];}function getSettings(){const _0x162a2e=_0x40c769;return dbSettings[_0x162a2e(0x1da)]('settings')[_0x162a2e(0x182)]()||{'timeshift':0x0};}function getSecure(){const _0x22df01=_0x40c769;return dbSecure[_0x22df01(0x1da)](_0x22df01(0x26c))[_0x22df01(0x182)]()||{};}function getBlacklist(){const _0x2b82f3=_0x40c769;return dbSecure[_0x2b82f3(0x1da)]('blacklist')['value']()||[];}function broadcastToBots(_0x1445fc,_0x4fbfa8){config['forEach'](_0x2058d9=>{const _0x13efbe=_0x5aea;if(_0x2058d9[_0x13efbe(0x1b8)]==_0x13efbe(0x1d6)&&_0x2058d9[_0x13efbe(0x1c7)]==_0x13efbe(0x18f)){if(pid[_0x2058d9[_0x13efbe(0x195)]])pid[_0x2058d9[_0x13efbe(0x195)]][_0x13efbe(0x26e)]({[_0x1445fc]:_0x4fbfa8});}});}function storeSettings(_0x2d058f,_0xe90251=![]){const _0x47954c=_0x40c769;_0x2d058f={...settings,..._0x2d058f};if(_0xe90251&&_0x2d058f[_0x47954c(0x1cc)]!='************'&&_0x2d058f[_0x47954c(0x1cc)]!=''){const _0xa43d6f=crypt['decrypt'](secure[_0x47954c(0x28a)],_0x2d058f['bbPassword'])[_0x47954c(0x1b1)][_0x47954c(0x297)]('@')[0x0],_0x12945a=bcrypt[_0x47954c(0x180)](_0xa43d6f,saltRounds);_0x2d058f={..._0x2d058f,'bbPassword':_0x12945a};}if(_0xe90251&&_0x2d058f[_0x47954c(0x1a0)]!=_0x47954c(0x1e2)&&_0x2d058f['telegramToken']!=''){const _0x45bb33=crypt[_0x47954c(0x18b)](secure['privateKey'],_0x2d058f[_0x47954c(0x1a0)])[_0x47954c(0x1b1)]['split']('@')[0x0];_0x2d058f={..._0x2d058f,'telegramToken':_0x45bb33};}const _0x52bec5=_0x2d058f['telegramToken']!=_0x47954c(0x1e2)&&_0x2d058f[_0x47954c(0x1a0)]!=settings['telegramToken']||_0x2d058f[_0x47954c(0x201)]!=settings['telegramUsername'],_0xb5cbb6=_0x2d058f['telegramToken']==''||_0x2d058f['telegramUsername']=='';if(_0x52bec5)_0x2d058f[_0x47954c(0x284)]=_0x47954c(0x227);for(const [_0x1bfcbe,_0x209dac]of Object['entries'](_0x2d058f)){if(_0x1bfcbe=='telegramToken'&&_0x209dac=='************'){_0x2d058f['telegramToken']=settings[_0x47954c(0x1a0)];continue;};if(_0x1bfcbe==_0x47954c(0x1cc)&&_0x209dac==_0x47954c(0x1e2)){_0x2d058f['bbPassword']=settings[_0x47954c(0x1cc)];continue;};dbSettings['set'](_0x47954c(0x274)+_0x1bfcbe,_0x209dac)[_0x47954c(0x244)]();}settings=_0x2d058f,io['to']('botmanager')[_0x47954c(0x291)](_0x47954c(0x21a),cleanSettings()),broadcastToBots(_0x47954c(0x243),settings['timeshift']);if(_0x52bec5&&!_0xb5cbb6)initTelegram();if(_0x52bec5&&_0xb5cbb6)disableTelegram();getAllClients()[_0x47954c(0x1d2)](_0x57bbdf=>{const _0x1e30b6=_0x47954c;getSocket(_0x57bbdf['id'])[_0x1e30b6(0x291)]('status',{'access':{'allow':![],'reason':_0x1e30b6(0x170),'token':null}});});}function updateSetting(_0x361f24,_0xa6a53c){const _0x178707=_0x40c769;dbSettings[_0x178707(0x1ce)](_0x178707(0x274)+_0x361f24,_0xa6a53c)[_0x178707(0x244)](),settings=getSettings(),io['to'](_0x178707(0x169))['emit'](_0x178707(0x21a),cleanSettings());}function storeSecure(_0x2c29ff){const _0x532487=_0x40c769;dbSecure[_0x532487(0x1da)](_0x532487(0x26c))[_0x532487(0x15d)](_0x2c29ff)['write'](),secure=_0x2c29ff;}function addBlacklist(_0x376326){const _0x1fec77=_0x40c769;cleanBlacklist();let _0x49efdf;devices[_0x376326][_0x1fec77(0x236)]?_0x49efdf=Math['max'](devices[_0x376326][_0x1fec77(0x236)][_0x1fec77(0x171)],loginExpiry):_0x49efdf=loginExpiry,dbSecure[_0x1fec77(0x1da)](_0x1fec77(0x1ac))[_0x1fec77(0x15d)]({'expiry':new Date()['getTime']()+_0x49efdf*0x3c*0x3e8,'token':devices[_0x376326][_0x1fec77(0x17b)][_0x1fec77(0x27e)]})[_0x1fec77(0x244)](),blacklist=dbSecure[_0x1fec77(0x1da)](_0x1fec77(0x1ac))[_0x1fec77(0x182)]();}function cleanBlacklist(){const _0x4e9dec=_0x40c769;let _0x20378c=dbSecure[_0x4e9dec(0x1da)](_0x4e9dec(0x1ac))[_0x4e9dec(0x1ab)]()[_0x4e9dec(0x182)](),_0x5b31a2=new Date()[_0x4e9dec(0x21c)]();_0x20378c[_0x4e9dec(0x1d2)](_0x3b7448=>{const _0x4be5c8=_0x4e9dec;_0x3b7448[_0x4be5c8(0x171)]<_0x5b31a2&&dbSecure[_0x4be5c8(0x1da)](_0x4be5c8(0x1ac))['remove']({'expiry':_0x3b7448[_0x4be5c8(0x171)]})[_0x4be5c8(0x244)]();});}function initStates(){const _0x1f1dce=_0x40c769;let _0x4a7d6c=getConfiguration();_0x4a7d6c[_0x1f1dce(0x1d2)](_0x4fccf1=>{const _0x3ef084=_0x1f1dce;_0x4fccf1[_0x3ef084(0x1c7)]=_0x3ef084(0x19c);}),storeConfiguration(_0x4a7d6c);}function onKeys(){const _0x4e7125=new RSA();return new Promise(_0x7e2cd7=>{const _0x4c2704=_0x5aea;_0x4e7125['generateKeyPairAsync']()[_0x4c2704(0x1ae)](_0x288969=>{_0x7e2cd7(_0x288969);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x281f58=_0x40c769;let _0x23fe56=getConfiguration(),_0x10079c=![];_0x23fe56[_0x281f58(0x1d2)](_0x2df522=>{const _0x57cb55=_0x281f58;if(_0x2df522[_0x57cb55(0x1b8)]==_0x57cb55(0x18f))_0x2df522[_0x57cb55(0x1b8)]=_0x57cb55(0x1d6),_0x10079c=!![];else _0x2df522[_0x57cb55(0x1b8)]==_0x57cb55(0x19c)&&(_0x2df522[_0x57cb55(0x1b8)]=_0x57cb55(0x27d),_0x10079c=!![]);});if(_0x10079c)storeConfiguration(_0x23fe56);let _0x45bbf6=getSecure();if(!_0x45bbf6[_0x281f58(0x1b6)](_0x281f58(0x1df))){let _0x5b3e0c=await generateKeys();_0x45bbf6['publicKey']=_0x5b3e0c[_0x281f58(0x1b7)],_0x45bbf6['privateKey']=_0x5b3e0c['privateKey'],_0x45bbf6[_0x281f58(0x1df)]=crypto['randomBytes'](0x20)['toString'](_0x281f58(0x1d1));;storeSecure(_0x45bbf6);}let _0x2c717e=getSettings();_0x10079c=![];!_0x2c717e[_0x281f58(0x1b6)](_0x281f58(0x273))&&(_0x2c717e['loginRequired']=![],_0x2c717e['bbUsername']='',_0x2c717e['bbPassword']='',_0x2c717e['f2aRequired']=![],_0x10079c=!![]);!_0x2c717e['hasOwnProperty'](_0x281f58(0x175))&&(_0x2c717e[_0x281f58(0x175)]=![],_0x2c717e['whitelist']=[],_0x2c717e[_0x281f58(0x24a)]=![],_0x10079c=!![]);if(!_0x2c717e[_0x281f58(0x1b6)](_0x281f58(0x22e))){if(_0x2c717e['telegramChatId'])_0x2c717e['telegramEnabled']=!![];else _0x2c717e['telegramEnabled']=![];_0x10079c=!![];}if(_0x10079c)storeSettings(_0x2c717e);}function storeConfiguration(_0x5a7fd2){const _0x465d19=_0x40c769;dbConfig[_0x465d19(0x1da)](_0x465d19(0x1a1))[_0x465d19(0x266)]()[_0x465d19(0x244)](),dbConfig[_0x465d19(0x1da)](_0x465d19(0x1a1))['push'](..._0x5a7fd2)[_0x465d19(0x244)](),config=_0x5a7fd2;}function resetPassword(){const _0x49d8b6=_0x40c769;tgBot&&settings[_0x49d8b6(0x18e)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x49d8b6(0x222)](settings[_0x49d8b6(0x18e)],_0x49d8b6(0x242),{'parse_mode':_0x49d8b6(0x1bc),'reply_markup':{'inline_keyboard':[[{'text':_0x49d8b6(0x1bb),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x425b79=>{telegramError(_0x425b79);}),tgBot['on'](_0x49d8b6(0x194),async _0x6b7bd6=>{const _0x3c38ff=_0x49d8b6,_0x35272c=_0x6b7bd6[_0x3c38ff(0x28b)],_0x56e3b3=_0x6b7bd6[_0x3c38ff(0x1b1)];tgBot[_0x3c38ff(0x1f1)](_0x6b7bd6['id'])[_0x3c38ff(0x1ae)](async()=>{const _0x4b8773=_0x3c38ff;if(_0x35272c!='no'){const _0x5352b9=0xf,_0xfbe6ce='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x470836=Array[_0x4b8773(0x225)](crypto[_0x4b8773(0x17c)](new Uint32Array(_0x5352b9)))[_0x4b8773(0x1b4)](_0x41a0c3=>_0xfbe6ce[_0x41a0c3%_0xfbe6ce[_0x4b8773(0x211)]])[_0x4b8773(0x281)](''),_0x1864e0=bcrypt[_0x4b8773(0x180)](_0x470836,saltRounds);storeSettings({'bbPassword':_0x1864e0}),await tgBot[_0x4b8773(0x222)](_0x56e3b3[_0x4b8773(0x1b2)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x470836,{'parse_mode':_0x4b8773(0x1bc)})['catch'](_0x1079eb=>{telegramError(_0x1079eb);});}else await tgBot[_0x4b8773(0x222)](_0x56e3b3[_0x4b8773(0x1b2)]['id'],_0x4b8773(0x20d))[_0x4b8773(0x199)](_0x4eb119=>{telegramError(_0x4eb119);});}),tgBot['removeListener'](_0x3c38ff(0x194));}));}function _0x5aea(_0x24f43b,_0x1c40cb){const _0x3a3417=_0x1523();return _0x5aea=function(_0x3f238e,_0x561177){_0x3f238e=_0x3f238e-0x15d;let _0x152391=_0x3a3417[_0x3f238e];return _0x152391;},_0x5aea(_0x24f43b,_0x1c40cb);}function logging(_0x2c000b){const _0x2109a5=_0x40c769;console['log'](getTimeStamp()+_0x2109a5(0x196)+_0x2c000b);if(tgBot&&settings['telegramChatId']&&settings[_0x2109a5(0x284)]!=_0x2109a5(0x27b))tgBot[_0x2109a5(0x222)](settings[_0x2109a5(0x18e)],'Bot\x20Mgr\x20>\x20'+_0x2c000b)[_0x2109a5(0x199)](_0x43a974=>{telegramError(_0x43a974);});}function getServerTime(){const _0x48a050=_0x40c769,_0x49be14=new Date();return _0x49be14[_0x48a050(0x1b9)]()+'/'+(_0x49be14[_0x48a050(0x22a)]()+0x1)[_0x48a050(0x290)]()[_0x48a050(0x1f0)](0x2,'0')+'/'+_0x49be14['getDate']()[_0x48a050(0x290)]()[_0x48a050(0x1f0)](0x2,'0')+'\x20'+_0x49be14['getHours']()[_0x48a050(0x290)]()[_0x48a050(0x1f0)](0x2,'0')+':'+_0x49be14[_0x48a050(0x1fb)]()[_0x48a050(0x290)]()[_0x48a050(0x1f0)](0x2,'0')+':'+_0x49be14[_0x48a050(0x21f)]()[_0x48a050(0x290)]()[_0x48a050(0x1f0)](0x2,'0');}function getTimeStamp(){const _0x5912b5=_0x40c769,_0x129599=shiftedTime();return _0x129599[_0x5912b5(0x1b9)]()+'/'+(_0x129599['getMonth']()+0x1)[_0x5912b5(0x290)]()[_0x5912b5(0x1f0)](0x2,'0')+'/'+_0x129599[_0x5912b5(0x21e)]()[_0x5912b5(0x290)]()[_0x5912b5(0x1f0)](0x2,'0')+'\x20'+_0x129599[_0x5912b5(0x1fe)]()[_0x5912b5(0x290)]()['padStart'](0x2,'0')+':'+_0x129599[_0x5912b5(0x1fb)]()[_0x5912b5(0x290)]()['padStart'](0x2,'0')+':'+_0x129599[_0x5912b5(0x21f)]()[_0x5912b5(0x290)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x17f082=_0x40c769,_0x1bbbe0=new Date();let _0x97a0bd=_0x1bbbe0;if(settings['timeshift']&&settings[_0x17f082(0x243)]!==0x0)_0x97a0bd=fns[_0x17f082(0x1c8)](_0x1bbbe0,{'hours':settings[_0x17f082(0x243)]});return _0x97a0bd;}function startScheduler(){const _0x5948e5=_0x40c769;let _0x24ca4d=new Date()[_0x5948e5(0x1cd)]();_0x24ca4d==0x1&&backupConfigFiles();_0x24ca4d==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2e8898=_0x40c769;fs[_0x2e8898(0x19d)](configpath,{'withFileTypes':!![]})[_0x2e8898(0x1d2)](_0x35ea26=>{const _0x3083a7=_0x2e8898;if(!_0x35ea26[_0x3083a7(0x278)]())fs['copyFileSync'](configpath+_0x35ea26[_0x3083a7(0x16d)],configbackuppath+_0x35ea26[_0x3083a7(0x16d)]);});}function triggerAnalytics(){const _0x1bb69f=_0x40c769;analytics['page']({'title':_0x1bb69f(0x224),'href':_0x1bb69f(0x1d0),'path':'/v'+serverversion});}function validateCredentials(_0xb8033b,_0xb6fc97){const _0x2804d6=_0x40c769;if(_0xb8033b[_0x2804d6(0x17f)]==settings[_0x2804d6(0x255)]&&bcrypt[_0x2804d6(0x292)](_0xb8033b['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x2804d6(0x23e),'token':null};else{const _0x2c5353=generateLoginToken(_0xb6fc97);return{'allow':!![],'reason':_0x2804d6(0x289),'token':_0x2c5353};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0xaa35a5){const _0x56548a=_0x40c769,_0x110d6d=generateLoginToken(_0xaa35a5);return{'allow':!![],'reason':_0x56548a(0x289),'token':_0x110d6d};}function validateAccess(_0x93a240,_0x1bd7f4){const _0x1ef939=_0x40c769;let _0x204a9d=devices[_0x1bd7f4]['ip'],_0x2f7de2;const _0xc47be8=_0x62fcc3=>{const _0x9c3e94=_0x5aea;if(settings[_0x9c3e94(0x273)]){if(settings[_0x9c3e94(0x23a)]){if(telegram2FaApproved(_0x1bd7f4)){const _0x17d88b=generateLoginToken(_0x1bd7f4);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x17d88b};}else return{'allow':![],'reason':_0x9c3e94(0x26a),'token':null};}else return _0x2f7de2=validToken(_0x62fcc3,_0x1bd7f4),_0x2f7de2[_0x9c3e94(0x1b6)]('success')?{'allow':!![],'reason':_0x9c3e94(0x1bd),'token':_0x62fcc3}:{'allow':![],'reason':_0x9c3e94(0x26a),'token':null};}else return{'allow':!![],'reason':_0x9c3e94(0x20e),'token':null};};if(settings[_0x1ef939(0x175)]){let _0x50939d=[...settings[_0x1ef939(0x267)],'::1','::ffff:127.0.0.1',_0x1ef939(0x17e)];if(_0x50939d[_0x1ef939(0x1fa)](_0x204a9d))return _0xc47be8(_0x93a240);else{_0x2f7de2=validToken(_0x93a240,_0x1bd7f4);if(_0x2f7de2[_0x1ef939(0x1b6)](_0x1ef939(0x1d8)))return _0xc47be8(_0x93a240);else{if(telegramIpApproved(_0x1bd7f4)){const _0x4dcde7=generateToken(_0x1bd7f4);return _0x2f7de2=_0xc47be8(_0x93a240),_0x2f7de2[_0x1ef939(0x27a)]?{'allow':!![],'reason':_0x1ef939(0x295),'token':_0x4dcde7}:_0x2f7de2;}else return settings[_0x1ef939(0x24a)]?{'allow':![],'reason':_0x1ef939(0x24c),'token':null}:{'allow':![],'reason':_0x1ef939(0x228),'token':null};}}}else return _0xc47be8(_0x93a240);}function timelyDecrypt(_0xc6574f,_0x3bc752=!![]){const _0x161f00=_0x40c769;if(_0xc6574f)try{const _0x38e3b8=crypt[_0x161f00(0x18b)](secure['privateKey'],_0xc6574f)[_0x161f00(0x1b1)],_0x1a7bdc=_0x38e3b8[_0x161f00(0x297)]('@')[0x0],_0x341eb4=_0x38e3b8[_0x161f00(0x297)]('@')[0x1],_0x4bde36=new Date()[_0x161f00(0x21c)]();if(_0x3bc752){if(_0x4bde36-_0x341eb4<maxSecretAge*0x3e8)return _0x1a7bdc;else return![];}else return _0x1a7bdc;}catch(_0x2a1e6c){return![];}else return![];}const validToken=(_0x1693cd,_0x1d28b3)=>{const _0x1e8937=_0x40c769,_0x2952ec=devices[_0x1d28b3]['ip'];if(!_0x1693cd)return{'error':'No\x20authentication\x20token'};for(let _0x2ab658 of blacklist){if(_0x2ab658[_0x1e8937(0x27e)]==_0x1693cd)return{'error':_0x1e8937(0x189)};}let _0x1300d1;try{_0x1300d1=jwt['verify'](_0x1693cd,secure[_0x1e8937(0x1df)]+_0x1d28b3);}catch{return{'error':_0x1e8937(0x16c)};}if(!_0x1300d1[_0x1e8937(0x1b6)]('clientip')&&!_0x1300d1[_0x1e8937(0x1b6)](_0x1e8937(0x17f))||!_0x1300d1[_0x1e8937(0x1b6)](_0x1e8937(0x165)))return{'error':_0x1e8937(0x213)};if(!_0x1300d1[_0x1e8937(0x1b6)](_0x1e8937(0x17f))&&_0x1300d1[_0x1e8937(0x1b6)](_0x1e8937(0x1d3))){const {clientip:_0x4720c6}=_0x1300d1;return _0x2952ec==_0x4720c6?{'success':_0x1e8937(0x181)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x1300d1[_0x1e8937(0x1b6)](_0x1e8937(0x17f))&&_0x1300d1['hasOwnProperty'](_0x1e8937(0x1d3))){const {username:_0x44b6cc,clientip:_0x22a28c}=_0x1300d1;return settings[_0x1e8937(0x255)]==_0x44b6cc&&_0x2952ec==_0x22a28c?{'success':_0x1e8937(0x181)}:{'error':_0x1e8937(0x19f)};}}},generateLoginToken=_0x516be1=>{const _0x47e6f8=_0x40c769;if(_0x516be1){const _0x56dd2d=devices[_0x516be1]['ip'];return jwt['sign']({'username':settings[_0x47e6f8(0x255)],'clientip':_0x56dd2d},secure['secret']+_0x516be1,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x46c84e=>{const _0x3b0b7c=_0x40c769;if(_0x46c84e){const _0x2e367b=devices[_0x46c84e]['ip'];return jwt['sign']({'clientip':_0x2e367b},secure[_0x3b0b7c(0x1df)]+_0x46c84e,{'expiresIn':devices[_0x46c84e][_0x3b0b7c(0x236)][_0x3b0b7c(0x171)]*0x3c});}else return![];},telegramIpApproved=_0x2baa2d=>{const _0x3dc413=_0x40c769;let _0x325cdd=![];return devices[_0x2baa2d][_0x3dc413(0x236)]&&devices[_0x2baa2d]['telegramIpApproval'][_0x3dc413(0x171)]!='reject'&&(_0x325cdd=devices[_0x2baa2d]['telegramIpApproval'][_0x3dc413(0x1d3)]==devices[_0x2baa2d]['ip']&&new Date()['getTime']()-devices[_0x2baa2d]['telegramIpApproval'][_0x3dc413(0x1a5)]<devices[_0x2baa2d][_0x3dc413(0x236)][_0x3dc413(0x171)]*0x3c*0x3e8),_0x325cdd;},telegram2FaApproved=_0x370675=>{const _0x5c6240=_0x40c769;let _0xcad2db=![];return devices[_0x370675][_0x5c6240(0x20f)]&&devices[_0x370675]['telegram2FaApproval'][_0x5c6240(0x171)]!=_0x5c6240(0x269)&&(_0xcad2db=devices[_0x370675][_0x5c6240(0x20f)]['clientip']==devices[_0x370675]['ip']&&new Date()[_0x5c6240(0x21c)]()-devices[_0x370675][_0x5c6240(0x20f)][_0x5c6240(0x1a5)]<devices[_0x370675]['telegram2FaApproval'][_0x5c6240(0x171)]*0x3c*0x3e8),_0xcad2db;},normalizeIP=_0xe7a9a3=>{const _0x33b8bf=_0x40c769;let _0x1042f7=null,_0x187b75=null;if(ipaddr[_0x33b8bf(0x1e8)](_0xe7a9a3)){const _0x3bda4b=ipaddr[_0x33b8bf(0x1c6)](_0xe7a9a3);_0x3bda4b[_0x33b8bf(0x1a6)]()===_0x33b8bf(0x25a)?(_0x3bda4b[_0x33b8bf(0x238)]()&&(_0x1042f7=_0x3bda4b['toIPv4Address']()[_0x33b8bf(0x290)]()),_0x187b75=_0x3bda4b['toString']()):(_0x1042f7=_0x3bda4b['toString'](),_0x187b75=_0x3bda4b[_0x33b8bf(0x16a)]()[_0x33b8bf(0x290)]());}return{'show':_0x1042f7?_0x1042f7:_0x187b75,'store':_0x187b75};};