const _0x205e5d=_0x31a8;(function(_0x593871,_0x5e9b3c){const _0x31407a=_0x31a8,_0x6173ce=_0x593871();while(!![]){try{const _0x40251b=parseInt(_0x31407a(0x2cf))/0x1+-parseInt(_0x31407a(0x2df))/0x2*(parseInt(_0x31407a(0x342))/0x3)+-parseInt(_0x31407a(0x33b))/0x4*(parseInt(_0x31407a(0x29b))/0x5)+parseInt(_0x31407a(0x1ba))/0x6*(parseInt(_0x31407a(0x382))/0x7)+-parseInt(_0x31407a(0x2fa))/0x8*(-parseInt(_0x31407a(0x2a8))/0x9)+parseInt(_0x31407a(0x35d))/0xa+parseInt(_0x31407a(0x343))/0xb;if(_0x40251b===_0x5e9b3c)break;else _0x6173ce['push'](_0x6173ce['shift']());}catch(_0x1e89b1){_0x6173ce['push'](_0x6173ce['shift']());}}}(_0x1593,0x618d5));const _0x570ab0=function(){let _0x53a09d=!![];return function(_0x226669,_0x24e931){const _0xe48f51=_0x53a09d?function(){const _0x2ac91f=_0x31a8;if(_0x24e931){const _0x595a75=_0x24e931[_0x2ac91f(0x2c1)](_0x226669,arguments);return _0x24e931=null,_0x595a75;}}:function(){};return _0x53a09d=![],_0xe48f51;};}(),_0x3609fb=_0x570ab0(this,function(){const _0x3d7c2b=_0x31a8;return _0x3609fb['toString']()[_0x3d7c2b(0x318)](_0x3d7c2b(0x246))['toString']()[_0x3d7c2b(0x24a)](_0x3609fb)[_0x3d7c2b(0x318)]('(((.+)+)+)+$');});_0x3609fb();'use strict';process['env'][_0x205e5d(0x28d)]=0x1;const childProcess=require(_0x205e5d(0x32f)),fs=require('fs'),fns=require(_0x205e5d(0x2d3)),low=require(_0x205e5d(0x2b0)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x205e5d(0x35b)),crypto=require(_0x205e5d(0x353)),Crypt=require('hybrid-crypto-js')[_0x205e5d(0x226)],RSA=require(_0x205e5d(0x357))[_0x205e5d(0x34f)],bcrypt=require(_0x205e5d(0x328)),jwt=require(_0x205e5d(0x2c9)),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x205e5d(0x339)][_0x205e5d(0x24e)](0x2))[_0x205e5d(0x339)],uuidRandom=require(_0x205e5d(0x31c)),TelegramBot=require(_0x205e5d(0x288)),Mixpanel=require(_0x205e5d(0x1b1)),axios=require(_0x205e5d(0x24c)),{GraphQLClient,gql}=require(_0x205e5d(0x222)),util=require(_0x205e5d(0x1fc)),fileUpload=require(_0x205e5d(0x2ae)),{networkInterfaces}=require('os'),PORT=argv[_0x205e5d(0x306)]||_0x205e5d(0x1fe),pattern=/^[0-9]{2,4}$/;!pattern[_0x205e5d(0x373)](PORT)&&(console[_0x205e5d(0x27d)](_0x205e5d(0x327)+PORT+_0x205e5d(0x1b4)),process[_0x205e5d(0x1ca)](0x1));const HOST=argv['host']||null,userID=argv[_0x205e5d(0x1ad)]||'',debugging=argv['d']||![],nodeversion=process[_0x205e5d(0x1b2)][_0x205e5d(0x309)],environment=require(_0x205e5d(0x2e1))[_0x205e5d(0x26c)]||_0x205e5d(0x1eb);let bbpath=_0x205e5d(0x1c6),bbpath2='';const botfile=_0x205e5d(0x196),configfile='bb-config.json',settingsfile=_0x205e5d(0x1cc),securefile=_0x205e5d(0x33d),maxBackups=0xa;let validInstallation=!![];!fs[_0x205e5d(0x215)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x205e5d(0x269)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x205e5d(0x24b),logspath=userID?bbpath+_0x205e5d(0x1c2)+userID+'/':bbpath+_0x205e5d(0x1c2),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x205e5d(0x356),loggerfile=fs[_0x205e5d(0x2dd)](logspath+_0x205e5d(0x202),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+'temp/';!fs[_0x205e5d(0x215)](configpath)&&fs[_0x205e5d(0x2fb)](configpath);!fs[_0x205e5d(0x215)](configbackuppath)&&fs[_0x205e5d(0x2fb)](configbackuppath);!fs[_0x205e5d(0x215)](logspath)&&fs[_0x205e5d(0x2fb)](logspath);!fs[_0x205e5d(0x215)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x205e5d(0x215)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x205e5d(0x305)]({'bots':[]})[_0x205e5d(0x36a)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x205e5d(0x305)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x205e5d(0x1cd),'onepagemode':![]}})[_0x205e5d(0x36a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x205e5d(0x305)]({'secure':{},'blacklist':[]})[_0x205e5d(0x36a)]();let crypt=new Crypt({'md':_0x205e5d(0x351),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x205e5d(0x300),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x205e5d(0x200)]&&settings[_0x205e5d(0x200)]!=''&&settings[_0x205e5d(0x1c4)]&&settings[_0x205e5d(0x1c4)]!='')initTelegram();const parseColor=(_0xc50088,_0x58224f)=>{const _0x45d49a=_0x205e5d,_0x22155e=/#[A-Z]{3}#/g;if(typeof _0xc50088==_0x45d49a(0x25e)){!_0x58224f?_0xc50088=_0xc50088[_0x45d49a(0x1ff)](_0x22155e,''):(_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#BLU#/g,_0x45d49a(0x360)),_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#RED#/g,_0x45d49a(0x24f)),_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#YEL#/g,_0x45d49a(0x227)),_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#MAG#/g,_0x45d49a(0x36d)),_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#CYA#/g,_0x45d49a(0x257)),_0xc50088=_0xc50088[_0x45d49a(0x1ff)](/#RES#/g,_0x45d49a(0x229)));;}return _0xc50088;},logger={'screen':_0xd69759=>{const _0x304867=_0x205e5d;console[_0x304867(0x27d)](parseColor(_0xd69759,!![]));},'simple':_0x453ed6=>{const _0x3a8d0a=_0x205e5d;console[_0x3a8d0a(0x27d)](parseColor(_0x453ed6,!![])),loggerfile[_0x3a8d0a(0x36a)](util[_0x3a8d0a(0x338)](parseColor(_0x453ed6,![]))+'\x0a');},'full':async _0x5753ce=>{const _0x142878=_0x205e5d,_0x526654=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x5753ce;console[_0x142878(0x27d)](parseColor(_0x526654,!![])),loggerfile[_0x142878(0x36a)](util[_0x142878(0x338)](parseColor(_0x526654,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x142878(0x23a)]!=_0x142878(0x1bd))await tgBot[_0x142878(0x241)](settings[_0x142878(0x1a8)],_0x142878(0x2f3)+parseColor(_0x5753ce,![]))[_0x142878(0x1b7)](_0x373098=>{telegramError(_0x373098);});},'debug':async(_0x5c3c22,_0x6feedd='')=>{const _0x41eb6b=_0x205e5d,_0x4359c0=getTimeStamp()+_0x41eb6b(0x27c)+_0x5c3c22;if(debugging)console[_0x41eb6b(0x27d)](parseColor(_0x4359c0,!![]));loggerfile[_0x41eb6b(0x36a)](util[_0x41eb6b(0x338)](parseColor(_0x4359c0,![]))+'\x0a');if(_0x6feedd){if(debugging)console[_0x41eb6b(0x27d)](_0x6feedd);loggerfile[_0x41eb6b(0x36a)](util[_0x41eb6b(0x338)](_0x6feedd)+'\x0a');}}};process['on']('uncaughtException',function(_0x1ae26f){const _0x5cb890=_0x205e5d;logger[_0x5cb890(0x312)](_0x1ae26f);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x205e5d(0x2f1))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x205e5d(0x277))[_0x205e5d(0x198)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x205e5d(0x32a),async(_0x2ec457,_0x41dcab)=>{const _0x1bd063=_0x205e5d,_0x44baec=_0x2ec457[_0x1bd063(0x2a6)][_0x1bd063(0x307)],_0x23657d=getClientsWithBotID(_0x1bd063(0x1dd)),_0x1bb5fc=_0x2ec457[_0x1bd063(0x286)][_0x1bd063(0x2d2)],_0x1082c2=timelyDecrypt(_0x1bb5fc,![]),_0x2b791e=_0x23657d[_0x1bd063(0x1b8)](_0x2560c7=>_0x2560c7[_0x1bd063(0x2d2)]==_0x1082c2);if(_0x2b791e){const _0x32e675=normalizeIP(_0x2ec457[_0x1bd063(0x1d5)]['remoteAddress'])[_0x1bd063(0x267)],_0x35e66c=_0x2ec457[_0x1bd063(0x286)][_0x1bd063(0x374)];if(validateAccess(_0x35e66c,_0x1082c2,_0x32e675)[_0x1bd063(0x1bb)])_0x44baec==_0x1bd063(0x335)&&await backupConfigFiles(),await zipFiles(_0x44baec),_0x41dcab[_0x1bd063(0x26d)](zippath+(_0x44baec+'.zip'),_0x5c972b=>{const _0x27a0e7=_0x1bd063;_0x5c972b&&(logger[_0x27a0e7(0x248)](_0x27a0e7(0x25f)+_0x44baec),logger[_0x27a0e7(0x312)](_0x5c972b));});else logger[_0x1bd063(0x248)](_0x1bd063(0x2f2)+_0x44baec+'\x20(1)');}else logger[_0x1bd063(0x248)](_0x1bd063(0x2f2)+_0x44baec+'\x20(2)');}),app[_0x205e5d(0x1db)](_0x205e5d(0x2ca),async(_0x5d03b5,_0x3ffd23)=>{const _0x5df84b=_0x205e5d,_0x155e1f=getClientsWithBotID('botmanager'),_0x1c8457=_0x5d03b5[_0x5df84b(0x286)][_0x5df84b(0x2d2)],_0x5b7af4=timelyDecrypt(_0x1c8457,![]),_0x31648c=_0x155e1f[_0x5df84b(0x1b8)](_0x547bf7=>_0x547bf7[_0x5df84b(0x2d2)]==_0x5b7af4);logger[_0x5df84b(0x32c)](_0x5df84b(0x239));if(_0x31648c){const _0x456d33=normalizeIP(_0x5d03b5[_0x5df84b(0x1d5)][_0x5df84b(0x349)])[_0x5df84b(0x267)],_0xde8fe6=_0x5d03b5['headers'][_0x5df84b(0x374)];if(validateAccess(_0xde8fe6,_0x5b7af4,_0x456d33)[_0x5df84b(0x1bb)]){if(_0x5d03b5['files']){const _0x1b991a=_0x5d03b5['files'][_0x5df84b(0x293)];await _0x1b991a['mv'](temppath+_0x1b991a['name']),_0x3ffd23[_0x5df84b(0x22e)]({'status':!![],'message':'File\x20uploaded'});const _0x557ae8=getBotsWithMode();_0x557ae8[_0x5df84b(0x270)]>0x0?confirmRestore(temppath,_0x1b991a[_0x5df84b(0x213)]):unzipFile(temppath,_0x1b991a[_0x5df84b(0x213)]);}}else logger[_0x5df84b(0x248)](_0x5df84b(0x249));}else logger[_0x5df84b(0x248)](_0x5df84b(0x33a));}),app[_0x205e5d(0x313)](express[_0x205e5d(0x28a)](path[_0x205e5d(0x1fd)](__dirname,bbpath2,_0x205e5d(0x324)))),app['use'](express[_0x205e5d(0x28a)](path['join'](__dirname,bbpath2,_0x205e5d(0x370)))),app[_0x205e5d(0x2c7)]('/',function(_0x42b779,_0x3fe7e7){const _0x1ca807=_0x205e5d;_0x3fe7e7['sendFile'](path[_0x1ca807(0x1fd)](__dirname,bbpath2,_0x1ca807(0x324),_0x1ca807(0x1c9)));}),app[_0x205e5d(0x2c7)](_0x205e5d(0x326),function(_0x20ba33,_0x3ff9a1){const _0x48a530=_0x205e5d;_0x3ff9a1[_0x48a530(0x218)](path[_0x48a530(0x1fd)](__dirname,bbpath2,_0x48a530(0x370),'index.html'));}),app['get'](_0x205e5d(0x2d5),(_0x326cae,_0x452e50)=>{const _0x44b9b6=_0x205e5d;_0x452e50[_0x44b9b6(0x218)](path[_0x44b9b6(0x1fd)](__dirname,bbpath2,'build',_0x44b9b6(0x1c9)));}),app[_0x205e5d(0x2c7)](_0x205e5d(0x367),(_0x2ffad9,_0xa1b1eb)=>{const _0x22d727=_0x205e5d;_0xa1b1eb[_0x22d727(0x218)](path[_0x22d727(0x1fd)](__dirname,bbpath2,_0x22d727(0x370),_0x22d727(0x1c9)));}),app[_0x205e5d(0x2c7)](_0x205e5d(0x372),(_0x3b1cea,_0x103687)=>{const _0xe4d9cd=_0x205e5d;_0x103687['sendFile'](path[_0xe4d9cd(0x1fd)](__dirname,bbpath2,_0xe4d9cd(0x370),_0xe4d9cd(0x1c9)));}),app[_0x205e5d(0x2c7)](_0x205e5d(0x37a),(_0x5a9518,_0x5b6999)=>{const _0x5be4f0=_0x205e5d;_0x5b6999[_0x5be4f0(0x218)](path[_0x5be4f0(0x1fd)](__dirname,bbpath2,_0x5be4f0(0x370),'index.html'));}),app['get'](_0x205e5d(0x234),(_0x2659aa,_0x52da83)=>{const _0x5d4858=_0x205e5d;_0x52da83[_0x5d4858(0x218)](path['join'](__dirname,bbpath2,_0x5d4858(0x370),_0x5d4858(0x1c9)));}),app['get'](_0x205e5d(0x21a),(_0x41bb98,_0x334ee6)=>{const _0x2d0218=_0x205e5d;_0x334ee6[_0x2d0218(0x218)](path['join'](__dirname,bbpath2,_0x2d0218(0x370),_0x2d0218(0x1c9)));});if(HOST)http[_0x205e5d(0x37e)](PORT,HOST);else http[_0x205e5d(0x37e)](PORT);const io=require(_0x205e5d(0x26a))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x22da99=_0x205e5d;let _0x4fddb9='[ip-address]';const _0x44474e=networkInterfaces(),_0x573076={};for(const _0x15e042 of Object[_0x22da99(0x1aa)](_0x44474e)){for(const _0x3cb710 of _0x44474e[_0x15e042]){if((_0x3cb710[_0x22da99(0x1f4)]==_0x22da99(0x1a2)||_0x3cb710[_0x22da99(0x1f4)]==0x4)&&!_0x3cb710[_0x22da99(0x25b)]){const _0x59ffbe=ipaddr['parse'](_0x3cb710[_0x22da99(0x2db)])['range']();_0x59ffbe!='private'&&(!_0x573076[_0x15e042]&&(_0x573076[_0x15e042]=[]),_0x573076[_0x15e042][_0x22da99(0x1ed)](_0x3cb710[_0x22da99(0x2db)]),_0x4fddb9=_0x3cb710[_0x22da99(0x2db)]);}}}return{'serverip':_0x4fddb9,'netinterfaces':_0x573076};}async function startServer(){const _0x28e503=_0x205e5d,{serverip:_0x7efc25,netinterfaces:_0x5859a1}=getServerIP();logger[_0x28e503(0x312)](''),logger[_0x28e503(0x312)]('-----------------------------------------------------------------------------------'),await logger[_0x28e503(0x248)](_0x28e503(0x19f)+serverversion+_0x28e503(0x294)+(environment==_0x28e503(0x336)?_0x28e503(0x268):'')+'\x0a'+(_0x28e503(0x315)+PORT+_0x28e503(0x22d))+(_0x28e503(0x238)+_0x7efc25+':'+PORT+_0x28e503(0x22f))),logger[_0x28e503(0x312)]('-----------------------------------------------------------------------------------');if(config[_0x28e503(0x270)]!=0x0)for(const _0x3ae4aa of config){if(_0x3ae4aa[_0x28e503(0x345)]==_0x28e503(0x2b7)||_0x3ae4aa[_0x28e503(0x345)]==_0x28e503(0x24d))await logger['full'](_0x28e503(0x2d7)+_0x3ae4aa[_0x28e503(0x371)]+'\x20|\x20'+_0x3ae4aa[_0x28e503(0x1ec)]),startBot([_0x3ae4aa['botID'],userID],{'cwd':bbpath},function(_0x8cce4b){const _0xbfa806=_0x28e503;if(_0x8cce4b)logger[_0xbfa806(0x248)](_0x8cce4b);});else(_0x3ae4aa[_0x28e503(0x345)]==_0x28e503(0x31b)||_0x3ae4aa['status']=='new-disabled')&&await logger[_0x28e503(0x248)](_0x28e503(0x27f)+_0x3ae4aa[_0x28e503(0x371)]+_0x28e503(0x377)+_0x3ae4aa[_0x28e503(0x1ec)]);}else!newBot&&logger[_0x28e503(0x312)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x28e503(0x312)]('-----------------------------------------------------------------------------------'),logger[_0x28e503(0x312)](''),await logger[_0x28e503(0x32c)](_0x28e503(0x263)+nodeversion),await logger['debug'](_0x28e503(0x2ac),_0x5859a1);}function startSocket(){const _0x32021e=_0x205e5d;io['on'](_0x32021e(0x34d),_0x187418=>{const _0x172cd7=_0x32021e;let _0x3d2c8d,_0x457798,_0x543fc3,_0x5835b3,_0x5f0c90;const _0x30a2f8=_0x187418[_0x172cd7(0x361)][_0x172cd7(0x286)][_0x172cd7(0x1f6)];_0x457798=_0x30a2f8[_0x172cd7(0x2e7)](/bot[0-9]{3}/);if(_0x457798)_0x543fc3=_0x457798[0x0][_0x172cd7(0x2e7)](/[0-9]{3}/);if(_0x543fc3)_0x3d2c8d=_0x543fc3[0x0];else _0x3d2c8d=_0x172cd7(0x1dd);const _0x40fbd7=_0x187418[_0x172cd7(0x361)]['auth'][_0x172cd7(0x2e5)];if(!_0x40fbd7)_0x187418['emit'](_0x172cd7(0x345),{'publicKey':secure['publicKey']});else{_0x5835b3=timelyDecrypt(_0x40fbd7,![]);if(!_0x5835b3)_0x187418[_0x172cd7(0x209)](_0x172cd7(0x345),{'publicKey':secure[_0x172cd7(0x1b3)]});else{_0x5f0c90=normalizeIP(_0x187418[_0x172cd7(0x23b)][_0x172cd7(0x349)])[_0x172cd7(0x267)];if(!devices[_0x5835b3])devices[_0x5835b3]={'uuid':_0x5835b3,'access':{'token':null}};devices[_0x5835b3]['ip']=_0x5f0c90;const _0x1a9673=addClient(_0x187418['id'],_0x5835b3,_0x3d2c8d);setAccess(_0x1a9673),emitMessages(),_0x187418['on'](_0x172cd7(0x37b),_0x3727a9=>{const _0x491bbd=_0x172cd7,_0x295afa=timelyDecrypt(_0x3727a9['password']);if(_0x295afa){_0x3727a9={'username':_0x3727a9[_0x491bbd(0x322)],'password':_0x295afa},devices[_0x5835b3]['access']=validateCredentials(_0x3727a9,_0x5835b3);if(devices[_0x5835b3][_0x491bbd(0x317)][_0x491bbd(0x1bb)]==![]&&devices[_0x5835b3]['access'][_0x491bbd(0x37c)]==_0x491bbd(0x1da))_0x187418['emit'](_0x491bbd(0x345),{'access':devices[_0x5835b3][_0x491bbd(0x317)]}),loginAccess2FA(_0x5835b3,_0x5f0c90);else{if(devices[_0x5835b3][_0x491bbd(0x317)]['allow']==![]&&devices[_0x5835b3][_0x491bbd(0x317)][_0x491bbd(0x37c)]==_0x491bbd(0x2d9))_0x187418[_0x491bbd(0x209)]('status',{'access':devices[_0x5835b3][_0x491bbd(0x317)]});else devices[_0x5835b3][_0x491bbd(0x317)][_0x491bbd(0x1bb)]&&devices[_0x5835b3][_0x491bbd(0x317)][_0x491bbd(0x37c)]==_0x491bbd(0x364)&&(getClientsWithUuid(_0x5835b3)[_0x491bbd(0x252)](_0x32cc2b=>{setAccess(_0x32cc2b);}),logger[_0x491bbd(0x32c)](_0x491bbd(0x291)+_0x5835b3['slice'](-0x8)),setTokenRefresh(_0x5835b3),setSessionTimeout(_0x491bbd(0x37b),_0x5835b3));}}else logger['full'](_0x491bbd(0x2e9));}),_0x187418['on'](_0x172cd7(0x26f),()=>{resetPassword();}),_0x187418['on']('disconnect',_0x59bf17=>{removeClient(_0x187418['id']);}),_0x3d2c8d==_0x172cd7(0x1dd)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2b5667){const _0x32583a=_0x205e5d;if(_0x2b5667!=_0x32583a(0x1dd)&&config[_0x32583a(0x20c)]!=''){if(pid[_0x2b5667])pid[_0x2b5667][_0x32583a(0x22e)]({'function':_0x32583a(0x27b),'args':null});}_0x2b5667!=_0x32583a(0x1dd)&&broadcastToBots(_0x32583a(0x272),JSON['stringify'](config));}function reloadBotManager(){const _0xce3cbc=_0x205e5d;getClientsWithBotID(_0xce3cbc(0x1dd))[_0xce3cbc(0x252)](_0x18d7c8=>{const _0x4e1e46=_0xce3cbc;getSocket(_0x18d7c8['id'])[_0x4e1e46(0x209)](_0x4e1e46(0x345),{'access':{'allow':![],'reason':_0x4e1e46(0x29e),'token':null}});});}function getSocket(_0x51d7d1){const _0x167211=_0x205e5d;return io['sockets'][_0x167211(0x2c5)][_0x167211(0x2c7)](_0x51d7d1);}function setAccess(_0x2025fc){const _0x10cd3b=_0x205e5d,_0x6bd38f=getSocket(_0x2025fc['id']),_0xd18e2a=_0x2025fc[_0x10cd3b(0x2d2)],_0x5f1dd3=_0x2025fc[_0x10cd3b(0x2ef)];devices[_0xd18e2a][_0x10cd3b(0x317)]=validateAccess(devices[_0xd18e2a]['access'][_0x10cd3b(0x2c2)],_0xd18e2a),logger['debug'](_0x10cd3b(0x350)+devices[_0xd18e2a]['access'][_0x10cd3b(0x37c)]+_0x10cd3b(0x34c)+_0x2025fc['id'][_0x10cd3b(0x24e)](-0x8)+_0x10cd3b(0x311)+_0xd18e2a[_0x10cd3b(0x24e)](-0x8)),_0x6bd38f[_0x10cd3b(0x1fd)](_0xd18e2a);if(devices[_0xd18e2a][_0x10cd3b(0x317)][_0x10cd3b(0x1bb)]){_0x6bd38f['join'](_0x5f1dd3);if(_0x5f1dd3=='botmanager')initializeSocketBotManager(_0x6bd38f);else initializeSocketBot(_0x6bd38f);initClient(_0x5f1dd3);}devices[_0xd18e2a][_0x10cd3b(0x317)][_0x10cd3b(0x2c2)]&&devices[_0xd18e2a][_0x10cd3b(0x317)][_0x10cd3b(0x37c)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0xd18e2a),devices[_0xd18e2a][_0x10cd3b(0x317)]['token']&&devices[_0xd18e2a][_0x10cd3b(0x317)]['reason']==_0x10cd3b(0x281)&&setSessionTimeout(_0x10cd3b(0x37b),_0xd18e2a),_0x6bd38f[_0x10cd3b(0x209)](_0x10cd3b(0x345),{'status':_0x2025fc[_0x10cd3b(0x2b9)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xd18e2a][_0x10cd3b(0x317)],'externalip':devices[_0xd18e2a]['ip'],'publicKey':secure[_0x10cd3b(0x1b3)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0xd18e2a]['access'][_0x10cd3b(0x1bb)]==![]&&devices[_0xd18e2a]['access'][_0x10cd3b(0x37c)]=='2FA\x20required'&&temporaryAccess2FA(_0xd18e2a,devices[_0xd18e2a]['ip']);}function setSessionTimeout(_0x198fc7,_0x56ac0c){const _0x5ae6cd=_0x205e5d;let _0x1ee9ee;if(_0x198fc7=='login')_0x1ee9ee=loginExpiry*0x3c*0x3e8;else _0x1ee9ee=devices[_0x56ac0c][_0x5ae6cd(0x21b)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x56ac0c]['telegramIpApproval'][_0x5ae6cd(0x35e)]);if(devices[_0x56ac0c][_0x5ae6cd(0x2d1)])clearTimeout(devices[_0x56ac0c][_0x5ae6cd(0x2d1)]);devices[_0x56ac0c][_0x5ae6cd(0x2d1)]=setTimeout(()=>{const _0x3af162=_0x5ae6cd;if(devices[_0x56ac0c][_0x3af162(0x2a3)])clearTimeout(devices[_0x56ac0c][_0x3af162(0x2a3)]);removeSocketListeners(_0x56ac0c),addBlacklist(_0x56ac0c),devices[_0x56ac0c][_0x3af162(0x21b)]=null,devices[_0x56ac0c][_0x3af162(0x2ff)]=null,devices[_0x56ac0c]['access'][_0x3af162(0x2c2)]=null,logger[_0x3af162(0x32c)]('Session\x20expired\x20for\x20user\x20...'+_0x56ac0c[_0x3af162(0x24e)](-0x8)),devices[_0x56ac0c][_0x3af162(0x317)]=validateAccess(devices[_0x56ac0c]['access']['token'],_0x56ac0c),!(devices[_0x56ac0c]['access'][_0x3af162(0x1bb)]&&devices[_0x56ac0c][_0x3af162(0x317)]['reason']==_0x3af162(0x2f8))&&(_0x198fc7=='login'?io['to'](_0x56ac0c)[_0x3af162(0x209)](_0x3af162(0x345),{'access':{'allow':![],'reason':_0x3af162(0x244),'token':null}}):io['to'](_0x56ac0c)[_0x3af162(0x209)](_0x3af162(0x345),{'access':{'allow':![],'reason':_0x3af162(0x205),'token':null}})),devices[_0x56ac0c]['access'][_0x3af162(0x2c2)]=null;},_0x1ee9ee);}function setTokenRefresh(_0x1e3051){const _0x5c408b=_0x205e5d;if(devices[_0x1e3051][_0x5c408b(0x2a3)])clearTimeout(devices[_0x1e3051][_0x5c408b(0x2a3)]);devices[_0x1e3051][_0x5c408b(0x2a3)]=setTimeout(()=>{const _0x195249=_0x5c408b;getClientsWithUuid(_0x1e3051)[_0x195249(0x270)]!=0x0?(devices[_0x1e3051][_0x195249(0x317)]=refreshToken(_0x1e3051),io['to'](_0x1e3051)[_0x195249(0x209)](_0x195249(0x345),{'status':_0x195249(0x224),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1e3051][_0x195249(0x317)],'externalip':devices[_0x1e3051]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x1e3051)):clearTimeout(devices[_0x1e3051][_0x195249(0x2a3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4d90d0){const _0x6cde58=_0x205e5d,_0x25a500=getClient(_0x4d90d0['id'])[_0x6cde58(0x2d2)];_0x4d90d0[_0x6cde58(0x209)](_0x6cde58(0x272),config),_0x4d90d0[_0x6cde58(0x209)]('settings',cleanSettings()),_0x4d90d0['on'](_0x6cde58(0x1e1),_0x2958c2=>{const _0x585ee9=_0x6cde58;if(validateAccess(_0x2958c2,_0x25a500)[_0x585ee9(0x1bb)])addBot();else logger[_0x585ee9(0x248)](_0x585ee9(0x2bb));}),_0x4d90d0['on']('update-bot',(_0x1c4a16,_0x1c28c1)=>{const _0x102434=_0x6cde58;if(validateAccess(_0x1c28c1,_0x25a500)[_0x102434(0x1bb)])toggleBot(_0x1c4a16[_0x102434(0x371)],_0x1c4a16['status'],_0x1c4a16[_0x102434(0x232)]);else logger[_0x102434(0x248)](_0x102434(0x363));}),_0x4d90d0['on'](_0x6cde58(0x2b8),(_0x2b72d9,_0x76ef40)=>{const _0x3e2cb1=_0x6cde58;if(validateAccess(_0x76ef40,_0x25a500)['allow'])toggleBotMode(_0x2b72d9);else logger[_0x3e2cb1(0x248)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4d90d0['on'](_0x6cde58(0x1ce),(_0x1904c8,_0x3744a5)=>{const _0x32ce6f=_0x6cde58;if(validateAccess(_0x3744a5,_0x25a500)[_0x32ce6f(0x1bb)])deleteBot(_0x1904c8);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4d90d0['on']('store-settings',(_0xc13c36,_0x2098bf)=>{const _0x5a129f=_0x6cde58;if(validateAccess(_0x2098bf,_0x25a500)['allow'])storeSettings(_0xc13c36,!![]);else logger[_0x5a129f(0x248)](_0x5a129f(0x1ab));}),_0x4d90d0['on'](_0x6cde58(0x304),_0x378b30=>{const _0x5560fa=_0x6cde58;if(validateAccess(_0x378b30,_0x25a500)[_0x5560fa(0x1bb)])updateBB('update');else logger['full'](_0x5560fa(0x259));}),_0x4d90d0['on'](_0x6cde58(0x271),_0x486710=>{const _0x17b6a6=_0x6cde58;if(validateAccess(_0x486710,_0x25a500)[_0x17b6a6(0x1bb)])updateBB(_0x17b6a6(0x2bd));else logger[_0x17b6a6(0x248)](_0x17b6a6(0x378));}),_0x4d90d0['on']('get-backup-files',_0x115334=>{const _0x794751=_0x6cde58;if(validateAccess(_0x115334,_0x25a500)[_0x794751(0x1bb)]){const _0x51edf0=getClient(_0x4d90d0['id']);if(_0x51edf0)getBackupFiles(_0x51edf0[_0x794751(0x2d2)]);else logger[_0x794751(0x248)](_0x794751(0x206));}else logger['full'](_0x794751(0x245));}),_0x4d90d0['on'](_0x6cde58(0x34e),(_0x79234,_0xdfbd00)=>{const _0x1396d7=_0x6cde58;if(validateAccess(_0xdfbd00,_0x25a500)[_0x1396d7(0x1bb)])restoreBackupFile(_0x79234);else logger[_0x1396d7(0x248)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x4d90d0['on']('get-messages',_0x3a3715=>{const _0x3a0aff=_0x6cde58;if(validateAccess(_0x3a3715,_0x25a500)['allow'])getMessages();else logger[_0x3a0aff(0x248)](_0x3a0aff(0x22b));}),_0x4d90d0['on'](_0x6cde58(0x333),(_0x501ce2,_0x4504c3)=>{const _0xe01bd4=_0x6cde58;if(validateAccess(_0x4504c3,_0x25a500)[_0xe01bd4(0x1bb)])confirmMessage(_0x501ce2);else logger[_0xe01bd4(0x248)](_0xe01bd4(0x253));}),_0x4d90d0['on'](_0x6cde58(0x1f1),_0x19a2d7=>{const _0x4a609b=_0x6cde58;if(validateAccess(_0x19a2d7,_0x25a500)[_0x4a609b(0x1bb)]){if(devices[_0x25a500][_0x4a609b(0x2a3)])clearTimeout(devices[_0x25a500][_0x4a609b(0x2a3)]);if(devices[_0x25a500]['pidExpireLogin'])clearTimeout(devices[_0x25a500]['pidExpireLogin']);removeSocketListeners(getClient(_0x4d90d0['id'])['uuid']),addBlacklist(_0x25a500),devices[_0x25a500]['telegramIpApproval']=null,devices[_0x25a500][_0x4a609b(0x2ff)]=null,devices[_0x25a500]['access'][_0x4a609b(0x2c2)]=null,logger[_0x4a609b(0x32c)](_0x4a609b(0x2a5)+_0x25a500['slice'](-0x8)),io['to'](getClient(_0x4d90d0['id'])[_0x4a609b(0x2d2)])[_0x4a609b(0x209)](_0x4a609b(0x345),{'access':{'allow':![],'reason':_0x4a609b(0x242),'token':null}});}else logger[_0x4a609b(0x248)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x423a9c){const _0x5898f7=_0x205e5d,_0x2328b1=getClient(_0x423a9c['id'])[_0x5898f7(0x2ef)],_0x2d0fe1=getClient(_0x423a9c['id'])[_0x5898f7(0x2d2)];_0x423a9c['on'](_0x5898f7(0x1f7),(_0x67e4ef,_0x1831eb)=>{const _0xaf3c13=_0x5898f7;if(validateAccess(_0x1831eb,_0x2d0fe1)[_0xaf3c13(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0xaf3c13(0x22e)]({'function':_0xaf3c13(0x290),'args':_0x67e4ef});}else logger[_0xaf3c13(0x248)](_0xaf3c13(0x2f6));}),_0x423a9c['on'](_0x5898f7(0x2ee),(_0x1cb2f1,_0x535a18)=>{const _0x36d29b=_0x5898f7;if(validateAccess(_0x535a18,_0x2d0fe1)[_0x36d29b(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x36d29b(0x22e)]({'function':_0x36d29b(0x2c4),'args':_0x1cb2f1});}else logger[_0x36d29b(0x248)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x423a9c['on'](_0x5898f7(0x2e8),(_0x93cf27,_0x13aa1c)=>{const _0x270e39=_0x5898f7;if(validateAccess(_0x13aa1c,_0x2d0fe1)['allow']){if(pid[_0x2328b1])pid[_0x2328b1][_0x270e39(0x22e)]({'function':_0x270e39(0x1e4),'args':_0x93cf27});}else logger[_0x270e39(0x248)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x423a9c['on'](_0x5898f7(0x208),(_0x4bdbec,_0x45908e)=>{const _0x403423=_0x5898f7;if(validateAccess(_0x45908e,_0x2d0fe1)[_0x403423(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1]['send']({'function':'storeConfiguration','args':_0x4bdbec});}else logger['full'](_0x403423(0x223));}),_0x423a9c['on']('store-headless',(_0x13716f,_0x25b2b2)=>{const _0x3ee8ef=_0x5898f7;if(validateAccess(_0x25b2b2,_0x2d0fe1)[_0x3ee8ef(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x3ee8ef(0x22e)]({'function':_0x3ee8ef(0x2fc),'args':_0x13716f});}else logger[_0x3ee8ef(0x248)](_0x3ee8ef(0x250));}),_0x423a9c['on'](_0x5898f7(0x1cf),(_0x34ccdb,_0x2fa34c)=>{const _0x3d9510=_0x5898f7;if(validateAccess(_0x2fa34c,_0x2d0fe1)[_0x3d9510(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x3d9510(0x22e)]({'function':_0x3d9510(0x321),'args':_0x34ccdb});}else logger[_0x3d9510(0x248)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x423a9c['on'](_0x5898f7(0x1d7),_0x48bba8=>{const _0x4988ed=_0x5898f7;if(validateAccess(_0x48bba8,_0x2d0fe1)[_0x4988ed(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x4988ed(0x22e)]({'function':_0x4988ed(0x1d4),'args':null});}else logger[_0x4988ed(0x248)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x423a9c['on'](_0x5898f7(0x1a1),_0x33c812=>{const _0x172040=_0x5898f7;if(validateAccess(_0x33c812,_0x2d0fe1)['allow']){if(pid[_0x2328b1])pid[_0x2328b1][_0x172040(0x22e)]({'function':_0x172040(0x197),'args':null});}else logger[_0x172040(0x248)](_0x172040(0x365));}),_0x423a9c['on'](_0x5898f7(0x37f),(_0x2416cd,_0x30b863)=>{const _0x3a245e=_0x5898f7;if(validateAccess(_0x30b863,_0x2d0fe1)[_0x3a245e(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x3a245e(0x22e)]({'function':'placeOrder','args':_0x2416cd});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x423a9c['on'](_0x5898f7(0x2a2),_0x46662b=>{const _0x58e4a1=_0x5898f7;if(validateAccess(_0x46662b,_0x2d0fe1)['allow']){if(pid[_0x2328b1])pid[_0x2328b1][_0x58e4a1(0x22e)]({'function':_0x58e4a1(0x1c1),'args':null});}else logger['full'](_0x58e4a1(0x2f9));}),_0x423a9c['on']('show-config',_0x3e07bd=>{const _0x526f37=_0x5898f7;if(validateAccess(_0x3e07bd,_0x2d0fe1)[_0x526f37(0x1bb)]){if(pid[_0x2328b1])pid[_0x2328b1][_0x526f37(0x22e)]({'function':'showConfig','args':null});}else logger[_0x526f37(0x248)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x423a9c['on'](_0x5898f7(0x304),_0x41da4e=>{const _0x562f79=_0x5898f7;if(validateAccess(_0x41da4e,_0x2d0fe1)[_0x562f79(0x1bb)])updateBB(_0x562f79(0x27e));else logger[_0x562f79(0x248)](_0x562f79(0x259));}),_0x423a9c['on'](_0x5898f7(0x369),_0x1ba05e=>{const _0xc4052b=_0x5898f7;if(validateAccess(_0x1ba05e,_0x2d0fe1)[_0xc4052b(0x1bb)])getMessages();else logger[_0xc4052b(0x248)](_0xc4052b(0x22b));}),_0x423a9c['on']('confirm-message',(_0x713c77,_0x2ed76c)=>{const _0x38768b=_0x5898f7;if(validateAccess(_0x2ed76c,_0x2d0fe1)[_0x38768b(0x1bb)])confirmMessage(_0x713c77);else logger[_0x38768b(0x248)](_0x38768b(0x253));}),_0x423a9c['on'](_0x5898f7(0x1f1),_0x276c0c=>{const _0x4c6e50=_0x5898f7;if(validateAccess(_0x276c0c,_0x2d0fe1)[_0x4c6e50(0x1bb)]){if(devices[_0x2d0fe1][_0x4c6e50(0x2a3)])clearTimeout(devices[_0x2d0fe1]['pidRefreshToken']);if(devices[_0x2d0fe1][_0x4c6e50(0x2d1)])clearTimeout(devices[_0x2d0fe1][_0x4c6e50(0x2d1)]);removeSocketListeners(getClient(_0x423a9c['id'])[_0x4c6e50(0x2d2)]),addBlacklist(_0x2d0fe1),devices[_0x2d0fe1][_0x4c6e50(0x21b)]=null,devices[_0x2d0fe1]['telegram2FaApproval']=null,devices[_0x2d0fe1]['access']['token']=null,logger[_0x4c6e50(0x32c)](_0x4c6e50(0x2a5)+_0x2d0fe1[_0x4c6e50(0x24e)](-0x8)),io['to'](getClient(_0x423a9c['id'])[_0x4c6e50(0x2d2)])[_0x4c6e50(0x209)](_0x4c6e50(0x345),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x4c6e50(0x248)](_0x4c6e50(0x214));});}function removeSocketListeners(_0xc0c9f4){const _0x56476f=_0x205e5d;getClientsWithUuid(_0xc0c9f4)[_0x56476f(0x252)](_0x107d24=>{getSocket(_0x107d24['id'])['removeAllListeners']();});}function cleanSettings(){const _0x5a130a=_0x205e5d;let _0x21bc1d=settings;return settings[_0x5a130a(0x200)]&&settings[_0x5a130a(0x200)]!=''&&(_0x21bc1d={..._0x21bc1d,'telegramToken':_0x5a130a(0x2bf)}),settings[_0x5a130a(0x32b)]&&settings['bbPassword']!=''&&(_0x21bc1d={..._0x21bc1d,'bbPassword':_0x5a130a(0x2bf)}),(settings[_0x5a130a(0x32b)]&&settings[_0x5a130a(0x32b)]==_0x5a130a(0x34b)||settings['telegramToken']&&settings[_0x5a130a(0x200)]=='***')&&(_0x21bc1d={..._0x21bc1d,'restored':{'password':settings[_0x5a130a(0x32b)]=='***','telegram':settings[_0x5a130a(0x200)]==_0x5a130a(0x34b)}}),_0x21bc1d;}async function updateBB(_0x357022){const _0x3fbd10=_0x205e5d;await backupConfigFiles(),installingUpdate=!![],config[_0x3fbd10(0x252)](_0x19fa69=>{restartBot(_0x19fa69['botID']);});if(_0x357022==_0x3fbd10(0x27e))process[_0x3fbd10(0x22e)]({'update':!![],'environment':environment},_0x4a5ead=>{});else _0x357022=='reinstall'&&process[_0x3fbd10(0x22e)]({'reinstall':!![],'environment':environment},_0x262eb4=>{});}function startBot(_0x90a4f9,_0x43cc7c,_0x4160ff){const _0x4cab7d=_0x205e5d;if(debugging)_0x90a4f9[_0x4cab7d(0x1ed)]('-d');let _0x4aa5d5=![];const _0x3a1bc1=_0x90a4f9[0x0];_0x43cc7c={..._0x43cc7c,'stdio':[_0x4cab7d(0x2dc),_0x4cab7d(0x2dc),_0x4cab7d(0x2dc),_0x4cab7d(0x2e3)]},pid[_0x3a1bc1]=childProcess['fork'](botfile,_0x90a4f9,_0x43cc7c),pid[_0x3a1bc1]['on'](_0x4cab7d(0x1a9),_0x5cbdb3=>{const _0xe02313=_0x4cab7d;switch(Object['keys'](_0x5cbdb3)[0x0]){case'botname':updateBotName(_0x3a1bc1,_0x5cbdb3[_0xe02313(0x1ec)]);break;case'updatebotmanager':updateBotManager();break;case _0xe02313(0x345):updateStatus(_0x3a1bc1,_0x5cbdb3[_0xe02313(0x345)]);break;case _0xe02313(0x232):updateLive(_0x3a1bc1,_0x5cbdb3[_0xe02313(0x232)]);break;case _0xe02313(0x2a7):updateLive(_0x3a1bc1,_0x5cbdb3[_0xe02313(0x2a7)]),io['to'](_0x3a1bc1)['emit'](_0xe02313(0x345),{'access':{'allow':![],'reason':_0xe02313(0x29e),'token':null}});break;case _0xe02313(0x22c):_0x5cbdb3['stop']==_0xe02313(0x2d6)&&restartBot(_0x3a1bc1);_0x5cbdb3[_0xe02313(0x22c)]==_0xe02313(0x1ee)&&toggleBot(_0x3a1bc1,'disabled',_0xe02313(0x2c0));break;case _0xe02313(0x1e5):sendTelegram(_0x3a1bc1,_0x5cbdb3['telegram']);break;case _0xe02313(0x22a):sendTelegramMsg(_0x5cbdb3[_0xe02313(0x22a)]);break;case _0xe02313(0x278):io['to'](_0x3a1bc1)['emit'](_0x5cbdb3[_0xe02313(0x278)],_0x5cbdb3[_0xe02313(0x279)]);break;}}),pid[_0x3a1bc1]['on']('error',function(_0x20c69e){if(_0x4aa5d5)return;_0x4aa5d5=!![],_0x4160ff(_0x20c69e);}),pid[_0x3a1bc1]['on'](_0x4cab7d(0x1ca),async function(_0x295d23){const _0x492a70=_0x4cab7d;if(installingUpdate)return;if(_0x4aa5d5)return;_0x4aa5d5=!![],_0x4160ff(null);const _0x55a2e0=dbConfig[_0x492a70(0x2c7)](_0x492a70(0x272))[_0x492a70(0x1b8)]({'botID':_0x3a1bc1})[_0x492a70(0x354)]();_0x55a2e0&&(_0x55a2e0['status']==_0x492a70(0x2b7)||_0x55a2e0[_0x492a70(0x345)]==_0x492a70(0x24d))&&(await sleep(0x3e8),updateLive(_0x3a1bc1,_0x492a70(0x2c0)),logger[_0x492a70(0x248)](_0x492a70(0x346)+_0x3a1bc1),startBot([_0x3a1bc1,userID],{'cwd':bbpath},function(_0x2807d3){const _0x84be7=_0x492a70;if(_0x2807d3)logger[_0x84be7(0x248)](_0x2807d3);}));});}function stopBot(_0x2e15f5){const _0x8909d1=_0x205e5d;getClientsWithBotID(_0x2e15f5)[_0x8909d1(0x252)](_0x582ae2=>{getSocket(_0x582ae2['id'])['disconnect'](!![]),removeClient(_0x582ae2['id']);}),pid[_0x2e15f5]&&(pid[_0x2e15f5][_0x8909d1(0x1ee)](),pid[_0x2e15f5]=null);}function restartBot(_0x22971c){const _0x393f05=_0x205e5d;if(pid[_0x22971c])pid[_0x22971c][_0x393f05(0x1ee)]();}function addBot(){const _0x379c43=_0x205e5d;let _0xafd48;for(let _0x3692bb=0x1;_0x3692bb<0x3e9;_0x3692bb++){_0xafd48=_0x3692bb[_0x379c43(0x1a4)]()[_0x379c43(0x383)](0x3,'0');let _0x5d9cec=config['find'](_0x159d32=>_0x159d32[_0x379c43(0x371)]==_0xafd48);if(!_0x5d9cec)break;}if(_0xafd48===_0x379c43(0x2fe)){logger[_0x379c43(0x248)](_0x379c43(0x2e4));return;}logger[_0x379c43(0x248)](_0x379c43(0x1e9)+_0xafd48),dbConfig[_0x379c43(0x2c7)]('bots')['push']({'botID':_0xafd48,'botname':'Bot\x20'+_0xafd48,'status':'new','live':''})[_0x379c43(0x36a)](),startBot([_0xafd48,userID],{'cwd':bbpath},function(_0x2605bc){const _0x48a396=_0x379c43;if(_0x2605bc)logger[_0x48a396(0x248)](_0x2605bc);}),config=getConfiguration(),io['to'](_0x379c43(0x1dd))[_0x379c43(0x209)](_0x379c43(0x272),config),broadcastToBots(_0x379c43(0x272),JSON[_0x379c43(0x337)](config));}function deleteBot(_0x3dfbe5){const _0x2cd913=_0x205e5d;getClientsWithBotID(_0x3dfbe5)[_0x2cd913(0x252)](_0xc24324=>{const _0x149d4a=_0x2cd913;getSocket(_0xc24324['id'])[_0x149d4a(0x316)](!![]),removeClient(_0xc24324['id']);}),dbConfig[_0x2cd913(0x2c7)](_0x2cd913(0x272))[_0x2cd913(0x2a0)]({'botID':_0x3dfbe5})['write'](),logger[_0x2cd913(0x248)]('Deleted\x20Bot\x20'+_0x3dfbe5),stopBot(_0x3dfbe5);try{if(fs[_0x2cd913(0x215)](path[_0x2cd913(0x1fd)](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+'-config.json')))fs[_0x2cd913(0x314)](path[_0x2cd913(0x1fd)](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+'-config.json'));if(fs[_0x2cd913(0x215)](path['join'](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+_0x2cd913(0x340))))fs[_0x2cd913(0x314)](path['join'](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+_0x2cd913(0x340)));if(fs[_0x2cd913(0x215)](path[_0x2cd913(0x1fd)](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+_0x2cd913(0x2de))))fs[_0x2cd913(0x314)](path[_0x2cd913(0x1fd)](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+_0x2cd913(0x2de)));if(fs['existsSync'](path[_0x2cd913(0x1fd)](configpath,'bot-'+_0x3dfbe5+_0x2cd913(0x32d))))fs[_0x2cd913(0x314)](path['join'](configpath,_0x2cd913(0x1ac)+_0x3dfbe5+'-results.json'));}catch(_0x10b66c){if(_0x10b66c)logger[_0x2cd913(0x248)](_0x2cd913(0x23f),_0x10b66c);}config=getConfiguration(),io['to'](_0x2cd913(0x1dd))[_0x2cd913(0x209)](_0x2cd913(0x272),config),broadcastToBots(_0x2cd913(0x272),JSON[_0x2cd913(0x337)](config));}function toggleBot(_0x1c2d57,_0xa521f3,_0x30eb6d){const _0x178c62=_0x205e5d;dbConfig['get']('bots')[_0x178c62(0x1b8)]({'botID':_0x1c2d57})[_0x178c62(0x20f)]({'status':_0xa521f3})[_0x178c62(0x20f)]({'live':_0x30eb6d})[_0x178c62(0x36a)]();if(_0xa521f3==_0x178c62(0x2b7)||_0xa521f3==_0x178c62(0x24d))logger['full'](_0x178c62(0x225)+_0x1c2d57),startBot([_0x1c2d57,userID],{'cwd':bbpath},function(_0x264298){const _0x4a53b2=_0x178c62;if(_0x264298)logger[_0x4a53b2(0x248)](_0x264298);});else(_0xa521f3==_0x178c62(0x31b)||_0xa521f3==_0x178c62(0x1af))&&(logger[_0x178c62(0x248)](_0x178c62(0x30b)+_0x1c2d57),stopBot(_0x1c2d57));config=getConfiguration(),io['to'](_0x178c62(0x1dd))[_0x178c62(0x209)](_0x178c62(0x272),config),broadcastToBots(_0x178c62(0x272),JSON[_0x178c62(0x337)](config));}function toggleStatus(_0x52df05){const _0x2a4198=_0x205e5d;let _0x4c3a10=dbConfig['get'](_0x2a4198(0x272))[_0x2a4198(0x1b8)]({'botID':_0x52df05})[_0x2a4198(0x354)](),_0x4fee6f;if(_0x4c3a10[_0x2a4198(0x345)]===_0x2a4198(0x2b7))_0x4fee6f=_0x2a4198(0x31b);else{if(_0x4c3a10[_0x2a4198(0x345)]===_0x2a4198(0x24d))_0x4fee6f=_0x2a4198(0x1af);else{if(_0x4c3a10['status']===_0x2a4198(0x1af))_0x4fee6f='new';else{if(_0x4c3a10[_0x2a4198(0x345)]===_0x2a4198(0x31b))_0x4fee6f=_0x2a4198(0x2b7);}}}return _0x4fee6f;}function updateStatus(_0x36b7e4,_0x2a0ee8){const _0x235489=_0x205e5d;dbConfig[_0x235489(0x2c7)](_0x235489(0x272))[_0x235489(0x1b8)]({'botID':_0x36b7e4})[_0x235489(0x20f)]({'status':_0x2a0ee8})[_0x235489(0x36a)](),config=getConfiguration(),io['to'](_0x235489(0x1dd))['emit'](_0x235489(0x272),config),broadcastToBots('bots',JSON[_0x235489(0x337)](config));}function updateLive(_0x2d967f,_0x3e05bb){const _0x2cdaa8=_0x205e5d;dbConfig['get'](_0x2cdaa8(0x272))[_0x2cdaa8(0x1b8)]({'botID':_0x2d967f})['assign']({'live':_0x3e05bb})[_0x2cdaa8(0x36a)](),config=getConfiguration(),io['to'](_0x2cdaa8(0x1dd))[_0x2cdaa8(0x209)](_0x2cdaa8(0x272),config),broadcastToBots(_0x2cdaa8(0x272),JSON[_0x2cdaa8(0x337)](config));}function updateBotName(_0x3bfea6,_0x1f72f6){const _0x31437c=_0x205e5d;dbConfig[_0x31437c(0x2c7)]('bots')[_0x31437c(0x1b8)]({'botID':_0x3bfea6})[_0x31437c(0x20f)]({'botname':_0x1f72f6})[_0x31437c(0x36a)](),config=getConfiguration(),io['to'](_0x31437c(0x1dd))['emit'](_0x31437c(0x272),config),broadcastToBots(_0x31437c(0x272),JSON['stringify'](config));}function updateBotManager(){const _0x4d96cb=_0x205e5d;config=getConfiguration(),io['to']('botmanager')['emit'](_0x4d96cb(0x272),config),broadcastToBots(_0x4d96cb(0x272),JSON[_0x4d96cb(0x337)](config));}function toggleBotMode(_0xea54d7){const _0x6699ea=_0x205e5d;if(pid[_0xea54d7])pid[_0xea54d7][_0x6699ea(0x22e)]({'function':_0x6699ea(0x19c),'args':null});else{const _0x1fa854=configpath+_0x6699ea(0x1ac)+_0xea54d7+_0x6699ea(0x2c8),_0x213d4b=fs[_0x6699ea(0x355)](_0x1fa854),_0x3385ea=JSON[_0x6699ea(0x21c)](_0x213d4b),_0x54269c=_0x3385ea['bot'][0x0][_0x6699ea(0x348)];_0x3385ea[_0x6699ea(0x2ef)][0x0][_0x6699ea(0x348)]=!_0x54269c;const _0xed623f=JSON[_0x6699ea(0x337)](_0x3385ea,null,0x2);fs[_0x6699ea(0x30e)](_0x1fa854,_0xed623f),config=getConfiguration(),io['to'](_0x6699ea(0x1dd))[_0x6699ea(0x209)](_0x6699ea(0x272),config),broadcastToBots(_0x6699ea(0x272),JSON[_0x6699ea(0x337)](config));}}function telegramError(_0x1596ce){const _0xb7bd37=_0x205e5d;logger['simple'](getTimeStamp()+_0xb7bd37(0x212));}function validateTelegram(_0x1eeaeb){const _0x4cac02=_0x205e5d;if(_0x1eeaeb[_0x4cac02(0x1d1)][_0x4cac02(0x322)]!=settings['telegramUsername']&&'@'+_0x1eeaeb[_0x4cac02(0x1d1)]['username']!=settings[_0x4cac02(0x1c4)])return tgBot[_0x4cac02(0x241)](_0x1eeaeb[_0x4cac02(0x352)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x4cac02(0x2a9)})['catch'](_0x4ccfb7=>{telegramError(_0x4ccfb7);}),![];return!![];}async function initTelegram(){const _0x4f7cbf=_0x205e5d;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4f7cbf(0x200)],{'polling':!![]});let _0x21a1f2=_0x4f7cbf(0x380);_0x21a1f2+='\x0a',_0x21a1f2+=_0x4f7cbf(0x35a),_0x21a1f2+=_0x4f7cbf(0x228),_0x21a1f2+=_0x4f7cbf(0x33c),_0x21a1f2+=_0x4f7cbf(0x1a0),_0x21a1f2+=_0x4f7cbf(0x260),_0x21a1f2+=_0x4f7cbf(0x2ba),_0x21a1f2+=_0x4f7cbf(0x1d9),_0x21a1f2+=_0x4f7cbf(0x20e),_0x21a1f2+=_0x4f7cbf(0x36b),_0x21a1f2+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x21a1f2+=_0x4f7cbf(0x2e6),_0x21a1f2+=_0x4f7cbf(0x31d),_0x21a1f2+=_0x4f7cbf(0x1be),_0x21a1f2+=_0x4f7cbf(0x2be);let _0xb177e3=_0x4f7cbf(0x295);_0xb177e3+='\x0a',_0xb177e3+=_0x21a1f2,tgBot['onText'](/\/start/,_0x4650ac=>{const _0x351de0=_0x4f7cbf;if(!validateTelegram(_0x4650ac))return;if(settings[_0x351de0(0x1a8)]!=_0x4650ac['chat']['id'])updateSetting(_0x351de0(0x1a8),_0x4650ac[_0x351de0(0x352)]['id']);updateSetting(_0x351de0(0x32e),!![]),tgBot['sendMessage'](_0x4650ac[_0x351de0(0x352)]['id'],_0xb177e3)[_0x351de0(0x1b7)](_0x4aafac=>{telegramError(_0x4aafac);});}),tgBot[_0x4f7cbf(0x1fa)](/\/enable/,_0x2c2788=>{const _0x39f92e=_0x4f7cbf;if(!validateTelegram(_0x2c2788))return;if(settings[_0x39f92e(0x1a8)]!=_0x2c2788[_0x39f92e(0x352)]['id'])updateSetting(_0x39f92e(0x1a8),_0x2c2788[_0x39f92e(0x352)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x39f92e(0x241)](_0x2c2788['chat']['id'],_0x39f92e(0x1a6))[_0x39f92e(0x1b7)](_0x276c46=>{telegramError(_0x276c46);});}),tgBot['onText'](/\/config/,async _0x1c1a1f=>{const _0x4f40ce=_0x4f7cbf;if(!validateTelegram(_0x1c1a1f))return;tgBot[_0x4f40ce(0x2b1)](_0x4f40ce(0x332)),tgBot[_0x4f40ce(0x241)](_0x1c1a1f['chat']['id'],_0x4f40ce(0x1df),{'reply_markup':{'inline_keyboard':[[{'text':_0x4f40ce(0x1f9),'callback_data':_0x4f40ce(0x1bd)},{'text':_0x4f40ce(0x261),'callback_data':_0x4f40ce(0x201)},{'text':_0x4f40ce(0x2b2),'callback_data':_0x4f40ce(0x34a)}]]}})[_0x4f40ce(0x1b7)](_0x4ae813=>{telegramError(_0x4ae813);}),tgBot['on'](_0x4f40ce(0x332),async _0x59db6f=>{const _0x2dfed0=_0x4f40ce,_0x9f6501=_0x59db6f[_0x2dfed0(0x298)],_0x50947e=_0x59db6f[_0x2dfed0(0x1a9)];tgBot[_0x2dfed0(0x334)](_0x59db6f['id'])[_0x2dfed0(0x25d)](async()=>{const _0x462685=_0x2dfed0;_0x9f6501==_0x462685(0x1bd)&&(updateSetting(_0x462685(0x23a),_0x462685(0x1bd)),updateSetting(_0x462685(0x32e),!![]),await tgBot['sendMessage'](_0x50947e[_0x462685(0x352)]['id'],_0x462685(0x1d0))[_0x462685(0x1b7)](_0x3c1924=>{telegramError(_0x3c1924);}));_0x9f6501=='alerts'&&(updateSetting('telegramEvents',_0x462685(0x201)),updateSetting(_0x462685(0x32e),!![]),await tgBot[_0x462685(0x241)](_0x50947e['chat']['id'],_0x462685(0x1e8))['catch'](_0x20dd07=>{telegramError(_0x20dd07);}));_0x9f6501==_0x462685(0x34a)&&(updateSetting(_0x462685(0x23a),_0x462685(0x34a)),updateSetting('telegramEnabled',!![]),await tgBot[_0x462685(0x241)](_0x50947e[_0x462685(0x352)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x462685(0x1b7)](_0x1a8d90=>{telegramError(_0x1a8d90);}));if(!settings['telegramChatId'])tgBot[_0x462685(0x241)](_0x50947e[_0x462685(0x352)]['id'],_0x462685(0x1cb))[_0x462685(0x1b7)](_0x3be4fe=>{telegramError(_0x3be4fe);});}),tgBot[_0x2dfed0(0x2b1)](_0x2dfed0(0x332));});}),tgBot[_0x4f7cbf(0x1fa)](/\/status/,_0x184133=>{const _0xc65bd5=_0x4f7cbf;if(!validateTelegram(_0x184133))return;const _0x32d955=getBotsWithMode();let _0x5cb6d4=_0xc65bd5(0x31f);config['forEach'](_0x37cafb=>{const _0x6bb25c=_0xc65bd5,_0x592965=_0x32d955['find'](_0x1cbf9a=>_0x1cbf9a[_0x6bb25c(0x371)]==_0x37cafb[_0x6bb25c(0x371)])[_0x6bb25c(0x19e)];_0x5cb6d4+='Bot\x20'+_0x37cafb[_0x6bb25c(0x371)]+':\x20'+_0x37cafb[_0x6bb25c(0x345)]+_0x6bb25c(0x377)+_0x592965+_0x6bb25c(0x377)+_0x37cafb[_0x6bb25c(0x232)]+'\x0a';}),_0x5cb6d4+='\x0a',_0x5cb6d4+=_0xc65bd5(0x2b5),_0x5cb6d4+=!settings['telegramEnabled']?_0xc65bd5(0x35c):_0xc65bd5(0x2e2),_0x5cb6d4+=settings[_0xc65bd5(0x32e)]?settings[_0xc65bd5(0x23a)]=='all'?_0xc65bd5(0x30f):_0xc65bd5(0x319)+settings[_0xc65bd5(0x23a)]+_0xc65bd5(0x1e3):'',tgBot[_0xc65bd5(0x241)](_0x184133['chat']['id'],_0x5cb6d4,{'parse_mode':'HTML'})[_0xc65bd5(0x1b7)](_0x6981d7=>{telegramError(_0x6981d7);});}),tgBot['onText'](/\/restart/,_0x14999=>{const _0x3fa230=_0x4f7cbf;if(!validateTelegram(_0x14999))return;tgBot[_0x3fa230(0x2b1)]('callback_query');const _0x1cd0b5=getEnabledBots();if(_0x1cd0b5[_0x3fa230(0x270)]==0x0)tgBot[_0x3fa230(0x241)](_0x14999[_0x3fa230(0x352)]['id'],_0x3fa230(0x301))[_0x3fa230(0x1b7)](_0x3f2418=>{telegramError(_0x3f2418);});else{if(_0x1cd0b5[_0x3fa230(0x270)]>0x1)_0x1cd0b5[_0x3fa230(0x1ed)]({'botID':_0x3fa230(0x34a)});let _0x4b98cd=[],_0x2774bc=[];const _0x2bb523=_0x1cd0b5[_0x3fa230(0x270)]%0x4==0x0||_0x1cd0b5[_0x3fa230(0x270)]%0x4==0x3||_0x1cd0b5[_0x3fa230(0x270)]%0x3==0x1?0x4:0x3;let _0x36ed32=0x0;_0x1cd0b5['forEach']((_0x116bbb,_0x5a872e)=>{const _0x56f6df=_0x3fa230;if(_0x5a872e%_0x2bb523==0x0)_0x2774bc=[];_0x2774bc[_0x56f6df(0x1ed)]({'text':_0x116bbb[_0x56f6df(0x371)]=='all'?_0x56f6df(0x210):'Bot\x20'+_0x116bbb[_0x56f6df(0x371)],'callback_data':_0x116bbb[_0x56f6df(0x371)]}),_0x5a872e%_0x2bb523==0x0&&(_0x4b98cd[_0x36ed32]=_0x2774bc,_0x36ed32++);}),tgBot['sendMessage'](_0x14999[_0x3fa230(0x352)]['id'],_0x3fa230(0x1bf),{'reply_markup':{'inline_keyboard':_0x4b98cd}})['catch'](_0x215b03=>{telegramError(_0x215b03);}),tgBot['on']('callback_query',async _0x55953c=>{const _0x5647a4=_0x3fa230,_0x3bdc35=_0x55953c[_0x5647a4(0x298)],_0x2053f1=_0x55953c['message'];tgBot[_0x5647a4(0x334)](_0x55953c['id'])['then'](async()=>{const _0x257407=_0x5647a4;_0x3bdc35==_0x257407(0x34a)?config[_0x257407(0x252)](_0x4cad24=>{const _0x1698ab=_0x257407;restartBot(_0x4cad24[_0x1698ab(0x371)]);}):restartBot(_0x3bdc35);}),tgBot[_0x5647a4(0x2b1)](_0x5647a4(0x332));});}}),tgBot[_0x4f7cbf(0x1fa)](/\/on/,_0x465992=>{const _0x524a97=_0x4f7cbf;if(!validateTelegram(_0x465992))return;tgBot[_0x524a97(0x2b1)](_0x524a97(0x332));const _0x221f33=getDisabledBots();if(_0x221f33[_0x524a97(0x270)]==0x0)tgBot[_0x524a97(0x241)](_0x465992[_0x524a97(0x352)]['id'],_0x524a97(0x1d3))[_0x524a97(0x1b7)](_0x2f920c=>{telegramError(_0x2f920c);});else{if(_0x221f33['length']>0x1)_0x221f33['push']({'botID':_0x524a97(0x34a)});let _0xcfc732=[],_0x3dd953=[];const _0xb4576=_0x221f33[_0x524a97(0x270)]%0x4==0x0||_0x221f33['length']%0x4==0x3||_0x221f33[_0x524a97(0x270)]%0x3==0x1?0x4:0x3;let _0x5308e7=0x0;_0x221f33[_0x524a97(0x252)]((_0x225c41,_0x4864b6)=>{const _0x22b2b2=_0x524a97;if(_0x4864b6%_0xb4576==0x0)_0x3dd953=[];_0x3dd953[_0x22b2b2(0x1ed)]({'text':_0x225c41[_0x22b2b2(0x371)]==_0x22b2b2(0x34a)?_0x22b2b2(0x210):_0x22b2b2(0x1a5)+_0x225c41[_0x22b2b2(0x371)],'callback_data':_0x225c41['botID']}),_0x4864b6%_0xb4576==0x0&&(_0xcfc732[_0x5308e7]=_0x3dd953,_0x5308e7++);}),tgBot[_0x524a97(0x241)](_0x465992[_0x524a97(0x352)]['id'],_0x524a97(0x29c),{'reply_markup':{'inline_keyboard':_0xcfc732}})['catch'](_0x5ed550=>{telegramError(_0x5ed550);}),tgBot['on']('callback_query',async _0x53229f=>{const _0x144b10=_0x524a97,_0x389f66=_0x53229f[_0x144b10(0x298)],_0xe3c14d=_0x53229f[_0x144b10(0x1a9)];tgBot[_0x144b10(0x334)](_0x53229f['id'])[_0x144b10(0x25d)](async()=>{const _0x5b3f01=_0x144b10;_0x389f66==_0x5b3f01(0x34a)?(tgBot[_0x5b3f01(0x241)](_0xe3c14d[_0x5b3f01(0x352)]['id'],_0x5b3f01(0x217))[_0x5b3f01(0x1b7)](_0x2c4a15=>{telegramError(_0x2c4a15);}),_0x221f33[_0x5b3f01(0x252)](_0x22a27e=>{const _0x4c357b=_0x5b3f01;if(_0x22a27e[_0x4c357b(0x371)]!='all')toggleBot(_0x22a27e[_0x4c357b(0x371)],toggleStatus(_0x22a27e[_0x4c357b(0x371)]),'stopped');})):(tgBot[_0x5b3f01(0x241)](_0xe3c14d[_0x5b3f01(0x352)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x389f66)['catch'](_0x3812b2=>{telegramError(_0x3812b2);}),toggleBot(_0x389f66,toggleStatus(_0x389f66),'stopped'));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/off/,_0x15976a=>{const _0x33a515=_0x4f7cbf;if(!validateTelegram(_0x15976a))return;tgBot[_0x33a515(0x2b1)](_0x33a515(0x332));const _0xc884e5=getEnabledBots();if(_0xc884e5['length']==0x0)tgBot[_0x33a515(0x241)](_0x15976a[_0x33a515(0x352)]['id'],_0x33a515(0x301))['catch'](_0x24f90b=>{telegramError(_0x24f90b);});else{if(_0xc884e5[_0x33a515(0x270)]>0x1)_0xc884e5[_0x33a515(0x1ed)]({'botID':'all'});let _0x43036c=[],_0x2fec56=[];const _0x259dbb=_0xc884e5[_0x33a515(0x270)]%0x4==0x0||_0xc884e5[_0x33a515(0x270)]%0x4==0x3||_0xc884e5[_0x33a515(0x270)]%0x3==0x1?0x4:0x3;let _0x3dc088=0x0;_0xc884e5[_0x33a515(0x252)]((_0x54f61e,_0x515534)=>{const _0x2c6c94=_0x33a515;if(_0x515534%_0x259dbb==0x0)_0x2fec56=[];_0x2fec56['push']({'text':_0x54f61e[_0x2c6c94(0x371)]==_0x2c6c94(0x34a)?_0x2c6c94(0x210):_0x2c6c94(0x1a5)+_0x54f61e[_0x2c6c94(0x371)],'callback_data':_0x54f61e['botID']}),_0x515534%_0x259dbb==0x0&&(_0x43036c[_0x3dc088]=_0x2fec56,_0x3dc088++);}),tgBot['sendMessage'](_0x15976a['chat']['id'],_0x33a515(0x2a1),{'reply_markup':{'inline_keyboard':_0x43036c}})[_0x33a515(0x1b7)](_0x2a4163=>{telegramError(_0x2a4163);}),tgBot['on']('callback_query',async _0x2fd8a4=>{const _0x181d38=_0x33a515,_0x363dea=_0x2fd8a4['data'],_0x12985b=_0x2fd8a4[_0x181d38(0x1a9)];tgBot[_0x181d38(0x334)](_0x2fd8a4['id'])[_0x181d38(0x25d)](async()=>{const _0x2ff8e5=_0x181d38;_0x363dea==_0x2ff8e5(0x34a)?(tgBot[_0x2ff8e5(0x241)](_0x12985b['chat']['id'],_0x2ff8e5(0x23c))['catch'](_0xd818d5=>{telegramError(_0xd818d5);}),_0xc884e5['forEach'](_0x55651c=>{const _0x3b56a2=_0x2ff8e5;if(_0x55651c['botID']!=_0x3b56a2(0x34a))toggleBot(_0x55651c[_0x3b56a2(0x371)],toggleStatus(_0x55651c[_0x3b56a2(0x371)]),_0x3b56a2(0x2c0));})):(tgBot[_0x2ff8e5(0x241)](_0x12985b['chat']['id'],_0x2ff8e5(0x282)+_0x363dea)[_0x2ff8e5(0x1b7)](_0x1f9f52=>{telegramError(_0x1f9f52);}),toggleBot(_0x363dea,toggleStatus(_0x363dea),_0x2ff8e5(0x2c0)));}),tgBot[_0x181d38(0x2b1)](_0x181d38(0x332));});}}),tgBot['onText'](/\/metrics/,_0x568fda=>{const _0x4ad69e=_0x4f7cbf;if(!validateTelegram(_0x568fda))return;tgBot[_0x4ad69e(0x2b1)]('callback_query');const _0x15fc92=getEnabledBots();if(_0x15fc92['length']==0x0)tgBot[_0x4ad69e(0x241)](_0x568fda['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x4ad69e(0x1b7)](_0x3cac36=>{telegramError(_0x3cac36);});else{if(_0x15fc92['length']>0x1){let _0x1dd113=[],_0x3e2dcc=[];const _0xfffb56=_0x15fc92[_0x4ad69e(0x270)]%0x4==0x0||_0x15fc92['length']%0x4==0x3||_0x15fc92[_0x4ad69e(0x270)]%0x3==0x1?0x4:0x3;let _0x3261ed=0x0;_0x15fc92[_0x4ad69e(0x252)]((_0x2c1cfc,_0x5283b3)=>{const _0x10d2f0=_0x4ad69e;if(_0x5283b3%_0xfffb56==0x0)_0x3e2dcc=[];_0x3e2dcc[_0x10d2f0(0x1ed)]({'text':_0x10d2f0(0x1a5)+_0x2c1cfc[_0x10d2f0(0x371)],'callback_data':_0x2c1cfc[_0x10d2f0(0x371)]}),_0x5283b3%_0xfffb56==0x0&&(_0x1dd113[_0x3261ed]=_0x3e2dcc,_0x3261ed++);}),tgBot[_0x4ad69e(0x241)](_0x568fda[_0x4ad69e(0x352)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x1dd113}})['catch'](_0x43cad9=>{telegramError(_0x43cad9);}),tgBot['on'](_0x4ad69e(0x332),async _0x105d96=>{const _0x2ba341=_0x4ad69e,_0x21b3af=_0x105d96[_0x2ba341(0x298)],_0x50a1ef=_0x105d96['message'];tgBot[_0x2ba341(0x334)](_0x105d96['id'])[_0x2ba341(0x25d)](async()=>{const _0xa78c18=_0x2ba341;if(pid[_0x21b3af])pid[_0x21b3af]['send']({'function':_0xa78c18(0x1f3),'args':null});}),tgBot[_0x2ba341(0x2b1)](_0x2ba341(0x332));});}else{const _0x1e0c78=_0x15fc92[0x0]['botID'];if(pid[_0x1e0c78])pid[_0x1e0c78][_0x4ad69e(0x22e)]({'function':_0x4ad69e(0x1f3),'args':null});}}}),tgBot[_0x4f7cbf(0x1fa)](/\/portfolio/,_0x4995f7=>{const _0x23e5af=_0x4f7cbf;if(!validateTelegram(_0x4995f7))return;tgBot[_0x23e5af(0x2b1)](_0x23e5af(0x332));const _0x113263=getEnabledBots();if(_0x113263['length']==0x0)tgBot[_0x23e5af(0x241)](_0x4995f7['chat']['id'],_0x23e5af(0x301))[_0x23e5af(0x1b7)](_0x156526=>{telegramError(_0x156526);});else{if(_0x113263[_0x23e5af(0x270)]>0x1){let _0x46618a=[],_0x2ea6eb=[];const _0x287f06=_0x113263[_0x23e5af(0x270)]%0x4==0x0||_0x113263[_0x23e5af(0x270)]%0x4==0x3||_0x113263[_0x23e5af(0x270)]%0x3==0x1?0x4:0x3;let _0x53c504=0x0;_0x113263[_0x23e5af(0x252)]((_0x15ae07,_0x5663cd)=>{const _0x2326ec=_0x23e5af;if(_0x5663cd%_0x287f06==0x0)_0x2ea6eb=[];_0x2ea6eb[_0x2326ec(0x1ed)]({'text':_0x2326ec(0x1a5)+_0x15ae07[_0x2326ec(0x371)],'callback_data':_0x15ae07[_0x2326ec(0x371)]}),_0x5663cd%_0x287f06==0x0&&(_0x46618a[_0x53c504]=_0x2ea6eb,_0x53c504++);}),tgBot[_0x23e5af(0x241)](_0x4995f7[_0x23e5af(0x352)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x46618a}})[_0x23e5af(0x1b7)](_0x47cfc8=>{telegramError(_0x47cfc8);}),tgBot['on']('callback_query',async _0x61e898=>{const _0x6fbd0f=_0x23e5af,_0x261982=_0x61e898[_0x6fbd0f(0x298)],_0x4a5f48=_0x61e898[_0x6fbd0f(0x1a9)];tgBot[_0x6fbd0f(0x334)](_0x61e898['id'])[_0x6fbd0f(0x25d)](async()=>{const _0x55a8dd=_0x6fbd0f;if(pid[_0x261982])pid[_0x261982][_0x55a8dd(0x22e)]({'function':_0x55a8dd(0x1ef),'args':null});}),tgBot['removeListener'](_0x6fbd0f(0x332));});}else{const _0xe1b883=_0x113263[0x0]['botID'];if(pid[_0xe1b883])pid[_0xe1b883][_0x23e5af(0x22e)]({'function':_0x23e5af(0x1ef),'args':null});}}}),tgBot[_0x4f7cbf(0x1fa)](/\/update/,async _0x2ab32c=>{const _0x224818=_0x4f7cbf;if(!validateTelegram(_0x2ab32c))return;tgBot[_0x224818(0x2b1)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x224818(0x241)](_0x2ab32c[_0x224818(0x352)]['id'],_0x224818(0x29d))[_0x224818(0x1b7)](_0x31f2cd=>{telegramError(_0x31f2cd);});else!validInstallation?tgBot[_0x224818(0x241)](_0x2ab32c[_0x224818(0x352)]['id'],_0x224818(0x341))[_0x224818(0x1b7)](_0x4defbd=>{telegramError(_0x4defbd);}):(tgBot[_0x224818(0x241)](_0x2ab32c['chat']['id'],_0x224818(0x2aa),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x224818(0x251)},{'text':'No','callback_data':'no'}]]}})[_0x224818(0x1b7)](_0x1a3bc9=>{telegramError(_0x1a3bc9);}),tgBot['on'](_0x224818(0x332),async _0x830a0f=>{const _0x275dff=_0x224818,_0x232ccd=_0x830a0f['data'],_0x391180=_0x830a0f[_0x275dff(0x1a9)];tgBot[_0x275dff(0x334)](_0x830a0f['id'])['then'](async()=>{const _0x3d451e=_0x275dff;_0x232ccd==_0x3d451e(0x251)&&(await tgBot[_0x3d451e(0x241)](_0x391180[_0x3d451e(0x352)]['id'],_0x3d451e(0x2a4))[_0x3d451e(0x1b7)](_0x3da716=>{telegramError(_0x3da716);}),updateBB(_0x3d451e(0x27e))),_0x232ccd=='no'&&await tgBot[_0x3d451e(0x241)](_0x391180[_0x3d451e(0x352)]['id'],_0x3d451e(0x1b5))[_0x3d451e(0x1b7)](_0x30be44=>{telegramError(_0x30be44);});}),tgBot[_0x275dff(0x2b1)]('callback_query');}));}),tgBot[_0x4f7cbf(0x1fa)](/\/reinstall/,async _0x1d9643=>{const _0x2b654f=_0x4f7cbf;if(!validateTelegram(_0x1d9643))return;tgBot[_0x2b654f(0x2b1)](_0x2b654f(0x332)),!validInstallation?tgBot['sendMessage'](_0x1d9643[_0x2b654f(0x352)]['id'],_0x2b654f(0x302))[_0x2b654f(0x1b7)](_0x950206=>{telegramError(_0x950206);}):(tgBot['sendMessage'](_0x1d9643[_0x2b654f(0x352)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2b654f(0x28c),'callback_data':_0x2b654f(0x251)},{'text':'No','callback_data':'no'}]]}})[_0x2b654f(0x1b7)](_0x1f071c=>{telegramError(_0x1f071c);}),tgBot['on'](_0x2b654f(0x332),async _0x248fb6=>{const _0x2bd421=_0x2b654f,_0x46d665=_0x248fb6[_0x2bd421(0x298)],_0x1b9488=_0x248fb6[_0x2bd421(0x1a9)];tgBot[_0x2bd421(0x334)](_0x248fb6['id'])[_0x2bd421(0x25d)](async()=>{const _0x258545=_0x2bd421;_0x46d665=='yes'&&(await tgBot[_0x258545(0x241)](_0x1b9488[_0x258545(0x352)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x258545(0x1b7)](_0x5b7456=>{telegramError(_0x5b7456);}),updateBB(_0x258545(0x2bd))),_0x46d665=='no'&&await tgBot[_0x258545(0x241)](_0x1b9488[_0x258545(0x352)]['id'],_0x258545(0x28f))[_0x258545(0x1b7)](_0x235d5e=>{telegramError(_0x235d5e);});}),tgBot[_0x2bd421(0x2b1)](_0x2bd421(0x332));}));}),tgBot[_0x4f7cbf(0x1fa)](/\/toggle/,_0x29ca7a=>{const _0x5c1d23=_0x4f7cbf;if(!validateTelegram(_0x29ca7a))return;tgBot[_0x5c1d23(0x2b1)](_0x5c1d23(0x332));const _0x1fe9a8=getBotsWithMode();if(_0x1fe9a8[_0x5c1d23(0x270)]==0x0)tgBot[_0x5c1d23(0x241)](_0x29ca7a[_0x5c1d23(0x352)]['id'],_0x5c1d23(0x301))[_0x5c1d23(0x1b7)](_0x48bd30=>{telegramError(_0x48bd30);});else{let _0x1c1de5=[],_0x864810=[];const _0x409c28=0x2;let _0x2e27a5=0x0;_0x1fe9a8[_0x5c1d23(0x252)]((_0x1dd47d,_0xc1e701)=>{const _0x1b2ea2=_0x5c1d23;if(_0xc1e701%_0x409c28==0x0)_0x864810=[];_0x864810[_0x1b2ea2(0x1ed)]({'text':'Bot\x20'+_0x1dd47d[_0x1b2ea2(0x371)]+'\x20('+_0x1dd47d['mode']+')','callback_data':_0x1dd47d[_0x1b2ea2(0x371)]}),_0xc1e701%_0x409c28==0x0&&(_0x1c1de5[_0x2e27a5]=_0x864810,_0x2e27a5++);}),tgBot[_0x5c1d23(0x241)](_0x29ca7a[_0x5c1d23(0x352)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x1c1de5}})[_0x5c1d23(0x1b7)](_0x1ed20c=>{telegramError(_0x1ed20c);}),tgBot['on'](_0x5c1d23(0x332),async _0x39a567=>{const _0x26a614=_0x5c1d23,_0x3c8d2f=_0x39a567[_0x26a614(0x298)],_0x1e39a6=_0x39a567[_0x26a614(0x1a9)];tgBot[_0x26a614(0x334)](_0x39a567['id'])[_0x26a614(0x25d)](async()=>{const _0x683074=_0x26a614,_0x4c1cdd=_0x1fe9a8['find'](_0x26edd1=>_0x26edd1['botID']==_0x3c8d2f),_0x980d10=_0x4c1cdd['mode']==_0x683074(0x1d2)?_0x683074(0x36f):_0x683074(0x1d2);tgBot['sendMessage'](_0x1e39a6[_0x683074(0x352)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x3c8d2f+_0x683074(0x2d0)+_0x980d10+_0x683074(0x262))[_0x683074(0x1b7)](_0x2e5f6d=>{telegramError(_0x2e5f6d);}),toggleBotMode(_0x3c8d2f);}),tgBot[_0x26a614(0x2b1)](_0x26a614(0x332));});}}),tgBot['onText'](/\/names/,_0x605e52=>{const _0x1bc995=_0x4f7cbf;if(!validateTelegram(_0x605e52))return;let _0x4b1752='';config['forEach'](_0x147502=>{const _0x52d86d=_0x31a8;_0x4b1752+=_0x52d86d(0x1a5)+_0x147502[_0x52d86d(0x371)]+':\x20'+_0x147502[_0x52d86d(0x1ec)]+'\x0a';}),tgBot['sendMessage'](_0x605e52[_0x1bc995(0x352)]['id'],_0x4b1752,{'parse_mode':_0x1bc995(0x2a9)})[_0x1bc995(0x1b7)](_0x23c29f=>{telegramError(_0x23c29f);});}),tgBot['onText'](/\/disable/,_0x3e03f2=>{const _0x116097=_0x4f7cbf;if(!validateTelegram(_0x3e03f2))return;tgBot['sendMessage'](_0x3e03f2[_0x116097(0x352)]['id'],_0x116097(0x21f))[_0x116097(0x1b7)](_0x37630d=>{telegramError(_0x37630d);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x4f7cbf(0x1fa)](/\/help/,_0x52afcc=>{const _0x227a8e=_0x4f7cbf;if(!validateTelegram(_0x52afcc))return;tgBot[_0x227a8e(0x241)](_0x52afcc[_0x227a8e(0x352)]['id'],_0x21a1f2)[_0x227a8e(0x1b7)](_0x1aea69=>{telegramError(_0x1aea69);});}),tgBot['on']('polling_error',_0x40c0bf=>{const _0xeecd87=_0x4f7cbf;_0x40c0bf[_0xeecd87(0x1a4)]()['includes'](_0xeecd87(0x35f))&&(logger[_0xeecd87(0x248)](_0xeecd87(0x1e2)),tgBot['stopPolling'](),tgBot=null,io['to'](_0xeecd87(0x1dd))[_0xeecd87(0x209)](_0xeecd87(0x28b),_0xeecd87(0x1e2)));}),process[_0x4f7cbf(0x20d)](_0x4f7cbf(0x273),()=>{const _0x305ead=_0x4f7cbf;if(tgBot)tgBot[_0x305ead(0x2d8)]();process['exit'](0x1);}),process[_0x4f7cbf(0x20d)](_0x4f7cbf(0x23e),()=>{const _0x26138f=_0x4f7cbf;if(tgBot)tgBot['stopPolling']();process[_0x26138f(0x1ca)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x5d4509,_0x436fa9){const _0x2ec9b5=_0x205e5d;if(settings[_0x2ec9b5(0x32e)]){if(settings[_0x2ec9b5(0x23a)]==_0x2ec9b5(0x34a)||(_0x436fa9['type']==_0x2ec9b5(0x21d)||_0x436fa9[_0x2ec9b5(0x307)]==_0x2ec9b5(0x366)||_0x436fa9['type']==_0x2ec9b5(0x1c7))&&settings[_0x2ec9b5(0x23a)]==_0x2ec9b5(0x201)||_0x436fa9[_0x2ec9b5(0x307)]==_0x2ec9b5(0x2cc)&&settings['telegramEvents']==_0x2ec9b5(0x1bd)){if(tgBot&&settings[_0x2ec9b5(0x1a8)]){if(_0x436fa9[_0x2ec9b5(0x231)])tgBot[_0x2ec9b5(0x241)](settings[_0x2ec9b5(0x1a8)],_0x436fa9['botname']+_0x2ec9b5(0x297)+_0x436fa9['event'])[_0x2ec9b5(0x1b7)](_0x123299=>{telegramError(_0x123299);});else tgBot[_0x2ec9b5(0x241)](settings[_0x2ec9b5(0x1a8)],_0x2ec9b5(0x1a5)+_0x5d4509+_0x2ec9b5(0x297)+_0x436fa9[_0x2ec9b5(0x359)])[_0x2ec9b5(0x1b7)](_0x36ae77=>{telegramError(_0x36ae77);});}}}}async function sendTelegramMsg(_0x3ea959,_0x2bca13=_0x205e5d(0x2a9)){const _0x542486=_0x205e5d;return settings[_0x542486(0x32e)]&&tgBot&&settings[_0x542486(0x1a8)]?(await tgBot[_0x542486(0x241)](settings[_0x542486(0x1a8)],_0x3ea959,{'parse_mode':_0x2bca13})[_0x542486(0x1b7)](_0x581dbe=>{telegramError(_0x581dbe);}),!![]):![];}function getDeviceWithIp(_0x4348de){return devices['find'](_0x311459=>_0x311459['ip']===_0x4348de);}function temporaryAccess2FA(_0x6e1046,_0x5254ef){const _0x6c8f6f=_0x205e5d;let _0x526cc8=new Date(),_0x235eb9=![];if(lastIpApproval){if(_0x526cc8-lastIpApproval<0x1388)_0x235eb9=!![];}lastIpApproval=new Date();if(_0x235eb9)return;tgBot&&settings[_0x6c8f6f(0x1a8)]&&(tgBot[_0x6c8f6f(0x2b1)](_0x6c8f6f(0x332)),tgBot[_0x6c8f6f(0x241)](settings[_0x6c8f6f(0x1a8)],_0x6c8f6f(0x204)+normalizeIP(_0x5254ef)[_0x6c8f6f(0x36c)]+_0x6c8f6f(0x1b9),{'parse_mode':_0x6c8f6f(0x2a9),'reply_markup':{'inline_keyboard':[[{'text':_0x6c8f6f(0x1ea),'callback_data':'5'},{'text':_0x6c8f6f(0x2ec),'callback_data':'15'},{'text':_0x6c8f6f(0x233),'callback_data':'30'},{'text':'reject','callback_data':_0x6c8f6f(0x1c3)}]]}})['catch'](_0x206bfe=>{telegramError(_0x206bfe);}),tgBot['on']('callback_query',async _0x2e95fe=>{const _0x1d0c40=_0x6c8f6f,_0x5bfac6=_0x2e95fe[_0x1d0c40(0x298)],_0x4662ce=_0x2e95fe[_0x1d0c40(0x1a9)];tgBot[_0x1d0c40(0x334)](_0x2e95fe['id'])['then'](async()=>{const _0x248fda=_0x1d0c40;devices[_0x6e1046][_0x248fda(0x21b)]={'clientip':_0x5254ef,'timestamp':new Date()[_0x248fda(0x33e)](),'expiry':_0x5bfac6},_0x5bfac6!=_0x248fda(0x1c3)?(await tgBot[_0x248fda(0x241)](_0x4662ce[_0x248fda(0x352)]['id'],_0x248fda(0x1c0)+_0x5bfac6+'\x20minutes',{'parse_mode':_0x248fda(0x2a9)})['catch'](_0x3d9acf=>{telegramError(_0x3d9acf);}),io['to'](_0x6e1046)[_0x248fda(0x209)](_0x248fda(0x345),{'access':{'allow':![],'reason':_0x248fda(0x29e),'token':null}})):(await tgBot['sendMessage'](_0x4662ce[_0x248fda(0x352)]['id'],_0x248fda(0x296))[_0x248fda(0x1b7)](_0x23d262=>{telegramError(_0x23d262);}),io['to'](_0x6e1046)[_0x248fda(0x209)](_0x248fda(0x345),{'access':{'allow':![],'reason':_0x248fda(0x289),'token':null}}));}),tgBot[_0x1d0c40(0x2b1)](_0x1d0c40(0x332));}));}function loginAccess2FA(_0x8c292,_0x585ac6){const _0x21fd4e=_0x205e5d;tgBot&&settings[_0x21fd4e(0x1a8)]&&(tgBot['removeListener'](_0x21fd4e(0x332)),tgBot['sendMessage'](settings[_0x21fd4e(0x1a8)],_0x21fd4e(0x1d6)+normalizeIP(_0x585ac6)['show']+_0x21fd4e(0x1b9),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x21fd4e(0x1c3),'callback_data':'reject'}]]}})[_0x21fd4e(0x1b7)](_0x50f2f2=>{telegramError(_0x50f2f2);}),tgBot['on']('callback_query',async _0xc0c2d0=>{const _0x8724e5=_0x21fd4e,_0x4738a3=_0xc0c2d0[_0x8724e5(0x298)],_0x4c68ee=_0xc0c2d0['message'];tgBot[_0x8724e5(0x334)](_0xc0c2d0['id'])[_0x8724e5(0x25d)](async()=>{const _0x2651ae=_0x8724e5;devices[_0x8c292][_0x2651ae(0x2ff)]={'clientip':_0x585ac6,'timestamp':new Date()[_0x2651ae(0x33e)](),'expiry':_0x4738a3},_0x4738a3!=_0x2651ae(0x1c3)?(await tgBot[_0x2651ae(0x241)](_0x4c68ee[_0x2651ae(0x352)]['id'],_0x2651ae(0x1b0),{'parse_mode':_0x2651ae(0x2a9)})[_0x2651ae(0x1b7)](_0x109a14=>{telegramError(_0x109a14);}),io['to'](_0x8c292)[_0x2651ae(0x209)](_0x2651ae(0x345),{'access':{'allow':![],'reason':_0x2651ae(0x29e),'token':null}})):(await tgBot[_0x2651ae(0x241)](_0x4c68ee[_0x2651ae(0x352)]['id'],'Login\x20rejected')[_0x2651ae(0x1b7)](_0x4efa52=>{telegramError(_0x4efa52);}),io['to'](_0x8c292)[_0x2651ae(0x209)](_0x2651ae(0x345),{'access':{'allow':![],'reason':_0x2651ae(0x320),'token':null}}));}),tgBot[_0x8724e5(0x2b1)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5e7afb=_0x205e5d;return dbConfig[_0x5e7afb(0x2c7)](_0x5e7afb(0x272))[_0x5e7afb(0x1a3)](_0x5e7afb(0x371))[_0x5e7afb(0x1e0)]({'status':_0x5e7afb(0x2b7)})[_0x5e7afb(0x354)]()||[];}function getDisabledBots(){const _0x31579a=_0x205e5d;return dbConfig['get'](_0x31579a(0x272))[_0x31579a(0x1a3)](_0x31579a(0x371))[_0x31579a(0x1e0)]({'status':'disabled'})[_0x31579a(0x354)]()||[];}function getBotAttributes(_0x1b085e){const _0x79dfbf=_0x205e5d;let _0x4d7380={};const _0x5118e8=configpath+_0x79dfbf(0x1ac)+_0x1b085e+_0x79dfbf(0x2c8),_0x2da47d=fs[_0x79dfbf(0x215)](_0x5118e8);if(_0x2da47d){const _0x4802b8=fs['readFileSync'](_0x5118e8);try{const _0x2e465d=JSON[_0x79dfbf(0x21c)](_0x4802b8),_0x53728e=_0x2e465d?_0x2e465d[_0x79dfbf(0x2ef)][0x0][_0x79dfbf(0x348)]:![];_0x4d7380[_0x79dfbf(0x19e)]=_0x53728e?_0x79dfbf(0x1d2):_0x79dfbf(0x36f),_0x4d7380[_0x79dfbf(0x1ec)]=_0x2e465d?_0x2e465d['bot'][0x0][_0x79dfbf(0x1ec)]:_0x79dfbf(0x1a5)+_0x1b085e;}catch(_0x4bc9a5){_0x4d7380[_0x79dfbf(0x19e)]='manual',_0x4d7380['botname']=_0x79dfbf(0x1a5)+_0x1b085e;}}else _0x4d7380[_0x79dfbf(0x19e)]=_0x79dfbf(0x36f),_0x4d7380[_0x79dfbf(0x1ec)]=_0x79dfbf(0x1a5)+_0x1b085e;return _0x4d7380;}function getBotsWithMode(){const _0x5c4955=_0x205e5d,_0xc4a84b=dbConfig[_0x5c4955(0x2c7)](_0x5c4955(0x272))['sortBy'](_0x5c4955(0x371))[_0x5c4955(0x354)]()||[];return _0xc4a84b[_0x5c4955(0x252)](_0x58d22d=>{const _0x3387d3=_0x5c4955;let _0x557f25=getBotAttributes(_0x58d22d['botID']);_0x58d22d[_0x3387d3(0x19e)]=_0x557f25[_0x3387d3(0x19e)];}),_0xc4a84b;}function getBotExchanges(){const _0xb65df2=_0x205e5d;let _0x3bf137=[];const _0x191cad=dbConfig['get'](_0xb65df2(0x272))[_0xb65df2(0x1a3)](_0xb65df2(0x371))[_0xb65df2(0x354)]()||[];_0x191cad[_0xb65df2(0x252)](_0x4d8f39=>{const _0x252eb3=_0xb65df2;if(_0x4d8f39[_0x252eb3(0x345)]==_0x252eb3(0x2b7)){const _0x591177=configpath+'bot-'+_0x4d8f39[_0x252eb3(0x371)]+_0x252eb3(0x2c8),_0x4e80f4=fs['existsSync'](_0x591177);let _0x4297d5;if(_0x4e80f4){const _0x3bb551=fs[_0x252eb3(0x355)](_0x591177);try{const _0x54a2da=JSON[_0x252eb3(0x21c)](_0x3bb551);_0x4297d5=_0x54a2da?_0x54a2da[_0x252eb3(0x2ef)][0x0][_0x252eb3(0x1b6)]:null;}catch(_0x47c9af){}}if(_0x4297d5)_0x3bf137['push'](_0x4297d5);}});const _0x241f42=[...new Set(_0x3bf137)][_0xb65df2(0x283)]();return _0x241f42;}async function initUser(){const _0x30554c=_0x205e5d;if(!settings[_0x30554c(0x299)]){const _0x17cb5b=uuidRandom();mixpanel[_0x30554c(0x275)](_0x17cb5b),updateSetting(_0x30554c(0x299),_0x17cb5b);}}async function initSecure(){const _0x314dfc=_0x205e5d;let _0x2360ca=getSecure();if(!_0x2360ca['hasOwnProperty']('secret')){let _0x23342c=await generateKeys();_0x2360ca[_0x314dfc(0x1b3)]=_0x23342c[_0x314dfc(0x1b3)],_0x2360ca[_0x314dfc(0x1ae)]=_0x23342c[_0x314dfc(0x1ae)],_0x2360ca[_0x314dfc(0x2ed)]=crypto[_0x314dfc(0x207)](0x20)[_0x314dfc(0x1a4)](_0x314dfc(0x344));;storeSecure(_0x2360ca);}}function getSettings(){const _0x4c0f53=_0x205e5d;return dbSettings['get'](_0x4c0f53(0x23d))[_0x4c0f53(0x354)]()||{};}function getSecure(){const _0x479fbf=_0x205e5d;return dbSecure[_0x479fbf(0x2c7)](_0x479fbf(0x265))[_0x479fbf(0x354)]()||{};}function getBlacklist(){const _0x4c4d5a=_0x205e5d;return dbSecure[_0x4c4d5a(0x2c7)]('blacklist')[_0x4c4d5a(0x354)]()||[];}function broadcastToBots(_0x37bdf0,_0x4aabab){const _0xb6c1d4=_0x205e5d;config[_0xb6c1d4(0x252)](_0x4860b4=>{const _0x401560=_0xb6c1d4;if(_0x4860b4[_0x401560(0x345)]==_0x401560(0x2b7)&&_0x4860b4[_0x401560(0x232)]==_0x401560(0x243)||_0x4860b4[_0x401560(0x345)]=='new'&&_0x4860b4[_0x401560(0x232)]==_0x401560(0x243)){if(pid[_0x4860b4['botID']])pid[_0x4860b4[_0x401560(0x371)]][_0x401560(0x22e)]({[_0x37bdf0]:_0x4aabab});}});}function storeSettings(_0x2096c3,_0x2ae0c0=![]){const _0x13d596=_0x205e5d;_0x2096c3={...settings,..._0x2096c3};if(_0x2ae0c0&&_0x2096c3[_0x13d596(0x32b)]!=_0x13d596(0x2bf)&&_0x2096c3[_0x13d596(0x32b)]!=_0x13d596(0x34b)&&_0x2096c3[_0x13d596(0x32b)]!=''){const _0x54043d=crypt[_0x13d596(0x1fb)](secure[_0x13d596(0x1ae)],_0x2096c3['bbPassword'])[_0x13d596(0x1a9)][_0x13d596(0x216)]('@')[0x0],_0xa299b8=bcrypt[_0x13d596(0x384)](_0x54043d,saltRounds);_0x2096c3={..._0x2096c3,'bbPassword':_0xa299b8};}if(_0x2ae0c0&&_0x2096c3[_0x13d596(0x200)]!=_0x13d596(0x2bf)&&_0x2096c3[_0x13d596(0x200)]!=_0x13d596(0x34b)&&_0x2096c3[_0x13d596(0x200)]!=''){const _0x3941cd=crypt[_0x13d596(0x1fb)](secure[_0x13d596(0x1ae)],_0x2096c3[_0x13d596(0x200)])[_0x13d596(0x1a9)][_0x13d596(0x216)]('@')[0x0];_0x2096c3={..._0x2096c3,'telegramToken':_0x3941cd};}const _0xdf5330=_0x2096c3['telegramToken']!=_0x13d596(0x2bf)&&_0x2096c3[_0x13d596(0x200)]!=settings[_0x13d596(0x200)]||_0x2096c3[_0x13d596(0x1c4)]!=settings[_0x13d596(0x1c4)],_0x4e9b71=_0x2096c3[_0x13d596(0x200)]==''||_0x2096c3[_0x13d596(0x1c4)]=='';if(_0xdf5330)_0x2096c3[_0x13d596(0x23a)]=_0x13d596(0x34a);for(const [_0x263c00,_0x59479b]of Object[_0x13d596(0x292)](_0x2096c3)){if(_0x263c00=='telegramToken'&&_0x59479b=='************'){_0x2096c3[_0x13d596(0x200)]=settings[_0x13d596(0x200)];continue;};if(_0x263c00==_0x13d596(0x32b)&&_0x59479b==_0x13d596(0x2bf)){_0x2096c3[_0x13d596(0x32b)]=settings['bbPassword'];continue;};dbSettings['set'](_0x13d596(0x33f)+_0x263c00,_0x59479b)[_0x13d596(0x36a)]();}settings=_0x2096c3,io['to'](_0x13d596(0x1dd))[_0x13d596(0x209)](_0x13d596(0x23d),cleanSettings()),broadcastToBots(_0x13d596(0x362),settings[_0x13d596(0x362)]),broadcastToBots('onepagemode',settings[_0x13d596(0x2ad)]);if(_0xdf5330&&!_0x4e9b71)initTelegram();if(_0xdf5330&&_0x4e9b71)disableTelegram();getAllClients()[_0x13d596(0x252)](_0x5332e5=>{const _0x2931dd=_0x13d596;getSocket(_0x5332e5['id'])[_0x2931dd(0x209)](_0x2931dd(0x345),{'access':{'allow':![],'reason':_0x2931dd(0x29e),'token':null}});});}function updateSetting(_0x2fc00b,_0x1923b0){const _0x79d00a=_0x205e5d;dbSettings['set'](_0x79d00a(0x33f)+_0x2fc00b,_0x1923b0)[_0x79d00a(0x36a)](),settings=getSettings(),io['to'](_0x79d00a(0x1dd))['emit']('settings',cleanSettings());}function _0x31a8(_0x2b9581,_0x10ac68){const _0x38f0ed=_0x1593();return _0x31a8=function(_0x3609fb,_0x570ab0){_0x3609fb=_0x3609fb-0x196;let _0x159339=_0x38f0ed[_0x3609fb];return _0x159339;},_0x31a8(_0x2b9581,_0x10ac68);}function storeSecure(_0x51f4c3){const _0x432d98=_0x205e5d;dbSecure[_0x432d98(0x2c7)](_0x432d98(0x265))[_0x432d98(0x1ed)](_0x51f4c3)['write'](),secure=_0x51f4c3;}function addBlacklist(_0x56d2aa){const _0x2b7f66=_0x205e5d;cleanBlacklist();let _0x8f079a;devices[_0x56d2aa][_0x2b7f66(0x21b)]?_0x8f079a=Math[_0x2b7f66(0x20a)](devices[_0x56d2aa][_0x2b7f66(0x21b)][_0x2b7f66(0x237)],loginExpiry):_0x8f079a=loginExpiry,dbSecure[_0x2b7f66(0x2c7)](_0x2b7f66(0x2b3))[_0x2b7f66(0x1ed)]({'expiry':new Date()[_0x2b7f66(0x33e)]()+_0x8f079a*0x3c*0x3e8,'token':devices[_0x56d2aa]['access'][_0x2b7f66(0x2c2)]})[_0x2b7f66(0x36a)](),blacklist=dbSecure['get'](_0x2b7f66(0x2b3))[_0x2b7f66(0x354)]();}function cleanBlacklist(){const _0x46df82=_0x205e5d;let _0x11486f=dbSecure[_0x46df82(0x2c7)](_0x46df82(0x2b3))['cloneDeep']()[_0x46df82(0x354)](),_0x5b8b3d=new Date()[_0x46df82(0x33e)]();_0x11486f[_0x46df82(0x252)](_0xb2f722=>{const _0x40923a=_0x46df82;_0xb2f722[_0x40923a(0x237)]<_0x5b8b3d&&dbSecure[_0x40923a(0x2c7)](_0x40923a(0x2b3))[_0x40923a(0x2a0)]({'expiry':_0xb2f722['expiry']})[_0x40923a(0x36a)]();});}function initStates(){const _0x500ac5=_0x205e5d;let _0x457e93=getConfiguration();_0x457e93[_0x500ac5(0x252)](_0x376393=>{_0x376393['live']='stopped';}),storeConfiguration(_0x457e93);}function onKeys(){const _0x304d73=new RSA();return new Promise(_0x4b8775=>{const _0x2b1f31=_0x31a8;_0x304d73[_0x2b1f31(0x376)]()[_0x2b1f31(0x25d)](_0x43ca86=>{_0x4b8775(_0x43ca86);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x65b9ef=_0x205e5d;let _0xc727e5=getSettings(),_0x8fb10=![];!_0xc727e5[_0x65b9ef(0x255)]('lastmsgtelegram')&&(_0xc727e5[_0x65b9ef(0x19a)]=0x0,_0x8fb10=!![]);!_0xc727e5['hasOwnProperty'](_0x65b9ef(0x2af))&&(_0xc727e5['lastmsgemitted']=0x0,_0x8fb10=!![]);!_0xc727e5[_0x65b9ef(0x255)](_0x65b9ef(0x2da))&&(_0xc727e5[_0x65b9ef(0x2da)]=_0x65b9ef(0x1cd),_0x8fb10=!![]);!_0xc727e5[_0x65b9ef(0x255)](_0x65b9ef(0x2ad))&&(_0xc727e5[_0x65b9ef(0x2ad)]=![],_0x8fb10=!![]);if(_0x8fb10)storeSettings(_0xc727e5);try{fs[_0x65b9ef(0x29a)](configbackuppath,{'withFileTypes':!![]})[_0x65b9ef(0x252)](_0x1dfaef=>{const _0x1a2041=_0x65b9ef;if(!_0x1dfaef[_0x1a2041(0x276)]()){if(!_0x1dfaef[_0x1a2041(0x213)][_0x1a2041(0x1f8)](_0x1a2041(0x25c)))fs[_0x1a2041(0x314)](configbackuppath+_0x1dfaef[_0x1a2041(0x213)]);}else fs[_0x1a2041(0x347)](configbackuppath+_0x1dfaef[_0x1a2041(0x213)],{'recursive':!![]});});}catch(_0x3cafe4){logger['debug'](_0x65b9ef(0x27a),_0x3cafe4);}}function storeConfiguration(_0x2ef808){const _0x5d6e44=_0x205e5d;dbConfig[_0x5d6e44(0x2c7)](_0x5d6e44(0x272))[_0x5d6e44(0x2a0)]()[_0x5d6e44(0x36a)](),_0x2ef808[_0x5d6e44(0x252)](_0x13a323=>{delete _0x13a323['mode'];}),dbConfig['get'](_0x5d6e44(0x272))['push'](..._0x2ef808)[_0x5d6e44(0x36a)](),config=_0x2ef808;}function resetPassword(){const _0x5aa0af=_0x205e5d;tgBot&&settings[_0x5aa0af(0x1a8)]&&(tgBot[_0x5aa0af(0x2b1)](_0x5aa0af(0x332)),tgBot['sendMessage'](settings[_0x5aa0af(0x1a8)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x5aa0af(0x2a9),'reply_markup':{'inline_keyboard':[[{'text':_0x5aa0af(0x251),'callback_data':_0x5aa0af(0x251)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x356819=>{telegramError(_0x356819);}),tgBot['on']('callback_query',async _0x4d4338=>{const _0x21faba=_0x5aa0af,_0x3a3e48=_0x4d4338[_0x21faba(0x298)],_0x1791db=_0x4d4338[_0x21faba(0x1a9)];tgBot[_0x21faba(0x334)](_0x4d4338['id'])['then'](async()=>{const _0x284a6b=_0x21faba;if(_0x3a3e48!='no'){const _0x1799d2=0xf,_0x3b1a55='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x53811e=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x1799d2)))[_0x284a6b(0x1f0)](_0x37a0a1=>_0x3b1a55[_0x37a0a1%_0x3b1a55[_0x284a6b(0x270)]])[_0x284a6b(0x1fd)](''),_0x2b4a70=bcrypt['hashSync'](_0x53811e,saltRounds);storeSettings({'bbPassword':_0x2b4a70}),await tgBot[_0x284a6b(0x241)](_0x1791db['chat']['id'],_0x284a6b(0x284)+_0x53811e,{'parse_mode':_0x284a6b(0x2a9)})['catch'](_0x26ecc1=>{telegramError(_0x26ecc1);});}else await tgBot[_0x284a6b(0x241)](_0x1791db[_0x284a6b(0x352)]['id'],_0x284a6b(0x2b6))['catch'](_0x6e4599=>{telegramError(_0x6e4599);});}),tgBot[_0x21faba(0x2b1)](_0x21faba(0x332));}));}async function confirmRestore(_0x5a7e2a,_0x12154f){const _0x51c5e0=_0x205e5d;io['to'](_0x51c5e0(0x1dd))[_0x51c5e0(0x209)]('notification',_0x51c5e0(0x2bc),_0x51c5e0(0x1c7)),tgBot&&settings[_0x51c5e0(0x1a8)]&&(tgBot[_0x51c5e0(0x2b1)]('callback_query'),await tgBot[_0x51c5e0(0x241)](settings[_0x51c5e0(0x1a8)],_0x51c5e0(0x230),{'parse_mode':_0x51c5e0(0x2a9),'reply_markup':{'inline_keyboard':[[{'text':_0x51c5e0(0x251),'callback_data':_0x51c5e0(0x251)},{'text':'no','callback_data':'no'}]]}})[_0x51c5e0(0x1b7)](_0x172eb6=>{telegramError(_0x172eb6);}),tgBot['on'](_0x51c5e0(0x332),async _0xd58ff=>{const _0x301b2a=_0x51c5e0,_0x5120b5=_0xd58ff['data'],_0x3fb315=_0xd58ff[_0x301b2a(0x1a9)];tgBot[_0x301b2a(0x334)](_0xd58ff['id'])['then'](async()=>{const _0x232c54=_0x301b2a;_0x5120b5=='yes'?(await tgBot[_0x232c54(0x241)](_0x3fb315[_0x232c54(0x352)]['id'],_0x232c54(0x2eb),{'parse_mode':_0x232c54(0x2a9)})['catch'](_0x11ac41=>{telegramError(_0x11ac41);}),unzipFile(_0x5a7e2a,_0x12154f)):(logger[_0x232c54(0x32c)]('Restore\x20process\x20aborted'),await tgBot[_0x232c54(0x241)](_0x3fb315[_0x232c54(0x352)]['id'],'Restore\x20process\x20aborted')['catch'](_0x314394=>{telegramError(_0x314394);}));}),tgBot[_0x301b2a(0x2b1)](_0x301b2a(0x332));}));}function getServerTime(){const _0x520941=_0x205e5d,_0x2c4cc7=new Date();return _0x2c4cc7[_0x520941(0x240)]()+'/'+(_0x2c4cc7[_0x520941(0x287)]()+0x1)[_0x520941(0x1a4)]()['padStart'](0x2,'0')+'/'+_0x2c4cc7[_0x520941(0x219)]()[_0x520941(0x1a4)]()['padStart'](0x2,'0')+'\x20'+_0x2c4cc7['getHours']()[_0x520941(0x1a4)]()[_0x520941(0x383)](0x2,'0')+':'+_0x2c4cc7[_0x520941(0x2e0)]()[_0x520941(0x1a4)]()[_0x520941(0x383)](0x2,'0')+':'+_0x2c4cc7[_0x520941(0x325)]()[_0x520941(0x1a4)]()[_0x520941(0x383)](0x2,'0');}function getTimeStamp(){const _0x23484f=_0x205e5d,_0x4b6442=shiftedTime();return _0x4b6442['getFullYear']()+'/'+(_0x4b6442[_0x23484f(0x287)]()+0x1)['toString']()[_0x23484f(0x383)](0x2,'0')+'/'+_0x4b6442[_0x23484f(0x219)]()['toString']()[_0x23484f(0x383)](0x2,'0')+'\x20'+_0x4b6442[_0x23484f(0x266)]()[_0x23484f(0x1a4)]()['padStart'](0x2,'0')+':'+_0x4b6442[_0x23484f(0x2e0)]()[_0x23484f(0x1a4)]()[_0x23484f(0x383)](0x2,'0')+':'+_0x4b6442[_0x23484f(0x325)]()[_0x23484f(0x1a4)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x38e4f7=_0x205e5d,_0x3fcbe7=shiftedTime();return _0x3fcbe7[_0x38e4f7(0x240)]()+(_0x3fcbe7[_0x38e4f7(0x287)]()+0x1)[_0x38e4f7(0x1a4)]()['padStart'](0x2,'0')+_0x3fcbe7['getDate']()[_0x38e4f7(0x1a4)]()['padStart'](0x2,'0')+'-'+_0x3fcbe7['getHours']()['toString']()['padStart'](0x2,'0')+_0x3fcbe7[_0x38e4f7(0x2e0)]()[_0x38e4f7(0x1a4)]()[_0x38e4f7(0x383)](0x2,'0')+_0x3fcbe7[_0x38e4f7(0x325)]()[_0x38e4f7(0x1a4)]()[_0x38e4f7(0x383)](0x2,'0');}function _0x1593(){const _0x2c15a8=['parse','error','login\x20token\x20valid','Notifications\x20disabled','logs','file','graphql-request','Unauthorized\x20attempt\x20to\x20store\x20configuration','connected','Enabled\x20Bot\x20','Crypt','\x1b[33m','/disable\x20-\x20disable\x20notifications\x0a','\x1b[0m','telegrammsg','Unauthorized\x20attempt\x20to\x20get\x20messages','stop','#RES#\x20if\x20running\x20locally\x0a','send','#RES#\x20if\x20running\x20on\x20server','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','showname','live','30\x20min','/:bot/configuration','apiPassword','::ffff:127.0.0.1','expiry','=>\x20Go\x20to\x20#CYA#http://','Backup\x20file\x20uploaded','telegramEvents','conn','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','settings','SIGTERM','Error\x20while\x20deleting\x20config\x20files:\x20','getFullYear','sendMessage','logged\x20out','running','access\x20timeout','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','(((.+)+)+)+$','::1','full','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','constructor','backup/','axios','new','slice','\x1b[31m','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','yes','forEach','Unauthorized\x20attempt\x20to\x20confirm\x20message','_data','hasOwnProperty','No\x20authentication\x20token','\x1b[36m','bbvReceive','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','internal','backup-full@','then','string','Failed\x20to\x20download\x20','/on\x20-\x20start\x20bot(s)\x0a','Alerts','\x20mode','Node.js\x20v','kind','secure','getHours','store','(staging)','clients','socket.io','output-003.log','environment','download','node-zip','reset-password','length','reinstall-bb','bots','SIGINT','clientip','alias','isDirectory','http','function','args','Error\x20removing\x20old\x20backup\x20files:','initclient',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','log','update','Idling\x20bot\x20\x20\x20|\x20Bot\x20','size','2FA\x20login\x20token\x20generated','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','sort','Password\x20has\x20been\x20reset\x20to:\x20','exec','headers','getMonth','node-telegram-bot-api','temporary\x20access\x20rejected','static','notification','Yes','NTBA_FIX_319','statSync','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','emitHistory','Logged\x20in\x20user\x20...','entries','backupfile','#RES#\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Temporary\x20access\x20rejected','\x20>\x20','data','userid','readdirSync','88125wBGFon','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Your\x20installation\x20is\x20already\x20up\x20to\x20date','reload','endsWith','remove','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','cancel-loading','pidRefreshToken','Starting\x20Balance\x20Bot\x20update','Logged\x20out\x20user\x20...','params','started','9IBtdVa','HTML','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','track','Network\x20Interfaces:','onepagemode','express-fileupload','lastmsgemitted','lowdb','removeListener','All','blacklist','loginRequired','<b>Telegram\x20Bot\x20Status:</b>\x0a','Password\x20reset\x20rejected','enabled','toggle-bot-mode','server','/off\x20-\x20stop\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20add\x20bot','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','reinstall','/help\x20-\x20show\x20available\x20commands\x0a','************','stopped','apply','token','bbvNew','deleteHistoryAlerts','sockets','exp','get','-config.json','jsonwebtoken','/upload-backup','$1_$2_$3','order','temporary\x20token\x20generated','toIPv4Address','166740PAAVLS','\x20to\x20','pidExpireLogin','uuid','date-fns','whitelistEnabled','/:bot/portfolio','restart','Starting\x20bot\x20|\x20Bot\x20','stopPolling','invalid\x20credentials','latestversion','address','inherit','createWriteStream','-performance.json','8aUteXB','getMinutes','./version.json','Notifications\x20enabled\x0a','ipc','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','encryptedUuid','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','match','get-portfolio','Unauthorized\x20login\x20attempt\x20(timeout)','Restore\x20backup\x20file\x20','Restoring\x20bot(s)\x20from\x20backup','15\x20min','secret','delete-alerts','bot','files','version.json','Unauthorized\x20attempt\x20to\x20download\x20','Bot\x20Mgr\x20>\x20','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','apiSecret','Unauthorized\x20attempt\x20to\x20get\x20events','mtime','login\x20not\x20required','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','2962832MVSdsz','mkdirSync','storeHeadless','*$1*','1000','telegram2FaApproval','6b67f3d61ee94b8f5c80b4affef4c4d9','No\x20bots\x20running\x20right\x20now','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','127.0.0.1','update-bb','defaults','port','type','number','node','User\x20has\x20been\x20validated','Disabled\x20Bot\x20','request','any','writeFileSync','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','isValid','\x20|\x20user:\x20...','simple','use','unlinkSync','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','disconnect','access','search','Notifications\x20types:\x20','Invalid\x20authentication\x20token\x20(1)','disabled','uuid-random','/update\x20-\x20update\x20Balance\x20Bot\x0a','sign','<b>Balance\x20Bot\x20Status:</b>\x0a','2FA\x20login\x20rejected','storeFiat','username','getUTCHours','build2','getSeconds','/:bot','Error:\x20Invalid\x20argument\x20','bcryptjs','add','/download/:type','bbPassword','debug','-results.json','telegramEnabled','child_process','binary','password','callback_query','confirm-message','answerCallbackQuery','backup','staging','stringify','format','argv','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','32HdAand','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bb-secure.json','getTime','settings.','-events.json','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','598326UPwTbw','2547919lAdpWV','hex','status','Restarting\x20Bot\x20','rmSync','headless','remoteAddress','all','***','\x20|\x20client:\x20...','connection','restore-backup-file','RSA','Setting\x20access:\x20','sha256','chat','crypto','value','readFileSync','zip/','hybrid-crypto-js','copyFileSync','event','/enable\x20-\x20enable\x20notifications\x0a','path','Notifications\x20disabled\x0a','1367640LDRimB','timestamp','404\x20Not\x20Found','\x1b[34m','handshake','timeshift','Unauthorized\x20attempt\x20to\x20update\x20bot','login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','warning','/:bot/performance','Invalid\x20authentication\x20token\x20(2)','get-messages','write','/status\x20-\x20show\x20bot(s)\x20status\x0a','show','\x1b[35m','backup-files','manual','build','botID','/:bot/coins','test','tkn','verify','generateKeyPairAsync','\x20|\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','backup-full','/:bot/history','login','reason','Token\x20blacklisted','listen','place-order','You\x20can\x20use\x20the\x20following\x20commands:\x0a','title','3073clJbew','padStart','hashSync','bot.js','getStartingBalances','createServer','temporary\x20access\x20not\x20allowed','lastmsgtelegram','Invalid\x20IP\x20address','toggleBotMode','output-001.log','mode','Starting\x20#RED#Balance\x20Bot\x20v','/restart\x20-\x20restart\x20bot(s)\x0a','get-starting-balances','IPv4','sortBy','toString','Bot\x20','Notifications\x20enabled','output-002.log','telegramChatId','message','keys','Unauthorized\x20attempt\x20to\x20update\x20settings','bot-','user','privateKey','new-disabled','Login\x20accepted','mixpanel','versions','publicKey',',\x20must\x20be\x20a\x204\x20digit\x20number','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','exchange','catch','find','</b>\x20?','5916pwRnuH','allow','Markdown','orders','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Access\x20enabled\x20for\x20','cancelLoading','logs/','reject','telegramUsername','min','bb/','success','bbUsername','index.html','exit','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','bb-settings.json','0.0.0','delete-bot','store-fiat','Ok,\x20will\x20send\x20order\x20notifications\x20only','from','auto','All\x20bots\x20running\x20right\x20now','resetHistory','socket','Allow\x20login\x20from\x20IP\x20address\x20<b>','reset-history','2FA\x20required','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','2FA\x20login\x20required','post','messages','botmanager','.zip','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','filter','add-bot','Invalid\x20Telegram\x20token','\x20only\x0a','getPortfolio','telegram','toIPv4MappedAddress','includes','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Starting\x20new\x20bot\x20|\x20Bot\x20','5\x20min','production','botname','push','kill','sendPortfolioTelegram','map','logout','output-000.log','sendMetricsTelegram','family','ipv6','referer','get-logs','startsWith','Orders','onText','decrypt','util','join','3000','replace','telegramToken','alerts','/output-000.log','temporaryAccessAllowed','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','temporary\x20access\x20timeout','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','randomBytes','store-configuration','emit','max','https://api.ipify.org?format=json','apiKey','once','/names\x20-\x20show\x20bot\x20names\x0a','assign','All\x20bots','Invalid\x20username\x20or\x20IP\x20address',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','name','Unauthorized\x20attempt\x20to\x20log\x20out','existsSync','split','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','sendFile','getDate','/:bot/support','telegramIpApproval'];_0x1593=function(){return _0x2c15a8;};return _0x1593();}function shiftedTime(){const _0xa4e4f4=_0x205e5d,_0x5ec404=new Date();let _0x50a03d=_0x5ec404;if(settings[_0xa4e4f4(0x362)]&&settings[_0xa4e4f4(0x362)]!==0x0)_0x50a03d=fns[_0xa4e4f4(0x329)](_0x5ec404,{'hours':settings[_0xa4e4f4(0x362)]});return _0x50a03d;}function startScheduler(){const _0x3e37dc=_0x205e5d,_0x375241=new Date()[_0x3e37dc(0x323)](),_0x292a2e=shiftedTime()[_0x3e37dc(0x266)]();_0x292a2e==0x4&&backupConfigFiles();_0x292a2e==0x0&&rotateLogFiles();_0x375241%0x6==0x0&&triggerAnalytics();_0x375241%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x12fafe){const _0x1ca0c2=_0x205e5d;logger[_0x1ca0c2(0x32c)](_0x1ca0c2(0x2ea)+_0x12fafe);const _0x4c1abc=getBotsWithMode();_0x4c1abc[_0x1ca0c2(0x270)]>0x0?confirmRestore(configbackuppath,_0x12fafe):unzipFile(configbackuppath,_0x12fafe);}async function getBackupFiles(_0x1f49ec=null){const _0x2e1051=_0x205e5d;let _0x28746f=[],_0x52db98=fs[_0x2e1051(0x29a)](configbackuppath,{'withFileTypes':!![]});_0x52db98[_0x2e1051(0x283)]((_0x428a94,_0x5ed318)=>_0x428a94['name']<_0x5ed318['name']?0x1:_0x5ed318[_0x2e1051(0x213)]<_0x428a94[_0x2e1051(0x213)]?-0x1:0x0),_0x52db98[_0x2e1051(0x252)](_0x5dd309=>{const _0x2971cb=_0x2e1051;if(!_0x5dd309['isDirectory']()&&_0x5dd309[_0x2971cb(0x213)][_0x2971cb(0x1f8)](_0x2971cb(0x25c))&&_0x5dd309['name'][_0x2971cb(0x29f)](_0x2971cb(0x1de))){const _0x5236ed=formatDate(fs[_0x2971cb(0x28e)](configbackuppath+_0x5dd309['name'])[_0x2971cb(0x2f7)]);_0x28746f[_0x2971cb(0x1ed)]({'name':_0x5dd309[_0x2971cb(0x213)],'mtime':_0x5236ed});}});if(_0x1f49ec)io['to'](_0x1f49ec)['emit'](_0x2e1051(0x36e),_0x28746f);else return _0x28746f;}async function backupConfigFiles(){const _0x33867c=_0x205e5d;await zipFiles('backup-full');const _0x4a73f9=getCleanTimeStamp();fs[_0x33867c(0x358)](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0x4a73f9+_0x33867c(0x1de)));let _0x3ed292=fs[_0x33867c(0x29a)](configbackuppath,{'withFileTypes':!![]});_0x3ed292[_0x33867c(0x283)]((_0x11503b,_0x339aff)=>_0x11503b[_0x33867c(0x213)]<_0x339aff['name']?0x1:_0x339aff[_0x33867c(0x213)]<_0x11503b[_0x33867c(0x213)]?-0x1:0x0),_0x3ed292[_0x33867c(0x270)]>maxBackups&&fs[_0x33867c(0x314)](configbackuppath+_0x3ed292[_0x3ed292[_0x33867c(0x270)]-0x1]['name']);}function rotateLogFiles(){const _0x54221d=_0x205e5d,_0x31aa5d=fs[_0x54221d(0x28e)](logspath+_0x54221d(0x1f2)),_0x545e24=_0x31aa5d[_0x54221d(0x280)]/0x400;if(_0x545e24>0x64){let _0x5e84ad=fs[_0x54221d(0x29a)](logspath,{'withFileTypes':!![]});_0x5e84ad[_0x54221d(0x283)]((_0x5af8ac,_0x46d0ec)=>_0x5af8ac['name']<_0x46d0ec[_0x54221d(0x213)]?0x1:_0x46d0ec['name']<_0x5af8ac[_0x54221d(0x213)]?-0x1:0x0),_0x5e84ad[_0x54221d(0x252)](_0x4c8183=>{const _0x384a30=_0x54221d;if(_0x4c8183['name']==_0x384a30(0x1a7))fs[_0x384a30(0x358)](logspath+_0x4c8183['name'],logspath+_0x384a30(0x26b));if(_0x4c8183[_0x384a30(0x213)]==_0x384a30(0x19d))fs[_0x384a30(0x358)](logspath+_0x4c8183['name'],logspath+_0x384a30(0x1a7));_0x4c8183[_0x384a30(0x213)]==_0x384a30(0x1f2)&&(fs['copyFileSync'](logspath+_0x4c8183[_0x384a30(0x213)],logspath+'output-001.log'),fs[_0x384a30(0x30e)](logspath+_0x4c8183[_0x384a30(0x213)],''));});}}async function zipFiles(_0x4e2287){const _0x55577f=_0x205e5d;let _0x4c2681;if(_0x4e2287==_0x55577f(0x220))_0x4c2681=logspath;if(_0x4e2287==_0x55577f(0x335))_0x4c2681=configpath;if(_0x4e2287==_0x55577f(0x379))_0x4c2681=configpath;let _0x34a261=fs['readdirSync'](_0x4c2681,{'withFileTypes':!![]});const _0x3a68a5=new require('node-zip')();_0x34a261['forEach'](_0x23a4ae=>{const _0x2fe5e5=_0x55577f;if(!_0x23a4ae[_0x2fe5e5(0x276)]()){let _0x642cb2=fs[_0x2fe5e5(0x355)](_0x4c2681+_0x23a4ae[_0x2fe5e5(0x213)]);if(_0x4e2287==_0x2fe5e5(0x335)){const _0x212784=/^bot-[0-9]{3}-config.json$/,_0xa1b1da=_0x212784[_0x2fe5e5(0x373)](_0x23a4ae['name']);if(_0xa1b1da){const _0x20eedf=JSON[_0x2fe5e5(0x21c)](_0x642cb2);if(_0x20eedf[_0x2fe5e5(0x2ef)][0x0]){_0x20eedf[_0x2fe5e5(0x2ef)][0x0][_0x2fe5e5(0x20c)]=_0x2fe5e5(0x34b),_0x20eedf[_0x2fe5e5(0x2ef)][0x0][_0x2fe5e5(0x2f5)]=_0x2fe5e5(0x34b);if(_0x20eedf[_0x2fe5e5(0x2ef)][0x0][_0x2fe5e5(0x235)])_0x20eedf[_0x2fe5e5(0x2ef)][0x0]['apiPassword']=_0x2fe5e5(0x34b);}_0x642cb2=JSON[_0x2fe5e5(0x337)](_0x20eedf,null,0x2);}if(_0x23a4ae['name']=='bb-settings.json'){const _0x1e0aa6=JSON[_0x2fe5e5(0x21c)](_0x642cb2);if(_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x2b4)])_0x1e0aa6[_0x2fe5e5(0x23d)]['loginRequired']=![];if(_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x32b)])_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x32b)]=_0x2fe5e5(0x34b);if(_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x200)])_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x200)]=_0x2fe5e5(0x34b);if(_0x1e0aa6[_0x2fe5e5(0x23d)][_0x2fe5e5(0x1a8)])_0x1e0aa6[_0x2fe5e5(0x23d)]['telegramChatId']=null;_0x642cb2=JSON[_0x2fe5e5(0x337)](_0x1e0aa6,null,0x2);}if(_0x23a4ae[_0x2fe5e5(0x213)]!='bb-secure.json')_0x3a68a5[_0x2fe5e5(0x221)](_0x23a4ae['name'],_0x642cb2);}else _0x3a68a5[_0x2fe5e5(0x221)](_0x23a4ae[_0x2fe5e5(0x213)],_0x642cb2);}});const _0x170ed9=_0x3a68a5['generate']({'base64':![],'compression':'DEFLATE'});fs[_0x55577f(0x30e)](zippath+(_0x4e2287+_0x55577f(0x1de)),_0x170ed9,_0x55577f(0x330));}async function unzipFile(_0x3da9ca,_0x5ed0c1){const _0x2550e8=_0x205e5d;fs[_0x2550e8(0x29a)](configpath,{'withFileTypes':!![]})[_0x2550e8(0x252)](_0x2cb015=>{const _0x5035c5=_0x2550e8;if(!_0x2cb015['isDirectory']())fs[_0x5035c5(0x347)](configpath+_0x2cb015[_0x5035c5(0x213)]);});const _0x20d9a0=fs['readFileSync'](_0x3da9ca+_0x5ed0c1,'binary'),_0x4de7cb=new require(_0x2550e8(0x26e))(_0x20d9a0,{'base64':![],'checkCRC32':!![]});Object[_0x2550e8(0x1aa)](_0x4de7cb[_0x2550e8(0x2f0)])[_0x2550e8(0x252)](_0x2b74c4=>{const _0x4944e2=_0x2550e8,_0x9a79c3=_0x4de7cb[_0x4944e2(0x2f0)][_0x2b74c4];fs[_0x4944e2(0x30e)](configpath+_0x9a79c3[_0x4944e2(0x213)],_0x9a79c3[_0x4944e2(0x254)]);}),fs[_0x2550e8(0x29a)](temppath,{'withFileTypes':!![]})[_0x2550e8(0x252)](_0x25b8c9=>{const _0x5420f0=_0x2550e8;if(!_0x25b8c9[_0x5420f0(0x276)]())fs[_0x5420f0(0x347)](temppath+_0x25b8c9[_0x5420f0(0x213)]);}),logger[_0x2550e8(0x32c)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x2550e8(0x22e)]({'restore':!![]},_0x2e340f=>{});}async function getPublicIp(){const _0x2e4ee0=_0x205e5d;try{const _0x927057=await axios['get'](_0x2e4ee0(0x20b));publicip=_0x927057[_0x2e4ee0(0x298)]['ip'];}catch(_0x4cb331){}}async function triggerAnalytics(){const _0x27a9e5=_0x205e5d;if(!publicip)await getPublicIp();const _0x4e0eeb=getBotsWithMode();let _0x29ed8b=0x0;_0x4e0eeb[_0x27a9e5(0x252)](_0x1cbf77=>{const _0x208789=_0x27a9e5;if(_0x1cbf77['status']===_0x208789(0x2b7))_0x29ed8b++;});const _0x21a3fd=getBotExchanges();mixpanel[_0x27a9e5(0x2ab)]('Server',{'distinct_id':settings[_0x27a9e5(0x299)],'ip':publicip,'version':serverversion,'numbots':_0x4e0eeb[_0x27a9e5(0x270)],'numbotsenabled':_0x29ed8b,'exchanges':_0x21a3fd});}async function getMessages(){const _0x4127bc=_0x205e5d,_0xb5c2d5=_0x4127bc(0x2f4),_0x13ee3e=new GraphQLClient(_0xb5c2d5),_0x20367e={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x3dd6aa=serverversion[_0x4127bc(0x216)]('.'),_0x15fc69=_0x3dd6aa[0x0]+'.'+_0x3dd6aa[0x1],_0x4a3199=Math[_0x4127bc(0x1c5)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x4d7923={'last':parseInt(_0x4a3199),'bbm':_0x15fc69},_0x283498=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x432ceb;try{_0x432ceb=await _0x13ee3e[_0x4127bc(0x30c)](_0x283498,_0x4d7923,_0x20367e);}catch(_0x274d29){}if(_0x432ceb&&_0x432ceb['messages']){let _0x3c8066=settings[_0x4127bc(0x19a)];newMessages=[];for(const _0xcbc215 of _0x432ceb[_0x4127bc(0x1dc)]){newMessages[_0x4127bc(0x1ed)](_0xcbc215);if(_0xcbc215['bbvNew'])updateSetting(_0x4127bc(0x2da),_0xcbc215[_0x4127bc(0x2c3)]);let _0x36fc49=_0xcbc215['bbvNew']?serverversion>=_0xcbc215[_0x4127bc(0x2c3)]:![];if(!_0x36fc49&&_0xcbc215[_0x4127bc(0x308)]>_0x3c8066){if(_0xcbc215[_0x4127bc(0x258)]===_0x4127bc(0x30d)||serverversion[_0x4127bc(0x1f8)](_0xcbc215[_0x4127bc(0x258)])){let _0x4266a3=''+_0xcbc215[_0x4127bc(0x381)]+'\x0a\x0a'+_0xcbc215['message'];const _0x1067e9=await sendTelegramMsg(toTelegramMarkdown(_0x4266a3),_0x4127bc(0x1bc));if(_0x1067e9)_0x3c8066=_0xcbc215[_0x4127bc(0x308)];}}}updateAvailable=isNewerVersion(settings[_0x4127bc(0x2da)],serverversion),updateSetting('lastmsgtelegram',_0x3c8066),emitMessages();}}function emitMessages(){const _0x1cc776=_0x205e5d,_0xd9f203=settings['lastmsgemitted'];let _0x4cf949=[];newMessages[_0x1cc776(0x252)](_0x509d17=>{const _0x5e1ce2=_0x1cc776;_0x509d17[_0x5e1ce2(0x308)]>_0xd9f203&&_0x4cf949[_0x5e1ce2(0x1ed)](_0x509d17);}),_0x4cf949[_0x1cc776(0x270)]>0x0&&getAllClients()[_0x1cc776(0x252)](_0xaa0618=>{const _0x5a3765=_0x1cc776;getSocket(_0xaa0618['id'])[_0x5a3765(0x209)](_0x5a3765(0x1a9),_0x4cf949);});}function confirmMessage(_0x332142){const _0xfb8776=_0x205e5d;updateSetting(_0xfb8776(0x2af),Number(_0x332142));}function isNewerVersion(_0x59f408,_0xb2b68b){const _0x9d44bc=_0x205e5d,_0x5d4a3d=_0xb2b68b['split']('.'),_0x451433=_0x59f408[_0x9d44bc(0x216)]('.');for(var _0x33e751=0x0;_0x33e751<_0x451433[_0x9d44bc(0x270)];_0x33e751++){const _0x1ec740=~~_0x451433[_0x33e751],_0x5993ce=~~_0x5d4a3d[_0x33e751];if(_0x1ec740>_0x5993ce)return!![];if(_0x1ec740<_0x5993ce)return![];}return![];}function toTelegramMarkdown(_0x2f8925){const _0x7f0316=_0x205e5d,_0x787339=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4e1564=/\*{2}(.+?)\*{2}/gim;return _0x2f8925=_0x2f8925[_0x7f0316(0x1ff)](_0x787339,_0x7f0316(0x2cb))[_0x7f0316(0x1ff)](_0x4e1564,_0x7f0316(0x2fd)),_0x2f8925;}async function validateConfigFile(){const _0x2f02e7=_0x205e5d,_0x41d86b=dbConfig[_0x2f02e7(0x2c7)](_0x2f02e7(0x272))[_0x2f02e7(0x1a3)](_0x2f02e7(0x371))['value']()||[];if(_0x41d86b[_0x2f02e7(0x270)]==0x0){let _0x51d762=0x0,_0x3b7745=[];const _0x27b4b8=/^bot-([0-9]{3})-config.json$/,_0x23fc76=fs[_0x2f02e7(0x29a)](configpath);_0x23fc76[_0x2f02e7(0x252)](_0x3524ea=>{const _0x458ddc=_0x2f02e7,_0x45ae96=_0x27b4b8[_0x458ddc(0x285)](_0x3524ea);if(_0x45ae96){const _0x4693dc=_0x45ae96[0x1];let _0x4a306a=getBotAttributes(_0x4693dc);_0x3b7745[_0x458ddc(0x1ed)]({'botID':_0x4693dc,'botname':_0x4a306a[_0x458ddc(0x1ec)],'status':'disabled','live':_0x458ddc(0x2c0)}),_0x51d762++;}}),_0x51d762!=0x0&&(dbConfig[_0x2f02e7(0x2c7)](_0x2f02e7(0x272))[_0x2f02e7(0x20f)](_0x3b7745)[_0x2f02e7(0x36a)](),config=_0x3b7745,restoredConfigFile=_0x51d762);}}async function restoreConfigNotify(_0x4f9b2c){const _0x33dbd3=_0x205e5d;let _0x135883;if(restoredConfigFile==0x1)_0x135883='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x135883=_0x33dbd3(0x25a);if(_0x4f9b2c)io['to'](_0x33dbd3(0x1dd))[_0x33dbd3(0x209)](_0x33dbd3(0x28b),_0x135883);else{logger[_0x33dbd3(0x312)]('-----------------------------------------------------------------------------------'),logger[_0x33dbd3(0x312)](_0x135883),logger[_0x33dbd3(0x312)]('-----------------------------------------------------------------------------------'),logger[_0x33dbd3(0x312)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x33dbd3(0x23a)]!=_0x33dbd3(0x1bd))tgBot[_0x33dbd3(0x241)](settings['telegramChatId'],_0x33dbd3(0x2f3)+_0x135883)[_0x33dbd3(0x1b7)](_0x3dccba=>{telegramError(_0x3dccba);});}}function validateCredentials(_0x3a6d5d,_0xc55b23){const _0x2f563f=_0x205e5d;if(_0x3a6d5d[_0x2f563f(0x322)]==settings[_0x2f563f(0x1c8)]&&bcrypt['compareSync'](_0x3a6d5d[_0x2f563f(0x331)],settings[_0x2f563f(0x32b)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x2f563f(0x1da),'token':null};else{const _0x18a128=generateLoginToken(_0xc55b23);return{'allow':!![],'reason':_0x2f563f(0x364),'token':_0x18a128};}}else return{'allow':![],'reason':_0x2f563f(0x2d9),'token':null};}function refreshToken(_0x10c45e){const _0x8b3542=_0x205e5d,_0x292f2b=generateLoginToken(_0x10c45e);return{'allow':!![],'reason':_0x8b3542(0x364),'token':_0x292f2b};}function validateAccess(_0x17fa19,_0x4faf31,_0x2dd4b6){const _0x536eea=_0x205e5d,_0x27263a=_0x2dd4b6?_0x2dd4b6:devices[_0x4faf31]['ip'];let _0x4b1e74;const _0x433772=_0xa04e9f=>{const _0x1fd396=_0x31a8;if(settings[_0x1fd396(0x2b4)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x4faf31)){const _0x58eb99=generateLoginToken(_0x4faf31);return{'allow':!![],'reason':_0x1fd396(0x281),'token':_0x58eb99};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4b1e74=validToken(_0xa04e9f,_0x4faf31),_0x4b1e74[_0x1fd396(0x255)](_0x1fd396(0x1c7))?{'allow':!![],'reason':_0x1fd396(0x21e),'token':_0xa04e9f}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x1fd396(0x2f8),'token':null};};if(settings[_0x536eea(0x2d4)]){let _0x136d63=[...settings['whitelist'],_0x536eea(0x247),_0x536eea(0x236),_0x536eea(0x303)];if(_0x136d63[_0x536eea(0x1e7)](_0x27263a))return _0x433772(_0x17fa19);else{_0x4b1e74=validToken(_0x17fa19,_0x4faf31);if(_0x4b1e74[_0x536eea(0x255)]('success'))return _0x433772(_0x17fa19);else{if(telegramIpApproved(_0x4faf31)){const _0x405ff7=generateToken(_0x4faf31);return _0x4b1e74=_0x433772(_0x17fa19),_0x4b1e74[_0x536eea(0x1bb)]?{'allow':!![],'reason':_0x536eea(0x2cd),'token':_0x405ff7}:_0x4b1e74;}else return settings[_0x536eea(0x203)]?{'allow':![],'reason':_0x536eea(0x1d8),'token':null}:{'allow':![],'reason':_0x536eea(0x199),'token':null};}}}else return _0x433772(_0x17fa19);}function timelyDecrypt(_0x3569c4,_0x1a9ab8=!![]){const _0xc86fe8=_0x205e5d;if(_0x3569c4)try{const _0x16c076=crypt[_0xc86fe8(0x1fb)](secure[_0xc86fe8(0x1ae)],_0x3569c4)['message'],_0x173caf=_0x16c076['split']('@')[0x0],_0x4812cb=_0x16c076[_0xc86fe8(0x216)]('@')[0x1],_0x35dc10=new Date()[_0xc86fe8(0x33e)]();if(_0x1a9ab8){if(_0x35dc10-_0x4812cb<maxSecretAge*0x3e8)return _0x173caf;else return![];}else return _0x173caf;}catch(_0x4d3f3b){return![];}else return![];}const validToken=(_0x23e522,_0x5f1b06)=>{const _0x17c4e8=_0x205e5d,_0x49747b=devices[_0x5f1b06]['ip'];if(!_0x23e522)return{'error':_0x17c4e8(0x256)};for(let _0x27dd67 of blacklist){if(_0x27dd67[_0x17c4e8(0x2c2)]==_0x23e522)return{'error':_0x17c4e8(0x37d)};}let _0x445f0a;try{_0x445f0a=jwt[_0x17c4e8(0x375)](_0x23e522,secure[_0x17c4e8(0x2ed)]+_0x5f1b06);}catch{return{'error':_0x17c4e8(0x31a)};}if(!_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x274))&&!_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x322))||!_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x2c6)))return{'error':_0x17c4e8(0x368)};if(!_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x322))&&_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x274))){const {clientip:_0x717acb}=_0x445f0a;return _0x49747b==_0x717acb?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x17c4e8(0x19b)};}else{if(_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x322))&&_0x445f0a[_0x17c4e8(0x255)](_0x17c4e8(0x274))){const {username:_0x4926ce,clientip:_0x45cdcc}=_0x445f0a;return settings[_0x17c4e8(0x1c8)]==_0x4926ce&&_0x49747b==_0x45cdcc?{'success':_0x17c4e8(0x30a)}:{'error':_0x17c4e8(0x211)};}}},generateLoginToken=_0x5926fc=>{const _0xb4970b=_0x205e5d;if(_0x5926fc){const _0x952bcf=devices[_0x5926fc]['ip'];return jwt[_0xb4970b(0x31e)]({'username':settings[_0xb4970b(0x1c8)],'clientip':_0x952bcf},secure[_0xb4970b(0x2ed)]+_0x5926fc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4af1f7=>{const _0x394560=_0x205e5d;if(_0x4af1f7){const _0x1db8a0=devices[_0x4af1f7]['ip'];return jwt[_0x394560(0x31e)]({'clientip':_0x1db8a0},secure['secret']+_0x4af1f7,{'expiresIn':devices[_0x4af1f7][_0x394560(0x21b)][_0x394560(0x237)]*0x3c});}else return![];},telegramIpApproved=_0x6fde5f=>{const _0xa2d4df=_0x205e5d;let _0x1dee19=![];return devices[_0x6fde5f][_0xa2d4df(0x21b)]&&devices[_0x6fde5f]['telegramIpApproval'][_0xa2d4df(0x237)]!=_0xa2d4df(0x1c3)&&(_0x1dee19=devices[_0x6fde5f][_0xa2d4df(0x21b)][_0xa2d4df(0x274)]==devices[_0x6fde5f]['ip']&&new Date()['getTime']()-devices[_0x6fde5f][_0xa2d4df(0x21b)][_0xa2d4df(0x35e)]<devices[_0x6fde5f][_0xa2d4df(0x21b)][_0xa2d4df(0x237)]*0x3c*0x3e8),_0x1dee19;},telegram2FaApproved=_0xbe212d=>{const _0x27bb17=_0x205e5d;let _0x5efb9e=![];return devices[_0xbe212d][_0x27bb17(0x2ff)]&&devices[_0xbe212d][_0x27bb17(0x2ff)][_0x27bb17(0x237)]!=_0x27bb17(0x1c3)&&(_0x5efb9e=devices[_0xbe212d]['telegram2FaApproval'][_0x27bb17(0x274)]==devices[_0xbe212d]['ip']&&new Date()['getTime']()-devices[_0xbe212d]['telegram2FaApproval'][_0x27bb17(0x35e)]<devices[_0xbe212d][_0x27bb17(0x2ff)][_0x27bb17(0x237)]*0x3c*0x3e8),_0x5efb9e;},normalizeIP=_0x257875=>{const _0x3b07cc=_0x205e5d;let _0x30734f=null,_0x24246e=null;if(ipaddr[_0x3b07cc(0x310)](_0x257875)){const _0x225edb=ipaddr['parse'](_0x257875);_0x225edb[_0x3b07cc(0x264)]()===_0x3b07cc(0x1f5)?(_0x225edb['isIPv4MappedAddress']()&&(_0x30734f=_0x225edb[_0x3b07cc(0x2ce)]()[_0x3b07cc(0x1a4)]()),_0x24246e=_0x225edb['toString']()):(_0x30734f=_0x225edb['toString'](),_0x24246e=_0x225edb[_0x3b07cc(0x1e6)]()[_0x3b07cc(0x1a4)]());}return{'show':_0x30734f?_0x30734f:_0x24246e,'store':_0x24246e};};function formatDate(_0x372dcf){const _0x48c5dc=_0x205e5d;return _0x372dcf[_0x48c5dc(0x240)]()+'/'+(_0x372dcf[_0x48c5dc(0x287)]()+0x1)[_0x48c5dc(0x1a4)]()[_0x48c5dc(0x383)](0x2,'0')+'/'+_0x372dcf[_0x48c5dc(0x219)]()[_0x48c5dc(0x1a4)]()['padStart'](0x2,'0')+'\x20'+_0x372dcf[_0x48c5dc(0x266)]()[_0x48c5dc(0x1a4)]()['padStart'](0x2,'0')+':'+_0x372dcf[_0x48c5dc(0x2e0)]()[_0x48c5dc(0x1a4)]()['padStart'](0x2,'0')+':'+_0x372dcf['getSeconds']()[_0x48c5dc(0x1a4)]()[_0x48c5dc(0x383)](0x2,'0');}function sleep(_0x17841f){return new Promise(_0x282695=>setTimeout(_0x282695,_0x17841f));}