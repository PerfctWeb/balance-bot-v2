const _0xfadbea=_0x298e;(function(_0x1330fc,_0x113cd4){const _0x5cd13b=_0x298e,_0x4b57ec=_0x1330fc();while(!![]){try{const _0x5e0240=parseInt(_0x5cd13b(0x1ac))/0x1+parseInt(_0x5cd13b(0x104))/0x2+-parseInt(_0x5cd13b(0x164))/0x3+-parseInt(_0x5cd13b(0x158))/0x4*(-parseInt(_0x5cd13b(0x2c0))/0x5)+parseInt(_0x5cd13b(0x1c4))/0x6+parseInt(_0x5cd13b(0x109))/0x7+-parseInt(_0x5cd13b(0x2a2))/0x8;if(_0x5e0240===_0x113cd4)break;else _0x4b57ec['push'](_0x4b57ec['shift']());}catch(_0x3c9e90){_0x4b57ec['push'](_0x4b57ec['shift']());}}}(_0x1f83,0x96d00));const _0x598646=function(){let _0x2fe17c=!![];return function(_0x3aba8e,_0x350131){const _0x49e8a5=_0x2fe17c?function(){const _0x2dfbdb=_0x298e;if(_0x350131){const _0x3ab077=_0x350131[_0x2dfbdb(0x165)](_0x3aba8e,arguments);return _0x350131=null,_0x3ab077;}}:function(){};return _0x2fe17c=![],_0x49e8a5;};}(),_0x1a4ac8=_0x598646(this,function(){const _0x2403ea=_0x298e;return _0x1a4ac8['toString']()[_0x2403ea(0x233)](_0x2403ea(0x2c8))['toString']()[_0x2403ea(0x2ea)](_0x1a4ac8)[_0x2403ea(0x233)](_0x2403ea(0x2c8));});_0x1a4ac8();'use strict';process['env'][_0xfadbea(0x173)]=0x1;const childProcess=require(_0xfadbea(0x297)),fs=require('fs'),fns=require(_0xfadbea(0x1de)),low=require(_0xfadbea(0x21c)),FileSync=require(_0xfadbea(0x120)),path=require('path'),crypto=require(_0xfadbea(0x2b1)),Crypt=require(_0xfadbea(0x299))[_0xfadbea(0x2ee)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0xfadbea(0xfa)),jwt=require('jsonwebtoken'),ipaddr=require(_0xfadbea(0x2a4)),argv=require(_0xfadbea(0x1a8))(process['argv'][_0xfadbea(0x261)](0x2))[_0xfadbea(0x1dd)],uuidRandom=require(_0xfadbea(0x1df)),{Telegraf,Markup}=require(_0xfadbea(0x246)),Mixpanel=require(_0xfadbea(0x219)),axios=require(_0xfadbea(0x147)),{GraphQLClient,gql}=require(_0xfadbea(0x2eb)),util=require(_0xfadbea(0x1b6)),fileUpload=require(_0xfadbea(0x27f)),{networkInterfaces}=require('os'),PORT=argv[_0xfadbea(0x27a)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0xfadbea(0x1e1)](PORT)&&(console[_0xfadbea(0x212)](_0xfadbea(0x251)+PORT+_0xfadbea(0x124)),process[_0xfadbea(0x128)](0x1));const HOST=argv[_0xfadbea(0x2a8)]||null,userID=argv[_0xfadbea(0x16c)]||'',debugging=argv['d']||![],nodeversion=process[_0xfadbea(0x192)][_0xfadbea(0x270)];let bbpath=_0xfadbea(0x20c),bbpath2='';const botfile=_0xfadbea(0x1a2),configfile='bb-config.json',settingsfile=_0xfadbea(0x25b),securefile='bb-secure.json',environment=require('./'+bbpath2+'version.json')[_0xfadbea(0x247)]||_0xfadbea(0x1d2),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xfadbea(0x163)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0xfadbea(0x227),logspath=userID?bbpath+_0xfadbea(0x206)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0xfadbea(0x17d)+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0xfadbea(0x1f7)+userID+'/':bbpath+_0xfadbea(0x1f7);!fs[_0xfadbea(0x2b3)](configpath)&&fs[_0xfadbea(0x267)](configpath);!fs[_0xfadbea(0x2b3)](configbackuppath)&&fs[_0xfadbea(0x267)](configbackuppath);!fs[_0xfadbea(0x2b3)](logspath)&&fs[_0xfadbea(0x267)](logspath);!fs[_0xfadbea(0x2b3)](zippath)&&fs[_0xfadbea(0x267)](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0xfadbea(0x1b4)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xfadbea(0x15a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xfadbea(0x211),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0xfadbea(0x1b4)]();let crypt=new Crypt({'md':_0xfadbea(0x2ce),'rsaStandard':_0xfadbea(0x285)});const saltRounds=0xa,mixpanel=Mixpanel[_0xfadbea(0xf7)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xfadbea(0x26c)]&&(settings[_0xfadbea(0x26c)]!=''&&settings[_0xfadbea(0x26c)]!=_0xfadbea(0x1ca))&&settings[_0xfadbea(0x1bb)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x514213,_0x118ffc)=>{const _0x4fff1a=_0xfadbea,_0x189deb=/#[A-Z]{3}#/g;if(typeof _0x514213==_0x4fff1a(0x295)){!_0x118ffc?_0x514213=_0x514213[_0x4fff1a(0x1ef)](_0x189deb,''):(_0x514213=_0x514213[_0x4fff1a(0x1ef)](/#BLU#/g,_0x4fff1a(0x26f)),_0x514213=_0x514213[_0x4fff1a(0x1ef)](/#RED#/g,'\x1b[31m'),_0x514213=_0x514213[_0x4fff1a(0x1ef)](/#YEL#/g,_0x4fff1a(0x1ec)),_0x514213=_0x514213[_0x4fff1a(0x1ef)](/#MAG#/g,'\x1b[35m'),_0x514213=_0x514213['replace'](/#CYA#/g,_0x4fff1a(0x2f0)),_0x514213=_0x514213[_0x4fff1a(0x1ef)](/#RES#/g,_0x4fff1a(0x1dc)));;}return _0x514213;},logger={'screen':_0x52e037=>{const _0x25d7a7=_0xfadbea;console[_0x25d7a7(0x212)](parseColor(_0x52e037,!![]));},'simple':_0xaca67b=>{const _0x583d26=_0xfadbea;console['log'](parseColor(_0xaca67b,!![])),loggerfile[_0x583d26(0x1b4)](util[_0x583d26(0x189)](parseColor(_0xaca67b,![]))+'\x0a');},'full':async _0x234d94=>{const _0x188f76=_0xfadbea,_0x22f147=getTimeStamp()+_0x188f76(0x2d2)+_0x234d94;console[_0x188f76(0x212)](parseColor(_0x22f147,!![])),loggerfile['write'](util[_0x188f76(0x189)](parseColor(_0x22f147,![]))+'\x0a');if(tgBot&&settings[_0x188f76(0x29d)]&&settings[_0x188f76(0x145)]!=_0x188f76(0x229))await sendTelegram(settings['telegramChatId'],_0x188f76(0x1ed)+parseColor(_0x234d94,![]));},'debug':async(_0x353fb3,_0x115e29='')=>{const _0xfdcf47=_0xfadbea,_0x2c2d71=getTimeStamp()+_0xfdcf47(0x23a)+_0x353fb3;if(debugging)console['log'](parseColor(_0x2c2d71,!![]));loggerfile[_0xfdcf47(0x1b4)](util[_0xfdcf47(0x189)](parseColor(_0x2c2d71,![]))+'\x0a');if(_0x115e29){if(debugging)console[_0xfdcf47(0x212)](_0x115e29);loggerfile[_0xfdcf47(0x1b4)](util[_0xfdcf47(0x189)](_0x115e29)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x132f96){const _0x552a6a=_0xfadbea;logger[_0x552a6a(0xee)](_0x132f96);}),process['on']('exit',()=>{stopAllBots();}),process['on'](_0xfadbea(0x1f1),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xfadbea(0x28a))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xfadbea(0x292)),app=express(),http=require(_0xfadbea(0x1d9))[_0xfadbea(0x231)](app);app[_0xfadbea(0x18e)](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x16062e,_0x103849)=>{const _0x5d09d9=_0xfadbea,_0x56ae9e=_0x16062e['params'][_0x5d09d9(0x21a)],_0x40fbeb=getClientsWithBotID('botmanager'),_0x153c5c=_0x16062e[_0x5d09d9(0x210)][_0x5d09d9(0x11b)],_0x4d992e=timelyDecrypt(_0x153c5c,![]),_0x2cc31a=_0x40fbeb[_0x5d09d9(0x293)](_0x3aeba6=>_0x3aeba6[_0x5d09d9(0x11b)]==_0x4d992e);if(_0x2cc31a){const _0x4fda77=normalizeIP(_0x16062e[_0x5d09d9(0x134)]['remoteAddress'])['store'],_0xe90e74=_0x16062e[_0x5d09d9(0x210)][_0x5d09d9(0x202)];if(validateAccess(_0xe90e74,_0x4d992e,_0x4fda77)[_0x5d09d9(0x27d)])_0x56ae9e==_0x5d09d9(0x298)&&await backupConfigFiles(),await zipFiles(_0x56ae9e),_0x103849[_0x5d09d9(0x203)](zippath+(_0x56ae9e+_0x5d09d9(0x2c1)),_0x73b8dc=>{const _0x23046b=_0x5d09d9;_0x73b8dc&&(logger[_0x23046b(0x2b5)](_0x23046b(0x215)+_0x56ae9e),logger[_0x23046b(0xee)](_0x73b8dc));});else logger[_0x5d09d9(0x2b5)](_0x5d09d9(0xeb)+_0x56ae9e+_0x5d09d9(0x29f));}else logger[_0x5d09d9(0x2b5)](_0x5d09d9(0xeb)+_0x56ae9e+_0x5d09d9(0x29e));}),app[_0xfadbea(0x1e2)]('/upload-backup',async(_0x253b88,_0x40c5a0)=>{const _0x3fcea0=_0xfadbea,_0x452474=getClientsWithBotID(_0x3fcea0(0x1c2)),_0x5a4c51=_0x253b88[_0x3fcea0(0x210)][_0x3fcea0(0x11b)],_0x433ec0=timelyDecrypt(_0x5a4c51,![]),_0x4771bc=_0x452474['find'](_0x1b68b1=>_0x1b68b1[_0x3fcea0(0x11b)]==_0x433ec0);logger['debug'](_0x3fcea0(0x155));if(_0x4771bc){const _0x50fb0e=normalizeIP(_0x253b88['socket'][_0x3fcea0(0xfd)])[_0x3fcea0(0x1f8)],_0x2b4f49=_0x253b88[_0x3fcea0(0x210)][_0x3fcea0(0x202)];if(validateAccess(_0x2b4f49,_0x433ec0,_0x50fb0e)['allow']){if(_0x253b88[_0x3fcea0(0x249)]){const _0x3f4338=_0x253b88[_0x3fcea0(0x249)][_0x3fcea0(0x153)];await _0x3f4338['mv'](temppath+_0x3f4338['name']),_0x40c5a0[_0x3fcea0(0x11f)]({'status':!![],'message':'File\x20uploaded'});const _0x56b8a1=getBotsWithMode();_0x56b8a1[_0x3fcea0(0x10b)]>0x0?confirmRestore(temppath,_0x3f4338['name']):unzipFile(temppath,_0x3f4338[_0x3fcea0(0x1e3)]);}}else logger[_0x3fcea0(0x2b5)](_0x3fcea0(0x135));}else logger[_0x3fcea0(0x2b5)](_0x3fcea0(0x198));}),app[_0xfadbea(0x18e)](express[_0xfadbea(0x1a0)](path['join'](__dirname,bbpath2,_0xfadbea(0x213)))),app[_0xfadbea(0x18e)](express[_0xfadbea(0x1a0)](path[_0xfadbea(0x1c5)](__dirname,bbpath2,_0xfadbea(0x2cb)))),app['get']('/',function(_0x249c6f,_0x44ab50){const _0x480e49=_0xfadbea;_0x44ab50[_0x480e49(0x230)](path[_0x480e49(0x1c5)](__dirname,bbpath2,'build2','index.html'));}),app[_0xfadbea(0x2d9)]('/:bot',function(_0xeca3a2,_0x1f2ac5){const _0x5a0135=_0xfadbea;_0x1f2ac5[_0x5a0135(0x230)](path[_0x5a0135(0x1c5)](__dirname,bbpath2,'build',_0x5a0135(0x255)));}),app[_0xfadbea(0x2d9)](_0xfadbea(0x2e7),(_0x1edb2d,_0x35c37a)=>{const _0x279838=_0xfadbea;_0x35c37a['sendFile'](path[_0x279838(0x1c5)](__dirname,bbpath2,'build',_0x279838(0x255)));}),app[_0xfadbea(0x2d9)](_0xfadbea(0x127),(_0x55bb91,_0x363793)=>{const _0x7920a1=_0xfadbea;_0x363793['sendFile'](path['join'](__dirname,bbpath2,_0x7920a1(0x2cb),_0x7920a1(0x255)));}),app['get'](_0xfadbea(0x22b),(_0x436b8a,_0x20060c)=>{const _0x5a73fe=_0xfadbea;_0x20060c['sendFile'](path[_0x5a73fe(0x1c5)](__dirname,bbpath2,_0x5a73fe(0x2cb),_0x5a73fe(0x255)));}),app[_0xfadbea(0x2d9)](_0xfadbea(0x106),(_0x2670bd,_0x1794ad)=>{const _0x42d904=_0xfadbea;_0x1794ad[_0x42d904(0x230)](path[_0x42d904(0x1c5)](__dirname,bbpath2,_0x42d904(0x2cb),'index.html'));}),app[_0xfadbea(0x2d9)](_0xfadbea(0x209),(_0x37f558,_0x11719f)=>{const _0xdc0f80=_0xfadbea;_0x11719f[_0xdc0f80(0x230)](path[_0xdc0f80(0x1c5)](__dirname,bbpath2,_0xdc0f80(0x2cb),_0xdc0f80(0x255)));}),app[_0xfadbea(0x2d9)](_0xfadbea(0x2e3),(_0x23bccc,_0x2d4b74)=>{const _0x3e0a3c=_0xfadbea;_0x2d4b74[_0x3e0a3c(0x230)](path[_0x3e0a3c(0x1c5)](__dirname,bbpath2,_0x3e0a3c(0x2cb),_0x3e0a3c(0x255)));});if(HOST)http[_0xfadbea(0x274)](PORT,HOST);else http[_0xfadbea(0x274)](PORT);const io=require(_0xfadbea(0x13c))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x3bf74d=_0xfadbea;let _0x27a8c3=_0x3bf74d(0x10c);const _0x49871e=networkInterfaces(),_0x37210c={};for(const _0x406d54 of Object[_0x3bf74d(0xf5)](_0x49871e)){for(const _0xdb35f5 of _0x49871e[_0x406d54]){if((_0xdb35f5[_0x3bf74d(0x10e)]==_0x3bf74d(0x20f)||_0xdb35f5['family']==0x4)&&!_0xdb35f5[_0x3bf74d(0x2a5)]){const _0x42c700=ipaddr[_0x3bf74d(0x185)](_0xdb35f5[_0x3bf74d(0x1a9)])[_0x3bf74d(0x291)]();_0x42c700!=_0x3bf74d(0x1be)&&(!_0x37210c[_0x406d54]&&(_0x37210c[_0x406d54]=[]),_0x37210c[_0x406d54][_0x3bf74d(0x2bd)](_0xdb35f5['address']),_0x27a8c3=_0xdb35f5[_0x3bf74d(0x1a9)]);}}}return{'serverip':_0x27a8c3,'netinterfaces':_0x37210c};}async function startServer(){const _0x37aaf9=_0xfadbea,{serverip:_0x2384ce,netinterfaces:_0xc26bf6}=getServerIP();logger['simple'](''),logger[_0x37aaf9(0xee)]('-----------------------------------------------------------------------------------'),await logger[_0x37aaf9(0x2b5)](_0x37aaf9(0x1d1)+serverversion+'#RES#\x20'+(environment==_0x37aaf9(0x269)?_0x37aaf9(0x17b):'')+'\x0a'+(_0x37aaf9(0x107)+PORT+_0x37aaf9(0x235))+('=>\x20Go\x20to\x20#CYA#http://'+_0x2384ce+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x37aaf9(0xee)](_0x37aaf9(0x250));if(config[_0x37aaf9(0x10b)]!=0x0)for(const _0x2d75ed of config){const _0x13fb06=_0x2d75ed[_0x37aaf9(0x17a)]=='auto'?'a':'m';if(_0x2d75ed['status']==_0x37aaf9(0x20b)||_0x2d75ed[_0x37aaf9(0x28b)]==_0x37aaf9(0x10d))await logger[_0x37aaf9(0x2b5)](_0x37aaf9(0x2ca)+_0x13fb06+_0x37aaf9(0x1c0)+_0x2d75ed[_0x37aaf9(0x25c)]+_0x37aaf9(0x101)+_0x2d75ed['botname']),startBot([_0x2d75ed['botID'],userID],{'cwd':bbpath},function(_0x191b91){const _0x234eef=_0x37aaf9;if(_0x191b91)logger[_0x234eef(0x2b5)](_0x191b91);});else(_0x2d75ed[_0x37aaf9(0x28b)]==_0x37aaf9(0x2ef)||_0x2d75ed['status']=='new-disabled')&&await logger[_0x37aaf9(0x2b5)](_0x37aaf9(0x286)+_0x13fb06+')\x20\x20\x20|\x20Bot\x20'+_0x2d75ed['botID']+_0x37aaf9(0x101)+_0x2d75ed['botname']);}else!newBot&&logger[_0x37aaf9(0xee)](_0x37aaf9(0x15f));if(newBot)addBot();logger['simple'](_0x37aaf9(0x250)),logger[_0x37aaf9(0xee)](''),await logger[_0x37aaf9(0x12c)](_0x37aaf9(0x29a)+nodeversion),await logger[_0x37aaf9(0x12c)](_0x37aaf9(0x29c),_0xc26bf6);}function startSocket(){io['on']('connection',_0x12c28c=>{const _0x1a1083=_0x298e;let _0x8fbe84,_0x1d9f6f,_0x30c054,_0x1f6bb3,_0x7d318d;const _0x5552ae=_0x12c28c[_0x1a1083(0x266)][_0x1a1083(0x210)]['referer'];_0x1d9f6f=_0x5552ae['match'](/bot[0-9]{3}/);if(_0x1d9f6f)_0x30c054=_0x1d9f6f[0x0][_0x1a1083(0x1c6)](/[0-9]{3}/);if(_0x30c054)_0x8fbe84=_0x30c054[0x0];else _0x8fbe84='botmanager';const _0x2b4b7e=_0x12c28c[_0x1a1083(0x266)][_0x1a1083(0x188)][_0x1a1083(0x129)];if(!_0x2b4b7e)_0x12c28c[_0x1a1083(0x27c)](_0x1a1083(0x28b),{'publicKey':secure[_0x1a1083(0x156)]});else{_0x1f6bb3=timelyDecrypt(_0x2b4b7e,![]);if(!_0x1f6bb3)_0x12c28c[_0x1a1083(0x27c)]('status',{'publicKey':secure[_0x1a1083(0x156)]});else{_0x7d318d=normalizeIP(_0x12c28c['conn'][_0x1a1083(0xfd)])[_0x1a1083(0x1f8)];if(!devices[_0x1f6bb3])devices[_0x1f6bb3]={'uuid':_0x1f6bb3,'access':{'token':null}};devices[_0x1f6bb3]['ip']=_0x7d318d;const _0x2eca41=addClient(_0x12c28c['id'],_0x1f6bb3,_0x8fbe84);setAccess(_0x2eca41),emitMessages(),_0x12c28c['on'](_0x1a1083(0x200),_0x143ddf=>{const _0x116969=_0x1a1083,_0x53b042=timelyDecrypt(_0x143ddf[_0x116969(0x223)]);if(_0x53b042){_0x143ddf={'username':_0x143ddf[_0x116969(0x1e0)],'password':_0x53b042},devices[_0x1f6bb3][_0x116969(0xef)]=validateCredentials(_0x143ddf,_0x1f6bb3);if(devices[_0x1f6bb3][_0x116969(0xef)]['allow']==![]&&devices[_0x1f6bb3][_0x116969(0xef)][_0x116969(0x190)]==_0x116969(0x1bf))_0x12c28c[_0x116969(0x27c)](_0x116969(0x28b),{'access':devices[_0x1f6bb3][_0x116969(0xef)]}),loginAccess2FA(_0x1f6bb3,_0x7d318d);else{if(devices[_0x1f6bb3][_0x116969(0xef)]['allow']==![]&&devices[_0x1f6bb3]['access'][_0x116969(0x190)]=='invalid\x20credentials')_0x12c28c[_0x116969(0x27c)]('status',{'access':devices[_0x1f6bb3][_0x116969(0xef)]});else devices[_0x1f6bb3][_0x116969(0xef)][_0x116969(0x27d)]&&devices[_0x1f6bb3][_0x116969(0xef)][_0x116969(0x190)]==_0x116969(0x1c3)&&(getClientsWithUuid(_0x1f6bb3)[_0x116969(0x100)](_0x55ee91=>{setAccess(_0x55ee91);}),logger[_0x116969(0x12c)](_0x116969(0x141)+_0x1f6bb3[_0x116969(0x261)](-0x8)),setTokenRefresh(_0x1f6bb3),setSessionTimeout(_0x116969(0x200),_0x1f6bb3));}}else logger[_0x116969(0x2b5)](_0x116969(0x1f0));}),_0x12c28c['on']('reset-password',()=>{resetPassword();}),_0x12c28c['on'](_0x1a1083(0x238),_0x3b0709=>{removeClient(_0x12c28c['id']);}),_0x8fbe84==_0x1a1083(0x1c2)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x27eecc){const _0x227330=_0xfadbea;if(_0x27eecc!='botmanager'&&config[_0x227330(0x13a)]!=''){if(pid[_0x27eecc])pid[_0x27eecc]['send']({'function':_0x227330(0xed),'args':null});}_0x27eecc!=_0x227330(0x1c2)&&broadcastToBots('bots',JSON[_0x227330(0x2aa)](config));}function reloadBotManager(){const _0x23c684=_0xfadbea;getClientsWithBotID(_0x23c684(0x1c2))[_0x23c684(0x100)](_0xb321e9=>{const _0x409b53=_0x23c684;getSocket(_0xb321e9['id'])[_0x409b53(0x27c)](_0x409b53(0x28b),{'access':{'allow':![],'reason':_0x409b53(0x242),'token':null}});});}function getSocket(_0x3f095a){const _0x1e2d4f=_0xfadbea;return io[_0x1e2d4f(0x2e1)][_0x1e2d4f(0x2e1)]['get'](_0x3f095a);}function setAccess(_0xe4c8f4){const _0x3e62cb=_0xfadbea,_0xbae5f5=getSocket(_0xe4c8f4['id']),_0x25ee42=_0xe4c8f4['uuid'],_0xee2bd9=_0xe4c8f4[_0x3e62cb(0x10a)];devices[_0x25ee42][_0x3e62cb(0xef)]=validateAccess(devices[_0x25ee42]['access'][_0x3e62cb(0x149)],_0x25ee42),logger['debug'](_0x3e62cb(0x2e0)+devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x190)]+_0x3e62cb(0x2e2)+_0xe4c8f4['id'][_0x3e62cb(0x261)](-0x8)+_0x3e62cb(0x23f)+_0x25ee42[_0x3e62cb(0x261)](-0x8)),_0xbae5f5['join'](_0x25ee42);if(devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x27d)]){_0xbae5f5['join'](_0xee2bd9);if(_0xee2bd9==_0x3e62cb(0x1c2))initializeSocketBotManager(_0xbae5f5);else initializeSocketBot(_0xbae5f5);initClient(_0xee2bd9);}devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x149)]&&devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x190)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x3e62cb(0x17e),_0x25ee42),devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x149)]&&devices[_0x25ee42]['access'][_0x3e62cb(0x190)]==_0x3e62cb(0x19a)&&setSessionTimeout(_0x3e62cb(0x200),_0x25ee42),_0xbae5f5[_0x3e62cb(0x27c)](_0x3e62cb(0x28b),{'status':_0xe4c8f4['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x25ee42][_0x3e62cb(0xef)],'externalip':devices[_0x25ee42]['ip'],'publicKey':secure[_0x3e62cb(0x156)],'userid':settings[_0x3e62cb(0x2b8)],'validInstallation':validInstallation}),devices[_0x25ee42]['access'][_0x3e62cb(0x27d)]==![]&&devices[_0x25ee42][_0x3e62cb(0xef)][_0x3e62cb(0x190)]==_0x3e62cb(0x14e)&&temporaryAccess2FA(_0x25ee42,devices[_0x25ee42]['ip']);}function setSessionTimeout(_0x4f992f,_0x1917ac){const _0x215631=_0xfadbea;let _0x54e87a;if(_0x4f992f==_0x215631(0x200))_0x54e87a=loginExpiry*0x3c*0x3e8;else _0x54e87a=devices[_0x1917ac]['telegramIpApproval'][_0x215631(0x21f)]*0x3c*0x3e8-(new Date()[_0x215631(0x1c1)]()-devices[_0x1917ac][_0x215631(0x1b7)]['timestamp']);if(devices[_0x1917ac][_0x215631(0x2b9)])clearTimeout(devices[_0x1917ac][_0x215631(0x2b9)]);devices[_0x1917ac][_0x215631(0x2b9)]=setTimeout(()=>{const _0x15b323=_0x215631;if(devices[_0x1917ac][_0x15b323(0x168)])clearTimeout(devices[_0x1917ac][_0x15b323(0x168)]);removeSocketListeners(_0x1917ac),addBlacklist(_0x1917ac),devices[_0x1917ac][_0x15b323(0x1b7)]=null,devices[_0x1917ac]['telegram2FaApproval']=null,devices[_0x1917ac][_0x15b323(0xef)][_0x15b323(0x149)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x1917ac[_0x15b323(0x261)](-0x8)),devices[_0x1917ac]['access']=validateAccess(devices[_0x1917ac][_0x15b323(0xef)][_0x15b323(0x149)],_0x1917ac),!(devices[_0x1917ac][_0x15b323(0xef)][_0x15b323(0x27d)]&&devices[_0x1917ac][_0x15b323(0xef)][_0x15b323(0x190)]==_0x15b323(0x2ec))&&(_0x4f992f=='login'?io['to'](_0x1917ac)[_0x15b323(0x27c)](_0x15b323(0x28b),{'access':{'allow':![],'reason':_0x15b323(0x22c),'token':null}}):io['to'](_0x1917ac)[_0x15b323(0x27c)](_0x15b323(0x28b),{'access':{'allow':![],'reason':_0x15b323(0x2ad),'token':null}})),devices[_0x1917ac]['access'][_0x15b323(0x149)]=null;},_0x54e87a);}function setTokenRefresh(_0x323559){const _0x2a5d3e=_0xfadbea;if(devices[_0x323559]['pidRefreshToken'])clearTimeout(devices[_0x323559][_0x2a5d3e(0x168)]);devices[_0x323559]['pidRefreshToken']=setTimeout(()=>{const _0xd5a3cc=_0x2a5d3e;getClientsWithUuid(_0x323559)[_0xd5a3cc(0x10b)]!=0x0?(devices[_0x323559][_0xd5a3cc(0xef)]=refreshToken(_0x323559),io['to'](_0x323559)[_0xd5a3cc(0x27c)](_0xd5a3cc(0x28b),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x323559][_0xd5a3cc(0xef)],'externalip':devices[_0x323559]['ip'],'publicKey':secure[_0xd5a3cc(0x156)],'validInstallation':validInstallation}),setTokenRefresh(_0x323559)):clearTimeout(devices[_0x323559][_0xd5a3cc(0x168)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x87d057){const _0x568faa=_0xfadbea,_0x19483c=getClient(_0x87d057['id'])[_0x568faa(0x11b)];_0x87d057['emit'](_0x568faa(0x103),config),_0x87d057[_0x568faa(0x27c)](_0x568faa(0x1a1),cleanSettings()),_0x87d057['on'](_0x568faa(0xff),_0x24c2b6=>{const _0x56d19d=_0x568faa;if(validateAccess(_0x24c2b6,_0x19483c)[_0x56d19d(0x27d)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x87d057['on'](_0x568faa(0x119),(_0x470f2a,_0x486fa1)=>{const _0x260a2d=_0x568faa;if(validateAccess(_0x486fa1,_0x19483c)[_0x260a2d(0x27d)])toggleBot(_0x470f2a[_0x260a2d(0x25c)],_0x470f2a[_0x260a2d(0x28b)],_0x470f2a[_0x260a2d(0x117)]);else logger['full'](_0x260a2d(0x133));}),_0x87d057['on'](_0x568faa(0x2cd),(_0x1a6ee7,_0x470022)=>{const _0x377ab1=_0x568faa;if(validateAccess(_0x470022,_0x19483c)[_0x377ab1(0x27d)])toggleBotMode(_0x1a6ee7);else logger[_0x377ab1(0x2b5)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x87d057['on'](_0x568faa(0x18b),(_0x53093f,_0x37c318)=>{const _0x1b876e=_0x568faa;if(validateAccess(_0x37c318,_0x19483c)[_0x1b876e(0x27d)])deleteBot(_0x53093f);else logger[_0x1b876e(0x2b5)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x87d057['on']('store-settings',(_0x3c419e,_0x25f599)=>{const _0x2b4dd7=_0x568faa;if(validateAccess(_0x25f599,_0x19483c)[_0x2b4dd7(0x27d)])storeSettings(_0x3c419e,!![]);else logger[_0x2b4dd7(0x2b5)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x87d057['on'](_0x568faa(0x22e),_0x4ebff8=>{const _0x3a319e=_0x568faa;if(validateAccess(_0x4ebff8,_0x19483c)['allow'])updateBB(_0x3a319e(0x1a4));else logger['full'](_0x3a319e(0x28e));}),_0x87d057['on'](_0x568faa(0x1cc),_0x160765=>{const _0x2c3560=_0x568faa;if(validateAccess(_0x160765,_0x19483c)['allow'])updateBB(_0x2c3560(0x294));else logger[_0x2c3560(0x2b5)](_0x2c3560(0x24e));}),_0x87d057['on'](_0x568faa(0x131),_0x31b344=>{const _0x1c7812=_0x568faa;if(validateAccess(_0x31b344,_0x19483c)['allow']){const _0x277258=getClient(_0x87d057['id']);if(_0x277258)getBackupFiles(_0x277258[_0x1c7812(0x11b)]);else logger['full'](_0x1c7812(0x1b2));}else logger['full'](_0x1c7812(0x199));}),_0x87d057['on'](_0x568faa(0x11d),(_0x1fefec,_0x3b9294)=>{const _0x22234b=_0x568faa;if(validateAccess(_0x3b9294,_0x19483c)[_0x22234b(0x27d)])restoreBackupFile(_0x1fefec);else logger['full'](_0x22234b(0x208));}),_0x87d057['on'](_0x568faa(0x139),_0x444dd8=>{const _0x1b36ac=_0x568faa;if(validateAccess(_0x444dd8,_0x19483c)[_0x1b36ac(0x27d)])getMessages();else logger[_0x1b36ac(0x2b5)](_0x1b36ac(0x18c));}),_0x87d057['on'](_0x568faa(0x11a),(_0x2f7b60,_0x509491)=>{const _0x304b66=_0x568faa;if(validateAccess(_0x509491,_0x19483c)['allow'])confirmMessage(_0x2f7b60);else logger[_0x304b66(0x2b5)](_0x304b66(0x1ce));}),_0x87d057['on']('logout',_0x2e808d=>{const _0x426967=_0x568faa;if(validateAccess(_0x2e808d,_0x19483c)[_0x426967(0x27d)]){if(devices[_0x19483c][_0x426967(0x168)])clearTimeout(devices[_0x19483c]['pidRefreshToken']);if(devices[_0x19483c][_0x426967(0x2b9)])clearTimeout(devices[_0x19483c][_0x426967(0x2b9)]);removeSocketListeners(getClient(_0x87d057['id'])[_0x426967(0x11b)]),addBlacklist(_0x19483c),devices[_0x19483c][_0x426967(0x1b7)]=null,devices[_0x19483c][_0x426967(0x2b0)]=null,devices[_0x19483c][_0x426967(0xef)][_0x426967(0x149)]=null,logger[_0x426967(0x12c)](_0x426967(0x1b3)+_0x19483c[_0x426967(0x261)](-0x8)),io['to'](getClient(_0x87d057['id'])[_0x426967(0x11b)])[_0x426967(0x27c)](_0x426967(0x28b),{'access':{'allow':![],'reason':_0x426967(0x1e5),'token':null}});}else logger[_0x426967(0x2b5)](_0x426967(0x2d3));});}function initializeSocketBot(_0x4ef114){const _0x2e6633=_0xfadbea,_0x1b33c9=getClient(_0x4ef114['id'])[_0x2e6633(0x10a)],_0xebbc46=getClient(_0x4ef114['id'])[_0x2e6633(0x11b)];_0x4ef114['on'](_0x2e6633(0x180),(_0x3a42c5,_0x54d63a)=>{const _0x3dfef9=_0x2e6633;if(validateAccess(_0x54d63a,_0xebbc46)[_0x3dfef9(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x3dfef9(0x11f)]({'function':_0x3dfef9(0x132),'args':_0x3a42c5});}else logger[_0x3dfef9(0x2b5)](_0x3dfef9(0x2d0));}),_0x4ef114['on'](_0x2e6633(0x14d),(_0x230392,_0xa3a5)=>{const _0x1851b7=_0x2e6633;if(validateAccess(_0xa3a5,_0xebbc46)['allow']){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x1851b7(0x11f)]({'function':_0x1851b7(0x226),'args':_0x230392});}else logger[_0x1851b7(0x2b5)](_0x1851b7(0x105));}),_0x4ef114['on'](_0x2e6633(0x1c9),(_0x54bdf3,_0x5d932a)=>{const _0x1f0e26=_0x2e6633;if(validateAccess(_0x5d932a,_0xebbc46)[_0x1f0e26(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x1f0e26(0x11f)]({'function':'getPortfolio','args':_0x54bdf3});}else logger[_0x1f0e26(0x2b5)](_0x1f0e26(0x2b6));}),_0x4ef114['on'](_0x2e6633(0x20e),(_0x1ce22b,_0x3e0df9)=>{const _0x4ab088=_0x2e6633;if(validateAccess(_0x3e0df9,_0xebbc46)[_0x4ab088(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x4ab088(0x11f)]({'function':_0x4ab088(0x2a9),'args':_0x1ce22b});}else logger['full'](_0x4ab088(0x24f));}),_0x4ef114['on'](_0x2e6633(0x15d),(_0x2ff3ca,_0x5a3b31)=>{const _0x320c74=_0x2e6633;if(validateAccess(_0x5a3b31,_0xebbc46)['allow']){if(pid[_0x1b33c9])pid[_0x1b33c9]['send']({'function':'storeHeadless','args':_0x2ff3ca});}else logger[_0x320c74(0x2b5)](_0x320c74(0x1fc));}),_0x4ef114['on'](_0x2e6633(0x1ea),(_0x5bc53a,_0x540c8a)=>{const _0x3996dd=_0x2e6633;if(validateAccess(_0x540c8a,_0xebbc46)['allow']){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x3996dd(0x11f)]({'function':'storeFiat','args':_0x5bc53a});}else logger[_0x3996dd(0x2b5)](_0x3996dd(0x26b));}),_0x4ef114['on']('reset-history',_0xeef18=>{const _0x20d209=_0x2e6633;if(validateAccess(_0xeef18,_0xebbc46)[_0x20d209(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x20d209(0x11f)]({'function':_0x20d209(0x224),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x4ef114['on'](_0x2e6633(0x1d5),_0x1f7312=>{const _0x459e27=_0x2e6633;if(validateAccess(_0x1f7312,_0xebbc46)[_0x459e27(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x459e27(0x11f)]({'function':_0x459e27(0x1f4),'args':null});}else logger[_0x459e27(0x2b5)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4ef114['on'](_0x2e6633(0x140),(_0x52445e,_0x324649)=>{const _0x58d51c=_0x2e6633;if(validateAccess(_0x324649,_0xebbc46)[_0x58d51c(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x58d51c(0x11f)]({'function':_0x58d51c(0x194),'args':_0x52445e});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x4ef114['on'](_0x2e6633(0x220),_0x27983d=>{const _0x5e2683=_0x2e6633;if(validateAccess(_0x27983d,_0xebbc46)[_0x5e2683(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x5e2683(0x11f)]({'function':_0x5e2683(0x216),'args':null});}else logger['full'](_0x5e2683(0x12a));}),_0x4ef114['on'](_0x2e6633(0x1e6),_0x1d766a=>{const _0x4e2ebd=_0x2e6633;if(validateAccess(_0x1d766a,_0xebbc46)[_0x4e2ebd(0x27d)]){if(pid[_0x1b33c9])pid[_0x1b33c9][_0x4e2ebd(0x11f)]({'function':_0x4e2ebd(0x1ee),'args':null});}else logger[_0x4e2ebd(0x2b5)](_0x4e2ebd(0x265));}),_0x4ef114['on'](_0x2e6633(0x22e),_0x592c15=>{const _0x3cd5b2=_0x2e6633;if(validateAccess(_0x592c15,_0xebbc46)[_0x3cd5b2(0x27d)])updateBB(_0x3cd5b2(0x1a4));else logger[_0x3cd5b2(0x2b5)](_0x3cd5b2(0x28e));}),_0x4ef114['on']('get-messages',_0x199f62=>{const _0x5ee45d=_0x2e6633;if(validateAccess(_0x199f62,_0xebbc46)['allow'])getMessages();else logger[_0x5ee45d(0x2b5)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4ef114['on'](_0x2e6633(0x11a),(_0x33ffa9,_0xcc274)=>{const _0xd91050=_0x2e6633;if(validateAccess(_0xcc274,_0xebbc46)['allow'])confirmMessage(_0x33ffa9);else logger[_0xd91050(0x2b5)](_0xd91050(0x1ce));}),_0x4ef114['on']('logout',_0x412cab=>{const _0x64a303=_0x2e6633;if(validateAccess(_0x412cab,_0xebbc46)[_0x64a303(0x27d)]){if(devices[_0xebbc46]['pidRefreshToken'])clearTimeout(devices[_0xebbc46]['pidRefreshToken']);if(devices[_0xebbc46][_0x64a303(0x2b9)])clearTimeout(devices[_0xebbc46]['pidExpireLogin']);removeSocketListeners(getClient(_0x4ef114['id'])[_0x64a303(0x11b)]),addBlacklist(_0xebbc46),devices[_0xebbc46][_0x64a303(0x1b7)]=null,devices[_0xebbc46][_0x64a303(0x2b0)]=null,devices[_0xebbc46][_0x64a303(0xef)]['token']=null,logger[_0x64a303(0x12c)](_0x64a303(0x1b3)+_0xebbc46[_0x64a303(0x261)](-0x8)),io['to'](getClient(_0x4ef114['id'])[_0x64a303(0x11b)])[_0x64a303(0x27c)](_0x64a303(0x28b),{'access':{'allow':![],'reason':_0x64a303(0x1e5),'token':null}});}else logger[_0x64a303(0x2b5)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x521ad3){getClientsWithUuid(_0x521ad3)['forEach'](_0x4a4b8a=>{const _0x283723=_0x298e;getSocket(_0x4a4b8a['id'])[_0x283723(0x2e6)]();});}function cleanSettings(){const _0x1cd2c1=_0xfadbea;let _0x2cf619=settings;return settings[_0x1cd2c1(0x26c)]&&settings[_0x1cd2c1(0x26c)]!=''&&(_0x2cf619={..._0x2cf619,'telegramToken':_0x1cd2c1(0x1fb)}),settings[_0x1cd2c1(0x2c3)]&&settings['bbPassword']!=''&&(_0x2cf619={..._0x2cf619,'bbPassword':_0x1cd2c1(0x1fb)}),(settings['bbPassword']&&settings[_0x1cd2c1(0x2c3)]==_0x1cd2c1(0x1ca)||settings[_0x1cd2c1(0x26c)]&&settings[_0x1cd2c1(0x26c)]==_0x1cd2c1(0x1ca))&&(_0x2cf619={..._0x2cf619,'restored':{'password':settings[_0x1cd2c1(0x2c3)]==_0x1cd2c1(0x1ca),'telegram':settings[_0x1cd2c1(0x26c)]=='***'}}),_0x2cf619;}async function updateBB(_0x536c0c){const _0x1fe185=_0xfadbea;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x3a94c4=>{const _0x32083a=_0x298e;restartBot(_0x3a94c4[_0x32083a(0x25c)]);});if(_0x536c0c=='update')process[_0x1fe185(0x11f)]({'update':!![],'environment':environment},_0x4d8f85=>{});else _0x536c0c==_0x1fe185(0x294)&&process[_0x1fe185(0x11f)]({'reinstall':!![],'environment':environment},_0x4448f7=>{});}function startBot(_0x50e91e,_0x54ce76,_0x16eb45){const _0xc2196=_0xfadbea;if(debugging)_0x50e91e[_0xc2196(0x2bd)]('-d');let _0x3cfb40=![];const _0xeb24e7=_0x50e91e[0x0];_0x54ce76={..._0x54ce76,'stdio':[_0xc2196(0x2c7),_0xc2196(0x2c7),_0xc2196(0x2c7),_0xc2196(0x16f)]},pid[_0xeb24e7]=childProcess[_0xc2196(0x1da)](botfile,_0x50e91e,_0x54ce76),pid[_0xeb24e7]['on'](_0xc2196(0x1fe),_0x5cb00a=>{const _0xe330c0=_0xc2196;switch(Object[_0xe330c0(0xf5)](_0x5cb00a)[0x0]){case _0xe330c0(0x2c2):updateBotName(_0xeb24e7,_0x5cb00a[_0xe330c0(0x2c2)]);break;case'updatebotmanager':updateBotManager();break;case _0xe330c0(0x28b):updateStatus(_0xeb24e7,_0x5cb00a[_0xe330c0(0x28b)]);break;case _0xe330c0(0x117):updateLive(_0xeb24e7,_0x5cb00a[_0xe330c0(0x117)]);break;case _0xe330c0(0x137):updateLive(_0xeb24e7,_0x5cb00a['started']),io['to'](_0xeb24e7)[_0xe330c0(0x27c)](_0xe330c0(0x28b),{'access':{'allow':![],'reason':_0xe330c0(0x242),'token':null}});break;case _0xe330c0(0x256):_0x5cb00a['stop']==_0xe330c0(0x2d5)&&restartBot(_0xeb24e7);_0x5cb00a[_0xe330c0(0x256)]==_0xe330c0(0x2d4)&&toggleBot(_0xeb24e7,_0xe330c0(0x2ef),'stopped');break;case _0xe330c0(0x2df):sendTelegramBot(_0xeb24e7,_0x5cb00a[_0xe330c0(0x2df)]);break;case _0xe330c0(0x19e):sendTelegramMsg(_0x5cb00a[_0xe330c0(0x19e)]);break;case _0xe330c0(0x1f2):io['to'](_0xeb24e7)[_0xe330c0(0x27c)](_0x5cb00a[_0xe330c0(0x1f2)],_0x5cb00a[_0xe330c0(0x154)]);break;}}),pid[_0xeb24e7]['on'](_0xc2196(0x1d6),function(_0xc735db){if(_0x3cfb40)return;_0x3cfb40=!![],_0x16eb45(_0xc735db);}),pid[_0xeb24e7]['on']('exit',async function(_0x2e1b6a){const _0x3dd272=_0xc2196;if(terminating)return;if(installingUpdate){logger[_0x3dd272(0x12c)](_0x3dd272(0x29b)),io[_0x3dd272(0x2dd)]();return;}if(_0x3cfb40)return;_0x3cfb40=!![],_0x16eb45(null);const _0x413b43=dbConfig[_0x3dd272(0x2d9)](_0x3dd272(0x103))[_0x3dd272(0x293)]({'botID':_0xeb24e7})[_0x3dd272(0x287)]();_0x413b43&&(_0x413b43[_0x3dd272(0x28b)]==_0x3dd272(0x20b)||_0x413b43[_0x3dd272(0x28b)]==_0x3dd272(0x10d))&&(await sleep(0x3e8),updateLive(_0xeb24e7,_0x3dd272(0x1e4)),logger[_0x3dd272(0x2b5)](_0x3dd272(0x17f)+_0xeb24e7),startBot([_0xeb24e7,userID],{'cwd':bbpath},function(_0x1156d5){const _0x386e7a=_0x3dd272;if(_0x1156d5)logger[_0x386e7a(0x2b5)](_0x1156d5);}));});}function stopBot(_0x377bee){const _0x25be3e=_0xfadbea;getClientsWithBotID(_0x377bee)[_0x25be3e(0x100)](_0x53e68d=>{const _0x420bd5=_0x25be3e;getSocket(_0x53e68d['id'])[_0x420bd5(0x238)](!![]),removeClient(_0x53e68d['id']);}),pid[_0x377bee]&&(pid[_0x377bee][_0x25be3e(0x2d4)](),pid[_0x377bee]=null);}function stopAllBots(){terminating=!![];const _0x26a939=getEnabledBots();_0x26a939['forEach'](_0x35b778=>{stopBot(_0x35b778['botID']);});}function restartBot(_0x16e068){const _0x262979=_0xfadbea;if(pid[_0x16e068])pid[_0x16e068][_0x262979(0x2d4)]();}function addBot(){const _0x296f92=_0xfadbea;let _0x48ab87;for(let _0x2ee47d=0x1;_0x2ee47d<0x3e9;_0x2ee47d++){_0x48ab87=_0x2ee47d['toString']()[_0x296f92(0x177)](0x3,'0');let _0x16cdcf=config[_0x296f92(0x293)](_0x4da887=>_0x4da887[_0x296f92(0x25c)]==_0x48ab87);if(!_0x16cdcf)break;}if(_0x48ab87===_0x296f92(0x186)){logger[_0x296f92(0x2b5)](_0x296f92(0x2db));return;}logger[_0x296f92(0x2b5)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x48ab87),dbConfig[_0x296f92(0x2d9)]('bots')[_0x296f92(0x2bd)]({'botID':_0x48ab87,'botname':_0x296f92(0x1e9)+_0x48ab87,'status':_0x296f92(0x10d),'live':''})[_0x296f92(0x1b4)](),startBot([_0x48ab87,userID],{'cwd':bbpath},function(_0x3ebc6e){const _0x5ba64a=_0x296f92;if(_0x3ebc6e)logger[_0x5ba64a(0x2b5)](_0x3ebc6e);}),config=getConfiguration(),io['to'](_0x296f92(0x1c2))['emit']('bots',config),broadcastToBots(_0x296f92(0x103),JSON[_0x296f92(0x2aa)](config));}function deleteBot(_0x4b5f8e){const _0x2bef92=_0xfadbea;getClientsWithBotID(_0x4b5f8e)['forEach'](_0x744d96=>{const _0x7b0704=_0x298e;getSocket(_0x744d96['id'])[_0x7b0704(0x238)](!![]),removeClient(_0x744d96['id']);}),dbConfig[_0x2bef92(0x2d9)](_0x2bef92(0x103))[_0x2bef92(0x23d)]({'botID':_0x4b5f8e})[_0x2bef92(0x1b4)](),logger[_0x2bef92(0x2b5)]('Deleted\x20Bot\x20'+_0x4b5f8e),stopBot(_0x4b5f8e);try{if(fs[_0x2bef92(0x2b3)](path[_0x2bef92(0x1c5)](configpath,'bot-'+_0x4b5f8e+_0x2bef92(0x169))))fs[_0x2bef92(0x2e8)](path['join'](configpath,_0x2bef92(0x277)+_0x4b5f8e+_0x2bef92(0x169)));if(fs[_0x2bef92(0x2b3)](path['join'](configpath,_0x2bef92(0x277)+_0x4b5f8e+_0x2bef92(0x108))))fs[_0x2bef92(0x2e8)](path['join'](configpath,'bot-'+_0x4b5f8e+_0x2bef92(0x108)));if(fs[_0x2bef92(0x2b3)](path[_0x2bef92(0x1c5)](configpath,_0x2bef92(0x277)+_0x4b5f8e+_0x2bef92(0x2d7))))fs[_0x2bef92(0x2e8)](path[_0x2bef92(0x1c5)](configpath,_0x2bef92(0x277)+_0x4b5f8e+_0x2bef92(0x2d7)));if(fs['existsSync'](path[_0x2bef92(0x1c5)](configpath,_0x2bef92(0x277)+_0x4b5f8e+_0x2bef92(0x26e))))fs['unlinkSync'](path[_0x2bef92(0x1c5)](configpath,'bot-'+_0x4b5f8e+_0x2bef92(0x26e)));}catch(_0x1efe4d){if(_0x1efe4d)logger['full'](_0x2bef92(0x236),_0x1efe4d);}config=getConfiguration(),io['to'](_0x2bef92(0x1c2))[_0x2bef92(0x27c)]('bots',config),broadcastToBots('bots',JSON[_0x2bef92(0x2aa)](config));}function toggleBot(_0x2489ef,_0x50bd2a,_0x408112){const _0x5a57fc=_0xfadbea;dbConfig[_0x5a57fc(0x2d9)](_0x5a57fc(0x103))[_0x5a57fc(0x293)]({'botID':_0x2489ef})[_0x5a57fc(0x2de)]({'status':_0x50bd2a})[_0x5a57fc(0x2de)]({'live':_0x408112})[_0x5a57fc(0x1b4)]();if(_0x50bd2a=='enabled'||_0x50bd2a=='new')logger['full'](_0x5a57fc(0x172)+_0x2489ef),startBot([_0x2489ef,userID],{'cwd':bbpath},function(_0x3dacef){const _0xb892f8=_0x5a57fc;if(_0x3dacef)logger[_0xb892f8(0x2b5)](_0x3dacef);});else(_0x50bd2a==_0x5a57fc(0x2ef)||_0x50bd2a==_0x5a57fc(0x13e))&&(logger[_0x5a57fc(0x2b5)](_0x5a57fc(0x2be)+_0x2489ef),stopBot(_0x2489ef));config=getConfiguration(),io['to'](_0x5a57fc(0x1c2))[_0x5a57fc(0x27c)](_0x5a57fc(0x103),config),broadcastToBots(_0x5a57fc(0x103),JSON[_0x5a57fc(0x2aa)](config));}function toggleStatus(_0x19b978){const _0x1e0aad=_0xfadbea;let _0x22e79e=dbConfig[_0x1e0aad(0x2d9)](_0x1e0aad(0x103))[_0x1e0aad(0x293)]({'botID':_0x19b978})[_0x1e0aad(0x287)](),_0x551072;if(_0x22e79e[_0x1e0aad(0x28b)]===_0x1e0aad(0x20b))_0x551072=_0x1e0aad(0x2ef);else{if(_0x22e79e[_0x1e0aad(0x28b)]===_0x1e0aad(0x10d))_0x551072='new-disabled';else{if(_0x22e79e[_0x1e0aad(0x28b)]==='new-disabled')_0x551072=_0x1e0aad(0x10d);else{if(_0x22e79e[_0x1e0aad(0x28b)]===_0x1e0aad(0x2ef))_0x551072=_0x1e0aad(0x20b);}}}return _0x551072;}function updateStatus(_0xfb64a7,_0xb4f128){const _0x2e32c2=_0xfadbea;dbConfig[_0x2e32c2(0x2d9)](_0x2e32c2(0x103))['find']({'botID':_0xfb64a7})['assign']({'status':_0xb4f128})['write'](),config=getConfiguration(),io['to'](_0x2e32c2(0x1c2))[_0x2e32c2(0x27c)](_0x2e32c2(0x103),config),broadcastToBots(_0x2e32c2(0x103),JSON[_0x2e32c2(0x2aa)](config));}function updateLive(_0x7f7b52,_0x10865b){const _0xb50a97=_0xfadbea;dbConfig[_0xb50a97(0x2d9)](_0xb50a97(0x103))[_0xb50a97(0x293)]({'botID':_0x7f7b52})[_0xb50a97(0x2de)]({'live':_0x10865b})[_0xb50a97(0x1b4)](),config=getConfiguration(),io['to'](_0xb50a97(0x1c2))[_0xb50a97(0x27c)](_0xb50a97(0x103),config),broadcastToBots('bots',JSON[_0xb50a97(0x2aa)](config));}function updateBotName(_0x331604,_0x2e4275){const _0x44a356=_0xfadbea;dbConfig['get']('bots')[_0x44a356(0x293)]({'botID':_0x331604})[_0x44a356(0x2de)]({'botname':_0x2e4275})[_0x44a356(0x1b4)](),config=getConfiguration(),io['to'](_0x44a356(0x1c2))[_0x44a356(0x27c)]('bots',config),broadcastToBots(_0x44a356(0x103),JSON[_0x44a356(0x2aa)](config));}function updateBotManager(){const _0x475e2a=_0xfadbea;config=getConfiguration(),io['to'](_0x475e2a(0x1c2))[_0x475e2a(0x27c)](_0x475e2a(0x103),config),broadcastToBots(_0x475e2a(0x103),JSON[_0x475e2a(0x2aa)](config));}function toggleBotMode(_0x388dc7){const _0x273ca5=_0xfadbea;if(pid[_0x388dc7])pid[_0x388dc7][_0x273ca5(0x11f)]({'function':_0x273ca5(0x175),'args':null});else{const _0x6b2ae8=configpath+_0x273ca5(0x277)+_0x388dc7+'-config.json',_0x422843=fs['readFileSync'](_0x6b2ae8),_0x383fb5=JSON[_0x273ca5(0x185)](_0x422843),_0x4e76f4=_0x383fb5[_0x273ca5(0x10a)][0x0]['headless'];_0x383fb5['bot'][0x0][_0x273ca5(0x142)]=!_0x4e76f4;const _0x3501be=JSON[_0x273ca5(0x2aa)](_0x383fb5,null,0x2);fs[_0x273ca5(0x1f6)](_0x6b2ae8,_0x3501be),config=getConfiguration(),io['to'](_0x273ca5(0x1c2))[_0x273ca5(0x27c)](_0x273ca5(0x103),config),broadcastToBots(_0x273ca5(0x103),JSON[_0x273ca5(0x2aa)](config));}}function validateTelegram(_0x4871ae){const _0x1647e3=_0xfadbea;if(_0x4871ae[_0x1647e3(0x178)][_0x1647e3(0x1e0)]!=settings[_0x1647e3(0x1bb)]&&'@'+_0x4871ae[_0x1647e3(0x178)][_0x1647e3(0x1e0)]!=settings[_0x1647e3(0x1bb)]||_0x4871ae[_0x1647e3(0x170)]['id']!=settings[_0x1647e3(0x29d)])return sendTelegram(_0x4871ae[_0x1647e3(0x170)]['id'],_0x1647e3(0x1a3),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x5ca908=_0xfadbea;if(tgBot)tgBot[_0x5ca908(0x256)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x5ca908(0x26c)]);let _0x40ccaa=_0x5ca908(0x1c7);_0x40ccaa+='\x0a',_0x40ccaa+=_0x5ca908(0x25a),_0x40ccaa+=_0x5ca908(0x18f),_0x40ccaa+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x40ccaa+=_0x5ca908(0x160),_0x40ccaa+=_0x5ca908(0x197),_0x40ccaa+=_0x5ca908(0x148),_0x40ccaa+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x40ccaa+=_0x5ca908(0x2a1),_0x40ccaa+=_0x5ca908(0x24c),_0x40ccaa+=_0x5ca908(0x2af),_0x40ccaa+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x40ccaa+=_0x5ca908(0x26a),_0x40ccaa+=_0x5ca908(0x1e7),_0x40ccaa+=_0x5ca908(0x187);let _0x5374b8='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5374b8+='\x0a',_0x5374b8+=_0x40ccaa,tgBot[_0x5ca908(0x23c)]((_0x1e9864,_0x1b7f24)=>{const _0x21da51=_0x5ca908;logger['simple'](getTimeStamp()+_0x21da51(0x11c)),logger['debug'](_0x21da51(0x2bc),_0x1e9864);}),tgBot[_0x5ca908(0x18e)](async(_0x4689b4,_0x4841de)=>{const _0x55a891=_0x5ca908;if(!(!settings[_0x55a891(0x29d)]&&_0x4689b4[_0x55a891(0x1a4)][_0x55a891(0x1fe)][_0x55a891(0x1ad)]==_0x55a891(0x195))){if(!validateTelegram(_0x4689b4))return;}_0x4841de();}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x12b),async _0x14aa01=>{const _0x385578=_0x5ca908;if(!settings[_0x385578(0x29d)])updateSetting(_0x385578(0x29d),_0x14aa01['chat']['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x14aa01))return;await sendTelegram(_0x14aa01[_0x385578(0x170)]['id'],_0x5374b8);}),tgBot['command'](_0x5ca908(0x258),async _0x2869e0=>{const _0x5224c4=_0x5ca908;updateSetting(_0x5224c4(0x27b),!![]),await sendTelegram(_0x2869e0['chat']['id'],_0x5224c4(0x1b0));}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x18d),async _0x544461=>{const _0x464ff9=_0x5ca908;await sendTelegram(_0x544461[_0x464ff9(0x170)]['id'],_0x464ff9(0x20d)),updateSetting(_0x464ff9(0x27b),![]);}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x17c),async _0x164b04=>{const _0x127a9b=_0x5ca908,_0x421e07=Markup[_0x127a9b(0x1d0)]([Markup[_0x127a9b(0xf0)][_0x127a9b(0x284)]('Orders',_0x127a9b(0x167)),Markup[_0x127a9b(0xf0)][_0x127a9b(0x284)](_0x127a9b(0x252),_0x127a9b(0x272)),Markup[_0x127a9b(0xf0)][_0x127a9b(0x284)](_0x127a9b(0x204),_0x127a9b(0x2b7))]);_0x164b04[_0x127a9b(0x21d)](_0x127a9b(0x10f),_0x421e07);}),tgBot[_0x5ca908(0x126)](_0x5ca908(0x167),async _0x13cade=>{const _0x1c7aff=_0x5ca908;_0x13cade['editMessageReplyMarkup'](),updateSetting(_0x1c7aff(0x145),'orders'),updateSetting(_0x1c7aff(0x27b),!![]),await sendTelegram(_0x13cade[_0x1c7aff(0x170)]['id'],_0x1c7aff(0x1ae));}),tgBot['action']('config_alerts',async _0x4263c5=>{const _0x2be35b=_0x5ca908;_0x4263c5[_0x2be35b(0x110)](),updateSetting(_0x2be35b(0x145),_0x2be35b(0x296)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4263c5[_0x2be35b(0x170)]['id'],_0x2be35b(0x1cf));}),tgBot[_0x5ca908(0x126)]('config_all',async _0x2667c4=>{const _0x4be0d9=_0x5ca908;_0x2667c4[_0x4be0d9(0x110)](),updateSetting(_0x4be0d9(0x145),_0x4be0d9(0x16b)),updateSetting(_0x4be0d9(0x27b),!![]),await sendTelegram(_0x2667c4[_0x4be0d9(0x170)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x28b),async _0x3a2ffe=>{const _0x252b90=_0x5ca908,_0x35da21=getBotsWithMode();let _0x551f6c='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x252b90(0x100)](_0x4e79bd=>{const _0x493464=_0x252b90,_0x45091b=_0x35da21[_0x493464(0x293)](_0x4d6703=>_0x4d6703[_0x493464(0x25c)]==_0x4e79bd[_0x493464(0x25c)])[_0x493464(0x17a)];_0x551f6c+='Bot\x20'+_0x4e79bd[_0x493464(0x25c)]+':\x20'+_0x4e79bd[_0x493464(0x28b)]+_0x493464(0x101)+_0x45091b+_0x493464(0x101)+_0x4e79bd[_0x493464(0x117)]+'\x0a';}),_0x551f6c+='\x0a',_0x551f6c+=_0x252b90(0x15b),_0x551f6c+=!settings[_0x252b90(0x27b)]?_0x252b90(0x138):_0x252b90(0xfb),_0x551f6c+=settings[_0x252b90(0x27b)]?settings[_0x252b90(0x145)]==_0x252b90(0x16b)?_0x252b90(0x19f):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x252b90(0x207):'',await sendTelegram(_0x3a2ffe[_0x252b90(0x170)]['id'],_0x551f6c,{'parse_mode':_0x252b90(0x259)});}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x2d5),async _0x3e1807=>{const _0x4dfbb7=_0x5ca908,_0x1a63b4=getEnabledBots();if(_0x1a63b4[_0x4dfbb7(0x10b)]==0x0)await sendTelegram(_0x3e1807[_0x4dfbb7(0x170)]['id'],_0x4dfbb7(0x2a7));else{if(_0x1a63b4[_0x4dfbb7(0x10b)]>0x1)_0x1a63b4[_0x4dfbb7(0x2bd)]({'botID':'all'});let _0x2bf8e7=[],_0x1520d5=[];const _0x10bfca=_0x1a63b4[_0x4dfbb7(0x10b)]%0x4==0x0||_0x1a63b4[_0x4dfbb7(0x10b)]%0x4==0x3||_0x1a63b4[_0x4dfbb7(0x10b)]%0x3==0x1?0x4:0x3;let _0x16d13d=0x0;_0x1a63b4[_0x4dfbb7(0x100)]((_0x2154e7,_0x4d1e2b)=>{const _0x11b749=_0x4dfbb7;if(_0x4d1e2b%_0x10bfca==0x0)_0x1520d5=[];_0x1520d5[_0x11b749(0x2bd)](Markup[_0x11b749(0xf0)][_0x11b749(0x284)](_0x2154e7[_0x11b749(0x25c)]==_0x11b749(0x16b)?_0x11b749(0x16a):_0x11b749(0x1e9)+_0x2154e7[_0x11b749(0x25c)],_0x11b749(0x244)+_0x2154e7[_0x11b749(0x25c)])),_0x4d1e2b%_0x10bfca==0x0&&(_0x2bf8e7[_0x16d13d]=_0x1520d5,_0x16d13d++);});const _0x41aa4d=Markup[_0x4dfbb7(0x1d0)](_0x2bf8e7);_0x3e1807[_0x4dfbb7(0x21d)](_0x4dfbb7(0x21b),_0x41aa4d);}}),tgBot[_0x5ca908(0x126)](/restart_(.+)/,async _0x2c2a4d=>{const _0x53c4f8=_0x5ca908,_0x22a7ad=_0x2c2a4d[_0x53c4f8(0x1c6)][0x1];_0x2c2a4d[_0x53c4f8(0x110)](),_0x22a7ad==_0x53c4f8(0x16b)?config['forEach'](_0x51956f=>{const _0x534107=_0x53c4f8;restartBot(_0x51956f[_0x534107(0x25c)]);}):restartBot(_0x22a7ad);}),tgBot['command']('on',async _0x1189dc=>{const _0x5d767b=_0x5ca908,_0x4c3b18=getDisabledBots();if(_0x4c3b18[_0x5d767b(0x10b)]==0x0)await sendTelegram(_0x1189dc[_0x5d767b(0x170)]['id'],_0x5d767b(0x228));else{if(_0x4c3b18[_0x5d767b(0x10b)]>0x1)_0x4c3b18[_0x5d767b(0x2bd)]({'botID':_0x5d767b(0x16b)});let _0x5022f0=[],_0x55c6d5=[];const _0x6944b4=_0x4c3b18['length']%0x4==0x0||_0x4c3b18[_0x5d767b(0x10b)]%0x4==0x3||_0x4c3b18[_0x5d767b(0x10b)]%0x3==0x1?0x4:0x3;let _0xf620c2=0x0;_0x4c3b18[_0x5d767b(0x100)]((_0x52340e,_0x2b4137)=>{const _0x306bb2=_0x5d767b;if(_0x2b4137%_0x6944b4==0x0)_0x55c6d5=[];_0x55c6d5[_0x306bb2(0x2bd)](Markup['button'][_0x306bb2(0x284)](_0x52340e[_0x306bb2(0x25c)]=='all'?_0x306bb2(0x16a):_0x306bb2(0x1e9)+_0x52340e[_0x306bb2(0x25c)],_0x306bb2(0x196)+_0x52340e['botID'])),_0x2b4137%_0x6944b4==0x0&&(_0x5022f0[_0xf620c2]=_0x55c6d5,_0xf620c2++);});const _0x584d89=Markup[_0x5d767b(0x1d0)](_0x5022f0);_0x1189dc[_0x5d767b(0x21d)](_0x5d767b(0x1ab),_0x584d89);}}),tgBot['action'](/on_(.+)/,async _0x1ca2f9=>{const _0x341d4a=_0x5ca908,_0x2d7501=_0x1ca2f9['match'][0x1];_0x1ca2f9[_0x341d4a(0x110)]();if(_0x2d7501=='all'){const _0x1c098c=getDisabledBots();await sendTelegram(_0x1ca2f9[_0x341d4a(0x170)]['id'],_0x341d4a(0x25f)),_0x1c098c[_0x341d4a(0x100)](_0x1d6213=>{const _0x393b8c=_0x341d4a;if(_0x1d6213['botID']!=_0x393b8c(0x16b))toggleBot(_0x1d6213[_0x393b8c(0x25c)],toggleStatus(_0x1d6213[_0x393b8c(0x25c)]),_0x393b8c(0x1e4));});}else await sendTelegram(_0x1ca2f9[_0x341d4a(0x170)]['id'],_0x341d4a(0x243)+_0x2d7501),toggleBot(_0x2d7501,toggleStatus(_0x2d7501),_0x341d4a(0x1e4));}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x114),async _0x50811f=>{const _0x277707=_0x5ca908,_0x5368b1=getEnabledBots();if(_0x5368b1[_0x277707(0x10b)]==0x0)await sendTelegram(_0x50811f['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x5368b1['length']>0x1)_0x5368b1[_0x277707(0x2bd)]({'botID':'all'});let _0x1bff19=[],_0x40b6b6=[];const _0x281267=_0x5368b1['length']%0x4==0x0||_0x5368b1['length']%0x4==0x3||_0x5368b1[_0x277707(0x10b)]%0x3==0x1?0x4:0x3;let _0x260a52=0x0;_0x5368b1['forEach']((_0x1283c5,_0x4a874c)=>{const _0xe98813=_0x277707;if(_0x4a874c%_0x281267==0x0)_0x40b6b6=[];_0x40b6b6['push'](Markup['button'][_0xe98813(0x284)](_0x1283c5[_0xe98813(0x25c)]==_0xe98813(0x16b)?'All\x20bots':_0xe98813(0x1e9)+_0x1283c5['botID'],_0xe98813(0x2ed)+_0x1283c5[_0xe98813(0x25c)])),_0x4a874c%_0x281267==0x0&&(_0x1bff19[_0x260a52]=_0x40b6b6,_0x260a52++);});const _0x19ba95=Markup[_0x277707(0x1d0)](_0x1bff19);_0x50811f[_0x277707(0x21d)](_0x277707(0x13f),_0x19ba95);}}),tgBot[_0x5ca908(0x126)](/off_(.+)/,async _0x3f05c4=>{const _0x14be4e=_0x5ca908,_0x5336c1=_0x3f05c4['match'][0x1];_0x3f05c4[_0x14be4e(0x110)]();if(_0x5336c1==_0x14be4e(0x16b)){const _0x46f1f1=getEnabledBots();await sendTelegram(_0x3f05c4[_0x14be4e(0x170)]['id'],_0x14be4e(0x13d)),_0x46f1f1[_0x14be4e(0x100)](_0xcf805a=>{const _0x954b93=_0x14be4e;if(_0xcf805a['botID']!=_0x954b93(0x16b))toggleBot(_0xcf805a[_0x954b93(0x25c)],toggleStatus(_0xcf805a[_0x954b93(0x25c)]),_0x954b93(0x1e4));});}else await sendTelegram(_0x3f05c4[_0x14be4e(0x170)]['id'],_0x14be4e(0x239)+_0x5336c1),toggleBot(_0x5336c1,toggleStatus(_0x5336c1),_0x14be4e(0x1e4));}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x264),async _0x225c46=>{const _0x571c45=_0x5ca908,_0x27b7df=getEnabledBots();if(_0x27b7df['length']==0x0)await sendTelegram(_0x225c46[_0x571c45(0x170)]['id'],_0x571c45(0x2a7));else{if(_0x27b7df[_0x571c45(0x10b)]>0x1){let _0x32059a=[],_0x5f5be2=[];const _0x47fed1=_0x27b7df[_0x571c45(0x10b)]%0x4==0x0||_0x27b7df['length']%0x4==0x3||_0x27b7df[_0x571c45(0x10b)]%0x3==0x1?0x4:0x3;let _0x43bea4=0x0;_0x27b7df['forEach']((_0xef2a1e,_0x1b9dbd)=>{const _0x9bdadf=_0x571c45;if(_0x1b9dbd%_0x47fed1==0x0)_0x5f5be2=[];_0x5f5be2[_0x9bdadf(0x2bd)](Markup[_0x9bdadf(0xf0)][_0x9bdadf(0x284)](_0x9bdadf(0x1e9)+_0xef2a1e[_0x9bdadf(0x25c)],_0x9bdadf(0x15e)+_0xef2a1e[_0x9bdadf(0x25c)])),_0x1b9dbd%_0x47fed1==0x0&&(_0x32059a[_0x43bea4]=_0x5f5be2,_0x43bea4++);});const _0x4dac3c=Markup['inlineKeyboard'](_0x32059a);_0x225c46[_0x571c45(0x21d)](_0x571c45(0x14b),_0x4dac3c);}else{const _0x30d984=_0x27b7df[0x0]['botID'];if(pid[_0x30d984])pid[_0x30d984][_0x571c45(0x11f)]({'function':_0x571c45(0x257),'args':null});}}}),tgBot[_0x5ca908(0x126)](/metrics_(.+)/,async _0x4681bf=>{const _0x2c3b1a=_0x5ca908,_0x1cc2cc=_0x4681bf[_0x2c3b1a(0x1c6)][0x1];_0x4681bf[_0x2c3b1a(0x110)]();if(pid[_0x1cc2cc])pid[_0x1cc2cc][_0x2c3b1a(0x11f)]({'function':_0x2c3b1a(0x257),'args':null});}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x19c),async _0x52a127=>{const _0x295aca=_0x5ca908,_0x1bc119=getEnabledBots();if(_0x1bc119[_0x295aca(0x10b)]==0x0)await sendTelegram(_0x52a127['chat']['id'],_0x295aca(0x2a7));else{if(_0x1bc119[_0x295aca(0x10b)]>0x1){let _0x3c562a=[],_0xac01f4=[];const _0x381991=_0x1bc119[_0x295aca(0x10b)]%0x4==0x0||_0x1bc119[_0x295aca(0x10b)]%0x4==0x3||_0x1bc119['length']%0x3==0x1?0x4:0x3;let _0x499fd6=0x0;_0x1bc119[_0x295aca(0x100)]((_0x2e49c5,_0x58aa1d)=>{const _0x53d8a7=_0x295aca;if(_0x58aa1d%_0x381991==0x0)_0xac01f4=[];_0xac01f4[_0x53d8a7(0x2bd)](Markup[_0x53d8a7(0xf0)][_0x53d8a7(0x284)](_0x53d8a7(0x1e9)+_0x2e49c5[_0x53d8a7(0x25c)],_0x53d8a7(0x19d)+_0x2e49c5[_0x53d8a7(0x25c)])),_0x58aa1d%_0x381991==0x0&&(_0x3c562a[_0x499fd6]=_0xac01f4,_0x499fd6++);});const _0x2a1887=Markup[_0x295aca(0x1d0)](_0x3c562a);_0x52a127[_0x295aca(0x21d)](_0x295aca(0x1c8),_0x2a1887);}else{const _0x5ea9cc=_0x1bc119[0x0][_0x295aca(0x25c)];if(pid[_0x5ea9cc])pid[_0x5ea9cc][_0x295aca(0x11f)]({'function':_0x295aca(0x113),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x5b6529=>{const _0x181fe4=_0x5ca908,_0x2b23bb=_0x5b6529[_0x181fe4(0x1c6)][0x1];_0x5b6529[_0x181fe4(0x110)]();if(pid[_0x2b23bb])pid[_0x2b23bb][_0x181fe4(0x11f)]({'function':_0x181fe4(0x113),'args':null});}),tgBot['command'](_0x5ca908(0x1a4),async _0x20e09e=>{const _0x252d6e=_0x5ca908;await getMessages();if(!updateAvailable)await sendTelegram(_0x20e09e[_0x252d6e(0x170)]['id'],_0x252d6e(0x1aa));else{if(!validInstallation)await sendTelegram(_0x20e09e[_0x252d6e(0x170)]['id'],_0x252d6e(0x2e5));else{const _0x32faff=Markup[_0x252d6e(0x1d0)]([Markup[_0x252d6e(0xf0)]['callback'](_0x252d6e(0x2ab),'update_yes'),Markup['button'][_0x252d6e(0x284)]('No','update_no')]);_0x20e09e[_0x252d6e(0x21d)](_0x252d6e(0x271),_0x32faff);}}}),tgBot[_0x5ca908(0x126)](/update_(.+)/,async _0x473627=>{const _0x1a9298=_0x5ca908,_0x3a7d93=_0x473627[_0x1a9298(0x1c6)][0x1];_0x473627[_0x1a9298(0x110)](),_0x3a7d93==_0x1a9298(0x2d6)&&(await sendTelegram(_0x473627['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB('update')),_0x3a7d93=='no'&&await sendTelegram(_0x473627[_0x1a9298(0x170)]['id'],_0x1a9298(0x2b4));}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x294),async _0x5c95df=>{const _0x59829d=_0x5ca908;if(!validInstallation)await sendTelegram(_0x5c95df[_0x59829d(0x170)]['id'],_0x59829d(0x237));else{const _0x3687d5=Markup[_0x59829d(0x1d0)]([Markup['button']['callback'](_0x59829d(0x2ab),'reinstall_yes'),Markup['button'][_0x59829d(0x284)]('No',_0x59829d(0x150))]);_0x5c95df[_0x59829d(0x21d)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x3687d5);}}),tgBot[_0x5ca908(0x126)](/reinstall_(.+)/,async _0x2ebb27=>{const _0xbf1096=_0x5ca908,_0xc7f6e1=_0x2ebb27[_0xbf1096(0x1c6)][0x1];_0x2ebb27[_0xbf1096(0x110)](),_0xc7f6e1==_0xbf1096(0x2d6)&&(await sendTelegram(_0x2ebb27['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0xbf1096(0x294))),_0xc7f6e1=='no'&&await sendTelegram(_0x2ebb27[_0xbf1096(0x170)]['id'],_0xbf1096(0x161));}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x136),async _0x453b51=>{const _0x549b76=_0x5ca908,_0x2bcd3d=getBotsWithMode();if(_0x2bcd3d['length']==0x0)await sendTelegram(_0x453b51[_0x549b76(0x170)]['id'],_0x549b76(0x2a7));else{let _0x34b545=[],_0x281781=[];const _0x3db026=0x2;let _0x2efa3b=0x0;_0x2bcd3d[_0x549b76(0x100)]((_0x1e537c,_0x384bb5)=>{const _0x482152=_0x549b76;if(_0x384bb5%_0x3db026==0x0)_0x281781=[];_0x281781['push'](Markup[_0x482152(0xf0)][_0x482152(0x284)]('Bot\x20'+_0x1e537c[_0x482152(0x25c)]+'\x20('+_0x1e537c['mode']+')',_0x482152(0x248)+_0x1e537c['botID'])),_0x384bb5%_0x3db026==0x0&&(_0x34b545[_0x2efa3b]=_0x281781,_0x2efa3b++);});const _0x541deb=Markup[_0x549b76(0x1d0)](_0x34b545);_0x453b51['reply'](_0x549b76(0x159),_0x541deb);}}),tgBot[_0x5ca908(0x126)](/toggle_(.+)/,async _0x5aaf67=>{const _0x178f0e=_0x5ca908,_0x3f74e5=_0x5aaf67[_0x178f0e(0x1c6)][0x1];_0x5aaf67['editMessageReplyMarkup']();const _0x45eaff=getBotsWithMode(),_0x3e6786=_0x45eaff[_0x178f0e(0x293)](_0x42ec21=>_0x42ec21[_0x178f0e(0x25c)]==_0x3f74e5),_0x332d97=_0x3e6786['mode']==_0x178f0e(0x1a6)?_0x178f0e(0x191):'auto';await sendTelegram(_0x5aaf67[_0x178f0e(0x170)]['id'],_0x178f0e(0x275)+_0x3f74e5+_0x178f0e(0x1ff)+_0x332d97+_0x178f0e(0x201)),toggleBotMode(_0x3f74e5);}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x254),async _0x2a142d=>{const _0x48e384=_0x5ca908;let _0x5b1fac='';config[_0x48e384(0x100)](_0x3370de=>{const _0x5965f8=_0x48e384;_0x5b1fac+='Bot\x20'+_0x3370de[_0x5965f8(0x25c)]+':\x20'+_0x3370de[_0x5965f8(0x2c2)]+'\x0a';}),await sendTelegram(_0x2a142d[_0x48e384(0x170)]['id'],_0x5b1fac,{'parse_mode':_0x48e384(0x259)});}),tgBot[_0x5ca908(0x2e9)](_0x5ca908(0x218),async _0x298f99=>{const _0x4267a2=_0x5ca908;await sendTelegram(_0x298f99[_0x4267a2(0x170)]['id'],_0x40ccaa);}),process[_0x5ca908(0x143)](_0x5ca908(0x1f1),()=>tgBot['stop'](_0x5ca908(0x1f1))),process[_0x5ca908(0x143)](_0x5ca908(0x16e),()=>tgBot[_0x5ca908(0x256)](_0x5ca908(0x16e))),tgBot[_0x5ca908(0x24a)]();}}function disableTelegram(){const _0x46f4d8=_0xfadbea;tgBot&&tgBot[_0x46f4d8(0x256)]();}async function sendTelegram(_0x50ddf3,_0x553e97,_0x35cd7a){const _0x2e54c4=_0xfadbea;try{await tgBot[_0x2e54c4(0x2df)][_0x2e54c4(0x289)](_0x50ddf3,_0x553e97,_0x35cd7a);}catch(_0x4d857e){console[_0x2e54c4(0x212)]('Telegram\x20error:',_0x4d857e);}}async function sendTelegramBot(_0x494ec8,_0x27a5b4){const _0x2bdc18=_0xfadbea;if(settings[_0x2bdc18(0x27b)]){if(settings[_0x2bdc18(0x145)]==_0x2bdc18(0x16b)||(_0x27a5b4[_0x2bdc18(0x21a)]==_0x2bdc18(0x1d6)||_0x27a5b4[_0x2bdc18(0x21a)]==_0x2bdc18(0x23b)||_0x27a5b4[_0x2bdc18(0x21a)]==_0x2bdc18(0x183))&&settings[_0x2bdc18(0x145)]=='alerts'||_0x27a5b4[_0x2bdc18(0x21a)]==_0x2bdc18(0x184)&&settings[_0x2bdc18(0x145)]==_0x2bdc18(0x229)){if(tgBot&&settings[_0x2bdc18(0x29d)]){if(_0x27a5b4[_0x2bdc18(0x125)])await sendTelegram(settings[_0x2bdc18(0x29d)],_0x27a5b4[_0x2bdc18(0x2c2)]+'\x20>\x20'+_0x27a5b4['event']);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0x494ec8+_0x2bdc18(0x1b1)+_0x27a5b4[_0x2bdc18(0xf4)]);}}}}async function sendTelegramMsg(_0x5a749a,_0x94bb6c=_0xfadbea(0x259)){const _0x294eca=_0xfadbea;return settings['telegramEnabled']&&tgBot&&settings[_0x294eca(0x29d)]?(await sendTelegram(settings[_0x294eca(0x29d)],_0x5a749a,{'parse_mode':_0x94bb6c}),!![]):![];}function getDeviceWithIp(_0x13d018){const _0x41eb94=_0xfadbea;return devices[_0x41eb94(0x293)](_0x1cf9f9=>_0x1cf9f9['ip']===_0x13d018);}async function temporaryAccess2FA(_0x170333,_0x50e1e4){const _0x30f3e0=_0xfadbea;let _0x5bef80=new Date(),_0x51ce64=![];if(lastIpApproval){if(_0x5bef80-lastIpApproval<0x1388)_0x51ce64=!![];}lastIpApproval=new Date();if(_0x51ce64)return;if(tgBot&&settings[_0x30f3e0(0x29d)]){const _0xa842c1=uuidRandom();tmpStorage[_0xa842c1]={'uuid':_0x170333,'externalip':_0x50e1e4};const _0x34b161=Markup[_0x30f3e0(0x1d0)]([Markup[_0x30f3e0(0xf0)][_0x30f3e0(0x284)]('5\x20min',_0x30f3e0(0x2d1)+_0xa842c1),Markup['button'][_0x30f3e0(0x284)]('15\x20min',_0x30f3e0(0x2cf)+_0xa842c1),Markup[_0x30f3e0(0xf0)][_0x30f3e0(0x284)](_0x30f3e0(0x2e4),_0x30f3e0(0x111)+_0xa842c1),Markup['button'][_0x30f3e0(0x284)](_0x30f3e0(0x232),'tempaccess_reject_'+_0xa842c1)]);await sendTelegram(settings['telegramChatId'],_0x30f3e0(0x205)+normalizeIP(_0x50e1e4)[_0x30f3e0(0x20a)]+'\x20?',_0x34b161),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x4e745c=>{const _0x4f5cd5=_0x30f3e0,_0x4a5440=_0x4e745c['match'][0x1],_0x2a6166=_0x4e745c['match'][0x2],{uuid:_0xf1026b,externalip:_0x232475}=tmpStorage[_0x2a6166];delete tmpStorage[_0x2a6166],_0x4e745c['editMessageReplyMarkup'](),devices[_0xf1026b]['telegramIpApproval']={'clientip':_0x232475,'timestamp':new Date()[_0x4f5cd5(0x1c1)](),'expiry':_0x4a5440},_0x4a5440!=_0x4f5cd5(0x232)?(await sendTelegram(_0x4e745c[_0x4f5cd5(0x170)]['id'],_0x4f5cd5(0x15c)+_0x4a5440+_0x4f5cd5(0x262),{'parse_mode':_0x4f5cd5(0x259)}),io['to'](_0xf1026b)[_0x4f5cd5(0x27c)](_0x4f5cd5(0x28b),{'access':{'allow':![],'reason':_0x4f5cd5(0x242),'token':null}})):(await sendTelegram(_0x4e745c[_0x4f5cd5(0x170)]['id'],_0x4f5cd5(0x14a)),io['to'](_0xf1026b)[_0x4f5cd5(0x27c)](_0x4f5cd5(0x28b),{'access':{'allow':![],'reason':_0x4f5cd5(0xf1),'token':null}}));});}}async function loginAccess2FA(_0x66c715,_0x47c1cd){const _0x3a9ecb=_0xfadbea;if(tgBot&&settings[_0x3a9ecb(0x29d)]){const _0x4c8ef5=uuidRandom();tmpStorage[_0x4c8ef5]={'uuid':_0x66c715,'externalip':_0x47c1cd};const _0x236668=Markup[_0x3a9ecb(0x1d0)]([Markup[_0x3a9ecb(0xf0)][_0x3a9ecb(0x284)](_0x3a9ecb(0x26d),_0x3a9ecb(0x1d7)+loginExpiry+'_'+_0x4c8ef5),Markup[_0x3a9ecb(0xf0)]['callback'](_0x3a9ecb(0x232),_0x3a9ecb(0x2c9)+_0x4c8ef5)]);await sendTelegram(settings[_0x3a9ecb(0x29d)],_0x3a9ecb(0x22d)+normalizeIP(_0x47c1cd)['show']+'\x20?',_0x236668),tgBot[_0x3a9ecb(0x126)](/login2fa_(.+)_(.+)/,async _0x5912ed=>{const _0x22fa9f=_0x3a9ecb,_0x287c33=_0x5912ed[_0x22fa9f(0x1c6)][0x1],_0xcd3418=_0x5912ed['match'][0x2],{uuid:_0x506530,externalip:_0x627ac2}=tmpStorage[_0xcd3418];delete tmpStorage[_0xcd3418],_0x5912ed[_0x22fa9f(0x110)](),devices[_0x506530]['telegram2FaApproval']={'clientip':_0x627ac2,'timestamp':new Date()['getTime'](),'expiry':_0x287c33},_0x287c33!=_0x22fa9f(0x232)?(await sendTelegram(_0x5912ed[_0x22fa9f(0x170)]['id'],_0x22fa9f(0x225),{'parse_mode':_0x22fa9f(0x259)}),io['to'](_0x506530)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x5912ed[_0x22fa9f(0x170)]['id'],_0x22fa9f(0x2c5)),io['to'](_0x506530)[_0x22fa9f(0x27c)]('status',{'access':{'allow':![],'reason':_0x22fa9f(0x2da),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2df43d=_0xfadbea;return dbConfig[_0x2df43d(0x2d9)]('bots')[_0x2df43d(0x1fd)]('botID')[_0x2df43d(0x2ae)]({'status':_0x2df43d(0x20b)})[_0x2df43d(0x287)]()||[];}function getDisabledBots(){const _0x40db7a=_0xfadbea;return dbConfig[_0x40db7a(0x2d9)](_0x40db7a(0x103))[_0x40db7a(0x1fd)](_0x40db7a(0x25c))[_0x40db7a(0x2ae)]({'status':'disabled'})[_0x40db7a(0x287)]()||[];}function getBotAttributes(_0x4ecc95){const _0x4c747c=_0xfadbea;let _0x3c968c={};const _0x16b28d=configpath+_0x4c747c(0x277)+_0x4ecc95+_0x4c747c(0x169),_0x4cabc0=fs[_0x4c747c(0x2b3)](_0x16b28d);if(_0x4cabc0){const _0x410bde=fs[_0x4c747c(0x13b)](_0x16b28d);try{const _0x2caecb=JSON[_0x4c747c(0x185)](_0x410bde),_0x374d98=_0x2caecb?_0x2caecb[_0x4c747c(0x10a)][0x0][_0x4c747c(0x142)]:![];_0x3c968c[_0x4c747c(0x17a)]=_0x374d98?_0x4c747c(0x1a6):'manual',_0x3c968c['botname']=_0x2caecb?_0x2caecb['bot'][0x0][_0x4c747c(0x2c2)]:_0x4c747c(0x1e9)+_0x4ecc95;}catch(_0x4a2aa7){_0x3c968c[_0x4c747c(0x17a)]=_0x4c747c(0x191),_0x3c968c['botname']='Bot\x20'+_0x4ecc95;}}else _0x3c968c[_0x4c747c(0x17a)]=_0x4c747c(0x191),_0x3c968c[_0x4c747c(0x2c2)]='Bot\x20'+_0x4ecc95;return _0x3c968c;}function getBotsWithMode(){const _0x4c8900=_0xfadbea,_0x1604db=dbConfig['get'](_0x4c8900(0x103))[_0x4c8900(0x1fd)](_0x4c8900(0x25c))['value']()||[];return _0x1604db[_0x4c8900(0x100)](_0x4231f1=>{const _0x827969=_0x4c8900;let _0x71db4b=getBotAttributes(_0x4231f1[_0x827969(0x25c)]);_0x4231f1[_0x827969(0x17a)]=_0x71db4b['mode'];}),_0x1604db;}function getBotExchanges(){const _0x499b7a=_0xfadbea;let _0xcc95e1=[];const _0x5c926e=dbConfig[_0x499b7a(0x2d9)](_0x499b7a(0x103))[_0x499b7a(0x1fd)](_0x499b7a(0x25c))[_0x499b7a(0x287)]()||[];_0x5c926e['forEach'](_0x3ef213=>{const _0x5cf970=_0x499b7a;if(_0x3ef213['status']==_0x5cf970(0x20b)){const _0x47f6ce=configpath+'bot-'+_0x3ef213[_0x5cf970(0x25c)]+'-config.json',_0x3baa2e=fs[_0x5cf970(0x2b3)](_0x47f6ce);let _0x15dae4;if(_0x3baa2e){const _0x5323a8=fs['readFileSync'](_0x47f6ce);try{const _0x1c2e98=JSON[_0x5cf970(0x185)](_0x5323a8);_0x15dae4=_0x1c2e98?_0x1c2e98[_0x5cf970(0x10a)][0x0]['exchange']:null;}catch(_0x2d7f24){}}if(_0x15dae4)_0xcc95e1['push'](_0x15dae4);}});const _0x1bbbdf=[...new Set(_0xcc95e1)][_0x499b7a(0x290)]();return _0x1bbbdf;}async function initUser(){const _0x3521f9=_0xfadbea;if(!settings[_0x3521f9(0x2b8)]){const _0x58336b=uuidRandom();mixpanel[_0x3521f9(0x234)](_0x58336b),updateSetting(_0x3521f9(0x2b8),_0x58336b);}}async function initSecure(){const _0x18dcee=_0xfadbea;let _0x3218d1=getSecure();if(!_0x3218d1[_0x18dcee(0x1fa)](_0x18dcee(0x273))){let _0x5968d7=await generateKeys();_0x3218d1[_0x18dcee(0x156)]=_0x5968d7[_0x18dcee(0x156)],_0x3218d1[_0x18dcee(0x2c4)]=_0x5968d7[_0x18dcee(0x2c4)],_0x3218d1['secret']=crypto[_0x18dcee(0x166)](0x20)['toString'](_0x18dcee(0x2dc));;storeSecure(_0x3218d1);}}function getSettings(){const _0x213c46=_0xfadbea;return dbSettings[_0x213c46(0x2d9)](_0x213c46(0x1a1))[_0x213c46(0x287)]()||{};}function getSecure(){const _0x2472c6=_0xfadbea;return dbSecure[_0x2472c6(0x2d9)](_0x2472c6(0x2bf))['value']()||{};}function getBlacklist(){const _0x2466f5=_0xfadbea;return dbSecure[_0x2466f5(0x2d9)](_0x2466f5(0x222))[_0x2466f5(0x287)]()||[];}function broadcastToBots(_0x117983,_0x41f86a){const _0x217e8b=_0xfadbea;config[_0x217e8b(0x100)](_0x9c6f96=>{const _0x416990=_0x217e8b;if(_0x9c6f96[_0x416990(0x28b)]==_0x416990(0x20b)&&_0x9c6f96[_0x416990(0x117)]==_0x416990(0x1ba)||_0x9c6f96['status']==_0x416990(0x10d)&&_0x9c6f96[_0x416990(0x117)]==_0x416990(0x1ba)){if(pid[_0x9c6f96['botID']])pid[_0x9c6f96['botID']][_0x416990(0x11f)]({[_0x117983]:_0x41f86a});}});}function storeSettings(_0x56b8fe,_0x52aff4=![]){const _0x33b9a4=_0xfadbea;_0x56b8fe={...settings,..._0x56b8fe};if(_0x52aff4&&_0x56b8fe['bbPassword']!=_0x33b9a4(0x1fb)&&_0x56b8fe[_0x33b9a4(0x2c3)]!='***'&&_0x56b8fe[_0x33b9a4(0x2c3)]!=''){const _0x337706=crypt[_0x33b9a4(0x27e)](secure[_0x33b9a4(0x2c4)],_0x56b8fe['bbPassword'])[_0x33b9a4(0x1fe)][_0x33b9a4(0x25d)]('@')[0x0],_0x27bdee=bcrypt[_0x33b9a4(0x253)](_0x337706,saltRounds);_0x56b8fe={..._0x56b8fe,'bbPassword':_0x27bdee};}if(_0x52aff4&&_0x56b8fe[_0x33b9a4(0x26c)]!=_0x33b9a4(0x1fb)&&_0x56b8fe[_0x33b9a4(0x26c)]!='***'&&_0x56b8fe[_0x33b9a4(0x26c)]!=''){const _0x526cd9=crypt[_0x33b9a4(0x27e)](secure[_0x33b9a4(0x2c4)],_0x56b8fe[_0x33b9a4(0x26c)])[_0x33b9a4(0x1fe)]['split']('@')[0x0];_0x56b8fe={..._0x56b8fe,'telegramToken':_0x526cd9};}const _0x25cd11=_0x56b8fe[_0x33b9a4(0x26c)]!=_0x33b9a4(0x1fb)&&_0x56b8fe[_0x33b9a4(0x26c)]!=settings[_0x33b9a4(0x26c)]||_0x56b8fe[_0x33b9a4(0x1bb)]!=settings[_0x33b9a4(0x1bb)],_0x5494cf=_0x56b8fe['telegramToken']==''||_0x56b8fe[_0x33b9a4(0x1bb)]=='';_0x25cd11&&(_0x56b8fe[_0x33b9a4(0x29d)]=null,_0x56b8fe[_0x33b9a4(0x145)]=_0x33b9a4(0x16b));for(const [_0x57b3ac,_0x4d0b0c]of Object[_0x33b9a4(0x279)](_0x56b8fe)){if(_0x57b3ac=='telegramToken'&&_0x4d0b0c=='************'){_0x56b8fe[_0x33b9a4(0x26c)]=settings[_0x33b9a4(0x26c)];continue;};if(_0x57b3ac==_0x33b9a4(0x2c3)&&_0x4d0b0c==_0x33b9a4(0x1fb)){_0x56b8fe[_0x33b9a4(0x2c3)]=settings['bbPassword'];continue;};dbSettings['set'](_0x33b9a4(0x18a)+_0x57b3ac,_0x4d0b0c)[_0x33b9a4(0x1b4)]();}settings=_0x56b8fe,io['to'](_0x33b9a4(0x1c2))[_0x33b9a4(0x27c)](_0x33b9a4(0x1a1),cleanSettings()),broadcastToBots('timeshift',settings[_0x33b9a4(0x1b8)]),broadcastToBots(_0x33b9a4(0x221),settings[_0x33b9a4(0x221)]);if(_0x25cd11&&!_0x5494cf)initTelegram();if(_0x25cd11&&_0x5494cf)disableTelegram();getAllClients()[_0x33b9a4(0x100)](_0x41b365=>{const _0x210d68=_0x33b9a4;getSocket(_0x41b365['id'])['emit']('status',{'access':{'allow':![],'reason':_0x210d68(0x242),'token':null}});});}function updateSetting(_0x12fa98,_0x58f74d){const _0x9004d6=_0xfadbea;dbSettings[_0x9004d6(0x11e)]('settings.'+_0x12fa98,_0x58f74d)[_0x9004d6(0x1b4)](),settings=getSettings(),io['to'](_0x9004d6(0x1c2))[_0x9004d6(0x27c)](_0x9004d6(0x1a1),cleanSettings());}function storeSecure(_0x1362e2){const _0x47834f=_0xfadbea;dbSecure[_0x47834f(0x2d9)](_0x47834f(0x2bf))[_0x47834f(0x2bd)](_0x1362e2)['write'](),secure=_0x1362e2;}function addBlacklist(_0x10f16e){const _0x5a6492=_0xfadbea;cleanBlacklist();let _0x270ada;devices[_0x10f16e][_0x5a6492(0x1b7)]?_0x270ada=Math['max'](devices[_0x10f16e][_0x5a6492(0x1b7)][_0x5a6492(0x21f)],loginExpiry):_0x270ada=loginExpiry,dbSecure[_0x5a6492(0x2d9)](_0x5a6492(0x222))[_0x5a6492(0x2bd)]({'expiry':new Date()[_0x5a6492(0x1c1)]()+_0x270ada*0x3c*0x3e8,'token':devices[_0x10f16e]['access']['token']})[_0x5a6492(0x1b4)](),blacklist=dbSecure['get'](_0x5a6492(0x222))[_0x5a6492(0x287)]();}function cleanBlacklist(){const _0x6644f9=_0xfadbea;let _0x1964d0=dbSecure[_0x6644f9(0x2d9)](_0x6644f9(0x222))[_0x6644f9(0x102)]()[_0x6644f9(0x287)](),_0x363302=new Date()[_0x6644f9(0x1c1)]();_0x1964d0[_0x6644f9(0x100)](_0x9d8f3b=>{const _0x5ef2b2=_0x6644f9;_0x9d8f3b[_0x5ef2b2(0x21f)]<_0x363302&&dbSecure[_0x5ef2b2(0x2d9)](_0x5ef2b2(0x222))[_0x5ef2b2(0x23d)]({'expiry':_0x9d8f3b['expiry']})[_0x5ef2b2(0x1b4)]();});}function initStates(){let _0x4585d3=getConfiguration();_0x4585d3['forEach'](_0x4d078e=>{const _0x31b940=_0x298e;_0x4d078e[_0x31b940(0x117)]=_0x31b940(0x1e4);}),storeConfiguration(_0x4585d3);}function onKeys(){const _0x2e60ef=new RSA();return new Promise(_0x248086=>{const _0x2855c1=_0x298e;_0x2e60ef[_0x2855c1(0x171)]()['then'](_0x1c2cba=>{_0x248086(_0x1c2cba);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x249099=_0xfadbea;let _0x3aeeea=getSettings(),_0x29a64c=![];!_0x3aeeea[_0x249099(0x1fa)](_0x249099(0x2bb))&&(_0x3aeeea[_0x249099(0x2bb)]=0x0,_0x29a64c=!![]);!_0x3aeeea[_0x249099(0x1fa)](_0x249099(0x241))&&(_0x3aeeea[_0x249099(0x241)]=0x0,_0x29a64c=!![]);!_0x3aeeea[_0x249099(0x1fa)](_0x249099(0xfc))&&(_0x3aeeea[_0x249099(0xfc)]=_0x249099(0x211),_0x29a64c=!![]);!_0x3aeeea[_0x249099(0x1fa)](_0x249099(0x221))&&(_0x3aeeea['onepagemode']=![],_0x29a64c=!![]);if(_0x29a64c)storeSettings(_0x3aeeea);try{fs[_0x249099(0x1db)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x38912b=>{const _0x5c4df7=_0x249099;if(!_0x38912b[_0x5c4df7(0x2d8)]()){if(!_0x38912b[_0x5c4df7(0x1e3)][_0x5c4df7(0x182)](_0x5c4df7(0x2a6)))fs[_0x5c4df7(0x2e8)](configbackuppath+_0x38912b[_0x5c4df7(0x1e3)]);}else fs[_0x5c4df7(0x112)](configbackuppath+_0x38912b['name'],{'recursive':!![]});});}catch(_0x1a0f94){logger['debug'](_0x249099(0x122),_0x1a0f94);}}function storeConfiguration(_0xdec608){const _0x4d79a8=_0xfadbea;dbConfig[_0x4d79a8(0x2d9)](_0x4d79a8(0x103))['remove']()['write'](),dbConfig['get'](_0x4d79a8(0x103))[_0x4d79a8(0x2bd)](..._0xdec608)['write'](),config=_0xdec608;}async function resetPassword(){const _0x346b0f=_0xfadbea;if(tgBot&&settings['telegramChatId']){const _0x5dcf22=Markup[_0x346b0f(0x1d0)]([Markup[_0x346b0f(0xf0)][_0x346b0f(0x284)](_0x346b0f(0x2d6),'resetpw_yes'),Markup[_0x346b0f(0xf0)][_0x346b0f(0x284)]('no',_0x346b0f(0x28c))]);await sendTelegram(settings[_0x346b0f(0x29d)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x5dcf22),tgBot[_0x346b0f(0x126)](/resetpw_(.+)/,async _0x45b614=>{const _0x4cd08e=_0x346b0f,_0x28cf80=_0x45b614[_0x4cd08e(0x1c6)][0x1];_0x45b614[_0x4cd08e(0x110)]();if(_0x28cf80!='no'){const _0x3189d7=0xf,_0x3043ff=_0x4cd08e(0x12f),_0x3c0e1c=Array[_0x4cd08e(0x178)](crypto[_0x4cd08e(0x260)](new Uint32Array(_0x3189d7)))[_0x4cd08e(0x144)](_0x5d6f52=>_0x3043ff[_0x5d6f52%_0x3043ff[_0x4cd08e(0x10b)]])[_0x4cd08e(0x1c5)](''),_0xf73fe0=bcrypt[_0x4cd08e(0x253)](_0x3c0e1c,saltRounds);storeSettings({'bbPassword':_0xf73fe0}),await sendTelegram(_0x45b614['chat']['id'],_0x4cd08e(0x245)+_0x3c0e1c,{'parse_mode':_0x4cd08e(0x259)});}else await sendTelegram(_0x45b614[_0x4cd08e(0x170)]['id'],_0x4cd08e(0x217));});}}async function confirmRestore(_0x3753bb,_0x33e720){const _0x28bc40=_0xfadbea;io['to'](_0x28bc40(0x1c2))[_0x28bc40(0x27c)]('notification','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x28bc40(0x183));if(tgBot&&settings[_0x28bc40(0x29d)]){const _0x4a2e73=uuidRandom();tmpStorage[_0x4a2e73]={'path':_0x3753bb,'filename':_0x33e720};const _0x34181b=Markup[_0x28bc40(0x1d0)]([Markup[_0x28bc40(0xf0)][_0x28bc40(0x284)]('yes',_0x28bc40(0x2ac)+_0x4a2e73),Markup[_0x28bc40(0xf0)][_0x28bc40(0x284)]('no',_0x28bc40(0xea)+_0x4a2e73)]);await sendTelegram(settings[_0x28bc40(0x29d)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x34181b),tgBot['action'](/restore_(.+)_(.+)/,async _0x52dce6=>{const _0x3ef7bb=_0x28bc40,_0x4701da=_0x52dce6[_0x3ef7bb(0x1c6)][0x1],_0x543e34=_0x52dce6[_0x3ef7bb(0x1c6)][0x2],{path:_0x121f7c,filename:_0x5d15a5}=tmpStorage[_0x543e34];delete tmpStorage[_0x543e34],_0x52dce6['editMessageReplyMarkup'](),_0x4701da==_0x3ef7bb(0x2d6)?(logger[_0x3ef7bb(0x12c)](_0x3ef7bb(0x12d)),await sendTelegram(_0x52dce6[_0x3ef7bb(0x170)]['id'],_0x3ef7bb(0x2ba),{'parse_mode':_0x3ef7bb(0x259)}),unzipFile(_0x121f7c,_0x5d15a5)):(logger[_0x3ef7bb(0x12c)](_0x3ef7bb(0x281)),await sendTelegram(_0x52dce6[_0x3ef7bb(0x170)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x143fb4=_0xfadbea,_0x17c015=new Date();return _0x17c015[_0x143fb4(0x1b9)]()+'/'+(_0x17c015[_0x143fb4(0x1cb)]()+0x1)[_0x143fb4(0x22a)]()[_0x143fb4(0x177)](0x2,'0')+'/'+_0x17c015[_0x143fb4(0xec)]()[_0x143fb4(0x22a)]()[_0x143fb4(0x177)](0x2,'0')+'\x20'+_0x17c015[_0x143fb4(0x1eb)]()[_0x143fb4(0x22a)]()[_0x143fb4(0x177)](0x2,'0')+':'+_0x17c015['getMinutes']()[_0x143fb4(0x22a)]()['padStart'](0x2,'0')+':'+_0x17c015[_0x143fb4(0x146)]()['toString']()[_0x143fb4(0x177)](0x2,'0');}function getTimeStamp(){const _0x2f6576=_0xfadbea,_0x4228f6=shiftedTime();return _0x4228f6[_0x2f6576(0x1b9)]()+'/'+(_0x4228f6[_0x2f6576(0x1cb)]()+0x1)[_0x2f6576(0x22a)]()['padStart'](0x2,'0')+'/'+_0x4228f6['getDate']()[_0x2f6576(0x22a)]()['padStart'](0x2,'0')+'\x20'+_0x4228f6[_0x2f6576(0x1eb)]()['toString']()[_0x2f6576(0x177)](0x2,'0')+':'+_0x4228f6[_0x2f6576(0x288)]()[_0x2f6576(0x22a)]()[_0x2f6576(0x177)](0x2,'0')+':'+_0x4228f6['getSeconds']()[_0x2f6576(0x22a)]()[_0x2f6576(0x177)](0x2,'0');}function _0x1f83(){const _0x2d7b60=['telegramEvents','getSeconds','axios','/off\x20-\x20stop\x20bot(s)\x0a','token','Temporary\x20access\x20rejected','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','bbvReceive','delete-alerts','2FA\x20required','Invalid\x20authentication\x20token\x20(2)','reinstall_no','login\x20required','exec','backupfile','args','Backup\x20file\x20uploaded','publicKey','$1_$2_$3','289532QUSFWf','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','defaults','<b>Telegram\x20Bot\x20Status:</b>\x0a','Access\x20enabled\x20for\x20','store-headless','metrics_','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/restart\x20-\x20restart\x20bot(s)\x0a','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','data','clients','726441ckKNxG','apply','randomBytes','config_orders','pidRefreshToken','-config.json','All\x20bots','all','user','apiPassword','SIGTERM','ipc','chat','generateKeyPairAsync','Enabled\x20Bot\x20','NTBA_FIX_319','messages','toggleBotMode','temporary\x20token\x20generated','padStart','from','backup-full','mode','(staging)','config','zip/','2FA','Restarting\x20Bot\x20','get-logs','output-001.log','startsWith','success','order','parse','1000','/help\x20-\x20show\x20available\x20commands\x0a','auth','format','settings.','delete-bot','Unauthorized\x20attempt\x20to\x20get\x20messages','disable','use','/disable\x20-\x20disable\x20notifications\x0a','reason','manual','versions','file','placeOrder','/start','on_','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','2FA\x20login\x20token\x20generated','track','portfolio','portfolio_','telegrammsg','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','static','settings','bot.js','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','update','any','auto','f2aRequired','yargs/yargs','address','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','1046876DeKWGq','text','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Notifications\x20enabled','\x20>\x20','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Logged\x20out\x20user\x20...','write','sign','util','telegramIpApproval','timeshift','getFullYear','running','telegramUsername','copyFileSync','clientip','private','2FA\x20login\x20required',')\x20|\x20Bot\x20','getTime','botmanager','login\x20token\x20generated','6003504VHKVdi','join','match','You\x20can\x20use\x20the\x20following\x20commands:\x0a','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','get-portfolio','***','getMonth','reinstall-bb','bbvNew','Unauthorized\x20attempt\x20to\x20confirm\x20message','Ok,\x20will\x20send\x20alert\x20notifications\x20only','inlineKeyboard','Starting\x20#RED#Balance\x20Bot\x20v','production','login\x20token\x20valid','User\x20has\x20been\x20validated','get-starting-balances','error','login2fa_','isValid','http','fork','readdirSync','\x1b[0m','argv','date-fns','uuid-random','username','test','post','name','stopped','logged\x20out','show-config','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','temporaryAccessAllowed','Bot\x20','store-fiat','getHours','\x1b[33m','Bot\x20Mgr\x20>\x20','showConfig','replace','Unauthorized\x20login\x20attempt\x20(timeout)','SIGINT','function','logs','getStartingBalances','kind','writeFileSync','temp/','store','loginRequired','hasOwnProperty','************','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','sortBy','message','\x20to\x20','login','\x20mode','tkn','download','All','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','logs/','\x20only\x0a','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','/:bot/configuration','show','enabled','bb/','Notifications\x20disabled','store-configuration','IPv4','headers','0.0.0','log','build2','backup-files','Failed\x20to\x20download\x20','cancelLoading','Password\x20reset\x20rejected','help','mixpanel','type','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','lowdb','reply','timestamp','expiry','cancel-loading','onepagemode','blacklist','password','resetHistory','Login\x20accepted','deleteHistoryAlerts','backup/','All\x20bots\x20running\x20right\x20now','orders','toString','/:bot/coins','access\x20timeout','Allow\x20login\x20from\x20IP\x20address\x20','update-bb','output-000.log','sendFile','createServer','reject','search','alias','#RES#\x20if\x20running\x20locally\x0a','Error\x20while\x20deleting\x20config\x20files:\x20','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','disconnect','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','warning','catch','remove','Markdown','\x20|\x20user:\x20...','toIPv4Address','lastmsgemitted','reload','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','restart_','Password\x20has\x20been\x20reset\x20to:\x20','telegraf','environment','toggle_','files','launch','No\x20authentication\x20token','/status\x20-\x20show\x20bot(s)\x20status\x0a','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20store\x20configuration','-----------------------------------------------------------------------------------','Error:\x20Invalid\x20argument\x20','Alerts','hashSync','names','index.html','stop','sendMetricsTelegram','enable','HTML','/enable\x20-\x20enable\x20notifications\x0a','bb-settings.json','botID','split','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','randomFillSync','slice','\x20minutes','https://api.ipify.org?format=json','metrics','Unauthorized\x20attempt\x20to\x20show\x20configuration','handshake','mkdirSync','getUTCHours','staging','/update\x20-\x20update\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','telegramToken','accept','-results.json','\x1b[34m','node','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','config_alerts','secret','listen','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','whitelist','bot-','generate','entries','port','telegramEnabled','emit','allow','decrypt','express-fileupload','statSync','Restore\x20process\x20aborted','verify','Token\x20blacklisted','callback','RSA-OAEP','Idling\x20(','value','getMinutes','sendMessage','version.json','status','resetpw_no','min','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','mtime','sort','range','express','find','reinstall','string','alerts','child_process','backup','hybrid-crypto-js','Node.js\x20v','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','Network\x20Interfaces:','telegramChatId','\x20(2)','\x20(1)','binary','/names\x20-\x20show\x20bot\x20names\x0a','27367232YOKXVo','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','ipaddr.js','internal','backup-full@','No\x20bots\x20running\x20right\x20now','host','storeConfiguration','stringify','Yes','restore_yes_','temporary\x20access\x20timeout','filter','/metrics\x20-\x20show\x20bot\x20performance\x0a','telegram2FaApproval','crypto','output-003.log','existsSync','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','full','Unauthorized\x20attempt\x20to\x20get\x20portfolio','config_all','userid','pidExpireLogin','Restoring\x20bot(s)\x20from\x20backup','lastmsgtelegram','Telegraf\x20error:','push','Disabled\x20Bot\x20','secure','65vpuWib','.zip','botname','bbPassword','privateKey','Login\x20rejected','_data','inherit','(((.+)+)+)+$','login2fa_reject_','Starting\x20(','build','::1','toggle-bot-mode','sha256','tempaccess_15_','Unauthorized\x20attempt\x20to\x20get\x20events','tempaccess_5_',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20log\x20out','kill','restart','yes','-performance.json','isDirectory','get','2FA\x20login\x20rejected','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','hex','close','assign','telegram','Setting\x20access:\x20','sockets','\x20|\x20client:\x20...','/:bot/support','30\x20min','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','removeAllListeners','/:bot/portfolio','unlinkSync','command','constructor','graphql-request','login\x20not\x20required','off_','Crypt','disabled','\x1b[36m','restore_no_','Unauthorized\x20attempt\x20to\x20download\x20','getDate','initclient','simple','access','button','temporary\x20access\x20rejected','isIPv4MappedAddress','number','event','keys','includes','init','Invalid\x20username\x20or\x20IP\x20address','Restore\x20backup\x20file\x20','bcryptjs','Notifications\x20enabled\x0a','latestversion','remoteAddress','node-zip','add-bot','forEach','\x20|\x20','cloneDeep','bots','1732408ZlIerQ','Unauthorized\x20attempt\x20to\x20delete\x20alerts','/:bot/history','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','-events.json','2982952UhspbA','bot','length','[ip-address]','new','family','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','editMessageReplyMarkup','tempaccess_30_','rmSync','sendPortfolioTelegram','off','bbUsername','output-002.log','live','ipv6','update-bot','confirm-message','uuid',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','restore-backup-file','set','send','lowdb/adapters/FileSync','Backup\x20file\x20unzipped\x20and\x20stored','Error\x20removing\x20old\x20backup\x20files:','backup-full.zip',',\x20must\x20be\x20a\x204\x20digit\x20number','showname','action','/:bot/performance','exit','encryptedUuid','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','start','debug','Restore\x20process\x20confirmed','127.0.0.1','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Invalid\x20authentication\x20token\x20(1)','get-backup-files','emitHistory','Unauthorized\x20attempt\x20to\x20update\x20bot','socket','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','toggle','started','Notifications\x20disabled\x0a','get-messages','apiKey','readFileSync','socket.io','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','new-disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','place-order','Logged\x20in\x20user\x20...','headless','once','map'];_0x1f83=function(){return _0x2d7b60;};return _0x1f83();}function getCleanTimeStamp(){const _0x2ed684=_0xfadbea,_0x465180=shiftedTime();return _0x465180['getFullYear']()+(_0x465180[_0x2ed684(0x1cb)]()+0x1)[_0x2ed684(0x22a)]()[_0x2ed684(0x177)](0x2,'0')+_0x465180[_0x2ed684(0xec)]()['toString']()['padStart'](0x2,'0')+'-'+_0x465180[_0x2ed684(0x1eb)]()[_0x2ed684(0x22a)]()[_0x2ed684(0x177)](0x2,'0')+_0x465180[_0x2ed684(0x288)]()[_0x2ed684(0x22a)]()[_0x2ed684(0x177)](0x2,'0')+_0x465180[_0x2ed684(0x146)]()[_0x2ed684(0x22a)]()[_0x2ed684(0x177)](0x2,'0');}function shiftedTime(){const _0x285a11=_0xfadbea,_0x5ee5d7=new Date();let _0x2a806e=_0x5ee5d7;if(settings[_0x285a11(0x1b8)]&&settings[_0x285a11(0x1b8)]!==0x0)_0x2a806e=fns['add'](_0x5ee5d7,{'hours':settings[_0x285a11(0x1b8)]});return _0x2a806e;}function startScheduler(){const _0x53303=_0xfadbea,_0x5704c3=new Date()[_0x53303(0x268)](),_0x80ed54=shiftedTime()[_0x53303(0x1eb)]();_0x80ed54==0x4&&backupConfigFiles();_0x80ed54==0x0&&rotateLogFiles();_0x5704c3%0x6==0x0&&triggerAnalytics();_0x5704c3%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0xdae1ce){const _0x45ac75=_0xfadbea;logger['debug'](_0x45ac75(0xf9)+_0xdae1ce);const _0x3440ab=getBotsWithMode();_0x3440ab['length']>0x0?confirmRestore(configbackuppath,_0xdae1ce):unzipFile(configbackuppath,_0xdae1ce);}async function getBackupFiles(_0x180a08=null){const _0x16c722=_0xfadbea;let _0x386cb3=[],_0x50c3ab=fs[_0x16c722(0x1db)](configbackuppath,{'withFileTypes':!![]});_0x50c3ab['sort']((_0x55fd76,_0x293e26)=>_0x55fd76[_0x16c722(0x1e3)]<_0x293e26['name']?0x1:_0x293e26[_0x16c722(0x1e3)]<_0x55fd76[_0x16c722(0x1e3)]?-0x1:0x0),_0x50c3ab[_0x16c722(0x100)](_0x222cfa=>{const _0x4dba23=_0x16c722;if(!_0x222cfa[_0x4dba23(0x2d8)]()&&_0x222cfa[_0x4dba23(0x1e3)][_0x4dba23(0x182)]('backup-full@')&&_0x222cfa[_0x4dba23(0x1e3)]['endsWith'](_0x4dba23(0x2c1))){const _0xd948e9=formatDate(fs[_0x4dba23(0x280)](configbackuppath+_0x222cfa['name'])[_0x4dba23(0x28f)]);_0x386cb3[_0x4dba23(0x2bd)]({'name':_0x222cfa['name'],'mtime':_0xd948e9});}});if(_0x180a08)io['to'](_0x180a08)['emit'](_0x16c722(0x214),_0x386cb3);else return _0x386cb3;}async function backupConfigFiles(){const _0x3ff54b=_0xfadbea;await zipFiles('backup-full');const _0x429697=getCleanTimeStamp();fs[_0x3ff54b(0x1bc)](zippath+_0x3ff54b(0x123),configbackuppath+('backup-full@'+_0x429697+_0x3ff54b(0x2c1)));let _0x3867b1=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3867b1[_0x3ff54b(0x290)]((_0x1d060c,_0x493e4d)=>_0x1d060c[_0x3ff54b(0x1e3)]<_0x493e4d[_0x3ff54b(0x1e3)]?0x1:_0x493e4d[_0x3ff54b(0x1e3)]<_0x1d060c[_0x3ff54b(0x1e3)]?-0x1:0x0),_0x3867b1[_0x3ff54b(0x10b)]>maxBackups&&fs[_0x3ff54b(0x2e8)](configbackuppath+_0x3867b1[_0x3867b1[_0x3ff54b(0x10b)]-0x1][_0x3ff54b(0x1e3)]);}function rotateLogFiles(){const _0x4e098b=_0xfadbea,_0x4cbc00=fs['statSync'](logspath+_0x4e098b(0x22f)),_0x3283c9=_0x4cbc00['size']/0x400;if(_0x3283c9>0x64){let _0x44bae4=fs[_0x4e098b(0x1db)](logspath,{'withFileTypes':!![]});_0x44bae4[_0x4e098b(0x290)]((_0x85ca6a,_0x4128eb)=>_0x85ca6a[_0x4e098b(0x1e3)]<_0x4128eb['name']?0x1:_0x4128eb['name']<_0x85ca6a['name']?-0x1:0x0),_0x44bae4['forEach'](_0x12b540=>{const _0xe4144f=_0x4e098b;if(_0x12b540[_0xe4144f(0x1e3)]==_0xe4144f(0x116))fs[_0xe4144f(0x1bc)](logspath+_0x12b540[_0xe4144f(0x1e3)],logspath+_0xe4144f(0x2b2));if(_0x12b540[_0xe4144f(0x1e3)]==_0xe4144f(0x181))fs[_0xe4144f(0x1bc)](logspath+_0x12b540[_0xe4144f(0x1e3)],logspath+_0xe4144f(0x116));_0x12b540[_0xe4144f(0x1e3)]==_0xe4144f(0x22f)&&(fs[_0xe4144f(0x1bc)](logspath+_0x12b540['name'],logspath+'output-001.log'),fs[_0xe4144f(0x1f6)](logspath+_0x12b540['name'],''));});}}async function zipFiles(_0x1db2d9){const _0x404c29=_0xfadbea;let _0x36b281;if(_0x1db2d9==_0x404c29(0x1f3))_0x36b281=logspath;if(_0x1db2d9==_0x404c29(0x298))_0x36b281=configpath;if(_0x1db2d9==_0x404c29(0x179))_0x36b281=configpath;let _0x5c2940=fs[_0x404c29(0x1db)](_0x36b281,{'withFileTypes':!![]});const _0x1fdc11=new require('node-zip')();_0x5c2940[_0x404c29(0x100)](_0x25d55d=>{const _0x10bf8c=_0x404c29;if(!_0x25d55d[_0x10bf8c(0x2d8)]()){let _0x5658c3=fs[_0x10bf8c(0x13b)](_0x36b281+_0x25d55d[_0x10bf8c(0x1e3)]);if(_0x1db2d9==_0x10bf8c(0x298)){const _0x33768a=/^bot-[0-9]{3}-config.json$/,_0x342d9b=_0x33768a['test'](_0x25d55d[_0x10bf8c(0x1e3)]);if(_0x342d9b){const _0x250bb0=JSON[_0x10bf8c(0x185)](_0x5658c3);if(_0x250bb0[_0x10bf8c(0x10a)][0x0]){_0x250bb0[_0x10bf8c(0x10a)][0x0][_0x10bf8c(0x13a)]='***',_0x250bb0['bot'][0x0]['apiSecret']=_0x10bf8c(0x1ca);if(_0x250bb0[_0x10bf8c(0x10a)][0x0]['apiPassword'])_0x250bb0[_0x10bf8c(0x10a)][0x0][_0x10bf8c(0x16d)]=_0x10bf8c(0x1ca);}_0x5658c3=JSON['stringify'](_0x250bb0,null,0x2);}if(_0x25d55d['name']==_0x10bf8c(0x25b)){const _0x1e4cb4=JSON['parse'](_0x5658c3);if(_0x1e4cb4[_0x10bf8c(0x1a1)]['loginRequired'])_0x1e4cb4[_0x10bf8c(0x1a1)]['loginRequired']=![];if(_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x2c3)])_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x2c3)]=_0x10bf8c(0x1ca);if(_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x26c)])_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x26c)]=_0x10bf8c(0x1ca);if(_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x29d)])_0x1e4cb4[_0x10bf8c(0x1a1)][_0x10bf8c(0x29d)]=null;_0x5658c3=JSON[_0x10bf8c(0x2aa)](_0x1e4cb4,null,0x2);}if(_0x25d55d[_0x10bf8c(0x1e3)]!='bb-secure.json')_0x1fdc11[_0x10bf8c(0x193)](_0x25d55d[_0x10bf8c(0x1e3)],_0x5658c3);}else _0x1fdc11[_0x10bf8c(0x193)](_0x25d55d[_0x10bf8c(0x1e3)],_0x5658c3);}});const _0x356664=_0x1fdc11[_0x404c29(0x278)]({'base64':![],'compression':'DEFLATE'});fs[_0x404c29(0x1f6)](zippath+(_0x1db2d9+_0x404c29(0x2c1)),_0x356664,_0x404c29(0x2a0));}async function unzipFile(_0x192870,_0x29bed9){const _0x79b8d8=_0xfadbea;fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x4cd7ed=>{const _0x20eb5b=_0x298e;if(!_0x4cd7ed['isDirectory']())fs[_0x20eb5b(0x112)](configpath+_0x4cd7ed[_0x20eb5b(0x1e3)]);});const _0x172c1c=fs[_0x79b8d8(0x13b)](_0x192870+_0x29bed9,_0x79b8d8(0x2a0)),_0x2a4cc3=new require(_0x79b8d8(0xfe))(_0x172c1c,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x2a4cc3[_0x79b8d8(0x249)])[_0x79b8d8(0x100)](_0x4f2476=>{const _0x1e6544=_0x79b8d8,_0x8ded7c=_0x2a4cc3[_0x1e6544(0x249)][_0x4f2476];fs[_0x1e6544(0x1f6)](configpath+_0x8ded7c[_0x1e6544(0x1e3)],_0x8ded7c[_0x1e6544(0x2c6)]);}),fs[_0x79b8d8(0x1db)](temppath,{'withFileTypes':!![]})['forEach'](_0x699bac=>{const _0x3987d2=_0x79b8d8;if(!_0x699bac[_0x3987d2(0x2d8)]())fs['rmSync'](temppath+_0x699bac[_0x3987d2(0x1e3)]);}),logger['debug'](_0x79b8d8(0x121)),process['send']({'restore':!![]},_0xad4a1d=>{});}async function getPublicIp(){const _0x4066c9=_0xfadbea;try{const _0x36954f=await axios[_0x4066c9(0x2d9)](_0x4066c9(0x263));publicip=_0x36954f[_0x4066c9(0x162)]['ip'];}catch(_0x4e3405){}}async function triggerAnalytics(){const _0x56173f=_0xfadbea;if(!publicip)await getPublicIp();const _0x1a6238=getBotsWithMode();let _0x3cfe4e=0x0;_0x1a6238[_0x56173f(0x100)](_0x2da083=>{const _0x455028=_0x56173f;if(_0x2da083[_0x455028(0x28b)]===_0x455028(0x20b))_0x3cfe4e++;});const _0x2b0e45=getBotExchanges();mixpanel[_0x56173f(0x19b)]('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x1a6238[_0x56173f(0x10b)],'numbotsenabled':_0x3cfe4e,'exchanges':_0x2b0e45,'environment':environment});}async function getMessages(){const _0x174702=_0xfadbea,_0x5c6164=_0x174702(0x2a3),_0x2ce7bd=new GraphQLClient(_0x5c6164),_0x17491d={'authorization':_0x174702(0x1af)},_0x53c9d3=serverversion['split']('.'),_0x4f1289=_0x53c9d3[0x0]+'.'+_0x53c9d3[0x1],_0x2eae83=Math[_0x174702(0x28d)](settings[_0x174702(0x2bb)],settings[_0x174702(0x241)]),_0x38e77e={'last':parseInt(_0x2eae83),'bbm':_0x4f1289},_0x55b920=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x50db29;try{_0x50db29=await _0x2ce7bd['request'](_0x55b920,_0x38e77e,_0x17491d);}catch(_0x1ea3ae){}if(_0x50db29&&_0x50db29[_0x174702(0x174)]){let _0x5296a9=settings['lastmsgtelegram'];newMessages=[];for(const _0x342f04 of _0x50db29[_0x174702(0x174)]){newMessages[_0x174702(0x2bd)](_0x342f04);let _0x395b3b=![];_0x342f04[_0x174702(0x1cd)]&&(updateSetting('latestversion',_0x342f04[_0x174702(0x1cd)]),_0x395b3b=isNewerVersion(serverversion,_0x342f04[_0x174702(0x1cd)])||serverversion==_0x342f04['bbvNew']);if(!_0x395b3b&&_0x342f04['number']>_0x5296a9){if(_0x342f04[_0x174702(0x14c)]===_0x174702(0x1a5)||serverversion['startsWith'](_0x342f04[_0x174702(0x14c)])){let _0x298f10=''+_0x342f04['title']+'\x0a\x0a'+_0x342f04[_0x174702(0x1fe)];const _0x2906a8=await sendTelegramMsg(toTelegramMarkdown(_0x298f10),_0x174702(0x23e));if(_0x2906a8)_0x5296a9=_0x342f04[_0x174702(0xf3)];}}}updateAvailable=isNewerVersion(settings[_0x174702(0xfc)],serverversion),updateSetting(_0x174702(0x2bb),_0x5296a9),emitMessages();}}function emitMessages(){const _0x196add=_0xfadbea,_0x48da0c=settings[_0x196add(0x241)];let _0xb5ec2f=[];newMessages[_0x196add(0x100)](_0x1558db=>{const _0x4606c9=_0x196add;_0x1558db[_0x4606c9(0xf3)]>_0x48da0c&&_0xb5ec2f[_0x4606c9(0x2bd)](_0x1558db);}),_0xb5ec2f[_0x196add(0x10b)]>0x0&&getAllClients()[_0x196add(0x100)](_0x36509e=>{const _0x21681c=_0x196add;getSocket(_0x36509e['id'])[_0x21681c(0x27c)](_0x21681c(0x1fe),_0xb5ec2f);});}function confirmMessage(_0xf58859){const _0x48fe02=_0xfadbea;updateSetting(_0x48fe02(0x241),Number(_0xf58859));}function isNewerVersion(_0x578f4a,_0xeb2dfd){const _0x2042e0=_0xfadbea,_0x372403=_0xeb2dfd[_0x2042e0(0x25d)]('.'),_0x34f15d=_0x578f4a[_0x2042e0(0x25d)]('.');for(var _0x4e13f0=0x0;_0x4e13f0<_0x34f15d['length'];_0x4e13f0++){const _0x244770=~~_0x34f15d[_0x4e13f0],_0x5b77b6=~~_0x372403[_0x4e13f0];if(_0x244770>_0x5b77b6)return!![];if(_0x244770<_0x5b77b6)return![];}return![];}function toTelegramMarkdown(_0x1f5578){const _0x2335d2=_0xfadbea,_0xb3b94c=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3a2ad3=/\*{2}(.+?)\*{2}/gim;return _0x1f5578=_0x1f5578['replace'](_0xb3b94c,_0x2335d2(0x157))[_0x2335d2(0x1ef)](_0x3a2ad3,'*$1*'),_0x1f5578;}async function validateConfigFile(){const _0x4ebc63=_0xfadbea,_0x3360e1=dbConfig[_0x4ebc63(0x2d9)](_0x4ebc63(0x103))[_0x4ebc63(0x1fd)](_0x4ebc63(0x25c))[_0x4ebc63(0x287)]()||[];if(_0x3360e1['length']==0x0){let _0x25e435=0x0,_0x35aaeb=[];const _0x3daea5=/^bot-([0-9]{3})-config.json$/,_0x53f041=fs['readdirSync'](configpath);_0x53f041['forEach'](_0x43e344=>{const _0x5c9c35=_0x4ebc63,_0x2772a7=_0x3daea5[_0x5c9c35(0x152)](_0x43e344);if(_0x2772a7){const _0x3620dc=_0x2772a7[0x1];let _0xbead1f=getBotAttributes(_0x3620dc);_0x35aaeb[_0x5c9c35(0x2bd)]({'botID':_0x3620dc,'botname':_0xbead1f[_0x5c9c35(0x2c2)],'status':_0x5c9c35(0x2ef),'live':'stopped'}),_0x25e435++;}}),_0x25e435!=0x0&&(dbConfig[_0x4ebc63(0x2d9)](_0x4ebc63(0x103))[_0x4ebc63(0x2de)](_0x35aaeb)[_0x4ebc63(0x1b4)](),config=_0x35aaeb,restoredConfigFile=_0x25e435);}}async function restoreConfigNotify(_0x203207){const _0x9d1420=_0xfadbea;let _0x2a7fdc;if(restoredConfigFile==0x1)_0x2a7fdc='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x2a7fdc=_0x9d1420(0x25e);if(_0x203207)io['to'](_0x9d1420(0x1c2))[_0x9d1420(0x27c)]('notification',_0x2a7fdc);else{logger[_0x9d1420(0xee)](_0x9d1420(0x250)),logger[_0x9d1420(0xee)](_0x2a7fdc),logger[_0x9d1420(0xee)](_0x9d1420(0x250)),logger[_0x9d1420(0xee)]('');if(tgBot&&settings[_0x9d1420(0x29d)]&&settings[_0x9d1420(0x145)]!='orders')await sendTelegram(settings[_0x9d1420(0x29d)],_0x9d1420(0x1ed)+_0x2a7fdc);}}function validateCredentials(_0x179ee8,_0x5d56f3){const _0x3c864e=_0xfadbea;if(_0x179ee8[_0x3c864e(0x1e0)]==settings['bbUsername']&&bcrypt['compareSync'](_0x179ee8[_0x3c864e(0x223)],settings[_0x3c864e(0x2c3)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x3c864e(0x1bf),'token':null};else{const _0x347254=generateLoginToken(_0x5d56f3);return{'allow':!![],'reason':_0x3c864e(0x1c3),'token':_0x347254};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function _0x298e(_0xe3c4d1,_0x2a44d8){const _0x512615=_0x1f83();return _0x298e=function(_0x1a4ac8,_0x598646){_0x1a4ac8=_0x1a4ac8-0xea;let _0x1f83ac=_0x512615[_0x1a4ac8];return _0x1f83ac;},_0x298e(_0xe3c4d1,_0x2a44d8);}function refreshToken(_0x5d2e64){const _0x1c35c3=generateLoginToken(_0x5d2e64);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1c35c3};}function validateAccess(_0x2d8aea,_0x3c9977,_0x55ce32){const _0x2c6522=_0xfadbea,_0x7c3985=_0x55ce32?_0x55ce32:devices[_0x3c9977]['ip'];let _0x4f1dd1;const _0x2faa2b=_0x459a6e=>{const _0x52fc57=_0x298e;if(settings[_0x52fc57(0x1f9)]){if(settings[_0x52fc57(0x1a7)]){if(telegram2FaApproved(_0x3c9977)){const _0x13b847=generateLoginToken(_0x3c9977);return{'allow':!![],'reason':_0x52fc57(0x19a),'token':_0x13b847};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4f1dd1=validToken(_0x459a6e,_0x3c9977),_0x4f1dd1[_0x52fc57(0x1fa)]('success')?{'allow':!![],'reason':_0x52fc57(0x1d3),'token':_0x459a6e}:{'allow':![],'reason':_0x52fc57(0x151),'token':null};}else return{'allow':!![],'reason':_0x52fc57(0x2ec),'token':null};};if(settings['whitelistEnabled']){let _0x578a25=[...settings[_0x2c6522(0x276)],_0x2c6522(0x2cc),'::ffff:127.0.0.1',_0x2c6522(0x12e)];if(_0x578a25[_0x2c6522(0xf6)](_0x7c3985))return _0x2faa2b(_0x2d8aea);else{_0x4f1dd1=validToken(_0x2d8aea,_0x3c9977);if(_0x4f1dd1[_0x2c6522(0x1fa)](_0x2c6522(0x183)))return _0x2faa2b(_0x2d8aea);else{if(telegramIpApproved(_0x3c9977)){const _0x3238c7=generateToken(_0x3c9977);return _0x4f1dd1=_0x2faa2b(_0x2d8aea),_0x4f1dd1[_0x2c6522(0x27d)]?{'allow':!![],'reason':_0x2c6522(0x176),'token':_0x3238c7}:_0x4f1dd1;}else return settings[_0x2c6522(0x1e8)]?{'allow':![],'reason':_0x2c6522(0x14e),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x2faa2b(_0x2d8aea);}function timelyDecrypt(_0xf6e286,_0x410c90=!![]){const _0x44e9d5=_0xfadbea;if(_0xf6e286)try{const _0x6e630=crypt[_0x44e9d5(0x27e)](secure[_0x44e9d5(0x2c4)],_0xf6e286)[_0x44e9d5(0x1fe)],_0x389671=_0x6e630[_0x44e9d5(0x25d)]('@')[0x0],_0x39b290=_0x6e630[_0x44e9d5(0x25d)]('@')[0x1],_0x466c28=new Date()['getTime']();if(_0x410c90){if(_0x466c28-_0x39b290<maxSecretAge*0x3e8)return _0x389671;else return![];}else return _0x389671;}catch(_0x544f26){return![];}else return![];}const validToken=(_0x12b8ca,_0x3765cf)=>{const _0x3ff2dc=_0xfadbea,_0x1c6907=devices[_0x3765cf]['ip'];if(!_0x12b8ca)return{'error':_0x3ff2dc(0x24b)};for(let _0x4d21dd of blacklist){if(_0x4d21dd['token']==_0x12b8ca)return{'error':_0x3ff2dc(0x283)};}let _0x5cb903;try{_0x5cb903=jwt[_0x3ff2dc(0x282)](_0x12b8ca,secure[_0x3ff2dc(0x273)]+_0x3765cf);}catch{return{'error':_0x3ff2dc(0x130)};}if(!_0x5cb903['hasOwnProperty'](_0x3ff2dc(0x1bd))&&!_0x5cb903[_0x3ff2dc(0x1fa)](_0x3ff2dc(0x1e0))||!_0x5cb903['hasOwnProperty']('exp'))return{'error':_0x3ff2dc(0x14f)};if(!_0x5cb903[_0x3ff2dc(0x1fa)](_0x3ff2dc(0x1e0))&&_0x5cb903[_0x3ff2dc(0x1fa)](_0x3ff2dc(0x1bd))){const {clientip:_0x238e12}=_0x5cb903;return _0x1c6907==_0x238e12?{'success':_0x3ff2dc(0x1d4)}:{'error':_0x3ff2dc(0x24d)};}else{if(_0x5cb903[_0x3ff2dc(0x1fa)](_0x3ff2dc(0x1e0))&&_0x5cb903[_0x3ff2dc(0x1fa)](_0x3ff2dc(0x1bd))){const {username:_0x386043,clientip:_0x3a546c}=_0x5cb903;return settings['bbUsername']==_0x386043&&_0x1c6907==_0x3a546c?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3ff2dc(0xf8)};}}},generateLoginToken=_0x11a3c6=>{const _0x2b19b8=_0xfadbea;if(_0x11a3c6){const _0x1043b0=devices[_0x11a3c6]['ip'];return jwt[_0x2b19b8(0x1b5)]({'username':settings[_0x2b19b8(0x115)],'clientip':_0x1043b0},secure[_0x2b19b8(0x273)]+_0x11a3c6,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x45e59d=>{const _0x31b4ed=_0xfadbea;if(_0x45e59d){const _0x4fcd37=devices[_0x45e59d]['ip'];return jwt[_0x31b4ed(0x1b5)]({'clientip':_0x4fcd37},secure[_0x31b4ed(0x273)]+_0x45e59d,{'expiresIn':devices[_0x45e59d][_0x31b4ed(0x1b7)][_0x31b4ed(0x21f)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3eb222=>{const _0x23c15d=_0xfadbea;let _0x44201f=![];return devices[_0x3eb222][_0x23c15d(0x1b7)]&&devices[_0x3eb222][_0x23c15d(0x1b7)][_0x23c15d(0x21f)]!=_0x23c15d(0x232)&&(_0x44201f=devices[_0x3eb222][_0x23c15d(0x1b7)][_0x23c15d(0x1bd)]==devices[_0x3eb222]['ip']&&new Date()[_0x23c15d(0x1c1)]()-devices[_0x3eb222][_0x23c15d(0x1b7)][_0x23c15d(0x21e)]<devices[_0x3eb222]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x44201f;},telegram2FaApproved=_0x1a13e6=>{const _0x2324bd=_0xfadbea;let _0x11ab94=![];return devices[_0x1a13e6][_0x2324bd(0x2b0)]&&devices[_0x1a13e6][_0x2324bd(0x2b0)][_0x2324bd(0x21f)]!=_0x2324bd(0x232)&&(_0x11ab94=devices[_0x1a13e6][_0x2324bd(0x2b0)][_0x2324bd(0x1bd)]==devices[_0x1a13e6]['ip']&&new Date()[_0x2324bd(0x1c1)]()-devices[_0x1a13e6]['telegram2FaApproval']['timestamp']<devices[_0x1a13e6][_0x2324bd(0x2b0)][_0x2324bd(0x21f)]*0x3c*0x3e8),_0x11ab94;},normalizeIP=_0x2fe0b4=>{const _0x1ff865=_0xfadbea;let _0x11c14a=null,_0xc14ab8=null;if(ipaddr[_0x1ff865(0x1d8)](_0x2fe0b4)){const _0x48df72=ipaddr['parse'](_0x2fe0b4);_0x48df72[_0x1ff865(0x1f5)]()===_0x1ff865(0x118)?(_0x48df72[_0x1ff865(0xf2)]()&&(_0x11c14a=_0x48df72[_0x1ff865(0x240)]()[_0x1ff865(0x22a)]()),_0xc14ab8=_0x48df72[_0x1ff865(0x22a)]()):(_0x11c14a=_0x48df72[_0x1ff865(0x22a)](),_0xc14ab8=_0x48df72['toIPv4MappedAddress']()['toString']());}return{'show':_0x11c14a?_0x11c14a:_0xc14ab8,'store':_0xc14ab8};};function formatDate(_0x31aa3f){const _0x72af5e=_0xfadbea;return _0x31aa3f['getFullYear']()+'/'+(_0x31aa3f['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x31aa3f['getDate']()['toString']()[_0x72af5e(0x177)](0x2,'0')+'\x20'+_0x31aa3f[_0x72af5e(0x1eb)]()[_0x72af5e(0x22a)]()['padStart'](0x2,'0')+':'+_0x31aa3f[_0x72af5e(0x288)]()[_0x72af5e(0x22a)]()['padStart'](0x2,'0')+':'+_0x31aa3f['getSeconds']()[_0x72af5e(0x22a)]()['padStart'](0x2,'0');}function sleep(_0x4a1d92){return new Promise(_0x5cb05a=>setTimeout(_0x5cb05a,_0x4a1d92));}