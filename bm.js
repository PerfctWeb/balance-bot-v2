function _0xa4ba(){const _0x1d4f61=['getMonth','botID','exit','http','\x1b[36m','sort','Ok,\x20will\x20send\x20alert\x20notifications\x20only','output-002.log','toggle-bot-mode','reinstall_no','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','bbvNew','update_yes','bb/','689856cWyyfe','expiry','enable','Disabled\x20Bot\x20','RSA-OAEP','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Restore\x20process\x20aborted','/:bot','restart','Error\x20sending\x20','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','/names\x20-\x20show\x20bot\x20names\x0a','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20get\x20events','30\x20min','Invalid\x20IP\x20address','disable','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sendMetricsTelegram','DEFLATE','any','getUTCHours','publicKeyToPem','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','\x20to\x20','Starting\x20#RED#Balance\x20Bot\x20v','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','userid','decode64','output-003.log','graphql-request','disconnect','reinstall-bb','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Unauthorized\x20attempt\x20to\x20delete\x20bot','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','telegramToken','telegramIpApproval','sign','clients','manual','apiSecret','tkn','ipv6','Unauthorized\x20attempt\x20to\x20download\x20','yes','Unauthorized\x20attempt\x20to\x20log\x20out','inlineKeyboard','match','Temporary\x20access\x20rejected','createServer',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','title','generateAsync','pidRefreshToken','reply','************','settings.','name','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','then','HTML','Backup\x20file\x20uploaded','delete-alerts','/off\x20-\x20stop\x20bot(s)\x0a','startsWith','connected','getStartingBalances','length','remoteAddress','Unauthorized\x20attempt\x20to\x20confirm\x20message','place-order','2FA\x20login\x20rejected','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Error\x20removing\x20old\x20backup\x20files:','date-fns','replyWithDocument','filter','login','Restore\x20process\x20confirmed','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','<b>Balance\x20Bot\x20Status:</b>\x0a','string','defaults','show','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20','update_no','error','store-settings','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Network\x20Interfaces:','toString','action','bbPassword','1469830jzgeBG','config/','SIGINT','staging','writeFileSync','catch','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','tempaccess_reject_','binary','track','latestversion','15SxyOjZ','sockets','chat','set','getFullYear','all','isDirectory','\x20|\x20client:\x20...','readdirSync','showConfig','existsSync','All','get-messages','ipc','secret','Backup\x20file\x20unzipped\x20and\x20stored','Notifications\x20enabled\x0a','sortBy','success','exec','isIPv4MappedAddress','type','code','Starting\x20Balance\x20Bot\x20reinstallation','#RES#\x20if\x20running\x20on\x20server','hashSync','build','private','started','NTBA_FIX_319','child_process','stopped','invalid\x20credentials','marketcapApi','login\x20required','params','show-config','launch','get-portfolio','login\x20token\x20valid','temporary\x20access\x20not\x20allowed','Starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','restore-backup-file','temporary\x20token\x20generated','/on\x20-\x20start\x20bot(s)\x0a','listen','unlinkSync','bots','host','Password\x20has\x20been\x20reset\x20to:\x20','disabled','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','[ip-address]','Access\x20enabled\x20for\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','post','get-backup-files','Invalid\x20authentication\x20token\x20(2)','\x20only\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','node','Error:\x20Invalid\x20argument\x20','socket.io','File\x20uploaded','Failed\x20to\x20download\x20','telegrammsg','cancelLoading','readFileSync','argv','telegraf','/status\x20-\x20show\x20bot(s)\x20status\x0a','add-bot','pidExpireLogin','getDate','delete-bot','sendMessage','login\x20token\x20generated','storeFiat','from','number','bb-secure.json','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','bot','2FA\x20required','static','server','.zip','restore_yes_','Your\x20installation\x20is\x20already\x20up\x20to\x20date','full','index.html','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','tempaccess_15_','use','uuid','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','reload','Server','Restore\x20backup\x20file\x20','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','file','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Unauthorized\x20attempt\x20to\x20get\x20messages','hasOwnProperty','inherit','\x20files\x20over\x20Telegram:','createWriteStream','running','decrypt','init','(staging)','express-fileupload','editMessageReplyMarkup','#RES#\x20if\x20running\x20locally\x0a','bot-','pki','whitelistEnabled','\x1b[35m','add','family','getMinutes','notification','data','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Invalid\x20username\x20or\x20IP\x20address','f2aRequired','restart_','new','send','replace','sha256','5\x20min','bb-settings.json','blacklist','parse','backup-full','mode','user','address','reset-history','settings','telegram2FaApproval','storeConfiguration','log','Idling\x20(','SIGTERM','access','1117028gsMFzV','botname','versions','Token\x20blacklisted','\x20|\x20','Session\x20expired\x20for\x20user\x20...','resetpw_yes','Unauthorized\x20login\x20attempt\x20(timeout)','Starting\x20(','telegramEnabled','randomBytes','timeshift','write','Starting\x20Balance\x20Bot\x20update','getHours','push','token','kill','store-fiat','getSeconds','live','Markdown','enabled','username','apply','temporary\x20access\x20timeout','conn','request','(((.+)+)+)+$',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','Unauthorized\x20attempt\x20to\x20delete\x20alerts','reject','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','entries','loginRequired','Telegram\x20error:','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Ok,\x20will\x20send\x20order\x20notifications\x20only','/download/:type','emit','padStart','getPortfolio','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','zip/','metrics','status\x20code\x20401','includes','*$1*','Node.js\x20v','split','#RES#','9dlHSDQ','All\x20bots\x20running\x20right\x20now','socket','fork','-config.json','orders','resetpw_no','headers','Logged\x20out\x20user\x20...','build2','Setting\x20access:\x20','status','resetHistory','update','Login\x20accepted','command','privateKeyFromPem','-events.json','value','Alerts','timestamp','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','address\x20already\x20in\x20use','\x20-\x20','Enabled\x20Bot\x20','restore_no_','util','telegramEvents','search','access\x20timeout','stringify','connection','debug','340908OKXJPU','Bot\x20','lastmsgemitted','api-eu.mixpanel.com','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','apiPassword','telegramUsername','-----------------------------------------------------------------------------------','getTime','2FA\x20login\x20required','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','remove','new-disabled','15\x20min','headless','Unauthorized\x20attempt\x20to\x20show\x20configuration','reason','Restoring\x20bot(s)\x20from\x20backup','function','temporary\x20access\x20rejected','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','args','create','***','alerts','start','reinstall','password','once','order','storeHeadless','onepagemode','get','showname','message','::1','auto','2FA','sendPortfolioTelegram','path','/:bot/configuration','/metrics\x20-\x20show\x20bot\x20performance\x0a','/logs\x20-\x20receive\x20log\x20files\x0a','confirm-message','backup-full@','login\x20not\x20required','/restart\x20-\x20restart\x20bot(s)\x0a','handshake','secure','644100TuCdkL','-results.json','backup-full.zip','You\x20can\x20use\x20the\x20following\x20commands:\x0a','callback','=>\x20Go\x20to\x20#CYA#http://','mkdirSync','CoinMarketCap\x20API\x20key\x20validated','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','toggleBotMode','-performance.json','login2fa_',':\x20Bot\x20Mgr\x20>\x20','text','keys','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','\x1b[31m','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','max','uuid-random','Allow\x20login\x20from\x20IP\x20address\x20','|@|','on_','emitHistory','cloneDeep','reset-password','stop','files','slice','get-starting-balances','logout','User\x20has\x20been\x20validated','backup','All\x20bots','names','lowdb/adapters/FileSync','Notifications\x20disabled\x0a','publicKey','\x20mode','apiKey','BCT','update-bot','cancel-loading','mtime','whitelist','download','version.json','\x20>\x20','/enable\x20-\x20enable\x20notifications\x0a','express','sendFile','1000','logs','async','simple','3998488HNSoTg','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','endsWith','config_all','telegram','backup/','portfolio_','https://api.ipify.org?format=json','bbUsername','jszip','statSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Notifications\x20types:\x20','loadAsync','button','IPv4','temp/','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','auth','<b>Telegram\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','rmSync','tempaccess_30_','environment','botmanager','telegramChatId','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','/:bot/history','8488928bAGSxe','output-000.log','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','warning','yargs/yargs','Password\x20reset\x20rejected','\x20(1)','generateKeyPair','referer','output-001.log','toIPv4MappedAddress','login2fa_reject_','assign','off_','16ePSJCu','port','help','exp','join','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Unauthorized\x20attempt\x20to\x20update\x20bot','messages','store','allow','Restarting\x20Bot\x20','forEach','privateKey','Yes','copyFileSync','find','event','\x1b[0m','clientip','toggle_','format','logs/','placeOrder','alias','config_alerts'];_0xa4ba=function(){return _0x1d4f61;};return _0xa4ba();}const _0xeb46a6=_0x5a87;(function(_0x424630,_0x80a981){const _0x36dc87=_0x5a87,_0x94ac52=_0x424630();while(!![]){try{const _0x3c23c4=-parseInt(_0x36dc87(0x113))/0x1+-parseInt(_0x36dc87(0x29d))/0x2+-parseInt(_0x36dc87(0xe2))/0x3*(-parseInt(_0x36dc87(0x176))/0x4)+parseInt(_0x36dc87(0x209))/0x5*(-parseInt(_0x36dc87(0x19e))/0x6)+parseInt(_0x36dc87(0x168))/0x7+parseInt(_0x36dc87(0x14b))/0x8+parseInt(_0x36dc87(0xc1))/0x9*(parseInt(_0x36dc87(0x1fe))/0xa);if(_0x3c23c4===_0x80a981)break;else _0x94ac52['push'](_0x94ac52['shift']());}catch(_0x4f69b2){_0x94ac52['push'](_0x94ac52['shift']());}}}(_0xa4ba,0xbb224));const _0x58bc00=function(){let _0xb0f1ba=!![];return function(_0x4b4e4f,_0x15066e){const _0x21897e=_0xb0f1ba?function(){const _0x1898eb=_0x5a87;if(_0x15066e){const _0x7254ab=_0x15066e[_0x1898eb(0x2b5)](_0x4b4e4f,arguments);return _0x15066e=null,_0x7254ab;}}:function(){};return _0xb0f1ba=![],_0x21897e;};}(),_0x13f60f=_0x58bc00(this,function(){const _0xa3357e=_0x5a87;return _0x13f60f[_0xa3357e(0x1fb)]()[_0xa3357e(0xdd)](_0xa3357e(0x2b9))[_0xa3357e(0x1fb)]()['constructor'](_0x13f60f)[_0xa3357e(0xdd)](_0xa3357e(0x2b9));});_0x13f60f();'use strict';process['env'][_0xeb46a6(0x226)]=0x1;const childProcess=require(_0xeb46a6(0x227)),fs=require('fs'),fns=require(_0xeb46a6(0x1ea)),low=require('lowdb'),FileSync=require(_0xeb46a6(0x137)),path=require(_0xeb46a6(0x109)),crypto=require('crypto'),forge=require('node-forge'),bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0xeb46a6(0x16c))(process[_0xeb46a6(0x24e)][_0xeb46a6(0x130)](0x2))[_0xeb46a6(0x24e)],uuidRandom=require(_0xeb46a6(0x127)),{Telegraf,Markup}=require(_0xeb46a6(0x24f)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0xeb46a6(0x1bc)),util=require(_0xeb46a6(0xdb)),fileUpload=require(_0xeb46a6(0x279)),{networkInterfaces}=require('os'),JSZip=require(_0xeb46a6(0x154)),PORT=argv[_0xeb46a6(0x177)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0xeb46a6(0x299)](_0xeb46a6(0x247)+PORT+_0xeb46a6(0x245)),process[_0xeb46a6(0x192)](0x1));const HOST=argv[_0xeb46a6(0x23a)]||null,userID=argv[_0xeb46a6(0x293)]||'',debugging=argv['d']||![],nodeversion=process[_0xeb46a6(0x29f)][_0xeb46a6(0x246)];let bbpath=_0xeb46a6(0x19d),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0xeb46a6(0x28e),securefile='bb-secure.json',environment=require('./'+bbpath2+_0xeb46a6(0x142))[_0xeb46a6(0x163)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0xeb46a6(0x213)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xeb46a6(0x1c6)),configpath=userID?bbpath+_0xeb46a6(0x1ff)+userID+'/':bbpath+_0xeb46a6(0x1ff),configbackuppath=configpath+_0xeb46a6(0x150),logspath=userID?bbpath+_0xeb46a6(0x18c)+userID+'/':bbpath+_0xeb46a6(0x18c),zippath=userID?bbpath+_0xeb46a6(0xb9)+userID+'/':bbpath+_0xeb46a6(0xb9),loggerfile=fs[_0xeb46a6(0x274)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0xeb46a6(0x15b)+userID+'/':bbpath+'temp/';!fs[_0xeb46a6(0x213)](configpath)&&fs[_0xeb46a6(0x119)](configpath);!fs[_0xeb46a6(0x213)](configbackuppath)&&fs[_0xeb46a6(0x119)](configbackuppath);!fs[_0xeb46a6(0x213)](logspath)&&fs[_0xeb46a6(0x119)](logspath);!fs[_0xeb46a6(0x213)](zippath)&&fs[_0xeb46a6(0x119)](zippath);!fs[_0xeb46a6(0x213)](temppath)&&fs[_0xeb46a6(0x119)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xeb46a6(0x1f2)]({'bots':[]})[_0xeb46a6(0x2a9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xeb46a6(0x1f2)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xeb46a6(0x1f2)]({'secure':{},'blacklist':[]})[_0xeb46a6(0x2a9)]();const saltRounds=0xa,mixpanel=Mixpanel[_0xeb46a6(0x277)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0xeb46a6(0xe5)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xeb46a6(0x1c3)]&&(settings[_0xeb46a6(0x1c3)]!=''&&settings[_0xeb46a6(0x1c3)]!='***')&&settings[_0xeb46a6(0xe8)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x3b77b6,_0x2ec285)=>{const _0x3b19fa=_0xeb46a6,_0x38c572=/#[A-Z]{3}#/g;if(typeof _0x3b77b6==_0x3b19fa(0x1f1)){!_0x2ec285?_0x3b77b6=_0x3b77b6['replace'](_0x38c572,''):(_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#BLU#/g,'\x1b[34m'),_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#RED#/g,_0x3b19fa(0x124)),_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#YEL#/g,'\x1b[33m'),_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#MAG#/g,_0x3b19fa(0x27f)),_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#CYA#/g,_0x3b19fa(0x194)),_0x3b77b6=_0x3b77b6[_0x3b19fa(0x28b)](/#RES#/g,_0x3b19fa(0x188)));;}return _0x3b77b6;},logger={'screen':_0x248dd4=>{const _0x245088=_0xeb46a6;console[_0x245088(0x299)](parseColor(_0x248dd4,!![]));},'simple':_0x3f3cd9=>{const _0x43ed3a=_0xeb46a6;console[_0x43ed3a(0x299)](parseColor(_0x3f3cd9,!![])),loggerfile[_0x43ed3a(0x2a9)](util['format'](parseColor(_0x3f3cd9,![]))+'\x0a');},'full':async _0x19a63e=>{const _0x524c7e=_0xeb46a6,_0x36b4c=getTimeStamp()+_0x524c7e(0x11f)+_0x19a63e;console[_0x524c7e(0x299)](parseColor(_0x36b4c,!![])),loggerfile[_0x524c7e(0x2a9)](util[_0x524c7e(0x18b)](parseColor(_0x36b4c,![]))+'\x0a');if(tgBot&&settings[_0x524c7e(0x165)]&&settings[_0x524c7e(0xdc)]!=_0x524c7e(0xc6))await sendTelegram(settings[_0x524c7e(0x165)],_0x524c7e(0x1f5)+parseColor(_0x19a63e,![]));},'debug':async(_0x5a491e,_0x10ebba='')=>{const _0x329dd3=_0xeb46a6,_0x1447ea=getTimeStamp()+_0x329dd3(0x1d2)+_0x5a491e;if(debugging)console[_0x329dd3(0x299)](parseColor(_0x1447ea,!![]));loggerfile[_0x329dd3(0x2a9)](util[_0x329dd3(0x18b)](parseColor(_0x1447ea,![]))+'\x0a');if(_0x10ebba){if(debugging)console[_0x329dd3(0x299)](_0x10ebba);loggerfile[_0x329dd3(0x2a9)](util['format'](_0x10ebba)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x29c390){const _0x32a6a9=_0xeb46a6;_0x29c390['toString']()[_0x32a6a9(0xbc)](_0x32a6a9(0xd7))?(logger['simple']('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x29c390['port']+_0x32a6a9(0xc0)),process[_0x32a6a9(0x28a)]({'terminate':!![]},_0x1e67fa=>{})):logger[_0x32a6a9(0x14a)](_0x29c390);}),process['on'](_0xeb46a6(0x192),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0xeb46a6(0x29b),()=>{const _0x514589=_0xeb46a6;stopAllBots(),process[_0x514589(0x192)](0x0);}),process['on'](_0xeb46a6(0x200),()=>{const _0x54bcc2=_0xeb46a6;stopAllBots(),process[_0x54bcc2(0x192)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xeb46a6(0x142))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xeb46a6(0x145)),app=express(),http=require(_0xeb46a6(0x193))[_0xeb46a6(0x1d1)](app);app[_0xeb46a6(0x267)](fileUpload({'useTempFiles':!![]})),app[_0xeb46a6(0x102)](_0xeb46a6(0xb4),async(_0x2063cc,_0xe6183b)=>{const _0x27676f=_0xeb46a6,_0x4842d3=_0x2063cc[_0x27676f(0x22c)][_0x27676f(0x21e)],_0x4a5bbe=getClientsWithBotID(_0x27676f(0x164)),_0x111dde=_0x2063cc['headers'][_0x27676f(0x268)],_0x262239=timelyDecrypt(_0x111dde,![]),_0x88d03=_0x4a5bbe['find'](_0x62088d=>_0x62088d['uuid']==_0x262239);if(_0x88d03){const _0x1b3d1d=normalizeIP(_0x2063cc[_0x27676f(0xc3)]['remoteAddress'])[_0x27676f(0x17f)],_0x27e314=_0x2063cc['headers']['tkn'];if(validateAccess(_0x27e314,_0x262239,_0x1b3d1d)[_0x27676f(0x180)])_0x4842d3==_0x27676f(0x134)&&await backupConfigFiles(),await zipFiles(_0x4842d3),_0xe6183b[_0x27676f(0x141)](zippath+(_0x4842d3+'.zip'),_0x503936=>{const _0x12e061=_0x27676f;_0x503936&&(logger[_0x12e061(0x263)](_0x12e061(0x24a)+_0x4842d3),logger['simple'](_0x503936));});else logger['full'](_0x27676f(0x1cb)+_0x4842d3+_0x27676f(0x16e));}else logger[_0x27676f(0x263)](_0x27676f(0x1cb)+_0x4842d3+'\x20(2)');}),app[_0xeb46a6(0x241)]('/upload-backup',async(_0x157c81,_0x1f47ec)=>{const _0x54c7cb=_0xeb46a6,_0x40ea59=getClientsWithBotID(_0x54c7cb(0x164)),_0x38c2b1=_0x157c81[_0x54c7cb(0xc8)][_0x54c7cb(0x268)],_0x50d9a4=timelyDecrypt(_0x38c2b1,![]),_0x1008f1=_0x40ea59['find'](_0x4f7dc2=>_0x4f7dc2[_0x54c7cb(0x268)]==_0x50d9a4);logger['debug'](_0x54c7cb(0x1dd));if(_0x1008f1){const _0x2b77b8=normalizeIP(_0x157c81[_0x54c7cb(0xc3)]['remoteAddress'])['store'],_0x5d34a0=_0x157c81[_0x54c7cb(0xc8)][_0x54c7cb(0x1c9)];if(validateAccess(_0x5d34a0,_0x50d9a4,_0x2b77b8)[_0x54c7cb(0x180)]){if(_0x157c81['files']){const _0x85acdb=_0x157c81[_0x54c7cb(0x12f)]['backupfile'];await _0x85acdb['mv'](temppath+_0x85acdb['name']),_0x1f47ec['send']({'status':!![],'message':_0x54c7cb(0x249)});const _0x32e9b1=getBotsWithMode();_0x32e9b1[_0x54c7cb(0x1e3)]>0x0?confirmRestore(temppath,_0x85acdb[_0x54c7cb(0x1d9)]):unzipFile(temppath,_0x85acdb['name']);}}else logger[_0x54c7cb(0x263)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x54c7cb(0xae));}),app['use'](express[_0xeb46a6(0x25e)](path[_0xeb46a6(0x17a)](__dirname,bbpath2,_0xeb46a6(0xca)))),app[_0xeb46a6(0x267)](express[_0xeb46a6(0x25e)](path[_0xeb46a6(0x17a)](__dirname,bbpath2,_0xeb46a6(0x223)))),app[_0xeb46a6(0x102)]('/',function(_0x2074a3,_0x1e6be0){const _0x5a4c02=_0xeb46a6;_0x1e6be0[_0x5a4c02(0x146)](path[_0x5a4c02(0x17a)](__dirname,bbpath2,_0x5a4c02(0xca),_0x5a4c02(0x264)));}),app[_0xeb46a6(0x102)](_0xeb46a6(0x1a5),function(_0x1ef6d5,_0x24360f){const _0x299c19=_0xeb46a6;_0x24360f['sendFile'](path[_0x299c19(0x17a)](__dirname,bbpath2,'build',_0x299c19(0x264)));}),app[_0xeb46a6(0x102)](_0xeb46a6(0x1aa),(_0x20433b,_0x55ec36)=>{const _0x17e4f0=_0xeb46a6;_0x55ec36[_0x17e4f0(0x146)](path[_0x17e4f0(0x17a)](__dirname,bbpath2,'build',_0x17e4f0(0x264)));}),app[_0xeb46a6(0x102)]('/:bot/performance',(_0x5e0146,_0x439e71)=>{const _0x3e5812=_0xeb46a6;_0x439e71['sendFile'](path['join'](__dirname,bbpath2,_0x3e5812(0x223),_0x3e5812(0x264)));}),app[_0xeb46a6(0x102)]('/:bot/coins',(_0x3f3085,_0x338fb4)=>{const _0x27ff0c=_0xeb46a6;_0x338fb4[_0x27ff0c(0x146)](path[_0x27ff0c(0x17a)](__dirname,bbpath2,_0x27ff0c(0x223),_0x27ff0c(0x264)));}),app[_0xeb46a6(0x102)](_0xeb46a6(0x167),(_0x39035c,_0x213156)=>{const _0xdd248f=_0xeb46a6;_0x213156[_0xdd248f(0x146)](path[_0xdd248f(0x17a)](__dirname,bbpath2,_0xdd248f(0x223),_0xdd248f(0x264)));}),app[_0xeb46a6(0x102)](_0xeb46a6(0x10a),(_0x29dddf,_0x5f46d1)=>{const _0x2c2124=_0xeb46a6;_0x5f46d1[_0x2c2124(0x146)](path[_0x2c2124(0x17a)](__dirname,bbpath2,_0x2c2124(0x223),_0x2c2124(0x264)));}),app[_0xeb46a6(0x102)]('/:bot/support',(_0x367805,_0x41d724)=>{const _0x22c4ba=_0xeb46a6;_0x41d724[_0x22c4ba(0x146)](path[_0x22c4ba(0x17a)](__dirname,bbpath2,_0x22c4ba(0x223),_0x22c4ba(0x264)));});if(HOST)http[_0xeb46a6(0x237)](PORT,HOST);else http['listen'](PORT);const io=require(_0xeb46a6(0x248))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5ab3be=_0xeb46a6;let _0x25da3a=_0x5ab3be(0x23e);const _0x1d83c4=networkInterfaces(),_0x1f7308={};for(const _0x667e7d of Object[_0x5ab3be(0x121)](_0x1d83c4)){for(const _0xe89fca of _0x1d83c4[_0x667e7d]){if((_0xe89fca[_0x5ab3be(0x281)]==_0x5ab3be(0x15a)||_0xe89fca['family']==0x4)&&!_0xe89fca['internal']){const _0x691bf9=ipaddr[_0x5ab3be(0x290)](_0xe89fca[_0x5ab3be(0x294)])['range']();_0x691bf9!=_0x5ab3be(0x224)&&(!_0x1f7308[_0x667e7d]&&(_0x1f7308[_0x667e7d]=[]),_0x1f7308[_0x667e7d]['push'](_0xe89fca[_0x5ab3be(0x294)]),_0x25da3a=_0xe89fca['address']);}}}return{'serverip':_0x25da3a,'netinterfaces':_0x1f7308};}async function startServer(){const _0x30b84d=_0xeb46a6,{serverip:_0x2ca818,netinterfaces:_0x1763a5}=getServerIP();logger[_0x30b84d(0x14a)](''),logger[_0x30b84d(0x14a)]('-----------------------------------------------------------------------------------'),await logger[_0x30b84d(0x263)](_0x30b84d(0x1b7)+serverversion+'#RES#\x20'+(environment==_0x30b84d(0x201)?_0x30b84d(0x278):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x30b84d(0x27b))+(_0x30b84d(0x118)+_0x2ca818+':'+PORT+_0x30b84d(0x221))),logger[_0x30b84d(0x14a)](_0x30b84d(0xe9));if(config[_0x30b84d(0x1e3)]!=0x0)for(const _0x169416 of config){const _0x18a7b7=_0x169416['mode']=='auto'?'a':'m';if(_0x169416[_0x30b84d(0xcc)]==_0x30b84d(0x2b3)||_0x169416[_0x30b84d(0xcc)]==_0x30b84d(0x289))await logger[_0x30b84d(0x263)](_0x30b84d(0x2a5)+_0x18a7b7+')\x20|\x20Bot\x20'+_0x169416[_0x30b84d(0x191)]+'\x20|\x20'+_0x169416[_0x30b84d(0x29e)]),startBot([_0x169416[_0x30b84d(0x191)],userID],{'cwd':bbpath},function(_0x3c7f11){if(_0x3c7f11)logger['full'](_0x3c7f11);});else(_0x169416[_0x30b84d(0xcc)]==_0x30b84d(0x23c)||_0x169416['status']==_0x30b84d(0xee))&&await logger[_0x30b84d(0x263)](_0x30b84d(0x29a)+_0x18a7b7+')\x20\x20\x20|\x20Bot\x20'+_0x169416[_0x30b84d(0x191)]+_0x30b84d(0x2a1)+_0x169416[_0x30b84d(0x29e)]);}else!newBot&&logger[_0x30b84d(0x14a)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x30b84d(0x14a)](_0x30b84d(0xe9)),logger[_0x30b84d(0x14a)](''),await logger[_0x30b84d(0xe1)](_0x30b84d(0xbe)+nodeversion),await logger['debug'](_0x30b84d(0x1fa),_0x1763a5);}function startSocket(){const _0x48b224=_0xeb46a6;io['on'](_0x48b224(0xe0),_0xaa416a=>{const _0x2fa2ad=_0x48b224;let _0x44d3c7,_0x59c971,_0x6d1ec,_0x1e90f1,_0x5eacb6;const _0x115274=_0xaa416a[_0x2fa2ad(0x111)][_0x2fa2ad(0xc8)][_0x2fa2ad(0x170)];_0x59c971=_0x115274[_0x2fa2ad(0x1cf)](/bot[0-9]{3}/);if(_0x59c971)_0x6d1ec=_0x59c971[0x0][_0x2fa2ad(0x1cf)](/[0-9]{3}/);if(_0x6d1ec)_0x44d3c7=_0x6d1ec[0x0];else _0x44d3c7=_0x2fa2ad(0x164);const _0x1417ef=_0xaa416a['handshake'][_0x2fa2ad(0x15d)]['encryptedUuid'];if(!_0x1417ef)_0xaa416a[_0x2fa2ad(0xb5)](_0x2fa2ad(0xcc),{'publicKey':secure[_0x2fa2ad(0x139)]});else{_0x1e90f1=timelyDecrypt(_0x1417ef,![]);if(!_0x1e90f1)_0xaa416a[_0x2fa2ad(0xb5)]('status',{'publicKey':secure[_0x2fa2ad(0x139)]});else{_0x5eacb6=normalizeIP(_0xaa416a[_0x2fa2ad(0x2b7)][_0x2fa2ad(0x1e4)])['store'];if(!devices[_0x1e90f1])devices[_0x1e90f1]={'uuid':_0x1e90f1,'access':{'token':null}};devices[_0x1e90f1]['ip']=_0x5eacb6;const _0x37826f=addClient(_0xaa416a['id'],_0x1e90f1,_0x44d3c7);setAccess(_0x37826f),emitMessages(),_0xaa416a['on'](_0x2fa2ad(0x1ed),_0xb48c59=>{const _0x9669cf=_0x2fa2ad,_0x677991=timelyDecrypt(_0xb48c59[_0x9669cf(0xfd)],!![],_0x9669cf(0x129));if(_0x677991){_0xb48c59={'username':_0xb48c59['username'],'password':_0x677991},devices[_0x1e90f1][_0x9669cf(0x29c)]=validateCredentials(_0xb48c59,_0x1e90f1);if(devices[_0x1e90f1]['access'][_0x9669cf(0x180)]==![]&&devices[_0x1e90f1][_0x9669cf(0x29c)][_0x9669cf(0xf2)]==_0x9669cf(0xeb))_0xaa416a['emit'](_0x9669cf(0xcc),{'access':devices[_0x1e90f1][_0x9669cf(0x29c)]}),loginAccess2FA(_0x1e90f1,_0x5eacb6);else{if(devices[_0x1e90f1][_0x9669cf(0x29c)][_0x9669cf(0x180)]==![]&&devices[_0x1e90f1][_0x9669cf(0x29c)][_0x9669cf(0xf2)]=='invalid\x20credentials')_0xaa416a[_0x9669cf(0xb5)]('status',{'access':devices[_0x1e90f1][_0x9669cf(0x29c)]});else devices[_0x1e90f1][_0x9669cf(0x29c)][_0x9669cf(0x180)]&&devices[_0x1e90f1]['access'][_0x9669cf(0xf2)]==_0x9669cf(0x256)&&(getClientsWithUuid(_0x1e90f1)[_0x9669cf(0x182)](_0x5adbb2=>{setAccess(_0x5adbb2);}),logger[_0x9669cf(0xe1)]('Logged\x20in\x20user\x20...'+_0x1e90f1[_0x9669cf(0x130)](-0x8)),setTokenRefresh(_0x1e90f1),setSessionTimeout(_0x9669cf(0x1ed),_0x1e90f1));}}else logger['full'](_0x9669cf(0x2a4));}),_0xaa416a['on'](_0x2fa2ad(0x12d),()=>{resetPassword();}),_0xaa416a['on'](_0x2fa2ad(0x1bd),_0x1a154f=>{removeClient(_0xaa416a['id']);}),_0x44d3c7==_0x2fa2ad(0x164)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x360426){const _0x469aef=_0xeb46a6;if(_0x360426!=_0x469aef(0x164)&&config['apiKey']!=''){if(pid[_0x360426])pid[_0x360426][_0x469aef(0x28a)]({'function':'initclient','args':null});}_0x360426!=_0x469aef(0x164)&&broadcastToBots(_0x469aef(0x239),JSON['stringify'](config));}function reloadBotManager(){const _0x28217d=_0xeb46a6;getClientsWithBotID(_0x28217d(0x164))[_0x28217d(0x182)](_0x372a7e=>{const _0x2a2ed0=_0x28217d;getSocket(_0x372a7e['id'])[_0x2a2ed0(0xb5)](_0x2a2ed0(0xcc),{'access':{'allow':![],'reason':_0x2a2ed0(0x26a),'token':null}});});}function getSocket(_0x26bb83){const _0x503480=_0xeb46a6,_0x1d763e=io['_nsps'][_0x503480(0x102)]('/');return _0x1d763e[_0x503480(0x20a)]['get'](_0x26bb83);}function setAccess(_0x10f4e8){const _0x2fe711=_0xeb46a6,_0x381143=getSocket(_0x10f4e8['id']),_0x4e939e=_0x10f4e8[_0x2fe711(0x268)],_0x55dcee=_0x10f4e8['bot'];devices[_0x4e939e][_0x2fe711(0x29c)]=validateAccess(devices[_0x4e939e][_0x2fe711(0x29c)]['token'],_0x4e939e),logger[_0x2fe711(0xe1)](_0x2fe711(0xcb)+devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0xf2)]+_0x2fe711(0x210)+_0x10f4e8['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x4e939e[_0x2fe711(0x130)](-0x8)),_0x381143['join'](_0x4e939e);if(devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0x180)]){_0x381143[_0x2fe711(0x17a)](_0x55dcee);if(_0x55dcee==_0x2fe711(0x164))initializeSocketBotManager(_0x381143);else initializeSocketBot(_0x381143);initClient(_0x55dcee);}devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0x2ad)]&&devices[_0x4e939e][_0x2fe711(0x29c)]['reason']==_0x2fe711(0x235)&&setSessionTimeout(_0x2fe711(0x107),_0x4e939e),devices[_0x4e939e]['access'][_0x2fe711(0x2ad)]&&devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0xf2)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x2fe711(0x1ed),_0x4e939e),_0x381143['emit'](_0x2fe711(0xcc),{'status':_0x10f4e8[_0x2fe711(0x25f)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4e939e][_0x2fe711(0x29c)],'externalip':devices[_0x4e939e]['ip'],'publicKey':secure[_0x2fe711(0x139)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0x180)]==![]&&devices[_0x4e939e][_0x2fe711(0x29c)][_0x2fe711(0xf2)]==_0x2fe711(0x25d)&&temporaryAccess2FA(_0x4e939e,devices[_0x4e939e]['ip']);}function setSessionTimeout(_0x2045d3,_0x1caef4){const _0x58b68e=_0xeb46a6;let _0x3464b6;if(_0x2045d3==_0x58b68e(0x1ed))_0x3464b6=loginExpiry*0x3c*0x3e8;else _0x3464b6=devices[_0x1caef4]['telegramIpApproval'][_0x58b68e(0x19f)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x1caef4][_0x58b68e(0x1c4)]['timestamp']);if(devices[_0x1caef4][_0x58b68e(0x252)])clearTimeout(devices[_0x1caef4][_0x58b68e(0x252)]);devices[_0x1caef4][_0x58b68e(0x252)]=setTimeout(()=>{const _0x1e4ec7=_0x58b68e;if(devices[_0x1caef4]['pidRefreshToken'])clearTimeout(devices[_0x1caef4][_0x1e4ec7(0x1d5)]);removeSocketListeners(_0x1caef4),addBlacklist(_0x1caef4),devices[_0x1caef4]['telegramIpApproval']=null,devices[_0x1caef4]['telegram2FaApproval']=null,devices[_0x1caef4]['access'][_0x1e4ec7(0x2ad)]=null,logger[_0x1e4ec7(0xe1)](_0x1e4ec7(0x2a2)+_0x1caef4[_0x1e4ec7(0x130)](-0x8)),devices[_0x1caef4][_0x1e4ec7(0x29c)]=validateAccess(devices[_0x1caef4][_0x1e4ec7(0x29c)][_0x1e4ec7(0x2ad)],_0x1caef4),!(devices[_0x1caef4]['access'][_0x1e4ec7(0x180)]&&devices[_0x1caef4][_0x1e4ec7(0x29c)][_0x1e4ec7(0xf2)]==_0x1e4ec7(0x10f))&&(_0x2045d3==_0x1e4ec7(0x1ed)?io['to'](_0x1caef4)[_0x1e4ec7(0xb5)](_0x1e4ec7(0xcc),{'access':{'allow':![],'reason':_0x1e4ec7(0xde),'token':null}}):io['to'](_0x1caef4)['emit']('status',{'access':{'allow':![],'reason':_0x1e4ec7(0x2b6),'token':null}})),devices[_0x1caef4][_0x1e4ec7(0x29c)][_0x1e4ec7(0x2ad)]=null;},_0x3464b6);}function setTokenRefresh(_0x210d2b){const _0x148d69=_0xeb46a6;if(devices[_0x210d2b]['pidRefreshToken'])clearTimeout(devices[_0x210d2b][_0x148d69(0x1d5)]);devices[_0x210d2b][_0x148d69(0x1d5)]=setTimeout(()=>{const _0x7bd3e3=_0x148d69;getClientsWithUuid(_0x210d2b)[_0x7bd3e3(0x1e3)]!=0x0?(devices[_0x210d2b][_0x7bd3e3(0x29c)]=refreshToken(_0x210d2b),io['to'](_0x210d2b)['emit'](_0x7bd3e3(0xcc),{'status':_0x7bd3e3(0x1e1),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x210d2b][_0x7bd3e3(0x29c)],'externalip':devices[_0x210d2b]['ip'],'publicKey':secure[_0x7bd3e3(0x139)],'validInstallation':validInstallation}),setTokenRefresh(_0x210d2b)):clearTimeout(devices[_0x210d2b][_0x7bd3e3(0x1d5)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4d1f07){const _0x1f4a4a=_0xeb46a6,_0x4152ac=getClient(_0x4d1f07['id'])[_0x1f4a4a(0x268)];_0x4d1f07[_0x1f4a4a(0xb5)](_0x1f4a4a(0x239),config),_0x4d1f07[_0x1f4a4a(0xb5)]('settings',cleanSettings()),_0x4d1f07['on'](_0x1f4a4a(0x251),_0x294ced=>{if(validateAccess(_0x294ced,_0x4152ac)['allow'])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x4d1f07['on'](_0x1f4a4a(0x13d),(_0x158d2c,_0x96aec5)=>{const _0xd3d341=_0x1f4a4a;if(validateAccess(_0x96aec5,_0x4152ac)[_0xd3d341(0x180)])toggleBot(_0x158d2c[_0xd3d341(0x191)],_0x158d2c[_0xd3d341(0xcc)],_0x158d2c[_0xd3d341(0x2b1)]);else logger['full'](_0xd3d341(0x17d));}),_0x4d1f07['on'](_0x1f4a4a(0x198),(_0x568476,_0x2acf39)=>{const _0x65a4e3=_0x1f4a4a;if(validateAccess(_0x2acf39,_0x4152ac)[_0x65a4e3(0x180)])toggleBotMode(_0x568476);else logger[_0x65a4e3(0x263)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4d1f07['on'](_0x1f4a4a(0x254),(_0x49d406,_0x4501c0)=>{const _0x1e89d4=_0x1f4a4a;if(validateAccess(_0x4501c0,_0x4152ac)[_0x1e89d4(0x180)])deleteBot(_0x49d406);else logger[_0x1e89d4(0x263)](_0x1e89d4(0x1c1));}),_0x4d1f07['on'](_0x1f4a4a(0x1f8),(_0x45e281,_0x161e3f)=>{const _0x22c933=_0x1f4a4a;if(validateAccess(_0x161e3f,_0x4152ac)[_0x22c933(0x180)])storeSettings(_0x45e281,!![]);else logger['full'](_0x22c933(0x233));}),_0x4d1f07['on']('update-bb',_0x358d49=>{const _0x583182=_0x1f4a4a;if(validateAccess(_0x358d49,_0x4152ac)[_0x583182(0x180)])updateBB(_0x583182(0xce));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4d1f07['on'](_0x1f4a4a(0x1be),_0x3eeb21=>{const _0x56b14c=_0x1f4a4a;if(validateAccess(_0x3eeb21,_0x4152ac)[_0x56b14c(0x180)])updateBB(_0x56b14c(0xfc));else logger['full'](_0x56b14c(0x123));}),_0x4d1f07['on'](_0x1f4a4a(0x242),_0x474be8=>{const _0x5a9279=_0x1f4a4a;if(validateAccess(_0x474be8,_0x4152ac)[_0x5a9279(0x180)]){const _0x404be4=getClient(_0x4d1f07['id']);if(_0x404be4)getBackupFiles(_0x404be4[_0x5a9279(0x268)]);else logger['full'](_0x5a9279(0x1e8));}else logger[_0x5a9279(0x263)](_0x5a9279(0x1b5));}),_0x4d1f07['on'](_0x1f4a4a(0x234),(_0x27ad0b,_0x2eb744)=>{const _0x15ba5c=_0x1f4a4a;if(validateAccess(_0x2eb744,_0x4152ac)[_0x15ba5c(0x180)])restoreBackupFile(_0x27ad0b);else logger[_0x15ba5c(0x263)](_0x15ba5c(0x15f));}),_0x4d1f07['on'](_0x1f4a4a(0x215),_0xcd0b30=>{const _0x626123=_0x1f4a4a;if(validateAccess(_0xcd0b30,_0x4152ac)[_0x626123(0x180)])getMessages();else logger['full'](_0x626123(0x270));}),_0x4d1f07['on'](_0x1f4a4a(0x10d),(_0x433693,_0x33f61f)=>{const _0x9e269=_0x1f4a4a;if(validateAccess(_0x33f61f,_0x4152ac)[_0x9e269(0x180)])confirmMessage(_0x433693);else logger[_0x9e269(0x263)](_0x9e269(0x1e5));}),_0x4d1f07['on'](_0x1f4a4a(0x132),_0x1e8a5f=>{const _0x3d4159=_0x1f4a4a;if(validateAccess(_0x1e8a5f,_0x4152ac)['allow']){if(devices[_0x4152ac][_0x3d4159(0x1d5)])clearTimeout(devices[_0x4152ac][_0x3d4159(0x1d5)]);if(devices[_0x4152ac][_0x3d4159(0x252)])clearTimeout(devices[_0x4152ac][_0x3d4159(0x252)]);removeSocketListeners(getClient(_0x4d1f07['id'])[_0x3d4159(0x268)]),addBlacklist(_0x4152ac),devices[_0x4152ac]['telegramIpApproval']=null,devices[_0x4152ac]['telegram2FaApproval']=null,devices[_0x4152ac]['access'][_0x3d4159(0x2ad)]=null,logger[_0x3d4159(0xe1)](_0x3d4159(0xc9)+_0x4152ac['slice'](-0x8)),io['to'](getClient(_0x4d1f07['id'])[_0x3d4159(0x268)])[_0x3d4159(0xb5)](_0x3d4159(0xcc),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x3d4159(0x263)](_0x3d4159(0x1cd));});}function initializeSocketBot(_0x3ce963){const _0x15bdb7=_0xeb46a6,_0x3539f6=getClient(_0x3ce963['id'])['bot'],_0x5061d7=getClient(_0x3ce963['id'])[_0x15bdb7(0x268)];_0x3ce963['on']('get-logs',(_0x1334a6,_0x3bd367)=>{const _0x99598d=_0x15bdb7;if(validateAccess(_0x3bd367,_0x5061d7)[_0x99598d(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6][_0x99598d(0x28a)]({'function':_0x99598d(0x12b),'args':_0x1334a6});}else logger[_0x99598d(0x263)](_0x99598d(0x1ab));}),_0x3ce963['on'](_0x15bdb7(0x1de),(_0x285cdc,_0x4189f1)=>{const _0x558059=_0x15bdb7;if(validateAccess(_0x4189f1,_0x5061d7)[_0x558059(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6][_0x558059(0x28a)]({'function':'deleteHistoryAlerts','args':_0x285cdc});}else logger[_0x558059(0x263)](_0x558059(0xac));}),_0x3ce963['on'](_0x15bdb7(0x22f),(_0x31a8ef,_0x59f488)=>{const _0x52cd3a=_0x15bdb7;if(validateAccess(_0x59f488,_0x5061d7)[_0x52cd3a(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6]['send']({'function':_0x52cd3a(0xb7),'args':_0x31a8ef});}else logger[_0x52cd3a(0x263)](_0x52cd3a(0x17b));}),_0x3ce963['on']('store-configuration',(_0x1df9fa,_0x806890)=>{const _0x513642=_0x15bdb7;if(validateAccess(_0x806890,_0x5061d7)[_0x513642(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6]['send']({'function':_0x513642(0x298),'args':_0x1df9fa});}else logger[_0x513642(0x263)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3ce963['on']('store-headless',(_0x51fe60,_0x59f1a5)=>{const _0x1ce288=_0x15bdb7;if(validateAccess(_0x59f1a5,_0x5061d7)['allow']){if(pid[_0x3539f6])pid[_0x3539f6][_0x1ce288(0x28a)]({'function':_0x1ce288(0x100),'args':_0x51fe60});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3ce963['on'](_0x15bdb7(0x2af),(_0x4740de,_0x24dabc)=>{const _0x407577=_0x15bdb7;if(validateAccess(_0x24dabc,_0x5061d7)[_0x407577(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6][_0x407577(0x28a)]({'function':_0x407577(0x257),'args':_0x4740de});}else logger[_0x407577(0x263)](_0x407577(0x17c));}),_0x3ce963['on'](_0x15bdb7(0x295),_0x47b50d=>{const _0x2e3dcc=_0x15bdb7;if(validateAccess(_0x47b50d,_0x5061d7)[_0x2e3dcc(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6][_0x2e3dcc(0x28a)]({'function':_0x2e3dcc(0xcd),'args':null});}else logger['full'](_0x2e3dcc(0x26f));}),_0x3ce963['on'](_0x15bdb7(0x131),_0x31f9a4=>{const _0x5eaacf=_0x15bdb7;if(validateAccess(_0x31f9a4,_0x5061d7)['allow']){if(pid[_0x3539f6])pid[_0x3539f6][_0x5eaacf(0x28a)]({'function':_0x5eaacf(0x1e2),'args':null});}else logger[_0x5eaacf(0x263)](_0x5eaacf(0xb2));}),_0x3ce963['on'](_0x15bdb7(0x1e6),(_0x515af9,_0xb69368)=>{const _0x47b9b2=_0x15bdb7;if(validateAccess(_0xb69368,_0x5061d7)[_0x47b9b2(0x180)]){if(pid[_0x3539f6])pid[_0x3539f6][_0x47b9b2(0x28a)]({'function':_0x47b9b2(0x18d),'args':_0x515af9});}else logger[_0x47b9b2(0x263)](_0x47b9b2(0x125));}),_0x3ce963['on'](_0x15bdb7(0x13e),_0x1ebb86=>{const _0x5d130b=_0x15bdb7;if(validateAccess(_0x1ebb86,_0x5061d7)['allow']){if(pid[_0x3539f6])pid[_0x3539f6][_0x5d130b(0x28a)]({'function':_0x5d130b(0x24c),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3ce963['on'](_0x15bdb7(0x22d),_0x17067b=>{const _0x25b1ee=_0x15bdb7;if(validateAccess(_0x17067b,_0x5061d7)['allow']){if(pid[_0x3539f6])pid[_0x3539f6]['send']({'function':_0x25b1ee(0x212),'args':null});}else logger[_0x25b1ee(0x263)](_0x25b1ee(0xf1));}),_0x3ce963['on']('update-bb',_0x3971a5=>{const _0x2d8a76=_0x15bdb7;if(validateAccess(_0x3971a5,_0x5061d7)[_0x2d8a76(0x180)])updateBB(_0x2d8a76(0xce));else logger['full'](_0x2d8a76(0xd6));}),_0x3ce963['on']('get-messages',_0x5df129=>{const _0x2401d9=_0x15bdb7;if(validateAccess(_0x5df129,_0x5061d7)['allow'])getMessages();else logger[_0x2401d9(0x263)](_0x2401d9(0x270));}),_0x3ce963['on']('confirm-message',(_0x474dc4,_0x507be0)=>{const _0x29f9de=_0x15bdb7;if(validateAccess(_0x507be0,_0x5061d7)[_0x29f9de(0x180)])confirmMessage(_0x474dc4);else logger[_0x29f9de(0x263)](_0x29f9de(0x1e5));}),_0x3ce963['on'](_0x15bdb7(0x132),_0x5b9cb0=>{const _0x5357ac=_0x15bdb7;if(validateAccess(_0x5b9cb0,_0x5061d7)['allow']){if(devices[_0x5061d7][_0x5357ac(0x1d5)])clearTimeout(devices[_0x5061d7][_0x5357ac(0x1d5)]);if(devices[_0x5061d7]['pidExpireLogin'])clearTimeout(devices[_0x5061d7][_0x5357ac(0x252)]);removeSocketListeners(getClient(_0x3ce963['id'])[_0x5357ac(0x268)]),addBlacklist(_0x5061d7),devices[_0x5061d7][_0x5357ac(0x1c4)]=null,devices[_0x5061d7][_0x5357ac(0x297)]=null,devices[_0x5061d7][_0x5357ac(0x29c)][_0x5357ac(0x2ad)]=null,logger[_0x5357ac(0xe1)](_0x5357ac(0xc9)+_0x5061d7['slice'](-0x8)),io['to'](getClient(_0x3ce963['id'])[_0x5357ac(0x268)])[_0x5357ac(0xb5)](_0x5357ac(0xcc),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x5357ac(0x263)](_0x5357ac(0x1cd));});}function removeSocketListeners(_0x332e0a){const _0xcb4e5f=_0xeb46a6;getClientsWithUuid(_0x332e0a)[_0xcb4e5f(0x182)](_0x899954=>{getSocket(_0x899954['id'])['removeAllListeners']();});}function cleanSettings(){const _0x6923c9=_0xeb46a6;let _0x433a24=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x433a24={..._0x433a24,'telegramToken':_0x6923c9(0x1d7)}),settings[_0x6923c9(0x1fd)]&&settings[_0x6923c9(0x1fd)]!=''&&(_0x433a24={..._0x433a24,'bbPassword':_0x6923c9(0x1d7)}),settings[_0x6923c9(0x22a)]&&settings[_0x6923c9(0x22a)]!=''&&(_0x433a24={..._0x433a24,'marketcapApi':'************'}),(settings[_0x6923c9(0x1fd)]&&settings['bbPassword']=='***'||settings['telegramToken']&&settings[_0x6923c9(0x1c3)]==_0x6923c9(0xf9)||settings[_0x6923c9(0x22a)]&&settings[_0x6923c9(0x22a)]==_0x6923c9(0xf9))&&(_0x433a24={..._0x433a24,'restored':{'password':settings[_0x6923c9(0x1fd)]==_0x6923c9(0xf9),'telegram':settings[_0x6923c9(0x1c3)]==_0x6923c9(0xf9),'marketcap':settings[_0x6923c9(0x22a)]==_0x6923c9(0xf9)}}),_0x433a24;}async function updateBB(_0x40f547){const _0x1daab2=_0xeb46a6;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x281a38=>{const _0x5d4b2e=_0x5a87;restartBot(_0x281a38[_0x5d4b2e(0x191)]);});if(_0x40f547==_0x1daab2(0xce))process[_0x1daab2(0x28a)]({'update':!![],'environment':environment},_0x592b46=>{});else _0x40f547==_0x1daab2(0xfc)&&process['send']({'reinstall':!![],'environment':environment},_0x166ee9=>{});}function startBot(_0x1268a6,_0x50dfd1,_0x2d3bf5){const _0x53cffb=_0xeb46a6;if(debugging)_0x1268a6[_0x53cffb(0x2ac)]('-d');let _0xe7241d=![];const _0x410c83=_0x1268a6[0x0];_0x50dfd1={..._0x50dfd1,'stdio':[_0x53cffb(0x272),'inherit',_0x53cffb(0x272),_0x53cffb(0x216)]},pid[_0x410c83]=childProcess[_0x53cffb(0xc4)](botfile,_0x1268a6,_0x50dfd1),pid[_0x410c83]['on'](_0x53cffb(0x104),_0x4140f0=>{const _0x120168=_0x53cffb;switch(Object[_0x120168(0x121)](_0x4140f0)[0x0]){case _0x120168(0x29e):updateBotName(_0x410c83,_0x4140f0[_0x120168(0x29e)]);break;case'updatebotmanager':updateBotManager();break;case _0x120168(0xcc):updateStatus(_0x410c83,_0x4140f0[_0x120168(0xcc)]);break;case _0x120168(0x2b1):updateLive(_0x410c83,_0x4140f0[_0x120168(0x2b1)]);break;case'started':updateLive(_0x410c83,_0x4140f0[_0x120168(0x225)]),io['to'](_0x410c83)[_0x120168(0xb5)](_0x120168(0xcc),{'access':{'allow':![],'reason':_0x120168(0x26a),'token':null}});break;case _0x120168(0x12e):_0x4140f0['stop']==_0x120168(0x1a6)&&restartBot(_0x410c83);_0x4140f0[_0x120168(0x12e)]==_0x120168(0x2ae)&&toggleBot(_0x410c83,_0x120168(0x23c),_0x120168(0x228));break;case _0x120168(0x14f):sendTelegramBot(_0x410c83,_0x4140f0[_0x120168(0x14f)]);break;case _0x120168(0x24b):sendTelegramMsg(_0x4140f0['telegrammsg']);break;case'function':io['to'](_0x410c83)[_0x120168(0xb5)](_0x4140f0[_0x120168(0xf4)],_0x4140f0[_0x120168(0xf7)]);break;}}),pid[_0x410c83]['on']('error',function(_0x1e8da6){if(_0xe7241d)return;_0xe7241d=!![],_0x2d3bf5(_0x1e8da6);}),pid[_0x410c83]['on']('exit',async function(_0x1cc1e6){const _0x535e64=_0x53cffb;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0xe7241d)return;_0xe7241d=!![],_0x2d3bf5(null);const _0xa09c83=dbConfig['get'](_0x535e64(0x239))['find']({'botID':_0x410c83})[_0x535e64(0xd3)]();_0xa09c83&&(_0xa09c83[_0x535e64(0xcc)]==_0x535e64(0x2b3)||_0xa09c83[_0x535e64(0xcc)]==_0x535e64(0x289))&&(await sleep(0x3e8),updateLive(_0x410c83,'stopped'),logger[_0x535e64(0x263)](_0x535e64(0x181)+_0x410c83),startBot([_0x410c83,userID],{'cwd':bbpath},function(_0x2339ac){const _0xa27f63=_0x535e64;if(_0x2339ac)logger[_0xa27f63(0x263)](_0x2339ac);}));});}function stopBot(_0x341345){const _0x219133=_0xeb46a6;getClientsWithBotID(_0x341345)[_0x219133(0x182)](_0x2a5198=>{getSocket(_0x2a5198['id'])['disconnect'](!![]),removeClient(_0x2a5198['id']);}),pid[_0x341345]&&(pid[_0x341345][_0x219133(0x2ae)](),pid[_0x341345]=null);}function stopAllBots(){const _0x5df9f7=_0xeb46a6;terminating=!![];const _0xfe5542=getEnabledBots();_0xfe5542[_0x5df9f7(0x182)](_0x252a90=>{stopBot(_0x252a90['botID']);});}function restartBot(_0x3b5c25){if(pid[_0x3b5c25])pid[_0x3b5c25]['kill']();}function addBot(){const _0x41a869=_0xeb46a6;let _0x4b3216;for(let _0x4f7d6c=0x1;_0x4f7d6c<0x3e9;_0x4f7d6c++){_0x4b3216=_0x4f7d6c[_0x41a869(0x1fb)]()['padStart'](0x3,'0');let _0x53557d=config[_0x41a869(0x186)](_0x15982b=>_0x15982b[_0x41a869(0x191)]==_0x4b3216);if(!_0x53557d)break;}if(_0x4b3216===_0x41a869(0x147)){logger[_0x41a869(0x263)](_0x41a869(0x265));return;}logger[_0x41a869(0x263)](_0x41a869(0x232)+_0x4b3216),dbConfig[_0x41a869(0x102)](_0x41a869(0x239))['push']({'botID':_0x4b3216,'botname':'Bot\x20'+_0x4b3216,'status':_0x41a869(0x289),'live':''})[_0x41a869(0x2a9)](),startBot([_0x4b3216,userID],{'cwd':bbpath},function(_0x5472ed){const _0x411b84=_0x41a869;if(_0x5472ed)logger[_0x411b84(0x263)](_0x5472ed);}),config=getConfiguration(),io['to'](_0x41a869(0x164))[_0x41a869(0xb5)](_0x41a869(0x239),config),broadcastToBots(_0x41a869(0x239),JSON['stringify'](config));}function deleteBot(_0x42f498){const _0x5a7f60=_0xeb46a6;getClientsWithBotID(_0x42f498)[_0x5a7f60(0x182)](_0x55750d=>{const _0x32ffd0=_0x5a7f60;getSocket(_0x55750d['id'])[_0x32ffd0(0x1bd)](!![]),removeClient(_0x55750d['id']);}),dbConfig[_0x5a7f60(0x102)]('bots')[_0x5a7f60(0xed)]({'botID':_0x42f498})['write'](),logger[_0x5a7f60(0x263)]('Deleted\x20Bot\x20'+_0x42f498),stopBot(_0x42f498);try{if(fs[_0x5a7f60(0x213)](path[_0x5a7f60(0x17a)](configpath,_0x5a7f60(0x27c)+_0x42f498+'-config.json')))fs[_0x5a7f60(0x238)](path['join'](configpath,_0x5a7f60(0x27c)+_0x42f498+_0x5a7f60(0xc5)));if(fs[_0x5a7f60(0x213)](path[_0x5a7f60(0x17a)](configpath,_0x5a7f60(0x27c)+_0x42f498+_0x5a7f60(0xd2))))fs[_0x5a7f60(0x238)](path['join'](configpath,_0x5a7f60(0x27c)+_0x42f498+_0x5a7f60(0xd2)));if(fs['existsSync'](path[_0x5a7f60(0x17a)](configpath,_0x5a7f60(0x27c)+_0x42f498+_0x5a7f60(0x11d))))fs['unlinkSync'](path[_0x5a7f60(0x17a)](configpath,'bot-'+_0x42f498+_0x5a7f60(0x11d)));if(fs[_0x5a7f60(0x213)](path[_0x5a7f60(0x17a)](configpath,_0x5a7f60(0x27c)+_0x42f498+_0x5a7f60(0x114))))fs['unlinkSync'](path[_0x5a7f60(0x17a)](configpath,'bot-'+_0x42f498+_0x5a7f60(0x114)));}catch(_0x4ace29){if(_0x4ace29)logger[_0x5a7f60(0x263)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x4ace29);}config=getConfiguration(),io['to']('botmanager')[_0x5a7f60(0xb5)](_0x5a7f60(0x239),config),broadcastToBots(_0x5a7f60(0x239),JSON[_0x5a7f60(0xdf)](config));}function toggleBot(_0x2887f3,_0xc95c08,_0x567837){const _0x31989e=_0xeb46a6;dbConfig[_0x31989e(0x102)]('bots')[_0x31989e(0x186)]({'botID':_0x2887f3})[_0x31989e(0x174)]({'status':_0xc95c08})[_0x31989e(0x174)]({'live':_0x567837})['write']();if(_0xc95c08==_0x31989e(0x2b3)||_0xc95c08==_0x31989e(0x289))logger['full'](_0x31989e(0xd9)+_0x2887f3),startBot([_0x2887f3,userID],{'cwd':bbpath},function(_0x57dd59){const _0x3a4889=_0x31989e;if(_0x57dd59)logger[_0x3a4889(0x263)](_0x57dd59);});else(_0xc95c08==_0x31989e(0x23c)||_0xc95c08==_0x31989e(0xee))&&(logger['full'](_0x31989e(0x1a1)+_0x2887f3),stopBot(_0x2887f3));config=getConfiguration(),io['to'](_0x31989e(0x164))['emit'](_0x31989e(0x239),config),broadcastToBots(_0x31989e(0x239),JSON[_0x31989e(0xdf)](config));}function toggleStatus(_0x9aae8c){const _0xb8d2cb=_0xeb46a6;let _0x40a4a5=dbConfig[_0xb8d2cb(0x102)]('bots')[_0xb8d2cb(0x186)]({'botID':_0x9aae8c})[_0xb8d2cb(0xd3)](),_0x964b75;if(_0x40a4a5[_0xb8d2cb(0xcc)]===_0xb8d2cb(0x2b3))_0x964b75=_0xb8d2cb(0x23c);else{if(_0x40a4a5[_0xb8d2cb(0xcc)]===_0xb8d2cb(0x289))_0x964b75=_0xb8d2cb(0xee);else{if(_0x40a4a5[_0xb8d2cb(0xcc)]===_0xb8d2cb(0xee))_0x964b75=_0xb8d2cb(0x289);else{if(_0x40a4a5[_0xb8d2cb(0xcc)]===_0xb8d2cb(0x23c))_0x964b75=_0xb8d2cb(0x2b3);}}}return _0x964b75;}function updateStatus(_0x11770,_0x27a8f3){const _0x20f695=_0xeb46a6;dbConfig['get'](_0x20f695(0x239))[_0x20f695(0x186)]({'botID':_0x11770})[_0x20f695(0x174)]({'status':_0x27a8f3})[_0x20f695(0x2a9)](),config=getConfiguration(),io['to'](_0x20f695(0x164))[_0x20f695(0xb5)](_0x20f695(0x239),config),broadcastToBots('bots',JSON[_0x20f695(0xdf)](config));}function updateLive(_0x348466,_0x2b8ec1){const _0x59c3b4=_0xeb46a6;dbConfig[_0x59c3b4(0x102)](_0x59c3b4(0x239))[_0x59c3b4(0x186)]({'botID':_0x348466})[_0x59c3b4(0x174)]({'live':_0x2b8ec1})[_0x59c3b4(0x2a9)](),config=getConfiguration(),io['to'](_0x59c3b4(0x164))['emit'](_0x59c3b4(0x239),config),broadcastToBots(_0x59c3b4(0x239),JSON[_0x59c3b4(0xdf)](config));}function _0x5a87(_0xbf7c01,_0x12c4cd){const _0x34b868=_0xa4ba();return _0x5a87=function(_0x13f60f,_0x58bc00){_0x13f60f=_0x13f60f-0xac;let _0xa4bad6=_0x34b868[_0x13f60f];return _0xa4bad6;},_0x5a87(_0xbf7c01,_0x12c4cd);}function updateBotName(_0x417479,_0x457520){const _0x1e265e=_0xeb46a6;dbConfig[_0x1e265e(0x102)]('bots')['find']({'botID':_0x417479})['assign']({'botname':_0x457520})[_0x1e265e(0x2a9)](),config=getConfiguration(),io['to'](_0x1e265e(0x164))[_0x1e265e(0xb5)](_0x1e265e(0x239),config),broadcastToBots(_0x1e265e(0x239),JSON[_0x1e265e(0xdf)](config));}function updateBotManager(){const _0x550db4=_0xeb46a6;config=getConfiguration(),io['to'](_0x550db4(0x164))[_0x550db4(0xb5)](_0x550db4(0x239),config),broadcastToBots(_0x550db4(0x239),JSON[_0x550db4(0xdf)](config));}function toggleBotMode(_0x4273bf){const _0x431c21=_0xeb46a6;if(pid[_0x4273bf])pid[_0x4273bf][_0x431c21(0x28a)]({'function':_0x431c21(0x11c),'args':null});else{const _0x49c461=configpath+_0x431c21(0x27c)+_0x4273bf+'-config.json',_0x1fee98=fs[_0x431c21(0x24d)](_0x49c461),_0x11a0ac=JSON[_0x431c21(0x290)](_0x1fee98),_0x2a1d84=_0x11a0ac['bot'][0x0][_0x431c21(0xf0)];_0x11a0ac[_0x431c21(0x25c)][0x0][_0x431c21(0xf0)]=!_0x2a1d84;const _0x4ddd56=JSON['stringify'](_0x11a0ac,null,0x2);fs[_0x431c21(0x202)](_0x49c461,_0x4ddd56),config=getConfiguration(),io['to']('botmanager')[_0x431c21(0xb5)](_0x431c21(0x239),config),broadcastToBots(_0x431c21(0x239),JSON[_0x431c21(0xdf)](config));}}function validateTelegram(_0x237f96){const _0x205001=_0xeb46a6;if(_0x237f96[_0x205001(0x258)][_0x205001(0x2b4)]!=settings['telegramUsername']&&'@'+_0x237f96[_0x205001(0x258)]['username']!=settings['telegramUsername']||_0x237f96[_0x205001(0x20b)]['id']!=settings[_0x205001(0x165)])return sendTelegram(_0x237f96[_0x205001(0x20b)]['id'],_0x205001(0x25b),{'parse_mode':_0x205001(0x1dc)}),![];return!![];}async function initTelegram(){const _0x153650=_0xeb46a6;tgBot&&(await tgBot['stop'](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x177c46=_0x153650(0x116);_0x177c46+='\x0a',_0x177c46+=_0x153650(0x144),_0x177c46+='/disable\x20-\x20disable\x20notifications\x0a',_0x177c46+=_0x153650(0x1b8),_0x177c46+=_0x153650(0x110),_0x177c46+=_0x153650(0x236),_0x177c46+=_0x153650(0x1df),_0x177c46+=_0x153650(0x11b),_0x177c46+=_0x153650(0x1a9),_0x177c46+=_0x153650(0x250),_0x177c46+=_0x153650(0x10b),_0x177c46+=_0x153650(0x269),_0x177c46+=_0x153650(0x10c),_0x177c46+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x177c46+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x177c46+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x177c46+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x25784e='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x25784e+='\x0a',_0x25784e+=_0x177c46,tgBot['catch']((_0x172571,_0x4fa6b2)=>{const _0x5f27c1=_0x153650;logger[_0x5f27c1(0x14a)](getTimeStamp()+_0x5f27c1(0x2ba)),logger[_0x5f27c1(0xe1)]('Telegraf\x20error:',_0x172571);}),tgBot[_0x153650(0x267)](async(_0x2cff0f,_0x1a6424)=>{const _0x3f8572=_0x153650;if(!(!settings[_0x3f8572(0x165)]&&_0x2cff0f[_0x3f8572(0xce)]['message'][_0x3f8572(0x120)]=='/start')){if(!validateTelegram(_0x2cff0f))return;}_0x1a6424();}),tgBot[_0x153650(0xd0)](_0x153650(0xfb),async _0x119595=>{const _0x3e1dde=_0x153650;if(_0x119595[_0x3e1dde(0x258)][_0x3e1dde(0x2b4)]==settings[_0x3e1dde(0xe8)]||'@'+_0x119595[_0x3e1dde(0x258)]['username']==settings[_0x3e1dde(0xe8)]){if(!settings[_0x3e1dde(0x165)])updateSetting(_0x3e1dde(0x165),_0x119595[_0x3e1dde(0x20b)]['id']);}if(!validateTelegram(_0x119595))return;updateSetting(_0x3e1dde(0x2a6),!![]),await sendTelegram(_0x119595[_0x3e1dde(0x20b)]['id'],_0x25784e);}),tgBot[_0x153650(0xd0)](_0x153650(0x1a0),async _0x3328bc=>{const _0x1d30da=_0x153650;updateSetting(_0x1d30da(0x2a6),!![]),await sendTelegram(_0x3328bc['chat']['id'],'Notifications\x20enabled');}),tgBot[_0x153650(0xd0)](_0x153650(0x1ae),async _0x2e8f18=>{const _0x3a4631=_0x153650;await sendTelegram(_0x2e8f18[_0x3a4631(0x20b)]['id'],'Notifications\x20disabled'),updateSetting(_0x3a4631(0x2a6),![]);}),tgBot[_0x153650(0xd0)]('config',async _0x59ba0c=>{const _0x4e5232=_0x153650,_0x12f3a9=Markup[_0x4e5232(0x1ce)]([Markup['button'][_0x4e5232(0x117)]('Orders','config_orders'),Markup[_0x4e5232(0x159)][_0x4e5232(0x117)](_0x4e5232(0xd4),_0x4e5232(0x18f)),Markup[_0x4e5232(0x159)][_0x4e5232(0x117)](_0x4e5232(0x214),_0x4e5232(0x14e))]);_0x59ba0c['reply'](_0x4e5232(0x160),_0x12f3a9);}),tgBot[_0x153650(0x1fc)]('config_orders',async _0x38ad3e=>{const _0x1d8bdf=_0x153650;_0x38ad3e['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x1d8bdf(0xc6)),updateSetting(_0x1d8bdf(0x2a6),!![]),await sendTelegram(_0x38ad3e[_0x1d8bdf(0x20b)]['id'],_0x1d8bdf(0xb3));}),tgBot[_0x153650(0x1fc)](_0x153650(0x18f),async _0x1b937e=>{const _0x2f66bb=_0x153650;_0x1b937e[_0x2f66bb(0x27a)](),updateSetting('telegramEvents',_0x2f66bb(0xfa)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x1b937e[_0x2f66bb(0x20b)]['id'],_0x2f66bb(0x196));}),tgBot[_0x153650(0x1fc)]('config_all',async _0x2c224c=>{const _0x4348f9=_0x153650;_0x2c224c[_0x4348f9(0x27a)](),updateSetting(_0x4348f9(0xdc),_0x4348f9(0x20e)),updateSetting(_0x4348f9(0x2a6),!![]),await sendTelegram(_0x2c224c[_0x4348f9(0x20b)]['id'],_0x4348f9(0x1af));}),tgBot[_0x153650(0xd0)](_0x153650(0xcc),async _0x9d68ec=>{const _0xf79836=_0x153650,_0x543e94=getBotsWithMode();let _0x51d942=_0xf79836(0x1f0);config[_0xf79836(0x182)](_0x387185=>{const _0x58e530=_0xf79836,_0x503217=_0x543e94[_0x58e530(0x186)](_0x4e0ab4=>_0x4e0ab4['botID']==_0x387185[_0x58e530(0x191)])[_0x58e530(0x292)];_0x51d942+=_0x58e530(0xe3)+_0x387185[_0x58e530(0x191)]+':\x20'+_0x387185[_0x58e530(0xcc)]+_0x58e530(0x2a1)+_0x503217+_0x58e530(0x2a1)+_0x387185[_0x58e530(0x2b1)]+'\x0a';}),_0x51d942+='\x0a',_0x51d942+=_0xf79836(0x15e),_0x51d942+=!settings[_0xf79836(0x2a6)]?_0xf79836(0x138):_0xf79836(0x219),_0x51d942+=settings[_0xf79836(0x2a6)]?settings[_0xf79836(0xdc)]==_0xf79836(0x20e)?_0xf79836(0x23d):_0xf79836(0x157)+settings[_0xf79836(0xdc)]+_0xf79836(0x244):'',await sendTelegram(_0x9d68ec['chat']['id'],_0x51d942,{'parse_mode':_0xf79836(0x1dc)});}),tgBot[_0x153650(0xd0)](_0x153650(0x1a6),async _0x33a75a=>{const _0x58fca1=_0x153650,_0x91ca9d=getEnabledBots();if(_0x91ca9d[_0x58fca1(0x1e3)]==0x0)await sendTelegram(_0x33a75a[_0x58fca1(0x20b)]['id'],_0x58fca1(0x1f4));else{if(_0x91ca9d[_0x58fca1(0x1e3)]>0x1)_0x91ca9d['push']({'botID':'all'});let _0x389c9b=[],_0x2988fc=[];const _0x37d7b6=_0x91ca9d[_0x58fca1(0x1e3)]%0x4==0x0||_0x91ca9d['length']%0x4==0x3||_0x91ca9d[_0x58fca1(0x1e3)]%0x3==0x1?0x4:0x3;let _0x53ccf6=0x0;_0x91ca9d[_0x58fca1(0x182)]((_0x23268d,_0xa96d25)=>{const _0x4551a4=_0x58fca1;if(_0xa96d25%_0x37d7b6==0x0)_0x2988fc=[];_0x2988fc[_0x4551a4(0x2ac)](Markup[_0x4551a4(0x159)][_0x4551a4(0x117)](_0x23268d[_0x4551a4(0x191)]==_0x4551a4(0x20e)?_0x4551a4(0x135):_0x4551a4(0xe3)+_0x23268d[_0x4551a4(0x191)],_0x4551a4(0x288)+_0x23268d[_0x4551a4(0x191)])),_0xa96d25%_0x37d7b6==0x0&&(_0x389c9b[_0x53ccf6]=_0x2988fc,_0x53ccf6++);});const _0x30160a=Markup[_0x58fca1(0x1ce)](_0x389c9b);_0x33a75a[_0x58fca1(0x1d6)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x30160a);}}),tgBot[_0x153650(0x1fc)](/restart_(.+)/,async _0x163768=>{const _0x51d2b1=_0x153650,_0x2c697a=_0x163768[_0x51d2b1(0x1cf)][0x1];_0x163768[_0x51d2b1(0x27a)](),_0x2c697a==_0x51d2b1(0x20e)?config[_0x51d2b1(0x182)](_0x19b880=>{const _0x49fad0=_0x51d2b1;restartBot(_0x19b880[_0x49fad0(0x191)]);}):restartBot(_0x2c697a);}),tgBot[_0x153650(0xd0)]('on',async _0x1f8d0a=>{const _0x647497=_0x153650,_0x56479b=getDisabledBots();if(_0x56479b['length']==0x0)await sendTelegram(_0x1f8d0a[_0x647497(0x20b)]['id'],_0x647497(0xc2));else{if(_0x56479b[_0x647497(0x1e3)]>0x1)_0x56479b[_0x647497(0x2ac)]({'botID':_0x647497(0x20e)});let _0x4b6ea0=[],_0x4fe535=[];const _0x289612=_0x56479b[_0x647497(0x1e3)]%0x4==0x0||_0x56479b['length']%0x4==0x3||_0x56479b[_0x647497(0x1e3)]%0x3==0x1?0x4:0x3;let _0x3dd953=0x0;_0x56479b[_0x647497(0x182)]((_0x20152e,_0x45ff48)=>{const _0x568171=_0x647497;if(_0x45ff48%_0x289612==0x0)_0x4fe535=[];_0x4fe535[_0x568171(0x2ac)](Markup[_0x568171(0x159)]['callback'](_0x20152e[_0x568171(0x191)]==_0x568171(0x20e)?_0x568171(0x135):_0x568171(0xe3)+_0x20152e[_0x568171(0x191)],_0x568171(0x12a)+_0x20152e['botID'])),_0x45ff48%_0x289612==0x0&&(_0x4b6ea0[_0x3dd953]=_0x4fe535,_0x3dd953++);});const _0x5ab810=Markup[_0x647497(0x1ce)](_0x4b6ea0);_0x1f8d0a[_0x647497(0x1d6)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x5ab810);}}),tgBot['action'](/on_(.+)/,async _0x37b652=>{const _0x9db181=_0x153650,_0x36e953=_0x37b652[_0x9db181(0x1cf)][0x1];_0x37b652[_0x9db181(0x27a)]();if(_0x36e953==_0x9db181(0x20e)){const _0x3cc318=getDisabledBots();await sendTelegram(_0x37b652['chat']['id'],_0x9db181(0xf6)),_0x3cc318['forEach'](_0x151785=>{const _0x40dfba=_0x9db181;if(_0x151785['botID']!=_0x40dfba(0x20e))toggleBot(_0x151785['botID'],toggleStatus(_0x151785[_0x40dfba(0x191)]),_0x40dfba(0x228));});}else await sendTelegram(_0x37b652[_0x9db181(0x20b)]['id'],_0x9db181(0x1a3)+_0x36e953),toggleBot(_0x36e953,toggleStatus(_0x36e953),'stopped');}),tgBot['command']('off',async _0x1adce1=>{const _0x29221a=_0x153650,_0xbc2829=getEnabledBots();if(_0xbc2829[_0x29221a(0x1e3)]==0x0)await sendTelegram(_0x1adce1['chat']['id'],_0x29221a(0x1f4));else{if(_0xbc2829[_0x29221a(0x1e3)]>0x1)_0xbc2829[_0x29221a(0x2ac)]({'botID':_0x29221a(0x20e)});let _0x5bbb95=[],_0x2666c1=[];const _0x51cd20=_0xbc2829[_0x29221a(0x1e3)]%0x4==0x0||_0xbc2829['length']%0x4==0x3||_0xbc2829[_0x29221a(0x1e3)]%0x3==0x1?0x4:0x3;let _0x2da9d9=0x0;_0xbc2829[_0x29221a(0x182)]((_0xc6483b,_0x5db352)=>{const _0x4fea79=_0x29221a;if(_0x5db352%_0x51cd20==0x0)_0x2666c1=[];_0x2666c1['push'](Markup[_0x4fea79(0x159)][_0x4fea79(0x117)](_0xc6483b[_0x4fea79(0x191)]==_0x4fea79(0x20e)?'All\x20bots':_0x4fea79(0xe3)+_0xc6483b[_0x4fea79(0x191)],_0x4fea79(0x175)+_0xc6483b['botID'])),_0x5db352%_0x51cd20==0x0&&(_0x5bbb95[_0x2da9d9]=_0x2666c1,_0x2da9d9++);});const _0x2ea984=Markup[_0x29221a(0x1ce)](_0x5bbb95);_0x1adce1[_0x29221a(0x1d6)](_0x29221a(0x19a),_0x2ea984);}}),tgBot[_0x153650(0x1fc)](/off_(.+)/,async _0x2a0036=>{const _0x3183a6=_0x153650,_0x25eebc=_0x2a0036[_0x3183a6(0x1cf)][0x1];_0x2a0036[_0x3183a6(0x27a)]();if(_0x25eebc==_0x3183a6(0x20e)){const _0x42553b=getEnabledBots();await sendTelegram(_0x2a0036[_0x3183a6(0x20b)]['id'],_0x3183a6(0x1c2)),_0x42553b[_0x3183a6(0x182)](_0x3e62c6=>{const _0x36621f=_0x3183a6;if(_0x3e62c6[_0x36621f(0x191)]!='all')toggleBot(_0x3e62c6[_0x36621f(0x191)],toggleStatus(_0x3e62c6[_0x36621f(0x191)]),_0x36621f(0x228));});}else await sendTelegram(_0x2a0036['chat']['id'],_0x3183a6(0x15c)+_0x25eebc),toggleBot(_0x25eebc,toggleStatus(_0x25eebc),_0x3183a6(0x228));}),tgBot[_0x153650(0xd0)](_0x153650(0xba),async _0x7358a7=>{const _0x5274c2=_0x153650,_0x1a07fc=getEnabledBots();if(_0x1a07fc[_0x5274c2(0x1e3)]==0x0)await sendTelegram(_0x7358a7[_0x5274c2(0x20b)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1a07fc[_0x5274c2(0x1e3)]>0x1){let _0x1133ec=[],_0x5bf070=[];const _0x1b1f0c=_0x1a07fc['length']%0x4==0x0||_0x1a07fc['length']%0x4==0x3||_0x1a07fc['length']%0x3==0x1?0x4:0x3;let _0x48d568=0x0;_0x1a07fc[_0x5274c2(0x182)]((_0x1ac705,_0x4061db)=>{const _0x40c033=_0x5274c2;if(_0x4061db%_0x1b1f0c==0x0)_0x5bf070=[];_0x5bf070['push'](Markup[_0x40c033(0x159)][_0x40c033(0x117)](_0x40c033(0xe3)+_0x1ac705[_0x40c033(0x191)],'metrics_'+_0x1ac705['botID'])),_0x4061db%_0x1b1f0c==0x0&&(_0x1133ec[_0x48d568]=_0x5bf070,_0x48d568++);});const _0x58f041=Markup[_0x5274c2(0x1ce)](_0x1133ec);_0x7358a7[_0x5274c2(0x1d6)](_0x5274c2(0x1bf),_0x58f041);}else{const _0x1e841d=_0x1a07fc[0x0][_0x5274c2(0x191)];if(pid[_0x1e841d])pid[_0x1e841d][_0x5274c2(0x28a)]({'function':_0x5274c2(0x1b0),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x4b3312=>{const _0xd4dcd6=_0x153650,_0x2cf931=_0x4b3312['match'][0x1];_0x4b3312[_0xd4dcd6(0x27a)]();if(pid[_0x2cf931])pid[_0x2cf931][_0xd4dcd6(0x28a)]({'function':_0xd4dcd6(0x1b0),'args':null});}),tgBot[_0x153650(0xd0)]('portfolio',async _0x451a66=>{const _0x53789d=_0x153650,_0x34411e=getEnabledBots();if(_0x34411e[_0x53789d(0x1e3)]==0x0)await sendTelegram(_0x451a66[_0x53789d(0x20b)]['id'],_0x53789d(0x1f4));else{if(_0x34411e[_0x53789d(0x1e3)]>0x1){let _0x586e1f=[],_0x3332fc=[];const _0x21d61f=_0x34411e[_0x53789d(0x1e3)]%0x4==0x0||_0x34411e[_0x53789d(0x1e3)]%0x4==0x3||_0x34411e[_0x53789d(0x1e3)]%0x3==0x1?0x4:0x3;let _0x44868c=0x0;_0x34411e[_0x53789d(0x182)]((_0x396cbb,_0x3a4ce5)=>{const _0x177328=_0x53789d;if(_0x3a4ce5%_0x21d61f==0x0)_0x3332fc=[];_0x3332fc['push'](Markup[_0x177328(0x159)][_0x177328(0x117)]('Bot\x20'+_0x396cbb[_0x177328(0x191)],_0x177328(0x151)+_0x396cbb[_0x177328(0x191)])),_0x3a4ce5%_0x21d61f==0x0&&(_0x586e1f[_0x44868c]=_0x3332fc,_0x44868c++);});const _0x3233ac=Markup[_0x53789d(0x1ce)](_0x586e1f);_0x451a66[_0x53789d(0x1d6)](_0x53789d(0x1c0),_0x3233ac);}else{const _0x3566e3=_0x34411e[0x0]['botID'];if(pid[_0x3566e3])pid[_0x3566e3]['send']({'function':_0x53789d(0x108),'args':null});}}}),tgBot[_0x153650(0x1fc)](/portfolio_(.+)/,async _0xdbfe8c=>{const _0x2edb3f=_0x153650,_0x42792e=_0xdbfe8c[_0x2edb3f(0x1cf)][0x1];_0xdbfe8c[_0x2edb3f(0x27a)]();if(pid[_0x42792e])pid[_0x42792e]['send']({'function':_0x2edb3f(0x108),'args':null});}),tgBot[_0x153650(0xd0)](_0x153650(0x148),async _0x27c3c1=>{const _0x38df46=_0x153650,_0x83705a='logs';await zipFiles(_0x83705a);const _0x4eeea1=zippath+(_0x83705a+_0x38df46(0x260));_0x27c3c1[_0x38df46(0x1eb)]({'source':_0x4eeea1})['then'](()=>{})[_0x38df46(0x203)](_0x56205e=>logger['debug'](_0x38df46(0x1a7)+_0x83705a+_0x38df46(0x273),_0x56205e));}),tgBot[_0x153650(0xd0)]('backup',async _0x1f3112=>{const _0x37761a=_0x153650,_0x2c874e=_0x37761a(0x134);await backupConfigFiles(),await zipFiles(_0x2c874e);const _0x2a8a71=zippath+(_0x2c874e+_0x37761a(0x260));_0x1f3112[_0x37761a(0x1eb)]({'source':_0x2a8a71})[_0x37761a(0x1db)](()=>{})['catch'](_0x1940eb=>logger[_0x37761a(0xe1)](_0x37761a(0x1a7)+_0x2c874e+_0x37761a(0x273),_0x1940eb));}),tgBot['command'](_0x153650(0xce),async _0x17f8f3=>{const _0x2d8899=_0x153650;await getMessages();if(!updateAvailable)await sendTelegram(_0x17f8f3['chat']['id'],_0x2d8899(0x262));else{if(!validInstallation)await sendTelegram(_0x17f8f3[_0x2d8899(0x20b)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x37a0b4=Markup[_0x2d8899(0x1ce)]([Markup[_0x2d8899(0x159)][_0x2d8899(0x117)](_0x2d8899(0x184),_0x2d8899(0x19c)),Markup[_0x2d8899(0x159)]['callback']('No',_0x2d8899(0x1f6))]);_0x17f8f3[_0x2d8899(0x1d6)](_0x2d8899(0x166),_0x37a0b4);}}}),tgBot['action'](/update_(.+)/,async _0x48da14=>{const _0x59de1e=_0x153650,_0x4d4b33=_0x48da14['match'][0x1];_0x48da14[_0x59de1e(0x27a)](),_0x4d4b33==_0x59de1e(0x1cc)&&(await sendTelegram(_0x48da14[_0x59de1e(0x20b)]['id'],_0x59de1e(0x2aa)),updateBB(_0x59de1e(0xce))),_0x4d4b33=='no'&&await sendTelegram(_0x48da14[_0x59de1e(0x20b)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x153650(0xd0)](_0x153650(0xfc),async _0x4957e8=>{const _0x577d12=_0x153650;if(!validInstallation)await sendTelegram(_0x4957e8[_0x577d12(0x20b)]['id'],_0x577d12(0x204));else{const _0x4939c6=Markup['inlineKeyboard']([Markup[_0x577d12(0x159)][_0x577d12(0x117)](_0x577d12(0x184),'reinstall_yes'),Markup[_0x577d12(0x159)][_0x577d12(0x117)]('No',_0x577d12(0x199))]);_0x4957e8[_0x577d12(0x1d6)](_0x577d12(0x1ef),_0x4939c6);}}),tgBot[_0x153650(0x1fc)](/reinstall_(.+)/,async _0x3786db=>{const _0x43c9cc=_0x153650,_0x868f0c=_0x3786db[_0x43c9cc(0x1cf)][0x1];_0x3786db[_0x43c9cc(0x27a)](),_0x868f0c==_0x43c9cc(0x1cc)&&(await sendTelegram(_0x3786db[_0x43c9cc(0x20b)]['id'],_0x43c9cc(0x220)),updateBB('reinstall')),_0x868f0c=='no'&&await sendTelegram(_0x3786db['chat']['id'],_0x43c9cc(0x16a));}),tgBot['command']('toggle',async _0x22789f=>{const _0x5f2d89=_0x153650,_0x24db87=getBotsWithMode();if(_0x24db87['length']==0x0)await sendTelegram(_0x22789f['chat']['id'],_0x5f2d89(0x1f4));else{let _0x14107a=[],_0x58e1f0=[];const _0x4da7bc=0x2;let _0x221371=0x0;_0x24db87[_0x5f2d89(0x182)]((_0x4a853b,_0x26fe84)=>{const _0x5af85e=_0x5f2d89;if(_0x26fe84%_0x4da7bc==0x0)_0x58e1f0=[];_0x58e1f0[_0x5af85e(0x2ac)](Markup[_0x5af85e(0x159)][_0x5af85e(0x117)]('Bot\x20'+_0x4a853b[_0x5af85e(0x191)]+'\x20('+_0x4a853b['mode']+')',_0x5af85e(0x18a)+_0x4a853b[_0x5af85e(0x191)])),_0x26fe84%_0x4da7bc==0x0&&(_0x14107a[_0x221371]=_0x58e1f0,_0x221371++);});const _0x14aa4c=Markup['inlineKeyboard'](_0x14107a);_0x22789f[_0x5f2d89(0x1d6)](_0x5f2d89(0xe6),_0x14aa4c);}}),tgBot[_0x153650(0x1fc)](/toggle_(.+)/,async _0x4825c7=>{const _0x2d62d6=_0x153650,_0x110967=_0x4825c7['match'][0x1];_0x4825c7[_0x2d62d6(0x27a)]();const _0x325b20=getBotsWithMode(),_0x3a6c2d=_0x325b20[_0x2d62d6(0x186)](_0x4f71c5=>_0x4f71c5[_0x2d62d6(0x191)]==_0x110967),_0x166f10=_0x3a6c2d[_0x2d62d6(0x292)]==_0x2d62d6(0x106)?_0x2d62d6(0x1c7):'auto';await sendTelegram(_0x4825c7['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x110967+_0x2d62d6(0x1b6)+_0x166f10+_0x2d62d6(0x13a)),toggleBotMode(_0x110967);}),tgBot['command'](_0x153650(0x136),async _0x40a43f=>{const _0x3b12df=_0x153650;let _0x52ec15='';config[_0x3b12df(0x182)](_0x529147=>{_0x52ec15+='Bot\x20'+_0x529147['botID']+':\x20'+_0x529147['botname']+'\x0a';}),await sendTelegram(_0x40a43f[_0x3b12df(0x20b)]['id'],_0x52ec15,{'parse_mode':'HTML'});}),tgBot[_0x153650(0xd0)](_0x153650(0x178),async _0x44833c=>{const _0x193cfe=_0x153650;await sendTelegram(_0x44833c[_0x193cfe(0x20b)]['id'],_0x177c46);}),process[_0x153650(0xfe)](_0x153650(0x200),()=>tgBot[_0x153650(0x12e)](_0x153650(0x200))),process[_0x153650(0xfe)]('SIGTERM',()=>tgBot[_0x153650(0x12e)]('SIGTERM')),tgBot[_0x153650(0x22e)]();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x3fc75a,_0x1eb1b1,_0x3214b0){const _0x378852=_0xeb46a6;_0x3214b0={..._0x3214b0,'disable_web_page_preview':!![]};try{await tgBot[_0x378852(0x14f)][_0x378852(0x255)](_0x3fc75a,_0x1eb1b1,_0x3214b0);}catch(_0x4460a1){console['log'](_0x378852(0xb1),_0x4460a1);}}async function sendTelegramBot(_0x10d6da,_0x187c48){const _0x1cf87f=_0xeb46a6;if(settings[_0x1cf87f(0x2a6)]){if(settings[_0x1cf87f(0xdc)]=='all'||(_0x187c48[_0x1cf87f(0x21e)]==_0x1cf87f(0x1f7)||_0x187c48['type']==_0x1cf87f(0x16b)||_0x187c48[_0x1cf87f(0x21e)]=='success')&&settings[_0x1cf87f(0xdc)]=='alerts'||_0x187c48[_0x1cf87f(0x21e)]==_0x1cf87f(0xff)&&settings[_0x1cf87f(0xdc)]==_0x1cf87f(0xc6)){if(tgBot&&settings[_0x1cf87f(0x165)]){if(_0x187c48[_0x1cf87f(0x103)])await sendTelegram(settings['telegramChatId'],_0x187c48['botname']+_0x1cf87f(0x143)+_0x187c48[_0x1cf87f(0x187)]);else await sendTelegram(settings[_0x1cf87f(0x165)],_0x1cf87f(0xe3)+_0x10d6da+_0x1cf87f(0x143)+_0x187c48['event']);}}}}async function sendTelegramMsg(_0x168ee2,_0x21e4c8=_0xeb46a6(0x1dc)){const _0xb7cad7=_0xeb46a6;return settings[_0xb7cad7(0x2a6)]&&tgBot&&settings[_0xb7cad7(0x165)]?(await sendTelegram(settings[_0xb7cad7(0x165)],_0x168ee2,{'parse_mode':_0x21e4c8}),!![]):![];}function getDeviceWithIp(_0x355a35){const _0x1e3ba9=_0xeb46a6;return devices[_0x1e3ba9(0x186)](_0x3ab933=>_0x3ab933['ip']===_0x355a35);}async function temporaryAccess2FA(_0x1a7bce,_0x20210){const _0x1bd451=_0xeb46a6;let _0x4200ef=new Date(),_0x2ba3fc=![];if(lastIpApproval){if(_0x4200ef-lastIpApproval<0x1388)_0x2ba3fc=!![];}lastIpApproval=new Date();if(_0x2ba3fc)return;if(tgBot&&settings['telegramChatId']){const _0x34f71c=uuidRandom();tmpStorage[_0x34f71c]={'uuid':_0x1a7bce,'externalip':_0x20210};const _0x141c0b=Markup[_0x1bd451(0x1ce)]([Markup[_0x1bd451(0x159)][_0x1bd451(0x117)](_0x1bd451(0x28d),'tempaccess_5_'+_0x34f71c),Markup[_0x1bd451(0x159)][_0x1bd451(0x117)](_0x1bd451(0xef),_0x1bd451(0x266)+_0x34f71c),Markup[_0x1bd451(0x159)]['callback'](_0x1bd451(0x1ac),_0x1bd451(0x162)+_0x34f71c),Markup['button'][_0x1bd451(0x117)](_0x1bd451(0xad),_0x1bd451(0x205)+_0x34f71c)]);await sendTelegram(settings[_0x1bd451(0x165)],_0x1bd451(0x240)+normalizeIP(_0x20210)[_0x1bd451(0x1f3)]+'\x20?',_0x141c0b),tgBot[_0x1bd451(0x1fc)](/tempaccess_(.+)_(.+)/,async _0x4491ab=>{const _0x4cfb8f=_0x1bd451,_0x5d2f7a=_0x4491ab[_0x4cfb8f(0x1cf)][0x1],_0x2a11cc=_0x4491ab[_0x4cfb8f(0x1cf)][0x2],{uuid:_0xa1454e,externalip:_0x5f46bb}=tmpStorage[_0x2a11cc];delete tmpStorage[_0x2a11cc],_0x4491ab['editMessageReplyMarkup'](),devices[_0xa1454e][_0x4cfb8f(0x1c4)]={'clientip':_0x5f46bb,'timestamp':new Date()[_0x4cfb8f(0xea)](),'expiry':_0x5d2f7a},_0x5d2f7a!=_0x4cfb8f(0xad)?(await sendTelegram(_0x4491ab[_0x4cfb8f(0x20b)]['id'],_0x4cfb8f(0x23f)+_0x5d2f7a+'\x20minutes',{'parse_mode':_0x4cfb8f(0x1dc)}),io['to'](_0xa1454e)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x4491ab[_0x4cfb8f(0x20b)]['id'],_0x4cfb8f(0x1d0)),io['to'](_0xa1454e)[_0x4cfb8f(0xb5)](_0x4cfb8f(0xcc),{'access':{'allow':![],'reason':_0x4cfb8f(0xf5),'token':null}}));});}}async function loginAccess2FA(_0x3a8639,_0x7a4ba4){const _0x3d0ff7=_0xeb46a6;if(tgBot&&settings[_0x3d0ff7(0x165)]){const _0x12181e=uuidRandom();tmpStorage[_0x12181e]={'uuid':_0x3a8639,'externalip':_0x7a4ba4};const _0x498f48=Markup['inlineKeyboard']([Markup[_0x3d0ff7(0x159)][_0x3d0ff7(0x117)]('accept',_0x3d0ff7(0x11e)+loginExpiry+'_'+_0x12181e),Markup[_0x3d0ff7(0x159)][_0x3d0ff7(0x117)](_0x3d0ff7(0xad),_0x3d0ff7(0x173)+_0x12181e)]);await sendTelegram(settings['telegramChatId'],_0x3d0ff7(0x128)+normalizeIP(_0x7a4ba4)[_0x3d0ff7(0x1f3)]+'\x20?',_0x498f48),tgBot[_0x3d0ff7(0x1fc)](/login2fa_(.+)_(.+)/,async _0x140a4e=>{const _0x2a29ad=_0x3d0ff7,_0x451639=_0x140a4e['match'][0x1],_0x26c419=_0x140a4e[_0x2a29ad(0x1cf)][0x2],{uuid:_0x5a074f,externalip:_0x2cbe21}=tmpStorage[_0x26c419];delete tmpStorage[_0x26c419],_0x140a4e[_0x2a29ad(0x27a)](),devices[_0x5a074f][_0x2a29ad(0x297)]={'clientip':_0x2cbe21,'timestamp':new Date()[_0x2a29ad(0xea)](),'expiry':_0x451639},_0x451639!=_0x2a29ad(0xad)?(await sendTelegram(_0x140a4e[_0x2a29ad(0x20b)]['id'],_0x2a29ad(0xcf),{'parse_mode':_0x2a29ad(0x1dc)}),io['to'](_0x5a074f)[_0x2a29ad(0xb5)]('status',{'access':{'allow':![],'reason':_0x2a29ad(0x26a),'token':null}})):(await sendTelegram(_0x140a4e[_0x2a29ad(0x20b)]['id'],'Login\x20rejected'),io['to'](_0x5a074f)[_0x2a29ad(0xb5)](_0x2a29ad(0xcc),{'access':{'allow':![],'reason':_0x2a29ad(0x1e7),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x29b47d=_0xeb46a6;return dbConfig[_0x29b47d(0x102)](_0x29b47d(0x239))[_0x29b47d(0x21a)](_0x29b47d(0x191))[_0x29b47d(0x1ec)]({'status':_0x29b47d(0x2b3)})[_0x29b47d(0xd3)]()||[];}function getDisabledBots(){const _0x143125=_0xeb46a6;return dbConfig['get'](_0x143125(0x239))['sortBy']('botID')[_0x143125(0x1ec)]({'status':_0x143125(0x23c)})[_0x143125(0xd3)]()||[];}function getBotAttributes(_0x2dbad6){const _0x1e7b93=_0xeb46a6;let _0xe63dce={};const _0xf43a8=configpath+'bot-'+_0x2dbad6+_0x1e7b93(0xc5),_0x577f69=fs[_0x1e7b93(0x213)](_0xf43a8);if(_0x577f69){const _0x4f2a82=fs['readFileSync'](_0xf43a8);try{const _0x8c6c82=JSON[_0x1e7b93(0x290)](_0x4f2a82),_0x1bebd0=_0x8c6c82?_0x8c6c82[_0x1e7b93(0x25c)][0x0]['headless']:![];_0xe63dce['mode']=_0x1bebd0?_0x1e7b93(0x106):_0x1e7b93(0x1c7),_0xe63dce[_0x1e7b93(0x29e)]=_0x8c6c82?_0x8c6c82[_0x1e7b93(0x25c)][0x0][_0x1e7b93(0x29e)]:_0x1e7b93(0xe3)+_0x2dbad6;}catch(_0x391e78){_0xe63dce[_0x1e7b93(0x292)]=_0x1e7b93(0x1c7),_0xe63dce[_0x1e7b93(0x29e)]=_0x1e7b93(0xe3)+_0x2dbad6;}}else _0xe63dce[_0x1e7b93(0x292)]=_0x1e7b93(0x1c7),_0xe63dce['botname']=_0x1e7b93(0xe3)+_0x2dbad6;return _0xe63dce;}function getBotsWithMode(){const _0x331313=_0xeb46a6,_0x35b7ea=dbConfig[_0x331313(0x102)](_0x331313(0x239))[_0x331313(0x21a)](_0x331313(0x191))[_0x331313(0xd3)]()||[];return _0x35b7ea[_0x331313(0x182)](_0x485c7d=>{const _0x1c2357=_0x331313;let _0x5b6aa0=getBotAttributes(_0x485c7d[_0x1c2357(0x191)]);_0x485c7d[_0x1c2357(0x292)]=_0x5b6aa0[_0x1c2357(0x292)];}),_0x35b7ea;}function getBotExchanges(){const _0x6d945e=_0xeb46a6;let _0x10f94c=[];const _0x431b1c=dbConfig[_0x6d945e(0x102)](_0x6d945e(0x239))[_0x6d945e(0x21a)](_0x6d945e(0x191))[_0x6d945e(0xd3)]()||[];_0x431b1c[_0x6d945e(0x182)](_0x173caf=>{const _0x5a103e=_0x6d945e;if(_0x173caf['status']==_0x5a103e(0x2b3)){const _0x2fc585=configpath+_0x5a103e(0x27c)+_0x173caf['botID']+'-config.json',_0xb555ee=fs[_0x5a103e(0x213)](_0x2fc585);let _0x50c643;if(_0xb555ee){const _0x21896f=fs['readFileSync'](_0x2fc585);try{const _0x247732=JSON[_0x5a103e(0x290)](_0x21896f);_0x50c643=_0x247732?_0x247732[_0x5a103e(0x25c)][0x0]['exchange']:null;}catch(_0x1fe7e8){}}if(_0x50c643)_0x10f94c['push'](_0x50c643);}});const _0x526beb=[...new Set(_0x10f94c)][_0x6d945e(0x195)]();return _0x526beb;}async function initUser(){const _0x44245d=_0xeb46a6;if(!settings['userid']){const _0x10677b=uuidRandom();mixpanel[_0x44245d(0x18e)](_0x10677b),updateSetting(_0x44245d(0x1b9),_0x10677b);}}async function initSecure(){const _0x2b605c=_0xeb46a6;let _0x3aea39=getSecure();if(!_0x3aea39[_0x2b605c(0x271)](_0x2b605c(0x217))){let _0x164365=await generateKeys();_0x3aea39['publicKey']=_0x164365[_0x2b605c(0x139)],_0x3aea39[_0x2b605c(0x183)]=_0x164365['privateKey'],_0x3aea39['secret']=crypto[_0x2b605c(0x2a7)](0x20)[_0x2b605c(0x1fb)]('hex');;storeSecure(_0x3aea39);}}function getSettings(){const _0x3b9ebe=_0xeb46a6;return dbSettings[_0x3b9ebe(0x102)](_0x3b9ebe(0x296))[_0x3b9ebe(0xd3)]()||{};}function getSecure(){const _0x77a532=_0xeb46a6;return dbSecure['get'](_0x77a532(0x112))['value']()||{};}function getBlacklist(){const _0x120c7f=_0xeb46a6;return dbSecure[_0x120c7f(0x102)]('blacklist')['value']()||[];}function broadcastToBots(_0x3e09e3,_0x5b83a2){const _0x42b958=_0xeb46a6;config[_0x42b958(0x182)](_0x19873e=>{const _0x40bc88=_0x42b958;if(_0x19873e[_0x40bc88(0xcc)]==_0x40bc88(0x2b3)&&_0x19873e[_0x40bc88(0x2b1)]==_0x40bc88(0x275)||_0x19873e[_0x40bc88(0xcc)]==_0x40bc88(0x289)&&_0x19873e[_0x40bc88(0x2b1)]==_0x40bc88(0x275)){if(pid[_0x19873e['botID']])pid[_0x19873e[_0x40bc88(0x191)]][_0x40bc88(0x28a)]({[_0x3e09e3]:_0x5b83a2});}});}async function storeSettings(_0x212d09,_0x366a99=![]){const _0x59b25d=_0xeb46a6;_0x212d09={...settings,..._0x212d09};if(_0x366a99&&_0x212d09[_0x59b25d(0x1fd)]!='************'&&_0x212d09[_0x59b25d(0x1fd)]!='***'&&_0x212d09[_0x59b25d(0x1fd)]!=''){const _0x358d60=decryptRSA(secure[_0x59b25d(0x183)],_0x212d09[_0x59b25d(0x1fd)])[_0x59b25d(0xbf)]('|@|')[0x0],_0x32a993=bcrypt[_0x59b25d(0x222)](_0x358d60,saltRounds);_0x212d09={..._0x212d09,'bbPassword':_0x32a993};}if(_0x366a99&&_0x212d09[_0x59b25d(0x1c3)]!=_0x59b25d(0x1d7)&&_0x212d09[_0x59b25d(0x1c3)]!=_0x59b25d(0xf9)&&_0x212d09[_0x59b25d(0x1c3)]!=''){const _0x481199=decryptRSA(secure[_0x59b25d(0x183)],_0x212d09[_0x59b25d(0x1c3)])[_0x59b25d(0xbf)](_0x59b25d(0x129))[0x0];_0x212d09={..._0x212d09,'telegramToken':_0x481199};}if(_0x366a99&&_0x212d09[_0x59b25d(0x22a)]!='************'&&_0x212d09[_0x59b25d(0x22a)]!='***'&&_0x212d09[_0x59b25d(0x22a)]!=''){const _0x30b17b=decryptRSA(secure['privateKey'],_0x212d09[_0x59b25d(0x22a)])[_0x59b25d(0xbf)]('|@|')[0x0];_0x212d09={..._0x212d09,'marketcapApi':_0x30b17b};}const _0x1ac2dc=_0x212d09[_0x59b25d(0x1c3)]!=_0x59b25d(0x1d7)&&_0x212d09[_0x59b25d(0x1c3)]!=settings[_0x59b25d(0x1c3)]||_0x212d09[_0x59b25d(0xe8)]!=settings[_0x59b25d(0xe8)],_0x32598c=_0x212d09[_0x59b25d(0x1c3)]==''||_0x212d09[_0x59b25d(0xe8)]=='',_0x296119=_0x212d09[_0x59b25d(0x22a)]&&_0x212d09[_0x59b25d(0x22a)]!=_0x59b25d(0x1d7)&&_0x212d09[_0x59b25d(0x22a)]!=settings['telegramToken'];_0x1ac2dc&&(_0x212d09[_0x59b25d(0x165)]=null,_0x212d09[_0x59b25d(0xdc)]=_0x59b25d(0x20e));for(const [_0x1ce8ba,_0x11254f]of Object[_0x59b25d(0xaf)](_0x212d09)){if(_0x1ce8ba==_0x59b25d(0x1c3)&&_0x11254f==_0x59b25d(0x1d7)){_0x212d09[_0x59b25d(0x1c3)]=settings['telegramToken'];continue;};if(_0x1ce8ba==_0x59b25d(0x1fd)&&_0x11254f==_0x59b25d(0x1d7)){_0x212d09[_0x59b25d(0x1fd)]=settings[_0x59b25d(0x1fd)];continue;};if(_0x1ce8ba==_0x59b25d(0x22a)&&_0x11254f==_0x59b25d(0x1d7)){_0x212d09[_0x59b25d(0x22a)]=settings['marketcapApi'];continue;};dbSettings[_0x59b25d(0x20c)](_0x59b25d(0x1d8)+_0x1ce8ba,_0x11254f)['write']();}settings=_0x212d09,io['to']('botmanager')[_0x59b25d(0xb5)](_0x59b25d(0x296),cleanSettings()),broadcastToBots(_0x59b25d(0x2a8),settings[_0x59b25d(0x2a8)]),broadcastToBots(_0x59b25d(0x101),settings[_0x59b25d(0x101)]),broadcastToBots(_0x59b25d(0x22a),settings[_0x59b25d(0x22a)]);if(_0x1ac2dc&&!_0x32598c)initTelegram();if(_0x1ac2dc&&_0x32598c)disableTelegram();getAllClients()[_0x59b25d(0x182)](_0x44d29f=>{getSocket(_0x44d29f['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});}),_0x296119&&(await sleep(0xbb8),testMarketcapApi(_0x212d09[_0x59b25d(0x22a)]));}async function testMarketcapApi(_0x1710de){const _0x583a20=_0xeb46a6,_0x374688=[_0x583a20(0x13c),'ETH'];try{await axios['get'](_0x583a20(0x14c),{'headers':{'X-CMC_PRO_API_KEY':_0x1710de},'params':{'symbol':_0x374688[_0x583a20(0x1fb)]()}});}catch(_0x23cbc1){_0x23cbc1[_0x583a20(0x1fb)]()['includes'](_0x583a20(0xbb))?(io['to'](_0x583a20(0x164))[_0x583a20(0xb5)]('notification',_0x583a20(0x285)),logger['full'](_0x583a20(0x285))):(io['to']('botmanager')[_0x583a20(0xb5)]('notification','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x583a20(0x263)](_0x583a20(0xec)),logger[_0x583a20(0xe1)]('Error\x20details:',_0x23cbc1[_0x583a20(0x1fb)]()+_0x583a20(0xd8)+_0x23cbc1[_0x583a20(0x21f)]));return;}logger[_0x583a20(0xe1)](_0x583a20(0x11a));}function updateSetting(_0x4c6f82,_0x227d93){const _0x4152ba=_0xeb46a6;dbSettings[_0x4152ba(0x20c)](_0x4152ba(0x1d8)+_0x4c6f82,_0x227d93)[_0x4152ba(0x2a9)](),settings=getSettings(),io['to'](_0x4152ba(0x164))[_0x4152ba(0xb5)]('settings',cleanSettings());}function storeSecure(_0x18adbc){const _0x1a351b=_0xeb46a6;dbSecure[_0x1a351b(0x102)](_0x1a351b(0x112))[_0x1a351b(0x2ac)](_0x18adbc)[_0x1a351b(0x2a9)](),secure=_0x18adbc;}function addBlacklist(_0x5ef056){const _0x1808e9=_0xeb46a6;cleanBlacklist();let _0x4f447f;devices[_0x5ef056][_0x1808e9(0x1c4)]?_0x4f447f=Math[_0x1808e9(0x126)](devices[_0x5ef056][_0x1808e9(0x1c4)][_0x1808e9(0x19f)],loginExpiry):_0x4f447f=loginExpiry,dbSecure['get']('blacklist')[_0x1808e9(0x2ac)]({'expiry':new Date()[_0x1808e9(0xea)]()+_0x4f447f*0x3c*0x3e8,'token':devices[_0x5ef056][_0x1808e9(0x29c)][_0x1808e9(0x2ad)]})['write'](),blacklist=dbSecure[_0x1808e9(0x102)](_0x1808e9(0x28f))['value']();}function cleanBlacklist(){const _0x58bd7c=_0xeb46a6;let _0x3ea902=dbSecure[_0x58bd7c(0x102)](_0x58bd7c(0x28f))[_0x58bd7c(0x12c)]()['value'](),_0x4cf4fd=new Date()[_0x58bd7c(0xea)]();_0x3ea902[_0x58bd7c(0x182)](_0x490d67=>{const _0x515558=_0x58bd7c;_0x490d67['expiry']<_0x4cf4fd&&dbSecure[_0x515558(0x102)](_0x515558(0x28f))[_0x515558(0xed)]({'expiry':_0x490d67[_0x515558(0x19f)]})[_0x515558(0x2a9)]();});}function initStates(){const _0x3ac2f9=_0xeb46a6;let _0x3dc4ab=getConfiguration();_0x3dc4ab[_0x3ac2f9(0x182)](_0xba1cdc=>{const _0xe168e9=_0x3ac2f9;_0xba1cdc[_0xe168e9(0x2b1)]=_0xe168e9(0x228);}),storeConfiguration(_0x3dc4ab);}async function generateKeys(){const _0x28f2ec=_0xeb46a6,_0x2a81d5=forge[_0x28f2ec(0x27d)]['rsa'][_0x28f2ec(0x16f)]({'bits':0x1000,'e':0x10001}),_0xb715a0=forge[_0x28f2ec(0x27d)]['privateKeyToPem'](_0x2a81d5[_0x28f2ec(0x183)]),_0x5899d2=forge[_0x28f2ec(0x27d)][_0x28f2ec(0x1b4)](_0x2a81d5[_0x28f2ec(0x139)]);return{'privateKey':_0xb715a0,'publicKey':_0x5899d2};}async function oneTimeMigration(){const _0x483bfa=_0xeb46a6;let _0x377747=getSettings(),_0x54eebe=![];!_0x377747['hasOwnProperty'](_0x483bfa(0x122))&&(_0x377747['lastmsgtelegram']=0x0,_0x54eebe=!![]);!_0x377747[_0x483bfa(0x271)]('lastmsgemitted')&&(_0x377747['lastmsgemitted']=0x0,_0x54eebe=!![]);!_0x377747[_0x483bfa(0x271)](_0x483bfa(0x208))&&(_0x377747[_0x483bfa(0x208)]='0.0.0',_0x54eebe=!![]);!_0x377747[_0x483bfa(0x271)](_0x483bfa(0x101))&&(_0x377747[_0x483bfa(0x101)]=![],_0x54eebe=!![]);!_0x377747[_0x483bfa(0x271)](_0x483bfa(0x22a))&&(_0x377747[_0x483bfa(0x22a)]='',_0x54eebe=!![]);if(_0x54eebe)storeSettings(_0x377747);try{fs[_0x483bfa(0x211)](configbackuppath,{'withFileTypes':!![]})[_0x483bfa(0x182)](_0x17f16d=>{const _0x57df91=_0x483bfa;if(!_0x17f16d[_0x57df91(0x20f)]()){if(!_0x17f16d['name']['startsWith'](_0x57df91(0x10e)))fs['unlinkSync'](configbackuppath+_0x17f16d[_0x57df91(0x1d9)]);}else fs[_0x57df91(0x161)](configbackuppath+_0x17f16d[_0x57df91(0x1d9)],{'recursive':!![]});});}catch(_0x4b0e21){logger[_0x483bfa(0xe1)](_0x483bfa(0x1e9),_0x4b0e21);}}function storeConfiguration(_0x12c9c8){const _0x5388fb=_0xeb46a6;dbConfig[_0x5388fb(0x102)](_0x5388fb(0x239))[_0x5388fb(0xed)]()['write'](),dbConfig[_0x5388fb(0x102)](_0x5388fb(0x239))['push'](..._0x12c9c8)[_0x5388fb(0x2a9)](),config=_0x12c9c8;}async function resetPassword(){const _0x64422=_0xeb46a6;if(tgBot&&settings['telegramChatId']){const _0x22eec1=Markup[_0x64422(0x1ce)]([Markup['button']['callback'](_0x64422(0x1cc),_0x64422(0x2a3)),Markup[_0x64422(0x159)][_0x64422(0x117)]('no',_0x64422(0xc7))]);await sendTelegram(settings[_0x64422(0x165)],_0x64422(0x1f9),_0x22eec1),tgBot['action'](/resetpw_(.+)/,async _0x1ba0e2=>{const _0x1477fd=_0x64422,_0x5a5046=_0x1ba0e2[_0x1477fd(0x1cf)][0x1];_0x1ba0e2[_0x1477fd(0x27a)]();if(_0x5a5046!='no'){const _0x4edc36=0xf,_0x2ec9d0='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x2956b4=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x4edc36)))['map'](_0xbfb412=>_0x2ec9d0[_0xbfb412%_0x2ec9d0['length']])['join'](''),_0x506f2f=bcrypt['hashSync'](_0x2956b4,saltRounds);storeSettings({'bbPassword':_0x506f2f}),await sendTelegram(_0x1ba0e2['chat']['id'],_0x1477fd(0x23b)+_0x2956b4,{'parse_mode':_0x1477fd(0x1dc)});}else await sendTelegram(_0x1ba0e2[_0x1477fd(0x20b)]['id'],_0x1477fd(0x16d));});}}async function confirmRestore(_0x599090,_0x1169d4){const _0x244417=_0xeb46a6;io['to'](_0x244417(0x164))[_0x244417(0xb5)]('notification',_0x244417(0x1da),_0x244417(0x21b));if(tgBot&&settings[_0x244417(0x165)]){const _0x570228=uuidRandom();tmpStorage[_0x570228]={'path':_0x599090,'filename':_0x1169d4};const _0x3f33fd=Markup[_0x244417(0x1ce)]([Markup[_0x244417(0x159)][_0x244417(0x117)](_0x244417(0x1cc),_0x244417(0x261)+_0x570228),Markup[_0x244417(0x159)][_0x244417(0x117)]('no',_0x244417(0xda)+_0x570228)]);await sendTelegram(settings['telegramChatId'],_0x244417(0x1a8),_0x3f33fd),tgBot[_0x244417(0x1fc)](/restore_(.+)_(.+)/,async _0x4a92f6=>{const _0x1b4fb8=_0x244417,_0x36a043=_0x4a92f6['match'][0x1],_0x44137b=_0x4a92f6[_0x1b4fb8(0x1cf)][0x2],{path:_0x21bf5d,filename:_0xc15334}=tmpStorage[_0x44137b];delete tmpStorage[_0x44137b],_0x4a92f6[_0x1b4fb8(0x27a)](),_0x36a043=='yes'?(logger[_0x1b4fb8(0xe1)](_0x1b4fb8(0x1ee)),await sendTelegram(_0x4a92f6['chat']['id'],_0x1b4fb8(0xf3),{'parse_mode':_0x1b4fb8(0x1dc)}),unzipFile(_0x21bf5d,_0xc15334)):(logger[_0x1b4fb8(0xe1)]('Restore\x20process\x20aborted'),await sendTelegram(_0x4a92f6[_0x1b4fb8(0x20b)]['id'],_0x1b4fb8(0x1a4)));});}}function getServerTime(){const _0x30cd10=_0xeb46a6,_0x5cc551=new Date();return _0x5cc551[_0x30cd10(0x20d)]()+'/'+(_0x5cc551[_0x30cd10(0x190)]()+0x1)[_0x30cd10(0x1fb)]()[_0x30cd10(0xb6)](0x2,'0')+'/'+_0x5cc551[_0x30cd10(0x253)]()[_0x30cd10(0x1fb)]()['padStart'](0x2,'0')+'\x20'+_0x5cc551['getHours']()[_0x30cd10(0x1fb)]()['padStart'](0x2,'0')+':'+_0x5cc551['getMinutes']()[_0x30cd10(0x1fb)]()[_0x30cd10(0xb6)](0x2,'0')+':'+_0x5cc551[_0x30cd10(0x2b0)]()[_0x30cd10(0x1fb)]()[_0x30cd10(0xb6)](0x2,'0');}function getTimeStamp(){const _0x8d4779=_0xeb46a6,_0x4a07b0=shiftedTime();return _0x4a07b0[_0x8d4779(0x20d)]()+'/'+(_0x4a07b0[_0x8d4779(0x190)]()+0x1)[_0x8d4779(0x1fb)]()[_0x8d4779(0xb6)](0x2,'0')+'/'+_0x4a07b0[_0x8d4779(0x253)]()[_0x8d4779(0x1fb)]()['padStart'](0x2,'0')+'\x20'+_0x4a07b0[_0x8d4779(0x2ab)]()[_0x8d4779(0x1fb)]()[_0x8d4779(0xb6)](0x2,'0')+':'+_0x4a07b0[_0x8d4779(0x282)]()[_0x8d4779(0x1fb)]()[_0x8d4779(0xb6)](0x2,'0')+':'+_0x4a07b0[_0x8d4779(0x2b0)]()[_0x8d4779(0x1fb)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x1dc539=_0xeb46a6,_0x4df883=shiftedTime();return _0x4df883[_0x1dc539(0x20d)]()+(_0x4df883[_0x1dc539(0x190)]()+0x1)[_0x1dc539(0x1fb)]()['padStart'](0x2,'0')+_0x4df883[_0x1dc539(0x253)]()['toString']()[_0x1dc539(0xb6)](0x2,'0')+'-'+_0x4df883[_0x1dc539(0x2ab)]()[_0x1dc539(0x1fb)]()[_0x1dc539(0xb6)](0x2,'0')+_0x4df883[_0x1dc539(0x282)]()[_0x1dc539(0x1fb)]()['padStart'](0x2,'0')+_0x4df883[_0x1dc539(0x2b0)]()[_0x1dc539(0x1fb)]()[_0x1dc539(0xb6)](0x2,'0');}function shiftedTime(){const _0x5b8ba0=_0xeb46a6,_0x3c13f8=new Date();let _0x3a1088=_0x3c13f8;if(settings[_0x5b8ba0(0x2a8)]&&settings[_0x5b8ba0(0x2a8)]!==0x0)_0x3a1088=fns[_0x5b8ba0(0x280)](_0x3c13f8,{'hours':settings[_0x5b8ba0(0x2a8)]});return _0x3a1088;}async function startScheduler(){const _0x5a9278=_0xeb46a6,_0x2deb17=new Date()[_0x5a9278(0x1b3)](),_0x4771b6=shiftedTime()[_0x5a9278(0x2ab)]();_0x4771b6==0x4&&backupConfigFiles(),_0x4771b6==0x0&&rotateLogFiles(),_0x2deb17%0x6==0x0&&triggerAnalytics(),_0x2deb17%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x134b7b){const _0x310a1e=_0xeb46a6;logger[_0x310a1e(0xe1)](_0x310a1e(0x26c)+_0x134b7b);const _0x16d564=getBotsWithMode();_0x16d564['length']>0x0?confirmRestore(configbackuppath,_0x134b7b):unzipFile(configbackuppath,_0x134b7b);}async function getBackupFiles(_0xd0ae42=null){const _0x245919=_0xeb46a6;let _0x376feb=[],_0x3173e0=fs[_0x245919(0x211)](configbackuppath,{'withFileTypes':!![]});_0x3173e0['sort']((_0x26dfe5,_0x42f81a)=>_0x26dfe5[_0x245919(0x1d9)]<_0x42f81a[_0x245919(0x1d9)]?0x1:_0x42f81a[_0x245919(0x1d9)]<_0x26dfe5['name']?-0x1:0x0),_0x3173e0[_0x245919(0x182)](_0x234509=>{const _0x35f3a8=_0x245919;if(!_0x234509[_0x35f3a8(0x20f)]()&&_0x234509['name'][_0x35f3a8(0x1e0)](_0x35f3a8(0x10e))&&_0x234509['name'][_0x35f3a8(0x14d)]('.zip')){const _0x43b594=formatDate(fs[_0x35f3a8(0x155)](configbackuppath+_0x234509['name'])[_0x35f3a8(0x13f)]);_0x376feb[_0x35f3a8(0x2ac)]({'name':_0x234509[_0x35f3a8(0x1d9)],'mtime':_0x43b594});}});if(_0xd0ae42)io['to'](_0xd0ae42)['emit']('backup-files',_0x376feb);else return _0x376feb;}async function backupConfigFiles(){const _0x3558d5=_0xeb46a6;await zipFiles('backup-full');const _0x5de218=getCleanTimeStamp();fs[_0x3558d5(0x185)](zippath+_0x3558d5(0x115),configbackuppath+(_0x3558d5(0x10e)+_0x5de218+_0x3558d5(0x260)));let _0x35e51d=fs[_0x3558d5(0x211)](configbackuppath,{'withFileTypes':!![]});_0x35e51d[_0x3558d5(0x195)]((_0x59757b,_0x45eba0)=>_0x59757b['name']<_0x45eba0[_0x3558d5(0x1d9)]?0x1:_0x45eba0[_0x3558d5(0x1d9)]<_0x59757b[_0x3558d5(0x1d9)]?-0x1:0x0),_0x35e51d['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x35e51d[_0x35e51d[_0x3558d5(0x1e3)]-0x1]['name']);}function rotateLogFiles(){const _0x4a1676=_0xeb46a6,_0x3db1c4=fs[_0x4a1676(0x155)](logspath+_0x4a1676(0x169)),_0x506c5b=_0x3db1c4['size']/0x400;if(_0x506c5b>0x64){let _0x1b4040=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x1b4040[_0x4a1676(0x195)]((_0x108230,_0x366145)=>_0x108230[_0x4a1676(0x1d9)]<_0x366145['name']?0x1:_0x366145['name']<_0x108230[_0x4a1676(0x1d9)]?-0x1:0x0),_0x1b4040[_0x4a1676(0x182)](_0x143e20=>{const _0x17fd73=_0x4a1676;if(_0x143e20[_0x17fd73(0x1d9)]==_0x17fd73(0x197))fs[_0x17fd73(0x185)](logspath+_0x143e20['name'],logspath+_0x17fd73(0x1bb));if(_0x143e20[_0x17fd73(0x1d9)]==_0x17fd73(0x171))fs[_0x17fd73(0x185)](logspath+_0x143e20[_0x17fd73(0x1d9)],logspath+_0x17fd73(0x197));_0x143e20[_0x17fd73(0x1d9)]==_0x17fd73(0x169)&&(fs[_0x17fd73(0x185)](logspath+_0x143e20[_0x17fd73(0x1d9)],logspath+'output-001.log'),fs[_0x17fd73(0x202)](logspath+_0x143e20[_0x17fd73(0x1d9)],''));});}}async function zipFiles(_0x18a05c){const _0x242a58=_0xeb46a6;let _0x140b65;if(_0x18a05c==_0x242a58(0x148))_0x140b65=logspath;if(_0x18a05c=='backup')_0x140b65=configpath;if(_0x18a05c==_0x242a58(0x291))_0x140b65=configpath;let _0x4dad3b=fs[_0x242a58(0x211)](_0x140b65,{'withFileTypes':!![]});const _0x2dc7a1=new JSZip();_0x4dad3b[_0x242a58(0x182)](_0x44d02c=>{const _0x4ca657=_0x242a58;if(!_0x44d02c['isDirectory']()){let _0x5c0a5d=fs[_0x4ca657(0x24d)](_0x140b65+_0x44d02c['name']);if(_0x18a05c=='backup'){const _0x4ddca9=/^bot-[0-9]{3}-config.json$/,_0x431679=_0x4ddca9['test'](_0x44d02c[_0x4ca657(0x1d9)]);if(_0x431679){const _0x4b1600=JSON[_0x4ca657(0x290)](_0x5c0a5d);if(_0x4b1600['bot'][0x0]){_0x4b1600['bot'][0x0][_0x4ca657(0x13b)]=_0x4ca657(0xf9),_0x4b1600[_0x4ca657(0x25c)][0x0][_0x4ca657(0x1c8)]='***';if(_0x4b1600['bot'][0x0][_0x4ca657(0xe7)])_0x4b1600[_0x4ca657(0x25c)][0x0][_0x4ca657(0xe7)]='***';}_0x5c0a5d=JSON[_0x4ca657(0xdf)](_0x4b1600,null,0x2);}if(_0x44d02c[_0x4ca657(0x1d9)]=='bb-settings.json'){const _0x5de42a=JSON[_0x4ca657(0x290)](_0x5c0a5d);if(_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0xb0)])_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0xb0)]=![];if(_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0x1fd)])_0x5de42a['settings'][_0x4ca657(0x1fd)]=_0x4ca657(0xf9);if(_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0x1c3)])_0x5de42a[_0x4ca657(0x296)]['telegramToken']='***';if(_0x5de42a[_0x4ca657(0x296)]['telegramChatId'])_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0x165)]=null;if(_0x5de42a['settings'][_0x4ca657(0x22a)])_0x5de42a[_0x4ca657(0x296)][_0x4ca657(0x22a)]='***';_0x5c0a5d=JSON[_0x4ca657(0xdf)](_0x5de42a,null,0x2);}if(_0x44d02c['name']!=_0x4ca657(0x25a))_0x2dc7a1['file'](_0x44d02c[_0x4ca657(0x1d9)],_0x5c0a5d);}else _0x2dc7a1[_0x4ca657(0x26e)](_0x44d02c[_0x4ca657(0x1d9)],_0x5c0a5d);}});const _0x9ba34d=await _0x2dc7a1[_0x242a58(0x1d4)]({'type':_0x242a58(0x1f1),'base64':![],'compression':_0x242a58(0x1b1)});fs[_0x242a58(0x202)](zippath+(_0x18a05c+_0x242a58(0x260)),_0x9ba34d,_0x242a58(0x206));}async function unzipFile(_0x12a190,_0x5bd636){const _0x4127a5=_0xeb46a6;fs[_0x4127a5(0x211)](configpath,{'withFileTypes':!![]})[_0x4127a5(0x182)](_0x3884d2=>{const _0x3e0987=_0x4127a5;if(!_0x3884d2['isDirectory']())fs[_0x3e0987(0x161)](configpath+_0x3884d2['name']);});const _0xd7908b=fs[_0x4127a5(0x24d)](_0x12a190+_0x5bd636,_0x4127a5(0x206)),_0x442aef=await JSZip[_0x4127a5(0x158)](_0xd7908b,{'base64':![],'checkCRC32':!![]});for(const _0x2ce510 of Object['keys'](_0x442aef['files'])){const _0x2db0ef=_0x442aef['files'][_0x2ce510],_0xdfbf91=await _0x2db0ef[_0x4127a5(0x149)](_0x4127a5(0x1f1));fs['writeFileSync'](configpath+_0x2db0ef[_0x4127a5(0x1d9)],_0xdfbf91);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x4127a5(0x182)](_0x4157c3=>{const _0xf2ec84=_0x4127a5;if(!_0x4157c3['isDirectory']())fs[_0xf2ec84(0x161)](temppath+_0x4157c3['name']);}),logger[_0x4127a5(0xe1)](_0x4127a5(0x218)),process[_0x4127a5(0x28a)]({'restore':!![]},_0x152fc6=>{});}async function getPublicIp(){const _0x1caa4=_0xeb46a6;try{const _0x225ed4=await axios['get'](_0x1caa4(0x152));publicip=_0x225ed4[_0x1caa4(0x284)]['ip'];}catch(_0x454fa4){}}async function triggerAnalytics(){const _0x5150e4=_0xeb46a6;if(!publicip)await getPublicIp();const _0x4012b1=getBotsWithMode();let _0x54429f=0x0;_0x4012b1[_0x5150e4(0x182)](_0x1dcecf=>{const _0x48f8b7=_0x5150e4;if(_0x1dcecf[_0x48f8b7(0xcc)]===_0x48f8b7(0x2b3))_0x54429f++;});const _0x69fe0a=getBotExchanges();mixpanel[_0x5150e4(0x207)](_0x5150e4(0x26b),{'distinct_id':settings[_0x5150e4(0x1b9)],'ip':publicip,'version':serverversion,'numbots':_0x4012b1[_0x5150e4(0x1e3)],'numbotsenabled':_0x54429f,'exchanges':_0x69fe0a,'environment':environment});}async function getMessages(){const _0x274b3=_0xeb46a6,_0x22ca4e=_0x274b3(0x26d),_0x4bc22e=new GraphQLClient(_0x22ca4e),_0x295361={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x318daf=serverversion[_0x274b3(0xbf)]('.'),_0x2c63ec=_0x318daf[0x0]+'.'+_0x318daf[0x1],_0x4c8462=Math['min'](settings[_0x274b3(0x122)],settings['lastmsgemitted']),_0x16f228={'last':parseInt(_0x4c8462),'bbm':_0x2c63ec},_0x27bd82=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x398085;try{_0x398085=await _0x4bc22e[_0x274b3(0x2b8)](_0x27bd82,_0x16f228,_0x295361);}catch(_0xfaeba1){}if(_0x398085&&_0x398085[_0x274b3(0x17e)]){let _0x21f065=settings['lastmsgtelegram'];newMessages=[];for(const _0x1c4d36 of _0x398085[_0x274b3(0x17e)]){newMessages[_0x274b3(0x2ac)](_0x1c4d36);let _0x2f0699=![];_0x1c4d36[_0x274b3(0x19b)]&&(updateSetting(_0x274b3(0x208),_0x1c4d36['bbvNew']),_0x2f0699=isNewerVersion(serverversion,_0x1c4d36[_0x274b3(0x19b)])||serverversion==_0x1c4d36[_0x274b3(0x19b)]);if(!_0x2f0699&&_0x1c4d36[_0x274b3(0x259)]>_0x21f065){if(_0x1c4d36['bbvReceive']===_0x274b3(0x1b2)||serverversion[_0x274b3(0x1e0)](_0x1c4d36['bbvReceive'])){let _0x4ae9dc=''+_0x1c4d36[_0x274b3(0x1d3)]+'\x0a\x0a'+_0x1c4d36[_0x274b3(0x104)];const _0x55427f=await sendTelegramMsg(toTelegramMarkdown(_0x4ae9dc),_0x274b3(0x2b2));if(_0x55427f)_0x21f065=_0x1c4d36[_0x274b3(0x259)];}}}updateAvailable=isNewerVersion(settings[_0x274b3(0x208)],serverversion),updateSetting('lastmsgtelegram',_0x21f065),emitMessages();}}function emitMessages(){const _0x3b111b=_0xeb46a6,_0x196fb1=settings[_0x3b111b(0xe4)];let _0x2c65f8=[];newMessages[_0x3b111b(0x182)](_0x41245b=>{const _0x996803=_0x3b111b;_0x41245b[_0x996803(0x259)]>_0x196fb1&&_0x2c65f8['push'](_0x41245b);}),_0x2c65f8[_0x3b111b(0x1e3)]>0x0&&getAllClients()['forEach'](_0x34afc6=>{const _0x1d6725=_0x3b111b;getSocket(_0x34afc6['id'])[_0x1d6725(0xb5)]('message',_0x2c65f8);});}function confirmMessage(_0x2fd82b){const _0x165e4c=_0xeb46a6;updateSetting(_0x165e4c(0xe4),Number(_0x2fd82b));}function isNewerVersion(_0x4712c9,_0x3c908e){const _0x4fb520=_0xeb46a6,_0x2fdd5b=_0x3c908e[_0x4fb520(0xbf)]('.'),_0x220e43=_0x4712c9[_0x4fb520(0xbf)]('.');for(var _0x4319ed=0x0;_0x4319ed<_0x220e43[_0x4fb520(0x1e3)];_0x4319ed++){const _0x1d0956=~~_0x220e43[_0x4319ed],_0x24de8d=~~_0x2fdd5b[_0x4319ed];if(_0x1d0956>_0x24de8d)return!![];if(_0x1d0956<_0x24de8d)return![];}return![];}function toTelegramMarkdown(_0x32f2d1){const _0x511eb6=_0xeb46a6,_0x44f6fe=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5d7b8c=/\*{2}(.+?)\*{2}/gim;return _0x32f2d1=_0x32f2d1['replace'](_0x44f6fe,'$1_$2_$3')[_0x511eb6(0x28b)](_0x5d7b8c,_0x511eb6(0xbd)),_0x32f2d1;}async function validateConfigFile(){const _0x32ff55=_0xeb46a6,_0x1b199c=dbConfig['get'](_0x32ff55(0x239))[_0x32ff55(0x21a)](_0x32ff55(0x191))[_0x32ff55(0xd3)]()||[];if(_0x1b199c[_0x32ff55(0x1e3)]==0x0){let _0x54a858=0x0,_0x1500bd=[];const _0x398f26=/^bot-([0-9]{3})-config.json$/,_0x1e85fa=fs[_0x32ff55(0x211)](configpath);_0x1e85fa[_0x32ff55(0x182)](_0xc01f60=>{const _0xf9f744=_0x32ff55,_0x4ddc6e=_0x398f26[_0xf9f744(0x21c)](_0xc01f60);if(_0x4ddc6e){const _0x118ddc=_0x4ddc6e[0x1];let _0x178e79=getBotAttributes(_0x118ddc);_0x1500bd[_0xf9f744(0x2ac)]({'botID':_0x118ddc,'botname':_0x178e79[_0xf9f744(0x29e)],'status':_0xf9f744(0x23c),'live':_0xf9f744(0x228)}),_0x54a858++;}}),_0x54a858!=0x0&&(dbConfig[_0x32ff55(0x102)](_0x32ff55(0x239))[_0x32ff55(0x174)](_0x1500bd)[_0x32ff55(0x2a9)](),config=_0x1500bd,restoredConfigFile=_0x54a858);}}async function restoreConfigNotify(_0x52b9f8){const _0x142a26=_0xeb46a6;let _0x213f11;if(restoredConfigFile==0x1)_0x213f11=_0x142a26(0x156);else _0x213f11=_0x142a26(0xb8);if(_0x52b9f8)io['to'](_0x142a26(0x164))['emit'](_0x142a26(0x283),_0x213f11);else{logger[_0x142a26(0x14a)]('-----------------------------------------------------------------------------------'),logger[_0x142a26(0x14a)](_0x213f11),logger[_0x142a26(0x14a)](_0x142a26(0xe9)),logger[_0x142a26(0x14a)]('');if(tgBot&&settings[_0x142a26(0x165)]&&settings[_0x142a26(0xdc)]!=_0x142a26(0xc6))await sendTelegram(settings[_0x142a26(0x165)],_0x142a26(0x1f5)+_0x213f11);}}function decryptRSA(_0x3406cd,_0x74cc6){const _0x4beb36=_0xeb46a6,_0x179920=forge['pki'][_0x4beb36(0xd1)](_0x3406cd),_0x480c1e=_0x179920[_0x4beb36(0x276)](forge[_0x4beb36(0xdb)][_0x4beb36(0x1ba)](_0x74cc6),_0x4beb36(0x1a2),{'md':forge['md'][_0x4beb36(0x28c)][_0x4beb36(0xf8)](),'mgf1':{'md':forge['md'][_0x4beb36(0x28c)]['create']()}});return _0x480c1e;}function validateCredentials(_0xa2a94d,_0x299e62){const _0x30bbc3=_0xeb46a6;if(_0xa2a94d[_0x30bbc3(0x2b4)]==settings['bbUsername']&&bcrypt['compareSync'](_0xa2a94d['password'],settings[_0x30bbc3(0x1fd)])){if(settings[_0x30bbc3(0x287)])return{'allow':![],'reason':_0x30bbc3(0xeb),'token':null};else{const _0x3e1b26=generateLoginToken(_0x299e62);return{'allow':!![],'reason':_0x30bbc3(0x256),'token':_0x3e1b26};}}else return{'allow':![],'reason':_0x30bbc3(0x229),'token':null};}function refreshToken(_0x4058e5){const _0x194a73=_0xeb46a6,_0x4bdc43=generateLoginToken(_0x4058e5);return{'allow':!![],'reason':_0x194a73(0x256),'token':_0x4bdc43};}function validateAccess(_0x3bf2bb,_0x466ef5,_0xa7d4c2){const _0x179f90=_0xeb46a6,_0xc07ef3=_0xa7d4c2?_0xa7d4c2:devices[_0x466ef5]['ip'];let _0x3a7fe5;const _0x4e1005=_0x2585e6=>{const _0x4ba6ff=_0x5a87;if(settings['loginRequired']){if(settings[_0x4ba6ff(0x287)]){if(telegram2FaApproved(_0x466ef5)){const _0xe6e4c2=generateLoginToken(_0x466ef5);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0xe6e4c2};}else return{'allow':![],'reason':_0x4ba6ff(0x22b),'token':null};}else return _0x3a7fe5=validToken(_0x2585e6,_0x466ef5),_0x3a7fe5['hasOwnProperty'](_0x4ba6ff(0x21b))?{'allow':!![],'reason':_0x4ba6ff(0x230),'token':_0x2585e6}:{'allow':![],'reason':_0x4ba6ff(0x22b),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x179f90(0x27e)]){let _0x56a4c0=[...settings[_0x179f90(0x140)],_0x179f90(0x105),'::ffff:127.0.0.1','127.0.0.1'];if(_0x56a4c0[_0x179f90(0xbc)](_0xc07ef3))return _0x4e1005(_0x3bf2bb);else{_0x3a7fe5=validToken(_0x3bf2bb,_0x466ef5);if(_0x3a7fe5['hasOwnProperty'](_0x179f90(0x21b)))return _0x4e1005(_0x3bf2bb);else{if(telegramIpApproved(_0x466ef5)){const _0x222260=generateToken(_0x466ef5);return _0x3a7fe5=_0x4e1005(_0x3bf2bb),_0x3a7fe5[_0x179f90(0x180)]?{'allow':!![],'reason':_0x179f90(0x235),'token':_0x222260}:_0x3a7fe5;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x179f90(0x25d),'token':null}:{'allow':![],'reason':_0x179f90(0x231),'token':null};}}}else return _0x4e1005(_0x3bf2bb);}function timelyDecrypt(_0x138276,_0x24c863,_0xf9c88f='@'){const _0x56643b=_0xeb46a6;if(_0x138276)try{const _0x338d4c=decryptRSA(secure[_0x56643b(0x183)],_0x138276),_0x3ce3bc=_0x338d4c[_0x56643b(0xbf)](_0xf9c88f)[0x0],_0x36595c=_0x338d4c[_0x56643b(0xbf)](_0xf9c88f)[0x1],_0x39f204=new Date()[_0x56643b(0xea)]();if(_0x24c863){if(_0x39f204-_0x36595c<maxSecretAge*0x3e8)return _0x3ce3bc;else return![];}else return _0x3ce3bc;}catch(_0x3962aa){return![];}else return![];}const validToken=(_0x50d506,_0x52c2fa)=>{const _0x25767e=_0xeb46a6,_0x303107=devices[_0x52c2fa]['ip'];if(!_0x50d506)return{'error':'No\x20authentication\x20token'};for(let _0x140bbe of blacklist){if(_0x140bbe[_0x25767e(0x2ad)]==_0x50d506)return{'error':_0x25767e(0x2a0)};}let _0x3c620d;try{_0x3c620d=jwt['verify'](_0x50d506,secure['secret']+_0x52c2fa);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3c620d[_0x25767e(0x271)](_0x25767e(0x189))&&!_0x3c620d[_0x25767e(0x271)](_0x25767e(0x2b4))||!_0x3c620d['hasOwnProperty'](_0x25767e(0x179)))return{'error':_0x25767e(0x243)};if(!_0x3c620d['hasOwnProperty'](_0x25767e(0x2b4))&&_0x3c620d[_0x25767e(0x271)](_0x25767e(0x189))){const {clientip:_0x104257}=_0x3c620d;return _0x303107==_0x104257?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x25767e(0x1ad)};}else{if(_0x3c620d[_0x25767e(0x271)](_0x25767e(0x2b4))&&_0x3c620d[_0x25767e(0x271)]('clientip')){const {username:_0x6ea08e,clientip:_0x40b8c6}=_0x3c620d;return settings[_0x25767e(0x153)]==_0x6ea08e&&_0x303107==_0x40b8c6?{'success':_0x25767e(0x133)}:{'error':_0x25767e(0x286)};}}},generateLoginToken=_0x3c9841=>{const _0x27f881=_0xeb46a6;if(_0x3c9841){const _0x1af3d7=devices[_0x3c9841]['ip'];return jwt[_0x27f881(0x1c5)]({'username':settings[_0x27f881(0x153)],'clientip':_0x1af3d7},secure[_0x27f881(0x217)]+_0x3c9841,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x33e9ed=>{const _0x29333a=_0xeb46a6;if(_0x33e9ed){const _0x1a6b48=devices[_0x33e9ed]['ip'];return jwt[_0x29333a(0x1c5)]({'clientip':_0x1a6b48},secure[_0x29333a(0x217)]+_0x33e9ed,{'expiresIn':devices[_0x33e9ed][_0x29333a(0x1c4)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3a1637=>{const _0xe890f8=_0xeb46a6;let _0x12a8dc=![];return devices[_0x3a1637][_0xe890f8(0x1c4)]&&devices[_0x3a1637][_0xe890f8(0x1c4)]['expiry']!=_0xe890f8(0xad)&&(_0x12a8dc=devices[_0x3a1637][_0xe890f8(0x1c4)][_0xe890f8(0x189)]==devices[_0x3a1637]['ip']&&new Date()[_0xe890f8(0xea)]()-devices[_0x3a1637][_0xe890f8(0x1c4)][_0xe890f8(0xd5)]<devices[_0x3a1637][_0xe890f8(0x1c4)][_0xe890f8(0x19f)]*0x3c*0x3e8),_0x12a8dc;},telegram2FaApproved=_0x27e5c8=>{const _0xa1cdc8=_0xeb46a6;let _0x4d63ea=![];return devices[_0x27e5c8][_0xa1cdc8(0x297)]&&devices[_0x27e5c8][_0xa1cdc8(0x297)]['expiry']!=_0xa1cdc8(0xad)&&(_0x4d63ea=devices[_0x27e5c8][_0xa1cdc8(0x297)][_0xa1cdc8(0x189)]==devices[_0x27e5c8]['ip']&&new Date()[_0xa1cdc8(0xea)]()-devices[_0x27e5c8][_0xa1cdc8(0x297)][_0xa1cdc8(0xd5)]<devices[_0x27e5c8][_0xa1cdc8(0x297)][_0xa1cdc8(0x19f)]*0x3c*0x3e8),_0x4d63ea;},normalizeIP=_0x273b2a=>{const _0x359d22=_0xeb46a6;let _0x5531cf=null,_0x263bad=null;if(ipaddr['isValid'](_0x273b2a)){const _0x174390=ipaddr[_0x359d22(0x290)](_0x273b2a);_0x174390['kind']()===_0x359d22(0x1ca)?(_0x174390[_0x359d22(0x21d)]()&&(_0x5531cf=_0x174390['toIPv4Address']()[_0x359d22(0x1fb)]()),_0x263bad=_0x174390[_0x359d22(0x1fb)]()):(_0x5531cf=_0x174390['toString'](),_0x263bad=_0x174390[_0x359d22(0x172)]()[_0x359d22(0x1fb)]());}return{'show':_0x5531cf?_0x5531cf:_0x263bad,'store':_0x263bad};};function formatDate(_0x302deb){const _0x58675b=_0xeb46a6;return _0x302deb[_0x58675b(0x20d)]()+'/'+(_0x302deb[_0x58675b(0x190)]()+0x1)[_0x58675b(0x1fb)]()['padStart'](0x2,'0')+'/'+_0x302deb[_0x58675b(0x253)]()[_0x58675b(0x1fb)]()[_0x58675b(0xb6)](0x2,'0')+'\x20'+_0x302deb[_0x58675b(0x2ab)]()['toString']()[_0x58675b(0xb6)](0x2,'0')+':'+_0x302deb[_0x58675b(0x282)]()[_0x58675b(0x1fb)]()[_0x58675b(0xb6)](0x2,'0')+':'+_0x302deb[_0x58675b(0x2b0)]()['toString']()[_0x58675b(0xb6)](0x2,'0');}function sleep(_0x43c441){return new Promise(_0xa427cb=>setTimeout(_0xa427cb,_0x43c441));}