const _0x43b3ba=_0x363e;(function(_0xcac3ef,_0x22bbf3){const _0x4cab90=_0x363e,_0x4665db=_0xcac3ef();while(!![]){try{const _0x1102ca=parseInt(_0x4cab90(0x20c))/0x1+-parseInt(_0x4cab90(0x285))/0x2+-parseInt(_0x4cab90(0x23f))/0x3*(parseInt(_0x4cab90(0xcf))/0x4)+-parseInt(_0x4cab90(0x14b))/0x5+parseInt(_0x4cab90(0x179))/0x6*(parseInt(_0x4cab90(0x24d))/0x7)+parseInt(_0x4cab90(0x123))/0x8*(-parseInt(_0x4cab90(0x165))/0x9)+parseInt(_0x4cab90(0x276))/0xa;if(_0x1102ca===_0x22bbf3)break;else _0x4665db['push'](_0x4665db['shift']());}catch(_0x2a215b){_0x4665db['push'](_0x4665db['shift']());}}}(_0x17f9,0xce946));const _0x43c26d=function(){let _0x32e58c=!![];return function(_0x347d99,_0x5c93e3){const _0x2dc30e=_0x32e58c?function(){const _0x27cbd2=_0x363e;if(_0x5c93e3){const _0x1669eb=_0x5c93e3[_0x27cbd2(0x219)](_0x347d99,arguments);return _0x5c93e3=null,_0x1669eb;}}:function(){};return _0x32e58c=![],_0x2dc30e;};}(),_0x3bc12c=_0x43c26d(this,function(){const _0x32c472=_0x363e;return _0x3bc12c['toString']()['search'](_0x32c472(0x237))[_0x32c472(0xdc)]()[_0x32c472(0x229)](_0x3bc12c)[_0x32c472(0x12c)](_0x32c472(0x237));});_0x3bc12c();'use strict';process['env'][_0x43b3ba(0x204)]=0x1;const childProcess=require(_0x43b3ba(0x2b8)),fs=require('fs'),fns=require(_0x43b3ba(0x160)),low=require('lowdb'),FileSync=require(_0x43b3ba(0x1d6)),path=require('path'),crypto=require(_0x43b3ba(0x113)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x43b3ba(0x207)),ipaddr=require('ipaddr.js'),argv=require(_0x43b3ba(0x140))(process[_0x43b3ba(0x107)][_0x43b3ba(0x203)](0x2))[_0x43b3ba(0x107)],uuidRandom=require(_0x43b3ba(0x258)),{Telegraf,Markup}=require(_0x43b3ba(0x270)),Mixpanel=require(_0x43b3ba(0x271)),axios=require(_0x43b3ba(0x19b)),{GraphQLClient,gql}=require(_0x43b3ba(0x2ac)),util=require('util'),fileUpload=require(_0x43b3ba(0x17d)),{networkInterfaces}=require('os'),PORT=argv[_0x43b3ba(0x217)]||_0x43b3ba(0x14e),pattern=/^[0-9]{2,4}$/;!pattern[_0x43b3ba(0x114)](PORT)&&(console[_0x43b3ba(0x19e)](_0x43b3ba(0x251)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x43b3ba(0x15b)](0x1));const HOST=argv[_0x43b3ba(0xfa)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x43b3ba(0x18e)][_0x43b3ba(0x1a7)];let bbpath=_0x43b3ba(0x1f1),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x43b3ba(0x241),environment=require('./'+bbpath2+_0x43b3ba(0xdd))['environment']||_0x43b3ba(0x16e),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x43b3ba(0x234)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x43b3ba(0x10e)),configpath=userID?bbpath+_0x43b3ba(0xd1)+userID+'/':bbpath+_0x43b3ba(0xd1),configbackuppath=configpath+_0x43b3ba(0x21f),logspath=userID?bbpath+_0x43b3ba(0xf7)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x43b3ba(0x14d)+userID+'/':bbpath+_0x43b3ba(0x14d),loggerfile=fs[_0x43b3ba(0x1fb)](logspath+_0x43b3ba(0x11c),{'flags':'a'}),temppath=userID?bbpath+_0x43b3ba(0xf8)+userID+'/':bbpath+_0x43b3ba(0xf8);!fs['existsSync'](configpath)&&fs[_0x43b3ba(0x21b)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x43b3ba(0x21b)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x43b3ba(0x234)](zippath)&&fs[_0x43b3ba(0x21b)](zippath);!fs[_0x43b3ba(0x234)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x43b3ba(0x20a)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x43b3ba(0x1da),'onepagemode':![],'marketcapApi':''}})[_0x43b3ba(0x252)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x43b3ba(0x20a)]({'secure':{},'blacklist':[]})[_0x43b3ba(0x252)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x43b3ba(0x274)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x43b3ba(0x22e),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x43b3ba(0x1d9)]&&(settings[_0x43b3ba(0x1d9)]!=''&&settings[_0x43b3ba(0x1d9)]!=_0x43b3ba(0x1ee))&&settings[_0x43b3ba(0x2af)]&&settings[_0x43b3ba(0x2af)]!='')initTelegram();const parseColor=(_0x1690b5,_0x3d779e)=>{const _0x4eb301=_0x43b3ba,_0x578475=/#[A-Z]{3}#/g;if(typeof _0x1690b5=='string'){!_0x3d779e?_0x1690b5=_0x1690b5['replace'](_0x578475,''):(_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#BLU#/g,_0x4eb301(0x13c)),_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#RED#/g,_0x4eb301(0x215)),_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#YEL#/g,_0x4eb301(0x272)),_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#MAG#/g,_0x4eb301(0x2a8)),_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#CYA#/g,_0x4eb301(0x2a5)),_0x1690b5=_0x1690b5[_0x4eb301(0x166)](/#RES#/g,'\x1b[0m'));;}return _0x1690b5;},logger={'screen':_0x61deaf=>{const _0x3fe531=_0x43b3ba;console[_0x3fe531(0x19e)](parseColor(_0x61deaf,!![]));},'simple':_0x3d9d5b=>{const _0x47de6e=_0x43b3ba;console[_0x47de6e(0x19e)](parseColor(_0x3d9d5b,!![])),loggerfile[_0x47de6e(0x252)](util['format'](parseColor(_0x3d9d5b,![]))+'\x0a');},'full':async _0x1ab831=>{const _0x227388=_0x43b3ba,_0x326a26=getTimeStamp()+_0x227388(0x1b3)+_0x1ab831;console[_0x227388(0x19e)](parseColor(_0x326a26,!![])),loggerfile[_0x227388(0x252)](util[_0x227388(0x153)](parseColor(_0x326a26,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x227388(0xfe)]!=_0x227388(0x1dd))await sendTelegram(settings[_0x227388(0x156)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x1ab831,![]));},'debug':async(_0x53e8df,_0xeb1836='')=>{const _0xb73825=_0x43b3ba,_0x1209bc=getTimeStamp()+_0xb73825(0xdb)+_0x53e8df;if(debugging)console[_0xb73825(0x19e)](parseColor(_0x1209bc,!![]));loggerfile['write'](util[_0xb73825(0x153)](parseColor(_0x1209bc,![]))+'\x0a');if(_0xeb1836){if(debugging)console[_0xb73825(0x19e)](_0xeb1836);loggerfile[_0xb73825(0x252)](util[_0xb73825(0x153)](_0xeb1836)+'\x0a');}}};let terminating=![];process['on'](_0x43b3ba(0x27e),function(_0x48d5cd){const _0x520aaa=_0x43b3ba;_0x48d5cd[_0x520aaa(0xdc)]()[_0x520aaa(0x20e)](_0x520aaa(0xbd))?(logger[_0x520aaa(0x232)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x48d5cd['port']+_0x520aaa(0xd2)),process[_0x520aaa(0x1a8)]({'terminate':!![]},_0x57ae4f=>{})):logger[_0x520aaa(0x232)](_0x48d5cd);}),process['on'](_0x43b3ba(0x15b),()=>{const _0x596607=_0x43b3ba;stopAllBots(),process[_0x596607(0x15b)](0x0);}),process['on'](_0x43b3ba(0x1a2),()=>{const _0x5902b0=_0x43b3ba;stopAllBots(),process[_0x5902b0(0x15b)](0x0);}),process['on'](_0x43b3ba(0x280),()=>{const _0x2aabf9=_0x43b3ba;stopAllBots(),process[_0x2aabf9(0x15b)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x43b3ba(0xdd))[_0x43b3ba(0x192)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x43b3ba(0x2b1)),app=express(),http=require(_0x43b3ba(0x16c))[_0x43b3ba(0x1f3)](app);app[_0x43b3ba(0x155)](fileUpload({'useTempFiles':!![]})),app[_0x43b3ba(0x200)]('/download/:type',async(_0x1a3c59,_0x11080c)=>{const _0x1ee07d=_0x43b3ba,_0x205c76=_0x1a3c59[_0x1ee07d(0x122)][_0x1ee07d(0x2bc)],_0x340fb9=getClientsWithBotID('botmanager'),_0x134129=_0x1a3c59[_0x1ee07d(0x1b9)][_0x1ee07d(0x255)],_0x53107f=timelyDecrypt(_0x134129,![]),_0x17eeca=_0x340fb9['find'](_0x437d45=>_0x437d45['uuid']==_0x53107f);if(_0x17eeca){const _0x5aefcf=normalizeIP(_0x1a3c59[_0x1ee07d(0x19f)][_0x1ee07d(0x1fd)])[_0x1ee07d(0x196)],_0x3567dc=_0x1a3c59[_0x1ee07d(0x1b9)][_0x1ee07d(0x222)];if(validateAccess(_0x3567dc,_0x53107f,_0x5aefcf)['allow'])_0x205c76=='backup'&&await backupConfigFiles(),await zipFiles(_0x205c76),_0x11080c[_0x1ee07d(0x206)](zippath+(_0x205c76+'.zip'),_0x9d1cae=>{const _0x5073e8=_0x1ee07d;_0x9d1cae&&(logger[_0x5073e8(0x28b)](_0x5073e8(0x112)+_0x205c76),logger[_0x5073e8(0x232)](_0x9d1cae));});else logger[_0x1ee07d(0x28b)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x205c76+_0x1ee07d(0x197));}else logger[_0x1ee07d(0x28b)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x205c76+'\x20(2)');}),app[_0x43b3ba(0x209)]('/upload-backup',async(_0x331855,_0x5252e7)=>{const _0x24e5da=_0x43b3ba,_0x561c09=getClientsWithBotID(_0x24e5da(0x2b9)),_0x5dc8c2=_0x331855['headers'][_0x24e5da(0x255)],_0x342fab=timelyDecrypt(_0x5dc8c2,![]),_0x1077d4=_0x561c09[_0x24e5da(0x1f5)](_0x4b83b4=>_0x4b83b4[_0x24e5da(0x255)]==_0x342fab);logger[_0x24e5da(0xd4)](_0x24e5da(0x23c));if(_0x1077d4){const _0x58c2bb=normalizeIP(_0x331855[_0x24e5da(0x19f)]['remoteAddress'])[_0x24e5da(0x196)],_0x5d537f=_0x331855[_0x24e5da(0x1b9)][_0x24e5da(0x222)];if(validateAccess(_0x5d537f,_0x342fab,_0x58c2bb)[_0x24e5da(0x28e)]){if(_0x331855[_0x24e5da(0xd8)]){const _0x1b3e1e=_0x331855[_0x24e5da(0xd8)]['backupfile'];await _0x1b3e1e['mv'](temppath+_0x1b3e1e[_0x24e5da(0x173)]),_0x5252e7[_0x24e5da(0x1a8)]({'status':!![],'message':_0x24e5da(0x1ed)});const _0x4b80f6=getBotsWithMode();_0x4b80f6[_0x24e5da(0x158)]>0x0?confirmRestore(temppath,_0x1b3e1e[_0x24e5da(0x173)]):unzipFile(temppath,_0x1b3e1e[_0x24e5da(0x173)]);}}else logger['full'](_0x24e5da(0x101));}else logger[_0x24e5da(0x28b)](_0x24e5da(0x1b4));}),app[_0x43b3ba(0x155)](express['static'](path[_0x43b3ba(0x25d)](__dirname,bbpath2,'build2'))),app['use'](express[_0x43b3ba(0x292)](path[_0x43b3ba(0x25d)](__dirname,bbpath2,_0x43b3ba(0x188)))),app[_0x43b3ba(0x200)]('/',function(_0x1f7b9a,_0x57980d){const _0x45edda=_0x43b3ba;_0x57980d[_0x45edda(0x1c6)](path['join'](__dirname,bbpath2,_0x45edda(0x17c),_0x45edda(0x1bd)));}),app['get'](_0x43b3ba(0x24a),function(_0x29158e,_0x542ba1){const _0x3df5cc=_0x43b3ba;_0x542ba1[_0x3df5cc(0x1c6)](path['join'](__dirname,bbpath2,_0x3df5cc(0x188),'index.html'));}),app[_0x43b3ba(0x200)]('/:bot/portfolio',(_0x445ef4,_0x22daba)=>{const _0x29cd7d=_0x43b3ba;_0x22daba[_0x29cd7d(0x1c6)](path['join'](__dirname,bbpath2,_0x29cd7d(0x188),_0x29cd7d(0x1bd)));}),app[_0x43b3ba(0x200)](_0x43b3ba(0x195),(_0x347d81,_0x2428d8)=>{const _0x4d2fe8=_0x43b3ba;_0x2428d8['sendFile'](path[_0x4d2fe8(0x25d)](__dirname,bbpath2,_0x4d2fe8(0x188),_0x4d2fe8(0x1bd)));}),app[_0x43b3ba(0x200)](_0x43b3ba(0x142),(_0x186a4b,_0xf197bd)=>{const _0x8abdfc=_0x43b3ba;_0xf197bd[_0x8abdfc(0x1c6)](path[_0x8abdfc(0x25d)](__dirname,bbpath2,_0x8abdfc(0x188),_0x8abdfc(0x1bd)));}),app['get'](_0x43b3ba(0xde),(_0x146d8b,_0x53aada)=>{const _0x4cca9e=_0x43b3ba;_0x53aada['sendFile'](path['join'](__dirname,bbpath2,_0x4cca9e(0x188),_0x4cca9e(0x1bd)));}),app[_0x43b3ba(0x200)](_0x43b3ba(0x236),(_0x933bee,_0x29b22b)=>{const _0x4906ae=_0x43b3ba;_0x29b22b[_0x4906ae(0x1c6)](path[_0x4906ae(0x25d)](__dirname,bbpath2,'build',_0x4906ae(0x1bd)));}),app[_0x43b3ba(0x200)](_0x43b3ba(0x159),(_0x1f7539,_0x4dd7d0)=>{const _0x2b7e3c=_0x43b3ba;_0x4dd7d0[_0x2b7e3c(0x1c6)](path[_0x2b7e3c(0x25d)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x43b3ba(0x133)](PORT,HOST);else http[_0x43b3ba(0x133)](PORT);const io=require(_0x43b3ba(0x1f4))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5a45f1=_0x43b3ba;let _0x5825b6='[ip-address]';const _0x36faac=networkInterfaces(),_0x3b52f4={};for(const _0x8e8fad of Object[_0x5a45f1(0xea)](_0x36faac)){for(const _0x1fd81a of _0x36faac[_0x8e8fad]){if((_0x1fd81a['family']==_0x5a45f1(0x2bd)||_0x1fd81a[_0x5a45f1(0xc1)]==0x4)&&!_0x1fd81a[_0x5a45f1(0x1b7)]){const _0x3455c6=ipaddr[_0x5a45f1(0x1cf)](_0x1fd81a['address'])['range']();_0x3455c6!=_0x5a45f1(0x135)&&(!_0x3b52f4[_0x8e8fad]&&(_0x3b52f4[_0x8e8fad]=[]),_0x3b52f4[_0x8e8fad][_0x5a45f1(0x1c7)](_0x1fd81a['address']),_0x5825b6=_0x1fd81a[_0x5a45f1(0x1f0)]);}}}return{'serverip':_0x5825b6,'netinterfaces':_0x3b52f4};}async function startServer(){const _0x54e528=_0x43b3ba,{serverip:_0x117843,netinterfaces:_0x5e793b}=getServerIP();logger['simple'](''),logger[_0x54e528(0x232)](_0x54e528(0x170)),await logger[_0x54e528(0x28b)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x54e528(0x29b)+(environment==_0x54e528(0x1d5)?_0x54e528(0x268):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0x117843+':'+PORT+_0x54e528(0x11a))),logger[_0x54e528(0x232)](_0x54e528(0x170));if(config[_0x54e528(0x158)]!=0x0)for(const _0x4e03e1 of config){const _0x441861=_0x4e03e1['mode']=='auto'?'a':'m';if(_0x4e03e1[_0x54e528(0x230)]==_0x54e528(0x1b5)||_0x4e03e1[_0x54e528(0x230)]==_0x54e528(0x132))await logger[_0x54e528(0x28b)](_0x54e528(0x1c3)+_0x441861+_0x54e528(0x2ad)+_0x4e03e1['botID']+_0x54e528(0x191)+_0x4e03e1[_0x54e528(0x29a)]),startBot([_0x4e03e1[_0x54e528(0x1a3)],userID],{'cwd':bbpath},function(_0x4c4313){const _0x180575=_0x54e528;if(_0x4c4313)logger[_0x180575(0x28b)](_0x4c4313);});else(_0x4e03e1[_0x54e528(0x230)]=='disabled'||_0x4e03e1[_0x54e528(0x230)]==_0x54e528(0x2a2))&&await logger[_0x54e528(0x28b)](_0x54e528(0x297)+_0x441861+')\x20\x20\x20|\x20Bot\x20'+_0x4e03e1[_0x54e528(0x1a3)]+_0x54e528(0x191)+_0x4e03e1['botname']);}else!newBot&&logger[_0x54e528(0x232)](_0x54e528(0x2b5));if(newBot)addBot();logger[_0x54e528(0x232)]('-----------------------------------------------------------------------------------'),logger[_0x54e528(0x232)](''),await logger[_0x54e528(0xd4)]('Node.js\x20v'+nodeversion),await logger[_0x54e528(0xd4)](_0x54e528(0x240),_0x5e793b);}function startSocket(){const _0x3a4fb3=_0x43b3ba;io['on'](_0x3a4fb3(0x143),_0x5daad4=>{const _0x5ef079=_0x3a4fb3;let _0x45499f,_0x597817,_0x7e046f,_0x57f746,_0x54f601;const _0x1af32c=_0x5daad4[_0x5ef079(0x1f7)][_0x5ef079(0x1b9)][_0x5ef079(0x106)];_0x597817=_0x1af32c[_0x5ef079(0x1ae)](/bot[0-9]{3}/);if(_0x597817)_0x7e046f=_0x597817[0x0][_0x5ef079(0x1ae)](/[0-9]{3}/);if(_0x7e046f)_0x45499f=_0x7e046f[0x0];else _0x45499f=_0x5ef079(0x2b9);const _0x56ac51=_0x5daad4[_0x5ef079(0x1f7)][_0x5ef079(0x2b4)][_0x5ef079(0x2bf)];if(!_0x56ac51)_0x5daad4[_0x5ef079(0x1c4)](_0x5ef079(0x230),{'publicKey':secure[_0x5ef079(0x2bb)]});else{_0x57f746=timelyDecrypt(_0x56ac51,![]);if(!_0x57f746)_0x5daad4[_0x5ef079(0x1c4)](_0x5ef079(0x230),{'publicKey':secure[_0x5ef079(0x2bb)]});else{_0x54f601=normalizeIP(_0x5daad4[_0x5ef079(0x115)][_0x5ef079(0x1fd)])[_0x5ef079(0x196)];if(!devices[_0x57f746])devices[_0x57f746]={'uuid':_0x57f746,'access':{'token':null}};devices[_0x57f746]['ip']=_0x54f601;const _0x3943da=addClient(_0x5daad4['id'],_0x57f746,_0x45499f);setAccess(_0x3943da),emitMessages(),_0x5daad4['on']('login',_0x31ea2f=>{const _0x25c70f=_0x5ef079,_0x288719=timelyDecrypt(_0x31ea2f['password'],!![],_0x25c70f(0x298));if(_0x288719){_0x31ea2f={'username':_0x31ea2f['username'],'password':_0x288719},devices[_0x57f746][_0x25c70f(0x227)]=validateCredentials(_0x31ea2f,_0x57f746);if(devices[_0x57f746][_0x25c70f(0x227)][_0x25c70f(0x28e)]==![]&&devices[_0x57f746][_0x25c70f(0x227)][_0x25c70f(0x1c5)]=='2FA\x20login\x20required')_0x5daad4[_0x25c70f(0x1c4)](_0x25c70f(0x230),{'access':devices[_0x57f746]['access']}),loginAccess2FA(_0x57f746,_0x54f601);else{if(devices[_0x57f746][_0x25c70f(0x227)][_0x25c70f(0x28e)]==![]&&devices[_0x57f746]['access'][_0x25c70f(0x1c5)]==_0x25c70f(0x13b))_0x5daad4[_0x25c70f(0x1c4)]('status',{'access':devices[_0x57f746][_0x25c70f(0x227)]});else devices[_0x57f746][_0x25c70f(0x227)]['allow']&&devices[_0x57f746][_0x25c70f(0x227)]['reason']==_0x25c70f(0x103)&&(getClientsWithUuid(_0x57f746)[_0x25c70f(0x129)](_0x11a53b=>{setAccess(_0x11a53b);}),logger[_0x25c70f(0xd4)](_0x25c70f(0x23d)+_0x57f746[_0x25c70f(0x203)](-0x8)),setTokenRefresh(_0x57f746),setSessionTimeout(_0x25c70f(0x184),_0x57f746));}}else logger[_0x25c70f(0x28b)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x5daad4['on'](_0x5ef079(0x141),()=>{resetPassword();}),_0x5daad4['on'](_0x5ef079(0x24c),_0x338c20=>{removeClient(_0x5daad4['id']);}),_0x45499f==_0x5ef079(0x2b9)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1d8ecf){const _0x3ad5a6=_0x43b3ba;if(_0x1d8ecf!='botmanager'&&config[_0x3ad5a6(0x11d)]!=''){if(pid[_0x1d8ecf])pid[_0x1d8ecf][_0x3ad5a6(0x1a8)]({'function':_0x3ad5a6(0x2b6),'args':null});}_0x1d8ecf!=_0x3ad5a6(0x2b9)&&broadcastToBots(_0x3ad5a6(0x29e),JSON[_0x3ad5a6(0x213)](config));}function reloadBotManager(){const _0x4601cd=_0x43b3ba;getClientsWithBotID(_0x4601cd(0x2b9))['forEach'](_0x2bf473=>{const _0x38f013=_0x4601cd;getSocket(_0x2bf473['id'])[_0x38f013(0x1c4)](_0x38f013(0x230),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0xef0130){const _0x280ffa=_0x43b3ba;return io[_0x280ffa(0x278)][_0x280ffa(0x278)][_0x280ffa(0x200)](_0xef0130);}function setAccess(_0x28706f){const _0x102ce2=_0x43b3ba,_0x461bef=getSocket(_0x28706f['id']),_0x29fc93=_0x28706f[_0x102ce2(0x255)],_0x136b26=_0x28706f[_0x102ce2(0x1ab)];devices[_0x29fc93][_0x102ce2(0x227)]=validateAccess(devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x127)],_0x29fc93),logger[_0x102ce2(0xd4)](_0x102ce2(0x10b)+devices[_0x29fc93]['access']['reason']+'\x20|\x20client:\x20...'+_0x28706f['id'][_0x102ce2(0x203)](-0x8)+'\x20|\x20user:\x20...'+_0x29fc93[_0x102ce2(0x203)](-0x8)),_0x461bef['join'](_0x29fc93);if(devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x28e)]){_0x461bef[_0x102ce2(0x25d)](_0x136b26);if(_0x136b26==_0x102ce2(0x2b9))initializeSocketBotManager(_0x461bef);else initializeSocketBot(_0x461bef);initClient(_0x136b26);}devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x127)]&&devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x1c5)]==_0x102ce2(0x1d2)&&setSessionTimeout(_0x102ce2(0x105),_0x29fc93),devices[_0x29fc93]['access'][_0x102ce2(0x127)]&&devices[_0x29fc93]['access'][_0x102ce2(0x1c5)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x102ce2(0x184),_0x29fc93),_0x461bef['emit'](_0x102ce2(0x230),{'status':_0x28706f[_0x102ce2(0x1d7)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x29fc93][_0x102ce2(0x227)],'externalip':devices[_0x29fc93]['ip'],'publicKey':secure[_0x102ce2(0x2bb)],'userid':settings[_0x102ce2(0x290)],'validInstallation':validInstallation}),devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x28e)]==![]&&devices[_0x29fc93][_0x102ce2(0x227)][_0x102ce2(0x1c5)]=='2FA\x20required'&&temporaryAccess2FA(_0x29fc93,devices[_0x29fc93]['ip']);}function setSessionTimeout(_0x332575,_0xdadf26){const _0x5066d9=_0x43b3ba;let _0x3f4026;if(_0x332575==_0x5066d9(0x184))_0x3f4026=loginExpiry*0x3c*0x3e8;else _0x3f4026=devices[_0xdadf26][_0x5066d9(0x124)][_0x5066d9(0x134)]*0x3c*0x3e8-(new Date()[_0x5066d9(0x130)]()-devices[_0xdadf26]['telegramIpApproval'][_0x5066d9(0x216)]);if(devices[_0xdadf26][_0x5066d9(0x1e4)])clearTimeout(devices[_0xdadf26][_0x5066d9(0x1e4)]);devices[_0xdadf26][_0x5066d9(0x1e4)]=setTimeout(()=>{const _0x2a7abf=_0x5066d9;if(devices[_0xdadf26]['pidRefreshToken'])clearTimeout(devices[_0xdadf26][_0x2a7abf(0x275)]);removeSocketListeners(_0xdadf26),addBlacklist(_0xdadf26),devices[_0xdadf26][_0x2a7abf(0x124)]=null,devices[_0xdadf26]['telegram2FaApproval']=null,devices[_0xdadf26][_0x2a7abf(0x227)]['token']=null,logger[_0x2a7abf(0xd4)](_0x2a7abf(0x10a)+_0xdadf26[_0x2a7abf(0x203)](-0x8)),devices[_0xdadf26][_0x2a7abf(0x227)]=validateAccess(devices[_0xdadf26][_0x2a7abf(0x227)]['token'],_0xdadf26),!(devices[_0xdadf26][_0x2a7abf(0x227)]['allow']&&devices[_0xdadf26][_0x2a7abf(0x227)][_0x2a7abf(0x1c5)]==_0x2a7abf(0xcd))&&(_0x332575=='login'?io['to'](_0xdadf26)[_0x2a7abf(0x1c4)](_0x2a7abf(0x230),{'access':{'allow':![],'reason':_0x2a7abf(0xc6),'token':null}}):io['to'](_0xdadf26)[_0x2a7abf(0x1c4)]('status',{'access':{'allow':![],'reason':_0x2a7abf(0x1c9),'token':null}})),devices[_0xdadf26]['access'][_0x2a7abf(0x127)]=null;},_0x3f4026);}function setTokenRefresh(_0x5a2a0f){const _0x23fe78=_0x43b3ba;if(devices[_0x5a2a0f][_0x23fe78(0x275)])clearTimeout(devices[_0x5a2a0f]['pidRefreshToken']);devices[_0x5a2a0f][_0x23fe78(0x275)]=setTimeout(()=>{const _0x24aa53=_0x23fe78;getClientsWithUuid(_0x5a2a0f)[_0x24aa53(0x158)]!=0x0?(devices[_0x5a2a0f][_0x24aa53(0x227)]=refreshToken(_0x5a2a0f),io['to'](_0x5a2a0f)[_0x24aa53(0x1c4)](_0x24aa53(0x230),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5a2a0f][_0x24aa53(0x227)],'externalip':devices[_0x5a2a0f]['ip'],'publicKey':secure[_0x24aa53(0x2bb)],'validInstallation':validInstallation}),setTokenRefresh(_0x5a2a0f)):clearTimeout(devices[_0x5a2a0f][_0x24aa53(0x275)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x566e14){const _0x3d9b60=_0x43b3ba,_0x3f13e7=getClient(_0x566e14['id'])[_0x3d9b60(0x255)];_0x566e14['emit'](_0x3d9b60(0x29e),config),_0x566e14[_0x3d9b60(0x1c4)]('settings',cleanSettings()),_0x566e14['on'](_0x3d9b60(0x1a1),_0x4c7b72=>{const _0x477987=_0x3d9b60;if(validateAccess(_0x4c7b72,_0x3f13e7)[_0x477987(0x28e)])addBot();else logger['full'](_0x477987(0x109));}),_0x566e14['on'](_0x3d9b60(0x224),(_0x3d23bd,_0x365b64)=>{const _0x4cffed=_0x3d9b60;if(validateAccess(_0x365b64,_0x3f13e7)['allow'])toggleBot(_0x3d23bd[_0x4cffed(0x1a3)],_0x3d23bd['status'],_0x3d23bd[_0x4cffed(0xe8)]);else logger['full'](_0x4cffed(0x22c));}),_0x566e14['on'](_0x3d9b60(0x1cc),(_0x2bdb02,_0x54a131)=>{const _0x2801d7=_0x3d9b60;if(validateAccess(_0x54a131,_0x3f13e7)['allow'])toggleBotMode(_0x2bdb02);else logger[_0x2801d7(0x28b)](_0x2801d7(0x22c));}),_0x566e14['on'](_0x3d9b60(0xe1),(_0x26fad8,_0x28e0c3)=>{const _0x133ef2=_0x3d9b60;if(validateAccess(_0x28e0c3,_0x3f13e7)[_0x133ef2(0x28e)])deleteBot(_0x26fad8);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x566e14['on'](_0x3d9b60(0x266),(_0x4eadb7,_0x4dbbfe)=>{const _0x209950=_0x3d9b60;if(validateAccess(_0x4dbbfe,_0x3f13e7)[_0x209950(0x28e)])storeSettings(_0x4eadb7,!![]);else logger['full'](_0x209950(0x2a0));}),_0x566e14['on']('update-bb',_0x805baa=>{const _0x568962=_0x3d9b60;if(validateAccess(_0x805baa,_0x3f13e7)[_0x568962(0x28e)])updateBB(_0x568962(0xe6));else logger[_0x568962(0x28b)](_0x568962(0x2c1));}),_0x566e14['on'](_0x3d9b60(0x20f),_0x554960=>{const _0x2c59c4=_0x3d9b60;if(validateAccess(_0x554960,_0x3f13e7)[_0x2c59c4(0x28e)])updateBB(_0x2c59c4(0xf2));else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x566e14['on']('get-backup-files',_0x2010c2=>{const _0x402b02=_0x3d9b60;if(validateAccess(_0x2010c2,_0x3f13e7)[_0x402b02(0x28e)]){const _0x455eab=getClient(_0x566e14['id']);if(_0x455eab)getBackupFiles(_0x455eab[_0x402b02(0x255)]);else logger[_0x402b02(0x28b)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x402b02(0x28b)](_0x402b02(0x182));}),_0x566e14['on'](_0x3d9b60(0x14c),(_0x5c1721,_0x14b608)=>{const _0xa1f261=_0x3d9b60;if(validateAccess(_0x14b608,_0x3f13e7)[_0xa1f261(0x28e)])restoreBackupFile(_0x5c1721);else logger[_0xa1f261(0x28b)](_0xa1f261(0x1ce));}),_0x566e14['on'](_0x3d9b60(0x19c),_0x3c87c8=>{const _0x1b4246=_0x3d9b60;if(validateAccess(_0x3c87c8,_0x3f13e7)['allow'])getMessages();else logger[_0x1b4246(0x28b)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x566e14['on'](_0x3d9b60(0x11f),(_0x5ac179,_0xcfcb2c)=>{const _0x465d94=_0x3d9b60;if(validateAccess(_0xcfcb2c,_0x3f13e7)[_0x465d94(0x28e)])confirmMessage(_0x5ac179);else logger[_0x465d94(0x28b)](_0x465d94(0x167));}),_0x566e14['on'](_0x3d9b60(0xfc),_0x3ec921=>{const _0x14f5a9=_0x3d9b60;if(validateAccess(_0x3ec921,_0x3f13e7)[_0x14f5a9(0x28e)]){if(devices[_0x3f13e7][_0x14f5a9(0x275)])clearTimeout(devices[_0x3f13e7]['pidRefreshToken']);if(devices[_0x3f13e7][_0x14f5a9(0x1e4)])clearTimeout(devices[_0x3f13e7][_0x14f5a9(0x1e4)]);removeSocketListeners(getClient(_0x566e14['id'])[_0x14f5a9(0x255)]),addBlacklist(_0x3f13e7),devices[_0x3f13e7]['telegramIpApproval']=null,devices[_0x3f13e7][_0x14f5a9(0xf1)]=null,devices[_0x3f13e7]['access']['token']=null,logger[_0x14f5a9(0xd4)]('Logged\x20out\x20user\x20...'+_0x3f13e7[_0x14f5a9(0x203)](-0x8)),io['to'](getClient(_0x566e14['id'])[_0x14f5a9(0x255)])[_0x14f5a9(0x1c4)](_0x14f5a9(0x230),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x14f5a9(0xda));});}function initializeSocketBot(_0x4cf961){const _0x304fa3=_0x43b3ba,_0x3e6672=getClient(_0x4cf961['id'])['bot'],_0x593006=getClient(_0x4cf961['id'])[_0x304fa3(0x255)];_0x4cf961['on'](_0x304fa3(0x1a4),(_0xed3b14,_0x3583e8)=>{const _0x41645f=_0x304fa3;if(validateAccess(_0x3583e8,_0x593006)['allow']){if(pid[_0x3e6672])pid[_0x3e6672][_0x41645f(0x1a8)]({'function':_0x41645f(0x13d),'args':_0xed3b14});}else logger[_0x41645f(0x28b)](_0x41645f(0xc5));}),_0x4cf961['on']('delete-alerts',(_0x4011d1,_0x47242f)=>{const _0x47f811=_0x304fa3;if(validateAccess(_0x47242f,_0x593006)[_0x47f811(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672][_0x47f811(0x1a8)]({'function':_0x47f811(0x20b),'args':_0x4011d1});}else logger['full'](_0x47f811(0x12b));}),_0x4cf961['on'](_0x304fa3(0x260),(_0x45da70,_0x195fdb)=>{const _0x4f9083=_0x304fa3;if(validateAccess(_0x195fdb,_0x593006)[_0x4f9083(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672][_0x4f9083(0x1a8)]({'function':_0x4f9083(0x1f6),'args':_0x45da70});}else logger[_0x4f9083(0x28b)](_0x4f9083(0x22d));}),_0x4cf961['on'](_0x304fa3(0xca),(_0x481885,_0x7536d)=>{const _0x466a62=_0x304fa3;if(validateAccess(_0x7536d,_0x593006)[_0x466a62(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672][_0x466a62(0x1a8)]({'function':_0x466a62(0xfd),'args':_0x481885});}else logger[_0x466a62(0x28b)](_0x466a62(0x2a7));}),_0x4cf961['on'](_0x304fa3(0x23b),(_0x3fc61f,_0x9aa882)=>{const _0x4b716a=_0x304fa3;if(validateAccess(_0x9aa882,_0x593006)['allow']){if(pid[_0x3e6672])pid[_0x3e6672][_0x4b716a(0x1a8)]({'function':_0x4b716a(0x1e5),'args':_0x3fc61f});}else logger[_0x4b716a(0x28b)](_0x4b716a(0x148));}),_0x4cf961['on'](_0x304fa3(0x27f),(_0x300005,_0x3d9e23)=>{const _0x514666=_0x304fa3;if(validateAccess(_0x3d9e23,_0x593006)['allow']){if(pid[_0x3e6672])pid[_0x3e6672]['send']({'function':_0x514666(0x294),'args':_0x300005});}else logger[_0x514666(0x28b)](_0x514666(0xf9));}),_0x4cf961['on'](_0x304fa3(0x19d),_0x5178ae=>{const _0x9b0240=_0x304fa3;if(validateAccess(_0x5178ae,_0x593006)['allow']){if(pid[_0x3e6672])pid[_0x3e6672][_0x9b0240(0x1a8)]({'function':'resetHistory','args':null});}else logger[_0x9b0240(0x28b)](_0x9b0240(0xe7));}),_0x4cf961['on']('get-starting-balances',_0xdde70=>{const _0x554f36=_0x304fa3;if(validateAccess(_0xdde70,_0x593006)[_0x554f36(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672]['send']({'function':_0x554f36(0x168),'args':null});}else logger[_0x554f36(0x28b)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4cf961['on'](_0x304fa3(0x24e),(_0x466fa2,_0x4132a9)=>{const _0x558aca=_0x304fa3;if(validateAccess(_0x4132a9,_0x593006)['allow']){if(pid[_0x3e6672])pid[_0x3e6672][_0x558aca(0x1a8)]({'function':_0x558aca(0x22a),'args':_0x466fa2});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x4cf961['on'](_0x304fa3(0x269),_0x34ca7a=>{const _0x5399c5=_0x304fa3;if(validateAccess(_0x34ca7a,_0x593006)[_0x5399c5(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672][_0x5399c5(0x1a8)]({'function':_0x5399c5(0x164),'args':null});}else logger[_0x5399c5(0x28b)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x4cf961['on'](_0x304fa3(0x29c),_0x3381d1=>{const _0x5b4cc1=_0x304fa3;if(validateAccess(_0x3381d1,_0x593006)[_0x5b4cc1(0x28e)]){if(pid[_0x3e6672])pid[_0x3e6672][_0x5b4cc1(0x1a8)]({'function':_0x5b4cc1(0xf3),'args':null});}else logger[_0x5b4cc1(0x28b)](_0x5b4cc1(0x1f2));}),_0x4cf961['on'](_0x304fa3(0x13a),_0x1e5a09=>{const _0x557c92=_0x304fa3;if(validateAccess(_0x1e5a09,_0x593006)[_0x557c92(0x28e)])updateBB(_0x557c92(0xe6));else logger['full'](_0x557c92(0x2c1));}),_0x4cf961['on']('get-messages',_0x375ac3=>{const _0x5445ba=_0x304fa3;if(validateAccess(_0x375ac3,_0x593006)[_0x5445ba(0x28e)])getMessages();else logger[_0x5445ba(0x28b)](_0x5445ba(0x18b));}),_0x4cf961['on'](_0x304fa3(0x11f),(_0x51f5e3,_0x1e0605)=>{const _0x2655dc=_0x304fa3;if(validateAccess(_0x1e0605,_0x593006)[_0x2655dc(0x28e)])confirmMessage(_0x51f5e3);else logger[_0x2655dc(0x28b)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4cf961['on'](_0x304fa3(0xfc),_0x1c9c34=>{const _0x1a96b8=_0x304fa3;if(validateAccess(_0x1c9c34,_0x593006)['allow']){if(devices[_0x593006][_0x1a96b8(0x275)])clearTimeout(devices[_0x593006][_0x1a96b8(0x275)]);if(devices[_0x593006][_0x1a96b8(0x1e4)])clearTimeout(devices[_0x593006][_0x1a96b8(0x1e4)]);removeSocketListeners(getClient(_0x4cf961['id'])[_0x1a96b8(0x255)]),addBlacklist(_0x593006),devices[_0x593006][_0x1a96b8(0x124)]=null,devices[_0x593006][_0x1a96b8(0xf1)]=null,devices[_0x593006][_0x1a96b8(0x227)][_0x1a96b8(0x127)]=null,logger['debug'](_0x1a96b8(0x28a)+_0x593006['slice'](-0x8)),io['to'](getClient(_0x4cf961['id'])[_0x1a96b8(0x255)])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1a96b8(0x28b)](_0x1a96b8(0xda));});}function removeSocketListeners(_0x5805d0){const _0x105a86=_0x43b3ba;getClientsWithUuid(_0x5805d0)[_0x105a86(0x129)](_0x131900=>{const _0x1d2c2b=_0x105a86;getSocket(_0x131900['id'])[_0x1d2c2b(0x100)]();});}function cleanSettings(){const _0xd1d1c8=_0x43b3ba;let _0x679f10=settings;return settings[_0xd1d1c8(0x1d9)]&&settings[_0xd1d1c8(0x1d9)]!=''&&(_0x679f10={..._0x679f10,'telegramToken':_0xd1d1c8(0x2a9)}),settings[_0xd1d1c8(0x14f)]&&settings['bbPassword']!=''&&(_0x679f10={..._0x679f10,'bbPassword':_0xd1d1c8(0x2a9)}),settings['marketcapApi']&&settings[_0xd1d1c8(0x27b)]!=''&&(_0x679f10={..._0x679f10,'marketcapApi':'************'}),(settings[_0xd1d1c8(0x14f)]&&settings[_0xd1d1c8(0x14f)]=='***'||settings[_0xd1d1c8(0x1d9)]&&settings[_0xd1d1c8(0x1d9)]==_0xd1d1c8(0x1ee)||settings[_0xd1d1c8(0x27b)]&&settings[_0xd1d1c8(0x27b)]==_0xd1d1c8(0x1ee))&&(_0x679f10={..._0x679f10,'restored':{'password':settings[_0xd1d1c8(0x14f)]=='***','telegram':settings[_0xd1d1c8(0x1d9)]==_0xd1d1c8(0x1ee),'marketcap':settings[_0xd1d1c8(0x27b)]==_0xd1d1c8(0x1ee)}}),_0x679f10;}async function updateBB(_0x2ddd7b){const _0x355a39=_0x43b3ba;await backupConfigFiles(),installingUpdate=!![],config[_0x355a39(0x129)](_0x2b6611=>{const _0x5b7ef4=_0x355a39;restartBot(_0x2b6611[_0x5b7ef4(0x1a3)]);});if(_0x2ddd7b==_0x355a39(0xe6))process[_0x355a39(0x1a8)]({'update':!![],'environment':environment},_0x326996=>{});else _0x2ddd7b==_0x355a39(0xf2)&&process[_0x355a39(0x1a8)]({'reinstall':!![],'environment':environment},_0x2f7ec5=>{});}function startBot(_0x148e0f,_0x27a70f,_0x2c622e){const _0x81e886=_0x43b3ba;if(debugging)_0x148e0f[_0x81e886(0x1c7)]('-d');let _0x43ce04=![];const _0x42d7c1=_0x148e0f[0x0];_0x27a70f={..._0x27a70f,'stdio':[_0x81e886(0x1e2),_0x81e886(0x1e2),_0x81e886(0x1e2),_0x81e886(0x233)]},pid[_0x42d7c1]=childProcess[_0x81e886(0x1bb)](botfile,_0x148e0f,_0x27a70f),pid[_0x42d7c1]['on'](_0x81e886(0x250),_0x58eb51=>{const _0x4b68aa=_0x81e886;switch(Object[_0x4b68aa(0xea)](_0x58eb51)[0x0]){case'botname':updateBotName(_0x42d7c1,_0x58eb51[_0x4b68aa(0x29a)]);break;case _0x4b68aa(0xc7):updateBotManager();break;case _0x4b68aa(0x230):updateStatus(_0x42d7c1,_0x58eb51[_0x4b68aa(0x230)]);break;case _0x4b68aa(0xe8):updateLive(_0x42d7c1,_0x58eb51['live']);break;case'started':updateLive(_0x42d7c1,_0x58eb51[_0x4b68aa(0x29d)]),io['to'](_0x42d7c1)[_0x4b68aa(0x1c4)](_0x4b68aa(0x230),{'access':{'allow':![],'reason':_0x4b68aa(0x199),'token':null}});break;case'stop':_0x58eb51['stop']=='restart'&&restartBot(_0x42d7c1);_0x58eb51['stop']==_0x4b68aa(0x23e)&&toggleBot(_0x42d7c1,'disabled',_0x4b68aa(0x13f));break;case _0x4b68aa(0x2b3):sendTelegramBot(_0x42d7c1,_0x58eb51[_0x4b68aa(0x2b3)]);break;case _0x4b68aa(0x16a):sendTelegramMsg(_0x58eb51[_0x4b68aa(0x16a)]);break;case _0x4b68aa(0x1e3):io['to'](_0x42d7c1)[_0x4b68aa(0x1c4)](_0x58eb51[_0x4b68aa(0x1e3)],_0x58eb51['args']);break;}}),pid[_0x42d7c1]['on'](_0x81e886(0xfb),function(_0x21be9f){if(_0x43ce04)return;_0x43ce04=!![],_0x2c622e(_0x21be9f);}),pid[_0x42d7c1]['on']('exit',async function(_0x407113){const _0x3432f1=_0x81e886;if(terminating)return;if(installingUpdate){logger[_0x3432f1(0xd4)](_0x3432f1(0x1d8)),io[_0x3432f1(0x1ea)]();return;}if(_0x43ce04)return;_0x43ce04=!![],_0x2c622e(null);const _0x3a8797=dbConfig['get'](_0x3432f1(0x29e))['find']({'botID':_0x42d7c1})[_0x3432f1(0xef)]();_0x3a8797&&(_0x3a8797[_0x3432f1(0x230)]=='enabled'||_0x3a8797['status']==_0x3432f1(0x132))&&(await sleep(0x3e8),updateLive(_0x42d7c1,_0x3432f1(0x13f)),logger['debug'](_0x3432f1(0x1fe)+_0x42d7c1),startBot([_0x42d7c1,userID],{'cwd':bbpath},function(_0x414001){const _0x5c09db=_0x3432f1;if(_0x414001)logger[_0x5c09db(0x28b)](_0x414001);}));});}function stopBot(_0xb2fd78){getClientsWithBotID(_0xb2fd78)['forEach'](_0x31697c=>{const _0x459faa=_0x363e;getSocket(_0x31697c['id'])[_0x459faa(0x24c)](!![]),removeClient(_0x31697c['id']);}),pid[_0xb2fd78]&&(pid[_0xb2fd78]['kill'](),pid[_0xb2fd78]=null);}function stopAllBots(){terminating=!![];const _0x486cd9=getEnabledBots();_0x486cd9['forEach'](_0xdf4e37=>{const _0x39c0d5=_0x363e;stopBot(_0xdf4e37[_0x39c0d5(0x1a3)]);});}function restartBot(_0x112c31){const _0x50ef5e=_0x43b3ba;if(pid[_0x112c31])pid[_0x112c31][_0x50ef5e(0x23e)]();}function restartAllBots(){const _0x3f319a=_0x43b3ba,_0x48ac65=getEnabledBots();_0x48ac65[_0x3f319a(0x129)](()=>{const _0x2d4574=_0x3f319a;broadcastToBots(_0x2d4574(0x1e3),_0x2d4574(0x2b0));});}function addBot(){const _0x120e56=_0x43b3ba;let _0x21a692;for(let _0x6987ba=0x1;_0x6987ba<0x3e9;_0x6987ba++){_0x21a692=_0x6987ba[_0x120e56(0xdc)]()['padStart'](0x3,'0');let _0x2b82d7=config['find'](_0x178b80=>_0x178b80[_0x120e56(0x1a3)]==_0x21a692);if(!_0x2b82d7)break;}if(_0x21a692===_0x120e56(0x2ae)){logger[_0x120e56(0x28b)](_0x120e56(0x28c));return;}logger['full'](_0x120e56(0x1a5)+_0x21a692),dbConfig[_0x120e56(0x200)](_0x120e56(0x29e))[_0x120e56(0x1c7)]({'botID':_0x21a692,'botname':_0x120e56(0x12d)+_0x21a692,'status':'new','live':''})[_0x120e56(0x252)](),startBot([_0x21a692,userID],{'cwd':bbpath},function(_0x2631fe){const _0x3e4902=_0x120e56;if(_0x2631fe)logger[_0x3e4902(0x28b)](_0x2631fe);}),config=getConfiguration(),io['to']('botmanager')[_0x120e56(0x1c4)](_0x120e56(0x29e),config),broadcastToBots(_0x120e56(0x29e),JSON['stringify'](config));}function deleteBot(_0x1e093a){const _0x46b40e=_0x43b3ba;getClientsWithBotID(_0x1e093a)[_0x46b40e(0x129)](_0x43d3bc=>{getSocket(_0x43d3bc['id'])['disconnect'](!![]),removeClient(_0x43d3bc['id']);}),dbConfig[_0x46b40e(0x200)](_0x46b40e(0x29e))[_0x46b40e(0x291)]({'botID':_0x1e093a})['write'](),logger[_0x46b40e(0x28b)](_0x46b40e(0x1c0)+_0x1e093a),stopBot(_0x1e093a);try{if(fs[_0x46b40e(0x234)](path[_0x46b40e(0x25d)](configpath,_0x46b40e(0x1df)+_0x1e093a+'-config.json')))fs[_0x46b40e(0x15f)](path[_0x46b40e(0x25d)](configpath,'bot-'+_0x1e093a+'-config.json'));if(fs[_0x46b40e(0x234)](path[_0x46b40e(0x25d)](configpath,_0x46b40e(0x1df)+_0x1e093a+'-events.json')))fs[_0x46b40e(0x15f)](path[_0x46b40e(0x25d)](configpath,_0x46b40e(0x1df)+_0x1e093a+'-events.json'));if(fs[_0x46b40e(0x234)](path[_0x46b40e(0x25d)](configpath,_0x46b40e(0x1df)+_0x1e093a+_0x46b40e(0x15c))))fs['unlinkSync'](path[_0x46b40e(0x25d)](configpath,'bot-'+_0x1e093a+'-performance.json'));if(fs[_0x46b40e(0x234)](path['join'](configpath,_0x46b40e(0x1df)+_0x1e093a+_0x46b40e(0x126))))fs[_0x46b40e(0x15f)](path[_0x46b40e(0x25d)](configpath,_0x46b40e(0x1df)+_0x1e093a+_0x46b40e(0x126)));}catch(_0x17e440){if(_0x17e440)logger[_0x46b40e(0x28b)](_0x46b40e(0x151),_0x17e440);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x46b40e(0x29e),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x23858b,_0x3297af,_0x5972d3){const _0x5443be=_0x43b3ba;dbConfig['get']('bots')[_0x5443be(0x1f5)]({'botID':_0x23858b})[_0x5443be(0x13e)]({'status':_0x3297af})[_0x5443be(0x13e)]({'live':_0x5972d3})[_0x5443be(0x252)]();if(_0x3297af==_0x5443be(0x1b5)||_0x3297af==_0x5443be(0x132))logger[_0x5443be(0x28b)](_0x5443be(0x265)+_0x23858b),startBot([_0x23858b,userID],{'cwd':bbpath},function(_0x44efd4){const _0x1b96bb=_0x5443be;if(_0x44efd4)logger[_0x1b96bb(0x28b)](_0x44efd4);});else(_0x3297af==_0x5443be(0x29f)||_0x3297af==_0x5443be(0x2a2))&&(logger[_0x5443be(0x28b)](_0x5443be(0x1ec)+_0x23858b),stopBot(_0x23858b));config=getConfiguration(),io['to'](_0x5443be(0x2b9))[_0x5443be(0x1c4)](_0x5443be(0x29e),config),broadcastToBots('bots',JSON[_0x5443be(0x213)](config));}function toggleStatus(_0x12f2c3){const _0x5ad9ca=_0x43b3ba;let _0x12bba=dbConfig[_0x5ad9ca(0x200)]('bots')[_0x5ad9ca(0x1f5)]({'botID':_0x12f2c3})[_0x5ad9ca(0xef)](),_0x451826;if(_0x12bba[_0x5ad9ca(0x230)]===_0x5ad9ca(0x1b5))_0x451826='disabled';else{if(_0x12bba[_0x5ad9ca(0x230)]===_0x5ad9ca(0x132))_0x451826=_0x5ad9ca(0x2a2);else{if(_0x12bba[_0x5ad9ca(0x230)]===_0x5ad9ca(0x2a2))_0x451826='new';else{if(_0x12bba['status']===_0x5ad9ca(0x29f))_0x451826=_0x5ad9ca(0x1b5);}}}return _0x451826;}function updateStatus(_0x5b3b69,_0x272ff4){const _0x3cca23=_0x43b3ba;dbConfig[_0x3cca23(0x200)](_0x3cca23(0x29e))[_0x3cca23(0x1f5)]({'botID':_0x5b3b69})['assign']({'status':_0x272ff4})[_0x3cca23(0x252)](),config=getConfiguration(),io['to'](_0x3cca23(0x2b9))[_0x3cca23(0x1c4)](_0x3cca23(0x29e),config),broadcastToBots(_0x3cca23(0x29e),JSON[_0x3cca23(0x213)](config));}function updateLive(_0x297076,_0xafda6){const _0x887b4f=_0x43b3ba;dbConfig[_0x887b4f(0x200)](_0x887b4f(0x29e))['find']({'botID':_0x297076})[_0x887b4f(0x13e)]({'live':_0xafda6})['write'](),config=getConfiguration(),io['to'](_0x887b4f(0x2b9))[_0x887b4f(0x1c4)](_0x887b4f(0x29e),config),broadcastToBots(_0x887b4f(0x29e),JSON[_0x887b4f(0x213)](config));}function updateBotName(_0x3e5854,_0x6de3ff){const _0x3e1721=_0x43b3ba;dbConfig[_0x3e1721(0x200)]('bots')[_0x3e1721(0x1f5)]({'botID':_0x3e5854})[_0x3e1721(0x13e)]({'botname':_0x6de3ff})['write'](),config=getConfiguration(),io['to'](_0x3e1721(0x2b9))[_0x3e1721(0x1c4)](_0x3e1721(0x29e),config),broadcastToBots(_0x3e1721(0x29e),JSON['stringify'](config));}function updateBotManager(){const _0x536873=_0x43b3ba;config=getConfiguration(),io['to']('botmanager')[_0x536873(0x1c4)](_0x536873(0x29e),config),broadcastToBots(_0x536873(0x29e),JSON[_0x536873(0x213)](config));}function toggleBotMode(_0x1fd4d0){const _0x19d9c7=_0x43b3ba;if(pid[_0x1fd4d0])pid[_0x1fd4d0]['send']({'function':_0x19d9c7(0x111),'args':null});else{const _0x9677d7=configpath+'bot-'+_0x1fd4d0+_0x19d9c7(0x20d),_0xa1026f=fs[_0x19d9c7(0x257)](_0x9677d7),_0x499e41=JSON[_0x19d9c7(0x1cf)](_0xa1026f),_0x471c17=_0x499e41[_0x19d9c7(0x1ab)][0x0]['headless'];_0x499e41[_0x19d9c7(0x1ab)][0x0][_0x19d9c7(0x118)]=!_0x471c17;const _0x1266ec=JSON[_0x19d9c7(0x213)](_0x499e41,null,0x2);fs['writeFileSync'](_0x9677d7,_0x1266ec),config=getConfiguration(),io['to'](_0x19d9c7(0x2b9))[_0x19d9c7(0x1c4)](_0x19d9c7(0x29e),config),broadcastToBots(_0x19d9c7(0x29e),JSON['stringify'](config));}}function validateTelegram(_0x45e692){const _0x29c4ac=_0x43b3ba;if(_0x45e692[_0x29c4ac(0x180)][_0x29c4ac(0x21a)]!=settings['telegramUsername']&&'@'+_0x45e692[_0x29c4ac(0x180)]['username']!=settings[_0x29c4ac(0x2af)]||_0x45e692[_0x29c4ac(0x175)]['id']!=settings[_0x29c4ac(0x156)])return sendTelegram(_0x45e692[_0x29c4ac(0x175)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x1f4920=_0x43b3ba;if(tgBot)tgBot[_0x1f4920(0x144)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x1f4920(0x1d9)]);let _0x29cec1=_0x1f4920(0x2ba);_0x29cec1+='\x0a',_0x29cec1+=_0x1f4920(0x154),_0x29cec1+=_0x1f4920(0x2be),_0x29cec1+=_0x1f4920(0xeb),_0x29cec1+=_0x1f4920(0x117),_0x29cec1+=_0x1f4920(0x25c),_0x29cec1+=_0x1f4920(0x23a),_0x29cec1+=_0x1f4920(0x235),_0x29cec1+=_0x1f4920(0x176),_0x29cec1+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x29cec1+=_0x1f4920(0x12e),_0x29cec1+=_0x1f4920(0x102),_0x29cec1+=_0x1f4920(0x178),_0x29cec1+=_0x1f4920(0x1f9),_0x29cec1+=_0x1f4920(0x2a3);let _0x3d3e43='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x3d3e43+='\x0a',_0x3d3e43+=_0x29cec1,tgBot[_0x1f4920(0x2b7)]((_0x143430,_0x2a6e7f)=>{const _0x175aa9=_0x1f4920;logger['simple'](getTimeStamp()+_0x175aa9(0x1e1)),logger[_0x175aa9(0xd4)]('Telegraf\x20error:',_0x143430);}),tgBot[_0x1f4920(0x155)](async(_0x4f68c4,_0x269ce6)=>{const _0x553ead=_0x1f4920;if(!(!settings[_0x553ead(0x156)]&&_0x4f68c4['update'][_0x553ead(0x250)][_0x553ead(0x218)]=='/start')){if(!validateTelegram(_0x4f68c4))return;}_0x269ce6();}),tgBot['command']('start',async _0x40a940=>{const _0x483008=_0x1f4920;if(!settings[_0x483008(0x156)])updateSetting(_0x483008(0x156),_0x40a940['chat']['id']);updateSetting(_0x483008(0x108),!![]);if(!validateTelegram(_0x40a940))return;await sendTelegram(_0x40a940[_0x483008(0x175)]['id'],_0x3d3e43);}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0x210),async _0x31df7e=>{const _0x2db83c=_0x1f4920;updateSetting(_0x2db83c(0x108),!![]),await sendTelegram(_0x31df7e[_0x2db83c(0x175)]['id'],_0x2db83c(0x17f));}),tgBot['command'](_0x1f4920(0x220),async _0x30bb84=>{const _0x39ab84=_0x1f4920;await sendTelegram(_0x30bb84['chat']['id'],'Notifications\x20disabled'),updateSetting(_0x39ab84(0x108),![]);}),tgBot[_0x1f4920(0x22b)]('config',async _0x24b89b=>{const _0x55a894=_0x1f4920,_0x200452=Markup[_0x55a894(0xc9)]([Markup[_0x55a894(0x296)][_0x55a894(0x185)](_0x55a894(0x1e8),_0x55a894(0x1eb)),Markup['button'][_0x55a894(0x185)](_0x55a894(0xd5),_0x55a894(0x194)),Markup[_0x55a894(0x296)]['callback'](_0x55a894(0x264),'config_all')]);_0x24b89b[_0x55a894(0xcb)](_0x55a894(0x16d),_0x200452);}),tgBot[_0x1f4920(0x284)](_0x1f4920(0x1eb),async _0x34d722=>{const _0x5be1b1=_0x1f4920;_0x34d722[_0x5be1b1(0x18c)](),updateSetting('telegramEvents',_0x5be1b1(0x1dd)),updateSetting(_0x5be1b1(0x108),!![]),await sendTelegram(_0x34d722[_0x5be1b1(0x175)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot['action']('config_alerts',async _0x5755b3=>{const _0xa52703=_0x1f4920;_0x5755b3[_0xa52703(0x18c)](),updateSetting('telegramEvents','alerts'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5755b3[_0xa52703(0x175)]['id'],_0xa52703(0x1bc));}),tgBot['action'](_0x1f4920(0x254),async _0x247bac=>{const _0x244674=_0x1f4920;_0x247bac['editMessageReplyMarkup'](),updateSetting(_0x244674(0xfe),_0x244674(0x1de)),updateSetting(_0x244674(0x108),!![]),await sendTelegram(_0x247bac[_0x244674(0x175)]['id'],_0x244674(0x16b));}),tgBot[_0x1f4920(0x22b)]('status',async _0x343e9f=>{const _0x40659a=_0x1f4920,_0x1160af=getBotsWithMode();let _0x242df3='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x40659a(0x129)](_0x56069c=>{const _0x4bf3d7=_0x40659a,_0xb4130e=_0x1160af[_0x4bf3d7(0x1f5)](_0x557334=>_0x557334['botID']==_0x56069c[_0x4bf3d7(0x1a3)])[_0x4bf3d7(0x26f)];_0x242df3+=_0x4bf3d7(0x12d)+_0x56069c['botID']+':\x20'+_0x56069c[_0x4bf3d7(0x230)]+_0x4bf3d7(0x191)+_0xb4130e+_0x4bf3d7(0x191)+_0x56069c[_0x4bf3d7(0xe8)]+'\x0a';}),_0x242df3+='\x0a',_0x242df3+=_0x40659a(0xf0),_0x242df3+=!settings[_0x40659a(0x108)]?_0x40659a(0x28f):'Notifications\x20enabled\x0a',_0x242df3+=settings[_0x40659a(0x108)]?settings[_0x40659a(0xfe)]==_0x40659a(0x1de)?_0x40659a(0x2a4):'Notifications\x20types:\x20'+settings[_0x40659a(0xfe)]+'\x20only\x0a':'',await sendTelegram(_0x343e9f[_0x40659a(0x175)]['id'],_0x242df3,{'parse_mode':_0x40659a(0x28d)});}),tgBot['command'](_0x1f4920(0x14a),async _0x4308cc=>{const _0x28e2bb=_0x1f4920,_0x3607dd=getEnabledBots();if(_0x3607dd[_0x28e2bb(0x158)]==0x0)await sendTelegram(_0x4308cc[_0x28e2bb(0x175)]['id'],_0x28e2bb(0x171));else{if(_0x3607dd[_0x28e2bb(0x158)]>0x1)_0x3607dd['push']({'botID':_0x28e2bb(0x1de)});let _0x48626c=[],_0x426be7=[];const _0x406e36=_0x3607dd['length']%0x4==0x0||_0x3607dd['length']%0x4==0x3||_0x3607dd[_0x28e2bb(0x158)]%0x3==0x1?0x4:0x3;let _0x5e4e6b=0x0;_0x3607dd[_0x28e2bb(0x129)]((_0x430ad0,_0x518bb7)=>{const _0x27f592=_0x28e2bb;if(_0x518bb7%_0x406e36==0x0)_0x426be7=[];_0x426be7['push'](Markup[_0x27f592(0x296)][_0x27f592(0x185)](_0x430ad0[_0x27f592(0x1a3)]=='all'?_0x27f592(0x10f):'Bot\x20'+_0x430ad0[_0x27f592(0x1a3)],'restart_'+_0x430ad0['botID'])),_0x518bb7%_0x406e36==0x0&&(_0x48626c[_0x5e4e6b]=_0x426be7,_0x5e4e6b++);});const _0x5c9094=Markup[_0x28e2bb(0xc9)](_0x48626c);_0x4308cc[_0x28e2bb(0xcb)](_0x28e2bb(0x225),_0x5c9094);}}),tgBot[_0x1f4920(0x284)](/restart_(.+)/,async _0x50514b=>{const _0x50dca9=_0x1f4920,_0x309a80=_0x50514b[_0x50dca9(0x1ae)][0x1];_0x50514b['editMessageReplyMarkup'](),_0x309a80=='all'?config[_0x50dca9(0x129)](_0x14128d=>{const _0x4a7369=_0x50dca9;restartBot(_0x14128d[_0x4a7369(0x1a3)]);}):restartBot(_0x309a80);}),tgBot[_0x1f4920(0x22b)]('on',async _0x15f8f=>{const _0x554e73=_0x1f4920,_0x4d85c9=getDisabledBots();if(_0x4d85c9[_0x554e73(0x158)]==0x0)await sendTelegram(_0x15f8f[_0x554e73(0x175)]['id'],_0x554e73(0x1d3));else{if(_0x4d85c9[_0x554e73(0x158)]>0x1)_0x4d85c9[_0x554e73(0x1c7)]({'botID':_0x554e73(0x1de)});let _0xc0c169=[],_0x23ace8=[];const _0x4c8d86=_0x4d85c9[_0x554e73(0x158)]%0x4==0x0||_0x4d85c9['length']%0x4==0x3||_0x4d85c9[_0x554e73(0x158)]%0x3==0x1?0x4:0x3;let _0x22c67f=0x0;_0x4d85c9[_0x554e73(0x129)]((_0x872e6f,_0x60fd2)=>{const _0x2917f9=_0x554e73;if(_0x60fd2%_0x4c8d86==0x0)_0x23ace8=[];_0x23ace8[_0x2917f9(0x1c7)](Markup[_0x2917f9(0x296)][_0x2917f9(0x185)](_0x872e6f[_0x2917f9(0x1a3)]=='all'?'All\x20bots':'Bot\x20'+_0x872e6f[_0x2917f9(0x1a3)],_0x2917f9(0x249)+_0x872e6f[_0x2917f9(0x1a3)])),_0x60fd2%_0x4c8d86==0x0&&(_0xc0c169[_0x22c67f]=_0x23ace8,_0x22c67f++);});const _0x3ca729=Markup[_0x554e73(0xc9)](_0xc0c169);_0x15f8f['reply'](_0x554e73(0x1e0),_0x3ca729);}}),tgBot[_0x1f4920(0x284)](/on_(.+)/,async _0x51a318=>{const _0x4607bf=_0x1f4920,_0x5a1ce5=_0x51a318[_0x4607bf(0x1ae)][0x1];_0x51a318[_0x4607bf(0x18c)]();if(_0x5a1ce5==_0x4607bf(0x1de)){const _0x194b7d=getDisabledBots();await sendTelegram(_0x51a318[_0x4607bf(0x175)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x194b7d['forEach'](_0x12b918=>{const _0xae6134=_0x4607bf;if(_0x12b918[_0xae6134(0x1a3)]!='all')toggleBot(_0x12b918[_0xae6134(0x1a3)],toggleStatus(_0x12b918[_0xae6134(0x1a3)]),_0xae6134(0x13f));});}else await sendTelegram(_0x51a318[_0x4607bf(0x175)]['id'],_0x4607bf(0x116)+_0x5a1ce5),toggleBot(_0x5a1ce5,toggleStatus(_0x5a1ce5),_0x4607bf(0x13f));}),tgBot[_0x1f4920(0x22b)]('off',async _0x4933c5=>{const _0x5541ee=_0x1f4920,_0x28505a=getEnabledBots();if(_0x28505a['length']==0x0)await sendTelegram(_0x4933c5[_0x5541ee(0x175)]['id'],_0x5541ee(0x171));else{if(_0x28505a[_0x5541ee(0x158)]>0x1)_0x28505a[_0x5541ee(0x1c7)]({'botID':_0x5541ee(0x1de)});let _0x39e827=[],_0x2f677c=[];const _0x544f8e=_0x28505a[_0x5541ee(0x158)]%0x4==0x0||_0x28505a[_0x5541ee(0x158)]%0x4==0x3||_0x28505a['length']%0x3==0x1?0x4:0x3;let _0x4c3ef6=0x0;_0x28505a['forEach']((_0x4cfb62,_0x484470)=>{const _0x1000db=_0x5541ee;if(_0x484470%_0x544f8e==0x0)_0x2f677c=[];_0x2f677c[_0x1000db(0x1c7)](Markup[_0x1000db(0x296)]['callback'](_0x4cfb62[_0x1000db(0x1a3)]==_0x1000db(0x1de)?_0x1000db(0x10f):_0x1000db(0x12d)+_0x4cfb62[_0x1000db(0x1a3)],_0x1000db(0x26c)+_0x4cfb62[_0x1000db(0x1a3)])),_0x484470%_0x544f8e==0x0&&(_0x39e827[_0x4c3ef6]=_0x2f677c,_0x4c3ef6++);});const _0x553214=Markup[_0x5541ee(0xc9)](_0x39e827);_0x4933c5[_0x5541ee(0xcb)](_0x5541ee(0x1ac),_0x553214);}}),tgBot[_0x1f4920(0x284)](/off_(.+)/,async _0x16cd5=>{const _0x5b33bf=_0x1f4920,_0x2c9f57=_0x16cd5[_0x5b33bf(0x1ae)][0x1];_0x16cd5[_0x5b33bf(0x18c)]();if(_0x2c9f57==_0x5b33bf(0x1de)){const _0x14f28d=getEnabledBots();await sendTelegram(_0x16cd5[_0x5b33bf(0x175)]['id'],_0x5b33bf(0x104)),_0x14f28d['forEach'](_0x27244d=>{const _0x10e95f=_0x5b33bf;if(_0x27244d[_0x10e95f(0x1a3)]!='all')toggleBot(_0x27244d[_0x10e95f(0x1a3)],toggleStatus(_0x27244d['botID']),'stopped');});}else await sendTelegram(_0x16cd5[_0x5b33bf(0x175)]['id'],_0x5b33bf(0x26a)+_0x2c9f57),toggleBot(_0x2c9f57,toggleStatus(_0x2c9f57),_0x5b33bf(0x13f));}),tgBot['command'](_0x1f4920(0x198),async _0x114d2d=>{const _0x1433d6=_0x1f4920,_0x424c64=getEnabledBots();if(_0x424c64[_0x1433d6(0x158)]==0x0)await sendTelegram(_0x114d2d[_0x1433d6(0x175)]['id'],_0x1433d6(0x171));else{if(_0x424c64[_0x1433d6(0x158)]>0x1){let _0x256094=[],_0x1064a9=[];const _0x1e4d31=_0x424c64['length']%0x4==0x0||_0x424c64[_0x1433d6(0x158)]%0x4==0x3||_0x424c64[_0x1433d6(0x158)]%0x3==0x1?0x4:0x3;let _0x4603bf=0x0;_0x424c64['forEach']((_0xe50e7a,_0x472afa)=>{const _0xecdb02=_0x1433d6;if(_0x472afa%_0x1e4d31==0x0)_0x1064a9=[];_0x1064a9[_0xecdb02(0x1c7)](Markup[_0xecdb02(0x296)][_0xecdb02(0x185)](_0xecdb02(0x12d)+_0xe50e7a['botID'],'metrics_'+_0xe50e7a[_0xecdb02(0x1a3)])),_0x472afa%_0x1e4d31==0x0&&(_0x256094[_0x4603bf]=_0x1064a9,_0x4603bf++);});const _0x319f66=Markup['inlineKeyboard'](_0x256094);_0x114d2d['reply'](_0x1433d6(0x253),_0x319f66);}else{const _0x6bd6cb=_0x424c64[0x0][_0x1433d6(0x1a3)];if(pid[_0x6bd6cb])pid[_0x6bd6cb][_0x1433d6(0x1a8)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x1f4920(0x284)](/metrics_(.+)/,async _0x33b861=>{const _0x20322a=_0x1f4920,_0x438f07=_0x33b861[_0x20322a(0x1ae)][0x1];_0x33b861[_0x20322a(0x18c)]();if(pid[_0x438f07])pid[_0x438f07][_0x20322a(0x1a8)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0x163),async _0x12bbf2=>{const _0x4bdbbc=_0x1f4920,_0x485660=getEnabledBots();if(_0x485660[_0x4bdbbc(0x158)]==0x0)await sendTelegram(_0x12bbf2[_0x4bdbbc(0x175)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x485660[_0x4bdbbc(0x158)]>0x1){let _0x3fb33b=[],_0x18f03c=[];const _0x3ca6d7=_0x485660[_0x4bdbbc(0x158)]%0x4==0x0||_0x485660[_0x4bdbbc(0x158)]%0x4==0x3||_0x485660[_0x4bdbbc(0x158)]%0x3==0x1?0x4:0x3;let _0x48e392=0x0;_0x485660[_0x4bdbbc(0x129)]((_0x58e3a9,_0x30bca6)=>{const _0x2ecd3b=_0x4bdbbc;if(_0x30bca6%_0x3ca6d7==0x0)_0x18f03c=[];_0x18f03c[_0x2ecd3b(0x1c7)](Markup[_0x2ecd3b(0x296)][_0x2ecd3b(0x185)](_0x2ecd3b(0x12d)+_0x58e3a9[_0x2ecd3b(0x1a3)],'portfolio_'+_0x58e3a9[_0x2ecd3b(0x1a3)])),_0x30bca6%_0x3ca6d7==0x0&&(_0x3fb33b[_0x48e392]=_0x18f03c,_0x48e392++);});const _0x469dcc=Markup[_0x4bdbbc(0xc9)](_0x3fb33b);_0x12bbf2[_0x4bdbbc(0xcb)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x469dcc);}else{const _0x88e38d=_0x485660[0x0][_0x4bdbbc(0x1a3)];if(pid[_0x88e38d])pid[_0x88e38d][_0x4bdbbc(0x1a8)]({'function':_0x4bdbbc(0x177),'args':null});}}}),tgBot[_0x1f4920(0x284)](/portfolio_(.+)/,async _0x5c565a=>{const _0x2d9423=_0x1f4920,_0x1817a4=_0x5c565a[_0x2d9423(0x1ae)][0x1];_0x5c565a[_0x2d9423(0x18c)]();if(pid[_0x1817a4])pid[_0x1817a4]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0xe6),async _0x5f0750=>{const _0xdf8dc1=_0x1f4920;await getMessages();if(!updateAvailable)await sendTelegram(_0x5f0750[_0xdf8dc1(0x175)]['id'],_0xdf8dc1(0x243));else{if(!validInstallation)await sendTelegram(_0x5f0750[_0xdf8dc1(0x175)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x69b9e5=Markup[_0xdf8dc1(0xc9)]([Markup[_0xdf8dc1(0x296)][_0xdf8dc1(0x185)](_0xdf8dc1(0x120),_0xdf8dc1(0xf5)),Markup[_0xdf8dc1(0x296)][_0xdf8dc1(0x185)]('No',_0xdf8dc1(0x1af))]);_0x5f0750[_0xdf8dc1(0xcb)](_0xdf8dc1(0x1cd),_0x69b9e5);}}}),tgBot[_0x1f4920(0x284)](/update_(.+)/,async _0x4ac26d=>{const _0x2dead2=_0x1f4920,_0x1e1b60=_0x4ac26d['match'][0x1];_0x4ac26d[_0x2dead2(0x18c)](),_0x1e1b60==_0x2dead2(0x279)&&(await sendTelegram(_0x4ac26d[_0x2dead2(0x175)]['id'],_0x2dead2(0xd7)),updateBB(_0x2dead2(0xe6))),_0x1e1b60=='no'&&await sendTelegram(_0x4ac26d[_0x2dead2(0x175)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0xf2),async _0x2a6364=>{const _0x1ef081=_0x1f4920;if(!validInstallation)await sendTelegram(_0x2a6364[_0x1ef081(0x175)]['id'],_0x1ef081(0x289));else{const _0x1868c7=Markup[_0x1ef081(0xc9)]([Markup[_0x1ef081(0x296)][_0x1ef081(0x185)](_0x1ef081(0x120),_0x1ef081(0x295)),Markup[_0x1ef081(0x296)][_0x1ef081(0x185)]('No','reinstall_no')]);_0x2a6364[_0x1ef081(0xcb)](_0x1ef081(0x12f),_0x1868c7);}}),tgBot['action'](/reinstall_(.+)/,async _0x9d75be=>{const _0x25866a=_0x1f4920,_0x4e6f6f=_0x9d75be[_0x25866a(0x1ae)][0x1];_0x9d75be[_0x25866a(0x18c)](),_0x4e6f6f==_0x25866a(0x279)&&(await sendTelegram(_0x9d75be['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x25866a(0xf2))),_0x4e6f6f=='no'&&await sendTelegram(_0x9d75be['chat']['id'],_0x25866a(0xc2));}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0x138),async _0x4994cc=>{const _0x4359fb=_0x1f4920,_0x426f2f=getBotsWithMode();if(_0x426f2f[_0x4359fb(0x158)]==0x0)await sendTelegram(_0x4994cc[_0x4359fb(0x175)]['id'],_0x4359fb(0x171));else{let _0x17dae5=[],_0x27d82b=[];const _0x4cc3fc=0x2;let _0x135bef=0x0;_0x426f2f[_0x4359fb(0x129)]((_0x3bb890,_0x2a9088)=>{const _0x24391f=_0x4359fb;if(_0x2a9088%_0x4cc3fc==0x0)_0x27d82b=[];_0x27d82b[_0x24391f(0x1c7)](Markup[_0x24391f(0x296)]['callback']('Bot\x20'+_0x3bb890[_0x24391f(0x1a3)]+'\x20('+_0x3bb890[_0x24391f(0x26f)]+')','toggle_'+_0x3bb890['botID'])),_0x2a9088%_0x4cc3fc==0x0&&(_0x17dae5[_0x135bef]=_0x27d82b,_0x135bef++);});const _0x230008=Markup[_0x4359fb(0xc9)](_0x17dae5);_0x4994cc[_0x4359fb(0xcb)](_0x4359fb(0x25b),_0x230008);}}),tgBot['action'](/toggle_(.+)/,async _0x1708f3=>{const _0x3c9afb=_0x1f4920,_0x2c5b2c=_0x1708f3[_0x3c9afb(0x1ae)][0x1];_0x1708f3[_0x3c9afb(0x18c)]();const _0x12487e=getBotsWithMode(),_0x41016d=_0x12487e[_0x3c9afb(0x1f5)](_0x173d14=>_0x173d14['botID']==_0x2c5b2c),_0x44b61a=_0x41016d[_0x3c9afb(0x26f)]==_0x3c9afb(0x1db)?'manual':'auto';await sendTelegram(_0x1708f3['chat']['id'],_0x3c9afb(0xd9)+_0x2c5b2c+'\x20to\x20'+_0x44b61a+_0x3c9afb(0x17b)),toggleBotMode(_0x2c5b2c);}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0x26b),async _0x290513=>{const _0x4079c4=_0x1f4920;let _0x5905c9='';config[_0x4079c4(0x129)](_0x4e5b2b=>{const _0xc09ab2=_0x4079c4;_0x5905c9+=_0xc09ab2(0x12d)+_0x4e5b2b[_0xc09ab2(0x1a3)]+':\x20'+_0x4e5b2b[_0xc09ab2(0x29a)]+'\x0a';}),await sendTelegram(_0x290513[_0x4079c4(0x175)]['id'],_0x5905c9,{'parse_mode':_0x4079c4(0x28d)});}),tgBot[_0x1f4920(0x22b)](_0x1f4920(0x293),async _0x280eab=>{const _0x46d60c=_0x1f4920;await sendTelegram(_0x280eab[_0x46d60c(0x175)]['id'],_0x29cec1);}),process['once'](_0x1f4920(0x280),()=>tgBot[_0x1f4920(0x144)](_0x1f4920(0x280))),process[_0x1f4920(0x137)](_0x1f4920(0x1a2),()=>tgBot['stop'](_0x1f4920(0x1a2))),tgBot[_0x1f4920(0x1ff)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x53888b,_0x244f5e,_0x42401f){const _0x84456a=_0x43b3ba;_0x42401f={..._0x42401f,'disable_web_page_preview':!![]};try{await tgBot[_0x84456a(0x2b3)][_0x84456a(0x248)](_0x53888b,_0x244f5e,_0x42401f);}catch(_0x50b1c0){console[_0x84456a(0x19e)]('Telegram\x20error:',_0x50b1c0);}}async function sendTelegramBot(_0x252216,_0x461d4a){const _0x32e6d6=_0x43b3ba;if(settings['telegramEnabled']){if(settings[_0x32e6d6(0xfe)]=='all'||(_0x461d4a[_0x32e6d6(0x2bc)]==_0x32e6d6(0xfb)||_0x461d4a[_0x32e6d6(0x2bc)]==_0x32e6d6(0x21c)||_0x461d4a[_0x32e6d6(0x2bc)]==_0x32e6d6(0x121))&&settings[_0x32e6d6(0xfe)]=='alerts'||_0x461d4a['type']==_0x32e6d6(0xf4)&&settings[_0x32e6d6(0xfe)]==_0x32e6d6(0x1dd)){if(tgBot&&settings[_0x32e6d6(0x156)]){if(_0x461d4a[_0x32e6d6(0x1e9)])await sendTelegram(settings[_0x32e6d6(0x156)],_0x461d4a[_0x32e6d6(0x29a)]+_0x32e6d6(0x1fa)+_0x461d4a[_0x32e6d6(0x25a)]);else await sendTelegram(settings[_0x32e6d6(0x156)],'Bot\x20'+_0x252216+_0x32e6d6(0x1fa)+_0x461d4a[_0x32e6d6(0x25a)]);}}}}async function sendTelegramMsg(_0x1c8bf1,_0x29e7dd=_0x43b3ba(0x28d)){const _0x239647=_0x43b3ba;return settings[_0x239647(0x108)]&&tgBot&&settings[_0x239647(0x156)]?(await sendTelegram(settings['telegramChatId'],_0x1c8bf1,{'parse_mode':_0x29e7dd}),!![]):![];}function getDeviceWithIp(_0x80c4fd){const _0x5530ac=_0x43b3ba;return devices[_0x5530ac(0x1f5)](_0x1cb5c2=>_0x1cb5c2['ip']===_0x80c4fd);}async function temporaryAccess2FA(_0x3615f5,_0x4cc6e6){const _0x54b451=_0x43b3ba;let _0x53d869=new Date(),_0x26cdee=![];if(lastIpApproval){if(_0x53d869-lastIpApproval<0x1388)_0x26cdee=!![];}lastIpApproval=new Date();if(_0x26cdee)return;if(tgBot&&settings['telegramChatId']){const _0x3c72bd=uuidRandom();tmpStorage[_0x3c72bd]={'uuid':_0x3615f5,'externalip':_0x4cc6e6};const _0x3920c5=Markup[_0x54b451(0xc9)]([Markup['button'][_0x54b451(0x185)](_0x54b451(0xc4),_0x54b451(0x27c)+_0x3c72bd),Markup[_0x54b451(0x296)][_0x54b451(0x185)](_0x54b451(0xe9),'tempaccess_15_'+_0x3c72bd),Markup['button'][_0x54b451(0x185)]('30\x20min','tempaccess_30_'+_0x3c72bd),Markup[_0x54b451(0x296)][_0x54b451(0x185)](_0x54b451(0xd0),_0x54b451(0x223)+_0x3c72bd)]);await sendTelegram(settings[_0x54b451(0x156)],_0x54b451(0x261)+normalizeIP(_0x4cc6e6)[_0x54b451(0x1ca)]+'\x20?',_0x3920c5),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x423623=>{const _0x18e931=_0x54b451,_0x5624dc=_0x423623[_0x18e931(0x1ae)][0x1],_0x277e85=_0x423623[_0x18e931(0x1ae)][0x2],{uuid:_0x3538b7,externalip:_0x5bb054}=tmpStorage[_0x277e85];delete tmpStorage[_0x277e85],_0x423623[_0x18e931(0x18c)](),devices[_0x3538b7][_0x18e931(0x124)]={'clientip':_0x5bb054,'timestamp':new Date()[_0x18e931(0x130)](),'expiry':_0x5624dc},_0x5624dc!=_0x18e931(0xd0)?(await sendTelegram(_0x423623['chat']['id'],'Access\x20enabled\x20for\x20'+_0x5624dc+_0x18e931(0xff),{'parse_mode':_0x18e931(0x28d)}),io['to'](_0x3538b7)[_0x18e931(0x1c4)](_0x18e931(0x230),{'access':{'allow':![],'reason':_0x18e931(0x199),'token':null}})):(await sendTelegram(_0x423623[_0x18e931(0x175)]['id'],_0x18e931(0x21e)),io['to'](_0x3538b7)[_0x18e931(0x1c4)]('status',{'access':{'allow':![],'reason':_0x18e931(0x190),'token':null}}));});}}async function loginAccess2FA(_0xe15f0e,_0x31ac89){const _0x569f1c=_0x43b3ba;if(tgBot&&settings[_0x569f1c(0x156)]){const _0xf2047a=uuidRandom();tmpStorage[_0xf2047a]={'uuid':_0xe15f0e,'externalip':_0x31ac89};const _0x26834e=Markup[_0x569f1c(0xc9)]([Markup['button'][_0x569f1c(0x185)](_0x569f1c(0x2a1),_0x569f1c(0x211)+loginExpiry+'_'+_0xf2047a),Markup[_0x569f1c(0x296)][_0x569f1c(0x185)](_0x569f1c(0xd0),_0x569f1c(0x139)+_0xf2047a)]);await sendTelegram(settings['telegramChatId'],_0x569f1c(0x17a)+normalizeIP(_0x31ac89)[_0x569f1c(0x1ca)]+'\x20?',_0x26834e),tgBot[_0x569f1c(0x284)](/login2fa_(.+)_(.+)/,async _0x40b4d4=>{const _0x2c4d5d=_0x569f1c,_0x1caa49=_0x40b4d4[_0x2c4d5d(0x1ae)][0x1],_0x282524=_0x40b4d4['match'][0x2],{uuid:_0x3a446f,externalip:_0x26ceb1}=tmpStorage[_0x282524];delete tmpStorage[_0x282524],_0x40b4d4[_0x2c4d5d(0x18c)](),devices[_0x3a446f][_0x2c4d5d(0xf1)]={'clientip':_0x26ceb1,'timestamp':new Date()[_0x2c4d5d(0x130)](),'expiry':_0x1caa49},_0x1caa49!='reject'?(await sendTelegram(_0x40b4d4['chat']['id'],_0x2c4d5d(0x10d),{'parse_mode':_0x2c4d5d(0x28d)}),io['to'](_0x3a446f)[_0x2c4d5d(0x1c4)]('status',{'access':{'allow':![],'reason':_0x2c4d5d(0x199),'token':null}})):(await sendTelegram(_0x40b4d4['chat']['id'],_0x2c4d5d(0xcc)),io['to'](_0x3a446f)['emit'](_0x2c4d5d(0x230),{'access':{'allow':![],'reason':_0x2c4d5d(0x1a0),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x322a78=_0x43b3ba;return dbConfig[_0x322a78(0x200)](_0x322a78(0x29e))[_0x322a78(0x1b8)]('botID')[_0x322a78(0x150)]({'status':_0x322a78(0x1b5)})['value']()||[];}function getDisabledBots(){const _0x5eb4d3=_0x43b3ba;return dbConfig[_0x5eb4d3(0x200)](_0x5eb4d3(0x29e))[_0x5eb4d3(0x1b8)]('botID')[_0x5eb4d3(0x150)]({'status':'disabled'})[_0x5eb4d3(0xef)]()||[];}function getBotAttributes(_0x160bbb){const _0x37a6fb=_0x43b3ba;let _0x196846={};const _0x3062e8=configpath+_0x37a6fb(0x1df)+_0x160bbb+_0x37a6fb(0x20d),_0x2a9eef=fs[_0x37a6fb(0x234)](_0x3062e8);if(_0x2a9eef){const _0x353ee9=fs[_0x37a6fb(0x257)](_0x3062e8);try{const _0x1b5fc0=JSON[_0x37a6fb(0x1cf)](_0x353ee9),_0x429d31=_0x1b5fc0?_0x1b5fc0[_0x37a6fb(0x1ab)][0x0][_0x37a6fb(0x118)]:![];_0x196846[_0x37a6fb(0x26f)]=_0x429d31?_0x37a6fb(0x1db):_0x37a6fb(0x27a),_0x196846[_0x37a6fb(0x29a)]=_0x1b5fc0?_0x1b5fc0[_0x37a6fb(0x1ab)][0x0][_0x37a6fb(0x29a)]:'Bot\x20'+_0x160bbb;}catch(_0x54c0e6){_0x196846['mode']='manual',_0x196846['botname']=_0x37a6fb(0x12d)+_0x160bbb;}}else _0x196846['mode']=_0x37a6fb(0x27a),_0x196846[_0x37a6fb(0x29a)]=_0x37a6fb(0x12d)+_0x160bbb;return _0x196846;}function getBotsWithMode(){const _0x501c86=_0x43b3ba,_0x286774=dbConfig[_0x501c86(0x200)](_0x501c86(0x29e))[_0x501c86(0x1b8)]('botID')[_0x501c86(0xef)]()||[];return _0x286774[_0x501c86(0x129)](_0x2e706a=>{const _0x1dabdd=_0x501c86;let _0x249a6c=getBotAttributes(_0x2e706a[_0x1dabdd(0x1a3)]);_0x2e706a['mode']=_0x249a6c['mode'];}),_0x286774;}function getBotExchanges(){const _0x298cab=_0x43b3ba;let _0x458787=[];const _0x6aee6b=dbConfig['get'](_0x298cab(0x29e))[_0x298cab(0x1b8)]('botID')[_0x298cab(0xef)]()||[];_0x6aee6b[_0x298cab(0x129)](_0x2eb442=>{const _0x54d4d4=_0x298cab;if(_0x2eb442[_0x54d4d4(0x230)]==_0x54d4d4(0x1b5)){const _0x501f18=configpath+_0x54d4d4(0x1df)+_0x2eb442['botID']+_0x54d4d4(0x20d),_0x32bc99=fs[_0x54d4d4(0x234)](_0x501f18);let _0x502491;if(_0x32bc99){const _0x40eb13=fs['readFileSync'](_0x501f18);try{const _0x20b45e=JSON[_0x54d4d4(0x1cf)](_0x40eb13);_0x502491=_0x20b45e?_0x20b45e[_0x54d4d4(0x1ab)][0x0][_0x54d4d4(0x172)]:null;}catch(_0x5a8641){}}if(_0x502491)_0x458787[_0x54d4d4(0x1c7)](_0x502491);}});const _0x52f775=[...new Set(_0x458787)][_0x298cab(0x157)]();return _0x52f775;}async function initUser(){const _0x3d941b=_0x43b3ba;if(!settings[_0x3d941b(0x290)]){const _0x1e940c=uuidRandom();mixpanel[_0x3d941b(0x1be)](_0x1e940c),updateSetting(_0x3d941b(0x290),_0x1e940c);}}async function initSecure(){const _0x5babbc=_0x43b3ba;let _0x164835=getSecure();if(!_0x164835['hasOwnProperty']('secret')){let _0x127c39=await generateKeys();_0x164835['publicKey']=_0x127c39[_0x5babbc(0x2bb)],_0x164835[_0x5babbc(0x110)]=_0x127c39['privateKey'],_0x164835[_0x5babbc(0x2ab)]=crypto[_0x5babbc(0x1c2)](0x20)[_0x5babbc(0xdc)]('hex');;storeSecure(_0x164835);}}function getSettings(){const _0x574f22=_0x43b3ba;return dbSettings[_0x574f22(0x200)](_0x574f22(0x245))[_0x574f22(0xef)]()||{};}function getSecure(){const _0x478329=_0x43b3ba;return dbSecure['get'](_0x478329(0x136))[_0x478329(0xef)]()||{};}function getBlacklist(){const _0x35ceb5=_0x43b3ba;return dbSecure[_0x35ceb5(0x200)](_0x35ceb5(0x1ba))[_0x35ceb5(0xef)]()||[];}function broadcastToBots(_0x1259f6,_0x70eb57){config['forEach'](_0x4c6697=>{const _0x452e55=_0x363e;if(_0x4c6697[_0x452e55(0x230)]==_0x452e55(0x1b5)&&_0x4c6697[_0x452e55(0xe8)]==_0x452e55(0x1b1)||_0x4c6697[_0x452e55(0x230)]==_0x452e55(0x132)&&_0x4c6697['live']=='running'){if(pid[_0x4c6697[_0x452e55(0x1a3)]])pid[_0x4c6697[_0x452e55(0x1a3)]][_0x452e55(0x1a8)]({[_0x1259f6]:_0x70eb57});}});}async function storeSettings(_0x3fa649,_0x1985f7=![]){const _0xb6ae8c=_0x43b3ba;_0x3fa649={...settings,..._0x3fa649};if(_0x1985f7&&_0x3fa649[_0xb6ae8c(0x14f)]!='************'&&_0x3fa649[_0xb6ae8c(0x14f)]!=_0xb6ae8c(0x1ee)&&_0x3fa649[_0xb6ae8c(0x14f)]!=''){const _0x157adf=crypt[_0xb6ae8c(0x11e)](secure[_0xb6ae8c(0x110)],_0x3fa649[_0xb6ae8c(0x14f)])[_0xb6ae8c(0x250)][_0xb6ae8c(0x27d)]('|@|')[0x0],_0x3a6190=bcrypt['hashSync'](_0x157adf,saltRounds);_0x3fa649={..._0x3fa649,'bbPassword':_0x3a6190};}if(_0x1985f7&&_0x3fa649[_0xb6ae8c(0x1d9)]!='************'&&_0x3fa649[_0xb6ae8c(0x1d9)]!='***'&&_0x3fa649['telegramToken']!=''){const _0x4ab842=crypt[_0xb6ae8c(0x11e)](secure[_0xb6ae8c(0x110)],_0x3fa649[_0xb6ae8c(0x1d9)])[_0xb6ae8c(0x250)][_0xb6ae8c(0x27d)](_0xb6ae8c(0x298))[0x0];_0x3fa649={..._0x3fa649,'telegramToken':_0x4ab842};}if(_0x1985f7&&_0x3fa649[_0xb6ae8c(0x27b)]!=_0xb6ae8c(0x2a9)&&_0x3fa649[_0xb6ae8c(0x27b)]!=_0xb6ae8c(0x1ee)&&_0x3fa649[_0xb6ae8c(0x27b)]!=''){const _0x4bc00a=crypt[_0xb6ae8c(0x11e)](secure[_0xb6ae8c(0x110)],_0x3fa649[_0xb6ae8c(0x27b)])[_0xb6ae8c(0x250)][_0xb6ae8c(0x27d)]('|@|')[0x0];_0x3fa649={..._0x3fa649,'marketcapApi':_0x4bc00a};}const _0x24e71b=_0x3fa649[_0xb6ae8c(0x1d9)]!='************'&&_0x3fa649[_0xb6ae8c(0x1d9)]!=settings['telegramToken']||_0x3fa649[_0xb6ae8c(0x2af)]!=settings[_0xb6ae8c(0x2af)],_0x2aae7e=_0x3fa649[_0xb6ae8c(0x1d9)]==''||_0x3fa649[_0xb6ae8c(0x2af)]=='',_0xa64b8f=_0x3fa649['marketcapApi']&&_0x3fa649[_0xb6ae8c(0x27b)]!=_0xb6ae8c(0x2a9)&&_0x3fa649[_0xb6ae8c(0x27b)]!=settings[_0xb6ae8c(0x1d9)];_0x24e71b&&(_0x3fa649['telegramChatId']=null,_0x3fa649[_0xb6ae8c(0xfe)]=_0xb6ae8c(0x1de));for(const [_0x23fe1d,_0x42527a]of Object[_0xb6ae8c(0x1c8)](_0x3fa649)){if(_0x23fe1d==_0xb6ae8c(0x1d9)&&_0x42527a==_0xb6ae8c(0x2a9)){_0x3fa649['telegramToken']=settings[_0xb6ae8c(0x1d9)];continue;};if(_0x23fe1d==_0xb6ae8c(0x14f)&&_0x42527a==_0xb6ae8c(0x2a9)){_0x3fa649[_0xb6ae8c(0x14f)]=settings[_0xb6ae8c(0x14f)];continue;};if(_0x23fe1d==_0xb6ae8c(0x27b)&&_0x42527a==_0xb6ae8c(0x2a9)){_0x3fa649[_0xb6ae8c(0x27b)]=settings[_0xb6ae8c(0x27b)];continue;};dbSettings[_0xb6ae8c(0x183)]('settings.'+_0x23fe1d,_0x42527a)[_0xb6ae8c(0x252)]();}settings=_0x3fa649,io['to'](_0xb6ae8c(0x2b9))[_0xb6ae8c(0x1c4)](_0xb6ae8c(0x245),cleanSettings()),broadcastToBots(_0xb6ae8c(0x25f),settings['timeshift']),broadcastToBots(_0xb6ae8c(0x1bf),settings['onepagemode']),broadcastToBots('marketcapApi',settings[_0xb6ae8c(0x27b)]);if(_0x24e71b&&!_0x2aae7e)initTelegram();if(_0x24e71b&&_0x2aae7e)disableTelegram();getAllClients()[_0xb6ae8c(0x129)](_0x52fcc5=>{const _0x1047d4=_0xb6ae8c;getSocket(_0x52fcc5['id'])[_0x1047d4(0x1c4)]('status',{'access':{'allow':![],'reason':_0x1047d4(0x199),'token':null}});}),_0xa64b8f&&(await sleep(0xbb8),testMarketcapApi(_0x3fa649[_0xb6ae8c(0x27b)]));}async function testMarketcapApi(_0x280f3e){const _0x5801fc=_0x43b3ba,_0x212434=['BCT',_0x5801fc(0xe0)];try{await axios['get'](_0x5801fc(0x277),{'headers':{'X-CMC_PRO_API_KEY':_0x280f3e},'params':{'symbol':_0x212434[_0x5801fc(0xdc)]()}});}catch(_0x3a0c07){_0x3a0c07['toString']()['includes']('status\x20code\x20401')?(io['to'](_0x5801fc(0x2b9))[_0x5801fc(0x1c4)](_0x5801fc(0x15e),_0x5801fc(0x186)),logger['full'](_0x5801fc(0x186))):(io['to'](_0x5801fc(0x2b9))[_0x5801fc(0x1c4)](_0x5801fc(0x15e),_0x5801fc(0x231)),logger[_0x5801fc(0x28b)](_0x5801fc(0x231)),logger[_0x5801fc(0xd4)](_0x5801fc(0x202),_0x3a0c07[_0x5801fc(0xdc)]()+_0x5801fc(0x125)+_0x3a0c07[_0x5801fc(0x1d4)]));return;}logger[_0x5801fc(0xd4)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x258803,_0x3bc155){const _0x163aa1=_0x43b3ba;dbSettings[_0x163aa1(0x183)](_0x163aa1(0x221)+_0x258803,_0x3bc155)['write'](),settings=getSettings(),io['to'](_0x163aa1(0x2b9))[_0x163aa1(0x1c4)](_0x163aa1(0x245),cleanSettings());}function storeSecure(_0x558293){const _0x4756bb=_0x43b3ba;dbSecure['get'](_0x4756bb(0x136))['push'](_0x558293)[_0x4756bb(0x252)](),secure=_0x558293;}function addBlacklist(_0x101857){const _0x901ed9=_0x43b3ba;cleanBlacklist();let _0x2be85f;devices[_0x101857][_0x901ed9(0x124)]?_0x2be85f=Math[_0x901ed9(0x10c)](devices[_0x101857][_0x901ed9(0x124)]['expiry'],loginExpiry):_0x2be85f=loginExpiry,dbSecure[_0x901ed9(0x200)](_0x901ed9(0x1ba))[_0x901ed9(0x1c7)]({'expiry':new Date()[_0x901ed9(0x130)]()+_0x2be85f*0x3c*0x3e8,'token':devices[_0x101857][_0x901ed9(0x227)][_0x901ed9(0x127)]})[_0x901ed9(0x252)](),blacklist=dbSecure[_0x901ed9(0x200)](_0x901ed9(0x1ba))[_0x901ed9(0xef)]();}function cleanBlacklist(){const _0x112d41=_0x43b3ba;let _0x10032d=dbSecure[_0x112d41(0x200)](_0x112d41(0x1ba))[_0x112d41(0x1d1)]()['value'](),_0x63b3fb=new Date()[_0x112d41(0x130)]();_0x10032d['forEach'](_0x58203a=>{const _0x5226eb=_0x112d41;_0x58203a[_0x5226eb(0x134)]<_0x63b3fb&&dbSecure[_0x5226eb(0x200)]('blacklist')[_0x5226eb(0x291)]({'expiry':_0x58203a['expiry']})[_0x5226eb(0x252)]();});}function initStates(){let _0x2ee438=getConfiguration();_0x2ee438['forEach'](_0x5552d5=>{const _0x2506e0=_0x363e;_0x5552d5['live']=_0x2506e0(0x13f);}),storeConfiguration(_0x2ee438);}function onKeys(){const _0x47d34c=new RSA();return new Promise(_0x2fbba3=>{const _0x3151ef=_0x363e;_0x47d34c['generateKeyPairAsync']()[_0x3151ef(0x299)](_0x338376=>{_0x2fbba3(_0x338376);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5befbb=_0x43b3ba;let _0x45c0b0=getSettings(),_0x399353=![];!_0x45c0b0[_0x5befbb(0x244)]('lastmsgtelegram')&&(_0x45c0b0[_0x5befbb(0x1b6)]=0x0,_0x399353=!![]);!_0x45c0b0['hasOwnProperty'](_0x5befbb(0x1ef))&&(_0x45c0b0[_0x5befbb(0x1ef)]=0x0,_0x399353=!![]);!_0x45c0b0[_0x5befbb(0x244)](_0x5befbb(0xe4))&&(_0x45c0b0[_0x5befbb(0xe4)]=_0x5befbb(0x1da),_0x399353=!![]);!_0x45c0b0[_0x5befbb(0x244)](_0x5befbb(0x1bf))&&(_0x45c0b0[_0x5befbb(0x1bf)]=![],_0x399353=!![]);!_0x45c0b0[_0x5befbb(0x244)](_0x5befbb(0x27b))&&(_0x45c0b0[_0x5befbb(0x27b)]='',_0x399353=!![]);if(_0x399353)storeSettings(_0x45c0b0);try{fs[_0x5befbb(0x11b)](configbackuppath,{'withFileTypes':!![]})[_0x5befbb(0x129)](_0x5d099a=>{const _0x3a861b=_0x5befbb;if(!_0x5d099a[_0x3a861b(0x22f)]()){if(!_0x5d099a['name'][_0x3a861b(0x187)]('backup-full@'))fs[_0x3a861b(0x15f)](configbackuppath+_0x5d099a[_0x3a861b(0x173)]);}else fs[_0x3a861b(0x26e)](configbackuppath+_0x5d099a[_0x3a861b(0x173)],{'recursive':!![]});});}catch(_0x3758da){logger[_0x5befbb(0xd4)](_0x5befbb(0x242),_0x3758da);}}function storeConfiguration(_0x5d3245){const _0x489645=_0x43b3ba;dbConfig['get'](_0x489645(0x29e))[_0x489645(0x291)]()['write'](),dbConfig[_0x489645(0x200)](_0x489645(0x29e))[_0x489645(0x1c7)](..._0x5d3245)[_0x489645(0x252)](),config=_0x5d3245;}async function resetPassword(){const _0x3e6f93=_0x43b3ba;if(tgBot&&settings[_0x3e6f93(0x156)]){const _0x4b9a2b=Markup['inlineKeyboard']([Markup[_0x3e6f93(0x296)][_0x3e6f93(0x185)](_0x3e6f93(0x279),_0x3e6f93(0x208)),Markup[_0x3e6f93(0x296)][_0x3e6f93(0x185)]('no',_0x3e6f93(0x17e))]);await sendTelegram(settings[_0x3e6f93(0x156)],_0x3e6f93(0x214),_0x4b9a2b),tgBot['action'](/resetpw_(.+)/,async _0x114367=>{const _0x2d5bd7=_0x3e6f93,_0x573a1c=_0x114367['match'][0x1];_0x114367['editMessageReplyMarkup']();if(_0x573a1c!='no'){const _0x45a478=0xf,_0x8d0312=_0x2d5bd7(0x15a),_0x5e058e=Array['from'](crypto[_0x2d5bd7(0x1f8)](new Uint32Array(_0x45a478)))[_0x2d5bd7(0x1cb)](_0x17b66f=>_0x8d0312[_0x17b66f%_0x8d0312['length']])[_0x2d5bd7(0x25d)](''),_0x360e6f=bcrypt['hashSync'](_0x5e058e,saltRounds);storeSettings({'bbPassword':_0x360e6f}),await sendTelegram(_0x114367['chat']['id'],_0x2d5bd7(0x181)+_0x5e058e,{'parse_mode':_0x2d5bd7(0x28d)});}else await sendTelegram(_0x114367['chat']['id'],_0x2d5bd7(0x283));});}}async function confirmRestore(_0x4df2c8,_0x43b8be){const _0x2ad59a=_0x43b3ba;io['to'](_0x2ad59a(0x2b9))[_0x2ad59a(0x1c4)](_0x2ad59a(0x15e),_0x2ad59a(0x1a6),_0x2ad59a(0x121));if(tgBot&&settings[_0x2ad59a(0x156)]){const _0x42d413=uuidRandom();tmpStorage[_0x42d413]={'path':_0x4df2c8,'filename':_0x43b8be};const _0x53b372=Markup[_0x2ad59a(0xc9)]([Markup[_0x2ad59a(0x296)]['callback'](_0x2ad59a(0x279),_0x2ad59a(0xc0)+_0x42d413),Markup['button'][_0x2ad59a(0x185)]('no',_0x2ad59a(0x201)+_0x42d413)]);await sendTelegram(settings[_0x2ad59a(0x156)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x53b372),tgBot[_0x2ad59a(0x284)](/restore_(.+)_(.+)/,async _0x4cf729=>{const _0x575aa4=_0x2ad59a,_0x3e972e=_0x4cf729[_0x575aa4(0x1ae)][0x1],_0x168554=_0x4cf729[_0x575aa4(0x1ae)][0x2],{path:_0x39741c,filename:_0x1f818e}=tmpStorage[_0x168554];delete tmpStorage[_0x168554],_0x4cf729[_0x575aa4(0x18c)](),_0x3e972e==_0x575aa4(0x279)?(logger['debug'](_0x575aa4(0x281)),await sendTelegram(_0x4cf729['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x575aa4(0x28d)}),unzipFile(_0x39741c,_0x1f818e)):(logger[_0x575aa4(0xd4)]('Restore\x20process\x20aborted'),await sendTelegram(_0x4cf729[_0x575aa4(0x175)]['id'],_0x575aa4(0xf6)));});}}function getServerTime(){const _0x5072d9=_0x43b3ba,_0x5606aa=new Date();return _0x5606aa[_0x5072d9(0x259)]()+'/'+(_0x5606aa[_0x5072d9(0x2c0)]()+0x1)[_0x5072d9(0xdc)]()[_0x5072d9(0x238)](0x2,'0')+'/'+_0x5606aa['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5606aa[_0x5072d9(0x1d0)]()[_0x5072d9(0xdc)]()[_0x5072d9(0x238)](0x2,'0')+':'+_0x5606aa[_0x5072d9(0x2b2)]()[_0x5072d9(0xdc)]()[_0x5072d9(0x238)](0x2,'0')+':'+_0x5606aa[_0x5072d9(0x1a9)]()[_0x5072d9(0xdc)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xae372c=_0x43b3ba,_0x4c0d44=shiftedTime();return _0x4c0d44[_0xae372c(0x259)]()+'/'+(_0x4c0d44[_0xae372c(0x2c0)]()+0x1)[_0xae372c(0xdc)]()[_0xae372c(0x238)](0x2,'0')+'/'+_0x4c0d44['getDate']()[_0xae372c(0xdc)]()['padStart'](0x2,'0')+'\x20'+_0x4c0d44[_0xae372c(0x1d0)]()['toString']()[_0xae372c(0x238)](0x2,'0')+':'+_0x4c0d44['getMinutes']()[_0xae372c(0xdc)]()[_0xae372c(0x238)](0x2,'0')+':'+_0x4c0d44[_0xae372c(0x1a9)]()[_0xae372c(0xdc)]()[_0xae372c(0x238)](0x2,'0');}function getCleanTimeStamp(){const _0x209442=_0x43b3ba,_0x41946a=shiftedTime();return _0x41946a[_0x209442(0x259)]()+(_0x41946a['getMonth']()+0x1)[_0x209442(0xdc)]()[_0x209442(0x238)](0x2,'0')+_0x41946a[_0x209442(0x149)]()[_0x209442(0xdc)]()[_0x209442(0x238)](0x2,'0')+'-'+_0x41946a['getHours']()['toString']()[_0x209442(0x238)](0x2,'0')+_0x41946a[_0x209442(0x2b2)]()[_0x209442(0xdc)]()['padStart'](0x2,'0')+_0x41946a['getSeconds']()[_0x209442(0xdc)]()[_0x209442(0x238)](0x2,'0');}function shiftedTime(){const _0x9b805e=_0x43b3ba,_0x5e6c4c=new Date();let _0x36fd22=_0x5e6c4c;if(settings[_0x9b805e(0x25f)]&&settings[_0x9b805e(0x25f)]!==0x0)_0x36fd22=fns['add'](_0x5e6c4c,{'hours':settings['timeshift']});return _0x36fd22;}async function startScheduler(){const _0x11f1fe=_0x43b3ba,_0x1ef925=new Date()[_0x11f1fe(0x239)](),_0x463d1f=shiftedTime()[_0x11f1fe(0x1d0)]();_0x463d1f==0x4&&backupConfigFiles(),_0x463d1f==0xb&&restartAllBots(),_0x463d1f==0x0&&rotateLogFiles(),_0x1ef925%0x6==0x0&&triggerAnalytics(),_0x1ef925%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x1995da){const _0x24a2c3=_0x43b3ba;logger['debug'](_0x24a2c3(0x2a6)+_0x1995da);const _0x14d000=getBotsWithMode();_0x14d000['length']>0x0?confirmRestore(configbackuppath,_0x1995da):unzipFile(configbackuppath,_0x1995da);}async function getBackupFiles(_0x2f4855=null){const _0x20e6b1=_0x43b3ba;let _0xec1d4e=[],_0x5875ab=fs[_0x20e6b1(0x11b)](configbackuppath,{'withFileTypes':!![]});_0x5875ab[_0x20e6b1(0x157)]((_0xc73d91,_0x37fb6f)=>_0xc73d91[_0x20e6b1(0x173)]<_0x37fb6f[_0x20e6b1(0x173)]?0x1:_0x37fb6f['name']<_0xc73d91[_0x20e6b1(0x173)]?-0x1:0x0),_0x5875ab[_0x20e6b1(0x129)](_0x5384f5=>{const _0x2f167c=_0x20e6b1;if(!_0x5384f5['isDirectory']()&&_0x5384f5[_0x2f167c(0x173)][_0x2f167c(0x187)](_0x2f167c(0x146))&&_0x5384f5['name'][_0x2f167c(0x263)](_0x2f167c(0xe3))){const _0x14925d=formatDate(fs[_0x2f167c(0x2aa)](configbackuppath+_0x5384f5['name'])[_0x2f167c(0x18f)]);_0xec1d4e['push']({'name':_0x5384f5[_0x2f167c(0x173)],'mtime':_0x14925d});}});if(_0x2f4855)io['to'](_0x2f4855)['emit'](_0x20e6b1(0x288),_0xec1d4e);else return _0xec1d4e;}async function backupConfigFiles(){const _0x51ef38=_0x43b3ba;await zipFiles(_0x51ef38(0x246));const _0x35a42e=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x51ef38(0x21d),configbackuppath+('backup-full@'+_0x35a42e+'.zip'));let _0x54d5d8=fs[_0x51ef38(0x11b)](configbackuppath,{'withFileTypes':!![]});_0x54d5d8[_0x51ef38(0x157)]((_0x4c2f6a,_0x3ea319)=>_0x4c2f6a['name']<_0x3ea319[_0x51ef38(0x173)]?0x1:_0x3ea319[_0x51ef38(0x173)]<_0x4c2f6a[_0x51ef38(0x173)]?-0x1:0x0),_0x54d5d8[_0x51ef38(0x158)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x54d5d8[_0x54d5d8[_0x51ef38(0x158)]-0x1][_0x51ef38(0x173)]);}function rotateLogFiles(){const _0x5c0a70=_0x43b3ba,_0x247f8e=fs[_0x5c0a70(0x2aa)](logspath+_0x5c0a70(0x18d)),_0xe4fa20=_0x247f8e[_0x5c0a70(0x18a)]/0x400;if(_0xe4fa20>0x64){let _0x16fcaf=fs[_0x5c0a70(0x11b)](logspath,{'withFileTypes':!![]});_0x16fcaf[_0x5c0a70(0x157)]((_0x1ac4c3,_0x375b9f)=>_0x1ac4c3[_0x5c0a70(0x173)]<_0x375b9f[_0x5c0a70(0x173)]?0x1:_0x375b9f[_0x5c0a70(0x173)]<_0x1ac4c3[_0x5c0a70(0x173)]?-0x1:0x0),_0x16fcaf[_0x5c0a70(0x129)](_0xda2183=>{const _0x4cd932=_0x5c0a70;if(_0xda2183['name']==_0x4cd932(0x145))fs[_0x4cd932(0xe2)](logspath+_0xda2183[_0x4cd932(0x173)],logspath+'output-003.log');if(_0xda2183[_0x4cd932(0x173)]==_0x4cd932(0xdf))fs['copyFileSync'](logspath+_0xda2183[_0x4cd932(0x173)],logspath+_0x4cd932(0x145));_0xda2183[_0x4cd932(0x173)]=='output-000.log'&&(fs[_0x4cd932(0xe2)](logspath+_0xda2183[_0x4cd932(0x173)],logspath+_0x4cd932(0xdf)),fs[_0x4cd932(0x169)](logspath+_0xda2183[_0x4cd932(0x173)],''));});}}async function zipFiles(_0x3ddb10){const _0x2be6fb=_0x43b3ba;let _0x457003;if(_0x3ddb10=='logs')_0x457003=logspath;if(_0x3ddb10==_0x2be6fb(0x267))_0x457003=configpath;if(_0x3ddb10==_0x2be6fb(0x246))_0x457003=configpath;let _0x19bc1c=fs['readdirSync'](_0x457003,{'withFileTypes':!![]});const _0x4e4cbc=new require(_0x2be6fb(0x174))();_0x19bc1c[_0x2be6fb(0x129)](_0x176c63=>{const _0x18a051=_0x2be6fb;if(!_0x176c63[_0x18a051(0x22f)]()){let _0x320625=fs[_0x18a051(0x257)](_0x457003+_0x176c63[_0x18a051(0x173)]);if(_0x3ddb10=='backup'){const _0x30e9ca=/^bot-[0-9]{3}-config.json$/,_0x2cfa0f=_0x30e9ca[_0x18a051(0x114)](_0x176c63[_0x18a051(0x173)]);if(_0x2cfa0f){const _0x21221d=JSON[_0x18a051(0x1cf)](_0x320625);if(_0x21221d[_0x18a051(0x1ab)][0x0]){_0x21221d[_0x18a051(0x1ab)][0x0][_0x18a051(0x11d)]=_0x18a051(0x1ee),_0x21221d[_0x18a051(0x1ab)][0x0][_0x18a051(0x1dc)]=_0x18a051(0x1ee);if(_0x21221d['bot'][0x0]['apiPassword'])_0x21221d['bot'][0x0][_0x18a051(0x1aa)]='***';}_0x320625=JSON[_0x18a051(0x213)](_0x21221d,null,0x2);}if(_0x176c63['name']=='bb-settings.json'){const _0x4c5b40=JSON['parse'](_0x320625);if(_0x4c5b40[_0x18a051(0x245)][_0x18a051(0xc8)])_0x4c5b40[_0x18a051(0x245)]['loginRequired']=![];if(_0x4c5b40['settings'][_0x18a051(0x14f)])_0x4c5b40[_0x18a051(0x245)][_0x18a051(0x14f)]=_0x18a051(0x1ee);if(_0x4c5b40['settings'][_0x18a051(0x1d9)])_0x4c5b40[_0x18a051(0x245)][_0x18a051(0x1d9)]=_0x18a051(0x1ee);if(_0x4c5b40[_0x18a051(0x245)][_0x18a051(0x156)])_0x4c5b40[_0x18a051(0x245)][_0x18a051(0x156)]=null;if(_0x4c5b40['settings']['marketcapApi'])_0x4c5b40[_0x18a051(0x245)][_0x18a051(0x27b)]=_0x18a051(0x1ee);_0x320625=JSON['stringify'](_0x4c5b40,null,0x2);}if(_0x176c63[_0x18a051(0x173)]!='bb-secure.json')_0x4e4cbc[_0x18a051(0xed)](_0x176c63['name'],_0x320625);}else _0x4e4cbc['file'](_0x176c63[_0x18a051(0x173)],_0x320625);}});const _0x4a430d=_0x4e4cbc[_0x2be6fb(0x26d)]({'base64':![],'compression':'DEFLATE'});fs[_0x2be6fb(0x169)](zippath+(_0x3ddb10+'.zip'),_0x4a430d,_0x2be6fb(0x161));}async function unzipFile(_0x26833c,_0x3df298){const _0x668f7=_0x43b3ba;fs[_0x668f7(0x11b)](configpath,{'withFileTypes':!![]})[_0x668f7(0x129)](_0xa3e380=>{const _0x411f1f=_0x668f7;if(!_0xa3e380[_0x411f1f(0x22f)]())fs[_0x411f1f(0x26e)](configpath+_0xa3e380[_0x411f1f(0x173)]);});const _0x2f6965=fs[_0x668f7(0x257)](_0x26833c+_0x3df298,_0x668f7(0x161)),_0x53388b=new require('node-zip')(_0x2f6965,{'base64':![],'checkCRC32':!![]});Object[_0x668f7(0xea)](_0x53388b[_0x668f7(0xd8)])[_0x668f7(0x129)](_0x2ffeab=>{const _0x2903a0=_0x668f7,_0xca2107=_0x53388b[_0x2903a0(0xd8)][_0x2ffeab];fs[_0x2903a0(0x169)](configpath+_0xca2107['name'],_0xca2107[_0x2903a0(0x162)]);}),fs[_0x668f7(0x11b)](temppath,{'withFileTypes':!![]})['forEach'](_0x5d5a95=>{const _0x1fd63c=_0x668f7;if(!_0x5d5a95[_0x1fd63c(0x22f)]())fs[_0x1fd63c(0x26e)](temppath+_0x5d5a95[_0x1fd63c(0x173)]);}),logger['debug'](_0x668f7(0x1e7)),process[_0x668f7(0x1a8)]({'restore':!![]},_0x56707f=>{});}async function getPublicIp(){const _0x58627e=_0x43b3ba;try{const _0x2cb996=await axios['get'](_0x58627e(0x24b));publicip=_0x2cb996[_0x58627e(0xc3)]['ip'];}catch(_0xea3f93){}}async function triggerAnalytics(){const _0x579d22=_0x43b3ba;if(!publicip)await getPublicIp();const _0x1ab68b=getBotsWithMode();let _0x500677=0x0;_0x1ab68b[_0x579d22(0x129)](_0x2062c2=>{const _0x5910f9=_0x579d22;if(_0x2062c2[_0x5910f9(0x230)]==='enabled')_0x500677++;});const _0x179bca=getBotExchanges();mixpanel[_0x579d22(0x15d)](_0x579d22(0x128),{'distinct_id':settings[_0x579d22(0x290)],'ip':publicip,'version':serverversion,'numbots':_0x1ab68b[_0x579d22(0x158)],'numbotsenabled':_0x500677,'exchanges':_0x179bca,'environment':environment});}async function getMessages(){const _0x46217c=_0x43b3ba,_0x50bd0f=_0x46217c(0x147),_0x5b1b72=new GraphQLClient(_0x50bd0f),_0x42ef85={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x2cc544=serverversion['split']('.'),_0x4d7272=_0x2cc544[0x0]+'.'+_0x2cc544[0x1],_0x3b1a47=Math[_0x46217c(0x228)](settings[_0x46217c(0x1b6)],settings[_0x46217c(0x1ef)]),_0x5ebddb={'last':parseInt(_0x3b1a47),'bbm':_0x4d7272},_0x59097d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5487ec;try{_0x5487ec=await _0x5b1b72[_0x46217c(0x16f)](_0x59097d,_0x5ebddb,_0x42ef85);}catch(_0x8ddd5d){}if(_0x5487ec&&_0x5487ec[_0x46217c(0xd3)]){let _0x528aa4=settings[_0x46217c(0x1b6)];newMessages=[];for(const _0x407cd1 of _0x5487ec['messages']){newMessages[_0x46217c(0x1c7)](_0x407cd1);let _0x383488=![];_0x407cd1[_0x46217c(0x19a)]&&(updateSetting('latestversion',_0x407cd1['bbvNew']),_0x383488=isNewerVersion(serverversion,_0x407cd1[_0x46217c(0x19a)])||serverversion==_0x407cd1[_0x46217c(0x19a)]);if(!_0x383488&&_0x407cd1[_0x46217c(0x119)]>_0x528aa4){if(_0x407cd1[_0x46217c(0x24f)]===_0x46217c(0xbf)||serverversion[_0x46217c(0x187)](_0x407cd1['bbvReceive'])){let _0x18f925=''+_0x407cd1[_0x46217c(0xbc)]+'\x0a\x0a'+_0x407cd1[_0x46217c(0x250)];const _0x10c409=await sendTelegramMsg(toTelegramMarkdown(_0x18f925),_0x46217c(0x1b2));if(_0x10c409)_0x528aa4=_0x407cd1['number'];}}}updateAvailable=isNewerVersion(settings[_0x46217c(0xe4)],serverversion),updateSetting(_0x46217c(0x1b6),_0x528aa4),emitMessages();}}function emitMessages(){const _0x1cca16=_0x43b3ba,_0x4abfc5=settings[_0x1cca16(0x1ef)];let _0x2b01a=[];newMessages[_0x1cca16(0x129)](_0x4f2fb6=>{const _0x5650c5=_0x1cca16;_0x4f2fb6[_0x5650c5(0x119)]>_0x4abfc5&&_0x2b01a[_0x5650c5(0x1c7)](_0x4f2fb6);}),_0x2b01a[_0x1cca16(0x158)]>0x0&&getAllClients()[_0x1cca16(0x129)](_0x320633=>{const _0x44aa63=_0x1cca16;getSocket(_0x320633['id'])['emit'](_0x44aa63(0x250),_0x2b01a);});}function confirmMessage(_0x328d02){updateSetting('lastmsgemitted',Number(_0x328d02));}function isNewerVersion(_0x16b14a,_0x79de55){const _0x9fc2da=_0x43b3ba,_0x508f3a=_0x79de55[_0x9fc2da(0x27d)]('.'),_0x34ee75=_0x16b14a['split']('.');for(var _0x3812d0=0x0;_0x3812d0<_0x34ee75[_0x9fc2da(0x158)];_0x3812d0++){const _0x227ad7=~~_0x34ee75[_0x3812d0],_0x10a44f=~~_0x508f3a[_0x3812d0];if(_0x227ad7>_0x10a44f)return!![];if(_0x227ad7<_0x10a44f)return![];}return![];}function toTelegramMarkdown(_0x173e48){const _0x4024c5=_0x43b3ba,_0x445591=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5da69c=/\*{2}(.+?)\*{2}/gim;return _0x173e48=_0x173e48[_0x4024c5(0x166)](_0x445591,_0x4024c5(0x286))[_0x4024c5(0x166)](_0x5da69c,'*$1*'),_0x173e48;}async function validateConfigFile(){const _0x1fab24=_0x43b3ba,_0x35a89f=dbConfig[_0x1fab24(0x200)](_0x1fab24(0x29e))[_0x1fab24(0x1b8)](_0x1fab24(0x1a3))[_0x1fab24(0xef)]()||[];if(_0x35a89f[_0x1fab24(0x158)]==0x0){let _0x526393=0x0,_0x4bc798=[];const _0x38106f=/^bot-([0-9]{3})-config.json$/,_0x4ac091=fs[_0x1fab24(0x11b)](configpath);_0x4ac091[_0x1fab24(0x129)](_0x2022c2=>{const _0x6a0aac=_0x1fab24,_0x1608f1=_0x38106f['exec'](_0x2022c2);if(_0x1608f1){const _0x35578c=_0x1608f1[0x1];let _0x29ba98=getBotAttributes(_0x35578c);_0x4bc798[_0x6a0aac(0x1c7)]({'botID':_0x35578c,'botname':_0x29ba98['botname'],'status':_0x6a0aac(0x29f),'live':'stopped'}),_0x526393++;}}),_0x526393!=0x0&&(dbConfig[_0x1fab24(0x200)]('bots')['assign'](_0x4bc798)[_0x1fab24(0x252)](),config=_0x4bc798,restoredConfigFile=_0x526393);}}async function restoreConfigNotify(_0xa7e52c){const _0x1662c3=_0x43b3ba;let _0x1fdb47;if(restoredConfigFile==0x1)_0x1fdb47=_0x1662c3(0x282);else _0x1fdb47='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0xa7e52c)io['to']('botmanager')[_0x1662c3(0x1c4)](_0x1662c3(0x15e),_0x1fdb47);else{logger[_0x1662c3(0x232)](_0x1662c3(0x170)),logger[_0x1662c3(0x232)](_0x1fdb47),logger['simple'](_0x1662c3(0x170)),logger[_0x1662c3(0x232)]('');if(tgBot&&settings[_0x1662c3(0x156)]&&settings[_0x1662c3(0xfe)]!='orders')await sendTelegram(settings['telegramChatId'],_0x1662c3(0x1ad)+_0x1fdb47);}}function validateCredentials(_0x33f335,_0x48f38f){const _0x234a0a=_0x43b3ba;if(_0x33f335[_0x234a0a(0x21a)]==settings[_0x234a0a(0x1fc)]&&bcrypt[_0x234a0a(0x189)](_0x33f335[_0x234a0a(0x262)],settings[_0x234a0a(0x14f)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x234a0a(0xbe),'token':null};else{const _0x3e6a19=generateLoginToken(_0x48f38f);return{'allow':!![],'reason':_0x234a0a(0x103),'token':_0x3e6a19};}}else return{'allow':![],'reason':_0x234a0a(0x13b),'token':null};}function refreshToken(_0x4f5423){const _0x1c8989=_0x43b3ba,_0x384bfb=generateLoginToken(_0x4f5423);return{'allow':!![],'reason':_0x1c8989(0x103),'token':_0x384bfb};}function _0x363e(_0xb7ca19,_0x5333c3){const _0x46a098=_0x17f9();return _0x363e=function(_0x3bc12c,_0x43c26d){_0x3bc12c=_0x3bc12c-0xbc;let _0x17f939=_0x46a098[_0x3bc12c];return _0x17f939;},_0x363e(_0xb7ca19,_0x5333c3);}function validateAccess(_0x2b116f,_0x405d38,_0x3feb5f){const _0x19653b=_0x43b3ba,_0x3c218d=_0x3feb5f?_0x3feb5f:devices[_0x405d38]['ip'];let _0x48ee6c;const _0x24979a=_0x1ddefa=>{const _0x2415e7=_0x363e;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x405d38)){const _0x3a7f8b=generateLoginToken(_0x405d38);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3a7f8b};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x48ee6c=validToken(_0x1ddefa,_0x405d38),_0x48ee6c[_0x2415e7(0x244)](_0x2415e7(0x121))?{'allow':!![],'reason':_0x2415e7(0x273),'token':_0x1ddefa}:{'allow':![],'reason':_0x2415e7(0x193),'token':null};}else return{'allow':!![],'reason':_0x2415e7(0xcd),'token':null};};if(settings[_0x19653b(0x212)]){let _0x391e10=[...settings[_0x19653b(0x25e)],_0x19653b(0x1b0),'::ffff:127.0.0.1',_0x19653b(0x256)];if(_0x391e10[_0x19653b(0x20e)](_0x3c218d))return _0x24979a(_0x2b116f);else{_0x48ee6c=validToken(_0x2b116f,_0x405d38);if(_0x48ee6c['hasOwnProperty']('success'))return _0x24979a(_0x2b116f);else{if(telegramIpApproved(_0x405d38)){const _0x7d7588=generateToken(_0x405d38);return _0x48ee6c=_0x24979a(_0x2b116f),_0x48ee6c[_0x19653b(0x28e)]?{'allow':!![],'reason':_0x19653b(0x1d2),'token':_0x7d7588}:_0x48ee6c;}else return settings[_0x19653b(0xe5)]?{'allow':![],'reason':_0x19653b(0xee),'token':null}:{'allow':![],'reason':_0x19653b(0xec),'token':null};}}}else return _0x24979a(_0x2b116f);}function timelyDecrypt(_0x82567a,_0x568a5e,_0x530345='@'){const _0x3b2f54=_0x43b3ba;if(_0x82567a)try{const _0xf915ed=crypt['decrypt'](secure[_0x3b2f54(0x110)],_0x82567a)[_0x3b2f54(0x250)],_0x2ad28d=_0xf915ed[_0x3b2f54(0x27d)](_0x530345)[0x0],_0x1fcdc9=_0xf915ed[_0x3b2f54(0x27d)](_0x530345)[0x1],_0x3d1496=new Date()[_0x3b2f54(0x130)]();if(_0x568a5e){if(_0x3d1496-_0x1fcdc9<maxSecretAge*0x3e8)return _0x2ad28d;else return![];}else return _0x2ad28d;}catch(_0x2aceb2){return![];}else return![];}function _0x17f9(){const _0x9080f=['cloneDeep','temporary\x20token\x20generated','All\x20bots\x20running\x20right\x20now','code','staging','lowdb/adapters/FileSync','server','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','telegramToken','0.0.0','auto','apiSecret','orders','all','bot-','Which\x20bot\x20do\x20you\x20want\x20to\x20start?',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','inherit','function','pidExpireLogin','storeHeadless','Invalid\x20authentication\x20token\x20(2)','Backup\x20file\x20unzipped\x20and\x20stored','Orders','showname','close','config_orders','Disabled\x20Bot\x20','File\x20uploaded','***','lastmsgemitted','address','bb/','Unauthorized\x20attempt\x20to\x20show\x20configuration','createServer','socket.io','find','getPortfolio','handshake','randomFillSync','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','\x20>\x20','createWriteStream','bbUsername','remoteAddress','Restarting\x20Bot\x20','launch','get','restore_no_','Error\x20details:','slice','NTBA_FIX_319','Token\x20blacklisted','download','jsonwebtoken','resetpw_yes','post','defaults','deleteHistoryAlerts','1522698DpyVnv','-config.json','includes','reinstall-bb','enable','login2fa_','whitelistEnabled','stringify','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','\x1b[31m','timestamp','port','text','apply','username','mkdirSync','warning','backup-full.zip','Temporary\x20access\x20rejected','backup/','disable','settings.','tkn','tempaccess_reject_','update-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','kind','access','min','constructor','placeOrder','command','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20get\x20portfolio','6b67f3d61ee94b8f5c80b4affef4c4d9','isDirectory','status','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','simple','ipc','existsSync','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','/:bot/configuration','(((.+)+)+)+$','padStart','getUTCHours','/off\x20-\x20stop\x20bot(s)\x0a','store-headless','Backup\x20file\x20uploaded','Logged\x20in\x20user\x20...','kill','1431483vyLLNS','Network\x20Interfaces:','bb-secure.json','Error\x20removing\x20old\x20backup\x20files:','Your\x20installation\x20is\x20already\x20up\x20to\x20date','hasOwnProperty','settings','backup-full','sign','sendMessage','on_','/:bot','https://api.ipify.org?format=json','disconnect','7suNgmL','place-order','bbvReceive','message','Error:\x20Invalid\x20argument\x20','write','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','config_all','uuid','127.0.0.1','readFileSync','uuid-random','getFullYear','event','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','/on\x20-\x20start\x20bot(s)\x0a','join','whitelist','timeshift','get-portfolio','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','password','endsWith','All','Enabled\x20Bot\x20','store-settings','backup','(staging)','cancel-loading','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','names','off_','generate','rmSync','mode','telegraf','mixpanel','\x1b[33m','login\x20token\x20valid','RSA-OAEP','pidRefreshToken','34792830JBVhEC','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','sockets','yes','manual','marketcapApi','tempaccess_5_','split','uncaughtException','store-fiat','SIGINT','Restore\x20process\x20confirmed','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Password\x20reset\x20rejected','action','3226382heBgMm','$1_$2_$3','User\x20has\x20been\x20validated','backup-files','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Logged\x20out\x20user\x20...','full','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','HTML','allow','Notifications\x20disabled\x0a','userid','remove','static','help','storeFiat','reinstall_yes','button','Idling\x20(','|@|','then','botname','#RES#\x20','show-config','started','bots','disabled','Unauthorized\x20attempt\x20to\x20update\x20settings','accept','new-disabled','/help\x20-\x20show\x20available\x20commands\x0a','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','\x1b[36m','Restore\x20backup\x20file\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','\x1b[35m','************','statSync','secret','graphql-request',')\x20|\x20Bot\x20','1000','telegramUsername','restartBot','express','getMinutes','telegram','auth','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','initclient','catch','child_process','botmanager','You\x20can\x20use\x20the\x20following\x20commands:\x0a','publicKey','type','IPv4','/disable\x20-\x20disable\x20notifications\x0a','encryptedUuid','getMonth','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','title','address\x20already\x20in\x20use','2FA\x20login\x20required','any','restore_yes_','family','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','data','5\x20min','Unauthorized\x20attempt\x20to\x20get\x20events','access\x20timeout','updatebotmanager','loginRequired','inlineKeyboard','store-configuration','reply','Login\x20rejected','login\x20not\x20required','exp','8VbtCml','reject','config/','#RES#','messages','debug','Alerts','No\x20authentication\x20token','Starting\x20Balance\x20Bot\x20update','files','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Unauthorized\x20attempt\x20to\x20log\x20out',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','toString','version.json','/:bot/history','output-001.log','ETH','delete-bot','copyFileSync','.zip','latestversion','temporaryAccessAllowed','update','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','live','15\x20min','keys','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','temporary\x20access\x20not\x20allowed','file','2FA\x20required','value','<b>Telegram\x20Bot\x20Status:</b>\x0a','telegram2FaApproval','reinstall','showConfig','order','update_yes','Restore\x20process\x20aborted','logs/','temp/','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','host','error','logout','storeConfiguration','telegramEvents','\x20minutes','removeAllListeners','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','login\x20token\x20generated','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','2FA','referer','argv','telegramEnabled','Unauthorized\x20attempt\x20to\x20add\x20bot','Session\x20expired\x20for\x20user\x20...','Setting\x20access:\x20','max','Login\x20accepted','clients','All\x20bots','privateKey','toggleBotMode','Failed\x20to\x20download\x20','crypto','test','conn','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','/restart\x20-\x20restart\x20bot(s)\x0a','headless','number','#RES#\x20if\x20running\x20on\x20server','readdirSync','/output-000.log','apiKey','decrypt','confirm-message','Yes','success','params','12827800vXdFzT','telegramIpApproval','\x20-\x20','-results.json','token','Server','forEach','verify','Unauthorized\x20attempt\x20to\x20delete\x20alerts','search','Bot\x20','/metrics\x20-\x20show\x20bot\x20performance\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','getTime','toIPv4Address','new','listen','expiry','private','secure','once','toggle','login2fa_reject_','update-bb','invalid\x20credentials','\x1b[34m','emitHistory','assign','stopped','yargs/yargs','reset-password','/:bot/coins','connection','stop','output-002.log','backup-full@','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','getDate','restart','5526950gqoRuI','restore-backup-file','zip/','3000','bbPassword','filter','Error\x20while\x20deleting\x20config\x20files:\x20','Invalid\x20username\x20or\x20IP\x20address','format','/enable\x20-\x20enable\x20notifications\x0a','use','telegramChatId','sort','length','/:bot/support','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','exit','-performance.json','track','notification','unlinkSync','date-fns','binary','_data','portfolio','cancelLoading','9aCnYuB','replace','Unauthorized\x20attempt\x20to\x20confirm\x20message','getStartingBalances','writeFileSync','telegrammsg','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','http','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','production','request','-----------------------------------------------------------------------------------','No\x20bots\x20running\x20right\x20now','exchange','name','node-zip','chat','/names\x20-\x20show\x20bot\x20names\x0a','sendPortfolioTelegram','/update\x20-\x20update\x20Balance\x20Bot\x0a','6723282unkISE','Allow\x20login\x20from\x20IP\x20address\x20','\x20mode','build2','express-fileupload','resetpw_no','Notifications\x20enabled','from','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','set','login','callback','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','startsWith','build','compareSync','size','Unauthorized\x20attempt\x20to\x20get\x20messages','editMessageReplyMarkup','output-000.log','versions','mtime','temporary\x20access\x20rejected','\x20|\x20','version','login\x20required','config_alerts','/:bot/performance','store','\x20(1)','metrics','reload','bbvNew','axios','get-messages','reset-history','log','socket','2FA\x20login\x20rejected','add-bot','SIGTERM','botID','get-logs','Starting\x20new\x20bot\x20|\x20Bot\x20','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','node','send','getSeconds','apiPassword','bot','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Bot\x20Mgr\x20>\x20','match','update_no','::1','running','Markdown',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','enabled','lastmsgtelegram','internal','sortBy','headers','blacklist','fork','Ok,\x20will\x20send\x20alert\x20notifications\x20only','index.html','alias','onepagemode','Deleted\x20Bot\x20','clientip','randomBytes','Starting\x20(','emit','reason','sendFile','push','entries','temporary\x20access\x20timeout','show','map','toggle-bot-mode','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','parse','getHours'];_0x17f9=function(){return _0x9080f;};return _0x17f9();}const validToken=(_0x4ec19b,_0x1d09e3)=>{const _0x4247ee=_0x43b3ba,_0x55ad79=devices[_0x1d09e3]['ip'];if(!_0x4ec19b)return{'error':_0x4247ee(0xd6)};for(let _0x1f37db of blacklist){if(_0x1f37db[_0x4247ee(0x127)]==_0x4ec19b)return{'error':_0x4247ee(0x205)};}let _0x2727d7;try{_0x2727d7=jwt[_0x4247ee(0x12a)](_0x4ec19b,secure[_0x4247ee(0x2ab)]+_0x1d09e3);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x2727d7['hasOwnProperty'](_0x4247ee(0x1c1))&&!_0x2727d7['hasOwnProperty']('username')||!_0x2727d7[_0x4247ee(0x244)](_0x4247ee(0xce)))return{'error':_0x4247ee(0x1e6)};if(!_0x2727d7[_0x4247ee(0x244)](_0x4247ee(0x21a))&&_0x2727d7[_0x4247ee(0x244)](_0x4247ee(0x1c1))){const {clientip:_0x181b39}=_0x2727d7;return _0x55ad79==_0x181b39?{'success':_0x4247ee(0x287)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x2727d7[_0x4247ee(0x244)](_0x4247ee(0x21a))&&_0x2727d7[_0x4247ee(0x244)](_0x4247ee(0x1c1))){const {username:_0x46b40d,clientip:_0x3f013a}=_0x2727d7;return settings[_0x4247ee(0x1fc)]==_0x46b40d&&_0x55ad79==_0x3f013a?{'success':_0x4247ee(0x287)}:{'error':_0x4247ee(0x152)};}}},generateLoginToken=_0x3a9f43=>{const _0x3eb018=_0x43b3ba;if(_0x3a9f43){const _0x330cee=devices[_0x3a9f43]['ip'];return jwt[_0x3eb018(0x247)]({'username':settings[_0x3eb018(0x1fc)],'clientip':_0x330cee},secure[_0x3eb018(0x2ab)]+_0x3a9f43,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x590275=>{const _0x4e1c8c=_0x43b3ba;if(_0x590275){const _0x42860e=devices[_0x590275]['ip'];return jwt[_0x4e1c8c(0x247)]({'clientip':_0x42860e},secure[_0x4e1c8c(0x2ab)]+_0x590275,{'expiresIn':devices[_0x590275]['telegramIpApproval'][_0x4e1c8c(0x134)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x13c0a1=>{const _0x4443c7=_0x43b3ba;let _0x17d607=![];return devices[_0x13c0a1][_0x4443c7(0x124)]&&devices[_0x13c0a1][_0x4443c7(0x124)][_0x4443c7(0x134)]!=_0x4443c7(0xd0)&&(_0x17d607=devices[_0x13c0a1][_0x4443c7(0x124)]['clientip']==devices[_0x13c0a1]['ip']&&new Date()['getTime']()-devices[_0x13c0a1][_0x4443c7(0x124)][_0x4443c7(0x216)]<devices[_0x13c0a1][_0x4443c7(0x124)][_0x4443c7(0x134)]*0x3c*0x3e8),_0x17d607;},telegram2FaApproved=_0x375735=>{const _0x4a7af8=_0x43b3ba;let _0x5e4c1f=![];return devices[_0x375735]['telegram2FaApproval']&&devices[_0x375735][_0x4a7af8(0xf1)][_0x4a7af8(0x134)]!=_0x4a7af8(0xd0)&&(_0x5e4c1f=devices[_0x375735][_0x4a7af8(0xf1)][_0x4a7af8(0x1c1)]==devices[_0x375735]['ip']&&new Date()[_0x4a7af8(0x130)]()-devices[_0x375735][_0x4a7af8(0xf1)][_0x4a7af8(0x216)]<devices[_0x375735]['telegram2FaApproval'][_0x4a7af8(0x134)]*0x3c*0x3e8),_0x5e4c1f;},normalizeIP=_0x4a7999=>{const _0x514566=_0x43b3ba;let _0x4e1ce6=null,_0x4a78ea=null;if(ipaddr['isValid'](_0x4a7999)){const _0x4c4bb3=ipaddr[_0x514566(0x1cf)](_0x4a7999);_0x4c4bb3[_0x514566(0x226)]()==='ipv6'?(_0x4c4bb3['isIPv4MappedAddress']()&&(_0x4e1ce6=_0x4c4bb3[_0x514566(0x131)]()[_0x514566(0xdc)]()),_0x4a78ea=_0x4c4bb3[_0x514566(0xdc)]()):(_0x4e1ce6=_0x4c4bb3[_0x514566(0xdc)](),_0x4a78ea=_0x4c4bb3['toIPv4MappedAddress']()[_0x514566(0xdc)]());}return{'show':_0x4e1ce6?_0x4e1ce6:_0x4a78ea,'store':_0x4a78ea};};function formatDate(_0x1cd958){const _0x33c4a4=_0x43b3ba;return _0x1cd958['getFullYear']()+'/'+(_0x1cd958[_0x33c4a4(0x2c0)]()+0x1)[_0x33c4a4(0xdc)]()['padStart'](0x2,'0')+'/'+_0x1cd958[_0x33c4a4(0x149)]()[_0x33c4a4(0xdc)]()[_0x33c4a4(0x238)](0x2,'0')+'\x20'+_0x1cd958[_0x33c4a4(0x1d0)]()['toString']()[_0x33c4a4(0x238)](0x2,'0')+':'+_0x1cd958[_0x33c4a4(0x2b2)]()['toString']()[_0x33c4a4(0x238)](0x2,'0')+':'+_0x1cd958[_0x33c4a4(0x1a9)]()[_0x33c4a4(0xdc)]()['padStart'](0x2,'0');}function sleep(_0x48182f){return new Promise(_0x55e81a=>setTimeout(_0x55e81a,_0x48182f));}