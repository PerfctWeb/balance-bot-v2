const _0x182301=_0x4d21;(function(_0x4e418e,_0xaf563c){const _0x3389f1=_0x4d21,_0x3c7a06=_0x4e418e();while(!![]){try{const _0x37759c=parseInt(_0x3389f1(0x1c3))/0x1*(-parseInt(_0x3389f1(0x14f))/0x2)+-parseInt(_0x3389f1(0x213))/0x3*(parseInt(_0x3389f1(0x2bf))/0x4)+parseInt(_0x3389f1(0x16d))/0x5+parseInt(_0x3389f1(0x183))/0x6+parseInt(_0x3389f1(0x21e))/0x7+-parseInt(_0x3389f1(0x25b))/0x8+parseInt(_0x3389f1(0x19f))/0x9*(parseInt(_0x3389f1(0x2ad))/0xa);if(_0x37759c===_0xaf563c)break;else _0x3c7a06['push'](_0x3c7a06['shift']());}catch(_0x403806){_0x3c7a06['push'](_0x3c7a06['shift']());}}}(_0x3484,0xb43f3));const _0x5bd01d=function(){let _0x1fc324=!![];return function(_0x1d6034,_0x3ea746){const _0x57b82d=_0x1fc324?function(){const _0x5afa31=_0x4d21;if(_0x3ea746){const _0x12cf07=_0x3ea746[_0x5afa31(0x264)](_0x1d6034,arguments);return _0x3ea746=null,_0x12cf07;}}:function(){};return _0x1fc324=![],_0x57b82d;};}(),_0x124f82=_0x5bd01d(this,function(){const _0x1bcd54=_0x4d21;return _0x124f82[_0x1bcd54(0x23d)]()[_0x1bcd54(0x163)](_0x1bcd54(0x293))['toString']()[_0x1bcd54(0x21d)](_0x124f82)[_0x1bcd54(0x163)](_0x1bcd54(0x293));});_0x124f82();'use strict';process[_0x182301(0x236)][_0x182301(0x16e)]=0x1;const childProcess=require(_0x182301(0x174)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require(_0x182301(0x22b)),path=require(_0x182301(0x1ed)),crypto=require(_0x182301(0x1d8)),Crypt=require(_0x182301(0x271))[_0x182301(0x25e)],RSA=require(_0x182301(0x271))[_0x182301(0x1f2)],bcrypt=require(_0x182301(0x178)),jwt=require(_0x182301(0x22d)),{Analytics}=require(_0x182301(0x234)),googleAnalyticsV3Plugin=require(_0x182301(0x268))[_0x182301(0x233)],ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x182301(0x275)][_0x182301(0x21c)](0x2))['argv'],uuidRandom=require(_0x182301(0x1ae)),Mixpanel=require(_0x182301(0x17a)),axios=require(_0x182301(0x224)),{GraphQLClient,gql}=require(_0x182301(0x29a)),PORT=argv[_0x182301(0x232)]||_0x182301(0x1be),pattern=/^[0-9]{2,4}$/;!pattern[_0x182301(0x27b)](PORT)&&(console[_0x182301(0x274)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x182301(0x228)),process['exit'](0x1));const HOST=argv[_0x182301(0x210)]||null,userID=argv['user']||'';let bbpath='bb/',bbpath2='';const botfile=_0x182301(0x252),configfile=_0x182301(0x258),settingsfile=_0x182301(0x1fb),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x182301(0x169)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x182301(0x2a3),configbackuppath=configpath+'backup/';!fs[_0x182301(0x2ab)](configpath)&&fs[_0x182301(0x151)](configpath);!fs[_0x182301(0x2ab)](configbackuppath)&&fs['mkdirSync'](configbackuppath);function _0x4d21(_0x164393,_0x535a5b){const _0x1ed952=_0x3484();return _0x4d21=function(_0x124f82,_0x5bd01d){_0x124f82=_0x124f82-0x146;let _0x3484ce=_0x1ed952[_0x124f82];return _0x3484ce;},_0x4d21(_0x164393,_0x535a5b);}const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x182301(0x2a1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x182301(0x160)}})[_0x182301(0x188)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x182301(0x2a1)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x182301(0x2a5),'rsaStandard':_0x182301(0x2a0)});const saltRounds=0xa,mixpanel=Mixpanel[_0x182301(0x1df)](_0x182301(0x175),{'host':_0x182301(0x167)}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x182301(0x286)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x182301(0x287)),app=express(),http=require(_0x182301(0x2c3))[_0x182301(0x1ef)](app);app['use'](express[_0x182301(0x1c9)](path[_0x182301(0x1a3)](__dirname,bbpath2,_0x182301(0x15b)))),app[_0x182301(0x21f)](express[_0x182301(0x1c9)](path[_0x182301(0x1a3)](__dirname,bbpath2,_0x182301(0x27a)))),app[_0x182301(0x28a)]('/',function(_0x148332,_0x5ab8ab){const _0x48e902=_0x182301;_0x5ab8ab[_0x48e902(0x1f5)](path['join'](__dirname,bbpath2,'build2','index.html'));}),app[_0x182301(0x28a)](_0x182301(0x1d0),function(_0x1bf717,_0xf6f947){const _0x326350=_0x182301;_0xf6f947['sendFile'](path['join'](__dirname,bbpath2,'build',_0x326350(0x26f)));}),app['get'](_0x182301(0x2b3),(_0x2da0e3,_0x1774dd)=>{const _0xf6a4c5=_0x182301;_0x1774dd[_0xf6a4c5(0x1f5)](path[_0xf6a4c5(0x1a3)](__dirname,bbpath2,_0xf6a4c5(0x27a),_0xf6a4c5(0x26f)));}),app[_0x182301(0x28a)](_0x182301(0x198),(_0x417a8b,_0x4afc24)=>{const _0x137f74=_0x182301;_0x4afc24['sendFile'](path[_0x137f74(0x1a3)](__dirname,bbpath2,_0x137f74(0x27a),_0x137f74(0x26f)));}),app['get'](_0x182301(0x18b),(_0x59afe3,_0x59c202)=>{const _0x4fc4a8=_0x182301;_0x59c202['sendFile'](path[_0x4fc4a8(0x1a3)](__dirname,bbpath2,_0x4fc4a8(0x27a),_0x4fc4a8(0x26f)));}),app[_0x182301(0x28a)]('/:bot/history',(_0x5f5856,_0x5ac4f4)=>{const _0x41f4ad=_0x182301;_0x5ac4f4[_0x41f4ad(0x1f5)](path[_0x41f4ad(0x1a3)](__dirname,bbpath2,_0x41f4ad(0x27a),_0x41f4ad(0x26f)));}),app['get'](_0x182301(0x262),(_0x5e585c,_0x16db08)=>{const _0x48d395=_0x182301;_0x16db08[_0x48d395(0x1f5)](path[_0x48d395(0x1a3)](__dirname,bbpath2,_0x48d395(0x27a),'index.html'));}),app[_0x182301(0x28a)](_0x182301(0x1b2),(_0x470155,_0x47d4ca)=>{const _0x134c01=_0x182301;_0x47d4ca['sendFile'](path[_0x134c01(0x1a3)](__dirname,bbpath2,_0x134c01(0x27a),_0x134c01(0x26f)));});if(HOST)http[_0x182301(0x1ea)](PORT,HOST);else http[_0x182301(0x1ea)](PORT);const io=require(_0x182301(0x1c4))(http,{}),TelegramBot=require(_0x182301(0x18a));let tgBot;if(settings['telegramToken']&&settings[_0x182301(0x261)]!=''&&settings['telegramUsername']&&settings[_0x182301(0x1f9)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x15348d=_0x182301;console[_0x15348d(0x274)](''),console[_0x15348d(0x274)](_0x15348d(0x18e)),logging(_0x15348d(0x24d)+PORT),console[_0x15348d(0x274)]('-----------------------------------------------------------------------------------');if(config[_0x15348d(0x1b5)]!=0x0)config[_0x15348d(0x291)](_0xced713=>{const _0x3b8497=_0x15348d;if(_0xced713['status']==_0x3b8497(0x255)||_0xced713[_0x3b8497(0x1e3)]=='new')logging('starting\x20bot\x20|\x20Bot\x20'+_0xced713[_0x3b8497(0x2ba)]+_0x3b8497(0x23c)+_0xced713[_0x3b8497(0x204)]),startBot([_0xced713[_0x3b8497(0x2ba)],userID],{'cwd':bbpath},function(_0x94baee){if(_0x94baee)logging(_0x94baee);});else(_0xced713['status']==_0x3b8497(0x1e8)||_0xced713[_0x3b8497(0x1e3)]==_0x3b8497(0x29d))&&logging(_0x3b8497(0x170)+_0xced713[_0x3b8497(0x2ba)]+_0x3b8497(0x23c)+_0xced713[_0x3b8497(0x204)]);});else!newBot&&console['log'](_0x15348d(0x16b));if(newBot)addBot();console[_0x15348d(0x274)](_0x15348d(0x18e)),console[_0x15348d(0x274)]('');}function startSocket(){const _0x59e34f=_0x182301;io['on'](_0x59e34f(0x24c),_0x4e4b10=>{const _0x230580=_0x59e34f;let _0x243c99,_0x39d863,_0x1670fb,_0x116959,_0x3bb15a;const _0xcc07b0=_0x4e4b10[_0x230580(0x1b4)]['headers'][_0x230580(0x1c7)];_0x39d863=_0xcc07b0['match'](/bot[0-9]{3}/);if(_0x39d863)_0x1670fb=_0x39d863[0x0]['match'](/[0-9]{3}/);if(_0x1670fb)_0x243c99=_0x1670fb[0x0];else _0x243c99=_0x230580(0x1db);const _0x791be4=_0x4e4b10[_0x230580(0x1b4)][_0x230580(0x1f4)][_0x230580(0x1ac)];if(!_0x791be4)_0x4e4b10['emit'](_0x230580(0x1e3),{'publicKey':secure[_0x230580(0x1ca)]});else{_0x116959=timelyDecrypt(_0x791be4,![]);if(!_0x116959)_0x4e4b10[_0x230580(0x285)]('status',{'publicKey':secure[_0x230580(0x1ca)]});else{_0x3bb15a=normalizeIP(_0x4e4b10[_0x230580(0x14c)][_0x230580(0x150)])[_0x230580(0x2bb)];if(!devices[_0x116959])devices[_0x116959]={'uuid':_0x116959,'access':{'token':null}};devices[_0x116959]['ip']=_0x3bb15a;const _0x4120b7=addClient(_0x4e4b10['id'],_0x116959,_0x243c99);setAccess(_0x4120b7),emitMessages(),_0x4e4b10['on'](_0x230580(0x1b7),_0x534086=>{const _0x140e04=_0x230580,_0x160156=timelyDecrypt(_0x534086[_0x140e04(0x1fa)]);if(_0x160156){_0x534086={'username':_0x534086[_0x140e04(0x1a6)],'password':_0x160156},devices[_0x116959][_0x140e04(0x206)]=validateCredentials(_0x534086,_0x116959);if(devices[_0x116959]['access'][_0x140e04(0x257)]==![]&&devices[_0x116959][_0x140e04(0x206)]['reason']==_0x140e04(0x1ba))_0x4e4b10[_0x140e04(0x285)]('status',{'access':devices[_0x116959]['access']}),loginAccess2FA(_0x116959,_0x3bb15a);else{if(devices[_0x116959][_0x140e04(0x206)][_0x140e04(0x257)]==![]&&devices[_0x116959][_0x140e04(0x206)][_0x140e04(0x24a)]=='invalid\x20credentials')_0x4e4b10[_0x140e04(0x285)](_0x140e04(0x1e3),{'access':devices[_0x116959][_0x140e04(0x206)]});else devices[_0x116959][_0x140e04(0x206)][_0x140e04(0x257)]&&devices[_0x116959]['access'][_0x140e04(0x24a)]==_0x140e04(0x283)&&(getClientsWithUuid(_0x116959)[_0x140e04(0x291)](_0x601791=>{setAccess(_0x601791);}),setTokenRefresh(_0x116959),setSessionTimeout(_0x140e04(0x1b7),_0x116959));}}else logging(_0x140e04(0x214));}),_0x4e4b10['on']('reset-password',()=>{resetPassword();}),_0x4e4b10['on']('disconnect',_0x329d10=>{removeClient(_0x4e4b10['id']);});}}});}function initClient(_0x3b8bfc){const _0x217dab=_0x182301;if(_0x3b8bfc!=_0x217dab(0x1db)&&config[_0x217dab(0x1e2)]!=''){if(pid[_0x3b8bfc])pid[_0x3b8bfc][_0x217dab(0x17c)]({'function':_0x217dab(0x15d),'args':null});}}function getSocket(_0x1a2b86){const _0x275a3f=_0x182301;return io[_0x275a3f(0x164)][_0x275a3f(0x164)]['get'](_0x1a2b86);}function setAccess(_0x2a7b2f){const _0x40e26a=_0x182301,_0x12e7fa=getSocket(_0x2a7b2f['id']),_0x4e5ae8=_0x2a7b2f[_0x40e26a(0x1cd)],_0x41df0e=_0x2a7b2f['bot'];devices[_0x4e5ae8][_0x40e26a(0x206)]=validateAccess(devices[_0x4e5ae8][_0x40e26a(0x206)]['token'],_0x4e5ae8),_0x12e7fa['join'](_0x4e5ae8);if(devices[_0x4e5ae8]['access'][_0x40e26a(0x257)]){_0x12e7fa[_0x40e26a(0x1a3)](_0x41df0e);if(_0x41df0e==_0x40e26a(0x1db))initializeSocketBotManager(_0x12e7fa);else initializeSocketBot(_0x12e7fa);initClient(_0x41df0e);}devices[_0x4e5ae8][_0x40e26a(0x206)]['token']&&devices[_0x4e5ae8][_0x40e26a(0x206)][_0x40e26a(0x24a)]==_0x40e26a(0x1e0)&&setSessionTimeout(_0x40e26a(0x29f),_0x4e5ae8),devices[_0x4e5ae8][_0x40e26a(0x206)][_0x40e26a(0x1b0)]&&devices[_0x4e5ae8][_0x40e26a(0x206)]['reason']==_0x40e26a(0x1aa)&&setSessionTimeout('login',_0x4e5ae8),_0x12e7fa[_0x40e26a(0x285)](_0x40e26a(0x1e3),{'status':_0x2a7b2f[_0x40e26a(0x1cc)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4e5ae8]['access'],'externalip':devices[_0x4e5ae8]['ip'],'publicKey':secure[_0x40e26a(0x1ca)],'userid':settings[_0x40e26a(0x1a9)],'validInstallation':validInstallation}),devices[_0x4e5ae8][_0x40e26a(0x206)][_0x40e26a(0x257)]==![]&&devices[_0x4e5ae8][_0x40e26a(0x206)][_0x40e26a(0x24a)]==_0x40e26a(0x294)&&temporaryAccess2FA(_0x4e5ae8,devices[_0x4e5ae8]['ip']);}function setSessionTimeout(_0x5965ee,_0x547b8a){const _0x4775dd=_0x182301;let _0x464519;if(_0x5965ee==_0x4775dd(0x1b7))_0x464519=loginExpiry*0x3c*0x3e8;else _0x464519=devices[_0x547b8a]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x547b8a]['telegramIpApproval'][_0x4775dd(0x15f)]);if(devices[_0x547b8a][_0x4775dd(0x1dd)])clearTimeout(devices[_0x547b8a]['pidExpireLogin']);devices[_0x547b8a]['pidExpireLogin']=setTimeout(()=>{const _0x11db45=_0x4775dd;if(devices[_0x547b8a]['pidRefreshToken'])clearTimeout(devices[_0x547b8a]['pidRefreshToken']);removeSocketListeners(_0x547b8a),addBlacklist(_0x547b8a),devices[_0x547b8a][_0x11db45(0x1d3)]=null,devices[_0x547b8a]['telegram2FaApproval']=null,devices[_0x547b8a][_0x11db45(0x206)][_0x11db45(0x1b0)]=null,devices[_0x547b8a]['access']=validateAccess(devices[_0x547b8a]['access'][_0x11db45(0x1b0)],_0x547b8a),!(devices[_0x547b8a][_0x11db45(0x206)][_0x11db45(0x257)]&&devices[_0x547b8a][_0x11db45(0x206)][_0x11db45(0x24a)]==_0x11db45(0x23b))&&(_0x5965ee=='login'?io['to'](_0x547b8a)[_0x11db45(0x285)]('status',{'access':{'allow':![],'reason':_0x11db45(0x1e6),'token':null}}):io['to'](_0x547b8a)['emit'](_0x11db45(0x1e3),{'access':{'allow':![],'reason':_0x11db45(0x1d4),'token':null}})),devices[_0x547b8a][_0x11db45(0x206)][_0x11db45(0x1b0)]=null;},_0x464519);}function setTokenRefresh(_0x2a9299){const _0x3f937e=_0x182301;if(devices[_0x2a9299][_0x3f937e(0x14d)])clearTimeout(devices[_0x2a9299][_0x3f937e(0x14d)]);devices[_0x2a9299][_0x3f937e(0x14d)]=setTimeout(()=>{const _0x52db03=_0x3f937e;getClientsWithUuid(_0x2a9299)[_0x52db03(0x1b5)]!=0x0?(devices[_0x2a9299][_0x52db03(0x206)]=refreshToken(_0x2a9299),io['to'](_0x2a9299)['emit'](_0x52db03(0x1e3),{'status':_0x52db03(0x1bc),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2a9299][_0x52db03(0x206)],'externalip':devices[_0x2a9299]['ip'],'publicKey':secure[_0x52db03(0x1ca)],'validInstallation':validInstallation}),setTokenRefresh(_0x2a9299)):clearTimeout(devices[_0x2a9299]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4ae68b){const _0x5176af=_0x182301,_0x3a29d8=getClient(_0x4ae68b['id'])['uuid'];_0x4ae68b[_0x5176af(0x285)](_0x5176af(0x1fc),config),_0x4ae68b[_0x5176af(0x285)]('settings',cleanSettings()),_0x4ae68b['on'](_0x5176af(0x267),_0x46e4c6=>{const _0x33d029=_0x5176af;if(validateAccess(_0x46e4c6,_0x3a29d8)[_0x33d029(0x257)])addBot();else logging(_0x33d029(0x19e));}),_0x4ae68b['on'](_0x5176af(0x196),(_0x2bec4f,_0x535b24)=>{const _0x5e093b=_0x5176af;if(validateAccess(_0x535b24,_0x3a29d8)['allow'])toggleBot(_0x2bec4f[_0x5e093b(0x2ba)],_0x2bec4f[_0x5e093b(0x1e3)],_0x2bec4f[_0x5e093b(0x242)]);else logging(_0x5e093b(0x2a6));}),_0x4ae68b['on'](_0x5176af(0x253),(_0xcf37d1,_0x3ab3c4)=>{const _0x43431d=_0x5176af;if(validateAccess(_0x3ab3c4,_0x3a29d8)[_0x43431d(0x257)])toggleBotMode(_0xcf37d1);else logging(_0x43431d(0x2a6));}),_0x4ae68b['on'](_0x5176af(0x276),(_0x2c4cd8,_0x5c02c9)=>{const _0x18d365=_0x5176af;if(validateAccess(_0x5c02c9,_0x3a29d8)[_0x18d365(0x257)])deleteBot(_0x2c4cd8);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4ae68b['on'](_0x5176af(0x1b6),(_0x129776,_0x34b9cd)=>{const _0x32beae=_0x5176af;if(validateAccess(_0x34b9cd,_0x3a29d8)[_0x32beae(0x257)])storeSettings(_0x129776,!![]);else logging(_0x32beae(0x25f));}),_0x4ae68b['on']('update-bb',_0x2b3339=>{const _0x20f16e=_0x5176af;if(validateAccess(_0x2b3339,_0x3a29d8)[_0x20f16e(0x257)])updateBB();else logging(_0x20f16e(0x2aa));}),_0x4ae68b['on'](_0x5176af(0x215),_0x1ddb6a=>{const _0x66ffc3=_0x5176af;if(validateAccess(_0x1ddb6a,_0x3a29d8)[_0x66ffc3(0x257)])getMessages();else logging(_0x66ffc3(0x1ad));}),_0x4ae68b['on']('confirm-message',(_0x15e846,_0x1c803a)=>{const _0x3ad905=_0x5176af;if(validateAccess(_0x1c803a,_0x3a29d8)[_0x3ad905(0x257)])confirmMessage(_0x15e846);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4ae68b['on'](_0x5176af(0x240),_0xfa64e8=>{const _0x4c3a99=_0x5176af;if(validateAccess(_0xfa64e8,_0x3a29d8)[_0x4c3a99(0x257)]){if(devices[_0x3a29d8][_0x4c3a99(0x14d)])clearTimeout(devices[_0x3a29d8][_0x4c3a99(0x14d)]);if(devices[_0x3a29d8][_0x4c3a99(0x1dd)])clearTimeout(devices[_0x3a29d8][_0x4c3a99(0x1dd)]);removeSocketListeners(getClient(_0x4ae68b['id'])[_0x4c3a99(0x1cd)]),addBlacklist(_0x3a29d8),devices[_0x3a29d8][_0x4c3a99(0x1d3)]=null,devices[_0x3a29d8][_0x4c3a99(0x282)]=null,devices[_0x3a29d8][_0x4c3a99(0x206)][_0x4c3a99(0x1b0)]=null,io['to'](getClient(_0x4ae68b['id'])[_0x4c3a99(0x1cd)])[_0x4c3a99(0x285)]('status',{'access':{'allow':![],'reason':_0x4c3a99(0x211),'token':null}});}else logging(_0x4c3a99(0x149));});}function initializeSocketBot(_0x4f54d7){const _0x4f63b9=_0x182301,_0xcd5c83=getClient(_0x4f54d7['id'])[_0x4f63b9(0x22f)],_0x1457ee=getClient(_0x4f54d7['id'])[_0x4f63b9(0x1cd)];_0x4f54d7['on']('get-logs',(_0x894d9a,_0x457987)=>{const _0x14aa58=_0x4f63b9;if(validateAccess(_0x457987,_0x1457ee)[_0x14aa58(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x14aa58(0x17c)]({'function':_0x14aa58(0x2a4),'args':_0x894d9a});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x4f54d7['on'](_0x4f63b9(0x207),(_0xa2654b,_0x3a0e72)=>{const _0x4cc143=_0x4f63b9;if(validateAccess(_0x3a0e72,_0x1457ee)[_0x4cc143(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83]['send']({'function':_0x4cc143(0x248),'args':_0xa2654b});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x4f54d7['on'](_0x4f63b9(0x161),(_0x175e58,_0x24b37a)=>{const _0x21eb4f=_0x4f63b9;if(validateAccess(_0x24b37a,_0x1457ee)[_0x21eb4f(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x21eb4f(0x17c)]({'function':'getPortfolio','args':_0x175e58});}else logging(_0x21eb4f(0x20b));}),_0x4f54d7['on'](_0x4f63b9(0x1ff),(_0x5a75e4,_0x562f49)=>{const _0x732526=_0x4f63b9;if(validateAccess(_0x562f49,_0x1457ee)[_0x732526(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x732526(0x17c)]({'function':_0x732526(0x1c5),'args':_0x5a75e4});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x4f54d7['on']('store-headless',(_0x44178d,_0x564cd5)=>{const _0x1630ef=_0x4f63b9;if(validateAccess(_0x564cd5,_0x1457ee)[_0x1630ef(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x1630ef(0x17c)]({'function':_0x1630ef(0x279),'args':_0x44178d});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x4f54d7['on'](_0x4f63b9(0x256),_0x48ced6=>{const _0x5b92a7=_0x4f63b9;if(validateAccess(_0x48ced6,_0x1457ee)[_0x5b92a7(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x5b92a7(0x17c)]({'function':_0x5b92a7(0x155),'args':null});}else logging(_0x5b92a7(0x154));}),_0x4f54d7['on'](_0x4f63b9(0x1e9),(_0x5d75ff,_0x27bc38)=>{const _0x216757=_0x4f63b9;if(validateAccess(_0x27bc38,_0x1457ee)[_0x216757(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83]['send']({'function':'placeOrder','args':_0x5d75ff});}else logging(_0x216757(0x249));}),_0x4f54d7['on'](_0x4f63b9(0x289),_0x328824=>{const _0x18af1e=_0x4f63b9;if(validateAccess(_0x328824,_0x1457ee)[_0x18af1e(0x257)]){if(pid[_0xcd5c83])pid[_0xcd5c83][_0x18af1e(0x17c)]({'function':_0x18af1e(0x182),'args':null});}else logging(_0x18af1e(0x278));}),_0x4f54d7['on'](_0x4f63b9(0x263),_0x49286f=>{const _0x2792a7=_0x4f63b9;if(validateAccess(_0x49286f,_0x1457ee)[_0x2792a7(0x257)])updateBB();else logging(_0x2792a7(0x2aa));}),_0x4f54d7['on']('get-messages',_0x5ee9ce=>{const _0x49f9af=_0x4f63b9;if(validateAccess(_0x5ee9ce,_0x1457ee)[_0x49f9af(0x257)])getMessages();else logging(_0x49f9af(0x1ad));}),_0x4f54d7['on'](_0x4f63b9(0x2ac),(_0x18fb15,_0x3839fb)=>{const _0x2f5ab5=_0x4f63b9;if(validateAccess(_0x3839fb,_0x1457ee)[_0x2f5ab5(0x257)])confirmMessage(_0x18fb15);else logging(_0x2f5ab5(0x194));}),_0x4f54d7['on'](_0x4f63b9(0x240),_0x516f87=>{const _0x472ca9=_0x4f63b9;if(validateAccess(_0x516f87,_0x1457ee)[_0x472ca9(0x257)]){if(devices[_0x1457ee][_0x472ca9(0x14d)])clearTimeout(devices[_0x1457ee][_0x472ca9(0x14d)]);if(devices[_0x1457ee][_0x472ca9(0x1dd)])clearTimeout(devices[_0x1457ee][_0x472ca9(0x1dd)]);removeSocketListeners(getClient(_0x4f54d7['id'])[_0x472ca9(0x1cd)]),addBlacklist(_0x1457ee),devices[_0x1457ee]['telegramIpApproval']=null,devices[_0x1457ee][_0x472ca9(0x282)]=null,devices[_0x1457ee][_0x472ca9(0x206)][_0x472ca9(0x1b0)]=null,io['to'](getClient(_0x4f54d7['id'])[_0x472ca9(0x1cd)])[_0x472ca9(0x285)](_0x472ca9(0x1e3),{'access':{'allow':![],'reason':_0x472ca9(0x211),'token':null}});}else logging(_0x472ca9(0x149));});}function removeSocketListeners(_0x2af5b2){const _0x3687aa=_0x182301;getClientsWithUuid(_0x2af5b2)[_0x3687aa(0x291)](_0x4534bc=>{const _0x54fdd9=_0x3687aa;getSocket(_0x4534bc['id'])[_0x54fdd9(0x22a)]();});}function _0x3484(){const _0x5bbc41=['bbvReceive','8679840TqhkKa','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','settings.','Crypt','Unauthorized\x20attempt\x20to\x20update\x20settings','/status\x20-\x20show\x20bot(s)\x20status\x0a','telegramToken','/:bot/configuration','update-bb','apply','/update\x20-\x20update\x20Balance\x20Bot\x0a','verify','add-bot','@analytics/google-analytics-v3','/restart\x20-\x20restart\x20bot(s)\x0a','-performance.json','assign','https://hodlerhacks.com','hashSync','lastmsgtelegram','index.html','Token\x20blacklisted','hybrid-crypto-js','padStart','No\x20bots\x20running\x20right\x20now','log','argv','delete-bot','::ffff:127.0.0.1','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','storeHeadless','build','test','SIGTERM','message','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','cloneDeep','Starting\x20Balance\x20Bot\x20update','/enable\x20-\x20enable\x20notifications\x0a','telegram2FaApproval','login\x20token\x20generated','hasOwnProperty','emit','version','express','telegrammsg','cancel-loading','get','toggleBotMode','timeshift','bbPassword','Login\x20accepted','alerts','All\x20bots\x20running\x20right\x20now','forEach','bbUsername','(((.+)+)+)+$','2FA\x20required','No\x20authentication\x20token','Orders','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','stopped','readFileSync','graphql-request','whitelist','isValid','new-disabled','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','2FA','RSA-OAEP','defaults','new','config/','emitHistory','sha256','Unauthorized\x20attempt\x20to\x20update\x20bot','kind','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','compareSync','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','existsSync','confirm-message','84890tQYZVJ','number','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','reload','sortBy','kill','/:bot/portfolio','blacklist','includes','answerCallbackQuery','ipc','event','replace','botID','store','All','SIGINT','-events.json','47812KpZRQT','error\x20while\x20deleting\x20config\x20files:\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','30\x20min','http','settings','polling_error','writeFileSync','Unauthorized\x20attempt\x20to\x20log\x20out','messages','unlinkSync','conn','pidRefreshToken','Alerts','84226TQxfYd','remoteAddress','mkdirSync','yes','secret','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','getStartingBalances','remove','sendMessage','value','error','filter','build2','clientip','initclient','Balance\x20Bot\x20Server','timestamp','0.0.0','get-portfolio','callback_query','search','sockets','getDate','latestversion','api-eu.mixpanel.com','/names\x20-\x20show\x20bot\x20names\x0a','clients','bbvNew','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','getFullYear','4519435VFepaq','NTBA_FIX_319','min','idling\x20bot\x20\x20\x20|\x20Bot\x20','success','once','removeListener','child_process','6b67f3d61ee94b8f5c80b4affef4c4d9','name','mode','bcryptjs','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','mixpanel','getMinutes','send','Invalid\x20authentication\x20token\x20(2)','telegramEvents','Password\x20reset\x20rejected','readdirSync','Invalid\x20authentication\x20token\x20(1)','cancelLoading','6475788UHAxAX','f2aRequired','decrypt','enabled\x20Bot\x20','Temporary\x20access\x20rejected','write','isDirectory','node-telegram-bot-api','/:bot/coins','parse','deleted\x20Bot\x20','-----------------------------------------------------------------------------------','telegram','randomBytes','Bot\x20','privateKey','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20confirm\x20message','Notifications\x20disabled','update-bot','getMonth','/:bot/performance','15\x20min','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','<b>Telegram\x20Bot\x20Status:</b>\x0a','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','HTML','Unauthorized\x20attempt\x20to\x20add\x20bot','657WJVgrJ','Invalid\x20username\x20or\x20IP\x20address','from','orders','join','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','/off\x20-\x20stop\x20bot(s)\x0a','username','Password\x20has\x20been\x20reset\x20to:\x20','Yes','userid','2FA\x20login\x20token\x20generated','\x20>\x20','encryptedUuid','Unauthorized\x20attempt\x20to\x20get\x20messages','uuid-random','sendPortfolioTelegram','token','5\x20min','/:bot/support','all','handshake','length','store-settings','login','Login\x20rejected','manual','2FA\x20login\x20required','auto','connected','started','3000','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','push','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','whitelistEnabled','21WbvrMi','socket.io','storeConfiguration','entries','referer','Your\x20installation\x20is\x20already\x20up\x20to\x20date','static','publicKey','set','server','uuid','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','show','/:bot','starting\x20new\x20bot\x20|\x20Bot\x20','onText','telegramIpApproval','temporary\x20access\x20timeout','then','<b>Balance\x20Bot\x20Status:</b>\x0a','loginRequired','crypto','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','stop','botmanager','map','pidExpireLogin','isIPv4MappedAddress','init','temporary\x20token\x20generated','find','apiKey','status','1000','getTime','access\x20timeout','404\x20Not\x20Found','disabled','place-order','listen','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','generateKeyPairAsync','path','accept','createServer','split','Invalid\x20Telegram\x20token','RSA','data','auth','sendFile','telegramEnabled','stopPolling','Allow\x20login\x20from\x20IP\x20address\x20<b>','telegramUsername','password','bb-settings.json','bots','-results.json','</b>\x20?','store-configuration','https://api.ipify.org?format=json','\x20to\x20','temporary\x20access\x20rejected','updatebotmanager','botname','type','access','delete-alerts','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','randomFillSync','reject','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getSeconds','getUTCHours','host','logged\x20out','temporary\x20access\x20not\x20allowed','186EsbyHW','Unauthorized\x20login\x20attempt\x20(timeout)','get-messages','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','catch','exit','page','lastmsgemitted','slice','constructor','5920936LfueHc','use','startsWith','exp','*$1*','telegramChatId','axios','Notifications\x20enabled','Server','Notifications\x20enabled\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','restart','removeAllListeners','lowdb/adapters/FileSync','-config.json','jsonwebtoken','title','bot','copyFileSync','sign','port','default','analytics','Bot\x20Mgr\x20>\x20','env','hex','inherit','/help\x20-\x20show\x20available\x20commands\x0a','disabled\x20Bot\x20','login\x20not\x20required','\x20|\x20','toString','\x20mode','/on\x20-\x20start\x20bot(s)\x0a','logout','getHours','live','User\x20has\x20been\x20validated','disconnect','bot-','function','expiry','deleteHistoryAlerts','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','reason','::1','connection','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','All\x20bots','************','chat','bot.js','toggle-bot-mode','headless','enabled','get-starting-balances','allow','bb-config.json','track'];_0x3484=function(){return _0x5bbc41;};return _0x3484();}function cleanSettings(){const _0x2e3ad9=_0x182301;let _0x254475=settings;return settings['telegramToken']&&settings[_0x2e3ad9(0x261)]!=''&&(_0x254475={..._0x254475,'telegramToken':_0x2e3ad9(0x250)}),settings[_0x2e3ad9(0x28d)]&&settings[_0x2e3ad9(0x28d)]!=''&&(_0x254475={..._0x254475,'bbPassword':_0x2e3ad9(0x250)}),_0x254475;}function updateBB(){const _0x42e771=_0x182301;installingUpdate=!![],config[_0x42e771(0x291)](_0xda0d59=>{const _0x25a701=_0x42e771;restartBot(_0xda0d59[_0x25a701(0x2ba)]);}),process[_0x42e771(0x17c)]({'update':!![]},_0x2dfe76=>{});}function startBot(_0x23761e,_0x2e2fec,_0x2fb0c8){const _0x10f67a=_0x182301;let _0x5d9932=![];const _0x4ac2ad=_0x23761e[0x0];_0x2e2fec={..._0x2e2fec,'stdio':[_0x10f67a(0x238),'inherit','inherit',_0x10f67a(0x2b7)]},pid[_0x4ac2ad]=childProcess['fork'](botfile,_0x23761e,_0x2e2fec),pid[_0x4ac2ad]['on'](_0x10f67a(0x27d),_0x146735=>{const _0x1d108d=_0x10f67a;switch(Object['keys'](_0x146735)[0x0]){case'botname':updateBotName(_0x4ac2ad,_0x146735[_0x1d108d(0x204)]);break;case _0x1d108d(0x203):updateBotManager();break;case _0x1d108d(0x1e3):updateStatus(_0x4ac2ad,_0x146735[_0x1d108d(0x1e3)]);break;case _0x1d108d(0x242):updateLive(_0x4ac2ad,_0x146735[_0x1d108d(0x242)]);break;case _0x1d108d(0x1bd):updateLive(_0x4ac2ad,_0x146735['started']),io['to'](_0x4ac2ad)[_0x1d108d(0x285)](_0x1d108d(0x1e3),{'access':{'allow':![],'reason':_0x1d108d(0x2b0),'token':null}});break;case _0x1d108d(0x1da):_0x146735[_0x1d108d(0x1da)]==_0x1d108d(0x229)&&restartBot(_0x4ac2ad);_0x146735[_0x1d108d(0x1da)]==_0x1d108d(0x2b2)&&toggleBot(_0x4ac2ad,'disabled','stopped');break;case'telegram':sendTelegram(_0x4ac2ad,_0x146735[_0x1d108d(0x18f)]);break;case _0x1d108d(0x288):sendTelegramMsg(_0x146735[_0x1d108d(0x288)]);break;case _0x1d108d(0x246):io['to'](_0x4ac2ad)[_0x1d108d(0x285)](_0x146735[_0x1d108d(0x246)],_0x146735['args']);break;}}),pid[_0x4ac2ad]['on'](_0x10f67a(0x159),function(_0x375fae){if(_0x5d9932)return;_0x5d9932=!![],_0x2fb0c8(_0x375fae);}),pid[_0x4ac2ad]['on'](_0x10f67a(0x219),function(_0x5886ab){const _0x5a3077=_0x10f67a;if(installingUpdate)return;if(_0x5d9932)return;_0x5d9932=!![],_0x2fb0c8(null);const _0x47993f=dbConfig[_0x5a3077(0x28a)](_0x5a3077(0x1fc))['find']({'botID':_0x4ac2ad})[_0x5a3077(0x158)]();_0x47993f&&(_0x47993f[_0x5a3077(0x1e3)]=='enabled'||_0x47993f[_0x5a3077(0x1e3)]==_0x5a3077(0x2a2))&&(updateLive(_0x4ac2ad,_0x5a3077(0x298)),logging('restarting\x20Bot\x20'+_0x4ac2ad),startBot([_0x4ac2ad,userID],{'cwd':bbpath},function(_0x362678){if(_0x362678)logging(_0x362678);}));});}function stopBot(_0x465950){const _0x5de23c=_0x182301;getClientsWithBotID(_0x465950)[_0x5de23c(0x291)](_0x252b17=>{const _0x57f7cc=_0x5de23c;getSocket(_0x252b17['id'])[_0x57f7cc(0x244)](!![]),removeClient(_0x252b17['id']);}),pid[_0x465950]&&(pid[_0x465950][_0x5de23c(0x2b2)](),pid[_0x465950]=null);}function restartBot(_0x2f8746){const _0x584162=_0x182301;if(pid[_0x2f8746])pid[_0x2f8746][_0x584162(0x2b2)]();}function addBot(){const _0x37a253=_0x182301;let _0x1e3f01;for(let _0x21a6bd=0x1;_0x21a6bd<0x3e9;_0x21a6bd++){_0x1e3f01=_0x21a6bd[_0x37a253(0x23d)]()[_0x37a253(0x272)](0x3,'0');let _0x87178f=config[_0x37a253(0x1e1)](_0x26f563=>_0x26f563['botID']==_0x1e3f01);if(!_0x87178f)break;}if(_0x1e3f01===_0x37a253(0x1e4)){logging(_0x37a253(0x216));return;}logging(_0x37a253(0x1d1)+_0x1e3f01),dbConfig[_0x37a253(0x28a)](_0x37a253(0x1fc))[_0x37a253(0x1c0)]({'botID':_0x1e3f01,'botname':_0x37a253(0x191)+_0x1e3f01,'status':_0x37a253(0x2a2),'live':''})[_0x37a253(0x188)](),startBot([_0x1e3f01,userID],{'cwd':bbpath},function(_0x573542){if(_0x573542)logging(_0x573542);}),config=getConfiguration(),io['to'](_0x37a253(0x1db))[_0x37a253(0x285)](_0x37a253(0x1fc),config);}function deleteBot(_0x31fe28){const _0x5e7596=_0x182301;getClientsWithBotID(_0x31fe28)[_0x5e7596(0x291)](_0x39b2d4=>{getSocket(_0x39b2d4['id'])['disconnect'](!![]),removeClient(_0x39b2d4['id']);}),dbConfig[_0x5e7596(0x28a)](_0x5e7596(0x1fc))[_0x5e7596(0x156)]({'botID':_0x31fe28})[_0x5e7596(0x188)](),logging(_0x5e7596(0x18d)+_0x31fe28),stopBot(_0x31fe28);try{fs[_0x5e7596(0x14b)](path[_0x5e7596(0x1a3)](configpath,_0x5e7596(0x245)+_0x31fe28+_0x5e7596(0x22c))),fs['unlinkSync'](path[_0x5e7596(0x1a3)](configpath,_0x5e7596(0x245)+_0x31fe28+_0x5e7596(0x2be))),fs[_0x5e7596(0x14b)](path[_0x5e7596(0x1a3)](configpath,'bot-'+_0x31fe28+_0x5e7596(0x26a))),fs['unlinkSync'](path[_0x5e7596(0x1a3)](configpath,_0x5e7596(0x245)+_0x31fe28+_0x5e7596(0x1fd)));}catch(_0x2b4e41){if(_0x2b4e41)logging(_0x5e7596(0x2c0),_0x2b4e41);}config=getConfiguration(),io['to'](_0x5e7596(0x1db))[_0x5e7596(0x285)]('bots',config);}function toggleBot(_0x2c5ac2,_0x585094,_0xd91118){const _0x2f7d4c=_0x182301;dbConfig['get'](_0x2f7d4c(0x1fc))[_0x2f7d4c(0x1e1)]({'botID':_0x2c5ac2})['assign']({'status':_0x585094})[_0x2f7d4c(0x26b)]({'live':_0xd91118})['write']();if(_0x585094=='enabled'||_0x585094==_0x2f7d4c(0x2a2))logging(_0x2f7d4c(0x186)+_0x2c5ac2),startBot([_0x2c5ac2,userID],{'cwd':bbpath},function(_0x1f8387){if(_0x1f8387)logging(_0x1f8387);});else(_0x585094==_0x2f7d4c(0x1e8)||_0x585094==_0x2f7d4c(0x29d))&&(logging(_0x2f7d4c(0x23a)+_0x2c5ac2),stopBot(_0x2c5ac2));config=getConfiguration(),io['to'](_0x2f7d4c(0x1db))['emit']('bots',config);}function toggleStatus(_0x3c4c2c){const _0x43069c=_0x182301;let _0x38380d=dbConfig[_0x43069c(0x28a)]('bots')[_0x43069c(0x1e1)]({'botID':_0x3c4c2c})['value'](),_0x5a10eb;if(_0x38380d['status']==='enabled')_0x5a10eb=_0x43069c(0x1e8);else{if(_0x38380d[_0x43069c(0x1e3)]==='new')_0x5a10eb='new-disabled';else{if(_0x38380d[_0x43069c(0x1e3)]==='new-disabled')_0x5a10eb='new';else{if(_0x38380d[_0x43069c(0x1e3)]===_0x43069c(0x1e8))_0x5a10eb=_0x43069c(0x255);}}}return _0x5a10eb;}function updateStatus(_0x4fbfb1,_0x1a1c4d){const _0x3e55fa=_0x182301;dbConfig[_0x3e55fa(0x28a)](_0x3e55fa(0x1fc))['find']({'botID':_0x4fbfb1})['assign']({'status':_0x1a1c4d})['write'](),config=getConfiguration(),io['to'](_0x3e55fa(0x1db))[_0x3e55fa(0x285)](_0x3e55fa(0x1fc),config);}function updateLive(_0x3f0248,_0x24095f){const _0x416c00=_0x182301;dbConfig[_0x416c00(0x28a)](_0x416c00(0x1fc))[_0x416c00(0x1e1)]({'botID':_0x3f0248})[_0x416c00(0x26b)]({'live':_0x24095f})[_0x416c00(0x188)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x416c00(0x1fc),config);}function updateBotName(_0x3c8b9c,_0x25330c){const _0x2782bc=_0x182301;dbConfig['get'](_0x2782bc(0x1fc))[_0x2782bc(0x1e1)]({'botID':_0x3c8b9c})[_0x2782bc(0x26b)]({'botname':_0x25330c})[_0x2782bc(0x188)](),config=getConfiguration(),io['to']('botmanager')[_0x2782bc(0x285)](_0x2782bc(0x1fc),config);}function updateBotManager(){const _0x1768c8=_0x182301;config=getConfiguration(),io['to']('botmanager')['emit'](_0x1768c8(0x1fc),config);}function toggleBotMode(_0x5e10be){const _0x40fb51=_0x182301;if(pid[_0x5e10be])pid[_0x5e10be][_0x40fb51(0x17c)]({'function':_0x40fb51(0x28b),'args':null});else{const _0x352539=configpath+_0x40fb51(0x245)+_0x5e10be+_0x40fb51(0x22c),_0x25e986=fs[_0x40fb51(0x299)](_0x352539),_0x29dec4=JSON[_0x40fb51(0x18c)](_0x25e986),_0x32a66c=_0x29dec4[_0x40fb51(0x22f)][0x0][_0x40fb51(0x254)];_0x29dec4[_0x40fb51(0x22f)][0x0][_0x40fb51(0x254)]=!_0x32a66c;const _0x29a995=JSON['stringify'](_0x29dec4,null,0x2);fs[_0x40fb51(0x148)](_0x352539,_0x29a995),config=getConfiguration(),io['to'](_0x40fb51(0x1db))[_0x40fb51(0x285)](_0x40fb51(0x1fc),config);}}function telegramError(_0x5b35c5){const _0x3e25f3=_0x182301;console[_0x3e25f3(0x274)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x354d00){const _0xba9dad=_0x182301;if(_0x354d00[_0xba9dad(0x1a1)]['username']!=settings[_0xba9dad(0x1f9)]&&'@'+_0x354d00[_0xba9dad(0x1a1)][_0xba9dad(0x1a6)]!=settings['telegramUsername'])return tgBot[_0xba9dad(0x157)](_0x354d00[_0xba9dad(0x251)]['id'],_0xba9dad(0x24e),{'parse_mode':'HTML'})[_0xba9dad(0x218)](_0x2dfe19=>{telegramError(_0x2dfe19);}),![];return!![];}async function initTelegram(){const _0x527541=_0x182301;if(tgBot)tgBot[_0x527541(0x1f7)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x5dde5f='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5dde5f+='\x0a',_0x5dde5f+=_0x527541(0x281),_0x5dde5f+='/disable\x20-\x20disable\x20notifications\x0a',_0x5dde5f+=_0x527541(0x27e),_0x5dde5f+=_0x527541(0x269),_0x5dde5f+=_0x527541(0x23f),_0x5dde5f+=_0x527541(0x1a5),_0x5dde5f+=_0x527541(0x1bf),_0x5dde5f+=_0x527541(0x168),_0x5dde5f+=_0x527541(0x260),_0x5dde5f+=_0x527541(0x29e),_0x5dde5f+=_0x527541(0x265),_0x5dde5f+=_0x527541(0x239);let _0x5cd623='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5cd623+='\x0a',_0x5cd623+=_0x5dde5f,tgBot[_0x527541(0x1d2)](/\/start/,_0x559854=>{const _0x5b6626=_0x527541;if(!validateTelegram(_0x559854))return;if(settings['telegramChatId']!=_0x559854[_0x5b6626(0x251)]['id'])updateSetting(_0x5b6626(0x223),_0x559854[_0x5b6626(0x251)]['id']);updateSetting(_0x5b6626(0x1f6),!![]),tgBot[_0x5b6626(0x157)](_0x559854[_0x5b6626(0x251)]['id'],_0x5cd623)[_0x5b6626(0x218)](_0x4f2177=>{telegramError(_0x4f2177);});}),tgBot[_0x527541(0x1d2)](/\/enable/,_0x52c829=>{const _0x1e4b6c=_0x527541;if(!validateTelegram(_0x52c829))return;if(settings[_0x1e4b6c(0x223)]!=_0x52c829['chat']['id'])updateSetting(_0x1e4b6c(0x223),_0x52c829[_0x1e4b6c(0x251)]['id']);updateSetting(_0x1e4b6c(0x1f6),!![]),tgBot[_0x1e4b6c(0x157)](_0x52c829[_0x1e4b6c(0x251)]['id'],_0x1e4b6c(0x225))['catch'](_0x47b31d=>{telegramError(_0x47b31d);});}),tgBot[_0x527541(0x1d2)](/\/config/,async _0x5bb73c=>{const _0x4019a5=_0x527541;if(!validateTelegram(_0x5bb73c))return;tgBot['removeListener'](_0x4019a5(0x162)),tgBot[_0x4019a5(0x157)](_0x5bb73c['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x4019a5(0x296),'callback_data':_0x4019a5(0x1a2)},{'text':_0x4019a5(0x14e),'callback_data':_0x4019a5(0x28f)},{'text':_0x4019a5(0x2bc),'callback_data':_0x4019a5(0x1b3)}]]}})[_0x4019a5(0x218)](_0x5ca000=>{telegramError(_0x5ca000);}),tgBot['on']('callback_query',async _0x257859=>{const _0x4b971a=_0x4019a5,_0x2539c0=_0x257859[_0x4b971a(0x1f3)],_0x5501ec=_0x257859[_0x4b971a(0x27d)];tgBot['answerCallbackQuery'](_0x257859['id'])[_0x4b971a(0x1d5)](async()=>{const _0x181f4d=_0x4b971a;_0x2539c0=='orders'&&(updateSetting('telegramEvents','orders'),updateSetting(_0x181f4d(0x1f6),!![]),await tgBot['sendMessage'](_0x5501ec[_0x181f4d(0x251)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x181f4d(0x218)](_0x28ee44=>{telegramError(_0x28ee44);}));_0x2539c0==_0x181f4d(0x28f)&&(updateSetting(_0x181f4d(0x17e),_0x181f4d(0x28f)),updateSetting(_0x181f4d(0x1f6),!![]),await tgBot['sendMessage'](_0x5501ec['chat']['id'],_0x181f4d(0x20d))[_0x181f4d(0x218)](_0x4fbb73=>{telegramError(_0x4fbb73);}));_0x2539c0==_0x181f4d(0x1b3)&&(updateSetting(_0x181f4d(0x17e),_0x181f4d(0x1b3)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x5501ec[_0x181f4d(0x251)]['id'],_0x181f4d(0x2a8))[_0x181f4d(0x218)](_0xf728c5=>{telegramError(_0xf728c5);}));if(!settings[_0x181f4d(0x223)])tgBot[_0x181f4d(0x157)](_0x5501ec[_0x181f4d(0x251)]['id'],_0x181f4d(0x25c))[_0x181f4d(0x218)](_0x5ac4d8=>{telegramError(_0x5ac4d8);});}),tgBot[_0x4b971a(0x173)]('callback_query');});}),tgBot[_0x527541(0x1d2)](/\/status/,_0x40c938=>{const _0x22cdf4=_0x527541;if(!validateTelegram(_0x40c938))return;const _0xec6e41=getBotsWithMode();let _0x59c0bd=_0x22cdf4(0x1d6);config[_0x22cdf4(0x291)](_0x42da7f=>{const _0x49156f=_0x22cdf4,_0x2e5f83=_0xec6e41[_0x49156f(0x1e1)](_0x4ba0e8=>_0x4ba0e8[_0x49156f(0x2ba)]==_0x42da7f[_0x49156f(0x2ba)])[_0x49156f(0x177)];_0x59c0bd+='Bot\x20'+_0x42da7f[_0x49156f(0x2ba)]+':\x20'+_0x42da7f[_0x49156f(0x1e3)]+'\x20|\x20'+_0x2e5f83+'\x20|\x20'+_0x42da7f[_0x49156f(0x242)]+'\x0a';}),_0x59c0bd+='\x0a',_0x59c0bd+=_0x22cdf4(0x19b),_0x59c0bd+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x22cdf4(0x227),_0x59c0bd+=settings[_0x22cdf4(0x1f6)]?settings[_0x22cdf4(0x17e)]=='all'?_0x22cdf4(0x20c):'Notifications\x20types:\x20'+settings[_0x22cdf4(0x17e)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x40c938[_0x22cdf4(0x251)]['id'],_0x59c0bd,{'parse_mode':_0x22cdf4(0x19d)})[_0x22cdf4(0x218)](_0x2fc7b6=>{telegramError(_0x2fc7b6);});}),tgBot[_0x527541(0x1d2)](/\/restart/,_0x590476=>{const _0x2fefde=_0x527541;if(!validateTelegram(_0x590476))return;tgBot[_0x2fefde(0x173)](_0x2fefde(0x162));const _0xc0e764=getEnabledBots();if(_0xc0e764[_0x2fefde(0x1b5)]==0x0)tgBot[_0x2fefde(0x157)](_0x590476[_0x2fefde(0x251)]['id'],_0x2fefde(0x273))['catch'](_0xe3e4ef=>{telegramError(_0xe3e4ef);});else{if(_0xc0e764[_0x2fefde(0x1b5)]>0x1)_0xc0e764[_0x2fefde(0x1c0)]({'botID':_0x2fefde(0x1b3)});let _0x52f56b=[],_0x4dedde=[];const _0x1810c3=_0xc0e764[_0x2fefde(0x1b5)]%0x4==0x0||_0xc0e764[_0x2fefde(0x1b5)]%0x4==0x3||_0xc0e764[_0x2fefde(0x1b5)]%0x3==0x1?0x4:0x3;let _0x12a52d=0x0;_0xc0e764[_0x2fefde(0x291)]((_0x4f9aca,_0x18cc9a)=>{const _0x9533cd=_0x2fefde;if(_0x18cc9a%_0x1810c3==0x0)_0x4dedde=[];_0x4dedde['push']({'text':_0x4f9aca[_0x9533cd(0x2ba)]==_0x9533cd(0x1b3)?_0x9533cd(0x24f):_0x9533cd(0x191)+_0x4f9aca[_0x9533cd(0x2ba)],'callback_data':_0x4f9aca[_0x9533cd(0x2ba)]}),_0x18cc9a%_0x1810c3==0x0&&(_0x52f56b[_0x12a52d]=_0x4dedde,_0x12a52d++);}),tgBot[_0x2fefde(0x157)](_0x590476[_0x2fefde(0x251)]['id'],_0x2fefde(0x297),{'reply_markup':{'inline_keyboard':_0x52f56b}})[_0x2fefde(0x218)](_0x23029f=>{telegramError(_0x23029f);}),tgBot['on'](_0x2fefde(0x162),async _0x34e930=>{const _0x4d458f=_0x2fefde,_0x1d3524=_0x34e930['data'],_0xcc6851=_0x34e930[_0x4d458f(0x27d)];tgBot[_0x4d458f(0x2b6)](_0x34e930['id'])[_0x4d458f(0x1d5)](async()=>{const _0xca1989=_0x4d458f;_0x1d3524==_0xca1989(0x1b3)?(tgBot['sendMessage'](_0xcc6851['chat']['id'],_0xca1989(0x2af))[_0xca1989(0x218)](_0x38dae7=>{telegramError(_0x38dae7);}),config[_0xca1989(0x291)](_0x5992ca=>{const _0x1ea81f=_0xca1989;restartBot(_0x5992ca[_0x1ea81f(0x2ba)]);})):(tgBot[_0xca1989(0x157)](_0xcc6851[_0xca1989(0x251)]['id'],_0xca1989(0x179)+_0x1d3524)[_0xca1989(0x218)](_0x23376e=>{telegramError(_0x23376e);}),restartBot(_0x1d3524));}),tgBot['removeListener'](_0x4d458f(0x162));});}}),tgBot['onText'](/\/on/,_0x4ce801=>{const _0x220d9e=_0x527541;if(!validateTelegram(_0x4ce801))return;tgBot[_0x220d9e(0x173)](_0x220d9e(0x162));const _0x4cd47c=getDisabledBots();if(_0x4cd47c[_0x220d9e(0x1b5)]==0x0)tgBot['sendMessage'](_0x4ce801['chat']['id'],_0x220d9e(0x290))[_0x220d9e(0x218)](_0x1ab840=>{telegramError(_0x1ab840);});else{if(_0x4cd47c['length']>0x1)_0x4cd47c[_0x220d9e(0x1c0)]({'botID':_0x220d9e(0x1b3)});let _0x941dc=[],_0x4fb8f7=[];const _0x55f9f8=_0x4cd47c[_0x220d9e(0x1b5)]%0x4==0x0||_0x4cd47c[_0x220d9e(0x1b5)]%0x4==0x3||_0x4cd47c[_0x220d9e(0x1b5)]%0x3==0x1?0x4:0x3;let _0x582cd3=0x0;_0x4cd47c[_0x220d9e(0x291)]((_0x28c89a,_0x283a9d)=>{const _0x2c3611=_0x220d9e;if(_0x283a9d%_0x55f9f8==0x0)_0x4fb8f7=[];_0x4fb8f7[_0x2c3611(0x1c0)]({'text':_0x28c89a[_0x2c3611(0x2ba)]==_0x2c3611(0x1b3)?_0x2c3611(0x24f):_0x2c3611(0x191)+_0x28c89a[_0x2c3611(0x2ba)],'callback_data':_0x28c89a['botID']}),_0x283a9d%_0x55f9f8==0x0&&(_0x941dc[_0x582cd3]=_0x4fb8f7,_0x582cd3++);}),tgBot['sendMessage'](_0x4ce801[_0x220d9e(0x251)]['id'],_0x220d9e(0x1d9),{'reply_markup':{'inline_keyboard':_0x941dc}})[_0x220d9e(0x218)](_0x553534=>{telegramError(_0x553534);}),tgBot['on']('callback_query',async _0x485ee5=>{const _0x377254=_0x220d9e,_0xec8b97=_0x485ee5['data'],_0x4b3c31=_0x485ee5[_0x377254(0x27d)];tgBot[_0x377254(0x2b6)](_0x485ee5['id'])[_0x377254(0x1d5)](async()=>{const _0x2fffa4=_0x377254;_0xec8b97==_0x2fffa4(0x1b3)?(tgBot[_0x2fffa4(0x157)](_0x4b3c31['chat']['id'],_0x2fffa4(0x19a))[_0x2fffa4(0x218)](_0x3dd9b5=>{telegramError(_0x3dd9b5);}),_0x4cd47c[_0x2fffa4(0x291)](_0x3256d5=>{const _0x4ec0d0=_0x2fffa4;if(_0x3256d5[_0x4ec0d0(0x2ba)]!='all')toggleBot(_0x3256d5[_0x4ec0d0(0x2ba)],toggleStatus(_0x3256d5[_0x4ec0d0(0x2ba)]),'stopped');})):(tgBot['sendMessage'](_0x4b3c31[_0x2fffa4(0x251)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0xec8b97)[_0x2fffa4(0x218)](_0x26675a=>{telegramError(_0x26675a);}),toggleBot(_0xec8b97,toggleStatus(_0xec8b97),_0x2fffa4(0x298)));}),tgBot[_0x377254(0x173)](_0x377254(0x162));});}}),tgBot['onText'](/\/off/,_0x32cdaf=>{const _0x241e7a=_0x527541;if(!validateTelegram(_0x32cdaf))return;tgBot[_0x241e7a(0x173)]('callback_query');const _0x41ace2=getEnabledBots();if(_0x41ace2[_0x241e7a(0x1b5)]==0x0)tgBot[_0x241e7a(0x157)](_0x32cdaf[_0x241e7a(0x251)]['id'],_0x241e7a(0x273))[_0x241e7a(0x218)](_0x2758b7=>{telegramError(_0x2758b7);});else{if(_0x41ace2['length']>0x1)_0x41ace2['push']({'botID':_0x241e7a(0x1b3)});let _0x7b0a39=[],_0x708945=[];const _0x50144d=_0x41ace2['length']%0x4==0x0||_0x41ace2[_0x241e7a(0x1b5)]%0x4==0x3||_0x41ace2[_0x241e7a(0x1b5)]%0x3==0x1?0x4:0x3;let _0x3ec1d5=0x0;_0x41ace2[_0x241e7a(0x291)]((_0x4c7ac1,_0x22bf8e)=>{const _0x48b376=_0x241e7a;if(_0x22bf8e%_0x50144d==0x0)_0x708945=[];_0x708945[_0x48b376(0x1c0)]({'text':_0x4c7ac1[_0x48b376(0x2ba)]=='all'?'All\x20bots':'Bot\x20'+_0x4c7ac1[_0x48b376(0x2ba)],'callback_data':_0x4c7ac1[_0x48b376(0x2ba)]}),_0x22bf8e%_0x50144d==0x0&&(_0x7b0a39[_0x3ec1d5]=_0x708945,_0x3ec1d5++);}),tgBot[_0x241e7a(0x157)](_0x32cdaf[_0x241e7a(0x251)]['id'],_0x241e7a(0x217),{'reply_markup':{'inline_keyboard':_0x7b0a39}})[_0x241e7a(0x218)](_0x19ed44=>{telegramError(_0x19ed44);}),tgBot['on'](_0x241e7a(0x162),async _0x1753d9=>{const _0x9dca5f=_0x241e7a,_0x212ad8=_0x1753d9[_0x9dca5f(0x1f3)],_0x3f0584=_0x1753d9[_0x9dca5f(0x27d)];tgBot['answerCallbackQuery'](_0x1753d9['id'])['then'](async()=>{const _0x1a87e6=_0x9dca5f;_0x212ad8==_0x1a87e6(0x1b3)?(tgBot[_0x1a87e6(0x157)](_0x3f0584[_0x1a87e6(0x251)]['id'],_0x1a87e6(0x2c1))[_0x1a87e6(0x218)](_0x2d1162=>{telegramError(_0x2d1162);}),_0x41ace2[_0x1a87e6(0x291)](_0x5d1164=>{const _0x2c1265=_0x1a87e6;if(_0x5d1164[_0x2c1265(0x2ba)]!='all')toggleBot(_0x5d1164[_0x2c1265(0x2ba)],toggleStatus(_0x5d1164[_0x2c1265(0x2ba)]),_0x2c1265(0x298));})):(tgBot[_0x1a87e6(0x157)](_0x3f0584[_0x1a87e6(0x251)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x212ad8)['catch'](_0x236681=>{telegramError(_0x236681);}),toggleBot(_0x212ad8,toggleStatus(_0x212ad8),'stopped'));}),tgBot[_0x9dca5f(0x173)]('callback_query');});}}),tgBot[_0x527541(0x1d2)](/\/portfolio/,_0x5ab75f=>{const _0x3a9863=_0x527541;if(!validateTelegram(_0x5ab75f))return;tgBot[_0x3a9863(0x173)]('callback_query');const _0x673539=getEnabledBots();if(_0x673539['length']==0x0)tgBot[_0x3a9863(0x157)](_0x5ab75f[_0x3a9863(0x251)]['id'],_0x3a9863(0x273))[_0x3a9863(0x218)](_0xfd9b1e=>{telegramError(_0xfd9b1e);});else{if(_0x673539[_0x3a9863(0x1b5)]>0x1){let _0x4855b1=[],_0x23cce1=[];const _0x4e994a=_0x673539[_0x3a9863(0x1b5)]%0x4==0x0||_0x673539['length']%0x4==0x3||_0x673539[_0x3a9863(0x1b5)]%0x3==0x1?0x4:0x3;let _0xbc747e=0x0;_0x673539[_0x3a9863(0x291)]((_0x16a649,_0x12b61b)=>{const _0x38efcb=_0x3a9863;if(_0x12b61b%_0x4e994a==0x0)_0x23cce1=[];_0x23cce1['push']({'text':'Bot\x20'+_0x16a649['botID'],'callback_data':_0x16a649[_0x38efcb(0x2ba)]}),_0x12b61b%_0x4e994a==0x0&&(_0x4855b1[_0xbc747e]=_0x23cce1,_0xbc747e++);}),tgBot[_0x3a9863(0x157)](_0x5ab75f[_0x3a9863(0x251)]['id'],_0x3a9863(0x19c),{'reply_markup':{'inline_keyboard':_0x4855b1}})[_0x3a9863(0x218)](_0x1c7dd1=>{telegramError(_0x1c7dd1);}),tgBot['on']('callback_query',async _0x12e777=>{const _0x501a3e=_0x3a9863,_0x19dbaf=_0x12e777['data'],_0x424dd9=_0x12e777[_0x501a3e(0x27d)];tgBot[_0x501a3e(0x2b6)](_0x12e777['id'])['then'](async()=>{const _0x932f6a=_0x501a3e;if(pid[_0x19dbaf])pid[_0x19dbaf]['send']({'function':_0x932f6a(0x1af),'args':null});}),tgBot[_0x501a3e(0x173)](_0x501a3e(0x162));});}else{const _0x2e4a26=_0x673539[0x0][_0x3a9863(0x2ba)];if(pid[_0x2e4a26])pid[_0x2e4a26][_0x3a9863(0x17c)]({'function':_0x3a9863(0x1af),'args':null});}}}),tgBot[_0x527541(0x1d2)](/\/update/,async _0x4a2d87=>{const _0x1cf8ba=_0x527541;if(!validateTelegram(_0x4a2d87))return;tgBot[_0x1cf8ba(0x173)](_0x1cf8ba(0x162)),await getMessages();if(!updateAvailable)tgBot[_0x1cf8ba(0x157)](_0x4a2d87[_0x1cf8ba(0x251)]['id'],_0x1cf8ba(0x1c8))[_0x1cf8ba(0x218)](_0x32cc63=>{telegramError(_0x32cc63);});else!validInstallation?tgBot[_0x1cf8ba(0x157)](_0x4a2d87['chat']['id'],_0x1cf8ba(0x1c1))[_0x1cf8ba(0x218)](_0x2f6e1e=>{telegramError(_0x2f6e1e);}):(tgBot[_0x1cf8ba(0x157)](_0x4a2d87['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1cf8ba(0x1a8),'callback_data':_0x1cf8ba(0x152)},{'text':'No','callback_data':'no'}]]}})[_0x1cf8ba(0x218)](_0x318d87=>{telegramError(_0x318d87);}),tgBot['on'](_0x1cf8ba(0x162),async _0x5c21fa=>{const _0x3a664c=_0x1cf8ba,_0x461085=_0x5c21fa['data'],_0x32027c=_0x5c21fa[_0x3a664c(0x27d)];tgBot['answerCallbackQuery'](_0x5c21fa['id'])[_0x3a664c(0x1d5)](async()=>{const _0x1524a0=_0x3a664c;_0x461085==_0x1524a0(0x152)&&(await tgBot[_0x1524a0(0x157)](_0x32027c[_0x1524a0(0x251)]['id'],_0x1524a0(0x280))[_0x1524a0(0x218)](_0xf411f6=>{telegramError(_0xf411f6);}),updateBB());_0x461085=='no'&&await tgBot[_0x1524a0(0x157)](_0x32027c[_0x1524a0(0x251)]['id'],_0x1524a0(0x208))[_0x1524a0(0x218)](_0x30967e=>{telegramError(_0x30967e);});if(!settings['telegramChatId'])tgBot[_0x1524a0(0x157)](_0x32027c['chat']['id'],_0x1524a0(0x25c))['catch'](_0x59963f=>{telegramError(_0x59963f);});}),tgBot[_0x3a664c(0x173)]('callback_query');}));}),tgBot[_0x527541(0x1d2)](/\/toggle/,_0x23ce34=>{const _0x5bcc2f=_0x527541;if(!validateTelegram(_0x23ce34))return;tgBot[_0x5bcc2f(0x173)](_0x5bcc2f(0x162));const _0x117450=getBotsWithMode();if(_0x117450[_0x5bcc2f(0x1b5)]==0x0)tgBot['sendMessage'](_0x23ce34[_0x5bcc2f(0x251)]['id'],_0x5bcc2f(0x273))[_0x5bcc2f(0x218)](_0x2c8387=>{telegramError(_0x2c8387);});else{let _0x172351=[],_0x388f65=[];const _0x205dd9=0x2;let _0x35425f=0x0;_0x117450['forEach']((_0x29300e,_0x4c17fc)=>{const _0x317eff=_0x5bcc2f;if(_0x4c17fc%_0x205dd9==0x0)_0x388f65=[];_0x388f65['push']({'text':'Bot\x20'+_0x29300e[_0x317eff(0x2ba)]+'\x20('+_0x29300e[_0x317eff(0x177)]+')','callback_data':_0x29300e['botID']}),_0x4c17fc%_0x205dd9==0x0&&(_0x172351[_0x35425f]=_0x388f65,_0x35425f++);}),tgBot[_0x5bcc2f(0x157)](_0x23ce34[_0x5bcc2f(0x251)]['id'],_0x5bcc2f(0x1a4),{'reply_markup':{'inline_keyboard':_0x172351}})[_0x5bcc2f(0x218)](_0x2ddad4=>{telegramError(_0x2ddad4);}),tgBot['on']('callback_query',async _0x37428c=>{const _0x141c55=_0x5bcc2f,_0x24fe18=_0x37428c['data'],_0x2fa579=_0x37428c[_0x141c55(0x27d)];tgBot['answerCallbackQuery'](_0x37428c['id'])[_0x141c55(0x1d5)](async()=>{const _0x3f2f3c=_0x141c55,_0x1d4e62=_0x117450[_0x3f2f3c(0x1e1)](_0x5015bd=>_0x5015bd[_0x3f2f3c(0x2ba)]==_0x24fe18),_0x2d3fbe=_0x1d4e62[_0x3f2f3c(0x177)]==_0x3f2f3c(0x1bb)?_0x3f2f3c(0x1b9):_0x3f2f3c(0x1bb);tgBot[_0x3f2f3c(0x157)](_0x2fa579[_0x3f2f3c(0x251)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x24fe18+_0x3f2f3c(0x201)+_0x2d3fbe+_0x3f2f3c(0x23e))[_0x3f2f3c(0x218)](_0x183046=>{telegramError(_0x183046);}),toggleBotMode(_0x24fe18);}),tgBot[_0x141c55(0x173)](_0x141c55(0x162));});}}),tgBot[_0x527541(0x1d2)](/\/names/,_0x5ddc01=>{const _0x4f3ee9=_0x527541;if(!validateTelegram(_0x5ddc01))return;let _0x36c784='';config[_0x4f3ee9(0x291)](_0xc1203c=>{const _0x35b122=_0x4f3ee9;_0x36c784+=_0x35b122(0x191)+_0xc1203c['botID']+':\x20'+_0xc1203c[_0x35b122(0x204)]+'\x0a';}),tgBot[_0x4f3ee9(0x157)](_0x5ddc01['chat']['id'],_0x36c784,{'parse_mode':'HTML'})[_0x4f3ee9(0x218)](_0x517e64=>{telegramError(_0x517e64);});}),tgBot['onText'](/\/disable/,_0xc756ee=>{const _0x1865f6=_0x527541;if(!validateTelegram(_0xc756ee))return;tgBot[_0x1865f6(0x157)](_0xc756ee[_0x1865f6(0x251)]['id'],_0x1865f6(0x195))[_0x1865f6(0x218)](_0x3ec5de=>{telegramError(_0x3ec5de);}),updateSetting(_0x1865f6(0x1f6),![]);}),tgBot[_0x527541(0x1d2)](/\/help/,_0x397804=>{const _0x468100=_0x527541;if(!validateTelegram(_0x397804))return;tgBot[_0x468100(0x157)](_0x397804[_0x468100(0x251)]['id'],_0x5dde5f)[_0x468100(0x218)](_0x2b5157=>{telegramError(_0x2b5157);});}),tgBot['on'](_0x527541(0x147),_0x7e91a2=>{const _0x46c930=_0x527541;_0x7e91a2[_0x46c930(0x23d)]()[_0x46c930(0x2b5)](_0x46c930(0x1e7))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x46c930(0x1f7)](),tgBot=null,io['to'](_0x46c930(0x1db))[_0x46c930(0x285)]('notification',_0x46c930(0x1f1)));}),process[_0x527541(0x172)](_0x527541(0x2bd),()=>{const _0x233314=_0x527541;if(tgBot)tgBot[_0x233314(0x1f7)]();process['exit'](0x1);}),process[_0x527541(0x172)](_0x527541(0x27c),()=>{const _0x3ec7f9=_0x527541;if(tgBot)tgBot[_0x3ec7f9(0x1f7)]();process[_0x3ec7f9(0x219)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x45cc2e,_0x4b4229){const _0x44c6d4=_0x182301;if(settings[_0x44c6d4(0x1f6)]){if(settings[_0x44c6d4(0x17e)]=='all'||(_0x4b4229[_0x44c6d4(0x205)]==_0x44c6d4(0x159)||_0x4b4229[_0x44c6d4(0x205)]==_0x44c6d4(0x171))&&settings[_0x44c6d4(0x17e)]=='alerts'||_0x4b4229[_0x44c6d4(0x205)]=='order'&&settings[_0x44c6d4(0x17e)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x4b4229['showname'])tgBot[_0x44c6d4(0x157)](settings[_0x44c6d4(0x223)],_0x4b4229[_0x44c6d4(0x204)]+_0x44c6d4(0x1ab)+_0x4b4229[_0x44c6d4(0x2b8)])[_0x44c6d4(0x218)](_0x23e585=>{telegramError(_0x23e585);});else tgBot[_0x44c6d4(0x157)](settings[_0x44c6d4(0x223)],_0x44c6d4(0x191)+_0x45cc2e+'\x20>\x20'+_0x4b4229['event'])['catch'](_0x32e988=>{telegramError(_0x32e988);});}}}}async function sendTelegramMsg(_0x33b545,_0x5b173d=_0x182301(0x19d)){const _0x1c58cf=_0x182301;return settings[_0x1c58cf(0x1f6)]&&tgBot&&settings['telegramChatId']?(await tgBot['sendMessage'](settings[_0x1c58cf(0x223)],_0x33b545,{'parse_mode':_0x5b173d})[_0x1c58cf(0x218)](_0x5cc89e=>{telegramError(_0x5cc89e);}),!![]):![];}function getDeviceWithIp(_0x15bd16){const _0x424e7f=_0x182301;return devices[_0x424e7f(0x1e1)](_0x89595d=>_0x89595d['ip']===_0x15bd16);}function temporaryAccess2FA(_0x50f8a0,_0x2764f1){const _0x148e6e=_0x182301;let _0x57c205=new Date(),_0xc237f0=![];if(lastIpApproval){if(_0x57c205-lastIpApproval<0x1388)_0xc237f0=!![];}lastIpApproval=new Date();if(_0xc237f0)return;tgBot&&settings[_0x148e6e(0x223)]&&(tgBot[_0x148e6e(0x173)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x2764f1)[_0x148e6e(0x1cf)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x148e6e(0x1b1),'callback_data':'5'},{'text':_0x148e6e(0x199),'callback_data':'15'},{'text':_0x148e6e(0x2c2),'callback_data':'30'},{'text':_0x148e6e(0x20a),'callback_data':_0x148e6e(0x20a)}]]}})[_0x148e6e(0x218)](_0x5896b8=>{telegramError(_0x5896b8);}),tgBot['on'](_0x148e6e(0x162),async _0xd1556e=>{const _0x8f5e42=_0x148e6e,_0x3e2008=_0xd1556e[_0x8f5e42(0x1f3)],_0x253b17=_0xd1556e[_0x8f5e42(0x27d)];tgBot[_0x8f5e42(0x2b6)](_0xd1556e['id'])['then'](async()=>{const _0x12a174=_0x8f5e42;devices[_0x50f8a0]['telegramIpApproval']={'clientip':_0x2764f1,'timestamp':new Date()['getTime'](),'expiry':_0x3e2008},_0x3e2008!='reject'?(await tgBot[_0x12a174(0x157)](_0x253b17[_0x12a174(0x251)]['id'],_0x12a174(0x193)+_0x3e2008+'\x20minutes',{'parse_mode':_0x12a174(0x19d)})[_0x12a174(0x218)](_0x9d3008=>{telegramError(_0x9d3008);}),io['to'](_0x50f8a0)[_0x12a174(0x285)](_0x12a174(0x1e3),{'access':{'allow':![],'reason':_0x12a174(0x2b0),'token':null}})):(await tgBot[_0x12a174(0x157)](_0x253b17[_0x12a174(0x251)]['id'],_0x12a174(0x187))[_0x12a174(0x218)](_0x473f23=>{telegramError(_0x473f23);}),io['to'](_0x50f8a0)[_0x12a174(0x285)]('status',{'access':{'allow':![],'reason':_0x12a174(0x202),'token':null}}));}),tgBot[_0x8f5e42(0x173)](_0x8f5e42(0x162));}));}function loginAccess2FA(_0x2385e1,_0x1cf6d2){const _0x554f54=_0x182301;tgBot&&settings['telegramChatId']&&(tgBot[_0x554f54(0x173)](_0x554f54(0x162)),tgBot[_0x554f54(0x157)](settings[_0x554f54(0x223)],_0x554f54(0x1f8)+normalizeIP(_0x1cf6d2)[_0x554f54(0x1cf)]+_0x554f54(0x1fe),{'parse_mode':_0x554f54(0x19d),'reply_markup':{'inline_keyboard':[[{'text':_0x554f54(0x1ee),'callback_data':loginExpiry},{'text':_0x554f54(0x20a),'callback_data':_0x554f54(0x20a)}]]}})[_0x554f54(0x218)](_0x3bc0b0=>{telegramError(_0x3bc0b0);}),tgBot['on']('callback_query',async _0x5b94b4=>{const _0x1717e5=_0x554f54,_0x3a68da=_0x5b94b4['data'],_0x30ea65=_0x5b94b4[_0x1717e5(0x27d)];tgBot['answerCallbackQuery'](_0x5b94b4['id'])[_0x1717e5(0x1d5)](async()=>{const _0x574eae=_0x1717e5;devices[_0x2385e1]['telegram2FaApproval']={'clientip':_0x1cf6d2,'timestamp':new Date()[_0x574eae(0x1e5)](),'expiry':_0x3a68da},_0x3a68da!=_0x574eae(0x20a)?(await tgBot['sendMessage'](_0x30ea65[_0x574eae(0x251)]['id'],_0x574eae(0x28e),{'parse_mode':'HTML'})[_0x574eae(0x218)](_0x34a671=>{telegramError(_0x34a671);}),io['to'](_0x2385e1)[_0x574eae(0x285)](_0x574eae(0x1e3),{'access':{'allow':![],'reason':_0x574eae(0x2b0),'token':null}})):(await tgBot[_0x574eae(0x157)](_0x30ea65[_0x574eae(0x251)]['id'],_0x574eae(0x1b8))[_0x574eae(0x218)](_0x15e4fa=>{telegramError(_0x15e4fa);}),io['to'](_0x2385e1)['emit'](_0x574eae(0x1e3),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x1717e5(0x162));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x12d2dd=_0x182301;return dbConfig[_0x12d2dd(0x28a)](_0x12d2dd(0x1fc))[_0x12d2dd(0x2b1)](_0x12d2dd(0x2ba))[_0x12d2dd(0x15a)]({'status':'enabled'})[_0x12d2dd(0x158)]()||[];}function getDisabledBots(){const _0x1baea0=_0x182301;return dbConfig[_0x1baea0(0x28a)]('bots')[_0x1baea0(0x2b1)](_0x1baea0(0x2ba))[_0x1baea0(0x15a)]({'status':_0x1baea0(0x1e8)})[_0x1baea0(0x158)]()||[];}function getBotsWithMode(){const _0x292903=_0x182301,_0x4ad67f=dbConfig[_0x292903(0x28a)]('bots')[_0x292903(0x2b1)]('botID')[_0x292903(0x158)]()||[];return _0x4ad67f[_0x292903(0x291)](_0x1d4b04=>{const _0x3cb327=_0x292903,_0x5bc6c3=configpath+_0x3cb327(0x245)+_0x1d4b04[_0x3cb327(0x2ba)]+_0x3cb327(0x22c),_0x5343eb=fs[_0x3cb327(0x2ab)](_0x5bc6c3);if(_0x5343eb){const _0x53457a=fs[_0x3cb327(0x299)](_0x5bc6c3);try{const _0x5c8f9a=JSON[_0x3cb327(0x18c)](_0x53457a),_0x519fa0=_0x5c8f9a?_0x5c8f9a[_0x3cb327(0x22f)][0x0][_0x3cb327(0x254)]:![];_0x1d4b04['mode']=_0x519fa0?'auto':_0x3cb327(0x1b9);}catch(_0x1a4524){_0x1d4b04['mode']=_0x3cb327(0x1b9);}}else _0x1d4b04['mode']=_0x3cb327(0x1b9);}),_0x4ad67f;}async function initUser(){const _0xf64457=_0x182301;if(!settings[_0xf64457(0x1a9)]){const _0x55dadf=uuidRandom();mixpanel['alias'](_0x55dadf),updateSetting(_0xf64457(0x1a9),_0x55dadf);}}async function initSecure(){const _0x1ee4ab=_0x182301;let _0x596d76=getSecure();if(!_0x596d76[_0x1ee4ab(0x284)](_0x1ee4ab(0x153))){let _0x1ea827=await generateKeys();_0x596d76['publicKey']=_0x1ea827[_0x1ee4ab(0x1ca)],_0x596d76[_0x1ee4ab(0x192)]=_0x1ea827[_0x1ee4ab(0x192)],_0x596d76['secret']=crypto[_0x1ee4ab(0x190)](0x20)[_0x1ee4ab(0x23d)](_0x1ee4ab(0x237));;storeSecure(_0x596d76);}}function getSettings(){const _0xf50c93=_0x182301;return dbSettings[_0xf50c93(0x28a)]('settings')[_0xf50c93(0x158)]()||{};}function getSecure(){const _0x569eb5=_0x182301;return dbSecure[_0x569eb5(0x28a)]('secure')['value']()||{};}function getBlacklist(){const _0x4dba96=_0x182301;return dbSecure[_0x4dba96(0x28a)]('blacklist')['value']()||[];}function broadcastToBots(_0xffc0f4,_0x58a0f9){const _0x3ffd00=_0x182301;config[_0x3ffd00(0x291)](_0x409a85=>{const _0x575e54=_0x3ffd00;if(_0x409a85[_0x575e54(0x1e3)]==_0x575e54(0x255)&&_0x409a85[_0x575e54(0x242)]=='running'){if(pid[_0x409a85[_0x575e54(0x2ba)]])pid[_0x409a85[_0x575e54(0x2ba)]][_0x575e54(0x17c)]({[_0xffc0f4]:_0x58a0f9});}});}function storeSettings(_0x20d0a8,_0x1b613b=![]){const _0x1eeded=_0x182301;_0x20d0a8={...settings,..._0x20d0a8};if(_0x1b613b&&_0x20d0a8[_0x1eeded(0x28d)]!=_0x1eeded(0x250)&&_0x20d0a8[_0x1eeded(0x28d)]!=''){const _0x3ec1b3=crypt[_0x1eeded(0x185)](secure[_0x1eeded(0x192)],_0x20d0a8[_0x1eeded(0x28d)])[_0x1eeded(0x27d)][_0x1eeded(0x1f0)]('@')[0x0],_0x4dedc7=bcrypt['hashSync'](_0x3ec1b3,saltRounds);_0x20d0a8={..._0x20d0a8,'bbPassword':_0x4dedc7};}if(_0x1b613b&&_0x20d0a8['telegramToken']!='************'&&_0x20d0a8[_0x1eeded(0x261)]!=''){const _0x2b64c7=crypt['decrypt'](secure[_0x1eeded(0x192)],_0x20d0a8['telegramToken'])[_0x1eeded(0x27d)][_0x1eeded(0x1f0)]('@')[0x0];_0x20d0a8={..._0x20d0a8,'telegramToken':_0x2b64c7};}const _0x234b66=_0x20d0a8[_0x1eeded(0x261)]!='************'&&_0x20d0a8[_0x1eeded(0x261)]!=settings['telegramToken']||_0x20d0a8['telegramUsername']!=settings[_0x1eeded(0x1f9)],_0x9e9ebe=_0x20d0a8[_0x1eeded(0x261)]==''||_0x20d0a8['telegramUsername']=='';if(_0x234b66)_0x20d0a8['telegramEvents']='all';for(const [_0x14d7f5,_0x17d89e]of Object[_0x1eeded(0x1c6)](_0x20d0a8)){if(_0x14d7f5==_0x1eeded(0x261)&&_0x17d89e=='************'){_0x20d0a8['telegramToken']=settings[_0x1eeded(0x261)];continue;};if(_0x14d7f5=='bbPassword'&&_0x17d89e==_0x1eeded(0x250)){_0x20d0a8[_0x1eeded(0x28d)]=settings[_0x1eeded(0x28d)];continue;};dbSettings[_0x1eeded(0x1cb)]('settings.'+_0x14d7f5,_0x17d89e)[_0x1eeded(0x188)]();}settings=_0x20d0a8,io['to'](_0x1eeded(0x1db))[_0x1eeded(0x285)]('settings',cleanSettings()),broadcastToBots(_0x1eeded(0x28c),settings[_0x1eeded(0x28c)]);if(_0x234b66&&!_0x9e9ebe)initTelegram();if(_0x234b66&&_0x9e9ebe)disableTelegram();getAllClients()[_0x1eeded(0x291)](_0x31b70d=>{const _0x10ce77=_0x1eeded;getSocket(_0x31b70d['id'])['emit'](_0x10ce77(0x1e3),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x539f9e,_0x31c37c){const _0xc6c52d=_0x182301;dbSettings[_0xc6c52d(0x1cb)](_0xc6c52d(0x25d)+_0x539f9e,_0x31c37c)[_0xc6c52d(0x188)](),settings=getSettings(),io['to'](_0xc6c52d(0x1db))[_0xc6c52d(0x285)](_0xc6c52d(0x146),cleanSettings());}function storeSecure(_0x2784ca){const _0x222216=_0x182301;dbSecure[_0x222216(0x28a)]('secure')['push'](_0x2784ca)['write'](),secure=_0x2784ca;}function addBlacklist(_0x569cb2){const _0x2f6cae=_0x182301;cleanBlacklist();let _0x5d93d6;devices[_0x569cb2]['telegramIpApproval']?_0x5d93d6=Math['max'](devices[_0x569cb2][_0x2f6cae(0x1d3)]['expiry'],loginExpiry):_0x5d93d6=loginExpiry,dbSecure[_0x2f6cae(0x28a)](_0x2f6cae(0x2b4))[_0x2f6cae(0x1c0)]({'expiry':new Date()[_0x2f6cae(0x1e5)]()+_0x5d93d6*0x3c*0x3e8,'token':devices[_0x569cb2][_0x2f6cae(0x206)][_0x2f6cae(0x1b0)]})['write'](),blacklist=dbSecure[_0x2f6cae(0x28a)](_0x2f6cae(0x2b4))[_0x2f6cae(0x158)]();}function cleanBlacklist(){const _0x4bb754=_0x182301;let _0x3b9458=dbSecure[_0x4bb754(0x28a)](_0x4bb754(0x2b4))[_0x4bb754(0x27f)]()[_0x4bb754(0x158)](),_0x664301=new Date()[_0x4bb754(0x1e5)]();_0x3b9458[_0x4bb754(0x291)](_0xdd1941=>{const _0x54a5cc=_0x4bb754;_0xdd1941[_0x54a5cc(0x247)]<_0x664301&&dbSecure[_0x54a5cc(0x28a)](_0x54a5cc(0x2b4))['remove']({'expiry':_0xdd1941[_0x54a5cc(0x247)]})[_0x54a5cc(0x188)]();});}function initStates(){const _0xbc0b96=_0x182301;let _0x53fc24=getConfiguration();_0x53fc24[_0xbc0b96(0x291)](_0xcbdff8=>{const _0x2ef6bd=_0xbc0b96;_0xcbdff8[_0x2ef6bd(0x242)]=_0x2ef6bd(0x298);}),storeConfiguration(_0x53fc24);}function onKeys(){const _0x28319b=new RSA();return new Promise(_0x3dad21=>{const _0x212c68=_0x4d21;_0x28319b[_0x212c68(0x1ec)]()[_0x212c68(0x1d5)](_0x2100d2=>{_0x3dad21(_0x2100d2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x233c15=_0x182301;let _0x54b8bc=getSettings(),_0x4bfb9e=![];!_0x54b8bc['hasOwnProperty'](_0x233c15(0x26e))&&(_0x54b8bc[_0x233c15(0x26e)]=0x0,_0x4bfb9e=!![]);!_0x54b8bc[_0x233c15(0x284)](_0x233c15(0x21b))&&(_0x54b8bc[_0x233c15(0x21b)]=0x0,_0x4bfb9e=!![]);!_0x54b8bc[_0x233c15(0x284)](_0x233c15(0x166))&&(_0x54b8bc['latestversion']='0.0.0',_0x4bfb9e=!![]);if(_0x4bfb9e)storeSettings(_0x54b8bc);}function storeConfiguration(_0x185ef5){const _0x4c134a=_0x182301;dbConfig[_0x4c134a(0x28a)](_0x4c134a(0x1fc))[_0x4c134a(0x156)]()[_0x4c134a(0x188)](),_0x185ef5['forEach'](_0x5a4dd5=>{const _0x250a58=_0x4c134a;delete _0x5a4dd5[_0x250a58(0x177)];}),dbConfig['get'](_0x4c134a(0x1fc))[_0x4c134a(0x1c0)](..._0x185ef5)[_0x4c134a(0x188)](),config=_0x185ef5;}function resetPassword(){const _0x157a66=_0x182301;tgBot&&settings[_0x157a66(0x223)]&&(tgBot['removeListener'](_0x157a66(0x162)),tgBot[_0x157a66(0x157)](settings[_0x157a66(0x223)],_0x157a66(0x1ce),{'parse_mode':_0x157a66(0x19d),'reply_markup':{'inline_keyboard':[[{'text':_0x157a66(0x152),'callback_data':_0x157a66(0x152)},{'text':'no','callback_data':'no'}]]}})[_0x157a66(0x218)](_0x34fe46=>{telegramError(_0x34fe46);}),tgBot['on'](_0x157a66(0x162),async _0x5442f1=>{const _0x452480=_0x157a66,_0x30b818=_0x5442f1[_0x452480(0x1f3)],_0x5c26a0=_0x5442f1[_0x452480(0x27d)];tgBot[_0x452480(0x2b6)](_0x5442f1['id'])[_0x452480(0x1d5)](async()=>{const _0x449205=_0x452480;if(_0x30b818!='no'){const _0x5ae976=0xf,_0x1789bc='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x58c6b2=Array[_0x449205(0x1a1)](crypto[_0x449205(0x209)](new Uint32Array(_0x5ae976)))[_0x449205(0x1dc)](_0x260b2d=>_0x1789bc[_0x260b2d%_0x1789bc[_0x449205(0x1b5)]])[_0x449205(0x1a3)](''),_0x438bed=bcrypt[_0x449205(0x26d)](_0x58c6b2,saltRounds);storeSettings({'bbPassword':_0x438bed}),await tgBot[_0x449205(0x157)](_0x5c26a0['chat']['id'],_0x449205(0x1a7)+_0x58c6b2,{'parse_mode':_0x449205(0x19d)})['catch'](_0x7677c5=>{telegramError(_0x7677c5);});}else await tgBot['sendMessage'](_0x5c26a0[_0x449205(0x251)]['id'],_0x449205(0x17f))['catch'](_0x504339=>{telegramError(_0x504339);});}),tgBot[_0x452480(0x173)](_0x452480(0x162));}));}function logging(_0x32a2b5){const _0x48cbbb=_0x182301;console[_0x48cbbb(0x274)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x32a2b5);if(tgBot&&settings[_0x48cbbb(0x223)]&&settings[_0x48cbbb(0x17e)]!=_0x48cbbb(0x1a2))tgBot['sendMessage'](settings['telegramChatId'],_0x48cbbb(0x235)+_0x32a2b5)['catch'](_0x50ce64=>{telegramError(_0x50ce64);});}function getServerTime(){const _0x47b144=_0x182301,_0x124954=new Date();return _0x124954[_0x47b144(0x16c)]()+'/'+(_0x124954[_0x47b144(0x197)]()+0x1)['toString']()[_0x47b144(0x272)](0x2,'0')+'/'+_0x124954[_0x47b144(0x165)]()[_0x47b144(0x23d)]()[_0x47b144(0x272)](0x2,'0')+'\x20'+_0x124954[_0x47b144(0x241)]()[_0x47b144(0x23d)]()[_0x47b144(0x272)](0x2,'0')+':'+_0x124954[_0x47b144(0x17b)]()[_0x47b144(0x23d)]()[_0x47b144(0x272)](0x2,'0')+':'+_0x124954[_0x47b144(0x20e)]()[_0x47b144(0x23d)]()[_0x47b144(0x272)](0x2,'0');}function getTimeStamp(){const _0x3120b4=_0x182301,_0x3027a9=shiftedTime();return _0x3027a9[_0x3120b4(0x16c)]()+'/'+(_0x3027a9[_0x3120b4(0x197)]()+0x1)[_0x3120b4(0x23d)]()[_0x3120b4(0x272)](0x2,'0')+'/'+_0x3027a9[_0x3120b4(0x165)]()[_0x3120b4(0x23d)]()[_0x3120b4(0x272)](0x2,'0')+'\x20'+_0x3027a9['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x3027a9[_0x3120b4(0x17b)]()['toString']()[_0x3120b4(0x272)](0x2,'0')+':'+_0x3027a9['getSeconds']()[_0x3120b4(0x23d)]()[_0x3120b4(0x272)](0x2,'0');}function shiftedTime(){const _0x2dc16a=_0x182301,_0x52a499=new Date();let _0x1bff9a=_0x52a499;if(settings[_0x2dc16a(0x28c)]&&settings[_0x2dc16a(0x28c)]!==0x0)_0x1bff9a=fns['add'](_0x52a499,{'hours':settings[_0x2dc16a(0x28c)]});return _0x1bff9a;}function startScheduler(){const _0x106fdd=_0x182301;let _0xca0d59=new Date()[_0x106fdd(0x20f)]();_0xca0d59==0x1&&backupConfigFiles();_0xca0d59==0x9&&triggerAnalytics();_0xca0d59%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1b5793=_0x182301;fs[_0x1b5793(0x180)](configpath,{'withFileTypes':!![]})[_0x1b5793(0x291)](_0xe513e=>{const _0x4d3758=_0x1b5793;if(!_0xe513e[_0x4d3758(0x189)]())fs[_0x4d3758(0x230)](configpath+_0xe513e[_0x4d3758(0x176)],configbackuppath+_0xe513e['name']);});}async function getPublicIp(){const _0x272a85=_0x182301;try{const _0x3b6940=await axios[_0x272a85(0x28a)](_0x272a85(0x200));publicip=_0x3b6940[_0x272a85(0x1f3)]['ip'];}catch(_0x2d4630){}}async function triggerAnalytics(_0x298448=![]){const _0x43442e=_0x182301;if(!publicip)await getPublicIp();const _0x12384c=getBotsWithMode();let _0x260142=0x0;_0x12384c[_0x43442e(0x291)](_0x53b5c1=>{const _0x42bd87=_0x43442e;if(_0x53b5c1[_0x42bd87(0x1e3)]===_0x42bd87(0x255))_0x260142++;}),mixpanel[_0x43442e(0x259)](_0x43442e(0x226),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x12384c[_0x43442e(0x1b5)],'numbotsenabled':_0x260142}),!_0x298448&&analytics[_0x43442e(0x21a)]({'title':_0x43442e(0x15e),'href':_0x43442e(0x26c),'path':'/v'+serverversion});}async function getMessages(){const _0x520aab=_0x182301,_0x254a5f=_0x520aab(0x1eb),_0x33fc4e=new GraphQLClient(_0x254a5f),_0x172d40={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x161343=serverversion['split']('.'),_0x3468b1=_0x161343[0x0]+'.'+_0x161343[0x1],_0xbf920a=Math[_0x520aab(0x16f)](settings['lastmsgtelegram'],settings[_0x520aab(0x21b)]),_0x48cd3a={'last':parseInt(_0xbf920a),'bbm':_0x3468b1},_0x563dd4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3f3814;try{_0x3f3814=await _0x33fc4e['request'](_0x563dd4,_0x48cd3a,_0x172d40);}catch(_0x3085b2){}if(_0x3f3814&&_0x3f3814[_0x520aab(0x14a)]){let _0xdc70e9=settings[_0x520aab(0x26e)];newMessages=[];for(const _0x561f59 of _0x3f3814[_0x520aab(0x14a)]){newMessages[_0x520aab(0x1c0)](_0x561f59);if(_0x561f59[_0x520aab(0x16a)])updateSetting(_0x520aab(0x166),_0x561f59[_0x520aab(0x16a)]);let _0xb7e52a=_0x561f59[_0x520aab(0x16a)]?serverversion>=_0x561f59['bbvNew']:![];if(!_0xb7e52a&&_0x561f59[_0x520aab(0x2ae)]>_0xdc70e9){if(_0x561f59[_0x520aab(0x25a)]==='any'||serverversion[_0x520aab(0x220)](_0x561f59[_0x520aab(0x25a)])){let _0x450c20=''+_0x561f59[_0x520aab(0x22e)]+'\x0a\x0a'+_0x561f59[_0x520aab(0x27d)];const _0x7095a8=await sendTelegramMsg(toTelegramMarkdown(_0x450c20),'Markdown');if(_0x7095a8)_0xdc70e9=_0x561f59['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x520aab(0x26e),_0xdc70e9),emitMessages();}}function emitMessages(){const _0x3554cc=_0x182301,_0x31a3d8=settings['lastmsgemitted'];let _0x45b5e6=[];newMessages[_0x3554cc(0x291)](_0x4463a0=>{const _0x5e2b24=_0x3554cc;_0x4463a0[_0x5e2b24(0x2ae)]>_0x31a3d8&&_0x45b5e6[_0x5e2b24(0x1c0)](_0x4463a0);}),_0x45b5e6[_0x3554cc(0x1b5)]>0x0&&getAllClients()[_0x3554cc(0x291)](_0x4ff159=>{const _0x411ec1=_0x3554cc;getSocket(_0x4ff159['id'])[_0x411ec1(0x285)](_0x411ec1(0x27d),_0x45b5e6);});}function confirmMessage(_0x43b5ab){updateSetting('lastmsgemitted',Number(_0x43b5ab));}function isNewerVersion(_0x17be5e,_0x3eba38){const _0x27685a=_0x182301,_0x35b6b1=_0x3eba38['split']('.'),_0x325a5d=_0x17be5e[_0x27685a(0x1f0)]('.');for(var _0x28c484=0x0;_0x28c484<_0x325a5d[_0x27685a(0x1b5)];_0x28c484++){const _0x154caa=~~_0x325a5d[_0x28c484],_0x5562dc=~~_0x35b6b1[_0x28c484];if(_0x154caa>_0x5562dc)return!![];if(_0x154caa<_0x5562dc)return![];}return![];}function toTelegramMarkdown(_0x5d7769){const _0x12de66=_0x182301,_0x564401=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x344145=/\*{2}(.+?)\*{2}/gim;return _0x5d7769=_0x5d7769[_0x12de66(0x2b9)](_0x564401,'$1_$2_$3')['replace'](_0x344145,_0x12de66(0x222)),_0x5d7769;}function validateCredentials(_0x28a9c3,_0x14faec){const _0x59612d=_0x182301;if(_0x28a9c3['username']==settings[_0x59612d(0x292)]&&bcrypt[_0x59612d(0x2a9)](_0x28a9c3[_0x59612d(0x1fa)],settings[_0x59612d(0x28d)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x2f896d=generateLoginToken(_0x14faec);return{'allow':!![],'reason':_0x59612d(0x283),'token':_0x2f896d};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x156104){const _0x199023=_0x182301,_0x3dec52=generateLoginToken(_0x156104);return{'allow':!![],'reason':_0x199023(0x283),'token':_0x3dec52};}function validateAccess(_0x184cbe,_0x48c30c){const _0x2a53af=_0x182301;let _0x19ebc9=devices[_0x48c30c]['ip'],_0x532c83;const _0x20752d=_0x506a87=>{const _0x29cf9b=_0x4d21;if(settings[_0x29cf9b(0x1d7)]){if(settings[_0x29cf9b(0x184)]){if(telegram2FaApproved(_0x48c30c)){const _0x5bc58e=generateLoginToken(_0x48c30c);return{'allow':!![],'reason':_0x29cf9b(0x1aa),'token':_0x5bc58e};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x532c83=validToken(_0x506a87,_0x48c30c),_0x532c83[_0x29cf9b(0x284)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x506a87}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x29cf9b(0x23b),'token':null};};if(settings[_0x2a53af(0x1c2)]){let _0xcce631=[...settings[_0x2a53af(0x29b)],_0x2a53af(0x24b),_0x2a53af(0x277),'127.0.0.1'];if(_0xcce631[_0x2a53af(0x2b5)](_0x19ebc9))return _0x20752d(_0x184cbe);else{_0x532c83=validToken(_0x184cbe,_0x48c30c);if(_0x532c83[_0x2a53af(0x284)](_0x2a53af(0x171)))return _0x20752d(_0x184cbe);else{if(telegramIpApproved(_0x48c30c)){const _0x5be79d=generateToken(_0x48c30c);return _0x532c83=_0x20752d(_0x184cbe),_0x532c83[_0x2a53af(0x257)]?{'allow':!![],'reason':_0x2a53af(0x1e0),'token':_0x5be79d}:_0x532c83;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2a53af(0x212),'token':null};}}}else return _0x20752d(_0x184cbe);}function timelyDecrypt(_0x4a1434,_0x5531a5=!![]){const _0x499529=_0x182301;if(_0x4a1434)try{const _0x333685=crypt[_0x499529(0x185)](secure[_0x499529(0x192)],_0x4a1434)[_0x499529(0x27d)],_0x88e78e=_0x333685[_0x499529(0x1f0)]('@')[0x0],_0x784af0=_0x333685[_0x499529(0x1f0)]('@')[0x1],_0x2241cf=new Date()[_0x499529(0x1e5)]();if(_0x5531a5){if(_0x2241cf-_0x784af0<maxSecretAge*0x3e8)return _0x88e78e;else return![];}else return _0x88e78e;}catch(_0x1b287e){return![];}else return![];}const validToken=(_0x1e84f8,_0xb2ceb9)=>{const _0x59e406=_0x182301,_0x5a842b=devices[_0xb2ceb9]['ip'];if(!_0x1e84f8)return{'error':_0x59e406(0x295)};for(let _0x2a4f49 of blacklist){if(_0x2a4f49[_0x59e406(0x1b0)]==_0x1e84f8)return{'error':_0x59e406(0x270)};}let _0x1eb568;try{_0x1eb568=jwt[_0x59e406(0x266)](_0x1e84f8,secure[_0x59e406(0x153)]+_0xb2ceb9);}catch{return{'error':_0x59e406(0x181)};}if(!_0x1eb568[_0x59e406(0x284)]('clientip')&&!_0x1eb568[_0x59e406(0x284)](_0x59e406(0x1a6))||!_0x1eb568[_0x59e406(0x284)](_0x59e406(0x221)))return{'error':_0x59e406(0x17d)};if(!_0x1eb568['hasOwnProperty'](_0x59e406(0x1a6))&&_0x1eb568['hasOwnProperty']('clientip')){const {clientip:_0x307f49}=_0x1eb568;return _0x5a842b==_0x307f49?{'success':_0x59e406(0x243)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x1eb568[_0x59e406(0x284)](_0x59e406(0x1a6))&&_0x1eb568[_0x59e406(0x284)]('clientip')){const {username:_0x5a7499,clientip:_0x2a4333}=_0x1eb568;return settings[_0x59e406(0x292)]==_0x5a7499&&_0x5a842b==_0x2a4333?{'success':_0x59e406(0x243)}:{'error':_0x59e406(0x1a0)};}}},generateLoginToken=_0x45e9ed=>{const _0x268dbf=_0x182301;if(_0x45e9ed){const _0x16d0c1=devices[_0x45e9ed]['ip'];return jwt[_0x268dbf(0x231)]({'username':settings['bbUsername'],'clientip':_0x16d0c1},secure['secret']+_0x45e9ed,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1bf7fe=>{const _0x22a856=_0x182301;if(_0x1bf7fe){const _0x44064b=devices[_0x1bf7fe]['ip'];return jwt[_0x22a856(0x231)]({'clientip':_0x44064b},secure['secret']+_0x1bf7fe,{'expiresIn':devices[_0x1bf7fe][_0x22a856(0x1d3)][_0x22a856(0x247)]*0x3c});}else return![];},telegramIpApproved=_0x5d94e3=>{const _0x1c56c9=_0x182301;let _0x5a3862=![];return devices[_0x5d94e3][_0x1c56c9(0x1d3)]&&devices[_0x5d94e3][_0x1c56c9(0x1d3)]['expiry']!=_0x1c56c9(0x20a)&&(_0x5a3862=devices[_0x5d94e3]['telegramIpApproval'][_0x1c56c9(0x15c)]==devices[_0x5d94e3]['ip']&&new Date()[_0x1c56c9(0x1e5)]()-devices[_0x5d94e3][_0x1c56c9(0x1d3)]['timestamp']<devices[_0x5d94e3]['telegramIpApproval'][_0x1c56c9(0x247)]*0x3c*0x3e8),_0x5a3862;},telegram2FaApproved=_0x5978fb=>{const _0x37ad93=_0x182301;let _0x4cacb1=![];return devices[_0x5978fb][_0x37ad93(0x282)]&&devices[_0x5978fb][_0x37ad93(0x282)][_0x37ad93(0x247)]!='reject'&&(_0x4cacb1=devices[_0x5978fb][_0x37ad93(0x282)]['clientip']==devices[_0x5978fb]['ip']&&new Date()[_0x37ad93(0x1e5)]()-devices[_0x5978fb][_0x37ad93(0x282)]['timestamp']<devices[_0x5978fb][_0x37ad93(0x282)][_0x37ad93(0x247)]*0x3c*0x3e8),_0x4cacb1;},normalizeIP=_0x4e1a61=>{const _0x4077be=_0x182301;let _0x3ab6cb=null,_0x313ed3=null;if(ipaddr[_0x4077be(0x29c)](_0x4e1a61)){const _0x4e2a16=ipaddr[_0x4077be(0x18c)](_0x4e1a61);_0x4e2a16[_0x4077be(0x2a7)]()==='ipv6'?(_0x4e2a16[_0x4077be(0x1de)]()&&(_0x3ab6cb=_0x4e2a16['toIPv4Address']()[_0x4077be(0x23d)]()),_0x313ed3=_0x4e2a16[_0x4077be(0x23d)]()):(_0x3ab6cb=_0x4e2a16[_0x4077be(0x23d)](),_0x313ed3=_0x4e2a16['toIPv4MappedAddress']()[_0x4077be(0x23d)]());}return{'show':_0x3ab6cb?_0x3ab6cb:_0x313ed3,'store':_0x313ed3};};function sleep(_0x16ad42){return new Promise(_0x1ec537=>setTimeout(_0x1ec537,_0x16ad42));}