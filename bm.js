const _0x3d97ce=_0xa273;(function(_0x3690e0,_0x4c5a0c){const _0x2812d7=_0xa273,_0x16a85d=_0x3690e0();while(!![]){try{const _0x302d5b=parseInt(_0x2812d7(0x18b))/0x1+-parseInt(_0x2812d7(0x292))/0x2+-parseInt(_0x2812d7(0x306))/0x3+-parseInt(_0x2812d7(0x210))/0x4*(parseInt(_0x2812d7(0x284))/0x5)+parseInt(_0x2812d7(0x267))/0x6*(-parseInt(_0x2812d7(0x2a4))/0x7)+parseInt(_0x2812d7(0x1f6))/0x8+-parseInt(_0x2812d7(0x249))/0x9*(-parseInt(_0x2812d7(0x230))/0xa);if(_0x302d5b===_0x4c5a0c)break;else _0x16a85d['push'](_0x16a85d['shift']());}catch(_0x25e0a4){_0x16a85d['push'](_0x16a85d['shift']());}}}(_0x1144,0x5f128));const _0x1ee4fe=function(){let _0x38af83=!![];return function(_0x30504a,_0x26bed5){const _0x1058d7=_0x38af83?function(){const _0x3779b3=_0xa273;if(_0x26bed5){const _0x5426fc=_0x26bed5[_0x3779b3(0x24e)](_0x30504a,arguments);return _0x26bed5=null,_0x5426fc;}}:function(){};return _0x38af83=![],_0x1058d7;};}(),_0x22f3df=_0x1ee4fe(this,function(){const _0xc21144=_0xa273;return _0x22f3df['toString']()['search']('(((.+)+)+)+$')[_0xc21144(0x2fe)]()[_0xc21144(0x1fe)](_0x22f3df)[_0xc21144(0x2bd)]('(((.+)+)+)+$');});_0x22f3df();'use strict';process['env'][_0x3d97ce(0x2e1)]=0x1;const childProcess=require(_0x3d97ce(0x2da)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),low=require(_0x3d97ce(0x1e9)),path=require(_0x3d97ce(0x29e)),crypto=require(_0x3d97ce(0x1ac)),Crypt=require(_0x3d97ce(0x2f0))[_0x3d97ce(0x2f8)],RSA=require('hybrid-crypto-js')[_0x3d97ce(0x1cb)],bcrypt=require(_0x3d97ce(0x1b5)),jwt=require(_0x3d97ce(0x22a)),{Analytics}=require(_0x3d97ce(0x26e)),googleAnalyticsV3Plugin=require(_0x3d97ce(0x1ec))[_0x3d97ce(0x1ee)],ipaddr=require('ipaddr.js'),argv=require(_0x3d97ce(0x200))(process['argv'][_0x3d97ce(0x2eb)](0x2))[_0x3d97ce(0x2fd)],uuidRandom=require(_0x3d97ce(0x1c9)),Mixpanel=require(_0x3d97ce(0x2e4)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),PORT=argv[_0x3d97ce(0x278)]||_0x3d97ce(0x241),pattern=/^[0-9]{2,4}$/;!pattern[_0x3d97ce(0x303)](PORT)&&(console[_0x3d97ce(0x24c)](_0x3d97ce(0x1ba)+PORT+_0x3d97ce(0x1e7)),process[_0x3d97ce(0x255)](0x1));const HOST=argv[_0x3d97ce(0x189)]||null,userID=argv[_0x3d97ce(0x194)]||'';let bbpath=_0x3d97ce(0x1b6),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x3d97ce(0x298),securefile=_0x3d97ce(0x297);let validInstallation=!![];!fs[_0x3d97ce(0x307)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3d97ce(0x2ab)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x3d97ce(0x1b3)](configpath);!fs[_0x3d97ce(0x307)](configbackuppath)&&fs[_0x3d97ce(0x1b3)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3d97ce(0x25c)]({'bots':[]})[_0x3d97ce(0x276)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2),adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3d97ce(0x25c)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x3d97ce(0x20b),'rsaStandard':_0x3d97ce(0x2d5)});const saltRounds=0xa,mixpanel=Mixpanel[_0x3d97ce(0x1b1)](_0x3d97ce(0x193),{'host':_0x3d97ce(0x2fc)}),analytics=Analytics({'app':_0x3d97ce(0x1b2),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x3d97ce(0x244)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3d97ce(0x2e0))[_0x3d97ce(0x1e0)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3d97ce(0x23c)),app=express(),http=require(_0x3d97ce(0x304))['createServer'](app);app[_0x3d97ce(0x235)](express[_0x3d97ce(0x1af)](path[_0x3d97ce(0x1f7)](__dirname,bbpath2,_0x3d97ce(0x29b)))),app[_0x3d97ce(0x235)](express['static'](path['join'](__dirname,bbpath2,_0x3d97ce(0x2d4)))),app[_0x3d97ce(0x27b)]('/',function(_0x5bcb0d,_0x48b06a){const _0x49cf7f=_0x3d97ce;_0x48b06a[_0x49cf7f(0x251)](path[_0x49cf7f(0x1f7)](__dirname,bbpath2,_0x49cf7f(0x29b),'index.html'));}),app['get']('/:bot',function(_0x106bb8,_0x4dde4a){const _0x142bfa=_0x3d97ce;_0x4dde4a[_0x142bfa(0x251)](path[_0x142bfa(0x1f7)](__dirname,bbpath2,'build',_0x142bfa(0x1d8)));}),app[_0x3d97ce(0x27b)](_0x3d97ce(0x1aa),(_0x1f5f2a,_0xee1e2)=>{const _0x3537eb=_0x3d97ce;_0xee1e2[_0x3537eb(0x251)](path[_0x3537eb(0x1f7)](__dirname,bbpath2,_0x3537eb(0x2d4),'index.html'));}),app['get'](_0x3d97ce(0x29a),(_0x5e4957,_0xb26e5c)=>{const _0x362f04=_0x3d97ce;_0xb26e5c[_0x362f04(0x251)](path[_0x362f04(0x1f7)](__dirname,bbpath2,_0x362f04(0x2d4),_0x362f04(0x1d8)));}),app[_0x3d97ce(0x27b)](_0x3d97ce(0x29d),(_0x4b3cd5,_0x3f2ab3)=>{const _0x3d8f22=_0x3d97ce;_0x3f2ab3['sendFile'](path['join'](__dirname,bbpath2,_0x3d8f22(0x2d4),_0x3d8f22(0x1d8)));}),app[_0x3d97ce(0x27b)](_0x3d97ce(0x21e),(_0x3399b9,_0x4b4e84)=>{const _0xcd5bde=_0x3d97ce;_0x4b4e84[_0xcd5bde(0x251)](path[_0xcd5bde(0x1f7)](__dirname,bbpath2,_0xcd5bde(0x2d4),_0xcd5bde(0x1d8)));}),app[_0x3d97ce(0x27b)](_0x3d97ce(0x26a),(_0xe16bab,_0x3a2583)=>{const _0x5e666e=_0x3d97ce;_0x3a2583[_0x5e666e(0x251)](path[_0x5e666e(0x1f7)](__dirname,bbpath2,_0x5e666e(0x2d4),_0x5e666e(0x1d8)));}),app['get'](_0x3d97ce(0x28a),(_0x5757c5,_0x3d1ee8)=>{const _0x53504f=_0x3d97ce;_0x3d1ee8[_0x53504f(0x251)](path['join'](__dirname,bbpath2,_0x53504f(0x2d4),_0x53504f(0x1d8)));});if(HOST)http[_0x3d97ce(0x28f)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require(_0x3d97ce(0x2b3)),{allowedNodeEnvironmentFlags}=require(_0x3d97ce(0x294));let tgBot;if(settings[_0x3d97ce(0x1f8)]&&settings[_0x3d97ce(0x1f8)]!=''&&settings[_0x3d97ce(0x239)]&&settings[_0x3d97ce(0x239)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();function startServer(){const _0xb52dd=_0x3d97ce;console['log'](''),console[_0xb52dd(0x24c)](_0xb52dd(0x24f)),logging(_0xb52dd(0x274)+PORT),console[_0xb52dd(0x24c)]('-----------------------------------------------------------------------------------');if(config[_0xb52dd(0x2cd)]!=0x0)config[_0xb52dd(0x2ed)](_0x539377=>{const _0x1594ea=_0xb52dd;if(_0x539377[_0x1594ea(0x1d3)]=='enabled'||_0x539377['status']==_0x1594ea(0x1df))logging(_0x1594ea(0x299)+_0x539377['botID']+_0x1594ea(0x2ce)+_0x539377[_0x1594ea(0x2af)]),startBot([_0x539377[_0x1594ea(0x2f3)],userID],{'cwd':bbpath},function(_0x14626f){if(_0x14626f)logging(_0x14626f);});else(_0x539377['status']==_0x1594ea(0x2d1)||_0x539377[_0x1594ea(0x1d3)]==_0x1594ea(0x2c6))&&logging(_0x1594ea(0x26d)+_0x539377[_0x1594ea(0x2f3)]+_0x1594ea(0x2ce)+_0x539377[_0x1594ea(0x2af)]);});else!newBot&&console['log'](_0xb52dd(0x19d));if(newBot)addBot();console[_0xb52dd(0x24c)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x56e80a=_0x3d97ce;io['on'](_0x56e80a(0x247),_0x553a68=>{const _0x34ce8d=_0x56e80a;let _0x2ab90e,_0x267d72,_0x2ef5b1,_0x1cd35b,_0x11cad7;const _0x589bb0=_0x553a68['handshake'][_0x34ce8d(0x202)][_0x34ce8d(0x238)];_0x267d72=_0x589bb0[_0x34ce8d(0x2ca)](/bot[0-9]{3}/);if(_0x267d72)_0x2ef5b1=_0x267d72[0x0][_0x34ce8d(0x2ca)](/[0-9]{3}/);if(_0x2ef5b1)_0x2ab90e=_0x2ef5b1[0x0];else _0x2ab90e=_0x34ce8d(0x242);const _0x629381=_0x553a68[_0x34ce8d(0x228)]['auth'][_0x34ce8d(0x1c1)];if(!_0x629381)_0x553a68[_0x34ce8d(0x192)]('status',{'publicKey':secure[_0x34ce8d(0x19a)]});else{_0x1cd35b=timelyDecrypt(_0x629381,![]);if(!_0x1cd35b)_0x553a68[_0x34ce8d(0x192)](_0x34ce8d(0x1d3),{'publicKey':secure[_0x34ce8d(0x19a)]});else{_0x11cad7=normalizeIP(_0x553a68[_0x34ce8d(0x25b)]['remoteAddress'])['store'];if(!devices[_0x1cd35b])devices[_0x1cd35b]={'uuid':_0x1cd35b,'access':{'token':null}};devices[_0x1cd35b]['ip']=_0x11cad7;const _0x2be1fb=addClient(_0x553a68['id'],_0x1cd35b,_0x2ab90e);setAccess(_0x2be1fb),emitMessages(),_0x553a68['on'](_0x34ce8d(0x1da),_0x214cde=>{const _0x74990c=_0x34ce8d,_0x2359c8=timelyDecrypt(_0x214cde[_0x74990c(0x254)]);if(_0x2359c8){_0x214cde={'username':_0x214cde[_0x74990c(0x23e)],'password':_0x2359c8},devices[_0x1cd35b][_0x74990c(0x1f3)]=validateCredentials(_0x214cde,_0x1cd35b);if(devices[_0x1cd35b][_0x74990c(0x1f3)][_0x74990c(0x219)]==![]&&devices[_0x1cd35b][_0x74990c(0x1f3)][_0x74990c(0x205)]=='2FA\x20login\x20required')_0x553a68[_0x74990c(0x192)](_0x74990c(0x1d3),{'access':devices[_0x1cd35b][_0x74990c(0x1f3)]}),loginAccess2FA(_0x1cd35b,_0x11cad7);else{if(devices[_0x1cd35b][_0x74990c(0x1f3)][_0x74990c(0x219)]==![]&&devices[_0x1cd35b][_0x74990c(0x1f3)]['reason']=='invalid\x20credentials')_0x553a68[_0x74990c(0x192)](_0x74990c(0x1d3),{'access':devices[_0x1cd35b]['access']});else devices[_0x1cd35b]['access'][_0x74990c(0x219)]&&devices[_0x1cd35b][_0x74990c(0x1f3)][_0x74990c(0x205)]==_0x74990c(0x20a)&&(getClientsWithUuid(_0x1cd35b)['forEach'](_0x578caf=>{setAccess(_0x578caf);}),setTokenRefresh(_0x1cd35b),setSessionTimeout('login',_0x1cd35b));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x553a68['on'](_0x34ce8d(0x2e2),()=>{resetPassword();}),_0x553a68['on'](_0x34ce8d(0x233),_0x576323=>{removeClient(_0x553a68['id']);});}}});}function initClient(_0x4f4e41){const _0x3e4ade=_0x3d97ce;if(_0x4f4e41!=_0x3e4ade(0x242)&&config[_0x3e4ade(0x2a7)]!=''){if(pid[_0x4f4e41])pid[_0x4f4e41][_0x3e4ade(0x250)]({'function':'initclient','args':null});}}function getSocket(_0x381470){const _0x1a05cc=_0x3d97ce;return io[_0x1a05cc(0x257)][_0x1a05cc(0x257)]['get'](_0x381470);}function setAccess(_0x2cefd9){const _0x3d0554=_0x3d97ce,_0x502d5f=getSocket(_0x2cefd9['id']),_0x2ddff2=_0x2cefd9[_0x3d0554(0x2b2)],_0x4cb639=_0x2cefd9[_0x3d0554(0x2b7)];devices[_0x2ddff2][_0x3d0554(0x1f3)]=validateAccess(devices[_0x2ddff2]['access'][_0x3d0554(0x28c)],_0x2ddff2),_0x502d5f['join'](_0x2ddff2);if(devices[_0x2ddff2]['access'][_0x3d0554(0x219)]){_0x502d5f['join'](_0x4cb639);if(_0x4cb639=='botmanager')initializeSocketBotManager(_0x502d5f);else initializeSocketBot(_0x502d5f);initClient(_0x4cb639);}devices[_0x2ddff2][_0x3d0554(0x1f3)][_0x3d0554(0x28c)]&&devices[_0x2ddff2][_0x3d0554(0x1f3)][_0x3d0554(0x205)]==_0x3d0554(0x2c1)&&setSessionTimeout(_0x3d0554(0x1a7),_0x2ddff2),devices[_0x2ddff2][_0x3d0554(0x1f3)]['token']&&devices[_0x2ddff2][_0x3d0554(0x1f3)]['reason']==_0x3d0554(0x2f1)&&setSessionTimeout(_0x3d0554(0x1da),_0x2ddff2),_0x502d5f[_0x3d0554(0x192)](_0x3d0554(0x1d3),{'status':_0x2cefd9[_0x3d0554(0x1ce)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2ddff2][_0x3d0554(0x1f3)],'externalip':devices[_0x2ddff2]['ip'],'publicKey':secure[_0x3d0554(0x19a)],'userid':settings[_0x3d0554(0x2b4)],'validInstallation':validInstallation}),devices[_0x2ddff2][_0x3d0554(0x1f3)][_0x3d0554(0x219)]==![]&&devices[_0x2ddff2][_0x3d0554(0x1f3)][_0x3d0554(0x205)]==_0x3d0554(0x264)&&temporaryAccess2FA(_0x2ddff2,devices[_0x2ddff2]['ip']);}function setSessionTimeout(_0x1f0305,_0x5334f9){const _0x12e6ac=_0x3d97ce;let _0x5b522f;if(_0x1f0305==_0x12e6ac(0x1da))_0x5b522f=loginExpiry*0x3c*0x3e8;else _0x5b522f=devices[_0x5334f9][_0x12e6ac(0x2b1)][_0x12e6ac(0x2fb)]*0x3c*0x3e8-(new Date()[_0x12e6ac(0x2fa)]()-devices[_0x5334f9][_0x12e6ac(0x2b1)][_0x12e6ac(0x1dc)]);if(devices[_0x5334f9][_0x12e6ac(0x1f5)])clearTimeout(devices[_0x5334f9][_0x12e6ac(0x1f5)]);devices[_0x5334f9][_0x12e6ac(0x1f5)]=setTimeout(()=>{const _0x4112ad=_0x12e6ac;if(devices[_0x5334f9][_0x4112ad(0x24a)])clearTimeout(devices[_0x5334f9]['pidRefreshToken']);removeSocketListeners(_0x5334f9),addBlacklist(_0x5334f9),devices[_0x5334f9]['telegramIpApproval']=null,devices[_0x5334f9][_0x4112ad(0x2c5)]=null,devices[_0x5334f9]['access'][_0x4112ad(0x28c)]=null,devices[_0x5334f9][_0x4112ad(0x1f3)]=validateAccess(devices[_0x5334f9]['access'][_0x4112ad(0x28c)],_0x5334f9),!(devices[_0x5334f9][_0x4112ad(0x1f3)]['allow']&&devices[_0x5334f9][_0x4112ad(0x1f3)][_0x4112ad(0x205)]==_0x4112ad(0x1ed))&&(_0x1f0305==_0x4112ad(0x1da)?io['to'](_0x5334f9)[_0x4112ad(0x192)](_0x4112ad(0x1d3),{'access':{'allow':![],'reason':_0x4112ad(0x1f2),'token':null}}):io['to'](_0x5334f9)[_0x4112ad(0x192)]('status',{'access':{'allow':![],'reason':_0x4112ad(0x198),'token':null}})),devices[_0x5334f9]['access'][_0x4112ad(0x28c)]=null;},_0x5b522f);}function setTokenRefresh(_0x525464){const _0x1d74c1=_0x3d97ce;if(devices[_0x525464]['pidRefreshToken'])clearTimeout(devices[_0x525464][_0x1d74c1(0x24a)]);devices[_0x525464][_0x1d74c1(0x24a)]=setTimeout(()=>{const _0x42cfdc=_0x1d74c1;getClientsWithUuid(_0x525464)[_0x42cfdc(0x2cd)]!=0x0?(devices[_0x525464][_0x42cfdc(0x1f3)]=refreshToken(_0x525464),io['to'](_0x525464)[_0x42cfdc(0x192)](_0x42cfdc(0x1d3),{'status':_0x42cfdc(0x1d1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x525464][_0x42cfdc(0x1f3)],'externalip':devices[_0x525464]['ip'],'publicKey':secure[_0x42cfdc(0x19a)],'validInstallation':validInstallation}),setTokenRefresh(_0x525464)):clearTimeout(devices[_0x525464][_0x42cfdc(0x24a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x25717b){const _0x5972ae=_0x3d97ce,_0x4951cb=getClient(_0x25717b['id'])['uuid'];_0x25717b['emit'](_0x5972ae(0x231),config),_0x25717b[_0x5972ae(0x192)](_0x5972ae(0x1a8),cleanSettings()),_0x25717b['on'](_0x5972ae(0x2bb),_0x3d0873=>{if(validateAccess(_0x3d0873,_0x4951cb)['allow'])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x25717b['on'](_0x5972ae(0x22e),(_0x492379,_0x22dffc)=>{const _0x442dfc=_0x5972ae;if(validateAccess(_0x22dffc,_0x4951cb)[_0x442dfc(0x219)])toggleBot(_0x492379[_0x442dfc(0x2f3)],_0x492379['status'],_0x492379[_0x442dfc(0x1a9)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x25717b['on'](_0x5972ae(0x2ac),(_0x4b9538,_0x3dba86)=>{const _0x314f54=_0x5972ae;if(validateAccess(_0x3dba86,_0x4951cb)[_0x314f54(0x219)])toggleBotMode(_0x4b9538);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x25717b['on'](_0x5972ae(0x26c),(_0x19a61d,_0x153031)=>{const _0x2fad3d=_0x5972ae;if(validateAccess(_0x153031,_0x4951cb)[_0x2fad3d(0x219)])deleteBot(_0x19a61d);else logging(_0x2fad3d(0x1fd));}),_0x25717b['on'](_0x5972ae(0x269),(_0x1453b6,_0x1b986f)=>{const _0x40c870=_0x5972ae;if(validateAccess(_0x1b986f,_0x4951cb)['allow'])storeSettings(_0x1453b6,!![]);else logging(_0x40c870(0x266));}),_0x25717b['on'](_0x5972ae(0x1d5),_0x3a3f34=>{const _0x135dbd=_0x5972ae;if(validateAccess(_0x3a3f34,_0x4951cb)[_0x135dbd(0x219)])updateBB();else logging(_0x135dbd(0x23a));}),_0x25717b['on'](_0x5972ae(0x1d0),_0x49ab90=>{const _0x44aea3=_0x5972ae;if(validateAccess(_0x49ab90,_0x4951cb)[_0x44aea3(0x219)])getMessages();else logging(_0x44aea3(0x2ef));}),_0x25717b['on'](_0x5972ae(0x246),(_0x43e0a5,_0x2191d3)=>{const _0x63eb0e=_0x5972ae;if(validateAccess(_0x2191d3,_0x4951cb)[_0x63eb0e(0x219)])confirmMessage(_0x43e0a5);else logging(_0x63eb0e(0x217));}),_0x25717b['on'](_0x5972ae(0x282),_0x51b39b=>{const _0x545e9d=_0x5972ae;if(validateAccess(_0x51b39b,_0x4951cb)[_0x545e9d(0x219)]){if(devices[_0x4951cb][_0x545e9d(0x24a)])clearTimeout(devices[_0x4951cb][_0x545e9d(0x24a)]);if(devices[_0x4951cb][_0x545e9d(0x1f5)])clearTimeout(devices[_0x4951cb][_0x545e9d(0x1f5)]);removeSocketListeners(getClient(_0x25717b['id'])[_0x545e9d(0x2b2)]),addBlacklist(_0x4951cb),devices[_0x4951cb][_0x545e9d(0x2b1)]=null,devices[_0x4951cb][_0x545e9d(0x2c5)]=null,devices[_0x4951cb][_0x545e9d(0x1f3)][_0x545e9d(0x28c)]=null,io['to'](getClient(_0x25717b['id'])[_0x545e9d(0x2b2)])[_0x545e9d(0x192)](_0x545e9d(0x1d3),{'access':{'allow':![],'reason':_0x545e9d(0x275),'token':null}});}else logging(_0x545e9d(0x2cc));});}function initializeSocketBot(_0x401d3f){const _0x59df14=_0x3d97ce,_0x4fda59=getClient(_0x401d3f['id'])[_0x59df14(0x2b7)],_0x42af5f=getClient(_0x401d3f['id'])[_0x59df14(0x2b2)];_0x401d3f['on'](_0x59df14(0x1a3),(_0x3e541f,_0x21de22)=>{const _0x16f54d=_0x59df14;if(validateAccess(_0x21de22,_0x42af5f)[_0x16f54d(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59][_0x16f54d(0x250)]({'function':'emitHistory','args':_0x3e541f});}else logging(_0x16f54d(0x28b));}),_0x401d3f['on'](_0x59df14(0x1ad),(_0x112ed2,_0x4f3af1)=>{const _0x55e5fb=_0x59df14;if(validateAccess(_0x4f3af1,_0x42af5f)[_0x55e5fb(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59][_0x55e5fb(0x250)]({'function':_0x55e5fb(0x196),'args':_0x112ed2});}else logging(_0x55e5fb(0x25d));}),_0x401d3f['on'](_0x59df14(0x1c8),(_0x261f15,_0x1510cc)=>{const _0x295070=_0x59df14;if(validateAccess(_0x1510cc,_0x42af5f)[_0x295070(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59][_0x295070(0x250)]({'function':_0x295070(0x2df),'args':_0x261f15});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x401d3f['on'](_0x59df14(0x222),(_0x12fb1c,_0x4de755)=>{const _0xec967e=_0x59df14;if(validateAccess(_0x4de755,_0x42af5f)[_0xec967e(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59][_0xec967e(0x250)]({'function':_0xec967e(0x286),'args':_0x12fb1c});}else logging(_0xec967e(0x2dc));}),_0x401d3f['on'](_0x59df14(0x2ea),(_0xeee1e5,_0x1a6869)=>{const _0x1913e5=_0x59df14;if(validateAccess(_0x1a6869,_0x42af5f)[_0x1913e5(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59][_0x1913e5(0x250)]({'function':_0x1913e5(0x25e),'args':_0xeee1e5});}else logging(_0x1913e5(0x2aa));}),_0x401d3f['on'](_0x59df14(0x188),_0x4911fe=>{const _0x2692c3=_0x59df14;if(validateAccess(_0x4911fe,_0x42af5f)[_0x2692c3(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59]['send']({'function':'getStartingBalances','args':null});}else logging(_0x2692c3(0x236));}),_0x401d3f['on']('place-order',(_0x49910f,_0x5e4c57)=>{const _0x8456e5=_0x59df14;if(validateAccess(_0x5e4c57,_0x42af5f)['allow']){if(pid[_0x4fda59])pid[_0x4fda59]['send']({'function':'placeOrder','args':_0x49910f});}else logging(_0x8456e5(0x2f2));}),_0x401d3f['on'](_0x59df14(0x28d),_0x3cae3d=>{const _0x52f532=_0x59df14;if(validateAccess(_0x3cae3d,_0x42af5f)[_0x52f532(0x219)]){if(pid[_0x4fda59])pid[_0x4fda59]['send']({'function':'cancelLoading','args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x401d3f['on'](_0x59df14(0x1d5),_0x3e2cb9=>{const _0x28c0c3=_0x59df14;if(validateAccess(_0x3e2cb9,_0x42af5f)[_0x28c0c3(0x219)])updateBB();else logging(_0x28c0c3(0x23a));}),_0x401d3f['on'](_0x59df14(0x1d0),_0x1d1663=>{const _0x90e215=_0x59df14;if(validateAccess(_0x1d1663,_0x42af5f)[_0x90e215(0x219)])getMessages();else logging(_0x90e215(0x2ef));}),_0x401d3f['on']('confirm-message',(_0x524599,_0x3efee7)=>{const _0x4acf3c=_0x59df14;if(validateAccess(_0x3efee7,_0x42af5f)[_0x4acf3c(0x219)])confirmMessage(_0x524599);else logging(_0x4acf3c(0x217));}),_0x401d3f['on'](_0x59df14(0x282),_0x201325=>{const _0x129649=_0x59df14;if(validateAccess(_0x201325,_0x42af5f)[_0x129649(0x219)]){if(devices[_0x42af5f][_0x129649(0x24a)])clearTimeout(devices[_0x42af5f][_0x129649(0x24a)]);if(devices[_0x42af5f][_0x129649(0x1f5)])clearTimeout(devices[_0x42af5f][_0x129649(0x1f5)]);removeSocketListeners(getClient(_0x401d3f['id'])[_0x129649(0x2b2)]),addBlacklist(_0x42af5f),devices[_0x42af5f][_0x129649(0x2b1)]=null,devices[_0x42af5f][_0x129649(0x2c5)]=null,devices[_0x42af5f][_0x129649(0x1f3)][_0x129649(0x28c)]=null,io['to'](getClient(_0x401d3f['id'])[_0x129649(0x2b2)])[_0x129649(0x192)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x13edd1){getClientsWithUuid(_0x13edd1)['forEach'](_0x40e637=>{const _0x1e116e=_0xa273;getSocket(_0x40e637['id'])[_0x1e116e(0x2a0)]();});}function cleanSettings(){const _0x14c57e=_0x3d97ce;let _0x185831=settings;return settings['telegramToken']&&settings[_0x14c57e(0x1f8)]!=''&&(_0x185831={..._0x185831,'telegramToken':_0x14c57e(0x26b)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x185831={..._0x185831,'bbPassword':_0x14c57e(0x26b)}),_0x185831;}function updateBB(){const _0x498f8a=_0x3d97ce;installingUpdate=!![],config[_0x498f8a(0x2ed)](_0x4d61d6=>{const _0x1dc12a=_0x498f8a;restartBot(_0x4d61d6[_0x1dc12a(0x2f3)]);}),process[_0x498f8a(0x250)]({'update':!![]},_0x3e56a1=>{});}function startBot(_0x40ad40,_0x485b93,_0x1a91d7){const _0x14df3e=_0x3d97ce;let _0x5ee2a6=![];const _0x261832=_0x40ad40[0x0];_0x485b93={..._0x485b93,'stdio':[_0x14df3e(0x240),_0x14df3e(0x240),_0x14df3e(0x240),_0x14df3e(0x199)]},pid[_0x261832]=childProcess[_0x14df3e(0x1e2)](botfile,_0x40ad40,_0x485b93),pid[_0x261832]['on'](_0x14df3e(0x1e4),_0x51dd4f=>{const _0xe1ef70=_0x14df3e;switch(Object[_0xe1ef70(0x215)](_0x51dd4f)[0x0]){case'botname':updateBotName(_0x261832,_0x51dd4f[_0xe1ef70(0x2af)]);break;case _0xe1ef70(0x201):updateBotManager();break;case _0xe1ef70(0x1d3):updateStatus(_0x261832,_0x51dd4f[_0xe1ef70(0x1d3)]);break;case _0xe1ef70(0x1a9):updateLive(_0x261832,_0x51dd4f['live']);break;case _0xe1ef70(0x265):updateLive(_0x261832,_0x51dd4f[_0xe1ef70(0x265)]),io['to'](_0x261832)[_0xe1ef70(0x192)]('status',{'access':{'allow':![],'reason':_0xe1ef70(0x2a8),'token':null}});break;case'stop':_0x51dd4f[_0xe1ef70(0x2e8)]==_0xe1ef70(0x212)&&restartBot(_0x261832);_0x51dd4f[_0xe1ef70(0x2e8)]=='kill'&&toggleBot(_0x261832,_0xe1ef70(0x2d1),_0xe1ef70(0x19c));break;case'telegram':sendTelegram(_0x261832,_0x51dd4f[_0xe1ef70(0x1a6)]);break;case _0xe1ef70(0x1e3):sendTelegramMsg(_0x51dd4f['telegrammsg']);break;case _0xe1ef70(0x1f4):io['to'](_0x261832)[_0xe1ef70(0x192)](_0x51dd4f['function'],_0x51dd4f[_0xe1ef70(0x1c5)]);break;}}),pid[_0x261832]['on'](_0x14df3e(0x2f5),function(_0x25bac6){if(_0x5ee2a6)return;_0x5ee2a6=!![],_0x1a91d7(_0x25bac6);}),pid[_0x261832]['on'](_0x14df3e(0x255),function(_0x4be4de){const _0x18c5ce=_0x14df3e;if(installingUpdate)return;if(_0x5ee2a6)return;_0x5ee2a6=!![],_0x1a91d7(null);const _0x30e3c9=dbConfig[_0x18c5ce(0x27b)](_0x18c5ce(0x231))[_0x18c5ce(0x289)]({'botID':_0x261832})[_0x18c5ce(0x287)]();_0x30e3c9&&(_0x30e3c9[_0x18c5ce(0x1d3)]==_0x18c5ce(0x18f)||_0x30e3c9[_0x18c5ce(0x1d3)]==_0x18c5ce(0x1df))&&(updateLive(_0x261832,'stopped'),logging(_0x18c5ce(0x1d4)+_0x261832),startBot([_0x261832,userID],{'cwd':bbpath},function(_0x2aeedf){if(_0x2aeedf)logging(_0x2aeedf);}));});}function stopBot(_0x826002){const _0x58dc8b=_0x3d97ce;getClientsWithBotID(_0x826002)[_0x58dc8b(0x2ed)](_0x17dabe=>{const _0x2686c=_0x58dc8b;getSocket(_0x17dabe['id'])[_0x2686c(0x233)](!![]),removeClient(_0x17dabe['id']);}),pid[_0x826002]&&(pid[_0x826002][_0x58dc8b(0x1f0)](),pid[_0x826002]=null);}function restartBot(_0xd565c6){if(pid[_0xd565c6])pid[_0xd565c6]['kill']();}function addBot(){const _0x18655c=_0x3d97ce;let _0x4c1298;for(let _0x30bfe5=0x1;_0x30bfe5<0x3e9;_0x30bfe5++){_0x4c1298=_0x30bfe5['toString']()[_0x18655c(0x24d)](0x3,'0');let _0x397391=config[_0x18655c(0x289)](_0x17af46=>_0x17af46['botID']==_0x4c1298);if(!_0x397391)break;}if(_0x4c1298===_0x18655c(0x302)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x4c1298),dbConfig[_0x18655c(0x27b)](_0x18655c(0x231))[_0x18655c(0x21a)]({'botID':_0x4c1298,'botname':_0x18655c(0x203)+_0x4c1298,'status':_0x18655c(0x1df),'live':''})['write'](),startBot([_0x4c1298,userID],{'cwd':bbpath},function(_0x32bf47){if(_0x32bf47)logging(_0x32bf47);}),config=getConfiguration(),io['to'](_0x18655c(0x242))[_0x18655c(0x192)](_0x18655c(0x231),config);}function deleteBot(_0x39c0a9){const _0x4ca995=_0x3d97ce;getClientsWithBotID(_0x39c0a9)[_0x4ca995(0x2ed)](_0x6a4b7=>{const _0x23fb33=_0x4ca995;getSocket(_0x6a4b7['id'])[_0x23fb33(0x233)](!![]),removeClient(_0x6a4b7['id']);}),dbConfig['get'](_0x4ca995(0x231))['remove']({'botID':_0x39c0a9})['write'](),logging('deleted\x20Bot\x20'+_0x39c0a9),stopBot(_0x39c0a9);try{fs[_0x4ca995(0x27c)](path['join'](configpath,_0x4ca995(0x1b8)+_0x39c0a9+_0x4ca995(0x1ef))),fs['unlinkSync'](path[_0x4ca995(0x1f7)](configpath,'bot-'+_0x39c0a9+_0x4ca995(0x256))),fs[_0x4ca995(0x27c)](path['join'](configpath,_0x4ca995(0x1b8)+_0x39c0a9+_0x4ca995(0x2a2))),fs[_0x4ca995(0x27c)](path[_0x4ca995(0x1f7)](configpath,_0x4ca995(0x1b8)+_0x39c0a9+_0x4ca995(0x209)));}catch(_0x574c51){if(_0x574c51)logging(_0x4ca995(0x2c7),_0x574c51);}config=getConfiguration(),io['to'](_0x4ca995(0x242))[_0x4ca995(0x192)](_0x4ca995(0x231),config);}function toggleBot(_0x849a1d,_0x337d21,_0x51dc49){const _0x34bdab=_0x3d97ce;dbConfig['get'](_0x34bdab(0x231))[_0x34bdab(0x289)]({'botID':_0x849a1d})[_0x34bdab(0x1f1)]({'status':_0x337d21})['assign']({'live':_0x51dc49})[_0x34bdab(0x276)]();if(_0x337d21==_0x34bdab(0x18f)||_0x337d21==_0x34bdab(0x1df))logging(_0x34bdab(0x2c3)+_0x849a1d),startBot([_0x849a1d,userID],{'cwd':bbpath},function(_0xce9e84){if(_0xce9e84)logging(_0xce9e84);});else(_0x337d21==_0x34bdab(0x2d1)||_0x337d21==_0x34bdab(0x2c6))&&(logging(_0x34bdab(0x191)+_0x849a1d),stopBot(_0x849a1d));config=getConfiguration(),io['to'](_0x34bdab(0x242))[_0x34bdab(0x192)]('bots',config);}function toggleStatus(_0x1423ca){const _0x4d0124=_0x3d97ce;let _0x4a43be=dbConfig[_0x4d0124(0x27b)]('bots')[_0x4d0124(0x289)]({'botID':_0x1423ca})[_0x4d0124(0x287)](),_0x5c0584;if(_0x4a43be[_0x4d0124(0x1d3)]===_0x4d0124(0x18f))_0x5c0584='disabled';else{if(_0x4a43be[_0x4d0124(0x1d3)]===_0x4d0124(0x1df))_0x5c0584=_0x4d0124(0x2c6);else{if(_0x4a43be[_0x4d0124(0x1d3)]===_0x4d0124(0x2c6))_0x5c0584='new';else{if(_0x4a43be[_0x4d0124(0x1d3)]===_0x4d0124(0x2d1))_0x5c0584=_0x4d0124(0x18f);}}}return _0x5c0584;}function updateStatus(_0x566ffc,_0x5ae74b){const _0x395c84=_0x3d97ce;dbConfig[_0x395c84(0x27b)](_0x395c84(0x231))['find']({'botID':_0x566ffc})[_0x395c84(0x1f1)]({'status':_0x5ae74b})[_0x395c84(0x276)](),config=getConfiguration(),io['to'](_0x395c84(0x242))[_0x395c84(0x192)](_0x395c84(0x231),config);}function updateLive(_0x2434c9,_0xe0b237){const _0xf5997f=_0x3d97ce;dbConfig['get']('bots')[_0xf5997f(0x289)]({'botID':_0x2434c9})[_0xf5997f(0x1f1)]({'live':_0xe0b237})[_0xf5997f(0x276)](),config=getConfiguration(),io['to'](_0xf5997f(0x242))['emit']('bots',config);}function updateBotName(_0x1adb1d,_0x1e3319){const _0x421507=_0x3d97ce;dbConfig[_0x421507(0x27b)](_0x421507(0x231))[_0x421507(0x289)]({'botID':_0x1adb1d})[_0x421507(0x1f1)]({'botname':_0x1e3319})[_0x421507(0x276)](),config=getConfiguration(),io['to'](_0x421507(0x242))[_0x421507(0x192)](_0x421507(0x231),config);}function updateBotManager(){const _0x26af34=_0x3d97ce;config=getConfiguration(),io['to'](_0x26af34(0x242))[_0x26af34(0x192)]('bots',config);}function toggleBotMode(_0x596004){const _0x266944=_0x3d97ce;if(pid[_0x596004])pid[_0x596004]['send']({'function':'toggleBotMode','args':null});else{const _0x2b1f5b=configpath+_0x266944(0x1b8)+_0x596004+_0x266944(0x1ef),_0x2042ea=fs['readFileSync'](_0x2b1f5b),_0x1e6e79=JSON[_0x266944(0x27e)](_0x2042ea),_0x3cba00=_0x1e6e79[_0x266944(0x2b7)][0x0][_0x266944(0x29c)];_0x1e6e79[_0x266944(0x2b7)][0x0][_0x266944(0x29c)]=!_0x3cba00;const _0x49ab74=JSON[_0x266944(0x22f)](_0x1e6e79,null,0x2);fs[_0x266944(0x295)](_0x2b1f5b,_0x49ab74),config=getConfiguration(),io['to']('botmanager')['emit'](_0x266944(0x231),config);}}function telegramError(_0x4743f8){console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function _0xa273(_0x57e551,_0x167958){const _0x27f5de=_0x1144();return _0xa273=function(_0x22f3df,_0x1ee4fe){_0x22f3df=_0x22f3df-0x186;let _0x11447f=_0x27f5de[_0x22f3df];return _0x11447f;},_0xa273(_0x57e551,_0x167958);}function validateTelegram(_0x893caa){const _0x1113d3=_0x3d97ce;if(_0x893caa[_0x1113d3(0x1a2)][_0x1113d3(0x23e)]!=settings[_0x1113d3(0x239)]&&'@'+_0x893caa[_0x1113d3(0x1a2)][_0x1113d3(0x23e)]!=settings[_0x1113d3(0x239)])return tgBot[_0x1113d3(0x2e3)](_0x893caa[_0x1113d3(0x18a)]['id'],_0x1113d3(0x237),{'parse_mode':'HTML'})[_0x1113d3(0x208)](_0xb080a3=>{telegramError(_0xb080a3);}),![];return!![];}async function initTelegram(){const _0x307439=_0x3d97ce;if(tgBot)tgBot[_0x307439(0x268)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x307439(0x1f8)],{'polling':!![]});let _0x6dd2d9=_0x307439(0x2de);_0x6dd2d9+='\x0a',_0x6dd2d9+=_0x307439(0x1a1),_0x6dd2d9+=_0x307439(0x25f),_0x6dd2d9+=_0x307439(0x290),_0x6dd2d9+=_0x307439(0x1dd),_0x6dd2d9+=_0x307439(0x1a5),_0x6dd2d9+=_0x307439(0x1de),_0x6dd2d9+=_0x307439(0x1cd),_0x6dd2d9+=_0x307439(0x2ff),_0x6dd2d9+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x6dd2d9+=_0x307439(0x1fc),_0x6dd2d9+=_0x307439(0x2e5),_0x6dd2d9+=_0x307439(0x2be);let _0x4083bd=_0x307439(0x19e);_0x4083bd+='\x0a',_0x4083bd+=_0x6dd2d9,tgBot[_0x307439(0x2a5)](/\/start/,_0x4c6ce3=>{const _0x3541cb=_0x307439;if(!validateTelegram(_0x4c6ce3))return;if(settings[_0x3541cb(0x1ca)]!=_0x4c6ce3[_0x3541cb(0x18a)]['id'])updateSetting(_0x3541cb(0x1ca),_0x4c6ce3['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x3541cb(0x2e3)](_0x4c6ce3[_0x3541cb(0x18a)]['id'],_0x4083bd)[_0x3541cb(0x208)](_0x546067=>{telegramError(_0x546067);});}),tgBot['onText'](/\/enable/,_0x4d21dc=>{const _0x2060bc=_0x307439;if(!validateTelegram(_0x4d21dc))return;if(settings[_0x2060bc(0x1ca)]!=_0x4d21dc['chat']['id'])updateSetting(_0x2060bc(0x1ca),_0x4d21dc[_0x2060bc(0x18a)]['id']);updateSetting(_0x2060bc(0x23f),!![]),tgBot[_0x2060bc(0x2e3)](_0x4d21dc[_0x2060bc(0x18a)]['id'],_0x2060bc(0x1c3))['catch'](_0x6eb9ab=>{telegramError(_0x6eb9ab);});}),tgBot[_0x307439(0x2a5)](/\/config/,async _0x2e00e1=>{const _0x4de520=_0x307439;if(!validateTelegram(_0x2e00e1))return;tgBot[_0x4de520(0x2c4)]('callback_query'),tgBot[_0x4de520(0x2e3)](_0x2e00e1['chat']['id'],_0x4de520(0x1e5),{'reply_markup':{'inline_keyboard':[[{'text':_0x4de520(0x2b6),'callback_data':_0x4de520(0x288)},{'text':'Alerts','callback_data':_0x4de520(0x2cb)},{'text':_0x4de520(0x204),'callback_data':_0x4de520(0x2a1)}]]}})[_0x4de520(0x208)](_0x11f5bc=>{telegramError(_0x11f5bc);}),tgBot['on'](_0x4de520(0x2d6),async _0x54afa4=>{const _0x10c4bf=_0x4de520,_0xc7e4a2=_0x54afa4[_0x10c4bf(0x29f)],_0x40e49b=_0x54afa4[_0x10c4bf(0x1e4)];tgBot[_0x10c4bf(0x291)](_0x54afa4['id'])[_0x10c4bf(0x1b0)](async()=>{const _0x2f5911=_0x10c4bf;_0xc7e4a2==_0x2f5911(0x288)&&(updateSetting(_0x2f5911(0x2ba),_0x2f5911(0x288)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2f5911(0x2e3)](_0x40e49b[_0x2f5911(0x18a)]['id'],_0x2f5911(0x1cc))[_0x2f5911(0x208)](_0x1be85f=>{telegramError(_0x1be85f);}));_0xc7e4a2==_0x2f5911(0x2cb)&&(updateSetting(_0x2f5911(0x2ba),_0x2f5911(0x2cb)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2f5911(0x2e3)](_0x40e49b[_0x2f5911(0x18a)]['id'],_0x2f5911(0x271))[_0x2f5911(0x208)](_0x447aa6=>{telegramError(_0x447aa6);}));_0xc7e4a2==_0x2f5911(0x2a1)&&(updateSetting(_0x2f5911(0x2ba),_0x2f5911(0x2a1)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2f5911(0x2e3)](_0x40e49b[_0x2f5911(0x18a)]['id'],_0x2f5911(0x20c))['catch'](_0x6f5db4=>{telegramError(_0x6f5db4);}));if(!settings['telegramChatId'])tgBot[_0x2f5911(0x2e3)](_0x40e49b[_0x2f5911(0x18a)]['id'],_0x2f5911(0x20e))[_0x2f5911(0x208)](_0x32cde0=>{telegramError(_0x32cde0);});}),tgBot[_0x10c4bf(0x2c4)](_0x10c4bf(0x2d6));});}),tgBot[_0x307439(0x2a5)](/\/status/,_0x468baf=>{const _0x4de05c=_0x307439;if(!validateTelegram(_0x468baf))return;const _0x4feed7=getBotsWithMode();let _0x249a7b='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x4de05c(0x2ed)](_0x2d89e9=>{const _0x5b59f4=_0x4de05c,_0x366c5d=_0x4feed7[_0x5b59f4(0x289)](_0x1b8451=>_0x1b8451['botID']==_0x2d89e9['botID'])[_0x5b59f4(0x1e1)];_0x249a7b+=_0x5b59f4(0x203)+_0x2d89e9[_0x5b59f4(0x2f3)]+':\x20'+_0x2d89e9[_0x5b59f4(0x1d3)]+'\x20|\x20'+_0x366c5d+_0x5b59f4(0x2ce)+_0x2d89e9[_0x5b59f4(0x1a9)]+'\x0a';}),_0x249a7b+='\x0a',_0x249a7b+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x249a7b+=!settings['telegramEnabled']?_0x4de05c(0x24b):_0x4de05c(0x211),_0x249a7b+=settings[_0x4de05c(0x23f)]?settings[_0x4de05c(0x2ba)]==_0x4de05c(0x2a1)?_0x4de05c(0x22c):_0x4de05c(0x27f)+settings['telegramEvents']+_0x4de05c(0x2bc):'',tgBot[_0x4de05c(0x2e3)](_0x468baf['chat']['id'],_0x249a7b,{'parse_mode':_0x4de05c(0x2d9)})[_0x4de05c(0x208)](_0x5bd6e2=>{telegramError(_0x5bd6e2);});}),tgBot['onText'](/\/restart/,_0x3cf6d3=>{const _0x178f80=_0x307439;if(!validateTelegram(_0x3cf6d3))return;tgBot['removeListener'](_0x178f80(0x2d6));const _0xb39470=getEnabledBots();if(_0xb39470[_0x178f80(0x2cd)]==0x0)tgBot[_0x178f80(0x2e3)](_0x3cf6d3[_0x178f80(0x18a)]['id'],_0x178f80(0x300))[_0x178f80(0x208)](_0x122a9e=>{telegramError(_0x122a9e);});else{if(_0xb39470[_0x178f80(0x2cd)]>0x1)_0xb39470['push']({'botID':_0x178f80(0x2a1)});let _0x341aa1=[],_0x397e54=[];const _0x5cb157=_0xb39470[_0x178f80(0x2cd)]%0x4==0x0||_0xb39470[_0x178f80(0x2cd)]%0x4==0x3||_0xb39470[_0x178f80(0x2cd)]%0x3==0x1?0x4:0x3;let _0xbb97b2=0x0;_0xb39470[_0x178f80(0x2ed)]((_0x44f0ff,_0x5eba67)=>{const _0x4b7763=_0x178f80;if(_0x5eba67%_0x5cb157==0x0)_0x397e54=[];_0x397e54[_0x4b7763(0x21a)]({'text':_0x44f0ff[_0x4b7763(0x2f3)]==_0x4b7763(0x2a1)?_0x4b7763(0x2d7):_0x4b7763(0x203)+_0x44f0ff[_0x4b7763(0x2f3)],'callback_data':_0x44f0ff[_0x4b7763(0x2f3)]}),_0x5eba67%_0x5cb157==0x0&&(_0x341aa1[_0xbb97b2]=_0x397e54,_0xbb97b2++);}),tgBot[_0x178f80(0x2e3)](_0x3cf6d3[_0x178f80(0x18a)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x341aa1}})['catch'](_0x140839=>{telegramError(_0x140839);}),tgBot['on']('callback_query',async _0x2a5e3b=>{const _0x32d6b6=_0x178f80,_0x2de821=_0x2a5e3b['data'],_0x4cd746=_0x2a5e3b[_0x32d6b6(0x1e4)];tgBot[_0x32d6b6(0x291)](_0x2a5e3b['id'])['then'](async()=>{const _0x580185=_0x32d6b6;_0x2de821==_0x580185(0x2a1)?(tgBot[_0x580185(0x2e3)](_0x4cd746[_0x580185(0x18a)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x580185(0x208)](_0x594329=>{telegramError(_0x594329);}),config['forEach'](_0xdb57be=>{restartBot(_0xdb57be['botID']);})):(tgBot[_0x580185(0x2e3)](_0x4cd746[_0x580185(0x18a)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x2de821)[_0x580185(0x208)](_0xdc09f8=>{telegramError(_0xdc09f8);}),restartBot(_0x2de821));}),tgBot[_0x32d6b6(0x2c4)](_0x32d6b6(0x2d6));});}}),tgBot[_0x307439(0x2a5)](/\/on/,_0x524014=>{const _0x56add9=_0x307439;if(!validateTelegram(_0x524014))return;tgBot['removeListener'](_0x56add9(0x2d6));const _0x248ce9=getDisabledBots();if(_0x248ce9[_0x56add9(0x2cd)]==0x0)tgBot[_0x56add9(0x2e3)](_0x524014[_0x56add9(0x18a)]['id'],_0x56add9(0x2e9))[_0x56add9(0x208)](_0x3b060d=>{telegramError(_0x3b060d);});else{if(_0x248ce9['length']>0x1)_0x248ce9['push']({'botID':_0x56add9(0x2a1)});let _0x39a368=[],_0x23033b=[];const _0xfa2d31=_0x248ce9[_0x56add9(0x2cd)]%0x4==0x0||_0x248ce9['length']%0x4==0x3||_0x248ce9[_0x56add9(0x2cd)]%0x3==0x1?0x4:0x3;let _0x131196=0x0;_0x248ce9[_0x56add9(0x2ed)]((_0xb37cde,_0x2416c8)=>{const _0x3a4781=_0x56add9;if(_0x2416c8%_0xfa2d31==0x0)_0x23033b=[];_0x23033b[_0x3a4781(0x21a)]({'text':_0xb37cde[_0x3a4781(0x2f3)]==_0x3a4781(0x2a1)?_0x3a4781(0x2d7):_0x3a4781(0x203)+_0xb37cde[_0x3a4781(0x2f3)],'callback_data':_0xb37cde[_0x3a4781(0x2f3)]}),_0x2416c8%_0xfa2d31==0x0&&(_0x39a368[_0x131196]=_0x23033b,_0x131196++);}),tgBot[_0x56add9(0x2e3)](_0x524014['chat']['id'],_0x56add9(0x2f4),{'reply_markup':{'inline_keyboard':_0x39a368}})[_0x56add9(0x208)](_0x1aad49=>{telegramError(_0x1aad49);}),tgBot['on'](_0x56add9(0x2d6),async _0x2cf28c=>{const _0x390a6f=_0x56add9,_0x53e959=_0x2cf28c[_0x390a6f(0x29f)],_0x324c67=_0x2cf28c[_0x390a6f(0x1e4)];tgBot[_0x390a6f(0x291)](_0x2cf28c['id'])['then'](async()=>{const _0x17e1ad=_0x390a6f;_0x53e959==_0x17e1ad(0x2a1)?(tgBot[_0x17e1ad(0x2e3)](_0x324c67[_0x17e1ad(0x18a)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x17e1ad(0x208)](_0x309f21=>{telegramError(_0x309f21);}),_0x248ce9[_0x17e1ad(0x2ed)](_0x41ea84=>{const _0x2687da=_0x17e1ad;if(_0x41ea84['botID']!='all')toggleBot(_0x41ea84['botID'],toggleStatus(_0x41ea84[_0x2687da(0x2f3)]),'stopped');})):(tgBot[_0x17e1ad(0x2e3)](_0x324c67[_0x17e1ad(0x18a)]['id'],_0x17e1ad(0x27a)+_0x53e959)[_0x17e1ad(0x208)](_0x49761d=>{telegramError(_0x49761d);}),toggleBot(_0x53e959,toggleStatus(_0x53e959),'stopped'));}),tgBot[_0x390a6f(0x2c4)](_0x390a6f(0x2d6));});}}),tgBot[_0x307439(0x2a5)](/\/off/,_0x2a2a1c=>{const _0xba2433=_0x307439;if(!validateTelegram(_0x2a2a1c))return;tgBot[_0xba2433(0x2c4)](_0xba2433(0x2d6));const _0x2c930f=getEnabledBots();if(_0x2c930f[_0xba2433(0x2cd)]==0x0)tgBot[_0xba2433(0x2e3)](_0x2a2a1c[_0xba2433(0x18a)]['id'],_0xba2433(0x300))[_0xba2433(0x208)](_0x59fcbe=>{telegramError(_0x59fcbe);});else{if(_0x2c930f['length']>0x1)_0x2c930f[_0xba2433(0x21a)]({'botID':_0xba2433(0x2a1)});let _0x32c1bf=[],_0x139bee=[];const _0x5e56d2=_0x2c930f[_0xba2433(0x2cd)]%0x4==0x0||_0x2c930f[_0xba2433(0x2cd)]%0x4==0x3||_0x2c930f[_0xba2433(0x2cd)]%0x3==0x1?0x4:0x3;let _0x118780=0x0;_0x2c930f[_0xba2433(0x2ed)]((_0x220f78,_0x42ee82)=>{const _0x5680e7=_0xba2433;if(_0x42ee82%_0x5e56d2==0x0)_0x139bee=[];_0x139bee['push']({'text':_0x220f78[_0x5680e7(0x2f3)]==_0x5680e7(0x2a1)?_0x5680e7(0x2d7):_0x5680e7(0x203)+_0x220f78[_0x5680e7(0x2f3)],'callback_data':_0x220f78[_0x5680e7(0x2f3)]}),_0x42ee82%_0x5e56d2==0x0&&(_0x32c1bf[_0x118780]=_0x139bee,_0x118780++);}),tgBot['sendMessage'](_0x2a2a1c['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x32c1bf}})[_0xba2433(0x208)](_0x3f335b=>{telegramError(_0x3f335b);}),tgBot['on'](_0xba2433(0x2d6),async _0x125a90=>{const _0x2a770d=_0xba2433,_0x3c647f=_0x125a90['data'],_0x483cdb=_0x125a90[_0x2a770d(0x1e4)];tgBot[_0x2a770d(0x291)](_0x125a90['id'])[_0x2a770d(0x1b0)](async()=>{const _0x3275ca=_0x2a770d;_0x3c647f==_0x3275ca(0x2a1)?(tgBot[_0x3275ca(0x2e3)](_0x483cdb['chat']['id'],_0x3275ca(0x260))[_0x3275ca(0x208)](_0x295edb=>{telegramError(_0x295edb);}),_0x2c930f['forEach'](_0x37c155=>{const _0x435a3f=_0x3275ca;if(_0x37c155[_0x435a3f(0x2f3)]!=_0x435a3f(0x2a1))toggleBot(_0x37c155['botID'],toggleStatus(_0x37c155[_0x435a3f(0x2f3)]),'stopped');})):(tgBot['sendMessage'](_0x483cdb['chat']['id'],_0x3275ca(0x221)+_0x3c647f)[_0x3275ca(0x208)](_0x45c629=>{telegramError(_0x45c629);}),toggleBot(_0x3c647f,toggleStatus(_0x3c647f),'stopped'));}),tgBot[_0x2a770d(0x2c4)](_0x2a770d(0x2d6));});}}),tgBot[_0x307439(0x2a5)](/\/portfolio/,_0x27b39c=>{const _0x1ca856=_0x307439;if(!validateTelegram(_0x27b39c))return;tgBot[_0x1ca856(0x2c4)](_0x1ca856(0x2d6));const _0x2997fe=getEnabledBots();if(_0x2997fe[_0x1ca856(0x2cd)]==0x0)tgBot[_0x1ca856(0x2e3)](_0x27b39c[_0x1ca856(0x18a)]['id'],_0x1ca856(0x300))[_0x1ca856(0x208)](_0x3bf8e0=>{telegramError(_0x3bf8e0);});else{if(_0x2997fe[_0x1ca856(0x2cd)]>0x1){let _0x5b0dc0=[],_0xce279e=[];const _0x1f5077=_0x2997fe[_0x1ca856(0x2cd)]%0x4==0x0||_0x2997fe[_0x1ca856(0x2cd)]%0x4==0x3||_0x2997fe[_0x1ca856(0x2cd)]%0x3==0x1?0x4:0x3;let _0x3b99a3=0x0;_0x2997fe[_0x1ca856(0x2ed)]((_0x1b35ac,_0xf58bbf)=>{const _0x3f43ed=_0x1ca856;if(_0xf58bbf%_0x1f5077==0x0)_0xce279e=[];_0xce279e[_0x3f43ed(0x21a)]({'text':_0x3f43ed(0x203)+_0x1b35ac[_0x3f43ed(0x2f3)],'callback_data':_0x1b35ac[_0x3f43ed(0x2f3)]}),_0xf58bbf%_0x1f5077==0x0&&(_0x5b0dc0[_0x3b99a3]=_0xce279e,_0x3b99a3++);}),tgBot[_0x1ca856(0x2e3)](_0x27b39c[_0x1ca856(0x18a)]['id'],_0x1ca856(0x1a4),{'reply_markup':{'inline_keyboard':_0x5b0dc0}})[_0x1ca856(0x208)](_0x13bf3c=>{telegramError(_0x13bf3c);}),tgBot['on'](_0x1ca856(0x2d6),async _0x2bb673=>{const _0x1f970b=_0x1ca856,_0x130c95=_0x2bb673[_0x1f970b(0x29f)],_0x5c095e=_0x2bb673[_0x1f970b(0x1e4)];tgBot[_0x1f970b(0x291)](_0x2bb673['id'])[_0x1f970b(0x1b0)](async()=>{const _0x40e037=_0x1f970b;if(pid[_0x130c95])pid[_0x130c95][_0x40e037(0x250)]({'function':_0x40e037(0x281),'args':null});}),tgBot[_0x1f970b(0x2c4)](_0x1f970b(0x2d6));});}else{const _0x5dfe8f=_0x2997fe[0x0][_0x1ca856(0x2f3)];if(pid[_0x5dfe8f])pid[_0x5dfe8f][_0x1ca856(0x250)]({'function':_0x1ca856(0x281),'args':null});}}}),tgBot[_0x307439(0x2a5)](/\/update/,async _0x1ea84b=>{const _0x3d876e=_0x307439;if(!validateTelegram(_0x1ea84b))return;tgBot[_0x3d876e(0x2c4)](_0x3d876e(0x2d6)),await getMessages();if(!updateAvailable)tgBot[_0x3d876e(0x2e3)](_0x1ea84b['chat']['id'],_0x3d876e(0x2ae))[_0x3d876e(0x208)](_0x272e80=>{telegramError(_0x272e80);});else!validInstallation?tgBot['sendMessage'](_0x1ea84b[_0x3d876e(0x18a)]['id'],_0x3d876e(0x186))[_0x3d876e(0x208)](_0xd96e0f=>{telegramError(_0xd96e0f);}):(tgBot['sendMessage'](_0x1ea84b[_0x3d876e(0x18a)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x3d876e(0x27d),'callback_data':_0x3d876e(0x1db)},{'text':'No','callback_data':'no'}]]}})[_0x3d876e(0x208)](_0x4fdf5c=>{telegramError(_0x4fdf5c);}),tgBot['on'](_0x3d876e(0x2d6),async _0x5a0d03=>{const _0x1f24a3=_0x3d876e,_0x3932cd=_0x5a0d03[_0x1f24a3(0x29f)],_0x3f4079=_0x5a0d03['message'];tgBot[_0x1f24a3(0x291)](_0x5a0d03['id'])['then'](async()=>{const _0x315d56=_0x1f24a3;_0x3932cd==_0x315d56(0x1db)&&(await tgBot[_0x315d56(0x2e3)](_0x3f4079[_0x315d56(0x18a)]['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x283de6=>{telegramError(_0x283de6);}),updateBB());_0x3932cd=='no'&&await tgBot[_0x315d56(0x2e3)](_0x3f4079['chat']['id'],_0x315d56(0x20d))[_0x315d56(0x208)](_0x1932a7=>{telegramError(_0x1932a7);});if(!settings['telegramChatId'])tgBot[_0x315d56(0x2e3)](_0x3f4079[_0x315d56(0x18a)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x315d56(0x208)](_0x1b64a0=>{telegramError(_0x1b64a0);});}),tgBot['removeListener'](_0x1f24a3(0x2d6));}));}),tgBot['onText'](/\/toggle/,_0x4fddbc=>{const _0x1e7d16=_0x307439;if(!validateTelegram(_0x4fddbc))return;tgBot['removeListener'](_0x1e7d16(0x2d6));const _0x4b93df=getBotsWithMode();if(_0x4b93df[_0x1e7d16(0x2cd)]==0x0)tgBot[_0x1e7d16(0x2e3)](_0x4fddbc[_0x1e7d16(0x18a)]['id'],_0x1e7d16(0x300))[_0x1e7d16(0x208)](_0x515aea=>{telegramError(_0x515aea);});else{let _0x4096c2=[],_0x1c7adf=[];const _0x33b81d=0x2;let _0x484785=0x0;_0x4b93df[_0x1e7d16(0x2ed)]((_0x5c6477,_0x22b228)=>{const _0x4e8b9c=_0x1e7d16;if(_0x22b228%_0x33b81d==0x0)_0x1c7adf=[];_0x1c7adf[_0x4e8b9c(0x21a)]({'text':'Bot\x20'+_0x5c6477[_0x4e8b9c(0x2f3)]+'\x20('+_0x5c6477['mode']+')','callback_data':_0x5c6477[_0x4e8b9c(0x2f3)]}),_0x22b228%_0x33b81d==0x0&&(_0x4096c2[_0x484785]=_0x1c7adf,_0x484785++);}),tgBot['sendMessage'](_0x4fddbc[_0x1e7d16(0x18a)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x4096c2}})['catch'](_0x9fd176=>{telegramError(_0x9fd176);}),tgBot['on'](_0x1e7d16(0x2d6),async _0x4fb627=>{const _0x1e218c=_0x1e7d16,_0x41cefd=_0x4fb627[_0x1e218c(0x29f)],_0x49968b=_0x4fb627[_0x1e218c(0x1e4)];tgBot[_0x1e218c(0x291)](_0x4fb627['id'])['then'](async()=>{const _0x26eefa=_0x1e218c,_0x19e59e=_0x4b93df[_0x26eefa(0x289)](_0x362957=>_0x362957[_0x26eefa(0x2f3)]==_0x41cefd),_0x360bc2=_0x19e59e['mode']=='auto'?_0x26eefa(0x1b4):'auto';tgBot[_0x26eefa(0x2e3)](_0x49968b[_0x26eefa(0x18a)]['id'],_0x26eefa(0x2a3)+_0x41cefd+_0x26eefa(0x1b7)+_0x360bc2+_0x26eefa(0x273))[_0x26eefa(0x208)](_0x164456=>{telegramError(_0x164456);}),toggleBotMode(_0x41cefd);}),tgBot['removeListener'](_0x1e218c(0x2d6));});}}),tgBot[_0x307439(0x2a5)](/\/names/,_0x20f318=>{const _0x4348d2=_0x307439;if(!validateTelegram(_0x20f318))return;let _0x4091f9='';config[_0x4348d2(0x2ed)](_0x5d7301=>{const _0x211458=_0x4348d2;_0x4091f9+=_0x211458(0x203)+_0x5d7301[_0x211458(0x2f3)]+':\x20'+_0x5d7301['botname']+'\x0a';}),tgBot['sendMessage'](_0x20f318[_0x4348d2(0x18a)]['id'],_0x4091f9,{'parse_mode':_0x4348d2(0x2d9)})[_0x4348d2(0x208)](_0x27cf52=>{telegramError(_0x27cf52);});}),tgBot[_0x307439(0x2a5)](/\/disable/,_0xa39873=>{const _0x5985e4=_0x307439;if(!validateTelegram(_0xa39873))return;tgBot[_0x5985e4(0x2e3)](_0xa39873['chat']['id'],_0x5985e4(0x305))[_0x5985e4(0x208)](_0x583389=>{telegramError(_0x583389);}),updateSetting(_0x5985e4(0x23f),![]);}),tgBot[_0x307439(0x2a5)](/\/help/,_0x3ac27d=>{const _0x7aa56a=_0x307439;if(!validateTelegram(_0x3ac27d))return;tgBot[_0x7aa56a(0x2e3)](_0x3ac27d['chat']['id'],_0x6dd2d9)[_0x7aa56a(0x208)](_0xe331e8=>{telegramError(_0xe331e8);});}),tgBot['on'](_0x307439(0x2c0),_0x26bae4=>{const _0x310b4f=_0x307439;_0x26bae4['toString']()[_0x310b4f(0x1ae)]('404\x20Not\x20Found')&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x310b4f(0x268)](),tgBot=null,io['to']('botmanager')[_0x310b4f(0x192)](_0x310b4f(0x243),_0x310b4f(0x1b9)));}),process[_0x307439(0x216)]('SIGINT',()=>{const _0x1750d4=_0x307439;if(tgBot)tgBot['stopPolling']();process[_0x1750d4(0x255)](0x1);}),process[_0x307439(0x216)]('SIGTERM',()=>{const _0x16d136=_0x307439;if(tgBot)tgBot[_0x16d136(0x268)]();process[_0x16d136(0x255)](0x1);});}}function disableTelegram(){const _0x53f0ac=_0x3d97ce;tgBot&&(tgBot[_0x53f0ac(0x268)](),tgBot=null);}function sendTelegram(_0x20cafb,_0x1a63b3){const _0x3a0c0c=_0x3d97ce;if(settings[_0x3a0c0c(0x23f)]){if(settings['telegramEvents']=='all'||(_0x1a63b3[_0x3a0c0c(0x26f)]==_0x3a0c0c(0x2f5)||_0x1a63b3['type']==_0x3a0c0c(0x229))&&settings['telegramEvents']==_0x3a0c0c(0x2cb)||_0x1a63b3['type']==_0x3a0c0c(0x253)&&settings[_0x3a0c0c(0x2ba)]==_0x3a0c0c(0x288)){if(tgBot&&settings[_0x3a0c0c(0x1ca)]){if(_0x1a63b3[_0x3a0c0c(0x2dd)])tgBot[_0x3a0c0c(0x2e3)](settings[_0x3a0c0c(0x1ca)],_0x1a63b3['botname']+_0x3a0c0c(0x213)+_0x1a63b3['event'])[_0x3a0c0c(0x208)](_0x2927d3=>{telegramError(_0x2927d3);});else tgBot[_0x3a0c0c(0x2e3)](settings[_0x3a0c0c(0x1ca)],_0x3a0c0c(0x203)+_0x20cafb+_0x3a0c0c(0x213)+_0x1a63b3[_0x3a0c0c(0x1bd)])[_0x3a0c0c(0x208)](_0x15dde1=>{telegramError(_0x15dde1);});}}}}async function sendTelegramMsg(_0x6478bd,_0x2b4f29=_0x3d97ce(0x2d9)){const _0x223b19=_0x3d97ce;return settings[_0x223b19(0x23f)]&&tgBot&&settings[_0x223b19(0x1ca)]?(await tgBot[_0x223b19(0x2e3)](settings[_0x223b19(0x1ca)],_0x6478bd,{'parse_mode':_0x2b4f29})[_0x223b19(0x208)](_0x5c0776=>{telegramError(_0x5c0776);}),!![]):![];}function getDeviceWithIp(_0xcfc3f5){const _0x316617=_0x3d97ce;return devices[_0x316617(0x289)](_0x430f52=>_0x430f52['ip']===_0xcfc3f5);}function temporaryAccess2FA(_0x5ba6e9,_0x5f5759){const _0x5b616f=_0x3d97ce;let _0x2542a8=new Date(),_0x33c96e=![];if(lastIpApproval){if(_0x2542a8-lastIpApproval<0x1388)_0x33c96e=!![];}lastIpApproval=new Date();if(_0x33c96e)return;tgBot&&settings[_0x5b616f(0x1ca)]&&(tgBot['removeListener'](_0x5b616f(0x2d6)),tgBot[_0x5b616f(0x2e3)](settings[_0x5b616f(0x1ca)],_0x5b616f(0x293)+normalizeIP(_0x5f5759)['show']+_0x5b616f(0x18c),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5b616f(0x1bb),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x5b616f(0x2ee),'callback_data':'30'},{'text':_0x5b616f(0x1ea),'callback_data':_0x5b616f(0x1ea)}]]}})[_0x5b616f(0x208)](_0x9cbdb9=>{telegramError(_0x9cbdb9);}),tgBot['on']('callback_query',async _0x2ecc3c=>{const _0x331199=_0x5b616f,_0x59e7a0=_0x2ecc3c[_0x331199(0x29f)],_0x4c38ad=_0x2ecc3c[_0x331199(0x1e4)];tgBot[_0x331199(0x291)](_0x2ecc3c['id'])[_0x331199(0x1b0)](async()=>{const _0x28aa85=_0x331199;devices[_0x5ba6e9]['telegramIpApproval']={'clientip':_0x5f5759,'timestamp':new Date()[_0x28aa85(0x2fa)](),'expiry':_0x59e7a0},_0x59e7a0!=_0x28aa85(0x1ea)?(await tgBot['sendMessage'](_0x4c38ad[_0x28aa85(0x18a)]['id'],_0x28aa85(0x1ab)+_0x59e7a0+_0x28aa85(0x23d),{'parse_mode':_0x28aa85(0x2d9)})['catch'](_0x533258=>{telegramError(_0x533258);}),io['to'](_0x5ba6e9)[_0x28aa85(0x192)](_0x28aa85(0x1d3),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x28aa85(0x2e3)](_0x4c38ad[_0x28aa85(0x18a)]['id'],_0x28aa85(0x224))[_0x28aa85(0x208)](_0x3103c4=>{telegramError(_0x3103c4);}),io['to'](_0x5ba6e9)[_0x28aa85(0x192)](_0x28aa85(0x1d3),{'access':{'allow':![],'reason':_0x28aa85(0x2cf),'token':null}}));}),tgBot[_0x331199(0x2c4)](_0x331199(0x2d6));}));}function loginAccess2FA(_0xf8a298,_0x45087a){const _0x4434ab=_0x3d97ce;tgBot&&settings[_0x4434ab(0x1ca)]&&(tgBot[_0x4434ab(0x2c4)](_0x4434ab(0x2d6)),tgBot['sendMessage'](settings[_0x4434ab(0x1ca)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x45087a)[_0x4434ab(0x1e8)]+_0x4434ab(0x18c),{'parse_mode':_0x4434ab(0x2d9),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x4434ab(0x1ea),'callback_data':'reject'}]]}})['catch'](_0x523c76=>{telegramError(_0x523c76);}),tgBot['on'](_0x4434ab(0x2d6),async _0x57fb0a=>{const _0x2bcc3b=_0x4434ab,_0x2d5790=_0x57fb0a[_0x2bcc3b(0x29f)],_0x1d5e18=_0x57fb0a[_0x2bcc3b(0x1e4)];tgBot[_0x2bcc3b(0x291)](_0x57fb0a['id'])[_0x2bcc3b(0x1b0)](async()=>{const _0x2f7af2=_0x2bcc3b;devices[_0xf8a298][_0x2f7af2(0x2c5)]={'clientip':_0x45087a,'timestamp':new Date()[_0x2f7af2(0x2fa)](),'expiry':_0x2d5790},_0x2d5790!=_0x2f7af2(0x1ea)?(await tgBot[_0x2f7af2(0x2e3)](_0x1d5e18[_0x2f7af2(0x18a)]['id'],_0x2f7af2(0x227),{'parse_mode':_0x2f7af2(0x2d9)})[_0x2f7af2(0x208)](_0x53e7c6=>{telegramError(_0x53e7c6);}),io['to'](_0xf8a298)[_0x2f7af2(0x192)](_0x2f7af2(0x1d3),{'access':{'allow':![],'reason':_0x2f7af2(0x2a8),'token':null}})):(await tgBot[_0x2f7af2(0x2e3)](_0x1d5e18[_0x2f7af2(0x18a)]['id'],_0x2f7af2(0x1fa))[_0x2f7af2(0x208)](_0x2ce8b7=>{telegramError(_0x2ce8b7);}),io['to'](_0xf8a298)['emit'](_0x2f7af2(0x1d3),{'access':{'allow':![],'reason':_0x2f7af2(0x1c6),'token':null}}));}),tgBot[_0x2bcc3b(0x2c4)](_0x2bcc3b(0x2d6));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x77d8c1=_0x3d97ce;return dbConfig[_0x77d8c1(0x27b)](_0x77d8c1(0x231))[_0x77d8c1(0x280)](_0x77d8c1(0x2f3))[_0x77d8c1(0x2c9)]({'status':_0x77d8c1(0x18f)})['value']()||[];}function getDisabledBots(){const _0x4c6f44=_0x3d97ce;return dbConfig[_0x4c6f44(0x27b)](_0x4c6f44(0x231))['sortBy'](_0x4c6f44(0x2f3))['filter']({'status':_0x4c6f44(0x2d1)})[_0x4c6f44(0x287)]()||[];}function getBotsWithMode(){const _0x17407d=_0x3d97ce,_0x4c1785=dbConfig[_0x17407d(0x27b)](_0x17407d(0x231))[_0x17407d(0x280)]('botID')[_0x17407d(0x287)]()||[];return _0x4c1785['forEach'](_0x96a87=>{const _0x38e881=_0x17407d,_0x40de5b=configpath+_0x38e881(0x1b8)+_0x96a87[_0x38e881(0x2f3)]+_0x38e881(0x1ef),_0x5bc470=fs[_0x38e881(0x307)](_0x40de5b);if(_0x5bc470){const _0x5cd979=fs[_0x38e881(0x2b8)](_0x40de5b);try{const _0x4f0c13=JSON['parse'](_0x5cd979),_0x13223b=_0x4f0c13?_0x4f0c13[_0x38e881(0x2b7)][0x0]['headless']:![];_0x96a87[_0x38e881(0x1e1)]=_0x13223b?'auto':_0x38e881(0x1b4);}catch(_0x3eb33b){_0x96a87['mode']=_0x38e881(0x1b4);}}else _0x96a87['mode']=_0x38e881(0x1b4);}),_0x4c1785;}function getSettings(){const _0x365d8a=_0x3d97ce;let _0x5410ec=dbSettings[_0x365d8a(0x27b)](_0x365d8a(0x1a8))['value']();if(!_0x5410ec){const _0x340756=crypto['randomUUID']();mixpanel[_0x365d8a(0x1c4)](_0x340756),_0x5410ec={'timeshift':0x0,'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x365d8a(0x2d8),'userid':_0x340756},dbSettings['get'](_0x365d8a(0x1a8))['push'](_0x5410ec)[_0x365d8a(0x276)]();}return _0x5410ec;}function getSecure(){const _0x429ded=_0x3d97ce;return dbSecure[_0x429ded(0x27b)](_0x429ded(0x301))['value']()||{};}function getBlacklist(){const _0x161376=_0x3d97ce;return dbSecure[_0x161376(0x27b)](_0x161376(0x2f9))['value']()||[];}function broadcastToBots(_0x5b04d0,_0x28e0bb){const _0x2aaa54=_0x3d97ce;config[_0x2aaa54(0x2ed)](_0x3879d2=>{const _0x56cea6=_0x2aaa54;if(_0x3879d2[_0x56cea6(0x1d3)]==_0x56cea6(0x18f)&&_0x3879d2[_0x56cea6(0x1a9)]=='running'){if(pid[_0x3879d2['botID']])pid[_0x3879d2[_0x56cea6(0x2f3)]][_0x56cea6(0x250)]({[_0x5b04d0]:_0x28e0bb});}});}function storeSettings(_0x159ffe,_0x43489a=![]){const _0x5e7635=_0x3d97ce;_0x159ffe={...settings,..._0x159ffe};if(_0x43489a&&_0x159ffe[_0x5e7635(0x190)]!='************'&&_0x159ffe[_0x5e7635(0x190)]!=''){const _0x232c90=crypt[_0x5e7635(0x214)](secure[_0x5e7635(0x1d9)],_0x159ffe['bbPassword'])[_0x5e7635(0x1e4)][_0x5e7635(0x2c2)]('@')[0x0],_0x53d560=bcrypt[_0x5e7635(0x19b)](_0x232c90,saltRounds);_0x159ffe={..._0x159ffe,'bbPassword':_0x53d560};}if(_0x43489a&&_0x159ffe[_0x5e7635(0x1f8)]!=_0x5e7635(0x26b)&&_0x159ffe['telegramToken']!=''){const _0x238a2f=crypt[_0x5e7635(0x214)](secure[_0x5e7635(0x1d9)],_0x159ffe[_0x5e7635(0x1f8)])[_0x5e7635(0x1e4)][_0x5e7635(0x2c2)]('@')[0x0];_0x159ffe={..._0x159ffe,'telegramToken':_0x238a2f};}const _0x4cd3fd=_0x159ffe[_0x5e7635(0x1f8)]!=_0x5e7635(0x26b)&&_0x159ffe[_0x5e7635(0x1f8)]!=settings['telegramToken']||_0x159ffe[_0x5e7635(0x239)]!=settings[_0x5e7635(0x239)],_0x4cab5e=_0x159ffe[_0x5e7635(0x1f8)]==''||_0x159ffe[_0x5e7635(0x239)]=='';if(_0x4cd3fd)_0x159ffe['telegramEvents']='all';for(const [_0xca57f0,_0x5822ad]of Object[_0x5e7635(0x2bf)](_0x159ffe)){if(_0xca57f0==_0x5e7635(0x1f8)&&_0x5822ad==_0x5e7635(0x26b)){_0x159ffe[_0x5e7635(0x1f8)]=settings[_0x5e7635(0x1f8)];continue;};if(_0xca57f0==_0x5e7635(0x190)&&_0x5822ad==_0x5e7635(0x26b)){_0x159ffe[_0x5e7635(0x190)]=settings['bbPassword'];continue;};dbSettings[_0x5e7635(0x2db)](_0x5e7635(0x22d)+_0xca57f0,_0x5822ad)[_0x5e7635(0x276)]();}settings=_0x159ffe,io['to'](_0x5e7635(0x242))[_0x5e7635(0x192)](_0x5e7635(0x1a8),cleanSettings()),broadcastToBots(_0x5e7635(0x277),settings['timeshift']);if(_0x4cd3fd&&!_0x4cab5e)initTelegram();if(_0x4cd3fd&&_0x4cab5e)disableTelegram();getAllClients()[_0x5e7635(0x2ed)](_0x6b694d=>{const _0x2e2a33=_0x5e7635;getSocket(_0x6b694d['id'])[_0x2e2a33(0x192)](_0x2e2a33(0x1d3),{'access':{'allow':![],'reason':_0x2e2a33(0x2a8),'token':null}});});}function updateSetting(_0x1735ec,_0x2c7787){const _0x113c8f=_0x3d97ce;dbSettings[_0x113c8f(0x2db)](_0x113c8f(0x22d)+_0x1735ec,_0x2c7787)[_0x113c8f(0x276)](),settings=getSettings(),io['to'](_0x113c8f(0x242))[_0x113c8f(0x192)](_0x113c8f(0x1a8),cleanSettings());}function _0x1144(){const _0x8e3f7=['yes','timestamp','/restart\x20-\x20restart\x20bot(s)\x0a','/off\x20-\x20stop\x20bot(s)\x0a','new','version','mode','fork','telegrammsg','message','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','login\x20token\x20valid',',\x20must\x20be\x20a\x204\x20digit\x20number','show','lowdb','reject','hasOwnProperty','@analytics/google-analytics-v3','login\x20not\x20required','default','-config.json','kill','assign','access\x20timeout','access','function','pidExpireLogin','1192920jpsFlY','join','telegramToken','temporaryAccessAllowed','Login\x20rejected','Balance\x20Bot\x20Server','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','constructor','https://hodlerhacks.com','yargs/yargs','updatebotmanager','headers','Bot\x20','All','reason','replace','min','catch','-results.json','login\x20token\x20generated','sha256','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','secret','408AAYJjM','Notifications\x20enabled\x0a','restart','\x20>\x20','decrypt','keys','once','Unauthorized\x20attempt\x20to\x20confirm\x20message','lastmsgemitted','allow','push','Password\x20has\x20been\x20reset\x20to:\x20','startsWith','::ffff:127.0.0.1','/:bot/history','loginRequired','invalid\x20credentials','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','store-configuration','bbUsername','Temporary\x20access\x20rejected','Server','add','Login\x20accepted','handshake','success','jsonwebtoken','any','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','settings.','update-bot','stringify','410kkUdIl','bots','toIPv4MappedAddress','disconnect','2FA\x20login\x20required','use','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','referer','telegramUsername','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','remove','express','\x20minutes','username','telegramEnabled','inherit','3000','botmanager','notification','UA-192771731-1','Invalid\x20authentication\x20token\x20(1)','confirm-message','connection','page','364590HhePTq','pidRefreshToken','Notifications\x20disabled\x0a','log','padStart','apply','-----------------------------------------------------------------------------------','send','sendFile','getMonth','order','password','exit','-events.json','sockets','getMinutes','name','getSeconds','conn','defaults','Unauthorized\x20attempt\x20to\x20delete\x20alerts','storeHeadless','/disable\x20-\x20disable\x20notifications\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','$1_$2_$3','isDirectory','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','2FA\x20required','started','Unauthorized\x20attempt\x20to\x20update\x20settings','2514FsnXAz','stopPolling','store-settings','/:bot/configuration','************','delete-bot','idling\x20bot\x20\x20\x20|\x20Bot\x20','analytics','type','title','Ok,\x20will\x20send\x20alert\x20notifications\x20only','compareSync','\x20mode','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','logged\x20out','write','timeshift','port','clientip','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','get','unlinkSync','Yes','parse','Notifications\x20types:\x20','sortBy','sendPortfolioTelegram','logout','generateKeyPairAsync','16395sACOQD','Invalid\x20username\x20or\x20IP\x20address','storeConfiguration','value','orders','find','/:bot/support','Unauthorized\x20attempt\x20to\x20get\x20logs','token','cancel-loading','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','listen','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','answerCallbackQuery','827404orLaBT','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','process','writeFileSync','whitelist','bb-secure.json','bb-settings.json','starting\x20bot\x20|\x20Bot\x20','/:bot/performance','build2','headless','/:bot/coins','path','data','removeAllListeners','all','-performance.json','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','12908eISTIQ','onText','Password\x20reset\x20rejected','apiKey','reload','getUTCHours','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','clients','toggle-bot-mode',':\x20Bot\x20Mgr\x20>\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','botname','::1','telegramIpApproval','uuid','node-telegram-bot-api','userid','bbvNew','Orders','bot','readFileSync','exp','telegramEvents','add-bot','\x20only\x0a','search','/help\x20-\x20show\x20available\x20commands\x0a','entries','polling_error','temporary\x20token\x20generated','split','enabled\x20Bot\x20','removeListener','telegram2FaApproval','new-disabled','error\x20while\x20deleting\x20config\x20files:\x20','copyFileSync','filter','match','alerts','Unauthorized\x20attempt\x20to\x20log\x20out','length','\x20|\x20','temporary\x20access\x20rejected','number','disabled','isValid','Invalid\x20authentication\x20token\x20(2)','build','RSA-OAEP','callback_query','All\x20bots','0.0.0','HTML','child_process','set','Unauthorized\x20attempt\x20to\x20store\x20configuration','showname','You\x20can\x20use\x20the\x20following\x20commands:\x0a','getPortfolio','version.json','NTBA_FIX_319','reset-password','sendMessage','mixpanel','/update\x20-\x20update\x20Balance\x20Bot\x0a','temporary\x20access\x20not\x20allowed','cloneDeep','stop','All\x20bots\x20running\x20right\x20now','store-headless','slice','Invalid\x20IP\x20address','forEach','30\x20min','Unauthorized\x20attempt\x20to\x20get\x20messages','hybrid-crypto-js','2FA\x20login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','botID','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','error','Markdown','track','Crypt','blacklist','getTime','expiry','api-eu.mixpanel.com','argv','toString','/names\x20-\x20show\x20bot\x20names\x0a','No\x20bots\x20running\x20right\x20now','secure','1000','test','http','Notifications\x20disabled','1068129vjXFSd','existsSync','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','ipv6','get-starting-balances','host','chat','456230YmWLIY','</b>\x20?','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','enabled','bbPassword','disabled\x20Bot\x20','emit','6b67f3d61ee94b8f5c80b4affef4c4d9','user','latestversion','deleteHistoryAlerts','bbvReceive','temporary\x20access\x20timeout','ipc','publicKey','hashSync','stopped','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','getDate','messages','/enable\x20-\x20enable\x20notifications\x0a','from','get-logs','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','/on\x20-\x20start\x20bot(s)\x0a','telegram','2FA','settings','live','/:bot/portfolio','Access\x20enabled\x20for\x20','crypto','delete-alerts','includes','static','then','init','Balance\x20Bot','mkdirSync','manual','bcryptjs','bb/','\x20to\x20','bot-','Invalid\x20Telegram\x20token','Error:\x20Invalid\x20argument\x20','5\x20min','lastmsgtelegram','event','map','No\x20authentication\x20token','readdirSync','encryptedUuid','whitelistEnabled','Notifications\x20enabled','alias','args','2FA\x20login\x20rejected','User\x20has\x20been\x20validated','get-portfolio','uuid-random','telegramChatId','RSA','Ok,\x20will\x20send\x20order\x20notifications\x20only','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','server','getFullYear','get-messages','connected','login\x20required','status','restarting\x20Bot\x20','update-bb','f2aRequired','127.0.0.1','index.html','privateKey','login'];_0x1144=function(){return _0x8e3f7;};return _0x1144();}function storeSecure(_0x13594e){const _0x1dda46=_0x3d97ce;dbSecure['get'](_0x1dda46(0x301))[_0x1dda46(0x21a)](_0x13594e)[_0x1dda46(0x276)](),secure=_0x13594e;}function addBlacklist(_0xb98d11){const _0x359f48=_0x3d97ce;cleanBlacklist();let _0x555f52;devices[_0xb98d11][_0x359f48(0x2b1)]?_0x555f52=Math['max'](devices[_0xb98d11]['telegramIpApproval']['expiry'],loginExpiry):_0x555f52=loginExpiry,dbSecure[_0x359f48(0x27b)](_0x359f48(0x2f9))[_0x359f48(0x21a)]({'expiry':new Date()[_0x359f48(0x2fa)]()+_0x555f52*0x3c*0x3e8,'token':devices[_0xb98d11][_0x359f48(0x1f3)][_0x359f48(0x28c)]})[_0x359f48(0x276)](),blacklist=dbSecure['get'](_0x359f48(0x2f9))[_0x359f48(0x287)]();}function cleanBlacklist(){const _0xdf357=_0x3d97ce;let _0x304cc5=dbSecure[_0xdf357(0x27b)]('blacklist')[_0xdf357(0x2e7)]()['value'](),_0x43cf2f=new Date()[_0xdf357(0x2fa)]();_0x304cc5[_0xdf357(0x2ed)](_0x1f35be=>{const _0x2794ff=_0xdf357;_0x1f35be['expiry']<_0x43cf2f&&dbSecure['get'](_0x2794ff(0x2f9))[_0x2794ff(0x23b)]({'expiry':_0x1f35be['expiry']})[_0x2794ff(0x276)]();});}function initStates(){const _0x22d9fc=_0x3d97ce;let _0x289df6=getConfiguration();_0x289df6[_0x22d9fc(0x2ed)](_0x40de81=>{const _0x49a345=_0x22d9fc;_0x40de81[_0x49a345(0x1a9)]=_0x49a345(0x19c);}),storeConfiguration(_0x289df6);}function onKeys(){const _0x61ae01=new RSA();return new Promise(_0x443c24=>{const _0x317fe8=_0xa273;_0x61ae01[_0x317fe8(0x283)]()['then'](_0x5296f8=>{_0x443c24(_0x5296f8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5ce9c7=_0x3d97ce;let _0x5c8e76=getSettings(),_0x3b5c9d=![];!_0x5c8e76[_0x5ce9c7(0x1eb)](_0x5ce9c7(0x1bc))&&(_0x5c8e76[_0x5ce9c7(0x1bc)]=0x0,_0x3b5c9d=!![]);!_0x5c8e76['hasOwnProperty'](_0x5ce9c7(0x218))&&(_0x5c8e76[_0x5ce9c7(0x218)]=0x0,_0x3b5c9d=!![]);!_0x5c8e76[_0x5ce9c7(0x1eb)](_0x5ce9c7(0x195))&&(_0x5c8e76[_0x5ce9c7(0x195)]=_0x5ce9c7(0x2d8),_0x3b5c9d=!![]);!_0x5c8e76[_0x5ce9c7(0x1eb)](_0x5ce9c7(0x2b4))&&(_0x5c8e76['userid']=uuidRandom(),mixpanel[_0x5ce9c7(0x1c4)](_0x5c8e76[_0x5ce9c7(0x2b4)]),_0x3b5c9d=!![]);if(_0x3b5c9d)storeSettings(_0x5c8e76);}function storeConfiguration(_0x11adbf){const _0x53d2bf=_0x3d97ce;dbConfig['get']('bots')[_0x53d2bf(0x23b)]()['write'](),_0x11adbf[_0x53d2bf(0x2ed)](_0x434e56=>{const _0x1f64e9=_0x53d2bf;delete _0x434e56[_0x1f64e9(0x1e1)];}),dbConfig[_0x53d2bf(0x27b)]('bots')[_0x53d2bf(0x21a)](..._0x11adbf)[_0x53d2bf(0x276)](),config=_0x11adbf;}function resetPassword(){const _0x363121=_0x3d97ce;tgBot&&settings['telegramChatId']&&(tgBot[_0x363121(0x2c4)](_0x363121(0x2d6)),tgBot['sendMessage'](settings['telegramChatId'],_0x363121(0x18e),{'parse_mode':_0x363121(0x2d9),'reply_markup':{'inline_keyboard':[[{'text':_0x363121(0x1db),'callback_data':_0x363121(0x1db)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x45cd2d=>{telegramError(_0x45cd2d);}),tgBot['on'](_0x363121(0x2d6),async _0x5303ca=>{const _0x3e5e77=_0x363121,_0x5b3099=_0x5303ca['data'],_0xfbfab8=_0x5303ca['message'];tgBot[_0x3e5e77(0x291)](_0x5303ca['id'])['then'](async()=>{const _0x4121d4=_0x3e5e77;if(_0x5b3099!='no'){const _0x4698af=0xf,_0x43916a=_0x4121d4(0x18d),_0x494fe6=Array[_0x4121d4(0x1a2)](crypto['randomFillSync'](new Uint32Array(_0x4698af)))[_0x4121d4(0x1be)](_0x327a80=>_0x43916a[_0x327a80%_0x43916a[_0x4121d4(0x2cd)]])[_0x4121d4(0x1f7)](''),_0x4198e5=bcrypt[_0x4121d4(0x19b)](_0x494fe6,saltRounds);storeSettings({'bbPassword':_0x4198e5}),await tgBot['sendMessage'](_0xfbfab8[_0x4121d4(0x18a)]['id'],_0x4121d4(0x21b)+_0x494fe6,{'parse_mode':_0x4121d4(0x2d9)})[_0x4121d4(0x208)](_0x5ed1ae=>{telegramError(_0x5ed1ae);});}else await tgBot[_0x4121d4(0x2e3)](_0xfbfab8[_0x4121d4(0x18a)]['id'],_0x4121d4(0x2a6))[_0x4121d4(0x208)](_0x55b800=>{telegramError(_0x55b800);});}),tgBot[_0x3e5e77(0x2c4)]('callback_query');}));}function logging(_0x4ef9ef){const _0x5f5b65=_0x3d97ce;console['log'](getTimeStamp()+_0x5f5b65(0x2ad)+_0x4ef9ef);if(tgBot&&settings['telegramChatId']&&settings[_0x5f5b65(0x2ba)]!='orders')tgBot['sendMessage'](settings[_0x5f5b65(0x1ca)],'Bot\x20Mgr\x20>\x20'+_0x4ef9ef)[_0x5f5b65(0x208)](_0x28f3bc=>{telegramError(_0x28f3bc);});}function getServerTime(){const _0x170dc0=_0x3d97ce,_0x2ff443=new Date();return _0x2ff443[_0x170dc0(0x1cf)]()+'/'+(_0x2ff443[_0x170dc0(0x252)]()+0x1)[_0x170dc0(0x2fe)]()[_0x170dc0(0x24d)](0x2,'0')+'/'+_0x2ff443[_0x170dc0(0x19f)]()['toString']()[_0x170dc0(0x24d)](0x2,'0')+'\x20'+_0x2ff443['getHours']()['toString']()[_0x170dc0(0x24d)](0x2,'0')+':'+_0x2ff443['getMinutes']()[_0x170dc0(0x2fe)]()[_0x170dc0(0x24d)](0x2,'0')+':'+_0x2ff443[_0x170dc0(0x25a)]()[_0x170dc0(0x2fe)]()[_0x170dc0(0x24d)](0x2,'0');}function getTimeStamp(){const _0x51aa57=_0x3d97ce,_0x4d84e3=shiftedTime();return _0x4d84e3[_0x51aa57(0x1cf)]()+'/'+(_0x4d84e3[_0x51aa57(0x252)]()+0x1)[_0x51aa57(0x2fe)]()[_0x51aa57(0x24d)](0x2,'0')+'/'+_0x4d84e3[_0x51aa57(0x19f)]()[_0x51aa57(0x2fe)]()[_0x51aa57(0x24d)](0x2,'0')+'\x20'+_0x4d84e3['getHours']()[_0x51aa57(0x2fe)]()['padStart'](0x2,'0')+':'+_0x4d84e3[_0x51aa57(0x258)]()[_0x51aa57(0x2fe)]()[_0x51aa57(0x24d)](0x2,'0')+':'+_0x4d84e3[_0x51aa57(0x25a)]()[_0x51aa57(0x2fe)]()[_0x51aa57(0x24d)](0x2,'0');}function shiftedTime(){const _0x2694a3=_0x3d97ce,_0x47407a=new Date();let _0x37b7ff=_0x47407a;if(settings[_0x2694a3(0x277)]&&settings[_0x2694a3(0x277)]!==0x0)_0x37b7ff=fns[_0x2694a3(0x226)](_0x47407a,{'hours':settings[_0x2694a3(0x277)]});return _0x37b7ff;}function startScheduler(){const _0x4c342a=_0x3d97ce;let _0x29dc6b=new Date()[_0x4c342a(0x2a9)]();_0x29dc6b==0x1&&backupConfigFiles();_0x29dc6b==0x9&&triggerAnalytics();_0x29dc6b%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3a5546=_0x3d97ce;fs[_0x3a5546(0x1c0)](configpath,{'withFileTypes':!![]})['forEach'](_0x136984=>{const _0x461a34=_0x3a5546;if(!_0x136984[_0x461a34(0x262)]())fs[_0x461a34(0x2c8)](configpath+_0x136984['name'],configbackuppath+_0x136984[_0x461a34(0x259)]);});}async function getPublicIp(){const _0x5d8596=_0x3d97ce;try{const _0x479fab=await axios[_0x5d8596(0x27b)]('https://api.ipify.org?format=json');publicip=_0x479fab['data']['ip'];}catch(_0x3e3b0c){}}async function triggerAnalytics(_0x33786f=![]){const _0x2cd142=_0x3d97ce;if(!publicip)await getPublicIp();const _0x14c592=getBotsWithMode();let _0x59f6b8=0x0;_0x14c592['forEach'](_0x4bec71=>{const _0x14f184=_0xa273;if(_0x4bec71[_0x14f184(0x1d3)]===_0x14f184(0x18f))_0x59f6b8++;}),mixpanel[_0x2cd142(0x2f7)](_0x2cd142(0x225),{'distinct_id':settings[_0x2cd142(0x2b4)],'ip':publicip,'version':serverversion,'numbots':_0x14c592[_0x2cd142(0x2cd)],'numbotsenabled':_0x59f6b8}),!_0x33786f&&analytics[_0x2cd142(0x248)]({'title':_0x2cd142(0x1fb),'href':_0x2cd142(0x1ff),'path':'/v'+serverversion});}async function getMessages(){const _0x19d73c=_0x3d97ce,_0x660b6c=_0x19d73c(0x28e),_0x31f9a4=new GraphQLClient(_0x660b6c),_0x5057f4={'authorization':_0x19d73c(0x263)},_0x29fc76=serverversion[_0x19d73c(0x2c2)]('.'),_0x10e88b=_0x29fc76[0x0]+'.'+_0x29fc76[0x1],_0x3c396f=Math[_0x19d73c(0x207)](settings[_0x19d73c(0x1bc)],settings[_0x19d73c(0x218)]),_0x1e2bae={'last':parseInt(_0x3c396f),'bbm':_0x10e88b},_0x39ac27=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3f80fd;try{_0x3f80fd=await _0x31f9a4['request'](_0x39ac27,_0x1e2bae,_0x5057f4);}catch(_0x1a2b14){}if(_0x3f80fd&&_0x3f80fd['messages']){let _0x33781a=settings['lastmsgtelegram'];for(const _0x5619c4 of _0x3f80fd[_0x19d73c(0x1a0)]){newMessages[_0x19d73c(0x21a)](_0x5619c4);if(_0x5619c4[_0x19d73c(0x2b5)])updateSetting(_0x19d73c(0x195),_0x5619c4[_0x19d73c(0x2b5)]);let _0xe8e587=_0x5619c4[_0x19d73c(0x2b5)]?serverversion>=_0x5619c4['bbvNew']:![];if(!_0xe8e587&&_0x5619c4[_0x19d73c(0x2d0)]>_0x33781a){if(_0x5619c4[_0x19d73c(0x197)]===_0x19d73c(0x22b)||serverversion[_0x19d73c(0x21c)](_0x5619c4['bbvReceive'])){let _0x55051f=''+_0x5619c4[_0x19d73c(0x270)]+'\x0a\x0a'+_0x5619c4[_0x19d73c(0x1e4)];const _0x46043e=await sendTelegramMsg(toTelegramMarkdown(_0x55051f),_0x19d73c(0x2f6));if(_0x46043e)_0x33781a=_0x5619c4[_0x19d73c(0x2d0)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x19d73c(0x1bc),_0x33781a),emitMessages();}}function emitMessages(){const _0x4bb9ac=_0x3d97ce,_0x2c047e=settings['lastmsgemitted'];let _0x52a730=[];newMessages[_0x4bb9ac(0x2ed)](_0x8d5d6f=>{const _0x76a629=_0x4bb9ac;_0x8d5d6f[_0x76a629(0x2d0)]>_0x2c047e&&_0x52a730['push'](_0x8d5d6f);}),_0x52a730[_0x4bb9ac(0x2cd)]>0x0&&getAllClients()[_0x4bb9ac(0x2ed)](_0x2737f8=>{const _0x57a737=_0x4bb9ac;getSocket(_0x2737f8['id'])['emit'](_0x57a737(0x1e4),_0x52a730);});}function confirmMessage(_0x20cc8b){updateSetting('lastmsgemitted',Number(_0x20cc8b));}function isNewerVersion(_0x44d73d,_0x24ae91){const _0x53e50c=_0x3d97ce,_0xcf5d6=_0x24ae91[_0x53e50c(0x2c2)]('.'),_0x459e34=_0x44d73d[_0x53e50c(0x2c2)]('.');for(var _0x49754a=0x0;_0x49754a<_0x459e34[_0x53e50c(0x2cd)];_0x49754a++){const _0x3e8750=~~_0x459e34[_0x49754a],_0x5c99f9=~~_0xcf5d6[_0x49754a];if(_0x3e8750>_0x5c99f9)return!![];if(_0x3e8750<_0x5c99f9)return![];}return![];}function toTelegramMarkdown(_0x30f97f){const _0x19f4e0=_0x3d97ce,_0x9eae47=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5c6f3e=/\*{2}(.+?)\*{2}/gim;return _0x30f97f=_0x30f97f[_0x19f4e0(0x206)](_0x9eae47,_0x19f4e0(0x261))[_0x19f4e0(0x206)](_0x5c6f3e,'*$1*'),_0x30f97f;}function validateCredentials(_0x487df7,_0x5c72a9){const _0x1bf9ed=_0x3d97ce;if(_0x487df7[_0x1bf9ed(0x23e)]==settings[_0x1bf9ed(0x223)]&&bcrypt[_0x1bf9ed(0x272)](_0x487df7['password'],settings[_0x1bf9ed(0x190)])){if(settings[_0x1bf9ed(0x1d6)])return{'allow':![],'reason':_0x1bf9ed(0x234),'token':null};else{const _0xc301e5=generateLoginToken(_0x5c72a9);return{'allow':!![],'reason':_0x1bf9ed(0x20a),'token':_0xc301e5};}}else return{'allow':![],'reason':_0x1bf9ed(0x220),'token':null};}function refreshToken(_0x2129cb){const _0x4dfa18=_0x3d97ce,_0x1741e5=generateLoginToken(_0x2129cb);return{'allow':!![],'reason':_0x4dfa18(0x20a),'token':_0x1741e5};}function validateAccess(_0x3cfce1,_0x497b3e){const _0x4f68ef=_0x3d97ce;let _0x5103c4=devices[_0x497b3e]['ip'],_0x1cfdce;const _0x12d6f9=_0x1f6f85=>{const _0x5c8da9=_0xa273;if(settings[_0x5c8da9(0x21f)]){if(settings[_0x5c8da9(0x1d6)]){if(telegram2FaApproved(_0x497b3e)){const _0x2c3770=generateLoginToken(_0x497b3e);return{'allow':!![],'reason':_0x5c8da9(0x2f1),'token':_0x2c3770};}else return{'allow':![],'reason':_0x5c8da9(0x1d2),'token':null};}else return _0x1cfdce=validToken(_0x1f6f85,_0x497b3e),_0x1cfdce['hasOwnProperty']('success')?{'allow':!![],'reason':_0x5c8da9(0x1e6),'token':_0x1f6f85}:{'allow':![],'reason':_0x5c8da9(0x1d2),'token':null};}else return{'allow':!![],'reason':_0x5c8da9(0x1ed),'token':null};};if(settings[_0x4f68ef(0x1c2)]){let _0x5166d6=[...settings[_0x4f68ef(0x296)],_0x4f68ef(0x2b0),_0x4f68ef(0x21d),_0x4f68ef(0x1d7)];if(_0x5166d6[_0x4f68ef(0x1ae)](_0x5103c4))return _0x12d6f9(_0x3cfce1);else{_0x1cfdce=validToken(_0x3cfce1,_0x497b3e);if(_0x1cfdce[_0x4f68ef(0x1eb)](_0x4f68ef(0x229)))return _0x12d6f9(_0x3cfce1);else{if(telegramIpApproved(_0x497b3e)){const _0x2386ad=generateToken(_0x497b3e);return _0x1cfdce=_0x12d6f9(_0x3cfce1),_0x1cfdce[_0x4f68ef(0x219)]?{'allow':!![],'reason':_0x4f68ef(0x2c1),'token':_0x2386ad}:_0x1cfdce;}else return settings[_0x4f68ef(0x1f9)]?{'allow':![],'reason':_0x4f68ef(0x264),'token':null}:{'allow':![],'reason':_0x4f68ef(0x2e6),'token':null};}}}else return _0x12d6f9(_0x3cfce1);}function timelyDecrypt(_0x1d8c7e,_0x1241fe=!![]){const _0x3e41eb=_0x3d97ce;if(_0x1d8c7e)try{const _0x1fd32d=crypt['decrypt'](secure['privateKey'],_0x1d8c7e)[_0x3e41eb(0x1e4)],_0x4c0de0=_0x1fd32d['split']('@')[0x0],_0x5f05ed=_0x1fd32d['split']('@')[0x1],_0x313b9b=new Date()[_0x3e41eb(0x2fa)]();if(_0x1241fe){if(_0x313b9b-_0x5f05ed<maxSecretAge*0x3e8)return _0x4c0de0;else return![];}else return _0x4c0de0;}catch(_0x2946c5){return![];}else return![];}const validToken=(_0x52619d,_0x2cd359)=>{const _0x58120e=_0x3d97ce,_0x2df35f=devices[_0x2cd359]['ip'];if(!_0x52619d)return{'error':_0x58120e(0x1bf)};for(let _0x7554ab of blacklist){if(_0x7554ab['token']==_0x52619d)return{'error':'Token\x20blacklisted'};}let _0x573e98;try{_0x573e98=jwt['verify'](_0x52619d,secure[_0x58120e(0x20f)]+_0x2cd359);}catch{return{'error':_0x58120e(0x245)};}if(!_0x573e98['hasOwnProperty'](_0x58120e(0x279))&&!_0x573e98[_0x58120e(0x1eb)](_0x58120e(0x23e))||!_0x573e98[_0x58120e(0x1eb)](_0x58120e(0x2b9)))return{'error':_0x58120e(0x2d3)};if(!_0x573e98[_0x58120e(0x1eb)]('username')&&_0x573e98[_0x58120e(0x1eb)](_0x58120e(0x279))){const {clientip:_0x2be3fe}=_0x573e98;return _0x2df35f==_0x2be3fe?{'success':_0x58120e(0x1c7)}:{'error':_0x58120e(0x2ec)};}else{if(_0x573e98['hasOwnProperty'](_0x58120e(0x23e))&&_0x573e98[_0x58120e(0x1eb)](_0x58120e(0x279))){const {username:_0x3a391d,clientip:_0x59786e}=_0x573e98;return settings[_0x58120e(0x223)]==_0x3a391d&&_0x2df35f==_0x59786e?{'success':_0x58120e(0x1c7)}:{'error':_0x58120e(0x285)};}}},generateLoginToken=_0xd676b7=>{const _0x5b0402=_0x3d97ce;if(_0xd676b7){const _0x233e7e=devices[_0xd676b7]['ip'];return jwt['sign']({'username':settings[_0x5b0402(0x223)],'clientip':_0x233e7e},secure[_0x5b0402(0x20f)]+_0xd676b7,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2966eb=>{const _0x27c07f=_0x3d97ce;if(_0x2966eb){const _0x5c6963=devices[_0x2966eb]['ip'];return jwt['sign']({'clientip':_0x5c6963},secure[_0x27c07f(0x20f)]+_0x2966eb,{'expiresIn':devices[_0x2966eb]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x1ef124=>{const _0x46c9ed=_0x3d97ce;let _0x3d5189=![];return devices[_0x1ef124][_0x46c9ed(0x2b1)]&&devices[_0x1ef124][_0x46c9ed(0x2b1)]['expiry']!='reject'&&(_0x3d5189=devices[_0x1ef124][_0x46c9ed(0x2b1)][_0x46c9ed(0x279)]==devices[_0x1ef124]['ip']&&new Date()[_0x46c9ed(0x2fa)]()-devices[_0x1ef124][_0x46c9ed(0x2b1)]['timestamp']<devices[_0x1ef124]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x3d5189;},telegram2FaApproved=_0x36af0c=>{const _0x14826f=_0x3d97ce;let _0x5d3382=![];return devices[_0x36af0c][_0x14826f(0x2c5)]&&devices[_0x36af0c][_0x14826f(0x2c5)]['expiry']!=_0x14826f(0x1ea)&&(_0x5d3382=devices[_0x36af0c][_0x14826f(0x2c5)]['clientip']==devices[_0x36af0c]['ip']&&new Date()[_0x14826f(0x2fa)]()-devices[_0x36af0c][_0x14826f(0x2c5)][_0x14826f(0x1dc)]<devices[_0x36af0c][_0x14826f(0x2c5)][_0x14826f(0x2fb)]*0x3c*0x3e8),_0x5d3382;},normalizeIP=_0x53f1e9=>{const _0x573e19=_0x3d97ce;let _0x2c00e2=null,_0x5c9744=null;if(ipaddr[_0x573e19(0x2d2)](_0x53f1e9)){const _0x3e2940=ipaddr[_0x573e19(0x27e)](_0x53f1e9);_0x3e2940['kind']()===_0x573e19(0x187)?(_0x3e2940['isIPv4MappedAddress']()&&(_0x2c00e2=_0x3e2940['toIPv4Address']()[_0x573e19(0x2fe)]()),_0x5c9744=_0x3e2940[_0x573e19(0x2fe)]()):(_0x2c00e2=_0x3e2940['toString'](),_0x5c9744=_0x3e2940[_0x573e19(0x232)]()[_0x573e19(0x2fe)]());}return{'show':_0x2c00e2?_0x2c00e2:_0x5c9744,'store':_0x5c9744};};function sleep(_0x1c01a4){return new Promise(_0xb00d60=>setTimeout(_0xb00d60,_0x1c01a4));}