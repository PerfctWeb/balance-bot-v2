const _0x253410=_0x4267;(function(_0x30b263,_0x5ee2cc){const _0x1015f3=_0x4267,_0x1d919f=_0x30b263();while(!![]){try{const _0x29e64b=parseInt(_0x1015f3(0x1de))/0x1+parseInt(_0x1015f3(0x275))/0x2+-parseInt(_0x1015f3(0x28e))/0x3+parseInt(_0x1015f3(0x2ec))/0x4+-parseInt(_0x1015f3(0x202))/0x5+-parseInt(_0x1015f3(0x1cd))/0x6*(-parseInt(_0x1015f3(0x258))/0x7)+-parseInt(_0x1015f3(0x2d8))/0x8;if(_0x29e64b===_0x5ee2cc)break;else _0x1d919f['push'](_0x1d919f['shift']());}catch(_0x2cab80){_0x1d919f['push'](_0x1d919f['shift']());}}}(_0x54d1,0x4b457));const _0x6535d7=function(){let _0x4c42d3=!![];return function(_0x486dda,_0xe7e93){const _0x3603e3=_0x4c42d3?function(){const _0x4870ec=_0x4267;if(_0xe7e93){const _0x53846f=_0xe7e93[_0x4870ec(0x2ca)](_0x486dda,arguments);return _0xe7e93=null,_0x53846f;}}:function(){};return _0x4c42d3=![],_0x3603e3;};}(),_0xa222a5=_0x6535d7(this,function(){const _0x240dcf=_0x4267;return _0xa222a5['toString']()['search'](_0x240dcf(0x1fe))['toString']()[_0x240dcf(0x2b9)](_0xa222a5)[_0x240dcf(0x225)](_0x240dcf(0x1fe));});_0xa222a5();'use strict';process[_0x253410(0x298)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x253410(0x1bf)),fs=require('fs'),fns=require('date-fns'),low=require(_0x253410(0x200)),FileSync=require(_0x253410(0x1ee)),path=require(_0x253410(0x1af)),crypto=require(_0x253410(0x1f9)),Crypt=require(_0x253410(0x2bc))['Crypt'],RSA=require('hybrid-crypto-js')[_0x253410(0x1b3)],bcrypt=require(_0x253410(0x2a0)),jwt=require('jsonwebtoken'),ipaddr=require(_0x253410(0x26d)),argv=require(_0x253410(0x296))(process[_0x253410(0x2ce)][_0x253410(0x2db)](0x2))[_0x253410(0x2ce)],uuidRandom=require('uuid-random'),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x253410(0x1dc)),axios=require(_0x253410(0x1a1)),{GraphQLClient,gql}=require(_0x253410(0x193)),util=require(_0x253410(0x257)),fileUpload=require(_0x253410(0x281)),PORT=argv[_0x253410(0x21f)]||_0x253410(0x2c8),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x253410(0x19c)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x253410(0x224)),process[_0x253410(0x2c5)](0x1));const HOST=argv[_0x253410(0x2f2)]||null,userID=argv[_0x253410(0x198)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x253410(0x19d),configfile=_0x253410(0x1ea),settingsfile='bb-settings.json',securefile=_0x253410(0x2c7);let validInstallation=!![];!fs[_0x253410(0x228)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x253410(0x244)),configpath=userID?bbpath+_0x253410(0x2e2)+userID+'/':bbpath+_0x253410(0x2e2),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x253410(0x230)+userID+'/':bbpath+_0x253410(0x230),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x253410(0x28d)](logspath+_0x253410(0x2e7),{'flags':'a'}),temppath=userID?bbpath+_0x253410(0x1da)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs[_0x253410(0x23f)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x253410(0x23f)](configbackuppath);!fs[_0x253410(0x228)](logspath)&&fs[_0x253410(0x23f)](logspath);!fs[_0x253410(0x228)](zippath)&&fs[_0x253410(0x23f)](zippath);!fs[_0x253410(0x228)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x253410(0x1f1)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x253410(0x2a3)}})[_0x253410(0x1f1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x253410(0x24e)]({'secure':{},'blacklist':[]})[_0x253410(0x1f1)]();let crypt=new Crypt({'md':_0x253410(0x267),'rsaStandard':_0x253410(0x301)});const saltRounds=0xa,mixpanel=Mixpanel[_0x253410(0x1d2)](_0x253410(0x2b1),{'host':_0x253410(0x265)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x253410(0x1f0)]&&settings[_0x253410(0x1f0)]!=''&&settings[_0x253410(0x2dc)]&&settings[_0x253410(0x2dc)]!='')initTelegram();const logger={'screen':_0x2558d6=>{console['log'](_0x2558d6);},'simple':_0x29d5c9=>{const _0x5ca78d=_0x253410;console[_0x5ca78d(0x19c)](_0x29d5c9),loggerfile['write'](util[_0x5ca78d(0x2f7)](_0x29d5c9)+'\x0a');},'full':async _0x3db450=>{const _0x489825=_0x253410,_0xcc4b14=getTimeStamp()+_0x489825(0x30b)+_0x3db450;console[_0x489825(0x19c)](_0xcc4b14),loggerfile['write'](util[_0x489825(0x2f7)](_0xcc4b14)+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x489825(0x2b4)]!='orders')await tgBot[_0x489825(0x22c)](settings[_0x489825(0x183)],_0x489825(0x1f2)+_0x3db450)[_0x489825(0x233)](_0x12e666=>{telegramError(_0x12e666);});}};process['on'](_0x253410(0x1c6),function(_0x1bebab){const _0x3f80ae=_0x253410;logger[_0x3f80ae(0x26e)](_0x1bebab);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x253410(0x182))[_0x253410(0x31b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x253410(0x306))['createServer'](app);app[_0x253410(0x266)](fileUpload({'useTempFiles':!![]})),app[_0x253410(0x1ca)]('/download/:type',async(_0x273cbe,_0x219377)=>{const _0x4b8c45=_0x253410,_0x2dadaf=_0x273cbe[_0x4b8c45(0x19e)][_0x4b8c45(0x218)],_0x479ee5=getClientsWithBotID(_0x4b8c45(0x315)),_0x4a624e=_0x273cbe[_0x4b8c45(0x1a7)][_0x4b8c45(0x209)],_0x45b276=timelyDecrypt(_0x4a624e,![]),_0x4578e3=_0x479ee5[_0x4b8c45(0x29c)](_0x33838d=>_0x33838d['uuid']==_0x45b276);if(_0x4578e3){const _0x4fd5e2=normalizeIP(_0x273cbe[_0x4b8c45(0x2fe)]['remoteAddress'])[_0x4b8c45(0x1c2)],_0x445733=_0x273cbe[_0x4b8c45(0x1a7)][_0x4b8c45(0x17f)];if(validateAccess(_0x445733,_0x45b276,_0x4fd5e2)[_0x4b8c45(0x2fd)])await zipFiles(_0x2dadaf),_0x219377[_0x4b8c45(0x195)](zippath+(_0x2dadaf+_0x4b8c45(0x20d)),_0x534f70=>{const _0x451896=_0x4b8c45;_0x534f70&&(logger[_0x451896(0x20f)](_0x451896(0x2f5)+_0x2dadaf),logger[_0x451896(0x26e)](_0x534f70));});else logger['full'](_0x4b8c45(0x19a)+_0x2dadaf+_0x4b8c45(0x235));}else logger[_0x4b8c45(0x20f)](_0x4b8c45(0x19a)+_0x2dadaf+_0x4b8c45(0x28b));}),app[_0x253410(0x217)]('/upload-backup',async(_0x3d0d82,_0x2da008)=>{const _0x3a63c9=_0x253410,_0x584499=getClientsWithBotID(_0x3a63c9(0x315)),_0x58f770=_0x3d0d82[_0x3a63c9(0x1a7)]['uuid'],_0x2f3001=timelyDecrypt(_0x58f770,![]),_0x5d173a=_0x584499[_0x3a63c9(0x29c)](_0xe5b730=>_0xe5b730['uuid']==_0x2f3001);if(_0x5d173a){const _0x4ac7f3=normalizeIP(_0x3d0d82[_0x3a63c9(0x2fe)][_0x3a63c9(0x292)])['store'],_0x458285=_0x3d0d82[_0x3a63c9(0x1a7)][_0x3a63c9(0x17f)];if(validateAccess(_0x458285,_0x2f3001,_0x4ac7f3)[_0x3a63c9(0x2fd)]){if(_0x3d0d82[_0x3a63c9(0x278)]){const _0xcd4a57=_0x3d0d82[_0x3a63c9(0x278)][_0x3a63c9(0x2b2)];await _0xcd4a57['mv'](temppath+_0xcd4a57[_0x3a63c9(0x2c1)]),_0x2da008[_0x3a63c9(0x318)]({'status':!![],'message':_0x3a63c9(0x1ec)});const _0x445e45=getBotsWithMode();_0x445e45[_0x3a63c9(0x1c7)]>0x0?confirmRestore(temppath,_0xcd4a57[_0x3a63c9(0x2c1)]):unzipFile(temppath,_0xcd4a57[_0x3a63c9(0x2c1)]);}}else logger[_0x3a63c9(0x20f)](_0x3a63c9(0x2c6));}else logger[_0x3a63c9(0x20f)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x253410(0x190)](path[_0x253410(0x2d6)](__dirname,bbpath2,_0x253410(0x317)))),app[_0x253410(0x266)](express[_0x253410(0x190)](path['join'](__dirname,bbpath2,_0x253410(0x2c2)))),app[_0x253410(0x1ca)]('/',function(_0x51bbd3,_0x2d9f34){const _0xa722c=_0x253410;_0x2d9f34[_0xa722c(0x24f)](path[_0xa722c(0x2d6)](__dirname,bbpath2,_0xa722c(0x317),_0xa722c(0x262)));}),app[_0x253410(0x1ca)](_0x253410(0x232),function(_0x48cda0,_0x432757){const _0x362ae4=_0x253410;_0x432757[_0x362ae4(0x24f)](path['join'](__dirname,bbpath2,_0x362ae4(0x2c2),'index.html'));}),app[_0x253410(0x1ca)](_0x253410(0x256),(_0x13fc57,_0x466616)=>{const _0x5cb3c5=_0x253410;_0x466616[_0x5cb3c5(0x24f)](path[_0x5cb3c5(0x2d6)](__dirname,bbpath2,'build',_0x5cb3c5(0x262)));}),app[_0x253410(0x1ca)](_0x253410(0x1bc),(_0x4b5f91,_0x8d6779)=>{const _0x23ee3a=_0x253410;_0x8d6779[_0x23ee3a(0x24f)](path[_0x23ee3a(0x2d6)](__dirname,bbpath2,_0x23ee3a(0x2c2),_0x23ee3a(0x262)));}),app['get'](_0x253410(0x2ad),(_0x59260a,_0x1142b7)=>{const _0x121742=_0x253410;_0x1142b7['sendFile'](path[_0x121742(0x2d6)](__dirname,bbpath2,_0x121742(0x2c2),_0x121742(0x262)));}),app[_0x253410(0x1ca)](_0x253410(0x283),(_0x4f3cbd,_0x1c8aa5)=>{const _0x283907=_0x253410;_0x1c8aa5[_0x283907(0x24f)](path[_0x283907(0x2d6)](__dirname,bbpath2,_0x283907(0x2c2),'index.html'));}),app[_0x253410(0x1ca)](_0x253410(0x294),(_0x545436,_0x598a64)=>{const _0x3c5f45=_0x253410;_0x598a64[_0x3c5f45(0x24f)](path[_0x3c5f45(0x2d6)](__dirname,bbpath2,'build',_0x3c5f45(0x262)));}),app['get'](_0x253410(0x1b1),(_0x147922,_0xe7812d)=>{const _0x1a3578=_0x253410;_0xe7812d[_0x1a3578(0x24f)](path[_0x1a3578(0x2d6)](__dirname,bbpath2,_0x1a3578(0x2c2),_0x1a3578(0x262)));});if(HOST)http[_0x253410(0x240)](PORT,HOST);else http[_0x253410(0x240)](PORT);const io=require(_0x253410(0x243))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x5b2c28=_0x253410;logger[_0x5b2c28(0x26e)](''),logger[_0x5b2c28(0x26e)](_0x5b2c28(0x270)),await logger['full']('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x5b2c28(0x26e)](_0x5b2c28(0x270));if(config[_0x5b2c28(0x1c7)]!=0x0)for(const _0x437b3b of config){if(_0x437b3b[_0x5b2c28(0x1e2)]==_0x5b2c28(0x297)||_0x437b3b['status']==_0x5b2c28(0x1b8))await logger['full'](_0x5b2c28(0x2cb)+_0x437b3b[_0x5b2c28(0x1fb)]+_0x5b2c28(0x18e)+_0x437b3b[_0x5b2c28(0x30d)]),startBot([_0x437b3b['botID'],userID],{'cwd':bbpath},function(_0x14cc35){if(_0x14cc35)logger['full'](_0x14cc35);});else(_0x437b3b[_0x5b2c28(0x1e2)]==_0x5b2c28(0x2b0)||_0x437b3b[_0x5b2c28(0x1e2)]==_0x5b2c28(0x1eb))&&await logger[_0x5b2c28(0x20f)](_0x5b2c28(0x308)+_0x437b3b[_0x5b2c28(0x1fb)]+_0x5b2c28(0x18e)+_0x437b3b[_0x5b2c28(0x30d)]);}else!newBot&&logger[_0x5b2c28(0x26e)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger['simple']('');}function startSocket(){const _0x1c9d67=_0x253410;io['on'](_0x1c9d67(0x2f3),_0xb49b66=>{const _0x3676c1=_0x1c9d67;let _0x5b87c9,_0x363d94,_0x5bad10,_0x1278c2,_0x3bfb97;const _0x307b4e=_0xb49b66['handshake'][_0x3676c1(0x1a7)][_0x3676c1(0x1ba)];_0x363d94=_0x307b4e['match'](/bot[0-9]{3}/);if(_0x363d94)_0x5bad10=_0x363d94[0x0]['match'](/[0-9]{3}/);if(_0x5bad10)_0x5b87c9=_0x5bad10[0x0];else _0x5b87c9='botmanager';const _0x3a0597=_0xb49b66[_0x3676c1(0x18f)][_0x3676c1(0x2a1)]['encryptedUuid'];if(!_0x3a0597)_0xb49b66[_0x3676c1(0x1e7)](_0x3676c1(0x1e2),{'publicKey':secure[_0x3676c1(0x1d7)]});else{_0x1278c2=timelyDecrypt(_0x3a0597,![]);if(!_0x1278c2)_0xb49b66['emit'](_0x3676c1(0x1e2),{'publicKey':secure[_0x3676c1(0x1d7)]});else{_0x3bfb97=normalizeIP(_0xb49b66['conn'][_0x3676c1(0x292)])[_0x3676c1(0x1c2)];if(!devices[_0x1278c2])devices[_0x1278c2]={'uuid':_0x1278c2,'access':{'token':null}};devices[_0x1278c2]['ip']=_0x3bfb97;const _0x1bc5af=addClient(_0xb49b66['id'],_0x1278c2,_0x5b87c9);setAccess(_0x1bc5af),emitMessages(),_0xb49b66['on'](_0x3676c1(0x236),_0x4f719a=>{const _0x574cc9=_0x3676c1,_0x54e28a=timelyDecrypt(_0x4f719a['password']);if(_0x54e28a){_0x4f719a={'username':_0x4f719a['username'],'password':_0x54e28a},devices[_0x1278c2]['access']=validateCredentials(_0x4f719a,_0x1278c2);if(devices[_0x1278c2][_0x574cc9(0x2da)][_0x574cc9(0x2fd)]==![]&&devices[_0x1278c2][_0x574cc9(0x2da)][_0x574cc9(0x194)]==_0x574cc9(0x1d8))_0xb49b66[_0x574cc9(0x1e7)](_0x574cc9(0x1e2),{'access':devices[_0x1278c2][_0x574cc9(0x2da)]}),loginAccess2FA(_0x1278c2,_0x3bfb97);else{if(devices[_0x1278c2][_0x574cc9(0x2da)][_0x574cc9(0x2fd)]==![]&&devices[_0x1278c2][_0x574cc9(0x2da)][_0x574cc9(0x194)]==_0x574cc9(0x2b5))_0xb49b66[_0x574cc9(0x1e7)](_0x574cc9(0x1e2),{'access':devices[_0x1278c2][_0x574cc9(0x2da)]});else devices[_0x1278c2][_0x574cc9(0x2da)][_0x574cc9(0x2fd)]&&devices[_0x1278c2][_0x574cc9(0x2da)]['reason']==_0x574cc9(0x1fd)&&(getClientsWithUuid(_0x1278c2)['forEach'](_0x9b5e7f=>{setAccess(_0x9b5e7f);}),setTokenRefresh(_0x1278c2),setSessionTimeout('login',_0x1278c2));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0xb49b66['on']('reset-password',()=>{resetPassword();}),_0xb49b66['on'](_0x3676c1(0x2ed),_0x47f928=>{removeClient(_0xb49b66['id']);}),_0x5b87c9==_0x3676c1(0x315)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x73dc13){const _0x53c993=_0x253410;if(_0x73dc13!=_0x53c993(0x315)&&config[_0x53c993(0x2f0)]!=''){if(pid[_0x73dc13])pid[_0x73dc13]['send']({'function':_0x53c993(0x282),'args':null});}}function reloadBotManager(){const _0x37743a=_0x253410;getClientsWithBotID(_0x37743a(0x315))[_0x37743a(0x1c8)](_0x47deed=>{const _0x1abb40=_0x37743a;getSocket(_0x47deed['id'])[_0x1abb40(0x1e7)](_0x1abb40(0x1e2),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x31eec6){const _0x13affb=_0x253410;return io[_0x13affb(0x215)][_0x13affb(0x215)][_0x13affb(0x1ca)](_0x31eec6);}function setAccess(_0x3d5709){const _0x322f87=_0x253410,_0x497daf=getSocket(_0x3d5709['id']),_0x300964=_0x3d5709[_0x322f87(0x209)],_0x2eb2b0=_0x3d5709[_0x322f87(0x2ff)];devices[_0x300964]['access']=validateAccess(devices[_0x300964]['access']['token'],_0x300964),_0x497daf[_0x322f87(0x2d6)](_0x300964);if(devices[_0x300964][_0x322f87(0x2da)]['allow']){_0x497daf[_0x322f87(0x2d6)](_0x2eb2b0);if(_0x2eb2b0==_0x322f87(0x315))initializeSocketBotManager(_0x497daf);else initializeSocketBot(_0x497daf);initClient(_0x2eb2b0);}devices[_0x300964][_0x322f87(0x2da)]['token']&&devices[_0x300964][_0x322f87(0x2da)][_0x322f87(0x194)]==_0x322f87(0x290)&&setSessionTimeout('2FA',_0x300964),devices[_0x300964]['access'][_0x322f87(0x17c)]&&devices[_0x300964][_0x322f87(0x2da)][_0x322f87(0x194)]==_0x322f87(0x2cc)&&setSessionTimeout(_0x322f87(0x236),_0x300964),_0x497daf[_0x322f87(0x1e7)](_0x322f87(0x1e2),{'status':_0x3d5709[_0x322f87(0x29d)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x300964]['access'],'externalip':devices[_0x300964]['ip'],'publicKey':secure[_0x322f87(0x1d7)],'userid':settings[_0x322f87(0x310)],'validInstallation':validInstallation}),devices[_0x300964][_0x322f87(0x2da)]['allow']==![]&&devices[_0x300964][_0x322f87(0x2da)][_0x322f87(0x194)]==_0x322f87(0x2bd)&&temporaryAccess2FA(_0x300964,devices[_0x300964]['ip']);}function setSessionTimeout(_0x3eaac1,_0x5b144b){const _0x41ffcc=_0x253410;let _0x4dfcea;if(_0x3eaac1==_0x41ffcc(0x236))_0x4dfcea=loginExpiry*0x3c*0x3e8;else _0x4dfcea=devices[_0x5b144b]['telegramIpApproval'][_0x41ffcc(0x2a7)]*0x3c*0x3e8-(new Date()[_0x41ffcc(0x30c)]()-devices[_0x5b144b][_0x41ffcc(0x197)]['timestamp']);if(devices[_0x5b144b]['pidExpireLogin'])clearTimeout(devices[_0x5b144b][_0x41ffcc(0x1c5)]);devices[_0x5b144b]['pidExpireLogin']=setTimeout(()=>{const _0x3f04a6=_0x41ffcc;if(devices[_0x5b144b][_0x3f04a6(0x1c3)])clearTimeout(devices[_0x5b144b][_0x3f04a6(0x1c3)]);removeSocketListeners(_0x5b144b),addBlacklist(_0x5b144b),devices[_0x5b144b][_0x3f04a6(0x197)]=null,devices[_0x5b144b][_0x3f04a6(0x210)]=null,devices[_0x5b144b][_0x3f04a6(0x2da)][_0x3f04a6(0x17c)]=null,devices[_0x5b144b][_0x3f04a6(0x2da)]=validateAccess(devices[_0x5b144b][_0x3f04a6(0x2da)][_0x3f04a6(0x17c)],_0x5b144b),!(devices[_0x5b144b]['access']['allow']&&devices[_0x5b144b][_0x3f04a6(0x2da)][_0x3f04a6(0x194)]==_0x3f04a6(0x1d6))&&(_0x3eaac1==_0x3f04a6(0x236)?io['to'](_0x5b144b)[_0x3f04a6(0x1e7)](_0x3f04a6(0x1e2),{'access':{'allow':![],'reason':_0x3f04a6(0x21e),'token':null}}):io['to'](_0x5b144b)[_0x3f04a6(0x1e7)](_0x3f04a6(0x1e2),{'access':{'allow':![],'reason':_0x3f04a6(0x304),'token':null}})),devices[_0x5b144b][_0x3f04a6(0x2da)][_0x3f04a6(0x17c)]=null;},_0x4dfcea);}function setTokenRefresh(_0x479f08){const _0x149010=_0x253410;if(devices[_0x479f08][_0x149010(0x1c3)])clearTimeout(devices[_0x479f08][_0x149010(0x1c3)]);devices[_0x479f08][_0x149010(0x1c3)]=setTimeout(()=>{const _0xa849c7=_0x149010;getClientsWithUuid(_0x479f08)['length']!=0x0?(devices[_0x479f08][_0xa849c7(0x2da)]=refreshToken(_0x479f08),io['to'](_0x479f08)[_0xa849c7(0x1e7)](_0xa849c7(0x1e2),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x479f08]['access'],'externalip':devices[_0x479f08]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x479f08)):clearTimeout(devices[_0x479f08][_0xa849c7(0x1c3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2989e7){const _0xc3ffd3=_0x253410,_0x4c226=getClient(_0x2989e7['id'])['uuid'];_0x2989e7['emit'](_0xc3ffd3(0x316),config),_0x2989e7[_0xc3ffd3(0x1e7)](_0xc3ffd3(0x2de),cleanSettings()),_0x2989e7['on'](_0xc3ffd3(0x205),_0x649f79=>{const _0x5e9045=_0xc3ffd3;if(validateAccess(_0x649f79,_0x4c226)[_0x5e9045(0x2fd)])addBot();else logger[_0x5e9045(0x20f)](_0x5e9045(0x1bd));}),_0x2989e7['on'](_0xc3ffd3(0x247),(_0x5d8b7d,_0x30b19d)=>{const _0x51fb3b=_0xc3ffd3;if(validateAccess(_0x30b19d,_0x4c226)['allow'])toggleBot(_0x5d8b7d[_0x51fb3b(0x1fb)],_0x5d8b7d[_0x51fb3b(0x1e2)],_0x5d8b7d[_0x51fb3b(0x27c)]);else logger[_0x51fb3b(0x20f)](_0x51fb3b(0x17d));}),_0x2989e7['on'](_0xc3ffd3(0x312),(_0x1e1504,_0x4fb635)=>{const _0x438946=_0xc3ffd3;if(validateAccess(_0x4fb635,_0x4c226)['allow'])toggleBotMode(_0x1e1504);else logger[_0x438946(0x20f)](_0x438946(0x17d));}),_0x2989e7['on'](_0xc3ffd3(0x1b9),(_0x387c3e,_0x15ef6b)=>{const _0x5d2e1c=_0xc3ffd3;if(validateAccess(_0x15ef6b,_0x4c226)['allow'])deleteBot(_0x387c3e);else logger[_0x5d2e1c(0x20f)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x2989e7['on'](_0xc3ffd3(0x1ac),(_0x16b0fa,_0x4e9aea)=>{const _0xb8a96d=_0xc3ffd3;if(validateAccess(_0x4e9aea,_0x4c226)[_0xb8a96d(0x2fd)])storeSettings(_0x16b0fa,!![]);else logger[_0xb8a96d(0x20f)](_0xb8a96d(0x31a));}),_0x2989e7['on']('update-bb',_0x3465a8=>{const _0x5795eb=_0xc3ffd3;if(validateAccess(_0x3465a8,_0x4c226)[_0x5795eb(0x2fd)])updateBB();else logger[_0x5795eb(0x20f)](_0x5795eb(0x21b));}),_0x2989e7['on'](_0xc3ffd3(0x2c9),_0x3036ac=>{const _0x47ab18=_0xc3ffd3;if(validateAccess(_0x3036ac,_0x4c226)[_0x47ab18(0x2fd)])getMessages();else logger[_0x47ab18(0x20f)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2989e7['on'](_0xc3ffd3(0x249),(_0x361b99,_0x46ac37)=>{const _0x2803d3=_0xc3ffd3;if(validateAccess(_0x46ac37,_0x4c226)['allow'])confirmMessage(_0x361b99);else logger[_0x2803d3(0x20f)](_0x2803d3(0x27b));}),_0x2989e7['on'](_0xc3ffd3(0x1a2),_0x287990=>{const _0x1644a6=_0xc3ffd3;if(validateAccess(_0x287990,_0x4c226)[_0x1644a6(0x2fd)]){if(devices[_0x4c226][_0x1644a6(0x1c3)])clearTimeout(devices[_0x4c226][_0x1644a6(0x1c3)]);if(devices[_0x4c226][_0x1644a6(0x1c5)])clearTimeout(devices[_0x4c226][_0x1644a6(0x1c5)]);removeSocketListeners(getClient(_0x2989e7['id'])[_0x1644a6(0x209)]),addBlacklist(_0x4c226),devices[_0x4c226]['telegramIpApproval']=null,devices[_0x4c226][_0x1644a6(0x210)]=null,devices[_0x4c226][_0x1644a6(0x2da)]['token']=null,io['to'](getClient(_0x2989e7['id'])[_0x1644a6(0x209)])[_0x1644a6(0x1e7)](_0x1644a6(0x1e2),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x1644a6(0x20e));});}function initializeSocketBot(_0x43038b){const _0x12ac13=_0x253410,_0x1ba03d=getClient(_0x43038b['id'])[_0x12ac13(0x2ff)],_0x3cc334=getClient(_0x43038b['id'])[_0x12ac13(0x209)];_0x43038b['on'](_0x12ac13(0x2ab),(_0x379c69,_0x41c83b)=>{const _0x328a20=_0x12ac13;if(validateAccess(_0x41c83b,_0x3cc334)[_0x328a20(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d][_0x328a20(0x318)]({'function':_0x328a20(0x31d),'args':_0x379c69});}else logger[_0x328a20(0x20f)]('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x43038b['on'](_0x12ac13(0x1a6),(_0x50281f,_0x45df05)=>{const _0x154249=_0x12ac13;if(validateAccess(_0x45df05,_0x3cc334)[_0x154249(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d]['send']({'function':'deleteHistoryAlerts','args':_0x50281f});}else logger[_0x154249(0x20f)](_0x154249(0x25d));}),_0x43038b['on'](_0x12ac13(0x1fc),(_0x16dc66,_0x164c55)=>{const _0x1ac894=_0x12ac13;if(validateAccess(_0x164c55,_0x3cc334)[_0x1ac894(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d]['send']({'function':_0x1ac894(0x254),'args':_0x16dc66});}else logger['full'](_0x1ac894(0x2cf));}),_0x43038b['on'](_0x12ac13(0x24b),(_0x2562be,_0x98152c)=>{const _0x1353a8=_0x12ac13;if(validateAccess(_0x98152c,_0x3cc334)[_0x1353a8(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d]['send']({'function':'storeConfiguration','args':_0x2562be});}else logger[_0x1353a8(0x20f)](_0x1353a8(0x320));}),_0x43038b['on']('store-headless',(_0x207dc7,_0x18765d)=>{const _0x4b79a2=_0x12ac13;if(validateAccess(_0x18765d,_0x3cc334)[_0x4b79a2(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d][_0x4b79a2(0x318)]({'function':_0x4b79a2(0x1ce),'args':_0x207dc7});}else logger[_0x4b79a2(0x20f)](_0x4b79a2(0x2fb));}),_0x43038b['on'](_0x12ac13(0x1f3),_0x30780c=>{const _0x3e086d=_0x12ac13;if(validateAccess(_0x30780c,_0x3cc334)[_0x3e086d(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d]['send']({'function':_0x3e086d(0x22b),'args':null});}else logger[_0x3e086d(0x20f)](_0x3e086d(0x1f6));}),_0x43038b['on']('place-order',(_0x5ae28a,_0x4b97d7)=>{const _0x3d0656=_0x12ac13;if(validateAccess(_0x4b97d7,_0x3cc334)['allow']){if(pid[_0x1ba03d])pid[_0x1ba03d]['send']({'function':_0x3d0656(0x1d0),'args':_0x5ae28a});}else logger['full'](_0x3d0656(0x1e6));}),_0x43038b['on'](_0x12ac13(0x280),_0x2ef0da=>{const _0x1da034=_0x12ac13;if(validateAccess(_0x2ef0da,_0x3cc334)[_0x1da034(0x2fd)]){if(pid[_0x1ba03d])pid[_0x1ba03d][_0x1da034(0x318)]({'function':_0x1da034(0x1c1),'args':null});}else logger[_0x1da034(0x20f)](_0x1da034(0x22e));}),_0x43038b['on'](_0x12ac13(0x1cb),_0x567c0d=>{const _0x1f748b=_0x12ac13;if(validateAccess(_0x567c0d,_0x3cc334)['allow']){if(pid[_0x1ba03d])pid[_0x1ba03d][_0x1f748b(0x318)]({'function':_0x1f748b(0x2a4),'args':null});}else logger['full'](_0x1f748b(0x2e9));}),_0x43038b['on'](_0x12ac13(0x239),_0x4bab3f=>{const _0x239192=_0x12ac13;if(validateAccess(_0x4bab3f,_0x3cc334)[_0x239192(0x2fd)])updateBB();else logger[_0x239192(0x20f)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x43038b['on']('get-messages',_0x22a801=>{const _0x1552ae=_0x12ac13;if(validateAccess(_0x22a801,_0x3cc334)[_0x1552ae(0x2fd)])getMessages();else logger['full'](_0x1552ae(0x1c0));}),_0x43038b['on']('confirm-message',(_0x5358db,_0x2a3f95)=>{const _0x49acfc=_0x12ac13;if(validateAccess(_0x2a3f95,_0x3cc334)[_0x49acfc(0x2fd)])confirmMessage(_0x5358db);else logger[_0x49acfc(0x20f)](_0x49acfc(0x27b));}),_0x43038b['on'](_0x12ac13(0x1a2),_0x3e1c7d=>{const _0x24a4a8=_0x12ac13;if(validateAccess(_0x3e1c7d,_0x3cc334)[_0x24a4a8(0x2fd)]){if(devices[_0x3cc334]['pidRefreshToken'])clearTimeout(devices[_0x3cc334][_0x24a4a8(0x1c3)]);if(devices[_0x3cc334][_0x24a4a8(0x1c5)])clearTimeout(devices[_0x3cc334][_0x24a4a8(0x1c5)]);removeSocketListeners(getClient(_0x43038b['id'])[_0x24a4a8(0x209)]),addBlacklist(_0x3cc334),devices[_0x3cc334][_0x24a4a8(0x197)]=null,devices[_0x3cc334]['telegram2FaApproval']=null,devices[_0x3cc334]['access'][_0x24a4a8(0x17c)]=null,io['to'](getClient(_0x43038b['id'])[_0x24a4a8(0x209)])['emit'](_0x24a4a8(0x1e2),{'access':{'allow':![],'reason':_0x24a4a8(0x1a5),'token':null}});}else logger[_0x24a4a8(0x20f)](_0x24a4a8(0x20e));});}function removeSocketListeners(_0x4cfc90){const _0x21bc8c=_0x253410;getClientsWithUuid(_0x4cfc90)[_0x21bc8c(0x1c8)](_0x3a81d5=>{const _0x5c8650=_0x21bc8c;getSocket(_0x3a81d5['id'])[_0x5c8650(0x252)]();});}function cleanSettings(){const _0x5635b6=_0x253410;let _0x47ca19=settings;return settings[_0x5635b6(0x1f0)]&&settings[_0x5635b6(0x1f0)]!=''&&(_0x47ca19={..._0x47ca19,'telegramToken':'************'}),settings[_0x5635b6(0x307)]&&settings['bbPassword']!=''&&(_0x47ca19={..._0x47ca19,'bbPassword':_0x5635b6(0x1b6)}),(settings[_0x5635b6(0x307)]&&settings[_0x5635b6(0x307)]=='***'||settings['telegramToken']&&settings['telegramToken']==_0x5635b6(0x29e))&&(_0x47ca19={..._0x47ca19,'restored':{'password':settings['bbPassword']==_0x5635b6(0x29e),'telegram':settings[_0x5635b6(0x1f0)]==_0x5635b6(0x29e)}}),_0x47ca19;}function updateBB(){const _0x5b80a9=_0x253410;installingUpdate=!![],config['forEach'](_0x45e5b1=>{const _0x3d53f5=_0x4267;restartBot(_0x45e5b1[_0x3d53f5(0x1fb)]);}),process[_0x5b80a9(0x318)]({'update':!![]},_0x48831e=>{});}function startBot(_0x2cc69a,_0x5b1a21,_0x506d87){const _0x5a4ec7=_0x253410;let _0x1d2926=![];const _0x3a8d8d=_0x2cc69a[0x0];_0x5b1a21={..._0x5b1a21,'stdio':[_0x5a4ec7(0x199),_0x5a4ec7(0x199),_0x5a4ec7(0x199),_0x5a4ec7(0x237)]},pid[_0x3a8d8d]=childProcess[_0x5a4ec7(0x25c)](botfile,_0x2cc69a,_0x5b1a21),pid[_0x3a8d8d]['on'](_0x5a4ec7(0x1c4),_0x2eb5cd=>{const _0x45d5d4=_0x5a4ec7;switch(Object[_0x45d5d4(0x2f4)](_0x2eb5cd)[0x0]){case _0x45d5d4(0x30d):updateBotName(_0x3a8d8d,_0x2eb5cd[_0x45d5d4(0x30d)]);break;case _0x45d5d4(0x260):updateBotManager();break;case _0x45d5d4(0x1e2):updateStatus(_0x3a8d8d,_0x2eb5cd['status']);break;case _0x45d5d4(0x27c):updateLive(_0x3a8d8d,_0x2eb5cd[_0x45d5d4(0x27c)]);break;case'started':updateLive(_0x3a8d8d,_0x2eb5cd[_0x45d5d4(0x255)]),io['to'](_0x3a8d8d)['emit'](_0x45d5d4(0x1e2),{'access':{'allow':![],'reason':_0x45d5d4(0x2cd),'token':null}});break;case _0x45d5d4(0x322):_0x2eb5cd[_0x45d5d4(0x322)]==_0x45d5d4(0x1ef)&&restartBot(_0x3a8d8d);_0x2eb5cd['stop']==_0x45d5d4(0x1b5)&&toggleBot(_0x3a8d8d,_0x45d5d4(0x2b0),_0x45d5d4(0x1e0));break;case _0x45d5d4(0x2f1):sendTelegram(_0x3a8d8d,_0x2eb5cd[_0x45d5d4(0x2f1)]);break;case _0x45d5d4(0x213):sendTelegramMsg(_0x2eb5cd['telegrammsg']);break;case'function':io['to'](_0x3a8d8d)[_0x45d5d4(0x1e7)](_0x2eb5cd[_0x45d5d4(0x1b7)],_0x2eb5cd['args']);break;}}),pid[_0x3a8d8d]['on'](_0x5a4ec7(0x242),function(_0x1f8db3){if(_0x1d2926)return;_0x1d2926=!![],_0x506d87(_0x1f8db3);}),pid[_0x3a8d8d]['on']('exit',async function(_0x1dfd69){const _0x285969=_0x5a4ec7;if(installingUpdate)return;if(_0x1d2926)return;_0x1d2926=!![],_0x506d87(null);const _0x1f1721=dbConfig['get'](_0x285969(0x316))['find']({'botID':_0x3a8d8d})[_0x285969(0x29a)]();_0x1f1721&&(_0x1f1721[_0x285969(0x1e2)]=='enabled'||_0x1f1721[_0x285969(0x1e2)]==_0x285969(0x1b8))&&(await sleep(0x3e8),updateLive(_0x3a8d8d,_0x285969(0x1e0)),logger[_0x285969(0x20f)](_0x285969(0x25f)+_0x3a8d8d),startBot([_0x3a8d8d,userID],{'cwd':bbpath},function(_0x2e7f24){const _0xa5d5d=_0x285969;if(_0x2e7f24)logger[_0xa5d5d(0x20f)](_0x2e7f24);}));});}function _0x4267(_0x16eaf8,_0x28a3d6){const _0x453227=_0x54d1();return _0x4267=function(_0xa222a5,_0x6535d7){_0xa222a5=_0xa222a5-0x17c;let _0x54d144=_0x453227[_0xa222a5];return _0x54d144;},_0x4267(_0x16eaf8,_0x28a3d6);}function stopBot(_0x518787){const _0xd4ec8=_0x253410;getClientsWithBotID(_0x518787)[_0xd4ec8(0x1c8)](_0x604d6=>{const _0x95bc7c=_0xd4ec8;getSocket(_0x604d6['id'])[_0x95bc7c(0x2ed)](!![]),removeClient(_0x604d6['id']);}),pid[_0x518787]&&(pid[_0x518787][_0xd4ec8(0x1b5)](),pid[_0x518787]=null);}function restartBot(_0x593537){const _0x4a69dd=_0x253410;if(pid[_0x593537])pid[_0x593537][_0x4a69dd(0x1b5)]();}function addBot(){const _0x84f658=_0x253410;let _0x3f97c4;for(let _0xce2708=0x1;_0xce2708<0x3e9;_0xce2708++){_0x3f97c4=_0xce2708[_0x84f658(0x220)]()[_0x84f658(0x27a)](0x3,'0');let _0x1025f6=config['find'](_0x300d01=>_0x300d01[_0x84f658(0x1fb)]==_0x3f97c4);if(!_0x1025f6)break;}if(_0x3f97c4==='1000'){logger[_0x84f658(0x20f)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full'](_0x84f658(0x284)+_0x3f97c4),dbConfig[_0x84f658(0x1ca)]('bots')[_0x84f658(0x269)]({'botID':_0x3f97c4,'botname':'Bot\x20'+_0x3f97c4,'status':_0x84f658(0x1b8),'live':''})[_0x84f658(0x1f1)](),startBot([_0x3f97c4,userID],{'cwd':bbpath},function(_0x3972a8){const _0x563877=_0x84f658;if(_0x3972a8)logger[_0x563877(0x20f)](_0x3972a8);}),config=getConfiguration(),io['to'](_0x84f658(0x315))['emit']('bots',config);}function deleteBot(_0xe2a177){const _0x4286fe=_0x253410;getClientsWithBotID(_0xe2a177)[_0x4286fe(0x1c8)](_0x52f07c=>{const _0x581332=_0x4286fe;getSocket(_0x52f07c['id'])[_0x581332(0x2ed)](!![]),removeClient(_0x52f07c['id']);}),dbConfig[_0x4286fe(0x1ca)](_0x4286fe(0x316))[_0x4286fe(0x2ae)]({'botID':_0xe2a177})[_0x4286fe(0x1f1)](),logger['full'](_0x4286fe(0x21a)+_0xe2a177),stopBot(_0xe2a177);try{fs[_0x4286fe(0x2e1)](path[_0x4286fe(0x2d6)](configpath,_0x4286fe(0x287)+_0xe2a177+_0x4286fe(0x295))),fs[_0x4286fe(0x2e1)](path[_0x4286fe(0x2d6)](configpath,'bot-'+_0xe2a177+_0x4286fe(0x1b4))),fs[_0x4286fe(0x2e1)](path['join'](configpath,_0x4286fe(0x287)+_0xe2a177+_0x4286fe(0x24c))),fs[_0x4286fe(0x2e1)](path[_0x4286fe(0x2d6)](configpath,_0x4286fe(0x287)+_0xe2a177+_0x4286fe(0x2b7)));}catch(_0x5ce5e6){if(_0x5ce5e6)logger['full'](_0x4286fe(0x186),_0x5ce5e6);}config=getConfiguration(),io['to'](_0x4286fe(0x315))[_0x4286fe(0x1e7)](_0x4286fe(0x316),config);}function toggleBot(_0x5ad386,_0xd0b35d,_0x33ee2b){const _0x166c4c=_0x253410;dbConfig[_0x166c4c(0x1ca)](_0x166c4c(0x316))[_0x166c4c(0x29c)]({'botID':_0x5ad386})[_0x166c4c(0x279)]({'status':_0xd0b35d})[_0x166c4c(0x279)]({'live':_0x33ee2b})[_0x166c4c(0x1f1)]();if(_0xd0b35d=='enabled'||_0xd0b35d==_0x166c4c(0x1b8))logger[_0x166c4c(0x20f)](_0x166c4c(0x206)+_0x5ad386),startBot([_0x5ad386,userID],{'cwd':bbpath},function(_0x765034){const _0x4700d1=_0x166c4c;if(_0x765034)logger[_0x4700d1(0x20f)](_0x765034);});else(_0xd0b35d==_0x166c4c(0x2b0)||_0xd0b35d==_0x166c4c(0x1eb))&&(logger[_0x166c4c(0x20f)](_0x166c4c(0x24a)+_0x5ad386),stopBot(_0x5ad386));config=getConfiguration(),io['to'](_0x166c4c(0x315))[_0x166c4c(0x1e7)]('bots',config);}function toggleStatus(_0x39e0a8){const _0x500950=_0x253410;let _0x3df254=dbConfig[_0x500950(0x1ca)](_0x500950(0x316))[_0x500950(0x29c)]({'botID':_0x39e0a8})[_0x500950(0x29a)](),_0x46a2ea;if(_0x3df254[_0x500950(0x1e2)]===_0x500950(0x297))_0x46a2ea=_0x500950(0x2b0);else{if(_0x3df254['status']==='new')_0x46a2ea=_0x500950(0x1eb);else{if(_0x3df254[_0x500950(0x1e2)]===_0x500950(0x1eb))_0x46a2ea=_0x500950(0x1b8);else{if(_0x3df254[_0x500950(0x1e2)]==='disabled')_0x46a2ea=_0x500950(0x297);}}}return _0x46a2ea;}function updateStatus(_0x40e5c5,_0x1a419b){const _0x5038fc=_0x253410;dbConfig[_0x5038fc(0x1ca)](_0x5038fc(0x316))[_0x5038fc(0x29c)]({'botID':_0x40e5c5})[_0x5038fc(0x279)]({'status':_0x1a419b})[_0x5038fc(0x1f1)](),config=getConfiguration(),io['to'](_0x5038fc(0x315))[_0x5038fc(0x1e7)]('bots',config);}function updateLive(_0x581b40,_0xa39ef7){const _0x367e34=_0x253410;dbConfig[_0x367e34(0x1ca)](_0x367e34(0x316))[_0x367e34(0x29c)]({'botID':_0x581b40})['assign']({'live':_0xa39ef7})[_0x367e34(0x1f1)](),config=getConfiguration(),io['to']('botmanager')[_0x367e34(0x1e7)]('bots',config);}function updateBotName(_0x47a1ae,_0x46fe83){const _0x186404=_0x253410;dbConfig[_0x186404(0x1ca)](_0x186404(0x316))[_0x186404(0x29c)]({'botID':_0x47a1ae})[_0x186404(0x279)]({'botname':_0x46fe83})['write'](),config=getConfiguration(),io['to'](_0x186404(0x315))[_0x186404(0x1e7)](_0x186404(0x316),config);}function updateBotManager(){const _0x5d6dff=_0x253410;config=getConfiguration(),io['to'](_0x5d6dff(0x315))[_0x5d6dff(0x1e7)](_0x5d6dff(0x316),config);}function toggleBotMode(_0x1a820c){const _0x5283fd=_0x253410;if(pid[_0x1a820c])pid[_0x1a820c]['send']({'function':_0x5283fd(0x2b3),'args':null});else{const _0x43f8f4=configpath+_0x5283fd(0x287)+_0x1a820c+_0x5283fd(0x295),_0x5c1320=fs[_0x5283fd(0x276)](_0x43f8f4),_0x526ffc=JSON[_0x5283fd(0x25b)](_0x5c1320),_0x394deb=_0x526ffc[_0x5283fd(0x2ff)][0x0]['headless'];_0x526ffc[_0x5283fd(0x2ff)][0x0][_0x5283fd(0x23b)]=!_0x394deb;const _0x2a6ec2=JSON[_0x5283fd(0x22d)](_0x526ffc,null,0x2);fs[_0x5283fd(0x274)](_0x43f8f4,_0x2a6ec2),config=getConfiguration(),io['to']('botmanager')[_0x5283fd(0x1e7)]('bots',config);}}function telegramError(_0x3babf5){const _0x813733=_0x253410;logger[_0x813733(0x26e)](getTimeStamp()+_0x813733(0x2e0));}function validateTelegram(_0x45726d){const _0x179aed=_0x253410;if(_0x45726d[_0x179aed(0x18a)]['username']!=settings[_0x179aed(0x2dc)]&&'@'+_0x45726d[_0x179aed(0x18a)][_0x179aed(0x216)]!=settings[_0x179aed(0x2dc)])return tgBot[_0x179aed(0x22c)](_0x45726d[_0x179aed(0x1db)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x179aed(0x20c)})[_0x179aed(0x233)](_0x554ca3=>{telegramError(_0x554ca3);}),![];return!![];}async function initTelegram(){const _0x47976f=_0x253410;if(tgBot)tgBot[_0x47976f(0x248)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x26dffc=_0x47976f(0x1ae);_0x26dffc+='\x0a',_0x26dffc+=_0x47976f(0x273),_0x26dffc+=_0x47976f(0x305),_0x26dffc+=_0x47976f(0x1ab),_0x26dffc+=_0x47976f(0x2e5),_0x26dffc+='/on\x20-\x20start\x20bot(s)\x0a',_0x26dffc+='/off\x20-\x20stop\x20bot(s)\x0a',_0x26dffc+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x26dffc+=_0x47976f(0x184),_0x26dffc+=_0x47976f(0x18d),_0x26dffc+=_0x47976f(0x2e4),_0x26dffc+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x26dffc+=_0x47976f(0x192);let _0x19fa58=_0x47976f(0x23e);_0x19fa58+='\x0a',_0x19fa58+=_0x26dffc,tgBot[_0x47976f(0x303)](/\/start/,_0x71e335=>{const _0x3c3a18=_0x47976f;if(!validateTelegram(_0x71e335))return;if(settings['telegramChatId']!=_0x71e335[_0x3c3a18(0x1db)]['id'])updateSetting(_0x3c3a18(0x183),_0x71e335[_0x3c3a18(0x1db)]['id']);updateSetting(_0x3c3a18(0x185),!![]),tgBot['sendMessage'](_0x71e335[_0x3c3a18(0x1db)]['id'],_0x19fa58)[_0x3c3a18(0x233)](_0x3e9bc6=>{telegramError(_0x3e9bc6);});}),tgBot[_0x47976f(0x303)](/\/enable/,_0xfa5e6d=>{const _0xfe933f=_0x47976f;if(!validateTelegram(_0xfa5e6d))return;if(settings[_0xfe933f(0x183)]!=_0xfa5e6d[_0xfe933f(0x1db)]['id'])updateSetting('telegramChatId',_0xfa5e6d[_0xfe933f(0x1db)]['id']);updateSetting(_0xfe933f(0x185),!![]),tgBot['sendMessage'](_0xfa5e6d[_0xfe933f(0x1db)]['id'],'Notifications\x20enabled')['catch'](_0x396a7d=>{telegramError(_0x396a7d);});}),tgBot[_0x47976f(0x303)](/\/config/,async _0x1eb9a5=>{const _0x389026=_0x47976f;if(!validateTelegram(_0x1eb9a5))return;tgBot[_0x389026(0x25a)](_0x389026(0x1d4)),tgBot[_0x389026(0x22c)](_0x1eb9a5['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x389026(0x1f4),'callback_data':_0x389026(0x19b)},{'text':_0x389026(0x21c),'callback_data':_0x389026(0x2ea)},{'text':_0x389026(0x264),'callback_data':_0x389026(0x2e3)}]]}})[_0x389026(0x233)](_0x55dc5e=>{telegramError(_0x55dc5e);}),tgBot['on'](_0x389026(0x1d4),async _0x111f5f=>{const _0x51e83a=_0x389026,_0x6a2295=_0x111f5f[_0x51e83a(0x1e9)],_0x5b4f68=_0x111f5f[_0x51e83a(0x1c4)];tgBot[_0x51e83a(0x30a)](_0x111f5f['id'])[_0x51e83a(0x29f)](async()=>{const _0x354099=_0x51e83a;_0x6a2295==_0x354099(0x19b)&&(updateSetting(_0x354099(0x2b4),_0x354099(0x19b)),updateSetting(_0x354099(0x185),!![]),await tgBot[_0x354099(0x22c)](_0x5b4f68[_0x354099(0x1db)]['id'],_0x354099(0x263))['catch'](_0x2cd073=>{telegramError(_0x2cd073);}));_0x6a2295==_0x354099(0x2ea)&&(updateSetting(_0x354099(0x2b4),_0x354099(0x2ea)),updateSetting('telegramEnabled',!![]),await tgBot[_0x354099(0x22c)](_0x5b4f68[_0x354099(0x1db)]['id'],_0x354099(0x231))['catch'](_0x41f5fd=>{telegramError(_0x41f5fd);}));_0x6a2295=='all'&&(updateSetting(_0x354099(0x2b4),_0x354099(0x2e3)),updateSetting('telegramEnabled',!![]),await tgBot[_0x354099(0x22c)](_0x5b4f68['chat']['id'],_0x354099(0x1a9))[_0x354099(0x233)](_0x236baf=>{telegramError(_0x236baf);}));if(!settings['telegramChatId'])tgBot[_0x354099(0x22c)](_0x5b4f68[_0x354099(0x1db)]['id'],_0x354099(0x28c))[_0x354099(0x233)](_0x3276a4=>{telegramError(_0x3276a4);});}),tgBot[_0x51e83a(0x25a)](_0x51e83a(0x1d4));});}),tgBot[_0x47976f(0x303)](/\/status/,_0x27d141=>{const _0x3a8b8f=_0x47976f;if(!validateTelegram(_0x27d141))return;const _0x1b76d0=getBotsWithMode();let _0x1b95e3='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x35360f=>{const _0x3ea330=_0x4267,_0x3f18ba=_0x1b76d0[_0x3ea330(0x29c)](_0x53777c=>_0x53777c[_0x3ea330(0x1fb)]==_0x35360f[_0x3ea330(0x1fb)])[_0x3ea330(0x2f8)];_0x1b95e3+=_0x3ea330(0x271)+_0x35360f['botID']+':\x20'+_0x35360f[_0x3ea330(0x1e2)]+'\x20|\x20'+_0x3f18ba+_0x3ea330(0x18e)+_0x35360f[_0x3ea330(0x27c)]+'\x0a';}),_0x1b95e3+='\x0a',_0x1b95e3+=_0x3a8b8f(0x1a0),_0x1b95e3+=!settings[_0x3a8b8f(0x185)]?_0x3a8b8f(0x2e6):'Notifications\x20enabled\x0a',_0x1b95e3+=settings[_0x3a8b8f(0x185)]?settings[_0x3a8b8f(0x2b4)]==_0x3a8b8f(0x2e3)?_0x3a8b8f(0x1a8):_0x3a8b8f(0x2af)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x3a8b8f(0x22c)](_0x27d141[_0x3a8b8f(0x1db)]['id'],_0x1b95e3,{'parse_mode':_0x3a8b8f(0x20c)})['catch'](_0x1f6b04=>{telegramError(_0x1f6b04);});}),tgBot[_0x47976f(0x303)](/\/restart/,_0x5d7692=>{const _0x31bb3c=_0x47976f;if(!validateTelegram(_0x5d7692))return;tgBot[_0x31bb3c(0x25a)]('callback_query');const _0x2c73a0=getEnabledBots();if(_0x2c73a0[_0x31bb3c(0x1c7)]==0x0)tgBot[_0x31bb3c(0x22c)](_0x5d7692[_0x31bb3c(0x1db)]['id'],_0x31bb3c(0x1df))[_0x31bb3c(0x233)](_0x590d9b=>{telegramError(_0x590d9b);});else{if(_0x2c73a0[_0x31bb3c(0x1c7)]>0x1)_0x2c73a0[_0x31bb3c(0x269)]({'botID':_0x31bb3c(0x2e3)});let _0x212b78=[],_0x9e42e5=[];const _0x5f2b2e=_0x2c73a0[_0x31bb3c(0x1c7)]%0x4==0x0||_0x2c73a0[_0x31bb3c(0x1c7)]%0x4==0x3||_0x2c73a0['length']%0x3==0x1?0x4:0x3;let _0x1f5972=0x0;_0x2c73a0[_0x31bb3c(0x1c8)]((_0x3fe20d,_0x553f0f)=>{const _0x2197d6=_0x31bb3c;if(_0x553f0f%_0x5f2b2e==0x0)_0x9e42e5=[];_0x9e42e5[_0x2197d6(0x269)]({'text':_0x3fe20d[_0x2197d6(0x1fb)]=='all'?_0x2197d6(0x2d1):'Bot\x20'+_0x3fe20d[_0x2197d6(0x1fb)],'callback_data':_0x3fe20d[_0x2197d6(0x1fb)]}),_0x553f0f%_0x5f2b2e==0x0&&(_0x212b78[_0x1f5972]=_0x9e42e5,_0x1f5972++);}),tgBot[_0x31bb3c(0x22c)](_0x5d7692['chat']['id'],_0x31bb3c(0x1e8),{'reply_markup':{'inline_keyboard':_0x212b78}})[_0x31bb3c(0x233)](_0x2053af=>{telegramError(_0x2053af);}),tgBot['on']('callback_query',async _0x1ef734=>{const _0x4503f0=_0x31bb3c,_0x43cdfc=_0x1ef734['data'],_0x536c77=_0x1ef734[_0x4503f0(0x1c4)];tgBot[_0x4503f0(0x30a)](_0x1ef734['id'])[_0x4503f0(0x29f)](async()=>{const _0x6966a3=_0x4503f0;_0x43cdfc==_0x6966a3(0x2e3)?config[_0x6966a3(0x1c8)](_0x43fe18=>{restartBot(_0x43fe18['botID']);}):restartBot(_0x43cdfc);}),tgBot['removeListener'](_0x4503f0(0x1d4));});}}),tgBot[_0x47976f(0x303)](/\/on/,_0x480a3e=>{const _0x1faa4c=_0x47976f;if(!validateTelegram(_0x480a3e))return;tgBot[_0x1faa4c(0x25a)](_0x1faa4c(0x1d4));const _0x5828a2=getDisabledBots();if(_0x5828a2[_0x1faa4c(0x1c7)]==0x0)tgBot[_0x1faa4c(0x22c)](_0x480a3e[_0x1faa4c(0x1db)]['id'],_0x1faa4c(0x204))[_0x1faa4c(0x233)](_0xfbaf4e=>{telegramError(_0xfbaf4e);});else{if(_0x5828a2[_0x1faa4c(0x1c7)]>0x1)_0x5828a2[_0x1faa4c(0x269)]({'botID':'all'});let _0x397e6b=[],_0x5ee246=[];const _0x5af877=_0x5828a2[_0x1faa4c(0x1c7)]%0x4==0x0||_0x5828a2['length']%0x4==0x3||_0x5828a2[_0x1faa4c(0x1c7)]%0x3==0x1?0x4:0x3;let _0x2eb7b8=0x0;_0x5828a2[_0x1faa4c(0x1c8)]((_0x530db9,_0x244beb)=>{const _0x3d365f=_0x1faa4c;if(_0x244beb%_0x5af877==0x0)_0x5ee246=[];_0x5ee246[_0x3d365f(0x269)]({'text':_0x530db9[_0x3d365f(0x1fb)]=='all'?_0x3d365f(0x2d1):_0x3d365f(0x271)+_0x530db9[_0x3d365f(0x1fb)],'callback_data':_0x530db9[_0x3d365f(0x1fb)]}),_0x244beb%_0x5af877==0x0&&(_0x397e6b[_0x2eb7b8]=_0x5ee246,_0x2eb7b8++);}),tgBot['sendMessage'](_0x480a3e['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x397e6b}})[_0x1faa4c(0x233)](_0xdc6eeb=>{telegramError(_0xdc6eeb);}),tgBot['on'](_0x1faa4c(0x1d4),async _0x1511a3=>{const _0x3c4be5=_0x1faa4c,_0x2e9cb7=_0x1511a3['data'],_0x3b58b8=_0x1511a3[_0x3c4be5(0x1c4)];tgBot['answerCallbackQuery'](_0x1511a3['id'])[_0x3c4be5(0x29f)](async()=>{const _0x26d033=_0x3c4be5;_0x2e9cb7=='all'?(tgBot[_0x26d033(0x22c)](_0x3b58b8[_0x26d033(0x1db)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')['catch'](_0x541d51=>{telegramError(_0x541d51);}),_0x5828a2[_0x26d033(0x1c8)](_0x32e0b0=>{const _0x585050=_0x26d033;if(_0x32e0b0[_0x585050(0x1fb)]!=_0x585050(0x2e3))toggleBot(_0x32e0b0[_0x585050(0x1fb)],toggleStatus(_0x32e0b0[_0x585050(0x1fb)]),_0x585050(0x1e0));})):(tgBot[_0x26d033(0x22c)](_0x3b58b8[_0x26d033(0x1db)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x2e9cb7)[_0x26d033(0x233)](_0x51364e=>{telegramError(_0x51364e);}),toggleBot(_0x2e9cb7,toggleStatus(_0x2e9cb7),_0x26d033(0x1e0)));}),tgBot[_0x3c4be5(0x25a)](_0x3c4be5(0x1d4));});}}),tgBot[_0x47976f(0x303)](/\/off/,_0x222422=>{const _0xe1b21b=_0x47976f;if(!validateTelegram(_0x222422))return;tgBot[_0xe1b21b(0x25a)](_0xe1b21b(0x1d4));const _0xea2dc2=getEnabledBots();if(_0xea2dc2[_0xe1b21b(0x1c7)]==0x0)tgBot[_0xe1b21b(0x22c)](_0x222422['chat']['id'],_0xe1b21b(0x1df))[_0xe1b21b(0x233)](_0x9939e4=>{telegramError(_0x9939e4);});else{if(_0xea2dc2[_0xe1b21b(0x1c7)]>0x1)_0xea2dc2['push']({'botID':_0xe1b21b(0x2e3)});let _0x972fde=[],_0x7c1193=[];const _0x90fbe0=_0xea2dc2['length']%0x4==0x0||_0xea2dc2[_0xe1b21b(0x1c7)]%0x4==0x3||_0xea2dc2[_0xe1b21b(0x1c7)]%0x3==0x1?0x4:0x3;let _0xe7e443=0x0;_0xea2dc2['forEach']((_0x309ff7,_0x3f2084)=>{const _0x29c3de=_0xe1b21b;if(_0x3f2084%_0x90fbe0==0x0)_0x7c1193=[];_0x7c1193[_0x29c3de(0x269)]({'text':_0x309ff7[_0x29c3de(0x1fb)]==_0x29c3de(0x2e3)?_0x29c3de(0x2d1):_0x29c3de(0x271)+_0x309ff7[_0x29c3de(0x1fb)],'callback_data':_0x309ff7['botID']}),_0x3f2084%_0x90fbe0==0x0&&(_0x972fde[_0xe7e443]=_0x7c1193,_0xe7e443++);}),tgBot['sendMessage'](_0x222422[_0xe1b21b(0x1db)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x972fde}})[_0xe1b21b(0x233)](_0x104469=>{telegramError(_0x104469);}),tgBot['on']('callback_query',async _0x589671=>{const _0x2f09d9=_0xe1b21b,_0x1bf94f=_0x589671[_0x2f09d9(0x1e9)],_0x1ced1a=_0x589671[_0x2f09d9(0x1c4)];tgBot['answerCallbackQuery'](_0x589671['id'])[_0x2f09d9(0x29f)](async()=>{const _0x2fea3f=_0x2f09d9;_0x1bf94f==_0x2fea3f(0x2e3)?(tgBot[_0x2fea3f(0x22c)](_0x1ced1a['chat']['id'],_0x2fea3f(0x2be))[_0x2fea3f(0x233)](_0x1e448f=>{telegramError(_0x1e448f);}),_0xea2dc2[_0x2fea3f(0x1c8)](_0x1638ca=>{const _0x53b418=_0x2fea3f;if(_0x1638ca[_0x53b418(0x1fb)]!='all')toggleBot(_0x1638ca[_0x53b418(0x1fb)],toggleStatus(_0x1638ca[_0x53b418(0x1fb)]),_0x53b418(0x1e0));})):(tgBot[_0x2fea3f(0x22c)](_0x1ced1a[_0x2fea3f(0x1db)]['id'],_0x2fea3f(0x1e3)+_0x1bf94f)['catch'](_0x49f75e=>{telegramError(_0x49f75e);}),toggleBot(_0x1bf94f,toggleStatus(_0x1bf94f),_0x2fea3f(0x1e0)));}),tgBot[_0x2f09d9(0x25a)](_0x2f09d9(0x1d4));});}}),tgBot[_0x47976f(0x303)](/\/portfolio/,_0xafa5a1=>{const _0x32fda5=_0x47976f;if(!validateTelegram(_0xafa5a1))return;tgBot['removeListener'](_0x32fda5(0x1d4));const _0x223ba5=getEnabledBots();if(_0x223ba5[_0x32fda5(0x1c7)]==0x0)tgBot[_0x32fda5(0x22c)](_0xafa5a1['chat']['id'],_0x32fda5(0x1df))[_0x32fda5(0x233)](_0x30f1de=>{telegramError(_0x30f1de);});else{if(_0x223ba5[_0x32fda5(0x1c7)]>0x1){let _0x7db7=[],_0x234208=[];const _0x465c34=_0x223ba5[_0x32fda5(0x1c7)]%0x4==0x0||_0x223ba5['length']%0x4==0x3||_0x223ba5[_0x32fda5(0x1c7)]%0x3==0x1?0x4:0x3;let _0x323378=0x0;_0x223ba5['forEach']((_0x515775,_0x3bbe0b)=>{const _0x44305d=_0x32fda5;if(_0x3bbe0b%_0x465c34==0x0)_0x234208=[];_0x234208[_0x44305d(0x269)]({'text':_0x44305d(0x271)+_0x515775[_0x44305d(0x1fb)],'callback_data':_0x515775['botID']}),_0x3bbe0b%_0x465c34==0x0&&(_0x7db7[_0x323378]=_0x234208,_0x323378++);}),tgBot[_0x32fda5(0x22c)](_0xafa5a1[_0x32fda5(0x1db)]['id'],_0x32fda5(0x2b8),{'reply_markup':{'inline_keyboard':_0x7db7}})['catch'](_0x2a6d40=>{telegramError(_0x2a6d40);}),tgBot['on'](_0x32fda5(0x1d4),async _0x16aae3=>{const _0x5e2929=_0x32fda5,_0x2821ef=_0x16aae3[_0x5e2929(0x1e9)],_0x43071d=_0x16aae3[_0x5e2929(0x1c4)];tgBot['answerCallbackQuery'](_0x16aae3['id'])[_0x5e2929(0x29f)](async()=>{const _0x55d28f=_0x5e2929;if(pid[_0x2821ef])pid[_0x2821ef]['send']({'function':_0x55d28f(0x191),'args':null});}),tgBot['removeListener'](_0x5e2929(0x1d4));});}else{const _0x3b9d20=_0x223ba5[0x0][_0x32fda5(0x1fb)];if(pid[_0x3b9d20])pid[_0x3b9d20][_0x32fda5(0x318)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x47976f(0x303)](/\/update/,async _0x4f4aa3=>{const _0x9cb4cc=_0x47976f;if(!validateTelegram(_0x4f4aa3))return;tgBot[_0x9cb4cc(0x25a)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x9cb4cc(0x22c)](_0x4f4aa3['chat']['id'],_0x9cb4cc(0x30e))[_0x9cb4cc(0x233)](_0x51dba3=>{telegramError(_0x51dba3);});else!validInstallation?tgBot[_0x9cb4cc(0x22c)](_0x4f4aa3[_0x9cb4cc(0x1db)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x2d72dc=>{telegramError(_0x2d72dc);}):(tgBot['sendMessage'](_0x4f4aa3[_0x9cb4cc(0x1db)]['id'],_0x9cb4cc(0x1d9),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x9cb4cc(0x233)](_0x4853db=>{telegramError(_0x4853db);}),tgBot['on'](_0x9cb4cc(0x1d4),async _0x25b955=>{const _0x21ea15=_0x9cb4cc,_0x1ace22=_0x25b955['data'],_0x2c932a=_0x25b955['message'];tgBot[_0x21ea15(0x30a)](_0x25b955['id'])[_0x21ea15(0x29f)](async()=>{const _0x311677=_0x21ea15;_0x1ace22==_0x311677(0x293)&&(await tgBot[_0x311677(0x22c)](_0x2c932a[_0x311677(0x1db)]['id'],_0x311677(0x1aa))[_0x311677(0x233)](_0x2b2374=>{telegramError(_0x2b2374);}),updateBB());_0x1ace22=='no'&&await tgBot['sendMessage'](_0x2c932a['chat']['id'],_0x311677(0x219))[_0x311677(0x233)](_0x38fb9d=>{telegramError(_0x38fb9d);});if(!settings[_0x311677(0x183)])tgBot[_0x311677(0x22c)](_0x2c932a[_0x311677(0x1db)]['id'],_0x311677(0x28c))['catch'](_0x53017e=>{telegramError(_0x53017e);});}),tgBot[_0x21ea15(0x25a)]('callback_query');}));}),tgBot[_0x47976f(0x303)](/\/toggle/,_0xd77824=>{const _0x5bed64=_0x47976f;if(!validateTelegram(_0xd77824))return;tgBot[_0x5bed64(0x25a)](_0x5bed64(0x1d4));const _0x56b3ea=getBotsWithMode();if(_0x56b3ea[_0x5bed64(0x1c7)]==0x0)tgBot[_0x5bed64(0x22c)](_0xd77824[_0x5bed64(0x1db)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5bed64(0x233)](_0x468f86=>{telegramError(_0x468f86);});else{let _0x3ba2b1=[],_0x5a0b53=[];const _0x4ebecb=0x2;let _0x4e6f10=0x0;_0x56b3ea[_0x5bed64(0x1c8)]((_0x4980c4,_0x4d7730)=>{const _0x255039=_0x5bed64;if(_0x4d7730%_0x4ebecb==0x0)_0x5a0b53=[];_0x5a0b53[_0x255039(0x269)]({'text':'Bot\x20'+_0x4980c4[_0x255039(0x1fb)]+'\x20('+_0x4980c4[_0x255039(0x2f8)]+')','callback_data':_0x4980c4[_0x255039(0x1fb)]}),_0x4d7730%_0x4ebecb==0x0&&(_0x3ba2b1[_0x4e6f10]=_0x5a0b53,_0x4e6f10++);}),tgBot[_0x5bed64(0x22c)](_0xd77824['chat']['id'],_0x5bed64(0x22a),{'reply_markup':{'inline_keyboard':_0x3ba2b1}})['catch'](_0x5d8d00=>{telegramError(_0x5d8d00);}),tgBot['on']('callback_query',async _0x11252a=>{const _0x1e4a22=_0x5bed64,_0x53ecd2=_0x11252a[_0x1e4a22(0x1e9)],_0x43dbf1=_0x11252a['message'];tgBot['answerCallbackQuery'](_0x11252a['id'])[_0x1e4a22(0x29f)](async()=>{const _0x71c7e9=_0x1e4a22,_0x23d4db=_0x56b3ea[_0x71c7e9(0x29c)](_0x501cf7=>_0x501cf7['botID']==_0x53ecd2),_0x57f476=_0x23d4db[_0x71c7e9(0x2f8)]==_0x71c7e9(0x1e5)?_0x71c7e9(0x1dd):_0x71c7e9(0x1e5);tgBot[_0x71c7e9(0x22c)](_0x43dbf1[_0x71c7e9(0x1db)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x53ecd2+_0x71c7e9(0x201)+_0x57f476+_0x71c7e9(0x2fa))['catch'](_0x140f0e=>{telegramError(_0x140f0e);}),toggleBotMode(_0x53ecd2);}),tgBot['removeListener'](_0x1e4a22(0x1d4));});}}),tgBot['onText'](/\/names/,_0x465671=>{const _0x460d74=_0x47976f;if(!validateTelegram(_0x465671))return;let _0xbd14df='';config['forEach'](_0x284d9c=>{const _0x5733d9=_0x4267;_0xbd14df+=_0x5733d9(0x271)+_0x284d9c[_0x5733d9(0x1fb)]+':\x20'+_0x284d9c[_0x5733d9(0x30d)]+'\x0a';}),tgBot[_0x460d74(0x22c)](_0x465671[_0x460d74(0x1db)]['id'],_0xbd14df,{'parse_mode':_0x460d74(0x20c)})[_0x460d74(0x233)](_0xf0b123=>{telegramError(_0xf0b123);});}),tgBot['onText'](/\/disable/,_0xf23d5e=>{const _0x1485b0=_0x47976f;if(!validateTelegram(_0xf23d5e))return;tgBot[_0x1485b0(0x22c)](_0xf23d5e['chat']['id'],_0x1485b0(0x311))[_0x1485b0(0x233)](_0x3bb008=>{telegramError(_0x3bb008);}),updateSetting(_0x1485b0(0x185),![]);}),tgBot[_0x47976f(0x303)](/\/help/,_0x2b38a8=>{const _0x405191=_0x47976f;if(!validateTelegram(_0x2b38a8))return;tgBot[_0x405191(0x22c)](_0x2b38a8['chat']['id'],_0x26dffc)[_0x405191(0x233)](_0x4f6b7e=>{telegramError(_0x4f6b7e);});}),tgBot['on']('polling_error',_0x5e59c5=>{const _0x433f8e=_0x47976f;_0x5e59c5[_0x433f8e(0x220)]()['includes'](_0x433f8e(0x180))&&(logger['full'](_0x433f8e(0x23a)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x433f8e(0x315))[_0x433f8e(0x1e7)](_0x433f8e(0x238),'Invalid\x20Telegram\x20token'));}),process[_0x47976f(0x23d)](_0x47976f(0x1ed),()=>{const _0x558079=_0x47976f;if(tgBot)tgBot[_0x558079(0x248)]();process[_0x558079(0x2c5)](0x1);}),process[_0x47976f(0x23d)](_0x47976f(0x207),()=>{const _0xb8acae=_0x47976f;if(tgBot)tgBot[_0xb8acae(0x248)]();process[_0xb8acae(0x2c5)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x1e802b,_0x2ffef6){const _0x10f717=_0x253410;if(settings['telegramEnabled']){if(settings[_0x10f717(0x2b4)]==_0x10f717(0x2e3)||(_0x2ffef6[_0x10f717(0x218)]==_0x10f717(0x242)||_0x2ffef6['type']==_0x10f717(0x24d)||_0x2ffef6[_0x10f717(0x218)]==_0x10f717(0x1d1))&&settings['telegramEvents']==_0x10f717(0x2ea)||_0x2ffef6['type']==_0x10f717(0x2a9)&&settings[_0x10f717(0x2b4)]==_0x10f717(0x19b)){if(tgBot&&settings[_0x10f717(0x183)]){if(_0x2ffef6[_0x10f717(0x227)])tgBot[_0x10f717(0x22c)](settings[_0x10f717(0x183)],_0x2ffef6[_0x10f717(0x30d)]+_0x10f717(0x288)+_0x2ffef6[_0x10f717(0x2a5)])['catch'](_0x569a34=>{telegramError(_0x569a34);});else tgBot[_0x10f717(0x22c)](settings['telegramChatId'],'Bot\x20'+_0x1e802b+_0x10f717(0x288)+_0x2ffef6[_0x10f717(0x2a5)])['catch'](_0x2b339c=>{telegramError(_0x2b339c);});}}}}async function sendTelegramMsg(_0x5380c8,_0x3347ce=_0x253410(0x20c)){const _0x50a34f=_0x253410;return settings[_0x50a34f(0x185)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x50a34f(0x22c)](settings[_0x50a34f(0x183)],_0x5380c8,{'parse_mode':_0x3347ce})[_0x50a34f(0x233)](_0x4a50d5=>{telegramError(_0x4a50d5);}),!![]):![];}function getDeviceWithIp(_0x481640){const _0xb06fb8=_0x253410;return devices[_0xb06fb8(0x29c)](_0x3381db=>_0x3381db['ip']===_0x481640);}function temporaryAccess2FA(_0x16c22d,_0x272165){const _0x4a6f4f=_0x253410;let _0x1a08da=new Date(),_0x51e346=![];if(lastIpApproval){if(_0x1a08da-lastIpApproval<0x1388)_0x51e346=!![];}lastIpApproval=new Date();if(_0x51e346)return;tgBot&&settings[_0x4a6f4f(0x183)]&&(tgBot[_0x4a6f4f(0x25a)](_0x4a6f4f(0x1d4)),tgBot[_0x4a6f4f(0x22c)](settings['telegramChatId'],_0x4a6f4f(0x259)+normalizeIP(_0x272165)[_0x4a6f4f(0x245)]+_0x4a6f4f(0x2a2),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x4a6f4f(0x27f),'callback_data':'15'},{'text':_0x4a6f4f(0x2d9),'callback_data':'30'},{'text':_0x4a6f4f(0x223),'callback_data':_0x4a6f4f(0x223)}]]}})[_0x4a6f4f(0x233)](_0x390692=>{telegramError(_0x390692);}),tgBot['on']('callback_query',async _0xc0dc91=>{const _0x3525b7=_0x4a6f4f,_0x587b8a=_0xc0dc91[_0x3525b7(0x1e9)],_0x1e82bd=_0xc0dc91[_0x3525b7(0x1c4)];tgBot[_0x3525b7(0x30a)](_0xc0dc91['id'])[_0x3525b7(0x29f)](async()=>{const _0x5e9f04=_0x3525b7;devices[_0x16c22d][_0x5e9f04(0x197)]={'clientip':_0x272165,'timestamp':new Date()[_0x5e9f04(0x30c)](),'expiry':_0x587b8a},_0x587b8a!=_0x5e9f04(0x223)?(await tgBot[_0x5e9f04(0x22c)](_0x1e82bd[_0x5e9f04(0x1db)]['id'],'Access\x20enabled\x20for\x20'+_0x587b8a+_0x5e9f04(0x1f8),{'parse_mode':'HTML'})['catch'](_0x4140f5=>{telegramError(_0x4140f5);}),io['to'](_0x16c22d)[_0x5e9f04(0x1e7)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x5e9f04(0x22c)](_0x1e82bd[_0x5e9f04(0x1db)]['id'],_0x5e9f04(0x212))['catch'](_0x43b88f=>{telegramError(_0x43b88f);}),io['to'](_0x16c22d)[_0x5e9f04(0x1e7)](_0x5e9f04(0x1e2),{'access':{'allow':![],'reason':_0x5e9f04(0x1ff),'token':null}}));}),tgBot[_0x3525b7(0x25a)](_0x3525b7(0x1d4));}));}function loginAccess2FA(_0x2f57bc,_0x123e66){const _0x5db6f0=_0x253410;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x5db6f0(0x1d4)),tgBot[_0x5db6f0(0x22c)](settings['telegramChatId'],_0x5db6f0(0x26a)+normalizeIP(_0x123e66)[_0x5db6f0(0x245)]+_0x5db6f0(0x2a2),{'parse_mode':_0x5db6f0(0x20c),'reply_markup':{'inline_keyboard':[[{'text':_0x5db6f0(0x2d4),'callback_data':loginExpiry},{'text':_0x5db6f0(0x223),'callback_data':_0x5db6f0(0x223)}]]}})[_0x5db6f0(0x233)](_0x4a779=>{telegramError(_0x4a779);}),tgBot['on'](_0x5db6f0(0x1d4),async _0x284a7c=>{const _0x20205b=_0x5db6f0,_0x21323f=_0x284a7c['data'],_0x452ec9=_0x284a7c['message'];tgBot['answerCallbackQuery'](_0x284a7c['id'])[_0x20205b(0x29f)](async()=>{const _0x597aef=_0x20205b;devices[_0x2f57bc][_0x597aef(0x210)]={'clientip':_0x123e66,'timestamp':new Date()[_0x597aef(0x30c)](),'expiry':_0x21323f},_0x21323f!=_0x597aef(0x223)?(await tgBot[_0x597aef(0x22c)](_0x452ec9['chat']['id'],'Login\x20accepted',{'parse_mode':_0x597aef(0x20c)})[_0x597aef(0x233)](_0x36f2ee=>{telegramError(_0x36f2ee);}),io['to'](_0x2f57bc)[_0x597aef(0x1e7)](_0x597aef(0x1e2),{'access':{'allow':![],'reason':_0x597aef(0x2cd),'token':null}})):(await tgBot[_0x597aef(0x22c)](_0x452ec9['chat']['id'],_0x597aef(0x26f))[_0x597aef(0x233)](_0x38293f=>{telegramError(_0x38293f);}),io['to'](_0x2f57bc)[_0x597aef(0x1e7)]('status',{'access':{'allow':![],'reason':_0x597aef(0x221),'token':null}}));}),tgBot[_0x20205b(0x25a)](_0x20205b(0x1d4));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x41bb66=_0x253410;return dbConfig[_0x41bb66(0x1ca)](_0x41bb66(0x316))[_0x41bb66(0x2c4)](_0x41bb66(0x1fb))['filter']({'status':'enabled'})[_0x41bb66(0x29a)]()||[];}function getDisabledBots(){const _0x4d8989=_0x253410;return dbConfig['get'](_0x4d8989(0x316))['sortBy'](_0x4d8989(0x1fb))['filter']({'status':_0x4d8989(0x2b0)})[_0x4d8989(0x29a)]()||[];}function getBotAttributes(_0x54df8a){const _0x1cd331=_0x253410;let _0x47ece0={};const _0x2446ed=configpath+_0x1cd331(0x287)+_0x54df8a+_0x1cd331(0x295),_0x86e25d=fs[_0x1cd331(0x228)](_0x2446ed);if(_0x86e25d){const _0x17cf1a=fs[_0x1cd331(0x276)](_0x2446ed);try{const _0x43ebbc=JSON[_0x1cd331(0x25b)](_0x17cf1a),_0x2704ab=_0x43ebbc?_0x43ebbc['bot'][0x0]['headless']:![];_0x47ece0[_0x1cd331(0x2f8)]=_0x2704ab?'auto':'manual',_0x47ece0[_0x1cd331(0x30d)]=_0x43ebbc?_0x43ebbc[_0x1cd331(0x2ff)][0x0][_0x1cd331(0x30d)]:_0x1cd331(0x271)+_0x54df8a;}catch(_0x5ae66d){_0x47ece0['mode']=_0x1cd331(0x1dd),_0x47ece0[_0x1cd331(0x30d)]=_0x1cd331(0x271)+_0x54df8a;}}else _0x47ece0['mode']=_0x1cd331(0x1dd),_0x47ece0[_0x1cd331(0x30d)]=_0x1cd331(0x271)+_0x54df8a;return _0x47ece0;}function getBotsWithMode(){const _0x2e0d7a=_0x253410,_0x264e4a=dbConfig[_0x2e0d7a(0x1ca)](_0x2e0d7a(0x316))[_0x2e0d7a(0x2c4)](_0x2e0d7a(0x1fb))['value']()||[];return _0x264e4a[_0x2e0d7a(0x1c8)](_0x41039f=>{const _0x3862f7=_0x2e0d7a;let _0x140a17=getBotAttributes(_0x41039f[_0x3862f7(0x1fb)]);_0x41039f['mode']=_0x140a17[_0x3862f7(0x2f8)];}),_0x264e4a;}async function initUser(){const _0x1d88f6=_0x253410;if(!settings[_0x1d88f6(0x310)]){const _0x309a11=uuidRandom();mixpanel[_0x1d88f6(0x241)](_0x309a11),updateSetting('userid',_0x309a11);}}async function initSecure(){const _0xd7fa58=_0x253410;let _0x1edcff=getSecure();if(!_0x1edcff[_0xd7fa58(0x299)](_0xd7fa58(0x18c))){let _0x21b19f=await generateKeys();_0x1edcff[_0xd7fa58(0x1d7)]=_0x21b19f['publicKey'],_0x1edcff[_0xd7fa58(0x27e)]=_0x21b19f[_0xd7fa58(0x27e)],_0x1edcff[_0xd7fa58(0x18c)]=crypto[_0xd7fa58(0x286)](0x20)[_0xd7fa58(0x220)](_0xd7fa58(0x246));;storeSecure(_0x1edcff);}}function getSettings(){const _0x354c81=_0x253410;return dbSettings['get']('settings')[_0x354c81(0x29a)]()||{};}function getSecure(){const _0x5b0ffc=_0x253410;return dbSecure[_0x5b0ffc(0x1ca)](_0x5b0ffc(0x196))[_0x5b0ffc(0x29a)]()||{};}function getBlacklist(){const _0x40d298=_0x253410;return dbSecure[_0x40d298(0x1ca)](_0x40d298(0x18b))[_0x40d298(0x29a)]()||[];}function broadcastToBots(_0x189add,_0x568522){const _0x5d1d45=_0x253410;config[_0x5d1d45(0x1c8)](_0x3bb960=>{const _0x3a378f=_0x5d1d45;if(_0x3bb960[_0x3a378f(0x1e2)]==_0x3a378f(0x297)&&_0x3bb960[_0x3a378f(0x27c)]==_0x3a378f(0x1cf)){if(pid[_0x3bb960['botID']])pid[_0x3bb960[_0x3a378f(0x1fb)]][_0x3a378f(0x318)]({[_0x189add]:_0x568522});}});}function storeSettings(_0x1f0e9d,_0x17c7e1=![]){const _0x1517be=_0x253410;_0x1f0e9d={...settings,..._0x1f0e9d};if(_0x17c7e1&&_0x1f0e9d['bbPassword']!=_0x1517be(0x1b6)&&_0x1f0e9d[_0x1517be(0x307)]!='***'&&_0x1f0e9d[_0x1517be(0x307)]!=''){const _0x5464bd=crypt['decrypt'](secure[_0x1517be(0x27e)],_0x1f0e9d['bbPassword'])['message']['split']('@')[0x0],_0x47d304=bcrypt[_0x1517be(0x268)](_0x5464bd,saltRounds);_0x1f0e9d={..._0x1f0e9d,'bbPassword':_0x47d304};}if(_0x17c7e1&&_0x1f0e9d['telegramToken']!=_0x1517be(0x1b6)&&_0x1f0e9d[_0x1517be(0x1f0)]!=_0x1517be(0x29e)&&_0x1f0e9d[_0x1517be(0x1f0)]!=''){const _0x254d56=crypt[_0x1517be(0x214)](secure['privateKey'],_0x1f0e9d[_0x1517be(0x1f0)])[_0x1517be(0x1c4)][_0x1517be(0x26c)]('@')[0x0];_0x1f0e9d={..._0x1f0e9d,'telegramToken':_0x254d56};}const _0x3553ed=_0x1f0e9d['telegramToken']!='************'&&_0x1f0e9d['telegramToken']!=settings[_0x1517be(0x1f0)]||_0x1f0e9d['telegramUsername']!=settings['telegramUsername'],_0xf5313b=_0x1f0e9d['telegramToken']==''||_0x1f0e9d[_0x1517be(0x2dc)]=='';if(_0x3553ed)_0x1f0e9d['telegramEvents']=_0x1517be(0x2e3);for(const [_0x4e8509,_0x172df3]of Object[_0x1517be(0x2e8)](_0x1f0e9d)){if(_0x4e8509==_0x1517be(0x1f0)&&_0x172df3=='************'){_0x1f0e9d[_0x1517be(0x1f0)]=settings[_0x1517be(0x1f0)];continue;};if(_0x4e8509==_0x1517be(0x307)&&_0x172df3=='************'){_0x1f0e9d[_0x1517be(0x307)]=settings['bbPassword'];continue;};dbSettings[_0x1517be(0x29b)](_0x1517be(0x27d)+_0x4e8509,_0x172df3)['write']();}settings=_0x1f0e9d,io['to'](_0x1517be(0x315))[_0x1517be(0x1e7)](_0x1517be(0x2de),cleanSettings()),broadcastToBots('timeshift',settings[_0x1517be(0x2ac)]);if(_0x3553ed&&!_0xf5313b)initTelegram();if(_0x3553ed&&_0xf5313b)disableTelegram();getAllClients()[_0x1517be(0x1c8)](_0x221a8d=>{const _0x3f7762=_0x1517be;getSocket(_0x221a8d['id'])[_0x3f7762(0x1e7)](_0x3f7762(0x1e2),{'access':{'allow':![],'reason':_0x3f7762(0x2cd),'token':null}});});}function updateSetting(_0x1b8a03,_0x4094f1){const _0x777e9e=_0x253410;dbSettings[_0x777e9e(0x29b)](_0x777e9e(0x27d)+_0x1b8a03,_0x4094f1)[_0x777e9e(0x1f1)](),settings=getSettings(),io['to'](_0x777e9e(0x315))[_0x777e9e(0x1e7)]('settings',cleanSettings());}function storeSecure(_0x4511f3){const _0x4545cf=_0x253410;dbSecure[_0x4545cf(0x1ca)](_0x4545cf(0x196))['push'](_0x4511f3)['write'](),secure=_0x4511f3;}function addBlacklist(_0x34ddb5){const _0x974019=_0x253410;cleanBlacklist();let _0x2871d6;devices[_0x34ddb5][_0x974019(0x197)]?_0x2871d6=Math[_0x974019(0x2d5)](devices[_0x34ddb5][_0x974019(0x197)][_0x974019(0x2a7)],loginExpiry):_0x2871d6=loginExpiry,dbSecure[_0x974019(0x1ca)](_0x974019(0x18b))[_0x974019(0x269)]({'expiry':new Date()[_0x974019(0x30c)]()+_0x2871d6*0x3c*0x3e8,'token':devices[_0x34ddb5][_0x974019(0x2da)][_0x974019(0x17c)]})[_0x974019(0x1f1)](),blacklist=dbSecure[_0x974019(0x1ca)](_0x974019(0x18b))['value']();}function cleanBlacklist(){const _0xa107c6=_0x253410;let _0x555201=dbSecure[_0xa107c6(0x1ca)](_0xa107c6(0x18b))[_0xa107c6(0x289)]()['value'](),_0x25a52e=new Date()['getTime']();_0x555201[_0xa107c6(0x1c8)](_0x5c79e1=>{const _0x1b70c4=_0xa107c6;_0x5c79e1[_0x1b70c4(0x2a7)]<_0x25a52e&&dbSecure[_0x1b70c4(0x1ca)](_0x1b70c4(0x18b))[_0x1b70c4(0x2ae)]({'expiry':_0x5c79e1[_0x1b70c4(0x2a7)]})[_0x1b70c4(0x1f1)]();});}function _0x54d1(){const _0x268826=['blacklist','secret','/status\x20-\x20show\x20bot(s)\x20status\x0a','\x20|\x20','handshake','static','sendPortfolioTelegram','/help\x20-\x20show\x20available\x20commands\x0a','graphql-request','reason','download','secure','telegramIpApproval','user','inherit','Unauthorized\x20attempt\x20to\x20download\x20','orders','log','bot.js','params','isIPv4MappedAddress','<b>Telegram\x20Bot\x20Status:</b>\x0a','axios','logout','getMinutes','::ffff:127.0.0.1','logged\x20out','delete-alerts','headers','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Starting\x20Balance\x20Bot\x20update','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','store-settings','*$1*','You\x20can\x20use\x20the\x20following\x20commands:\x0a','path','getSeconds','/:bot/support','User\x20has\x20been\x20validated','RSA','-events.json','kill','************','function','new','delete-bot','referer','login\x20required','/:bot/performance','Unauthorized\x20attempt\x20to\x20add\x20bot','backup','child_process','Unauthorized\x20attempt\x20to\x20get\x20messages','cancelLoading','store','pidRefreshToken','message','pidExpireLogin','uncaughtException','length','forEach','Markdown','get','show-config','copyFileSync','3228312JHWELK','storeHeadless','running','placeOrder','success','init','Restore\x20process\x20aborted','callback_query','lastmsgemitted','login\x20not\x20required','publicKey','2FA\x20login\x20required','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','temp/','chat','mixpanel','manual','14646CEYvER','No\x20bots\x20running\x20right\x20now','stopped','file','status','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','map','auto','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','emit','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','data','bb-config.json','new-disabled','File\x20uploaded','SIGINT','lowdb/adapters/FileSync','restart','telegramToken','write','Bot\x20Mgr\x20>\x20','get-starting-balances','Orders','ipv6','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','getFullYear','\x20minutes','crypto','logs','botID','get-portfolio','login\x20token\x20generated','(((.+)+)+)+$','temporary\x20access\x20rejected','lowdb','\x20to\x20','924375ejNiKk','randomFillSync','All\x20bots\x20running\x20right\x20now','add-bot','enabled\x20Bot\x20','SIGTERM','bbUsername','uuid','rmSync','node-zip','HTML','.zip','Unauthorized\x20attempt\x20to\x20log\x20out','full','telegram2FaApproval','getDate','Temporary\x20access\x20rejected','telegrammsg','decrypt','sockets','username','post','type','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','deleted\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Alerts','exec','access\x20timeout','port','toString','2FA\x20login\x20rejected','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','reject',',\x20must\x20be\x20a\x204\x20digit\x20number','search','getMonth','showname','existsSync','startsWith','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','getStartingBalances','sendMessage','stringify','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','output-000.log','logs/','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/:bot','catch','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','\x20(1)','login','ipc','notification','update-bb','Invalid\x20Telegram\x20token','headless','size','once','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','mkdirSync','listen','alias','error','socket.io','clients','show','hex','update-bot','stopPolling','confirm-message','disabled\x20Bot\x20','store-configuration','-performance.json','warning','defaults','sendFile','login\x20token\x20valid','temporaryAccessAllowed','removeAllListeners','temporary\x20access\x20not\x20allowed','getPortfolio','started','/:bot/portfolio','util','7mhbHCY','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','removeListener','parse','fork','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Password\x20has\x20been\x20reset\x20to:\x20','restarting\x20Bot\x20','updatebotmanager','statSync','index.html','Ok,\x20will\x20send\x20order\x20notifications\x20only','All','api-eu.mixpanel.com','use','sha256','hashSync','push','Allow\x20login\x20from\x20IP\x20address\x20<b>','Token\x20blacklisted','split','ipaddr.js','simple','Login\x20rejected','-----------------------------------------------------------------------------------','Bot\x20','readdirSync','/enable\x20-\x20enable\x20notifications\x0a','writeFileSync','906546pmuTIg','readFileSync','_data','files','assign','padStart','Unauthorized\x20attempt\x20to\x20confirm\x20message','live','settings.','privateKey','15\x20min','cancel-loading','express-fileupload','initclient','/:bot/history','starting\x20new\x20bot\x20|\x20Bot\x20','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','randomBytes','bot-','\x20>\x20','cloneDeep','add','\x20(2)','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','createWriteStream','1491771bwUIKC','messages','temporary\x20token\x20generated','apiSecret','remoteAddress','yes','/:bot/configuration','-config.json','yargs/yargs','enabled','env','hasOwnProperty','value','set','find','server','***','then','bcryptjs','auth','</b>\x20?','0.0.0','showConfig','event','kind','expiry','bbvNew','order','bbvReceive','get-logs','timeshift','/:bot/coins','remove','Notifications\x20types:\x20','disabled','6b67f3d61ee94b8f5c80b4affef4c4d9','backupfile','toggleBotMode','telegramEvents','invalid\x20credentials','min','-results.json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','constructor','generateKeyPairAsync','output-001.log','hybrid-crypto-js','2FA\x20required','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','getUTCHours','output-002.log','name','build','lastmsgtelegram','sortBy','exit','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','bb-secure.json','3000','get-messages','apply','starting\x20bot\x20|\x20Bot\x20','2FA\x20login\x20token\x20generated','reload','argv','Unauthorized\x20attempt\x20to\x20get\x20portfolio','127.0.0.1','All\x20bots','any','number','accept','max','join','sign','3322344HNhAIA','30\x20min','access','slice','telegramUsername','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','settings','latestversion',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','unlinkSync','config/','all','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','/restart\x20-\x20restart\x20bot(s)\x0a','Notifications\x20disabled\x0a','/output-000.log','entries','Unauthorized\x20attempt\x20to\x20show\x20configuration','alerts','track','1599060UgnEBM','disconnect','includes','test','apiKey','telegram','host','connection','keys','Failed\x20to\x20download\x20','title','format','mode','f2aRequired','\x20mode','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','isDirectory','allow','socket','bot','loginRequired','RSA-OAEP','DEFLATE','onText','temporary\x20access\x20timeout','/disable\x20-\x20disable\x20notifications\x0a','http','bbPassword','idling\x20bot\x20\x20\x20|\x20Bot\x20','replace','answerCallbackQuery',':\x20Bot\x20Mgr\x20>\x20','getTime','botname','Your\x20installation\x20is\x20already\x20up\x20to\x20date','toIPv4Address','userid','Notifications\x20disabled','toggle-bot-mode','request','sort','botmanager','bots','build2','send','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20update\x20settings','version','binary','emitHistory','::1','Invalid\x20username\x20or\x20IP\x20address','Unauthorized\x20attempt\x20to\x20store\x20configuration','isValid','stop','token','Unauthorized\x20attempt\x20to\x20update\x20bot','clientip','tkn','404\x20Not\x20Found','timestamp','version.json','telegramChatId','/names\x20-\x20show\x20bot\x20names\x0a','telegramEnabled','error\x20while\x20deleting\x20config\x20files:\x20','getHours','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','whitelist','from'];_0x54d1=function(){return _0x268826;};return _0x54d1();}function initStates(){let _0x49d35c=getConfiguration();_0x49d35c['forEach'](_0xa8cbf=>{const _0x735df2=_0x4267;_0xa8cbf[_0x735df2(0x27c)]=_0x735df2(0x1e0);}),storeConfiguration(_0x49d35c);}function onKeys(){const _0x3de95d=new RSA();return new Promise(_0x5e4569=>{const _0x5a8a70=_0x4267;_0x3de95d[_0x5a8a70(0x2ba)]()[_0x5a8a70(0x29f)](_0x3786fa=>{_0x5e4569(_0x3786fa);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x125bfa=_0x253410;let _0x422ff7=getSettings(),_0x571fee=![];!_0x422ff7['hasOwnProperty']('lastmsgtelegram')&&(_0x422ff7['lastmsgtelegram']=0x0,_0x571fee=!![]);!_0x422ff7['hasOwnProperty']('lastmsgemitted')&&(_0x422ff7[_0x125bfa(0x1d5)]=0x0,_0x571fee=!![]);!_0x422ff7[_0x125bfa(0x299)]('latestversion')&&(_0x422ff7[_0x125bfa(0x2df)]='0.0.0',_0x571fee=!![]);if(_0x571fee)storeSettings(_0x422ff7);}function storeConfiguration(_0x356052){const _0x52c4ef=_0x253410;dbConfig[_0x52c4ef(0x1ca)](_0x52c4ef(0x316))[_0x52c4ef(0x2ae)]()[_0x52c4ef(0x1f1)](),_0x356052[_0x52c4ef(0x1c8)](_0x4130c1=>{const _0x454077=_0x52c4ef;delete _0x4130c1[_0x454077(0x2f8)];}),dbConfig[_0x52c4ef(0x1ca)]('bots')[_0x52c4ef(0x269)](..._0x356052)[_0x52c4ef(0x1f1)](),config=_0x356052;}function resetPassword(){const _0xc06185=_0x253410;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0xc06185(0x1d4)),tgBot[_0xc06185(0x22c)](settings[_0xc06185(0x183)],_0xc06185(0x234),{'parse_mode':_0xc06185(0x20c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0xc06185(0x233)](_0x562a6e=>{telegramError(_0x562a6e);}),tgBot['on'](_0xc06185(0x1d4),async _0x26376e=>{const _0x4a151f=_0xc06185,_0x3254fc=_0x26376e[_0x4a151f(0x1e9)],_0x156606=_0x26376e[_0x4a151f(0x1c4)];tgBot[_0x4a151f(0x30a)](_0x26376e['id'])[_0x4a151f(0x29f)](async()=>{const _0x3df72d=_0x4a151f;if(_0x3254fc!='no'){const _0x43f2bb=0xf,_0x4cabfd=_0x3df72d(0x188),_0x97959=Array[_0x3df72d(0x18a)](crypto[_0x3df72d(0x203)](new Uint32Array(_0x43f2bb)))[_0x3df72d(0x1e4)](_0x54e337=>_0x4cabfd[_0x54e337%_0x4cabfd[_0x3df72d(0x1c7)]])[_0x3df72d(0x2d6)](''),_0x3d46cd=bcrypt['hashSync'](_0x97959,saltRounds);storeSettings({'bbPassword':_0x3d46cd}),await tgBot[_0x3df72d(0x22c)](_0x156606[_0x3df72d(0x1db)]['id'],_0x3df72d(0x25e)+_0x97959,{'parse_mode':_0x3df72d(0x20c)})['catch'](_0x432fd0=>{telegramError(_0x432fd0);});}else await tgBot['sendMessage'](_0x156606[_0x3df72d(0x1db)]['id'],'Password\x20reset\x20rejected')[_0x3df72d(0x233)](_0xce57b1=>{telegramError(_0xce57b1);});}),tgBot['removeListener'](_0x4a151f(0x1d4));}));}async function confirmRestore(_0x5cc84d,_0x500520){const _0x5897ea=_0x253410;tgBot&&settings[_0x5897ea(0x183)]&&(tgBot[_0x5897ea(0x25a)]('callback_query'),await tgBot[_0x5897ea(0x22c)](settings['telegramChatId'],_0x5897ea(0x222),{'parse_mode':_0x5897ea(0x20c),'reply_markup':{'inline_keyboard':[[{'text':_0x5897ea(0x293),'callback_data':_0x5897ea(0x293)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1453b2=>{telegramError(_0x1453b2);}),tgBot['on'](_0x5897ea(0x1d4),async _0x89d1fe=>{const _0xddee54=_0x5897ea,_0x4758cc=_0x89d1fe[_0xddee54(0x1e9)],_0x336432=_0x89d1fe[_0xddee54(0x1c4)];tgBot['answerCallbackQuery'](_0x89d1fe['id'])['then'](async()=>{const _0x24172c=_0xddee54;_0x4758cc==_0x24172c(0x293)?(await tgBot['sendMessage'](_0x336432[_0x24172c(0x1db)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x24172c(0x20c)})[_0x24172c(0x233)](_0xc40f7d=>{telegramError(_0xc40f7d);}),unzipFile(_0x5cc84d,_0x500520)):await tgBot[_0x24172c(0x22c)](_0x336432[_0x24172c(0x1db)]['id'],_0x24172c(0x1d3))[_0x24172c(0x233)](_0x382dcd=>{telegramError(_0x382dcd);});}),tgBot[_0xddee54(0x25a)](_0xddee54(0x1d4));}));}function getServerTime(){const _0xe3e86f=_0x253410,_0x4fbbd2=new Date();return _0x4fbbd2[_0xe3e86f(0x1f7)]()+'/'+(_0x4fbbd2['getMonth']()+0x1)['toString']()[_0xe3e86f(0x27a)](0x2,'0')+'/'+_0x4fbbd2[_0xe3e86f(0x211)]()[_0xe3e86f(0x220)]()[_0xe3e86f(0x27a)](0x2,'0')+'\x20'+_0x4fbbd2[_0xe3e86f(0x187)]()['toString']()[_0xe3e86f(0x27a)](0x2,'0')+':'+_0x4fbbd2['getMinutes']()[_0xe3e86f(0x220)]()['padStart'](0x2,'0')+':'+_0x4fbbd2['getSeconds']()['toString']()[_0xe3e86f(0x27a)](0x2,'0');}function getTimeStamp(){const _0x310607=_0x253410,_0xa05dbe=shiftedTime();return _0xa05dbe[_0x310607(0x1f7)]()+'/'+(_0xa05dbe[_0x310607(0x226)]()+0x1)[_0x310607(0x220)]()[_0x310607(0x27a)](0x2,'0')+'/'+_0xa05dbe[_0x310607(0x211)]()[_0x310607(0x220)]()[_0x310607(0x27a)](0x2,'0')+'\x20'+_0xa05dbe[_0x310607(0x187)]()[_0x310607(0x220)]()['padStart'](0x2,'0')+':'+_0xa05dbe[_0x310607(0x1a3)]()['toString']()['padStart'](0x2,'0')+':'+_0xa05dbe[_0x310607(0x1b0)]()[_0x310607(0x220)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x53a2ea=_0x253410,_0x4a9168=new Date();let _0x1a20d9=_0x4a9168;if(settings[_0x53a2ea(0x2ac)]&&settings['timeshift']!==0x0)_0x1a20d9=fns[_0x53a2ea(0x28a)](_0x4a9168,{'hours':settings[_0x53a2ea(0x2ac)]});return _0x1a20d9;}function startScheduler(){const _0x498db3=_0x253410,_0x27f2c8=new Date()[_0x498db3(0x2bf)](),_0x3ec40f=shiftedTime()[_0x498db3(0x187)]();_0x3ec40f==0x4&&backupConfigFiles();_0x3ec40f==0x0&&rotateLogFiles();_0x27f2c8%0x6==0x0&&triggerAnalytics();_0x27f2c8%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x45284c=>{const _0xa0aa5d=_0x4267;if(!_0x45284c['isDirectory']())fs[_0xa0aa5d(0x1cc)](configpath+_0x45284c['name'],configbackuppath+_0x45284c[_0xa0aa5d(0x2c1)]);});}function rotateLogFiles(){const _0x305dcf=_0x253410,_0x4895c4=fs[_0x305dcf(0x261)](logspath+_0x305dcf(0x22f)),_0x42a4b0=_0x4895c4[_0x305dcf(0x23c)]/0x400;if(_0x42a4b0>0x32){let _0x3fed13=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x3fed13[_0x305dcf(0x314)]((_0x3d0abd,_0x3e3206)=>_0x3d0abd[_0x305dcf(0x2c1)]<_0x3e3206[_0x305dcf(0x2c1)]?0x1:_0x3e3206[_0x305dcf(0x2c1)]<_0x3d0abd[_0x305dcf(0x2c1)]?-0x1:0x0),_0x3fed13[_0x305dcf(0x1c8)](_0x45c019=>{const _0x2783d4=_0x305dcf;if(_0x45c019[_0x2783d4(0x2c1)]==_0x2783d4(0x2c0))fs[_0x2783d4(0x1cc)](logspath+_0x45c019['name'],logspath+'output-003.log');if(_0x45c019[_0x2783d4(0x2c1)]==_0x2783d4(0x2bb))fs[_0x2783d4(0x1cc)](logspath+_0x45c019[_0x2783d4(0x2c1)],logspath+_0x2783d4(0x2c0));_0x45c019[_0x2783d4(0x2c1)]==_0x2783d4(0x22f)&&(fs[_0x2783d4(0x1cc)](logspath+_0x45c019[_0x2783d4(0x2c1)],logspath+_0x2783d4(0x2bb)),fs[_0x2783d4(0x274)](logspath+_0x45c019[_0x2783d4(0x2c1)],''));});}}async function zipFiles(_0x5dfc72){const _0x14959b=_0x253410;let _0x103e7a;if(_0x5dfc72==_0x14959b(0x1fa))_0x103e7a=logspath;if(_0x5dfc72==_0x14959b(0x1be))_0x103e7a=configpath;let _0x5b7bb5=fs[_0x14959b(0x272)](_0x103e7a,{'withFileTypes':!![]});const _0x494e90=new require(_0x14959b(0x20b))();_0x5b7bb5[_0x14959b(0x1c8)](_0x47b331=>{const _0x35d104=_0x14959b;if(!_0x47b331[_0x35d104(0x2fc)]()){let _0xb4b5ce=fs[_0x35d104(0x276)](_0x103e7a+_0x47b331[_0x35d104(0x2c1)]);const _0x1075f9=/^bot-[0-9]{3}-config.json$/,_0x42a883=_0x1075f9[_0x35d104(0x2ef)](_0x47b331[_0x35d104(0x2c1)]);if(_0x42a883){const _0x18925b=JSON[_0x35d104(0x25b)](_0xb4b5ce);_0x18925b[_0x35d104(0x2ff)][0x0][_0x35d104(0x2f0)]=_0x35d104(0x29e),_0x18925b[_0x35d104(0x2ff)][0x0][_0x35d104(0x291)]=_0x35d104(0x29e),_0xb4b5ce=JSON[_0x35d104(0x22d)](_0x18925b,null,0x2);}if(_0x47b331[_0x35d104(0x2c1)]=='bb-settings.json'){const _0x19a6ca=JSON['parse'](_0xb4b5ce);if(_0x19a6ca[_0x35d104(0x2de)][_0x35d104(0x300)])_0x19a6ca[_0x35d104(0x2de)][_0x35d104(0x300)]=![];if(_0x19a6ca[_0x35d104(0x2de)][_0x35d104(0x307)])_0x19a6ca[_0x35d104(0x2de)]['bbPassword']=_0x35d104(0x29e);if(_0x19a6ca[_0x35d104(0x2de)][_0x35d104(0x1f0)])_0x19a6ca[_0x35d104(0x2de)]['telegramToken']='***';if(_0x19a6ca['settings']['telegramChatId'])_0x19a6ca[_0x35d104(0x2de)][_0x35d104(0x183)]=null;_0xb4b5ce=JSON[_0x35d104(0x22d)](_0x19a6ca,null,0x2);}if(_0x47b331['name']!='bb-secure.json')_0x494e90[_0x35d104(0x1e1)](_0x47b331['name'],_0xb4b5ce);}});const _0x3bb4f7=_0x494e90['generate']({'base64':![],'compression':_0x14959b(0x302)});fs[_0x14959b(0x274)](zippath+(_0x5dfc72+_0x14959b(0x20d)),_0x3bb4f7,'binary');}async function unzipFile(_0x3bd14e,_0x4df91a){const _0x2fe164=_0x253410;await backupConfigFiles(),fs[_0x2fe164(0x272)](configpath,{'withFileTypes':!![]})[_0x2fe164(0x1c8)](_0x4cf19d=>{const _0xcc9c3e=_0x2fe164;if(!_0x4cf19d[_0xcc9c3e(0x2fc)]())fs[_0xcc9c3e(0x20a)](configpath+_0x4cf19d[_0xcc9c3e(0x2c1)]);});const _0x233a26=fs[_0x2fe164(0x276)](_0x3bd14e+_0x4df91a,_0x2fe164(0x31c)),_0x3d6b1c=new require(_0x2fe164(0x20b))(_0x233a26,{'base64':![],'checkCRC32':!![]});Object[_0x2fe164(0x2f4)](_0x3d6b1c[_0x2fe164(0x278)])[_0x2fe164(0x1c8)](_0x4cdf41=>{const _0x533ba6=_0x2fe164,_0x2ed8fb=_0x3d6b1c[_0x533ba6(0x278)][_0x4cdf41];fs[_0x533ba6(0x274)](configpath+_0x2ed8fb[_0x533ba6(0x2c1)],_0x2ed8fb[_0x533ba6(0x277)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x2fe164(0x1c8)](_0x402af8=>{const _0x2c474d=_0x2fe164;if(!_0x402af8[_0x2c474d(0x2fc)]())fs[_0x2c474d(0x20a)](temppath+_0x402af8['name']);}),process[_0x2fe164(0x318)]({'restore':!![]},_0x16fb9b=>{});}async function getPublicIp(){const _0xb660=_0x253410;try{const _0xd64111=await axios[_0xb660(0x1ca)]('https://api.ipify.org?format=json');publicip=_0xd64111[_0xb660(0x1e9)]['ip'];}catch(_0x3f7ab5){}}async function triggerAnalytics(){const _0x46a051=_0x253410;if(!publicip)await getPublicIp();const _0x36725f=getBotsWithMode();let _0x44d162=0x0;_0x36725f[_0x46a051(0x1c8)](_0xac425b=>{const _0x47afcc=_0x46a051;if(_0xac425b[_0x47afcc(0x1e2)]==='enabled')_0x44d162++;}),mixpanel[_0x46a051(0x2eb)]('Server',{'distinct_id':settings[_0x46a051(0x310)],'ip':publicip,'version':serverversion,'numbots':_0x36725f['length'],'numbotsenabled':_0x44d162});}async function getMessages(){const _0x2524e5=_0x253410,_0x3bb81d=_0x2524e5(0x285),_0x10721e=new GraphQLClient(_0x3bb81d),_0xb7cf2c={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x36fd5e=serverversion[_0x2524e5(0x26c)]('.'),_0x1fcd6f=_0x36fd5e[0x0]+'.'+_0x36fd5e[0x1],_0x38ca4c=Math[_0x2524e5(0x2b6)](settings[_0x2524e5(0x2c3)],settings['lastmsgemitted']),_0x3ce512={'last':parseInt(_0x38ca4c),'bbm':_0x1fcd6f},_0x2382b1=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1f36a1;try{_0x1f36a1=await _0x10721e[_0x2524e5(0x313)](_0x2382b1,_0x3ce512,_0xb7cf2c);}catch(_0x5825f6){}if(_0x1f36a1&&_0x1f36a1[_0x2524e5(0x28f)]){let _0x14447b=settings[_0x2524e5(0x2c3)];newMessages=[];for(const _0x2fc486 of _0x1f36a1[_0x2524e5(0x28f)]){newMessages[_0x2524e5(0x269)](_0x2fc486);if(_0x2fc486['bbvNew'])updateSetting('latestversion',_0x2fc486[_0x2524e5(0x2a8)]);let _0x2737a8=_0x2fc486[_0x2524e5(0x2a8)]?serverversion>=_0x2fc486[_0x2524e5(0x2a8)]:![];if(!_0x2737a8&&_0x2fc486[_0x2524e5(0x2d3)]>_0x14447b){if(_0x2fc486[_0x2524e5(0x2aa)]===_0x2524e5(0x2d2)||serverversion[_0x2524e5(0x229)](_0x2fc486['bbvReceive'])){let _0x44337e=''+_0x2fc486[_0x2524e5(0x2f6)]+'\x0a\x0a'+_0x2fc486[_0x2524e5(0x1c4)];const _0x2d7ebd=await sendTelegramMsg(toTelegramMarkdown(_0x44337e),_0x2524e5(0x1c9));if(_0x2d7ebd)_0x14447b=_0x2fc486[_0x2524e5(0x2d3)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x2524e5(0x2c3),_0x14447b),emitMessages();}}function emitMessages(){const _0x1ca927=_0x253410,_0xbee01b=settings[_0x1ca927(0x1d5)];let _0x86f772=[];newMessages[_0x1ca927(0x1c8)](_0x5b2f7f=>{const _0x21dc73=_0x1ca927;_0x5b2f7f['number']>_0xbee01b&&_0x86f772[_0x21dc73(0x269)](_0x5b2f7f);}),_0x86f772[_0x1ca927(0x1c7)]>0x0&&getAllClients()[_0x1ca927(0x1c8)](_0x53e0e2=>{const _0x8cab0e=_0x1ca927;getSocket(_0x53e0e2['id'])[_0x8cab0e(0x1e7)](_0x8cab0e(0x1c4),_0x86f772);});}function confirmMessage(_0x44198c){const _0x1d64b2=_0x253410;updateSetting(_0x1d64b2(0x1d5),Number(_0x44198c));}function isNewerVersion(_0x5a50e7,_0x1f0181){const _0x1c0e99=_0x253410,_0x48244b=_0x1f0181[_0x1c0e99(0x26c)]('.'),_0x3f9e02=_0x5a50e7[_0x1c0e99(0x26c)]('.');for(var _0x244d57=0x0;_0x244d57<_0x3f9e02[_0x1c0e99(0x1c7)];_0x244d57++){const _0x55b84b=~~_0x3f9e02[_0x244d57],_0x40e303=~~_0x48244b[_0x244d57];if(_0x55b84b>_0x40e303)return!![];if(_0x55b84b<_0x40e303)return![];}return![];}function toTelegramMarkdown(_0x5c644e){const _0x419d8e=_0x253410,_0x301df4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2ae461=/\*{2}(.+?)\*{2}/gim;return _0x5c644e=_0x5c644e[_0x419d8e(0x309)](_0x301df4,'$1_$2_$3')[_0x419d8e(0x309)](_0x2ae461,_0x419d8e(0x1ad)),_0x5c644e;}async function validateConfigFile(){const _0x9ad0b2=_0x253410,_0x4671c5=dbConfig[_0x9ad0b2(0x1ca)](_0x9ad0b2(0x316))[_0x9ad0b2(0x2c4)](_0x9ad0b2(0x1fb))[_0x9ad0b2(0x29a)]()||[];if(_0x4671c5[_0x9ad0b2(0x1c7)]==0x0){let _0x2cdbe5=0x0,_0x56602c=[];const _0x1ab059=/^bot-([0-9]{3})-config.json$/,_0x49f9d8=fs[_0x9ad0b2(0x272)](configpath);_0x49f9d8[_0x9ad0b2(0x1c8)](_0x35f490=>{const _0x383b74=_0x9ad0b2,_0x6f1538=_0x1ab059[_0x383b74(0x21d)](_0x35f490);if(_0x6f1538){const _0x374b86=_0x6f1538[0x1];let _0xa16b87=getBotAttributes(_0x374b86);_0x56602c[_0x383b74(0x269)]({'botID':_0x374b86,'botname':_0xa16b87[_0x383b74(0x30d)],'status':_0x383b74(0x2b0),'live':_0x383b74(0x1e0)}),_0x2cdbe5++;}}),_0x2cdbe5!=0x0&&(dbConfig[_0x9ad0b2(0x1ca)](_0x9ad0b2(0x316))[_0x9ad0b2(0x279)](_0x56602c)['write'](),config=_0x56602c,restoredConfigFile=_0x2cdbe5);}}async function restoreConfigNotify(_0x1fc1cf){const _0x358f64=_0x253410;let _0x4d66bc;if(restoredConfigFile==0x1)_0x4d66bc='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x4d66bc=_0x358f64(0x2dd);if(_0x1fc1cf)io['to'](_0x358f64(0x315))[_0x358f64(0x1e7)](_0x358f64(0x238),_0x4d66bc);else{logger[_0x358f64(0x26e)](_0x358f64(0x270)),logger[_0x358f64(0x26e)](_0x4d66bc),logger[_0x358f64(0x26e)](_0x358f64(0x270)),logger['simple']('');if(tgBot&&settings[_0x358f64(0x183)]&&settings[_0x358f64(0x2b4)]!='orders')tgBot[_0x358f64(0x22c)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x4d66bc)['catch'](_0x51146d=>{telegramError(_0x51146d);});}}function validateCredentials(_0x354885,_0x4e3d02){const _0x2166e2=_0x253410;if(_0x354885['username']==settings[_0x2166e2(0x208)]&&bcrypt['compareSync'](_0x354885['password'],settings['bbPassword'])){if(settings[_0x2166e2(0x2f9)])return{'allow':![],'reason':_0x2166e2(0x1d8),'token':null};else{const _0x3ef485=generateLoginToken(_0x4e3d02);return{'allow':!![],'reason':_0x2166e2(0x1fd),'token':_0x3ef485};}}else return{'allow':![],'reason':_0x2166e2(0x2b5),'token':null};}function refreshToken(_0x5a04e4){const _0x8f6e5f=_0x253410,_0x21a12c=generateLoginToken(_0x5a04e4);return{'allow':!![],'reason':_0x8f6e5f(0x1fd),'token':_0x21a12c};}function validateAccess(_0x26c78a,_0x1cc482,_0x4b3a28){const _0x7d24a3=_0x253410,_0x530fd9=_0x4b3a28?_0x4b3a28:devices[_0x1cc482]['ip'];let _0x1a8e78;const _0x5df60c=_0x923a22=>{const _0x539d69=_0x4267;if(settings[_0x539d69(0x300)]){if(settings[_0x539d69(0x2f9)]){if(telegram2FaApproved(_0x1cc482)){const _0x3274c1=generateLoginToken(_0x1cc482);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3274c1};}else return{'allow':![],'reason':_0x539d69(0x1bb),'token':null};}else return _0x1a8e78=validToken(_0x923a22,_0x1cc482),_0x1a8e78['hasOwnProperty'](_0x539d69(0x1d1))?{'allow':!![],'reason':_0x539d69(0x250),'token':_0x923a22}:{'allow':![],'reason':_0x539d69(0x1bb),'token':null};}else return{'allow':!![],'reason':_0x539d69(0x1d6),'token':null};};if(settings['whitelistEnabled']){let _0x1c3a8e=[...settings[_0x7d24a3(0x189)],_0x7d24a3(0x31e),_0x7d24a3(0x1a4),_0x7d24a3(0x2d0)];if(_0x1c3a8e[_0x7d24a3(0x2ee)](_0x530fd9))return _0x5df60c(_0x26c78a);else{_0x1a8e78=validToken(_0x26c78a,_0x1cc482);if(_0x1a8e78[_0x7d24a3(0x299)](_0x7d24a3(0x1d1)))return _0x5df60c(_0x26c78a);else{if(telegramIpApproved(_0x1cc482)){const _0x25e513=generateToken(_0x1cc482);return _0x1a8e78=_0x5df60c(_0x26c78a),_0x1a8e78[_0x7d24a3(0x2fd)]?{'allow':!![],'reason':_0x7d24a3(0x290),'token':_0x25e513}:_0x1a8e78;}else return settings[_0x7d24a3(0x251)]?{'allow':![],'reason':_0x7d24a3(0x2bd),'token':null}:{'allow':![],'reason':_0x7d24a3(0x253),'token':null};}}}else return _0x5df60c(_0x26c78a);}function timelyDecrypt(_0x796f4,_0x45e348=!![]){const _0x173ef5=_0x253410;if(_0x796f4)try{const _0x5982ec=crypt['decrypt'](secure[_0x173ef5(0x27e)],_0x796f4)['message'],_0x58d031=_0x5982ec[_0x173ef5(0x26c)]('@')[0x0],_0x174d2e=_0x5982ec['split']('@')[0x1],_0x14ef37=new Date()['getTime']();if(_0x45e348){if(_0x14ef37-_0x174d2e<maxSecretAge*0x3e8)return _0x58d031;else return![];}else return _0x58d031;}catch(_0x5d0d5f){return![];}else return![];}const validToken=(_0x51f2ff,_0x32c1ec)=>{const _0x22ffdd=_0x253410,_0x22bdd9=devices[_0x32c1ec]['ip'];if(!_0x51f2ff)return{'error':'No\x20authentication\x20token'};for(let _0x25e471 of blacklist){if(_0x25e471[_0x22ffdd(0x17c)]==_0x51f2ff)return{'error':_0x22ffdd(0x26b)};}let _0x3863df;try{_0x3863df=jwt['verify'](_0x51f2ff,secure[_0x22ffdd(0x18c)]+_0x32c1ec);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3863df[_0x22ffdd(0x299)](_0x22ffdd(0x17e))&&!_0x3863df['hasOwnProperty']('username')||!_0x3863df[_0x22ffdd(0x299)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3863df[_0x22ffdd(0x299)](_0x22ffdd(0x216))&&_0x3863df[_0x22ffdd(0x299)](_0x22ffdd(0x17e))){const {clientip:_0x544a94}=_0x3863df;return _0x22bdd9==_0x544a94?{'success':_0x22ffdd(0x1b2)}:{'error':_0x22ffdd(0x319)};}else{if(_0x3863df[_0x22ffdd(0x299)](_0x22ffdd(0x216))&&_0x3863df[_0x22ffdd(0x299)]('clientip')){const {username:_0x3c9538,clientip:_0xae1602}=_0x3863df;return settings[_0x22ffdd(0x208)]==_0x3c9538&&_0x22bdd9==_0xae1602?{'success':_0x22ffdd(0x1b2)}:{'error':_0x22ffdd(0x31f)};}}},generateLoginToken=_0x5c467b=>{const _0x3e0419=_0x253410;if(_0x5c467b){const _0x3e1336=devices[_0x5c467b]['ip'];return jwt[_0x3e0419(0x2d7)]({'username':settings[_0x3e0419(0x208)],'clientip':_0x3e1336},secure[_0x3e0419(0x18c)]+_0x5c467b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1bd054=>{const _0x4bf272=_0x253410;if(_0x1bd054){const _0x234413=devices[_0x1bd054]['ip'];return jwt[_0x4bf272(0x2d7)]({'clientip':_0x234413},secure['secret']+_0x1bd054,{'expiresIn':devices[_0x1bd054]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x3abd08=>{const _0x1a821c=_0x253410;let _0x270763=![];return devices[_0x3abd08][_0x1a821c(0x197)]&&devices[_0x3abd08][_0x1a821c(0x197)][_0x1a821c(0x2a7)]!=_0x1a821c(0x223)&&(_0x270763=devices[_0x3abd08][_0x1a821c(0x197)][_0x1a821c(0x17e)]==devices[_0x3abd08]['ip']&&new Date()[_0x1a821c(0x30c)]()-devices[_0x3abd08]['telegramIpApproval'][_0x1a821c(0x181)]<devices[_0x3abd08]['telegramIpApproval'][_0x1a821c(0x2a7)]*0x3c*0x3e8),_0x270763;},telegram2FaApproved=_0x2d0cc9=>{const _0x451d17=_0x253410;let _0x2aa52d=![];return devices[_0x2d0cc9][_0x451d17(0x210)]&&devices[_0x2d0cc9][_0x451d17(0x210)]['expiry']!=_0x451d17(0x223)&&(_0x2aa52d=devices[_0x2d0cc9][_0x451d17(0x210)][_0x451d17(0x17e)]==devices[_0x2d0cc9]['ip']&&new Date()[_0x451d17(0x30c)]()-devices[_0x2d0cc9][_0x451d17(0x210)][_0x451d17(0x181)]<devices[_0x2d0cc9][_0x451d17(0x210)]['expiry']*0x3c*0x3e8),_0x2aa52d;},normalizeIP=_0xa1675b=>{const _0x1bbdfa=_0x253410;let _0x16f4bd=null,_0x591228=null;if(ipaddr[_0x1bbdfa(0x321)](_0xa1675b)){const _0x329f41=ipaddr[_0x1bbdfa(0x25b)](_0xa1675b);_0x329f41[_0x1bbdfa(0x2a6)]()===_0x1bbdfa(0x1f5)?(_0x329f41[_0x1bbdfa(0x19f)]()&&(_0x16f4bd=_0x329f41[_0x1bbdfa(0x30f)]()[_0x1bbdfa(0x220)]()),_0x591228=_0x329f41[_0x1bbdfa(0x220)]()):(_0x16f4bd=_0x329f41['toString'](),_0x591228=_0x329f41['toIPv4MappedAddress']()[_0x1bbdfa(0x220)]());}return{'show':_0x16f4bd?_0x16f4bd:_0x591228,'store':_0x591228};};function sleep(_0x3e1ec9){return new Promise(_0x3e9b06=>setTimeout(_0x3e9b06,_0x3e1ec9));}