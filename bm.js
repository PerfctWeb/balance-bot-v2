function _0x90ef(_0x24b752,_0x5781c8){const _0x57b7cb=_0x6fcd();return _0x90ef=function(_0xddc288,_0x3518b3){_0xddc288=_0xddc288-0x161;let _0x6fcdaa=_0x57b7cb[_0xddc288];return _0x6fcdaa;},_0x90ef(_0x24b752,_0x5781c8);}const _0x51b135=_0x90ef;(function(_0x31b78f,_0x2203d2){const _0x3bd99e=_0x90ef,_0x232b1a=_0x31b78f();while(!![]){try{const _0x242cc3=parseInt(_0x3bd99e(0x1ec))/0x1+parseInt(_0x3bd99e(0x1ff))/0x2+-parseInt(_0x3bd99e(0x1df))/0x3*(-parseInt(_0x3bd99e(0x27b))/0x4)+parseInt(_0x3bd99e(0x295))/0x5*(parseInt(_0x3bd99e(0x247))/0x6)+-parseInt(_0x3bd99e(0x2a7))/0x7*(-parseInt(_0x3bd99e(0x183))/0x8)+-parseInt(_0x3bd99e(0x261))/0x9*(parseInt(_0x3bd99e(0x212))/0xa)+-parseInt(_0x3bd99e(0x1c5))/0xb;if(_0x242cc3===_0x2203d2)break;else _0x232b1a['push'](_0x232b1a['shift']());}catch(_0xd3df0c){_0x232b1a['push'](_0x232b1a['shift']());}}}(_0x6fcd,0x629e4));const _0x3518b3=function(){let _0x42d44f=!![];return function(_0x3dff32,_0x53e771){const _0x125285=_0x42d44f?function(){if(_0x53e771){const _0x333f42=_0x53e771['apply'](_0x3dff32,arguments);return _0x53e771=null,_0x333f42;}}:function(){};return _0x42d44f=![],_0x125285;};}(),_0xddc288=_0x3518b3(this,function(){const _0x71d5e9=_0x90ef;return _0xddc288[_0x71d5e9(0x214)]()[_0x71d5e9(0x29a)]('(((.+)+)+)+$')['toString']()[_0x71d5e9(0x1e7)](_0xddc288)[_0x71d5e9(0x29a)](_0x71d5e9(0x1ba));});_0xddc288();'use strict';process[_0x51b135(0x2a5)][_0x51b135(0x1ee)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x51b135(0x1ad)),fs=require('fs'),fns=require(_0x51b135(0x2a8)),low=require(_0x51b135(0x290)),path=require(_0x51b135(0x224)),crypto=require(_0x51b135(0x1d7)),Crypt=require(_0x51b135(0x2a2))[_0x51b135(0x1d8)],RSA=require(_0x51b135(0x2a2))['RSA'],bcrypt=require(_0x51b135(0x166)),jwt=require(_0x51b135(0x1ef)),analyticsLib=require(_0x51b135(0x213))[_0x51b135(0x187)],googleAnalytics=require(_0x51b135(0x1d0))[_0x51b135(0x187)],ipaddr=require(_0x51b135(0x198)),argv=require(_0x51b135(0x1a2))(process[_0x51b135(0x280)][_0x51b135(0x248)](0x2))['argv'],PORT=argv['port']||_0x51b135(0x17a),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x51b135(0x23e)](PORT))return console['log'](_0x51b135(0x176)+PORT+_0x51b135(0x2ad)),process[_0x51b135(0x29c)](0x1);const HOST=argv[_0x51b135(0x19e)]||null,userID=argv[_0x51b135(0x1ac)]||'';let bbpath=_0x51b135(0x1bf),bbpath2='';const botfile=_0x51b135(0x164),configfile=_0x51b135(0x1b9),settingsfile='bb-settings.json',securefile=_0x51b135(0x1b7);let validInstallation=!![];!fs[_0x51b135(0x24a)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x51b135(0x1b8)),configpath=userID?bbpath+_0x51b135(0x19f)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs[_0x51b135(0x24a)](configpath)&&fs[_0x51b135(0x231)](configpath);!fs[_0x51b135(0x24a)](configbackuppath)&&fs[_0x51b135(0x231)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x51b135(0x18f)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x51b135(0x18f)]({'secure':{},'blacklist':[]})[_0x51b135(0x1e9)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x51b135(0x18b)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x51b135(0x229))[_0x51b135(0x185)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x51b135(0x1e3)),app=express(),http=require(_0x51b135(0x1c0))[_0x51b135(0x1a4)](app);app[_0x51b135(0x282)](express[_0x51b135(0x243)](path[_0x51b135(0x181)](__dirname,bbpath2,'build2'))),app[_0x51b135(0x282)](express[_0x51b135(0x243)](path[_0x51b135(0x181)](__dirname,bbpath2,'build'))),app[_0x51b135(0x1ce)]('/',function(_0x45db61,_0x938150){const _0x177910=_0x51b135;_0x938150[_0x177910(0x174)](path[_0x177910(0x181)](__dirname,bbpath2,_0x177910(0x21f),_0x177910(0x27a)));}),app[_0x51b135(0x1ce)](_0x51b135(0x19c),function(_0x57a3ff,_0x4b8bad){const _0x84598d=_0x51b135;_0x4b8bad[_0x84598d(0x174)](path[_0x84598d(0x181)](__dirname,bbpath2,_0x84598d(0x1b0),'index.html'));}),app[_0x51b135(0x1ce)]('/:bot/portfolio',(_0x165560,_0x44d222)=>{const _0x2fe427=_0x51b135;_0x44d222[_0x2fe427(0x174)](path['join'](__dirname,bbpath2,_0x2fe427(0x1b0),_0x2fe427(0x27a)));}),app[_0x51b135(0x1ce)](_0x51b135(0x246),(_0x341fa6,_0x43425c)=>{const _0x2a43bb=_0x51b135;_0x43425c[_0x2a43bb(0x174)](path[_0x2a43bb(0x181)](__dirname,bbpath2,_0x2a43bb(0x1b0),_0x2a43bb(0x27a)));}),app['get'](_0x51b135(0x207),(_0x4d0a5f,_0x258da8)=>{const _0x493d39=_0x51b135;_0x258da8[_0x493d39(0x174)](path[_0x493d39(0x181)](__dirname,bbpath2,_0x493d39(0x1b0),'index.html'));}),app[_0x51b135(0x1ce)]('/:bot/history',(_0x2e4fce,_0x125ca1)=>{const _0x4a0642=_0x51b135;_0x125ca1[_0x4a0642(0x174)](path[_0x4a0642(0x181)](__dirname,bbpath2,_0x4a0642(0x1b0),_0x4a0642(0x27a)));}),app[_0x51b135(0x1ce)]('/:bot/configuration',(_0x6b294d,_0x57e90d)=>{const _0x2c295e=_0x51b135;_0x57e90d['sendFile'](path['join'](__dirname,bbpath2,_0x2c295e(0x1b0),_0x2c295e(0x27a)));}),app[_0x51b135(0x1ce)](_0x51b135(0x276),(_0x3e49bd,_0x520dba)=>{const _0x2e4e2c=_0x51b135;_0x520dba[_0x2e4e2c(0x174)](path[_0x2e4e2c(0x181)](__dirname,bbpath2,_0x2e4e2c(0x1b0),_0x2e4e2c(0x27a)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x51b135(0x20f))(http,{}),analytics=analyticsLib({'app':_0x51b135(0x265),'plugins':[googleAnalytics({'trackingId':_0x51b135(0x23d)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x51b135(0x2ac)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x51b135(0x1eb)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x545b27=_0x51b135;console[_0x545b27(0x217)](''),console[_0x545b27(0x217)](_0x545b27(0x296)),logging(_0x545b27(0x284)+PORT),console[_0x545b27(0x217)](_0x545b27(0x296));if(config[_0x545b27(0x263)]!=0x0)config[_0x545b27(0x26a)](_0x4ccfb1=>{const _0x439b7c=_0x545b27;if(_0x4ccfb1[_0x439b7c(0x237)]==_0x439b7c(0x245)||_0x4ccfb1[_0x439b7c(0x237)]==_0x439b7c(0x178))logging(_0x439b7c(0x1dd)+_0x4ccfb1['botID']+_0x439b7c(0x1db)+_0x4ccfb1[_0x439b7c(0x1ea)]),startBot([_0x4ccfb1['botID'],userID],{'cwd':bbpath},function(_0x560f28){if(_0x560f28)logging(_0x560f28);});else(_0x4ccfb1[_0x439b7c(0x237)]==_0x439b7c(0x24e)||_0x4ccfb1[_0x439b7c(0x237)]=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x4ccfb1[_0x439b7c(0x1a9)]+'\x20|\x20'+_0x4ccfb1[_0x439b7c(0x1ea)]);});else!newBot&&console[_0x545b27(0x217)](_0x545b27(0x1f8));if(newBot)addBot();console[_0x545b27(0x217)]('-----------------------------------------------------------------------------------'),console[_0x545b27(0x217)]('');}function startSocket(){const _0x27cafd=_0x51b135;io['on'](_0x27cafd(0x19a),_0x9bbcbd=>{const _0x2bdf0a=_0x27cafd;let _0x5adac7,_0xa284b4,_0x2ea11b,_0x5ee559,_0x379050;const _0x2a9e59=_0x9bbcbd[_0x2bdf0a(0x163)][_0x2bdf0a(0x2a3)]['referer'];_0xa284b4=_0x2a9e59[_0x2bdf0a(0x195)](/bot[0-9]{3}/);if(_0xa284b4)_0x2ea11b=_0xa284b4[0x0]['match'](/[0-9]{3}/);if(_0x2ea11b)_0x5adac7=_0x2ea11b[0x0];else _0x5adac7='botmanager';const _0x4d6a8a=_0x9bbcbd[_0x2bdf0a(0x163)][_0x2bdf0a(0x165)][_0x2bdf0a(0x278)];if(!_0x4d6a8a)_0x9bbcbd['emit'](_0x2bdf0a(0x237),{'publicKey':secure[_0x2bdf0a(0x21d)]});else{_0x5ee559=timelyDecrypt(_0x4d6a8a,![]);if(!_0x5ee559)_0x9bbcbd[_0x2bdf0a(0x241)](_0x2bdf0a(0x237),{'publicKey':secure[_0x2bdf0a(0x21d)]});else{_0x379050=normalizeIP(_0x9bbcbd[_0x2bdf0a(0x264)][_0x2bdf0a(0x202)])[_0x2bdf0a(0x1cd)];if(!devices[_0x5ee559])devices[_0x5ee559]={'uuid':_0x5ee559,'access':{'token':null}};devices[_0x5ee559]['ip']=_0x379050;const _0x2dccd8=addClient(_0x9bbcbd['id'],_0x5ee559,_0x5adac7);setAccess(_0x2dccd8),_0x9bbcbd['on'](_0x2bdf0a(0x1a1),_0xfb67fd=>{const _0x491f19=_0x2bdf0a,_0x3ce515=timelyDecrypt(_0xfb67fd[_0x491f19(0x244)]);if(_0x3ce515){_0xfb67fd={'username':_0xfb67fd['username'],'password':_0x3ce515},devices[_0x5ee559]['access']=validateCredentials(_0xfb67fd,_0x5ee559);if(devices[_0x5ee559][_0x491f19(0x1e5)][_0x491f19(0x225)]==![]&&devices[_0x5ee559][_0x491f19(0x1e5)][_0x491f19(0x26c)]==_0x491f19(0x2ab))_0x9bbcbd[_0x491f19(0x241)](_0x491f19(0x237),{'access':devices[_0x5ee559]['access']}),loginAccess2FA(_0x5ee559,_0x379050);else{if(devices[_0x5ee559]['access'][_0x491f19(0x225)]==![]&&devices[_0x5ee559]['access'][_0x491f19(0x26c)]==_0x491f19(0x1d1))_0x9bbcbd['emit'](_0x491f19(0x237),{'access':devices[_0x5ee559][_0x491f19(0x1e5)]});else devices[_0x5ee559][_0x491f19(0x1e5)][_0x491f19(0x225)]&&devices[_0x5ee559][_0x491f19(0x1e5)][_0x491f19(0x26c)]==_0x491f19(0x222)&&(getClientsWithUuid(_0x5ee559)['forEach'](_0x3c82a6=>{setAccess(_0x3c82a6);}),setTokenRefresh(_0x5ee559),setSessionTimeout(_0x491f19(0x1a1),_0x5ee559));}}else logging(_0x491f19(0x2a4));}),_0x9bbcbd['on'](_0x2bdf0a(0x271),()=>{resetPassword();}),_0x9bbcbd['on'](_0x2bdf0a(0x29d),_0x33a5bd=>{removeClient(_0x9bbcbd['id']);});}}});}function initClient(_0x29424d){const _0x48cf07=_0x51b135;if(_0x29424d!=_0x48cf07(0x17c)&&config[_0x48cf07(0x2ae)]!=''){if(pid[_0x29424d])pid[_0x29424d]['send']({'function':'initclient','args':null});}}function getSocket(_0x47303f){const _0x57bb2b=_0x51b135;return io[_0x57bb2b(0x1f3)][_0x57bb2b(0x1f3)][_0x57bb2b(0x1ce)](_0x47303f);}function setAccess(_0x44a935){const _0x48d303=_0x51b135,_0x51d34e=getSocket(_0x44a935['id']),_0x2a9147=_0x44a935[_0x48d303(0x226)],_0x5ee9a9=_0x44a935[_0x48d303(0x193)];devices[_0x2a9147][_0x48d303(0x1e5)]=validateAccess(devices[_0x2a9147][_0x48d303(0x1e5)][_0x48d303(0x1a8)],_0x2a9147),_0x51d34e[_0x48d303(0x181)](_0x2a9147);if(devices[_0x2a9147][_0x48d303(0x1e5)][_0x48d303(0x225)]){_0x51d34e[_0x48d303(0x181)](_0x5ee9a9);if(_0x5ee9a9==_0x48d303(0x17c))initializeSocketBotManager(_0x51d34e);else initializeSocketBot(_0x51d34e);initClient(_0x5ee9a9);}devices[_0x2a9147][_0x48d303(0x1e5)][_0x48d303(0x1a8)]&&devices[_0x2a9147][_0x48d303(0x1e5)]['reason']==_0x48d303(0x1a3)&&setSessionTimeout(_0x48d303(0x279),_0x2a9147),devices[_0x2a9147][_0x48d303(0x1e5)]['token']&&devices[_0x2a9147][_0x48d303(0x1e5)][_0x48d303(0x26c)]==_0x48d303(0x27e)&&setSessionTimeout(_0x48d303(0x1a1),_0x2a9147),_0x51d34e['emit'](_0x48d303(0x237),{'status':_0x44a935[_0x48d303(0x24f)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2a9147][_0x48d303(0x1e5)],'externalip':devices[_0x2a9147]['ip'],'publicKey':secure[_0x48d303(0x21d)],'validInstallation':validInstallation}),devices[_0x2a9147][_0x48d303(0x1e5)]['allow']==![]&&devices[_0x2a9147]['access'][_0x48d303(0x26c)]==_0x48d303(0x267)&&temporaryAccess2FA(_0x2a9147,devices[_0x2a9147]['ip']);}function setSessionTimeout(_0x516412,_0x5abdcc){const _0xd527d7=_0x51b135;let _0x27e6e0;if(_0x516412==_0xd527d7(0x1a1))_0x27e6e0=loginExpiry*0x3c*0x3e8;else _0x27e6e0=devices[_0x5abdcc][_0xd527d7(0x294)][_0xd527d7(0x22f)]*0x3c*0x3e8-(new Date()[_0xd527d7(0x211)]()-devices[_0x5abdcc][_0xd527d7(0x294)][_0xd527d7(0x2a9)]);if(devices[_0x5abdcc][_0xd527d7(0x1ae)])clearTimeout(devices[_0x5abdcc][_0xd527d7(0x1ae)]);devices[_0x5abdcc]['pidExpireLogin']=setTimeout(()=>{const _0x2defa9=_0xd527d7;if(devices[_0x5abdcc][_0x2defa9(0x221)])clearTimeout(devices[_0x5abdcc]['pidRefreshToken']);removeSocketListeners(_0x5abdcc),addBlacklist(_0x5abdcc),devices[_0x5abdcc][_0x2defa9(0x294)]=null,devices[_0x5abdcc][_0x2defa9(0x299)]=null,devices[_0x5abdcc]['access'][_0x2defa9(0x1a8)]=null,devices[_0x5abdcc][_0x2defa9(0x1e5)]=validateAccess(devices[_0x5abdcc]['access']['token'],_0x5abdcc),!(devices[_0x5abdcc][_0x2defa9(0x1e5)][_0x2defa9(0x225)]&&devices[_0x5abdcc]['access']['reason']==_0x2defa9(0x293))&&(_0x516412==_0x2defa9(0x1a1)?io['to'](_0x5abdcc)[_0x2defa9(0x241)](_0x2defa9(0x237),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x5abdcc)[_0x2defa9(0x241)]('status',{'access':{'allow':![],'reason':_0x2defa9(0x28f),'token':null}})),devices[_0x5abdcc][_0x2defa9(0x1e5)][_0x2defa9(0x1a8)]=null;},_0x27e6e0);}function setTokenRefresh(_0x16a12e){const _0x50e73f=_0x51b135;if(devices[_0x16a12e][_0x50e73f(0x221)])clearTimeout(devices[_0x16a12e][_0x50e73f(0x221)]);devices[_0x16a12e]['pidRefreshToken']=setTimeout(()=>{const _0x24c160=_0x50e73f;getClientsWithUuid(_0x16a12e)[_0x24c160(0x263)]!=0x0?(devices[_0x16a12e]['access']=refreshToken(_0x16a12e),io['to'](_0x16a12e)[_0x24c160(0x241)](_0x24c160(0x237),{'status':_0x24c160(0x1d2),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x16a12e][_0x24c160(0x1e5)],'externalip':devices[_0x16a12e]['ip'],'publicKey':secure[_0x24c160(0x21d)],'validInstallation':validInstallation}),setTokenRefresh(_0x16a12e)):clearTimeout(devices[_0x16a12e][_0x24c160(0x221)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xe76447){const _0xaf3411=_0x51b135,_0x41bb18=getClient(_0xe76447['id'])[_0xaf3411(0x226)];_0xe76447[_0xaf3411(0x241)]('bots',config),_0xe76447[_0xaf3411(0x241)](_0xaf3411(0x184),cleanSettings()),_0xe76447['on'](_0xaf3411(0x191),_0x1625a8=>{const _0x156330=_0xaf3411;if(validateAccess(_0x1625a8,_0x41bb18)[_0x156330(0x225)])addBot();else logging(_0x156330(0x28b));}),_0xe76447['on'](_0xaf3411(0x1c9),(_0x30bc96,_0x2ad176)=>{const _0x46d304=_0xaf3411;if(validateAccess(_0x2ad176,_0x41bb18)['allow'])toggleBot(_0x30bc96[_0x46d304(0x1a9)],_0x30bc96[_0x46d304(0x237)],_0x30bc96[_0x46d304(0x1cc)]);else logging(_0x46d304(0x1fa));}),_0xe76447['on'](_0xaf3411(0x29f),(_0x25fea7,_0xc4891)=>{const _0x4ce3fb=_0xaf3411;if(validateAccess(_0xc4891,_0x41bb18)[_0x4ce3fb(0x225)])deleteBot(_0x25fea7);else logging(_0x4ce3fb(0x1c7));}),_0xe76447['on'](_0xaf3411(0x17f),(_0x49bea5,_0x27909c)=>{const _0x1b6a30=_0xaf3411;if(validateAccess(_0x27909c,_0x41bb18)['allow'])storeSettings(_0x49bea5,!![]);else logging(_0x1b6a30(0x23a));}),_0xe76447['on'](_0xaf3411(0x17b),(_0x1f7e54,_0x17cfdf)=>{const _0x3d54ce=_0xaf3411;if(validateAccess(_0x17cfdf,_0x41bb18)[_0x3d54ce(0x225)])updateBB();else logging(_0x3d54ce(0x23a));}),_0xe76447['on']('logout',_0x29a938=>{const _0x109720=_0xaf3411;if(validateAccess(_0x29a938,_0x41bb18)[_0x109720(0x225)]){if(devices[_0x41bb18]['pidRefreshToken'])clearTimeout(devices[_0x41bb18]['pidRefreshToken']);if(devices[_0x41bb18]['pidExpireLogin'])clearTimeout(devices[_0x41bb18]['pidExpireLogin']);removeSocketListeners(getClient(_0xe76447['id'])[_0x109720(0x226)]),addBlacklist(_0x41bb18),devices[_0x41bb18][_0x109720(0x294)]=null,devices[_0x41bb18][_0x109720(0x299)]=null,devices[_0x41bb18][_0x109720(0x1e5)][_0x109720(0x1a8)]=null,io['to'](getClient(_0xe76447['id'])[_0x109720(0x226)])[_0x109720(0x241)](_0x109720(0x237),{'access':{'allow':![],'reason':_0x109720(0x239),'token':null}});}else logging(_0x109720(0x16e));});}function initializeSocketBot(_0x249e8f){const _0x8a4c03=_0x51b135,_0x53c47f=getClient(_0x249e8f['id'])['bot'],_0x5c6aed=getClient(_0x249e8f['id'])['uuid'];_0x249e8f['on'](_0x8a4c03(0x208),(_0x154fc4,_0xf21bda)=>{const _0x4631bb=_0x8a4c03;if(validateAccess(_0xf21bda,_0x5c6aed)[_0x4631bb(0x225)]){if(pid[_0x53c47f])pid[_0x53c47f][_0x4631bb(0x2a6)]({'function':'emitHistory','args':_0x154fc4});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x249e8f['on'](_0x8a4c03(0x1fb),(_0x570f0a,_0x410ddb)=>{const _0x25da9d=_0x8a4c03;if(validateAccess(_0x410ddb,_0x5c6aed)['allow']){if(pid[_0x53c47f])pid[_0x53c47f][_0x25da9d(0x2a6)]({'function':_0x25da9d(0x242),'args':_0x570f0a});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x249e8f['on'](_0x8a4c03(0x20c),(_0x24db4b,_0x19d46e)=>{const _0x615a4f=_0x8a4c03;if(validateAccess(_0x19d46e,_0x5c6aed)[_0x615a4f(0x225)]){if(pid[_0x53c47f])pid[_0x53c47f][_0x615a4f(0x2a6)]({'function':'getPortfolio','args':_0x24db4b});}else logging(_0x615a4f(0x291));}),_0x249e8f['on'](_0x8a4c03(0x20d),(_0x2d6b0b,_0x177b10)=>{const _0x1301d2=_0x8a4c03;if(validateAccess(_0x177b10,_0x5c6aed)['allow']){if(pid[_0x53c47f])pid[_0x53c47f][_0x1301d2(0x2a6)]({'function':'storeConfiguration','args':_0x2d6b0b});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x249e8f['on']('store-headless',(_0x705a3e,_0x24bfc4)=>{const _0x2ee9d9=_0x8a4c03;if(validateAccess(_0x24bfc4,_0x5c6aed)[_0x2ee9d9(0x225)]){if(pid[_0x53c47f])pid[_0x53c47f][_0x2ee9d9(0x2a6)]({'function':_0x2ee9d9(0x22d),'args':_0x705a3e});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x249e8f['on']('get-starting-balances',_0x5722e5=>{const _0x55a293=_0x8a4c03;if(validateAccess(_0x5722e5,_0x5c6aed)['allow']){if(pid[_0x53c47f])pid[_0x53c47f][_0x55a293(0x2a6)]({'function':'getStartingBalances','args':null});}else logging(_0x55a293(0x281));}),_0x249e8f['on'](_0x8a4c03(0x188),(_0x5a21e0,_0x4f30ca)=>{const _0x51b4c1=_0x8a4c03;if(validateAccess(_0x4f30ca,_0x5c6aed)[_0x51b4c1(0x225)]){if(pid[_0x53c47f])pid[_0x53c47f][_0x51b4c1(0x2a6)]({'function':_0x51b4c1(0x249),'args':_0x5a21e0});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x249e8f['on'](_0x8a4c03(0x1c1),_0x5808f4=>{const _0x122c40=_0x8a4c03;if(validateAccess(_0x5808f4,_0x5c6aed)[_0x122c40(0x225)]){if(pid[_0x53c47f])pid[_0x53c47f][_0x122c40(0x2a6)]({'function':_0x122c40(0x22c),'args':null});}else logging(_0x122c40(0x28c));}),_0x249e8f['on'](_0x8a4c03(0x235),_0x43cd54=>{const _0x25ed47=_0x8a4c03;if(validateAccess(_0x43cd54,_0x5c6aed)[_0x25ed47(0x225)]){if(devices[_0x5c6aed][_0x25ed47(0x221)])clearTimeout(devices[_0x5c6aed][_0x25ed47(0x221)]);if(devices[_0x5c6aed][_0x25ed47(0x1ae)])clearTimeout(devices[_0x5c6aed]['pidExpireLogin']);removeSocketListeners(getClient(_0x249e8f['id'])[_0x25ed47(0x226)]),addBlacklist(_0x5c6aed),devices[_0x5c6aed][_0x25ed47(0x294)]=null,devices[_0x5c6aed][_0x25ed47(0x299)]=null,devices[_0x5c6aed][_0x25ed47(0x1e5)]['token']=null,io['to'](getClient(_0x249e8f['id'])[_0x25ed47(0x226)])[_0x25ed47(0x241)](_0x25ed47(0x237),{'access':{'allow':![],'reason':_0x25ed47(0x239),'token':null}});}else logging(_0x25ed47(0x16e));});}function removeSocketListeners(_0x336c45){getClientsWithUuid(_0x336c45)['forEach'](_0x5fdaa4=>{const _0x3d6855=_0x90ef;getSocket(_0x5fdaa4['id'])[_0x3d6855(0x228)]();});}function cleanSettings(){const _0x3be36f=_0x51b135;let _0x40fec1=settings;return settings[_0x3be36f(0x2ac)]&&settings[_0x3be36f(0x2ac)]!=''&&(_0x40fec1={..._0x40fec1,'telegramToken':_0x3be36f(0x171)}),settings[_0x3be36f(0x220)]&&settings[_0x3be36f(0x220)]!=''&&(_0x40fec1={..._0x40fec1,'bbPassword':'************'}),_0x40fec1;}function updateBB(){const _0x29c372=_0x51b135;installingUpdate=!![],config[_0x29c372(0x26a)](_0x3dea78=>{const _0x2b8df7=_0x29c372;restartBot(_0x3dea78[_0x2b8df7(0x1a9)]);}),process[_0x29c372(0x2a6)]({'update':!![]},_0x5dd06e=>{});}function startBot(_0x6dbf5a,_0x3d06d2,_0x15286f){const _0x2d3fde=_0x51b135;let _0x3b9739=![];const _0x294a03=_0x6dbf5a[0x0];_0x3d06d2={..._0x3d06d2,'stdio':[_0x2d3fde(0x1f2),_0x2d3fde(0x1f2),_0x2d3fde(0x1f2),'ipc']},pid[_0x294a03]=childProcess[_0x2d3fde(0x25f)](botfile,_0x6dbf5a,_0x3d06d2),pid[_0x294a03]['on'](_0x2d3fde(0x1bd),_0x4abf2f=>{const _0x9e76d8=_0x2d3fde;switch(Object[_0x9e76d8(0x17d)](_0x4abf2f)[0x0]){case _0x9e76d8(0x1ea):updateBotName(_0x294a03,_0x4abf2f['botname']);break;case _0x9e76d8(0x237):updateStatus(_0x294a03,_0x4abf2f['status']);break;case _0x9e76d8(0x1cc):updateLive(_0x294a03,_0x4abf2f['live']);break;case'started':updateLive(_0x294a03,_0x4abf2f[_0x9e76d8(0x28e)]),io['to'](_0x294a03)[_0x9e76d8(0x241)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x4abf2f[_0x9e76d8(0x260)]==_0x9e76d8(0x1f1)&&restartBot(_0x294a03);_0x4abf2f[_0x9e76d8(0x260)]==_0x9e76d8(0x1f0)&&toggleBot(_0x294a03,_0x9e76d8(0x24e),_0x9e76d8(0x2af));break;case _0x9e76d8(0x161):sendTelegram(_0x294a03,_0x4abf2f[_0x9e76d8(0x161)]);break;case'function':io['to'](_0x294a03)[_0x9e76d8(0x241)](_0x4abf2f[_0x9e76d8(0x1c4)],_0x4abf2f[_0x9e76d8(0x1be)]);break;}}),pid[_0x294a03]['on'](_0x2d3fde(0x27f),function(_0xc30da9){if(_0x3b9739)return;_0x3b9739=!![],_0x15286f(_0xc30da9);}),pid[_0x294a03]['on'](_0x2d3fde(0x29c),function(_0x56840e){const _0x4a25e5=_0x2d3fde;if(installingUpdate)return;if(_0x3b9739)return;_0x3b9739=!![],_0x15286f(null);const _0x1359cc=dbConfig[_0x4a25e5(0x1ce)]('bots')[_0x4a25e5(0x197)]({'botID':_0x294a03})[_0x4a25e5(0x232)]();_0x1359cc&&(_0x1359cc[_0x4a25e5(0x237)]==_0x4a25e5(0x245)||_0x1359cc['status']==_0x4a25e5(0x178))&&(updateLive(_0x294a03,_0x4a25e5(0x2af)),logging(_0x4a25e5(0x204)+_0x294a03),startBot([_0x294a03,userID],{'cwd':bbpath},function(_0x6fe4ad){if(_0x6fe4ad)logging(_0x6fe4ad);}));});}function stopBot(_0x4359a6){const _0x24c82c=_0x51b135;getClientsWithBotID(_0x4359a6)['forEach'](_0x33f7d4=>{const _0x58a60b=_0x90ef;getSocket(_0x33f7d4['id'])[_0x58a60b(0x29d)](!![]),removeClient(_0x33f7d4['id']);});if(pid[_0x4359a6])pid[_0x4359a6][_0x24c82c(0x1f0)]();}function restartBot(_0x517033){const _0x40ba98=_0x51b135;if(pid[_0x517033])pid[_0x517033][_0x40ba98(0x1f0)]();}function addBot(){const _0xa0eec6=_0x51b135;let _0x378235;for(let _0x444cb8=0x1;_0x444cb8<0x3e9;_0x444cb8++){_0x378235=_0x444cb8[_0xa0eec6(0x214)]()[_0xa0eec6(0x288)](0x3,'0');let _0x175814=config[_0xa0eec6(0x197)](_0x3e41ca=>_0x3e41ca[_0xa0eec6(0x1a9)]==_0x378235);if(!_0x175814)break;}if(_0x378235===_0xa0eec6(0x234)){logging(_0xa0eec6(0x257));return;}logging(_0xa0eec6(0x22a)+_0x378235),dbConfig[_0xa0eec6(0x1ce)]('bots')['push']({'botID':_0x378235,'botname':_0xa0eec6(0x285)+_0x378235,'status':_0xa0eec6(0x178),'live':''})[_0xa0eec6(0x1e9)](),startBot([_0x378235,userID],{'cwd':bbpath},function(_0x277f03){if(_0x277f03)logging(_0x277f03);}),config=getConfiguration(),io['to']('botmanager')[_0xa0eec6(0x241)](_0xa0eec6(0x182),config);}function deleteBot(_0x22a84e){const _0x5b8064=_0x51b135;getClientsWithBotID(_0x22a84e)[_0x5b8064(0x26a)](_0x3e5a63=>{const _0x2a28b0=_0x5b8064;getSocket(_0x3e5a63['id'])[_0x2a28b0(0x29d)](!![]),removeClient(_0x3e5a63['id']);}),dbConfig[_0x5b8064(0x1ce)](_0x5b8064(0x182))[_0x5b8064(0x1ca)]({'botID':_0x22a84e})[_0x5b8064(0x1e9)](),logging(_0x5b8064(0x16f)+_0x22a84e),stopBot(_0x22a84e);try{fs[_0x5b8064(0x2a0)](path[_0x5b8064(0x181)](configpath,_0x5b8064(0x1c6)+_0x22a84e+_0x5b8064(0x170))),fs[_0x5b8064(0x2a0)](path[_0x5b8064(0x181)](configpath,_0x5b8064(0x1c6)+_0x22a84e+_0x5b8064(0x1b5))),fs['unlinkSync'](path[_0x5b8064(0x181)](configpath,_0x5b8064(0x1c6)+_0x22a84e+_0x5b8064(0x252))),fs[_0x5b8064(0x2a0)](path[_0x5b8064(0x181)](configpath,'bot-'+_0x22a84e+_0x5b8064(0x1e1)));}catch(_0x226eb0){if(_0x226eb0)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x226eb0);}config=getConfiguration(),io['to'](_0x5b8064(0x17c))[_0x5b8064(0x241)](_0x5b8064(0x182),config);}function toggleBot(_0x14b84c,_0x15540b,_0x500230){const _0x5995cf=_0x51b135;dbConfig[_0x5995cf(0x1ce)](_0x5995cf(0x182))[_0x5995cf(0x197)]({'botID':_0x14b84c})[_0x5995cf(0x1e2)]({'status':_0x15540b})['assign']({'live':_0x500230})[_0x5995cf(0x1e9)]();if(_0x15540b==_0x5995cf(0x245)||_0x15540b==_0x5995cf(0x178))logging(_0x5995cf(0x190)+_0x14b84c),startBot([_0x14b84c,userID],{'cwd':bbpath},function(_0x387a4b){if(_0x387a4b)logging(_0x387a4b);});else(_0x15540b=='disabled'||_0x15540b==_0x5995cf(0x262))&&(logging(_0x5995cf(0x270)+_0x14b84c),stopBot(_0x14b84c));config=getConfiguration(),io['to']('botmanager')[_0x5995cf(0x241)](_0x5995cf(0x182),config);}function toggleStatus(_0x315428){const _0x4fef59=_0x51b135;let _0x1e71fb=dbConfig[_0x4fef59(0x1ce)]('bots')['find']({'botID':_0x315428})[_0x4fef59(0x232)](),_0x53d023;if(_0x1e71fb[_0x4fef59(0x237)]===_0x4fef59(0x245))_0x53d023=_0x4fef59(0x24e);else{if(_0x1e71fb[_0x4fef59(0x237)]===_0x4fef59(0x178))_0x53d023=_0x4fef59(0x262);else{if(_0x1e71fb[_0x4fef59(0x237)]===_0x4fef59(0x262))_0x53d023=_0x4fef59(0x178);else{if(_0x1e71fb[_0x4fef59(0x237)]===_0x4fef59(0x24e))_0x53d023=_0x4fef59(0x245);}}}return _0x53d023;}function updateStatus(_0x4830e7,_0x3d3a96){const _0x16a963=_0x51b135;dbConfig[_0x16a963(0x1ce)]('bots')[_0x16a963(0x197)]({'botID':_0x4830e7})[_0x16a963(0x1e2)]({'status':_0x3d3a96})[_0x16a963(0x1e9)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x16a963(0x182),config);}function updateLive(_0x4566f6,_0x337116){const _0x4fd64b=_0x51b135;dbConfig[_0x4fd64b(0x1ce)]('bots')['find']({'botID':_0x4566f6})['assign']({'live':_0x337116})[_0x4fd64b(0x1e9)](),config=getConfiguration(),io['to']('botmanager')[_0x4fd64b(0x241)](_0x4fd64b(0x182),config);}function updateBotName(_0x18d50d,_0x2f26c3){const _0x50a1c5=_0x51b135;dbConfig[_0x50a1c5(0x1ce)](_0x50a1c5(0x182))['find']({'botID':_0x18d50d})[_0x50a1c5(0x1e2)]({'botname':_0x2f26c3})[_0x50a1c5(0x1e9)](),config=getConfiguration(),io['to']('botmanager')[_0x50a1c5(0x241)](_0x50a1c5(0x182),config);}function telegramError(_0x44fba0){const _0x2de051=_0x51b135;console[_0x2de051(0x217)](getTimeStamp()+_0x2de051(0x26f));}function validateTelegram(_0x3741e8){const _0x4481be=_0x51b135;if(_0x3741e8[_0x4481be(0x1c8)]['username']!=settings[_0x4481be(0x1eb)]&&'@'+_0x3741e8['from'][_0x4481be(0x1fe)]!=settings[_0x4481be(0x1eb)])return tgBot['sendMessage'](_0x3741e8[_0x4481be(0x1dc)]['id'],_0x4481be(0x26b),{'parse_mode':_0x4481be(0x16c)})['catch'](_0x2ad69d=>{telegramError(_0x2ad69d);}),![];return!![];}async function initTelegram(){const _0x280587=_0x51b135;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x280587(0x2ac)],{'polling':!![]});let _0x345a55=_0x280587(0x268);_0x345a55+='\x0a',_0x345a55+=_0x280587(0x1b2),_0x345a55+=_0x280587(0x29b),_0x345a55+=_0x280587(0x240),_0x345a55+=_0x280587(0x251),_0x345a55+='/on\x20-\x20start\x20bot(s)\x0a',_0x345a55+='/off\x20-\x20stop\x20bot(s)\x0a',_0x345a55+=_0x280587(0x274),_0x345a55+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x49726f=_0x280587(0x18a);_0x49726f+='\x0a',_0x49726f+=_0x345a55,tgBot[_0x280587(0x186)](/\/start/,_0x432c5c=>{const _0x3190d4=_0x280587;if(!validateTelegram(_0x432c5c))return;if(settings['telegramChatId']!=_0x432c5c[_0x3190d4(0x1dc)]['id'])updateSetting('telegramChatId',_0x432c5c[_0x3190d4(0x1dc)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x3190d4(0x1e4)](_0x432c5c[_0x3190d4(0x1dc)]['id'],_0x49726f)[_0x3190d4(0x177)](_0x51a260=>{telegramError(_0x51a260);});}),tgBot['onText'](/\/enable/,_0x2df99a=>{const _0x92b7d4=_0x280587;if(!validateTelegram(_0x2df99a))return;if(settings[_0x92b7d4(0x22e)]!=_0x2df99a['chat']['id'])updateSetting(_0x92b7d4(0x22e),_0x2df99a[_0x92b7d4(0x1dc)]['id']);updateSetting(_0x92b7d4(0x1b6),!![]),tgBot[_0x92b7d4(0x1e4)](_0x2df99a[_0x92b7d4(0x1dc)]['id'],_0x92b7d4(0x25a))['catch'](_0x12acc1=>{telegramError(_0x12acc1);});}),tgBot[_0x280587(0x186)](/\/config/,async _0x4dbe70=>{const _0x206e76=_0x280587;if(!validateTelegram(_0x4dbe70))return;tgBot[_0x206e76(0x255)](_0x206e76(0x209)),tgBot['sendMessage'](_0x4dbe70[_0x206e76(0x1dc)]['id'],_0x206e76(0x168),{'reply_markup':{'inline_keyboard':[[{'text':_0x206e76(0x1f5),'callback_data':_0x206e76(0x24b)},{'text':_0x206e76(0x16b),'callback_data':_0x206e76(0x172)},{'text':'All','callback_data':_0x206e76(0x1af)}]]}})[_0x206e76(0x177)](_0x3314d4=>{telegramError(_0x3314d4);}),tgBot['on'](_0x206e76(0x209),async _0x44e769=>{const _0x4ce4a9=_0x206e76,_0x30243c=_0x44e769[_0x4ce4a9(0x1aa)],_0x200bfd=_0x44e769['message'];tgBot[_0x4ce4a9(0x194)](_0x44e769['id'])['then'](async()=>{const _0x382391=_0x4ce4a9;_0x30243c==_0x382391(0x24b)&&(updateSetting(_0x382391(0x26d),_0x382391(0x24b)),updateSetting(_0x382391(0x1b6),!![]),await tgBot[_0x382391(0x1e4)](_0x200bfd['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x382391(0x177)](_0x4df6bd=>{telegramError(_0x4df6bd);}));_0x30243c==_0x382391(0x172)&&(updateSetting(_0x382391(0x26d),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x382391(0x1e4)](_0x200bfd[_0x382391(0x1dc)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x382391(0x177)](_0x4092d1=>{telegramError(_0x4092d1);}));_0x30243c==_0x382391(0x1af)&&(updateSetting('telegramEvents',_0x382391(0x1af)),updateSetting(_0x382391(0x1b6),!![]),await tgBot[_0x382391(0x1e4)](_0x200bfd['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x382391(0x177)](_0x1a03dd=>{telegramError(_0x1a03dd);}));if(!settings[_0x382391(0x22e)])tgBot[_0x382391(0x1e4)](_0x200bfd[_0x382391(0x1dc)]['id'],_0x382391(0x21b))['catch'](_0x360244=>{telegramError(_0x360244);});}),tgBot[_0x4ce4a9(0x255)]('callback_query');});}),tgBot['onText'](/\/status/,_0xdf48d7=>{const _0x568728=_0x280587;if(!validateTelegram(_0xdf48d7))return;let _0x51cf4c=_0x568728(0x205);config[_0x568728(0x26a)](_0x43efba=>{const _0x26a93f=_0x568728;_0x51cf4c+=_0x26a93f(0x285)+_0x43efba['botID']+_0x26a93f(0x1db)+_0x43efba[_0x26a93f(0x1ea)]+':\x20'+_0x43efba[_0x26a93f(0x237)]+_0x26a93f(0x173)+_0x43efba[_0x26a93f(0x1cc)]+'\x0a';}),_0x51cf4c+='\x0a',_0x51cf4c+=_0x568728(0x1a7),_0x51cf4c+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x568728(0x27d),_0x51cf4c+=settings[_0x568728(0x1b6)]?settings[_0x568728(0x26d)]=='all'?_0x568728(0x192):_0x568728(0x1e6)+settings[_0x568728(0x26d)]+_0x568728(0x219):'',tgBot[_0x568728(0x1e4)](_0xdf48d7[_0x568728(0x1dc)]['id'],_0x51cf4c,{'parse_mode':_0x568728(0x16c)})[_0x568728(0x177)](_0x558da1=>{telegramError(_0x558da1);});}),tgBot[_0x280587(0x186)](/\/restart/,_0x12932b=>{const _0x2929ff=_0x280587;if(!validateTelegram(_0x12932b))return;tgBot['removeListener'](_0x2929ff(0x209));const _0x1cc928=getEnabledBots();if(_0x1cc928[_0x2929ff(0x263)]==0x0)tgBot[_0x2929ff(0x1e4)](_0x12932b[_0x2929ff(0x1dc)]['id'],_0x2929ff(0x1a6))[_0x2929ff(0x177)](_0xb475ba=>{telegramError(_0xb475ba);});else{if(_0x1cc928['length']>0x1)_0x1cc928[_0x2929ff(0x1d5)]({'botID':_0x2929ff(0x1af)});let _0x27c4c5=[],_0x8bae33=[];const _0x457496=_0x1cc928['length']%0x4==0x0||_0x1cc928[_0x2929ff(0x263)]%0x4==0x3||_0x1cc928['length']%0x3==0x1?0x4:0x3;let _0x3b5b81=0x0;_0x1cc928[_0x2929ff(0x26a)]((_0xb6846d,_0x3d86fd)=>{const _0x23a8c3=_0x2929ff;if(_0x3d86fd%_0x457496==0x0)_0x8bae33=[];_0x8bae33[_0x23a8c3(0x1d5)]({'text':_0xb6846d[_0x23a8c3(0x1a9)]=='all'?_0x23a8c3(0x1f4):_0x23a8c3(0x285)+_0xb6846d[_0x23a8c3(0x1a9)],'callback_data':_0xb6846d[_0x23a8c3(0x1a9)]}),_0x3d86fd%_0x457496==0x0&&(_0x27c4c5[_0x3b5b81]=_0x8bae33,_0x3b5b81++);}),tgBot[_0x2929ff(0x1e4)](_0x12932b[_0x2929ff(0x1dc)]['id'],_0x2929ff(0x277),{'reply_markup':{'inline_keyboard':_0x27c4c5}})[_0x2929ff(0x177)](_0x464e88=>{telegramError(_0x464e88);}),tgBot['on'](_0x2929ff(0x209),async _0x54adb9=>{const _0x56928a=_0x2929ff,_0x3032e0=_0x54adb9[_0x56928a(0x1aa)],_0x272b4d=_0x54adb9[_0x56928a(0x1bd)];tgBot[_0x56928a(0x194)](_0x54adb9['id'])[_0x56928a(0x1e0)](async()=>{const _0x3b7966=_0x56928a;if(_0x3032e0==_0x3b7966(0x1af)){if(settings['telegramEvents']==_0x3b7966(0x24b))tgBot['sendMessage'](_0x272b4d[_0x3b7966(0x1dc)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x4fef73=>{telegramError(_0x4fef73);});config[_0x3b7966(0x26a)](_0x41233f=>{const _0x574afb=_0x3b7966;restartBot(_0x41233f[_0x574afb(0x1a9)]);});}else{if(settings[_0x3b7966(0x26d)]=='orders')tgBot[_0x3b7966(0x1e4)](_0x272b4d[_0x3b7966(0x1dc)]['id'],_0x3b7966(0x1f7)+_0x3032e0)['catch'](_0xb202e2=>{telegramError(_0xb202e2);});restartBot(_0x3032e0);}}),tgBot[_0x56928a(0x255)](_0x56928a(0x209));});}}),tgBot[_0x280587(0x186)](/\/on/,_0x443164=>{const _0xd160ab=_0x280587;if(!validateTelegram(_0x443164))return;tgBot[_0xd160ab(0x255)](_0xd160ab(0x209));const _0x5c119b=getDisabledBots();if(_0x5c119b[_0xd160ab(0x263)]==0x0)tgBot['sendMessage'](_0x443164[_0xd160ab(0x1dc)]['id'],_0xd160ab(0x1cf))[_0xd160ab(0x177)](_0x2ff0f1=>{telegramError(_0x2ff0f1);});else{if(_0x5c119b[_0xd160ab(0x263)]>0x1)_0x5c119b[_0xd160ab(0x1d5)]({'botID':_0xd160ab(0x1af)});let _0x39581f=[],_0x2c46a5=[];const _0x19d460=_0x5c119b[_0xd160ab(0x263)]%0x4==0x0||_0x5c119b[_0xd160ab(0x263)]%0x4==0x3||_0x5c119b['length']%0x3==0x1?0x4:0x3;let _0x1bcb2c=0x0;_0x5c119b[_0xd160ab(0x26a)]((_0x168e3d,_0x464954)=>{const _0x110c04=_0xd160ab;if(_0x464954%_0x19d460==0x0)_0x2c46a5=[];_0x2c46a5[_0x110c04(0x1d5)]({'text':_0x168e3d[_0x110c04(0x1a9)]=='all'?_0x110c04(0x1f4):_0x110c04(0x285)+_0x168e3d[_0x110c04(0x1a9)],'callback_data':_0x168e3d['botID']}),_0x464954%_0x19d460==0x0&&(_0x39581f[_0x1bcb2c]=_0x2c46a5,_0x1bcb2c++);}),tgBot[_0xd160ab(0x1e4)](_0x443164['chat']['id'],_0xd160ab(0x1d9),{'reply_markup':{'inline_keyboard':_0x39581f}})[_0xd160ab(0x177)](_0x502b03=>{telegramError(_0x502b03);}),tgBot['on']('callback_query',async _0x2b5496=>{const _0x36c280=_0xd160ab,_0x16eaf7=_0x2b5496[_0x36c280(0x1aa)],_0xca8b63=_0x2b5496['message'];tgBot[_0x36c280(0x194)](_0x2b5496['id'])[_0x36c280(0x1e0)](async()=>{const _0x26caec=_0x36c280;if(_0x16eaf7==_0x26caec(0x1af)){if(settings['telegramEvents']==_0x26caec(0x24b))tgBot[_0x26caec(0x1e4)](_0xca8b63['chat']['id'],_0x26caec(0x1f6))[_0x26caec(0x177)](_0x406202=>{telegramError(_0x406202);});_0x5c119b[_0x26caec(0x26a)](_0x84610d=>{const _0x4fc048=_0x26caec;if(_0x84610d['botID']!=_0x4fc048(0x1af))toggleBot(_0x84610d[_0x4fc048(0x1a9)],toggleStatus(_0x84610d[_0x4fc048(0x1a9)]),_0x4fc048(0x2af));});}else{if(settings[_0x26caec(0x26d)]==_0x26caec(0x24b))tgBot[_0x26caec(0x1e4)](_0xca8b63['chat']['id'],_0x26caec(0x200)+_0x16eaf7)[_0x26caec(0x177)](_0x18482c=>{telegramError(_0x18482c);});toggleBot(_0x16eaf7,toggleStatus(_0x16eaf7),_0x26caec(0x2af));}}),tgBot['removeListener'](_0x36c280(0x209));});}}),tgBot[_0x280587(0x186)](/\/off/,_0x1058ac=>{const _0x3dcc2c=_0x280587;if(!validateTelegram(_0x1058ac))return;tgBot[_0x3dcc2c(0x255)](_0x3dcc2c(0x209));const _0x406907=getEnabledBots();if(_0x406907['length']==0x0)tgBot[_0x3dcc2c(0x1e4)](_0x1058ac[_0x3dcc2c(0x1dc)]['id'],_0x3dcc2c(0x1a6))[_0x3dcc2c(0x177)](_0x225b6e=>{telegramError(_0x225b6e);});else{if(_0x406907[_0x3dcc2c(0x263)]>0x1)_0x406907[_0x3dcc2c(0x1d5)]({'botID':_0x3dcc2c(0x1af)});let _0x4783ef=[],_0x306c19=[];const _0x47b786=_0x406907[_0x3dcc2c(0x263)]%0x4==0x0||_0x406907[_0x3dcc2c(0x263)]%0x4==0x3||_0x406907['length']%0x3==0x1?0x4:0x3;let _0x12a712=0x0;_0x406907[_0x3dcc2c(0x26a)]((_0xc2c522,_0x5a02c6)=>{const _0x3e0f39=_0x3dcc2c;if(_0x5a02c6%_0x47b786==0x0)_0x306c19=[];_0x306c19[_0x3e0f39(0x1d5)]({'text':_0xc2c522['botID']==_0x3e0f39(0x1af)?_0x3e0f39(0x1f4):_0x3e0f39(0x285)+_0xc2c522[_0x3e0f39(0x1a9)],'callback_data':_0xc2c522[_0x3e0f39(0x1a9)]}),_0x5a02c6%_0x47b786==0x0&&(_0x4783ef[_0x12a712]=_0x306c19,_0x12a712++);}),tgBot[_0x3dcc2c(0x1e4)](_0x1058ac['chat']['id'],_0x3dcc2c(0x179),{'reply_markup':{'inline_keyboard':_0x4783ef}})[_0x3dcc2c(0x177)](_0xa6c99c=>{telegramError(_0xa6c99c);}),tgBot['on'](_0x3dcc2c(0x209),async _0x52e2f6=>{const _0x14aed3=_0x3dcc2c,_0x36f852=_0x52e2f6['data'],_0x555100=_0x52e2f6[_0x14aed3(0x1bd)];tgBot[_0x14aed3(0x194)](_0x52e2f6['id'])[_0x14aed3(0x1e0)](async()=>{const _0x30df91=_0x14aed3;if(_0x36f852==_0x30df91(0x1af)){if(settings['telegramEvents']==_0x30df91(0x24b))tgBot[_0x30df91(0x1e4)](_0x555100[_0x30df91(0x1dc)]['id'],_0x30df91(0x1d6))[_0x30df91(0x177)](_0x43e824=>{telegramError(_0x43e824);});_0x406907[_0x30df91(0x26a)](_0x29e5db=>{const _0x5882ea=_0x30df91;if(_0x29e5db[_0x5882ea(0x1a9)]!=_0x5882ea(0x1af))toggleBot(_0x29e5db[_0x5882ea(0x1a9)],toggleStatus(_0x29e5db['botID']),'stopped');});}else{if(settings[_0x30df91(0x26d)]==_0x30df91(0x24b))tgBot[_0x30df91(0x1e4)](_0x555100[_0x30df91(0x1dc)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x36f852)['catch'](_0x40e260=>{telegramError(_0x40e260);});toggleBot(_0x36f852,toggleStatus(_0x36f852),_0x30df91(0x2af));}}),tgBot[_0x14aed3(0x255)]('callback_query');});}}),tgBot['onText'](/\/disable/,_0x33bba0=>{const _0x3661b5=_0x280587;if(!validateTelegram(_0x33bba0))return;tgBot['sendMessage'](_0x33bba0[_0x3661b5(0x1dc)]['id'],'Notifications\x20disabled')['catch'](_0x36211a=>{telegramError(_0x36211a);}),updateSetting(_0x3661b5(0x1b6),![]);}),tgBot[_0x280587(0x186)](/\/help/,_0x5e02bd=>{const _0x17ab9f=_0x280587;if(!validateTelegram(_0x5e02bd))return;tgBot[_0x17ab9f(0x1e4)](_0x5e02bd[_0x17ab9f(0x1dc)]['id'],_0x345a55)[_0x17ab9f(0x177)](_0x3cd42b=>{telegramError(_0x3cd42b);});}),tgBot['on'](_0x280587(0x292),_0x5c3f74=>{const _0x46b6e2=_0x280587;_0x5c3f74[_0x46b6e2(0x214)]()[_0x46b6e2(0x21a)]('404\x20Not\x20Found')&&(logging(_0x46b6e2(0x269)),tgBot[_0x46b6e2(0x254)](),tgBot=null,io['to'](_0x46b6e2(0x17c))['emit'](_0x46b6e2(0x227),_0x46b6e2(0x269)));}),process['once'](_0x280587(0x1a5),()=>{const _0x1d5b26=_0x280587;if(tgBot)tgBot[_0x1d5b26(0x254)]();process[_0x1d5b26(0x29c)](0x1);}),process[_0x280587(0x259)](_0x280587(0x1d3),()=>{const _0x572ab4=_0x280587;if(tgBot)tgBot[_0x572ab4(0x254)]();process[_0x572ab4(0x29c)](0x1);});}}function disableTelegram(){const _0x3e1641=_0x51b135;tgBot&&(tgBot[_0x3e1641(0x254)](),tgBot=null);}function sendTelegram(_0x14cc4e,_0x34cc71){const _0x9862e9=_0x51b135;if(settings[_0x9862e9(0x1b6)]){if(settings[_0x9862e9(0x26d)]==_0x9862e9(0x1af)||(_0x34cc71[_0x9862e9(0x1b3)]=='error'||_0x34cc71['type']==_0x9862e9(0x28d))&&settings['telegramEvents']==_0x9862e9(0x172)||_0x34cc71['type']==_0x9862e9(0x201)&&settings['telegramEvents']==_0x9862e9(0x24b)){if(tgBot&&settings[_0x9862e9(0x22e)]){if(_0x34cc71[_0x9862e9(0x180)])tgBot['sendMessage'](settings[_0x9862e9(0x22e)],_0x34cc71[_0x9862e9(0x1ea)]+_0x9862e9(0x289)+_0x34cc71[_0x9862e9(0x2a1)])[_0x9862e9(0x177)](_0x94f5fc=>{telegramError(_0x94f5fc);});else tgBot['sendMessage'](settings[_0x9862e9(0x22e)],'Bot\x20'+_0x14cc4e+_0x9862e9(0x289)+_0x34cc71[_0x9862e9(0x2a1)])[_0x9862e9(0x177)](_0x40a09a=>{telegramError(_0x40a09a);});}}}}function getDeviceWithIp(_0x166d67){const _0x1bbec3=_0x51b135;return devices[_0x1bbec3(0x197)](_0x5ec842=>_0x5ec842['ip']===_0x166d67);}function temporaryAccess2FA(_0x483903,_0x40cd19){const _0x34ab79=_0x51b135;let _0x3e237f=new Date(),_0x11a16d=![];if(lastIpApproval){if(_0x3e237f-lastIpApproval<0x1388)_0x11a16d=!![];}lastIpApproval=new Date();if(_0x11a16d)return;tgBot&&settings[_0x34ab79(0x22e)]&&(tgBot[_0x34ab79(0x255)]('callback_query'),tgBot['sendMessage'](settings[_0x34ab79(0x22e)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x40cd19)[_0x34ab79(0x287)]+_0x34ab79(0x1f9),{'parse_mode':_0x34ab79(0x16c),'reply_markup':{'inline_keyboard':[[{'text':_0x34ab79(0x238),'callback_data':'5'},{'text':_0x34ab79(0x21e),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x34ab79(0x266)}]]}})[_0x34ab79(0x177)](_0x20f830=>{telegramError(_0x20f830);}),tgBot['on'](_0x34ab79(0x209),async _0x197a92=>{const _0x48c68f=_0x34ab79,_0x1d03f9=_0x197a92[_0x48c68f(0x1aa)],_0x543a89=_0x197a92['message'];tgBot[_0x48c68f(0x194)](_0x197a92['id'])['then'](async()=>{const _0x59f32a=_0x48c68f;devices[_0x483903][_0x59f32a(0x294)]={'clientip':_0x40cd19,'timestamp':new Date()[_0x59f32a(0x211)](),'expiry':_0x1d03f9},_0x1d03f9!=_0x59f32a(0x266)?(await tgBot[_0x59f32a(0x1e4)](_0x543a89[_0x59f32a(0x1dc)]['id'],_0x59f32a(0x18c)+_0x1d03f9+_0x59f32a(0x1b4),{'parse_mode':_0x59f32a(0x16c)})[_0x59f32a(0x177)](_0x25d23a=>{telegramError(_0x25d23a);}),io['to'](_0x483903)[_0x59f32a(0x241)](_0x59f32a(0x237),{'access':{'allow':![],'reason':_0x59f32a(0x1bb),'token':null}})):(await tgBot[_0x59f32a(0x1e4)](_0x543a89[_0x59f32a(0x1dc)]['id'],_0x59f32a(0x189))[_0x59f32a(0x177)](_0x19919f=>{telegramError(_0x19919f);}),io['to'](_0x483903)[_0x59f32a(0x241)](_0x59f32a(0x237),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x48c68f(0x255)](_0x48c68f(0x209));}));}function loginAccess2FA(_0x3ad0a3,_0x21d8c5){const _0x3d9e51=_0x51b135;tgBot&&settings['telegramChatId']&&(tgBot[_0x3d9e51(0x255)]('callback_query'),tgBot[_0x3d9e51(0x1e4)](settings[_0x3d9e51(0x22e)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x21d8c5)['show']+'</b>\x20?',{'parse_mode':_0x3d9e51(0x16c),'reply_markup':{'inline_keyboard':[[{'text':_0x3d9e51(0x29e),'callback_data':loginExpiry},{'text':_0x3d9e51(0x266),'callback_data':_0x3d9e51(0x266)}]]}})[_0x3d9e51(0x177)](_0x38939a=>{telegramError(_0x38939a);}),tgBot['on']('callback_query',async _0x980721=>{const _0x27d0ed=_0x3d9e51,_0x576f6d=_0x980721[_0x27d0ed(0x1aa)],_0x10de17=_0x980721[_0x27d0ed(0x1bd)];tgBot[_0x27d0ed(0x194)](_0x980721['id'])['then'](async()=>{const _0xd2fc60=_0x27d0ed;devices[_0x3ad0a3][_0xd2fc60(0x299)]={'clientip':_0x21d8c5,'timestamp':new Date()[_0xd2fc60(0x211)](),'expiry':_0x576f6d},_0x576f6d!='reject'?(await tgBot[_0xd2fc60(0x1e4)](_0x10de17[_0xd2fc60(0x1dc)]['id'],_0xd2fc60(0x18e),{'parse_mode':_0xd2fc60(0x16c)})[_0xd2fc60(0x177)](_0x29550f=>{telegramError(_0x29550f);}),io['to'](_0x3ad0a3)[_0xd2fc60(0x241)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x10de17[_0xd2fc60(0x1dc)]['id'],_0xd2fc60(0x210))['catch'](_0x3336b3=>{telegramError(_0x3336b3);}),io['to'](_0x3ad0a3)[_0xd2fc60(0x241)](_0xd2fc60(0x237),{'access':{'allow':![],'reason':_0xd2fc60(0x1bc),'token':null}}));}),tgBot[_0x27d0ed(0x255)](_0x27d0ed(0x209));}));}function getConfiguration(){const _0x5c1c18=_0x51b135;return dbConfig[_0x5c1c18(0x1ce)](_0x5c1c18(0x182))['sortBy']('botID')[_0x5c1c18(0x232)]()||[];}function getEnabledBots(){const _0x318deb=_0x51b135;return dbConfig[_0x318deb(0x1ce)](_0x318deb(0x182))[_0x318deb(0x1a0)](_0x318deb(0x1a9))[_0x318deb(0x17e)]({'status':_0x318deb(0x245)})['value']()||[];}function getDisabledBots(){const _0x46ff4b=_0x51b135;return dbConfig[_0x46ff4b(0x1ce)](_0x46ff4b(0x182))[_0x46ff4b(0x1a0)](_0x46ff4b(0x1a9))[_0x46ff4b(0x17e)]({'status':_0x46ff4b(0x24e)})['value']()||[];}function getSettings(){const _0x1a8078=_0x51b135;return dbSettings[_0x1a8078(0x1ce)](_0x1a8078(0x184))[_0x1a8078(0x232)]()||{'timeshift':0x0};}function getSecure(){const _0x166a9e=_0x51b135;return dbSecure['get'](_0x166a9e(0x273))[_0x166a9e(0x232)]()||{};}function getBlacklist(){const _0x3e5bb6=_0x51b135;return dbSecure['get'](_0x3e5bb6(0x22b))['value']()||[];}function broadcastToBots(_0x1a9006,_0xe89fe4){const _0x103f9e=_0x51b135;config[_0x103f9e(0x26a)](_0x1e9981=>{const _0x114b36=_0x103f9e;if(_0x1e9981[_0x114b36(0x237)]==_0x114b36(0x245)&&_0x1e9981[_0x114b36(0x1cc)]==_0x114b36(0x167)){if(pid[_0x1e9981[_0x114b36(0x1a9)]])pid[_0x1e9981[_0x114b36(0x1a9)]]['send']({[_0x1a9006]:_0xe89fe4});}});}function storeSettings(_0xc68895,_0xff3e8d=![]){const _0x46d01b=_0x51b135;_0xc68895={...settings,..._0xc68895};if(_0xff3e8d&&_0xc68895['bbPassword']!='************'&&_0xc68895['bbPassword']!=''){const _0x3c56d4=crypt['decrypt'](secure['privateKey'],_0xc68895[_0x46d01b(0x220)])[_0x46d01b(0x1bd)][_0x46d01b(0x1b1)]('@')[0x0],_0x4fa6c7=bcrypt[_0x46d01b(0x206)](_0x3c56d4,saltRounds);_0xc68895={..._0xc68895,'bbPassword':_0x4fa6c7};}if(_0xff3e8d&&_0xc68895[_0x46d01b(0x2ac)]!=_0x46d01b(0x171)&&_0xc68895[_0x46d01b(0x2ac)]!=''){const _0x3c4675=crypt[_0x46d01b(0x20e)](secure[_0x46d01b(0x25e)],_0xc68895[_0x46d01b(0x2ac)])[_0x46d01b(0x1bd)][_0x46d01b(0x1b1)]('@')[0x0];_0xc68895={..._0xc68895,'telegramToken':_0x3c4675};}const _0x29666c=_0xc68895[_0x46d01b(0x2ac)]!=_0x46d01b(0x171)&&_0xc68895[_0x46d01b(0x2ac)]!=settings[_0x46d01b(0x2ac)]||_0xc68895[_0x46d01b(0x1eb)]!=settings[_0x46d01b(0x1eb)],_0x4f4193=_0xc68895[_0x46d01b(0x2ac)]==''||_0xc68895[_0x46d01b(0x1eb)]=='';if(_0x29666c)_0xc68895['telegramEvents']=_0x46d01b(0x1af);for(const [_0x2b8eba,_0x111418]of Object[_0x46d01b(0x253)](_0xc68895)){if(_0x2b8eba==_0x46d01b(0x2ac)&&_0x111418==_0x46d01b(0x171)){_0xc68895[_0x46d01b(0x2ac)]=settings[_0x46d01b(0x2ac)];continue;};if(_0x2b8eba=='bbPassword'&&_0x111418==_0x46d01b(0x171)){_0xc68895[_0x46d01b(0x220)]=settings['bbPassword'];continue;};dbSettings['set'](_0x46d01b(0x20b)+_0x2b8eba,_0x111418)[_0x46d01b(0x1e9)]();}settings=_0xc68895,io['to'](_0x46d01b(0x17c))['emit'](_0x46d01b(0x184),cleanSettings()),broadcastToBots(_0x46d01b(0x2aa),settings[_0x46d01b(0x2aa)]);if(_0x29666c&&!_0x4f4193)initTelegram();if(_0x29666c&&_0x4f4193)disableTelegram();getAllClients()[_0x46d01b(0x26a)](_0x32e0d6=>{const _0x453869=_0x46d01b;getSocket(_0x32e0d6['id'])['emit']('status',{'access':{'allow':![],'reason':_0x453869(0x1bb),'token':null}});});}function updateSetting(_0x4407fb,_0x529ca6){const _0x19a6b2=_0x51b135;dbSettings[_0x19a6b2(0x223)](_0x19a6b2(0x20b)+_0x4407fb,_0x529ca6)[_0x19a6b2(0x1e9)](),settings=getSettings(),io['to']('botmanager')[_0x19a6b2(0x241)](_0x19a6b2(0x184),cleanSettings());}function storeSecure(_0x158785){const _0x3f6e29=_0x51b135;dbSecure[_0x3f6e29(0x1ce)](_0x3f6e29(0x273))['push'](_0x158785)['write'](),secure=_0x158785;}function addBlacklist(_0xc933bb){const _0x3f15b6=_0x51b135;cleanBlacklist();let _0xbb9289;devices[_0xc933bb][_0x3f15b6(0x294)]?_0xbb9289=Math[_0x3f15b6(0x19d)](devices[_0xc933bb][_0x3f15b6(0x294)][_0x3f15b6(0x22f)],loginExpiry):_0xbb9289=loginExpiry,dbSecure[_0x3f15b6(0x1ce)](_0x3f15b6(0x22b))['push']({'expiry':new Date()[_0x3f15b6(0x211)]()+_0xbb9289*0x3c*0x3e8,'token':devices[_0xc933bb][_0x3f15b6(0x1e5)][_0x3f15b6(0x1a8)]})[_0x3f15b6(0x1e9)](),blacklist=dbSecure[_0x3f15b6(0x1ce)]('blacklist')[_0x3f15b6(0x232)]();}function cleanBlacklist(){const _0x159306=_0x51b135;let _0x5df869=dbSecure[_0x159306(0x1ce)]('blacklist')[_0x159306(0x283)]()['value'](),_0x5a75a4=new Date()[_0x159306(0x211)]();_0x5df869['forEach'](_0x2e327e=>{const _0x195e59=_0x159306;_0x2e327e[_0x195e59(0x22f)]<_0x5a75a4&&dbSecure[_0x195e59(0x1ce)](_0x195e59(0x22b))[_0x195e59(0x1ca)]({'expiry':_0x2e327e[_0x195e59(0x22f)]})[_0x195e59(0x1e9)]();});}function initStates(){const _0x51faa5=_0x51b135;let _0x56785d=getConfiguration();_0x56785d[_0x51faa5(0x26a)](_0x40b4a6=>{const _0x527e95=_0x51faa5;_0x40b4a6[_0x527e95(0x1cc)]=_0x527e95(0x2af);}),storeConfiguration(_0x56785d);}function onKeys(){const _0x6e1d90=new RSA();return new Promise(_0x20dbb1=>{const _0x5770dd=_0x90ef;_0x6e1d90[_0x5770dd(0x25b)]()[_0x5770dd(0x1e0)](_0x41f8cf=>{_0x20dbb1(_0x41f8cf);});});}function _0x6fcd(){const _0x51272b=['test','login\x20required','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','emit','deleteHistoryAlerts','static','password','enabled','/:bot/performance','72762hrNZDG','slice','placeOrder','existsSync','orders','page','f2aRequired','disabled','server','getUTCHours','/restart\x20-\x20restart\x20bot(s)\x0a','-performance.json','entries','stopPolling','removeListener','clientip','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','toIPv4MappedAddress','once','Notifications\x20enabled','generateKeyPairAsync','Invalid\x20authentication\x20token\x20(1)',':\x20Bot\x20Mgr\x20>\x20','privateKey','fork','stop','546606UAUBYA','new-disabled','length','conn','Balance\x20Bot','reject','2FA\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Invalid\x20Telegram\x20token','forEach','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','reason','telegramEvents','https://hodlerhacks.com',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','disabled\x20Bot\x20','reset-password','User\x20has\x20been\x20validated','secure','/status\x20-\x20show\x20bot(s)\x20status\x0a','ipv6','/:bot/support','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','encryptedUuid','2FA','index.html','441476xDIKGs','::ffff:127.0.0.1','Notifications\x20enabled\x0a','2FA\x20login\x20token\x20generated','error','argv','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','use','cloneDeep','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Bot\x20','compareSync','show','padStart','\x20>\x20','hasOwnProperty','Unauthorized\x20attempt\x20to\x20add\x20bot','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','success','started','temporary\x20access\x20timeout','lowdb','Unauthorized\x20attempt\x20to\x20get\x20portfolio','polling_error','login\x20not\x20required','telegramIpApproval','95xSFCVN','-----------------------------------------------------------------------------------','randomBytes','loginRequired','telegram2FaApproval','search','/disable\x20-\x20disable\x20notifications\x0a','exit','disconnect','accept','delete-bot','unlinkSync','event','hybrid-crypto-js','headers','Unauthorized\x20login\x20attempt\x20(timeout)','env','send','4417NRIjGy','date-fns','timestamp','timeshift','2FA\x20login\x20required','telegramToken',',\x20must\x20be\x20a\x204\x20digit\x20number','apiKey','stopped','telegram','yes','handshake','bot.js','auth','bcryptjs','running','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','127.0.0.1','whitelistEnabled','Alerts','HTML','getMinutes','Unauthorized\x20attempt\x20to\x20log\x20out','deleted\x20Bot\x20','-config.json','************','alerts','\x20/\x20','sendFile','isIPv4MappedAddress','Error:\x20Invalid\x20argument\x20','catch','new','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','3000','update-bb','botmanager','keys','filter','store-settings','showname','join','bots','872lpOUMO','settings','version','onText','default','place-order','Temporary\x20access\x20rejected','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','RSA-OAEP','Access\x20enabled\x20for\x20','whitelist','Login\x20accepted','defaults','enabled\x20Bot\x20','add-bot','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bot','answerCallbackQuery','match','getFullYear','find','ipaddr.js','Invalid\x20authentication\x20token\x20(2)','connection','exp','/:bot','max','host','config/','sortBy','login','yargs/yargs','temporary\x20token\x20generated','createServer','SIGINT','No\x20bots\x20running\x20right\x20now','<b>Telegram\x20bot\x20status:</b>\x0a','token','botID','data','kind','user','lowdb/adapters/FileSync','pidExpireLogin','all','build','split','/enable\x20-\x20enable\x20notifications\x0a','type','\x20minutes','-events.json','telegramEnabled','bb-secure.json','clients','bb-config.json','(((.+)+)+)+$','reload','2FA\x20login\x20rejected','message','args','bb/','http','cancel-loading','login\x20token\x20valid','getSeconds','function','12262811TfMrjm','bot-','Unauthorized\x20attempt\x20to\x20delete\x20bot','from','update-bot','remove','Invalid\x20IP\x20address','live','store','get','All\x20bots\x20running\x20right\x20now','@analytics/google-analytics','invalid\x20credentials','connected','SIGTERM','parse','push','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','crypto','Crypt','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','bbUsername','\x20|\x20','chat','starting\x20bot\x20|\x20Bot\x20','isValid','18QwaueW','then','-results.json','assign','express','sendMessage','access','Notifications\x20types:\x20','constructor','readdirSync','write','botname','telegramUsername','555042KtNBXY','toIPv4Address','NTBA_FIX_319','jsonwebtoken','kill','restart','inherit','sockets','All\x20bots','Orders','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','</b>\x20?','Unauthorized\x20attempt\x20to\x20update\x20bot','delete-alerts','sign','getMonth','username','611926VkWfvS','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','order','remoteAddress','verify','restarting\x20Bot\x20','<b>Balance\x20Bot\x20status:</b>\x0a','hashSync','/:bot/coins','get-logs','callback_query','copyFileSync','settings.','get-portfolio','store-configuration','decrypt','socket.io','Login\x20rejected','getTime','50XOBtZT','analytics','toString','Invalid\x20username\x20or\x20IP\x20address','Password\x20has\x20been\x20reset\x20to:\x20','log','Bot\x20Mgr\x20>\x20','\x20only\x0a','includes','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','secret','publicKey','15\x20min','build2','bbPassword','pidRefreshToken','login\x20token\x20generated','set','path','allow','uuid','notification','removeAllListeners','version.json','starting\x20new\x20bot\x20|\x20Bot\x20','blacklist','cancelLoading','storeHeadless','telegramChatId','expiry','map','mkdirSync','value','getDate','1000','logout','No\x20authentication\x20token','status','5\x20min','logged\x20out','Unauthorized\x20attempt\x20to\x20update\x20settings','randomFillSync','getHours','UA-192771731-1'];_0x6fcd=function(){return _0x51272b;};return _0x6fcd();}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x11e656=_0x51b135;let _0x2c7f52=getConfiguration(),_0x5b6b7f=![];_0x2c7f52['forEach'](_0x5b2ada=>{const _0xba5a13=_0x90ef;if(_0x5b2ada['status']=='running')_0x5b2ada['status']='enabled',_0x5b6b7f=!![];else _0x5b2ada['status']==_0xba5a13(0x2af)&&(_0x5b2ada[_0xba5a13(0x237)]=_0xba5a13(0x24e),_0x5b6b7f=!![]);});if(_0x5b6b7f)storeConfiguration(_0x2c7f52);let _0x4b143f=getSecure();if(!_0x4b143f[_0x11e656(0x28a)]('secret')){let _0x256114=await generateKeys();_0x4b143f[_0x11e656(0x21d)]=_0x256114['publicKey'],_0x4b143f[_0x11e656(0x25e)]=_0x256114[_0x11e656(0x25e)],_0x4b143f['secret']=crypto[_0x11e656(0x297)](0x20)[_0x11e656(0x214)]('hex');;storeSecure(_0x4b143f);}let _0x963d62=getSettings();_0x5b6b7f=![];!_0x963d62[_0x11e656(0x28a)](_0x11e656(0x298))&&(_0x963d62[_0x11e656(0x298)]=![],_0x963d62[_0x11e656(0x1da)]='',_0x963d62[_0x11e656(0x220)]='',_0x963d62['f2aRequired']=![],_0x5b6b7f=!![]);!_0x963d62[_0x11e656(0x28a)](_0x11e656(0x16a))&&(_0x963d62[_0x11e656(0x16a)]=![],_0x963d62[_0x11e656(0x18d)]=[],_0x963d62['temporaryAccessAllowed']=![],_0x5b6b7f=!![]);if(!_0x963d62[_0x11e656(0x28a)]('telegramEnabled')){if(_0x963d62['telegramChatId'])_0x963d62[_0x11e656(0x1b6)]=!![];else _0x963d62[_0x11e656(0x1b6)]=![];_0x5b6b7f=!![];}if(_0x5b6b7f)storeSettings(_0x963d62);}function storeConfiguration(_0x440758){const _0x4f0310=_0x51b135;dbConfig['get'](_0x4f0310(0x182))[_0x4f0310(0x1ca)]()[_0x4f0310(0x1e9)](),dbConfig['get']('bots')['push'](..._0x440758)['write'](),config=_0x440758;}function resetPassword(){const _0x109917=_0x51b135;tgBot&&settings[_0x109917(0x22e)]&&(tgBot['removeListener'](_0x109917(0x209)),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x109917(0x16c),'reply_markup':{'inline_keyboard':[[{'text':_0x109917(0x162),'callback_data':_0x109917(0x162)},{'text':'no','callback_data':'no'}]]}})[_0x109917(0x177)](_0x44d36b=>{telegramError(_0x44d36b);}),tgBot['on'](_0x109917(0x209),async _0x678c19=>{const _0x39f932=_0x109917,_0xd58ac2=_0x678c19[_0x39f932(0x1aa)],_0x5c479d=_0x678c19[_0x39f932(0x1bd)];tgBot[_0x39f932(0x194)](_0x678c19['id'])[_0x39f932(0x1e0)](async()=>{const _0x2774c5=_0x39f932;if(_0xd58ac2!='no'){const _0x30e632=0xf,_0x9f2e27='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x2778ee=Array['from'](crypto[_0x2774c5(0x23b)](new Uint32Array(_0x30e632)))[_0x2774c5(0x230)](_0x482c48=>_0x9f2e27[_0x482c48%_0x9f2e27['length']])['join'](''),_0x48641e=bcrypt[_0x2774c5(0x206)](_0x2778ee,saltRounds);storeSettings({'bbPassword':_0x48641e}),await tgBot[_0x2774c5(0x1e4)](_0x5c479d['chat']['id'],_0x2774c5(0x216)+_0x2778ee,{'parse_mode':_0x2774c5(0x16c)})['catch'](_0x207971=>{telegramError(_0x207971);});}else await tgBot[_0x2774c5(0x1e4)](_0x5c479d[_0x2774c5(0x1dc)]['id'],'Password\x20reset\x20rejected')[_0x2774c5(0x177)](_0x246165=>{telegramError(_0x246165);});}),tgBot['removeListener'](_0x39f932(0x209));}));}function logging(_0x55def0){const _0x592eca=_0x51b135;console['log'](getTimeStamp()+_0x592eca(0x25d)+_0x55def0);if(tgBot&&settings[_0x592eca(0x22e)]&&settings['telegramEvents']!=_0x592eca(0x24b))tgBot['sendMessage'](settings[_0x592eca(0x22e)],_0x592eca(0x218)+_0x55def0)[_0x592eca(0x177)](_0x1cdbda=>{telegramError(_0x1cdbda);});}function getServerTime(){const _0x240bc6=_0x51b135,_0x444012=new Date();return _0x444012['getFullYear']()+'/'+(_0x444012[_0x240bc6(0x1fd)]()+0x1)[_0x240bc6(0x214)]()[_0x240bc6(0x288)](0x2,'0')+'/'+_0x444012[_0x240bc6(0x233)]()[_0x240bc6(0x214)]()[_0x240bc6(0x288)](0x2,'0')+'\x20'+_0x444012[_0x240bc6(0x23c)]()[_0x240bc6(0x214)]()[_0x240bc6(0x288)](0x2,'0')+':'+_0x444012[_0x240bc6(0x16d)]()[_0x240bc6(0x214)]()[_0x240bc6(0x288)](0x2,'0')+':'+_0x444012[_0x240bc6(0x1c3)]()[_0x240bc6(0x214)]()[_0x240bc6(0x288)](0x2,'0');}function getTimeStamp(){const _0x3879d2=_0x51b135,_0x471c62=shiftedTime();return _0x471c62[_0x3879d2(0x196)]()+'/'+(_0x471c62['getMonth']()+0x1)['toString']()[_0x3879d2(0x288)](0x2,'0')+'/'+_0x471c62[_0x3879d2(0x233)]()['toString']()[_0x3879d2(0x288)](0x2,'0')+'\x20'+_0x471c62['getHours']()['toString']()[_0x3879d2(0x288)](0x2,'0')+':'+_0x471c62['getMinutes']()['toString']()[_0x3879d2(0x288)](0x2,'0')+':'+_0x471c62[_0x3879d2(0x1c3)]()[_0x3879d2(0x214)]()[_0x3879d2(0x288)](0x2,'0');}function shiftedTime(){const _0x42042f=_0x51b135,_0x232d57=new Date();let _0x232679=_0x232d57;if(settings[_0x42042f(0x2aa)]&&settings[_0x42042f(0x2aa)]!==0x0)_0x232679=fns['add'](_0x232d57,{'hours':settings['timeshift']});return _0x232679;}function startScheduler(){const _0xdb1e8d=_0x51b135;let _0x27e101=new Date()[_0xdb1e8d(0x250)]();_0x27e101==0x1&&backupConfigFiles();_0x27e101==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x33a4f3=_0x51b135;fs[_0x33a4f3(0x1e8)](configpath,{'withFileTypes':!![]})[_0x33a4f3(0x26a)](_0x592fac=>{const _0x10ac1c=_0x33a4f3;if(!_0x592fac['isDirectory']())fs[_0x10ac1c(0x20a)](configpath+_0x592fac['name'],configbackuppath+_0x592fac['name']);});}function triggerAnalytics(){const _0x449a14=_0x51b135;analytics[_0x449a14(0x24c)]({'title':'Balance\x20Bot\x20Server','href':_0x449a14(0x26e),'path':'/v'+serverversion});}function validateCredentials(_0x521cbb,_0x1e0a5f){const _0xaeea97=_0x51b135;if(_0x521cbb[_0xaeea97(0x1fe)]==settings[_0xaeea97(0x1da)]&&bcrypt[_0xaeea97(0x286)](_0x521cbb[_0xaeea97(0x244)],settings[_0xaeea97(0x220)])){if(settings[_0xaeea97(0x24d)])return{'allow':![],'reason':_0xaeea97(0x2ab),'token':null};else{const _0x3c5f4e=generateLoginToken(_0x1e0a5f);return{'allow':!![],'reason':_0xaeea97(0x222),'token':_0x3c5f4e};}}else return{'allow':![],'reason':_0xaeea97(0x1d1),'token':null};}function refreshToken(_0x4fc13a){const _0x277670=_0x51b135,_0x1798db=generateLoginToken(_0x4fc13a);return{'allow':!![],'reason':_0x277670(0x222),'token':_0x1798db};}function validateAccess(_0x25947d,_0x346796){const _0xecf3b7=_0x51b135;let _0x19356f=devices[_0x346796]['ip'],_0x2f581b;const _0x1b0e39=_0x5cdab0=>{const _0x14747e=_0x90ef;if(settings[_0x14747e(0x298)]){if(settings[_0x14747e(0x24d)]){if(telegram2FaApproved(_0x346796)){const _0x4009a4=generateLoginToken(_0x346796);return{'allow':!![],'reason':_0x14747e(0x27e),'token':_0x4009a4};}else return{'allow':![],'reason':_0x14747e(0x23f),'token':null};}else return _0x2f581b=validToken(_0x5cdab0,_0x346796),_0x2f581b['hasOwnProperty']('success')?{'allow':!![],'reason':_0x14747e(0x1c2),'token':_0x5cdab0}:{'allow':![],'reason':_0x14747e(0x23f),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0xecf3b7(0x16a)]){let _0x2a5ec8=[...settings[_0xecf3b7(0x18d)],'::1',_0xecf3b7(0x27c),_0xecf3b7(0x169)];if(_0x2a5ec8[_0xecf3b7(0x21a)](_0x19356f))return _0x1b0e39(_0x25947d);else{_0x2f581b=validToken(_0x25947d,_0x346796);if(_0x2f581b[_0xecf3b7(0x28a)](_0xecf3b7(0x28d)))return _0x1b0e39(_0x25947d);else{if(telegramIpApproved(_0x346796)){const _0x23cf7d=generateToken(_0x346796);return _0x2f581b=_0x1b0e39(_0x25947d),_0x2f581b[_0xecf3b7(0x225)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x23cf7d}:_0x2f581b;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1b0e39(_0x25947d);}function timelyDecrypt(_0x417505,_0x8dc5e2=!![]){const _0x27b281=_0x51b135;if(_0x417505)try{const _0x334d67=crypt['decrypt'](secure[_0x27b281(0x25e)],_0x417505)[_0x27b281(0x1bd)],_0x4d2864=_0x334d67[_0x27b281(0x1b1)]('@')[0x0],_0x15301d=_0x334d67[_0x27b281(0x1b1)]('@')[0x1],_0xc8a3ae=new Date()[_0x27b281(0x211)]();if(_0x8dc5e2){if(_0xc8a3ae-_0x15301d<maxSecretAge*0x3e8)return _0x4d2864;else return![];}else return _0x4d2864;}catch(_0x3c4b5d){return![];}else return![];}const validToken=(_0x4618e3,_0x366f20)=>{const _0x1db9bd=_0x51b135,_0x4c66a5=devices[_0x366f20]['ip'];if(!_0x4618e3)return{'error':_0x1db9bd(0x236)};for(let _0x32a2d7 of blacklist){if(_0x32a2d7[_0x1db9bd(0x1a8)]==_0x4618e3)return{'error':'Token\x20blacklisted'};}let _0x47a07c;try{_0x47a07c=jwt[_0x1db9bd(0x203)](_0x4618e3,secure[_0x1db9bd(0x21c)]+_0x366f20);}catch{return{'error':_0x1db9bd(0x25c)};}if(!_0x47a07c['hasOwnProperty']('clientip')&&!_0x47a07c[_0x1db9bd(0x28a)](_0x1db9bd(0x1fe))||!_0x47a07c['hasOwnProperty'](_0x1db9bd(0x19b)))return{'error':_0x1db9bd(0x199)};if(!_0x47a07c[_0x1db9bd(0x28a)](_0x1db9bd(0x1fe))&&_0x47a07c[_0x1db9bd(0x28a)]('clientip')){const {clientip:_0x2d5380}=_0x47a07c;return _0x4c66a5==_0x2d5380?{'success':_0x1db9bd(0x272)}:{'error':_0x1db9bd(0x1cb)};}else{if(_0x47a07c[_0x1db9bd(0x28a)]('username')&&_0x47a07c[_0x1db9bd(0x28a)](_0x1db9bd(0x256))){const {username:_0x2f603e,clientip:_0x129c4d}=_0x47a07c;return settings[_0x1db9bd(0x1da)]==_0x2f603e&&_0x4c66a5==_0x129c4d?{'success':_0x1db9bd(0x272)}:{'error':_0x1db9bd(0x215)};}}},generateLoginToken=_0x22ccdd=>{const _0x3e1ac6=_0x51b135;if(_0x22ccdd){const _0x4550e3=devices[_0x22ccdd]['ip'];return jwt[_0x3e1ac6(0x1fc)]({'username':settings[_0x3e1ac6(0x1da)],'clientip':_0x4550e3},secure['secret']+_0x22ccdd,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x580bcf=>{const _0x5d1376=_0x51b135;if(_0x580bcf){const _0x3ad380=devices[_0x580bcf]['ip'];return jwt[_0x5d1376(0x1fc)]({'clientip':_0x3ad380},secure['secret']+_0x580bcf,{'expiresIn':devices[_0x580bcf][_0x5d1376(0x294)][_0x5d1376(0x22f)]*0x3c});}else return![];},telegramIpApproved=_0x23c640=>{const _0x16f8ff=_0x51b135;let _0x3a5586=![];return devices[_0x23c640][_0x16f8ff(0x294)]&&devices[_0x23c640][_0x16f8ff(0x294)][_0x16f8ff(0x22f)]!='reject'&&(_0x3a5586=devices[_0x23c640][_0x16f8ff(0x294)][_0x16f8ff(0x256)]==devices[_0x23c640]['ip']&&new Date()[_0x16f8ff(0x211)]()-devices[_0x23c640][_0x16f8ff(0x294)]['timestamp']<devices[_0x23c640]['telegramIpApproval'][_0x16f8ff(0x22f)]*0x3c*0x3e8),_0x3a5586;},telegram2FaApproved=_0x1c1f9b=>{const _0x119b68=_0x51b135;let _0x31519a=![];return devices[_0x1c1f9b][_0x119b68(0x299)]&&devices[_0x1c1f9b][_0x119b68(0x299)][_0x119b68(0x22f)]!=_0x119b68(0x266)&&(_0x31519a=devices[_0x1c1f9b]['telegram2FaApproval']['clientip']==devices[_0x1c1f9b]['ip']&&new Date()['getTime']()-devices[_0x1c1f9b][_0x119b68(0x299)][_0x119b68(0x2a9)]<devices[_0x1c1f9b]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x31519a;},normalizeIP=_0x3c0eb5=>{const _0x2cdb79=_0x51b135;let _0x5b2ed6=null,_0x52324f=null;if(ipaddr[_0x2cdb79(0x1de)](_0x3c0eb5)){const _0x3c58ed=ipaddr[_0x2cdb79(0x1d4)](_0x3c0eb5);_0x3c58ed[_0x2cdb79(0x1ab)]()===_0x2cdb79(0x275)?(_0x3c58ed[_0x2cdb79(0x175)]()&&(_0x5b2ed6=_0x3c58ed[_0x2cdb79(0x1ed)]()[_0x2cdb79(0x214)]()),_0x52324f=_0x3c58ed[_0x2cdb79(0x214)]()):(_0x5b2ed6=_0x3c58ed[_0x2cdb79(0x214)](),_0x52324f=_0x3c58ed[_0x2cdb79(0x258)]()[_0x2cdb79(0x214)]());}return{'show':_0x5b2ed6?_0x5b2ed6:_0x52324f,'store':_0x52324f};};