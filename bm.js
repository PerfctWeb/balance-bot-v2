const _0x2bb2f3=_0xad20;(function(_0x27850b,_0x166369){const _0x40c816=_0xad20,_0x5ad47a=_0x27850b();while(!![]){try{const _0x97d7e3=-parseInt(_0x40c816(0xf4))/0x1*(parseInt(_0x40c816(0x1c0))/0x2)+parseInt(_0x40c816(0x136))/0x3+parseInt(_0x40c816(0x169))/0x4*(parseInt(_0x40c816(0xb2))/0x5)+-parseInt(_0x40c816(0x10d))/0x6+-parseInt(_0x40c816(0x1b1))/0x7*(parseInt(_0x40c816(0xe1))/0x8)+-parseInt(_0x40c816(0x102))/0x9+-parseInt(_0x40c816(0x142))/0xa*(-parseInt(_0x40c816(0x206))/0xb);if(_0x97d7e3===_0x166369)break;else _0x5ad47a['push'](_0x5ad47a['shift']());}catch(_0x44454d){_0x5ad47a['push'](_0x5ad47a['shift']());}}}(_0x52b3,0x9ad16));const _0x37019d=function(){let _0x1a9dbf=!![];return function(_0x3869b0,_0x4baeb3){const _0x4f017e=_0x1a9dbf?function(){const _0x4b9599=_0xad20;if(_0x4baeb3){const _0x172af1=_0x4baeb3[_0x4b9599(0xc6)](_0x3869b0,arguments);return _0x4baeb3=null,_0x172af1;}}:function(){};return _0x1a9dbf=![],_0x4f017e;};}(),_0x59dfc8=_0x37019d(this,function(){const _0x4f415f=_0xad20;return _0x59dfc8['toString']()[_0x4f415f(0xe4)](_0x4f415f(0x229))['toString']()[_0x4f415f(0x144)](_0x59dfc8)[_0x4f415f(0xe4)](_0x4f415f(0x229));});_0x59dfc8();'use strict';process[_0x2bb2f3(0x22a)][_0x2bb2f3(0x157)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x2bb2f3(0x1e3)),low=require('lowdb'),FileSync=require(_0x2bb2f3(0x152)),path=require(_0x2bb2f3(0x103)),crypto=require(_0x2bb2f3(0x13a)),Crypt=require(_0x2bb2f3(0x230))[_0x2bb2f3(0xb7)],RSA=require(_0x2bb2f3(0x230))['RSA'],bcrypt=require(_0x2bb2f3(0x160)),jwt=require(_0x2bb2f3(0xcc)),{Analytics}=require(_0x2bb2f3(0x135)),googleAnalyticsV3Plugin=require(_0x2bb2f3(0x1ea))['default'],ipaddr=require(_0x2bb2f3(0x115)),argv=require(_0x2bb2f3(0xc7))(process[_0x2bb2f3(0x120)][_0x2bb2f3(0x202)](0x2))[_0x2bb2f3(0x120)],uuidRandom=require(_0x2bb2f3(0x137)),Mixpanel=require(_0x2bb2f3(0x156)),axios=require(_0x2bb2f3(0x1e7)),{GraphQLClient,gql}=require(_0x2bb2f3(0x155)),PORT=argv[_0x2bb2f3(0x19b)]||_0x2bb2f3(0x1cd),pattern=/^[0-9]{2,4}$/;!pattern[_0x2bb2f3(0x211)](PORT)&&(console[_0x2bb2f3(0xb4)](_0x2bb2f3(0x17f)+PORT+_0x2bb2f3(0x1a7)),process[_0x2bb2f3(0xc2)](0x1));const HOST=argv[_0x2bb2f3(0x15c)]||null,userID=argv[_0x2bb2f3(0x1ca)]||'';let bbpath=_0x2bb2f3(0xe9),bbpath2='';const botfile='bot.js',configfile=_0x2bb2f3(0x172),settingsfile=_0x2bb2f3(0x1f6),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x2bb2f3(0xde)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2bb2f3(0x1cf)),configpath=userID?bbpath+_0x2bb2f3(0x1b4)+userID+'/':bbpath+_0x2bb2f3(0x1b4),configbackuppath=configpath+_0x2bb2f3(0x1f2);!fs[_0x2bb2f3(0xde)](configpath)&&fs[_0x2bb2f3(0xc3)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x2bb2f3(0xc3)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x2bb2f3(0x12f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2bb2f3(0x20b)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2bb2f3(0xf7)}})[_0x2bb2f3(0x12f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2bb2f3(0x20b)]({'secure':{},'blacklist':[]})[_0x2bb2f3(0x12f)]();let crypt=new Crypt({'md':_0x2bb2f3(0xb9),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x2bb2f3(0x123)](_0x2bb2f3(0x1a4),{'host':'api-eu.mixpanel.com'}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':_0x2bb2f3(0x106)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2bb2f3(0x22e))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2bb2f3(0x22c)),app=express(),http=require('http')[_0x2bb2f3(0x183)](app);app['use'](express[_0x2bb2f3(0xd9)](path[_0x2bb2f3(0x1a0)](__dirname,bbpath2,_0x2bb2f3(0x132)))),app[_0x2bb2f3(0x12a)](express[_0x2bb2f3(0xd9)](path[_0x2bb2f3(0x1a0)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x269fd2,_0x1313ff){const _0x29b57c=_0x2bb2f3;_0x1313ff[_0x29b57c(0x226)](path[_0x29b57c(0x1a0)](__dirname,bbpath2,'build2',_0x29b57c(0xfb)));}),app[_0x2bb2f3(0x13d)]('/:bot',function(_0xa52b78,_0x5858a1){const _0x13dd6c=_0x2bb2f3;_0x5858a1['sendFile'](path[_0x13dd6c(0x1a0)](__dirname,bbpath2,'build',_0x13dd6c(0xfb)));}),app[_0x2bb2f3(0x13d)](_0x2bb2f3(0x140),(_0x52f961,_0x53d0bb)=>{const _0x18471f=_0x2bb2f3;_0x53d0bb['sendFile'](path[_0x18471f(0x1a0)](__dirname,bbpath2,_0x18471f(0xaf),'index.html'));}),app[_0x2bb2f3(0x13d)](_0x2bb2f3(0x13b),(_0xc732d9,_0x3af5f7)=>{const _0x219853=_0x2bb2f3;_0x3af5f7[_0x219853(0x226)](path[_0x219853(0x1a0)](__dirname,bbpath2,_0x219853(0xaf),_0x219853(0xfb)));}),app['get'](_0x2bb2f3(0x1ad),(_0x1e58eb,_0x54834b)=>{const _0x2a78e7=_0x2bb2f3;_0x54834b[_0x2a78e7(0x226)](path[_0x2a78e7(0x1a0)](__dirname,bbpath2,_0x2a78e7(0xaf),'index.html'));}),app[_0x2bb2f3(0x13d)](_0x2bb2f3(0x17e),(_0x316bfb,_0x356e5a)=>{const _0x190720=_0x2bb2f3;_0x356e5a['sendFile'](path[_0x190720(0x1a0)](__dirname,bbpath2,_0x190720(0xaf),_0x190720(0xfb)));}),app[_0x2bb2f3(0x13d)](_0x2bb2f3(0xd3),(_0x518ef5,_0x2248f8)=>{const _0x1ebcf3=_0x2bb2f3;_0x2248f8['sendFile'](path[_0x1ebcf3(0x1a0)](__dirname,bbpath2,_0x1ebcf3(0xaf),'index.html'));}),app[_0x2bb2f3(0x13d)](_0x2bb2f3(0x1c5),(_0x4de23e,_0xec8722)=>{const _0x1dceb5=_0x2bb2f3;_0xec8722['sendFile'](path[_0x1dceb5(0x1a0)](__dirname,bbpath2,_0x1dceb5(0xaf),'index.html'));});if(HOST)http[_0x2bb2f3(0x19d)](PORT,HOST);else http[_0x2bb2f3(0x19d)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require(_0x2bb2f3(0x116));let tgBot;if(settings[_0x2bb2f3(0x20d)]&&settings[_0x2bb2f3(0x20d)]!=''&&settings[_0x2bb2f3(0x1b0)]&&settings[_0x2bb2f3(0x1b0)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x31e595=_0x2bb2f3;console[_0x31e595(0xb4)](''),console['log'](_0x31e595(0x165)),logging(_0x31e595(0xf9)+PORT),console[_0x31e595(0xb4)]('-----------------------------------------------------------------------------------');if(config[_0x31e595(0x17b)]!=0x0)config[_0x31e595(0xc4)](_0x1a6ede=>{const _0x42d98d=_0x31e595;if(_0x1a6ede[_0x42d98d(0x168)]==_0x42d98d(0x1d7)||_0x1a6ede[_0x42d98d(0x168)]==_0x42d98d(0x159))logging(_0x42d98d(0xe0)+_0x1a6ede[_0x42d98d(0x1e2)]+_0x42d98d(0x149)+_0x1a6ede[_0x42d98d(0x146)]),startBot([_0x1a6ede[_0x42d98d(0x1e2)],userID],{'cwd':bbpath},function(_0xb7acc1){if(_0xb7acc1)logging(_0xb7acc1);});else(_0x1a6ede[_0x42d98d(0x168)]=='disabled'||_0x1a6ede['status']=='new-disabled')&&logging(_0x42d98d(0xb6)+_0x1a6ede[_0x42d98d(0x1e2)]+'\x20|\x20'+_0x1a6ede['botname']);});else!newBot&&console[_0x31e595(0xb4)](_0x31e595(0x16b));if(newBot)addBot();console[_0x31e595(0xb4)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x2717ea=_0x2bb2f3;io['on'](_0x2717ea(0x182),_0x1216ed=>{const _0x120a0e=_0x2717ea;let _0x5595de,_0x5d5270,_0x43a89d,_0x58ed52,_0x18e6f5;const _0x2030af=_0x1216ed[_0x120a0e(0xdd)][_0x120a0e(0x181)][_0x120a0e(0xfc)];_0x5d5270=_0x2030af[_0x120a0e(0x228)](/bot[0-9]{3}/);if(_0x5d5270)_0x43a89d=_0x5d5270[0x0][_0x120a0e(0x228)](/[0-9]{3}/);if(_0x43a89d)_0x5595de=_0x43a89d[0x0];else _0x5595de='botmanager';const _0x212a9b=_0x1216ed['handshake'][_0x120a0e(0xea)][_0x120a0e(0xca)];if(!_0x212a9b)_0x1216ed[_0x120a0e(0xfe)](_0x120a0e(0x168),{'publicKey':secure[_0x120a0e(0x14b)]});else{_0x58ed52=timelyDecrypt(_0x212a9b,![]);if(!_0x58ed52)_0x1216ed['emit']('status',{'publicKey':secure['publicKey']});else{_0x18e6f5=normalizeIP(_0x1216ed[_0x120a0e(0x11f)][_0x120a0e(0x15d)])[_0x120a0e(0x10e)];if(!devices[_0x58ed52])devices[_0x58ed52]={'uuid':_0x58ed52,'access':{'token':null}};devices[_0x58ed52]['ip']=_0x18e6f5;const _0x58e0cc=addClient(_0x1216ed['id'],_0x58ed52,_0x5595de);setAccess(_0x58e0cc),emitMessages(),_0x1216ed['on'](_0x120a0e(0x14d),_0x278d2a=>{const _0x82c644=_0x120a0e,_0x181dfc=timelyDecrypt(_0x278d2a[_0x82c644(0xfd)]);if(_0x181dfc){_0x278d2a={'username':_0x278d2a[_0x82c644(0x207)],'password':_0x181dfc},devices[_0x58ed52][_0x82c644(0x1bc)]=validateCredentials(_0x278d2a,_0x58ed52);if(devices[_0x58ed52]['access'][_0x82c644(0x1c1)]==![]&&devices[_0x58ed52][_0x82c644(0x1bc)][_0x82c644(0x212)]==_0x82c644(0x1a8))_0x1216ed[_0x82c644(0xfe)]('status',{'access':devices[_0x58ed52][_0x82c644(0x1bc)]}),loginAccess2FA(_0x58ed52,_0x18e6f5);else{if(devices[_0x58ed52][_0x82c644(0x1bc)][_0x82c644(0x1c1)]==![]&&devices[_0x58ed52][_0x82c644(0x1bc)][_0x82c644(0x212)]==_0x82c644(0x12c))_0x1216ed[_0x82c644(0xfe)](_0x82c644(0x168),{'access':devices[_0x58ed52][_0x82c644(0x1bc)]});else devices[_0x58ed52][_0x82c644(0x1bc)][_0x82c644(0x1c1)]&&devices[_0x58ed52][_0x82c644(0x1bc)][_0x82c644(0x212)]==_0x82c644(0x10c)&&(getClientsWithUuid(_0x58ed52)['forEach'](_0x519558=>{setAccess(_0x519558);}),setTokenRefresh(_0x58ed52),setSessionTimeout('login',_0x58ed52));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x1216ed['on'](_0x120a0e(0x213),()=>{resetPassword();}),_0x1216ed['on'](_0x120a0e(0xdf),_0x37dd4e=>{removeClient(_0x1216ed['id']);});}}});}function initClient(_0x3c5cd5){const _0x579e05=_0x2bb2f3;if(_0x3c5cd5!=_0x579e05(0xf8)&&config[_0x579e05(0xf1)]!=''){if(pid[_0x3c5cd5])pid[_0x3c5cd5]['send']({'function':_0x579e05(0x107),'args':null});}}function getSocket(_0xd02919){const _0x5a670c=_0x2bb2f3;return io[_0x5a670c(0x1d8)]['sockets'][_0x5a670c(0x13d)](_0xd02919);}function setAccess(_0x1bef59){const _0x1a2801=_0x2bb2f3,_0x4f846f=getSocket(_0x1bef59['id']),_0x2b5d80=_0x1bef59[_0x1a2801(0x199)],_0x1a6f2c=_0x1bef59[_0x1a2801(0x1a1)];devices[_0x2b5d80][_0x1a2801(0x1bc)]=validateAccess(devices[_0x2b5d80]['access']['token'],_0x2b5d80),_0x4f846f[_0x1a2801(0x1a0)](_0x2b5d80);if(devices[_0x2b5d80][_0x1a2801(0x1bc)][_0x1a2801(0x1c1)]){_0x4f846f[_0x1a2801(0x1a0)](_0x1a6f2c);if(_0x1a6f2c==_0x1a2801(0xf8))initializeSocketBotManager(_0x4f846f);else initializeSocketBot(_0x4f846f);initClient(_0x1a6f2c);}devices[_0x2b5d80][_0x1a2801(0x1bc)]['token']&&devices[_0x2b5d80][_0x1a2801(0x1bc)][_0x1a2801(0x212)]==_0x1a2801(0x1e9)&&setSessionTimeout(_0x1a2801(0x1d6),_0x2b5d80),devices[_0x2b5d80]['access'][_0x1a2801(0x178)]&&devices[_0x2b5d80][_0x1a2801(0x1bc)][_0x1a2801(0x212)]==_0x1a2801(0x17c)&&setSessionTimeout(_0x1a2801(0x14d),_0x2b5d80),_0x4f846f[_0x1a2801(0xfe)](_0x1a2801(0x168),{'status':_0x1bef59[_0x1a2801(0x1f7)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2b5d80][_0x1a2801(0x1bc)],'externalip':devices[_0x2b5d80]['ip'],'publicKey':secure[_0x1a2801(0x14b)],'userid':settings[_0x1a2801(0xf0)],'validInstallation':validInstallation}),devices[_0x2b5d80][_0x1a2801(0x1bc)][_0x1a2801(0x1c1)]==![]&&devices[_0x2b5d80][_0x1a2801(0x1bc)]['reason']==_0x1a2801(0xbf)&&temporaryAccess2FA(_0x2b5d80,devices[_0x2b5d80]['ip']);}function setSessionTimeout(_0x5181f0,_0x2d5809){const _0x563f62=_0x2bb2f3;let _0x574509;if(_0x5181f0==_0x563f62(0x14d))_0x574509=loginExpiry*0x3c*0x3e8;else _0x574509=devices[_0x2d5809][_0x563f62(0x15e)][_0x563f62(0x1fa)]*0x3c*0x3e8-(new Date()[_0x563f62(0x197)]()-devices[_0x2d5809]['telegramIpApproval'][_0x563f62(0x1f4)]);if(devices[_0x2d5809][_0x563f62(0x138)])clearTimeout(devices[_0x2d5809][_0x563f62(0x138)]);devices[_0x2d5809][_0x563f62(0x138)]=setTimeout(()=>{const _0x3ae8c4=_0x563f62;if(devices[_0x2d5809][_0x3ae8c4(0x161)])clearTimeout(devices[_0x2d5809][_0x3ae8c4(0x161)]);removeSocketListeners(_0x2d5809),addBlacklist(_0x2d5809),devices[_0x2d5809][_0x3ae8c4(0x15e)]=null,devices[_0x2d5809][_0x3ae8c4(0x19f)]=null,devices[_0x2d5809]['access'][_0x3ae8c4(0x178)]=null,devices[_0x2d5809][_0x3ae8c4(0x1bc)]=validateAccess(devices[_0x2d5809][_0x3ae8c4(0x1bc)][_0x3ae8c4(0x178)],_0x2d5809),!(devices[_0x2d5809][_0x3ae8c4(0x1bc)][_0x3ae8c4(0x1c1)]&&devices[_0x2d5809]['access'][_0x3ae8c4(0x212)]==_0x3ae8c4(0x1f3))&&(_0x5181f0==_0x3ae8c4(0x14d)?io['to'](_0x2d5809)[_0x3ae8c4(0xfe)](_0x3ae8c4(0x168),{'access':{'allow':![],'reason':_0x3ae8c4(0x1fd),'token':null}}):io['to'](_0x2d5809)[_0x3ae8c4(0xfe)](_0x3ae8c4(0x168),{'access':{'allow':![],'reason':_0x3ae8c4(0x20a),'token':null}})),devices[_0x2d5809][_0x3ae8c4(0x1bc)]['token']=null;},_0x574509);}function setTokenRefresh(_0x67633){const _0x59bae3=_0x2bb2f3;if(devices[_0x67633]['pidRefreshToken'])clearTimeout(devices[_0x67633]['pidRefreshToken']);devices[_0x67633][_0x59bae3(0x161)]=setTimeout(()=>{const _0x1a36e0=_0x59bae3;getClientsWithUuid(_0x67633)[_0x1a36e0(0x17b)]!=0x0?(devices[_0x67633][_0x1a36e0(0x1bc)]=refreshToken(_0x67633),io['to'](_0x67633)[_0x1a36e0(0xfe)](_0x1a36e0(0x168),{'status':_0x1a36e0(0x1fb),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x67633][_0x1a36e0(0x1bc)],'externalip':devices[_0x67633]['ip'],'publicKey':secure[_0x1a36e0(0x14b)],'validInstallation':validInstallation}),setTokenRefresh(_0x67633)):clearTimeout(devices[_0x67633][_0x1a36e0(0x161)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3760fb){const _0x451925=_0x2bb2f3,_0x31e029=getClient(_0x3760fb['id'])[_0x451925(0x199)];_0x3760fb[_0x451925(0xfe)](_0x451925(0x201),config),_0x3760fb[_0x451925(0xfe)]('settings',cleanSettings()),_0x3760fb['on'](_0x451925(0x1d2),_0x1ada06=>{const _0x270c43=_0x451925;if(validateAccess(_0x1ada06,_0x31e029)[_0x270c43(0x1c1)])addBot();else logging(_0x270c43(0x13c));}),_0x3760fb['on']('update-bot',(_0x1dab9e,_0xad454d)=>{const _0x2faf29=_0x451925;if(validateAccess(_0xad454d,_0x31e029)[_0x2faf29(0x1c1)])toggleBot(_0x1dab9e['botID'],_0x1dab9e['status'],_0x1dab9e[_0x2faf29(0x208)]);else logging(_0x2faf29(0xe6));}),_0x3760fb['on'](_0x451925(0x1b6),(_0x53e708,_0x3f0c6c)=>{const _0x46e833=_0x451925;if(validateAccess(_0x3f0c6c,_0x31e029)['allow'])toggleBotMode(_0x53e708);else logging(_0x46e833(0xe6));}),_0x3760fb['on'](_0x451925(0x175),(_0xbb0daa,_0x36914f)=>{const _0x1daa4f=_0x451925;if(validateAccess(_0x36914f,_0x31e029)[_0x1daa4f(0x1c1)])deleteBot(_0xbb0daa);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x3760fb['on'](_0x451925(0x190),(_0x51bcb5,_0x2f9b22)=>{const _0x2900cd=_0x451925;if(validateAccess(_0x2f9b22,_0x31e029)['allow'])storeSettings(_0x51bcb5,!![]);else logging(_0x2900cd(0xee));}),_0x3760fb['on']('update-bb',_0x338c7d=>{if(validateAccess(_0x338c7d,_0x31e029)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3760fb['on'](_0x451925(0xbd),_0x43a835=>{const _0x106dc7=_0x451925;if(validateAccess(_0x43a835,_0x31e029)[_0x106dc7(0x1c1)])getMessages();else logging(_0x106dc7(0xc1));}),_0x3760fb['on'](_0x451925(0x192),(_0x13798e,_0x1ca310)=>{const _0x504d7c=_0x451925;if(validateAccess(_0x1ca310,_0x31e029)[_0x504d7c(0x1c1)])confirmMessage(_0x13798e);else logging(_0x504d7c(0xec));}),_0x3760fb['on'](_0x451925(0x234),_0x44d23d=>{const _0x173797=_0x451925;if(validateAccess(_0x44d23d,_0x31e029)[_0x173797(0x1c1)]){if(devices[_0x31e029][_0x173797(0x161)])clearTimeout(devices[_0x31e029][_0x173797(0x161)]);if(devices[_0x31e029][_0x173797(0x138)])clearTimeout(devices[_0x31e029]['pidExpireLogin']);removeSocketListeners(getClient(_0x3760fb['id'])[_0x173797(0x199)]),addBlacklist(_0x31e029),devices[_0x31e029][_0x173797(0x15e)]=null,devices[_0x31e029][_0x173797(0x19f)]=null,devices[_0x31e029][_0x173797(0x1bc)][_0x173797(0x178)]=null,io['to'](getClient(_0x3760fb['id'])[_0x173797(0x199)])[_0x173797(0xfe)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x173797(0x171));});}function initializeSocketBot(_0x3e1474){const _0x26f9a9=_0x2bb2f3,_0xf6a000=getClient(_0x3e1474['id'])[_0x26f9a9(0x1a1)],_0x4c91d7=getClient(_0x3e1474['id'])['uuid'];_0x3e1474['on'](_0x26f9a9(0xdb),(_0x653e1d,_0x431e7b)=>{const _0x36e3c5=_0x26f9a9;if(validateAccess(_0x431e7b,_0x4c91d7)[_0x36e3c5(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x36e3c5(0xc5)]({'function':_0x36e3c5(0x1a6),'args':_0x653e1d});}else logging(_0x36e3c5(0x1e4));}),_0x3e1474['on'](_0x26f9a9(0x12b),(_0xd3dea6,_0x10dfc4)=>{const _0x3e6231=_0x26f9a9;if(validateAccess(_0x10dfc4,_0x4c91d7)[_0x3e6231(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x3e6231(0xc5)]({'function':_0x3e6231(0x186),'args':_0xd3dea6});}else logging(_0x3e6231(0xd4));}),_0x3e1474['on'](_0x26f9a9(0x12e),(_0x2561bf,_0x4959dc)=>{const _0x43a925=_0x26f9a9;if(validateAccess(_0x4959dc,_0x4c91d7)[_0x43a925(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x43a925(0xc5)]({'function':_0x43a925(0x18f),'args':_0x2561bf});}else logging(_0x43a925(0x191));}),_0x3e1474['on'](_0x26f9a9(0x131),(_0x4332be,_0x25d283)=>{const _0x4e29d6=_0x26f9a9;if(validateAccess(_0x25d283,_0x4c91d7)[_0x4e29d6(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x4e29d6(0xc5)]({'function':'storeConfiguration','args':_0x4332be});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3e1474['on'](_0x26f9a9(0x10a),(_0xf1b0b9,_0x438b7d)=>{const _0x109981=_0x26f9a9;if(validateAccess(_0x438b7d,_0x4c91d7)[_0x109981(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x109981(0xc5)]({'function':_0x109981(0xfa),'args':_0xf1b0b9});}else logging(_0x109981(0xc8));}),_0x3e1474['on'](_0x26f9a9(0xf3),_0x5814f3=>{const _0x308017=_0x26f9a9;if(validateAccess(_0x5814f3,_0x4c91d7)[_0x308017(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x308017(0xc5)]({'function':_0x308017(0x20f),'args':null});}else logging(_0x308017(0xb3));}),_0x3e1474['on']('place-order',(_0x5afaca,_0x54fd00)=>{const _0x5b2735=_0x26f9a9;if(validateAccess(_0x54fd00,_0x4c91d7)[_0x5b2735(0x1c1)]){if(pid[_0xf6a000])pid[_0xf6a000][_0x5b2735(0xc5)]({'function':_0x5b2735(0xda),'args':_0x5afaca});}else logging(_0x5b2735(0x19a));}),_0x3e1474['on'](_0x26f9a9(0x1d4),_0x19b579=>{const _0x323685=_0x26f9a9;if(validateAccess(_0x19b579,_0x4c91d7)['allow']){if(pid[_0xf6a000])pid[_0xf6a000]['send']({'function':_0x323685(0x22f),'args':null});}else logging(_0x323685(0xbc));}),_0x3e1474['on']('update-bb',_0x80aaf1=>{const _0x3be2cb=_0x26f9a9;if(validateAccess(_0x80aaf1,_0x4c91d7)[_0x3be2cb(0x1c1)])updateBB();else logging(_0x3be2cb(0x11b));}),_0x3e1474['on'](_0x26f9a9(0xbd),_0x15fb43=>{if(validateAccess(_0x15fb43,_0x4c91d7)['allow'])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x3e1474['on'](_0x26f9a9(0x192),(_0x2a58ee,_0x10e634)=>{const _0xe0000b=_0x26f9a9;if(validateAccess(_0x10e634,_0x4c91d7)[_0xe0000b(0x1c1)])confirmMessage(_0x2a58ee);else logging(_0xe0000b(0xec));}),_0x3e1474['on'](_0x26f9a9(0x234),_0x448a06=>{const _0x25d25e=_0x26f9a9;if(validateAccess(_0x448a06,_0x4c91d7)[_0x25d25e(0x1c1)]){if(devices[_0x4c91d7][_0x25d25e(0x161)])clearTimeout(devices[_0x4c91d7][_0x25d25e(0x161)]);if(devices[_0x4c91d7][_0x25d25e(0x138)])clearTimeout(devices[_0x4c91d7][_0x25d25e(0x138)]);removeSocketListeners(getClient(_0x3e1474['id'])[_0x25d25e(0x199)]),addBlacklist(_0x4c91d7),devices[_0x4c91d7][_0x25d25e(0x15e)]=null,devices[_0x4c91d7][_0x25d25e(0x19f)]=null,devices[_0x4c91d7][_0x25d25e(0x1bc)][_0x25d25e(0x178)]=null,io['to'](getClient(_0x3e1474['id'])[_0x25d25e(0x199)])[_0x25d25e(0xfe)](_0x25d25e(0x168),{'access':{'allow':![],'reason':_0x25d25e(0x1ff),'token':null}});}else logging(_0x25d25e(0x171));});}function removeSocketListeners(_0x35e69c){const _0x2ef11d=_0x2bb2f3;getClientsWithUuid(_0x35e69c)[_0x2ef11d(0xc4)](_0x305e51=>{getSocket(_0x305e51['id'])['removeAllListeners']();});}function cleanSettings(){const _0x59cf69=_0x2bb2f3;let _0x28a29c=settings;return settings[_0x59cf69(0x20d)]&&settings[_0x59cf69(0x20d)]!=''&&(_0x28a29c={..._0x28a29c,'telegramToken':'************'}),settings[_0x59cf69(0xff)]&&settings['bbPassword']!=''&&(_0x28a29c={..._0x28a29c,'bbPassword':_0x59cf69(0x1ab)}),_0x28a29c;}function updateBB(){const _0x1dddf5=_0x2bb2f3;installingUpdate=!![],config[_0x1dddf5(0xc4)](_0xc3e933=>{restartBot(_0xc3e933['botID']);}),process['send']({'update':!![]},_0x37158f=>{});}function startBot(_0x4bfa6c,_0x43f462,_0x452d23){const _0x12f2ba=_0x2bb2f3;let _0x1fdf11=![];const _0x583f6e=_0x4bfa6c[0x0];_0x43f462={..._0x43f462,'stdio':[_0x12f2ba(0x1a2),_0x12f2ba(0x1a2),'inherit','ipc']},pid[_0x583f6e]=childProcess[_0x12f2ba(0x1bb)](botfile,_0x4bfa6c,_0x43f462),pid[_0x583f6e]['on']('message',_0x3592c8=>{const _0x1dbd91=_0x12f2ba;switch(Object[_0x1dbd91(0x113)](_0x3592c8)[0x0]){case _0x1dbd91(0x146):updateBotName(_0x583f6e,_0x3592c8[_0x1dbd91(0x146)]);break;case _0x1dbd91(0x1ec):updateBotManager();break;case _0x1dbd91(0x168):updateStatus(_0x583f6e,_0x3592c8['status']);break;case _0x1dbd91(0x208):updateLive(_0x583f6e,_0x3592c8[_0x1dbd91(0x208)]);break;case _0x1dbd91(0x110):updateLive(_0x583f6e,_0x3592c8['started']),io['to'](_0x583f6e)['emit'](_0x1dbd91(0x168),{'access':{'allow':![],'reason':_0x1dbd91(0x20e),'token':null}});break;case _0x1dbd91(0x21d):_0x3592c8[_0x1dbd91(0x21d)]==_0x1dbd91(0x19e)&&restartBot(_0x583f6e);_0x3592c8[_0x1dbd91(0x21d)]==_0x1dbd91(0x13e)&&toggleBot(_0x583f6e,_0x1dbd91(0x1d9),_0x1dbd91(0x16a));break;case _0x1dbd91(0x216):sendTelegram(_0x583f6e,_0x3592c8['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x3592c8[_0x1dbd91(0x13f)]);break;case'function':io['to'](_0x583f6e)[_0x1dbd91(0xfe)](_0x3592c8[_0x1dbd91(0xe5)],_0x3592c8[_0x1dbd91(0xcd)]);break;}}),pid[_0x583f6e]['on'](_0x12f2ba(0x1c6),function(_0xc46ade){if(_0x1fdf11)return;_0x1fdf11=!![],_0x452d23(_0xc46ade);}),pid[_0x583f6e]['on'](_0x12f2ba(0xc2),function(_0x5632ab){const _0x28354e=_0x12f2ba;if(installingUpdate)return;if(_0x1fdf11)return;_0x1fdf11=!![],_0x452d23(null);const _0x12de67=dbConfig['get'](_0x28354e(0x201))['find']({'botID':_0x583f6e})[_0x28354e(0x158)]();_0x12de67&&(_0x12de67[_0x28354e(0x168)]==_0x28354e(0x1d7)||_0x12de67['status']=='new')&&(updateLive(_0x583f6e,'stopped'),logging(_0x28354e(0x21e)+_0x583f6e),startBot([_0x583f6e,userID],{'cwd':bbpath},function(_0x5e3e48){if(_0x5e3e48)logging(_0x5e3e48);}));});}function stopBot(_0x1d2777){const _0x379945=_0x2bb2f3;getClientsWithBotID(_0x1d2777)[_0x379945(0xc4)](_0xc8ac6=>{const _0x3a7e81=_0x379945;getSocket(_0xc8ac6['id'])[_0x3a7e81(0xdf)](!![]),removeClient(_0xc8ac6['id']);}),pid[_0x1d2777]&&(pid[_0x1d2777][_0x379945(0x13e)](),pid[_0x1d2777]=null);}function restartBot(_0x42665e){const _0x28c11b=_0x2bb2f3;if(pid[_0x42665e])pid[_0x42665e][_0x28c11b(0x13e)]();}function addBot(){const _0x44efd1=_0x2bb2f3;let _0x597e77;for(let _0x2d0622=0x1;_0x2d0622<0x3e9;_0x2d0622++){_0x597e77=_0x2d0622[_0x44efd1(0x187)]()['padStart'](0x3,'0');let _0x5dbd35=config[_0x44efd1(0x153)](_0x54d1e2=>_0x54d1e2[_0x44efd1(0x1e2)]==_0x597e77);if(!_0x5dbd35)break;}if(_0x597e77==='1000'){logging(_0x44efd1(0x1b8));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x597e77),dbConfig[_0x44efd1(0x13d)](_0x44efd1(0x201))[_0x44efd1(0x1ed)]({'botID':_0x597e77,'botname':_0x44efd1(0x1eb)+_0x597e77,'status':'new','live':''})['write'](),startBot([_0x597e77,userID],{'cwd':bbpath},function(_0x439440){if(_0x439440)logging(_0x439440);}),config=getConfiguration(),io['to'](_0x44efd1(0xf8))['emit'](_0x44efd1(0x201),config);}function deleteBot(_0x2183b5){const _0x5aa6cb=_0x2bb2f3;getClientsWithBotID(_0x2183b5)['forEach'](_0x45e9a9=>{const _0x2d1a91=_0xad20;getSocket(_0x45e9a9['id'])[_0x2d1a91(0xdf)](!![]),removeClient(_0x45e9a9['id']);}),dbConfig[_0x5aa6cb(0x13d)]('bots')[_0x5aa6cb(0x1bf)]({'botID':_0x2183b5})[_0x5aa6cb(0x12f)](),logging(_0x5aa6cb(0x151)+_0x2183b5),stopBot(_0x2183b5);try{fs['unlinkSync'](path[_0x5aa6cb(0x1a0)](configpath,'bot-'+_0x2183b5+'-config.json')),fs[_0x5aa6cb(0x1c2)](path[_0x5aa6cb(0x1a0)](configpath,_0x5aa6cb(0x14e)+_0x2183b5+_0x5aa6cb(0x100))),fs[_0x5aa6cb(0x1c2)](path[_0x5aa6cb(0x1a0)](configpath,'bot-'+_0x2183b5+_0x5aa6cb(0x1b3))),fs[_0x5aa6cb(0x1c2)](path[_0x5aa6cb(0x1a0)](configpath,_0x5aa6cb(0x14e)+_0x2183b5+_0x5aa6cb(0x221)));}catch(_0x57fd79){if(_0x57fd79)logging(_0x5aa6cb(0x1c7),_0x57fd79);}config=getConfiguration(),io['to']('botmanager')[_0x5aa6cb(0xfe)]('bots',config);}function _0xad20(_0x494db3,_0xdfcaba){const _0x3b644c=_0x52b3();return _0xad20=function(_0x59dfc8,_0x37019d){_0x59dfc8=_0x59dfc8-0xad;let _0x52b3f8=_0x3b644c[_0x59dfc8];return _0x52b3f8;},_0xad20(_0x494db3,_0xdfcaba);}function toggleBot(_0x2b5d65,_0x39f98b,_0x50828a){const _0x1bf789=_0x2bb2f3;dbConfig[_0x1bf789(0x13d)](_0x1bf789(0x201))['find']({'botID':_0x2b5d65})[_0x1bf789(0xd2)]({'status':_0x39f98b})[_0x1bf789(0xd2)]({'live':_0x50828a})[_0x1bf789(0x12f)]();if(_0x39f98b=='enabled'||_0x39f98b==_0x1bf789(0x159))logging(_0x1bf789(0x225)+_0x2b5d65),startBot([_0x2b5d65,userID],{'cwd':bbpath},function(_0x5575ff){if(_0x5575ff)logging(_0x5575ff);});else(_0x39f98b==_0x1bf789(0x1d9)||_0x39f98b==_0x1bf789(0x222))&&(logging(_0x1bf789(0x16e)+_0x2b5d65),stopBot(_0x2b5d65));config=getConfiguration(),io['to'](_0x1bf789(0xf8))[_0x1bf789(0xfe)]('bots',config);}function toggleStatus(_0x3bd5c3){const _0x9bd1fb=_0x2bb2f3;let _0x3dc989=dbConfig[_0x9bd1fb(0x13d)](_0x9bd1fb(0x201))[_0x9bd1fb(0x153)]({'botID':_0x3bd5c3})[_0x9bd1fb(0x158)](),_0x165a2a;if(_0x3dc989['status']===_0x9bd1fb(0x1d7))_0x165a2a=_0x9bd1fb(0x1d9);else{if(_0x3dc989['status']===_0x9bd1fb(0x159))_0x165a2a=_0x9bd1fb(0x222);else{if(_0x3dc989['status']==='new-disabled')_0x165a2a=_0x9bd1fb(0x159);else{if(_0x3dc989['status']===_0x9bd1fb(0x1d9))_0x165a2a='enabled';}}}return _0x165a2a;}function updateStatus(_0x36f986,_0x21290a){const _0x106e5a=_0x2bb2f3;dbConfig[_0x106e5a(0x13d)]('bots')[_0x106e5a(0x153)]({'botID':_0x36f986})[_0x106e5a(0xd2)]({'status':_0x21290a})['write'](),config=getConfiguration(),io['to'](_0x106e5a(0xf8))[_0x106e5a(0xfe)](_0x106e5a(0x201),config);}function updateLive(_0x398389,_0x30ee4e){const _0x1365f9=_0x2bb2f3;dbConfig[_0x1365f9(0x13d)]('bots')[_0x1365f9(0x153)]({'botID':_0x398389})[_0x1365f9(0xd2)]({'live':_0x30ee4e})[_0x1365f9(0x12f)](),config=getConfiguration(),io['to'](_0x1365f9(0xf8))['emit'](_0x1365f9(0x201),config);}function updateBotName(_0x1b9f1e,_0x118a50){const _0x402538=_0x2bb2f3;dbConfig[_0x402538(0x13d)]('bots')['find']({'botID':_0x1b9f1e})['assign']({'botname':_0x118a50})[_0x402538(0x12f)](),config=getConfiguration(),io['to']('botmanager')[_0x402538(0xfe)](_0x402538(0x201),config);}function updateBotManager(){const _0x3c9d33=_0x2bb2f3;config=getConfiguration(),io['to'](_0x3c9d33(0xf8))[_0x3c9d33(0xfe)]('bots',config);}function toggleBotMode(_0xd12c3a){const _0x69d718=_0x2bb2f3;if(pid[_0xd12c3a])pid[_0xd12c3a]['send']({'function':_0x69d718(0x204),'args':null});else{const _0x3e9ebd=configpath+_0x69d718(0x14e)+_0xd12c3a+'-config.json',_0x3b6f72=fs[_0x69d718(0x21b)](_0x3e9ebd),_0x7dc687=JSON['parse'](_0x3b6f72),_0x2ded1f=_0x7dc687[_0x69d718(0x1a1)][0x0][_0x69d718(0x210)];_0x7dc687['bot'][0x0][_0x69d718(0x210)]=!_0x2ded1f;const _0x34ed5f=JSON['stringify'](_0x7dc687,null,0x2);fs[_0x69d718(0x1dc)](_0x3e9ebd,_0x34ed5f),config=getConfiguration(),io['to'](_0x69d718(0xf8))['emit'](_0x69d718(0x201),config);}}function telegramError(_0x2c362c){const _0x289a88=_0x2bb2f3;console[_0x289a88(0xb4)](getTimeStamp()+_0x289a88(0x150));}function validateTelegram(_0x10f02c){const _0x3b5d7b=_0x2bb2f3;if(_0x10f02c[_0x3b5d7b(0x17a)][_0x3b5d7b(0x207)]!=settings[_0x3b5d7b(0x1b0)]&&'@'+_0x10f02c[_0x3b5d7b(0x17a)][_0x3b5d7b(0x207)]!=settings[_0x3b5d7b(0x1b0)])return tgBot[_0x3b5d7b(0xe8)](_0x10f02c['chat']['id'],_0x3b5d7b(0xbb),{'parse_mode':_0x3b5d7b(0x14c)})[_0x3b5d7b(0x19c)](_0x4eeff7=>{telegramError(_0x4eeff7);}),![];return!![];}async function initTelegram(){const _0x348927=_0x2bb2f3;if(tgBot)tgBot[_0x348927(0x101)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x20c132=_0x348927(0x1fe);_0x20c132+='\x0a',_0x20c132+=_0x348927(0xba),_0x20c132+=_0x348927(0x231),_0x20c132+=_0x348927(0x1b5),_0x20c132+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x20c132+=_0x348927(0x141),_0x20c132+=_0x348927(0x1e6),_0x20c132+=_0x348927(0x214),_0x20c132+=_0x348927(0xf5),_0x20c132+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x20c132+=_0x348927(0xb5),_0x20c132+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x20c132+=_0x348927(0x1a3);let _0x400762=_0x348927(0x21c);_0x400762+='\x0a',_0x400762+=_0x20c132,tgBot[_0x348927(0x22d)](/\/start/,_0x3cc389=>{const _0x12d728=_0x348927;if(!validateTelegram(_0x3cc389))return;if(settings[_0x12d728(0x1f8)]!=_0x3cc389[_0x12d728(0x129)]['id'])updateSetting(_0x12d728(0x1f8),_0x3cc389[_0x12d728(0x129)]['id']);updateSetting(_0x12d728(0x1cb),!![]),tgBot['sendMessage'](_0x3cc389[_0x12d728(0x129)]['id'],_0x400762)['catch'](_0xe5fd3=>{telegramError(_0xe5fd3);});}),tgBot[_0x348927(0x22d)](/\/enable/,_0x5162c7=>{const _0x58ee41=_0x348927;if(!validateTelegram(_0x5162c7))return;if(settings[_0x58ee41(0x1f8)]!=_0x5162c7['chat']['id'])updateSetting(_0x58ee41(0x1f8),_0x5162c7['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x5162c7[_0x58ee41(0x129)]['id'],'Notifications\x20enabled')['catch'](_0x385a4a=>{telegramError(_0x385a4a);});}),tgBot[_0x348927(0x22d)](/\/config/,async _0x28e7eb=>{const _0x158e87=_0x348927;if(!validateTelegram(_0x28e7eb))return;tgBot[_0x158e87(0x174)](_0x158e87(0x189)),tgBot['sendMessage'](_0x28e7eb[_0x158e87(0x129)]['id'],_0x158e87(0x18a),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x158e87(0x196)},{'text':_0x158e87(0x154),'callback_data':_0x158e87(0xed)},{'text':_0x158e87(0x200),'callback_data':_0x158e87(0x1db)}]]}})['catch'](_0x113aaf=>{telegramError(_0x113aaf);}),tgBot['on'](_0x158e87(0x189),async _0x363c35=>{const _0x4c413d=_0x158e87,_0xb40b13=_0x363c35[_0x4c413d(0x148)],_0x15f862=_0x363c35[_0x4c413d(0xeb)];tgBot['answerCallbackQuery'](_0x363c35['id'])[_0x4c413d(0x1a9)](async()=>{const _0x9fbd8e=_0x4c413d;_0xb40b13=='orders'&&(updateSetting(_0x9fbd8e(0x16d),_0x9fbd8e(0x196)),updateSetting(_0x9fbd8e(0x1cb),!![]),await tgBot[_0x9fbd8e(0xe8)](_0x15f862['chat']['id'],_0x9fbd8e(0x1aa))[_0x9fbd8e(0x19c)](_0x2cae51=>{telegramError(_0x2cae51);}));_0xb40b13==_0x9fbd8e(0xed)&&(updateSetting(_0x9fbd8e(0x16d),_0x9fbd8e(0xed)),updateSetting(_0x9fbd8e(0x1cb),!![]),await tgBot[_0x9fbd8e(0xe8)](_0x15f862[_0x9fbd8e(0x129)]['id'],_0x9fbd8e(0xd1))[_0x9fbd8e(0x19c)](_0x206bbf=>{telegramError(_0x206bbf);}));_0xb40b13=='all'&&(updateSetting(_0x9fbd8e(0x16d),_0x9fbd8e(0x1db)),updateSetting(_0x9fbd8e(0x1cb),!![]),await tgBot[_0x9fbd8e(0xe8)](_0x15f862['chat']['id'],_0x9fbd8e(0x1e0))[_0x9fbd8e(0x19c)](_0x3ab816=>{telegramError(_0x3ab816);}));if(!settings[_0x9fbd8e(0x1f8)])tgBot[_0x9fbd8e(0xe8)](_0x15f862['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x103bca=>{telegramError(_0x103bca);});}),tgBot[_0x4c413d(0x174)](_0x4c413d(0x189));});}),tgBot[_0x348927(0x22d)](/\/status/,_0x2266af=>{const _0x316199=_0x348927;if(!validateTelegram(_0x2266af))return;const _0x2106bb=getBotsWithMode();let _0x22b9fd=_0x316199(0x117);config[_0x316199(0xc4)](_0x5600f2=>{const _0x6296a=_0x316199,_0x10aa6f=_0x2106bb[_0x6296a(0x153)](_0xe146ff=>_0xe146ff[_0x6296a(0x1e2)]==_0x5600f2[_0x6296a(0x1e2)])[_0x6296a(0x1da)];_0x22b9fd+=_0x6296a(0x1eb)+_0x5600f2[_0x6296a(0x1e2)]+':\x20'+_0x5600f2[_0x6296a(0x168)]+_0x6296a(0x149)+_0x10aa6f+_0x6296a(0x149)+_0x5600f2[_0x6296a(0x208)]+'\x0a';}),_0x22b9fd+='\x0a',_0x22b9fd+=_0x316199(0x15a),_0x22b9fd+=!settings[_0x316199(0x1cb)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x22b9fd+=settings[_0x316199(0x1cb)]?settings[_0x316199(0x16d)]==_0x316199(0x1db)?_0x316199(0x227):_0x316199(0x1c3)+settings[_0x316199(0x16d)]+_0x316199(0x119):'',tgBot[_0x316199(0xe8)](_0x2266af[_0x316199(0x129)]['id'],_0x22b9fd,{'parse_mode':_0x316199(0x14c)})[_0x316199(0x19c)](_0x154d1a=>{telegramError(_0x154d1a);});}),tgBot[_0x348927(0x22d)](/\/restart/,_0x3075ee=>{const _0x150fe9=_0x348927;if(!validateTelegram(_0x3075ee))return;tgBot['removeListener'](_0x150fe9(0x189));const _0x2bccbb=getEnabledBots();if(_0x2bccbb[_0x150fe9(0x17b)]==0x0)tgBot[_0x150fe9(0xe8)](_0x3075ee['chat']['id'],_0x150fe9(0x121))[_0x150fe9(0x19c)](_0x10c3c8=>{telegramError(_0x10c3c8);});else{if(_0x2bccbb[_0x150fe9(0x17b)]>0x1)_0x2bccbb[_0x150fe9(0x1ed)]({'botID':_0x150fe9(0x1db)});let _0x236c75=[],_0x3db2e8=[];const _0x4fa105=_0x2bccbb[_0x150fe9(0x17b)]%0x4==0x0||_0x2bccbb['length']%0x4==0x3||_0x2bccbb[_0x150fe9(0x17b)]%0x3==0x1?0x4:0x3;let _0x125afa=0x0;_0x2bccbb[_0x150fe9(0xc4)]((_0x10c00c,_0x41512b)=>{const _0x40b872=_0x150fe9;if(_0x41512b%_0x4fa105==0x0)_0x3db2e8=[];_0x3db2e8[_0x40b872(0x1ed)]({'text':_0x10c00c[_0x40b872(0x1e2)]=='all'?'All\x20bots':_0x40b872(0x1eb)+_0x10c00c[_0x40b872(0x1e2)],'callback_data':_0x10c00c[_0x40b872(0x1e2)]}),_0x41512b%_0x4fa105==0x0&&(_0x236c75[_0x125afa]=_0x3db2e8,_0x125afa++);}),tgBot[_0x150fe9(0xe8)](_0x3075ee[_0x150fe9(0x129)]['id'],_0x150fe9(0x1ef),{'reply_markup':{'inline_keyboard':_0x236c75}})[_0x150fe9(0x19c)](_0xc3f3ee=>{telegramError(_0xc3f3ee);}),tgBot['on'](_0x150fe9(0x189),async _0x26c1c9=>{const _0xef6a15=_0x150fe9,_0x194422=_0x26c1c9['data'],_0x5cc9a5=_0x26c1c9[_0xef6a15(0xeb)];tgBot[_0xef6a15(0x133)](_0x26c1c9['id'])[_0xef6a15(0x1a9)](async()=>{const _0x7f4df5=_0xef6a15;_0x194422=='all'?config[_0x7f4df5(0xc4)](_0x139f64=>{const _0x192c2c=_0x7f4df5;restartBot(_0x139f64[_0x192c2c(0x1e2)]);}):restartBot(_0x194422);}),tgBot[_0xef6a15(0x174)](_0xef6a15(0x189));});}}),tgBot[_0x348927(0x22d)](/\/on/,_0x91cacf=>{const _0x1797d9=_0x348927;if(!validateTelegram(_0x91cacf))return;tgBot[_0x1797d9(0x174)](_0x1797d9(0x189));const _0x4e1b6e=getDisabledBots();if(_0x4e1b6e['length']==0x0)tgBot[_0x1797d9(0xe8)](_0x91cacf['chat']['id'],_0x1797d9(0xad))[_0x1797d9(0x19c)](_0x2591c0=>{telegramError(_0x2591c0);});else{if(_0x4e1b6e['length']>0x1)_0x4e1b6e[_0x1797d9(0x1ed)]({'botID':_0x1797d9(0x1db)});let _0x540b1c=[],_0x5738f1=[];const _0x43f254=_0x4e1b6e[_0x1797d9(0x17b)]%0x4==0x0||_0x4e1b6e[_0x1797d9(0x17b)]%0x4==0x3||_0x4e1b6e[_0x1797d9(0x17b)]%0x3==0x1?0x4:0x3;let _0x31944f=0x0;_0x4e1b6e[_0x1797d9(0xc4)]((_0x2654ee,_0x1153b7)=>{const _0x4e6cff=_0x1797d9;if(_0x1153b7%_0x43f254==0x0)_0x5738f1=[];_0x5738f1[_0x4e6cff(0x1ed)]({'text':_0x2654ee[_0x4e6cff(0x1e2)]==_0x4e6cff(0x1db)?_0x4e6cff(0x1e5):_0x4e6cff(0x1eb)+_0x2654ee[_0x4e6cff(0x1e2)],'callback_data':_0x2654ee[_0x4e6cff(0x1e2)]}),_0x1153b7%_0x43f254==0x0&&(_0x540b1c[_0x31944f]=_0x5738f1,_0x31944f++);}),tgBot[_0x1797d9(0xe8)](_0x91cacf[_0x1797d9(0x129)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x540b1c}})[_0x1797d9(0x19c)](_0x5e0b8f=>{telegramError(_0x5e0b8f);}),tgBot['on'](_0x1797d9(0x189),async _0x65d6be=>{const _0x40601e=_0x1797d9,_0x3e7686=_0x65d6be[_0x40601e(0x148)],_0x1fa7be=_0x65d6be[_0x40601e(0xeb)];tgBot[_0x40601e(0x133)](_0x65d6be['id'])['then'](async()=>{const _0x45670c=_0x40601e;_0x3e7686==_0x45670c(0x1db)?(tgBot[_0x45670c(0xe8)](_0x1fa7be[_0x45670c(0x129)]['id'],_0x45670c(0x18c))[_0x45670c(0x19c)](_0x1c0118=>{telegramError(_0x1c0118);}),_0x4e1b6e[_0x45670c(0xc4)](_0x1e16b4=>{const _0x32502b=_0x45670c;if(_0x1e16b4[_0x32502b(0x1e2)]!='all')toggleBot(_0x1e16b4['botID'],toggleStatus(_0x1e16b4['botID']),_0x32502b(0x16a));})):(tgBot[_0x45670c(0xe8)](_0x1fa7be[_0x45670c(0x129)]['id'],_0x45670c(0x1ac)+_0x3e7686)[_0x45670c(0x19c)](_0x2fae55=>{telegramError(_0x2fae55);}),toggleBot(_0x3e7686,toggleStatus(_0x3e7686),_0x45670c(0x16a)));}),tgBot[_0x40601e(0x174)](_0x40601e(0x189));});}}),tgBot[_0x348927(0x22d)](/\/off/,_0xa79744=>{const _0x197a5d=_0x348927;if(!validateTelegram(_0xa79744))return;tgBot[_0x197a5d(0x174)]('callback_query');const _0x1ec331=getEnabledBots();if(_0x1ec331[_0x197a5d(0x17b)]==0x0)tgBot['sendMessage'](_0xa79744[_0x197a5d(0x129)]['id'],_0x197a5d(0x121))[_0x197a5d(0x19c)](_0x46ceae=>{telegramError(_0x46ceae);});else{if(_0x1ec331['length']>0x1)_0x1ec331['push']({'botID':_0x197a5d(0x1db)});let _0x2f6dc0=[],_0x32fe0a=[];const _0x29d8b3=_0x1ec331['length']%0x4==0x0||_0x1ec331[_0x197a5d(0x17b)]%0x4==0x3||_0x1ec331[_0x197a5d(0x17b)]%0x3==0x1?0x4:0x3;let _0x445eb7=0x0;_0x1ec331[_0x197a5d(0xc4)]((_0x316c44,_0x1b150b)=>{const _0x1c3d7f=_0x197a5d;if(_0x1b150b%_0x29d8b3==0x0)_0x32fe0a=[];_0x32fe0a[_0x1c3d7f(0x1ed)]({'text':_0x316c44[_0x1c3d7f(0x1e2)]==_0x1c3d7f(0x1db)?'All\x20bots':_0x1c3d7f(0x1eb)+_0x316c44['botID'],'callback_data':_0x316c44[_0x1c3d7f(0x1e2)]}),_0x1b150b%_0x29d8b3==0x0&&(_0x2f6dc0[_0x445eb7]=_0x32fe0a,_0x445eb7++);}),tgBot['sendMessage'](_0xa79744['chat']['id'],_0x197a5d(0x1d0),{'reply_markup':{'inline_keyboard':_0x2f6dc0}})['catch'](_0x4b0aed=>{telegramError(_0x4b0aed);}),tgBot['on'](_0x197a5d(0x189),async _0x360fa8=>{const _0x5653a3=_0x197a5d,_0x2676f9=_0x360fa8[_0x5653a3(0x148)],_0x339794=_0x360fa8[_0x5653a3(0xeb)];tgBot[_0x5653a3(0x133)](_0x360fa8['id'])[_0x5653a3(0x1a9)](async()=>{const _0x78e60=_0x5653a3;_0x2676f9==_0x78e60(0x1db)?(tgBot[_0x78e60(0xe8)](_0x339794[_0x78e60(0x129)]['id'],_0x78e60(0xf2))[_0x78e60(0x19c)](_0x38969e=>{telegramError(_0x38969e);}),_0x1ec331[_0x78e60(0xc4)](_0x5739d1=>{const _0x5c8dc7=_0x78e60;if(_0x5739d1[_0x5c8dc7(0x1e2)]!='all')toggleBot(_0x5739d1['botID'],toggleStatus(_0x5739d1[_0x5c8dc7(0x1e2)]),_0x5c8dc7(0x16a));})):(tgBot[_0x78e60(0xe8)](_0x339794['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2676f9)[_0x78e60(0x19c)](_0x4b6287=>{telegramError(_0x4b6287);}),toggleBot(_0x2676f9,toggleStatus(_0x2676f9),_0x78e60(0x16a)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x348927(0x22d)](/\/portfolio/,_0x50b267=>{const _0x40c866=_0x348927;if(!validateTelegram(_0x50b267))return;tgBot['removeListener'](_0x40c866(0x189));const _0x453173=getEnabledBots();if(_0x453173['length']==0x0)tgBot[_0x40c866(0xe8)](_0x50b267[_0x40c866(0x129)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x40c866(0x19c)](_0x33bf04=>{telegramError(_0x33bf04);});else{if(_0x453173[_0x40c866(0x17b)]>0x1){let _0xe29dbd=[],_0x40fd9=[];const _0x21517f=_0x453173[_0x40c866(0x17b)]%0x4==0x0||_0x453173[_0x40c866(0x17b)]%0x4==0x3||_0x453173[_0x40c866(0x17b)]%0x3==0x1?0x4:0x3;let _0x514add=0x0;_0x453173[_0x40c866(0xc4)]((_0x11c229,_0x45902f)=>{const _0x257dff=_0x40c866;if(_0x45902f%_0x21517f==0x0)_0x40fd9=[];_0x40fd9[_0x257dff(0x1ed)]({'text':_0x257dff(0x1eb)+_0x11c229[_0x257dff(0x1e2)],'callback_data':_0x11c229['botID']}),_0x45902f%_0x21517f==0x0&&(_0xe29dbd[_0x514add]=_0x40fd9,_0x514add++);}),tgBot['sendMessage'](_0x50b267[_0x40c866(0x129)]['id'],_0x40c866(0xcb),{'reply_markup':{'inline_keyboard':_0xe29dbd}})['catch'](_0xcc4b33=>{telegramError(_0xcc4b33);}),tgBot['on'](_0x40c866(0x189),async _0xfab0dc=>{const _0x46ff29=_0x40c866,_0x1f7861=_0xfab0dc[_0x46ff29(0x148)],_0x5f147e=_0xfab0dc[_0x46ff29(0xeb)];tgBot[_0x46ff29(0x133)](_0xfab0dc['id'])[_0x46ff29(0x1a9)](async()=>{const _0x31d403=_0x46ff29;if(pid[_0x1f7861])pid[_0x1f7861][_0x31d403(0xc5)]({'function':_0x31d403(0x236),'args':null});}),tgBot[_0x46ff29(0x174)]('callback_query');});}else{const _0x458797=_0x453173[0x0][_0x40c866(0x1e2)];if(pid[_0x458797])pid[_0x458797][_0x40c866(0xc5)]({'function':_0x40c866(0x236),'args':null});}}}),tgBot[_0x348927(0x22d)](/\/update/,async _0x36c856=>{const _0x4ea747=_0x348927;if(!validateTelegram(_0x36c856))return;tgBot[_0x4ea747(0x174)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x4ea747(0xe8)](_0x36c856[_0x4ea747(0x129)]['id'],_0x4ea747(0x233))[_0x4ea747(0x19c)](_0x3595b8=>{telegramError(_0x3595b8);});else!validInstallation?tgBot[_0x4ea747(0xe8)](_0x36c856[_0x4ea747(0x129)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x4ea747(0x19c)](_0x2adb65=>{telegramError(_0x2adb65);}):(tgBot[_0x4ea747(0xe8)](_0x36c856[_0x4ea747(0x129)]['id'],_0x4ea747(0x1dd),{'reply_markup':{'inline_keyboard':[[{'text':_0x4ea747(0xd7),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x5675d7=>{telegramError(_0x5675d7);}),tgBot['on']('callback_query',async _0x3e66ad=>{const _0x6b0469=_0x4ea747,_0x2aaf95=_0x3e66ad[_0x6b0469(0x148)],_0x1639fa=_0x3e66ad[_0x6b0469(0xeb)];tgBot[_0x6b0469(0x133)](_0x3e66ad['id'])[_0x6b0469(0x1a9)](async()=>{const _0x3e2355=_0x6b0469;_0x2aaf95=='yes'&&(await tgBot[_0x3e2355(0xe8)](_0x1639fa[_0x3e2355(0x129)]['id'],_0x3e2355(0x126))['catch'](_0x9f41c3=>{telegramError(_0x9f41c3);}),updateBB());_0x2aaf95=='no'&&await tgBot[_0x3e2355(0xe8)](_0x1639fa[_0x3e2355(0x129)]['id'],_0x3e2355(0x179))['catch'](_0x58fd05=>{telegramError(_0x58fd05);});if(!settings['telegramChatId'])tgBot['sendMessage'](_0x1639fa[_0x3e2355(0x129)]['id'],_0x3e2355(0x128))[_0x3e2355(0x19c)](_0x1ac926=>{telegramError(_0x1ac926);});}),tgBot[_0x6b0469(0x174)](_0x6b0469(0x189));}));}),tgBot['onText'](/\/toggle/,_0x4c4055=>{const _0x35b269=_0x348927;if(!validateTelegram(_0x4c4055))return;tgBot[_0x35b269(0x174)](_0x35b269(0x189));const _0x466c3e=getBotsWithMode();if(_0x466c3e[_0x35b269(0x17b)]==0x0)tgBot[_0x35b269(0xe8)](_0x4c4055[_0x35b269(0x129)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x1032f8=>{telegramError(_0x1032f8);});else{let _0x27c423=[],_0x430fb6=[];const _0x54142d=0x2;let _0x3defb5=0x0;_0x466c3e[_0x35b269(0xc4)]((_0x547b86,_0x19c5d4)=>{const _0x3a114e=_0x35b269;if(_0x19c5d4%_0x54142d==0x0)_0x430fb6=[];_0x430fb6[_0x3a114e(0x1ed)]({'text':'Bot\x20'+_0x547b86[_0x3a114e(0x1e2)]+'\x20('+_0x547b86[_0x3a114e(0x1da)]+')','callback_data':_0x547b86[_0x3a114e(0x1e2)]}),_0x19c5d4%_0x54142d==0x0&&(_0x27c423[_0x3defb5]=_0x430fb6,_0x3defb5++);}),tgBot[_0x35b269(0xe8)](_0x4c4055['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x27c423}})['catch'](_0x120d7c=>{telegramError(_0x120d7c);}),tgBot['on']('callback_query',async _0x4c8305=>{const _0xfd6acc=_0x35b269,_0xcd6b6c=_0x4c8305[_0xfd6acc(0x148)],_0xab273f=_0x4c8305[_0xfd6acc(0xeb)];tgBot[_0xfd6acc(0x133)](_0x4c8305['id'])['then'](async()=>{const _0x58463c=_0xfd6acc,_0x41d951=_0x466c3e[_0x58463c(0x153)](_0x5c543a=>_0x5c543a[_0x58463c(0x1e2)]==_0xcd6b6c),_0x592002=_0x41d951[_0x58463c(0x1da)]=='auto'?'manual':'auto';tgBot[_0x58463c(0xe8)](_0xab273f[_0x58463c(0x129)]['id'],_0x58463c(0x122)+_0xcd6b6c+_0x58463c(0x15f)+_0x592002+_0x58463c(0x14a))[_0x58463c(0x19c)](_0x465e0a=>{telegramError(_0x465e0a);}),toggleBotMode(_0xcd6b6c);}),tgBot[_0xfd6acc(0x174)](_0xfd6acc(0x189));});}}),tgBot[_0x348927(0x22d)](/\/names/,_0x4a5d4e=>{const _0x43522a=_0x348927;if(!validateTelegram(_0x4a5d4e))return;let _0x5c1b24='';config[_0x43522a(0xc4)](_0x3851c0=>{const _0x53ea55=_0x43522a;_0x5c1b24+=_0x53ea55(0x1eb)+_0x3851c0['botID']+':\x20'+_0x3851c0[_0x53ea55(0x146)]+'\x0a';}),tgBot[_0x43522a(0xe8)](_0x4a5d4e[_0x43522a(0x129)]['id'],_0x5c1b24,{'parse_mode':_0x43522a(0x14c)})[_0x43522a(0x19c)](_0x39992d=>{telegramError(_0x39992d);});}),tgBot['onText'](/\/disable/,_0x526eb5=>{const _0x50b07d=_0x348927;if(!validateTelegram(_0x526eb5))return;tgBot[_0x50b07d(0xe8)](_0x526eb5[_0x50b07d(0x129)]['id'],_0x50b07d(0x235))['catch'](_0x2000b5=>{telegramError(_0x2000b5);}),updateSetting(_0x50b07d(0x1cb),![]);}),tgBot[_0x348927(0x22d)](/\/help/,_0x295563=>{const _0x292ab4=_0x348927;if(!validateTelegram(_0x295563))return;tgBot[_0x292ab4(0xe8)](_0x295563['chat']['id'],_0x20c132)[_0x292ab4(0x19c)](_0x12f465=>{telegramError(_0x12f465);});}),tgBot['on'](_0x348927(0x1f0),_0x251f16=>{const _0x3ee211=_0x348927;_0x251f16['toString']()['includes'](_0x3ee211(0x1f5))&&(logging(_0x3ee211(0x1c8)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x3ee211(0xf8))['emit'](_0x3ee211(0x209),_0x3ee211(0x1c8)));}),process[_0x348927(0x112)](_0x348927(0x125),()=>{const _0x93c427=_0x348927;if(tgBot)tgBot[_0x93c427(0x101)]();process[_0x93c427(0xc2)](0x1);}),process[_0x348927(0x112)](_0x348927(0x17d),()=>{const _0x37a9aa=_0x348927;if(tgBot)tgBot[_0x37a9aa(0x101)]();process[_0x37a9aa(0xc2)](0x1);});}}function disableTelegram(){const _0x164edd=_0x2bb2f3;tgBot&&(tgBot[_0x164edd(0x101)](),tgBot=null);}function sendTelegram(_0x48ccd3,_0x513335){const _0xf40a01=_0x2bb2f3;if(settings[_0xf40a01(0x1cb)]){if(settings[_0xf40a01(0x16d)]==_0xf40a01(0x1db)||(_0x513335[_0xf40a01(0x1ba)]=='error'||_0x513335[_0xf40a01(0x1ba)]==_0xf40a01(0x1d1))&&settings[_0xf40a01(0x16d)]=='alerts'||_0x513335[_0xf40a01(0x1ba)]==_0xf40a01(0xdc)&&settings[_0xf40a01(0x16d)]==_0xf40a01(0x196)){if(tgBot&&settings['telegramChatId']){if(_0x513335[_0xf40a01(0x1b7)])tgBot[_0xf40a01(0xe8)](settings[_0xf40a01(0x1f8)],_0x513335['botname']+_0xf40a01(0x177)+_0x513335[_0xf40a01(0x1ee)])[_0xf40a01(0x19c)](_0x3dfa5d=>{telegramError(_0x3dfa5d);});else tgBot[_0xf40a01(0xe8)](settings[_0xf40a01(0x1f8)],_0xf40a01(0x1eb)+_0x48ccd3+_0xf40a01(0x177)+_0x513335[_0xf40a01(0x1ee)])[_0xf40a01(0x19c)](_0x34f8ad=>{telegramError(_0x34f8ad);});}}}}async function sendTelegramMsg(_0x5a8800,_0xa70f51=_0x2bb2f3(0x14c)){const _0x10ee5a=_0x2bb2f3;return settings['telegramEnabled']&&tgBot&&settings[_0x10ee5a(0x1f8)]?(await tgBot[_0x10ee5a(0xe8)](settings[_0x10ee5a(0x1f8)],_0x5a8800,{'parse_mode':_0xa70f51})[_0x10ee5a(0x19c)](_0x55cf9a=>{telegramError(_0x55cf9a);}),!![]):![];}function getDeviceWithIp(_0x18354e){const _0x4a3e26=_0x2bb2f3;return devices[_0x4a3e26(0x153)](_0x592a57=>_0x592a57['ip']===_0x18354e);}function temporaryAccess2FA(_0x4138d6,_0x5411de){const _0x5b788c=_0x2bb2f3;let _0x5deac0=new Date(),_0xf21276=![];if(lastIpApproval){if(_0x5deac0-lastIpApproval<0x1388)_0xf21276=!![];}lastIpApproval=new Date();if(_0xf21276)return;tgBot&&settings[_0x5b788c(0x1f8)]&&(tgBot[_0x5b788c(0x174)](_0x5b788c(0x189)),tgBot['sendMessage'](settings[_0x5b788c(0x1f8)],_0x5b788c(0x170)+normalizeIP(_0x5411de)[_0x5b788c(0xae)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5b788c(0x193),'callback_data':'5'},{'text':_0x5b788c(0x166),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x5b788c(0x176),'callback_data':_0x5b788c(0x176)}]]}})[_0x5b788c(0x19c)](_0x42c5f8=>{telegramError(_0x42c5f8);}),tgBot['on']('callback_query',async _0x521094=>{const _0x58a433=_0x5b788c,_0x1dfd9c=_0x521094[_0x58a433(0x148)],_0x50d4cc=_0x521094[_0x58a433(0xeb)];tgBot[_0x58a433(0x133)](_0x521094['id'])[_0x58a433(0x1a9)](async()=>{const _0x2796bc=_0x58a433;devices[_0x4138d6][_0x2796bc(0x15e)]={'clientip':_0x5411de,'timestamp':new Date()['getTime'](),'expiry':_0x1dfd9c},_0x1dfd9c!=_0x2796bc(0x176)?(await tgBot[_0x2796bc(0xe8)](_0x50d4cc[_0x2796bc(0x129)]['id'],_0x2796bc(0x108)+_0x1dfd9c+_0x2796bc(0xe3),{'parse_mode':_0x2796bc(0x14c)})[_0x2796bc(0x19c)](_0x36253a=>{telegramError(_0x36253a);}),io['to'](_0x4138d6)[_0x2796bc(0xfe)]('status',{'access':{'allow':![],'reason':_0x2796bc(0x20e),'token':null}})):(await tgBot[_0x2796bc(0xe8)](_0x50d4cc[_0x2796bc(0x129)]['id'],_0x2796bc(0xd5))['catch'](_0x14b3de=>{telegramError(_0x14b3de);}),io['to'](_0x4138d6)[_0x2796bc(0xfe)](_0x2796bc(0x168),{'access':{'allow':![],'reason':_0x2796bc(0x11e),'token':null}}));}),tgBot[_0x58a433(0x174)]('callback_query');}));}function loginAccess2FA(_0x1bad8e,_0x420d3c){const _0x6a3c3e=_0x2bb2f3;tgBot&&settings['telegramChatId']&&(tgBot[_0x6a3c3e(0x174)](_0x6a3c3e(0x189)),tgBot[_0x6a3c3e(0xe8)](settings[_0x6a3c3e(0x1f8)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x420d3c)[_0x6a3c3e(0xae)]+'</b>\x20?',{'parse_mode':_0x6a3c3e(0x14c),'reply_markup':{'inline_keyboard':[[{'text':_0x6a3c3e(0xd6),'callback_data':loginExpiry},{'text':_0x6a3c3e(0x176),'callback_data':'reject'}]]}})[_0x6a3c3e(0x19c)](_0xeb6302=>{telegramError(_0xeb6302);}),tgBot['on'](_0x6a3c3e(0x189),async _0x3eef25=>{const _0x149630=_0x6a3c3e,_0x16ce11=_0x3eef25[_0x149630(0x148)],_0x27f97f=_0x3eef25['message'];tgBot[_0x149630(0x133)](_0x3eef25['id'])['then'](async()=>{const _0x32d4c9=_0x149630;devices[_0x1bad8e][_0x32d4c9(0x19f)]={'clientip':_0x420d3c,'timestamp':new Date()[_0x32d4c9(0x197)](),'expiry':_0x16ce11},_0x16ce11!=_0x32d4c9(0x176)?(await tgBot[_0x32d4c9(0xe8)](_0x27f97f['chat']['id'],'Login\x20accepted',{'parse_mode':_0x32d4c9(0x14c)})[_0x32d4c9(0x19c)](_0xb6b82b=>{telegramError(_0xb6b82b);}),io['to'](_0x1bad8e)[_0x32d4c9(0xfe)](_0x32d4c9(0x168),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x32d4c9(0xe8)](_0x27f97f[_0x32d4c9(0x129)]['id'],'Login\x20rejected')[_0x32d4c9(0x19c)](_0x1b460a=>{telegramError(_0x1b460a);}),io['to'](_0x1bad8e)[_0x32d4c9(0xfe)](_0x32d4c9(0x168),{'access':{'allow':![],'reason':_0x32d4c9(0x224),'token':null}}));}),tgBot[_0x149630(0x174)](_0x149630(0x189));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3074f5=_0x2bb2f3;return dbConfig[_0x3074f5(0x13d)]('bots')[_0x3074f5(0x162)]('botID')[_0x3074f5(0x184)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x279ebe=_0x2bb2f3;return dbConfig[_0x279ebe(0x13d)](_0x279ebe(0x201))['sortBy'](_0x279ebe(0x1e2))['filter']({'status':_0x279ebe(0x1d9)})[_0x279ebe(0x158)]()||[];}function getBotsWithMode(){const _0x289abd=_0x2bb2f3,_0x60864=dbConfig[_0x289abd(0x13d)](_0x289abd(0x201))[_0x289abd(0x162)]('botID')[_0x289abd(0x158)]()||[];return _0x60864[_0x289abd(0xc4)](_0x56ab0e=>{const _0x1a37f4=_0x289abd,_0x58f5de=configpath+_0x1a37f4(0x14e)+_0x56ab0e[_0x1a37f4(0x1e2)]+_0x1a37f4(0x163),_0x47a2c8=fs[_0x1a37f4(0xde)](_0x58f5de);if(_0x47a2c8){const _0x5a1590=fs[_0x1a37f4(0x21b)](_0x58f5de);try{const _0x49d885=JSON[_0x1a37f4(0x18d)](_0x5a1590),_0x46a6f0=_0x49d885?_0x49d885[_0x1a37f4(0x1a1)][0x0][_0x1a37f4(0x210)]:![];_0x56ab0e[_0x1a37f4(0x1da)]=_0x46a6f0?_0x1a37f4(0x1c9):'manual';}catch(_0x4e9ffa){_0x56ab0e[_0x1a37f4(0x1da)]=_0x1a37f4(0x218);}}else _0x56ab0e[_0x1a37f4(0x1da)]=_0x1a37f4(0x218);}),_0x60864;}async function initUser(){const _0x449ca3=_0x2bb2f3;if(!settings[_0x449ca3(0xf0)]){const _0x430d51=uuidRandom();mixpanel[_0x449ca3(0xb8)](_0x430d51),updateSetting(_0x449ca3(0xf0),_0x430d51);}}async function initSecure(){const _0x3ef165=_0x2bb2f3;let _0x567724=getSecure();if(!_0x567724['hasOwnProperty'](_0x3ef165(0x143))){let _0xfc238=await generateKeys();_0x567724['publicKey']=_0xfc238['publicKey'],_0x567724[_0x3ef165(0x1cc)]=_0xfc238[_0x3ef165(0x1cc)],_0x567724[_0x3ef165(0x143)]=crypto[_0x3ef165(0x180)](0x20)['toString']('hex');;storeSecure(_0x567724);}}function getSettings(){const _0x42eba0=_0x2bb2f3;return dbSettings['get']('settings')[_0x42eba0(0x158)]()||{};}function getSecure(){const _0x2576fc=_0x2bb2f3;return dbSecure[_0x2576fc(0x13d)](_0x2576fc(0x195))[_0x2576fc(0x158)]()||{};}function getBlacklist(){const _0x345ae9=_0x2bb2f3;return dbSecure['get'](_0x345ae9(0xb1))[_0x345ae9(0x158)]()||[];}function broadcastToBots(_0x801b1a,_0x49400d){const _0x3f4c75=_0x2bb2f3;config[_0x3f4c75(0xc4)](_0x1acb5e=>{const _0xa7cdf8=_0x3f4c75;if(_0x1acb5e['status']==_0xa7cdf8(0x1d7)&&_0x1acb5e[_0xa7cdf8(0x208)]==_0xa7cdf8(0x10f)){if(pid[_0x1acb5e[_0xa7cdf8(0x1e2)]])pid[_0x1acb5e[_0xa7cdf8(0x1e2)]][_0xa7cdf8(0xc5)]({[_0x801b1a]:_0x49400d});}});}function storeSettings(_0x4dd7a6,_0x5dbbf5=![]){const _0x256a36=_0x2bb2f3;_0x4dd7a6={...settings,..._0x4dd7a6};if(_0x5dbbf5&&_0x4dd7a6[_0x256a36(0xff)]!=_0x256a36(0x1ab)&&_0x4dd7a6[_0x256a36(0xff)]!=''){const _0x3b64fb=crypt[_0x256a36(0x185)](secure[_0x256a36(0x1cc)],_0x4dd7a6['bbPassword'])[_0x256a36(0xeb)][_0x256a36(0x232)]('@')[0x0],_0x3af30b=bcrypt[_0x256a36(0x1b2)](_0x3b64fb,saltRounds);_0x4dd7a6={..._0x4dd7a6,'bbPassword':_0x3af30b};}if(_0x5dbbf5&&_0x4dd7a6['telegramToken']!=_0x256a36(0x1ab)&&_0x4dd7a6[_0x256a36(0x20d)]!=''){const _0x2df45b=crypt[_0x256a36(0x185)](secure[_0x256a36(0x1cc)],_0x4dd7a6[_0x256a36(0x20d)])[_0x256a36(0xeb)][_0x256a36(0x232)]('@')[0x0];_0x4dd7a6={..._0x4dd7a6,'telegramToken':_0x2df45b};}const _0x57e0b9=_0x4dd7a6[_0x256a36(0x20d)]!=_0x256a36(0x1ab)&&_0x4dd7a6[_0x256a36(0x20d)]!=settings['telegramToken']||_0x4dd7a6[_0x256a36(0x1b0)]!=settings['telegramUsername'],_0x483d28=_0x4dd7a6[_0x256a36(0x20d)]==''||_0x4dd7a6['telegramUsername']=='';if(_0x57e0b9)_0x4dd7a6[_0x256a36(0x16d)]=_0x256a36(0x1db);for(const [_0x187457,_0x353c5b]of Object[_0x256a36(0x105)](_0x4dd7a6)){if(_0x187457==_0x256a36(0x20d)&&_0x353c5b==_0x256a36(0x1ab)){_0x4dd7a6['telegramToken']=settings[_0x256a36(0x20d)];continue;};if(_0x187457==_0x256a36(0xff)&&_0x353c5b==_0x256a36(0x1ab)){_0x4dd7a6['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x256a36(0x20c)](_0x256a36(0x1e8)+_0x187457,_0x353c5b)['write']();}settings=_0x4dd7a6,io['to'](_0x256a36(0xf8))[_0x256a36(0xfe)](_0x256a36(0x217),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x57e0b9&&!_0x483d28)initTelegram();if(_0x57e0b9&&_0x483d28)disableTelegram();getAllClients()[_0x256a36(0xc4)](_0x4e0bf3=>{const _0x22ee6d=_0x256a36;getSocket(_0x4e0bf3['id'])['emit'](_0x22ee6d(0x168),{'access':{'allow':![],'reason':_0x22ee6d(0x20e),'token':null}});});}function _0x52b3(){const _0x2e4f94=[',\x20must\x20be\x20a\x204\x20digit\x20number','2FA\x20login\x20required','then','Ok,\x20will\x20send\x20order\x20notifications\x20only','************','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','/:bot/coins','ipv6','request','telegramUsername','78001cSKDzf','hashSync','-performance.json','config/','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','toggle-bot-mode','showname','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','name','type','fork','access','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','isValid','remove','78962dAaUcC','allow','unlinkSync','Notifications\x20types:\x20','Invalid\x20authentication\x20token\x20(1)','/:bot/support','error','error\x20while\x20deleting\x20config\x20files:\x20','Invalid\x20Telegram\x20token','auto','user','telegramEnabled','privateKey','3000','Token\x20blacklisted','clients','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','success','add-bot','max','cancel-loading','kind','2FA','enabled','sockets','disabled','mode','all','writeFileSync','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','getSeconds','User\x20has\x20been\x20validated','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','toIPv4Address','botID','date-fns','Unauthorized\x20attempt\x20to\x20get\x20logs','All\x20bots','/off\x20-\x20stop\x20bot(s)\x0a','axios','settings.','temporary\x20token\x20generated','@analytics/google-analytics-v3','Bot\x20','updatebotmanager','push','event','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','polling_error','Server','backup/','login\x20not\x20required','timestamp','404\x20Not\x20Found','bb-settings.json','server','telegramChatId','timeshift','expiry','connected','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','access\x20timeout','You\x20can\x20use\x20the\x20following\x20commands:\x0a','logged\x20out','All','bots','slice','any','toggleBotMode','Markdown','4884JthHND','username','live','notification','temporary\x20access\x20timeout','defaults','set','telegramToken','reload','getStartingBalances','headless','test','reason','reset-password','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','lastmsgemitted','telegram','settings','manual','page','getUTCHours','readFileSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','stop','restarting\x20Bot\x20','getMonth','exp','-results.json','new-disabled','min','2FA\x20login\x20rejected','enabled\x20Bot\x20','sendFile','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','match','(((.+)+)+)+$','env','padStart','express','onText','version.json','cancelLoading','hybrid-crypto-js','/disable\x20-\x20disable\x20notifications\x0a','split','Your\x20installation\x20is\x20already\x20up\x20to\x20date','logout','Notifications\x20disabled','sendPortfolioTelegram','All\x20bots\x20running\x20right\x20now','show','build','clientip','blacklist','864625HaQAhf','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','log','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','idling\x20bot\x20\x20\x20|\x20Bot\x20','Crypt','alias','sha256','/enable\x20-\x20enable\x20notifications\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','get-messages','title','2FA\x20required','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20get\x20messages','exit','mkdirSync','forEach','send','apply','yargs/yargs','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','loginRequired','encryptedUuid','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','jsonwebtoken','args','temporaryAccessAllowed','::ffff:127.0.0.1','lastmsgtelegram','Ok,\x20will\x20send\x20alert\x20notifications\x20only','assign','/:bot/configuration','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Temporary\x20access\x20rejected','accept','Yes','messages','static','placeOrder','get-logs','order','handshake','existsSync','disconnect','starting\x20bot\x20|\x20Bot\x20','472EJYgXY','replace','\x20minutes','search','function','Unauthorized\x20attempt\x20to\x20update\x20bot','f2aRequired','sendMessage','bb/','auth','message','Unauthorized\x20attempt\x20to\x20confirm\x20message','alerts','Unauthorized\x20attempt\x20to\x20update\x20settings','getMinutes','userid','apiKey','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','get-starting-balances','7sCDPGV','/names\x20-\x20show\x20bot\x20names\x0a','whitelistEnabled','0.0.0','botmanager','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','storeHeadless','index.html','referer','password','emit','bbPassword','-events.json','stopPolling','3616209YKUtDv','path','add','entries','UA-192771731-1','initclient','Access\x20enabled\x20for\x20','temporary\x20access\x20not\x20allowed','store-headless','getFullYear','login\x20token\x20generated','1786728qKnLaN','store','running','started','bbvReceive','once','keys','Invalid\x20IP\x20address','ipaddr.js','node-telegram-bot-api','<b>Balance\x20Bot\x20Status:</b>\x0a','readdirSync','\x20only\x0a','latestversion','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','track','Bot\x20Mgr\x20>\x20','temporary\x20access\x20rejected','conn','argv','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','init','sign','SIGINT','Starting\x20Balance\x20Bot\x20update','Invalid\x20authentication\x20token\x20(2)','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','chat','use','delete-alerts','invalid\x20credentials','*$1*','get-portfolio','write','https://api.ipify.org?format=json','store-configuration','build2','answerCallbackQuery','compareSync','analytics','3364140mFFmed','uuid-random','pidExpireLogin','bbUsername','crypto','/:bot/performance','Unauthorized\x20attempt\x20to\x20add\x20bot','get','kill','telegrammsg','/:bot/portfolio','/on\x20-\x20start\x20bot(s)\x0a','14130aknTNg','secret','constructor','getDate','botname','cloneDeep','data','\x20|\x20','\x20mode','publicKey','HTML','login','bot-','::1',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','deleted\x20Bot\x20','lowdb/adapters/FileSync','find','Alerts','graphql-request','mixpanel','NTBA_FIX_319','value','new','<b>Telegram\x20Bot\x20Status:</b>\x0a','hasOwnProperty','host','remoteAddress','telegramIpApproval','\x20to\x20','bcryptjs','pidRefreshToken','sortBy','-config.json','login\x20required','-----------------------------------------------------------------------------------','15\x20min','https://hodlerhacks.com','status','12gxnLNE','stopped','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bbvNew','telegramEvents','disabled\x20Bot\x20','getHours','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Unauthorized\x20attempt\x20to\x20log\x20out','bb-config.json','number','removeListener','delete-bot','reject','\x20>\x20','token','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','from','length','2FA\x20login\x20token\x20generated','SIGTERM','/:bot/history','Error:\x20Invalid\x20argument\x20','randomBytes','headers','connection','createServer','filter','decrypt','deleteHistoryAlerts','toString','No\x20authentication\x20token','callback_query','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','includes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','parse','randomFillSync','getPortfolio','store-settings','Unauthorized\x20attempt\x20to\x20get\x20portfolio','confirm-message','5\x20min','startsWith','secure','orders','getTime','isIPv4MappedAddress','uuid','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','port','catch','listen','restart','telegram2FaApproval','join','bot','inherit','/help\x20-\x20show\x20available\x20commands\x0a','6b67f3d61ee94b8f5c80b4affef4c4d9','yes','emitHistory'];_0x52b3=function(){return _0x2e4f94;};return _0x52b3();}function updateSetting(_0x4bb24d,_0x17cc41){const _0x161ff5=_0x2bb2f3;dbSettings[_0x161ff5(0x20c)](_0x161ff5(0x1e8)+_0x4bb24d,_0x17cc41)[_0x161ff5(0x12f)](),settings=getSettings(),io['to'](_0x161ff5(0xf8))[_0x161ff5(0xfe)]('settings',cleanSettings());}function storeSecure(_0x41ce82){const _0x19fe05=_0x2bb2f3;dbSecure['get'](_0x19fe05(0x195))[_0x19fe05(0x1ed)](_0x41ce82)[_0x19fe05(0x12f)](),secure=_0x41ce82;}function addBlacklist(_0x1bad45){const _0xf7305d=_0x2bb2f3;cleanBlacklist();let _0x2bbd3f;devices[_0x1bad45][_0xf7305d(0x15e)]?_0x2bbd3f=Math[_0xf7305d(0x1d3)](devices[_0x1bad45][_0xf7305d(0x15e)][_0xf7305d(0x1fa)],loginExpiry):_0x2bbd3f=loginExpiry,dbSecure[_0xf7305d(0x13d)](_0xf7305d(0xb1))[_0xf7305d(0x1ed)]({'expiry':new Date()[_0xf7305d(0x197)]()+_0x2bbd3f*0x3c*0x3e8,'token':devices[_0x1bad45][_0xf7305d(0x1bc)]['token']})[_0xf7305d(0x12f)](),blacklist=dbSecure[_0xf7305d(0x13d)]('blacklist')[_0xf7305d(0x158)]();}function cleanBlacklist(){const _0x2d96a3=_0x2bb2f3;let _0x754dd2=dbSecure[_0x2d96a3(0x13d)](_0x2d96a3(0xb1))[_0x2d96a3(0x147)]()[_0x2d96a3(0x158)](),_0x74d547=new Date()['getTime']();_0x754dd2[_0x2d96a3(0xc4)](_0x57a1cf=>{const _0x3e3e34=_0x2d96a3;_0x57a1cf[_0x3e3e34(0x1fa)]<_0x74d547&&dbSecure[_0x3e3e34(0x13d)](_0x3e3e34(0xb1))['remove']({'expiry':_0x57a1cf['expiry']})[_0x3e3e34(0x12f)]();});}function initStates(){const _0x499bdd=_0x2bb2f3;let _0x5588d2=getConfiguration();_0x5588d2[_0x499bdd(0xc4)](_0x450961=>{const _0x44ea71=_0x499bdd;_0x450961['live']=_0x44ea71(0x16a);}),storeConfiguration(_0x5588d2);}function onKeys(){const _0xb27464=new RSA();return new Promise(_0x5ed9e7=>{const _0xc0d567=_0xad20;_0xb27464['generateKeyPairAsync']()[_0xc0d567(0x1a9)](_0x12de21=>{_0x5ed9e7(_0x12de21);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x546e99=_0x2bb2f3;let _0x50ea37=getSettings(),_0x59a6ba=![];!_0x50ea37[_0x546e99(0x15b)](_0x546e99(0xd0))&&(_0x50ea37[_0x546e99(0xd0)]=0x0,_0x59a6ba=!![]);!_0x50ea37[_0x546e99(0x15b)](_0x546e99(0x215))&&(_0x50ea37['lastmsgemitted']=0x0,_0x59a6ba=!![]);!_0x50ea37['hasOwnProperty']('latestversion')&&(_0x50ea37['latestversion']=_0x546e99(0xf7),_0x59a6ba=!![]);if(_0x59a6ba)storeSettings(_0x50ea37);}function storeConfiguration(_0x46f44f){const _0xd3131d=_0x2bb2f3;dbConfig[_0xd3131d(0x13d)](_0xd3131d(0x201))['remove']()[_0xd3131d(0x12f)](),_0x46f44f[_0xd3131d(0xc4)](_0xf7bd0a=>{const _0x1b9a5a=_0xd3131d;delete _0xf7bd0a[_0x1b9a5a(0x1da)];}),dbConfig[_0xd3131d(0x13d)](_0xd3131d(0x201))[_0xd3131d(0x1ed)](..._0x46f44f)[_0xd3131d(0x12f)](),config=_0x46f44f;}function resetPassword(){const _0x2c33bf=_0x2bb2f3;tgBot&&settings[_0x2c33bf(0x1f8)]&&(tgBot[_0x2c33bf(0x174)]('callback_query'),tgBot['sendMessage'](settings[_0x2c33bf(0x1f8)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2c33bf(0x1a5),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x106aea=>{telegramError(_0x106aea);}),tgBot['on']('callback_query',async _0x155661=>{const _0x2e9208=_0x2c33bf,_0x1b030f=_0x155661['data'],_0x114715=_0x155661[_0x2e9208(0xeb)];tgBot[_0x2e9208(0x133)](_0x155661['id'])['then'](async()=>{const _0x507365=_0x2e9208;if(_0x1b030f!='no'){const _0x2fb939=0xf,_0x2b083f=_0x507365(0x1fc),_0x4f66f5=Array[_0x507365(0x17a)](crypto[_0x507365(0x18e)](new Uint32Array(_0x2fb939)))['map'](_0x5f1440=>_0x2b083f[_0x5f1440%_0x2b083f[_0x507365(0x17b)]])[_0x507365(0x1a0)](''),_0x2bd3df=bcrypt[_0x507365(0x1b2)](_0x4f66f5,saltRounds);storeSettings({'bbPassword':_0x2bd3df}),await tgBot[_0x507365(0xe8)](_0x114715[_0x507365(0x129)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4f66f5,{'parse_mode':'HTML'})[_0x507365(0x19c)](_0xad7a5b=>{telegramError(_0xad7a5b);});}else await tgBot[_0x507365(0xe8)](_0x114715[_0x507365(0x129)]['id'],'Password\x20reset\x20rejected')['catch'](_0x454fa3=>{telegramError(_0x454fa3);});}),tgBot[_0x2e9208(0x174)](_0x2e9208(0x189));}));}function logging(_0x57f6f2){const _0xad8d42=_0x2bb2f3;console[_0xad8d42(0xb4)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x57f6f2);if(tgBot&&settings['telegramChatId']&&settings[_0xad8d42(0x16d)]!=_0xad8d42(0x196))tgBot[_0xad8d42(0xe8)](settings[_0xad8d42(0x1f8)],_0xad8d42(0x11d)+_0x57f6f2)[_0xad8d42(0x19c)](_0x21439c=>{telegramError(_0x21439c);});}function getServerTime(){const _0x330ebb=_0x2bb2f3,_0x3d4a8e=new Date();return _0x3d4a8e[_0x330ebb(0x10b)]()+'/'+(_0x3d4a8e[_0x330ebb(0x21f)]()+0x1)[_0x330ebb(0x187)]()[_0x330ebb(0x22b)](0x2,'0')+'/'+_0x3d4a8e[_0x330ebb(0x145)]()[_0x330ebb(0x187)]()[_0x330ebb(0x22b)](0x2,'0')+'\x20'+_0x3d4a8e['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x3d4a8e[_0x330ebb(0xef)]()['toString']()[_0x330ebb(0x22b)](0x2,'0')+':'+_0x3d4a8e[_0x330ebb(0x1de)]()[_0x330ebb(0x187)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xcd283d=_0x2bb2f3,_0x351398=shiftedTime();return _0x351398[_0xcd283d(0x10b)]()+'/'+(_0x351398[_0xcd283d(0x21f)]()+0x1)[_0xcd283d(0x187)]()[_0xcd283d(0x22b)](0x2,'0')+'/'+_0x351398[_0xcd283d(0x145)]()[_0xcd283d(0x187)]()[_0xcd283d(0x22b)](0x2,'0')+'\x20'+_0x351398[_0xcd283d(0x16f)]()[_0xcd283d(0x187)]()['padStart'](0x2,'0')+':'+_0x351398[_0xcd283d(0xef)]()[_0xcd283d(0x187)]()[_0xcd283d(0x22b)](0x2,'0')+':'+_0x351398['getSeconds']()['toString']()[_0xcd283d(0x22b)](0x2,'0');}function shiftedTime(){const _0x4af183=_0x2bb2f3,_0x57be0a=new Date();let _0x487906=_0x57be0a;if(settings[_0x4af183(0x1f9)]&&settings['timeshift']!==0x0)_0x487906=fns[_0x4af183(0x104)](_0x57be0a,{'hours':settings['timeshift']});return _0x487906;}function startScheduler(){const _0x568c18=_0x2bb2f3;let _0x48bc73=new Date()[_0x568c18(0x21a)]();_0x48bc73==0x1&&backupConfigFiles();_0x48bc73==0x9&&triggerAnalytics();_0x48bc73%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0xff2661=_0x2bb2f3;fs[_0xff2661(0x118)](configpath,{'withFileTypes':!![]})[_0xff2661(0xc4)](_0xa271bb=>{const _0x479eb4=_0xff2661;if(!_0xa271bb['isDirectory']())fs['copyFileSync'](configpath+_0xa271bb[_0x479eb4(0x1b9)],configbackuppath+_0xa271bb[_0x479eb4(0x1b9)]);});}async function getPublicIp(){const _0x11ad63=_0x2bb2f3;try{const _0x25aa2f=await axios[_0x11ad63(0x13d)](_0x11ad63(0x130));publicip=_0x25aa2f[_0x11ad63(0x148)]['ip'];}catch(_0x22c0af){}}async function triggerAnalytics(_0x2857ba=![]){const _0x2c6a07=_0x2bb2f3;if(!publicip)await getPublicIp();const _0x56916e=getBotsWithMode();let _0x3e2538=0x0;_0x56916e[_0x2c6a07(0xc4)](_0x9265af=>{const _0x53880d=_0x2c6a07;if(_0x9265af['status']===_0x53880d(0x1d7))_0x3e2538++;}),mixpanel[_0x2c6a07(0x11c)](_0x2c6a07(0x1f1),{'distinct_id':settings[_0x2c6a07(0xf0)],'ip':publicip,'version':serverversion,'numbots':_0x56916e[_0x2c6a07(0x17b)],'numbotsenabled':_0x3e2538}),!_0x2857ba&&analytics[_0x2c6a07(0x219)]({'title':'Balance\x20Bot\x20Server','href':_0x2c6a07(0x167),'path':'/v'+serverversion});}async function getMessages(){const _0x1289d3=_0x2bb2f3,_0x276bf3='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x3f63ed=new GraphQLClient(_0x276bf3),_0x10751b={'authorization':_0x1289d3(0x1bd)},_0x3416d4=serverversion[_0x1289d3(0x232)]('.'),_0x5e793e=_0x3416d4[0x0]+'.'+_0x3416d4[0x1],_0xf78c0f=Math[_0x1289d3(0x223)](settings[_0x1289d3(0xd0)],settings[_0x1289d3(0x215)]),_0xb0b30d={'last':parseInt(_0xf78c0f),'bbm':_0x5e793e},_0x153881=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2085e6;try{_0x2085e6=await _0x3f63ed[_0x1289d3(0x1af)](_0x153881,_0xb0b30d,_0x10751b);}catch(_0x37e221){}if(_0x2085e6&&_0x2085e6[_0x1289d3(0xd8)]){let _0x3b75a4=settings[_0x1289d3(0xd0)];newMessages=[];for(const _0x4dac90 of _0x2085e6[_0x1289d3(0xd8)]){newMessages[_0x1289d3(0x1ed)](_0x4dac90);if(_0x4dac90[_0x1289d3(0x16c)])updateSetting(_0x1289d3(0x11a),_0x4dac90[_0x1289d3(0x16c)]);let _0x25b496=_0x4dac90[_0x1289d3(0x16c)]?serverversion>=_0x4dac90[_0x1289d3(0x16c)]:![];if(!_0x25b496&&_0x4dac90['number']>_0x3b75a4){if(_0x4dac90[_0x1289d3(0x111)]===_0x1289d3(0x203)||serverversion[_0x1289d3(0x194)](_0x4dac90[_0x1289d3(0x111)])){let _0x16422a=''+_0x4dac90[_0x1289d3(0xbe)]+'\x0a\x0a'+_0x4dac90['message'];const _0x427206=await sendTelegramMsg(toTelegramMarkdown(_0x16422a),_0x1289d3(0x205));if(_0x427206)_0x3b75a4=_0x4dac90[_0x1289d3(0x173)];}}}updateAvailable=isNewerVersion(settings[_0x1289d3(0x11a)],serverversion),updateSetting(_0x1289d3(0xd0),_0x3b75a4),emitMessages();}}function emitMessages(){const _0x34c3ac=_0x2bb2f3,_0xd8bd5e=settings[_0x34c3ac(0x215)];let _0x25a0d6=[];newMessages['forEach'](_0x2102bf=>{const _0x14e88a=_0x34c3ac;_0x2102bf['number']>_0xd8bd5e&&_0x25a0d6[_0x14e88a(0x1ed)](_0x2102bf);}),_0x25a0d6[_0x34c3ac(0x17b)]>0x0&&getAllClients()[_0x34c3ac(0xc4)](_0x20fc50=>{getSocket(_0x20fc50['id'])['emit']('message',_0x25a0d6);});}function confirmMessage(_0x2ccf35){updateSetting('lastmsgemitted',Number(_0x2ccf35));}function isNewerVersion(_0x6d343a,_0x3b6472){const _0x3dd5bf=_0x2bb2f3,_0x16c874=_0x3b6472[_0x3dd5bf(0x232)]('.'),_0x35e9ac=_0x6d343a[_0x3dd5bf(0x232)]('.');for(var _0x401166=0x0;_0x401166<_0x35e9ac[_0x3dd5bf(0x17b)];_0x401166++){const _0x3cec42=~~_0x35e9ac[_0x401166],_0x83b594=~~_0x16c874[_0x401166];if(_0x3cec42>_0x83b594)return!![];if(_0x3cec42<_0x83b594)return![];}return![];}function toTelegramMarkdown(_0x53d5ca){const _0x579f52=_0x2bb2f3,_0x3373a7=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x11d652=/\*{2}(.+?)\*{2}/gim;return _0x53d5ca=_0x53d5ca[_0x579f52(0xe2)](_0x3373a7,'$1_$2_$3')[_0x579f52(0xe2)](_0x11d652,_0x579f52(0x12d)),_0x53d5ca;}function validateCredentials(_0x1da3ab,_0x42ab13){const _0x20f460=_0x2bb2f3;if(_0x1da3ab[_0x20f460(0x207)]==settings[_0x20f460(0x139)]&&bcrypt[_0x20f460(0x134)](_0x1da3ab[_0x20f460(0xfd)],settings[_0x20f460(0xff)])){if(settings[_0x20f460(0xe7)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x5ebd3d=generateLoginToken(_0x42ab13);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x5ebd3d};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x18d9d6){const _0x527b53=generateLoginToken(_0x18d9d6);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x527b53};}function validateAccess(_0x50cc91,_0x358b0b){const _0x419ffd=_0x2bb2f3;let _0x235f57=devices[_0x358b0b]['ip'],_0x5d85b5;const _0x5dcbd0=_0x23c567=>{const _0x304d40=_0xad20;if(settings[_0x304d40(0xc9)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x358b0b)){const _0x3b28fe=generateLoginToken(_0x358b0b);return{'allow':!![],'reason':_0x304d40(0x17c),'token':_0x3b28fe};}else return{'allow':![],'reason':_0x304d40(0x164),'token':null};}else return _0x5d85b5=validToken(_0x23c567,_0x358b0b),_0x5d85b5[_0x304d40(0x15b)](_0x304d40(0x1d1))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x23c567}:{'allow':![],'reason':_0x304d40(0x164),'token':null};}else return{'allow':!![],'reason':_0x304d40(0x1f3),'token':null};};if(settings[_0x419ffd(0xf6)]){let _0x1af0bb=[...settings['whitelist'],_0x419ffd(0x14f),_0x419ffd(0xcf),'127.0.0.1'];if(_0x1af0bb[_0x419ffd(0x18b)](_0x235f57))return _0x5dcbd0(_0x50cc91);else{_0x5d85b5=validToken(_0x50cc91,_0x358b0b);if(_0x5d85b5[_0x419ffd(0x15b)](_0x419ffd(0x1d1)))return _0x5dcbd0(_0x50cc91);else{if(telegramIpApproved(_0x358b0b)){const _0x244c09=generateToken(_0x358b0b);return _0x5d85b5=_0x5dcbd0(_0x50cc91),_0x5d85b5[_0x419ffd(0x1c1)]?{'allow':!![],'reason':_0x419ffd(0x1e9),'token':_0x244c09}:_0x5d85b5;}else return settings[_0x419ffd(0xce)]?{'allow':![],'reason':_0x419ffd(0xbf),'token':null}:{'allow':![],'reason':_0x419ffd(0x109),'token':null};}}}else return _0x5dcbd0(_0x50cc91);}function timelyDecrypt(_0x2fd8a2,_0x28aafa=!![]){const _0x34dc7f=_0x2bb2f3;if(_0x2fd8a2)try{const _0x427377=crypt[_0x34dc7f(0x185)](secure[_0x34dc7f(0x1cc)],_0x2fd8a2)['message'],_0x1ed73f=_0x427377[_0x34dc7f(0x232)]('@')[0x0],_0x22b77b=_0x427377['split']('@')[0x1],_0x39d927=new Date()[_0x34dc7f(0x197)]();if(_0x28aafa){if(_0x39d927-_0x22b77b<maxSecretAge*0x3e8)return _0x1ed73f;else return![];}else return _0x1ed73f;}catch(_0x4e9867){return![];}else return![];}const validToken=(_0x1d6f87,_0x5aa89b)=>{const _0x8806c7=_0x2bb2f3,_0x2b6d9b=devices[_0x5aa89b]['ip'];if(!_0x1d6f87)return{'error':_0x8806c7(0x188)};for(let _0x3af3e3 of blacklist){if(_0x3af3e3[_0x8806c7(0x178)]==_0x1d6f87)return{'error':_0x8806c7(0x1ce)};}let _0x1d74bb;try{_0x1d74bb=jwt['verify'](_0x1d6f87,secure[_0x8806c7(0x143)]+_0x5aa89b);}catch{return{'error':_0x8806c7(0x1c4)};}if(!_0x1d74bb[_0x8806c7(0x15b)]('clientip')&&!_0x1d74bb[_0x8806c7(0x15b)](_0x8806c7(0x207))||!_0x1d74bb['hasOwnProperty'](_0x8806c7(0x220)))return{'error':_0x8806c7(0x127)};if(!_0x1d74bb[_0x8806c7(0x15b)](_0x8806c7(0x207))&&_0x1d74bb[_0x8806c7(0x15b)](_0x8806c7(0xb0))){const {clientip:_0x29facd}=_0x1d74bb;return _0x2b6d9b==_0x29facd?{'success':_0x8806c7(0x1df)}:{'error':_0x8806c7(0x114)};}else{if(_0x1d74bb[_0x8806c7(0x15b)](_0x8806c7(0x207))&&_0x1d74bb[_0x8806c7(0x15b)](_0x8806c7(0xb0))){const {username:_0x47e75c,clientip:_0x1426ed}=_0x1d74bb;return settings[_0x8806c7(0x139)]==_0x47e75c&&_0x2b6d9b==_0x1426ed?{'success':_0x8806c7(0x1df)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xa99623=>{const _0x457e85=_0x2bb2f3;if(_0xa99623){const _0x2c017a=devices[_0xa99623]['ip'];return jwt[_0x457e85(0x124)]({'username':settings[_0x457e85(0x139)],'clientip':_0x2c017a},secure['secret']+_0xa99623,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x482114=>{const _0x4cb7f5=_0x2bb2f3;if(_0x482114){const _0x24e821=devices[_0x482114]['ip'];return jwt[_0x4cb7f5(0x124)]({'clientip':_0x24e821},secure[_0x4cb7f5(0x143)]+_0x482114,{'expiresIn':devices[_0x482114][_0x4cb7f5(0x15e)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x24f328=>{const _0x27ec40=_0x2bb2f3;let _0x3b44aa=![];return devices[_0x24f328][_0x27ec40(0x15e)]&&devices[_0x24f328]['telegramIpApproval'][_0x27ec40(0x1fa)]!='reject'&&(_0x3b44aa=devices[_0x24f328]['telegramIpApproval'][_0x27ec40(0xb0)]==devices[_0x24f328]['ip']&&new Date()['getTime']()-devices[_0x24f328]['telegramIpApproval'][_0x27ec40(0x1f4)]<devices[_0x24f328][_0x27ec40(0x15e)][_0x27ec40(0x1fa)]*0x3c*0x3e8),_0x3b44aa;},telegram2FaApproved=_0x498cd2=>{const _0x31f049=_0x2bb2f3;let _0x5cc570=![];return devices[_0x498cd2][_0x31f049(0x19f)]&&devices[_0x498cd2][_0x31f049(0x19f)][_0x31f049(0x1fa)]!=_0x31f049(0x176)&&(_0x5cc570=devices[_0x498cd2]['telegram2FaApproval']['clientip']==devices[_0x498cd2]['ip']&&new Date()['getTime']()-devices[_0x498cd2][_0x31f049(0x19f)]['timestamp']<devices[_0x498cd2][_0x31f049(0x19f)][_0x31f049(0x1fa)]*0x3c*0x3e8),_0x5cc570;},normalizeIP=_0x151af7=>{const _0x5378ea=_0x2bb2f3;let _0x30e8f2=null,_0x318752=null;if(ipaddr[_0x5378ea(0x1be)](_0x151af7)){const _0x24ad86=ipaddr[_0x5378ea(0x18d)](_0x151af7);_0x24ad86[_0x5378ea(0x1d5)]()===_0x5378ea(0x1ae)?(_0x24ad86[_0x5378ea(0x198)]()&&(_0x30e8f2=_0x24ad86[_0x5378ea(0x1e1)]()[_0x5378ea(0x187)]()),_0x318752=_0x24ad86[_0x5378ea(0x187)]()):(_0x30e8f2=_0x24ad86[_0x5378ea(0x187)](),_0x318752=_0x24ad86[_0x5378ea(0xc0)]()[_0x5378ea(0x187)]());}return{'show':_0x30e8f2?_0x30e8f2:_0x318752,'store':_0x318752};};function sleep(_0x3bd7ee){return new Promise(_0x34a791=>setTimeout(_0x34a791,_0x3bd7ee));}