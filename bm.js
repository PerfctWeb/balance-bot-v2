const _0x57fbd8=_0x4077;(function(_0x4dbc9d,_0x5696cc){const _0x420514=_0x4077,_0xd366bf=_0x4dbc9d();while(!![]){try{const _0x20b115=-parseInt(_0x420514(0x1ec))/0x1*(parseInt(_0x420514(0x232))/0x2)+-parseInt(_0x420514(0x1e1))/0x3+-parseInt(_0x420514(0x189))/0x4*(parseInt(_0x420514(0x1d3))/0x5)+parseInt(_0x420514(0x25e))/0x6+parseInt(_0x420514(0x18a))/0x7+parseInt(_0x420514(0x197))/0x8+parseInt(_0x420514(0x1f3))/0x9;if(_0x20b115===_0x5696cc)break;else _0xd366bf['push'](_0xd366bf['shift']());}catch(_0x264094){_0xd366bf['push'](_0xd366bf['shift']());}}}(_0x434c,0x34b40));const _0x49e34c=function(){let _0x17f8ae=!![];return function(_0x52d131,_0x1316e3){const _0x198c58=_0x17f8ae?function(){const _0x529d93=_0x4077;if(_0x1316e3){const _0x1a53f9=_0x1316e3[_0x529d93(0x22e)](_0x52d131,arguments);return _0x1316e3=null,_0x1a53f9;}}:function(){};return _0x17f8ae=![],_0x198c58;};}(),_0x23e826=_0x49e34c(this,function(){const _0x3af7e4=_0x4077;return _0x23e826[_0x3af7e4(0x166)]()[_0x3af7e4(0x119)]('(((.+)+)+)+$')[_0x3af7e4(0x166)]()[_0x3af7e4(0x226)](_0x23e826)[_0x3af7e4(0x119)]('(((.+)+)+)+$');});_0x23e826();'use strict';process[_0x57fbd8(0x11c)][_0x57fbd8(0x173)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x57fbd8(0x254)),fs=require('fs'),fns=require(_0x57fbd8(0x1a8)),low=require(_0x57fbd8(0x13c)),path=require(_0x57fbd8(0x24d)),crypto=require(_0x57fbd8(0x174)),Crypt=require(_0x57fbd8(0x135))['Crypt'],RSA=require(_0x57fbd8(0x135))[_0x57fbd8(0x14f)],bcrypt=require('bcryptjs'),jwt=require(_0x57fbd8(0x1e7)),analyticsLib=require(_0x57fbd8(0x1d4))[_0x57fbd8(0x1ba)],googleAnalytics=require(_0x57fbd8(0x149))['default'],ipaddr=require(_0x57fbd8(0x240)),argv=require('yargs/yargs')(process[_0x57fbd8(0x245)][_0x57fbd8(0x15d)](0x2))[_0x57fbd8(0x245)],PORT=argv[_0x57fbd8(0x1ab)]||_0x57fbd8(0x223),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x57fbd8(0x248)+PORT+_0x57fbd8(0x252)),process[_0x57fbd8(0x207)](0x1));const HOST=argv[_0x57fbd8(0x1ea)]||null,userID=argv[_0x57fbd8(0x14c)]||'';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x57fbd8(0x21b),settingsfile=_0x57fbd8(0x1ed),securefile=_0x57fbd8(0x1cd);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x57fbd8(0x23d)+userID+'/':bbpath+_0x57fbd8(0x23d),configbackuppath=configpath+_0x57fbd8(0x142);!fs[_0x57fbd8(0x152)](configpath)&&fs[_0x57fbd8(0x22d)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x57fbd8(0x22d)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x57fbd8(0x1c5)]({'bots':[]})[_0x57fbd8(0x1c9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x57fbd8(0x1c5)]({'settings':{'timeshift':0x0}})[_0x57fbd8(0x1c9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x57fbd8(0x1c5)]({'secure':{},'blacklist':[]})[_0x57fbd8(0x1c9)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x57fbd8(0x18d)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x57fbd8(0x146))[_0x57fbd8(0x183)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x57fbd8(0x213)),app=express(),http=require(_0x57fbd8(0x233))[_0x57fbd8(0x17c)](app);app['use'](express[_0x57fbd8(0x1e9)](path[_0x57fbd8(0x1cc)](__dirname,bbpath2,_0x57fbd8(0x21c)))),app[_0x57fbd8(0x118)](express['static'](path['join'](__dirname,bbpath2,_0x57fbd8(0x177)))),app[_0x57fbd8(0x1a1)]('/',function(_0x2866b0,_0x5079c6){const _0x50b936=_0x57fbd8;_0x5079c6[_0x50b936(0x1b9)](path[_0x50b936(0x1cc)](__dirname,bbpath2,_0x50b936(0x21c),_0x50b936(0x210)));}),app[_0x57fbd8(0x1a1)]('/:bot',function(_0x458e5e,_0x340bfa){const _0x179c80=_0x57fbd8;_0x340bfa['sendFile'](path[_0x179c80(0x1cc)](__dirname,bbpath2,_0x179c80(0x177),_0x179c80(0x210)));}),app[_0x57fbd8(0x1a1)](_0x57fbd8(0x179),(_0x248c2e,_0x584a3b)=>{const _0x40af5f=_0x57fbd8;_0x584a3b['sendFile'](path[_0x40af5f(0x1cc)](__dirname,bbpath2,_0x40af5f(0x177),'index.html'));}),app[_0x57fbd8(0x1a1)](_0x57fbd8(0x1a9),(_0x526907,_0xfa14a)=>{const _0x1e22e4=_0x57fbd8;_0xfa14a[_0x1e22e4(0x1b9)](path['join'](__dirname,bbpath2,_0x1e22e4(0x177),_0x1e22e4(0x210)));}),app['get']('/:bot/coins',(_0x5a3f2a,_0x3865e5)=>{const _0x22596e=_0x57fbd8;_0x3865e5[_0x22596e(0x1b9)](path[_0x22596e(0x1cc)](__dirname,bbpath2,_0x22596e(0x177),_0x22596e(0x210)));}),app[_0x57fbd8(0x1a1)]('/:bot/history',(_0x172f69,_0x46348d)=>{const _0x62032c=_0x57fbd8;_0x46348d['sendFile'](path[_0x62032c(0x1cc)](__dirname,bbpath2,_0x62032c(0x177),'index.html'));}),app[_0x57fbd8(0x1a1)](_0x57fbd8(0x1fb),(_0x5d25b4,_0x383f90)=>{const _0x2f32f5=_0x57fbd8;_0x383f90[_0x2f32f5(0x1b9)](path[_0x2f32f5(0x1cc)](__dirname,bbpath2,_0x2f32f5(0x177),'index.html'));}),app[_0x57fbd8(0x1a1)](_0x57fbd8(0x1cb),(_0x58470a,_0x7286b)=>{const _0x2082e9=_0x57fbd8;_0x7286b[_0x2082e9(0x1b9)](path[_0x2082e9(0x1cc)](__dirname,bbpath2,_0x2082e9(0x177),_0x2082e9(0x210)));});if(HOST)http[_0x57fbd8(0x1dc)](PORT,HOST);else http[_0x57fbd8(0x1dc)](PORT);const io=require(_0x57fbd8(0x148))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x57fbd8(0x1df));let tgBot;if(settings[_0x57fbd8(0x1eb)]&&settings[_0x57fbd8(0x1eb)]!=''&&settings['telegramUsername']&&settings[_0x57fbd8(0x17f)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x436eba=_0x57fbd8;console['log'](''),console[_0x436eba(0x1b5)](_0x436eba(0x15c)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x436eba(0x1b5)]('-----------------------------------------------------------------------------------');if(config[_0x436eba(0x1f5)]!=0x0)config[_0x436eba(0x1ee)](_0x11b6a9=>{const _0x1dd185=_0x436eba;if(_0x11b6a9[_0x1dd185(0x192)]==_0x1dd185(0x242)||_0x11b6a9[_0x1dd185(0x192)]==_0x1dd185(0x1fe))logging(_0x1dd185(0x11a)+_0x11b6a9[_0x1dd185(0x191)]+_0x1dd185(0x255)+_0x11b6a9[_0x1dd185(0x209)]),startBot([_0x11b6a9[_0x1dd185(0x191)],userID],{'cwd':bbpath},function(_0x54b106){if(_0x54b106)logging(_0x54b106);});else(_0x11b6a9[_0x1dd185(0x192)]=='disabled'||_0x11b6a9[_0x1dd185(0x192)]==_0x1dd185(0x24f))&&logging(_0x1dd185(0x15e)+_0x11b6a9[_0x1dd185(0x191)]+_0x1dd185(0x255)+_0x11b6a9['botname']);});else!newBot&&console[_0x436eba(0x1b5)](_0x436eba(0x20c));if(newBot)addBot();console['log']('-----------------------------------------------------------------------------------'),console[_0x436eba(0x1b5)]('');}function startSocket(){const _0x42caa9=_0x57fbd8;io['on'](_0x42caa9(0x15a),_0x4aaff4=>{const _0x1d75fd=_0x42caa9;let _0x12a7c3,_0x13899d,_0x356cb3,_0x3974fe,_0x15c2e2;const _0x23cd72=_0x4aaff4['handshake']['headers'][_0x1d75fd(0x1d7)];_0x13899d=_0x23cd72[_0x1d75fd(0x21d)](/bot[0-9]{3}/);if(_0x13899d)_0x356cb3=_0x13899d[0x0][_0x1d75fd(0x21d)](/[0-9]{3}/);if(_0x356cb3)_0x12a7c3=_0x356cb3[0x0];else _0x12a7c3=_0x1d75fd(0x1bb);const _0x42b9ff=_0x4aaff4[_0x1d75fd(0x25a)]['auth'][_0x1d75fd(0x24c)];if(!_0x42b9ff)_0x4aaff4[_0x1d75fd(0x1aa)](_0x1d75fd(0x192),{'publicKey':secure[_0x1d75fd(0x11b)]});else{_0x3974fe=timelyDecrypt(_0x42b9ff,![]);if(!_0x3974fe)_0x4aaff4[_0x1d75fd(0x1aa)](_0x1d75fd(0x192),{'publicKey':secure[_0x1d75fd(0x11b)]});else{_0x15c2e2=normalizeIP(_0x4aaff4[_0x1d75fd(0x150)][_0x1d75fd(0x155)])['store'];if(!devices[_0x3974fe])devices[_0x3974fe]={'uuid':_0x3974fe,'access':{'token':null}};devices[_0x3974fe]['ip']=_0x15c2e2;const _0xfb0ec8=addClient(_0x4aaff4['id'],_0x3974fe,_0x12a7c3);setAccess(_0xfb0ec8),_0x4aaff4['on'](_0x1d75fd(0x185),_0x57867c=>{const _0x1f0ec7=_0x1d75fd,_0x2d1451=timelyDecrypt(_0x57867c['password']);if(_0x2d1451){_0x57867c={'username':_0x57867c[_0x1f0ec7(0x1c6)],'password':_0x2d1451},devices[_0x3974fe][_0x1f0ec7(0x125)]=validateCredentials(_0x57867c,_0x3974fe);if(devices[_0x3974fe]['access'][_0x1f0ec7(0x214)]==![]&&devices[_0x3974fe]['access']['reason']=='2FA\x20login\x20required')_0x4aaff4[_0x1f0ec7(0x1aa)](_0x1f0ec7(0x192),{'access':devices[_0x3974fe][_0x1f0ec7(0x125)]}),loginAccess2FA(_0x3974fe,_0x15c2e2);else{if(devices[_0x3974fe][_0x1f0ec7(0x125)]['allow']==![]&&devices[_0x3974fe][_0x1f0ec7(0x125)][_0x1f0ec7(0x190)]=='invalid\x20credentials')_0x4aaff4['emit'](_0x1f0ec7(0x192),{'access':devices[_0x3974fe][_0x1f0ec7(0x125)]});else devices[_0x3974fe][_0x1f0ec7(0x125)]['allow']&&devices[_0x3974fe]['access'][_0x1f0ec7(0x190)]==_0x1f0ec7(0x23a)&&(getClientsWithUuid(_0x3974fe)[_0x1f0ec7(0x1ee)](_0x5eb5b6=>{setAccess(_0x5eb5b6);}),setTokenRefresh(_0x3974fe),setSessionTimeout('login',_0x3974fe));}}else logging(_0x1f0ec7(0x129));}),_0x4aaff4['on'](_0x1d75fd(0x208),()=>{resetPassword();}),_0x4aaff4['on'](_0x1d75fd(0x17e),_0x2cc358=>{removeClient(_0x4aaff4['id']);});}}});}function initClient(_0x477f24){const _0x306496=_0x57fbd8;if(_0x477f24!='botmanager'&&config[_0x306496(0x184)]!=''){if(pid[_0x477f24])pid[_0x477f24][_0x306496(0x21f)]({'function':'initclient','args':null});}}function getSocket(_0xb1ad69){const _0x4ed74c=_0x57fbd8;return io[_0x4ed74c(0x25d)][_0x4ed74c(0x25d)]['get'](_0xb1ad69);}function setAccess(_0x3facf3){const _0x51d575=_0x57fbd8,_0x5f098e=getSocket(_0x3facf3['id']),_0x54c8d1=_0x3facf3['uuid'],_0x35a037=_0x3facf3['bot'];devices[_0x54c8d1][_0x51d575(0x125)]=validateAccess(devices[_0x54c8d1]['access'][_0x51d575(0x16a)],_0x54c8d1),_0x5f098e[_0x51d575(0x1cc)](_0x54c8d1);if(devices[_0x54c8d1][_0x51d575(0x125)]['allow']){_0x5f098e[_0x51d575(0x1cc)](_0x35a037);if(_0x35a037==_0x51d575(0x1bb))initializeSocketBotManager(_0x5f098e);else initializeSocketBot(_0x5f098e);initClient(_0x35a037);}devices[_0x54c8d1][_0x51d575(0x125)]['token']&&devices[_0x54c8d1][_0x51d575(0x125)][_0x51d575(0x190)]==_0x51d575(0x25f)&&setSessionTimeout(_0x51d575(0x219),_0x54c8d1),devices[_0x54c8d1][_0x51d575(0x125)][_0x51d575(0x16a)]&&devices[_0x54c8d1]['access'][_0x51d575(0x190)]==_0x51d575(0x1b0)&&setSessionTimeout(_0x51d575(0x185),_0x54c8d1),_0x5f098e[_0x51d575(0x1aa)]('status',{'status':_0x3facf3[_0x51d575(0x144)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54c8d1]['access'],'externalip':devices[_0x54c8d1]['ip'],'publicKey':secure[_0x51d575(0x11b)],'validInstallation':validInstallation}),devices[_0x54c8d1]['access']['allow']==![]&&devices[_0x54c8d1][_0x51d575(0x125)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x54c8d1,devices[_0x54c8d1]['ip']);}function setSessionTimeout(_0x4e4796,_0x21b452){const _0x9f574=_0x57fbd8;let _0x61d949;if(_0x4e4796==_0x9f574(0x185))_0x61d949=loginExpiry*0x3c*0x3e8;else _0x61d949=devices[_0x21b452][_0x9f574(0x186)][_0x9f574(0x216)]*0x3c*0x3e8-(new Date()[_0x9f574(0x228)]()-devices[_0x21b452]['telegramIpApproval'][_0x9f574(0x249)]);if(devices[_0x21b452][_0x9f574(0x1f8)])clearTimeout(devices[_0x21b452][_0x9f574(0x1f8)]);devices[_0x21b452][_0x9f574(0x1f8)]=setTimeout(()=>{const _0x4bff35=_0x9f574;if(devices[_0x21b452][_0x4bff35(0x1b2)])clearTimeout(devices[_0x21b452]['pidRefreshToken']);removeSocketListeners(_0x21b452),addBlacklist(_0x21b452),devices[_0x21b452][_0x4bff35(0x186)]=null,devices[_0x21b452][_0x4bff35(0x178)]=null,devices[_0x21b452]['access']['token']=null,devices[_0x21b452][_0x4bff35(0x125)]=validateAccess(devices[_0x21b452][_0x4bff35(0x125)][_0x4bff35(0x16a)],_0x21b452),!(devices[_0x21b452]['access'][_0x4bff35(0x214)]&&devices[_0x21b452]['access']['reason']==_0x4bff35(0x115))&&(_0x4e4796==_0x4bff35(0x185)?io['to'](_0x21b452)['emit'](_0x4bff35(0x192),{'access':{'allow':![],'reason':_0x4bff35(0x12b),'token':null}}):io['to'](_0x21b452)[_0x4bff35(0x1aa)](_0x4bff35(0x192),{'access':{'allow':![],'reason':_0x4bff35(0x194),'token':null}})),devices[_0x21b452][_0x4bff35(0x125)][_0x4bff35(0x16a)]=null;},_0x61d949);}function setTokenRefresh(_0xd039ff){const _0x6a2094=_0x57fbd8;if(devices[_0xd039ff]['pidRefreshToken'])clearTimeout(devices[_0xd039ff][_0x6a2094(0x1b2)]);devices[_0xd039ff][_0x6a2094(0x1b2)]=setTimeout(()=>{const _0x40e4be=_0x6a2094;getClientsWithUuid(_0xd039ff)[_0x40e4be(0x1f5)]!=0x0?(devices[_0xd039ff][_0x40e4be(0x125)]=refreshToken(_0xd039ff),io['to'](_0xd039ff)[_0x40e4be(0x1aa)](_0x40e4be(0x192),{'status':_0x40e4be(0x1bc),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xd039ff][_0x40e4be(0x125)],'externalip':devices[_0xd039ff]['ip'],'publicKey':secure[_0x40e4be(0x11b)],'validInstallation':validInstallation}),setTokenRefresh(_0xd039ff)):clearTimeout(devices[_0xd039ff][_0x40e4be(0x1b2)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x20267a){const _0x26df06=_0x57fbd8,_0x4eb1c6=getClient(_0x20267a['id'])['uuid'];_0x20267a[_0x26df06(0x1aa)](_0x26df06(0x1c1),config),_0x20267a[_0x26df06(0x1aa)](_0x26df06(0x1e6),cleanSettings()),_0x20267a['on'](_0x26df06(0x225),_0x43975b=>{const _0x20a0f7=_0x26df06;if(validateAccess(_0x43975b,_0x4eb1c6)[_0x20a0f7(0x214)])addBot();else logging(_0x20a0f7(0x23c));}),_0x20267a['on']('update-bot',(_0x5bb180,_0x2b7511)=>{const _0x47d8db=_0x26df06;if(validateAccess(_0x2b7511,_0x4eb1c6)[_0x47d8db(0x214)])toggleBot(_0x5bb180[_0x47d8db(0x191)],_0x5bb180[_0x47d8db(0x192)],_0x5bb180[_0x47d8db(0x24e)]);else logging(_0x47d8db(0x1b6));}),_0x20267a['on'](_0x26df06(0x20a),(_0x3bf3f3,_0x2f81ed)=>{const _0x41ebf8=_0x26df06;if(validateAccess(_0x2f81ed,_0x4eb1c6)[_0x41ebf8(0x214)])toggleBotMode(_0x3bf3f3);else logging(_0x41ebf8(0x1b6));}),_0x20267a['on'](_0x26df06(0x14d),(_0x1e9653,_0x45396b)=>{const _0x9e1a6e=_0x26df06;if(validateAccess(_0x45396b,_0x4eb1c6)[_0x9e1a6e(0x214)])deleteBot(_0x1e9653);else logging(_0x9e1a6e(0x22c));}),_0x20267a['on']('store-settings',(_0x5e650a,_0x4aa5bd)=>{const _0x74fb91=_0x26df06;if(validateAccess(_0x4aa5bd,_0x4eb1c6)[_0x74fb91(0x214)])storeSettings(_0x5e650a,!![]);else logging(_0x74fb91(0x200));}),_0x20267a['on']('update-bb',_0x49e516=>{if(validateAccess(_0x49e516,_0x4eb1c6)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x20267a['on']('logout',_0x163cc0=>{const _0x551ffe=_0x26df06;if(validateAccess(_0x163cc0,_0x4eb1c6)[_0x551ffe(0x214)]){if(devices[_0x4eb1c6][_0x551ffe(0x1b2)])clearTimeout(devices[_0x4eb1c6][_0x551ffe(0x1b2)]);if(devices[_0x4eb1c6][_0x551ffe(0x1f8)])clearTimeout(devices[_0x4eb1c6]['pidExpireLogin']);removeSocketListeners(getClient(_0x20267a['id'])['uuid']),addBlacklist(_0x4eb1c6),devices[_0x4eb1c6][_0x551ffe(0x186)]=null,devices[_0x4eb1c6][_0x551ffe(0x178)]=null,devices[_0x4eb1c6]['access'][_0x551ffe(0x16a)]=null,io['to'](getClient(_0x20267a['id'])['uuid'])[_0x551ffe(0x1aa)](_0x551ffe(0x192),{'access':{'allow':![],'reason':_0x551ffe(0x1e8),'token':null}});}else logging(_0x551ffe(0x196));});}function initializeSocketBot(_0x12bef8){const _0x338525=_0x57fbd8,_0xc19cb2=getClient(_0x12bef8['id'])[_0x338525(0x1c4)],_0x2337ff=getClient(_0x12bef8['id'])[_0x338525(0x204)];_0x12bef8['on'](_0x338525(0x22f),(_0x3eb866,_0x3a4188)=>{const _0x35a6b9=_0x338525;if(validateAccess(_0x3a4188,_0x2337ff)[_0x35a6b9(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x35a6b9(0x21f)]({'function':_0x35a6b9(0x17d),'args':_0x3eb866});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x12bef8['on'](_0x338525(0x16d),(_0x5a02e3,_0x4abd20)=>{const _0x1594e6=_0x338525;if(validateAccess(_0x4abd20,_0x2337ff)[_0x1594e6(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x1594e6(0x21f)]({'function':_0x1594e6(0x244),'args':_0x5a02e3});}else logging(_0x1594e6(0x130));}),_0x12bef8['on'](_0x338525(0x161),(_0x149e5a,_0x1dd63c)=>{const _0x1da5a7=_0x338525;if(validateAccess(_0x1dd63c,_0x2337ff)[_0x1da5a7(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x1da5a7(0x21f)]({'function':_0x1da5a7(0x13d),'args':_0x149e5a});}else logging(_0x1da5a7(0x1db));}),_0x12bef8['on'](_0x338525(0x12c),(_0x123b39,_0x417b52)=>{const _0x54edc6=_0x338525;if(validateAccess(_0x417b52,_0x2337ff)[_0x54edc6(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x54edc6(0x21f)]({'function':_0x54edc6(0x167),'args':_0x123b39});}else logging(_0x54edc6(0x1bd));}),_0x12bef8['on']('store-headless',(_0x515709,_0x1990ba)=>{const _0x237028=_0x338525;if(validateAccess(_0x1990ba,_0x2337ff)[_0x237028(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x237028(0x21f)]({'function':'storeHeadless','args':_0x515709});}else logging(_0x237028(0x158));}),_0x12bef8['on'](_0x338525(0x263),_0x195139=>{const _0x201bfd=_0x338525;if(validateAccess(_0x195139,_0x2337ff)[_0x201bfd(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x201bfd(0x21f)]({'function':_0x201bfd(0x1d0),'args':null});}else logging(_0x201bfd(0x143));}),_0x12bef8['on']('place-order',(_0x129c03,_0x1251e4)=>{const _0x367d51=_0x338525;if(validateAccess(_0x1251e4,_0x2337ff)[_0x367d51(0x214)]){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x367d51(0x21f)]({'function':_0x367d51(0x1f2),'args':_0x129c03});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x12bef8['on']('cancel-loading',_0x1cb6c0=>{const _0x225ae6=_0x338525;if(validateAccess(_0x1cb6c0,_0x2337ff)['allow']){if(pid[_0xc19cb2])pid[_0xc19cb2][_0x225ae6(0x21f)]({'function':'cancelLoading','args':null});}else logging(_0x225ae6(0x243));}),_0x12bef8['on']('logout',_0x52353b=>{const _0x34a398=_0x338525;if(validateAccess(_0x52353b,_0x2337ff)[_0x34a398(0x214)]){if(devices[_0x2337ff][_0x34a398(0x1b2)])clearTimeout(devices[_0x2337ff][_0x34a398(0x1b2)]);if(devices[_0x2337ff][_0x34a398(0x1f8)])clearTimeout(devices[_0x2337ff][_0x34a398(0x1f8)]);removeSocketListeners(getClient(_0x12bef8['id'])['uuid']),addBlacklist(_0x2337ff),devices[_0x2337ff][_0x34a398(0x186)]=null,devices[_0x2337ff][_0x34a398(0x178)]=null,devices[_0x2337ff]['access'][_0x34a398(0x16a)]=null,io['to'](getClient(_0x12bef8['id'])[_0x34a398(0x204)])[_0x34a398(0x1aa)]('status',{'access':{'allow':![],'reason':_0x34a398(0x1e8),'token':null}});}else logging(_0x34a398(0x196));});}function removeSocketListeners(_0x50431a){getClientsWithUuid(_0x50431a)['forEach'](_0x40c6c2=>{const _0x374584=_0x4077;getSocket(_0x40c6c2['id'])[_0x374584(0x1a2)]();});}function cleanSettings(){const _0x1b3e34=_0x57fbd8;let _0x47954b=settings;return settings[_0x1b3e34(0x1eb)]&&settings[_0x1b3e34(0x1eb)]!=''&&(_0x47954b={..._0x47954b,'telegramToken':_0x1b3e34(0x222)}),settings['bbPassword']&&settings[_0x1b3e34(0x1d8)]!=''&&(_0x47954b={..._0x47954b,'bbPassword':_0x1b3e34(0x222)}),_0x47954b;}function _0x434c(){const _0x2bc259=['storeConfiguration','Invalid\x20IP\x20address','blacklist','token','sign','from','delete-alerts','readdirSync','-performance.json','padStart','yes','temporaryAccessAllowed','NTBA_FIX_319','crypto','User\x20has\x20been\x20validated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','build','telegram2FaApproval','/:bot/portfolio','Login\x20rejected','sortBy','createServer','emitHistory','disconnect','telegramUsername','sendMessage','notification','temporary\x20access\x20rejected','version','apiKey','login','telegramIpApproval','Password\x20reset\x20rejected','</b>\x20?','4ogWlRb','1638588bifIMY','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Notifications\x20enabled\x0a','RSA-OAEP','headless','copyFileSync','reason','botID','status','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','temporary\x20access\x20timeout','Invalid\x20Telegram\x20token','Unauthorized\x20attempt\x20to\x20log\x20out','226896eOdrWc','getFullYear','privateKey','ipc','5\x20min','::1','find','whitelist','assign','ipv6','get','removeAllListeners','\x20>\x20','telegramEvents','isDirectory','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','restarting\x20Bot\x20','date-fns','/:bot/performance','emit','port','deleted\x20Bot\x20','error','30\x20min','unlinkSync','2FA\x20login\x20token\x20generated','Temporary\x20access\x20rejected','pidRefreshToken','secure','randomFillSync','log','Unauthorized\x20attempt\x20to\x20update\x20bot','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','randomBytes','sendFile','default','botmanager','connected','Unauthorized\x20attempt\x20to\x20store\x20configuration','telegram','entries','name','bots','generateKeyPairAsync','Balance\x20Bot\x20Server','bot','defaults','username','hex','inherit','write','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/:bot/support','join','bb-secure.json','-events.json','alerts','getStartingBalances','message','hashSync','116605OZgwFA','analytics','reload','-config.json','referer','bbPassword','keys','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','listen','add','manual','node-telegram-bot-api','set','1001031reClfB','Token\x20blacklisted','stop','remove','invalid\x20credentials','settings','jsonwebtoken','logged\x20out','static','host','telegramToken','1SuEEZf','bb-settings.json','forEach','All\x20bots\x20running\x20right\x20now','telegramChatId','15\x20min','placeOrder','3754791rNczEC','getMonth','length','parse','max','pidExpireLogin','2FA\x20login\x20rejected','readFileSync','/:bot/configuration','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Invalid\x20authentication\x20token\x20(1)','new','1000','Unauthorized\x20attempt\x20to\x20update\x20settings','toggleBotMode','getSeconds','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','uuid','Access\x20enabled\x20for\x20','running','exit','reset-password','botname','toggle-bot-mode','404\x20Not\x20Found','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Notifications\x20enabled','filter','https://hodlerhacks.com','index.html','HTML','writeFileSync','express','allow','cloneDeep','expiry','/restart\x20-\x20restart\x20bot(s)\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','2FA','Invalid\x20authentication\x20token\x20(2)','bb-config.json','build2','match','bbUsername','send','reject','/on\x20-\x20start\x20bot(s)\x0a','************','3000','/enable\x20-\x20enable\x20notifications\x0a','add-bot','constructor','then','getTime','Orders','data','All\x20bots','Unauthorized\x20attempt\x20to\x20delete\x20bot','mkdirSync','apply','get-logs','getUTCHours','All','414954IkQlfs','http','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getMinutes','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','No\x20authentication\x20token','disabled','getDate','login\x20token\x20generated','starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20add\x20bot','config/','type','/off\x20-\x20stop\x20bot(s)\x0a','ipaddr.js','temporary\x20access\x20not\x20allowed','enabled','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','deleteHistoryAlerts','argv','loginRequired','clientip','Error:\x20Invalid\x20argument\x20','timestamp','settings.','removeListener','encryptedUuid','path','live','new-disabled','2FA\x20login\x20required','success',',\x20must\x20be\x20a\x204\x20digit\x20number','value','lowdb/adapters/FileSync','\x20|\x20','bot-','No\x20bots\x20running\x20right\x20now','Notifications\x20disabled\x0a','whitelistEnabled','handshake','Alerts','Password\x20has\x20been\x20reset\x20to:\x20','sockets','604212jGLvdM','temporary\x20token\x20generated','event','/help\x20-\x20show\x20available\x20commands\x0a','once','get-starting-balances','disabled\x20Bot\x20','login\x20not\x20required','Bot\x20','page','use','search','starting\x20bot\x20|\x20Bot\x20','publicKey','env','toIPv4Address','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','stopped','/names\x20-\x20show\x20bot\x20names\x0a','toIPv4MappedAddress','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','login\x20required','kill','access','show','fork','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Unauthorized\x20login\x20attempt\x20(timeout)','chat','access\x20timeout','store-configuration','stopPolling','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','timeshift','Unauthorized\x20attempt\x20to\x20delete\x20alerts','SIGINT','all','started','\x20minutes','hybrid-crypto-js','-results.json','telegramEnabled','decrypt','push','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','f2aRequired','lowdb','getPortfolio','callback_query','answerCallbackQuery','showname',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','backup/','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','server','order','version.json','mode','socket.io','@analytics/google-analytics','function','args','user','delete-bot','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','RSA','conn','includes','existsSync','orders','updatebotmanager','remoteAddress','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','catch','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','restart','connection','getHours','-----------------------------------------------------------------------------------','slice','idling\x20bot\x20\x20\x20|\x20Bot\x20','hasOwnProperty','onText','get-portfolio','split','Login\x20accepted','exp','secret','toString'];_0x434c=function(){return _0x2bc259;};return _0x434c();}function updateBB(){const _0x20fa9f=_0x57fbd8;installingUpdate=!![],config[_0x20fa9f(0x1ee)](_0x3351e3=>{const _0x63e213=_0x20fa9f;restartBot(_0x3351e3[_0x63e213(0x191)]);}),process[_0x20fa9f(0x21f)]({'update':!![]},_0xd1dfde=>{});}function startBot(_0x3c2845,_0xdbee9d,_0x3269de){const _0x27aedf=_0x57fbd8;let _0x1247cc=![];const _0x3b0a25=_0x3c2845[0x0];_0xdbee9d={..._0xdbee9d,'stdio':[_0x27aedf(0x1c8),_0x27aedf(0x1c8),'inherit',_0x27aedf(0x19a)]},pid[_0x3b0a25]=childProcess[_0x27aedf(0x127)](botfile,_0x3c2845,_0xdbee9d),pid[_0x3b0a25]['on']('message',_0x1f5f33=>{const _0x556b94=_0x27aedf;switch(Object[_0x556b94(0x1d9)](_0x1f5f33)[0x0]){case'botname':updateBotName(_0x3b0a25,_0x1f5f33[_0x556b94(0x209)]);break;case _0x556b94(0x154):updateBotManager();break;case'status':updateStatus(_0x3b0a25,_0x1f5f33['status']);break;case _0x556b94(0x24e):updateLive(_0x3b0a25,_0x1f5f33[_0x556b94(0x24e)]);break;case _0x556b94(0x133):updateLive(_0x3b0a25,_0x1f5f33['started']),io['to'](_0x3b0a25)[_0x556b94(0x1aa)](_0x556b94(0x192),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x1f5f33[_0x556b94(0x1e3)]==_0x556b94(0x159)&&restartBot(_0x3b0a25);_0x1f5f33['stop']=='kill'&&toggleBot(_0x3b0a25,_0x556b94(0x238),'stopped');break;case _0x556b94(0x1be):sendTelegram(_0x3b0a25,_0x1f5f33[_0x556b94(0x1be)]);break;case _0x556b94(0x14a):io['to'](_0x3b0a25)[_0x556b94(0x1aa)](_0x1f5f33['function'],_0x1f5f33[_0x556b94(0x14b)]);break;}}),pid[_0x3b0a25]['on']('error',function(_0x17c6b9){if(_0x1247cc)return;_0x1247cc=!![],_0x3269de(_0x17c6b9);}),pid[_0x3b0a25]['on'](_0x27aedf(0x207),function(_0x14f75f){const _0x4a018f=_0x27aedf;if(installingUpdate)return;if(_0x1247cc)return;_0x1247cc=!![],_0x3269de(null);const _0x1bbbb1=dbConfig[_0x4a018f(0x1a1)]('bots')[_0x4a018f(0x19d)]({'botID':_0x3b0a25})[_0x4a018f(0x253)]();_0x1bbbb1&&(_0x1bbbb1[_0x4a018f(0x192)]==_0x4a018f(0x242)||_0x1bbbb1[_0x4a018f(0x192)]==_0x4a018f(0x1fe))&&(updateLive(_0x3b0a25,'stopped'),logging(_0x4a018f(0x1a7)+_0x3b0a25),startBot([_0x3b0a25,userID],{'cwd':bbpath},function(_0x3cf6d4){if(_0x3cf6d4)logging(_0x3cf6d4);}));});}function stopBot(_0x13a145){const _0x2f3d6d=_0x57fbd8;getClientsWithBotID(_0x13a145)['forEach'](_0x3185c9=>{getSocket(_0x3185c9['id'])['disconnect'](!![]),removeClient(_0x3185c9['id']);}),pid[_0x13a145]&&(pid[_0x13a145][_0x2f3d6d(0x124)](),pid[_0x13a145]=null);}function restartBot(_0x5b9ada){if(pid[_0x5b9ada])pid[_0x5b9ada]['kill']();}function addBot(){const _0x2c3245=_0x57fbd8;let _0x8919b0;for(let _0x4a3c77=0x1;_0x4a3c77<0x3e9;_0x4a3c77++){_0x8919b0=_0x4a3c77[_0x2c3245(0x166)]()[_0x2c3245(0x170)](0x3,'0');let _0x12105a=config[_0x2c3245(0x19d)](_0xba24ba=>_0xba24ba[_0x2c3245(0x191)]==_0x8919b0);if(!_0x12105a)break;}if(_0x8919b0===_0x2c3245(0x1ff)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x2c3245(0x23b)+_0x8919b0),dbConfig[_0x2c3245(0x1a1)](_0x2c3245(0x1c1))[_0x2c3245(0x139)]({'botID':_0x8919b0,'botname':_0x2c3245(0x116)+_0x8919b0,'status':_0x2c3245(0x1fe),'live':''})[_0x2c3245(0x1c9)](),startBot([_0x8919b0,userID],{'cwd':bbpath},function(_0xdebe8c){if(_0xdebe8c)logging(_0xdebe8c);}),config=getConfiguration(),io['to'](_0x2c3245(0x1bb))['emit'](_0x2c3245(0x1c1),config);}function deleteBot(_0x1fcc89){const _0x400f32=_0x57fbd8;getClientsWithBotID(_0x1fcc89)[_0x400f32(0x1ee)](_0x3eac24=>{const _0x3e1686=_0x400f32;getSocket(_0x3eac24['id'])[_0x3e1686(0x17e)](!![]),removeClient(_0x3eac24['id']);}),dbConfig['get']('bots')[_0x400f32(0x1e4)]({'botID':_0x1fcc89})[_0x400f32(0x1c9)](),logging(_0x400f32(0x1ac)+_0x1fcc89),stopBot(_0x1fcc89);try{fs['unlinkSync'](path[_0x400f32(0x1cc)](configpath,_0x400f32(0x256)+_0x1fcc89+'-config.json')),fs['unlinkSync'](path[_0x400f32(0x1cc)](configpath,'bot-'+_0x1fcc89+_0x400f32(0x1ce))),fs[_0x400f32(0x1af)](path[_0x400f32(0x1cc)](configpath,_0x400f32(0x256)+_0x1fcc89+_0x400f32(0x16f))),fs[_0x400f32(0x1af)](path[_0x400f32(0x1cc)](configpath,'bot-'+_0x1fcc89+_0x400f32(0x136)));}catch(_0x4305f9){if(_0x4305f9)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x4305f9);}config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function toggleBot(_0x5aafb3,_0x1ca066,_0x321fb0){const _0x3cc8b0=_0x57fbd8;dbConfig[_0x3cc8b0(0x1a1)](_0x3cc8b0(0x1c1))[_0x3cc8b0(0x19d)]({'botID':_0x5aafb3})['assign']({'status':_0x1ca066})[_0x3cc8b0(0x19f)]({'live':_0x321fb0})[_0x3cc8b0(0x1c9)]();if(_0x1ca066=='enabled'||_0x1ca066==_0x3cc8b0(0x1fe))logging('enabled\x20Bot\x20'+_0x5aafb3),startBot([_0x5aafb3,userID],{'cwd':bbpath},function(_0xcee27e){if(_0xcee27e)logging(_0xcee27e);});else(_0x1ca066=='disabled'||_0x1ca066==_0x3cc8b0(0x24f))&&(logging(_0x3cc8b0(0x264)+_0x5aafb3),stopBot(_0x5aafb3));config=getConfiguration(),io['to']('botmanager')[_0x3cc8b0(0x1aa)]('bots',config);}function toggleStatus(_0x1e68ac){const _0x3e0937=_0x57fbd8;let _0x5d174f=dbConfig[_0x3e0937(0x1a1)]('bots')[_0x3e0937(0x19d)]({'botID':_0x1e68ac})[_0x3e0937(0x253)](),_0x4d4a2f;if(_0x5d174f[_0x3e0937(0x192)]===_0x3e0937(0x242))_0x4d4a2f=_0x3e0937(0x238);else{if(_0x5d174f[_0x3e0937(0x192)]==='new')_0x4d4a2f=_0x3e0937(0x24f);else{if(_0x5d174f['status']===_0x3e0937(0x24f))_0x4d4a2f=_0x3e0937(0x1fe);else{if(_0x5d174f[_0x3e0937(0x192)]==='disabled')_0x4d4a2f=_0x3e0937(0x242);}}}return _0x4d4a2f;}function updateStatus(_0x354591,_0x5cecb0){const _0x33f5e9=_0x57fbd8;dbConfig[_0x33f5e9(0x1a1)](_0x33f5e9(0x1c1))[_0x33f5e9(0x19d)]({'botID':_0x354591})[_0x33f5e9(0x19f)]({'status':_0x5cecb0})[_0x33f5e9(0x1c9)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x33f5e9(0x1c1),config);}function _0x4077(_0xd097ba,_0x27bed7){const _0x426b66=_0x434c();return _0x4077=function(_0x23e826,_0x49e34c){_0x23e826=_0x23e826-0x115;let _0x434c99=_0x426b66[_0x23e826];return _0x434c99;},_0x4077(_0xd097ba,_0x27bed7);}function updateLive(_0x16b49d,_0x1a0adb){const _0x1b3aac=_0x57fbd8;dbConfig[_0x1b3aac(0x1a1)](_0x1b3aac(0x1c1))[_0x1b3aac(0x19d)]({'botID':_0x16b49d})[_0x1b3aac(0x19f)]({'live':_0x1a0adb})['write'](),config=getConfiguration(),io['to'](_0x1b3aac(0x1bb))[_0x1b3aac(0x1aa)](_0x1b3aac(0x1c1),config);}function updateBotName(_0x42a36b,_0xeaf3fd){const _0x28cadf=_0x57fbd8;dbConfig[_0x28cadf(0x1a1)]('bots')[_0x28cadf(0x19d)]({'botID':_0x42a36b})['assign']({'botname':_0xeaf3fd})['write'](),config=getConfiguration(),io['to'](_0x28cadf(0x1bb))['emit'](_0x28cadf(0x1c1),config);}function updateBotManager(){const _0x3f235b=_0x57fbd8;config=getConfiguration(),io['to'](_0x3f235b(0x1bb))[_0x3f235b(0x1aa)]('bots',config);}function toggleBotMode(_0x4c4d3e){const _0xf97df9=_0x57fbd8;if(pid[_0x4c4d3e])pid[_0x4c4d3e][_0xf97df9(0x21f)]({'function':_0xf97df9(0x201),'args':null});else{const _0x4390fb=configpath+'bot-'+_0x4c4d3e+_0xf97df9(0x1d6),_0x3890b4=fs[_0xf97df9(0x1fa)](_0x4390fb),_0x3ba489=JSON[_0xf97df9(0x1f6)](_0x3890b4),_0xb4fea=_0x3ba489['bot'][0x0]['headless'];_0x3ba489[_0xf97df9(0x1c4)][0x0][_0xf97df9(0x18e)]=!_0xb4fea;const _0x39ed70=JSON['stringify'](_0x3ba489,null,0x2);fs[_0xf97df9(0x212)](_0x4390fb,_0x39ed70),config=getConfiguration(),io['to'](_0xf97df9(0x1bb))[_0xf97df9(0x1aa)]('bots',config);}}function telegramError(_0x3f0cf3){const _0x12c653=_0x57fbd8;console[_0x12c653(0x1b5)](getTimeStamp()+_0x12c653(0x141));}function validateTelegram(_0x5f1787){const _0x56a344=_0x57fbd8;if(_0x5f1787[_0x56a344(0x16c)]['username']!=settings[_0x56a344(0x17f)]&&'@'+_0x5f1787[_0x56a344(0x16c)]['username']!=settings[_0x56a344(0x17f)])return tgBot['sendMessage'](_0x5f1787[_0x56a344(0x12a)]['id'],_0x56a344(0x14e),{'parse_mode':_0x56a344(0x211)})[_0x56a344(0x157)](_0x5b7171=>{telegramError(_0x5b7171);}),![];return!![];}async function initTelegram(){const _0x528433=_0x57fbd8;if(tgBot)tgBot[_0x528433(0x12d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x528433(0x1eb)],{'polling':!![]});let _0x427248=_0x528433(0x1fc);_0x427248+='\x0a',_0x427248+=_0x528433(0x224),_0x427248+='/disable\x20-\x20disable\x20notifications\x0a',_0x427248+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x427248+=_0x528433(0x217),_0x427248+=_0x528433(0x221),_0x427248+=_0x528433(0x23f),_0x427248+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x427248+=_0x528433(0x120),_0x427248+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x427248+=_0x528433(0x261);let _0x1a467b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x1a467b+='\x0a',_0x1a467b+=_0x427248,tgBot[_0x528433(0x160)](/\/start/,_0x131b8f=>{const _0x5cf355=_0x528433;if(!validateTelegram(_0x131b8f))return;if(settings[_0x5cf355(0x1f0)]!=_0x131b8f[_0x5cf355(0x12a)]['id'])updateSetting(_0x5cf355(0x1f0),_0x131b8f[_0x5cf355(0x12a)]['id']);updateSetting(_0x5cf355(0x137),!![]),tgBot[_0x5cf355(0x180)](_0x131b8f[_0x5cf355(0x12a)]['id'],_0x1a467b)['catch'](_0x17b798=>{telegramError(_0x17b798);});}),tgBot[_0x528433(0x160)](/\/enable/,_0x1b88ff=>{const _0x21f14a=_0x528433;if(!validateTelegram(_0x1b88ff))return;if(settings['telegramChatId']!=_0x1b88ff[_0x21f14a(0x12a)]['id'])updateSetting('telegramChatId',_0x1b88ff[_0x21f14a(0x12a)]['id']);updateSetting(_0x21f14a(0x137),!![]),tgBot['sendMessage'](_0x1b88ff[_0x21f14a(0x12a)]['id'],_0x21f14a(0x20d))['catch'](_0x207a1f=>{telegramError(_0x207a1f);});}),tgBot[_0x528433(0x160)](/\/config/,async _0x1dc360=>{const _0x3ef84c=_0x528433;if(!validateTelegram(_0x1dc360))return;tgBot[_0x3ef84c(0x24b)](_0x3ef84c(0x13e)),tgBot[_0x3ef84c(0x180)](_0x1dc360[_0x3ef84c(0x12a)]['id'],_0x3ef84c(0x13a),{'reply_markup':{'inline_keyboard':[[{'text':_0x3ef84c(0x229),'callback_data':'orders'},{'text':_0x3ef84c(0x25b),'callback_data':'alerts'},{'text':_0x3ef84c(0x231),'callback_data':'all'}]]}})['catch'](_0x482561=>{telegramError(_0x482561);}),tgBot['on'](_0x3ef84c(0x13e),async _0x1e3d9e=>{const _0x15236f=_0x3ef84c,_0x43a5c6=_0x1e3d9e['data'],_0xbe5b07=_0x1e3d9e[_0x15236f(0x1d1)];tgBot[_0x15236f(0x13f)](_0x1e3d9e['id'])['then'](async()=>{const _0x5c57d8=_0x15236f;_0x43a5c6==_0x5c57d8(0x153)&&(updateSetting('telegramEvents',_0x5c57d8(0x153)),updateSetting('telegramEnabled',!![]),await tgBot[_0x5c57d8(0x180)](_0xbe5b07[_0x5c57d8(0x12a)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x5c57d8(0x157)](_0x4e81c2=>{telegramError(_0x4e81c2);}));_0x43a5c6==_0x5c57d8(0x1cf)&&(updateSetting('telegramEvents',_0x5c57d8(0x1cf)),updateSetting(_0x5c57d8(0x137),!![]),await tgBot[_0x5c57d8(0x180)](_0xbe5b07[_0x5c57d8(0x12a)]['id'],_0x5c57d8(0x234))[_0x5c57d8(0x157)](_0x450746=>{telegramError(_0x450746);}));_0x43a5c6==_0x5c57d8(0x132)&&(updateSetting(_0x5c57d8(0x1a4),_0x5c57d8(0x132)),updateSetting(_0x5c57d8(0x137),!![]),await tgBot['sendMessage'](_0xbe5b07[_0x5c57d8(0x12a)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x5c57d8(0x157)](_0x3a686c=>{telegramError(_0x3a686c);}));if(!settings[_0x5c57d8(0x1f0)])tgBot['sendMessage'](_0xbe5b07['chat']['id'],_0x5c57d8(0x122))['catch'](_0x102d00=>{telegramError(_0x102d00);});}),tgBot['removeListener']('callback_query');});}),tgBot[_0x528433(0x160)](/\/status/,_0x3b41bc=>{const _0x2f7b8f=_0x528433;if(!validateTelegram(_0x3b41bc))return;const _0x57a7db=getBotsWithMode();let _0x5b80e0=_0x2f7b8f(0x218);config[_0x2f7b8f(0x1ee)](_0x3d6ba5=>{const _0x45ab04=_0x2f7b8f,_0x58a955=_0x57a7db['find'](_0x2f8781=>_0x2f8781[_0x45ab04(0x191)]==_0x3d6ba5['botID'])[_0x45ab04(0x147)];_0x5b80e0+='Bot\x20'+_0x3d6ba5[_0x45ab04(0x191)]+':\x20'+_0x3d6ba5[_0x45ab04(0x192)]+'\x20|\x20'+_0x58a955+_0x45ab04(0x255)+_0x3d6ba5[_0x45ab04(0x24e)]+'\x0a';}),_0x5b80e0+='\x0a',_0x5b80e0+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x5b80e0+=!settings[_0x2f7b8f(0x137)]?_0x2f7b8f(0x258):_0x2f7b8f(0x18c),_0x5b80e0+=settings[_0x2f7b8f(0x137)]?settings[_0x2f7b8f(0x1a4)]=='all'?_0x2f7b8f(0x1ca):_0x2f7b8f(0x1da)+settings[_0x2f7b8f(0x1a4)]+'\x20only\x0a':'',tgBot[_0x2f7b8f(0x180)](_0x3b41bc[_0x2f7b8f(0x12a)]['id'],_0x5b80e0,{'parse_mode':_0x2f7b8f(0x211)})[_0x2f7b8f(0x157)](_0x380932=>{telegramError(_0x380932);});}),tgBot['onText'](/\/restart/,_0xb707be=>{const _0x3a9d84=_0x528433;if(!validateTelegram(_0xb707be))return;tgBot[_0x3a9d84(0x24b)](_0x3a9d84(0x13e));const _0xce26a2=getEnabledBots();if(_0xce26a2[_0x3a9d84(0x1f5)]==0x0)tgBot[_0x3a9d84(0x180)](_0xb707be[_0x3a9d84(0x12a)]['id'],_0x3a9d84(0x257))[_0x3a9d84(0x157)](_0xc24bd=>{telegramError(_0xc24bd);});else{if(_0xce26a2['length']>0x1)_0xce26a2[_0x3a9d84(0x139)]({'botID':'all'});let _0x1c7f2e=[],_0x1efc8e=[];const _0x144ae9=_0xce26a2['length']%0x4==0x0||_0xce26a2[_0x3a9d84(0x1f5)]%0x4==0x3||_0xce26a2['length']%0x3==0x1?0x4:0x3;let _0x2afe3d=0x0;_0xce26a2[_0x3a9d84(0x1ee)]((_0x31b252,_0x12e4d7)=>{const _0x3fc660=_0x3a9d84;if(_0x12e4d7%_0x144ae9==0x0)_0x1efc8e=[];_0x1efc8e[_0x3fc660(0x139)]({'text':_0x31b252['botID']==_0x3fc660(0x132)?_0x3fc660(0x22b):_0x3fc660(0x116)+_0x31b252[_0x3fc660(0x191)],'callback_data':_0x31b252[_0x3fc660(0x191)]}),_0x12e4d7%_0x144ae9==0x0&&(_0x1c7f2e[_0x2afe3d]=_0x1efc8e,_0x2afe3d++);}),tgBot[_0x3a9d84(0x180)](_0xb707be[_0x3a9d84(0x12a)]['id'],_0x3a9d84(0x193),{'reply_markup':{'inline_keyboard':_0x1c7f2e}})[_0x3a9d84(0x157)](_0x35fb65=>{telegramError(_0x35fb65);}),tgBot['on'](_0x3a9d84(0x13e),async _0x3ba3a6=>{const _0x2a09c5=_0x3a9d84,_0x23557c=_0x3ba3a6[_0x2a09c5(0x22a)],_0x2a00f5=_0x3ba3a6[_0x2a09c5(0x1d1)];tgBot['answerCallbackQuery'](_0x3ba3a6['id'])[_0x2a09c5(0x227)](async()=>{const _0x3030be=_0x2a09c5;_0x23557c==_0x3030be(0x132)?(tgBot['sendMessage'](_0x2a00f5[_0x3030be(0x12a)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x3030be(0x157)](_0x43e9df=>{telegramError(_0x43e9df);}),config['forEach'](_0x5cc2a0=>{const _0x1878c9=_0x3030be;restartBot(_0x5cc2a0[_0x1878c9(0x191)]);})):(tgBot[_0x3030be(0x180)](_0x2a00f5[_0x3030be(0x12a)]['id'],_0x3030be(0x128)+_0x23557c)['catch'](_0x58bdad=>{telegramError(_0x58bdad);}),restartBot(_0x23557c));}),tgBot[_0x2a09c5(0x24b)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x427d2c=>{const _0x165ad2=_0x528433;if(!validateTelegram(_0x427d2c))return;tgBot[_0x165ad2(0x24b)]('callback_query');const _0x4c110b=getDisabledBots();if(_0x4c110b['length']==0x0)tgBot[_0x165ad2(0x180)](_0x427d2c[_0x165ad2(0x12a)]['id'],_0x165ad2(0x1ef))[_0x165ad2(0x157)](_0x1c80a8=>{telegramError(_0x1c80a8);});else{if(_0x4c110b[_0x165ad2(0x1f5)]>0x1)_0x4c110b[_0x165ad2(0x139)]({'botID':_0x165ad2(0x132)});let _0xfe1735=[],_0x2bf6c3=[];const _0x50191d=_0x4c110b['length']%0x4==0x0||_0x4c110b['length']%0x4==0x3||_0x4c110b[_0x165ad2(0x1f5)]%0x3==0x1?0x4:0x3;let _0x22458b=0x0;_0x4c110b[_0x165ad2(0x1ee)]((_0x2f97e9,_0x350d7f)=>{const _0x3e370c=_0x165ad2;if(_0x350d7f%_0x50191d==0x0)_0x2bf6c3=[];_0x2bf6c3[_0x3e370c(0x139)]({'text':_0x2f97e9[_0x3e370c(0x191)]==_0x3e370c(0x132)?'All\x20bots':_0x3e370c(0x116)+_0x2f97e9['botID'],'callback_data':_0x2f97e9['botID']}),_0x350d7f%_0x50191d==0x0&&(_0xfe1735[_0x22458b]=_0x2bf6c3,_0x22458b++);}),tgBot[_0x165ad2(0x180)](_0x427d2c['chat']['id'],_0x165ad2(0x176),{'reply_markup':{'inline_keyboard':_0xfe1735}})['catch'](_0x11ff75=>{telegramError(_0x11ff75);}),tgBot['on'](_0x165ad2(0x13e),async _0x4bccc9=>{const _0x18d66a=_0x165ad2,_0x1123d7=_0x4bccc9[_0x18d66a(0x22a)],_0x38785a=_0x4bccc9['message'];tgBot[_0x18d66a(0x13f)](_0x4bccc9['id'])[_0x18d66a(0x227)](async()=>{const _0x4d40b2=_0x18d66a;_0x1123d7==_0x4d40b2(0x132)?(tgBot['sendMessage'](_0x38785a[_0x4d40b2(0x12a)]['id'],_0x4d40b2(0x1a6))[_0x4d40b2(0x157)](_0x53f5fe=>{telegramError(_0x53f5fe);}),_0x4c110b[_0x4d40b2(0x1ee)](_0x382841=>{const _0x47cecc=_0x4d40b2;if(_0x382841[_0x47cecc(0x191)]!=_0x47cecc(0x132))toggleBot(_0x382841['botID'],toggleStatus(_0x382841[_0x47cecc(0x191)]),_0x47cecc(0x11f));})):(tgBot[_0x4d40b2(0x180)](_0x38785a[_0x4d40b2(0x12a)]['id'],_0x4d40b2(0x203)+_0x1123d7)['catch'](_0x1c37f0=>{telegramError(_0x1c37f0);}),toggleBot(_0x1123d7,toggleStatus(_0x1123d7),'stopped'));}),tgBot[_0x18d66a(0x24b)]('callback_query');});}}),tgBot[_0x528433(0x160)](/\/off/,_0x4d3770=>{const _0x2af2ad=_0x528433;if(!validateTelegram(_0x4d3770))return;tgBot[_0x2af2ad(0x24b)](_0x2af2ad(0x13e));const _0x24e73d=getEnabledBots();if(_0x24e73d[_0x2af2ad(0x1f5)]==0x0)tgBot[_0x2af2ad(0x180)](_0x4d3770[_0x2af2ad(0x12a)]['id'],_0x2af2ad(0x257))[_0x2af2ad(0x157)](_0x2b039b=>{telegramError(_0x2b039b);});else{if(_0x24e73d[_0x2af2ad(0x1f5)]>0x1)_0x24e73d['push']({'botID':'all'});let _0x26437d=[],_0x3f15a6=[];const _0x4beeb5=_0x24e73d[_0x2af2ad(0x1f5)]%0x4==0x0||_0x24e73d[_0x2af2ad(0x1f5)]%0x4==0x3||_0x24e73d[_0x2af2ad(0x1f5)]%0x3==0x1?0x4:0x3;let _0xb7c1a3=0x0;_0x24e73d[_0x2af2ad(0x1ee)]((_0x22b655,_0x1e31a8)=>{const _0x195d4e=_0x2af2ad;if(_0x1e31a8%_0x4beeb5==0x0)_0x3f15a6=[];_0x3f15a6['push']({'text':_0x22b655[_0x195d4e(0x191)]==_0x195d4e(0x132)?_0x195d4e(0x22b):_0x195d4e(0x116)+_0x22b655[_0x195d4e(0x191)],'callback_data':_0x22b655[_0x195d4e(0x191)]}),_0x1e31a8%_0x4beeb5==0x0&&(_0x26437d[_0xb7c1a3]=_0x3f15a6,_0xb7c1a3++);}),tgBot['sendMessage'](_0x4d3770['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x26437d}})[_0x2af2ad(0x157)](_0x5571e7=>{telegramError(_0x5571e7);}),tgBot['on'](_0x2af2ad(0x13e),async _0x4a592e=>{const _0x133bc5=_0x2af2ad,_0x5e8fbf=_0x4a592e[_0x133bc5(0x22a)],_0x1b76e1=_0x4a592e[_0x133bc5(0x1d1)];tgBot[_0x133bc5(0x13f)](_0x4a592e['id'])[_0x133bc5(0x227)](async()=>{const _0x1c6d70=_0x133bc5;_0x5e8fbf==_0x1c6d70(0x132)?(tgBot[_0x1c6d70(0x180)](_0x1b76e1[_0x1c6d70(0x12a)]['id'],_0x1c6d70(0x12e))[_0x1c6d70(0x157)](_0x3dff3d=>{telegramError(_0x3dff3d);}),_0x24e73d['forEach'](_0x462a7d=>{const _0x3dc5c6=_0x1c6d70;if(_0x462a7d[_0x3dc5c6(0x191)]!=_0x3dc5c6(0x132))toggleBot(_0x462a7d[_0x3dc5c6(0x191)],toggleStatus(_0x462a7d[_0x3dc5c6(0x191)]),'stopped');})):(tgBot['sendMessage'](_0x1b76e1[_0x1c6d70(0x12a)]['id'],_0x1c6d70(0x1b7)+_0x5e8fbf)[_0x1c6d70(0x157)](_0x202320=>{telegramError(_0x202320);}),toggleBot(_0x5e8fbf,toggleStatus(_0x5e8fbf),'stopped'));}),tgBot[_0x133bc5(0x24b)]('callback_query');});}}),tgBot[_0x528433(0x160)](/\/toggle/,_0x5dfb53=>{const _0x33f19f=_0x528433;if(!validateTelegram(_0x5dfb53))return;tgBot[_0x33f19f(0x24b)](_0x33f19f(0x13e));const _0x5b42a0=getBotsWithMode();if(_0x5b42a0[_0x33f19f(0x1f5)]==0x0)tgBot[_0x33f19f(0x180)](_0x5dfb53['chat']['id'],_0x33f19f(0x257))['catch'](_0x3fe768=>{telegramError(_0x3fe768);});else{let _0x354aed=[],_0x24bfc7=[];const _0xe30df7=0x2;let _0x37c5d3=0x0;_0x5b42a0[_0x33f19f(0x1ee)]((_0x5b6d88,_0x48b764)=>{const _0x59f2a3=_0x33f19f;if(_0x48b764%_0xe30df7==0x0)_0x24bfc7=[];_0x24bfc7[_0x59f2a3(0x139)]({'text':_0x59f2a3(0x116)+_0x5b6d88[_0x59f2a3(0x191)]+'\x20('+_0x5b6d88[_0x59f2a3(0x147)]+')','callback_data':_0x5b6d88[_0x59f2a3(0x191)]}),_0x48b764%_0xe30df7==0x0&&(_0x354aed[_0x37c5d3]=_0x24bfc7,_0x37c5d3++);}),tgBot['sendMessage'](_0x5dfb53['chat']['id'],_0x33f19f(0x11e),{'reply_markup':{'inline_keyboard':_0x354aed}})[_0x33f19f(0x157)](_0x24cfd6=>{telegramError(_0x24cfd6);}),tgBot['on'](_0x33f19f(0x13e),async _0x455bba=>{const _0x1c83b8=_0x33f19f,_0x10127d=_0x455bba[_0x1c83b8(0x22a)],_0x38d5b3=_0x455bba['message'];tgBot[_0x1c83b8(0x13f)](_0x455bba['id'])[_0x1c83b8(0x227)](async()=>{const _0x256420=_0x1c83b8,_0x577fd0=_0x5b42a0[_0x256420(0x19d)](_0x1a5a23=>_0x1a5a23[_0x256420(0x191)]==_0x10127d),_0x3e7987=_0x577fd0[_0x256420(0x147)]=='auto'?_0x256420(0x1de):'auto';tgBot[_0x256420(0x180)](_0x38d5b3[_0x256420(0x12a)]['id'],_0x256420(0x18b)+_0x10127d+'\x20to\x20'+_0x3e7987+'\x20mode')[_0x256420(0x157)](_0x28a33d=>{telegramError(_0x28a33d);}),toggleBotMode(_0x10127d);}),tgBot[_0x1c83b8(0x24b)](_0x1c83b8(0x13e));});}}),tgBot[_0x528433(0x160)](/\/names/,_0x325455=>{const _0x29e569=_0x528433;if(!validateTelegram(_0x325455))return;let _0x1d7f4f='';config[_0x29e569(0x1ee)](_0x6984e=>{const _0x2879b6=_0x29e569;_0x1d7f4f+=_0x2879b6(0x116)+_0x6984e['botID']+':\x20'+_0x6984e['botname']+'\x0a';}),tgBot[_0x29e569(0x180)](_0x325455[_0x29e569(0x12a)]['id'],_0x1d7f4f,{'parse_mode':_0x29e569(0x211)})[_0x29e569(0x157)](_0x21c195=>{telegramError(_0x21c195);});}),tgBot['onText'](/\/disable/,_0x2479d4=>{const _0x591d0f=_0x528433;if(!validateTelegram(_0x2479d4))return;tgBot[_0x591d0f(0x180)](_0x2479d4[_0x591d0f(0x12a)]['id'],'Notifications\x20disabled')[_0x591d0f(0x157)](_0x28755f=>{telegramError(_0x28755f);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x528433(0x160)](/\/help/,_0x18f5b8=>{const _0x5a97f9=_0x528433;if(!validateTelegram(_0x18f5b8))return;tgBot['sendMessage'](_0x18f5b8['chat']['id'],_0x427248)[_0x5a97f9(0x157)](_0x9b7c0d=>{telegramError(_0x9b7c0d);});}),tgBot['on']('polling_error',_0x4272ce=>{const _0x152879=_0x528433;_0x4272ce[_0x152879(0x166)]()[_0x152879(0x151)](_0x152879(0x20b))&&(logging(_0x152879(0x195)),tgBot[_0x152879(0x12d)](),tgBot=null,io['to'](_0x152879(0x1bb))[_0x152879(0x1aa)](_0x152879(0x181),_0x152879(0x195)));}),process[_0x528433(0x262)](_0x528433(0x131),()=>{const _0x5485bc=_0x528433;if(tgBot)tgBot['stopPolling']();process[_0x5485bc(0x207)](0x1);}),process[_0x528433(0x262)]('SIGTERM',()=>{const _0x2d551b=_0x528433;if(tgBot)tgBot['stopPolling']();process[_0x2d551b(0x207)](0x1);});}}function disableTelegram(){const _0x3acf5f=_0x57fbd8;tgBot&&(tgBot[_0x3acf5f(0x12d)](),tgBot=null);}function sendTelegram(_0x56f6ba,_0x1da737){const _0x2f4e05=_0x57fbd8;if(settings['telegramEnabled']){if(settings[_0x2f4e05(0x1a4)]==_0x2f4e05(0x132)||(_0x1da737[_0x2f4e05(0x23e)]==_0x2f4e05(0x1ad)||_0x1da737[_0x2f4e05(0x23e)]==_0x2f4e05(0x251))&&settings[_0x2f4e05(0x1a4)]==_0x2f4e05(0x1cf)||_0x1da737['type']==_0x2f4e05(0x145)&&settings[_0x2f4e05(0x1a4)]==_0x2f4e05(0x153)){if(tgBot&&settings['telegramChatId']){if(_0x1da737[_0x2f4e05(0x140)])tgBot[_0x2f4e05(0x180)](settings['telegramChatId'],_0x1da737[_0x2f4e05(0x209)]+_0x2f4e05(0x1a3)+_0x1da737[_0x2f4e05(0x260)])[_0x2f4e05(0x157)](_0x31d7b6=>{telegramError(_0x31d7b6);});else tgBot[_0x2f4e05(0x180)](settings['telegramChatId'],'Bot\x20'+_0x56f6ba+_0x2f4e05(0x1a3)+_0x1da737[_0x2f4e05(0x260)])[_0x2f4e05(0x157)](_0x119e16=>{telegramError(_0x119e16);});}}}}function getDeviceWithIp(_0x39a8dd){const _0x481318=_0x57fbd8;return devices[_0x481318(0x19d)](_0x10b2f7=>_0x10b2f7['ip']===_0x39a8dd);}function temporaryAccess2FA(_0x3ae7b0,_0x1b089c){const _0x51aff6=_0x57fbd8;let _0x1da515=new Date(),_0x4e6a57=![];if(lastIpApproval){if(_0x1da515-lastIpApproval<0x1388)_0x4e6a57=!![];}lastIpApproval=new Date();if(_0x4e6a57)return;tgBot&&settings[_0x51aff6(0x1f0)]&&(tgBot[_0x51aff6(0x24b)]('callback_query'),tgBot[_0x51aff6(0x180)](settings[_0x51aff6(0x1f0)],_0x51aff6(0x236)+normalizeIP(_0x1b089c)[_0x51aff6(0x126)]+_0x51aff6(0x188),{'parse_mode':_0x51aff6(0x211),'reply_markup':{'inline_keyboard':[[{'text':_0x51aff6(0x19b),'callback_data':'5'},{'text':_0x51aff6(0x1f1),'callback_data':'15'},{'text':_0x51aff6(0x1ae),'callback_data':'30'},{'text':_0x51aff6(0x220),'callback_data':_0x51aff6(0x220)}]]}})[_0x51aff6(0x157)](_0x5bbd47=>{telegramError(_0x5bbd47);}),tgBot['on'](_0x51aff6(0x13e),async _0x53e18f=>{const _0x254889=_0x51aff6,_0x13cf00=_0x53e18f[_0x254889(0x22a)],_0x30d6d7=_0x53e18f['message'];tgBot[_0x254889(0x13f)](_0x53e18f['id'])['then'](async()=>{const _0x411f83=_0x254889;devices[_0x3ae7b0][_0x411f83(0x186)]={'clientip':_0x1b089c,'timestamp':new Date()[_0x411f83(0x228)](),'expiry':_0x13cf00},_0x13cf00!='reject'?(await tgBot[_0x411f83(0x180)](_0x30d6d7[_0x411f83(0x12a)]['id'],_0x411f83(0x205)+_0x13cf00+_0x411f83(0x134),{'parse_mode':_0x411f83(0x211)})['catch'](_0x5a6fe4=>{telegramError(_0x5a6fe4);}),io['to'](_0x3ae7b0)['emit']('status',{'access':{'allow':![],'reason':_0x411f83(0x1d5),'token':null}})):(await tgBot[_0x411f83(0x180)](_0x30d6d7[_0x411f83(0x12a)]['id'],_0x411f83(0x1b1))['catch'](_0x2d7f67=>{telegramError(_0x2d7f67);}),io['to'](_0x3ae7b0)[_0x411f83(0x1aa)](_0x411f83(0x192),{'access':{'allow':![],'reason':_0x411f83(0x182),'token':null}}));}),tgBot[_0x254889(0x24b)]('callback_query');}));}function loginAccess2FA(_0x2200d3,_0x4c332e){const _0x86d307=_0x57fbd8;tgBot&&settings[_0x86d307(0x1f0)]&&(tgBot[_0x86d307(0x24b)](_0x86d307(0x13e)),tgBot[_0x86d307(0x180)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4c332e)[_0x86d307(0x126)]+_0x86d307(0x188),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':_0x86d307(0x220)}]]}})[_0x86d307(0x157)](_0x26cb30=>{telegramError(_0x26cb30);}),tgBot['on'](_0x86d307(0x13e),async _0x7e2973=>{const _0x26bf8c=_0x86d307,_0x3c3aff=_0x7e2973[_0x26bf8c(0x22a)],_0x125384=_0x7e2973[_0x26bf8c(0x1d1)];tgBot[_0x26bf8c(0x13f)](_0x7e2973['id'])[_0x26bf8c(0x227)](async()=>{const _0x547124=_0x26bf8c;devices[_0x2200d3]['telegram2FaApproval']={'clientip':_0x4c332e,'timestamp':new Date()[_0x547124(0x228)](),'expiry':_0x3c3aff},_0x3c3aff!=_0x547124(0x220)?(await tgBot[_0x547124(0x180)](_0x125384['chat']['id'],_0x547124(0x163),{'parse_mode':_0x547124(0x211)})[_0x547124(0x157)](_0x17d662=>{telegramError(_0x17d662);}),io['to'](_0x2200d3)['emit']('status',{'access':{'allow':![],'reason':_0x547124(0x1d5),'token':null}})):(await tgBot[_0x547124(0x180)](_0x125384[_0x547124(0x12a)]['id'],_0x547124(0x17a))[_0x547124(0x157)](_0x37f828=>{telegramError(_0x37f828);}),io['to'](_0x2200d3)[_0x547124(0x1aa)](_0x547124(0x192),{'access':{'allow':![],'reason':_0x547124(0x1f9),'token':null}}));}),tgBot[_0x26bf8c(0x24b)](_0x26bf8c(0x13e));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x399358=_0x57fbd8;return dbConfig[_0x399358(0x1a1)](_0x399358(0x1c1))[_0x399358(0x17b)](_0x399358(0x191))[_0x399358(0x20e)]({'status':_0x399358(0x242)})[_0x399358(0x253)]()||[];}function getDisabledBots(){const _0x19e933=_0x57fbd8;return dbConfig[_0x19e933(0x1a1)](_0x19e933(0x1c1))[_0x19e933(0x17b)](_0x19e933(0x191))['filter']({'status':_0x19e933(0x238)})[_0x19e933(0x253)]()||[];}function getBotsWithMode(){const _0x5f3d52=_0x57fbd8,_0x4c3d66=dbConfig[_0x5f3d52(0x1a1)](_0x5f3d52(0x1c1))[_0x5f3d52(0x17b)]('botID')[_0x5f3d52(0x253)]()||[];return _0x4c3d66[_0x5f3d52(0x1ee)](_0x2e83fd=>{const _0x4b2826=_0x5f3d52,_0x2d6a47=configpath+'bot-'+_0x2e83fd[_0x4b2826(0x191)]+'-config.json',_0x1c49c4=fs[_0x4b2826(0x152)](_0x2d6a47);if(_0x1c49c4){const _0x2b1475=fs[_0x4b2826(0x1fa)](_0x2d6a47);try{const _0x107bc3=JSON[_0x4b2826(0x1f6)](_0x2b1475),_0x460f3d=_0x107bc3?_0x107bc3[_0x4b2826(0x1c4)][0x0][_0x4b2826(0x18e)]:![];_0x2e83fd[_0x4b2826(0x147)]=_0x460f3d?'auto':'manual';}catch(_0x1f79fd){_0x2e83fd[_0x4b2826(0x147)]=_0x4b2826(0x1de);}}else _0x2e83fd[_0x4b2826(0x147)]='manual';}),_0x4c3d66;}function getSettings(){const _0x538b63=_0x57fbd8;return dbSettings[_0x538b63(0x1a1)](_0x538b63(0x1e6))['value']()||{'timeshift':0x0};}function getSecure(){const _0x1f8521=_0x57fbd8;return dbSecure[_0x1f8521(0x1a1)](_0x1f8521(0x1b3))[_0x1f8521(0x253)]()||{};}function getBlacklist(){const _0xc63447=_0x57fbd8;return dbSecure[_0xc63447(0x1a1)]('blacklist')[_0xc63447(0x253)]()||[];}function broadcastToBots(_0x5a56d5,_0x37ac56){config['forEach'](_0xeb0ff8=>{const _0x27b81b=_0x4077;if(_0xeb0ff8['status']==_0x27b81b(0x242)&&_0xeb0ff8['live']==_0x27b81b(0x206)){if(pid[_0xeb0ff8['botID']])pid[_0xeb0ff8[_0x27b81b(0x191)]][_0x27b81b(0x21f)]({[_0x5a56d5]:_0x37ac56});}});}function storeSettings(_0x53abf3,_0xf0bd4c=![]){const _0x2c34d1=_0x57fbd8;_0x53abf3={...settings,..._0x53abf3};if(_0xf0bd4c&&_0x53abf3[_0x2c34d1(0x1d8)]!='************'&&_0x53abf3[_0x2c34d1(0x1d8)]!=''){const _0x1cdda9=crypt[_0x2c34d1(0x138)](secure[_0x2c34d1(0x199)],_0x53abf3[_0x2c34d1(0x1d8)])[_0x2c34d1(0x1d1)][_0x2c34d1(0x162)]('@')[0x0],_0x18071a=bcrypt[_0x2c34d1(0x1d2)](_0x1cdda9,saltRounds);_0x53abf3={..._0x53abf3,'bbPassword':_0x18071a};}if(_0xf0bd4c&&_0x53abf3[_0x2c34d1(0x1eb)]!=_0x2c34d1(0x222)&&_0x53abf3[_0x2c34d1(0x1eb)]!=''){const _0x4edb06=crypt[_0x2c34d1(0x138)](secure['privateKey'],_0x53abf3[_0x2c34d1(0x1eb)])[_0x2c34d1(0x1d1)][_0x2c34d1(0x162)]('@')[0x0];_0x53abf3={..._0x53abf3,'telegramToken':_0x4edb06};}const _0x1c1fbc=_0x53abf3['telegramToken']!=_0x2c34d1(0x222)&&_0x53abf3[_0x2c34d1(0x1eb)]!=settings[_0x2c34d1(0x1eb)]||_0x53abf3[_0x2c34d1(0x17f)]!=settings[_0x2c34d1(0x17f)],_0x308cf6=_0x53abf3['telegramToken']==''||_0x53abf3[_0x2c34d1(0x17f)]=='';if(_0x1c1fbc)_0x53abf3['telegramEvents']=_0x2c34d1(0x132);for(const [_0x4316b3,_0x49f58f]of Object[_0x2c34d1(0x1bf)](_0x53abf3)){if(_0x4316b3==_0x2c34d1(0x1eb)&&_0x49f58f==_0x2c34d1(0x222)){_0x53abf3[_0x2c34d1(0x1eb)]=settings['telegramToken'];continue;};if(_0x4316b3==_0x2c34d1(0x1d8)&&_0x49f58f=='************'){_0x53abf3['bbPassword']=settings[_0x2c34d1(0x1d8)];continue;};dbSettings[_0x2c34d1(0x1e0)](_0x2c34d1(0x24a)+_0x4316b3,_0x49f58f)['write']();}settings=_0x53abf3,io['to'](_0x2c34d1(0x1bb))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x2c34d1(0x12f)]);if(_0x1c1fbc&&!_0x308cf6)initTelegram();if(_0x1c1fbc&&_0x308cf6)disableTelegram();getAllClients()[_0x2c34d1(0x1ee)](_0x94d30c=>{const _0x173189=_0x2c34d1;getSocket(_0x94d30c['id'])[_0x173189(0x1aa)]('status',{'access':{'allow':![],'reason':_0x173189(0x1d5),'token':null}});});}function updateSetting(_0x191fbc,_0x27c2b1){const _0x19c1b8=_0x57fbd8;dbSettings[_0x19c1b8(0x1e0)](_0x19c1b8(0x24a)+_0x191fbc,_0x27c2b1)[_0x19c1b8(0x1c9)](),settings=getSettings(),io['to'](_0x19c1b8(0x1bb))[_0x19c1b8(0x1aa)](_0x19c1b8(0x1e6),cleanSettings());}function storeSecure(_0x3317c1){const _0x2dcd12=_0x57fbd8;dbSecure['get']('secure')[_0x2dcd12(0x139)](_0x3317c1)[_0x2dcd12(0x1c9)](),secure=_0x3317c1;}function addBlacklist(_0x40d047){const _0x29433b=_0x57fbd8;cleanBlacklist();let _0x5f1135;devices[_0x40d047][_0x29433b(0x186)]?_0x5f1135=Math[_0x29433b(0x1f7)](devices[_0x40d047][_0x29433b(0x186)]['expiry'],loginExpiry):_0x5f1135=loginExpiry,dbSecure[_0x29433b(0x1a1)](_0x29433b(0x169))[_0x29433b(0x139)]({'expiry':new Date()[_0x29433b(0x228)]()+_0x5f1135*0x3c*0x3e8,'token':devices[_0x40d047]['access'][_0x29433b(0x16a)]})['write'](),blacklist=dbSecure[_0x29433b(0x1a1)](_0x29433b(0x169))['value']();}function cleanBlacklist(){const _0x52db4e=_0x57fbd8;let _0x54dfbf=dbSecure['get'](_0x52db4e(0x169))[_0x52db4e(0x215)]()[_0x52db4e(0x253)](),_0x12864a=new Date()['getTime']();_0x54dfbf[_0x52db4e(0x1ee)](_0x1ec935=>{const _0x167469=_0x52db4e;_0x1ec935['expiry']<_0x12864a&&dbSecure[_0x167469(0x1a1)](_0x167469(0x169))[_0x167469(0x1e4)]({'expiry':_0x1ec935['expiry']})[_0x167469(0x1c9)]();});}function initStates(){const _0x46f66b=_0x57fbd8;let _0xcbe6e1=getConfiguration();_0xcbe6e1[_0x46f66b(0x1ee)](_0x1514be=>{const _0x27bc58=_0x46f66b;_0x1514be[_0x27bc58(0x24e)]=_0x27bc58(0x11f);}),storeConfiguration(_0xcbe6e1);}function onKeys(){const _0xb9c24a=new RSA();return new Promise(_0x5e38a5=>{const _0x21156a=_0x4077;_0xb9c24a[_0x21156a(0x1c2)]()[_0x21156a(0x227)](_0x3c9685=>{_0x5e38a5(_0x3c9685);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1bf45b=_0x57fbd8;let _0x5b0af1=getConfiguration(),_0x356cd0=![];_0x5b0af1['forEach'](_0x2be7e0=>{const _0x28d971=_0x4077;if(_0x2be7e0[_0x28d971(0x192)]=='running')_0x2be7e0['status']=_0x28d971(0x242),_0x356cd0=!![];else _0x2be7e0['status']==_0x28d971(0x11f)&&(_0x2be7e0[_0x28d971(0x192)]=_0x28d971(0x238),_0x356cd0=!![]);});if(_0x356cd0)storeConfiguration(_0x5b0af1);let _0x382aff=getSecure();if(!_0x382aff[_0x1bf45b(0x15f)]('secret')){let _0x5c004d=await generateKeys();_0x382aff[_0x1bf45b(0x11b)]=_0x5c004d[_0x1bf45b(0x11b)],_0x382aff[_0x1bf45b(0x199)]=_0x5c004d[_0x1bf45b(0x199)],_0x382aff[_0x1bf45b(0x165)]=crypto[_0x1bf45b(0x1b8)](0x20)[_0x1bf45b(0x166)](_0x1bf45b(0x1c7));;storeSecure(_0x382aff);}let _0x598a70=getSettings();_0x356cd0=![];!_0x598a70[_0x1bf45b(0x15f)]('loginRequired')&&(_0x598a70[_0x1bf45b(0x246)]=![],_0x598a70[_0x1bf45b(0x21e)]='',_0x598a70['bbPassword']='',_0x598a70[_0x1bf45b(0x13b)]=![],_0x356cd0=!![]);!_0x598a70[_0x1bf45b(0x15f)]('whitelistEnabled')&&(_0x598a70[_0x1bf45b(0x259)]=![],_0x598a70[_0x1bf45b(0x19e)]=[],_0x598a70['temporaryAccessAllowed']=![],_0x356cd0=!![]);if(!_0x598a70['hasOwnProperty'](_0x1bf45b(0x137))){if(_0x598a70[_0x1bf45b(0x1f0)])_0x598a70['telegramEnabled']=!![];else _0x598a70[_0x1bf45b(0x137)]=![];_0x356cd0=!![];}if(_0x356cd0)storeSettings(_0x598a70);}function storeConfiguration(_0x66e65b){const _0x494ab4=_0x57fbd8;dbConfig[_0x494ab4(0x1a1)]('bots')[_0x494ab4(0x1e4)]()[_0x494ab4(0x1c9)](),_0x66e65b[_0x494ab4(0x1ee)](_0x48715f=>{delete _0x48715f['mode'];}),dbConfig['get'](_0x494ab4(0x1c1))[_0x494ab4(0x139)](..._0x66e65b)[_0x494ab4(0x1c9)](),config=_0x66e65b;}function resetPassword(){const _0x4aaed8=_0x57fbd8;tgBot&&settings['telegramChatId']&&(tgBot[_0x4aaed8(0x24b)](_0x4aaed8(0x13e)),tgBot[_0x4aaed8(0x180)](settings[_0x4aaed8(0x1f0)],_0x4aaed8(0x156),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4aaed8(0x171),'callback_data':_0x4aaed8(0x171)},{'text':'no','callback_data':'no'}]]}})[_0x4aaed8(0x157)](_0x1fffa8=>{telegramError(_0x1fffa8);}),tgBot['on']('callback_query',async _0x19c6f8=>{const _0x2f8b71=_0x4aaed8,_0x2c264c=_0x19c6f8['data'],_0x18f6ff=_0x19c6f8[_0x2f8b71(0x1d1)];tgBot[_0x2f8b71(0x13f)](_0x19c6f8['id'])[_0x2f8b71(0x227)](async()=>{const _0x323394=_0x2f8b71;if(_0x2c264c!='no'){const _0x57f208=0xf,_0x41d3ef='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x508274=Array[_0x323394(0x16c)](crypto[_0x323394(0x1b4)](new Uint32Array(_0x57f208)))['map'](_0x56aac2=>_0x41d3ef[_0x56aac2%_0x41d3ef[_0x323394(0x1f5)]])[_0x323394(0x1cc)](''),_0x46e56c=bcrypt[_0x323394(0x1d2)](_0x508274,saltRounds);storeSettings({'bbPassword':_0x46e56c}),await tgBot['sendMessage'](_0x18f6ff[_0x323394(0x12a)]['id'],_0x323394(0x25c)+_0x508274,{'parse_mode':_0x323394(0x211)})[_0x323394(0x157)](_0x354935=>{telegramError(_0x354935);});}else await tgBot[_0x323394(0x180)](_0x18f6ff[_0x323394(0x12a)]['id'],_0x323394(0x187))[_0x323394(0x157)](_0x13698d=>{telegramError(_0x13698d);});}),tgBot[_0x2f8b71(0x24b)](_0x2f8b71(0x13e));}));}function logging(_0x1b299f){const _0x5cc389=_0x57fbd8;console[_0x5cc389(0x1b5)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x1b299f);if(tgBot&&settings['telegramChatId']&&settings[_0x5cc389(0x1a4)]!=_0x5cc389(0x153))tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x1b299f)[_0x5cc389(0x157)](_0x3c8196=>{telegramError(_0x3c8196);});}function getServerTime(){const _0x51bc39=_0x57fbd8,_0xe94c4b=new Date();return _0xe94c4b[_0x51bc39(0x198)]()+'/'+(_0xe94c4b[_0x51bc39(0x1f4)]()+0x1)['toString']()[_0x51bc39(0x170)](0x2,'0')+'/'+_0xe94c4b[_0x51bc39(0x239)]()[_0x51bc39(0x166)]()[_0x51bc39(0x170)](0x2,'0')+'\x20'+_0xe94c4b[_0x51bc39(0x15b)]()[_0x51bc39(0x166)]()[_0x51bc39(0x170)](0x2,'0')+':'+_0xe94c4b[_0x51bc39(0x235)]()[_0x51bc39(0x166)]()['padStart'](0x2,'0')+':'+_0xe94c4b[_0x51bc39(0x202)]()[_0x51bc39(0x166)]()[_0x51bc39(0x170)](0x2,'0');}function getTimeStamp(){const _0x43cbae=_0x57fbd8,_0x4bf41c=shiftedTime();return _0x4bf41c[_0x43cbae(0x198)]()+'/'+(_0x4bf41c[_0x43cbae(0x1f4)]()+0x1)[_0x43cbae(0x166)]()[_0x43cbae(0x170)](0x2,'0')+'/'+_0x4bf41c[_0x43cbae(0x239)]()[_0x43cbae(0x166)]()[_0x43cbae(0x170)](0x2,'0')+'\x20'+_0x4bf41c['getHours']()[_0x43cbae(0x166)]()[_0x43cbae(0x170)](0x2,'0')+':'+_0x4bf41c[_0x43cbae(0x235)]()['toString']()[_0x43cbae(0x170)](0x2,'0')+':'+_0x4bf41c[_0x43cbae(0x202)]()[_0x43cbae(0x166)]()[_0x43cbae(0x170)](0x2,'0');}function shiftedTime(){const _0x38c7a5=_0x57fbd8,_0x4b9886=new Date();let _0x13be92=_0x4b9886;if(settings[_0x38c7a5(0x12f)]&&settings[_0x38c7a5(0x12f)]!==0x0)_0x13be92=fns[_0x38c7a5(0x1dd)](_0x4b9886,{'hours':settings[_0x38c7a5(0x12f)]});return _0x13be92;}function startScheduler(){const _0x232805=_0x57fbd8;let _0x4d29be=new Date()[_0x232805(0x230)]();_0x4d29be==0x1&&backupConfigFiles();_0x4d29be==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x453bd2=_0x57fbd8;fs[_0x453bd2(0x16e)](configpath,{'withFileTypes':!![]})[_0x453bd2(0x1ee)](_0x1eebca=>{const _0x1a8889=_0x453bd2;if(!_0x1eebca[_0x1a8889(0x1a5)]())fs[_0x1a8889(0x18f)](configpath+_0x1eebca[_0x1a8889(0x1c0)],configbackuppath+_0x1eebca['name']);});}function triggerAnalytics(){const _0x25a967=_0x57fbd8;analytics[_0x25a967(0x117)]({'title':_0x25a967(0x1c3),'href':_0x25a967(0x20f),'path':'/v'+serverversion});}function validateCredentials(_0x27c257,_0x30db53){const _0x9e9d2c=_0x57fbd8;if(_0x27c257[_0x9e9d2c(0x1c6)]==settings[_0x9e9d2c(0x21e)]&&bcrypt['compareSync'](_0x27c257['password'],settings[_0x9e9d2c(0x1d8)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x9e9d2c(0x250),'token':null};else{const _0x2ce90e=generateLoginToken(_0x30db53);return{'allow':!![],'reason':_0x9e9d2c(0x23a),'token':_0x2ce90e};}}else return{'allow':![],'reason':_0x9e9d2c(0x1e5),'token':null};}function refreshToken(_0x229aec){const _0x14e7bc=_0x57fbd8,_0x12f6b1=generateLoginToken(_0x229aec);return{'allow':!![],'reason':_0x14e7bc(0x23a),'token':_0x12f6b1};}function validateAccess(_0x20f494,_0x569ffa){const _0x5ecf1b=_0x57fbd8;let _0x3bf9f6=devices[_0x569ffa]['ip'],_0x4c8090;const _0x36bc74=_0x2143fb=>{const _0x24a86a=_0x4077;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x569ffa)){const _0xb390a8=generateLoginToken(_0x569ffa);return{'allow':!![],'reason':_0x24a86a(0x1b0),'token':_0xb390a8};}else return{'allow':![],'reason':_0x24a86a(0x123),'token':null};}else return _0x4c8090=validToken(_0x2143fb,_0x569ffa),_0x4c8090[_0x24a86a(0x15f)](_0x24a86a(0x251))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x2143fb}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x24a86a(0x115),'token':null};};if(settings[_0x5ecf1b(0x259)]){let _0x167520=[...settings[_0x5ecf1b(0x19e)],_0x5ecf1b(0x19c),'::ffff:127.0.0.1','127.0.0.1'];if(_0x167520[_0x5ecf1b(0x151)](_0x3bf9f6))return _0x36bc74(_0x20f494);else{_0x4c8090=validToken(_0x20f494,_0x569ffa);if(_0x4c8090[_0x5ecf1b(0x15f)]('success'))return _0x36bc74(_0x20f494);else{if(telegramIpApproved(_0x569ffa)){const _0x5f0905=generateToken(_0x569ffa);return _0x4c8090=_0x36bc74(_0x20f494),_0x4c8090[_0x5ecf1b(0x214)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x5f0905}:_0x4c8090;}else return settings[_0x5ecf1b(0x172)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x5ecf1b(0x241),'token':null};}}}else return _0x36bc74(_0x20f494);}function timelyDecrypt(_0x2ecf85,_0x535299=!![]){const _0x22c351=_0x57fbd8;if(_0x2ecf85)try{const _0x2c526c=crypt[_0x22c351(0x138)](secure[_0x22c351(0x199)],_0x2ecf85)[_0x22c351(0x1d1)],_0x10ee20=_0x2c526c[_0x22c351(0x162)]('@')[0x0],_0x4b4c3f=_0x2c526c[_0x22c351(0x162)]('@')[0x1],_0x2ac9f7=new Date()[_0x22c351(0x228)]();if(_0x535299){if(_0x2ac9f7-_0x4b4c3f<maxSecretAge*0x3e8)return _0x10ee20;else return![];}else return _0x10ee20;}catch(_0x1a96b4){return![];}else return![];}const validToken=(_0x172e4e,_0x109d1f)=>{const _0x56b3da=_0x57fbd8,_0x51a4ca=devices[_0x109d1f]['ip'];if(!_0x172e4e)return{'error':_0x56b3da(0x237)};for(let _0x22820b of blacklist){if(_0x22820b[_0x56b3da(0x16a)]==_0x172e4e)return{'error':_0x56b3da(0x1e2)};}let _0x2def70;try{_0x2def70=jwt['verify'](_0x172e4e,secure[_0x56b3da(0x165)]+_0x109d1f);}catch{return{'error':_0x56b3da(0x1fd)};}if(!_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x247))&&!_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x1c6))||!_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x164)))return{'error':_0x56b3da(0x21a)};if(!_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x1c6))&&_0x2def70[_0x56b3da(0x15f)]('clientip')){const {clientip:_0x463713}=_0x2def70;return _0x51a4ca==_0x463713?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x56b3da(0x168)};}else{if(_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x1c6))&&_0x2def70[_0x56b3da(0x15f)](_0x56b3da(0x247))){const {username:_0x1f99db,clientip:_0x3d3e2b}=_0x2def70;return settings[_0x56b3da(0x21e)]==_0x1f99db&&_0x51a4ca==_0x3d3e2b?{'success':_0x56b3da(0x175)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xf195d8=>{const _0x47abe1=_0x57fbd8;if(_0xf195d8){const _0x548807=devices[_0xf195d8]['ip'];return jwt[_0x47abe1(0x16b)]({'username':settings['bbUsername'],'clientip':_0x548807},secure[_0x47abe1(0x165)]+_0xf195d8,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3dff03=>{const _0x215eb7=_0x57fbd8;if(_0x3dff03){const _0x52613b=devices[_0x3dff03]['ip'];return jwt[_0x215eb7(0x16b)]({'clientip':_0x52613b},secure[_0x215eb7(0x165)]+_0x3dff03,{'expiresIn':devices[_0x3dff03][_0x215eb7(0x186)][_0x215eb7(0x216)]*0x3c});}else return![];},telegramIpApproved=_0x2c878a=>{const _0x2413b5=_0x57fbd8;let _0x279bf9=![];return devices[_0x2c878a][_0x2413b5(0x186)]&&devices[_0x2c878a][_0x2413b5(0x186)][_0x2413b5(0x216)]!=_0x2413b5(0x220)&&(_0x279bf9=devices[_0x2c878a][_0x2413b5(0x186)][_0x2413b5(0x247)]==devices[_0x2c878a]['ip']&&new Date()[_0x2413b5(0x228)]()-devices[_0x2c878a]['telegramIpApproval'][_0x2413b5(0x249)]<devices[_0x2c878a][_0x2413b5(0x186)][_0x2413b5(0x216)]*0x3c*0x3e8),_0x279bf9;},telegram2FaApproved=_0x24d16f=>{const _0x2ad124=_0x57fbd8;let _0xc46fd9=![];return devices[_0x24d16f][_0x2ad124(0x178)]&&devices[_0x24d16f][_0x2ad124(0x178)]['expiry']!='reject'&&(_0xc46fd9=devices[_0x24d16f][_0x2ad124(0x178)][_0x2ad124(0x247)]==devices[_0x24d16f]['ip']&&new Date()[_0x2ad124(0x228)]()-devices[_0x24d16f][_0x2ad124(0x178)][_0x2ad124(0x249)]<devices[_0x24d16f][_0x2ad124(0x178)]['expiry']*0x3c*0x3e8),_0xc46fd9;},normalizeIP=_0x2f2696=>{const _0x2d38a6=_0x57fbd8;let _0x5610c6=null,_0x4dbc84=null;if(ipaddr['isValid'](_0x2f2696)){const _0x5b92b1=ipaddr['parse'](_0x2f2696);_0x5b92b1['kind']()===_0x2d38a6(0x1a0)?(_0x5b92b1['isIPv4MappedAddress']()&&(_0x5610c6=_0x5b92b1[_0x2d38a6(0x11d)]()[_0x2d38a6(0x166)]()),_0x4dbc84=_0x5b92b1[_0x2d38a6(0x166)]()):(_0x5610c6=_0x5b92b1[_0x2d38a6(0x166)](),_0x4dbc84=_0x5b92b1[_0x2d38a6(0x121)]()[_0x2d38a6(0x166)]());}return{'show':_0x5610c6?_0x5610c6:_0x4dbc84,'store':_0x4dbc84};};