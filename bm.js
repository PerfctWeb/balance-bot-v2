const _0x491cda=_0x149a;(function(_0x434aac,_0x52a289){const _0x3c3365=_0x149a,_0x4154f6=_0x434aac();while(!![]){try{const _0x593a1f=-parseInt(_0x3c3365(0x1b0))/0x1*(parseInt(_0x3c3365(0x331))/0x2)+-parseInt(_0x3c3365(0x2b6))/0x3*(parseInt(_0x3c3365(0x30d))/0x4)+-parseInt(_0x3c3365(0x2ba))/0x5+parseInt(_0x3c3365(0x1cf))/0x6*(parseInt(_0x3c3365(0x31b))/0x7)+parseInt(_0x3c3365(0x24b))/0x8+-parseInt(_0x3c3365(0x2ae))/0x9+-parseInt(_0x3c3365(0x359))/0xa*(-parseInt(_0x3c3365(0x228))/0xb);if(_0x593a1f===_0x52a289)break;else _0x4154f6['push'](_0x4154f6['shift']());}catch(_0x51ed64){_0x4154f6['push'](_0x4154f6['shift']());}}}(_0x1f96,0x19bf3));const _0x2f01f0=function(){let _0x3ee218=!![];return function(_0x5b24cb,_0x1a0d39){const _0x5a78af=_0x3ee218?function(){const _0x211663=_0x149a;if(_0x1a0d39){const _0x199a2d=_0x1a0d39[_0x211663(0x263)](_0x5b24cb,arguments);return _0x1a0d39=null,_0x199a2d;}}:function(){};return _0x3ee218=![],_0x5a78af;};}(),_0x10878b=_0x2f01f0(this,function(){const _0x4ef6ce=_0x149a;return _0x10878b[_0x4ef6ce(0x1a8)]()['search'](_0x4ef6ce(0x202))['toString']()[_0x4ef6ce(0x231)](_0x10878b)[_0x4ef6ce(0x267)](_0x4ef6ce(0x202));});_0x10878b();'use strict';process['env'][_0x491cda(0x316)]=0x1;const childProcess=require(_0x491cda(0x224)),fs=require('fs'),fns=require(_0x491cda(0x251)),low=require('lowdb'),FileSync=require(_0x491cda(0x1b7)),path=require(_0x491cda(0x286)),crypto=require(_0x491cda(0x26d)),Crypt=require(_0x491cda(0x1d4))[_0x491cda(0x1bb)],RSA=require(_0x491cda(0x1d4))[_0x491cda(0x20b)],bcrypt=require(_0x491cda(0x1fe)),jwt=require(_0x491cda(0x22e)),ipaddr=require(_0x491cda(0x2fa)),argv=require(_0x491cda(0x290))(process[_0x491cda(0x22c)]['slice'](0x2))[_0x491cda(0x22c)],uuidRandom=require(_0x491cda(0x25c)),TelegramBot=require(_0x491cda(0x2ea)),Mixpanel=require(_0x491cda(0x2f9)),axios=require(_0x491cda(0x2a0)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x491cda(0x27c)),fileUpload=require(_0x491cda(0x28f)),PORT=argv[_0x491cda(0x1b4)]||_0x491cda(0x279),pattern=/^[0-9]{2,4}$/;!pattern[_0x491cda(0x245)](PORT)&&(console[_0x491cda(0x2d0)](_0x491cda(0x344)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x491cda(0x293)](0x1));const HOST=argv[_0x491cda(0x1f2)]||null,userID=argv[_0x491cda(0x1c3)]||'',debugging=argv['d']||![];let bbpath='bb/',bbpath2='';const botfile=_0x491cda(0x240),configfile=_0x491cda(0x1c8),settingsfile=_0x491cda(0x2e9),securefile=_0x491cda(0x2d4);let validInstallation=!![];!fs[_0x491cda(0x2a9)](bbpath+botfile)&&(bbpath='',validInstallation=![]);function _0x149a(_0x411b3e,_0x5d632f){const _0x52acad=_0x1f96();return _0x149a=function(_0x10878b,_0x2f01f0){_0x10878b=_0x10878b-0x19b;let _0x1f960a=_0x52acad[_0x10878b];return _0x1f960a;},_0x149a(_0x411b3e,_0x5d632f);}const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x491cda(0x2ec)),configpath=userID?bbpath+_0x491cda(0x2d2)+userID+'/':bbpath+_0x491cda(0x2d2),configbackuppath=configpath+_0x491cda(0x294),logspath=userID?bbpath+_0x491cda(0x255)+userID+'/':bbpath+_0x491cda(0x255),zippath=userID?bbpath+_0x491cda(0x2df)+userID+'/':bbpath+_0x491cda(0x2df),loggerfile=fs[_0x491cda(0x214)](logspath+_0x491cda(0x21c),{'flags':'a'}),temppath=userID?bbpath+_0x491cda(0x33d)+userID+'/':bbpath+_0x491cda(0x33d);function _0x1f96(){const _0x296d56=['Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','bot','index.html','3000','get','reinstall','util','orders','replace','deleteHistoryAlerts','ipv6','mtime','backupfile','randomBytes','backup-full-006.zip','delete-bot','path','allow','30\x20min','backup-full-003.zip','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','emit','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','manual','reinstall-bb','express-fileupload','yargs/yargs','login\x20not\x20required','No\x20authentication\x20token','exit','backup/','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','from','_data','\x20(1)','getUTCHours',':\x20Bot\x20Mgr\x20>\x20','alerts','-results.json','backup-full-001.zip','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','static','axios','includes','http','answerCallbackQuery','output-000.log','sign','request','node-zip','Markdown','existsSync','getDate','restarting\x20Bot\x20','catch','restart','368190HXuqYr','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','latestversion','/off\x20-\x20stop\x20bot(s)\x0a','generate','mkdirSync','simple','6b67f3d61ee94b8f5c80b4affef4c4d9','201EjfRzs','temporary\x20access\x20timeout','telegram','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','526045kZtLiD','getSeconds','127.0.0.1','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','botID','-config.json','Temporary\x20access\x20rejected','store','padStart','expiry','pidRefreshToken','restore-backup-file','Failed\x20to\x20download\x20','Restore\x20backup\x20file\x20','started','Invalid\x20authentication\x20token\x20(2)','readFileSync','stop','kill','::1','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','clientip','log','stopPolling','config/','output-001.log','bb-secure.json','Unauthorized\x20attempt\x20to\x20get\x20portfolio','getMonth','express','HTML','backup-full-000.zip','verify','send','rmSync','apiKey','exchange','zip/','timeshift','error','login\x20required','1000','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','backup','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','push','password','bb-settings.json','node-telegram-bot-api','get-backup-files','clients','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','status','Unauthorized\x20attempt\x20to\x20update\x20settings','bbvNew','store-settings','getPortfolio','hashSync','/names\x20-\x20show\x20bot\x20names\x0a','Invalid\x20IP\x20address','temporary\x20access\x20rejected','socket','backup-files','mixpanel','ipaddr.js','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','server','set','RSA-OAEP','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','place-order','invalid\x20credentials','files','userid','max','removeAllListeners','build2','\x20mode','args','add-bot','getTime','temporary\x20access\x20not\x20allowed','11332fFgXes','Bot\x20Mgr\x20>\x20','confirm-message','keys','params','\x20minutes','uuid','store-configuration','\x20|\x20','NTBA_FIX_319','listen','title','messages','uncaughtException','651FPhqCv','kind','getFullYear','sortBy','bbPassword','Ok,\x20will\x20send\x20order\x20notifications\x20only','format','cancelLoading','yes','type','logout','</b>\x20?','/:bot/history','onText','.zip','botmanager','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','post','headers','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Unauthorized\x20login\x20attempt\x20(timeout)','forEach','34jTLVRF','Unauthorized\x20attempt\x20to\x20confirm\x20message','generateKeyPairAsync','0.0.0','decrypt','-events.json','privateKey','length','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','copyFileSync','Invalid\x20authentication\x20token\x20(1)','Unauthorized\x20attempt\x20to\x20delete\x20bot','temp/','<b>Telegram\x20Bot\x20Status:</b>\x0a','/update\x20-\x20update\x20Balance\x20Bot\x0a','name','randomFillSync','disabled\x20Bot\x20','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Error:\x20Invalid\x20argument\x20','access','sendPortfolioTelegram','remoteAddress','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','toIPv4Address','Invalid\x20username\x20or\x20IP\x20address','File\x20uploaded','notification','toIPv4MappedAddress','new-disabled','lastmsgtelegram','temporaryAccessAllowed','build','show','event','parse','logs','telegramChatId','/:bot/support','https://api.ipify.org?format=json','10KybGbV','Ok,\x20will\x20send\x20alert\x20notifications\x20only','data','store-headless','Unauthorized\x20attempt\x20to\x20get\x20messages','error\x20while\x20deleting\x20config\x20files:\x20','2FA\x20required','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','showConfig','full','disabled','apiSecret','tkn','lastmsgemitted','User\x20has\x20been\x20validated','Backup\x20file\x20unzipped\x20and\x20stored','whitelistEnabled','2FA\x20login\x20token\x20generated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Orders','getStartingBalances','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','SIGINT','toString','reset-password','handshake','all','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','find','2FA\x20login\x20rejected','\x20to\x20','7703GaNBFU','Notifications\x20disabled','backup-full-005.zip','access\x20timeout','port','blacklist','version','lowdb/adapters/FileSync','createServer','/:bot/coins','getHours','Crypt','compareSync','inherit','sort','bots','Allow\x20login\x20from\x20IP\x20address\x20<b>','connection','toggle-bot-mode','user','Unauthorized\x20attempt\x20to\x20delete\x20alerts','initclient','Token\x20blacklisted','2FA\x20login\x20required','bb-config.json','backup-full-004.zip','whitelist','deleted\x20Bot\x20','cloneDeep','settings.','-performance.json','6762SSsVlP','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','hasOwnProperty','version.json','enabled\x20Bot\x20','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20store\x20configuration','settings',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','success','hex','update-bb','telegramToken','get-messages','secure','updatebotmanager','stopped','debug','sendMessage','sha256','token','fork','5\x20min','reason','timestamp','loginRequired','function','callback_query','mode','defaults','bot-','isIPv4MappedAddress','polling_error','entries','/:bot/configuration','host','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','botname','placeOrder','f2aRequired','telegramEvents','\x20>\x20','order','map','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','update','backup-full','bcryptjs','Unauthorized\x20attempt\x20to\x20log\x20out','filter','statSync','(((.+)+)+)+$','sockets','enabled','split','telegramUsername','DEFLATE','write','Unauthorized\x20attempt\x20to\x20update\x20bot','No\x20bots\x20running\x20right\x20now','RSA','login\x20token\x20generated','auto','storeHeadless','backup-full-002.zip','encryptedUuid','starting\x20bot\x20|\x20Bot\x20','Server','cancel-loading','createWriteStream','unlinkSync','All\x20bots','/:bot/portfolio','new','************','***','Yes','/output-000.log','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','api-eu.mixpanel.com','file','telegram2FaApproval','live','size','stringify','child_process','login','referer','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','4211504BurmPd','remove','running','<b>Balance\x20Bot\x20Status:</b>\x0a','argv','reject','jsonwebtoken','Notifications\x20enabled','SIGTERM','constructor','sendFile','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','chat','Invalid\x20Telegram\x20token','username','writeFileSync','/help\x20-\x20show\x20available\x20commands\x0a','join','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','telegramIpApproval','init','/restart\x20-\x20restart\x20bot(s)\x0a','binary','Backup\x20file\x20uploaded','bot.js','reload','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','update-bot','Unauthorized\x20attempt\x20to\x20download\x20','test','pidExpireLogin','then','socket.io','use','publicKey','677320GvwRTY','telegrammsg','Bot\x20','assign','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','date-fns','bbUsername','secret','getMinutes','logs/','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','delete-alerts','message','logged\x20out','/:bot','alias','uuid-random','disconnect','readdirSync','any','telegramEnabled','/enable\x20-\x20enable\x20notifications\x0a','emitHistory','apply','number','temporary\x20token\x20generated','track','search','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','min','Starting\x20Balance\x20Bot\x20update','value','Login\x20accepted','crypto','output-003.log','Restore\x20process\x20aborted','All','isDirectory','removeListener','\x20only\x0a','get-starting-balances','output-002.log'];_0x1f96=function(){return _0x296d56;};return _0x1f96();}!fs[_0x491cda(0x2a9)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x491cda(0x2a9)](configbackuppath)&&fs[_0x491cda(0x2b3)](configbackuppath);!fs[_0x491cda(0x2a9)](logspath)&&fs[_0x491cda(0x2b3)](logspath);!fs[_0x491cda(0x2a9)](zippath)&&fs[_0x491cda(0x2b3)](zippath);!fs['existsSync'](temppath)&&fs[_0x491cda(0x2b3)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x491cda(0x1ec)]({'bots':[]})[_0x491cda(0x208)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x491cda(0x1ec)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0'}})[_0x491cda(0x208)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x491cda(0x1ec)]({'secure':{},'blacklist':[]})[_0x491cda(0x208)]();let crypt=new Crypt({'md':_0x491cda(0x1e2),'rsaStandard':_0x491cda(0x2fe)});const saltRounds=0xa,mixpanel=Mixpanel[_0x491cda(0x23c)](_0x491cda(0x2b5),{'host':_0x491cda(0x21e)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x491cda(0x1db)]&&settings[_0x491cda(0x1db)]!=''&&settings[_0x491cda(0x206)]&&settings[_0x491cda(0x206)]!='')initTelegram();const logger={'screen':_0x1bb5e0=>{const _0x143cdd=_0x491cda;console[_0x143cdd(0x2d0)](_0x1bb5e0);},'simple':_0x450cf1=>{const _0x2c9882=_0x491cda;console[_0x2c9882(0x2d0)](_0x450cf1),loggerfile[_0x2c9882(0x208)](util[_0x2c9882(0x321)](_0x450cf1)+'\x0a');},'full':async _0x59773e=>{const _0x18e5f9=_0x491cda,_0xc33674=getTimeStamp()+_0x18e5f9(0x29a)+_0x59773e;console[_0x18e5f9(0x2d0)](_0xc33674),loggerfile[_0x18e5f9(0x208)](util[_0x18e5f9(0x321)](_0xc33674)+'\x0a');if(tgBot&&settings[_0x18e5f9(0x356)]&&settings[_0x18e5f9(0x1f7)]!='orders')await tgBot[_0x18e5f9(0x1e1)](settings[_0x18e5f9(0x356)],_0x18e5f9(0x30e)+_0x59773e)[_0x18e5f9(0x2ac)](_0x51a2f5=>{telegramError(_0x51a2f5);});},'debug':async(_0x4a17bb,_0x5b75dd='')=>{const _0x292b03=_0x491cda,_0x49ef46=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x4a17bb;if(debugging)console[_0x292b03(0x2d0)](_0x49ef46);loggerfile[_0x292b03(0x208)](util['format'](_0x49ef46)+'\x0a');if(_0x5b75dd){if(debugging)console[_0x292b03(0x2d0)](_0x5b75dd);loggerfile[_0x292b03(0x208)](util['format'](_0x5b75dd)+'\x0a');}}};process['on'](_0x491cda(0x31a),function(_0x15fc55){logger['simple'](_0x15fc55);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x491cda(0x1d2))[_0x491cda(0x1b6)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x491cda(0x2d7)),app=express(),http=require(_0x491cda(0x2a2))[_0x491cda(0x1b8)](app);app[_0x491cda(0x249)](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x5101ef,_0x51d347)=>{const _0x34dc38=_0x491cda,_0x4ad606=_0x5101ef[_0x34dc38(0x311)][_0x34dc38(0x324)],_0x4b238c=getClientsWithBotID('botmanager'),_0x3032aa=_0x5101ef['headers'][_0x34dc38(0x313)],_0x48a4b1=timelyDecrypt(_0x3032aa,![]),_0x1b6166=_0x4b238c[_0x34dc38(0x1ad)](_0x12b19e=>_0x12b19e[_0x34dc38(0x313)]==_0x48a4b1);if(_0x1b6166){const _0x490314=normalizeIP(_0x5101ef['socket'][_0x34dc38(0x347)])['store'],_0x1de02b=_0x5101ef[_0x34dc38(0x32d)]['tkn'];if(validateAccess(_0x1de02b,_0x48a4b1,_0x490314)[_0x34dc38(0x287)])_0x4ad606==_0x34dc38(0x2e5)&&await backupConfigFiles(),await zipFiles(_0x4ad606),_0x51d347['download'](zippath+(_0x4ad606+_0x34dc38(0x329)),_0x368f0c=>{const _0x449527=_0x34dc38;_0x368f0c&&(logger[_0x449527(0x362)](_0x449527(0x2c6)+_0x4ad606),logger[_0x449527(0x2b4)](_0x368f0c));});else logger[_0x34dc38(0x362)](_0x34dc38(0x244)+_0x4ad606+_0x34dc38(0x298));}else logger[_0x34dc38(0x362)](_0x34dc38(0x244)+_0x4ad606+'\x20(2)');}),app[_0x491cda(0x32c)]('/upload-backup',async(_0x3efe16,_0x24c80c)=>{const _0x5b06f4=_0x491cda,_0x1099aa=getClientsWithBotID(_0x5b06f4(0x32a)),_0x2105c1=_0x3efe16[_0x5b06f4(0x32d)][_0x5b06f4(0x313)],_0x2947de=timelyDecrypt(_0x2105c1,![]),_0xa7e0fd=_0x1099aa[_0x5b06f4(0x1ad)](_0x10a420=>_0x10a420[_0x5b06f4(0x313)]==_0x2947de);logger[_0x5b06f4(0x1e0)](_0x5b06f4(0x23f));if(_0xa7e0fd){const _0x36b8fa=normalizeIP(_0x3efe16[_0x5b06f4(0x2f7)][_0x5b06f4(0x347)])['store'],_0x351ffa=_0x3efe16[_0x5b06f4(0x32d)][_0x5b06f4(0x19d)];if(validateAccess(_0x351ffa,_0x2947de,_0x36b8fa)[_0x5b06f4(0x287)]){if(_0x3efe16[_0x5b06f4(0x303)]){const _0xcccaf6=_0x3efe16[_0x5b06f4(0x303)][_0x5b06f4(0x282)];await _0xcccaf6['mv'](temppath+_0xcccaf6['name']),_0x24c80c[_0x5b06f4(0x2db)]({'status':!![],'message':_0x5b06f4(0x34b)});const _0x572a52=getBotsWithMode();_0x572a52[_0x5b06f4(0x338)]>0x0?confirmRestore(temppath,_0xcccaf6[_0x5b06f4(0x340)]):unzipFile(temppath,_0xcccaf6[_0x5b06f4(0x340)]);}}else logger[_0x5b06f4(0x362)](_0x5b06f4(0x1fb));}else logger[_0x5b06f4(0x362)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x491cda(0x249)](express[_0x491cda(0x29f)](path[_0x491cda(0x239)](__dirname,bbpath2,_0x491cda(0x307)))),app[_0x491cda(0x249)](express[_0x491cda(0x29f)](path[_0x491cda(0x239)](__dirname,bbpath2,_0x491cda(0x351)))),app['get']('/',function(_0x3e3978,_0x2181a7){const _0x71d5c6=_0x491cda;_0x2181a7[_0x71d5c6(0x232)](path[_0x71d5c6(0x239)](__dirname,bbpath2,_0x71d5c6(0x307),_0x71d5c6(0x278)));}),app['get'](_0x491cda(0x25a),function(_0x5d03f4,_0xe3c7a0){const _0x42bc02=_0x491cda;_0xe3c7a0[_0x42bc02(0x232)](path['join'](__dirname,bbpath2,_0x42bc02(0x351),'index.html'));}),app['get'](_0x491cda(0x217),(_0x80b97b,_0x5d545f)=>{const _0x1b04ad=_0x491cda;_0x5d545f[_0x1b04ad(0x232)](path['join'](__dirname,bbpath2,_0x1b04ad(0x351),_0x1b04ad(0x278)));}),app['get']('/:bot/performance',(_0x261244,_0xae70e7)=>{const _0x155b87=_0x491cda;_0xae70e7[_0x155b87(0x232)](path[_0x155b87(0x239)](__dirname,bbpath2,_0x155b87(0x351),_0x155b87(0x278)));}),app[_0x491cda(0x27a)](_0x491cda(0x1b9),(_0x3136ca,_0x125f0f)=>{const _0x5bc34d=_0x491cda;_0x125f0f[_0x5bc34d(0x232)](path[_0x5bc34d(0x239)](__dirname,bbpath2,_0x5bc34d(0x351),'index.html'));}),app[_0x491cda(0x27a)](_0x491cda(0x327),(_0x5e72e9,_0x518d30)=>{const _0x575c8b=_0x491cda;_0x518d30[_0x575c8b(0x232)](path['join'](__dirname,bbpath2,_0x575c8b(0x351),'index.html'));}),app[_0x491cda(0x27a)](_0x491cda(0x1f1),(_0x6bf6ba,_0x3e94a4)=>{const _0x4af847=_0x491cda;_0x3e94a4['sendFile'](path[_0x4af847(0x239)](__dirname,bbpath2,_0x4af847(0x351),_0x4af847(0x278)));}),app[_0x491cda(0x27a)](_0x491cda(0x357),(_0x352b7c,_0x24a588)=>{const _0x5cc4cc=_0x491cda;_0x24a588[_0x5cc4cc(0x232)](path[_0x5cc4cc(0x239)](__dirname,bbpath2,'build',_0x5cc4cc(0x278)));});if(HOST)http[_0x491cda(0x317)](PORT,HOST);else http[_0x491cda(0x317)](PORT);const io=require(_0x491cda(0x248))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x56fcc6=_0x491cda;logger[_0x56fcc6(0x2b4)](''),logger[_0x56fcc6(0x2b4)](_0x56fcc6(0x2ff)),await logger['full'](_0x56fcc6(0x2ed)+PORT),logger['simple'](_0x56fcc6(0x2ff));if(config[_0x56fcc6(0x338)]!=0x0)for(const _0x3ed1ba of config){if(_0x3ed1ba['status']==_0x56fcc6(0x204)||_0x3ed1ba[_0x56fcc6(0x2ee)]==_0x56fcc6(0x218))await logger['full'](_0x56fcc6(0x211)+_0x3ed1ba['botID']+'\x20|\x20'+_0x3ed1ba[_0x56fcc6(0x1f4)]),startBot([_0x3ed1ba[_0x56fcc6(0x2be)],userID],{'cwd':bbpath},function(_0x311a52){const _0x577d01=_0x56fcc6;if(_0x311a52)logger[_0x577d01(0x362)](_0x311a52);});else(_0x3ed1ba[_0x56fcc6(0x2ee)]==_0x56fcc6(0x19b)||_0x3ed1ba[_0x56fcc6(0x2ee)]==_0x56fcc6(0x34e))&&await logger[_0x56fcc6(0x362)]('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x3ed1ba[_0x56fcc6(0x2be)]+_0x56fcc6(0x315)+_0x3ed1ba['botname']);}else!newBot&&logger[_0x56fcc6(0x2b4)](_0x56fcc6(0x242));if(newBot)addBot();logger[_0x56fcc6(0x2b4)](_0x56fcc6(0x2ff)),logger[_0x56fcc6(0x2b4)]('');}function startSocket(){const _0x3e331f=_0x491cda;io['on'](_0x3e331f(0x1c1),_0x5d70b6=>{const _0x23f7dd=_0x3e331f;let _0x1c325a,_0x425aff,_0x402503,_0xa9ed3b,_0x101354;const _0x181f28=_0x5d70b6[_0x23f7dd(0x1aa)][_0x23f7dd(0x32d)][_0x23f7dd(0x226)];_0x425aff=_0x181f28['match'](/bot[0-9]{3}/);if(_0x425aff)_0x402503=_0x425aff[0x0]['match'](/[0-9]{3}/);if(_0x402503)_0x1c325a=_0x402503[0x0];else _0x1c325a='botmanager';const _0x2e6654=_0x5d70b6[_0x23f7dd(0x1aa)]['auth'][_0x23f7dd(0x210)];if(!_0x2e6654)_0x5d70b6[_0x23f7dd(0x28b)](_0x23f7dd(0x2ee),{'publicKey':secure[_0x23f7dd(0x24a)]});else{_0xa9ed3b=timelyDecrypt(_0x2e6654,![]);if(!_0xa9ed3b)_0x5d70b6['emit'](_0x23f7dd(0x2ee),{'publicKey':secure['publicKey']});else{_0x101354=normalizeIP(_0x5d70b6['conn']['remoteAddress'])[_0x23f7dd(0x2c1)];if(!devices[_0xa9ed3b])devices[_0xa9ed3b]={'uuid':_0xa9ed3b,'access':{'token':null}};devices[_0xa9ed3b]['ip']=_0x101354;const _0x299097=addClient(_0x5d70b6['id'],_0xa9ed3b,_0x1c325a);setAccess(_0x299097),emitMessages(),_0x5d70b6['on']('login',_0x15e149=>{const _0x2c9215=_0x23f7dd,_0xde9ca7=timelyDecrypt(_0x15e149[_0x2c9215(0x2e8)]);if(_0xde9ca7){_0x15e149={'username':_0x15e149['username'],'password':_0xde9ca7},devices[_0xa9ed3b][_0x2c9215(0x345)]=validateCredentials(_0x15e149,_0xa9ed3b);if(devices[_0xa9ed3b][_0x2c9215(0x345)][_0x2c9215(0x287)]==![]&&devices[_0xa9ed3b]['access'][_0x2c9215(0x1e6)]==_0x2c9215(0x1c7))_0x5d70b6[_0x2c9215(0x28b)](_0x2c9215(0x2ee),{'access':devices[_0xa9ed3b][_0x2c9215(0x345)]}),loginAccess2FA(_0xa9ed3b,_0x101354);else{if(devices[_0xa9ed3b]['access'][_0x2c9215(0x287)]==![]&&devices[_0xa9ed3b][_0x2c9215(0x345)][_0x2c9215(0x1e6)]==_0x2c9215(0x302))_0x5d70b6['emit'](_0x2c9215(0x2ee),{'access':devices[_0xa9ed3b][_0x2c9215(0x345)]});else devices[_0xa9ed3b][_0x2c9215(0x345)][_0x2c9215(0x287)]&&devices[_0xa9ed3b]['access']['reason']==_0x2c9215(0x20c)&&(getClientsWithUuid(_0xa9ed3b)[_0x2c9215(0x330)](_0x58438e=>{setAccess(_0x58438e);}),setTokenRefresh(_0xa9ed3b),setSessionTimeout(_0x2c9215(0x225),_0xa9ed3b));}}else logger[_0x2c9215(0x362)](_0x2c9215(0x32f));}),_0x5d70b6['on'](_0x23f7dd(0x1a9),()=>{resetPassword();}),_0x5d70b6['on'](_0x23f7dd(0x25d),_0x25d981=>{removeClient(_0x5d70b6['id']);}),_0x1c325a==_0x23f7dd(0x32a)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x57d26d){const _0x3abe7d=_0x491cda;if(_0x57d26d!='botmanager'&&config[_0x3abe7d(0x2dd)]!=''){if(pid[_0x57d26d])pid[_0x57d26d]['send']({'function':_0x3abe7d(0x1c5),'args':null});}}function reloadBotManager(){const _0x597c54=_0x491cda;getClientsWithBotID('botmanager')[_0x597c54(0x330)](_0x3e5e74=>{const _0x16c511=_0x597c54;getSocket(_0x3e5e74['id'])[_0x16c511(0x28b)](_0x16c511(0x2ee),{'access':{'allow':![],'reason':_0x16c511(0x241),'token':null}});});}function getSocket(_0x486362){const _0x3cc0a0=_0x491cda;return io[_0x3cc0a0(0x203)]['sockets']['get'](_0x486362);}function setAccess(_0x1da0ee){const _0x2f3189=_0x491cda,_0x532fb9=getSocket(_0x1da0ee['id']),_0x54ad1a=_0x1da0ee[_0x2f3189(0x313)],_0x5b165c=_0x1da0ee[_0x2f3189(0x277)];devices[_0x54ad1a][_0x2f3189(0x345)]=validateAccess(devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e3)],_0x54ad1a),_0x532fb9[_0x2f3189(0x239)](_0x54ad1a);if(devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x287)]){_0x532fb9['join'](_0x5b165c);if(_0x5b165c==_0x2f3189(0x32a))initializeSocketBotManager(_0x532fb9);else initializeSocketBot(_0x532fb9);initClient(_0x5b165c);}devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e3)]&&devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e6)]==_0x2f3189(0x265)&&setSessionTimeout('2FA',_0x54ad1a),devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e3)]&&devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e6)]==_0x2f3189(0x1a2)&&setSessionTimeout(_0x2f3189(0x225),_0x54ad1a),_0x532fb9[_0x2f3189(0x28b)](_0x2f3189(0x2ee),{'status':_0x1da0ee[_0x2f3189(0x2fc)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54ad1a][_0x2f3189(0x345)],'externalip':devices[_0x54ad1a]['ip'],'publicKey':secure[_0x2f3189(0x24a)],'userid':settings[_0x2f3189(0x304)],'validInstallation':validInstallation}),devices[_0x54ad1a]['access'][_0x2f3189(0x287)]==![]&&devices[_0x54ad1a][_0x2f3189(0x345)][_0x2f3189(0x1e6)]=='2FA\x20required'&&temporaryAccess2FA(_0x54ad1a,devices[_0x54ad1a]['ip']);}function setSessionTimeout(_0x377a81,_0x2cb0e9){const _0x1dedc5=_0x491cda;let _0x1a552c;if(_0x377a81==_0x1dedc5(0x225))_0x1a552c=loginExpiry*0x3c*0x3e8;else _0x1a552c=devices[_0x2cb0e9][_0x1dedc5(0x23b)][_0x1dedc5(0x2c3)]*0x3c*0x3e8-(new Date()[_0x1dedc5(0x30b)]()-devices[_0x2cb0e9][_0x1dedc5(0x23b)][_0x1dedc5(0x1e7)]);if(devices[_0x2cb0e9][_0x1dedc5(0x246)])clearTimeout(devices[_0x2cb0e9]['pidExpireLogin']);devices[_0x2cb0e9][_0x1dedc5(0x246)]=setTimeout(()=>{const _0x4c3282=_0x1dedc5;if(devices[_0x2cb0e9][_0x4c3282(0x2c4)])clearTimeout(devices[_0x2cb0e9]['pidRefreshToken']);removeSocketListeners(_0x2cb0e9),addBlacklist(_0x2cb0e9),devices[_0x2cb0e9][_0x4c3282(0x23b)]=null,devices[_0x2cb0e9][_0x4c3282(0x220)]=null,devices[_0x2cb0e9]['access'][_0x4c3282(0x1e3)]=null,devices[_0x2cb0e9][_0x4c3282(0x345)]=validateAccess(devices[_0x2cb0e9][_0x4c3282(0x345)][_0x4c3282(0x1e3)],_0x2cb0e9),!(devices[_0x2cb0e9]['access']['allow']&&devices[_0x2cb0e9]['access'][_0x4c3282(0x1e6)]==_0x4c3282(0x291))&&(_0x377a81==_0x4c3282(0x225)?io['to'](_0x2cb0e9)[_0x4c3282(0x28b)](_0x4c3282(0x2ee),{'access':{'allow':![],'reason':_0x4c3282(0x1b3),'token':null}}):io['to'](_0x2cb0e9)['emit'](_0x4c3282(0x2ee),{'access':{'allow':![],'reason':_0x4c3282(0x2b7),'token':null}})),devices[_0x2cb0e9][_0x4c3282(0x345)][_0x4c3282(0x1e3)]=null;},_0x1a552c);}function setTokenRefresh(_0x46e836){const _0x4c1d24=_0x491cda;if(devices[_0x46e836][_0x4c1d24(0x2c4)])clearTimeout(devices[_0x46e836][_0x4c1d24(0x2c4)]);devices[_0x46e836][_0x4c1d24(0x2c4)]=setTimeout(()=>{const _0x2146e9=_0x4c1d24;getClientsWithUuid(_0x46e836)[_0x2146e9(0x338)]!=0x0?(devices[_0x46e836]['access']=refreshToken(_0x46e836),io['to'](_0x46e836)[_0x2146e9(0x28b)](_0x2146e9(0x2ee),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x46e836][_0x2146e9(0x345)],'externalip':devices[_0x46e836]['ip'],'publicKey':secure[_0x2146e9(0x24a)],'validInstallation':validInstallation}),setTokenRefresh(_0x46e836)):clearTimeout(devices[_0x46e836][_0x2146e9(0x2c4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x14f065){const _0x2cd304=_0x491cda,_0xf56696=getClient(_0x14f065['id'])[_0x2cd304(0x313)];_0x14f065[_0x2cd304(0x28b)](_0x2cd304(0x1bf),config),_0x14f065['emit'](_0x2cd304(0x1d6),cleanSettings()),_0x14f065['on'](_0x2cd304(0x30a),_0x5e6dbe=>{const _0x549d9f=_0x2cd304;if(validateAccess(_0x5e6dbe,_0xf56696)['allow'])addBot();else logger[_0x549d9f(0x362)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x14f065['on'](_0x2cd304(0x243),(_0x1fc55c,_0xa60396)=>{const _0x35f9f7=_0x2cd304;if(validateAccess(_0xa60396,_0xf56696)[_0x35f9f7(0x287)])toggleBot(_0x1fc55c[_0x35f9f7(0x2be)],_0x1fc55c['status'],_0x1fc55c['live']);else logger[_0x35f9f7(0x362)](_0x35f9f7(0x209));}),_0x14f065['on'](_0x2cd304(0x1c2),(_0x1106bb,_0x2bb034)=>{const _0x5b3586=_0x2cd304;if(validateAccess(_0x2bb034,_0xf56696)[_0x5b3586(0x287)])toggleBotMode(_0x1106bb);else logger[_0x5b3586(0x362)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x14f065['on'](_0x2cd304(0x285),(_0x406b1f,_0x3313aa)=>{const _0x2f41b4=_0x2cd304;if(validateAccess(_0x3313aa,_0xf56696)[_0x2f41b4(0x287)])deleteBot(_0x406b1f);else logger[_0x2f41b4(0x362)](_0x2f41b4(0x33c));}),_0x14f065['on'](_0x2cd304(0x2f1),(_0x2937a0,_0x269cd7)=>{const _0x5e5b79=_0x2cd304;if(validateAccess(_0x269cd7,_0xf56696)[_0x5e5b79(0x287)])storeSettings(_0x2937a0,!![]);else logger[_0x5e5b79(0x362)](_0x5e5b79(0x2ef));}),_0x14f065['on'](_0x2cd304(0x1da),_0x2c227a=>{const _0x4ca47a=_0x2cd304;if(validateAccess(_0x2c227a,_0xf56696)[_0x4ca47a(0x287)])updateBB(_0x4ca47a(0x1fc));else logger[_0x4ca47a(0x362)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x14f065['on'](_0x2cd304(0x28e),_0x361066=>{const _0x1b88e7=_0x2cd304;if(validateAccess(_0x361066,_0xf56696)[_0x1b88e7(0x287)])updateBB(_0x1b88e7(0x27b));else logger[_0x1b88e7(0x362)](_0x1b88e7(0x32e));}),_0x14f065['on'](_0x2cd304(0x2eb),_0x3ea6f4=>{const _0x1f1e95=_0x2cd304;if(validateAccess(_0x3ea6f4,_0xf56696)[_0x1f1e95(0x287)])getBackupFiles(getClient(_0x14f065['id'])[_0x1f1e95(0x313)]);else logger[_0x1f1e95(0x362)](_0x1f1e95(0x32e));}),_0x14f065['on'](_0x2cd304(0x2c5),(_0x493449,_0x45ad63)=>{const _0x267ad5=_0x2cd304;if(validateAccess(_0x45ad63,_0xf56696)['allow'])restoreBackupFile(_0x493449);else logger[_0x267ad5(0x362)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x14f065['on'](_0x2cd304(0x1dc),_0x48019f=>{const _0x56c5ab=_0x2cd304;if(validateAccess(_0x48019f,_0xf56696)[_0x56c5ab(0x287)])getMessages();else logger['full'](_0x56c5ab(0x35d));}),_0x14f065['on'](_0x2cd304(0x30f),(_0x501df5,_0x886ea)=>{const _0x11aaa2=_0x2cd304;if(validateAccess(_0x886ea,_0xf56696)[_0x11aaa2(0x287)])confirmMessage(_0x501df5);else logger[_0x11aaa2(0x362)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x14f065['on'](_0x2cd304(0x325),_0x3ca525=>{const _0x45151b=_0x2cd304;if(validateAccess(_0x3ca525,_0xf56696)['allow']){if(devices[_0xf56696][_0x45151b(0x2c4)])clearTimeout(devices[_0xf56696][_0x45151b(0x2c4)]);if(devices[_0xf56696]['pidExpireLogin'])clearTimeout(devices[_0xf56696]['pidExpireLogin']);removeSocketListeners(getClient(_0x14f065['id'])[_0x45151b(0x313)]),addBlacklist(_0xf56696),devices[_0xf56696][_0x45151b(0x23b)]=null,devices[_0xf56696][_0x45151b(0x220)]=null,devices[_0xf56696][_0x45151b(0x345)][_0x45151b(0x1e3)]=null,io['to'](getClient(_0x14f065['id'])[_0x45151b(0x313)])[_0x45151b(0x28b)](_0x45151b(0x2ee),{'access':{'allow':![],'reason':_0x45151b(0x259),'token':null}});}else logger[_0x45151b(0x362)](_0x45151b(0x1ff));});}function initializeSocketBot(_0x305aed){const _0x3159df=_0x491cda,_0x4f9054=getClient(_0x305aed['id'])['bot'],_0x34ef41=getClient(_0x305aed['id'])[_0x3159df(0x313)];_0x305aed['on']('get-logs',(_0x336336,_0x533b6a)=>{const _0x3d9133=_0x3159df;if(validateAccess(_0x533b6a,_0x34ef41)[_0x3d9133(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x3d9133(0x2db)]({'function':_0x3d9133(0x262),'args':_0x336336});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x305aed['on'](_0x3159df(0x257),(_0x504543,_0x5dfc59)=>{const _0x4d95a9=_0x3159df;if(validateAccess(_0x5dfc59,_0x34ef41)[_0x4d95a9(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x4d95a9(0x2db)]({'function':_0x4d95a9(0x27f),'args':_0x504543});}else logger[_0x4d95a9(0x362)](_0x4d95a9(0x1c4));}),_0x305aed['on']('get-portfolio',(_0x1c72af,_0x416652)=>{const _0x12e858=_0x3159df;if(validateAccess(_0x416652,_0x34ef41)['allow']){if(pid[_0x4f9054])pid[_0x4f9054]['send']({'function':_0x12e858(0x2f2),'args':_0x1c72af});}else logger[_0x12e858(0x362)](_0x12e858(0x2d5));}),_0x305aed['on'](_0x3159df(0x314),(_0x1fc501,_0x418e65)=>{const _0x20d631=_0x3159df;if(validateAccess(_0x418e65,_0x34ef41)[_0x20d631(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x20d631(0x2db)]({'function':'storeConfiguration','args':_0x1fc501});}else logger[_0x20d631(0x362)](_0x20d631(0x1d5));}),_0x305aed['on'](_0x3159df(0x35c),(_0x4c7f06,_0x302aa9)=>{const _0x4f8059=_0x3159df;if(validateAccess(_0x302aa9,_0x34ef41)[_0x4f8059(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x4f8059(0x2db)]({'function':_0x4f8059(0x20e),'args':_0x4c7f06});}else logger[_0x4f8059(0x362)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x305aed['on'](_0x3159df(0x274),_0x225969=>{const _0x48a4ff=_0x3159df;if(validateAccess(_0x225969,_0x34ef41)[_0x48a4ff(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x48a4ff(0x2db)]({'function':_0x48a4ff(0x1a5),'args':null});}else logger[_0x48a4ff(0x362)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x305aed['on'](_0x3159df(0x301),(_0x257a8e,_0x17f49d)=>{const _0x54a384=_0x3159df;if(validateAccess(_0x17f49d,_0x34ef41)[_0x54a384(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x54a384(0x2db)]({'function':_0x54a384(0x1f5),'args':_0x257a8e});}else logger['full'](_0x54a384(0x300));}),_0x305aed['on'](_0x3159df(0x213),_0x9bb3d5=>{const _0x66cf8a=_0x3159df;if(validateAccess(_0x9bb3d5,_0x34ef41)[_0x66cf8a(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x66cf8a(0x2db)]({'function':_0x66cf8a(0x322),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x305aed['on']('show-config',_0x1d3a8c=>{const _0x23d444=_0x3159df;if(validateAccess(_0x1d3a8c,_0x34ef41)[_0x23d444(0x287)]){if(pid[_0x4f9054])pid[_0x4f9054][_0x23d444(0x2db)]({'function':_0x23d444(0x361),'args':null});}else logger[_0x23d444(0x362)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x305aed['on'](_0x3159df(0x1da),_0x545b97=>{const _0x45f53d=_0x3159df;if(validateAccess(_0x545b97,_0x34ef41)[_0x45f53d(0x287)])updateBB(_0x45f53d(0x1fc));else logger['full'](_0x45f53d(0x2af));}),_0x305aed['on'](_0x3159df(0x1dc),_0x53a2cf=>{const _0x5ea82e=_0x3159df;if(validateAccess(_0x53a2cf,_0x34ef41)[_0x5ea82e(0x287)])getMessages();else logger[_0x5ea82e(0x362)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x305aed['on'](_0x3159df(0x30f),(_0x3021ac,_0xcf1cb6)=>{const _0x591105=_0x3159df;if(validateAccess(_0xcf1cb6,_0x34ef41)[_0x591105(0x287)])confirmMessage(_0x3021ac);else logger[_0x591105(0x362)](_0x591105(0x332));}),_0x305aed['on'](_0x3159df(0x325),_0xf8edff=>{const _0x5ef9a5=_0x3159df;if(validateAccess(_0xf8edff,_0x34ef41)[_0x5ef9a5(0x287)]){if(devices[_0x34ef41]['pidRefreshToken'])clearTimeout(devices[_0x34ef41][_0x5ef9a5(0x2c4)]);if(devices[_0x34ef41][_0x5ef9a5(0x246)])clearTimeout(devices[_0x34ef41][_0x5ef9a5(0x246)]);removeSocketListeners(getClient(_0x305aed['id'])[_0x5ef9a5(0x313)]),addBlacklist(_0x34ef41),devices[_0x34ef41][_0x5ef9a5(0x23b)]=null,devices[_0x34ef41][_0x5ef9a5(0x220)]=null,devices[_0x34ef41][_0x5ef9a5(0x345)][_0x5ef9a5(0x1e3)]=null,io['to'](getClient(_0x305aed['id'])[_0x5ef9a5(0x313)])[_0x5ef9a5(0x28b)](_0x5ef9a5(0x2ee),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x5ef9a5(0x1ff));});}function removeSocketListeners(_0x44a631){const _0x588b60=_0x491cda;getClientsWithUuid(_0x44a631)[_0x588b60(0x330)](_0x365e16=>{const _0xeacb61=_0x588b60;getSocket(_0x365e16['id'])[_0xeacb61(0x306)]();});}function cleanSettings(){const _0x4e86d1=_0x491cda;let _0x28dfd2=settings;return settings[_0x4e86d1(0x1db)]&&settings[_0x4e86d1(0x1db)]!=''&&(_0x28dfd2={..._0x28dfd2,'telegramToken':_0x4e86d1(0x219)}),settings[_0x4e86d1(0x31f)]&&settings[_0x4e86d1(0x31f)]!=''&&(_0x28dfd2={..._0x28dfd2,'bbPassword':_0x4e86d1(0x219)}),(settings[_0x4e86d1(0x31f)]&&settings[_0x4e86d1(0x31f)]==_0x4e86d1(0x21a)||settings[_0x4e86d1(0x1db)]&&settings['telegramToken']==_0x4e86d1(0x21a))&&(_0x28dfd2={..._0x28dfd2,'restored':{'password':settings[_0x4e86d1(0x31f)]==_0x4e86d1(0x21a),'telegram':settings[_0x4e86d1(0x1db)]=='***'}}),_0x28dfd2;}async function updateBB(_0x152096){const _0x13dbf7=_0x491cda;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x33da3f=>{const _0x219af6=_0x149a;restartBot(_0x33da3f[_0x219af6(0x2be)]);}),logger['debug']('Starting\x20Balance\x20Bot\x20'+_0x152096);if(_0x152096==_0x13dbf7(0x1fc))process[_0x13dbf7(0x2db)]({'update':!![]},_0x222b2c=>{});else _0x152096==_0x13dbf7(0x27b)&&process[_0x13dbf7(0x2db)]({'reinstall':!![]},_0x547589=>{});}function startBot(_0x574df7,_0x314fce,_0x1ae26d){const _0x584f3f=_0x491cda;if(debugging)_0x574df7[_0x584f3f(0x2e7)]('-d');let _0x427d6f=![];const _0x3e8e70=_0x574df7[0x0];_0x314fce={..._0x314fce,'stdio':[_0x584f3f(0x1bd),_0x584f3f(0x1bd),_0x584f3f(0x1bd),'ipc']},pid[_0x3e8e70]=childProcess[_0x584f3f(0x1e4)](botfile,_0x574df7,_0x314fce),pid[_0x3e8e70]['on']('message',_0x4f4035=>{const _0x431293=_0x584f3f;switch(Object[_0x431293(0x310)](_0x4f4035)[0x0]){case _0x431293(0x1f4):updateBotName(_0x3e8e70,_0x4f4035['botname']);break;case _0x431293(0x1de):updateBotManager();break;case'status':updateStatus(_0x3e8e70,_0x4f4035['status']);break;case _0x431293(0x221):updateLive(_0x3e8e70,_0x4f4035['live']);break;case _0x431293(0x2c8):updateLive(_0x3e8e70,_0x4f4035[_0x431293(0x2c8)]),io['to'](_0x3e8e70)[_0x431293(0x28b)]('status',{'access':{'allow':![],'reason':_0x431293(0x241),'token':null}});break;case _0x431293(0x2cb):_0x4f4035[_0x431293(0x2cb)]==_0x431293(0x2ad)&&restartBot(_0x3e8e70);_0x4f4035[_0x431293(0x2cb)]==_0x431293(0x2cc)&&toggleBot(_0x3e8e70,_0x431293(0x19b),_0x431293(0x1df));break;case _0x431293(0x2b8):sendTelegram(_0x3e8e70,_0x4f4035[_0x431293(0x2b8)]);break;case _0x431293(0x24c):sendTelegramMsg(_0x4f4035[_0x431293(0x24c)]);break;case _0x431293(0x1e9):io['to'](_0x3e8e70)[_0x431293(0x28b)](_0x4f4035[_0x431293(0x1e9)],_0x4f4035[_0x431293(0x309)]);break;}}),pid[_0x3e8e70]['on'](_0x584f3f(0x2e1),function(_0x5a8b3d){if(_0x427d6f)return;_0x427d6f=!![],_0x1ae26d(_0x5a8b3d);}),pid[_0x3e8e70]['on'](_0x584f3f(0x293),async function(_0x5186b4){const _0x3c1e4a=_0x584f3f;if(installingUpdate)return;if(_0x427d6f)return;_0x427d6f=!![],_0x1ae26d(null);const _0x1a109d=dbConfig['get']('bots')[_0x3c1e4a(0x1ad)]({'botID':_0x3e8e70})[_0x3c1e4a(0x26b)]();_0x1a109d&&(_0x1a109d[_0x3c1e4a(0x2ee)]==_0x3c1e4a(0x204)||_0x1a109d[_0x3c1e4a(0x2ee)]==_0x3c1e4a(0x218))&&(await sleep(0x3e8),updateLive(_0x3e8e70,_0x3c1e4a(0x1df)),logger[_0x3c1e4a(0x362)](_0x3c1e4a(0x2ab)+_0x3e8e70),startBot([_0x3e8e70,userID],{'cwd':bbpath},function(_0x43edee){const _0x45db54=_0x3c1e4a;if(_0x43edee)logger[_0x45db54(0x362)](_0x43edee);}));});}function stopBot(_0x29d340){const _0x11bbf6=_0x491cda;getClientsWithBotID(_0x29d340)[_0x11bbf6(0x330)](_0x3478be=>{const _0x5b3aea=_0x11bbf6;getSocket(_0x3478be['id'])[_0x5b3aea(0x25d)](!![]),removeClient(_0x3478be['id']);}),pid[_0x29d340]&&(pid[_0x29d340]['kill'](),pid[_0x29d340]=null);}function restartBot(_0x799ec4){const _0x5af510=_0x491cda;if(pid[_0x799ec4])pid[_0x799ec4][_0x5af510(0x2cc)]();}function addBot(){const _0x31bbf=_0x491cda;let _0x114ab1;for(let _0x15c493=0x1;_0x15c493<0x3e9;_0x15c493++){_0x114ab1=_0x15c493['toString']()[_0x31bbf(0x2c2)](0x3,'0');let _0x5795d3=config['find'](_0x9aaa35=>_0x9aaa35[_0x31bbf(0x2be)]==_0x114ab1);if(!_0x5795d3)break;}if(_0x114ab1===_0x31bbf(0x2e3)){logger['full'](_0x31bbf(0x343));return;}logger[_0x31bbf(0x362)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x114ab1),dbConfig['get'](_0x31bbf(0x1bf))['push']({'botID':_0x114ab1,'botname':_0x31bbf(0x24d)+_0x114ab1,'status':_0x31bbf(0x218),'live':''})[_0x31bbf(0x208)](),startBot([_0x114ab1,userID],{'cwd':bbpath},function(_0x3c2a8f){const _0x309cbf=_0x31bbf;if(_0x3c2a8f)logger[_0x309cbf(0x362)](_0x3c2a8f);}),config=getConfiguration(),io['to'](_0x31bbf(0x32a))[_0x31bbf(0x28b)]('bots',config);}function deleteBot(_0x2c2913){const _0x36bf7d=_0x491cda;getClientsWithBotID(_0x2c2913)[_0x36bf7d(0x330)](_0x21476a=>{const _0x45987b=_0x36bf7d;getSocket(_0x21476a['id'])[_0x45987b(0x25d)](!![]),removeClient(_0x21476a['id']);}),dbConfig[_0x36bf7d(0x27a)](_0x36bf7d(0x1bf))['remove']({'botID':_0x2c2913})[_0x36bf7d(0x208)](),logger[_0x36bf7d(0x362)](_0x36bf7d(0x1cb)+_0x2c2913),stopBot(_0x2c2913);try{if(fs[_0x36bf7d(0x2a9)](path[_0x36bf7d(0x239)](configpath,_0x36bf7d(0x1ed)+_0x2c2913+_0x36bf7d(0x2bf))))fs['unlinkSync'](path[_0x36bf7d(0x239)](configpath,_0x36bf7d(0x1ed)+_0x2c2913+_0x36bf7d(0x2bf)));if(fs[_0x36bf7d(0x2a9)](path[_0x36bf7d(0x239)](configpath,_0x36bf7d(0x1ed)+_0x2c2913+_0x36bf7d(0x336))))fs[_0x36bf7d(0x215)](path['join'](configpath,_0x36bf7d(0x1ed)+_0x2c2913+_0x36bf7d(0x336)));if(fs[_0x36bf7d(0x2a9)](path['join'](configpath,'bot-'+_0x2c2913+'-performance.json')))fs[_0x36bf7d(0x215)](path[_0x36bf7d(0x239)](configpath,'bot-'+_0x2c2913+_0x36bf7d(0x1ce)));if(fs['existsSync'](path[_0x36bf7d(0x239)](configpath,'bot-'+_0x2c2913+_0x36bf7d(0x29c))))fs[_0x36bf7d(0x215)](path['join'](configpath,'bot-'+_0x2c2913+_0x36bf7d(0x29c)));}catch(_0x336138){if(_0x336138)logger[_0x36bf7d(0x362)](_0x36bf7d(0x35e),_0x336138);}config=getConfiguration(),io['to']('botmanager')[_0x36bf7d(0x28b)]('bots',config);}function toggleBot(_0x2e6166,_0xfa2109,_0x3699b1){const _0x369cac=_0x491cda;dbConfig[_0x369cac(0x27a)](_0x369cac(0x1bf))[_0x369cac(0x1ad)]({'botID':_0x2e6166})[_0x369cac(0x24e)]({'status':_0xfa2109})[_0x369cac(0x24e)]({'live':_0x3699b1})[_0x369cac(0x208)]();if(_0xfa2109==_0x369cac(0x204)||_0xfa2109==_0x369cac(0x218))logger[_0x369cac(0x362)](_0x369cac(0x1d3)+_0x2e6166),startBot([_0x2e6166,userID],{'cwd':bbpath},function(_0x27432c){const _0x556581=_0x369cac;if(_0x27432c)logger[_0x556581(0x362)](_0x27432c);});else(_0xfa2109=='disabled'||_0xfa2109==_0x369cac(0x34e))&&(logger[_0x369cac(0x362)](_0x369cac(0x342)+_0x2e6166),stopBot(_0x2e6166));config=getConfiguration(),io['to'](_0x369cac(0x32a))['emit'](_0x369cac(0x1bf),config);}function toggleStatus(_0x2f436b){const _0x1f732c=_0x491cda;let _0x2c04bf=dbConfig[_0x1f732c(0x27a)](_0x1f732c(0x1bf))[_0x1f732c(0x1ad)]({'botID':_0x2f436b})[_0x1f732c(0x26b)](),_0x597417;if(_0x2c04bf['status']==='enabled')_0x597417=_0x1f732c(0x19b);else{if(_0x2c04bf[_0x1f732c(0x2ee)]==='new')_0x597417=_0x1f732c(0x34e);else{if(_0x2c04bf[_0x1f732c(0x2ee)]===_0x1f732c(0x34e))_0x597417=_0x1f732c(0x218);else{if(_0x2c04bf[_0x1f732c(0x2ee)]===_0x1f732c(0x19b))_0x597417='enabled';}}}return _0x597417;}function updateStatus(_0x48ca8e,_0x44cd95){const _0xe8d140=_0x491cda;dbConfig['get'](_0xe8d140(0x1bf))[_0xe8d140(0x1ad)]({'botID':_0x48ca8e})[_0xe8d140(0x24e)]({'status':_0x44cd95})[_0xe8d140(0x208)](),config=getConfiguration(),io['to']('botmanager')[_0xe8d140(0x28b)](_0xe8d140(0x1bf),config);}function updateLive(_0x6c8a95,_0x3f27dc){const _0x4abdf3=_0x491cda;dbConfig[_0x4abdf3(0x27a)](_0x4abdf3(0x1bf))['find']({'botID':_0x6c8a95})[_0x4abdf3(0x24e)]({'live':_0x3f27dc})[_0x4abdf3(0x208)](),config=getConfiguration(),io['to'](_0x4abdf3(0x32a))['emit'](_0x4abdf3(0x1bf),config);}function updateBotName(_0x2950fb,_0x3c60d1){const _0x21156f=_0x491cda;dbConfig[_0x21156f(0x27a)](_0x21156f(0x1bf))[_0x21156f(0x1ad)]({'botID':_0x2950fb})['assign']({'botname':_0x3c60d1})[_0x21156f(0x208)](),config=getConfiguration(),io['to'](_0x21156f(0x32a))[_0x21156f(0x28b)](_0x21156f(0x1bf),config);}function updateBotManager(){const _0x17d9d4=_0x491cda;config=getConfiguration(),io['to'](_0x17d9d4(0x32a))[_0x17d9d4(0x28b)](_0x17d9d4(0x1bf),config);}function toggleBotMode(_0x43389b){const _0x2ee09d=_0x491cda;if(pid[_0x43389b])pid[_0x43389b][_0x2ee09d(0x2db)]({'function':'toggleBotMode','args':null});else{const _0x212663=configpath+'bot-'+_0x43389b+_0x2ee09d(0x2bf),_0x41d689=fs[_0x2ee09d(0x2ca)](_0x212663),_0xe1d233=JSON[_0x2ee09d(0x354)](_0x41d689),_0x26a3fe=_0xe1d233[_0x2ee09d(0x277)][0x0]['headless'];_0xe1d233['bot'][0x0]['headless']=!_0x26a3fe;const _0x5e8c04=JSON[_0x2ee09d(0x223)](_0xe1d233,null,0x2);fs[_0x2ee09d(0x237)](_0x212663,_0x5e8c04),config=getConfiguration(),io['to'](_0x2ee09d(0x32a))[_0x2ee09d(0x28b)](_0x2ee09d(0x1bf),config);}}function telegramError(_0x2a065d){const _0x235ade=_0x491cda;logger[_0x235ade(0x2b4)](getTimeStamp()+_0x235ade(0x1d7));}function validateTelegram(_0x28866d){const _0x16612a=_0x491cda;if(_0x28866d[_0x16612a(0x296)]['username']!=settings[_0x16612a(0x206)]&&'@'+_0x28866d['from'][_0x16612a(0x236)]!=settings[_0x16612a(0x206)])return tgBot['sendMessage'](_0x28866d[_0x16612a(0x234)]['id'],_0x16612a(0x2b9),{'parse_mode':_0x16612a(0x2d8)})[_0x16612a(0x2ac)](_0x5f3d5c=>{telegramError(_0x5f3d5c);}),![];return!![];}async function initTelegram(){const _0x1dff96=_0x491cda;if(tgBot)tgBot[_0x1dff96(0x2d1)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1dff96(0x1db)],{'polling':!![]});let _0x17489b='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x17489b+='\x0a',_0x17489b+=_0x1dff96(0x261),_0x17489b+='/disable\x20-\x20disable\x20notifications\x0a',_0x17489b+=_0x1dff96(0x23a),_0x17489b+=_0x1dff96(0x23d),_0x17489b+='/on\x20-\x20start\x20bot(s)\x0a',_0x17489b+=_0x1dff96(0x2b1),_0x17489b+=_0x1dff96(0x2fb),_0x17489b+=_0x1dff96(0x2f4),_0x17489b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x17489b+=_0x1dff96(0x32b),_0x17489b+=_0x1dff96(0x33f),_0x17489b+=_0x1dff96(0x348),_0x17489b+=_0x1dff96(0x238);let _0x1b39c5=_0x1dff96(0x2e4);_0x1b39c5+='\x0a',_0x1b39c5+=_0x17489b,tgBot[_0x1dff96(0x328)](/\/start/,_0x3e94b7=>{const _0x3f4dc4=_0x1dff96;if(!validateTelegram(_0x3e94b7))return;if(settings[_0x3f4dc4(0x356)]!=_0x3e94b7['chat']['id'])updateSetting(_0x3f4dc4(0x356),_0x3e94b7[_0x3f4dc4(0x234)]['id']);updateSetting(_0x3f4dc4(0x260),!![]),tgBot[_0x3f4dc4(0x1e1)](_0x3e94b7[_0x3f4dc4(0x234)]['id'],_0x1b39c5)[_0x3f4dc4(0x2ac)](_0x477144=>{telegramError(_0x477144);});}),tgBot[_0x1dff96(0x328)](/\/enable/,_0x3d04f8=>{const _0x2f0c6a=_0x1dff96;if(!validateTelegram(_0x3d04f8))return;if(settings[_0x2f0c6a(0x356)]!=_0x3d04f8[_0x2f0c6a(0x234)]['id'])updateSetting('telegramChatId',_0x3d04f8[_0x2f0c6a(0x234)]['id']);updateSetting(_0x2f0c6a(0x260),!![]),tgBot[_0x2f0c6a(0x1e1)](_0x3d04f8[_0x2f0c6a(0x234)]['id'],_0x2f0c6a(0x22f))[_0x2f0c6a(0x2ac)](_0x461aa3=>{telegramError(_0x461aa3);});}),tgBot[_0x1dff96(0x328)](/\/config/,async _0x1703b2=>{const _0x510dd5=_0x1dff96;if(!validateTelegram(_0x1703b2))return;tgBot[_0x510dd5(0x272)](_0x510dd5(0x1ea)),tgBot[_0x510dd5(0x1e1)](_0x1703b2[_0x510dd5(0x234)]['id'],_0x510dd5(0x276),{'reply_markup':{'inline_keyboard':[[{'text':_0x510dd5(0x1a4),'callback_data':'orders'},{'text':'Alerts','callback_data':_0x510dd5(0x29b)},{'text':_0x510dd5(0x270),'callback_data':_0x510dd5(0x1ab)}]]}})['catch'](_0x2ad054=>{telegramError(_0x2ad054);}),tgBot['on'](_0x510dd5(0x1ea),async _0x1e527b=>{const _0x13350b=_0x510dd5,_0xd2413c=_0x1e527b[_0x13350b(0x35b)],_0x2dff61=_0x1e527b[_0x13350b(0x258)];tgBot[_0x13350b(0x2a3)](_0x1e527b['id'])[_0x13350b(0x247)](async()=>{const _0xc0857b=_0x13350b;_0xd2413c==_0xc0857b(0x27d)&&(updateSetting(_0xc0857b(0x1f7),_0xc0857b(0x27d)),updateSetting(_0xc0857b(0x260),!![]),await tgBot[_0xc0857b(0x1e1)](_0x2dff61[_0xc0857b(0x234)]['id'],_0xc0857b(0x320))[_0xc0857b(0x2ac)](_0x291399=>{telegramError(_0x291399);}));_0xd2413c==_0xc0857b(0x29b)&&(updateSetting(_0xc0857b(0x1f7),'alerts'),updateSetting(_0xc0857b(0x260),!![]),await tgBot[_0xc0857b(0x1e1)](_0x2dff61[_0xc0857b(0x234)]['id'],_0xc0857b(0x35a))[_0xc0857b(0x2ac)](_0xa29d1e=>{telegramError(_0xa29d1e);}));_0xd2413c==_0xc0857b(0x1ab)&&(updateSetting('telegramEvents',_0xc0857b(0x1ab)),updateSetting(_0xc0857b(0x260),!![]),await tgBot[_0xc0857b(0x1e1)](_0x2dff61[_0xc0857b(0x234)]['id'],_0xc0857b(0x1ac))['catch'](_0x494c06=>{telegramError(_0x494c06);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x2dff61['chat']['id'],_0xc0857b(0x256))[_0xc0857b(0x2ac)](_0x1f6c87=>{telegramError(_0x1f6c87);});}),tgBot['removeListener'](_0x13350b(0x1ea));});}),tgBot['onText'](/\/status/,_0x18aad6=>{const _0x47beeb=_0x1dff96;if(!validateTelegram(_0x18aad6))return;const _0x24ec74=getBotsWithMode();let _0x2196a2=_0x47beeb(0x22b);config[_0x47beeb(0x330)](_0x36f212=>{const _0x1f1ac4=_0x47beeb,_0x401d7c=_0x24ec74[_0x1f1ac4(0x1ad)](_0x41e007=>_0x41e007[_0x1f1ac4(0x2be)]==_0x36f212[_0x1f1ac4(0x2be)])[_0x1f1ac4(0x1eb)];_0x2196a2+=_0x1f1ac4(0x24d)+_0x36f212[_0x1f1ac4(0x2be)]+':\x20'+_0x36f212[_0x1f1ac4(0x2ee)]+_0x1f1ac4(0x315)+_0x401d7c+_0x1f1ac4(0x315)+_0x36f212[_0x1f1ac4(0x221)]+'\x0a';}),_0x2196a2+='\x0a',_0x2196a2+=_0x47beeb(0x33e),_0x2196a2+=!settings[_0x47beeb(0x260)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x2196a2+=settings['telegramEnabled']?settings[_0x47beeb(0x1f7)]==_0x47beeb(0x1ab)?_0x47beeb(0x360):'Notifications\x20types:\x20'+settings[_0x47beeb(0x1f7)]+_0x47beeb(0x273):'',tgBot[_0x47beeb(0x1e1)](_0x18aad6[_0x47beeb(0x234)]['id'],_0x2196a2,{'parse_mode':_0x47beeb(0x2d8)})[_0x47beeb(0x2ac)](_0x127aa0=>{telegramError(_0x127aa0);});}),tgBot[_0x1dff96(0x328)](/\/restart/,_0x59585f=>{const _0x551833=_0x1dff96;if(!validateTelegram(_0x59585f))return;tgBot[_0x551833(0x272)](_0x551833(0x1ea));const _0x5f2b8f=getEnabledBots();if(_0x5f2b8f[_0x551833(0x338)]==0x0)tgBot[_0x551833(0x1e1)](_0x59585f['chat']['id'],_0x551833(0x20a))[_0x551833(0x2ac)](_0x27d086=>{telegramError(_0x27d086);});else{if(_0x5f2b8f['length']>0x1)_0x5f2b8f['push']({'botID':_0x551833(0x1ab)});let _0x33e128=[],_0x53d8be=[];const _0x280233=_0x5f2b8f[_0x551833(0x338)]%0x4==0x0||_0x5f2b8f[_0x551833(0x338)]%0x4==0x3||_0x5f2b8f[_0x551833(0x338)]%0x3==0x1?0x4:0x3;let _0x42cbf0=0x0;_0x5f2b8f[_0x551833(0x330)]((_0x322faf,_0x5cab6b)=>{const _0xeab23b=_0x551833;if(_0x5cab6b%_0x280233==0x0)_0x53d8be=[];_0x53d8be[_0xeab23b(0x2e7)]({'text':_0x322faf[_0xeab23b(0x2be)]==_0xeab23b(0x1ab)?_0xeab23b(0x216):_0xeab23b(0x24d)+_0x322faf['botID'],'callback_data':_0x322faf['botID']}),_0x5cab6b%_0x280233==0x0&&(_0x33e128[_0x42cbf0]=_0x53d8be,_0x42cbf0++);}),tgBot['sendMessage'](_0x59585f['chat']['id'],_0x551833(0x268),{'reply_markup':{'inline_keyboard':_0x33e128}})[_0x551833(0x2ac)](_0x2cadb1=>{telegramError(_0x2cadb1);}),tgBot['on']('callback_query',async _0x292ef2=>{const _0x5f1921=_0x551833,_0x2f4cd9=_0x292ef2['data'],_0x264e19=_0x292ef2['message'];tgBot['answerCallbackQuery'](_0x292ef2['id'])[_0x5f1921(0x247)](async()=>{const _0x4a3cad=_0x5f1921;_0x2f4cd9==_0x4a3cad(0x1ab)?config[_0x4a3cad(0x330)](_0x155ee9=>{const _0x46d900=_0x4a3cad;restartBot(_0x155ee9[_0x46d900(0x2be)]);}):restartBot(_0x2f4cd9);}),tgBot[_0x5f1921(0x272)](_0x5f1921(0x1ea));});}}),tgBot[_0x1dff96(0x328)](/\/on/,_0x14ad1e=>{const _0x51d8d4=_0x1dff96;if(!validateTelegram(_0x14ad1e))return;tgBot[_0x51d8d4(0x272)](_0x51d8d4(0x1ea));const _0x1f09ea=getDisabledBots();if(_0x1f09ea[_0x51d8d4(0x338)]==0x0)tgBot[_0x51d8d4(0x1e1)](_0x14ad1e[_0x51d8d4(0x234)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x51d8d4(0x2ac)](_0x42ab5b=>{telegramError(_0x42ab5b);});else{if(_0x1f09ea[_0x51d8d4(0x338)]>0x1)_0x1f09ea[_0x51d8d4(0x2e7)]({'botID':_0x51d8d4(0x1ab)});let _0x150638=[],_0x605e7a=[];const _0x1f8c15=_0x1f09ea[_0x51d8d4(0x338)]%0x4==0x0||_0x1f09ea[_0x51d8d4(0x338)]%0x4==0x3||_0x1f09ea[_0x51d8d4(0x338)]%0x3==0x1?0x4:0x3;let _0x17e226=0x0;_0x1f09ea[_0x51d8d4(0x330)]((_0x3f7bd9,_0x12bc6a)=>{const _0xff6b55=_0x51d8d4;if(_0x12bc6a%_0x1f8c15==0x0)_0x605e7a=[];_0x605e7a[_0xff6b55(0x2e7)]({'text':_0x3f7bd9[_0xff6b55(0x2be)]==_0xff6b55(0x1ab)?_0xff6b55(0x216):_0xff6b55(0x24d)+_0x3f7bd9[_0xff6b55(0x2be)],'callback_data':_0x3f7bd9[_0xff6b55(0x2be)]}),_0x12bc6a%_0x1f8c15==0x0&&(_0x150638[_0x17e226]=_0x605e7a,_0x17e226++);}),tgBot['sendMessage'](_0x14ad1e['chat']['id'],_0x51d8d4(0x1a3),{'reply_markup':{'inline_keyboard':_0x150638}})['catch'](_0x303d95=>{telegramError(_0x303d95);}),tgBot['on'](_0x51d8d4(0x1ea),async _0x3c4826=>{const _0x3549a2=_0x51d8d4,_0x5583f8=_0x3c4826[_0x3549a2(0x35b)],_0xd925ea=_0x3c4826[_0x3549a2(0x258)];tgBot[_0x3549a2(0x2a3)](_0x3c4826['id'])[_0x3549a2(0x247)](async()=>{const _0x195cef=_0x3549a2;_0x5583f8==_0x195cef(0x1ab)?(tgBot[_0x195cef(0x1e1)](_0xd925ea[_0x195cef(0x234)]['id'],_0x195cef(0x2e6))[_0x195cef(0x2ac)](_0x1b1bb7=>{telegramError(_0x1b1bb7);}),_0x1f09ea[_0x195cef(0x330)](_0x2924db=>{const _0x923950=_0x195cef;if(_0x2924db[_0x923950(0x2be)]!=_0x923950(0x1ab))toggleBot(_0x2924db[_0x923950(0x2be)],toggleStatus(_0x2924db[_0x923950(0x2be)]),_0x923950(0x1df));})):(tgBot[_0x195cef(0x1e1)](_0xd925ea['chat']['id'],_0x195cef(0x227)+_0x5583f8)[_0x195cef(0x2ac)](_0x3d109b=>{telegramError(_0x3d109b);}),toggleBot(_0x5583f8,toggleStatus(_0x5583f8),_0x195cef(0x1df)));}),tgBot[_0x3549a2(0x272)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x5a309c=>{const _0x1b21c2=_0x1dff96;if(!validateTelegram(_0x5a309c))return;tgBot[_0x1b21c2(0x272)](_0x1b21c2(0x1ea));const _0x4fa935=getEnabledBots();if(_0x4fa935[_0x1b21c2(0x338)]==0x0)tgBot['sendMessage'](_0x5a309c['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x1b21c2(0x2ac)](_0x542b11=>{telegramError(_0x542b11);});else{if(_0x4fa935[_0x1b21c2(0x338)]>0x1)_0x4fa935['push']({'botID':'all'});let _0x465c62=[],_0x19cdbf=[];const _0x52eb90=_0x4fa935[_0x1b21c2(0x338)]%0x4==0x0||_0x4fa935[_0x1b21c2(0x338)]%0x4==0x3||_0x4fa935['length']%0x3==0x1?0x4:0x3;let _0x2bb94b=0x0;_0x4fa935[_0x1b21c2(0x330)]((_0x197e52,_0x9fc93d)=>{const _0x35d773=_0x1b21c2;if(_0x9fc93d%_0x52eb90==0x0)_0x19cdbf=[];_0x19cdbf[_0x35d773(0x2e7)]({'text':_0x197e52[_0x35d773(0x2be)]==_0x35d773(0x1ab)?_0x35d773(0x216):'Bot\x20'+_0x197e52[_0x35d773(0x2be)],'callback_data':_0x197e52[_0x35d773(0x2be)]}),_0x9fc93d%_0x52eb90==0x0&&(_0x465c62[_0x2bb94b]=_0x19cdbf,_0x2bb94b++);}),tgBot['sendMessage'](_0x5a309c[_0x1b21c2(0x234)]['id'],_0x1b21c2(0x1d0),{'reply_markup':{'inline_keyboard':_0x465c62}})[_0x1b21c2(0x2ac)](_0x34e8d5=>{telegramError(_0x34e8d5);}),tgBot['on'](_0x1b21c2(0x1ea),async _0xb9029a=>{const _0x4c511a=_0x1b21c2,_0x425f72=_0xb9029a['data'],_0x8d2fbc=_0xb9029a['message'];tgBot[_0x4c511a(0x2a3)](_0xb9029a['id'])['then'](async()=>{const _0x5f5534=_0x4c511a;_0x425f72==_0x5f5534(0x1ab)?(tgBot[_0x5f5534(0x1e1)](_0x8d2fbc[_0x5f5534(0x234)]['id'],_0x5f5534(0x250))[_0x5f5534(0x2ac)](_0x504dd1=>{telegramError(_0x504dd1);}),_0x4fa935[_0x5f5534(0x330)](_0x124942=>{const _0x58e9b9=_0x5f5534;if(_0x124942['botID']!='all')toggleBot(_0x124942[_0x58e9b9(0x2be)],toggleStatus(_0x124942[_0x58e9b9(0x2be)]),_0x58e9b9(0x1df));})):(tgBot[_0x5f5534(0x1e1)](_0x8d2fbc[_0x5f5534(0x234)]['id'],_0x5f5534(0x339)+_0x425f72)[_0x5f5534(0x2ac)](_0x11beee=>{telegramError(_0x11beee);}),toggleBot(_0x425f72,toggleStatus(_0x425f72),'stopped'));}),tgBot[_0x4c511a(0x272)]('callback_query');});}}),tgBot[_0x1dff96(0x328)](/\/portfolio/,_0x317557=>{const _0x2606ff=_0x1dff96;if(!validateTelegram(_0x317557))return;tgBot[_0x2606ff(0x272)](_0x2606ff(0x1ea));const _0x3f2cd0=getEnabledBots();if(_0x3f2cd0[_0x2606ff(0x338)]==0x0)tgBot[_0x2606ff(0x1e1)](_0x317557[_0x2606ff(0x234)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x25237e=>{telegramError(_0x25237e);});else{if(_0x3f2cd0[_0x2606ff(0x338)]>0x1){let _0x273576=[],_0x1b1442=[];const _0xaf467e=_0x3f2cd0[_0x2606ff(0x338)]%0x4==0x0||_0x3f2cd0[_0x2606ff(0x338)]%0x4==0x3||_0x3f2cd0['length']%0x3==0x1?0x4:0x3;let _0x53d93f=0x0;_0x3f2cd0[_0x2606ff(0x330)]((_0x4ee888,_0x5df046)=>{const _0x10878a=_0x2606ff;if(_0x5df046%_0xaf467e==0x0)_0x1b1442=[];_0x1b1442['push']({'text':_0x10878a(0x24d)+_0x4ee888['botID'],'callback_data':_0x4ee888[_0x10878a(0x2be)]}),_0x5df046%_0xaf467e==0x0&&(_0x273576[_0x53d93f]=_0x1b1442,_0x53d93f++);}),tgBot[_0x2606ff(0x1e1)](_0x317557['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x273576}})[_0x2606ff(0x2ac)](_0x3f11b4=>{telegramError(_0x3f11b4);}),tgBot['on'](_0x2606ff(0x1ea),async _0x45a19c=>{const _0x3c516c=_0x2606ff,_0x341eb4=_0x45a19c[_0x3c516c(0x35b)],_0x1b70d4=_0x45a19c[_0x3c516c(0x258)];tgBot[_0x3c516c(0x2a3)](_0x45a19c['id'])[_0x3c516c(0x247)](async()=>{const _0x452148=_0x3c516c;if(pid[_0x341eb4])pid[_0x341eb4][_0x452148(0x2db)]({'function':_0x452148(0x346),'args':null});}),tgBot[_0x3c516c(0x272)](_0x3c516c(0x1ea));});}else{const _0x8f4520=_0x3f2cd0[0x0][_0x2606ff(0x2be)];if(pid[_0x8f4520])pid[_0x8f4520]['send']({'function':_0x2606ff(0x346),'args':null});}}}),tgBot[_0x1dff96(0x328)](/\/update/,async _0x26a968=>{const _0x1240e9=_0x1dff96;if(!validateTelegram(_0x26a968))return;tgBot[_0x1240e9(0x272)](_0x1240e9(0x1ea)),await getMessages();if(!updateAvailable)tgBot[_0x1240e9(0x1e1)](_0x26a968[_0x1240e9(0x234)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x1240e9(0x2ac)](_0xbbfd57=>{telegramError(_0xbbfd57);});else!validInstallation?tgBot[_0x1240e9(0x1e1)](_0x26a968[_0x1240e9(0x234)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x22da94=>{telegramError(_0x22da94);}):(tgBot[_0x1240e9(0x1e1)](_0x26a968[_0x1240e9(0x234)]['id'],_0x1240e9(0x29e),{'reply_markup':{'inline_keyboard':[[{'text':_0x1240e9(0x21b),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x321c34=>{telegramError(_0x321c34);}),tgBot['on'](_0x1240e9(0x1ea),async _0x5c9582=>{const _0x29dce6=_0x1240e9,_0x326083=_0x5c9582[_0x29dce6(0x35b)],_0x5cd6f9=_0x5c9582[_0x29dce6(0x258)];tgBot[_0x29dce6(0x2a3)](_0x5c9582['id'])['then'](async()=>{const _0x1d6951=_0x29dce6;_0x326083==_0x1d6951(0x323)&&(await tgBot[_0x1d6951(0x1e1)](_0x5cd6f9[_0x1d6951(0x234)]['id'],_0x1d6951(0x26a))[_0x1d6951(0x2ac)](_0x27d51f=>{telegramError(_0x27d51f);}),updateBB(_0x1d6951(0x1fc))),_0x326083=='no'&&await tgBot[_0x1d6951(0x1e1)](_0x5cd6f9[_0x1d6951(0x234)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x1d6951(0x2ac)](_0xdb31f4=>{telegramError(_0xdb31f4);});}),tgBot[_0x29dce6(0x272)](_0x29dce6(0x1ea));}));}),tgBot[_0x1dff96(0x328)](/\/reinstall/,async _0x4e5133=>{const _0xba698d=_0x1dff96;if(!validateTelegram(_0x4e5133))return;tgBot['removeListener']('callback_query'),!validInstallation?tgBot['sendMessage'](_0x4e5133['chat']['id'],_0xba698d(0x28a))[_0xba698d(0x2ac)](_0xb00b33=>{telegramError(_0xb00b33);}):(tgBot[_0xba698d(0x1e1)](_0x4e5133[_0xba698d(0x234)]['id'],_0xba698d(0x2bd),{'reply_markup':{'inline_keyboard':[[{'text':_0xba698d(0x21b),'callback_data':_0xba698d(0x323)},{'text':'No','callback_data':'no'}]]}})[_0xba698d(0x2ac)](_0x434941=>{telegramError(_0x434941);}),tgBot['on'](_0xba698d(0x1ea),async _0x5c78a5=>{const _0x172058=_0xba698d,_0x3bf102=_0x5c78a5[_0x172058(0x35b)],_0x37b788=_0x5c78a5['message'];tgBot[_0x172058(0x2a3)](_0x5c78a5['id'])[_0x172058(0x247)](async()=>{const _0x3bcf38=_0x172058;_0x3bf102==_0x3bcf38(0x323)&&(await tgBot['sendMessage'](_0x37b788[_0x3bcf38(0x234)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x3bcf38(0x2ac)](_0x5d1c6e=>{telegramError(_0x5d1c6e);}),updateBB(_0x3bcf38(0x27b))),_0x3bf102=='no'&&await tgBot[_0x3bcf38(0x1e1)](_0x37b788['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')['catch'](_0x3c93f0=>{telegramError(_0x3c93f0);});}),tgBot[_0x172058(0x272)]('callback_query');}));}),tgBot[_0x1dff96(0x328)](/\/toggle/,_0x3a31eb=>{const _0x2c460d=_0x1dff96;if(!validateTelegram(_0x3a31eb))return;tgBot[_0x2c460d(0x272)]('callback_query');const _0x13d75a=getBotsWithMode();if(_0x13d75a[_0x2c460d(0x338)]==0x0)tgBot[_0x2c460d(0x1e1)](_0x3a31eb[_0x2c460d(0x234)]['id'],_0x2c460d(0x20a))[_0x2c460d(0x2ac)](_0x31c220=>{telegramError(_0x31c220);});else{let _0x3c3143=[],_0x1c9968=[];const _0x29f4ea=0x2;let _0x4269f3=0x0;_0x13d75a[_0x2c460d(0x330)]((_0x1c2a10,_0x9c7f34)=>{const _0x34b081=_0x2c460d;if(_0x9c7f34%_0x29f4ea==0x0)_0x1c9968=[];_0x1c9968[_0x34b081(0x2e7)]({'text':_0x34b081(0x24d)+_0x1c2a10[_0x34b081(0x2be)]+'\x20('+_0x1c2a10[_0x34b081(0x1eb)]+')','callback_data':_0x1c2a10[_0x34b081(0x2be)]}),_0x9c7f34%_0x29f4ea==0x0&&(_0x3c3143[_0x4269f3]=_0x1c9968,_0x4269f3++);}),tgBot['sendMessage'](_0x3a31eb['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x3c3143}})[_0x2c460d(0x2ac)](_0x31522=>{telegramError(_0x31522);}),tgBot['on'](_0x2c460d(0x1ea),async _0x13b0f9=>{const _0x572d68=_0x2c460d,_0x521403=_0x13b0f9[_0x572d68(0x35b)],_0x588e9d=_0x13b0f9[_0x572d68(0x258)];tgBot[_0x572d68(0x2a3)](_0x13b0f9['id'])[_0x572d68(0x247)](async()=>{const _0x40c135=_0x572d68,_0x2ca0ae=_0x13d75a[_0x40c135(0x1ad)](_0xd896cf=>_0xd896cf[_0x40c135(0x2be)]==_0x521403),_0x116879=_0x2ca0ae[_0x40c135(0x1eb)]==_0x40c135(0x20d)?'manual':'auto';tgBot[_0x40c135(0x1e1)](_0x588e9d[_0x40c135(0x234)]['id'],_0x40c135(0x2ce)+_0x521403+_0x40c135(0x1af)+_0x116879+_0x40c135(0x308))[_0x40c135(0x2ac)](_0x1014c9=>{telegramError(_0x1014c9);}),toggleBotMode(_0x521403);}),tgBot[_0x572d68(0x272)](_0x572d68(0x1ea));});}}),tgBot[_0x1dff96(0x328)](/\/names/,_0x32b26d=>{const _0x51190c=_0x1dff96;if(!validateTelegram(_0x32b26d))return;let _0x53d7ff='';config[_0x51190c(0x330)](_0x272e66=>{const _0x336719=_0x51190c;_0x53d7ff+=_0x336719(0x24d)+_0x272e66[_0x336719(0x2be)]+':\x20'+_0x272e66['botname']+'\x0a';}),tgBot[_0x51190c(0x1e1)](_0x32b26d[_0x51190c(0x234)]['id'],_0x53d7ff,{'parse_mode':'HTML'})[_0x51190c(0x2ac)](_0x580e96=>{telegramError(_0x580e96);});}),tgBot['onText'](/\/disable/,_0x2346c0=>{const _0x4bb293=_0x1dff96;if(!validateTelegram(_0x2346c0))return;tgBot[_0x4bb293(0x1e1)](_0x2346c0[_0x4bb293(0x234)]['id'],_0x4bb293(0x1b1))[_0x4bb293(0x2ac)](_0x4fe7dd=>{telegramError(_0x4fe7dd);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x1dff96(0x328)](/\/help/,_0x5ad90e=>{const _0x3462d4=_0x1dff96;if(!validateTelegram(_0x5ad90e))return;tgBot[_0x3462d4(0x1e1)](_0x5ad90e[_0x3462d4(0x234)]['id'],_0x17489b)[_0x3462d4(0x2ac)](_0x367fd3=>{telegramError(_0x367fd3);});}),tgBot['on'](_0x1dff96(0x1ef),_0x16bb31=>{const _0x22352f=_0x1dff96;_0x16bb31[_0x22352f(0x1a8)]()['includes']('404\x20Not\x20Found')&&(logger['full'](_0x22352f(0x235)),tgBot[_0x22352f(0x2d1)](),tgBot=null,io['to'](_0x22352f(0x32a))['emit'](_0x22352f(0x34c),'Invalid\x20Telegram\x20token'));}),process['once'](_0x1dff96(0x1a7),()=>{const _0x802d56=_0x1dff96;if(tgBot)tgBot[_0x802d56(0x2d1)]();process[_0x802d56(0x293)](0x1);}),process['once'](_0x1dff96(0x230),()=>{const _0x5c162a=_0x1dff96;if(tgBot)tgBot['stopPolling']();process[_0x5c162a(0x293)](0x1);});}}function disableTelegram(){const _0x4ec5e2=_0x491cda;tgBot&&(tgBot[_0x4ec5e2(0x2d1)](),tgBot=null);}function sendTelegram(_0x1a9f76,_0x9635ad){const _0x53419f=_0x491cda;if(settings['telegramEnabled']){if(settings[_0x53419f(0x1f7)]=='all'||(_0x9635ad[_0x53419f(0x324)]==_0x53419f(0x2e1)||_0x9635ad[_0x53419f(0x324)]=='warning'||_0x9635ad[_0x53419f(0x324)]==_0x53419f(0x1d8))&&settings['telegramEvents']==_0x53419f(0x29b)||_0x9635ad['type']==_0x53419f(0x1f9)&&settings[_0x53419f(0x1f7)]=='orders'){if(tgBot&&settings[_0x53419f(0x356)]){if(_0x9635ad['showname'])tgBot['sendMessage'](settings[_0x53419f(0x356)],_0x9635ad['botname']+_0x53419f(0x1f8)+_0x9635ad[_0x53419f(0x353)])[_0x53419f(0x2ac)](_0x17bb0=>{telegramError(_0x17bb0);});else tgBot[_0x53419f(0x1e1)](settings[_0x53419f(0x356)],'Bot\x20'+_0x1a9f76+'\x20>\x20'+_0x9635ad[_0x53419f(0x353)])[_0x53419f(0x2ac)](_0x3f2c7a=>{telegramError(_0x3f2c7a);});}}}}async function sendTelegramMsg(_0x26c00b,_0x5575c5=_0x491cda(0x2d8)){const _0x53946a=_0x491cda;return settings[_0x53946a(0x260)]&&tgBot&&settings[_0x53946a(0x356)]?(await tgBot[_0x53946a(0x1e1)](settings['telegramChatId'],_0x26c00b,{'parse_mode':_0x5575c5})['catch'](_0x2a9403=>{telegramError(_0x2a9403);}),!![]):![];}function getDeviceWithIp(_0x4c92b7){return devices['find'](_0x38e740=>_0x38e740['ip']===_0x4c92b7);}function temporaryAccess2FA(_0x2c3a78,_0x39e648){const _0x17d075=_0x491cda;let _0x3dfb19=new Date(),_0x3c9012=![];if(lastIpApproval){if(_0x3dfb19-lastIpApproval<0x1388)_0x3c9012=!![];}lastIpApproval=new Date();if(_0x3c9012)return;tgBot&&settings[_0x17d075(0x356)]&&(tgBot[_0x17d075(0x272)]('callback_query'),tgBot[_0x17d075(0x1e1)](settings['telegramChatId'],_0x17d075(0x1f3)+normalizeIP(_0x39e648)[_0x17d075(0x352)]+_0x17d075(0x326),{'parse_mode':_0x17d075(0x2d8),'reply_markup':{'inline_keyboard':[[{'text':_0x17d075(0x1e5),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x17d075(0x288),'callback_data':'30'},{'text':_0x17d075(0x22d),'callback_data':_0x17d075(0x22d)}]]}})[_0x17d075(0x2ac)](_0x1b6e20=>{telegramError(_0x1b6e20);}),tgBot['on']('callback_query',async _0x5630af=>{const _0x4bb3f7=_0x17d075,_0x53c4da=_0x5630af[_0x4bb3f7(0x35b)],_0xb150ea=_0x5630af[_0x4bb3f7(0x258)];tgBot['answerCallbackQuery'](_0x5630af['id'])[_0x4bb3f7(0x247)](async()=>{const _0x172aa0=_0x4bb3f7;devices[_0x2c3a78][_0x172aa0(0x23b)]={'clientip':_0x39e648,'timestamp':new Date()['getTime'](),'expiry':_0x53c4da},_0x53c4da!=_0x172aa0(0x22d)?(await tgBot[_0x172aa0(0x1e1)](_0xb150ea['chat']['id'],'Access\x20enabled\x20for\x20'+_0x53c4da+_0x172aa0(0x312),{'parse_mode':'HTML'})['catch'](_0x139de0=>{telegramError(_0x139de0);}),io['to'](_0x2c3a78)['emit'](_0x172aa0(0x2ee),{'access':{'allow':![],'reason':_0x172aa0(0x241),'token':null}})):(await tgBot[_0x172aa0(0x1e1)](_0xb150ea[_0x172aa0(0x234)]['id'],_0x172aa0(0x2c0))[_0x172aa0(0x2ac)](_0x5640fc=>{telegramError(_0x5640fc);}),io['to'](_0x2c3a78)[_0x172aa0(0x28b)](_0x172aa0(0x2ee),{'access':{'allow':![],'reason':_0x172aa0(0x2f6),'token':null}}));}),tgBot[_0x4bb3f7(0x272)](_0x4bb3f7(0x1ea));}));}function loginAccess2FA(_0x4459bb,_0x3c313c){const _0x7d385e=_0x491cda;tgBot&&settings[_0x7d385e(0x356)]&&(tgBot[_0x7d385e(0x272)](_0x7d385e(0x1ea)),tgBot[_0x7d385e(0x1e1)](settings['telegramChatId'],_0x7d385e(0x1c0)+normalizeIP(_0x3c313c)[_0x7d385e(0x352)]+_0x7d385e(0x326),{'parse_mode':_0x7d385e(0x2d8),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x7d385e(0x22d),'callback_data':_0x7d385e(0x22d)}]]}})[_0x7d385e(0x2ac)](_0x449e76=>{telegramError(_0x449e76);}),tgBot['on'](_0x7d385e(0x1ea),async _0x585e62=>{const _0x4aff49=_0x7d385e,_0x28464b=_0x585e62[_0x4aff49(0x35b)],_0x5459d5=_0x585e62[_0x4aff49(0x258)];tgBot[_0x4aff49(0x2a3)](_0x585e62['id'])[_0x4aff49(0x247)](async()=>{const _0x224d73=_0x4aff49;devices[_0x4459bb][_0x224d73(0x220)]={'clientip':_0x3c313c,'timestamp':new Date()[_0x224d73(0x30b)](),'expiry':_0x28464b},_0x28464b!=_0x224d73(0x22d)?(await tgBot['sendMessage'](_0x5459d5[_0x224d73(0x234)]['id'],_0x224d73(0x26c),{'parse_mode':_0x224d73(0x2d8)})['catch'](_0x31f58d=>{telegramError(_0x31f58d);}),io['to'](_0x4459bb)[_0x224d73(0x28b)](_0x224d73(0x2ee),{'access':{'allow':![],'reason':_0x224d73(0x241),'token':null}})):(await tgBot[_0x224d73(0x1e1)](_0x5459d5['chat']['id'],'Login\x20rejected')[_0x224d73(0x2ac)](_0x41d993=>{telegramError(_0x41d993);}),io['to'](_0x4459bb)[_0x224d73(0x28b)](_0x224d73(0x2ee),{'access':{'allow':![],'reason':_0x224d73(0x1ae),'token':null}}));}),tgBot[_0x4aff49(0x272)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x83c0a4=_0x491cda;return dbConfig[_0x83c0a4(0x27a)]('bots')[_0x83c0a4(0x31e)](_0x83c0a4(0x2be))[_0x83c0a4(0x200)]({'status':_0x83c0a4(0x204)})['value']()||[];}function getDisabledBots(){const _0x1328c1=_0x491cda;return dbConfig[_0x1328c1(0x27a)](_0x1328c1(0x1bf))[_0x1328c1(0x31e)](_0x1328c1(0x2be))[_0x1328c1(0x200)]({'status':'disabled'})[_0x1328c1(0x26b)]()||[];}function getBotAttributes(_0x41b8de){const _0x1762a7=_0x491cda;let _0x4b077a={};const _0x12f84c=configpath+'bot-'+_0x41b8de+_0x1762a7(0x2bf),_0x28d1c7=fs[_0x1762a7(0x2a9)](_0x12f84c);if(_0x28d1c7){const _0x5e4737=fs[_0x1762a7(0x2ca)](_0x12f84c);try{const _0x596a5a=JSON[_0x1762a7(0x354)](_0x5e4737),_0x3472a3=_0x596a5a?_0x596a5a['bot'][0x0]['headless']:![];_0x4b077a[_0x1762a7(0x1eb)]=_0x3472a3?_0x1762a7(0x20d):'manual',_0x4b077a[_0x1762a7(0x1f4)]=_0x596a5a?_0x596a5a[_0x1762a7(0x277)][0x0][_0x1762a7(0x1f4)]:_0x1762a7(0x24d)+_0x41b8de;}catch(_0x4bce02){_0x4b077a['mode']='manual',_0x4b077a[_0x1762a7(0x1f4)]=_0x1762a7(0x24d)+_0x41b8de;}}else _0x4b077a[_0x1762a7(0x1eb)]=_0x1762a7(0x28d),_0x4b077a[_0x1762a7(0x1f4)]=_0x1762a7(0x24d)+_0x41b8de;return _0x4b077a;}function getBotsWithMode(){const _0x1f115e=_0x491cda,_0x4bb8a9=dbConfig[_0x1f115e(0x27a)](_0x1f115e(0x1bf))[_0x1f115e(0x31e)](_0x1f115e(0x2be))['value']()||[];return _0x4bb8a9[_0x1f115e(0x330)](_0x2ae138=>{const _0x12459a=_0x1f115e;let _0x1c9482=getBotAttributes(_0x2ae138['botID']);_0x2ae138[_0x12459a(0x1eb)]=_0x1c9482[_0x12459a(0x1eb)];}),_0x4bb8a9;}function getBotExchanges(){const _0x39b9d8=_0x491cda;let _0x9035c0=[];const _0x1b48ab=dbConfig['get'](_0x39b9d8(0x1bf))[_0x39b9d8(0x31e)]('botID')[_0x39b9d8(0x26b)]()||[];_0x1b48ab[_0x39b9d8(0x330)](_0x29b9cb=>{const _0x2c155b=_0x39b9d8;if(_0x29b9cb[_0x2c155b(0x2ee)]=='enabled'){const _0x3f9d8a=configpath+_0x2c155b(0x1ed)+_0x29b9cb[_0x2c155b(0x2be)]+'-config.json',_0x402a43=fs[_0x2c155b(0x2a9)](_0x3f9d8a);let _0x59cd95;if(_0x402a43){const _0x13ec95=fs[_0x2c155b(0x2ca)](_0x3f9d8a);try{const _0x293404=JSON['parse'](_0x13ec95);_0x59cd95=_0x293404?_0x293404[_0x2c155b(0x277)][0x0][_0x2c155b(0x2de)]:null;}catch(_0x5a6613){}}if(_0x59cd95)_0x9035c0[_0x2c155b(0x2e7)](_0x59cd95);}});const _0x4ca643=[...new Set(_0x9035c0)][_0x39b9d8(0x1be)]();return _0x4ca643;}async function initUser(){const _0x5eadcb=_0x491cda;if(!settings[_0x5eadcb(0x304)]){const _0x27a692=uuidRandom();mixpanel[_0x5eadcb(0x25b)](_0x27a692),updateSetting(_0x5eadcb(0x304),_0x27a692);}}async function initSecure(){const _0x362dbb=_0x491cda;let _0x2cc5f1=getSecure();if(!_0x2cc5f1['hasOwnProperty'](_0x362dbb(0x253))){let _0x59eb7e=await generateKeys();_0x2cc5f1[_0x362dbb(0x24a)]=_0x59eb7e[_0x362dbb(0x24a)],_0x2cc5f1[_0x362dbb(0x337)]=_0x59eb7e[_0x362dbb(0x337)],_0x2cc5f1[_0x362dbb(0x253)]=crypto[_0x362dbb(0x283)](0x20)[_0x362dbb(0x1a8)](_0x362dbb(0x1d9));;storeSecure(_0x2cc5f1);}}function getSettings(){const _0x565908=_0x491cda;return dbSettings[_0x565908(0x27a)](_0x565908(0x1d6))['value']()||{};}function getSecure(){const _0x4a0a63=_0x491cda;return dbSecure['get'](_0x4a0a63(0x1dd))[_0x4a0a63(0x26b)]()||{};}function getBlacklist(){const _0x3b9c77=_0x491cda;return dbSecure['get']('blacklist')[_0x3b9c77(0x26b)]()||[];}function broadcastToBots(_0x270938,_0x5bc0bf){config['forEach'](_0x3501b0=>{const _0x55317e=_0x149a;if(_0x3501b0[_0x55317e(0x2ee)]==_0x55317e(0x204)&&_0x3501b0[_0x55317e(0x221)]==_0x55317e(0x22a)){if(pid[_0x3501b0[_0x55317e(0x2be)]])pid[_0x3501b0[_0x55317e(0x2be)]]['send']({[_0x270938]:_0x5bc0bf});}});}function storeSettings(_0x64bd99,_0x31b406=![]){const _0xabcf24=_0x491cda;_0x64bd99={...settings,..._0x64bd99};if(_0x31b406&&_0x64bd99[_0xabcf24(0x31f)]!=_0xabcf24(0x219)&&_0x64bd99[_0xabcf24(0x31f)]!='***'&&_0x64bd99[_0xabcf24(0x31f)]!=''){const _0x2e6704=crypt['decrypt'](secure[_0xabcf24(0x337)],_0x64bd99[_0xabcf24(0x31f)])[_0xabcf24(0x258)][_0xabcf24(0x205)]('@')[0x0],_0x610949=bcrypt[_0xabcf24(0x2f3)](_0x2e6704,saltRounds);_0x64bd99={..._0x64bd99,'bbPassword':_0x610949};}if(_0x31b406&&_0x64bd99[_0xabcf24(0x1db)]!='************'&&_0x64bd99[_0xabcf24(0x1db)]!=_0xabcf24(0x21a)&&_0x64bd99['telegramToken']!=''){const _0x103c24=crypt['decrypt'](secure[_0xabcf24(0x337)],_0x64bd99['telegramToken'])[_0xabcf24(0x258)][_0xabcf24(0x205)]('@')[0x0];_0x64bd99={..._0x64bd99,'telegramToken':_0x103c24};}const _0x265522=_0x64bd99['telegramToken']!=_0xabcf24(0x219)&&_0x64bd99[_0xabcf24(0x1db)]!=settings['telegramToken']||_0x64bd99[_0xabcf24(0x206)]!=settings[_0xabcf24(0x206)],_0x2dc0f3=_0x64bd99[_0xabcf24(0x1db)]==''||_0x64bd99[_0xabcf24(0x206)]=='';if(_0x265522)_0x64bd99[_0xabcf24(0x1f7)]=_0xabcf24(0x1ab);for(const [_0x593361,_0x4bca71]of Object[_0xabcf24(0x1f0)](_0x64bd99)){if(_0x593361==_0xabcf24(0x1db)&&_0x4bca71=='************'){_0x64bd99['telegramToken']=settings[_0xabcf24(0x1db)];continue;};if(_0x593361==_0xabcf24(0x31f)&&_0x4bca71==_0xabcf24(0x219)){_0x64bd99['bbPassword']=settings[_0xabcf24(0x31f)];continue;};dbSettings[_0xabcf24(0x2fd)](_0xabcf24(0x1cd)+_0x593361,_0x4bca71)[_0xabcf24(0x208)]();}settings=_0x64bd99,io['to']('botmanager')[_0xabcf24(0x28b)](_0xabcf24(0x1d6),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x265522&&!_0x2dc0f3)initTelegram();if(_0x265522&&_0x2dc0f3)disableTelegram();getAllClients()[_0xabcf24(0x330)](_0x4a6a74=>{const _0x2cebcf=_0xabcf24;getSocket(_0x4a6a74['id'])[_0x2cebcf(0x28b)](_0x2cebcf(0x2ee),{'access':{'allow':![],'reason':_0x2cebcf(0x241),'token':null}});});}function updateSetting(_0x3027ff,_0x3458d6){const _0x34b8cc=_0x491cda;dbSettings[_0x34b8cc(0x2fd)](_0x34b8cc(0x1cd)+_0x3027ff,_0x3458d6)[_0x34b8cc(0x208)](),settings=getSettings(),io['to'](_0x34b8cc(0x32a))[_0x34b8cc(0x28b)](_0x34b8cc(0x1d6),cleanSettings());}function storeSecure(_0x2f93cc){const _0x16b02c=_0x491cda;dbSecure[_0x16b02c(0x27a)](_0x16b02c(0x1dd))[_0x16b02c(0x2e7)](_0x2f93cc)[_0x16b02c(0x208)](),secure=_0x2f93cc;}function addBlacklist(_0x5424fb){const _0x5d32ef=_0x491cda;cleanBlacklist();let _0x2b0486;devices[_0x5424fb][_0x5d32ef(0x23b)]?_0x2b0486=Math[_0x5d32ef(0x305)](devices[_0x5424fb][_0x5d32ef(0x23b)][_0x5d32ef(0x2c3)],loginExpiry):_0x2b0486=loginExpiry,dbSecure[_0x5d32ef(0x27a)](_0x5d32ef(0x1b5))[_0x5d32ef(0x2e7)]({'expiry':new Date()[_0x5d32ef(0x30b)]()+_0x2b0486*0x3c*0x3e8,'token':devices[_0x5424fb][_0x5d32ef(0x345)]['token']})[_0x5d32ef(0x208)](),blacklist=dbSecure[_0x5d32ef(0x27a)]('blacklist')[_0x5d32ef(0x26b)]();}function cleanBlacklist(){const _0x598c29=_0x491cda;let _0x554bfe=dbSecure[_0x598c29(0x27a)](_0x598c29(0x1b5))[_0x598c29(0x1cc)]()[_0x598c29(0x26b)](),_0xf40a79=new Date()['getTime']();_0x554bfe[_0x598c29(0x330)](_0x3c2e46=>{const _0x301801=_0x598c29;_0x3c2e46['expiry']<_0xf40a79&&dbSecure[_0x301801(0x27a)](_0x301801(0x1b5))[_0x301801(0x229)]({'expiry':_0x3c2e46['expiry']})[_0x301801(0x208)]();});}function initStates(){const _0xb8fd57=_0x491cda;let _0x4525ef=getConfiguration();_0x4525ef[_0xb8fd57(0x330)](_0x3badd9=>{const _0x10a737=_0xb8fd57;_0x3badd9[_0x10a737(0x221)]=_0x10a737(0x1df);}),storeConfiguration(_0x4525ef);}function onKeys(){const _0x3eec86=new RSA();return new Promise(_0x46f130=>{const _0x19f5a1=_0x149a;_0x3eec86[_0x19f5a1(0x333)]()[_0x19f5a1(0x247)](_0x32fd98=>{_0x46f130(_0x32fd98);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x382c23=_0x491cda;let _0x3439b3=getSettings(),_0x412ac3=![];!_0x3439b3[_0x382c23(0x1d1)](_0x382c23(0x34f))&&(_0x3439b3[_0x382c23(0x34f)]=0x0,_0x412ac3=!![]);!_0x3439b3['hasOwnProperty'](_0x382c23(0x19e))&&(_0x3439b3[_0x382c23(0x19e)]=0x0,_0x412ac3=!![]);!_0x3439b3[_0x382c23(0x1d1)](_0x382c23(0x2b0))&&(_0x3439b3[_0x382c23(0x2b0)]=_0x382c23(0x334),_0x412ac3=!![]);if(_0x412ac3)storeSettings(_0x3439b3);}function storeConfiguration(_0x435807){const _0x478d1b=_0x491cda;dbConfig[_0x478d1b(0x27a)](_0x478d1b(0x1bf))['remove']()[_0x478d1b(0x208)](),_0x435807[_0x478d1b(0x330)](_0x51d832=>{delete _0x51d832['mode'];}),dbConfig[_0x478d1b(0x27a)](_0x478d1b(0x1bf))[_0x478d1b(0x2e7)](..._0x435807)[_0x478d1b(0x208)](),config=_0x435807;}function resetPassword(){const _0x49db52=_0x491cda;tgBot&&settings[_0x49db52(0x356)]&&(tgBot[_0x49db52(0x272)](_0x49db52(0x1ea)),tgBot['sendMessage'](settings[_0x49db52(0x356)],_0x49db52(0x295),{'parse_mode':_0x49db52(0x2d8),'reply_markup':{'inline_keyboard':[[{'text':_0x49db52(0x323),'callback_data':_0x49db52(0x323)},{'text':'no','callback_data':'no'}]]}})[_0x49db52(0x2ac)](_0x347cc2=>{telegramError(_0x347cc2);}),tgBot['on'](_0x49db52(0x1ea),async _0x619771=>{const _0x150072=_0x49db52,_0x537757=_0x619771[_0x150072(0x35b)],_0x52d1b7=_0x619771['message'];tgBot[_0x150072(0x2a3)](_0x619771['id'])[_0x150072(0x247)](async()=>{const _0x3a6707=_0x150072;if(_0x537757!='no'){const _0xd3bf5d=0xf,_0x569f85=_0x3a6707(0x28c),_0x4504c1=Array[_0x3a6707(0x296)](crypto[_0x3a6707(0x341)](new Uint32Array(_0xd3bf5d)))[_0x3a6707(0x1fa)](_0x1e5a95=>_0x569f85[_0x1e5a95%_0x569f85['length']])[_0x3a6707(0x239)](''),_0x356a35=bcrypt[_0x3a6707(0x2f3)](_0x4504c1,saltRounds);storeSettings({'bbPassword':_0x356a35}),await tgBot[_0x3a6707(0x1e1)](_0x52d1b7[_0x3a6707(0x234)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4504c1,{'parse_mode':_0x3a6707(0x2d8)})[_0x3a6707(0x2ac)](_0x2d3fdf=>{telegramError(_0x2d3fdf);});}else await tgBot[_0x3a6707(0x1e1)](_0x52d1b7[_0x3a6707(0x234)]['id'],'Password\x20reset\x20rejected')[_0x3a6707(0x2ac)](_0x1e9971=>{telegramError(_0x1e9971);});}),tgBot['removeListener'](_0x150072(0x1ea));}));}async function confirmRestore(_0x536f4b,_0x37b333){const _0x1fc42d=_0x491cda;io['to']('botmanager')['emit']('notification',_0x1fc42d(0x233),'success'),tgBot&&settings[_0x1fc42d(0x356)]&&(tgBot['removeListener'](_0x1fc42d(0x1ea)),await tgBot['sendMessage'](settings[_0x1fc42d(0x356)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1fc42d(0x323),'callback_data':_0x1fc42d(0x323)},{'text':'no','callback_data':'no'}]]}})[_0x1fc42d(0x2ac)](_0x949f7b=>{telegramError(_0x949f7b);}),tgBot['on'](_0x1fc42d(0x1ea),async _0x31ba3d=>{const _0xe3aa98=_0x1fc42d,_0xfd8ce5=_0x31ba3d[_0xe3aa98(0x35b)],_0x3e5b7e=_0x31ba3d[_0xe3aa98(0x258)];tgBot[_0xe3aa98(0x2a3)](_0x31ba3d['id'])[_0xe3aa98(0x247)](async()=>{const _0x53df0c=_0xe3aa98;_0xfd8ce5=='yes'?(await tgBot['sendMessage'](_0x3e5b7e[_0x53df0c(0x234)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x53df0c(0x2d8)})[_0x53df0c(0x2ac)](_0x1ad79c=>{telegramError(_0x1ad79c);}),unzipFile(_0x536f4b,_0x37b333)):(logger[_0x53df0c(0x1e0)](_0x53df0c(0x26f)),await tgBot[_0x53df0c(0x1e1)](_0x3e5b7e[_0x53df0c(0x234)]['id'],_0x53df0c(0x26f))[_0x53df0c(0x2ac)](_0x13ee8c=>{telegramError(_0x13ee8c);}));}),tgBot[_0xe3aa98(0x272)](_0xe3aa98(0x1ea));}));}function getServerTime(){const _0x4f9461=_0x491cda,_0x588ab3=new Date();return _0x588ab3[_0x4f9461(0x31d)]()+'/'+(_0x588ab3['getMonth']()+0x1)['toString']()[_0x4f9461(0x2c2)](0x2,'0')+'/'+_0x588ab3['getDate']()[_0x4f9461(0x1a8)]()[_0x4f9461(0x2c2)](0x2,'0')+'\x20'+_0x588ab3['getHours']()[_0x4f9461(0x1a8)]()['padStart'](0x2,'0')+':'+_0x588ab3[_0x4f9461(0x254)]()['toString']()[_0x4f9461(0x2c2)](0x2,'0')+':'+_0x588ab3[_0x4f9461(0x2bb)]()['toString']()[_0x4f9461(0x2c2)](0x2,'0');}function getTimeStamp(){const _0x5d9219=_0x491cda,_0x2c49c5=shiftedTime();return _0x2c49c5[_0x5d9219(0x31d)]()+'/'+(_0x2c49c5[_0x5d9219(0x2d6)]()+0x1)['toString']()[_0x5d9219(0x2c2)](0x2,'0')+'/'+_0x2c49c5[_0x5d9219(0x2aa)]()['toString']()[_0x5d9219(0x2c2)](0x2,'0')+'\x20'+_0x2c49c5['getHours']()['toString']()[_0x5d9219(0x2c2)](0x2,'0')+':'+_0x2c49c5['getMinutes']()[_0x5d9219(0x1a8)]()[_0x5d9219(0x2c2)](0x2,'0')+':'+_0x2c49c5[_0x5d9219(0x2bb)]()[_0x5d9219(0x1a8)]()[_0x5d9219(0x2c2)](0x2,'0');}function shiftedTime(){const _0x17dfe8=_0x491cda,_0x312afe=new Date();let _0x3c92b2=_0x312afe;if(settings[_0x17dfe8(0x2e0)]&&settings[_0x17dfe8(0x2e0)]!==0x0)_0x3c92b2=fns['add'](_0x312afe,{'hours':settings['timeshift']});return _0x3c92b2;}function startScheduler(){const _0x238b41=_0x491cda,_0x1070ef=new Date()[_0x238b41(0x299)](),_0x13b7fa=shiftedTime()[_0x238b41(0x1ba)]();_0x13b7fa==0x4&&backupConfigFiles();_0x13b7fa==0x0&&rotateLogFiles();_0x1070ef%0x6==0x0&&triggerAnalytics();_0x1070ef%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3dade6){const _0x455465=_0x491cda;logger[_0x455465(0x1e0)](_0x455465(0x2c7)+_0x3dade6);const _0xc3f7b3=getBotsWithMode();_0xc3f7b3[_0x455465(0x338)]>0x0?confirmRestore(configbackuppath,_0x3dade6):unzipFile(configbackuppath,_0x3dade6);}async function getBackupFiles(_0x429f93=null){const _0x23f18b=_0x491cda;let _0x6ed33f=[],_0x41975e=fs[_0x23f18b(0x25e)](configbackuppath,{'withFileTypes':!![]});_0x41975e[_0x23f18b(0x1be)]((_0x4e0ac5,_0xf44a8a)=>_0x4e0ac5['name']>_0xf44a8a[_0x23f18b(0x340)]?0x1:_0xf44a8a[_0x23f18b(0x340)]<_0x4e0ac5[_0x23f18b(0x340)]?-0x1:0x0),_0x41975e[_0x23f18b(0x330)](_0x5bb8ce=>{const _0x3784d8=_0x23f18b;if(!_0x5bb8ce[_0x3784d8(0x271)]()){const _0x4104a8=formatDate(fs[_0x3784d8(0x201)](configbackuppath+_0x5bb8ce['name'])[_0x3784d8(0x281)]);_0x6ed33f[_0x3784d8(0x2e7)]({'name':_0x5bb8ce['name'],'mtime':_0x4104a8});}});if(_0x429f93)io['to'](_0x429f93)[_0x23f18b(0x28b)](_0x23f18b(0x2f8),_0x6ed33f);else return _0x6ed33f;}async function backupConfigFiles(){const _0x303939=_0x491cda;await zipFiles(_0x303939(0x1fd));let _0x26efa8=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x26efa8[_0x303939(0x1be)]((_0x39140c,_0x63c7ed)=>_0x39140c[_0x303939(0x340)]<_0x63c7ed[_0x303939(0x340)]?0x1:_0x63c7ed[_0x303939(0x340)]<_0x39140c['name']?-0x1:0x0),_0x26efa8['forEach'](_0x4a153c=>{const _0x205d2b=_0x303939;if(_0x4a153c[_0x205d2b(0x340)]==_0x205d2b(0x1b2))fs[_0x205d2b(0x33a)](configbackuppath+_0x4a153c['name'],configbackuppath+_0x205d2b(0x284));if(_0x4a153c[_0x205d2b(0x340)]=='backup-full-004.zip')fs['copyFileSync'](configbackuppath+_0x4a153c[_0x205d2b(0x340)],configbackuppath+_0x205d2b(0x1b2));if(_0x4a153c[_0x205d2b(0x340)]==_0x205d2b(0x289))fs[_0x205d2b(0x33a)](configbackuppath+_0x4a153c[_0x205d2b(0x340)],configbackuppath+_0x205d2b(0x1c9));if(_0x4a153c[_0x205d2b(0x340)]==_0x205d2b(0x20f))fs[_0x205d2b(0x33a)](configbackuppath+_0x4a153c[_0x205d2b(0x340)],configbackuppath+_0x205d2b(0x289));if(_0x4a153c[_0x205d2b(0x340)]==_0x205d2b(0x29d))fs[_0x205d2b(0x33a)](configbackuppath+_0x4a153c[_0x205d2b(0x340)],configbackuppath+_0x205d2b(0x20f));if(_0x4a153c[_0x205d2b(0x340)]==_0x205d2b(0x2d9))fs[_0x205d2b(0x33a)](configbackuppath+_0x4a153c[_0x205d2b(0x340)],configbackuppath+_0x205d2b(0x29d));}),fs[_0x303939(0x33a)](zippath+'backup-full.zip',configbackuppath+_0x303939(0x2d9));}function rotateLogFiles(){const _0x1ef281=_0x491cda,_0x1fd457=fs[_0x1ef281(0x201)](logspath+'output-000.log'),_0x104e73=_0x1fd457[_0x1ef281(0x222)]/0x400;if(_0x104e73>0x32){let _0x3bc305=fs[_0x1ef281(0x25e)](logspath,{'withFileTypes':!![]});_0x3bc305[_0x1ef281(0x1be)]((_0x4bbf94,_0x3da5a6)=>_0x4bbf94[_0x1ef281(0x340)]<_0x3da5a6[_0x1ef281(0x340)]?0x1:_0x3da5a6['name']<_0x4bbf94[_0x1ef281(0x340)]?-0x1:0x0),_0x3bc305['forEach'](_0x5ad028=>{const _0x57e1ce=_0x1ef281;if(_0x5ad028[_0x57e1ce(0x340)]=='output-002.log')fs[_0x57e1ce(0x33a)](logspath+_0x5ad028[_0x57e1ce(0x340)],logspath+_0x57e1ce(0x26e));if(_0x5ad028[_0x57e1ce(0x340)]=='output-001.log')fs[_0x57e1ce(0x33a)](logspath+_0x5ad028[_0x57e1ce(0x340)],logspath+_0x57e1ce(0x275));_0x5ad028[_0x57e1ce(0x340)]==_0x57e1ce(0x2a4)&&(fs[_0x57e1ce(0x33a)](logspath+_0x5ad028[_0x57e1ce(0x340)],logspath+_0x57e1ce(0x2d3)),fs[_0x57e1ce(0x237)](logspath+_0x5ad028[_0x57e1ce(0x340)],''));});}}async function zipFiles(_0x275f02){const _0x2f7e9d=_0x491cda;let _0x4a5f68;if(_0x275f02==_0x2f7e9d(0x355))_0x4a5f68=logspath;if(_0x275f02=='backup')_0x4a5f68=configpath;if(_0x275f02==_0x2f7e9d(0x1fd))_0x4a5f68=configpath;let _0x5c2fd6=fs[_0x2f7e9d(0x25e)](_0x4a5f68,{'withFileTypes':!![]});const _0x47c88f=new require(_0x2f7e9d(0x2a7))();_0x5c2fd6[_0x2f7e9d(0x330)](_0x537620=>{const _0x597d88=_0x2f7e9d;if(!_0x537620[_0x597d88(0x271)]()){let _0x5d86c6=fs[_0x597d88(0x2ca)](_0x4a5f68+_0x537620[_0x597d88(0x340)]);if(_0x275f02==_0x597d88(0x2e5)){const _0x23b597=/^bot-[0-9]{3}-config.json$/,_0x3243a4=_0x23b597['test'](_0x537620[_0x597d88(0x340)]);if(_0x3243a4){const _0x1b1c53=JSON[_0x597d88(0x354)](_0x5d86c6);_0x1b1c53[_0x597d88(0x277)][0x0]&&(_0x1b1c53['bot'][0x0]['apiKey']=_0x597d88(0x21a),_0x1b1c53[_0x597d88(0x277)][0x0][_0x597d88(0x19c)]=_0x597d88(0x21a)),_0x5d86c6=JSON[_0x597d88(0x223)](_0x1b1c53,null,0x2);}if(_0x537620['name']==_0x597d88(0x2e9)){const _0x4207a6=JSON[_0x597d88(0x354)](_0x5d86c6);if(_0x4207a6[_0x597d88(0x1d6)][_0x597d88(0x1e8)])_0x4207a6[_0x597d88(0x1d6)]['loginRequired']=![];if(_0x4207a6[_0x597d88(0x1d6)]['bbPassword'])_0x4207a6[_0x597d88(0x1d6)][_0x597d88(0x31f)]='***';if(_0x4207a6[_0x597d88(0x1d6)][_0x597d88(0x1db)])_0x4207a6[_0x597d88(0x1d6)][_0x597d88(0x1db)]=_0x597d88(0x21a);if(_0x4207a6[_0x597d88(0x1d6)][_0x597d88(0x356)])_0x4207a6[_0x597d88(0x1d6)]['telegramChatId']=null;_0x5d86c6=JSON['stringify'](_0x4207a6,null,0x2);}if(_0x537620[_0x597d88(0x340)]!=_0x597d88(0x2d4))_0x47c88f[_0x597d88(0x21f)](_0x537620[_0x597d88(0x340)],_0x5d86c6);}else _0x47c88f[_0x597d88(0x21f)](_0x537620['name'],_0x5d86c6);}});const _0x4f1d62=_0x47c88f[_0x2f7e9d(0x2b2)]({'base64':![],'compression':_0x2f7e9d(0x207)});fs['writeFileSync'](zippath+(_0x275f02+_0x2f7e9d(0x329)),_0x4f1d62,'binary');}async function unzipFile(_0x45a0dc,_0x4b903d){const _0x14b76b=_0x491cda;fs[_0x14b76b(0x25e)](configpath,{'withFileTypes':!![]})['forEach'](_0x2d18a2=>{const _0x2c67f4=_0x14b76b;if(!_0x2d18a2[_0x2c67f4(0x271)]())fs[_0x2c67f4(0x2dc)](configpath+_0x2d18a2['name']);});const _0x441f78=fs[_0x14b76b(0x2ca)](_0x45a0dc+_0x4b903d,_0x14b76b(0x23e)),_0x141205=new require(_0x14b76b(0x2a7))(_0x441f78,{'base64':![],'checkCRC32':!![]});Object[_0x14b76b(0x310)](_0x141205[_0x14b76b(0x303)])[_0x14b76b(0x330)](_0x3ed1c6=>{const _0x21ac6b=_0x14b76b,_0x373438=_0x141205[_0x21ac6b(0x303)][_0x3ed1c6];fs[_0x21ac6b(0x237)](configpath+_0x373438['name'],_0x373438[_0x21ac6b(0x297)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x14b76b(0x330)](_0x25341e=>{const _0x5133aa=_0x14b76b;if(!_0x25341e['isDirectory']())fs[_0x5133aa(0x2dc)](temppath+_0x25341e['name']);}),logger[_0x14b76b(0x1e0)](_0x14b76b(0x1a0)),process['send']({'restore':!![]},_0x37726d=>{});}async function getPublicIp(){const _0x215b7c=_0x491cda;try{const _0x2e9d6d=await axios[_0x215b7c(0x27a)](_0x215b7c(0x358));publicip=_0x2e9d6d['data']['ip'];}catch(_0x1b0d7c){}}async function triggerAnalytics(){const _0x491e5b=_0x491cda;if(!publicip)await getPublicIp();const _0x24a0b3=getBotsWithMode();let _0x18357e=0x0;_0x24a0b3[_0x491e5b(0x330)](_0x41c284=>{const _0x130f4d=_0x491e5b;if(_0x41c284['status']===_0x130f4d(0x204))_0x18357e++;});const _0x5b79d9=getBotExchanges();mixpanel[_0x491e5b(0x266)](_0x491e5b(0x212),{'distinct_id':settings[_0x491e5b(0x304)],'ip':publicip,'version':serverversion,'numbots':_0x24a0b3['length'],'numbotsenabled':_0x18357e,'exchanges':_0x5b79d9});}async function getMessages(){const _0x5c9426=_0x491cda,_0x65163a=_0x5c9426(0x24f),_0x497049=new GraphQLClient(_0x65163a),_0x146db6={'authorization':_0x5c9426(0x21d)},_0x4c045a=serverversion[_0x5c9426(0x205)]('.'),_0x333923=_0x4c045a[0x0]+'.'+_0x4c045a[0x1],_0x4743f8=Math[_0x5c9426(0x269)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x27983e={'last':parseInt(_0x4743f8),'bbm':_0x333923},_0x455605=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x6d08ad;try{_0x6d08ad=await _0x497049[_0x5c9426(0x2a6)](_0x455605,_0x27983e,_0x146db6);}catch(_0x9be589){}if(_0x6d08ad&&_0x6d08ad[_0x5c9426(0x319)]){let _0x3f37cd=settings[_0x5c9426(0x34f)];newMessages=[];for(const _0x3a343d of _0x6d08ad[_0x5c9426(0x319)]){newMessages[_0x5c9426(0x2e7)](_0x3a343d);if(_0x3a343d[_0x5c9426(0x2f0)])updateSetting(_0x5c9426(0x2b0),_0x3a343d['bbvNew']);let _0x281404=_0x3a343d[_0x5c9426(0x2f0)]?serverversion>=_0x3a343d[_0x5c9426(0x2f0)]:![];if(!_0x281404&&_0x3a343d['number']>_0x3f37cd){if(_0x3a343d['bbvReceive']===_0x5c9426(0x25f)||serverversion['startsWith'](_0x3a343d['bbvReceive'])){let _0x2219ad=''+_0x3a343d[_0x5c9426(0x318)]+'\x0a\x0a'+_0x3a343d[_0x5c9426(0x258)];const _0x16a9ba=await sendTelegramMsg(toTelegramMarkdown(_0x2219ad),_0x5c9426(0x2a8));if(_0x16a9ba)_0x3f37cd=_0x3a343d[_0x5c9426(0x264)];}}}updateAvailable=isNewerVersion(settings[_0x5c9426(0x2b0)],serverversion),updateSetting(_0x5c9426(0x34f),_0x3f37cd),emitMessages();}}function emitMessages(){const _0x677919=_0x491cda,_0x42b9dd=settings[_0x677919(0x19e)];let _0x2278a3=[];newMessages[_0x677919(0x330)](_0x1a4e9e=>{const _0x3ee121=_0x677919;_0x1a4e9e[_0x3ee121(0x264)]>_0x42b9dd&&_0x2278a3[_0x3ee121(0x2e7)](_0x1a4e9e);}),_0x2278a3[_0x677919(0x338)]>0x0&&getAllClients()[_0x677919(0x330)](_0x192bcd=>{const _0x485bca=_0x677919;getSocket(_0x192bcd['id'])[_0x485bca(0x28b)](_0x485bca(0x258),_0x2278a3);});}function confirmMessage(_0x11e20e){const _0x58d4fe=_0x491cda;updateSetting(_0x58d4fe(0x19e),Number(_0x11e20e));}function isNewerVersion(_0x25bcce,_0x59c4bd){const _0x533136=_0x491cda,_0x25fa55=_0x59c4bd[_0x533136(0x205)]('.'),_0x352e02=_0x25bcce['split']('.');for(var _0x2071ff=0x0;_0x2071ff<_0x352e02[_0x533136(0x338)];_0x2071ff++){const _0x4d9f9b=~~_0x352e02[_0x2071ff],_0x295b2b=~~_0x25fa55[_0x2071ff];if(_0x4d9f9b>_0x295b2b)return!![];if(_0x4d9f9b<_0x295b2b)return![];}return![];}function toTelegramMarkdown(_0x3e15ca){const _0x4e156b=_0x491cda,_0x3dc5a6=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x180e2f=/\*{2}(.+?)\*{2}/gim;return _0x3e15ca=_0x3e15ca['replace'](_0x3dc5a6,'$1_$2_$3')[_0x4e156b(0x27e)](_0x180e2f,'*$1*'),_0x3e15ca;}async function validateConfigFile(){const _0x1b7400=_0x491cda,_0x597199=dbConfig['get'](_0x1b7400(0x1bf))[_0x1b7400(0x31e)](_0x1b7400(0x2be))['value']()||[];if(_0x597199['length']==0x0){let _0x2bebe8=0x0,_0x6aef4f=[];const _0x33e032=/^bot-([0-9]{3})-config.json$/,_0x74bfaa=fs[_0x1b7400(0x25e)](configpath);_0x74bfaa[_0x1b7400(0x330)](_0x45e256=>{const _0x3f2e00=_0x1b7400,_0x3e39af=_0x33e032['exec'](_0x45e256);if(_0x3e39af){const _0x30c03a=_0x3e39af[0x1];let _0x56e18b=getBotAttributes(_0x30c03a);_0x6aef4f[_0x3f2e00(0x2e7)]({'botID':_0x30c03a,'botname':_0x56e18b[_0x3f2e00(0x1f4)],'status':_0x3f2e00(0x19b),'live':'stopped'}),_0x2bebe8++;}}),_0x2bebe8!=0x0&&(dbConfig[_0x1b7400(0x27a)](_0x1b7400(0x1bf))['assign'](_0x6aef4f)[_0x1b7400(0x208)](),config=_0x6aef4f,restoredConfigFile=_0x2bebe8);}}async function restoreConfigNotify(_0x511895){const _0x5a7070=_0x491cda;let _0x3f5fae;if(restoredConfigFile==0x1)_0x3f5fae=_0x5a7070(0x1a6);else _0x3f5fae='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x511895)io['to']('botmanager')['emit'](_0x5a7070(0x34c),_0x3f5fae);else{logger[_0x5a7070(0x2b4)](_0x5a7070(0x2ff)),logger[_0x5a7070(0x2b4)](_0x3f5fae),logger[_0x5a7070(0x2b4)](_0x5a7070(0x2ff)),logger[_0x5a7070(0x2b4)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!='orders')tgBot[_0x5a7070(0x1e1)](settings['telegramChatId'],_0x5a7070(0x30e)+_0x3f5fae)[_0x5a7070(0x2ac)](_0x5a0268=>{telegramError(_0x5a0268);});}}function validateCredentials(_0x4abed6,_0x465a55){const _0x80d58c=_0x491cda;if(_0x4abed6[_0x80d58c(0x236)]==settings['bbUsername']&&bcrypt[_0x80d58c(0x1bc)](_0x4abed6['password'],settings[_0x80d58c(0x31f)])){if(settings[_0x80d58c(0x1f6)])return{'allow':![],'reason':_0x80d58c(0x1c7),'token':null};else{const _0x307093=generateLoginToken(_0x465a55);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x307093};}}else return{'allow':![],'reason':_0x80d58c(0x302),'token':null};}function refreshToken(_0x454390){const _0x3e206b=generateLoginToken(_0x454390);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3e206b};}function validateAccess(_0x1439db,_0x2dae67,_0x5372b9){const _0x46173a=_0x491cda,_0x15b09f=_0x5372b9?_0x5372b9:devices[_0x2dae67]['ip'];let _0x5e7d69;const _0x3704b9=_0xe62ec0=>{const _0x14a133=_0x149a;if(settings[_0x14a133(0x1e8)]){if(settings[_0x14a133(0x1f6)]){if(telegram2FaApproved(_0x2dae67)){const _0x501651=generateLoginToken(_0x2dae67);return{'allow':!![],'reason':_0x14a133(0x1a2),'token':_0x501651};}else return{'allow':![],'reason':_0x14a133(0x2e2),'token':null};}else return _0x5e7d69=validToken(_0xe62ec0,_0x2dae67),_0x5e7d69[_0x14a133(0x1d1)](_0x14a133(0x1d8))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0xe62ec0}:{'allow':![],'reason':_0x14a133(0x2e2),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x46173a(0x1a1)]){let _0x37dd61=[...settings[_0x46173a(0x1ca)],_0x46173a(0x2cd),'::ffff:127.0.0.1',_0x46173a(0x2bc)];if(_0x37dd61[_0x46173a(0x2a1)](_0x15b09f))return _0x3704b9(_0x1439db);else{_0x5e7d69=validToken(_0x1439db,_0x2dae67);if(_0x5e7d69[_0x46173a(0x1d1)](_0x46173a(0x1d8)))return _0x3704b9(_0x1439db);else{if(telegramIpApproved(_0x2dae67)){const _0x55b568=generateToken(_0x2dae67);return _0x5e7d69=_0x3704b9(_0x1439db),_0x5e7d69[_0x46173a(0x287)]?{'allow':!![],'reason':_0x46173a(0x265),'token':_0x55b568}:_0x5e7d69;}else return settings[_0x46173a(0x350)]?{'allow':![],'reason':_0x46173a(0x35f),'token':null}:{'allow':![],'reason':_0x46173a(0x30c),'token':null};}}}else return _0x3704b9(_0x1439db);}function timelyDecrypt(_0x3626fd,_0x451fed=!![]){const _0x46d67e=_0x491cda;if(_0x3626fd)try{const _0x11bd6a=crypt[_0x46d67e(0x335)](secure['privateKey'],_0x3626fd)[_0x46d67e(0x258)],_0x364570=_0x11bd6a[_0x46d67e(0x205)]('@')[0x0],_0x27279d=_0x11bd6a[_0x46d67e(0x205)]('@')[0x1],_0xafadfe=new Date()['getTime']();if(_0x451fed){if(_0xafadfe-_0x27279d<maxSecretAge*0x3e8)return _0x364570;else return![];}else return _0x364570;}catch(_0x20ee91){return![];}else return![];}const validToken=(_0x5a7a41,_0x10d432)=>{const _0x5325ce=_0x491cda,_0x5c3f27=devices[_0x10d432]['ip'];if(!_0x5a7a41)return{'error':_0x5325ce(0x292)};for(let _0x565012 of blacklist){if(_0x565012[_0x5325ce(0x1e3)]==_0x5a7a41)return{'error':_0x5325ce(0x1c6)};}let _0x2fe35a;try{_0x2fe35a=jwt[_0x5325ce(0x2da)](_0x5a7a41,secure[_0x5325ce(0x253)]+_0x10d432);}catch{return{'error':_0x5325ce(0x33b)};}if(!_0x2fe35a['hasOwnProperty'](_0x5325ce(0x2cf))&&!_0x2fe35a[_0x5325ce(0x1d1)](_0x5325ce(0x236))||!_0x2fe35a[_0x5325ce(0x1d1)]('exp'))return{'error':_0x5325ce(0x2c9)};if(!_0x2fe35a['hasOwnProperty'](_0x5325ce(0x236))&&_0x2fe35a[_0x5325ce(0x1d1)](_0x5325ce(0x2cf))){const {clientip:_0x25bb72}=_0x2fe35a;return _0x5c3f27==_0x25bb72?{'success':_0x5325ce(0x19f)}:{'error':_0x5325ce(0x2f5)};}else{if(_0x2fe35a['hasOwnProperty']('username')&&_0x2fe35a[_0x5325ce(0x1d1)](_0x5325ce(0x2cf))){const {username:_0x49784e,clientip:_0x2e5f45}=_0x2fe35a;return settings[_0x5325ce(0x252)]==_0x49784e&&_0x5c3f27==_0x2e5f45?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x5325ce(0x34a)};}}},generateLoginToken=_0x30f454=>{const _0x20332c=_0x491cda;if(_0x30f454){const _0x4c9f06=devices[_0x30f454]['ip'];return jwt[_0x20332c(0x2a5)]({'username':settings[_0x20332c(0x252)],'clientip':_0x4c9f06},secure[_0x20332c(0x253)]+_0x30f454,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3654b4=>{const _0x5be741=_0x491cda;if(_0x3654b4){const _0x53f5e7=devices[_0x3654b4]['ip'];return jwt['sign']({'clientip':_0x53f5e7},secure[_0x5be741(0x253)]+_0x3654b4,{'expiresIn':devices[_0x3654b4]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x28f261=>{const _0x3ab462=_0x491cda;let _0x3c7bac=![];return devices[_0x28f261][_0x3ab462(0x23b)]&&devices[_0x28f261][_0x3ab462(0x23b)][_0x3ab462(0x2c3)]!='reject'&&(_0x3c7bac=devices[_0x28f261][_0x3ab462(0x23b)][_0x3ab462(0x2cf)]==devices[_0x28f261]['ip']&&new Date()[_0x3ab462(0x30b)]()-devices[_0x28f261][_0x3ab462(0x23b)][_0x3ab462(0x1e7)]<devices[_0x28f261][_0x3ab462(0x23b)][_0x3ab462(0x2c3)]*0x3c*0x3e8),_0x3c7bac;},telegram2FaApproved=_0x376dde=>{const _0x159799=_0x491cda;let _0xc15e68=![];return devices[_0x376dde][_0x159799(0x220)]&&devices[_0x376dde][_0x159799(0x220)][_0x159799(0x2c3)]!='reject'&&(_0xc15e68=devices[_0x376dde][_0x159799(0x220)]['clientip']==devices[_0x376dde]['ip']&&new Date()[_0x159799(0x30b)]()-devices[_0x376dde][_0x159799(0x220)][_0x159799(0x1e7)]<devices[_0x376dde][_0x159799(0x220)][_0x159799(0x2c3)]*0x3c*0x3e8),_0xc15e68;},normalizeIP=_0x1852b0=>{const _0xb4e9a4=_0x491cda;let _0x182752=null,_0x24b36b=null;if(ipaddr['isValid'](_0x1852b0)){const _0x3e226d=ipaddr[_0xb4e9a4(0x354)](_0x1852b0);_0x3e226d[_0xb4e9a4(0x31c)]()===_0xb4e9a4(0x280)?(_0x3e226d[_0xb4e9a4(0x1ee)]()&&(_0x182752=_0x3e226d[_0xb4e9a4(0x349)]()[_0xb4e9a4(0x1a8)]()),_0x24b36b=_0x3e226d[_0xb4e9a4(0x1a8)]()):(_0x182752=_0x3e226d[_0xb4e9a4(0x1a8)](),_0x24b36b=_0x3e226d[_0xb4e9a4(0x34d)]()[_0xb4e9a4(0x1a8)]());}return{'show':_0x182752?_0x182752:_0x24b36b,'store':_0x24b36b};};function formatDate(_0x3f1548){const _0x452639=_0x491cda;return _0x3f1548[_0x452639(0x31d)]()+'/'+(_0x3f1548[_0x452639(0x2d6)]()+0x1)[_0x452639(0x1a8)]()[_0x452639(0x2c2)](0x2,'0')+'/'+_0x3f1548[_0x452639(0x2aa)]()['toString']()[_0x452639(0x2c2)](0x2,'0')+'\x20'+_0x3f1548[_0x452639(0x1ba)]()['toString']()[_0x452639(0x2c2)](0x2,'0')+':'+_0x3f1548[_0x452639(0x254)]()['toString']()[_0x452639(0x2c2)](0x2,'0')+':'+_0x3f1548['getSeconds']()['toString']()[_0x452639(0x2c2)](0x2,'0');}function sleep(_0x1881be){return new Promise(_0x44df88=>setTimeout(_0x44df88,_0x1881be));}