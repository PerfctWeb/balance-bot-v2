const _0x52d4ed=_0x4140;(function(_0x10210b,_0x60b462){const _0x3a6abf=_0x4140,_0x4cd216=_0x10210b();while(!![]){try{const _0x307e9e=parseInt(_0x3a6abf(0x15b))/0x1*(parseInt(_0x3a6abf(0x15c))/0x2)+-parseInt(_0x3a6abf(0x23e))/0x3+-parseInt(_0x3a6abf(0x198))/0x4*(-parseInt(_0x3a6abf(0x224))/0x5)+parseInt(_0x3a6abf(0x19e))/0x6+parseInt(_0x3a6abf(0x1f1))/0x7*(parseInt(_0x3a6abf(0x253))/0x8)+-parseInt(_0x3a6abf(0x20c))/0x9*(-parseInt(_0x3a6abf(0x1eb))/0xa)+-parseInt(_0x3a6abf(0x1e6))/0xb*(parseInt(_0x3a6abf(0x16a))/0xc);if(_0x307e9e===_0x60b462)break;else _0x4cd216['push'](_0x4cd216['shift']());}catch(_0x1027ec){_0x4cd216['push'](_0x4cd216['shift']());}}}(_0x31be,0x92a96));const _0x3140b0=function(){let _0x1d47da=!![];return function(_0x518001,_0x5e7db7){const _0x6f6e6f=_0x1d47da?function(){const _0x54316f=_0x4140;if(_0x5e7db7){const _0x34e519=_0x5e7db7[_0x54316f(0x218)](_0x518001,arguments);return _0x5e7db7=null,_0x34e519;}}:function(){};return _0x1d47da=![],_0x6f6e6f;};}(),_0x537a09=_0x3140b0(this,function(){const _0x5b6e53=_0x4140;return _0x537a09['toString']()[_0x5b6e53(0x23b)](_0x5b6e53(0x11f))[_0x5b6e53(0x158)]()['constructor'](_0x537a09)[_0x5b6e53(0x23b)](_0x5b6e53(0x11f));});_0x537a09();'use strict';process[_0x52d4ed(0x15f)][_0x52d4ed(0x1af)]=0x1;const childProcess=require('child_process'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x52d4ed(0x241)),low=require(_0x52d4ed(0x115)),path=require('path'),crypto=require(_0x52d4ed(0x163)),Crypt=require(_0x52d4ed(0x1bb))[_0x52d4ed(0x13b)],RSA=require(_0x52d4ed(0x1bb))[_0x52d4ed(0x150)],bcrypt=require(_0x52d4ed(0x1f0)),jwt=require(_0x52d4ed(0x13e)),analyticsLib=require('analytics')['default'],googleAnalytics=require(_0x52d4ed(0x173))['default'],ipaddr=require(_0x52d4ed(0x19d)),argv=require(_0x52d4ed(0x146))(process[_0x52d4ed(0x25e)][_0x52d4ed(0x179)](0x2))[_0x52d4ed(0x25e)],PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x52d4ed(0x13d)](_0x52d4ed(0x185)+PORT+_0x52d4ed(0x134)),process[_0x52d4ed(0x1d7)](0x1);const HOST=argv[_0x52d4ed(0x259)]||null,userID=argv[_0x52d4ed(0x217)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x52d4ed(0x12a),configfile=_0x52d4ed(0x1df),settingsfile=_0x52d4ed(0x11a),securefile=_0x52d4ed(0x23d),validInstallation=fs[_0x52d4ed(0x152)](_0x52d4ed(0x1dd));!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x52d4ed(0x1fd)+userID+'/':bbpath+_0x52d4ed(0x1fd),configbackuppath=configpath+_0x52d4ed(0x195);!fs['existsSync'](configpath)&&fs[_0x52d4ed(0x168)](configpath);!fs[_0x52d4ed(0x152)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x52d4ed(0x1b1)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x52d4ed(0x182)]({'settings':{'timeshift':0x0}})[_0x52d4ed(0x1b1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x52d4ed(0x182)]({'secure':{},'blacklist':[]})[_0x52d4ed(0x1b1)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x52d4ed(0x1b6)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x52d4ed(0x171))[_0x52d4ed(0x216)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();function _0x31be(){const _0x10a013=['server','temporary\x20access\x20timeout','(((.+)+)+)+$','getUTCHours','botname','hashSync','push','All\x20bots','timestamp','Unauthorized\x20attempt\x20to\x20update\x20settings','callback_query','kill','referer','bot.js','http','started','removeListener','2FA\x20login\x20rejected','sortBy','socket.io','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','temporary\x20token\x20generated','bbUsername',',\x20must\x20be\x20a\x204\x20digit\x20number','reset-password','bot','apiKey','store','emit','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Crypt','::ffff:127.0.0.1','log','jsonwebtoken','blacklist','temporaryAccessAllowed','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/on\x20-\x20start\x20bot(s)\x0a','/:bot/performance','No\x20bots\x20running\x20right\x20now','</b>\x20?','yargs/yargs','connection','copyFileSync','hasOwnProperty','encryptedUuid','temporary\x20access\x20rejected','generateKeyPairAsync','telegramEvents','\x20only\x0a','forEach','RSA','2FA\x20login\x20required','existsSync','store-settings','createServer','add','onText','botID','toString','login\x20not\x20required','error','128379aTYtrY','6rFYgAJ','2FA\x20login\x20token\x20generated','getFullYear','env','bots','toIPv4Address','botmanager','crypto','build2','settings.','disabled','************','mkdirSync','function','12QZqhwu','getDate','bot-','storeHeadless','secret','auth','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','version.json','SIGTERM','@analytics/google-analytics','Unauthorized\x20attempt\x20to\x20log\x20out','then','hex','filter','cloneDeep','slice','logout','telegramIpApproval','ipv6','kind','getPortfolio','use','stopPolling','disconnect','defaults','new','compareSync','Error:\x20Invalid\x20argument\x20','getHours','chat','ipc','running','token','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','type','access','Unauthorized\x20attempt\x20to\x20get\x20logs','update-bb','password','reload','sign','backup/','new-disabled','starting\x20new\x20bot\x20|\x20Bot\x20','48yjcbiD','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','from','build','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','ipaddr.js','6874626CfRdvi','idling\x20bot\x20\x20\x20|\x20Bot\x20','restarting\x20Bot\x20','\x20>\x20','404\x20Not\x20Found','Password\x20reset\x20rejected','Token\x20blacklisted','event','Unauthorized\x20attempt\x20to\x20get\x20portfolio','stop','1000','static','Unauthorized\x20attempt\x20to\x20delete\x20bot','live','getStartingBalances','cancelLoading','getMonth','NTBA_FIX_319','alerts','write','Invalid\x20authentication\x20token\x20(2)','getMinutes','privateKey','max','RSA-OAEP','/help\x20-\x20show\x20available\x20commands\x0a','assign','find','\x20|\x20','hybrid-crypto-js','reject','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','conn','map','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Bot\x20','isValid','padStart','status','deleted\x20Bot\x20','express','pidRefreshToken','Unauthorized\x20attempt\x20to\x20store\x20configuration','data','getTime','readdirSync','entries','value','remove','Notifications\x20enabled','listen','toIPv4MappedAddress','invalid\x20credentials','sendMessage',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','error\x20while\x20deleting\x20config\x20files:\x20','getSeconds','exit','5\x20min','-events.json','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','sockets','decrypt','../install.js','logged\x20out','bb-config.json','loginRequired','telegramUsername','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','disabled\x20Bot\x20','order','index.html','25701830NxCvqs','clientip','inherit','success','login\x20token\x20valid','40UqCORq','catch','username','-config.json','Notifications\x20disabled\x0a','bcryptjs','7yrCdTi','f2aRequired','length','Password\x20has\x20been\x20reset\x20to:\x20','whitelistEnabled','telegram2FaApproval','starting\x20bot\x20|\x20Bot\x20','Login\x20accepted','message','send','get-starting-balances','isDirectory','config/','\x20minutes','match','includes','answerCallbackQuery','all','yes','enabled','HTML','Unauthorized\x20login\x20attempt\x20(timeout)','login\x20required','split','restart','timeshift','Temporary\x20access\x20rejected','2455686kexLak','settings','once','Unauthorized\x20attempt\x20to\x20add\x20bot','/disable\x20-\x20disable\x20notifications\x0a','sendFile','You\x20can\x20use\x20the\x20following\x20commands:\x0a','notification','telegramChatId','connected','version','user','apply','/status\x20-\x20show\x20bot(s)\x20status\x0a','Notifications\x20types:\x20','login','orders','args','Invalid\x20authentication\x20token\x20(1)','2FA\x20required','/off\x20-\x20stop\x20bot(s)\x0a','verify','reason','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','487445nOASLT','-----------------------------------------------------------------------------------','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','stopped','allow','telegramToken','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','isIPv4MappedAddress','/:bot/history','initclient','/:bot/portfolio','<b>Telegram\x20bot\x20status:</b>\x0a','place-order','telegramEnabled','remoteAddress','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','handshake','keys','randomBytes','Ok,\x20will\x20send\x20alert\x20notifications\x20only','add-bot','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','search','whitelist','bb-secure.json','2578146iRjmZy','secure','expiry','date-fns','publicKey','fork','\x20/\x20','showname','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','name','pidExpireLogin','/:bot/configuration','<b>Balance\x20Bot\x20status:</b>\x0a','cancel-loading','User\x20has\x20been\x20validated','login\x20token\x20generated','bbPassword','get-logs','2FA','placeOrder','127.0.0.1','35568RFWIHH','/:bot/support','get-portfolio','SIGINT','join','Balance\x20Bot','host','store-configuration','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','30\x20min','Invalid\x20Telegram\x20token','argv','node-telegram-bot-api','randomFillSync','lowdb','headers','unlinkSync','show','get','bb-settings.json','enabled\x20Bot\x20','uuid'];_0x31be=function(){return _0x10a013;};return _0x31be();}const express=require(_0x52d4ed(0x1c6)),app=express(),http=require(_0x52d4ed(0x12b))[_0x52d4ed(0x154)](app);app[_0x52d4ed(0x17f)](express[_0x52d4ed(0x1a9)](path[_0x52d4ed(0x257)](__dirname,bbpath2,_0x52d4ed(0x164)))),app[_0x52d4ed(0x17f)](express[_0x52d4ed(0x1a9)](path[_0x52d4ed(0x257)](__dirname,bbpath2,_0x52d4ed(0x19b)))),app[_0x52d4ed(0x119)]('/',function(_0x18a4c3,_0x30e2a9){const _0x2935ba=_0x52d4ed;_0x30e2a9[_0x2935ba(0x211)](path[_0x2935ba(0x257)](__dirname,bbpath2,_0x2935ba(0x164),_0x2935ba(0x1e5)));}),app[_0x52d4ed(0x119)]('/:bot',function(_0x488eff,_0x2c7fef){const _0x519062=_0x52d4ed;_0x2c7fef['sendFile'](path[_0x519062(0x257)](__dirname,bbpath2,_0x519062(0x19b),_0x519062(0x1e5)));}),app[_0x52d4ed(0x119)](_0x52d4ed(0x22f),(_0x12c4c7,_0x406875)=>{const _0x51a319=_0x52d4ed;_0x406875[_0x51a319(0x211)](path[_0x51a319(0x257)](__dirname,bbpath2,_0x51a319(0x19b),_0x51a319(0x1e5)));}),app[_0x52d4ed(0x119)](_0x52d4ed(0x143),(_0x58204b,_0x360da0)=>{const _0x5994d4=_0x52d4ed;_0x360da0[_0x5994d4(0x211)](path[_0x5994d4(0x257)](__dirname,bbpath2,_0x5994d4(0x19b),_0x5994d4(0x1e5)));}),app['get']('/:bot/coins',(_0x3771bf,_0x4a79fc)=>{const _0x6db47d=_0x52d4ed;_0x4a79fc[_0x6db47d(0x211)](path[_0x6db47d(0x257)](__dirname,bbpath2,_0x6db47d(0x19b),_0x6db47d(0x1e5)));}),app['get'](_0x52d4ed(0x22d),(_0x4298ef,_0x46a948)=>{const _0x44924b=_0x52d4ed;_0x46a948[_0x44924b(0x211)](path[_0x44924b(0x257)](__dirname,bbpath2,_0x44924b(0x19b),'index.html'));}),app['get'](_0x52d4ed(0x249),(_0x15f2a0,_0x4ea16d)=>{const _0x1ffdef=_0x52d4ed;_0x4ea16d[_0x1ffdef(0x211)](path['join'](__dirname,bbpath2,_0x1ffdef(0x19b),_0x1ffdef(0x1e5)));}),app[_0x52d4ed(0x119)](_0x52d4ed(0x254),(_0x14d3fb,_0x3324b5)=>{const _0x11064e=_0x52d4ed;_0x3324b5['sendFile'](path[_0x11064e(0x257)](__dirname,bbpath2,'build',_0x11064e(0x1e5)));});if(HOST)http[_0x52d4ed(0x1d0)](PORT,HOST);else http[_0x52d4ed(0x1d0)](PORT);const io=require(_0x52d4ed(0x130))(http,{}),analytics=analyticsLib({'app':_0x52d4ed(0x258),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x52d4ed(0x25f));let tgBot;if(settings['telegramToken']&&settings[_0x52d4ed(0x22a)]!=''&&settings[_0x52d4ed(0x1e1)]&&settings[_0x52d4ed(0x1e1)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x1a2cf0=_0x52d4ed;console[_0x1a2cf0(0x13d)](''),console['log'](_0x1a2cf0(0x225)),logging(_0x1a2cf0(0x226)+PORT),console[_0x1a2cf0(0x13d)](_0x1a2cf0(0x225));if(config[_0x1a2cf0(0x1f3)]!=0x0)config['forEach'](_0x34e915=>{const _0xa6c944=_0x1a2cf0;if(_0x34e915['status']==_0xa6c944(0x204)||_0x34e915[_0xa6c944(0x1c4)]==_0xa6c944(0x183))logging(_0xa6c944(0x1f7)+_0x34e915[_0xa6c944(0x157)]+_0xa6c944(0x1ba)+_0x34e915[_0xa6c944(0x121)]),startBot([_0x34e915[_0xa6c944(0x157)],userID],{'cwd':bbpath},function(_0xb300a4){if(_0xb300a4)logging(_0xb300a4);});else(_0x34e915[_0xa6c944(0x1c4)]==_0xa6c944(0x166)||_0x34e915['status']==_0xa6c944(0x196))&&logging(_0xa6c944(0x19f)+_0x34e915[_0xa6c944(0x157)]+_0xa6c944(0x1ba)+_0x34e915[_0xa6c944(0x121)]);});else!newBot&&console[_0x1a2cf0(0x13d)](_0x1a2cf0(0x141));if(newBot)addBot();console[_0x1a2cf0(0x13d)](_0x1a2cf0(0x225)),console[_0x1a2cf0(0x13d)]('');}function startSocket(){const _0x4ad7f5=_0x52d4ed;io['on'](_0x4ad7f5(0x147),_0x4c9cdf=>{const _0x2e57d1=_0x4ad7f5;let _0x586299,_0x19622f,_0x500914,_0x1fb9f0,_0x3711ee;const _0x1113da=_0x4c9cdf[_0x2e57d1(0x235)][_0x2e57d1(0x116)][_0x2e57d1(0x129)];_0x19622f=_0x1113da[_0x2e57d1(0x1ff)](/bot[0-9]{3}/);if(_0x19622f)_0x500914=_0x19622f[0x0]['match'](/[0-9]{3}/);if(_0x500914)_0x586299=_0x500914[0x0];else _0x586299=_0x2e57d1(0x162);const _0x58466d=_0x4c9cdf[_0x2e57d1(0x235)][_0x2e57d1(0x16f)][_0x2e57d1(0x14a)];if(!_0x58466d)_0x4c9cdf[_0x2e57d1(0x139)]('status',{'publicKey':secure['publicKey']});else{_0x1fb9f0=timelyDecrypt(_0x58466d,![]);if(!_0x1fb9f0)_0x4c9cdf[_0x2e57d1(0x139)]('status',{'publicKey':secure['publicKey']});else{_0x3711ee=normalizeIP(_0x4c9cdf[_0x2e57d1(0x1be)][_0x2e57d1(0x233)])[_0x2e57d1(0x138)];if(!devices[_0x1fb9f0])devices[_0x1fb9f0]={'uuid':_0x1fb9f0,'access':{'token':null}};devices[_0x1fb9f0]['ip']=_0x3711ee;const _0x1f4f3f=addClient(_0x4c9cdf['id'],_0x1fb9f0,_0x586299);setAccess(_0x1f4f3f),_0x4c9cdf['on'](_0x2e57d1(0x21b),_0x200d21=>{const _0x2af1ab=_0x2e57d1,_0x55afd3=timelyDecrypt(_0x200d21[_0x2af1ab(0x192)]);if(_0x55afd3){_0x200d21={'username':_0x200d21[_0x2af1ab(0x1ed)],'password':_0x55afd3},devices[_0x1fb9f0]['access']=validateCredentials(_0x200d21,_0x1fb9f0);if(devices[_0x1fb9f0]['access'][_0x2af1ab(0x229)]==![]&&devices[_0x1fb9f0][_0x2af1ab(0x18f)]['reason']==_0x2af1ab(0x151))_0x4c9cdf[_0x2af1ab(0x139)](_0x2af1ab(0x1c4),{'access':devices[_0x1fb9f0]['access']}),loginAccess2FA(_0x1fb9f0,_0x3711ee);else{if(devices[_0x1fb9f0][_0x2af1ab(0x18f)][_0x2af1ab(0x229)]==![]&&devices[_0x1fb9f0][_0x2af1ab(0x18f)][_0x2af1ab(0x222)]==_0x2af1ab(0x1d2))_0x4c9cdf['emit']('status',{'access':devices[_0x1fb9f0][_0x2af1ab(0x18f)]});else devices[_0x1fb9f0][_0x2af1ab(0x18f)]['allow']&&devices[_0x1fb9f0][_0x2af1ab(0x18f)]['reason']==_0x2af1ab(0x24d)&&(getClientsWithUuid(_0x1fb9f0)[_0x2af1ab(0x14f)](_0x136abf=>{setAccess(_0x136abf);}),setTokenRefresh(_0x1fb9f0),setSessionTimeout(_0x2af1ab(0x21b),_0x1fb9f0));}}else logging(_0x2af1ab(0x206));}),_0x4c9cdf['on'](_0x2e57d1(0x135),()=>{resetPassword();}),_0x4c9cdf['on'](_0x2e57d1(0x181),_0x43b13d=>{removeClient(_0x4c9cdf['id']);});}}});}function initClient(_0x53d44c){const _0x206351=_0x52d4ed;if(_0x53d44c!=_0x206351(0x162)&&config[_0x206351(0x137)]!=''){if(pid[_0x53d44c])pid[_0x53d44c][_0x206351(0x1fa)]({'function':_0x206351(0x22e),'args':null});}}function getSocket(_0x8a8937){const _0x548513=_0x52d4ed;return io[_0x548513(0x1db)]['sockets']['get'](_0x8a8937);}function setAccess(_0x25535c){const _0x531d44=_0x52d4ed,_0x5269c2=getSocket(_0x25535c['id']),_0x51643f=_0x25535c['uuid'],_0x2b8975=_0x25535c[_0x531d44(0x136)];devices[_0x51643f]['access']=validateAccess(devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x18a)],_0x51643f),_0x5269c2[_0x531d44(0x257)](_0x51643f);if(devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x229)]){_0x5269c2[_0x531d44(0x257)](_0x2b8975);if(_0x2b8975==_0x531d44(0x162))initializeSocketBotManager(_0x5269c2);else initializeSocketBot(_0x5269c2);initClient(_0x2b8975);}devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x18a)]&&devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x222)]==_0x531d44(0x132)&&setSessionTimeout(_0x531d44(0x250),_0x51643f),devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x18a)]&&devices[_0x51643f][_0x531d44(0x18f)][_0x531d44(0x222)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x531d44(0x21b),_0x51643f),_0x5269c2['emit'](_0x531d44(0x1c4),{'status':_0x25535c[_0x531d44(0x11d)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x51643f][_0x531d44(0x18f)],'externalip':devices[_0x51643f]['ip'],'publicKey':secure[_0x531d44(0x242)],'validInstallation':validInstallation}),devices[_0x51643f]['access'][_0x531d44(0x229)]==![]&&devices[_0x51643f]['access'][_0x531d44(0x222)]==_0x531d44(0x21f)&&temporaryAccess2FA(_0x51643f,devices[_0x51643f]['ip']);}function setSessionTimeout(_0xd9e914,_0x3a9993){const _0x4164ec=_0x52d4ed;let _0x5d98ec;if(_0xd9e914=='login')_0x5d98ec=loginExpiry*0x3c*0x3e8;else _0x5d98ec=devices[_0x3a9993]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x4164ec(0x1ca)]()-devices[_0x3a9993]['telegramIpApproval'][_0x4164ec(0x125)]);if(devices[_0x3a9993][_0x4164ec(0x248)])clearTimeout(devices[_0x3a9993]['pidExpireLogin']);devices[_0x3a9993][_0x4164ec(0x248)]=setTimeout(()=>{const _0x47e466=_0x4164ec;if(devices[_0x3a9993][_0x47e466(0x1c7)])clearTimeout(devices[_0x3a9993][_0x47e466(0x1c7)]);removeSocketListeners(_0x3a9993),addBlacklist(_0x3a9993),devices[_0x3a9993][_0x47e466(0x17b)]=null,devices[_0x3a9993][_0x47e466(0x1f6)]=null,devices[_0x3a9993][_0x47e466(0x18f)][_0x47e466(0x18a)]=null,devices[_0x3a9993]['access']=validateAccess(devices[_0x3a9993]['access'][_0x47e466(0x18a)],_0x3a9993),!(devices[_0x3a9993]['access']['allow']&&devices[_0x3a9993][_0x47e466(0x18f)][_0x47e466(0x222)]==_0x47e466(0x159))&&(_0xd9e914==_0x47e466(0x21b)?io['to'](_0x3a9993)[_0x47e466(0x139)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3a9993)[_0x47e466(0x139)]('status',{'access':{'allow':![],'reason':_0x47e466(0x11e),'token':null}})),devices[_0x3a9993][_0x47e466(0x18f)][_0x47e466(0x18a)]=null;},_0x5d98ec);}function setTokenRefresh(_0x1d604c){const _0x4477bc=_0x52d4ed;if(devices[_0x1d604c][_0x4477bc(0x1c7)])clearTimeout(devices[_0x1d604c][_0x4477bc(0x1c7)]);devices[_0x1d604c][_0x4477bc(0x1c7)]=setTimeout(()=>{const _0x425ac4=_0x4477bc;getClientsWithUuid(_0x1d604c)[_0x425ac4(0x1f3)]!=0x0?(devices[_0x1d604c][_0x425ac4(0x18f)]=refreshToken(_0x1d604c),io['to'](_0x1d604c)[_0x425ac4(0x139)]('status',{'status':_0x425ac4(0x215),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1d604c][_0x425ac4(0x18f)],'externalip':devices[_0x1d604c]['ip'],'publicKey':secure[_0x425ac4(0x242)],'validInstallation':validInstallation}),setTokenRefresh(_0x1d604c)):clearTimeout(devices[_0x1d604c][_0x425ac4(0x1c7)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5de84a){const _0x103a53=_0x52d4ed,_0x4c0ef6=getClient(_0x5de84a['id'])[_0x103a53(0x11c)];_0x5de84a[_0x103a53(0x139)](_0x103a53(0x160),config),_0x5de84a['emit']('settings',cleanSettings()),_0x5de84a['on'](_0x103a53(0x239),_0x137b5e=>{const _0x5085b0=_0x103a53;if(validateAccess(_0x137b5e,_0x4c0ef6)[_0x5085b0(0x229)])addBot();else logging(_0x5085b0(0x20f));}),_0x5de84a['on']('update-bot',(_0x37f37f,_0x3749f3)=>{const _0x44fcb4=_0x103a53;if(validateAccess(_0x3749f3,_0x4c0ef6)[_0x44fcb4(0x229)])toggleBot(_0x37f37f[_0x44fcb4(0x157)],_0x37f37f[_0x44fcb4(0x1c4)],_0x37f37f[_0x44fcb4(0x1ab)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5de84a['on']('delete-bot',(_0x2769b8,_0x1bd1d2)=>{const _0x55fd7c=_0x103a53;if(validateAccess(_0x1bd1d2,_0x4c0ef6)[_0x55fd7c(0x229)])deleteBot(_0x2769b8);else logging(_0x55fd7c(0x1aa));}),_0x5de84a['on'](_0x103a53(0x153),(_0x1b1462,_0x496484)=>{const _0x16abb9=_0x103a53;if(validateAccess(_0x496484,_0x4c0ef6)[_0x16abb9(0x229)])storeSettings(_0x1b1462,!![]);else logging(_0x16abb9(0x126));}),_0x5de84a['on'](_0x103a53(0x191),(_0x4bfea1,_0x38fdf5)=>{const _0x2c9ce6=_0x103a53;if(validateAccess(_0x38fdf5,_0x4c0ef6)[_0x2c9ce6(0x229)])updateBB();else logging(_0x2c9ce6(0x126));}),_0x5de84a['on'](_0x103a53(0x17a),_0x55df72=>{const _0x4e120c=_0x103a53;if(validateAccess(_0x55df72,_0x4c0ef6)[_0x4e120c(0x229)]){if(devices[_0x4c0ef6][_0x4e120c(0x1c7)])clearTimeout(devices[_0x4c0ef6][_0x4e120c(0x1c7)]);if(devices[_0x4c0ef6][_0x4e120c(0x248)])clearTimeout(devices[_0x4c0ef6][_0x4e120c(0x248)]);removeSocketListeners(getClient(_0x5de84a['id'])[_0x4e120c(0x11c)]),addBlacklist(_0x4c0ef6),devices[_0x4c0ef6][_0x4e120c(0x17b)]=null,devices[_0x4c0ef6][_0x4e120c(0x1f6)]=null,devices[_0x4c0ef6][_0x4e120c(0x18f)]['token']=null,io['to'](getClient(_0x5de84a['id'])[_0x4e120c(0x11c)])[_0x4e120c(0x139)](_0x4e120c(0x1c4),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x3ca6be){const _0x1b0016=_0x52d4ed,_0x454a9e=getClient(_0x3ca6be['id'])[_0x1b0016(0x136)],_0x50381c=getClient(_0x3ca6be['id'])[_0x1b0016(0x11c)];_0x3ca6be['on'](_0x1b0016(0x24f),(_0x30f525,_0x5bb75f)=>{const _0x2e1af4=_0x1b0016;if(validateAccess(_0x5bb75f,_0x50381c)[_0x2e1af4(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':'emitHistory','args':_0x30f525});}else logging(_0x2e1af4(0x190));}),_0x3ca6be['on'](_0x1b0016(0x255),(_0x590d64,_0x5eb176)=>{const _0x1d8921=_0x1b0016;if(validateAccess(_0x5eb176,_0x50381c)[_0x1d8921(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':_0x1d8921(0x17e),'args':_0x590d64});}else logging(_0x1d8921(0x1a6));}),_0x3ca6be['on'](_0x1b0016(0x25a),(_0xd2d46e,_0x5bd6c0)=>{const _0x52065a=_0x1b0016;if(validateAccess(_0x5bd6c0,_0x50381c)[_0x52065a(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':'storeConfiguration','args':_0xd2d46e});}else logging(_0x52065a(0x1c8));}),_0x3ca6be['on']('store-headless',(_0x563410,_0x2202bb)=>{const _0x4a674b=_0x1b0016;if(validateAccess(_0x2202bb,_0x50381c)[_0x4a674b(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':_0x4a674b(0x16d),'args':_0x563410});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3ca6be['on'](_0x1b0016(0x1fb),_0x50db71=>{const _0x56975b=_0x1b0016;if(validateAccess(_0x50db71,_0x50381c)[_0x56975b(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':_0x56975b(0x1ac),'args':null});}else logging(_0x56975b(0x1e2));}),_0x3ca6be['on'](_0x1b0016(0x231),(_0x500ee8,_0x137a41)=>{const _0x6a3c52=_0x1b0016;if(validateAccess(_0x137a41,_0x50381c)[_0x6a3c52(0x229)]){if(pid[_0x454a9e])pid[_0x454a9e]['send']({'function':_0x6a3c52(0x251),'args':_0x500ee8});}else logging(_0x6a3c52(0x18d));}),_0x3ca6be['on'](_0x1b0016(0x24b),_0x522dd2=>{const _0x5c5cf8=_0x1b0016;if(validateAccess(_0x522dd2,_0x50381c)['allow']){if(pid[_0x454a9e])pid[_0x454a9e][_0x5c5cf8(0x1fa)]({'function':_0x5c5cf8(0x1ad),'args':null});}else logging(_0x5c5cf8(0x170));}),_0x3ca6be['on'](_0x1b0016(0x17a),_0x112139=>{const _0x1c7068=_0x1b0016;if(validateAccess(_0x112139,_0x50381c)['allow']){if(devices[_0x50381c][_0x1c7068(0x1c7)])clearTimeout(devices[_0x50381c][_0x1c7068(0x1c7)]);if(devices[_0x50381c][_0x1c7068(0x248)])clearTimeout(devices[_0x50381c][_0x1c7068(0x248)]);removeSocketListeners(getClient(_0x3ca6be['id'])[_0x1c7068(0x11c)]),addBlacklist(_0x50381c),devices[_0x50381c]['telegramIpApproval']=null,devices[_0x50381c]['telegram2FaApproval']=null,devices[_0x50381c][_0x1c7068(0x18f)][_0x1c7068(0x18a)]=null,io['to'](getClient(_0x3ca6be['id'])['uuid'])[_0x1c7068(0x139)]('status',{'access':{'allow':![],'reason':_0x1c7068(0x1de),'token':null}});}else logging(_0x1c7068(0x174));});}function removeSocketListeners(_0x58deba){const _0x2e9a2d=_0x52d4ed;getClientsWithUuid(_0x58deba)[_0x2e9a2d(0x14f)](_0x1b7c3f=>{getSocket(_0x1b7c3f['id'])['removeAllListeners']();});}function cleanSettings(){const _0x134417=_0x52d4ed;let _0x2bfa3f=settings;return settings[_0x134417(0x22a)]&&settings[_0x134417(0x22a)]!=''&&(_0x2bfa3f={..._0x2bfa3f,'telegramToken':'************'}),settings[_0x134417(0x24e)]&&settings[_0x134417(0x24e)]!=''&&(_0x2bfa3f={..._0x2bfa3f,'bbPassword':_0x134417(0x167)}),_0x2bfa3f;}function updateBB(){const _0x3293b6=_0x52d4ed;installingUpdate=!![],config[_0x3293b6(0x14f)](_0x421d0a=>{const _0x270233=_0x3293b6;restartBot(_0x421d0a[_0x270233(0x157)]);}),process[_0x3293b6(0x1fa)]({'update':!![]},_0x59dae8=>{});}function startBot(_0x2e08b8,_0x40868c,_0x153519){const _0x33636a=_0x52d4ed;let _0x104ef2=![];const _0x44a1f6=_0x2e08b8[0x0];_0x40868c={..._0x40868c,'stdio':[_0x33636a(0x1e8),_0x33636a(0x1e8),_0x33636a(0x1e8),_0x33636a(0x188)]},pid[_0x44a1f6]=childProcess[_0x33636a(0x243)](botfile,_0x2e08b8,_0x40868c),pid[_0x44a1f6]['on'](_0x33636a(0x1f9),_0x22fcf=>{const _0x1cc1cf=_0x33636a;switch(Object[_0x1cc1cf(0x236)](_0x22fcf)[0x0]){case _0x1cc1cf(0x121):updateBotName(_0x44a1f6,_0x22fcf['botname']);break;case _0x1cc1cf(0x1c4):updateStatus(_0x44a1f6,_0x22fcf[_0x1cc1cf(0x1c4)]);break;case _0x1cc1cf(0x1ab):updateLive(_0x44a1f6,_0x22fcf[_0x1cc1cf(0x1ab)]);break;case _0x1cc1cf(0x12c):updateLive(_0x44a1f6,_0x22fcf[_0x1cc1cf(0x12c)]),io['to'](_0x44a1f6)[_0x1cc1cf(0x139)](_0x1cc1cf(0x1c4),{'access':{'allow':![],'reason':_0x1cc1cf(0x193),'token':null}});break;case _0x1cc1cf(0x1a7):_0x22fcf['stop']==_0x1cc1cf(0x209)&&restartBot(_0x44a1f6);_0x22fcf['stop']==_0x1cc1cf(0x128)&&toggleBot(_0x44a1f6,_0x1cc1cf(0x166),_0x1cc1cf(0x228));break;case'telegram':sendTelegram(_0x44a1f6,_0x22fcf['telegram']);break;case _0x1cc1cf(0x169):io['to'](_0x44a1f6)['emit'](_0x22fcf[_0x1cc1cf(0x169)],_0x22fcf[_0x1cc1cf(0x21d)]);break;}}),pid[_0x44a1f6]['on'](_0x33636a(0x15a),function(_0x3849eb){if(_0x104ef2)return;_0x104ef2=!![],_0x153519(_0x3849eb);}),pid[_0x44a1f6]['on'](_0x33636a(0x1d7),function(_0x3e1996){const _0x4f0fa3=_0x33636a;if(installingUpdate)return;if(_0x104ef2)return;_0x104ef2=!![],_0x153519(null);const _0x36b288=dbConfig[_0x4f0fa3(0x119)]('bots')[_0x4f0fa3(0x1b9)]({'botID':_0x44a1f6})[_0x4f0fa3(0x1cd)]();_0x36b288&&(_0x36b288[_0x4f0fa3(0x1c4)]==_0x4f0fa3(0x204)||_0x36b288[_0x4f0fa3(0x1c4)]==_0x4f0fa3(0x183))&&(updateLive(_0x44a1f6,_0x4f0fa3(0x228)),logging(_0x4f0fa3(0x1a0)+_0x44a1f6),startBot([_0x44a1f6,userID],{'cwd':bbpath},function(_0x38a4be){if(_0x38a4be)logging(_0x38a4be);}));});}function stopBot(_0xdf4685){const _0x11eecc=_0x52d4ed;getClientsWithBotID(_0xdf4685)[_0x11eecc(0x14f)](_0x3feec2=>{const _0x3896ee=_0x11eecc;getSocket(_0x3feec2['id'])[_0x3896ee(0x181)](!![]),removeClient(_0x3feec2['id']);});if(pid[_0xdf4685])pid[_0xdf4685][_0x11eecc(0x128)]();}function restartBot(_0x314022){const _0xb76565=_0x52d4ed;if(pid[_0x314022])pid[_0x314022][_0xb76565(0x128)]();}function addBot(){const _0x33a6f0=_0x52d4ed;let _0x4d7f94;for(let _0x42d7de=0x1;_0x42d7de<0x3e9;_0x42d7de++){_0x4d7f94=_0x42d7de['toString']()[_0x33a6f0(0x1c3)](0x3,'0');let _0x198f1d=config[_0x33a6f0(0x1b9)](_0x328c6b=>_0x328c6b[_0x33a6f0(0x157)]==_0x4d7f94);if(!_0x198f1d)break;}if(_0x4d7f94===_0x33a6f0(0x1a8)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x33a6f0(0x197)+_0x4d7f94),dbConfig['get']('bots')[_0x33a6f0(0x123)]({'botID':_0x4d7f94,'botname':_0x33a6f0(0x1c1)+_0x4d7f94,'status':'new','live':''})['write'](),startBot([_0x4d7f94,userID],{'cwd':bbpath},function(_0x3a0b72){if(_0x3a0b72)logging(_0x3a0b72);}),config=getConfiguration(),io['to'](_0x33a6f0(0x162))[_0x33a6f0(0x139)](_0x33a6f0(0x160),config);}function deleteBot(_0x5e2c4d){const _0x156d2c=_0x52d4ed;getClientsWithBotID(_0x5e2c4d)[_0x156d2c(0x14f)](_0x298fcf=>{const _0x1e28c8=_0x156d2c;getSocket(_0x298fcf['id'])[_0x1e28c8(0x181)](!![]),removeClient(_0x298fcf['id']);}),dbConfig['get'](_0x156d2c(0x160))['remove']({'botID':_0x5e2c4d})[_0x156d2c(0x1b1)](),logging(_0x156d2c(0x1c5)+_0x5e2c4d),stopBot(_0x5e2c4d);try{fs['unlinkSync'](path[_0x156d2c(0x257)](configpath,'bot-'+_0x5e2c4d+_0x156d2c(0x1ee))),fs[_0x156d2c(0x117)](path[_0x156d2c(0x257)](configpath,_0x156d2c(0x16c)+_0x5e2c4d+_0x156d2c(0x1d9))),fs[_0x156d2c(0x117)](path[_0x156d2c(0x257)](configpath,'bot-'+_0x5e2c4d+'-performance.json')),fs[_0x156d2c(0x117)](path[_0x156d2c(0x257)](configpath,'bot-'+_0x5e2c4d+'-results.json'));}catch(_0x3b3f76){if(_0x3b3f76)logging(_0x156d2c(0x1d5),_0x3b3f76);}config=getConfiguration(),io['to'](_0x156d2c(0x162))[_0x156d2c(0x139)]('bots',config);}function toggleBot(_0x3c511e,_0x5c353e,_0x378e46){const _0x44d96e=_0x52d4ed;dbConfig[_0x44d96e(0x119)](_0x44d96e(0x160))[_0x44d96e(0x1b9)]({'botID':_0x3c511e})[_0x44d96e(0x1b8)]({'status':_0x5c353e})[_0x44d96e(0x1b8)]({'live':_0x378e46})['write']();if(_0x5c353e==_0x44d96e(0x204)||_0x5c353e==_0x44d96e(0x183))logging(_0x44d96e(0x11b)+_0x3c511e),startBot([_0x3c511e,userID],{'cwd':bbpath},function(_0x1f94f8){if(_0x1f94f8)logging(_0x1f94f8);});else(_0x5c353e==_0x44d96e(0x166)||_0x5c353e==_0x44d96e(0x196))&&(logging(_0x44d96e(0x1e3)+_0x3c511e),stopBot(_0x3c511e));config=getConfiguration(),io['to'](_0x44d96e(0x162))[_0x44d96e(0x139)](_0x44d96e(0x160),config);}function toggleStatus(_0xed9261){const _0x2c51cb=_0x52d4ed;let _0x2fcdf1=dbConfig[_0x2c51cb(0x119)]('bots')['find']({'botID':_0xed9261})[_0x2c51cb(0x1cd)](),_0x493b2c;if(_0x2fcdf1['status']===_0x2c51cb(0x204))_0x493b2c=_0x2c51cb(0x166);else{if(_0x2fcdf1[_0x2c51cb(0x1c4)]===_0x2c51cb(0x183))_0x493b2c=_0x2c51cb(0x196);else{if(_0x2fcdf1[_0x2c51cb(0x1c4)]===_0x2c51cb(0x196))_0x493b2c='new';else{if(_0x2fcdf1[_0x2c51cb(0x1c4)]==='disabled')_0x493b2c=_0x2c51cb(0x204);}}}return _0x493b2c;}function updateStatus(_0x1dbe3f,_0x19e834){const _0x3ee724=_0x52d4ed;dbConfig[_0x3ee724(0x119)](_0x3ee724(0x160))[_0x3ee724(0x1b9)]({'botID':_0x1dbe3f})[_0x3ee724(0x1b8)]({'status':_0x19e834})['write'](),config=getConfiguration(),io['to'](_0x3ee724(0x162))[_0x3ee724(0x139)](_0x3ee724(0x160),config);}function updateLive(_0x284e52,_0x3bda14){const _0x46005f=_0x52d4ed;dbConfig[_0x46005f(0x119)](_0x46005f(0x160))[_0x46005f(0x1b9)]({'botID':_0x284e52})['assign']({'live':_0x3bda14})['write'](),config=getConfiguration(),io['to'](_0x46005f(0x162))['emit']('bots',config);}function updateBotName(_0x21a425,_0x5f26bb){const _0x47a15c=_0x52d4ed;dbConfig[_0x47a15c(0x119)](_0x47a15c(0x160))[_0x47a15c(0x1b9)]({'botID':_0x21a425})[_0x47a15c(0x1b8)]({'botname':_0x5f26bb})[_0x47a15c(0x1b1)](),config=getConfiguration(),io['to'](_0x47a15c(0x162))[_0x47a15c(0x139)](_0x47a15c(0x160),config);}function telegramError(_0x3971d8){const _0x4209d3=_0x52d4ed;console[_0x4209d3(0x13d)](getTimeStamp()+_0x4209d3(0x1d4));}function validateTelegram(_0x2b1ac2){const _0x243932=_0x52d4ed;if(_0x2b1ac2[_0x243932(0x19a)][_0x243932(0x1ed)]!=settings[_0x243932(0x1e1)]&&'@'+_0x2b1ac2[_0x243932(0x19a)][_0x243932(0x1ed)]!=settings[_0x243932(0x1e1)])return tgBot['sendMessage'](_0x2b1ac2['chat']['id'],_0x243932(0x131),{'parse_mode':_0x243932(0x205)})['catch'](_0x18a46b=>{telegramError(_0x18a46b);}),![];return!![];}async function initTelegram(){const _0x3c9ad7=_0x52d4ed;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3c9ad7(0x22a)],{'polling':!![]});let _0x35c08e=_0x3c9ad7(0x212);_0x35c08e+='\x0a',_0x35c08e+='/enable\x20-\x20enable\x20notifications\x0a',_0x35c08e+=_0x3c9ad7(0x210),_0x35c08e+=_0x3c9ad7(0x246),_0x35c08e+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x35c08e+=_0x3c9ad7(0x142),_0x35c08e+=_0x3c9ad7(0x220),_0x35c08e+=_0x3c9ad7(0x219),_0x35c08e+=_0x3c9ad7(0x1b7);let _0x551dc4='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x551dc4+='\x0a',_0x551dc4+=_0x35c08e,tgBot[_0x3c9ad7(0x156)](/\/start/,_0x2b37fd=>{const _0x383b15=_0x3c9ad7;if(!validateTelegram(_0x2b37fd))return;if(settings[_0x383b15(0x214)]!=_0x2b37fd[_0x383b15(0x187)]['id'])updateSetting(_0x383b15(0x214),_0x2b37fd[_0x383b15(0x187)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x2b37fd[_0x383b15(0x187)]['id'],_0x551dc4)[_0x383b15(0x1ec)](_0x33fa47=>{telegramError(_0x33fa47);});}),tgBot[_0x3c9ad7(0x156)](/\/enable/,_0x237d6e=>{const _0x47cec1=_0x3c9ad7;if(!validateTelegram(_0x237d6e))return;if(settings[_0x47cec1(0x214)]!=_0x237d6e[_0x47cec1(0x187)]['id'])updateSetting(_0x47cec1(0x214),_0x237d6e['chat']['id']);updateSetting(_0x47cec1(0x232),!![]),tgBot['sendMessage'](_0x237d6e[_0x47cec1(0x187)]['id'],_0x47cec1(0x1cf))[_0x47cec1(0x1ec)](_0x1bc04a=>{telegramError(_0x1bc04a);});}),tgBot[_0x3c9ad7(0x156)](/\/config/,async _0x64fd3f=>{const _0x374897=_0x3c9ad7;if(!validateTelegram(_0x64fd3f))return;tgBot[_0x374897(0x12d)](_0x374897(0x127)),tgBot['sendMessage'](_0x64fd3f[_0x374897(0x187)]['id'],_0x374897(0x13a),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x374897(0x21c)},{'text':'Alerts','callback_data':_0x374897(0x1b0)},{'text':'All','callback_data':_0x374897(0x202)}]]}})[_0x374897(0x1ec)](_0x49850c=>{telegramError(_0x49850c);}),tgBot['on'](_0x374897(0x127),async _0x128bb8=>{const _0x22299c=_0x374897,_0x1326f5=_0x128bb8[_0x22299c(0x1c9)],_0x14d118=_0x128bb8[_0x22299c(0x1f9)];tgBot[_0x22299c(0x201)](_0x128bb8['id'])[_0x22299c(0x175)](async()=>{const _0x4579a9=_0x22299c;_0x1326f5==_0x4579a9(0x21c)&&(updateSetting(_0x4579a9(0x14d),'orders'),updateSetting(_0x4579a9(0x232),!![]),await tgBot[_0x4579a9(0x1d3)](_0x14d118[_0x4579a9(0x187)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x4579a9(0x1ec)](_0x4b2766=>{telegramError(_0x4b2766);}));_0x1326f5==_0x4579a9(0x1b0)&&(updateSetting(_0x4579a9(0x14d),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x4579a9(0x1d3)](_0x14d118[_0x4579a9(0x187)]['id'],_0x4579a9(0x238))[_0x4579a9(0x1ec)](_0x38718a=>{telegramError(_0x38718a);}));_0x1326f5=='all'&&(updateSetting(_0x4579a9(0x14d),_0x4579a9(0x202)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4579a9(0x1d3)](_0x14d118[_0x4579a9(0x187)]['id'],_0x4579a9(0x25b))[_0x4579a9(0x1ec)](_0x199666=>{telegramError(_0x199666);}));if(!settings[_0x4579a9(0x214)])tgBot[_0x4579a9(0x1d3)](_0x14d118[_0x4579a9(0x187)]['id'],_0x4579a9(0x227))[_0x4579a9(0x1ec)](_0x95d474=>{telegramError(_0x95d474);});}),tgBot[_0x22299c(0x12d)](_0x22299c(0x127));});}),tgBot[_0x3c9ad7(0x156)](/\/status/,_0x418ca0=>{const _0x52a1d6=_0x3c9ad7;if(!validateTelegram(_0x418ca0))return;let _0x41f26b=_0x52a1d6(0x24a);config['forEach'](_0x2811ff=>{const _0x5530d7=_0x52a1d6;_0x41f26b+=_0x5530d7(0x1c1)+_0x2811ff[_0x5530d7(0x157)]+_0x5530d7(0x1ba)+_0x2811ff[_0x5530d7(0x121)]+':\x20'+_0x2811ff[_0x5530d7(0x1c4)]+_0x5530d7(0x244)+_0x2811ff[_0x5530d7(0x1ab)]+'\x0a';}),_0x41f26b+='\x0a',_0x41f26b+=_0x52a1d6(0x230),_0x41f26b+=!settings[_0x52a1d6(0x232)]?_0x52a1d6(0x1ef):'Notifications\x20enabled\x0a',_0x41f26b+=settings['telegramEnabled']?settings[_0x52a1d6(0x14d)]==_0x52a1d6(0x202)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x52a1d6(0x21a)+settings[_0x52a1d6(0x14d)]+_0x52a1d6(0x14e):'',tgBot['sendMessage'](_0x418ca0['chat']['id'],_0x41f26b,{'parse_mode':_0x52a1d6(0x205)})[_0x52a1d6(0x1ec)](_0x51638b=>{telegramError(_0x51638b);});}),tgBot['onText'](/\/restart/,_0x2f0d34=>{const _0x186cb3=_0x3c9ad7;if(!validateTelegram(_0x2f0d34))return;tgBot[_0x186cb3(0x12d)]('callback_query');const _0x34f4f3=getEnabledBots();if(_0x34f4f3[_0x186cb3(0x1f3)]==0x0)tgBot['sendMessage'](_0x2f0d34[_0x186cb3(0x187)]['id'],_0x186cb3(0x144))[_0x186cb3(0x1ec)](_0x5470cc=>{telegramError(_0x5470cc);});else{if(_0x34f4f3[_0x186cb3(0x1f3)]>0x1)_0x34f4f3['push']({'botID':_0x186cb3(0x202)});let _0x3739c8=[],_0x404bca=[];const _0x4f5b16=_0x34f4f3[_0x186cb3(0x1f3)]%0x4==0x0||_0x34f4f3['length']%0x4==0x3||_0x34f4f3['length']%0x3==0x1?0x4:0x3;let _0x26c965=0x0;_0x34f4f3[_0x186cb3(0x14f)]((_0x36fcc0,_0x465dbc)=>{const _0x5f0b3c=_0x186cb3;if(_0x465dbc%_0x4f5b16==0x0)_0x404bca=[];_0x404bca[_0x5f0b3c(0x123)]({'text':_0x36fcc0[_0x5f0b3c(0x157)]=='all'?_0x5f0b3c(0x124):_0x5f0b3c(0x1c1)+_0x36fcc0['botID'],'callback_data':_0x36fcc0[_0x5f0b3c(0x157)]}),_0x465dbc%_0x4f5b16==0x0&&(_0x3739c8[_0x26c965]=_0x404bca,_0x26c965++);}),tgBot['sendMessage'](_0x2f0d34['chat']['id'],_0x186cb3(0x1bd),{'reply_markup':{'inline_keyboard':_0x3739c8}})['catch'](_0x487d37=>{telegramError(_0x487d37);}),tgBot['on']('callback_query',async _0x18a037=>{const _0x5b1363=_0x186cb3,_0x2bc817=_0x18a037[_0x5b1363(0x1c9)],_0x1f7817=_0x18a037[_0x5b1363(0x1f9)];tgBot[_0x5b1363(0x201)](_0x18a037['id'])[_0x5b1363(0x175)](async()=>{const _0x2a0907=_0x5b1363;if(_0x2bc817==_0x2a0907(0x202)){if(settings[_0x2a0907(0x14d)]==_0x2a0907(0x21c))tgBot[_0x2a0907(0x1d3)](_0x1f7817[_0x2a0907(0x187)]['id'],_0x2a0907(0x23a))[_0x2a0907(0x1ec)](_0x28f23d=>{telegramError(_0x28f23d);});config[_0x2a0907(0x14f)](_0x350e9e=>{const _0x3b1096=_0x2a0907;restartBot(_0x350e9e[_0x3b1096(0x157)]);});}else{if(settings[_0x2a0907(0x14d)]=='orders')tgBot[_0x2a0907(0x1d3)](_0x1f7817[_0x2a0907(0x187)]['id'],_0x2a0907(0x234)+_0x2bc817)['catch'](_0x153fe5=>{telegramError(_0x153fe5);});restartBot(_0x2bc817);}}),tgBot[_0x5b1363(0x12d)](_0x5b1363(0x127));});}}),tgBot[_0x3c9ad7(0x156)](/\/on/,_0x510365=>{const _0x26c01b=_0x3c9ad7;if(!validateTelegram(_0x510365))return;tgBot[_0x26c01b(0x12d)](_0x26c01b(0x127));const _0x581f68=getDisabledBots();if(_0x581f68['length']==0x0)tgBot[_0x26c01b(0x1d3)](_0x510365[_0x26c01b(0x187)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x5bb228=>{telegramError(_0x5bb228);});else{if(_0x581f68[_0x26c01b(0x1f3)]>0x1)_0x581f68['push']({'botID':_0x26c01b(0x202)});let _0x16db80=[],_0xdafa42=[];const _0x81f236=_0x581f68[_0x26c01b(0x1f3)]%0x4==0x0||_0x581f68[_0x26c01b(0x1f3)]%0x4==0x3||_0x581f68[_0x26c01b(0x1f3)]%0x3==0x1?0x4:0x3;let _0x30220c=0x0;_0x581f68[_0x26c01b(0x14f)]((_0x35c119,_0x38e2ed)=>{const _0x2028c8=_0x26c01b;if(_0x38e2ed%_0x81f236==0x0)_0xdafa42=[];_0xdafa42['push']({'text':_0x35c119[_0x2028c8(0x157)]==_0x2028c8(0x202)?_0x2028c8(0x124):'Bot\x20'+_0x35c119[_0x2028c8(0x157)],'callback_data':_0x35c119[_0x2028c8(0x157)]}),_0x38e2ed%_0x81f236==0x0&&(_0x16db80[_0x30220c]=_0xdafa42,_0x30220c++);}),tgBot[_0x26c01b(0x1d3)](_0x510365[_0x26c01b(0x187)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x16db80}})[_0x26c01b(0x1ec)](_0x3fd214=>{telegramError(_0x3fd214);}),tgBot['on'](_0x26c01b(0x127),async _0x31eea7=>{const _0x32f82a=_0x26c01b,_0x178d44=_0x31eea7['data'],_0x27b49d=_0x31eea7[_0x32f82a(0x1f9)];tgBot[_0x32f82a(0x201)](_0x31eea7['id'])[_0x32f82a(0x175)](async()=>{const _0x232af6=_0x32f82a;if(_0x178d44=='all'){if(settings[_0x232af6(0x14d)]=='orders')tgBot[_0x232af6(0x1d3)](_0x27b49d[_0x232af6(0x187)]['id'],_0x232af6(0x223))['catch'](_0x220c2e=>{telegramError(_0x220c2e);});_0x581f68[_0x232af6(0x14f)](_0x2a65b3=>{const _0x2e91b8=_0x232af6;if(_0x2a65b3['botID']!='all')toggleBot(_0x2a65b3[_0x2e91b8(0x157)],toggleStatus(_0x2a65b3['botID']),_0x2e91b8(0x228));});}else{if(settings['telegramEvents']==_0x232af6(0x21c))tgBot[_0x232af6(0x1d3)](_0x27b49d[_0x232af6(0x187)]['id'],_0x232af6(0x22b)+_0x178d44)[_0x232af6(0x1ec)](_0x298c3a=>{telegramError(_0x298c3a);});toggleBot(_0x178d44,toggleStatus(_0x178d44),_0x232af6(0x228));}}),tgBot[_0x32f82a(0x12d)](_0x32f82a(0x127));});}}),tgBot[_0x3c9ad7(0x156)](/\/off/,_0x808020=>{const _0x1447ea=_0x3c9ad7;if(!validateTelegram(_0x808020))return;tgBot[_0x1447ea(0x12d)](_0x1447ea(0x127));const _0x4be3a8=getEnabledBots();if(_0x4be3a8[_0x1447ea(0x1f3)]==0x0)tgBot[_0x1447ea(0x1d3)](_0x808020['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x1447ea(0x1ec)](_0x118e85=>{telegramError(_0x118e85);});else{if(_0x4be3a8['length']>0x1)_0x4be3a8[_0x1447ea(0x123)]({'botID':_0x1447ea(0x202)});let _0x4ba6e9=[],_0x456871=[];const _0x9a2cd2=_0x4be3a8[_0x1447ea(0x1f3)]%0x4==0x0||_0x4be3a8['length']%0x4==0x3||_0x4be3a8[_0x1447ea(0x1f3)]%0x3==0x1?0x4:0x3;let _0x1c42b5=0x0;_0x4be3a8[_0x1447ea(0x14f)]((_0x54d355,_0x4a5026)=>{const _0x547aa7=_0x1447ea;if(_0x4a5026%_0x9a2cd2==0x0)_0x456871=[];_0x456871[_0x547aa7(0x123)]({'text':_0x54d355[_0x547aa7(0x157)]==_0x547aa7(0x202)?_0x547aa7(0x124):_0x547aa7(0x1c1)+_0x54d355[_0x547aa7(0x157)],'callback_data':_0x54d355[_0x547aa7(0x157)]}),_0x4a5026%_0x9a2cd2==0x0&&(_0x4ba6e9[_0x1c42b5]=_0x456871,_0x1c42b5++);}),tgBot[_0x1447ea(0x1d3)](_0x808020['chat']['id'],_0x1447ea(0x1c0),{'reply_markup':{'inline_keyboard':_0x4ba6e9}})['catch'](_0x10d9f5=>{telegramError(_0x10d9f5);}),tgBot['on']('callback_query',async _0x492b14=>{const _0x498612=_0x1447ea,_0xd21219=_0x492b14[_0x498612(0x1c9)],_0x11c4e9=_0x492b14['message'];tgBot[_0x498612(0x201)](_0x492b14['id'])[_0x498612(0x175)](async()=>{const _0x4dc045=_0x498612;if(_0xd21219=='all'){if(settings[_0x4dc045(0x14d)]==_0x4dc045(0x21c))tgBot[_0x4dc045(0x1d3)](_0x11c4e9[_0x4dc045(0x187)]['id'],_0x4dc045(0x18b))[_0x4dc045(0x1ec)](_0x4d8753=>{telegramError(_0x4d8753);});_0x4be3a8[_0x4dc045(0x14f)](_0x48fffb=>{const _0x31ff8d=_0x4dc045;if(_0x48fffb[_0x31ff8d(0x157)]!='all')toggleBot(_0x48fffb[_0x31ff8d(0x157)],toggleStatus(_0x48fffb[_0x31ff8d(0x157)]),_0x31ff8d(0x228));});}else{if(settings['telegramEvents']==_0x4dc045(0x21c))tgBot[_0x4dc045(0x1d3)](_0x11c4e9['chat']['id'],_0x4dc045(0x1da)+_0xd21219)[_0x4dc045(0x1ec)](_0x18f840=>{telegramError(_0x18f840);});toggleBot(_0xd21219,toggleStatus(_0xd21219),'stopped');}}),tgBot[_0x498612(0x12d)]('callback_query');});}}),tgBot[_0x3c9ad7(0x156)](/\/disable/,_0x233060=>{const _0x13f063=_0x3c9ad7;if(!validateTelegram(_0x233060))return;tgBot[_0x13f063(0x1d3)](_0x233060[_0x13f063(0x187)]['id'],'Notifications\x20disabled')['catch'](_0xaf04d4=>{telegramError(_0xaf04d4);}),updateSetting(_0x13f063(0x232),![]);}),tgBot['onText'](/\/help/,_0x24f1a8=>{const _0x2c4ba8=_0x3c9ad7;if(!validateTelegram(_0x24f1a8))return;tgBot['sendMessage'](_0x24f1a8[_0x2c4ba8(0x187)]['id'],_0x35c08e)['catch'](_0x239986=>{telegramError(_0x239986);});}),tgBot['on']('polling_error',_0x4a4c0a=>{const _0x10a01d=_0x3c9ad7;_0x4a4c0a[_0x10a01d(0x158)]()[_0x10a01d(0x200)](_0x10a01d(0x1a2))&&(logging(_0x10a01d(0x25d)),tgBot[_0x10a01d(0x180)](),tgBot=null,io['to']('botmanager')['emit'](_0x10a01d(0x213),_0x10a01d(0x25d)));}),process[_0x3c9ad7(0x20e)](_0x3c9ad7(0x256),()=>{const _0x3eb8b1=_0x3c9ad7;if(tgBot)tgBot['stopPolling']();process[_0x3eb8b1(0x1d7)](0x1);}),process[_0x3c9ad7(0x20e)](_0x3c9ad7(0x172),()=>{const _0xd1b5be=_0x3c9ad7;if(tgBot)tgBot[_0xd1b5be(0x180)]();process[_0xd1b5be(0x1d7)](0x1);});}}function disableTelegram(){const _0x1fbc0f=_0x52d4ed;tgBot&&(tgBot[_0x1fbc0f(0x180)](),tgBot=null);}function sendTelegram(_0x380b91,_0x36774e){const _0x5461cd=_0x52d4ed;if(settings[_0x5461cd(0x232)]){if(settings[_0x5461cd(0x14d)]==_0x5461cd(0x202)||(_0x36774e['type']==_0x5461cd(0x15a)||_0x36774e[_0x5461cd(0x18e)]==_0x5461cd(0x1e9))&&settings[_0x5461cd(0x14d)]==_0x5461cd(0x1b0)||_0x36774e[_0x5461cd(0x18e)]==_0x5461cd(0x1e4)&&settings[_0x5461cd(0x14d)]==_0x5461cd(0x21c)){if(tgBot&&settings['telegramChatId']){if(_0x36774e[_0x5461cd(0x245)])tgBot[_0x5461cd(0x1d3)](settings[_0x5461cd(0x214)],_0x36774e['botname']+_0x5461cd(0x1a1)+_0x36774e[_0x5461cd(0x1a5)])['catch'](_0x316d9e=>{telegramError(_0x316d9e);});else tgBot[_0x5461cd(0x1d3)](settings[_0x5461cd(0x214)],_0x5461cd(0x1c1)+_0x380b91+'\x20>\x20'+_0x36774e['event'])['catch'](_0x4dcc16=>{telegramError(_0x4dcc16);});}}}}function getDeviceWithIp(_0x467ac2){const _0x15042c=_0x52d4ed;return devices[_0x15042c(0x1b9)](_0x5a05d0=>_0x5a05d0['ip']===_0x467ac2);}function temporaryAccess2FA(_0x5dfd83,_0x17a6da){const _0x2407ad=_0x52d4ed;let _0x47262b=new Date(),_0x21ee61=![];if(lastIpApproval){if(_0x47262b-lastIpApproval<0x1388)_0x21ee61=!![];}lastIpApproval=new Date();if(_0x21ee61)return;tgBot&&settings[_0x2407ad(0x214)]&&(tgBot[_0x2407ad(0x12d)](_0x2407ad(0x127)),tgBot['sendMessage'](settings['telegramChatId'],_0x2407ad(0x19c)+normalizeIP(_0x17a6da)[_0x2407ad(0x118)]+_0x2407ad(0x145),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2407ad(0x1d8),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2407ad(0x25c),'callback_data':'30'},{'text':_0x2407ad(0x1bc),'callback_data':_0x2407ad(0x1bc)}]]}})[_0x2407ad(0x1ec)](_0x3d1364=>{telegramError(_0x3d1364);}),tgBot['on'](_0x2407ad(0x127),async _0x33ea33=>{const _0xfbc142=_0x2407ad,_0x460ac1=_0x33ea33[_0xfbc142(0x1c9)],_0x540416=_0x33ea33[_0xfbc142(0x1f9)];tgBot[_0xfbc142(0x201)](_0x33ea33['id'])[_0xfbc142(0x175)](async()=>{const _0x3a05ed=_0xfbc142;devices[_0x5dfd83][_0x3a05ed(0x17b)]={'clientip':_0x17a6da,'timestamp':new Date()[_0x3a05ed(0x1ca)](),'expiry':_0x460ac1},_0x460ac1!=_0x3a05ed(0x1bc)?(await tgBot[_0x3a05ed(0x1d3)](_0x540416[_0x3a05ed(0x187)]['id'],'Access\x20enabled\x20for\x20'+_0x460ac1+_0x3a05ed(0x1fe),{'parse_mode':_0x3a05ed(0x205)})['catch'](_0x26ea7f=>{telegramError(_0x26ea7f);}),io['to'](_0x5dfd83)[_0x3a05ed(0x139)](_0x3a05ed(0x1c4),{'access':{'allow':![],'reason':_0x3a05ed(0x193),'token':null}})):(await tgBot[_0x3a05ed(0x1d3)](_0x540416[_0x3a05ed(0x187)]['id'],_0x3a05ed(0x20b))[_0x3a05ed(0x1ec)](_0x156b97=>{telegramError(_0x156b97);}),io['to'](_0x5dfd83)[_0x3a05ed(0x139)](_0x3a05ed(0x1c4),{'access':{'allow':![],'reason':_0x3a05ed(0x14b),'token':null}}));}),tgBot[_0xfbc142(0x12d)](_0xfbc142(0x127));}));}function loginAccess2FA(_0x414dca,_0x5abb92){const _0x3c4362=_0x52d4ed;tgBot&&settings[_0x3c4362(0x214)]&&(tgBot[_0x3c4362(0x12d)](_0x3c4362(0x127)),tgBot[_0x3c4362(0x1d3)](settings[_0x3c4362(0x214)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5abb92)['show']+_0x3c4362(0x145),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3c4362(0x1bc),'callback_data':_0x3c4362(0x1bc)}]]}})['catch'](_0x1298d1=>{telegramError(_0x1298d1);}),tgBot['on'](_0x3c4362(0x127),async _0x35efde=>{const _0x3d44f0=_0x3c4362,_0x30090c=_0x35efde[_0x3d44f0(0x1c9)],_0x3d6f57=_0x35efde[_0x3d44f0(0x1f9)];tgBot['answerCallbackQuery'](_0x35efde['id'])[_0x3d44f0(0x175)](async()=>{const _0x442f7b=_0x3d44f0;devices[_0x414dca]['telegram2FaApproval']={'clientip':_0x5abb92,'timestamp':new Date()['getTime'](),'expiry':_0x30090c},_0x30090c!=_0x442f7b(0x1bc)?(await tgBot[_0x442f7b(0x1d3)](_0x3d6f57['chat']['id'],_0x442f7b(0x1f8),{'parse_mode':_0x442f7b(0x205)})[_0x442f7b(0x1ec)](_0x4627f6=>{telegramError(_0x4627f6);}),io['to'](_0x414dca)['emit'](_0x442f7b(0x1c4),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x442f7b(0x1d3)](_0x3d6f57[_0x442f7b(0x187)]['id'],'Login\x20rejected')[_0x442f7b(0x1ec)](_0x4c264d=>{telegramError(_0x4c264d);}),io['to'](_0x414dca)[_0x442f7b(0x139)](_0x442f7b(0x1c4),{'access':{'allow':![],'reason':_0x442f7b(0x12e),'token':null}}));}),tgBot[_0x3d44f0(0x12d)](_0x3d44f0(0x127));}));}function getConfiguration(){const _0x4dbd5e=_0x52d4ed;return dbConfig[_0x4dbd5e(0x119)]('bots')[_0x4dbd5e(0x12f)](_0x4dbd5e(0x157))[_0x4dbd5e(0x1cd)]()||[];}function getEnabledBots(){const _0x2f09a8=_0x52d4ed;return dbConfig[_0x2f09a8(0x119)](_0x2f09a8(0x160))[_0x2f09a8(0x12f)](_0x2f09a8(0x157))['filter']({'status':_0x2f09a8(0x204)})['value']()||[];}function getDisabledBots(){const _0x29011d=_0x52d4ed;return dbConfig[_0x29011d(0x119)]('bots')[_0x29011d(0x12f)]('botID')[_0x29011d(0x177)]({'status':_0x29011d(0x166)})[_0x29011d(0x1cd)]()||[];}function getSettings(){const _0x31b415=_0x52d4ed;return dbSettings[_0x31b415(0x119)](_0x31b415(0x20d))[_0x31b415(0x1cd)]()||{'timeshift':0x0};}function getSecure(){const _0x5b7a2d=_0x52d4ed;return dbSecure[_0x5b7a2d(0x119)](_0x5b7a2d(0x23f))[_0x5b7a2d(0x1cd)]()||{};}function getBlacklist(){const _0x25dcf1=_0x52d4ed;return dbSecure[_0x25dcf1(0x119)]('blacklist')[_0x25dcf1(0x1cd)]()||[];}function broadcastToBots(_0x487f32,_0x525683){const _0x517476=_0x52d4ed;config[_0x517476(0x14f)](_0x101bcf=>{const _0x30e291=_0x517476;if(_0x101bcf[_0x30e291(0x1c4)]==_0x30e291(0x204)&&_0x101bcf[_0x30e291(0x1ab)]==_0x30e291(0x189)){if(pid[_0x101bcf['botID']])pid[_0x101bcf[_0x30e291(0x157)]][_0x30e291(0x1fa)]({[_0x487f32]:_0x525683});}});}function storeSettings(_0x47b3cb,_0x412655=![]){const _0x190ed4=_0x52d4ed;_0x47b3cb={...settings,..._0x47b3cb};if(_0x412655&&_0x47b3cb[_0x190ed4(0x24e)]!=_0x190ed4(0x167)&&_0x47b3cb[_0x190ed4(0x24e)]!=''){const _0x155253=crypt[_0x190ed4(0x1dc)](secure[_0x190ed4(0x1b4)],_0x47b3cb[_0x190ed4(0x24e)])[_0x190ed4(0x1f9)][_0x190ed4(0x208)]('@')[0x0],_0x4740d8=bcrypt[_0x190ed4(0x122)](_0x155253,saltRounds);_0x47b3cb={..._0x47b3cb,'bbPassword':_0x4740d8};}if(_0x412655&&_0x47b3cb[_0x190ed4(0x22a)]!='************'&&_0x47b3cb[_0x190ed4(0x22a)]!=''){const _0x214933=crypt[_0x190ed4(0x1dc)](secure[_0x190ed4(0x1b4)],_0x47b3cb[_0x190ed4(0x22a)])[_0x190ed4(0x1f9)]['split']('@')[0x0];_0x47b3cb={..._0x47b3cb,'telegramToken':_0x214933};}const _0xcae9cf=_0x47b3cb[_0x190ed4(0x22a)]!=_0x190ed4(0x167)&&_0x47b3cb[_0x190ed4(0x22a)]!=settings['telegramToken']||_0x47b3cb[_0x190ed4(0x1e1)]!=settings[_0x190ed4(0x1e1)],_0x39b0e0=_0x47b3cb['telegramToken']==''||_0x47b3cb['telegramUsername']=='';if(_0xcae9cf)_0x47b3cb[_0x190ed4(0x14d)]=_0x190ed4(0x202);for(const [_0x579cca,_0x5ce0e7]of Object[_0x190ed4(0x1cc)](_0x47b3cb)){if(_0x579cca=='telegramToken'&&_0x5ce0e7==_0x190ed4(0x167)){_0x47b3cb[_0x190ed4(0x22a)]=settings[_0x190ed4(0x22a)];continue;};if(_0x579cca=='bbPassword'&&_0x5ce0e7==_0x190ed4(0x167)){_0x47b3cb['bbPassword']=settings['bbPassword'];continue;};dbSettings['set']('settings.'+_0x579cca,_0x5ce0e7)['write']();}settings=_0x47b3cb,io['to'](_0x190ed4(0x162))['emit'](_0x190ed4(0x20d),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0xcae9cf&&!_0x39b0e0)initTelegram();if(_0xcae9cf&&_0x39b0e0)disableTelegram();getAllClients()[_0x190ed4(0x14f)](_0x17e09e=>{const _0x26aa1a=_0x190ed4;getSocket(_0x17e09e['id'])[_0x26aa1a(0x139)](_0x26aa1a(0x1c4),{'access':{'allow':![],'reason':_0x26aa1a(0x193),'token':null}});});}function updateSetting(_0x1581ac,_0x2af4d3){const _0x1dcca7=_0x52d4ed;dbSettings['set'](_0x1dcca7(0x165)+_0x1581ac,_0x2af4d3)[_0x1dcca7(0x1b1)](),settings=getSettings(),io['to'](_0x1dcca7(0x162))[_0x1dcca7(0x139)](_0x1dcca7(0x20d),cleanSettings());}function storeSecure(_0x32e33c){const _0x526d54=_0x52d4ed;dbSecure[_0x526d54(0x119)](_0x526d54(0x23f))[_0x526d54(0x123)](_0x32e33c)[_0x526d54(0x1b1)](),secure=_0x32e33c;}function addBlacklist(_0x398bc4){const _0x534b2e=_0x52d4ed;cleanBlacklist();let _0x5bd774;devices[_0x398bc4][_0x534b2e(0x17b)]?_0x5bd774=Math[_0x534b2e(0x1b5)](devices[_0x398bc4][_0x534b2e(0x17b)][_0x534b2e(0x240)],loginExpiry):_0x5bd774=loginExpiry,dbSecure[_0x534b2e(0x119)](_0x534b2e(0x13f))[_0x534b2e(0x123)]({'expiry':new Date()[_0x534b2e(0x1ca)]()+_0x5bd774*0x3c*0x3e8,'token':devices[_0x398bc4][_0x534b2e(0x18f)][_0x534b2e(0x18a)]})[_0x534b2e(0x1b1)](),blacklist=dbSecure['get'](_0x534b2e(0x13f))['value']();}function cleanBlacklist(){const _0xf1a9a7=_0x52d4ed;let _0x368559=dbSecure[_0xf1a9a7(0x119)](_0xf1a9a7(0x13f))[_0xf1a9a7(0x178)]()[_0xf1a9a7(0x1cd)](),_0x5317e4=new Date()[_0xf1a9a7(0x1ca)]();_0x368559[_0xf1a9a7(0x14f)](_0x4e70eb=>{const _0x448111=_0xf1a9a7;_0x4e70eb[_0x448111(0x240)]<_0x5317e4&&dbSecure['get'](_0x448111(0x13f))[_0x448111(0x1ce)]({'expiry':_0x4e70eb[_0x448111(0x240)]})[_0x448111(0x1b1)]();});}function initStates(){const _0x3a1e8b=_0x52d4ed;let _0xbccc39=getConfiguration();_0xbccc39[_0x3a1e8b(0x14f)](_0x545f90=>{const _0x421c59=_0x3a1e8b;_0x545f90[_0x421c59(0x1ab)]=_0x421c59(0x228);}),storeConfiguration(_0xbccc39);}function onKeys(){const _0x233520=new RSA();return new Promise(_0x4813de=>{const _0x4b87d7=_0x4140;_0x233520[_0x4b87d7(0x14c)]()[_0x4b87d7(0x175)](_0x4b36e1=>{_0x4813de(_0x4b36e1);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1651e7=_0x52d4ed;let _0xe6d513=getConfiguration(),_0x11ca53=![];_0xe6d513['forEach'](_0x36bc2b=>{const _0x456a8a=_0x4140;if(_0x36bc2b[_0x456a8a(0x1c4)]==_0x456a8a(0x189))_0x36bc2b[_0x456a8a(0x1c4)]=_0x456a8a(0x204),_0x11ca53=!![];else _0x36bc2b['status']==_0x456a8a(0x228)&&(_0x36bc2b['status']='disabled',_0x11ca53=!![]);});if(_0x11ca53)storeConfiguration(_0xe6d513);let _0x51943b=getSecure();if(!_0x51943b[_0x1651e7(0x149)]('secret')){let _0x56f5cb=await generateKeys();_0x51943b[_0x1651e7(0x242)]=_0x56f5cb['publicKey'],_0x51943b[_0x1651e7(0x1b4)]=_0x56f5cb['privateKey'],_0x51943b['secret']=crypto[_0x1651e7(0x237)](0x20)[_0x1651e7(0x158)](_0x1651e7(0x176));;storeSecure(_0x51943b);}let _0x31ac93=getSettings();_0x11ca53=![];!_0x31ac93['hasOwnProperty'](_0x1651e7(0x1e0))&&(_0x31ac93['loginRequired']=![],_0x31ac93['bbUsername']='',_0x31ac93[_0x1651e7(0x24e)]='',_0x31ac93[_0x1651e7(0x1f2)]=![],_0x11ca53=!![]);!_0x31ac93[_0x1651e7(0x149)]('whitelistEnabled')&&(_0x31ac93[_0x1651e7(0x1f5)]=![],_0x31ac93[_0x1651e7(0x23c)]=[],_0x31ac93[_0x1651e7(0x140)]=![],_0x11ca53=!![]);if(!_0x31ac93[_0x1651e7(0x149)](_0x1651e7(0x232))){if(_0x31ac93[_0x1651e7(0x214)])_0x31ac93[_0x1651e7(0x232)]=!![];else _0x31ac93['telegramEnabled']=![];_0x11ca53=!![];}if(_0x11ca53)storeSettings(_0x31ac93);}function storeConfiguration(_0x785a52){const _0x1a4072=_0x52d4ed;dbConfig[_0x1a4072(0x119)](_0x1a4072(0x160))[_0x1a4072(0x1ce)]()[_0x1a4072(0x1b1)](),dbConfig[_0x1a4072(0x119)](_0x1a4072(0x160))[_0x1a4072(0x123)](..._0x785a52)['write'](),config=_0x785a52;}function resetPassword(){const _0x466f42=_0x52d4ed;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0x466f42(0x1d3)](settings[_0x466f42(0x214)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x466f42(0x205),'reply_markup':{'inline_keyboard':[[{'text':_0x466f42(0x203),'callback_data':_0x466f42(0x203)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1d1c31=>{telegramError(_0x1d1c31);}),tgBot['on'](_0x466f42(0x127),async _0x564ea1=>{const _0x31a3cf=_0x466f42,_0x56d4aa=_0x564ea1[_0x31a3cf(0x1c9)],_0x2812fb=_0x564ea1[_0x31a3cf(0x1f9)];tgBot['answerCallbackQuery'](_0x564ea1['id'])[_0x31a3cf(0x175)](async()=>{const _0x4dcd2a=_0x31a3cf;if(_0x56d4aa!='no'){const _0x384d4c=0xf,_0x5f184a=_0x4dcd2a(0x199),_0x338700=Array['from'](crypto[_0x4dcd2a(0x260)](new Uint32Array(_0x384d4c)))[_0x4dcd2a(0x1bf)](_0x5b864c=>_0x5f184a[_0x5b864c%_0x5f184a['length']])['join'](''),_0x4031ed=bcrypt[_0x4dcd2a(0x122)](_0x338700,saltRounds);storeSettings({'bbPassword':_0x4031ed}),await tgBot[_0x4dcd2a(0x1d3)](_0x2812fb[_0x4dcd2a(0x187)]['id'],_0x4dcd2a(0x1f4)+_0x338700,{'parse_mode':_0x4dcd2a(0x205)})[_0x4dcd2a(0x1ec)](_0x490ec2=>{telegramError(_0x490ec2);});}else await tgBot[_0x4dcd2a(0x1d3)](_0x2812fb['chat']['id'],_0x4dcd2a(0x1a3))[_0x4dcd2a(0x1ec)](_0xe2621b=>{telegramError(_0xe2621b);});}),tgBot[_0x31a3cf(0x12d)](_0x31a3cf(0x127));}));}function logging(_0x233b7d){const _0x494af3=_0x52d4ed;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x233b7d);if(tgBot&&settings[_0x494af3(0x214)]&&settings[_0x494af3(0x14d)]!=_0x494af3(0x21c))tgBot[_0x494af3(0x1d3)](settings[_0x494af3(0x214)],_0x494af3(0x18c)+_0x233b7d)[_0x494af3(0x1ec)](_0x380800=>{telegramError(_0x380800);});}function getServerTime(){const _0x222517=_0x52d4ed,_0x20ff9b=new Date();return _0x20ff9b[_0x222517(0x15e)]()+'/'+(_0x20ff9b[_0x222517(0x1ae)]()+0x1)[_0x222517(0x158)]()[_0x222517(0x1c3)](0x2,'0')+'/'+_0x20ff9b[_0x222517(0x16b)]()[_0x222517(0x158)]()[_0x222517(0x1c3)](0x2,'0')+'\x20'+_0x20ff9b[_0x222517(0x186)]()['toString']()[_0x222517(0x1c3)](0x2,'0')+':'+_0x20ff9b['getMinutes']()[_0x222517(0x158)]()[_0x222517(0x1c3)](0x2,'0')+':'+_0x20ff9b[_0x222517(0x1d6)]()[_0x222517(0x158)]()[_0x222517(0x1c3)](0x2,'0');}function getTimeStamp(){const _0x32079c=_0x52d4ed,_0x3ec2f9=shiftedTime();return _0x3ec2f9['getFullYear']()+'/'+(_0x3ec2f9['getMonth']()+0x1)['toString']()[_0x32079c(0x1c3)](0x2,'0')+'/'+_0x3ec2f9[_0x32079c(0x16b)]()['toString']()[_0x32079c(0x1c3)](0x2,'0')+'\x20'+_0x3ec2f9[_0x32079c(0x186)]()[_0x32079c(0x158)]()[_0x32079c(0x1c3)](0x2,'0')+':'+_0x3ec2f9[_0x32079c(0x1b3)]()[_0x32079c(0x158)]()[_0x32079c(0x1c3)](0x2,'0')+':'+_0x3ec2f9[_0x32079c(0x1d6)]()[_0x32079c(0x158)]()[_0x32079c(0x1c3)](0x2,'0');}function shiftedTime(){const _0x7ca732=_0x52d4ed,_0x498041=new Date();let _0x2f8936=_0x498041;if(settings[_0x7ca732(0x20a)]&&settings[_0x7ca732(0x20a)]!==0x0)_0x2f8936=fns[_0x7ca732(0x155)](_0x498041,{'hours':settings['timeshift']});return _0x2f8936;}function startScheduler(){const _0x1883f4=_0x52d4ed;let _0x507def=new Date()[_0x1883f4(0x120)]();_0x507def==0x1&&backupConfigFiles();_0x507def==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x412372=_0x52d4ed;fs[_0x412372(0x1cb)](configpath,{'withFileTypes':!![]})[_0x412372(0x14f)](_0x294525=>{const _0x2d3edc=_0x412372;if(!_0x294525[_0x2d3edc(0x1fc)]())fs[_0x2d3edc(0x148)](configpath+_0x294525[_0x2d3edc(0x247)],configbackuppath+_0x294525[_0x2d3edc(0x247)]);});}function triggerAnalytics(){analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function _0x4140(_0x2ab02d,_0x6d208f){const _0x176cdb=_0x31be();return _0x4140=function(_0x537a09,_0x3140b0){_0x537a09=_0x537a09-0x115;let _0x31bec4=_0x176cdb[_0x537a09];return _0x31bec4;},_0x4140(_0x2ab02d,_0x6d208f);}function validateCredentials(_0x2ce35e,_0x17055d){const _0x5db15a=_0x52d4ed;if(_0x2ce35e[_0x5db15a(0x1ed)]==settings[_0x5db15a(0x133)]&&bcrypt[_0x5db15a(0x184)](_0x2ce35e[_0x5db15a(0x192)],settings[_0x5db15a(0x24e)])){if(settings[_0x5db15a(0x1f2)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x55ac55=generateLoginToken(_0x17055d);return{'allow':!![],'reason':_0x5db15a(0x24d),'token':_0x55ac55};}}else return{'allow':![],'reason':_0x5db15a(0x1d2),'token':null};}function refreshToken(_0x29d557){const _0x4eb3c8=generateLoginToken(_0x29d557);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x4eb3c8};}function validateAccess(_0x1ae4df,_0x2512c1){const _0x28e389=_0x52d4ed;let _0x562d26=devices[_0x2512c1]['ip'],_0x1e7ecc;const _0x4114ab=_0x220be7=>{const _0x842396=_0x4140;if(settings[_0x842396(0x1e0)]){if(settings[_0x842396(0x1f2)]){if(telegram2FaApproved(_0x2512c1)){const _0x174bd8=generateLoginToken(_0x2512c1);return{'allow':!![],'reason':_0x842396(0x15d),'token':_0x174bd8};}else return{'allow':![],'reason':_0x842396(0x207),'token':null};}else return _0x1e7ecc=validToken(_0x220be7,_0x2512c1),_0x1e7ecc[_0x842396(0x149)](_0x842396(0x1e9))?{'allow':!![],'reason':_0x842396(0x1ea),'token':_0x220be7}:{'allow':![],'reason':_0x842396(0x207),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x28e389(0x1f5)]){let _0x211e42=[...settings[_0x28e389(0x23c)],'::1',_0x28e389(0x13c),_0x28e389(0x252)];if(_0x211e42[_0x28e389(0x200)](_0x562d26))return _0x4114ab(_0x1ae4df);else{_0x1e7ecc=validToken(_0x1ae4df,_0x2512c1);if(_0x1e7ecc[_0x28e389(0x149)](_0x28e389(0x1e9)))return _0x4114ab(_0x1ae4df);else{if(telegramIpApproved(_0x2512c1)){const _0x279798=generateToken(_0x2512c1);return _0x1e7ecc=_0x4114ab(_0x1ae4df),_0x1e7ecc['allow']?{'allow':!![],'reason':_0x28e389(0x132),'token':_0x279798}:_0x1e7ecc;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x28e389(0x21f),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4114ab(_0x1ae4df);}function timelyDecrypt(_0x280068,_0x43c963=!![]){const _0x458b0d=_0x52d4ed;if(_0x280068)try{const _0x5dde56=crypt['decrypt'](secure['privateKey'],_0x280068)[_0x458b0d(0x1f9)],_0x429efa=_0x5dde56[_0x458b0d(0x208)]('@')[0x0],_0x57a7d9=_0x5dde56[_0x458b0d(0x208)]('@')[0x1],_0x5d98b7=new Date()[_0x458b0d(0x1ca)]();if(_0x43c963){if(_0x5d98b7-_0x57a7d9<maxSecretAge*0x3e8)return _0x429efa;else return![];}else return _0x429efa;}catch(_0x9d961c){return![];}else return![];}const validToken=(_0x2c05a6,_0x2ad7a8)=>{const _0x2f503e=_0x52d4ed,_0x56a09b=devices[_0x2ad7a8]['ip'];if(!_0x2c05a6)return{'error':'No\x20authentication\x20token'};for(let _0x97edc8 of blacklist){if(_0x97edc8[_0x2f503e(0x18a)]==_0x2c05a6)return{'error':_0x2f503e(0x1a4)};}let _0x3ad650;try{_0x3ad650=jwt[_0x2f503e(0x221)](_0x2c05a6,secure['secret']+_0x2ad7a8);}catch{return{'error':_0x2f503e(0x21e)};}if(!_0x3ad650[_0x2f503e(0x149)](_0x2f503e(0x1e7))&&!_0x3ad650[_0x2f503e(0x149)]('username')||!_0x3ad650['hasOwnProperty']('exp'))return{'error':_0x2f503e(0x1b2)};if(!_0x3ad650[_0x2f503e(0x149)](_0x2f503e(0x1ed))&&_0x3ad650[_0x2f503e(0x149)]('clientip')){const {clientip:_0x17505d}=_0x3ad650;return _0x56a09b==_0x17505d?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x3ad650[_0x2f503e(0x149)](_0x2f503e(0x1ed))&&_0x3ad650[_0x2f503e(0x149)](_0x2f503e(0x1e7))){const {username:_0x3aec97,clientip:_0x601e11}=_0x3ad650;return settings[_0x2f503e(0x133)]==_0x3aec97&&_0x56a09b==_0x601e11?{'success':_0x2f503e(0x24c)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x1fb560=>{const _0x2ab8e2=_0x52d4ed;if(_0x1fb560){const _0x58c70b=devices[_0x1fb560]['ip'];return jwt[_0x2ab8e2(0x194)]({'username':settings[_0x2ab8e2(0x133)],'clientip':_0x58c70b},secure['secret']+_0x1fb560,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x231af8=>{const _0x2c500f=_0x52d4ed;if(_0x231af8){const _0x101c4d=devices[_0x231af8]['ip'];return jwt[_0x2c500f(0x194)]({'clientip':_0x101c4d},secure[_0x2c500f(0x16e)]+_0x231af8,{'expiresIn':devices[_0x231af8][_0x2c500f(0x17b)][_0x2c500f(0x240)]*0x3c});}else return![];},telegramIpApproved=_0x54fe89=>{const _0x2b7a9a=_0x52d4ed;let _0x4a7184=![];return devices[_0x54fe89][_0x2b7a9a(0x17b)]&&devices[_0x54fe89][_0x2b7a9a(0x17b)][_0x2b7a9a(0x240)]!='reject'&&(_0x4a7184=devices[_0x54fe89]['telegramIpApproval'][_0x2b7a9a(0x1e7)]==devices[_0x54fe89]['ip']&&new Date()[_0x2b7a9a(0x1ca)]()-devices[_0x54fe89][_0x2b7a9a(0x17b)][_0x2b7a9a(0x125)]<devices[_0x54fe89][_0x2b7a9a(0x17b)][_0x2b7a9a(0x240)]*0x3c*0x3e8),_0x4a7184;},telegram2FaApproved=_0x51b239=>{const _0x3a518b=_0x52d4ed;let _0x2ff0b7=![];return devices[_0x51b239][_0x3a518b(0x1f6)]&&devices[_0x51b239]['telegram2FaApproval'][_0x3a518b(0x240)]!=_0x3a518b(0x1bc)&&(_0x2ff0b7=devices[_0x51b239][_0x3a518b(0x1f6)]['clientip']==devices[_0x51b239]['ip']&&new Date()[_0x3a518b(0x1ca)]()-devices[_0x51b239][_0x3a518b(0x1f6)][_0x3a518b(0x125)]<devices[_0x51b239][_0x3a518b(0x1f6)][_0x3a518b(0x240)]*0x3c*0x3e8),_0x2ff0b7;},normalizeIP=_0x1a8d8a=>{const _0x436861=_0x52d4ed;let _0x242f9f=null,_0x1058e0=null;if(ipaddr[_0x436861(0x1c2)](_0x1a8d8a)){const _0x220aa2=ipaddr['parse'](_0x1a8d8a);_0x220aa2[_0x436861(0x17d)]()===_0x436861(0x17c)?(_0x220aa2[_0x436861(0x22c)]()&&(_0x242f9f=_0x220aa2[_0x436861(0x161)]()[_0x436861(0x158)]()),_0x1058e0=_0x220aa2['toString']()):(_0x242f9f=_0x220aa2[_0x436861(0x158)](),_0x1058e0=_0x220aa2[_0x436861(0x1d1)]()[_0x436861(0x158)]());}return{'show':_0x242f9f?_0x242f9f:_0x1058e0,'store':_0x1058e0};};