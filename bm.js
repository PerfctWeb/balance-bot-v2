const _0x2d2884=_0x1b2e;(function(_0x4353e3,_0x751bd6){const _0x50c01c=_0x1b2e,_0x3ee3c0=_0x4353e3();while(!![]){try{const _0x7b7011=parseInt(_0x50c01c(0x195))/0x1+-parseInt(_0x50c01c(0x119))/0x2*(parseInt(_0x50c01c(0x19c))/0x3)+-parseInt(_0x50c01c(0x1ef))/0x4+parseInt(_0x50c01c(0x265))/0x5+-parseInt(_0x50c01c(0x1ff))/0x6*(parseInt(_0x50c01c(0x1e7))/0x7)+parseInt(_0x50c01c(0x120))/0x8*(-parseInt(_0x50c01c(0x18a))/0x9)+-parseInt(_0x50c01c(0x163))/0xa*(-parseInt(_0x50c01c(0xba))/0xb);if(_0x7b7011===_0x751bd6)break;else _0x3ee3c0['push'](_0x3ee3c0['shift']());}catch(_0x12fd50){_0x3ee3c0['push'](_0x3ee3c0['shift']());}}}(_0x52ae,0xc90a0));const _0x23e1d7=function(){let _0x243a46=!![];return function(_0x36080c,_0x4c82cd){const _0x5d72ca=_0x243a46?function(){if(_0x4c82cd){const _0x39bfea=_0x4c82cd['apply'](_0x36080c,arguments);return _0x4c82cd=null,_0x39bfea;}}:function(){};return _0x243a46=![],_0x5d72ca;};}(),_0x273a21=_0x23e1d7(this,function(){const _0x377b02=_0x1b2e;return _0x273a21[_0x377b02(0x1b5)]()['search'](_0x377b02(0x1cb))[_0x377b02(0x1b5)]()[_0x377b02(0xce)](_0x273a21)[_0x377b02(0x135)]('(((.+)+)+)+$');});_0x273a21();'use strict';process['env'][_0x2d2884(0x1e9)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x2d2884(0xc8)),low=require(_0x2d2884(0x29e)),FileSync=require(_0x2d2884(0x1dd)),path=require(_0x2d2884(0x240)),crypto=require(_0x2d2884(0xf0)),Crypt=require(_0x2d2884(0x299))[_0x2d2884(0x10a)],RSA=require(_0x2d2884(0x299))[_0x2d2884(0x199)],bcrypt=require(_0x2d2884(0x19a)),jwt=require(_0x2d2884(0x1a3)),ipaddr=require(_0x2d2884(0x21a)),argv=require(_0x2d2884(0x29d))(process[_0x2d2884(0x1f0)][_0x2d2884(0xf4)](0x2))[_0x2d2884(0x1f0)],uuidRandom=require(_0x2d2884(0x12b)),TelegramBot=require(_0x2d2884(0x21e)),Mixpanel=require(_0x2d2884(0x22c)),axios=require(_0x2d2884(0x279)),{GraphQLClient,gql}=require(_0x2d2884(0x15f)),util=require(_0x2d2884(0x136)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x2d2884(0x226)]||_0x2d2884(0x103),pattern=/^[0-9]{2,4}$/;!pattern[_0x2d2884(0x250)](PORT)&&(console[_0x2d2884(0x2a3)](_0x2d2884(0xf5)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x2d2884(0x25a)](0x1));const HOST=argv[_0x2d2884(0x14b)]||null,userID=argv[_0x2d2884(0x1ca)]||'',debugging=argv['d']||![],nodeversion=process[_0x2d2884(0x267)][_0x2d2884(0x19b)],environment=require(_0x2d2884(0x248))[_0x2d2884(0x186)]||_0x2d2884(0x24d);let bbpath='bb/',bbpath2='';const botfile=_0x2d2884(0x289),configfile='bb-config.json',settingsfile=_0x2d2884(0x2a7),securefile=_0x2d2884(0x17e),maxBackups=0xa;let validInstallation=!![];!fs[_0x2d2884(0x174)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2d2884(0x13f)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x2d2884(0x211),configbackuppath=configpath+_0x2d2884(0x100),logspath=userID?bbpath+_0x2d2884(0xd0)+userID+'/':bbpath+_0x2d2884(0xd0),zippath=userID?bbpath+_0x2d2884(0x142)+userID+'/':bbpath+_0x2d2884(0x142),loggerfile=fs[_0x2d2884(0x27f)](logspath+_0x2d2884(0x1cd),{'flags':'a'}),temppath=userID?bbpath+_0x2d2884(0xf1)+userID+'/':bbpath+_0x2d2884(0xf1);!fs[_0x2d2884(0x174)](configpath)&&fs[_0x2d2884(0x1c7)](configpath);!fs[_0x2d2884(0x174)](configbackuppath)&&fs[_0x2d2884(0x1c7)](configbackuppath);!fs[_0x2d2884(0x174)](logspath)&&fs[_0x2d2884(0x1c7)](logspath);!fs[_0x2d2884(0x174)](zippath)&&fs[_0x2d2884(0x1c7)](zippath);!fs[_0x2d2884(0x174)](temppath)&&fs[_0x2d2884(0x1c7)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2d2884(0x1cc)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2d2884(0x27d),'onepagemode':![]}})[_0x2d2884(0x291)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2d2884(0x1cc)]({'secure':{},'blacklist':[]})[_0x2d2884(0x291)]();let crypt=new Crypt({'md':_0x2d2884(0x2a4),'rsaStandard':_0x2d2884(0x264)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x2d2884(0x288),{'host':_0x2d2884(0x20e)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2d2884(0x1f8)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x233467,_0x25b1df)=>{const _0x42d6e0=_0x2d2884,_0x1d4c0d=/#[A-Z]{3}#/g;if(typeof _0x233467==_0x42d6e0(0x1c4)){!_0x25b1df?_0x233467=_0x233467[_0x42d6e0(0xf9)](_0x1d4c0d,''):(_0x233467=_0x233467['replace'](/#BLU#/g,'\x1b[34m'),_0x233467=_0x233467['replace'](/#RED#/g,_0x42d6e0(0x11e)),_0x233467=_0x233467[_0x42d6e0(0xf9)](/#YEL#/g,_0x42d6e0(0x128)),_0x233467=_0x233467['replace'](/#MAG#/g,_0x42d6e0(0xd9)),_0x233467=_0x233467[_0x42d6e0(0xf9)](/#CYA#/g,_0x42d6e0(0x276)),_0x233467=_0x233467[_0x42d6e0(0xf9)](/#RES#/g,_0x42d6e0(0x20c)));;}return _0x233467;},logger={'screen':_0xfd0393=>{const _0x52cbff=_0x2d2884;console[_0x52cbff(0x2a3)](parseColor(_0xfd0393,!![]));},'simple':_0x2efe29=>{const _0x5122f3=_0x2d2884;console['log'](parseColor(_0x2efe29,!![])),loggerfile['write'](util[_0x5122f3(0x273)](parseColor(_0x2efe29,![]))+'\x0a');},'full':async _0x448897=>{const _0x3491b3=_0x2d2884,_0x1a6de1=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x448897;console[_0x3491b3(0x2a3)](parseColor(_0x1a6de1,!![])),loggerfile[_0x3491b3(0x291)](util[_0x3491b3(0x273)](parseColor(_0x1a6de1,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x3491b3(0x241)]!=_0x3491b3(0x20f))await tgBot[_0x3491b3(0x294)](settings[_0x3491b3(0x1b0)],_0x3491b3(0x29a)+parseColor(_0x448897,![]))[_0x3491b3(0x286)](_0x5b0897=>{telegramError(_0x5b0897);});},'debug':async(_0x4176c0,_0x459ac4='')=>{const _0x383403=_0x2d2884,_0x3a5de8=getTimeStamp()+_0x383403(0x23c)+_0x4176c0;if(debugging)console[_0x383403(0x2a3)](parseColor(_0x3a5de8,!![]));loggerfile[_0x383403(0x291)](util['format'](parseColor(_0x3a5de8,![]))+'\x0a');if(_0x459ac4){if(debugging)console[_0x383403(0x2a3)](_0x459ac4);loggerfile[_0x383403(0x291)](util[_0x383403(0x273)](_0x459ac4)+'\x0a');}}};process['on'](_0x2d2884(0x11a),function(_0x406cd2){const _0x1afafb=_0x2d2884;logger[_0x1afafb(0x256)](_0x406cd2);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2d2884(0x1c0))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2d2884(0x284)),app=express(),http=require(_0x2d2884(0x204))['createServer'](app);app[_0x2d2884(0x261)](fileUpload({'useTempFiles':!![]})),app[_0x2d2884(0x243)](_0x2d2884(0xca),async(_0x5c2e79,_0x4892c0)=>{const _0x55c8b3=_0x2d2884,_0x36349d=_0x5c2e79[_0x55c8b3(0x258)][_0x55c8b3(0x156)],_0x34d82d=getClientsWithBotID('botmanager'),_0x4f4f1a=_0x5c2e79[_0x55c8b3(0x222)][_0x55c8b3(0x27a)],_0x25798d=timelyDecrypt(_0x4f4f1a,![]),_0xa21039=_0x34d82d[_0x55c8b3(0x266)](_0x154070=>_0x154070['uuid']==_0x25798d);if(_0xa21039){const _0x4de623=normalizeIP(_0x5c2e79[_0x55c8b3(0x150)][_0x55c8b3(0x154)])[_0x55c8b3(0x102)],_0x1a4da3=_0x5c2e79[_0x55c8b3(0x222)][_0x55c8b3(0x1d6)];if(validateAccess(_0x1a4da3,_0x25798d,_0x4de623)['allow'])_0x36349d=='backup'&&await backupConfigFiles(),await zipFiles(_0x36349d),_0x4892c0['download'](zippath+(_0x36349d+_0x55c8b3(0x183)),_0x3d948f=>{const _0x15c59c=_0x55c8b3;_0x3d948f&&(logger['full'](_0x15c59c(0x20b)+_0x36349d),logger[_0x15c59c(0x256)](_0x3d948f));});else logger[_0x55c8b3(0xc9)](_0x55c8b3(0x28a)+_0x36349d+_0x55c8b3(0x109));}else logger['full'](_0x55c8b3(0x28a)+_0x36349d+_0x55c8b3(0x16c));}),app[_0x2d2884(0x14e)](_0x2d2884(0x17a),async(_0x4f3691,_0x332993)=>{const _0x39588f=_0x2d2884,_0x4987c1=getClientsWithBotID(_0x39588f(0xea)),_0x4af65d=_0x4f3691[_0x39588f(0x222)][_0x39588f(0x27a)],_0x75e84a=timelyDecrypt(_0x4af65d,![]),_0x1242c8=_0x4987c1[_0x39588f(0x266)](_0x498687=>_0x498687['uuid']==_0x75e84a);logger[_0x39588f(0x1f5)](_0x39588f(0x132));if(_0x1242c8){const _0x17f361=normalizeIP(_0x4f3691[_0x39588f(0x150)][_0x39588f(0x154)])['store'],_0xffa01b=_0x4f3691[_0x39588f(0x222)][_0x39588f(0x1d6)];if(validateAccess(_0xffa01b,_0x75e84a,_0x17f361)['allow']){if(_0x4f3691['files']){const _0x41b32a=_0x4f3691[_0x39588f(0x1c8)][_0x39588f(0x218)];await _0x41b32a['mv'](temppath+_0x41b32a['name']),_0x332993[_0x39588f(0x15e)]({'status':!![],'message':_0x39588f(0x2a6)});const _0x239643=getBotsWithMode();_0x239643[_0x39588f(0x170)]>0x0?confirmRestore(temppath,_0x41b32a[_0x39588f(0x1fc)]):unzipFile(temppath,_0x41b32a['name']);}}else logger[_0x39588f(0xc9)](_0x39588f(0xbb));}else logger[_0x39588f(0xc9)](_0x39588f(0x202));}),app[_0x2d2884(0x261)](express[_0x2d2884(0x24c)](path[_0x2d2884(0x160)](__dirname,bbpath2,_0x2d2884(0x184)))),app[_0x2d2884(0x261)](express[_0x2d2884(0x24c)](path[_0x2d2884(0x160)](__dirname,bbpath2,'build'))),app[_0x2d2884(0x243)]('/',function(_0x27f10b,_0x44bbb1){const _0x119101=_0x2d2884;_0x44bbb1[_0x119101(0x106)](path[_0x119101(0x160)](__dirname,bbpath2,_0x119101(0x184),_0x119101(0xff)));}),app[_0x2d2884(0x243)](_0x2d2884(0x122),function(_0x45e7c7,_0x476c8a){const _0x224dd4=_0x2d2884;_0x476c8a[_0x224dd4(0x106)](path[_0x224dd4(0x160)](__dirname,bbpath2,_0x224dd4(0x230),_0x224dd4(0xff)));}),app[_0x2d2884(0x243)]('/:bot/portfolio',(_0x5a2d10,_0x4b6cc3)=>{const _0x2068fe=_0x2d2884;_0x4b6cc3[_0x2068fe(0x106)](path['join'](__dirname,bbpath2,_0x2068fe(0x230),_0x2068fe(0xff)));}),app[_0x2d2884(0x243)](_0x2d2884(0x1e0),(_0x45a7fd,_0x3e3eca)=>{const _0x26fd58=_0x2d2884;_0x3e3eca[_0x26fd58(0x106)](path[_0x26fd58(0x160)](__dirname,bbpath2,_0x26fd58(0x230),_0x26fd58(0xff)));}),app[_0x2d2884(0x243)]('/:bot/coins',(_0x1337b9,_0x5754c4)=>{const _0x445f42=_0x2d2884;_0x5754c4[_0x445f42(0x106)](path['join'](__dirname,bbpath2,_0x445f42(0x230),'index.html'));}),app['get'](_0x2d2884(0x1de),(_0x224cd0,_0x165929)=>{const _0x13901e=_0x2d2884;_0x165929[_0x13901e(0x106)](path['join'](__dirname,bbpath2,_0x13901e(0x230),_0x13901e(0xff)));}),app['get'](_0x2d2884(0x22e),(_0x2f521d,_0x298d25)=>{_0x298d25['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x2d2884(0x243)]('/:bot/support',(_0x2d62cb,_0xa3ba2c)=>{const _0x42b355=_0x2d2884;_0xa3ba2c[_0x42b355(0x106)](path[_0x42b355(0x160)](__dirname,bbpath2,_0x42b355(0x230),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x2d2884(0x1e3)](PORT);const io=require(_0x2d2884(0x14a))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x22998d=_0x2d2884;let _0x278ab4=_0x22998d(0x1a8);const _0x4965f5=networkInterfaces(),_0x293e63={};for(const _0x5ca044 of Object['keys'](_0x4965f5)){for(const _0x368d97 of _0x4965f5[_0x5ca044]){if((_0x368d97[_0x22998d(0x282)]==_0x22998d(0x13a)||_0x368d97[_0x22998d(0x282)]==0x4)&&!_0x368d97[_0x22998d(0x1b2)]){const _0x44f076=ipaddr[_0x22998d(0xe2)](_0x368d97[_0x22998d(0x1fa)])[_0x22998d(0xe3)]();_0x44f076!='private'&&(!_0x293e63[_0x5ca044]&&(_0x293e63[_0x5ca044]=[]),_0x293e63[_0x5ca044][_0x22998d(0x25c)](_0x368d97[_0x22998d(0x1fa)]),_0x278ab4=_0x368d97[_0x22998d(0x1fa)]);}}}return{'serverip':_0x278ab4,'netinterfaces':_0x293e63};}async function startServer(){const _0x1a3699=_0x2d2884,{serverip:_0xe57372,netinterfaces:_0x2ba1cf}=getServerIP();logger[_0x1a3699(0x256)](''),logger[_0x1a3699(0x256)]('-----------------------------------------------------------------------------------'),await logger[_0x1a3699(0xc9)](_0x1a3699(0x1e2)+serverversion+_0x1a3699(0x244)+(environment==_0x1a3699(0x1f4)?_0x1a3699(0x26a):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x1a3699(0x272))+(_0x1a3699(0x1df)+_0xe57372+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x1a3699(0x256)](_0x1a3699(0x168));if(config['length']!=0x0)for(const _0x13fd4e of config){if(_0x13fd4e[_0x1a3699(0x245)]==_0x1a3699(0x15c)||_0x13fd4e[_0x1a3699(0x245)]==_0x1a3699(0x1ea))await logger[_0x1a3699(0xc9)](_0x1a3699(0x181)+_0x13fd4e[_0x1a3699(0x28e)]+'\x20|\x20'+_0x13fd4e[_0x1a3699(0x18e)]),startBot([_0x13fd4e['botID'],userID],{'cwd':bbpath},function(_0x4d2f7c){if(_0x4d2f7c)logger['full'](_0x4d2f7c);});else(_0x13fd4e[_0x1a3699(0x245)]=='disabled'||_0x13fd4e[_0x1a3699(0x245)]==_0x1a3699(0x26b))&&await logger[_0x1a3699(0xc9)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x13fd4e['botID']+_0x1a3699(0x290)+_0x13fd4e[_0x1a3699(0x18e)]);}else!newBot&&logger[_0x1a3699(0x256)](_0x1a3699(0x14d));if(newBot)addBot();logger[_0x1a3699(0x256)]('-----------------------------------------------------------------------------------'),logger[_0x1a3699(0x256)](''),await logger['debug'](_0x1a3699(0x12c)+nodeversion),await logger[_0x1a3699(0x1f5)](_0x1a3699(0x271),_0x2ba1cf);}function startSocket(){const _0x3148d3=_0x2d2884;io['on'](_0x3148d3(0x233),_0x1a44ff=>{const _0x5d97e7=_0x3148d3;let _0x2eac61,_0x5dcf36,_0x18e50e,_0x38eb6c,_0x210c08;const _0x46441d=_0x1a44ff[_0x5d97e7(0x17f)][_0x5d97e7(0x222)]['referer'];_0x5dcf36=_0x46441d['match'](/bot[0-9]{3}/);if(_0x5dcf36)_0x18e50e=_0x5dcf36[0x0][_0x5d97e7(0x1a0)](/[0-9]{3}/);if(_0x18e50e)_0x2eac61=_0x18e50e[0x0];else _0x2eac61=_0x5d97e7(0xea);const _0x86f6d7=_0x1a44ff[_0x5d97e7(0x17f)][_0x5d97e7(0x137)][_0x5d97e7(0x1c3)];if(!_0x86f6d7)_0x1a44ff['emit'](_0x5d97e7(0x245),{'publicKey':secure[_0x5d97e7(0x12e)]});else{_0x38eb6c=timelyDecrypt(_0x86f6d7,![]);if(!_0x38eb6c)_0x1a44ff[_0x5d97e7(0x28f)]('status',{'publicKey':secure[_0x5d97e7(0x12e)]});else{_0x210c08=normalizeIP(_0x1a44ff[_0x5d97e7(0xb9)][_0x5d97e7(0x154)])[_0x5d97e7(0x102)];if(!devices[_0x38eb6c])devices[_0x38eb6c]={'uuid':_0x38eb6c,'access':{'token':null}};devices[_0x38eb6c]['ip']=_0x210c08;const _0x572fea=addClient(_0x1a44ff['id'],_0x38eb6c,_0x2eac61);setAccess(_0x572fea),emitMessages(),_0x1a44ff['on'](_0x5d97e7(0x162),_0x1e67a1=>{const _0x2a9c9b=_0x5d97e7,_0x222953=timelyDecrypt(_0x1e67a1[_0x2a9c9b(0x203)]);if(_0x222953){_0x1e67a1={'username':_0x1e67a1['username'],'password':_0x222953},devices[_0x38eb6c][_0x2a9c9b(0x146)]=validateCredentials(_0x1e67a1,_0x38eb6c);if(devices[_0x38eb6c]['access']['allow']==![]&&devices[_0x38eb6c][_0x2a9c9b(0x146)][_0x2a9c9b(0x22a)]=='2FA\x20login\x20required')_0x1a44ff[_0x2a9c9b(0x28f)](_0x2a9c9b(0x245),{'access':devices[_0x38eb6c][_0x2a9c9b(0x146)]}),loginAccess2FA(_0x38eb6c,_0x210c08);else{if(devices[_0x38eb6c]['access']['allow']==![]&&devices[_0x38eb6c][_0x2a9c9b(0x146)][_0x2a9c9b(0x22a)]==_0x2a9c9b(0xe8))_0x1a44ff[_0x2a9c9b(0x28f)](_0x2a9c9b(0x245),{'access':devices[_0x38eb6c]['access']});else devices[_0x38eb6c][_0x2a9c9b(0x146)][_0x2a9c9b(0x1b8)]&&devices[_0x38eb6c][_0x2a9c9b(0x146)][_0x2a9c9b(0x22a)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x38eb6c)[_0x2a9c9b(0x17d)](_0x205485=>{setAccess(_0x205485);}),logger['debug'](_0x2a9c9b(0x189)+_0x38eb6c[_0x2a9c9b(0xf4)](-0x8)),setTokenRefresh(_0x38eb6c),setSessionTimeout('login',_0x38eb6c));}}else logger[_0x2a9c9b(0xc9)](_0x2a9c9b(0x274));}),_0x1a44ff['on'](_0x5d97e7(0x12f),()=>{resetPassword();}),_0x1a44ff['on']('disconnect',_0x2d4a06=>{removeClient(_0x1a44ff['id']);}),_0x2eac61==_0x5d97e7(0xea)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1644c1){const _0x48d94d=_0x2d2884;if(_0x1644c1!='botmanager'&&config[_0x48d94d(0x153)]!=''){if(pid[_0x1644c1])pid[_0x1644c1][_0x48d94d(0x15e)]({'function':'initclient','args':null});}_0x1644c1!=_0x48d94d(0xea)&&broadcastToBots(_0x48d94d(0x1b1),JSON[_0x48d94d(0x227)](config));}function reloadBotManager(){const _0x417177=_0x2d2884;getClientsWithBotID('botmanager')[_0x417177(0x17d)](_0x86c62b=>{const _0x56df78=_0x417177;getSocket(_0x86c62b['id'])[_0x56df78(0x28f)](_0x56df78(0x245),{'access':{'allow':![],'reason':_0x56df78(0x19e),'token':null}});});}function getSocket(_0x3aa816){const _0x55fe48=_0x2d2884;return io['sockets'][_0x55fe48(0x232)][_0x55fe48(0x243)](_0x3aa816);}function setAccess(_0x11ab22){const _0x1a1637=_0x2d2884,_0x5e725c=getSocket(_0x11ab22['id']),_0x181614=_0x11ab22[_0x1a1637(0x27a)],_0x4d19f7=_0x11ab22[_0x1a1637(0xcd)];devices[_0x181614]['access']=validateAccess(devices[_0x181614][_0x1a1637(0x146)][_0x1a1637(0x1a6)],_0x181614),logger[_0x1a1637(0x1f5)](_0x1a1637(0xdb)+devices[_0x181614]['access'][_0x1a1637(0x22a)]+_0x1a1637(0x159)+_0x11ab22['id']['slice'](-0x8)+_0x1a1637(0x297)+_0x181614['slice'](-0x8)),_0x5e725c['join'](_0x181614);if(devices[_0x181614]['access'][_0x1a1637(0x1b8)]){_0x5e725c['join'](_0x4d19f7);if(_0x4d19f7==_0x1a1637(0xea))initializeSocketBotManager(_0x5e725c);else initializeSocketBot(_0x5e725c);initClient(_0x4d19f7);}devices[_0x181614][_0x1a1637(0x146)]['token']&&devices[_0x181614]['access'][_0x1a1637(0x22a)]==_0x1a1637(0x107)&&setSessionTimeout('2FA',_0x181614),devices[_0x181614][_0x1a1637(0x146)][_0x1a1637(0x1a6)]&&devices[_0x181614][_0x1a1637(0x146)]['reason']==_0x1a1637(0xc0)&&setSessionTimeout(_0x1a1637(0x162),_0x181614),_0x5e725c[_0x1a1637(0x28f)](_0x1a1637(0x245),{'status':_0x11ab22[_0x1a1637(0xd5)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x181614]['access'],'externalip':devices[_0x181614]['ip'],'publicKey':secure[_0x1a1637(0x12e)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x181614][_0x1a1637(0x146)][_0x1a1637(0x1b8)]==![]&&devices[_0x181614][_0x1a1637(0x146)][_0x1a1637(0x22a)]==_0x1a1637(0x25f)&&temporaryAccess2FA(_0x181614,devices[_0x181614]['ip']);}function setSessionTimeout(_0x373af2,_0x5e17b1){const _0x5ea3e4=_0x2d2884;let _0x3da0b6;if(_0x373af2=='login')_0x3da0b6=loginExpiry*0x3c*0x3e8;else _0x3da0b6=devices[_0x5e17b1]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x5ea3e4(0x1a1)]()-devices[_0x5e17b1][_0x5ea3e4(0x126)][_0x5ea3e4(0xfb)]);if(devices[_0x5e17b1][_0x5ea3e4(0x165)])clearTimeout(devices[_0x5e17b1][_0x5ea3e4(0x165)]);devices[_0x5e17b1]['pidExpireLogin']=setTimeout(()=>{const _0x4112dd=_0x5ea3e4;if(devices[_0x5e17b1][_0x4112dd(0x12a)])clearTimeout(devices[_0x5e17b1][_0x4112dd(0x12a)]);removeSocketListeners(_0x5e17b1),addBlacklist(_0x5e17b1),devices[_0x5e17b1][_0x4112dd(0x126)]=null,devices[_0x5e17b1][_0x4112dd(0x208)]=null,devices[_0x5e17b1][_0x4112dd(0x146)][_0x4112dd(0x1a6)]=null,logger[_0x4112dd(0x1f5)](_0x4112dd(0x18d)+_0x5e17b1[_0x4112dd(0xf4)](-0x8)),devices[_0x5e17b1][_0x4112dd(0x146)]=validateAccess(devices[_0x5e17b1][_0x4112dd(0x146)][_0x4112dd(0x1a6)],_0x5e17b1),!(devices[_0x5e17b1][_0x4112dd(0x146)]['allow']&&devices[_0x5e17b1][_0x4112dd(0x146)][_0x4112dd(0x22a)]=='login\x20not\x20required')&&(_0x373af2==_0x4112dd(0x162)?io['to'](_0x5e17b1)['emit'](_0x4112dd(0x245),{'access':{'allow':![],'reason':_0x4112dd(0x123),'token':null}}):io['to'](_0x5e17b1)[_0x4112dd(0x28f)](_0x4112dd(0x245),{'access':{'allow':![],'reason':_0x4112dd(0x111),'token':null}})),devices[_0x5e17b1][_0x4112dd(0x146)]['token']=null;},_0x3da0b6);}function setTokenRefresh(_0x21e9ff){const _0x1fbd75=_0x2d2884;if(devices[_0x21e9ff][_0x1fbd75(0x12a)])clearTimeout(devices[_0x21e9ff][_0x1fbd75(0x12a)]);devices[_0x21e9ff][_0x1fbd75(0x12a)]=setTimeout(()=>{const _0x180dde=_0x1fbd75;getClientsWithUuid(_0x21e9ff)[_0x180dde(0x170)]!=0x0?(devices[_0x21e9ff]['access']=refreshToken(_0x21e9ff),io['to'](_0x21e9ff)[_0x180dde(0x28f)]('status',{'status':_0x180dde(0x1b7),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x21e9ff]['access'],'externalip':devices[_0x21e9ff]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x21e9ff)):clearTimeout(devices[_0x21e9ff]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4ef4d2){const _0x50660e=_0x2d2884,_0x5d7907=getClient(_0x4ef4d2['id'])['uuid'];_0x4ef4d2['emit'](_0x50660e(0x1b1),config),_0x4ef4d2[_0x50660e(0x28f)]('settings',cleanSettings()),_0x4ef4d2['on']('add-bot',_0x5da329=>{const _0x5776f3=_0x50660e;if(validateAccess(_0x5da329,_0x5d7907)[_0x5776f3(0x1b8)])addBot();else logger[_0x5776f3(0xc9)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x4ef4d2['on'](_0x50660e(0x1f6),(_0x5adec5,_0x4099d9)=>{const _0x13ee0b=_0x50660e;if(validateAccess(_0x4099d9,_0x5d7907)[_0x13ee0b(0x1b8)])toggleBot(_0x5adec5[_0x13ee0b(0x28e)],_0x5adec5[_0x13ee0b(0x245)],_0x5adec5[_0x13ee0b(0x12d)]);else logger['full'](_0x13ee0b(0x253));}),_0x4ef4d2['on'](_0x50660e(0x108),(_0x2113be,_0x57df6c)=>{const _0x5a059a=_0x50660e;if(validateAccess(_0x57df6c,_0x5d7907)[_0x5a059a(0x1b8)])toggleBotMode(_0x2113be);else logger[_0x5a059a(0xc9)](_0x5a059a(0x253));}),_0x4ef4d2['on'](_0x50660e(0x118),(_0x15e545,_0x41af80)=>{const _0x1640cf=_0x50660e;if(validateAccess(_0x41af80,_0x5d7907)['allow'])deleteBot(_0x15e545);else logger[_0x1640cf(0xc9)](_0x1640cf(0x25e));}),_0x4ef4d2['on'](_0x50660e(0x13d),(_0xf70d8d,_0x2723b0)=>{const _0x283c16=_0x50660e;if(validateAccess(_0x2723b0,_0x5d7907)[_0x283c16(0x1b8)])storeSettings(_0xf70d8d,!![]);else logger[_0x283c16(0xc9)](_0x283c16(0x11f));}),_0x4ef4d2['on'](_0x50660e(0x191),_0x314a71=>{const _0xc62810=_0x50660e;if(validateAccess(_0x314a71,_0x5d7907)[_0xc62810(0x1b8)])updateBB(_0xc62810(0xec));else logger['full'](_0xc62810(0x124));}),_0x4ef4d2['on'](_0x50660e(0x209),_0xeb93d3=>{const _0x3239ba=_0x50660e;if(validateAccess(_0xeb93d3,_0x5d7907)['allow'])updateBB('reinstall');else logger[_0x3239ba(0xc9)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x4ef4d2['on'](_0x50660e(0x147),_0x4de322=>{const _0x5303fd=_0x50660e;if(validateAccess(_0x4de322,_0x5d7907)[_0x5303fd(0x1b8)]){const _0x98a8df=getClient(_0x4ef4d2['id']);if(_0x98a8df)getBackupFiles(_0x98a8df[_0x5303fd(0x27a)]);else logger[_0x5303fd(0xc9)](_0x5303fd(0x1ec));}else logger['full'](_0x5303fd(0x20d));}),_0x4ef4d2['on'](_0x50660e(0xe9),(_0x40fbc3,_0xaf9d05)=>{const _0x31d02b=_0x50660e;if(validateAccess(_0xaf9d05,_0x5d7907)[_0x31d02b(0x1b8)])restoreBackupFile(_0x40fbc3);else logger['full'](_0x31d02b(0xd1));}),_0x4ef4d2['on'](_0x50660e(0x164),_0x4e3587=>{const _0x40d67e=_0x50660e;if(validateAccess(_0x4e3587,_0x5d7907)[_0x40d67e(0x1b8)])getMessages();else logger[_0x40d67e(0xc9)](_0x40d67e(0x22b));}),_0x4ef4d2['on'](_0x50660e(0x1c6),(_0x849e35,_0x478c90)=>{const _0x52771d=_0x50660e;if(validateAccess(_0x478c90,_0x5d7907)[_0x52771d(0x1b8)])confirmMessage(_0x849e35);else logger[_0x52771d(0xc9)](_0x52771d(0x1b9));}),_0x4ef4d2['on'](_0x50660e(0x155),_0x4f5e14=>{const _0x3a643a=_0x50660e;if(validateAccess(_0x4f5e14,_0x5d7907)[_0x3a643a(0x1b8)]){if(devices[_0x5d7907][_0x3a643a(0x12a)])clearTimeout(devices[_0x5d7907]['pidRefreshToken']);if(devices[_0x5d7907][_0x3a643a(0x165)])clearTimeout(devices[_0x5d7907]['pidExpireLogin']);removeSocketListeners(getClient(_0x4ef4d2['id'])[_0x3a643a(0x27a)]),addBlacklist(_0x5d7907),devices[_0x5d7907][_0x3a643a(0x126)]=null,devices[_0x5d7907][_0x3a643a(0x208)]=null,devices[_0x5d7907][_0x3a643a(0x146)][_0x3a643a(0x1a6)]=null,logger[_0x3a643a(0x1f5)]('Logged\x20out\x20user\x20...'+_0x5d7907[_0x3a643a(0xf4)](-0x8)),io['to'](getClient(_0x4ef4d2['id'])[_0x3a643a(0x27a)])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x3a643a(0xc9)](_0x3a643a(0x1ab));});}function initializeSocketBot(_0x41f47c){const _0x267ee8=_0x2d2884,_0xb75291=getClient(_0x41f47c['id'])[_0x267ee8(0xcd)],_0x45e50c=getClient(_0x41f47c['id'])['uuid'];_0x41f47c['on'](_0x267ee8(0x114),(_0x479ece,_0x1496db)=>{const _0x1e5d30=_0x267ee8;if(validateAccess(_0x1496db,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291][_0x1e5d30(0x15e)]({'function':_0x1e5d30(0x167),'args':_0x479ece});}else logger['full'](_0x1e5d30(0x22d));}),_0x41f47c['on'](_0x267ee8(0x145),(_0x2a526f,_0xfc9e53)=>{const _0x47ce42=_0x267ee8;if(validateAccess(_0xfc9e53,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291][_0x47ce42(0x15e)]({'function':'deleteHistoryAlerts','args':_0x2a526f});}else logger['full'](_0x47ce42(0xc3));}),_0x41f47c['on']('get-portfolio',(_0x333dc9,_0x1113ec)=>{const _0x33d3c4=_0x267ee8;if(validateAccess(_0x1113ec,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291][_0x33d3c4(0x15e)]({'function':_0x33d3c4(0xd7),'args':_0x333dc9});}else logger['full'](_0x33d3c4(0x231));}),_0x41f47c['on'](_0x267ee8(0x179),(_0x497994,_0x14d509)=>{const _0x53d88a=_0x267ee8;if(validateAccess(_0x14d509,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291][_0x53d88a(0x15e)]({'function':_0x53d88a(0x192),'args':_0x497994});}else logger[_0x53d88a(0xc9)](_0x53d88a(0xf2));}),_0x41f47c['on'](_0x267ee8(0x27e),(_0x3ca0b3,_0x13ba24)=>{const _0x551f40=_0x267ee8;if(validateAccess(_0x13ba24,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291]['send']({'function':_0x551f40(0x277),'args':_0x3ca0b3});}else logger[_0x551f40(0xc9)](_0x551f40(0x138));}),_0x41f47c['on'](_0x267ee8(0x11b),(_0x16d990,_0x455d2b)=>{const _0x15a0bb=_0x267ee8;if(validateAccess(_0x455d2b,_0x45e50c)[_0x15a0bb(0x1b8)]){if(pid[_0xb75291])pid[_0xb75291][_0x15a0bb(0x15e)]({'function':_0x15a0bb(0x29c),'args':_0x16d990});}else logger[_0x15a0bb(0xc9)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x41f47c['on'](_0x267ee8(0x25b),_0x5c7624=>{const _0x84421e=_0x267ee8;if(validateAccess(_0x5c7624,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291]['send']({'function':_0x84421e(0x113),'args':null});}else logger[_0x84421e(0xc9)](_0x84421e(0xe1));}),_0x41f47c['on'](_0x267ee8(0x255),_0x59654a=>{const _0xead666=_0x267ee8;if(validateAccess(_0x59654a,_0x45e50c)[_0xead666(0x1b8)]){if(pid[_0xb75291])pid[_0xb75291][_0xead666(0x15e)]({'function':_0xead666(0x133),'args':null});}else logger['full'](_0xead666(0x19f));}),_0x41f47c['on'](_0x267ee8(0x247),(_0xbeeb19,_0x437d81)=>{const _0x1f96be=_0x267ee8;if(validateAccess(_0x437d81,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291][_0x1f96be(0x15e)]({'function':_0x1f96be(0x275),'args':_0xbeeb19});}else logger[_0x1f96be(0xc9)](_0x1f96be(0x295));}),_0x41f47c['on']('cancel-loading',_0x2463fc=>{const _0x5bc055=_0x267ee8;if(validateAccess(_0x2463fc,_0x45e50c)[_0x5bc055(0x1b8)]){if(pid[_0xb75291])pid[_0xb75291][_0x5bc055(0x15e)]({'function':_0x5bc055(0x16a),'args':null});}else logger[_0x5bc055(0xc9)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x41f47c['on']('show-config',_0x40659c=>{const _0x20ae16=_0x267ee8;if(validateAccess(_0x40659c,_0x45e50c)['allow']){if(pid[_0xb75291])pid[_0xb75291]['send']({'function':'showConfig','args':null});}else logger['full'](_0x20ae16(0x23b));}),_0x41f47c['on'](_0x267ee8(0x191),_0x741eb3=>{const _0xbb20d2=_0x267ee8;if(validateAccess(_0x741eb3,_0x45e50c)[_0xbb20d2(0x1b8)])updateBB('update');else logger[_0xbb20d2(0xc9)](_0xbb20d2(0x124));}),_0x41f47c['on'](_0x267ee8(0x164),_0x96c460=>{const _0x410771=_0x267ee8;if(validateAccess(_0x96c460,_0x45e50c)[_0x410771(0x1b8)])getMessages();else logger[_0x410771(0xc9)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x41f47c['on']('confirm-message',(_0x17ade0,_0x84b829)=>{const _0x5c6616=_0x267ee8;if(validateAccess(_0x84b829,_0x45e50c)['allow'])confirmMessage(_0x17ade0);else logger[_0x5c6616(0xc9)](_0x5c6616(0x1b9));}),_0x41f47c['on'](_0x267ee8(0x155),_0x5a8dd3=>{const _0x10bbf6=_0x267ee8;if(validateAccess(_0x5a8dd3,_0x45e50c)[_0x10bbf6(0x1b8)]){if(devices[_0x45e50c][_0x10bbf6(0x12a)])clearTimeout(devices[_0x45e50c][_0x10bbf6(0x12a)]);if(devices[_0x45e50c][_0x10bbf6(0x165)])clearTimeout(devices[_0x45e50c][_0x10bbf6(0x165)]);removeSocketListeners(getClient(_0x41f47c['id'])[_0x10bbf6(0x27a)]),addBlacklist(_0x45e50c),devices[_0x45e50c]['telegramIpApproval']=null,devices[_0x45e50c][_0x10bbf6(0x208)]=null,devices[_0x45e50c]['access'][_0x10bbf6(0x1a6)]=null,logger['debug'](_0x10bbf6(0x11d)+_0x45e50c[_0x10bbf6(0xf4)](-0x8)),io['to'](getClient(_0x41f47c['id'])[_0x10bbf6(0x27a)])[_0x10bbf6(0x28f)](_0x10bbf6(0x245),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x10bbf6(0xc9)](_0x10bbf6(0x1ab));});}function removeSocketListeners(_0x5b063e){getClientsWithUuid(_0x5b063e)['forEach'](_0x1af920=>{const _0xc923ee=_0x1b2e;getSocket(_0x1af920['id'])[_0xc923ee(0x1aa)]();});}function cleanSettings(){const _0x2d17b7=_0x2d2884;let _0x4fd8a7=settings;return settings[_0x2d17b7(0x1f8)]&&settings[_0x2d17b7(0x1f8)]!=''&&(_0x4fd8a7={..._0x4fd8a7,'telegramToken':'************'}),settings['bbPassword']&&settings[_0x2d17b7(0x22f)]!=''&&(_0x4fd8a7={..._0x4fd8a7,'bbPassword':_0x2d17b7(0x260)}),(settings['bbPassword']&&settings[_0x2d17b7(0x22f)]==_0x2d17b7(0xdc)||settings[_0x2d17b7(0x1f8)]&&settings[_0x2d17b7(0x1f8)]==_0x2d17b7(0xdc))&&(_0x4fd8a7={..._0x4fd8a7,'restored':{'password':settings[_0x2d17b7(0x22f)]==_0x2d17b7(0xdc),'telegram':settings['telegramToken']==_0x2d17b7(0xdc)}}),_0x4fd8a7;}async function updateBB(_0x1f6da3){const _0x4b6cbf=_0x2d2884;await backupConfigFiles(),installingUpdate=!![],config[_0x4b6cbf(0x17d)](_0x570130=>{const _0xd65db=_0x4b6cbf;restartBot(_0x570130[_0xd65db(0x28e)]);});if(_0x1f6da3=='update')process['send']({'update':!![],'environment':environment},_0x211c33=>{});else _0x1f6da3==_0x4b6cbf(0x151)&&process[_0x4b6cbf(0x15e)]({'reinstall':!![],'environment':environment},_0x34349d=>{});}function startBot(_0x1454e1,_0x194145,_0x9c2353){const _0x5b36db=_0x2d2884;if(debugging)_0x1454e1[_0x5b36db(0x25c)]('-d');let _0x51e7fe=![];const _0x181ae9=_0x1454e1[0x0];_0x194145={..._0x194145,'stdio':[_0x5b36db(0xdd),_0x5b36db(0xdd),_0x5b36db(0xdd),_0x5b36db(0x1d8)]},pid[_0x181ae9]=childProcess[_0x5b36db(0x237)](botfile,_0x1454e1,_0x194145),pid[_0x181ae9]['on']('message',_0x3081da=>{const _0x456757=_0x5b36db;switch(Object[_0x456757(0x144)](_0x3081da)[0x0]){case _0x456757(0x18e):updateBotName(_0x181ae9,_0x3081da[_0x456757(0x18e)]);break;case _0x456757(0x173):updateBotManager();break;case'status':updateStatus(_0x181ae9,_0x3081da['status']);break;case _0x456757(0x12d):updateLive(_0x181ae9,_0x3081da[_0x456757(0x12d)]);break;case _0x456757(0x171):updateLive(_0x181ae9,_0x3081da[_0x456757(0x171)]),io['to'](_0x181ae9)[_0x456757(0x28f)](_0x456757(0x245),{'access':{'allow':![],'reason':_0x456757(0x19e),'token':null}});break;case _0x456757(0xda):_0x3081da[_0x456757(0xda)]==_0x456757(0x175)&&restartBot(_0x181ae9);_0x3081da['stop']==_0x456757(0x246)&&toggleBot(_0x181ae9,_0x456757(0xc5),_0x456757(0x242));break;case _0x456757(0x262):sendTelegram(_0x181ae9,_0x3081da[_0x456757(0x262)]);break;case'telegrammsg':sendTelegramMsg(_0x3081da[_0x456757(0x220)]);break;case _0x456757(0x1ad):io['to'](_0x181ae9)['emit'](_0x3081da[_0x456757(0x1ad)],_0x3081da[_0x456757(0x185)]);break;}}),pid[_0x181ae9]['on'](_0x5b36db(0x24b),function(_0x209b17){if(_0x51e7fe)return;_0x51e7fe=!![],_0x9c2353(_0x209b17);}),pid[_0x181ae9]['on'](_0x5b36db(0x25a),async function(_0x5098e2){const _0x3ee19e=_0x5b36db;if(installingUpdate)return;if(_0x51e7fe)return;_0x51e7fe=!![],_0x9c2353(null);const _0x4440e2=dbConfig[_0x3ee19e(0x243)](_0x3ee19e(0x1b1))[_0x3ee19e(0x266)]({'botID':_0x181ae9})[_0x3ee19e(0xf3)]();_0x4440e2&&(_0x4440e2[_0x3ee19e(0x245)]==_0x3ee19e(0x15c)||_0x4440e2[_0x3ee19e(0x245)]==_0x3ee19e(0x1ea))&&(await sleep(0x3e8),updateLive(_0x181ae9,_0x3ee19e(0x242)),logger[_0x3ee19e(0xc9)](_0x3ee19e(0x283)+_0x181ae9),startBot([_0x181ae9,userID],{'cwd':bbpath},function(_0x320347){if(_0x320347)logger['full'](_0x320347);}));});}function stopBot(_0x465eda){const _0x2f5d65=_0x2d2884;getClientsWithBotID(_0x465eda)['forEach'](_0xaf98cf=>{const _0xf0b255=_0x1b2e;getSocket(_0xaf98cf['id'])[_0xf0b255(0x152)](!![]),removeClient(_0xaf98cf['id']);}),pid[_0x465eda]&&(pid[_0x465eda][_0x2f5d65(0x246)](),pid[_0x465eda]=null);}function _0x52ae(){const _0x336b8b=['address','Login\x20rejected','name','copyFileSync','lastmsgemitted','2460VsaXJp','onText','blacklist','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','password','http','bbUsername','Notifications\x20enabled','rmSync','telegram2FaApproval','reinstall-bb','mtime','Failed\x20to\x20download\x20','\x1b[0m','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','api-eu.mixpanel.com','orders','::ffff:127.0.0.1','config/','messages','$1_$2_$3','bbvReceive','Yes','writeFileSync','/help\x20-\x20show\x20available\x20commands\x0a','backupfile','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','ipaddr.js','\x20only\x0a','f2aRequired','username','node-telegram-bot-api','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','telegrammsg','clientip','headers','Restore\x20process\x20aborted','Your\x20installation\x20is\x20already\x20up\x20to\x20date','hasOwnProperty','port','stringify','entries','-results.json','reason','Unauthorized\x20attempt\x20to\x20get\x20messages','mixpanel','Unauthorized\x20attempt\x20to\x20get\x20events','/:bot/configuration','bbPassword','build','Unauthorized\x20attempt\x20to\x20get\x20portfolio','sockets','connection','getFullYear','decrypt','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','fork','latestversion','404\x20Not\x20Found','output-003.log','Unauthorized\x20attempt\x20to\x20show\x20configuration',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','sendMetricsTelegram','track','Ok,\x20will\x20send\x20alert\x20notifications\x20only','path','telegramEvents','stopped','get','#RES#\x20','status','kill','place-order','./version.json','/off\x20-\x20stop\x20bot(s)\x0a','backup-full@','error','static','production','Enabled\x20Bot\x20','isDirectory','test','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','endsWith','Unauthorized\x20attempt\x20to\x20update\x20bot','hashSync','get-starting-balances','simple','login\x20not\x20required','params','HTML','exit','reset-history','push','Starting\x20Balance\x20Bot\x20update','Unauthorized\x20attempt\x20to\x20delete\x20bot','2FA\x20required','************','use','telegram','order','RSA-OAEP','1125400XcZRnU','find','versions','Notifications\x20disabled','<b>Balance\x20Bot\x20Status:</b>\x0a','(staging)','new-disabled','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Token\x20blacklisted','getHours','Network\x20Interfaces:','#RES#\x20if\x20running\x20locally\x0a','format','Unauthorized\x20login\x20attempt\x20(timeout)','placeOrder','\x1b[36m','storeHeadless','backup-full.zip','axios','uuid','127.0.0.1','auto','0.0.0','store-headless','createWriteStream','logs','callback_query','family','Restarting\x20Bot\x20','express','-performance.json','catch','from','6b67f3d61ee94b8f5c80b4affef4c4d9','bot.js','Unauthorized\x20attempt\x20to\x20download\x20','Temporary\x20access\x20rejected','backup','Invalid\x20Telegram\x20token','botID','emit','\x20|\x20','write','sort','Alerts','sendMessage','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','login\x20token\x20valid','\x20|\x20user:\x20...','verify','hybrid-crypto-js','Bot\x20Mgr\x20>\x20','set','storeFiat','yargs/yargs','lowdb','split','whitelistEnabled','backup-files','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','log','sha256','alias','File\x20uploaded','bb-settings.json','\x20mode','conn','2310kJbjTW','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','Invalid\x20authentication\x20token\x20(1)','timeshift','alerts','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','2FA\x20login\x20token\x20generated','30\x20min','bbvNew','Unauthorized\x20attempt\x20to\x20delete\x20alerts','hex','disabled','1000','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','date-fns','full','/download/:type','2FA\x20login\x20rejected','message','bot','constructor','telegramUsername','logs/','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Invalid\x20username\x20or\x20IP\x20address','yes','SIGTERM','server','getMinutes','getPortfolio','notification','\x1b[35m','stop','Setting\x20access:\x20','***','inherit','You\x20can\x20use\x20the\x20following\x20commands:\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','\x20>\x20','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','parse','range','exp','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','::1','getUTCHours','invalid\x20credentials','restore-backup-file','botmanager','sendPortfolioTelegram','update','\x20to\x20','loginRequired','backup-full','crypto','temp/','Unauthorized\x20attempt\x20to\x20store\x20configuration','value','slice','Error:\x20Invalid\x20argument\x20','No\x20bots\x20running\x20right\x20now','\x20minutes','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','replace','/update\x20-\x20update\x20Balance\x20Bot\x0a','timestamp','ipv6','manual','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','index.html','backup/','min','store','3000','https://api.ipify.org?format=json','DEFLATE','sendFile','temporary\x20token\x20generated','toggle-bot-mode','\x20(1)','Crypt','all','privateKey','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','generate','exchange','Invalid\x20authentication\x20token\x20(2)','temporary\x20access\x20timeout','Password\x20reset\x20rejected','resetHistory','get-logs','/disable\x20-\x20disable\x20notifications\x0a','headless','output-001.log','delete-bot','2dBWdon','uncaughtException','store-fiat','Restoring\x20bot(s)\x20from\x20backup','Logged\x20out\x20user\x20...','\x1b[31m','Unauthorized\x20attempt\x20to\x20update\x20settings','233944NoYCDN','toIPv4MappedAddress','/:bot','access\x20timeout','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','reject','telegramIpApproval','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','\x1b[33m','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','pidRefreshToken','uuid-random','Node.js\x20v','live','publicKey','reset-password','assign','readdirSync','Backup\x20file\x20uploaded','getStartingBalances','unlinkSync','search','util','auth','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','lastmsgtelegram','IPv4','</b>\x20?','sortBy','store-settings','getDate','clients','output-000.log','onepagemode','zip/','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','keys','delete-alerts','access','get-backup-files','Starting\x20Balance\x20Bot\x20reinstallation','answerCallbackQuery','socket.io','host','isValid','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','post','-config.json','socket','reinstall','disconnect','apiKey','remoteAddress','logout','type','node-zip','Invalid\x20IP\x20address','\x20|\x20client:\x20...','removeListener','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','enabled','size','send','graphql-request','join','mode','login','154920VzfxGN','get-messages','pidExpireLogin','apiSecret','emitHistory','-----------------------------------------------------------------------------------','/names\x20-\x20show\x20bot\x20names\x0a','cancelLoading','login\x20token\x20generated','\x20(2)','data','remove','Allow\x20login\x20from\x20IP\x20address\x20<b>','length','started','event','updatebotmanager','existsSync','restart','padStart','getMonth','telegramEnabled','store-configuration','/upload-backup','Orders','temporary\x20access\x20not\x20allowed','forEach','bb-secure.json','handshake','request','Starting\x20bot\x20|\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','.zip','build2','args','environment','2FA\x20login\x20required','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Logged\x20in\x20user\x20...','216JgawCZ','Notifications\x20disabled\x0a','then','Session\x20expired\x20for\x20user\x20...','botname','generateKeyPairAsync','settings.','update-bb','storeConfiguration','/restart\x20-\x20restart\x20bot(s)\x0a','settings','1255463erBvNz','secure','binary','Starting\x20new\x20bot\x20|\x20Bot\x20','RSA','bcryptjs','node','1305723ABGzgz','User\x20has\x20been\x20validated','reload','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','match','getTime','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','jsonwebtoken','All\x20bots\x20running\x20right\x20now','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','token','stopPolling','[ip-address]','/on\x20-\x20start\x20bot(s)\x0a','removeAllListeners','Unauthorized\x20attempt\x20to\x20log\x20out','output-002.log','function','All','getSeconds','telegramChatId','bots','internal','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','-events.json','toString','once','connected','allow','Unauthorized\x20attempt\x20to\x20confirm\x20message','readFileSync','max','file','kind','startsWith','_data','version.json','filter','running','encryptedUuid','string','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','confirm-message','mkdirSync','files','includes','user','(((.+)+)+)+$','defaults','/output-000.log','userid','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','number','statSync','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','any','Bot\x20','All\x20bots','tkn','Notifications\x20types:\x20','ipc','apiPassword','Restore\x20backup\x20file\x20','chat','add','lowdb/adapters/FileSync','/:bot/history','=>\x20Go\x20to\x20#CYA#http://','/:bot/performance','title','Starting\x20#RED#Balance\x20Bot\x20v','listen','expiry','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','*$1*','24507kdSLlO','randomBytes','NTBA_FIX_319','new','secret','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','success','show','5351696XzYZpz','argv','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','bot-','Backup\x20file\x20unzipped\x20and\x20stored','staging','debug','update-bot','15\x20min','telegramToken','toIPv4Address'];_0x52ae=function(){return _0x336b8b;};return _0x52ae();}function restartBot(_0x1e9b3a){const _0x5b0cf7=_0x2d2884;if(pid[_0x1e9b3a])pid[_0x1e9b3a][_0x5b0cf7(0x246)]();}function addBot(){const _0x4053b8=_0x2d2884;let _0x1fb42f;for(let _0x14e36c=0x1;_0x14e36c<0x3e9;_0x14e36c++){_0x1fb42f=_0x14e36c[_0x4053b8(0x1b5)]()[_0x4053b8(0x176)](0x3,'0');let _0x277045=config[_0x4053b8(0x266)](_0x200b18=>_0x200b18[_0x4053b8(0x28e)]==_0x1fb42f);if(!_0x277045)break;}if(_0x1fb42f===_0x4053b8(0xc6)){logger['full'](_0x4053b8(0x1b3));return;}logger[_0x4053b8(0xc9)](_0x4053b8(0x198)+_0x1fb42f),dbConfig['get'](_0x4053b8(0x1b1))[_0x4053b8(0x25c)]({'botID':_0x1fb42f,'botname':'Bot\x20'+_0x1fb42f,'status':_0x4053b8(0x1ea),'live':''})[_0x4053b8(0x291)](),startBot([_0x1fb42f,userID],{'cwd':bbpath},function(_0xb51c46){const _0x3a56de=_0x4053b8;if(_0xb51c46)logger[_0x3a56de(0xc9)](_0xb51c46);}),config=getConfiguration(),io['to'](_0x4053b8(0xea))['emit']('bots',config),broadcastToBots(_0x4053b8(0x1b1),JSON['stringify'](config));}function deleteBot(_0x3bd8bd){const _0x16e277=_0x2d2884;getClientsWithBotID(_0x3bd8bd)[_0x16e277(0x17d)](_0xe00819=>{const _0x126b11=_0x16e277;getSocket(_0xe00819['id'])[_0x126b11(0x152)](!![]),removeClient(_0xe00819['id']);}),dbConfig[_0x16e277(0x243)](_0x16e277(0x1b1))[_0x16e277(0x16e)]({'botID':_0x3bd8bd})[_0x16e277(0x291)](),logger[_0x16e277(0xc9)]('Deleted\x20Bot\x20'+_0x3bd8bd),stopBot(_0x3bd8bd);try{if(fs[_0x16e277(0x174)](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+'-config.json')))fs['unlinkSync'](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x14f)));if(fs[_0x16e277(0x174)](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x1b4))))fs[_0x16e277(0x134)](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x1b4)));if(fs['existsSync'](path[_0x16e277(0x160)](configpath,'bot-'+_0x3bd8bd+_0x16e277(0x285))))fs[_0x16e277(0x134)](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x285)));if(fs[_0x16e277(0x174)](path['join'](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x229))))fs[_0x16e277(0x134)](path[_0x16e277(0x160)](configpath,_0x16e277(0x1f2)+_0x3bd8bd+_0x16e277(0x229)));}catch(_0x5e218b){if(_0x5e218b)logger['full']('Error\x20while\x20deleting\x20config\x20files:\x20',_0x5e218b);}config=getConfiguration(),io['to'](_0x16e277(0xea))['emit'](_0x16e277(0x1b1),config),broadcastToBots(_0x16e277(0x1b1),JSON['stringify'](config));}function toggleBot(_0x573008,_0x4141c5,_0x157bdc){const _0x20396e=_0x2d2884;dbConfig['get'](_0x20396e(0x1b1))['find']({'botID':_0x573008})[_0x20396e(0x130)]({'status':_0x4141c5})[_0x20396e(0x130)]({'live':_0x157bdc})[_0x20396e(0x291)]();if(_0x4141c5=='enabled'||_0x4141c5==_0x20396e(0x1ea))logger[_0x20396e(0xc9)](_0x20396e(0x24e)+_0x573008),startBot([_0x573008,userID],{'cwd':bbpath},function(_0x1c5a2c){if(_0x1c5a2c)logger['full'](_0x1c5a2c);});else(_0x4141c5=='disabled'||_0x4141c5==_0x20396e(0x26b))&&(logger[_0x20396e(0xc9)]('Disabled\x20Bot\x20'+_0x573008),stopBot(_0x573008));config=getConfiguration(),io['to']('botmanager')['emit'](_0x20396e(0x1b1),config),broadcastToBots(_0x20396e(0x1b1),JSON[_0x20396e(0x227)](config));}function toggleStatus(_0x3b7655){const _0x2e2275=_0x2d2884;let _0x45da72=dbConfig[_0x2e2275(0x243)]('bots')[_0x2e2275(0x266)]({'botID':_0x3b7655})[_0x2e2275(0xf3)](),_0xac944d;if(_0x45da72[_0x2e2275(0x245)]==='enabled')_0xac944d=_0x2e2275(0xc5);else{if(_0x45da72[_0x2e2275(0x245)]==='new')_0xac944d=_0x2e2275(0x26b);else{if(_0x45da72[_0x2e2275(0x245)]===_0x2e2275(0x26b))_0xac944d=_0x2e2275(0x1ea);else{if(_0x45da72[_0x2e2275(0x245)]===_0x2e2275(0xc5))_0xac944d='enabled';}}}return _0xac944d;}function updateStatus(_0x5b6a6e,_0x94e8f){const _0x2512d0=_0x2d2884;dbConfig[_0x2512d0(0x243)](_0x2512d0(0x1b1))['find']({'botID':_0x5b6a6e})[_0x2512d0(0x130)]({'status':_0x94e8f})[_0x2512d0(0x291)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x2512d0(0x1b1),config),broadcastToBots(_0x2512d0(0x1b1),JSON[_0x2512d0(0x227)](config));}function updateLive(_0x160844,_0x196e28){const _0x2ef015=_0x2d2884;dbConfig[_0x2ef015(0x243)](_0x2ef015(0x1b1))[_0x2ef015(0x266)]({'botID':_0x160844})[_0x2ef015(0x130)]({'live':_0x196e28})[_0x2ef015(0x291)](),config=getConfiguration(),io['to'](_0x2ef015(0xea))[_0x2ef015(0x28f)](_0x2ef015(0x1b1),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x1fe98b,_0x2535bb){const _0x384a17=_0x2d2884;dbConfig[_0x384a17(0x243)]('bots')['find']({'botID':_0x1fe98b})['assign']({'botname':_0x2535bb})['write'](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x384a17(0x1b1),config),broadcastToBots(_0x384a17(0x1b1),JSON[_0x384a17(0x227)](config));}function updateBotManager(){const _0x2fd0b1=_0x2d2884;config=getConfiguration(),io['to'](_0x2fd0b1(0xea))[_0x2fd0b1(0x28f)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0xad5f82){const _0x5a9589=_0x2d2884;if(pid[_0xad5f82])pid[_0xad5f82][_0x5a9589(0x15e)]({'function':'toggleBotMode','args':null});else{const _0x155b69=configpath+_0x5a9589(0x1f2)+_0xad5f82+_0x5a9589(0x14f),_0x413454=fs['readFileSync'](_0x155b69),_0x1b5f31=JSON[_0x5a9589(0xe2)](_0x413454),_0x2a0ed6=_0x1b5f31[_0x5a9589(0xcd)][0x0][_0x5a9589(0x116)];_0x1b5f31[_0x5a9589(0xcd)][0x0][_0x5a9589(0x116)]=!_0x2a0ed6;const _0x28f73b=JSON['stringify'](_0x1b5f31,null,0x2);fs[_0x5a9589(0x216)](_0x155b69,_0x28f73b),config=getConfiguration(),io['to'](_0x5a9589(0xea))[_0x5a9589(0x28f)](_0x5a9589(0x1b1),config),broadcastToBots('bots',JSON[_0x5a9589(0x227)](config));}}function telegramError(_0x4496c9){const _0x569e49=_0x2d2884;logger[_0x569e49(0x256)](getTimeStamp()+_0x569e49(0x182));}function validateTelegram(_0x482726){const _0x2beabb=_0x2d2884;if(_0x482726[_0x2beabb(0x287)][_0x2beabb(0x21d)]!=settings[_0x2beabb(0xcf)]&&'@'+_0x482726['from']['username']!=settings[_0x2beabb(0xcf)])return tgBot[_0x2beabb(0x294)](_0x482726[_0x2beabb(0x1db)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2beabb(0x259)})[_0x2beabb(0x286)](_0x5a0942=>{telegramError(_0x5a0942);}),![];return!![];}async function initTelegram(){const _0x336c98=_0x2d2884;if(tgBot)tgBot[_0x336c98(0x1a7)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x336c98(0x1f8)],{'polling':!![]});let _0x532a33=_0x336c98(0xde);_0x532a33+='\x0a',_0x532a33+='/enable\x20-\x20enable\x20notifications\x0a',_0x532a33+=_0x336c98(0x115),_0x532a33+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x532a33+=_0x336c98(0x193),_0x532a33+=_0x336c98(0x1a9),_0x532a33+=_0x336c98(0x249),_0x532a33+=_0x336c98(0x1d2),_0x532a33+=_0x336c98(0x169),_0x532a33+=_0x336c98(0xdf),_0x532a33+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x532a33+=_0x336c98(0x1a5),_0x532a33+=_0x336c98(0xfa),_0x532a33+=_0x336c98(0x26c),_0x532a33+=_0x336c98(0x217);let _0x3e805d=_0x336c98(0x251);_0x3e805d+='\x0a',_0x3e805d+=_0x532a33,tgBot['onText'](/\/start/,_0x26bf4f=>{const _0x35ff9c=_0x336c98;if(!validateTelegram(_0x26bf4f))return;if(settings['telegramChatId']!=_0x26bf4f['chat']['id'])updateSetting(_0x35ff9c(0x1b0),_0x26bf4f[_0x35ff9c(0x1db)]['id']);updateSetting(_0x35ff9c(0x178),!![]),tgBot['sendMessage'](_0x26bf4f['chat']['id'],_0x3e805d)[_0x35ff9c(0x286)](_0x189a58=>{telegramError(_0x189a58);});}),tgBot[_0x336c98(0x200)](/\/enable/,_0x3dd776=>{const _0x290f9d=_0x336c98;if(!validateTelegram(_0x3dd776))return;if(settings[_0x290f9d(0x1b0)]!=_0x3dd776[_0x290f9d(0x1db)]['id'])updateSetting(_0x290f9d(0x1b0),_0x3dd776['chat']['id']);updateSetting(_0x290f9d(0x178),!![]),tgBot['sendMessage'](_0x3dd776[_0x290f9d(0x1db)]['id'],_0x290f9d(0x206))[_0x290f9d(0x286)](_0x2b902c=>{telegramError(_0x2b902c);});}),tgBot[_0x336c98(0x200)](/\/config/,async _0x19b358=>{const _0x3a8b3f=_0x336c98;if(!validateTelegram(_0x19b358))return;tgBot[_0x3a8b3f(0x15a)]('callback_query'),tgBot[_0x3a8b3f(0x294)](_0x19b358[_0x3a8b3f(0x1db)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x3a8b3f(0x17b),'callback_data':_0x3a8b3f(0x20f)},{'text':_0x3a8b3f(0x293),'callback_data':_0x3a8b3f(0xbe)},{'text':_0x3a8b3f(0x1ae),'callback_data':_0x3a8b3f(0x10b)}]]}})[_0x3a8b3f(0x286)](_0x1b8223=>{telegramError(_0x1b8223);}),tgBot['on'](_0x3a8b3f(0x281),async _0x1aeb51=>{const _0x730373=_0x3a8b3f,_0x35904d=_0x1aeb51['data'],_0x363ad3=_0x1aeb51[_0x730373(0xcc)];tgBot[_0x730373(0x149)](_0x1aeb51['id'])[_0x730373(0x18c)](async()=>{const _0x3b051d=_0x730373;_0x35904d==_0x3b051d(0x20f)&&(updateSetting(_0x3b051d(0x241),'orders'),updateSetting(_0x3b051d(0x178),!![]),await tgBot[_0x3b051d(0x294)](_0x363ad3['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x3b051d(0x286)](_0x2c144d=>{telegramError(_0x2c144d);}));_0x35904d==_0x3b051d(0xbe)&&(updateSetting(_0x3b051d(0x241),_0x3b051d(0xbe)),updateSetting(_0x3b051d(0x178),!![]),await tgBot[_0x3b051d(0x294)](_0x363ad3['chat']['id'],_0x3b051d(0x23f))[_0x3b051d(0x286)](_0x258be5=>{telegramError(_0x258be5);}));_0x35904d==_0x3b051d(0x10b)&&(updateSetting(_0x3b051d(0x241),'all'),updateSetting(_0x3b051d(0x178),!![]),await tgBot['sendMessage'](_0x363ad3[_0x3b051d(0x1db)]['id'],_0x3b051d(0x129))[_0x3b051d(0x286)](_0x179452=>{telegramError(_0x179452);}));if(!settings[_0x3b051d(0x1b0)])tgBot['sendMessage'](_0x363ad3[_0x3b051d(0x1db)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x2c5efd=>{telegramError(_0x2c5efd);});}),tgBot['removeListener'](_0x730373(0x281));});}),tgBot[_0x336c98(0x200)](/\/status/,_0x1e6be0=>{const _0x407ab7=_0x336c98;if(!validateTelegram(_0x1e6be0))return;const _0x2c94dc=getBotsWithMode();let _0x5eef94=_0x407ab7(0x269);config['forEach'](_0x42a8f5=>{const _0xda64d1=_0x407ab7,_0x54f028=_0x2c94dc[_0xda64d1(0x266)](_0x5c6615=>_0x5c6615[_0xda64d1(0x28e)]==_0x42a8f5[_0xda64d1(0x28e)])[_0xda64d1(0x161)];_0x5eef94+=_0xda64d1(0x1d4)+_0x42a8f5[_0xda64d1(0x28e)]+':\x20'+_0x42a8f5[_0xda64d1(0x245)]+_0xda64d1(0x290)+_0x54f028+_0xda64d1(0x290)+_0x42a8f5['live']+'\x0a';}),_0x5eef94+='\x0a',_0x5eef94+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x5eef94+=!settings[_0x407ab7(0x178)]?_0x407ab7(0x18b):'Notifications\x20enabled\x0a',_0x5eef94+=settings[_0x407ab7(0x178)]?settings['telegramEvents']=='all'?_0x407ab7(0x219):_0x407ab7(0x1d7)+settings[_0x407ab7(0x241)]+_0x407ab7(0x21b):'',tgBot[_0x407ab7(0x294)](_0x1e6be0[_0x407ab7(0x1db)]['id'],_0x5eef94,{'parse_mode':'HTML'})[_0x407ab7(0x286)](_0x36fdec=>{telegramError(_0x36fdec);});}),tgBot[_0x336c98(0x200)](/\/restart/,_0x28aae8=>{const _0x20c83b=_0x336c98;if(!validateTelegram(_0x28aae8))return;tgBot[_0x20c83b(0x15a)](_0x20c83b(0x281));const _0x4a2aa4=getEnabledBots();if(_0x4a2aa4[_0x20c83b(0x170)]==0x0)tgBot[_0x20c83b(0x294)](_0x28aae8[_0x20c83b(0x1db)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x20c83b(0x286)](_0x5d42d5=>{telegramError(_0x5d42d5);});else{if(_0x4a2aa4[_0x20c83b(0x170)]>0x1)_0x4a2aa4[_0x20c83b(0x25c)]({'botID':'all'});let _0x35b105=[],_0x4d6fd5=[];const _0x1c03d9=_0x4a2aa4[_0x20c83b(0x170)]%0x4==0x0||_0x4a2aa4[_0x20c83b(0x170)]%0x4==0x3||_0x4a2aa4[_0x20c83b(0x170)]%0x3==0x1?0x4:0x3;let _0x4c8a9c=0x0;_0x4a2aa4[_0x20c83b(0x17d)]((_0x5c5962,_0x2af0fd)=>{const _0x37f1cb=_0x20c83b;if(_0x2af0fd%_0x1c03d9==0x0)_0x4d6fd5=[];_0x4d6fd5[_0x37f1cb(0x25c)]({'text':_0x5c5962[_0x37f1cb(0x28e)]==_0x37f1cb(0x10b)?_0x37f1cb(0x1d5):'Bot\x20'+_0x5c5962[_0x37f1cb(0x28e)],'callback_data':_0x5c5962[_0x37f1cb(0x28e)]}),_0x2af0fd%_0x1c03d9==0x0&&(_0x35b105[_0x4c8a9c]=_0x4d6fd5,_0x4c8a9c++);}),tgBot['sendMessage'](_0x28aae8['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x35b105}})['catch'](_0x2add6b=>{telegramError(_0x2add6b);}),tgBot['on']('callback_query',async _0x3060fb=>{const _0x479679=_0x20c83b,_0x57f419=_0x3060fb[_0x479679(0x16d)],_0x38c79c=_0x3060fb['message'];tgBot[_0x479679(0x149)](_0x3060fb['id'])[_0x479679(0x18c)](async()=>{const _0x487dd6=_0x479679;_0x57f419==_0x487dd6(0x10b)?config[_0x487dd6(0x17d)](_0x548a92=>{const _0x3c60df=_0x487dd6;restartBot(_0x548a92[_0x3c60df(0x28e)]);}):restartBot(_0x57f419);}),tgBot[_0x479679(0x15a)](_0x479679(0x281));});}}),tgBot[_0x336c98(0x200)](/\/on/,_0x3b851e=>{const _0x107bef=_0x336c98;if(!validateTelegram(_0x3b851e))return;tgBot[_0x107bef(0x15a)](_0x107bef(0x281));const _0xec5e85=getDisabledBots();if(_0xec5e85[_0x107bef(0x170)]==0x0)tgBot[_0x107bef(0x294)](_0x3b851e[_0x107bef(0x1db)]['id'],_0x107bef(0x1a4))[_0x107bef(0x286)](_0x1bcb9b=>{telegramError(_0x1bcb9b);});else{if(_0xec5e85[_0x107bef(0x170)]>0x1)_0xec5e85[_0x107bef(0x25c)]({'botID':_0x107bef(0x10b)});let _0x322ccc=[],_0x170427=[];const _0x26af36=_0xec5e85[_0x107bef(0x170)]%0x4==0x0||_0xec5e85[_0x107bef(0x170)]%0x4==0x3||_0xec5e85[_0x107bef(0x170)]%0x3==0x1?0x4:0x3;let _0x1ed604=0x0;_0xec5e85['forEach']((_0x4d4bf1,_0x35d6ee)=>{const _0x43dc60=_0x107bef;if(_0x35d6ee%_0x26af36==0x0)_0x170427=[];_0x170427['push']({'text':_0x4d4bf1[_0x43dc60(0x28e)]==_0x43dc60(0x10b)?'All\x20bots':_0x43dc60(0x1d4)+_0x4d4bf1[_0x43dc60(0x28e)],'callback_data':_0x4d4bf1[_0x43dc60(0x28e)]}),_0x35d6ee%_0x26af36==0x0&&(_0x322ccc[_0x1ed604]=_0x170427,_0x1ed604++);}),tgBot[_0x107bef(0x294)](_0x3b851e['chat']['id'],_0x107bef(0x1f1),{'reply_markup':{'inline_keyboard':_0x322ccc}})[_0x107bef(0x286)](_0x30f6bd=>{telegramError(_0x30f6bd);}),tgBot['on'](_0x107bef(0x281),async _0x563a61=>{const _0x43dcae=_0x107bef,_0x47a4d2=_0x563a61['data'],_0x2c3c9c=_0x563a61[_0x43dcae(0xcc)];tgBot[_0x43dcae(0x149)](_0x563a61['id'])[_0x43dcae(0x18c)](async()=>{const _0x337c0d=_0x43dcae;_0x47a4d2=='all'?(tgBot[_0x337c0d(0x294)](_0x2c3c9c['chat']['id'],_0x337c0d(0xe5))['catch'](_0x473a50=>{telegramError(_0x473a50);}),_0xec5e85['forEach'](_0x4c6216=>{const _0x5caba6=_0x337c0d;if(_0x4c6216[_0x5caba6(0x28e)]!='all')toggleBot(_0x4c6216[_0x5caba6(0x28e)],toggleStatus(_0x4c6216['botID']),'stopped');})):(tgBot[_0x337c0d(0x294)](_0x2c3c9c[_0x337c0d(0x1db)]['id'],_0x337c0d(0xf8)+_0x47a4d2)['catch'](_0x801d60=>{telegramError(_0x801d60);}),toggleBot(_0x47a4d2,toggleStatus(_0x47a4d2),'stopped'));}),tgBot[_0x43dcae(0x15a)](_0x43dcae(0x281));});}}),tgBot[_0x336c98(0x200)](/\/off/,_0x57c402=>{const _0x41ad4f=_0x336c98;if(!validateTelegram(_0x57c402))return;tgBot[_0x41ad4f(0x15a)](_0x41ad4f(0x281));const _0x53cec6=getEnabledBots();if(_0x53cec6['length']==0x0)tgBot[_0x41ad4f(0x294)](_0x57c402[_0x41ad4f(0x1db)]['id'],_0x41ad4f(0xf6))[_0x41ad4f(0x286)](_0x2c8d45=>{telegramError(_0x2c8d45);});else{if(_0x53cec6[_0x41ad4f(0x170)]>0x1)_0x53cec6[_0x41ad4f(0x25c)]({'botID':_0x41ad4f(0x10b)});let _0x15fa21=[],_0x73aca5=[];const _0x581a6b=_0x53cec6[_0x41ad4f(0x170)]%0x4==0x0||_0x53cec6[_0x41ad4f(0x170)]%0x4==0x3||_0x53cec6[_0x41ad4f(0x170)]%0x3==0x1?0x4:0x3;let _0x433ba8=0x0;_0x53cec6[_0x41ad4f(0x17d)]((_0x246669,_0x3f6aad)=>{const _0x3d0717=_0x41ad4f;if(_0x3f6aad%_0x581a6b==0x0)_0x73aca5=[];_0x73aca5[_0x3d0717(0x25c)]({'text':_0x246669[_0x3d0717(0x28e)]=='all'?'All\x20bots':_0x3d0717(0x1d4)+_0x246669[_0x3d0717(0x28e)],'callback_data':_0x246669['botID']}),_0x3f6aad%_0x581a6b==0x0&&(_0x15fa21[_0x433ba8]=_0x73aca5,_0x433ba8++);}),tgBot[_0x41ad4f(0x294)](_0x57c402[_0x41ad4f(0x1db)]['id'],_0x41ad4f(0x26d),{'reply_markup':{'inline_keyboard':_0x15fa21}})[_0x41ad4f(0x286)](_0x398748=>{telegramError(_0x398748);}),tgBot['on'](_0x41ad4f(0x281),async _0x25c139=>{const _0x593a0e=_0x41ad4f,_0xfd3f81=_0x25c139['data'],_0x238834=_0x25c139[_0x593a0e(0xcc)];tgBot[_0x593a0e(0x149)](_0x25c139['id'])[_0x593a0e(0x18c)](async()=>{const _0x2266a2=_0x593a0e;_0xfd3f81==_0x2266a2(0x10b)?(tgBot['sendMessage'](_0x238834['chat']['id'],_0x2266a2(0x143))[_0x2266a2(0x286)](_0x2c5012=>{telegramError(_0x2c5012);}),_0x53cec6[_0x2266a2(0x17d)](_0x3c0e9c=>{const _0x3fd0e2=_0x2266a2;if(_0x3c0e9c[_0x3fd0e2(0x28e)]!='all')toggleBot(_0x3c0e9c[_0x3fd0e2(0x28e)],toggleStatus(_0x3c0e9c[_0x3fd0e2(0x28e)]),_0x3fd0e2(0x242));})):(tgBot[_0x2266a2(0x294)](_0x238834['chat']['id'],_0x2266a2(0xc7)+_0xfd3f81)[_0x2266a2(0x286)](_0x2d0f6f=>{telegramError(_0x2d0f6f);}),toggleBot(_0xfd3f81,toggleStatus(_0xfd3f81),_0x2266a2(0x242)));}),tgBot[_0x593a0e(0x15a)](_0x593a0e(0x281));});}}),tgBot[_0x336c98(0x200)](/\/metrics/,_0x5e8a6f=>{const _0x9cbe4b=_0x336c98;if(!validateTelegram(_0x5e8a6f))return;tgBot['removeListener'](_0x9cbe4b(0x281));const _0x1fd478=getEnabledBots();if(_0x1fd478[_0x9cbe4b(0x170)]==0x0)tgBot[_0x9cbe4b(0x294)](_0x5e8a6f['chat']['id'],_0x9cbe4b(0xf6))[_0x9cbe4b(0x286)](_0x4c906e=>{telegramError(_0x4c906e);});else{if(_0x1fd478[_0x9cbe4b(0x170)]>0x1){let _0x44df32=[],_0x590241=[];const _0x202fe5=_0x1fd478['length']%0x4==0x0||_0x1fd478[_0x9cbe4b(0x170)]%0x4==0x3||_0x1fd478['length']%0x3==0x1?0x4:0x3;let _0x40bd78=0x0;_0x1fd478[_0x9cbe4b(0x17d)]((_0x1e94a8,_0x311883)=>{const _0x3884c1=_0x9cbe4b;if(_0x311883%_0x202fe5==0x0)_0x590241=[];_0x590241[_0x3884c1(0x25c)]({'text':_0x3884c1(0x1d4)+_0x1e94a8[_0x3884c1(0x28e)],'callback_data':_0x1e94a8[_0x3884c1(0x28e)]}),_0x311883%_0x202fe5==0x0&&(_0x44df32[_0x40bd78]=_0x590241,_0x40bd78++);}),tgBot[_0x9cbe4b(0x294)](_0x5e8a6f[_0x9cbe4b(0x1db)]['id'],_0x9cbe4b(0x127),{'reply_markup':{'inline_keyboard':_0x44df32}})[_0x9cbe4b(0x286)](_0x40a77f=>{telegramError(_0x40a77f);}),tgBot['on']('callback_query',async _0x56d5c2=>{const _0x2a0829=_0x9cbe4b,_0x48ecce=_0x56d5c2[_0x2a0829(0x16d)],_0xf1a6d5=_0x56d5c2[_0x2a0829(0xcc)];tgBot[_0x2a0829(0x149)](_0x56d5c2['id'])[_0x2a0829(0x18c)](async()=>{const _0x423e41=_0x2a0829;if(pid[_0x48ecce])pid[_0x48ecce][_0x423e41(0x15e)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x2a0829(0x15a)](_0x2a0829(0x281));});}else{const _0x2d3a37=_0x1fd478[0x0][_0x9cbe4b(0x28e)];if(pid[_0x2d3a37])pid[_0x2d3a37][_0x9cbe4b(0x15e)]({'function':_0x9cbe4b(0x23d),'args':null});}}}),tgBot[_0x336c98(0x200)](/\/portfolio/,_0x4f26d4=>{const _0x4ec36e=_0x336c98;if(!validateTelegram(_0x4f26d4))return;tgBot[_0x4ec36e(0x15a)](_0x4ec36e(0x281));const _0x31c6db=getEnabledBots();if(_0x31c6db[_0x4ec36e(0x170)]==0x0)tgBot[_0x4ec36e(0x294)](_0x4f26d4[_0x4ec36e(0x1db)]['id'],_0x4ec36e(0xf6))[_0x4ec36e(0x286)](_0x538ea3=>{telegramError(_0x538ea3);});else{if(_0x31c6db['length']>0x1){let _0x42ac74=[],_0x2365f8=[];const _0x405033=_0x31c6db[_0x4ec36e(0x170)]%0x4==0x0||_0x31c6db['length']%0x4==0x3||_0x31c6db[_0x4ec36e(0x170)]%0x3==0x1?0x4:0x3;let _0x42b606=0x0;_0x31c6db[_0x4ec36e(0x17d)]((_0x1adba7,_0x44cc20)=>{const _0x426921=_0x4ec36e;if(_0x44cc20%_0x405033==0x0)_0x2365f8=[];_0x2365f8['push']({'text':_0x426921(0x1d4)+_0x1adba7[_0x426921(0x28e)],'callback_data':_0x1adba7[_0x426921(0x28e)]}),_0x44cc20%_0x405033==0x0&&(_0x42ac74[_0x42b606]=_0x2365f8,_0x42b606++);}),tgBot[_0x4ec36e(0x294)](_0x4f26d4[_0x4ec36e(0x1db)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x42ac74}})[_0x4ec36e(0x286)](_0x1d20fc=>{telegramError(_0x1d20fc);}),tgBot['on'](_0x4ec36e(0x281),async _0x29019b=>{const _0x57b0ea=_0x4ec36e,_0x422762=_0x29019b['data'],_0xd55d64=_0x29019b['message'];tgBot[_0x57b0ea(0x149)](_0x29019b['id'])[_0x57b0ea(0x18c)](async()=>{if(pid[_0x422762])pid[_0x422762]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot['removeListener'](_0x57b0ea(0x281));});}else{const _0x412fc3=_0x31c6db[0x0][_0x4ec36e(0x28e)];if(pid[_0x412fc3])pid[_0x412fc3][_0x4ec36e(0x15e)]({'function':_0x4ec36e(0xeb),'args':null});}}}),tgBot[_0x336c98(0x200)](/\/update/,async _0x139816=>{const _0x2bc63f=_0x336c98;if(!validateTelegram(_0x139816))return;tgBot[_0x2bc63f(0x15a)](_0x2bc63f(0x281)),await getMessages();if(!updateAvailable)tgBot[_0x2bc63f(0x294)](_0x139816['chat']['id'],_0x2bc63f(0x224))['catch'](_0x51c853=>{telegramError(_0x51c853);});else!validInstallation?tgBot[_0x2bc63f(0x294)](_0x139816[_0x2bc63f(0x1db)]['id'],_0x2bc63f(0x188))[_0x2bc63f(0x286)](_0x39f12a=>{telegramError(_0x39f12a);}):(tgBot[_0x2bc63f(0x294)](_0x139816[_0x2bc63f(0x1db)]['id'],_0x2bc63f(0x26e),{'reply_markup':{'inline_keyboard':[[{'text':_0x2bc63f(0x215),'callback_data':_0x2bc63f(0xd3)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x2afaaa=>{telegramError(_0x2afaaa);}),tgBot['on']('callback_query',async _0x202363=>{const _0x5535b1=_0x2bc63f,_0x47af7d=_0x202363['data'],_0x3c6ab5=_0x202363['message'];tgBot[_0x5535b1(0x149)](_0x202363['id'])[_0x5535b1(0x18c)](async()=>{const _0x2830c2=_0x5535b1;_0x47af7d=='yes'&&(await tgBot[_0x2830c2(0x294)](_0x3c6ab5[_0x2830c2(0x1db)]['id'],_0x2830c2(0x25d))[_0x2830c2(0x286)](_0xff2914=>{telegramError(_0xff2914);}),updateBB(_0x2830c2(0xec))),_0x47af7d=='no'&&await tgBot[_0x2830c2(0x294)](_0x3c6ab5[_0x2830c2(0x1db)]['id'],_0x2830c2(0x1cf))['catch'](_0x3b7980=>{telegramError(_0x3b7980);});}),tgBot[_0x5535b1(0x15a)]('callback_query');}));}),tgBot[_0x336c98(0x200)](/\/reinstall/,async _0x5305db=>{const _0x2768e9=_0x336c98;if(!validateTelegram(_0x5305db))return;tgBot[_0x2768e9(0x15a)](_0x2768e9(0x281)),!validInstallation?tgBot[_0x2768e9(0x294)](_0x5305db['chat']['id'],_0x2768e9(0xfe))['catch'](_0x17eb22=>{telegramError(_0x17eb22);}):(tgBot[_0x2768e9(0x294)](_0x5305db['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2768e9(0x215),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x5c7d56=>{telegramError(_0x5c7d56);}),tgBot['on']('callback_query',async _0x53cc3d=>{const _0x4ee56c=_0x2768e9,_0x597fad=_0x53cc3d[_0x4ee56c(0x16d)],_0x2aba0a=_0x53cc3d[_0x4ee56c(0xcc)];tgBot[_0x4ee56c(0x149)](_0x53cc3d['id'])[_0x4ee56c(0x18c)](async()=>{const _0x10d035=_0x4ee56c;_0x597fad==_0x10d035(0xd3)&&(await tgBot[_0x10d035(0x294)](_0x2aba0a[_0x10d035(0x1db)]['id'],_0x10d035(0x148))[_0x10d035(0x286)](_0x55a5b9=>{telegramError(_0x55a5b9);}),updateBB(_0x10d035(0x151))),_0x597fad=='no'&&await tgBot['sendMessage'](_0x2aba0a[_0x10d035(0x1db)]['id'],_0x10d035(0x1e5))[_0x10d035(0x286)](_0x4eb2ab=>{telegramError(_0x4eb2ab);});}),tgBot[_0x4ee56c(0x15a)](_0x4ee56c(0x281));}));}),tgBot[_0x336c98(0x200)](/\/toggle/,_0x45a96d=>{const _0xb4a28a=_0x336c98;if(!validateTelegram(_0x45a96d))return;tgBot[_0xb4a28a(0x15a)](_0xb4a28a(0x281));const _0xc44836=getBotsWithMode();if(_0xc44836[_0xb4a28a(0x170)]==0x0)tgBot[_0xb4a28a(0x294)](_0x45a96d['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x404616=>{telegramError(_0x404616);});else{let _0x504c86=[],_0x5468ac=[];const _0x3cfbc0=0x2;let _0x1e2535=0x0;_0xc44836[_0xb4a28a(0x17d)]((_0x2f0c15,_0x3f7f8c)=>{const _0x16d5c9=_0xb4a28a;if(_0x3f7f8c%_0x3cfbc0==0x0)_0x5468ac=[];_0x5468ac[_0x16d5c9(0x25c)]({'text':_0x16d5c9(0x1d4)+_0x2f0c15[_0x16d5c9(0x28e)]+'\x20('+_0x2f0c15[_0x16d5c9(0x161)]+')','callback_data':_0x2f0c15[_0x16d5c9(0x28e)]}),_0x3f7f8c%_0x3cfbc0==0x0&&(_0x504c86[_0x1e2535]=_0x5468ac,_0x1e2535++);}),tgBot[_0xb4a28a(0x294)](_0x45a96d[_0xb4a28a(0x1db)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x504c86}})[_0xb4a28a(0x286)](_0x26c5b6=>{telegramError(_0x26c5b6);}),tgBot['on'](_0xb4a28a(0x281),async _0x44323b=>{const _0x2a047c=_0xb4a28a,_0x4cea8c=_0x44323b[_0x2a047c(0x16d)],_0x2743d7=_0x44323b[_0x2a047c(0xcc)];tgBot[_0x2a047c(0x149)](_0x44323b['id'])[_0x2a047c(0x18c)](async()=>{const _0x24eb66=_0x2a047c,_0xb71254=_0xc44836[_0x24eb66(0x266)](_0x70339e=>_0x70339e[_0x24eb66(0x28e)]==_0x4cea8c),_0x1d5c31=_0xb71254['mode']==_0x24eb66(0x27c)?_0x24eb66(0xfd):_0x24eb66(0x27c);tgBot[_0x24eb66(0x294)](_0x2743d7[_0x24eb66(0x1db)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x4cea8c+_0x24eb66(0xed)+_0x1d5c31+_0x24eb66(0xb8))['catch'](_0x506dc9=>{telegramError(_0x506dc9);}),toggleBotMode(_0x4cea8c);}),tgBot[_0x2a047c(0x15a)]('callback_query');});}}),tgBot[_0x336c98(0x200)](/\/names/,_0x21b496=>{const _0x2211d3=_0x336c98;if(!validateTelegram(_0x21b496))return;let _0x583bcc='';config[_0x2211d3(0x17d)](_0x1ec4fe=>{const _0x4426d2=_0x2211d3;_0x583bcc+='Bot\x20'+_0x1ec4fe[_0x4426d2(0x28e)]+':\x20'+_0x1ec4fe[_0x4426d2(0x18e)]+'\x0a';}),tgBot[_0x2211d3(0x294)](_0x21b496['chat']['id'],_0x583bcc,{'parse_mode':'HTML'})[_0x2211d3(0x286)](_0x3e490c=>{telegramError(_0x3e490c);});}),tgBot[_0x336c98(0x200)](/\/disable/,_0x3a7f06=>{const _0x29f5ed=_0x336c98;if(!validateTelegram(_0x3a7f06))return;tgBot[_0x29f5ed(0x294)](_0x3a7f06[_0x29f5ed(0x1db)]['id'],_0x29f5ed(0x268))[_0x29f5ed(0x286)](_0xff963e=>{telegramError(_0xff963e);}),updateSetting(_0x29f5ed(0x178),![]);}),tgBot['onText'](/\/help/,_0x4545b9=>{const _0x26a025=_0x336c98;if(!validateTelegram(_0x4545b9))return;tgBot['sendMessage'](_0x4545b9['chat']['id'],_0x532a33)[_0x26a025(0x286)](_0x51fdf6=>{telegramError(_0x51fdf6);});}),tgBot['on']('polling_error',_0x370877=>{const _0x168697=_0x336c98;_0x370877[_0x168697(0x1b5)]()[_0x168697(0x1c9)](_0x168697(0x239))&&(logger[_0x168697(0xc9)](_0x168697(0x28d)),tgBot[_0x168697(0x1a7)](),tgBot=null,io['to'](_0x168697(0xea))[_0x168697(0x28f)](_0x168697(0xd8),_0x168697(0x28d)));}),process[_0x336c98(0x1b6)]('SIGINT',()=>{const _0x1838ab=_0x336c98;if(tgBot)tgBot[_0x1838ab(0x1a7)]();process['exit'](0x1);}),process[_0x336c98(0x1b6)](_0x336c98(0xd4),()=>{const _0x5c4721=_0x336c98;if(tgBot)tgBot['stopPolling']();process[_0x5c4721(0x25a)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x26ab2b,_0xc9841c){const _0xd4c6c2=_0x2d2884;if(settings[_0xd4c6c2(0x178)]){if(settings[_0xd4c6c2(0x241)]==_0xd4c6c2(0x10b)||(_0xc9841c['type']=='error'||_0xc9841c[_0xd4c6c2(0x156)]=='warning'||_0xc9841c[_0xd4c6c2(0x156)]==_0xd4c6c2(0x1ed))&&settings['telegramEvents']==_0xd4c6c2(0xbe)||_0xc9841c[_0xd4c6c2(0x156)]==_0xd4c6c2(0x263)&&settings[_0xd4c6c2(0x241)]=='orders'){if(tgBot&&settings[_0xd4c6c2(0x1b0)]){if(_0xc9841c['showname'])tgBot[_0xd4c6c2(0x294)](settings[_0xd4c6c2(0x1b0)],_0xc9841c[_0xd4c6c2(0x18e)]+_0xd4c6c2(0xe0)+_0xc9841c[_0xd4c6c2(0x172)])[_0xd4c6c2(0x286)](_0x51db57=>{telegramError(_0x51db57);});else tgBot[_0xd4c6c2(0x294)](settings[_0xd4c6c2(0x1b0)],'Bot\x20'+_0x26ab2b+'\x20>\x20'+_0xc9841c[_0xd4c6c2(0x172)])[_0xd4c6c2(0x286)](_0x5a6f7b=>{telegramError(_0x5a6f7b);});}}}}async function sendTelegramMsg(_0x1a0807,_0x2cf444=_0x2d2884(0x259)){const _0x41293c=_0x2d2884;return settings[_0x41293c(0x178)]&&tgBot&&settings[_0x41293c(0x1b0)]?(await tgBot[_0x41293c(0x294)](settings[_0x41293c(0x1b0)],_0x1a0807,{'parse_mode':_0x2cf444})[_0x41293c(0x286)](_0x4d736d=>{telegramError(_0x4d736d);}),!![]):![];}function getDeviceWithIp(_0x3061dc){return devices['find'](_0x344a79=>_0x344a79['ip']===_0x3061dc);}function temporaryAccess2FA(_0x40a409,_0x123d10){const _0xab86d5=_0x2d2884;let _0x45b0b9=new Date(),_0x539441=![];if(lastIpApproval){if(_0x45b0b9-lastIpApproval<0x1388)_0x539441=!![];}lastIpApproval=new Date();if(_0x539441)return;tgBot&&settings[_0xab86d5(0x1b0)]&&(tgBot[_0xab86d5(0x15a)](_0xab86d5(0x281)),tgBot[_0xab86d5(0x294)](settings['telegramChatId'],_0xab86d5(0x15b)+normalizeIP(_0x123d10)['show']+'</b>\x20?',{'parse_mode':_0xab86d5(0x259),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0xab86d5(0x1f7),'callback_data':'15'},{'text':_0xab86d5(0xc1),'callback_data':'30'},{'text':_0xab86d5(0x125),'callback_data':_0xab86d5(0x125)}]]}})[_0xab86d5(0x286)](_0x26dcf5=>{telegramError(_0x26dcf5);}),tgBot['on']('callback_query',async _0x5435fc=>{const _0x529050=_0xab86d5,_0x16d971=_0x5435fc[_0x529050(0x16d)],_0x588ccd=_0x5435fc[_0x529050(0xcc)];tgBot[_0x529050(0x149)](_0x5435fc['id'])[_0x529050(0x18c)](async()=>{const _0x54f791=_0x529050;devices[_0x40a409]['telegramIpApproval']={'clientip':_0x123d10,'timestamp':new Date()[_0x54f791(0x1a1)](),'expiry':_0x16d971},_0x16d971!=_0x54f791(0x125)?(await tgBot[_0x54f791(0x294)](_0x588ccd[_0x54f791(0x1db)]['id'],'Access\x20enabled\x20for\x20'+_0x16d971+_0x54f791(0xf7),{'parse_mode':_0x54f791(0x259)})[_0x54f791(0x286)](_0x40580b=>{telegramError(_0x40580b);}),io['to'](_0x40a409)['emit'](_0x54f791(0x245),{'access':{'allow':![],'reason':_0x54f791(0x19e),'token':null}})):(await tgBot[_0x54f791(0x294)](_0x588ccd[_0x54f791(0x1db)]['id'],_0x54f791(0x28b))[_0x54f791(0x286)](_0x4a7e6d=>{telegramError(_0x4a7e6d);}),io['to'](_0x40a409)[_0x54f791(0x28f)](_0x54f791(0x245),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x529050(0x15a)](_0x529050(0x281));}));}function loginAccess2FA(_0x41b950,_0x2dea81){const _0x5c3ab4=_0x2d2884;tgBot&&settings['telegramChatId']&&(tgBot[_0x5c3ab4(0x15a)](_0x5c3ab4(0x281)),tgBot[_0x5c3ab4(0x294)](settings[_0x5c3ab4(0x1b0)],_0x5c3ab4(0x16f)+normalizeIP(_0x2dea81)[_0x5c3ab4(0x1ee)]+_0x5c3ab4(0x13b),{'parse_mode':_0x5c3ab4(0x259),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x5c3ab4(0x125),'callback_data':'reject'}]]}})[_0x5c3ab4(0x286)](_0x246683=>{telegramError(_0x246683);}),tgBot['on'](_0x5c3ab4(0x281),async _0x3607a7=>{const _0x13afe0=_0x5c3ab4,_0x4972bc=_0x3607a7['data'],_0x4e9a1e=_0x3607a7[_0x13afe0(0xcc)];tgBot['answerCallbackQuery'](_0x3607a7['id'])[_0x13afe0(0x18c)](async()=>{const _0x51faad=_0x13afe0;devices[_0x41b950][_0x51faad(0x208)]={'clientip':_0x2dea81,'timestamp':new Date()[_0x51faad(0x1a1)](),'expiry':_0x4972bc},_0x4972bc!='reject'?(await tgBot[_0x51faad(0x294)](_0x4e9a1e['chat']['id'],'Login\x20accepted',{'parse_mode':_0x51faad(0x259)})[_0x51faad(0x286)](_0x562f4c=>{telegramError(_0x562f4c);}),io['to'](_0x41b950)['emit'](_0x51faad(0x245),{'access':{'allow':![],'reason':_0x51faad(0x19e),'token':null}})):(await tgBot[_0x51faad(0x294)](_0x4e9a1e[_0x51faad(0x1db)]['id'],_0x51faad(0x1fb))[_0x51faad(0x286)](_0x470c65=>{telegramError(_0x470c65);}),io['to'](_0x41b950)[_0x51faad(0x28f)](_0x51faad(0x245),{'access':{'allow':![],'reason':_0x51faad(0xcb),'token':null}}));}),tgBot['removeListener'](_0x13afe0(0x281));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1e918c=_0x2d2884;return dbConfig['get'](_0x1e918c(0x1b1))[_0x1e918c(0x13c)](_0x1e918c(0x28e))[_0x1e918c(0x1c1)]({'status':_0x1e918c(0x15c)})[_0x1e918c(0xf3)]()||[];}function getDisabledBots(){const _0x4b0efb=_0x2d2884;return dbConfig[_0x4b0efb(0x243)](_0x4b0efb(0x1b1))[_0x4b0efb(0x13c)](_0x4b0efb(0x28e))[_0x4b0efb(0x1c1)]({'status':'disabled'})[_0x4b0efb(0xf3)]()||[];}function getBotAttributes(_0x2851bf){const _0x12c310=_0x2d2884;let _0x463326={};const _0xe73fb7=configpath+_0x12c310(0x1f2)+_0x2851bf+_0x12c310(0x14f),_0x5e3cfb=fs['existsSync'](_0xe73fb7);if(_0x5e3cfb){const _0x32d8df=fs[_0x12c310(0x1ba)](_0xe73fb7);try{const _0x107e37=JSON['parse'](_0x32d8df),_0x112b62=_0x107e37?_0x107e37[_0x12c310(0xcd)][0x0][_0x12c310(0x116)]:![];_0x463326[_0x12c310(0x161)]=_0x112b62?_0x12c310(0x27c):_0x12c310(0xfd),_0x463326[_0x12c310(0x18e)]=_0x107e37?_0x107e37['bot'][0x0][_0x12c310(0x18e)]:_0x12c310(0x1d4)+_0x2851bf;}catch(_0x30c4dd){_0x463326[_0x12c310(0x161)]='manual',_0x463326[_0x12c310(0x18e)]=_0x12c310(0x1d4)+_0x2851bf;}}else _0x463326['mode']=_0x12c310(0xfd),_0x463326[_0x12c310(0x18e)]='Bot\x20'+_0x2851bf;return _0x463326;}function getBotsWithMode(){const _0x277f6b=_0x2d2884,_0x535b0f=dbConfig[_0x277f6b(0x243)](_0x277f6b(0x1b1))[_0x277f6b(0x13c)]('botID')['value']()||[];return _0x535b0f[_0x277f6b(0x17d)](_0x3a473e=>{const _0x138acd=_0x277f6b;let _0x55354c=getBotAttributes(_0x3a473e[_0x138acd(0x28e)]);_0x3a473e[_0x138acd(0x161)]=_0x55354c[_0x138acd(0x161)];}),_0x535b0f;}function getBotExchanges(){const _0x4ed782=_0x2d2884;let _0x2d9a82=[];const _0x424dcd=dbConfig['get'](_0x4ed782(0x1b1))[_0x4ed782(0x13c)](_0x4ed782(0x28e))[_0x4ed782(0xf3)]()||[];_0x424dcd['forEach'](_0x458722=>{const _0x38c79a=_0x4ed782;if(_0x458722[_0x38c79a(0x245)]==_0x38c79a(0x15c)){const _0xe9c792=configpath+_0x38c79a(0x1f2)+_0x458722['botID']+'-config.json',_0x22e3f9=fs[_0x38c79a(0x174)](_0xe9c792);let _0x2763ed;if(_0x22e3f9){const _0x1fd774=fs[_0x38c79a(0x1ba)](_0xe9c792);try{const _0x420c38=JSON['parse'](_0x1fd774);_0x2763ed=_0x420c38?_0x420c38[_0x38c79a(0xcd)][0x0][_0x38c79a(0x10f)]:null;}catch(_0x4de303){}}if(_0x2763ed)_0x2d9a82['push'](_0x2763ed);}});const _0x5bc7e6=[...new Set(_0x2d9a82)][_0x4ed782(0x292)]();return _0x5bc7e6;}async function initUser(){const _0x501f4c=_0x2d2884;if(!settings[_0x501f4c(0x1ce)]){const _0x3171f4=uuidRandom();mixpanel[_0x501f4c(0x2a5)](_0x3171f4),updateSetting(_0x501f4c(0x1ce),_0x3171f4);}}async function initSecure(){const _0x45479e=_0x2d2884;let _0x5ad26b=getSecure();if(!_0x5ad26b['hasOwnProperty'](_0x45479e(0x1eb))){let _0x2d8bb4=await generateKeys();_0x5ad26b[_0x45479e(0x12e)]=_0x2d8bb4[_0x45479e(0x12e)],_0x5ad26b[_0x45479e(0x10c)]=_0x2d8bb4[_0x45479e(0x10c)],_0x5ad26b[_0x45479e(0x1eb)]=crypto[_0x45479e(0x1e8)](0x20)[_0x45479e(0x1b5)](_0x45479e(0xc4));;storeSecure(_0x5ad26b);}}function getSettings(){const _0xc23755=_0x2d2884;return dbSettings['get'](_0xc23755(0x194))['value']()||{};}function getSecure(){const _0x1c7c8f=_0x2d2884;return dbSecure[_0x1c7c8f(0x243)](_0x1c7c8f(0x196))['value']()||{};}function getBlacklist(){const _0x2e2308=_0x2d2884;return dbSecure['get'](_0x2e2308(0x201))[_0x2e2308(0xf3)]()||[];}function broadcastToBots(_0x3f1862,_0x136aef){const _0x16f1f0=_0x2d2884;config[_0x16f1f0(0x17d)](_0xcfa404=>{const _0x1b664a=_0x16f1f0;if(_0xcfa404[_0x1b664a(0x245)]=='enabled'&&_0xcfa404[_0x1b664a(0x12d)]==_0x1b664a(0x1c2)||_0xcfa404['status']==_0x1b664a(0x1ea)&&_0xcfa404[_0x1b664a(0x12d)]=='running'){if(pid[_0xcfa404[_0x1b664a(0x28e)]])pid[_0xcfa404[_0x1b664a(0x28e)]][_0x1b664a(0x15e)]({[_0x3f1862]:_0x136aef});}});}function storeSettings(_0x2ca18f,_0x1fd69d=![]){const _0x3cb4a7=_0x2d2884;_0x2ca18f={...settings,..._0x2ca18f};if(_0x1fd69d&&_0x2ca18f[_0x3cb4a7(0x22f)]!=_0x3cb4a7(0x260)&&_0x2ca18f[_0x3cb4a7(0x22f)]!=_0x3cb4a7(0xdc)&&_0x2ca18f['bbPassword']!=''){const _0x4eff51=crypt['decrypt'](secure[_0x3cb4a7(0x10c)],_0x2ca18f[_0x3cb4a7(0x22f)])[_0x3cb4a7(0xcc)][_0x3cb4a7(0x29f)]('@')[0x0],_0x2cdba1=bcrypt['hashSync'](_0x4eff51,saltRounds);_0x2ca18f={..._0x2ca18f,'bbPassword':_0x2cdba1};}if(_0x1fd69d&&_0x2ca18f[_0x3cb4a7(0x1f8)]!=_0x3cb4a7(0x260)&&_0x2ca18f['telegramToken']!=_0x3cb4a7(0xdc)&&_0x2ca18f[_0x3cb4a7(0x1f8)]!=''){const _0xf1dae=crypt[_0x3cb4a7(0x235)](secure['privateKey'],_0x2ca18f[_0x3cb4a7(0x1f8)])[_0x3cb4a7(0xcc)][_0x3cb4a7(0x29f)]('@')[0x0];_0x2ca18f={..._0x2ca18f,'telegramToken':_0xf1dae};}const _0xc95d76=_0x2ca18f[_0x3cb4a7(0x1f8)]!='************'&&_0x2ca18f['telegramToken']!=settings[_0x3cb4a7(0x1f8)]||_0x2ca18f[_0x3cb4a7(0xcf)]!=settings[_0x3cb4a7(0xcf)],_0x1a5121=_0x2ca18f[_0x3cb4a7(0x1f8)]==''||_0x2ca18f[_0x3cb4a7(0xcf)]=='';if(_0xc95d76)_0x2ca18f[_0x3cb4a7(0x241)]=_0x3cb4a7(0x10b);for(const [_0x296dbe,_0x1c37bc]of Object[_0x3cb4a7(0x228)](_0x2ca18f)){if(_0x296dbe==_0x3cb4a7(0x1f8)&&_0x1c37bc==_0x3cb4a7(0x260)){_0x2ca18f[_0x3cb4a7(0x1f8)]=settings[_0x3cb4a7(0x1f8)];continue;};if(_0x296dbe=='bbPassword'&&_0x1c37bc==_0x3cb4a7(0x260)){_0x2ca18f['bbPassword']=settings[_0x3cb4a7(0x22f)];continue;};dbSettings[_0x3cb4a7(0x29b)](_0x3cb4a7(0x190)+_0x296dbe,_0x1c37bc)[_0x3cb4a7(0x291)]();}settings=_0x2ca18f,io['to']('botmanager')[_0x3cb4a7(0x28f)](_0x3cb4a7(0x194),cleanSettings()),broadcastToBots('timeshift',settings[_0x3cb4a7(0xbd)]),broadcastToBots('onepagemode',settings[_0x3cb4a7(0x141)]);if(_0xc95d76&&!_0x1a5121)initTelegram();if(_0xc95d76&&_0x1a5121)disableTelegram();getAllClients()['forEach'](_0x313fd4=>{const _0x4e58e7=_0x3cb4a7;getSocket(_0x313fd4['id'])['emit'](_0x4e58e7(0x245),{'access':{'allow':![],'reason':_0x4e58e7(0x19e),'token':null}});});}function updateSetting(_0x165ea9,_0x4b7129){const _0x45e29f=_0x2d2884;dbSettings[_0x45e29f(0x29b)](_0x45e29f(0x190)+_0x165ea9,_0x4b7129)['write'](),settings=getSettings(),io['to'](_0x45e29f(0xea))[_0x45e29f(0x28f)](_0x45e29f(0x194),cleanSettings());}function storeSecure(_0x3833da){const _0x35084d=_0x2d2884;dbSecure[_0x35084d(0x243)](_0x35084d(0x196))[_0x35084d(0x25c)](_0x3833da)['write'](),secure=_0x3833da;}function addBlacklist(_0x57118a){const _0x193536=_0x2d2884;cleanBlacklist();let _0x1ff97e;devices[_0x57118a][_0x193536(0x126)]?_0x1ff97e=Math[_0x193536(0x1bb)](devices[_0x57118a]['telegramIpApproval'][_0x193536(0x1e4)],loginExpiry):_0x1ff97e=loginExpiry,dbSecure[_0x193536(0x243)](_0x193536(0x201))[_0x193536(0x25c)]({'expiry':new Date()[_0x193536(0x1a1)]()+_0x1ff97e*0x3c*0x3e8,'token':devices[_0x57118a]['access'][_0x193536(0x1a6)]})[_0x193536(0x291)](),blacklist=dbSecure['get']('blacklist')[_0x193536(0xf3)]();}function cleanBlacklist(){const _0x46d684=_0x2d2884;let _0x384d9e=dbSecure[_0x46d684(0x243)](_0x46d684(0x201))['cloneDeep']()[_0x46d684(0xf3)](),_0x3d582f=new Date()['getTime']();_0x384d9e[_0x46d684(0x17d)](_0x3d8299=>{const _0x266aaf=_0x46d684;_0x3d8299[_0x266aaf(0x1e4)]<_0x3d582f&&dbSecure['get']('blacklist')['remove']({'expiry':_0x3d8299[_0x266aaf(0x1e4)]})[_0x266aaf(0x291)]();});}function initStates(){const _0x3fe0c9=_0x2d2884;let _0x260c74=getConfiguration();_0x260c74[_0x3fe0c9(0x17d)](_0x16bcd5=>{const _0x4a8eee=_0x3fe0c9;_0x16bcd5[_0x4a8eee(0x12d)]=_0x4a8eee(0x242);}),storeConfiguration(_0x260c74);}function onKeys(){const _0x2741e7=new RSA();return new Promise(_0x4f43ff=>{const _0x55afe8=_0x1b2e;_0x2741e7[_0x55afe8(0x18f)]()[_0x55afe8(0x18c)](_0x1ec4f5=>{_0x4f43ff(_0x1ec4f5);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2c5085=_0x2d2884;let _0x1eae09=getSettings(),_0x1c4071=![];!_0x1eae09['hasOwnProperty'](_0x2c5085(0x139))&&(_0x1eae09[_0x2c5085(0x139)]=0x0,_0x1c4071=!![]);!_0x1eae09[_0x2c5085(0x225)]('lastmsgemitted')&&(_0x1eae09[_0x2c5085(0x1fe)]=0x0,_0x1c4071=!![]);!_0x1eae09[_0x2c5085(0x225)](_0x2c5085(0x238))&&(_0x1eae09[_0x2c5085(0x238)]=_0x2c5085(0x27d),_0x1c4071=!![]);!_0x1eae09['hasOwnProperty'](_0x2c5085(0x141))&&(_0x1eae09[_0x2c5085(0x141)]=![],_0x1c4071=!![]);if(_0x1c4071)storeSettings(_0x1eae09);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x14aaf=>{const _0x610a8a=_0x2c5085;if(!_0x14aaf[_0x610a8a(0x24f)]()){if(!_0x14aaf[_0x610a8a(0x1fc)][_0x610a8a(0x1be)]('backup-full@'))fs['unlinkSync'](configbackuppath+_0x14aaf[_0x610a8a(0x1fc)]);}else fs[_0x610a8a(0x207)](configbackuppath+_0x14aaf[_0x610a8a(0x1fc)],{'recursive':!![]});});}catch(_0x59fd25){logger[_0x2c5085(0x1f5)]('Error\x20removing\x20old\x20backup\x20files:',_0x59fd25);}}function storeConfiguration(_0x2333e4){const _0x1d4a83=_0x2d2884;dbConfig['get']('bots')[_0x1d4a83(0x16e)]()[_0x1d4a83(0x291)](),_0x2333e4[_0x1d4a83(0x17d)](_0x439fbc=>{delete _0x439fbc['mode'];}),dbConfig['get'](_0x1d4a83(0x1b1))[_0x1d4a83(0x25c)](..._0x2333e4)[_0x1d4a83(0x291)](),config=_0x2333e4;}function resetPassword(){const _0x289a53=_0x2d2884;tgBot&&settings[_0x289a53(0x1b0)]&&(tgBot[_0x289a53(0x15a)](_0x289a53(0x281)),tgBot[_0x289a53(0x294)](settings['telegramChatId'],_0x289a53(0x1c5),{'parse_mode':_0x289a53(0x259),'reply_markup':{'inline_keyboard':[[{'text':_0x289a53(0xd3),'callback_data':_0x289a53(0xd3)},{'text':'no','callback_data':'no'}]]}})[_0x289a53(0x286)](_0x306f65=>{telegramError(_0x306f65);}),tgBot['on'](_0x289a53(0x281),async _0x4813a8=>{const _0x1c337f=_0x289a53,_0x54bd79=_0x4813a8[_0x1c337f(0x16d)],_0x333675=_0x4813a8[_0x1c337f(0xcc)];tgBot[_0x1c337f(0x149)](_0x4813a8['id'])[_0x1c337f(0x18c)](async()=>{const _0x33e7aa=_0x1c337f;if(_0x54bd79!='no'){const _0x2d2edf=0xf,_0x555bfc=_0x33e7aa(0x2a2),_0x29a07b=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x2d2edf)))['map'](_0x3233b9=>_0x555bfc[_0x3233b9%_0x555bfc['length']])[_0x33e7aa(0x160)](''),_0x50875a=bcrypt[_0x33e7aa(0x254)](_0x29a07b,saltRounds);storeSettings({'bbPassword':_0x50875a}),await tgBot[_0x33e7aa(0x294)](_0x333675[_0x33e7aa(0x1db)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x29a07b,{'parse_mode':'HTML'})['catch'](_0x4968de=>{telegramError(_0x4968de);});}else await tgBot['sendMessage'](_0x333675[_0x33e7aa(0x1db)]['id'],_0x33e7aa(0x112))[_0x33e7aa(0x286)](_0x1d61c4=>{telegramError(_0x1d61c4);});}),tgBot[_0x1c337f(0x15a)]('callback_query');}));}async function confirmRestore(_0x9354e7,_0x1af7e3){const _0x3a1732=_0x2d2884;io['to']('botmanager')[_0x3a1732(0x28f)](_0x3a1732(0xd8),_0x3a1732(0x1a2),'success'),tgBot&&settings[_0x3a1732(0x1b0)]&&(tgBot[_0x3a1732(0x15a)]('callback_query'),await tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x3a1732(0x259),'reply_markup':{'inline_keyboard':[[{'text':_0x3a1732(0xd3),'callback_data':_0x3a1732(0xd3)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2c4dfd=>{telegramError(_0x2c4dfd);}),tgBot['on'](_0x3a1732(0x281),async _0x2bcc22=>{const _0x1629f4=_0x3a1732,_0xdbd9d4=_0x2bcc22['data'],_0x4e2aea=_0x2bcc22['message'];tgBot['answerCallbackQuery'](_0x2bcc22['id'])['then'](async()=>{const _0x480222=_0x1b2e;_0xdbd9d4==_0x480222(0xd3)?(await tgBot[_0x480222(0x294)](_0x4e2aea[_0x480222(0x1db)]['id'],_0x480222(0x11c),{'parse_mode':'HTML'})[_0x480222(0x286)](_0x10ce23=>{telegramError(_0x10ce23);}),unzipFile(_0x9354e7,_0x1af7e3)):(logger[_0x480222(0x1f5)](_0x480222(0x223)),await tgBot['sendMessage'](_0x4e2aea['chat']['id'],_0x480222(0x223))[_0x480222(0x286)](_0x8ba667=>{telegramError(_0x8ba667);}));}),tgBot['removeListener'](_0x1629f4(0x281));}));}function getServerTime(){const _0x4ff0b9=_0x2d2884,_0x5d8be1=new Date();return _0x5d8be1[_0x4ff0b9(0x234)]()+'/'+(_0x5d8be1['getMonth']()+0x1)[_0x4ff0b9(0x1b5)]()[_0x4ff0b9(0x176)](0x2,'0')+'/'+_0x5d8be1[_0x4ff0b9(0x13e)]()[_0x4ff0b9(0x1b5)]()[_0x4ff0b9(0x176)](0x2,'0')+'\x20'+_0x5d8be1[_0x4ff0b9(0x270)]()['toString']()[_0x4ff0b9(0x176)](0x2,'0')+':'+_0x5d8be1[_0x4ff0b9(0xd6)]()[_0x4ff0b9(0x1b5)]()[_0x4ff0b9(0x176)](0x2,'0')+':'+_0x5d8be1[_0x4ff0b9(0x1af)]()[_0x4ff0b9(0x1b5)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4560c5=_0x2d2884,_0x1d218e=shiftedTime();return _0x1d218e[_0x4560c5(0x234)]()+'/'+(_0x1d218e[_0x4560c5(0x177)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1d218e[_0x4560c5(0x13e)]()[_0x4560c5(0x1b5)]()[_0x4560c5(0x176)](0x2,'0')+'\x20'+_0x1d218e[_0x4560c5(0x270)]()[_0x4560c5(0x1b5)]()['padStart'](0x2,'0')+':'+_0x1d218e['getMinutes']()[_0x4560c5(0x1b5)]()[_0x4560c5(0x176)](0x2,'0')+':'+_0x1d218e[_0x4560c5(0x1af)]()['toString']()[_0x4560c5(0x176)](0x2,'0');}function getCleanTimeStamp(){const _0x1ba44a=_0x2d2884,_0x1058af=shiftedTime();return _0x1058af[_0x1ba44a(0x234)]()+(_0x1058af['getMonth']()+0x1)[_0x1ba44a(0x1b5)]()[_0x1ba44a(0x176)](0x2,'0')+_0x1058af[_0x1ba44a(0x13e)]()[_0x1ba44a(0x1b5)]()[_0x1ba44a(0x176)](0x2,'0')+'-'+_0x1058af[_0x1ba44a(0x270)]()['toString']()[_0x1ba44a(0x176)](0x2,'0')+_0x1058af[_0x1ba44a(0xd6)]()[_0x1ba44a(0x1b5)]()['padStart'](0x2,'0')+_0x1058af[_0x1ba44a(0x1af)]()[_0x1ba44a(0x1b5)]()[_0x1ba44a(0x176)](0x2,'0');}function shiftedTime(){const _0x42ae6e=_0x2d2884,_0x186485=new Date();let _0x19260b=_0x186485;if(settings['timeshift']&&settings[_0x42ae6e(0xbd)]!==0x0)_0x19260b=fns[_0x42ae6e(0x1dc)](_0x186485,{'hours':settings[_0x42ae6e(0xbd)]});return _0x19260b;}function startScheduler(){const _0x2d967c=_0x2d2884,_0x346a24=new Date()[_0x2d967c(0xe7)](),_0xfa4034=shiftedTime()[_0x2d967c(0x270)]();_0xfa4034==0x4&&backupConfigFiles();_0xfa4034==0x0&&rotateLogFiles();_0x346a24%0x6==0x0&&triggerAnalytics();_0x346a24%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0xcd9681){const _0x1e9f47=_0x2d2884;logger[_0x1e9f47(0x1f5)](_0x1e9f47(0x1da)+_0xcd9681);const _0x37f7de=getBotsWithMode();_0x37f7de[_0x1e9f47(0x170)]>0x0?confirmRestore(configbackuppath,_0xcd9681):unzipFile(configbackuppath,_0xcd9681);}async function getBackupFiles(_0x39c57a=null){const _0x4e3844=_0x2d2884;let _0x250877=[],_0xe7e45b=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0xe7e45b[_0x4e3844(0x292)]((_0x3529da,_0x2c9a37)=>_0x3529da['name']<_0x2c9a37[_0x4e3844(0x1fc)]?0x1:_0x2c9a37['name']<_0x3529da[_0x4e3844(0x1fc)]?-0x1:0x0),_0xe7e45b[_0x4e3844(0x17d)](_0x1d021b=>{const _0x42a8d6=_0x4e3844;if(!_0x1d021b[_0x42a8d6(0x24f)]()&&_0x1d021b['name'][_0x42a8d6(0x1be)]('backup-full@')&&_0x1d021b['name'][_0x42a8d6(0x252)]('.zip')){const _0x40424b=formatDate(fs['statSync'](configbackuppath+_0x1d021b['name'])[_0x42a8d6(0x20a)]);_0x250877[_0x42a8d6(0x25c)]({'name':_0x1d021b[_0x42a8d6(0x1fc)],'mtime':_0x40424b});}});if(_0x39c57a)io['to'](_0x39c57a)[_0x4e3844(0x28f)](_0x4e3844(0x2a1),_0x250877);else return _0x250877;}async function backupConfigFiles(){const _0x276d31=_0x2d2884;await zipFiles('backup-full');const _0x155062=getCleanTimeStamp();fs[_0x276d31(0x1fd)](zippath+_0x276d31(0x278),configbackuppath+(_0x276d31(0x24a)+_0x155062+_0x276d31(0x183)));let _0x19608f=fs[_0x276d31(0x131)](configbackuppath,{'withFileTypes':!![]});_0x19608f[_0x276d31(0x292)]((_0x295986,_0x4b4859)=>_0x295986[_0x276d31(0x1fc)]<_0x4b4859[_0x276d31(0x1fc)]?0x1:_0x4b4859[_0x276d31(0x1fc)]<_0x295986[_0x276d31(0x1fc)]?-0x1:0x0),_0x19608f[_0x276d31(0x170)]>maxBackups&&fs[_0x276d31(0x134)](configbackuppath+_0x19608f[_0x19608f['length']-0x1]['name']);}function rotateLogFiles(){const _0x452695=_0x2d2884,_0x3c439c=fs[_0x452695(0x1d1)](logspath+_0x452695(0x140)),_0x22ff1f=_0x3c439c[_0x452695(0x15d)]/0x400;if(_0x22ff1f>0x64){let _0x3789cb=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x3789cb[_0x452695(0x292)]((_0x3c7378,_0x5953d5)=>_0x3c7378['name']<_0x5953d5[_0x452695(0x1fc)]?0x1:_0x5953d5['name']<_0x3c7378[_0x452695(0x1fc)]?-0x1:0x0),_0x3789cb[_0x452695(0x17d)](_0x51c835=>{const _0x4f3279=_0x452695;if(_0x51c835['name']==_0x4f3279(0x1ac))fs['copyFileSync'](logspath+_0x51c835['name'],logspath+_0x4f3279(0x23a));if(_0x51c835[_0x4f3279(0x1fc)]=='output-001.log')fs['copyFileSync'](logspath+_0x51c835[_0x4f3279(0x1fc)],logspath+_0x4f3279(0x1ac));_0x51c835[_0x4f3279(0x1fc)]==_0x4f3279(0x140)&&(fs['copyFileSync'](logspath+_0x51c835['name'],logspath+_0x4f3279(0x117)),fs[_0x4f3279(0x216)](logspath+_0x51c835['name'],''));});}}async function zipFiles(_0xe5e3ed){const _0x1b9d7e=_0x2d2884;let _0x5f2136;if(_0xe5e3ed==_0x1b9d7e(0x280))_0x5f2136=logspath;if(_0xe5e3ed==_0x1b9d7e(0x28c))_0x5f2136=configpath;if(_0xe5e3ed==_0x1b9d7e(0xef))_0x5f2136=configpath;let _0x4445e0=fs['readdirSync'](_0x5f2136,{'withFileTypes':!![]});const _0x4ff1cf=new require(_0x1b9d7e(0x157))();_0x4445e0[_0x1b9d7e(0x17d)](_0x20634e=>{const _0xe3a34a=_0x1b9d7e;if(!_0x20634e[_0xe3a34a(0x24f)]()){let _0x17cdba=fs[_0xe3a34a(0x1ba)](_0x5f2136+_0x20634e[_0xe3a34a(0x1fc)]);if(_0xe5e3ed==_0xe3a34a(0x28c)){const _0x14c974=/^bot-[0-9]{3}-config.json$/,_0x2a31ed=_0x14c974[_0xe3a34a(0x250)](_0x20634e[_0xe3a34a(0x1fc)]);if(_0x2a31ed){const _0x120eb3=JSON[_0xe3a34a(0xe2)](_0x17cdba);if(_0x120eb3[_0xe3a34a(0xcd)][0x0]){_0x120eb3[_0xe3a34a(0xcd)][0x0][_0xe3a34a(0x153)]=_0xe3a34a(0xdc),_0x120eb3[_0xe3a34a(0xcd)][0x0][_0xe3a34a(0x166)]=_0xe3a34a(0xdc);if(_0x120eb3[_0xe3a34a(0xcd)][0x0][_0xe3a34a(0x1d9)])_0x120eb3[_0xe3a34a(0xcd)][0x0][_0xe3a34a(0x1d9)]=_0xe3a34a(0xdc);}_0x17cdba=JSON['stringify'](_0x120eb3,null,0x2);}if(_0x20634e[_0xe3a34a(0x1fc)]=='bb-settings.json'){const _0x15c560=JSON[_0xe3a34a(0xe2)](_0x17cdba);if(_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0xee)])_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0xee)]=![];if(_0x15c560['settings'][_0xe3a34a(0x22f)])_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0x22f)]='***';if(_0x15c560['settings'][_0xe3a34a(0x1f8)])_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0x1f8)]='***';if(_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0x1b0)])_0x15c560[_0xe3a34a(0x194)][_0xe3a34a(0x1b0)]=null;_0x17cdba=JSON[_0xe3a34a(0x227)](_0x15c560,null,0x2);}if(_0x20634e[_0xe3a34a(0x1fc)]!='bb-secure.json')_0x4ff1cf[_0xe3a34a(0x1bc)](_0x20634e['name'],_0x17cdba);}else _0x4ff1cf[_0xe3a34a(0x1bc)](_0x20634e['name'],_0x17cdba);}});const _0x1a3acb=_0x4ff1cf[_0x1b9d7e(0x10e)]({'base64':![],'compression':_0x1b9d7e(0x105)});fs[_0x1b9d7e(0x216)](zippath+(_0xe5e3ed+_0x1b9d7e(0x183)),_0x1a3acb,_0x1b9d7e(0x197));}async function unzipFile(_0x138347,_0x589440){const _0x35638a=_0x2d2884;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x35638a(0x17d)](_0x16baa0=>{const _0x43c842=_0x35638a;if(!_0x16baa0[_0x43c842(0x24f)]())fs[_0x43c842(0x207)](configpath+_0x16baa0['name']);});const _0x2a4623=fs['readFileSync'](_0x138347+_0x589440,'binary'),_0x2ccc74=new require(_0x35638a(0x157))(_0x2a4623,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x2ccc74['files'])[_0x35638a(0x17d)](_0x1c96bf=>{const _0x22de87=_0x35638a,_0x1cc08f=_0x2ccc74[_0x22de87(0x1c8)][_0x1c96bf];fs[_0x22de87(0x216)](configpath+_0x1cc08f[_0x22de87(0x1fc)],_0x1cc08f[_0x22de87(0x1bf)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x48218a=>{const _0x12b8f6=_0x35638a;if(!_0x48218a['isDirectory']())fs[_0x12b8f6(0x207)](temppath+_0x48218a[_0x12b8f6(0x1fc)]);}),logger[_0x35638a(0x1f5)](_0x35638a(0x1f3)),process[_0x35638a(0x15e)]({'restore':!![]},_0x120ed3=>{});}async function getPublicIp(){const _0x3e158f=_0x2d2884;try{const _0x13fc03=await axios['get'](_0x3e158f(0x104));publicip=_0x13fc03[_0x3e158f(0x16d)]['ip'];}catch(_0xfc9475){}}async function triggerAnalytics(){const _0x1cc9e=_0x2d2884;if(!publicip)await getPublicIp();const _0x4e9fa2=getBotsWithMode();let _0x2b2404=0x0;_0x4e9fa2['forEach'](_0x223082=>{const _0x4cdca6=_0x1b2e;if(_0x223082[_0x4cdca6(0x245)]==='enabled')_0x2b2404++;});const _0x21fb22=getBotExchanges();mixpanel[_0x1cc9e(0x23e)]('Server',{'distinct_id':settings[_0x1cc9e(0x1ce)],'ip':publicip,'version':serverversion,'numbots':_0x4e9fa2[_0x1cc9e(0x170)],'numbotsenabled':_0x2b2404,'exchanges':_0x21fb22});}async function getMessages(){const _0x209253=_0x2d2884,_0x3f6ec7=_0x209253(0x10d),_0x360888=new GraphQLClient(_0x3f6ec7),_0x354bd4={'authorization':_0x209253(0x21f)},_0x2f66cd=serverversion[_0x209253(0x29f)]('.'),_0x2a17ee=_0x2f66cd[0x0]+'.'+_0x2f66cd[0x1],_0x2ac6b6=Math[_0x209253(0x101)](settings[_0x209253(0x139)],settings[_0x209253(0x1fe)]),_0x1a041d={'last':parseInt(_0x2ac6b6),'bbm':_0x2a17ee},_0x54aa29=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x24fd13;try{_0x24fd13=await _0x360888[_0x209253(0x180)](_0x54aa29,_0x1a041d,_0x354bd4);}catch(_0x5b95d8){}if(_0x24fd13&&_0x24fd13[_0x209253(0x212)]){let _0x23070=settings[_0x209253(0x139)];newMessages=[];for(const _0x1b8e6f of _0x24fd13['messages']){newMessages[_0x209253(0x25c)](_0x1b8e6f);if(_0x1b8e6f['bbvNew'])updateSetting(_0x209253(0x238),_0x1b8e6f[_0x209253(0xc2)]);let _0x2b3131=_0x1b8e6f[_0x209253(0xc2)]?serverversion>=_0x1b8e6f[_0x209253(0xc2)]:![];if(!_0x2b3131&&_0x1b8e6f[_0x209253(0x1d0)]>_0x23070){if(_0x1b8e6f[_0x209253(0x214)]===_0x209253(0x1d3)||serverversion[_0x209253(0x1be)](_0x1b8e6f[_0x209253(0x214)])){let _0x18f933=''+_0x1b8e6f[_0x209253(0x1e1)]+'\x0a\x0a'+_0x1b8e6f['message'];const _0x47ed07=await sendTelegramMsg(toTelegramMarkdown(_0x18f933),'Markdown');if(_0x47ed07)_0x23070=_0x1b8e6f['number'];}}}updateAvailable=isNewerVersion(settings[_0x209253(0x238)],serverversion),updateSetting(_0x209253(0x139),_0x23070),emitMessages();}}function emitMessages(){const _0x1b45b7=_0x2d2884,_0x48c021=settings[_0x1b45b7(0x1fe)];let _0x206abd=[];newMessages['forEach'](_0x161335=>{const _0x41e1ba=_0x1b45b7;_0x161335[_0x41e1ba(0x1d0)]>_0x48c021&&_0x206abd['push'](_0x161335);}),_0x206abd[_0x1b45b7(0x170)]>0x0&&getAllClients()[_0x1b45b7(0x17d)](_0x5c6c35=>{const _0x73c19d=_0x1b45b7;getSocket(_0x5c6c35['id'])[_0x73c19d(0x28f)]('message',_0x206abd);});}function _0x1b2e(_0x268b9c,_0xd42a14){const _0x18d4c4=_0x52ae();return _0x1b2e=function(_0x273a21,_0x23e1d7){_0x273a21=_0x273a21-0xb8;let _0x52ae0d=_0x18d4c4[_0x273a21];return _0x52ae0d;},_0x1b2e(_0x268b9c,_0xd42a14);}function confirmMessage(_0x5de0dc){const _0x104897=_0x2d2884;updateSetting(_0x104897(0x1fe),Number(_0x5de0dc));}function isNewerVersion(_0x44fea0,_0x1ee1a5){const _0x450806=_0x2d2884,_0x5338fa=_0x1ee1a5[_0x450806(0x29f)]('.'),_0x5ec6fa=_0x44fea0['split']('.');for(var _0x1d8e51=0x0;_0x1d8e51<_0x5ec6fa['length'];_0x1d8e51++){const _0x19e62e=~~_0x5ec6fa[_0x1d8e51],_0x4ea9dc=~~_0x5338fa[_0x1d8e51];if(_0x19e62e>_0x4ea9dc)return!![];if(_0x19e62e<_0x4ea9dc)return![];}return![];}function toTelegramMarkdown(_0x533a8b){const _0x386c9f=_0x2d2884,_0x2a2a22=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5b47fd=/\*{2}(.+?)\*{2}/gim;return _0x533a8b=_0x533a8b[_0x386c9f(0xf9)](_0x2a2a22,_0x386c9f(0x213))[_0x386c9f(0xf9)](_0x5b47fd,_0x386c9f(0x1e6)),_0x533a8b;}async function validateConfigFile(){const _0x3bf5dc=_0x2d2884,_0xe0119a=dbConfig['get']('bots')[_0x3bf5dc(0x13c)]('botID')['value']()||[];if(_0xe0119a['length']==0x0){let _0x3041fd=0x0,_0x4f4ec6=[];const _0x187a1e=/^bot-([0-9]{3})-config.json$/,_0x7991a6=fs['readdirSync'](configpath);_0x7991a6[_0x3bf5dc(0x17d)](_0x1ff020=>{const _0x5ac364=_0x3bf5dc,_0x5097cb=_0x187a1e['exec'](_0x1ff020);if(_0x5097cb){const _0x31f3b9=_0x5097cb[0x1];let _0x239e13=getBotAttributes(_0x31f3b9);_0x4f4ec6[_0x5ac364(0x25c)]({'botID':_0x31f3b9,'botname':_0x239e13['botname'],'status':_0x5ac364(0xc5),'live':_0x5ac364(0x242)}),_0x3041fd++;}}),_0x3041fd!=0x0&&(dbConfig[_0x3bf5dc(0x243)]('bots')[_0x3bf5dc(0x130)](_0x4f4ec6)[_0x3bf5dc(0x291)](),config=_0x4f4ec6,restoredConfigFile=_0x3041fd);}}async function restoreConfigNotify(_0x244eb5){const _0x35ffd0=_0x2d2884;let _0x18d977;if(restoredConfigFile==0x1)_0x18d977=_0x35ffd0(0x236);else _0x18d977=_0x35ffd0(0xbf);if(_0x244eb5)io['to']('botmanager')['emit'](_0x35ffd0(0xd8),_0x18d977);else{logger['simple'](_0x35ffd0(0x168)),logger['simple'](_0x18d977),logger[_0x35ffd0(0x256)]('-----------------------------------------------------------------------------------'),logger[_0x35ffd0(0x256)]('');if(tgBot&&settings[_0x35ffd0(0x1b0)]&&settings[_0x35ffd0(0x241)]!='orders')tgBot['sendMessage'](settings[_0x35ffd0(0x1b0)],_0x35ffd0(0x29a)+_0x18d977)[_0x35ffd0(0x286)](_0x36db19=>{telegramError(_0x36db19);});}}function validateCredentials(_0x405921,_0x28e4e5){const _0x2a9006=_0x2d2884;if(_0x405921[_0x2a9006(0x21d)]==settings[_0x2a9006(0x205)]&&bcrypt['compareSync'](_0x405921[_0x2a9006(0x203)],settings[_0x2a9006(0x22f)])){if(settings[_0x2a9006(0x21c)])return{'allow':![],'reason':_0x2a9006(0x187),'token':null};else{const _0x134c3a=generateLoginToken(_0x28e4e5);return{'allow':!![],'reason':_0x2a9006(0x16b),'token':_0x134c3a};}}else return{'allow':![],'reason':_0x2a9006(0xe8),'token':null};}function refreshToken(_0x5d54b1){const _0x4ea4af=_0x2d2884,_0x1190fb=generateLoginToken(_0x5d54b1);return{'allow':!![],'reason':_0x4ea4af(0x16b),'token':_0x1190fb};}function validateAccess(_0x522889,_0x537705,_0x413cca){const _0x536025=_0x2d2884,_0x365cf1=_0x413cca?_0x413cca:devices[_0x537705]['ip'];let _0x287372;const _0x57cf1c=_0x408d77=>{const _0x5eb763=_0x1b2e;if(settings['loginRequired']){if(settings[_0x5eb763(0x21c)]){if(telegram2FaApproved(_0x537705)){const _0x4ba3b0=generateLoginToken(_0x537705);return{'allow':!![],'reason':_0x5eb763(0xc0),'token':_0x4ba3b0};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x287372=validToken(_0x408d77,_0x537705),_0x287372['hasOwnProperty']('success')?{'allow':!![],'reason':_0x5eb763(0x296),'token':_0x408d77}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x5eb763(0x257),'token':null};};if(settings[_0x536025(0x2a0)]){let _0x885383=[...settings['whitelist'],_0x536025(0xe6),_0x536025(0x210),_0x536025(0x27b)];if(_0x885383['includes'](_0x365cf1))return _0x57cf1c(_0x522889);else{_0x287372=validToken(_0x522889,_0x537705);if(_0x287372[_0x536025(0x225)](_0x536025(0x1ed)))return _0x57cf1c(_0x522889);else{if(telegramIpApproved(_0x537705)){const _0x1365af=generateToken(_0x537705);return _0x287372=_0x57cf1c(_0x522889),_0x287372[_0x536025(0x1b8)]?{'allow':!![],'reason':_0x536025(0x107),'token':_0x1365af}:_0x287372;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x536025(0x25f),'token':null}:{'allow':![],'reason':_0x536025(0x17c),'token':null};}}}else return _0x57cf1c(_0x522889);}function timelyDecrypt(_0x4609ea,_0x186937=!![]){const _0x54bc0b=_0x2d2884;if(_0x4609ea)try{const _0x3cde2b=crypt['decrypt'](secure[_0x54bc0b(0x10c)],_0x4609ea)[_0x54bc0b(0xcc)],_0x576ccb=_0x3cde2b[_0x54bc0b(0x29f)]('@')[0x0],_0xb2be5d=_0x3cde2b['split']('@')[0x1],_0x2c186d=new Date()['getTime']();if(_0x186937){if(_0x2c186d-_0xb2be5d<maxSecretAge*0x3e8)return _0x576ccb;else return![];}else return _0x576ccb;}catch(_0x59568c){return![];}else return![];}const validToken=(_0x42c213,_0x3c70e8)=>{const _0x2131cf=_0x2d2884,_0x41f301=devices[_0x3c70e8]['ip'];if(!_0x42c213)return{'error':'No\x20authentication\x20token'};for(let _0x52aa3a of blacklist){if(_0x52aa3a[_0x2131cf(0x1a6)]==_0x42c213)return{'error':_0x2131cf(0x26f)};}let _0x244a6e;try{_0x244a6e=jwt[_0x2131cf(0x298)](_0x42c213,secure[_0x2131cf(0x1eb)]+_0x3c70e8);}catch{return{'error':_0x2131cf(0xbc)};}if(!_0x244a6e[_0x2131cf(0x225)](_0x2131cf(0x221))&&!_0x244a6e[_0x2131cf(0x225)]('username')||!_0x244a6e[_0x2131cf(0x225)](_0x2131cf(0xe4)))return{'error':_0x2131cf(0x110)};if(!_0x244a6e[_0x2131cf(0x225)](_0x2131cf(0x21d))&&_0x244a6e[_0x2131cf(0x225)](_0x2131cf(0x221))){const {clientip:_0x4145e5}=_0x244a6e;return _0x41f301==_0x4145e5?{'success':_0x2131cf(0x19d)}:{'error':_0x2131cf(0x158)};}else{if(_0x244a6e[_0x2131cf(0x225)]('username')&&_0x244a6e['hasOwnProperty'](_0x2131cf(0x221))){const {username:_0x3a3c5d,clientip:_0x552b9f}=_0x244a6e;return settings['bbUsername']==_0x3a3c5d&&_0x41f301==_0x552b9f?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2131cf(0xd2)};}}},generateLoginToken=_0x41f291=>{const _0xff83ac=_0x2d2884;if(_0x41f291){const _0x5e00d8=devices[_0x41f291]['ip'];return jwt['sign']({'username':settings[_0xff83ac(0x205)],'clientip':_0x5e00d8},secure[_0xff83ac(0x1eb)]+_0x41f291,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4088d3=>{const _0x14554c=_0x2d2884;if(_0x4088d3){const _0x43499f=devices[_0x4088d3]['ip'];return jwt['sign']({'clientip':_0x43499f},secure[_0x14554c(0x1eb)]+_0x4088d3,{'expiresIn':devices[_0x4088d3]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x569eb4=>{const _0x4dab55=_0x2d2884;let _0x3d739e=![];return devices[_0x569eb4]['telegramIpApproval']&&devices[_0x569eb4]['telegramIpApproval']['expiry']!='reject'&&(_0x3d739e=devices[_0x569eb4][_0x4dab55(0x126)]['clientip']==devices[_0x569eb4]['ip']&&new Date()[_0x4dab55(0x1a1)]()-devices[_0x569eb4][_0x4dab55(0x126)]['timestamp']<devices[_0x569eb4]['telegramIpApproval'][_0x4dab55(0x1e4)]*0x3c*0x3e8),_0x3d739e;},telegram2FaApproved=_0x9d256c=>{const _0x328ea1=_0x2d2884;let _0x188b9a=![];return devices[_0x9d256c][_0x328ea1(0x208)]&&devices[_0x9d256c][_0x328ea1(0x208)]['expiry']!='reject'&&(_0x188b9a=devices[_0x9d256c]['telegram2FaApproval'][_0x328ea1(0x221)]==devices[_0x9d256c]['ip']&&new Date()[_0x328ea1(0x1a1)]()-devices[_0x9d256c][_0x328ea1(0x208)][_0x328ea1(0xfb)]<devices[_0x9d256c][_0x328ea1(0x208)][_0x328ea1(0x1e4)]*0x3c*0x3e8),_0x188b9a;},normalizeIP=_0x2ee889=>{const _0x2373d0=_0x2d2884;let _0x5e436b=null,_0x4d56f1=null;if(ipaddr[_0x2373d0(0x14c)](_0x2ee889)){const _0x4ecd50=ipaddr['parse'](_0x2ee889);_0x4ecd50[_0x2373d0(0x1bd)]()===_0x2373d0(0xfc)?(_0x4ecd50['isIPv4MappedAddress']()&&(_0x5e436b=_0x4ecd50[_0x2373d0(0x1f9)]()[_0x2373d0(0x1b5)]()),_0x4d56f1=_0x4ecd50[_0x2373d0(0x1b5)]()):(_0x5e436b=_0x4ecd50[_0x2373d0(0x1b5)](),_0x4d56f1=_0x4ecd50[_0x2373d0(0x121)]()[_0x2373d0(0x1b5)]());}return{'show':_0x5e436b?_0x5e436b:_0x4d56f1,'store':_0x4d56f1};};function formatDate(_0x42aa15){const _0x4f1767=_0x2d2884;return _0x42aa15[_0x4f1767(0x234)]()+'/'+(_0x42aa15['getMonth']()+0x1)[_0x4f1767(0x1b5)]()[_0x4f1767(0x176)](0x2,'0')+'/'+_0x42aa15[_0x4f1767(0x13e)]()[_0x4f1767(0x1b5)]()[_0x4f1767(0x176)](0x2,'0')+'\x20'+_0x42aa15[_0x4f1767(0x270)]()[_0x4f1767(0x1b5)]()[_0x4f1767(0x176)](0x2,'0')+':'+_0x42aa15[_0x4f1767(0xd6)]()[_0x4f1767(0x1b5)]()[_0x4f1767(0x176)](0x2,'0')+':'+_0x42aa15[_0x4f1767(0x1af)]()[_0x4f1767(0x1b5)]()['padStart'](0x2,'0');}function sleep(_0x2a493b){return new Promise(_0x3f789f=>setTimeout(_0x3f789f,_0x2a493b));}