const _0x3e4df7=_0x26c6;(function(_0x55de4c,_0x293bca){const _0x4f12df=_0x26c6,_0x12c450=_0x55de4c();while(!![]){try{const _0xa4c958=-parseInt(_0x4f12df(0x19d))/0x1+parseInt(_0x4f12df(0x1bd))/0x2*(parseInt(_0x4f12df(0x147))/0x3)+parseInt(_0x4f12df(0x213))/0x4*(parseInt(_0x4f12df(0x1f5))/0x5)+-parseInt(_0x4f12df(0x1ee))/0x6+-parseInt(_0x4f12df(0x290))/0x7+-parseInt(_0x4f12df(0x1ed))/0x8+parseInt(_0x4f12df(0x296))/0x9;if(_0xa4c958===_0x293bca)break;else _0x12c450['push'](_0x12c450['shift']());}catch(_0x4a941b){_0x12c450['push'](_0x12c450['shift']());}}}(_0x57fe,0x340fa));const _0x5c53c6=function(){let _0x534f55=!![];return function(_0x1d0d1d,_0x2103b4){const _0x4272db=_0x534f55?function(){const _0x4d0dc5=_0x26c6;if(_0x2103b4){const _0x3f1dc5=_0x2103b4[_0x4d0dc5(0x1bf)](_0x1d0d1d,arguments);return _0x2103b4=null,_0x3f1dc5;}}:function(){};return _0x534f55=![],_0x4272db;};}(),_0x491dbd=_0x5c53c6(this,function(){const _0x503b51=_0x26c6;return _0x491dbd['toString']()[_0x503b51(0x200)](_0x503b51(0x2c7))[_0x503b51(0x16a)]()[_0x503b51(0x224)](_0x491dbd)[_0x503b51(0x200)](_0x503b51(0x2c7));});_0x491dbd();'use strict';process[_0x3e4df7(0x1b2)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x3e4df7(0x1c6)),fs=require('fs'),fns=require(_0x3e4df7(0x284)),low=require(_0x3e4df7(0x1c2)),FileSync=require(_0x3e4df7(0x270)),path=require('path'),crypto=require(_0x3e4df7(0x1f8)),Crypt=require(_0x3e4df7(0x299))['Crypt'],RSA=require(_0x3e4df7(0x299))[_0x3e4df7(0x1af)],bcrypt=require(_0x3e4df7(0x230)),jwt=require(_0x3e4df7(0x1a8)),ipaddr=require(_0x3e4df7(0x173)),argv=require(_0x3e4df7(0x282))(process[_0x3e4df7(0x2a1)][_0x3e4df7(0x180)](0x2))['argv'],uuidRandom=require(_0x3e4df7(0x206)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require('mixpanel'),axios=require(_0x3e4df7(0x1e8)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x3e4df7(0x18e)),PORT=argv['port']||_0x3e4df7(0x18f),pattern=/^[0-9]{2,4}$/;!pattern[_0x3e4df7(0x245)](PORT)&&(console['log'](_0x3e4df7(0x2b6)+PORT+_0x3e4df7(0x22f)),process[_0x3e4df7(0x215)](0x1));const HOST=argv[_0x3e4df7(0x1dd)]||null,userID=argv[_0x3e4df7(0x211)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x3e4df7(0x237),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x3e4df7(0x205);let validInstallation=!![];!fs[_0x3e4df7(0x1cc)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3e4df7(0x2a3)),configpath=userID?bbpath+_0x3e4df7(0x1c8)+userID+'/':bbpath+_0x3e4df7(0x1c8),configbackuppath=configpath+_0x3e4df7(0x1de),logspath=userID?bbpath+_0x3e4df7(0x223)+userID+'/':bbpath+_0x3e4df7(0x223),zippath=userID?bbpath+_0x3e4df7(0x1b6)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x3e4df7(0x214)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x3e4df7(0x1cc)](configpath)&&fs[_0x3e4df7(0x18b)](configpath);!fs[_0x3e4df7(0x1cc)](configbackuppath)&&fs[_0x3e4df7(0x18b)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x3e4df7(0x18b)](logspath);!fs['existsSync'](zippath)&&fs['mkdirSync'](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3e4df7(0x2b3)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3e4df7(0x2b3)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3e4df7(0x2b8)}})[_0x3e4df7(0x260)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3e4df7(0x2b3)]({'secure':{},'blacklist':[]})[_0x3e4df7(0x260)]();let crypt=new Crypt({'md':_0x3e4df7(0x19e),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x3e4df7(0x240),{'host':_0x3e4df7(0x14d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x3e4df7(0x1c9)]&&settings[_0x3e4df7(0x1c9)]!=''&&settings[_0x3e4df7(0x280)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x48705a=>{const _0x19a862=_0x3e4df7;console[_0x19a862(0x2a7)](_0x48705a);},'simple':_0x241d8a=>{const _0x2e9f6b=_0x3e4df7;console['log'](_0x241d8a),loggerfile[_0x2e9f6b(0x260)](util[_0x2e9f6b(0x283)](_0x241d8a)+'\x0a');},'full':async _0x2a1f4c=>{const _0x220f7e=_0x3e4df7,_0x4f718b=getTimeStamp()+_0x220f7e(0x233)+_0x2a1f4c;console[_0x220f7e(0x2a7)](_0x4f718b),loggerfile[_0x220f7e(0x260)](util[_0x220f7e(0x283)](_0x4f718b)+'\x0a');if(tgBot&&settings[_0x220f7e(0x2cc)]&&settings[_0x220f7e(0x2ca)]!='orders')await tgBot['sendMessage'](settings[_0x220f7e(0x2cc)],'Bot\x20Mgr\x20>\x20'+_0x2a1f4c)['catch'](_0x5466b6=>{telegramError(_0x5466b6);});}};process['on'](_0x3e4df7(0x1a0),function(_0x1edb71){const _0x15de41=_0x3e4df7;logger[_0x15de41(0x1a3)](_0x1edb71);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3e4df7(0x216))[_0x3e4df7(0x2c3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3e4df7(0x273)),app=express(),http=require(_0x3e4df7(0x153))['createServer'](app);app[_0x3e4df7(0x187)]('/download/:type',async(_0x1d3332,_0x28c7fa)=>{const _0x105bad=_0x3e4df7,_0x58d1cb=_0x1d3332[_0x105bad(0x189)][_0x105bad(0x177)],_0x2b6721=getClientsWithBotID(_0x105bad(0x210)),_0x3da14e=_0x1d3332[_0x105bad(0x175)]['uuid'],_0x5440a4=timelyDecrypt(_0x3da14e,![]),_0x5df9d2=_0x2b6721[_0x105bad(0x26c)](_0x371752=>_0x371752[_0x105bad(0x2ac)]==_0x5440a4);if(_0x5df9d2){const _0x4010f9=normalizeIP(_0x1d3332['socket'][_0x105bad(0x14e)])[_0x105bad(0x2af)],_0x5b51ba=_0x1d3332['headers']['tkn'];if(validateAccess(_0x5b51ba,_0x5440a4,_0x4010f9)[_0x105bad(0x20f)])await zipFiles(_0x58d1cb),_0x28c7fa[_0x105bad(0x207)](zippath+(_0x58d1cb+_0x105bad(0x1d0)),_0x311d1d=>{const _0x4d3410=_0x105bad;_0x311d1d&&(logger['full'](_0x4d3410(0x2ba)+_0x58d1cb),logger[_0x4d3410(0x1a3)](_0x311d1d));});else logger['full'](_0x105bad(0x251)+_0x58d1cb+'\x20(1)');}else logger['full'](_0x105bad(0x251)+_0x58d1cb+_0x105bad(0x241));}),app[_0x3e4df7(0x23c)](express[_0x3e4df7(0x144)](path['join'](__dirname,bbpath2,_0x3e4df7(0x1a6)))),app['use'](express[_0x3e4df7(0x144)](path['join'](__dirname,bbpath2,_0x3e4df7(0x1dc)))),app[_0x3e4df7(0x187)]('/',function(_0x515a2c,_0x4eaafe){const _0x4317bf=_0x3e4df7;_0x4eaafe[_0x4317bf(0x1ec)](path['join'](__dirname,bbpath2,_0x4317bf(0x1a6),_0x4317bf(0x15a)));}),app[_0x3e4df7(0x187)](_0x3e4df7(0x26a),function(_0x4aea24,_0xe9375a){const _0x4a709e=_0x3e4df7;_0xe9375a[_0x4a709e(0x1ec)](path[_0x4a709e(0x1a2)](__dirname,bbpath2,'build',_0x4a709e(0x15a)));}),app[_0x3e4df7(0x187)]('/:bot/portfolio',(_0x2ef747,_0x217e73)=>{const _0x47869b=_0x3e4df7;_0x217e73[_0x47869b(0x1ec)](path[_0x47869b(0x1a2)](__dirname,bbpath2,'build',_0x47869b(0x15a)));}),app[_0x3e4df7(0x187)](_0x3e4df7(0x1bc),(_0x2aac64,_0x4ec015)=>{const _0x4313c5=_0x3e4df7;_0x4ec015[_0x4313c5(0x1ec)](path[_0x4313c5(0x1a2)](__dirname,bbpath2,_0x4313c5(0x1dc),_0x4313c5(0x15a)));}),app[_0x3e4df7(0x187)]('/:bot/coins',(_0x5c55e0,_0x6e3fe3)=>{const _0x314f69=_0x3e4df7;_0x6e3fe3[_0x314f69(0x1ec)](path[_0x314f69(0x1a2)](__dirname,bbpath2,_0x314f69(0x1dc),'index.html'));}),app[_0x3e4df7(0x187)]('/:bot/history',(_0x445c41,_0x45119a)=>{const _0x3600a5=_0x3e4df7;_0x45119a[_0x3600a5(0x1ec)](path['join'](__dirname,bbpath2,_0x3600a5(0x1dc),_0x3600a5(0x15a)));}),app[_0x3e4df7(0x187)]('/:bot/configuration',(_0x1c62a4,_0x21794d)=>{const _0xae43e9=_0x3e4df7;_0x21794d[_0xae43e9(0x1ec)](path['join'](__dirname,bbpath2,'build',_0xae43e9(0x15a)));}),app[_0x3e4df7(0x187)](_0x3e4df7(0x20d),(_0x214f34,_0x499017)=>{const _0x37cab4=_0x3e4df7;_0x499017[_0x37cab4(0x1ec)](path['join'](__dirname,bbpath2,_0x37cab4(0x1dc),_0x37cab4(0x15a)));});if(HOST)http[_0x3e4df7(0x242)](PORT,HOST);else http[_0x3e4df7(0x242)](PORT);const io=require(_0x3e4df7(0x254))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x5e6910=_0x3e4df7;logger['simple'](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger[_0x5e6910(0x141)](_0x5e6910(0x164)+PORT),logger[_0x5e6910(0x1a3)](_0x5e6910(0x15e));if(config[_0x5e6910(0x28e)]!=0x0)for(const _0x39f485 of config){if(_0x39f485[_0x5e6910(0x1d8)]=='enabled'||_0x39f485[_0x5e6910(0x1d8)]=='new')await logger[_0x5e6910(0x141)](_0x5e6910(0x17c)+_0x39f485[_0x5e6910(0x1a7)]+_0x5e6910(0x1be)+_0x39f485[_0x5e6910(0x195)]),startBot([_0x39f485[_0x5e6910(0x1a7)],userID],{'cwd':bbpath},function(_0x2c6641){const _0x32e298=_0x5e6910;if(_0x2c6641)logger[_0x32e298(0x141)](_0x2c6641);});else(_0x39f485[_0x5e6910(0x1d8)]==_0x5e6910(0x29e)||_0x39f485[_0x5e6910(0x1d8)]==_0x5e6910(0x176))&&await logger['full'](_0x5e6910(0x24a)+_0x39f485[_0x5e6910(0x1a7)]+_0x5e6910(0x1be)+_0x39f485[_0x5e6910(0x195)]);}else!newBot&&logger[_0x5e6910(0x1a3)](_0x5e6910(0x275));if(newBot)addBot();logger[_0x5e6910(0x1a3)](_0x5e6910(0x15e)),logger[_0x5e6910(0x1a3)]('');}function startSocket(){const _0x338b76=_0x3e4df7;io['on'](_0x338b76(0x274),_0x2aec85=>{const _0x146d4d=_0x338b76;let _0x1964c9,_0x2bb18b,_0x45a9d3,_0x388049,_0x2fd934;const _0x204ed0=_0x2aec85[_0x146d4d(0x21f)][_0x146d4d(0x175)][_0x146d4d(0x288)];_0x2bb18b=_0x204ed0[_0x146d4d(0x297)](/bot[0-9]{3}/);if(_0x2bb18b)_0x45a9d3=_0x2bb18b[0x0][_0x146d4d(0x297)](/[0-9]{3}/);if(_0x45a9d3)_0x1964c9=_0x45a9d3[0x0];else _0x1964c9=_0x146d4d(0x210);const _0x5cc914=_0x2aec85[_0x146d4d(0x21f)][_0x146d4d(0x15d)][_0x146d4d(0x2b0)];if(!_0x5cc914)_0x2aec85[_0x146d4d(0x193)](_0x146d4d(0x1d8),{'publicKey':secure[_0x146d4d(0x1f7)]});else{_0x388049=timelyDecrypt(_0x5cc914,![]);if(!_0x388049)_0x2aec85[_0x146d4d(0x193)](_0x146d4d(0x1d8),{'publicKey':secure[_0x146d4d(0x1f7)]});else{_0x2fd934=normalizeIP(_0x2aec85[_0x146d4d(0x262)][_0x146d4d(0x14e)])[_0x146d4d(0x2af)];if(!devices[_0x388049])devices[_0x388049]={'uuid':_0x388049,'access':{'token':null}};devices[_0x388049]['ip']=_0x2fd934;const _0x2ae7ca=addClient(_0x2aec85['id'],_0x388049,_0x1964c9);setAccess(_0x2ae7ca),emitMessages(),_0x2aec85['on']('login',_0x30fc40=>{const _0xa1fdb0=_0x146d4d,_0x478e08=timelyDecrypt(_0x30fc40[_0xa1fdb0(0x232)]);if(_0x478e08){_0x30fc40={'username':_0x30fc40[_0xa1fdb0(0x201)],'password':_0x478e08},devices[_0x388049][_0xa1fdb0(0x2ae)]=validateCredentials(_0x30fc40,_0x388049);if(devices[_0x388049]['access'][_0xa1fdb0(0x20f)]==![]&&devices[_0x388049][_0xa1fdb0(0x2ae)]['reason']==_0xa1fdb0(0x1ce))_0x2aec85[_0xa1fdb0(0x193)]('status',{'access':devices[_0x388049][_0xa1fdb0(0x2ae)]}),loginAccess2FA(_0x388049,_0x2fd934);else{if(devices[_0x388049][_0xa1fdb0(0x2ae)][_0xa1fdb0(0x20f)]==![]&&devices[_0x388049][_0xa1fdb0(0x2ae)][_0xa1fdb0(0x1e3)]==_0xa1fdb0(0x1f3))_0x2aec85[_0xa1fdb0(0x193)](_0xa1fdb0(0x1d8),{'access':devices[_0x388049]['access']});else devices[_0x388049]['access'][_0xa1fdb0(0x20f)]&&devices[_0x388049][_0xa1fdb0(0x2ae)][_0xa1fdb0(0x1e3)]==_0xa1fdb0(0x25c)&&(getClientsWithUuid(_0x388049)[_0xa1fdb0(0x255)](_0x788104=>{setAccess(_0x788104);}),setTokenRefresh(_0x388049),setSessionTimeout(_0xa1fdb0(0x167),_0x388049));}}else logger[_0xa1fdb0(0x141)](_0xa1fdb0(0x2c4));}),_0x2aec85['on'](_0x146d4d(0x1a9),()=>{resetPassword();}),_0x2aec85['on'](_0x146d4d(0x1b3),_0x245890=>{removeClient(_0x2aec85['id']);}),_0x1964c9==_0x146d4d(0x210)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x569da1){const _0x56fef2=_0x3e4df7;if(_0x569da1!=_0x56fef2(0x210)&&config['apiKey']!=''){if(pid[_0x569da1])pid[_0x569da1][_0x56fef2(0x163)]({'function':_0x56fef2(0x269),'args':null});}}function getSocket(_0x44c9f7){const _0x8997d2=_0x3e4df7;return io[_0x8997d2(0x2cf)]['sockets'][_0x8997d2(0x187)](_0x44c9f7);}function setAccess(_0x1691ba){const _0x48e92a=_0x3e4df7,_0x12d10e=getSocket(_0x1691ba['id']),_0x253f79=_0x1691ba[_0x48e92a(0x2ac)],_0x3573ad=_0x1691ba[_0x48e92a(0x2a6)];devices[_0x253f79][_0x48e92a(0x2ae)]=validateAccess(devices[_0x253f79][_0x48e92a(0x2ae)][_0x48e92a(0x1f1)],_0x253f79),_0x12d10e['join'](_0x253f79);if(devices[_0x253f79][_0x48e92a(0x2ae)][_0x48e92a(0x20f)]){_0x12d10e['join'](_0x3573ad);if(_0x3573ad==_0x48e92a(0x210))initializeSocketBotManager(_0x12d10e);else initializeSocketBot(_0x12d10e);initClient(_0x3573ad);}devices[_0x253f79][_0x48e92a(0x2ae)]['token']&&devices[_0x253f79]['access'][_0x48e92a(0x1e3)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x48e92a(0x235),_0x253f79),devices[_0x253f79][_0x48e92a(0x2ae)]['token']&&devices[_0x253f79][_0x48e92a(0x2ae)][_0x48e92a(0x1e3)]==_0x48e92a(0x2c2)&&setSessionTimeout(_0x48e92a(0x167),_0x253f79),_0x12d10e[_0x48e92a(0x193)]('status',{'status':_0x1691ba[_0x48e92a(0x21e)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x253f79]['access'],'externalip':devices[_0x253f79]['ip'],'publicKey':secure[_0x48e92a(0x1f7)],'userid':settings[_0x48e92a(0x27e)],'validInstallation':validInstallation}),devices[_0x253f79][_0x48e92a(0x2ae)]['allow']==![]&&devices[_0x253f79][_0x48e92a(0x2ae)]['reason']==_0x48e92a(0x22c)&&temporaryAccess2FA(_0x253f79,devices[_0x253f79]['ip']);}function setSessionTimeout(_0xe1724c,_0x361a14){const _0x33c393=_0x3e4df7;let _0x560e8b;if(_0xe1724c==_0x33c393(0x167))_0x560e8b=loginExpiry*0x3c*0x3e8;else _0x560e8b=devices[_0x361a14][_0x33c393(0x23f)][_0x33c393(0x20a)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x361a14][_0x33c393(0x23f)][_0x33c393(0x182)]);if(devices[_0x361a14][_0x33c393(0x268)])clearTimeout(devices[_0x361a14][_0x33c393(0x268)]);devices[_0x361a14][_0x33c393(0x268)]=setTimeout(()=>{const _0x4addad=_0x33c393;if(devices[_0x361a14][_0x4addad(0x24e)])clearTimeout(devices[_0x361a14][_0x4addad(0x24e)]);removeSocketListeners(_0x361a14),addBlacklist(_0x361a14),devices[_0x361a14]['telegramIpApproval']=null,devices[_0x361a14][_0x4addad(0x2b5)]=null,devices[_0x361a14][_0x4addad(0x2ae)][_0x4addad(0x1f1)]=null,devices[_0x361a14][_0x4addad(0x2ae)]=validateAccess(devices[_0x361a14][_0x4addad(0x2ae)][_0x4addad(0x1f1)],_0x361a14),!(devices[_0x361a14][_0x4addad(0x2ae)][_0x4addad(0x20f)]&&devices[_0x361a14][_0x4addad(0x2ae)]['reason']==_0x4addad(0x28f))&&(_0xe1724c=='login'?io['to'](_0x361a14)[_0x4addad(0x193)](_0x4addad(0x1d8),{'access':{'allow':![],'reason':_0x4addad(0x26f),'token':null}}):io['to'](_0x361a14)[_0x4addad(0x193)]('status',{'access':{'allow':![],'reason':_0x4addad(0x21a),'token':null}})),devices[_0x361a14][_0x4addad(0x2ae)][_0x4addad(0x1f1)]=null;},_0x560e8b);}function setTokenRefresh(_0x6e56da){const _0x3dd275=_0x3e4df7;if(devices[_0x6e56da][_0x3dd275(0x24e)])clearTimeout(devices[_0x6e56da]['pidRefreshToken']);devices[_0x6e56da][_0x3dd275(0x24e)]=setTimeout(()=>{const _0x390ffd=_0x3dd275;getClientsWithUuid(_0x6e56da)[_0x390ffd(0x28e)]!=0x0?(devices[_0x6e56da]['access']=refreshToken(_0x6e56da),io['to'](_0x6e56da)[_0x390ffd(0x193)](_0x390ffd(0x1d8),{'status':_0x390ffd(0x236),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x6e56da][_0x390ffd(0x2ae)],'externalip':devices[_0x6e56da]['ip'],'publicKey':secure[_0x390ffd(0x1f7)],'validInstallation':validInstallation}),setTokenRefresh(_0x6e56da)):clearTimeout(devices[_0x6e56da][_0x390ffd(0x24e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4e62ac){const _0x2f95f4=_0x3e4df7,_0x897822=getClient(_0x4e62ac['id'])[_0x2f95f4(0x2ac)];_0x4e62ac['emit'](_0x2f95f4(0x186),config),_0x4e62ac['emit'](_0x2f95f4(0x253),cleanSettings()),_0x4e62ac['on'](_0x2f95f4(0x239),_0x5eedee=>{const _0xabfae7=_0x2f95f4;if(validateAccess(_0x5eedee,_0x897822)[_0xabfae7(0x20f)])addBot();else logger['full'](_0xabfae7(0x17a));}),_0x4e62ac['on'](_0x2f95f4(0x1b0),(_0x5b1e19,_0x5ef888)=>{const _0x1edc3f=_0x2f95f4;if(validateAccess(_0x5ef888,_0x897822)[_0x1edc3f(0x20f)])toggleBot(_0x5b1e19[_0x1edc3f(0x1a7)],_0x5b1e19[_0x1edc3f(0x1d8)],_0x5b1e19[_0x1edc3f(0x17f)]);else logger[_0x1edc3f(0x141)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4e62ac['on']('toggle-bot-mode',(_0x5f3f21,_0xd42d63)=>{const _0x99750a=_0x2f95f4;if(validateAccess(_0xd42d63,_0x897822)[_0x99750a(0x20f)])toggleBotMode(_0x5f3f21);else logger['full'](_0x99750a(0x228));}),_0x4e62ac['on'](_0x2f95f4(0x16c),(_0xf13997,_0x1abf09)=>{const _0x2055ef=_0x2f95f4;if(validateAccess(_0x1abf09,_0x897822)[_0x2055ef(0x20f)])deleteBot(_0xf13997);else logger[_0x2055ef(0x141)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4e62ac['on']('store-settings',(_0xff0d7d,_0x3ec0dc)=>{const _0xbd34df=_0x2f95f4;if(validateAccess(_0x3ec0dc,_0x897822)[_0xbd34df(0x20f)])storeSettings(_0xff0d7d,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4e62ac['on']('update-bb',_0x405dcd=>{const _0x472a5f=_0x2f95f4;if(validateAccess(_0x405dcd,_0x897822)[_0x472a5f(0x20f)])updateBB();else logger[_0x472a5f(0x141)](_0x472a5f(0x2d0));}),_0x4e62ac['on'](_0x2f95f4(0x181),_0xd217c0=>{const _0x58a717=_0x2f95f4;if(validateAccess(_0xd217c0,_0x897822)[_0x58a717(0x20f)])getMessages();else logger[_0x58a717(0x141)](_0x58a717(0x1e5));}),_0x4e62ac['on'](_0x2f95f4(0x298),(_0x1f808f,_0x9b7b20)=>{const _0x3ec1a8=_0x2f95f4;if(validateAccess(_0x9b7b20,_0x897822)[_0x3ec1a8(0x20f)])confirmMessage(_0x1f808f);else logger[_0x3ec1a8(0x141)](_0x3ec1a8(0x19f));}),_0x4e62ac['on'](_0x2f95f4(0x1ab),_0x5dbde4=>{const _0x1a14e9=_0x2f95f4;if(validateAccess(_0x5dbde4,_0x897822)[_0x1a14e9(0x20f)]){if(devices[_0x897822]['pidRefreshToken'])clearTimeout(devices[_0x897822][_0x1a14e9(0x24e)]);if(devices[_0x897822]['pidExpireLogin'])clearTimeout(devices[_0x897822]['pidExpireLogin']);removeSocketListeners(getClient(_0x4e62ac['id'])[_0x1a14e9(0x2ac)]),addBlacklist(_0x897822),devices[_0x897822][_0x1a14e9(0x23f)]=null,devices[_0x897822][_0x1a14e9(0x2b5)]=null,devices[_0x897822]['access']['token']=null,io['to'](getClient(_0x4e62ac['id'])[_0x1a14e9(0x2ac)])[_0x1a14e9(0x193)](_0x1a14e9(0x1d8),{'access':{'allow':![],'reason':_0x1a14e9(0x24f),'token':null}});}else logger[_0x1a14e9(0x141)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0xc1039d){const _0x607c3=_0x3e4df7,_0x5ee365=getClient(_0xc1039d['id'])['bot'],_0x12e99f=getClient(_0xc1039d['id'])[_0x607c3(0x2ac)];_0xc1039d['on']('get-logs',(_0x5daf34,_0x4af239)=>{const _0x9b4642=_0x607c3;if(validateAccess(_0x4af239,_0x12e99f)['allow']){if(pid[_0x5ee365])pid[_0x5ee365][_0x9b4642(0x163)]({'function':_0x9b4642(0x1ff),'args':_0x5daf34});}else logger[_0x9b4642(0x141)]('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0xc1039d['on'](_0x607c3(0x194),(_0x10247e,_0x9bf268)=>{const _0x121c4b=_0x607c3;if(validateAccess(_0x9bf268,_0x12e99f)[_0x121c4b(0x20f)]){if(pid[_0x5ee365])pid[_0x5ee365][_0x121c4b(0x163)]({'function':_0x121c4b(0x25e),'args':_0x10247e});}else logger['full'](_0x121c4b(0x1f2));}),_0xc1039d['on'](_0x607c3(0x157),(_0x2ab57a,_0x209d19)=>{const _0x2863a7=_0x607c3;if(validateAccess(_0x209d19,_0x12e99f)[_0x2863a7(0x20f)]){if(pid[_0x5ee365])pid[_0x5ee365][_0x2863a7(0x163)]({'function':_0x2863a7(0x151),'args':_0x2ab57a});}else logger['full'](_0x2863a7(0x17e));}),_0xc1039d['on'](_0x607c3(0x2b2),(_0x54a850,_0x23d822)=>{const _0x25c5e4=_0x607c3;if(validateAccess(_0x23d822,_0x12e99f)['allow']){if(pid[_0x5ee365])pid[_0x5ee365]['send']({'function':_0x25c5e4(0x2bf),'args':_0x54a850});}else logger[_0x25c5e4(0x141)](_0x25c5e4(0x1ad));}),_0xc1039d['on'](_0x607c3(0x16d),(_0x489b57,_0x2c93b4)=>{const _0x32d9b1=_0x607c3;if(validateAccess(_0x2c93b4,_0x12e99f)[_0x32d9b1(0x20f)]){if(pid[_0x5ee365])pid[_0x5ee365][_0x32d9b1(0x163)]({'function':_0x32d9b1(0x29b),'args':_0x489b57});}else logger[_0x32d9b1(0x141)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0xc1039d['on'](_0x607c3(0x25d),_0x20700e=>{const _0x369fba=_0x607c3;if(validateAccess(_0x20700e,_0x12e99f)['allow']){if(pid[_0x5ee365])pid[_0x5ee365]['send']({'function':_0x369fba(0x227),'args':null});}else logger[_0x369fba(0x141)](_0x369fba(0x1d3));}),_0xc1039d['on'](_0x607c3(0x22e),(_0x5fa51d,_0x5fa61a)=>{const _0x5630b1=_0x607c3;if(validateAccess(_0x5fa61a,_0x12e99f)[_0x5630b1(0x20f)]){if(pid[_0x5ee365])pid[_0x5ee365][_0x5630b1(0x163)]({'function':_0x5630b1(0x267),'args':_0x5fa51d});}else logger[_0x5630b1(0x141)](_0x5630b1(0x1fc));}),_0xc1039d['on'](_0x607c3(0x2c9),_0x5b486b=>{const _0x24c621=_0x607c3;if(validateAccess(_0x5b486b,_0x12e99f)[_0x24c621(0x20f)]){if(pid[_0x5ee365])pid[_0x5ee365][_0x24c621(0x163)]({'function':_0x24c621(0x1b9),'args':null});}else logger[_0x24c621(0x141)](_0x24c621(0x2c5));}),_0xc1039d['on'](_0x607c3(0x148),_0x1624aa=>{const _0x249743=_0x607c3;if(validateAccess(_0x1624aa,_0x12e99f)[_0x249743(0x20f)])updateBB();else logger[_0x249743(0x141)](_0x249743(0x2d0));}),_0xc1039d['on'](_0x607c3(0x181),_0x388a37=>{const _0x534595=_0x607c3;if(validateAccess(_0x388a37,_0x12e99f)['allow'])getMessages();else logger[_0x534595(0x141)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0xc1039d['on']('confirm-message',(_0x121325,_0x5c22d2)=>{const _0x2a22d8=_0x607c3;if(validateAccess(_0x5c22d2,_0x12e99f)[_0x2a22d8(0x20f)])confirmMessage(_0x121325);else logger[_0x2a22d8(0x141)](_0x2a22d8(0x19f));}),_0xc1039d['on'](_0x607c3(0x1ab),_0x4dc48f=>{const _0x4df3ee=_0x607c3;if(validateAccess(_0x4dc48f,_0x12e99f)[_0x4df3ee(0x20f)]){if(devices[_0x12e99f][_0x4df3ee(0x24e)])clearTimeout(devices[_0x12e99f]['pidRefreshToken']);if(devices[_0x12e99f][_0x4df3ee(0x268)])clearTimeout(devices[_0x12e99f][_0x4df3ee(0x268)]);removeSocketListeners(getClient(_0xc1039d['id'])['uuid']),addBlacklist(_0x12e99f),devices[_0x12e99f][_0x4df3ee(0x23f)]=null,devices[_0x12e99f]['telegram2FaApproval']=null,devices[_0x12e99f]['access'][_0x4df3ee(0x1f1)]=null,io['to'](getClient(_0xc1039d['id'])[_0x4df3ee(0x2ac)])[_0x4df3ee(0x193)](_0x4df3ee(0x1d8),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x4df3ee(0x141)](_0x4df3ee(0x149));});}function removeSocketListeners(_0xb0f09d){getClientsWithUuid(_0xb0f09d)['forEach'](_0x2969eb=>{getSocket(_0x2969eb['id'])['removeAllListeners']();});}function cleanSettings(){const _0xba25ed=_0x3e4df7;let _0x17057c=settings;return settings[_0xba25ed(0x1c9)]&&settings[_0xba25ed(0x1c9)]!=''&&(_0x17057c={..._0x17057c,'telegramToken':'************'}),settings[_0xba25ed(0x23b)]&&settings[_0xba25ed(0x23b)]!=''&&(_0x17057c={..._0x17057c,'bbPassword':_0xba25ed(0x1fe)}),(settings[_0xba25ed(0x23b)]&&settings[_0xba25ed(0x23b)]==_0xba25ed(0x27a)||settings[_0xba25ed(0x1c9)]&&settings[_0xba25ed(0x1c9)]==_0xba25ed(0x27a))&&(_0x17057c={..._0x17057c,'restored':{'password':settings['bbPassword']==_0xba25ed(0x27a),'telegram':settings['telegramToken']==_0xba25ed(0x27a)}}),_0x17057c;}function updateBB(){const _0x5ba277=_0x3e4df7;installingUpdate=!![],config[_0x5ba277(0x255)](_0x21ca71=>{const _0x1162bf=_0x5ba277;restartBot(_0x21ca71[_0x1162bf(0x1a7)]);}),process['send']({'update':!![]},_0x87dd25=>{});}function startBot(_0x444ef4,_0x3bcfa1,_0x21c661){const _0x4580ad=_0x3e4df7;let _0x417abc=![];const _0x4f8751=_0x444ef4[0x0];_0x3bcfa1={..._0x3bcfa1,'stdio':[_0x4580ad(0x1da),'inherit',_0x4580ad(0x1da),_0x4580ad(0x1c1)]},pid[_0x4f8751]=childProcess[_0x4580ad(0x1ae)](botfile,_0x444ef4,_0x3bcfa1),pid[_0x4f8751]['on'](_0x4580ad(0x209),_0x455000=>{const _0xab155b=_0x4580ad;switch(Object[_0xab155b(0x14c)](_0x455000)[0x0]){case _0xab155b(0x195):updateBotName(_0x4f8751,_0x455000[_0xab155b(0x195)]);break;case'updatebotmanager':updateBotManager();break;case _0xab155b(0x1d8):updateStatus(_0x4f8751,_0x455000[_0xab155b(0x1d8)]);break;case'live':updateLive(_0x4f8751,_0x455000[_0xab155b(0x17f)]);break;case _0xab155b(0x2c1):updateLive(_0x4f8751,_0x455000['started']),io['to'](_0x4f8751)[_0xab155b(0x193)](_0xab155b(0x1d8),{'access':{'allow':![],'reason':_0xab155b(0x185),'token':null}});break;case'stop':_0x455000[_0xab155b(0x178)]==_0xab155b(0x1f6)&&restartBot(_0x4f8751);_0x455000[_0xab155b(0x178)]==_0xab155b(0x24d)&&toggleBot(_0x4f8751,_0xab155b(0x29e),_0xab155b(0x1b4));break;case _0xab155b(0x1e1):sendTelegram(_0x4f8751,_0x455000[_0xab155b(0x1e1)]);break;case'telegrammsg':sendTelegramMsg(_0x455000[_0xab155b(0x15c)]);break;case'function':io['to'](_0x4f8751)['emit'](_0x455000[_0xab155b(0x2ad)],_0x455000[_0xab155b(0x159)]);break;}}),pid[_0x4f8751]['on'](_0x4580ad(0x169),function(_0x37f031){if(_0x417abc)return;_0x417abc=!![],_0x21c661(_0x37f031);}),pid[_0x4f8751]['on'](_0x4580ad(0x215),async function(_0x1720bd){const _0x2d3296=_0x4580ad;if(installingUpdate)return;if(_0x417abc)return;_0x417abc=!![],_0x21c661(null);const _0x2aac05=dbConfig['get'](_0x2d3296(0x186))[_0x2d3296(0x26c)]({'botID':_0x4f8751})[_0x2d3296(0x168)]();_0x2aac05&&(_0x2aac05[_0x2d3296(0x1d8)]==_0x2d3296(0x259)||_0x2aac05[_0x2d3296(0x1d8)]==_0x2d3296(0x256))&&(await sleep(0x3e8),updateLive(_0x4f8751,_0x2d3296(0x1b4)),logger[_0x2d3296(0x141)](_0x2d3296(0x19b)+_0x4f8751),startBot([_0x4f8751,userID],{'cwd':bbpath},function(_0x264c2d){const _0x4fddc7=_0x2d3296;if(_0x264c2d)logger[_0x4fddc7(0x141)](_0x264c2d);}));});}function _0x26c6(_0x3806e6,_0x8eff53){const _0x459be4=_0x57fe();return _0x26c6=function(_0x491dbd,_0x5c53c6){_0x491dbd=_0x491dbd-0x13a;let _0x57fed3=_0x459be4[_0x491dbd];return _0x57fed3;},_0x26c6(_0x3806e6,_0x8eff53);}function stopBot(_0x135cda){const _0x24442c=_0x3e4df7;getClientsWithBotID(_0x135cda)[_0x24442c(0x255)](_0x572b1e=>{const _0x5aeb14=_0x24442c;getSocket(_0x572b1e['id'])[_0x5aeb14(0x1b3)](!![]),removeClient(_0x572b1e['id']);}),pid[_0x135cda]&&(pid[_0x135cda]['kill'](),pid[_0x135cda]=null);}function restartBot(_0xd32ba2){const _0xbc70bb=_0x3e4df7;if(pid[_0xd32ba2])pid[_0xd32ba2][_0xbc70bb(0x24d)]();}function addBot(){const _0xff2394=_0x3e4df7;let _0x53b71a;for(let _0x9590eb=0x1;_0x9590eb<0x3e9;_0x9590eb++){_0x53b71a=_0x9590eb[_0xff2394(0x16a)]()[_0xff2394(0x18d)](0x3,'0');let _0x3bb3c6=config[_0xff2394(0x26c)](_0x573f07=>_0x573f07['botID']==_0x53b71a);if(!_0x3bb3c6)break;}if(_0x53b71a==='1000'){logger['full'](_0xff2394(0x2aa));return;}logger[_0xff2394(0x141)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x53b71a),dbConfig[_0xff2394(0x187)](_0xff2394(0x186))[_0xff2394(0x13e)]({'botID':_0x53b71a,'botname':_0xff2394(0x1c0)+_0x53b71a,'status':_0xff2394(0x256),'live':''})[_0xff2394(0x260)](),startBot([_0x53b71a,userID],{'cwd':bbpath},function(_0x366753){if(_0x366753)logger['full'](_0x366753);}),config=getConfiguration(),io['to'](_0xff2394(0x210))[_0xff2394(0x193)](_0xff2394(0x186),config);}function deleteBot(_0x455c61){const _0x10ccc0=_0x3e4df7;getClientsWithBotID(_0x455c61)['forEach'](_0x8d2199=>{getSocket(_0x8d2199['id'])['disconnect'](!![]),removeClient(_0x8d2199['id']);}),dbConfig['get'](_0x10ccc0(0x186))[_0x10ccc0(0x226)]({'botID':_0x455c61})['write'](),logger[_0x10ccc0(0x141)](_0x10ccc0(0x202)+_0x455c61),stopBot(_0x455c61);try{fs[_0x10ccc0(0x221)](path[_0x10ccc0(0x1a2)](configpath,_0x10ccc0(0x174)+_0x455c61+_0x10ccc0(0x155))),fs[_0x10ccc0(0x221)](path['join'](configpath,'bot-'+_0x455c61+_0x10ccc0(0x22a))),fs[_0x10ccc0(0x221)](path['join'](configpath,_0x10ccc0(0x174)+_0x455c61+_0x10ccc0(0x166))),fs[_0x10ccc0(0x221)](path['join'](configpath,_0x10ccc0(0x174)+_0x455c61+_0x10ccc0(0x15b)));}catch(_0x2d8bbb){if(_0x2d8bbb)logger[_0x10ccc0(0x141)](_0x10ccc0(0x14b),_0x2d8bbb);}config=getConfiguration(),io['to']('botmanager')[_0x10ccc0(0x193)]('bots',config);}function toggleBot(_0x334888,_0xa9cb31,_0x3b7c63){const _0x2d16a0=_0x3e4df7;dbConfig[_0x2d16a0(0x187)](_0x2d16a0(0x186))['find']({'botID':_0x334888})['assign']({'status':_0xa9cb31})[_0x2d16a0(0x291)]({'live':_0x3b7c63})[_0x2d16a0(0x260)]();if(_0xa9cb31==_0x2d16a0(0x259)||_0xa9cb31==_0x2d16a0(0x256))logger[_0x2d16a0(0x141)](_0x2d16a0(0x287)+_0x334888),startBot([_0x334888,userID],{'cwd':bbpath},function(_0x57d970){const _0x2a99c6=_0x2d16a0;if(_0x57d970)logger[_0x2a99c6(0x141)](_0x57d970);});else(_0xa9cb31==_0x2d16a0(0x29e)||_0xa9cb31==_0x2d16a0(0x176))&&(logger[_0x2d16a0(0x141)](_0x2d16a0(0x25a)+_0x334888),stopBot(_0x334888));config=getConfiguration(),io['to'](_0x2d16a0(0x210))[_0x2d16a0(0x193)]('bots',config);}function toggleStatus(_0x13c5c0){const _0x3a2743=_0x3e4df7;let _0x3a3fa9=dbConfig['get'](_0x3a2743(0x186))[_0x3a2743(0x26c)]({'botID':_0x13c5c0})[_0x3a2743(0x168)](),_0x4b9272;if(_0x3a3fa9[_0x3a2743(0x1d8)]===_0x3a2743(0x259))_0x4b9272=_0x3a2743(0x29e);else{if(_0x3a3fa9[_0x3a2743(0x1d8)]===_0x3a2743(0x256))_0x4b9272=_0x3a2743(0x176);else{if(_0x3a3fa9[_0x3a2743(0x1d8)]===_0x3a2743(0x176))_0x4b9272='new';else{if(_0x3a3fa9[_0x3a2743(0x1d8)]===_0x3a2743(0x29e))_0x4b9272=_0x3a2743(0x259);}}}return _0x4b9272;}function updateStatus(_0x4ccaa7,_0x41e483){const _0x3f3252=_0x3e4df7;dbConfig[_0x3f3252(0x187)](_0x3f3252(0x186))[_0x3f3252(0x26c)]({'botID':_0x4ccaa7})[_0x3f3252(0x291)]({'status':_0x41e483})[_0x3f3252(0x260)](),config=getConfiguration(),io['to'](_0x3f3252(0x210))[_0x3f3252(0x193)](_0x3f3252(0x186),config);}function updateLive(_0x5325c9,_0x3c9900){const _0x56c61a=_0x3e4df7;dbConfig[_0x56c61a(0x187)](_0x56c61a(0x186))[_0x56c61a(0x26c)]({'botID':_0x5325c9})[_0x56c61a(0x291)]({'live':_0x3c9900})['write'](),config=getConfiguration(),io['to'](_0x56c61a(0x210))[_0x56c61a(0x193)]('bots',config);}function updateBotName(_0x41b950,_0x47e0ee){const _0xdc01b2=_0x3e4df7;dbConfig['get'](_0xdc01b2(0x186))[_0xdc01b2(0x26c)]({'botID':_0x41b950})[_0xdc01b2(0x291)]({'botname':_0x47e0ee})[_0xdc01b2(0x260)](),config=getConfiguration(),io['to']('botmanager')[_0xdc01b2(0x193)]('bots',config);}function updateBotManager(){const _0x1fcfff=_0x3e4df7;config=getConfiguration(),io['to'](_0x1fcfff(0x210))['emit'](_0x1fcfff(0x186),config);}function toggleBotMode(_0x4f7a23){const _0x9cd75d=_0x3e4df7;if(pid[_0x4f7a23])pid[_0x4f7a23][_0x9cd75d(0x163)]({'function':'toggleBotMode','args':null});else{const _0x406a2b=configpath+'bot-'+_0x4f7a23+_0x9cd75d(0x155),_0x437547=fs[_0x9cd75d(0x1d2)](_0x406a2b),_0x24170e=JSON[_0x9cd75d(0x1c7)](_0x437547),_0x445bc6=_0x24170e['bot'][0x0][_0x9cd75d(0x1d9)];_0x24170e['bot'][0x0][_0x9cd75d(0x1d9)]=!_0x445bc6;const _0x3b480a=JSON[_0x9cd75d(0x1fa)](_0x24170e,null,0x2);fs[_0x9cd75d(0x14a)](_0x406a2b,_0x3b480a),config=getConfiguration(),io['to']('botmanager')[_0x9cd75d(0x193)](_0x9cd75d(0x186),config);}}function telegramError(_0x75ac7a){const _0x20cd69=_0x3e4df7;logger[_0x20cd69(0x1a3)](getTimeStamp()+_0x20cd69(0x24b));}function validateTelegram(_0x353f6d){const _0x13bce5=_0x3e4df7;if(_0x353f6d['from']['username']!=settings[_0x13bce5(0x280)]&&'@'+_0x353f6d[_0x13bce5(0x145)][_0x13bce5(0x201)]!=settings[_0x13bce5(0x280)])return tgBot[_0x13bce5(0x170)](_0x353f6d[_0x13bce5(0x276)]['id'],_0x13bce5(0x154),{'parse_mode':_0x13bce5(0x29a)})[_0x13bce5(0x1cf)](_0x478951=>{telegramError(_0x478951);}),![];return!![];}async function initTelegram(){const _0x9045b6=_0x3e4df7;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x9045b6(0x1c9)],{'polling':!![]});let _0x7d5dd5=_0x9045b6(0x220);_0x7d5dd5+='\x0a',_0x7d5dd5+=_0x9045b6(0x16b),_0x7d5dd5+='/disable\x20-\x20disable\x20notifications\x0a',_0x7d5dd5+=_0x9045b6(0x1b8),_0x7d5dd5+=_0x9045b6(0x24c),_0x7d5dd5+=_0x9045b6(0x179),_0x7d5dd5+='/off\x20-\x20stop\x20bot(s)\x0a',_0x7d5dd5+=_0x9045b6(0x21c),_0x7d5dd5+=_0x9045b6(0x2d1),_0x7d5dd5+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x7d5dd5+=_0x9045b6(0x277),_0x7d5dd5+=_0x9045b6(0x271),_0x7d5dd5+=_0x9045b6(0x184);let _0x50ba76=_0x9045b6(0x13b);_0x50ba76+='\x0a',_0x50ba76+=_0x7d5dd5,tgBot[_0x9045b6(0x2c6)](/\/start/,_0x536b00=>{const _0x395a13=_0x9045b6;if(!validateTelegram(_0x536b00))return;if(settings['telegramChatId']!=_0x536b00[_0x395a13(0x276)]['id'])updateSetting(_0x395a13(0x2cc),_0x536b00['chat']['id']);updateSetting(_0x395a13(0x28c),!![]),tgBot[_0x395a13(0x170)](_0x536b00['chat']['id'],_0x50ba76)['catch'](_0x36aa25=>{telegramError(_0x36aa25);});}),tgBot[_0x9045b6(0x2c6)](/\/enable/,_0x125846=>{const _0x8de5e0=_0x9045b6;if(!validateTelegram(_0x125846))return;if(settings[_0x8de5e0(0x2cc)]!=_0x125846['chat']['id'])updateSetting(_0x8de5e0(0x2cc),_0x125846[_0x8de5e0(0x276)]['id']);updateSetting(_0x8de5e0(0x28c),!![]),tgBot['sendMessage'](_0x125846[_0x8de5e0(0x276)]['id'],_0x8de5e0(0x279))[_0x8de5e0(0x1cf)](_0x12adbd=>{telegramError(_0x12adbd);});}),tgBot['onText'](/\/config/,async _0x3144d3=>{const _0x38e737=_0x9045b6;if(!validateTelegram(_0x3144d3))return;tgBot[_0x38e737(0x162)](_0x38e737(0x246)),tgBot[_0x38e737(0x170)](_0x3144d3[_0x38e737(0x276)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x38e737(0x1d6),'callback_data':_0x38e737(0x27c)},{'text':_0x38e737(0x2cb),'callback_data':_0x38e737(0x204)},{'text':_0x38e737(0x295),'callback_data':_0x38e737(0x292)}]]}})['catch'](_0x287c8e=>{telegramError(_0x287c8e);}),tgBot['on']('callback_query',async _0x10a5d9=>{const _0x2e0aaf=_0x38e737,_0xba09bb=_0x10a5d9[_0x2e0aaf(0x29f)],_0x4acc4e=_0x10a5d9[_0x2e0aaf(0x209)];tgBot['answerCallbackQuery'](_0x10a5d9['id'])[_0x2e0aaf(0x2ab)](async()=>{const _0x583cba=_0x2e0aaf;_0xba09bb==_0x583cba(0x27c)&&(updateSetting('telegramEvents',_0x583cba(0x27c)),updateSetting('telegramEnabled',!![]),await tgBot[_0x583cba(0x170)](_0x4acc4e[_0x583cba(0x276)]['id'],_0x583cba(0x172))[_0x583cba(0x1cf)](_0x1a71d8=>{telegramError(_0x1a71d8);}));_0xba09bb==_0x583cba(0x204)&&(updateSetting(_0x583cba(0x2ca),_0x583cba(0x204)),updateSetting('telegramEnabled',!![]),await tgBot[_0x583cba(0x170)](_0x4acc4e[_0x583cba(0x276)]['id'],_0x583cba(0x219))[_0x583cba(0x1cf)](_0x41c482=>{telegramError(_0x41c482);}));_0xba09bb==_0x583cba(0x292)&&(updateSetting('telegramEvents',_0x583cba(0x292)),updateSetting(_0x583cba(0x28c),!![]),await tgBot['sendMessage'](_0x4acc4e[_0x583cba(0x276)]['id'],_0x583cba(0x2a9))[_0x583cba(0x1cf)](_0x385cc0=>{telegramError(_0x385cc0);}));if(!settings[_0x583cba(0x2cc)])tgBot[_0x583cba(0x170)](_0x4acc4e[_0x583cba(0x276)]['id'],_0x583cba(0x278))[_0x583cba(0x1cf)](_0xb52d27=>{telegramError(_0xb52d27);});}),tgBot[_0x2e0aaf(0x162)]('callback_query');});}),tgBot[_0x9045b6(0x2c6)](/\/status/,_0x3d14eb=>{const _0x3c351e=_0x9045b6;if(!validateTelegram(_0x3d14eb))return;const _0x28a23b=getBotsWithMode();let _0x4a6114=_0x3c351e(0x1fd);config[_0x3c351e(0x255)](_0x1f9d0b=>{const _0x11ed76=_0x3c351e,_0x2c9f3e=_0x28a23b[_0x11ed76(0x26c)](_0x3cc0bb=>_0x3cc0bb['botID']==_0x1f9d0b[_0x11ed76(0x1a7)])[_0x11ed76(0x217)];_0x4a6114+=_0x11ed76(0x1c0)+_0x1f9d0b[_0x11ed76(0x1a7)]+':\x20'+_0x1f9d0b[_0x11ed76(0x1d8)]+_0x11ed76(0x1be)+_0x2c9f3e+_0x11ed76(0x1be)+_0x1f9d0b[_0x11ed76(0x17f)]+'\x0a';}),_0x4a6114+='\x0a',_0x4a6114+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x4a6114+=!settings[_0x3c351e(0x28c)]?_0x3c351e(0x158):'Notifications\x20enabled\x0a',_0x4a6114+=settings[_0x3c351e(0x28c)]?settings[_0x3c351e(0x2ca)]==_0x3c351e(0x292)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3c351e(0x28b)+settings[_0x3c351e(0x2ca)]+_0x3c351e(0x1f0):'',tgBot[_0x3c351e(0x170)](_0x3d14eb[_0x3c351e(0x276)]['id'],_0x4a6114,{'parse_mode':_0x3c351e(0x29a)})[_0x3c351e(0x1cf)](_0x4fb866=>{telegramError(_0x4fb866);});}),tgBot[_0x9045b6(0x2c6)](/\/restart/,_0x2a6d04=>{const _0x219e43=_0x9045b6;if(!validateTelegram(_0x2a6d04))return;tgBot[_0x219e43(0x162)](_0x219e43(0x246));const _0x13b55f=getEnabledBots();if(_0x13b55f['length']==0x0)tgBot['sendMessage'](_0x2a6d04['chat']['id'],_0x219e43(0x2b9))[_0x219e43(0x1cf)](_0x10c828=>{telegramError(_0x10c828);});else{if(_0x13b55f['length']>0x1)_0x13b55f[_0x219e43(0x13e)]({'botID':'all'});let _0x3f9e7a=[],_0x428f04=[];const _0x1c0c40=_0x13b55f[_0x219e43(0x28e)]%0x4==0x0||_0x13b55f['length']%0x4==0x3||_0x13b55f[_0x219e43(0x28e)]%0x3==0x1?0x4:0x3;let _0x391534=0x0;_0x13b55f[_0x219e43(0x255)]((_0x2f627b,_0x36125a)=>{const _0x52eaef=_0x219e43;if(_0x36125a%_0x1c0c40==0x0)_0x428f04=[];_0x428f04[_0x52eaef(0x13e)]({'text':_0x2f627b['botID']==_0x52eaef(0x292)?_0x52eaef(0x265):'Bot\x20'+_0x2f627b[_0x52eaef(0x1a7)],'callback_data':_0x2f627b[_0x52eaef(0x1a7)]}),_0x36125a%_0x1c0c40==0x0&&(_0x3f9e7a[_0x391534]=_0x428f04,_0x391534++);}),tgBot['sendMessage'](_0x2a6d04[_0x219e43(0x276)]['id'],_0x219e43(0x238),{'reply_markup':{'inline_keyboard':_0x3f9e7a}})['catch'](_0x2a6e89=>{telegramError(_0x2a6e89);}),tgBot['on']('callback_query',async _0x496e9c=>{const _0xdff49d=_0x219e43,_0x51bb03=_0x496e9c[_0xdff49d(0x29f)],_0x4fa7a1=_0x496e9c[_0xdff49d(0x209)];tgBot[_0xdff49d(0x1e0)](_0x496e9c['id'])[_0xdff49d(0x2ab)](async()=>{const _0xb8345b=_0xdff49d;_0x51bb03==_0xb8345b(0x292)?config[_0xb8345b(0x255)](_0x42e93c=>{const _0x314666=_0xb8345b;restartBot(_0x42e93c[_0x314666(0x1a7)]);}):restartBot(_0x51bb03);}),tgBot[_0xdff49d(0x162)](_0xdff49d(0x246));});}}),tgBot[_0x9045b6(0x2c6)](/\/on/,_0x24f75c=>{const _0x1d25d1=_0x9045b6;if(!validateTelegram(_0x24f75c))return;tgBot[_0x1d25d1(0x162)](_0x1d25d1(0x246));const _0x4dda6a=getDisabledBots();if(_0x4dda6a[_0x1d25d1(0x28e)]==0x0)tgBot[_0x1d25d1(0x170)](_0x24f75c[_0x1d25d1(0x276)]['id'],_0x1d25d1(0x1d5))[_0x1d25d1(0x1cf)](_0xd14566=>{telegramError(_0xd14566);});else{if(_0x4dda6a['length']>0x1)_0x4dda6a['push']({'botID':_0x1d25d1(0x292)});let _0x22845d=[],_0x45c33c=[];const _0x469e08=_0x4dda6a[_0x1d25d1(0x28e)]%0x4==0x0||_0x4dda6a[_0x1d25d1(0x28e)]%0x4==0x3||_0x4dda6a[_0x1d25d1(0x28e)]%0x3==0x1?0x4:0x3;let _0x5bc61f=0x0;_0x4dda6a[_0x1d25d1(0x255)]((_0x3b45b9,_0x5f72c8)=>{const _0x2c0d0a=_0x1d25d1;if(_0x5f72c8%_0x469e08==0x0)_0x45c33c=[];_0x45c33c[_0x2c0d0a(0x13e)]({'text':_0x3b45b9['botID']=='all'?_0x2c0d0a(0x265):_0x2c0d0a(0x1c0)+_0x3b45b9['botID'],'callback_data':_0x3b45b9[_0x2c0d0a(0x1a7)]}),_0x5f72c8%_0x469e08==0x0&&(_0x22845d[_0x5bc61f]=_0x45c33c,_0x5bc61f++);}),tgBot[_0x1d25d1(0x170)](_0x24f75c[_0x1d25d1(0x276)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x22845d}})[_0x1d25d1(0x1cf)](_0x29025c=>{telegramError(_0x29025c);}),tgBot['on'](_0x1d25d1(0x246),async _0x18b2bd=>{const _0x5a47d6=_0x1d25d1,_0x52cb0b=_0x18b2bd[_0x5a47d6(0x29f)],_0x4303ea=_0x18b2bd[_0x5a47d6(0x209)];tgBot[_0x5a47d6(0x1e0)](_0x18b2bd['id'])[_0x5a47d6(0x2ab)](async()=>{const _0x41f33e=_0x5a47d6;_0x52cb0b=='all'?(tgBot[_0x41f33e(0x170)](_0x4303ea[_0x41f33e(0x276)]['id'],_0x41f33e(0x26e))[_0x41f33e(0x1cf)](_0x3f2778=>{telegramError(_0x3f2778);}),_0x4dda6a[_0x41f33e(0x255)](_0x52c9e7=>{const _0x2e1019=_0x41f33e;if(_0x52c9e7[_0x2e1019(0x1a7)]!=_0x2e1019(0x292))toggleBot(_0x52c9e7[_0x2e1019(0x1a7)],toggleStatus(_0x52c9e7['botID']),_0x2e1019(0x1b4));})):(tgBot[_0x41f33e(0x170)](_0x4303ea['chat']['id'],_0x41f33e(0x13d)+_0x52cb0b)[_0x41f33e(0x1cf)](_0x4b17f7=>{telegramError(_0x4b17f7);}),toggleBot(_0x52cb0b,toggleStatus(_0x52cb0b),_0x41f33e(0x1b4)));}),tgBot[_0x5a47d6(0x162)](_0x5a47d6(0x246));});}}),tgBot[_0x9045b6(0x2c6)](/\/off/,_0x3038d7=>{const _0x3a983e=_0x9045b6;if(!validateTelegram(_0x3038d7))return;tgBot[_0x3a983e(0x162)](_0x3a983e(0x246));const _0x2bc786=getEnabledBots();if(_0x2bc786['length']==0x0)tgBot[_0x3a983e(0x170)](_0x3038d7[_0x3a983e(0x276)]['id'],_0x3a983e(0x2b9))[_0x3a983e(0x1cf)](_0x690168=>{telegramError(_0x690168);});else{if(_0x2bc786[_0x3a983e(0x28e)]>0x1)_0x2bc786['push']({'botID':_0x3a983e(0x292)});let _0x1fac12=[],_0x215daf=[];const _0x270c93=_0x2bc786['length']%0x4==0x0||_0x2bc786[_0x3a983e(0x28e)]%0x4==0x3||_0x2bc786[_0x3a983e(0x28e)]%0x3==0x1?0x4:0x3;let _0x1bf4a9=0x0;_0x2bc786['forEach']((_0x48e588,_0x4ecaaa)=>{const _0x16fc73=_0x3a983e;if(_0x4ecaaa%_0x270c93==0x0)_0x215daf=[];_0x215daf[_0x16fc73(0x13e)]({'text':_0x48e588[_0x16fc73(0x1a7)]==_0x16fc73(0x292)?_0x16fc73(0x265):_0x16fc73(0x1c0)+_0x48e588['botID'],'callback_data':_0x48e588[_0x16fc73(0x1a7)]}),_0x4ecaaa%_0x270c93==0x0&&(_0x1fac12[_0x1bf4a9]=_0x215daf,_0x1bf4a9++);}),tgBot[_0x3a983e(0x170)](_0x3038d7[_0x3a983e(0x276)]['id'],_0x3a983e(0x289),{'reply_markup':{'inline_keyboard':_0x1fac12}})['catch'](_0xb739cc=>{telegramError(_0xb739cc);}),tgBot['on']('callback_query',async _0x419c1d=>{const _0x554ac3=_0x3a983e,_0x13a8ad=_0x419c1d[_0x554ac3(0x29f)],_0x5757a8=_0x419c1d[_0x554ac3(0x209)];tgBot['answerCallbackQuery'](_0x419c1d['id'])[_0x554ac3(0x2ab)](async()=>{const _0x9e64d7=_0x554ac3;_0x13a8ad==_0x9e64d7(0x292)?(tgBot[_0x9e64d7(0x170)](_0x5757a8[_0x9e64d7(0x276)]['id'],_0x9e64d7(0x263))[_0x9e64d7(0x1cf)](_0x477909=>{telegramError(_0x477909);}),_0x2bc786['forEach'](_0x406d05=>{const _0xc1eb09=_0x9e64d7;if(_0x406d05[_0xc1eb09(0x1a7)]!='all')toggleBot(_0x406d05[_0xc1eb09(0x1a7)],toggleStatus(_0x406d05['botID']),_0xc1eb09(0x1b4));})):(tgBot[_0x9e64d7(0x170)](_0x5757a8[_0x9e64d7(0x276)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x13a8ad)[_0x9e64d7(0x1cf)](_0x38c93a=>{telegramError(_0x38c93a);}),toggleBot(_0x13a8ad,toggleStatus(_0x13a8ad),_0x9e64d7(0x1b4)));}),tgBot['removeListener'](_0x554ac3(0x246));});}}),tgBot['onText'](/\/portfolio/,_0x418dc8=>{const _0x4e6f58=_0x9045b6;if(!validateTelegram(_0x418dc8))return;tgBot[_0x4e6f58(0x162)](_0x4e6f58(0x246));const _0x208838=getEnabledBots();if(_0x208838[_0x4e6f58(0x28e)]==0x0)tgBot[_0x4e6f58(0x170)](_0x418dc8[_0x4e6f58(0x276)]['id'],_0x4e6f58(0x2b9))['catch'](_0x1f46cd=>{telegramError(_0x1f46cd);});else{if(_0x208838[_0x4e6f58(0x28e)]>0x1){let _0x7e1f31=[],_0x6993d7=[];const _0x4c3d3e=_0x208838[_0x4e6f58(0x28e)]%0x4==0x0||_0x208838[_0x4e6f58(0x28e)]%0x4==0x3||_0x208838['length']%0x3==0x1?0x4:0x3;let _0x495fc3=0x0;_0x208838[_0x4e6f58(0x255)]((_0x3ed0a0,_0x2e0517)=>{const _0x2770ef=_0x4e6f58;if(_0x2e0517%_0x4c3d3e==0x0)_0x6993d7=[];_0x6993d7['push']({'text':'Bot\x20'+_0x3ed0a0[_0x2770ef(0x1a7)],'callback_data':_0x3ed0a0[_0x2770ef(0x1a7)]}),_0x2e0517%_0x4c3d3e==0x0&&(_0x7e1f31[_0x495fc3]=_0x6993d7,_0x495fc3++);}),tgBot[_0x4e6f58(0x170)](_0x418dc8[_0x4e6f58(0x276)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x7e1f31}})[_0x4e6f58(0x1cf)](_0x486242=>{telegramError(_0x486242);}),tgBot['on'](_0x4e6f58(0x246),async _0x4c1f8e=>{const _0x1eb6b9=_0x4e6f58,_0x548add=_0x4c1f8e[_0x1eb6b9(0x29f)],_0x42b684=_0x4c1f8e[_0x1eb6b9(0x209)];tgBot[_0x1eb6b9(0x1e0)](_0x4c1f8e['id'])[_0x1eb6b9(0x2ab)](async()=>{const _0x3a07a6=_0x1eb6b9;if(pid[_0x548add])pid[_0x548add][_0x3a07a6(0x163)]({'function':_0x3a07a6(0x17d),'args':null});}),tgBot[_0x1eb6b9(0x162)](_0x1eb6b9(0x246));});}else{const _0x2a392a=_0x208838[0x0][_0x4e6f58(0x1a7)];if(pid[_0x2a392a])pid[_0x2a392a][_0x4e6f58(0x163)]({'function':_0x4e6f58(0x17d),'args':null});}}}),tgBot[_0x9045b6(0x2c6)](/\/update/,async _0x12eb5e=>{const _0x403f40=_0x9045b6;if(!validateTelegram(_0x12eb5e))return;tgBot['removeListener']('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x403f40(0x170)](_0x12eb5e[_0x403f40(0x276)]['id'],_0x403f40(0x2c8))[_0x403f40(0x1cf)](_0x4de938=>{telegramError(_0x4de938);});else!validInstallation?tgBot[_0x403f40(0x170)](_0x12eb5e[_0x403f40(0x276)]['id'],_0x403f40(0x1e4))['catch'](_0x227c6f=>{telegramError(_0x227c6f);}):(tgBot[_0x403f40(0x170)](_0x12eb5e[_0x403f40(0x276)]['id'],_0x403f40(0x28d),{'reply_markup':{'inline_keyboard':[[{'text':_0x403f40(0x13f),'callback_data':_0x403f40(0x1cd)},{'text':'No','callback_data':'no'}]]}})[_0x403f40(0x1cf)](_0x49a096=>{telegramError(_0x49a096);}),tgBot['on']('callback_query',async _0x1b75fa=>{const _0x5eb6e9=_0x403f40,_0x2da00e=_0x1b75fa[_0x5eb6e9(0x29f)],_0x2a2110=_0x1b75fa[_0x5eb6e9(0x209)];tgBot[_0x5eb6e9(0x1e0)](_0x1b75fa['id'])[_0x5eb6e9(0x2ab)](async()=>{const _0x44aeda=_0x5eb6e9;_0x2da00e==_0x44aeda(0x1cd)&&(await tgBot[_0x44aeda(0x170)](_0x2a2110[_0x44aeda(0x276)]['id'],_0x44aeda(0x25b))[_0x44aeda(0x1cf)](_0x268f4d=>{telegramError(_0x268f4d);}),updateBB());_0x2da00e=='no'&&await tgBot[_0x44aeda(0x170)](_0x2a2110[_0x44aeda(0x276)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x44aeda(0x1cf)](_0x5b772b=>{telegramError(_0x5b772b);});if(!settings[_0x44aeda(0x2cc)])tgBot[_0x44aeda(0x170)](_0x2a2110[_0x44aeda(0x276)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x44aeda(0x1cf)](_0x4407fe=>{telegramError(_0x4407fe);});}),tgBot[_0x5eb6e9(0x162)]('callback_query');}));}),tgBot[_0x9045b6(0x2c6)](/\/toggle/,_0x4a9a8a=>{const _0x2dec78=_0x9045b6;if(!validateTelegram(_0x4a9a8a))return;tgBot['removeListener'](_0x2dec78(0x246));const _0x47f83e=getBotsWithMode();if(_0x47f83e[_0x2dec78(0x28e)]==0x0)tgBot[_0x2dec78(0x170)](_0x4a9a8a[_0x2dec78(0x276)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2dec78(0x1cf)](_0x4d517b=>{telegramError(_0x4d517b);});else{let _0xf6521b=[],_0x39271a=[];const _0x3d2b04=0x2;let _0xdb5c1=0x0;_0x47f83e[_0x2dec78(0x255)]((_0x29aa0d,_0x3ca30a)=>{const _0x12a83a=_0x2dec78;if(_0x3ca30a%_0x3d2b04==0x0)_0x39271a=[];_0x39271a[_0x12a83a(0x13e)]({'text':'Bot\x20'+_0x29aa0d[_0x12a83a(0x1a7)]+'\x20('+_0x29aa0d[_0x12a83a(0x217)]+')','callback_data':_0x29aa0d['botID']}),_0x3ca30a%_0x3d2b04==0x0&&(_0xf6521b[_0xdb5c1]=_0x39271a,_0xdb5c1++);}),tgBot['sendMessage'](_0x4a9a8a[_0x2dec78(0x276)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0xf6521b}})[_0x2dec78(0x1cf)](_0x2a5918=>{telegramError(_0x2a5918);}),tgBot['on'](_0x2dec78(0x246),async _0x382b32=>{const _0x1fa38b=_0x2dec78,_0x3bbd21=_0x382b32['data'],_0x2e849d=_0x382b32[_0x1fa38b(0x209)];tgBot['answerCallbackQuery'](_0x382b32['id'])['then'](async()=>{const _0x192aac=_0x1fa38b,_0x28d1a1=_0x47f83e[_0x192aac(0x26c)](_0x62392b=>_0x62392b[_0x192aac(0x1a7)]==_0x3bbd21),_0x1bade2=_0x28d1a1[_0x192aac(0x217)]==_0x192aac(0x231)?'manual':_0x192aac(0x231);tgBot['sendMessage'](_0x2e849d[_0x192aac(0x276)]['id'],_0x192aac(0x1b1)+_0x3bbd21+'\x20to\x20'+_0x1bade2+_0x192aac(0x146))[_0x192aac(0x1cf)](_0x2cbc29=>{telegramError(_0x2cbc29);}),toggleBotMode(_0x3bbd21);}),tgBot[_0x1fa38b(0x162)](_0x1fa38b(0x246));});}}),tgBot[_0x9045b6(0x2c6)](/\/names/,_0x4c598d=>{const _0x340c37=_0x9045b6;if(!validateTelegram(_0x4c598d))return;let _0x4f8a59='';config[_0x340c37(0x255)](_0x379e45=>{const _0x396666=_0x340c37;_0x4f8a59+=_0x396666(0x1c0)+_0x379e45['botID']+':\x20'+_0x379e45[_0x396666(0x195)]+'\x0a';}),tgBot[_0x340c37(0x170)](_0x4c598d[_0x340c37(0x276)]['id'],_0x4f8a59,{'parse_mode':_0x340c37(0x29a)})[_0x340c37(0x1cf)](_0x1ba822=>{telegramError(_0x1ba822);});}),tgBot[_0x9045b6(0x2c6)](/\/disable/,_0x5448a4=>{const _0x7a055b=_0x9045b6;if(!validateTelegram(_0x5448a4))return;tgBot[_0x7a055b(0x170)](_0x5448a4[_0x7a055b(0x276)]['id'],_0x7a055b(0x2a2))[_0x7a055b(0x1cf)](_0x462146=>{telegramError(_0x462146);}),updateSetting(_0x7a055b(0x28c),![]);}),tgBot['onText'](/\/help/,_0x18e76a=>{const _0x15b0b1=_0x9045b6;if(!validateTelegram(_0x18e76a))return;tgBot[_0x15b0b1(0x170)](_0x18e76a[_0x15b0b1(0x276)]['id'],_0x7d5dd5)[_0x15b0b1(0x1cf)](_0x30c6d0=>{telegramError(_0x30c6d0);});}),tgBot['on'](_0x9045b6(0x1a5),_0xd52280=>{const _0x478222=_0x9045b6;_0xd52280['toString']()[_0x478222(0x171)]('404\x20Not\x20Found')&&(logger['full'](_0x478222(0x19c)),tgBot[_0x478222(0x14f)](),tgBot=null,io['to'](_0x478222(0x210))[_0x478222(0x193)](_0x478222(0x1e7),'Invalid\x20Telegram\x20token'));}),process[_0x9045b6(0x16e)](_0x9045b6(0x2bc),()=>{const _0x1c9428=_0x9045b6;if(tgBot)tgBot['stopPolling']();process[_0x1c9428(0x215)](0x1);}),process[_0x9045b6(0x16e)]('SIGTERM',()=>{const _0x32fc89=_0x9045b6;if(tgBot)tgBot['stopPolling']();process[_0x32fc89(0x215)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x2b017c,_0x5454c9){const _0x562285=_0x3e4df7;if(settings[_0x562285(0x28c)]){if(settings[_0x562285(0x2ca)]=='all'||(_0x5454c9[_0x562285(0x177)]==_0x562285(0x169)||_0x5454c9[_0x562285(0x177)]=='warning'||_0x5454c9[_0x562285(0x177)]==_0x562285(0x294))&&settings[_0x562285(0x2ca)]==_0x562285(0x204)||_0x5454c9['type']==_0x562285(0x2a8)&&settings['telegramEvents']==_0x562285(0x27c)){if(tgBot&&settings[_0x562285(0x2cc)]){if(_0x5454c9['showname'])tgBot[_0x562285(0x170)](settings['telegramChatId'],_0x5454c9[_0x562285(0x195)]+_0x562285(0x1f9)+_0x5454c9['event'])['catch'](_0x497f57=>{telegramError(_0x497f57);});else tgBot[_0x562285(0x170)](settings['telegramChatId'],_0x562285(0x1c0)+_0x2b017c+_0x562285(0x1f9)+_0x5454c9[_0x562285(0x1eb)])[_0x562285(0x1cf)](_0x1cab70=>{telegramError(_0x1cab70);});}}}}async function sendTelegramMsg(_0x4cf4ee,_0x5d1cb8=_0x3e4df7(0x29a)){const _0x55c72c=_0x3e4df7;return settings[_0x55c72c(0x28c)]&&tgBot&&settings[_0x55c72c(0x2cc)]?(await tgBot[_0x55c72c(0x170)](settings[_0x55c72c(0x2cc)],_0x4cf4ee,{'parse_mode':_0x5d1cb8})[_0x55c72c(0x1cf)](_0x46bd17=>{telegramError(_0x46bd17);}),!![]):![];}function getDeviceWithIp(_0x2e831a){return devices['find'](_0x3f8b69=>_0x3f8b69['ip']===_0x2e831a);}function temporaryAccess2FA(_0xff61c1,_0x496db7){const _0x5093d0=_0x3e4df7;let _0x12c553=new Date(),_0x427aa3=![];if(lastIpApproval){if(_0x12c553-lastIpApproval<0x1388)_0x427aa3=!![];}lastIpApproval=new Date();if(_0x427aa3)return;tgBot&&settings[_0x5093d0(0x2cc)]&&(tgBot[_0x5093d0(0x162)](_0x5093d0(0x246)),tgBot['sendMessage'](settings[_0x5093d0(0x2cc)],_0x5093d0(0x2a5)+normalizeIP(_0x496db7)['show']+_0x5093d0(0x190),{'parse_mode':_0x5093d0(0x29a),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x5093d0(0x17b),'callback_data':'15'},{'text':_0x5093d0(0x250),'callback_data':'30'},{'text':_0x5093d0(0x2bb),'callback_data':'reject'}]]}})[_0x5093d0(0x1cf)](_0x2b8834=>{telegramError(_0x2b8834);}),tgBot['on'](_0x5093d0(0x246),async _0x1ad1ed=>{const _0x7e1ae6=_0x5093d0,_0x3b9d12=_0x1ad1ed['data'],_0x4adec8=_0x1ad1ed[_0x7e1ae6(0x209)];tgBot['answerCallbackQuery'](_0x1ad1ed['id'])[_0x7e1ae6(0x2ab)](async()=>{const _0x330271=_0x7e1ae6;devices[_0xff61c1]['telegramIpApproval']={'clientip':_0x496db7,'timestamp':new Date()[_0x330271(0x19a)](),'expiry':_0x3b9d12},_0x3b9d12!='reject'?(await tgBot[_0x330271(0x170)](_0x4adec8[_0x330271(0x276)]['id'],'Access\x20enabled\x20for\x20'+_0x3b9d12+'\x20minutes',{'parse_mode':_0x330271(0x29a)})[_0x330271(0x1cf)](_0x488b90=>{telegramError(_0x488b90);}),io['to'](_0xff61c1)[_0x330271(0x193)](_0x330271(0x1d8),{'access':{'allow':![],'reason':_0x330271(0x185),'token':null}})):(await tgBot[_0x330271(0x170)](_0x4adec8[_0x330271(0x276)]['id'],_0x330271(0x2a0))[_0x330271(0x1cf)](_0xad7762=>{telegramError(_0xad7762);}),io['to'](_0xff61c1)[_0x330271(0x193)](_0x330271(0x1d8),{'access':{'allow':![],'reason':_0x330271(0x29d),'token':null}}));}),tgBot[_0x7e1ae6(0x162)](_0x7e1ae6(0x246));}));}function loginAccess2FA(_0x3aa32b,_0x3abaaf){const _0x2638f7=_0x3e4df7;tgBot&&settings['telegramChatId']&&(tgBot[_0x2638f7(0x162)](_0x2638f7(0x246)),tgBot[_0x2638f7(0x170)](settings['telegramChatId'],_0x2638f7(0x229)+normalizeIP(_0x3abaaf)['show']+_0x2638f7(0x190),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x2638f7(0x2bb),'callback_data':_0x2638f7(0x2bb)}]]}})[_0x2638f7(0x1cf)](_0x34059d=>{telegramError(_0x34059d);}),tgBot['on'](_0x2638f7(0x246),async _0x2a7c39=>{const _0x455152=_0x2638f7,_0x2ea6d1=_0x2a7c39[_0x455152(0x29f)],_0x2499cc=_0x2a7c39['message'];tgBot[_0x455152(0x1e0)](_0x2a7c39['id'])[_0x455152(0x2ab)](async()=>{const _0x424da3=_0x455152;devices[_0x3aa32b]['telegram2FaApproval']={'clientip':_0x3abaaf,'timestamp':new Date()['getTime'](),'expiry':_0x2ea6d1},_0x2ea6d1!='reject'?(await tgBot['sendMessage'](_0x2499cc[_0x424da3(0x276)]['id'],'Login\x20accepted',{'parse_mode':_0x424da3(0x29a)})[_0x424da3(0x1cf)](_0x57c856=>{telegramError(_0x57c856);}),io['to'](_0x3aa32b)[_0x424da3(0x193)](_0x424da3(0x1d8),{'access':{'allow':![],'reason':_0x424da3(0x185),'token':null}})):(await tgBot[_0x424da3(0x170)](_0x2499cc[_0x424da3(0x276)]['id'],'Login\x20rejected')[_0x424da3(0x1cf)](_0x926a30=>{telegramError(_0x926a30);}),io['to'](_0x3aa32b)[_0x424da3(0x193)](_0x424da3(0x1d8),{'access':{'allow':![],'reason':_0x424da3(0x2bd),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5eaba5=_0x3e4df7;return dbConfig[_0x5eaba5(0x187)]('bots')[_0x5eaba5(0x1f4)](_0x5eaba5(0x1a7))['filter']({'status':_0x5eaba5(0x259)})[_0x5eaba5(0x168)]()||[];}function getDisabledBots(){const _0x1b77c9=_0x3e4df7;return dbConfig[_0x1b77c9(0x187)](_0x1b77c9(0x186))['sortBy'](_0x1b77c9(0x1a7))[_0x1b77c9(0x208)]({'status':_0x1b77c9(0x29e)})['value']()||[];}function getBotAttributes(_0x3e84b1){const _0x15c423=_0x3e4df7;let _0x437452={};const _0xdd784f=configpath+_0x15c423(0x174)+_0x3e84b1+_0x15c423(0x155),_0x3bccea=fs[_0x15c423(0x1cc)](_0xdd784f);if(_0x3bccea){const _0xc07809=fs[_0x15c423(0x1d2)](_0xdd784f);try{const _0x9100d4=JSON[_0x15c423(0x1c7)](_0xc07809),_0x503d67=_0x9100d4?_0x9100d4['bot'][0x0][_0x15c423(0x1d9)]:![];_0x437452[_0x15c423(0x217)]=_0x503d67?_0x15c423(0x231):_0x15c423(0x16f),_0x437452[_0x15c423(0x195)]=_0x9100d4?_0x9100d4[_0x15c423(0x2a6)][0x0][_0x15c423(0x195)]:_0x15c423(0x1c0)+_0x3e84b1;}catch(_0x4e1e28){_0x437452['mode']='manual',_0x437452[_0x15c423(0x195)]='Bot\x20'+_0x3e84b1;}}else _0x437452[_0x15c423(0x217)]='manual',_0x437452['botname']='Bot\x20'+_0x3e84b1;return _0x437452;}function getBotsWithMode(){const _0x3fc7dc=_0x3e4df7,_0x1a47c2=dbConfig[_0x3fc7dc(0x187)](_0x3fc7dc(0x186))['sortBy'](_0x3fc7dc(0x1a7))['value']()||[];return _0x1a47c2[_0x3fc7dc(0x255)](_0x2c9cf=>{const _0x13a2f4=_0x3fc7dc;let _0x5c98d8=getBotAttributes(_0x2c9cf[_0x13a2f4(0x1a7)]);_0x2c9cf[_0x13a2f4(0x217)]=_0x5c98d8['mode'];}),_0x1a47c2;}async function initUser(){const _0x4fe211=_0x3e4df7;if(!settings['userid']){const _0x1da969=uuidRandom();mixpanel[_0x4fe211(0x152)](_0x1da969),updateSetting(_0x4fe211(0x27e),_0x1da969);}}async function initSecure(){const _0x49588e=_0x3e4df7;let _0x4f86e3=getSecure();if(!_0x4f86e3[_0x49588e(0x156)](_0x49588e(0x1cb))){let _0x36e38a=await generateKeys();_0x4f86e3[_0x49588e(0x1f7)]=_0x36e38a['publicKey'],_0x4f86e3[_0x49588e(0x249)]=_0x36e38a[_0x49588e(0x249)],_0x4f86e3[_0x49588e(0x1cb)]=crypto[_0x49588e(0x23a)](0x20)[_0x49588e(0x16a)](_0x49588e(0x199));;storeSecure(_0x4f86e3);}}function getSettings(){const _0x5cd965=_0x3e4df7;return dbSettings[_0x5cd965(0x187)](_0x5cd965(0x253))[_0x5cd965(0x168)]()||{};}function getSecure(){const _0x46fce3=_0x3e4df7;return dbSecure[_0x46fce3(0x187)](_0x46fce3(0x198))[_0x46fce3(0x168)]()||{};}function getBlacklist(){const _0x46e6d5=_0x3e4df7;return dbSecure[_0x46e6d5(0x187)](_0x46e6d5(0x27b))[_0x46e6d5(0x168)]()||[];}function broadcastToBots(_0x1b14fa,_0xa180c5){config['forEach'](_0x394d8d=>{const _0x45d767=_0x26c6;if(_0x394d8d['status']==_0x45d767(0x259)&&_0x394d8d[_0x45d767(0x17f)]==_0x45d767(0x1ea)){if(pid[_0x394d8d['botID']])pid[_0x394d8d[_0x45d767(0x1a7)]][_0x45d767(0x163)]({[_0x1b14fa]:_0xa180c5});}});}function storeSettings(_0x1a256b,_0x4eb808=![]){const _0x29ca07=_0x3e4df7;_0x1a256b={...settings,..._0x1a256b};if(_0x4eb808&&_0x1a256b['bbPassword']!=_0x29ca07(0x1fe)&&_0x1a256b[_0x29ca07(0x23b)]!=''){const _0x2a014b=crypt[_0x29ca07(0x1ef)](secure['privateKey'],_0x1a256b['bbPassword'])[_0x29ca07(0x209)][_0x29ca07(0x1c3)]('@')[0x0],_0x1d5a85=bcrypt[_0x29ca07(0x2c0)](_0x2a014b,saltRounds);_0x1a256b={..._0x1a256b,'bbPassword':_0x1d5a85};}if(_0x4eb808&&_0x1a256b[_0x29ca07(0x1c9)]!=_0x29ca07(0x1fe)&&_0x1a256b[_0x29ca07(0x1c9)]!=''){const _0x981877=crypt[_0x29ca07(0x1ef)](secure['privateKey'],_0x1a256b[_0x29ca07(0x1c9)])[_0x29ca07(0x209)][_0x29ca07(0x1c3)]('@')[0x0];_0x1a256b={..._0x1a256b,'telegramToken':_0x981877};}const _0x534a63=_0x1a256b[_0x29ca07(0x1c9)]!=_0x29ca07(0x1fe)&&_0x1a256b['telegramToken']!=settings[_0x29ca07(0x1c9)]||_0x1a256b['telegramUsername']!=settings[_0x29ca07(0x280)],_0x5b1669=_0x1a256b['telegramToken']==''||_0x1a256b['telegramUsername']=='';if(_0x534a63)_0x1a256b['telegramEvents']=_0x29ca07(0x292);for(const [_0x27b194,_0x15fb6a]of Object[_0x29ca07(0x225)](_0x1a256b)){if(_0x27b194=='telegramToken'&&_0x15fb6a=='************'){_0x1a256b[_0x29ca07(0x1c9)]=settings[_0x29ca07(0x1c9)];continue;};if(_0x27b194==_0x29ca07(0x23b)&&_0x15fb6a=='************'){_0x1a256b[_0x29ca07(0x23b)]=settings[_0x29ca07(0x23b)];continue;};dbSettings['set'](_0x29ca07(0x23e)+_0x27b194,_0x15fb6a)['write']();}settings=_0x1a256b,io['to'](_0x29ca07(0x210))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x29ca07(0x2cd)]);if(_0x534a63&&!_0x5b1669)initTelegram();if(_0x534a63&&_0x5b1669)disableTelegram();getAllClients()['forEach'](_0x20bc49=>{const _0x5d69d4=_0x29ca07;getSocket(_0x20bc49['id'])['emit'](_0x5d69d4(0x1d8),{'access':{'allow':![],'reason':_0x5d69d4(0x185),'token':null}});});}function updateSetting(_0x34fff0,_0x33185d){const _0x4f040e=_0x3e4df7;dbSettings['set'](_0x4f040e(0x23e)+_0x34fff0,_0x33185d)['write'](),settings=getSettings(),io['to'](_0x4f040e(0x210))[_0x4f040e(0x193)]('settings',cleanSettings());}function storeSecure(_0x49b6af){const _0x319bea=_0x3e4df7;dbSecure['get'](_0x319bea(0x198))['push'](_0x49b6af)[_0x319bea(0x260)](),secure=_0x49b6af;}function addBlacklist(_0x4f99aa){const _0x2e294b=_0x3e4df7;cleanBlacklist();let _0x6d70c8;devices[_0x4f99aa][_0x2e294b(0x23f)]?_0x6d70c8=Math[_0x2e294b(0x27f)](devices[_0x4f99aa][_0x2e294b(0x23f)]['expiry'],loginExpiry):_0x6d70c8=loginExpiry,dbSecure['get'](_0x2e294b(0x27b))[_0x2e294b(0x13e)]({'expiry':new Date()[_0x2e294b(0x19a)]()+_0x6d70c8*0x3c*0x3e8,'token':devices[_0x4f99aa][_0x2e294b(0x2ae)][_0x2e294b(0x1f1)]})[_0x2e294b(0x260)](),blacklist=dbSecure[_0x2e294b(0x187)](_0x2e294b(0x27b))[_0x2e294b(0x168)]();}function cleanBlacklist(){const _0x1f2282=_0x3e4df7;let _0x5b7ab4=dbSecure[_0x1f2282(0x187)](_0x1f2282(0x27b))[_0x1f2282(0x1aa)]()['value'](),_0xaed031=new Date()[_0x1f2282(0x19a)]();_0x5b7ab4[_0x1f2282(0x255)](_0x37c737=>{const _0x33077e=_0x1f2282;_0x37c737['expiry']<_0xaed031&&dbSecure[_0x33077e(0x187)]('blacklist')['remove']({'expiry':_0x37c737[_0x33077e(0x20a)]})['write']();});}function initStates(){const _0x4daa3b=_0x3e4df7;let _0x40c89c=getConfiguration();_0x40c89c[_0x4daa3b(0x255)](_0x391867=>{const _0x256175=_0x4daa3b;_0x391867[_0x256175(0x17f)]=_0x256175(0x1b4);}),storeConfiguration(_0x40c89c);}function onKeys(){const _0x21f974=new RSA();return new Promise(_0x244370=>{const _0x38ebd3=_0x26c6;_0x21f974[_0x38ebd3(0x2ce)]()[_0x38ebd3(0x2ab)](_0x1d9d9e=>{_0x244370(_0x1d9d9e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x322b6e=_0x3e4df7;let _0x1022dd=getSettings(),_0x40f5e8=![];!_0x1022dd[_0x322b6e(0x156)](_0x322b6e(0x272))&&(_0x1022dd[_0x322b6e(0x272)]=0x0,_0x40f5e8=!![]);!_0x1022dd[_0x322b6e(0x156)](_0x322b6e(0x222))&&(_0x1022dd['lastmsgemitted']=0x0,_0x40f5e8=!![]);!_0x1022dd[_0x322b6e(0x156)](_0x322b6e(0x258))&&(_0x1022dd[_0x322b6e(0x258)]=_0x322b6e(0x2b8),_0x40f5e8=!![]);if(_0x40f5e8)storeSettings(_0x1022dd);}function storeConfiguration(_0x3bb3eb){const _0x496157=_0x3e4df7;dbConfig[_0x496157(0x187)]('bots')[_0x496157(0x226)]()['write'](),_0x3bb3eb['forEach'](_0x293abb=>{delete _0x293abb['mode'];}),dbConfig[_0x496157(0x187)](_0x496157(0x186))[_0x496157(0x13e)](..._0x3bb3eb)[_0x496157(0x260)](),config=_0x3bb3eb;}function resetPassword(){const _0x1fbf02=_0x3e4df7;tgBot&&settings[_0x1fbf02(0x2cc)]&&(tgBot[_0x1fbf02(0x162)](_0x1fbf02(0x246)),tgBot[_0x1fbf02(0x170)](settings['telegramChatId'],_0x1fbf02(0x15f),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1fbf02(0x1cd),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1fbf02(0x1cf)](_0x5d81fe=>{telegramError(_0x5d81fe);}),tgBot['on'](_0x1fbf02(0x246),async _0x5de3cc=>{const _0xc8318d=_0x1fbf02,_0x64a2c=_0x5de3cc[_0xc8318d(0x29f)],_0x5e3b29=_0x5de3cc[_0xc8318d(0x209)];tgBot[_0xc8318d(0x1e0)](_0x5de3cc['id'])[_0xc8318d(0x2ab)](async()=>{const _0x4aac73=_0xc8318d;if(_0x64a2c!='no'){const _0x2aa81b=0xf,_0x545183=_0x4aac73(0x234),_0x72c964=Array[_0x4aac73(0x145)](crypto['randomFillSync'](new Uint32Array(_0x2aa81b)))[_0x4aac73(0x2a4)](_0x53c32e=>_0x545183[_0x53c32e%_0x545183['length']])[_0x4aac73(0x1a2)](''),_0x27a153=bcrypt[_0x4aac73(0x2c0)](_0x72c964,saltRounds);storeSettings({'bbPassword':_0x27a153}),await tgBot[_0x4aac73(0x170)](_0x5e3b29[_0x4aac73(0x276)]['id'],_0x4aac73(0x1b5)+_0x72c964,{'parse_mode':_0x4aac73(0x29a)})[_0x4aac73(0x1cf)](_0x58446c=>{telegramError(_0x58446c);});}else await tgBot[_0x4aac73(0x170)](_0x5e3b29[_0x4aac73(0x276)]['id'],_0x4aac73(0x1d1))[_0x4aac73(0x1cf)](_0x136154=>{telegramError(_0x136154);});}),tgBot[_0xc8318d(0x162)]('callback_query');}));}function getServerTime(){const _0x5c85b9=_0x3e4df7,_0x579a02=new Date();return _0x579a02[_0x5c85b9(0x293)]()+'/'+(_0x579a02[_0x5c85b9(0x13a)]()+0x1)[_0x5c85b9(0x16a)]()['padStart'](0x2,'0')+'/'+_0x579a02[_0x5c85b9(0x188)]()[_0x5c85b9(0x16a)]()[_0x5c85b9(0x18d)](0x2,'0')+'\x20'+_0x579a02[_0x5c85b9(0x197)]()[_0x5c85b9(0x16a)]()[_0x5c85b9(0x18d)](0x2,'0')+':'+_0x579a02[_0x5c85b9(0x20c)]()['toString']()[_0x5c85b9(0x18d)](0x2,'0')+':'+_0x579a02[_0x5c85b9(0x23d)]()[_0x5c85b9(0x16a)]()[_0x5c85b9(0x18d)](0x2,'0');}function getTimeStamp(){const _0x1be4d1=_0x3e4df7,_0x12b134=shiftedTime();return _0x12b134[_0x1be4d1(0x293)]()+'/'+(_0x12b134[_0x1be4d1(0x13a)]()+0x1)[_0x1be4d1(0x16a)]()[_0x1be4d1(0x18d)](0x2,'0')+'/'+_0x12b134[_0x1be4d1(0x188)]()[_0x1be4d1(0x16a)]()[_0x1be4d1(0x18d)](0x2,'0')+'\x20'+_0x12b134['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x12b134[_0x1be4d1(0x20c)]()[_0x1be4d1(0x16a)]()[_0x1be4d1(0x18d)](0x2,'0')+':'+_0x12b134[_0x1be4d1(0x23d)]()['toString']()[_0x1be4d1(0x18d)](0x2,'0');}function shiftedTime(){const _0x3c1c6f=_0x3e4df7,_0x439840=new Date();let _0x2f9fe7=_0x439840;if(settings['timeshift']&&settings[_0x3c1c6f(0x2cd)]!==0x0)_0x2f9fe7=fns[_0x3c1c6f(0x218)](_0x439840,{'hours':settings[_0x3c1c6f(0x2cd)]});return _0x2f9fe7;}function startScheduler(){const _0x1e8bf4=_0x3e4df7,_0xe3410a=new Date()[_0x1e8bf4(0x143)](),_0x44212a=shiftedTime()['getHours']();_0x44212a==0x4&&backupConfigFiles();_0x44212a==0x0&&rotateLogFiles();_0xe3410a%0x6==0x0&&triggerAnalytics();_0xe3410a%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x287138=_0x3e4df7;fs[_0x287138(0x26d)](configpath,{'withFileTypes':!![]})['forEach'](_0x2717bd=>{const _0x25e1d1=_0x287138;if(!_0x2717bd[_0x25e1d1(0x20b)]())fs['copyFileSync'](configpath+_0x2717bd[_0x25e1d1(0x1a4)],configbackuppath+_0x2717bd[_0x25e1d1(0x1a4)]);});}function rotateLogFiles(){const _0x5464b9=_0x3e4df7;let _0x305fa8=fs[_0x5464b9(0x26d)](logspath,{'withFileTypes':!![]});_0x305fa8[_0x5464b9(0x244)]((_0x4727ff,_0x3467ed)=>_0x4727ff['name']<_0x3467ed[_0x5464b9(0x1a4)]?0x1:_0x3467ed['name']<_0x4727ff['name']?-0x1:0x0),_0x305fa8['forEach'](_0xd814f5=>{const _0x43acda=_0x5464b9;if(_0xd814f5[_0x43acda(0x1a4)]=='output-002.log')fs[_0x43acda(0x26b)](logspath+_0xd814f5['name'],logspath+_0x43acda(0x142));if(_0xd814f5[_0x43acda(0x1a4)]==_0x43acda(0x29c))fs[_0x43acda(0x26b)](logspath+_0xd814f5[_0x43acda(0x1a4)],logspath+_0x43acda(0x1ac));_0xd814f5[_0x43acda(0x1a4)]==_0x43acda(0x191)&&(fs[_0x43acda(0x26b)](logspath+_0xd814f5[_0x43acda(0x1a4)],logspath+_0x43acda(0x29c)),fs[_0x43acda(0x14a)](logspath+_0xd814f5['name'],''));});}async function zipFiles(_0x63f30e){const _0x34168a=_0x3e4df7;let _0x3cd0f7;if(_0x63f30e==_0x34168a(0x2b7))_0x3cd0f7=logspath;if(_0x63f30e==_0x34168a(0x150))_0x3cd0f7=configpath;let _0xc0448c=fs[_0x34168a(0x26d)](_0x3cd0f7,{'withFileTypes':!![]});const _0x28b1bc=new require(_0x34168a(0x192))();_0xc0448c[_0x34168a(0x255)](_0x175c0f=>{const _0x3af6e6=_0x34168a;if(!_0x175c0f[_0x3af6e6(0x20b)]()){let _0x1fce22=fs['readFileSync'](_0x3cd0f7+_0x175c0f[_0x3af6e6(0x1a4)]);const _0x91986e=/^bot-[0-9]{3}-config.json$/,_0x4d785a=_0x91986e[_0x3af6e6(0x245)](_0x175c0f[_0x3af6e6(0x1a4)]);if(_0x4d785a){const _0x35e611=JSON['parse'](_0x1fce22);_0x35e611[_0x3af6e6(0x2a6)][0x0][_0x3af6e6(0x1ba)]=_0x3af6e6(0x27a),_0x35e611['bot'][0x0][_0x3af6e6(0x286)]=_0x3af6e6(0x27a),_0x1fce22=JSON[_0x3af6e6(0x1fa)](_0x35e611,null,0x2);}if(_0x175c0f[_0x3af6e6(0x1a4)]==_0x3af6e6(0x160)){const _0x368eb3=JSON[_0x3af6e6(0x1c7)](_0x1fce22);if(_0x368eb3['settings'][_0x3af6e6(0x1ca)])_0x368eb3['settings'][_0x3af6e6(0x1ca)]=![];if(_0x368eb3[_0x3af6e6(0x253)]['bbPassword'])_0x368eb3[_0x3af6e6(0x253)][_0x3af6e6(0x23b)]=_0x3af6e6(0x27a);if(_0x368eb3['settings']['telegramToken'])_0x368eb3[_0x3af6e6(0x253)]['telegramToken']=_0x3af6e6(0x27a);if(_0x368eb3[_0x3af6e6(0x253)][_0x3af6e6(0x2cc)])_0x368eb3['settings'][_0x3af6e6(0x2cc)]='';_0x1fce22=JSON['stringify'](_0x368eb3,null,0x2);}if(_0x175c0f[_0x3af6e6(0x1a4)]!=_0x3af6e6(0x205))_0x28b1bc[_0x3af6e6(0x20e)](_0x175c0f[_0x3af6e6(0x1a4)],_0x1fce22);}});const _0x3c59fa=_0x28b1bc[_0x34168a(0x1b7)]({'base64':![],'compression':_0x34168a(0x203)});fs[_0x34168a(0x14a)](zippath+(_0x63f30e+_0x34168a(0x1d0)),_0x3c59fa,_0x34168a(0x18a));}async function getPublicIp(){const _0x3519f3=_0x3e4df7;try{const _0x1fac79=await axios[_0x3519f3(0x187)](_0x3519f3(0x28a));publicip=_0x1fac79['data']['ip'];}catch(_0x3c2870){}}async function triggerAnalytics(){const _0x471566=_0x3e4df7;if(!publicip)await getPublicIp();const _0x44fb20=getBotsWithMode();let _0x5b6317=0x0;_0x44fb20[_0x471566(0x255)](_0x3db2cd=>{const _0x4832e2=_0x471566;if(_0x3db2cd[_0x4832e2(0x1d8)]===_0x4832e2(0x259))_0x5b6317++;}),mixpanel[_0x471566(0x1e2)](_0x471566(0x1d7),{'distinct_id':settings[_0x471566(0x27e)],'ip':publicip,'version':serverversion,'numbots':_0x44fb20[_0x471566(0x28e)],'numbotsenabled':_0x5b6317});}function _0x57fe(){const _0x1c9b0a=['join','simple','name','polling_error','build2','botID','jsonwebtoken','reset-password','cloneDeep','logout','output-002.log','Unauthorized\x20attempt\x20to\x20store\x20configuration','fork','RSA','update-bot','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','env','disconnect','stopped','Password\x20has\x20been\x20reset\x20to:\x20','zip/','generate','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','cancelLoading','apiKey','Invalid\x20username\x20or\x20IP\x20address','/:bot/performance','110618jRSofm','\x20|\x20','apply','Bot\x20','ipc','lowdb','split','number','Invalid\x20IP\x20address','child_process','parse','config/','telegramToken','loginRequired','secret','existsSync','yes','2FA\x20login\x20required','catch','.zip','Password\x20reset\x20rejected','readFileSync','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','::1','All\x20bots\x20running\x20right\x20now','Orders','Server','status','headless','inherit','temporaryAccessAllowed','build','host','backup/','temporary\x20token\x20generated','answerCallbackQuery','telegram','track','reason','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Unauthorized\x20attempt\x20to\x20get\x20messages','min','notification','axios','Invalid\x20authentication\x20token\x20(2)','running','event','sendFile','62928tByvQM','1030980HdoaDV','decrypt','\x20only\x0a','token','Unauthorized\x20attempt\x20to\x20delete\x20alerts','invalid\x20credentials','sortBy','212210lTZCjK','restart','publicKey','crypto','\x20>\x20','stringify','verify','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','<b>Balance\x20Bot\x20Status:</b>\x0a','************','emitHistory','search','username','deleted\x20Bot\x20','DEFLATE','alerts','bb-secure.json','uuid-random','download','filter','message','expiry','isDirectory','getMinutes','/:bot/support','file','allow','botmanager','user','f2aRequired','24mSjjNY','createWriteStream','exit','version.json','mode','add','Ok,\x20will\x20send\x20alert\x20notifications\x20only','temporary\x20access\x20timeout','bbvReceive','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','whitelistEnabled','server','handshake','You\x20can\x20use\x20the\x20following\x20commands:\x0a','unlinkSync','lastmsgemitted','logs/','constructor','entries','remove','getStartingBalances','Unauthorized\x20attempt\x20to\x20update\x20bot','Allow\x20login\x20from\x20IP\x20address\x20<b>','-events.json','compareSync','2FA\x20required','exec','place-order',',\x20must\x20be\x20a\x204\x20digit\x20number','bcryptjs','auto','password',':\x20Bot\x20Mgr\x20>\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','2FA','connected','bot.js','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','add-bot','randomBytes','bbPassword','use','getSeconds','settings.','telegramIpApproval','6b67f3d61ee94b8f5c80b4affef4c4d9','\x20(2)','listen','startsWith','sort','test','callback_query','No\x20authentication\x20token','request','privateKey','idling\x20bot\x20\x20\x20|\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/restart\x20-\x20restart\x20bot(s)\x0a','kill','pidRefreshToken','logged\x20out','30\x20min','Unauthorized\x20attempt\x20to\x20download\x20','Markdown','settings','socket.io','forEach','new','::ffff:127.0.0.1','latestversion','enabled','disabled\x20Bot\x20','Starting\x20Balance\x20Bot\x20update','login\x20token\x20generated','get-starting-balances','deleteHistoryAlerts','any','write','$1_$2_$3','conn','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','whitelist','All\x20bots','Bot\x20Mgr\x20>\x20','placeOrder','pidExpireLogin','initclient','/:bot','copyFileSync','find','readdirSync','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','access\x20timeout','lowdb/adapters/FileSync','/update\x20-\x20update\x20Balance\x20Bot\x0a','lastmsgtelegram','express','connection','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','chat','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Notifications\x20enabled','***','blacklist','orders','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','userid','max','telegramUsername','User\x20has\x20been\x20validated','yargs/yargs','format','date-fns','login\x20token\x20valid','apiSecret','enabled\x20Bot\x20','referer','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','https://api.ipify.org?format=json','Notifications\x20types:\x20','telegramEnabled','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','length','login\x20not\x20required','2008748MMKBpz','assign','all','getFullYear','success','All','6350085QYOKoW','match','confirm-message','hybrid-crypto-js','HTML','storeHeadless','output-001.log','temporary\x20access\x20rejected','disabled','data','Temporary\x20access\x20rejected','argv','Notifications\x20disabled','clients','map','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','bot','log','order','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','then','uuid','function','access','store','encryptedUuid','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','store-configuration','defaults','messages','telegram2FaApproval','Error:\x20Invalid\x20argument\x20','logs','0.0.0','No\x20bots\x20running\x20right\x20now','Failed\x20to\x20download\x20','reject','SIGINT','2FA\x20login\x20rejected','kind','storeConfiguration','hashSync','started','2FA\x20login\x20token\x20generated','version','Unauthorized\x20login\x20attempt\x20(timeout)','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','onText','(((.+)+)+)+$','Your\x20installation\x20is\x20already\x20up\x20to\x20date','cancel-loading','telegramEvents','Alerts','telegramChatId','timeshift','generateKeyPairAsync','sockets','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/names\x20-\x20show\x20bot\x20names\x0a','getMonth','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','*$1*','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','push','Yes','toIPv4Address','full','output-003.log','getUTCHours','static','from','\x20mode','3zkurgY','update-bb','Unauthorized\x20attempt\x20to\x20log\x20out','writeFileSync','error\x20while\x20deleting\x20config\x20files:\x20','keys','api-eu.mixpanel.com','remoteAddress','stopPolling','backup','getPortfolio','alias','http','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','-config.json','hasOwnProperty','get-portfolio','Notifications\x20disabled\x0a','args','index.html','-results.json','telegrammsg','auth','-----------------------------------------------------------------------------------','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bb-settings.json','login\x20required','removeListener','send','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','sign','-performance.json','login','value','error','toString','/enable\x20-\x20enable\x20notifications\x0a','delete-bot','store-headless','once','manual','sendMessage','includes','Ok,\x20will\x20send\x20order\x20notifications\x20only','ipaddr.js','bot-','headers','new-disabled','type','stop','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20add\x20bot','15\x20min','starting\x20bot\x20|\x20Bot\x20','sendPortfolioTelegram','Unauthorized\x20attempt\x20to\x20get\x20portfolio','live','slice','get-messages','timestamp','bbvNew','/help\x20-\x20show\x20available\x20commands\x0a','reload','bots','get','getDate','params','binary','mkdirSync','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','padStart','util','3000','</b>\x20?','output-000.log','node-zip','emit','delete-alerts','botname','replace','getHours','secure','hex','getTime','restarting\x20Bot\x20','Invalid\x20Telegram\x20token','335624oKZiOF','sha256','Unauthorized\x20attempt\x20to\x20confirm\x20message','uncaughtException','Token\x20blacklisted'];_0x57fe=function(){return _0x1c9b0a;};return _0x57fe();}async function getMessages(){const _0x1e0e95=_0x3e4df7,_0x54d14f=_0x1e0e95(0x18c),_0x500838=new GraphQLClient(_0x54d14f),_0x3fbe40={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x387b90=serverversion['split']('.'),_0x218c03=_0x387b90[0x0]+'.'+_0x387b90[0x1],_0x14de4f=Math[_0x1e0e95(0x1e6)](settings[_0x1e0e95(0x272)],settings[_0x1e0e95(0x222)]),_0x3ee474={'last':parseInt(_0x14de4f),'bbm':_0x218c03},_0xd125ff=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1e988e;try{_0x1e988e=await _0x500838[_0x1e0e95(0x248)](_0xd125ff,_0x3ee474,_0x3fbe40);}catch(_0x304593){}if(_0x1e988e&&_0x1e988e['messages']){let _0x488fca=settings[_0x1e0e95(0x272)];newMessages=[];for(const _0x2b21d7 of _0x1e988e[_0x1e0e95(0x2b4)]){newMessages[_0x1e0e95(0x13e)](_0x2b21d7);if(_0x2b21d7[_0x1e0e95(0x183)])updateSetting(_0x1e0e95(0x258),_0x2b21d7[_0x1e0e95(0x183)]);let _0xd6e8a9=_0x2b21d7['bbvNew']?serverversion>=_0x2b21d7['bbvNew']:![];if(!_0xd6e8a9&&_0x2b21d7[_0x1e0e95(0x1c4)]>_0x488fca){if(_0x2b21d7[_0x1e0e95(0x21b)]===_0x1e0e95(0x25f)||serverversion[_0x1e0e95(0x243)](_0x2b21d7[_0x1e0e95(0x21b)])){let _0x18e2ce=''+_0x2b21d7['title']+'\x0a\x0a'+_0x2b21d7[_0x1e0e95(0x209)];const _0x10aa67=await sendTelegramMsg(toTelegramMarkdown(_0x18e2ce),_0x1e0e95(0x252));if(_0x10aa67)_0x488fca=_0x2b21d7['number'];}}}updateAvailable=isNewerVersion(settings[_0x1e0e95(0x258)],serverversion),updateSetting(_0x1e0e95(0x272),_0x488fca),emitMessages();}}function emitMessages(){const _0x5ae03a=_0x3e4df7,_0x1cafa2=settings[_0x5ae03a(0x222)];let _0x565bea=[];newMessages[_0x5ae03a(0x255)](_0x33f9b3=>{const _0x2e492c=_0x5ae03a;_0x33f9b3[_0x2e492c(0x1c4)]>_0x1cafa2&&_0x565bea[_0x2e492c(0x13e)](_0x33f9b3);}),_0x565bea[_0x5ae03a(0x28e)]>0x0&&getAllClients()[_0x5ae03a(0x255)](_0x39b452=>{const _0x21e9f9=_0x5ae03a;getSocket(_0x39b452['id'])[_0x21e9f9(0x193)](_0x21e9f9(0x209),_0x565bea);});}function confirmMessage(_0x4c64b9){const _0x1f8d57=_0x3e4df7;updateSetting(_0x1f8d57(0x222),Number(_0x4c64b9));}function isNewerVersion(_0xc8cd26,_0x1a94a6){const _0x2b322d=_0x3e4df7,_0x379a84=_0x1a94a6[_0x2b322d(0x1c3)]('.'),_0x47d01c=_0xc8cd26[_0x2b322d(0x1c3)]('.');for(var _0x39f6af=0x0;_0x39f6af<_0x47d01c['length'];_0x39f6af++){const _0x2354db=~~_0x47d01c[_0x39f6af],_0x4a3234=~~_0x379a84[_0x39f6af];if(_0x2354db>_0x4a3234)return!![];if(_0x2354db<_0x4a3234)return![];}return![];}function toTelegramMarkdown(_0x4ba170){const _0x4791d4=_0x3e4df7,_0x380e4f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1b861a=/\*{2}(.+?)\*{2}/gim;return _0x4ba170=_0x4ba170[_0x4791d4(0x196)](_0x380e4f,_0x4791d4(0x261))[_0x4791d4(0x196)](_0x1b861a,_0x4791d4(0x13c)),_0x4ba170;}async function validateConfigFile(){const _0x567115=_0x3e4df7,_0x2b21b5=dbConfig[_0x567115(0x187)](_0x567115(0x186))[_0x567115(0x1f4)](_0x567115(0x1a7))['value']()||[];if(_0x2b21b5[_0x567115(0x28e)]==0x0){let _0x125699=0x0,_0x3c1685=[];const _0x30fcfa=/^bot-([0-9]{3})-config.json$/,_0x86e7f8=fs[_0x567115(0x26d)](configpath);_0x86e7f8[_0x567115(0x255)](_0xe9d97e=>{const _0x8daf33=_0x567115,_0x536a6d=_0x30fcfa[_0x8daf33(0x22d)](_0xe9d97e);if(_0x536a6d){const _0x4437a1=_0x536a6d[0x1];let _0x312a5f=getBotAttributes(_0x4437a1);_0x3c1685['push']({'botID':_0x4437a1,'botname':_0x312a5f[_0x8daf33(0x195)],'status':_0x8daf33(0x29e),'live':_0x8daf33(0x1b4)}),_0x125699++;}}),_0x125699!=0x0&&(dbConfig[_0x567115(0x187)](_0x567115(0x186))[_0x567115(0x291)](_0x3c1685)[_0x567115(0x260)](),config=_0x3c1685,restoredConfigFile=_0x125699);}}async function restoreConfigNotify(_0xa01e57){const _0x1012d6=_0x3e4df7;let _0x24ff67;if(restoredConfigFile==0x1)_0x24ff67=_0x1012d6(0x27d);else _0x24ff67=_0x1012d6(0x2b1);if(_0xa01e57)io['to']('botmanager')[_0x1012d6(0x193)]('notification',_0x24ff67);else{logger['simple'](_0x1012d6(0x15e)),logger['simple'](_0x24ff67),logger[_0x1012d6(0x1a3)](_0x1012d6(0x15e)),logger['simple']('');if(tgBot&&settings[_0x1012d6(0x2cc)]&&settings[_0x1012d6(0x2ca)]!=_0x1012d6(0x27c))tgBot['sendMessage'](settings[_0x1012d6(0x2cc)],_0x1012d6(0x266)+_0x24ff67)[_0x1012d6(0x1cf)](_0x5232a1=>{telegramError(_0x5232a1);});}}function validateCredentials(_0x5c38cb,_0x37e1a5){const _0x424a30=_0x3e4df7;if(_0x5c38cb[_0x424a30(0x201)]==settings['bbUsername']&&bcrypt[_0x424a30(0x22b)](_0x5c38cb[_0x424a30(0x232)],settings[_0x424a30(0x23b)])){if(settings[_0x424a30(0x212)])return{'allow':![],'reason':_0x424a30(0x1ce),'token':null};else{const _0x453d56=generateLoginToken(_0x37e1a5);return{'allow':!![],'reason':_0x424a30(0x25c),'token':_0x453d56};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1b4cd9){const _0x27a848=_0x3e4df7,_0x5812bb=generateLoginToken(_0x1b4cd9);return{'allow':!![],'reason':_0x27a848(0x25c),'token':_0x5812bb};}function validateAccess(_0x4b4483,_0x392c40,_0x291489){const _0x2f45ea=_0x3e4df7,_0x3ec673=_0x291489?_0x291489:devices[_0x392c40]['ip'];let _0x291529;const _0x1115e4=_0x2aaa7a=>{const _0x16a709=_0x26c6;if(settings['loginRequired']){if(settings[_0x16a709(0x212)]){if(telegram2FaApproved(_0x392c40)){const _0x4a2f56=generateLoginToken(_0x392c40);return{'allow':!![],'reason':_0x16a709(0x2c2),'token':_0x4a2f56};}else return{'allow':![],'reason':_0x16a709(0x161),'token':null};}else return _0x291529=validToken(_0x2aaa7a,_0x392c40),_0x291529['hasOwnProperty'](_0x16a709(0x294))?{'allow':!![],'reason':_0x16a709(0x285),'token':_0x2aaa7a}:{'allow':![],'reason':_0x16a709(0x161),'token':null};}else return{'allow':!![],'reason':_0x16a709(0x28f),'token':null};};if(settings[_0x2f45ea(0x21d)]){let _0x1e8a16=[...settings[_0x2f45ea(0x264)],_0x2f45ea(0x1d4),_0x2f45ea(0x257),'127.0.0.1'];if(_0x1e8a16['includes'](_0x3ec673))return _0x1115e4(_0x4b4483);else{_0x291529=validToken(_0x4b4483,_0x392c40);if(_0x291529[_0x2f45ea(0x156)](_0x2f45ea(0x294)))return _0x1115e4(_0x4b4483);else{if(telegramIpApproved(_0x392c40)){const _0x1ea704=generateToken(_0x392c40);return _0x291529=_0x1115e4(_0x4b4483),_0x291529['allow']?{'allow':!![],'reason':_0x2f45ea(0x1df),'token':_0x1ea704}:_0x291529;}else return settings[_0x2f45ea(0x1db)]?{'allow':![],'reason':_0x2f45ea(0x22c),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1115e4(_0x4b4483);}function timelyDecrypt(_0x911177,_0x4d8a33=!![]){const _0x585841=_0x3e4df7;if(_0x911177)try{const _0x594d9b=crypt['decrypt'](secure[_0x585841(0x249)],_0x911177)[_0x585841(0x209)],_0x401f60=_0x594d9b[_0x585841(0x1c3)]('@')[0x0],_0x1cc4fa=_0x594d9b['split']('@')[0x1],_0x234548=new Date()['getTime']();if(_0x4d8a33){if(_0x234548-_0x1cc4fa<maxSecretAge*0x3e8)return _0x401f60;else return![];}else return _0x401f60;}catch(_0x26a326){return![];}else return![];}const validToken=(_0x523f1d,_0x366c32)=>{const _0x140aa8=_0x3e4df7,_0x517f5f=devices[_0x366c32]['ip'];if(!_0x523f1d)return{'error':_0x140aa8(0x247)};for(let _0x3591b8 of blacklist){if(_0x3591b8[_0x140aa8(0x1f1)]==_0x523f1d)return{'error':_0x140aa8(0x1a1)};}let _0x574976;try{_0x574976=jwt[_0x140aa8(0x1fb)](_0x523f1d,secure[_0x140aa8(0x1cb)]+_0x366c32);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x574976['hasOwnProperty']('clientip')&&!_0x574976[_0x140aa8(0x156)](_0x140aa8(0x201))||!_0x574976[_0x140aa8(0x156)]('exp'))return{'error':_0x140aa8(0x1e9)};if(!_0x574976[_0x140aa8(0x156)](_0x140aa8(0x201))&&_0x574976['hasOwnProperty']('clientip')){const {clientip:_0x130ae2}=_0x574976;return _0x517f5f==_0x130ae2?{'success':_0x140aa8(0x281)}:{'error':_0x140aa8(0x1c5)};}else{if(_0x574976['hasOwnProperty'](_0x140aa8(0x201))&&_0x574976[_0x140aa8(0x156)]('clientip')){const {username:_0x5d49ba,clientip:_0x4c51bd}=_0x574976;return settings['bbUsername']==_0x5d49ba&&_0x517f5f==_0x4c51bd?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x140aa8(0x1bb)};}}},generateLoginToken=_0x37dfd5=>{const _0x5dd19a=_0x3e4df7;if(_0x37dfd5){const _0x2d77bc=devices[_0x37dfd5]['ip'];return jwt[_0x5dd19a(0x165)]({'username':settings['bbUsername'],'clientip':_0x2d77bc},secure['secret']+_0x37dfd5,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2b271f=>{const _0x5a7ce4=_0x3e4df7;if(_0x2b271f){const _0x30719f=devices[_0x2b271f]['ip'];return jwt[_0x5a7ce4(0x165)]({'clientip':_0x30719f},secure[_0x5a7ce4(0x1cb)]+_0x2b271f,{'expiresIn':devices[_0x2b271f][_0x5a7ce4(0x23f)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x25b741=>{const _0x449e6b=_0x3e4df7;let _0x157407=![];return devices[_0x25b741]['telegramIpApproval']&&devices[_0x25b741]['telegramIpApproval']['expiry']!=_0x449e6b(0x2bb)&&(_0x157407=devices[_0x25b741]['telegramIpApproval']['clientip']==devices[_0x25b741]['ip']&&new Date()[_0x449e6b(0x19a)]()-devices[_0x25b741][_0x449e6b(0x23f)][_0x449e6b(0x182)]<devices[_0x25b741][_0x449e6b(0x23f)]['expiry']*0x3c*0x3e8),_0x157407;},telegram2FaApproved=_0x218ba8=>{const _0x49fd72=_0x3e4df7;let _0x1afc41=![];return devices[_0x218ba8][_0x49fd72(0x2b5)]&&devices[_0x218ba8]['telegram2FaApproval'][_0x49fd72(0x20a)]!=_0x49fd72(0x2bb)&&(_0x1afc41=devices[_0x218ba8][_0x49fd72(0x2b5)]['clientip']==devices[_0x218ba8]['ip']&&new Date()[_0x49fd72(0x19a)]()-devices[_0x218ba8][_0x49fd72(0x2b5)]['timestamp']<devices[_0x218ba8][_0x49fd72(0x2b5)][_0x49fd72(0x20a)]*0x3c*0x3e8),_0x1afc41;},normalizeIP=_0x42ca24=>{const _0x26bfcc=_0x3e4df7;let _0x4e9731=null,_0x40262e=null;if(ipaddr['isValid'](_0x42ca24)){const _0x1283b5=ipaddr[_0x26bfcc(0x1c7)](_0x42ca24);_0x1283b5[_0x26bfcc(0x2be)]()==='ipv6'?(_0x1283b5['isIPv4MappedAddress']()&&(_0x4e9731=_0x1283b5[_0x26bfcc(0x140)]()[_0x26bfcc(0x16a)]()),_0x40262e=_0x1283b5['toString']()):(_0x4e9731=_0x1283b5['toString'](),_0x40262e=_0x1283b5['toIPv4MappedAddress']()['toString']());}return{'show':_0x4e9731?_0x4e9731:_0x40262e,'store':_0x40262e};};function sleep(_0x4cd738){return new Promise(_0x2d036c=>setTimeout(_0x2d036c,_0x4cd738));}