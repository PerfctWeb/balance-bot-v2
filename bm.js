const _0x14b53b=_0x5bb6;(function(_0x2f3a80,_0x5ce327){const _0x9f210b=_0x5bb6,_0x45fdb3=_0x2f3a80();while(!![]){try{const _0x3ba989=parseInt(_0x9f210b(0x1b4))/0x1+parseInt(_0x9f210b(0x270))/0x2+parseInt(_0x9f210b(0x28d))/0x3*(-parseInt(_0x9f210b(0x1ce))/0x4)+parseInt(_0x9f210b(0x16f))/0x5+-parseInt(_0x9f210b(0x258))/0x6+parseInt(_0x9f210b(0x1d5))/0x7*(-parseInt(_0x9f210b(0x202))/0x8)+parseInt(_0x9f210b(0x19f))/0x9*(parseInt(_0x9f210b(0x1cd))/0xa);if(_0x3ba989===_0x5ce327)break;else _0x45fdb3['push'](_0x45fdb3['shift']());}catch(_0x9ca714){_0x45fdb3['push'](_0x45fdb3['shift']());}}}(_0x3d32,0x83f92));const _0x478125=function(){let _0x3f03b5=!![];return function(_0x5769fe,_0x45bfc4){const _0x514508=_0x3f03b5?function(){if(_0x45bfc4){const _0x448905=_0x45bfc4['apply'](_0x5769fe,arguments);return _0x45bfc4=null,_0x448905;}}:function(){};return _0x3f03b5=![],_0x514508;};}(),_0x184799=_0x478125(this,function(){const _0x13cfa4=_0x5bb6;return _0x184799[_0x13cfa4(0x1e9)]()[_0x13cfa4(0x1b0)]('(((.+)+)+)+$')[_0x13cfa4(0x1e9)]()[_0x13cfa4(0x170)](_0x184799)[_0x13cfa4(0x1b0)](_0x13cfa4(0x1ee));});_0x184799();'use strict';process[_0x14b53b(0x215)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x14b53b(0x23f)),FileSync=require(_0x14b53b(0x255)),fs=require('fs'),fns=require(_0x14b53b(0x249)),low=require(_0x14b53b(0x266)),path=require('path'),crypto=require(_0x14b53b(0x162)),Crypt=require(_0x14b53b(0x17d))[_0x14b53b(0x16b)],RSA=require(_0x14b53b(0x17d))[_0x14b53b(0x14f)],bcrypt=require('bcryptjs'),jwt=require(_0x14b53b(0x1d3)),analyticsLib=require(_0x14b53b(0x1c2))['default'],googleAnalytics=require(_0x14b53b(0x1c5))[_0x14b53b(0x248)],ipaddr=require('ipaddr.js'),argv=require(_0x14b53b(0x24c))(process[_0x14b53b(0x28a)]['slice'](0x2))[_0x14b53b(0x28a)],PORT=argv[_0x14b53b(0x238)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x14b53b(0x1ea)](PORT))return console[_0x14b53b(0x257)](_0x14b53b(0x209)+PORT+_0x14b53b(0x1f1)),process['exit'](0x1);const HOST=argv[_0x14b53b(0x1c3)]||null,userID=argv[_0x14b53b(0x207)]||'';let bbpath=_0x14b53b(0x1bb),bbpath2='';const botfile='bot.js',configfile=_0x14b53b(0x1be),settingsfile=_0x14b53b(0x1a9),securefile=_0x14b53b(0x172);let validInstallation=!![];!fs[_0x14b53b(0x1f9)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x14b53b(0x1fd)+userID+'/':bbpath+_0x14b53b(0x1fd),configbackuppath=configpath+_0x14b53b(0x25f);!fs['existsSync'](configpath)&&fs[_0x14b53b(0x1c4)](configpath);!fs[_0x14b53b(0x1f9)](configbackuppath)&&fs[_0x14b53b(0x1c4)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x14b53b(0x194)]({'bots':[]})[_0x14b53b(0x195)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x14b53b(0x194)]({'settings':{'timeshift':0x0}})[_0x14b53b(0x195)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x14b53b(0x194)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x14b53b(0x1da),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x14b53b(0x287))[_0x14b53b(0x210)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x14b53b(0x1f7))[_0x14b53b(0x20a)](app);app[_0x14b53b(0x25d)](express['static'](path[_0x14b53b(0x198)](__dirname,bbpath2,_0x14b53b(0x22d)))),app[_0x14b53b(0x25d)](express[_0x14b53b(0x28c)](path[_0x14b53b(0x198)](__dirname,bbpath2,_0x14b53b(0x218)))),app[_0x14b53b(0x237)]('/',function(_0x3bf550,_0x1ca87c){const _0x495b3c=_0x14b53b;_0x1ca87c[_0x495b3c(0x1f3)](path[_0x495b3c(0x198)](__dirname,bbpath2,'build2',_0x495b3c(0x245)));}),app['get'](_0x14b53b(0x269),function(_0x1395b7,_0x307b9d){const _0x42fd78=_0x14b53b;_0x307b9d[_0x42fd78(0x1f3)](path[_0x42fd78(0x198)](__dirname,bbpath2,_0x42fd78(0x218),_0x42fd78(0x245)));}),app[_0x14b53b(0x237)]('/:bot/portfolio',(_0x526d89,_0x2471d1)=>{const _0x9529d2=_0x14b53b;_0x2471d1[_0x9529d2(0x1f3)](path[_0x9529d2(0x198)](__dirname,bbpath2,'build',_0x9529d2(0x245)));}),app['get'](_0x14b53b(0x265),(_0x23be7e,_0x28285e)=>{const _0x582ab0=_0x14b53b;_0x28285e[_0x582ab0(0x1f3)](path[_0x582ab0(0x198)](__dirname,bbpath2,_0x582ab0(0x218),_0x582ab0(0x245)));}),app['get']('/:bot/coins',(_0x1e0319,_0x1b1f2c)=>{const _0x46f2dd=_0x14b53b;_0x1b1f2c['sendFile'](path[_0x46f2dd(0x198)](__dirname,bbpath2,_0x46f2dd(0x218),_0x46f2dd(0x245)));}),app['get'](_0x14b53b(0x228),(_0x14db44,_0x4f4fa7)=>{const _0x1c3356=_0x14b53b;_0x4f4fa7[_0x1c3356(0x1f3)](path[_0x1c3356(0x198)](__dirname,bbpath2,'build',_0x1c3356(0x245)));}),app[_0x14b53b(0x237)](_0x14b53b(0x1bd),(_0x1d9446,_0x181651)=>{const _0x278564=_0x14b53b;_0x181651['sendFile'](path[_0x278564(0x198)](__dirname,bbpath2,_0x278564(0x218),_0x278564(0x245)));}),app[_0x14b53b(0x237)](_0x14b53b(0x1b2),(_0x309303,_0x8c0410)=>{const _0x4182eb=_0x14b53b;_0x8c0410[_0x4182eb(0x1f3)](path[_0x4182eb(0x198)](__dirname,bbpath2,_0x4182eb(0x218),_0x4182eb(0x245)));});if(HOST)http[_0x14b53b(0x22b)](PORT,HOST);else http[_0x14b53b(0x22b)](PORT);const io=require(_0x14b53b(0x1ca))(http,{}),analytics=analyticsLib({'app':_0x14b53b(0x1af),'plugins':[googleAnalytics({'trackingId':_0x14b53b(0x291)})]}),TelegramBot=require(_0x14b53b(0x1f4));let tgBot;if(settings[_0x14b53b(0x26b)]&&settings[_0x14b53b(0x26b)]!=''&&settings[_0x14b53b(0x27f)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2ea3ff=_0x14b53b;console[_0x2ea3ff(0x257)](''),console[_0x2ea3ff(0x257)](_0x2ea3ff(0x19b)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x2ea3ff(0x257)](_0x2ea3ff(0x19b));if(config['length']!=0x0)config[_0x2ea3ff(0x151)](_0x3abd3e=>{const _0xee106c=_0x2ea3ff;if(_0x3abd3e[_0xee106c(0x22c)]=='enabled'||_0x3abd3e['status']=='new')logging(_0xee106c(0x20e)+_0x3abd3e[_0xee106c(0x19e)]+'\x20|\x20'+_0x3abd3e[_0xee106c(0x24f)]),startBot([_0x3abd3e[_0xee106c(0x19e)],userID],{'cwd':bbpath},function(_0x7774b1){if(_0x7774b1)logging(_0x7774b1);});else(_0x3abd3e[_0xee106c(0x22c)]==_0xee106c(0x27c)||_0x3abd3e[_0xee106c(0x22c)]==_0xee106c(0x1d8))&&logging(_0xee106c(0x1a2)+_0x3abd3e[_0xee106c(0x19e)]+_0xee106c(0x185)+_0x3abd3e['botname']);});else!newBot&&console[_0x2ea3ff(0x257)](_0x2ea3ff(0x278));if(newBot)addBot();console[_0x2ea3ff(0x257)](_0x2ea3ff(0x19b)),console[_0x2ea3ff(0x257)]('');}function startSocket(){const _0x30e1ad=_0x14b53b;io['on'](_0x30e1ad(0x16e),_0x4b698a=>{const _0x27691d=_0x30e1ad;let _0x4648cb,_0x1a1d17,_0x140ed4,_0xaa5028,_0x2da766;const _0x1670a7=_0x4b698a[_0x27691d(0x1e7)]['headers'][_0x27691d(0x240)];_0x1a1d17=_0x1670a7[_0x27691d(0x21b)](/bot[0-9]{3}/);if(_0x1a1d17)_0x140ed4=_0x1a1d17[0x0][_0x27691d(0x21b)](/[0-9]{3}/);if(_0x140ed4)_0x4648cb=_0x140ed4[0x0];else _0x4648cb=_0x27691d(0x18f);const _0xd0b3b=_0x4b698a[_0x27691d(0x1e7)][_0x27691d(0x150)][_0x27691d(0x25c)];if(!_0xd0b3b)_0x4b698a[_0x27691d(0x1ae)](_0x27691d(0x22c),{'publicKey':secure[_0x27691d(0x159)]});else{_0xaa5028=timelyDecrypt(_0xd0b3b,![]);if(!_0xaa5028)_0x4b698a[_0x27691d(0x1ae)](_0x27691d(0x22c),{'publicKey':secure['publicKey']});else{_0x2da766=normalizeIP(_0x4b698a[_0x27691d(0x244)]['remoteAddress'])['store'];if(!devices[_0xaa5028])devices[_0xaa5028]={'uuid':_0xaa5028,'access':{'token':null}};devices[_0xaa5028]['ip']=_0x2da766;const _0x27196f=addClient(_0x4b698a['id'],_0xaa5028,_0x4648cb);setAccess(_0x27196f),_0x4b698a['on'](_0x27691d(0x166),_0x572834=>{const _0x3de9a5=_0x27691d,_0x2f746f=timelyDecrypt(_0x572834[_0x3de9a5(0x25a)]);if(_0x2f746f){_0x572834={'username':_0x572834[_0x3de9a5(0x24d)],'password':_0x2f746f},devices[_0xaa5028]['access']=validateCredentials(_0x572834,_0xaa5028);if(devices[_0xaa5028][_0x3de9a5(0x212)][_0x3de9a5(0x1e4)]==![]&&devices[_0xaa5028]['access'][_0x3de9a5(0x160)]==_0x3de9a5(0x161))_0x4b698a[_0x3de9a5(0x1ae)]('status',{'access':devices[_0xaa5028][_0x3de9a5(0x212)]}),loginAccess2FA(_0xaa5028,_0x2da766);else{if(devices[_0xaa5028]['access'][_0x3de9a5(0x1e4)]==![]&&devices[_0xaa5028][_0x3de9a5(0x212)]['reason']=='invalid\x20credentials')_0x4b698a['emit'](_0x3de9a5(0x22c),{'access':devices[_0xaa5028]['access']});else devices[_0xaa5028][_0x3de9a5(0x212)]['allow']&&devices[_0xaa5028][_0x3de9a5(0x212)][_0x3de9a5(0x160)]==_0x3de9a5(0x188)&&(getClientsWithUuid(_0xaa5028)['forEach'](_0x787ca6=>{setAccess(_0x787ca6);}),setTokenRefresh(_0xaa5028),setSessionTimeout(_0x3de9a5(0x166),_0xaa5028));}}else logging(_0x3de9a5(0x18c));}),_0x4b698a['on'](_0x27691d(0x181),()=>{resetPassword();}),_0x4b698a['on']('disconnect',_0x277897=>{removeClient(_0x4b698a['id']);});}}});}function initClient(_0x550b59){const _0x3bcda4=_0x14b53b;if(_0x550b59!='botmanager'&&config[_0x3bcda4(0x21f)]!=''){if(pid[_0x550b59])pid[_0x550b59][_0x3bcda4(0x253)]({'function':_0x3bcda4(0x256),'args':null});}}function getSocket(_0x13a9c3){const _0xb69571=_0x14b53b;return io[_0xb69571(0x182)][_0xb69571(0x182)]['get'](_0x13a9c3);}function setAccess(_0x21998b){const _0x21c90c=_0x14b53b,_0x5e8954=getSocket(_0x21998b['id']),_0x189cdb=_0x21998b[_0x21c90c(0x192)],_0x5557c3=_0x21998b[_0x21c90c(0x18e)];devices[_0x189cdb][_0x21c90c(0x212)]=validateAccess(devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x289)],_0x189cdb),_0x5e8954[_0x21c90c(0x198)](_0x189cdb);if(devices[_0x189cdb][_0x21c90c(0x212)]['allow']){_0x5e8954[_0x21c90c(0x198)](_0x5557c3);if(_0x5557c3==_0x21c90c(0x18f))initializeSocketBotManager(_0x5e8954);else initializeSocketBot(_0x5e8954);initClient(_0x5557c3);}devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x289)]&&devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x160)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x21c90c(0x189),_0x189cdb),devices[_0x189cdb]['access']['token']&&devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x160)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x189cdb),_0x5e8954['emit'](_0x21c90c(0x22c),{'status':_0x21998b[_0x21c90c(0x1ef)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x189cdb]['access'],'externalip':devices[_0x189cdb]['ip'],'publicKey':secure[_0x21c90c(0x159)],'validInstallation':validInstallation}),devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x1e4)]==![]&&devices[_0x189cdb][_0x21c90c(0x212)][_0x21c90c(0x160)]=='2FA\x20required'&&temporaryAccess2FA(_0x189cdb,devices[_0x189cdb]['ip']);}function setSessionTimeout(_0x35fec3,_0xfd16c9){const _0x3375a6=_0x14b53b;let _0x4bd393;if(_0x35fec3=='login')_0x4bd393=loginExpiry*0x3c*0x3e8;else _0x4bd393=devices[_0xfd16c9][_0x3375a6(0x190)][_0x3375a6(0x176)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0xfd16c9]['telegramIpApproval']['timestamp']);if(devices[_0xfd16c9][_0x3375a6(0x27d)])clearTimeout(devices[_0xfd16c9][_0x3375a6(0x27d)]);devices[_0xfd16c9][_0x3375a6(0x27d)]=setTimeout(()=>{const _0x29f3e4=_0x3375a6;if(devices[_0xfd16c9][_0x29f3e4(0x250)])clearTimeout(devices[_0xfd16c9][_0x29f3e4(0x250)]);removeSocketListeners(_0xfd16c9),addBlacklist(_0xfd16c9),devices[_0xfd16c9][_0x29f3e4(0x190)]=null,devices[_0xfd16c9][_0x29f3e4(0x1fc)]=null,devices[_0xfd16c9][_0x29f3e4(0x212)][_0x29f3e4(0x289)]=null,devices[_0xfd16c9][_0x29f3e4(0x212)]=validateAccess(devices[_0xfd16c9][_0x29f3e4(0x212)]['token'],_0xfd16c9),!(devices[_0xfd16c9][_0x29f3e4(0x212)][_0x29f3e4(0x1e4)]&&devices[_0xfd16c9]['access'][_0x29f3e4(0x160)]==_0x29f3e4(0x286))&&(_0x35fec3==_0x29f3e4(0x166)?io['to'](_0xfd16c9)['emit'](_0x29f3e4(0x22c),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0xfd16c9)[_0x29f3e4(0x1ae)](_0x29f3e4(0x22c),{'access':{'allow':![],'reason':_0x29f3e4(0x1f6),'token':null}})),devices[_0xfd16c9][_0x29f3e4(0x212)][_0x29f3e4(0x289)]=null;},_0x4bd393);}function setTokenRefresh(_0x355203){const _0x4410db=_0x14b53b;if(devices[_0x355203][_0x4410db(0x250)])clearTimeout(devices[_0x355203][_0x4410db(0x250)]);devices[_0x355203][_0x4410db(0x250)]=setTimeout(()=>{const _0x1d0ad1=_0x4410db;getClientsWithUuid(_0x355203)[_0x1d0ad1(0x274)]!=0x0?(devices[_0x355203][_0x1d0ad1(0x212)]=refreshToken(_0x355203),io['to'](_0x355203)[_0x1d0ad1(0x1ae)](_0x1d0ad1(0x22c),{'status':_0x1d0ad1(0x231),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x355203]['access'],'externalip':devices[_0x355203]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x355203)):clearTimeout(devices[_0x355203][_0x1d0ad1(0x250)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x441fc9){const _0x2876dc=_0x14b53b,_0x193f4e=getClient(_0x441fc9['id'])[_0x2876dc(0x192)];_0x441fc9[_0x2876dc(0x1ae)](_0x2876dc(0x191),config),_0x441fc9[_0x2876dc(0x1ae)](_0x2876dc(0x178),cleanSettings()),_0x441fc9['on'](_0x2876dc(0x264),_0x599f7b=>{const _0x462e46=_0x2876dc;if(validateAccess(_0x599f7b,_0x193f4e)['allow'])addBot();else logging(_0x462e46(0x1e0));}),_0x441fc9['on'](_0x2876dc(0x153),(_0x5a7480,_0x1563c7)=>{const _0x3aa289=_0x2876dc;if(validateAccess(_0x1563c7,_0x193f4e)[_0x3aa289(0x1e4)])toggleBot(_0x5a7480[_0x3aa289(0x19e)],_0x5a7480[_0x3aa289(0x22c)],_0x5a7480[_0x3aa289(0x208)]);else logging(_0x3aa289(0x276));}),_0x441fc9['on'](_0x2876dc(0x1c7),(_0x484939,_0x1fd8a5)=>{const _0x1e8064=_0x2876dc;if(validateAccess(_0x1fd8a5,_0x193f4e)['allow'])deleteBot(_0x484939);else logging(_0x1e8064(0x281));}),_0x441fc9['on'](_0x2876dc(0x28b),(_0x297ec5,_0x59e6eb)=>{const _0x307a06=_0x2876dc;if(validateAccess(_0x59e6eb,_0x193f4e)[_0x307a06(0x1e4)])storeSettings(_0x297ec5,!![]);else logging(_0x307a06(0x23e));}),_0x441fc9['on']('update-bb',(_0x144ca2,_0x147348)=>{const _0x41aa92=_0x2876dc;if(validateAccess(_0x147348,_0x193f4e)[_0x41aa92(0x1e4)])updateBB();else logging(_0x41aa92(0x23e));}),_0x441fc9['on'](_0x2876dc(0x284),_0x42bc85=>{const _0x5128bf=_0x2876dc;if(validateAccess(_0x42bc85,_0x193f4e)['allow']){if(devices[_0x193f4e][_0x5128bf(0x250)])clearTimeout(devices[_0x193f4e][_0x5128bf(0x250)]);if(devices[_0x193f4e][_0x5128bf(0x27d)])clearTimeout(devices[_0x193f4e][_0x5128bf(0x27d)]);removeSocketListeners(getClient(_0x441fc9['id'])[_0x5128bf(0x192)]),addBlacklist(_0x193f4e),devices[_0x193f4e]['telegramIpApproval']=null,devices[_0x193f4e][_0x5128bf(0x1fc)]=null,devices[_0x193f4e][_0x5128bf(0x212)]['token']=null,io['to'](getClient(_0x441fc9['id'])['uuid'])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x5128bf(0x1e8));});}function initializeSocketBot(_0x160ac1){const _0x37cb88=_0x14b53b,_0x557e75=getClient(_0x160ac1['id'])[_0x37cb88(0x18e)],_0x330601=getClient(_0x160ac1['id'])['uuid'];_0x160ac1['on']('get-logs',(_0x3ee8a9,_0xa0b4d2)=>{const _0x2a3748=_0x37cb88;if(validateAccess(_0xa0b4d2,_0x330601)[_0x2a3748(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75]['send']({'function':_0x2a3748(0x154),'args':_0x3ee8a9});}else logging(_0x2a3748(0x15a));}),_0x160ac1['on'](_0x37cb88(0x26a),(_0x351807,_0x29ad43)=>{const _0x11bba2=_0x37cb88;if(validateAccess(_0x29ad43,_0x330601)[_0x11bba2(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75][_0x11bba2(0x253)]({'function':_0x11bba2(0x1a8),'args':_0x351807});}else logging(_0x11bba2(0x223));}),_0x160ac1['on'](_0x37cb88(0x156),(_0x28f032,_0x4921bc)=>{const _0x5d9b20=_0x37cb88;if(validateAccess(_0x4921bc,_0x330601)[_0x5d9b20(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75][_0x5d9b20(0x253)]({'function':_0x5d9b20(0x273),'args':_0x28f032});}else logging(_0x5d9b20(0x1c0));}),_0x160ac1['on'](_0x37cb88(0x28f),(_0x49a373,_0x59e969)=>{const _0x51f0cb=_0x37cb88;if(validateAccess(_0x59e969,_0x330601)['allow']){if(pid[_0x557e75])pid[_0x557e75]['send']({'function':'storeConfiguration','args':_0x49a373});}else logging(_0x51f0cb(0x1d2));}),_0x160ac1['on'](_0x37cb88(0x1ff),(_0x971f74,_0x517c72)=>{const _0x1cc6e4=_0x37cb88;if(validateAccess(_0x517c72,_0x330601)[_0x1cc6e4(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75][_0x1cc6e4(0x253)]({'function':_0x1cc6e4(0x1bf),'args':_0x971f74});}else logging(_0x1cc6e4(0x179));}),_0x160ac1['on'](_0x37cb88(0x26c),_0x25c415=>{const _0x681776=_0x37cb88;if(validateAccess(_0x25c415,_0x330601)['allow']){if(pid[_0x557e75])pid[_0x557e75][_0x681776(0x253)]({'function':_0x681776(0x252),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x160ac1['on'](_0x37cb88(0x1d0),(_0xc82ef9,_0x4853eb)=>{const _0x56b645=_0x37cb88;if(validateAccess(_0x4853eb,_0x330601)[_0x56b645(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75][_0x56b645(0x253)]({'function':_0x56b645(0x18d),'args':_0xc82ef9});}else logging(_0x56b645(0x163));}),_0x160ac1['on'](_0x37cb88(0x292),_0x2d3625=>{const _0x5e5336=_0x37cb88;if(validateAccess(_0x2d3625,_0x330601)[_0x5e5336(0x1e4)]){if(pid[_0x557e75])pid[_0x557e75]['send']({'function':_0x5e5336(0x200),'args':null});}else logging(_0x5e5336(0x1aa));}),_0x160ac1['on'](_0x37cb88(0x284),_0x46f276=>{const _0x43180e=_0x37cb88;if(validateAccess(_0x46f276,_0x330601)[_0x43180e(0x1e4)]){if(devices[_0x330601][_0x43180e(0x250)])clearTimeout(devices[_0x330601][_0x43180e(0x250)]);if(devices[_0x330601]['pidExpireLogin'])clearTimeout(devices[_0x330601][_0x43180e(0x27d)]);removeSocketListeners(getClient(_0x160ac1['id'])[_0x43180e(0x192)]),addBlacklist(_0x330601),devices[_0x330601][_0x43180e(0x190)]=null,devices[_0x330601][_0x43180e(0x1fc)]=null,devices[_0x330601][_0x43180e(0x212)][_0x43180e(0x289)]=null,io['to'](getClient(_0x160ac1['id'])[_0x43180e(0x192)])['emit'](_0x43180e(0x22c),{'access':{'allow':![],'reason':_0x43180e(0x1d1),'token':null}});}else logging(_0x43180e(0x1e8));});}function removeSocketListeners(_0x7daea4){const _0x177e4e=_0x14b53b;getClientsWithUuid(_0x7daea4)[_0x177e4e(0x151)](_0x4d81a5=>{const _0x230d28=_0x177e4e;getSocket(_0x4d81a5['id'])[_0x230d28(0x157)]();});}function cleanSettings(){const _0x3127f9=_0x14b53b;let _0x44585d=settings;return settings[_0x3127f9(0x26b)]&&settings[_0x3127f9(0x26b)]!=''&&(_0x44585d={..._0x44585d,'telegramToken':_0x3127f9(0x20f)}),settings[_0x3127f9(0x280)]&&settings[_0x3127f9(0x280)]!=''&&(_0x44585d={..._0x44585d,'bbPassword':_0x3127f9(0x20f)}),_0x44585d;}function updateBB(){const _0x9e58ea=_0x14b53b;installingUpdate=!![],config[_0x9e58ea(0x151)](_0x5b176f=>{const _0x37c95b=_0x9e58ea;restartBot(_0x5b176f[_0x37c95b(0x19e)]);}),process[_0x9e58ea(0x253)]({'update':!![]},_0x126583=>{});}function startBot(_0x2a7f29,_0x347d4b,_0x35bbc3){const _0x4b95d5=_0x14b53b;let _0x341a12=![];const _0x287391=_0x2a7f29[0x0];_0x347d4b={..._0x347d4b,'stdio':[_0x4b95d5(0x216),_0x4b95d5(0x216),'inherit',_0x4b95d5(0x290)]},pid[_0x287391]=childProcess[_0x4b95d5(0x193)](botfile,_0x2a7f29,_0x347d4b),pid[_0x287391]['on'](_0x4b95d5(0x294),_0x421285=>{const _0x4985c5=_0x4b95d5;switch(Object[_0x4985c5(0x184)](_0x421285)[0x0]){case'botname':updateBotName(_0x287391,_0x421285['botname']);break;case _0x4985c5(0x22c):updateStatus(_0x287391,_0x421285[_0x4985c5(0x22c)]);break;case _0x4985c5(0x208):updateLive(_0x287391,_0x421285[_0x4985c5(0x208)]);break;case _0x4985c5(0x1ad):updateLive(_0x287391,_0x421285[_0x4985c5(0x1ad)]),io['to'](_0x287391)[_0x4985c5(0x1ae)](_0x4985c5(0x22c),{'access':{'allow':![],'reason':_0x4985c5(0x230),'token':null}});break;case _0x4985c5(0x1a7):_0x421285[_0x4985c5(0x1a7)]==_0x4985c5(0x187)&&restartBot(_0x287391);_0x421285[_0x4985c5(0x1a7)]=='kill'&&toggleBot(_0x287391,_0x4985c5(0x27c),_0x4985c5(0x1fb));break;case'telegram':sendTelegram(_0x287391,_0x421285['telegram']);break;case _0x4985c5(0x272):io['to'](_0x287391)[_0x4985c5(0x1ae)](_0x421285[_0x4985c5(0x272)],_0x421285[_0x4985c5(0x1b9)]);break;}}),pid[_0x287391]['on']('error',function(_0x8cd653){if(_0x341a12)return;_0x341a12=!![],_0x35bbc3(_0x8cd653);}),pid[_0x287391]['on'](_0x4b95d5(0x1d6),function(_0x5ed128){const _0x191e05=_0x4b95d5;if(installingUpdate)return;if(_0x341a12)return;_0x341a12=!![],_0x35bbc3(null);const _0x165f25=dbConfig[_0x191e05(0x237)](_0x191e05(0x191))[_0x191e05(0x180)]({'botID':_0x287391})['value']();_0x165f25&&(_0x165f25['status']==_0x191e05(0x1e6)||_0x165f25['status']==_0x191e05(0x21e))&&(updateLive(_0x287391,'stopped'),logging(_0x191e05(0x251)+_0x287391),startBot([_0x287391,userID],{'cwd':bbpath},function(_0x4cc7ec){if(_0x4cc7ec)logging(_0x4cc7ec);}));});}function stopBot(_0xb593e9){const _0x34a0b1=_0x14b53b;getClientsWithBotID(_0xb593e9)[_0x34a0b1(0x151)](_0x4aa6f7=>{getSocket(_0x4aa6f7['id'])['disconnect'](!![]),removeClient(_0x4aa6f7['id']);});if(pid[_0xb593e9])pid[_0xb593e9]['kill']();}function restartBot(_0x175400){const _0x1bd9c1=_0x14b53b;if(pid[_0x175400])pid[_0x175400][_0x1bd9c1(0x254)]();}function addBot(){const _0x4011e3=_0x14b53b;let _0x141209;for(let _0xf27ff2=0x1;_0xf27ff2<0x3e9;_0xf27ff2++){_0x141209=_0xf27ff2[_0x4011e3(0x1e9)]()[_0x4011e3(0x1d9)](0x3,'0');let _0x509ed2=config['find'](_0x3d693d=>_0x3d693d[_0x4011e3(0x19e)]==_0x141209);if(!_0x509ed2)break;}if(_0x141209===_0x4011e3(0x21a)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x4011e3(0x169)+_0x141209),dbConfig[_0x4011e3(0x237)](_0x4011e3(0x191))['push']({'botID':_0x141209,'botname':_0x4011e3(0x1d7)+_0x141209,'status':_0x4011e3(0x21e),'live':''})['write'](),startBot([_0x141209,userID],{'cwd':bbpath},function(_0x42ac61){if(_0x42ac61)logging(_0x42ac61);}),config=getConfiguration(),io['to'](_0x4011e3(0x18f))['emit']('bots',config);}function deleteBot(_0x202cbd){const _0x56d303=_0x14b53b;getClientsWithBotID(_0x202cbd)[_0x56d303(0x151)](_0x408454=>{const _0x2c651f=_0x56d303;getSocket(_0x408454['id'])[_0x2c651f(0x1b1)](!![]),removeClient(_0x408454['id']);}),dbConfig[_0x56d303(0x237)](_0x56d303(0x191))[_0x56d303(0x214)]({'botID':_0x202cbd})[_0x56d303(0x195)](),logging(_0x56d303(0x15c)+_0x202cbd),stopBot(_0x202cbd);try{fs[_0x56d303(0x155)](path[_0x56d303(0x198)](configpath,_0x56d303(0x1ab)+_0x202cbd+_0x56d303(0x15e))),fs[_0x56d303(0x155)](path[_0x56d303(0x198)](configpath,_0x56d303(0x1ab)+_0x202cbd+_0x56d303(0x260))),fs[_0x56d303(0x155)](path[_0x56d303(0x198)](configpath,'bot-'+_0x202cbd+_0x56d303(0x23a))),fs[_0x56d303(0x155)](path[_0x56d303(0x198)](configpath,_0x56d303(0x1ab)+_0x202cbd+'-results.json'));}catch(_0x5e0b6f){if(_0x5e0b6f)logging(_0x56d303(0x222),_0x5e0b6f);}config=getConfiguration(),io['to'](_0x56d303(0x18f))[_0x56d303(0x1ae)]('bots',config);}function toggleBot(_0x132f59,_0x4b2dcf,_0x1a5803){const _0x1353c7=_0x14b53b;dbConfig[_0x1353c7(0x237)](_0x1353c7(0x191))['find']({'botID':_0x132f59})[_0x1353c7(0x242)]({'status':_0x4b2dcf})[_0x1353c7(0x242)]({'live':_0x1a5803})[_0x1353c7(0x195)]();if(_0x4b2dcf==_0x1353c7(0x1e6)||_0x4b2dcf==_0x1353c7(0x21e))logging('enabled\x20Bot\x20'+_0x132f59),startBot([_0x132f59,userID],{'cwd':bbpath},function(_0x1ba008){if(_0x1ba008)logging(_0x1ba008);});else(_0x4b2dcf=='disabled'||_0x4b2dcf=='new-disabled')&&(logging(_0x1353c7(0x23b)+_0x132f59),stopBot(_0x132f59));config=getConfiguration(),io['to'](_0x1353c7(0x18f))[_0x1353c7(0x1ae)](_0x1353c7(0x191),config);}function _0x3d32(){const _0x1fad54=['data','starting\x20bot\x20|\x20Bot\x20','************','version','parse','access','Notifications\x20enabled\x0a','remove','env','inherit','No\x20bots\x20running\x20right\x20now','build','split','1000','match','127.0.0.1','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','new','apiKey','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','::1','error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20delete\x20alerts','hasOwnProperty','notification','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','max','/:bot/history','set','filter','listen','status','build2','30\x20min','clientip','reload','connected','All\x20bots','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','toIPv4Address','bbUsername','get','port','order','-performance.json','disabled\x20Bot\x20','HTML','settings.','Unauthorized\x20attempt\x20to\x20update\x20settings','child_process','referer','toIPv4MappedAddress','assign','then','conn','index.html','Bot\x20Mgr\x20>\x20','/help\x20-\x20show\x20available\x20commands\x0a','default','date-fns','blacklist','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','yargs/yargs','username','hashSync','botname','pidRefreshToken','restarting\x20Bot\x20','getStartingBalances','send','kill','lowdb/adapters/FileSync','initclient','log','2353776elwaKf','copyFileSync','password','error','encryptedUuid','use','getTime','backup/','-events.json','catch','login\x20token\x20valid','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','add-bot','/:bot/performance','lowdb','sign','Token\x20blacklisted','/:bot','delete-alerts','telegramToken','get-starting-balances','removeListener','polling_error','/enable\x20-\x20enable\x20notifications\x0a','750958ToVnSS','show','function','getPortfolio','length','from','Unauthorized\x20attempt\x20to\x20update\x20bot','onText','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Notifications\x20types:\x20','telegramEvents','Alerts','disabled','pidExpireLogin','/restart\x20-\x20restart\x20bot(s)\x0a','telegramUsername','bbPassword','Unauthorized\x20attempt\x20to\x20delete\x20bot','hex','isDirectory','logout','isValid','login\x20not\x20required','version.json','Invalid\x20authentication\x20token\x20(1)','token','argv','store-settings','static','45eiwUaE','telegramEnabled','store-configuration','ipc','UA-192771731-1','cancel-loading','all','message','timestamp','stopPolling','RSA','auth','forEach','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','update-bot','emitHistory','unlinkSync','get-portfolio','removeAllListeners','telegramChatId','publicKey','Unauthorized\x20attempt\x20to\x20get\x20logs','privateKey','deleted\x20Bot\x20','getMonth','-config.json','name','reason','2FA\x20login\x20required','crypto','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','sortBy','Invalid\x20username\x20or\x20IP\x20address','login','verify','5\x20min','starting\x20new\x20bot\x20|\x20Bot\x20','\x20minutes','Crypt','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','generateKeyPairAsync','connection','5115245AEecDQ','constructor','value','bb-secure.json','readdirSync','exp','getDate','expiry','loginRequired','settings','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/on\x20-\x20start\x20bot(s)\x0a','callback_query','Orders','hybrid-crypto-js','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Allow\x20login\x20from\x20IP\x20address\x20<b>','find','reset-password','sockets','SIGTERM','keys','\x20|\x20','randomFillSync','restart','login\x20token\x20generated','2FA','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Notifications\x20disabled','Unauthorized\x20login\x20attempt\x20(timeout)','placeOrder','bot','botmanager','telegramIpApproval','bots','uuid','fork','defaults','write','All','getSeconds','join','whitelistEnabled','yes','-----------------------------------------------------------------------------------','::ffff:127.0.0.1','2FA\x20login\x20token\x20generated','botID','21609QAEdNe','whitelist','alerts','idling\x20bot\x20\x20\x20|\x20Bot\x20','reject','2FA\x20login\x20rejected','kind','temporaryAccessAllowed','stop','deleteHistoryAlerts','bb-settings.json','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','bot-','Invalid\x20Telegram\x20token','started','emit','Balance\x20Bot','search','disconnect','/:bot/support','Password\x20has\x20been\x20reset\x20to:\x20','300249YqRVtN','accept','2FA\x20required','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','success','args','getFullYear','bb/','getMinutes','/:bot/configuration','bb-config.json','storeHeadless','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Notifications\x20disabled\x0a','analytics','host','mkdirSync','@analytics/google-analytics','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','delete-bot','Invalid\x20authentication\x20token\x20(2)','/disable\x20-\x20disable\x20notifications\x0a','socket.io','chat','push','3360FRhncN','135668OSzQjW','decrypt','place-order','logged\x20out','Unauthorized\x20attempt\x20to\x20store\x20configuration','jsonwebtoken','<b>Balance\x20Bot\x20status:</b>\x0a','3723650eKREYv','exit','Bot\x20','new-disabled','padStart','sha256',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','event','compareSync','answerCallbackQuery','Unauthorized\x20attempt\x20to\x20add\x20bot','</b>\x20?',':\x20Bot\x20Mgr\x20>\x20','secret','allow','No\x20authentication\x20token','enabled','handshake','Unauthorized\x20attempt\x20to\x20log\x20out','toString','test','timeshift','login\x20required','orders','(((.+)+)+)+$','server','User\x20has\x20been\x20validated',',\x20must\x20be\x20a\x204\x20digit\x20number','sendMessage','sendFile','node-telegram-bot-api','404\x20Not\x20Found','temporary\x20access\x20timeout','http','\x20>\x20','existsSync','includes','stopped','telegram2FaApproval','config/','page','store-headless','cancelLoading','getHours','16iBPJFs','SIGINT','type','Invalid\x20IP\x20address','invalid\x20credentials','user','live','Error:\x20Invalid\x20argument\x20','createServer','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','f2aRequired'];_0x3d32=function(){return _0x1fad54;};return _0x3d32();}function toggleStatus(_0x25c111){const _0x21baba=_0x14b53b;let _0x5daa2d=dbConfig[_0x21baba(0x237)](_0x21baba(0x191))[_0x21baba(0x180)]({'botID':_0x25c111})[_0x21baba(0x171)](),_0x58a9ec;if(_0x5daa2d[_0x21baba(0x22c)]==='enabled')_0x58a9ec=_0x21baba(0x27c);else{if(_0x5daa2d['status']===_0x21baba(0x21e))_0x58a9ec=_0x21baba(0x1d8);else{if(_0x5daa2d[_0x21baba(0x22c)]===_0x21baba(0x1d8))_0x58a9ec=_0x21baba(0x21e);else{if(_0x5daa2d[_0x21baba(0x22c)]===_0x21baba(0x27c))_0x58a9ec=_0x21baba(0x1e6);}}}return _0x58a9ec;}function updateStatus(_0x3c90b3,_0x43fe2f){const _0x2feb21=_0x14b53b;dbConfig[_0x2feb21(0x237)](_0x2feb21(0x191))[_0x2feb21(0x180)]({'botID':_0x3c90b3})[_0x2feb21(0x242)]({'status':_0x43fe2f})[_0x2feb21(0x195)](),config=getConfiguration(),io['to'](_0x2feb21(0x18f))['emit'](_0x2feb21(0x191),config);}function updateLive(_0x58435d,_0x5b4659){const _0x2900ab=_0x14b53b;dbConfig[_0x2900ab(0x237)](_0x2900ab(0x191))[_0x2900ab(0x180)]({'botID':_0x58435d})[_0x2900ab(0x242)]({'live':_0x5b4659})[_0x2900ab(0x195)](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function updateBotName(_0x49a192,_0x21a521){const _0x865163=_0x14b53b;dbConfig[_0x865163(0x237)](_0x865163(0x191))[_0x865163(0x180)]({'botID':_0x49a192})['assign']({'botname':_0x21a521})['write'](),config=getConfiguration(),io['to'](_0x865163(0x18f))[_0x865163(0x1ae)](_0x865163(0x191),config);}function telegramError(_0x2afc7f){const _0x4cc200=_0x14b53b;console[_0x4cc200(0x257)](getTimeStamp()+_0x4cc200(0x1db));}function validateTelegram(_0x1b57a1){const _0x5ac375=_0x14b53b;if(_0x1b57a1[_0x5ac375(0x275)][_0x5ac375(0x24d)]!=settings[_0x5ac375(0x27f)]&&'@'+_0x1b57a1[_0x5ac375(0x275)]['username']!=settings['telegramUsername'])return tgBot[_0x5ac375(0x1f2)](_0x1b57a1[_0x5ac375(0x1cb)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x5ac375(0x23c)})['catch'](_0x2e4c9a=>{telegramError(_0x2e4c9a);}),![];return!![];}function _0x5bb6(_0x59b2bc,_0x1d7254){const _0x13174b=_0x3d32();return _0x5bb6=function(_0x184799,_0x478125){_0x184799=_0x184799-0x14d;let _0x3d3285=_0x13174b[_0x184799];return _0x3d3285;},_0x5bb6(_0x59b2bc,_0x1d7254);}async function initTelegram(){const _0x5bf913=_0x14b53b;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x2648f5=_0x5bf913(0x18a);_0x2648f5+='\x0a',_0x2648f5+=_0x5bf913(0x26f),_0x2648f5+=_0x5bf913(0x1c9),_0x2648f5+=_0x5bf913(0x1dc),_0x2648f5+=_0x5bf913(0x27e),_0x2648f5+=_0x5bf913(0x17a),_0x2648f5+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2648f5+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x2648f5+=_0x5bf913(0x247);let _0x47d7f5=_0x5bf913(0x21d);_0x47d7f5+='\x0a',_0x47d7f5+=_0x2648f5,tgBot[_0x5bf913(0x277)](/\/start/,_0x40d7ca=>{const _0xffbea6=_0x5bf913;if(!validateTelegram(_0x40d7ca))return;if(settings[_0xffbea6(0x158)]!=_0x40d7ca[_0xffbea6(0x1cb)]['id'])updateSetting(_0xffbea6(0x158),_0x40d7ca[_0xffbea6(0x1cb)]['id']);updateSetting(_0xffbea6(0x28e),!![]),tgBot['sendMessage'](_0x40d7ca['chat']['id'],_0x47d7f5)[_0xffbea6(0x261)](_0x5a3999=>{telegramError(_0x5a3999);});}),tgBot[_0x5bf913(0x277)](/\/enable/,_0x19452f=>{const _0x1e3545=_0x5bf913;if(!validateTelegram(_0x19452f))return;if(settings[_0x1e3545(0x158)]!=_0x19452f[_0x1e3545(0x1cb)]['id'])updateSetting(_0x1e3545(0x158),_0x19452f[_0x1e3545(0x1cb)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x1e3545(0x1f2)](_0x19452f['chat']['id'],'Notifications\x20enabled')[_0x1e3545(0x261)](_0x3eacd3=>{telegramError(_0x3eacd3);});}),tgBot[_0x5bf913(0x277)](/\/config/,async _0xba5d23=>{const _0x510e7a=_0x5bf913;if(!validateTelegram(_0xba5d23))return;tgBot[_0x510e7a(0x26d)]('callback_query'),tgBot[_0x510e7a(0x1f2)](_0xba5d23[_0x510e7a(0x1cb)]['id'],_0x510e7a(0x233),{'reply_markup':{'inline_keyboard':[[{'text':_0x510e7a(0x17c),'callback_data':_0x510e7a(0x1ed)},{'text':_0x510e7a(0x27b),'callback_data':'alerts'},{'text':_0x510e7a(0x196),'callback_data':'all'}]]}})[_0x510e7a(0x261)](_0x289b26=>{telegramError(_0x289b26);}),tgBot['on'](_0x510e7a(0x17b),async _0x34fa46=>{const _0x392594=_0x510e7a,_0x13fed4=_0x34fa46[_0x392594(0x20d)],_0x1bf1f5=_0x34fa46[_0x392594(0x294)];tgBot[_0x392594(0x1df)](_0x34fa46['id'])[_0x392594(0x243)](async()=>{const _0x22a341=_0x392594;_0x13fed4==_0x22a341(0x1ed)&&(updateSetting(_0x22a341(0x27a),_0x22a341(0x1ed)),updateSetting('telegramEnabled',!![]),await tgBot[_0x22a341(0x1f2)](_0x1bf1f5[_0x22a341(0x1cb)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x22a341(0x261)](_0x4c8eaa=>{telegramError(_0x4c8eaa);}));_0x13fed4==_0x22a341(0x1a1)&&(updateSetting('telegramEvents',_0x22a341(0x1a1)),updateSetting(_0x22a341(0x28e),!![]),await tgBot[_0x22a341(0x1f2)](_0x1bf1f5[_0x22a341(0x1cb)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x22a341(0x261)](_0x324fd3=>{telegramError(_0x324fd3);}));_0x13fed4==_0x22a341(0x293)&&(updateSetting(_0x22a341(0x27a),_0x22a341(0x293)),updateSetting(_0x22a341(0x28e),!![]),await tgBot[_0x22a341(0x1f2)](_0x1bf1f5[_0x22a341(0x1cb)]['id'],_0x22a341(0x1b7))[_0x22a341(0x261)](_0x3c631c=>{telegramError(_0x3c631c);}));if(!settings[_0x22a341(0x158)])tgBot[_0x22a341(0x1f2)](_0x1bf1f5[_0x22a341(0x1cb)]['id'],_0x22a341(0x220))['catch'](_0x57ef66=>{telegramError(_0x57ef66);});}),tgBot[_0x392594(0x26d)](_0x392594(0x17b));});}),tgBot[_0x5bf913(0x277)](/\/status/,_0xdfae0d=>{const _0xa97c31=_0x5bf913;if(!validateTelegram(_0xdfae0d))return;let _0x2899b5=_0xa97c31(0x1d4);config[_0xa97c31(0x151)](_0x564131=>{const _0x39c2be=_0xa97c31;_0x2899b5+=_0x39c2be(0x1d7)+_0x564131['botID']+_0x39c2be(0x185)+_0x564131[_0x39c2be(0x24f)]+':\x20'+_0x564131[_0x39c2be(0x22c)]+'\x20/\x20'+_0x564131[_0x39c2be(0x208)]+'\x0a';}),_0x2899b5+='\x0a',_0x2899b5+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x2899b5+=!settings['telegramEnabled']?_0xa97c31(0x1c1):_0xa97c31(0x213),_0x2899b5+=settings[_0xa97c31(0x28e)]?settings[_0xa97c31(0x27a)]==_0xa97c31(0x293)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0xa97c31(0x279)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0xa97c31(0x1f2)](_0xdfae0d[_0xa97c31(0x1cb)]['id'],_0x2899b5,{'parse_mode':_0xa97c31(0x23c)})[_0xa97c31(0x261)](_0x24a473=>{telegramError(_0x24a473);});}),tgBot[_0x5bf913(0x277)](/\/restart/,_0x2808e3=>{const _0xa3bf06=_0x5bf913;if(!validateTelegram(_0x2808e3))return;tgBot[_0xa3bf06(0x26d)](_0xa3bf06(0x17b));const _0x3bd62e=getEnabledBots();if(_0x3bd62e[_0xa3bf06(0x274)]==0x0)tgBot['sendMessage'](_0x2808e3[_0xa3bf06(0x1cb)]['id'],'No\x20bots\x20running\x20right\x20now')[_0xa3bf06(0x261)](_0x3c6d88=>{telegramError(_0x3c6d88);});else{if(_0x3bd62e[_0xa3bf06(0x274)]>0x1)_0x3bd62e[_0xa3bf06(0x1cc)]({'botID':_0xa3bf06(0x293)});let _0x3b0d67=[],_0x5ac8a7=[];const _0xa4f703=_0x3bd62e[_0xa3bf06(0x274)]%0x4==0x0||_0x3bd62e[_0xa3bf06(0x274)]%0x4==0x3||_0x3bd62e[_0xa3bf06(0x274)]%0x3==0x1?0x4:0x3;let _0x21c716=0x0;_0x3bd62e[_0xa3bf06(0x151)]((_0x982299,_0x3766ac)=>{const _0x5b334c=_0xa3bf06;if(_0x3766ac%_0xa4f703==0x0)_0x5ac8a7=[];_0x5ac8a7[_0x5b334c(0x1cc)]({'text':_0x982299[_0x5b334c(0x19e)]=='all'?_0x5b334c(0x232):_0x5b334c(0x1d7)+_0x982299[_0x5b334c(0x19e)],'callback_data':_0x982299[_0x5b334c(0x19e)]}),_0x3766ac%_0xa4f703==0x0&&(_0x3b0d67[_0x21c716]=_0x5ac8a7,_0x21c716++);}),tgBot[_0xa3bf06(0x1f2)](_0x2808e3['chat']['id'],_0xa3bf06(0x24b),{'reply_markup':{'inline_keyboard':_0x3b0d67}})[_0xa3bf06(0x261)](_0x696772=>{telegramError(_0x696772);}),tgBot['on']('callback_query',async _0x1251de=>{const _0x59b9df=_0xa3bf06,_0x2e2cbe=_0x1251de['data'],_0x46e6d0=_0x1251de['message'];tgBot['answerCallbackQuery'](_0x1251de['id'])['then'](async()=>{const _0x552492=_0x5bb6;if(_0x2e2cbe=='all'){if(settings['telegramEvents']=='orders')tgBot[_0x552492(0x1f2)](_0x46e6d0['chat']['id'],_0x552492(0x234))[_0x552492(0x261)](_0x53339b=>{telegramError(_0x53339b);});config[_0x552492(0x151)](_0x3468d8=>{const _0x5ef8d4=_0x552492;restartBot(_0x3468d8[_0x5ef8d4(0x19e)]);});}else{if(settings[_0x552492(0x27a)]==_0x552492(0x1ed))tgBot[_0x552492(0x1f2)](_0x46e6d0[_0x552492(0x1cb)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x2e2cbe)[_0x552492(0x261)](_0x3cfa0e=>{telegramError(_0x3cfa0e);});restartBot(_0x2e2cbe);}}),tgBot['removeListener'](_0x59b9df(0x17b));});}}),tgBot[_0x5bf913(0x277)](/\/on/,_0x1dccda=>{const _0x20f662=_0x5bf913;if(!validateTelegram(_0x1dccda))return;tgBot[_0x20f662(0x26d)](_0x20f662(0x17b));const _0x30ced9=getDisabledBots();if(_0x30ced9[_0x20f662(0x274)]==0x0)tgBot[_0x20f662(0x1f2)](_0x1dccda[_0x20f662(0x1cb)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x20f662(0x261)](_0x13cc33=>{telegramError(_0x13cc33);});else{if(_0x30ced9[_0x20f662(0x274)]>0x1)_0x30ced9[_0x20f662(0x1cc)]({'botID':_0x20f662(0x293)});let _0x1724a3=[],_0x189350=[];const _0x42409b=_0x30ced9['length']%0x4==0x0||_0x30ced9[_0x20f662(0x274)]%0x4==0x3||_0x30ced9['length']%0x3==0x1?0x4:0x3;let _0x2c3a60=0x0;_0x30ced9[_0x20f662(0x151)]((_0x469b4f,_0x2db1b7)=>{const _0x2bc75a=_0x20f662;if(_0x2db1b7%_0x42409b==0x0)_0x189350=[];_0x189350[_0x2bc75a(0x1cc)]({'text':_0x469b4f['botID']==_0x2bc75a(0x293)?_0x2bc75a(0x232):'Bot\x20'+_0x469b4f[_0x2bc75a(0x19e)],'callback_data':_0x469b4f[_0x2bc75a(0x19e)]}),_0x2db1b7%_0x42409b==0x0&&(_0x1724a3[_0x2c3a60]=_0x189350,_0x2c3a60++);}),tgBot['sendMessage'](_0x1dccda[_0x20f662(0x1cb)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x1724a3}})[_0x20f662(0x261)](_0x487550=>{telegramError(_0x487550);}),tgBot['on'](_0x20f662(0x17b),async _0x425d99=>{const _0x2720d9=_0x20f662,_0x5775c7=_0x425d99['data'],_0x1ef320=_0x425d99['message'];tgBot[_0x2720d9(0x1df)](_0x425d99['id'])['then'](async()=>{const _0x43fa79=_0x2720d9;if(_0x5775c7==_0x43fa79(0x293)){if(settings[_0x43fa79(0x27a)]==_0x43fa79(0x1ed))tgBot['sendMessage'](_0x1ef320[_0x43fa79(0x1cb)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x43fa79(0x261)](_0x5c1f4f=>{telegramError(_0x5c1f4f);});_0x30ced9[_0x43fa79(0x151)](_0x31dc91=>{const _0x7f0558=_0x43fa79;if(_0x31dc91['botID']!=_0x7f0558(0x293))toggleBot(_0x31dc91[_0x7f0558(0x19e)],toggleStatus(_0x31dc91[_0x7f0558(0x19e)]),_0x7f0558(0x1fb));});}else{if(settings[_0x43fa79(0x27a)]=='orders')tgBot[_0x43fa79(0x1f2)](_0x1ef320['chat']['id'],_0x43fa79(0x20b)+_0x5775c7)[_0x43fa79(0x261)](_0x4b274a=>{telegramError(_0x4b274a);});toggleBot(_0x5775c7,toggleStatus(_0x5775c7),_0x43fa79(0x1fb));}}),tgBot[_0x2720d9(0x26d)](_0x2720d9(0x17b));});}}),tgBot[_0x5bf913(0x277)](/\/off/,_0x5a7626=>{const _0x14fc68=_0x5bf913;if(!validateTelegram(_0x5a7626))return;tgBot['removeListener']('callback_query');const _0x197a1e=getEnabledBots();if(_0x197a1e[_0x14fc68(0x274)]==0x0)tgBot['sendMessage'](_0x5a7626['chat']['id'],_0x14fc68(0x217))[_0x14fc68(0x261)](_0x1c04c6=>{telegramError(_0x1c04c6);});else{if(_0x197a1e[_0x14fc68(0x274)]>0x1)_0x197a1e[_0x14fc68(0x1cc)]({'botID':'all'});let _0xe9f3f4=[],_0x10d020=[];const _0x248224=_0x197a1e['length']%0x4==0x0||_0x197a1e['length']%0x4==0x3||_0x197a1e[_0x14fc68(0x274)]%0x3==0x1?0x4:0x3;let _0x4ebef0=0x0;_0x197a1e[_0x14fc68(0x151)]((_0x7b591,_0x18ed20)=>{const _0x12b781=_0x14fc68;if(_0x18ed20%_0x248224==0x0)_0x10d020=[];_0x10d020[_0x12b781(0x1cc)]({'text':_0x7b591['botID']==_0x12b781(0x293)?'All\x20bots':_0x12b781(0x1d7)+_0x7b591[_0x12b781(0x19e)],'callback_data':_0x7b591[_0x12b781(0x19e)]}),_0x18ed20%_0x248224==0x0&&(_0xe9f3f4[_0x4ebef0]=_0x10d020,_0x4ebef0++);}),tgBot[_0x14fc68(0x1f2)](_0x5a7626[_0x14fc68(0x1cb)]['id'],_0x14fc68(0x152),{'reply_markup':{'inline_keyboard':_0xe9f3f4}})['catch'](_0x3c2dfd=>{telegramError(_0x3c2dfd);}),tgBot['on'](_0x14fc68(0x17b),async _0x4e492f=>{const _0x4ed96d=_0x14fc68,_0x3e3ffd=_0x4e492f[_0x4ed96d(0x20d)],_0x23c2a1=_0x4e492f[_0x4ed96d(0x294)];tgBot[_0x4ed96d(0x1df)](_0x4e492f['id'])[_0x4ed96d(0x243)](async()=>{const _0x29c105=_0x4ed96d;if(_0x3e3ffd==_0x29c105(0x293)){if(settings[_0x29c105(0x27a)]==_0x29c105(0x1ed))tgBot[_0x29c105(0x1f2)](_0x23c2a1[_0x29c105(0x1cb)]['id'],_0x29c105(0x16c))[_0x29c105(0x261)](_0x1a35ef=>{telegramError(_0x1a35ef);});_0x197a1e['forEach'](_0x546036=>{const _0x2a1248=_0x29c105;if(_0x546036[_0x2a1248(0x19e)]!=_0x2a1248(0x293))toggleBot(_0x546036[_0x2a1248(0x19e)],toggleStatus(_0x546036[_0x2a1248(0x19e)]),'stopped');});}else{if(settings[_0x29c105(0x27a)]==_0x29c105(0x1ed))tgBot[_0x29c105(0x1f2)](_0x23c2a1[_0x29c105(0x1cb)]['id'],_0x29c105(0x226)+_0x3e3ffd)[_0x29c105(0x261)](_0x2e21ef=>{telegramError(_0x2e21ef);});toggleBot(_0x3e3ffd,toggleStatus(_0x3e3ffd),'stopped');}}),tgBot['removeListener'](_0x4ed96d(0x17b));});}}),tgBot['onText'](/\/disable/,_0x2d3163=>{const _0x4af82b=_0x5bf913;if(!validateTelegram(_0x2d3163))return;tgBot['sendMessage'](_0x2d3163['chat']['id'],_0x4af82b(0x18b))[_0x4af82b(0x261)](_0x276f7a=>{telegramError(_0x276f7a);}),updateSetting(_0x4af82b(0x28e),![]);}),tgBot[_0x5bf913(0x277)](/\/help/,_0x3836b7=>{const _0x24a083=_0x5bf913;if(!validateTelegram(_0x3836b7))return;tgBot[_0x24a083(0x1f2)](_0x3836b7['chat']['id'],_0x2648f5)[_0x24a083(0x261)](_0x122771=>{telegramError(_0x122771);});}),tgBot['on'](_0x5bf913(0x26e),_0x12ac95=>{const _0x63542c=_0x5bf913;_0x12ac95['toString']()[_0x63542c(0x1fa)](_0x63542c(0x1f5))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x63542c(0x14e)](),tgBot=null,io['to']('botmanager')[_0x63542c(0x1ae)](_0x63542c(0x225),_0x63542c(0x1ac)));}),process['once'](_0x5bf913(0x203),()=>{const _0x4d02b9=_0x5bf913;if(tgBot)tgBot[_0x4d02b9(0x14e)]();process['exit'](0x1);}),process['once'](_0x5bf913(0x183),()=>{const _0x59bd9c=_0x5bf913;if(tgBot)tgBot[_0x59bd9c(0x14e)]();process['exit'](0x1);});}}function disableTelegram(){const _0x49fcb3=_0x14b53b;tgBot&&(tgBot[_0x49fcb3(0x14e)](),tgBot=null);}function sendTelegram(_0x346678,_0x290da0){const _0x43255b=_0x14b53b;if(settings['telegramEnabled']){if(settings[_0x43255b(0x27a)]==_0x43255b(0x293)||(_0x290da0[_0x43255b(0x204)]==_0x43255b(0x25b)||_0x290da0['type']==_0x43255b(0x1b8))&&settings[_0x43255b(0x27a)]==_0x43255b(0x1a1)||_0x290da0[_0x43255b(0x204)]==_0x43255b(0x239)&&settings['telegramEvents']==_0x43255b(0x1ed)){if(tgBot&&settings['telegramChatId']){if(_0x290da0['showname'])tgBot['sendMessage'](settings['telegramChatId'],_0x290da0[_0x43255b(0x24f)]+_0x43255b(0x1f8)+_0x290da0[_0x43255b(0x1dd)])[_0x43255b(0x261)](_0x5bb1cb=>{telegramError(_0x5bb1cb);});else tgBot[_0x43255b(0x1f2)](settings[_0x43255b(0x158)],_0x43255b(0x1d7)+_0x346678+_0x43255b(0x1f8)+_0x290da0[_0x43255b(0x1dd)])[_0x43255b(0x261)](_0x58969d=>{telegramError(_0x58969d);});}}}}function getDeviceWithIp(_0x321776){const _0x1bc79c=_0x14b53b;return devices[_0x1bc79c(0x180)](_0x4b35aa=>_0x4b35aa['ip']===_0x321776);}function temporaryAccess2FA(_0x1fcc50,_0x5363ec){const _0xa0453=_0x14b53b;let _0x223209=new Date(),_0x486bf0=![];if(lastIpApproval){if(_0x223209-lastIpApproval<0x1388)_0x486bf0=!![];}lastIpApproval=new Date();if(_0x486bf0)return;tgBot&&settings[_0xa0453(0x158)]&&(tgBot[_0xa0453(0x26d)](_0xa0453(0x17b)),tgBot[_0xa0453(0x1f2)](settings[_0xa0453(0x158)],_0xa0453(0x263)+normalizeIP(_0x5363ec)[_0xa0453(0x271)]+'</b>\x20?',{'parse_mode':_0xa0453(0x23c),'reply_markup':{'inline_keyboard':[[{'text':_0xa0453(0x168),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0xa0453(0x22e),'callback_data':'30'},{'text':_0xa0453(0x1a3),'callback_data':_0xa0453(0x1a3)}]]}})[_0xa0453(0x261)](_0x4f9d2e=>{telegramError(_0x4f9d2e);}),tgBot['on']('callback_query',async _0x265ef5=>{const _0x14c379=_0xa0453,_0x899af7=_0x265ef5[_0x14c379(0x20d)],_0x3c684d=_0x265ef5[_0x14c379(0x294)];tgBot[_0x14c379(0x1df)](_0x265ef5['id'])[_0x14c379(0x243)](async()=>{const _0x1694e7=_0x14c379;devices[_0x1fcc50]['telegramIpApproval']={'clientip':_0x5363ec,'timestamp':new Date()[_0x1694e7(0x25e)](),'expiry':_0x899af7},_0x899af7!=_0x1694e7(0x1a3)?(await tgBot[_0x1694e7(0x1f2)](_0x3c684d[_0x1694e7(0x1cb)]['id'],'Access\x20enabled\x20for\x20'+_0x899af7+_0x1694e7(0x16a),{'parse_mode':_0x1694e7(0x23c)})[_0x1694e7(0x261)](_0x1ccdf9=>{telegramError(_0x1ccdf9);}),io['to'](_0x1fcc50)[_0x1694e7(0x1ae)](_0x1694e7(0x22c),{'access':{'allow':![],'reason':_0x1694e7(0x230),'token':null}})):(await tgBot[_0x1694e7(0x1f2)](_0x3c684d[_0x1694e7(0x1cb)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x3360cf=>{telegramError(_0x3360cf);}),io['to'](_0x1fcc50)['emit'](_0x1694e7(0x22c),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x14c379(0x26d)]('callback_query');}));}function loginAccess2FA(_0x1f0089,_0x2a4f0e){const _0x39e498=_0x14b53b;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x39e498(0x17b)),tgBot['sendMessage'](settings[_0x39e498(0x158)],_0x39e498(0x17f)+normalizeIP(_0x2a4f0e)[_0x39e498(0x271)]+_0x39e498(0x1e1),{'parse_mode':_0x39e498(0x23c),'reply_markup':{'inline_keyboard':[[{'text':_0x39e498(0x1b5),'callback_data':loginExpiry},{'text':_0x39e498(0x1a3),'callback_data':_0x39e498(0x1a3)}]]}})[_0x39e498(0x261)](_0x1e2ee1=>{telegramError(_0x1e2ee1);}),tgBot['on'](_0x39e498(0x17b),async _0x1b9eb4=>{const _0x50a467=_0x39e498,_0x4badab=_0x1b9eb4[_0x50a467(0x20d)],_0x4e72e9=_0x1b9eb4[_0x50a467(0x294)];tgBot[_0x50a467(0x1df)](_0x1b9eb4['id'])[_0x50a467(0x243)](async()=>{const _0x4322bf=_0x50a467;devices[_0x1f0089][_0x4322bf(0x1fc)]={'clientip':_0x2a4f0e,'timestamp':new Date()[_0x4322bf(0x25e)](),'expiry':_0x4badab},_0x4badab!=_0x4322bf(0x1a3)?(await tgBot[_0x4322bf(0x1f2)](_0x4e72e9[_0x4322bf(0x1cb)]['id'],'Login\x20accepted',{'parse_mode':_0x4322bf(0x23c)})['catch'](_0x3dd602=>{telegramError(_0x3dd602);}),io['to'](_0x1f0089)[_0x4322bf(0x1ae)]('status',{'access':{'allow':![],'reason':_0x4322bf(0x230),'token':null}})):(await tgBot[_0x4322bf(0x1f2)](_0x4e72e9[_0x4322bf(0x1cb)]['id'],'Login\x20rejected')['catch'](_0x3c01fc=>{telegramError(_0x3c01fc);}),io['to'](_0x1f0089)[_0x4322bf(0x1ae)](_0x4322bf(0x22c),{'access':{'allow':![],'reason':_0x4322bf(0x1a4),'token':null}}));}),tgBot['removeListener'](_0x50a467(0x17b));}));}function getConfiguration(){const _0x27e959=_0x14b53b;return dbConfig[_0x27e959(0x237)](_0x27e959(0x191))[_0x27e959(0x164)]('botID')[_0x27e959(0x171)]()||[];}function getEnabledBots(){const _0xc7eaac=_0x14b53b;return dbConfig[_0xc7eaac(0x237)]('bots')['sortBy']('botID')[_0xc7eaac(0x22a)]({'status':_0xc7eaac(0x1e6)})['value']()||[];}function getDisabledBots(){const _0xb823be=_0x14b53b;return dbConfig[_0xb823be(0x237)](_0xb823be(0x191))[_0xb823be(0x164)]('botID')[_0xb823be(0x22a)]({'status':_0xb823be(0x27c)})[_0xb823be(0x171)]()||[];}function getSettings(){const _0x47072c=_0x14b53b;return dbSettings['get'](_0x47072c(0x178))[_0x47072c(0x171)]()||{'timeshift':0x0};}function getSecure(){const _0x58662f=_0x14b53b;return dbSecure[_0x58662f(0x237)]('secure')['value']()||{};}function getBlacklist(){const _0x4a2731=_0x14b53b;return dbSecure[_0x4a2731(0x237)](_0x4a2731(0x24a))['value']()||[];}function broadcastToBots(_0x5bde85,_0x1e5532){const _0x52fe83=_0x14b53b;config[_0x52fe83(0x151)](_0x30f8fa=>{const _0x23821a=_0x52fe83;if(_0x30f8fa['status']==_0x23821a(0x1e6)&&_0x30f8fa[_0x23821a(0x208)]=='running'){if(pid[_0x30f8fa[_0x23821a(0x19e)]])pid[_0x30f8fa[_0x23821a(0x19e)]]['send']({[_0x5bde85]:_0x1e5532});}});}function storeSettings(_0x4af39c,_0x47e6f2=![]){const _0x4a3c66=_0x14b53b;_0x4af39c={...settings,..._0x4af39c};if(_0x47e6f2&&_0x4af39c['bbPassword']!=_0x4a3c66(0x20f)&&_0x4af39c[_0x4a3c66(0x280)]!=''){const _0x978b6b=crypt['decrypt'](secure[_0x4a3c66(0x15b)],_0x4af39c[_0x4a3c66(0x280)])[_0x4a3c66(0x294)][_0x4a3c66(0x219)]('@')[0x0],_0xe7acc2=bcrypt[_0x4a3c66(0x24e)](_0x978b6b,saltRounds);_0x4af39c={..._0x4af39c,'bbPassword':_0xe7acc2};}if(_0x47e6f2&&_0x4af39c['telegramToken']!=_0x4a3c66(0x20f)&&_0x4af39c['telegramToken']!=''){const _0x19a41e=crypt[_0x4a3c66(0x1cf)](secure[_0x4a3c66(0x15b)],_0x4af39c[_0x4a3c66(0x26b)])[_0x4a3c66(0x294)][_0x4a3c66(0x219)]('@')[0x0];_0x4af39c={..._0x4af39c,'telegramToken':_0x19a41e};}const _0x2b8267=_0x4af39c[_0x4a3c66(0x26b)]!=_0x4a3c66(0x20f)&&_0x4af39c[_0x4a3c66(0x26b)]!=settings[_0x4a3c66(0x26b)]||_0x4af39c['telegramUsername']!=settings[_0x4a3c66(0x27f)],_0x1a237e=_0x4af39c[_0x4a3c66(0x26b)]==''||_0x4af39c[_0x4a3c66(0x27f)]=='';if(_0x2b8267)_0x4af39c['telegramEvents']=_0x4a3c66(0x293);for(const [_0x2cb908,_0x52c50d]of Object['entries'](_0x4af39c)){if(_0x2cb908=='telegramToken'&&_0x52c50d==_0x4a3c66(0x20f)){_0x4af39c['telegramToken']=settings[_0x4a3c66(0x26b)];continue;};if(_0x2cb908=='bbPassword'&&_0x52c50d=='************'){_0x4af39c['bbPassword']=settings[_0x4a3c66(0x280)];continue;};dbSettings['set'](_0x4a3c66(0x23d)+_0x2cb908,_0x52c50d)[_0x4a3c66(0x195)]();}settings=_0x4af39c,io['to'](_0x4a3c66(0x18f))[_0x4a3c66(0x1ae)](_0x4a3c66(0x178),cleanSettings()),broadcastToBots(_0x4a3c66(0x1eb),settings['timeshift']);if(_0x2b8267&&!_0x1a237e)initTelegram();if(_0x2b8267&&_0x1a237e)disableTelegram();getAllClients()[_0x4a3c66(0x151)](_0x19f98b=>{const _0x3ff53a=_0x4a3c66;getSocket(_0x19f98b['id'])[_0x3ff53a(0x1ae)]('status',{'access':{'allow':![],'reason':_0x3ff53a(0x230),'token':null}});});}function updateSetting(_0xbb0226,_0x2310ee){const _0x1bf5e6=_0x14b53b;dbSettings[_0x1bf5e6(0x229)](_0x1bf5e6(0x23d)+_0xbb0226,_0x2310ee)[_0x1bf5e6(0x195)](),settings=getSettings(),io['to'](_0x1bf5e6(0x18f))[_0x1bf5e6(0x1ae)]('settings',cleanSettings());}function storeSecure(_0x2d9e5c){const _0xad92cb=_0x14b53b;dbSecure[_0xad92cb(0x237)]('secure')['push'](_0x2d9e5c)[_0xad92cb(0x195)](),secure=_0x2d9e5c;}function addBlacklist(_0x27a6b5){const _0x4c70ba=_0x14b53b;cleanBlacklist();let _0x1895a5;devices[_0x27a6b5]['telegramIpApproval']?_0x1895a5=Math[_0x4c70ba(0x227)](devices[_0x27a6b5][_0x4c70ba(0x190)]['expiry'],loginExpiry):_0x1895a5=loginExpiry,dbSecure[_0x4c70ba(0x237)]('blacklist')[_0x4c70ba(0x1cc)]({'expiry':new Date()[_0x4c70ba(0x25e)]()+_0x1895a5*0x3c*0x3e8,'token':devices[_0x27a6b5][_0x4c70ba(0x212)]['token']})[_0x4c70ba(0x195)](),blacklist=dbSecure[_0x4c70ba(0x237)](_0x4c70ba(0x24a))[_0x4c70ba(0x171)]();}function cleanBlacklist(){const _0x11fc8e=_0x14b53b;let _0x5d3e60=dbSecure[_0x11fc8e(0x237)](_0x11fc8e(0x24a))['cloneDeep']()[_0x11fc8e(0x171)](),_0x2c3390=new Date()['getTime']();_0x5d3e60['forEach'](_0x216e98=>{const _0x2fcb14=_0x11fc8e;_0x216e98[_0x2fcb14(0x176)]<_0x2c3390&&dbSecure[_0x2fcb14(0x237)]('blacklist')[_0x2fcb14(0x214)]({'expiry':_0x216e98[_0x2fcb14(0x176)]})[_0x2fcb14(0x195)]();});}function initStates(){let _0x2a66d5=getConfiguration();_0x2a66d5['forEach'](_0x1da2f2=>{const _0x126695=_0x5bb6;_0x1da2f2[_0x126695(0x208)]=_0x126695(0x1fb);}),storeConfiguration(_0x2a66d5);}function onKeys(){const _0xa174e4=new RSA();return new Promise(_0xe1c74e=>{const _0x440e09=_0x5bb6;_0xa174e4[_0x440e09(0x16d)]()['then'](_0x5df761=>{_0xe1c74e(_0x5df761);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4fab2e=_0x14b53b;let _0x6bb130=getConfiguration(),_0x22a2cf=![];_0x6bb130[_0x4fab2e(0x151)](_0xf3d6ce=>{const _0x5d54b0=_0x4fab2e;if(_0xf3d6ce[_0x5d54b0(0x22c)]=='running')_0xf3d6ce[_0x5d54b0(0x22c)]=_0x5d54b0(0x1e6),_0x22a2cf=!![];else _0xf3d6ce[_0x5d54b0(0x22c)]==_0x5d54b0(0x1fb)&&(_0xf3d6ce[_0x5d54b0(0x22c)]=_0x5d54b0(0x27c),_0x22a2cf=!![]);});if(_0x22a2cf)storeConfiguration(_0x6bb130);let _0x1ebdc6=getSecure();if(!_0x1ebdc6[_0x4fab2e(0x224)](_0x4fab2e(0x1e3))){let _0x2d8594=await generateKeys();_0x1ebdc6[_0x4fab2e(0x159)]=_0x2d8594[_0x4fab2e(0x159)],_0x1ebdc6[_0x4fab2e(0x15b)]=_0x2d8594[_0x4fab2e(0x15b)],_0x1ebdc6[_0x4fab2e(0x1e3)]=crypto['randomBytes'](0x20)[_0x4fab2e(0x1e9)](_0x4fab2e(0x282));;storeSecure(_0x1ebdc6);}let _0x32fea5=getSettings();_0x22a2cf=![];!_0x32fea5[_0x4fab2e(0x224)](_0x4fab2e(0x177))&&(_0x32fea5['loginRequired']=![],_0x32fea5['bbUsername']='',_0x32fea5[_0x4fab2e(0x280)]='',_0x32fea5[_0x4fab2e(0x20c)]=![],_0x22a2cf=!![]);!_0x32fea5[_0x4fab2e(0x224)](_0x4fab2e(0x199))&&(_0x32fea5['whitelistEnabled']=![],_0x32fea5[_0x4fab2e(0x1a0)]=[],_0x32fea5['temporaryAccessAllowed']=![],_0x22a2cf=!![]);if(!_0x32fea5['hasOwnProperty'](_0x4fab2e(0x28e))){if(_0x32fea5[_0x4fab2e(0x158)])_0x32fea5[_0x4fab2e(0x28e)]=!![];else _0x32fea5['telegramEnabled']=![];_0x22a2cf=!![];}if(_0x22a2cf)storeSettings(_0x32fea5);}function storeConfiguration(_0x1309a9){const _0x4fdd2b=_0x14b53b;dbConfig[_0x4fdd2b(0x237)](_0x4fdd2b(0x191))[_0x4fdd2b(0x214)]()[_0x4fdd2b(0x195)](),dbConfig[_0x4fdd2b(0x237)](_0x4fdd2b(0x191))['push'](..._0x1309a9)['write'](),config=_0x1309a9;}function resetPassword(){const _0x1b4878=_0x14b53b;tgBot&&settings[_0x1b4878(0x158)]&&(tgBot[_0x1b4878(0x26d)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x1b4878(0x1c6),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1b4878(0x19a),'callback_data':_0x1b4878(0x19a)},{'text':'no','callback_data':'no'}]]}})[_0x1b4878(0x261)](_0x38bb29=>{telegramError(_0x38bb29);}),tgBot['on'](_0x1b4878(0x17b),async _0x14fb0e=>{const _0x221653=_0x1b4878,_0x1f3ff7=_0x14fb0e[_0x221653(0x20d)],_0x3ac648=_0x14fb0e['message'];tgBot['answerCallbackQuery'](_0x14fb0e['id'])[_0x221653(0x243)](async()=>{const _0x293a47=_0x221653;if(_0x1f3ff7!='no'){const _0x205378=0xf,_0x4138d5=_0x293a47(0x17e),_0x4e9aa0=Array['from'](crypto[_0x293a47(0x186)](new Uint32Array(_0x205378)))['map'](_0x180776=>_0x4138d5[_0x180776%_0x4138d5[_0x293a47(0x274)]])[_0x293a47(0x198)](''),_0x3c16a4=bcrypt['hashSync'](_0x4e9aa0,saltRounds);storeSettings({'bbPassword':_0x3c16a4}),await tgBot[_0x293a47(0x1f2)](_0x3ac648['chat']['id'],_0x293a47(0x1b3)+_0x4e9aa0,{'parse_mode':_0x293a47(0x23c)})[_0x293a47(0x261)](_0x27cf14=>{telegramError(_0x27cf14);});}else await tgBot[_0x293a47(0x1f2)](_0x3ac648[_0x293a47(0x1cb)]['id'],'Password\x20reset\x20rejected')['catch'](_0x5bf06d=>{telegramError(_0x5bf06d);});}),tgBot[_0x221653(0x26d)](_0x221653(0x17b));}));}function logging(_0x54271f){const _0x20f9ad=_0x14b53b;console[_0x20f9ad(0x257)](getTimeStamp()+_0x20f9ad(0x1e2)+_0x54271f);if(tgBot&&settings[_0x20f9ad(0x158)]&&settings[_0x20f9ad(0x27a)]!='orders')tgBot[_0x20f9ad(0x1f2)](settings['telegramChatId'],_0x20f9ad(0x246)+_0x54271f)[_0x20f9ad(0x261)](_0x187724=>{telegramError(_0x187724);});}function getServerTime(){const _0x419d83=_0x14b53b,_0x32dc51=new Date();return _0x32dc51['getFullYear']()+'/'+(_0x32dc51[_0x419d83(0x15d)]()+0x1)[_0x419d83(0x1e9)]()[_0x419d83(0x1d9)](0x2,'0')+'/'+_0x32dc51['getDate']()[_0x419d83(0x1e9)]()[_0x419d83(0x1d9)](0x2,'0')+'\x20'+_0x32dc51[_0x419d83(0x201)]()[_0x419d83(0x1e9)]()[_0x419d83(0x1d9)](0x2,'0')+':'+_0x32dc51['getMinutes']()[_0x419d83(0x1e9)]()['padStart'](0x2,'0')+':'+_0x32dc51[_0x419d83(0x197)]()[_0x419d83(0x1e9)]()[_0x419d83(0x1d9)](0x2,'0');}function getTimeStamp(){const _0x2782e3=_0x14b53b,_0x3c591e=shiftedTime();return _0x3c591e[_0x2782e3(0x1ba)]()+'/'+(_0x3c591e[_0x2782e3(0x15d)]()+0x1)[_0x2782e3(0x1e9)]()['padStart'](0x2,'0')+'/'+_0x3c591e[_0x2782e3(0x175)]()[_0x2782e3(0x1e9)]()[_0x2782e3(0x1d9)](0x2,'0')+'\x20'+_0x3c591e[_0x2782e3(0x201)]()[_0x2782e3(0x1e9)]()[_0x2782e3(0x1d9)](0x2,'0')+':'+_0x3c591e[_0x2782e3(0x1bc)]()[_0x2782e3(0x1e9)]()[_0x2782e3(0x1d9)](0x2,'0')+':'+_0x3c591e[_0x2782e3(0x197)]()[_0x2782e3(0x1e9)]()[_0x2782e3(0x1d9)](0x2,'0');}function shiftedTime(){const _0x403ec7=_0x14b53b,_0x32d0c2=new Date();let _0x28037b=_0x32d0c2;if(settings[_0x403ec7(0x1eb)]&&settings[_0x403ec7(0x1eb)]!==0x0)_0x28037b=fns['add'](_0x32d0c2,{'hours':settings[_0x403ec7(0x1eb)]});return _0x28037b;}function startScheduler(){let _0xd9ecac=new Date()['getUTCHours']();_0xd9ecac==0x1&&backupConfigFiles();_0xd9ecac==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x22cad0=_0x14b53b;fs[_0x22cad0(0x173)](configpath,{'withFileTypes':!![]})[_0x22cad0(0x151)](_0x33d80c=>{const _0x4bd0ff=_0x22cad0;if(!_0x33d80c[_0x4bd0ff(0x283)]())fs[_0x4bd0ff(0x259)](configpath+_0x33d80c['name'],configbackuppath+_0x33d80c[_0x4bd0ff(0x15f)]);});}function triggerAnalytics(){const _0x56e05f=_0x14b53b;analytics[_0x56e05f(0x1fe)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x5acf71,_0x30d3c0){const _0x4c7178=_0x14b53b;if(_0x5acf71[_0x4c7178(0x24d)]==settings[_0x4c7178(0x236)]&&bcrypt[_0x4c7178(0x1de)](_0x5acf71[_0x4c7178(0x25a)],settings[_0x4c7178(0x280)])){if(settings[_0x4c7178(0x20c)])return{'allow':![],'reason':_0x4c7178(0x161),'token':null};else{const _0x587574=generateLoginToken(_0x30d3c0);return{'allow':!![],'reason':_0x4c7178(0x188),'token':_0x587574};}}else return{'allow':![],'reason':_0x4c7178(0x206),'token':null};}function refreshToken(_0x32c8b8){const _0x1def7d=_0x14b53b,_0x529ec1=generateLoginToken(_0x32c8b8);return{'allow':!![],'reason':_0x1def7d(0x188),'token':_0x529ec1};}function validateAccess(_0x2966f8,_0x45e949){const _0x3c939b=_0x14b53b;let _0x32af89=devices[_0x45e949]['ip'],_0x3e6508;const _0x4f24b6=_0xb2d095=>{const _0x1e98ae=_0x5bb6;if(settings[_0x1e98ae(0x177)]){if(settings[_0x1e98ae(0x20c)]){if(telegram2FaApproved(_0x45e949)){const _0xb1fdd7=generateLoginToken(_0x45e949);return{'allow':!![],'reason':_0x1e98ae(0x19d),'token':_0xb1fdd7};}else return{'allow':![],'reason':_0x1e98ae(0x1ec),'token':null};}else return _0x3e6508=validToken(_0xb2d095,_0x45e949),_0x3e6508[_0x1e98ae(0x224)](_0x1e98ae(0x1b8))?{'allow':!![],'reason':_0x1e98ae(0x262),'token':_0xb2d095}:{'allow':![],'reason':_0x1e98ae(0x1ec),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x3c939b(0x199)]){let _0x5d69ae=[...settings[_0x3c939b(0x1a0)],_0x3c939b(0x221),_0x3c939b(0x19c),_0x3c939b(0x21c)];if(_0x5d69ae[_0x3c939b(0x1fa)](_0x32af89))return _0x4f24b6(_0x2966f8);else{_0x3e6508=validToken(_0x2966f8,_0x45e949);if(_0x3e6508[_0x3c939b(0x224)](_0x3c939b(0x1b8)))return _0x4f24b6(_0x2966f8);else{if(telegramIpApproved(_0x45e949)){const _0xd5c22d=generateToken(_0x45e949);return _0x3e6508=_0x4f24b6(_0x2966f8),_0x3e6508[_0x3c939b(0x1e4)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xd5c22d}:_0x3e6508;}else return settings[_0x3c939b(0x1a6)]?{'allow':![],'reason':_0x3c939b(0x1b6),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4f24b6(_0x2966f8);}function timelyDecrypt(_0x47f0f8,_0x4fbde8=!![]){const _0x2eb931=_0x14b53b;if(_0x47f0f8)try{const _0x1dc691=crypt[_0x2eb931(0x1cf)](secure[_0x2eb931(0x15b)],_0x47f0f8)[_0x2eb931(0x294)],_0x5d2764=_0x1dc691[_0x2eb931(0x219)]('@')[0x0],_0x4666e0=_0x1dc691[_0x2eb931(0x219)]('@')[0x1],_0x577a84=new Date()[_0x2eb931(0x25e)]();if(_0x4fbde8){if(_0x577a84-_0x4666e0<maxSecretAge*0x3e8)return _0x5d2764;else return![];}else return _0x5d2764;}catch(_0x5e6a24){return![];}else return![];}const validToken=(_0x1ad947,_0x4281a9)=>{const _0x1e1ef1=_0x14b53b,_0x531f3b=devices[_0x4281a9]['ip'];if(!_0x1ad947)return{'error':_0x1e1ef1(0x1e5)};for(let _0x1bbca8 of blacklist){if(_0x1bbca8[_0x1e1ef1(0x289)]==_0x1ad947)return{'error':_0x1e1ef1(0x268)};}let _0x423426;try{_0x423426=jwt[_0x1e1ef1(0x167)](_0x1ad947,secure[_0x1e1ef1(0x1e3)]+_0x4281a9);}catch{return{'error':_0x1e1ef1(0x288)};}if(!_0x423426[_0x1e1ef1(0x224)]('clientip')&&!_0x423426[_0x1e1ef1(0x224)](_0x1e1ef1(0x24d))||!_0x423426['hasOwnProperty'](_0x1e1ef1(0x174)))return{'error':_0x1e1ef1(0x1c8)};if(!_0x423426[_0x1e1ef1(0x224)](_0x1e1ef1(0x24d))&&_0x423426[_0x1e1ef1(0x224)](_0x1e1ef1(0x22f))){const {clientip:_0x7a8a9d}=_0x423426;return _0x531f3b==_0x7a8a9d?{'success':_0x1e1ef1(0x1f0)}:{'error':_0x1e1ef1(0x205)};}else{if(_0x423426[_0x1e1ef1(0x224)]('username')&&_0x423426['hasOwnProperty'](_0x1e1ef1(0x22f))){const {username:_0x5b35df,clientip:_0x3e4e93}=_0x423426;return settings[_0x1e1ef1(0x236)]==_0x5b35df&&_0x531f3b==_0x3e4e93?{'success':_0x1e1ef1(0x1f0)}:{'error':_0x1e1ef1(0x165)};}}},generateLoginToken=_0x1d7587=>{const _0x53fece=_0x14b53b;if(_0x1d7587){const _0x30e5f3=devices[_0x1d7587]['ip'];return jwt[_0x53fece(0x267)]({'username':settings['bbUsername'],'clientip':_0x30e5f3},secure['secret']+_0x1d7587,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x181b5d=>{const _0x244415=_0x14b53b;if(_0x181b5d){const _0x448689=devices[_0x181b5d]['ip'];return jwt[_0x244415(0x267)]({'clientip':_0x448689},secure[_0x244415(0x1e3)]+_0x181b5d,{'expiresIn':devices[_0x181b5d][_0x244415(0x190)][_0x244415(0x176)]*0x3c});}else return![];},telegramIpApproved=_0x1f29e6=>{const _0x3f7a05=_0x14b53b;let _0x1e25c0=![];return devices[_0x1f29e6][_0x3f7a05(0x190)]&&devices[_0x1f29e6][_0x3f7a05(0x190)][_0x3f7a05(0x176)]!=_0x3f7a05(0x1a3)&&(_0x1e25c0=devices[_0x1f29e6][_0x3f7a05(0x190)]['clientip']==devices[_0x1f29e6]['ip']&&new Date()[_0x3f7a05(0x25e)]()-devices[_0x1f29e6]['telegramIpApproval']['timestamp']<devices[_0x1f29e6][_0x3f7a05(0x190)][_0x3f7a05(0x176)]*0x3c*0x3e8),_0x1e25c0;},telegram2FaApproved=_0x3419d4=>{const _0x4fa405=_0x14b53b;let _0x27636b=![];return devices[_0x3419d4]['telegram2FaApproval']&&devices[_0x3419d4][_0x4fa405(0x1fc)][_0x4fa405(0x176)]!='reject'&&(_0x27636b=devices[_0x3419d4]['telegram2FaApproval']['clientip']==devices[_0x3419d4]['ip']&&new Date()[_0x4fa405(0x25e)]()-devices[_0x3419d4][_0x4fa405(0x1fc)][_0x4fa405(0x14d)]<devices[_0x3419d4]['telegram2FaApproval'][_0x4fa405(0x176)]*0x3c*0x3e8),_0x27636b;},normalizeIP=_0x12026e=>{const _0x4bec5d=_0x14b53b;let _0x28f658=null,_0x2f8a0a=null;if(ipaddr[_0x4bec5d(0x285)](_0x12026e)){const _0x387df0=ipaddr[_0x4bec5d(0x211)](_0x12026e);_0x387df0[_0x4bec5d(0x1a5)]()==='ipv6'?(_0x387df0['isIPv4MappedAddress']()&&(_0x28f658=_0x387df0[_0x4bec5d(0x235)]()[_0x4bec5d(0x1e9)]()),_0x2f8a0a=_0x387df0[_0x4bec5d(0x1e9)]()):(_0x28f658=_0x387df0[_0x4bec5d(0x1e9)](),_0x2f8a0a=_0x387df0[_0x4bec5d(0x241)]()['toString']());}return{'show':_0x28f658?_0x28f658:_0x2f8a0a,'store':_0x2f8a0a};};