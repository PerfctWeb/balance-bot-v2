const _0x1dce83=_0x3d47;(function(_0x436b68,_0xefdedb){const _0x1cfd74=_0x3d47,_0xcb16f2=_0x436b68();while(!![]){try{const _0x47c9a2=parseInt(_0x1cfd74(0x1a7))/0x1*(parseInt(_0x1cfd74(0x177))/0x2)+-parseInt(_0x1cfd74(0x2a7))/0x3*(-parseInt(_0x1cfd74(0x2a9))/0x4)+-parseInt(_0x1cfd74(0x1d9))/0x5*(-parseInt(_0x1cfd74(0x257))/0x6)+parseInt(_0x1cfd74(0x270))/0x7*(parseInt(_0x1cfd74(0x25c))/0x8)+-parseInt(_0x1cfd74(0x1ac))/0x9+parseInt(_0x1cfd74(0x1d1))/0xa*(parseInt(_0x1cfd74(0x243))/0xb)+-parseInt(_0x1cfd74(0x27b))/0xc;if(_0x47c9a2===_0xefdedb)break;else _0xcb16f2['push'](_0xcb16f2['shift']());}catch(_0x415959){_0xcb16f2['push'](_0xcb16f2['shift']());}}}(_0x3449,0x270a5));const _0x2bb145=function(){let _0x24bcee=!![];return function(_0x368bdd,_0x46077b){const _0x701e66=_0x24bcee?function(){const _0x393da9=_0x3d47;if(_0x46077b){const _0x44c516=_0x46077b[_0x393da9(0x1ee)](_0x368bdd,arguments);return _0x46077b=null,_0x44c516;}}:function(){};return _0x24bcee=![],_0x701e66;};}(),_0x55cc93=_0x2bb145(this,function(){const _0x345a6e=_0x3d47;return _0x55cc93[_0x345a6e(0x191)]()[_0x345a6e(0x233)](_0x345a6e(0x179))[_0x345a6e(0x191)]()[_0x345a6e(0x1c9)](_0x55cc93)[_0x345a6e(0x233)]('(((.+)+)+)+$');});_0x55cc93();'use strict';process[_0x1dce83(0x249)][_0x1dce83(0x1a0)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x1dce83(0x274)),fs=require('fs'),fns=require(_0x1dce83(0x1ba)),low=require(_0x1dce83(0x173)),path=require('path'),crypto=require(_0x1dce83(0x242)),Crypt=require(_0x1dce83(0x258))[_0x1dce83(0x1d6)],RSA=require('hybrid-crypto-js')[_0x1dce83(0x17b)],bcrypt=require(_0x1dce83(0x178)),jwt=require('jsonwebtoken'),analyticsLib=require('analytics')[_0x1dce83(0x20c)],googleAnalytics=require(_0x1dce83(0x1ec))[_0x1dce83(0x20c)],ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x1dce83(0x280)]['slice'](0x2))[_0x1dce83(0x280)],PORT=argv[_0x1dce83(0x1a4)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x1dce83(0x181)](PORT))return console[_0x1dce83(0x25b)](_0x1dce83(0x265)+PORT+_0x1dce83(0x1f8)),process[_0x1dce83(0x251)](0x1);const HOST=argv[_0x1dce83(0x1aa)]||null,userID=argv[_0x1dce83(0x2b2)]||'';let bbpath=_0x1dce83(0x287),bbpath2='';const botfile=_0x1dce83(0x1ca),configfile=_0x1dce83(0x28a),settingsfile=_0x1dce83(0x221),securefile=_0x1dce83(0x266);!fs[_0x1dce83(0x23e)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1dce83(0x279)),configpath=userID?bbpath+_0x1dce83(0x1eb)+userID+'/':bbpath+_0x1dce83(0x1eb),configbackuppath=configpath+'backup/';!fs[_0x1dce83(0x23e)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1dce83(0x23e)](configbackuppath)&&fs[_0x1dce83(0x1cc)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1dce83(0x235)]({'bots':[]})[_0x1dce83(0x2a6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x1dce83(0x2a6)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1dce83(0x235)]({'secure':{},'blacklist':[]})[_0x1dce83(0x2a6)]();let crypt=new Crypt({'md':_0x1dce83(0x291),'rsaStandard':_0x1dce83(0x19a)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1dce83(0x1fe))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x1dce83(0x214)](app);app[_0x1dce83(0x299)](express[_0x1dce83(0x27e)](path[_0x1dce83(0x250)](__dirname,bbpath2,_0x1dce83(0x189)))),app[_0x1dce83(0x299)](express[_0x1dce83(0x27e)](path[_0x1dce83(0x250)](__dirname,bbpath2,_0x1dce83(0x1c1)))),app['get']('/',function(_0x1a409b,_0x5cd3d3){const _0x2ad972=_0x1dce83;_0x5cd3d3['sendFile'](path[_0x2ad972(0x250)](__dirname,bbpath2,_0x2ad972(0x189),_0x2ad972(0x1f6)));}),app[_0x1dce83(0x1fb)]('/:bot',function(_0x245483,_0x179f10){const _0xa1fe5a=_0x1dce83;_0x179f10[_0xa1fe5a(0x208)](path[_0xa1fe5a(0x250)](__dirname,bbpath2,_0xa1fe5a(0x1c1),_0xa1fe5a(0x1f6)));}),app[_0x1dce83(0x1fb)](_0x1dce83(0x18b),(_0x2234f4,_0x4d1e82)=>{const _0x41b267=_0x1dce83;_0x4d1e82[_0x41b267(0x208)](path[_0x41b267(0x250)](__dirname,bbpath2,'build',_0x41b267(0x1f6)));}),app[_0x1dce83(0x1fb)](_0x1dce83(0x180),(_0x4c9f31,_0x3cd7cf)=>{const _0x2d794e=_0x1dce83;_0x3cd7cf[_0x2d794e(0x208)](path['join'](__dirname,bbpath2,_0x2d794e(0x1c1),_0x2d794e(0x1f6)));}),app[_0x1dce83(0x1fb)](_0x1dce83(0x23b),(_0x1598f8,_0x27ec41)=>{const _0x523603=_0x1dce83;_0x27ec41[_0x523603(0x208)](path[_0x523603(0x250)](__dirname,bbpath2,_0x523603(0x1c1),_0x523603(0x1f6)));}),app[_0x1dce83(0x1fb)](_0x1dce83(0x172),(_0x2b0b47,_0xa48c8e)=>{const _0x1073c5=_0x1dce83;_0xa48c8e[_0x1073c5(0x208)](path[_0x1073c5(0x250)](__dirname,bbpath2,_0x1073c5(0x1c1),_0x1073c5(0x1f6)));}),app[_0x1dce83(0x1fb)](_0x1dce83(0x25d),(_0x492a2c,_0x37661e)=>{const _0x27eb20=_0x1dce83;_0x37661e[_0x27eb20(0x208)](path[_0x27eb20(0x250)](__dirname,bbpath2,_0x27eb20(0x1c1),'index.html'));}),app['get'](_0x1dce83(0x241),(_0x4cac87,_0x216652)=>{const _0x4fde1a=_0x1dce83;_0x216652[_0x4fde1a(0x208)](path[_0x4fde1a(0x250)](__dirname,bbpath2,_0x4fde1a(0x1c1),_0x4fde1a(0x1f6)));});if(HOST)http[_0x1dce83(0x1d8)](PORT,HOST);else http[_0x1dce83(0x1d8)](PORT);const io=require(_0x1dce83(0x1a9))(http,{}),analytics=analyticsLib({'app':_0x1dce83(0x2b0),'plugins':[googleAnalytics({'trackingId':_0x1dce83(0x1b3)})]}),TelegramBot=require(_0x1dce83(0x1f3));let tgBot;if(settings[_0x1dce83(0x289)]&&settings[_0x1dce83(0x289)]!=''&&settings[_0x1dce83(0x20a)]&&settings[_0x1dce83(0x20a)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5a763c=_0x1dce83;console['log'](''),console['log'](_0x5a763c(0x277)),logging(_0x5a763c(0x22a)+PORT),console['log'](_0x5a763c(0x277));if(config[_0x5a763c(0x18c)]!=0x0)config[_0x5a763c(0x283)](_0x14dd4a=>{const _0x4a3bf9=_0x5a763c;if(_0x14dd4a[_0x4a3bf9(0x23a)]==_0x4a3bf9(0x1e3)||_0x14dd4a['status']=='new')logging(_0x4a3bf9(0x21c)+_0x14dd4a['botID']+_0x4a3bf9(0x247)+_0x14dd4a[_0x4a3bf9(0x223)]),startBot([_0x14dd4a[_0x4a3bf9(0x2b5)],userID],{'cwd':bbpath},function(_0x2ccd8a){if(_0x2ccd8a)logging(_0x2ccd8a);});else(_0x14dd4a[_0x4a3bf9(0x23a)]==_0x4a3bf9(0x1bc)||_0x14dd4a[_0x4a3bf9(0x23a)]==_0x4a3bf9(0x261))&&logging(_0x4a3bf9(0x244)+_0x14dd4a[_0x4a3bf9(0x2b5)]+_0x4a3bf9(0x247)+_0x14dd4a[_0x4a3bf9(0x223)]);});else!newBot&&console[_0x5a763c(0x25b)](_0x5a763c(0x194));if(newBot)addBot();console[_0x5a763c(0x25b)](_0x5a763c(0x277)),console['log']('');}function startSocket(){io['on']('connection',_0x38cefa=>{const _0x2e552f=_0x3d47;let _0x422989,_0x4b8118,_0x303a72,_0x9a146f,_0x2b9020;const _0x531b5c=_0x38cefa['handshake'][_0x2e552f(0x209)][_0x2e552f(0x24d)];_0x4b8118=_0x531b5c[_0x2e552f(0x28e)](/bot[0-9]{3}/);if(_0x4b8118)_0x303a72=_0x4b8118[0x0][_0x2e552f(0x28e)](/[0-9]{3}/);if(_0x303a72)_0x422989=_0x303a72[0x0];else _0x422989=_0x2e552f(0x29e);const _0x25548b=_0x38cefa[_0x2e552f(0x26b)][_0x2e552f(0x1b8)][_0x2e552f(0x1c5)];if(!_0x25548b)_0x38cefa[_0x2e552f(0x190)](_0x2e552f(0x23a),{'publicKey':secure['publicKey']});else{_0x9a146f=timelyDecrypt(_0x25548b,![]);if(!_0x9a146f)logging(_0x2e552f(0x1e6));else{_0x2b9020=normalizeIP(_0x38cefa[_0x2e552f(0x26d)]['remoteAddress'])[_0x2e552f(0x1c4)];if(!devices[_0x9a146f])devices[_0x9a146f]={'uuid':_0x9a146f,'access':{'token':null}};devices[_0x9a146f]['ip']=_0x2b9020;const _0x52c321=addClient(_0x38cefa['id'],_0x9a146f,_0x422989);setAccess(_0x52c321),_0x38cefa['on'](_0x2e552f(0x2b1),_0x87366f=>{const _0x5a0eb3=_0x2e552f,_0x47861b=timelyDecrypt(_0x87366f[_0x5a0eb3(0x2a8)]);if(_0x47861b){_0x87366f={'username':_0x87366f[_0x5a0eb3(0x192)],'password':_0x47861b},devices[_0x9a146f][_0x5a0eb3(0x199)]=validateCredentials(_0x87366f,_0x9a146f);if(devices[_0x9a146f][_0x5a0eb3(0x199)][_0x5a0eb3(0x212)]==![]&&devices[_0x9a146f]['access'][_0x5a0eb3(0x1dd)]=='2FA\x20login\x20required')_0x38cefa['emit'](_0x5a0eb3(0x23a),{'access':devices[_0x9a146f][_0x5a0eb3(0x199)]}),loginAccess2FA(_0x9a146f,_0x2b9020);else{if(devices[_0x9a146f]['access']['allow']==![]&&devices[_0x9a146f]['access'][_0x5a0eb3(0x1dd)]==_0x5a0eb3(0x220))_0x38cefa[_0x5a0eb3(0x190)](_0x5a0eb3(0x23a),{'access':devices[_0x9a146f][_0x5a0eb3(0x199)]});else devices[_0x9a146f][_0x5a0eb3(0x199)][_0x5a0eb3(0x212)]&&devices[_0x9a146f][_0x5a0eb3(0x199)][_0x5a0eb3(0x1dd)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x9a146f)[_0x5a0eb3(0x283)](_0x29c7f7=>{setAccess(_0x29c7f7);}),setTokenRefresh(_0x9a146f),setSessionTimeout(_0x5a0eb3(0x2b1),_0x9a146f));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x38cefa['on'](_0x2e552f(0x1f1),()=>{resetPassword();}),_0x38cefa['on']('disconnect',_0x591c4a=>{removeClient(_0x38cefa['id']);});}}});}function initClient(_0x2833e5){const _0x415722=_0x1dce83;if(_0x2833e5!='botmanager'&&config[_0x415722(0x1e5)]!=''){if(pid[_0x2833e5])pid[_0x2833e5][_0x415722(0x290)]({'function':_0x415722(0x29a),'args':null});}}function getSocket(_0xc77c33){return io['sockets']['sockets']['get'](_0xc77c33);}function setAccess(_0xacd016){const _0x44d498=_0x1dce83,_0x1dbadb=getSocket(_0xacd016['id']),_0x5ce757=_0xacd016[_0x44d498(0x2a4)],_0x5a5d2c=_0xacd016[_0x44d498(0x21a)];devices[_0x5ce757]['access']=validateAccess(devices[_0x5ce757]['access']['token'],_0x5ce757),_0x1dbadb[_0x44d498(0x250)](_0x5ce757);if(devices[_0x5ce757][_0x44d498(0x199)][_0x44d498(0x212)]){_0x1dbadb[_0x44d498(0x250)](_0x5a5d2c);if(_0x5a5d2c==_0x44d498(0x29e))initializeSocketBotManager(_0x1dbadb);else initializeSocketBot(_0x1dbadb);initClient(_0x5a5d2c);}devices[_0x5ce757][_0x44d498(0x199)]['token']&&devices[_0x5ce757]['access'][_0x44d498(0x1dd)]==_0x44d498(0x18f)&&setSessionTimeout('2FA',_0x5ce757),devices[_0x5ce757][_0x44d498(0x199)][_0x44d498(0x284)]&&devices[_0x5ce757][_0x44d498(0x199)][_0x44d498(0x1dd)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x44d498(0x2b1),_0x5ce757),_0x1dbadb['emit'](_0x44d498(0x23a),{'status':_0xacd016[_0x44d498(0x19b)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5ce757]['access'],'externalip':devices[_0x5ce757]['ip'],'publicKey':secure[_0x44d498(0x1b5)]}),devices[_0x5ce757][_0x44d498(0x199)]['allow']==![]&&devices[_0x5ce757][_0x44d498(0x199)][_0x44d498(0x1dd)]==_0x44d498(0x286)&&temporaryAccess2FA(_0x5ce757,devices[_0x5ce757]['ip']);}function setSessionTimeout(_0x2de4f5,_0x4d8008){const _0x3ba936=_0x1dce83;let _0x2b0d13;if(_0x2de4f5=='login')_0x2b0d13=loginExpiry*0x3c*0x3e8;else _0x2b0d13=devices[_0x4d8008][_0x3ba936(0x245)][_0x3ba936(0x222)]*0x3c*0x3e8-(new Date()[_0x3ba936(0x29f)]()-devices[_0x4d8008][_0x3ba936(0x245)][_0x3ba936(0x1e4)]);if(devices[_0x4d8008][_0x3ba936(0x239)])clearTimeout(devices[_0x4d8008][_0x3ba936(0x239)]);devices[_0x4d8008][_0x3ba936(0x239)]=setTimeout(()=>{const _0xbc3e60=_0x3ba936;if(devices[_0x4d8008][_0xbc3e60(0x183)])clearTimeout(devices[_0x4d8008]['pidRefreshToken']);removeSocketListeners(_0x4d8008),addBlacklist(_0x4d8008),devices[_0x4d8008][_0xbc3e60(0x245)]=null,devices[_0x4d8008]['telegram2FaApproval']=null,devices[_0x4d8008][_0xbc3e60(0x199)][_0xbc3e60(0x284)]=null,devices[_0x4d8008][_0xbc3e60(0x199)]=validateAccess(devices[_0x4d8008]['access'][_0xbc3e60(0x284)],_0x4d8008),!(devices[_0x4d8008][_0xbc3e60(0x199)][_0xbc3e60(0x212)]&&devices[_0x4d8008][_0xbc3e60(0x199)]['reason']==_0xbc3e60(0x292))&&(_0x2de4f5=='login'?io['to'](_0x4d8008)[_0xbc3e60(0x190)]('status',{'access':{'allow':![],'reason':_0xbc3e60(0x210),'token':null}}):io['to'](_0x4d8008)[_0xbc3e60(0x190)](_0xbc3e60(0x23a),{'access':{'allow':![],'reason':_0xbc3e60(0x26f),'token':null}})),devices[_0x4d8008][_0xbc3e60(0x199)]['token']=null;},_0x2b0d13);}function setTokenRefresh(_0x320f8f){const _0x47d1d4=_0x1dce83;if(devices[_0x320f8f][_0x47d1d4(0x183)])clearTimeout(devices[_0x320f8f][_0x47d1d4(0x183)]);devices[_0x320f8f][_0x47d1d4(0x183)]=setTimeout(()=>{const _0xd2222e=_0x47d1d4;getClientsWithUuid(_0x320f8f)[_0xd2222e(0x18c)]!=0x0?(devices[_0x320f8f][_0xd2222e(0x199)]=refreshToken(_0x320f8f),io['to'](_0x320f8f)['emit'](_0xd2222e(0x23a),{'status':_0xd2222e(0x263),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x320f8f][_0xd2222e(0x199)],'externalip':devices[_0x320f8f]['ip'],'publicKey':secure[_0xd2222e(0x1b5)]}),setTokenRefresh(_0x320f8f)):clearTimeout(devices[_0x320f8f][_0xd2222e(0x183)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3a69f8){const _0x593ff1=_0x1dce83,_0x979571=getClient(_0x3a69f8['id'])[_0x593ff1(0x2a4)];_0x3a69f8['emit'](_0x593ff1(0x23d),config),_0x3a69f8[_0x593ff1(0x190)](_0x593ff1(0x1ae),cleanSettings()),_0x3a69f8['on'](_0x593ff1(0x293),_0x1fd710=>{const _0x218c8c=_0x593ff1;if(validateAccess(_0x1fd710,_0x979571)[_0x218c8c(0x212)])addBot();else logging(_0x218c8c(0x1ed));}),_0x3a69f8['on'](_0x593ff1(0x1d5),(_0x550b95,_0x1dc1e4)=>{const _0x507ddb=_0x593ff1;if(validateAccess(_0x1dc1e4,_0x979571)[_0x507ddb(0x212)])toggleBot(_0x550b95[_0x507ddb(0x2b5)],_0x550b95[_0x507ddb(0x23a)],_0x550b95['live']);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3a69f8['on']('delete-bot',(_0x433c34,_0x5df4a8)=>{const _0x3c0602=_0x593ff1;if(validateAccess(_0x5df4a8,_0x979571)[_0x3c0602(0x212)])deleteBot(_0x433c34);else logging(_0x3c0602(0x18a));}),_0x3a69f8['on']('store-settings',(_0x2a5e96,_0x1a2c78)=>{const _0x469faf=_0x593ff1;if(validateAccess(_0x1a2c78,_0x979571)[_0x469faf(0x212)])storeSettings(_0x2a5e96,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x3a69f8['on'](_0x593ff1(0x264),(_0x4f4476,_0x1dd0c6)=>{const _0xcdf839=_0x593ff1;if(validateAccess(_0x1dd0c6,_0x979571)[_0xcdf839(0x212)])updateBB();else logging(_0xcdf839(0x204));}),_0x3a69f8['on'](_0x593ff1(0x1d2),_0x683179=>{const _0x1ee445=_0x593ff1;if(validateAccess(_0x683179,_0x979571)['allow']){if(devices[_0x979571][_0x1ee445(0x183)])clearTimeout(devices[_0x979571][_0x1ee445(0x183)]);if(devices[_0x979571][_0x1ee445(0x239)])clearTimeout(devices[_0x979571][_0x1ee445(0x239)]);removeSocketListeners(getClient(_0x3a69f8['id'])[_0x1ee445(0x2a4)]),addBlacklist(_0x979571),devices[_0x979571]['telegramIpApproval']=null,devices[_0x979571][_0x1ee445(0x215)]=null,devices[_0x979571]['access']['token']=null,io['to'](getClient(_0x3a69f8['id'])[_0x1ee445(0x2a4)])['emit'](_0x1ee445(0x23a),{'access':{'allow':![],'reason':_0x1ee445(0x278),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x226327){const _0x4f7160=_0x1dce83,_0x21a16f=getClient(_0x226327['id'])[_0x4f7160(0x21a)],_0x1611a9=getClient(_0x226327['id'])[_0x4f7160(0x2a4)];_0x226327['on']('get-logs',(_0x5c38bb,_0x11a4e6)=>{const _0x3c48be=_0x4f7160;if(validateAccess(_0x11a4e6,_0x1611a9)[_0x3c48be(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f]['send']({'function':_0x3c48be(0x1ef),'args':_0x5c38bb});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x226327['on'](_0x4f7160(0x213),(_0x5e89f2,_0x47d02e)=>{const _0x3ab660=_0x4f7160;if(validateAccess(_0x47d02e,_0x1611a9)[_0x3ab660(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f]['send']({'function':'getPortfolio','args':_0x5e89f2});}else logging(_0x3ab660(0x268));}),_0x226327['on'](_0x4f7160(0x232),(_0x5d8ee6,_0x572362)=>{const _0x16056d=_0x4f7160;if(validateAccess(_0x572362,_0x1611a9)[_0x16056d(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f][_0x16056d(0x290)]({'function':_0x16056d(0x1f4),'args':_0x5d8ee6});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x226327['on'](_0x4f7160(0x1df),(_0x1ff050,_0x1defa6)=>{const _0x42d9a1=_0x4f7160;if(validateAccess(_0x1defa6,_0x1611a9)[_0x42d9a1(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f]['send']({'function':'storeHeadless','args':_0x1ff050});}else logging(_0x42d9a1(0x27c));}),_0x226327['on'](_0x4f7160(0x237),_0x25f9b4=>{const _0x1e59fb=_0x4f7160;if(validateAccess(_0x25f9b4,_0x1611a9)[_0x1e59fb(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f][_0x1e59fb(0x290)]({'function':_0x1e59fb(0x2a1),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x226327['on']('place-order',(_0x356fd2,_0x29ec6c)=>{const _0x3d68ab=_0x4f7160;if(validateAccess(_0x29ec6c,_0x1611a9)['allow']){if(pid[_0x21a16f])pid[_0x21a16f][_0x3d68ab(0x290)]({'function':_0x3d68ab(0x2a5),'args':_0x356fd2});}else logging(_0x3d68ab(0x1f0));}),_0x226327['on'](_0x4f7160(0x22e),_0x5572f0=>{const _0x44442f=_0x4f7160;if(validateAccess(_0x5572f0,_0x1611a9)[_0x44442f(0x212)]){if(pid[_0x21a16f])pid[_0x21a16f][_0x44442f(0x290)]({'function':_0x44442f(0x2b3),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x226327['on'](_0x4f7160(0x1d2),_0x44fd92=>{const _0x5bf6a6=_0x4f7160;if(validateAccess(_0x44fd92,_0x1611a9)[_0x5bf6a6(0x212)]){if(devices[_0x1611a9][_0x5bf6a6(0x183)])clearTimeout(devices[_0x1611a9][_0x5bf6a6(0x183)]);if(devices[_0x1611a9][_0x5bf6a6(0x239)])clearTimeout(devices[_0x1611a9]['pidExpireLogin']);removeSocketListeners(getClient(_0x226327['id'])[_0x5bf6a6(0x2a4)]),addBlacklist(_0x1611a9),devices[_0x1611a9][_0x5bf6a6(0x245)]=null,devices[_0x1611a9][_0x5bf6a6(0x215)]=null,devices[_0x1611a9][_0x5bf6a6(0x199)][_0x5bf6a6(0x284)]=null,io['to'](getClient(_0x226327['id'])[_0x5bf6a6(0x2a4)])[_0x5bf6a6(0x190)](_0x5bf6a6(0x23a),{'access':{'allow':![],'reason':_0x5bf6a6(0x278),'token':null}});}else logging(_0x5bf6a6(0x2a0));});}function removeSocketListeners(_0x13885d){const _0x25493b=_0x1dce83;getClientsWithUuid(_0x13885d)[_0x25493b(0x283)](_0x25f162=>{const _0x44945d=_0x25493b;getSocket(_0x25f162['id'])[_0x44945d(0x203)]();});}function cleanSettings(){const _0x9d6b80=_0x1dce83;let _0x3e5853=settings;return settings[_0x9d6b80(0x289)]&&settings['telegramToken']!=''&&(_0x3e5853={..._0x3e5853,'telegramToken':_0x9d6b80(0x1a2)}),settings[_0x9d6b80(0x1bd)]&&settings[_0x9d6b80(0x1bd)]!=''&&(_0x3e5853={..._0x3e5853,'bbPassword':'************'}),_0x3e5853;}function updateBB(){const _0x55b5ac=_0x1dce83;process[_0x55b5ac(0x290)]({'update':!![]},_0x1a7306=>{});}function startBot(_0x4704dc,_0x25acd4,_0x142892){const _0x1b83b5=_0x1dce83;let _0x579aba=![];const _0xff7a41=_0x4704dc[0x0];_0x25acd4={..._0x25acd4,'stdio':[_0x1b83b5(0x184),_0x1b83b5(0x184),_0x1b83b5(0x184),_0x1b83b5(0x24a)]},pid[_0xff7a41]=childProcess[_0x1b83b5(0x1b2)](botfile,_0x4704dc,_0x25acd4),pid[_0xff7a41]['on']('message',_0x2e5e5c=>{const _0x54336c=_0x1b83b5;switch(Object[_0x54336c(0x201)](_0x2e5e5c)[0x0]){case'botname':updateBotName(_0xff7a41,_0x2e5e5c['botname']);break;case _0x54336c(0x23a):updateStatus(_0xff7a41,_0x2e5e5c['status']);break;case _0x54336c(0x273):updateLive(_0xff7a41,_0x2e5e5c['live']);break;case'started':updateLive(_0xff7a41,_0x2e5e5c[_0x54336c(0x2a2)]),io['to'](_0xff7a41)[_0x54336c(0x190)](_0x54336c(0x23a),{'access':{'allow':![],'reason':_0x54336c(0x225),'token':null}});break;case'stop':_0x2e5e5c[_0x54336c(0x23f)]==_0x54336c(0x20f)&&stopBot(_0xff7a41);_0x2e5e5c[_0x54336c(0x23f)]==_0x54336c(0x202)&&toggleBot(_0xff7a41,_0x54336c(0x1bc),_0x54336c(0x1bb));break;case _0x54336c(0x24c):sendTelegram(_0xff7a41,_0x2e5e5c[_0x54336c(0x24c)]);break;case _0x54336c(0x27d):io['to'](_0xff7a41)[_0x54336c(0x190)](_0x2e5e5c[_0x54336c(0x27d)],_0x2e5e5c['args']);break;}}),pid[_0xff7a41]['on'](_0x1b83b5(0x196),function(_0x1b3c36){if(_0x579aba)return;_0x579aba=!![],_0x142892(_0x1b3c36);}),pid[_0xff7a41]['on'](_0x1b83b5(0x251),function(_0x50f0d5){const _0x54e841=_0x1b83b5;if(_0x579aba)return;_0x579aba=!![],_0x142892(null);const _0x5ef84f=dbConfig[_0x54e841(0x1fb)]('bots')[_0x54e841(0x216)]({'botID':_0xff7a41})['value']();_0x5ef84f&&(_0x5ef84f[_0x54e841(0x23a)]=='enabled'||_0x5ef84f['status']=='new')&&(updateLive(_0xff7a41,'stopped'),logging(_0x54e841(0x1cb)+_0xff7a41),startBot([_0xff7a41,userID],{'cwd':bbpath},function(_0x5e6ecf){if(_0x5e6ecf)logging(_0x5e6ecf);}));});}function stopBot(_0x47210b){const _0x4a59a5=_0x1dce83;getClientsWithBotID(_0x47210b)[_0x4a59a5(0x283)](_0xe6c1e5=>{getSocket(_0xe6c1e5['id'])['disconnect'](!![]),removeClient(_0xe6c1e5['id']);});if(pid[_0x47210b])pid[_0x47210b]['kill']();}function addBot(){const _0x46e63a=_0x1dce83;let _0x421597;for(let _0xa1d971=0x1;_0xa1d971<0x3e9;_0xa1d971++){_0x421597=_0xa1d971[_0x46e63a(0x191)]()[_0x46e63a(0x20e)](0x3,'0');let _0x1a0b91=config[_0x46e63a(0x216)](_0x32bd6f=>_0x32bd6f[_0x46e63a(0x2b5)]==_0x421597);if(!_0x1a0b91)break;}if(_0x421597===_0x46e63a(0x19d)){logging(_0x46e63a(0x236));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x421597),dbConfig[_0x46e63a(0x1fb)](_0x46e63a(0x23d))[_0x46e63a(0x218)]({'botID':_0x421597,'botname':_0x46e63a(0x282)+_0x421597,'status':_0x46e63a(0x1de),'live':''})[_0x46e63a(0x2a6)](),startBot([_0x421597,userID],{'cwd':bbpath},function(_0x291452){if(_0x291452)logging(_0x291452);}),config=getConfiguration(),io['to'](_0x46e63a(0x29e))['emit'](_0x46e63a(0x23d),config);}function deleteBot(_0x3d80cc){const _0xe1e7ba=_0x1dce83;getClientsWithBotID(_0x3d80cc)[_0xe1e7ba(0x283)](_0x45ceac=>{getSocket(_0x45ceac['id'])['disconnect'](!![]),removeClient(_0x45ceac['id']);}),dbConfig[_0xe1e7ba(0x1fb)](_0xe1e7ba(0x23d))[_0xe1e7ba(0x226)]({'botID':_0x3d80cc})[_0xe1e7ba(0x2a6)](),logging('deleted\x20Bot\x20'+_0x3d80cc),stopBot(_0x3d80cc);try{fs[_0xe1e7ba(0x19e)](path[_0xe1e7ba(0x250)](configpath,'bot-'+_0x3d80cc+_0xe1e7ba(0x1fc))),fs[_0xe1e7ba(0x19e)](path[_0xe1e7ba(0x250)](configpath,'bot-'+_0x3d80cc+_0xe1e7ba(0x193))),fs['unlinkSync'](path[_0xe1e7ba(0x250)](configpath,'bot-'+_0x3d80cc+_0xe1e7ba(0x17f))),fs[_0xe1e7ba(0x19e)](path[_0xe1e7ba(0x250)](configpath,'bot-'+_0x3d80cc+'-results.json'));}catch(_0x30172b){if(_0x30172b)logging(_0xe1e7ba(0x29d),_0x30172b);}config=getConfiguration(),io['to']('botmanager')[_0xe1e7ba(0x190)](_0xe1e7ba(0x23d),config);}function toggleBot(_0x576797,_0x36a02a,_0x21e7d7){const _0x556319=_0x1dce83;dbConfig[_0x556319(0x1fb)]('bots')[_0x556319(0x216)]({'botID':_0x576797})[_0x556319(0x207)]({'status':_0x36a02a})[_0x556319(0x207)]({'live':_0x21e7d7})[_0x556319(0x2a6)]();if(_0x36a02a==_0x556319(0x1e3)||_0x36a02a=='new')logging(_0x556319(0x186)+_0x576797),startBot([_0x576797,userID],{'cwd':bbpath},function(_0x4f81d2){if(_0x4f81d2)logging(_0x4f81d2);});else(_0x36a02a==_0x556319(0x1bc)||_0x36a02a=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x576797),stopBot(_0x576797));config=getConfiguration(),io['to'](_0x556319(0x29e))[_0x556319(0x190)](_0x556319(0x23d),config);}function toggleStatus(_0x1db123){const _0x1b99ab=_0x1dce83;let _0xe353e4=dbConfig['get'](_0x1b99ab(0x23d))[_0x1b99ab(0x216)]({'botID':_0x1db123})['value'](),_0xfade04;if(_0xe353e4[_0x1b99ab(0x23a)]===_0x1b99ab(0x1e3))_0xfade04=_0x1b99ab(0x1bc);else{if(_0xe353e4[_0x1b99ab(0x23a)]===_0x1b99ab(0x1de))_0xfade04='new-disabled';else{if(_0xe353e4[_0x1b99ab(0x23a)]==='new-disabled')_0xfade04=_0x1b99ab(0x1de);else{if(_0xe353e4[_0x1b99ab(0x23a)]==='disabled')_0xfade04=_0x1b99ab(0x1e3);}}}return _0xfade04;}function updateStatus(_0x705040,_0x45eb55){const _0x3257a6=_0x1dce83;dbConfig[_0x3257a6(0x1fb)](_0x3257a6(0x23d))['find']({'botID':_0x705040})['assign']({'status':_0x45eb55})['write'](),config=getConfiguration(),io['to'](_0x3257a6(0x29e))[_0x3257a6(0x190)](_0x3257a6(0x23d),config);}function updateLive(_0x417449,_0x571dfa){const _0x1628ee=_0x1dce83;dbConfig[_0x1628ee(0x1fb)]('bots')[_0x1628ee(0x216)]({'botID':_0x417449})[_0x1628ee(0x207)]({'live':_0x571dfa})[_0x1628ee(0x2a6)](),config=getConfiguration(),io['to'](_0x1628ee(0x29e))[_0x1628ee(0x190)]('bots',config);}function updateBotName(_0x42745b,_0x47edc5){const _0x39e084=_0x1dce83;dbConfig['get'](_0x39e084(0x23d))[_0x39e084(0x216)]({'botID':_0x42745b})[_0x39e084(0x207)]({'botname':_0x47edc5})['write'](),config=getConfiguration(),io['to'](_0x39e084(0x29e))[_0x39e084(0x190)](_0x39e084(0x23d),config);}function _0x3d47(_0x45bf1d,_0x24494e){const _0x127ce0=_0x3449();return _0x3d47=function(_0x55cc93,_0x2bb145){_0x55cc93=_0x55cc93-0x171;let _0x3449ac=_0x127ce0[_0x55cc93];return _0x3449ac;},_0x3d47(_0x45bf1d,_0x24494e);}function _0x3449(){const _0x315e41=['settings','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','getUTCHours','Invalid\x20username\x20or\x20IP\x20address','fork','UA-192771731-1','all','publicKey','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','order','auth','2FA\x20login\x20token\x20generated','date-fns','stopped','disabled','bbPassword','SIGINT','Ok,\x20will\x20send\x20order\x20notifications\x20only','getSeconds','build','login\x20token\x20generated','once','store','encryptedUuid','f2aRequired','clientip','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','constructor','bot.js','restarting\x20Bot\x20','mkdirSync','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','2FA\x20login\x20rejected','success','data','20RsktsQ','logout','temporaryAccessAllowed','<b>Balance\x20Bot\x20status:</b>\x0a','update-bot','Crypt','temporary\x20access\x20not\x20allowed','listen','479510WntNni','polling_error','All\x20bots\x20running\x20right\x20now','event','reason','new','store-headless','hasOwnProperty','type','orders','enabled','timestamp','apiKey','Unauthorized\x20login\x20attempt\x20(public\x20key)','Password\x20reset\x20rejected','split','Balance\x20Bot\x20Server','telegramEvents','config/','@analytics/google-analytics','Unauthorized\x20attempt\x20to\x20add\x20bot','apply','emitHistory','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','reset-password','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','node-telegram-bot-api','storeConfiguration','value','index.html','answerCallbackQuery',',\x20must\x20be\x20a\x204\x20digit\x20number','compareSync','Invalid\x20Telegram\x20token','get','-config.json','hex','version.json','from','No\x20bots\x20running\x20right\x20now','keys','kill','removeAllListeners','Unauthorized\x20attempt\x20to\x20update\x20settings','127.0.0.1','alerts','assign','sendFile','headers','telegramUsername','getMinutes','default','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','padStart','restart','access\x20timeout','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','allow','get-portfolio','createServer','telegram2FaApproval','find','message','push','All\x20bots','bot','show','starting\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','secret','invalid\x20credentials','bb-settings.json','expiry','botname','running','reload','remove','sign','privateKey','generateKeyPairAsync','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','<b>Telegram\x20bot\x20status:</b>\x0a','verify','includes','cancel-loading','then','stopPolling','notification','store-configuration','search','accept','defaults','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','get-starting-balances','yes','pidExpireLogin','status','/:bot/coins','filter','bots','existsSync','stop','catch','/:bot/support','crypto','228107CNHGaY','idling\x20bot\x20\x20\x20|\x20Bot\x20','telegramIpApproval','/enable\x20-\x20enable\x20notifications\x0a','\x20|\x20','cloneDeep','env','ipc','Notifications\x20enabled\x0a','telegram','referer','::ffff:127.0.0.1','getMonth','join','exit','settings.','/status\x20-\x20show\x20bot(s)\x20status\x0a','reject','login\x20required','Access\x20enabled\x20for\x20','6bOshIq','hybrid-crypto-js','map','\x20minutes','log','104XzssWV','/:bot/configuration','getDate','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','timeshift','new-disabled','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','connected','update-bb','Error:\x20Invalid\x20argument\x20','bb-secure.json','Alerts','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','::1','handshake','2FA\x20login\x20required','conn','HTML','temporary\x20access\x20timeout','126574OXMZZY','Invalid\x20authentication\x20token\x20(1)','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','live','lowdb/adapters/FileSync','callback_query','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','-----------------------------------------------------------------------------------','logged\x20out','clients','kind','1798812ktfkZu','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','function','static','onText','argv','getFullYear','Bot\x20','forEach','token','page','2FA\x20required','bb/','telegramEnabled','telegramToken','bb-config.json','Notifications\x20enabled','login\x20token\x20valid','Notifications\x20disabled','match','You\x20can\x20use\x20the\x20following\x20commands:\x0a','send','sha256','login\x20not\x20required','add-bot','Orders','/disable\x20-\x20disable\x20notifications\x0a','\x20>\x20','whitelist','set','use','initclient','telegramChatId','\x20only\x0a','error\x20while\x20deleting\x20config\x20files:\x20','botmanager','getTime','Unauthorized\x20attempt\x20to\x20log\x20out','getStartingBalances','started','name','uuid','placeOrder','write','2505NktIoc','password','536DRoyhO','Invalid\x20authentication\x20token\x20(2)','isDirectory','removeListener','blacklist','chat','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Balance\x20Bot','login','user','cancelLoading','getHours','botID','SIGTERM','/:bot/history','lowdb','Invalid\x20IP\x20address','Allow\x20login\x20from\x20IP\x20address\x20<b>','https://hodlerhacks.com','2kgcGsU','bcryptjs','(((.+)+)+)+$','404\x20Not\x20Found','RSA','decrypt','copyFileSync','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','-performance.json','/:bot/performance','test','secure','pidRefreshToken','inherit','No\x20authentication\x20token','enabled\x20Bot\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Login\x20accepted','build2','Unauthorized\x20attempt\x20to\x20delete\x20bot','/:bot/portfolio','length','</b>\x20?','sortBy','temporary\x20token\x20generated','emit','toString','username','-events.json','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','error','bbUsername','Temporary\x20access\x20rejected','access','RSA-OAEP','server','sendMessage','1000','unlinkSync','Token\x20blacklisted','NTBA_FIX_319','Login\x20rejected','************','User\x20has\x20been\x20validated','port',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed',':\x20Bot\x20Mgr\x20>\x20','99206THgzeK','Notifications\x20disabled\x0a','socket.io','host','isValid','2463552KUVtam','/help\x20-\x20show\x20available\x20commands\x0a'];_0x3449=function(){return _0x315e41;};return _0x3449();}function telegramError(_0x238d9d){const _0x2aa83b=_0x1dce83;console[_0x2aa83b(0x25b)](getTimeStamp()+_0x2aa83b(0x1a5));}function validateTelegram(_0x32e868){const _0x2cdcc5=_0x1dce83;if(_0x32e868['from']['username']!=settings['telegramUsername']&&'@'+_0x32e868[_0x2cdcc5(0x1ff)][_0x2cdcc5(0x192)]!=settings[_0x2cdcc5(0x20a)])return tgBot['sendMessage'](_0x32e868[_0x2cdcc5(0x2ae)]['id'],_0x2cdcc5(0x1cd),{'parse_mode':'HTML'})['catch'](_0x5e1e17=>{telegramError(_0x5e1e17);}),![];return!![];}async function initTelegram(){const _0x51b05e=_0x1dce83;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x51b05e(0x289)],{'polling':!![]});let _0x106f16=_0x51b05e(0x28f);_0x106f16+='\x0a',_0x106f16+=_0x51b05e(0x246),_0x106f16+=_0x51b05e(0x295),_0x106f16+=_0x51b05e(0x262),_0x106f16+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x106f16+='/on\x20-\x20start\x20bot(s)\x0a',_0x106f16+='/off\x20-\x20stop\x20bot(s)\x0a',_0x106f16+=_0x51b05e(0x253),_0x106f16+=_0x51b05e(0x1ad);let _0x54ed62='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x54ed62+='\x0a',_0x54ed62+=_0x106f16,tgBot[_0x51b05e(0x27f)](/\/start/,_0x270c61=>{const _0x5d05f6=_0x51b05e;if(!validateTelegram(_0x270c61))return;if(settings[_0x5d05f6(0x29b)]!=_0x270c61[_0x5d05f6(0x2ae)]['id'])updateSetting(_0x5d05f6(0x29b),_0x270c61['chat']['id']);updateSetting(_0x5d05f6(0x288),!![]),tgBot[_0x5d05f6(0x19c)](_0x270c61[_0x5d05f6(0x2ae)]['id'],_0x54ed62)['catch'](_0x40fc48=>{telegramError(_0x40fc48);});}),tgBot[_0x51b05e(0x27f)](/\/enable/,_0x4daa16=>{const _0x4d1234=_0x51b05e;if(!validateTelegram(_0x4daa16))return;if(settings['telegramChatId']!=_0x4daa16[_0x4d1234(0x2ae)]['id'])updateSetting(_0x4d1234(0x29b),_0x4daa16['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4d1234(0x19c)](_0x4daa16[_0x4d1234(0x2ae)]['id'],_0x4d1234(0x28b))[_0x4d1234(0x240)](_0x28b1e7=>{telegramError(_0x28b1e7);});}),tgBot['onText'](/\/config/,async _0xdd0479=>{const _0xfae4d7=_0x51b05e;if(!validateTelegram(_0xdd0479))return;tgBot[_0xfae4d7(0x2ac)](_0xfae4d7(0x275)),tgBot[_0xfae4d7(0x19c)](_0xdd0479[_0xfae4d7(0x2ae)]['id'],_0xfae4d7(0x2af),{'reply_markup':{'inline_keyboard':[[{'text':_0xfae4d7(0x294),'callback_data':_0xfae4d7(0x1e2)},{'text':_0xfae4d7(0x267),'callback_data':_0xfae4d7(0x206)},{'text':'All','callback_data':'all'}]]}})[_0xfae4d7(0x240)](_0x347d69=>{telegramError(_0x347d69);}),tgBot['on']('callback_query',async _0x54660b=>{const _0x199e79=_0xfae4d7,_0x35dc8a=_0x54660b[_0x199e79(0x1d0)],_0x1305a6=_0x54660b[_0x199e79(0x217)];tgBot['answerCallbackQuery'](_0x54660b['id'])[_0x199e79(0x22f)](async()=>{const _0x4de2d9=_0x199e79;_0x35dc8a==_0x4de2d9(0x1e2)&&(updateSetting(_0x4de2d9(0x1ea),_0x4de2d9(0x1e2)),updateSetting(_0x4de2d9(0x288),!![]),await tgBot[_0x4de2d9(0x19c)](_0x1305a6[_0x4de2d9(0x2ae)]['id'],_0x4de2d9(0x1bf))[_0x4de2d9(0x240)](_0x1f4857=>{telegramError(_0x1f4857);}));_0x35dc8a==_0x4de2d9(0x206)&&(updateSetting(_0x4de2d9(0x1ea),_0x4de2d9(0x206)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4de2d9(0x19c)](_0x1305a6[_0x4de2d9(0x2ae)]['id'],_0x4de2d9(0x21e))[_0x4de2d9(0x240)](_0x594d25=>{telegramError(_0x594d25);}));_0x35dc8a==_0x4de2d9(0x1b4)&&(updateSetting(_0x4de2d9(0x1ea),'all'),updateSetting(_0x4de2d9(0x288),!![]),await tgBot[_0x4de2d9(0x19c)](_0x1305a6['chat']['id'],_0x4de2d9(0x1f2))['catch'](_0x22478a=>{telegramError(_0x22478a);}));if(!settings[_0x4de2d9(0x29b)])tgBot['sendMessage'](_0x1305a6[_0x4de2d9(0x2ae)]['id'],_0x4de2d9(0x276))[_0x4de2d9(0x240)](_0x5160c7=>{telegramError(_0x5160c7);});}),tgBot[_0x199e79(0x2ac)](_0x199e79(0x275));});}),tgBot[_0x51b05e(0x27f)](/\/status/,_0x27c3fd=>{const _0x39676c=_0x51b05e;if(!validateTelegram(_0x27c3fd))return;let _0x20c9f7=_0x39676c(0x1d4);config[_0x39676c(0x283)](_0x3085a9=>{const _0x520729=_0x39676c;_0x20c9f7+=_0x520729(0x282)+_0x3085a9[_0x520729(0x2b5)]+_0x520729(0x247)+_0x3085a9[_0x520729(0x223)]+':\x20'+_0x3085a9[_0x520729(0x23a)]+'\x20/\x20'+_0x3085a9[_0x520729(0x273)]+'\x0a';}),_0x20c9f7+='\x0a',_0x20c9f7+=_0x39676c(0x22b),_0x20c9f7+=!settings[_0x39676c(0x288)]?_0x39676c(0x1a8):_0x39676c(0x24b),_0x20c9f7+=settings[_0x39676c(0x288)]?settings[_0x39676c(0x1ea)]==_0x39676c(0x1b4)?_0x39676c(0x1af):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x39676c(0x29c):'',tgBot[_0x39676c(0x19c)](_0x27c3fd['chat']['id'],_0x20c9f7,{'parse_mode':_0x39676c(0x26e)})[_0x39676c(0x240)](_0x247633=>{telegramError(_0x247633);});}),tgBot['onText'](/\/restart/,_0x3edab9=>{const _0x2320d7=_0x51b05e;if(!validateTelegram(_0x3edab9))return;tgBot[_0x2320d7(0x2ac)](_0x2320d7(0x275));const _0x1b1ba4=getEnabledBots();if(_0x1b1ba4[_0x2320d7(0x18c)]==0x0)tgBot[_0x2320d7(0x19c)](_0x3edab9[_0x2320d7(0x2ae)]['id'],_0x2320d7(0x200))[_0x2320d7(0x240)](_0x11807c=>{telegramError(_0x11807c);});else{if(_0x1b1ba4[_0x2320d7(0x18c)]>0x1)_0x1b1ba4[_0x2320d7(0x218)]({'botID':_0x2320d7(0x1b4)});let _0x946ed7=[],_0x321624=[];const _0x3e475a=_0x1b1ba4[_0x2320d7(0x18c)]%0x4==0x0||_0x1b1ba4[_0x2320d7(0x18c)]%0x4==0x3||_0x1b1ba4[_0x2320d7(0x18c)]%0x3==0x1?0x4:0x3;let _0x3b4664=0x0;_0x1b1ba4[_0x2320d7(0x283)]((_0x3c8d7c,_0x20798d)=>{const _0x4f03cf=_0x2320d7;if(_0x20798d%_0x3e475a==0x0)_0x321624=[];_0x321624['push']({'text':_0x3c8d7c[_0x4f03cf(0x2b5)]=='all'?_0x4f03cf(0x219):_0x4f03cf(0x282)+_0x3c8d7c['botID'],'callback_data':_0x3c8d7c[_0x4f03cf(0x2b5)]}),_0x20798d%_0x3e475a==0x0&&(_0x946ed7[_0x3b4664]=_0x321624,_0x3b4664++);}),tgBot[_0x2320d7(0x19c)](_0x3edab9[_0x2320d7(0x2ae)]['id'],_0x2320d7(0x25f),{'reply_markup':{'inline_keyboard':_0x946ed7}})['catch'](_0x18ff73=>{telegramError(_0x18ff73);}),tgBot['on'](_0x2320d7(0x275),async _0x35454d=>{const _0x464705=_0x2320d7,_0x26b56a=_0x35454d[_0x464705(0x1d0)],_0x374ceb=_0x35454d[_0x464705(0x217)];tgBot['answerCallbackQuery'](_0x35454d['id'])['then'](async()=>{const _0x56d1f9=_0x464705;if(_0x26b56a==_0x56d1f9(0x1b4)){if(settings[_0x56d1f9(0x1ea)]==_0x56d1f9(0x1e2))tgBot['sendMessage'](_0x374ceb[_0x56d1f9(0x2ae)]['id'],_0x56d1f9(0x20d))[_0x56d1f9(0x240)](_0x395d29=>{telegramError(_0x395d29);});config['forEach'](_0x1248b3=>{const _0x412109=_0x56d1f9;stopBot(_0x1248b3[_0x412109(0x2b5)]);});}else{if(settings['telegramEvents']==_0x56d1f9(0x1e2))tgBot['sendMessage'](_0x374ceb['chat']['id'],_0x56d1f9(0x17e)+_0x26b56a)[_0x56d1f9(0x240)](_0x43e3bd=>{telegramError(_0x43e3bd);});stopBot(_0x26b56a);}}),tgBot[_0x464705(0x2ac)](_0x464705(0x275));});}}),tgBot['onText'](/\/on/,_0x17099d=>{const _0x489740=_0x51b05e;if(!validateTelegram(_0x17099d))return;tgBot['removeListener'](_0x489740(0x275));const _0x4bd20d=getDisabledBots();if(_0x4bd20d[_0x489740(0x18c)]==0x0)tgBot['sendMessage'](_0x17099d['chat']['id'],_0x489740(0x1db))[_0x489740(0x240)](_0x402d94=>{telegramError(_0x402d94);});else{if(_0x4bd20d[_0x489740(0x18c)]>0x1)_0x4bd20d[_0x489740(0x218)]({'botID':_0x489740(0x1b4)});let _0x3ec3aa=[],_0x4bb2a6=[];const _0x3f65ee=_0x4bd20d['length']%0x4==0x0||_0x4bd20d['length']%0x4==0x3||_0x4bd20d[_0x489740(0x18c)]%0x3==0x1?0x4:0x3;let _0x538e40=0x0;_0x4bd20d[_0x489740(0x283)]((_0x262a56,_0x7dd28f)=>{const _0x5b8ef8=_0x489740;if(_0x7dd28f%_0x3f65ee==0x0)_0x4bb2a6=[];_0x4bb2a6[_0x5b8ef8(0x218)]({'text':_0x262a56[_0x5b8ef8(0x2b5)]==_0x5b8ef8(0x1b4)?'All\x20bots':_0x5b8ef8(0x282)+_0x262a56[_0x5b8ef8(0x2b5)],'callback_data':_0x262a56[_0x5b8ef8(0x2b5)]}),_0x7dd28f%_0x3f65ee==0x0&&(_0x3ec3aa[_0x538e40]=_0x4bb2a6,_0x538e40++);}),tgBot[_0x489740(0x19c)](_0x17099d['chat']['id'],_0x489740(0x1b6),{'reply_markup':{'inline_keyboard':_0x3ec3aa}})[_0x489740(0x240)](_0x11eb8e=>{telegramError(_0x11eb8e);}),tgBot['on']('callback_query',async _0x5d9f17=>{const _0x5e77d7=_0x489740,_0x4700b2=_0x5d9f17[_0x5e77d7(0x1d0)],_0x38f4c9=_0x5d9f17[_0x5e77d7(0x217)];tgBot[_0x5e77d7(0x1f7)](_0x5d9f17['id'])[_0x5e77d7(0x22f)](async()=>{const _0x589e97=_0x5e77d7;if(_0x4700b2=='all'){if(settings[_0x589e97(0x1ea)]==_0x589e97(0x1e2))tgBot['sendMessage'](_0x38f4c9['chat']['id'],_0x589e97(0x1c8))['catch'](_0x5db393=>{telegramError(_0x5db393);});_0x4bd20d[_0x589e97(0x283)](_0x76d7f8=>{const _0x3b7659=_0x589e97;if(_0x76d7f8['botID']!=_0x3b7659(0x1b4))toggleBot(_0x76d7f8[_0x3b7659(0x2b5)],toggleStatus(_0x76d7f8[_0x3b7659(0x2b5)]),_0x3b7659(0x1bb));});}else{if(settings[_0x589e97(0x1ea)]==_0x589e97(0x1e2))tgBot[_0x589e97(0x19c)](_0x38f4c9['chat']['id'],_0x589e97(0x272)+_0x4700b2)[_0x589e97(0x240)](_0x2fcefb=>{telegramError(_0x2fcefb);});toggleBot(_0x4700b2,toggleStatus(_0x4700b2),_0x589e97(0x1bb));}}),tgBot[_0x5e77d7(0x2ac)](_0x5e77d7(0x275));});}}),tgBot[_0x51b05e(0x27f)](/\/off/,_0x209f5d=>{const _0x2a48e9=_0x51b05e;if(!validateTelegram(_0x209f5d))return;tgBot['removeListener'](_0x2a48e9(0x275));const _0x3a35b2=getEnabledBots();if(_0x3a35b2['length']==0x0)tgBot['sendMessage'](_0x209f5d['chat']['id'],_0x2a48e9(0x200))[_0x2a48e9(0x240)](_0xe88251=>{telegramError(_0xe88251);});else{if(_0x3a35b2[_0x2a48e9(0x18c)]>0x1)_0x3a35b2[_0x2a48e9(0x218)]({'botID':_0x2a48e9(0x1b4)});let _0xffc0b3=[],_0x5265ef=[];const _0xb8cf83=_0x3a35b2[_0x2a48e9(0x18c)]%0x4==0x0||_0x3a35b2[_0x2a48e9(0x18c)]%0x4==0x3||_0x3a35b2[_0x2a48e9(0x18c)]%0x3==0x1?0x4:0x3;let _0x1ad8cb=0x0;_0x3a35b2[_0x2a48e9(0x283)]((_0xcd259f,_0x87cfc2)=>{const _0xd48445=_0x2a48e9;if(_0x87cfc2%_0xb8cf83==0x0)_0x5265ef=[];_0x5265ef[_0xd48445(0x218)]({'text':_0xcd259f['botID']==_0xd48445(0x1b4)?_0xd48445(0x219):'Bot\x20'+_0xcd259f['botID'],'callback_data':_0xcd259f[_0xd48445(0x2b5)]}),_0x87cfc2%_0xb8cf83==0x0&&(_0xffc0b3[_0x1ad8cb]=_0x5265ef,_0x1ad8cb++);}),tgBot[_0x2a48e9(0x19c)](_0x209f5d['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0xffc0b3}})[_0x2a48e9(0x240)](_0x3542d7=>{telegramError(_0x3542d7);}),tgBot['on'](_0x2a48e9(0x275),async _0x1ec259=>{const _0x580bb5=_0x2a48e9,_0x32e649=_0x1ec259['data'],_0xcd43a6=_0x1ec259['message'];tgBot[_0x580bb5(0x1f7)](_0x1ec259['id'])[_0x580bb5(0x22f)](async()=>{const _0x352654=_0x580bb5;if(_0x32e649==_0x352654(0x1b4)){if(settings[_0x352654(0x1ea)]==_0x352654(0x1e2))tgBot[_0x352654(0x19c)](_0xcd43a6[_0x352654(0x2ae)]['id'],_0x352654(0x195))[_0x352654(0x240)](_0x2c4aa9=>{telegramError(_0x2c4aa9);});_0x3a35b2[_0x352654(0x283)](_0x3b2dbc=>{const _0x2e8d3a=_0x352654;if(_0x3b2dbc[_0x2e8d3a(0x2b5)]!=_0x2e8d3a(0x1b4))toggleBot(_0x3b2dbc[_0x2e8d3a(0x2b5)],toggleStatus(_0x3b2dbc[_0x2e8d3a(0x2b5)]),_0x2e8d3a(0x1bb));});}else{if(settings['telegramEvents']==_0x352654(0x1e2))tgBot[_0x352654(0x19c)](_0xcd43a6['chat']['id'],_0x352654(0x21d)+_0x32e649)[_0x352654(0x240)](_0x1bb31b=>{telegramError(_0x1bb31b);});toggleBot(_0x32e649,toggleStatus(_0x32e649),_0x352654(0x1bb));}}),tgBot['removeListener'](_0x580bb5(0x275));});}}),tgBot[_0x51b05e(0x27f)](/\/disable/,_0x56cc81=>{const _0x27147a=_0x51b05e;if(!validateTelegram(_0x56cc81))return;tgBot[_0x27147a(0x19c)](_0x56cc81[_0x27147a(0x2ae)]['id'],_0x27147a(0x28d))[_0x27147a(0x240)](_0x2ef08b=>{telegramError(_0x2ef08b);}),updateSetting(_0x27147a(0x288),![]);}),tgBot[_0x51b05e(0x27f)](/\/help/,_0x485129=>{const _0x1844da=_0x51b05e;if(!validateTelegram(_0x485129))return;tgBot[_0x1844da(0x19c)](_0x485129['chat']['id'],_0x106f16)['catch'](_0x542d17=>{telegramError(_0x542d17);});}),tgBot['on'](_0x51b05e(0x1da),_0x14518f=>{const _0x2d65ac=_0x51b05e;_0x14518f[_0x2d65ac(0x191)]()[_0x2d65ac(0x22d)](_0x2d65ac(0x17a))&&(logging(_0x2d65ac(0x1fa)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x2d65ac(0x190)](_0x2d65ac(0x231),_0x2d65ac(0x1fa)));}),process[_0x51b05e(0x1c3)](_0x51b05e(0x1be),()=>{const _0x1838c1=_0x51b05e;if(tgBot)tgBot[_0x1838c1(0x230)]();process[_0x1838c1(0x251)](0x1);}),process[_0x51b05e(0x1c3)](_0x51b05e(0x171),()=>{const _0x1955fb=_0x51b05e;if(tgBot)tgBot[_0x1955fb(0x230)]();process[_0x1955fb(0x251)](0x1);});}}function disableTelegram(){const _0x43250f=_0x1dce83;tgBot&&(tgBot[_0x43250f(0x230)](),tgBot=null);}function sendTelegram(_0x318b76,_0x9d150f){const _0x5458fb=_0x1dce83;if(settings[_0x5458fb(0x288)]){if(settings[_0x5458fb(0x1ea)]==_0x5458fb(0x1b4)||(_0x9d150f[_0x5458fb(0x1e1)]==_0x5458fb(0x196)||_0x9d150f[_0x5458fb(0x1e1)]==_0x5458fb(0x1cf))&&settings['telegramEvents']==_0x5458fb(0x206)||_0x9d150f[_0x5458fb(0x1e1)]==_0x5458fb(0x1b7)&&settings[_0x5458fb(0x1ea)]==_0x5458fb(0x1e2)){if(tgBot&&settings[_0x5458fb(0x29b)]){if(_0x9d150f['showname'])tgBot[_0x5458fb(0x19c)](settings[_0x5458fb(0x29b)],_0x9d150f[_0x5458fb(0x223)]+'\x20>\x20'+_0x9d150f['event'])[_0x5458fb(0x240)](_0x153b8a=>{telegramError(_0x153b8a);});else tgBot[_0x5458fb(0x19c)](settings[_0x5458fb(0x29b)],_0x5458fb(0x282)+_0x318b76+_0x5458fb(0x296)+_0x9d150f[_0x5458fb(0x1dc)])[_0x5458fb(0x240)](_0x765032=>{telegramError(_0x765032);});}}}}function getDeviceWithIp(_0x3fdda9){const _0x5c73e4=_0x1dce83;return devices[_0x5c73e4(0x216)](_0x147435=>_0x147435['ip']===_0x3fdda9);}function temporaryAccess2FA(_0x5ad0fa,_0x3a2c03){const _0x61b7bd=_0x1dce83;let _0x11e4d8=new Date(),_0x218c89=![];if(lastIpApproval){if(_0x11e4d8-lastIpApproval<0x1388)_0x218c89=!![];}lastIpApproval=new Date();if(_0x218c89)return;tgBot&&settings[_0x61b7bd(0x29b)]&&(tgBot[_0x61b7bd(0x2ac)](_0x61b7bd(0x275)),tgBot[_0x61b7bd(0x19c)](settings[_0x61b7bd(0x29b)],_0x61b7bd(0x211)+normalizeIP(_0x3a2c03)[_0x61b7bd(0x21b)]+_0x61b7bd(0x18d),{'parse_mode':_0x61b7bd(0x26e),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x61b7bd(0x240)](_0x5bb67f=>{telegramError(_0x5bb67f);}),tgBot['on'](_0x61b7bd(0x275),async _0x5a1484=>{const _0x23c222=_0x61b7bd,_0x36f4cc=_0x5a1484['data'],_0x499cc6=_0x5a1484[_0x23c222(0x217)];tgBot['answerCallbackQuery'](_0x5a1484['id'])['then'](async()=>{const _0x34a659=_0x23c222;devices[_0x5ad0fa][_0x34a659(0x245)]={'clientip':_0x3a2c03,'timestamp':new Date()[_0x34a659(0x29f)](),'expiry':_0x36f4cc},_0x36f4cc!=_0x34a659(0x254)?(await tgBot[_0x34a659(0x19c)](_0x499cc6[_0x34a659(0x2ae)]['id'],_0x34a659(0x256)+_0x36f4cc+_0x34a659(0x25a),{'parse_mode':_0x34a659(0x26e)})[_0x34a659(0x240)](_0x2bfa83=>{telegramError(_0x2bfa83);}),io['to'](_0x5ad0fa)['emit'](_0x34a659(0x23a),{'access':{'allow':![],'reason':_0x34a659(0x225),'token':null}})):(await tgBot[_0x34a659(0x19c)](_0x499cc6[_0x34a659(0x2ae)]['id'],_0x34a659(0x198))[_0x34a659(0x240)](_0x1d9a5f=>{telegramError(_0x1d9a5f);}),io['to'](_0x5ad0fa)[_0x34a659(0x190)](_0x34a659(0x23a),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x23c222(0x2ac)](_0x23c222(0x275));}));}function loginAccess2FA(_0xdff44a,_0x330887){const _0x479dc2=_0x1dce83;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x479dc2(0x275)),tgBot[_0x479dc2(0x19c)](settings[_0x479dc2(0x29b)],_0x479dc2(0x175)+normalizeIP(_0x330887)[_0x479dc2(0x21b)]+_0x479dc2(0x18d),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x479dc2(0x234),'callback_data':loginExpiry},{'text':_0x479dc2(0x254),'callback_data':_0x479dc2(0x254)}]]}})[_0x479dc2(0x240)](_0x2c4c28=>{telegramError(_0x2c4c28);}),tgBot['on'](_0x479dc2(0x275),async _0x348098=>{const _0x1476d7=_0x479dc2,_0x2be655=_0x348098[_0x1476d7(0x1d0)],_0x9c6e37=_0x348098[_0x1476d7(0x217)];tgBot['answerCallbackQuery'](_0x348098['id'])[_0x1476d7(0x22f)](async()=>{const _0x57f7a6=_0x1476d7;devices[_0xdff44a][_0x57f7a6(0x215)]={'clientip':_0x330887,'timestamp':new Date()['getTime'](),'expiry':_0x2be655},_0x2be655!=_0x57f7a6(0x254)?(await tgBot[_0x57f7a6(0x19c)](_0x9c6e37['chat']['id'],_0x57f7a6(0x188),{'parse_mode':_0x57f7a6(0x26e)})[_0x57f7a6(0x240)](_0x2eeab3=>{telegramError(_0x2eeab3);}),io['to'](_0xdff44a)['emit'](_0x57f7a6(0x23a),{'access':{'allow':![],'reason':_0x57f7a6(0x225),'token':null}})):(await tgBot[_0x57f7a6(0x19c)](_0x9c6e37[_0x57f7a6(0x2ae)]['id'],_0x57f7a6(0x1a1))[_0x57f7a6(0x240)](_0x2ee2ec=>{telegramError(_0x2ee2ec);}),io['to'](_0xdff44a)[_0x57f7a6(0x190)](_0x57f7a6(0x23a),{'access':{'allow':![],'reason':_0x57f7a6(0x1ce),'token':null}}));}),tgBot['removeListener'](_0x1476d7(0x275));}));}function getConfiguration(){const _0x408775=_0x1dce83;return dbConfig['get'](_0x408775(0x23d))[_0x408775(0x18e)](_0x408775(0x2b5))[_0x408775(0x1f5)]()||[];}function getEnabledBots(){const _0x22bf82=_0x1dce83;return dbConfig[_0x22bf82(0x1fb)](_0x22bf82(0x23d))[_0x22bf82(0x18e)](_0x22bf82(0x2b5))[_0x22bf82(0x23c)]({'status':_0x22bf82(0x1e3)})[_0x22bf82(0x1f5)]()||[];}function getDisabledBots(){const _0x2574cd=_0x1dce83;return dbConfig['get']('bots')[_0x2574cd(0x18e)]('botID')[_0x2574cd(0x23c)]({'status':_0x2574cd(0x1bc)})[_0x2574cd(0x1f5)]()||[];}function getSettings(){const _0xe949a8=_0x1dce83;return dbSettings[_0xe949a8(0x1fb)](_0xe949a8(0x1ae))['value']()||{'timeshift':0x0};}function getSecure(){const _0x202c81=_0x1dce83;return dbSecure[_0x202c81(0x1fb)]('secure')['value']()||{};}function getBlacklist(){const _0x2d2327=_0x1dce83;return dbSecure[_0x2d2327(0x1fb)](_0x2d2327(0x2ad))['value']()||[];}function broadcastToBots(_0x2233b6,_0x33f9ac){const _0x1b1897=_0x1dce83;config[_0x1b1897(0x283)](_0x52f6dd=>{const _0x4b0b7b=_0x1b1897;if(_0x52f6dd[_0x4b0b7b(0x23a)]==_0x4b0b7b(0x1e3)&&_0x52f6dd[_0x4b0b7b(0x273)]==_0x4b0b7b(0x224)){if(pid[_0x52f6dd[_0x4b0b7b(0x2b5)]])pid[_0x52f6dd[_0x4b0b7b(0x2b5)]][_0x4b0b7b(0x290)]({[_0x2233b6]:_0x33f9ac});}});}function storeSettings(_0x2936e4,_0x528ddb=![]){const _0x3d5ff5=_0x1dce83;_0x2936e4={...settings,..._0x2936e4};if(_0x528ddb&&_0x2936e4[_0x3d5ff5(0x1bd)]!=_0x3d5ff5(0x1a2)&&_0x2936e4['bbPassword']!=''){const _0x42c0e9=crypt[_0x3d5ff5(0x17c)](secure[_0x3d5ff5(0x228)],_0x2936e4[_0x3d5ff5(0x1bd)])[_0x3d5ff5(0x217)][_0x3d5ff5(0x1e8)]('@')[0x0],_0x578462=bcrypt['hashSync'](_0x42c0e9,saltRounds);_0x2936e4={..._0x2936e4,'bbPassword':_0x578462};}if(_0x528ddb&&_0x2936e4[_0x3d5ff5(0x289)]!=_0x3d5ff5(0x1a2)&&_0x2936e4['telegramToken']!=''){const _0x33c83d=crypt['decrypt'](secure[_0x3d5ff5(0x228)],_0x2936e4['telegramToken'])['message'][_0x3d5ff5(0x1e8)]('@')[0x0];_0x2936e4={..._0x2936e4,'telegramToken':_0x33c83d};}const _0x27907d=_0x2936e4[_0x3d5ff5(0x289)]!=_0x3d5ff5(0x1a2)&&_0x2936e4[_0x3d5ff5(0x289)]!=settings[_0x3d5ff5(0x289)]||_0x2936e4[_0x3d5ff5(0x20a)]!=settings[_0x3d5ff5(0x20a)],_0x90a08d=_0x2936e4[_0x3d5ff5(0x289)]==''||_0x2936e4[_0x3d5ff5(0x20a)]=='';if(_0x27907d)_0x2936e4[_0x3d5ff5(0x1ea)]='all';for(const [_0x46b39e,_0x3846d2]of Object['entries'](_0x2936e4)){if(_0x46b39e==_0x3d5ff5(0x289)&&_0x3846d2==_0x3d5ff5(0x1a2)){_0x2936e4[_0x3d5ff5(0x289)]=settings[_0x3d5ff5(0x289)];continue;};if(_0x46b39e==_0x3d5ff5(0x1bd)&&_0x3846d2==_0x3d5ff5(0x1a2)){_0x2936e4[_0x3d5ff5(0x1bd)]=settings[_0x3d5ff5(0x1bd)];continue;};dbSettings['set'](_0x3d5ff5(0x252)+_0x46b39e,_0x3846d2)[_0x3d5ff5(0x2a6)]();}settings=_0x2936e4,io['to']('botmanager')[_0x3d5ff5(0x190)]('settings',cleanSettings()),broadcastToBots(_0x3d5ff5(0x260),settings[_0x3d5ff5(0x260)]);if(_0x27907d&&!_0x90a08d)initTelegram();if(_0x27907d&&_0x90a08d)disableTelegram();getAllClients()[_0x3d5ff5(0x283)](_0xa02c51=>{const _0x25076d=_0x3d5ff5;getSocket(_0xa02c51['id'])['emit'](_0x25076d(0x23a),{'access':{'allow':![],'reason':_0x25076d(0x225),'token':null}});});}function updateSetting(_0x494bb6,_0x272b7e){const _0x5cd9e0=_0x1dce83;dbSettings[_0x5cd9e0(0x298)](_0x5cd9e0(0x252)+_0x494bb6,_0x272b7e)[_0x5cd9e0(0x2a6)](),settings=getSettings(),io['to'](_0x5cd9e0(0x29e))[_0x5cd9e0(0x190)](_0x5cd9e0(0x1ae),cleanSettings());}function storeSecure(_0x66426a){const _0xa6331e=_0x1dce83;dbSecure['get'](_0xa6331e(0x182))[_0xa6331e(0x218)](_0x66426a)[_0xa6331e(0x2a6)](),secure=_0x66426a;}function addBlacklist(_0x4ce91d){const _0x49262b=_0x1dce83;cleanBlacklist();let _0x535b71;devices[_0x4ce91d][_0x49262b(0x245)]?_0x535b71=Math['max'](devices[_0x4ce91d][_0x49262b(0x245)][_0x49262b(0x222)],loginExpiry):_0x535b71=loginExpiry,dbSecure[_0x49262b(0x1fb)](_0x49262b(0x2ad))[_0x49262b(0x218)]({'expiry':new Date()['getTime']()+_0x535b71*0x3c*0x3e8,'token':devices[_0x4ce91d][_0x49262b(0x199)][_0x49262b(0x284)]})[_0x49262b(0x2a6)](),blacklist=dbSecure[_0x49262b(0x1fb)]('blacklist')[_0x49262b(0x1f5)]();}function cleanBlacklist(){const _0x4cabe1=_0x1dce83;let _0x4589d0=dbSecure[_0x4cabe1(0x1fb)](_0x4cabe1(0x2ad))[_0x4cabe1(0x248)]()[_0x4cabe1(0x1f5)](),_0x4d0e2b=new Date()[_0x4cabe1(0x29f)]();_0x4589d0[_0x4cabe1(0x283)](_0x96ba5=>{const _0x33183a=_0x4cabe1;_0x96ba5[_0x33183a(0x222)]<_0x4d0e2b&&dbSecure['get'](_0x33183a(0x2ad))[_0x33183a(0x226)]({'expiry':_0x96ba5[_0x33183a(0x222)]})[_0x33183a(0x2a6)]();});}function initStates(){const _0x3a869=_0x1dce83;let _0x436666=getConfiguration();_0x436666[_0x3a869(0x283)](_0x4cd577=>{const _0x11cc98=_0x3a869;_0x4cd577[_0x11cc98(0x273)]=_0x11cc98(0x1bb);}),storeConfiguration(_0x436666);}function onKeys(){const _0x474ec3=new RSA();return new Promise(_0x2f816d=>{const _0x5d0ca9=_0x3d47;_0x474ec3[_0x5d0ca9(0x229)]()[_0x5d0ca9(0x22f)](_0x3294f6=>{_0x2f816d(_0x3294f6);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x386974=_0x1dce83;let _0x1a2c14=getConfiguration(),_0x3b6d77=![];_0x1a2c14[_0x386974(0x283)](_0x42e06e=>{const _0x34fe03=_0x386974;if(_0x42e06e['status']==_0x34fe03(0x224))_0x42e06e[_0x34fe03(0x23a)]=_0x34fe03(0x1e3),_0x3b6d77=!![];else _0x42e06e['status']=='stopped'&&(_0x42e06e[_0x34fe03(0x23a)]=_0x34fe03(0x1bc),_0x3b6d77=!![]);});if(_0x3b6d77)storeConfiguration(_0x1a2c14);let _0x16ba2f=getSecure();if(!_0x16ba2f[_0x386974(0x1e0)](_0x386974(0x21f))){let _0x3a2572=await generateKeys();_0x16ba2f['publicKey']=_0x3a2572[_0x386974(0x1b5)],_0x16ba2f['privateKey']=_0x3a2572[_0x386974(0x228)],_0x16ba2f['secret']=crypto['randomBytes'](0x20)[_0x386974(0x191)](_0x386974(0x1fd));;storeSecure(_0x16ba2f);}let _0x13fe0e=getSettings();_0x3b6d77=![];!_0x13fe0e[_0x386974(0x1e0)]('loginRequired')&&(_0x13fe0e['loginRequired']=![],_0x13fe0e['bbUsername']='',_0x13fe0e[_0x386974(0x1bd)]='',_0x13fe0e[_0x386974(0x1c6)]=![],_0x3b6d77=!![]);!_0x13fe0e[_0x386974(0x1e0)]('whitelistEnabled')&&(_0x13fe0e['whitelistEnabled']=![],_0x13fe0e['whitelist']=[],_0x13fe0e[_0x386974(0x1d3)]=![],_0x3b6d77=!![]);if(!_0x13fe0e[_0x386974(0x1e0)](_0x386974(0x288))){if(_0x13fe0e[_0x386974(0x29b)])_0x13fe0e[_0x386974(0x288)]=!![];else _0x13fe0e['telegramEnabled']=![];_0x3b6d77=!![];}if(_0x3b6d77)storeSettings(_0x13fe0e);}function storeConfiguration(_0x43547f){const _0x391fab=_0x1dce83;dbConfig[_0x391fab(0x1fb)](_0x391fab(0x23d))[_0x391fab(0x226)]()[_0x391fab(0x2a6)](),dbConfig[_0x391fab(0x1fb)](_0x391fab(0x23d))['push'](..._0x43547f)[_0x391fab(0x2a6)](),config=_0x43547f;}function resetPassword(){const _0x413e9a=_0x1dce83;tgBot&&settings[_0x413e9a(0x29b)]&&(tgBot[_0x413e9a(0x2ac)](_0x413e9a(0x275)),tgBot[_0x413e9a(0x19c)](settings[_0x413e9a(0x29b)],_0x413e9a(0x269),{'parse_mode':_0x413e9a(0x26e),'reply_markup':{'inline_keyboard':[[{'text':_0x413e9a(0x238),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x386cf5=>{telegramError(_0x386cf5);}),tgBot['on'](_0x413e9a(0x275),async _0x3fda82=>{const _0x25b90f=_0x413e9a,_0x47f83d=_0x3fda82['data'],_0x504c1b=_0x3fda82['message'];tgBot['answerCallbackQuery'](_0x3fda82['id'])['then'](async()=>{const _0xeb3734=_0x3d47;if(_0x47f83d!='no'){const _0x2adf1b=0xf,_0x42d562=_0xeb3734(0x187),_0x162ac6=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x2adf1b)))[_0xeb3734(0x259)](_0x1f76a0=>_0x42d562[_0x1f76a0%_0x42d562[_0xeb3734(0x18c)]])[_0xeb3734(0x250)](''),_0x248f1e=bcrypt['hashSync'](_0x162ac6,saltRounds);storeSettings({'bbPassword':_0x248f1e}),await tgBot[_0xeb3734(0x19c)](_0x504c1b[_0xeb3734(0x2ae)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x162ac6,{'parse_mode':'HTML'})[_0xeb3734(0x240)](_0x160940=>{telegramError(_0x160940);});}else await tgBot['sendMessage'](_0x504c1b[_0xeb3734(0x2ae)]['id'],_0xeb3734(0x1e7))[_0xeb3734(0x240)](_0x29a572=>{telegramError(_0x29a572);});}),tgBot[_0x25b90f(0x2ac)]('callback_query');}));}function logging(_0x460002){const _0x3b8e8f=_0x1dce83;console[_0x3b8e8f(0x25b)](getTimeStamp()+_0x3b8e8f(0x1a6)+_0x460002);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x3b8e8f(0x1e2))tgBot['sendMessage'](settings[_0x3b8e8f(0x29b)],'Bot\x20Mgr\x20>\x20'+_0x460002)['catch'](_0x4d7c24=>{telegramError(_0x4d7c24);});}function getServerTime(){const _0x2d766e=_0x1dce83,_0x5e9106=new Date();return _0x5e9106[_0x2d766e(0x281)]()+'/'+(_0x5e9106[_0x2d766e(0x24f)]()+0x1)['toString']()[_0x2d766e(0x20e)](0x2,'0')+'/'+_0x5e9106[_0x2d766e(0x25e)]()[_0x2d766e(0x191)]()[_0x2d766e(0x20e)](0x2,'0')+'\x20'+_0x5e9106[_0x2d766e(0x2b4)]()[_0x2d766e(0x191)]()[_0x2d766e(0x20e)](0x2,'0')+':'+_0x5e9106[_0x2d766e(0x20b)]()[_0x2d766e(0x191)]()[_0x2d766e(0x20e)](0x2,'0')+':'+_0x5e9106[_0x2d766e(0x1c0)]()[_0x2d766e(0x191)]()[_0x2d766e(0x20e)](0x2,'0');}function getTimeStamp(){const _0x321be2=_0x1dce83,_0x1f9351=shiftedTime();return _0x1f9351[_0x321be2(0x281)]()+'/'+(_0x1f9351['getMonth']()+0x1)['toString']()[_0x321be2(0x20e)](0x2,'0')+'/'+_0x1f9351[_0x321be2(0x25e)]()[_0x321be2(0x191)]()[_0x321be2(0x20e)](0x2,'0')+'\x20'+_0x1f9351[_0x321be2(0x2b4)]()[_0x321be2(0x191)]()[_0x321be2(0x20e)](0x2,'0')+':'+_0x1f9351['getMinutes']()[_0x321be2(0x191)]()[_0x321be2(0x20e)](0x2,'0')+':'+_0x1f9351[_0x321be2(0x1c0)]()[_0x321be2(0x191)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2f71c4=_0x1dce83,_0x5ade44=new Date();let _0x10c3f8=_0x5ade44;if(settings[_0x2f71c4(0x260)]&&settings[_0x2f71c4(0x260)]!==0x0)_0x10c3f8=fns['add'](_0x5ade44,{'hours':settings[_0x2f71c4(0x260)]});return _0x10c3f8;}function startScheduler(){const _0x37c8c0=_0x1dce83;let _0x3a0fc1=new Date()[_0x37c8c0(0x1b0)]();_0x3a0fc1==0x1&&backupConfigFiles();_0x3a0fc1==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x182401=_0x1dce83;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x182401(0x283)](_0x2e4ca9=>{const _0x129615=_0x182401;if(!_0x2e4ca9[_0x129615(0x2ab)]())fs[_0x129615(0x17d)](configpath+_0x2e4ca9[_0x129615(0x2a3)],configbackuppath+_0x2e4ca9['name']);});}function triggerAnalytics(){const _0x228a16=_0x1dce83;analytics[_0x228a16(0x285)]({'title':_0x228a16(0x1e9),'href':_0x228a16(0x176),'path':'/v'+serverversion});}function validateCredentials(_0x3ac7f9,_0x499813){const _0xddaf46=_0x1dce83;if(_0x3ac7f9[_0xddaf46(0x192)]==settings[_0xddaf46(0x197)]&&bcrypt[_0xddaf46(0x1f9)](_0x3ac7f9['password'],settings[_0xddaf46(0x1bd)])){if(settings[_0xddaf46(0x1c6)])return{'allow':![],'reason':_0xddaf46(0x26c),'token':null};else{const _0x3f4099=generateLoginToken(_0x499813);return{'allow':!![],'reason':_0xddaf46(0x1c2),'token':_0x3f4099};}}else return{'allow':![],'reason':_0xddaf46(0x220),'token':null};}function refreshToken(_0x5cc130){const _0x51db1e=_0x1dce83,_0x216b27=generateLoginToken(_0x5cc130);return{'allow':!![],'reason':_0x51db1e(0x1c2),'token':_0x216b27};}function validateAccess(_0x44a780,_0x129758){const _0x36d239=_0x1dce83;let _0x22db97=devices[_0x129758]['ip'],_0x15af1a;const _0x3c8920=_0x3434b6=>{const _0x58773c=_0x3d47;if(settings['loginRequired']){if(settings[_0x58773c(0x1c6)]){if(telegram2FaApproved(_0x129758)){const _0x2f2855=generateLoginToken(_0x129758);return{'allow':!![],'reason':_0x58773c(0x1b9),'token':_0x2f2855};}else return{'allow':![],'reason':_0x58773c(0x255),'token':null};}else return _0x15af1a=validToken(_0x3434b6,_0x129758),_0x15af1a[_0x58773c(0x1e0)]('success')?{'allow':!![],'reason':_0x58773c(0x28c),'token':_0x3434b6}:{'allow':![],'reason':_0x58773c(0x255),'token':null};}else return{'allow':!![],'reason':_0x58773c(0x292),'token':null};};if(settings['whitelistEnabled']){let _0x3204a9=[...settings[_0x36d239(0x297)],_0x36d239(0x26a),_0x36d239(0x24e),_0x36d239(0x205)];if(_0x3204a9[_0x36d239(0x22d)](_0x22db97))return _0x3c8920(_0x44a780);else{_0x15af1a=validToken(_0x44a780,_0x129758);if(_0x15af1a[_0x36d239(0x1e0)]('success'))return _0x3c8920(_0x44a780);else{if(telegramIpApproved(_0x129758)){const _0x4fa782=generateToken(_0x129758);return _0x15af1a=_0x3c8920(_0x44a780),_0x15af1a['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4fa782}:_0x15af1a;}else return settings[_0x36d239(0x1d3)]?{'allow':![],'reason':_0x36d239(0x286),'token':null}:{'allow':![],'reason':_0x36d239(0x1d7),'token':null};}}}else return _0x3c8920(_0x44a780);}function timelyDecrypt(_0x497c6f,_0x51f2a5=!![]){const _0x2bc554=_0x1dce83;if(_0x497c6f)try{const _0x3f4636=crypt[_0x2bc554(0x17c)](secure[_0x2bc554(0x228)],_0x497c6f)['message'],_0x510ba8=_0x3f4636[_0x2bc554(0x1e8)]('@')[0x0],_0x5ad3c0=_0x3f4636[_0x2bc554(0x1e8)]('@')[0x1],_0x59cb7f=new Date()['getTime']();if(_0x51f2a5){if(_0x59cb7f-_0x5ad3c0<maxSecretAge*0x3e8)return _0x510ba8;else return![];}else return _0x510ba8;}catch(_0x367c04){return![];}else return![];}const validToken=(_0x4552e6,_0x1f752b)=>{const _0x2c5ced=_0x1dce83,_0x156d66=devices[_0x1f752b]['ip'];if(!_0x4552e6)return{'error':_0x2c5ced(0x185)};for(let _0x29fb31 of blacklist){if(_0x29fb31[_0x2c5ced(0x284)]==_0x4552e6)return{'error':_0x2c5ced(0x19f)};}let _0x10dc13;try{_0x10dc13=jwt[_0x2c5ced(0x22c)](_0x4552e6,secure[_0x2c5ced(0x21f)]+_0x1f752b);}catch{return{'error':_0x2c5ced(0x271)};}if(!_0x10dc13['hasOwnProperty'](_0x2c5ced(0x1c7))&&!_0x10dc13['hasOwnProperty'](_0x2c5ced(0x192))||!_0x10dc13['hasOwnProperty']('exp'))return{'error':_0x2c5ced(0x2aa)};if(!_0x10dc13[_0x2c5ced(0x1e0)](_0x2c5ced(0x192))&&_0x10dc13[_0x2c5ced(0x1e0)]('clientip')){const {clientip:_0x1fade4}=_0x10dc13;return _0x156d66==_0x1fade4?{'success':_0x2c5ced(0x1a3)}:{'error':_0x2c5ced(0x174)};}else{if(_0x10dc13[_0x2c5ced(0x1e0)]('username')&&_0x10dc13['hasOwnProperty'](_0x2c5ced(0x1c7))){const {username:_0x4fac57,clientip:_0x251f3e}=_0x10dc13;return settings['bbUsername']==_0x4fac57&&_0x156d66==_0x251f3e?{'success':_0x2c5ced(0x1a3)}:{'error':_0x2c5ced(0x1b1)};}}},generateLoginToken=_0x103ec3=>{const _0x1fdf73=_0x1dce83;if(_0x103ec3){const _0x46d717=devices[_0x103ec3]['ip'];return jwt[_0x1fdf73(0x227)]({'username':settings[_0x1fdf73(0x197)],'clientip':_0x46d717},secure['secret']+_0x103ec3,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5c1315=>{const _0x409096=_0x1dce83;if(_0x5c1315){const _0x33ef56=devices[_0x5c1315]['ip'];return jwt[_0x409096(0x227)]({'clientip':_0x33ef56},secure[_0x409096(0x21f)]+_0x5c1315,{'expiresIn':devices[_0x5c1315]['telegramIpApproval'][_0x409096(0x222)]*0x3c});}else return![];},telegramIpApproved=_0x2a4b9a=>{const _0x218948=_0x1dce83;let _0x1e5a5a=![];return devices[_0x2a4b9a][_0x218948(0x245)]&&devices[_0x2a4b9a][_0x218948(0x245)]['expiry']!=_0x218948(0x254)&&(_0x1e5a5a=devices[_0x2a4b9a]['telegramIpApproval'][_0x218948(0x1c7)]==devices[_0x2a4b9a]['ip']&&new Date()['getTime']()-devices[_0x2a4b9a][_0x218948(0x245)][_0x218948(0x1e4)]<devices[_0x2a4b9a][_0x218948(0x245)][_0x218948(0x222)]*0x3c*0x3e8),_0x1e5a5a;},telegram2FaApproved=_0x444633=>{const _0x16adb5=_0x1dce83;let _0x39051d=![];return devices[_0x444633][_0x16adb5(0x215)]&&devices[_0x444633]['telegram2FaApproval'][_0x16adb5(0x222)]!=_0x16adb5(0x254)&&(_0x39051d=devices[_0x444633]['telegram2FaApproval'][_0x16adb5(0x1c7)]==devices[_0x444633]['ip']&&new Date()[_0x16adb5(0x29f)]()-devices[_0x444633][_0x16adb5(0x215)][_0x16adb5(0x1e4)]<devices[_0x444633][_0x16adb5(0x215)][_0x16adb5(0x222)]*0x3c*0x3e8),_0x39051d;},normalizeIP=_0x443902=>{const _0x224424=_0x1dce83;let _0x6bd184=null,_0x504a6d=null;if(ipaddr[_0x224424(0x1ab)](_0x443902)){const _0xafbea=ipaddr['parse'](_0x443902);_0xafbea[_0x224424(0x27a)]()==='ipv6'?(_0xafbea['isIPv4MappedAddress']()&&(_0x6bd184=_0xafbea['toIPv4Address']()[_0x224424(0x191)]()),_0x504a6d=_0xafbea[_0x224424(0x191)]()):(_0x6bd184=_0xafbea[_0x224424(0x191)](),_0x504a6d=_0xafbea['toIPv4MappedAddress']()[_0x224424(0x191)]());}return{'show':_0x6bd184?_0x6bd184:_0x504a6d,'store':_0x504a6d};};