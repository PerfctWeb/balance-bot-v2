const _0x28fc27=_0xb44b;(function(_0x317475,_0x238a70){const _0x190c97=_0xb44b,_0x5ae137=_0x317475();while(!![]){try{const _0x35e816=parseInt(_0x190c97(0x36d))/0x1*(parseInt(_0x190c97(0x330))/0x2)+parseInt(_0x190c97(0x359))/0x3*(-parseInt(_0x190c97(0x2f9))/0x4)+-parseInt(_0x190c97(0x246))/0x5*(parseInt(_0x190c97(0x1fc))/0x6)+-parseInt(_0x190c97(0x152))/0x7*(parseInt(_0x190c97(0x224))/0x8)+-parseInt(_0x190c97(0x21e))/0x9+-parseInt(_0x190c97(0x1e4))/0xa+parseInt(_0x190c97(0x177))/0xb*(parseInt(_0x190c97(0x215))/0xc);if(_0x35e816===_0x238a70)break;else _0x5ae137['push'](_0x5ae137['shift']());}catch(_0x42ab09){_0x5ae137['push'](_0x5ae137['shift']());}}}(_0x219f,0x537c3));const _0x1dcec2=function(){let _0x221a54=!![];return function(_0x4b9760,_0x2bedb6){const _0x4abefa=_0x221a54?function(){const _0x15c0d0=_0xb44b;if(_0x2bedb6){const _0x50a149=_0x2bedb6[_0x15c0d0(0x292)](_0x4b9760,arguments);return _0x2bedb6=null,_0x50a149;}}:function(){};return _0x221a54=![],_0x4abefa;};}(),_0x3ed318=_0x1dcec2(this,function(){const _0x1c9c97=_0xb44b;return _0x3ed318[_0x1c9c97(0x1e5)]()['search'](_0x1c9c97(0x2b8))[_0x1c9c97(0x1e5)]()[_0x1c9c97(0x1e6)](_0x3ed318)[_0x1c9c97(0x343)](_0x1c9c97(0x2b8));});_0x3ed318();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x28fc27(0x25a)),fs=require('fs'),fns=require(_0x28fc27(0x1a4)),low=require(_0x28fc27(0x150)),FileSync=require(_0x28fc27(0x277)),path=require(_0x28fc27(0x2a8)),crypto=require('crypto'),forge=require(_0x28fc27(0x21f)),bcrypt=require(_0x28fc27(0x176)),jwt=require(_0x28fc27(0x345)),ipaddr=require(_0x28fc27(0x213)),argv=require(_0x28fc27(0x233))(process['argv'][_0x28fc27(0x162)](0x2))[_0x28fc27(0x1b6)],uuidRandom=require(_0x28fc27(0x165)),{Telegraf,Markup}=require(_0x28fc27(0x32d)),Mixpanel=require(_0x28fc27(0x17f)),axios=require('axios'),{GraphQLClient,gql}=require(_0x28fc27(0x289)),util=require(_0x28fc27(0x2e9)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x28fc27(0x255)),PORT=argv[_0x28fc27(0x349)]||_0x28fc27(0x2e2),pattern=/^[0-9]{2,4}$/;!pattern[_0x28fc27(0x34e)](PORT)&&(console[_0x28fc27(0x229)](_0x28fc27(0x245)+PORT+_0x28fc27(0x29d)),process[_0x28fc27(0x30c)](0x1));const HOST=argv[_0x28fc27(0x209)]||null,userID=argv[_0x28fc27(0x232)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x28fc27(0x270)];let bbpath=_0x28fc27(0x1a2),bbpath2='';const botfile=_0x28fc27(0x20e),configfile=_0x28fc27(0x22d),settingsfile='bb-settings.json',securefile='bb-secure.json',environment=require('./'+bbpath2+_0x28fc27(0x354))[_0x28fc27(0x1a6)]||_0x28fc27(0x28d),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x28fc27(0x2af)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x28fc27(0x171)+userID+'/':bbpath+_0x28fc27(0x171),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x28fc27(0x205)+userID+'/':bbpath+_0x28fc27(0x205),zippath=userID?bbpath+_0x28fc27(0x293)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x28fc27(0x1db)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x28fc27(0x201)+userID+'/':bbpath+_0x28fc27(0x201);!fs['existsSync'](configpath)&&fs[_0x28fc27(0x33f)](configpath);!fs[_0x28fc27(0x2af)](configbackuppath)&&fs[_0x28fc27(0x33f)](configbackuppath);!fs[_0x28fc27(0x2af)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x28fc27(0x2af)](zippath)&&fs[_0x28fc27(0x33f)](zippath);!fs['existsSync'](temppath)&&fs[_0x28fc27(0x33f)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x28fc27(0x2ab)]({'bots':[]})[_0x28fc27(0x186)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x28fc27(0x2ab)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x28fc27(0x1d5),'onepagemode':![],'marketcapApi':''}})[_0x28fc27(0x186)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x28fc27(0x2ab)]({'secure':{},'blacklist':[]})[_0x28fc27(0x186)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x28fc27(0x24c)](_0x28fc27(0x15e),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x28fc27(0x25f)]&&(settings[_0x28fc27(0x25f)]!=''&&settings[_0x28fc27(0x25f)]!=_0x28fc27(0x28b))&&settings[_0x28fc27(0x164)]&&settings[_0x28fc27(0x164)]!='')initTelegram();const parseColor=(_0x58962c,_0x2b59bf)=>{const _0x26a613=_0x28fc27,_0x4f4f63=/#[A-Z]{3}#/g;if(typeof _0x58962c==_0x26a613(0x28c)){!_0x2b59bf?_0x58962c=_0x58962c[_0x26a613(0x181)](_0x4f4f63,''):(_0x58962c=_0x58962c[_0x26a613(0x181)](/#BLU#/g,_0x26a613(0x346)),_0x58962c=_0x58962c[_0x26a613(0x181)](/#RED#/g,_0x26a613(0x350)),_0x58962c=_0x58962c['replace'](/#YEL#/g,'\x1b[33m'),_0x58962c=_0x58962c[_0x26a613(0x181)](/#MAG#/g,_0x26a613(0x29b)),_0x58962c=_0x58962c['replace'](/#CYA#/g,_0x26a613(0x16b)),_0x58962c=_0x58962c['replace'](/#RES#/g,'\x1b[0m'));;}return _0x58962c;},logger={'screen':_0x207e87=>{console['log'](parseColor(_0x207e87,!![]));},'simple':_0x506e77=>{const _0x33b89d=_0x28fc27;console['log'](parseColor(_0x506e77,!![])),loggerfile[_0x33b89d(0x186)](util['format'](parseColor(_0x506e77,![]))+'\x0a');},'full':async _0x3a07a9=>{const _0x30c1b1=_0x28fc27,_0x4b91b=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x3a07a9;console[_0x30c1b1(0x229)](parseColor(_0x4b91b,!![])),loggerfile[_0x30c1b1(0x186)](util['format'](parseColor(_0x4b91b,![]))+'\x0a');if(tgBot&&settings[_0x30c1b1(0x23a)]&&settings['telegramEvents']!='orders')await sendTelegram(settings[_0x30c1b1(0x23a)],_0x30c1b1(0x2a3)+parseColor(_0x3a07a9,![]));},'debug':async(_0x30219b,_0x2b8fd2='')=>{const _0x37268c=_0x28fc27,_0x2a1d7d=getTimeStamp()+_0x37268c(0x31e)+_0x30219b;if(debugging)console[_0x37268c(0x229)](parseColor(_0x2a1d7d,!![]));loggerfile[_0x37268c(0x186)](util[_0x37268c(0x1a8)](parseColor(_0x2a1d7d,![]))+'\x0a');if(_0x2b8fd2){if(debugging)console[_0x37268c(0x229)](_0x2b8fd2);loggerfile[_0x37268c(0x186)](util[_0x37268c(0x1a8)](_0x2b8fd2)+'\x0a');}}};let terminating=![];process['on'](_0x28fc27(0x339),function(_0x50a633){const _0x27e679=_0x28fc27;_0x50a633[_0x27e679(0x1e5)]()[_0x27e679(0x20c)](_0x27e679(0x226))?(logger['simple'](_0x27e679(0x300)+_0x50a633['port']+_0x27e679(0x335)),process[_0x27e679(0x2b6)]({'terminate':!![]},_0x3c623d=>{})):logger['simple'](_0x50a633);}),process['on']('exit',()=>{const _0x4665a7=_0x28fc27;stopAllBots(),process[_0x4665a7(0x30c)](0x0);}),process['on'](_0x28fc27(0x1f5),()=>{stopAllBots(),process['exit'](0x0);}),process['on']('SIGINT',()=>{const _0x41fcaf=_0x28fc27;stopAllBots(),process[_0x41fcaf(0x30c)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x28fc27(0x354))[_0x28fc27(0x19b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x28fc27(0x278)),app=express(),http=require(_0x28fc27(0x272))[_0x28fc27(0x302)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x28fc27(0x18e),async(_0x298de0,_0x5c5459)=>{const _0x2a838c=_0x28fc27,_0x4bd944=_0x298de0[_0x2a838c(0x1dc)]['type'],_0x43c012=getClientsWithBotID(_0x2a838c(0x2eb)),_0x1e8e16=_0x298de0[_0x2a838c(0x187)][_0x2a838c(0x1bc)],_0x231fea=timelyDecrypt(_0x1e8e16,![]),_0x43fb6c=_0x43c012[_0x2a838c(0x1a3)](_0x4f4c72=>_0x4f4c72[_0x2a838c(0x1bc)]==_0x231fea);if(_0x43fb6c){const _0x585a14=normalizeIP(_0x298de0[_0x2a838c(0x190)][_0x2a838c(0x1d9)])[_0x2a838c(0x25b)],_0x290a1d=_0x298de0[_0x2a838c(0x187)][_0x2a838c(0x2e3)];if(validateAccess(_0x290a1d,_0x231fea,_0x585a14)[_0x2a838c(0x1c1)])_0x4bd944==_0x2a838c(0x27a)&&await backupConfigFiles(),await zipFiles(_0x4bd944),_0x5c5459[_0x2a838c(0x1cd)](zippath+(_0x4bd944+_0x2a838c(0x22a)),_0x135159=>{const _0xf126dd=_0x2a838c;_0x135159&&(logger[_0xf126dd(0x22c)](_0xf126dd(0x2c9)+_0x4bd944),logger[_0xf126dd(0x298)](_0x135159));});else logger['full'](_0x2a838c(0x1df)+_0x4bd944+_0x2a838c(0x21b));}else logger[_0x2a838c(0x22c)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4bd944+'\x20(2)');}),app[_0x28fc27(0x342)]('/upload-backup',async(_0x298f5a,_0x546bd8)=>{const _0x1a3f68=_0x28fc27,_0x24577b=getClientsWithBotID(_0x1a3f68(0x2eb)),_0x4539c9=_0x298f5a['headers'][_0x1a3f68(0x1bc)],_0x273dcd=timelyDecrypt(_0x4539c9,![]),_0x5e459e=_0x24577b['find'](_0x4596ca=>_0x4596ca[_0x1a3f68(0x1bc)]==_0x273dcd);logger['debug']('Backup\x20file\x20uploaded');if(_0x5e459e){const _0x251190=normalizeIP(_0x298f5a['socket'][_0x1a3f68(0x1d9)])[_0x1a3f68(0x25b)],_0x40179a=_0x298f5a[_0x1a3f68(0x187)][_0x1a3f68(0x2e3)];if(validateAccess(_0x40179a,_0x273dcd,_0x251190)[_0x1a3f68(0x1c1)]){if(_0x298f5a[_0x1a3f68(0x238)]){const _0x361683=_0x298f5a[_0x1a3f68(0x238)][_0x1a3f68(0x33e)];await _0x361683['mv'](temppath+_0x361683[_0x1a3f68(0x2f7)]),_0x546bd8[_0x1a3f68(0x2b6)]({'status':!![],'message':_0x1a3f68(0x17e)});const _0x1f7192=getBotsWithMode();_0x1f7192[_0x1a3f68(0x284)]>0x0?confirmRestore(temppath,_0x361683['name']):unzipFile(temppath,_0x361683[_0x1a3f68(0x2f7)]);}}else logger[_0x1a3f68(0x22c)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1a3f68(0x22c)](_0x1a3f68(0x328));}),app[_0x28fc27(0x2f4)](express[_0x28fc27(0x304)](path[_0x28fc27(0x2ca)](__dirname,bbpath2,_0x28fc27(0x2aa)))),app[_0x28fc27(0x2f4)](express[_0x28fc27(0x304)](path[_0x28fc27(0x2ca)](__dirname,bbpath2,_0x28fc27(0x26c)))),app[_0x28fc27(0x36c)]('/',function(_0x2c4bfa,_0x4e54a6){const _0x7a5e5=_0x28fc27;_0x4e54a6[_0x7a5e5(0x30e)](path['join'](__dirname,bbpath2,'build2',_0x7a5e5(0x225)));}),app[_0x28fc27(0x36c)]('/:bot',function(_0x14027f,_0x40e765){const _0x67d7d7=_0x28fc27;_0x40e765[_0x67d7d7(0x30e)](path[_0x67d7d7(0x2ca)](__dirname,bbpath2,_0x67d7d7(0x26c),_0x67d7d7(0x225)));}),app[_0x28fc27(0x36c)](_0x28fc27(0x2fb),(_0x45c29c,_0x350b2c)=>{const _0x423364=_0x28fc27;_0x350b2c[_0x423364(0x30e)](path[_0x423364(0x2ca)](__dirname,bbpath2,_0x423364(0x26c),'index.html'));}),app[_0x28fc27(0x36c)](_0x28fc27(0x179),(_0x33845a,_0x1ccde0)=>{const _0x1ecec4=_0x28fc27;_0x1ccde0[_0x1ecec4(0x30e)](path['join'](__dirname,bbpath2,_0x1ecec4(0x26c),_0x1ecec4(0x225)));}),app[_0x28fc27(0x36c)](_0x28fc27(0x329),(_0x3c3ad6,_0x522547)=>{const _0x47a88e=_0x28fc27;_0x522547[_0x47a88e(0x30e)](path[_0x47a88e(0x2ca)](__dirname,bbpath2,_0x47a88e(0x26c),'index.html'));}),app[_0x28fc27(0x36c)](_0x28fc27(0x184),(_0x42149c,_0x5f1708)=>{const _0x1c1ce3=_0x28fc27;_0x5f1708[_0x1c1ce3(0x30e)](path[_0x1c1ce3(0x2ca)](__dirname,bbpath2,_0x1c1ce3(0x26c),'index.html'));}),app['get']('/:bot/configuration',(_0x2ab2da,_0x5b55c4)=>{const _0x37eac7=_0x28fc27;_0x5b55c4['sendFile'](path[_0x37eac7(0x2ca)](__dirname,bbpath2,'build',_0x37eac7(0x225)));}),app[_0x28fc27(0x36c)](_0x28fc27(0x19d),(_0x596629,_0x10597e)=>{const _0xee33b9=_0x28fc27;_0x10597e[_0xee33b9(0x30e)](path[_0xee33b9(0x2ca)](__dirname,bbpath2,'build',_0xee33b9(0x225)));});if(HOST)http[_0x28fc27(0x2d2)](PORT,HOST);else http[_0x28fc27(0x2d2)](PORT);const io=require(_0x28fc27(0x2a6))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2135a5=_0x28fc27;let _0x10d1ec=_0x2135a5(0x30f);const _0x57ce04=networkInterfaces(),_0x34db82={};for(const _0x393cbb of Object[_0x2135a5(0x2fc)](_0x57ce04)){for(const _0x43d1bb of _0x57ce04[_0x393cbb]){if((_0x43d1bb['family']==_0x2135a5(0x249)||_0x43d1bb['family']==0x4)&&!_0x43d1bb[_0x2135a5(0x27f)]){const _0x3bf81e=ipaddr[_0x2135a5(0x17b)](_0x43d1bb['address'])[_0x2135a5(0x2cf)]();_0x3bf81e!=_0x2135a5(0x252)&&(!_0x34db82[_0x393cbb]&&(_0x34db82[_0x393cbb]=[]),_0x34db82[_0x393cbb]['push'](_0x43d1bb[_0x2135a5(0x2bd)]),_0x10d1ec=_0x43d1bb['address']);}}}return{'serverip':_0x10d1ec,'netinterfaces':_0x34db82};}async function startServer(){const _0x284fb6=_0x28fc27,{serverip:_0x357f18,netinterfaces:_0x1c67d3}=getServerIP();logger['simple'](''),logger[_0x284fb6(0x298)](_0x284fb6(0x1f2)),await logger[_0x284fb6(0x22c)](_0x284fb6(0x2ac)+serverversion+_0x284fb6(0x19f)+(environment=='staging'?_0x284fb6(0x2cd):'')+'\x0a'+(_0x284fb6(0x15a)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x284fb6(0x260)+_0x357f18+':'+PORT+_0x284fb6(0x2a1))),logger[_0x284fb6(0x298)](_0x284fb6(0x1f2));if(config[_0x284fb6(0x284)]!=0x0)for(const _0x1e2ba5 of config){const _0x3541b0=_0x1e2ba5[_0x284fb6(0x2bf)]==_0x284fb6(0x341)?'a':'m';if(_0x1e2ba5[_0x284fb6(0x1e9)]==_0x284fb6(0x352)||_0x1e2ba5[_0x284fb6(0x1e9)]=='new')await logger['full']('Starting\x20('+_0x3541b0+_0x284fb6(0x357)+_0x1e2ba5[_0x284fb6(0x206)]+_0x284fb6(0x1ab)+_0x1e2ba5[_0x284fb6(0x2dd)]),startBot([_0x1e2ba5['botID'],userID],{'cwd':bbpath},function(_0x34bbb6){const _0x405d3a=_0x284fb6;if(_0x34bbb6)logger[_0x405d3a(0x22c)](_0x34bbb6);});else(_0x1e2ba5[_0x284fb6(0x1e9)]==_0x284fb6(0x1f3)||_0x1e2ba5[_0x284fb6(0x1e9)]=='new-disabled')&&await logger['full']('Idling\x20('+_0x3541b0+_0x284fb6(0x2cb)+_0x1e2ba5[_0x284fb6(0x206)]+'\x20|\x20'+_0x1e2ba5['botname']);}else!newBot&&logger[_0x284fb6(0x298)](_0x284fb6(0x2b5));if(newBot)addBot();logger['simple'](_0x284fb6(0x1f2)),logger[_0x284fb6(0x298)](''),await logger[_0x284fb6(0x35d)](_0x284fb6(0x1b9)+nodeversion),await logger[_0x284fb6(0x35d)](_0x284fb6(0x19e),_0x1c67d3);}function startSocket(){const _0x48b9f1=_0x28fc27;io['on'](_0x48b9f1(0x170),_0x2bd341=>{const _0x76aced=_0x48b9f1;let _0x370ac7,_0x1e6128,_0x482cf8,_0x5ae5a6,_0x24e912;const _0x25700c=_0x2bd341[_0x76aced(0x313)]['headers'][_0x76aced(0x2ba)];_0x1e6128=_0x25700c[_0x76aced(0x198)](/bot[0-9]{3}/);if(_0x1e6128)_0x482cf8=_0x1e6128[0x0][_0x76aced(0x198)](/[0-9]{3}/);if(_0x482cf8)_0x370ac7=_0x482cf8[0x0];else _0x370ac7=_0x76aced(0x2eb);const _0x58fb09=_0x2bd341[_0x76aced(0x313)]['auth']['encryptedUuid'];if(!_0x58fb09)_0x2bd341[_0x76aced(0x338)]('status',{'publicKey':secure[_0x76aced(0x17a)]});else{_0x5ae5a6=timelyDecrypt(_0x58fb09,![]);if(!_0x5ae5a6)_0x2bd341['emit']('status',{'publicKey':secure[_0x76aced(0x17a)]});else{_0x24e912=normalizeIP(_0x2bd341[_0x76aced(0x264)]['remoteAddress'])[_0x76aced(0x25b)];if(!devices[_0x5ae5a6])devices[_0x5ae5a6]={'uuid':_0x5ae5a6,'access':{'token':null}};devices[_0x5ae5a6]['ip']=_0x24e912;const _0x13bbf6=addClient(_0x2bd341['id'],_0x5ae5a6,_0x370ac7);setAccess(_0x13bbf6),emitMessages(),_0x2bd341['on'](_0x76aced(0x180),_0x2af1d9=>{const _0x9e361d=_0x76aced,_0x45392d=timelyDecrypt(_0x2af1d9[_0x9e361d(0x1d3)],!![],_0x9e361d(0x295));if(_0x45392d){_0x2af1d9={'username':_0x2af1d9[_0x9e361d(0x2c0)],'password':_0x45392d},devices[_0x5ae5a6][_0x9e361d(0x29c)]=validateCredentials(_0x2af1d9,_0x5ae5a6);if(devices[_0x5ae5a6][_0x9e361d(0x29c)][_0x9e361d(0x1c1)]==![]&&devices[_0x5ae5a6][_0x9e361d(0x29c)][_0x9e361d(0x2b0)]==_0x9e361d(0x248))_0x2bd341[_0x9e361d(0x338)](_0x9e361d(0x1e9),{'access':devices[_0x5ae5a6][_0x9e361d(0x29c)]}),loginAccess2FA(_0x5ae5a6,_0x24e912);else{if(devices[_0x5ae5a6][_0x9e361d(0x29c)][_0x9e361d(0x1c1)]==![]&&devices[_0x5ae5a6][_0x9e361d(0x29c)]['reason']==_0x9e361d(0x24b))_0x2bd341[_0x9e361d(0x338)]('status',{'access':devices[_0x5ae5a6]['access']});else devices[_0x5ae5a6]['access'][_0x9e361d(0x1c1)]&&devices[_0x5ae5a6]['access']['reason']==_0x9e361d(0x26d)&&(getClientsWithUuid(_0x5ae5a6)['forEach'](_0x33bae7=>{setAccess(_0x33bae7);}),logger[_0x9e361d(0x35d)](_0x9e361d(0x2c6)+_0x5ae5a6[_0x9e361d(0x162)](-0x8)),setTokenRefresh(_0x5ae5a6),setSessionTimeout('login',_0x5ae5a6));}}else logger[_0x9e361d(0x22c)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x2bd341['on'](_0x76aced(0x36b),()=>{resetPassword();}),_0x2bd341['on']('disconnect',_0x12d11a=>{removeClient(_0x2bd341['id']);}),_0x370ac7=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function _0xb44b(_0x16e73b,_0x4ffd13){const _0x2b260c=_0x219f();return _0xb44b=function(_0x3ed318,_0x1dcec2){_0x3ed318=_0x3ed318-0x150;let _0x219f8e=_0x2b260c[_0x3ed318];return _0x219f8e;},_0xb44b(_0x16e73b,_0x4ffd13);}function initClient(_0x53f903){const _0x33f571=_0x28fc27;if(_0x53f903!=_0x33f571(0x2eb)&&config[_0x33f571(0x24f)]!=''){if(pid[_0x53f903])pid[_0x53f903][_0x33f571(0x2b6)]({'function':_0x33f571(0x1ca),'args':null});}_0x53f903!=_0x33f571(0x2eb)&&broadcastToBots(_0x33f571(0x156),JSON[_0x33f571(0x1fa)](config));}function reloadBotManager(){const _0x456d61=_0x28fc27;getClientsWithBotID(_0x456d61(0x2eb))[_0x456d61(0x290)](_0x32f82e=>{const _0x5129b1=_0x456d61;getSocket(_0x32f82e['id'])[_0x5129b1(0x338)](_0x5129b1(0x1e9),{'access':{'allow':![],'reason':_0x5129b1(0x20a),'token':null}});});}function getSocket(_0x3265fa){const _0x35a11f=_0x28fc27,_0x2b8fda=io[_0x35a11f(0x196)][_0x35a11f(0x36c)]('/');return _0x2b8fda[_0x35a11f(0x2a7)][_0x35a11f(0x36c)](_0x3265fa);}function setAccess(_0x67cc32){const _0x4da035=_0x28fc27,_0x297fb7=getSocket(_0x67cc32['id']),_0xa39c4a=_0x67cc32[_0x4da035(0x1bc)],_0x5e7288=_0x67cc32[_0x4da035(0x197)];devices[_0xa39c4a][_0x4da035(0x29c)]=validateAccess(devices[_0xa39c4a]['access'][_0x4da035(0x211)],_0xa39c4a),logger['debug'](_0x4da035(0x2bc)+devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x2b0)]+_0x4da035(0x1ea)+_0x67cc32['id'][_0x4da035(0x162)](-0x8)+_0x4da035(0x34a)+_0xa39c4a[_0x4da035(0x162)](-0x8)),_0x297fb7[_0x4da035(0x2ca)](_0xa39c4a);if(devices[_0xa39c4a]['access'][_0x4da035(0x1c1)]){_0x297fb7['join'](_0x5e7288);if(_0x5e7288=='botmanager')initializeSocketBotManager(_0x297fb7);else initializeSocketBot(_0x297fb7);initClient(_0x5e7288);}devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x211)]&&devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x2b0)]==_0x4da035(0x16e)&&setSessionTimeout('2FA',_0xa39c4a),devices[_0xa39c4a]['access']['token']&&devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x2b0)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0xa39c4a),_0x297fb7['emit'](_0x4da035(0x1e9),{'status':_0x67cc32[_0x4da035(0x18c)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xa39c4a]['access'],'externalip':devices[_0xa39c4a]['ip'],'publicKey':secure[_0x4da035(0x17a)],'userid':settings[_0x4da035(0x153)],'validInstallation':validInstallation}),devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x1c1)]==![]&&devices[_0xa39c4a][_0x4da035(0x29c)][_0x4da035(0x2b0)]=='2FA\x20required'&&temporaryAccess2FA(_0xa39c4a,devices[_0xa39c4a]['ip']);}function setSessionTimeout(_0x3c6d4d,_0x2a8ccd){const _0x343ab5=_0x28fc27;let _0x205a58;if(_0x3c6d4d==_0x343ab5(0x180))_0x205a58=loginExpiry*0x3c*0x3e8;else _0x205a58=devices[_0x2a8ccd][_0x343ab5(0x21a)][_0x343ab5(0x1c5)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x2a8ccd]['telegramIpApproval'][_0x343ab5(0x1bd)]);if(devices[_0x2a8ccd]['pidExpireLogin'])clearTimeout(devices[_0x2a8ccd][_0x343ab5(0x263)]);devices[_0x2a8ccd]['pidExpireLogin']=setTimeout(()=>{const _0x1d7915=_0x343ab5;if(devices[_0x2a8ccd][_0x1d7915(0x18a)])clearTimeout(devices[_0x2a8ccd]['pidRefreshToken']);removeSocketListeners(_0x2a8ccd),addBlacklist(_0x2a8ccd),devices[_0x2a8ccd][_0x1d7915(0x21a)]=null,devices[_0x2a8ccd]['telegram2FaApproval']=null,devices[_0x2a8ccd][_0x1d7915(0x29c)][_0x1d7915(0x211)]=null,logger[_0x1d7915(0x35d)](_0x1d7915(0x2a9)+_0x2a8ccd[_0x1d7915(0x162)](-0x8)),devices[_0x2a8ccd]['access']=validateAccess(devices[_0x2a8ccd]['access']['token'],_0x2a8ccd),!(devices[_0x2a8ccd][_0x1d7915(0x29c)][_0x1d7915(0x1c1)]&&devices[_0x2a8ccd][_0x1d7915(0x29c)][_0x1d7915(0x2b0)]=='login\x20not\x20required')&&(_0x3c6d4d==_0x1d7915(0x180)?io['to'](_0x2a8ccd)[_0x1d7915(0x338)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2a8ccd)[_0x1d7915(0x338)](_0x1d7915(0x1e9),{'access':{'allow':![],'reason':_0x1d7915(0x2ce),'token':null}})),devices[_0x2a8ccd]['access'][_0x1d7915(0x211)]=null;},_0x205a58);}function setTokenRefresh(_0x54a26c){const _0x26dddc=_0x28fc27;if(devices[_0x54a26c][_0x26dddc(0x18a)])clearTimeout(devices[_0x54a26c][_0x26dddc(0x18a)]);devices[_0x54a26c]['pidRefreshToken']=setTimeout(()=>{const _0x3d87cb=_0x26dddc;getClientsWithUuid(_0x54a26c)[_0x3d87cb(0x284)]!=0x0?(devices[_0x54a26c][_0x3d87cb(0x29c)]=refreshToken(_0x54a26c),io['to'](_0x54a26c)[_0x3d87cb(0x338)]('status',{'status':_0x3d87cb(0x16c),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x54a26c][_0x3d87cb(0x29c)],'externalip':devices[_0x54a26c]['ip'],'publicKey':secure[_0x3d87cb(0x17a)],'validInstallation':validInstallation}),setTokenRefresh(_0x54a26c)):clearTimeout(devices[_0x54a26c]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1be9d3){const _0x3ec454=_0x28fc27,_0x20f594=getClient(_0x1be9d3['id'])[_0x3ec454(0x1bc)];_0x1be9d3[_0x3ec454(0x338)]('bots',config),_0x1be9d3[_0x3ec454(0x338)](_0x3ec454(0x2f8),cleanSettings()),_0x1be9d3['on']('add-bot',_0x1ce25e=>{const _0x579894=_0x3ec454;if(validateAccess(_0x1ce25e,_0x20f594)[_0x579894(0x1c1)])addBot();else logger[_0x579894(0x22c)](_0x579894(0x167));}),_0x1be9d3['on'](_0x3ec454(0x262),(_0x2370f3,_0x778063)=>{const _0x36208d=_0x3ec454;if(validateAccess(_0x778063,_0x20f594)[_0x36208d(0x1c1)])toggleBot(_0x2370f3[_0x36208d(0x206)],_0x2370f3[_0x36208d(0x1e9)],_0x2370f3[_0x36208d(0x1f7)]);else logger[_0x36208d(0x22c)](_0x36208d(0x35b));}),_0x1be9d3['on'](_0x3ec454(0x1b8),(_0x27c3e5,_0x325cdb)=>{const _0x45be98=_0x3ec454;if(validateAccess(_0x325cdb,_0x20f594)['allow'])toggleBotMode(_0x27c3e5);else logger['full'](_0x45be98(0x35b));}),_0x1be9d3['on']('delete-bot',(_0x338ccf,_0x34d0b6)=>{const _0x51497c=_0x3ec454;if(validateAccess(_0x34d0b6,_0x20f594)[_0x51497c(0x1c1)])deleteBot(_0x338ccf);else logger[_0x51497c(0x22c)](_0x51497c(0x236));}),_0x1be9d3['on']('store-settings',(_0x5e03c6,_0x5160fe)=>{const _0xd2c513=_0x3ec454;if(validateAccess(_0x5160fe,_0x20f594)[_0xd2c513(0x1c1)])storeSettings(_0x5e03c6,!![]);else logger[_0xd2c513(0x22c)](_0xd2c513(0x159));}),_0x1be9d3['on'](_0x3ec454(0x366),_0x35c9b4=>{const _0x737bf8=_0x3ec454;if(validateAccess(_0x35c9b4,_0x20f594)[_0x737bf8(0x1c1)])updateBB('update');else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1be9d3['on']('reinstall-bb',_0x5dd99b=>{const _0x5b9ed6=_0x3ec454;if(validateAccess(_0x5dd99b,_0x20f594)[_0x5b9ed6(0x1c1)])updateBB(_0x5b9ed6(0x27c));else logger[_0x5b9ed6(0x22c)](_0x5b9ed6(0x26f));}),_0x1be9d3['on'](_0x3ec454(0x1d2),_0x177ea1=>{const _0x2610b4=_0x3ec454;if(validateAccess(_0x177ea1,_0x20f594)['allow']){const _0x2cc2e8=getClient(_0x1be9d3['id']);if(_0x2cc2e8)getBackupFiles(_0x2cc2e8['uuid']);else logger[_0x2610b4(0x22c)](_0x2610b4(0x30b));}else logger[_0x2610b4(0x22c)](_0x2610b4(0x30d));}),_0x1be9d3['on']('restore-backup-file',(_0x202a7b,_0x508023)=>{const _0x2befc0=_0x3ec454;if(validateAccess(_0x508023,_0x20f594)['allow'])restoreBackupFile(_0x202a7b);else logger['full'](_0x2befc0(0x228));}),_0x1be9d3['on'](_0x3ec454(0x2e6),_0x205de9=>{const _0x4193ed=_0x3ec454;if(validateAccess(_0x205de9,_0x20f594)[_0x4193ed(0x1c1)])getMessages();else logger[_0x4193ed(0x22c)](_0x4193ed(0x1c2));}),_0x1be9d3['on'](_0x3ec454(0x26e),(_0x3f0133,_0x55463a)=>{const _0x2e9595=_0x3ec454;if(validateAccess(_0x55463a,_0x20f594)[_0x2e9595(0x1c1)])confirmMessage(_0x3f0133);else logger[_0x2e9595(0x22c)](_0x2e9595(0x1d6));}),_0x1be9d3['on'](_0x3ec454(0x1c0),_0x161386=>{const _0x537b02=_0x3ec454;if(validateAccess(_0x161386,_0x20f594)[_0x537b02(0x1c1)]){if(devices[_0x20f594][_0x537b02(0x18a)])clearTimeout(devices[_0x20f594][_0x537b02(0x18a)]);if(devices[_0x20f594][_0x537b02(0x263)])clearTimeout(devices[_0x20f594][_0x537b02(0x263)]);removeSocketListeners(getClient(_0x1be9d3['id'])[_0x537b02(0x1bc)]),addBlacklist(_0x20f594),devices[_0x20f594]['telegramIpApproval']=null,devices[_0x20f594][_0x537b02(0x2d4)]=null,devices[_0x20f594][_0x537b02(0x29c)][_0x537b02(0x211)]=null,logger[_0x537b02(0x35d)](_0x537b02(0x299)+_0x20f594[_0x537b02(0x162)](-0x8)),io['to'](getClient(_0x1be9d3['id'])[_0x537b02(0x1bc)])[_0x537b02(0x338)](_0x537b02(0x1e9),{'access':{'allow':![],'reason':_0x537b02(0x2e7),'token':null}});}else logger[_0x537b02(0x22c)](_0x537b02(0x161));});}function initializeSocketBot(_0x32c343){const _0x92d5c5=_0x28fc27,_0x7a1108=getClient(_0x32c343['id'])['bot'],_0x2c6c50=getClient(_0x32c343['id'])['uuid'];_0x32c343['on'](_0x92d5c5(0x2c7),(_0x181e7a,_0x270516)=>{const _0x4527bd=_0x92d5c5;if(validateAccess(_0x270516,_0x2c6c50)['allow']){if(pid[_0x7a1108])pid[_0x7a1108][_0x4527bd(0x2b6)]({'function':_0x4527bd(0x1b7),'args':_0x181e7a});}else logger[_0x4527bd(0x22c)](_0x4527bd(0x1f1));}),_0x32c343['on'](_0x92d5c5(0x1c9),(_0x314d42,_0x3d44d3)=>{const _0x4d3ecb=_0x92d5c5;if(validateAccess(_0x3d44d3,_0x2c6c50)[_0x4d3ecb(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0x4d3ecb(0x2b6)]({'function':_0x4d3ecb(0x1e1),'args':_0x314d42});}else logger[_0x4d3ecb(0x22c)](_0x4d3ecb(0x353));}),_0x32c343['on']('get-portfolio',(_0x17ca4c,_0x49269c)=>{const _0x1a165c=_0x92d5c5;if(validateAccess(_0x49269c,_0x2c6c50)[_0x1a165c(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0x1a165c(0x2b6)]({'function':_0x1a165c(0x363),'args':_0x17ca4c});}else logger[_0x1a165c(0x22c)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x32c343['on'](_0x92d5c5(0x1a5),(_0x48a74a,_0x166d1d)=>{const _0x40b869=_0x92d5c5;if(validateAccess(_0x166d1d,_0x2c6c50)[_0x40b869(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108]['send']({'function':_0x40b869(0x1b0),'args':_0x48a74a});}else logger[_0x40b869(0x22c)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x32c343['on'](_0x92d5c5(0x1cb),(_0x3065f6,_0x54b8b5)=>{const _0x53f7a9=_0x92d5c5;if(validateAccess(_0x54b8b5,_0x2c6c50)[_0x53f7a9(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0x53f7a9(0x2b6)]({'function':_0x53f7a9(0x15d),'args':_0x3065f6});}else logger[_0x53f7a9(0x22c)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x32c343['on'](_0x92d5c5(0x33c),(_0x2fea14,_0x484464)=>{const _0x545bd0=_0x92d5c5;if(validateAccess(_0x484464,_0x2c6c50)[_0x545bd0(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0x545bd0(0x2b6)]({'function':_0x545bd0(0x2da),'args':_0x2fea14});}else logger[_0x545bd0(0x22c)](_0x545bd0(0x291));}),_0x32c343['on']('reset-history',_0x1dcd09=>{const _0x22beb0=_0x92d5c5;if(validateAccess(_0x1dcd09,_0x2c6c50)[_0x22beb0(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0x22beb0(0x2b6)]({'function':'resetHistory','args':null});}else logger[_0x22beb0(0x22c)](_0x22beb0(0x23d));}),_0x32c343['on'](_0x92d5c5(0x2b1),_0x40c131=>{const _0x2c19a4=_0x92d5c5;if(validateAccess(_0x40c131,_0x2c6c50)['allow']){if(pid[_0x7a1108])pid[_0x7a1108][_0x2c19a4(0x2b6)]({'function':_0x2c19a4(0x361),'args':null});}else logger[_0x2c19a4(0x22c)](_0x2c19a4(0x210));}),_0x32c343['on']('place-order',(_0x4f7cca,_0x338cd8)=>{const _0x499683=_0x92d5c5;if(validateAccess(_0x338cd8,_0x2c6c50)[_0x499683(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108]['send']({'function':_0x499683(0x1c7),'args':_0x4f7cca});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x32c343['on'](_0x92d5c5(0x307),_0x4130ef=>{const _0x13e1e3=_0x92d5c5;if(validateAccess(_0x4130ef,_0x2c6c50)[_0x13e1e3(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108]['send']({'function':_0x13e1e3(0x2ad),'args':null});}else logger[_0x13e1e3(0x22c)](_0x13e1e3(0x31c));}),_0x32c343['on']('show-config',_0x553ace=>{const _0xfa3dc=_0x92d5c5;if(validateAccess(_0x553ace,_0x2c6c50)[_0xfa3dc(0x1c1)]){if(pid[_0x7a1108])pid[_0x7a1108][_0xfa3dc(0x2b6)]({'function':_0xfa3dc(0x309),'args':null});}else logger[_0xfa3dc(0x22c)](_0xfa3dc(0x283));}),_0x32c343['on']('update-bb',_0x393424=>{const _0xf79578=_0x92d5c5;if(validateAccess(_0x393424,_0x2c6c50)['allow'])updateBB(_0xf79578(0x157));else logger[_0xf79578(0x22c)](_0xf79578(0x174));}),_0x32c343['on']('get-messages',_0xf75d57=>{const _0x4d0909=_0x92d5c5;if(validateAccess(_0xf75d57,_0x2c6c50)[_0x4d0909(0x1c1)])getMessages();else logger[_0x4d0909(0x22c)](_0x4d0909(0x1c2));}),_0x32c343['on']('confirm-message',(_0x30a042,_0x2809f5)=>{const _0x4d337c=_0x92d5c5;if(validateAccess(_0x2809f5,_0x2c6c50)['allow'])confirmMessage(_0x30a042);else logger['full'](_0x4d337c(0x1d6));}),_0x32c343['on'](_0x92d5c5(0x1c0),_0x193361=>{const _0x35f671=_0x92d5c5;if(validateAccess(_0x193361,_0x2c6c50)['allow']){if(devices[_0x2c6c50][_0x35f671(0x18a)])clearTimeout(devices[_0x2c6c50]['pidRefreshToken']);if(devices[_0x2c6c50][_0x35f671(0x263)])clearTimeout(devices[_0x2c6c50]['pidExpireLogin']);removeSocketListeners(getClient(_0x32c343['id'])[_0x35f671(0x1bc)]),addBlacklist(_0x2c6c50),devices[_0x2c6c50][_0x35f671(0x21a)]=null,devices[_0x2c6c50][_0x35f671(0x2d4)]=null,devices[_0x2c6c50]['access'][_0x35f671(0x211)]=null,logger[_0x35f671(0x35d)](_0x35f671(0x299)+_0x2c6c50[_0x35f671(0x162)](-0x8)),io['to'](getClient(_0x32c343['id'])[_0x35f671(0x1bc)])[_0x35f671(0x338)](_0x35f671(0x1e9),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x35f671(0x161));});}function removeSocketListeners(_0x1ee1b8){const _0x46065e=_0x28fc27;getClientsWithUuid(_0x1ee1b8)[_0x46065e(0x290)](_0x453ad8=>{const _0x491020=_0x46065e;getSocket(_0x453ad8['id'])[_0x491020(0x2e8)]();});}function cleanSettings(){const _0x1ec551=_0x28fc27;let _0x28bde4=settings;return settings['telegramToken']&&settings[_0x1ec551(0x25f)]!=''&&(_0x28bde4={..._0x28bde4,'telegramToken':_0x1ec551(0x286)}),settings['bbPassword']&&settings[_0x1ec551(0x2ae)]!=''&&(_0x28bde4={..._0x28bde4,'bbPassword':_0x1ec551(0x286)}),settings['marketcapApi']&&settings[_0x1ec551(0x2ff)]!=''&&(_0x28bde4={..._0x28bde4,'marketcapApi':_0x1ec551(0x286)}),(settings[_0x1ec551(0x2ae)]&&settings['bbPassword']=='***'||settings['telegramToken']&&settings[_0x1ec551(0x25f)]==_0x1ec551(0x28b)||settings['marketcapApi']&&settings[_0x1ec551(0x2ff)]==_0x1ec551(0x28b))&&(_0x28bde4={..._0x28bde4,'restored':{'password':settings[_0x1ec551(0x2ae)]=='***','telegram':settings[_0x1ec551(0x25f)]==_0x1ec551(0x28b),'marketcap':settings[_0x1ec551(0x2ff)]=='***'}}),_0x28bde4;}function _0x219f(){const _0x377140=['You\x20can\x20use\x20the\x20following\x20commands:\x0a','placeOrder','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','delete-alerts','initclient','store-headless','Telegraf\x20error:','download','running','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','toIPv4Address','Restore\x20process\x20confirmed','get-backup-files','password','127.0.0.1','0.0.0','Unauthorized\x20attempt\x20to\x20confirm\x20message','launch','button','remoteAddress','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','createWriteStream','params','f2aRequired','backup-files','Unauthorized\x20attempt\x20to\x20download\x20','output-000.log','deleteHistoryAlerts','portfolio','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','4346220orqXor','toString','constructor','telegram','config_orders','status','\x20|\x20client:\x20...','show','Restore\x20backup\x20file\x20','set','cloneDeep','Bot\x20','file','Unauthorized\x20attempt\x20to\x20get\x20events','-----------------------------------------------------------------------------------','disabled','/names\x20-\x20show\x20bot\x20names\x0a','SIGTERM','isValid','live','login2fa_','assign','stringify','Notifications\x20enabled','6MtWHpC','split','No\x20bots\x20running\x20right\x20now','filter','unlinkSync','temp/','<b>Balance\x20Bot\x20Status:</b>\x0a','lastmsgemitted','Password\x20has\x20been\x20reset\x20to:\x20','logs/','botID','/metrics\x20-\x20show\x20bot\x20performance\x0a','config','host','reload','padStart','includes','status\x20code\x20401','bot.js','tempaccess_30_','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','token','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','ipaddr.js','success','8175084yPOTRi','*$1*','Notifications\x20disabled\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','order','telegramIpApproval','\x20(1)','messages','hasOwnProperty','836667FLWbxT','node-forge','login2fa_reject_','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','latestversion','config_alerts','16ySzHdU','index.html','address\x20already\x20in\x20use','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','log','.zip','randomFillSync','full','bb-config.json','Starting\x20new\x20bot\x20|\x20Bot\x20','All\x20bots\x20running\x20right\x20now','entries','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','user','yargs/yargs','on_','reject','Unauthorized\x20attempt\x20to\x20delete\x20bot','then','files','CoinMarketCap\x20API\x20key\x20validated','telegramChatId','disconnect','code','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','isIPv4MappedAddress','bb-settings.json','warning','off_','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','event','rmSync','Error:\x20Invalid\x20argument\x20','2081945VufnGm','inlineKeyboard','2FA\x20login\x20required','IPv4','resetpw_yes','invalid\x20credentials','init','Enabled\x20Bot\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','apiKey','/status\x20-\x20show\x20bot(s)\x20status\x0a','\x20>\x20','private','loginRequired','apiPassword','jszip','headless','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','sign','\x20minutes','child_process','store','restart_','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','SIGINT','telegramToken','=>\x20Go\x20to\x20#CYA#http://','editMessageReplyMarkup','update-bot','pidExpireLogin','conn','stopped','output-001.log','hashSync','text','ETH','Error\x20removing\x20old\x20backup\x20files:','Login\x20rejected','build','login\x20token\x20generated','confirm-message','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','node','generateKeyPair','http','::ffff:127.0.0.1','getSeconds','sort','kill','lowdb/adapters/FileSync','express','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','backup','logs','reinstall','update_yes','Login\x20accepted','internal','ipv6','start','catch','Unauthorized\x20attempt\x20to\x20show\x20configuration','length','Alerts','************','readdirSync','settings.','graphql-request','Error\x20sending\x20','***','string','production','inherit','generateAsync','forEach','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','apply','zip/','getHours','|@|','output-003.log','sortBy','simple','Logged\x20out\x20user\x20...','/on\x20-\x20start\x20bot(s)\x0a','\x1b[35m','access',',\x20must\x20be\x20a\x204\x20digit\x20number','-events.json','exp','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','#RES#\x20if\x20running\x20on\x20server','blacklist','Bot\x20Mgr\x20>\x20','getFullYear','error','socket.io','sockets','path','Session\x20expired\x20for\x20user\x20...','build2','defaults','Starting\x20#RED#Balance\x20Bot\x20v','cancelLoading','bbPassword','existsSync','reason','get-starting-balances','sendPortfolioTelegram','function',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','send','new','(((.+)+)+)+$','isDirectory','referer','data','Setting\x20access:\x20','address','command','mode','username','bot-','Yes','statSync','pki','https://api.ipify.org?format=json','Logged\x20in\x20user\x20...','get-logs','getUTCHours','Failed\x20to\x20download\x20','join',')\x20\x20\x20|\x20Bot\x20','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','(staging)','temporary\x20access\x20timeout','range','output-002.log','restore_no_','listen','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','telegram2FaApproval','Server','-config.json','push','restart','telegramEnabled','storeFiat','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','/backup\x20-\x20receive\x20backup\x20files\x0a','botname','map','RSA-OAEP','2FA\x20login\x20rejected','Telegram\x20error:','3000','tkn','close','login\x20required','get-messages','logged\x20out','removeAllListeners','util','/restart\x20-\x20restart\x20bot(s)\x0a','botmanager','action','replyWithDocument','bbvNew','temporary\x20access\x20not\x20allowed','message','temporary\x20access\x20rejected','backup-full','Password\x20reset\x20rejected','use','Temporary\x20access\x20rejected','secure','name','settings','81068AXJgQc','getDate','/:bot/portfolio','keys','notification','-results.json','marketcapApi','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','toggle_','createServer','readFileSync','static','startsWith','from','cancel-loading','async','showConfig','yes','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','exit','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','sendFile','[ip-address]','decrypt','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','2FA\x20login\x20token\x20generated','handshake','$1_$2_$3','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','binary','create','title','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','1000','onepagemode','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','updatebotmanager',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','chat','lastmsgtelegram','copyFileSync','number','5\x20min','orders','Allow\x20login\x20from\x20IP\x20address\x20','All\x20bots','sendMetricsTelegram','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','/:bot/coins','User\x20has\x20been\x20validated','secret','\x20files\x20over\x20Telegram:','telegraf','/update\x20-\x20update\x20Balance\x20Bot\x0a','min','5878mcfWOI','\x20only\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','-performance.json','getTime','#RES#','bb-secure.json','metrics','emit','uncaughtException','started','Error\x20details:','store-fiat','manual','backupfile','mkdirSync','whitelistEnabled','auto','post','search','login\x20token\x20valid','jsonwebtoken','\x1b[34m','request','30\x20min','port','\x20|\x20user:\x20...','All','bbvReceive','privateKey','test','type','\x1b[31m','stop','enabled','Unauthorized\x20attempt\x20to\x20delete\x20alerts','version.json','Orders','<b>Telegram\x20Bot\x20Status:</b>\x0a',')\x20|\x20Bot\x20','2FA\x20required','12hxGvwb','sha256','Unauthorized\x20attempt\x20to\x20update\x20bot','/disable\x20-\x20disable\x20notifications\x0a','debug','clientip','No\x20authentication\x20token','loadAsync','getStartingBalances','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','getPortfolio','Disabled\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','update-bb','publicKeyToPem','disable','exec','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','reset-password','get','31YTiIaq','reply','toggleBotMode','lowdb','BCT','303191wPnWCZ','userid','accept','\x20to\x20','bots','update','DEFLATE','Unauthorized\x20attempt\x20to\x20update\x20settings','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','getMinutes','privateKeyFromPem','storeHeadless','6b67f3d61ee94b8f5c80b4affef4c4d9','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','remove','Unauthorized\x20attempt\x20to\x20log\x20out','slice','endsWith','telegramUsername','uuid-random','help','Unauthorized\x20attempt\x20to\x20add\x20bot','Invalid\x20IP\x20address','backup-full@','timeshift','\x1b[36m','connected','callback','temporary\x20token\x20generated','ipc','connection','config/','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','/off\x20-\x20stop\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','toIPv4MappedAddress','bcryptjs','22aeszcf','randomBytes','/:bot/performance','publicKey','parse','Backup\x20file\x20unzipped\x20and\x20stored','track','File\x20uploaded','mixpanel','login','replace','enable','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','/:bot/history','getMonth','write','headers','Ok,\x20will\x20send\x20order\x20notifications\x20only','rsa','pidRefreshToken','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','server','once','/download/:type','resetpw_no','socket','alerts','HTML','privateKeyToPem','Notifications\x20disabled','Starting\x20Balance\x20Bot\x20reinstallation','_nsps','bot','match','Access\x20enabled\x20for\x20','showname','version','new-disabled','/:bot/support','Network\x20Interfaces:','#RES#\x20','exchange','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bb/','find','date-fns','store-configuration','environment','Notifications\x20types:\x20','format','Restore\x20process\x20aborted','kind','\x20|\x20','reinstall_yes','Restoring\x20bot(s)\x20from\x20backup','max','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','storeConfiguration','all','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','telegramEvents','metrics_','argv','emitHistory','toggle-bot-mode','Node.js\x20v','whitelist','decode64','uuid','timestamp','temporaryAccessAllowed','bbUsername','logout','allow','Unauthorized\x20attempt\x20to\x20get\x20messages','writeFileSync','value','expiry'];_0x219f=function(){return _0x377140;};return _0x219f();}async function updateBB(_0x3597ff){const _0x1c553c=_0x28fc27;await backupConfigFiles(),installingUpdate=!![],config[_0x1c553c(0x290)](_0x254996=>{const _0x3e2a23=_0x1c553c;restartBot(_0x254996[_0x3e2a23(0x206)]);});if(_0x3597ff==_0x1c553c(0x157))process[_0x1c553c(0x2b6)]({'update':!![],'environment':environment},_0x3c3bf9=>{});else _0x3597ff==_0x1c553c(0x27c)&&process[_0x1c553c(0x2b6)]({'reinstall':!![],'environment':environment},_0x3ac29f=>{});}function startBot(_0x42635c,_0x48b749,_0x1cca21){const _0x9b3e01=_0x28fc27;if(debugging)_0x42635c['push']('-d');let _0x427071=![];const _0x1b1853=_0x42635c[0x0];_0x48b749={..._0x48b749,'stdio':[_0x9b3e01(0x28e),_0x9b3e01(0x28e),_0x9b3e01(0x28e),_0x9b3e01(0x16f)]},pid[_0x1b1853]=childProcess['fork'](botfile,_0x42635c,_0x48b749),pid[_0x1b1853]['on']('message',_0x4a20e0=>{const _0x5a04f9=_0x9b3e01;switch(Object[_0x5a04f9(0x2fc)](_0x4a20e0)[0x0]){case _0x5a04f9(0x2dd):updateBotName(_0x1b1853,_0x4a20e0[_0x5a04f9(0x2dd)]);break;case _0x5a04f9(0x31d):updateBotManager();break;case _0x5a04f9(0x1e9):updateStatus(_0x1b1853,_0x4a20e0[_0x5a04f9(0x1e9)]);break;case _0x5a04f9(0x1f7):updateLive(_0x1b1853,_0x4a20e0['live']);break;case _0x5a04f9(0x33a):updateLive(_0x1b1853,_0x4a20e0[_0x5a04f9(0x33a)]),io['to'](_0x1b1853)[_0x5a04f9(0x338)](_0x5a04f9(0x1e9),{'access':{'allow':![],'reason':_0x5a04f9(0x20a),'token':null}});break;case'stop':_0x4a20e0[_0x5a04f9(0x351)]==_0x5a04f9(0x2d8)&&restartBot(_0x1b1853);_0x4a20e0['stop']==_0x5a04f9(0x276)&&toggleBot(_0x1b1853,_0x5a04f9(0x1f3),_0x5a04f9(0x265));break;case _0x5a04f9(0x1e7):sendTelegramBot(_0x1b1853,_0x4a20e0['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x4a20e0['telegrammsg']);break;case'function':io['to'](_0x1b1853)[_0x5a04f9(0x338)](_0x4a20e0[_0x5a04f9(0x2b3)],_0x4a20e0['args']);break;}}),pid[_0x1b1853]['on'](_0x9b3e01(0x2a5),function(_0x3f348e){if(_0x427071)return;_0x427071=!![],_0x1cca21(_0x3f348e);}),pid[_0x1b1853]['on'](_0x9b3e01(0x30c),async function(_0x54af6c){const _0xc52b99=_0x9b3e01;if(terminating)return;if(installingUpdate){io[_0xc52b99(0x2e4)]();return;}if(_0x427071)return;_0x427071=!![],_0x1cca21(null);const _0xd9eca6=dbConfig['get'](_0xc52b99(0x156))['find']({'botID':_0x1b1853})['value']();_0xd9eca6&&(_0xd9eca6[_0xc52b99(0x1e9)]==_0xc52b99(0x352)||_0xd9eca6[_0xc52b99(0x1e9)]=='new')&&(await sleep(0x3e8),updateLive(_0x1b1853,'stopped'),logger[_0xc52b99(0x22c)]('Restarting\x20Bot\x20'+_0x1b1853),startBot([_0x1b1853,userID],{'cwd':bbpath},function(_0x356806){const _0x110d60=_0xc52b99;if(_0x356806)logger[_0x110d60(0x22c)](_0x356806);}));});}function stopBot(_0x207ac7){const _0x8f4a50=_0x28fc27;getClientsWithBotID(_0x207ac7)['forEach'](_0x4f31cb=>{const _0x53683b=_0xb44b;getSocket(_0x4f31cb['id'])[_0x53683b(0x23b)](!![]),removeClient(_0x4f31cb['id']);}),pid[_0x207ac7]&&(pid[_0x207ac7][_0x8f4a50(0x276)](),pid[_0x207ac7]=null);}function stopAllBots(){terminating=!![];const _0x58af49=getEnabledBots();_0x58af49['forEach'](_0x13679f=>{stopBot(_0x13679f['botID']);});}function restartBot(_0x30e345){if(pid[_0x30e345])pid[_0x30e345]['kill']();}function addBot(){const _0x145179=_0x28fc27;let _0x108b1a;for(let _0x5349d3=0x1;_0x5349d3<0x3e9;_0x5349d3++){_0x108b1a=_0x5349d3['toString']()[_0x145179(0x20b)](0x3,'0');let _0x11125a=config['find'](_0x534150=>_0x534150[_0x145179(0x206)]==_0x108b1a);if(!_0x11125a)break;}if(_0x108b1a===_0x145179(0x31a)){logger[_0x145179(0x22c)](_0x145179(0x2cc));return;}logger['full'](_0x145179(0x22e)+_0x108b1a),dbConfig[_0x145179(0x36c)](_0x145179(0x156))[_0x145179(0x2d7)]({'botID':_0x108b1a,'botname':'Bot\x20'+_0x108b1a,'status':_0x145179(0x2b7),'live':''})[_0x145179(0x186)](),startBot([_0x108b1a,userID],{'cwd':bbpath},function(_0x4e986c){const _0x49f678=_0x145179;if(_0x4e986c)logger[_0x49f678(0x22c)](_0x4e986c);}),config=getConfiguration(),io['to'](_0x145179(0x2eb))[_0x145179(0x338)](_0x145179(0x156),config),broadcastToBots('bots',JSON[_0x145179(0x1fa)](config));}function deleteBot(_0x3704c0){const _0x1145f8=_0x28fc27;getClientsWithBotID(_0x3704c0)[_0x1145f8(0x290)](_0x48058b=>{const _0x3fe40c=_0x1145f8;getSocket(_0x48058b['id'])[_0x3fe40c(0x23b)](!![]),removeClient(_0x48058b['id']);}),dbConfig['get'](_0x1145f8(0x156))[_0x1145f8(0x160)]({'botID':_0x3704c0})[_0x1145f8(0x186)](),logger['full']('Deleted\x20Bot\x20'+_0x3704c0),stopBot(_0x3704c0);try{if(fs[_0x1145f8(0x2af)](path['join'](configpath,_0x1145f8(0x2c1)+_0x3704c0+_0x1145f8(0x2d6))))fs[_0x1145f8(0x200)](path['join'](configpath,_0x1145f8(0x2c1)+_0x3704c0+'-config.json'));if(fs[_0x1145f8(0x2af)](path[_0x1145f8(0x2ca)](configpath,_0x1145f8(0x2c1)+_0x3704c0+'-events.json')))fs['unlinkSync'](path['join'](configpath,'bot-'+_0x3704c0+_0x1145f8(0x29e)));if(fs['existsSync'](path[_0x1145f8(0x2ca)](configpath,_0x1145f8(0x2c1)+_0x3704c0+_0x1145f8(0x333))))fs[_0x1145f8(0x200)](path[_0x1145f8(0x2ca)](configpath,_0x1145f8(0x2c1)+_0x3704c0+'-performance.json'));if(fs[_0x1145f8(0x2af)](path[_0x1145f8(0x2ca)](configpath,_0x1145f8(0x2c1)+_0x3704c0+_0x1145f8(0x2fe))))fs[_0x1145f8(0x200)](path[_0x1145f8(0x2ca)](configpath,'bot-'+_0x3704c0+_0x1145f8(0x2fe)));}catch(_0x575d00){if(_0x575d00)logger[_0x1145f8(0x22c)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x575d00);}config=getConfiguration(),io['to'](_0x1145f8(0x2eb))[_0x1145f8(0x338)](_0x1145f8(0x156),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x47690a,_0x308f7a,_0x322863){const _0x30f1e1=_0x28fc27;dbConfig[_0x30f1e1(0x36c)](_0x30f1e1(0x156))[_0x30f1e1(0x1a3)]({'botID':_0x47690a})[_0x30f1e1(0x1f9)]({'status':_0x308f7a})[_0x30f1e1(0x1f9)]({'live':_0x322863})['write']();if(_0x308f7a==_0x30f1e1(0x352)||_0x308f7a==_0x30f1e1(0x2b7))logger[_0x30f1e1(0x22c)](_0x30f1e1(0x24d)+_0x47690a),startBot([_0x47690a,userID],{'cwd':bbpath},function(_0x460814){if(_0x460814)logger['full'](_0x460814);});else(_0x308f7a==_0x30f1e1(0x1f3)||_0x308f7a==_0x30f1e1(0x19c))&&(logger['full'](_0x30f1e1(0x364)+_0x47690a),stopBot(_0x47690a));config=getConfiguration(),io['to'](_0x30f1e1(0x2eb))['emit']('bots',config),broadcastToBots(_0x30f1e1(0x156),JSON[_0x30f1e1(0x1fa)](config));}function toggleStatus(_0x5e008a){const _0x9a3707=_0x28fc27;let _0x1c9f82=dbConfig[_0x9a3707(0x36c)](_0x9a3707(0x156))[_0x9a3707(0x1a3)]({'botID':_0x5e008a})[_0x9a3707(0x1c4)](),_0x3bf56c;if(_0x1c9f82['status']===_0x9a3707(0x352))_0x3bf56c=_0x9a3707(0x1f3);else{if(_0x1c9f82[_0x9a3707(0x1e9)]===_0x9a3707(0x2b7))_0x3bf56c='new-disabled';else{if(_0x1c9f82['status']===_0x9a3707(0x19c))_0x3bf56c='new';else{if(_0x1c9f82[_0x9a3707(0x1e9)]===_0x9a3707(0x1f3))_0x3bf56c=_0x9a3707(0x352);}}}return _0x3bf56c;}function updateStatus(_0x20ba33,_0x508365){const _0x10159b=_0x28fc27;dbConfig[_0x10159b(0x36c)](_0x10159b(0x156))[_0x10159b(0x1a3)]({'botID':_0x20ba33})[_0x10159b(0x1f9)]({'status':_0x508365})[_0x10159b(0x186)](),config=getConfiguration(),io['to'](_0x10159b(0x2eb))[_0x10159b(0x338)](_0x10159b(0x156),config),broadcastToBots(_0x10159b(0x156),JSON[_0x10159b(0x1fa)](config));}function updateLive(_0x1c9ee0,_0x37c4fd){const _0x3de51d=_0x28fc27;dbConfig[_0x3de51d(0x36c)](_0x3de51d(0x156))[_0x3de51d(0x1a3)]({'botID':_0x1c9ee0})[_0x3de51d(0x1f9)]({'live':_0x37c4fd})[_0x3de51d(0x186)](),config=getConfiguration(),io['to'](_0x3de51d(0x2eb))[_0x3de51d(0x338)](_0x3de51d(0x156),config),broadcastToBots('bots',JSON[_0x3de51d(0x1fa)](config));}function updateBotName(_0x414ed2,_0x11bfa6){const _0x1e391d=_0x28fc27;dbConfig[_0x1e391d(0x36c)](_0x1e391d(0x156))[_0x1e391d(0x1a3)]({'botID':_0x414ed2})['assign']({'botname':_0x11bfa6})[_0x1e391d(0x186)](),config=getConfiguration(),io['to'](_0x1e391d(0x2eb))['emit'](_0x1e391d(0x156),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0xbfd916=_0x28fc27;config=getConfiguration(),io['to'](_0xbfd916(0x2eb))['emit']('bots',config),broadcastToBots(_0xbfd916(0x156),JSON[_0xbfd916(0x1fa)](config));}function toggleBotMode(_0x3a7e18){const _0x58af8c=_0x28fc27;if(pid[_0x3a7e18])pid[_0x3a7e18][_0x58af8c(0x2b6)]({'function':_0x58af8c(0x36f),'args':null});else{const _0xbe2c7=configpath+_0x58af8c(0x2c1)+_0x3a7e18+_0x58af8c(0x2d6),_0x47931e=fs[_0x58af8c(0x303)](_0xbe2c7),_0x245b55=JSON[_0x58af8c(0x17b)](_0x47931e),_0x5d6e8b=_0x245b55[_0x58af8c(0x197)][0x0][_0x58af8c(0x256)];_0x245b55[_0x58af8c(0x197)][0x0][_0x58af8c(0x256)]=!_0x5d6e8b;const _0xf14020=JSON[_0x58af8c(0x1fa)](_0x245b55,null,0x2);fs['writeFileSync'](_0xbe2c7,_0xf14020),config=getConfiguration(),io['to'](_0x58af8c(0x2eb))['emit'](_0x58af8c(0x156),config),broadcastToBots('bots',JSON[_0x58af8c(0x1fa)](config));}}function validateTelegram(_0x4b8ee8){const _0x166c0d=_0x28fc27;if(_0x4b8ee8[_0x166c0d(0x306)][_0x166c0d(0x2c0)]!=settings['telegramUsername']&&'@'+_0x4b8ee8[_0x166c0d(0x306)][_0x166c0d(0x2c0)]!=settings[_0x166c0d(0x164)]||_0x4b8ee8[_0x166c0d(0x31f)]['id']!=settings[_0x166c0d(0x23a)])return sendTelegram(_0x4b8ee8['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x166c0d(0x192)}),![];return!![];}async function initTelegram(){const _0x481723=_0x28fc27;tgBot&&(await tgBot[_0x481723(0x351)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x481723(0x25f)]);let _0x365d5a=_0x481723(0x1c6);_0x365d5a+='\x0a',_0x365d5a+='/enable\x20-\x20enable\x20notifications\x0a',_0x365d5a+=_0x481723(0x35c),_0x365d5a+=_0x481723(0x172),_0x365d5a+=_0x481723(0x2ea),_0x365d5a+=_0x481723(0x29a),_0x365d5a+=_0x481723(0x173),_0x365d5a+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x365d5a+=_0x481723(0x1f4),_0x365d5a+=_0x481723(0x250),_0x365d5a+=_0x481723(0x207),_0x365d5a+=_0x481723(0x15f),_0x365d5a+='/logs\x20-\x20receive\x20log\x20files\x0a',_0x365d5a+=_0x481723(0x2dc),_0x365d5a+=_0x481723(0x32e),_0x365d5a+=_0x481723(0x2d3),_0x365d5a+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x38214a=_0x481723(0x279);_0x38214a+='\x0a',_0x38214a+=_0x365d5a,tgBot[_0x481723(0x282)]((_0x3dfcf2,_0x2a354d)=>{const _0x3f9657=_0x481723;logger[_0x3f9657(0x298)](getTimeStamp()+_0x3f9657(0x2b4)),logger['debug'](_0x3f9657(0x1cc),_0x3dfcf2);}),tgBot[_0x481723(0x2f4)](async(_0x421d0d,_0x228bf9)=>{const _0x4175df=_0x481723;if(!(!settings[_0x4175df(0x23a)]&&_0x421d0d[_0x4175df(0x157)][_0x4175df(0x2f0)][_0x4175df(0x268)]=='/start')){if(!validateTelegram(_0x421d0d))return;}_0x228bf9();}),tgBot['command'](_0x481723(0x281),async _0x4006b5=>{const _0x141520=_0x481723;if(_0x4006b5[_0x141520(0x306)]['username']==settings[_0x141520(0x164)]||'@'+_0x4006b5['from'][_0x141520(0x2c0)]==settings[_0x141520(0x164)]){if(!settings[_0x141520(0x23a)])updateSetting(_0x141520(0x23a),_0x4006b5['chat']['id']);}if(!validateTelegram(_0x4006b5))return;updateSetting(_0x141520(0x2d9),!![]),await sendTelegram(_0x4006b5[_0x141520(0x31f)]['id'],_0x38214a);}),tgBot[_0x481723(0x2be)](_0x481723(0x182),async _0xdb7b28=>{const _0x5a4619=_0x481723;updateSetting(_0x5a4619(0x2d9),!![]),await sendTelegram(_0xdb7b28[_0x5a4619(0x31f)]['id'],_0x5a4619(0x1fb));}),tgBot[_0x481723(0x2be)](_0x481723(0x368),async _0x10a765=>{const _0x18db25=_0x481723;await sendTelegram(_0x10a765[_0x18db25(0x31f)]['id'],_0x18db25(0x194)),updateSetting('telegramEnabled',![]);}),tgBot[_0x481723(0x2be)](_0x481723(0x208),async _0x48a5d1=>{const _0x2d9f90=_0x481723,_0x18037f=Markup[_0x2d9f90(0x247)]([Markup['button'][_0x2d9f90(0x16d)](_0x2d9f90(0x355),_0x2d9f90(0x1e8)),Markup['button'][_0x2d9f90(0x16d)](_0x2d9f90(0x285),_0x2d9f90(0x223)),Markup[_0x2d9f90(0x1d8)][_0x2d9f90(0x16d)](_0x2d9f90(0x34b),'config_all')]);_0x48a5d1[_0x2d9f90(0x36e)](_0x2d9f90(0x227),_0x18037f);}),tgBot['action'](_0x481723(0x1e8),async _0x135bed=>{const _0x1ee3a6=_0x481723;_0x135bed[_0x1ee3a6(0x261)](),updateSetting(_0x1ee3a6(0x1b4),'orders'),updateSetting(_0x1ee3a6(0x2d9),!![]),await sendTelegram(_0x135bed[_0x1ee3a6(0x31f)]['id'],_0x1ee3a6(0x188));}),tgBot['action'](_0x481723(0x223),async _0x45e505=>{const _0x4e76e1=_0x481723;_0x45e505[_0x4e76e1(0x261)](),updateSetting('telegramEvents','alerts'),updateSetting(_0x4e76e1(0x2d9),!![]),await sendTelegram(_0x45e505['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x481723(0x2ec)]('config_all',async _0x5eda6a=>{const _0x3da1d0=_0x481723;_0x5eda6a['editMessageReplyMarkup'](),updateSetting(_0x3da1d0(0x1b4),_0x3da1d0(0x1b1)),updateSetting(_0x3da1d0(0x2d9),!![]),await sendTelegram(_0x5eda6a['chat']['id'],_0x3da1d0(0x1a1));}),tgBot[_0x481723(0x2be)](_0x481723(0x1e9),async _0x5477a3=>{const _0x2f9efe=_0x481723,_0xcbcf71=getBotsWithMode();let _0x444f59=_0x2f9efe(0x202);config['forEach'](_0x4e55a=>{const _0x39a23e=_0x2f9efe,_0x4b1220=_0xcbcf71[_0x39a23e(0x1a3)](_0xf78e7=>_0xf78e7['botID']==_0x4e55a[_0x39a23e(0x206)])[_0x39a23e(0x2bf)];_0x444f59+=_0x39a23e(0x1ef)+_0x4e55a[_0x39a23e(0x206)]+':\x20'+_0x4e55a[_0x39a23e(0x1e9)]+_0x39a23e(0x1ab)+_0x4b1220+_0x39a23e(0x1ab)+_0x4e55a['live']+'\x0a';}),_0x444f59+='\x0a',_0x444f59+=_0x2f9efe(0x356),_0x444f59+=!settings[_0x2f9efe(0x2d9)]?_0x2f9efe(0x217):'Notifications\x20enabled\x0a',_0x444f59+=settings[_0x2f9efe(0x2d9)]?settings['telegramEvents']=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2f9efe(0x1a7)+settings['telegramEvents']+_0x2f9efe(0x331):'',await sendTelegram(_0x5477a3[_0x2f9efe(0x31f)]['id'],_0x444f59,{'parse_mode':_0x2f9efe(0x192)});}),tgBot[_0x481723(0x2be)](_0x481723(0x2d8),async _0x377dd2=>{const _0x4af7e7=_0x481723,_0xdf5506=getEnabledBots();if(_0xdf5506['length']==0x0)await sendTelegram(_0x377dd2[_0x4af7e7(0x31f)]['id'],_0x4af7e7(0x1fe));else{if(_0xdf5506[_0x4af7e7(0x284)]>0x1)_0xdf5506['push']({'botID':'all'});let _0x42cf17=[],_0x1ecb89=[];const _0x3de993=_0xdf5506[_0x4af7e7(0x284)]%0x4==0x0||_0xdf5506[_0x4af7e7(0x284)]%0x4==0x3||_0xdf5506[_0x4af7e7(0x284)]%0x3==0x1?0x4:0x3;let _0x3452e2=0x0;_0xdf5506[_0x4af7e7(0x290)]((_0x18f20b,_0x11d394)=>{const _0x272c12=_0x4af7e7;if(_0x11d394%_0x3de993==0x0)_0x1ecb89=[];_0x1ecb89['push'](Markup['button'][_0x272c12(0x16d)](_0x18f20b[_0x272c12(0x206)]==_0x272c12(0x1b1)?'All\x20bots':_0x272c12(0x1ef)+_0x18f20b['botID'],_0x272c12(0x25c)+_0x18f20b[_0x272c12(0x206)])),_0x11d394%_0x3de993==0x0&&(_0x42cf17[_0x3452e2]=_0x1ecb89,_0x3452e2++);});const _0x37b3c0=Markup[_0x4af7e7(0x247)](_0x42cf17);_0x377dd2[_0x4af7e7(0x36e)](_0x4af7e7(0x2a0),_0x37b3c0);}}),tgBot['action'](/restart_(.+)/,async _0x38dfb6=>{const _0x15d103=_0x481723,_0x57ddc8=_0x38dfb6[_0x15d103(0x198)][0x1];_0x38dfb6[_0x15d103(0x261)](),_0x57ddc8=='all'?config['forEach'](_0x45f37d=>{const _0x36189c=_0x15d103;restartBot(_0x45f37d[_0x36189c(0x206)]);}):restartBot(_0x57ddc8);}),tgBot[_0x481723(0x2be)]('on',async _0x533993=>{const _0x38fe81=_0x481723,_0x229d8c=getDisabledBots();if(_0x229d8c['length']==0x0)await sendTelegram(_0x533993[_0x38fe81(0x31f)]['id'],_0x38fe81(0x22f));else{if(_0x229d8c[_0x38fe81(0x284)]>0x1)_0x229d8c[_0x38fe81(0x2d7)]({'botID':_0x38fe81(0x1b1)});let _0x653d21=[],_0x2ca64e=[];const _0x3bfd40=_0x229d8c['length']%0x4==0x0||_0x229d8c[_0x38fe81(0x284)]%0x4==0x3||_0x229d8c['length']%0x3==0x1?0x4:0x3;let _0x52d3e6=0x0;_0x229d8c[_0x38fe81(0x290)]((_0x5bed35,_0x37ebf5)=>{const _0x300088=_0x38fe81;if(_0x37ebf5%_0x3bfd40==0x0)_0x2ca64e=[];_0x2ca64e['push'](Markup[_0x300088(0x1d8)][_0x300088(0x16d)](_0x5bed35['botID']=='all'?'All\x20bots':_0x300088(0x1ef)+_0x5bed35[_0x300088(0x206)],_0x300088(0x234)+_0x5bed35[_0x300088(0x206)])),_0x37ebf5%_0x3bfd40==0x0&&(_0x653d21[_0x52d3e6]=_0x2ca64e,_0x52d3e6++);});const _0x390b35=Markup[_0x38fe81(0x247)](_0x653d21);_0x533993['reply'](_0x38fe81(0x1b2),_0x390b35);}}),tgBot[_0x481723(0x2ec)](/on_(.+)/,async _0x463a56=>{const _0x25bd7f=_0x481723,_0x25dd39=_0x463a56[_0x25bd7f(0x198)][0x1];_0x463a56[_0x25bd7f(0x261)]();if(_0x25dd39=='all'){const _0x3fb5e4=getDisabledBots();await sendTelegram(_0x463a56[_0x25bd7f(0x31f)]['id'],_0x25bd7f(0x242)),_0x3fb5e4[_0x25bd7f(0x290)](_0xfc7a53=>{const _0x1d2081=_0x25bd7f;if(_0xfc7a53['botID']!=_0x1d2081(0x1b1))toggleBot(_0xfc7a53[_0x1d2081(0x206)],toggleStatus(_0xfc7a53[_0x1d2081(0x206)]),_0x1d2081(0x265));});}else await sendTelegram(_0x463a56[_0x25bd7f(0x31f)]['id'],_0x25bd7f(0x25d)+_0x25dd39),toggleBot(_0x25dd39,toggleStatus(_0x25dd39),'stopped');}),tgBot[_0x481723(0x2be)]('off',async _0xcc284a=>{const _0xad2a81=_0x481723,_0x5ea8f2=getEnabledBots();if(_0x5ea8f2[_0xad2a81(0x284)]==0x0)await sendTelegram(_0xcc284a[_0xad2a81(0x31f)]['id'],_0xad2a81(0x1fe));else{if(_0x5ea8f2[_0xad2a81(0x284)]>0x1)_0x5ea8f2[_0xad2a81(0x2d7)]({'botID':'all'});let _0x46f197=[],_0x2b040a=[];const _0x980f9=_0x5ea8f2[_0xad2a81(0x284)]%0x4==0x0||_0x5ea8f2['length']%0x4==0x3||_0x5ea8f2[_0xad2a81(0x284)]%0x3==0x1?0x4:0x3;let _0x1c965a=0x0;_0x5ea8f2[_0xad2a81(0x290)]((_0x575c96,_0x41ab2d)=>{const _0x8c39ee=_0xad2a81;if(_0x41ab2d%_0x980f9==0x0)_0x2b040a=[];_0x2b040a[_0x8c39ee(0x2d7)](Markup[_0x8c39ee(0x1d8)][_0x8c39ee(0x16d)](_0x575c96['botID']==_0x8c39ee(0x1b1)?_0x8c39ee(0x326):_0x8c39ee(0x1ef)+_0x575c96['botID'],_0x8c39ee(0x241)+_0x575c96[_0x8c39ee(0x206)])),_0x41ab2d%_0x980f9==0x0&&(_0x46f197[_0x1c965a]=_0x2b040a,_0x1c965a++);});const _0x1239db=Markup['inlineKeyboard'](_0x46f197);_0xcc284a['reply'](_0xad2a81(0x1e3),_0x1239db);}}),tgBot[_0x481723(0x2ec)](/off_(.+)/,async _0x21d347=>{const _0xb74d6e=_0x481723,_0x116d1d=_0x21d347[_0xb74d6e(0x198)][0x1];_0x21d347[_0xb74d6e(0x261)]();if(_0x116d1d==_0xb74d6e(0x1b1)){const _0x2daa87=getEnabledBots();await sendTelegram(_0x21d347[_0xb74d6e(0x31f)]['id'],_0xb74d6e(0x365)),_0x2daa87[_0xb74d6e(0x290)](_0x3d65d1=>{const _0x58d1a9=_0xb74d6e;if(_0x3d65d1[_0x58d1a9(0x206)]!=_0x58d1a9(0x1b1))toggleBot(_0x3d65d1[_0x58d1a9(0x206)],toggleStatus(_0x3d65d1['botID']),_0x58d1a9(0x265));});}else await sendTelegram(_0x21d347[_0xb74d6e(0x31f)]['id'],_0xb74d6e(0x18b)+_0x116d1d),toggleBot(_0x116d1d,toggleStatus(_0x116d1d),'stopped');}),tgBot['command'](_0x481723(0x337),async _0x45a50e=>{const _0x2001e4=_0x481723,_0x3982ba=getEnabledBots();if(_0x3982ba[_0x2001e4(0x284)]==0x0)await sendTelegram(_0x45a50e['chat']['id'],_0x2001e4(0x1fe));else{if(_0x3982ba[_0x2001e4(0x284)]>0x1){let _0x1f8524=[],_0x33f686=[];const _0x415b1f=_0x3982ba['length']%0x4==0x0||_0x3982ba[_0x2001e4(0x284)]%0x4==0x3||_0x3982ba[_0x2001e4(0x284)]%0x3==0x1?0x4:0x3;let _0x61f3da=0x0;_0x3982ba['forEach']((_0x399eb5,_0x635769)=>{const _0x2b6e41=_0x2001e4;if(_0x635769%_0x415b1f==0x0)_0x33f686=[];_0x33f686[_0x2b6e41(0x2d7)](Markup['button']['callback'](_0x2b6e41(0x1ef)+_0x399eb5[_0x2b6e41(0x206)],_0x2b6e41(0x1b5)+_0x399eb5[_0x2b6e41(0x206)])),_0x635769%_0x415b1f==0x0&&(_0x1f8524[_0x61f3da]=_0x33f686,_0x61f3da++);});const _0x1f407c=Markup['inlineKeyboard'](_0x1f8524);_0x45a50e[_0x2001e4(0x36e)](_0x2001e4(0x1c8),_0x1f407c);}else{const _0x58f1ba=_0x3982ba[0x0][_0x2001e4(0x206)];if(pid[_0x58f1ba])pid[_0x58f1ba][_0x2001e4(0x2b6)]({'function':_0x2001e4(0x327),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x538817=>{const _0x1c85b3=_0x481723,_0x5bdefe=_0x538817[_0x1c85b3(0x198)][0x1];_0x538817['editMessageReplyMarkup']();if(pid[_0x5bdefe])pid[_0x5bdefe]['send']({'function':_0x1c85b3(0x327),'args':null});}),tgBot['command'](_0x481723(0x1e2),async _0xa8dcff=>{const _0x248718=_0x481723,_0x4707b7=getEnabledBots();if(_0x4707b7['length']==0x0)await sendTelegram(_0xa8dcff[_0x248718(0x31f)]['id'],_0x248718(0x1fe));else{if(_0x4707b7['length']>0x1){let _0x3148c0=[],_0x20708c=[];const _0x336faa=_0x4707b7[_0x248718(0x284)]%0x4==0x0||_0x4707b7[_0x248718(0x284)]%0x4==0x3||_0x4707b7['length']%0x3==0x1?0x4:0x3;let _0x3d4383=0x0;_0x4707b7[_0x248718(0x290)]((_0x29274a,_0x192b41)=>{const _0x2e2faa=_0x248718;if(_0x192b41%_0x336faa==0x0)_0x20708c=[];_0x20708c[_0x2e2faa(0x2d7)](Markup[_0x2e2faa(0x1d8)][_0x2e2faa(0x16d)](_0x2e2faa(0x1ef)+_0x29274a[_0x2e2faa(0x206)],'portfolio_'+_0x29274a[_0x2e2faa(0x206)])),_0x192b41%_0x336faa==0x0&&(_0x3148c0[_0x3d4383]=_0x20708c,_0x3d4383++);});const _0x4e7871=Markup[_0x248718(0x247)](_0x3148c0);_0xa8dcff['reply'](_0x248718(0x1da),_0x4e7871);}else{const _0x262126=_0x4707b7[0x0][_0x248718(0x206)];if(pid[_0x262126])pid[_0x262126][_0x248718(0x2b6)]({'function':_0x248718(0x2b2),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x5a6121=>{const _0x5429f8=_0x481723,_0x5ec713=_0x5a6121[_0x5429f8(0x198)][0x1];_0x5a6121['editMessageReplyMarkup']();if(pid[_0x5ec713])pid[_0x5ec713][_0x5429f8(0x2b6)]({'function':_0x5429f8(0x2b2),'args':null});}),tgBot['command'](_0x481723(0x27b),async _0x4aaf9d=>{const _0x28d308=_0x481723,_0x4f67f9=_0x28d308(0x27b);await zipFiles(_0x4f67f9);const _0x187185=zippath+(_0x4f67f9+_0x28d308(0x22a));_0x4aaf9d[_0x28d308(0x2ed)]({'source':_0x187185})['then'](()=>{})['catch'](_0x5b98bb=>logger[_0x28d308(0x35d)](_0x28d308(0x28a)+_0x4f67f9+_0x28d308(0x32c),_0x5b98bb));}),tgBot[_0x481723(0x2be)]('backup',async _0x635c59=>{const _0x578ab6=_0x481723,_0x1cf1a0=_0x578ab6(0x27a);await backupConfigFiles(),await zipFiles(_0x1cf1a0);const _0x428450=zippath+(_0x1cf1a0+_0x578ab6(0x22a));_0x635c59[_0x578ab6(0x2ed)]({'source':_0x428450})[_0x578ab6(0x237)](()=>{})['catch'](_0x18364e=>logger[_0x578ab6(0x35d)](_0x578ab6(0x28a)+_0x1cf1a0+_0x578ab6(0x32c),_0x18364e));}),tgBot['command'](_0x481723(0x157),async _0x3c926c=>{const _0x18df55=_0x481723;await getMessages();if(!updateAvailable)await sendTelegram(_0x3c926c[_0x18df55(0x31f)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x3c926c[_0x18df55(0x31f)]['id'],_0x18df55(0x332));else{const _0x38dd94=Markup[_0x18df55(0x247)]([Markup[_0x18df55(0x1d8)][_0x18df55(0x16d)](_0x18df55(0x2c2),_0x18df55(0x27d)),Markup[_0x18df55(0x1d8)][_0x18df55(0x16d)]('No','update_no')]);_0x3c926c[_0x18df55(0x36e)](_0x18df55(0x315),_0x38dd94);}}}),tgBot[_0x481723(0x2ec)](/update_(.+)/,async _0x2f4e87=>{const _0x1ac584=_0x481723,_0x54f482=_0x2f4e87['match'][0x1];_0x2f4e87[_0x1ac584(0x261)](),_0x54f482=='yes'&&(await sendTelegram(_0x2f4e87[_0x1ac584(0x31f)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x1ac584(0x157))),_0x54f482=='no'&&await sendTelegram(_0x2f4e87[_0x1ac584(0x31f)]['id'],_0x1ac584(0x1af));}),tgBot[_0x481723(0x2be)](_0x481723(0x27c),async _0x256674=>{const _0x543e75=_0x481723;if(!validInstallation)await sendTelegram(_0x256674[_0x543e75(0x31f)]['id'],_0x543e75(0x36a));else{const _0x2a21d1=Markup[_0x543e75(0x247)]([Markup[_0x543e75(0x1d8)]['callback'](_0x543e75(0x2c2),_0x543e75(0x1ac)),Markup[_0x543e75(0x1d8)]['callback']('No','reinstall_no')]);_0x256674[_0x543e75(0x36e)](_0x543e75(0x24e),_0x2a21d1);}}),tgBot[_0x481723(0x2ec)](/reinstall_(.+)/,async _0x107e55=>{const _0x53611e=_0x481723,_0x1658dc=_0x107e55[_0x53611e(0x198)][0x1];_0x107e55['editMessageReplyMarkup'](),_0x1658dc==_0x53611e(0x30a)&&(await sendTelegram(_0x107e55[_0x53611e(0x31f)]['id'],_0x53611e(0x195)),updateBB(_0x53611e(0x27c))),_0x1658dc=='no'&&await sendTelegram(_0x107e55['chat']['id'],_0x53611e(0x212));}),tgBot['command']('toggle',async _0x4162c7=>{const _0x4848a8=_0x481723,_0xaddde2=getBotsWithMode();if(_0xaddde2[_0x4848a8(0x284)]==0x0)await sendTelegram(_0x4162c7[_0x4848a8(0x31f)]['id'],_0x4848a8(0x1fe));else{let _0x138b40=[],_0xf849ab=[];const _0x2587db=0x2;let _0x3c9fe2=0x0;_0xaddde2[_0x4848a8(0x290)]((_0x480847,_0x2670bf)=>{const _0x4b1356=_0x4848a8;if(_0x2670bf%_0x2587db==0x0)_0xf849ab=[];_0xf849ab[_0x4b1356(0x2d7)](Markup[_0x4b1356(0x1d8)][_0x4b1356(0x16d)](_0x4b1356(0x1ef)+_0x480847[_0x4b1356(0x206)]+'\x20('+_0x480847['mode']+')',_0x4b1356(0x301)+_0x480847['botID'])),_0x2670bf%_0x2587db==0x0&&(_0x138b40[_0x3c9fe2]=_0xf849ab,_0x3c9fe2++);});const _0x39929d=Markup[_0x4848a8(0x247)](_0x138b40);_0x4162c7[_0x4848a8(0x36e)](_0x4848a8(0x183),_0x39929d);}}),tgBot[_0x481723(0x2ec)](/toggle_(.+)/,async _0xb2b0c7=>{const _0x3c8301=_0x481723,_0x438b5c=_0xb2b0c7[_0x3c8301(0x198)][0x1];_0xb2b0c7[_0x3c8301(0x261)]();const _0x3fca03=getBotsWithMode(),_0x1f12c5=_0x3fca03[_0x3c8301(0x1a3)](_0x2e6a6d=>_0x2e6a6d[_0x3c8301(0x206)]==_0x438b5c),_0x3ecfe4=_0x1f12c5[_0x3c8301(0x2bf)]=='auto'?_0x3c8301(0x33d):_0x3c8301(0x341);await sendTelegram(_0xb2b0c7['chat']['id'],_0x3c8301(0x257)+_0x438b5c+_0x3c8301(0x155)+_0x3ecfe4+'\x20mode'),toggleBotMode(_0x438b5c);}),tgBot[_0x481723(0x2be)]('names',async _0x1668c7=>{const _0x16ccf8=_0x481723;let _0x183572='';config[_0x16ccf8(0x290)](_0x55e82e=>{const _0x38a384=_0x16ccf8;_0x183572+=_0x38a384(0x1ef)+_0x55e82e[_0x38a384(0x206)]+':\x20'+_0x55e82e[_0x38a384(0x2dd)]+'\x0a';}),await sendTelegram(_0x1668c7[_0x16ccf8(0x31f)]['id'],_0x183572,{'parse_mode':'HTML'});}),tgBot[_0x481723(0x2be)](_0x481723(0x166),async _0xb0b1c6=>{const _0x182036=_0x481723;await sendTelegram(_0xb0b1c6[_0x182036(0x31f)]['id'],_0x365d5a);}),process['once'](_0x481723(0x25e),()=>tgBot[_0x481723(0x351)]('SIGINT')),process[_0x481723(0x18d)]('SIGTERM',()=>tgBot[_0x481723(0x351)](_0x481723(0x1f5))),tgBot[_0x481723(0x1d7)]();}function disableTelegram(){const _0xfe2a55=_0x28fc27;tgBot&&tgBot[_0xfe2a55(0x351)]();}async function sendTelegram(_0xb87932,_0x521095,_0x1c6fdc){const _0x49a362=_0x28fc27;_0x1c6fdc={..._0x1c6fdc,'disable_web_page_preview':!![]};try{await tgBot[_0x49a362(0x1e7)]['sendMessage'](_0xb87932,_0x521095,_0x1c6fdc);}catch(_0x2ff5ee){console['log'](_0x49a362(0x2e1),_0x2ff5ee);}}async function sendTelegramBot(_0x487b29,_0x32e3d5){const _0x5367d1=_0x28fc27;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x5367d1(0x1b1)||(_0x32e3d5[_0x5367d1(0x34f)]==_0x5367d1(0x2a5)||_0x32e3d5['type']==_0x5367d1(0x240)||_0x32e3d5[_0x5367d1(0x34f)]==_0x5367d1(0x214))&&settings['telegramEvents']==_0x5367d1(0x191)||_0x32e3d5[_0x5367d1(0x34f)]==_0x5367d1(0x219)&&settings[_0x5367d1(0x1b4)]==_0x5367d1(0x324)){if(tgBot&&settings[_0x5367d1(0x23a)]){if(_0x32e3d5[_0x5367d1(0x19a)])await sendTelegram(settings[_0x5367d1(0x23a)],_0x32e3d5['botname']+_0x5367d1(0x251)+_0x32e3d5[_0x5367d1(0x243)]);else await sendTelegram(settings[_0x5367d1(0x23a)],_0x5367d1(0x1ef)+_0x487b29+_0x5367d1(0x251)+_0x32e3d5[_0x5367d1(0x243)]);}}}}async function sendTelegramMsg(_0x7e0ce3,_0x566bb2='HTML'){const _0x56b23a=_0x28fc27;return settings[_0x56b23a(0x2d9)]&&tgBot&&settings[_0x56b23a(0x23a)]?(await sendTelegram(settings[_0x56b23a(0x23a)],_0x7e0ce3,{'parse_mode':_0x566bb2}),!![]):![];}function getDeviceWithIp(_0x1e27ef){return devices['find'](_0x17ab9d=>_0x17ab9d['ip']===_0x1e27ef);}async function temporaryAccess2FA(_0x3475f1,_0x50fd6b){const _0x2223b1=_0x28fc27;let _0x529b90=new Date(),_0x1bbaae=![];if(lastIpApproval){if(_0x529b90-lastIpApproval<0x1388)_0x1bbaae=!![];}lastIpApproval=new Date();if(_0x1bbaae)return;if(tgBot&&settings[_0x2223b1(0x23a)]){const _0x1b5ed1=uuidRandom();tmpStorage[_0x1b5ed1]={'uuid':_0x3475f1,'externalip':_0x50fd6b};const _0x4f40a0=Markup[_0x2223b1(0x247)]([Markup[_0x2223b1(0x1d8)][_0x2223b1(0x16d)](_0x2223b1(0x323),'tempaccess_5_'+_0x1b5ed1),Markup[_0x2223b1(0x1d8)][_0x2223b1(0x16d)]('15\x20min','tempaccess_15_'+_0x1b5ed1),Markup[_0x2223b1(0x1d8)][_0x2223b1(0x16d)](_0x2223b1(0x348),_0x2223b1(0x20f)+_0x1b5ed1),Markup[_0x2223b1(0x1d8)][_0x2223b1(0x16d)](_0x2223b1(0x235),'tempaccess_reject_'+_0x1b5ed1)]);await sendTelegram(settings['telegramChatId'],_0x2223b1(0x231)+normalizeIP(_0x50fd6b)['show']+'\x20?',_0x4f40a0),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x118e85=>{const _0x1a2a8b=_0x2223b1,_0x2d41cc=_0x118e85[_0x1a2a8b(0x198)][0x1],_0x1e77fa=_0x118e85[_0x1a2a8b(0x198)][0x2],{uuid:_0x2421ed,externalip:_0x56eb29}=tmpStorage[_0x1e77fa];delete tmpStorage[_0x1e77fa],_0x118e85[_0x1a2a8b(0x261)](),devices[_0x2421ed][_0x1a2a8b(0x21a)]={'clientip':_0x56eb29,'timestamp':new Date()[_0x1a2a8b(0x334)](),'expiry':_0x2d41cc},_0x2d41cc!=_0x1a2a8b(0x235)?(await sendTelegram(_0x118e85[_0x1a2a8b(0x31f)]['id'],_0x1a2a8b(0x199)+_0x2d41cc+_0x1a2a8b(0x259),{'parse_mode':_0x1a2a8b(0x192)}),io['to'](_0x2421ed)[_0x1a2a8b(0x338)](_0x1a2a8b(0x1e9),{'access':{'allow':![],'reason':_0x1a2a8b(0x20a),'token':null}})):(await sendTelegram(_0x118e85[_0x1a2a8b(0x31f)]['id'],_0x1a2a8b(0x2f5)),io['to'](_0x2421ed)[_0x1a2a8b(0x338)](_0x1a2a8b(0x1e9),{'access':{'allow':![],'reason':_0x1a2a8b(0x2f1),'token':null}}));});}}async function loginAccess2FA(_0x3ae11e,_0x212868){const _0x1a30fd=_0x28fc27;if(tgBot&&settings['telegramChatId']){const _0x2aecd9=uuidRandom();tmpStorage[_0x2aecd9]={'uuid':_0x3ae11e,'externalip':_0x212868};const _0x4026e1=Markup[_0x1a30fd(0x247)]([Markup[_0x1a30fd(0x1d8)]['callback'](_0x1a30fd(0x154),_0x1a30fd(0x1f8)+loginExpiry+'_'+_0x2aecd9),Markup[_0x1a30fd(0x1d8)]['callback'](_0x1a30fd(0x235),_0x1a30fd(0x220)+_0x2aecd9)]);await sendTelegram(settings['telegramChatId'],_0x1a30fd(0x325)+normalizeIP(_0x212868)[_0x1a30fd(0x1eb)]+'\x20?',_0x4026e1),tgBot[_0x1a30fd(0x2ec)](/login2fa_(.+)_(.+)/,async _0x382b6a=>{const _0x59ef89=_0x1a30fd,_0x44d23a=_0x382b6a[_0x59ef89(0x198)][0x1],_0x3b854f=_0x382b6a[_0x59ef89(0x198)][0x2],{uuid:_0x21a356,externalip:_0x1d9574}=tmpStorage[_0x3b854f];delete tmpStorage[_0x3b854f],_0x382b6a[_0x59ef89(0x261)](),devices[_0x21a356][_0x59ef89(0x2d4)]={'clientip':_0x1d9574,'timestamp':new Date()['getTime'](),'expiry':_0x44d23a},_0x44d23a!=_0x59ef89(0x235)?(await sendTelegram(_0x382b6a['chat']['id'],_0x59ef89(0x27e),{'parse_mode':_0x59ef89(0x192)}),io['to'](_0x21a356)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x382b6a[_0x59ef89(0x31f)]['id'],_0x59ef89(0x26b)),io['to'](_0x21a356)[_0x59ef89(0x338)](_0x59ef89(0x1e9),{'access':{'allow':![],'reason':_0x59ef89(0x2e0),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x86c06=_0x28fc27;return dbConfig[_0x86c06(0x36c)]('bots')[_0x86c06(0x297)](_0x86c06(0x206))[_0x86c06(0x1ff)]({'status':_0x86c06(0x352)})[_0x86c06(0x1c4)]()||[];}function getDisabledBots(){const _0x59eaa8=_0x28fc27;return dbConfig[_0x59eaa8(0x36c)](_0x59eaa8(0x156))[_0x59eaa8(0x297)](_0x59eaa8(0x206))['filter']({'status':_0x59eaa8(0x1f3)})['value']()||[];}function getBotAttributes(_0x30a42d){const _0x20e9fd=_0x28fc27;let _0x112c17={};const _0x2d7b28=configpath+'bot-'+_0x30a42d+'-config.json',_0x27cb5f=fs[_0x20e9fd(0x2af)](_0x2d7b28);if(_0x27cb5f){const _0x1e10be=fs[_0x20e9fd(0x303)](_0x2d7b28);try{const _0x41ca9f=JSON['parse'](_0x1e10be),_0x589f69=_0x41ca9f?_0x41ca9f[_0x20e9fd(0x197)][0x0][_0x20e9fd(0x256)]:![];_0x112c17[_0x20e9fd(0x2bf)]=_0x589f69?_0x20e9fd(0x341):_0x20e9fd(0x33d),_0x112c17[_0x20e9fd(0x2dd)]=_0x41ca9f?_0x41ca9f[_0x20e9fd(0x197)][0x0][_0x20e9fd(0x2dd)]:_0x20e9fd(0x1ef)+_0x30a42d;}catch(_0x478538){_0x112c17[_0x20e9fd(0x2bf)]=_0x20e9fd(0x33d),_0x112c17[_0x20e9fd(0x2dd)]=_0x20e9fd(0x1ef)+_0x30a42d;}}else _0x112c17[_0x20e9fd(0x2bf)]='manual',_0x112c17[_0x20e9fd(0x2dd)]=_0x20e9fd(0x1ef)+_0x30a42d;return _0x112c17;}function getBotsWithMode(){const _0x34c246=_0x28fc27,_0x1b7d0d=dbConfig[_0x34c246(0x36c)](_0x34c246(0x156))[_0x34c246(0x297)](_0x34c246(0x206))[_0x34c246(0x1c4)]()||[];return _0x1b7d0d['forEach'](_0x57c969=>{const _0x411a7d=_0x34c246;let _0x38d06b=getBotAttributes(_0x57c969['botID']);_0x57c969[_0x411a7d(0x2bf)]=_0x38d06b['mode'];}),_0x1b7d0d;}function getBotExchanges(){const _0x46f3e6=_0x28fc27;let _0x52aa11=[];const _0xf3ed8d=dbConfig[_0x46f3e6(0x36c)](_0x46f3e6(0x156))['sortBy'](_0x46f3e6(0x206))['value']()||[];_0xf3ed8d['forEach'](_0x10bb33=>{const _0x5c4123=_0x46f3e6;if(_0x10bb33[_0x5c4123(0x1e9)]=='enabled'){const _0x33269a=configpath+'bot-'+_0x10bb33[_0x5c4123(0x206)]+_0x5c4123(0x2d6),_0x28fb76=fs[_0x5c4123(0x2af)](_0x33269a);let _0x3052f6;if(_0x28fb76){const _0x4edff8=fs[_0x5c4123(0x303)](_0x33269a);try{const _0x1564b5=JSON['parse'](_0x4edff8);_0x3052f6=_0x1564b5?_0x1564b5[_0x5c4123(0x197)][0x0][_0x5c4123(0x1a0)]:null;}catch(_0x558e4b){}}if(_0x3052f6)_0x52aa11[_0x5c4123(0x2d7)](_0x3052f6);}});const _0xdc145a=[...new Set(_0x52aa11)]['sort']();return _0xdc145a;}async function initUser(){const _0x31e2e3=_0x28fc27;if(!settings[_0x31e2e3(0x153)]){const _0x5cb4fb=uuidRandom();mixpanel['alias'](_0x5cb4fb),updateSetting('userid',_0x5cb4fb);}}async function initSecure(){const _0x592742=_0x28fc27;let _0x2c74b3=getSecure();if(!_0x2c74b3['hasOwnProperty']('secret')){let _0x4adf37=await generateKeys();_0x2c74b3[_0x592742(0x17a)]=_0x4adf37['publicKey'],_0x2c74b3[_0x592742(0x34d)]=_0x4adf37[_0x592742(0x34d)],_0x2c74b3[_0x592742(0x32b)]=crypto[_0x592742(0x178)](0x20)['toString']('hex');;storeSecure(_0x2c74b3);}}function getSettings(){const _0x42d672=_0x28fc27;return dbSettings[_0x42d672(0x36c)](_0x42d672(0x2f8))['value']()||{};}function getSecure(){const _0x4ddea6=_0x28fc27;return dbSecure[_0x4ddea6(0x36c)](_0x4ddea6(0x2f6))[_0x4ddea6(0x1c4)]()||{};}function getBlacklist(){const _0x4e808a=_0x28fc27;return dbSecure[_0x4e808a(0x36c)](_0x4e808a(0x2a2))['value']()||[];}function broadcastToBots(_0x48b1e4,_0x222cc7){const _0x5f0ba3=_0x28fc27;config[_0x5f0ba3(0x290)](_0x10c9cf=>{const _0x101587=_0x5f0ba3;if(_0x10c9cf[_0x101587(0x1e9)]==_0x101587(0x352)&&_0x10c9cf[_0x101587(0x1f7)]==_0x101587(0x1ce)||_0x10c9cf[_0x101587(0x1e9)]==_0x101587(0x2b7)&&_0x10c9cf[_0x101587(0x1f7)]==_0x101587(0x1ce)){if(pid[_0x10c9cf[_0x101587(0x206)]])pid[_0x10c9cf[_0x101587(0x206)]][_0x101587(0x2b6)]({[_0x48b1e4]:_0x222cc7});}});}async function storeSettings(_0x2eb08f,_0x346b18=![]){const _0x395880=_0x28fc27;_0x2eb08f={...settings,..._0x2eb08f};if(_0x346b18&&_0x2eb08f[_0x395880(0x2ae)]!=_0x395880(0x286)&&_0x2eb08f[_0x395880(0x2ae)]!=_0x395880(0x28b)&&_0x2eb08f[_0x395880(0x2ae)]!=''){const _0x9b5b21=decryptRSA(secure['privateKey'],_0x2eb08f[_0x395880(0x2ae)])[_0x395880(0x1fd)]('|@|')[0x0],_0x51f41c=bcrypt[_0x395880(0x267)](_0x9b5b21,saltRounds);_0x2eb08f={..._0x2eb08f,'bbPassword':_0x51f41c};}if(_0x346b18&&_0x2eb08f[_0x395880(0x25f)]!=_0x395880(0x286)&&_0x2eb08f['telegramToken']!=_0x395880(0x28b)&&_0x2eb08f[_0x395880(0x25f)]!=''){const _0x463c91=decryptRSA(secure[_0x395880(0x34d)],_0x2eb08f[_0x395880(0x25f)])[_0x395880(0x1fd)](_0x395880(0x295))[0x0];_0x2eb08f={..._0x2eb08f,'telegramToken':_0x463c91};}if(_0x346b18&&_0x2eb08f['marketcapApi']!=_0x395880(0x286)&&_0x2eb08f[_0x395880(0x2ff)]!=_0x395880(0x28b)&&_0x2eb08f[_0x395880(0x2ff)]!=''){const _0x542445=decryptRSA(secure['privateKey'],_0x2eb08f[_0x395880(0x2ff)])[_0x395880(0x1fd)]('|@|')[0x0];_0x2eb08f={..._0x2eb08f,'marketcapApi':_0x542445};}const _0x432e23=_0x2eb08f['telegramToken']!=_0x395880(0x286)&&_0x2eb08f[_0x395880(0x25f)]!=settings['telegramToken']||_0x2eb08f['telegramUsername']!=settings[_0x395880(0x164)],_0x21aa35=_0x2eb08f['telegramToken']==''||_0x2eb08f[_0x395880(0x164)]=='',_0x2de573=_0x2eb08f[_0x395880(0x2ff)]&&_0x2eb08f[_0x395880(0x2ff)]!='************'&&_0x2eb08f[_0x395880(0x2ff)]!=settings['telegramToken'];_0x432e23&&(_0x2eb08f[_0x395880(0x23a)]=null,_0x2eb08f[_0x395880(0x1b4)]=_0x395880(0x1b1));for(const [_0xb1baeb,_0x13052c]of Object[_0x395880(0x230)](_0x2eb08f)){if(_0xb1baeb=='telegramToken'&&_0x13052c==_0x395880(0x286)){_0x2eb08f['telegramToken']=settings[_0x395880(0x25f)];continue;};if(_0xb1baeb==_0x395880(0x2ae)&&_0x13052c==_0x395880(0x286)){_0x2eb08f[_0x395880(0x2ae)]=settings[_0x395880(0x2ae)];continue;};if(_0xb1baeb==_0x395880(0x2ff)&&_0x13052c==_0x395880(0x286)){_0x2eb08f[_0x395880(0x2ff)]=settings['marketcapApi'];continue;};dbSettings['set'](_0x395880(0x288)+_0xb1baeb,_0x13052c)['write']();}settings=_0x2eb08f,io['to'](_0x395880(0x2eb))[_0x395880(0x338)](_0x395880(0x2f8),cleanSettings()),broadcastToBots(_0x395880(0x16a),settings['timeshift']),broadcastToBots(_0x395880(0x31b),settings['onepagemode']),broadcastToBots(_0x395880(0x2ff),settings['marketcapApi']);if(_0x432e23&&!_0x21aa35)initTelegram();if(_0x432e23&&_0x21aa35)disableTelegram();getAllClients()[_0x395880(0x290)](_0x143a0b=>{const _0x5b3187=_0x395880;getSocket(_0x143a0b['id'])['emit'](_0x5b3187(0x1e9),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x2de573&&(await sleep(0xbb8),testMarketcapApi(_0x2eb08f[_0x395880(0x2ff)]));}async function testMarketcapApi(_0x1e5cb0){const _0x113472=_0x28fc27,_0x47d7df=[_0x113472(0x151),_0x113472(0x269)];try{await axios[_0x113472(0x36c)](_0x113472(0x221),{'headers':{'X-CMC_PRO_API_KEY':_0x1e5cb0},'params':{'symbol':_0x47d7df[_0x113472(0x1e5)]()}});}catch(_0x3c9cda){_0x3c9cda[_0x113472(0x1e5)]()[_0x113472(0x20c)](_0x113472(0x20d))?(io['to'](_0x113472(0x2eb))[_0x113472(0x338)]('notification',_0x113472(0x1b3)),logger[_0x113472(0x22c)]('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x113472(0x2eb))[_0x113472(0x338)](_0x113472(0x2fd),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x113472(0x22c)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x113472(0x35d)](_0x113472(0x33b),_0x3c9cda[_0x113472(0x1e5)]()+'\x20-\x20'+_0x3c9cda[_0x113472(0x23c)]));return;}logger[_0x113472(0x35d)](_0x113472(0x239));}function updateSetting(_0x2b52df,_0x222610){const _0x508e48=_0x28fc27;dbSettings[_0x508e48(0x1ed)](_0x508e48(0x288)+_0x2b52df,_0x222610)['write'](),settings=getSettings(),io['to'](_0x508e48(0x2eb))[_0x508e48(0x338)](_0x508e48(0x2f8),cleanSettings());}function storeSecure(_0x1c42c0){const _0x4f0e17=_0x28fc27;dbSecure[_0x4f0e17(0x36c)](_0x4f0e17(0x2f6))[_0x4f0e17(0x2d7)](_0x1c42c0)['write'](),secure=_0x1c42c0;}function addBlacklist(_0x42382f){const _0x42fb61=_0x28fc27;cleanBlacklist();let _0x1b8352;devices[_0x42382f][_0x42fb61(0x21a)]?_0x1b8352=Math[_0x42fb61(0x1ae)](devices[_0x42382f][_0x42fb61(0x21a)][_0x42fb61(0x1c5)],loginExpiry):_0x1b8352=loginExpiry,dbSecure[_0x42fb61(0x36c)]('blacklist')[_0x42fb61(0x2d7)]({'expiry':new Date()[_0x42fb61(0x334)]()+_0x1b8352*0x3c*0x3e8,'token':devices[_0x42382f][_0x42fb61(0x29c)]['token']})[_0x42fb61(0x186)](),blacklist=dbSecure['get'](_0x42fb61(0x2a2))[_0x42fb61(0x1c4)]();}function cleanBlacklist(){const _0x4ccffb=_0x28fc27;let _0x3c0495=dbSecure[_0x4ccffb(0x36c)](_0x4ccffb(0x2a2))[_0x4ccffb(0x1ee)]()[_0x4ccffb(0x1c4)](),_0x51be15=new Date()[_0x4ccffb(0x334)]();_0x3c0495[_0x4ccffb(0x290)](_0x25c004=>{const _0x1a9641=_0x4ccffb;_0x25c004[_0x1a9641(0x1c5)]<_0x51be15&&dbSecure[_0x1a9641(0x36c)]('blacklist')[_0x1a9641(0x160)]({'expiry':_0x25c004[_0x1a9641(0x1c5)]})['write']();});}function initStates(){const _0x57acf2=_0x28fc27;let _0x7888f2=getConfiguration();_0x7888f2[_0x57acf2(0x290)](_0x4d893d=>{const _0x2da497=_0x57acf2;_0x4d893d['live']=_0x2da497(0x265);}),storeConfiguration(_0x7888f2);}async function generateKeys(){const _0x1c0ccb=_0x28fc27,_0x3afad2=forge[_0x1c0ccb(0x2c4)][_0x1c0ccb(0x189)][_0x1c0ccb(0x271)]({'bits':0x1000,'e':0x10001}),_0x315799=forge[_0x1c0ccb(0x2c4)][_0x1c0ccb(0x193)](_0x3afad2[_0x1c0ccb(0x34d)]),_0x3f578d=forge[_0x1c0ccb(0x2c4)][_0x1c0ccb(0x367)](_0x3afad2[_0x1c0ccb(0x17a)]);return{'privateKey':_0x315799,'publicKey':_0x3f578d};}async function oneTimeMigration(){const _0x137111=_0x28fc27;let _0x2d87a6=getSettings(),_0x463e95=![];!_0x2d87a6[_0x137111(0x21d)](_0x137111(0x320))&&(_0x2d87a6[_0x137111(0x320)]=0x0,_0x463e95=!![]);!_0x2d87a6['hasOwnProperty'](_0x137111(0x203))&&(_0x2d87a6[_0x137111(0x203)]=0x0,_0x463e95=!![]);!_0x2d87a6[_0x137111(0x21d)]('latestversion')&&(_0x2d87a6[_0x137111(0x222)]=_0x137111(0x1d5),_0x463e95=!![]);!_0x2d87a6[_0x137111(0x21d)](_0x137111(0x31b))&&(_0x2d87a6[_0x137111(0x31b)]=![],_0x463e95=!![]);!_0x2d87a6[_0x137111(0x21d)]('marketcapApi')&&(_0x2d87a6[_0x137111(0x2ff)]='',_0x463e95=!![]);if(_0x463e95)storeSettings(_0x2d87a6);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x137111(0x290)](_0x5f546c=>{const _0x3ca197=_0x137111;if(!_0x5f546c[_0x3ca197(0x2b9)]()){if(!_0x5f546c[_0x3ca197(0x2f7)][_0x3ca197(0x305)](_0x3ca197(0x169)))fs[_0x3ca197(0x200)](configbackuppath+_0x5f546c[_0x3ca197(0x2f7)]);}else fs[_0x3ca197(0x244)](configbackuppath+_0x5f546c['name'],{'recursive':!![]});});}catch(_0x3b4234){logger[_0x137111(0x35d)](_0x137111(0x26a),_0x3b4234);}}function storeConfiguration(_0x2e8ca5){const _0x1a3abe=_0x28fc27;dbConfig[_0x1a3abe(0x36c)](_0x1a3abe(0x156))[_0x1a3abe(0x160)]()[_0x1a3abe(0x186)](),dbConfig[_0x1a3abe(0x36c)](_0x1a3abe(0x156))['push'](..._0x2e8ca5)[_0x1a3abe(0x186)](),config=_0x2e8ca5;}async function resetPassword(){const _0x3e893c=_0x28fc27;if(tgBot&&settings[_0x3e893c(0x23a)]){const _0x34c3bb=Markup[_0x3e893c(0x247)]([Markup[_0x3e893c(0x1d8)][_0x3e893c(0x16d)](_0x3e893c(0x30a),_0x3e893c(0x24a)),Markup[_0x3e893c(0x1d8)][_0x3e893c(0x16d)]('no',_0x3e893c(0x18f))]);await sendTelegram(settings[_0x3e893c(0x23a)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x34c3bb),tgBot[_0x3e893c(0x2ec)](/resetpw_(.+)/,async _0x511e93=>{const _0x2cab0a=_0x3e893c,_0x53c42e=_0x511e93['match'][0x1];_0x511e93['editMessageReplyMarkup']();if(_0x53c42e!='no'){const _0x48a9e7=0xf,_0x5eb5f8=_0x2cab0a(0x218),_0x2826cb=Array[_0x2cab0a(0x306)](crypto[_0x2cab0a(0x22b)](new Uint32Array(_0x48a9e7)))[_0x2cab0a(0x2de)](_0xfe5245=>_0x5eb5f8[_0xfe5245%_0x5eb5f8[_0x2cab0a(0x284)]])['join'](''),_0x406bcb=bcrypt['hashSync'](_0x2826cb,saltRounds);storeSettings({'bbPassword':_0x406bcb}),await sendTelegram(_0x511e93[_0x2cab0a(0x31f)]['id'],_0x2cab0a(0x204)+_0x2826cb,{'parse_mode':'HTML'});}else await sendTelegram(_0x511e93[_0x2cab0a(0x31f)]['id'],_0x2cab0a(0x2f3));});}}async function confirmRestore(_0x353369,_0x1e7e91){const _0x3ddcc9=_0x28fc27;io['to'](_0x3ddcc9(0x2eb))[_0x3ddcc9(0x338)]('notification',_0x3ddcc9(0x319),_0x3ddcc9(0x214));if(tgBot&&settings[_0x3ddcc9(0x23a)]){const _0x1cde88=uuidRandom();tmpStorage[_0x1cde88]={'path':_0x353369,'filename':_0x1e7e91};const _0x1064b5=Markup['inlineKeyboard']([Markup[_0x3ddcc9(0x1d8)][_0x3ddcc9(0x16d)](_0x3ddcc9(0x30a),'restore_yes_'+_0x1cde88),Markup[_0x3ddcc9(0x1d8)]['callback']('no',_0x3ddcc9(0x2d1)+_0x1cde88)]);await sendTelegram(settings[_0x3ddcc9(0x23a)],_0x3ddcc9(0x1cf),_0x1064b5),tgBot[_0x3ddcc9(0x2ec)](/restore_(.+)_(.+)/,async _0x38c178=>{const _0x50ff80=_0x3ddcc9,_0xf41435=_0x38c178[_0x50ff80(0x198)][0x1],_0x2249a9=_0x38c178[_0x50ff80(0x198)][0x2],{path:_0x8f26ee,filename:_0x4f52a4}=tmpStorage[_0x2249a9];delete tmpStorage[_0x2249a9],_0x38c178[_0x50ff80(0x261)](),_0xf41435=='yes'?(logger[_0x50ff80(0x35d)](_0x50ff80(0x1d1)),await sendTelegram(_0x38c178['chat']['id'],_0x50ff80(0x1ad),{'parse_mode':_0x50ff80(0x192)}),unzipFile(_0x8f26ee,_0x4f52a4)):(logger[_0x50ff80(0x35d)]('Restore\x20process\x20aborted'),await sendTelegram(_0x38c178[_0x50ff80(0x31f)]['id'],_0x50ff80(0x1a9)));});}}function getServerTime(){const _0x7c0c09=_0x28fc27,_0x1ee7eb=new Date();return _0x1ee7eb[_0x7c0c09(0x2a4)]()+'/'+(_0x1ee7eb[_0x7c0c09(0x185)]()+0x1)[_0x7c0c09(0x1e5)]()[_0x7c0c09(0x20b)](0x2,'0')+'/'+_0x1ee7eb[_0x7c0c09(0x2fa)]()[_0x7c0c09(0x1e5)]()[_0x7c0c09(0x20b)](0x2,'0')+'\x20'+_0x1ee7eb[_0x7c0c09(0x294)]()[_0x7c0c09(0x1e5)]()['padStart'](0x2,'0')+':'+_0x1ee7eb['getMinutes']()[_0x7c0c09(0x1e5)]()[_0x7c0c09(0x20b)](0x2,'0')+':'+_0x1ee7eb[_0x7c0c09(0x274)]()['toString']()[_0x7c0c09(0x20b)](0x2,'0');}function getTimeStamp(){const _0x5e1b5b=_0x28fc27,_0x10d861=shiftedTime();return _0x10d861['getFullYear']()+'/'+(_0x10d861[_0x5e1b5b(0x185)]()+0x1)[_0x5e1b5b(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x10d861[_0x5e1b5b(0x2fa)]()[_0x5e1b5b(0x1e5)]()[_0x5e1b5b(0x20b)](0x2,'0')+'\x20'+_0x10d861['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x10d861[_0x5e1b5b(0x15b)]()[_0x5e1b5b(0x1e5)]()[_0x5e1b5b(0x20b)](0x2,'0')+':'+_0x10d861[_0x5e1b5b(0x274)]()[_0x5e1b5b(0x1e5)]()[_0x5e1b5b(0x20b)](0x2,'0');}function getCleanTimeStamp(){const _0x3110d5=_0x28fc27,_0xe0434b=shiftedTime();return _0xe0434b[_0x3110d5(0x2a4)]()+(_0xe0434b[_0x3110d5(0x185)]()+0x1)[_0x3110d5(0x1e5)]()[_0x3110d5(0x20b)](0x2,'0')+_0xe0434b['getDate']()['toString']()[_0x3110d5(0x20b)](0x2,'0')+'-'+_0xe0434b[_0x3110d5(0x294)]()[_0x3110d5(0x1e5)]()[_0x3110d5(0x20b)](0x2,'0')+_0xe0434b[_0x3110d5(0x15b)]()[_0x3110d5(0x1e5)]()['padStart'](0x2,'0')+_0xe0434b[_0x3110d5(0x274)]()[_0x3110d5(0x1e5)]()[_0x3110d5(0x20b)](0x2,'0');}function shiftedTime(){const _0x23c4f7=_0x28fc27,_0xa0d70=new Date();let _0x198231=_0xa0d70;if(settings[_0x23c4f7(0x16a)]&&settings[_0x23c4f7(0x16a)]!==0x0)_0x198231=fns['add'](_0xa0d70,{'hours':settings['timeshift']});return _0x198231;}async function startScheduler(){const _0x151252=_0x28fc27,_0x5ab5c5=new Date()[_0x151252(0x2c8)](),_0x4f3c80=shiftedTime()[_0x151252(0x294)]();_0x4f3c80==0x4&&backupConfigFiles(),_0x4f3c80==0x0&&rotateLogFiles(),_0x5ab5c5%0x6==0x0&&triggerAnalytics(),_0x5ab5c5%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x2bf267){const _0x53f1d5=_0x28fc27;logger[_0x53f1d5(0x35d)](_0x53f1d5(0x1ec)+_0x2bf267);const _0x39c0b1=getBotsWithMode();_0x39c0b1[_0x53f1d5(0x284)]>0x0?confirmRestore(configbackuppath,_0x2bf267):unzipFile(configbackuppath,_0x2bf267);}async function getBackupFiles(_0x3f7694=null){const _0xd56f3=_0x28fc27;let _0x23cccf=[],_0x200076=fs[_0xd56f3(0x287)](configbackuppath,{'withFileTypes':!![]});_0x200076[_0xd56f3(0x275)]((_0x20c5ae,_0x29efe4)=>_0x20c5ae[_0xd56f3(0x2f7)]<_0x29efe4[_0xd56f3(0x2f7)]?0x1:_0x29efe4['name']<_0x20c5ae[_0xd56f3(0x2f7)]?-0x1:0x0),_0x200076[_0xd56f3(0x290)](_0x1d92f9=>{const _0x5d927b=_0xd56f3;if(!_0x1d92f9[_0x5d927b(0x2b9)]()&&_0x1d92f9[_0x5d927b(0x2f7)]['startsWith'](_0x5d927b(0x169))&&_0x1d92f9[_0x5d927b(0x2f7)][_0x5d927b(0x163)]('.zip')){const _0x181e30=formatDate(fs[_0x5d927b(0x2c3)](configbackuppath+_0x1d92f9[_0x5d927b(0x2f7)])['mtime']);_0x23cccf[_0x5d927b(0x2d7)]({'name':_0x1d92f9[_0x5d927b(0x2f7)],'mtime':_0x181e30});}});if(_0x3f7694)io['to'](_0x3f7694)[_0xd56f3(0x338)](_0xd56f3(0x1de),_0x23cccf);else return _0x23cccf;}async function backupConfigFiles(){const _0x11c10a=_0x28fc27;await zipFiles(_0x11c10a(0x2f2));const _0x171f1f=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+(_0x11c10a(0x169)+_0x171f1f+_0x11c10a(0x22a)));let _0x414c93=fs[_0x11c10a(0x287)](configbackuppath,{'withFileTypes':!![]});_0x414c93[_0x11c10a(0x275)]((_0x2ee605,_0x560d9d)=>_0x2ee605[_0x11c10a(0x2f7)]<_0x560d9d[_0x11c10a(0x2f7)]?0x1:_0x560d9d[_0x11c10a(0x2f7)]<_0x2ee605[_0x11c10a(0x2f7)]?-0x1:0x0),_0x414c93[_0x11c10a(0x284)]>maxBackups&&fs[_0x11c10a(0x200)](configbackuppath+_0x414c93[_0x414c93[_0x11c10a(0x284)]-0x1][_0x11c10a(0x2f7)]);}function rotateLogFiles(){const _0x35c26b=_0x28fc27,_0x5a3edc=fs[_0x35c26b(0x2c3)](logspath+'output-000.log'),_0x4413db=_0x5a3edc['size']/0x400;if(_0x4413db>0x64){let _0x5a8223=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x5a8223[_0x35c26b(0x275)]((_0x433647,_0x552443)=>_0x433647[_0x35c26b(0x2f7)]<_0x552443[_0x35c26b(0x2f7)]?0x1:_0x552443[_0x35c26b(0x2f7)]<_0x433647[_0x35c26b(0x2f7)]?-0x1:0x0),_0x5a8223[_0x35c26b(0x290)](_0x2bd539=>{const _0x3779be=_0x35c26b;if(_0x2bd539[_0x3779be(0x2f7)]==_0x3779be(0x2d0))fs[_0x3779be(0x321)](logspath+_0x2bd539[_0x3779be(0x2f7)],logspath+_0x3779be(0x296));if(_0x2bd539[_0x3779be(0x2f7)]==_0x3779be(0x266))fs[_0x3779be(0x321)](logspath+_0x2bd539['name'],logspath+_0x3779be(0x2d0));_0x2bd539[_0x3779be(0x2f7)]==_0x3779be(0x1e0)&&(fs[_0x3779be(0x321)](logspath+_0x2bd539['name'],logspath+'output-001.log'),fs[_0x3779be(0x1c3)](logspath+_0x2bd539[_0x3779be(0x2f7)],''));});}}async function zipFiles(_0x986b0a){const _0x55fa1f=_0x28fc27;let _0x357ab1;if(_0x986b0a==_0x55fa1f(0x27b))_0x357ab1=logspath;if(_0x986b0a=='backup')_0x357ab1=configpath;if(_0x986b0a=='backup-full')_0x357ab1=configpath;let _0x2750be=fs[_0x55fa1f(0x287)](_0x357ab1,{'withFileTypes':!![]});const _0x504ba2=new JSZip();_0x2750be[_0x55fa1f(0x290)](_0x2a7d59=>{const _0x5d9d82=_0x55fa1f;if(!_0x2a7d59['isDirectory']()){let _0xf633bc=fs[_0x5d9d82(0x303)](_0x357ab1+_0x2a7d59[_0x5d9d82(0x2f7)]);if(_0x986b0a==_0x5d9d82(0x27a)){const _0x1416c6=/^bot-[0-9]{3}-config.json$/,_0x4057a5=_0x1416c6['test'](_0x2a7d59[_0x5d9d82(0x2f7)]);if(_0x4057a5){const _0x5247b5=JSON['parse'](_0xf633bc);if(_0x5247b5['bot'][0x0]){_0x5247b5[_0x5d9d82(0x197)][0x0][_0x5d9d82(0x24f)]='***',_0x5247b5[_0x5d9d82(0x197)][0x0]['apiSecret']=_0x5d9d82(0x28b);if(_0x5247b5[_0x5d9d82(0x197)][0x0][_0x5d9d82(0x254)])_0x5247b5[_0x5d9d82(0x197)][0x0][_0x5d9d82(0x254)]=_0x5d9d82(0x28b);}_0xf633bc=JSON['stringify'](_0x5247b5,null,0x2);}if(_0x2a7d59[_0x5d9d82(0x2f7)]==_0x5d9d82(0x23f)){const _0x3f6c1f=JSON[_0x5d9d82(0x17b)](_0xf633bc);if(_0x3f6c1f['settings']['loginRequired'])_0x3f6c1f[_0x5d9d82(0x2f8)][_0x5d9d82(0x253)]=![];if(_0x3f6c1f[_0x5d9d82(0x2f8)][_0x5d9d82(0x2ae)])_0x3f6c1f[_0x5d9d82(0x2f8)][_0x5d9d82(0x2ae)]='***';if(_0x3f6c1f['settings']['telegramToken'])_0x3f6c1f[_0x5d9d82(0x2f8)][_0x5d9d82(0x25f)]=_0x5d9d82(0x28b);if(_0x3f6c1f['settings'][_0x5d9d82(0x23a)])_0x3f6c1f['settings'][_0x5d9d82(0x23a)]=null;if(_0x3f6c1f['settings'][_0x5d9d82(0x2ff)])_0x3f6c1f['settings'][_0x5d9d82(0x2ff)]=_0x5d9d82(0x28b);_0xf633bc=JSON[_0x5d9d82(0x1fa)](_0x3f6c1f,null,0x2);}if(_0x2a7d59[_0x5d9d82(0x2f7)]!=_0x5d9d82(0x336))_0x504ba2[_0x5d9d82(0x1f0)](_0x2a7d59[_0x5d9d82(0x2f7)],_0xf633bc);}else _0x504ba2[_0x5d9d82(0x1f0)](_0x2a7d59[_0x5d9d82(0x2f7)],_0xf633bc);}});const _0x501a4d=await _0x504ba2[_0x55fa1f(0x28f)]({'type':_0x55fa1f(0x28c),'base64':![],'compression':_0x55fa1f(0x158)});fs['writeFileSync'](zippath+(_0x986b0a+'.zip'),_0x501a4d,_0x55fa1f(0x316));}async function unzipFile(_0x4a538b,_0x370122){const _0x33e8cd=_0x28fc27;fs[_0x33e8cd(0x287)](configpath,{'withFileTypes':!![]})['forEach'](_0x3a053a=>{const _0x48ddaf=_0x33e8cd;if(!_0x3a053a[_0x48ddaf(0x2b9)]())fs['rmSync'](configpath+_0x3a053a[_0x48ddaf(0x2f7)]);});const _0x2d8c6e=fs[_0x33e8cd(0x303)](_0x4a538b+_0x370122,_0x33e8cd(0x316)),_0x507b50=await JSZip[_0x33e8cd(0x360)](_0x2d8c6e,{'base64':![],'checkCRC32':!![]});for(const _0x2f69f1 of Object[_0x33e8cd(0x2fc)](_0x507b50[_0x33e8cd(0x238)])){const _0x4e6f7b=_0x507b50[_0x33e8cd(0x238)][_0x2f69f1],_0x2df858=await _0x4e6f7b[_0x33e8cd(0x308)](_0x33e8cd(0x28c));fs[_0x33e8cd(0x1c3)](configpath+_0x4e6f7b[_0x33e8cd(0x2f7)],_0x2df858);}fs[_0x33e8cd(0x287)](temppath,{'withFileTypes':!![]})[_0x33e8cd(0x290)](_0x1c73f2=>{const _0x1384f6=_0x33e8cd;if(!_0x1c73f2[_0x1384f6(0x2b9)]())fs[_0x1384f6(0x244)](temppath+_0x1c73f2['name']);}),logger['debug'](_0x33e8cd(0x17c)),process['send']({'restore':!![]},_0x2a71e3=>{});}async function getPublicIp(){const _0x293658=_0x28fc27;try{const _0x195a9e=await axios[_0x293658(0x36c)](_0x293658(0x2c5));publicip=_0x195a9e[_0x293658(0x2bb)]['ip'];}catch(_0x4774db){}}async function triggerAnalytics(){const _0x50bc9e=_0x28fc27;if(!publicip)await getPublicIp();const _0x305b87=getBotsWithMode();let _0x55a0be=0x0;_0x305b87[_0x50bc9e(0x290)](_0x38145e=>{const _0x13f77a=_0x50bc9e;if(_0x38145e[_0x13f77a(0x1e9)]===_0x13f77a(0x352))_0x55a0be++;});const _0x3306cb=getBotExchanges();mixpanel[_0x50bc9e(0x17d)](_0x50bc9e(0x2d5),{'distinct_id':settings[_0x50bc9e(0x153)],'ip':publicip,'version':serverversion,'numbots':_0x305b87[_0x50bc9e(0x284)],'numbotsenabled':_0x55a0be,'exchanges':_0x3306cb,'environment':environment});}async function getMessages(){const _0x226ffa=_0x28fc27,_0x54f968='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x3fdc49=new GraphQLClient(_0x54f968),_0x4b9225={'authorization':_0x226ffa(0x362)},_0x2be555=serverversion[_0x226ffa(0x1fd)]('.'),_0x1916a5=_0x2be555[0x0]+'.'+_0x2be555[0x1],_0x3099cb=Math[_0x226ffa(0x32f)](settings[_0x226ffa(0x320)],settings[_0x226ffa(0x203)]),_0x56ee40={'last':parseInt(_0x3099cb),'bbm':_0x1916a5},_0x4d62de=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x119c6b;try{_0x119c6b=await _0x3fdc49[_0x226ffa(0x347)](_0x4d62de,_0x56ee40,_0x4b9225);}catch(_0x5bcd31){}if(_0x119c6b&&_0x119c6b['messages']){let _0x566d8a=settings['lastmsgtelegram'];newMessages=[];for(const _0x2e15c3 of _0x119c6b[_0x226ffa(0x21c)]){newMessages['push'](_0x2e15c3);let _0xfeb800=![];_0x2e15c3[_0x226ffa(0x2ee)]&&(updateSetting(_0x226ffa(0x222),_0x2e15c3[_0x226ffa(0x2ee)]),_0xfeb800=isNewerVersion(serverversion,_0x2e15c3['bbvNew'])||serverversion==_0x2e15c3[_0x226ffa(0x2ee)]);if(!_0xfeb800&&_0x2e15c3[_0x226ffa(0x322)]>_0x566d8a){if(_0x2e15c3[_0x226ffa(0x34c)]==='any'||serverversion[_0x226ffa(0x305)](_0x2e15c3[_0x226ffa(0x34c)])){let _0x16a4aa=''+_0x2e15c3[_0x226ffa(0x318)]+'\x0a\x0a'+_0x2e15c3[_0x226ffa(0x2f0)];const _0x4f5cab=await sendTelegramMsg(toTelegramMarkdown(_0x16a4aa),'Markdown');if(_0x4f5cab)_0x566d8a=_0x2e15c3[_0x226ffa(0x322)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x226ffa(0x320),_0x566d8a),emitMessages();}}function emitMessages(){const _0x532f9d=_0x28fc27,_0x53b10b=settings[_0x532f9d(0x203)];let _0x5e114d=[];newMessages['forEach'](_0x1b46bf=>{const _0x482be6=_0x532f9d;_0x1b46bf[_0x482be6(0x322)]>_0x53b10b&&_0x5e114d[_0x482be6(0x2d7)](_0x1b46bf);}),_0x5e114d[_0x532f9d(0x284)]>0x0&&getAllClients()[_0x532f9d(0x290)](_0x56a154=>{const _0x426b61=_0x532f9d;getSocket(_0x56a154['id'])[_0x426b61(0x338)]('message',_0x5e114d);});}function confirmMessage(_0x5573a4){const _0x152240=_0x28fc27;updateSetting(_0x152240(0x203),Number(_0x5573a4));}function isNewerVersion(_0x5db82c,_0x4b113f){const _0x42b384=_0x28fc27,_0x4987e4=_0x4b113f[_0x42b384(0x1fd)]('.'),_0x4abc85=_0x5db82c[_0x42b384(0x1fd)]('.');for(var _0x2ea36f=0x0;_0x2ea36f<_0x4abc85[_0x42b384(0x284)];_0x2ea36f++){const _0x55eb66=~~_0x4abc85[_0x2ea36f],_0xdeb1fd=~~_0x4987e4[_0x2ea36f];if(_0x55eb66>_0xdeb1fd)return!![];if(_0x55eb66<_0xdeb1fd)return![];}return![];}function toTelegramMarkdown(_0xa58073){const _0x43c4f0=_0x28fc27,_0x33df93=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x41c92f=/\*{2}(.+?)\*{2}/gim;return _0xa58073=_0xa58073['replace'](_0x33df93,_0x43c4f0(0x314))[_0x43c4f0(0x181)](_0x41c92f,_0x43c4f0(0x216)),_0xa58073;}async function validateConfigFile(){const _0x25a279=_0x28fc27,_0x1b2f6f=dbConfig[_0x25a279(0x36c)](_0x25a279(0x156))[_0x25a279(0x297)](_0x25a279(0x206))['value']()||[];if(_0x1b2f6f[_0x25a279(0x284)]==0x0){let _0x32518f=0x0,_0x5c243a=[];const _0x1f5440=/^bot-([0-9]{3})-config.json$/,_0x21bb77=fs[_0x25a279(0x287)](configpath);_0x21bb77[_0x25a279(0x290)](_0xfb2925=>{const _0x2097df=_0x25a279,_0x10c9bf=_0x1f5440[_0x2097df(0x369)](_0xfb2925);if(_0x10c9bf){const _0x1e42e5=_0x10c9bf[0x1];let _0x5dba99=getBotAttributes(_0x1e42e5);_0x5c243a['push']({'botID':_0x1e42e5,'botname':_0x5dba99[_0x2097df(0x2dd)],'status':_0x2097df(0x1f3),'live':'stopped'}),_0x32518f++;}}),_0x32518f!=0x0&&(dbConfig[_0x25a279(0x36c)](_0x25a279(0x156))['assign'](_0x5c243a)['write'](),config=_0x5c243a,restoredConfigFile=_0x32518f);}}async function restoreConfigNotify(_0x40cbd8){const _0x36f592=_0x28fc27;let _0x28f7cf;if(restoredConfigFile==0x1)_0x28f7cf=_0x36f592(0x311);else _0x28f7cf=_0x36f592(0x2db);if(_0x40cbd8)io['to'](_0x36f592(0x2eb))['emit'](_0x36f592(0x2fd),_0x28f7cf);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x36f592(0x298)](_0x28f7cf),logger[_0x36f592(0x298)](_0x36f592(0x1f2)),logger[_0x36f592(0x298)]('');if(tgBot&&settings[_0x36f592(0x23a)]&&settings['telegramEvents']!=_0x36f592(0x324))await sendTelegram(settings[_0x36f592(0x23a)],_0x36f592(0x2a3)+_0x28f7cf);}}function decryptRSA(_0x1eb537,_0x4621b0){const _0x1ec109=_0x28fc27,_0xa36301=forge['pki'][_0x1ec109(0x15c)](_0x1eb537),_0x3aadab=_0xa36301[_0x1ec109(0x310)](forge['util'][_0x1ec109(0x1bb)](_0x4621b0),_0x1ec109(0x2df),{'md':forge['md'][_0x1ec109(0x35a)][_0x1ec109(0x317)](),'mgf1':{'md':forge['md'][_0x1ec109(0x35a)][_0x1ec109(0x317)]()}});return _0x3aadab;}function validateCredentials(_0x43744c,_0x3cf2e5){const _0x4a09fa=_0x28fc27;if(_0x43744c[_0x4a09fa(0x2c0)]==settings['bbUsername']&&bcrypt['compareSync'](_0x43744c[_0x4a09fa(0x1d3)],settings[_0x4a09fa(0x2ae)])){if(settings[_0x4a09fa(0x1dd)])return{'allow':![],'reason':_0x4a09fa(0x248),'token':null};else{const _0x29535c=generateLoginToken(_0x3cf2e5);return{'allow':!![],'reason':_0x4a09fa(0x26d),'token':_0x29535c};}}else return{'allow':![],'reason':_0x4a09fa(0x24b),'token':null};}function refreshToken(_0x53393b){const _0x25928c=generateLoginToken(_0x53393b);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x25928c};}function validateAccess(_0x3c5859,_0x40939d,_0x82a2e4){const _0xdbedd1=_0x28fc27,_0xdc5977=_0x82a2e4?_0x82a2e4:devices[_0x40939d]['ip'];let _0x1f0cf9;const _0x3742df=_0x15297c=>{const _0x4291b6=_0xb44b;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x40939d)){const _0x10006d=generateLoginToken(_0x40939d);return{'allow':!![],'reason':_0x4291b6(0x312),'token':_0x10006d};}else return{'allow':![],'reason':_0x4291b6(0x2e5),'token':null};}else return _0x1f0cf9=validToken(_0x15297c,_0x40939d),_0x1f0cf9[_0x4291b6(0x21d)](_0x4291b6(0x214))?{'allow':!![],'reason':_0x4291b6(0x344),'token':_0x15297c}:{'allow':![],'reason':_0x4291b6(0x2e5),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0xdbedd1(0x340)]){let _0x51ff94=[...settings[_0xdbedd1(0x1ba)],'::1',_0xdbedd1(0x273),_0xdbedd1(0x1d4)];if(_0x51ff94[_0xdbedd1(0x20c)](_0xdc5977))return _0x3742df(_0x3c5859);else{_0x1f0cf9=validToken(_0x3c5859,_0x40939d);if(_0x1f0cf9['hasOwnProperty'](_0xdbedd1(0x214)))return _0x3742df(_0x3c5859);else{if(telegramIpApproved(_0x40939d)){const _0x483dbd=generateToken(_0x40939d);return _0x1f0cf9=_0x3742df(_0x3c5859),_0x1f0cf9['allow']?{'allow':!![],'reason':_0xdbedd1(0x16e),'token':_0x483dbd}:_0x1f0cf9;}else return settings[_0xdbedd1(0x1be)]?{'allow':![],'reason':_0xdbedd1(0x358),'token':null}:{'allow':![],'reason':_0xdbedd1(0x2ef),'token':null};}}}else return _0x3742df(_0x3c5859);}function timelyDecrypt(_0x4bca97,_0x38fa50,_0x203c18='@'){const _0x670098=_0x28fc27;if(_0x4bca97)try{const _0x4e3f98=decryptRSA(secure['privateKey'],_0x4bca97),_0x1e9642=_0x4e3f98[_0x670098(0x1fd)](_0x203c18)[0x0],_0x102047=_0x4e3f98[_0x670098(0x1fd)](_0x203c18)[0x1],_0x30c126=new Date()[_0x670098(0x334)]();if(_0x38fa50){if(_0x30c126-_0x102047<maxSecretAge*0x3e8)return _0x1e9642;else return![];}else return _0x1e9642;}catch(_0x2fd393){return![];}else return![];}const validToken=(_0x5bdd57,_0x36d8f2)=>{const _0x29b6c2=_0x28fc27,_0x78bc86=devices[_0x36d8f2]['ip'];if(!_0x5bdd57)return{'error':_0x29b6c2(0x35f)};for(let _0xd2d367 of blacklist){if(_0xd2d367['token']==_0x5bdd57)return{'error':'Token\x20blacklisted'};}let _0x18d32c;try{_0x18d32c=jwt['verify'](_0x5bdd57,secure[_0x29b6c2(0x32b)]+_0x36d8f2);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x18d32c[_0x29b6c2(0x21d)]('clientip')&&!_0x18d32c[_0x29b6c2(0x21d)](_0x29b6c2(0x2c0))||!_0x18d32c['hasOwnProperty'](_0x29b6c2(0x29f)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x18d32c[_0x29b6c2(0x21d)]('username')&&_0x18d32c['hasOwnProperty'](_0x29b6c2(0x35e))){const {clientip:_0x7bbfe2}=_0x18d32c;return _0x78bc86==_0x7bbfe2?{'success':_0x29b6c2(0x32a)}:{'error':_0x29b6c2(0x168)};}else{if(_0x18d32c[_0x29b6c2(0x21d)](_0x29b6c2(0x2c0))&&_0x18d32c[_0x29b6c2(0x21d)](_0x29b6c2(0x35e))){const {username:_0x4ce2ce,clientip:_0x561b73}=_0x18d32c;return settings[_0x29b6c2(0x1bf)]==_0x4ce2ce&&_0x78bc86==_0x561b73?{'success':_0x29b6c2(0x32a)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xa1982e=>{const _0x73d37d=_0x28fc27;if(_0xa1982e){const _0x3d6918=devices[_0xa1982e]['ip'];return jwt[_0x73d37d(0x258)]({'username':settings[_0x73d37d(0x1bf)],'clientip':_0x3d6918},secure['secret']+_0xa1982e,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3af6cc=>{const _0x2a7125=_0x28fc27;if(_0x3af6cc){const _0x342a9e=devices[_0x3af6cc]['ip'];return jwt['sign']({'clientip':_0x342a9e},secure[_0x2a7125(0x32b)]+_0x3af6cc,{'expiresIn':devices[_0x3af6cc][_0x2a7125(0x21a)][_0x2a7125(0x1c5)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x3115f9=>{const _0x50dda3=_0x28fc27;let _0x2f94ac=![];return devices[_0x3115f9][_0x50dda3(0x21a)]&&devices[_0x3115f9][_0x50dda3(0x21a)][_0x50dda3(0x1c5)]!='reject'&&(_0x2f94ac=devices[_0x3115f9][_0x50dda3(0x21a)][_0x50dda3(0x35e)]==devices[_0x3115f9]['ip']&&new Date()[_0x50dda3(0x334)]()-devices[_0x3115f9][_0x50dda3(0x21a)][_0x50dda3(0x1bd)]<devices[_0x3115f9]['telegramIpApproval'][_0x50dda3(0x1c5)]*0x3c*0x3e8),_0x2f94ac;},telegram2FaApproved=_0x5c5b5e=>{const _0x3f3af7=_0x28fc27;let _0x291db2=![];return devices[_0x5c5b5e][_0x3f3af7(0x2d4)]&&devices[_0x5c5b5e][_0x3f3af7(0x2d4)][_0x3f3af7(0x1c5)]!=_0x3f3af7(0x235)&&(_0x291db2=devices[_0x5c5b5e][_0x3f3af7(0x2d4)]['clientip']==devices[_0x5c5b5e]['ip']&&new Date()[_0x3f3af7(0x334)]()-devices[_0x5c5b5e][_0x3f3af7(0x2d4)]['timestamp']<devices[_0x5c5b5e]['telegram2FaApproval'][_0x3f3af7(0x1c5)]*0x3c*0x3e8),_0x291db2;},normalizeIP=_0x105764=>{const _0x4cb57d=_0x28fc27;let _0x4dd501=null,_0x2fd65f=null;if(ipaddr[_0x4cb57d(0x1f6)](_0x105764)){const _0x226d3f=ipaddr['parse'](_0x105764);_0x226d3f[_0x4cb57d(0x1aa)]()===_0x4cb57d(0x280)?(_0x226d3f[_0x4cb57d(0x23e)]()&&(_0x4dd501=_0x226d3f[_0x4cb57d(0x1d0)]()[_0x4cb57d(0x1e5)]()),_0x2fd65f=_0x226d3f['toString']()):(_0x4dd501=_0x226d3f['toString'](),_0x2fd65f=_0x226d3f[_0x4cb57d(0x175)]()['toString']());}return{'show':_0x4dd501?_0x4dd501:_0x2fd65f,'store':_0x2fd65f};};function formatDate(_0x10294d){const _0x5b4dfc=_0x28fc27;return _0x10294d[_0x5b4dfc(0x2a4)]()+'/'+(_0x10294d['getMonth']()+0x1)[_0x5b4dfc(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x10294d['getDate']()[_0x5b4dfc(0x1e5)]()[_0x5b4dfc(0x20b)](0x2,'0')+'\x20'+_0x10294d[_0x5b4dfc(0x294)]()[_0x5b4dfc(0x1e5)]()[_0x5b4dfc(0x20b)](0x2,'0')+':'+_0x10294d[_0x5b4dfc(0x15b)]()[_0x5b4dfc(0x1e5)]()[_0x5b4dfc(0x20b)](0x2,'0')+':'+_0x10294d[_0x5b4dfc(0x274)]()[_0x5b4dfc(0x1e5)]()[_0x5b4dfc(0x20b)](0x2,'0');}function sleep(_0xd0c132){return new Promise(_0x558b94=>setTimeout(_0x558b94,_0xd0c132));}