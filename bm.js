const _0x52893d=_0xedac;(function(_0x43ade2,_0x5bacfb){const _0x1cf0a9=_0xedac,_0x595122=_0x43ade2();while(!![]){try{const _0x43eb5c=parseInt(_0x1cf0a9(0x27f))/0x1+parseInt(_0x1cf0a9(0x3b3))/0x2*(parseInt(_0x1cf0a9(0x267))/0x3)+parseInt(_0x1cf0a9(0x342))/0x4*(parseInt(_0x1cf0a9(0x220))/0x5)+-parseInt(_0x1cf0a9(0x34c))/0x6*(parseInt(_0x1cf0a9(0x365))/0x7)+-parseInt(_0x1cf0a9(0x2b2))/0x8*(parseInt(_0x1cf0a9(0x2d3))/0x9)+parseInt(_0x1cf0a9(0x28a))/0xa*(parseInt(_0x1cf0a9(0x34e))/0xb)+parseInt(_0x1cf0a9(0x2b8))/0xc;if(_0x43eb5c===_0x5bacfb)break;else _0x595122['push'](_0x595122['shift']());}catch(_0x35042a){_0x595122['push'](_0x595122['shift']());}}}(_0x7991,0x87a2a));const _0x449107=function(){let _0x263e00=!![];return function(_0x2e4608,_0x407d7e){const _0x51c0a9=_0x263e00?function(){const _0x5b4670=_0xedac;if(_0x407d7e){const _0x57128d=_0x407d7e[_0x5b4670(0x36a)](_0x2e4608,arguments);return _0x407d7e=null,_0x57128d;}}:function(){};return _0x263e00=![],_0x51c0a9;};}(),_0x49bac7=_0x449107(this,function(){const _0x52d682=_0xedac;return _0x49bac7[_0x52d682(0x1ed)]()[_0x52d682(0x347)]('(((.+)+)+)+$')[_0x52d682(0x1ed)]()[_0x52d682(0x326)](_0x49bac7)['search']('(((.+)+)+)+$');});_0x49bac7();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x52893d(0x29f)),Crypt=require(_0x52893d(0x33c))[_0x52893d(0x38a)],RSA=require(_0x52893d(0x33c))[_0x52893d(0x2b1)],bcrypt=require('bcryptjs'),jwt=require(_0x52893d(0x3b1)),ipaddr=require('ipaddr.js'),argv=require(_0x52893d(0x301))(process[_0x52893d(0x229)][_0x52893d(0x2fb)](0x2))[_0x52893d(0x229)],uuidRandom=require(_0x52893d(0x2bb)),TelegramBot=require(_0x52893d(0x2cd)),Mixpanel=require(_0x52893d(0x1f7)),axios=require(_0x52893d(0x30b)),{GraphQLClient,gql}=require(_0x52893d(0x375)),util=require(_0x52893d(0x221)),fileUpload=require(_0x52893d(0x274)),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x52893d(0x2cb)](PORT)&&(console[_0x52893d(0x2a0)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x52893d(0x24a)),process[_0x52893d(0x384)](0x1));const HOST=argv[_0x52893d(0x2d1)]||null,userID=argv[_0x52893d(0x2c2)]||'',debugging=argv['d']||![];let bbpath=_0x52893d(0x1fd),bbpath2='';const botfile='bot.js',configfile=_0x52893d(0x388),settingsfile='bb-settings.json',securefile=_0x52893d(0x37c),maxBackups=0xa;let validInstallation=!![];!fs[_0x52893d(0x218)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x52893d(0x292)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x52893d(0x2e4),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x52893d(0x374),zippath=userID?bbpath+_0x52893d(0x20c)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x52893d(0x399)](logspath+_0x52893d(0x290),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x52893d(0x335);!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x52893d(0x218)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x52893d(0x218)](logspath)&&fs[_0x52893d(0x2ba)](logspath);!fs[_0x52893d(0x218)](zippath)&&fs[_0x52893d(0x2ba)](zippath);!fs[_0x52893d(0x218)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x52893d(0x213)]({'bots':[]})[_0x52893d(0x2b3)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x52893d(0x213)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x52893d(0x260)}})[_0x52893d(0x2b3)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x52893d(0x213)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x52893d(0x39a),'rsaStandard':_0x52893d(0x398)});const saltRounds=0xa,mixpanel=Mixpanel[_0x52893d(0x1fe)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x52893d(0x2df)]!=''&&settings['telegramUsername']&&settings[_0x52893d(0x2cf)]!='')initTelegram();const logger={'screen':_0x2ab2e5=>{const _0x39309b=_0x52893d;console[_0x39309b(0x2a0)](_0x2ab2e5);},'simple':_0x5b8567=>{const _0x430121=_0x52893d;console[_0x430121(0x2a0)](_0x5b8567),loggerfile[_0x430121(0x2b3)](util['format'](_0x5b8567)+'\x0a');},'full':async _0x1b201e=>{const _0x4b2708=_0x52893d,_0x1eefc0=getTimeStamp()+_0x4b2708(0x26c)+_0x1b201e;console[_0x4b2708(0x2a0)](_0x1eefc0),loggerfile['write'](util[_0x4b2708(0x21a)](_0x1eefc0)+'\x0a');if(tgBot&&settings[_0x4b2708(0x205)]&&settings['telegramEvents']!=_0x4b2708(0x2ed))await tgBot[_0x4b2708(0x1f1)](settings[_0x4b2708(0x205)],'Bot\x20Mgr\x20>\x20'+_0x1b201e)[_0x4b2708(0x291)](_0x5dd444=>{telegramError(_0x5dd444);});},'debug':async(_0x18c1ba,_0x39a788='')=>{const _0x61b590=_0x52893d,_0x3d1428=getTimeStamp()+_0x61b590(0x26e)+_0x18c1ba;if(debugging)console[_0x61b590(0x2a0)](_0x3d1428);loggerfile['write'](util[_0x61b590(0x21a)](_0x3d1428)+'\x0a');if(_0x39a788){if(debugging)console[_0x61b590(0x2a0)](_0x39a788);loggerfile[_0x61b590(0x2b3)](util['format'](_0x39a788)+'\x0a');}}};process['on']('uncaughtException',function(_0x297acf){logger['simple'](_0x297acf);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x52893d(0x296)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x52893d(0x33d))[_0x52893d(0x322)](app);app[_0x52893d(0x226)](fileUpload({'useTempFiles':!![]})),app[_0x52893d(0x364)](_0x52893d(0x245),async(_0x512330,_0x4a3649)=>{const _0x4495e5=_0x52893d,_0x82dac=_0x512330[_0x4495e5(0x345)][_0x4495e5(0x207)],_0x118ff4=getClientsWithBotID(_0x4495e5(0x318)),_0x46ac38=_0x512330[_0x4495e5(0x2ab)][_0x4495e5(0x309)],_0x571a1e=timelyDecrypt(_0x46ac38,![]),_0x39e606=_0x118ff4[_0x4495e5(0x258)](_0x37ef2d=>_0x37ef2d[_0x4495e5(0x309)]==_0x571a1e);if(_0x39e606){const _0x37b5bc=normalizeIP(_0x512330[_0x4495e5(0x351)][_0x4495e5(0x257)])[_0x4495e5(0x39d)],_0x2ef366=_0x512330[_0x4495e5(0x2ab)][_0x4495e5(0x2ee)];if(validateAccess(_0x2ef366,_0x571a1e,_0x37b5bc)[_0x4495e5(0x2a8)])_0x82dac=='backup'&&await backupConfigFiles(),await zipFiles(_0x82dac),_0x4a3649[_0x4495e5(0x2f1)](zippath+(_0x82dac+_0x4495e5(0x3a7)),_0x3b2ebb=>{_0x3b2ebb&&(logger['full']('Failed\x20to\x20download\x20'+_0x82dac),logger['simple'](_0x3b2ebb));});else logger[_0x4495e5(0x2b4)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x82dac+'\x20(1)');}else logger[_0x4495e5(0x2b4)](_0x4495e5(0x329)+_0x82dac+_0x4495e5(0x385));}),app[_0x52893d(0x359)](_0x52893d(0x349),async(_0x1b85bc,_0x57987f)=>{const _0x2dee99=_0x52893d,_0x1acc60=getClientsWithBotID('botmanager'),_0x90b9de=_0x1b85bc[_0x2dee99(0x2ab)]['uuid'],_0x11308a=timelyDecrypt(_0x90b9de,![]),_0x3e06ef=_0x1acc60[_0x2dee99(0x258)](_0x1a30da=>_0x1a30da[_0x2dee99(0x309)]==_0x11308a);logger[_0x2dee99(0x203)](_0x2dee99(0x214));if(_0x3e06ef){const _0x29bb2d=normalizeIP(_0x1b85bc[_0x2dee99(0x351)][_0x2dee99(0x257)])[_0x2dee99(0x39d)],_0x51a627=_0x1b85bc[_0x2dee99(0x2ab)][_0x2dee99(0x2ee)];if(validateAccess(_0x51a627,_0x11308a,_0x29bb2d)[_0x2dee99(0x2a8)]){if(_0x1b85bc[_0x2dee99(0x2f4)]){const _0x14c871=_0x1b85bc['files'][_0x2dee99(0x314)];await _0x14c871['mv'](temppath+_0x14c871[_0x2dee99(0x22a)]),_0x57987f[_0x2dee99(0x336)]({'status':!![],'message':_0x2dee99(0x3a1)});const _0x3c40e8=getBotsWithMode();_0x3c40e8[_0x2dee99(0x250)]>0x0?confirmRestore(temppath,_0x14c871[_0x2dee99(0x22a)]):unzipFile(temppath,_0x14c871['name']);}}else logger[_0x2dee99(0x2b4)](_0x2dee99(0x2c7));}else logger[_0x2dee99(0x2b4)](_0x2dee99(0x2ec));}),app[_0x52893d(0x226)](express['static'](path[_0x52893d(0x26a)](__dirname,bbpath2,'build2'))),app[_0x52893d(0x226)](express['static'](path['join'](__dirname,bbpath2,_0x52893d(0x320)))),app[_0x52893d(0x364)]('/',function(_0x2f6673,_0x36a5b8){const _0x584e01=_0x52893d;_0x36a5b8[_0x584e01(0x2c5)](path['join'](__dirname,bbpath2,'build2','index.html'));}),app['get'](_0x52893d(0x310),function(_0x2f88ca,_0x447cf3){const _0x10d2b4=_0x52893d;_0x447cf3[_0x10d2b4(0x2c5)](path[_0x10d2b4(0x26a)](__dirname,bbpath2,_0x10d2b4(0x320),'index.html'));}),app[_0x52893d(0x364)](_0x52893d(0x3a6),(_0x3fcdbb,_0x3d48b2)=>{const _0x32c33d=_0x52893d;_0x3d48b2[_0x32c33d(0x2c5)](path[_0x32c33d(0x26a)](__dirname,bbpath2,_0x32c33d(0x320),_0x32c33d(0x2bf)));}),app[_0x52893d(0x364)](_0x52893d(0x2fe),(_0x46c7be,_0x4318ef)=>{const _0x223c83=_0x52893d;_0x4318ef[_0x223c83(0x2c5)](path[_0x223c83(0x26a)](__dirname,bbpath2,_0x223c83(0x320),_0x223c83(0x2bf)));}),app['get']('/:bot/coins',(_0x1ce21d,_0x1fd456)=>{const _0x2e8ccf=_0x52893d;_0x1fd456['sendFile'](path[_0x2e8ccf(0x26a)](__dirname,bbpath2,_0x2e8ccf(0x320),_0x2e8ccf(0x2bf)));}),app[_0x52893d(0x364)]('/:bot/history',(_0xea3f3e,_0x1da2d0)=>{const _0x3dd20b=_0x52893d;_0x1da2d0['sendFile'](path[_0x3dd20b(0x26a)](__dirname,bbpath2,_0x3dd20b(0x320),'index.html'));}),app[_0x52893d(0x364)]('/:bot/configuration',(_0x2ebfd1,_0x66493e)=>{const _0x21d49b=_0x52893d;_0x66493e['sendFile'](path[_0x21d49b(0x26a)](__dirname,bbpath2,_0x21d49b(0x320),_0x21d49b(0x2bf)));}),app['get'](_0x52893d(0x370),(_0x22b520,_0x286c88)=>{const _0x2c5a64=_0x52893d;_0x286c88[_0x2c5a64(0x2c5)](path[_0x2c5a64(0x26a)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x52893d(0x23c)](PORT,HOST);else http[_0x52893d(0x23c)](PORT);const io=require(_0x52893d(0x1ef))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x182f6a=_0x52893d;logger['simple'](''),logger['simple'](_0x182f6a(0x2e7)),await logger[_0x182f6a(0x2b4)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger['simple']('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0xaa1cf1 of config){if(_0xaa1cf1[_0x182f6a(0x36c)]==_0x182f6a(0x20e)||_0xaa1cf1[_0x182f6a(0x36c)]=='new')await logger[_0x182f6a(0x2b4)]('starting\x20bot\x20|\x20Bot\x20'+_0xaa1cf1[_0x182f6a(0x3a9)]+_0x182f6a(0x22e)+_0xaa1cf1[_0x182f6a(0x295)]),startBot([_0xaa1cf1[_0x182f6a(0x3a9)],userID],{'cwd':bbpath},function(_0xdd013c){const _0x3841a6=_0x182f6a;if(_0xdd013c)logger[_0x3841a6(0x2b4)](_0xdd013c);});else(_0xaa1cf1[_0x182f6a(0x36c)]==_0x182f6a(0x27e)||_0xaa1cf1[_0x182f6a(0x36c)]==_0x182f6a(0x289))&&await logger[_0x182f6a(0x2b4)](_0x182f6a(0x33b)+_0xaa1cf1[_0x182f6a(0x3a9)]+'\x20|\x20'+_0xaa1cf1[_0x182f6a(0x295)]);}else!newBot&&logger[_0x182f6a(0x28e)](_0x182f6a(0x30f));if(newBot)addBot();logger[_0x182f6a(0x28e)](_0x182f6a(0x2e7)),logger[_0x182f6a(0x28e)]('');}function startSocket(){const _0xbe4d75=_0x52893d;io['on'](_0xbe4d75(0x2dc),_0x4cf66c=>{const _0xe1f9c=_0xbe4d75;let _0x39cf7e,_0x367c43,_0x48f504,_0x3d89c3,_0x1c984f;const _0x295c47=_0x4cf66c[_0xe1f9c(0x2f9)][_0xe1f9c(0x2ab)][_0xe1f9c(0x279)];_0x367c43=_0x295c47['match'](/bot[0-9]{3}/);if(_0x367c43)_0x48f504=_0x367c43[0x0][_0xe1f9c(0x2d0)](/[0-9]{3}/);if(_0x48f504)_0x39cf7e=_0x48f504[0x0];else _0x39cf7e=_0xe1f9c(0x318);const _0x13d334=_0x4cf66c[_0xe1f9c(0x2f9)][_0xe1f9c(0x28b)][_0xe1f9c(0x2f2)];if(!_0x13d334)_0x4cf66c['emit'](_0xe1f9c(0x36c),{'publicKey':secure[_0xe1f9c(0x24b)]});else{_0x3d89c3=timelyDecrypt(_0x13d334,![]);if(!_0x3d89c3)_0x4cf66c['emit'](_0xe1f9c(0x36c),{'publicKey':secure[_0xe1f9c(0x24b)]});else{_0x1c984f=normalizeIP(_0x4cf66c[_0xe1f9c(0x217)][_0xe1f9c(0x257)])[_0xe1f9c(0x39d)];if(!devices[_0x3d89c3])devices[_0x3d89c3]={'uuid':_0x3d89c3,'access':{'token':null}};devices[_0x3d89c3]['ip']=_0x1c984f;const _0x1c9feb=addClient(_0x4cf66c['id'],_0x3d89c3,_0x39cf7e);setAccess(_0x1c9feb),emitMessages(),_0x4cf66c['on'](_0xe1f9c(0x22d),_0x316ae5=>{const _0x12d85f=_0xe1f9c,_0x8a55cb=timelyDecrypt(_0x316ae5[_0x12d85f(0x22c)]);if(_0x8a55cb){_0x316ae5={'username':_0x316ae5[_0x12d85f(0x286)],'password':_0x8a55cb},devices[_0x3d89c3][_0x12d85f(0x31e)]=validateCredentials(_0x316ae5,_0x3d89c3);if(devices[_0x3d89c3][_0x12d85f(0x31e)]['allow']==![]&&devices[_0x3d89c3][_0x12d85f(0x31e)][_0x12d85f(0x298)]=='2FA\x20login\x20required')_0x4cf66c[_0x12d85f(0x299)](_0x12d85f(0x36c),{'access':devices[_0x3d89c3][_0x12d85f(0x31e)]}),loginAccess2FA(_0x3d89c3,_0x1c984f);else{if(devices[_0x3d89c3][_0x12d85f(0x31e)][_0x12d85f(0x2a8)]==![]&&devices[_0x3d89c3][_0x12d85f(0x31e)][_0x12d85f(0x298)]=='invalid\x20credentials')_0x4cf66c[_0x12d85f(0x299)]('status',{'access':devices[_0x3d89c3]['access']});else devices[_0x3d89c3][_0x12d85f(0x31e)][_0x12d85f(0x2a8)]&&devices[_0x3d89c3][_0x12d85f(0x31e)]['reason']==_0x12d85f(0x38d)&&(getClientsWithUuid(_0x3d89c3)[_0x12d85f(0x2aa)](_0x40c776=>{setAccess(_0x40c776);}),logger[_0x12d85f(0x203)](_0x12d85f(0x2ad)+_0x3d89c3[_0x12d85f(0x2fb)](-0x8)),setTokenRefresh(_0x3d89c3),setSessionTimeout(_0x12d85f(0x22d),_0x3d89c3));}}else logger[_0x12d85f(0x2b4)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x4cf66c['on']('reset-password',()=>{resetPassword();}),_0x4cf66c['on'](_0xe1f9c(0x306),_0x263e74=>{removeClient(_0x4cf66c['id']);}),_0x39cf7e==_0xe1f9c(0x318)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x45de72){const _0x2f1bd1=_0x52893d;if(_0x45de72!=_0x2f1bd1(0x318)&&config[_0x2f1bd1(0x1f0)]!=''){if(pid[_0x45de72])pid[_0x45de72]['send']({'function':_0x2f1bd1(0x25b),'args':null});}}function _0xedac(_0x64f7ea,_0x3b1507){const _0x25b24d=_0x7991();return _0xedac=function(_0x49bac7,_0x449107){_0x49bac7=_0x49bac7-0x1ed;let _0x79918b=_0x25b24d[_0x49bac7];return _0x79918b;},_0xedac(_0x64f7ea,_0x3b1507);}function reloadBotManager(){const _0x3e0292=_0x52893d;getClientsWithBotID('botmanager')[_0x3e0292(0x2aa)](_0x4b8b72=>{const _0x555ef9=_0x3e0292;getSocket(_0x4b8b72['id'])['emit'](_0x555ef9(0x36c),{'access':{'allow':![],'reason':_0x555ef9(0x2c6),'token':null}});});}function getSocket(_0x299e5b){return io['sockets']['sockets']['get'](_0x299e5b);}function setAccess(_0x1c85e1){const _0x2e488f=_0x52893d,_0x5c45cd=getSocket(_0x1c85e1['id']),_0x1c29c4=_0x1c85e1[_0x2e488f(0x309)],_0x325b9b=_0x1c85e1['bot'];devices[_0x1c29c4][_0x2e488f(0x31e)]=validateAccess(devices[_0x1c29c4][_0x2e488f(0x31e)]['token'],_0x1c29c4),logger[_0x2e488f(0x203)](_0x2e488f(0x241)+devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x298)]+_0x2e488f(0x29c)+_0x1c85e1['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x1c29c4[_0x2e488f(0x2fb)](-0x8)),_0x5c45cd[_0x2e488f(0x26a)](_0x1c29c4);if(devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x2a8)]){_0x5c45cd[_0x2e488f(0x26a)](_0x325b9b);if(_0x325b9b==_0x2e488f(0x318))initializeSocketBotManager(_0x5c45cd);else initializeSocketBot(_0x5c45cd);initClient(_0x325b9b);}devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x26f)]&&devices[_0x1c29c4][_0x2e488f(0x31e)]['reason']==_0x2e488f(0x225)&&setSessionTimeout('2FA',_0x1c29c4),devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x26f)]&&devices[_0x1c29c4][_0x2e488f(0x31e)]['reason']==_0x2e488f(0x2e3)&&setSessionTimeout(_0x2e488f(0x22d),_0x1c29c4),_0x5c45cd[_0x2e488f(0x299)]('status',{'status':_0x1c85e1[_0x2e488f(0x39f)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1c29c4][_0x2e488f(0x31e)],'externalip':devices[_0x1c29c4]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x2e488f(0x2ae)],'validInstallation':validInstallation}),devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x2a8)]==![]&&devices[_0x1c29c4][_0x2e488f(0x31e)][_0x2e488f(0x298)]==_0x2e488f(0x343)&&temporaryAccess2FA(_0x1c29c4,devices[_0x1c29c4]['ip']);}function setSessionTimeout(_0x2e65dd,_0x3f9fb7){const _0x24f8c9=_0x52893d;let _0x1ac3f3;if(_0x2e65dd=='login')_0x1ac3f3=loginExpiry*0x3c*0x3e8;else _0x1ac3f3=devices[_0x3f9fb7][_0x24f8c9(0x280)][_0x24f8c9(0x339)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3f9fb7][_0x24f8c9(0x280)][_0x24f8c9(0x303)]);if(devices[_0x3f9fb7][_0x24f8c9(0x37f)])clearTimeout(devices[_0x3f9fb7][_0x24f8c9(0x37f)]);devices[_0x3f9fb7][_0x24f8c9(0x37f)]=setTimeout(()=>{const _0x4e0e51=_0x24f8c9;if(devices[_0x3f9fb7]['pidRefreshToken'])clearTimeout(devices[_0x3f9fb7][_0x4e0e51(0x251)]);removeSocketListeners(_0x3f9fb7),addBlacklist(_0x3f9fb7),devices[_0x3f9fb7]['telegramIpApproval']=null,devices[_0x3f9fb7][_0x4e0e51(0x34f)]=null,devices[_0x3f9fb7][_0x4e0e51(0x31e)][_0x4e0e51(0x26f)]=null,logger[_0x4e0e51(0x203)](_0x4e0e51(0x372)+_0x3f9fb7[_0x4e0e51(0x2fb)](-0x8)),devices[_0x3f9fb7]['access']=validateAccess(devices[_0x3f9fb7][_0x4e0e51(0x31e)][_0x4e0e51(0x26f)],_0x3f9fb7),!(devices[_0x3f9fb7][_0x4e0e51(0x31e)][_0x4e0e51(0x2a8)]&&devices[_0x3f9fb7][_0x4e0e51(0x31e)][_0x4e0e51(0x298)]==_0x4e0e51(0x288))&&(_0x2e65dd==_0x4e0e51(0x22d)?io['to'](_0x3f9fb7)[_0x4e0e51(0x299)](_0x4e0e51(0x36c),{'access':{'allow':![],'reason':_0x4e0e51(0x269),'token':null}}):io['to'](_0x3f9fb7)[_0x4e0e51(0x299)](_0x4e0e51(0x36c),{'access':{'allow':![],'reason':_0x4e0e51(0x201),'token':null}})),devices[_0x3f9fb7][_0x4e0e51(0x31e)][_0x4e0e51(0x26f)]=null;},_0x1ac3f3);}function setTokenRefresh(_0x5112a6){const _0xd2e1ea=_0x52893d;if(devices[_0x5112a6][_0xd2e1ea(0x251)])clearTimeout(devices[_0x5112a6]['pidRefreshToken']);devices[_0x5112a6]['pidRefreshToken']=setTimeout(()=>{const _0x4692d1=_0xd2e1ea;getClientsWithUuid(_0x5112a6)[_0x4692d1(0x250)]!=0x0?(devices[_0x5112a6]['access']=refreshToken(_0x5112a6),io['to'](_0x5112a6)['emit'](_0x4692d1(0x36c),{'status':_0x4692d1(0x284),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5112a6][_0x4692d1(0x31e)],'externalip':devices[_0x5112a6]['ip'],'publicKey':secure[_0x4692d1(0x24b)],'validInstallation':validInstallation}),setTokenRefresh(_0x5112a6)):clearTimeout(devices[_0x5112a6]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x501c62){const _0xc95815=_0x52893d,_0xc90d07=getClient(_0x501c62['id'])[_0xc95815(0x309)];_0x501c62[_0xc95815(0x299)](_0xc95815(0x28c),config),_0x501c62[_0xc95815(0x299)](_0xc95815(0x30c),cleanSettings()),_0x501c62['on'](_0xc95815(0x23a),_0x3452a4=>{const _0x12643d=_0xc95815;if(validateAccess(_0x3452a4,_0xc90d07)[_0x12643d(0x2a8)])addBot();else logger['full'](_0x12643d(0x383));}),_0x501c62['on'](_0xc95815(0x20b),(_0x3416f0,_0x4e8c6e)=>{const _0x118c3f=_0xc95815;if(validateAccess(_0x4e8c6e,_0xc90d07)[_0x118c3f(0x2a8)])toggleBot(_0x3416f0[_0x118c3f(0x3a9)],_0x3416f0['status'],_0x3416f0[_0x118c3f(0x25f)]);else logger[_0x118c3f(0x2b4)](_0x118c3f(0x324));}),_0x501c62['on'](_0xc95815(0x2e5),(_0x1bd688,_0x429ac3)=>{const _0x52f38a=_0xc95815;if(validateAccess(_0x429ac3,_0xc90d07)[_0x52f38a(0x2a8)])toggleBotMode(_0x1bd688);else logger[_0x52f38a(0x2b4)](_0x52f38a(0x324));}),_0x501c62['on'](_0xc95815(0x21f),(_0x4e8952,_0x1122bc)=>{const _0x30623c=_0xc95815;if(validateAccess(_0x1122bc,_0xc90d07)[_0x30623c(0x2a8)])deleteBot(_0x4e8952);else logger['full'](_0x30623c(0x28f));}),_0x501c62['on']('store-settings',(_0x493d26,_0x30b717)=>{const _0x300fa7=_0xc95815;if(validateAccess(_0x30b717,_0xc90d07)[_0x300fa7(0x2a8)])storeSettings(_0x493d26,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x501c62['on'](_0xc95815(0x29a),_0x5753a7=>{const _0x4414c3=_0xc95815;if(validateAccess(_0x5753a7,_0xc90d07)[_0x4414c3(0x2a8)])updateBB(_0x4414c3(0x204));else logger['full'](_0x4414c3(0x2eb));}),_0x501c62['on'](_0xc95815(0x24e),_0x19963b=>{const _0x380132=_0xc95815;if(validateAccess(_0x19963b,_0xc90d07)['allow'])updateBB(_0x380132(0x358));else logger[_0x380132(0x2b4)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x501c62['on']('get-backup-files',_0x22b57f=>{const _0x51f499=_0xc95815;if(validateAccess(_0x22b57f,_0xc90d07)[_0x51f499(0x2a8)]){const _0x471a8f=getClient(_0x501c62['id']);if(_0x471a8f)getBackupFiles(_0x471a8f[_0x51f499(0x309)]);else logger['full'](_0x51f499(0x262));}else logger['full'](_0x51f499(0x3a3));}),_0x501c62['on'](_0xc95815(0x208),(_0x5b3ac5,_0x462f3c)=>{const _0x40e1e0=_0xc95815;if(validateAccess(_0x462f3c,_0xc90d07)['allow'])restoreBackupFile(_0x5b3ac5);else logger[_0x40e1e0(0x2b4)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x501c62['on'](_0xc95815(0x334),_0x2253dc=>{const _0x2ba2e2=_0xc95815;if(validateAccess(_0x2253dc,_0xc90d07)[_0x2ba2e2(0x2a8)])getMessages();else logger[_0x2ba2e2(0x2b4)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x501c62['on'](_0xc95815(0x268),(_0x39d11e,_0x506761)=>{const _0x1c9594=_0xc95815;if(validateAccess(_0x506761,_0xc90d07)['allow'])confirmMessage(_0x39d11e);else logger[_0x1c9594(0x2b4)](_0x1c9594(0x397));}),_0x501c62['on']('logout',_0x34d02d=>{const _0x4cffcd=_0xc95815;if(validateAccess(_0x34d02d,_0xc90d07)[_0x4cffcd(0x2a8)]){if(devices[_0xc90d07][_0x4cffcd(0x251)])clearTimeout(devices[_0xc90d07][_0x4cffcd(0x251)]);if(devices[_0xc90d07][_0x4cffcd(0x37f)])clearTimeout(devices[_0xc90d07][_0x4cffcd(0x37f)]);removeSocketListeners(getClient(_0x501c62['id'])[_0x4cffcd(0x309)]),addBlacklist(_0xc90d07),devices[_0xc90d07][_0x4cffcd(0x280)]=null,devices[_0xc90d07][_0x4cffcd(0x34f)]=null,devices[_0xc90d07][_0x4cffcd(0x31e)]['token']=null,logger[_0x4cffcd(0x203)](_0x4cffcd(0x366)+_0xc90d07['slice'](-0x8)),io['to'](getClient(_0x501c62['id'])['uuid'])[_0x4cffcd(0x299)](_0x4cffcd(0x36c),{'access':{'allow':![],'reason':_0x4cffcd(0x304),'token':null}});}else logger[_0x4cffcd(0x2b4)](_0x4cffcd(0x3b2));});}function initializeSocketBot(_0x615b68){const _0x3e3b1a=_0x52893d,_0x677570=getClient(_0x615b68['id'])['bot'],_0x5c58db=getClient(_0x615b68['id'])[_0x3e3b1a(0x309)];_0x615b68['on'](_0x3e3b1a(0x2e2),(_0x2baee7,_0x540a03)=>{const _0x3d2738=_0x3e3b1a;if(validateAccess(_0x540a03,_0x5c58db)[_0x3d2738(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x3d2738(0x336)]({'function':_0x3d2738(0x20a),'args':_0x2baee7});}else logger[_0x3d2738(0x2b4)](_0x3d2738(0x2f7));}),_0x615b68['on'](_0x3e3b1a(0x37d),(_0x598797,_0x39cef7)=>{const _0x500969=_0x3e3b1a;if(validateAccess(_0x39cef7,_0x5c58db)[_0x500969(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x500969(0x336)]({'function':_0x500969(0x281),'args':_0x598797});}else logger[_0x500969(0x2b4)](_0x500969(0x1f3));}),_0x615b68['on'](_0x3e3b1a(0x22f),(_0x1c1d6b,_0x5e17b9)=>{const _0x5db607=_0x3e3b1a;if(validateAccess(_0x5e17b9,_0x5c58db)[_0x5db607(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x5db607(0x336)]({'function':_0x5db607(0x32d),'args':_0x1c1d6b});}else logger['full'](_0x5db607(0x287));}),_0x615b68['on']('store-configuration',(_0x421e45,_0x583ece)=>{const _0x53cbbb=_0x3e3b1a;if(validateAccess(_0x583ece,_0x5c58db)[_0x53cbbb(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x53cbbb(0x336)]({'function':_0x53cbbb(0x340),'args':_0x421e45});}else logger[_0x53cbbb(0x2b4)](_0x53cbbb(0x24d));}),_0x615b68['on'](_0x3e3b1a(0x36d),(_0x46b260,_0x37bd47)=>{const _0x30350a=_0x3e3b1a;if(validateAccess(_0x37bd47,_0x5c58db)[_0x30350a(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x30350a(0x336)]({'function':_0x30350a(0x2f6),'args':_0x46b260});}else logger[_0x30350a(0x2b4)](_0x30350a(0x38f));}),_0x615b68['on']('store-fiat',(_0x3f1d81,_0x5aeb36)=>{const _0x388589=_0x3e3b1a;if(validateAccess(_0x5aeb36,_0x5c58db)[_0x388589(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x388589(0x336)]({'function':_0x388589(0x33f),'args':_0x3f1d81});}else logger[_0x388589(0x2b4)](_0x388589(0x386));}),_0x615b68['on'](_0x3e3b1a(0x266),_0x116e96=>{const _0xd53fa6=_0x3e3b1a;if(validateAccess(_0x116e96,_0x5c58db)[_0xd53fa6(0x2a8)]){if(pid[_0x677570])pid[_0x677570]['send']({'function':_0xd53fa6(0x222),'args':null});}else logger[_0xd53fa6(0x2b4)](_0xd53fa6(0x36e));}),_0x615b68['on'](_0x3e3b1a(0x240),_0x5663c6=>{const _0x225114=_0x3e3b1a;if(validateAccess(_0x5663c6,_0x5c58db)[_0x225114(0x2a8)]){if(pid[_0x677570])pid[_0x677570]['send']({'function':_0x225114(0x21e),'args':null});}else logger['full'](_0x225114(0x355));}),_0x615b68['on'](_0x3e3b1a(0x265),(_0x8ece8f,_0x1b2e33)=>{const _0x25143b=_0x3e3b1a;if(validateAccess(_0x1b2e33,_0x5c58db)[_0x25143b(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x25143b(0x336)]({'function':'placeOrder','args':_0x8ece8f});}else logger[_0x25143b(0x2b4)](_0x25143b(0x378));}),_0x615b68['on'](_0x3e3b1a(0x2a3),_0x46d0ab=>{const _0x54f8ef=_0x3e3b1a;if(validateAccess(_0x46d0ab,_0x5c58db)[_0x54f8ef(0x2a8)]){if(pid[_0x677570])pid[_0x677570][_0x54f8ef(0x336)]({'function':_0x54f8ef(0x228),'args':null});}else logger[_0x54f8ef(0x2b4)](_0x54f8ef(0x2ca));}),_0x615b68['on'](_0x3e3b1a(0x2dd),_0xe2682=>{const _0x45dbc2=_0x3e3b1a;if(validateAccess(_0xe2682,_0x5c58db)['allow']){if(pid[_0x677570])pid[_0x677570]['send']({'function':_0x45dbc2(0x276),'args':null});}else logger['full'](_0x45dbc2(0x2de));}),_0x615b68['on'](_0x3e3b1a(0x29a),_0x2cadb2=>{const _0x46d5e0=_0x3e3b1a;if(validateAccess(_0x2cadb2,_0x5c58db)['allow'])updateBB(_0x46d5e0(0x204));else logger['full'](_0x46d5e0(0x2eb));}),_0x615b68['on'](_0x3e3b1a(0x334),_0x534472=>{const _0x3982bb=_0x3e3b1a;if(validateAccess(_0x534472,_0x5c58db)[_0x3982bb(0x2a8)])getMessages();else logger['full'](_0x3982bb(0x206));}),_0x615b68['on']('confirm-message',(_0x5e8125,_0x1823a4)=>{const _0x320bcf=_0x3e3b1a;if(validateAccess(_0x1823a4,_0x5c58db)['allow'])confirmMessage(_0x5e8125);else logger[_0x320bcf(0x2b4)](_0x320bcf(0x397));}),_0x615b68['on'](_0x3e3b1a(0x3ae),_0x1ec8f5=>{const _0x3980d8=_0x3e3b1a;if(validateAccess(_0x1ec8f5,_0x5c58db)[_0x3980d8(0x2a8)]){if(devices[_0x5c58db][_0x3980d8(0x251)])clearTimeout(devices[_0x5c58db][_0x3980d8(0x251)]);if(devices[_0x5c58db][_0x3980d8(0x37f)])clearTimeout(devices[_0x5c58db][_0x3980d8(0x37f)]);removeSocketListeners(getClient(_0x615b68['id'])['uuid']),addBlacklist(_0x5c58db),devices[_0x5c58db][_0x3980d8(0x280)]=null,devices[_0x5c58db][_0x3980d8(0x34f)]=null,devices[_0x5c58db][_0x3980d8(0x31e)][_0x3980d8(0x26f)]=null,logger[_0x3980d8(0x203)]('Logged\x20out\x20user\x20...'+_0x5c58db[_0x3980d8(0x2fb)](-0x8)),io['to'](getClient(_0x615b68['id'])['uuid'])[_0x3980d8(0x299)]('status',{'access':{'allow':![],'reason':_0x3980d8(0x304),'token':null}});}else logger[_0x3980d8(0x2b4)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0xe8d45c){const _0x12d86f=_0x52893d;getClientsWithUuid(_0xe8d45c)[_0x12d86f(0x2aa)](_0x2d07ca=>{const _0x5e9c19=_0x12d86f;getSocket(_0x2d07ca['id'])[_0x5e9c19(0x3ac)]();});}function cleanSettings(){const _0x25f8af=_0x52893d;let _0x2c5cd5=settings;return settings[_0x25f8af(0x2df)]&&settings['telegramToken']!=''&&(_0x2c5cd5={..._0x2c5cd5,'telegramToken':_0x25f8af(0x29b)}),settings[_0x25f8af(0x238)]&&settings[_0x25f8af(0x238)]!=''&&(_0x2c5cd5={..._0x2c5cd5,'bbPassword':_0x25f8af(0x29b)}),(settings[_0x25f8af(0x238)]&&settings[_0x25f8af(0x238)]==_0x25f8af(0x1f8)||settings['telegramToken']&&settings[_0x25f8af(0x2df)]=='***')&&(_0x2c5cd5={..._0x2c5cd5,'restored':{'password':settings[_0x25f8af(0x238)]==_0x25f8af(0x1f8),'telegram':settings[_0x25f8af(0x2df)]==_0x25f8af(0x1f8)}}),_0x2c5cd5;}async function updateBB(_0x13bb16){const _0x1def5e=_0x52893d;await backupConfigFiles(),installingUpdate=!![],config[_0x1def5e(0x2aa)](_0x2cce43=>{const _0x3efdd6=_0x1def5e;restartBot(_0x2cce43[_0x3efdd6(0x3a9)]);}),logger[_0x1def5e(0x203)](_0x1def5e(0x300)+_0x13bb16);if(_0x13bb16=='update')process[_0x1def5e(0x336)]({'update':!![]},_0x333ea5=>{});else _0x13bb16==_0x1def5e(0x358)&&process[_0x1def5e(0x336)]({'reinstall':!![]},_0x1e8393=>{});}function startBot(_0x173576,_0x5bd263,_0x4b1c39){const _0x3b866f=_0x52893d;if(debugging)_0x173576['push']('-d');let _0x52de43=![];const _0x41782b=_0x173576[0x0];_0x5bd263={..._0x5bd263,'stdio':[_0x3b866f(0x348),'inherit',_0x3b866f(0x348),_0x3b866f(0x2e8)]},pid[_0x41782b]=childProcess[_0x3b866f(0x35b)](botfile,_0x173576,_0x5bd263),pid[_0x41782b]['on'](_0x3b866f(0x346),_0xf73931=>{const _0x287634=_0x3b866f;switch(Object[_0x287634(0x20d)](_0xf73931)[0x0]){case'botname':updateBotName(_0x41782b,_0xf73931['botname']);break;case _0x287634(0x34d):updateBotManager();break;case'status':updateStatus(_0x41782b,_0xf73931[_0x287634(0x36c)]);break;case _0x287634(0x25f):updateLive(_0x41782b,_0xf73931['live']);break;case _0x287634(0x362):updateLive(_0x41782b,_0xf73931[_0x287634(0x362)]),io['to'](_0x41782b)['emit'](_0x287634(0x36c),{'access':{'allow':![],'reason':_0x287634(0x2c6),'token':null}});break;case'stop':_0xf73931[_0x287634(0x305)]==_0x287634(0x236)&&restartBot(_0x41782b);_0xf73931['stop']==_0x287634(0x294)&&toggleBot(_0x41782b,_0x287634(0x27e),_0x287634(0x38b));break;case _0x287634(0x212):sendTelegram(_0x41782b,_0xf73931[_0x287634(0x212)]);break;case _0x287634(0x354):sendTelegramMsg(_0xf73931[_0x287634(0x354)]);break;case _0x287634(0x38c):io['to'](_0x41782b)[_0x287634(0x299)](_0xf73931[_0x287634(0x38c)],_0xf73931['args']);break;}}),pid[_0x41782b]['on'](_0x3b866f(0x2bd),function(_0x3f1a95){if(_0x52de43)return;_0x52de43=!![],_0x4b1c39(_0x3f1a95);}),pid[_0x41782b]['on']('exit',async function(_0x2a152a){const _0xd1a8ab=_0x3b866f;if(installingUpdate)return;if(_0x52de43)return;_0x52de43=!![],_0x4b1c39(null);const _0xcf706c=dbConfig['get']('bots')['find']({'botID':_0x41782b})[_0xd1a8ab(0x32f)]();_0xcf706c&&(_0xcf706c['status']=='enabled'||_0xcf706c[_0xd1a8ab(0x36c)]==_0xd1a8ab(0x23b))&&(await sleep(0x3e8),updateLive(_0x41782b,_0xd1a8ab(0x38b)),logger[_0xd1a8ab(0x2b4)]('restarting\x20Bot\x20'+_0x41782b),startBot([_0x41782b,userID],{'cwd':bbpath},function(_0x32d91e){const _0x1a6014=_0xd1a8ab;if(_0x32d91e)logger[_0x1a6014(0x2b4)](_0x32d91e);}));});}function stopBot(_0x4d18a2){getClientsWithBotID(_0x4d18a2)['forEach'](_0x420c5f=>{const _0x3e1bf1=_0xedac;getSocket(_0x420c5f['id'])[_0x3e1bf1(0x306)](!![]),removeClient(_0x420c5f['id']);}),pid[_0x4d18a2]&&(pid[_0x4d18a2]['kill'](),pid[_0x4d18a2]=null);}function restartBot(_0x5b8f96){const _0x414f33=_0x52893d;if(pid[_0x5b8f96])pid[_0x5b8f96][_0x414f33(0x294)]();}function addBot(){const _0x4fd617=_0x52893d;let _0x27621f;for(let _0xf40e30=0x1;_0xf40e30<0x3e9;_0xf40e30++){_0x27621f=_0xf40e30[_0x4fd617(0x1ed)]()[_0x4fd617(0x377)](0x3,'0');let _0x43ac69=config[_0x4fd617(0x258)](_0xf965d1=>_0xf965d1['botID']==_0x27621f);if(!_0x43ac69)break;}if(_0x27621f===_0x4fd617(0x328)){logger[_0x4fd617(0x2b4)](_0x4fd617(0x356));return;}logger['full'](_0x4fd617(0x331)+_0x27621f),dbConfig['get'](_0x4fd617(0x28c))['push']({'botID':_0x27621f,'botname':_0x4fd617(0x261)+_0x27621f,'status':_0x4fd617(0x23b),'live':''})[_0x4fd617(0x2b3)](),startBot([_0x27621f,userID],{'cwd':bbpath},function(_0x3af929){const _0xfafd14=_0x4fd617;if(_0x3af929)logger[_0xfafd14(0x2b4)](_0x3af929);}),config=getConfiguration(),io['to']('botmanager')[_0x4fd617(0x299)](_0x4fd617(0x28c),config);}function deleteBot(_0x25ae62){const _0x4f22d2=_0x52893d;getClientsWithBotID(_0x25ae62)[_0x4f22d2(0x2aa)](_0x5e0287=>{const _0x4647e4=_0x4f22d2;getSocket(_0x5e0287['id'])[_0x4647e4(0x306)](!![]),removeClient(_0x5e0287['id']);}),dbConfig[_0x4f22d2(0x364)]('bots')[_0x4f22d2(0x21c)]({'botID':_0x25ae62})['write'](),logger[_0x4f22d2(0x2b4)](_0x4f22d2(0x1ee)+_0x25ae62),stopBot(_0x25ae62);try{if(fs[_0x4f22d2(0x218)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+_0x4f22d2(0x1f6))))fs[_0x4f22d2(0x394)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+'-config.json'));if(fs[_0x4f22d2(0x218)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+_0x4f22d2(0x2d8))))fs[_0x4f22d2(0x394)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+_0x4f22d2(0x2d8)));if(fs[_0x4f22d2(0x218)](path[_0x4f22d2(0x26a)](configpath,'bot-'+_0x25ae62+'-performance.json')))fs[_0x4f22d2(0x394)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+_0x4f22d2(0x21b)));if(fs[_0x4f22d2(0x218)](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+_0x4f22d2(0x3ad))))fs['unlinkSync'](path[_0x4f22d2(0x26a)](configpath,_0x4f22d2(0x26b)+_0x25ae62+'-results.json'));}catch(_0x3c08bb){if(_0x3c08bb)logger[_0x4f22d2(0x2b4)](_0x4f22d2(0x270),_0x3c08bb);}config=getConfiguration(),io['to'](_0x4f22d2(0x318))[_0x4f22d2(0x299)](_0x4f22d2(0x28c),config);}function toggleBot(_0x18417c,_0x268b08,_0x3a75f1){const _0x418f74=_0x52893d;dbConfig[_0x418f74(0x364)](_0x418f74(0x28c))[_0x418f74(0x258)]({'botID':_0x18417c})[_0x418f74(0x2ef)]({'status':_0x268b08})[_0x418f74(0x2ef)]({'live':_0x3a75f1})['write']();if(_0x268b08==_0x418f74(0x20e)||_0x268b08==_0x418f74(0x23b))logger[_0x418f74(0x2b4)](_0x418f74(0x357)+_0x18417c),startBot([_0x18417c,userID],{'cwd':bbpath},function(_0x411ba3){const _0x1e4243=_0x418f74;if(_0x411ba3)logger[_0x1e4243(0x2b4)](_0x411ba3);});else(_0x268b08=='disabled'||_0x268b08==_0x418f74(0x289))&&(logger['full'](_0x418f74(0x2d9)+_0x18417c),stopBot(_0x18417c));config=getConfiguration(),io['to'](_0x418f74(0x318))[_0x418f74(0x299)]('bots',config);}function toggleStatus(_0x1713eb){const _0xb2b419=_0x52893d;let _0x131964=dbConfig[_0xb2b419(0x364)]('bots')[_0xb2b419(0x258)]({'botID':_0x1713eb})[_0xb2b419(0x32f)](),_0x5e8349;if(_0x131964[_0xb2b419(0x36c)]==='enabled')_0x5e8349=_0xb2b419(0x27e);else{if(_0x131964['status']===_0xb2b419(0x23b))_0x5e8349=_0xb2b419(0x289);else{if(_0x131964[_0xb2b419(0x36c)]===_0xb2b419(0x289))_0x5e8349='new';else{if(_0x131964[_0xb2b419(0x36c)]===_0xb2b419(0x27e))_0x5e8349=_0xb2b419(0x20e);}}}return _0x5e8349;}function updateStatus(_0xe90a43,_0x136613){const _0x120a28=_0x52893d;dbConfig[_0x120a28(0x364)](_0x120a28(0x28c))[_0x120a28(0x258)]({'botID':_0xe90a43})[_0x120a28(0x2ef)]({'status':_0x136613})['write'](),config=getConfiguration(),io['to'](_0x120a28(0x318))['emit']('bots',config);}function updateLive(_0x380f7a,_0x4c6141){const _0x537064=_0x52893d;dbConfig[_0x537064(0x364)](_0x537064(0x28c))[_0x537064(0x258)]({'botID':_0x380f7a})[_0x537064(0x2ef)]({'live':_0x4c6141})[_0x537064(0x2b3)](),config=getConfiguration(),io['to'](_0x537064(0x318))[_0x537064(0x299)]('bots',config);}function updateBotName(_0x3d4fbe,_0x45d74d){const _0x32190a=_0x52893d;dbConfig[_0x32190a(0x364)]('bots')[_0x32190a(0x258)]({'botID':_0x3d4fbe})[_0x32190a(0x2ef)]({'botname':_0x45d74d})['write'](),config=getConfiguration(),io['to'](_0x32190a(0x318))['emit'](_0x32190a(0x28c),config);}function updateBotManager(){const _0x5b1dd5=_0x52893d;config=getConfiguration(),io['to'](_0x5b1dd5(0x318))['emit'](_0x5b1dd5(0x28c),config);}function toggleBotMode(_0x5b7381){const _0x3d103a=_0x52893d;if(pid[_0x5b7381])pid[_0x5b7381][_0x3d103a(0x336)]({'function':_0x3d103a(0x390),'args':null});else{const _0x11c193=configpath+_0x3d103a(0x26b)+_0x5b7381+_0x3d103a(0x1f6),_0x5c80e7=fs[_0x3d103a(0x2e1)](_0x11c193),_0x599b26=JSON[_0x3d103a(0x2b0)](_0x5c80e7),_0x36642b=_0x599b26['bot'][0x0]['headless'];_0x599b26[_0x3d103a(0x239)][0x0]['headless']=!_0x36642b;const _0x42dec6=JSON[_0x3d103a(0x23e)](_0x599b26,null,0x2);fs['writeFileSync'](_0x11c193,_0x42dec6),config=getConfiguration(),io['to'](_0x3d103a(0x318))['emit'](_0x3d103a(0x28c),config);}}function telegramError(_0x478529){const _0x162541=_0x52893d;logger['simple'](getTimeStamp()+_0x162541(0x3ab));}function validateTelegram(_0x11c3ec){const _0xe815c1=_0x52893d;if(_0x11c3ec[_0xe815c1(0x256)][_0xe815c1(0x286)]!=settings[_0xe815c1(0x2cf)]&&'@'+_0x11c3ec[_0xe815c1(0x256)]['username']!=settings[_0xe815c1(0x2cf)])return tgBot[_0xe815c1(0x1f1)](_0x11c3ec[_0xe815c1(0x22b)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0xe815c1(0x243)})['catch'](_0x322771=>{telegramError(_0x322771);}),![];return!![];}async function initTelegram(){const _0x5726a3=_0x52893d;if(tgBot)tgBot[_0x5726a3(0x282)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5726a3(0x2df)],{'polling':!![]});let _0x2fbafd=_0x5726a3(0x36b);_0x2fbafd+='\x0a',_0x2fbafd+=_0x5726a3(0x216),_0x2fbafd+='/disable\x20-\x20disable\x20notifications\x0a',_0x2fbafd+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2fbafd+=_0x5726a3(0x344),_0x2fbafd+='/on\x20-\x20start\x20bot(s)\x0a',_0x2fbafd+=_0x5726a3(0x32e),_0x2fbafd+=_0x5726a3(0x2a9),_0x2fbafd+='/names\x20-\x20show\x20bot\x20names\x0a',_0x2fbafd+=_0x5726a3(0x371),_0x2fbafd+=_0x5726a3(0x3a8),_0x2fbafd+=_0x5726a3(0x369),_0x2fbafd+=_0x5726a3(0x361),_0x2fbafd+=_0x5726a3(0x3a2),_0x2fbafd+=_0x5726a3(0x2a5);let _0x334db8=_0x5726a3(0x325);_0x334db8+='\x0a',_0x334db8+=_0x2fbafd,tgBot['onText'](/\/start/,_0x3813bc=>{const _0x2fb495=_0x5726a3;if(!validateTelegram(_0x3813bc))return;if(settings['telegramChatId']!=_0x3813bc[_0x2fb495(0x22b)]['id'])updateSetting('telegramChatId',_0x3813bc[_0x2fb495(0x22b)]['id']);updateSetting(_0x2fb495(0x2ce),!![]),tgBot[_0x2fb495(0x1f1)](_0x3813bc[_0x2fb495(0x22b)]['id'],_0x334db8)[_0x2fb495(0x291)](_0x175238=>{telegramError(_0x175238);});}),tgBot[_0x5726a3(0x231)](/\/enable/,_0x8100ce=>{const _0x1b1155=_0x5726a3;if(!validateTelegram(_0x8100ce))return;if(settings[_0x1b1155(0x205)]!=_0x8100ce[_0x1b1155(0x22b)]['id'])updateSetting(_0x1b1155(0x205),_0x8100ce['chat']['id']);updateSetting(_0x1b1155(0x2ce),!![]),tgBot[_0x1b1155(0x1f1)](_0x8100ce[_0x1b1155(0x22b)]['id'],_0x1b1155(0x242))[_0x1b1155(0x291)](_0x1f8774=>{telegramError(_0x1f8774);});}),tgBot['onText'](/\/config/,async _0x3dd3f6=>{const _0x163123=_0x5726a3;if(!validateTelegram(_0x3dd3f6))return;tgBot['removeListener'](_0x163123(0x30d)),tgBot[_0x163123(0x1f1)](_0x3dd3f6[_0x163123(0x22b)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x163123(0x382),'callback_data':'orders'},{'text':_0x163123(0x31c),'callback_data':_0x163123(0x360)},{'text':_0x163123(0x353),'callback_data':_0x163123(0x2e9)}]]}})[_0x163123(0x291)](_0x32c12d=>{telegramError(_0x32c12d);}),tgBot['on'](_0x163123(0x30d),async _0xe08fef=>{const _0x268d99=_0x163123,_0x3af5ec=_0xe08fef[_0x268d99(0x28d)],_0x5e5292=_0xe08fef[_0x268d99(0x346)];tgBot['answerCallbackQuery'](_0xe08fef['id'])[_0x268d99(0x31d)](async()=>{const _0x5bea16=_0x268d99;_0x3af5ec==_0x5bea16(0x2ed)&&(updateSetting(_0x5bea16(0x247),_0x5bea16(0x2ed)),updateSetting(_0x5bea16(0x2ce),!![]),await tgBot[_0x5bea16(0x1f1)](_0x5e5292[_0x5bea16(0x22b)]['id'],_0x5bea16(0x215))[_0x5bea16(0x291)](_0x533bdb=>{telegramError(_0x533bdb);}));_0x3af5ec==_0x5bea16(0x360)&&(updateSetting(_0x5bea16(0x247),_0x5bea16(0x360)),updateSetting(_0x5bea16(0x2ce),!![]),await tgBot[_0x5bea16(0x1f1)](_0x5e5292[_0x5bea16(0x22b)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x5bea16(0x291)](_0x482239=>{telegramError(_0x482239);}));_0x3af5ec==_0x5bea16(0x2e9)&&(updateSetting(_0x5bea16(0x247),_0x5bea16(0x2e9)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x5e5292[_0x5bea16(0x22b)]['id'],_0x5bea16(0x233))[_0x5bea16(0x291)](_0x278fdb=>{telegramError(_0x278fdb);}));if(!settings['telegramChatId'])tgBot[_0x5bea16(0x1f1)](_0x5e5292[_0x5bea16(0x22b)]['id'],_0x5bea16(0x2c9))[_0x5bea16(0x291)](_0x57fd7c=>{telegramError(_0x57fd7c);});}),tgBot['removeListener'](_0x268d99(0x30d));});}),tgBot[_0x5726a3(0x231)](/\/status/,_0x2b6793=>{const _0x4fa30b=_0x5726a3;if(!validateTelegram(_0x2b6793))return;const _0x144767=getBotsWithMode();let _0x4f0cfe='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x13d08f=>{const _0x45be21=_0xedac,_0x47ca02=_0x144767[_0x45be21(0x258)](_0xccff24=>_0xccff24[_0x45be21(0x3a9)]==_0x13d08f['botID'])[_0x45be21(0x271)];_0x4f0cfe+=_0x45be21(0x261)+_0x13d08f['botID']+':\x20'+_0x13d08f[_0x45be21(0x36c)]+_0x45be21(0x22e)+_0x47ca02+_0x45be21(0x22e)+_0x13d08f[_0x45be21(0x25f)]+'\x0a';}),_0x4f0cfe+='\x0a',_0x4f0cfe+=_0x4fa30b(0x3af),_0x4f0cfe+=!settings['telegramEnabled']?_0x4fa30b(0x2b5):_0x4fa30b(0x35c),_0x4f0cfe+=settings['telegramEnabled']?settings[_0x4fa30b(0x247)]==_0x4fa30b(0x2e9)?_0x4fa30b(0x1f5):_0x4fa30b(0x32a)+settings[_0x4fa30b(0x247)]+_0x4fa30b(0x2c0):'',tgBot[_0x4fa30b(0x1f1)](_0x2b6793['chat']['id'],_0x4f0cfe,{'parse_mode':_0x4fa30b(0x243)})['catch'](_0x3bc07f=>{telegramError(_0x3bc07f);});}),tgBot[_0x5726a3(0x231)](/\/restart/,_0x28c313=>{const _0x4c401e=_0x5726a3;if(!validateTelegram(_0x28c313))return;tgBot['removeListener'](_0x4c401e(0x30d));const _0x502754=getEnabledBots();if(_0x502754[_0x4c401e(0x250)]==0x0)tgBot[_0x4c401e(0x1f1)](_0x28c313[_0x4c401e(0x22b)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x4c401e(0x291)](_0xfca7e0=>{telegramError(_0xfca7e0);});else{if(_0x502754[_0x4c401e(0x250)]>0x1)_0x502754[_0x4c401e(0x2be)]({'botID':'all'});let _0x5aaf93=[],_0x31adb9=[];const _0x488b2f=_0x502754[_0x4c401e(0x250)]%0x4==0x0||_0x502754[_0x4c401e(0x250)]%0x4==0x3||_0x502754['length']%0x3==0x1?0x4:0x3;let _0x39aa21=0x0;_0x502754[_0x4c401e(0x2aa)]((_0x4ef0ea,_0x4e61a2)=>{const _0x1f57a8=_0x4c401e;if(_0x4e61a2%_0x488b2f==0x0)_0x31adb9=[];_0x31adb9['push']({'text':_0x4ef0ea['botID']==_0x1f57a8(0x2e9)?_0x1f57a8(0x37b):_0x1f57a8(0x261)+_0x4ef0ea[_0x1f57a8(0x3a9)],'callback_data':_0x4ef0ea['botID']}),_0x4e61a2%_0x488b2f==0x0&&(_0x5aaf93[_0x39aa21]=_0x31adb9,_0x39aa21++);}),tgBot[_0x4c401e(0x1f1)](_0x28c313['chat']['id'],_0x4c401e(0x27b),{'reply_markup':{'inline_keyboard':_0x5aaf93}})[_0x4c401e(0x291)](_0x548f62=>{telegramError(_0x548f62);}),tgBot['on'](_0x4c401e(0x30d),async _0x48e512=>{const _0x4ba1f5=_0x4c401e,_0x3c08e0=_0x48e512[_0x4ba1f5(0x28d)],_0x376a2a=_0x48e512[_0x4ba1f5(0x346)];tgBot[_0x4ba1f5(0x315)](_0x48e512['id'])['then'](async()=>{const _0x19338f=_0x4ba1f5;_0x3c08e0==_0x19338f(0x2e9)?config[_0x19338f(0x2aa)](_0xf9d0c9=>{const _0x1d2025=_0x19338f;restartBot(_0xf9d0c9[_0x1d2025(0x3a9)]);}):restartBot(_0x3c08e0);}),tgBot[_0x4ba1f5(0x35d)]('callback_query');});}}),tgBot[_0x5726a3(0x231)](/\/on/,_0x500e34=>{const _0x3133e5=_0x5726a3;if(!validateTelegram(_0x500e34))return;tgBot[_0x3133e5(0x35d)]('callback_query');const _0x5d0eb4=getDisabledBots();if(_0x5d0eb4[_0x3133e5(0x250)]==0x0)tgBot[_0x3133e5(0x1f1)](_0x500e34[_0x3133e5(0x22b)]['id'],_0x3133e5(0x24c))[_0x3133e5(0x291)](_0x50d31d=>{telegramError(_0x50d31d);});else{if(_0x5d0eb4['length']>0x1)_0x5d0eb4[_0x3133e5(0x2be)]({'botID':_0x3133e5(0x2e9)});let _0x3ea558=[],_0x3b770d=[];const _0x5a755a=_0x5d0eb4[_0x3133e5(0x250)]%0x4==0x0||_0x5d0eb4[_0x3133e5(0x250)]%0x4==0x3||_0x5d0eb4[_0x3133e5(0x250)]%0x3==0x1?0x4:0x3;let _0x254e57=0x0;_0x5d0eb4[_0x3133e5(0x2aa)]((_0x1094f7,_0x229913)=>{const _0xd12562=_0x3133e5;if(_0x229913%_0x5a755a==0x0)_0x3b770d=[];_0x3b770d[_0xd12562(0x2be)]({'text':_0x1094f7[_0xd12562(0x3a9)]==_0xd12562(0x2e9)?_0xd12562(0x37b):_0xd12562(0x261)+_0x1094f7[_0xd12562(0x3a9)],'callback_data':_0x1094f7[_0xd12562(0x3a9)]}),_0x229913%_0x5a755a==0x0&&(_0x3ea558[_0x254e57]=_0x3b770d,_0x254e57++);}),tgBot['sendMessage'](_0x500e34[_0x3133e5(0x22b)]['id'],_0x3133e5(0x3a0),{'reply_markup':{'inline_keyboard':_0x3ea558}})[_0x3133e5(0x291)](_0x2ed23a=>{telegramError(_0x2ed23a);}),tgBot['on'](_0x3133e5(0x30d),async _0x57ca94=>{const _0x1bd9d9=_0x3133e5,_0x5e9c31=_0x57ca94[_0x1bd9d9(0x28d)],_0xfa63cc=_0x57ca94['message'];tgBot[_0x1bd9d9(0x315)](_0x57ca94['id'])[_0x1bd9d9(0x31d)](async()=>{const _0x191195=_0x1bd9d9;_0x5e9c31==_0x191195(0x2e9)?(tgBot[_0x191195(0x1f1)](_0xfa63cc[_0x191195(0x22b)]['id'],_0x191195(0x2c3))[_0x191195(0x291)](_0x1a3dd7=>{telegramError(_0x1a3dd7);}),_0x5d0eb4['forEach'](_0x224b7d=>{const _0x6003d=_0x191195;if(_0x224b7d[_0x6003d(0x3a9)]!=_0x6003d(0x2e9))toggleBot(_0x224b7d['botID'],toggleStatus(_0x224b7d[_0x6003d(0x3a9)]),'stopped');})):(tgBot[_0x191195(0x1f1)](_0xfa63cc[_0x191195(0x22b)]['id'],_0x191195(0x25a)+_0x5e9c31)[_0x191195(0x291)](_0x5a54d5=>{telegramError(_0x5a54d5);}),toggleBot(_0x5e9c31,toggleStatus(_0x5e9c31),_0x191195(0x38b)));}),tgBot[_0x1bd9d9(0x35d)](_0x1bd9d9(0x30d));});}}),tgBot[_0x5726a3(0x231)](/\/off/,_0xe868e1=>{const _0x2072ac=_0x5726a3;if(!validateTelegram(_0xe868e1))return;tgBot[_0x2072ac(0x35d)](_0x2072ac(0x30d));const _0x5c33b1=getEnabledBots();if(_0x5c33b1[_0x2072ac(0x250)]==0x0)tgBot[_0x2072ac(0x1f1)](_0xe868e1[_0x2072ac(0x22b)]['id'],_0x2072ac(0x232))[_0x2072ac(0x291)](_0x45ca6c=>{telegramError(_0x45ca6c);});else{if(_0x5c33b1[_0x2072ac(0x250)]>0x1)_0x5c33b1[_0x2072ac(0x2be)]({'botID':_0x2072ac(0x2e9)});let _0x2a7059=[],_0x587775=[];const _0x4e64b9=_0x5c33b1[_0x2072ac(0x250)]%0x4==0x0||_0x5c33b1[_0x2072ac(0x250)]%0x4==0x3||_0x5c33b1['length']%0x3==0x1?0x4:0x3;let _0x57725d=0x0;_0x5c33b1[_0x2072ac(0x2aa)]((_0x5f11ab,_0x189f6e)=>{const _0x565fab=_0x2072ac;if(_0x189f6e%_0x4e64b9==0x0)_0x587775=[];_0x587775[_0x565fab(0x2be)]({'text':_0x5f11ab[_0x565fab(0x3a9)]=='all'?'All\x20bots':'Bot\x20'+_0x5f11ab[_0x565fab(0x3a9)],'callback_data':_0x5f11ab[_0x565fab(0x3a9)]}),_0x189f6e%_0x4e64b9==0x0&&(_0x2a7059[_0x57725d]=_0x587775,_0x57725d++);}),tgBot[_0x2072ac(0x1f1)](_0xe868e1[_0x2072ac(0x22b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2a7059}})[_0x2072ac(0x291)](_0x44e371=>{telegramError(_0x44e371);}),tgBot['on'](_0x2072ac(0x30d),async _0x19d088=>{const _0x20003e=_0x2072ac,_0x1d4eff=_0x19d088['data'],_0x46d3ed=_0x19d088[_0x20003e(0x346)];tgBot['answerCallbackQuery'](_0x19d088['id'])[_0x20003e(0x31d)](async()=>{const _0x485bfc=_0x20003e;_0x1d4eff==_0x485bfc(0x2e9)?(tgBot[_0x485bfc(0x1f1)](_0x46d3ed[_0x485bfc(0x22b)]['id'],_0x485bfc(0x227))[_0x485bfc(0x291)](_0x53112f=>{telegramError(_0x53112f);}),_0x5c33b1[_0x485bfc(0x2aa)](_0x1c5e84=>{const _0x4e5517=_0x485bfc;if(_0x1c5e84['botID']!='all')toggleBot(_0x1c5e84['botID'],toggleStatus(_0x1c5e84[_0x4e5517(0x3a9)]),_0x4e5517(0x38b));})):(tgBot[_0x485bfc(0x1f1)](_0x46d3ed[_0x485bfc(0x22b)]['id'],_0x485bfc(0x2e6)+_0x1d4eff)[_0x485bfc(0x291)](_0x4eafe7=>{telegramError(_0x4eafe7);}),toggleBot(_0x1d4eff,toggleStatus(_0x1d4eff),'stopped'));}),tgBot[_0x20003e(0x35d)](_0x20003e(0x30d));});}}),tgBot[_0x5726a3(0x231)](/\/metrics/,_0x2539cb=>{const _0x4d7453=_0x5726a3;if(!validateTelegram(_0x2539cb))return;tgBot[_0x4d7453(0x35d)](_0x4d7453(0x30d));const _0x3afc65=getEnabledBots();if(_0x3afc65[_0x4d7453(0x250)]==0x0)tgBot[_0x4d7453(0x1f1)](_0x2539cb[_0x4d7453(0x22b)]['id'],_0x4d7453(0x232))[_0x4d7453(0x291)](_0x534cfc=>{telegramError(_0x534cfc);});else{if(_0x3afc65[_0x4d7453(0x250)]>0x1){let _0x2c2903=[],_0x4603a5=[];const _0x11e95e=_0x3afc65[_0x4d7453(0x250)]%0x4==0x0||_0x3afc65['length']%0x4==0x3||_0x3afc65[_0x4d7453(0x250)]%0x3==0x1?0x4:0x3;let _0x1d39d6=0x0;_0x3afc65[_0x4d7453(0x2aa)]((_0x13d058,_0x5097cb)=>{const _0x29d049=_0x4d7453;if(_0x5097cb%_0x11e95e==0x0)_0x4603a5=[];_0x4603a5[_0x29d049(0x2be)]({'text':_0x29d049(0x261)+_0x13d058[_0x29d049(0x3a9)],'callback_data':_0x13d058['botID']}),_0x5097cb%_0x11e95e==0x0&&(_0x2c2903[_0x1d39d6]=_0x4603a5,_0x1d39d6++);}),tgBot[_0x4d7453(0x1f1)](_0x2539cb[_0x4d7453(0x22b)]['id'],_0x4d7453(0x35e),{'reply_markup':{'inline_keyboard':_0x2c2903}})[_0x4d7453(0x291)](_0x3eaa36=>{telegramError(_0x3eaa36);}),tgBot['on'](_0x4d7453(0x30d),async _0xc3072e=>{const _0x58d77e=_0x4d7453,_0x2430a1=_0xc3072e[_0x58d77e(0x28d)],_0xbb84db=_0xc3072e[_0x58d77e(0x346)];tgBot['answerCallbackQuery'](_0xc3072e['id'])['then'](async()=>{const _0x744e=_0x58d77e;if(pid[_0x2430a1])pid[_0x2430a1][_0x744e(0x336)]({'function':_0x744e(0x2ac),'args':null});}),tgBot['removeListener'](_0x58d77e(0x30d));});}else{const _0x3d6d85=_0x3afc65[0x0][_0x4d7453(0x3a9)];if(pid[_0x3d6d85])pid[_0x3d6d85]['send']({'function':_0x4d7453(0x2ac),'args':null});}}}),tgBot[_0x5726a3(0x231)](/\/portfolio/,_0x30cda9=>{const _0x3daa42=_0x5726a3;if(!validateTelegram(_0x30cda9))return;tgBot[_0x3daa42(0x35d)]('callback_query');const _0x39a992=getEnabledBots();if(_0x39a992['length']==0x0)tgBot[_0x3daa42(0x1f1)](_0x30cda9['chat']['id'],_0x3daa42(0x232))['catch'](_0x916cf=>{telegramError(_0x916cf);});else{if(_0x39a992[_0x3daa42(0x250)]>0x1){let _0xdecea6=[],_0x47d3e1=[];const _0x42a9a8=_0x39a992[_0x3daa42(0x250)]%0x4==0x0||_0x39a992[_0x3daa42(0x250)]%0x4==0x3||_0x39a992['length']%0x3==0x1?0x4:0x3;let _0x3e7ba4=0x0;_0x39a992[_0x3daa42(0x2aa)]((_0x3da505,_0x29dac2)=>{const _0x427e1f=_0x3daa42;if(_0x29dac2%_0x42a9a8==0x0)_0x47d3e1=[];_0x47d3e1[_0x427e1f(0x2be)]({'text':_0x427e1f(0x261)+_0x3da505['botID'],'callback_data':_0x3da505[_0x427e1f(0x3a9)]}),_0x29dac2%_0x42a9a8==0x0&&(_0xdecea6[_0x3e7ba4]=_0x47d3e1,_0x3e7ba4++);}),tgBot['sendMessage'](_0x30cda9[_0x3daa42(0x22b)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0xdecea6}})[_0x3daa42(0x291)](_0x1f936c=>{telegramError(_0x1f936c);}),tgBot['on'](_0x3daa42(0x30d),async _0x34117a=>{const _0x551c80=_0x3daa42,_0x32b943=_0x34117a[_0x551c80(0x28d)],_0x1ef1d5=_0x34117a[_0x551c80(0x346)];tgBot[_0x551c80(0x315)](_0x34117a['id'])[_0x551c80(0x31d)](async()=>{const _0x4b790e=_0x551c80;if(pid[_0x32b943])pid[_0x32b943][_0x4b790e(0x336)]({'function':_0x4b790e(0x36f),'args':null});}),tgBot['removeListener'](_0x551c80(0x30d));});}else{const _0x3a0fa1=_0x39a992[0x0][_0x3daa42(0x3a9)];if(pid[_0x3a0fa1])pid[_0x3a0fa1][_0x3daa42(0x336)]({'function':_0x3daa42(0x36f),'args':null});}}}),tgBot['onText'](/\/update/,async _0x486b1b=>{const _0x209dfe=_0x5726a3;if(!validateTelegram(_0x486b1b))return;tgBot['removeListener'](_0x209dfe(0x30d)),await getMessages();if(!updateAvailable)tgBot[_0x209dfe(0x1f1)](_0x486b1b['chat']['id'],_0x209dfe(0x237))[_0x209dfe(0x291)](_0x3eda25=>{telegramError(_0x3eda25);});else!validInstallation?tgBot[_0x209dfe(0x1f1)](_0x486b1b[_0x209dfe(0x22b)]['id'],_0x209dfe(0x254))[_0x209dfe(0x291)](_0x5d04f0=>{telegramError(_0x5d04f0);}):(tgBot[_0x209dfe(0x1f1)](_0x486b1b[_0x209dfe(0x22b)]['id'],_0x209dfe(0x379),{'reply_markup':{'inline_keyboard':[[{'text':_0x209dfe(0x25e),'callback_data':_0x209dfe(0x246)},{'text':'No','callback_data':'no'}]]}})[_0x209dfe(0x291)](_0x47e822=>{telegramError(_0x47e822);}),tgBot['on'](_0x209dfe(0x30d),async _0x8ee8f8=>{const _0x57cbfb=_0x209dfe,_0x36fb47=_0x8ee8f8[_0x57cbfb(0x28d)],_0x5987b4=_0x8ee8f8['message'];tgBot[_0x57cbfb(0x315)](_0x8ee8f8['id'])[_0x57cbfb(0x31d)](async()=>{const _0x4e742a=_0x57cbfb;_0x36fb47=='yes'&&(await tgBot[_0x4e742a(0x1f1)](_0x5987b4[_0x4e742a(0x22b)]['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x2fe159=>{telegramError(_0x2fe159);}),updateBB(_0x4e742a(0x204))),_0x36fb47=='no'&&await tgBot['sendMessage'](_0x5987b4['chat']['id'],_0x4e742a(0x2af))[_0x4e742a(0x291)](_0x584c7b=>{telegramError(_0x584c7b);});}),tgBot[_0x57cbfb(0x35d)](_0x57cbfb(0x30d));}));}),tgBot[_0x5726a3(0x231)](/\/reinstall/,async _0x379d64=>{const _0x54b669=_0x5726a3;if(!validateTelegram(_0x379d64))return;tgBot['removeListener'](_0x54b669(0x30d)),!validInstallation?tgBot[_0x54b669(0x1f1)](_0x379d64[_0x54b669(0x22b)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0x54b669(0x291)](_0x53ed4f=>{telegramError(_0x53ed4f);}):(tgBot['sendMessage'](_0x379d64[_0x54b669(0x22b)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x54b669(0x25e),'callback_data':_0x54b669(0x246)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x4a530f=>{telegramError(_0x4a530f);}),tgBot['on']('callback_query',async _0xcaffac=>{const _0x243e0e=_0x54b669,_0x162012=_0xcaffac[_0x243e0e(0x28d)],_0x246a67=_0xcaffac['message'];tgBot['answerCallbackQuery'](_0xcaffac['id'])[_0x243e0e(0x31d)](async()=>{const _0x4394e2=_0x243e0e;_0x162012==_0x4394e2(0x246)&&(await tgBot[_0x4394e2(0x1f1)](_0x246a67['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x4394e2(0x291)](_0x1274dc=>{telegramError(_0x1274dc);}),updateBB('reinstall')),_0x162012=='no'&&await tgBot[_0x4394e2(0x1f1)](_0x246a67['chat']['id'],_0x4394e2(0x38e))['catch'](_0x39e397=>{telegramError(_0x39e397);});}),tgBot['removeListener'](_0x243e0e(0x30d));}));}),tgBot[_0x5726a3(0x231)](/\/toggle/,_0x50baca=>{const _0x21966e=_0x5726a3;if(!validateTelegram(_0x50baca))return;tgBot['removeListener'](_0x21966e(0x30d));const _0x57ad59=getBotsWithMode();if(_0x57ad59['length']==0x0)tgBot[_0x21966e(0x1f1)](_0x50baca[_0x21966e(0x22b)]['id'],_0x21966e(0x232))[_0x21966e(0x291)](_0x458753=>{telegramError(_0x458753);});else{let _0x25e122=[],_0x18f733=[];const _0x580123=0x2;let _0x2309e2=0x0;_0x57ad59[_0x21966e(0x2aa)]((_0x3beb5a,_0x13fb5d)=>{const _0x98d3aa=_0x21966e;if(_0x13fb5d%_0x580123==0x0)_0x18f733=[];_0x18f733[_0x98d3aa(0x2be)]({'text':_0x98d3aa(0x261)+_0x3beb5a[_0x98d3aa(0x3a9)]+'\x20('+_0x3beb5a[_0x98d3aa(0x271)]+')','callback_data':_0x3beb5a[_0x98d3aa(0x3a9)]}),_0x13fb5d%_0x580123==0x0&&(_0x25e122[_0x2309e2]=_0x18f733,_0x2309e2++);}),tgBot['sendMessage'](_0x50baca[_0x21966e(0x22b)]['id'],_0x21966e(0x37a),{'reply_markup':{'inline_keyboard':_0x25e122}})['catch'](_0x4b43b1=>{telegramError(_0x4b43b1);}),tgBot['on'](_0x21966e(0x30d),async _0x1f2573=>{const _0x4d4636=_0x21966e,_0x1d4aea=_0x1f2573[_0x4d4636(0x28d)],_0x32f512=_0x1f2573[_0x4d4636(0x346)];tgBot[_0x4d4636(0x315)](_0x1f2573['id'])[_0x4d4636(0x31d)](async()=>{const _0x5d04b2=_0x4d4636,_0x2f76b4=_0x57ad59[_0x5d04b2(0x258)](_0x106ea1=>_0x106ea1[_0x5d04b2(0x3a9)]==_0x1d4aea),_0x523a60=_0x2f76b4[_0x5d04b2(0x271)]==_0x5d04b2(0x283)?_0x5d04b2(0x24f):_0x5d04b2(0x283);tgBot['sendMessage'](_0x32f512[_0x5d04b2(0x22b)]['id'],_0x5d04b2(0x316)+_0x1d4aea+_0x5d04b2(0x2d7)+_0x523a60+_0x5d04b2(0x2ea))['catch'](_0x146d54=>{telegramError(_0x146d54);}),toggleBotMode(_0x1d4aea);}),tgBot[_0x4d4636(0x35d)](_0x4d4636(0x30d));});}}),tgBot[_0x5726a3(0x231)](/\/names/,_0x423ca0=>{const _0x42f6e9=_0x5726a3;if(!validateTelegram(_0x423ca0))return;let _0x57745f='';config[_0x42f6e9(0x2aa)](_0x586462=>{const _0x27e406=_0x42f6e9;_0x57745f+=_0x27e406(0x261)+_0x586462[_0x27e406(0x3a9)]+':\x20'+_0x586462[_0x27e406(0x295)]+'\x0a';}),tgBot[_0x42f6e9(0x1f1)](_0x423ca0['chat']['id'],_0x57745f,{'parse_mode':_0x42f6e9(0x243)})[_0x42f6e9(0x291)](_0x16d405=>{telegramError(_0x16d405);});}),tgBot[_0x5726a3(0x231)](/\/disable/,_0x9efcb=>{const _0x105b03=_0x5726a3;if(!validateTelegram(_0x9efcb))return;tgBot[_0x105b03(0x1f1)](_0x9efcb[_0x105b03(0x22b)]['id'],_0x105b03(0x2fd))[_0x105b03(0x291)](_0xa842c1=>{telegramError(_0xa842c1);}),updateSetting(_0x105b03(0x2ce),![]);}),tgBot['onText'](/\/help/,_0x5a65c3=>{const _0x273fd1=_0x5726a3;if(!validateTelegram(_0x5a65c3))return;tgBot[_0x273fd1(0x1f1)](_0x5a65c3[_0x273fd1(0x22b)]['id'],_0x2fbafd)[_0x273fd1(0x291)](_0x2603ed=>{telegramError(_0x2603ed);});}),tgBot['on'](_0x5726a3(0x285),_0x276cd9=>{const _0x504c0b=_0x5726a3;_0x276cd9[_0x504c0b(0x1ed)]()[_0x504c0b(0x2da)](_0x504c0b(0x307))&&(logger[_0x504c0b(0x2b4)]('Invalid\x20Telegram\x20token'),tgBot[_0x504c0b(0x282)](),tgBot=null,io['to'](_0x504c0b(0x318))['emit'](_0x504c0b(0x332),_0x504c0b(0x255)));}),process[_0x5726a3(0x27c)]('SIGINT',()=>{const _0x3cf2cf=_0x5726a3;if(tgBot)tgBot['stopPolling']();process[_0x3cf2cf(0x384)](0x1);}),process[_0x5726a3(0x27c)](_0x5726a3(0x311),()=>{const _0x2f7a75=_0x5726a3;if(tgBot)tgBot['stopPolling']();process[_0x2f7a75(0x384)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x4fa855,_0x46770d){const _0x2e277c=_0x52893d;if(settings['telegramEnabled']){if(settings[_0x2e277c(0x247)]==_0x2e277c(0x2e9)||(_0x46770d[_0x2e277c(0x207)]=='error'||_0x46770d['type']==_0x2e277c(0x202)||_0x46770d['type']==_0x2e277c(0x30e))&&settings[_0x2e277c(0x247)]=='alerts'||_0x46770d[_0x2e277c(0x207)]==_0x2e277c(0x200)&&settings['telegramEvents']==_0x2e277c(0x2ed)){if(tgBot&&settings[_0x2e277c(0x205)]){if(_0x46770d[_0x2e277c(0x2d4)])tgBot[_0x2e277c(0x1f1)](settings['telegramChatId'],_0x46770d[_0x2e277c(0x295)]+'\x20>\x20'+_0x46770d['event'])[_0x2e277c(0x291)](_0x29b95d=>{telegramError(_0x29b95d);});else tgBot['sendMessage'](settings[_0x2e277c(0x205)],_0x2e277c(0x261)+_0x4fa855+_0x2e277c(0x350)+_0x46770d['event'])[_0x2e277c(0x291)](_0x22fb78=>{telegramError(_0x22fb78);});}}}}async function sendTelegramMsg(_0x3cf6fb,_0x3e6b84='HTML'){const _0x16715f=_0x52893d;return settings[_0x16715f(0x2ce)]&&tgBot&&settings[_0x16715f(0x205)]?(await tgBot[_0x16715f(0x1f1)](settings[_0x16715f(0x205)],_0x3cf6fb,{'parse_mode':_0x3e6b84})[_0x16715f(0x291)](_0x7a5204=>{telegramError(_0x7a5204);}),!![]):![];}function getDeviceWithIp(_0x2c42cf){const _0x21fd9d=_0x52893d;return devices[_0x21fd9d(0x258)](_0x3fc2ff=>_0x3fc2ff['ip']===_0x2c42cf);}function temporaryAccess2FA(_0x3ad19b,_0x38eeff){const _0x27045e=_0x52893d;let _0x1f4785=new Date(),_0x2a4195=![];if(lastIpApproval){if(_0x1f4785-lastIpApproval<0x1388)_0x2a4195=!![];}lastIpApproval=new Date();if(_0x2a4195)return;tgBot&&settings[_0x27045e(0x205)]&&(tgBot['removeListener'](_0x27045e(0x30d)),tgBot['sendMessage'](settings[_0x27045e(0x205)],_0x27045e(0x34b)+normalizeIP(_0x38eeff)[_0x27045e(0x317)]+_0x27045e(0x302),{'parse_mode':_0x27045e(0x243),'reply_markup':{'inline_keyboard':[[{'text':_0x27045e(0x330),'callback_data':'5'},{'text':_0x27045e(0x32c),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x27045e(0x291)](_0x3dbcc3=>{telegramError(_0x3dbcc3);}),tgBot['on'](_0x27045e(0x30d),async _0x48fadd=>{const _0x5b25b4=_0x27045e,_0x3f0a76=_0x48fadd['data'],_0x538d15=_0x48fadd[_0x5b25b4(0x346)];tgBot[_0x5b25b4(0x315)](_0x48fadd['id'])['then'](async()=>{const _0xce25c1=_0x5b25b4;devices[_0x3ad19b]['telegramIpApproval']={'clientip':_0x38eeff,'timestamp':new Date()['getTime'](),'expiry':_0x3f0a76},_0x3f0a76!=_0xce25c1(0x223)?(await tgBot[_0xce25c1(0x1f1)](_0x538d15[_0xce25c1(0x22b)]['id'],_0xce25c1(0x210)+_0x3f0a76+_0xce25c1(0x273),{'parse_mode':_0xce25c1(0x243)})[_0xce25c1(0x291)](_0x560749=>{telegramError(_0x560749);}),io['to'](_0x3ad19b)[_0xce25c1(0x299)](_0xce25c1(0x36c),{'access':{'allow':![],'reason':_0xce25c1(0x2c6),'token':null}})):(await tgBot[_0xce25c1(0x1f1)](_0x538d15[_0xce25c1(0x22b)]['id'],_0xce25c1(0x2a7))[_0xce25c1(0x291)](_0x54a619=>{telegramError(_0x54a619);}),io['to'](_0x3ad19b)[_0xce25c1(0x299)](_0xce25c1(0x36c),{'access':{'allow':![],'reason':_0xce25c1(0x333),'token':null}}));}),tgBot[_0x5b25b4(0x35d)](_0x5b25b4(0x30d));}));}function loginAccess2FA(_0x5e4a3e,_0x270b6a){const _0x379e85=_0x52893d;tgBot&&settings[_0x379e85(0x205)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x379e85(0x1f1)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x270b6a)[_0x379e85(0x317)]+'</b>\x20?',{'parse_mode':_0x379e85(0x243),'reply_markup':{'inline_keyboard':[[{'text':_0x379e85(0x363),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x379e85(0x223)}]]}})['catch'](_0x16bc8a=>{telegramError(_0x16bc8a);}),tgBot['on']('callback_query',async _0x124bd1=>{const _0xa79808=_0x379e85,_0x35d0e7=_0x124bd1[_0xa79808(0x28d)],_0x426475=_0x124bd1[_0xa79808(0x346)];tgBot[_0xa79808(0x315)](_0x124bd1['id'])[_0xa79808(0x31d)](async()=>{const _0x4b120b=_0xa79808;devices[_0x5e4a3e][_0x4b120b(0x34f)]={'clientip':_0x270b6a,'timestamp':new Date()['getTime'](),'expiry':_0x35d0e7},_0x35d0e7!='reject'?(await tgBot['sendMessage'](_0x426475[_0x4b120b(0x22b)]['id'],_0x4b120b(0x338),{'parse_mode':_0x4b120b(0x243)})['catch'](_0x3f14da=>{telegramError(_0x3f14da);}),io['to'](_0x5e4a3e)[_0x4b120b(0x299)](_0x4b120b(0x36c),{'access':{'allow':![],'reason':_0x4b120b(0x2c6),'token':null}})):(await tgBot[_0x4b120b(0x1f1)](_0x426475[_0x4b120b(0x22b)]['id'],_0x4b120b(0x25c))[_0x4b120b(0x291)](_0x28a229=>{telegramError(_0x28a229);}),io['to'](_0x5e4a3e)['emit'](_0x4b120b(0x36c),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0xa79808(0x35d)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x57692f=_0x52893d;return dbConfig[_0x57692f(0x364)](_0x57692f(0x28c))[_0x57692f(0x259)](_0x57692f(0x3a9))[_0x57692f(0x313)]({'status':_0x57692f(0x20e)})[_0x57692f(0x32f)]()||[];}function getDisabledBots(){const _0x305c76=_0x52893d;return dbConfig[_0x305c76(0x364)]('bots')['sortBy'](_0x305c76(0x3a9))[_0x305c76(0x313)]({'status':_0x305c76(0x27e)})['value']()||[];}function getBotAttributes(_0x19c6d5){const _0x31dcf6=_0x52893d;let _0x33c818={};const _0x32bcdc=configpath+_0x31dcf6(0x26b)+_0x19c6d5+_0x31dcf6(0x1f6),_0x5b8322=fs[_0x31dcf6(0x218)](_0x32bcdc);if(_0x5b8322){const _0x511c83=fs[_0x31dcf6(0x2e1)](_0x32bcdc);try{const _0x32f4fc=JSON[_0x31dcf6(0x2b0)](_0x511c83),_0x52a5d5=_0x32f4fc?_0x32f4fc['bot'][0x0][_0x31dcf6(0x35f)]:![];_0x33c818[_0x31dcf6(0x271)]=_0x52a5d5?_0x31dcf6(0x283):'manual',_0x33c818[_0x31dcf6(0x295)]=_0x32f4fc?_0x32f4fc[_0x31dcf6(0x239)][0x0][_0x31dcf6(0x295)]:_0x31dcf6(0x261)+_0x19c6d5;}catch(_0x23408a){_0x33c818[_0x31dcf6(0x271)]=_0x31dcf6(0x24f),_0x33c818[_0x31dcf6(0x295)]=_0x31dcf6(0x261)+_0x19c6d5;}}else _0x33c818[_0x31dcf6(0x271)]=_0x31dcf6(0x24f),_0x33c818[_0x31dcf6(0x295)]='Bot\x20'+_0x19c6d5;return _0x33c818;}function getBotsWithMode(){const _0x1ee661=_0x52893d,_0x38eec2=dbConfig[_0x1ee661(0x364)]('bots')[_0x1ee661(0x259)](_0x1ee661(0x3a9))['value']()||[];return _0x38eec2[_0x1ee661(0x2aa)](_0x121e31=>{const _0x2f1a16=_0x1ee661;let _0x47fe63=getBotAttributes(_0x121e31['botID']);_0x121e31[_0x2f1a16(0x271)]=_0x47fe63['mode'];}),_0x38eec2;}function getBotExchanges(){const _0x280cab=_0x52893d;let _0x1cbd7c=[];const _0x5366a6=dbConfig[_0x280cab(0x364)](_0x280cab(0x28c))['sortBy'](_0x280cab(0x3a9))['value']()||[];_0x5366a6[_0x280cab(0x2aa)](_0x39a3eb=>{const _0x51a2ed=_0x280cab;if(_0x39a3eb[_0x51a2ed(0x36c)]==_0x51a2ed(0x20e)){const _0x964fe7=configpath+_0x51a2ed(0x26b)+_0x39a3eb['botID']+_0x51a2ed(0x1f6),_0x11604e=fs[_0x51a2ed(0x218)](_0x964fe7);let _0x1531f7;if(_0x11604e){const _0x7230b7=fs[_0x51a2ed(0x2e1)](_0x964fe7);try{const _0x25d1de=JSON[_0x51a2ed(0x2b0)](_0x7230b7);_0x1531f7=_0x25d1de?_0x25d1de[_0x51a2ed(0x239)][0x0]['exchange']:null;}catch(_0x2df459){}}if(_0x1531f7)_0x1cbd7c[_0x51a2ed(0x2be)](_0x1531f7);}});const _0x5b6865=[...new Set(_0x1cbd7c)][_0x280cab(0x391)]();return _0x5b6865;}async function initUser(){const _0x336d26=_0x52893d;if(!settings['userid']){const _0x4daec7=uuidRandom();mixpanel[_0x336d26(0x30a)](_0x4daec7),updateSetting(_0x336d26(0x2ae),_0x4daec7);}}async function initSecure(){const _0x4515b6=_0x52893d;let _0x2dbe33=getSecure();if(!_0x2dbe33['hasOwnProperty'](_0x4515b6(0x1fb))){let _0x57d89b=await generateKeys();_0x2dbe33['publicKey']=_0x57d89b[_0x4515b6(0x24b)],_0x2dbe33['privateKey']=_0x57d89b[_0x4515b6(0x3a5)],_0x2dbe33[_0x4515b6(0x1fb)]=crypto['randomBytes'](0x20)[_0x4515b6(0x1ed)](_0x4515b6(0x2d6));;storeSecure(_0x2dbe33);}}function getSettings(){const _0x142687=_0x52893d;return dbSettings[_0x142687(0x364)](_0x142687(0x30c))[_0x142687(0x32f)]()||{};}function getSecure(){return dbSecure['get']('secure')['value']()||{};}function getBlacklist(){const _0x522631=_0x52893d;return dbSecure[_0x522631(0x364)]('blacklist')[_0x522631(0x32f)]()||[];}function broadcastToBots(_0x3f57a1,_0x220f9a){const _0x19a1a6=_0x52893d;config[_0x19a1a6(0x2aa)](_0x230cde=>{const _0x210b75=_0x19a1a6;if(_0x230cde[_0x210b75(0x36c)]=='enabled'&&_0x230cde[_0x210b75(0x25f)]==_0x210b75(0x277)){if(pid[_0x230cde['botID']])pid[_0x230cde[_0x210b75(0x3a9)]][_0x210b75(0x336)]({[_0x3f57a1]:_0x220f9a});}});}function storeSettings(_0xef3c2d,_0x5c0b5c=![]){const _0x2a768c=_0x52893d;_0xef3c2d={...settings,..._0xef3c2d};if(_0x5c0b5c&&_0xef3c2d[_0x2a768c(0x238)]!=_0x2a768c(0x29b)&&_0xef3c2d['bbPassword']!=_0x2a768c(0x1f8)&&_0xef3c2d[_0x2a768c(0x238)]!=''){const _0x7402b=crypt[_0x2a768c(0x337)](secure[_0x2a768c(0x3a5)],_0xef3c2d['bbPassword'])[_0x2a768c(0x346)]['split']('@')[0x0],_0x24a870=bcrypt[_0x2a768c(0x31b)](_0x7402b,saltRounds);_0xef3c2d={..._0xef3c2d,'bbPassword':_0x24a870};}if(_0x5c0b5c&&_0xef3c2d[_0x2a768c(0x2df)]!=_0x2a768c(0x29b)&&_0xef3c2d[_0x2a768c(0x2df)]!='***'&&_0xef3c2d['telegramToken']!=''){const _0x167a41=crypt[_0x2a768c(0x337)](secure[_0x2a768c(0x3a5)],_0xef3c2d[_0x2a768c(0x2df)])[_0x2a768c(0x346)]['split']('@')[0x0];_0xef3c2d={..._0xef3c2d,'telegramToken':_0x167a41};}const _0x29dce1=_0xef3c2d[_0x2a768c(0x2df)]!=_0x2a768c(0x29b)&&_0xef3c2d['telegramToken']!=settings[_0x2a768c(0x2df)]||_0xef3c2d[_0x2a768c(0x2cf)]!=settings[_0x2a768c(0x2cf)],_0x3bada=_0xef3c2d[_0x2a768c(0x2df)]==''||_0xef3c2d[_0x2a768c(0x2cf)]=='';if(_0x29dce1)_0xef3c2d[_0x2a768c(0x247)]=_0x2a768c(0x2e9);for(const [_0x48138f,_0x4ad574]of Object[_0x2a768c(0x253)](_0xef3c2d)){if(_0x48138f==_0x2a768c(0x2df)&&_0x4ad574==_0x2a768c(0x29b)){_0xef3c2d[_0x2a768c(0x2df)]=settings['telegramToken'];continue;};if(_0x48138f==_0x2a768c(0x238)&&_0x4ad574==_0x2a768c(0x29b)){_0xef3c2d[_0x2a768c(0x238)]=settings[_0x2a768c(0x238)];continue;};dbSettings['set'](_0x2a768c(0x26d)+_0x48138f,_0x4ad574)[_0x2a768c(0x2b3)]();}settings=_0xef3c2d,io['to'](_0x2a768c(0x318))[_0x2a768c(0x299)](_0x2a768c(0x30c),cleanSettings()),broadcastToBots(_0x2a768c(0x2bc),settings[_0x2a768c(0x2bc)]);if(_0x29dce1&&!_0x3bada)initTelegram();if(_0x29dce1&&_0x3bada)disableTelegram();getAllClients()[_0x2a768c(0x2aa)](_0x150694=>{const _0x4712dd=_0x2a768c;getSocket(_0x150694['id'])[_0x4712dd(0x299)](_0x4712dd(0x36c),{'access':{'allow':![],'reason':_0x4712dd(0x2c6),'token':null}});});}function updateSetting(_0x153e1f,_0x261613){const _0xa7e8a7=_0x52893d;dbSettings[_0xa7e8a7(0x2b6)](_0xa7e8a7(0x26d)+_0x153e1f,_0x261613)[_0xa7e8a7(0x2b3)](),settings=getSettings(),io['to'](_0xa7e8a7(0x318))[_0xa7e8a7(0x299)]('settings',cleanSettings());}function storeSecure(_0xf1cf88){const _0x9b45f1=_0x52893d;dbSecure['get'](_0x9b45f1(0x2b7))['push'](_0xf1cf88)[_0x9b45f1(0x2b3)](),secure=_0xf1cf88;}function addBlacklist(_0x48dae8){const _0x3bee5b=_0x52893d;cleanBlacklist();let _0x4cbb94;devices[_0x48dae8][_0x3bee5b(0x280)]?_0x4cbb94=Math[_0x3bee5b(0x31f)](devices[_0x48dae8]['telegramIpApproval'][_0x3bee5b(0x339)],loginExpiry):_0x4cbb94=loginExpiry,dbSecure['get'](_0x3bee5b(0x368))[_0x3bee5b(0x2be)]({'expiry':new Date()['getTime']()+_0x4cbb94*0x3c*0x3e8,'token':devices[_0x48dae8][_0x3bee5b(0x31e)][_0x3bee5b(0x26f)]})[_0x3bee5b(0x2b3)](),blacklist=dbSecure['get'](_0x3bee5b(0x368))[_0x3bee5b(0x32f)]();}function cleanBlacklist(){const _0x728cd8=_0x52893d;let _0x5bf049=dbSecure[_0x728cd8(0x364)](_0x728cd8(0x368))[_0x728cd8(0x248)]()['value'](),_0x5a7775=new Date()[_0x728cd8(0x312)]();_0x5bf049['forEach'](_0x3e58e6=>{const _0xdf55be=_0x728cd8;_0x3e58e6[_0xdf55be(0x339)]<_0x5a7775&&dbSecure[_0xdf55be(0x364)](_0xdf55be(0x368))[_0xdf55be(0x21c)]({'expiry':_0x3e58e6[_0xdf55be(0x339)]})[_0xdf55be(0x2b3)]();});}function initStates(){const _0x1e8ed9=_0x52893d;let _0x20c0e5=getConfiguration();_0x20c0e5[_0x1e8ed9(0x2aa)](_0x18f8f6=>{const _0x280da3=_0x1e8ed9;_0x18f8f6[_0x280da3(0x25f)]=_0x280da3(0x38b);}),storeConfiguration(_0x20c0e5);}function onKeys(){const _0x53e17a=new RSA();return new Promise(_0x2d5dfc=>{_0x53e17a['generateKeyPairAsync']()['then'](_0x2857d2=>{_0x2d5dfc(_0x2857d2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1df6f6=_0x52893d;let _0x2e7729=getSettings(),_0x1b60c6=![];!_0x2e7729[_0x1df6f6(0x224)](_0x1df6f6(0x352))&&(_0x2e7729[_0x1df6f6(0x352)]=0x0,_0x1b60c6=!![]);!_0x2e7729[_0x1df6f6(0x224)]('lastmsgemitted')&&(_0x2e7729['lastmsgemitted']=0x0,_0x1b60c6=!![]);!_0x2e7729[_0x1df6f6(0x224)](_0x1df6f6(0x230))&&(_0x2e7729[_0x1df6f6(0x230)]=_0x1df6f6(0x260),_0x1b60c6=!![]);if(_0x1b60c6)storeSettings(_0x2e7729);}function storeConfiguration(_0x416d2c){const _0xf61457=_0x52893d;dbConfig[_0xf61457(0x364)]('bots')['remove']()['write'](),_0x416d2c[_0xf61457(0x2aa)](_0x17b1b5=>{delete _0x17b1b5['mode'];}),dbConfig[_0xf61457(0x364)](_0xf61457(0x28c))[_0xf61457(0x2be)](..._0x416d2c)[_0xf61457(0x2b3)](),config=_0x416d2c;}function resetPassword(){const _0x28066b=_0x52893d;tgBot&&settings[_0x28066b(0x205)]&&(tgBot[_0x28066b(0x35d)](_0x28066b(0x30d)),tgBot[_0x28066b(0x1f1)](settings[_0x28066b(0x205)],_0x28066b(0x37e),{'parse_mode':_0x28066b(0x243),'reply_markup':{'inline_keyboard':[[{'text':_0x28066b(0x246),'callback_data':_0x28066b(0x246)},{'text':'no','callback_data':'no'}]]}})[_0x28066b(0x291)](_0x38c8aa=>{telegramError(_0x38c8aa);}),tgBot['on'](_0x28066b(0x30d),async _0x49dfea=>{const _0x40bc38=_0x28066b,_0x52a775=_0x49dfea[_0x40bc38(0x28d)],_0x4086e4=_0x49dfea[_0x40bc38(0x346)];tgBot[_0x40bc38(0x315)](_0x49dfea['id'])['then'](async()=>{const _0x5eaabc=_0x40bc38;if(_0x52a775!='no'){const _0xfeeb32=0xf,_0x4c43a1=_0x5eaabc(0x367),_0x27a17b=Array['from'](crypto[_0x5eaabc(0x1fa)](new Uint32Array(_0xfeeb32)))[_0x5eaabc(0x341)](_0x1f885c=>_0x4c43a1[_0x1f885c%_0x4c43a1[_0x5eaabc(0x250)]])[_0x5eaabc(0x26a)](''),_0xcafa23=bcrypt[_0x5eaabc(0x31b)](_0x27a17b,saltRounds);storeSettings({'bbPassword':_0xcafa23}),await tgBot[_0x5eaabc(0x1f1)](_0x4086e4['chat']['id'],_0x5eaabc(0x3aa)+_0x27a17b,{'parse_mode':'HTML'})[_0x5eaabc(0x291)](_0x5d557b=>{telegramError(_0x5d557b);});}else await tgBot[_0x5eaabc(0x1f1)](_0x4086e4['chat']['id'],_0x5eaabc(0x380))['catch'](_0x4a020d=>{telegramError(_0x4a020d);});}),tgBot[_0x40bc38(0x35d)]('callback_query');}));}async function confirmRestore(_0x139967,_0x14246d){const _0x235ef5=_0x52893d;io['to'](_0x235ef5(0x318))['emit'](_0x235ef5(0x332),_0x235ef5(0x2c4),'success'),tgBot&&settings['telegramChatId']&&(tgBot[_0x235ef5(0x35d)](_0x235ef5(0x30d)),await tgBot['sendMessage'](settings['telegramChatId'],_0x235ef5(0x392),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x235ef5(0x246),'callback_data':_0x235ef5(0x246)},{'text':'no','callback_data':'no'}]]}})[_0x235ef5(0x291)](_0x3c0c72=>{telegramError(_0x3c0c72);}),tgBot['on'](_0x235ef5(0x30d),async _0x4bdcc9=>{const _0x51ef0b=_0x235ef5,_0x2f7a45=_0x4bdcc9[_0x51ef0b(0x28d)],_0x22e509=_0x4bdcc9['message'];tgBot[_0x51ef0b(0x315)](_0x4bdcc9['id'])[_0x51ef0b(0x31d)](async()=>{const _0x3b7a21=_0x51ef0b;_0x2f7a45==_0x3b7a21(0x246)?(await tgBot['sendMessage'](_0x22e509[_0x3b7a21(0x22b)]['id'],_0x3b7a21(0x2a1),{'parse_mode':'HTML'})['catch'](_0x380401=>{telegramError(_0x380401);}),unzipFile(_0x139967,_0x14246d)):(logger[_0x3b7a21(0x203)]('Restore\x20process\x20aborted'),await tgBot[_0x3b7a21(0x1f1)](_0x22e509['chat']['id'],_0x3b7a21(0x389))[_0x3b7a21(0x291)](_0x5bb0d5=>{telegramError(_0x5bb0d5);}));}),tgBot[_0x51ef0b(0x35d)](_0x51ef0b(0x30d));}));}function getServerTime(){const _0x519e2d=_0x52893d,_0x484d77=new Date();return _0x484d77[_0x519e2d(0x2c8)]()+'/'+(_0x484d77[_0x519e2d(0x321)]()+0x1)[_0x519e2d(0x1ed)]()[_0x519e2d(0x377)](0x2,'0')+'/'+_0x484d77[_0x519e2d(0x381)]()[_0x519e2d(0x1ed)]()[_0x519e2d(0x377)](0x2,'0')+'\x20'+_0x484d77[_0x519e2d(0x1fc)]()[_0x519e2d(0x1ed)]()[_0x519e2d(0x377)](0x2,'0')+':'+_0x484d77[_0x519e2d(0x2cc)]()[_0x519e2d(0x1ed)]()[_0x519e2d(0x377)](0x2,'0')+':'+_0x484d77[_0x519e2d(0x252)]()['toString']()[_0x519e2d(0x377)](0x2,'0');}function getTimeStamp(){const _0x3f0f3a=_0x52893d,_0x19e3e4=shiftedTime();return _0x19e3e4['getFullYear']()+'/'+(_0x19e3e4[_0x3f0f3a(0x321)]()+0x1)['toString']()[_0x3f0f3a(0x377)](0x2,'0')+'/'+_0x19e3e4[_0x3f0f3a(0x381)]()[_0x3f0f3a(0x1ed)]()[_0x3f0f3a(0x377)](0x2,'0')+'\x20'+_0x19e3e4[_0x3f0f3a(0x1fc)]()['toString']()[_0x3f0f3a(0x377)](0x2,'0')+':'+_0x19e3e4[_0x3f0f3a(0x2cc)]()[_0x3f0f3a(0x1ed)]()[_0x3f0f3a(0x377)](0x2,'0')+':'+_0x19e3e4['getSeconds']()[_0x3f0f3a(0x1ed)]()[_0x3f0f3a(0x377)](0x2,'0');}function getCleanTimeStamp(){const _0x5064a2=_0x52893d,_0x24df8b=shiftedTime();return _0x24df8b[_0x5064a2(0x2c8)]()+(_0x24df8b['getMonth']()+0x1)[_0x5064a2(0x1ed)]()['padStart'](0x2,'0')+_0x24df8b[_0x5064a2(0x381)]()[_0x5064a2(0x1ed)]()['padStart'](0x2,'0')+'-'+_0x24df8b[_0x5064a2(0x1fc)]()[_0x5064a2(0x1ed)]()[_0x5064a2(0x377)](0x2,'0')+_0x24df8b[_0x5064a2(0x2cc)]()[_0x5064a2(0x1ed)]()[_0x5064a2(0x377)](0x2,'0')+_0x24df8b['getSeconds']()[_0x5064a2(0x1ed)]()[_0x5064a2(0x377)](0x2,'0');}function shiftedTime(){const _0x19c21f=_0x52893d,_0xc45bbb=new Date();let _0x23c6b5=_0xc45bbb;if(settings[_0x19c21f(0x2bc)]&&settings['timeshift']!==0x0)_0x23c6b5=fns[_0x19c21f(0x2a4)](_0xc45bbb,{'hours':settings[_0x19c21f(0x2bc)]});return _0x23c6b5;}function startScheduler(){const _0x22a0f8=_0x52893d,_0x39f4f5=new Date()[_0x22a0f8(0x2c1)](),_0x2e0a40=shiftedTime()['getHours']();_0x2e0a40==0x4&&backupConfigFiles();_0x2e0a40==0x0&&rotateLogFiles();_0x39f4f5%0x6==0x0&&triggerAnalytics();_0x39f4f5%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x47582a){const _0x2f91f6=_0x52893d;logger[_0x2f91f6(0x203)](_0x2f91f6(0x23f)+_0x47582a);const _0x454e62=getBotsWithMode();_0x454e62['length']>0x0?confirmRestore(configbackuppath,_0x47582a):unzipFile(configbackuppath,_0x47582a);}async function getBackupFiles(_0x266245=null){const _0x747518=_0x52893d;let _0x35a82a=[],_0x323a1c=fs[_0x747518(0x1f4)](configbackuppath,{'withFileTypes':!![]});_0x323a1c[_0x747518(0x391)]((_0x12b2ec,_0x51ecee)=>_0x12b2ec[_0x747518(0x22a)]<_0x51ecee[_0x747518(0x22a)]?0x1:_0x51ecee[_0x747518(0x22a)]<_0x12b2ec[_0x747518(0x22a)]?-0x1:0x0),_0x323a1c[_0x747518(0x2aa)](_0x5d65a2=>{const _0x31463c=_0x747518;if(!_0x5d65a2[_0x31463c(0x21d)]()&&_0x5d65a2[_0x31463c(0x22a)]['startsWith'](_0x31463c(0x293))&&_0x5d65a2[_0x31463c(0x22a)]['endsWith']('.zip')){const _0x4f743f=formatDate(fs['statSync'](configbackuppath+_0x5d65a2['name'])[_0x31463c(0x327)]);_0x35a82a['push']({'name':_0x5d65a2[_0x31463c(0x22a)],'mtime':_0x4f743f});}});if(_0x266245)io['to'](_0x266245)[_0x747518(0x299)](_0x747518(0x244),_0x35a82a);else return _0x35a82a;}async function backupConfigFiles(){const _0x25d25d=_0x52893d;await zipFiles('backup-full');const _0x11569b=getCleanTimeStamp();fs[_0x25d25d(0x35a)](zippath+'backup-full.zip',configbackuppath+(_0x25d25d(0x293)+_0x11569b+'.zip'));let _0x966aba=fs[_0x25d25d(0x1f4)](configbackuppath,{'withFileTypes':!![]});_0x966aba[_0x25d25d(0x391)]((_0x4cc29a,_0x232616)=>_0x4cc29a[_0x25d25d(0x22a)]<_0x232616[_0x25d25d(0x22a)]?0x1:_0x232616[_0x25d25d(0x22a)]<_0x4cc29a[_0x25d25d(0x22a)]?-0x1:0x0),_0x966aba['length']>maxBackups&&fs[_0x25d25d(0x394)](configbackuppath+_0x966aba[maxBackups][_0x25d25d(0x22a)]);}function _0x7991(){const _0x58901f=['loginRequired','\x20minutes','express-fileupload','No\x20authentication\x20token','showConfig','running','writeFileSync','referer','backup','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','once','Invalid\x20authentication\x20token\x20(2)','disabled','45875uPXvaW','telegramIpApproval','deleteHistoryAlerts','stopPolling','auto','connected','polling_error','username','Unauthorized\x20attempt\x20to\x20get\x20portfolio','login\x20not\x20required','new-disabled','836310QUKUbe','auth','bots','data','simple','Unauthorized\x20attempt\x20to\x20delete\x20bot','/output-000.log','catch','clients','backup-full@','kill','botname','version','ipv6','reason','emit','update-bb','************','\x20|\x20client:\x20...','bb-settings.json','DEFLATE','crypto','log','Restoring\x20bot(s)\x20from\x20backup','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','cancel-loading','add','/help\x20-\x20show\x20available\x20commands\x0a','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Temporary\x20access\x20rejected','allow','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','forEach','headers','sendMetricsTelegram','Logged\x20in\x20user\x20...','userid','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','parse','RSA','2469616pbPFrT','write','full','Notifications\x20disabled\x0a','set','secure','9001848PbTIZn','exp','mkdirSync','uuid-random','timeshift','error','push','index.html','\x20only\x0a','getUTCHours','user','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','sendFile','reload','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','getFullYear','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','test','getMinutes','node-telegram-bot-api','telegramEnabled','telegramUsername','match','host','https://api.ipify.org?format=json','18rqWhwW','showname','login\x20token\x20valid','hex','\x20to\x20','-events.json','disabled\x20Bot\x20','includes','Bot\x20Mgr\x20>\x20','connection','show-config','Unauthorized\x20attempt\x20to\x20show\x20configuration','telegramToken','title','readFileSync','get-logs','2FA\x20login\x20token\x20generated','backup/','toggle-bot-mode','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','-----------------------------------------------------------------------------------','ipc','all','\x20mode','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','orders','tkn','assign','toIPv4MappedAddress','download','encryptedUuid','output-002.log','files','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','storeHeadless','Unauthorized\x20attempt\x20to\x20get\x20events','rmSync','handshake','login\x20required','slice','::ffff:127.0.0.1','Notifications\x20disabled','/:bot/performance','bbUsername','Starting\x20Balance\x20Bot\x20','yargs/yargs','</b>\x20?','timestamp','logged\x20out','stop','disconnect','404\x20Not\x20Found','output-001.log','uuid','alias','axios','settings','callback_query','success','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/:bot','SIGTERM','getTime','filter','backupfile','answerCallbackQuery','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','show','botmanager','exec','statSync','hashSync','Alerts','then','access','max','build','getMonth','createServer','Backup\x20file\x20unzipped\x20and\x20stored','Unauthorized\x20attempt\x20to\x20update\x20bot','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','constructor','mtime','1000','Unauthorized\x20attempt\x20to\x20download\x20','Notifications\x20types:\x20','Invalid\x20authentication\x20token\x20(1)','15\x20min','getPortfolio','/off\x20-\x20stop\x20bot(s)\x0a','value','5\x20min','starting\x20new\x20bot\x20|\x20Bot\x20','notification','temporary\x20access\x20rejected','get-messages','temp/','send','decrypt','Login\x20accepted','expiry','request','idling\x20bot\x20\x20\x20|\x20Bot\x20','hybrid-crypto-js','http','Invalid\x20username\x20or\x20IP\x20address','storeFiat','storeConfiguration','map','479468BnGksw','2FA\x20required','/restart\x20-\x20restart\x20bot(s)\x0a','params','message','search','inherit','/upload-backup','127.0.0.1','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','108GiNHNO','updatebotmanager','11DTZPjW','telegram2FaApproval','\x20>\x20','socket','lastmsgtelegram','All','telegrammsg','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','enabled\x20Bot\x20','reinstall','post','copyFileSync','fork','Notifications\x20enabled\x0a','removeListener','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','headless','alerts','/update\x20-\x20update\x20Balance\x20Bot\x0a','started','accept','get','322287PHtdfZ','Logged\x20out\x20user\x20...','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','blacklist','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','apply','You\x20can\x20use\x20the\x20following\x20commands:\x0a','status','store-headless','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','sendPortfolioTelegram','/:bot/support','/status\x20-\x20show\x20bot(s)\x20status\x0a','Session\x20expired\x20for\x20user\x20...','User\x20has\x20been\x20validated','logs/','graphql-request','output-000.log','padStart','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','All\x20bots','bb-secure.json','delete-alerts','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','pidExpireLogin','Password\x20reset\x20rejected','getDate','Orders','Unauthorized\x20attempt\x20to\x20add\x20bot','exit','\x20(2)','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','invalid\x20credentials','bb-config.json','Restore\x20process\x20aborted','Crypt','stopped','function','login\x20token\x20generated','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','toggleBotMode','sort','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','lastmsgemitted','unlinkSync','min','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20confirm\x20message','RSA-OAEP','createWriteStream','sha256','messages','file','store','backup-full','server','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','File\x20uploaded','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','sign','privateKey','/:bot/portfolio','.zip','/metrics\x20-\x20show\x20bot\x20performance\x0a','botID','Password\x20has\x20been\x20reset\x20to:\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','removeAllListeners','-results.json','logout','<b>Telegram\x20Bot\x20Status:</b>\x0a','bbvNew','jsonwebtoken','Unauthorized\x20attempt\x20to\x20log\x20out','22WedYes','toString','deleted\x20Bot\x20','socket.io','apiKey','sendMessage','f2aRequired','Unauthorized\x20attempt\x20to\x20delete\x20alerts','readdirSync','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','-config.json','mixpanel','***','replace','randomFillSync','secret','getHours','bb/','init','number','order','temporary\x20access\x20timeout','warning','debug','update','telegramChatId','Unauthorized\x20attempt\x20to\x20get\x20messages','type','restore-backup-file','$1_$2_$3','emitHistory','update-bot','zip/','keys','enabled','kind','Access\x20enabled\x20for\x20','verify','telegram','defaults','Backup\x20file\x20uploaded','Ok,\x20will\x20send\x20order\x20notifications\x20only','/enable\x20-\x20enable\x20notifications\x0a','conn','existsSync','Server','format','-performance.json','remove','isDirectory','getStartingBalances','delete-bot','15VjqRDl','util','resetHistory','reject','hasOwnProperty','temporary\x20token\x20generated','use','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','cancelLoading','argv','name','chat','password','login','\x20|\x20','get-portfolio','latestversion','onText','No\x20bots\x20running\x20right\x20now','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','split','temporaryAccessAllowed','restart','Your\x20installation\x20is\x20already\x20up\x20to\x20date','bbPassword','bot','add-bot','new','listen','binary','stringify','Restore\x20backup\x20file\x20','get-starting-balances','Setting\x20access:\x20','Notifications\x20enabled','HTML','backup-files','/download/:type','yes','telegramEvents','cloneDeep','isValid',',\x20must\x20be\x20a\x204\x20digit\x20number','publicKey','All\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20store\x20configuration','reinstall-bb','manual','length','pidRefreshToken','getSeconds','entries','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Invalid\x20Telegram\x20token','from','remoteAddress','find','sortBy','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','initclient','Login\x20rejected','clientip','Yes','live','0.0.0','Bot\x20','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','any','Token\x20blacklisted','place-order','reset-history','207939RBGYwh','confirm-message','access\x20timeout','join','bot-',':\x20Bot\x20Mgr\x20>\x20','settings.',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','token','error\x20while\x20deleting\x20config\x20files:\x20','mode'];_0x7991=function(){return _0x58901f;};return _0x7991();}function rotateLogFiles(){const _0x176391=_0x52893d,_0x27f395=fs[_0x176391(0x31a)](logspath+_0x176391(0x376)),_0x2d570a=_0x27f395['size']/0x400;if(_0x2d570a>0x32){let _0x3f23cb=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x3f23cb[_0x176391(0x391)]((_0x477c92,_0x1bc988)=>_0x477c92[_0x176391(0x22a)]<_0x1bc988[_0x176391(0x22a)]?0x1:_0x1bc988[_0x176391(0x22a)]<_0x477c92['name']?-0x1:0x0),_0x3f23cb[_0x176391(0x2aa)](_0x3afd31=>{const _0x229cf2=_0x176391;if(_0x3afd31[_0x229cf2(0x22a)]=='output-002.log')fs['copyFileSync'](logspath+_0x3afd31[_0x229cf2(0x22a)],logspath+'output-003.log');if(_0x3afd31[_0x229cf2(0x22a)]==_0x229cf2(0x308))fs[_0x229cf2(0x35a)](logspath+_0x3afd31['name'],logspath+_0x229cf2(0x2f3));_0x3afd31[_0x229cf2(0x22a)]==_0x229cf2(0x376)&&(fs['copyFileSync'](logspath+_0x3afd31[_0x229cf2(0x22a)],logspath+'output-001.log'),fs[_0x229cf2(0x278)](logspath+_0x3afd31[_0x229cf2(0x22a)],''));});}}async function zipFiles(_0x23583f){const _0x463571=_0x52893d;let _0x2767cc;if(_0x23583f=='logs')_0x2767cc=logspath;if(_0x23583f==_0x463571(0x27a))_0x2767cc=configpath;if(_0x23583f==_0x463571(0x39e))_0x2767cc=configpath;let _0x4e309a=fs[_0x463571(0x1f4)](_0x2767cc,{'withFileTypes':!![]});const _0xfbfd18=new require('node-zip')();_0x4e309a['forEach'](_0x3b7978=>{const _0x2f606c=_0x463571;if(!_0x3b7978[_0x2f606c(0x21d)]()){let _0x1f699b=fs[_0x2f606c(0x2e1)](_0x2767cc+_0x3b7978[_0x2f606c(0x22a)]);if(_0x23583f==_0x2f606c(0x27a)){const _0xb6d02f=/^bot-[0-9]{3}-config.json$/,_0x2e9f03=_0xb6d02f[_0x2f606c(0x2cb)](_0x3b7978[_0x2f606c(0x22a)]);if(_0x2e9f03){const _0x49b618=JSON[_0x2f606c(0x2b0)](_0x1f699b);_0x49b618['bot'][0x0]&&(_0x49b618['bot'][0x0][_0x2f606c(0x1f0)]='***',_0x49b618[_0x2f606c(0x239)][0x0]['apiSecret']=_0x2f606c(0x1f8)),_0x1f699b=JSON[_0x2f606c(0x23e)](_0x49b618,null,0x2);}if(_0x3b7978[_0x2f606c(0x22a)]==_0x2f606c(0x29d)){const _0x31c0a0=JSON[_0x2f606c(0x2b0)](_0x1f699b);if(_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x272)])_0x31c0a0['settings'][_0x2f606c(0x272)]=![];if(_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x238)])_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x238)]=_0x2f606c(0x1f8);if(_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x2df)])_0x31c0a0['settings'][_0x2f606c(0x2df)]=_0x2f606c(0x1f8);if(_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x205)])_0x31c0a0[_0x2f606c(0x30c)][_0x2f606c(0x205)]=null;_0x1f699b=JSON[_0x2f606c(0x23e)](_0x31c0a0,null,0x2);}if(_0x3b7978[_0x2f606c(0x22a)]!=_0x2f606c(0x37c))_0xfbfd18[_0x2f606c(0x39c)](_0x3b7978[_0x2f606c(0x22a)],_0x1f699b);}else _0xfbfd18[_0x2f606c(0x39c)](_0x3b7978[_0x2f606c(0x22a)],_0x1f699b);}});const _0x443311=_0xfbfd18['generate']({'base64':![],'compression':_0x463571(0x29e)});fs[_0x463571(0x278)](zippath+(_0x23583f+'.zip'),_0x443311,_0x463571(0x23d));}async function unzipFile(_0x4a581e,_0x707553){const _0x20aa8f=_0x52893d;fs[_0x20aa8f(0x1f4)](configpath,{'withFileTypes':!![]})[_0x20aa8f(0x2aa)](_0x3738c0=>{const _0x41babc=_0x20aa8f;if(!_0x3738c0['isDirectory']())fs[_0x41babc(0x2f8)](configpath+_0x3738c0['name']);});const _0x5f2292=fs[_0x20aa8f(0x2e1)](_0x4a581e+_0x707553,_0x20aa8f(0x23d)),_0x4dc400=new require('node-zip')(_0x5f2292,{'base64':![],'checkCRC32':!![]});Object[_0x20aa8f(0x20d)](_0x4dc400['files'])[_0x20aa8f(0x2aa)](_0x2f6b7e=>{const _0x359d1c=_0x20aa8f,_0x4df5e6=_0x4dc400[_0x359d1c(0x2f4)][_0x2f6b7e];fs[_0x359d1c(0x278)](configpath+_0x4df5e6[_0x359d1c(0x22a)],_0x4df5e6['_data']);}),fs[_0x20aa8f(0x1f4)](temppath,{'withFileTypes':!![]})[_0x20aa8f(0x2aa)](_0x2bf8d4=>{const _0x4f93f3=_0x20aa8f;if(!_0x2bf8d4[_0x4f93f3(0x21d)]())fs[_0x4f93f3(0x2f8)](temppath+_0x2bf8d4['name']);}),logger[_0x20aa8f(0x203)](_0x20aa8f(0x323)),process[_0x20aa8f(0x336)]({'restore':!![]},_0x3c7dbc=>{});}async function getPublicIp(){const _0x41543a=_0x52893d;try{const _0x221e09=await axios[_0x41543a(0x364)](_0x41543a(0x2d2));publicip=_0x221e09[_0x41543a(0x28d)]['ip'];}catch(_0xa0c5e4){}}async function triggerAnalytics(){const _0x241e06=_0x52893d;if(!publicip)await getPublicIp();const _0x30d06e=getBotsWithMode();let _0xdcfa2a=0x0;_0x30d06e[_0x241e06(0x2aa)](_0x206ff2=>{if(_0x206ff2['status']==='enabled')_0xdcfa2a++;});const _0x28fbd4=getBotExchanges();mixpanel['track'](_0x241e06(0x219),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x30d06e[_0x241e06(0x250)],'numbotsenabled':_0xdcfa2a,'exchanges':_0x28fbd4});}async function getMessages(){const _0x57e003=_0x52893d,_0x1c2bdc=_0x57e003(0x2a2),_0x5a3258=new GraphQLClient(_0x1c2bdc),_0xefe29e={'authorization':_0x57e003(0x2f5)},_0x371f3f=serverversion[_0x57e003(0x234)]('.'),_0x44e258=_0x371f3f[0x0]+'.'+_0x371f3f[0x1],_0x16e664=Math[_0x57e003(0x395)](settings[_0x57e003(0x352)],settings['lastmsgemitted']),_0x7dea9={'last':parseInt(_0x16e664),'bbm':_0x44e258},_0x245cd3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x306183;try{_0x306183=await _0x5a3258[_0x57e003(0x33a)](_0x245cd3,_0x7dea9,_0xefe29e);}catch(_0x1f96a1){}if(_0x306183&&_0x306183[_0x57e003(0x39b)]){let _0xe34369=settings[_0x57e003(0x352)];newMessages=[];for(const _0x3dd9f2 of _0x306183[_0x57e003(0x39b)]){newMessages[_0x57e003(0x2be)](_0x3dd9f2);if(_0x3dd9f2[_0x57e003(0x3b0)])updateSetting(_0x57e003(0x230),_0x3dd9f2[_0x57e003(0x3b0)]);let _0x14d3c5=_0x3dd9f2['bbvNew']?serverversion>=_0x3dd9f2[_0x57e003(0x3b0)]:![];if(!_0x14d3c5&&_0x3dd9f2[_0x57e003(0x1ff)]>_0xe34369){if(_0x3dd9f2['bbvReceive']===_0x57e003(0x263)||serverversion['startsWith'](_0x3dd9f2['bbvReceive'])){let _0x102111=''+_0x3dd9f2[_0x57e003(0x2e0)]+'\x0a\x0a'+_0x3dd9f2[_0x57e003(0x346)];const _0x1d8216=await sendTelegramMsg(toTelegramMarkdown(_0x102111),'Markdown');if(_0x1d8216)_0xe34369=_0x3dd9f2[_0x57e003(0x1ff)];}}}updateAvailable=isNewerVersion(settings[_0x57e003(0x230)],serverversion),updateSetting('lastmsgtelegram',_0xe34369),emitMessages();}}function emitMessages(){const _0x2a0164=_0x52893d,_0x4d7c8d=settings[_0x2a0164(0x393)];let _0x166a5d=[];newMessages[_0x2a0164(0x2aa)](_0x2baa16=>{const _0x4cc791=_0x2a0164;_0x2baa16[_0x4cc791(0x1ff)]>_0x4d7c8d&&_0x166a5d[_0x4cc791(0x2be)](_0x2baa16);}),_0x166a5d[_0x2a0164(0x250)]>0x0&&getAllClients()[_0x2a0164(0x2aa)](_0x1f0f6f=>{const _0x553a52=_0x2a0164;getSocket(_0x1f0f6f['id'])[_0x553a52(0x299)](_0x553a52(0x346),_0x166a5d);});}function confirmMessage(_0x5db9b0){const _0x554bcc=_0x52893d;updateSetting(_0x554bcc(0x393),Number(_0x5db9b0));}function isNewerVersion(_0x302960,_0x16a48d){const _0x548fec=_0x52893d,_0x2e6849=_0x16a48d[_0x548fec(0x234)]('.'),_0x358e9e=_0x302960[_0x548fec(0x234)]('.');for(var _0x2c7b25=0x0;_0x2c7b25<_0x358e9e['length'];_0x2c7b25++){const _0x2ac4e6=~~_0x358e9e[_0x2c7b25],_0x2a75d1=~~_0x2e6849[_0x2c7b25];if(_0x2ac4e6>_0x2a75d1)return!![];if(_0x2ac4e6<_0x2a75d1)return![];}return![];}function toTelegramMarkdown(_0x47c47d){const _0x3ee410=_0x52893d,_0x566f11=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x41c7d9=/\*{2}(.+?)\*{2}/gim;return _0x47c47d=_0x47c47d[_0x3ee410(0x1f9)](_0x566f11,_0x3ee410(0x209))[_0x3ee410(0x1f9)](_0x41c7d9,'*$1*'),_0x47c47d;}async function validateConfigFile(){const _0x201f9c=_0x52893d,_0x4d3d87=dbConfig[_0x201f9c(0x364)](_0x201f9c(0x28c))[_0x201f9c(0x259)](_0x201f9c(0x3a9))[_0x201f9c(0x32f)]()||[];if(_0x4d3d87[_0x201f9c(0x250)]==0x0){let _0x43f006=0x0,_0x8e6fd4=[];const _0x3a0c64=/^bot-([0-9]{3})-config.json$/,_0x52d621=fs['readdirSync'](configpath);_0x52d621['forEach'](_0x1f76e4=>{const _0xfab2df=_0x201f9c,_0x4533e7=_0x3a0c64[_0xfab2df(0x319)](_0x1f76e4);if(_0x4533e7){const _0x2139c5=_0x4533e7[0x1];let _0x3c6eba=getBotAttributes(_0x2139c5);_0x8e6fd4['push']({'botID':_0x2139c5,'botname':_0x3c6eba[_0xfab2df(0x295)],'status':_0xfab2df(0x27e),'live':_0xfab2df(0x38b)}),_0x43f006++;}}),_0x43f006!=0x0&&(dbConfig['get'](_0x201f9c(0x28c))['assign'](_0x8e6fd4)['write'](),config=_0x8e6fd4,restoredConfigFile=_0x43f006);}}async function restoreConfigNotify(_0x434ee5){const _0x321023=_0x52893d;let _0x4e8acc;if(restoredConfigFile==0x1)_0x4e8acc='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x4e8acc=_0x321023(0x2a6);if(_0x434ee5)io['to']('botmanager')[_0x321023(0x299)](_0x321023(0x332),_0x4e8acc);else{logger[_0x321023(0x28e)](_0x321023(0x2e7)),logger[_0x321023(0x28e)](_0x4e8acc),logger['simple'](_0x321023(0x2e7)),logger[_0x321023(0x28e)]('');if(tgBot&&settings[_0x321023(0x205)]&&settings[_0x321023(0x247)]!=_0x321023(0x2ed))tgBot['sendMessage'](settings['telegramChatId'],_0x321023(0x2db)+_0x4e8acc)[_0x321023(0x291)](_0x55f490=>{telegramError(_0x55f490);});}}function validateCredentials(_0x2f4073,_0x211325){const _0x34aa2a=_0x52893d;if(_0x2f4073['username']==settings[_0x34aa2a(0x2ff)]&&bcrypt['compareSync'](_0x2f4073[_0x34aa2a(0x22c)],settings['bbPassword'])){if(settings[_0x34aa2a(0x1f2)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x42d6e0=generateLoginToken(_0x211325);return{'allow':!![],'reason':_0x34aa2a(0x38d),'token':_0x42d6e0};}}else return{'allow':![],'reason':_0x34aa2a(0x387),'token':null};}function refreshToken(_0x3007c5){const _0x199fa0=_0x52893d,_0x106ad4=generateLoginToken(_0x3007c5);return{'allow':!![],'reason':_0x199fa0(0x38d),'token':_0x106ad4};}function validateAccess(_0x2f4952,_0x2e4e7c,_0x4e9da2){const _0x46314a=_0x52893d,_0x38d6c6=_0x4e9da2?_0x4e9da2:devices[_0x2e4e7c]['ip'];let _0x45dce6;const _0x205443=_0x25441a=>{const _0x2a9f32=_0xedac;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2e4e7c)){const _0x1f92ff=generateLoginToken(_0x2e4e7c);return{'allow':!![],'reason':_0x2a9f32(0x2e3),'token':_0x1f92ff};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x45dce6=validToken(_0x25441a,_0x2e4e7c),_0x45dce6['hasOwnProperty'](_0x2a9f32(0x30e))?{'allow':!![],'reason':_0x2a9f32(0x2d5),'token':_0x25441a}:{'allow':![],'reason':_0x2a9f32(0x2fa),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x2e88dd=[...settings['whitelist'],'::1',_0x46314a(0x2fc),_0x46314a(0x34a)];if(_0x2e88dd['includes'](_0x38d6c6))return _0x205443(_0x2f4952);else{_0x45dce6=validToken(_0x2f4952,_0x2e4e7c);if(_0x45dce6[_0x46314a(0x224)](_0x46314a(0x30e)))return _0x205443(_0x2f4952);else{if(telegramIpApproved(_0x2e4e7c)){const _0x25ba82=generateToken(_0x2e4e7c);return _0x45dce6=_0x205443(_0x2f4952),_0x45dce6['allow']?{'allow':!![],'reason':_0x46314a(0x225),'token':_0x25ba82}:_0x45dce6;}else return settings[_0x46314a(0x235)]?{'allow':![],'reason':_0x46314a(0x343),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x205443(_0x2f4952);}function timelyDecrypt(_0x2a68c3,_0x29a24d=!![]){const _0x370806=_0x52893d;if(_0x2a68c3)try{const _0x26a8cf=crypt[_0x370806(0x337)](secure[_0x370806(0x3a5)],_0x2a68c3)[_0x370806(0x346)],_0x21075c=_0x26a8cf[_0x370806(0x234)]('@')[0x0],_0x2a1473=_0x26a8cf[_0x370806(0x234)]('@')[0x1],_0x5c70d8=new Date()[_0x370806(0x312)]();if(_0x29a24d){if(_0x5c70d8-_0x2a1473<maxSecretAge*0x3e8)return _0x21075c;else return![];}else return _0x21075c;}catch(_0x12da67){return![];}else return![];}const validToken=(_0x290237,_0x14f550)=>{const _0x543f0a=_0x52893d,_0x48da03=devices[_0x14f550]['ip'];if(!_0x290237)return{'error':_0x543f0a(0x275)};for(let _0x30fb9f of blacklist){if(_0x30fb9f['token']==_0x290237)return{'error':_0x543f0a(0x264)};}let _0x2a3a2f;try{_0x2a3a2f=jwt[_0x543f0a(0x211)](_0x290237,secure[_0x543f0a(0x1fb)]+_0x14f550);}catch{return{'error':_0x543f0a(0x32b)};}if(!_0x2a3a2f[_0x543f0a(0x224)](_0x543f0a(0x25d))&&!_0x2a3a2f['hasOwnProperty']('username')||!_0x2a3a2f['hasOwnProperty'](_0x543f0a(0x2b9)))return{'error':_0x543f0a(0x27d)};if(!_0x2a3a2f[_0x543f0a(0x224)](_0x543f0a(0x286))&&_0x2a3a2f[_0x543f0a(0x224)]('clientip')){const {clientip:_0x101e9b}=_0x2a3a2f;return _0x48da03==_0x101e9b?{'success':_0x543f0a(0x373)}:{'error':_0x543f0a(0x396)};}else{if(_0x2a3a2f['hasOwnProperty']('username')&&_0x2a3a2f[_0x543f0a(0x224)]('clientip')){const {username:_0xea2438,clientip:_0x5a839a}=_0x2a3a2f;return settings[_0x543f0a(0x2ff)]==_0xea2438&&_0x48da03==_0x5a839a?{'success':_0x543f0a(0x373)}:{'error':_0x543f0a(0x33e)};}}},generateLoginToken=_0x1aa35d=>{const _0xf9305c=_0x52893d;if(_0x1aa35d){const _0x32593b=devices[_0x1aa35d]['ip'];return jwt[_0xf9305c(0x3a4)]({'username':settings[_0xf9305c(0x2ff)],'clientip':_0x32593b},secure[_0xf9305c(0x1fb)]+_0x1aa35d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2fcd28=>{const _0x1ad150=_0x52893d;if(_0x2fcd28){const _0x35bbb1=devices[_0x2fcd28]['ip'];return jwt['sign']({'clientip':_0x35bbb1},secure[_0x1ad150(0x1fb)]+_0x2fcd28,{'expiresIn':devices[_0x2fcd28][_0x1ad150(0x280)][_0x1ad150(0x339)]*0x3c});}else return![];},telegramIpApproved=_0x4bafe8=>{const _0x244654=_0x52893d;let _0x4836ff=![];return devices[_0x4bafe8][_0x244654(0x280)]&&devices[_0x4bafe8][_0x244654(0x280)][_0x244654(0x339)]!='reject'&&(_0x4836ff=devices[_0x4bafe8][_0x244654(0x280)]['clientip']==devices[_0x4bafe8]['ip']&&new Date()[_0x244654(0x312)]()-devices[_0x4bafe8][_0x244654(0x280)]['timestamp']<devices[_0x4bafe8]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x4836ff;},telegram2FaApproved=_0xf6c8f4=>{const _0x6d10e9=_0x52893d;let _0x3fa3c5=![];return devices[_0xf6c8f4][_0x6d10e9(0x34f)]&&devices[_0xf6c8f4]['telegram2FaApproval'][_0x6d10e9(0x339)]!=_0x6d10e9(0x223)&&(_0x3fa3c5=devices[_0xf6c8f4]['telegram2FaApproval']['clientip']==devices[_0xf6c8f4]['ip']&&new Date()[_0x6d10e9(0x312)]()-devices[_0xf6c8f4][_0x6d10e9(0x34f)][_0x6d10e9(0x303)]<devices[_0xf6c8f4][_0x6d10e9(0x34f)][_0x6d10e9(0x339)]*0x3c*0x3e8),_0x3fa3c5;},normalizeIP=_0x30a508=>{const _0xc3dd13=_0x52893d;let _0x5171c1=null,_0x12e472=null;if(ipaddr[_0xc3dd13(0x249)](_0x30a508)){const _0x23d151=ipaddr[_0xc3dd13(0x2b0)](_0x30a508);_0x23d151[_0xc3dd13(0x20f)]()===_0xc3dd13(0x297)?(_0x23d151['isIPv4MappedAddress']()&&(_0x5171c1=_0x23d151['toIPv4Address']()['toString']()),_0x12e472=_0x23d151[_0xc3dd13(0x1ed)]()):(_0x5171c1=_0x23d151[_0xc3dd13(0x1ed)](),_0x12e472=_0x23d151[_0xc3dd13(0x2f0)]()['toString']());}return{'show':_0x5171c1?_0x5171c1:_0x12e472,'store':_0x12e472};};function formatDate(_0x5a66b9){const _0x2f1792=_0x52893d;return _0x5a66b9[_0x2f1792(0x2c8)]()+'/'+(_0x5a66b9[_0x2f1792(0x321)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5a66b9[_0x2f1792(0x381)]()[_0x2f1792(0x1ed)]()[_0x2f1792(0x377)](0x2,'0')+'\x20'+_0x5a66b9[_0x2f1792(0x1fc)]()[_0x2f1792(0x1ed)]()['padStart'](0x2,'0')+':'+_0x5a66b9[_0x2f1792(0x2cc)]()['toString']()[_0x2f1792(0x377)](0x2,'0')+':'+_0x5a66b9[_0x2f1792(0x252)]()['toString']()[_0x2f1792(0x377)](0x2,'0');}function sleep(_0x3daece){return new Promise(_0x63d164=>setTimeout(_0x63d164,_0x3daece));}