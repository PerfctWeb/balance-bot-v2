const _0x2fc8d8=_0x1749;function _0x1749(_0x22443e,_0x5e1a76){const _0x22d9e0=_0x1fa5();return _0x1749=function(_0x3deab1,_0x42f444){_0x3deab1=_0x3deab1-0xe3;let _0x1fa54a=_0x22d9e0[_0x3deab1];return _0x1fa54a;},_0x1749(_0x22443e,_0x5e1a76);}(function(_0x5e3567,_0xc51414){const _0xc430a7=_0x1749,_0x5c5e74=_0x5e3567();while(!![]){try{const _0x36ee1b=-parseInt(_0xc430a7(0x22d))/0x1+-parseInt(_0xc430a7(0x13b))/0x2+-parseInt(_0xc430a7(0x1a6))/0x3*(parseInt(_0xc430a7(0x1f4))/0x4)+-parseInt(_0xc430a7(0x2a3))/0x5*(-parseInt(_0xc430a7(0x10b))/0x6)+parseInt(_0xc430a7(0x2f2))/0x7+parseInt(_0xc430a7(0x20e))/0x8+parseInt(_0xc430a7(0x10c))/0x9*(parseInt(_0xc430a7(0x23f))/0xa);if(_0x36ee1b===_0xc51414)break;else _0x5c5e74['push'](_0x5c5e74['shift']());}catch(_0x445055){_0x5c5e74['push'](_0x5c5e74['shift']());}}}(_0x1fa5,0xcee38));const _0x42f444=function(){let _0x212d66=!![];return function(_0x18eb4b,_0x4043f9){const _0x74652f=_0x212d66?function(){const _0xc4375f=_0x1749;if(_0x4043f9){const _0x49d185=_0x4043f9[_0xc4375f(0x166)](_0x18eb4b,arguments);return _0x4043f9=null,_0x49d185;}}:function(){};return _0x212d66=![],_0x74652f;};}(),_0x3deab1=_0x42f444(this,function(){const _0x1d9c35=_0x1749;return _0x3deab1[_0x1d9c35(0x283)]()['search'](_0x1d9c35(0x206))['toString']()[_0x1d9c35(0x2b6)](_0x3deab1)['search'](_0x1d9c35(0x206));});_0x3deab1();'use strict';process[_0x2fc8d8(0x2c5)]['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x2fc8d8(0x150)),low=require(_0x2fc8d8(0x14b)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x2fc8d8(0x165)),crypto=require(_0x2fc8d8(0x2d0)),Crypt=require('hybrid-crypto-js')[_0x2fc8d8(0x24b)],RSA=require(_0x2fc8d8(0x2a2))[_0x2fc8d8(0x1ab)],bcrypt=require(_0x2fc8d8(0xea)),jwt=require(_0x2fc8d8(0x260)),ipaddr=require(_0x2fc8d8(0x140)),argv=require(_0x2fc8d8(0x1db))(process['argv'][_0x2fc8d8(0x1c2)](0x2))[_0x2fc8d8(0x27d)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x2fc8d8(0x282)),Mixpanel=require(_0x2fc8d8(0x263)),axios=require(_0x2fc8d8(0x11a)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x2fc8d8(0x114)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv['port']||_0x2fc8d8(0x1a9),pattern=/^[0-9]{2,4}$/;!pattern[_0x2fc8d8(0x21a)](PORT)&&(console[_0x2fc8d8(0x2b7)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x2fc8d8(0xed)),process[_0x2fc8d8(0x122)](0x1));const HOST=argv[_0x2fc8d8(0x19f)]||null,userID=argv[_0x2fc8d8(0xf0)]||'',debugging=argv['d']||![],nodeversion=process[_0x2fc8d8(0x2b3)][_0x2fc8d8(0x259)];let bbpath=_0x2fc8d8(0x1a5),bbpath2='';const botfile=_0x2fc8d8(0x20f),configfile=_0x2fc8d8(0x251),settingsfile=_0x2fc8d8(0x226),securefile=_0x2fc8d8(0x176),environment=require('./'+bbpath2+_0x2fc8d8(0x110))[_0x2fc8d8(0x276)]||_0x2fc8d8(0x2ac),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x2fc8d8(0x238)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x2fc8d8(0x1b2),configbackuppath=configpath+_0x2fc8d8(0x2e3),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x2fc8d8(0x277),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x2fc8d8(0x1f2),loggerfile=fs[_0x2fc8d8(0x17a)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x2fc8d8(0xeb)+userID+'/':bbpath+'temp/';!fs[_0x2fc8d8(0x238)](configpath)&&fs[_0x2fc8d8(0x26f)](configpath);!fs[_0x2fc8d8(0x238)](configbackuppath)&&fs[_0x2fc8d8(0x26f)](configbackuppath);!fs[_0x2fc8d8(0x238)](logspath)&&fs[_0x2fc8d8(0x26f)](logspath);!fs['existsSync'](zippath)&&fs[_0x2fc8d8(0x26f)](zippath);!fs[_0x2fc8d8(0x238)](temppath)&&fs[_0x2fc8d8(0x26f)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2fc8d8(0x19a)]({'bots':[]})[_0x2fc8d8(0x180)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2fc8d8(0x19a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x2fc8d8(0x180)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x2fc8d8(0x180)]();let crypt=new Crypt({'md':_0x2fc8d8(0x270),'rsaStandard':_0x2fc8d8(0x2bf)});const saltRounds=0xa,mixpanel=Mixpanel[_0x2fc8d8(0x198)](_0x2fc8d8(0x1da),{'host':_0x2fc8d8(0x29d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2fc8d8(0x19b)]&&(settings[_0x2fc8d8(0x19b)]!=''&&settings['telegramToken']!=_0x2fc8d8(0x1c0))&&settings['telegramUsername']&&settings[_0x2fc8d8(0x27f)]!='')initTelegram();const parseColor=(_0x5d39ca,_0x1513a7)=>{const _0x40438b=_0x2fc8d8,_0x21f686=/#[A-Z]{3}#/g;if(typeof _0x5d39ca==_0x40438b(0x2da)){!_0x1513a7?_0x5d39ca=_0x5d39ca[_0x40438b(0x2d9)](_0x21f686,''):(_0x5d39ca=_0x5d39ca[_0x40438b(0x2d9)](/#BLU#/g,'\x1b[34m'),_0x5d39ca=_0x5d39ca['replace'](/#RED#/g,_0x40438b(0x17e)),_0x5d39ca=_0x5d39ca[_0x40438b(0x2d9)](/#YEL#/g,_0x40438b(0x25a)),_0x5d39ca=_0x5d39ca['replace'](/#MAG#/g,_0x40438b(0x261)),_0x5d39ca=_0x5d39ca['replace'](/#CYA#/g,_0x40438b(0x279)),_0x5d39ca=_0x5d39ca[_0x40438b(0x2d9)](/#RES#/g,_0x40438b(0x130)));;}return _0x5d39ca;},logger={'screen':_0x51a7c2=>{console['log'](parseColor(_0x51a7c2,!![]));},'simple':_0x513214=>{const _0x54d9c5=_0x2fc8d8;console[_0x54d9c5(0x2b7)](parseColor(_0x513214,!![])),loggerfile[_0x54d9c5(0x180)](util[_0x54d9c5(0x195)](parseColor(_0x513214,![]))+'\x0a');},'full':async _0x2a898d=>{const _0xa4fd9e=_0x2fc8d8,_0x97eeb7=getTimeStamp()+_0xa4fd9e(0x2ed)+_0x2a898d;console['log'](parseColor(_0x97eeb7,!![])),loggerfile[_0xa4fd9e(0x180)](util[_0xa4fd9e(0x195)](parseColor(_0x97eeb7,![]))+'\x0a');if(tgBot&&settings[_0xa4fd9e(0x1b6)]&&settings[_0xa4fd9e(0x106)]!=_0xa4fd9e(0x1cf))await sendTelegram(settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+parseColor(_0x2a898d,![]));},'debug':async(_0x31f282,_0xe2da3e='')=>{const _0x288915=_0x2fc8d8,_0x44dac3=getTimeStamp()+_0x288915(0x290)+_0x31f282;if(debugging)console[_0x288915(0x2b7)](parseColor(_0x44dac3,!![]));loggerfile['write'](util['format'](parseColor(_0x44dac3,![]))+'\x0a');if(_0xe2da3e){if(debugging)console[_0x288915(0x2b7)](_0xe2da3e);loggerfile['write'](util[_0x288915(0x195)](_0xe2da3e)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x43d148){const _0x1ba9f9=_0x2fc8d8;_0x43d148['toString']()[_0x1ba9f9(0x227)]('address\x20already\x20in\x20use')?(logger[_0x1ba9f9(0x116)](_0x1ba9f9(0x173)+_0x43d148[_0x1ba9f9(0x20a)]+_0x1ba9f9(0x28d)),process[_0x1ba9f9(0xe8)]({'terminate':!![]},_0x2ba51f=>{})):logger[_0x1ba9f9(0x116)](_0x43d148);}),process['on'](_0x2fc8d8(0x122),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x2fc8d8(0x12f),()=>{const _0x205fab=_0x2fc8d8;stopAllBots(),process[_0x205fab(0x122)](0x0);}),process['on'](_0x2fc8d8(0x1fc),()=>{const _0x2cbdfe=_0x2fc8d8;stopAllBots(),process[_0x2cbdfe(0x122)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2fc8d8(0x110))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2fc8d8(0x104)),app=express(),http=require(_0x2fc8d8(0x1f1))['createServer'](app);app[_0x2fc8d8(0x1fb)](fileUpload({'useTempFiles':!![]})),app[_0x2fc8d8(0x2e7)]('/download/:type',async(_0x185c79,_0x4d078b)=>{const _0x33fc8c=_0x2fc8d8,_0xd0efe4=_0x185c79[_0x33fc8c(0x1f6)][_0x33fc8c(0x2e8)],_0x34adf1=getClientsWithBotID(_0x33fc8c(0x185)),_0xdd4397=_0x185c79[_0x33fc8c(0x27c)][_0x33fc8c(0x2ad)],_0x2b401e=timelyDecrypt(_0xdd4397,![]),_0x20cb65=_0x34adf1['find'](_0x391a54=>_0x391a54[_0x33fc8c(0x2ad)]==_0x2b401e);if(_0x20cb65){const _0x2be021=normalizeIP(_0x185c79[_0x33fc8c(0x14e)][_0x33fc8c(0x2e4)])[_0x33fc8c(0x1e5)],_0x2075f0=_0x185c79['headers'][_0x33fc8c(0x1ba)];if(validateAccess(_0x2075f0,_0x2b401e,_0x2be021)['allow'])_0xd0efe4=='backup'&&await backupConfigFiles(),await zipFiles(_0xd0efe4),_0x4d078b['download'](zippath+(_0xd0efe4+'.zip'),_0x3e3ee4=>{const _0x47bff3=_0x33fc8c;_0x3e3ee4&&(logger[_0x47bff3(0x2fe)]('Failed\x20to\x20download\x20'+_0xd0efe4),logger[_0x47bff3(0x116)](_0x3e3ee4));});else logger[_0x33fc8c(0x2fe)](_0x33fc8c(0x1a8)+_0xd0efe4+_0x33fc8c(0x186));}else logger[_0x33fc8c(0x2fe)](_0x33fc8c(0x1a8)+_0xd0efe4+_0x33fc8c(0x28a));}),app[_0x2fc8d8(0x19d)](_0x2fc8d8(0xf8),async(_0x10147c,_0x3cb349)=>{const _0x2aef7e=_0x2fc8d8,_0x5b5f10=getClientsWithBotID(_0x2aef7e(0x185)),_0x2ee7d8=_0x10147c[_0x2aef7e(0x27c)][_0x2aef7e(0x2ad)],_0x20af28=timelyDecrypt(_0x2ee7d8,![]),_0x1f6e70=_0x5b5f10[_0x2aef7e(0x220)](_0x1378d3=>_0x1378d3[_0x2aef7e(0x2ad)]==_0x20af28);logger[_0x2aef7e(0x288)]('Backup\x20file\x20uploaded');if(_0x1f6e70){const _0x2340a2=normalizeIP(_0x10147c[_0x2aef7e(0x14e)][_0x2aef7e(0x2e4)])[_0x2aef7e(0x1e5)],_0x185a50=_0x10147c[_0x2aef7e(0x27c)][_0x2aef7e(0x1ba)];if(validateAccess(_0x185a50,_0x20af28,_0x2340a2)[_0x2aef7e(0x23a)]){if(_0x10147c[_0x2aef7e(0x2dc)]){const _0x23ec15=_0x10147c[_0x2aef7e(0x2dc)]['backupfile'];await _0x23ec15['mv'](temppath+_0x23ec15[_0x2aef7e(0x2a6)]),_0x3cb349['send']({'status':!![],'message':_0x2aef7e(0xf6)});const _0x34c616=getBotsWithMode();_0x34c616[_0x2aef7e(0x20c)]>0x0?confirmRestore(temppath,_0x23ec15[_0x2aef7e(0x2a6)]):unzipFile(temppath,_0x23ec15[_0x2aef7e(0x2a6)]);}}else logger[_0x2aef7e(0x2fe)](_0x2aef7e(0x10f));}else logger['full'](_0x2aef7e(0x145));}),app[_0x2fc8d8(0x1fb)](express[_0x2fc8d8(0x192)](path['join'](__dirname,bbpath2,_0x2fc8d8(0x1c5)))),app[_0x2fc8d8(0x1fb)](express[_0x2fc8d8(0x192)](path[_0x2fc8d8(0x13c)](__dirname,bbpath2,_0x2fc8d8(0x298)))),app['get']('/',function(_0xc98f4b,_0xa7b2d5){const _0x3162d0=_0x2fc8d8;_0xa7b2d5[_0x3162d0(0x272)](path[_0x3162d0(0x13c)](__dirname,bbpath2,_0x3162d0(0x1c5),_0x3162d0(0x101)));}),app['get'](_0x2fc8d8(0x29b),function(_0x4ffbbd,_0x5160cb){const _0x2d97ae=_0x2fc8d8;_0x5160cb[_0x2d97ae(0x272)](path[_0x2d97ae(0x13c)](__dirname,bbpath2,_0x2d97ae(0x298),_0x2d97ae(0x101)));}),app['get']('/:bot/portfolio',(_0x1c1fab,_0x40f3bb)=>{const _0x47cd09=_0x2fc8d8;_0x40f3bb[_0x47cd09(0x272)](path['join'](__dirname,bbpath2,'build',_0x47cd09(0x101)));}),app[_0x2fc8d8(0x2e7)]('/:bot/performance',(_0x1637a6,_0x1fd595)=>{const _0x3e1d77=_0x2fc8d8;_0x1fd595[_0x3e1d77(0x272)](path[_0x3e1d77(0x13c)](__dirname,bbpath2,_0x3e1d77(0x298),_0x3e1d77(0x101)));}),app[_0x2fc8d8(0x2e7)]('/:bot/coins',(_0xee5dfd,_0x374838)=>{const _0x3504ff=_0x2fc8d8;_0x374838[_0x3504ff(0x272)](path[_0x3504ff(0x13c)](__dirname,bbpath2,_0x3504ff(0x298),_0x3504ff(0x101)));}),app[_0x2fc8d8(0x2e7)](_0x2fc8d8(0x100),(_0x2182c8,_0x32662a)=>{const _0x11a296=_0x2fc8d8;_0x32662a[_0x11a296(0x272)](path['join'](__dirname,bbpath2,_0x11a296(0x298),_0x11a296(0x101)));}),app[_0x2fc8d8(0x2e7)](_0x2fc8d8(0x2e5),(_0x1f8642,_0x2a3945)=>{const _0x24daae=_0x2fc8d8;_0x2a3945[_0x24daae(0x272)](path['join'](__dirname,bbpath2,_0x24daae(0x298),_0x24daae(0x101)));}),app[_0x2fc8d8(0x2e7)](_0x2fc8d8(0x16f),(_0xe86d8f,_0xa895d9)=>{const _0x540c6a=_0x2fc8d8;_0xa895d9[_0x540c6a(0x272)](path['join'](__dirname,bbpath2,_0x540c6a(0x298),_0x540c6a(0x101)));});if(HOST)http[_0x2fc8d8(0x157)](PORT,HOST);else http[_0x2fc8d8(0x157)](PORT);const io=require(_0x2fc8d8(0x1bc))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2e2123=_0x2fc8d8;let _0x4aed07=_0x2e2123(0x23c);const _0x1541d6=networkInterfaces(),_0x43afd6={};for(const _0x21f282 of Object['keys'](_0x1541d6)){for(const _0x1aeb99 of _0x1541d6[_0x21f282]){if((_0x1aeb99[_0x2e2123(0x245)]==_0x2e2123(0x1ea)||_0x1aeb99[_0x2e2123(0x245)]==0x4)&&!_0x1aeb99['internal']){const _0x452d7d=ipaddr[_0x2e2123(0x218)](_0x1aeb99['address'])[_0x2e2123(0x131)]();_0x452d7d!=_0x2e2123(0x274)&&(!_0x43afd6[_0x21f282]&&(_0x43afd6[_0x21f282]=[]),_0x43afd6[_0x21f282][_0x2e2123(0x148)](_0x1aeb99[_0x2e2123(0x1d3)]),_0x4aed07=_0x1aeb99['address']);}}}return{'serverip':_0x4aed07,'netinterfaces':_0x43afd6};}async function startServer(){const _0x112a52=_0x2fc8d8,{serverip:_0x45af20,netinterfaces:_0x8ed366}=getServerIP();logger[_0x112a52(0x116)](''),logger[_0x112a52(0x116)]('-----------------------------------------------------------------------------------'),await logger['full'](_0x112a52(0x120)+serverversion+'#RES#\x20'+(environment==_0x112a52(0x2fc)?_0x112a52(0x168):'')+'\x0a'+(_0x112a52(0x112)+PORT+_0x112a52(0x19c))+(_0x112a52(0x135)+_0x45af20+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x112a52(0x20c)]!=0x0)for(const _0x380758 of config){const _0x434148=_0x380758[_0x112a52(0x285)]==_0x112a52(0x160)?'a':'m';if(_0x380758[_0x112a52(0x2f6)]=='enabled'||_0x380758[_0x112a52(0x2f6)]==_0x112a52(0x181))await logger[_0x112a52(0x2fe)](_0x112a52(0x126)+_0x434148+_0x112a52(0x200)+_0x380758[_0x112a52(0x24a)]+_0x112a52(0x258)+_0x380758[_0x112a52(0x1de)]),startBot([_0x380758[_0x112a52(0x24a)],userID],{'cwd':bbpath},function(_0x7d71a3){const _0x2ea1a2=_0x112a52;if(_0x7d71a3)logger[_0x2ea1a2(0x2fe)](_0x7d71a3);});else(_0x380758[_0x112a52(0x2f6)]==_0x112a52(0x28c)||_0x380758[_0x112a52(0x2f6)]==_0x112a52(0x2b9))&&await logger[_0x112a52(0x2fe)](_0x112a52(0x2c3)+_0x434148+_0x112a52(0x1d0)+_0x380758['botID']+_0x112a52(0x258)+_0x380758[_0x112a52(0x1de)]);}else!newBot&&logger['simple'](_0x112a52(0x2e6));if(newBot)addBot();logger[_0x112a52(0x116)](_0x112a52(0x268)),logger[_0x112a52(0x116)](''),await logger[_0x112a52(0x288)](_0x112a52(0x2af)+nodeversion),await logger['debug'](_0x112a52(0x1c6),_0x8ed366);}function _0x1fa5(){const _0x14f423=['getDate','Unauthorized\x20attempt\x20to\x20get\x20messages','get-portfolio','tempaccess_15_','build','Notifications\x20disabled','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/:bot','storeConfiguration','api-eu.mixpanel.com','login2fa_reject_','getHours','clientip','manual','hybrid-crypto-js','25NKtTjY','/status\x20-\x20show\x20bot(s)\x20status\x0a','Error\x20details:','name','place-order','Login\x20rejected','apiPassword','toggle_','Logged\x20in\x20user\x20...','production','uuid','Invalid\x20IP\x20address','Node.js\x20v','toIPv4Address','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','versions','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Invalid\x20authentication\x20token\x20(2)','constructor','log','Telegram\x20error:','new-disabled','HTML','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','config_all','2FA\x20login\x20rejected','bbPassword','RSA-OAEP','reset-history','action','storeHeadless','Idling\x20(','show-config','env','live','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','User\x20has\x20been\x20validated','access','login','\x20mode','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/on\x20-\x20start\x20bot(s)\x0a','Password\x20reset\x20rejected','from','crypto','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','tempaccess_5_','https://api.ipify.org?format=json','temporaryAccessAllowed','lastmsgemitted','disconnect','DEFLATE','sort','replace','string','reason','files','Orders','enabled','remove','bbvReceive','\x20to\x20','text','backup/','remoteAddress','/:bot/configuration','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','get','type','/start','apiKey','logout','editMessageReplyMarkup',':\x20Bot\x20Mgr\x20>\x20','metrics','/metrics\x20-\x20show\x20bot\x20performance\x0a','Setting\x20access:\x20','yes','3606078beVlER','event','latestversion','Notifications\x20enabled','status','restart_','help','Allow\x20login\x20from\x20IP\x20address\x20','invalid\x20credentials','*$1*','staging','notification','full','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','storeFiat','store-configuration','<b>Balance\x20Bot\x20Status:</b>\x0a','stopped','rmSync','stop','send','All','bcryptjs','temp/','bbvNew',',\x20must\x20be\x20a\x204\x20digit\x20number','login\x20token\x20valid','temporary\x20access\x20not\x20allowed','user','Unauthorized\x20attempt\x20to\x20log\x20out','assign','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Unauthorized\x20attempt\x20to\x20get\x20events','File\x20uploaded','stringify','/upload-backup','1000','request','Server','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','handshake','restart','secure','/:bot/history','index.html','generate','output-003.log','express','Restore\x20backup\x20file\x20','telegramEvents','Token\x20blacklisted','exp','data','settings.','750864RjIOTY','1174869xxGBfu','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','version.json','verify','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','pidRefreshToken','util','whitelistEnabled','simple','backup-full.zip','login\x20token\x20generated','127.0.0.1','axios','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','status\x20code\x20401','loginRequired','keys','/names\x20-\x20show\x20bot\x20names\x0a','Starting\x20#RED#Balance\x20Bot\x20v','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','exit','config_orders','reinstall_yes','min','Starting\x20(','node-zip','resetpw_yes','running','lastmsgtelegram','settings','readdirSync','restore_no_','Starting\x20Balance\x20Bot\x20reinstallation','SIGTERM','\x1b[0m','range','cloneDeep','copyFileSync','-performance.json','=>\x20Go\x20to\x20#CYA#http://','unlinkSync','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Session\x20expired\x20for\x20user\x20...','delete-alerts','removeAllListeners','1664578mjssvs','join','Invalid\x20username\x20or\x20IP\x20address','config','emitHistory','ipaddr.js','update-bot','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','warning','function','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','command','/help\x20-\x20show\x20available\x20commands\x0a','push','timestamp','resetHistory','lowdb','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','getPortfolio','socket','binary','date-fns','Unauthorized\x20attempt\x20to\x20store\x20configuration','Restoring\x20bot(s)\x20from\x20backup','exchange','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','fork','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','listen','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','compareSync','All\x20bots','/enable\x20-\x20enable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','placeOrder','getSeconds','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','auto','/off\x20-\x20stop\x20bot(s)\x0a','getTime','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','telegramEnabled','path','apply','alerts','(staging)','deleteHistoryAlerts','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','track','Starting\x20Balance\x20Bot\x20update','Bot\x20','telegram2FaApproval','/:bot/support','Your\x20installation\x20is\x20already\x20up\x20to\x20date','order','on_','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','decrypt','reject','bb-secure.json','store-settings','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','randomFillSync','createWriteStream','padStart','Ok,\x20will\x20send\x20order\x20notifications\x20only','startsWith','\x1b[31m','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','write','new','password','showname','backup-full','botmanager','\x20(1)','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','-events.json','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','username','Yes','connected','isValid','sortBy','0.0.0','::ffff:127.0.0.1','reinstall','static','update-bb','then','format','f2aRequired','max','init','Invalid\x20authentication\x20token\x20(1)','defaults','telegramToken','#RES#\x20if\x20running\x20locally\x0a','post','Error\x20removing\x20old\x20backup\x20files:','host','delete-bot','getMinutes','message','kind','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','bb/','947706mARwes','BCT','Unauthorized\x20attempt\x20to\x20download\x20','3000','args','RSA','No\x20authentication\x20token','bot-','bot','userid','reply','output-001.log','config/','initclient','update_yes','Temporary\x20access\x20rejected','telegramChatId','hasOwnProperty','login2fa_','names','tkn','pidExpireLogin','socket.io','telegrammsg','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','bots','***','isDirectory','slice','CoinMarketCap\x20API\x20key\x20validated','close','build2','Network\x20Interfaces:','Access\x20enabled\x20for\x20','sendMessage','success','marketcapApi','blacklist','Deleted\x20Bot\x20','endsWith','error','orders',')\x20\x20\x20|\x20Bot\x20','config_alerts','temporary\x20access\x20timeout','address','updatebotmanager','apiSecret','\x20|\x20user:\x20...','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','statSync','server','6b67f3d61ee94b8f5c80b4affef4c4d9','yargs/yargs','temporary\x20token\x20generated','onepagemode','botname','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20confirm\x20message','update_no','off_','disable','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','store','set','publicKey','portfolio_','conn','IPv4','inlineKeyboard','5\x20min','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','chat','expiry','|@|','http','zip/','toggleBotMode','4HaEJaY','add','params','code','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','toggle-bot-mode','headless','use','SIGINT','writeFileSync','start','\x20only\x0a',')\x20|\x20Bot\x20','ipv6','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','show','toIPv4MappedAddress','title','(((.+)+)+)+$','file','2FA\x20required','\x20-\x20','port','get-starting-balances','length','store-headless','9336720aafkYh','bot.js','\x20>\x20','secret','accept','value','output-000.log','access\x20timeout','launch','sendPortfolioTelegram','parse','Login\x20accepted','test','/restart\x20-\x20restart\x20bot(s)\x0a','map','showConfig','No\x20bots\x20running\x20right\x20now','started','find','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','metrics_','get-backup-files','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','bb-settings.json','includes','timeshift','toggle','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','telegram','Enabled\x20Bot\x20','1617767CuxKNM','get-messages','getUTCHours','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','messages','get-logs','login\x20not\x20required','2FA\x20login\x20token\x20generated','add-bot','telegramIpApproval','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','existsSync','bbUsername','allow','Logged\x20out\x20user\x20...','[ip-address]','2FA\x20login\x20required','Password\x20has\x20been\x20reset\x20to:\x20','100XiGcfP','callback','.zip','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','encryptedUuid','sendMetricsTelegram','family','button','logged\x20out','hashSync','inherit','botID','Crypt','reset-password','-config.json','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20add\x20bot','getFullYear','bb-config.json','privateKey','off','sign','forEach','Unauthorized\x20attempt\x20to\x20update\x20bot','backup','\x20|\x20','node','\x1b[33m','tempaccess_30_','kill','auth','Disabled\x20Bot\x20','emit','jsonwebtoken','\x1b[35m','reload','mixpanel','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Restarting\x20Bot\x20','update','resetpw_no','-----------------------------------------------------------------------------------','getMonth','exec','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','match','alias','restore-backup-file','mkdirSync','sha256','catch','sendFile','reinstall-bb','private','ETH','environment','logs/','readFileSync','\x1b[36m','Restore\x20process\x20aborted','temporary\x20access\x20rejected','headers','argv','_data','telegramUsername','2FA','login\x20required','telegraf','toString','all','mode','Bot\x20Mgr\x20>\x20','randomBytes','debug','split','\x20(2)','************','disabled','#RES#','token','any',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','-results.json','filter','number'];_0x1fa5=function(){return _0x14f423;};return _0x1fa5();}function startSocket(){io['on']('connection',_0x5b9bac=>{const _0x19148f=_0x1749;let _0x33b73b,_0x33bbb6,_0xb7f968,_0x1d1c51,_0x4b0ff6;const _0x406324=_0x5b9bac['handshake'][_0x19148f(0x27c)]['referer'];_0x33bbb6=_0x406324[_0x19148f(0x26c)](/bot[0-9]{3}/);if(_0x33bbb6)_0xb7f968=_0x33bbb6[0x0][_0x19148f(0x26c)](/[0-9]{3}/);if(_0xb7f968)_0x33b73b=_0xb7f968[0x0];else _0x33b73b=_0x19148f(0x185);const _0x2a3ff6=_0x5b9bac[_0x19148f(0xfd)][_0x19148f(0x25d)][_0x19148f(0x243)];if(!_0x2a3ff6)_0x5b9bac[_0x19148f(0x25f)](_0x19148f(0x2f6),{'publicKey':secure[_0x19148f(0x1e7)]});else{_0x1d1c51=timelyDecrypt(_0x2a3ff6,![]);if(!_0x1d1c51)_0x5b9bac[_0x19148f(0x25f)](_0x19148f(0x2f6),{'publicKey':secure[_0x19148f(0x1e7)]});else{_0x4b0ff6=normalizeIP(_0x5b9bac[_0x19148f(0x1e9)][_0x19148f(0x2e4)])[_0x19148f(0x1e5)];if(!devices[_0x1d1c51])devices[_0x1d1c51]={'uuid':_0x1d1c51,'access':{'token':null}};devices[_0x1d1c51]['ip']=_0x4b0ff6;const _0x3d76dc=addClient(_0x5b9bac['id'],_0x1d1c51,_0x33b73b);setAccess(_0x3d76dc),emitMessages(),_0x5b9bac['on'](_0x19148f(0x2ca),_0x55845a=>{const _0x3dea3f=_0x19148f,_0x33a314=timelyDecrypt(_0x55845a[_0x3dea3f(0x182)],!![],_0x3dea3f(0x1f0));if(_0x33a314){_0x55845a={'username':_0x55845a[_0x3dea3f(0x18a)],'password':_0x33a314},devices[_0x1d1c51][_0x3dea3f(0x2c9)]=validateCredentials(_0x55845a,_0x1d1c51);if(devices[_0x1d1c51][_0x3dea3f(0x2c9)][_0x3dea3f(0x23a)]==![]&&devices[_0x1d1c51][_0x3dea3f(0x2c9)][_0x3dea3f(0x2db)]==_0x3dea3f(0x23d))_0x5b9bac[_0x3dea3f(0x25f)]('status',{'access':devices[_0x1d1c51][_0x3dea3f(0x2c9)]}),loginAccess2FA(_0x1d1c51,_0x4b0ff6);else{if(devices[_0x1d1c51][_0x3dea3f(0x2c9)][_0x3dea3f(0x23a)]==![]&&devices[_0x1d1c51]['access'][_0x3dea3f(0x2db)]==_0x3dea3f(0x2fa))_0x5b9bac[_0x3dea3f(0x25f)](_0x3dea3f(0x2f6),{'access':devices[_0x1d1c51][_0x3dea3f(0x2c9)]});else devices[_0x1d1c51][_0x3dea3f(0x2c9)]['allow']&&devices[_0x1d1c51][_0x3dea3f(0x2c9)][_0x3dea3f(0x2db)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1d1c51)['forEach'](_0x249221=>{setAccess(_0x249221);}),logger[_0x3dea3f(0x288)](_0x3dea3f(0x2ab)+_0x1d1c51[_0x3dea3f(0x1c2)](-0x8)),setTokenRefresh(_0x1d1c51),setSessionTimeout(_0x3dea3f(0x2ca),_0x1d1c51));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x5b9bac['on'](_0x19148f(0x24c),()=>{resetPassword();}),_0x5b9bac['on']('disconnect',_0x4785db=>{removeClient(_0x5b9bac['id']);}),_0x33b73b==_0x19148f(0x185)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x510f93){const _0xabb648=_0x2fc8d8;if(_0x510f93!='botmanager'&&config[_0xabb648(0x2ea)]!=''){if(pid[_0x510f93])pid[_0x510f93][_0xabb648(0xe8)]({'function':_0xabb648(0x1b3),'args':null});}_0x510f93!=_0xabb648(0x185)&&broadcastToBots('bots',JSON[_0xabb648(0xf7)](config));}function reloadBotManager(){const _0x2869b8=_0x2fc8d8;getClientsWithBotID(_0x2869b8(0x185))[_0x2869b8(0x255)](_0x5f06b6=>{const _0xba18a3=_0x2869b8;getSocket(_0x5f06b6['id'])['emit'](_0xba18a3(0x2f6),{'access':{'allow':![],'reason':_0xba18a3(0x262),'token':null}});});}function getSocket(_0x4c69d0){return io['sockets']['sockets']['get'](_0x4c69d0);}function setAccess(_0x59054b){const _0xa908d0=_0x2fc8d8,_0x388e1a=getSocket(_0x59054b['id']),_0x454451=_0x59054b[_0xa908d0(0x2ad)],_0x41db39=_0x59054b[_0xa908d0(0x1ae)];devices[_0x454451][_0xa908d0(0x2c9)]=validateAccess(devices[_0x454451]['access'][_0xa908d0(0x28e)],_0x454451),logger[_0xa908d0(0x288)](_0xa908d0(0x2f0)+devices[_0x454451][_0xa908d0(0x2c9)][_0xa908d0(0x2db)]+'\x20|\x20client:\x20...'+_0x59054b['id'][_0xa908d0(0x1c2)](-0x8)+_0xa908d0(0x1d6)+_0x454451['slice'](-0x8)),_0x388e1a['join'](_0x454451);if(devices[_0x454451][_0xa908d0(0x2c9)]['allow']){_0x388e1a[_0xa908d0(0x13c)](_0x41db39);if(_0x41db39=='botmanager')initializeSocketBotManager(_0x388e1a);else initializeSocketBot(_0x388e1a);initClient(_0x41db39);}devices[_0x454451]['access'][_0xa908d0(0x28e)]&&devices[_0x454451]['access'][_0xa908d0(0x2db)]==_0xa908d0(0x1dc)&&setSessionTimeout(_0xa908d0(0x280),_0x454451),devices[_0x454451]['access'][_0xa908d0(0x28e)]&&devices[_0x454451]['access']['reason']==_0xa908d0(0x234)&&setSessionTimeout('login',_0x454451),_0x388e1a[_0xa908d0(0x25f)](_0xa908d0(0x2f6),{'status':_0x59054b[_0xa908d0(0x1d9)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x454451][_0xa908d0(0x2c9)],'externalip':devices[_0x454451]['ip'],'publicKey':secure[_0xa908d0(0x1e7)],'userid':settings[_0xa908d0(0x1af)],'validInstallation':validInstallation}),devices[_0x454451][_0xa908d0(0x2c9)][_0xa908d0(0x23a)]==![]&&devices[_0x454451][_0xa908d0(0x2c9)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x454451,devices[_0x454451]['ip']);}function setSessionTimeout(_0x3f4967,_0x49030d){const _0x2806fd=_0x2fc8d8;let _0x184336;if(_0x3f4967==_0x2806fd(0x2ca))_0x184336=loginExpiry*0x3c*0x3e8;else _0x184336=devices[_0x49030d][_0x2806fd(0x236)][_0x2806fd(0x1ef)]*0x3c*0x3e8-(new Date()[_0x2806fd(0x162)]()-devices[_0x49030d][_0x2806fd(0x236)][_0x2806fd(0x149)]);if(devices[_0x49030d][_0x2806fd(0x1bb)])clearTimeout(devices[_0x49030d][_0x2806fd(0x1bb)]);devices[_0x49030d]['pidExpireLogin']=setTimeout(()=>{const _0x36d174=_0x2806fd;if(devices[_0x49030d][_0x36d174(0x113)])clearTimeout(devices[_0x49030d][_0x36d174(0x113)]);removeSocketListeners(_0x49030d),addBlacklist(_0x49030d),devices[_0x49030d]['telegramIpApproval']=null,devices[_0x49030d]['telegram2FaApproval']=null,devices[_0x49030d]['access'][_0x36d174(0x28e)]=null,logger['debug'](_0x36d174(0x138)+_0x49030d[_0x36d174(0x1c2)](-0x8)),devices[_0x49030d][_0x36d174(0x2c9)]=validateAccess(devices[_0x49030d][_0x36d174(0x2c9)][_0x36d174(0x28e)],_0x49030d),!(devices[_0x49030d][_0x36d174(0x2c9)][_0x36d174(0x23a)]&&devices[_0x49030d][_0x36d174(0x2c9)][_0x36d174(0x2db)]=='login\x20not\x20required')&&(_0x3f4967==_0x36d174(0x2ca)?io['to'](_0x49030d)[_0x36d174(0x25f)]('status',{'access':{'allow':![],'reason':_0x36d174(0x215),'token':null}}):io['to'](_0x49030d)[_0x36d174(0x25f)](_0x36d174(0x2f6),{'access':{'allow':![],'reason':_0x36d174(0x1d2),'token':null}})),devices[_0x49030d]['access'][_0x36d174(0x28e)]=null;},_0x184336);}function setTokenRefresh(_0x4596d4){const _0x5ceefc=_0x2fc8d8;if(devices[_0x4596d4][_0x5ceefc(0x113)])clearTimeout(devices[_0x4596d4][_0x5ceefc(0x113)]);devices[_0x4596d4][_0x5ceefc(0x113)]=setTimeout(()=>{const _0x4743b1=_0x5ceefc;getClientsWithUuid(_0x4596d4)[_0x4743b1(0x20c)]!=0x0?(devices[_0x4596d4][_0x4743b1(0x2c9)]=refreshToken(_0x4596d4),io['to'](_0x4596d4)[_0x4743b1(0x25f)](_0x4743b1(0x2f6),{'status':_0x4743b1(0x18c),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4596d4][_0x4743b1(0x2c9)],'externalip':devices[_0x4596d4]['ip'],'publicKey':secure[_0x4743b1(0x1e7)],'validInstallation':validInstallation}),setTokenRefresh(_0x4596d4)):clearTimeout(devices[_0x4596d4]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x349c04){const _0x54c530=_0x2fc8d8,_0xa5bf97=getClient(_0x349c04['id'])[_0x54c530(0x2ad)];_0x349c04[_0x54c530(0x25f)](_0x54c530(0x1bf),config),_0x349c04['emit']('settings',cleanSettings()),_0x349c04['on'](_0x54c530(0x235),_0x4548d1=>{const _0xfe34bc=_0x54c530;if(validateAccess(_0x4548d1,_0xa5bf97)[_0xfe34bc(0x23a)])addBot();else logger[_0xfe34bc(0x2fe)](_0xfe34bc(0x24f));}),_0x349c04['on'](_0x54c530(0x141),(_0x494e28,_0x4ee243)=>{const _0x3f4f12=_0x54c530;if(validateAccess(_0x4ee243,_0xa5bf97)[_0x3f4f12(0x23a)])toggleBot(_0x494e28[_0x3f4f12(0x24a)],_0x494e28[_0x3f4f12(0x2f6)],_0x494e28[_0x3f4f12(0x2c6)]);else logger[_0x3f4f12(0x2fe)](_0x3f4f12(0x256));}),_0x349c04['on'](_0x54c530(0x1f9),(_0x41b987,_0x3264bd)=>{const _0x12eed6=_0x54c530;if(validateAccess(_0x3264bd,_0xa5bf97)['allow'])toggleBotMode(_0x41b987);else logger['full'](_0x12eed6(0x256));}),_0x349c04['on'](_0x54c530(0x1a0),(_0x1f3a69,_0xc3ee02)=>{const _0x15e7e0=_0x54c530;if(validateAccess(_0xc3ee02,_0xa5bf97)[_0x15e7e0(0x23a)])deleteBot(_0x1f3a69);else logger['full'](_0x15e7e0(0x1df));}),_0x349c04['on'](_0x54c530(0x177),(_0x286bd0,_0x46b819)=>{const _0x4d85ee=_0x54c530;if(validateAccess(_0x46b819,_0xa5bf97)[_0x4d85ee(0x23a)])storeSettings(_0x286bd0,!![]);else logger[_0x4d85ee(0x2fe)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x349c04['on'](_0x54c530(0x193),_0x34ebb9=>{const _0x4a33b5=_0x54c530;if(validateAccess(_0x34ebb9,_0xa5bf97)[_0x4a33b5(0x23a)])updateBB(_0x4a33b5(0x266));else logger[_0x4a33b5(0x2fe)](_0x4a33b5(0x24e));}),_0x349c04['on'](_0x54c530(0x273),_0x5c2f8c=>{const _0x1979a1=_0x54c530;if(validateAccess(_0x5c2f8c,_0xa5bf97)[_0x1979a1(0x23a)])updateBB(_0x1979a1(0x191));else logger[_0x1979a1(0x2fe)](_0x1979a1(0x2ff));}),_0x349c04['on'](_0x54c530(0x224),_0x16ec02=>{const _0xabdfa6=_0x54c530;if(validateAccess(_0x16ec02,_0xa5bf97)[_0xabdfa6(0x23a)]){const _0x5433ad=getClient(_0x349c04['id']);if(_0x5433ad)getBackupFiles(_0x5433ad[_0xabdfa6(0x2ad)]);else logger['full'](_0xabdfa6(0x11b));}else logger[_0xabdfa6(0x2fe)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x349c04['on'](_0x54c530(0x26e),(_0x9e1024,_0xeb66d)=>{const _0x42fb73=_0x54c530;if(validateAccess(_0xeb66d,_0xa5bf97)[_0x42fb73(0x23a)])restoreBackupFile(_0x9e1024);else logger[_0x42fb73(0x2fe)](_0x42fb73(0x22a));}),_0x349c04['on'](_0x54c530(0x22e),_0x27d9d7=>{const _0x38952e=_0x54c530;if(validateAccess(_0x27d9d7,_0xa5bf97)[_0x38952e(0x23a)])getMessages();else logger['full'](_0x38952e(0x295));}),_0x349c04['on']('confirm-message',(_0x321b7b,_0x55c86e)=>{const _0x44ce61=_0x54c530;if(validateAccess(_0x55c86e,_0xa5bf97)[_0x44ce61(0x23a)])confirmMessage(_0x321b7b);else logger['full'](_0x44ce61(0x1e0));}),_0x349c04['on'](_0x54c530(0x2eb),_0x49933e=>{const _0x283d7b=_0x54c530;if(validateAccess(_0x49933e,_0xa5bf97)[_0x283d7b(0x23a)]){if(devices[_0xa5bf97][_0x283d7b(0x113)])clearTimeout(devices[_0xa5bf97][_0x283d7b(0x113)]);if(devices[_0xa5bf97]['pidExpireLogin'])clearTimeout(devices[_0xa5bf97][_0x283d7b(0x1bb)]);removeSocketListeners(getClient(_0x349c04['id'])['uuid']),addBlacklist(_0xa5bf97),devices[_0xa5bf97][_0x283d7b(0x236)]=null,devices[_0xa5bf97][_0x283d7b(0x16e)]=null,devices[_0xa5bf97][_0x283d7b(0x2c9)]['token']=null,logger['debug'](_0x283d7b(0x23b)+_0xa5bf97[_0x283d7b(0x1c2)](-0x8)),io['to'](getClient(_0x349c04['id'])[_0x283d7b(0x2ad)])['emit'](_0x283d7b(0x2f6),{'access':{'allow':![],'reason':_0x283d7b(0x247),'token':null}});}else logger[_0x283d7b(0x2fe)](_0x283d7b(0xf1));});}function initializeSocketBot(_0x399ba4){const _0x25bbc9=_0x2fc8d8,_0x4a7837=getClient(_0x399ba4['id'])[_0x25bbc9(0x1ae)],_0x2a87b4=getClient(_0x399ba4['id'])['uuid'];_0x399ba4['on'](_0x25bbc9(0x232),(_0x1bf77f,_0x47a31d)=>{const _0x101bfd=_0x25bbc9;if(validateAccess(_0x47a31d,_0x2a87b4)[_0x101bfd(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837][_0x101bfd(0xe8)]({'function':_0x101bfd(0x13f),'args':_0x1bf77f});}else logger[_0x101bfd(0x2fe)](_0x101bfd(0xf5));}),_0x399ba4['on'](_0x25bbc9(0x139),(_0x1cb2bd,_0x879202)=>{const _0x31b8ca=_0x25bbc9;if(validateAccess(_0x879202,_0x2a87b4)['allow']){if(pid[_0x4a7837])pid[_0x4a7837][_0x31b8ca(0xe8)]({'function':_0x31b8ca(0x169),'args':_0x1cb2bd});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x399ba4['on'](_0x25bbc9(0x296),(_0x4959ed,_0x257c57)=>{const _0xbab3d8=_0x25bbc9;if(validateAccess(_0x257c57,_0x2a87b4)[_0xbab3d8(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837][_0xbab3d8(0xe8)]({'function':_0xbab3d8(0x14d),'args':_0x4959ed});}else logger[_0xbab3d8(0x2fe)](_0xbab3d8(0x15c));}),_0x399ba4['on'](_0x25bbc9(0xe3),(_0x125992,_0x1b1dd8)=>{const _0x43512e=_0x25bbc9;if(validateAccess(_0x1b1dd8,_0x2a87b4)[_0x43512e(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837]['send']({'function':_0x43512e(0x29c),'args':_0x125992});}else logger[_0x43512e(0x2fe)](_0x43512e(0x151));}),_0x399ba4['on'](_0x25bbc9(0x20d),(_0x30a14c,_0x59b479)=>{const _0x18a5fc=_0x25bbc9;if(validateAccess(_0x59b479,_0x2a87b4)[_0x18a5fc(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837]['send']({'function':_0x18a5fc(0x2c2),'args':_0x30a14c});}else logger[_0x18a5fc(0x2fe)](_0x18a5fc(0x156));}),_0x399ba4['on']('store-fiat',(_0x21ea61,_0x26bc6a)=>{const _0x304073=_0x25bbc9;if(validateAccess(_0x26bc6a,_0x2a87b4)[_0x304073(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837][_0x304073(0xe8)]({'function':_0x304073(0x300),'args':_0x21ea61});}else logger['full'](_0x304073(0x2b2));}),_0x399ba4['on'](_0x25bbc9(0x2c0),_0x7f3b9=>{const _0x308640=_0x25bbc9;if(validateAccess(_0x7f3b9,_0x2a87b4)[_0x308640(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837][_0x308640(0xe8)]({'function':_0x308640(0x14a),'args':null});}else logger[_0x308640(0x2fe)](_0x308640(0x2c7));}),_0x399ba4['on'](_0x25bbc9(0x20b),_0x2a60cc=>{const _0x55cb1a=_0x25bbc9;if(validateAccess(_0x2a60cc,_0x2a87b4)['allow']){if(pid[_0x4a7837])pid[_0x4a7837][_0x55cb1a(0xe8)]({'function':'getStartingBalances','args':null});}else logger['full'](_0x55cb1a(0x225));}),_0x399ba4['on'](_0x25bbc9(0x2a7),(_0x38d0d6,_0x45e5d6)=>{const _0x4c8321=_0x25bbc9;if(validateAccess(_0x45e5d6,_0x2a87b4)[_0x4c8321(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837][_0x4c8321(0xe8)]({'function':_0x4c8321(0x15d),'args':_0x38d0d6});}else logger[_0x4c8321(0x2fe)](_0x4c8321(0x1f8));}),_0x399ba4['on']('cancel-loading',_0x179e31=>{const _0x8c0091=_0x25bbc9;if(validateAccess(_0x179e31,_0x2a87b4)['allow']){if(pid[_0x4a7837])pid[_0x4a7837][_0x8c0091(0xe8)]({'function':'cancelLoading','args':null});}else logger[_0x8c0091(0x2fe)](_0x8c0091(0x2cc));}),_0x399ba4['on'](_0x25bbc9(0x2c4),_0x56e0ae=>{const _0x42f22f=_0x25bbc9;if(validateAccess(_0x56e0ae,_0x2a87b4)[_0x42f22f(0x23a)]){if(pid[_0x4a7837])pid[_0x4a7837]['send']({'function':_0x42f22f(0x21d),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x399ba4['on'](_0x25bbc9(0x193),_0x358cc0=>{const _0x2dbd5d=_0x25bbc9;if(validateAccess(_0x358cc0,_0x2a87b4)[_0x2dbd5d(0x23a)])updateBB(_0x2dbd5d(0x266));else logger['full'](_0x2dbd5d(0x24e));}),_0x399ba4['on'](_0x25bbc9(0x22e),_0x129e0a=>{const _0x3e6690=_0x25bbc9;if(validateAccess(_0x129e0a,_0x2a87b4)['allow'])getMessages();else logger[_0x3e6690(0x2fe)](_0x3e6690(0x295));}),_0x399ba4['on']('confirm-message',(_0xddb0b3,_0x28e7f1)=>{const _0x260ece=_0x25bbc9;if(validateAccess(_0x28e7f1,_0x2a87b4)[_0x260ece(0x23a)])confirmMessage(_0xddb0b3);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x399ba4['on']('logout',_0x2fa797=>{const _0x2e54e8=_0x25bbc9;if(validateAccess(_0x2fa797,_0x2a87b4)[_0x2e54e8(0x23a)]){if(devices[_0x2a87b4][_0x2e54e8(0x113)])clearTimeout(devices[_0x2a87b4][_0x2e54e8(0x113)]);if(devices[_0x2a87b4]['pidExpireLogin'])clearTimeout(devices[_0x2a87b4][_0x2e54e8(0x1bb)]);removeSocketListeners(getClient(_0x399ba4['id'])[_0x2e54e8(0x2ad)]),addBlacklist(_0x2a87b4),devices[_0x2a87b4][_0x2e54e8(0x236)]=null,devices[_0x2a87b4]['telegram2FaApproval']=null,devices[_0x2a87b4][_0x2e54e8(0x2c9)][_0x2e54e8(0x28e)]=null,logger['debug'](_0x2e54e8(0x23b)+_0x2a87b4[_0x2e54e8(0x1c2)](-0x8)),io['to'](getClient(_0x399ba4['id'])[_0x2e54e8(0x2ad)])[_0x2e54e8(0x25f)](_0x2e54e8(0x2f6),{'access':{'allow':![],'reason':_0x2e54e8(0x247),'token':null}});}else logger[_0x2e54e8(0x2fe)](_0x2e54e8(0xf1));});}function removeSocketListeners(_0x3bf245){const _0x1c4da1=_0x2fc8d8;getClientsWithUuid(_0x3bf245)[_0x1c4da1(0x255)](_0x316186=>{const _0x32538a=_0x1c4da1;getSocket(_0x316186['id'])[_0x32538a(0x13a)]();});}function cleanSettings(){const _0x406e77=_0x2fc8d8;let _0x11e9e0=settings;return settings[_0x406e77(0x19b)]&&settings[_0x406e77(0x19b)]!=''&&(_0x11e9e0={..._0x11e9e0,'telegramToken':'************'}),settings['bbPassword']&&settings[_0x406e77(0x2be)]!=''&&(_0x11e9e0={..._0x11e9e0,'bbPassword':_0x406e77(0x28b)}),settings[_0x406e77(0x1ca)]&&settings[_0x406e77(0x1ca)]!=''&&(_0x11e9e0={..._0x11e9e0,'marketcapApi':_0x406e77(0x28b)}),(settings[_0x406e77(0x2be)]&&settings[_0x406e77(0x2be)]==_0x406e77(0x1c0)||settings[_0x406e77(0x19b)]&&settings[_0x406e77(0x19b)]==_0x406e77(0x1c0)||settings[_0x406e77(0x1ca)]&&settings[_0x406e77(0x1ca)]==_0x406e77(0x1c0))&&(_0x11e9e0={..._0x11e9e0,'restored':{'password':settings[_0x406e77(0x2be)]==_0x406e77(0x1c0),'telegram':settings[_0x406e77(0x19b)]==_0x406e77(0x1c0),'marketcap':settings['marketcapApi']==_0x406e77(0x1c0)}}),_0x11e9e0;}async function updateBB(_0x19d5ed){const _0x1038ec=_0x2fc8d8;await backupConfigFiles(),installingUpdate=!![],config[_0x1038ec(0x255)](_0x45b189=>{const _0x3c9f70=_0x1038ec;restartBot(_0x45b189[_0x3c9f70(0x24a)]);});if(_0x19d5ed==_0x1038ec(0x266))process[_0x1038ec(0xe8)]({'update':!![],'environment':environment},_0x1b1bb0=>{});else _0x19d5ed==_0x1038ec(0x191)&&process[_0x1038ec(0xe8)]({'reinstall':!![],'environment':environment},_0x522eaf=>{});}function startBot(_0x56a083,_0x400a6c,_0x1b417b){const _0x112a68=_0x2fc8d8;if(debugging)_0x56a083[_0x112a68(0x148)]('-d');let _0x2a1c5d=![];const _0xa9d1ab=_0x56a083[0x0];_0x400a6c={..._0x400a6c,'stdio':['inherit','inherit',_0x112a68(0x249),'ipc']},pid[_0xa9d1ab]=childProcess[_0x112a68(0x155)](botfile,_0x56a083,_0x400a6c),pid[_0xa9d1ab]['on'](_0x112a68(0x1a2),_0x562eee=>{const _0x2a630f=_0x112a68;switch(Object[_0x2a630f(0x11e)](_0x562eee)[0x0]){case _0x2a630f(0x1de):updateBotName(_0xa9d1ab,_0x562eee[_0x2a630f(0x1de)]);break;case _0x2a630f(0x1d4):updateBotManager();break;case'status':updateStatus(_0xa9d1ab,_0x562eee[_0x2a630f(0x2f6)]);break;case _0x2a630f(0x2c6):updateLive(_0xa9d1ab,_0x562eee['live']);break;case _0x2a630f(0x21f):updateLive(_0xa9d1ab,_0x562eee[_0x2a630f(0x21f)]),io['to'](_0xa9d1ab)[_0x2a630f(0x25f)](_0x2a630f(0x2f6),{'access':{'allow':![],'reason':_0x2a630f(0x262),'token':null}});break;case _0x2a630f(0xe7):_0x562eee[_0x2a630f(0xe7)]=='restart'&&restartBot(_0xa9d1ab);_0x562eee[_0x2a630f(0xe7)]==_0x2a630f(0x25c)&&toggleBot(_0xa9d1ab,_0x2a630f(0x28c),_0x2a630f(0xe5));break;case _0x2a630f(0x22b):sendTelegramBot(_0xa9d1ab,_0x562eee[_0x2a630f(0x22b)]);break;case _0x2a630f(0x1bd):sendTelegramMsg(_0x562eee[_0x2a630f(0x1bd)]);break;case _0x2a630f(0x144):io['to'](_0xa9d1ab)[_0x2a630f(0x25f)](_0x562eee[_0x2a630f(0x144)],_0x562eee[_0x2a630f(0x1aa)]);break;}}),pid[_0xa9d1ab]['on'](_0x112a68(0x1ce),function(_0x46ea73){if(_0x2a1c5d)return;_0x2a1c5d=!![],_0x1b417b(_0x46ea73);}),pid[_0xa9d1ab]['on'](_0x112a68(0x122),async function(_0x28c055){const _0x16b92f=_0x112a68;if(terminating)return;if(installingUpdate){logger[_0x16b92f(0x288)](_0x16b92f(0x1d7)),io[_0x16b92f(0x1c4)]();return;}if(_0x2a1c5d)return;_0x2a1c5d=!![],_0x1b417b(null);const _0x2f6519=dbConfig[_0x16b92f(0x2e7)](_0x16b92f(0x1bf))[_0x16b92f(0x220)]({'botID':_0xa9d1ab})[_0x16b92f(0x213)]();_0x2f6519&&(_0x2f6519[_0x16b92f(0x2f6)]=='enabled'||_0x2f6519[_0x16b92f(0x2f6)]==_0x16b92f(0x181))&&(await sleep(0x3e8),updateLive(_0xa9d1ab,_0x16b92f(0xe5)),logger[_0x16b92f(0x2fe)](_0x16b92f(0x265)+_0xa9d1ab),startBot([_0xa9d1ab,userID],{'cwd':bbpath},function(_0x49cd68){const _0x23a36f=_0x16b92f;if(_0x49cd68)logger[_0x23a36f(0x2fe)](_0x49cd68);}));});}function stopBot(_0x32c0ef){getClientsWithBotID(_0x32c0ef)['forEach'](_0x50ad35=>{const _0x2617a5=_0x1749;getSocket(_0x50ad35['id'])[_0x2617a5(0x2d6)](!![]),removeClient(_0x50ad35['id']);}),pid[_0x32c0ef]&&(pid[_0x32c0ef]['kill'](),pid[_0x32c0ef]=null);}function stopAllBots(){terminating=!![];const _0x23e7ce=getEnabledBots();_0x23e7ce['forEach'](_0x2c8aff=>{const _0x2ec867=_0x1749;stopBot(_0x2c8aff[_0x2ec867(0x24a)]);});}function restartBot(_0x1048a9){const _0x284997=_0x2fc8d8;if(pid[_0x1048a9])pid[_0x1048a9][_0x284997(0x25c)]();}function addBot(){const _0x7b792d=_0x2fc8d8;let _0x53d5ac;for(let _0x2a7002=0x1;_0x2a7002<0x3e9;_0x2a7002++){_0x53d5ac=_0x2a7002[_0x7b792d(0x283)]()[_0x7b792d(0x17b)](0x3,'0');let _0x18e0fb=config[_0x7b792d(0x220)](_0x5aa107=>_0x5aa107[_0x7b792d(0x24a)]==_0x53d5ac);if(!_0x18e0fb)break;}if(_0x53d5ac===_0x7b792d(0xf9)){logger[_0x7b792d(0x2fe)](_0x7b792d(0x29a));return;}logger[_0x7b792d(0x2fe)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x53d5ac),dbConfig[_0x7b792d(0x2e7)]('bots')[_0x7b792d(0x148)]({'botID':_0x53d5ac,'botname':_0x7b792d(0x16d)+_0x53d5ac,'status':_0x7b792d(0x181),'live':''})[_0x7b792d(0x180)](),startBot([_0x53d5ac,userID],{'cwd':bbpath},function(_0x50fb33){const _0x56a161=_0x7b792d;if(_0x50fb33)logger[_0x56a161(0x2fe)](_0x50fb33);}),config=getConfiguration(),io['to']('botmanager')[_0x7b792d(0x25f)](_0x7b792d(0x1bf),config),broadcastToBots(_0x7b792d(0x1bf),JSON['stringify'](config));}function deleteBot(_0x286ac2){const _0x4f674e=_0x2fc8d8;getClientsWithBotID(_0x286ac2)[_0x4f674e(0x255)](_0x512312=>{const _0x2fdf29=_0x4f674e;getSocket(_0x512312['id'])[_0x2fdf29(0x2d6)](!![]),removeClient(_0x512312['id']);}),dbConfig[_0x4f674e(0x2e7)]('bots')[_0x4f674e(0x2df)]({'botID':_0x286ac2})['write'](),logger['full'](_0x4f674e(0x1cc)+_0x286ac2),stopBot(_0x286ac2);try{if(fs['existsSync'](path[_0x4f674e(0x13c)](configpath,_0x4f674e(0x1ad)+_0x286ac2+'-config.json')))fs[_0x4f674e(0x136)](path['join'](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x24d)));if(fs[_0x4f674e(0x238)](path[_0x4f674e(0x13c)](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x188))))fs[_0x4f674e(0x136)](path[_0x4f674e(0x13c)](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x188)));if(fs['existsSync'](path[_0x4f674e(0x13c)](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x134))))fs['unlinkSync'](path['join'](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x134)));if(fs[_0x4f674e(0x238)](path[_0x4f674e(0x13c)](configpath,_0x4f674e(0x1ad)+_0x286ac2+_0x4f674e(0x291))))fs[_0x4f674e(0x136)](path['join'](configpath,'bot-'+_0x286ac2+_0x4f674e(0x291)));}catch(_0x22fdb0){if(_0x22fdb0)logger[_0x4f674e(0x2fe)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x22fdb0);}config=getConfiguration(),io['to'](_0x4f674e(0x185))[_0x4f674e(0x25f)](_0x4f674e(0x1bf),config),broadcastToBots(_0x4f674e(0x1bf),JSON[_0x4f674e(0xf7)](config));}function toggleBot(_0x3b8ee3,_0xb691c4,_0x419841){const _0x4e66af=_0x2fc8d8;dbConfig['get'](_0x4e66af(0x1bf))[_0x4e66af(0x220)]({'botID':_0x3b8ee3})[_0x4e66af(0xf2)]({'status':_0xb691c4})[_0x4e66af(0xf2)]({'live':_0x419841})[_0x4e66af(0x180)]();if(_0xb691c4=='enabled'||_0xb691c4==_0x4e66af(0x181))logger[_0x4e66af(0x2fe)](_0x4e66af(0x22c)+_0x3b8ee3),startBot([_0x3b8ee3,userID],{'cwd':bbpath},function(_0x2b9d56){const _0x4b042c=_0x4e66af;if(_0x2b9d56)logger[_0x4b042c(0x2fe)](_0x2b9d56);});else(_0xb691c4=='disabled'||_0xb691c4==_0x4e66af(0x2b9))&&(logger[_0x4e66af(0x2fe)](_0x4e66af(0x25e)+_0x3b8ee3),stopBot(_0x3b8ee3));config=getConfiguration(),io['to']('botmanager')[_0x4e66af(0x25f)](_0x4e66af(0x1bf),config),broadcastToBots(_0x4e66af(0x1bf),JSON[_0x4e66af(0xf7)](config));}function toggleStatus(_0x430789){const _0x326c52=_0x2fc8d8;let _0x5837b1=dbConfig['get'](_0x326c52(0x1bf))['find']({'botID':_0x430789})[_0x326c52(0x213)](),_0x102fd4;if(_0x5837b1[_0x326c52(0x2f6)]===_0x326c52(0x2de))_0x102fd4=_0x326c52(0x28c);else{if(_0x5837b1['status']===_0x326c52(0x181))_0x102fd4=_0x326c52(0x2b9);else{if(_0x5837b1[_0x326c52(0x2f6)]===_0x326c52(0x2b9))_0x102fd4=_0x326c52(0x181);else{if(_0x5837b1[_0x326c52(0x2f6)]===_0x326c52(0x28c))_0x102fd4='enabled';}}}return _0x102fd4;}function updateStatus(_0x492e60,_0x19c963){const _0x35e196=_0x2fc8d8;dbConfig[_0x35e196(0x2e7)](_0x35e196(0x1bf))[_0x35e196(0x220)]({'botID':_0x492e60})[_0x35e196(0xf2)]({'status':_0x19c963})[_0x35e196(0x180)](),config=getConfiguration(),io['to'](_0x35e196(0x185))[_0x35e196(0x25f)](_0x35e196(0x1bf),config),broadcastToBots(_0x35e196(0x1bf),JSON[_0x35e196(0xf7)](config));}function updateLive(_0x547c0a,_0x397d2b){const _0x55f88f=_0x2fc8d8;dbConfig['get'](_0x55f88f(0x1bf))[_0x55f88f(0x220)]({'botID':_0x547c0a})[_0x55f88f(0xf2)]({'live':_0x397d2b})['write'](),config=getConfiguration(),io['to'](_0x55f88f(0x185))['emit'](_0x55f88f(0x1bf),config),broadcastToBots('bots',JSON[_0x55f88f(0xf7)](config));}function updateBotName(_0x46a6c2,_0x3bcd44){const _0x5084e8=_0x2fc8d8;dbConfig[_0x5084e8(0x2e7)]('bots')['find']({'botID':_0x46a6c2})[_0x5084e8(0xf2)]({'botname':_0x3bcd44})[_0x5084e8(0x180)](),config=getConfiguration(),io['to'](_0x5084e8(0x185))[_0x5084e8(0x25f)]('bots',config),broadcastToBots(_0x5084e8(0x1bf),JSON[_0x5084e8(0xf7)](config));}function updateBotManager(){const _0x4f1a9c=_0x2fc8d8;config=getConfiguration(),io['to'](_0x4f1a9c(0x185))[_0x4f1a9c(0x25f)](_0x4f1a9c(0x1bf),config),broadcastToBots(_0x4f1a9c(0x1bf),JSON['stringify'](config));}function toggleBotMode(_0x2c4849){const _0x2435e7=_0x2fc8d8;if(pid[_0x2c4849])pid[_0x2c4849][_0x2435e7(0xe8)]({'function':_0x2435e7(0x1f3),'args':null});else{const _0x3148e3=configpath+_0x2435e7(0x1ad)+_0x2c4849+_0x2435e7(0x24d),_0x349d48=fs[_0x2435e7(0x278)](_0x3148e3),_0x29ce26=JSON[_0x2435e7(0x218)](_0x349d48),_0x55fa0b=_0x29ce26['bot'][0x0][_0x2435e7(0x1fa)];_0x29ce26[_0x2435e7(0x1ae)][0x0]['headless']=!_0x55fa0b;const _0x558ac3=JSON['stringify'](_0x29ce26,null,0x2);fs['writeFileSync'](_0x3148e3,_0x558ac3),config=getConfiguration(),io['to'](_0x2435e7(0x185))[_0x2435e7(0x25f)](_0x2435e7(0x1bf),config),broadcastToBots(_0x2435e7(0x1bf),JSON['stringify'](config));}}function validateTelegram(_0x51b51){const _0x5e3409=_0x2fc8d8;if(_0x51b51[_0x5e3409(0x2cf)][_0x5e3409(0x18a)]!=settings[_0x5e3409(0x27f)]&&'@'+_0x51b51[_0x5e3409(0x2cf)]['username']!=settings[_0x5e3409(0x27f)]||_0x51b51[_0x5e3409(0x1ee)]['id']!=settings[_0x5e3409(0x1b6)])return sendTelegram(_0x51b51[_0x5e3409(0x1ee)]['id'],_0x5e3409(0x178),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x3e598a=_0x2fc8d8;if(tgBot)tgBot[_0x3e598a(0xe7)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x3e598a(0x19b)]);let _0x2a8f3a=_0x3e598a(0x10e);_0x2a8f3a+='\x0a',_0x2a8f3a+=_0x3e598a(0x15b),_0x2a8f3a+='/disable\x20-\x20disable\x20notifications\x0a',_0x2a8f3a+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2a8f3a+=_0x3e598a(0x21b),_0x2a8f3a+=_0x3e598a(0x2cd),_0x2a8f3a+=_0x3e598a(0x161),_0x2a8f3a+=_0x3e598a(0x154),_0x2a8f3a+=_0x3e598a(0x11f),_0x2a8f3a+=_0x3e598a(0x2a4),_0x2a8f3a+=_0x3e598a(0x2ef),_0x2a8f3a+=_0x3e598a(0x163),_0x2a8f3a+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x2a8f3a+=_0x3e598a(0x26b),_0x2a8f3a+=_0x3e598a(0x147);let _0x17bbbc=_0x3e598a(0x121);_0x17bbbc+='\x0a',_0x17bbbc+=_0x2a8f3a,tgBot[_0x3e598a(0x271)]((_0x151f89,_0xd4afb7)=>{const _0x581dcd=_0x3e598a;logger[_0x581dcd(0x116)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x581dcd(0x288)]('Telegraf\x20error:',_0x151f89);}),tgBot['use'](async(_0xf03ba5,_0x3aa5f7)=>{const _0x21ef4c=_0x3e598a;if(!(!settings['telegramChatId']&&_0xf03ba5[_0x21ef4c(0x266)][_0x21ef4c(0x1a2)][_0x21ef4c(0x2e2)]==_0x21ef4c(0x2e9))){if(!validateTelegram(_0xf03ba5))return;}_0x3aa5f7();}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x1fe),async _0x207907=>{const _0x5db89=_0x3e598a;if(!settings[_0x5db89(0x1b6)])updateSetting(_0x5db89(0x1b6),_0x207907[_0x5db89(0x1ee)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x207907))return;await sendTelegram(_0x207907['chat']['id'],_0x17bbbc);}),tgBot[_0x3e598a(0x146)]('enable',async _0x290042=>{const _0x42f103=_0x3e598a;updateSetting(_0x42f103(0x164),!![]),await sendTelegram(_0x290042[_0x42f103(0x1ee)]['id'],_0x42f103(0x2f5));}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x1e3),async _0xf3480a=>{const _0x1bb0f3=_0x3e598a;await sendTelegram(_0xf3480a[_0x1bb0f3(0x1ee)]['id'],_0x1bb0f3(0x299)),updateSetting('telegramEnabled',![]);}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x13e),async _0x2d27b6=>{const _0x2f2f35=_0x3e598a,_0x28c69c=Markup[_0x2f2f35(0x1eb)]([Markup[_0x2f2f35(0x246)][_0x2f2f35(0x240)](_0x2f2f35(0x2dd),'config_orders'),Markup[_0x2f2f35(0x246)][_0x2f2f35(0x240)]('Alerts',_0x2f2f35(0x1d1)),Markup[_0x2f2f35(0x246)]['callback'](_0x2f2f35(0xe9),_0x2f2f35(0x2bc))]);_0x2d27b6[_0x2f2f35(0x1b0)](_0x2f2f35(0x1ed),_0x28c69c);}),tgBot[_0x3e598a(0x2c1)](_0x3e598a(0x123),async _0x4fc729=>{const _0x4e0661=_0x3e598a;_0x4fc729['editMessageReplyMarkup'](),updateSetting(_0x4e0661(0x106),_0x4e0661(0x1cf)),updateSetting(_0x4e0661(0x164),!![]),await sendTelegram(_0x4fc729[_0x4e0661(0x1ee)]['id'],_0x4e0661(0x17c));}),tgBot[_0x3e598a(0x2c1)](_0x3e598a(0x1d1),async _0x2d7973=>{const _0x145bb7=_0x3e598a;_0x2d7973[_0x145bb7(0x2ec)](),updateSetting(_0x145bb7(0x106),'alerts'),updateSetting(_0x145bb7(0x164),!![]),await sendTelegram(_0x2d7973[_0x145bb7(0x1ee)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x3e598a(0x2c1)](_0x3e598a(0x2bc),async _0x28856d=>{const _0x45bb98=_0x3e598a;_0x28856d[_0x45bb98(0x2ec)](),updateSetting(_0x45bb98(0x106),_0x45bb98(0x284)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x28856d['chat']['id'],_0x45bb98(0x17f));}),tgBot[_0x3e598a(0x146)]('status',async _0x21bb2a=>{const _0xfd8c7e=_0x3e598a,_0x2d141d=getBotsWithMode();let _0x47a2a9=_0xfd8c7e(0xe4);config[_0xfd8c7e(0x255)](_0x3c8d86=>{const _0x4c5741=_0xfd8c7e,_0x3cd6b9=_0x2d141d[_0x4c5741(0x220)](_0x28920c=>_0x28920c[_0x4c5741(0x24a)]==_0x3c8d86[_0x4c5741(0x24a)])[_0x4c5741(0x285)];_0x47a2a9+=_0x4c5741(0x16d)+_0x3c8d86['botID']+':\x20'+_0x3c8d86['status']+_0x4c5741(0x258)+_0x3cd6b9+_0x4c5741(0x258)+_0x3c8d86['live']+'\x0a';}),_0x47a2a9+='\x0a',_0x47a2a9+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x47a2a9+=!settings[_0xfd8c7e(0x164)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x47a2a9+=settings[_0xfd8c7e(0x164)]?settings['telegramEvents']==_0xfd8c7e(0x284)?_0xfd8c7e(0x187):'Notifications\x20types:\x20'+settings['telegramEvents']+_0xfd8c7e(0x1ff):'',await sendTelegram(_0x21bb2a[_0xfd8c7e(0x1ee)]['id'],_0x47a2a9,{'parse_mode':'HTML'});}),tgBot['command'](_0x3e598a(0xfe),async _0x1fb345=>{const _0x302ed5=_0x3e598a,_0x375e4=getEnabledBots();if(_0x375e4['length']==0x0)await sendTelegram(_0x1fb345['chat']['id'],_0x302ed5(0x21e));else{if(_0x375e4[_0x302ed5(0x20c)]>0x1)_0x375e4[_0x302ed5(0x148)]({'botID':_0x302ed5(0x284)});let _0x3785b9=[],_0x2e6224=[];const _0xe39ab9=_0x375e4[_0x302ed5(0x20c)]%0x4==0x0||_0x375e4['length']%0x4==0x3||_0x375e4[_0x302ed5(0x20c)]%0x3==0x1?0x4:0x3;let _0x5c919a=0x0;_0x375e4['forEach']((_0x4b59b8,_0x51bc17)=>{const _0x33371c=_0x302ed5;if(_0x51bc17%_0xe39ab9==0x0)_0x2e6224=[];_0x2e6224[_0x33371c(0x148)](Markup['button'][_0x33371c(0x240)](_0x4b59b8['botID']=='all'?_0x33371c(0x15a):'Bot\x20'+_0x4b59b8[_0x33371c(0x24a)],_0x33371c(0x2f7)+_0x4b59b8[_0x33371c(0x24a)])),_0x51bc17%_0xe39ab9==0x0&&(_0x3785b9[_0x5c919a]=_0x2e6224,_0x5c919a++);});const _0x357396=Markup['inlineKeyboard'](_0x3785b9);_0x1fb345[_0x302ed5(0x1b0)](_0x302ed5(0x230),_0x357396);}}),tgBot[_0x3e598a(0x2c1)](/restart_(.+)/,async _0x494675=>{const _0x3cf845=_0x3e598a,_0x438d12=_0x494675['match'][0x1];_0x494675[_0x3cf845(0x2ec)](),_0x438d12==_0x3cf845(0x284)?config[_0x3cf845(0x255)](_0x242f68=>{const _0x252b2e=_0x3cf845;restartBot(_0x242f68[_0x252b2e(0x24a)]);}):restartBot(_0x438d12);}),tgBot[_0x3e598a(0x146)]('on',async _0x455de5=>{const _0x67689e=_0x3e598a,_0x4bbdce=getDisabledBots();if(_0x4bbdce[_0x67689e(0x20c)]==0x0)await sendTelegram(_0x455de5[_0x67689e(0x1ee)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x4bbdce[_0x67689e(0x20c)]>0x1)_0x4bbdce[_0x67689e(0x148)]({'botID':_0x67689e(0x284)});let _0x3ef2f1=[],_0x5915e0=[];const _0x44a220=_0x4bbdce[_0x67689e(0x20c)]%0x4==0x0||_0x4bbdce['length']%0x4==0x3||_0x4bbdce[_0x67689e(0x20c)]%0x3==0x1?0x4:0x3;let _0x5b04fb=0x0;_0x4bbdce[_0x67689e(0x255)]((_0x476765,_0x42a505)=>{const _0x3fabad=_0x67689e;if(_0x42a505%_0x44a220==0x0)_0x5915e0=[];_0x5915e0[_0x3fabad(0x148)](Markup['button'][_0x3fabad(0x240)](_0x476765[_0x3fabad(0x24a)]==_0x3fabad(0x284)?_0x3fabad(0x15a):_0x3fabad(0x16d)+_0x476765[_0x3fabad(0x24a)],_0x3fabad(0x172)+_0x476765[_0x3fabad(0x24a)])),_0x42a505%_0x44a220==0x0&&(_0x3ef2f1[_0x5b04fb]=_0x5915e0,_0x5b04fb++);});const _0xc42b25=Markup[_0x67689e(0x1eb)](_0x3ef2f1);_0x455de5[_0x67689e(0x1b0)](_0x67689e(0x10d),_0xc42b25);}}),tgBot[_0x3e598a(0x2c1)](/on_(.+)/,async _0x2b8f78=>{const _0x39a902=_0x3e598a,_0x23538f=_0x2b8f78[_0x39a902(0x26c)][0x1];_0x2b8f78['editMessageReplyMarkup']();if(_0x23538f==_0x39a902(0x284)){const _0x26a028=getDisabledBots();await sendTelegram(_0x2b8f78[_0x39a902(0x1ee)]['id'],_0x39a902(0x142)),_0x26a028[_0x39a902(0x255)](_0x2a2fa6=>{const _0x32036d=_0x39a902;if(_0x2a2fa6[_0x32036d(0x24a)]!=_0x32036d(0x284))toggleBot(_0x2a2fa6[_0x32036d(0x24a)],toggleStatus(_0x2a2fa6[_0x32036d(0x24a)]),_0x32036d(0xe5));});}else await sendTelegram(_0x2b8f78[_0x39a902(0x1ee)]['id'],_0x39a902(0x264)+_0x23538f),toggleBot(_0x23538f,toggleStatus(_0x23538f),'stopped');}),tgBot['command'](_0x3e598a(0x253),async _0x126fbb=>{const _0x3da87c=_0x3e598a,_0x30f108=getEnabledBots();if(_0x30f108[_0x3da87c(0x20c)]==0x0)await sendTelegram(_0x126fbb[_0x3da87c(0x1ee)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x30f108[_0x3da87c(0x20c)]>0x1)_0x30f108[_0x3da87c(0x148)]({'botID':_0x3da87c(0x284)});let _0x70bda=[],_0x31c95f=[];const _0x531b46=_0x30f108['length']%0x4==0x0||_0x30f108[_0x3da87c(0x20c)]%0x4==0x3||_0x30f108[_0x3da87c(0x20c)]%0x3==0x1?0x4:0x3;let _0x235106=0x0;_0x30f108[_0x3da87c(0x255)]((_0x3733eb,_0x44a790)=>{const _0x318e43=_0x3da87c;if(_0x44a790%_0x531b46==0x0)_0x31c95f=[];_0x31c95f['push'](Markup[_0x318e43(0x246)][_0x318e43(0x240)](_0x3733eb[_0x318e43(0x24a)]==_0x318e43(0x284)?_0x318e43(0x15a):_0x318e43(0x16d)+_0x3733eb['botID'],_0x318e43(0x1e2)+_0x3733eb['botID'])),_0x44a790%_0x531b46==0x0&&(_0x70bda[_0x235106]=_0x31c95f,_0x235106++);});const _0x5c9002=Markup['inlineKeyboard'](_0x70bda);_0x126fbb[_0x3da87c(0x1b0)](_0x3da87c(0x15f),_0x5c9002);}}),tgBot['action'](/off_(.+)/,async _0x246be7=>{const _0x23d1c0=_0x3e598a,_0x5b1e2a=_0x246be7[_0x23d1c0(0x26c)][0x1];_0x246be7[_0x23d1c0(0x2ec)]();if(_0x5b1e2a==_0x23d1c0(0x284)){const _0x168197=getEnabledBots();await sendTelegram(_0x246be7[_0x23d1c0(0x1ee)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x168197[_0x23d1c0(0x255)](_0x327733=>{const _0x3714c7=_0x23d1c0;if(_0x327733[_0x3714c7(0x24a)]!=_0x3714c7(0x284))toggleBot(_0x327733[_0x3714c7(0x24a)],toggleStatus(_0x327733[_0x3714c7(0x24a)]),_0x3714c7(0xe5));});}else await sendTelegram(_0x246be7[_0x23d1c0(0x1ee)]['id'],_0x23d1c0(0x242)+_0x5b1e2a),toggleBot(_0x5b1e2a,toggleStatus(_0x5b1e2a),_0x23d1c0(0xe5));}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x2ee),async _0x521021=>{const _0xfd339a=_0x3e598a,_0x190a0e=getEnabledBots();if(_0x190a0e[_0xfd339a(0x20c)]==0x0)await sendTelegram(_0x521021[_0xfd339a(0x1ee)]['id'],_0xfd339a(0x21e));else{if(_0x190a0e[_0xfd339a(0x20c)]>0x1){let _0x39a2c8=[],_0x5bcb9f=[];const _0x1a7e31=_0x190a0e['length']%0x4==0x0||_0x190a0e[_0xfd339a(0x20c)]%0x4==0x3||_0x190a0e['length']%0x3==0x1?0x4:0x3;let _0x4d335e=0x0;_0x190a0e[_0xfd339a(0x255)]((_0x2c0a3c,_0x403846)=>{const _0x3cba5b=_0xfd339a;if(_0x403846%_0x1a7e31==0x0)_0x5bcb9f=[];_0x5bcb9f[_0x3cba5b(0x148)](Markup[_0x3cba5b(0x246)][_0x3cba5b(0x240)]('Bot\x20'+_0x2c0a3c[_0x3cba5b(0x24a)],_0x3cba5b(0x223)+_0x2c0a3c[_0x3cba5b(0x24a)])),_0x403846%_0x1a7e31==0x0&&(_0x39a2c8[_0x4d335e]=_0x5bcb9f,_0x4d335e++);});const _0xb3906d=Markup['inlineKeyboard'](_0x39a2c8);_0x521021[_0xfd339a(0x1b0)](_0xfd339a(0x2bb),_0xb3906d);}else{const _0xc4ae82=_0x190a0e[0x0][_0xfd339a(0x24a)];if(pid[_0xc4ae82])pid[_0xc4ae82][_0xfd339a(0xe8)]({'function':_0xfd339a(0x244),'args':null});}}}),tgBot[_0x3e598a(0x2c1)](/metrics_(.+)/,async _0x5adfe0=>{const _0x2bbc26=_0x3e598a,_0x5639fd=_0x5adfe0[_0x2bbc26(0x26c)][0x1];_0x5adfe0[_0x2bbc26(0x2ec)]();if(pid[_0x5639fd])pid[_0x5639fd][_0x2bbc26(0xe8)]({'function':_0x2bbc26(0x244),'args':null});}),tgBot[_0x3e598a(0x146)]('portfolio',async _0x5b86e5=>{const _0x352cdd=_0x3e598a,_0x1156a0=getEnabledBots();if(_0x1156a0[_0x352cdd(0x20c)]==0x0)await sendTelegram(_0x5b86e5[_0x352cdd(0x1ee)]['id'],_0x352cdd(0x21e));else{if(_0x1156a0['length']>0x1){let _0x3ce518=[],_0x121849=[];const _0x2e787d=_0x1156a0[_0x352cdd(0x20c)]%0x4==0x0||_0x1156a0[_0x352cdd(0x20c)]%0x4==0x3||_0x1156a0['length']%0x3==0x1?0x4:0x3;let _0xb0bb65=0x0;_0x1156a0['forEach']((_0x27f3b2,_0x22000c)=>{const _0x2f9be3=_0x352cdd;if(_0x22000c%_0x2e787d==0x0)_0x121849=[];_0x121849[_0x2f9be3(0x148)](Markup[_0x2f9be3(0x246)]['callback'](_0x2f9be3(0x16d)+_0x27f3b2[_0x2f9be3(0x24a)],_0x2f9be3(0x1e8)+_0x27f3b2[_0x2f9be3(0x24a)])),_0x22000c%_0x2e787d==0x0&&(_0x3ce518[_0xb0bb65]=_0x121849,_0xb0bb65++);});const _0x5cdc92=Markup[_0x352cdd(0x1eb)](_0x3ce518);_0x5b86e5[_0x352cdd(0x1b0)](_0x352cdd(0x137),_0x5cdc92);}else{const _0x2bb905=_0x1156a0[0x0][_0x352cdd(0x24a)];if(pid[_0x2bb905])pid[_0x2bb905][_0x352cdd(0xe8)]({'function':_0x352cdd(0x217),'args':null});}}}),tgBot[_0x3e598a(0x2c1)](/portfolio_(.+)/,async _0x54e963=>{const _0x7687ad=_0x3e598a,_0x5afece=_0x54e963[_0x7687ad(0x26c)][0x1];_0x54e963[_0x7687ad(0x2ec)]();if(pid[_0x5afece])pid[_0x5afece][_0x7687ad(0xe8)]({'function':_0x7687ad(0x217),'args':null});}),tgBot['command'](_0x3e598a(0x266),async _0x17aac4=>{const _0xd49160=_0x3e598a;await getMessages();if(!updateAvailable)await sendTelegram(_0x17aac4[_0xd49160(0x1ee)]['id'],_0xd49160(0x170));else{if(!validInstallation)await sendTelegram(_0x17aac4[_0xd49160(0x1ee)]['id'],_0xd49160(0x158));else{const _0x3b5782=Markup[_0xd49160(0x1eb)]([Markup[_0xd49160(0x246)][_0xd49160(0x240)](_0xd49160(0x18b),_0xd49160(0x1b4)),Markup[_0xd49160(0x246)][_0xd49160(0x240)]('No',_0xd49160(0x1e1))]);_0x17aac4[_0xd49160(0x1b0)](_0xd49160(0xfc),_0x3b5782);}}}),tgBot[_0x3e598a(0x2c1)](/update_(.+)/,async _0x3b290f=>{const _0x247bae=_0x3e598a,_0x777bd0=_0x3b290f[_0x247bae(0x26c)][0x1];_0x3b290f[_0x247bae(0x2ec)](),_0x777bd0=='yes'&&(await sendTelegram(_0x3b290f['chat']['id'],_0x247bae(0x16c)),updateBB('update')),_0x777bd0=='no'&&await sendTelegram(_0x3b290f[_0x247bae(0x1ee)]['id'],_0x247bae(0x222));}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x191),async _0x308d95=>{const _0x5de492=_0x3e598a;if(!validInstallation)await sendTelegram(_0x308d95['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x3fb1a8=Markup[_0x5de492(0x1eb)]([Markup[_0x5de492(0x246)]['callback'](_0x5de492(0x18b),_0x5de492(0x124)),Markup['button'][_0x5de492(0x240)]('No','reinstall_no')]);_0x308d95[_0x5de492(0x1b0)](_0x5de492(0x1e4),_0x3fb1a8);}}),tgBot[_0x3e598a(0x2c1)](/reinstall_(.+)/,async _0x5887b3=>{const _0x23d780=_0x3e598a,_0x573df5=_0x5887b3['match'][0x1];_0x5887b3[_0x23d780(0x2ec)](),_0x573df5==_0x23d780(0x2f1)&&(await sendTelegram(_0x5887b3[_0x23d780(0x1ee)]['id'],_0x23d780(0x12e)),updateBB(_0x23d780(0x191))),_0x573df5=='no'&&await sendTelegram(_0x5887b3[_0x23d780(0x1ee)]['id'],_0x23d780(0x221));}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x229),async _0x1ed282=>{const _0xcecf53=_0x3e598a,_0x38dfd5=getBotsWithMode();if(_0x38dfd5['length']==0x0)await sendTelegram(_0x1ed282[_0xcecf53(0x1ee)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x3848cf=[],_0x308bba=[];const _0x4bf29a=0x2;let _0x1f6eb4=0x0;_0x38dfd5[_0xcecf53(0x255)]((_0x9de2a7,_0x29d676)=>{const _0x344238=_0xcecf53;if(_0x29d676%_0x4bf29a==0x0)_0x308bba=[];_0x308bba[_0x344238(0x148)](Markup['button'][_0x344238(0x240)](_0x344238(0x16d)+_0x9de2a7['botID']+'\x20('+_0x9de2a7[_0x344238(0x285)]+')',_0x344238(0x2aa)+_0x9de2a7['botID'])),_0x29d676%_0x4bf29a==0x0&&(_0x3848cf[_0x1f6eb4]=_0x308bba,_0x1f6eb4++);});const _0x16a028=Markup[_0xcecf53(0x1eb)](_0x3848cf);_0x1ed282[_0xcecf53(0x1b0)](_0xcecf53(0x189),_0x16a028);}}),tgBot['action'](/toggle_(.+)/,async _0x5ebb80=>{const _0x1533c0=_0x3e598a,_0x44f26f=_0x5ebb80[_0x1533c0(0x26c)][0x1];_0x5ebb80['editMessageReplyMarkup']();const _0x1ee567=getBotsWithMode(),_0x77c832=_0x1ee567[_0x1533c0(0x220)](_0x3cae50=>_0x3cae50[_0x1533c0(0x24a)]==_0x44f26f),_0x39c62f=_0x77c832[_0x1533c0(0x285)]==_0x1533c0(0x160)?'manual':_0x1533c0(0x160);await sendTelegram(_0x5ebb80[_0x1533c0(0x1ee)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x44f26f+_0x1533c0(0x2e1)+_0x39c62f+_0x1533c0(0x2cb)),toggleBotMode(_0x44f26f);}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x1b9),async _0x4484cb=>{const _0x1e9e4e=_0x3e598a;let _0x601a4d='';config[_0x1e9e4e(0x255)](_0x4e314e=>{const _0x5885ca=_0x1e9e4e;_0x601a4d+='Bot\x20'+_0x4e314e[_0x5885ca(0x24a)]+':\x20'+_0x4e314e[_0x5885ca(0x1de)]+'\x0a';}),await sendTelegram(_0x4484cb[_0x1e9e4e(0x1ee)]['id'],_0x601a4d,{'parse_mode':_0x1e9e4e(0x2ba)});}),tgBot[_0x3e598a(0x146)](_0x3e598a(0x2f8),async _0x420a7a=>{const _0xe42a22=_0x3e598a;await sendTelegram(_0x420a7a[_0xe42a22(0x1ee)]['id'],_0x2a8f3a);}),process['once'](_0x3e598a(0x1fc),()=>tgBot[_0x3e598a(0xe7)](_0x3e598a(0x1fc))),process['once'](_0x3e598a(0x12f),()=>tgBot[_0x3e598a(0xe7)](_0x3e598a(0x12f))),tgBot[_0x3e598a(0x216)]();}}function disableTelegram(){const _0x47b717=_0x2fc8d8;tgBot&&tgBot[_0x47b717(0xe7)]();}async function sendTelegram(_0x3a7eaf,_0x596ff4,_0x316980){const _0x3a0046=_0x2fc8d8;_0x316980={..._0x316980,'disable_web_page_preview':!![]};try{await tgBot[_0x3a0046(0x22b)][_0x3a0046(0x1c8)](_0x3a7eaf,_0x596ff4,_0x316980);}catch(_0x41340f){console[_0x3a0046(0x2b7)](_0x3a0046(0x2b8),_0x41340f);}}async function sendTelegramBot(_0x193168,_0x3a6bbe){const _0x10b5cf=_0x2fc8d8;if(settings[_0x10b5cf(0x164)]){if(settings[_0x10b5cf(0x106)]==_0x10b5cf(0x284)||(_0x3a6bbe[_0x10b5cf(0x2e8)]==_0x10b5cf(0x1ce)||_0x3a6bbe[_0x10b5cf(0x2e8)]==_0x10b5cf(0x143)||_0x3a6bbe[_0x10b5cf(0x2e8)]==_0x10b5cf(0x1c9))&&settings[_0x10b5cf(0x106)]==_0x10b5cf(0x167)||_0x3a6bbe[_0x10b5cf(0x2e8)]==_0x10b5cf(0x171)&&settings['telegramEvents']==_0x10b5cf(0x1cf)){if(tgBot&&settings[_0x10b5cf(0x1b6)]){if(_0x3a6bbe[_0x10b5cf(0x183)])await sendTelegram(settings['telegramChatId'],_0x3a6bbe['botname']+_0x10b5cf(0x210)+_0x3a6bbe[_0x10b5cf(0x2f3)]);else await sendTelegram(settings[_0x10b5cf(0x1b6)],_0x10b5cf(0x16d)+_0x193168+_0x10b5cf(0x210)+_0x3a6bbe[_0x10b5cf(0x2f3)]);}}}}async function sendTelegramMsg(_0x47c035,_0x202681=_0x2fc8d8(0x2ba)){const _0x54af36=_0x2fc8d8;return settings[_0x54af36(0x164)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x54af36(0x1b6)],_0x47c035,{'parse_mode':_0x202681}),!![]):![];}function getDeviceWithIp(_0x2db8e0){const _0x515d1a=_0x2fc8d8;return devices[_0x515d1a(0x220)](_0xf18c7d=>_0xf18c7d['ip']===_0x2db8e0);}async function temporaryAccess2FA(_0x257216,_0x322872){const _0x45f89a=_0x2fc8d8;let _0x2c6ee1=new Date(),_0x5c56f8=![];if(lastIpApproval){if(_0x2c6ee1-lastIpApproval<0x1388)_0x5c56f8=!![];}lastIpApproval=new Date();if(_0x5c56f8)return;if(tgBot&&settings[_0x45f89a(0x1b6)]){const _0xd3387=uuidRandom();tmpStorage[_0xd3387]={'uuid':_0x257216,'externalip':_0x322872};const _0x1d332c=Markup[_0x45f89a(0x1eb)]([Markup['button'][_0x45f89a(0x240)](_0x45f89a(0x1ec),_0x45f89a(0x2d2)+_0xd3387),Markup[_0x45f89a(0x246)][_0x45f89a(0x240)]('15\x20min',_0x45f89a(0x297)+_0xd3387),Markup[_0x45f89a(0x246)][_0x45f89a(0x240)]('30\x20min',_0x45f89a(0x25b)+_0xd3387),Markup[_0x45f89a(0x246)]['callback'](_0x45f89a(0x175),'tempaccess_reject_'+_0xd3387)]);await sendTelegram(settings[_0x45f89a(0x1b6)],_0x45f89a(0x2d1)+normalizeIP(_0x322872)[_0x45f89a(0x203)]+'\x20?',_0x1d332c),tgBot[_0x45f89a(0x2c1)](/tempaccess_(.+)_(.+)/,async _0x17632d=>{const _0x2c0580=_0x45f89a,_0x4f84d8=_0x17632d[_0x2c0580(0x26c)][0x1],_0x22d69a=_0x17632d[_0x2c0580(0x26c)][0x2],{uuid:_0x5d41d4,externalip:_0x54a61a}=tmpStorage[_0x22d69a];delete tmpStorage[_0x22d69a],_0x17632d[_0x2c0580(0x2ec)](),devices[_0x5d41d4][_0x2c0580(0x236)]={'clientip':_0x54a61a,'timestamp':new Date()[_0x2c0580(0x162)](),'expiry':_0x4f84d8},_0x4f84d8!=_0x2c0580(0x175)?(await sendTelegram(_0x17632d[_0x2c0580(0x1ee)]['id'],_0x2c0580(0x1c7)+_0x4f84d8+'\x20minutes',{'parse_mode':_0x2c0580(0x2ba)}),io['to'](_0x5d41d4)[_0x2c0580(0x25f)](_0x2c0580(0x2f6),{'access':{'allow':![],'reason':_0x2c0580(0x262),'token':null}})):(await sendTelegram(_0x17632d['chat']['id'],_0x2c0580(0x1b5)),io['to'](_0x5d41d4)['emit'](_0x2c0580(0x2f6),{'access':{'allow':![],'reason':_0x2c0580(0x27b),'token':null}}));});}}async function loginAccess2FA(_0x1c99e5,_0x2ecefc){const _0x2b94ad=_0x2fc8d8;if(tgBot&&settings[_0x2b94ad(0x1b6)]){const _0x5503d9=uuidRandom();tmpStorage[_0x5503d9]={'uuid':_0x1c99e5,'externalip':_0x2ecefc};const _0x565728=Markup[_0x2b94ad(0x1eb)]([Markup[_0x2b94ad(0x246)][_0x2b94ad(0x240)](_0x2b94ad(0x212),_0x2b94ad(0x1b8)+loginExpiry+'_'+_0x5503d9),Markup[_0x2b94ad(0x246)][_0x2b94ad(0x240)](_0x2b94ad(0x175),_0x2b94ad(0x29e)+_0x5503d9)]);await sendTelegram(settings['telegramChatId'],_0x2b94ad(0x2f9)+normalizeIP(_0x2ecefc)[_0x2b94ad(0x203)]+'\x20?',_0x565728),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x575c92=>{const _0x353308=_0x2b94ad,_0x5c7c44=_0x575c92[_0x353308(0x26c)][0x1],_0x46f06d=_0x575c92[_0x353308(0x26c)][0x2],{uuid:_0x227a8c,externalip:_0x36fea1}=tmpStorage[_0x46f06d];delete tmpStorage[_0x46f06d],_0x575c92[_0x353308(0x2ec)](),devices[_0x227a8c][_0x353308(0x16e)]={'clientip':_0x36fea1,'timestamp':new Date()['getTime'](),'expiry':_0x5c7c44},_0x5c7c44!=_0x353308(0x175)?(await sendTelegram(_0x575c92[_0x353308(0x1ee)]['id'],_0x353308(0x219),{'parse_mode':_0x353308(0x2ba)}),io['to'](_0x227a8c)[_0x353308(0x25f)](_0x353308(0x2f6),{'access':{'allow':![],'reason':_0x353308(0x262),'token':null}})):(await sendTelegram(_0x575c92[_0x353308(0x1ee)]['id'],_0x353308(0x2a8)),io['to'](_0x227a8c)[_0x353308(0x25f)](_0x353308(0x2f6),{'access':{'allow':![],'reason':_0x353308(0x2bd),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x55a658=_0x2fc8d8;return dbConfig[_0x55a658(0x2e7)](_0x55a658(0x1bf))['sortBy'](_0x55a658(0x24a))[_0x55a658(0x292)]({'status':_0x55a658(0x2de)})[_0x55a658(0x213)]()||[];}function getDisabledBots(){const _0x490b31=_0x2fc8d8;return dbConfig['get'](_0x490b31(0x1bf))['sortBy']('botID')['filter']({'status':_0x490b31(0x28c)})[_0x490b31(0x213)]()||[];}function getBotAttributes(_0x1d38a1){const _0x5119fa=_0x2fc8d8;let _0x3996cc={};const _0x1a4248=configpath+_0x5119fa(0x1ad)+_0x1d38a1+_0x5119fa(0x24d),_0x4ba87b=fs[_0x5119fa(0x238)](_0x1a4248);if(_0x4ba87b){const _0x1042e3=fs[_0x5119fa(0x278)](_0x1a4248);try{const _0x38c23d=JSON[_0x5119fa(0x218)](_0x1042e3),_0xae92d4=_0x38c23d?_0x38c23d['bot'][0x0][_0x5119fa(0x1fa)]:![];_0x3996cc['mode']=_0xae92d4?_0x5119fa(0x160):_0x5119fa(0x2a1),_0x3996cc[_0x5119fa(0x1de)]=_0x38c23d?_0x38c23d[_0x5119fa(0x1ae)][0x0][_0x5119fa(0x1de)]:_0x5119fa(0x16d)+_0x1d38a1;}catch(_0x54540a){_0x3996cc['mode']=_0x5119fa(0x2a1),_0x3996cc[_0x5119fa(0x1de)]='Bot\x20'+_0x1d38a1;}}else _0x3996cc[_0x5119fa(0x285)]=_0x5119fa(0x2a1),_0x3996cc[_0x5119fa(0x1de)]=_0x5119fa(0x16d)+_0x1d38a1;return _0x3996cc;}function getBotsWithMode(){const _0x5671dc=_0x2fc8d8,_0x1ddc19=dbConfig[_0x5671dc(0x2e7)](_0x5671dc(0x1bf))[_0x5671dc(0x18e)](_0x5671dc(0x24a))['value']()||[];return _0x1ddc19[_0x5671dc(0x255)](_0x2b1d49=>{const _0x5cd912=_0x5671dc;let _0x686b4d=getBotAttributes(_0x2b1d49['botID']);_0x2b1d49[_0x5cd912(0x285)]=_0x686b4d[_0x5cd912(0x285)];}),_0x1ddc19;}function getBotExchanges(){const _0x44b77f=_0x2fc8d8;let _0x5def27=[];const _0x336399=dbConfig['get'](_0x44b77f(0x1bf))[_0x44b77f(0x18e)](_0x44b77f(0x24a))[_0x44b77f(0x213)]()||[];_0x336399[_0x44b77f(0x255)](_0x1383e6=>{const _0x47abab=_0x44b77f;if(_0x1383e6[_0x47abab(0x2f6)]==_0x47abab(0x2de)){const _0x1d1fa5=configpath+_0x47abab(0x1ad)+_0x1383e6['botID']+_0x47abab(0x24d),_0x1f778a=fs[_0x47abab(0x238)](_0x1d1fa5);let _0x128e90;if(_0x1f778a){const _0x5c7bdb=fs['readFileSync'](_0x1d1fa5);try{const _0x4cf2bd=JSON[_0x47abab(0x218)](_0x5c7bdb);_0x128e90=_0x4cf2bd?_0x4cf2bd['bot'][0x0][_0x47abab(0x153)]:null;}catch(_0x4bbce8){}}if(_0x128e90)_0x5def27[_0x47abab(0x148)](_0x128e90);}});const _0x32f6bc=[...new Set(_0x5def27)][_0x44b77f(0x2d8)]();return _0x32f6bc;}async function initUser(){const _0x1c4164=_0x2fc8d8;if(!settings[_0x1c4164(0x1af)]){const _0x23354b=uuidRandom();mixpanel[_0x1c4164(0x26d)](_0x23354b),updateSetting(_0x1c4164(0x1af),_0x23354b);}}async function initSecure(){const _0x37902a=_0x2fc8d8;let _0x1ac23e=getSecure();if(!_0x1ac23e[_0x37902a(0x1b7)]('secret')){let _0xf49887=await generateKeys();_0x1ac23e[_0x37902a(0x1e7)]=_0xf49887[_0x37902a(0x1e7)],_0x1ac23e[_0x37902a(0x252)]=_0xf49887[_0x37902a(0x252)],_0x1ac23e['secret']=crypto[_0x37902a(0x287)](0x20)[_0x37902a(0x283)]('hex');;storeSecure(_0x1ac23e);}}function getSettings(){const _0x12b447=_0x2fc8d8;return dbSettings[_0x12b447(0x2e7)](_0x12b447(0x12b))[_0x12b447(0x213)]()||{};}function getSecure(){const _0x3c4efb=_0x2fc8d8;return dbSecure[_0x3c4efb(0x2e7)](_0x3c4efb(0xff))[_0x3c4efb(0x213)]()||{};}function getBlacklist(){const _0x2e28cf=_0x2fc8d8;return dbSecure['get'](_0x2e28cf(0x1cb))[_0x2e28cf(0x213)]()||[];}function broadcastToBots(_0x166423,_0x164445){const _0x55ecd3=_0x2fc8d8;config[_0x55ecd3(0x255)](_0x329622=>{const _0x47b644=_0x55ecd3;if(_0x329622[_0x47b644(0x2f6)]==_0x47b644(0x2de)&&_0x329622[_0x47b644(0x2c6)]==_0x47b644(0x129)||_0x329622[_0x47b644(0x2f6)]==_0x47b644(0x181)&&_0x329622[_0x47b644(0x2c6)]==_0x47b644(0x129)){if(pid[_0x329622[_0x47b644(0x24a)]])pid[_0x329622['botID']][_0x47b644(0xe8)]({[_0x166423]:_0x164445});}});}async function storeSettings(_0x15795f,_0x37390d=![]){const _0x414697=_0x2fc8d8;_0x15795f={...settings,..._0x15795f};if(_0x37390d&&_0x15795f[_0x414697(0x2be)]!=_0x414697(0x28b)&&_0x15795f['bbPassword']!=_0x414697(0x1c0)&&_0x15795f['bbPassword']!=''){const _0xc75bca=crypt[_0x414697(0x174)](secure[_0x414697(0x252)],_0x15795f[_0x414697(0x2be)])[_0x414697(0x1a2)][_0x414697(0x289)](_0x414697(0x1f0))[0x0],_0x1da721=bcrypt[_0x414697(0x248)](_0xc75bca,saltRounds);_0x15795f={..._0x15795f,'bbPassword':_0x1da721};}if(_0x37390d&&_0x15795f[_0x414697(0x19b)]!=_0x414697(0x28b)&&_0x15795f[_0x414697(0x19b)]!=_0x414697(0x1c0)&&_0x15795f['telegramToken']!=''){const _0x3e31f1=crypt['decrypt'](secure[_0x414697(0x252)],_0x15795f[_0x414697(0x19b)])[_0x414697(0x1a2)]['split'](_0x414697(0x1f0))[0x0];_0x15795f={..._0x15795f,'telegramToken':_0x3e31f1};}if(_0x37390d&&_0x15795f['marketcapApi']!='************'&&_0x15795f[_0x414697(0x1ca)]!=_0x414697(0x1c0)&&_0x15795f[_0x414697(0x1ca)]!=''){const _0x34a6bc=crypt['decrypt'](secure[_0x414697(0x252)],_0x15795f[_0x414697(0x1ca)])[_0x414697(0x1a2)]['split']('|@|')[0x0];_0x15795f={..._0x15795f,'marketcapApi':_0x34a6bc};}const _0x59a725=_0x15795f['telegramToken']!=_0x414697(0x28b)&&_0x15795f[_0x414697(0x19b)]!=settings[_0x414697(0x19b)]||_0x15795f[_0x414697(0x27f)]!=settings[_0x414697(0x27f)],_0x1760f7=_0x15795f[_0x414697(0x19b)]==''||_0x15795f['telegramUsername']=='',_0x1b758d=_0x15795f[_0x414697(0x1ca)]&&_0x15795f['marketcapApi']!='************'&&_0x15795f[_0x414697(0x1ca)]!=settings[_0x414697(0x19b)];_0x59a725&&(_0x15795f[_0x414697(0x1b6)]=null,_0x15795f[_0x414697(0x106)]=_0x414697(0x284));for(const [_0x4a35a4,_0x3d49b9]of Object['entries'](_0x15795f)){if(_0x4a35a4==_0x414697(0x19b)&&_0x3d49b9==_0x414697(0x28b)){_0x15795f[_0x414697(0x19b)]=settings['telegramToken'];continue;};if(_0x4a35a4==_0x414697(0x2be)&&_0x3d49b9=='************'){_0x15795f[_0x414697(0x2be)]=settings['bbPassword'];continue;};if(_0x4a35a4==_0x414697(0x1ca)&&_0x3d49b9=='************'){_0x15795f[_0x414697(0x1ca)]=settings[_0x414697(0x1ca)];continue;};dbSettings[_0x414697(0x1e6)]('settings.'+_0x4a35a4,_0x3d49b9)[_0x414697(0x180)]();}settings=_0x15795f,io['to'](_0x414697(0x185))['emit'](_0x414697(0x12b),cleanSettings()),broadcastToBots('timeshift',settings[_0x414697(0x228)]),broadcastToBots(_0x414697(0x1dd),settings['onepagemode']),broadcastToBots(_0x414697(0x1ca),settings[_0x414697(0x1ca)]);if(_0x59a725&&!_0x1760f7)initTelegram();if(_0x59a725&&_0x1760f7)disableTelegram();getAllClients()[_0x414697(0x255)](_0x5f4c41=>{const _0x27a70f=_0x414697;getSocket(_0x5f4c41['id'])['emit']('status',{'access':{'allow':![],'reason':_0x27a70f(0x262),'token':null}});}),_0x1b758d&&(await sleep(0xbb8),testMarketcapApi(_0x15795f[_0x414697(0x1ca)]));}async function testMarketcapApi(_0x1f628c){const _0x5d9e1a=_0x2fc8d8,_0x6452d6=[_0x5d9e1a(0x1a7),_0x5d9e1a(0x275)];try{await axios[_0x5d9e1a(0x2e7)](_0x5d9e1a(0xf4),{'headers':{'X-CMC_PRO_API_KEY':_0x1f628c},'params':{'symbol':_0x6452d6[_0x5d9e1a(0x283)]()}});}catch(_0x2d40e8){_0x2d40e8[_0x5d9e1a(0x283)]()[_0x5d9e1a(0x227)](_0x5d9e1a(0x11c))?(io['to'](_0x5d9e1a(0x185))[_0x5d9e1a(0x25f)](_0x5d9e1a(0x2fd),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x5d9e1a(0x2fe)](_0x5d9e1a(0x14c))):(io['to']('botmanager')[_0x5d9e1a(0x25f)](_0x5d9e1a(0x2fd),_0x5d9e1a(0x202)),logger['full']('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger['debug'](_0x5d9e1a(0x2a5),_0x2d40e8['toString']()+_0x5d9e1a(0x209)+_0x2d40e8[_0x5d9e1a(0x1f7)]));return;}logger[_0x5d9e1a(0x288)](_0x5d9e1a(0x1c3));}function updateSetting(_0x628ae0,_0x48b3c8){const _0x42f559=_0x2fc8d8;dbSettings['set'](_0x42f559(0x10a)+_0x628ae0,_0x48b3c8)[_0x42f559(0x180)](),settings=getSettings(),io['to'](_0x42f559(0x185))['emit'](_0x42f559(0x12b),cleanSettings());}function storeSecure(_0x1e1b13){const _0x1cf280=_0x2fc8d8;dbSecure[_0x1cf280(0x2e7)](_0x1cf280(0xff))[_0x1cf280(0x148)](_0x1e1b13)[_0x1cf280(0x180)](),secure=_0x1e1b13;}function addBlacklist(_0x51d1b0){const _0x53dad9=_0x2fc8d8;cleanBlacklist();let _0x1d261b;devices[_0x51d1b0]['telegramIpApproval']?_0x1d261b=Math[_0x53dad9(0x197)](devices[_0x51d1b0][_0x53dad9(0x236)]['expiry'],loginExpiry):_0x1d261b=loginExpiry,dbSecure[_0x53dad9(0x2e7)]('blacklist')[_0x53dad9(0x148)]({'expiry':new Date()[_0x53dad9(0x162)]()+_0x1d261b*0x3c*0x3e8,'token':devices[_0x51d1b0][_0x53dad9(0x2c9)]['token']})['write'](),blacklist=dbSecure[_0x53dad9(0x2e7)](_0x53dad9(0x1cb))['value']();}function cleanBlacklist(){const _0x3a0b84=_0x2fc8d8;let _0x57179f=dbSecure[_0x3a0b84(0x2e7)]('blacklist')[_0x3a0b84(0x132)]()['value'](),_0x77cdf=new Date()[_0x3a0b84(0x162)]();_0x57179f[_0x3a0b84(0x255)](_0x557561=>{const _0x11e23f=_0x3a0b84;_0x557561[_0x11e23f(0x1ef)]<_0x77cdf&&dbSecure[_0x11e23f(0x2e7)](_0x11e23f(0x1cb))[_0x11e23f(0x2df)]({'expiry':_0x557561[_0x11e23f(0x1ef)]})[_0x11e23f(0x180)]();});}function initStates(){const _0x4b382b=_0x2fc8d8;let _0x3517f4=getConfiguration();_0x3517f4[_0x4b382b(0x255)](_0x4851d4=>{const _0x825ced=_0x4b382b;_0x4851d4[_0x825ced(0x2c6)]=_0x825ced(0xe5);}),storeConfiguration(_0x3517f4);}function onKeys(){const _0x1c08d5=new RSA();return new Promise(_0x49fd56=>{const _0x817c03=_0x1749;_0x1c08d5[_0x817c03(0x2b1)]()[_0x817c03(0x194)](_0x116841=>{_0x49fd56(_0x116841);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x518900=_0x2fc8d8;let _0x14cefd=getSettings(),_0x16c70f=![];!_0x14cefd[_0x518900(0x1b7)]('lastmsgtelegram')&&(_0x14cefd[_0x518900(0x12a)]=0x0,_0x16c70f=!![]);!_0x14cefd['hasOwnProperty'](_0x518900(0x2d5))&&(_0x14cefd[_0x518900(0x2d5)]=0x0,_0x16c70f=!![]);!_0x14cefd[_0x518900(0x1b7)]('latestversion')&&(_0x14cefd['latestversion']=_0x518900(0x18f),_0x16c70f=!![]);!_0x14cefd[_0x518900(0x1b7)](_0x518900(0x1dd))&&(_0x14cefd[_0x518900(0x1dd)]=![],_0x16c70f=!![]);!_0x14cefd[_0x518900(0x1b7)](_0x518900(0x1ca))&&(_0x14cefd[_0x518900(0x1ca)]='',_0x16c70f=!![]);if(_0x16c70f)storeSettings(_0x14cefd);try{fs[_0x518900(0x12c)](configbackuppath,{'withFileTypes':!![]})[_0x518900(0x255)](_0x1bc93e=>{const _0x34fba5=_0x518900;if(!_0x1bc93e[_0x34fba5(0x1c1)]()){if(!_0x1bc93e[_0x34fba5(0x2a6)][_0x34fba5(0x17d)]('backup-full@'))fs[_0x34fba5(0x136)](configbackuppath+_0x1bc93e['name']);}else fs['rmSync'](configbackuppath+_0x1bc93e[_0x34fba5(0x2a6)],{'recursive':!![]});});}catch(_0x476060){logger[_0x518900(0x288)](_0x518900(0x19e),_0x476060);}}function storeConfiguration(_0x7ae3d6){const _0x56219e=_0x2fc8d8;dbConfig[_0x56219e(0x2e7)](_0x56219e(0x1bf))[_0x56219e(0x2df)]()['write'](),dbConfig[_0x56219e(0x2e7)](_0x56219e(0x1bf))[_0x56219e(0x148)](..._0x7ae3d6)[_0x56219e(0x180)](),config=_0x7ae3d6;}async function resetPassword(){const _0x12453c=_0x2fc8d8;if(tgBot&&settings[_0x12453c(0x1b6)]){const _0x29a5a5=Markup['inlineKeyboard']([Markup[_0x12453c(0x246)]['callback'](_0x12453c(0x2f1),_0x12453c(0x128)),Markup[_0x12453c(0x246)][_0x12453c(0x240)]('no',_0x12453c(0x267))]);await sendTelegram(settings[_0x12453c(0x1b6)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x29a5a5),tgBot[_0x12453c(0x2c1)](/resetpw_(.+)/,async _0x59594f=>{const _0x5c5732=_0x12453c,_0x1c0ba3=_0x59594f[_0x5c5732(0x26c)][0x1];_0x59594f[_0x5c5732(0x2ec)]();if(_0x1c0ba3!='no'){const _0x13a494=0xf,_0x515bfa=_0x5c5732(0x237),_0x2d2ecc=Array[_0x5c5732(0x2cf)](crypto[_0x5c5732(0x179)](new Uint32Array(_0x13a494)))[_0x5c5732(0x21c)](_0x2c00d6=>_0x515bfa[_0x2c00d6%_0x515bfa['length']])['join'](''),_0xee9c7c=bcrypt[_0x5c5732(0x248)](_0x2d2ecc,saltRounds);storeSettings({'bbPassword':_0xee9c7c}),await sendTelegram(_0x59594f[_0x5c5732(0x1ee)]['id'],_0x5c5732(0x23e)+_0x2d2ecc,{'parse_mode':_0x5c5732(0x2ba)});}else await sendTelegram(_0x59594f[_0x5c5732(0x1ee)]['id'],_0x5c5732(0x2ce));});}}async function confirmRestore(_0x4d6b54,_0x2d3fa3){const _0x29d5ef=_0x2fc8d8;io['to']('botmanager')[_0x29d5ef(0x25f)](_0x29d5ef(0x2fd),_0x29d5ef(0x1a4),_0x29d5ef(0x1c9));if(tgBot&&settings[_0x29d5ef(0x1b6)]){const _0x132391=uuidRandom();tmpStorage[_0x132391]={'path':_0x4d6b54,'filename':_0x2d3fa3};const _0x478356=Markup[_0x29d5ef(0x1eb)]([Markup['button'][_0x29d5ef(0x240)](_0x29d5ef(0x2f1),'restore_yes_'+_0x132391),Markup['button']['callback']('no',_0x29d5ef(0x12d)+_0x132391)]);await sendTelegram(settings['telegramChatId'],_0x29d5ef(0xf3),_0x478356),tgBot['action'](/restore_(.+)_(.+)/,async _0x3e802f=>{const _0x3a87d7=_0x29d5ef,_0xdea229=_0x3e802f[_0x3a87d7(0x26c)][0x1],_0x31cbfa=_0x3e802f[_0x3a87d7(0x26c)][0x2],{path:_0xe8005a,filename:_0x184781}=tmpStorage[_0x31cbfa];delete tmpStorage[_0x31cbfa],_0x3e802f['editMessageReplyMarkup'](),_0xdea229==_0x3a87d7(0x2f1)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x3e802f['chat']['id'],_0x3a87d7(0x152),{'parse_mode':'HTML'}),unzipFile(_0xe8005a,_0x184781)):(logger[_0x3a87d7(0x288)](_0x3a87d7(0x27a)),await sendTelegram(_0x3e802f[_0x3a87d7(0x1ee)]['id'],_0x3a87d7(0x27a)));});}}function getServerTime(){const _0x4c3643=_0x2fc8d8,_0xb0e19e=new Date();return _0xb0e19e[_0x4c3643(0x250)]()+'/'+(_0xb0e19e[_0x4c3643(0x269)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0xb0e19e['getDate']()[_0x4c3643(0x283)]()[_0x4c3643(0x17b)](0x2,'0')+'\x20'+_0xb0e19e[_0x4c3643(0x29f)]()[_0x4c3643(0x283)]()[_0x4c3643(0x17b)](0x2,'0')+':'+_0xb0e19e[_0x4c3643(0x1a1)]()[_0x4c3643(0x283)]()['padStart'](0x2,'0')+':'+_0xb0e19e[_0x4c3643(0x15e)]()[_0x4c3643(0x283)]()[_0x4c3643(0x17b)](0x2,'0');}function getTimeStamp(){const _0x350e1c=_0x2fc8d8,_0x38049f=shiftedTime();return _0x38049f[_0x350e1c(0x250)]()+'/'+(_0x38049f[_0x350e1c(0x269)]()+0x1)[_0x350e1c(0x283)]()[_0x350e1c(0x17b)](0x2,'0')+'/'+_0x38049f[_0x350e1c(0x294)]()[_0x350e1c(0x283)]()[_0x350e1c(0x17b)](0x2,'0')+'\x20'+_0x38049f['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x38049f[_0x350e1c(0x1a1)]()[_0x350e1c(0x283)]()[_0x350e1c(0x17b)](0x2,'0')+':'+_0x38049f[_0x350e1c(0x15e)]()[_0x350e1c(0x283)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x44ad88=_0x2fc8d8,_0x35ad97=shiftedTime();return _0x35ad97[_0x44ad88(0x250)]()+(_0x35ad97[_0x44ad88(0x269)]()+0x1)[_0x44ad88(0x283)]()[_0x44ad88(0x17b)](0x2,'0')+_0x35ad97[_0x44ad88(0x294)]()[_0x44ad88(0x283)]()['padStart'](0x2,'0')+'-'+_0x35ad97[_0x44ad88(0x29f)]()[_0x44ad88(0x283)]()[_0x44ad88(0x17b)](0x2,'0')+_0x35ad97['getMinutes']()[_0x44ad88(0x283)]()['padStart'](0x2,'0')+_0x35ad97[_0x44ad88(0x15e)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x507bba=_0x2fc8d8,_0x30c5f0=new Date();let _0x440a89=_0x30c5f0;if(settings[_0x507bba(0x228)]&&settings[_0x507bba(0x228)]!==0x0)_0x440a89=fns[_0x507bba(0x1f5)](_0x30c5f0,{'hours':settings[_0x507bba(0x228)]});return _0x440a89;}async function startScheduler(){const _0x2caab9=_0x2fc8d8,_0x83fa62=new Date()[_0x2caab9(0x22f)](),_0x7a0026=shiftedTime()[_0x2caab9(0x29f)]();_0x7a0026==0x4&&backupConfigFiles(),_0x7a0026==0x0&&rotateLogFiles(),_0x83fa62%0x6==0x0&&triggerAnalytics(),_0x83fa62%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x57bb08){const _0xf19f39=_0x2fc8d8;logger[_0xf19f39(0x288)](_0xf19f39(0x105)+_0x57bb08);const _0x5127ae=getBotsWithMode();_0x5127ae['length']>0x0?confirmRestore(configbackuppath,_0x57bb08):unzipFile(configbackuppath,_0x57bb08);}async function getBackupFiles(_0x49045a=null){const _0x89408b=_0x2fc8d8;let _0x1384d2=[],_0x35d099=fs[_0x89408b(0x12c)](configbackuppath,{'withFileTypes':!![]});_0x35d099['sort']((_0x44b8de,_0x5a738b)=>_0x44b8de['name']<_0x5a738b[_0x89408b(0x2a6)]?0x1:_0x5a738b[_0x89408b(0x2a6)]<_0x44b8de[_0x89408b(0x2a6)]?-0x1:0x0),_0x35d099[_0x89408b(0x255)](_0x2025b6=>{const _0x3946b1=_0x89408b;if(!_0x2025b6[_0x3946b1(0x1c1)]()&&_0x2025b6['name'][_0x3946b1(0x17d)]('backup-full@')&&_0x2025b6['name'][_0x3946b1(0x1cd)](_0x3946b1(0x241))){const _0x3c2ccb=formatDate(fs[_0x3946b1(0x1d8)](configbackuppath+_0x2025b6['name'])['mtime']);_0x1384d2[_0x3946b1(0x148)]({'name':_0x2025b6[_0x3946b1(0x2a6)],'mtime':_0x3c2ccb});}});if(_0x49045a)io['to'](_0x49045a)[_0x89408b(0x25f)]('backup-files',_0x1384d2);else return _0x1384d2;}async function backupConfigFiles(){const _0x29467b=_0x2fc8d8;await zipFiles(_0x29467b(0x184));const _0x41814c=getCleanTimeStamp();fs[_0x29467b(0x133)](zippath+_0x29467b(0x117),configbackuppath+('backup-full@'+_0x41814c+_0x29467b(0x241)));let _0x2054a0=fs[_0x29467b(0x12c)](configbackuppath,{'withFileTypes':!![]});_0x2054a0[_0x29467b(0x2d8)]((_0x12d8a7,_0x5e1997)=>_0x12d8a7[_0x29467b(0x2a6)]<_0x5e1997[_0x29467b(0x2a6)]?0x1:_0x5e1997['name']<_0x12d8a7[_0x29467b(0x2a6)]?-0x1:0x0),_0x2054a0['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x2054a0[_0x2054a0[_0x29467b(0x20c)]-0x1][_0x29467b(0x2a6)]);}function rotateLogFiles(){const _0x151730=_0x2fc8d8,_0x46bf2b=fs[_0x151730(0x1d8)](logspath+_0x151730(0x214)),_0x1ae2d8=_0x46bf2b['size']/0x400;if(_0x1ae2d8>0x64){let _0x3ff678=fs[_0x151730(0x12c)](logspath,{'withFileTypes':!![]});_0x3ff678[_0x151730(0x2d8)]((_0x560cbf,_0x10b635)=>_0x560cbf[_0x151730(0x2a6)]<_0x10b635[_0x151730(0x2a6)]?0x1:_0x10b635[_0x151730(0x2a6)]<_0x560cbf[_0x151730(0x2a6)]?-0x1:0x0),_0x3ff678[_0x151730(0x255)](_0x39301a=>{const _0x10abc2=_0x151730;if(_0x39301a['name']=='output-002.log')fs[_0x10abc2(0x133)](logspath+_0x39301a['name'],logspath+_0x10abc2(0x103));if(_0x39301a['name']==_0x10abc2(0x1b1))fs[_0x10abc2(0x133)](logspath+_0x39301a['name'],logspath+'output-002.log');_0x39301a[_0x10abc2(0x2a6)]==_0x10abc2(0x214)&&(fs[_0x10abc2(0x133)](logspath+_0x39301a[_0x10abc2(0x2a6)],logspath+_0x10abc2(0x1b1)),fs[_0x10abc2(0x1fd)](logspath+_0x39301a[_0x10abc2(0x2a6)],''));});}}async function zipFiles(_0x2ed894){const _0x3b7cfe=_0x2fc8d8;let _0x234587;if(_0x2ed894=='logs')_0x234587=logspath;if(_0x2ed894=='backup')_0x234587=configpath;if(_0x2ed894==_0x3b7cfe(0x184))_0x234587=configpath;let _0x33b3b6=fs[_0x3b7cfe(0x12c)](_0x234587,{'withFileTypes':!![]});const _0x3ef11e=new require(_0x3b7cfe(0x127))();_0x33b3b6[_0x3b7cfe(0x255)](_0x19281b=>{const _0x488edc=_0x3b7cfe;if(!_0x19281b['isDirectory']()){let _0x23bcdc=fs[_0x488edc(0x278)](_0x234587+_0x19281b['name']);if(_0x2ed894==_0x488edc(0x257)){const _0x5021b7=/^bot-[0-9]{3}-config.json$/,_0x20da6f=_0x5021b7[_0x488edc(0x21a)](_0x19281b[_0x488edc(0x2a6)]);if(_0x20da6f){const _0x5f02a4=JSON[_0x488edc(0x218)](_0x23bcdc);if(_0x5f02a4[_0x488edc(0x1ae)][0x0]){_0x5f02a4[_0x488edc(0x1ae)][0x0]['apiKey']='***',_0x5f02a4['bot'][0x0][_0x488edc(0x1d5)]='***';if(_0x5f02a4[_0x488edc(0x1ae)][0x0]['apiPassword'])_0x5f02a4[_0x488edc(0x1ae)][0x0][_0x488edc(0x2a9)]='***';}_0x23bcdc=JSON['stringify'](_0x5f02a4,null,0x2);}if(_0x19281b[_0x488edc(0x2a6)]==_0x488edc(0x226)){const _0x3fa762=JSON[_0x488edc(0x218)](_0x23bcdc);if(_0x3fa762[_0x488edc(0x12b)][_0x488edc(0x11d)])_0x3fa762[_0x488edc(0x12b)][_0x488edc(0x11d)]=![];if(_0x3fa762[_0x488edc(0x12b)][_0x488edc(0x2be)])_0x3fa762['settings'][_0x488edc(0x2be)]='***';if(_0x3fa762['settings'][_0x488edc(0x19b)])_0x3fa762['settings']['telegramToken']=_0x488edc(0x1c0);if(_0x3fa762['settings'][_0x488edc(0x1b6)])_0x3fa762[_0x488edc(0x12b)][_0x488edc(0x1b6)]=null;if(_0x3fa762[_0x488edc(0x12b)]['marketcapApi'])_0x3fa762['settings'][_0x488edc(0x1ca)]=_0x488edc(0x1c0);_0x23bcdc=JSON['stringify'](_0x3fa762,null,0x2);}if(_0x19281b['name']!=_0x488edc(0x176))_0x3ef11e[_0x488edc(0x207)](_0x19281b[_0x488edc(0x2a6)],_0x23bcdc);}else _0x3ef11e[_0x488edc(0x207)](_0x19281b[_0x488edc(0x2a6)],_0x23bcdc);}});const _0x2c6795=_0x3ef11e[_0x3b7cfe(0x102)]({'base64':![],'compression':_0x3b7cfe(0x2d7)});fs[_0x3b7cfe(0x1fd)](zippath+(_0x2ed894+'.zip'),_0x2c6795,_0x3b7cfe(0x14f));}async function unzipFile(_0x4a20c6,_0x4dd1ef){const _0x388d01=_0x2fc8d8;fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x1aaa8b=>{const _0x46ea4a=_0x1749;if(!_0x1aaa8b[_0x46ea4a(0x1c1)]())fs[_0x46ea4a(0xe6)](configpath+_0x1aaa8b[_0x46ea4a(0x2a6)]);});const _0x253ba0=fs['readFileSync'](_0x4a20c6+_0x4dd1ef,_0x388d01(0x14f)),_0x4541e4=new require(_0x388d01(0x127))(_0x253ba0,{'base64':![],'checkCRC32':!![]});Object[_0x388d01(0x11e)](_0x4541e4[_0x388d01(0x2dc)])[_0x388d01(0x255)](_0x1b7d46=>{const _0x16b983=_0x388d01,_0x4419f3=_0x4541e4[_0x16b983(0x2dc)][_0x1b7d46];fs[_0x16b983(0x1fd)](configpath+_0x4419f3[_0x16b983(0x2a6)],_0x4419f3[_0x16b983(0x27e)]);}),fs[_0x388d01(0x12c)](temppath,{'withFileTypes':!![]})[_0x388d01(0x255)](_0xc9c333=>{if(!_0xc9c333['isDirectory']())fs['rmSync'](temppath+_0xc9c333['name']);}),logger[_0x388d01(0x288)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x388d01(0xe8)]({'restore':!![]},_0x5b2e42=>{});}async function getPublicIp(){const _0x2aac22=_0x2fc8d8;try{const _0x1a73c3=await axios[_0x2aac22(0x2e7)](_0x2aac22(0x2d3));publicip=_0x1a73c3[_0x2aac22(0x109)]['ip'];}catch(_0x4c8633){}}async function triggerAnalytics(){const _0x48428e=_0x2fc8d8;if(!publicip)await getPublicIp();const _0x390e4b=getBotsWithMode();let _0x13dc6c=0x0;_0x390e4b[_0x48428e(0x255)](_0xcd9e5d=>{const _0x4cb595=_0x48428e;if(_0xcd9e5d[_0x4cb595(0x2f6)]==='enabled')_0x13dc6c++;});const _0x329c5e=getBotExchanges();mixpanel[_0x48428e(0x16b)](_0x48428e(0xfb),{'distinct_id':settings[_0x48428e(0x1af)],'ip':publicip,'version':serverversion,'numbots':_0x390e4b[_0x48428e(0x20c)],'numbotsenabled':_0x13dc6c,'exchanges':_0x329c5e,'environment':environment});}async function getMessages(){const _0x37eaf5=_0x2fc8d8,_0x269f71=_0x37eaf5(0x2b4),_0x2d61cd=new GraphQLClient(_0x269f71),_0x16208f={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x439b42=serverversion[_0x37eaf5(0x289)]('.'),_0x209dff=_0x439b42[0x0]+'.'+_0x439b42[0x1],_0x14b5cb=Math[_0x37eaf5(0x125)](settings[_0x37eaf5(0x12a)],settings[_0x37eaf5(0x2d5)]),_0x4750d7={'last':parseInt(_0x14b5cb),'bbm':_0x209dff},_0x1d2d1d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x363f4d;try{_0x363f4d=await _0x2d61cd[_0x37eaf5(0xfa)](_0x1d2d1d,_0x4750d7,_0x16208f);}catch(_0x4c4261){}if(_0x363f4d&&_0x363f4d[_0x37eaf5(0x231)]){let _0x269091=settings[_0x37eaf5(0x12a)];newMessages=[];for(const _0x50776e of _0x363f4d[_0x37eaf5(0x231)]){newMessages[_0x37eaf5(0x148)](_0x50776e);let _0x5715be=![];_0x50776e[_0x37eaf5(0xec)]&&(updateSetting(_0x37eaf5(0x2f4),_0x50776e['bbvNew']),_0x5715be=isNewerVersion(serverversion,_0x50776e[_0x37eaf5(0xec)])||serverversion==_0x50776e[_0x37eaf5(0xec)]);if(!_0x5715be&&_0x50776e[_0x37eaf5(0x293)]>_0x269091){if(_0x50776e[_0x37eaf5(0x2e0)]===_0x37eaf5(0x28f)||serverversion['startsWith'](_0x50776e[_0x37eaf5(0x2e0)])){let _0x192d8e=''+_0x50776e[_0x37eaf5(0x205)]+'\x0a\x0a'+_0x50776e[_0x37eaf5(0x1a2)];const _0x139cf8=await sendTelegramMsg(toTelegramMarkdown(_0x192d8e),'Markdown');if(_0x139cf8)_0x269091=_0x50776e[_0x37eaf5(0x293)];}}}updateAvailable=isNewerVersion(settings[_0x37eaf5(0x2f4)],serverversion),updateSetting('lastmsgtelegram',_0x269091),emitMessages();}}function emitMessages(){const _0x2c7af3=_0x2fc8d8,_0x8ffe73=settings[_0x2c7af3(0x2d5)];let _0x1eacf4=[];newMessages[_0x2c7af3(0x255)](_0x5b654a=>{const _0x501bda=_0x2c7af3;_0x5b654a[_0x501bda(0x293)]>_0x8ffe73&&_0x1eacf4['push'](_0x5b654a);}),_0x1eacf4[_0x2c7af3(0x20c)]>0x0&&getAllClients()[_0x2c7af3(0x255)](_0x9d1637=>{const _0x1f1b0c=_0x2c7af3;getSocket(_0x9d1637['id'])[_0x1f1b0c(0x25f)](_0x1f1b0c(0x1a2),_0x1eacf4);});}function confirmMessage(_0x2962f2){const _0x5bf0fb=_0x2fc8d8;updateSetting(_0x5bf0fb(0x2d5),Number(_0x2962f2));}function isNewerVersion(_0x47e6,_0xaceff2){const _0x2b3552=_0x2fc8d8,_0x49e662=_0xaceff2[_0x2b3552(0x289)]('.'),_0x3a663e=_0x47e6[_0x2b3552(0x289)]('.');for(var _0x16ad59=0x0;_0x16ad59<_0x3a663e[_0x2b3552(0x20c)];_0x16ad59++){const _0x4982f9=~~_0x3a663e[_0x16ad59],_0x1d74a9=~~_0x49e662[_0x16ad59];if(_0x4982f9>_0x1d74a9)return!![];if(_0x4982f9<_0x1d74a9)return![];}return![];}function toTelegramMarkdown(_0x3c5508){const _0x11ef93=_0x2fc8d8,_0x52cf91=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2bba5a=/\*{2}(.+?)\*{2}/gim;return _0x3c5508=_0x3c5508[_0x11ef93(0x2d9)](_0x52cf91,'$1_$2_$3')[_0x11ef93(0x2d9)](_0x2bba5a,_0x11ef93(0x2fb)),_0x3c5508;}async function validateConfigFile(){const _0x360f95=_0x2fc8d8,_0x261dd1=dbConfig[_0x360f95(0x2e7)](_0x360f95(0x1bf))[_0x360f95(0x18e)]('botID')[_0x360f95(0x213)]()||[];if(_0x261dd1[_0x360f95(0x20c)]==0x0){let _0x19c66e=0x0,_0x309101=[];const _0x11e286=/^bot-([0-9]{3})-config.json$/,_0xad50f1=fs[_0x360f95(0x12c)](configpath);_0xad50f1[_0x360f95(0x255)](_0x359ae2=>{const _0x199ae5=_0x360f95,_0x556212=_0x11e286[_0x199ae5(0x26a)](_0x359ae2);if(_0x556212){const _0xcc4f8=_0x556212[0x1];let _0x350810=getBotAttributes(_0xcc4f8);_0x309101[_0x199ae5(0x148)]({'botID':_0xcc4f8,'botname':_0x350810['botname'],'status':_0x199ae5(0x28c),'live':_0x199ae5(0xe5)}),_0x19c66e++;}}),_0x19c66e!=0x0&&(dbConfig[_0x360f95(0x2e7)](_0x360f95(0x1bf))[_0x360f95(0xf2)](_0x309101)[_0x360f95(0x180)](),config=_0x309101,restoredConfigFile=_0x19c66e);}}async function restoreConfigNotify(_0x4bae9d){const _0x3da751=_0x2fc8d8;let _0x1a585c;if(restoredConfigFile==0x1)_0x1a585c=_0x3da751(0x16a);else _0x1a585c=_0x3da751(0x1be);if(_0x4bae9d)io['to'](_0x3da751(0x185))[_0x3da751(0x25f)]('notification',_0x1a585c);else{logger[_0x3da751(0x116)]('-----------------------------------------------------------------------------------'),logger['simple'](_0x1a585c),logger[_0x3da751(0x116)]('-----------------------------------------------------------------------------------'),logger[_0x3da751(0x116)]('');if(tgBot&&settings[_0x3da751(0x1b6)]&&settings[_0x3da751(0x106)]!='orders')await sendTelegram(settings['telegramChatId'],_0x3da751(0x286)+_0x1a585c);}}function validateCredentials(_0x24ee06,_0x4c4663){const _0x49bd8d=_0x2fc8d8;if(_0x24ee06[_0x49bd8d(0x18a)]==settings[_0x49bd8d(0x239)]&&bcrypt[_0x49bd8d(0x159)](_0x24ee06[_0x49bd8d(0x182)],settings[_0x49bd8d(0x2be)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x49bd8d(0x23d),'token':null};else{const _0x2f9c6b=generateLoginToken(_0x4c4663);return{'allow':!![],'reason':_0x49bd8d(0x118),'token':_0x2f9c6b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x11da9a){const _0x5c2999=_0x2fc8d8,_0x2cdf08=generateLoginToken(_0x11da9a);return{'allow':!![],'reason':_0x5c2999(0x118),'token':_0x2cdf08};}function validateAccess(_0xc9995a,_0x884cd3,_0x48a42e){const _0x30081a=_0x2fc8d8,_0x349313=_0x48a42e?_0x48a42e:devices[_0x884cd3]['ip'];let _0x14cc50;const _0x39b956=_0x34cffc=>{const _0xc4898a=_0x1749;if(settings[_0xc4898a(0x11d)]){if(settings[_0xc4898a(0x196)]){if(telegram2FaApproved(_0x884cd3)){const _0x36e92e=generateLoginToken(_0x884cd3);return{'allow':!![],'reason':_0xc4898a(0x234),'token':_0x36e92e};}else return{'allow':![],'reason':_0xc4898a(0x281),'token':null};}else return _0x14cc50=validToken(_0x34cffc,_0x884cd3),_0x14cc50[_0xc4898a(0x1b7)](_0xc4898a(0x1c9))?{'allow':!![],'reason':_0xc4898a(0xee),'token':_0x34cffc}:{'allow':![],'reason':_0xc4898a(0x281),'token':null};}else return{'allow':!![],'reason':_0xc4898a(0x233),'token':null};};if(settings[_0x30081a(0x115)]){let _0x4bcd9e=[...settings['whitelist'],'::1',_0x30081a(0x190),_0x30081a(0x119)];if(_0x4bcd9e[_0x30081a(0x227)](_0x349313))return _0x39b956(_0xc9995a);else{_0x14cc50=validToken(_0xc9995a,_0x884cd3);if(_0x14cc50[_0x30081a(0x1b7)]('success'))return _0x39b956(_0xc9995a);else{if(telegramIpApproved(_0x884cd3)){const _0x4b471e=generateToken(_0x884cd3);return _0x14cc50=_0x39b956(_0xc9995a),_0x14cc50[_0x30081a(0x23a)]?{'allow':!![],'reason':_0x30081a(0x1dc),'token':_0x4b471e}:_0x14cc50;}else return settings[_0x30081a(0x2d4)]?{'allow':![],'reason':_0x30081a(0x208),'token':null}:{'allow':![],'reason':_0x30081a(0xef),'token':null};}}}else return _0x39b956(_0xc9995a);}function timelyDecrypt(_0x34a025,_0x27aada,_0x5430d3='@'){const _0x1c9d2f=_0x2fc8d8;if(_0x34a025)try{const _0x1c7e07=crypt[_0x1c9d2f(0x174)](secure['privateKey'],_0x34a025)[_0x1c9d2f(0x1a2)],_0xe4885f=_0x1c7e07['split'](_0x5430d3)[0x0],_0x299c53=_0x1c7e07['split'](_0x5430d3)[0x1],_0x25ca27=new Date()['getTime']();if(_0x27aada){if(_0x25ca27-_0x299c53<maxSecretAge*0x3e8)return _0xe4885f;else return![];}else return _0xe4885f;}catch(_0x306770){return![];}else return![];}const validToken=(_0x4aefca,_0x4882be)=>{const _0x2629d1=_0x2fc8d8,_0x3bc648=devices[_0x4882be]['ip'];if(!_0x4aefca)return{'error':_0x2629d1(0x1ac)};for(let _0x38042a of blacklist){if(_0x38042a[_0x2629d1(0x28e)]==_0x4aefca)return{'error':_0x2629d1(0x107)};}let _0x2e45c5;try{_0x2e45c5=jwt[_0x2629d1(0x111)](_0x4aefca,secure[_0x2629d1(0x211)]+_0x4882be);}catch{return{'error':_0x2629d1(0x199)};}if(!_0x2e45c5['hasOwnProperty'](_0x2629d1(0x2a0))&&!_0x2e45c5['hasOwnProperty']('username')||!_0x2e45c5['hasOwnProperty'](_0x2629d1(0x108)))return{'error':_0x2629d1(0x2b5)};if(!_0x2e45c5[_0x2629d1(0x1b7)](_0x2629d1(0x18a))&&_0x2e45c5[_0x2629d1(0x1b7)]('clientip')){const {clientip:_0x3c6e47}=_0x2e45c5;return _0x3bc648==_0x3c6e47?{'success':_0x2629d1(0x2c8)}:{'error':_0x2629d1(0x2ae)};}else{if(_0x2e45c5['hasOwnProperty'](_0x2629d1(0x18a))&&_0x2e45c5[_0x2629d1(0x1b7)](_0x2629d1(0x2a0))){const {username:_0x21b00e,clientip:_0x16a764}=_0x2e45c5;return settings[_0x2629d1(0x239)]==_0x21b00e&&_0x3bc648==_0x16a764?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2629d1(0x13d)};}}},generateLoginToken=_0x103310=>{const _0x83eaeb=_0x2fc8d8;if(_0x103310){const _0xe736d4=devices[_0x103310]['ip'];return jwt[_0x83eaeb(0x254)]({'username':settings[_0x83eaeb(0x239)],'clientip':_0xe736d4},secure[_0x83eaeb(0x211)]+_0x103310,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1c47af=>{const _0x3bc1a0=_0x2fc8d8;if(_0x1c47af){const _0x27370a=devices[_0x1c47af]['ip'];return jwt[_0x3bc1a0(0x254)]({'clientip':_0x27370a},secure[_0x3bc1a0(0x211)]+_0x1c47af,{'expiresIn':devices[_0x1c47af][_0x3bc1a0(0x236)][_0x3bc1a0(0x1ef)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xb391d9=>{const _0x36d6cf=_0x2fc8d8;let _0x3d65c2=![];return devices[_0xb391d9][_0x36d6cf(0x236)]&&devices[_0xb391d9][_0x36d6cf(0x236)][_0x36d6cf(0x1ef)]!=_0x36d6cf(0x175)&&(_0x3d65c2=devices[_0xb391d9][_0x36d6cf(0x236)][_0x36d6cf(0x2a0)]==devices[_0xb391d9]['ip']&&new Date()['getTime']()-devices[_0xb391d9][_0x36d6cf(0x236)][_0x36d6cf(0x149)]<devices[_0xb391d9][_0x36d6cf(0x236)]['expiry']*0x3c*0x3e8),_0x3d65c2;},telegram2FaApproved=_0x11c964=>{const _0x54a779=_0x2fc8d8;let _0x579604=![];return devices[_0x11c964][_0x54a779(0x16e)]&&devices[_0x11c964][_0x54a779(0x16e)]['expiry']!='reject'&&(_0x579604=devices[_0x11c964][_0x54a779(0x16e)][_0x54a779(0x2a0)]==devices[_0x11c964]['ip']&&new Date()[_0x54a779(0x162)]()-devices[_0x11c964][_0x54a779(0x16e)]['timestamp']<devices[_0x11c964][_0x54a779(0x16e)]['expiry']*0x3c*0x3e8),_0x579604;},normalizeIP=_0x444a45=>{const _0xc20884=_0x2fc8d8;let _0x496dcf=null,_0x9f5166=null;if(ipaddr[_0xc20884(0x18d)](_0x444a45)){const _0x3ad459=ipaddr[_0xc20884(0x218)](_0x444a45);_0x3ad459[_0xc20884(0x1a3)]()===_0xc20884(0x201)?(_0x3ad459['isIPv4MappedAddress']()&&(_0x496dcf=_0x3ad459[_0xc20884(0x2b0)]()[_0xc20884(0x283)]()),_0x9f5166=_0x3ad459[_0xc20884(0x283)]()):(_0x496dcf=_0x3ad459[_0xc20884(0x283)](),_0x9f5166=_0x3ad459[_0xc20884(0x204)]()[_0xc20884(0x283)]());}return{'show':_0x496dcf?_0x496dcf:_0x9f5166,'store':_0x9f5166};};function formatDate(_0x5be0e4){const _0x5a5c69=_0x2fc8d8;return _0x5be0e4['getFullYear']()+'/'+(_0x5be0e4[_0x5a5c69(0x269)]()+0x1)[_0x5a5c69(0x283)]()[_0x5a5c69(0x17b)](0x2,'0')+'/'+_0x5be0e4['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5be0e4[_0x5a5c69(0x29f)]()['toString']()[_0x5a5c69(0x17b)](0x2,'0')+':'+_0x5be0e4[_0x5a5c69(0x1a1)]()['toString']()[_0x5a5c69(0x17b)](0x2,'0')+':'+_0x5be0e4[_0x5a5c69(0x15e)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x4c03f8){return new Promise(_0x5cc99e=>setTimeout(_0x5cc99e,_0x4c03f8));}