const _0x1fc18f=_0x4f4a;function _0x4f4a(_0xa6a321,_0x513307){const _0x223596=_0xdc11();return _0x4f4a=function(_0x300a61,_0x17fc91){_0x300a61=_0x300a61-0x1ba;let _0xdc11af=_0x223596[_0x300a61];return _0xdc11af;},_0x4f4a(_0xa6a321,_0x513307);}(function(_0x11df1e,_0xeccd4){const _0xee5b6b=_0x4f4a,_0x4fe4ba=_0x11df1e();while(!![]){try{const _0x1590c7=parseInt(_0xee5b6b(0x21a))/0x1+parseInt(_0xee5b6b(0x2b1))/0x2*(-parseInt(_0xee5b6b(0x31e))/0x3)+-parseInt(_0xee5b6b(0x331))/0x4+parseInt(_0xee5b6b(0x232))/0x5*(parseInt(_0xee5b6b(0x2ec))/0x6)+-parseInt(_0xee5b6b(0x305))/0x7*(parseInt(_0xee5b6b(0x302))/0x8)+parseInt(_0xee5b6b(0x2a2))/0x9+-parseInt(_0xee5b6b(0x1f3))/0xa*(parseInt(_0xee5b6b(0x247))/0xb);if(_0x1590c7===_0xeccd4)break;else _0x4fe4ba['push'](_0x4fe4ba['shift']());}catch(_0x222e9e){_0x4fe4ba['push'](_0x4fe4ba['shift']());}}}(_0xdc11,0xd8a69));const _0x17fc91=function(){let _0x30dd5f=!![];return function(_0x1c12c4,_0x18b90c){const _0x408d56=_0x30dd5f?function(){const _0x5bab92=_0x4f4a;if(_0x18b90c){const _0x1a1abc=_0x18b90c[_0x5bab92(0x2e8)](_0x1c12c4,arguments);return _0x18b90c=null,_0x1a1abc;}}:function(){};return _0x30dd5f=![],_0x408d56;};}(),_0x300a61=_0x17fc91(this,function(){const _0x343791=_0x4f4a;return _0x300a61[_0x343791(0x27d)]()[_0x343791(0x334)](_0x343791(0x263))[_0x343791(0x27d)]()[_0x343791(0x235)](_0x300a61)[_0x343791(0x334)](_0x343791(0x263));});_0x300a61();'use strict';process['env'][_0x1fc18f(0x1bd)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x1fc18f(0x28c)),low=require(_0x1fc18f(0x237)),FileSync=require(_0x1fc18f(0x1f6)),path=require(_0x1fc18f(0x277)),crypto=require(_0x1fc18f(0x1e0)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x1fc18f(0x27f))[_0x1fc18f(0x1c1)],bcrypt=require(_0x1fc18f(0x282)),jwt=require(_0x1fc18f(0x291)),{Analytics}=require(_0x1fc18f(0x259)),googleAnalyticsV3Plugin=require(_0x1fc18f(0x242))[_0x1fc18f(0x221)],ipaddr=require(_0x1fc18f(0x1cd)),argv=require(_0x1fc18f(0x327))(process[_0x1fc18f(0x21b)][_0x1fc18f(0x1da)](0x2))[_0x1fc18f(0x21b)],uuidRandom=require(_0x1fc18f(0x243)),Mixpanel=require(_0x1fc18f(0x2f6)),axios=require(_0x1fc18f(0x212)),{GraphQLClient,gql}=require(_0x1fc18f(0x22d)),PORT=argv[_0x1fc18f(0x24d)]||_0x1fc18f(0x285),pattern=/^[0-9]{2,4}$/;!pattern[_0x1fc18f(0x2eb)](PORT)&&(console[_0x1fc18f(0x1ce)](_0x1fc18f(0x22e)+PORT+_0x1fc18f(0x1de)),process['exit'](0x1));const HOST=argv[_0x1fc18f(0x1f5)]||null,userID=argv[_0x1fc18f(0x24b)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x1fc18f(0x24f),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x1fc18f(0x289);let validInstallation=!![];!fs[_0x1fc18f(0x1f2)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x1fc18f(0x2f4)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs[_0x1fc18f(0x1f2)](configpath)&&fs[_0x1fc18f(0x2f2)](configpath);!fs[_0x1fc18f(0x1f2)](configbackuppath)&&fs[_0x1fc18f(0x2f2)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1fc18f(0x1c4)]({'bots':[]})['write']();function _0xdc11(){const _0x427aef=['2FA\x20login\x20rejected','emit','<b>Balance\x20Bot\x20Status:</b>\x0a','function','f2aRequired','Unauthorized\x20login\x20attempt\x20(timeout)','4830664zWQtxY','\x20mode','unlinkSync','7SsQbLx','latestversion','bbPassword','length','timestamp','Unauthorized\x20attempt\x20to\x20store\x20configuration','temporary\x20access\x20rejected','access','/:bot/portfolio','/help\x20-\x20show\x20available\x20commands\x0a','push','storeConfiguration','Token\x20blacklisted','api-eu.mixpanel.com','1000','timeshift','error','kind','You\x20can\x20use\x20the\x20following\x20commands:\x0a','hex','************','once','store-settings','connected','sendFile','57LFeght','/status\x20-\x20show\x20bot(s)\x20status\x0a','ipc','login\x20token\x20valid','privateKey','enabled\x20Bot\x20','/:bot','getMonth','Unauthorized\x20attempt\x20to\x20get\x20logs','yargs/yargs','confirm-message','Invalid\x20IP\x20address','telegramEvents','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','/update\x20-\x20update\x20Balance\x20Bot\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','entries','getTime','185528zwrNlm','toIPv4Address','randomFillSync','search','chat','temporary\x20access\x20not\x20allowed','padStart','static','ipv6','Notifications\x20types:\x20','cancelLoading','toggleBotMode','NTBA_FIX_319','stop','deleteHistoryAlerts','token','RSA','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','hashSync','defaults','index.html','settings','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','settings.','Unauthorized\x20attempt\x20to\x20update\x20bot','args','temporary\x20access\x20timeout','2FA','ipaddr.js','log','encryptedUuid','Unauthorized\x20attempt\x20to\x20add\x20bot','yes','readFileSync','decrypt','loginRequired','botname','temporaryAccessAllowed','compareSync','parse','sign','slice','sortBy','*$1*','/disable\x20-\x20disable\x20notifications\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','bbUsername','crypto','delete-bot','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','keys','event','publicKey','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','deleted\x20Bot\x20','Bot\x20','verify','getPortfolio','sendMessage','Balance\x20Bot','track','login\x20token\x20generated','Balance\x20Bot\x20Server','Temporary\x20access\x20rejected','onText','existsSync','1390mTAXdQ','Invalid\x20username\x20or\x20IP\x20address','host','lowdb/adapters/FileSync','kill','answerCallbackQuery','login\x20not\x20required','No\x20bots\x20running\x20right\x20now','getHours','includes','alias','allow','match','telegram2FaApproval','get-messages','telegrammsg','inherit','from','-performance.json','/:bot/support','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','15\x20min','update-bot','forEach','delete-alerts','mode','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','new-disabled','data','conn','get-portfolio','axios','lastmsgtelegram','\x20to\x20','</b>\x20?','HTML','createServer','showname','UA-192771731-1','1376693VBVHEt','argv','title','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','express','telegram','::ffff:127.0.0.1','default','\x20>\x20','store-configuration','Unauthorized\x20attempt\x20to\x20update\x20settings','0.0.0','login','invalid\x20credentials','find','build','<b>Telegram\x20Bot\x20Status:</b>\x0a','User\x20has\x20been\x20validated','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','graphql-request','Error:\x20Invalid\x20argument\x20','hasOwnProperty','status','bot','23605trGvvA','split','started','constructor','store','lowdb','handshake','toggle-bot-mode','telegramEnabled','fork','listen','https://hodlerhacks.com','referer','\x20|\x20','telegramUsername','pidRefreshToken','@analytics/google-analytics-v3','uuid-random','Login\x20rejected','join','telegramChatId','76791FnkHiG','2FA\x20login\x20required','update-bb','alerts','user','exp','port','orders','bot.js','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Notifications\x20enabled','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','All','value','Unauthorized\x20attempt\x20to\x20log\x20out','remove','analytics','Password\x20has\x20been\x20reset\x20to:\x20','live','Unauthorized\x20attempt\x20to\x20get\x20messages','reject','add','get-logs','bot-','blacklist','Access\x20enabled\x20for\x20','(((.+)+)+)+$','whitelist','isDirectory','disconnect','add-bot','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','access\x20timeout','Invalid\x20Telegram\x20token','idling\x20bot\x20\x20\x20|\x20Bot\x20','Notifications\x20disabled','removeListener','\x20only\x0a','stopPolling','secret','Unauthorized\x20attempt\x20to\x20get\x20portfolio','replace','getDate','type','toIPv4MappedAddress','Notifications\x20disabled\x0a','path','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','reset-password','request','messages','toString','notification','hybrid-crypto-js','secure','bots','bcryptjs','reason','isIPv4MappedAddress','3000','headless','use','lastmsgemitted','bb-secure.json','stopped','init','date-fns','404\x20Not\x20Found','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','exit','jsonwebtoken','randomBytes','-config.json','filter','pidExpireLogin','login\x20required','startsWith','name','Ok,\x20will\x20send\x20order\x20notifications\x20only','place-order','accept','copyFileSync','stringify','Allow\x20login\x20from\x20IP\x20address\x20<b>','telegramToken','6b67f3d61ee94b8f5c80b4affef4c4d9','get','4979367VaSJIC','bbvReceive','disabled','5\x20min','getFullYear','-----------------------------------------------------------------------------------','/restart\x20-\x20restart\x20bot(s)\x0a','Starting\x20Balance\x20Bot\x20update','$1_$2_$3','remoteAddress','2FA\x20required','any','sockets','auth','Bot\x20Mgr\x20>\x20','51466BhxJNB','/:bot/coins','headers','uuid','cancel-loading','RSA-OAEP','show','/:bot/performance','message','bbvNew','running','2FA\x20login\x20token\x20generated','clientip','build2','telegramIpApproval','starting\x20new\x20bot\x20|\x20Bot\x20','cloneDeep','botID','username','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getMinutes','write','/on\x20-\x20start\x20bot(s)\x0a','logout','apiKey','reload','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','sendPortfolioTelegram','initclient','getStartingBalances','page','send','password','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','botmanager','enabled','Password\x20reset\x20rejected','version.json','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','catch','127.0.0.1','Yes','callback_query','::1','/:bot/configuration',':\x20Bot\x20Mgr\x20>\x20','writeFileSync','map','logged\x20out','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','all','isValid','min','Unauthorized\x20attempt\x20to\x20delete\x20bot','server','apply','30\x20min','starting\x20bot\x20|\x20Bot\x20','test','1356hZFdny','store-headless','manual','assign','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','set','mkdirSync','/names\x20-\x20show\x20bot\x20names\x0a','config/','Invalid\x20authentication\x20token\x20(1)','mixpanel','new','then','expiry','userid','Your\x20installation\x20is\x20already\x20up\x20to\x20date'];_0xdc11=function(){return _0x427aef;};return _0xdc11();}const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1fc18f(0x1c4)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0'}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1fc18f(0x1c4)]({'secure':{},'blacklist':[]})[_0x1fc18f(0x2c6)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x1fc18f(0x2b6)});const saltRounds=0xa,mixpanel=Mixpanel[_0x1fc18f(0x28b)](_0x1fc18f(0x2a0),{'host':_0x1fc18f(0x312)}),analytics=Analytics({'app':_0x1fc18f(0x1ec),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x1fc18f(0x219)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1fc18f(0x2d6))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1fc18f(0x21e)),app=express(),http=require('http')[_0x1fc18f(0x217)](app);app[_0x1fc18f(0x287)](express[_0x1fc18f(0x338)](path[_0x1fc18f(0x245)](__dirname,bbpath2,_0x1fc18f(0x2be)))),app['use'](express[_0x1fc18f(0x338)](path['join'](__dirname,bbpath2,'build'))),app[_0x1fc18f(0x2a1)]('/',function(_0x36c597,_0x3814d7){const _0x52cd91=_0x1fc18f;_0x3814d7['sendFile'](path[_0x52cd91(0x245)](__dirname,bbpath2,_0x52cd91(0x2be),'index.html'));}),app[_0x1fc18f(0x2a1)](_0x1fc18f(0x324),function(_0x2c818a,_0x2eb82b){const _0x3334e6=_0x1fc18f;_0x2eb82b[_0x3334e6(0x31d)](path[_0x3334e6(0x245)](__dirname,bbpath2,_0x3334e6(0x229),_0x3334e6(0x1c5)));}),app[_0x1fc18f(0x2a1)](_0x1fc18f(0x30d),(_0x1723c4,_0x4c3cd2)=>{const _0x360e20=_0x1fc18f;_0x4c3cd2['sendFile'](path[_0x360e20(0x245)](__dirname,bbpath2,_0x360e20(0x229),'index.html'));}),app['get'](_0x1fc18f(0x2b8),(_0x23580d,_0x1f68ae)=>{const _0xed6fc0=_0x1fc18f;_0x1f68ae['sendFile'](path['join'](__dirname,bbpath2,_0xed6fc0(0x229),'index.html'));}),app[_0x1fc18f(0x2a1)](_0x1fc18f(0x2b2),(_0x33a504,_0x4a2308)=>{const _0x175acf=_0x1fc18f;_0x4a2308[_0x175acf(0x31d)](path[_0x175acf(0x245)](__dirname,bbpath2,_0x175acf(0x229),'index.html'));}),app[_0x1fc18f(0x2a1)]('/:bot/history',(_0x2e45df,_0x167857)=>{const _0x349967=_0x1fc18f;_0x167857[_0x349967(0x31d)](path[_0x349967(0x245)](__dirname,bbpath2,_0x349967(0x229),_0x349967(0x1c5)));}),app[_0x1fc18f(0x2a1)](_0x1fc18f(0x2dd),(_0x3215d3,_0x2e152b)=>{const _0x44d87a=_0x1fc18f;_0x2e152b[_0x44d87a(0x31d)](path[_0x44d87a(0x245)](__dirname,bbpath2,'build','index.html'));}),app[_0x1fc18f(0x2a1)](_0x1fc18f(0x206),(_0x11473c,_0x5de68e)=>{const _0x3f5b47=_0x1fc18f;_0x5de68e[_0x3f5b47(0x31d)](path[_0x3f5b47(0x245)](__dirname,bbpath2,_0x3f5b47(0x229),_0x3f5b47(0x1c5)));});if(HOST)http['listen'](PORT,HOST);else http[_0x1fc18f(0x23c)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x1fc18f(0x29f)]&&settings[_0x1fc18f(0x29f)]!=''&&settings[_0x1fc18f(0x240)]&&settings[_0x1fc18f(0x240)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x454d08=_0x1fc18f;console[_0x454d08(0x1ce)](''),console[_0x454d08(0x1ce)](_0x454d08(0x2a7)),logging(_0x454d08(0x32b)+PORT),console[_0x454d08(0x1ce)](_0x454d08(0x2a7));if(config[_0x454d08(0x308)]!=0x0)config[_0x454d08(0x20a)](_0x8e12a0=>{const _0x3004be=_0x454d08;if(_0x8e12a0[_0x3004be(0x230)]==_0x3004be(0x2d4)||_0x8e12a0[_0x3004be(0x230)]==_0x3004be(0x2f7))logging(_0x3004be(0x2ea)+_0x8e12a0[_0x3004be(0x2c2)]+_0x3004be(0x23f)+_0x8e12a0['botname']),startBot([_0x8e12a0[_0x3004be(0x2c2)],userID],{'cwd':bbpath},function(_0x1690f1){if(_0x1690f1)logging(_0x1690f1);});else(_0x8e12a0[_0x3004be(0x230)]==_0x3004be(0x2a4)||_0x8e12a0['status']=='new-disabled')&&logging(_0x3004be(0x26b)+_0x8e12a0[_0x3004be(0x2c2)]+_0x3004be(0x23f)+_0x8e12a0[_0x3004be(0x1d5)]);});else!newBot&&console[_0x454d08(0x1ce)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x454d08(0x1ce)](_0x454d08(0x2a7)),console[_0x454d08(0x1ce)]('');}function startSocket(){io['on']('connection',_0x43770d=>{const _0x2c0ada=_0x4f4a;let _0x3fdf1e,_0x289638,_0x22bf1d,_0x1be301,_0x229fbe;const _0x13e5c3=_0x43770d[_0x2c0ada(0x238)][_0x2c0ada(0x2b3)][_0x2c0ada(0x23e)];_0x289638=_0x13e5c3[_0x2c0ada(0x1ff)](/bot[0-9]{3}/);if(_0x289638)_0x22bf1d=_0x289638[0x0][_0x2c0ada(0x1ff)](/[0-9]{3}/);if(_0x22bf1d)_0x3fdf1e=_0x22bf1d[0x0];else _0x3fdf1e=_0x2c0ada(0x2d3);const _0x1877ed=_0x43770d[_0x2c0ada(0x238)][_0x2c0ada(0x2af)][_0x2c0ada(0x1cf)];if(!_0x1877ed)_0x43770d[_0x2c0ada(0x2fd)](_0x2c0ada(0x230),{'publicKey':secure[_0x2c0ada(0x1e5)]});else{_0x1be301=timelyDecrypt(_0x1877ed,![]);if(!_0x1be301)_0x43770d['emit']('status',{'publicKey':secure[_0x2c0ada(0x1e5)]});else{_0x229fbe=normalizeIP(_0x43770d[_0x2c0ada(0x210)][_0x2c0ada(0x2ab)])[_0x2c0ada(0x236)];if(!devices[_0x1be301])devices[_0x1be301]={'uuid':_0x1be301,'access':{'token':null}};devices[_0x1be301]['ip']=_0x229fbe;const _0x96df35=addClient(_0x43770d['id'],_0x1be301,_0x3fdf1e);setAccess(_0x96df35),emitMessages(),_0x43770d['on'](_0x2c0ada(0x226),_0x4af46f=>{const _0x3c5c25=_0x2c0ada,_0x286491=timelyDecrypt(_0x4af46f['password']);if(_0x286491){_0x4af46f={'username':_0x4af46f['username'],'password':_0x286491},devices[_0x1be301]['access']=validateCredentials(_0x4af46f,_0x1be301);if(devices[_0x1be301][_0x3c5c25(0x30c)][_0x3c5c25(0x1fe)]==![]&&devices[_0x1be301][_0x3c5c25(0x30c)]['reason']==_0x3c5c25(0x248))_0x43770d[_0x3c5c25(0x2fd)](_0x3c5c25(0x230),{'access':devices[_0x1be301][_0x3c5c25(0x30c)]}),loginAccess2FA(_0x1be301,_0x229fbe);else{if(devices[_0x1be301]['access']['allow']==![]&&devices[_0x1be301]['access'][_0x3c5c25(0x283)]==_0x3c5c25(0x227))_0x43770d[_0x3c5c25(0x2fd)]('status',{'access':devices[_0x1be301][_0x3c5c25(0x30c)]});else devices[_0x1be301][_0x3c5c25(0x30c)][_0x3c5c25(0x1fe)]&&devices[_0x1be301][_0x3c5c25(0x30c)][_0x3c5c25(0x283)]==_0x3c5c25(0x1ee)&&(getClientsWithUuid(_0x1be301)['forEach'](_0x5752b6=>{setAccess(_0x5752b6);}),setTokenRefresh(_0x1be301),setSessionTimeout(_0x3c5c25(0x226),_0x1be301));}}else logging(_0x3c5c25(0x301));}),_0x43770d['on'](_0x2c0ada(0x27a),()=>{resetPassword();}),_0x43770d['on'](_0x2c0ada(0x266),_0x17945e=>{removeClient(_0x43770d['id']);});}}});}function initClient(_0x325769){const _0x2cdbc4=_0x1fc18f;if(_0x325769!=_0x2cdbc4(0x2d3)&&config[_0x2cdbc4(0x2c9)]!=''){if(pid[_0x325769])pid[_0x325769][_0x2cdbc4(0x2d0)]({'function':_0x2cdbc4(0x2cd),'args':null});}}function getSocket(_0x392833){const _0x1a21a6=_0x1fc18f;return io[_0x1a21a6(0x2ae)]['sockets'][_0x1a21a6(0x2a1)](_0x392833);}function setAccess(_0x1c13e4){const _0x3c3879=_0x1fc18f,_0x468934=getSocket(_0x1c13e4['id']),_0x217a68=_0x1c13e4['uuid'],_0x32f2c4=_0x1c13e4[_0x3c3879(0x231)];devices[_0x217a68]['access']=validateAccess(devices[_0x217a68][_0x3c3879(0x30c)][_0x3c3879(0x1c0)],_0x217a68),_0x468934[_0x3c3879(0x245)](_0x217a68);if(devices[_0x217a68]['access']['allow']){_0x468934['join'](_0x32f2c4);if(_0x32f2c4==_0x3c3879(0x2d3))initializeSocketBotManager(_0x468934);else initializeSocketBot(_0x468934);initClient(_0x32f2c4);}devices[_0x217a68][_0x3c3879(0x30c)][_0x3c3879(0x1c0)]&&devices[_0x217a68][_0x3c3879(0x30c)][_0x3c3879(0x283)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x3c3879(0x1cc),_0x217a68),devices[_0x217a68][_0x3c3879(0x30c)]['token']&&devices[_0x217a68][_0x3c3879(0x30c)]['reason']==_0x3c3879(0x2bc)&&setSessionTimeout(_0x3c3879(0x226),_0x217a68),_0x468934[_0x3c3879(0x2fd)](_0x3c3879(0x230),{'status':_0x1c13e4[_0x3c3879(0x2e7)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x217a68][_0x3c3879(0x30c)],'externalip':devices[_0x217a68]['ip'],'publicKey':secure[_0x3c3879(0x1e5)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x217a68][_0x3c3879(0x30c)][_0x3c3879(0x1fe)]==![]&&devices[_0x217a68]['access']['reason']==_0x3c3879(0x2ac)&&temporaryAccess2FA(_0x217a68,devices[_0x217a68]['ip']);}function setSessionTimeout(_0x1a0d0b,_0x599d05){const _0x492891=_0x1fc18f;let _0x10fe70;if(_0x1a0d0b==_0x492891(0x226))_0x10fe70=loginExpiry*0x3c*0x3e8;else _0x10fe70=devices[_0x599d05]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x599d05]['telegramIpApproval'][_0x492891(0x309)]);if(devices[_0x599d05][_0x492891(0x295)])clearTimeout(devices[_0x599d05]['pidExpireLogin']);devices[_0x599d05][_0x492891(0x295)]=setTimeout(()=>{const _0x26509d=_0x492891;if(devices[_0x599d05][_0x26509d(0x241)])clearTimeout(devices[_0x599d05][_0x26509d(0x241)]);removeSocketListeners(_0x599d05),addBlacklist(_0x599d05),devices[_0x599d05][_0x26509d(0x2bf)]=null,devices[_0x599d05][_0x26509d(0x200)]=null,devices[_0x599d05]['access'][_0x26509d(0x1c0)]=null,devices[_0x599d05][_0x26509d(0x30c)]=validateAccess(devices[_0x599d05][_0x26509d(0x30c)][_0x26509d(0x1c0)],_0x599d05),!(devices[_0x599d05][_0x26509d(0x30c)][_0x26509d(0x1fe)]&&devices[_0x599d05]['access'][_0x26509d(0x283)]==_0x26509d(0x1f9))&&(_0x1a0d0b==_0x26509d(0x226)?io['to'](_0x599d05)[_0x26509d(0x2fd)](_0x26509d(0x230),{'access':{'allow':![],'reason':_0x26509d(0x269),'token':null}}):io['to'](_0x599d05)[_0x26509d(0x2fd)](_0x26509d(0x230),{'access':{'allow':![],'reason':_0x26509d(0x1cb),'token':null}})),devices[_0x599d05][_0x26509d(0x30c)][_0x26509d(0x1c0)]=null;},_0x10fe70);}function setTokenRefresh(_0x14f94e){const _0x3dc8a1=_0x1fc18f;if(devices[_0x14f94e][_0x3dc8a1(0x241)])clearTimeout(devices[_0x14f94e][_0x3dc8a1(0x241)]);devices[_0x14f94e]['pidRefreshToken']=setTimeout(()=>{const _0xf70c55=_0x3dc8a1;getClientsWithUuid(_0x14f94e)[_0xf70c55(0x308)]!=0x0?(devices[_0x14f94e][_0xf70c55(0x30c)]=refreshToken(_0x14f94e),io['to'](_0x14f94e)[_0xf70c55(0x2fd)]('status',{'status':_0xf70c55(0x31c),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x14f94e]['access'],'externalip':devices[_0x14f94e]['ip'],'publicKey':secure[_0xf70c55(0x1e5)],'validInstallation':validInstallation}),setTokenRefresh(_0x14f94e)):clearTimeout(devices[_0x14f94e][_0xf70c55(0x241)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3538c0){const _0x3fbbaa=_0x1fc18f,_0x53a692=getClient(_0x3538c0['id'])[_0x3fbbaa(0x2b4)];_0x3538c0['emit'](_0x3fbbaa(0x281),config),_0x3538c0[_0x3fbbaa(0x2fd)](_0x3fbbaa(0x1c6),cleanSettings()),_0x3538c0['on'](_0x3fbbaa(0x267),_0xe20fe5=>{const _0x25d109=_0x3fbbaa;if(validateAccess(_0xe20fe5,_0x53a692)['allow'])addBot();else logging(_0x25d109(0x1d0));}),_0x3538c0['on'](_0x3fbbaa(0x209),(_0x1177f8,_0x369b29)=>{const _0x2af435=_0x3fbbaa;if(validateAccess(_0x369b29,_0x53a692)[_0x2af435(0x1fe)])toggleBot(_0x1177f8[_0x2af435(0x2c2)],_0x1177f8[_0x2af435(0x230)],_0x1177f8[_0x2af435(0x25b)]);else logging(_0x2af435(0x1c9));}),_0x3538c0['on'](_0x3fbbaa(0x239),(_0x2cb8fc,_0x3e289a)=>{const _0x1807c4=_0x3fbbaa;if(validateAccess(_0x3e289a,_0x53a692)[_0x1807c4(0x1fe)])toggleBotMode(_0x2cb8fc);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3538c0['on'](_0x3fbbaa(0x1e1),(_0x26e7d4,_0x21792c)=>{const _0x25dcc3=_0x3fbbaa;if(validateAccess(_0x21792c,_0x53a692)[_0x25dcc3(0x1fe)])deleteBot(_0x26e7d4);else logging(_0x25dcc3(0x2e6));}),_0x3538c0['on'](_0x3fbbaa(0x31b),(_0x10ff85,_0x1c4ea1)=>{const _0x25d8bd=_0x3fbbaa;if(validateAccess(_0x1c4ea1,_0x53a692)['allow'])storeSettings(_0x10ff85,!![]);else logging(_0x25d8bd(0x224));}),_0x3538c0['on']('update-bb',_0x4d4ad7=>{const _0x4a177e=_0x3fbbaa;if(validateAccess(_0x4d4ad7,_0x53a692)['allow'])updateBB();else logging(_0x4a177e(0x254));}),_0x3538c0['on']('get-messages',_0x3282a3=>{const _0x4ef079=_0x3fbbaa;if(validateAccess(_0x3282a3,_0x53a692)[_0x4ef079(0x1fe)])getMessages();else logging(_0x4ef079(0x25c));}),_0x3538c0['on'](_0x3fbbaa(0x328),(_0x13d546,_0x37e9a1)=>{const _0x3b4d5f=_0x3fbbaa;if(validateAccess(_0x37e9a1,_0x53a692)[_0x3b4d5f(0x1fe)])confirmMessage(_0x13d546);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x3538c0['on'](_0x3fbbaa(0x2c8),_0x4a1066=>{const _0x4d54a2=_0x3fbbaa;if(validateAccess(_0x4a1066,_0x53a692)['allow']){if(devices[_0x53a692][_0x4d54a2(0x241)])clearTimeout(devices[_0x53a692][_0x4d54a2(0x241)]);if(devices[_0x53a692]['pidExpireLogin'])clearTimeout(devices[_0x53a692][_0x4d54a2(0x295)]);removeSocketListeners(getClient(_0x3538c0['id'])[_0x4d54a2(0x2b4)]),addBlacklist(_0x53a692),devices[_0x53a692][_0x4d54a2(0x2bf)]=null,devices[_0x53a692][_0x4d54a2(0x200)]=null,devices[_0x53a692][_0x4d54a2(0x30c)][_0x4d54a2(0x1c0)]=null,io['to'](getClient(_0x3538c0['id'])['uuid'])['emit'](_0x4d54a2(0x230),{'access':{'allow':![],'reason':_0x4d54a2(0x2e1),'token':null}});}else logging(_0x4d54a2(0x257));});}function initializeSocketBot(_0x530634){const _0x3f71e9=_0x1fc18f,_0x28baaf=getClient(_0x530634['id'])[_0x3f71e9(0x231)],_0x1b7d0d=getClient(_0x530634['id'])[_0x3f71e9(0x2b4)];_0x530634['on'](_0x3f71e9(0x25f),(_0x44da08,_0x3649aa)=>{const _0x547667=_0x3f71e9;if(validateAccess(_0x3649aa,_0x1b7d0d)[_0x547667(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf][_0x547667(0x2d0)]({'function':'emitHistory','args':_0x44da08});}else logging(_0x547667(0x326));}),_0x530634['on'](_0x3f71e9(0x20b),(_0x4f49a1,_0x20fdd4)=>{const _0xabf571=_0x3f71e9;if(validateAccess(_0x20fdd4,_0x1b7d0d)[_0xabf571(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf][_0xabf571(0x2d0)]({'function':_0xabf571(0x1bf),'args':_0x4f49a1});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x530634['on'](_0x3f71e9(0x211),(_0x45c8d2,_0x1d6607)=>{const _0x14203b=_0x3f71e9;if(validateAccess(_0x1d6607,_0x1b7d0d)[_0x14203b(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf]['send']({'function':_0x14203b(0x1ea),'args':_0x45c8d2});}else logging(_0x14203b(0x271));}),_0x530634['on'](_0x3f71e9(0x223),(_0x30055e,_0x4e3171)=>{const _0xbc2d9b=_0x3f71e9;if(validateAccess(_0x4e3171,_0x1b7d0d)['allow']){if(pid[_0x28baaf])pid[_0x28baaf][_0xbc2d9b(0x2d0)]({'function':_0xbc2d9b(0x310),'args':_0x30055e});}else logging(_0xbc2d9b(0x30a));}),_0x530634['on'](_0x3f71e9(0x2ed),(_0x494f86,_0x2533e7)=>{const _0x4137f6=_0x3f71e9;if(validateAccess(_0x2533e7,_0x1b7d0d)[_0x4137f6(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf][_0x4137f6(0x2d0)]({'function':'storeHeadless','args':_0x494f86});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x530634['on']('get-starting-balances',_0x45d443=>{const _0x35b258=_0x3f71e9;if(validateAccess(_0x45d443,_0x1b7d0d)['allow']){if(pid[_0x28baaf])pid[_0x28baaf][_0x35b258(0x2d0)]({'function':_0x35b258(0x2ce),'args':null});}else logging(_0x35b258(0x20d));}),_0x530634['on'](_0x3f71e9(0x29a),(_0x47b460,_0x57f34b)=>{const _0x235a6d=_0x3f71e9;if(validateAccess(_0x57f34b,_0x1b7d0d)[_0x235a6d(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf][_0x235a6d(0x2d0)]({'function':'placeOrder','args':_0x47b460});}else logging(_0x235a6d(0x2d7));}),_0x530634['on'](_0x3f71e9(0x2b5),_0x51fb0f=>{const _0x3986b6=_0x3f71e9;if(validateAccess(_0x51fb0f,_0x1b7d0d)[_0x3986b6(0x1fe)]){if(pid[_0x28baaf])pid[_0x28baaf]['send']({'function':_0x3986b6(0x1bb),'args':null});}else logging(_0x3986b6(0x1e6));}),_0x530634['on'](_0x3f71e9(0x249),_0x5b84e8=>{const _0x113959=_0x3f71e9;if(validateAccess(_0x5b84e8,_0x1b7d0d)['allow'])updateBB();else logging(_0x113959(0x254));}),_0x530634['on'](_0x3f71e9(0x201),_0x2f65a9=>{const _0x161393=_0x3f71e9;if(validateAccess(_0x2f65a9,_0x1b7d0d)[_0x161393(0x1fe)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x530634['on']('confirm-message',(_0x3253c2,_0x1cd8b4)=>{const _0x3888f0=_0x3f71e9;if(validateAccess(_0x1cd8b4,_0x1b7d0d)[_0x3888f0(0x1fe)])confirmMessage(_0x3253c2);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x530634['on'](_0x3f71e9(0x2c8),_0x460000=>{const _0x21a656=_0x3f71e9;if(validateAccess(_0x460000,_0x1b7d0d)[_0x21a656(0x1fe)]){if(devices[_0x1b7d0d][_0x21a656(0x241)])clearTimeout(devices[_0x1b7d0d][_0x21a656(0x241)]);if(devices[_0x1b7d0d][_0x21a656(0x295)])clearTimeout(devices[_0x1b7d0d][_0x21a656(0x295)]);removeSocketListeners(getClient(_0x530634['id'])[_0x21a656(0x2b4)]),addBlacklist(_0x1b7d0d),devices[_0x1b7d0d][_0x21a656(0x2bf)]=null,devices[_0x1b7d0d]['telegram2FaApproval']=null,devices[_0x1b7d0d][_0x21a656(0x30c)][_0x21a656(0x1c0)]=null,io['to'](getClient(_0x530634['id'])[_0x21a656(0x2b4)])[_0x21a656(0x2fd)]('status',{'access':{'allow':![],'reason':_0x21a656(0x2e1),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x2bc2cc){const _0x56eae9=_0x1fc18f;getClientsWithUuid(_0x2bc2cc)[_0x56eae9(0x20a)](_0x294c35=>{getSocket(_0x294c35['id'])['removeAllListeners']();});}function cleanSettings(){const _0x1d628a=_0x1fc18f;let _0x4edad0=settings;return settings[_0x1d628a(0x29f)]&&settings[_0x1d628a(0x29f)]!=''&&(_0x4edad0={..._0x4edad0,'telegramToken':'************'}),settings['bbPassword']&&settings[_0x1d628a(0x307)]!=''&&(_0x4edad0={..._0x4edad0,'bbPassword':'************'}),_0x4edad0;}function updateBB(){const _0x496232=_0x1fc18f;installingUpdate=!![],config['forEach'](_0x1f8cc0=>{const _0x5b7393=_0x4f4a;restartBot(_0x1f8cc0[_0x5b7393(0x2c2)]);}),process[_0x496232(0x2d0)]({'update':!![]},_0xe1afaf=>{});}function startBot(_0x2ca3f2,_0x3ac789,_0x1b7fd3){const _0x16455=_0x1fc18f;let _0x15c21c=![];const _0x5ae693=_0x2ca3f2[0x0];_0x3ac789={..._0x3ac789,'stdio':['inherit',_0x16455(0x203),_0x16455(0x203),_0x16455(0x320)]},pid[_0x5ae693]=childProcess[_0x16455(0x23b)](botfile,_0x2ca3f2,_0x3ac789),pid[_0x5ae693]['on'](_0x16455(0x2b9),_0x14cdf5=>{const _0x13533a=_0x16455;switch(Object[_0x13533a(0x1e3)](_0x14cdf5)[0x0]){case _0x13533a(0x1d5):updateBotName(_0x5ae693,_0x14cdf5[_0x13533a(0x1d5)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x5ae693,_0x14cdf5[_0x13533a(0x230)]);break;case'live':updateLive(_0x5ae693,_0x14cdf5[_0x13533a(0x25b)]);break;case _0x13533a(0x234):updateLive(_0x5ae693,_0x14cdf5[_0x13533a(0x234)]),io['to'](_0x5ae693)[_0x13533a(0x2fd)](_0x13533a(0x230),{'access':{'allow':![],'reason':_0x13533a(0x2ca),'token':null}});break;case _0x13533a(0x1be):_0x14cdf5[_0x13533a(0x1be)]=='restart'&&restartBot(_0x5ae693);_0x14cdf5[_0x13533a(0x1be)]==_0x13533a(0x1f7)&&toggleBot(_0x5ae693,_0x13533a(0x2a4),'stopped');break;case _0x13533a(0x21f):sendTelegram(_0x5ae693,_0x14cdf5[_0x13533a(0x21f)]);break;case _0x13533a(0x202):sendTelegramMsg(_0x14cdf5['telegrammsg']);break;case _0x13533a(0x2ff):io['to'](_0x5ae693)[_0x13533a(0x2fd)](_0x14cdf5['function'],_0x14cdf5[_0x13533a(0x1ca)]);break;}}),pid[_0x5ae693]['on']('error',function(_0x2c0aee){if(_0x15c21c)return;_0x15c21c=!![],_0x1b7fd3(_0x2c0aee);}),pid[_0x5ae693]['on'](_0x16455(0x290),function(_0x2c480c){const _0x560313=_0x16455;if(installingUpdate)return;if(_0x15c21c)return;_0x15c21c=!![],_0x1b7fd3(null);const _0x42f2b2=dbConfig[_0x560313(0x2a1)](_0x560313(0x281))[_0x560313(0x228)]({'botID':_0x5ae693})['value']();_0x42f2b2&&(_0x42f2b2['status']=='enabled'||_0x42f2b2[_0x560313(0x230)]==_0x560313(0x2f7))&&(updateLive(_0x5ae693,_0x560313(0x28a)),logging('restarting\x20Bot\x20'+_0x5ae693),startBot([_0x5ae693,userID],{'cwd':bbpath},function(_0x103f4f){if(_0x103f4f)logging(_0x103f4f);}));});}function stopBot(_0x5810aa){const _0x1b26b6=_0x1fc18f;getClientsWithBotID(_0x5810aa)[_0x1b26b6(0x20a)](_0x297217=>{getSocket(_0x297217['id'])['disconnect'](!![]),removeClient(_0x297217['id']);}),pid[_0x5810aa]&&(pid[_0x5810aa][_0x1b26b6(0x1f7)](),pid[_0x5810aa]=null);}function restartBot(_0x32f8e9){const _0x16c922=_0x1fc18f;if(pid[_0x32f8e9])pid[_0x32f8e9][_0x16c922(0x1f7)]();}function addBot(){const _0x59bce3=_0x1fc18f;let _0xc27e77;for(let _0x3b4429=0x1;_0x3b4429<0x3e9;_0x3b4429++){_0xc27e77=_0x3b4429['toString']()['padStart'](0x3,'0');let _0x54d167=config['find'](_0x2d1e56=>_0x2d1e56[_0x59bce3(0x2c2)]==_0xc27e77);if(!_0x54d167)break;}if(_0xc27e77===_0x59bce3(0x313)){logging(_0x59bce3(0x28e));return;}logging(_0x59bce3(0x2c0)+_0xc27e77),dbConfig[_0x59bce3(0x2a1)](_0x59bce3(0x281))['push']({'botID':_0xc27e77,'botname':'Bot\x20'+_0xc27e77,'status':_0x59bce3(0x2f7),'live':''})[_0x59bce3(0x2c6)](),startBot([_0xc27e77,userID],{'cwd':bbpath},function(_0x1d2e84){if(_0x1d2e84)logging(_0x1d2e84);}),config=getConfiguration(),io['to'](_0x59bce3(0x2d3))[_0x59bce3(0x2fd)](_0x59bce3(0x281),config);}function deleteBot(_0x1ce991){const _0x166bcc=_0x1fc18f;getClientsWithBotID(_0x1ce991)[_0x166bcc(0x20a)](_0x421134=>{const _0x42da55=_0x166bcc;getSocket(_0x421134['id'])[_0x42da55(0x266)](!![]),removeClient(_0x421134['id']);}),dbConfig[_0x166bcc(0x2a1)](_0x166bcc(0x281))[_0x166bcc(0x258)]({'botID':_0x1ce991})[_0x166bcc(0x2c6)](),logging(_0x166bcc(0x1e7)+_0x1ce991),stopBot(_0x1ce991);try{fs['unlinkSync'](path[_0x166bcc(0x245)](configpath,_0x166bcc(0x260)+_0x1ce991+_0x166bcc(0x293))),fs[_0x166bcc(0x304)](path[_0x166bcc(0x245)](configpath,_0x166bcc(0x260)+_0x1ce991+'-events.json')),fs['unlinkSync'](path[_0x166bcc(0x245)](configpath,'bot-'+_0x1ce991+_0x166bcc(0x205))),fs['unlinkSync'](path['join'](configpath,'bot-'+_0x1ce991+'-results.json'));}catch(_0x5b07ab){if(_0x5b07ab)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x5b07ab);}config=getConfiguration(),io['to'](_0x166bcc(0x2d3))[_0x166bcc(0x2fd)](_0x166bcc(0x281),config);}function toggleBot(_0x27c6d5,_0x4790e6,_0x43f4f5){const _0x429689=_0x1fc18f;dbConfig[_0x429689(0x2a1)](_0x429689(0x281))[_0x429689(0x228)]({'botID':_0x27c6d5})['assign']({'status':_0x4790e6})[_0x429689(0x2ef)]({'live':_0x43f4f5})[_0x429689(0x2c6)]();if(_0x4790e6=='enabled'||_0x4790e6=='new')logging(_0x429689(0x323)+_0x27c6d5),startBot([_0x27c6d5,userID],{'cwd':bbpath},function(_0x2d443f){if(_0x2d443f)logging(_0x2d443f);});else(_0x4790e6==_0x429689(0x2a4)||_0x4790e6==_0x429689(0x20e))&&(logging('disabled\x20Bot\x20'+_0x27c6d5),stopBot(_0x27c6d5));config=getConfiguration(),io['to'](_0x429689(0x2d3))[_0x429689(0x2fd)](_0x429689(0x281),config);}function toggleStatus(_0x96e0d1){const _0x26052c=_0x1fc18f;let _0x149bb3=dbConfig[_0x26052c(0x2a1)](_0x26052c(0x281))[_0x26052c(0x228)]({'botID':_0x96e0d1})[_0x26052c(0x256)](),_0x5914da;if(_0x149bb3[_0x26052c(0x230)]===_0x26052c(0x2d4))_0x5914da=_0x26052c(0x2a4);else{if(_0x149bb3[_0x26052c(0x230)]===_0x26052c(0x2f7))_0x5914da=_0x26052c(0x20e);else{if(_0x149bb3[_0x26052c(0x230)]===_0x26052c(0x20e))_0x5914da=_0x26052c(0x2f7);else{if(_0x149bb3[_0x26052c(0x230)]===_0x26052c(0x2a4))_0x5914da=_0x26052c(0x2d4);}}}return _0x5914da;}function updateStatus(_0x1f62cd,_0x3f144f){const _0x528533=_0x1fc18f;dbConfig[_0x528533(0x2a1)](_0x528533(0x281))[_0x528533(0x228)]({'botID':_0x1f62cd})['assign']({'status':_0x3f144f})[_0x528533(0x2c6)](),config=getConfiguration(),io['to'](_0x528533(0x2d3))[_0x528533(0x2fd)](_0x528533(0x281),config);}function updateLive(_0x33d246,_0x174ed8){const _0x4d2c8a=_0x1fc18f;dbConfig[_0x4d2c8a(0x2a1)](_0x4d2c8a(0x281))['find']({'botID':_0x33d246})[_0x4d2c8a(0x2ef)]({'live':_0x174ed8})[_0x4d2c8a(0x2c6)](),config=getConfiguration(),io['to'](_0x4d2c8a(0x2d3))[_0x4d2c8a(0x2fd)]('bots',config);}function updateBotName(_0x53bcc3,_0x2939fb){const _0x388a3e=_0x1fc18f;dbConfig[_0x388a3e(0x2a1)]('bots')[_0x388a3e(0x228)]({'botID':_0x53bcc3})['assign']({'botname':_0x2939fb})[_0x388a3e(0x2c6)](),config=getConfiguration(),io['to'](_0x388a3e(0x2d3))[_0x388a3e(0x2fd)]('bots',config);}function updateBotManager(){const _0x4845fc=_0x1fc18f;config=getConfiguration(),io['to'](_0x4845fc(0x2d3))[_0x4845fc(0x2fd)]('bots',config);}function toggleBotMode(_0x203b7){const _0x2e2d0d=_0x1fc18f;if(pid[_0x203b7])pid[_0x203b7][_0x2e2d0d(0x2d0)]({'function':_0x2e2d0d(0x1bc),'args':null});else{const _0x293e93=configpath+'bot-'+_0x203b7+_0x2e2d0d(0x293),_0x4e6581=fs[_0x2e2d0d(0x1d2)](_0x293e93),_0x36ad6e=JSON[_0x2e2d0d(0x1d8)](_0x4e6581),_0xae47ef=_0x36ad6e['bot'][0x0][_0x2e2d0d(0x286)];_0x36ad6e[_0x2e2d0d(0x231)][0x0]['headless']=!_0xae47ef;const _0x36db3c=JSON[_0x2e2d0d(0x29d)](_0x36ad6e,null,0x2);fs[_0x2e2d0d(0x2df)](_0x293e93,_0x36db3c),config=getConfiguration(),io['to'](_0x2e2d0d(0x2d3))[_0x2e2d0d(0x2fd)](_0x2e2d0d(0x281),config);}}function telegramError(_0x382554){const _0x2ffdc8=_0x1fc18f;console[_0x2ffdc8(0x1ce)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x262c95){const _0x4d1384=_0x1fc18f;if(_0x262c95[_0x4d1384(0x204)]['username']!=settings[_0x4d1384(0x240)]&&'@'+_0x262c95[_0x4d1384(0x204)][_0x4d1384(0x2c3)]!=settings[_0x4d1384(0x240)])return tgBot[_0x4d1384(0x1eb)](_0x262c95[_0x4d1384(0x335)]['id'],_0x4d1384(0x1c2),{'parse_mode':'HTML'})[_0x4d1384(0x2d8)](_0x481a0a=>{telegramError(_0x481a0a);}),![];return!![];}async function initTelegram(){const _0x663e0e=_0x1fc18f;if(tgBot)tgBot[_0x663e0e(0x26f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x663e0e(0x29f)],{'polling':!![]});let _0xdb8fec=_0x663e0e(0x317);_0xdb8fec+='\x0a',_0xdb8fec+='/enable\x20-\x20enable\x20notifications\x0a',_0xdb8fec+=_0x663e0e(0x1dd),_0xdb8fec+=_0x663e0e(0x2f0),_0xdb8fec+=_0x663e0e(0x2a8),_0xdb8fec+=_0x663e0e(0x2c7),_0xdb8fec+='/off\x20-\x20stop\x20bot(s)\x0a',_0xdb8fec+=_0x663e0e(0x207),_0xdb8fec+=_0x663e0e(0x2f3),_0xdb8fec+=_0x663e0e(0x31f),_0xdb8fec+=_0x663e0e(0x2d2),_0xdb8fec+=_0x663e0e(0x32c),_0xdb8fec+=_0x663e0e(0x30e);let _0x17a09d=_0x663e0e(0x22c);_0x17a09d+='\x0a',_0x17a09d+=_0xdb8fec,tgBot['onText'](/\/start/,_0x225b64=>{const _0x4fd8f0=_0x663e0e;if(!validateTelegram(_0x225b64))return;if(settings[_0x4fd8f0(0x246)]!=_0x225b64[_0x4fd8f0(0x335)]['id'])updateSetting('telegramChatId',_0x225b64[_0x4fd8f0(0x335)]['id']);updateSetting(_0x4fd8f0(0x23a),!![]),tgBot[_0x4fd8f0(0x1eb)](_0x225b64[_0x4fd8f0(0x335)]['id'],_0x17a09d)['catch'](_0x402aeb=>{telegramError(_0x402aeb);});}),tgBot[_0x663e0e(0x1f1)](/\/enable/,_0x131c54=>{const _0x45c4cd=_0x663e0e;if(!validateTelegram(_0x131c54))return;if(settings['telegramChatId']!=_0x131c54[_0x45c4cd(0x335)]['id'])updateSetting(_0x45c4cd(0x246),_0x131c54[_0x45c4cd(0x335)]['id']);updateSetting(_0x45c4cd(0x23a),!![]),tgBot[_0x45c4cd(0x1eb)](_0x131c54[_0x45c4cd(0x335)]['id'],_0x45c4cd(0x251))[_0x45c4cd(0x2d8)](_0x23b4ec=>{telegramError(_0x23b4ec);});}),tgBot[_0x663e0e(0x1f1)](/\/config/,async _0x24ab54=>{const _0x4731c9=_0x663e0e;if(!validateTelegram(_0x24ab54))return;tgBot['removeListener']('callback_query'),tgBot[_0x4731c9(0x1eb)](_0x24ab54[_0x4731c9(0x335)]['id'],_0x4731c9(0x253),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x4731c9(0x24e)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x4731c9(0x255),'callback_data':_0x4731c9(0x2e3)}]]}})[_0x4731c9(0x2d8)](_0x17a74a=>{telegramError(_0x17a74a);}),tgBot['on'](_0x4731c9(0x2db),async _0x21b86c=>{const _0x5f3300=_0x4731c9,_0x34ec6c=_0x21b86c[_0x5f3300(0x20f)],_0x2b98b7=_0x21b86c[_0x5f3300(0x2b9)];tgBot[_0x5f3300(0x1f8)](_0x21b86c['id'])['then'](async()=>{const _0x2fe714=_0x5f3300;_0x34ec6c==_0x2fe714(0x24e)&&(updateSetting(_0x2fe714(0x32a),'orders'),updateSetting(_0x2fe714(0x23a),!![]),await tgBot[_0x2fe714(0x1eb)](_0x2b98b7[_0x2fe714(0x335)]['id'],_0x2fe714(0x299))[_0x2fe714(0x2d8)](_0x67a34c=>{telegramError(_0x67a34c);}));_0x34ec6c==_0x2fe714(0x24a)&&(updateSetting(_0x2fe714(0x32a),_0x2fe714(0x24a)),updateSetting(_0x2fe714(0x23a),!![]),await tgBot[_0x2fe714(0x1eb)](_0x2b98b7[_0x2fe714(0x335)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x131981=>{telegramError(_0x131981);}));_0x34ec6c==_0x2fe714(0x2e3)&&(updateSetting(_0x2fe714(0x32a),_0x2fe714(0x2e3)),updateSetting(_0x2fe714(0x23a),!![]),await tgBot[_0x2fe714(0x1eb)](_0x2b98b7[_0x2fe714(0x335)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x2fe714(0x2d8)](_0x24cea4=>{telegramError(_0x24cea4);}));if(!settings[_0x2fe714(0x246)])tgBot[_0x2fe714(0x1eb)](_0x2b98b7[_0x2fe714(0x335)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2fe714(0x2d8)](_0x1dd3ff=>{telegramError(_0x1dd3ff);});}),tgBot[_0x5f3300(0x26d)](_0x5f3300(0x2db));});}),tgBot[_0x663e0e(0x1f1)](/\/status/,_0x9fe696=>{const _0x348f19=_0x663e0e;if(!validateTelegram(_0x9fe696))return;const _0x5513f6=getBotsWithMode();let _0x1185fe=_0x348f19(0x2fe);config[_0x348f19(0x20a)](_0x2acd73=>{const _0x2ab8aa=_0x348f19,_0x307a5a=_0x5513f6[_0x2ab8aa(0x228)](_0x22eb44=>_0x22eb44[_0x2ab8aa(0x2c2)]==_0x2acd73[_0x2ab8aa(0x2c2)])[_0x2ab8aa(0x20c)];_0x1185fe+=_0x2ab8aa(0x1e8)+_0x2acd73[_0x2ab8aa(0x2c2)]+':\x20'+_0x2acd73['status']+_0x2ab8aa(0x23f)+_0x307a5a+'\x20|\x20'+_0x2acd73['live']+'\x0a';}),_0x1185fe+='\x0a',_0x1185fe+=_0x348f19(0x22a),_0x1185fe+=!settings[_0x348f19(0x23a)]?_0x348f19(0x276):'Notifications\x20enabled\x0a',_0x1185fe+=settings[_0x348f19(0x23a)]?settings[_0x348f19(0x32a)]==_0x348f19(0x2e3)?_0x348f19(0x279):_0x348f19(0x1ba)+settings[_0x348f19(0x32a)]+_0x348f19(0x26e):'',tgBot['sendMessage'](_0x9fe696[_0x348f19(0x335)]['id'],_0x1185fe,{'parse_mode':'HTML'})['catch'](_0x42a153=>{telegramError(_0x42a153);});}),tgBot['onText'](/\/restart/,_0x2c6a08=>{const _0x58359b=_0x663e0e;if(!validateTelegram(_0x2c6a08))return;tgBot['removeListener'](_0x58359b(0x2db));const _0x3abd8f=getEnabledBots();if(_0x3abd8f[_0x58359b(0x308)]==0x0)tgBot[_0x58359b(0x1eb)](_0x2c6a08['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x58359b(0x2d8)](_0x4e4de0=>{telegramError(_0x4e4de0);});else{if(_0x3abd8f[_0x58359b(0x308)]>0x1)_0x3abd8f[_0x58359b(0x30f)]({'botID':_0x58359b(0x2e3)});let _0x530919=[],_0x5a711f=[];const _0x53b15e=_0x3abd8f[_0x58359b(0x308)]%0x4==0x0||_0x3abd8f[_0x58359b(0x308)]%0x4==0x3||_0x3abd8f['length']%0x3==0x1?0x4:0x3;let _0x6ca9fc=0x0;_0x3abd8f[_0x58359b(0x20a)]((_0x346199,_0x491546)=>{const _0x1dbc55=_0x58359b;if(_0x491546%_0x53b15e==0x0)_0x5a711f=[];_0x5a711f['push']({'text':_0x346199[_0x1dbc55(0x2c2)]=='all'?'All\x20bots':_0x1dbc55(0x1e8)+_0x346199[_0x1dbc55(0x2c2)],'callback_data':_0x346199[_0x1dbc55(0x2c2)]}),_0x491546%_0x53b15e==0x0&&(_0x530919[_0x6ca9fc]=_0x5a711f,_0x6ca9fc++);}),tgBot[_0x58359b(0x1eb)](_0x2c6a08[_0x58359b(0x335)]['id'],_0x58359b(0x2c4),{'reply_markup':{'inline_keyboard':_0x530919}})[_0x58359b(0x2d8)](_0x145bdd=>{telegramError(_0x145bdd);}),tgBot['on']('callback_query',async _0x14ea39=>{const _0x1b964b=_0x58359b,_0x4564cf=_0x14ea39[_0x1b964b(0x20f)],_0x195a58=_0x14ea39['message'];tgBot[_0x1b964b(0x1f8)](_0x14ea39['id'])[_0x1b964b(0x2f8)](async()=>{const _0x1fda16=_0x1b964b;_0x4564cf==_0x1fda16(0x2e3)?config['forEach'](_0xe5480e=>{const _0x1730f4=_0x1fda16;restartBot(_0xe5480e[_0x1730f4(0x2c2)]);}):restartBot(_0x4564cf);}),tgBot[_0x1b964b(0x26d)](_0x1b964b(0x2db));});}}),tgBot[_0x663e0e(0x1f1)](/\/on/,_0x22f33a=>{const _0x115a2d=_0x663e0e;if(!validateTelegram(_0x22f33a))return;tgBot[_0x115a2d(0x26d)](_0x115a2d(0x2db));const _0x51b24d=getDisabledBots();if(_0x51b24d[_0x115a2d(0x308)]==0x0)tgBot['sendMessage'](_0x22f33a[_0x115a2d(0x335)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x115a2d(0x2d8)](_0x709c5=>{telegramError(_0x709c5);});else{if(_0x51b24d['length']>0x1)_0x51b24d[_0x115a2d(0x30f)]({'botID':'all'});let _0x3d72df=[],_0x580b82=[];const _0x342115=_0x51b24d[_0x115a2d(0x308)]%0x4==0x0||_0x51b24d[_0x115a2d(0x308)]%0x4==0x3||_0x51b24d[_0x115a2d(0x308)]%0x3==0x1?0x4:0x3;let _0x51861f=0x0;_0x51b24d[_0x115a2d(0x20a)]((_0x53ab70,_0x1fc518)=>{const _0x31a247=_0x115a2d;if(_0x1fc518%_0x342115==0x0)_0x580b82=[];_0x580b82[_0x31a247(0x30f)]({'text':_0x53ab70['botID']==_0x31a247(0x2e3)?'All\x20bots':'Bot\x20'+_0x53ab70[_0x31a247(0x2c2)],'callback_data':_0x53ab70[_0x31a247(0x2c2)]}),_0x1fc518%_0x342115==0x0&&(_0x3d72df[_0x51861f]=_0x580b82,_0x51861f++);}),tgBot['sendMessage'](_0x22f33a[_0x115a2d(0x335)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3d72df}})['catch'](_0x15628c=>{telegramError(_0x15628c);}),tgBot['on'](_0x115a2d(0x2db),async _0x2aa464=>{const _0x28a420=_0x115a2d,_0x343d0d=_0x2aa464[_0x28a420(0x20f)],_0x42a241=_0x2aa464[_0x28a420(0x2b9)];tgBot[_0x28a420(0x1f8)](_0x2aa464['id'])[_0x28a420(0x2f8)](async()=>{const _0x593290=_0x28a420;_0x343d0d=='all'?(tgBot[_0x593290(0x1eb)](_0x42a241[_0x593290(0x335)]['id'],_0x593290(0x250))[_0x593290(0x2d8)](_0x5af420=>{telegramError(_0x5af420);}),_0x51b24d[_0x593290(0x20a)](_0x4e584f=>{const _0x448048=_0x593290;if(_0x4e584f[_0x448048(0x2c2)]!='all')toggleBot(_0x4e584f[_0x448048(0x2c2)],toggleStatus(_0x4e584f[_0x448048(0x2c2)]),'stopped');})):(tgBot[_0x593290(0x1eb)](_0x42a241['chat']['id'],_0x593290(0x32e)+_0x343d0d)[_0x593290(0x2d8)](_0x344d98=>{telegramError(_0x344d98);}),toggleBot(_0x343d0d,toggleStatus(_0x343d0d),_0x593290(0x28a)));}),tgBot[_0x28a420(0x26d)](_0x28a420(0x2db));});}}),tgBot[_0x663e0e(0x1f1)](/\/off/,_0xfdc4e3=>{const _0x474404=_0x663e0e;if(!validateTelegram(_0xfdc4e3))return;tgBot[_0x474404(0x26d)](_0x474404(0x2db));const _0x248394=getEnabledBots();if(_0x248394[_0x474404(0x308)]==0x0)tgBot[_0x474404(0x1eb)](_0xfdc4e3[_0x474404(0x335)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x474404(0x2d8)](_0x9edbaf=>{telegramError(_0x9edbaf);});else{if(_0x248394[_0x474404(0x308)]>0x1)_0x248394['push']({'botID':_0x474404(0x2e3)});let _0x2b43c9=[],_0x3a57d3=[];const _0xdee29e=_0x248394[_0x474404(0x308)]%0x4==0x0||_0x248394[_0x474404(0x308)]%0x4==0x3||_0x248394[_0x474404(0x308)]%0x3==0x1?0x4:0x3;let _0x49869f=0x0;_0x248394[_0x474404(0x20a)]((_0x6d3156,_0x369f5f)=>{const _0x18d314=_0x474404;if(_0x369f5f%_0xdee29e==0x0)_0x3a57d3=[];_0x3a57d3[_0x18d314(0x30f)]({'text':_0x6d3156[_0x18d314(0x2c2)]==_0x18d314(0x2e3)?'All\x20bots':_0x18d314(0x1e8)+_0x6d3156[_0x18d314(0x2c2)],'callback_data':_0x6d3156[_0x18d314(0x2c2)]}),_0x369f5f%_0xdee29e==0x0&&(_0x2b43c9[_0x49869f]=_0x3a57d3,_0x49869f++);}),tgBot['sendMessage'](_0xfdc4e3[_0x474404(0x335)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2b43c9}})[_0x474404(0x2d8)](_0x4fc539=>{telegramError(_0x4fc539);}),tgBot['on'](_0x474404(0x2db),async _0x2db07d=>{const _0x2b2911=_0x474404,_0x5e5446=_0x2db07d[_0x2b2911(0x20f)],_0x25d5e5=_0x2db07d[_0x2b2911(0x2b9)];tgBot[_0x2b2911(0x1f8)](_0x2db07d['id'])['then'](async()=>{const _0x60d1fe=_0x2b2911;_0x5e5446==_0x60d1fe(0x2e3)?(tgBot[_0x60d1fe(0x1eb)](_0x25d5e5[_0x60d1fe(0x335)]['id'],_0x60d1fe(0x32d))[_0x60d1fe(0x2d8)](_0x408a17=>{telegramError(_0x408a17);}),_0x248394[_0x60d1fe(0x20a)](_0x5bf117=>{const _0x294b87=_0x60d1fe;if(_0x5bf117[_0x294b87(0x2c2)]!=_0x294b87(0x2e3))toggleBot(_0x5bf117[_0x294b87(0x2c2)],toggleStatus(_0x5bf117[_0x294b87(0x2c2)]),_0x294b87(0x28a));})):(tgBot[_0x60d1fe(0x1eb)](_0x25d5e5[_0x60d1fe(0x335)]['id'],_0x60d1fe(0x268)+_0x5e5446)[_0x60d1fe(0x2d8)](_0x48363b=>{telegramError(_0x48363b);}),toggleBot(_0x5e5446,toggleStatus(_0x5e5446),_0x60d1fe(0x28a)));}),tgBot['removeListener'](_0x2b2911(0x2db));});}}),tgBot[_0x663e0e(0x1f1)](/\/portfolio/,_0x5f27d0=>{const _0x5a9adf=_0x663e0e;if(!validateTelegram(_0x5f27d0))return;tgBot['removeListener'](_0x5a9adf(0x2db));const _0x58957c=getEnabledBots();if(_0x58957c[_0x5a9adf(0x308)]==0x0)tgBot[_0x5a9adf(0x1eb)](_0x5f27d0[_0x5a9adf(0x335)]['id'],_0x5a9adf(0x1fa))[_0x5a9adf(0x2d8)](_0x5c46d3=>{telegramError(_0x5c46d3);});else{if(_0x58957c[_0x5a9adf(0x308)]>0x1){let _0x200e26=[],_0x27fd92=[];const _0x1eb663=_0x58957c[_0x5a9adf(0x308)]%0x4==0x0||_0x58957c[_0x5a9adf(0x308)]%0x4==0x3||_0x58957c[_0x5a9adf(0x308)]%0x3==0x1?0x4:0x3;let _0x1af15d=0x0;_0x58957c[_0x5a9adf(0x20a)]((_0x103c18,_0x17a456)=>{const _0xeb4a98=_0x5a9adf;if(_0x17a456%_0x1eb663==0x0)_0x27fd92=[];_0x27fd92[_0xeb4a98(0x30f)]({'text':_0xeb4a98(0x1e8)+_0x103c18[_0xeb4a98(0x2c2)],'callback_data':_0x103c18[_0xeb4a98(0x2c2)]}),_0x17a456%_0x1eb663==0x0&&(_0x200e26[_0x1af15d]=_0x27fd92,_0x1af15d++);}),tgBot[_0x5a9adf(0x1eb)](_0x5f27d0[_0x5a9adf(0x335)]['id'],_0x5a9adf(0x1c7),{'reply_markup':{'inline_keyboard':_0x200e26}})[_0x5a9adf(0x2d8)](_0x64068b=>{telegramError(_0x64068b);}),tgBot['on'](_0x5a9adf(0x2db),async _0x51b21d=>{const _0x2d23f7=_0x5a9adf,_0x246ac3=_0x51b21d['data'],_0x447ee8=_0x51b21d[_0x2d23f7(0x2b9)];tgBot[_0x2d23f7(0x1f8)](_0x51b21d['id'])[_0x2d23f7(0x2f8)](async()=>{const _0x3d469d=_0x2d23f7;if(pid[_0x246ac3])pid[_0x246ac3][_0x3d469d(0x2d0)]({'function':_0x3d469d(0x2cc),'args':null});}),tgBot['removeListener'](_0x2d23f7(0x2db));});}else{const _0x4b6ae1=_0x58957c[0x0][_0x5a9adf(0x2c2)];if(pid[_0x4b6ae1])pid[_0x4b6ae1]['send']({'function':_0x5a9adf(0x2cc),'args':null});}}}),tgBot[_0x663e0e(0x1f1)](/\/update/,async _0x355578=>{const _0x3d9b63=_0x663e0e;if(!validateTelegram(_0x355578))return;tgBot['removeListener'](_0x3d9b63(0x2db)),await getMessages();if(!updateAvailable)tgBot[_0x3d9b63(0x1eb)](_0x355578[_0x3d9b63(0x335)]['id'],_0x3d9b63(0x2fb))['catch'](_0x239f15=>{telegramError(_0x239f15);});else!validInstallation?tgBot[_0x3d9b63(0x1eb)](_0x355578[_0x3d9b63(0x335)]['id'],_0x3d9b63(0x2cb))['catch'](_0x299669=>{telegramError(_0x299669);}):(tgBot[_0x3d9b63(0x1eb)](_0x355578[_0x3d9b63(0x335)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x3d9b63(0x2da),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x33e788=>{telegramError(_0x33e788);}),tgBot['on'](_0x3d9b63(0x2db),async _0x58c24c=>{const _0x1f74ab=_0x3d9b63,_0x1b9822=_0x58c24c['data'],_0x3e37a0=_0x58c24c[_0x1f74ab(0x2b9)];tgBot[_0x1f74ab(0x1f8)](_0x58c24c['id'])[_0x1f74ab(0x2f8)](async()=>{const _0x2ab238=_0x1f74ab;_0x1b9822==_0x2ab238(0x1d1)&&(await tgBot['sendMessage'](_0x3e37a0[_0x2ab238(0x335)]['id'],_0x2ab238(0x2a9))[_0x2ab238(0x2d8)](_0xeacff=>{telegramError(_0xeacff);}),updateBB());_0x1b9822=='no'&&await tgBot['sendMessage'](_0x3e37a0['chat']['id'],_0x2ab238(0x2e2))[_0x2ab238(0x2d8)](_0x3574db=>{telegramError(_0x3574db);});if(!settings['telegramChatId'])tgBot[_0x2ab238(0x1eb)](_0x3e37a0[_0x2ab238(0x335)]['id'],_0x2ab238(0x1e2))[_0x2ab238(0x2d8)](_0x5c8896=>{telegramError(_0x5c8896);});}),tgBot[_0x1f74ab(0x26d)]('callback_query');}));}),tgBot['onText'](/\/toggle/,_0x4290c5=>{const _0x5ebdf7=_0x663e0e;if(!validateTelegram(_0x4290c5))return;tgBot[_0x5ebdf7(0x26d)](_0x5ebdf7(0x2db));const _0x1209ee=getBotsWithMode();if(_0x1209ee[_0x5ebdf7(0x308)]==0x0)tgBot['sendMessage'](_0x4290c5[_0x5ebdf7(0x335)]['id'],_0x5ebdf7(0x1fa))[_0x5ebdf7(0x2d8)](_0x458719=>{telegramError(_0x458719);});else{let _0x5cba7d=[],_0x172fa2=[];const _0x5c1ac5=0x2;let _0x3556d0=0x0;_0x1209ee[_0x5ebdf7(0x20a)]((_0xbbd98e,_0x5948ea)=>{const _0x2e645e=_0x5ebdf7;if(_0x5948ea%_0x5c1ac5==0x0)_0x172fa2=[];_0x172fa2[_0x2e645e(0x30f)]({'text':_0x2e645e(0x1e8)+_0xbbd98e['botID']+'\x20('+_0xbbd98e[_0x2e645e(0x20c)]+')','callback_data':_0xbbd98e['botID']}),_0x5948ea%_0x5c1ac5==0x0&&(_0x5cba7d[_0x3556d0]=_0x172fa2,_0x3556d0++);}),tgBot[_0x5ebdf7(0x1eb)](_0x4290c5['chat']['id'],_0x5ebdf7(0x21d),{'reply_markup':{'inline_keyboard':_0x5cba7d}})['catch'](_0xed608f=>{telegramError(_0xed608f);}),tgBot['on']('callback_query',async _0x820829=>{const _0x1a632d=_0x5ebdf7,_0x77a2fe=_0x820829[_0x1a632d(0x20f)],_0x410317=_0x820829[_0x1a632d(0x2b9)];tgBot[_0x1a632d(0x1f8)](_0x820829['id'])['then'](async()=>{const _0x4396dc=_0x1a632d,_0x5a2b5c=_0x1209ee['find'](_0x424850=>_0x424850[_0x4396dc(0x2c2)]==_0x77a2fe),_0xa2a6cc=_0x5a2b5c['mode']=='auto'?_0x4396dc(0x2ee):'auto';tgBot['sendMessage'](_0x410317[_0x4396dc(0x335)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x77a2fe+_0x4396dc(0x214)+_0xa2a6cc+_0x4396dc(0x303))[_0x4396dc(0x2d8)](_0x4f3bed=>{telegramError(_0x4f3bed);}),toggleBotMode(_0x77a2fe);}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x663e0e(0x1f1)](/\/names/,_0xc41b24=>{const _0x50a670=_0x663e0e;if(!validateTelegram(_0xc41b24))return;let _0xc9db7d='';config['forEach'](_0x3488b3=>{const _0x52a2e1=_0x4f4a;_0xc9db7d+='Bot\x20'+_0x3488b3[_0x52a2e1(0x2c2)]+':\x20'+_0x3488b3[_0x52a2e1(0x1d5)]+'\x0a';}),tgBot[_0x50a670(0x1eb)](_0xc41b24['chat']['id'],_0xc9db7d,{'parse_mode':_0x50a670(0x216)})[_0x50a670(0x2d8)](_0x48941d=>{telegramError(_0x48941d);});}),tgBot[_0x663e0e(0x1f1)](/\/disable/,_0x3a2752=>{const _0x57ac76=_0x663e0e;if(!validateTelegram(_0x3a2752))return;tgBot[_0x57ac76(0x1eb)](_0x3a2752[_0x57ac76(0x335)]['id'],_0x57ac76(0x26c))[_0x57ac76(0x2d8)](_0x2a0d71=>{telegramError(_0x2a0d71);}),updateSetting(_0x57ac76(0x23a),![]);}),tgBot[_0x663e0e(0x1f1)](/\/help/,_0x30deac=>{const _0x8ae80f=_0x663e0e;if(!validateTelegram(_0x30deac))return;tgBot['sendMessage'](_0x30deac[_0x8ae80f(0x335)]['id'],_0xdb8fec)[_0x8ae80f(0x2d8)](_0x2b495c=>{telegramError(_0x2b495c);});}),tgBot['on']('polling_error',_0x6ac1ca=>{const _0x168f35=_0x663e0e;_0x6ac1ca[_0x168f35(0x27d)]()[_0x168f35(0x1fc)](_0x168f35(0x28d))&&(logging(_0x168f35(0x26a)),tgBot[_0x168f35(0x26f)](),tgBot=null,io['to'](_0x168f35(0x2d3))[_0x168f35(0x2fd)](_0x168f35(0x27e),'Invalid\x20Telegram\x20token'));}),process[_0x663e0e(0x31a)]('SIGINT',()=>{const _0x5a22d8=_0x663e0e;if(tgBot)tgBot[_0x5a22d8(0x26f)]();process[_0x5a22d8(0x290)](0x1);}),process[_0x663e0e(0x31a)]('SIGTERM',()=>{const _0x25e7c4=_0x663e0e;if(tgBot)tgBot[_0x25e7c4(0x26f)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0xdbe813,_0x4e3cea){const _0x352d14=_0x1fc18f;if(settings[_0x352d14(0x23a)]){if(settings['telegramEvents']==_0x352d14(0x2e3)||(_0x4e3cea[_0x352d14(0x274)]==_0x352d14(0x315)||_0x4e3cea[_0x352d14(0x274)]=='success')&&settings['telegramEvents']==_0x352d14(0x24a)||_0x4e3cea[_0x352d14(0x274)]=='order'&&settings[_0x352d14(0x32a)]==_0x352d14(0x24e)){if(tgBot&&settings[_0x352d14(0x246)]){if(_0x4e3cea[_0x352d14(0x218)])tgBot[_0x352d14(0x1eb)](settings[_0x352d14(0x246)],_0x4e3cea[_0x352d14(0x1d5)]+_0x352d14(0x222)+_0x4e3cea[_0x352d14(0x1e4)])[_0x352d14(0x2d8)](_0x30d5ce=>{telegramError(_0x30d5ce);});else tgBot[_0x352d14(0x1eb)](settings[_0x352d14(0x246)],_0x352d14(0x1e8)+_0xdbe813+'\x20>\x20'+_0x4e3cea[_0x352d14(0x1e4)])[_0x352d14(0x2d8)](_0xdd1da6=>{telegramError(_0xdd1da6);});}}}}async function sendTelegramMsg(_0x2f74fa,_0x228332=_0x1fc18f(0x216)){const _0x229c2e=_0x1fc18f;return settings[_0x229c2e(0x23a)]&&tgBot&&settings[_0x229c2e(0x246)]?(await tgBot[_0x229c2e(0x1eb)](settings[_0x229c2e(0x246)],_0x2f74fa,{'parse_mode':_0x228332})[_0x229c2e(0x2d8)](_0x2e750a=>{telegramError(_0x2e750a);}),!![]):![];}function getDeviceWithIp(_0x5d2fdf){const _0x70a1a7=_0x1fc18f;return devices[_0x70a1a7(0x228)](_0x5aae63=>_0x5aae63['ip']===_0x5d2fdf);}function temporaryAccess2FA(_0x1afe45,_0x4a2fe7){const _0x49b076=_0x1fc18f;let _0x46e71f=new Date(),_0x2c076a=![];if(lastIpApproval){if(_0x46e71f-lastIpApproval<0x1388)_0x2c076a=!![];}lastIpApproval=new Date();if(_0x2c076a)return;tgBot&&settings[_0x49b076(0x246)]&&(tgBot[_0x49b076(0x26d)](_0x49b076(0x2db)),tgBot[_0x49b076(0x1eb)](settings['telegramChatId'],_0x49b076(0x278)+normalizeIP(_0x4a2fe7)[_0x49b076(0x2b7)]+_0x49b076(0x215),{'parse_mode':_0x49b076(0x216),'reply_markup':{'inline_keyboard':[[{'text':_0x49b076(0x2a5),'callback_data':'5'},{'text':_0x49b076(0x208),'callback_data':'15'},{'text':_0x49b076(0x2e9),'callback_data':'30'},{'text':'reject','callback_data':_0x49b076(0x25d)}]]}})[_0x49b076(0x2d8)](_0x8b0e77=>{telegramError(_0x8b0e77);}),tgBot['on'](_0x49b076(0x2db),async _0x2242dc=>{const _0x3768bf=_0x49b076,_0x249447=_0x2242dc['data'],_0x5303af=_0x2242dc[_0x3768bf(0x2b9)];tgBot[_0x3768bf(0x1f8)](_0x2242dc['id'])['then'](async()=>{const _0x3d4cb0=_0x3768bf;devices[_0x1afe45][_0x3d4cb0(0x2bf)]={'clientip':_0x4a2fe7,'timestamp':new Date()[_0x3d4cb0(0x330)](),'expiry':_0x249447},_0x249447!=_0x3d4cb0(0x25d)?(await tgBot[_0x3d4cb0(0x1eb)](_0x5303af[_0x3d4cb0(0x335)]['id'],_0x3d4cb0(0x262)+_0x249447+'\x20minutes',{'parse_mode':_0x3d4cb0(0x216)})['catch'](_0x3fa5c1=>{telegramError(_0x3fa5c1);}),io['to'](_0x1afe45)['emit'](_0x3d4cb0(0x230),{'access':{'allow':![],'reason':_0x3d4cb0(0x2ca),'token':null}})):(await tgBot[_0x3d4cb0(0x1eb)](_0x5303af['chat']['id'],_0x3d4cb0(0x1f0))['catch'](_0x55364a=>{telegramError(_0x55364a);}),io['to'](_0x1afe45)[_0x3d4cb0(0x2fd)](_0x3d4cb0(0x230),{'access':{'allow':![],'reason':_0x3d4cb0(0x30b),'token':null}}));}),tgBot['removeListener'](_0x3768bf(0x2db));}));}function loginAccess2FA(_0x1d72bd,_0x2034b1){const _0xd53ea6=_0x1fc18f;tgBot&&settings['telegramChatId']&&(tgBot[_0xd53ea6(0x26d)](_0xd53ea6(0x2db)),tgBot[_0xd53ea6(0x1eb)](settings['telegramChatId'],_0xd53ea6(0x29e)+normalizeIP(_0x2034b1)[_0xd53ea6(0x2b7)]+_0xd53ea6(0x215),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0xd53ea6(0x29b),'callback_data':loginExpiry},{'text':_0xd53ea6(0x25d),'callback_data':_0xd53ea6(0x25d)}]]}})['catch'](_0x40671f=>{telegramError(_0x40671f);}),tgBot['on']('callback_query',async _0x3011a7=>{const _0x3ac5fe=_0xd53ea6,_0x974056=_0x3011a7['data'],_0x1de96e=_0x3011a7[_0x3ac5fe(0x2b9)];tgBot[_0x3ac5fe(0x1f8)](_0x3011a7['id'])[_0x3ac5fe(0x2f8)](async()=>{const _0x31d57b=_0x3ac5fe;devices[_0x1d72bd][_0x31d57b(0x200)]={'clientip':_0x2034b1,'timestamp':new Date()[_0x31d57b(0x330)](),'expiry':_0x974056},_0x974056!=_0x31d57b(0x25d)?(await tgBot[_0x31d57b(0x1eb)](_0x1de96e[_0x31d57b(0x335)]['id'],'Login\x20accepted',{'parse_mode':_0x31d57b(0x216)})[_0x31d57b(0x2d8)](_0x269cd3=>{telegramError(_0x269cd3);}),io['to'](_0x1d72bd)[_0x31d57b(0x2fd)]('status',{'access':{'allow':![],'reason':_0x31d57b(0x2ca),'token':null}})):(await tgBot[_0x31d57b(0x1eb)](_0x1de96e[_0x31d57b(0x335)]['id'],_0x31d57b(0x244))['catch'](_0xd44e7e=>{telegramError(_0xd44e7e);}),io['to'](_0x1d72bd)[_0x31d57b(0x2fd)](_0x31d57b(0x230),{'access':{'allow':![],'reason':_0x31d57b(0x2fc),'token':null}}));}),tgBot[_0x3ac5fe(0x26d)](_0x3ac5fe(0x2db));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x48fa8e=_0x1fc18f;return dbConfig[_0x48fa8e(0x2a1)](_0x48fa8e(0x281))[_0x48fa8e(0x1db)](_0x48fa8e(0x2c2))[_0x48fa8e(0x294)]({'status':_0x48fa8e(0x2d4)})[_0x48fa8e(0x256)]()||[];}function getDisabledBots(){const _0x14ab6d=_0x1fc18f;return dbConfig[_0x14ab6d(0x2a1)]('bots')[_0x14ab6d(0x1db)](_0x14ab6d(0x2c2))['filter']({'status':'disabled'})['value']()||[];}function getBotsWithMode(){const _0x5f1276=_0x1fc18f,_0x2a9dbf=dbConfig[_0x5f1276(0x2a1)](_0x5f1276(0x281))[_0x5f1276(0x1db)](_0x5f1276(0x2c2))[_0x5f1276(0x256)]()||[];return _0x2a9dbf['forEach'](_0x3dcd8e=>{const _0x13522c=_0x5f1276,_0x1d515c=configpath+_0x13522c(0x260)+_0x3dcd8e[_0x13522c(0x2c2)]+_0x13522c(0x293),_0x146558=fs['existsSync'](_0x1d515c);if(_0x146558){const _0x4b4f13=fs[_0x13522c(0x1d2)](_0x1d515c);try{const _0x2a8315=JSON[_0x13522c(0x1d8)](_0x4b4f13),_0x2d48da=_0x2a8315?_0x2a8315[_0x13522c(0x231)][0x0][_0x13522c(0x286)]:![];_0x3dcd8e[_0x13522c(0x20c)]=_0x2d48da?'auto':_0x13522c(0x2ee);}catch(_0x33509a){_0x3dcd8e[_0x13522c(0x20c)]=_0x13522c(0x2ee);}}else _0x3dcd8e[_0x13522c(0x20c)]=_0x13522c(0x2ee);}),_0x2a9dbf;}async function initUser(){const _0x429c81=_0x1fc18f;if(!settings['userid']){const _0xe18063=uuidRandom();mixpanel[_0x429c81(0x1fd)](_0xe18063),updateSetting('userid',_0xe18063);}}async function initSecure(){const _0x11d3a0=_0x1fc18f;let _0x3fa4fb=getSecure();if(!_0x3fa4fb['hasOwnProperty']('secret')){let _0x2b349f=await generateKeys();_0x3fa4fb[_0x11d3a0(0x1e5)]=_0x2b349f[_0x11d3a0(0x1e5)],_0x3fa4fb['privateKey']=_0x2b349f[_0x11d3a0(0x322)],_0x3fa4fb[_0x11d3a0(0x270)]=crypto[_0x11d3a0(0x292)](0x20)[_0x11d3a0(0x27d)](_0x11d3a0(0x318));;storeSecure(_0x3fa4fb);}}function getSettings(){const _0x10d16a=_0x1fc18f;return dbSettings[_0x10d16a(0x2a1)](_0x10d16a(0x1c6))[_0x10d16a(0x256)]()||{};}function getSecure(){const _0x353326=_0x1fc18f;return dbSecure[_0x353326(0x2a1)](_0x353326(0x280))[_0x353326(0x256)]()||{};}function getBlacklist(){const _0x25911d=_0x1fc18f;return dbSecure[_0x25911d(0x2a1)](_0x25911d(0x261))[_0x25911d(0x256)]()||[];}function broadcastToBots(_0x4e92f0,_0x2a117a){const _0x25920a=_0x1fc18f;config[_0x25920a(0x20a)](_0x4f3c1f=>{const _0x370f3c=_0x25920a;if(_0x4f3c1f[_0x370f3c(0x230)]=='enabled'&&_0x4f3c1f[_0x370f3c(0x25b)]==_0x370f3c(0x2bb)){if(pid[_0x4f3c1f[_0x370f3c(0x2c2)]])pid[_0x4f3c1f[_0x370f3c(0x2c2)]][_0x370f3c(0x2d0)]({[_0x4e92f0]:_0x2a117a});}});}function storeSettings(_0x226877,_0x2e318f=![]){const _0x264c68=_0x1fc18f;_0x226877={...settings,..._0x226877};if(_0x2e318f&&_0x226877[_0x264c68(0x307)]!=_0x264c68(0x319)&&_0x226877[_0x264c68(0x307)]!=''){const _0x389f35=crypt[_0x264c68(0x1d3)](secure['privateKey'],_0x226877[_0x264c68(0x307)])[_0x264c68(0x2b9)][_0x264c68(0x233)]('@')[0x0],_0x2d8a12=bcrypt[_0x264c68(0x1c3)](_0x389f35,saltRounds);_0x226877={..._0x226877,'bbPassword':_0x2d8a12};}if(_0x2e318f&&_0x226877[_0x264c68(0x29f)]!='************'&&_0x226877[_0x264c68(0x29f)]!=''){const _0x3dbccb=crypt[_0x264c68(0x1d3)](secure[_0x264c68(0x322)],_0x226877[_0x264c68(0x29f)])[_0x264c68(0x2b9)]['split']('@')[0x0];_0x226877={..._0x226877,'telegramToken':_0x3dbccb};}const _0x4f0531=_0x226877[_0x264c68(0x29f)]!=_0x264c68(0x319)&&_0x226877[_0x264c68(0x29f)]!=settings['telegramToken']||_0x226877['telegramUsername']!=settings[_0x264c68(0x240)],_0x466bea=_0x226877['telegramToken']==''||_0x226877[_0x264c68(0x240)]=='';if(_0x4f0531)_0x226877[_0x264c68(0x32a)]=_0x264c68(0x2e3);for(const [_0x4ea775,_0x1148c9]of Object[_0x264c68(0x32f)](_0x226877)){if(_0x4ea775==_0x264c68(0x29f)&&_0x1148c9==_0x264c68(0x319)){_0x226877[_0x264c68(0x29f)]=settings[_0x264c68(0x29f)];continue;};if(_0x4ea775==_0x264c68(0x307)&&_0x1148c9=='************'){_0x226877['bbPassword']=settings['bbPassword'];continue;};dbSettings['set'](_0x264c68(0x1c8)+_0x4ea775,_0x1148c9)[_0x264c68(0x2c6)]();}settings=_0x226877,io['to'](_0x264c68(0x2d3))[_0x264c68(0x2fd)]('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x264c68(0x314)]);if(_0x4f0531&&!_0x466bea)initTelegram();if(_0x4f0531&&_0x466bea)disableTelegram();getAllClients()['forEach'](_0x37ba3f=>{const _0xe64651=_0x264c68;getSocket(_0x37ba3f['id'])['emit'](_0xe64651(0x230),{'access':{'allow':![],'reason':_0xe64651(0x2ca),'token':null}});});}function updateSetting(_0x38b4c9,_0x4185cf){const _0x24bf4f=_0x1fc18f;dbSettings[_0x24bf4f(0x2f1)](_0x24bf4f(0x1c8)+_0x38b4c9,_0x4185cf)[_0x24bf4f(0x2c6)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x24bf4f(0x1c6),cleanSettings());}function storeSecure(_0xd45d4){const _0x4e4a63=_0x1fc18f;dbSecure[_0x4e4a63(0x2a1)](_0x4e4a63(0x280))[_0x4e4a63(0x30f)](_0xd45d4)[_0x4e4a63(0x2c6)](),secure=_0xd45d4;}function addBlacklist(_0x107c2b){const _0x2c2e4f=_0x1fc18f;cleanBlacklist();let _0x280604;devices[_0x107c2b][_0x2c2e4f(0x2bf)]?_0x280604=Math['max'](devices[_0x107c2b]['telegramIpApproval']['expiry'],loginExpiry):_0x280604=loginExpiry,dbSecure[_0x2c2e4f(0x2a1)](_0x2c2e4f(0x261))[_0x2c2e4f(0x30f)]({'expiry':new Date()[_0x2c2e4f(0x330)]()+_0x280604*0x3c*0x3e8,'token':devices[_0x107c2b][_0x2c2e4f(0x30c)][_0x2c2e4f(0x1c0)]})[_0x2c2e4f(0x2c6)](),blacklist=dbSecure['get']('blacklist')['value']();}function cleanBlacklist(){const _0x3ae242=_0x1fc18f;let _0xe0a449=dbSecure[_0x3ae242(0x2a1)](_0x3ae242(0x261))[_0x3ae242(0x2c1)]()[_0x3ae242(0x256)](),_0x1651ce=new Date()[_0x3ae242(0x330)]();_0xe0a449[_0x3ae242(0x20a)](_0x58b26e=>{const _0x4aca4a=_0x3ae242;_0x58b26e[_0x4aca4a(0x2f9)]<_0x1651ce&&dbSecure[_0x4aca4a(0x2a1)](_0x4aca4a(0x261))['remove']({'expiry':_0x58b26e['expiry']})[_0x4aca4a(0x2c6)]();});}function initStates(){const _0x558a84=_0x1fc18f;let _0x228201=getConfiguration();_0x228201[_0x558a84(0x20a)](_0xe5f5ad=>{const _0x1d43cd=_0x558a84;_0xe5f5ad[_0x1d43cd(0x25b)]=_0x1d43cd(0x28a);}),storeConfiguration(_0x228201);}function onKeys(){const _0x1d640d=new RSA();return new Promise(_0x270a38=>{const _0x4925dd=_0x4f4a;_0x1d640d['generateKeyPairAsync']()[_0x4925dd(0x2f8)](_0x243242=>{_0x270a38(_0x243242);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xf115bf=_0x1fc18f;let _0x23dd44=getSettings(),_0xfc19dc=![];!_0x23dd44[_0xf115bf(0x22f)](_0xf115bf(0x213))&&(_0x23dd44[_0xf115bf(0x213)]=0x0,_0xfc19dc=!![]);!_0x23dd44[_0xf115bf(0x22f)](_0xf115bf(0x288))&&(_0x23dd44[_0xf115bf(0x288)]=0x0,_0xfc19dc=!![]);!_0x23dd44[_0xf115bf(0x22f)](_0xf115bf(0x306))&&(_0x23dd44[_0xf115bf(0x306)]=_0xf115bf(0x225),_0xfc19dc=!![]);if(_0xfc19dc)storeSettings(_0x23dd44);}function storeConfiguration(_0x5711dd){const _0x3c9546=_0x1fc18f;dbConfig['get'](_0x3c9546(0x281))[_0x3c9546(0x258)]()[_0x3c9546(0x2c6)](),_0x5711dd['forEach'](_0x3dc640=>{const _0x23395e=_0x3c9546;delete _0x3dc640[_0x23395e(0x20c)];}),dbConfig[_0x3c9546(0x2a1)]('bots')[_0x3c9546(0x30f)](..._0x5711dd)[_0x3c9546(0x2c6)](),config=_0x5711dd;}function resetPassword(){const _0x1e2786=_0x1fc18f;tgBot&&settings['telegramChatId']&&(tgBot[_0x1e2786(0x26d)]('callback_query'),tgBot[_0x1e2786(0x1eb)](settings[_0x1e2786(0x246)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1e69ac=>{telegramError(_0x1e69ac);}),tgBot['on']('callback_query',async _0x1c7122=>{const _0x56cbec=_0x1e2786,_0x3d0da1=_0x1c7122[_0x56cbec(0x20f)],_0x3b5531=_0x1c7122['message'];tgBot['answerCallbackQuery'](_0x1c7122['id'])[_0x56cbec(0x2f8)](async()=>{const _0x35e34d=_0x56cbec;if(_0x3d0da1!='no'){const _0x4b94b2=0xf,_0x449c13=_0x35e34d(0x28f),_0x266370=Array[_0x35e34d(0x204)](crypto[_0x35e34d(0x333)](new Uint32Array(_0x4b94b2)))[_0x35e34d(0x2e0)](_0x491242=>_0x449c13[_0x491242%_0x449c13[_0x35e34d(0x308)]])[_0x35e34d(0x245)](''),_0x3bb5b3=bcrypt['hashSync'](_0x266370,saltRounds);storeSettings({'bbPassword':_0x3bb5b3}),await tgBot[_0x35e34d(0x1eb)](_0x3b5531['chat']['id'],_0x35e34d(0x25a)+_0x266370,{'parse_mode':_0x35e34d(0x216)})[_0x35e34d(0x2d8)](_0x1e42f5=>{telegramError(_0x1e42f5);});}else await tgBot[_0x35e34d(0x1eb)](_0x3b5531['chat']['id'],_0x35e34d(0x2d5))[_0x35e34d(0x2d8)](_0x56209a=>{telegramError(_0x56209a);});}),tgBot[_0x56cbec(0x26d)]('callback_query');}));}function logging(_0x261c25){const _0x137f4a=_0x1fc18f;console['log'](getTimeStamp()+_0x137f4a(0x2de)+_0x261c25);if(tgBot&&settings[_0x137f4a(0x246)]&&settings[_0x137f4a(0x32a)]!='orders')tgBot[_0x137f4a(0x1eb)](settings['telegramChatId'],_0x137f4a(0x2b0)+_0x261c25)['catch'](_0x1e52ce=>{telegramError(_0x1e52ce);});}function getServerTime(){const _0x4b5dad=_0x1fc18f,_0x321312=new Date();return _0x321312[_0x4b5dad(0x2a6)]()+'/'+(_0x321312[_0x4b5dad(0x325)]()+0x1)[_0x4b5dad(0x27d)]()['padStart'](0x2,'0')+'/'+_0x321312[_0x4b5dad(0x273)]()[_0x4b5dad(0x27d)]()[_0x4b5dad(0x337)](0x2,'0')+'\x20'+_0x321312['getHours']()['toString']()[_0x4b5dad(0x337)](0x2,'0')+':'+_0x321312[_0x4b5dad(0x2c5)]()[_0x4b5dad(0x27d)]()[_0x4b5dad(0x337)](0x2,'0')+':'+_0x321312['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2ebb50=_0x1fc18f,_0x450d1a=shiftedTime();return _0x450d1a[_0x2ebb50(0x2a6)]()+'/'+(_0x450d1a['getMonth']()+0x1)[_0x2ebb50(0x27d)]()['padStart'](0x2,'0')+'/'+_0x450d1a[_0x2ebb50(0x273)]()[_0x2ebb50(0x27d)]()['padStart'](0x2,'0')+'\x20'+_0x450d1a[_0x2ebb50(0x1fb)]()[_0x2ebb50(0x27d)]()['padStart'](0x2,'0')+':'+_0x450d1a[_0x2ebb50(0x2c5)]()[_0x2ebb50(0x27d)]()['padStart'](0x2,'0')+':'+_0x450d1a['getSeconds']()['toString']()[_0x2ebb50(0x337)](0x2,'0');}function shiftedTime(){const _0x2c2252=_0x1fc18f,_0x24d74c=new Date();let _0x5f50fe=_0x24d74c;if(settings['timeshift']&&settings[_0x2c2252(0x314)]!==0x0)_0x5f50fe=fns[_0x2c2252(0x25e)](_0x24d74c,{'hours':settings[_0x2c2252(0x314)]});return _0x5f50fe;}function startScheduler(){let _0x335e65=new Date()['getUTCHours']();_0x335e65==0x1&&backupConfigFiles();_0x335e65==0x9&&triggerAnalytics();_0x335e65%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x356640=_0x1fc18f;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x356640(0x20a)](_0x122dce=>{const _0x421461=_0x356640;if(!_0x122dce[_0x421461(0x265)]())fs[_0x421461(0x29c)](configpath+_0x122dce[_0x421461(0x298)],configbackuppath+_0x122dce[_0x421461(0x298)]);});}async function getPublicIp(){const _0x2aed35=_0x1fc18f;try{const _0x384817=await axios[_0x2aed35(0x2a1)]('https://api.ipify.org?format=json');publicip=_0x384817[_0x2aed35(0x20f)]['ip'];}catch(_0x368092){}}async function triggerAnalytics(_0x5ac35b=![]){const _0x5da212=_0x1fc18f;if(!publicip)await getPublicIp();const _0x5dd6ab=getBotsWithMode();let _0x4ab579=0x0;_0x5dd6ab[_0x5da212(0x20a)](_0x45f637=>{const _0x250802=_0x5da212;if(_0x45f637[_0x250802(0x230)]===_0x250802(0x2d4))_0x4ab579++;}),mixpanel[_0x5da212(0x1ed)]('Server',{'distinct_id':settings[_0x5da212(0x2fa)],'ip':publicip,'version':serverversion,'numbots':_0x5dd6ab['length'],'numbotsenabled':_0x4ab579}),!_0x5ac35b&&analytics[_0x5da212(0x2cf)]({'title':_0x5da212(0x1ef),'href':_0x5da212(0x23d),'path':'/v'+serverversion});}async function getMessages(){const _0x3dc895=_0x1fc18f,_0x50b489='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x209d7b=new GraphQLClient(_0x50b489),_0x130c8c={'authorization':_0x3dc895(0x252)},_0x50df62=serverversion[_0x3dc895(0x233)]('.'),_0xda4af1=_0x50df62[0x0]+'.'+_0x50df62[0x1],_0x478ced=Math[_0x3dc895(0x2e5)](settings[_0x3dc895(0x213)],settings[_0x3dc895(0x288)]),_0x11e16a={'last':parseInt(_0x478ced),'bbm':_0xda4af1},_0x115cd9=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3dbfe2;try{_0x3dbfe2=await _0x209d7b[_0x3dc895(0x27b)](_0x115cd9,_0x11e16a,_0x130c8c);}catch(_0x551f83){}if(_0x3dbfe2&&_0x3dbfe2[_0x3dc895(0x27c)]){let _0x29b17c=settings[_0x3dc895(0x213)];newMessages=[];for(const _0xc685f5 of _0x3dbfe2[_0x3dc895(0x27c)]){newMessages['push'](_0xc685f5);if(_0xc685f5[_0x3dc895(0x2ba)])updateSetting('latestversion',_0xc685f5['bbvNew']);let _0x323b18=_0xc685f5[_0x3dc895(0x2ba)]?serverversion>=_0xc685f5[_0x3dc895(0x2ba)]:![];if(!_0x323b18&&_0xc685f5['number']>_0x29b17c){if(_0xc685f5[_0x3dc895(0x2a3)]===_0x3dc895(0x2ad)||serverversion[_0x3dc895(0x297)](_0xc685f5[_0x3dc895(0x2a3)])){let _0x5d2500=''+_0xc685f5[_0x3dc895(0x21c)]+'\x0a\x0a'+_0xc685f5['message'];const _0x2d6dc9=await sendTelegramMsg(toTelegramMarkdown(_0x5d2500),'Markdown');if(_0x2d6dc9)_0x29b17c=_0xc685f5['number'];}}}updateAvailable=isNewerVersion(settings[_0x3dc895(0x306)],serverversion),updateSetting(_0x3dc895(0x213),_0x29b17c),emitMessages();}}function emitMessages(){const _0x1822cf=_0x1fc18f,_0x28e668=settings[_0x1822cf(0x288)];let _0x49dbfd=[];newMessages[_0x1822cf(0x20a)](_0x3ad90f=>{_0x3ad90f['number']>_0x28e668&&_0x49dbfd['push'](_0x3ad90f);}),_0x49dbfd[_0x1822cf(0x308)]>0x0&&getAllClients()['forEach'](_0x4b7394=>{const _0x188e77=_0x1822cf;getSocket(_0x4b7394['id'])[_0x188e77(0x2fd)](_0x188e77(0x2b9),_0x49dbfd);});}function confirmMessage(_0x509f12){updateSetting('lastmsgemitted',Number(_0x509f12));}function isNewerVersion(_0x50d464,_0x457e30){const _0x347c53=_0x1fc18f,_0xb7d9e=_0x457e30[_0x347c53(0x233)]('.'),_0x4d2408=_0x50d464['split']('.');for(var _0x10727a=0x0;_0x10727a<_0x4d2408[_0x347c53(0x308)];_0x10727a++){const _0x515917=~~_0x4d2408[_0x10727a],_0x3ede1b=~~_0xb7d9e[_0x10727a];if(_0x515917>_0x3ede1b)return!![];if(_0x515917<_0x3ede1b)return![];}return![];}function toTelegramMarkdown(_0x13a0f7){const _0x1df15a=_0x1fc18f,_0x4c8f31=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xb82081=/\*{2}(.+?)\*{2}/gim;return _0x13a0f7=_0x13a0f7[_0x1df15a(0x272)](_0x4c8f31,_0x1df15a(0x2aa))[_0x1df15a(0x272)](_0xb82081,_0x1df15a(0x1dc)),_0x13a0f7;}function validateCredentials(_0x27756f,_0x194b48){const _0x5e252a=_0x1fc18f;if(_0x27756f[_0x5e252a(0x2c3)]==settings[_0x5e252a(0x1df)]&&bcrypt[_0x5e252a(0x1d7)](_0x27756f[_0x5e252a(0x2d1)],settings[_0x5e252a(0x307)])){if(settings[_0x5e252a(0x300)])return{'allow':![],'reason':_0x5e252a(0x248),'token':null};else{const _0x3d0e27=generateLoginToken(_0x194b48);return{'allow':!![],'reason':_0x5e252a(0x1ee),'token':_0x3d0e27};}}else return{'allow':![],'reason':_0x5e252a(0x227),'token':null};}function refreshToken(_0x3c197d){const _0x515643=_0x1fc18f,_0x5041d3=generateLoginToken(_0x3c197d);return{'allow':!![],'reason':_0x515643(0x1ee),'token':_0x5041d3};}function validateAccess(_0x5c6fc5,_0x21e4f6){const _0x120e2c=_0x1fc18f;let _0x155d68=devices[_0x21e4f6]['ip'],_0x38c470;const _0xef8766=_0x39d85a=>{const _0x30b2b5=_0x4f4a;if(settings[_0x30b2b5(0x1d4)]){if(settings[_0x30b2b5(0x300)]){if(telegram2FaApproved(_0x21e4f6)){const _0x54f654=generateLoginToken(_0x21e4f6);return{'allow':!![],'reason':_0x30b2b5(0x2bc),'token':_0x54f654};}else return{'allow':![],'reason':_0x30b2b5(0x296),'token':null};}else return _0x38c470=validToken(_0x39d85a,_0x21e4f6),_0x38c470['hasOwnProperty']('success')?{'allow':!![],'reason':_0x30b2b5(0x321),'token':_0x39d85a}:{'allow':![],'reason':_0x30b2b5(0x296),'token':null};}else return{'allow':!![],'reason':_0x30b2b5(0x1f9),'token':null};};if(settings['whitelistEnabled']){let _0x33f97d=[...settings[_0x120e2c(0x264)],_0x120e2c(0x2dc),_0x120e2c(0x220),_0x120e2c(0x2d9)];if(_0x33f97d[_0x120e2c(0x1fc)](_0x155d68))return _0xef8766(_0x5c6fc5);else{_0x38c470=validToken(_0x5c6fc5,_0x21e4f6);if(_0x38c470[_0x120e2c(0x22f)]('success'))return _0xef8766(_0x5c6fc5);else{if(telegramIpApproved(_0x21e4f6)){const _0x4c3676=generateToken(_0x21e4f6);return _0x38c470=_0xef8766(_0x5c6fc5),_0x38c470[_0x120e2c(0x1fe)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4c3676}:_0x38c470;}else return settings[_0x120e2c(0x1d6)]?{'allow':![],'reason':_0x120e2c(0x2ac),'token':null}:{'allow':![],'reason':_0x120e2c(0x336),'token':null};}}}else return _0xef8766(_0x5c6fc5);}function timelyDecrypt(_0x2703fa,_0x4b2ddd=!![]){const _0x217369=_0x1fc18f;if(_0x2703fa)try{const _0x565212=crypt[_0x217369(0x1d3)](secure['privateKey'],_0x2703fa)[_0x217369(0x2b9)],_0x22fa94=_0x565212[_0x217369(0x233)]('@')[0x0],_0x233637=_0x565212[_0x217369(0x233)]('@')[0x1],_0x2798b1=new Date()['getTime']();if(_0x4b2ddd){if(_0x2798b1-_0x233637<maxSecretAge*0x3e8)return _0x22fa94;else return![];}else return _0x22fa94;}catch(_0x145136){return![];}else return![];}const validToken=(_0x500d4c,_0x427603)=>{const _0x3cb844=_0x1fc18f,_0x49c1c8=devices[_0x427603]['ip'];if(!_0x500d4c)return{'error':'No\x20authentication\x20token'};for(let _0x7ad8a8 of blacklist){if(_0x7ad8a8[_0x3cb844(0x1c0)]==_0x500d4c)return{'error':_0x3cb844(0x311)};}let _0x5b9ed9;try{_0x5b9ed9=jwt[_0x3cb844(0x1e9)](_0x500d4c,secure[_0x3cb844(0x270)]+_0x427603);}catch{return{'error':_0x3cb844(0x2f5)};}if(!_0x5b9ed9['hasOwnProperty'](_0x3cb844(0x2bd))&&!_0x5b9ed9[_0x3cb844(0x22f)](_0x3cb844(0x2c3))||!_0x5b9ed9['hasOwnProperty'](_0x3cb844(0x24c)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5b9ed9[_0x3cb844(0x22f)](_0x3cb844(0x2c3))&&_0x5b9ed9[_0x3cb844(0x22f)](_0x3cb844(0x2bd))){const {clientip:_0x8c547c}=_0x5b9ed9;return _0x49c1c8==_0x8c547c?{'success':_0x3cb844(0x22b)}:{'error':_0x3cb844(0x329)};}else{if(_0x5b9ed9['hasOwnProperty']('username')&&_0x5b9ed9[_0x3cb844(0x22f)](_0x3cb844(0x2bd))){const {username:_0x9f857f,clientip:_0x183091}=_0x5b9ed9;return settings[_0x3cb844(0x1df)]==_0x9f857f&&_0x49c1c8==_0x183091?{'success':_0x3cb844(0x22b)}:{'error':_0x3cb844(0x1f4)};}}},generateLoginToken=_0x552a7f=>{const _0x4d54df=_0x1fc18f;if(_0x552a7f){const _0x456c55=devices[_0x552a7f]['ip'];return jwt['sign']({'username':settings[_0x4d54df(0x1df)],'clientip':_0x456c55},secure['secret']+_0x552a7f,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xfecf53=>{const _0x499fda=_0x1fc18f;if(_0xfecf53){const _0x4379ea=devices[_0xfecf53]['ip'];return jwt[_0x499fda(0x1d9)]({'clientip':_0x4379ea},secure['secret']+_0xfecf53,{'expiresIn':devices[_0xfecf53][_0x499fda(0x2bf)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x4e940f=>{const _0xae6b4d=_0x1fc18f;let _0x110569=![];return devices[_0x4e940f][_0xae6b4d(0x2bf)]&&devices[_0x4e940f]['telegramIpApproval'][_0xae6b4d(0x2f9)]!=_0xae6b4d(0x25d)&&(_0x110569=devices[_0x4e940f][_0xae6b4d(0x2bf)][_0xae6b4d(0x2bd)]==devices[_0x4e940f]['ip']&&new Date()[_0xae6b4d(0x330)]()-devices[_0x4e940f][_0xae6b4d(0x2bf)]['timestamp']<devices[_0x4e940f][_0xae6b4d(0x2bf)][_0xae6b4d(0x2f9)]*0x3c*0x3e8),_0x110569;},telegram2FaApproved=_0x32a7f4=>{const _0x51fe21=_0x1fc18f;let _0x4deb3e=![];return devices[_0x32a7f4][_0x51fe21(0x200)]&&devices[_0x32a7f4][_0x51fe21(0x200)][_0x51fe21(0x2f9)]!='reject'&&(_0x4deb3e=devices[_0x32a7f4]['telegram2FaApproval'][_0x51fe21(0x2bd)]==devices[_0x32a7f4]['ip']&&new Date()[_0x51fe21(0x330)]()-devices[_0x32a7f4]['telegram2FaApproval'][_0x51fe21(0x309)]<devices[_0x32a7f4][_0x51fe21(0x200)]['expiry']*0x3c*0x3e8),_0x4deb3e;},normalizeIP=_0x2561d9=>{const _0x3139b4=_0x1fc18f;let _0xeebf29=null,_0x3b1162=null;if(ipaddr[_0x3139b4(0x2e4)](_0x2561d9)){const _0xe6b3c7=ipaddr[_0x3139b4(0x1d8)](_0x2561d9);_0xe6b3c7[_0x3139b4(0x316)]()===_0x3139b4(0x339)?(_0xe6b3c7[_0x3139b4(0x284)]()&&(_0xeebf29=_0xe6b3c7[_0x3139b4(0x332)]()[_0x3139b4(0x27d)]()),_0x3b1162=_0xe6b3c7[_0x3139b4(0x27d)]()):(_0xeebf29=_0xe6b3c7[_0x3139b4(0x27d)](),_0x3b1162=_0xe6b3c7[_0x3139b4(0x275)]()[_0x3139b4(0x27d)]());}return{'show':_0xeebf29?_0xeebf29:_0x3b1162,'store':_0x3b1162};};function sleep(_0x267bae){return new Promise(_0x2d510e=>setTimeout(_0x2d510e,_0x267bae));}