const _0x503299=_0x5387;(function(_0x2ea981,_0x3f776e){const _0x779acc=_0x5387,_0x2bdb2a=_0x2ea981();while(!![]){try{const _0xbdf7e8=parseInt(_0x779acc(0x306))/0x1*(-parseInt(_0x779acc(0x19d))/0x2)+parseInt(_0x779acc(0x1cc))/0x3*(parseInt(_0x779acc(0x1bb))/0x4)+parseInt(_0x779acc(0x195))/0x5+parseInt(_0x779acc(0x2ff))/0x6*(parseInt(_0x779acc(0x329))/0x7)+-parseInt(_0x779acc(0x289))/0x8*(-parseInt(_0x779acc(0x2ef))/0x9)+parseInt(_0x779acc(0x2fc))/0xa*(parseInt(_0x779acc(0x24b))/0xb)+-parseInt(_0x779acc(0x137))/0xc;if(_0xbdf7e8===_0x3f776e)break;else _0x2bdb2a['push'](_0x2bdb2a['shift']());}catch(_0x16dc7){_0x2bdb2a['push'](_0x2bdb2a['shift']());}}}(_0x2371,0x73121));const _0x5c1826=function(){let _0x363a8d=!![];return function(_0x4edbbc,_0x2b7279){const _0x36aaf1=_0x363a8d?function(){const _0x35a9de=_0x5387;if(_0x2b7279){const _0x590376=_0x2b7279[_0x35a9de(0x1d1)](_0x4edbbc,arguments);return _0x2b7279=null,_0x590376;}}:function(){};return _0x363a8d=![],_0x36aaf1;};}(),_0x53e43b=_0x5c1826(this,function(){const _0xfc6b93=_0x5387;return _0x53e43b['toString']()[_0xfc6b93(0x26a)](_0xfc6b93(0x138))['toString']()[_0xfc6b93(0x2fd)](_0x53e43b)[_0xfc6b93(0x26a)](_0xfc6b93(0x138));});_0x53e43b();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x503299(0x2c9)),fs=require('fs'),fns=require(_0x503299(0x2e0)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x503299(0x2fb)),forge=require(_0x503299(0x2ac)),bcrypt=require(_0x503299(0x219)),jwt=require(_0x503299(0x186)),ipaddr=require(_0x503299(0x2c0)),argv=require(_0x503299(0x1c6))(process['argv'][_0x503299(0x1c9)](0x2))[_0x503299(0x2ee)],uuidRandom=require(_0x503299(0x2b9)),{Telegraf,Markup}=require(_0x503299(0x203)),Mixpanel=require(_0x503299(0x2f7)),axios=require(_0x503299(0x189)),{GraphQLClient,gql}=require(_0x503299(0x20e)),util=require(_0x503299(0x319)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x503299(0x18b)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x503299(0x14e)](PORT)&&(console[_0x503299(0x205)](_0x503299(0x281)+PORT+_0x503299(0x2ad)),process[_0x503299(0x29d)](0x1));const HOST=argv['host']||null,userID=argv[_0x503299(0x302)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x503299(0x1a3)];let bbpath=_0x503299(0x2d8),bbpath2='';const botfile=_0x503299(0x176),configfile=_0x503299(0x286),settingsfile=_0x503299(0x1bd),securefile=_0x503299(0x2ae),environment=require('./'+bbpath2+_0x503299(0x2e2))[_0x503299(0x2e8)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x503299(0x282)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x503299(0x262));let configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/';const configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x503299(0x2f2)+userID+'/':bbpath+_0x503299(0x2f2),zippath=userID?bbpath+_0x503299(0x194)+userID+'/':bbpath+_0x503299(0x194),loggerfile=fs['createWriteStream'](logspath+_0x503299(0x309),{'flags':'a'}),temppath=userID?bbpath+_0x503299(0x19f)+userID+'/':bbpath+_0x503299(0x19f);!fs[_0x503299(0x282)](configpath)&&fs[_0x503299(0x28f)](configpath);!fs[_0x503299(0x282)](configbackuppath)&&fs[_0x503299(0x28f)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x503299(0x28f)](zippath);!fs[_0x503299(0x282)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x503299(0x202)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x503299(0x202)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x503299(0x2c1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x503299(0x202)]({'secure':{},'blacklist':[]})[_0x503299(0x2c1)]();const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x503299(0x2a8)]&&(settings[_0x503299(0x2a8)]!=''&&settings['telegramToken']!=_0x503299(0x29a))&&settings['telegramUsername']&&settings[_0x503299(0x333)]!='')initTelegram();const parseColor=(_0x41bf1f,_0x350d16)=>{const _0xecd5fe=_0x503299,_0xff4f5=/#[A-Z]{3}#/g;if(typeof _0x41bf1f==_0xecd5fe(0x32f)){!_0x350d16?_0x41bf1f=_0x41bf1f['replace'](_0xff4f5,''):(_0x41bf1f=_0x41bf1f[_0xecd5fe(0x2d5)](/#BLU#/g,_0xecd5fe(0x17f)),_0x41bf1f=_0x41bf1f[_0xecd5fe(0x2d5)](/#RED#/g,_0xecd5fe(0x18f)),_0x41bf1f=_0x41bf1f[_0xecd5fe(0x2d5)](/#YEL#/g,_0xecd5fe(0x140)),_0x41bf1f=_0x41bf1f['replace'](/#MAG#/g,'\x1b[35m'),_0x41bf1f=_0x41bf1f[_0xecd5fe(0x2d5)](/#CYA#/g,_0xecd5fe(0x1a5)),_0x41bf1f=_0x41bf1f[_0xecd5fe(0x2d5)](/#RES#/g,_0xecd5fe(0x1c2)));;}return _0x41bf1f;},logger={'screen':_0x534e27=>{const _0x2d7e75=_0x503299;console[_0x2d7e75(0x205)](parseColor(_0x534e27,!![]));},'simple':_0x345dca=>{const _0x40f55a=_0x503299;console[_0x40f55a(0x205)](parseColor(_0x345dca,!![])),loggerfile[_0x40f55a(0x2c1)](util[_0x40f55a(0x15b)](parseColor(_0x345dca,![]))+'\x0a');},'full':async _0x2881cc=>{const _0x5a8d00=_0x503299,_0xf588bc=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2881cc;console[_0x5a8d00(0x205)](parseColor(_0xf588bc,!![])),loggerfile['write'](util[_0x5a8d00(0x15b)](parseColor(_0xf588bc,![]))+'\x0a');if(tgBot&&settings[_0x5a8d00(0x15d)]&&settings['telegramEvents']!='orders')await sendTelegram(settings[_0x5a8d00(0x15d)],_0x5a8d00(0x257)+parseColor(_0x2881cc,![]));},'debug':async(_0x2453c6,_0x1e3a5f='')=>{const _0x4fd4eb=_0x503299,_0x157d3=getTimeStamp()+_0x4fd4eb(0x23d)+_0x2453c6;if(debugging)console[_0x4fd4eb(0x205)](parseColor(_0x157d3,!![]));loggerfile[_0x4fd4eb(0x2c1)](util[_0x4fd4eb(0x15b)](parseColor(_0x157d3,![]))+'\x0a');if(_0x1e3a5f){if(debugging)console[_0x4fd4eb(0x205)](_0x1e3a5f);loggerfile['write'](util[_0x4fd4eb(0x15b)](_0x1e3a5f)+'\x0a');}}};let terminating=![];process['on'](_0x503299(0x1b7),function(_0x2a668f){const _0x1e8fe3=_0x503299;_0x2a668f[_0x1e8fe3(0x318)]()[_0x1e8fe3(0x132)](_0x1e8fe3(0x2bb))?(logger[_0x1e8fe3(0x29e)](_0x1e8fe3(0x193)+_0x2a668f['port']+_0x1e8fe3(0x133)),process[_0x1e8fe3(0x293)]({'terminate':!![]},_0x249d9b=>{})):logger[_0x1e8fe3(0x29e)](_0x2a668f);}),process['on'](_0x503299(0x29d),()=>{const _0x4f894f=_0x503299;stopAllBots(),process[_0x4f894f(0x29d)](0x0);}),process['on'](_0x503299(0x231),()=>{const _0x3befe8=_0x503299;stopAllBots(),process[_0x3befe8(0x29d)](0x0);}),process['on'](_0x503299(0x28b),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x503299(0x2e2))[_0x503299(0x236)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x503299(0x28e))['createServer'](app);app[_0x503299(0x238)](fileUpload({'useTempFiles':!![]})),app[_0x503299(0x1f7)](_0x503299(0x16e),async(_0x113da5,_0x15b67f)=>{const _0x1623eb=_0x503299,_0xfe4d54=_0x113da5[_0x1623eb(0x337)]['type'],_0x3e35ba=getClientsWithBotID(_0x1623eb(0x1e4)),_0xc109fd=_0x113da5[_0x1623eb(0x166)][_0x1623eb(0x134)],_0x84c9ba=timelyDecrypt(_0xc109fd,![]),_0x10d081=_0x3e35ba[_0x1623eb(0x295)](_0x3aee98=>_0x3aee98[_0x1623eb(0x134)]==_0x84c9ba);if(_0x10d081){const _0x502e51=normalizeIP(_0x113da5[_0x1623eb(0x16f)][_0x1623eb(0x1ff)])[_0x1623eb(0x26f)],_0x19e7af=_0x113da5[_0x1623eb(0x166)]['tkn'];if(validateAccess(_0x19e7af,_0x84c9ba,_0x502e51)[_0x1623eb(0x241)])_0xfe4d54==_0x1623eb(0x142)&&await backupConfigFiles(),await zipFiles(_0xfe4d54),_0x15b67f[_0x1623eb(0x160)](zippath+(_0xfe4d54+_0x1623eb(0x2af)),_0x2d2df0=>{const _0x347af5=_0x1623eb;_0x2d2df0&&(logger['full'](_0x347af5(0x2c6)+_0xfe4d54),logger[_0x347af5(0x29e)](_0x2d2df0));});else logger[_0x1623eb(0x2a9)](_0x1623eb(0x16c)+_0xfe4d54+'\x20(1)');}else logger['full'](_0x1623eb(0x16c)+_0xfe4d54+'\x20(2)');}),app[_0x503299(0x2ce)](_0x503299(0x1d4),async(_0xc54f7,_0x5c0392)=>{const _0x694599=_0x503299,_0x53feb8=getClientsWithBotID(_0x694599(0x1e4)),_0x562f76=_0xc54f7['headers']['uuid'],_0x4ba9d4=timelyDecrypt(_0x562f76,![]),_0x570359=_0x53feb8['find'](_0x2d8997=>_0x2d8997[_0x694599(0x134)]==_0x4ba9d4);logger[_0x694599(0x2c5)](_0x694599(0x326));if(_0x570359){const _0x4d4459=normalizeIP(_0xc54f7['socket'][_0x694599(0x1ff)])[_0x694599(0x26f)],_0x25a8e7=_0xc54f7[_0x694599(0x166)]['tkn'];if(validateAccess(_0x25a8e7,_0x4ba9d4,_0x4d4459)['allow']){if(_0xc54f7['files']){const _0x2e9509=_0xc54f7[_0x694599(0x172)][_0x694599(0x1b3)];await _0x2e9509['mv'](temppath+_0x2e9509['name']),_0x5c0392['send']({'status':!![],'message':_0x694599(0x215)});const _0x22dc89=getBotsWithMode();_0x22dc89['length']>0x0?confirmRestore(temppath,_0x2e9509['name']):unzipFile(temppath,_0x2e9509[_0x694599(0x1f9)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x694599(0x2a9)](_0x694599(0x27b));}),app[_0x503299(0x238)](express[_0x503299(0x265)](path[_0x503299(0x26b)](__dirname,bbpath2,_0x503299(0x1ac)))),app[_0x503299(0x238)](express[_0x503299(0x265)](path[_0x503299(0x26b)](__dirname,bbpath2,_0x503299(0x19c)))),app['get']('/',function(_0x1dbcf2,_0x53ef37){const _0x54bd1b=_0x503299;_0x53ef37[_0x54bd1b(0x24d)](path['join'](__dirname,bbpath2,_0x54bd1b(0x1ac),_0x54bd1b(0x2bd)));}),app['get'](_0x503299(0x139),function(_0x10f4a9,_0xcde9e4){const _0x3e9263=_0x503299;_0xcde9e4[_0x3e9263(0x24d)](path['join'](__dirname,bbpath2,'build',_0x3e9263(0x2bd)));}),app['get'](_0x503299(0x290),(_0x2fcde7,_0x2d96c3)=>{const _0x3a75cc=_0x503299;_0x2d96c3['sendFile'](path['join'](__dirname,bbpath2,_0x3a75cc(0x19c),_0x3a75cc(0x2bd)));}),app[_0x503299(0x1f7)](_0x503299(0x165),(_0x519276,_0x1ffd08)=>{const _0x3cfc71=_0x503299;_0x1ffd08[_0x3cfc71(0x24d)](path[_0x3cfc71(0x26b)](__dirname,bbpath2,'build',_0x3cfc71(0x2bd)));}),app[_0x503299(0x1f7)]('/:bot/coins',(_0x52320a,_0x388a31)=>{const _0x10395e=_0x503299;_0x388a31[_0x10395e(0x24d)](path[_0x10395e(0x26b)](__dirname,bbpath2,_0x10395e(0x19c),_0x10395e(0x2bd)));}),app[_0x503299(0x1f7)](_0x503299(0x28c),(_0x5e5a14,_0x25bb0)=>{const _0x23b32d=_0x503299;_0x25bb0[_0x23b32d(0x24d)](path[_0x23b32d(0x26b)](__dirname,bbpath2,_0x23b32d(0x19c),_0x23b32d(0x2bd)));}),app[_0x503299(0x1f7)](_0x503299(0x1cd),(_0x5edb89,_0x28742e)=>{const _0x5d9c9f=_0x503299;_0x28742e['sendFile'](path['join'](__dirname,bbpath2,_0x5d9c9f(0x19c),_0x5d9c9f(0x2bd)));}),app[_0x503299(0x1f7)]('/:bot/support',(_0x4bd8d2,_0x1a7e1d)=>{const _0x39e6fd=_0x503299;_0x1a7e1d['sendFile'](path['join'](__dirname,bbpath2,'build',_0x39e6fd(0x2bd)));});if(HOST)http[_0x503299(0x157)](PORT,HOST);else http[_0x503299(0x157)](PORT);const io=require(_0x503299(0x2de))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2df467=_0x503299;let _0x507b6b=_0x2df467(0x247);const _0x55e906=networkInterfaces(),_0x1f3491={};for(const _0x80c7c of Object[_0x2df467(0x185)](_0x55e906)){for(const _0x41d3d4 of _0x55e906[_0x80c7c]){if((_0x41d3d4['family']==_0x2df467(0x164)||_0x41d3d4['family']==0x4)&&!_0x41d3d4[_0x2df467(0x23a)]){const _0x271a00=ipaddr[_0x2df467(0x263)](_0x41d3d4[_0x2df467(0x1f1)])[_0x2df467(0x151)]();_0x271a00!='private'&&(!_0x1f3491[_0x80c7c]&&(_0x1f3491[_0x80c7c]=[]),_0x1f3491[_0x80c7c]['push'](_0x41d3d4[_0x2df467(0x1f1)]),_0x507b6b=_0x41d3d4['address']);}}}return{'serverip':_0x507b6b,'netinterfaces':_0x1f3491};}async function startServer(){const _0x135e7b=_0x503299,{serverip:_0x45dcb6,netinterfaces:_0x474adf}=getServerIP();logger['simple'](''),logger[_0x135e7b(0x29e)](_0x135e7b(0x1a8)),await logger[_0x135e7b(0x2a9)](_0x135e7b(0x32a)+serverversion+_0x135e7b(0x244)+(environment==_0x135e7b(0x2e4)?_0x135e7b(0x1df):'')+'\x0a'+(_0x135e7b(0x25e)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x135e7b(0x1e7)+_0x45dcb6+':'+PORT+_0x135e7b(0x284))),logger[_0x135e7b(0x29e)](_0x135e7b(0x1a8));if(config[_0x135e7b(0x136)]!=0x0)for(const _0x4d1baf of config){const _0x25dd41=_0x4d1baf[_0x135e7b(0x198)]==_0x135e7b(0x17b)?'a':'m';if(_0x4d1baf['status']==_0x135e7b(0x2bc)||_0x4d1baf[_0x135e7b(0x303)]=='new')await logger[_0x135e7b(0x2a9)](_0x135e7b(0x19a)+_0x25dd41+_0x135e7b(0x29b)+_0x4d1baf[_0x135e7b(0x14f)]+_0x135e7b(0x1e6)+_0x4d1baf['botname']),startBot([_0x4d1baf[_0x135e7b(0x14f)],userID],{'cwd':bbpath},function(_0x15d93e){if(_0x15d93e)logger['full'](_0x15d93e);});else(_0x4d1baf[_0x135e7b(0x303)]==_0x135e7b(0x18d)||_0x4d1baf[_0x135e7b(0x303)]==_0x135e7b(0x211))&&await logger[_0x135e7b(0x2a9)](_0x135e7b(0x1dc)+_0x25dd41+')\x20\x20\x20|\x20Bot\x20'+_0x4d1baf[_0x135e7b(0x14f)]+_0x135e7b(0x1e6)+_0x4d1baf[_0x135e7b(0x232)]);}else!newBot&&logger[_0x135e7b(0x29e)](_0x135e7b(0x1cf));if(newBot)addBot();logger[_0x135e7b(0x29e)]('-----------------------------------------------------------------------------------'),logger['simple'](''),await logger['debug'](_0x135e7b(0x234)+nodeversion),await logger[_0x135e7b(0x2c5)](_0x135e7b(0x2f6),_0x474adf);}function startSocket(){const _0x422a1e=_0x503299;io['on'](_0x422a1e(0x147),_0x882167=>{const _0x4eddc4=_0x422a1e;let _0xe9fb11,_0x222eb1,_0x47f3ec,_0x2d20b3,_0x1d8326;const _0x1432a3=_0x882167[_0x4eddc4(0x288)][_0x4eddc4(0x166)]['referer'];_0x222eb1=_0x1432a3['match'](/bot[0-9]{3}/);if(_0x222eb1)_0x47f3ec=_0x222eb1[0x0][_0x4eddc4(0x2f8)](/[0-9]{3}/);if(_0x47f3ec)_0xe9fb11=_0x47f3ec[0x0];else _0xe9fb11=_0x4eddc4(0x1e4);const _0x54eafb=_0x882167[_0x4eddc4(0x288)][_0x4eddc4(0x28a)][_0x4eddc4(0x22d)];if(!_0x54eafb)_0x882167[_0x4eddc4(0x2a7)](_0x4eddc4(0x303),{'publicKey':secure[_0x4eddc4(0x255)]});else{_0x2d20b3=timelyDecrypt(_0x54eafb,![]);if(!_0x2d20b3)_0x882167[_0x4eddc4(0x2a7)]('status',{'publicKey':secure[_0x4eddc4(0x255)]});else{_0x1d8326=normalizeIP(_0x882167['conn'][_0x4eddc4(0x1ff)])[_0x4eddc4(0x26f)];if(!devices[_0x2d20b3])devices[_0x2d20b3]={'uuid':_0x2d20b3,'access':{'token':null}};devices[_0x2d20b3]['ip']=_0x1d8326;const _0x241eea=addClient(_0x882167['id'],_0x2d20b3,_0xe9fb11);setAccess(_0x241eea),emitMessages(),_0x882167['on']('login',_0x1fe539=>{const _0x27c20e=_0x4eddc4,_0x109cc7=timelyDecrypt(_0x1fe539[_0x27c20e(0x191)],!![],'|@|');if(_0x109cc7){_0x1fe539={'username':_0x1fe539[_0x27c20e(0x1ef)],'password':_0x109cc7},devices[_0x2d20b3][_0x27c20e(0x1b9)]=validateCredentials(_0x1fe539,_0x2d20b3);if(devices[_0x2d20b3]['access'][_0x27c20e(0x241)]==![]&&devices[_0x2d20b3][_0x27c20e(0x1b9)][_0x27c20e(0x260)]=='2FA\x20login\x20required')_0x882167[_0x27c20e(0x2a7)](_0x27c20e(0x303),{'access':devices[_0x2d20b3]['access']}),loginAccess2FA(_0x2d20b3,_0x1d8326);else{if(devices[_0x2d20b3]['access'][_0x27c20e(0x241)]==![]&&devices[_0x2d20b3]['access'][_0x27c20e(0x260)]==_0x27c20e(0x19b))_0x882167[_0x27c20e(0x2a7)](_0x27c20e(0x303),{'access':devices[_0x2d20b3][_0x27c20e(0x1b9)]});else devices[_0x2d20b3][_0x27c20e(0x1b9)][_0x27c20e(0x241)]&&devices[_0x2d20b3]['access'][_0x27c20e(0x260)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2d20b3)['forEach'](_0x3fd4df=>{setAccess(_0x3fd4df);}),logger[_0x27c20e(0x2c5)](_0x27c20e(0x13c)+_0x2d20b3['slice'](-0x8)),setTokenRefresh(_0x2d20b3),setSessionTimeout('login',_0x2d20b3));}}else logger[_0x27c20e(0x2a9)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x882167['on'](_0x4eddc4(0x17d),()=>{resetPassword();}),_0x882167['on']('disconnect',_0x21ab57=>{removeClient(_0x882167['id']);}),_0xe9fb11==_0x4eddc4(0x1e4)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1b98b7){const _0x32fe52=_0x503299;if(_0x1b98b7!=_0x32fe52(0x1e4)&&config['apiKey']!=''){if(pid[_0x1b98b7])pid[_0x1b98b7]['send']({'function':'initclient','args':null});}_0x1b98b7!=_0x32fe52(0x1e4)&&broadcastToBots(_0x32fe52(0x153),JSON['stringify'](config));}function reloadBotManager(){const _0x432e0f=_0x503299;getClientsWithBotID(_0x432e0f(0x1e4))['forEach'](_0x5ef452=>{const _0x1bccda=_0x432e0f;getSocket(_0x5ef452['id'])[_0x1bccda(0x2a7)](_0x1bccda(0x303),{'access':{'allow':![],'reason':_0x1bccda(0x273),'token':null}});});}function getSocket(_0x51b614){const _0xfd89b=_0x503299,_0x51c2fe=io[_0xfd89b(0x1a6)][_0xfd89b(0x1f7)]('/');return _0x51c2fe[_0xfd89b(0x321)][_0xfd89b(0x1f7)](_0x51b614);}function setAccess(_0x30552e){const _0x5deea1=_0x503299,_0x5ac72e=getSocket(_0x30552e['id']),_0x49c0e1=_0x30552e[_0x5deea1(0x134)],_0x525cfb=_0x30552e[_0x5deea1(0x298)];devices[_0x49c0e1][_0x5deea1(0x1b9)]=validateAccess(devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x223)],_0x49c0e1),logger[_0x5deea1(0x2c5)](_0x5deea1(0x1d9)+devices[_0x49c0e1]['access'][_0x5deea1(0x260)]+_0x5deea1(0x313)+_0x30552e['id'][_0x5deea1(0x1c9)](-0x8)+'\x20|\x20user:\x20...'+_0x49c0e1[_0x5deea1(0x1c9)](-0x8)),_0x5ac72e['join'](_0x49c0e1);if(devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x241)]){_0x5ac72e['join'](_0x525cfb);if(_0x525cfb=='botmanager')initializeSocketBotManager(_0x5ac72e);else initializeSocketBot(_0x5ac72e);initClient(_0x525cfb);}devices[_0x49c0e1]['access'][_0x5deea1(0x223)]&&devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x260)]==_0x5deea1(0x246)&&setSessionTimeout(_0x5deea1(0x2d7),_0x49c0e1),devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x223)]&&devices[_0x49c0e1][_0x5deea1(0x1b9)]['reason']==_0x5deea1(0x156)&&setSessionTimeout(_0x5deea1(0x305),_0x49c0e1),_0x5ac72e['emit'](_0x5deea1(0x303),{'status':_0x30552e[_0x5deea1(0x24e)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x49c0e1][_0x5deea1(0x1b9)],'externalip':devices[_0x49c0e1]['ip'],'publicKey':secure[_0x5deea1(0x255)],'userid':settings[_0x5deea1(0x2cf)],'validInstallation':validInstallation}),devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x241)]==![]&&devices[_0x49c0e1][_0x5deea1(0x1b9)][_0x5deea1(0x260)]==_0x5deea1(0x201)&&temporaryAccess2FA(_0x49c0e1,devices[_0x49c0e1]['ip']);}function setSessionTimeout(_0x1667a2,_0x175072){const _0x5312c9=_0x503299;let _0x199405;if(_0x1667a2==_0x5312c9(0x305))_0x199405=loginExpiry*0x3c*0x3e8;else _0x199405=devices[_0x175072][_0x5312c9(0x179)][_0x5312c9(0x20b)]*0x3c*0x3e8-(new Date()[_0x5312c9(0x1e8)]()-devices[_0x175072][_0x5312c9(0x179)][_0x5312c9(0x1b4)]);if(devices[_0x175072][_0x5312c9(0x175)])clearTimeout(devices[_0x175072]['pidExpireLogin']);devices[_0x175072]['pidExpireLogin']=setTimeout(()=>{const _0x8f2015=_0x5312c9;if(devices[_0x175072]['pidRefreshToken'])clearTimeout(devices[_0x175072]['pidRefreshToken']);removeSocketListeners(_0x175072),addBlacklist(_0x175072),devices[_0x175072][_0x8f2015(0x179)]=null,devices[_0x175072][_0x8f2015(0x2b1)]=null,devices[_0x175072][_0x8f2015(0x1b9)][_0x8f2015(0x223)]=null,logger['debug'](_0x8f2015(0x2a0)+_0x175072[_0x8f2015(0x1c9)](-0x8)),devices[_0x175072][_0x8f2015(0x1b9)]=validateAccess(devices[_0x175072][_0x8f2015(0x1b9)][_0x8f2015(0x223)],_0x175072),!(devices[_0x175072][_0x8f2015(0x1b9)][_0x8f2015(0x241)]&&devices[_0x175072][_0x8f2015(0x1b9)][_0x8f2015(0x260)]==_0x8f2015(0x33a))&&(_0x1667a2==_0x8f2015(0x305)?io['to'](_0x175072)[_0x8f2015(0x2a7)](_0x8f2015(0x303),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x175072)[_0x8f2015(0x2a7)](_0x8f2015(0x303),{'access':{'allow':![],'reason':_0x8f2015(0x214),'token':null}})),devices[_0x175072][_0x8f2015(0x1b9)][_0x8f2015(0x223)]=null;},_0x199405);}function setTokenRefresh(_0x2308da){const _0x70bb51=_0x503299;if(devices[_0x2308da]['pidRefreshToken'])clearTimeout(devices[_0x2308da][_0x70bb51(0x178)]);devices[_0x2308da][_0x70bb51(0x178)]=setTimeout(()=>{const _0x3a3942=_0x70bb51;getClientsWithUuid(_0x2308da)['length']!=0x0?(devices[_0x2308da]['access']=refreshToken(_0x2308da),io['to'](_0x2308da)[_0x3a3942(0x2a7)]('status',{'status':_0x3a3942(0x2e3),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2308da][_0x3a3942(0x1b9)],'externalip':devices[_0x2308da]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x2308da)):clearTimeout(devices[_0x2308da]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2a523b){const _0x4ce7b8=_0x503299,_0x577567=getClient(_0x2a523b['id'])[_0x4ce7b8(0x134)];_0x2a523b['emit'](_0x4ce7b8(0x153),config),_0x2a523b[_0x4ce7b8(0x2a7)](_0x4ce7b8(0x192),cleanSettings()),_0x2a523b['on'](_0x4ce7b8(0x13d),_0x18b4ca=>{const _0xb4d13a=_0x4ce7b8;if(validateAccess(_0x18b4ca,_0x577567)[_0xb4d13a(0x241)])addBot();else logger[_0xb4d13a(0x2a9)](_0xb4d13a(0x25c));}),_0x2a523b['on'](_0x4ce7b8(0x20c),(_0x490a69,_0x40be4f)=>{const _0xbb8844=_0x4ce7b8;if(validateAccess(_0x40be4f,_0x577567)[_0xbb8844(0x241)])toggleBot(_0x490a69['botID'],_0x490a69[_0xbb8844(0x303)],_0x490a69[_0xbb8844(0x2a1)]);else logger[_0xbb8844(0x2a9)](_0xbb8844(0x199));}),_0x2a523b['on']('toggle-bot-mode',(_0x2e81d1,_0x147379)=>{const _0x590a06=_0x4ce7b8;if(validateAccess(_0x147379,_0x577567)[_0x590a06(0x241)])toggleBotMode(_0x2e81d1);else logger['full'](_0x590a06(0x199));}),_0x2a523b['on'](_0x4ce7b8(0x1a4),(_0x365492,_0x2fc10b)=>{const _0x42214a=_0x4ce7b8;if(validateAccess(_0x2fc10b,_0x577567)[_0x42214a(0x241)])deleteBot(_0x365492);else logger['full'](_0x42214a(0x274));}),_0x2a523b['on']('store-settings',(_0x5854e6,_0x560c45)=>{const _0x5d8975=_0x4ce7b8;if(validateAccess(_0x560c45,_0x577567)[_0x5d8975(0x241)])storeSettings(_0x5854e6,!![]);else logger[_0x5d8975(0x2a9)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x2a523b['on'](_0x4ce7b8(0x2b7),_0x23ce52=>{const _0x2e8132=_0x4ce7b8;if(validateAccess(_0x23ce52,_0x577567)[_0x2e8132(0x241)])updateBB('update');else logger[_0x2e8132(0x2a9)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x2a523b['on'](_0x4ce7b8(0x22b),_0x5a8eaa=>{const _0x5e91c5=_0x4ce7b8;if(validateAccess(_0x5a8eaa,_0x577567)[_0x5e91c5(0x241)])updateBB(_0x5e91c5(0x311));else logger['full'](_0x5e91c5(0x13a));}),_0x2a523b['on'](_0x4ce7b8(0x26e),_0x395ea4=>{const _0x8b43c9=_0x4ce7b8;if(validateAccess(_0x395ea4,_0x577567)['allow']){const _0x5102b0=getClient(_0x2a523b['id']);if(_0x5102b0)getBackupFiles(_0x5102b0[_0x8b43c9(0x134)]);else logger[_0x8b43c9(0x2a9)](_0x8b43c9(0x1aa));}else logger[_0x8b43c9(0x2a9)](_0x8b43c9(0x1e3));}),_0x2a523b['on'](_0x4ce7b8(0x2eb),(_0xe44a11,_0x4e7dbe)=>{const _0x317400=_0x4ce7b8;if(validateAccess(_0x4e7dbe,_0x577567)[_0x317400(0x241)])restoreBackupFile(_0xe44a11);else logger[_0x317400(0x2a9)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x2a523b['on']('get-messages',_0x6d22bb=>{const _0x29bcfb=_0x4ce7b8;if(validateAccess(_0x6d22bb,_0x577567)[_0x29bcfb(0x241)])getMessages();else logger[_0x29bcfb(0x2a9)](_0x29bcfb(0x200));}),_0x2a523b['on'](_0x4ce7b8(0x249),(_0xb27a9c,_0x1d1d5e)=>{const _0x460e46=_0x4ce7b8;if(validateAccess(_0x1d1d5e,_0x577567)[_0x460e46(0x241)])confirmMessage(_0xb27a9c);else logger[_0x460e46(0x2a9)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2a523b['on']('logout',_0x2afdf5=>{const _0x232ca8=_0x4ce7b8;if(validateAccess(_0x2afdf5,_0x577567)[_0x232ca8(0x241)]){if(devices[_0x577567][_0x232ca8(0x178)])clearTimeout(devices[_0x577567][_0x232ca8(0x178)]);if(devices[_0x577567][_0x232ca8(0x175)])clearTimeout(devices[_0x577567]['pidExpireLogin']);removeSocketListeners(getClient(_0x2a523b['id'])[_0x232ca8(0x134)]),addBlacklist(_0x577567),devices[_0x577567][_0x232ca8(0x179)]=null,devices[_0x577567][_0x232ca8(0x2b1)]=null,devices[_0x577567][_0x232ca8(0x1b9)][_0x232ca8(0x223)]=null,logger[_0x232ca8(0x2c5)](_0x232ca8(0x22e)+_0x577567[_0x232ca8(0x1c9)](-0x8)),io['to'](getClient(_0x2a523b['id'])[_0x232ca8(0x134)])[_0x232ca8(0x2a7)]('status',{'access':{'allow':![],'reason':_0x232ca8(0x315),'token':null}});}else logger['full'](_0x232ca8(0x30f));});}function initializeSocketBot(_0x57863a){const _0x6b5a37=_0x503299,_0x4fd8db=getClient(_0x57863a['id'])[_0x6b5a37(0x298)],_0x5b9167=getClient(_0x57863a['id'])[_0x6b5a37(0x134)];_0x57863a['on']('get-logs',(_0xf5fd6d,_0x7180a4)=>{const _0x31d450=_0x6b5a37;if(validateAccess(_0x7180a4,_0x5b9167)[_0x31d450(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x31d450(0x293)]({'function':_0x31d450(0x2df),'args':_0xf5fd6d});}else logger[_0x31d450(0x2a9)](_0x31d450(0x325));}),_0x57863a['on'](_0x6b5a37(0x163),(_0x2dc9ad,_0x5de817)=>{const _0x245171=_0x6b5a37;if(validateAccess(_0x5de817,_0x5b9167)['allow']){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x245171(0x293)]({'function':_0x245171(0x31d),'args':_0x2dc9ad});}else logger['full'](_0x245171(0x184));}),_0x57863a['on'](_0x6b5a37(0x28d),(_0x23d75e,_0x569bd6)=>{const _0x63b156=_0x6b5a37;if(validateAccess(_0x569bd6,_0x5b9167)[_0x63b156(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x63b156(0x293)]({'function':_0x63b156(0x245),'args':_0x23d75e});}else logger['full'](_0x63b156(0x17c));}),_0x57863a['on'](_0x6b5a37(0x2f3),(_0x42908c,_0x460189)=>{const _0x3843e4=_0x6b5a37;if(validateAccess(_0x460189,_0x5b9167)[_0x3843e4(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x3843e4(0x293)]({'function':_0x3843e4(0x334),'args':_0x42908c});}else logger[_0x3843e4(0x2a9)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x57863a['on']('store-headless',(_0x30eb59,_0x41c49d)=>{const _0x1d63e3=_0x6b5a37;if(validateAccess(_0x41c49d,_0x5b9167)[_0x1d63e3(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x1d63e3(0x293)]({'function':_0x1d63e3(0x1d0),'args':_0x30eb59});}else logger[_0x1d63e3(0x2a9)](_0x1d63e3(0x210));}),_0x57863a['on'](_0x6b5a37(0x27a),(_0x39375e,_0x14e8da)=>{const _0x548d13=_0x6b5a37;if(validateAccess(_0x14e8da,_0x5b9167)[_0x548d13(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x548d13(0x293)]({'function':_0x548d13(0x21d),'args':_0x39375e});}else logger[_0x548d13(0x2a9)](_0x548d13(0x1c4));}),_0x57863a['on']('reset-history',_0x5498d2=>{const _0x4d96de=_0x6b5a37;if(validateAccess(_0x5498d2,_0x5b9167)['allow']){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x4d96de(0x293)]({'function':_0x4d96de(0x23c),'args':null});}else logger[_0x4d96de(0x2a9)](_0x4d96de(0x135));}),_0x57863a['on'](_0x6b5a37(0x2d2),_0x265fc1=>{const _0x1a5d8b=_0x6b5a37;if(validateAccess(_0x265fc1,_0x5b9167)[_0x1a5d8b(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x1a5d8b(0x293)]({'function':'getStartingBalances','args':null});}else logger[_0x1a5d8b(0x2a9)](_0x1a5d8b(0x239));}),_0x57863a['on'](_0x6b5a37(0x1d8),(_0xf626fa,_0x4a329f)=>{const _0x58202f=_0x6b5a37;if(validateAccess(_0x4a329f,_0x5b9167)[_0x58202f(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db]['send']({'function':_0x58202f(0x1f8),'args':_0xf626fa});}else logger[_0x58202f(0x2a9)](_0x58202f(0x169));}),_0x57863a['on'](_0x6b5a37(0x13f),_0x3c6f33=>{const _0x30d63f=_0x6b5a37;if(validateAccess(_0x3c6f33,_0x5b9167)[_0x30d63f(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x30d63f(0x293)]({'function':'cancelLoading','args':null});}else logger[_0x30d63f(0x2a9)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x57863a['on'](_0x6b5a37(0x251),_0x18a06a=>{const _0x24e606=_0x6b5a37;if(validateAccess(_0x18a06a,_0x5b9167)[_0x24e606(0x241)]){if(pid[_0x4fd8db])pid[_0x4fd8db][_0x24e606(0x293)]({'function':'showConfig','args':null});}else logger[_0x24e606(0x2a9)](_0x24e606(0x31f));}),_0x57863a['on'](_0x6b5a37(0x2b7),_0x50066e=>{const _0x18c0fb=_0x6b5a37;if(validateAccess(_0x50066e,_0x5b9167)[_0x18c0fb(0x241)])updateBB('update');else logger[_0x18c0fb(0x2a9)](_0x18c0fb(0x1ea));}),_0x57863a['on'](_0x6b5a37(0x225),_0x425300=>{const _0x469a1e=_0x6b5a37;if(validateAccess(_0x425300,_0x5b9167)[_0x469a1e(0x241)])getMessages();else logger[_0x469a1e(0x2a9)](_0x469a1e(0x200));}),_0x57863a['on']('confirm-message',(_0x3df699,_0x52a7bd)=>{const _0x28f0fa=_0x6b5a37;if(validateAccess(_0x52a7bd,_0x5b9167)['allow'])confirmMessage(_0x3df699);else logger[_0x28f0fa(0x2a9)](_0x28f0fa(0x2f9));}),_0x57863a['on']('logout',_0x23cbd9=>{const _0x490559=_0x6b5a37;if(validateAccess(_0x23cbd9,_0x5b9167)[_0x490559(0x241)]){if(devices[_0x5b9167][_0x490559(0x178)])clearTimeout(devices[_0x5b9167][_0x490559(0x178)]);if(devices[_0x5b9167][_0x490559(0x175)])clearTimeout(devices[_0x5b9167][_0x490559(0x175)]);removeSocketListeners(getClient(_0x57863a['id'])['uuid']),addBlacklist(_0x5b9167),devices[_0x5b9167]['telegramIpApproval']=null,devices[_0x5b9167][_0x490559(0x2b1)]=null,devices[_0x5b9167]['access']['token']=null,logger[_0x490559(0x2c5)](_0x490559(0x22e)+_0x5b9167[_0x490559(0x1c9)](-0x8)),io['to'](getClient(_0x57863a['id'])['uuid'])[_0x490559(0x2a7)](_0x490559(0x303),{'access':{'allow':![],'reason':_0x490559(0x315),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x10b64b){const _0x7dbdb4=_0x503299;getClientsWithUuid(_0x10b64b)[_0x7dbdb4(0x1d3)](_0x1a995f=>{getSocket(_0x1a995f['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4c0ce6=_0x503299;let _0x4df24e=settings;return settings[_0x4c0ce6(0x2a8)]&&settings[_0x4c0ce6(0x2a8)]!=''&&(_0x4df24e={..._0x4df24e,'telegramToken':_0x4c0ce6(0x146)}),settings[_0x4c0ce6(0x2d6)]&&settings['bbPassword']!=''&&(_0x4df24e={..._0x4df24e,'bbPassword':_0x4c0ce6(0x146)}),settings[_0x4c0ce6(0x2cb)]&&settings[_0x4c0ce6(0x2cb)]!=''&&(_0x4df24e={..._0x4df24e,'marketcapApi':_0x4c0ce6(0x146)}),(settings['bbPassword']&&settings[_0x4c0ce6(0x2d6)]=='***'||settings['telegramToken']&&settings['telegramToken']==_0x4c0ce6(0x29a)||settings[_0x4c0ce6(0x2cb)]&&settings[_0x4c0ce6(0x2cb)]==_0x4c0ce6(0x29a))&&(_0x4df24e={..._0x4df24e,'restored':{'password':settings['bbPassword']==_0x4c0ce6(0x29a),'telegram':settings[_0x4c0ce6(0x2a8)]==_0x4c0ce6(0x29a),'marketcap':settings[_0x4c0ce6(0x2cb)]==_0x4c0ce6(0x29a)}}),_0x4df24e;}async function updateBB(_0x340ab1){const _0x58f33a=_0x503299;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x22c8cf=>{restartBot(_0x22c8cf['botID']);});if(_0x340ab1==_0x58f33a(0x228))process[_0x58f33a(0x293)]({'update':!![],'environment':environment},_0x3554cd=>{});else _0x340ab1==_0x58f33a(0x311)&&process['send']({'reinstall':!![],'environment':environment},_0x6873f3=>{});}function startBot(_0x583b8b,_0x579c10,_0x13ea21){const _0x5ec970=_0x503299;if(debugging)_0x583b8b[_0x5ec970(0x152)]('-d');let _0xecf5e4=![];const _0x199d31=_0x583b8b[0x0];_0x579c10={..._0x579c10,'stdio':[_0x5ec970(0x21c),_0x5ec970(0x21c),_0x5ec970(0x21c),_0x5ec970(0x248)]},pid[_0x199d31]=childProcess['fork'](botfile,_0x583b8b,_0x579c10),pid[_0x199d31]['on']('message',_0x59bb1f=>{const _0x1a8734=_0x5ec970;switch(Object[_0x1a8734(0x185)](_0x59bb1f)[0x0]){case'botname':updateBotName(_0x199d31,_0x59bb1f[_0x1a8734(0x232)]);break;case _0x1a8734(0x1ba):updateBotManager();break;case'status':updateStatus(_0x199d31,_0x59bb1f[_0x1a8734(0x303)]);break;case _0x1a8734(0x2a1):updateLive(_0x199d31,_0x59bb1f[_0x1a8734(0x2a1)]);break;case _0x1a8734(0x159):updateLive(_0x199d31,_0x59bb1f[_0x1a8734(0x159)]),io['to'](_0x199d31)['emit']('status',{'access':{'allow':![],'reason':_0x1a8734(0x273),'token':null}});break;case _0x1a8734(0x171):_0x59bb1f[_0x1a8734(0x171)]==_0x1a8734(0x328)&&restartBot(_0x199d31);_0x59bb1f[_0x1a8734(0x171)]=='kill'&&toggleBot(_0x199d31,_0x1a8734(0x18d),'stopped');break;case'telegram':sendTelegramBot(_0x199d31,_0x59bb1f[_0x1a8734(0x307)]);break;case _0x1a8734(0x230):sendTelegramMsg(_0x59bb1f[_0x1a8734(0x230)]);break;case'function':io['to'](_0x199d31)['emit'](_0x59bb1f[_0x1a8734(0x2f5)],_0x59bb1f['args']);break;}}),pid[_0x199d31]['on'](_0x5ec970(0x216),function(_0x17ccdf){if(_0xecf5e4)return;_0xecf5e4=!![],_0x13ea21(_0x17ccdf);}),pid[_0x199d31]['on'](_0x5ec970(0x29d),async function(_0x398482){const _0x41ea46=_0x5ec970;if(terminating)return;if(installingUpdate){logger['debug'](_0x41ea46(0x20a)),io[_0x41ea46(0x2ba)]();return;}if(_0xecf5e4)return;_0xecf5e4=!![],_0x13ea21(null);const _0x27a577=dbConfig['get'](_0x41ea46(0x153))[_0x41ea46(0x295)]({'botID':_0x199d31})['value']();_0x27a577&&(_0x27a577[_0x41ea46(0x303)]=='enabled'||_0x27a577[_0x41ea46(0x303)]==_0x41ea46(0x14b))&&(await sleep(0x3e8),updateLive(_0x199d31,_0x41ea46(0x21a)),logger[_0x41ea46(0x2a9)](_0x41ea46(0x291)+_0x199d31),startBot([_0x199d31,userID],{'cwd':bbpath},function(_0x20873e){const _0x21b805=_0x41ea46;if(_0x20873e)logger[_0x21b805(0x2a9)](_0x20873e);}));});}function stopBot(_0x4857ec){const _0x40d84c=_0x503299;getClientsWithBotID(_0x4857ec)[_0x40d84c(0x1d3)](_0x1a5921=>{const _0x4fa2c5=_0x40d84c;getSocket(_0x1a5921['id'])[_0x4fa2c5(0x167)](!![]),removeClient(_0x1a5921['id']);}),pid[_0x4857ec]&&(pid[_0x4857ec][_0x40d84c(0x2b2)](),pid[_0x4857ec]=null);}function stopAllBots(){terminating=!![];const _0x2eee0b=getEnabledBots();_0x2eee0b['forEach'](_0x1344ab=>{const _0x573b1c=_0x5387;stopBot(_0x1344ab[_0x573b1c(0x14f)]);});}function restartBot(_0x5488f3){const _0xabcc28=_0x503299;if(pid[_0x5488f3])pid[_0x5488f3][_0xabcc28(0x2b2)]();}function addBot(){const _0x523589=_0x503299;let _0x5e3128;for(let _0x16940e=0x1;_0x16940e<0x3e9;_0x16940e++){_0x5e3128=_0x16940e['toString']()[_0x523589(0x1c0)](0x3,'0');let _0x436dfb=config['find'](_0x1556b4=>_0x1556b4['botID']==_0x5e3128);if(!_0x436dfb)break;}if(_0x5e3128===_0x523589(0x174)){logger['full'](_0x523589(0x268));return;}logger[_0x523589(0x2a9)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x5e3128),dbConfig[_0x523589(0x1f7)]('bots')['push']({'botID':_0x5e3128,'botname':_0x523589(0x196)+_0x5e3128,'status':_0x523589(0x14b),'live':''})['write'](),startBot([_0x5e3128,userID],{'cwd':bbpath},function(_0x48bf7f){const _0x19e5b0=_0x523589;if(_0x48bf7f)logger[_0x19e5b0(0x2a9)](_0x48bf7f);}),config=getConfiguration(),io['to']('botmanager')[_0x523589(0x2a7)]('bots',config),broadcastToBots(_0x523589(0x153),JSON[_0x523589(0x2ec)](config));}function deleteBot(_0x196959){const _0xe6e8b0=_0x503299;getClientsWithBotID(_0x196959)[_0xe6e8b0(0x1d3)](_0x4c3851=>{getSocket(_0x4c3851['id'])['disconnect'](!![]),removeClient(_0x4c3851['id']);}),dbConfig[_0xe6e8b0(0x1f7)](_0xe6e8b0(0x153))['remove']({'botID':_0x196959})[_0xe6e8b0(0x2c1)](),logger[_0xe6e8b0(0x2a9)](_0xe6e8b0(0x31c)+_0x196959),stopBot(_0x196959);try{if(fs[_0xe6e8b0(0x282)](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+_0xe6e8b0(0x226))))fs[_0xe6e8b0(0x1be)](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+_0xe6e8b0(0x226)));if(fs['existsSync'](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+'-events.json')))fs['unlinkSync'](path[_0xe6e8b0(0x26b)](configpath,'bot-'+_0x196959+'-events.json'));if(fs[_0xe6e8b0(0x282)](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+_0xe6e8b0(0x322))))fs['unlinkSync'](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+'-performance.json'));if(fs[_0xe6e8b0(0x282)](path[_0xe6e8b0(0x26b)](configpath,'bot-'+_0x196959+'-results.json')))fs[_0xe6e8b0(0x1be)](path[_0xe6e8b0(0x26b)](configpath,_0xe6e8b0(0x23f)+_0x196959+'-results.json'));}catch(_0x363c24){if(_0x363c24)logger[_0xe6e8b0(0x2a9)](_0xe6e8b0(0x13e),_0x363c24);}config=getConfiguration(),io['to'](_0xe6e8b0(0x1e4))['emit'](_0xe6e8b0(0x153),config),broadcastToBots(_0xe6e8b0(0x153),JSON['stringify'](config));}function toggleBot(_0x277a49,_0xe2be33,_0x584321){const _0x270878=_0x503299;dbConfig[_0x270878(0x1f7)](_0x270878(0x153))[_0x270878(0x295)]({'botID':_0x277a49})[_0x270878(0x300)]({'status':_0xe2be33})['assign']({'live':_0x584321})[_0x270878(0x2c1)]();if(_0xe2be33==_0x270878(0x2bc)||_0xe2be33==_0x270878(0x14b))logger['full'](_0x270878(0x149)+_0x277a49),startBot([_0x277a49,userID],{'cwd':bbpath},function(_0xb7102b){const _0x52b90f=_0x270878;if(_0xb7102b)logger[_0x52b90f(0x2a9)](_0xb7102b);});else(_0xe2be33==_0x270878(0x18d)||_0xe2be33==_0x270878(0x211))&&(logger['full'](_0x270878(0x2a4)+_0x277a49),stopBot(_0x277a49));config=getConfiguration(),io['to'](_0x270878(0x1e4))['emit'](_0x270878(0x153),config),broadcastToBots('bots',JSON[_0x270878(0x2ec)](config));}function toggleStatus(_0x499ec9){const _0x4aa31a=_0x503299;let _0x217c66=dbConfig[_0x4aa31a(0x1f7)](_0x4aa31a(0x153))[_0x4aa31a(0x295)]({'botID':_0x499ec9})[_0x4aa31a(0x1ce)](),_0x580a89;if(_0x217c66[_0x4aa31a(0x303)]==='enabled')_0x580a89=_0x4aa31a(0x18d);else{if(_0x217c66[_0x4aa31a(0x303)]===_0x4aa31a(0x14b))_0x580a89=_0x4aa31a(0x211);else{if(_0x217c66['status']===_0x4aa31a(0x211))_0x580a89=_0x4aa31a(0x14b);else{if(_0x217c66[_0x4aa31a(0x303)]===_0x4aa31a(0x18d))_0x580a89=_0x4aa31a(0x2bc);}}}return _0x580a89;}function updateStatus(_0xc559e3,_0x1d7105){const _0xce1c72=_0x503299;dbConfig['get']('bots')[_0xce1c72(0x295)]({'botID':_0xc559e3})[_0xce1c72(0x300)]({'status':_0x1d7105})[_0xce1c72(0x2c1)](),config=getConfiguration(),io['to']('botmanager')[_0xce1c72(0x2a7)](_0xce1c72(0x153),config),broadcastToBots('bots',JSON[_0xce1c72(0x2ec)](config));}function updateLive(_0x3170c0,_0x147fc1){const _0x1b8213=_0x503299;dbConfig[_0x1b8213(0x1f7)](_0x1b8213(0x153))['find']({'botID':_0x3170c0})[_0x1b8213(0x300)]({'live':_0x147fc1})[_0x1b8213(0x2c1)](),config=getConfiguration(),io['to'](_0x1b8213(0x1e4))[_0x1b8213(0x2a7)]('bots',config),broadcastToBots(_0x1b8213(0x153),JSON['stringify'](config));}function updateBotName(_0x1f9247,_0x284247){const _0x5d5f37=_0x503299;dbConfig[_0x5d5f37(0x1f7)](_0x5d5f37(0x153))[_0x5d5f37(0x295)]({'botID':_0x1f9247})[_0x5d5f37(0x300)]({'botname':_0x284247})[_0x5d5f37(0x2c1)](),config=getConfiguration(),io['to']('botmanager')[_0x5d5f37(0x2a7)](_0x5d5f37(0x153),config),broadcastToBots('bots',JSON[_0x5d5f37(0x2ec)](config));}function updateBotManager(){const _0x48d5c5=_0x503299;config=getConfiguration(),io['to'](_0x48d5c5(0x1e4))[_0x48d5c5(0x2a7)]('bots',config),broadcastToBots(_0x48d5c5(0x153),JSON['stringify'](config));}function toggleBotMode(_0x1a0421){const _0x2ef214=_0x503299;if(pid[_0x1a0421])pid[_0x1a0421]['send']({'function':_0x2ef214(0x1a2),'args':null});else{const _0xeb4c76=configpath+_0x2ef214(0x23f)+_0x1a0421+_0x2ef214(0x226),_0x30149c=fs['readFileSync'](_0xeb4c76),_0x2330ab=JSON[_0x2ef214(0x263)](_0x30149c),_0x39dbcf=_0x2330ab['bot'][0x0][_0x2ef214(0x2d4)];_0x2330ab['bot'][0x0]['headless']=!_0x39dbcf;const _0x59dabd=JSON[_0x2ef214(0x2ec)](_0x2330ab,null,0x2);fs[_0x2ef214(0x2a3)](_0xeb4c76,_0x59dabd),config=getConfiguration(),io['to'](_0x2ef214(0x1e4))['emit']('bots',config),broadcastToBots(_0x2ef214(0x153),JSON[_0x2ef214(0x2ec)](config));}}function validateTelegram(_0x7fe5a8){const _0x20c34e=_0x503299;if(_0x7fe5a8[_0x20c34e(0x158)][_0x20c34e(0x1ef)]!=settings['telegramUsername']&&'@'+_0x7fe5a8[_0x20c34e(0x158)][_0x20c34e(0x1ef)]!=settings[_0x20c34e(0x333)]||_0x7fe5a8[_0x20c34e(0x1b1)]['id']!=settings[_0x20c34e(0x15d)])return sendTelegram(_0x7fe5a8[_0x20c34e(0x1b1)]['id'],_0x20c34e(0x2c7),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x35edab=_0x503299;if(tgBot)tgBot[_0x35edab(0x171)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x293e71=_0x35edab(0x31b);_0x293e71+='\x0a',_0x293e71+='/enable\x20-\x20enable\x20notifications\x0a',_0x293e71+=_0x35edab(0x1b2),_0x293e71+=_0x35edab(0x1dd),_0x293e71+=_0x35edab(0x18e),_0x293e71+=_0x35edab(0x161),_0x293e71+=_0x35edab(0x283),_0x293e71+=_0x35edab(0x1bc),_0x293e71+=_0x35edab(0x1f5),_0x293e71+=_0x35edab(0x30e),_0x293e71+=_0x35edab(0x2f4),_0x293e71+=_0x35edab(0x32e),_0x293e71+=_0x35edab(0x21f),_0x293e71+=_0x35edab(0x2b0),_0x293e71+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x2874a6=_0x35edab(0x168);_0x2874a6+='\x0a',_0x2874a6+=_0x293e71,tgBot[_0x35edab(0x14a)]((_0x1e343a,_0x4615b6)=>{const _0x467df8=_0x35edab;logger[_0x467df8(0x29e)](getTimeStamp()+_0x467df8(0x187)),logger[_0x467df8(0x2c5)](_0x467df8(0x2e5),_0x1e343a);}),tgBot[_0x35edab(0x238)](async(_0xc5a09c,_0x136037)=>{const _0xabbe40=_0x35edab;if(!(!settings[_0xabbe40(0x15d)]&&_0xc5a09c[_0xabbe40(0x228)]['message']['text']==_0xabbe40(0x297))){if(!validateTelegram(_0xc5a09c))return;}_0x136037();}),tgBot['command'](_0x35edab(0x1e2),async _0x316d79=>{const _0x7cfb29=_0x35edab;if(!settings[_0x7cfb29(0x15d)])updateSetting(_0x7cfb29(0x15d),_0x316d79[_0x7cfb29(0x1b1)]['id']);updateSetting(_0x7cfb29(0x1ab),!![]);if(!validateTelegram(_0x316d79))return;await sendTelegram(_0x316d79[_0x7cfb29(0x1b1)]['id'],_0x2874a6);}),tgBot['command']('enable',async _0x1e8f9a=>{const _0x128bdb=_0x35edab;updateSetting(_0x128bdb(0x1ab),!![]),await sendTelegram(_0x1e8f9a['chat']['id'],_0x128bdb(0x2a2));}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x213),async _0x4392eb=>{const _0x188611=_0x35edab;await sendTelegram(_0x4392eb[_0x188611(0x1b1)]['id'],_0x188611(0x1a0)),updateSetting(_0x188611(0x1ab),![]);}),tgBot[_0x35edab(0x1b5)]('config',async _0x2a5824=>{const _0x551b2b=_0x35edab,_0x1338c0=Markup[_0x551b2b(0x22a)]([Markup['button'][_0x551b2b(0x1fd)](_0x551b2b(0x1c3),_0x551b2b(0x31e)),Markup[_0x551b2b(0x27e)][_0x551b2b(0x1fd)](_0x551b2b(0x275),_0x551b2b(0x2a6)),Markup['button'][_0x551b2b(0x1fd)](_0x551b2b(0x217),'config_all')]);_0x2a5824[_0x551b2b(0x304)](_0x551b2b(0x267),_0x1338c0);}),tgBot[_0x35edab(0x1fa)](_0x35edab(0x31e),async _0x46d2df=>{const _0x2cca96=_0x35edab;_0x46d2df[_0x2cca96(0x15c)](),updateSetting(_0x2cca96(0x256),_0x2cca96(0x324)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x46d2df[_0x2cca96(0x1b1)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x35edab(0x1fa)](_0x35edab(0x2a6),async _0x21c5ad=>{const _0x2efd75=_0x35edab;_0x21c5ad[_0x2efd75(0x15c)](),updateSetting('telegramEvents',_0x2efd75(0x1c7)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x21c5ad[_0x2efd75(0x1b1)]['id'],_0x2efd75(0x23e));}),tgBot[_0x35edab(0x1fa)](_0x35edab(0x170),async _0x316206=>{const _0x41dfad=_0x35edab;_0x316206[_0x41dfad(0x15c)](),updateSetting(_0x41dfad(0x256),_0x41dfad(0x1f6)),updateSetting(_0x41dfad(0x1ab),!![]),await sendTelegram(_0x316206[_0x41dfad(0x1b1)]['id'],_0x41dfad(0x1fc));}),tgBot[_0x35edab(0x1b5)]('status',async _0x5ecd19=>{const _0x21aa53=_0x35edab,_0x235d00=getBotsWithMode();let _0x59c1bd='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x15e6d7=>{const _0x284834=_0x5387,_0x21d55f=_0x235d00[_0x284834(0x295)](_0x4f950f=>_0x4f950f[_0x284834(0x14f)]==_0x15e6d7[_0x284834(0x14f)])[_0x284834(0x198)];_0x59c1bd+=_0x284834(0x196)+_0x15e6d7[_0x284834(0x14f)]+':\x20'+_0x15e6d7[_0x284834(0x303)]+_0x284834(0x1e6)+_0x21d55f+'\x20|\x20'+_0x15e6d7['live']+'\x0a';}),_0x59c1bd+='\x0a',_0x59c1bd+=_0x21aa53(0x227),_0x59c1bd+=!settings[_0x21aa53(0x1ab)]?_0x21aa53(0x21b):_0x21aa53(0x1b8),_0x59c1bd+=settings['telegramEnabled']?settings[_0x21aa53(0x256)]==_0x21aa53(0x1f6)?_0x21aa53(0x20f):_0x21aa53(0x259)+settings['telegramEvents']+_0x21aa53(0x2b4):'',await sendTelegram(_0x5ecd19[_0x21aa53(0x1b1)]['id'],_0x59c1bd,{'parse_mode':_0x21aa53(0x336)});}),tgBot['command'](_0x35edab(0x328),async _0x284115=>{const _0xc982e0=_0x35edab,_0x2012b4=getEnabledBots();if(_0x2012b4[_0xc982e0(0x136)]==0x0)await sendTelegram(_0x284115[_0xc982e0(0x1b1)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2012b4[_0xc982e0(0x136)]>0x1)_0x2012b4[_0xc982e0(0x152)]({'botID':_0xc982e0(0x1f6)});let _0x563a97=[],_0x136b98=[];const _0x18a42c=_0x2012b4[_0xc982e0(0x136)]%0x4==0x0||_0x2012b4[_0xc982e0(0x136)]%0x4==0x3||_0x2012b4[_0xc982e0(0x136)]%0x3==0x1?0x4:0x3;let _0x27c75d=0x0;_0x2012b4[_0xc982e0(0x1d3)]((_0x502991,_0xb964db)=>{const _0x1da3e0=_0xc982e0;if(_0xb964db%_0x18a42c==0x0)_0x136b98=[];_0x136b98[_0x1da3e0(0x152)](Markup['button'][_0x1da3e0(0x1fd)](_0x502991['botID']==_0x1da3e0(0x1f6)?'All\x20bots':'Bot\x20'+_0x502991[_0x1da3e0(0x14f)],_0x1da3e0(0x24f)+_0x502991[_0x1da3e0(0x14f)])),_0xb964db%_0x18a42c==0x0&&(_0x563a97[_0x27c75d]=_0x136b98,_0x27c75d++);});const _0x2d926a=Markup[_0xc982e0(0x22a)](_0x563a97);_0x284115[_0xc982e0(0x304)](_0xc982e0(0x212),_0x2d926a);}}),tgBot[_0x35edab(0x1fa)](/restart_(.+)/,async _0x29e43f=>{const _0xf9bb31=_0x35edab,_0x4f43b6=_0x29e43f[_0xf9bb31(0x2f8)][0x1];_0x29e43f['editMessageReplyMarkup'](),_0x4f43b6==_0xf9bb31(0x1f6)?config[_0xf9bb31(0x1d3)](_0x41de12=>{const _0x3bf392=_0xf9bb31;restartBot(_0x41de12[_0x3bf392(0x14f)]);}):restartBot(_0x4f43b6);}),tgBot['command']('on',async _0x10c35a=>{const _0x1ca990=_0x35edab,_0x37d925=getDisabledBots();if(_0x37d925[_0x1ca990(0x136)]==0x0)await sendTelegram(_0x10c35a['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x37d925['length']>0x1)_0x37d925[_0x1ca990(0x152)]({'botID':_0x1ca990(0x1f6)});let _0x26d8be=[],_0x3c7af2=[];const _0x530226=_0x37d925[_0x1ca990(0x136)]%0x4==0x0||_0x37d925[_0x1ca990(0x136)]%0x4==0x3||_0x37d925[_0x1ca990(0x136)]%0x3==0x1?0x4:0x3;let _0x80d77a=0x0;_0x37d925[_0x1ca990(0x1d3)]((_0x49b018,_0x5c8d3c)=>{const _0x1763c9=_0x1ca990;if(_0x5c8d3c%_0x530226==0x0)_0x3c7af2=[];_0x3c7af2[_0x1763c9(0x152)](Markup[_0x1763c9(0x27e)][_0x1763c9(0x1fd)](_0x49b018[_0x1763c9(0x14f)]==_0x1763c9(0x1f6)?_0x1763c9(0x320):'Bot\x20'+_0x49b018['botID'],_0x1763c9(0x235)+_0x49b018[_0x1763c9(0x14f)])),_0x5c8d3c%_0x530226==0x0&&(_0x26d8be[_0x80d77a]=_0x3c7af2,_0x80d77a++);});const _0x7f2f0a=Markup[_0x1ca990(0x22a)](_0x26d8be);_0x10c35a[_0x1ca990(0x304)](_0x1ca990(0x25f),_0x7f2f0a);}}),tgBot[_0x35edab(0x1fa)](/on_(.+)/,async _0x450568=>{const _0x8c574f=_0x35edab,_0x46a3ef=_0x450568['match'][0x1];_0x450568[_0x8c574f(0x15c)]();if(_0x46a3ef=='all'){const _0x7efcbf=getDisabledBots();await sendTelegram(_0x450568[_0x8c574f(0x1b1)]['id'],_0x8c574f(0x2ca)),_0x7efcbf['forEach'](_0x3e619a=>{const _0x17c54b=_0x8c574f;if(_0x3e619a['botID']!='all')toggleBot(_0x3e619a['botID'],toggleStatus(_0x3e619a[_0x17c54b(0x14f)]),_0x17c54b(0x21a));});}else await sendTelegram(_0x450568[_0x8c574f(0x1b1)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x46a3ef),toggleBot(_0x46a3ef,toggleStatus(_0x46a3ef),'stopped');}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x296),async _0x5326d6=>{const _0x5c3dd1=_0x35edab,_0x4e2dbd=getEnabledBots();if(_0x4e2dbd[_0x5c3dd1(0x136)]==0x0)await sendTelegram(_0x5326d6[_0x5c3dd1(0x1b1)]['id'],_0x5c3dd1(0x197));else{if(_0x4e2dbd[_0x5c3dd1(0x136)]>0x1)_0x4e2dbd[_0x5c3dd1(0x152)]({'botID':_0x5c3dd1(0x1f6)});let _0x32c79d=[],_0x2f0487=[];const _0x48ff3b=_0x4e2dbd[_0x5c3dd1(0x136)]%0x4==0x0||_0x4e2dbd[_0x5c3dd1(0x136)]%0x4==0x3||_0x4e2dbd[_0x5c3dd1(0x136)]%0x3==0x1?0x4:0x3;let _0x386596=0x0;_0x4e2dbd[_0x5c3dd1(0x1d3)]((_0x2fa6c8,_0x2d9801)=>{const _0x28702f=_0x5c3dd1;if(_0x2d9801%_0x48ff3b==0x0)_0x2f0487=[];_0x2f0487[_0x28702f(0x152)](Markup['button']['callback'](_0x2fa6c8[_0x28702f(0x14f)]==_0x28702f(0x1f6)?_0x28702f(0x320):_0x28702f(0x196)+_0x2fa6c8['botID'],_0x28702f(0x2fe)+_0x2fa6c8['botID'])),_0x2d9801%_0x48ff3b==0x0&&(_0x32c79d[_0x386596]=_0x2f0487,_0x386596++);});const _0x416c8d=Markup[_0x5c3dd1(0x22a)](_0x32c79d);_0x5326d6['reply'](_0x5c3dd1(0x14c),_0x416c8d);}}),tgBot[_0x35edab(0x1fa)](/off_(.+)/,async _0x480f55=>{const _0x1aab72=_0x35edab,_0x1062e6=_0x480f55[_0x1aab72(0x2f8)][0x1];_0x480f55[_0x1aab72(0x15c)]();if(_0x1062e6==_0x1aab72(0x1f6)){const _0x10e5f9=getEnabledBots();await sendTelegram(_0x480f55['chat']['id'],_0x1aab72(0x16b)),_0x10e5f9[_0x1aab72(0x1d3)](_0x12f120=>{const _0x472e48=_0x1aab72;if(_0x12f120['botID']!=_0x472e48(0x1f6))toggleBot(_0x12f120['botID'],toggleStatus(_0x12f120[_0x472e48(0x14f)]),'stopped');});}else await sendTelegram(_0x480f55['chat']['id'],_0x1aab72(0x207)+_0x1062e6),toggleBot(_0x1062e6,toggleStatus(_0x1062e6),'stopped');}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x17a),async _0x3296c7=>{const _0x49865f=_0x35edab,_0x424e9a=getEnabledBots();if(_0x424e9a[_0x49865f(0x136)]==0x0)await sendTelegram(_0x3296c7[_0x49865f(0x1b1)]['id'],_0x49865f(0x197));else{if(_0x424e9a['length']>0x1){let _0x594431=[],_0x1c1c5f=[];const _0x53640e=_0x424e9a[_0x49865f(0x136)]%0x4==0x0||_0x424e9a[_0x49865f(0x136)]%0x4==0x3||_0x424e9a[_0x49865f(0x136)]%0x3==0x1?0x4:0x3;let _0x335c2c=0x0;_0x424e9a['forEach']((_0x54cd44,_0x2754c7)=>{const _0x1a59cc=_0x49865f;if(_0x2754c7%_0x53640e==0x0)_0x1c1c5f=[];_0x1c1c5f[_0x1a59cc(0x152)](Markup['button'][_0x1a59cc(0x1fd)](_0x1a59cc(0x196)+_0x54cd44['botID'],_0x1a59cc(0x1d2)+_0x54cd44[_0x1a59cc(0x14f)])),_0x2754c7%_0x53640e==0x0&&(_0x594431[_0x335c2c]=_0x1c1c5f,_0x335c2c++);});const _0x584f3a=Markup['inlineKeyboard'](_0x594431);_0x3296c7[_0x49865f(0x304)](_0x49865f(0x258),_0x584f3a);}else{const _0x4ab00c=_0x424e9a[0x0][_0x49865f(0x14f)];if(pid[_0x4ab00c])pid[_0x4ab00c][_0x49865f(0x293)]({'function':_0x49865f(0x1e5),'args':null});}}}),tgBot[_0x35edab(0x1fa)](/metrics_(.+)/,async _0x550c45=>{const _0x399bcb=_0x35edab,_0x53aa45=_0x550c45[_0x399bcb(0x2f8)][0x1];_0x550c45[_0x399bcb(0x15c)]();if(pid[_0x53aa45])pid[_0x53aa45]['send']({'function':_0x399bcb(0x1e5),'args':null});}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x17e),async _0x284f4b=>{const _0x4d77be=_0x35edab,_0x1194e1=getEnabledBots();if(_0x1194e1[_0x4d77be(0x136)]==0x0)await sendTelegram(_0x284f4b[_0x4d77be(0x1b1)]['id'],_0x4d77be(0x197));else{if(_0x1194e1[_0x4d77be(0x136)]>0x1){let _0x2e2df1=[],_0x3578a6=[];const _0x215819=_0x1194e1[_0x4d77be(0x136)]%0x4==0x0||_0x1194e1['length']%0x4==0x3||_0x1194e1[_0x4d77be(0x136)]%0x3==0x1?0x4:0x3;let _0x9c0469=0x0;_0x1194e1['forEach']((_0x3e6acc,_0x3544fd)=>{const _0x143c3b=_0x4d77be;if(_0x3544fd%_0x215819==0x0)_0x3578a6=[];_0x3578a6[_0x143c3b(0x152)](Markup[_0x143c3b(0x27e)]['callback'](_0x143c3b(0x196)+_0x3e6acc[_0x143c3b(0x14f)],_0x143c3b(0x252)+_0x3e6acc[_0x143c3b(0x14f)])),_0x3544fd%_0x215819==0x0&&(_0x2e2df1[_0x9c0469]=_0x3578a6,_0x9c0469++);});const _0x371c8c=Markup['inlineKeyboard'](_0x2e2df1);_0x284f4b[_0x4d77be(0x304)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x371c8c);}else{const _0xfc1a2a=_0x1194e1[0x0][_0x4d77be(0x14f)];if(pid[_0xfc1a2a])pid[_0xfc1a2a][_0x4d77be(0x293)]({'function':_0x4d77be(0x2c2),'args':null});}}}),tgBot[_0x35edab(0x1fa)](/portfolio_(.+)/,async _0x55d1c9=>{const _0x47eaa8=_0x35edab,_0x353307=_0x55d1c9[_0x47eaa8(0x2f8)][0x1];_0x55d1c9[_0x47eaa8(0x15c)]();if(pid[_0x353307])pid[_0x353307][_0x47eaa8(0x293)]({'function':_0x47eaa8(0x2c2),'args':null});}),tgBot[_0x35edab(0x1b5)]('update',async _0xa45e0e=>{const _0x13ec53=_0x35edab;await getMessages();if(!updateAvailable)await sendTelegram(_0xa45e0e[_0x13ec53(0x1b1)]['id'],_0x13ec53(0x1e1));else{if(!validInstallation)await sendTelegram(_0xa45e0e['chat']['id'],_0x13ec53(0x32b));else{const _0x3e2465=Markup[_0x13ec53(0x22a)]([Markup[_0x13ec53(0x27e)][_0x13ec53(0x1fd)](_0x13ec53(0x24a),_0x13ec53(0x1b0)),Markup[_0x13ec53(0x27e)][_0x13ec53(0x1fd)]('No',_0x13ec53(0x1f2))]);_0xa45e0e['reply'](_0x13ec53(0x29f),_0x3e2465);}}}),tgBot['action'](/update_(.+)/,async _0x39e760=>{const _0x30f2ea=_0x35edab,_0x3ac34d=_0x39e760[_0x30f2ea(0x2f8)][0x1];_0x39e760[_0x30f2ea(0x15c)](),_0x3ac34d=='yes'&&(await sendTelegram(_0x39e760[_0x30f2ea(0x1b1)]['id'],_0x30f2ea(0x25a)),updateBB('update')),_0x3ac34d=='no'&&await sendTelegram(_0x39e760[_0x30f2ea(0x1b1)]['id'],_0x30f2ea(0x177));}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x311),async _0x4989d1=>{const _0x36f0c4=_0x35edab;if(!validInstallation)await sendTelegram(_0x4989d1[_0x36f0c4(0x1b1)]['id'],_0x36f0c4(0x1fb));else{const _0x3adea0=Markup[_0x36f0c4(0x22a)]([Markup['button'][_0x36f0c4(0x1fd)](_0x36f0c4(0x24a),_0x36f0c4(0x277)),Markup[_0x36f0c4(0x27e)][_0x36f0c4(0x1fd)]('No',_0x36f0c4(0x292))]);_0x4989d1[_0x36f0c4(0x304)](_0x36f0c4(0x2b3),_0x3adea0);}}),tgBot[_0x35edab(0x1fa)](/reinstall_(.+)/,async _0x411f6d=>{const _0x7b7708=_0x35edab,_0x1bbde4=_0x411f6d['match'][0x1];_0x411f6d[_0x7b7708(0x15c)](),_0x1bbde4==_0x7b7708(0x30a)&&(await sendTelegram(_0x411f6d['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x7b7708(0x311))),_0x1bbde4=='no'&&await sendTelegram(_0x411f6d[_0x7b7708(0x1b1)]['id'],_0x7b7708(0x2dd));}),tgBot['command']('toggle',async _0x244fff=>{const _0x492986=_0x35edab,_0x2feafa=getBotsWithMode();if(_0x2feafa[_0x492986(0x136)]==0x0)await sendTelegram(_0x244fff[_0x492986(0x1b1)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x797b1b=[],_0x410062=[];const _0x3cc699=0x2;let _0x44449e=0x0;_0x2feafa[_0x492986(0x1d3)]((_0x1ad824,_0x3a5cf3)=>{const _0x36e731=_0x492986;if(_0x3a5cf3%_0x3cc699==0x0)_0x410062=[];_0x410062[_0x36e731(0x152)](Markup[_0x36e731(0x27e)][_0x36e731(0x1fd)](_0x36e731(0x196)+_0x1ad824[_0x36e731(0x14f)]+'\x20('+_0x1ad824[_0x36e731(0x198)]+')','toggle_'+_0x1ad824[_0x36e731(0x14f)])),_0x3a5cf3%_0x3cc699==0x0&&(_0x797b1b[_0x44449e]=_0x410062,_0x44449e++);});const _0xfaca26=Markup[_0x492986(0x22a)](_0x797b1b);_0x244fff[_0x492986(0x304)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0xfaca26);}}),tgBot[_0x35edab(0x1fa)](/toggle_(.+)/,async _0x240af9=>{const _0x28f542=_0x35edab,_0x48263a=_0x240af9[_0x28f542(0x2f8)][0x1];_0x240af9[_0x28f542(0x15c)]();const _0x2ee95c=getBotsWithMode(),_0x4c3d47=_0x2ee95c[_0x28f542(0x295)](_0x4d033b=>_0x4d033b['botID']==_0x48263a),_0x2590c6=_0x4c3d47[_0x28f542(0x198)]==_0x28f542(0x17b)?'manual':_0x28f542(0x17b);await sendTelegram(_0x240af9[_0x28f542(0x1b1)]['id'],_0x28f542(0x2f0)+_0x48263a+_0x28f542(0x16a)+_0x2590c6+_0x28f542(0x335)),toggleBotMode(_0x48263a);}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x285),async _0x2e0e46=>{const _0x3b0b6a=_0x35edab;let _0x3c68c8='';config['forEach'](_0x54925b=>{const _0x308c00=_0x5387;_0x3c68c8+='Bot\x20'+_0x54925b[_0x308c00(0x14f)]+':\x20'+_0x54925b[_0x308c00(0x232)]+'\x0a';}),await sendTelegram(_0x2e0e46['chat']['id'],_0x3c68c8,{'parse_mode':_0x3b0b6a(0x336)});}),tgBot[_0x35edab(0x1b5)](_0x35edab(0x15a),async _0x17b0cf=>{const _0x208203=_0x35edab;await sendTelegram(_0x17b0cf[_0x208203(0x1b1)]['id'],_0x293e71);}),process[_0x35edab(0x301)](_0x35edab(0x28b),()=>tgBot[_0x35edab(0x171)]('SIGINT')),process[_0x35edab(0x301)](_0x35edab(0x231),()=>tgBot[_0x35edab(0x171)](_0x35edab(0x231))),tgBot[_0x35edab(0x27d)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x330551,_0x274507,_0x21776c){const _0x3dab47=_0x503299;_0x21776c={..._0x21776c,'disable_web_page_preview':!![]};try{await tgBot[_0x3dab47(0x307)][_0x3dab47(0x224)](_0x330551,_0x274507,_0x21776c);}catch(_0xe0a7b0){console['log']('Telegram\x20error:',_0xe0a7b0);}}async function sendTelegramBot(_0x1497e5,_0x2dcb29){const _0x4a97fc=_0x503299;if(settings[_0x4a97fc(0x1ab)]){if(settings[_0x4a97fc(0x256)]==_0x4a97fc(0x1f6)||(_0x2dcb29[_0x4a97fc(0x237)]==_0x4a97fc(0x216)||_0x2dcb29[_0x4a97fc(0x237)]==_0x4a97fc(0x270)||_0x2dcb29[_0x4a97fc(0x237)]=='success')&&settings[_0x4a97fc(0x256)]==_0x4a97fc(0x1c7)||_0x2dcb29[_0x4a97fc(0x237)]==_0x4a97fc(0x1d6)&&settings['telegramEvents']==_0x4a97fc(0x324)){if(tgBot&&settings[_0x4a97fc(0x15d)]){if(_0x2dcb29['showname'])await sendTelegram(settings[_0x4a97fc(0x15d)],_0x2dcb29[_0x4a97fc(0x232)]+_0x4a97fc(0x183)+_0x2dcb29[_0x4a97fc(0x264)]);else await sendTelegram(settings['telegramChatId'],_0x4a97fc(0x196)+_0x1497e5+'\x20>\x20'+_0x2dcb29[_0x4a97fc(0x264)]);}}}}async function sendTelegramMsg(_0x4728d2,_0x37de76=_0x503299(0x336)){const _0x5f9ad4=_0x503299;return settings['telegramEnabled']&&tgBot&&settings[_0x5f9ad4(0x15d)]?(await sendTelegram(settings[_0x5f9ad4(0x15d)],_0x4728d2,{'parse_mode':_0x37de76}),!![]):![];}function getDeviceWithIp(_0x50c4cb){return devices['find'](_0x2953b1=>_0x2953b1['ip']===_0x50c4cb);}async function temporaryAccess2FA(_0x6224f1,_0x5ef14c){const _0x1e335a=_0x503299;let _0x47e84a=new Date(),_0x3e581b=![];if(lastIpApproval){if(_0x47e84a-lastIpApproval<0x1388)_0x3e581b=!![];}lastIpApproval=new Date();if(_0x3e581b)return;if(tgBot&&settings[_0x1e335a(0x15d)]){const _0x315cd6=uuidRandom();tmpStorage[_0x315cd6]={'uuid':_0x6224f1,'externalip':_0x5ef14c};const _0x13bd76=Markup[_0x1e335a(0x22a)]([Markup[_0x1e335a(0x27e)][_0x1e335a(0x1fd)](_0x1e335a(0x2e6),_0x1e335a(0x312)+_0x315cd6),Markup[_0x1e335a(0x27e)][_0x1e335a(0x1fd)]('15\x20min',_0x1e335a(0x16d)+_0x315cd6),Markup[_0x1e335a(0x27e)][_0x1e335a(0x1fd)](_0x1e335a(0x1d5),'tempaccess_30_'+_0x315cd6),Markup[_0x1e335a(0x27e)]['callback'](_0x1e335a(0x2b6),_0x1e335a(0x327)+_0x315cd6)]);await sendTelegram(settings[_0x1e335a(0x15d)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x5ef14c)['show']+'\x20?',_0x13bd76),tgBot[_0x1e335a(0x1fa)](/tempaccess_(.+)_(.+)/,async _0x5ab59a=>{const _0x2c808c=_0x1e335a,_0xaaa3be=_0x5ab59a[_0x2c808c(0x2f8)][0x1],_0x2122d3=_0x5ab59a[_0x2c808c(0x2f8)][0x2],{uuid:_0x39062c,externalip:_0x4283aa}=tmpStorage[_0x2122d3];delete tmpStorage[_0x2122d3],_0x5ab59a[_0x2c808c(0x15c)](),devices[_0x39062c][_0x2c808c(0x179)]={'clientip':_0x4283aa,'timestamp':new Date()[_0x2c808c(0x1e8)](),'expiry':_0xaaa3be},_0xaaa3be!=_0x2c808c(0x2b6)?(await sendTelegram(_0x5ab59a[_0x2c808c(0x1b1)]['id'],'Access\x20enabled\x20for\x20'+_0xaaa3be+'\x20minutes',{'parse_mode':_0x2c808c(0x336)}),io['to'](_0x39062c)[_0x2c808c(0x2a7)]('status',{'access':{'allow':![],'reason':_0x2c808c(0x273),'token':null}})):(await sendTelegram(_0x5ab59a[_0x2c808c(0x1b1)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x39062c)[_0x2c808c(0x2a7)](_0x2c808c(0x303),{'access':{'allow':![],'reason':_0x2c808c(0x32c),'token':null}}));});}}async function loginAccess2FA(_0x535ee0,_0x4d4d4b){const _0x81b166=_0x503299;if(tgBot&&settings[_0x81b166(0x15d)]){const _0x44581f=uuidRandom();tmpStorage[_0x44581f]={'uuid':_0x535ee0,'externalip':_0x4d4d4b};const _0x4dde1e=Markup[_0x81b166(0x22a)]([Markup[_0x81b166(0x27e)][_0x81b166(0x1fd)](_0x81b166(0x23b),_0x81b166(0x310)+loginExpiry+'_'+_0x44581f),Markup[_0x81b166(0x27e)][_0x81b166(0x1fd)](_0x81b166(0x2b6),'login2fa_reject_'+_0x44581f)]);await sendTelegram(settings[_0x81b166(0x15d)],_0x81b166(0x1da)+normalizeIP(_0x4d4d4b)[_0x81b166(0x181)]+'\x20?',_0x4dde1e),tgBot[_0x81b166(0x1fa)](/login2fa_(.+)_(.+)/,async _0x48615d=>{const _0x2e3cd1=_0x81b166,_0x46b8a0=_0x48615d[_0x2e3cd1(0x2f8)][0x1],_0x24c026=_0x48615d['match'][0x2],{uuid:_0x338c0d,externalip:_0x6a16bd}=tmpStorage[_0x24c026];delete tmpStorage[_0x24c026],_0x48615d['editMessageReplyMarkup'](),devices[_0x338c0d][_0x2e3cd1(0x2b1)]={'clientip':_0x6a16bd,'timestamp':new Date()[_0x2e3cd1(0x1e8)](),'expiry':_0x46b8a0},_0x46b8a0!=_0x2e3cd1(0x2b6)?(await sendTelegram(_0x48615d[_0x2e3cd1(0x1b1)]['id'],'Login\x20accepted',{'parse_mode':_0x2e3cd1(0x336)}),io['to'](_0x338c0d)[_0x2e3cd1(0x2a7)](_0x2e3cd1(0x303),{'access':{'allow':![],'reason':_0x2e3cd1(0x273),'token':null}})):(await sendTelegram(_0x48615d['chat']['id'],_0x2e3cd1(0x1af)),io['to'](_0x338c0d)[_0x2e3cd1(0x2a7)]('status',{'access':{'allow':![],'reason':_0x2e3cd1(0x2b5),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2085b8=_0x503299;return dbConfig[_0x2085b8(0x1f7)](_0x2085b8(0x153))[_0x2085b8(0x141)](_0x2085b8(0x14f))['filter']({'status':'enabled'})[_0x2085b8(0x1ce)]()||[];}function getDisabledBots(){const _0x29417d=_0x503299;return dbConfig[_0x29417d(0x1f7)]('bots')[_0x29417d(0x141)]('botID')['filter']({'status':_0x29417d(0x18d)})[_0x29417d(0x1ce)]()||[];}function _0x5387(_0x5c454d,_0x48115a){const _0xa0c347=_0x2371();return _0x5387=function(_0x53e43b,_0x5c1826){_0x53e43b=_0x53e43b-0x132;let _0x2371eb=_0xa0c347[_0x53e43b];return _0x2371eb;},_0x5387(_0x5c454d,_0x48115a);}function getBotAttributes(_0x481fc1){const _0x12fdc9=_0x503299;let _0x3388b6={};const _0x1eb6fc=configpath+_0x12fdc9(0x23f)+_0x481fc1+_0x12fdc9(0x226),_0x1afaa5=fs[_0x12fdc9(0x282)](_0x1eb6fc);if(_0x1afaa5){const _0x5b8d99=fs[_0x12fdc9(0x1a9)](_0x1eb6fc);try{const _0x452f96=JSON[_0x12fdc9(0x263)](_0x5b8d99),_0x27631c=_0x452f96?_0x452f96[_0x12fdc9(0x298)][0x0][_0x12fdc9(0x2d4)]:![];_0x3388b6[_0x12fdc9(0x198)]=_0x27631c?_0x12fdc9(0x17b):_0x12fdc9(0x261),_0x3388b6['botname']=_0x452f96?_0x452f96[_0x12fdc9(0x298)][0x0]['botname']:_0x12fdc9(0x196)+_0x481fc1;}catch(_0x5446ea){_0x3388b6[_0x12fdc9(0x198)]=_0x12fdc9(0x261),_0x3388b6[_0x12fdc9(0x232)]=_0x12fdc9(0x196)+_0x481fc1;}}else _0x3388b6[_0x12fdc9(0x198)]=_0x12fdc9(0x261),_0x3388b6[_0x12fdc9(0x232)]=_0x12fdc9(0x196)+_0x481fc1;return _0x3388b6;}function getBotsWithMode(){const _0x43c0ff=_0x503299,_0x573421=dbConfig['get']('bots')[_0x43c0ff(0x141)](_0x43c0ff(0x14f))[_0x43c0ff(0x1ce)]()||[];return _0x573421[_0x43c0ff(0x1d3)](_0x3aa99a=>{const _0x267bd0=_0x43c0ff;let _0xbdc6e5=getBotAttributes(_0x3aa99a[_0x267bd0(0x14f)]);_0x3aa99a[_0x267bd0(0x198)]=_0xbdc6e5[_0x267bd0(0x198)];}),_0x573421;}function getBotExchanges(){const _0x16cc38=_0x503299;let _0x450045=[];const _0x2b70e5=dbConfig[_0x16cc38(0x1f7)](_0x16cc38(0x153))['sortBy'](_0x16cc38(0x14f))['value']()||[];_0x2b70e5[_0x16cc38(0x1d3)](_0x93a2cf=>{const _0xa26b80=_0x16cc38;if(_0x93a2cf[_0xa26b80(0x303)]==_0xa26b80(0x2bc)){const _0x541cab=configpath+'bot-'+_0x93a2cf['botID']+_0xa26b80(0x226),_0x5efe18=fs[_0xa26b80(0x282)](_0x541cab);let _0x465c5f;if(_0x5efe18){const _0x358b30=fs[_0xa26b80(0x1a9)](_0x541cab);try{const _0x39066b=JSON[_0xa26b80(0x263)](_0x358b30);_0x465c5f=_0x39066b?_0x39066b['bot'][0x0][_0xa26b80(0x2a5)]:null;}catch(_0x419639){}}if(_0x465c5f)_0x450045[_0xa26b80(0x152)](_0x465c5f);}});const _0x5b8131=[...new Set(_0x450045)][_0x16cc38(0x2aa)]();return _0x5b8131;}async function initUser(){const _0x671854=_0x503299;if(!settings[_0x671854(0x2cf)]){const _0x38e155=uuidRandom();mixpanel['alias'](_0x38e155),updateSetting(_0x671854(0x2cf),_0x38e155);}}async function initSecure(){const _0x25bce4=_0x503299;let _0x256564=getSecure();if(!_0x256564[_0x25bce4(0x2c4)](_0x25bce4(0x22f))){let _0x3be98e=await generateKeys();_0x256564[_0x25bce4(0x255)]=_0x3be98e[_0x25bce4(0x255)],_0x256564[_0x25bce4(0x30d)]=_0x3be98e['privateKey'],_0x256564[_0x25bce4(0x22f)]=crypto[_0x25bce4(0x18c)](0x20)[_0x25bce4(0x318)](_0x25bce4(0x24c));;storeSecure(_0x256564);}}function getSettings(){const _0x5659fe=_0x503299;return dbSettings['get'](_0x5659fe(0x192))['value']()||{};}function getSecure(){const _0x1d02ba=_0x503299;return dbSecure[_0x1d02ba(0x1f7)]('secure')[_0x1d02ba(0x1ce)]()||{};}function getBlacklist(){const _0x2638b9=_0x503299;return dbSecure[_0x2638b9(0x1f7)](_0x2638b9(0x26c))['value']()||[];}function broadcastToBots(_0x5b7d33,_0x29b521){const _0x4fd8e3=_0x503299;config[_0x4fd8e3(0x1d3)](_0x4855bb=>{const _0x4e9f6d=_0x4fd8e3;if(_0x4855bb[_0x4e9f6d(0x303)]==_0x4e9f6d(0x2bc)&&_0x4855bb[_0x4e9f6d(0x2a1)]==_0x4e9f6d(0x13b)||_0x4855bb[_0x4e9f6d(0x303)]==_0x4e9f6d(0x14b)&&_0x4855bb[_0x4e9f6d(0x2a1)]==_0x4e9f6d(0x13b)){if(pid[_0x4855bb['botID']])pid[_0x4855bb['botID']][_0x4e9f6d(0x293)]({[_0x5b7d33]:_0x29b521});}});}async function storeSettings(_0x3cc06f,_0x3ea6d7=![]){const _0x2bd25e=_0x503299;_0x3cc06f={...settings,..._0x3cc06f};if(_0x3ea6d7&&_0x3cc06f['bbPassword']!='************'&&_0x3cc06f[_0x2bd25e(0x2d6)]!=_0x2bd25e(0x29a)&&_0x3cc06f[_0x2bd25e(0x2d6)]!=''){const _0x1ce18d=decryptRSA(secure[_0x2bd25e(0x30d)],_0x3cc06f['bbPassword'])['split'](_0x2bd25e(0x19e))[0x0],_0x178b7b=bcrypt[_0x2bd25e(0x1d7)](_0x1ce18d,saltRounds);_0x3cc06f={..._0x3cc06f,'bbPassword':_0x178b7b};}if(_0x3ea6d7&&_0x3cc06f['telegramToken']!='************'&&_0x3cc06f[_0x2bd25e(0x2a8)]!='***'&&_0x3cc06f[_0x2bd25e(0x2a8)]!=''){const _0x556f89=decryptRSA(secure['privateKey'],_0x3cc06f['telegramToken'])[_0x2bd25e(0x317)](_0x2bd25e(0x19e))[0x0];_0x3cc06f={..._0x3cc06f,'telegramToken':_0x556f89};}if(_0x3ea6d7&&_0x3cc06f[_0x2bd25e(0x2cb)]!='************'&&_0x3cc06f['marketcapApi']!='***'&&_0x3cc06f[_0x2bd25e(0x2cb)]!=''){const _0x34153a=decryptRSA(secure['privateKey'],_0x3cc06f['marketcapApi'])['split']('|@|')[0x0];_0x3cc06f={..._0x3cc06f,'marketcapApi':_0x34153a};}const _0x2e8be6=_0x3cc06f[_0x2bd25e(0x2a8)]!=_0x2bd25e(0x146)&&_0x3cc06f[_0x2bd25e(0x2a8)]!=settings['telegramToken']||_0x3cc06f[_0x2bd25e(0x333)]!=settings[_0x2bd25e(0x333)],_0x2be6ed=_0x3cc06f['telegramToken']==''||_0x3cc06f[_0x2bd25e(0x333)]=='',_0x2c1f43=_0x3cc06f[_0x2bd25e(0x2cb)]&&_0x3cc06f['marketcapApi']!='************'&&_0x3cc06f['marketcapApi']!=settings['telegramToken'];_0x2e8be6&&(_0x3cc06f[_0x2bd25e(0x15d)]=null,_0x3cc06f[_0x2bd25e(0x256)]=_0x2bd25e(0x1f6));for(const [_0x363b9d,_0x385111]of Object[_0x2bd25e(0x204)](_0x3cc06f)){if(_0x363b9d==_0x2bd25e(0x2a8)&&_0x385111==_0x2bd25e(0x146)){_0x3cc06f[_0x2bd25e(0x2a8)]=settings['telegramToken'];continue;};if(_0x363b9d=='bbPassword'&&_0x385111=='************'){_0x3cc06f['bbPassword']=settings[_0x2bd25e(0x2d6)];continue;};if(_0x363b9d=='marketcapApi'&&_0x385111==_0x2bd25e(0x146)){_0x3cc06f[_0x2bd25e(0x2cb)]=settings[_0x2bd25e(0x2cb)];continue;};dbSettings[_0x2bd25e(0x2ea)](_0x2bd25e(0x243)+_0x363b9d,_0x385111)[_0x2bd25e(0x2c1)]();}settings=_0x3cc06f,io['to'](_0x2bd25e(0x1e4))[_0x2bd25e(0x2a7)](_0x2bd25e(0x192),cleanSettings()),broadcastToBots(_0x2bd25e(0x2c8),settings[_0x2bd25e(0x2c8)]),broadcastToBots(_0x2bd25e(0x2ab),settings[_0x2bd25e(0x2ab)]),broadcastToBots(_0x2bd25e(0x2cb),settings[_0x2bd25e(0x2cb)]);if(_0x2e8be6&&!_0x2be6ed)initTelegram();if(_0x2e8be6&&_0x2be6ed)disableTelegram();getAllClients()[_0x2bd25e(0x1d3)](_0x21e936=>{const _0xb0cf8a=_0x2bd25e;getSocket(_0x21e936['id'])[_0xb0cf8a(0x2a7)](_0xb0cf8a(0x303),{'access':{'allow':![],'reason':_0xb0cf8a(0x273),'token':null}});}),_0x2c1f43&&(await sleep(0xbb8),testMarketcapApi(_0x3cc06f[_0x2bd25e(0x2cb)]));}async function testMarketcapApi(_0x491781){const _0x4522a7=_0x503299,_0x463f7f=[_0x4522a7(0x221),_0x4522a7(0x15f)];try{await axios[_0x4522a7(0x1f7)](_0x4522a7(0x1ee),{'headers':{'X-CMC_PRO_API_KEY':_0x491781},'params':{'symbol':_0x463f7f[_0x4522a7(0x318)]()}});}catch(_0x1e2dad){_0x1e2dad[_0x4522a7(0x318)]()[_0x4522a7(0x132)](_0x4522a7(0x1c8))?(io['to'](_0x4522a7(0x1e4))[_0x4522a7(0x2a7)](_0x4522a7(0x2d3),_0x4522a7(0x1a1)),logger[_0x4522a7(0x2a9)](_0x4522a7(0x1a1))):(io['to'](_0x4522a7(0x1e4))[_0x4522a7(0x2a7)](_0x4522a7(0x2d3),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger['full'](_0x4522a7(0x2da)),logger[_0x4522a7(0x2c5)](_0x4522a7(0x145),_0x1e2dad['toString']()+_0x4522a7(0x1de)+_0x1e2dad['code']));return;}logger[_0x4522a7(0x2c5)](_0x4522a7(0x250));}function updateSetting(_0x5eb6dc,_0x398646){const _0x182088=_0x503299;dbSettings[_0x182088(0x2ea)](_0x182088(0x243)+_0x5eb6dc,_0x398646)[_0x182088(0x2c1)](),settings=getSettings(),io['to'](_0x182088(0x1e4))[_0x182088(0x2a7)](_0x182088(0x192),cleanSettings());}function storeSecure(_0x5bb756){const _0x3fc343=_0x503299;dbSecure['get'](_0x3fc343(0x330))[_0x3fc343(0x152)](_0x5bb756)[_0x3fc343(0x2c1)](),secure=_0x5bb756;}function addBlacklist(_0x466211){const _0x2cee31=_0x503299;cleanBlacklist();let _0x5ef123;devices[_0x466211][_0x2cee31(0x179)]?_0x5ef123=Math[_0x2cee31(0x144)](devices[_0x466211][_0x2cee31(0x179)][_0x2cee31(0x20b)],loginExpiry):_0x5ef123=loginExpiry,dbSecure[_0x2cee31(0x1f7)](_0x2cee31(0x26c))[_0x2cee31(0x152)]({'expiry':new Date()[_0x2cee31(0x1e8)]()+_0x5ef123*0x3c*0x3e8,'token':devices[_0x466211][_0x2cee31(0x1b9)][_0x2cee31(0x223)]})['write'](),blacklist=dbSecure['get'](_0x2cee31(0x26c))[_0x2cee31(0x1ce)]();}function cleanBlacklist(){const _0x56282e=_0x503299;let _0x143ede=dbSecure['get'](_0x56282e(0x26c))['cloneDeep']()[_0x56282e(0x1ce)](),_0x1a706b=new Date()[_0x56282e(0x1e8)]();_0x143ede[_0x56282e(0x1d3)](_0x1ae2b8=>{const _0x25df30=_0x56282e;_0x1ae2b8[_0x25df30(0x20b)]<_0x1a706b&&dbSecure[_0x25df30(0x1f7)](_0x25df30(0x26c))[_0x25df30(0x253)]({'expiry':_0x1ae2b8[_0x25df30(0x20b)]})[_0x25df30(0x2c1)]();});}function initStates(){const _0x44a0ab=_0x503299;let _0xc7584e=getConfiguration();_0xc7584e[_0x44a0ab(0x1d3)](_0x2c035f=>{const _0x5cbabc=_0x44a0ab;_0x2c035f[_0x5cbabc(0x2a1)]=_0x5cbabc(0x21a);}),storeConfiguration(_0xc7584e);}async function generateKeys(){const _0xb3f503=_0x503299,_0x445472=forge[_0xb3f503(0x1f3)]['rsa'][_0xb3f503(0x2cd)]({'bits':0x1000,'e':0x10001}),_0x101d5a=forge[_0xb3f503(0x1f3)]['privateKeyToPem'](_0x445472[_0xb3f503(0x30d)]),_0x4ac21e=forge['pki'][_0xb3f503(0x331)](_0x445472[_0xb3f503(0x255)]);return{'privateKey':_0x101d5a,'publicKey':_0x4ac21e};}async function oneTimeMigration(){const _0xdb478a=_0x503299;let _0x2fc22a=getSettings(),_0x469055=![];!_0x2fc22a[_0xdb478a(0x2c4)](_0xdb478a(0x14d))&&(_0x2fc22a[_0xdb478a(0x14d)]=0x0,_0x469055=!![]);!_0x2fc22a[_0xdb478a(0x2c4)](_0xdb478a(0x1e0))&&(_0x2fc22a[_0xdb478a(0x1e0)]=0x0,_0x469055=!![]);!_0x2fc22a[_0xdb478a(0x2c4)]('latestversion')&&(_0x2fc22a[_0xdb478a(0x1f0)]=_0xdb478a(0x2e7),_0x469055=!![]);!_0x2fc22a[_0xdb478a(0x2c4)](_0xdb478a(0x2ab))&&(_0x2fc22a[_0xdb478a(0x2ab)]=![],_0x469055=!![]);!_0x2fc22a[_0xdb478a(0x2c4)](_0xdb478a(0x2cb))&&(_0x2fc22a[_0xdb478a(0x2cb)]='',_0x469055=!![]);if(_0x469055)storeSettings(_0x2fc22a);try{fs[_0xdb478a(0x222)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0xbdca43=>{const _0x191ca6=_0xdb478a;if(!_0xbdca43[_0x191ca6(0x1a7)]()){if(!_0xbdca43[_0x191ca6(0x1f9)][_0x191ca6(0x180)](_0x191ca6(0x21e)))fs[_0x191ca6(0x1be)](configbackuppath+_0xbdca43[_0x191ca6(0x1f9)]);}else fs['rmSync'](configbackuppath+_0xbdca43[_0x191ca6(0x1f9)],{'recursive':!![]});});}catch(_0x3045e6){logger[_0xdb478a(0x2c5)]('Error\x20removing\x20old\x20backup\x20files:',_0x3045e6);}}function storeConfiguration(_0x36ae79){const _0x57696d=_0x503299;dbConfig[_0x57696d(0x1f7)](_0x57696d(0x153))[_0x57696d(0x253)]()['write'](),dbConfig[_0x57696d(0x1f7)](_0x57696d(0x153))[_0x57696d(0x152)](..._0x36ae79)[_0x57696d(0x2c1)](),config=_0x36ae79;}async function resetPassword(){const _0x12d53e=_0x503299;if(tgBot&&settings[_0x12d53e(0x15d)]){const _0x2fe5dd=Markup[_0x12d53e(0x22a)]([Markup[_0x12d53e(0x27e)][_0x12d53e(0x1fd)](_0x12d53e(0x30a),_0x12d53e(0x271)),Markup[_0x12d53e(0x27e)]['callback']('no','resetpw_no')]);await sendTelegram(settings[_0x12d53e(0x15d)],_0x12d53e(0x30b),_0x2fe5dd),tgBot[_0x12d53e(0x1fa)](/resetpw_(.+)/,async _0x31793e=>{const _0x11c845=_0x12d53e,_0x43eee9=_0x31793e['match'][0x1];_0x31793e['editMessageReplyMarkup']();if(_0x43eee9!='no'){const _0x55ac02=0xf,_0x3fa74b=_0x11c845(0x162),_0x1648fc=Array[_0x11c845(0x158)](crypto['randomFillSync'](new Uint32Array(_0x55ac02)))[_0x11c845(0x32d)](_0x92c7aa=>_0x3fa74b[_0x92c7aa%_0x3fa74b[_0x11c845(0x136)]])[_0x11c845(0x26b)](''),_0xc172eb=bcrypt['hashSync'](_0x1648fc,saltRounds);storeSettings({'bbPassword':_0xc172eb}),await sendTelegram(_0x31793e[_0x11c845(0x1b1)]['id'],_0x11c845(0x1c1)+_0x1648fc,{'parse_mode':'HTML'});}else await sendTelegram(_0x31793e['chat']['id'],_0x11c845(0x27f));});}}async function confirmRestore(_0x30d510,_0x6ce5b7){const _0x1442c9=_0x503299;io['to'](_0x1442c9(0x1e4))[_0x1442c9(0x2a7)](_0x1442c9(0x2d3),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x1442c9(0x206));if(tgBot&&settings[_0x1442c9(0x15d)]){const _0x3a626f=uuidRandom();tmpStorage[_0x3a626f]={'path':_0x30d510,'filename':_0x6ce5b7};const _0x820b7a=Markup[_0x1442c9(0x22a)]([Markup['button'][_0x1442c9(0x1fd)](_0x1442c9(0x30a),_0x1442c9(0x1bf)+_0x3a626f),Markup[_0x1442c9(0x27e)][_0x1442c9(0x1fd)]('no',_0x1442c9(0x26d)+_0x3a626f)]);await sendTelegram(settings[_0x1442c9(0x15d)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x820b7a),tgBot[_0x1442c9(0x1fa)](/restore_(.+)_(.+)/,async _0x1fbb22=>{const _0x2ed322=_0x1442c9,_0x4192da=_0x1fbb22[_0x2ed322(0x2f8)][0x1],_0x2bc638=_0x1fbb22[_0x2ed322(0x2f8)][0x2],{path:_0x17fd13,filename:_0x3597ab}=tmpStorage[_0x2bc638];delete tmpStorage[_0x2bc638],_0x1fbb22[_0x2ed322(0x15c)](),_0x4192da==_0x2ed322(0x30a)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x1fbb22['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x2ed322(0x336)}),unzipFile(_0x17fd13,_0x3597ab)):(logger[_0x2ed322(0x2c5)]('Restore\x20process\x20aborted'),await sendTelegram(_0x1fbb22[_0x2ed322(0x1b1)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x103065=_0x503299,_0x593c68=new Date();return _0x593c68[_0x103065(0x148)]()+'/'+(_0x593c68[_0x103065(0x218)]()+0x1)[_0x103065(0x318)]()['padStart'](0x2,'0')+'/'+_0x593c68[_0x103065(0x308)]()['toString']()[_0x103065(0x1c0)](0x2,'0')+'\x20'+_0x593c68[_0x103065(0x33b)]()[_0x103065(0x318)]()[_0x103065(0x1c0)](0x2,'0')+':'+_0x593c68[_0x103065(0x266)]()['toString']()['padStart'](0x2,'0')+':'+_0x593c68['getSeconds']()[_0x103065(0x318)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x27b136=_0x503299,_0x43a150=shiftedTime();return _0x43a150[_0x27b136(0x148)]()+'/'+(_0x43a150[_0x27b136(0x218)]()+0x1)[_0x27b136(0x318)]()[_0x27b136(0x1c0)](0x2,'0')+'/'+_0x43a150[_0x27b136(0x308)]()[_0x27b136(0x318)]()['padStart'](0x2,'0')+'\x20'+_0x43a150['getHours']()[_0x27b136(0x318)]()['padStart'](0x2,'0')+':'+_0x43a150['getMinutes']()['toString']()[_0x27b136(0x1c0)](0x2,'0')+':'+_0x43a150['getSeconds']()[_0x27b136(0x318)]()[_0x27b136(0x1c0)](0x2,'0');}function getCleanTimeStamp(){const _0x1b1962=_0x503299,_0x5535ed=shiftedTime();return _0x5535ed[_0x1b1962(0x148)]()+(_0x5535ed['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+_0x5535ed[_0x1b1962(0x308)]()['toString']()[_0x1b1962(0x1c0)](0x2,'0')+'-'+_0x5535ed[_0x1b1962(0x33b)]()[_0x1b1962(0x318)]()['padStart'](0x2,'0')+_0x5535ed['getMinutes']()[_0x1b1962(0x318)]()[_0x1b1962(0x1c0)](0x2,'0')+_0x5535ed[_0x1b1962(0x2b8)]()[_0x1b1962(0x318)]()['padStart'](0x2,'0');}function shiftedTime(){const _0xafed13=_0x503299,_0x37214b=new Date();let _0x2aefef=_0x37214b;if(settings[_0xafed13(0x2c8)]&&settings['timeshift']!==0x0)_0x2aefef=fns[_0xafed13(0x314)](_0x37214b,{'hours':settings[_0xafed13(0x2c8)]});return _0x2aefef;}async function startScheduler(){const _0x151ff1=_0x503299,_0x1bf6bc=new Date()[_0x151ff1(0x1ad)](),_0x25a903=shiftedTime()['getHours']();_0x25a903==0x4&&backupConfigFiles(),_0x25a903==0x0&&rotateLogFiles(),_0x1bf6bc%0x6==0x0&&triggerAnalytics(),_0x1bf6bc%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x13504b){const _0x43e836=_0x503299;logger[_0x43e836(0x2c5)](_0x43e836(0x279)+_0x13504b);const _0x368e22=getBotsWithMode();_0x368e22[_0x43e836(0x136)]>0x0?confirmRestore(configbackuppath,_0x13504b):unzipFile(configbackuppath,_0x13504b);}async function getBackupFiles(_0xda1efc=null){const _0x303798=_0x503299;let _0x31425d=[],_0x16e3dd=fs[_0x303798(0x222)](configbackuppath,{'withFileTypes':!![]});_0x16e3dd[_0x303798(0x2aa)]((_0x2e7a6b,_0x116562)=>_0x2e7a6b[_0x303798(0x1f9)]<_0x116562[_0x303798(0x1f9)]?0x1:_0x116562[_0x303798(0x1f9)]<_0x2e7a6b[_0x303798(0x1f9)]?-0x1:0x0),_0x16e3dd[_0x303798(0x1d3)](_0x1c9e2c=>{const _0x5cf896=_0x303798;if(!_0x1c9e2c[_0x5cf896(0x1a7)]()&&_0x1c9e2c['name']['startsWith'](_0x5cf896(0x21e))&&_0x1c9e2c[_0x5cf896(0x1f9)]['endsWith'](_0x5cf896(0x2af))){const _0x21acca=formatDate(fs[_0x5cf896(0x2be)](configbackuppath+_0x1c9e2c[_0x5cf896(0x1f9)])[_0x5cf896(0x188)]);_0x31425d[_0x5cf896(0x152)]({'name':_0x1c9e2c[_0x5cf896(0x1f9)],'mtime':_0x21acca});}});if(_0xda1efc)io['to'](_0xda1efc)['emit']('backup-files',_0x31425d);else return _0x31425d;}async function backupConfigFiles(){const _0x4297b0=_0x503299;await zipFiles('backup-full');const _0x59a35b=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+(_0x4297b0(0x21e)+_0x59a35b+_0x4297b0(0x2af)));let _0x50de1f=fs[_0x4297b0(0x222)](configbackuppath,{'withFileTypes':!![]});_0x50de1f[_0x4297b0(0x2aa)]((_0x2d7f57,_0x3f79dd)=>_0x2d7f57[_0x4297b0(0x1f9)]<_0x3f79dd['name']?0x1:_0x3f79dd['name']<_0x2d7f57[_0x4297b0(0x1f9)]?-0x1:0x0),_0x50de1f[_0x4297b0(0x136)]>maxBackups&&fs[_0x4297b0(0x1be)](configbackuppath+_0x50de1f[_0x50de1f['length']-0x1][_0x4297b0(0x1f9)]);}function rotateLogFiles(){const _0x57c856=_0x503299,_0x9fc17f=fs['statSync'](logspath+'output-000.log'),_0x3ad6a1=_0x9fc17f[_0x57c856(0x25d)]/0x400;if(_0x3ad6a1>0x64){let _0x55b696=fs[_0x57c856(0x222)](logspath,{'withFileTypes':!![]});_0x55b696[_0x57c856(0x2aa)]((_0x2b400b,_0x8363ff)=>_0x2b400b['name']<_0x8363ff[_0x57c856(0x1f9)]?0x1:_0x8363ff[_0x57c856(0x1f9)]<_0x2b400b[_0x57c856(0x1f9)]?-0x1:0x0),_0x55b696[_0x57c856(0x1d3)](_0x1d3630=>{const _0x11ffc2=_0x57c856;if(_0x1d3630[_0x11ffc2(0x1f9)]==_0x11ffc2(0x18a))fs[_0x11ffc2(0x154)](logspath+_0x1d3630[_0x11ffc2(0x1f9)],logspath+_0x11ffc2(0x316));if(_0x1d3630[_0x11ffc2(0x1f9)]=='output-001.log')fs[_0x11ffc2(0x154)](logspath+_0x1d3630[_0x11ffc2(0x1f9)],logspath+_0x11ffc2(0x18a));_0x1d3630[_0x11ffc2(0x1f9)]=='output-000.log'&&(fs[_0x11ffc2(0x154)](logspath+_0x1d3630[_0x11ffc2(0x1f9)],logspath+_0x11ffc2(0x31a)),fs[_0x11ffc2(0x2a3)](logspath+_0x1d3630['name'],''));});}}async function zipFiles(_0x167cf9){const _0x49fc48=_0x503299;let _0x16d3e9;if(_0x167cf9=='logs')_0x16d3e9=logspath;if(_0x167cf9=='backup')_0x16d3e9=configpath;if(_0x167cf9=='backup-full')_0x16d3e9=configpath;let _0x53cf61=fs[_0x49fc48(0x222)](_0x16d3e9,{'withFileTypes':!![]});const _0x5ac1b6=new JSZip();_0x53cf61[_0x49fc48(0x1d3)](_0x1fe51f=>{const _0x1b2e3d=_0x49fc48;if(!_0x1fe51f[_0x1b2e3d(0x1a7)]()){let _0x3bffbd=fs[_0x1b2e3d(0x1a9)](_0x16d3e9+_0x1fe51f['name']);if(_0x167cf9==_0x1b2e3d(0x142)){const _0x1ce8e0=/^bot-[0-9]{3}-config.json$/,_0x304ac1=_0x1ce8e0['test'](_0x1fe51f[_0x1b2e3d(0x1f9)]);if(_0x304ac1){const _0x1d96a2=JSON['parse'](_0x3bffbd);if(_0x1d96a2[_0x1b2e3d(0x298)][0x0]){_0x1d96a2[_0x1b2e3d(0x298)][0x0][_0x1b2e3d(0x2bf)]=_0x1b2e3d(0x29a),_0x1d96a2[_0x1b2e3d(0x298)][0x0][_0x1b2e3d(0x240)]=_0x1b2e3d(0x29a);if(_0x1d96a2[_0x1b2e3d(0x298)][0x0]['apiPassword'])_0x1d96a2[_0x1b2e3d(0x298)][0x0]['apiPassword']=_0x1b2e3d(0x29a);}_0x3bffbd=JSON[_0x1b2e3d(0x2ec)](_0x1d96a2,null,0x2);}if(_0x1fe51f['name']=='bb-settings.json'){const _0x502cc1=JSON['parse'](_0x3bffbd);if(_0x502cc1['settings']['loginRequired'])_0x502cc1[_0x1b2e3d(0x192)][_0x1b2e3d(0x2d1)]=![];if(_0x502cc1[_0x1b2e3d(0x192)][_0x1b2e3d(0x2d6)])_0x502cc1['settings'][_0x1b2e3d(0x2d6)]='***';if(_0x502cc1[_0x1b2e3d(0x192)]['telegramToken'])_0x502cc1[_0x1b2e3d(0x192)][_0x1b2e3d(0x2a8)]=_0x1b2e3d(0x29a);if(_0x502cc1[_0x1b2e3d(0x192)][_0x1b2e3d(0x15d)])_0x502cc1['settings'][_0x1b2e3d(0x15d)]=null;if(_0x502cc1['settings']['marketcapApi'])_0x502cc1[_0x1b2e3d(0x192)][_0x1b2e3d(0x2cb)]='***';_0x3bffbd=JSON[_0x1b2e3d(0x2ec)](_0x502cc1,null,0x2);}if(_0x1fe51f[_0x1b2e3d(0x1f9)]!='bb-secure.json')_0x5ac1b6[_0x1b2e3d(0x332)](_0x1fe51f[_0x1b2e3d(0x1f9)],_0x3bffbd);}else _0x5ac1b6['file'](_0x1fe51f['name'],_0x3bffbd);}});const _0x277d99=await _0x5ac1b6[_0x49fc48(0x182)]({'type':_0x49fc48(0x32f),'base64':![],'compression':_0x49fc48(0x299)});fs['writeFileSync'](zippath+(_0x167cf9+_0x49fc48(0x2af)),_0x277d99,_0x49fc48(0x1b6));}async function unzipFile(_0x299937,_0x2ca2ec){const _0x4d3101=_0x503299;fs[_0x4d3101(0x222)](configpath,{'withFileTypes':!![]})[_0x4d3101(0x1d3)](_0x162d0d=>{const _0x4aa262=_0x4d3101;if(!_0x162d0d[_0x4aa262(0x1a7)]())fs['rmSync'](configpath+_0x162d0d['name']);});const _0x1eae27=fs[_0x4d3101(0x1a9)](_0x299937+_0x2ca2ec,_0x4d3101(0x1b6)),_0x75389c=await JSZip[_0x4d3101(0x276)](_0x1eae27,{'base64':![],'checkCRC32':!![]});for(const _0x24d872 of Object['keys'](_0x75389c['files'])){const _0x25cbce=_0x75389c[_0x4d3101(0x172)][_0x24d872],_0x10c3ca=await _0x25cbce[_0x4d3101(0x2dc)](_0x4d3101(0x32f));fs['writeFileSync'](configpath+_0x25cbce['name'],_0x10c3ca);}fs[_0x4d3101(0x222)](temppath,{'withFileTypes':!![]})[_0x4d3101(0x1d3)](_0x3ae1a0=>{const _0x243296=_0x4d3101;if(!_0x3ae1a0[_0x243296(0x1a7)]())fs[_0x243296(0x1eb)](temppath+_0x3ae1a0['name']);}),logger[_0x4d3101(0x2c5)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x4d3101(0x293)]({'restore':!![]},_0x10e0f8=>{});}async function getPublicIp(){const _0x50f891=_0x503299;try{const _0x40fdc1=await axios[_0x50f891(0x1f7)]('https://api.ipify.org?format=json');publicip=_0x40fdc1[_0x50f891(0x1f4)]['ip'];}catch(_0x215c5e){}}async function triggerAnalytics(){const _0x3fa772=_0x503299;if(!publicip)await getPublicIp();const _0x5d9ed1=getBotsWithMode();let _0xa45073=0x0;_0x5d9ed1[_0x3fa772(0x1d3)](_0x3dabbc=>{const _0x285b22=_0x3fa772;if(_0x3dabbc[_0x285b22(0x303)]===_0x285b22(0x2bc))_0xa45073++;});const _0x3b5fa4=getBotExchanges();mixpanel[_0x3fa772(0x208)](_0x3fa772(0x220),{'distinct_id':settings[_0x3fa772(0x2cf)],'ip':publicip,'version':serverversion,'numbots':_0x5d9ed1[_0x3fa772(0x136)],'numbotsenabled':_0xa45073,'exchanges':_0x3b5fa4,'environment':environment});}function _0x2371(){const _0x1cf01e=['pidRefreshToken','telegramIpApproval','metrics','auto','Unauthorized\x20attempt\x20to\x20get\x20portfolio','reset-password','portfolio','\x1b[34m','startsWith','show','generateAsync','\x20>\x20','Unauthorized\x20attempt\x20to\x20delete\x20alerts','keys','jsonwebtoken',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','mtime','axios','output-002.log','port','randomBytes','disabled','/restart\x20-\x20restart\x20bot(s)\x0a','\x1b[31m','clientip','password','settings','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','zip/','3251910qmzskw','Bot\x20','No\x20bots\x20running\x20right\x20now','mode','Unauthorized\x20attempt\x20to\x20update\x20bot','Starting\x20(','invalid\x20credentials','build','4PPLhrr','|@|','temp/','Notifications\x20disabled','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','toggleBotMode','node','delete-bot','\x1b[36m','_nsps','isDirectory','-----------------------------------------------------------------------------------','readFileSync','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','telegramEnabled','build2','getUTCHours','exec','Login\x20rejected','update_yes','chat','/disable\x20-\x20disable\x20notifications\x0a','backupfile','timestamp','command','binary','uncaughtException','Notifications\x20enabled\x0a','access','updatebotmanager','4LCGwrY','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','bb-settings.json','unlinkSync','restore_yes_','padStart','Password\x20has\x20been\x20reset\x20to:\x20','\x1b[0m','Orders','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','any','yargs/yargs','alerts','status\x20code\x20401','slice','sha256','isIPv4MappedAddress','301638gSkMtP','/:bot/configuration','value','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','storeHeadless','apply','metrics_','forEach','/upload-backup','30\x20min','order','hashSync','place-order','Setting\x20access:\x20','Allow\x20login\x20from\x20IP\x20address\x20','messages','Idling\x20(','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20-\x20','(staging)','lastmsgemitted','Your\x20installation\x20is\x20already\x20up\x20to\x20date','start','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','botmanager','sendMetricsTelegram','\x20|\x20','=>\x20Go\x20to\x20#CYA#http://','getTime','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','rmSync','kind','temporary\x20access\x20not\x20allowed','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','username','latestversion','address','update_no','pki','data','/names\x20-\x20show\x20bot\x20names\x0a','all','get','placeOrder','name','action','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','callback','number','remoteAddress','Unauthorized\x20attempt\x20to\x20get\x20messages','2FA\x20required','defaults','telegraf','entries','log','success','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','track','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','expiry','update-bot','127.0.0.1','graphql-request','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','new-disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','disable','temporary\x20access\x20timeout','File\x20uploaded','error','All','getMonth','bcryptjs','stopped','Notifications\x20disabled\x0a','inherit','storeFiat','backup-full@','/update\x20-\x20update\x20Balance\x20Bot\x0a','Server','BCT','readdirSync','token','sendMessage','get-messages','-config.json','<b>Telegram\x20Bot\x20Status:</b>\x0a','update','Token\x20blacklisted','inlineKeyboard','reinstall-bb','RSA-OAEP','encryptedUuid','Logged\x20out\x20user\x20...','secret','telegrammsg','SIGTERM','botname','*$1*','Node.js\x20v','on_','version','type','use','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','internal','accept','resetHistory',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','bot-','apiSecret','allow','min','settings.','#RES#\x20','getPortfolio','temporary\x20token\x20generated','[ip-address]','ipc','confirm-message','Yes','935OfbhbP','hex','sendFile','server','restart_','CoinMarketCap\x20API\x20key\x20validated','show-config','portfolio_','remove','Invalid\x20authentication\x20token\x20(1)','publicKey','telegramEvents','Bot\x20Mgr\x20>\x20','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Notifications\x20types:\x20','Starting\x20Balance\x20Bot\x20update','privateKeyFromPem','Unauthorized\x20attempt\x20to\x20add\x20bot','size','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reason','manual','clients','parse','event','static','getMinutes','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','bbvNew','search','join','blacklist','restore_no_','get-backup-files','store','warning','resetpw_yes','request','reload','Unauthorized\x20attempt\x20to\x20delete\x20bot','Alerts','loadAsync','reinstall_yes','User\x20has\x20been\x20validated','Restore\x20backup\x20file\x20','store-fiat','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','toIPv4Address','launch','button','Password\x20reset\x20rejected','compareSync','Error:\x20Invalid\x20argument\x20','existsSync','/off\x20-\x20stop\x20bot(s)\x0a','#RES#\x20if\x20running\x20on\x20server','names','bb-config.json','sign','handshake','40ibgkbr','auth','SIGINT','/:bot/history','get-portfolio','http','mkdirSync','/:bot/portfolio','Restarting\x20Bot\x20','reinstall_no','send','whitelistEnabled','find','off','/start','bot','DEFLATE','***',')\x20|\x20Bot\x20','whitelist','exit','simple','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Session\x20expired\x20for\x20user\x20...','live','Notifications\x20enabled','writeFileSync','Disabled\x20Bot\x20','exchange','config_alerts','emit','telegramToken','full','sort','onepagemode','node-forge',',\x20must\x20be\x20a\x204\x20digit\x20number','bb-secure.json','.zip','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','telegram2FaApproval','kill','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','\x20only\x0a','2FA\x20login\x20rejected','reject','update-bb','getSeconds','uuid-random','close','address\x20already\x20in\x20use','enabled','index.html','statSync','apiKey','ipaddr.js','write','sendPortfolioTelegram','bbUsername','hasOwnProperty','debug','Failed\x20to\x20download\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','timeshift','child_process','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','marketcapApi','temporaryAccessAllowed','generateKeyPair','post','userid','create','loginRequired','get-starting-balances','notification','headless','replace','bbPassword','2FA','bb/','f2aRequired','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','decode64','async','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','socket.io','emitHistory','date-fns','Markdown','version.json','connected','staging','Telegraf\x20error:','5\x20min','0.0.0','environment','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','set','restore-backup-file','stringify','login\x20token\x20valid','argv','1157031CYKGnm','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','decrypt','logs/','store-configuration','/metrics\x20-\x20show\x20bot\x20performance\x0a','function','Network\x20Interfaces:','mixpanel','match','Unauthorized\x20attempt\x20to\x20confirm\x20message','::1','crypto','7990RyIfMF','constructor','off_','721794wqbCuu','assign','once','user','status','reply','login','48497GReJmc','telegram','getDate','/output-000.log','yes','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','login\x20required','privateKey','/status\x20-\x20show\x20bot(s)\x20status\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','login2fa_','reinstall','tempaccess_5_','\x20|\x20client:\x20...','add','logged\x20out','output-003.log','split','toString','util','output-001.log','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Deleted\x20Bot\x20','deleteHistoryAlerts','config_orders','Unauthorized\x20attempt\x20to\x20show\x20configuration','All\x20bots','sockets','-performance.json','::ffff:127.0.0.1','orders','Unauthorized\x20attempt\x20to\x20get\x20events','Backup\x20file\x20uploaded','tempaccess_reject_','restart','42MqTZdp','Starting\x20#RED#Balance\x20Bot\x20v','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','temporary\x20access\x20rejected','map','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','string','secure','publicKeyToPem','file','telegramUsername','storeConfiguration','\x20mode','HTML','params','2FA\x20login\x20required','bbvReceive','login\x20not\x20required','getHours','includes','#RES#','uuid','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','length','19381308WAAKyW','(((.+)+)+)+$','/:bot','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','running','Logged\x20in\x20user\x20...','add-bot','Error\x20while\x20deleting\x20config\x20files:\x20','cancel-loading','\x1b[33m','sortBy','backup','login\x20token\x20generated','max','Error\x20details:','************','connection','getFullYear','Enabled\x20Bot\x20','catch','new','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','lastmsgtelegram','test','botID','message','range','push','bots','copyFileSync','Invalid\x20authentication\x20token\x20(2)','2FA\x20login\x20token\x20generated','listen','from','started','help','format','editMessageReplyMarkup','telegramChatId','Invalid\x20username\x20or\x20IP\x20address','ETH','download','/on\x20-\x20start\x20bot(s)\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','delete-alerts','IPv4','/:bot/performance','headers','disconnect','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','\x20to\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20download\x20','tempaccess_15_','/download/:type','socket','config_all','stop','files','toIPv4MappedAddress','1000','pidExpireLogin','bot.js','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later'];_0x2371=function(){return _0x1cf01e;};return _0x2371();}async function getMessages(){const _0x4066da=_0x503299,_0x13a46a='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x2e0a12=new GraphQLClient(_0x13a46a),_0x36348e={'authorization':_0x4066da(0x209)},_0x323508=serverversion[_0x4066da(0x317)]('.'),_0x172817=_0x323508[0x0]+'.'+_0x323508[0x1],_0x1e1718=Math[_0x4066da(0x242)](settings[_0x4066da(0x14d)],settings['lastmsgemitted']),_0x5cb94a={'last':parseInt(_0x1e1718),'bbm':_0x172817},_0x4f9c44=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4aa0e9;try{_0x4aa0e9=await _0x2e0a12[_0x4066da(0x272)](_0x4f9c44,_0x5cb94a,_0x36348e);}catch(_0x5c4bcc){}if(_0x4aa0e9&&_0x4aa0e9[_0x4066da(0x1db)]){let _0x40ca9e=settings[_0x4066da(0x14d)];newMessages=[];for(const _0x2968d2 of _0x4aa0e9[_0x4066da(0x1db)]){newMessages[_0x4066da(0x152)](_0x2968d2);let _0xfe7b39=![];_0x2968d2[_0x4066da(0x269)]&&(updateSetting(_0x4066da(0x1f0),_0x2968d2[_0x4066da(0x269)]),_0xfe7b39=isNewerVersion(serverversion,_0x2968d2[_0x4066da(0x269)])||serverversion==_0x2968d2['bbvNew']);if(!_0xfe7b39&&_0x2968d2['number']>_0x40ca9e){if(_0x2968d2['bbvReceive']===_0x4066da(0x1c5)||serverversion[_0x4066da(0x180)](_0x2968d2[_0x4066da(0x339)])){let _0x3457c0=''+_0x2968d2['title']+'\x0a\x0a'+_0x2968d2[_0x4066da(0x150)];const _0x2953ba=await sendTelegramMsg(toTelegramMarkdown(_0x3457c0),_0x4066da(0x2e1));if(_0x2953ba)_0x40ca9e=_0x2968d2[_0x4066da(0x1fe)];}}}updateAvailable=isNewerVersion(settings[_0x4066da(0x1f0)],serverversion),updateSetting(_0x4066da(0x14d),_0x40ca9e),emitMessages();}}function emitMessages(){const _0x586d9c=_0x503299,_0x296c5f=settings[_0x586d9c(0x1e0)];let _0x6ce793=[];newMessages['forEach'](_0x3e92fb=>{const _0x502073=_0x586d9c;_0x3e92fb[_0x502073(0x1fe)]>_0x296c5f&&_0x6ce793[_0x502073(0x152)](_0x3e92fb);}),_0x6ce793['length']>0x0&&getAllClients()['forEach'](_0x363340=>{const _0x5b38b7=_0x586d9c;getSocket(_0x363340['id'])[_0x5b38b7(0x2a7)](_0x5b38b7(0x150),_0x6ce793);});}function confirmMessage(_0x22c646){const _0x2698c4=_0x503299;updateSetting(_0x2698c4(0x1e0),Number(_0x22c646));}function isNewerVersion(_0x80ef1d,_0x3789fa){const _0x48d5c3=_0x503299,_0x162075=_0x3789fa[_0x48d5c3(0x317)]('.'),_0x3d3b2d=_0x80ef1d[_0x48d5c3(0x317)]('.');for(var _0xf235da=0x0;_0xf235da<_0x3d3b2d[_0x48d5c3(0x136)];_0xf235da++){const _0x2ea573=~~_0x3d3b2d[_0xf235da],_0x4d1d00=~~_0x162075[_0xf235da];if(_0x2ea573>_0x4d1d00)return!![];if(_0x2ea573<_0x4d1d00)return![];}return![];}function toTelegramMarkdown(_0x3ed2a7){const _0x1af067=_0x503299,_0x487e96=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x59b4fe=/\*{2}(.+?)\*{2}/gim;return _0x3ed2a7=_0x3ed2a7[_0x1af067(0x2d5)](_0x487e96,'$1_$2_$3')[_0x1af067(0x2d5)](_0x59b4fe,_0x1af067(0x233)),_0x3ed2a7;}async function validateConfigFile(){const _0x2a9f1e=_0x503299,_0x5878b1=dbConfig[_0x2a9f1e(0x1f7)](_0x2a9f1e(0x153))['sortBy'](_0x2a9f1e(0x14f))[_0x2a9f1e(0x1ce)]()||[];if(_0x5878b1[_0x2a9f1e(0x136)]==0x0){let _0xaca0d3=0x0,_0x3ae7fc=[];const _0x42d983=/^bot-([0-9]{3})-config.json$/,_0x3b8f3c=fs[_0x2a9f1e(0x222)](configpath);_0x3b8f3c[_0x2a9f1e(0x1d3)](_0x1a908d=>{const _0x3b5eb2=_0x2a9f1e,_0x14b297=_0x42d983[_0x3b5eb2(0x1ae)](_0x1a908d);if(_0x14b297){const _0x54a29b=_0x14b297[0x1];let _0x322d58=getBotAttributes(_0x54a29b);_0x3ae7fc[_0x3b5eb2(0x152)]({'botID':_0x54a29b,'botname':_0x322d58['botname'],'status':_0x3b5eb2(0x18d),'live':_0x3b5eb2(0x21a)}),_0xaca0d3++;}}),_0xaca0d3!=0x0&&(dbConfig[_0x2a9f1e(0x1f7)](_0x2a9f1e(0x153))['assign'](_0x3ae7fc)[_0x2a9f1e(0x2c1)](),config=_0x3ae7fc,restoredConfigFile=_0xaca0d3);}}async function restoreConfigNotify(_0x1a57b7){const _0x192432=_0x503299;let _0x30c023;if(restoredConfigFile==0x1)_0x30c023=_0x192432(0x2e9);else _0x30c023='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x1a57b7)io['to']('botmanager')[_0x192432(0x2a7)](_0x192432(0x2d3),_0x30c023);else{logger[_0x192432(0x29e)](_0x192432(0x1a8)),logger[_0x192432(0x29e)](_0x30c023),logger['simple'](_0x192432(0x1a8)),logger[_0x192432(0x29e)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x192432(0x256)]!='orders')await sendTelegram(settings['telegramChatId'],_0x192432(0x257)+_0x30c023);}}function decryptRSA(_0x414e59,_0x4bfbfa){const _0x3410df=_0x503299,_0x55348e=forge[_0x3410df(0x1f3)][_0x3410df(0x25b)](_0x414e59),_0x12d8a5=_0x55348e[_0x3410df(0x2f1)](forge['util'][_0x3410df(0x2db)](_0x4bfbfa),_0x3410df(0x22c),{'md':forge['md'][_0x3410df(0x1ca)][_0x3410df(0x2d0)](),'mgf1':{'md':forge['md']['sha256']['create']()}});return _0x12d8a5;}function validateCredentials(_0x409994,_0x25e2a0){const _0x2aeb66=_0x503299;if(_0x409994[_0x2aeb66(0x1ef)]==settings[_0x2aeb66(0x2c3)]&&bcrypt[_0x2aeb66(0x280)](_0x409994[_0x2aeb66(0x191)],settings[_0x2aeb66(0x2d6)])){if(settings[_0x2aeb66(0x2d9)])return{'allow':![],'reason':_0x2aeb66(0x338),'token':null};else{const _0x33a414=generateLoginToken(_0x25e2a0);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x33a414};}}else return{'allow':![],'reason':_0x2aeb66(0x19b),'token':null};}function refreshToken(_0x1b9857){const _0x135aa1=_0x503299,_0x134e48=generateLoginToken(_0x1b9857);return{'allow':!![],'reason':_0x135aa1(0x143),'token':_0x134e48};}function validateAccess(_0x448670,_0x538afc,_0x4cfce8){const _0x11fb4d=_0x503299,_0x24eab0=_0x4cfce8?_0x4cfce8:devices[_0x538afc]['ip'];let _0x654970;const _0x1a8738=_0x4ba9a0=>{const _0x3eb6dc=_0x5387;if(settings[_0x3eb6dc(0x2d1)]){if(settings[_0x3eb6dc(0x2d9)]){if(telegram2FaApproved(_0x538afc)){const _0x4d12db=generateLoginToken(_0x538afc);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x4d12db};}else return{'allow':![],'reason':_0x3eb6dc(0x30c),'token':null};}else return _0x654970=validToken(_0x4ba9a0,_0x538afc),_0x654970['hasOwnProperty']('success')?{'allow':!![],'reason':_0x3eb6dc(0x2ed),'token':_0x4ba9a0}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x3eb6dc(0x33a),'token':null};};if(settings[_0x11fb4d(0x294)]){let _0x5bbbad=[...settings[_0x11fb4d(0x29c)],_0x11fb4d(0x2fa),_0x11fb4d(0x323),_0x11fb4d(0x20d)];if(_0x5bbbad['includes'](_0x24eab0))return _0x1a8738(_0x448670);else{_0x654970=validToken(_0x448670,_0x538afc);if(_0x654970[_0x11fb4d(0x2c4)](_0x11fb4d(0x206)))return _0x1a8738(_0x448670);else{if(telegramIpApproved(_0x538afc)){const _0x5daa7f=generateToken(_0x538afc);return _0x654970=_0x1a8738(_0x448670),_0x654970[_0x11fb4d(0x241)]?{'allow':!![],'reason':_0x11fb4d(0x246),'token':_0x5daa7f}:_0x654970;}else return settings[_0x11fb4d(0x2cc)]?{'allow':![],'reason':_0x11fb4d(0x201),'token':null}:{'allow':![],'reason':_0x11fb4d(0x1ed),'token':null};}}}else return _0x1a8738(_0x448670);}function timelyDecrypt(_0xa2736f,_0x4505a3,_0x41b98c='@'){const _0x1936bf=_0x503299;if(_0xa2736f)try{const _0x13203b=decryptRSA(secure[_0x1936bf(0x30d)],_0xa2736f),_0x5afa3b=_0x13203b[_0x1936bf(0x317)](_0x41b98c)[0x0],_0x3da8a4=_0x13203b['split'](_0x41b98c)[0x1],_0xfbdc87=new Date()[_0x1936bf(0x1e8)]();if(_0x4505a3){if(_0xfbdc87-_0x3da8a4<maxSecretAge*0x3e8)return _0x5afa3b;else return![];}else return _0x5afa3b;}catch(_0x5da8dc){return![];}else return![];}const validToken=(_0x481198,_0x4b6a82)=>{const _0x7fc284=_0x503299,_0x59b3a9=devices[_0x4b6a82]['ip'];if(!_0x481198)return{'error':'No\x20authentication\x20token'};for(let _0x1d7617 of blacklist){if(_0x1d7617[_0x7fc284(0x223)]==_0x481198)return{'error':_0x7fc284(0x229)};}let _0x5b03cf;try{_0x5b03cf=jwt['verify'](_0x481198,secure['secret']+_0x4b6a82);}catch{return{'error':_0x7fc284(0x254)};}if(!_0x5b03cf[_0x7fc284(0x2c4)](_0x7fc284(0x190))&&!_0x5b03cf[_0x7fc284(0x2c4)]('username')||!_0x5b03cf[_0x7fc284(0x2c4)]('exp'))return{'error':_0x7fc284(0x155)};if(!_0x5b03cf[_0x7fc284(0x2c4)](_0x7fc284(0x1ef))&&_0x5b03cf['hasOwnProperty'](_0x7fc284(0x190))){const {clientip:_0x316c24}=_0x5b03cf;return _0x59b3a9==_0x316c24?{'success':_0x7fc284(0x278)}:{'error':_0x7fc284(0x1e9)};}else{if(_0x5b03cf[_0x7fc284(0x2c4)](_0x7fc284(0x1ef))&&_0x5b03cf[_0x7fc284(0x2c4)](_0x7fc284(0x190))){const {username:_0x23223d,clientip:_0x4f6f69}=_0x5b03cf;return settings[_0x7fc284(0x2c3)]==_0x23223d&&_0x59b3a9==_0x4f6f69?{'success':_0x7fc284(0x278)}:{'error':_0x7fc284(0x15e)};}}},generateLoginToken=_0x6aa060=>{const _0x385d3f=_0x503299;if(_0x6aa060){const _0x1e78b0=devices[_0x6aa060]['ip'];return jwt[_0x385d3f(0x287)]({'username':settings['bbUsername'],'clientip':_0x1e78b0},secure['secret']+_0x6aa060,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x4f699a=>{const _0x12aec0=_0x503299;if(_0x4f699a){const _0x12e87f=devices[_0x4f699a]['ip'];return jwt[_0x12aec0(0x287)]({'clientip':_0x12e87f},secure[_0x12aec0(0x22f)]+_0x4f699a,{'expiresIn':devices[_0x4f699a]['telegramIpApproval'][_0x12aec0(0x20b)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xe5cd02=>{const _0x38098a=_0x503299;let _0x1901ed=![];return devices[_0xe5cd02]['telegramIpApproval']&&devices[_0xe5cd02][_0x38098a(0x179)]['expiry']!='reject'&&(_0x1901ed=devices[_0xe5cd02][_0x38098a(0x179)][_0x38098a(0x190)]==devices[_0xe5cd02]['ip']&&new Date()[_0x38098a(0x1e8)]()-devices[_0xe5cd02][_0x38098a(0x179)][_0x38098a(0x1b4)]<devices[_0xe5cd02][_0x38098a(0x179)]['expiry']*0x3c*0x3e8),_0x1901ed;},telegram2FaApproved=_0x81f747=>{const _0x1299c0=_0x503299;let _0x174dd1=![];return devices[_0x81f747][_0x1299c0(0x2b1)]&&devices[_0x81f747]['telegram2FaApproval'][_0x1299c0(0x20b)]!=_0x1299c0(0x2b6)&&(_0x174dd1=devices[_0x81f747][_0x1299c0(0x2b1)][_0x1299c0(0x190)]==devices[_0x81f747]['ip']&&new Date()[_0x1299c0(0x1e8)]()-devices[_0x81f747][_0x1299c0(0x2b1)][_0x1299c0(0x1b4)]<devices[_0x81f747][_0x1299c0(0x2b1)][_0x1299c0(0x20b)]*0x3c*0x3e8),_0x174dd1;},normalizeIP=_0x5d8362=>{const _0x1d0930=_0x503299;let _0x55462d=null,_0x411876=null;if(ipaddr['isValid'](_0x5d8362)){const _0x5d95da=ipaddr['parse'](_0x5d8362);_0x5d95da[_0x1d0930(0x1ec)]()==='ipv6'?(_0x5d95da[_0x1d0930(0x1cb)]()&&(_0x55462d=_0x5d95da[_0x1d0930(0x27c)]()[_0x1d0930(0x318)]()),_0x411876=_0x5d95da[_0x1d0930(0x318)]()):(_0x55462d=_0x5d95da[_0x1d0930(0x318)](),_0x411876=_0x5d95da[_0x1d0930(0x173)]()[_0x1d0930(0x318)]());}return{'show':_0x55462d?_0x55462d:_0x411876,'store':_0x411876};};function formatDate(_0x1ab587){const _0x4675d4=_0x503299;return _0x1ab587[_0x4675d4(0x148)]()+'/'+(_0x1ab587[_0x4675d4(0x218)]()+0x1)[_0x4675d4(0x318)]()[_0x4675d4(0x1c0)](0x2,'0')+'/'+_0x1ab587['getDate']()['toString']()[_0x4675d4(0x1c0)](0x2,'0')+'\x20'+_0x1ab587[_0x4675d4(0x33b)]()[_0x4675d4(0x318)]()['padStart'](0x2,'0')+':'+_0x1ab587[_0x4675d4(0x266)]()[_0x4675d4(0x318)]()[_0x4675d4(0x1c0)](0x2,'0')+':'+_0x1ab587[_0x4675d4(0x2b8)]()[_0x4675d4(0x318)]()['padStart'](0x2,'0');}function sleep(_0x3dcc3b){return new Promise(_0x45594a=>setTimeout(_0x45594a,_0x3dcc3b));}