(this["webpackJsonpbb-manager"]=this["webpackJsonpbb-manager"]||[]).push([[0],{155:function(e,t){},228:function(e){e.exports=JSON.parse('{"v":"Mi42LjIx"}')},288:function(e,t,n){},289:function(e,t,n){},339:function(e,t){},374:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),i=n.n(r),o=(n(288),n(289),n(8)),s=n(108),l=n.n(s),d=n(160),j=n(27),b=n(25),u=n(426),h=n(7),O=n(463),x=n(447),m=n(433),p=n(459),f=n(446),g=n(431),v=n(453),w=n(437),y=n(440),k=n(439),C=n(445),S=n(438),B=n(448),T=n(73),I=n(450),P=n(386),F=n(452),D=n(451),A=n(381),N=n(455),E=n(454),R=n(91),W=n.n(R),z=n(457),L=n(436),q=n(466),M=n(248),U=n.n(M),Y=n(246),H=n.n(Y),K=n(245),_=n.n(K),G=n(382),J=n(378),X=n(464),V=n(384),$=n(442),Q=n(461),Z=n(456),ee=n(441),te=n(432),ne=n(162),ae=n.n(ne),ce=n(161),re=n.n(ce),ie=n(1),oe=Object(u.a)((function(e){return{cardHeader:{backgroundColor:"#000"},content:{padding:e.spacing(2)}}})),se=Object(h.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:12}}}))(q.a);function le(e){var t=oe(),n=e.bot,c=e.mode,r=Object(a.useState)("auto"===n.mode),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(n.status),j=Object(o.a)(d,2),b=j[0],u=j[1],h=Object(a.useState)(""),O=Object(o.a)(h,2),x=O[0],f=O[1],v=Object(a.useState)(n.status),w=Object(o.a)(v,2),y=w[0],k=w[1];Object(a.useEffect)((function(){var e;return u(n.status),f(n.live),l("auto"===n.mode),e="new"===n.status?"new":"new-disabled"===n.status||"disabled"===n.status?"disabled":""===n.live?"enabled":"stopped"===n.live?Object(ie.jsxs)("span",{children:[Object(ie.jsxs)("span",{children:[n.status," / "]}),Object(ie.jsx)("span",{style:{color:"#f00"},children:"stopped"})]}):"enabled / running",k(e),function(){}}),[n]);var C=function(){var t=!s;l(t),e.callback(n.botID,"headless",t)},S=function(){var t;"enabled"===b?t="disabled":"new"===b?t="new-disabled":"new-disabled"===b?t="new":"disabled"===b&&(t="enabled"),u(t),f(""),e.callback(n.botID,"status",t)};return Object(ie.jsx)(g.a,{item:!0,xs:12,sm:6,md:4,children:Object(ie.jsxs)(te.a,{children:[Object(ie.jsxs)(g.a,{container:!0,direction:"row",children:[Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(p.a,{className:t.cardHeader,children:Object(ie.jsx)(T.a,{gutterBottom:!0,variant:"button",component:"h2",children:Object(ie.jsx)(p.a,{color:"#FFF",ml:2,mr:2,children:n.botname})})})}),Object(ie.jsx)(g.a,{item:!0,xs:12,className:t.content,children:Object(ie.jsxs)(T.a,{variant:"button",children:[Object(ie.jsxs)("div",{children:["Bot ID: ",Object(ie.jsx)("b",{children:n.botID})]}),Object(ie.jsx)("div",{children:Object(ie.jsxs)("span",{children:["Status: ",Object(ie.jsx)("b",{children:y})]})})]})})]}),Object(ie.jsxs)(g.a,{container:!0,direction:"row",className:t.content,children:[Object(ie.jsx)(g.a,{item:!0,xs:4,children:Object(ie.jsx)(m.a,{variant:"contained",onClick:function(){e.callback(n.botID,"dashboard")},disabled:"disabled"===b||"running"!==x,children:"Dashboard"})}),Object(ie.jsx)(g.a,{item:!0,xs:2}),"new"===b||"new-disabled"===b?Object(ie.jsx)(g.a,{item:!0,xs:2}):Object(ie.jsx)(g.a,{item:!0,xs:2,children:s?Object(ie.jsx)(se,{title:"Switch to manual mode",children:Object(ie.jsx)(m.a,{size:"small",color:"primary",onClick:C,children:Object(ie.jsx)(re.a,{color:"light"===c?"primary":"secondary"})})}):Object(ie.jsx)(se,{title:"Switch to automatic mode",children:Object(ie.jsx)(m.a,{size:"small",color:"primary",onClick:C,children:Object(ie.jsx)(re.a,{color:"disabled"})})})}),Object(ie.jsx)(g.a,{item:!0,xs:2,children:"disabled"===b||"new-disabled"===b?Object(ie.jsx)(se,{title:"Start bot",children:Object(ie.jsx)(m.a,{size:"small",color:"primary",onClick:S,children:Object(ie.jsx)(ae.a,{color:"disabled"})})}):Object(ie.jsx)(se,{title:"Stop bot",children:Object(ie.jsx)(m.a,{size:"small",color:"primary",onClick:S,children:Object(ie.jsx)(ae.a,{color:"light"===c?"primary":"secondary"})})})}),Object(ie.jsx)(g.a,{item:!0,xs:2,children:Object(ie.jsx)(se,{title:"Delete bot",children:Object(ie.jsx)(m.a,{size:"small",color:"light"===c?"primary":"secondary",onClick:function(){e.callback(n.botID,"delete")},children:Object(ie.jsx)(W.a,{})})})})]})]})})}var de,je=n(377),be=n(444),ue=n(460),he=n(467),Oe=n(98),xe=n.n(Oe),me=Object(h.a)((function(e){return{tooltip:{backgroundColor:"light"===e.palette.type?"#FFFFFF":"#000000",color:"light"===e.palette.type?"#000000":"#FFFFFF",maxWidth:800,fontSize:e.typography.pxToRem(14),border:"1px solid #888888"}}}))(q.a),pe=n(443),fe=n(250),ge=function(e,t){var n=c.a.useState(localStorage.getItem(e)||t),a=Object(o.a)(n,2),r=a[0],i=a[1];return c.a.useEffect((function(){localStorage.setItem(e,r)}),[r]),[r,i]},ve=n(227),we=n.n(ve),ye=n(92),ke=localStorage.getItem("uuid"),Ce=localStorage.getItem("publicKey"),Se=new ye.Crypt({md:"sha256",rsaStandard:"RSA-OAEP"}),Be=function(e){return!!(ke&&Ce&&Ce.includes("-----BEGIN PUBLIC KEY-----"))&&Se.encrypt(Ce,"".concat(ke,"@").concat(e.getTime()))},Te=we()("/",{auth:{encryptedUuid:Be(new Date)}}),Ie=Object(a.createContext)(),Pe=function(e){var t=Object(a.useState)({status:"disconnected",updated:"---",serverversion:"0.0",servertime:"---",access:{allow:!1,reason:"initial state",token:null},externalip:"",publicKey:"",userid:null}),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(ie.jsx)(Ie.Provider,{value:[c,r],children:e.children})},Fe=Object(a.createContext)(),De=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(ie.jsx)(Fe.Provider,{value:[c,r],children:e.children})},Ae=Object(a.createContext)(),Ne=function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(ie.jsx)(Ae.Provider,{value:[c,r],children:e.children})},Ee=Object(a.createContext)(),Re=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(ie.jsx)(Ee.Provider,{value:[c,r],children:e.children})},We=n(376),ze=n(168),Le=n.n(ze),qe=n(247),Me=n.n(qe),Ue=n(449),Ye=n(252),He=n(241),Ke=n(465),_e=n(249),Ge=n(435),Je=n(95),Xe=n(163),Ve=n.n(Xe),$e=n(164),Qe=n.n($e),Ze=n(228),et=n(93),tt=n(165),nt=n.n(tt),at=n(458),ct=n(140),rt=n.n(ct),it=n(169),ot=n(232),st=n.n(ot),lt=n(251),dt=64,jt=Object(u.a)((function(e){return{outlinedButton:{width:80,height:40,border:"1px solid rgba(128, 128, 128, 0.5)",padding:"6px 8px",margin:"4px 4px",borderRadius:"4px",color:"currentColor",textTransform:"none","&:hover":{border:"1px solid currentColor",backgroundColor:"rgba(0, 0, 0, 0.08)"}},filledButton:{width:80,height:40,border:"1px solid currentColor",padding:"6px 8px",margin:"4px 4px",borderRadius:"4px",color:"currentColor",backgroundColor:"rgba(5, 5, 5, 0.08)",textTransform:"none","&:hover":{border:"1px solid currentColor",backgroundColor:"rgba(5, 5, 5, 0.08)"}},invisibleFiller:{width:80,height:40,border:"none",padding:"6px 8px",margin:"4px 4px",color:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)"},botselectordrawer:{width:"100%",flexShrink:0},botselectordrawerPaper:{width:"100%",height:dt}}}));function bt(){return Object(ie.jsx)(p.a,{color:"#FFF",height:54,p:2,children:Object(ie.jsxs)(T.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(ie.jsx)(ee.a,{style:{color:"#ffffff",textDecoration:"none"},href:"https://hodlerhacks.com/",target:"_blank",rel:"noopener",children:"hodlerhacks.com"})," ",(new Date).getFullYear()]})})}function ut(e){var t=jt(),n=e.bots,a=e.show,r=e.windowWidth,i=e.switchBot,o=[{botID:"Bot Mng",botname:"Bot Manager",handle:""}];n.forEach((function(e){"enabled"!==e.status&&"new"!==e.status||o.push({botID:"Bot ".concat(e.botID),botname:e.botname,handle:"bot".concat(e.botID)})})),n=o;var s=r-16,l=Math.floor(s/88);l>n.length&&(l=n.length);var d=Math.ceil(n.length/l);dt=16+48*d,de=88*l;var j=d>1&&d!==n.length?l-n.length%l:0;j<0&&(j=0);var u=[];u.push.apply(u,Object(b.a)(n));for(var h=0;h<j;h++)u.push({handle:"filler"});return Object(ie.jsx)(O.a,{className:t.botselectordrawer,anchor:"top",open:a,onOpen:function(){},onClose:function(){},classes:{paper:t.botselectordrawerPaper},children:Object(ie.jsx)("div",{style:{width:s,display:"flex",justifyContent:"center"},children:Object(ie.jsx)("div",{style:{margin:8,width:de,display:"flex",justifyContent:"center",flexWrap:"wrap"},children:u.map((function(e,n){return n%l===0?Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:u.slice(n,n+l).map((function(e){return""===e.handle?Object(ie.jsx)(Ot,{title:e.botname,children:Object(ie.jsx)(m.a,{className:t.filledButton,onClick:function(){},children:e.botID})},e.botID):"filler"!==e.handle?Object(ie.jsx)(Ot,{title:e.botname,children:Object(ie.jsx)(m.a,{className:t.outlinedButton,onClick:function(){return i(e)},children:e.botID})},e.botID):Object(ie.jsx)("div",{className:t.invisibleFiller})}))})},n):null}))})})})}var ht=Object(h.a)({checked:{},track:{backgroundColor:"#999"}})($.a),Ot=Object(h.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:12}}}))(q.a);function xt(){var e=ge("mode","light"),t=Object(o.a)(e,2),n=t[0],r=t[1],i=ge("badge","false"),s=Object(o.a)(i,2),b=s[0],R=s[1],z=Object(a.useContext)(Ie),q=Object(o.a)(z,2),M=q[0],U=M.status,Y=M.serverversion,H=M.environment,K=M.servertime,$=M.access,te=M.externalip,ne=M.publicKey,ae=M.userid,ce=M.validInstallation,re=q[1],oe=Object(a.useContext)(Fe),se=Object(o.a)(oe,2),de=se[0],he=se[1],Oe=Object(a.useContext)(Ae),ve=Object(o.a)(Oe,2),we=ve[0],ke=ve[1],Ce=Object(a.useContext)(Ee),Se=Object(o.a)(Ce,2),Pe=Se[0],De=Se[1],Ne=Object(Je.b)(),Re=Ne.enqueueSnackbar,ze=Ne.closeSnackbar,Le=et.version,qe=Object(a.useState)(!1),Me=Object(o.a)(qe,2),Xe=Me[0],$e=Me[1],tt=Object(a.useState)(!1),ct=Object(o.a)(tt,2),ot=ct[0],jt=ct[1],xt=Object(a.useState)(!1),pt=Object(o.a)(xt,2),ft=pt[0],gt=pt[1],vt=Object(a.useState)(!1),wt=Object(o.a)(vt,2),yt=wt[0],kt=wt[1],Ct=Object(a.useState)(!1),St=Object(o.a)(Ct,2),Bt=St[0],Tt=St[1],It=Object(a.useState)(!0),Pt=Object(o.a)(It,2),Ft=Pt[0],Dt=Pt[1],At=Object(a.useState)(!1),Nt=Object(o.a)(At,2),Et=Nt[0],Rt=Nt[1],Wt=Object(a.useState)(!1),zt=Object(o.a)(Wt,2),Lt=zt[0],qt=zt[1],Mt=Object(a.useState)(!1),Ut=Object(o.a)(Mt,2),Yt=Ut[0],Ht=Ut[1],Kt=Object(a.useState)(!1),_t=Object(o.a)(Kt,2),Gt=_t[0],Jt=_t[1],Xt=Object(a.useState)(!1),Vt=Object(o.a)(Xt,2),$t=Vt[0],Qt=Vt[1],Zt=Object(a.useState)({}),en=Object(o.a)(Zt,2),tn=en[0],nn=en[1],an=Object(a.useState)(""),cn=Object(o.a)(an,2),rn=cn[0],on=cn[1],sn=Object(a.useState)(!1),ln=Object(o.a)(sn,2),dn=ln[0],jn=ln[1],bn=Object(a.useState)(!1),un=Object(o.a)(bn,2),hn=un[0],On=un[1],xn=Object(a.useState)(),mn=Object(o.a)(xn,2),pn=mn[0],fn=mn[1],gn=Object(a.useState)(),vn=Object(o.a)(gn,2),wn=vn[0],yn=vn[1],kn=Object(a.useState)(we.timeshift||"0"),Cn=Object(o.a)(kn,2),Sn=Cn[0],Bn=Cn[1],Tn=Object(a.useState)(we.telegramToken||""),In=Object(o.a)(Tn,2),Pn=In[0],Fn=In[1],Dn=Object(a.useState)(we.telegramUsername||""),An=Object(o.a)(Dn,2),Nn=An[0],En=An[1],Rn=Object(a.useState)(we.marketcapApi||""),Wn=Object(o.a)(Rn,2),zn=Wn[0],Ln=Wn[1],qn=Object(a.useState)(we.onepagemode||!1),Mn=Object(o.a)(qn,2),Un=Mn[0],Yn=Mn[1],Hn=Object(a.useState)(we.loginRequired||!1),Kn=Object(o.a)(Hn,2),_n=Kn[0],Gn=Kn[1],Jn=Object(a.useState)(we.bbUsername||""),Xn=Object(o.a)(Jn,2),Vn=Xn[0],$n=Xn[1],Qn=Object(a.useState)(we.bbPassword||""),Zn=Object(o.a)(Qn,2),ea=Zn[0],ta=Zn[1],na=Object(a.useState)(we.f2aRequired||!1),aa=Object(o.a)(na,2),ca=aa[0],ra=aa[1],ia=Object(a.useState)(we.whitelistEnabled||!1),oa=Object(o.a)(ia,2),sa=oa[0],la=oa[1],da=Object(a.useState)(we.whitelist||[]),ja=Object(o.a)(da,2),ba=ja[0],ua=ja[1],ha=Object(a.useState)(we.temporaryAccessAllowed||!1),Oa=Object(o.a)(ha,2),xa=Oa[0],ma=Oa[1],pa=Object(a.useState)(we.telegramChatId||null),fa=Object(o.a)(pa,2),ga=fa[0],va=fa[1],wa=Object(a.useState)(""),ya=Object(o.a)(wa,2),ka=ya[0],Ca=ya[1],Sa=Object(a.useState)(0),Ba=Object(o.a)(Sa,2),Ta=Ba[0],Ia=Ba[1],Pa=Object(a.useState)(0),Fa=Object(o.a)(Pa,2),Da=Fa[0],Aa=Fa[1],Na=Object(a.useState)(!1),Ea=Object(o.a)(Na,2),Ra=Ea[0],Wa=Ea[1],za=ge("last-msg",0),La=Object(o.a)(za,2),qa=La[0],Ma=La[1],Ua=Object(a.useState)({number:0,title:"",message:"",lock:!1}),Ya=Object(o.a)(Ua,2),Ha=Ya[0],Ka=Ya[1],_a=Object(a.useState)({title:"",message:""}),Ga=Object(o.a)(_a,2),Ja=Ga[0],Xa=Ga[1],Va=Object(a.useState)(!1),$a=Object(o.a)(Va,2),Qa=$a[0],Za=$a[1],ec=Object(a.useState)(!1),tc=Object(o.a)(ec,2),nc=tc[0],ac=tc[1],cc=Object(a.useState)(!1),rc=Object(o.a)(cc,2),ic=rc[0],oc=rc[1],sc=Object(a.useState)("sm"),lc=Object(o.a)(sc,2),dc=lc[0],jc=lc[1],bc=Object(a.useState)("#fff"),uc=Object(o.a)(bc,2),hc=uc[0],Oc=uc[1],xc=Object(a.useState)(!1),mc=Object(o.a)(xc,2),pc=mc[0],fc=mc[1],gc=Object(a.useState)("update"),vc=Object(o.a)(gc,2),wc=vc[0],yc=vc[1],kc=Object(a.useState)([]),Cc=Object(o.a)(kc,2),Sc=Cc[0],Bc=Cc[1],Tc=Object(a.useState)(),Ic=Object(o.a)(Tc,2),Pc=Ic[0],Fc=Ic[1],Dc=ge("latest-version",Le)||"0.0.0",Ac=Object(o.a)(Dc,2),Nc=Ac[0],Ec=Ac[1],Rc=Object(a.useState)(!1),Wc=Object(o.a)(Rc,2),zc=Wc[0],Lc=Wc[1],qc=nt.a.enc.Base64.parse(Ze.v).toString(nt.a.enc.Utf8),Mc=Object(a.useRef)(!1),Uc=Object(a.useRef)(qa),Yc=Object(a.useRef)(!1),Hc=new ye.Crypt({md:"sha256",rsaStandard:"RSA-OAEP"});Object(a.useEffect)((function(){return document.title="BB | Bot Manager",window.addEventListener("storage",(function(){var e=localStorage.getItem("mode");r(e);var t=localStorage.getItem("latest-version");Ec(t);var n=localStorage.getItem("last-msg");if(n!==Uc.current){Uc.current=n;var a=[];de.forEach((function(e){e.number>n&&a.push(e)})),he(a)}})),function(){}}),[]),Object(a.useEffect)((function(){if(Bn(we.timeshift||"0"),Fn(we.telegramToken||""),En(we.telegramUsername||""),Ln(we.marketcapApi||""),Yn(we.onepagemode||!1),la(we.whitelistEnabled||!1),Gn(we.loginRequired||!1),$n(we.bbUsername||""),ta(we.bbPassword||""),ra(we.f2aRequired||!1),ua(we.whitelist||[]),ma(we.temporaryAccessAllowed||!1),va(we.telegramChatId),!we.loginRequired&&!we.temporaryAccessAllowed||""!==we.telegramToken&&""!==we.telegramUsername&&we.telegramChatId?R("false"):R("telegram"),fc(we.telegramToken&&we.telegramUsername&&we.telegramChatId),we.restored&&!Yc.current){Yc.current=!0;var e="Please take the following actions:\n\n",t=0;we.restored.telegram&&(t+=2,e+="- Re-enter your Telegram token and type /start in your Telegram bot\n"),we.restored.password&&(t+=1,e+="- Re-enable login and re-enter your password\n"),Xa({title:"Your installation has been restored from a backup",message:e}),ac(!0),R(t)}return function(){}}),[we]);var Kc=Math.min(480,function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useLayoutEffect)((function(){function e(){c(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}()),_c=Kc-50,Gc=Object(u.a)((function(e){return{root:{display:"flex"},logo:{maxWidth:60,padding:10},heroContent:{backgroundColor:"light"===n?"#fff":"#000",padding:e.spacing(4,0,2)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)},card:{height:"100%",display:"flex",flexDirection:"column"},cardHeader:{backgroundColor:"#000"},cardContent:{flexGrow:1},form:{width:"100%",marginTop:e.spacing(1)},footer:{marginTop:"auto",backgroundColor:"#000000"},bottomPush:{position:"fixed",width:"100%",bottom:0,paddingBottom:0},backdrop:{zIndex:e.zIndex.drawer+2,color:"#fff"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:Kc,flexShrink:0},drawerPaper:{width:Kc},drawerContainer:{overflow:"auto"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1),width:"80px"},button2:{marginTop:e.spacing(3),marginLeft:e.spacing(1),width:"100px"},textinput:{width:_c}}}))(),Jc=Object(fe.a)({palette:{type:n}}),Xc=Object(h.a)({root:{"&:hover":{backgroundColor:"transparent"},"&:click":{backgroundColor:"#f00"}}})(m.a);Object(a.useEffect)((function(){return Qt(Y&&"0.0"!==Y&&Y!==Le),function(){}}),[Y]);var Vc=function(e){return Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsx)(m.a,{style:{color:"#bbbbbb"},onClick:function(){ze(e)},children:"Dismiss"})})};Object(a.useEffect)((function(){var e=window.location.origin.includes("localhost");return ae&&(rt.a.init("6b67f3d61ee94b8f5c80b4affef4c4d9",{host:"api-eu.mixpanel.com"}),rt.a.identify(ae),rt.a.track("Bot Manager",{localhost:e})),function(){}}),[ae]),Object(a.useEffect)((function(){return null!==Pe&&Dt(!1),function(){}}),[Pe]),Object(a.useEffect)((function(){return Te.on("notification",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";Re(e,{variant:t,autoHideDuration:8e3,action:Vc})})),function(){Te.off("notification")}}),[]),Object(a.useEffect)((function(){return Te.on("backup-files",(function(e){Bc(e),e.length>0&&Fc(e[0].name)})),function(){Te.off("backup-files")}}),[]);Object(a.useEffect)((function(){var e=100,t=100,n=function(e,t){for(var n=t.split("."),a=e.split("."),c=0;c<a.length;c++){var r=~~a[c],i=~~n[c];if(r>i)return!0;if(r<i)return!1}return!1}(Nc,Le);return Wa(n),e+=n?140:40,$&&$.token&&(e+=50,t+=50),Ia(e),Aa(t),function(){}}),[Nc,Le,$]);var $c=function(){Mc.current=!0,function(){fr.apply(this,arguments)}()},Qc=function(){Rt(!1)},Zc=function(e){var t=window.location.href;return t.includes(":5000")&&(t=t.replace(":5000",":4000")),t+e},er=function(e,t,n){if("delete"===t)!function(e){var t=Pe.find((function(t){return t.botID===e}));nn({botID:e,botname:t.botname}),on(""),Rt(!0)}(e);else if("dashboard"===t){var a="bot".concat(e),c=Zc(a);we.onepagemode?window.open(c,"_self","noopener"):window.open(c,"_blank","noopener")}else if("status"===t){var r=Pe.find((function(t){return t.botID===e}));r.status=n,r.live="stopped",Te&&(Te.emit("update-bot",r,$.token),De(Pe))}else"headless"===t&&Te&&Te.emit("toggle-bot-mode",e,$.token)},tr=function(e){sr(),"upload"===e?Ht(!0):"select"===e&&Jt(!0)},nr=function(e){r("light"===n?"dark":"light")},ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";sr(),yc(e),qt(!0)},cr=function(){qt(!1)},rr=function(){fn(jr(Sn)[0]),yn(jr(Sn)[1]),jn(!0)},ir=function(){jn(!1)},or=function(){Te&&Te.emit("get-backup-files",$.token),On(!0)},sr=function(){On(!1)},lr=function(){Bn(we.timeshift||"0"),Fn(we.telegramToken||""),En(we.telegramUsername||""),Ln(we.marketcapApi||""),Yn(we.onepagemode||!1),Gn(we.loginRequired||!1),$n(we.bbUsername||""),ta(we.bbPassword||""),ra(we.f2aRequired||!1),la(we.whitelistEnabled||!1),ua(we.whitelist||[]),ma(we.temporaryAccessAllowed||!1),va(we.telegramChatId||null),ir()},dr=function(e){sr(),it.a.get("/download/".concat(e),{headers:{uuid:Be(new Date),tkn:$.token},responseType:"blob"}).then((function(t){st()(t.data,"".concat(e,".zip"))})).catch((function(e){}))},jr=function(e){var t=new Date,n=Object(_e.a)(K,"yyyy/MM/dd HH:mm:ss",new Date),a=Object(Ye.a)(n,t),c=Object(He.a)(t,a),r=c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0"),i=c;return 0!==e&&(i=Object(Ke.a)(c,{hours:e})),[r,i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0")]};Object(a.useEffect)((function(){return fn(jr(Sn)[0]),yn(jr(Sn)[1]),function(){}}),[K,Sn]);var br=function(e){Gn(e.target.checked)},ur=function(e){ra(e.target.checked)},hr=function(e){ma(e.target.checked)},Or=function(e){var t=null,n=null;if(Qe.a.isValid(e)){var a=Qe.a.parse(e);"ipv6"===a.kind()?(a.isIPv4MappedAddress()&&(t=a.toIPv4Address().toString()),n=a.toString()):(t=a.toString(),n=a.toIPv4MappedAddress().toString())}return{show:t||n,store:n}},xr=function(){Te&&Te.emit("logout",$.token),re({status:U,serverversion:Y,servertime:K,access:{allow:!1,reason:"logged out",token:null},externalip:te,publicKey:ne})},mr=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.parentElement.id,Za(!1),a=de.slice(1,de.length),he(a),Te&&Te.emit("confirm-message",n,$.token),Ma(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)};function fr(){return(fr=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te&&Te.emit("get-messages",$.token),Mc.current&&(Oc("#ff9800"),setTimeout((function(){Oc("#fff")}),1500)),Mc.current=!1;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){if(de.length>0){var e=de[0];if(e.bbvNew&&Ec(e.bbvNew),"any"===e.bbvReceive||qc.startsWith(e.bbvReceive)){var t=!!e.bbvNew&&qc>=e.bbvNew;if(t){Te&&Te.emit("confirm-message",e.number,$.token);var n=de.slice(1,de.length);he(n)}else{if(null===e.dialogWidth){var a=e.message.length;jc(a<400?"sm":a<800?"md":a<3e3?"lg":"xl")}else jc(e.dialogWidth);var c={number:e.number,title:e.title,message:e.message,width:e.dialogWidth,lock:e.lock,updated:t};Ka(c),Za(!0)}}else{Te&&Te.emit("confirm-message",e.number,$.token);var r=de.slice(1,de.length);he(r)}}else Za(!1)}),[de]);var gr=Object(a.useState)(0),vr=Object(o.a)(gr,2),wr=vr[0],yr=vr[1];return Object(a.useEffect)((function(){function e(){yr(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[yr]),Object(a.useEffect)((function(){var e=function(e){var t;zc?e.clientY>0&&e.clientY<=dt?Lc(!0):Lc(!1):(t=wr<600?Da:Ta,e.clientY>0&&e.clientY<=dt&&e.clientX>120&&e.clientX<wr-t-20?Lc(!0):Lc(!1))};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[wr,Ta,zc]),Object(ie.jsx)(pe.a,{theme:Jc,children:$t?Object(ie.jsxs)(w.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(ie.jsx)(k.a,{children:Object(ie.jsxs)(C.a,{children:[Object(ie.jsx)(T.a,{variant:"overline",color:"secondary",children:"New version has been installed"}),Object(ie.jsx)(C.a,{}),Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Please refresh the browser window to load the latest version"})]})}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:function(){window.location.reload()},color:"secondary",children:"Refresh"})})]}):Object(ie.jsxs)(c.a.Fragment,{children:[Object(ie.jsx)(je.a,{className:Gc.backdrop,open:Ft,children:Object(ie.jsx)(be.a,{color:"inherit"})}),we.onepagemode&&Object(ie.jsx)(ut,{bots:Pe,show:zc,windowWidth:wr,switchBot:function(e){var t=Zc(e.handle);we.onepagemode?window.open(t,"_self","noopener"):window.open(t,"_blank","noopener")}}),Object(ie.jsxs)(w.a,{open:Qa,fullWidth:!0,maxWidth:dc,children:[Object(ie.jsx)(S.a,{id:"dialog-title",children:Ha.title}),Object(ie.jsx)(k.a,{children:Object(ie.jsx)(C.a,{id:"dialog-description",children:Object(ie.jsx)(at.a,{linkTarget:"_blank",children:Ha.message})})}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",id:Ha.number,onClick:mr,color:"secondary",disabled:Ha.lock,children:"Close"})})]}),Object(ie.jsxs)(w.a,{open:nc,fullWidth:!0,children:[Object(ie.jsx)(S.a,{children:Ja.title}),Object(ie.jsx)(k.a,{children:Object(ie.jsx)(C.a,{children:Object(ie.jsx)(at.a,{linkTarget:"_blank",children:Ja.message})})}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:function(){return ac(!1)},color:"secondary",children:"Close"})})]}),Object(ie.jsx)(f.a,{}),Object(ie.jsx)(x.a,{position:"relative",className:Gc.appBar,children:Object(ie.jsxs)(B.a,{children:[Object(ie.jsx)("img",{src:"/logo192.png",alt:"Balance Bot Logo",className:Gc.logo}),Object(ie.jsxs)(g.a,{container:!0,direction:"row",alignItems:"center",nowrap:"true",children:[Object(ie.jsxs)(g.a,{item:!0,xs:!0,zeroMinWidth:!0,children:[Object(ie.jsx)(p.a,{mt:1.5,children:Object(ie.jsx)(T.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Balance Bot"})}),Object(ie.jsx)(p.a,{mt:-1,style:{color:"#959FD6"},children:Object(ie.jsxs)(T.a,{variant:"caption",color:"inherit",noWrap:!0,children:["v",Le," ","staging"===H&&"(staging)"]})})]}),Object(ie.jsx)(Q.a,{xsDown:!0,children:Object(ie.jsx)(mt,{wdt:Ta,update:Ra,logout:$&&$.token,onLogout:xr,badge:b,openDrawer:rr,openDrawerDownloads:or,handleUpdateOpen:ar,checkForUpdate:$c,checkIconColor:hc})}),Object(ie.jsx)(Q.a,{smUp:!0,children:Object(ie.jsx)(mt,{wdt:Da,update:Ra,logout:$&&$.token,onLogout:xr,badge:b,openDrawer:rr,openDrawerDownloads:or,handleUpdateOpen:ar,checkForUpdate:$c,checkIconColor:hc})})]})]})}),Object(ie.jsx)(lt.a,{dropzoneText:"Drop a backup.zip file here or click to browse",filesLimit:1,cancelButtonText:"cancel",submitButtonText:"submit",maxFileSize:5e6,open:Yt,onClose:function(){return Ht(!1)},onSave:function(e,t){t.preventDefault(),e[0].name.startsWith("backup")&&e[0].name.endsWith(".zip")?(Ht(!1),function(e,t){var n=e[0],a=new FormData;a.append("backupfile",n),it.a.post("/upload-backup",a,{headers:{uuid:Be(new Date),tkn:$.token,"Content-Type":"multipart/form-data"}}).then((function(e){Re("Backup file uploaded",{variant:"success",autoHideDuration:8e3,action:Vc})})).catch((function(e){Re("Uploading backup file failed",{variant:"error",autoHideDuration:8e3,action:Vc})}))}(e)):Re("Please upload a backup.zip file",{variant:"error",autoHideDuration:8e3,action:Vc})},showPreviewsInDropzone:!0,showFileNamesInPreview:!0,showPreviews:!1,useChipsForPreview:!0,showAlerts:!1}),Object(ie.jsxs)(O.a,{className:Gc.drawer,anchor:"right",open:hn,onOpen:function(){},onClose:sr,classes:{paper:Gc.drawerPaper},children:[Object(ie.jsx)(B.a,{}),Object(ie.jsxs)("div",{style:{padding:20},children:[Object(ie.jsxs)(g.a,{container:!0,spacing:2,children:[Object(ie.jsx)(g.a,{item:!0,xs:10,children:Object(ie.jsx)(T.a,{variant:"h4",children:"Download Files"})}),Object(ie.jsx)(g.a,{item:!0,xs:1,children:Object(ie.jsx)(Ge.a,{onClickAway:function(){return gt(!1)},children:Object(ie.jsx)(me,{interactive:!0,title:Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)(p.a,{m:2,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Download Backup"})}),Object(ie.jsx)("div",{children:"You can download a backup of your configuration files. This helps to restore your bot(s) when you'd like to do a new reinstallation or move your installation to another machine. Sensitive data (e.g. API keys, password, Telegram token) are stripped before downloading."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"If you've selected 'require login to access', this will be disabled in the downloaded onfiguration. This to avoid getting locked out if you use the backup to restore your bots. Make sure to re-enable login at first use."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"If you've enabled a Telegram bot, you will have to re-enter your Telegram token in the settings, and use the /start command in the Telegram bot to enable communication between BB and Telegram."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"NOTE: this will also create a new full backup on the server."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Download Logs"})}),Object(ie.jsx)("div",{children:"You can download log files containing output from your bot(s). This could help understand / debug possible issues with your installation."})]})}),onClose:function(){return gt(!1)},open:ft,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:Object(ie.jsx)(We.a,{onClick:ft?function(){return gt(!1)}:function(){return gt(!0)},children:Object(ie.jsx)(xe.a,{color:"secondary"})})})})}),Object(ie.jsx)(g.a,{item:!0,xs:1}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(p.a,{pl:0,mt:-2,children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Download configuration backup or log files"})})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return dr("backup")},className:Gc.button2,children:"Backup"})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return dr("logs")},className:Gc.button2,children:"Logs"})})]}),Object(ie.jsx)(p.a,{pt:3}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(T.a,{variant:"subtitle2",children:"Note: 'Backup' will also create a new full backup on the server"})}),Object(ie.jsx)(p.a,{pt:5}),Object(ie.jsx)(Ue.a,{style:{height:3}}),Object(ie.jsx)(p.a,{pt:5}),Object(ie.jsxs)(g.a,{container:!0,spacing:2,children:[Object(ie.jsx)(g.a,{item:!0,xs:10,children:Object(ie.jsx)(T.a,{variant:"h4",children:"Restore Configuration"})}),Object(ie.jsx)(g.a,{item:!0,xs:1,children:Object(ie.jsx)(Ge.a,{onClickAway:function(){return kt(!1)},children:Object(ie.jsx)(me,{interactive:!0,title:Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)(p.a,{m:2,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Upload Backup"})}),Object(ie.jsx)("div",{children:"You can upload a backup of your configuration files (backup.zip). This will restore your installation based on a previously downloaded backup."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Select Backup"})}),Object(ie.jsx)("div",{children:"You can select from the automatically made backups of your configuration files. This will restore your installation based on the selected backup."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"Note: restoring your configuration from a backup will override your Bot Manager settings and bots that you have already configured as part of this installation, so please use with care."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"To execute the restore process, you will be asked to confirm in your Telegram bot."})]})}),onClose:function(){return kt(!1)},open:yt,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:Object(ie.jsx)(We.a,{onClick:yt?function(){return kt(!1)}:function(){return kt(!0)},children:Object(ie.jsx)(xe.a,{color:"secondary"})})})})}),Object(ie.jsx)(g.a,{item:!0,xs:1}),Object(ie.jsxs)(g.a,{item:!0,xs:12,children:[Object(ie.jsx)(p.a,{pl:0,mt:-2,children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Restore your bot(s) from a backup"})}),Pe.length>0&&!pc&&Object(ie.jsx)(p.a,{pl:1,mt:1,children:Object(ie.jsx)(T.a,{variant:"subtitle2",color:"textPrimary",children:"Note: you need to setup your Telegram bot first"})})]}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return tr("upload")},className:Gc.button2,disabled:Pe.length>0&&!pc||!ic,children:"Upload"})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return tr("select")},className:Gc.button2,disabled:Pe.length>0&&!pc||!ic,children:"Select"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"restore-ack",disabled:!1,checked:ic,onChange:function(){return oc(!ic)}}),label:Object(ie.jsx)(T.a,{variant:"subtitle2",children:"I understand 'restore' will delete & replace my current bot(s)"})})})]}),Object(ie.jsx)(p.a,{pt:5}),Object(ie.jsx)(Ue.a,{style:{height:3}}),Object(ie.jsx)(p.a,{pt:5}),Object(ie.jsxs)(g.a,{container:!0,spacing:2,children:[Object(ie.jsx)(g.a,{item:!0,xs:10,children:Object(ie.jsx)(T.a,{variant:"h4",children:"Application Control"})}),Object(ie.jsx)(g.a,{item:!0,xs:1,children:Object(ie.jsx)(Ge.a,{onClickAway:function(){return Tt(!1)},children:Object(ie.jsx)(me,{interactive:!0,title:Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)(p.a,{m:2,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Update Balance Bot"})}),Object(ie.jsx)("div",{children:"This updates Balance Bot to a newer version, if available."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Reinstall Balance Bot"})}),Object(ie.jsx)("div",{children:"This reinstalls Balance Bot to the latest version. Note: your configuration will be kept."})]})}),onClose:function(){return Tt(!1)},open:Bt,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:Object(ie.jsx)(We.a,{onClick:Bt?function(){return Tt(!1)}:function(){return Tt(!0)},children:Object(ie.jsx)(xe.a,{color:"secondary"})})})})}),Object(ie.jsx)(g.a,{item:!0,xs:1}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(p.a,{pl:0,mt:-2,children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Manage the Balance Bot installation"})})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return ar("update")},className:Gc.button2,children:"Update"})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return ar("reinstall")},className:Gc.button2,children:"Reinstall"})})]})]})]}),Object(ie.jsxs)(O.a,{className:Gc.drawer,anchor:"right",open:dn,onOpen:function(){},onClose:lr,classes:{paper:Gc.drawerPaper},children:[Object(ie.jsx)(B.a,{}),Object(ie.jsx)("div",{style:{padding:20},children:Object(ie.jsxs)(g.a,{container:!0,spacing:2,children:["telegram"===b&&Object(ie.jsx)(ue.a,{severity:"error",children:"Configure and start your Telegram bot when enabling login or allowing temporary access from other IP addresses"}),1===b&&Object(ie.jsx)(ue.a,{severity:"error",children:"Re-enable login and re-enter your password"}),2===b&&Object(ie.jsx)(ue.a,{severity:"error",children:"Re-enter your Telegram token and type /start in your Telegram bot"}),3===b&&Object(ie.jsxs)(p.a,{children:[Object(ie.jsx)(ue.a,{severity:"error",children:"Re-enter your Telegram token and type /start in your Telegram bot"}),Object(ie.jsx)(ue.a,{severity:"error",children:"Re-enable login and re-enter your password"})]}),Object(ie.jsx)(g.a,{item:!0,xs:10,children:Object(ie.jsx)(T.a,{variant:"h4",children:"General Settings"})}),Object(ie.jsxs)(g.a,{item:!0,xs:1,children:[Object(ie.jsx)(Ge.a,{onClickAway:function(){return $e(!1)},children:Object(ie.jsx)(me,{interactive:!0,title:Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)(p.a,{m:2,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Server timezone adjustment"})}),Object(ie.jsx)("div",{children:"If you're hosting Balance Bot in the cloud, and the server's timezone is different from your local timezone, you can use this setting to adjust for that so that timestamps for orders and other events are provided in your local timezone. This setting will be applied to all your individual bots."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Telegram Bot"})}),Object(ie.jsx)("div",{children:"You can receive notifications from Bot Manager and your bot(s) on Telegram. To do so, take the following steps:"}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsxs)("div",{children:["1. Create a Telegram bot by sending '/newbot' to the BotFather (Telegram's uber bot): ",Object(ie.jsx)(ee.a,{href:"https://t.me/botfather",target:"_blank",rel:"noopener",color:"secondary",children:"https://t.me/botfather"})]}),Object(ie.jsx)("div",{children:"2. Answer BotFather's questions, i.e. pick a name and a username for your bot"}),Object(ie.jsx)("div",{children:"3. Copy the token provided by BotFather and paste it here in the settings"}),Object(ie.jsx)("div",{children:"4. Enter your personal Telegram username (your name on Telegram preceded by @, NOT the username for your Telegram bot) here in the settings"}),Object(ie.jsxs)("div",{children:["5. Open your Telegram bot using the link provided by BotFather: ",Object(ie.jsx)(ee.a,{href:"#",color:"secondary",children:"t.me/[botname]"})]}),Object(ie.jsx)("div",{children:"6. Tap the 'start' button at the bottom, or type '/start' for further instructions"}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Distribute based on market cap"})}),Object(ie.jsx)("div",{children:"By default, you can manually adjust the coin distribution. As an alternative, Balance Bot can automatically set the distribution for selected coins based on the market cap of these coins. The market cap data will be retrieved once per hour, and the distribution will be updated accordingly."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsxs)("div",{children:["To use this function, you need to create a free account on CoinMarketCap (",Object(ie.jsx)(ee.a,{href:"https://coinmarketcap.com/api",target:"_blank",rel:"noopener",color:"secondary",children:"coinmarketcap.com/api"}),") and enter your CoinMarketCap API key here in the Bot Manager settings."]}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"NOTE: the number of API calls that can be made with a free CoinMarketCap account is limited. You can use market cap based balancing with up to 12 bots."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"One page Mode"})}),Object(ie.jsx)("div",{children:"By enabling 'one page mode', dashboards will be opened within the same browser tab. When disabled, dashboards will be opened in new browser tabs."})]})}),onClose:function(){return $e(!1)},open:Xe,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:Object(ie.jsx)(We.a,{onClick:Xe?function(){return $e(!1)}:function(){return $e(!0)},children:Object(ie.jsx)(xe.a,{color:"secondary"})})})}),Object(ie.jsx)(g.a,{item:!0,xs:1})]}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsxs)(J.a,{children:[Object(ie.jsx)(P.a,{id:"server-timezone",children:"Adjust for server timezone"}),Object(ie.jsxs)(V.a,{labelId:"server-timezone",value:Sn,onChange:function(e){Bn(e.target.value),yn(jr(e.target.value)[1])},className:Gc.textinput,children:[Object(ie.jsx)(F.a,{value:12,children:"+12:00"}),Object(ie.jsx)(F.a,{value:11,children:"+11:00"}),Object(ie.jsx)(F.a,{value:10,children:"+10:00"}),Object(ie.jsx)(F.a,{value:9,children:"+09:00"}),Object(ie.jsx)(F.a,{value:8,children:"+08:00"}),Object(ie.jsx)(F.a,{value:7,children:"+07:00"}),Object(ie.jsx)(F.a,{value:6,children:"+06:00"}),Object(ie.jsx)(F.a,{value:5,children:"+05:00"}),Object(ie.jsx)(F.a,{value:4,children:"+04:00"}),Object(ie.jsx)(F.a,{value:3,children:"+03:00"}),Object(ie.jsx)(F.a,{value:2,children:"+02:00"}),Object(ie.jsx)(F.a,{value:1,children:"+01:00"}),Object(ie.jsx)(F.a,{value:0,children:"No adjustment"}),Object(ie.jsx)(F.a,{value:-1,children:"-01:00"}),Object(ie.jsx)(F.a,{value:-2,children:"-02:00"}),Object(ie.jsx)(F.a,{value:-3,children:"-03:00"}),Object(ie.jsx)(F.a,{value:-4,children:"-04:00"}),Object(ie.jsx)(F.a,{value:-5,children:"-05:00"}),Object(ie.jsx)(F.a,{value:-6,children:"-06:00"}),Object(ie.jsx)(F.a,{value:-7,children:"-07:00"}),Object(ie.jsx)(F.a,{value:-8,children:"-08:00"}),Object(ie.jsx)(F.a,{value:-9,children:"-09:00"}),Object(ie.jsx)(F.a,{value:-10,children:"-10:00"}),Object(ie.jsx)(F.a,{value:-11,children:"-11:00"}),Object(ie.jsx)(F.a,{value:-12,children:"-12:00"})]}),Object(ie.jsxs)(G.a,{children:["Current server time: ",pn," - Adjusted server time: ",wn]})]})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(v.a,{id:"telegram-token",name:"telegram-token",label:"Telegram Token",helperText:"Token for your Telegram bot as provided by BotFather",type:"password",value:Pn,onChange:function(e){Fn(e.target.value)},className:Gc.textinput,autoComplete:"off"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(v.a,{id:"telegram-username",name:"telegram-username",label:"Telegram Username",helperText:"Your Telegram username",value:Nn,onChange:function(e){En(e.target.value)},className:Gc.textinput})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(v.a,{id:"marketcap-api",name:"marketcap-api",label:"CoinMarketCap API",helperText:"Your CoinMarketCap API to enable market cap based balancing",type:"password",value:zn,onChange:function(e){Ln(e.target.value)},className:Gc.textinput,autoComplete:"off"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"one-page-mode",checked:Un,onChange:function(e){Yn(e.target.checked)}}),label:"Enable one page mode"})}),Object(ie.jsx)(g.a,{item:!0,xs:10,children:Object(ie.jsx)(T.a,{variant:"h4",children:"Security Settings"})}),Object(ie.jsxs)(g.a,{item:!0,xs:1,children:[Object(ie.jsx)(Ge.a,{onClickAway:function(){return jt(!1)},children:Object(ie.jsx)(me,{interactive:!0,title:Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)(p.a,{m:2,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Security Settings"})}),Object(ie.jsx)("div",{children:"If you're running Balance Bot in the cloud, it is highly recommended to only allow access from selected IP addresses (like your home IP address). Alternatively, or additionally, you may want to require login before getting access. You should use at least one of these options to prevent others from accessing your Balance Bot deployment."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Require login to access"})}),Object(ie.jsx)("div",{children:"Check this option to require logging in using a username and password. For improved security, after logging in, your session will expire after 60 minutes. Optionally, you can activate Two Factor Authentication (2FA) through your Telegram bot (requires Telegram configuration, see General Settings above)."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Enable IP whitelist"})}),Object(ie.jsx)("div",{children:"Check this option to allow access to Balance Bot from selected IP addresses only, and add your trusted IP address(es) to the IP whitelist. By default, your current IP address is added to the IP whitelist when enabling the option, to prevent you from being locked out."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:Object(ie.jsx)("b",{children:"Allow temporary access"})}),Object(ie.jsx)("div",{children:"There may be occassions when you want to access Balance Bot from an IP address that is not whitelisted. By checking the temporary access option, if you're trying to access Balance Bot from a non-whitelisted IP address, you will receive a message in your Telegram Bot and you can approve temporary access from that IP address (requires Telegram configuration, see General Settings above). If you have login enabled, you will be asked for your username and password instead."}),Object(ie.jsx)("div",{children:"\xa0"}),Object(ie.jsx)("div",{children:"Note: for security reasons, it is NOT recommended to access Balance Bot over public wifi networks."})]})}),onClose:function(){return jt(!1)},open:ot,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:Object(ie.jsx)(We.a,{onClick:ot?function(){return jt(!1)}:function(){return jt(!0)},children:Object(ie.jsx)(xe.a,{color:"secondary"})})})}),Object(ie.jsx)(g.a,{item:!0,xs:1})]}),Object(ie.jsx)(p.a,{pl:1,mt:-2,children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"For security reasons, don't use public wifi networks"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:""!==Pn&&""!==Nn&&ga||_n?Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"login-required",disabled:!1,checked:_n,onChange:br}),label:"Require login to access"}):Object(ie.jsx)(Ot,{title:"Requires Telegram bot to be set up and started with /start",children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"login-required",disabled:!0,checked:_n,onChange:br}),label:"Require login to access"})})}),Object(ie.jsxs)(p.a,{p:2,display:_n?"inline":"none",bgcolor:"dark"===n?"#757575":"#e0e0e0",width:"100%",children:[Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(v.a,{id:"bb-username",name:"bb-username",label:"Username",helperText:"Your Balance Bot username",value:Vn,onChange:function(e){$n(e.target.value)},className:Gc.textinput,disabled:!_n,autoComplete:"off"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(v.a,{id:"bb-password",name:"bb-password",label:"Password",helperText:"Your Balance Bot password",type:"password",value:ea,onChange:function(e){ta(e.target.value)},className:Gc.textinput,disabled:!_n,autoComplete:"off"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:""!==Pn&&""!==Nn&&ga||ca?Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"f2a-required",disabled:!1,checked:ca,onChange:ur}),label:"Require 2FA through Telegram bot to log in"}):Object(ie.jsx)(Ot,{title:"Requires Telegram bot to be set up and started with /start",children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"f2a-required",disabled:!0,checked:ca,onChange:ur}),label:"Require 2FA through Telegram bot to log in"})})})]}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"whitelist-enabled",checked:sa,onChange:function(e){if(e.target.checked&&!ba.includes(Or(te).store)){var t=ba;t.push(Or(te).store),ua(t)}la(e.target.checked)}}),label:"Enable IP whitelist"})}),Object(ie.jsxs)(p.a,{p:2,display:sa?"inline":"none",bgcolor:"dark"===n?"#757575":"#e0e0e0",width:"100%",children:[Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(T.a,{variant:"overline",color:"textSecondary",children:"IP Whitelist"})}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:Object(ie.jsx)(D.a,{dense:!0,children:ba.map((function(e){return e===Or(te).store?Object(ie.jsxs)(A.a,{children:[Object(ie.jsx)(E.a,{primary:Or(e).show}),Object(ie.jsx)(N.a,{children:Object(ie.jsx)(m.a,{color:"secondary",edge:"end",size:"small",disableFocusRipple:!0,disableRipple:!0,disabled:!0,children:"Current IP"})})]},e):Object(ie.jsxs)(A.a,{children:[Object(ie.jsx)(E.a,{primary:Or(e).show}),Object(ie.jsx)(N.a,{children:Object(ie.jsx)(We.a,{edge:"end",size:"small",onClick:function(){return function(e){var t=ba;t=t.filter((function(t){return t!==e})),ua(t)}(e)},children:Object(ie.jsx)(W.a,{})})})]},e)}))})}),Object(ie.jsxs)(g.a,{item:!0,container:!0,justify:"space-between",xs:12,children:[Object(ie.jsx)(g.a,{item:!0,xs:9,children:Object(ie.jsx)(v.a,{id:"new-ip",name:"new-ip",label:"IP Address",value:ka,onChange:function(e){/^[0-9,a-f,.,:]*$/.test(e.target.value)&&Ca(e.target.value)},className:Gc.textinput})}),Object(ie.jsx)(g.a,{item:!0,xs:1,children:Object(ie.jsx)(L.a,{size:"small",color:"secondary",onClick:function(){if(ba.includes(Or(ka).store))Re("IP address already whitelisted",{variant:"error",autoHideDuration:8e3,action:Vc});else if(Ve.a.v4({exact:!0}).test(ka)||Ve.a.v6({exact:!0}).test(ka)){var e=ba;e.push(Or(ka).store),Ca(""),ua(e)}else Re("Invalid IP address",{variant:"error",autoHideDuration:8e3,action:Vc})},children:Object(ie.jsx)(_.a,{})})})]}),Object(ie.jsx)(g.a,{item:!0,xs:12,children:""!==Pn&&""!==Nn&&ga||xa?Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"temporary-access-allowed",disabled:!1,checked:xa,onChange:hr}),label:"Allow controlled temporary access from other IPs"}):Object(ie.jsx)(Ot,{title:"Requires Telegram bot to be set up and started with /start",children:Object(ie.jsx)(I.a,{control:Object(ie.jsx)(X.a,{color:"secondary",name:"temporary-access-allowed",disabled:!0,checked:xa,onChange:hr}),label:"Allow controlled temporary access from other IPs"})})})]}),Object(ie.jsx)(g.a,{item:!0,xs:3,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:lr,className:Gc.button,children:"Cancel"})}),Object(ie.jsx)(g.a,{item:!0,xs:3,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){(!0===ca&&!1===we.f2aRequired||!0===xa&&!1===we.temporaryAccessAllowed)&&!ga?Re("Set up your Telegram bot and try again",{variant:"error",autoHideDuration:8e3,action:Vc}):function(){if(!_n||""!==Vn&&""!==ea){var e=we.restored&&we.restored.password&&""===ea?"***":ea,t=we.restored&&we.restored.telegram&&""===Pn?"***":Pn,n=we.restored&&we.restored.marketcap&&""===zn?"***":zn,a={timeshift:Sn,telegramToken:t,telegramUsername:Nn,marketcapApi:n,onepagemode:Un,loginRequired:_n,bbUsername:Vn,bbPassword:e,f2aRequired:ca,whitelistEnabled:sa,whitelist:ba,temporaryAccessAllowed:xa,telegramChatId:ga},c=(new Date).getTime(),r=a;"************"!==e&&""!==e&&"***"!==e&&(r=Object(j.a)(Object(j.a)({},r),{},{bbPassword:Hc.encrypt(ne,"".concat(e,"|@|").concat(c))})),"************"!==t&&""!==t&&"***"!==t&&(r=Object(j.a)(Object(j.a)({},r),{},{telegramToken:Hc.encrypt(ne,"".concat(t,"|@|").concat(c))})),"************"!==n&&""!==n&&"***"!==n&&(r=Object(j.a)(Object(j.a)({},r),{},{marketcapApi:Hc.encrypt(ne,"".concat(n,"|@|").concat(c))})),Te&&Te.emit("store-settings",r,$.token),""!==a.telegramToken&&(a.telegramToken="************"),""!==a.bbPassword&&(a.bbPassword="************"),""!==a.marketcapApi&&(a.marketcapApi="************"),ke(a),ir()}else Re("Please enter a username and password",{variant:"error",autoHideDuration:8e3,action:Vc})}()},className:Gc.button,children:"Save"})})]})})]}),Object(ie.jsxs)("main",{children:[Object(ie.jsx)("div",{className:Gc.heroContent,children:Object(ie.jsxs)(Z.a,{maxWidth:"sm",children:[Object(ie.jsx)(T.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Bot Manager"}),Object(ie.jsx)(T.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:"Create, start, stop & delete your bots"}),Object(ie.jsx)("div",{className:Gc.heroButtons,children:Object(ie.jsx)(g.a,{container:!0,spacing:2,justify:"center",children:Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){Dt(!0),Te&&Te.emit("add-bot",$.token)},children:"Add new bot"})})})})]})}),Object(ie.jsxs)(Z.a,{className:Gc.cardGrid,maxWidth:"md",children:[Object(ie.jsx)(g.a,{container:!0,spacing:4,children:Pe&&Pe.length>0&&Pe.map((function(e){return Object(ie.jsx)(le,{bot:e,mode:n,callback:er},e.botID)}))}),Object(ie.jsx)(p.a,{mb:4})]})]}),Object(ie.jsx)("div",{className:Gc.bottomPush,children:Object(ie.jsx)("footer",{className:Gc.footer,children:Object(ie.jsxs)(g.a,{container:!0,alignItems:"center",children:[Object(ie.jsxs)(g.a,{container:!0,item:!0,xs:12,sm:6,md:3,alignItems:"center",justify:"flex-start",children:[Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(I.a,{onChange:nr,value:n,control:Object(ie.jsx)(ht,{checked:"dark"===n,color:"secondary"}),label:Object(ie.jsx)(T.a,{variant:"button",children:Object(ie.jsx)(p.a,{color:"#FFF",children:"Light"})}),labelPlacement:"start"})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(Xc,{disableRipple:!0,onClick:nr,children:Object(ie.jsx)(T.a,{variant:"button",children:Object(ie.jsx)(p.a,{color:"#FFF",children:"Dark"})})})})]}),Object(ie.jsxs)(Q.a,{xsDown:!0,children:[Object(ie.jsx)(g.a,{item:!0,xs:!1,sm:6,md:6,children:Object(ie.jsx)(bt,{})}),Object(ie.jsx)(Q.a,{xsDown:!0,children:Object(ie.jsx)(g.a,{item:!0,xs:!1,md:3})})]})]})})}),Object(ie.jsxs)(w.a,{open:Et,onClose:Qc,children:[Object(ie.jsx)(S.a,{children:"Confirm Delete"}),Object(ie.jsxs)(k.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsxs)(T.a,{color:"textPrimary",children:["Warning: your bot, its configuration, and all its data will be deleted. Enter the bot name to confirm deletion: ",Object(ie.jsx)("b",{children:tn.botname})]})}),Object(ie.jsx)(v.a,{autoFocus:!0,color:"light"===n?"primary":"secondary",margin:"dense",id:"botname",label:"Bot name",type:"text",value:rn,onChange:function(e){on(e.target.value)},fullWidth:!0})]}),Object(ie.jsxs)(y.a,{children:[Object(ie.jsx)(m.a,{variant:"contained",onClick:Qc,color:"light"===n?"primary":"secondary",children:"Cancel"}),Object(ie.jsx)(m.a,{variant:"contained",onClick:function(e){rn===tn.botname&&(Rt(!1),Te&&Te.emit("delete-bot",tn.botID,$.token))},color:"light"===n?"primary":"secondary",children:"Delete bot"})]})]}),Object(ie.jsxs)(w.a,{open:Gt,onClose:function(){Jt(!1)},children:[Object(ie.jsx)(S.a,{children:"Select Backup"}),Object(ie.jsx)(k.a,{children:Sc.length>0?Object(ie.jsxs)(p.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{color:"textPrimary",children:"Please select a backup below. This backup will be used to restore your configuration"})}),Object(ie.jsx)(V.a,{labelId:"backup-selection",value:Pc,onChange:function(e){Fc(e.target.value)},className:Gc.textinput,children:Sc.map((function(e){return Object(ie.jsx)(F.a,{value:e.name,children:e.name})}))})]}):Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{color:"textPrimary",children:"There are no backups available yet. Backup are made automatically every day"})})}),Object(ie.jsxs)(y.a,{children:[Object(ie.jsx)(m.a,{variant:"contained",onClick:function(){Jt(!1)},color:"light"===n?"primary":"secondary",children:"Cancel"}),Object(ie.jsx)(m.a,{variant:"contained",disabled:0===Sc.length,onClick:function(){Jt(!1),Te&&Te.emit("restore-backup-file",Pc,$.token)},color:"light"===n?"primary":"secondary",children:"Restore Backup"})]})]}),Object(ie.jsx)(w.a,{open:Lt,onClose:cr,children:ce?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)(S.a,{children:["Confirm ",pr(wc)]}),Object(ie.jsx)(k.a,{children:Object(ie.jsx)(C.a,{children:Object(ie.jsxs)(T.a,{color:"textPrimary",children:["Do you want to ",wc," to the latest version? Balance Bot will be unavailable until the process has completed. This may take a few minutes. Just wait for the Bot Manager to reappear."]})})}),Object(ie.jsxs)(y.a,{children:[Object(ie.jsx)(m.a,{variant:"contained",onClick:cr,color:"light"===n?"primary":"secondary",children:"Cancel"}),Object(ie.jsx)(m.a,{variant:"contained",onClick:function(){qt(!1),Te&&("update"===wc?Te.emit("update-bb",$.token):"reinstall"===wc&&Te.emit("reinstall-bb",$.token))},color:"light"===n?"primary":"secondary",children:pr(wc)})]})]}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)(S.a,{children:["Manual ",pr(wc)," Required"]}),Object(ie.jsxs)(k.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsxs)(T.a,{color:"textPrimary",children:["Your installation does not support ",wc,"s from the browser. Please perform a manual ",wc,"."]})}),Object(ie.jsx)(C.a,{children:Object(ie.jsxs)(T.a,{color:"textPrimary",children:["Possible causes:",Object(ie.jsxs)("ol",{children:[Object(ie.jsx)("li",{children:"You haven't installed BB using the official installer"}),Object(ie.jsx)("li",{children:"You're running BB in a Docker container"})]})]})})]}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:cr,color:"light"===n?"primary":"secondary",children:"OK"})})]})})]})})}var mt=function(e){var t=e.wdt,n=e.update,a=e.logout,c=e.onLogout,r=e.badge,i=e.openDrawer,o=e.openDrawerDownloads,s=e.handleUpdateOpen,l=e.checkForUpdate,d=e.checkIconColor;return Object(ie.jsxs)(g.a,{item:!0,xs:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-end",style:{maxWidth:t},children:[n?Object(ie.jsx)(Q.a,{xsDown:!0,children:Object(ie.jsx)(g.a,{item:!0,style:{width:"130px"},children:Object(ie.jsx)(he.a,{onClick:function(){return s("update")},label:"Update Available",style:{backgroundColor:"#959FD6",color:"white"}})})}):Object(ie.jsx)(Q.a,{xsDown:!0,children:Object(ie.jsx)(g.a,{item:!0,style:{width:"40px"},children:Object(ie.jsx)(Ot,{title:"Check for updates",children:Object(ie.jsx)(We.a,{onClick:l,children:Object(ie.jsx)(H.a,{style:{color:d}})})})})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(Ot,{title:"Admin Tools",children:Object(ie.jsx)(We.a,{onClick:o,children:Object(ie.jsx)(Me.a,{style:{color:"#fff"}})})})}),Object(ie.jsx)(g.a,{item:!0,children:Object(ie.jsx)(Ot,{title:"Settings",children:Object(ie.jsx)(We.a,{onClick:i,children:"false"===r?Object(ie.jsx)(Le.a,{style:{color:"#fff"}}):Object(ie.jsx)(z.a,{badgeContent:"!",color:"secondary",children:Object(ie.jsx)(Le.a,{style:{color:"#fff"}})})})})}),a&&Object(ie.jsx)(g.a,{item:!0,style:{width:"48px"},children:Object(ie.jsx)(Ot,{title:"Logout",children:Object(ie.jsx)(We.a,{onClick:c,children:Object(ie.jsx)(U.a,{style:{color:"#ffffff"}})})})})]})},pt=Object(u.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},logo:{maxWidth:60,padding:10},content:{justify:"flex-start",alignItems:"flex-start",flexGrow:1,padding:e.spacing(2)},footer:{marginTop:"auto",backgroundColor:"#000000"},bottomPush:{position:"fixed",width:"100%",bottom:0,paddingBottom:0,zIndex:e.zIndex.drawer+1}}}));function ft(){return Object(ie.jsx)(p.a,{color:"#FFF",height:54,p:2,children:Object(ie.jsxs)(T.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(ie.jsx)(ee.a,{style:{color:"#ffffff",textDecoration:"none"},href:"https://hodlerhacks.com/",target:"_blank",rel:"noopener",children:"hodlerhacks.com"})," ",(new Date).getFullYear()]})})}function gt(){var e=et.version,t=ge("mode","light")[0],n=Object(a.useContext)(Ie)[0],r=n.status,i=n.access,s=n.publicKey,l=Object(a.useState)(!1),d=Object(o.a)(l,2),j=d[0],b=d[1],u=Object(a.useState)("initial state"),h=Object(o.a)(u,2),O=h[0],I=h[1],P=Object(a.useState)(!1),F=Object(o.a)(P,2),D=F[0],A=F[1],N=Object(a.useState)(!1),E=Object(o.a)(N,2),R=E[0],W=E[1],z=Object(a.useState)(""),L=Object(o.a)(z,2),q=L[0],M=L[1],U=Object(a.useState)(""),Y=Object(o.a)(U,2),H=Y[0],K=Y[1],_=new ye.Crypt({md:"sha256",rsaStandard:"RSA-OAEP"});Object(a.useEffect)((function(){document.title="BB | Bot Dashboard";var e=function(){var e=window.location.pathname.match(/user\/(\w{3,})/);return e?e[1]:""}();return e&&(M(e),W(!0)),function(){}}),[]),Object(a.useEffect)((function(){return"disconnected"===r?setTimeout((function(){"disconnected"===r&&A(!0)}),2e3):A(!1),function(){}}),[r]),Object(a.useEffect)((function(){return i&&(b(!1),A(!1),!0===i.allow?I(""):!1===i.allow&&"login required"===i.reason?(I("Please log in"),b(!0)):!1===i.allow&&"2FA required"===i.reason?I("Add your client's IP address to the IP whitelist, or temporarily allow access through your Telegram bot"):!1===i.allow&&"temporary access not allowed"===i.reason?I("Add your client's IP address to the IP whitelist"):!1===i.allow&&"access timeout"===i.reason?V():!1===i.allow&&"temporary access timeout"===i.reason?I("Your temporary access has expired"):!1===i.allow&&"2FA login required"===i.reason?I("2FA required - approve login through your Telegram bot"):!1===i.allow&&"invalid credentials"===i.reason?(I("Incorrect username or password - please try again"),b(!0)):!1===i.allow&&"2FA login rejected"===i.reason?I("2FA login was rejected"):!1===i.allow&&"temporary access rejected"===i.reason?I("Temporary access was rejected"):!1===i.allow&&"logged out"===i.reason?V():!1===i.allow&&"initial state"===i.reason?(I("initial state"),setTimeout((function(){"initial state"===i.reason&&A(!0)}),4e3)):!1===i.allow&&"reload"===i.reason&&V()),function(){}}),[i]);var G=Object(fe.a)({palette:{type:t}}),J=pt(),X=function(e){"username"===e.target.id&&M(e.target.value),"password"===e.target.id&&K(e.target.value)},V=function(){window.location.reload()},$=Object(Je.b)(),Q=$.enqueueSnackbar,Z=$.closeSnackbar,ee=function(e){return Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsx)(m.a,{style:{color:"#bbbbbb"},onClick:function(){Z(e)},children:"Dismiss"})})};return Object(ie.jsxs)(pe.a,{theme:G,children:[Object(ie.jsx)(c.a.Fragment,{children:Object(ie.jsxs)("div",{className:J.root,children:[Object(ie.jsx)(f.a,{}),Object(ie.jsx)(x.a,{position:"fixed",className:J.appBar,children:Object(ie.jsxs)(B.a,{children:[Object(ie.jsx)("img",{src:"/logo192.png",alt:"Balance Bot Logo",className:J.logo}),Object(ie.jsx)(g.a,{container:!0,direction:"row",alignItems:"center",nowrap:"true",children:Object(ie.jsxs)(g.a,{item:!0,xs:!0,zeroMinWidth:!0,children:[Object(ie.jsx)(p.a,{mt:1.5,children:Object(ie.jsx)(T.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Balance Bot"})}),Object(ie.jsx)(p.a,{mt:-1,style:{color:"#959FD6"},children:Object(ie.jsxs)(T.a,{variant:"caption",color:"inherit",noWrap:!0,children:["v",e]})})]})})]})}),Object(ie.jsx)("main",{className:J.content,children:Object(ie.jsx)(B.a,{})})]})}),"disconnected"===r&&"initial state"!==O?Object(ie.jsxs)(w.a,{open:D,fullWidth:!0,maxWidth:"sm",children:[Object(ie.jsxs)(k.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"secondary",children:"The connection with the server has been lost"})}),Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Balance Bot may have stopped running"})})]}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:V,color:"secondary",children:"Retry"})})]}):j?Object(ie.jsxs)(c.a.Fragment,{children:[Object(ie.jsx)(f.a,{}),Object(ie.jsxs)(w.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(ie.jsx)(S.a,{children:O}),Object(ie.jsxs)(k.a,{children:[!R&&Object(ie.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",onChange:X}),Object(ie.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:X}),Object(ie.jsx)(p.a,{m:3}),Object(ie.jsx)(m.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){var e=(new Date).getTime();Te&&Te.emit("login",{username:q,password:_.encrypt(s,"".concat(H,"|@|").concat(e))})},children:"Log In"}),Object(ie.jsx)(p.a,{m:3}),Object(ie.jsx)(m.a,{fullWidth:!0,onClick:function(){Te&&Te.emit("reset-password"),Q("See your Telegram bot to reset password",{variant:"success",autoHideDuration:8e3,action:ee})},color:"default",style:{fontSize:"10px"},children:"Forgot password"})]})]})]}):"initial state"===O?Object(ie.jsxs)(w.a,{open:D,fullWidth:!0,maxWidth:"sm",children:[Object(ie.jsxs)(k.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"secondary",children:"Balance Bot seems to be down"})}),Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:"Please check your server and try again"})})]}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:V,color:"secondary",children:"Retry"})})]}):!i.allow&&Object(ie.jsxs)(w.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(ie.jsxs)(k.a,{children:[Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"secondary",children:"Notification"})}),Object(ie.jsx)(C.a,{children:Object(ie.jsx)(T.a,{variant:"overline",color:"textPrimary",children:O})})]}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(m.a,{variant:"contained",onClick:V,color:"secondary",children:"Back"})})]}),Object(ie.jsx)("div",{className:J.bottomPush,children:Object(ie.jsx)("footer",{className:J.footer,children:Object(ie.jsx)(g.a,{container:!0,alignItems:"center",children:Object(ie.jsx)(g.a,{item:!0,xs:!1,sm:12,md:12,children:Object(ie.jsx)(ft,{})})})})})]})}var vt=function(){var e=Object(a.useContext)(Ie)[0],t=e.status,n=e.access,c=Object(a.useState)(!0),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){return s(!n.allow||"disconnected"===t),function(){}}),[n,t]),Object(ie.jsx)("div",{children:i?Object(ie.jsx)(gt,{}):Object(ie.jsx)(xt,{})})},wt=n(462);function yt(){var e=et.version,t=Object(a.useContext)(Ie),n=Object(o.a)(t,2),c=n[0],r=c.status,i=c.serverversion,s=c.publicKey,l=n[1],d=Object(a.useContext)(Fe)[1],b=Object(a.useContext)(Ae)[1],u=Object(a.useContext)(Ee)[1],h=ge("publicKey",""),O=Object(o.a)(h,2),x=O[0],m=O[1],p=ge("uuid",""),f=Object(o.a)(p,2),g=f[0],v=f[1];return Object(a.useEffect)((function(){return void 0!==x&&s&&s.includes("-----BEGIN PUBLIC KEY-----")&&(s!==x?(m(s),setTimeout((function(){window.location.reload()}),500)):"starting"===r&&"0.0"!==i&&e!==i?window.location.reload():"starting"===r&&l((function(e){return Object(j.a)(Object(j.a)({},e),{},{status:"connected"})}))),function(){}}),[s,x,r,i]),Object(a.useEffect)((function(){return""===g&&(v(Object(wt.a)()),setTimeout((function(){window.location.reload()}),500)),function(){}}),[]),Object(a.useEffect)((function(){return Te.on("status",(function(e){l((function(t){return Object(j.a)(Object(j.a)({},t),e)}))})),Te.on("message",(function(e){d(e)})),Te.on("settings",(function(e){e.restored&&e.restored.password&&(e.bbPassword=""),e.restored&&e.restored.telegram&&(e.telegramToken=""),b(e)})),Te.on("bots",(function(e){u(e)})),Te.on("disconnect",(function(e){l((function(e){return Object(j.a)(Object(j.a)({},e),{},{status:"disconnected"})}))})),function(){Te.disconnect()}}),[]),null}var kt=function(){return Object(ie.jsx)(Je.a,{maxSnack:5,children:Object(ie.jsx)(Pe,{children:Object(ie.jsx)(De,{children:Object(ie.jsx)(Ne,{children:Object(ie.jsxs)(Re,{children:[Object(ie.jsx)(yt,{}),Object(ie.jsx)(f.a,{}),Object(ie.jsx)(vt,{})]})})})})})},Ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,469)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(ie.jsx)(c.a.StrictMode,{children:Object(ie.jsx)(kt,{})}),document.getElementById("root")),Ct()},93:function(e){e.exports=JSON.parse('{"version":"2.6.21"}')}},[[374,1,2]]]);
//# sourceMappingURL=main.e49af0f7.chunk.js.map